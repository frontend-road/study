{"id":620800,"title":"02｜基本概念：监控圈子有哪些行业黑话？","content":"<p>你好，我是秦晓辉。</p><p>上一讲我们介绍了监控解决的问题域，并对业界常见开源方案做了横评对比。这一讲我们继续学习监控的相关概念，包括监控、监控指标、指标类型、时序库，还有告警收敛与闭环等。理清监控圈子的这些常用术语之后，我们学习起来会更轻松一些。</p><p>监控这个词在不同的上下文中含义会有一些区别，一般我们说监控MySQL、监控Redis的时候，都是指能够采集到MySQL、Redis的监控数据，并能可视化展示。这时候监控表示数据采集和可视化，不包括告警引擎和事件处理。但当我们讲监控系统的时候，因为说的是整个系统，所以也会包含告警和事件发送等相关功能。</p><p>监控体系中最基础的是监控指标，监控系统就是围绕指标的采集、传输、存储、分析、可视化的一个系统，下面我们就从监控指标这个概念讲起。</p><h2>监控指标</h2><p>监控指标是指数值类型的监控数据，比如某个机器的内存利用率，某个MySQL实例的当前连接数，某个Redis的最大内存上限等等。不同的监控系统，对于监控指标有不同的描述方式，典型的方式有三种，下面我们分别介绍一下。</p><h3>全局唯一字符串作为指标标识</h3><p>监控指标通常是一个全局唯一的字符串，比如某机器的内存利用率 host.10.2.3.4.mem_used_percent，这个字符串中包含了机器的信息，也包含了指标名，可以唯一标识一条监控指标。假设监控数据采集的频率是30秒，2分钟内采集了4个数据点，一个数据点包含一个时间戳和一个值，我们看一下如何用JSON表示这个监控指标及其监控数据。</p><!-- [[[read_end]]] --><pre><code class=\"language-plain\">{\n\t\"name\": \"host.10.2.3.4.mem_used_percent\",\n\t\"points\": [\n\t\t{\n\t\t\t\"clock\": 1662449136,\n\t\t\t\"value\": 45.4\n\t\t},\n\t\t{\n\t\t\t\"clock\": 1662449166,\n\t\t\t\"value\": 43.2\n\t\t},\n\t\t{\n\t\t\t\"clock\": 1662449196,\n\t\t\t\"value\": 44.9\n\t\t},\n\t\t{\n\t\t\t\"clock\": 1662449226,\n\t\t\t\"value\": 44.8\n\t\t}\n\t]\n}\n</code></pre><p>相对老一些的监控系统，比如 Graphite，就是使用这种方式来标识监控指标的。一些老的监控数据采集器，比如 Collectd，也是这样标识监控指标的。</p><p>虽然这种方式一目了然，非常清晰，但是缺少对维度信息的描述，不便于做聚合计算。比如下面几条用于描述HTTP请求状态码的指标。</p><pre><code class=\"language-plain\">myhost.service1.http_request.200.get\nmyhost.service1.http_request.200.post\nmyhost.service1.http_request.500.get\nmyhost.service1.http_request.500.post\nmyhost.service2.http_request.200.get\nmyhost.service2.http_request.500.post\n</code></pre><p>myhost这个机器上部署了两个服务，分别是 service1 和 service2。有些请求状态码是200，有些是500，有些HTTP method是get，有些是post。我们想分别统计这些指标的数量，就要把这些分类维度信息都拼到指标标识中。但是这样做会产生两个弊端：一是看起来比较混乱，二是不方便聚合统计。</p><p>举个例子，比如我想计算 service1 这个服务的成功率，要把 service1 里所有状态码为200的请求数量拿到，除以 service1 所有请求的数量。如果预先知道所有状态码、所有HTTP method，则可以枚举指标名称，拉取监控数据。如果不知道所有状态码和HTTP method，就要先用正则匹配指标标识，查询出指标列表再拉取监控数据做计算，处理起来非常麻烦。</p><p>其实我这是用马后炮视角解释这个问题的，实际上，在Graphite、Collectd、Zabbix、Cacti 这些软件盛行的时代，这个问题并不明显。因为那个时代主要关注的是机器设备、数据库、中间件的监控，不会有很多维度的信息。直到业界开始关注应用层面监控的时候，才暴露出这个问题。</p><h3>标签集的组合作为指标标识</h3><p>2010年左右，有一款名叫 <a href=\"http://opentsdb.net/\">OpenTSDB</a> 的时序数据库诞生了。虽然现在已经较少使用了，但是OpenTSDB 描述指标的方式，对业界有很大影响。下面是通过文本协议推给 OpenTSDB 的数据示例，我们可以从中看出指标标识的定义方式。</p><pre><code class=\"language-plain\">mysql.bytes_received 1287333217 327810227706 schema=foo host=db1\nmysql.bytes_sent 1287333217 6604859181710 schema=foo host=db1\nmysql.bytes_received 1287333232 327812421706 schema=foo host=db1\nmysql.bytes_sent 1287333232 6604901075387 schema=foo host=db1\nmysql.bytes_received 1287333321 340899533915 schema=foo host=db2\nmysql.bytes_sent 1287333321 5506469130707 schema=foo host=db2\n</code></pre><p>上面这6条监控指标，都通过空格把指标分隔成了多个字段。第一段是指标名，第二段是时间戳（单位是秒），第三段是指标值，剩下的部分是多个标签（tags/labels），每个标签都是key=value的格式，多个标签之间使用空格分隔。</p><p>除了 OpenTSDB，新时代的时序库大都引入了标签的概念，比如 Prometheus，它们甚至认为指标名也是一种特殊的标签（其标签key是__name__ ），所以 Prometheus 仅仅使用标签集作为指标标识，从Prometheus 的数据结构定义中就可以看出来。</p><pre><code class=\"language-plain\">message Sample {\n&nbsp; double value&nbsp; &nbsp; = 1;\n&nbsp; int64 timestamp = 2;\n}\n\nmessage Label {\n&nbsp; string name&nbsp; = 1;\n&nbsp; string value = 2;\n}\n\nmessage TimeSeries {\n&nbsp; repeated Label labels&nbsp; &nbsp;= 1 [(gogoproto.nullable) = false];\n&nbsp; repeated Sample samples = 2 [(gogoproto.nullable) = false];\n}\n</code></pre><p>TimeSeries 这个结构中并没有一个单独的 metric 字段，指标名的信息实际是放到了 labels 数组中了。</p><h3>优雅高效的 Influx 指标格式</h3><p>InfluxData公司有一款开源时序库非常有名，叫<a href=\"https://www.influxdata.com/\">InfluxDB</a>，InfluxDB在接收监控数据写入时，设计了一个非常精巧的指标格式，一行可以传输多个指标。</p><pre><code class=\"language-plain\">mesurement,labelkey1=labelval1,labelkey2=labelval2 field1=1.2,field2=2.3 timestamp\n</code></pre><p>总体来看，分为4个部分，measurement,tag_set field_set timestamp，其中tag_set是可选的，tag_set与前面的measurement之间用逗号分隔，其他各个部分之间都是用空格来分隔的。我们可以通过下面的例子来理解。</p><pre><code class=\"language-plain\">weather,location=us-midwest temperature=82 1465839830100400200\n  |    -------------------- --------------  |\n  |             |             |             |\n  |             |             |             |\n+-----------+--------+-+---------+-+---------+\n|measurement|,tag_set| |field_set| |timestamp|\n+-----------+--------+-+---------+-+---------+\n</code></pre><p>我们把上面 OpenTSDB 的指标示例改写成 Influx 格式，结果是这样的。</p><pre><code class=\"language-plain\">mysql,schema=foo,host=db1 bytes_received=327810227706,bytes_sent=6604859181710 1287333217000000000\nmysql,schema=foo,host=db1 bytes_received=327812421706,bytes_sent=6604901075387 1287333232000000000\nmysql,schema=foo,host=db2 bytes_received=340899533915,bytes_sent=5506469130707 1287333321000000000\n</code></pre><p>注意，时间戳的单位是纳秒。这种写法设计很精巧，标签重复度低，field越多的情况下它的优势越明显，网络传输的时候可以节省更多带宽。当然了，OpenTSDB的格式或者Prometheus的格式如果做了数据压缩，节省带宽的效果也是不错的，因为字符的压缩效果一般比较明显。现如今机房内部通信动辄万兆网卡，这个流量的大小区别倒也不用太关注。</p><p><img src=\"https://static001.geekbang.org/resource/image/ee/22/ee5a62f16cb36b57cf560c1b00e41822.png?wh=1920x581\" alt=\"图片\"></p><p>监控指标的概念非常重要，可以说监控系统中的一切都是围绕监控指标来的，所以我们用了大量篇幅来解释监控指标，还讲解了几种不同指标的描述方式。除了这些描述方式之外，监控指标还分为各种不同的类型，下面我们一起来看一下。</p><h2>指标类型</h2><p>有些监控系统是不区分指标类型的，有些会做区分。90年代左右社区就出现了一款作品 <a href=\"https://oss.oetiker.ch/rrdtool/\">RRDtool</a>，它是一个环形数据库，也是一个绘图引擎，很多监控工具都是使用 RRDtool 来存储或绘制监控趋势图的，比如 Cacti、MRTG、Zabbix 等等。RRDtool 还提出了数据类型的概念，支持GAUGE、COUNTER、DERIVE、DCOUNTER、DDERIVE、ABSOLUTE  等多种数据类型。</p><p>Prometheus 生态也支持数据类型，分为Gauge、Counter、Histogram、Summary4种，下面我们简单了解一下 Prometheus 的这 4 种类型。</p><h3>Gauge</h3><p>测量值类型，可大可小，可正可负。这种类型的数据，我们通常关注的是<strong>当前值</strong>，比如房间里的人数、队列积压的消息数、今年公司的收入和净利润。</p><h3>Counter</h3><p>表示<strong>单调递增的值</strong>，比如操作系统自启动以来网卡接收到的所有流量包的数量。每接收到一个包，操作系统就会加1，所以这个值是持续递增的。但是操作系统可能会重启，导致这个值出现重置，比如第一次是从0一直涨到了239423423，然后机器重启，新采集的数据是一些比239423423小很多的值，这种情况怎么办？此时Prometheus看到值没有递增，就能感知到重置的情况，会把新采集的值加上239423423再做计算。</p><h3>Histogram</h3><p>直方图类型，用于<strong>描述数据分布</strong>，最典型的应用场景就是监控延迟数据，计算90分位、99分位的值。所谓的分位值，就是把一批数据从小到大排序，然后取X%位置的数据，90分位就是指样本数据第90%位置的值。</p><p>有些服务访问量很高，每秒几百万次，如果要把所有请求的延迟数据全部拿到，排序之后再计算分位值，这个代价就太高了。使用 Histogram 类型，可以用较小的代价计算一个大概值。当然，不是特别准确，但是在监控场景足够用了，监控毕竟只是一个采样的系统，对数据准确性要求没有那么高。</p><p>Histogram的做法是根据数据的value范围，规划多个桶（bucket），把样本数据点放入不同的桶来统计。比如我们有个服务 service1，它的接口延迟最小的通常在一两百毫秒，最大的通常在1秒，如果超过3秒，大概率就是系统不正常了。此时我们可以规划4个桶，假设有1000个请求，我们来看下各个桶和对应的样本统计值。</p><p><img src=\"https://static001.geekbang.org/resource/image/f0/28/f0a3eca509ac8bebcdb07685c4ba3d28.png?wh=1978x730\" alt=\"\"></p><ul>\n<li>延迟小于200毫秒的，有600个请求落到了这个区间。</li>\n<li>延迟小于1秒的，有850个请求落到了这个区间，其中大于200毫秒的有250个请求。</li>\n<li>延迟小于3秒的，有1000个请求落到了这个区间，其中大于1秒的有150个请求。</li>\n<li>延迟小于正无穷的，也就是总量，有1000个请求落到了这个区间，说明没有大于3秒的请求。</li>\n</ul><p>现在我们来计算90分位值，也就是第900个请求，说明这个值落到了第3个桶，延迟小于3秒的桶，于是我们可以得出结论，90分位的延迟大小是1~3秒之间。</p><p>虽然知道了区间范围，但是我们还无法得出具体的值。为了计算出具体的值，Prometheus有个假设，它认为各个桶里的样本数据是均匀分布的，即第三个桶的这150个请求，延迟最小的请求恰好延迟了1秒，延迟最大的恰好延迟了3秒，总量的第900个请求，是这个桶里的第50个请求，最终90分位的延迟数据计算方法是：</p><p>$$（3-1）\\times（50\\div150）+1=1.67 秒$$</p><p><img src=\"https://static001.geekbang.org/resource/image/0b/0f/0bb6b97835f11ae512517eb2040df30f.png?wh=1930x1020\" alt=\"\" title=\"第三个桶\"></p><p>这就是 histogram_quantile 的计算方法。histogram_quantile 是 Prometheus 的一个函数，这里为了说明 Histogram 类型，提前给你讲一下这个函数的计算逻辑。</p><p>虽然Histogram这种做法相比于把所有请求延迟数据都存储起来再计算延迟，性能有了巨大的提升，但是要同时计算成千上万个接口的分位值延迟数据，还是非常耗费资源的，甚至会造成服务端OOM。于是就有了 Summary 类型。</p><h3>Summary</h3><p>Summary这种类型是<strong>在客户端计算分位值</strong>，然后把计算之后的结果推给服务端存储，展示的时候直接查询即可，不需要做很重的计算，性能大幅提升。</p><p>听起来不错，但是有个问题，Summary的计算是在客户端计算的，也就意味着不是全局的分位值，比如某个服务 service1，部署在两个机器上，服务代码里通过内嵌Prometheus的SDK做了埋点监控，SDK里会计算Summary数据。也就是说，分位值延迟数据是进程粒度的，不是整个服务粒度的。</p><p>这个问题很严重吗？其实也没什么大不了的，这两个机器前面肯定有负载均衡，负载均衡会保证把请求均匀地打给后端的两个实例。一个实例内部计算的分位值，理论上和全局计算的分位值差别不会很大。另外，如果某个实例有故障，比如硬盘问题，导致落在这个实例的请求延迟大增，我们在实例粒度计算的延迟数据反而更容易发现问题。</p><p>到这里，我们就把 Prometheus 的四种数据类型介绍完了，现在请你闭上眼睛回顾一下这4种类型，再往上翻一下Prometheus的数据传输结构，就是那个 TimeSeries 的 Proto 结构，看看能否发现一些问题？</p><h3>类型扩展知识</h3><p>TimeSeries数据结构中没有包含类型信息！惊不惊喜？意不意外？我现在采集了一些监控数据，传给 Prometheus（比如通过 remote write 协议），我的数据是分了多种类型的，传输的时候却没有办法告诉 Prometheus这些数据的类型是什么，难道它不需要知道我的数据类型吗？</p><p>其实从存储角度还真的不需要知道，存储的时候只要知道指标标识、时间戳、值，就足够了。后续做 PromQL 查询计算的时候，不同的函数有不同的行为，比如 rate、increase 函数，我们就给它传入 Counter 类型的数据作为参数即可。对于 histogram_quantile 函数，就传入带有 le 标签的 bucket 指标。悄悄告诉你，其实你给 rate 函数传入一个 Gauge 类型的指标，也照样可以拿到值，虽然这个值没有合乎情理的业务语义。</p><p>那为什么还需要划分这么多类型呢？最主要的作用是<strong>在采集侧埋点的时候，SDK会根据数据类型做不同的计算逻辑</strong>，比如Histogram类型，每次请求进来的时候，代码里调用一下SDK的Observe方法通知SDK，SDK就会自动计算生成多个指标，提升埋点便利性。</p><p>了解了监控系统中指标的采集和传输之后，接下来就是如何存储这些数据了。监控数据是周期性采集的，每条数据都关联一个时间戳，所以都是时序数据，使用时序库存储，下面我们就来看看时序库的概念。</p><h2>时序库</h2><p>时序库（Time series database）是一种专门处理时序数据的数据库 。我们常见的数据库中，MySQL是关系型数据库，Redis是KV数据库，MongoDB是文档数据库，而 InfluxDB、VictoriaMetrics、M3DB等都是时序库，Prometheus其实也内置实现了一个时序存储模块。</p><p>那什么是<strong>时序数据</strong>呢？时序数据最大的特点是每一条数据都带有时间戳，通常是单调顺序，不会乱序，流式发给服务端，通常不会修改，比如指标数据和日志数据，都是典型的时序数据。存储领域没有银弹，不同的数据场景侧重点不同，所以针对时序数据这个特定场景，产生了时序库这个专门的细分领域。在DB-Engines网站上，有一个<a href=\"https://db-engines.com/en/ranking/time+series+dbms\">时序库的流行度排序</a>，你可以了解到当下哪些时序库比较流行。</p><p>之前我们提到监控系统有两个核心能力，一个是监控，一个是告警。告警部分也有一些关键概念，比如告警收敛、告警闭环，下面我们一起来看一下。</p><h2>告警收敛</h2><p>基础设施层面的故障，比如基础网络问题，可能会瞬间产生很多告警事件，形成告警风暴，导致接收告警的媒介拥塞，比如手机不停接收到短信和电话呼入，没办法使用。这个时候，我们就要想办法<strong>让告警事件变少</strong>，用的方法就是告警收敛。</p><p>最典型的手段是告警聚合发送，聚合可以采用不同的维度，比如时间维度、策略维度、监控对象维度等等。如果100台机器同时报失联，就可以合并成一条告警通知，减少打扰。</p><p>另外一个典型的收敛手段是把多个事件聚合成告警，把多个告警聚合成故障。比如某个机器的CPU利用率告警，监控系统可能每分钟都会产生一条事件，这多个事件的告警规则、监控对象、监控指标都相同，所以可以收敛为一条告警。假设有100台机器都告警了，其中50台属于业务A，另外50台属于业务B，我们可以按照业务来做聚合，聚合之后产生两个故障，这样就可以起到很好的收敛效果。</p><h2>告警闭环</h2><p>闭环这个词是个互联网黑话，表示某个事情有始有终，告警怎么判断是否闭环了呢？问题最终被解决，告警恢复，就算是闭环了。产品怎么设计才能保证告警闭环呢？通常来讲，没人响应的告警能够升级通知，告警oncall人员可以认领告警，基本就有比较好的保障了。</p><h2>小结</h2><p>这一讲我们主要讲解一些监控领域的关键概念，这些基础知识是整个监控体系知识蓝图的根基，一定要掌握。为了让你记忆更加深刻，下面我对这一讲的内容做一个简单总结。</p><ul>\n<li><strong>监控：</strong>这个词在不同的上下文会有不同的语义，有的时候表示数据采集和可视化，有的时候表示整个监控系统。不过不管怎么理解，通常都不影响交流。</li>\n<li><strong>监控指标：</strong>这个概念很关键，不同的监控产品有不同的描述方式，不过随着 OpenMetrics 标准的建立，指标描述方式会渐渐趋于一致。重点要了解 Prometheus 的指标描述方式metric + labels，当然metric 也可以看作一个特殊的 label。Influx 格式也很重要，建议你掌握，如果使用 Telegraf 作为采集器，就绕不过去这个格式。</li>\n<li><strong>指标类型</strong>：针对时下流行的 Prometheus，我们讲解了4种指标类型及每个类型的适用场景，最后明确了指标类型最核心的作用：在采集侧埋点时，SDK会根据数据类型做不同的计算逻辑。</li>\n<li><strong>时序库：</strong>存储时序序列数据的数据库，它已经成为了一个单独的数据库细分方向，而且随着IoT的场景越来越多，以及微服务的发展，时序库这个话题也越来越流行。</li>\n<li><strong>告警收敛和告警闭环：</strong>告警事件层面的话题是所有监控系统都需要处理的。当然也可以作为一个专门的产品和多种监控系统对接，专注处理告警事件，希望国内能有超越 Bigpanda、Pagerduty 的产品出现。</li>\n</ul><p>最后我把这节课的重点总结成了一张脑图，你可以多看几遍，加深记忆。你也可以自己试着总结一下这节课的重点，画一画图。</p><p><img src=\"https://static001.geekbang.org/resource/image/b2/f9/b2a5d68462fa2yy22615720ee10fe2f9.jpg?wh=1861x1781\" alt=\"\"></p><h2>互动时刻</h2><p>这一讲我们聊了很多监控方向的黑话，现在我们来互动一下，你能否用一句话或者一个词，来证明你是圈内人士，让我们一起看看有多少同道中人。也欢迎你把今天的内容分享给你身边的朋友，邀他一起学习。我们下一讲再见！</p><p>点击加入<a href=\"https://jinshuju.net/f/Ql3qlz\">课程交流群</a></p>","neighbors":{"left":{"article_title":"01｜背景信息：监控需求以及开源方案的横评对比","id":620790},"right":{"article_title":"03｜架构概述：一个监控系统的典型架构是什么样的？","id":622150}},"comments":[{"had_liked":false,"id":366156,"user_name":"徐石头","can_delete":false,"product_type":"c1","uid":1035885,"ip_address":"湖南","ucode":"D8FA8A64FB7E33","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ce/6d/530df0dd.jpg","comment_is_top":true,"comment_ctime":1673426772,"is_pvip":true,"replies":[{"id":133413,"content":"纯个人见解哈一起探讨：小公司千万不要自研监控系统，开源的监控系统其实都挺强大了，如果基于开源的二开，后面开源的升级又不好跟进，如果不再跟进，负责二开的人离职，后面新接手的人可能不认可这个做法或者找不到接手的人，容易一地鸡毛，后来人会背地里骂这个二开的人的。\n\n二开的初衷，可能是开源产品某些功能不符合自己公司的需求。其实真的有那么多定制化需求么？火爆的开源软件可能都是几千上万github star，很多公司在用，我们的需求真的就那么特殊么？需要仔细再调研一下。很可能是开源软件也有这个功能，我们可能不知道。\n\n如果最终还是准备二开，建议：\n1，尽量不改开源软件的代码，基于它的API做封装\n2，如果必须要改，觉得某些改动是通用需求，就提pr，merge回这个开源软件，这样别人也可以帮你review这个设计和代码，你也可以提升个人影响力，开源社区很欢迎这类pr，所有公司都受益\n\n上面主要是说的二开的问题，如果是完全自研，嗯，，，应该不会完全自研吧，这个时代，几乎没有完全自研的软件了....\n\n如果你被公司招聘来就是做监控系统的，不搞点事情就没饭吃，怎么整？建议多做一些最佳实践，在某些点上做透，做一些场景化的解决方案，看看监控系统的用户的痛点是什么，很多事情可以干的","user_name":"作者回复","user_name_real":"编辑","uid":1001078,"ctime":1673439970,"ip_address":"上海","comment_id":366156,"utype":1}],"discussion_count":7,"race_medal":0,"score":2,"product_id":100522501,"comment_content":"想参照课程给公司开发一套监控系统，把k8s，Redis，MySQL，Elasicsearch，Kafka综合在一个系统里，大公司运维监控比较完善，针对小公司的监控系统应该怎么做，要从哪些方面入手？希望老师多考虑下小公司，一方面小公司更多，另一方面运维监控非常匮乏，人员有限，确实是痛点","like_count":32,"discussions":[{"author":{"id":1001078,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/46/76/67e111da.jpg","nickname":"巴辉特","note":"","ucode":"DCBB150A99548D","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":599314,"discussion_content":"纯个人见解哈一起探讨：小公司千万不要自研监控系统，开源的监控系统其实都挺强大了，如果基于开源的二开，后面开源的升级又不好跟进，如果不再跟进，负责二开的人离职，后面新接手的人可能不认可这个做法或者找不到接手的人，容易一地鸡毛，后来人会背地里骂这个二开的人的。\n\n二开的初衷，可能是开源产品某些功能不符合自己公司的需求。其实真的有那么多定制化需求么？火爆的开源软件可能都是几千上万github star，很多公司在用，我们的需求真的就那么特殊么？需要仔细再调研一下。很可能是开源软件也有这个功能，我们可能不知道。\n\n如果最终还是准备二开，建议：\n1，尽量不改开源软件的代码，基于它的API做封装\n2，如果必须要改，觉得某些改动是通用需求，就提pr，merge回这个开源软件，这样别人也可以帮你review这个设计和代码，你也可以提升个人影响力，开源社区很欢迎这类pr，所有公司都受益\n\n上面主要是说的二开的问题，如果是完全自研，嗯，，，应该不会完全自研吧，这个时代，几乎没有完全自研的软件了....\n\n如果你被公司招聘来就是做监控系统的，不搞点事情就没饭吃，怎么整？建议多做一些最佳实践，在某些点上做透，做一些场景化的解决方案，看看监控系统的用户的痛点是什么，很多事情可以干的","likes_number":8,"is_delete":false,"is_hidden":false,"ctime":1673439970,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"上海","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1041465,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/e4/39/a06ade33.jpg","nickname":"极客雷","note":"","ucode":"0DBAC4CB9C7BCD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1001078,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/46/76/67e111da.jpg","nickname":"巴辉特","note":"","ucode":"DCBB150A99548D","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":599530,"discussion_content":"一看就是老鸟👍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1673576844,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":599314,"ip_address":"广东","group_id":0},"score":599530,"extra":""}]},{"author":{"id":1567397,"avatar":"https://static001.geekbang.org/account/avatar/00/17/ea/a5/1b4a65ba.jpg","nickname":"邢永胜","note":"","ucode":"B64AB17046B42E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":601072,"discussion_content":"关键出发点就是 坑公司，成就自己呢，随便二开做做东西，离职出去吹牛逼，新员工的感受 ？ 离职跑路了，谁还管上家公司的事","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1675045637,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":3727835,"avatar":"https://static001.geekbang.org/account/avatar/00/38/e1/db/8a30424d.jpg","nickname":"北方的猫","note":"","ucode":"CB34A6FF6BC654","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1567397,"avatar":"https://static001.geekbang.org/account/avatar/00/17/ea/a5/1b4a65ba.jpg","nickname":"邢永胜","note":"","ucode":"B64AB17046B42E","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":629027,"discussion_content":"你说的是个正事","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1696549368,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":601072,"ip_address":"吉林","group_id":0},"score":629027,"extra":""}]},{"author":{"id":1035885,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/ce/6d/530df0dd.jpg","nickname":"徐石头","note":"","ucode":"D8FA8A64FB7E33","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":599336,"discussion_content":"情况是这样，公司产品是一个短视频app，我负责服务端接口开发，小公司人数不多，基础设施主要靠购买第三方。产品上线运营一年多业务慢慢发展，所有基础设施只能登录第三方云服务厂商查看监控指标，每次上线需要查看运行情况很不方便。找报错问题只能从日志里面一点点查，很难定位bug。\n看到课程后有想搭建个监控系统的想法，把依赖的存储组件和中间件放到一起监控，方便快速发现问题。\n首先是找一个尽量需要少开发的开源监控产品，了解规则后把第三方组件的指标数据同步到产品中，标准是尽量找成熟稳定用的人多的，少开发，优先配置。从来没考虑自己从零实现，成本太高。\n我想大部分小公司情况应该都差不多，希望老师课程里针对小公司推荐一些比较好的能快速上手的开源产品或者解决方案，不一定要多高大上，要能解决运维监控问题。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1673448432,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"湖南","group_id":0},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1797901,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/6f/0d/7dc0b289.jpg","nickname":"记事本","note":"","ucode":"3E5018B9550296","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1035885,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/ce/6d/530df0dd.jpg","nickname":"徐石头","note":"","ucode":"D8FA8A64FB7E33","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":599424,"discussion_content":"公司运维呢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1673513754,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":599336,"ip_address":"广东","group_id":0},"score":599424,"extra":""},{"author":{"id":3681787,"avatar":"https://static001.geekbang.org/account/avatar/00/38/2d/fb/ea4ecab0.jpg","nickname":"单曲循环","note":"","ucode":"5375F28EF83995","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1797901,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/6f/0d/7dc0b289.jpg","nickname":"记事本","note":"","ucode":"3E5018B9550296","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":625697,"discussion_content":"小公司没运维的，都是开发负责","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1692079215,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":599424,"ip_address":"广东","group_id":0},"score":625697,"extra":""}]}]},{"had_liked":false,"id":366119,"user_name":"怀朔","can_delete":false,"product_type":"c1","uid":1006865,"ip_address":"上海","ucode":"52FAC1C2FD37B6","user_header":"https://static001.geekbang.org/account/avatar/00/0f/5d/11/e1f36640.jpg","comment_is_top":false,"comment_ctime":1673413777,"is_pvip":false,"replies":[{"id":133398,"content":"哈哈哈","user_name":"作者回复","user_name_real":"编辑","uid":1001078,"ctime":1673425446,"ip_address":"上海","comment_id":366119,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100522501,"comment_content":"这是一个误报","like_count":18,"discussions":[{"author":{"id":1001078,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/46/76/67e111da.jpg","nickname":"巴辉特","note":"","ucode":"DCBB150A99548D","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":599277,"discussion_content":"哈哈哈","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1673425447,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"上海","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":366107,"user_name":"hshopeful","can_delete":false,"product_type":"c1","uid":1200048,"ip_address":"上海","ucode":"EE8D6E0A40607E","user_header":"https://static001.geekbang.org/account/avatar/00/12/4f/b0/ab179368.jpg","comment_is_top":false,"comment_ctime":1673406180,"is_pvip":false,"replies":[{"id":133397,"content":"👍","user_name":"作者回复","user_name_real":"编辑","uid":1001078,"ctime":1673425433,"ip_address":"上海","comment_id":366107,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100522501,"comment_content":"关于监控，脑海中有几句话想跟大家分享下：\n1、当 facebook 还是 facebook 的时候，它开源的 gorilla 时序数据压缩算法特别适合监控领域的数据存储，prometheus 中已经采用\n2、对监控指标进行流式聚合计算的时候，数据准确性和时效性需要做出 tradeoff\n3、当你的监控告警指标太多的时候，相当于没有指标，一定要筛选出核心待关注的监控告警指标\n4、怎么对监控系统本身进行监控","like_count":13,"discussions":[{"author":{"id":1001078,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/46/76/67e111da.jpg","nickname":"巴辉特","note":"","ucode":"DCBB150A99548D","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":599276,"discussion_content":"👍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1673425433,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"上海","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1261493,"avatar":"https://static001.geekbang.org/account/avatar/00/13/3f/b5/5fe77e16.jpg","nickname":"不经意间","note":"","ucode":"C39D98697ACB8B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":599465,"discussion_content":"监控系统本身做监控？\n开源的好像都有了prom或者zabbix","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1673532157,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2843479,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/63/57/cba4c68b.jpg","nickname":"小虎子🐯","note":"","ucode":"4C9530B3FB407B","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":599319,"discussion_content":"感谢分享，送花花给你：)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1673442364,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":366089,"user_name":"April","can_delete":false,"product_type":"c1","uid":1106706,"ip_address":"上海","ucode":"FEB779C5D2946C","user_header":"https://static001.geekbang.org/account/avatar/00/10/e3/12/fd02db2e.jpg","comment_is_top":false,"comment_ctime":1673397834,"is_pvip":false,"replies":[{"id":133392,"content":"Summary通常也是用于统计接口的延迟，姑且可以理解为：\n\n比如某个接口 &#47;api&#47;v1&#47;login\n服务每次收到这个接口的请求，就通过SDK记录一下延迟，比如第一次演示3ms，第二次5ms，第三次4ms，，，第1000次3ms\n\nSummary 的逻辑就是把这1000个数值从小到大排序，然后就可以取第99%的位置的那个值作为99分位的值上报，取第90%的位置的那个值作为90分位的值上报，当然也会计算这1000个值的最大值、最小值、平均值上报。\n\n这个计算是在进程颗粒度的，不是在服务级别的，服务级别的计算只能通过Histogram，把多个进程的指标汇聚到一起计算","user_name":"作者回复","user_name_real":"编辑","uid":1001078,"ctime":1673423280,"ip_address":"上海","comment_id":366089,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100522501,"comment_content":"老师能根据Summary给个示例吗？没太理解","like_count":8,"discussions":[{"author":{"id":1001078,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/46/76/67e111da.jpg","nickname":"巴辉特","note":"","ucode":"DCBB150A99548D","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":599262,"discussion_content":"Summary通常也是用于统计接口的延迟，姑且可以理解为：\n\n比如某个接口 /api/v1/login\n服务每次收到这个接口的请求，就通过SDK记录一下延迟，比如第一次演示3ms，第二次5ms，第三次4ms，，，第1000次3ms\n\nSummary 的逻辑就是把这1000个数值从小到大排序，然后就可以取第99%的位置的那个值作为99分位的值上报，取第90%的位置的那个值作为90分位的值上报，当然也会计算这1000个值的最大值、最小值、平均值上报。\n\n这个计算是在进程颗粒度的，不是在服务级别的，服务级别的计算只能通过Histogram，把多个进程的指标汇聚到一起计算","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1673423280,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"上海","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1106706,"avatar":"https://static001.geekbang.org/account/avatar/00/10/e3/12/fd02db2e.jpg","nickname":"April","note":"","ucode":"FEB779C5D2946C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1001078,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/46/76/67e111da.jpg","nickname":"巴辉特","note":"","ucode":"DCBB150A99548D","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":599442,"discussion_content":"明白了，谢谢秦老师","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1673521026,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":599262,"ip_address":"北京","group_id":0},"score":599442,"extra":""}]},{"author":{"id":1200048,"avatar":"https://static001.geekbang.org/account/avatar/00/12/4f/b0/ab179368.jpg","nickname":"hshopeful","note":"","ucode":"EE8D6E0A40607E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":599215,"discussion_content":"采集客户端每次采集到一个数据点，会事先根据配置的分位值点位（25,50,75,99）进行计算","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1673406415,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"湖北","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":366084,"user_name":"呵呵","can_delete":false,"product_type":"c1","uid":1098382,"ip_address":"上海","ucode":"E848AD01CE3893","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epiaqzRM3iadZqAjk8BTmNXqgo8kkWgYT8CmptCHLXlfpQsReJhA6qyzo1876UugksC4VyB0tZPRgYQ/132","comment_is_top":false,"comment_ctime":1673370605,"is_pvip":false,"replies":[{"id":133390,"content":"不是。大家其实都是支持标签的。我想表达的是influx格式在多个field的场景，会减少标签传输量，比如cpu的指标：influx来描述的话是这么一条：\ncpu,cpu=cpu0,host=loaner time_active=202224.15999999992,time_guest=30250.35,time_guest_nice=0,time_idle=1527035.04,time_iowait=1352,time_irq=0,time_nice=169.28,time_softirq=6281.4,time_steal=0,time_system=40097.14,time_user=154324.34 1568760922000000000\n\n如果用opentsdb来描述就是这样的：\n\ncpu.time_active 202224.15999999992 1568760922 cpu=cpu0 host=loaner\ncpu.time_guest 30250.35 1568760922 cpu=cpu0 host=loaner\ncpu.time_guest_nice 0 1568760922 cpu=cpu0 host=loaner\ncpu.time_idle 1527035.04 1568760922 cpu=cpu0 host=loaner\ncpu.time_iowait 1352 1568760922 cpu=cpu0 host=loaner\ncpu.time_irq 0 1568760922 cpu=cpu0 host=loaner\ncpu.time_nice 169.28 1568760922 cpu=cpu0 host=loaner\ncpu.time_softirq 6281.4 1568760922 cpu=cpu0 host=loaner\ncpu.time_steal 0 1568760922 cpu=cpu0 host=loaner\ncpu.time_system 40097.14 1568760922 cpu=cpu0 host=loaner\ncpu.time_user 154324.34 1568760922 cpu=cpu0 host=loaner\n\n这里每一行里都有 cpu=cpu0 host=loaner 这俩标签，当然，每一行也都要传输时间戳，重复度比较高，会多一些字符串传输成本","user_name":"作者回复","user_name_real":"作者","uid":1001078,"ctime":1673422808,"ip_address":"上海","comment_id":366084,"utype":1}],"discussion_count":6,"race_medal":0,"score":2,"product_id":100522501,"comment_content":"指标格式对比没太看懂，是想表达influx的全是kv，opentsdb的不全是。所以同一时间的消息，influx能少传几条，省了n个时间戳？怎么就标签重复的低了？不还是kv吗？","like_count":8,"discussions":[{"author":{"id":1001078,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/46/76/67e111da.jpg","nickname":"巴辉特","note":"","ucode":"DCBB150A99548D","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":599258,"discussion_content":"不是。大家其实都是支持标签的。我想表达的是influx格式在多个field的场景，会减少标签传输量，比如cpu的指标：influx来描述的话是这么一条：\ncpu,cpu=cpu0,host=loaner time_active=202224.15999999992,time_guest=30250.35,time_guest_nice=0,time_idle=1527035.04,time_iowait=1352,time_irq=0,time_nice=169.28,time_softirq=6281.4,time_steal=0,time_system=40097.14,time_user=154324.34 1568760922000000000\n\n如果用opentsdb来描述就是这样的：\n\ncpu.time_active 202224.15999999992 1568760922 cpu=cpu0 host=loaner\ncpu.time_guest 30250.35 1568760922 cpu=cpu0 host=loaner\ncpu.time_guest_nice 0 1568760922 cpu=cpu0 host=loaner\ncpu.time_idle 1527035.04 1568760922 cpu=cpu0 host=loaner\ncpu.time_iowait 1352 1568760922 cpu=cpu0 host=loaner\ncpu.time_irq 0 1568760922 cpu=cpu0 host=loaner\ncpu.time_nice 169.28 1568760922 cpu=cpu0 host=loaner\ncpu.time_softirq 6281.4 1568760922 cpu=cpu0 host=loaner\ncpu.time_steal 0 1568760922 cpu=cpu0 host=loaner\ncpu.time_system 40097.14 1568760922 cpu=cpu0 host=loaner\ncpu.time_user 154324.34 1568760922 cpu=cpu0 host=loaner\n\n这里每一行里都有 cpu=cpu0 host=loaner 这俩标签，当然，每一行也都要传输时间戳，重复度比较高，会多一些字符串传输成本","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1673422808,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"上海","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1097577,"avatar":"https://static001.geekbang.org/account/avatar/00/10/bf/69/dbfd10f7.jpg","nickname":"追光者","note":"","ucode":"B45B3C214219BB","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1001078,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/46/76/67e111da.jpg","nickname":"巴辉特","note":"","ucode":"DCBB150A99548D","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":599334,"discussion_content":"influx 指标数据有压缩么，Prometheus 压缩完会比这个少么","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1673447212,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":599258,"ip_address":"北京","group_id":0},"score":599334,"extra":""}]},{"author":{"id":1200048,"avatar":"https://static001.geekbang.org/account/avatar/00/12/4f/b0/ab179368.jpg","nickname":"hshopeful","note":"","ucode":"EE8D6E0A40607E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":599216,"discussion_content":"influx 的格式标签重复度低是因为，具有相同标签组合的多个指标合并到一行来表示和传输","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1673406593,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"湖北","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1261493,"avatar":"https://static001.geekbang.org/account/avatar/00/13/3f/b5/5fe77e16.jpg","nickname":"不经意间","note":"","ucode":"C39D98697ACB8B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1200048,"avatar":"https://static001.geekbang.org/account/avatar/00/12/4f/b0/ab179368.jpg","nickname":"hshopeful","note":"","ucode":"EE8D6E0A40607E","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":599469,"discussion_content":"那这种算是指标集吗。\n还是说比如多个服务器的cpu_system_used这种会变成指标集","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1673532735,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":599216,"ip_address":"北京","group_id":0},"score":599469,"extra":""}]},{"author":{"id":1307012,"avatar":"https://static001.geekbang.org/account/avatar/00/13/f1/84/7d21bd9e.jpg","nickname":"Goal","note":"","ucode":"C337CD4C7E07B0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":600455,"discussion_content":"这个提问太好了，刚好我也没有理解这块，看完老师的回答初步理解了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1674392448,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"内蒙古","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1675966,"avatar":"https://static001.geekbang.org/account/avatar/00/19/92/be/8de4e1fe.jpg","nickname":"kaizen","note":"","ucode":"313EEA97AEC7C3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":599204,"discussion_content":"我也不能苟同说 influx line protocol 理解成本高","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1673402529,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":366087,"user_name":"臭猫","can_delete":false,"product_type":"c1","uid":1313181,"ip_address":"上海","ucode":"5C3D1ED80055B7","user_header":"https://static001.geekbang.org/account/avatar/00/14/09/9d/8af6cb1e.jpg","comment_is_top":false,"comment_ctime":1673395485,"is_pvip":false,"replies":[{"id":133391,"content":"哈哈 🤝","user_name":"作者回复","user_name_real":"编辑","uid":1001078,"ctime":1673422963,"ip_address":"上海","comment_id":366087,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100522501,"comment_content":"warning:xx节点cpu使用率超过80%，持续时间超过5分钟","like_count":7,"discussions":[{"author":{"id":1001078,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/46/76/67e111da.jpg","nickname":"巴辉特","note":"","ucode":"DCBB150A99548D","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":599260,"discussion_content":"哈哈 🤝","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1673422964,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"上海","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":366094,"user_name":"无名无姓","can_delete":false,"product_type":"c1","uid":2621412,"ip_address":"上海","ucode":"487BD5AA2CD305","user_header":"https://static001.geekbang.org/account/avatar/00/27/ff/e4/927547a9.jpg","comment_is_top":false,"comment_ctime":1673399769,"is_pvip":false,"replies":[{"id":133393,"content":"Gauge类型举例：房间里的人数、队列积压的消息数、今年公司的收入和净利润\nCounter类型举例：操作系统自启动以来网卡接收到的所有流量包的数量\nHistogram、Summary：典型的就是用于描述延迟数据，比如HTTP接口、RPC接口的延迟数据","user_name":"作者回复","user_name_real":"编辑","uid":1001078,"ctime":1673423441,"ip_address":"上海","comment_id":366094,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100522501,"comment_content":"针对prom每个类型展现一个实例比较好","like_count":6,"discussions":[{"author":{"id":1001078,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/46/76/67e111da.jpg","nickname":"巴辉特","note":"","ucode":"DCBB150A99548D","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":599264,"discussion_content":"Gauge类型举例：房间里的人数、队列积压的消息数、今年公司的收入和净利润\nCounter类型举例：操作系统自启动以来网卡接收到的所有流量包的数量\nHistogram、Summary：典型的就是用于描述延迟数据，比如HTTP接口、RPC接口的延迟数据","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1673423441,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"上海","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1261493,"avatar":"https://static001.geekbang.org/account/avatar/00/13/3f/b5/5fe77e16.jpg","nickname":"不经意间","note":"","ucode":"C39D98697ACB8B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":599467,"discussion_content":"用起来就有感觉了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1673532199,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":366136,"user_name":"蓝熊船长","can_delete":false,"product_type":"c1","uid":1153936,"ip_address":"上海","ucode":"1FD89A93D24C18","user_header":"https://static001.geekbang.org/account/avatar/00/11/9b/90/de3d8f08.jpg","comment_is_top":false,"comment_ctime":1673420436,"is_pvip":false,"replies":[{"id":133401,"content":"每周一三五零点更新，努起来 :) ","user_name":"作者回复","user_name_real":"编辑","uid":1001078,"ctime":1673425512,"ip_address":"上海","comment_id":366136,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100522501,"comment_content":"来催个更。正在负责新项目的监控这块。补齐一下地图。期待","like_count":2,"discussions":[{"author":{"id":1001078,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/46/76/67e111da.jpg","nickname":"巴辉特","note":"","ucode":"DCBB150A99548D","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":599280,"discussion_content":"每周一三五零点更新，努起来 :) ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1673425513,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"上海","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":367265,"user_name":"王二木","can_delete":false,"product_type":"c1","uid":1674797,"ip_address":"北京","ucode":"8D3016E3C8BC1A","user_header":"","comment_is_top":false,"comment_ctime":1675079094,"is_pvip":false,"replies":[{"id":133798,"content":"👍","user_name":"作者回复","user_name_real":"编辑","uid":1001078,"ctime":1675146702,"ip_address":"北京","comment_id":367265,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100522501,"comment_content":"自愈","like_count":1,"discussions":[{"author":{"id":1001078,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/46/76/67e111da.jpg","nickname":"巴辉特","note":"","ucode":"DCBB150A99548D","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":601207,"discussion_content":"👍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1675146702,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":366184,"user_name":"Geek_4203fb","can_delete":false,"product_type":"c1","uid":1813132,"ip_address":"江苏","ucode":"56A1206FB28918","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLuibwDL4h6ewyo1TDwNGZGcmhHY72AnXickPlNxMkQW2gCIR7xdicef7niaryJfSN5BHdv8Qgb6lDuUQ/132","comment_is_top":false,"comment_ctime":1673444854,"is_pvip":false,"replies":[{"id":133425,"content":"这个话题太大了。后面的章节会提到一些方法论可以做一些指导。对于任何一个进程，如果经常出问题，我可能会监控它的如下方面：\n\n1，存活性，进程存活性、端口存活性\n2，cpu、内存、io、网络、句柄等的资源占用情况\n3，health类的接口\n4，进程日志\n5，进程是否暴露了监控指标也要拉取（后面会讲到不同中间件有不同的暴露方式，filebeat具体是啥方式我还真没了解过）\n\n最终就是看这个进程的资源占用情况、容量情况、吞吐情况，核心功能的指标等","user_name":"作者回复","user_name_real":"编辑","uid":1001078,"ctime":1673450205,"ip_address":"上海","comment_id":366184,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100522501,"comment_content":"老师,请教下中间件监控的最佳实践有哪些呢？比如filebeat 如何进行类似健康检查类的监控，生产环境最近filebeat一直出问题~","like_count":1,"discussions":[{"author":{"id":1001078,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/46/76/67e111da.jpg","nickname":"巴辉特","note":"","ucode":"DCBB150A99548D","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":599345,"discussion_content":"这个话题太大了。后面的章节会提到一些方法论可以做一些指导。对于任何一个进程，如果经常出问题，我可能会监控它的如下方面：\n\n1，存活性，进程存活性、端口存活性\n2，cpu、内存、io、网络、句柄等的资源占用情况\n3，health类的接口\n4，进程日志\n5，进程是否暴露了监控指标也要拉取（后面会讲到不同中间件有不同的暴露方式，filebeat具体是啥方式我还真没了解过）\n\n最终就是看这个进程的资源占用情况、容量情况、吞吐情况，核心功能的指标等","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1673450205,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"上海","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":366129,"user_name":"苏果果","can_delete":false,"product_type":"c1","uid":2852467,"ip_address":"上海","ucode":"12A62ED032F345","user_header":"https://static001.geekbang.org/account/avatar/00/2b/86/73/5190bbde.jpg","comment_is_top":false,"comment_ctime":1673414936,"is_pvip":false,"replies":[{"id":133399,"content":"🤝🤝","user_name":"作者回复","user_name_real":"编辑","uid":1001078,"ctime":1673425459,"ip_address":"上海","comment_id":366129,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100522501,"comment_content":"太强了😯看完清晰多了","like_count":1,"discussions":[{"author":{"id":1001078,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/46/76/67e111da.jpg","nickname":"巴辉特","note":"","ucode":"DCBB150A99548D","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":599278,"discussion_content":"🤝🤝","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1673425459,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"上海","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":366098,"user_name":"kaizen","can_delete":false,"product_type":"c1","uid":1675966,"ip_address":"上海","ucode":"313EEA97AEC7C3","user_header":"https://static001.geekbang.org/account/avatar/00/19/92/be/8de4e1fe.jpg","comment_is_top":false,"comment_ctime":1673402503,"is_pvip":false,"replies":[{"id":133395,"content":"其实也还好，关键还是看我们选用了哪个技术栈，比如是用prometheus还是influxdb，如果技术栈确定了，就用对应的指标描述方式就好了","user_name":"作者回复","user_name_real":"编辑","uid":1001078,"ctime":1673425252,"ip_address":"上海","comment_id":366098,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100522501,"comment_content":"influx line protocol 理解成本高？","like_count":1,"discussions":[{"author":{"id":1001078,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/46/76/67e111da.jpg","nickname":"巴辉特","note":"","ucode":"DCBB150A99548D","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":599273,"discussion_content":"其实也还好，关键还是看我们选用了哪个技术栈，比如是用prometheus还是influxdb，如果技术栈确定了，就用对应的指标描述方式就好了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1673425252,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"上海","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1200048,"avatar":"https://static001.geekbang.org/account/avatar/00/12/4f/b0/ab179368.jpg","nickname":"hshopeful","note":"","ucode":"EE8D6E0A40607E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":599214,"discussion_content":"我觉得理解成本高不高也是一个相对的概念，相当原始的唯一字符串标识肯定算高得，相对某些缺乏相关背景的人，理解成本也有一些","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1673406300,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"湖北","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":368761,"user_name":"xmr","can_delete":false,"product_type":"c1","uid":1009622,"ip_address":"广东","ucode":"1BBF165F91F10B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/d6/2f5cb85c.jpg","comment_is_top":false,"comment_ctime":1676656112,"is_pvip":false,"replies":[{"id":134315,"content":"👍🏻","user_name":"作者回复","user_name_real":"编辑","uid":1001078,"ctime":1676716089,"ip_address":"北京","comment_id":368761,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100522501,"comment_content":"noc","like_count":0,"discussions":[{"author":{"id":1001078,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/46/76/67e111da.jpg","nickname":"巴辉特","note":"","ucode":"DCBB150A99548D","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":605542,"discussion_content":"👍🏻","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1676716089,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":367576,"user_name":"Geek_89cb03","can_delete":false,"product_type":"c1","uid":1910782,"ip_address":"上海","ucode":"1FCCA074D57F8D","user_header":"https://static001.geekbang.org/account/avatar/00/1d/27/fe/701cf60e.jpg","comment_is_top":false,"comment_ctime":1675327827,"is_pvip":false,"replies":[{"id":133891,"content":"相同的","user_name":"作者回复","user_name_real":"编辑","uid":1001078,"ctime":1675413252,"ip_address":"北京","comment_id":367576,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100522501,"comment_content":"请问老师，下面7个summary相关的指标统计时间区间相同吗？\n# HELP go_gc_duration_seconds A summary of the pause duration of garbage collection cycles.\n# TYPE go_gc_duration_seconds summary\ngo_gc_duration_seconds{quantile=&quot;0&quot;} 5.6827e-05\ngo_gc_duration_seconds{quantile=&quot;0.25&quot;} 0.000129725\ngo_gc_duration_seconds{quantile=&quot;0.5&quot;} 0.00017313\ngo_gc_duration_seconds{quantile=&quot;0.75&quot;} 0.000220921\ngo_gc_duration_seconds{quantile=&quot;1&quot;} 0.001127104\ngo_gc_duration_seconds_sum 292.753239795\ngo_gc_duration_seconds_count 585060","like_count":0,"discussions":[{"author":{"id":1001078,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/46/76/67e111da.jpg","nickname":"巴辉特","note":"","ucode":"DCBB150A99548D","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":601790,"discussion_content":"相同的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1675413252,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":367125,"user_name":"kobe","can_delete":false,"product_type":"c1","uid":1165831,"ip_address":"浙江","ucode":"AB8B599F3D5521","user_header":"https://static001.geekbang.org/account/avatar/00/11/ca/07/22dd76bf.jpg","comment_is_top":false,"comment_ctime":1674961329,"is_pvip":false,"replies":[{"id":133773,"content":"开源版本的话，告警收敛这块有一部分功能，告警闭环是没有做的","user_name":"作者回复","user_name_real":"编辑","uid":1001078,"ctime":1674978228,"ip_address":"北京","comment_id":367125,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100522501,"comment_content":"夜莺目前有做告警收敛和告警闭环么 开源版本好像没有吧？","like_count":0,"discussions":[{"author":{"id":1001078,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/46/76/67e111da.jpg","nickname":"巴辉特","note":"","ucode":"DCBB150A99548D","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":600966,"discussion_content":"开源版本的话，告警收敛这块有一部分功能，告警闭环是没有做的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1674978229,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1165831,"avatar":"https://static001.geekbang.org/account/avatar/00/11/ca/07/22dd76bf.jpg","nickname":"kobe","note":"","ucode":"AB8B599F3D5521","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":600967,"discussion_content":"告警收敛这块有一部分功能，具体是啥功能啊？后续告警闭环这块打算做吗","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1674978368,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"浙江","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":367014,"user_name":"Ppppppp","can_delete":false,"product_type":"c1","uid":3294642,"ip_address":"江苏","ucode":"5AD679CC53B6D1","user_header":"https://static001.geekbang.org/account/avatar/00/32/45/b2/24dee83c.jpg","comment_is_top":false,"comment_ctime":1674809158,"is_pvip":false,"replies":[{"id":133733,"content":"👍🏻","user_name":"作者回复","user_name_real":"编辑","uid":1001078,"ctime":1674872510,"ip_address":"北京","comment_id":367014,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100522501,"comment_content":"写数据收集的时候，别突发奇想地把变量当作指标名。合理的使用tag和label以及测量值。\nPrometheus拿不到数据，回头看看类型是不是忘了。\nPrometheus表达式有局限性，例如对于X&#47;Y的情况，如果Y是0的情况\nPrometheus表达式extrapolate相关函数的时间范围取值问题和采集器上报数据间隔。\n应届生，工作头一年，开发没怎么做，光看bug看了大半年。","like_count":0,"discussions":[{"author":{"id":1001078,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/46/76/67e111da.jpg","nickname":"巴辉特","note":"","ucode":"DCBB150A99548D","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":600767,"discussion_content":"👍🏻","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1674872510,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":366447,"user_name":"novoer","can_delete":false,"product_type":"c1","uid":1283363,"ip_address":"福建","ucode":"958C1BA9B4DA51","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erLKlSIdiadmBR0awVgQcTGbsnd1dp1uaDcdfgyFNmREXNEANjMVSDKV3yYD2AKQEicibvKY35RVpmmg/132","comment_is_top":false,"comment_ctime":1673792735,"is_pvip":false,"replies":[{"id":133519,"content":"👍","user_name":"作者回复","user_name_real":"编辑","uid":1001078,"ctime":1673798615,"ip_address":"北京","comment_id":366447,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100522501,"comment_content":"接口成功率99.9%","like_count":0,"discussions":[{"author":{"id":1001078,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/46/76/67e111da.jpg","nickname":"巴辉特","note":"","ucode":"DCBB150A99548D","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":599797,"discussion_content":"👍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1673798615,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":366373,"user_name":"Geek_6580e3","can_delete":false,"product_type":"c1","uid":2071189,"ip_address":"上海","ucode":"EBA5D606A268A5","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKrAnvnf7bm30wuzkns2eLt15libqTv5ardAAQZNx67NuHPzib0kVXaFHGHE7IE19IiargjtWJgC9D9g/132","comment_is_top":false,"comment_ctime":1673655272,"is_pvip":false,"replies":[{"id":133506,"content":"可以试试 nethogs 这个工具","user_name":"作者回复","user_name_real":"编辑","uid":1001078,"ctime":1673698149,"ip_address":"北京","comment_id":366373,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100522501,"comment_content":"咨询下老师为啥很少有监控单个进程的网络io，想找到网络瓶颈时候是因为哪个进程","like_count":0,"discussions":[{"author":{"id":1001078,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/46/76/67e111da.jpg","nickname":"巴辉特","note":"","ucode":"DCBB150A99548D","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":599686,"discussion_content":"可以试试 nethogs 这个工具","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1673698149,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":366371,"user_name":"心想事成","can_delete":false,"product_type":"c1","uid":2485534,"ip_address":"上海","ucode":"DC56F5BBCE706D","user_header":"https://static001.geekbang.org/account/avatar/00/25/ed/1e/36b80d38.jpg","comment_is_top":false,"comment_ctime":1673651848,"is_pvip":false,"replies":[{"id":133505,"content":"如果局域网内有一台机器可以连互联网，可以在这台机器做个代理；否则可能就真的只能人工盯屏了，为了减少人工盯屏的成本，有些监控系统会在产生新的告警事件的时候，发出声音提醒","user_name":"作者回复","user_name_real":"编辑","uid":1001078,"ctime":1673697622,"ip_address":"北京","comment_id":366371,"utype":1}],"discussion_count":3,"race_medal":0,"score":3,"product_id":100522501,"comment_content":"老师你好，我公司做的是局域网内网的平台，邮件&#47;短信&#47;微信&#47;钉钉这些都用不了，那么这种情况下告警通知怎么弄，感觉只能靠人工在监控平台界面上定期去看告警信息","like_count":0,"discussions":[{"author":{"id":1001078,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/46/76/67e111da.jpg","nickname":"巴辉特","note":"","ucode":"DCBB150A99548D","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":599685,"discussion_content":"如果局域网内有一台机器可以连互联网，可以在这台机器做个代理；否则可能就真的只能人工盯屏了，为了减少人工盯屏的成本，有些监控系统会在产生新的告警事件的时候，发出声音提醒","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1673697622,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1592177,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoktzQK57CSMxbrRnHgFhHia5ic4tSzXxgyvZm3dA3BJDFp7ak3zpJD1PXzQzY4BML2V619lrs9fK1g/132","nickname":"Geek_frank","note":"","ucode":"FC513F40F8D554","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":647512,"discussion_content":"通知生成二维码，扫码枪扫到外网发出去","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1720136444,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"福建","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":3254520,"avatar":"","nickname":"Geek_baed16","note":"","ucode":"9D8D3A69677E23","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":601066,"discussion_content":"搭个邮件服务？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1675044270,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"上海","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":366278,"user_name":"陈斌","can_delete":false,"product_type":"c1","uid":3296036,"ip_address":"广东","ucode":"25B62FA62B020F","user_header":"https://static001.geekbang.org/account/avatar/00/32/4b/24/0ffbc1bd.jpg","comment_is_top":false,"comment_ctime":1673533182,"is_pvip":false,"replies":[{"id":133457,"content":"我没有遇到，看看其他同学是否遇到了可以分享一下如何解决的。陈斌同学可以试试把prom部署到虚拟机或物理机","user_name":"作者回复","user_name_real":"编辑","uid":1001078,"ctime":1673569799,"ip_address":"上海","comment_id":366278,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100522501,"comment_content":"我生产用的pro+Victoria的 经常出现pro报数据块损坏导致 pro pod会一直crash 只能手动清除掉pro的数据 ，你们之前有遇到过吗","like_count":0,"discussions":[{"author":{"id":1001078,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/46/76/67e111da.jpg","nickname":"巴辉特","note":"","ucode":"DCBB150A99548D","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":599493,"discussion_content":"我没有遇到，看看其他同学是否遇到了可以分享一下如何解决的。陈斌同学可以试试把prom部署到虚拟机或物理机","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1673569799,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"上海","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":366267,"user_name":"April","can_delete":false,"product_type":"c1","uid":1106706,"ip_address":"北京","ucode":"FEB779C5D2946C","user_header":"https://static001.geekbang.org/account/avatar/00/10/e3/12/fd02db2e.jpg","comment_is_top":false,"comment_ctime":1673521099,"is_pvip":false,"replies":[{"id":133454,"content":"这块在专栏里没有涉及～","user_name":"作者回复","user_name_real":"编辑","uid":1001078,"ctime":1673533103,"ip_address":"上海","comment_id":366267,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100522501,"comment_content":"老师，会讲基于监控构建SLI的内容吗？","like_count":0,"discussions":[{"author":{"id":1001078,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/46/76/67e111da.jpg","nickname":"巴辉特","note":"","ucode":"DCBB150A99548D","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":599471,"discussion_content":"这块在专栏里没有涉及～","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1673533104,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"上海","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":366203,"user_name":"风","can_delete":false,"product_type":"c1","uid":1077538,"ip_address":"天津","ucode":"104638BF19B048","user_header":"https://static001.geekbang.org/account/avatar/00/10/71/22/b8c596b6.jpg","comment_is_top":false,"comment_ctime":1673481058,"is_pvip":false,"replies":[{"id":133435,"content":"👍","user_name":"作者回复","user_name_real":"编辑","uid":1001078,"ctime":1673492692,"ip_address":"上海","comment_id":366203,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100522501,"comment_content":"报警…\n报警…清除","like_count":0,"discussions":[{"author":{"id":1001078,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/46/76/67e111da.jpg","nickname":"巴辉特","note":"","ucode":"DCBB150A99548D","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":599377,"discussion_content":"👍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1673492692,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"上海","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":366202,"user_name":"peter","can_delete":false,"product_type":"c1","uid":1058183,"ip_address":"北京","ucode":"261C3FC001DE2D","user_header":"https://static001.geekbang.org/account/avatar/00/10/25/87/f3a69d1b.jpg","comment_is_top":false,"comment_ctime":1673477815,"is_pvip":false,"replies":[{"id":133436,"content":"tag_set是维度信息，一般key和value都是字符串，field_set是具体指标，一般key是字符串，value是监控到的值","user_name":"作者回复","user_name_real":"编辑","uid":1001078,"ctime":1673492736,"ip_address":"上海","comment_id":366202,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100522501,"comment_content":"请问：tag_set与field_set有什么区别？\nweather,location=us-midwest temperature=82 1465839830100400200\n  |    -------------------- --------------  |\n  |             |             |             |\n  |             |             |             |\n+-----------+--------+-+---------+-+---------+\n|measurement|,tag_set| |field_set| |timestamp|\n+-----------+--------+-+---------+-+---------+\n从这个例子看，tag_set和field_set好像没有什么区别，都是键值对。","like_count":0,"discussions":[{"author":{"id":1001078,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/46/76/67e111da.jpg","nickname":"巴辉特","note":"","ucode":"DCBB150A99548D","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":599379,"discussion_content":"tag_set是维度信息，一般key和value都是字符串，field_set是具体指标，一般key是字符串，value是监控到的值","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1673492737,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"上海","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":366189,"user_name":"null","can_delete":false,"product_type":"c1","uid":1707648,"ip_address":"江苏","ucode":"349D599741AB88","user_header":"https://static001.geekbang.org/account/avatar/00/1a/0e/80/f8f91bae.jpg","comment_is_top":false,"comment_ctime":1673446385,"is_pvip":false,"replies":[{"id":133422,"content":"👍","user_name":"作者回复","user_name_real":"编辑","uid":1001078,"ctime":1673449310,"ip_address":"上海","comment_id":366189,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100522501,"comment_content":"某时某分某值班人员收到告警传报，指向某业务redis实例内存使用量告警。","like_count":0,"discussions":[{"author":{"id":1001078,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/46/76/67e111da.jpg","nickname":"巴辉特","note":"","ucode":"DCBB150A99548D","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":599337,"discussion_content":"👍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1673449310,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"上海","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":366188,"user_name":"追风少年","can_delete":false,"product_type":"c1","uid":1318664,"ip_address":"北京","ucode":"C172E9CFA3FB3E","user_header":"https://static001.geekbang.org/account/avatar/00/14/1f/08/bc66fc56.jpg","comment_is_top":false,"comment_ctime":1673446289,"is_pvip":false,"replies":[{"id":133423,"content":"1，关联关系这种东西，监控里是很难搞定的，可能要从某个地方读取一些metadata，作为标签附到时序数据上。比如采集虚拟机的监控数据的时候，从openstack的api获取一下所在宿主的信息，作为标签上报。但是有些信息可能不好获取，所以还有另一个思路，就是基于metadata索引，然后拉取监控数据查看。比如在虚机管理控制台可以查到宿主，宿主旁边加个看图的按钮，点击可以看宿主的监控数据，通过宿主还能看到虚机的列表，每个虚机旁边也有看图的按钮。通过宿主找虚机，这个其实是读取的openstack的metadata，但是点击看图按钮其实是拉取的监控数据，这也算是一个思路。\n\n2，监控和可观测性，到底着眼点有何不同，还是只是换了个名字，这个在圈子里有很多不同的声音，我个人的看法是，管他啥名字呢，就看做啥事，如果做的事情都一样，真没啥区别。如果做的事情不同，就相互借鉴下。\n\n3，带外这块，我加入你的吐槽队伍","user_name":"作者回复","user_name_real":"编辑","uid":1001078,"ctime":1673449796,"ip_address":"上海","comment_id":366188,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100522501,"comment_content":"老师，在做云计算领域的监控，有openstack kvm虚拟化，有k8s，也有各种物理服务器网络设备这些，目前遇到的最大的问题在于采集到的监控数据如何关联分析，比如虚实（容器、虚机、vswitch、宿主机、服务器、交换机）的关联、资源拓扑这些，有什么好的指导建议吗；还有老师怎么看待目前传统的运维监控和最近比较火的可观测行的区别呢。另外各种厂家各种型号的物理设备带外监控是个大坑，对接标准都不一样......","like_count":0,"discussions":[{"author":{"id":1001078,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/46/76/67e111da.jpg","nickname":"巴辉特","note":"","ucode":"DCBB150A99548D","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":599341,"discussion_content":"1，关联关系这种东西，监控里是很难搞定的，可能要从某个地方读取一些metadata，作为标签附到时序数据上。比如采集虚拟机的监控数据的时候，从openstack的api获取一下所在宿主的信息，作为标签上报。但是有些信息可能不好获取，所以还有另一个思路，就是基于metadata索引，然后拉取监控数据查看。比如在虚机管理控制台可以查到宿主，宿主旁边加个看图的按钮，点击可以看宿主的监控数据，通过宿主还能看到虚机的列表，每个虚机旁边也有看图的按钮。通过宿主找虚机，这个其实是读取的openstack的metadata，但是点击看图按钮其实是拉取的监控数据，这也算是一个思路。\n\n2，监控和可观测性，到底着眼点有何不同，还是只是换了个名字，这个在圈子里有很多不同的声音，我个人的看法是，管他啥名字呢，就看做啥事，如果做的事情都一样，真没啥区别。如果做的事情不同，就相互借鉴下。\n\n3，带外这块，我加入你的吐槽队伍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1673449796,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"上海","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":366146,"user_name":"文康","can_delete":false,"product_type":"c1","uid":1593681,"ip_address":"北京","ucode":"E1952B9DFB5DF4","user_header":"https://static001.geekbang.org/account/avatar/00/18/51/51/60d729d0.jpg","comment_is_top":false,"comment_ctime":1673425067,"is_pvip":true,"replies":[{"id":133406,"content":"🙋有有有，宝子看这里，点击去加群哦 https:&#47;&#47;jinshuju.net&#47;f&#47;Ql3qlz","user_name":"编辑回复","user_name_real":"编辑","uid":2843479,"ctime":1673426308,"ip_address":"北京","comment_id":366146,"utype":2}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100522501,"comment_content":"能不能拉个群好方便交流","like_count":0,"discussions":[{"author":{"id":2843479,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/63/57/cba4c68b.jpg","nickname":"小虎子🐯","note":"","ucode":"4C9530B3FB407B","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":599286,"discussion_content":"🙋有有有，宝子看这里，点击去加群哦 https://jinshuju.net/f/Ql3qlz","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1673426308,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":8}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":366140,"user_name":"Amosヾ","can_delete":false,"product_type":"c1","uid":1567014,"ip_address":"上海","ucode":"833F6FCB4042AD","user_header":"https://static001.geekbang.org/account/avatar/00/17/e9/26/472e16e4.jpg","comment_is_top":false,"comment_ctime":1673422455,"is_pvip":true,"replies":[{"id":133402,"content":"会先把告警收敛、闭环的整体逻辑和思路讲出来，Prometheus能做到一部分，可以基于讲解的这些思路，自己做一些简单的定制","user_name":"作者回复","user_name_real":"编辑","uid":1001078,"ctime":1673425676,"ip_address":"上海","comment_id":366140,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100522501,"comment_content":"后面会不会讲如何基于 prometheus做告警收敛与闭环？","like_count":0,"discussions":[{"author":{"id":1001078,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/46/76/67e111da.jpg","nickname":"巴辉特","note":"","ucode":"DCBB150A99548D","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":599281,"discussion_content":"会先把告警收敛、闭环的整体逻辑和思路讲出来，Prometheus能做到一部分，可以基于讲解的这些思路，自己做一些简单的定制","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1673425676,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"上海","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":391851,"user_name":"Jason Ding","can_delete":false,"product_type":"c1","uid":1365944,"ip_address":"上海","ucode":"E62AB51E7F2D6E","user_header":"https://static001.geekbang.org/account/avatar/00/14/d7/b8/c42d2527.jpg","comment_is_top":false,"comment_ctime":1719281241,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100522501,"comment_content":"网络问题\n","like_count":1},{"had_liked":false,"id":392864,"user_name":"Adam","can_delete":false,"product_type":"c1","uid":1305633,"ip_address":"广东","ucode":"338BA720880E4F","user_header":"https://static001.geekbang.org/account/avatar/00/13/ec/21/b0fe1bfd.jpg","comment_is_top":false,"comment_ctime":1721984190,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100522501,"comment_content":"SLA 99.98，告警100%覆盖，P1告警5分钟响应， MTTR&lt; 30分钟","like_count":0},{"had_liked":false,"id":389633,"user_name":"kkxue","can_delete":false,"product_type":"c1","uid":1159904,"ip_address":"广东","ucode":"0DCB861D5543D6","user_header":"https://static001.geekbang.org/account/avatar/00/11/b2/e0/bf56878a.jpg","comment_is_top":false,"comment_ctime":1713139029,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":5,"score":4,"product_id":100522501,"comment_content":"我来一个：根因是什么？","like_count":0},{"had_liked":false,"id":382706,"user_name":"修文","can_delete":false,"product_type":"c1","uid":1154709,"ip_address":"浙江","ucode":"E80AEB9E69B080","user_header":"https://static001.geekbang.org/account/avatar/00/11/9e/95/a9ca5bb8.jpg","comment_is_top":false,"comment_ctime":1697862255,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100522501,"comment_content":"“全局唯一字符串”作为指标标识小节，关于聚合统计的例子，使用其他方式就能很方便的解决了吗？\n如果提前不知道标识，似乎仍然需要做一些额外的处理？老师可以再举一个对比的例子吗？","like_count":0},{"had_liked":false,"id":376080,"user_name":"陈子子","can_delete":false,"product_type":"c1","uid":1399890,"ip_address":"湖北","ucode":"76DAB3C1507002","user_header":"https://static001.geekbang.org/account/avatar/00/15/5c/52/dc9df82e.jpg","comment_is_top":false,"comment_ctime":1686267866,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100522501,"comment_content":"网络监控在讲的范围吗","like_count":0},{"had_liked":false,"id":371402,"user_name":"heyman","can_delete":false,"product_type":"c1","uid":1173894,"ip_address":"广东","ucode":"92EF9EF1B1B1B3","user_header":"https://static001.geekbang.org/account/avatar/00/11/e9/86/d34800a4.jpg","comment_is_top":false,"comment_ctime":1679903942,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100522501,"comment_content":"请问99line的意义是什么","like_count":0},{"had_liked":false,"id":369744,"user_name":"运维菜鸟01","can_delete":false,"product_type":"c1","uid":2416390,"ip_address":"浙江","ucode":"0870B7BB23E294","user_header":"https://static001.geekbang.org/account/avatar/00/24/df/06/72f90828.jpg","comment_is_top":false,"comment_ctime":1677856204,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100522501,"comment_content":"颗粒度","like_count":0},{"had_liked":false,"id":369076,"user_name":"晴空万里","can_delete":false,"product_type":"c1","uid":1181835,"ip_address":"广东","ucode":"6470D4B84A4D8E","user_header":"https://static001.geekbang.org/account/avatar/00/12/08/8b/1b7d0463.jpg","comment_is_top":false,"comment_ctime":1677067274,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100522501,"comment_content":"SLA 三个999","like_count":0},{"had_liked":false,"id":367264,"user_name":"王二木","can_delete":false,"product_type":"c1","uid":1674797,"ip_address":"北京","ucode":"8D3016E3C8BC1A","user_header":"","comment_is_top":false,"comment_ctime":1675079052,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100522501,"comment_content":"RTO  RPO","like_count":0}]}