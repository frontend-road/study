{"id":645305,"title":"10ï½œAIè¿æ¥å¤–éƒ¨èµ„æ–™åº“ï¼Œè®©Llama Indexå¸¦ä½ é˜…è¯»ä¸€æœ¬ä¹¦","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯å¾æ–‡æµ©ã€‚</p><p>æœ‰ä¸å°‘äººåœ¨ä½¿ç”¨OpenAIæä¾›çš„GPTç³»åˆ—æ¨¡å‹çš„æ—¶å€™ï¼Œéƒ½åé¦ˆæ•ˆæœå¹¶ä¸å¥½ã€‚è¿™äº›åé¦ˆä¸­æœ‰ä¸€å¤§ç±»é—®é¢˜ï¼Œæ˜¯å›ç­”ä¸äº†ä¸€äº›ç®€å•çš„é—®é¢˜ã€‚æ¯”å¦‚å½“æˆ‘ä»¬ç”¨ä¸­æ–‡é—®AIä¸€äº›äº‹å®æ€§çš„é—®é¢˜ï¼ŒAIå¾ˆå®¹æ˜“èƒ¡ç¼–ä¹±é€ ã€‚è€Œå½“ä½ é—®å®ƒæœ€è¿‘å‘ç”Ÿçš„æ–°é—»äº‹ä»¶çš„æ—¶å€™ï¼Œå®ƒå°±å¹²è„†å‘Šè¯‰ä½ å®ƒä¸çŸ¥é“21å¹´ä¹‹åçš„äº‹æƒ…ã€‚</p><p>æœ¬æ¥å‘¢ï¼Œæˆ‘å†™åˆ°è¿™é‡Œå°±å¯ä»¥äº†ã€‚ä¸è¿‡åˆ°äº†3æœˆ24æ—¥ï¼ŒOpenAIæ¨å‡ºäº†ChatGPT Pluginsè¿™ä¸ªåŠŸèƒ½ï¼Œå¯ä»¥è®©ChatGPTé€šè¿‡æ’ä»¶çš„å½¢å¼é“¾æ¥å¤–éƒ¨çš„ç¬¬ä¸‰æ–¹åº”ç”¨ã€‚æˆ‘è‡ªå·±ä¹Ÿè¿˜åœ¨æ’é˜Ÿç­‰waiting listï¼Œæ‰€ä»¥æš‚æ—¶ä¹Ÿæ— æ³•ä½“éªŒã€‚ä¸è¿‡ï¼Œå³ä½¿æœ‰äº†ç¬¬ä¸‰æ–¹åº”ç”¨ï¼Œæˆ‘ä»¬ä¹Ÿä¸èƒ½ç¡®ä¿è‡ªå·±æƒ³è¦çŸ¥é“çš„ä¿¡æ¯æ­£å¥½è¢«å…¶ä»–äººæä¾›äº†ã€‚è€Œä¸”ï¼Œæœ‰äº›ä¿¡æ¯å’Œé—®é¢˜æˆ‘ä»¬åªæƒ³æä¾›ç»™è‡ªå·±å…¬å¸çš„å†…éƒ¨ä½¿ç”¨ï¼Œå¹¶ä¸æƒ³å¼€æ”¾ç»™æ‰€æœ‰äººã€‚è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬æ—¢å¸Œæœ›èƒ½å¤Ÿåˆ©ç”¨OpenAIçš„å¤§è¯­è¨€æ¨¡å‹çš„èƒ½åŠ›ï¼Œä½†æ˜¯åˆéœ€è¦è¿™äº›èƒ½åŠ›ä»…ä»…åœ¨æˆ‘ä»¬è‡ªå·±æŒ‡å®šçš„æ•°æ®ä¸Šã€‚é‚£ä¹ˆè¿™ä¸€è®²ï¼Œå°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜çš„ã€‚</p><h2>å¤§å‹è¯­è¨€æ¨¡å‹çš„ä¸è¶³ä¹‹å¤„</h2><p>æˆ‘ä»¬å…ˆæ¥å°è¯•é—®ChatGPTä¸€ä¸ªäººå°½çš†çŸ¥çš„å¸¸è¯†ï¼Œâ€œé²è¿…å…ˆç”Ÿå»æ—¥æœ¬å­¦ä¹ åŒ»å­¦çš„è€å¸ˆæ˜¯è°â€ï¼Œç»“æœå®ƒç»™å‡ºçš„ç­”æ¡ˆæ˜¯é²è¿…çš„å¥½å‹ï¼Œå†…å±±ä¹¦åº—çš„è€æ¿å†…å±±å®Œé€ ï¼Œè€Œä¸æ˜¯å¤§å®¶éƒ½å­¦ä¹ è¿‡çš„è—¤é‡å…ˆç”Ÿã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/89/64/891fc431e1cd46b1d45f60fe79c2e964.png?wh=704x264\" alt=\"å›¾ç‰‡\"></p><p>ä¹‹æ‰€ä»¥ä¼šå‡ºç°è¿™æ ·çš„æƒ…å†µï¼Œå’Œå¤§æ¨¡å‹çš„åŸç†ä»¥åŠå®ƒä½¿ç”¨è®­ç»ƒçš„æ•°æ®é›†æ˜¯æœ‰å…³çš„ã€‚å¤§è¯­è¨€æ¨¡å‹çš„åŸç†ï¼Œå°±æ˜¯åˆ©ç”¨è®­ç»ƒæ ·æœ¬é‡Œé¢å‡ºç°çš„æ–‡æœ¬çš„å‰åå…³ç³»ï¼Œé€šè¿‡å‰é¢çš„æ–‡æœ¬å¯¹æ¥ä¸‹æ¥å‡ºç°çš„æ–‡æœ¬è¿›è¡Œæ¦‚ç‡é¢„æµ‹ã€‚å¦‚æœç±»ä¼¼çš„å‰åæ–‡æœ¬å‡ºç°å¾—è¶Šå¤šï¼Œé‚£ä¹ˆè¿™ä¸ªæ¦‚ç‡åœ¨è®­ç»ƒè¿‡ç¨‹é‡Œä¼šæ”¶æ•›åˆ°å°‘æ•°æ­£ç¡®ç­”æ¡ˆä¸Šï¼Œå›ç­”å°±å‡†ç¡®ã€‚å¦‚æœè¿™æ ·çš„æ–‡æœ¬å¾ˆå°‘ï¼Œé‚£ä¹ˆè®­ç»ƒè¿‡ç¨‹é‡Œå°±ä¼šæœ‰ä¸€å®šçš„éšæœºæ€§ï¼Œå¯¹åº”çš„ç­”æ¡ˆå°±å®¹æ˜“ä¼¼æ˜¯è€Œéã€‚è€Œåœ¨GPT-3çš„æ¨¡å‹é‡Œï¼Œè™½ç„¶æ•´ä½“çš„è®­ç»ƒè¯­æ–™å¾ˆå¤šï¼Œä½†æ˜¯ä¸­æ–‡è¯­æ–™å¾ˆå°‘ã€‚åªæœ‰ä¸åˆ°1%çš„è¯­æ–™æ˜¯ä¸­æ–‡çš„ï¼Œæ‰€ä»¥å¦‚æœé—®å¾ˆå¤šä¸­æ–‡ç›¸å…³çš„çŸ¥è¯†æ€§æˆ–è€…å¸¸è¯†æ€§é—®é¢˜ï¼Œå®ƒçš„å›ç­”å¾€å¾€å°±å¾ˆæ‰¯ã€‚</p><!-- [[[read_end]]] --><p>å½“ç„¶ï¼Œä½ å¯ä»¥è¯´æˆ‘ä»¬æœ‰ä¸€ä¸ªè§£å†³åŠæ³•ï¼Œå°±æ˜¯å¤šæ‰¾ä¸€äº›é«˜è´¨é‡çš„ä¸­æ–‡è¯­æ–™è®­ç»ƒä¸€ä¸ªæ–°çš„æ¨¡å‹ã€‚æˆ–è€…ï¼Œå¯¹äºæˆ‘ä»¬æƒ³è®©AIèƒ½å¤Ÿå›ç­”å‡ºæ¥çš„é—®é¢˜ï¼Œæ‰¾ä¸€äº›æ•°æ®ã€‚ç„¶ååˆ©ç”¨OpenAIæä¾›çš„â€œå¾®è°ƒâ€ï¼ˆFine-tuneï¼‰æ¥å£ï¼Œåœ¨åŸæ¥çš„åŸºç¡€ä¸Šè®­ç»ƒä¸€ä¸ªæ–°æ¨¡å‹å‡ºæ¥ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/47/9c/47e11ff6d1534e8f53ea8da3ae5bcb9c.png?wh=700x217\" alt=\"å›¾ç‰‡\" title=\"å¦‚æœä½ é—®ä¸€ä¸‹æ–°é—»ç±»çš„ä¿¡æ¯ï¼ŒChatGPTé€šå¸¸ä¼šæ‹’ç»å›ç­”\"></p><p>è¿™æ ·å½“ç„¶æ˜¯å¯ä»¥çš„ï¼Œå°±æ˜¯æˆæœ¬æœ‰ç‚¹é«˜ã€‚å¯¹äºä¸Šé¢é‚£ä¸ªä¾‹å­æ¥è¯´ï¼Œåªæ˜¯ç¼ºå°‘ä¸€äº›æ–‡æœ¬æ•°æ®ï¼Œè¿˜å¥½è¯´ã€‚å¦‚æœæ˜¯æ—¶æ•ˆæ€§è¦æ±‚æ¯”è¾ƒå¼ºçš„èµ„è®¯ç±»çš„ä¿¡æ¯ï¼Œå°±å¾ˆéš¾è¿™ä¹ˆåšã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬æƒ³è®©AIå‘Šè¯‰æˆ‘ä»¬å‰ä¸€å¤©è¶³çƒèµ›çš„æ¯”åˆ†ï¼Œæˆ‘ä»¬ä¸å¤ªå¯èƒ½æ¯éš”å‡ ä¸ªå°æ—¶å°±å•ç‹¬è®­ç»ƒæˆ–è€…å¾®è°ƒä¸€ä¸‹æ¨¡å‹ï¼Œé‚£æ ·å¹²çš„æˆæœ¬å¤ªé«˜äº†ã€‚</p><h2>Bingçš„è§£æ³•â€”â€”å…ˆæœç´¢ï¼Œåæç¤º</h2><p>ä¸è¿‡å¯¹è¿™ä¸ªé¢†åŸŸæ¯”è¾ƒå…³æ³¨çš„æœ‹å‹å¯èƒ½å°±è¦é—®äº†ã€‚ä¹‹å‰å¾®è½¯ä¸æ˜¯åœ¨Bingè¿™ä¸ªæœç´¢å¼•æ“é‡Œï¼ŒåŠ ä¸Šäº†ChatGPTçš„é—®ç­”åŠŸèƒ½å—ï¼Ÿæ•ˆæœä¼¼ä¹ä¹Ÿè¿˜ä¸é”™ï¼Œé‚£Bingæ˜¯æ€ä¹ˆåšåˆ°çš„å‘¢ï¼Œæ˜¯å› ä¸ºä»–ä»¬ç”¨äº†æ›´åŠ å‰å®³çš„è¯­è¨€æ¨¡å‹å—ï¼Ÿ</p><p>è™½ç„¶æˆ‘å¹¶æ²¡æœ‰ä»€ä¹ˆå†…å¹•æ¶ˆæ¯ï¼Œä¸äº†è§£Bingæ˜¯æ€ä¹ˆåšçš„ã€‚ä½†æ˜¯å¦‚æœæ˜¯æˆ‘çš„è¯ï¼Œä¼šç”¨è¿™æ ·ä¸€ä¸ªè§£å†³åŠæ³•â€”â€”é‚£å°±æ˜¯å…ˆæœç´¢ï¼Œåæç¤ºï¼ˆPromptï¼‰ã€‚</p><ol>\n<li>æˆ‘ä»¬å…ˆé€šè¿‡æœç´¢çš„æ–¹å¼ï¼Œæ‰¾åˆ°å’Œè¯¢é—®çš„é—®é¢˜æœ€ç›¸å…³çš„è¯­æ–™ã€‚è¿™ä¸ªæœç´¢è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬æ—¢å¯ä»¥ç”¨ä¼ ç»Ÿçš„åŸºäºå…³é”®è¯æœç´¢çš„æŠ€æœ¯ï¼Œä¹Ÿå¯ä»¥ç”¨<a href=\"http://time.geekbang.org/column/article/644795\">ç¬¬ 9 è®²</a>æˆ‘ä»¬åˆšåˆšä»‹ç»è¿‡çš„ä½¿ç”¨Embeddingçš„ç›¸ä¼¼åº¦è¿›è¡Œè¯­ä¹‰æœç´¢çš„æŠ€æœ¯ã€‚</li>\n<li>ç„¶åï¼Œæˆ‘ä»¬å°†å’Œé—®é¢˜è¯­ä¹‰æœ€æ¥è¿‘çš„å‰å‡ æ¡å†…å®¹ï¼Œä½œä¸ºæç¤ºè¯­çš„ä¸€éƒ¨åˆ†ç»™åˆ°AIã€‚ç„¶åè¯·AIå‚è€ƒè¿™äº›å†…å®¹ï¼Œå†æ¥å›ç­”è¿™ä¸ªé—®é¢˜ã€‚</li>\n</ol><p><img src=\"https://static001.geekbang.org/resource/image/c8/f2/c8f7888bdfc3438934e784beayybeef2.png?wh=686x438\" alt=\"å›¾ç‰‡\"></p><p>æˆ‘åœ¨è¿™é‡Œï¼Œä¹Ÿç»™äº†ä½ ä¸€ä¸ªä¾‹å­çš„æˆªå›¾ã€‚å½“æˆ‘ä»¬æŠŠã€Šè—¤é‡å…ˆç”Ÿã€‹é‡Œçš„ä¸¤ä¸ªæ®µè½ç»™åˆ°AIï¼Œç„¶åè¯·AIæ ¹æ®è¿™ä¸¤ä¸ªæ®µè½ï¼Œå›ç­”åŸæ¥é‚£ä¸ªé—®é¢˜ï¼Œå°±ä¼šå¾—åˆ°æ­£ç¡®çš„ç­”æ¡ˆï¼Œä½ ä¹Ÿå¯ä»¥å»çœ‹ä¸€çœ‹ã€‚</p><p>è¿™ä¹Ÿæ˜¯åˆ©ç”¨å¤§è¯­è¨€æ¨¡å‹çš„ä¸€ä¸ªå¸¸è§æ¨¡å¼ã€‚å› ä¸ºå¤§è¯­è¨€æ¨¡å‹å…¶å®å†…å«äº†ä¸¤ç§èƒ½åŠ›ã€‚</p><p>ç¬¬ä¸€ç§ï¼Œæ˜¯æµ·é‡çš„è¯­æ–™ä¸­ï¼Œæœ¬èº«å·²ç»åŒ…å«äº†çš„çŸ¥è¯†ä¿¡æ¯ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬å‰é¢é—®AIé±¼é¦™è‚‰ä¸çš„åšæ³•ï¼Œå®ƒèƒ½å›ç­”ä¸Šæ¥å°±æ˜¯å› ä¸ºè¯­æ–™é‡Œå·²ç»æœ‰äº†å……è¶³çš„ç›¸å…³çŸ¥è¯†ã€‚æˆ‘ä»¬ä¸€èˆ¬ç§°ä¹‹ä¸ºâ€œä¸–ç•ŒçŸ¥è¯†â€ã€‚</p><p>ç¬¬äºŒç§ï¼Œæ˜¯æ ¹æ®ä½ è¾“å…¥çš„å†…å®¹ï¼Œç†è§£å’Œæ¨ç†çš„èƒ½åŠ›ã€‚è¿™ä¸ªèƒ½åŠ›ï¼Œä¸éœ€è¦è®­ç»ƒè¯­æ–™é‡Œæœ‰ä¸€æ ·çš„å†…å®¹ã€‚è€Œæ˜¯å¤§è¯­è¨€æ¨¡å‹æœ¬èº«æœ‰â€œæ€ç»´èƒ½åŠ›â€ï¼Œèƒ½å¤Ÿè¿›è¡Œé˜…è¯»ç†è§£ã€‚è¿™ä¸ªè¿‡ç¨‹é‡Œï¼Œâ€œçŸ¥è¯†â€ä¸æ˜¯æ¨¡å‹æœ¬èº«æä¾›çš„ï¼Œè€Œæ˜¯æˆ‘ä»¬æ‰¾å‡ºæ¥ï¼Œä¸´æ—¶æä¾›ç»™æ¨¡å‹çš„ã€‚å¦‚æœä¸æä¾›è¿™ä¸ªä¸Šä¸‹æ–‡ï¼Œå†é—®ä¸€æ¬¡æ¨¡å‹ç›¸åŒçš„é—®é¢˜ï¼Œå®ƒè¿˜æ˜¯ç­”ä¸ä¸Šæ¥çš„ã€‚</p><h2>é€šè¿‡llama_indexå°è£…â€œç¬¬äºŒå¤§è„‘â€</h2><p>æˆ‘ç»™ä¸Šé¢è¿™ç§å…ˆæœç´¢ã€åæç¤ºçš„æ–¹å¼ï¼Œå–äº†ä¸€ä¸ªåå­—ï¼Œå«åšAIçš„â€œç¬¬äºŒå¤§è„‘â€æ¨¡å¼ã€‚å› ä¸ºè¿™ä¸ªæ–¹æ³•ï¼Œéœ€è¦æå‰æŠŠä½ å¸Œæœ›AIèƒ½å¤Ÿå›ç­”çš„çŸ¥è¯†ï¼Œå»ºç«‹ä¸€ä¸ªå¤–éƒ¨çš„ç´¢å¼•ï¼Œè¿™ä¸ªç´¢å¼•å°±å¥½åƒAIçš„â€œç¬¬äºŒä¸ªå¤§è„‘â€ã€‚æ¯æ¬¡å‘AIæé—®çš„æ—¶å€™ï¼Œå®ƒéƒ½ä¼šå…ˆå»æŸ¥è¯¢ä¸€ä¸‹è¿™ä¸ªç¬¬äºŒå¤§è„‘é‡Œé¢çš„èµ„æ–™ï¼Œæ‰¾åˆ°ç›¸å…³èµ„æ–™ä¹‹åï¼Œå†é€šè¿‡è‡ªå·±çš„æ€ç»´èƒ½åŠ›æ¥å›ç­”é—®é¢˜ã€‚</p><p>å®é™…ä¸Šï¼Œä½ ç°åœ¨åœ¨ç½‘ä¸Šçœ‹åˆ°çš„å¾ˆå¤šè¯»è®ºæ–‡ã€è¯»ä¹¦å›ç­”é—®é¢˜çš„åº”ç”¨ï¼Œéƒ½æ˜¯é€šè¿‡è¿™ä¸ªæ¨¡å¼æ¥å®ç°çš„ã€‚é‚£ä¹ˆï¼Œç°åœ¨æˆ‘ä»¬å°±æ¥è‡ªå·±å®ç°ä¸€ä¸‹è¿™ä¸ªâ€œç¬¬äºŒå¤§è„‘â€æ¨¡å¼ã€‚</p><p>ä¸è¿‡ï¼Œæˆ‘ä»¬ä¸å¿…ä»0å¼€å§‹å†™ä»£ç ã€‚å› ä¸ºè¿™ä¸ªæ¨¡å¼å®åœ¨å¤ªè¿‡å¸¸ç”¨äº†ï¼Œæ‰€ä»¥æœ‰äººä¸ºå®ƒå†™äº†ä¸€ä¸ªå¼€æºPythonåŒ…ï¼Œå«åšllama-indexã€‚é‚£ä¹ˆæˆ‘ä»¬è¿™é‡Œï¼Œå¯ä»¥ç›´æ¥åˆ©ç”¨è¿™ä¸ªè½¯ä»¶åŒ…ï¼Œç”¨å‡ è¡Œä»£ç æ¥è¯•ä¸€è¯•ï¼Œå®ƒèƒ½ä¸èƒ½å›ç­”ä¸Šé²è¿…å…ˆç”Ÿå†™çš„ã€Šè—¤é‡å…ˆç”Ÿã€‹ç›¸å…³çš„é—®é¢˜ã€‚</p><p>llama-indexè¿˜æ²¡æœ‰äººåšå¥½Condaä¸‹çš„åŒ…ï¼Œæ‰€ä»¥å³ä½¿åœ¨Condaä¸‹è¿˜æ˜¯è¦é€šè¿‡pipæ¥å®‰è£…ã€‚</p><pre><code class=\"language-python\">pip install llama-index\npip install langchain\n</code></pre><p>æˆ‘æŠŠä»ç½‘ä¸Šæ‰¾åˆ°çš„ã€Šè—¤é‡å…ˆç”Ÿã€‹è¿™ç¯‡æ–‡ç« å˜æˆäº†ä¸€ä¸ªtxtæ–‡ä»¶ï¼Œæ”¾åœ¨äº† data/mr_fujino è¿™ä¸ªç›®å½•ä¸‹ã€‚æˆ‘ä»¬çš„ä»£ç ä¹Ÿéå¸¸ç®€å•ï¼Œä¸€å…±æ²¡æœ‰å‡ è¡Œã€‚</p><pre><code class=\"language-python\">import openai, os\nfrom llama_index import GPTVectorStoreIndex, SimpleDirectoryReader\n\nopenai.api_key = os.environ.get(\"OPENAI_API_KEY\")\n\ndocuments = SimpleDirectoryReader('./data/mr_fujino').load_data()\nindex = GPTSimpleVectorIndex.from_documents(documents)\n\nindex.save_to_disk('index_mr_fujino.json')\n</code></pre><p>è¾“å‡ºç»“æœï¼š</p><pre><code class=\"language-python\">INFO:llama_index.token_counter.token_counter:&gt; [build_index_from_nodes] Total LLM token usage: 0 tokens\nINFO:llama_index.token_counter.token_counter:&gt; [build_index_from_nodes] Total embedding token usage: 6763 tokens\n</code></pre><p><span class=\"reference\">æ³¨ï¼šæ—¥å¿—ä¸­ä¼šæ‰“å°å‡ºæ¥æˆ‘ä»¬é€šè¿‡Embeddingæ¶ˆè€—äº†å¤šå°‘ä¸ªTokenã€‚</span></p><p>é¦–å…ˆï¼Œæˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå«åšSimpleDirectoryReaderçš„æ•°æ®åŠ è½½å™¨ï¼Œå°†æ•´ä¸ª./data/mr_fujino çš„ç›®å½•ç»™åŠ è½½è¿›æ¥ã€‚è¿™é‡Œé¢çš„æ¯ä¸€ä¸ªæ–‡ä»¶ï¼Œéƒ½ä¼šè¢«å½“æˆæ˜¯ä¸€ç¯‡æ–‡æ¡£ã€‚</p><p>ç„¶åï¼Œæˆ‘ä»¬å°†æ‰€æœ‰çš„æ–‡æ¡£äº¤ç»™äº† GPTSimpleVectorIndex æ„å»ºç´¢å¼•ã€‚é¡¾åæ€ä¹‰ï¼Œå®ƒä¼šæŠŠæ–‡æ¡£åˆ†æ®µè½¬æ¢æˆä¸€ä¸ªä¸ªå‘é‡ï¼Œç„¶åå­˜å‚¨æˆä¸€ä¸ªç´¢å¼•ã€‚</p><p>æœ€åï¼Œæˆ‘ä»¬ä¼šæŠŠå¯¹åº”çš„ç´¢å¼•å­˜ä¸‹æ¥ï¼Œå­˜å‚¨çš„ç»“æœå°±æ˜¯ä¸€ä¸ªjsonæ–‡ä»¶ã€‚åé¢ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç”¨è¿™ä¸ªç´¢å¼•æ¥è¿›è¡Œç›¸åº”çš„é—®ç­”ã€‚</p><pre><code class=\"language-python\">index = GPTVectorStoreIndex.load_from_disk('index_mr_fujino.json')\nresponse = index.query(\"é²è¿…å…ˆç”Ÿåœ¨æ—¥æœ¬å­¦ä¹ åŒ»å­¦çš„è€å¸ˆæ˜¯è°ï¼Ÿ\")\nprint(response)\n</code></pre><p>è¦è¿›è¡Œé—®ç­”ä¹Ÿæ²¡æœ‰å‡ è¡Œä»£ç ï¼Œæˆ‘ä»¬é€šè¿‡ GPTSimpleVectorIndex çš„ load_from_disk å‡½æ•°ï¼Œå¯ä»¥æŠŠåˆšæ‰ç”Ÿæˆçš„ç´¢å¼•åŠ è½½åˆ°å†…å­˜é‡Œé¢æ¥ã€‚ç„¶åå¯¹ç€Indexç´¢å¼•è°ƒç”¨Queryå‡½æ•°ï¼Œå°±èƒ½å¤Ÿè·å¾—é—®é¢˜çš„ç­”æ¡ˆã€‚å¯ä»¥çœ‹åˆ°ï¼Œé€šè¿‡å¤–éƒ¨çš„ç´¢å¼•ï¼Œæˆ‘ä»¬å¯ä»¥æ­£ç¡®åœ°è·å¾—é—®é¢˜çš„ç­”æ¡ˆã€‚</p><pre><code class=\"language-python\">INFO:llama_index.token_counter.token_counter:&gt; [query] Total LLM token usage: 2984 tokens\nINFO:llama_index.token_counter.token_counter:&gt; [query] Total embedding token usage: 34 tokens\n\né²è¿…å…ˆç”Ÿåœ¨æ—¥æœ¬å­¦ä¹ åŒ»å­¦çš„è€å¸ˆæ˜¯è—¤é‡ä¸¥ä¹éƒå…ˆç”Ÿã€‚\n</code></pre><p>è¿™ä¹ˆä¸€çœ‹ï¼Œä¼¼ä¹é—®é¢˜ç‰¹åˆ«ç®€å•ï¼Œä¸‰è¡Œä»£ç å°±æå®šäº†ã€‚åˆ«ç€æ€¥ï¼Œæˆ‘ä»¬å†çœ‹çœ‹åˆ«çš„é—®é¢˜å®ƒæ˜¯ä¸æ˜¯ä¹Ÿèƒ½ç­”ä¸Šæ¥ï¼Ÿè¿™æ¬¡æˆ‘ä»¬æ¥è¯•ç€é—®é—®é²è¿…å…ˆç”Ÿæ˜¯åœ¨å“ªé‡Œå­¦ä¹ åŒ»å­¦çš„ã€‚</p><pre><code class=\"language-python\">response = index.query(\"é²è¿…å…ˆç”Ÿå»å“ªé‡Œå­¦çš„åŒ»å­¦ï¼Ÿ\")\nprint(response)\n</code></pre><p>è¾“å‡ºç»“æœï¼š</p><pre><code class=\"language-python\">&gt; Got node text: è—¤é‡å…ˆç”Ÿ\nä¸œäº¬ä¹Ÿæ— éæ˜¯è¿™æ ·ã€‚ä¸Šé‡çš„æ¨±èŠ±çƒ‚ç†³çš„æ—¶èŠ‚ï¼Œæœ›å»ç¡®ä¹Ÿåƒç»¯çº¢çš„è½»äº‘ï¼Œä½†èŠ±ä¸‹ä¹Ÿç¼ºä¸äº†æˆç¾¤ç»“é˜Ÿçš„â€œæ¸…å›½ç•™å­¦ç”Ÿâ€çš„é€Ÿæˆç­ï¼Œå¤´é¡¶ä¸Šç›˜ç€å¤§è¾«å­ï¼Œé¡¶å¾—å­¦ç”Ÿåˆ¶å¸½çš„é¡¶ä¸Šé«˜é«˜è€¸èµ·ï¼Œå½¢æˆä¸€åº§å¯Œå£«å±±ã€‚ä¹Ÿæœ‰è§£æ•£è¾«å­ï¼Œç›˜å¾—å¹³çš„ï¼Œé™¤ä¸‹å¸½æ¥ï¼Œæ²¹å…‰å¯é‰´ï¼Œå®›å¦‚å°å§‘å¨˜çš„å‘é«»ä¸€èˆ¬ï¼Œè¿˜è¦å°†è„–å­æ‰­å‡ æ‰­ã€‚å®åœ¨æ ‡è‡´æäº†ã€‚\nä¸­å›½ç•™å­¦ç”Ÿä¼šé¦†çš„é—¨æˆ¿é‡Œæœ‰å‡ æœ¬ä¹¦ä¹°ï¼Œæœ‰æ—¶è¿˜å€¼å¾—å»ä¸€è½¬ï¼›å€˜åœ¨ä¸Šåˆï¼Œé‡Œé¢çš„å‡ é—´æ´‹æˆ¿é‡Œå€’ä¹Ÿè¿˜å¯ä»¥ååçš„ã€‚ä½†åˆ°å‚æ™šï¼Œæœ‰...\n\nINFO:llama_index.token_counter.token_counter:&gt; [query] Total LLM token usage: 2969 tokens\nINFO:llama_index.token_counter.token_counter:&gt; [query] Total embedding token usage: 26 tokens\n\né²è¿…å…ˆç”Ÿå»ä»™å°çš„åŒ»å­¦ä¸“é—¨å­¦æ ¡å­¦ä¹ åŒ»å­¦ã€‚\n</code></pre><p>å®ƒä»ç„¶æ­£ç¡®å›ç­”äº†é—®é¢˜ã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬æœç´¢åˆ°çš„å†…å®¹ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹é‡Œé¢æ˜¯å¦‚ä½•æäº¤ç»™OpenAIçš„å‘¢ï¼Ÿæˆ‘ä»¬å°±æ¥çœ‹çœ‹ä¸‹é¢çš„è¿™æ®µä»£ç å°±çŸ¥é“äº†ã€‚</p><pre><code class=\"language-python\">from llama_index import QuestionAnswerPrompt\nquery_str = \"é²è¿…å…ˆç”Ÿå»å“ªé‡Œå­¦çš„åŒ»å­¦ï¼Ÿ\"\nDEFAULT_TEXT_QA_PROMPT_TMPL = (\n    \"Context information is below. \\n\"\n    \"---------------------\\n\"\n    \"{context_str}\"\n    \"\\n---------------------\\n\"\n    \"Given the context information and not prior knowledge, \"\n    \"answer the question: {query_str}\\n\"\n)\nQA_PROMPT = QuestionAnswerPrompt(DEFAULT_TEXT_QA_PROMPT_TMPL)\n\nresponse = index.query(query_str, text_qa_template=QA_PROMPT)\nprint(response)\n</code></pre><p>è¿™æ®µä»£ç é‡Œï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªQA_PROMPTçš„å¯¹è±¡ï¼Œå¹¶ä¸”ä¸ºå®ƒè®¾è®¡äº†ä¸€ä¸ªæ¨¡ç‰ˆã€‚</p><ol>\n<li>è¿™ä¸ªæ¨¡ç‰ˆçš„å¼€å¤´ï¼Œæˆ‘ä»¬å‘Šè¯‰AIï¼Œæˆ‘ä»¬ä¸ºAIæä¾›äº†ä¸€äº›ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼ˆContext informationï¼‰ã€‚</li>\n<li>æ¨¡ç‰ˆé‡Œé¢æ”¯æŒä¸¤ä¸ªå˜é‡ï¼Œä¸€ä¸ªå«åš context_strï¼Œå¦ä¸€ä¸ªå«åšquery_strã€‚context_str çš„åœ°æ–¹ï¼Œåœ¨å®é™…è°ƒç”¨çš„æ—¶å€™ï¼Œä¼šè¢«é€šè¿‡Embeddingç›¸ä¼¼åº¦æ‰¾å‡ºæ¥çš„å†…å®¹å¡«å…¥ã€‚è€Œ query_str åˆ™æ˜¯ä¼šè¢«æˆ‘ä»¬å®é™…æçš„é—®é¢˜æ›¿æ¢æ‰ã€‚</li>\n<li>å®é™…æé—®çš„æ—¶å€™ï¼Œæˆ‘ä»¬å‘Šè¯‰AIï¼Œåªè€ƒè™‘ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œè€Œä¸è¦æ ¹æ®è‡ªå·±å·²ç»æœ‰çš„å…ˆéªŒçŸ¥è¯†ï¼ˆprior knowledgeï¼‰æ¥å›ç­”é—®é¢˜ã€‚</li>\n</ol><p>æˆ‘ä»¬å°±æ˜¯è¿™æ ·ï¼ŒæŠŠæœç´¢æ‰¾åˆ°çš„ç›¸å…³å†…å®¹ä»¥åŠé—®é¢˜ï¼Œç»„åˆåˆ°ä¸€èµ·å˜æˆä¸€æ®µæç¤ºè¯­ï¼Œè®©AIèƒ½å¤ŸæŒ‰ç…§æˆ‘ä»¬çš„è¦æ±‚æ¥å›ç­”é—®é¢˜ã€‚é‚£æˆ‘ä»¬å†é—®ä¸€æ¬¡AIï¼Œçœ‹çœ‹ç­”æ¡ˆæ˜¯ä¸æ˜¯æ²¡æœ‰å˜ã€‚</p><p>è¾“å‡ºç»“æœï¼š</p><pre><code class=\"language-python\">é²è¿…å…ˆç”Ÿå»ä»™å°çš„åŒ»å­¦ä¸“é—¨å­¦æ ¡å­¦ä¹ åŒ»å­¦ã€‚\n</code></pre><p>è¿™ä¸€æ¬¡AIè¿˜æ˜¯æ­£ç¡®åœ°å›ç­”å‡ºäº†é²è¿…å…ˆç”Ÿæ˜¯å»ä»™å°çš„åŒ»å­¦ä¸“é—¨å­¦æ ¡å­¦ä¹ çš„ã€‚æˆ‘ä»¬å†è¯•ä¸€è¯•ï¼Œé—®ä¸€äº›ä¸ç›¸å¹²çš„é—®é¢˜ï¼Œä¼šå¾—åˆ°ä»€ä¹ˆç­”æ¡ˆï¼Œæ¯”å¦‚æˆ‘ä»¬é—®é—®çº¢æ¥¼æ¢¦é‡Œæ—é»›ç‰å’Œè´¾å®ç‰çš„å…³ç³»ã€‚</p><pre><code class=\"language-python\">QA_PROMPT_TMPL = (\n    \"ä¸‹é¢çš„â€œæˆ‘â€æŒ‡çš„æ˜¯é²è¿…å…ˆç”Ÿ \\n\"\n    \"---------------------\\n\"\n    \"{context_str}\"\n    \"\\n---------------------\\n\"\n    \"æ ¹æ®è¿™äº›ä¿¡æ¯ï¼Œè¯·å›ç­”é—®é¢˜: {query_str}\\n\"\n    \"å¦‚æœæ‚¨ä¸çŸ¥é“çš„è¯ï¼Œè¯·å›ç­”ä¸çŸ¥é“\\n\"\n)\nQA_PROMPT = QuestionAnswerPrompt(QA_PROMPT_TMPL)\n\nresponse = index.query(\"è¯·é—®æ—é»›ç‰å’Œè´¾å®ç‰æ˜¯ä»€ä¹ˆå…³ç³»ï¼Ÿ\", text_qa_template=QA_PROMPT)\n\nprint(response)\n</code></pre><p>è¾“å‡ºç»“æœï¼š</p><pre><code class=\"language-python\">ä¸çŸ¥é“\n</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼ŒAIçš„ç¡®æŒ‰ç…§æˆ‘ä»¬çš„æŒ‡ä»¤å›ç­”ä¸çŸ¥é“ï¼Œè€Œä¸æ˜¯èƒ¡ç­”ä¸€æ°”ã€‚</p><h2>é€šè¿‡llama_indexå¯¹äºæ–‡ç« è¿›è¡Œå°ç»“</h2><p>è¿˜æœ‰ä¸€ä¸ªå¸¸è§çš„ä½¿ç”¨llama-indexè¿™æ ·â€œç¬¬äºŒå¤§è„‘â€çš„Pythonåº“çš„åº”ç”¨åœºæ™¯ï¼Œå°±æ˜¯ç”Ÿæˆæ–‡ç« çš„æ‘˜è¦ã€‚åœ¨å‰é¢æ•™ä½ å¦‚ä½•è¿›è¡Œæ–‡æœ¬èšç±»çš„æ—¶å€™ï¼Œæˆ‘ä»¬å·²ç»çœ‹åˆ°äº†å¯ä»¥é€šè¿‡åˆé€‚çš„æç¤ºè¯­ï¼ˆPromptï¼‰åšåˆ°è¿™ä¸€ç‚¹ã€‚ä¸è¿‡ï¼Œå¦‚æœè¦æ€»ç»“ä¸€ç¯‡è®ºæ–‡ã€ç”šè‡³æ˜¯ä¸€æœ¬ä¹¦ï¼Œæ¯æ¬¡æœ€å¤šåªèƒ½æ”¯æŒ4096ä¸ªTokençš„APIå°±ä¸å¤ªå¤Ÿç”¨äº†ã€‚</p><p>è¦è§£å†³è¿™ä¸ªé—®é¢˜ä¹Ÿå¹¶ä¸å›°éš¾ï¼Œæˆ‘ä»¬åªè¦è¿›è¡Œåˆ†æ®µå°ç»“ï¼Œå†å¯¹æ€»ç»“å‡ºæ¥çš„å†…å®¹å†åšä¸€æ¬¡å°ç»“å°±å¯ä»¥äº†ã€‚æˆ‘ä»¬å¯ä»¥æŠŠä¸€ç¯‡æ–‡ç« ï¼Œä¹ƒè‡³ä¸€æœ¬ä¹¦ï¼Œæ„å»ºæˆä¸€ä¸ªæ ‘çŠ¶çš„ç´¢å¼•ã€‚æ¯ä¸€ä¸ªæ ‘é‡Œé¢çš„èŠ‚ç‚¹ï¼Œå°±æ˜¯å®ƒçš„å­æ ‘ä¸‹å†…å®¹çš„æ‘˜è¦ã€‚æœ€åï¼Œåœ¨æ•´æ£µæ ‘çš„æ ¹èŠ‚ç‚¹ï¼Œå¾—åˆ°çš„å°±æ˜¯æ•´ç¯‡æ–‡ç« æˆ–è€…æ•´æœ¬ä¹¦çš„æ€»ç»“äº†ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/49/42/49489cc171aee72855930aaf68112b42.jpg?wh=1820x1350\" alt=\"å›¾ç‰‡\" title=\"é€šè¿‡å°†æ–‡æœ¬åˆ†ç‰‡å»ºç«‹æ ‘çŠ¶ç»“æ„çš„ç´¢å¼•æ¥å®Œæˆå…¨æ–‡çš„æ€»ç»“\"></p><p>äº‹å®ä¸Šï¼Œllama-indexæœ¬èº«å°±å†…ç½®äº†è¿™æ ·çš„åŠŸèƒ½ã€‚ä¸‹é¢æˆ‘ä»¬å°±æ¥çœ‹çœ‹è¦å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Œæˆ‘ä»¬çš„ä»£ç åº”è¯¥æ€ä¹ˆå†™ã€‚</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬å…ˆæ¥å®‰è£…ä¸€ä¸‹ spaCy è¿™ä¸ªPythonåº“ï¼Œå¹¶ä¸”ä¸‹è½½ä¸€ä¸‹å¯¹åº”çš„ä¸­æ–‡åˆ†è¯åˆ†å¥éœ€è¦çš„æ¨¡å‹ã€‚</p><pre><code class=\"language-python\">pip install spacy\npython -m spacy download zh_core_web_sm\n</code></pre><p>æ¥ä¸‹æ¥çš„ä»£ç å¾ˆç®€å•ï¼Œæˆ‘ä»¬é€‰ç”¨äº†GPTListIndexè¿™ä¸ªllama-indexé‡Œæœ€ç®€å•çš„ç´¢å¼•ç»“æ„ã€‚ä¸è¿‡æˆ‘ä»¬é’ˆå¯¹è‡ªèº«éœ€æ±‚åšäº†ä¸¤ç‚¹ä¼˜åŒ–ã€‚</p><p>é¦–å…ˆï¼Œåœ¨ç´¢å¼•é‡Œé¢ï¼Œæˆ‘ä»¬æŒ‡å®šäº†ä¸€ä¸ª LLMPredictorï¼Œè®©æˆ‘ä»¬å‘OpenAIå‘èµ·è¯·æ±‚çš„æ—¶å€™ï¼Œéƒ½ä½¿ç”¨ChatGPTçš„æ¨¡å‹ã€‚å› ä¸ºè¿™ä¸ªæ¨¡å‹æ¯”è¾ƒå¿«ï¼Œä¹Ÿæ¯”è¾ƒä¾¿å®œã€‚llama-indexé»˜è®¤ä½¿ç”¨çš„æ¨¡å‹æ˜¯text-davinci-003ï¼Œä»·æ ¼æ¯”gpt-3.5-turboè¦è´µä¸Šåå€ã€‚åœ¨æˆ‘ä»¬å‰é¢åªæ˜¯ç®€å•è¿›è¡Œå‡ è½®å¯¹è¯çš„æ—¶å€™ï¼Œè¿™ä¸ªä»·æ ¼å·®å¼‚è¿˜ä¸æ˜æ˜¾ã€‚è€Œå¦‚æœä½ è¦æŠŠå‡ åæœ¬ä¹¦éƒ½çŒè¿›å»ï¼Œé‚£æˆæœ¬ä¸Šå°±ä¼šå·®ä¸Šä¸å°‘äº†ã€‚æˆ‘ä»¬åœ¨è¿™é‡Œï¼Œè®¾ç½®äº†æ¨¡å‹è¾“å‡ºçš„å†…å®¹éƒ½åœ¨1024ä¸ªTokenä»¥å†…ï¼Œè¿™æ ·å¯ä»¥ç¡®ä¿æˆ‘ä»¬çš„å°ç»“ä¸ä¼šå¤ªé•¿ï¼Œä¸ä¼šæŠŠä¸€å¤§æ®µä¸ç›¸å…³çš„å†…å®¹éƒ½åˆå¹¶åˆ°ä¸€èµ·å»ã€‚</p><p>å…¶æ¬¡ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä½¿ç”¨ SpacyTextSplitteræ¥è¿›è¡Œä¸­æ–‡æ–‡æœ¬çš„åˆ†å‰²ã€‚llama-indexé»˜è®¤çš„è®¾ç½®å¯¹äºä¸­æ–‡çš„æ”¯æŒå’Œæ•ˆæœéƒ½ä¸å¤ªå¥½ã€‚ä¸è¿‡å¥½åœ¨å®ƒå¯ä»¥è®©ä½ è‡ªå®šä¹‰ä½¿ç”¨çš„æ–‡æœ¬åˆ†å‰²æ–¹å¼ã€‚æˆ‘ä»¬é€‰ç”¨çš„æ–‡ç« æ˜¯ä¸­æ–‡çš„ï¼Œé‡Œé¢çš„æ ‡ç‚¹ç¬¦å·ä¹Ÿéƒ½æ˜¯ä¸­æ–‡çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±ç”¨äº†ä¸­æ–‡çš„è¯­è¨€æ¨¡å‹ã€‚æˆ‘ä»¬ä¹Ÿé™åˆ¶äº†åˆ†å‰²å‡ºæ¥çš„æ–‡æœ¬æ®µï¼Œæœ€é•¿ä¸è¦è¶…è¿‡2048ä¸ªTokenï¼Œè¿™äº›å‚æ•°éƒ½å¯ä»¥æ ¹æ®ä½ å®é™…ç”¨æ¥å¤„ç†çš„æ–‡ç« å†…å®¹å’Œå±æ€§è‡ªå·±è®¾ç½®ã€‚</p><pre><code class=\"language-python\">from langchain.chat_models import ChatOpenAI\nfrom langchain.text_splitter import SpacyTextSplitter\nfrom llama_index import GPTListIndex, LLMPredictor, ServiceContext\nfrom llama_index.node_parser import SimpleNodeParser\n\n# define LLM\nllm_predictor = LLMPredictor(llm=ChatOpenAI(temperature=0, model_name=\"gpt-3.5-turbo\", max_tokens=1024))\n\ntext_splitter = SpacyTextSplitter(pipeline=\"zh_core_web_sm\", chunk_size = 2048)\nparser = SimpleNodeParser(text_splitter=text_splitter)\ndocuments = SimpleDirectoryReader('./data/mr_fujino').load_data()\nnodes = parser.get_nodes_from_documents(documents)\n\nservice_context = ServiceContext.from_defaults(llm_predictor=llm_predictor)\n\nlist_index = GPTListIndex(nodes=nodes, service_context=service_context)\n</code></pre><p>è¾“å‡ºç»“æœï¼š</p><pre><code class=\"language-python\">WARNING:llama_index.llm_predictor.base:Unknown max input size for gpt-3.5-turbo, using defaults.\nINFO:llama_index.token_counter.token_counter:&gt; [build_index_from_nodes] Total LLM token usage: 0 tokens\nINFO:llama_index.token_counter.token_counter:&gt; [build_index_from_nodes] Total embedding token usage: 0 tokens\n</code></pre><p>GPTListIndexåœ¨æ„å»ºç´¢å¼•çš„æ—¶å€™ï¼Œå¹¶ä¸ä¼šåˆ›å»ºEmbeddingï¼Œæ‰€ä»¥ç´¢å¼•åˆ›å»ºçš„æ—¶å€™å¾ˆå¿«ï¼Œä¹Ÿä¸æ¶ˆè€—Tokenæ•°é‡ã€‚å®ƒåªæ˜¯æ ¹æ®ä½ è®¾ç½®çš„ç´¢å¼•ç»“æ„å’Œåˆ†å‰²æ–¹å¼ï¼Œå»ºç«‹äº†ä¸€ä¸ªListçš„ç´¢å¼•ã€‚</p><p>æ¥ç€ï¼Œæˆ‘ä»¬å°±å¯ä»¥è®©AIå¸®æˆ‘ä»¬å»å°ç»“è¿™ç¯‡æ–‡ç« äº†ã€‚åŒæ ·çš„ï¼Œæç¤ºè¯­æœ¬èº«å¾ˆé‡è¦ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜æ˜¯å¼ºè°ƒäº†æ–‡ç« å†…å®¹æ˜¯é²è¿…å…ˆç”Ÿä»¥â€œæˆ‘â€è¿™ä¸ªç¬¬ä¸€äººç§°å†™çš„ã€‚å› ä¸ºæˆ‘ä»¬æƒ³è¦çš„æ˜¯æŒ‰ç…§æ ‘çŠ¶ç»“æ„è¿›è¡Œæ–‡ç« çš„å°ç»“ï¼Œæ‰€ä»¥æˆ‘ä»¬è®¾å®šäº†ä¸€ä¸ªå‚æ•°ï¼Œå«åš response_mode = â€œtree_summarizeâ€ã€‚è¿™ä¸ªå‚æ•°ï¼Œå°±ä¼šæŒ‰ç…§ä¸Šé¢æˆ‘ä»¬æ‰€è¯´çš„æ ‘çŠ¶ç»“æ„æŠŠæ•´ä¸ªæ–‡ç« æ€»ç»“å‡ºæ¥ã€‚</p><p>å®é™…ä¸Šï¼Œå®ƒå°±æ˜¯å°†æ¯ä¸€æ®µæ–‡æœ¬åˆ†ç‰‡ï¼Œéƒ½é€šè¿‡queryå†…çš„æç¤ºè¯­å°ç»“ã€‚å†å¯¹å¤šä¸ªå°ç»“é‡Œçš„å†…å®¹ï¼Œå†æ¬¡é€šè¿‡queryé‡Œçš„æç¤ºè¯­ç»§ç»­å°ç»“ã€‚</p><pre><code class=\"language-python\">response = list_index.query(\"ä¸‹é¢é²è¿…å…ˆç”Ÿä»¥ç¬¬ä¸€äººç§°â€˜æˆ‘â€™å†™çš„å†…å®¹ï¼Œè¯·ä½ ç”¨ä¸­æ–‡æ€»ç»“ä¸€ä¸‹:\", response_mode=\"tree_summarize\")\nprint(response)\n</code></pre><p>è¾“å‡ºç»“æœï¼š</p><pre><code class=\"language-python\">INFO:llama_index.indices.common_tree.base:&gt; Building index from nodes: 2 chunks\nINFO:llama_index.token_counter.token_counter:&gt; [query] Total LLM token usage: 9787 tokens\nINFO:llama_index.token_counter.token_counter:&gt; [query] Total embedding token usage: 0 tokens\né²è¿…å…ˆç”Ÿå›å¿†äº†è‡ªå·±åœ¨æ—¥æœ¬å­¦åŒ»æœŸé—´çš„ç»å†ï¼Œæè¿°äº†è‡ªå·±åœ¨è§£å‰–å®ä¹ ä¸­çš„ç»å†ï¼Œä»¥åŠä¸æ•™æˆè—¤é‡å…ˆç”Ÿçš„äº¤å¾€ã€‚ä»–è¿˜æåˆ°äº†ä¸€äº›ä¸æ„‰å¿«çš„äº‹æƒ…ï¼Œæ¯”å¦‚é­åˆ°åŒå­¦çš„è¯½è°¤å’Œæ­§è§†ï¼Œä»¥åŠçœ‹åˆ°ä¸­å›½äººè¢«æªæ¯™æ—¶çš„æ„Ÿå—ã€‚æœ€åï¼Œä»–å‘Šè¯‰è—¤é‡å…ˆç”Ÿè‡ªå·±å°†ä¸å†å­¦åŒ»ï¼Œè€Œæ˜¯æƒ³å­¦ç”Ÿç‰©å­¦ã€‚ä»–æƒ³èµ·äº†ä¸€ä¸ªäººï¼Œè¿™ä¸ªäººæ˜¯ä»–çš„è€å¸ˆï¼Œä»–å¯¹é²è¿…å¾ˆçƒ­å¿ƒï¼Œç»™ä»–å¾ˆå¤šé¼“åŠ±å’Œæ•™è¯²ã€‚é²è¿…ç°åœ¨åªæœ‰ä»–çš„ç…§ç‰‡ï¼Œä½†æ˜¯æ¯æ¬¡çœ‹åˆ°ä»–çš„ç…§ç‰‡ï¼Œéƒ½ä¼šè®©ä»–æ„Ÿåˆ°å‹‡æ°”å’Œè‰¯å¿ƒå‘ç°ã€‚\n</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬åªç”¨äº†å‡ è¡Œä»£ç å°±å®Œæˆäº†æ•´ä¸ªæ–‡ç« çš„å°ç»“ï¼Œè¿”å›çš„ç»“æœæ•´ä½“ä¸Šæ¥è¯´ä¹Ÿè¿˜ç®—ä¸é”™ã€‚</p><h2>å¼•å…¥å¤šæ¨¡æ€ï¼Œè®©llamd-indexèƒ½å¤Ÿè¯†åˆ«å°ç¥¨</h2><p>llama_indexä¸å…‰èƒ½ç´¢å¼•æ–‡æœ¬ï¼Œå¾ˆå¤šä¹¦é‡Œé¢è¿˜æœ‰å›¾ç‰‡ã€æ’ç”»è¿™æ ·çš„ä¿¡æ¯ã€‚llama_indexä¸€æ ·å¯ä»¥ç´¢å¼•èµ·æ¥ï¼Œä¾›ä½ æŸ¥è¯¢ï¼Œè¿™ä¹Ÿå°±æ˜¯æ‰€è°“çš„å¤šæ¨¡æ€èƒ½åŠ›ã€‚å½“ç„¶ï¼Œè¿™ä¸ªèƒ½åŠ›å…¶å®æ˜¯é€šè¿‡ä¸€äº›å¤šæ¨¡æ€çš„æ¨¡å‹ï¼ŒæŠŠæ–‡æœ¬å’Œå›¾ç‰‡èƒ½å¤Ÿè”ç³»åˆ°ä¸€èµ·åšåˆ°çš„ã€‚åœ¨æ•´ä¸ªè¯¾ç¨‹çš„ç¬¬ä¸‰éƒ¨åˆ†ï¼Œæˆ‘ä»¬ä¹Ÿä¼šä¸“é—¨æ¥çœ‹çœ‹è¿™äº›å›¾åƒçš„å¤šæ¨¡æ€æ¨¡å‹æ˜¯æ€ä¹ˆæ ·çš„ã€‚</p><p>è¿™é‡Œæˆ‘ä»¬å°±æ¥çœ‹ä¸€ä¸ªllama_index<a href=\"https://github.com/jerryjliu/llama_index/blob/main/examples/multimodal/Multimodal.ipynb\">å®˜æ–¹æ ·ä¾‹åº“</a>é‡Œé¢ç»™åˆ°çš„ä¾‹å­ï¼Œä¹Ÿå°±æ˜¯æŠŠåƒé¥­çš„å°ç¥¨éƒ½æ‹ä¸‹æ¥ã€‚ç„¶åè¯¢é—®å“ªå¤©åƒäº†ä»€ä¹ˆï¼ŒèŠ±äº†å¤šå°‘é’±ã€‚</p><pre><code class=\"language-python\">from llama_index import SimpleDirectoryReader, GPTVectorStoreIndex\nfrom llama_index.readers.file.base import DEFAULT_FILE_EXTRACTOR, ImageParser\nfrom llama_index.response.notebook_utils import display_response, display_image\nfrom llama_index.indices.query.query_transform.base import ImageOutputQueryTransform\n\nimage_parser = ImageParser(keep_image=True, parse_text=True)\nfile_extractor = DEFAULT_FILE_EXTRACTOR\nfile_extractor.update(\n{\n    \".jpg\": image_parser,\n    \".png\": image_parser,\n    \".jpeg\": image_parser,\n})\n\n# NOTE: we add filename as metadata for all documents\nfilename_fn = lambda filename: {'file_name': filename}\n\nreceipt_reader = SimpleDirectoryReader(\n    input_dir='./data/receipts', \n    file_extractor=file_extractor, \n    file_metadata=filename_fn,\n)\nreceipt_documents = receipt_reader.load_data()\n</code></pre><p>è¦èƒ½å¤Ÿç´¢å¼•å›¾ç‰‡ï¼Œæˆ‘ä»¬å¼•å…¥äº†ImageParserè¿™ä¸ªç±»ï¼Œè¿™ä¸ªç±»èƒŒåï¼Œå…¶å®æ˜¯ä¸€ä¸ªåŸºäºOCRæ‰«æçš„æ¨¡å‹ <a href=\"https://huggingface.co/naver-clova-ix/donut-base-finetuned-cord-v2\">Donut</a>ã€‚å®ƒé€šè¿‡ä¸€ä¸ªè§†è§‰çš„Encoderå’Œä¸€ä¸ªæ–‡æœ¬çš„Decoderï¼Œè¿™æ ·ä»»ä½•ä¸€ä¸ªå›¾ç‰‡èƒ½å¤Ÿå˜æˆä¸€ä¸ªä¸€æ®µæ–‡æœ¬ï¼Œç„¶åæˆ‘ä»¬å†é€šè¿‡OpenAIçš„EmbeddingæŠŠè¿™æ®µæ–‡æœ¬å˜æˆäº†ä¸€ä¸ªå‘é‡ã€‚</p><p>æˆ‘ä»¬ä»ç„¶åªéœ€è¦ä½¿ç”¨ç®€å•çš„SimpleDirectoryReaderï¼Œæˆ‘ä»¬é€šè¿‡æŒ‡å®šFileExtractorï¼Œä¼šæŠŠå¯¹åº”çš„å›¾ç‰‡é€šè¿‡ImageParserè§£ææˆä¸ºæ–‡æœ¬ï¼Œå¹¶æœ€ç»ˆæˆä¸ºå‘é‡æ¥ç”¨äºæ£€ç´¢ã€‚</p><p>ç„¶åï¼Œæˆ‘ä»¬ä»ç„¶åªéœ€è¦å‘æˆ‘ä»¬çš„ç´¢å¼•ç”¨è‡ªç„¶è¯­è¨€æé—®ï¼Œå°±èƒ½æ‰¾åˆ°å¯¹åº”çš„å›¾ç‰‡äº†ã€‚åœ¨æé—®çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸“é—¨åˆ¶å®šäº†ä¸€ä¸ªImageOutputQueryTransformï¼Œä¸»è¦æ˜¯ä¸ºäº†åœ¨è¾“å‡ºç»“æœçš„æ—¶å€™ï¼Œèƒ½å¤Ÿåœ¨å›¾ç‰‡å¤–åŠ ä¸Š <code>&lt;img&gt;</code> çš„æ ‡ç­¾æ–¹ä¾¿åœ¨Notebooké‡Œé¢æ˜¾ç¤ºã€‚</p><pre><code class=\"language-python\">receipts_index = GPTVectorStoreIndex.from_documents(receipt_documents)\nreceipts_response = receipts_index.query(\n    'When was the last time I went to McDonald\\'s and how much did I spend. \\\n    Also show me the receipt from my visit.',\n    query_transform=ImageOutputQueryTransform(width=400)\n)\n\ndisplay_response(receipts_response)\n</code></pre><p>è¾“å‡ºç»“æœï¼š</p><pre><code class=\"language-python\">INFO:llama_index.token_counter.token_counter:&gt; [query] Total LLM token usage: 1004 tokens\nINFO:llama_index.token_counter.token_counter:&gt; [query] Total embedding token usage: 30 tokens\n\nFinal Response:&nbsp;The last time you went to McDonald's was on 03/10/2018 at 07:39:12 PM and you spent $26.15. Here is the receipt from your visit:\n</code></pre><p><img src=\"https://static001.geekbang.org/resource/image/18/08/181747bf1e95664b3929db6ec4a46b08.jpg?wh=750x1000\" alt=\"å›¾ç‰‡\"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œç­”æ¡ˆä¸­ä¸ä»…æ˜¾ç¤ºå‡ºäº†å¯¹åº”çš„å›¾ç‰‡ï¼Œä¹Ÿç»™å‡ºäº†æ­£ç¡®çš„ç­”æ¡ˆï¼Œè¿™ä¹Ÿè¦å½’åŠŸäºOpenAIå¯¹äºä»»æ„æ–‡æœ¬å¼ºå¤§çš„å¤„ç†èƒ½åŠ›ã€‚</p><p>æˆ‘ä»¬å¯ä»¥å•ç‹¬è§£æä¸€ä¸‹å›¾ç‰‡ï¼Œçœ‹çœ‹å¯¹åº”çš„æ–‡æœ¬å†…å®¹æ˜¯ä»€ä¹ˆã€‚</p><pre><code class=\"language-python\">output_image = image_parser.parse_file('./data/receipts/1100-receipt.jpg')\nprint(output_image.text)\n</code></pre><p>è¾“å‡ºç»“æœï¼š</p><pre><code class=\"language-plain\">&lt;s_menu&gt;&lt;s_nm&gt; Story&lt;/s_nm&gt;&lt;s_num&gt; 16725 Stony Platin Rd&lt;/s_nm&gt;&lt;s_num&gt; Store#:&lt;/s_nm&gt;&lt;s_num&gt; 3659&lt;/s_num&gt;&lt;s_price&gt; 700-418-8362&lt;/s_price&gt;&lt;sep/&gt;&lt;s_nm&gt; Welcome to all day breakfast dormist O Md Donald's&lt;/s_nm&gt;&lt;s_num&gt; 192&lt;/s_num&gt;&lt;s_price&gt; 192&lt;/s_price&gt;&lt;sep/&gt;&lt;s_nm&gt; QTY ITEM&lt;/s_nm&gt;&lt;s_num&gt; OTAL&lt;/s_num&gt;&lt;s_unitprice&gt; 03/10/2018&lt;/s_unitprice&gt;&lt;s_cnt&gt; 1&lt;/s_cnt&gt;&lt;s_price&gt; 07:39:12 PM&lt;/s_price&gt;&lt;sep/&gt;&lt;s_nm&gt; Delivery&lt;/s_nm&gt;&lt;s_cnt&gt; 1&lt;/s_cnt&gt;&lt;s_price&gt; 0.00&lt;/s_price&gt;&lt;sep/&gt;&lt;s_nm&gt; 10 McNuggets EVM&lt;/s_nm&gt;&lt;s_cnt&gt; 1&lt;/s_cnt&gt;&lt;s_price&gt; 10.29&lt;/s_price&gt;&lt;sep/&gt;&lt;s_nm&gt; Barbeque Sauce&lt;/s_nm&gt;&lt;s_cnt&gt; 1&lt;/s_cnt&gt;&lt;s_price&gt; 1&lt;/s_price&gt;&lt;sep/&gt;&lt;s_nm&gt; Barbeque Sauce&lt;/s_nm&gt;&lt;s_num&gt; 1&lt;/s_cnt&gt;&lt;s_price&gt; 0.40&lt;/s_price&gt;&lt;sep/&gt;&lt;s_nm&gt; L Coke&lt;/s_nm&gt;&lt;s_cnt&gt; 1&lt;/s_cnt&gt;&lt;s_price&gt; 0.40&lt;/s_price&gt;&lt;sep/&gt;&lt;s_nm&gt; M French Fries&lt;/s_nm&gt;&lt;s_cnt&gt; 1&lt;/s_cnt&gt;&lt;s_price&gt; 3.99&lt;/s_price&gt;&lt;sep/&gt;&lt;s_nm&gt; HM GrChS S-Fry Yog&lt;/s_nm&gt;&lt;s_cnt&gt; 1&lt;/s_cnt&gt;&lt;sep/&gt;&lt;s_nm&gt; Smoonya&lt;/s_nm&gt;&lt;s_cnt&gt; 1&lt;/s_cnt&gt;&lt;sep/&gt;&lt;s_nm&gt; HM Apple Juice&lt;/s_nm&gt;&lt;s_cnt&gt; 1&lt;/s_cnt&gt;&lt;s_price&gt; 2.89&lt;/s_price&gt;&lt;sep/&gt;&lt;s_nm&gt; Cookies&lt;/s_nm&gt;&lt;s_cnt&gt; 6&lt;/s_cnt&gt;&lt;s_price&gt; 2.89&lt;/s_price&gt;&lt;sep/&gt;&lt;s_nm&gt; Choc Chip Cookie&lt;/s_nm&gt;&lt;s_cnt&gt; 6&lt;/s_cnt&gt;&lt;s_price&gt; 1.19&lt;/s_price&gt;&lt;sep/&gt;&lt;s_nm&gt; Baked Apple Pie&lt;/s_nm&gt;&lt;s_cnt&gt; 1&lt;/s_cnt&gt;&lt;s_price&gt; 3.29&lt;/s_price&gt;&lt;sep/&gt;&lt;s_nm&gt; French Fries&lt;/s_nm&gt;&lt;s_cnt&gt; 1&lt;/s_cnt&gt;&lt;s_price&gt; 2.99&lt;/s_price&gt;&lt;sep/&gt;&lt;s_nm&gt; Iced Tea&lt;/s_nm&gt;&lt;s_cnt&gt; 1&lt;/s_cnt&gt;&lt;s_price&gt; 2.99&lt;/s_price&gt;&lt;/s_menu&gt;&lt;s_sub_total&gt;&lt;s_subtotal_price&gt; 25.04&lt;/s_subtotal_price&gt;&lt;s_tax_price&gt; 1.11&lt;/s_tax_price&gt;&lt;/s_sub_total&gt;&lt;s_total&gt;&lt;s_total_price&gt; 26.15&lt;/s_total_price&gt;&lt;s_changeprice&gt; 0.00&lt;/s_changeprice&gt;&lt;s_creditcardprice&gt; 26.15&lt;/s_creditcardprice&gt;&lt;/s_total&gt;\n\n\n\n</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œå¯¹åº”çš„å°±æ˜¯OCRåçš„æ–‡æœ¬ç»“æœï¼Œé‡Œé¢çš„ç¡®æœ‰å¯¹åº”æˆ‘ä»¬å»çš„åº—é“ºçš„åå­—å’Œæ—¶é—´ï¼Œä»¥åŠæ¶ˆè´¹çš„é‡‘é¢ã€‚</p><p>å›´ç»•OpenAIä»¥åŠæ•´ä¸ªå¤§è¯­è¨€æ¨¡å‹çš„ç”Ÿæ€è¿˜åœ¨å¿«é€Ÿå‘å±•ä¸­ï¼Œæ‰€ä»¥llama-indexè¿™ä¸ªåº“ä¹Ÿåœ¨å¿«é€Ÿè¿­ä»£ã€‚æˆ‘è‡ªå·±åœ¨ä½¿ç”¨çš„è¿‡ç¨‹ä¸­ï¼Œä¹Ÿé‡åˆ°å„ç§å„æ ·çš„å°Bugã€‚å¯¹äºä¸­æ–‡çš„æ”¯æŒä¹Ÿæœ‰å„ç§å„æ ·çš„å°ç¼ºé™·ã€‚ä¸è¿‡ï¼Œä½œä¸ºå¼€æºé¡¹ç›®ï¼Œå®ƒå·²ç»æœ‰ä¸€ä¸ªå¾ˆä¸é”™çš„ç”Ÿæ€äº†ï¼Œç‰¹åˆ«æ˜¯æä¾›äº†å¤§é‡çš„DataConnectorï¼Œæ—¢åŒ…æ‹¬PDFã€ePubè¿™æ ·çš„ç”µå­ä¹¦æ ¼å¼ï¼Œä¹ŸåŒ…æ‹¬YouTubeã€Notionã€MongoDBè¿™æ ·å¤–éƒ¨çš„æ•°æ®æºã€APIæ¥å…¥çš„æ•°æ®ï¼Œæˆ–è€…æ˜¯æœ¬åœ°æ•°æ®åº“çš„æ•°æ®ã€‚ä½ å¯ä»¥åœ¨ <a href=\"https://llamahub.ai/\">llamahub.ai</a> çœ‹åˆ°ç¤¾åŒºå¼€å‘å‡ºæ¥çš„è¯»å–å„ç§ä¸åŒæ•°æ®æºæ ¼å¼çš„DataConnectorã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/d1/91/d19d1dd9888785c85bbc3ac5aec08191.png?wh=1237x1029\" alt=\"å›¾ç‰‡\"></p><h2>å°ç»“</h2><p>å¥½äº†ï¼Œç›¸ä¿¡ç»è¿‡è¿™ä¸€è®²ï¼Œä½ å·²ç»èƒ½å¤Ÿä¸Šæ‰‹ä½¿ç”¨llama-indexè¿™ä¸ªPythonåŒ…äº†ã€‚é€šè¿‡å®ƒï¼Œä½ å¯ä»¥å¿«é€Ÿå°†å¤–éƒ¨çš„èµ„æ–™åº“å˜æˆç´¢å¼•ï¼Œå¹¶ä¸”é€šè¿‡å®ƒæä¾›çš„queryæ¥å£å¿«é€Ÿå‘æ–‡æ¡£æé—®ï¼Œä¹Ÿèƒ½å¤Ÿé€šè¿‡å°†æ–‡æœ¬åˆ†ç‰‡ï¼Œå¹¶é€šè¿‡æ ‘çŠ¶çš„æ–¹å¼ç®¡ç†ç´¢å¼•å¹¶è¿›è¡Œå°ç»“ã€‚</p><p>llama-indexè¿˜æœ‰å¾ˆå¤šå…¶ä»–åŠŸèƒ½ï¼Œè¿™ä¸ªPythonåº“ä»ç„¶åœ¨å‘å±•è¿‡ç¨‹ä¸­ï¼Œä¸è¿‡å·²ç»éå¸¸å€¼å¾—æ‹¿æ¥ä½¿ç”¨ï¼ŒåŠ é€Ÿä½ å¼€å‘å¤§è¯­è¨€æ¨¡å‹ç±»çš„ç›¸å…³åº”ç”¨äº†ã€‚ç›¸å…³çš„æ–‡æ¡£ï¼Œå¯ä»¥åœ¨<a href=\"https://gpt-index.readthedocs.io/en/latest/\">å®˜ç½‘</a>çœ‹åˆ°ã€‚å¯¹åº”çš„ä»£ç ä¹Ÿæ˜¯å¼€æºçš„ï¼Œé‡åˆ°é—®é¢˜ä¹Ÿå¯ä»¥ç›´æ¥å»<a href=\"https://github.com/jerryjliu/gpt_index\">æºä»£ç </a>é‡Œä¸€æ¢ç©¶ç«Ÿã€‚</p><p>llama-indexå…¶å®ç»™å‡ºäº†ä¸€ç§ä½¿ç”¨å¤§è¯­è¨€æ¨¡å‹çš„è®¾è®¡æ¨¡å¼ï¼Œæˆ‘ç§°ä¹‹ä¸ºâ€œç¬¬äºŒå¤§è„‘â€æ¨¡å¼ã€‚é€šè¿‡å…ˆå°†å¤–éƒ¨çš„èµ„æ–™åº“ç´¢å¼•ï¼Œç„¶åæ¯æ¬¡æé—®çš„æ—¶å€™ï¼Œå…ˆä»èµ„æ–™åº“é‡Œé€šè¿‡æœç´¢æ‰¾åˆ°æœ‰ç›¸å…³æ€§çš„ææ–™ï¼Œç„¶åå†é€šè¿‡AIçš„è¯­ä¹‰ç†è§£èƒ½åŠ›è®©AIåŸºäºæœç´¢åˆ°çš„ç»“æœæ¥å›ç­”é—®é¢˜ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/e4/6c/e4ae3fbeaa82d82e317dfcef40679f6c.jpg?wh=1896x1292\" alt=\"å›¾ç‰‡\"></p><p>å…¶ä¸­ï¼Œå‰ä¸¤æ­¥çš„ç´¢å¼•å’Œæœç´¢ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨OpenAIçš„Embeddingæ¥å£ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å…¶å®ƒçš„å¤§è¯­è¨€æ¨¡å‹çš„Embeddingï¼Œæˆ–è€…ä¼ ç»Ÿçš„æ–‡æœ¬æœç´¢æŠ€æœ¯ã€‚åªæœ‰æœ€åä¸€æ­¥çš„é—®ç­”ï¼Œå¾€å¾€æ‰å¿…é¡»ä½¿ç”¨OpenAIçš„æ¥å£ã€‚æˆ‘ä»¬ä¸ä»…å¯ä»¥ç´¢å¼•æ–‡æœ¬ä¿¡æ¯ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å…¶ä»–çš„æ¨¡å‹æ¥æŠŠå›¾ç‰‡å˜æˆæ–‡æœ¬è¿›è¡Œç´¢å¼•ï¼Œå®ç°æ‰€è°“çš„å¤šæ¨¡æ€åŠŸèƒ½ã€‚</p><p>å¸Œæœ›é€šè¿‡ä»Šå¤©çš„è¿™å‡ ä¸ªä¾‹å­ï¼Œä½ ä¹Ÿèƒ½å¼€å§‹å»ºç«‹èµ·è‡ªå·±çš„â€œç¬¬äºŒå¤§è„‘â€èµ„æ–™åº“ï¼Œèƒ½å¤Ÿå°†è‡ªå·±çš„æ•°æ®é›†äº¤ç»™AIè¿›è¡Œç´¢å¼•ï¼Œè·å¾—ä¸€ä¸ªä¸“å±äºä½ è‡ªå·±çš„AIã€‚</p><h2>è¯¾åç»ƒä¹ </h2><ol>\n<li>llama-indexçš„ç”Ÿæ€ï¼Œä¸ä»…æ”¯æŒå„ç§å„æ ·çš„DataConnectorå»åŠ è½½æ•°æ®ï¼Œåç«¯ä¹Ÿæ”¯æŒå„ç§å½¢å¼çš„ç´¢å¼•ï¼Œæ¯”å¦‚åœ¨è¯­ä¹‰æœç´¢é‡Œé¢æˆ‘ä»¬ä»‹ç»è¿‡çš„ Faissã€Pineconeã€Weaviate å®ƒéƒ½æ˜¯æ”¯æŒçš„ã€‚é™¤äº†è¿™äº›ä¹‹å¤–ï¼Œä½ èƒ½çœ‹çœ‹ llama-index è¿˜æœ‰å“ªäº›å½¢å¼çš„ç´¢å¼•å—ï¼Ÿé™¤äº†è¿›è¡Œé—®ç­”å’Œæ–‡ç« æ¦‚æ‹¬ä¹‹å¤–ï¼Œä½ è§‰å¾—è¿™ä¸ªåº“è¿˜èƒ½å¸®åŠ©æˆ‘ä»¬åšä»€ä¹ˆäº‹æƒ…ï¼Ÿ</li>\n<li>ç°åœ¨æœ‰å¾ˆå¤šåº”ç”¨ï¼Œåœ¨ä½ æŠŠæ–‡æ¡£ä¸Šä¼ ä¹‹åï¼Œè¿˜ä¼šç»™ä½ ä¸€ç³»åˆ—çš„æç¤ºï¼Œå‘Šè¯‰ä½ å¯ä»¥å‘å¯¹åº”çš„ä¹¦æˆ–è€…è®ºæ–‡é—®ä»€ä¹ˆé—®é¢˜ã€‚æ¯”å¦‚ <a href=\"https://scispace.com/\">SCISPACE</a>ï¼Œä½ èƒ½æƒ³æƒ³è¿™äº›é—®é¢˜æ˜¯æ€ä¹ˆæ¥çš„å—ï¼Ÿ</li>\n</ol><p>æœŸå¾…èƒ½åœ¨è¯„è®ºåŒºçœ‹åˆ°ä½ çš„åˆ†äº«ï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠè¿™èŠ‚è¯¾åˆ†äº«ç»™æ„Ÿå…´è¶£çš„æœ‹å‹ï¼Œæˆ‘ä»¬ä¸‹ä¸€è®²å†è§ã€‚</p><h2>æ¨èé˜…è¯»</h2><p>llama-indexçš„åŠŸèƒ½éå¸¸å¼ºå¤§ï¼Œå¹¶ä¸”æºä»£ç é‡Œä¹Ÿä¸“é—¨æä¾›äº†ç¤ºä¾‹éƒ¨åˆ†ã€‚ä½ å¯ä»¥å»çœ‹ä¸€ä¸‹å®ƒçš„å®˜æ–¹æ–‡æ¡£ä»¥åŠç¤ºä¾‹ï¼Œäº†è§£å®ƒå¯ä»¥ç”¨æ¥å¹²ä»€ä¹ˆã€‚</p><ol>\n<li>å®˜æ–¹æ–‡æ¡£ï¼š<a href=\"https://gpt-index.readthedocs.io/en/latest/\">https://gpt-index.readthedocs.io/en/latest/</a></li>\n<li>æºç ä»¥åŠç¤ºä¾‹ï¼š<a href=\"https://github.com/jerryjliu/llama_index\">https://github.com/jerryjliu/llama_index</a></li>\n</ol>","neighbors":{"left":{"article_title":"09ï½œè¯­ä¹‰æ£€ç´¢ï¼Œåˆ©ç”¨Embeddingä¼˜åŒ–ä½ çš„æœç´¢åŠŸèƒ½","id":644795},"right":{"article_title":"11ï½œçœä¸‹é’±ä¹°æ˜¾å¡ï¼Œå¦‚ä½•åˆ©ç”¨å¼€æºæ¨¡å‹èŠ‚çº¦æˆæœ¬ï¼Ÿ","id":646363}},"comments":[{"had_liked":false,"id":388077,"user_name":"Owen","can_delete":false,"product_type":"c1","uid":2403622,"ip_address":"å¹¿ä¸œ","ucode":"FDE0D574B8ED5A","user_header":"https://static001.geekbang.org/account/avatar/00/24/ad/26/767527f6.jpg","comment_is_top":true,"comment_ctime":1709282167,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100541001,"comment_content":"æˆªæ­¢åˆ°ç›®å‰ï¼Œæœ€æ–°èƒ½è¿è¡Œçš„ä»£ç \n\n&#39;&#39;&#39;\nå½’çº³æ€»ç»“æ–‡ç« å†…å®¹\n&#39;&#39;&#39;\nfrom langchain.chat_models import ChatOpenAI\nfrom langchain.text_splitter import SpacyTextSplitter\nfrom llama_index.core import SummaryIndex, ServiceContext, SimpleDirectoryReader\nfrom llama_index.core.node_parser import SentenceSplitter\n\ndocuments = SimpleDirectoryReader(input_dir=&quot;data&quot;).load_data() # åªèƒ½å¡«å†™æ–‡ä»¶å¤¹ï¼Œä¸èƒ½å…·ä½“åˆ°æ–‡ä»¶\n\nservice_context = ServiceContext.from_defaults(\n    llm=ChatOpenAI(temperature=0, model_name=&quot;gpt-3.5-turbo&quot;, max_tokens=1000, n=1),\n    node_parser=SentenceSplitter(chunk_size=512, chunk_overlap=20),\n)\n\nindex = SummaryIndex.from_documents(documents = documents, service_context = service_context)\nquery_engine = index.as_query_engine()\nresponse = query_engine.query(&quot;ç”¨ä¸­æ–‡æ€»ç»“è¿™ä¸ªæ•…äº‹&quot;)\n\nprint(response)","like_count":6},{"had_liked":false,"id":377612,"user_name":"Penguin Shi","can_delete":false,"product_type":"c1","uid":3646806,"ip_address":"å¹¿ä¸œ","ucode":"477A24D7ECE09A","user_header":"https://static001.geekbang.org/account/avatar/00/37/a5/56/b3cf71a9.jpg","comment_is_top":true,"comment_ctime":1688877102,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100541001,"comment_content":"ã€Šè—¤é‡å…ˆç”Ÿã€‹è¾“å‡ºæ‘˜è¦çš„ä»£ç ï¼Œå› ä¸ºä»£ç æ›´æ–°ï¼Œæœ‰bugï¼Œå‚è€ƒhttps:&#47;&#47;gpt-index.readthedocs.io&#47;en&#47;latest&#47;guides&#47;primer&#47;usage_pattern.htmlæ›´æ–°ä»£ç å¦‚ä¸‹ï¼š\n\nfrom langchain.chat_models import ChatOpenAI\nfrom langchain.text_splitter import SpacyTextSplitter\nfrom llama_index import ListIndex, LLMPredictor, ServiceContext\nfrom llama_index import (\n    VectorStoreIndex,\n    get_response_synthesizer,\n)\nfrom llama_index.retrievers import VectorIndexRetriever\nfrom llama_index.query_engine import RetrieverQueryEngine\nfrom llama_index.node_parser import SimpleNodeParser\n\n# define LLM\nllm_predictor = LLMPredictor(llm=ChatOpenAI(temperature=0, model_name=&quot;gpt-3.5-turbo&quot;, max_tokens=1024))\n\ntext_splitter = SpacyTextSplitter(pipeline=&quot;zh_core_web_sm&quot;, chunk_size = 2048)\nparser = SimpleNodeParser(text_splitter=text_splitter)\ndocuments = SimpleDirectoryReader(&#39;.&#47;data&#47;mr_fujino&#39;).load_data()\n\nindex = ListIndex.from_documents(documents)\nretriever = index.as_retriever()\n\nquery_engine = RetrieverQueryEngine.from_args(retriever, response_mode=&#39;tree_summarize&#39;)\nresponse = query_engine.query(&quot;ä¸‹é¢é²è¿…å…ˆç”Ÿä»¥ç¬¬ä¸€äººç§°â€˜æˆ‘â€™å†™çš„å†…å®¹ï¼Œè¯·ä½ ç”¨ä¸­æ–‡æ€»ç»“ä¸€ä¸‹:&quot;)\n\nprint(response)\n\nå¦ç›®å‰æ–‡æ¡£ä¸­ï¼Œ&quot;æˆ‘æŠŠä»ç½‘ä¸Šæ‰¾åˆ°çš„ã€Šè—¤é‡å…ˆç”Ÿã€‹è¿™ç¯‡æ–‡ç« å˜æˆäº†ä¸€ä¸ª txt æ–‡ä»¶ï¼Œæ”¾åœ¨äº† data&#47;mr_fujino è¿™ä¸ªç›®å½•ä¸‹ã€‚æˆ‘ä»¬çš„ä»£ç ä¹Ÿéå¸¸ç®€å•ï¼Œä¸€å…±æ²¡æœ‰å‡ è¡Œã€‚&quot;æ­¤æ–‡å­—ä¸‹æ–¹ä»£ç çš„ï¼Œç¬¬7è¡Œï¼Œindex = GPTSimpleVectorIndex.from_documents(documents)ä¸­ï¼Œâ€œGPTSimpleVectorIndexâ€è¿˜æœªæ”¹æˆâ€œGPTVectorStoreIndexâ€ ï¼›ç¬¬9è¡Œï¼Œæ›´æ”¹ä¸ºindex.storage_context.persist(&#39;index_mr_fujino&#39;)ã€‚\nè¯·æ›´æ”¹ï¼Œæ–¹ä¾¿åç»­åŒå­¦å­¦ä¹ å¹¶è¿è¡Œä»£ç ã€‚","like_count":7},{"had_liked":false,"id":373999,"user_name":"Wise","can_delete":false,"product_type":"c1","uid":1972275,"ip_address":"é»‘é¾™æ±Ÿ","ucode":"35818A0415BBD4","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqQOqqTaRhPyuHICBpPfMcnNgg7xXmkrNZwlsibyLekYzNsuHdwdk1JLTUicbm4Oq78Zx17TFib2EusQ/132","comment_is_top":false,"comment_ctime":1683467747,"is_pvip":false,"replies":[{"id":136838,"content":"ğŸ‘\n\nå¦‚æœè¿˜æƒ³è¦ç”¨0.5.xè¿è¡Œï¼Œå‚çœ‹ä»¥ä¸‹\n\nâ€œllama index æœ€è¿‘åˆæ›´æ–°äº†å¤§ç‰ˆæœ¬ï¼Œæ¥å£åˆæ”¹äº†ä¸€éã€‚å¦‚æœè¦ç«‹åˆ»å¯ä»¥è¿è¡Œï¼Œå¯ä»¥å…ˆ pip install --force-reinstall -v &quot;llama-index==0.5.27&quot; é€€å›åˆ° 0.5 ç³»åˆ—çš„ç‰ˆæœ¬â€\n\næ™šç‚¹æˆ‘çœ‹ä¸€ä¸‹æ›´æ–°ä»£ç åˆ°0.6.x ç‰ˆæœ¬","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1684746671,"ip_address":"ä¸Šæµ·","comment_id":373999,"utype":1}],"discussion_count":5,"race_medal":0,"score":2,"product_id":100541001,"comment_content":"åœ¨llama_index V0.6.1 ç‰ˆæœ¬ä¸­ï¼Œæ²¡æœ‰GPTSimpleVectorIndex ç±»äº†\nimport openai, os\nfrom llama_index import GPTVectorStoreIndex, SimpleDirectoryReader\nos.environ[&quot;OPENAI_API_KEY&quot;] = &#39;&#39;\n# åŠ è½½ documents\ndocuments = SimpleDirectoryReader(&#39;.&#47;data&#47;mr_fujino&#39;).load_data()\nindex = GPTVectorStoreIndex.from_documents(documents)\nindex.storage_context.persist(&#39;index_mr_fujino&#39;)\n\n# ä»ç£ç›˜é‡æ–°åŠ è½½ï¼š\nfrom llama_index import StorageContext, load_index_from_storage\n# rebuild storage context\nstorage_context = StorageContext.from_defaults(persist_dir=&quot;.&#47;index_mr_fujino&quot;)\n# load index\nindex = load_index_from_storage(storage_context)\nquery_engine = index.as_query_engine()\nresponse = query_engine.query(&quot;é²è¿…å…ˆç”Ÿåœ¨æ—¥æœ¬å­¦ä¹ åŒ»å­¦çš„è€å¸ˆæ˜¯è°ï¼Ÿ&quot;)\nprint(response)\n\nå‚è€ƒå®˜æ–¹æ–‡æ¡£è¿æ¥ï¼šhttps:&#47;&#47;gpt-index.readthedocs.io&#47;en&#47;latest&#47;getting_started&#47;starter_example.html","like_count":20,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":619012,"discussion_content":"ğŸ‘\n\nå¦‚æœè¿˜æƒ³è¦ç”¨0.5.xè¿è¡Œï¼Œå‚çœ‹ä»¥ä¸‹\n\nâ€œllama index æœ€è¿‘åˆæ›´æ–°äº†å¤§ç‰ˆæœ¬ï¼Œæ¥å£åˆæ”¹äº†ä¸€éã€‚å¦‚æœè¦ç«‹åˆ»å¯ä»¥è¿è¡Œï¼Œå¯ä»¥å…ˆ pip install --force-reinstall -v &#34;llama-index==0.5.27&#34; é€€å›åˆ° 0.5 ç³»åˆ—çš„ç‰ˆæœ¬â€\n\næ™šç‚¹æˆ‘çœ‹ä¸€ä¸‹æ›´æ–°ä»£ç åˆ°0.6.x ç‰ˆæœ¬","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1684746671,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1503717,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoWZh2ibhHevq5ndQFMK0Z28fO0bFVd3WxslfkHUlX5YPMPhSq0dqyn4F1ozeLcf8wHGfwG6EiaV5Qw/132","nickname":"Geek_6bdac7","note":"","ucode":"E4AAB2DD740050","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":620872,"discussion_content":"è¯·è€å¸ˆä¿®æ”¹å•Šï¼Œè¿™ä¹ˆå¤šä»˜è´¹ç”¨æˆ·ï¼Œå¾ªç¯è¸©å‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1686636057,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2724787,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/EcSxSBnUJbph9JQibNFLR3EbGg6yfeicCgmZFtlhuibEBrtEG6VPF4b2cjEm4jFGXcdW2wbb92Nxp9D3XN5n3NE6Q/132","nickname":"ç¯","note":"","ucode":"049FBF342B40A8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":618380,"discussion_content":"å¤§ä½¬ï¼Œåé¢çš„åªè€ƒè™‘ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œè€Œä¸è¦æ ¹æ®è‡ªå·±å·²ç»æœ‰çš„å…ˆéªŒçŸ¥è¯†é‚£é‡Œæ€ä¹ˆæ”¹å‘€\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1684216498,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1106310,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/p6AJdaO6KcicsrJPZSIExSLaicibHLtXHkG4XiauE2fuMhPRNMrCibHt2jehO3AYy8EJbCUBbn2sV89ZBb2U4FuG71Q/132","nickname":"Geek_8e076c","note":"","ucode":"07B12DF20722DD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2724787,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/EcSxSBnUJbph9JQibNFLR3EbGg6yfeicCgmZFtlhuibEBrtEG6VPF4b2cjEm4jFGXcdW2wbb92Nxp9D3XN5n3NE6Q/132","nickname":"ç¯","note":"","ucode":"049FBF342B40A8","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":618705,"discussion_content":"query_engine = index.as_query_engine(\n    text_qa_template=QA_PROMPT\n)\nå®˜æ–¹æ–‡æ¡£ï¼šhttps://gpt-index.readthedocs.io/en/latest/how_to/customization/custom_prompts.html","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1684466563,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":618380,"ip_address":"å¹¿ä¸œ","group_id":0},"score":618705,"extra":""}]},{"author":{"id":2724787,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/EcSxSBnUJbph9JQibNFLR3EbGg6yfeicCgmZFtlhuibEBrtEG6VPF4b2cjEm4jFGXcdW2wbb92Nxp9D3XN5n3NE6Q/132","nickname":"ç¯","note":"","ucode":"049FBF342B40A8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":618374,"discussion_content":"å¥½å¤šå‘ï¼Œå¹¸å¥½æœ‰å„ä½å¤§ä½¬ï¼Œä¸ç„¶éƒ½æ‰§è¡Œä¸ä¸‹å»äº†ã€‚å¤ªæµªè´¹æ—¶é—´\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1684215624,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":372134,"user_name":"hello","can_delete":false,"product_type":"c1","uid":1464199,"ip_address":"æ¹–å—","ucode":"854500026E2187","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKhuGLVRYZibOTfMumk53Wn8Q0Rkg0o6DzTicbibCq42lWQoZ8lFeQvicaXuZa7dYsr9URMrtpXMVDDww/132","comment_is_top":false,"comment_ctime":1680771580,"is_pvip":false,"replies":[{"id":135894,"content":"æ ¹æ®OpenAIçš„åè®®\n\n1. é€šè¿‡ChatGPTç•Œé¢æäº¤çš„ä¼šè¢«å†…éƒ¨çœ‹åˆ°ï¼Œå®¡æ ¸ï¼Œå¹¶ç”¨äºè®­ç»ƒ\n2. é€šè¿‡APIæäº¤çš„ä¸ä¼šç”¨äºè®­ç»ƒ","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1680974674,"ip_address":"æ—¥æœ¬","comment_id":372134,"utype":1}],"discussion_count":4,"race_medal":0,"score":2,"product_id":100541001,"comment_content":"æƒ³è¯·æ•™ä¸‹è€å¸ˆï¼Œæˆ‘ä»¬å–‚çš„è¯­æ–™ï¼Œä¼šè¢«å…¶ä»–äººçœ‹åˆ°ä½¿ç”¨å—ï¼Ÿ","like_count":15,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":612890,"discussion_content":"æ ¹æ®OpenAIçš„åè®®\n\n1. é€šè¿‡ChatGPTç•Œé¢æäº¤çš„ä¼šè¢«å†…éƒ¨çœ‹åˆ°ï¼Œå®¡æ ¸ï¼Œå¹¶ç”¨äºè®­ç»ƒ\n2. é€šè¿‡APIæäº¤çš„ä¸ä¼šç”¨äºè®­ç»ƒ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1680974674,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ—¥æœ¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":2,"child_discussions":[{"author":{"id":1355990,"avatar":"https://static001.geekbang.org/account/avatar/00/14/b0/d6/612ce428.jpg","nickname":"cl","note":"","ucode":"82B59E24B8A42F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":615566,"discussion_content":"è€å¸ˆæˆ‘è¡¥å……ä¸‹æé—®ï¼Œæ˜¯å¦æœ‰è¿™ç§å¯èƒ½ï¼šè™½ç„¶é€šè¿‡apiæäº¤çš„é—®é¢˜ä¸ä¼šç”¨äºè®­ç»ƒï¼Œä½†openaiå­˜å‚¨äº†è¿™äº›æäº¤çš„é—®é¢˜ï¼ˆå¹¶åœ¨å°†æ¥æŸä¸ªæ—¶åˆ»åœ¨æ— äººç›‘ç®¡çš„æƒ…å†µä¸‹æŠŠæ•°æ®å–‚ç»™gptï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1682331151,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":612890,"ip_address":"äº‘å—","group_id":0},"score":615566,"extra":""},{"author":{"id":1235077,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/4kF5cFK9MN6WX9Dibodh8pWIib06icoSgSPb6pAhGVjO3gpD72R77eicGkCUWfl3feNtn2icEibhUvgWt890rYLYGoqg/132","nickname":"chitanda","note":"","ucode":"B3E28E1C8E410B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1355990,"avatar":"https://static001.geekbang.org/account/avatar/00/14/b0/d6/612ce428.jpg","nickname":"cl","note":"","ucode":"82B59E24B8A42F","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":626328,"discussion_content":"å°±å¥½æ¯”å¾®ä¿¡è¯´ä»–ä»¬ä¸çœ‹ä¸è®°å½•ä½ çš„èŠå¤©ä¸€æ ·","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1692802121,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":615566,"ip_address":"å››å·","group_id":0},"score":626328,"extra":""}]},{"author":{"id":1430132,"avatar":"https://static001.geekbang.org/account/avatar/00/15/d2/74/7861f504.jpg","nickname":"é©¬å¬","note":"","ucode":"93D83CB5FAE5AD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":612676,"discussion_content":"åŒé—®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1680844295,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":372016,"user_name":"daz2yy","can_delete":false,"product_type":"c1","uid":1008723,"ip_address":"å¹¿ä¸œ","ucode":"639A67961EC893","user_header":"https://static001.geekbang.org/account/avatar/00/0f/64/53/c93b8110.jpg","comment_is_top":false,"comment_ctime":1680599850,"is_pvip":false,"replies":[{"id":135868,"content":"å¯ä»¥é€šè¿‡Few-Shotçš„æ–¹å¼ï¼Œåœ¨Prompté‡Œé¢ç»™AIä¸€äº›ä¾‹å­ï¼Œç±»ä¼¼äºä¸‹é¢è¿™æ ·ï¼Œå…·ä½“Promptä½ è‡ªå·±è°ƒäº†å¤šè¯•ä¸€ä¸‹ã€‚\n\n====\næˆ‘ä»¬çš„é—®é¢˜ä¸€èˆ¬ç”¨è¿™æ ·çš„æ ¼å¼å›ç­”ï¼š\n\né—®é¢˜ï¼šblablabla\nå›ç­”ï¼š\n1. æ–‡æ¡£åœ°å€ blabla\n2. æ“ä½œæ­¥éª¤ blabla\n\n===\nä»¥ä¸‹æ˜¯ä¸Šä¸‹æ–‡\n{context_str}\n\né—®é¢˜ï¼š{question_str}\nå›ç­”ï¼š\n","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1680973026,"ip_address":"ä¸­å›½é¦™æ¸¯","comment_id":372016,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100541001,"comment_content":"è€å¸ˆï¼Œè¯·é—®ä¸‹ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘æŠŠå®ƒç”¨ä½œ QA ç³»ç»Ÿçš„æ—¶å€™æœ‰ä¸ªé—®é¢˜ï¼ŒåŸæœ¬ QA å°±æœ‰æ ‡å‡†çš„å›ç­”æ¨¡ç‰ˆï¼Œé‡Œé¢åŒ…æ‹¬æœ‰æ–‡æ¡£åœ°å€ã€æ“ä½œæ­¥éª¤ç­‰ï¼›å¦‚æœè®© GPT æ ¹æ®è¿™ä¸ªæ¨¡ç‰ˆæ¥å›ç­”é—®é¢˜ï¼Œä»–ä¼šè‡ªç”±å‘æŒ¥ï¼Œä¼šæ¼æ‰ä¸€éƒ¨åˆ†å†…å®¹ï¼›æƒ³æ‹¥æœ‰ AI è‡ªç”±å¯¹è¯çš„èƒ½åŠ›ï¼Œåˆæƒ³æœ‰å›ºå®šçš„å›ç­”æ¨¡ç‰ˆè¿™ä¸ªæ€ä¹ˆèƒ½è¾ƒå¥½çš„å…¼é¡¾å‘¢ï¼Ÿ","like_count":11,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":612863,"discussion_content":"å¯ä»¥é€šè¿‡Few-Shotçš„æ–¹å¼ï¼Œåœ¨Prompté‡Œé¢ç»™AIä¸€äº›ä¾‹å­ï¼Œç±»ä¼¼äºä¸‹é¢è¿™æ ·ï¼Œå…·ä½“Promptä½ è‡ªå·±è°ƒäº†å¤šè¯•ä¸€ä¸‹ã€‚\n\n====\næˆ‘ä»¬çš„é—®é¢˜ä¸€èˆ¬ç”¨è¿™æ ·çš„æ ¼å¼å›ç­”ï¼š\n\né—®é¢˜ï¼šblablabla\nå›ç­”ï¼š\n1. æ–‡æ¡£åœ°å€ blabla\n2. æ“ä½œæ­¥éª¤ blabla\n\n===\nä»¥ä¸‹æ˜¯ä¸Šä¸‹æ–‡\n{context_str}\n\né—®é¢˜ï¼š{question_str}\nå›ç­”ï¼š\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1680973026,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸­å›½é¦™æ¸¯","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":373384,"user_name":"Terry","can_delete":false,"product_type":"c1","uid":1102795,"ip_address":"æµ™æ±Ÿ","ucode":"8C446621DA44CF","user_header":"https://static001.geekbang.org/account/avatar/00/10/d3/cb/08bbf097.jpg","comment_is_top":false,"comment_ctime":1682437891,"is_pvip":false,"replies":[{"id":136505,"content":"llama_indexçš„é‡ç‚¹æ”¾åœ¨äº†Indexä¸Šï¼Œä¹Ÿå°±æ˜¯é€šè¿‡å„ç§æ–¹å¼ä¸ºæ–‡æœ¬å»ºç«‹ç´¢å¼•ï¼Œæœ‰é€šè¿‡LLMçš„ï¼Œä¹Ÿæœ‰å¾ˆå¤šå¹¶éå’ŒLLMç›¸å…³çš„ã€‚\n\nlangchainçš„é‡ç‚¹åœ¨ agent å’Œ chain ä¸Šï¼Œä¹Ÿå°±æ˜¯æµç¨‹ç»„åˆä¸Šã€‚\n\nå¯ä»¥æ ¹æ®ä½ çš„åº”ç”¨ç»„åˆä¸¤ä¸ªï¼Œå¦‚æœä½ è§‰å¾—é—®ç­”æ•ˆæœä¸å¥½ï¼Œå¯ä»¥å¤šç ”ç©¶ä¸€ä¸‹llama-indexã€‚å¦‚æœä½ å¸Œæœ›æœ‰æ›´å¤šå¤–éƒ¨å·¥å…·æˆ–è€…å¤æ‚æµç¨‹å¯ä»¥ç”¨ï¼Œå¯ä»¥å¤šç ”ç©¶ä¸€ä¸‹langchainã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1683091278,"ip_address":"ä¸Šæµ·","comment_id":373384,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100541001,"comment_content":"è€å¸ˆï¼Œè¯·æ•™ä¸€ä¸‹langchainæˆ‘ç†è§£ä¹Ÿæ˜¯ä¸€ä¸ªLLMåº”ç”¨æ¡†æ¶ï¼Œå®ƒçš„åŠŸèƒ½å’Œç‰ˆæœ¬ä¹Ÿæ›´æ–°å¾ˆå¿«ã€‚å®ƒå’Œllama_indexçš„åŒºåˆ†æ˜¯ä»€ä¹ˆï¼Ÿåœ¨LLMåº”ç”¨å¼€å‘ä¸Šï¼Œæˆ‘ä»¬ä¸€èˆ¬æ€ä¹ˆé€‰æ‹©ä¼šæ¯”è¾ƒå¥½ï¼Ÿ","like_count":8,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":616745,"discussion_content":"llama_indexçš„é‡ç‚¹æ”¾åœ¨äº†Indexä¸Šï¼Œä¹Ÿå°±æ˜¯é€šè¿‡å„ç§æ–¹å¼ä¸ºæ–‡æœ¬å»ºç«‹ç´¢å¼•ï¼Œæœ‰é€šè¿‡LLMçš„ï¼Œä¹Ÿæœ‰å¾ˆå¤šå¹¶éå’ŒLLMç›¸å…³çš„ã€‚\n\nlangchainçš„é‡ç‚¹åœ¨ agent å’Œ chain ä¸Šï¼Œä¹Ÿå°±æ˜¯æµç¨‹ç»„åˆä¸Šã€‚\n\nå¯ä»¥æ ¹æ®ä½ çš„åº”ç”¨ç»„åˆä¸¤ä¸ªï¼Œå¦‚æœä½ è§‰å¾—é—®ç­”æ•ˆæœä¸å¥½ï¼Œå¯ä»¥å¤šç ”ç©¶ä¸€ä¸‹llama-indexã€‚å¦‚æœä½ å¸Œæœ›æœ‰æ›´å¤šå¤–éƒ¨å·¥å…·æˆ–è€…å¤æ‚æµç¨‹å¯ä»¥ç”¨ï¼Œå¯ä»¥å¤šç ”ç©¶ä¸€ä¸‹langchainã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1683091278,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":372559,"user_name":"é©¬å¬","can_delete":false,"product_type":"c1","uid":1430132,"ip_address":"ä¸Šæµ·","ucode":"93D83CB5FAE5AD","user_header":"https://static001.geekbang.org/account/avatar/00/15/d2/74/7861f504.jpg","comment_is_top":false,"comment_ctime":1681285538,"is_pvip":false,"replies":[{"id":136107,"content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1681614077,"ip_address":"ä¸Šæµ·","comment_id":372559,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100541001,"comment_content":"åˆ†äº«ä¸€ä¸ªåŠ è½½MySQLæ•°æ®çš„ä¾‹å­ï¼š\nfrom llama_index import GPTSimpleVectorIndex,download_loader\n\nDatabaseReader = download_loader(&#39;DatabaseReader&#39;)\n\nreader = DatabaseReader(\n    scheme = &quot;mysql&quot;, # Database Scheme\n    host = &quot;localhost&quot;, # Database Host\n    port = &quot;3306&quot;, # Database Port\n    user = &quot;martin&quot;, # Database User\n    password = &quot;xxxxxx&quot;, # Database Password\n    dbname = &quot;martin&quot;, # Database Name\n)\n\nquery = f&quot;&quot;&quot;\nselect * from student_info\n&quot;&quot;&quot;\n\ndocuments = reader.load_data(query=query)\nprint(documents)","like_count":8,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":613949,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1681614077,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2810467,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/e2/63/fdba03fc.jpg","nickname":"dp","note":"","ucode":"385B2116C6444E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":613668,"discussion_content":"python3éœ€è¦å®‰è£…PyMySQLï¼Œscheme = &#34;mysql+pymysql&#34;,","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1681449718,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2810467,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/e2/63/fdba03fc.jpg","nickname":"dp","note":"","ucode":"385B2116C6444E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":613649,"discussion_content":"scheme = &#34;mysql&#34;, # Database Scheme  \nLlama_indexå¯ä»¥æ”¯æŒmysqlçš„è¿æ¥å™¨ä¹ˆï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1681439088,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":374126,"user_name":"Oxygen Au æ˜•","can_delete":false,"product_type":"c1","uid":1802569,"ip_address":"ç¾å›½","ucode":"9843160B28A31B","user_header":"https://static001.geekbang.org/account/avatar/00/1b/81/49/2451a946.jpg","comment_is_top":false,"comment_ctime":1683623634,"is_pvip":false,"replies":[{"id":136837,"content":"llama index æœ€è¿‘åˆæ›´æ–°äº†å¤§ç‰ˆæœ¬ï¼Œæ¥å£åˆæ”¹äº†ä¸€éã€‚å¦‚æœè¦ç«‹åˆ»å¯ä»¥è¿è¡Œï¼Œå¯ä»¥å…ˆ pip install --force-reinstall -v &quot;llama-index==0.5.27&quot; é€€å›åˆ° 0.5 ç³»åˆ—çš„ç‰ˆæœ¬\n\næ™šç‚¹æˆ‘çœ‹ä¸€ä¸‹æ›´æ–°ä»£ç åˆ°0.6.x ç‰ˆæœ¬","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1684746639,"ip_address":"ä¸Šæµ·","comment_id":374126,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100541001,"comment_content":"\nresponse = list_index.query(&quot;ä¸‹é¢é²è¿…å…ˆç”Ÿä»¥ç¬¬ä¸€äººç§°â€˜æˆ‘â€™å†™çš„å†…å®¹ï¼Œè¯·ä½ ç”¨ä¸­æ–‡æ€»ç»“ä¸€ä¸‹:&quot;, response_mode=&quot;tree_summarize&quot;)\nprint(response)\n\n\nä¸Šé¢è¿™æ®µä»£ç æŠ¥é”™ï¼ŒAttributeError: &#39;GPTListIndex&#39; object has no attribute &#39;query&#39; ï¼Œ æˆ‘ç”¨çš„æ˜¯llama-index 0.6.1\n\nä¸‹é¢æ˜¯æ­£ç¡®çš„ä»£ç \nquery_engine = list_index.as_query_engine(response_mode=&quot;tree_summarize&quot;)\nresponse = query_engine.query(&quot;ä¸‹é¢é²è¿…å…ˆç”Ÿä»¥ç¬¬ä¸€äººç§°â€˜æˆ‘â€™å†™çš„å†…å®¹ï¼Œè¯·ä½ ç”¨ä¸­æ–‡æ€»ç»“ä¸€ä¸‹:&quot;)\nprint(response)\n\nç»“æœï¼š é²è¿…å…ˆç”Ÿåœ¨æ—¥æœ¬å­¦ä¹ åŒ»å­¦æ—¶é‡åˆ°äº†è—¤é‡ä¸¥ä¹éƒæ•™æˆï¼Œä»–å¾ˆæœ‰å­¦é—®ï¼Œå¯¹å­¦ç”Ÿä¹Ÿå¾ˆå…³å¿ƒï¼Œç”šè‡³å¸®åŠ©é²è¿…ä¿®æ”¹è®²ä¹‰ã€‚ä½†é²è¿…å½“æ—¶ä¸å¤Ÿç”¨åŠŸï¼Œæœ‰æ—¶ä¹Ÿå¾ˆä»»æ€§ã€‚åœ¨å­¦ä¹ ä¸­ï¼Œä»–é‡åˆ°äº†ä¸€äº›å›°éš¾å’Œä¸æ„‰å¿«çš„äº‹æƒ…ï¼Œæœ€ç»ˆå†³å®šç¦»å¼€åŒ»å­¦å»å­¦ä¹ ç”Ÿç‰©å­¦ã€‚ç¦»å¼€å‰ï¼Œè—¤é‡å…ˆç”Ÿé€ç»™ä»–ä¸€å¼ ç…§ç‰‡ï¼Œå¹¶å¸Œæœ›ä»–èƒ½ä¿æŒè”ç³»ã€‚é²è¿…å¾ˆä¹…æ²¡æœ‰å’Œä»»ä½•äººé€šä¿¡ï¼Œä½†æƒ³èµ·äº†è¿™ä½çƒ­å¿ƒçš„è€å¸ˆï¼Œä»–çš„ç…§ç‰‡æŒ‚åœ¨é²è¿…çš„æˆ¿é—´é‡Œï¼Œæ¯å½“ä»–ç–²å€¦æ—¶çœ‹åˆ°ç…§ç‰‡å°±ä¼šæ„Ÿåˆ°å‹‡æ°”å’Œè‰¯å¿ƒå‘ç°ã€‚","like_count":6,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":619011,"discussion_content":"llama index æœ€è¿‘åˆæ›´æ–°äº†å¤§ç‰ˆæœ¬ï¼Œæ¥å£åˆæ”¹äº†ä¸€éã€‚å¦‚æœè¦ç«‹åˆ»å¯ä»¥è¿è¡Œï¼Œå¯ä»¥å…ˆ pip install --force-reinstall -v &#34;llama-index==0.5.27&#34; é€€å›åˆ° 0.5 ç³»åˆ—çš„ç‰ˆæœ¬\n\næ™šç‚¹æˆ‘çœ‹ä¸€ä¸‹æ›´æ–°ä»£ç åˆ°0.6.x ç‰ˆæœ¬","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1684746639,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":374578,"user_name":"é»„æ™ºè£","can_delete":false,"product_type":"c1","uid":1027823,"ip_address":"ç¦å»º","ucode":"3C84C8654CCB11","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ae/ef/cbb8d881.jpg","comment_is_top":false,"comment_ctime":1684202234,"is_pvip":false,"replies":[{"id":136805,"content":"ğŸ‘ï¼Œè¿™ä¸ªä¸€èˆ¬è¢«ç§°ä¹‹ä¸º Self-Askï¼Œçš„ç¡®æ˜¯ä¸€ä¸ªå¥½åŠæ³•ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1684725358,"ip_address":"æ–°åŠ å¡","comment_id":374578,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100541001,"comment_content":"ç°åœ¨æœ‰å¾ˆå¤šåº”ç”¨ï¼Œåœ¨ä½ æŠŠæ–‡æ¡£ä¸Šä¼ ä¹‹åï¼Œè¿˜ä¼šç»™ä½ ä¸€ç³»åˆ—çš„æç¤ºï¼Œå‘Šè¯‰ä½ å¯ä»¥å‘å¯¹åº”çš„ä¹¦æˆ–è€…è®ºæ–‡é—®ä»€ä¹ˆé—®é¢˜ã€‚\n------ å¯ä»¥æ ¹æ®ç´¢å¼•çš„æ–‡æœ¬ï¼Œè®©chatgpt è®¾è®¡å‡ ä¸ªæé—®çš„é—®é¢˜","like_count":2,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":618950,"discussion_content":"ğŸ‘ï¼Œè¿™ä¸ªä¸€èˆ¬è¢«ç§°ä¹‹ä¸º Self-Askï¼Œçš„ç¡®æ˜¯ä¸€ä¸ªå¥½åŠæ³•ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1684725358,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ–°åŠ å¡","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":374037,"user_name":"å‹‡.Max","can_delete":false,"product_type":"c1","uid":1248128,"ip_address":"åŒ—äº¬","ucode":"AE5DBC10805A9B","user_header":"https://static001.geekbang.org/account/avatar/00/13/0b/80/a0533acb.jpg","comment_is_top":false,"comment_ctime":1683527714,"is_pvip":false,"replies":[{"id":136633,"content":"æ”¶åˆ°ï¼Œé©¬ä¸Šæ›´æ–°ï¼Œæ„Ÿè°¢æé†’ğŸŒ¹","user_name":"ç¼–è¾‘å›å¤","user_name_real":"ç¼–è¾‘","uid":2843479,"ctime":1683529343,"ip_address":"åŒ—äº¬","comment_id":374037,"utype":2}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100541001,"comment_content":"ä¸Šé¢from llama_index import GPTSimpleVectorIndexä¼šæŠ¥é”™ï¼Œå› ä¸ºç°åœ¨å·²ç»æ”¹æˆäº†GPTVectorStoreIndexã€‚\nfrom llama_index import GPTVectorStoreIndex &#47;&#47;è€å¸ˆçœ‹åˆ°åå¯ä»¥æ›´æ–°ä¸‹\n","like_count":2,"discussions":[{"author":{"id":2843479,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/63/57/cba4c68b.jpg","nickname":"å°è™å­ğŸ¯","note":"","ucode":"4C9530B3FB407B","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":617360,"discussion_content":"æ”¶åˆ°ï¼Œé©¬ä¸Šæ›´æ–°ï¼Œæ„Ÿè°¢æé†’ğŸŒ¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1683529343,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":8}","child_discussion_number":2,"child_discussions":[{"author":{"id":1153707,"avatar":"https://static001.geekbang.org/account/avatar/00/11/9a/ab/fd201314.jpg","nickname":"å°è€¿","note":"","ucode":"1C8B66C738D33B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2843479,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/63/57/cba4c68b.jpg","nickname":"å°è™å­ğŸ¯","note":"","ucode":"4C9530B3FB407B","race_medal":0,"user_type":8,"is_pvip":false},"discussion":{"id":618822,"discussion_content":"ç¬¬ä¸€æ®µä»£ç è°ƒç”¨çš„åœ°æ–¹æ²¡æ”¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1684584478,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":617360,"ip_address":"æ³°å›½","group_id":0},"score":618822,"extra":""},{"author":{"id":2843479,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/63/57/cba4c68b.jpg","nickname":"å°è™å­ğŸ¯","note":"","ucode":"4C9530B3FB407B","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":1153707,"avatar":"https://static001.geekbang.org/account/avatar/00/11/9a/ab/fd201314.jpg","nickname":"å°è€¿","note":"","ucode":"1C8B66C738D33B","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":618845,"discussion_content":"å¥½å˜ï¼Œå†æ¬¡æ„Ÿè°¢æé†’","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1684641441,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":618822,"ip_address":"æ²³åŒ—","group_id":0},"score":618845,"extra":""}]}]},{"had_liked":false,"id":372079,"user_name":"Viola","can_delete":false,"product_type":"c1","uid":3581980,"ip_address":"æ‘©å°”å¤šç“¦","ucode":"0F43DBBE822AB6","user_header":"https://static001.geekbang.org/account/avatar/00/36/a8/1c/d231cbfb.jpg","comment_is_top":false,"comment_ctime":1680688370,"is_pvip":false,"replies":[{"id":135867,"content":"æ›´æ–°ä¸€ä¸‹ llama-index çš„ç‰ˆæœ¬ï¼Œllama-indexçš„æ¥å£ä» 0.4 åˆ° 0.5 åšäº†æ¯”è¾ƒå¤§çš„æ›´æ–°ã€‚è¿™ä¸€è®²çš„å†…å®¹ï¼Œä¹Ÿæ˜¯æ ¹æ® 0.5 çš„æ›´æ–°é‡æ–°æ”¹è¿‡çš„ã€‚ç”¨æœ€æ–°ç‰ˆå§ã€‚\n\npip install -U llama-index","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1680972772,"ip_address":"ä¸­å›½é¦™æ¸¯","comment_id":372079,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100541001,"comment_content":" æœ‰åŒå­¦é‡åˆ°å—ï¼Ÿ\ntype object &#39;GPTSimpleVectorIndex&#39; has no attribute &#39;from_documents&#39;","like_count":2,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":612862,"discussion_content":"æ›´æ–°ä¸€ä¸‹ llama-index çš„ç‰ˆæœ¬ï¼Œllama-indexçš„æ¥å£ä» 0.4 åˆ° 0.5 åšäº†æ¯”è¾ƒå¤§çš„æ›´æ–°ã€‚è¿™ä¸€è®²çš„å†…å®¹ï¼Œä¹Ÿæ˜¯æ ¹æ® 0.5 çš„æ›´æ–°é‡æ–°æ”¹è¿‡çš„ã€‚ç”¨æœ€æ–°ç‰ˆå§ã€‚\n\npip install -U llama-index","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1680972772,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸­å›½é¦™æ¸¯","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1057681,"avatar":"https://static001.geekbang.org/account/avatar/00/10/23/91/e2943923.jpg","nickname":"è†å‡¯","note":"","ucode":"E1A8CDA0116082","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":617740,"discussion_content":"5æœˆä»½æ¥æ›´æ–°ï¼šllama-index å¦‚æœè¿è¡Œæ•™ç¨‹ä¸­ä»£ç ï¼Œä¹Ÿä»ç„¶æ˜¯é‡åˆ°é—®é¢˜ï¼Œå› ä¸º æœ€å…ˆç‰ˆæœ¬åˆ°äº†0.6x; éœ€è¦äººå·¥æŒ‡å®š 0.5.xï¼Œè¿è¡Œæ•™ç¨‹ä¸­ä»£ç æ‰ç”Ÿæ•ˆã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1683818757,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å±±ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":371957,"user_name":"hawk","can_delete":false,"product_type":"c1","uid":1158840,"ip_address":"ç¦å»º","ucode":"02582709C79474","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTL1ibGVhrcN2dn9g9ib0NRotH876fWRVdgMSiaW4bKtBZJjNUVblh8IYacaahYzAnUhcYZn8V0eXzgnw/132","comment_is_top":false,"comment_ctime":1680547074,"is_pvip":false,"replies":[{"id":135756,"content":"æ˜¯çš„ï¼Œç»„åˆå°±æ˜¯é€šè¿‡ PromptTemplate å®ç°çš„","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1680586613,"ip_address":"ä¸Šæµ·","comment_id":371957,"utype":1}],"discussion_count":3,"race_medal":0,"score":3,"product_id":100541001,"comment_content":"è¿™äº›é¢„é€‰çš„é—®é¢˜ï¼Œåº”è¯¥ä¹Ÿæ˜¯é€šè¿‡ç»„åˆç‰¹å®šçš„æç¤ºè¯­ï¼Œå’Œæ®µè½æ‘˜è¦ï¼Œæ‰”ç»™GPTå¾—åˆ°çš„å§ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":612262,"discussion_content":"æ˜¯çš„ï¼Œç»„åˆå°±æ˜¯é€šè¿‡ PromptTemplate å®ç°çš„","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1680586614,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2187437,"avatar":"https://static001.geekbang.org/account/avatar/00/21/60/ad/03351e6e.jpg","nickname":"xbc","note":"","ucode":"03F1FD7B8CA32F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":612385,"discussion_content":"ä¹Ÿå¯ä»¥èšå‡ ç±»ï¼Œç„¶åè®©gptæŒ¨ä¸ªæ€»ç»“å§?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1680628768,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":612262,"ip_address":"æµ·å—","group_id":0},"score":612385,"extra":""}]},{"author":{"id":1574748,"avatar":"https://static001.geekbang.org/account/avatar/00/18/07/5c/2b75c836.jpg","nickname":"é™ˆé¹","note":"","ucode":"777F23D9178A6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":613505,"discussion_content":"ChatPDFåœ¨ä¸Šä¼ äº†æ–‡ä»¶åï¼Œæœ‰å‡ ä¸ªdemoé—®é¢˜ï¼Œè¿™äº›åº”è¯¥å°±æ˜¯é¢„åˆ¶çš„å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1681361538,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å‰æ—","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":374406,"user_name":"ç‰›å‘³æµ“é¾™é­æµ","can_delete":false,"product_type":"c1","uid":1605322,"ip_address":"å››å·","ucode":"FB58F144635B2A","user_header":"https://static001.geekbang.org/account/avatar/00/18/7e/ca/0689da8f.jpg","comment_is_top":false,"comment_ctime":1684113429,"is_pvip":false,"replies":[{"id":136817,"content":"æ²¡ä»€ä¹ˆå…³ç³»ï¼Œåªæ˜¯å°è£…äº†ä¸€éƒ¨åˆ†å¯¹äºOpenAIçš„è°ƒç”¨ï¼Œä½ ä¹Ÿå¯ä»¥ä¸è°ƒç”¨OpenAIçš„APIï¼Œè°ƒç”¨å…¶ä»–çš„å¤§è¯­è¨€æ¨¡å‹ï¼Œæ¯”å¦‚ Claude æˆ–è€… Cohereã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1684726981,"ip_address":"æ–°åŠ å¡","comment_id":374406,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100541001,"comment_content":"æ‰€ä»¥llama_indexè·ŸchatGPTæ²¡ä»€ä¹ˆå…³ç³»æ˜¯å—ã€‚ã€‚è¿˜æ˜¯è¯´è¿™ä¸ªåŒ…æœ¬èº«ä¹Ÿåœ¨è·ŸopenAIæ‰“äº¤é“ï¼Œçœ‹ä»£ç çœ‹ä¸å‡ºæ¥","like_count":1,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":618964,"discussion_content":"æ²¡ä»€ä¹ˆå…³ç³»ï¼Œåªæ˜¯å°è£…äº†ä¸€éƒ¨åˆ†å¯¹äºOpenAIçš„è°ƒç”¨ï¼Œä½ ä¹Ÿå¯ä»¥ä¸è°ƒç”¨OpenAIçš„APIï¼Œè°ƒç”¨å…¶ä»–çš„å¤§è¯­è¨€æ¨¡å‹ï¼Œæ¯”å¦‚ Claude æˆ–è€… Cohereã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1684726982,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ–°åŠ å¡","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2732594,"avatar":"","nickname":"Norman","note":"","ucode":"6C05C82FB543D8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":633346,"discussion_content":"æƒ³è¯·é—®è€å¸ˆï¼Œllama_indexå¯ä»¥ç”¨æ¥è°ƒç”¨æ–‡å¿ƒä¸€è¨€çš„erniebotæ¨¡å‹å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1702021872,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":618964,"ip_address":"å¹¿ä¸œ","group_id":0},"score":633346,"extra":""}]}]},{"had_liked":false,"id":374256,"user_name":"ä¸œä¸´æ²§æµ·","can_delete":false,"product_type":"c1","uid":1143029,"ip_address":"æµ™æ±Ÿ","ucode":"300AA289093E06","user_header":"https://static001.geekbang.org/account/avatar/00/11/70/f5/afdf4a68.jpg","comment_is_top":false,"comment_ctime":1683792296,"is_pvip":false,"replies":[{"id":136815,"content":"è¿™å‘¨ä¼šæ›´æ–°ä¸€ä¸‹githubé‡Œçš„pip requirementsæ–‡ä»¶ï¼Œé”ä½ç‰ˆæœ¬å·ã€‚\nä½†æ˜¯æƒ³llama-indexè¿™æ ·ä¸è®²æ­¦å¾·æ¯æ¬¡å°ç‰ˆæœ¬æ›´æ–°éƒ½ä¸å‘å‰å…¼å®¹çš„å‡½æ•°åº“çš„ç¡®ä¹Ÿä¸å¸¸è§â€¦â€¦\n\nå†è´´ä¸€æ¬¡å§ï¼š\n\nllama index æœ€è¿‘åˆæ›´æ–°äº†å¤§ç‰ˆæœ¬ï¼Œæ¥å£åˆæ”¹äº†ä¸€éã€‚å¦‚æœè¦ç«‹åˆ»å¯ä»¥è¿è¡Œï¼Œå¯ä»¥å…ˆ pip install --force-reinstall -v &quot;llama-index==0.5.27&quot; é€€å›åˆ° 0.5 ç³»åˆ—çš„ç‰ˆæœ¬\n\næ™šç‚¹æˆ‘çœ‹ä¸€ä¸‹æ›´æ–°ä»£ç åˆ°0.6.x ç‰ˆæœ¬\n\n","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1684726502,"ip_address":"æ–°åŠ å¡","comment_id":374256,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100541001,"comment_content":"å»ºè®®è€å¸ˆå®‰è£…çš„åº“æ–‡ä»¶æ ‡æ˜ä¸€ä¸‹ç‰ˆæœ¬å·ï¼Œé‡åˆ°è¿™æ ·é—®é¢˜å¥½å‡ æ¬¡äº†ï¼Œæ¯æ¬¡éƒ½è¦æµªè´¹å¤§é‡æ—¶é—´ã€‚\nllama_indexç‰ˆæœ¬éƒ½åˆ°v0.6.5ï¼Œæ›´æ–°å¤ªå¿«äº†","like_count":1,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":618961,"discussion_content":"è¿™å‘¨ä¼šæ›´æ–°ä¸€ä¸‹githubé‡Œçš„pip requirementsæ–‡ä»¶ï¼Œé”ä½ç‰ˆæœ¬å·ã€‚\nä½†æ˜¯æƒ³llama-indexè¿™æ ·ä¸è®²æ­¦å¾·æ¯æ¬¡å°ç‰ˆæœ¬æ›´æ–°éƒ½ä¸å‘å‰å…¼å®¹çš„å‡½æ•°åº“çš„ç¡®ä¹Ÿä¸å¸¸è§â€¦â€¦\n\nå†è´´ä¸€æ¬¡å§ï¼š\n\nllama index æœ€è¿‘åˆæ›´æ–°äº†å¤§ç‰ˆæœ¬ï¼Œæ¥å£åˆæ”¹äº†ä¸€éã€‚å¦‚æœè¦ç«‹åˆ»å¯ä»¥è¿è¡Œï¼Œå¯ä»¥å…ˆ pip install --force-reinstall -v &#34;llama-index==0.5.27&#34; é€€å›åˆ° 0.5 ç³»åˆ—çš„ç‰ˆæœ¬\n\næ™šç‚¹æˆ‘çœ‹ä¸€ä¸‹æ›´æ–°ä»£ç åˆ°0.6.x ç‰ˆæœ¬\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1684726502,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ–°åŠ å¡","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":374091,"user_name":"snow","can_delete":false,"product_type":"c1","uid":1177505,"ip_address":"æ—¥æœ¬","ucode":"23CC0DFE866513","user_header":"https://static001.geekbang.org/account/avatar/00/11/f7/a1/49643e20.jpg","comment_is_top":false,"comment_ctime":1683600626,"is_pvip":false,"replies":[{"id":136847,"content":"llama index æœ€è¿‘åˆæ›´æ–°äº†å¤§ç‰ˆæœ¬ï¼Œæ¥å£åˆæ”¹äº†ä¸€éã€‚å¦‚æœè¦ç«‹åˆ»å¯ä»¥è¿è¡Œï¼Œå¯ä»¥å…ˆ pip install --force-reinstall -v &quot;llama-index==0.5.27&quot; é€€å›åˆ° 0.5 ç³»åˆ—çš„ç‰ˆæœ¬\n\næ™šç‚¹æˆ‘çœ‹ä¸€ä¸‹æ›´æ–°ä»£ç åˆ°0.6.x ç‰ˆæœ¬","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1684748846,"ip_address":"ä¸Šæµ·","comment_id":374091,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100541001,"comment_content":"æƒ³è¯·æ•™ä¸‹è€å¸ˆï¼Œä¸ºä»€ä¹ˆæˆ‘åœ¨è°ƒç”¨query çš„æ—¶å€™ï¼Œæç¤ºè¯´BaseQueryEngine.query() got an unexpected keyword argument &#39;response_mode&#39; ï¼Ÿ  å‘ç°å½“å®šä¹‰ list_index = GPTListIndex(nodes=nodes, service_context=service_context)ï¼Œ æ²¡æ³•ç›´æ¥è°ƒç”¨list_index.query() ,è€Œéœ€è¦  list_index.as_query_engine().query() è¿™æ ·å­è°ƒç”¨ã€‚ ","like_count":1,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":619026,"discussion_content":"llama index æœ€è¿‘åˆæ›´æ–°äº†å¤§ç‰ˆæœ¬ï¼Œæ¥å£åˆæ”¹äº†ä¸€éã€‚å¦‚æœè¦ç«‹åˆ»å¯ä»¥è¿è¡Œï¼Œå¯ä»¥å…ˆ pip install --force-reinstall -v &#34;llama-index==0.5.27&#34; é€€å›åˆ° 0.5 ç³»åˆ—çš„ç‰ˆæœ¬\n\næ™šç‚¹æˆ‘çœ‹ä¸€ä¸‹æ›´æ–°ä»£ç åˆ°0.6.x ç‰ˆæœ¬","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1684748846,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1013081,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/75/59/bd80584f.jpg","nickname":"çŸ³å¤´","note":"","ucode":"D72F9EDFABFFBA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":618497,"discussion_content":"llama-indexç‰ˆæœ¬æ›´æ–°äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1684292935,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":374063,"user_name":"CCC","can_delete":false,"product_type":"c1","uid":1003738,"ip_address":"æµ™æ±Ÿ","ucode":"2E254444098267","user_header":"https://static001.geekbang.org/account/avatar/00/0f/50/da/ed4803cb.jpg","comment_is_top":false,"comment_ctime":1683544505,"is_pvip":false,"replies":[{"id":136846,"content":"å–å†³äºä½ æ˜¯å¦ä½¿ç”¨openaiçš„embeddingï¼Œè¿™ä¸€è®²é‡Œæ˜¯ä¼šè°ƒç”¨APIçš„\nåé¢æˆ‘ä»¬ä¼šè®²é€šè¿‡å¼€æºæ¨¡å‹æ¥ç”Ÿæˆä¸€ä¸ªembeddingçš„æ–¹æ³•ï¼Œé‚£ä¸ªå¯ä»¥ä¸è°ƒç”¨OpenAIçš„APIï¼Œåªéœ€è¦æœ¬åœ°åŠ è½½å¼€æºæ¨¡å‹å°±å¯ä»¥äº†","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1684748828,"ip_address":"ä¸Šæµ·","comment_id":374063,"utype":1}],"discussion_count":3,"race_medal":0,"score":3,"product_id":100541001,"comment_content":"è€å¸ˆindexåˆ›å»ºçš„è¿‡ç¨‹ä¸­ä¼šæŠŠæ–‡æœ¬å†…å®¹ä¼ ç»™openaiè¿›è¡Œembeddingå¬å›å—ï¼Œè¿™ä¸ªåœ°æ–¹ä¸å¤ªç†è§£ç´¢å¼•åˆ›å»ºæ˜¯å®Œå…¨æœ¬åœ°çš„è¿˜æ˜¯éœ€è¦openaiçš„å‘é‡æ•°æ®","like_count":1,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":619025,"discussion_content":"å–å†³äºä½ æ˜¯å¦ä½¿ç”¨openaiçš„embeddingï¼Œè¿™ä¸€è®²é‡Œæ˜¯ä¼šè°ƒç”¨APIçš„\nåé¢æˆ‘ä»¬ä¼šè®²é€šè¿‡å¼€æºæ¨¡å‹æ¥ç”Ÿæˆä¸€ä¸ªembeddingçš„æ–¹æ³•ï¼Œé‚£ä¸ªå¯ä»¥ä¸è°ƒç”¨OpenAIçš„APIï¼Œåªéœ€è¦æœ¬åœ°åŠ è½½å¼€æºæ¨¡å‹å°±å¯ä»¥äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1684748828,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2147220,"avatar":"https://static001.geekbang.org/account/avatar/00/20/c3/94/e89ebc50.jpg","nickname":"ç¥æ¯“é€é¥","note":"","ucode":"83351CB18B190E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":621957,"discussion_content":"æœ¬åœ°å¼€æºæ¨¡å‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1687790998,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2147220,"avatar":"https://static001.geekbang.org/account/avatar/00/20/c3/94/e89ebc50.jpg","nickname":"ç¥æ¯“é€é¥","note":"","ucode":"83351CB18B190E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":621956,"discussion_content":"æœ‰æ¨èçš„ä¹ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1687790988,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":373753,"user_name":"æ©˜å­ğŸŠæ±½æ°´","can_delete":false,"product_type":"c1","uid":3580196,"ip_address":"å¹¿ä¸œ","ucode":"0C0765F2DEA6A9","user_header":"https://static001.geekbang.org/account/avatar/00/36/a1/24/98e4985d.jpg","comment_is_top":false,"comment_ctime":1683123718,"is_pvip":false,"replies":[{"id":136821,"content":"llama index æœ€è¿‘åˆæ›´æ–°äº†å¤§ç‰ˆæœ¬ï¼Œæ¥å£åˆæ”¹äº†ä¸€éã€‚å¦‚æœè¦ç«‹åˆ»å¯ä»¥è¿è¡Œï¼Œå¯ä»¥å…ˆ pip install --force-reinstall -v &quot;llama-index==0.5.27&quot; é€€å›åˆ° 0.5 ç³»åˆ—çš„ç‰ˆæœ¬\n\næ™šç‚¹æˆ‘çœ‹ä¸€ä¸‹æ›´æ–°ä»£ç åˆ°0.6.x ç‰ˆæœ¬","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1684741347,"ip_address":"ä¸Šæµ·","comment_id":373753,"utype":1}],"discussion_count":4,"race_medal":0,"score":3,"product_id":100541001,"comment_content":"é‡æ–°è¾“å…¥äº†\n!pip install -U llama-index\nè¿˜æ˜¯æŠ¥é”™ï¼Œè€å¸ˆå¯ä»¥å¸®å¿™çœ‹çœ‹å—ï¼Ÿ\n\nImportError: cannot import name &#39;GPTSimpleVectorIndex&#39; from &#39;llama_index&#39; (&#47;usr&#47;local&#47;lib&#47;python3.10&#47;dist-packages&#47;llama_index&#47;__init__.py)","like_count":1,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":618988,"discussion_content":"llama index æœ€è¿‘åˆæ›´æ–°äº†å¤§ç‰ˆæœ¬ï¼Œæ¥å£åˆæ”¹äº†ä¸€éã€‚å¦‚æœè¦ç«‹åˆ»å¯ä»¥è¿è¡Œï¼Œå¯ä»¥å…ˆ pip install --force-reinstall -v &#34;llama-index==0.5.27&#34; é€€å›åˆ° 0.5 ç³»åˆ—çš„ç‰ˆæœ¬\n\næ™šç‚¹æˆ‘çœ‹ä¸€ä¸‹æ›´æ–°ä»£ç åˆ°0.6.x ç‰ˆæœ¬","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1684741348,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1074927,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJcZh2daicchEpEiaQZcSesibP6DcklcSE0aejLqA97iaqJjQF3ZbO0NmIUwAIIXwqv4iaz5EYICTPfGJg/132","nickname":"rock","note":"","ucode":"D104A18BC07906","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":617851,"discussion_content":"pip install llama-index==0.5.4\n","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1683908958,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1802569,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/81/49/2451a946.jpg","nickname":"Oxygen Au æ˜•","note":"","ucode":"9843160B28A31B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":617339,"discussion_content":"è¦å‚è€ƒæœ€æ–°çš„llama-index\nï¼Œ https://pypi.org/project/llama-index/ï¼Œ æ”¹æˆä¸‹é¢çš„ä»£ç \n\nimport openai, os\nfrom llama_index import GPTVectorStoreIndex, SimpleDirectoryReader\n\nopenai.api_key = os.environ.get(&#34;OPENAI_API_KEY&#34;)\n\ndocuments = SimpleDirectoryReader(&#39;./data/mr_fujino&#39;).load_data()\n# help(GPTVectorStoreIndex)\nindex = GPTVectorStoreIndex.from_documents(documents)\n\n# index.save_to_disk(&#39;index_mr_fujino.json&#39;)\nindex.storage_context.persist(&#39;index_mr_fujino.json&#39;)","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1683516949,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ç¾å›½","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1006210,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5a/82/4d55f0b7.jpg","nickname":"ææ–‡é¾™","note":"","ucode":"F809A671D72D2E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":617038,"discussion_content":"æ›¿æ¢æˆ GPTVectorStoreIndex","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1683277607,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":373450,"user_name":"joy  à½¼","can_delete":false,"product_type":"c1","uid":1314753,"ip_address":"ä¸Šæµ·","ucode":"83236E71DC3BD0","user_header":"https://static001.geekbang.org/account/avatar/00/14/0f/c1/92c540fe.jpg","comment_is_top":false,"comment_ctime":1682515186,"is_pvip":false,"replies":[{"id":136473,"content":"ç›®å‰å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œæˆ‘éƒ½ä¸å¤ªæ¨èfine-tuneï¼Œä¸»è¦è¿˜æ˜¯ä»·æ ¼å¤ªè´µäº†ã€‚\n\nå¦‚æœä½ æœ‰\n1. å¤§é‡å‚ç›´é¢†åŸŸçš„æ•°æ®\n2. æ•°æ®ç»™åˆ°OpenAIæ²¡æœ‰åˆè§„é—®é¢˜\n3. å½“å‰é¢†åŸŸçš„å®¢æˆ·ä»·å€¼å¾ˆé«˜ï¼Œå¯ä»¥æ‰¿å—æ˜‚è´µçš„è´¹ç”¨\n\nå†è€ƒè™‘æ˜¯å¦å¯ä»¥ä½¿ç”¨ fine-tune","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1683085570,"ip_address":"ä¸Šæµ·","comment_id":373450,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100541001,"comment_content":"é’ˆå¯¹å¼€æºæ¨¡å‹ï¼Œä»€ä¹ˆåœºæ™¯å»ºè®®ä½¿ç”¨ç¬¬äºŒå¤§è„‘ï¼Ÿä»€ä¹ˆåœºæ™¯å»ºè®®ä½¿ç”¨finetune?","like_count":1,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":616706,"discussion_content":"ç›®å‰å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œæˆ‘éƒ½ä¸å¤ªæ¨èfine-tuneï¼Œä¸»è¦è¿˜æ˜¯ä»·æ ¼å¤ªè´µäº†ã€‚\n\nå¦‚æœä½ æœ‰\n1. å¤§é‡å‚ç›´é¢†åŸŸçš„æ•°æ®\n2. æ•°æ®ç»™åˆ°OpenAIæ²¡æœ‰åˆè§„é—®é¢˜\n3. å½“å‰é¢†åŸŸçš„å®¢æˆ·ä»·å€¼å¾ˆé«˜ï¼Œå¯ä»¥æ‰¿å—æ˜‚è´µçš„è´¹ç”¨\n\nå†è€ƒè™‘æ˜¯å¦å¯ä»¥ä½¿ç”¨ fine-tune","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1683085570,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1064133,"avatar":"https://static001.geekbang.org/account/avatar/00/10/3c/c5/92017a7b.jpg","nickname":"ç¡•æœé˜³å…‰","note":"","ucode":"C59841EB675535","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":620857,"discussion_content":"æ‚¨å¥½ä»€ä¹ˆæ˜¯å‚ç›´é¢†åŸŸæ•°æ®ï¼Ÿ èƒ½å¦ä¸¾ä¸ªä¾‹å­å‘€ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1686622490,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ç¾å›½","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":372636,"user_name":"å¯ç†™","can_delete":false,"product_type":"c1","uid":1382231,"ip_address":"å¹¿ä¸œ","ucode":"37B33ADD3A9681","user_header":"https://static001.geekbang.org/account/avatar/00/15/17/57/ac61fff9.jpg","comment_is_top":false,"comment_ctime":1681371714,"is_pvip":false,"replies":[{"id":136130,"content":"æ²¡å¤ªç†è§£ä½ æŒ‡çš„æ˜¯å“ªä¸€æ­¥ï¼Ÿ ListIndex åœ¨å»ºç«‹ç´¢å¼•çš„æ—¶å€™ä¸æ¶ˆè€—Tokenï¼Œåœ¨Summarizeçš„æ—¶å€™æ¶ˆè€—Tokenã€‚æ¶ˆè€—çš„é™¤äº†æ–‡ç« æœ¬èº«çš„å†…å®¹ï¼Œè¿˜åŒ…æ‹¬æˆ‘ä»¬å‘çš„â€œè¯·å°ç»“ä¸€ä¸‹â€ è¿™æ ·çš„æç¤ºè¯­ï¼Œä¼šæ¯”å…‰Embeddingæ–‡ç« å†…å®¹å¤šå‘€ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1681616288,"ip_address":"ä¸Šæµ·","comment_id":372636,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100541001,"comment_content":"è€å¸ˆï¼Œä¸ºä»€ä¹ˆ ç”¨ GPTListIndex æ¶ˆè€—çš„ token æ¯” ç”¨  GPTSimpleVectorIndex çš„è¦å¤šï¼Œ GPTSimpleVectorIndex ä¸æ˜¯è¿˜æœ‰ç”¨åˆ°  Embedding å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":613982,"discussion_content":"æ²¡å¤ªç†è§£ä½ æŒ‡çš„æ˜¯å“ªä¸€æ­¥ï¼Ÿ ListIndex åœ¨å»ºç«‹ç´¢å¼•çš„æ—¶å€™ä¸æ¶ˆè€—Tokenï¼Œåœ¨Summarizeçš„æ—¶å€™æ¶ˆè€—Tokenã€‚æ¶ˆè€—çš„é™¤äº†æ–‡ç« æœ¬èº«çš„å†…å®¹ï¼Œè¿˜åŒ…æ‹¬æˆ‘ä»¬å‘çš„â€œè¯·å°ç»“ä¸€ä¸‹â€ è¿™æ ·çš„æç¤ºè¯­ï¼Œä¼šæ¯”å…‰Embeddingæ–‡ç« å†…å®¹å¤šå‘€ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1681616288,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":372609,"user_name":"Dev.lu","can_delete":false,"product_type":"c1","uid":1266108,"ip_address":"æ–°åŠ å¡","ucode":"A1F727C92A1E5F","user_header":"https://static001.geekbang.org/account/avatar/00/13/51/bc/c7514a30.jpg","comment_is_top":false,"comment_ctime":1681349731,"is_pvip":false,"replies":[{"id":136121,"content":"1. ä¸å½±å“ç½‘ç»œ\n2. ä¸éœ€è¦ï¼Œä½†æ˜¯éœ€è¦ç»´æŠ¤å¥½ä¸€ä¸ª embedding vectorçš„ç´¢å¼•ã€‚å¯ä»¥ç”¨å‘é‡æ•°æ®åº“ï¼Œä¹Ÿå¯ä»¥è‡ªå·±åœ¨å†…å­˜é‡Œé¢ç®¡ç†\n3. ä¸€èˆ¬ä¸è‡³äºï¼Œä½ å¯ä»¥ç®—ä¸€ä¸‹ï¼Œä¸€æ¡æ•°æ®ä¸€èˆ¬ä¹Ÿå°±3-4Kï¼Œ1ç™¾ä¸‡æ¡æ•°æ®æ‰3Gæ•°æ®ã€‚ä½†æ˜¯éœ€è¦æ¯”è¾ƒå¤šæ—¶é—´å»ºç«‹ç´¢å¼•ï¼Œè¿™ä¸ªå’ŒOpenAIçš„requestå¤§å°æ— å…³ï¼Œä¸€èˆ¬å³ä½¿ç”¨batchä¸€ä¸ªbatchä¹Ÿå°±æ‹¿1åƒæ¡æ•°æ®çš„Embeddingå§","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1681615591,"ip_address":"ä¸Šæµ·","comment_id":372609,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100541001,"comment_content":"è°¢è°¢è€å¸ˆåˆ†äº«ï¼Œæƒ³é—®ä¸€ä¸‹ï¼Œ\n1. è¯­æ–™çš„å¤§å°ä¼šä¸ä¼šå½±å“å›ç­”é—®é¢˜çš„å»¶æ—¶ï¼Ÿ\n2. å¦‚æœéœ€è¦å¯¹è¯­æ–™è¿›è¡Œæ·»åŠ æˆ–è€…å‡å°‘ï¼Œæ¯æ¬¡éƒ½éœ€è¦é‡è·‘ä»£ç ï¼Ÿ\n3. å¦‚æœç¦»çº¿è¯­æ–™æ•°æ®å¾ˆå¤§ï¼Œindexè¿‡åçš„è¯­æ–™æ•°æ®æœ‰æ²¡æœ‰å¯èƒ½å¯¼è‡´å†…å­˜ä¸å¤Ÿï¼Œæˆ–è€…OpenAIçš„APIä¼šé™åˆ¶requestçš„å¤§å°å—ï¼Ÿè¿˜æ˜¯æ”¶è´¹ä¸åŒ","like_count":1,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":613970,"discussion_content":"1. ä¸å½±å“ç½‘ç»œ\n2. ä¸éœ€è¦ï¼Œä½†æ˜¯éœ€è¦ç»´æŠ¤å¥½ä¸€ä¸ª embedding vectorçš„ç´¢å¼•ã€‚å¯ä»¥ç”¨å‘é‡æ•°æ®åº“ï¼Œä¹Ÿå¯ä»¥è‡ªå·±åœ¨å†…å­˜é‡Œé¢ç®¡ç†\n3. ä¸€èˆ¬ä¸è‡³äºï¼Œä½ å¯ä»¥ç®—ä¸€ä¸‹ï¼Œä¸€æ¡æ•°æ®ä¸€èˆ¬ä¹Ÿå°±3-4Kï¼Œ1ç™¾ä¸‡æ¡æ•°æ®æ‰3Gæ•°æ®ã€‚ä½†æ˜¯éœ€è¦æ¯”è¾ƒå¤šæ—¶é—´å»ºç«‹ç´¢å¼•ï¼Œè¿™ä¸ªå’ŒOpenAIçš„requestå¤§å°æ— å…³ï¼Œä¸€èˆ¬å³ä½¿ç”¨batchä¸€ä¸ªbatchä¹Ÿå°±æ‹¿1åƒæ¡æ•°æ®çš„Embeddingå§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1681615591,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":372381,"user_name":"å­Ÿå¥","can_delete":false,"product_type":"c1","uid":1373593,"ip_address":"å¹¿ä¸œ","ucode":"E20ECD1823E877","user_header":"https://static001.geekbang.org/account/avatar/00/14/f5/99/5bf198e3.jpg","comment_is_top":false,"comment_ctime":1681081969,"is_pvip":false,"replies":[{"id":135934,"content":"ä»£ç ä¸€æ ·å¯ä»¥ä½¿ç”¨embeddingï¼Œä¸è¿‡åœ¨æ‹†åˆ†chunkçš„æ—¶å€™éœ€è¦ç¡®ä¿æ¯”å¦‚ä¸€ä¸ªå‡½æ•°æˆ–è€…ä¸€ä¸ªç±»åœ¨ä¸€ä¸ªchunké‡Œ","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1681128752,"ip_address":"ç¾å›½","comment_id":372381,"utype":1}],"discussion_count":2,"race_medal":0,"score":4,"product_id":100541001,"comment_content":"å¦‚æœæ˜¯ä»£ç ä»“åº“ï¼Œè¿˜é€‚åˆç”¨embeddingè¿™ä¸ªæ–¹æ¡ˆå—ï¼Ÿæˆ‘çœ‹ä¸­ç§‘é™¢å¼€æºçš„é‚£ä¸ªæ–¹æ¡ˆå°±å¯ä»¥æ€»ç»“æºç ï¼Œå‘æºç æé—®ä»€ä¹ˆçš„ï¼Œä¸çŸ¥é“æ˜¯æ€ä¹ˆåšçš„","like_count":1,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":613103,"discussion_content":"ä»£ç ä¸€æ ·å¯ä»¥ä½¿ç”¨embeddingï¼Œä¸è¿‡åœ¨æ‹†åˆ†chunkçš„æ—¶å€™éœ€è¦ç¡®ä¿æ¯”å¦‚ä¸€ä¸ªå‡½æ•°æˆ–è€…ä¸€ä¸ªç±»åœ¨ä¸€ä¸ªchunké‡Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1681128752,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ç¾å›½","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1129938,"avatar":"https://static001.geekbang.org/account/avatar/00/11/3d/d2/e0189af4.jpg","nickname":"songhaifeng","note":"","ucode":"ACB6E3F8238745","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":621467,"discussion_content":"è¯·æ•™ä¸‹ï¼Œæœ‰ä»£ç ç”Ÿæˆæ¯”è¾ƒå¥½çš„æ¨¡å‹æ–¹æ¡ˆå—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1687247487,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æ±Ÿè‹","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":372024,"user_name":"xbc","can_delete":false,"product_type":"c1","uid":2187437,"ip_address":"æµ·å—","ucode":"03F1FD7B8CA32F","user_header":"https://static001.geekbang.org/account/avatar/00/21/60/ad/03351e6e.jpg","comment_is_top":false,"comment_ctime":1680602444,"is_pvip":false,"replies":[{"id":135888,"content":"modelscope.cn åŸºæœ¬ä¸Šå°±æ˜¯å­¦ä¹  huggingface.co å‘€","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1680974409,"ip_address":"æ—¥æœ¬","comment_id":372024,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100541001,"comment_content":"è€å¸ˆï¼Œå¸¦æˆ‘ä»¬ç©ç© modelscope.cn","like_count":1,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":612884,"discussion_content":"modelscope.cn åŸºæœ¬ä¸Šå°±æ˜¯å­¦ä¹  huggingface.co å‘€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1680974410,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ—¥æœ¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":372001,"user_name":"Warren","can_delete":false,"product_type":"c1","uid":1186273,"ip_address":"å¹¿ä¸œ","ucode":"7518ED2E07AAF7","user_header":"https://static001.geekbang.org/account/avatar/00/12/19/e1/a7fbc963.jpg","comment_is_top":false,"comment_ctime":1680591843,"is_pvip":true,"replies":[{"id":135869,"content":"æ˜¯çš„ï¼Œå¦‚æœä½ ä¸åšç‰¹æ®Šè®¾ç½®çš„è¯ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1680973048,"ip_address":"ä¸­å›½é¦™æ¸¯","comment_id":372001,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100541001,"comment_content":"è¯·é—®llama_indexä¸­çš„GPTSimpleVectorIndexå°±æ˜¯è°ƒç”¨openaiçš„apiåšçš„embeddingå—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":612864,"discussion_content":"æ˜¯çš„ï¼Œå¦‚æœä½ ä¸åšç‰¹æ®Šè®¾ç½®çš„è¯ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1680973048,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸­å›½é¦™æ¸¯","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":374947,"user_name":"å°è€¿","can_delete":false,"product_type":"c1","uid":1153707,"ip_address":"åŒ—äº¬","ucode":"1C8B66C738D33B","user_header":"https://static001.geekbang.org/account/avatar/00/11/9a/ab/fd201314.jpg","comment_is_top":false,"comment_ctime":1684716778,"is_pvip":false,"replies":[{"id":136801,"content":"ä½ åº”è¯¥ç”¨çš„æ˜¯å…è´¹APIçš„é¢åº¦ï¼Œç°åœ¨é™é€Ÿæ˜¯ä¸€åˆ†é’Ÿè°ƒç”¨3æ¬¡APIã€‚\nçœ‹çœ‹æ˜¯å¦å‘¨å›´æœ‰æœ‹å‹æœ‰ä»˜è´¹APIçš„è´¦æˆ·æ‹¿æ¥ç”¨ä¸€ä¸‹å§ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1684723796,"ip_address":"æ–°åŠ å¡","comment_id":374947,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100541001,"comment_content":"è¯·é—®è€å¸ˆï¼Œæˆ‘æ¢äº†ä¸€ç¯‡æ–‡ç« ç”¨ llama_index åšæ€»ç»“ï¼Œä¸€ç›´æŠ¥é™é€Ÿé—®é¢˜ï¼Œå¥½åƒæ˜¯llamaå†…éƒ¨è°ƒç”¨çš„æŠ¥é”™ï¼Œåº”è¯¥æ€ä¹ˆæ”¹è¿›ä»£ç å‘¢ï¼Ÿ\nRetrying langchain.chat_models.openai.ChatOpenAI.completion_with_retry.&lt;locals&gt;._completion_with_retry in 8.0 seconds as it raised RateLimitError: Rate limit reached for default-gpt-3.5-turbo in organization org-oEUgEoq9uZ4oju2xVxmZ7cUO on requests per min. Limit: 3 &#47; min. Please try again in 20s. Contact us through our help center at help.openai.com if you continue to have issues. Please add a payment method to your account to increase your rate limit. Visit https:&#47;&#47;platform.openai.com&#47;account&#47;billing to add a payment method..","like_count":0,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":618941,"discussion_content":"ä½ åº”è¯¥ç”¨çš„æ˜¯å…è´¹APIçš„é¢åº¦ï¼Œç°åœ¨é™é€Ÿæ˜¯ä¸€åˆ†é’Ÿè°ƒç”¨3æ¬¡APIã€‚\nçœ‹çœ‹æ˜¯å¦å‘¨å›´æœ‰æœ‹å‹æœ‰ä»˜è´¹APIçš„è´¦æˆ·æ‹¿æ¥ç”¨ä¸€ä¸‹å§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1684723797,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ–°åŠ å¡","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":373582,"user_name":"æ±Ÿæ¹–ä¸­äºº","can_delete":false,"product_type":"c1","uid":3022855,"ip_address":"æµ™æ±Ÿ","ucode":"5D04FA57BD5C83","user_header":"https://static001.geekbang.org/account/avatar/00/2e/20/07/80337e76.jpg","comment_is_top":false,"comment_ctime":1682691414,"is_pvip":false,"replies":[{"id":136449,"content":"å¯ä»¥çš„ï¼Œç»§ç»­å¾€åçœ‹ï¼Œç¬¬14-17è®²é‡Œé¢çš„Langchainæ‹¿æ¥åšæœºå™¨äººå®¢æœå¾ˆæ–¹ä¾¿ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1683082680,"ip_address":"ä¸Šæµ·","comment_id":373582,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100541001,"comment_content":"è€å¸ˆï¼Œè¯·æ•™ä¸€ä¸‹ï¼Œè¿™ä¸ªå¯ä»¥ç”¨æ¥åšæœºå™¨äººå®¢æœå—ï¼Ÿçœ‹èµ·æ¥å¥½åƒåªè¦æŠŠè‡ªå®¶çš„æ•°æ®å–‚ç»™å®ƒå°±å¯ä»¥äº†ï¼Œå¦‚æœç”¨æ¥åšå®¢æœï¼Œæœ‰ä»€ä¹ˆéœ€è¦æ³¨æ„çš„å‘¢","like_count":0,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":616671,"discussion_content":"å¯ä»¥çš„ï¼Œç»§ç»­å¾€åçœ‹ï¼Œç¬¬14-17è®²é‡Œé¢çš„Langchainæ‹¿æ¥åšæœºå™¨äººå®¢æœå¾ˆæ–¹ä¾¿ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1683082680,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":373423,"user_name":"éƒ‘é›¨ç‘›","can_delete":false,"product_type":"c1","uid":1142016,"ip_address":"ä¸Šæµ·","ucode":"3F176203F6D1E7","user_header":"https://static001.geekbang.org/account/avatar/00/11/6d/00/cb00b423.jpg","comment_is_top":false,"comment_ctime":1682499399,"is_pvip":false,"replies":[{"id":136465,"content":"â€œValueError: A single term is larger than the allowed chunk size.â€\n\nä»£è¡¨å¯¹æ–‡æœ¬åˆ†å—çš„æ—¶å€™ï¼Œå•ä¸ªå—å¤ªå¤§äº†ã€‚æˆ‘çŒœä½ ç”¨çš„æ˜¯ä¸­æ–‡æ–‡æœ¬ï¼Ÿé‚£æ ·æœ€å¥½æ¢ä¸€ä¸‹ Splitterï¼Œç”¨åé¢ä»‹ç»è¿‡çš„SpacySplitteråŠ è½½ä¸€ä¸ªä¸­æ–‡çš„æ¨¡å‹æ¥è¿›è¡Œåˆ†å¥ã€‚\n\nä»¥åŠè®¾ç½®ä¸€ä¸‹chunk_size å¤§ä¸€ç‚¹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1683083875,"ip_address":"ä¸Šæµ·","comment_id":373423,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100541001,"comment_content":"è€å¸ˆï¼Œæˆ‘è¯»å–çš„è‡ªå·±çš„ä¸€ä¸ªæ–‡ä»¶ï¼Œç„¶åè¿è¡Œçš„æ—¶å€™æŠ¥é”™ï¼Œè¯·é—®è¿™ä¸ªé”™è¯¯æ˜¯ä»€ä¹ˆå¼•èµ·çš„ï¼Ÿ\næ‰§è¡Œè¯­å¥ï¼š\n------------\nresponse = list_index.query(&quot;ä¸‹é¢æ˜¯ä¸€ä¸ªé¡¹ç›®çš„æ–‡ä»¶ï¼Œè¯·ä½ ç”¨ä¸­æ–‡æ€»ç»“ä¸€ä¸‹:&quot;, response_mode=&quot;tree_summarize&quot;)\nprint(response)\n--------\nFile ~&#47;miniforge3&#47;envs&#47;geektime&#47;lib&#47;python3.10&#47;site-packages&#47;llama_index&#47;langchain_helpers&#47;text_splitter.py:157, in TokenTextSplitter.split_text_with_overlaps(self, text, extra_info_str)\n    155 num_cur_tokens = max(len(self.tokenizer(cur_token)), 1)\n    156 if num_cur_tokens &gt; effective_chunk_size:\n--&gt; 157     raise ValueError(\n    158         &quot;A single term is larger than the allowed chunk size.\\n&quot;\n    159         f&quot;Term size: {num_cur_tokens}\\n&quot;\n    160         f&quot;Chunk size: {self._chunk_size}&quot;\n    161         f&quot;Effective chunk size: {effective_chunk_size}&quot;\n    162     )\n    163 # If adding token to current_doc would exceed the chunk size:\n    164 # 1. First verify with tokenizer that current_doc\n    165 # 1. Update the docs list\n    166 if cur_total + num_cur_tokens &gt; effective_chunk_size:\n    167     # NOTE: since we use a proxy for counting tokens, we want to\n    168     # run tokenizer across all of current_doc first. If\n    169     # the chunk is too big, then we will reduce text in pieces\n\nValueError: A single term is larger than the allowed chunk size.\nTerm size: 453\nChunk size: 356Effective chunk size: 356","like_count":0,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":616691,"discussion_content":"â€œValueError: A single term is larger than the allowed chunk size.â€\n\nä»£è¡¨å¯¹æ–‡æœ¬åˆ†å—çš„æ—¶å€™ï¼Œå•ä¸ªå—å¤ªå¤§äº†ã€‚æˆ‘çŒœä½ ç”¨çš„æ˜¯ä¸­æ–‡æ–‡æœ¬ï¼Ÿé‚£æ ·æœ€å¥½æ¢ä¸€ä¸‹ Splitterï¼Œç”¨åé¢ä»‹ç»è¿‡çš„SpacySplitteråŠ è½½ä¸€ä¸ªä¸­æ–‡çš„æ¨¡å‹æ¥è¿›è¡Œåˆ†å¥ã€‚\n\nä»¥åŠè®¾ç½®ä¸€ä¸‹chunk_size å¤§ä¸€ç‚¹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1683083876,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":373277,"user_name":"Geek_a96962","can_delete":false,"product_type":"c1","uid":3565064,"ip_address":"ä¸Šæµ·","ucode":"D47839AFCBEACC","user_header":"","comment_is_top":false,"comment_ctime":1682334205,"is_pvip":false,"replies":[{"id":136380,"content":"å¾€åçœ‹å“¦ï¼Œåé¢çš„è¯¾ç¨‹ä¸­è€å¸ˆä¼šä»‹ç»å¾ˆå¤šå¼€æºæ–¹æ¡ˆï½","user_name":"ç¼–è¾‘å›å¤","user_name_real":"ç¼–è¾‘","uid":2843479,"ctime":1682495983,"ip_address":"åŒ—äº¬","comment_id":373277,"utype":2}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100541001,"comment_content":"è€å¸ˆï¼Œæ—¢ç„¶æ˜¯aiå¤§æ¨¡å‹ä¹‹ç¾ï¼Œèƒ½ä¸èƒ½ä»‹ç»ä¸ç”¨chatgptçš„ï¼Œæ¯”å¦‚ç”¨ä¸€äº›å¼€æºçš„å¤§æ¨¡å‹ æ¥å®Œæˆç›¸åŒçš„ä¸šåŠ¡","like_count":0,"discussions":[{"author":{"id":2843479,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/63/57/cba4c68b.jpg","nickname":"å°è™å­ğŸ¯","note":"","ucode":"4C9530B3FB407B","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":615908,"discussion_content":"å¾€åçœ‹å“¦ï¼Œåé¢çš„è¯¾ç¨‹ä¸­è€å¸ˆä¼šä»‹ç»å¾ˆå¤šå¼€æºæ–¹æ¡ˆï½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1682495983,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":8}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":373072,"user_name":"å°é»‘","can_delete":false,"product_type":"c1","uid":1053799,"ip_address":"åŒ—äº¬","ucode":"1035F47D74CA99","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJEjHEWycVre5ZRtE6M8KaWyu1GKA0KOQsrrlm0ZdZf9EIljQ8P19uZdKS2uINwnzCibnv2iaRfmIPw/132","comment_is_top":false,"comment_ctime":1681985773,"is_pvip":false,"replies":[{"id":136524,"content":"å› ä¸ºå®é™…æé—®è¿˜åŒ…æ‹¬é€šè¿‡embeddingæ‹¿åˆ°çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œæ‰€ä»¥æé—®çš„tokenä¼šæ¯”è¾ƒå¤š\n\nè¿™ä¸ªå¯ä»¥é€šè¿‡è®¾ç½® chunk_size æ¥ç¼©çŸ­æ–‡æœ¬åˆ†æ®µçš„å°ºå¯¸","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1683093959,"ip_address":"ä¸Šæµ·","comment_id":373072,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100541001,"comment_content":"INFO:llama_index.token_counter.token_counter:&gt; [query] Total LLM token usage: 4043 tokens\nINFO:llama_index.token_counter.token_counter:&gt; [query] Total embedding token usage: 58 tokens\n\nINFO:llama_index.token_counter.token_counter:&gt; [query] Total LLM token usage: 4160 tokens\nINFO:llama_index.token_counter.token_counter:&gt; [query] Total embedding token usage: 45 tokens\n\nä¸ºä»€ä¹ˆæˆ‘æ€»æ˜¯æé—®æ¶ˆè€—tokenå¤šï¼Œå›å¤å¯ä»¥ç”¨çš„tokenå°±ä¸å‰©ä»€ä¹ˆäº†ï¼Ÿè¿™ä¸ªåœ¨å“ªé‡Œå¯ä»¥è®¾ç½®ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":616765,"discussion_content":"å› ä¸ºå®é™…æé—®è¿˜åŒ…æ‹¬é€šè¿‡embeddingæ‹¿åˆ°çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œæ‰€ä»¥æé—®çš„tokenä¼šæ¯”è¾ƒå¤š\n\nè¿™ä¸ªå¯ä»¥é€šè¿‡è®¾ç½® chunk_size æ¥ç¼©çŸ­æ–‡æœ¬åˆ†æ®µçš„å°ºå¯¸","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1683093960,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":372977,"user_name":"æ•°æ®åˆ†æç«™ç«™","can_delete":false,"product_type":"c1","uid":3579163,"ip_address":"å¹¿ä¸œ","ucode":"76DA7D38EB6DE2","user_header":"https://static001.geekbang.org/account/avatar/00/36/9d/1b/8f0f9f13.jpg","comment_is_top":false,"comment_ctime":1681888162,"is_pvip":false,"replies":[{"id":136471,"content":"å¯èƒ½æ˜¯ç¯å¢ƒå˜é‡é‡Œæ²¡æœ‰æŒ‡å®š OPENAI_API_KEYï¼Ÿ\nä¹‹å‰éƒ½æ˜¯æ‰‹å·¥åœ¨ä»£ç é‡Œè®¾ç½®äº† openai.api_keyï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1683085138,"ip_address":"ä¸Šæµ·","comment_id":372977,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100541001,"comment_content":"ä¸ºä»€ä¹ˆæ‰§è¡Œindex=GPTSimpleVectorIndex.from_documents(documents)\næŠ¥é”™ï¼šAuthenticationError: Incorrect API key provided: &#39;&#39;. You can find your API key at https:&#47;&#47;platform.openai.com&#47;account&#47;api-keys.\næ‰§è¡Œä¹‹å‰è¯¾ç¨‹çš„éƒ½æ˜¯å¯ä»¥çš„","like_count":0,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":616701,"discussion_content":"å¯èƒ½æ˜¯ç¯å¢ƒå˜é‡é‡Œæ²¡æœ‰æŒ‡å®š OPENAI_API_KEYï¼Ÿ\nä¹‹å‰éƒ½æ˜¯æ‰‹å·¥åœ¨ä»£ç é‡Œè®¾ç½®äº† openai.api_keyï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1683085138,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":372817,"user_name":"è¦ƒç‘æ˜Ÿ","can_delete":false,"product_type":"c1","uid":1864259,"ip_address":"ä¸Šæµ·","ucode":"1181EFC6E3AC60","user_header":"https://static001.geekbang.org/account/avatar/00/1c/72/43/a0898bb7.jpg","comment_is_top":false,"comment_ctime":1681682406,"is_pvip":false,"replies":[{"id":136254,"content":"è¿™ä¸ªæ˜¯æ–‡æœ¬è§£æï¼Œä»¥åŠå¦‚ä½•åœ¨å…·ä½“å†…å®¹å’ŒPDFæ–‡ä»¶æ ¼å¼ä¹‹é—´å»ºç«‹è”ç³»çš„èƒ½åŠ›ã€‚å½“ç„¶æ˜¯å¯ä»¥åšåˆ°çš„ï¼Œä½†æ˜¯éœ€è¦è‡ªå·±å¼€å‘PDFæ–‡ä»¶æ ¼å¼ç»“æ„å’Œå†…å®¹ä¹‹é—´çš„å…³è”ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1681794171,"ip_address":"ä¸Šæµ·","comment_id":372817,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100541001,"comment_content":"ä¸Šä¼ çš„æ˜¯pdfçš„è¯ï¼Œæœ‰åŠæ³•å®šä½åˆ°å…·ä½“çš„å¼•ç”¨ä½ç½®å—ã€‚è­¬å¦‚æŸ¥å‡ºæ¥æ–‡å­—ï¼Œç»™çš„gptä½œå‚è€ƒï¼ŒåŒæ—¶éœ€è¦å®šä½åˆ°æ–‡å­—æ˜¯æ¥è‡ªåŸæ–‡ç¬¬ä¸€é¡µç¬¬äºŒæ®µè¿™æ ·ã€‚","like_count":0,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":614456,"discussion_content":"è¿™ä¸ªæ˜¯æ–‡æœ¬è§£æï¼Œä»¥åŠå¦‚ä½•åœ¨å…·ä½“å†…å®¹å’ŒPDFæ–‡ä»¶æ ¼å¼ä¹‹é—´å»ºç«‹è”ç³»çš„èƒ½åŠ›ã€‚å½“ç„¶æ˜¯å¯ä»¥åšåˆ°çš„ï¼Œä½†æ˜¯éœ€è¦è‡ªå·±å¼€å‘PDFæ–‡ä»¶æ ¼å¼ç»“æ„å’Œå†…å®¹ä¹‹é—´çš„å…³è”ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1681794171,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":372727,"user_name":"ä»»è‹¥é¸¿","can_delete":false,"product_type":"c1","uid":1111204,"ip_address":"ç½—é©¬å°¼äºš","ucode":"25BAC63AB65B83","user_header":"https://static001.geekbang.org/account/avatar/00/10/f4/a4/cbd85d08.jpg","comment_is_top":false,"comment_ctime":1681486856,"is_pvip":false,"replies":[{"id":136112,"content":"è¿˜æ˜¯ç¡®è®¤ä¸€ä¸‹è·¯å¾„ï¼ŸColabé‡Œçš„å·¥ä½œè·¯å¾„åœ¨æ¯æ¬¡é‡æ–°å¯åŠ¨ä¹‹åå†…å®¹éƒ½ä¼šæ¸…ç©ºã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1681614252,"ip_address":"ä¸Šæµ·","comment_id":372727,"utype":1}],"discussion_count":4,"race_medal":0,"score":5,"product_id":100541001,"comment_content":"ä¸ºä»€ä¹ˆæˆ‘åœ¨colab ä¸Šè¿è¡Œ documents = SimpleDirectoryReader(dir).load_data()\n\nprint(documents) æ˜¯ç©ºçš„ã€‚ç¡®å®šæ–‡ä»¶æ˜¯è·¯å¾„æ˜¯å¯¹çš„ï¼Œä¹Ÿå¯ä»¥è¯»å‡ºæ¥ã€‚ä½†æ˜¯ä¸ºä»€ä¹ˆdocumentsæ˜¯ç©ºå‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":613956,"discussion_content":"è¿˜æ˜¯ç¡®è®¤ä¸€ä¸‹è·¯å¾„ï¼ŸColabé‡Œçš„å·¥ä½œè·¯å¾„åœ¨æ¯æ¬¡é‡æ–°å¯åŠ¨ä¹‹åå†…å®¹éƒ½ä¼šæ¸…ç©ºã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1681614252,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1155418,"avatar":"https://static001.geekbang.org/account/avatar/00/11/a1/5a/aaa444e0.jpg","nickname":"Celery-èŠ¹èœ","note":"","ucode":"B02AD5A9956484","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":619540,"discussion_content":"è¿™ä¸ªè·¯å¾„æ€ä¹ˆç¡®è®¤å‘¢ï¼Ÿæˆ‘ä¹Ÿæ‰“å°å‡ºæ¥documentsæ˜¯[]ï¼Œæˆ‘è¯•äº†åœ¨å½“å‰æ–‡ä»¶å¤¹ä¸‹å»ºä¸€ä¸ªtxtï¼Œä¹Ÿè¿˜æ˜¯è¿™æ ·","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1685257592,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1118159,"avatar":"https://static001.geekbang.org/account/avatar/00/11/0f/cf/bfa0dc80.jpg","nickname":"Z12","note":"","ucode":"59F5E62F67FFDC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":616410,"discussion_content":"æˆ‘ä¹Ÿé‡åˆ°äº†ä¸€æ ·çš„é—®é¢˜ï¼Œéƒ½æ˜¯æŒ‰ç…§è¯¾ç¨‹ä¸­çš„ä»£ç ï¼Œä¹Ÿç¡®ä¿è·¯å¾„æ˜¯æ­£ç¡®çš„ä½†æ˜¯æ‰§è¡Œä¸‹æ¥ï¼š\nindex = GPTSimpleVectorIndex.load_from_disk(&#39;/content/index_mr_fujino.json&#39;)\nresponse = index.query(&#34;é²è¿…å…ˆç”Ÿåœ¨æ—¥æœ¬å­¦ä¹ åŒ»å­¦çš„è€å¸ˆæ˜¯è°ï¼Ÿ&#34;)\nprint(response)\n\næ˜¾ç¤ºçš„ç»“æœæ˜¯ï¼š\nNone","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1682782812,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1812201,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLm8skz4F7FGGBTXWUMia6qVEc00BddeXapicv5FkAx62GmOnUNEcE4scSR60AmappQoNdIQhccKsBA/132","nickname":"æœ«æ—¥ï¼Œæˆæ¬¢","note":"","ucode":"BBAEBB9C93558A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":615897,"discussion_content":"æƒ³é—®ä¸‹æœ€åå’‹è§£å†³çš„ï¼Œ æˆ‘è¿˜æ˜¯æ²¡æ‰¾åˆ°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1682493730,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"é™•è¥¿","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":372477,"user_name":"å‹¿æ›´æ”¹ä»»ä½•ä¿¡æ¯","can_delete":false,"product_type":"c1","uid":2028955,"ip_address":"åŒ—äº¬","ucode":"B4949BEB8B2AFD","user_header":"","comment_is_top":false,"comment_ctime":1681191917,"is_pvip":false,"replies":[{"id":135972,"content":"æ²¡å¤ªç†è§£ä½ çš„é—®é¢˜ï¼Ÿä½ éœ€è¦æ‰¾ä¸€ä¸ªæ¨¡å‹ï¼Œæ˜¯æ”¯æŒdecodeåˆ°æ–‡æœ¬çš„ï¼ŒRESNET-50å¹¶ä¸æ˜¯transformeræ¶æ„ï¼Œä¹Ÿæ²¡æœ‰decodeåˆ°æ–‡æœ¬çš„èƒ½åŠ›å•Šã€‚ä½ ç°åœ¨è¿™ä¸ªä»£ç æ¡ˆä¾‹æ˜¯è·‘ä¸é€šçš„ã€‚\n\nä¸è®¾ç½®æ¨¡å‹ï¼Œé»˜è®¤é€‰ç”¨çš„æ¨¡å‹æ˜¯ https:&#47;&#47;huggingface.co&#47;naver-clova-ix&#47;donut-base-finetuned-cord-v2 ","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1681263426,"ip_address":"ä¸Šæµ·","comment_id":372477,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100541001,"comment_content":"image_parser = ImageParser(keep_image=True, parse_text=True,parser_config={&quot;model&quot;:&quot;resnet50&quot;,&quot;processor&quot;:&quot;default&quot;})\n    print(f&quot;æµ‹è¯•ä¸€ä¸‹ocrè¯†åˆ«ç»“æœ:{image_parser.parse_file(&#39;.&#47;data&#47;receipts&#47;1100-receipt.jpg&#39;)}&quot;)  æˆ‘ç”¨çš„ç‰ˆæœ¬éœ€è¦è®¾ç½®æ¨¡å‹ï¼Œè¿™ä¸ªæ¨¡å‹å†™ä»€ä¹ˆäº†","like_count":0,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":613313,"discussion_content":"æ²¡å¤ªç†è§£ä½ çš„é—®é¢˜ï¼Ÿä½ éœ€è¦æ‰¾ä¸€ä¸ªæ¨¡å‹ï¼Œæ˜¯æ”¯æŒdecodeåˆ°æ–‡æœ¬çš„ï¼ŒRESNET-50å¹¶ä¸æ˜¯transformeræ¶æ„ï¼Œä¹Ÿæ²¡æœ‰decodeåˆ°æ–‡æœ¬çš„èƒ½åŠ›å•Šã€‚ä½ ç°åœ¨è¿™ä¸ªä»£ç æ¡ˆä¾‹æ˜¯è·‘ä¸é€šçš„ã€‚\n\nä¸è®¾ç½®æ¨¡å‹ï¼Œé»˜è®¤é€‰ç”¨çš„æ¨¡å‹æ˜¯ https://huggingface.co/naver-clova-ix/donut-base-finetuned-cord-v2 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1681263426,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":372166,"user_name":"muggle","can_delete":false,"product_type":"c1","uid":1109754,"ip_address":"ä¸Šæµ·","ucode":"B5A85C4C280FCA","user_header":"https://static001.geekbang.org/account/avatar/00/10/ee/fa/37da6393.jpg","comment_is_top":false,"comment_ctime":1680794071,"is_pvip":false,"replies":[{"id":135863,"content":"è¿™æ˜¯å› ä¸ºé»˜è®¤çš„PromptTemplateçš„æç¤ºè¯­é‡Œé¢æ˜¯è‹±æ–‡çš„ã€‚æ‰€ä»¥å®é™…æäº¤ç»™OpenAIçš„Promptæ˜¯ä¸­è‹±æ–‡æ··æ‚çš„ï¼Œè¿™ä¸ªæ—¶å€™å›ä¸­æ–‡è¿˜æ˜¯è‹±æ–‡ä¸å¤ªç¡®å®šã€‚\n\nå¦‚æœä½ éœ€è¦å®ƒä¸€å®šå›ä¸­æ–‡ï¼Œå¯ä»¥åƒè¿™ä¸€è®²é‡Œä½¿ç”¨è‡ªå®šä¹‰çš„PromptTemplateï¼Œç›´æ¥Promptéƒ½ç”¨ä¸­æ–‡ã€‚æˆ–è€…å°½ç®¡ç”¨è‹±æ–‡ï¼Œä½†æ˜¯åœ¨æœ€ååŠ ä¸Šâ€œPlease answer the question in Chinese.â€","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1680972579,"ip_address":"ä¸­å›½é¦™æ¸¯","comment_id":372166,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100541001,"comment_content":"æƒ³è¯·æ•™ä¸‹è€å¸ˆï¼Œæˆ‘ç”¨GPTSimpleVectorIndexåqueryçš„æ—¶å€™ç”¨ä¸­æ–‡æŸ¥è¯¢ä¸ºä»€ä¹ˆä¼šè¿”å›è‹±æ–‡ç»“æœå‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":612858,"discussion_content":"è¿™æ˜¯å› ä¸ºé»˜è®¤çš„PromptTemplateçš„æç¤ºè¯­é‡Œé¢æ˜¯è‹±æ–‡çš„ã€‚æ‰€ä»¥å®é™…æäº¤ç»™OpenAIçš„Promptæ˜¯ä¸­è‹±æ–‡æ··æ‚çš„ï¼Œè¿™ä¸ªæ—¶å€™å›ä¸­æ–‡è¿˜æ˜¯è‹±æ–‡ä¸å¤ªç¡®å®šã€‚\n\nå¦‚æœä½ éœ€è¦å®ƒä¸€å®šå›ä¸­æ–‡ï¼Œå¯ä»¥åƒè¿™ä¸€è®²é‡Œä½¿ç”¨è‡ªå®šä¹‰çš„PromptTemplateï¼Œç›´æ¥Promptéƒ½ç”¨ä¸­æ–‡ã€‚æˆ–è€…å°½ç®¡ç”¨è‹±æ–‡ï¼Œä½†æ˜¯åœ¨æœ€ååŠ ä¸Šâ€œPlease answer the question in Chinese.â€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1680972579,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸­å›½é¦™æ¸¯","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":372096,"user_name":"æ•°æ®åˆ†æç«™ç«™","can_delete":false,"product_type":"c1","uid":3579163,"ip_address":"å¹¿ä¸œ","ucode":"76DA7D38EB6DE2","user_header":"https://static001.geekbang.org/account/avatar/00/36/9d/1b/8f0f9f13.jpg","comment_is_top":false,"comment_ctime":1680709333,"is_pvip":false,"replies":[{"id":135883,"content":"llama-indexåŒ…æ˜¯å…è´¹çš„ï¼Œä½ å¯èƒ½é‡åˆ°çš„é—®é¢˜æ˜¯ open aiçš„é¢åº¦ç”¨å®Œäº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1680974118,"ip_address":"æ—¥æœ¬","comment_id":372096,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100541001,"comment_content":"è¿™ä¸ªæ˜¯è¦ä»˜è´¹æ‰èƒ½ç”¨è¿™ä¸ªåŒ…å—ï¼Ÿæˆ‘ç”¨å…è´¹çš„ä¸€ç›´è¯´é”™è¯¯","like_count":0,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":612879,"discussion_content":"llama-indexåŒ…æ˜¯å…è´¹çš„ï¼Œä½ å¯èƒ½é‡åˆ°çš„é—®é¢˜æ˜¯ open aiçš„é¢åº¦ç”¨å®Œäº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1680974118,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ—¥æœ¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":372095,"user_name":"Toni","can_delete":false,"product_type":"c1","uid":3206957,"ip_address":"ç‘å£«","ucode":"E6B2FACCC1E000","user_header":"https://static001.geekbang.org/account/avatar/00/30/ef/2d/757bb0d3.jpg","comment_is_top":false,"comment_ctime":1680707556,"is_pvip":false,"replies":[{"id":135882,"content":"æˆ‘æƒ³ä½ åº”è¯¥é€‰å–å…¶ä»–çš„å¤šæ¨¡æ€æ¨¡å‹ï¼Œæˆ‘ä¸ç¡®å®šDonutæ˜¯å¦æ”¯æŒä¸­æ–‡ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1680974088,"ip_address":"æ—¥æœ¬","comment_id":372095,"utype":1}],"discussion_count":2,"race_medal":0,"score":5,"product_id":100541001,"comment_content":"ä¸ ChatGPT è¿›è¡Œäº†ä¸€æ¬¡èŠå¤©å¯¹è¯ï¼Œé—®: â€œé²è¿…å…ˆç”Ÿåœ¨æ—¥æœ¬å­¦ä¹ åŒ»å­¦æ—¶çš„è€å¸ˆæ˜¯è°â€ï¼ŒChatGPT ç­”:&quot;... æ˜¯å†…å±±å®Œé€  ...&quot;ã€‚åˆé—®: &quot;ä¾æ®&lt;è—¤é‡å…ˆç”Ÿ&gt;è¿™ç¯‡æ–‡ç« ï¼Œå›ç­”é²è¿…å…ˆç”Ÿåœ¨æ—¥æœ¬å­¦ä¹ åŒ»å­¦æ—¶çš„è€å¸ˆæ˜¯è°&quot; ç­”:&quot;... æ˜¯åå«æ¨ªäº•æ—¶é›„çš„æ—¥æœ¬åŒ»ç”Ÿã€‚...&quot;ã€‚\n\nå°†è¿™æ®µå¯¹è¯çš„æˆªå›¾å½“ä½œä¸‹ä¸€ä¸ªç»ƒä¹ &quot;å¼•å…¥å¤šæ¨¡æ€ï¼Œè®© llamd-index èƒ½å¤Ÿè¯†åˆ«å°ç¥¨&quot;çš„è¾“å…¥å›¾ï¼Œè¿è¡Œä»£ç \nreceipts_response = receipts_index.query(\n    &#39;What is the topic of this conversation? answer in Chinese&#39;,\n    query_transform=ImageOutputQueryTransform(width=400)\n)\ndisplay_response(receipts_response)\nå¾—åˆ°ä¸‹é¢ä»¤äººè¯§å¼‚çš„å›ç­”:\nFinal Response: è¿™æ®µä¿¡æ¯æè¿°çš„æ˜¯ä¸€ä»½èœå•ï¼Œå…¶ä¸­æœ‰ä¸€é“èœå«åšâ€œé²è¿…çš„åŒ»å­¦è€å¸ˆâ€ï¼Œä»·æ ¼ä¸º89çï¼Œæ•°é‡ä¸º2ï¼Œæ€»ä»·ä¸º7ã€‚\n\nä¸ºä»€ä¹ˆä¼šå‡ºç°èœå•è¿™æ ·çš„æ¶ˆæ¯?","like_count":0,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":612878,"discussion_content":"æˆ‘æƒ³ä½ åº”è¯¥é€‰å–å…¶ä»–çš„å¤šæ¨¡æ€æ¨¡å‹ï¼Œæˆ‘ä¸ç¡®å®šDonutæ˜¯å¦æ”¯æŒä¸­æ–‡ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1680974088,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ—¥æœ¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":3206957,"avatar":"https://static001.geekbang.org/account/avatar/00/30/ef/2d/757bb0d3.jpg","nickname":"Toni","note":"","ucode":"E6B2FACCC1E000","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":612988,"discussion_content":"è°¢è°¢å›å¤ã€‚æ²¿ç€è¿™ä¸ªæ€è·¯ï¼Œç”¨æ”¯æŒå¤šè¯­è¨€çš„ model &#34;paraphrase-multilingual-mpnet-base-v2&#34; è¯•äº†ä¸€ä¸‹:\nnodes = parser.get_nodes_from_documents(receipt_documents)\nembed_model = LangchainEmbedding(HuggingFaceEmbeddings(\n    model_name=&#34;sentence-transformers/paraphrase-multilingual-mpnet-base-v2&#34;\n))\nservice_context = ServiceContext.from_defaults(embed_model=embed_model)\né—®åŒæ ·çš„é—®é¢˜\nfrom llama_index import QueryMode\nresponse = index.query(\n    &#34;è¯·é—®å¯¹è¯çš„å†…å®¹æ˜¯ä»€ä¹ˆï¼Ÿ&#34;, \n    mode=QueryMode.EMBEDDING,\n    verbose=True, \n)\nprint(response)\nå¾—åˆ°çš„å›å¤å¦‚ä¸‹:\n &gt; Got node text: file_name: data\\receipts\\Screenshot é²è¿…çš„åŒ»å­¦è€å¸ˆ 2023-04-04.png\n\n&lt;s_menu&gt;&lt;s_nm&gt; (Kanzo Uchimura)&lt;/s_unitprice&gt;&lt;s_cnt&gt; 2&lt;/s_cnt&gt;&lt;s_price&gt; 89ç&lt;s_menuqty_cnt&gt; 7&lt;/s_menuqty_cnt&gt;&lt;/s_total&gt;...\nINFO:llama_index.token_counter.token_counter:&gt; [query] Total LLM token usage: 217 tokens\nINFO:llama_index.token_counter.token_counter:&gt; [query] Total embedding token usage: 21 tokens\n\nè¿™æ®µä¿¡æ¯æ²¡æœ‰æä¾›å¯¹è¯çš„å†…å®¹ï¼Œåªæä¾›äº†æ–‡ä»¶åå’Œä¸€æ®µXMLä»£ç ã€‚\n\nè¿™æ¬¡æ²¡æœ‰å¥‡æ€ªçš„èœå•å†…å®¹äº†ã€‚\n\nDonut è¯»å°ç¥¨è¿˜å¯ä»¥ï¼Œä½†è§£ææ–‡å­—å†…å®¹çš„å›¾åƒä¼¼ä¹ä¸æ˜¯å¼ºé¡¹ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1681054229,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ç‘å£«","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":372046,"user_name":"ç¨‹åºå‘˜åŠæ”¯çƒŸ","can_delete":false,"product_type":"c1","uid":1230837,"ip_address":"æ±Ÿè‹","ucode":"23C7B588F400A7","user_header":"https://static001.geekbang.org/account/avatar/00/12/c7/f5/108cd83b.jpg","comment_is_top":false,"comment_ctime":1680651914,"is_pvip":false,"replies":[{"id":135866,"content":"llama-indexæ˜¯å¼€æºçš„ï¼Œä½†æ˜¯llama-indexå’ŒFacebookçš„llamaæ¨¡å‹æ²¡æœ‰å…³ç³»\nllamaæ¨¡å‹çš„è®­ç»ƒä»£ç æ˜¯å¼€æºçš„ï¼Œæ¨¡å‹Facebookè¯´å¼€æºï¼Œä½†æ˜¯éœ€è¦å¡«è¡¨ç”³è¯·ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1680972705,"ip_address":"ä¸­å›½é¦™æ¸¯","comment_id":372046,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100541001,"comment_content":"llamaæ˜¯å¼€æºçš„å—","like_count":0,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":612861,"discussion_content":"llama-indexæ˜¯å¼€æºçš„ï¼Œä½†æ˜¯llama-indexå’ŒFacebookçš„llamaæ¨¡å‹æ²¡æœ‰å…³ç³»\nllamaæ¨¡å‹çš„è®­ç»ƒä»£ç æ˜¯å¼€æºçš„ï¼Œæ¨¡å‹Facebookè¯´å¼€æºï¼Œä½†æ˜¯éœ€è¦å¡«è¡¨ç”³è¯·ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1680972705,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸­å›½é¦™æ¸¯","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":372044,"user_name":"å­Ÿå¥","can_delete":false,"product_type":"c1","uid":1373593,"ip_address":"å¹¿ä¸œ","ucode":"E20ECD1823E877","user_header":"https://static001.geekbang.org/account/avatar/00/14/f5/99/5bf198e3.jpg","comment_is_top":false,"comment_ctime":1680637810,"is_pvip":false,"replies":[{"id":135885,"content":"langchainæœ‰å¯¹åº” typescript çš„ç‰ˆæœ¬ï¼Œä¸è¿‡ç›®å‰åŠŸèƒ½è¿˜æ²¡æœ‰èµ¶ä¸Špythonçš„æ‰€æœ‰åŠŸèƒ½","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1680974274,"ip_address":"æ—¥æœ¬","comment_id":372044,"utype":1}],"discussion_count":3,"race_medal":0,"score":5,"product_id":100541001,"comment_content":"Pythonç”Ÿæ€çœŸä¸°å¯Œå•Šï¼Œä½œä¸ºnodejså¼€å‘ï¼Œè¿˜å¾—æ‰¾æ‰¾ç›¸å…³çš„åº“","like_count":0,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":612881,"discussion_content":"langchainæœ‰å¯¹åº” typescript çš„ç‰ˆæœ¬ï¼Œä¸è¿‡ç›®å‰åŠŸèƒ½è¿˜æ²¡æœ‰èµ¶ä¸Špythonçš„æ‰€æœ‰åŠŸèƒ½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1680974274,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ—¥æœ¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1338098,"avatar":"https://static001.geekbang.org/account/avatar/00/14/6a/f2/db90fa96.jpg","nickname":"Oliå¼ å¸†","note":"","ucode":"6E60A370C3C14A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":612428,"discussion_content":"æ˜¯çš„æ˜¯çš„ï¼Œæˆ‘ä¹Ÿæ˜¯é¡¹ç›®æœ¬èº«æ˜¯NodeJSçš„ï¼Œå¾ˆå¤šPythonä»£ç çœ‹å®Œä¹‹åè¿˜è¦å†è½¬æˆJSæ‰èƒ½éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒã€‚å¥½åœ¨æœ‰ChatGPTã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1680676371,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2161554,"avatar":"https://static001.geekbang.org/account/avatar/00/20/fb/92/0537ea08.jpg","nickname":"æ¼«æ¸¸è€…","note":"","ucode":"23DD0146F43C7D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":621183,"discussion_content":"å¼ºè€…æ„ˆå¼ºï¼Œä»¥åå°±æ˜¯pythonçš„å¤©ä¸‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1686898509,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":372043,"user_name":"saihong","can_delete":false,"product_type":"c1","uid":2179765,"ip_address":"ä¸­å›½å°æ¹¾","ucode":"CB1C8CF5D43ECA","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKBkmfjPpxetKHpianAqGvdUXmu0fI3ia6M4lxZzmZf3IryibibOxC8w9yCv0Rf6FTCu30fKxVknOy5nw/132","comment_is_top":false,"comment_ctime":1680630599,"is_pvip":true,"replies":[{"id":135865,"content":"ä¹Ÿç®—Tokenæ•°çš„ï¼Œè¿™ä¸ªæ˜¯GPTæ¨¡å‹æœºåˆ¶å†³å®šçš„ï¼Œè¿™ä¸ªTokenæ•°çœä¸äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1680972657,"ip_address":"ä¸­å›½é¦™æ¸¯","comment_id":372043,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100541001,"comment_content":"è«‹å•é¤µçµ¦ ChatGPT ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œæ˜¯å¦ä¹Ÿæœƒç®— token æ•¸ï¼Ÿ\næ¯æ¬¡ç™¼å•ä¹‹å‰éƒ½è¦é¤µä¸€æ¬¡ä¸Šä¸‹æ–‡ï¼Œé€™æ¨£æœ‰çœåˆ° token å—ï¼Ÿé‚„æ˜¯æˆ‘ç†è§£éŒ¯èª¤ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":612860,"discussion_content":"ä¹Ÿç®—Tokenæ•°çš„ï¼Œè¿™ä¸ªæ˜¯GPTæ¨¡å‹æœºåˆ¶å†³å®šçš„ï¼Œè¿™ä¸ªTokenæ•°çœä¸äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1680972657,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸­å›½é¦™æ¸¯","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":372009,"user_name":"Geek_07917e","can_delete":false,"product_type":"c1","uid":1962087,"ip_address":"ä¸­å›½é¦™æ¸¯","ucode":"35C46F6512F5E6","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqcyR0jtfyQtWLeJfd8K5a3Mdba7ac3y9hiacV6xib6rIKLG3nSLDTVwFB5Bh7CvQrRwiaEibpScN37zQ/132","comment_is_top":false,"comment_ctime":1680596737,"is_pvip":false,"replies":[{"id":135870,"content":"æˆ‘å‘ç°å¥½å¤šåŒå­¦éƒ½æ˜¯ç”¨windowsç¯å¢ƒä¹ˆã€‚\n\nåº”è¯¥æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œwindowsä¸‹åº”è¯¥æ˜¯\ndocuments = SimpleDirectoryReader(&#39;E:\\\\mr_fujino&#39;).load_data()\næˆ–è€… \ndocuments = SimpleDirectoryReader(&#39;E:&#47;mr_fujino&#39;).load_data()\n\nä¸è¿‡æˆ‘æ‰‹å¤´æ²¡æœ‰Windowsç¯å¢ƒå¯ä»¥æµ‹è¯•ã€‚ä½ è¯•è¯•çœ‹æ­£å¸¸æ–‡ä»¶è¯»å†™è¿™æ ·çš„è·¯å¾„å¯ä»¥åº”è¯¥å°±å¯ä»¥ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1680973170,"ip_address":"ä¸­å›½é¦™æ¸¯","comment_id":372009,"utype":1}],"discussion_count":2,"race_medal":0,"score":5,"product_id":100541001,"comment_content":"è€å¸ˆ  å¦‚æœæˆ‘çš„æ–‡ä»¶æ˜¯æ”¾åœ¨æœ¬åœ°Eç›˜çš„åå«mr_fujinoçš„æ–‡ä»¶å¤¹ä¸‹ ï¼Œé‚£è¿™æ ·å†™å¯¹å—ï¼Œè¿è¡Œæ²¡ååº”\n\ndocuments = SimpleDirectoryReader(&#39;E:&#47;mr_fujino&#39;).load_data()","like_count":0,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":612865,"discussion_content":"æˆ‘å‘ç°å¥½å¤šåŒå­¦éƒ½æ˜¯ç”¨windowsç¯å¢ƒä¹ˆã€‚\n\nåº”è¯¥æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œwindowsä¸‹åº”è¯¥æ˜¯\ndocuments = SimpleDirectoryReader(&#39;E:\\\\mr_fujino&#39;).load_data()\næˆ–è€… \ndocuments = SimpleDirectoryReader(&#39;E:/mr_fujino&#39;).load_data()\n\nä¸è¿‡æˆ‘æ‰‹å¤´æ²¡æœ‰Windowsç¯å¢ƒå¯ä»¥æµ‹è¯•ã€‚ä½ è¯•è¯•çœ‹æ­£å¸¸æ–‡ä»¶è¯»å†™è¿™æ ·çš„è·¯å¾„å¯ä»¥åº”è¯¥å°±å¯ä»¥ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1680973170,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸­å›½é¦™æ¸¯","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":3206957,"avatar":"https://static001.geekbang.org/account/avatar/00/30/ef/2d/757bb0d3.jpg","nickname":"Toni","note":"","ucode":"E6B2FACCC1E000","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":612564,"discussion_content":"è¯•è¯• documents = SimpleDirectoryReader(&#39;E:\\\\mr_fujino&#39;).load_data()","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1680780601,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ç‘å£«","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":371995,"user_name":"Warren","can_delete":false,"product_type":"c1","uid":1186273,"ip_address":"å¹¿ä¸œ","ucode":"7518ED2E07AAF7","user_header":"https://static001.geekbang.org/account/avatar/00/12/19/e1/a7fbc963.jpg","comment_is_top":false,"comment_ctime":1680588139,"is_pvip":true,"replies":[{"id":135871,"content":"æ„Ÿè°¢ï¼Œæˆ‘è®©ç¼–è¾‘ä¿®æ”¹ä¸€ä¸‹ï¼Œçœ‹äº†ä¸€çœ¼Notebooké‡Œæ˜¯å¯¹çš„ï¼Œåº”è¯¥æ˜¯æˆ‘åœ¨å¤åˆ¶è¿‡æ¥çš„æŸä¸€æ¬¡æé”™äº†æ¼æ”¹äº†","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1680973244,"ip_address":"ä¸­å›½é¦™æ¸¯","comment_id":371995,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100541001,"comment_content":"from llama_index import QuestionAnswerPrompt\nquery_str = &quot;é²è¿…å…ˆç”Ÿå»å“ªé‡Œå­¦çš„åŒ»å­¦ï¼Ÿ&quot;\nDEFAULT_TEXT_QA_PROMPT_TMPL = (\n    &quot;Context information is below. \\n&quot;\n    &quot;---------------------\\n&quot;\n    &quot;{context_str}&quot;\n    &quot;\\n---------------------\\n&quot;\n    &quot;Given the context information and not prior knowledge, &quot;\n    &quot;answer the question: {query_str}\\n&quot;\n)\nQA_PROMPT = QuestionAnswerPrompt(QA_PROMPT_TMPL)\n\nresponse = index.query(query_str, text_qa_template=QA_PROMPT)\nprint(response)\n\nè¿™ä¸Šé¢QA_PROMPT = QuestionAnswerPrompt(QA_PROMPT_TMPL)è¿™ä¸€å¥ä¸­çš„QA_PROMPT_TMPLåº”è¯¥æ”¹ä¸ºDEFAULT_TEXT_QA_PROMPT_TMPL","like_count":0,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":612866,"discussion_content":"æ„Ÿè°¢ï¼Œæˆ‘è®©ç¼–è¾‘ä¿®æ”¹ä¸€ä¸‹ï¼Œçœ‹äº†ä¸€çœ¼Notebooké‡Œæ˜¯å¯¹çš„ï¼Œåº”è¯¥æ˜¯æˆ‘åœ¨å¤åˆ¶è¿‡æ¥çš„æŸä¸€æ¬¡æé”™äº†æ¼æ”¹äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1680973244,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸­å›½é¦™æ¸¯","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":371982,"user_name":"John","can_delete":false,"product_type":"c1","uid":1020861,"ip_address":"åŠ æ‹¿å¤§","ucode":"E4ADF8488953FB","user_header":"https://static001.geekbang.org/account/avatar/00/0f/93/bd/f3977ebb.jpg","comment_is_top":false,"comment_ctime":1680579388,"is_pvip":false,"replies":[{"id":135903,"content":"è¿™ä¸ªæ˜¯é€šè¿‡ä¸€ä¸ªListï¼Œå°†æ–‡ç« åˆ†ç‰‡å˜æˆäº†ä¸€ä¸ªé“¾è¡¨ä¸€æ ·çš„ç´¢å¼•ç»“æ„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1680975501,"ip_address":"æ—¥æœ¬","comment_id":371982,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100541001,"comment_content":"è¿™ä¸ªGPTListIndexæ˜¯å¹²å•¥çš„ è¿˜æ˜¯æ²¡å¤ªçœ‹æ‡‚ ...","like_count":0,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":612900,"discussion_content":"è¿™ä¸ªæ˜¯é€šè¿‡ä¸€ä¸ªListï¼Œå°†æ–‡ç« åˆ†ç‰‡å˜æˆäº†ä¸€ä¸ªé“¾è¡¨ä¸€æ ·çš„ç´¢å¼•ç»“æ„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1680975501,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ—¥æœ¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":371960,"user_name":"Ever","can_delete":false,"product_type":"c1","uid":1088821,"ip_address":"å¹¿ä¸œ","ucode":"69B52B0E20BBE0","user_header":"https://static001.geekbang.org/account/avatar/00/10/9d/35/e026cf65.jpg","comment_is_top":false,"comment_ctime":1680567361,"is_pvip":false,"replies":[{"id":135743,"content":"å¾€åçœ‹Langchainçš„éƒ¨åˆ†ï¼Œ14-17è®²å°±ä¼šæœ‰ç›¸å…³çš„è§£å†³æ–¹æ¡ˆã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1680585997,"ip_address":"ä¸Šæµ·","comment_id":371960,"utype":1}],"discussion_count":2,"race_medal":0,"score":6,"product_id":100541001,"comment_content":"é—®ä¸€ä¸‹è€å¸ˆï¼Œåƒå¾®è½¯365å±•ç¤ºçš„é‚£ç§é€šè¿‡å¯¹è¯æ¡†è¾“å…¥è‡ªç„¶è¯­è¨€å°±èƒ½å‘½ä»¤365åšå¯¹åº”çš„äº‹æƒ…æ˜¯æ€ä¹ˆåšåˆ°çš„ï¼Ÿä¾‹å¦‚è¦å®ƒæ¢ä¸€ä¸‹æ ‡é¢˜çš„é¢œè‰²ï¼Œå­—ä½“å°±èƒ½æ¢ï¼Œ365æ˜¯æ€ä¹ˆçŸ¥é“è¦åšä»€ä¹ˆçš„ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":612249,"discussion_content":"å¾€åçœ‹Langchainçš„éƒ¨åˆ†ï¼Œ14-17è®²å°±ä¼šæœ‰ç›¸å…³çš„è§£å†³æ–¹æ¡ˆã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1680585997,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1373593,"avatar":"https://static001.geekbang.org/account/avatar/00/14/f5/99/5bf198e3.jpg","nickname":"å­Ÿå¥","note":"","ucode":"E20ECD1823E877","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":612388,"discussion_content":"666ï¼ŒæœŸå¾…æ›´æ–°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1680635361,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":612249,"ip_address":"å¹¿ä¸œ","group_id":0},"score":612388,"extra":""}]}]},{"had_liked":false,"id":376248,"user_name":"Eric","can_delete":false,"product_type":"c1","uid":1057012,"ip_address":"ç¾å›½","ucode":"F8247828C6D498","user_header":"https://static001.geekbang.org/account/avatar/00/10/20/f4/9112ddb5.jpg","comment_is_top":false,"comment_ctime":1686584880,"is_pvip":false,"replies":null,"discussion_count":2,"race_medal":0,"score":6,"product_id":100541001,"comment_content":"å¯èƒ½æ˜¯llama-indexè¿­ä»£å¤ªå¿«, æˆ‘å®‰è£…ç‰ˆæœ¬0.6.23ï¼Œè—¤é‡å…ˆç”Ÿçš„ä»£ç è¿è¡Œä¸å‡ºæ¥ã€‚ æŠ¥é”™\nNameError: name &#39;GPTSimpleVectorIndex&#39; is not defined\n\nå‚è€ƒäº†å®˜æ–¹ç¤ºä¾‹ï¼Œ ä¿®æ”¹äº†ä»£ç å¦‚ä¸‹ï¼š\n# åˆ›å»ºindex\ndocuments = SimpleDirectoryReader(&#39;.&#47;data&#47;&#39;).load_data()\nindex =  GPTVectorStoreIndex.from_documents(documents)\n\nindex.set_index_id(&quot;index_mr_fujino&quot;)\nindex.storage_context.persist(&#39;.&#47;storage&#39;)\n\n# query\nimport openai, os\nfrom llama_index import GPTVectorStoreIndex, SimpleDirectoryReader,load_index_from_storage, StorageContext\n\nstorage_context = StorageContext.from_defaults(persist_dir=&#39;storage&#39;)\nindex = load_index_from_storage(storage_context, index_id=&quot;index_mr_fujino&quot;)\n\nquery_engine = index.as_query_engine()\nresponse = query_engine.query(&quot;é²è¿…å…ˆç”Ÿåœ¨æ—¥æœ¬å­¦ä¹ åŒ»å­¦çš„è€å¸ˆæ˜¯è°ï¼Ÿ&quot;)\nprint(response)\n\nå®˜æ–¹ç¤ºä¾‹åœ°å€ï¼š https:&#47;&#47;gpt-index.readthedocs.io&#47;en&#47;latest&#47;examples&#47;vector_stores&#47;SimpleIndexDemo.html","like_count":4,"discussions":[{"author":{"id":1361330,"avatar":"https://static001.geekbang.org/account/avatar/00/14/c5/b2/5b339c64.jpg","nickname":"K-Li","note":"","ucode":"3091322142E43E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":624259,"discussion_content":"é€šäº†ï¼Œæ„Ÿè°¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1690367726,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ä¿„ç½—æ–¯","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":3646806,"avatar":"https://static001.geekbang.org/account/avatar/00/37/a5/56/b3cf71a9.jpg","nickname":"Penguin Shi","note":"","ucode":"477A24D7ECE09A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":621102,"discussion_content":"æ„Ÿè°¢å¸®åŠ©ï¼Œç”¨äº†ä½ è¿™æ®µä»£ç ï¼Œé€šè¿‡äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1686817137,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ä¼Šæœ—","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":376159,"user_name":"é¹¤æ¶µ","can_delete":false,"product_type":"c1","uid":1021825,"ip_address":"åŒ—äº¬","ucode":"22CBBC13FC97A9","user_header":"https://static001.geekbang.org/account/avatar/00/0f/97/81/c457def1.jpg","comment_is_top":false,"comment_ctime":1686406049,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100541001,"comment_content":"å¾æ–‡æµ©è€å¸ˆè¿™ä¸ªè¯¾ç¨‹AIæŠ€æœ¯è¯¾æ˜¯å¸‚é¢ä¸Šå¤©èŠ±æ¿","like_count":3},{"had_liked":false,"id":382362,"user_name":"Chloe","can_delete":false,"product_type":"c1","uid":1004953,"ip_address":"ç¾å›½","ucode":"C4848ED5B35752","user_header":"https://static001.geekbang.org/account/avatar/00/0f/55/99/4bdadfd3.jpg","comment_is_top":false,"comment_ctime":1697111434,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100541001,"comment_content":"Just a heads-up, with error &quot;AttributeError: &#39;VectorStoreIndex&#39; object has no attribute &#39;save_to_disk&#39;&quot;, the solution is change it to &quot;index.storage_context.persist(persist_dir=&#39;index_mr_fujino.json&#39;) &quot;","like_count":1},{"had_liked":false,"id":390310,"user_name":"aben1900","can_delete":false,"product_type":"c1","uid":1225301,"ip_address":"ä¸Šæµ·","ucode":"FBC6EC1F1E318F","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/6WmssLWiaNnhJOuSowLWWYl19yE7OFOoNVfaic0oQ1SvfJdibWnWAzLYwoksptYGMD1rDTTk4hajGu0cNqNydYyAg/132","comment_is_top":false,"comment_ctime":1715064103,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100541001,"comment_content":"import openai, osfrom llama_index import GPTVectorStoreIndex, SimpleDirectoryReaderopenai.api_key = os.environ.get(&quot;OPENAI_API_KEY&quot;)documents = SimpleDirectoryReader(&#39;.&#47;data&#47;mr_fujino&#39;).load_data()index = GPTSimpleVectorIndex.from_documents(documents)index.save_to_disk(&#39;index_mr_fujino.json&#39;)ï¼Œè¿™æ®µä»£ç å’Œembeddingæœ‰ä»€ä¹ˆå…³ç³»ï¼Œéƒ½æ˜¯llamaåœ¨æ“ä½œï¼Ÿï¼Ÿï¼Ÿæ²¡æœ‰çœ‹æ‡‚è¿™æ®µ","like_count":0},{"had_liked":false,"id":389997,"user_name":"é’¢é•šå¦ˆå¦ˆ","can_delete":false,"product_type":"c1","uid":1417535,"ip_address":"åŒ—äº¬","ucode":"5D4A08AA1AA46F","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoWgjX8PQyeGIlibzNDp7CHbpia9jicuFz5WY7RmHQY8tGiaVsvqIiabPmAfuhUXNQBwswfTibxqa0GiaVHw/132","comment_is_top":false,"comment_ctime":1714049730,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100541001,"comment_content":"è—¤é‡å…ˆç”Ÿè¿™ä¸ªä¾‹å­åº”è¯¥å±äºRAGçš„èŒƒç•´å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":388932,"user_name":"æ”¯é…ä»£ç ","can_delete":false,"product_type":"c1","uid":1460008,"ip_address":"åŒ—äº¬","ucode":"B8F1986CA9E740","user_header":"","comment_is_top":false,"comment_ctime":1711194370,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100541001,"comment_content":"ç”¨çš„æ˜¯azure-gptï¼ŒæŒ‰ç…§è¦æ±‚æ„é€ azureçš„AzureChatOpenAIè·‘èµ·æ¥æŠ¥é”™","like_count":0},{"had_liked":false,"id":388807,"user_name":"èŒ‚æ¾","can_delete":false,"product_type":"c1","uid":1052375,"ip_address":"å¹¿ä¸œ","ucode":"458A6FBC49C48E","user_header":"https://static001.geekbang.org/account/avatar/00/10/0e/d7/7d7579c1.jpg","comment_is_top":false,"comment_ctime":1710921642,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100541001,"comment_content":"import openai, os\nfrom llama_index.core import VectorStoreIndex, SimpleDirectoryReader, ServiceContext\n\nopenai.api_key = os.environ.get(&quot;OPENAI_API_KEY&quot;)\n\ndocuments = SimpleDirectoryReader(&#39;.&#47;data&#47;mr_fujino&#39;).load_data()\nindex = VectorStoreIndex.from_documents(documents)\nindex.storage_context.persist()\n\nfrom llama_index.core import StorageContext, load_index_from_storage\n# rebuild storage context\nstorage_context = StorageContext.from_defaults(persist_dir=&quot;.&#47;storage&quot;)\n# load index\nindex = load_index_from_storage(storage_context)\n\n\n#index = VectorStoreIndex.load_from_disk(&#39;index_mr_fujino.json&#39;)\nquery_engine = index.as_query_engine()\nresponse = query_engine.query(&quot;é²è¿…å…ˆç”Ÿåœ¨æ—¥æœ¬å­¦ä¹ åŒ»å­¦çš„è€å¸ˆæ˜¯è°ï¼Ÿ&quot;)\n#response = index.query(&quot;é²è¿…å…ˆç”Ÿåœ¨æ—¥æœ¬å­¦ä¹ åŒ»å­¦çš„è€å¸ˆæ˜¯è°ï¼Ÿ&quot;)\nprint(response)","like_count":0},{"had_liked":false,"id":387698,"user_name":"HXL","can_delete":false,"product_type":"c1","uid":2631455,"ip_address":"åŒ—äº¬","ucode":"97298EEC95BFCA","user_header":"https://static001.geekbang.org/account/avatar/00/28/27/1f/42059b0f.jpg","comment_is_top":false,"comment_ctime":1708436642,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100541001,"comment_content":"https:&#47;&#47;github.com&#47;run-llama&#47;LlamaIndexTS","like_count":0},{"had_liked":false,"id":386352,"user_name":"zengraoli","can_delete":false,"product_type":"c1","uid":3203583,"ip_address":"åŒ—äº¬","ucode":"3F5DBA914CB974","user_header":"https://static001.geekbang.org/account/avatar/00/30/e1/ff/5e538177.jpg","comment_is_top":false,"comment_ctime":1704639687,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":7,"product_id":100541001,"comment_content":"è€å¸ˆä½ å¥½ï¼Œè¯·é—®é‡Œé¢çš„.&#47;dataæ•°æ®ï¼Œåœ¨å“ªä¸‹è½½å•Šï¼Ÿ","like_count":0},{"had_liked":false,"id":383630,"user_name":"åŠç”Ÿç“œ","can_delete":false,"product_type":"c1","uid":3736112,"ip_address":"é‡åº†","ucode":"793B27442D1E7F","user_header":"https://static001.geekbang.org/account/avatar/00/39/02/30/2f77c3fa.jpg","comment_is_top":false,"comment_ctime":1699370356,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":7,"product_id":100541001,"comment_content":"from llama_index import PromptTemplate\nquery_str = &quot;é²è¿…å…ˆç”Ÿå»å“ªé‡Œå­¦çš„åŒ»å­¦ï¼Ÿ&quot;\nDEFAULT_TEXT_QA_PROMPT_TMPL = (\n    &quot;Context information is below. \\n&quot;\n    &quot;---------------------\\n&quot;\n    &quot;{context_str}&quot;\n    &quot;\\n---------------------\\n&quot;\n    &quot;Given the context information and not prior knowledge, &quot;\n    &quot;answer the question: {query_str}\\n&quot;\n)\nQA_PROMPT = PromptTemplate(DEFAULT_TEXT_QA_PROMPT_TMPL)\n\nresponse = query_engine.query(query_str, text_qa_template=QA_PROMPT)\nprint(response)\n\næŠ¥é”™ï¼šTypeError: query() got an unexpected keyword argument &#39;text_qa_template&#39;\næˆ‘æŒ‰ç…§å®˜æ–¹æ–‡æ¡£å°†QuestionAnswerPromptæ”¹æˆäº†PromptTemplateï¼Œä½†æ˜¯å°±ç®—ä¸æ”¹è¿˜æ˜¯æŠ¥åŒæ ·çš„é”™è¯¯","like_count":0},{"had_liked":false,"id":381246,"user_name":"softnuggets","can_delete":false,"product_type":"c1","uid":3705704,"ip_address":"ç¾å›½","ucode":"6E294390F7ACC8","user_header":"https://static001.geekbang.org/account/avatar/00/38/8b/68/7b985768.jpg","comment_is_top":false,"comment_ctime":1694901313,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":7,"product_id":100541001,"comment_content":"æœ€æ–°çš„ç‰ˆæœ¬0.8.28ï¼Œ é‡Œé¢çš„ä»£ç å¥½å¤šéƒ½è·‘ä¸äº†ï¼Œå¸Œæœ›æ›´æ–°ä¸€ä¸‹","like_count":0},{"had_liked":false,"id":378835,"user_name":"å°ç†æƒ³ã€‚","can_delete":false,"product_type":"c1","uid":2238528,"ip_address":"åŒ—äº¬","ucode":"EDC35A907570DB","user_header":"https://static001.geekbang.org/account/avatar/00/22/28/40/82d748e6.jpg","comment_is_top":false,"comment_ctime":1690864075,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":7,"product_id":100541001,"comment_content":"è€å¸ˆæˆ‘çš„OpenAIæ„Ÿè§‰æ€»ç»“çš„ä¹±ä¸ƒå…«ç³Ÿï¼Œè·Ÿä½ çš„ä¸ä¸€æ ·ï¼Œè¿™æ˜¯æ€ä¹ˆå›äº‹å‘¢ï¼Ÿä»£ç å’Œæ‚¨ä¸€æ ·ï¼Œç”¨çš„æ¨¡å‹ä¹Ÿä¸€æ ·\nOpenAIæ€»ç»“çš„å†…å®¹å¦‚ä¸‹:\né²è¿…å…ˆç”Ÿæ›¾ç»æ”¶è—è¿‡ä»–æ‰€æ”¹æ­£çš„è®²ä¹‰ï¼Œä½†åœ¨è¿å±…æ—¶ä¸å¹¸æ¯åäº†ä¸€å£ä¹¦ç®±ï¼Œå¤±å»äº†åŠç®±ä¹¦ï¼Œå…¶ä¸­ä¹ŸåŒ…æ‹¬äº†è®²ä¹‰ã€‚ä»–å°†é²è¿…å…ˆç”Ÿçš„ç…§ç‰‡æŒ‚åœ¨è‡ªå·±åŒ—äº¬å¯“å±…çš„ä¸œå¢™ä¸Šï¼Œæ¯å½“å¤œé—´ç–²å€¦æ—¶ï¼Œçœ‹åˆ°ä»–çš„é¢è²Œï¼Œä¾¿ä¼šå¢åŠ å‹‡æ°”ï¼Œç‚¹ä¸Šä¸€æ”¯çƒŸï¼Œç»§ç»­å†™æ–‡å­—ã€‚ä»–å°†è¿™ä»¶äº‹å‘ŠçŸ¥äº†è—¤é‡å…ˆç”Ÿï¼Œå¹¶ä¸”å’Œç†Ÿè¯†çš„åŒå­¦ä¸€èµ·å»è¯˜è´£å¹²äº‹æ‰˜è¾æ£€æŸ¥çš„æ— ç¤¼ï¼Œæœ€ç»ˆå°†åŒ¿åä¿¡é€€è¿˜äº†ä»–ä»¬ã€‚ä»–å‚è§‚äº†æªæ¯™ä¸­å›½äººçš„å‘½è¿ï¼Œå¹¶å†³å®šä¸å­¦åŒ»å­¦ï¼Œç¦»å¼€ä»™å°ã€‚","like_count":0},{"had_liked":false,"id":378828,"user_name":"å°ç†æƒ³ã€‚","can_delete":false,"product_type":"c1","uid":2238528,"ip_address":"åŒ—äº¬","ucode":"EDC35A907570DB","user_header":"https://static001.geekbang.org/account/avatar/00/22/28/40/82d748e6.jpg","comment_is_top":false,"comment_ctime":1690855303,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":7,"product_id":100541001,"comment_content":"0.6.5 ç‰ˆæœ¬æ‰§è¡ŒæˆåŠŸï¼Œä»£ç å¦‚ä¸‹ï¼š\n# ç”Ÿæˆindexç´¢å¼•å¤„ç†\n!pip install llama-index\n!pip install langchain;\n!pip install openai;\nimport openai, os\nfrom llama_index import GPTVectorStoreIndex, SimpleDirectoryReader\n\nos.environ[&quot;OPENAI_API_KEY&quot;] = &quot;&quot;\nopenai.api_key = os.environ.get(&quot;OPENAI_API_KEY&quot;)\n#openai_api_key =&#39;&#39;\n# ä»æŒ‡å®šç›®å½•åŠ è½½æ•°æ®\ndocuments=SimpleDirectoryReader(&#39;.&#47;data&#39;).load_data()\n# æ˜¯ä¸€ä¸ªç”¨äºæ–‡æœ¬å‘é‡ç´¢å¼•çš„ç±»ï¼Œå®ƒç”¨äºå¿«é€Ÿæœç´¢å’Œæ£€ç´¢ç›¸ä¼¼çš„æ–‡æœ¬ï¼Œå°†æ–‡æœ¬æ•°æ®è½¬æ¢æ–‡æ¡£\nindex=GPTVectorStoreIndex.from_documents(documents)\n\n# è®¾ç½®ç´¢å¼•æ ‡è¯†ç¬¦\nindex.set_index_id(&quot;index_mr_fujino&quot;)\n# å°†ç´¢å¼•æ•°æ®è¿›è¡ŒæŒä¹…åŒ–å­˜å‚¨,ç”Ÿæˆä¸åŒçš„jsonæ–‡ä»¶\nindex.storage_context.persist(&#39;.&#47;storage&#39;)\n\n# æŸ¥è¯¢é—®é¢˜\nimport openai, os\nfrom llama_index import StorageContext,load_index_from_storage\n\n# é‡å»ºå­˜å‚¨ä¸Šä¸‹æ–‡\nstorage_context=StorageContext.from_defaults(persist_dir=&#39;.&#47;storage&#39;)\n# åŠ è½½æ ‡è¯†ç¬¦ä¸ºindex_mr_fujinoçš„ç´¢å¼•\nindex=load_index_from_storage(storage_context,index_id=&quot;index_mr_fujino&quot;)\n\n# å°†ä¹‹å‰åŠ è½½çš„ç´¢å¼•å¯¹è±¡è½¬æ¢ä¸ºä¸€ä¸ªæŸ¥è¯¢å¼•æ“å¯¹è±¡ï¼Œå¹¶æŒ‡å®šäº†å“åº”æ¨¡å¼ä¸º&quot;tree_summarize&quot;\nquery_engine=index.as_query_engine(response_mode=&quot;tree_summarize&quot;);\n# æœç´¢é—®é¢˜\nresponse=query_engine.query(&quot;æ ¹æ®ä¸Šä¸‹æ–‡å†…å®¹ï¼Œå‘Šè¯‰æˆ‘é²è¿…å…ˆç”Ÿåœ¨æ—¥æœ¬å­¦åŒ»çš„è€å¸ˆæ˜¯è°?&quot;)\nprint(response)","like_count":0},{"had_liked":false,"id":378427,"user_name":"AIæ‚¦åˆ›","can_delete":false,"product_type":"c1","uid":1525309,"ip_address":"ç¦å»º","ucode":"D1007711CB0A79","user_header":"https://static001.geekbang.org/account/avatar/00/17/46/3d/55653953.jpg","comment_is_top":false,"comment_ctime":1690218447,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":7,"product_id":100541001,"comment_content":"è€å¸ˆèƒ½ä¸èƒ½å‡ºä¸€äº›æˆ–è€…åŠ é¤ä¸€äº›åŸºäºå…¬å¸çŸ¥è¯†åº“æˆ–è€…æ•°æ®åº“å¼€å‘çš„æ•™ç¨‹ï¼Ÿchatgpt+ç§æœ‰æ•°æ®å˜æˆå®¢æœæˆ–è€…aiåŠ©ç†ã€‚å…¬å¸ä¸‹è¾¾çš„æ–°éœ€æ±‚ğŸ˜­","like_count":0,"discussions":[{"author":{"id":1275377,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/9wNL7qwjpZ1NQ6VIVNsZDyJrtkhUW5e7rpqMgR1qTsouamibLZC1oOv445jVUg1BOIJib4cHiaPGKBwrskyXn8xWw/132","nickname":"æ²¡è§’èœ—ç‰›","note":"","ucode":"3AF5466D0D3E08","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":624198,"discussion_content":"è¿™ä¸€èŠ‚è®²çš„ä¸å°±æ˜¯ä½ çš„é—®é¢˜å—\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1690289334,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":377657,"user_name":"Arnold","can_delete":false,"product_type":"c1","uid":1454782,"ip_address":"å¹¿ä¸œ","ucode":"F036D2FCFF1331","user_header":"https://static001.geekbang.org/account/avatar/00/16/32/be/25825dde.jpg","comment_is_top":false,"comment_ctime":1688964734,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":7,"product_id":100541001,"comment_content":"&quot;å…¶å®æ˜¯ä¸€ä¸ªåŸºäº OCR æ‰«æçš„æ¨¡å‹ Donut&quot; è€å¸ˆï¼Œæˆ‘å¯¹äºè¿™ä¸ªæè¿°æœ‰ç‚¹ç–‘é—®ï¼šä»¥ä¸‹æ¨¡å‹æè¿°çš„æ˜¯OCR-freeçš„\n\nDonut model fine-tuned on CORD. It was introduced in the paper OCR-free Document Understanding Transformer by Geewok et al. and first released in this repository.\n\nDisclaimer: The team releasing Donut did not write a model card for this model so this model card has been written by the Hugging Face team.","like_count":0},{"had_liked":false,"id":377656,"user_name":"é›¨é›ªé£éœ","can_delete":false,"product_type":"c1","uid":1529164,"ip_address":"å¹¿ä¸œ","ucode":"5F8BB1F242DA1C","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/9Fd7IIzXDA9Gw0zBOIv66ZEDFmNwP1VcsQjcPztEATGvtnaiavrHoAH68tYjJ63BlfQh2qXSvEJjdmoag5eR17Q/132","comment_is_top":false,"comment_ctime":1688961056,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":7,"product_id":100541001,"comment_content":"è€å¸ˆå¥½\n\nfrom llama_index import SimpleDirectoryReader, GPTVectorStoreIndex\nfrom llama_index.readers.file.base import DEFAULT_FILE_EXTRACTOR, ImageParser\nfrom llama_index.response.notebook_utils import display_response, display_image\nfrom llama_index.indices.query.query_transform.base import ImageOutputQueryTransform\n\nimage_parser = ImageParser(keep_image=True, parse_text=True)\nfile_extractor = DEFAULT_FILE_EXTRACTOR\nfile_extractor.update(\n{\n    &quot;.jpg&quot;: image_parser,\n    &quot;.png&quot;: image_parser,\n    &quot;.jpeg&quot;: image_parser,\n})\n\n# NOTE: we add filename as metadata for all documents\nfilename_fn = lambda filename: {&#39;file_name&#39;: filename}\n\ninput_dir = &quot;&#47;content&#47;index&#47;receipts&quot;\n\nreceipt_reader = SimpleDirectoryReader(\n    input_dir=input_dir,\n    file_extractor=file_extractor,\n    file_metadata=filename_fn,\n)\nreceipt_documents = receipt_reader.load_data()\n\næ‰§è¡Œè¿™æ®µä»£ç æ—¶å€™æŠ¥é”™ï¼š\nValueError                                Traceback (most recent call last)\n&lt;ipython-input-24-53714316bd96&gt; in &lt;cell line: 25&gt;()\n     23     file_metadata=filename_fn,\n     24 )\n---&gt; 25 receipt_documents = receipt_reader.load_data()\n\n&#47;usr&#47;local&#47;lib&#47;python3.10&#47;dist-packages&#47;transformers&#47;tokenization_utils_fast.py in __init__(self, *args, **kwargs)\n    100 \n    101         if from_slow and slow_tokenizer is None and self.slow_tokenizer_class is None:\n--&gt; 102             raise ValueError(\n    103                 &quot;Cannot instantiate this tokenizer from a slow version. If it&#39;s based on sentencepiece, make sure you &quot;\n    104                 &quot;have sentencepiece installed.&quot;\n\nValueError: Cannot instantiate this tokenizer from a slow version. If it&#39;s based on sentencepiece, make sure you have sentencepiece installed.\n\næ‰§è¡Œ!pip install sentencepieceåè¿˜æ˜¯æ²¡æœ‰è§£å†³ï¼Œè¯·é—®æ˜¯ä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":377567,"user_name":"Alex","can_delete":false,"product_type":"c1","uid":1121921,"ip_address":"ä¸Šæµ·","ucode":"FE26BE695F7396","user_header":"https://static001.geekbang.org/account/avatar/00/11/1e/81/e843861f.jpg","comment_is_top":false,"comment_ctime":1688720312,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":7,"product_id":100541001,"comment_content":"è€å¸ˆè¯·æ•™ä¸€ä¸‹ï¼Œæ‚¨æåˆ°åœ¨æœç´¢è¯¢é—®çš„é—®é¢˜æœ€ç›¸å…³çš„è¯­æ–™æ—¶ï¼Œæ—¢å¯ä»¥ç”¨ä¼ ç»Ÿçš„åŸºäºå…³é”®è¯æœç´¢çš„æŠ€æœ¯ï¼Œä¹Ÿå¯ä»¥ç”¨ Embedding çš„ç›¸ä¼¼åº¦è¿›è¡Œè¯­ä¹‰æœç´¢çš„æŠ€æœ¯ã€‚ èƒ½å¦ç®€å•æ¯”è¾ƒä¸€ä¸‹ï¼Œä¼ ç»Ÿçš„full-text searchï¼Œå’ŒåŸºäºembedding çš„ç›¸ä¼¼åº¦è¯­ä¹‰æœç´¢ï¼Œé’ˆå¯¹äºå½“å‰åœºæ™¯ï¼Œå„æœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹ï¼Ÿ ä»¥åŠä¸ºä»€ä¹ˆæœ€è¿‘vector storeç‰¹åˆ«çš„ç«çƒ­ï¼Ÿ","like_count":0},{"had_liked":false,"id":377254,"user_name":"J","can_delete":false,"product_type":"c1","uid":1473670,"ip_address":"å››å·","ucode":"421177EBFAF7F7","user_header":"","comment_is_top":false,"comment_ctime":1688141827,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":7,"product_id":100541001,"comment_content":"è¿™ç§promptçš„æ–¹å¼ï¼Œæ˜¯ä¸æ˜¯åˆå›åˆ°äº†â€œäººå·¥â€è€Œéâ€œæ™ºèƒ½â€çš„æ¨¡å¼ï¼Ÿ\næ„Ÿè§‰ç´¢å¼•æœç´¢å°±æ˜¯ä¼ ç»Ÿçš„æ–¹å¼ï¼ŒLLMåªæ˜¯ç»„è£…æˆè‡ªç„¶è¯­è¨€ï¼Œpromptæ„Ÿè§‰ä¹Ÿéå¸¸ç„å­¦","like_count":0},{"had_liked":false,"id":376987,"user_name":"ç¥æ¯“é€é¥","can_delete":false,"product_type":"c1","uid":2147220,"ip_address":"ä¸Šæµ·","ucode":"83351CB18B190E","user_header":"https://static001.geekbang.org/account/avatar/00/20/c3/94/e89ebc50.jpg","comment_is_top":false,"comment_ctime":1687791214,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":8,"product_id":100541001,"comment_content":"11ç« å·²ç»çœ‹åˆ°æ¨èçš„å¼€æºé­”æ€§äº†","like_count":0},{"had_liked":false,"id":376984,"user_name":"ç¥æ¯“é€é¥","can_delete":false,"product_type":"c1","uid":2147220,"ip_address":"ä¸Šæµ·","ucode":"83351CB18B190E","user_header":"https://static001.geekbang.org/account/avatar/00/20/c3/94/e89ebc50.jpg","comment_is_top":false,"comment_ctime":1687790873,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":8,"product_id":100541001,"comment_content":"è¿™ç¯‡æ–‡ç« éå¸¸æ£’","like_count":0},{"had_liked":false,"id":376445,"user_name":"Penguin Shi","can_delete":false,"product_type":"c1","uid":3646806,"ip_address":"ä¼Šæœ—","ucode":"477A24D7ECE09A","user_header":"https://static001.geekbang.org/account/avatar/00/37/a5/56/b3cf71a9.jpg","comment_is_top":false,"comment_ctime":1686819292,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":8,"product_id":100541001,"comment_content":"query_engine = index.as_query_engine()\nquery_engine = list_index.as_query_engine()\nä¸¤ç§å…¨éƒ¨éƒ½æŠ¥é”™ã€‚è¿è¡Œä¸äº†ä»£ç äº†ã€‚é€€å›5.27ç‰ˆæœ¬ä¹Ÿä¸è¡Œ","like_count":0,"discussions":[{"author":{"id":2238528,"avatar":"https://static001.geekbang.org/account/avatar/00/22/28/40/82d748e6.jpg","nickname":"å°ç†æƒ³ã€‚","note":"","ucode":"EDC35A907570DB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":624638,"discussion_content":"æˆ‘ä¹Ÿæ˜¯ï¼Œæœ‰è§£å†³åŠæ³•å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1690791982,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":376359,"user_name":"Eric","can_delete":false,"product_type":"c1","uid":1057012,"ip_address":"ç¾å›½","ucode":"F8247828C6D498","user_header":"https://static001.geekbang.org/account/avatar/00/10/20/f4/9112ddb5.jpg","comment_is_top":false,"comment_ctime":1686732034,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":8,"product_id":100541001,"comment_content":"å¦‚æœä½¿ç”¨llama-index 0.6.23, åœ¨å¯¹æ–‡ç« è¿›è¡Œå°ç»“é‡Œé¢ï¼Œéœ€è¦åšä»¥ä¸‹ä¿®æ”¹ï¼š\n\nlist_index = GPTListIndex(nodes=nodes, service_context=service_context)\n\nquery_engine = list_index.as_query_engine(\n    response_mode=&#39;tree_summarize&#39;,\n    verbose=True,)\n\nresponse = query_engine.query(&quot;ä¸‹é¢é²è¿…å…ˆç”Ÿä»¥ç¬¬ä¸€äººç§°â€˜æˆ‘â€™å†™çš„å†…å®¹ï¼Œè¯·ä½ ç”¨ä¸­æ–‡æ€»ç»“ä¸€ä¸‹:&quot;)\nprint(response)\n","like_count":0},{"had_liked":false,"id":376144,"user_name":"Tristana","can_delete":false,"product_type":"c1","uid":1006227,"ip_address":"æ±Ÿè‹","ucode":"FC47CF6A5868D2","user_header":"https://static001.geekbang.org/account/avatar/00/0f/5a/93/e081b4de.jpg","comment_is_top":false,"comment_ctime":1686383091,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":8,"product_id":100541001,"comment_content":"è€å¸ˆï¼Œä½ çš„è¯¾ç¨‹æœ‰å®Œæ•´ç¤ºä¾‹ä»£ç å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":375712,"user_name":"Phoenix","can_delete":false,"product_type":"c1","uid":3628743,"ip_address":"å¹¿ä¸œ","ucode":"9683508065CFB2","user_header":"https://static001.geekbang.org/account/avatar/00/37/5e/c7/a8fc707c.jpg","comment_is_top":false,"comment_ctime":1685894041,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":8,"product_id":100541001,"comment_content":"æŒ‰ä¾‹å­ï¼Œä¸è¿‡ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬çš„ llama_indexï¼Œè¿”å›â€œé²è¿…å…ˆç”Ÿåœ¨æ—¥æœ¬å­¦ä¹ åŒ»å­¦çš„è€å¸ˆä¸æ˜ç¡®ã€‚â€\nå…·ä½“ä»£ç å¦‚ä¸‹ï¼š\nimport os\nos.environ[&quot;OPENAI_API_KEY&quot;] = &#39;xxx&#39;\n\nfrom llama_index import GPTVectorStoreIndex, SimpleDirectoryReader\n# file ç›®å½•ä¸‹å­˜æ”¾æ–‡ç«  txt\ndocuments = SimpleDirectoryReader(&#39;.&#47;file&#39;).load_data()\nindex = GPTVectorStoreIndex.from_documents(documents)\nindex.storage_context.persist(&quot;.&#47;storage&quot;)\n\n\nfrom llama_index import StorageContext, load_index_from_storage\n\n# rebuild storage context\nstorage_context = StorageContext.from_defaults(persist_dir=&#39;.&#47;storage&#39;)\n# load index\nindex = load_index_from_storage(storage_context)\n\nquery_engine = index.as_query_engine()\nresponse = query_engine.query(&quot;é²è¿…å…ˆç”Ÿåœ¨æ—¥æœ¬å­¦ä¹ åŒ»å­¦çš„è€å¸ˆæ˜¯è°?&quot;)\nprint(response)","like_count":0},{"had_liked":false,"id":375654,"user_name":"Chris","can_delete":false,"product_type":"c1","uid":1689346,"ip_address":"æµ™æ±Ÿ","ucode":"50A51AE2110A7A","user_header":"https://static001.geekbang.org/account/avatar/00/19/c7/02/8346ebf6.jpg","comment_is_top":false,"comment_ctime":1685787776,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":8,"product_id":100541001,"comment_content":"llama_indexæ˜¯ç”¨openAIçš„GPT-3text-davinci-003æ¥åšçš„ç´¢å¼•å—, æ‰€ä»¥ä»–åªæ˜¯å°è£…äº†ä¸€å¥—æ–‡æœ¬åˆ†ç‰‡ç´¢å¼•åŠ æŸ¥è¯¢çš„èƒ½åŠ›,å¯ä»¥è¿™æ ·ç†è§£å—","like_count":0},{"had_liked":false,"id":375496,"user_name":"ç‹¸çŒ«é…±","can_delete":false,"product_type":"c1","uid":1512654,"ip_address":"å¹¿ä¸œ","ucode":"3408B1CE888196","user_header":"https://static001.geekbang.org/account/avatar/00/17/14/ce/bdb774b5.jpg","comment_is_top":false,"comment_ctime":1685537288,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":8,"product_id":100541001,"comment_content":"æƒ³é—®ä¸€ä¸‹è€å¸ˆï¼Œè¿™ç§æ–¹å¼æ˜¯ä¸æ˜¯åªé€‚åˆæ•°æ®é‡å°çš„èµ„æ–™åº“ï¼Ÿæœ‰æ²¡æœ‰ä¸€ä¸ªé€‚ç”¨çš„å¤§å°èŒƒå›´å‘¢ï¼Ÿå¦å¤–æ¯”å¦‚æˆ‘æƒ³åšæŸä¸ªä¸“æœ‰é¢†åŸŸçš„å¯¹è¯æœºå™¨äººï¼Œæ¯”å¦‚åŒ–å­¦ç ”ç©¶ï¼Œé‚£æˆ‘éœ€è¦æŠŠæ‰€æœ‰èƒ½æ‰¾åˆ°çš„åŒ–å­¦ç›¸å…³çš„è®ºæ–‡ã€æ•™æç­‰ç›¸å…³èµ„æ–™å’Œgptç»“åˆï¼ŒLlama Indexçš„æ–¹å¼æ˜¯å¦è¿˜é€‚ç”¨å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":375250,"user_name":"å†œæ°‘å›­ä¸","can_delete":false,"product_type":"c1","uid":1155913,"ip_address":"ç«‹é™¶å®›","ucode":"6A91EBBC9DCE6C","user_header":"https://static001.geekbang.org/account/avatar/00/11/a3/49/4a488f4c.jpg","comment_is_top":false,"comment_ctime":1685142981,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":8,"product_id":100541001,"comment_content":"è¯·é—®è€å¸ˆä¸¤ä¸ªé—®é¢˜ï¼š1.å¦‚æœæœ¬åœ°çŸ¥è¯†åº“æ˜¯è‹±æ–‡çš„ï¼Œèƒ½ç”¨ä¸­æ–‡æ£€ç´¢åˆ°å—ï¼Ÿ2. å¦‚æœæˆ‘æœ‰å‡ æœ¬ä¹¦å»ºç«‹äº†æœ¬åœ°çŸ¥è¯†åº“ï¼Œä½†æ˜¯å†…å®¹æœ‰é‡å¤çš„ï¼Œè¿™æ—¶å€™ä¼šå¾—å‡ºä»€ä¹ˆæ ·çš„ç»“æœï¼Ÿ","like_count":0},{"had_liked":false,"id":374976,"user_name":"Geek_378f83","can_delete":false,"product_type":"c1","uid":3196784,"ip_address":"ç¾å›½","ucode":"AD2B400EED436A","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/z3nIITkhzRj9WApibhic524lQSJmqUCerpuqpntEe06LE3lRGKr6rGwPpPJtZ5Xj0NBPyvTatKtIk0hfyAnl9Hsg/132","comment_is_top":false,"comment_ctime":1684745349,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":8,"product_id":100541001,"comment_content":"è¯·æ•™ï¼šè¿è¡Œä»£ç æ—¶ï¼ŒæŠ¥é”™ï¼Œæœç´¢å’Œé—®GPTä¹Ÿæ²¡è§£å†³:\nImportError                               Traceback (most recent call last)\n&lt;ipython-input-16-aefa1f0d78bc&gt; in &lt;cell line: 2&gt;()\n      1 import openai, os\n----&gt; 2 from llama_index import GPTSimpleVectorIndex, SimpleDirectoryReader, ServiceContext\n      3 \n      4 openai.api_key = os.environ.get(&quot;OPENAI_API_KEY&quot;)\n      5 \n\nImportError: cannot import name &#39;GPTSimpleVectorIndex&#39; from &#39;llama_index&#39; (&#47;usr&#47;local&#47;lib&#47;python3.10&#47;dist-packages&#47;llama_index&#47;__init__.py)\n\n---------------------------------------------------------------------------\nNOTE: If your import is failing due to a missing package, you can\nmanually install dependencies using either !pip or !apt.\n\nTo view examples of installing some common dependencies, click the\n&quot;Open Examples&quot; button below.","like_count":0},{"had_liked":false,"id":373592,"user_name":"aoe","can_delete":false,"product_type":"c1","uid":1121758,"ip_address":"æµ™æ±Ÿ","ucode":"1C6201EDB4E954","user_header":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","comment_is_top":false,"comment_ctime":1682732749,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":9,"product_id":100541001,"comment_content":"çœ‹åˆ°è¿™é‡Œï¼Œæˆ‘ç¡®å®šäº†ä½¿ç”¨ Python è°ƒç”¨ open ai çš„api æ›´å®¹æ˜“ï¼Œå› ä¸ºå¯ä»¥æ–¹ä¾¿çš„ä½¿ç”¨å„ç§å¼ºå¤§çš„ç±»åº“ï¼","like_count":0},{"had_liked":false,"id":373071,"user_name":"å°é»‘","can_delete":false,"product_type":"c1","uid":1053799,"ip_address":"åŒ—äº¬","ucode":"1035F47D74CA99","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJEjHEWycVre5ZRtE6M8KaWyu1GKA0KOQsrrlm0ZdZf9EIljQ8P19uZdKS2uINwnzCibnv2iaRfmIPw/132","comment_is_top":false,"comment_ctime":1681985721,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":9,"product_id":100541001,"comment_content":"INFO:llama_index.token_counter.token_counter:&gt; [query] Total LLM token usage: 4043 tokens\nINFO:llama_index.token_counter.token_counter:&gt; [query] Total embedding token usage: 58 tokens","like_count":0},{"had_liked":false,"id":372077,"user_name":"Ethan New","can_delete":false,"product_type":"c1","uid":2063962,"ip_address":"æµ™æ±Ÿ","ucode":"9CA2EF39E58030","user_header":"https://static001.geekbang.org/account/avatar/00/1f/7e/5a/da39f489.jpg","comment_is_top":false,"comment_ctime":1680686891,"is_pvip":true,"replies":null,"discussion_count":0,"race_medal":4,"score":9,"product_id":100541001,"comment_content":"å­¦ä¹ æ‰“å¡","like_count":0},{"had_liked":false,"id":372003,"user_name":"ç ç©†å†™ç ","can_delete":false,"product_type":"c1","uid":1325661,"ip_address":"æ±Ÿè‹","ucode":"A6223A6B713109","user_header":"https://static001.geekbang.org/account/avatar/00/14/3a/5d/c5dc789a.jpg","comment_is_top":false,"comment_ctime":1680592664,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":9,"product_id":100541001,"comment_content":"éš¾ï¼Œopenaiçš„è´¦å·åˆ°æœŸäº†","like_count":0,"discussions":[{"author":{"id":2881491,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLCcX9KWzw31fOMnF9oHJfDic3Rljqic9pWVhsMticoKibMbzJurzpGrGEo33bFGodgWZf0fnt9VarfLg/132","nickname":"é¢æ¡å“¥å“¥","note":"","ucode":"BFA1EA3E0407FC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":613270,"discussion_content":"æˆ‘çš„ä¹Ÿæ˜¯ï¼Œåé¢å’‹å¼„å“¦ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1681222152,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"é‡åº†","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":371981,"user_name":"John","can_delete":false,"product_type":"c1","uid":1020861,"ip_address":"åŠ æ‹¿å¤§","ucode":"E4ADF8488953FB","user_header":"https://static001.geekbang.org/account/avatar/00/0f/93/bd/f3977ebb.jpg","comment_is_top":false,"comment_ctime":1680579244,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":9,"product_id":100541001,"comment_content":"ç»ˆäºæ˜ç™½ä¸ºä»€ä¹ˆè¦å…ˆé€‰modeläº† åŸæ¥æ˜¯ä¸ºäº†ç»™é•¿æ–‡åˆ†æ®µ å¤šè°¢","like_count":0}]}