{"id":84771,"title":"59 | 实战FaceNet人脸识别模型","content":"<h2>课件及源码下载地址：</h2><p><a href=\"https://gitee.com/geektime-geekbang/tensorflow-101/tree/master/beginners\">https://gitee.com/geektime-geekbang/tensorflow-101/tree/master/beginners</a></p>","comments":[{"had_liked":false,"id":78858,"user_name":"小谭谭","can_delete":false,"product_type":"c3","uid":1463507,"ip_address":"","ucode":"4222AF2E875CC3","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/ibpASCYk5eF3NicUDFRicTDFVDnFXicNU1U7lgvo0VHhaJ46qWWOU3oLTJiaeNGNDBibPNbkanQicVfhHvgqQ0YJDHwXA/132","comment_is_top":false,"comment_ctime":1553259701,"is_pvip":false,"replies":[{"id":36070,"content":"输出一下 img，看看是不是不是咱们一开始的人脸图像了？","user_name":"作者回复","user_name_real":"彭靖田","uid":1067283,"ctime":1559535153,"ip_address":"","comment_id":78858,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100023001,"comment_content":"TypeError                                 Traceback (most recent call last)\n&lt;ipython-input-23-53972d9633c8&gt; in &lt;module&gt;()\n      6     img = align_image(img)\n      7     # 数据规范化\n----&gt; 8     img = (img&#47;255. ).astype(np.float32)\n      9     # 人脸特征向量\n     10     embedded[i] = nn4_small2_pretrained.predict(np.expand_dims(img, axis=0))[0]\n\nTypeError: unsupported operand type(s) for &#47;: &#39;NoneType&#39; and &#39;float\n\n老师，有错呀，咋办。人脸识别的数据规范化的地方","like_count":2,"discussions":[{"author":{"id":1067283,"avatar":"https://static001.geekbang.org/account/avatar/00/10/49/13/51b1fe81.jpg","nickname":"彭靖田","note":"","ucode":"D3F1C281F38390","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":444261,"discussion_content":"输出一下 img，看看是不是不是咱们一开始的人脸图像了？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1559535153,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1719677,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/3d/7d/d61d344c.jpg","nickname":"被梦想通缉的树袋熊","note":"","ucode":"38E73B375F66FE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":195824,"discussion_content":"原因是bb.width少了括号，应该是bb.width(),其他参数也是同样的检查","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583313119,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":286834,"user_name":"华杉","can_delete":false,"product_type":"c3","uid":1085340,"ip_address":"","ucode":"F9CE26923F4B9C","user_header":"https://static001.geekbang.org/account/avatar/00/10/8f/9c/ef58929f.jpg","comment_is_top":false,"comment_ctime":1617622257,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100023001,"comment_content":"老师，请问你知道声纹的识别与分类，该用哪种网络么","like_count":0},{"had_liked":false,"id":166224,"user_name":"James-Pang","can_delete":false,"product_type":"c3","uid":1286950,"ip_address":"","ucode":"38301824145BFF","user_header":"https://static001.geekbang.org/account/avatar/00/13/a3/26/95354896.jpg","comment_is_top":false,"comment_ctime":1577418029,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":2,"product_id":100023001,"comment_content":"老师，win10下安装dlib总是报错，怎么解决？","like_count":0,"discussions":[{"author":{"id":1099704,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c7/b8/e47144e9.jpg","nickname":"do what you like","note":"","ucode":"B2A4D97125C914","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":391839,"discussion_content":"安装vs 2019 C++套件就解决了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630652848,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":161524,"user_name":"zhaobk","can_delete":false,"product_type":"c3","uid":1291596,"ip_address":"","ucode":"30BEE12D2CF020","user_header":"https://static001.geekbang.org/account/avatar/00/13/b5/4c/6b9528f8.jpg","comment_is_top":false,"comment_ctime":1576223488,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":2,"product_id":100023001,"comment_content":"老师您好，我在做练习的时候。这句 from align import AlignDlib 报错，提示ImportError: cannot import name &#39;AlignDlib&#39; from &#39;align&#39; \n我的环境是python3.7  , align也安装过了。请问是要安装openface才可以吗？还是说版本问题？新版本align已经没有AlignDlib了？","like_count":0,"discussions":[{"author":{"id":1719677,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/3d/7d/d61d344c.jpg","nickname":"被梦想通缉的树袋熊","note":"","ucode":"38E73B375F66FE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":195825,"discussion_content":"AlignDlib是一个.py文件中的类，你要把这个文件拖到项目目录下","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1583313163,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":101669,"user_name":"Ken","can_delete":false,"product_type":"c3","uid":1109228,"ip_address":"","ucode":"DE8E7AACEDEE76","user_header":"https://static001.geekbang.org/account/avatar/00/10/ec/ec/6ed1a360.jpg","comment_is_top":false,"comment_ctime":1559907741,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100023001,"comment_content":"csv格式的预训练模型转化成h5格式，是怎么做的呀？","like_count":0},{"had_liked":false,"id":95027,"user_name":"Yafei","can_delete":false,"product_type":"c3","uid":1233728,"ip_address":"","ucode":"BEA5B162DF2364","user_header":"https://static001.geekbang.org/account/avatar/00/12/d3/40/39d41615.jpg","comment_is_top":false,"comment_ctime":1557948552,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100023001,"comment_content":"def load_image(path):\n    img = cv2.imread(path, 1)\n    return img[...,::-1]\n\ndef load_image1(path):\n    img = cv2.imread(path)\n    return cv2.cvtColor(img, cv2.COLOR_BGR2RGB)\n\n这两种方式有啥区别吗？我用numpy.array_equal()去比较这两种方法加载的同一张图，返回True，但是在调用getLargestBoundingBox()时，上面两种方法返回的图确结果不一样。load_image()方法得到的图提示\n“Warning: Unsupported image type, must be 8bit gray or RGB image.” 而且没有得到相应的人脸bounding box. 真是费解，还望老师解答下。","like_count":0}]}