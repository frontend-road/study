{"id":446032,"title":"16ï½œå¤åˆæ•°æ®ç±»å‹ï¼šåŸç”Ÿmapç±»å‹çš„å®ç°æœºåˆ¶æ˜¯æ€æ ·çš„ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯Tony Baiã€‚</p><p>ä¸Šä¸€èŠ‚è¯¾ï¼Œæˆ‘ä»¬å­¦ä¹ äº†Goè¯­è¨€ä¸­æœ€å¸¸ç”¨çš„ä¸¤ä¸ªå¤åˆç±»å‹ï¼šæ•°ç»„ä¸åˆ‡ç‰‡ã€‚å®ƒä»¬ä»£è¡¨<strong>ä¸€ç»„è¿ç»­å­˜å‚¨çš„åŒæ„ç±»å‹å…ƒç´ é›†åˆã€‚</strong>ä¸åŒçš„æ˜¯ï¼Œæ•°ç»„çš„é•¿åº¦æ˜¯ç¡®å®šçš„ï¼Œè€Œåˆ‡ç‰‡ï¼Œæˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºä¸€ç§â€œåŠ¨æ€æ•°ç»„â€ï¼Œå®ƒçš„é•¿åº¦åœ¨è¿è¡Œæ—¶æ˜¯å¯å˜çš„ã€‚</p><p>è¿™ä¸€èŠ‚è¯¾ï¼Œæˆ‘ä»¬ä¼šç»§ç»­å‰é¢çš„è„‰ç»œï¼Œå­¦ä¹ å¦å¤–ä¸€ç§æ—¥å¸¸Goç¼–ç ä¸­æ¯”è¾ƒå¸¸ç”¨çš„å¤åˆç±»å‹ï¼Œè¿™ç§ç±»å‹å¯ä»¥è®©ä½ å°†ä¸€ä¸ªå€¼ï¼ˆValueï¼‰å”¯ä¸€å…³è”åˆ°ä¸€ä¸ªç‰¹å®šçš„é”®ï¼ˆKeyï¼‰ä¸Šï¼Œå¯ä»¥ç”¨äºå®ç°ç‰¹å®šé”®å€¼çš„å¿«é€ŸæŸ¥æ‰¾ä¸æ›´æ–°ï¼Œè¿™ä¸ªå¤åˆæ•°æ®ç±»å‹å°±æ˜¯ <strong>map</strong>ã€‚å¾ˆå¤šä¸­æ–‡Goç¼–ç¨‹è¯­è¨€ç±»æŠ€æœ¯ä¹¦ç±éƒ½ä¼šå°†å®ƒç¿»è¯‘ä¸ºæ˜ å°„ã€å“ˆå¸Œè¡¨æˆ–å­—å…¸ï¼Œä½†åœ¨æˆ‘çš„è¯¾ç¨‹ä¸­ï¼Œ<strong>ä¸ºäº†ä¿æŒåŸæ±åŸå‘³ï¼Œæˆ‘å°±ç›´æ¥ä½¿ç”¨å®ƒçš„è‹±æ–‡åï¼Œmap</strong>ã€‚</p><p>mapæ˜¯æˆ‘ä»¬ç»§åˆ‡ç‰‡ä¹‹åï¼Œå­¦åˆ°çš„ç¬¬äºŒä¸ªç”±Goç¼–è¯‘å™¨ä¸è¿è¡Œæ—¶è”åˆå®ç°çš„å¤åˆæ•°æ®ç±»å‹ï¼Œå®ƒæœ‰ç€å¤æ‚çš„å†…éƒ¨å®ç°ï¼Œä½†å´æä¾›äº†ååˆ†ç®€å•å‹å¥½çš„å¼€å‘è€…ä½¿ç”¨æ¥å£ã€‚è¿™ä¸€èŠ‚è¯¾ï¼Œæˆ‘å°†ä»mapç±»å‹çš„å®šä¹‰ï¼Œåˆ°å®ƒçš„ä½¿ç”¨ï¼Œå†åˆ°mapå†…éƒ¨å®ç°æœºåˆ¶ï¼Œç”±æµ…åˆ°æ·±åœ°è®©ä½ åƒé€mapç±»å‹ã€‚</p><h2>ä»€ä¹ˆæ˜¯mapç±»å‹ï¼Ÿ</h2><p>mapæ˜¯Goè¯­è¨€æä¾›çš„ä¸€ç§æŠ½è±¡æ•°æ®ç±»å‹ï¼Œå®ƒè¡¨ç¤ºä¸€ç»„æ— åºçš„é”®å€¼å¯¹ã€‚åœ¨åé¢çš„è®²è§£ä¸­ï¼Œæˆ‘ä»¬ä¼šç›´æ¥ä½¿ç”¨keyå’Œvalueåˆ†åˆ«ä»£è¡¨mapçš„é”®å’Œå€¼ã€‚è€Œä¸”ï¼Œmapé›†åˆä¸­æ¯ä¸ªkeyéƒ½æ˜¯å”¯ä¸€çš„ï¼š</p><!-- [[[read_end]]] --><p><img src=\"https://static001.geekbang.org/resource/image/f6/28/f6ac7392831455d3cf85f189a9dc9528.jpg?wh=1920x1047\" alt=\"å›¾ç‰‡\"></p><p>å’Œåˆ‡ç‰‡ç±»ä¼¼ï¼Œä½œä¸ºå¤åˆç±»å‹çš„mapï¼Œå®ƒåœ¨Goä¸­çš„ç±»å‹è¡¨ç¤ºä¹Ÿæ˜¯ç”±keyç±»å‹ä¸valueç±»å‹ç»„æˆçš„ï¼Œå°±åƒä¸‹é¢ä»£ç ï¼š</p><pre><code class=\"language-plain\">map[key_type]value_type\n</code></pre><p>keyä¸valueçš„ç±»å‹å¯ä»¥ç›¸åŒï¼Œä¹Ÿå¯ä»¥ä¸åŒï¼š</p><pre><code class=\"language-plain\">map[string]string // keyä¸valueå…ƒç´ çš„ç±»å‹ç›¸åŒ\nmap[int]string    // keyä¸valueå…ƒç´ çš„ç±»å‹ä¸åŒ\n</code></pre><p>å¦‚æœä¸¤ä¸ªmapç±»å‹çš„keyå…ƒç´ ç±»å‹ç›¸åŒï¼Œvalueå…ƒç´ ç±»å‹ä¹Ÿç›¸åŒï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥è¯´å®ƒä»¬æ˜¯åŒä¸€ä¸ªmapç±»å‹ï¼Œå¦åˆ™å°±æ˜¯ä¸åŒçš„mapç±»å‹ã€‚</p><p>è¿™é‡Œï¼Œæˆ‘ä»¬è¦æ³¨æ„ï¼Œmapç±»å‹å¯¹valueçš„ç±»å‹æ²¡æœ‰é™åˆ¶ï¼Œä½†æ˜¯å¯¹keyçš„ç±»å‹å´æœ‰ä¸¥æ ¼è¦æ±‚ï¼Œå› ä¸ºmapç±»å‹è¦ä¿è¯keyçš„å”¯ä¸€æ€§ã€‚Goè¯­è¨€ä¸­è¦æ±‚ï¼Œ<strong>keyçš„ç±»å‹å¿…é¡»æ”¯æŒâ€œ==â€å’Œâ€œ!=â€ä¸¤ç§æ¯”è¾ƒæ“ä½œç¬¦</strong>ã€‚</p><p>ä½†æ˜¯ï¼Œåœ¨Goè¯­è¨€ä¸­ï¼Œå‡½æ•°ç±»å‹ã€mapç±»å‹è‡ªèº«ï¼Œä»¥åŠåˆ‡ç‰‡åªæ”¯æŒä¸nilçš„æ¯”è¾ƒï¼Œè€Œä¸æ”¯æŒåŒç±»å‹ä¸¤ä¸ªå˜é‡çš„æ¯”è¾ƒã€‚å¦‚æœåƒä¸‹é¢ä»£ç è¿™æ ·ï¼Œè¿›è¡Œè¿™äº›ç±»å‹çš„æ¯”è¾ƒï¼ŒGoç¼–è¯‘å™¨å°†ä¼šæŠ¥é”™ï¼š</p><pre><code class=\"language-plain\">s1 := make([]int, 1)\ns2 := make([]int, 2)\nf1 := func() {}\nf2 := func() {}\nm1 := make(map[int]string)\nm2 := make(map[int]string)\nprintln(s1 == s2) // é”™è¯¯ï¼šinvalid operation: s1 == s2 (slice can only be compared to nil)\nprintln(f1 == f2) // é”™è¯¯ï¼šinvalid operation: f1 == f2 (func can only be compared to nil)\nprintln(m1 == m2) // é”™è¯¯ï¼šinvalid operation: m1 == m2 (map can only be compared to nil)\n</code></pre><p>å› æ­¤åœ¨è¿™é‡Œï¼Œä½ ä¸€å®šè¦æ³¨æ„ï¼š<strong>å‡½æ•°ç±»å‹ã€mapç±»å‹è‡ªèº«ï¼Œä»¥åŠåˆ‡ç‰‡ç±»å‹æ˜¯ä¸èƒ½ä½œä¸ºmapçš„keyç±»å‹çš„</strong>ã€‚</p><p>çŸ¥é“å¦‚ä½•è¡¨ç¤ºä¸€ä¸ªmapç±»å‹åï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•å£°æ˜å’Œåˆå§‹åŒ–ä¸€ä¸ªmapç±»å‹çš„å˜é‡ã€‚</p><h2>mapå˜é‡çš„å£°æ˜å’Œåˆå§‹åŒ–</h2><p>æˆ‘ä»¬å¯ä»¥è¿™æ ·å£°æ˜ä¸€ä¸ªmapå˜é‡ï¼š</p><pre><code class=\"language-plain\">var m map[string]int // ä¸€ä¸ªmap[string]intç±»å‹çš„å˜é‡\n</code></pre><p>å’Œåˆ‡ç‰‡ç±»å‹å˜é‡ä¸€æ ·ï¼Œå¦‚æœæˆ‘ä»¬æ²¡æœ‰æ˜¾å¼åœ°èµ‹äºˆmapå˜é‡åˆå€¼ï¼Œmapç±»å‹å˜é‡çš„é»˜è®¤å€¼ä¸ºnilã€‚</p><p>ä¸è¿‡åˆ‡ç‰‡å˜é‡å’Œmapå˜é‡åœ¨è¿™é‡Œä¹Ÿæœ‰äº›ä¸åŒã€‚åˆå€¼ä¸ºé›¶å€¼nilçš„åˆ‡ç‰‡ç±»å‹å˜é‡ï¼Œå¯ä»¥å€ŸåŠ©å†…ç½®çš„appendçš„å‡½æ•°è¿›è¡Œæ“ä½œï¼Œè¿™ç§åœ¨Goè¯­è¨€ä¸­è¢«ç§°ä¸ºâ€œ<strong>é›¶å€¼å¯ç”¨</strong>â€ã€‚å®šä¹‰â€œé›¶å€¼å¯ç”¨â€çš„ç±»å‹ï¼Œå¯ä»¥æå‡æˆ‘ä»¬å¼€å‘è€…çš„ä½¿ç”¨ä½“éªŒï¼Œæˆ‘ä»¬ä¸ç”¨å†æ‹…å¿ƒå˜é‡çš„åˆå§‹çŠ¶æ€æ˜¯å¦æœ‰æ•ˆã€‚</p><p><strong>ä½†mapç±»å‹ï¼Œå› ä¸ºå®ƒå†…éƒ¨å®ç°çš„å¤æ‚æ€§ï¼Œæ— æ³•â€œé›¶å€¼å¯ç”¨â€</strong>ã€‚æ‰€ä»¥ï¼Œå¦‚æœæˆ‘ä»¬å¯¹å¤„äºé›¶å€¼çŠ¶æ€çš„mapå˜é‡ç›´æ¥è¿›è¡Œæ“ä½œï¼Œå°±ä¼šå¯¼è‡´è¿è¡Œæ—¶å¼‚å¸¸ï¼ˆpanicï¼‰ï¼Œä»è€Œå¯¼è‡´ç¨‹åºè¿›ç¨‹å¼‚å¸¸é€€å‡ºï¼š</p><pre><code class=\"language-plain\">var m map[string]int // m = nil\nm[\"key\"] = 1         // å‘ç”Ÿè¿è¡Œæ—¶å¼‚å¸¸ï¼španic: assignment to entry in nil map\n</code></pre><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬å¿…é¡»å¯¹mapç±»å‹å˜é‡è¿›è¡Œæ˜¾å¼åˆå§‹åŒ–åæ‰èƒ½ä½¿ç”¨ã€‚é‚£æˆ‘ä»¬æ€æ ·å¯¹mapç±»å‹å˜é‡è¿›è¡Œåˆå§‹åŒ–å‘¢ï¼Ÿ</p><p>å’Œåˆ‡ç‰‡ä¸€æ ·ï¼Œä¸ºmapç±»å‹å˜é‡æ˜¾å¼èµ‹å€¼æœ‰ä¸¤ç§æ–¹å¼ï¼šä¸€ç§æ˜¯ä½¿ç”¨å¤åˆå­—é¢å€¼ï¼›å¦å¤–ä¸€ç§æ˜¯ä½¿ç”¨makeè¿™ä¸ªé¢„å£°æ˜çš„å†…ç½®å‡½æ•°ã€‚</p><p><strong>æ–¹æ³•ä¸€ï¼šä½¿ç”¨å¤åˆå­—é¢å€¼åˆå§‹åŒ–mapç±»å‹å˜é‡ã€‚</strong></p><p>æˆ‘ä»¬å…ˆæ¥çœ‹è¿™å¥ä»£ç ï¼š</p><pre><code class=\"language-plain\">m := map[int]string{}\n</code></pre><p>è¿™é‡Œï¼Œæˆ‘ä»¬æ˜¾å¼åˆå§‹åŒ–äº†mapç±»å‹å˜é‡mã€‚ä¸è¿‡ï¼Œä½ è¦æ³¨æ„ï¼Œè™½ç„¶æ­¤æ—¶mapç±»å‹å˜é‡mä¸­æ²¡æœ‰ä»»ä½•é”®å€¼å¯¹ï¼Œä½†å˜é‡mä¹Ÿä¸ç­‰åŒäºåˆå€¼ä¸ºnilçš„mapå˜é‡ã€‚è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å¯¹mè¿›è¡Œé”®å€¼å¯¹çš„æ’å…¥æ“ä½œï¼Œä¸ä¼šå¼•å‘è¿è¡Œæ—¶å¼‚å¸¸ã€‚</p><p>è¿™é‡Œæˆ‘ä»¬å†çœ‹çœ‹æ€ä¹ˆé€šè¿‡ç¨å¾®å¤æ‚ä¸€äº›çš„å¤åˆå­—é¢å€¼ï¼Œå¯¹mapç±»å‹å˜é‡è¿›è¡Œåˆå§‹åŒ–ï¼š</p><pre><code class=\"language-plain\">m1 := map[int][]string{\n    1: []string{\"val1_1\", \"val1_2\"},\n    3: []string{\"val3_1\", \"val3_2\", \"val3_3\"},\n    7: []string{\"val7_1\"},\n}\n\ntype Position struct { \n    x float64 \n    y float64\n}\n\nm2 := map[Position]string{\n    Position{29.935523, 52.568915}: \"school\",\n    Position{25.352594, 113.304361}: \"shopping-mall\",\n    Position{73.224455, 111.804306}: \"hospital\",\n}\n</code></pre><p>æˆ‘ä»¬çœ‹åˆ°ï¼Œä¸Šé¢ä»£ç è™½ç„¶å®Œæˆäº†å¯¹ä¸¤ä¸ªmapç±»å‹å˜é‡m1å’Œm2çš„æ˜¾å¼åˆå§‹åŒ–ï¼Œä½†ä¸çŸ¥é“ä½ æœ‰æ²¡æœ‰å‘ç°ä¸€ä¸ªé—®é¢˜ï¼Œä½œä¸ºåˆå€¼çš„å­—é¢å€¼ä¼¼ä¹æœ‰äº›â€œè‡ƒè‚¿â€ã€‚ä½ çœ‹ï¼Œä½œä¸ºåˆå€¼çš„å­—é¢å€¼é‡‡ç”¨äº†å¤åˆç±»å‹çš„å…ƒç´ ç±»å‹ï¼Œè€Œä¸”åœ¨ç¼–å†™å­—é¢å€¼æ—¶è¿˜å¸¦ä¸Šäº†å„è‡ªçš„å…ƒç´ ç±»å‹ï¼Œæ¯”å¦‚ä½œä¸ºmap[int] []stringå€¼ç±»å‹çš„[]stringï¼Œä»¥åŠä½œä¸ºmap[Position]stringçš„keyç±»å‹çš„Positionã€‚</p><p>åˆ«æ€¥ï¼é’ˆå¯¹è¿™ç§æƒ…å†µï¼ŒGoæä¾›äº†â€œè¯­æ³•ç³–â€ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œ<strong>Goå…è®¸çœç•¥å­—é¢å€¼ä¸­çš„å…ƒç´ ç±»å‹</strong>ã€‚å› ä¸ºmapç±»å‹è¡¨ç¤ºä¸­åŒ…å«äº†keyå’Œvalueçš„å…ƒç´ ç±»å‹ï¼ŒGoç¼–è¯‘å™¨å·²ç»æœ‰è¶³å¤Ÿçš„ä¿¡æ¯ï¼Œæ¥æ¨å¯¼å‡ºå­—é¢å€¼ä¸­å„ä¸ªå€¼çš„ç±»å‹äº†ã€‚æˆ‘ä»¬ä»¥m2ä¸ºä¾‹ï¼Œè¿™é‡Œçš„æ˜¾å¼åˆå§‹åŒ–ä»£ç å’Œä¸Šé¢å˜é‡m2çš„åˆå§‹åŒ–ä»£ç æ˜¯ç­‰ä»·çš„ï¼š</p><pre><code class=\"language-plain\">m2 := map[Position]string{\n    {29.935523, 52.568915}: \"school\",\n    {25.352594, 113.304361}: \"shopping-mall\",\n    {73.224455, 111.804306}: \"hospital\",\n}\n</code></pre><p>ä»¥ååœ¨æ— ç‰¹æ®Šè¯´æ˜çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éƒ½å°†ä½¿ç”¨è¿™ç§ç®€åŒ–åçš„å­—é¢å€¼åˆå§‹åŒ–æ–¹å¼ã€‚</p><p><strong>æ–¹æ³•äºŒï¼šä½¿ç”¨makeä¸ºmapç±»å‹å˜é‡è¿›è¡Œæ˜¾å¼åˆå§‹åŒ–ã€‚</strong></p><p>å’Œåˆ‡ç‰‡é€šè¿‡makeè¿›è¡Œåˆå§‹åŒ–ä¸€æ ·ï¼Œé€šè¿‡makeçš„åˆå§‹åŒ–æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºmapç±»å‹å˜é‡æŒ‡å®šé”®å€¼å¯¹çš„åˆå§‹å®¹é‡ï¼Œä½†æ— æ³•è¿›è¡Œå…·ä½“çš„é”®å€¼å¯¹èµ‹å€¼ï¼Œå°±åƒä¸‹é¢ä»£ç è¿™æ ·ï¼š</p><pre><code class=\"language-plain\">m1 := make(map[int]string) // æœªæŒ‡å®šåˆå§‹å®¹é‡\nm2 := make(map[int]string, 8) // æŒ‡å®šåˆå§‹å®¹é‡ä¸º8\n</code></pre><p>ä¸è¿‡ï¼Œmapç±»å‹çš„å®¹é‡ä¸ä¼šå—é™äºå®ƒçš„åˆå§‹å®¹é‡å€¼ï¼Œå½“å…¶ä¸­çš„é”®å€¼å¯¹æ•°é‡è¶…è¿‡åˆå§‹å®¹é‡åï¼ŒGoè¿è¡Œæ—¶ä¼šè‡ªåŠ¨å¢åŠ mapç±»å‹çš„å®¹é‡ï¼Œä¿è¯åç»­é”®å€¼å¯¹çš„æ­£å¸¸æ’å…¥ã€‚</p><p>äº†è§£å®Œmapç±»å‹å˜é‡çš„å£°æ˜ä¸åˆå§‹åŒ–åï¼Œæˆ‘ä»¬å°±æ¥çœ‹çœ‹ï¼Œåœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œmapç±»å‹éƒ½æœ‰å“ªäº›åŸºæœ¬æ“ä½œå’Œæ³¨æ„äº‹é¡¹ã€‚</p><h2>mapçš„åŸºæœ¬æ“ä½œ</h2><p>é’ˆå¯¹ä¸€ä¸ªmapç±»å‹å˜é‡ï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œè¯¸å¦‚æ’å…¥æ–°é”®å€¼å¯¹ã€è·å–å½“å‰é”®å€¼å¯¹æ•°é‡ã€æŸ¥æ‰¾ç‰¹å®šé”®å’Œè¯»å–å¯¹åº”å€¼ã€åˆ é™¤é”®å€¼å¯¹ï¼Œä»¥åŠéå†é”®å€¼ç­‰æ“ä½œã€‚æˆ‘ä»¬ä¸€ä¸ªä¸ªæ¥å­¦ä¹ ã€‚</p><p><strong>æ“ä½œä¸€ï¼šæ’å…¥æ–°é”®å€¼å¯¹ã€‚</strong></p><p>é¢å¯¹ä¸€ä¸ªénilçš„mapç±»å‹å˜é‡ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å…¶ä¸­æ’å…¥ç¬¦åˆmapç±»å‹å®šä¹‰çš„ä»»æ„æ–°é”®å€¼å¯¹ã€‚æ’å…¥æ–°é”®å€¼å¯¹çš„æ–¹å¼å¾ˆç®€å•ï¼Œæˆ‘ä»¬åªéœ€è¦æŠŠvalueèµ‹å€¼ç»™mapä¸­å¯¹åº”çš„keyå°±å¯ä»¥äº†ï¼š</p><pre><code class=\"language-plain\">m := make(map[int]string)\nm[1] = \"value1\"\nm[2] = \"value2\"\nm[3] = \"value3\"\n</code></pre><p>è€Œä¸”ï¼Œæˆ‘ä»¬ä¸éœ€è¦è‡ªå·±åˆ¤æ–­æ•°æ®æœ‰æ²¡æœ‰æ’å…¥æˆåŠŸï¼Œå› ä¸ºGoä¼šä¿è¯æ’å…¥æ€»æ˜¯æˆåŠŸçš„ã€‚è¿™é‡Œï¼ŒGoè¿è¡Œæ—¶ä¼šè´Ÿè´£mapå˜é‡å†…éƒ¨çš„å†…å­˜ç®¡ç†ï¼Œå› æ­¤é™¤éæ˜¯ç³»ç»Ÿå†…å­˜è€—å°½ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ç”¨æ‹…å¿ƒå‘mapä¸­æ’å…¥æ–°æ•°æ®çš„æ•°é‡å’Œæ‰§è¡Œç»“æœã€‚</p><p>ä¸è¿‡ï¼Œå¦‚æœæˆ‘ä»¬æ’å…¥æ–°é”®å€¼å¯¹çš„æ—¶å€™ï¼ŒæŸä¸ªkeyå·²ç»å­˜åœ¨äºmapä¸­äº†ï¼Œé‚£æˆ‘ä»¬çš„æ’å…¥æ“ä½œå°±ä¼šç”¨æ–°å€¼è¦†ç›–æ—§å€¼ï¼š</p><pre><code class=\"language-plain\">m := map[string]int {\n\t\"key1\" : 1,\n\t\"key2\" : 2,\n}\n\nm[\"key1\"] = 11 // 11ä¼šè¦†ç›–æ‰\"key1\"å¯¹åº”çš„æ—§å€¼1\nm[\"key3\"] = 3  // æ­¤æ—¶mä¸ºmap[key1:11 key2:2 key3:3]\n</code></pre><p>ä»è¿™æ®µä»£ç ä¸­ä½ å¯ä»¥çœ‹åˆ°ï¼Œmapç±»å‹å˜é‡måœ¨å£°æ˜çš„åŒæ—¶å°±åšäº†åˆå§‹åŒ–ï¼Œå®ƒçš„å†…éƒ¨å»ºç«‹äº†ä¸¤ä¸ªé”®å€¼å¯¹ï¼Œå…¶ä¸­å°±åŒ…å«é”®key1ã€‚æ‰€ä»¥åé¢æˆ‘ä»¬å†ç»™é”®key1è¿›è¡Œèµ‹å€¼æ—¶ï¼ŒGoä¸ä¼šé‡æ–°åˆ›å»ºkey1é”®ï¼Œè€Œæ˜¯ä¼šç”¨æ–°å€¼ï¼ˆ11ï¼‰æŠŠkey1é”®å¯¹åº”çš„æ—§å€¼ï¼ˆ1ï¼‰æ›¿æ¢æ‰ã€‚</p><p><strong>æ“ä½œäºŒï¼šè·å–é”®å€¼å¯¹æ•°é‡ã€‚</strong></p><p>å¦‚æœæˆ‘ä»¬åœ¨ç¼–ç ä¸­ï¼Œæƒ³çŸ¥é“å½“å‰mapç±»å‹å˜é‡ä¸­å·²ç»å»ºç«‹äº†å¤šå°‘ä¸ªé”®å€¼å¯¹ï¼Œé‚£æˆ‘ä»¬å¯ä»¥æ€ä¹ˆåšå‘¢ï¼Ÿå’Œåˆ‡ç‰‡ä¸€æ ·ï¼Œmapç±»å‹ä¹Ÿå¯ä»¥é€šè¿‡å†…ç½®å‡½æ•° <strong>len</strong>ï¼Œè·å–å½“å‰å˜é‡å·²ç»å­˜å‚¨çš„é”®å€¼å¯¹æ•°é‡ï¼š</p><pre><code class=\"language-plain\">m := map[string]int {\n\t\"key1\" : 1,\n\t\"key2\" : 2,\n}\n\nfmt.Println(len(m)) // 2\nm[\"key3\"] = 3  \nfmt.Println(len(m)) // 3\n</code></pre><p>ä¸è¿‡ï¼Œè¿™é‡Œè¦æ³¨æ„çš„æ˜¯<strong>æˆ‘ä»¬ä¸èƒ½å¯¹mapç±»å‹å˜é‡è°ƒç”¨capï¼Œæ¥è·å–å½“å‰å®¹é‡</strong>ï¼Œè¿™æ˜¯mapç±»å‹ä¸åˆ‡ç‰‡ç±»å‹çš„ä¸€ä¸ªä¸åŒç‚¹ã€‚</p><p><strong>æ“ä½œä¸‰ï¼šæŸ¥æ‰¾å’Œæ•°æ®è¯»å–</strong></p><p>å’Œå†™å…¥ç›¸æ¯”ï¼Œmapç±»å‹æ›´å¤šç”¨åœ¨æŸ¥æ‰¾å’Œæ•°æ®è¯»å–åœºåˆã€‚æ‰€è°“æŸ¥æ‰¾ï¼Œå°±æ˜¯åˆ¤æ–­æŸä¸ªkeyæ˜¯å¦å­˜åœ¨äºæŸä¸ªmapä¸­ã€‚æœ‰äº†å‰é¢å‘mapæ’å…¥é”®å€¼å¯¹çš„åŸºç¡€ï¼Œæˆ‘ä»¬å¯èƒ½è‡ªç„¶è€Œç„¶åœ°æƒ³åˆ°ï¼Œå¯ä»¥ç”¨ä¸‹é¢ä»£ç å»æŸ¥æ‰¾ä¸€ä¸ªé”®å¹¶è·å¾—è¯¥é”®å¯¹åº”çš„å€¼ï¼š</p><pre><code class=\"language-plain\">m := make(map[string]int)\nv := m[\"key1\"]\n</code></pre><p>ä¹ä¸€çœ‹ï¼Œç¬¬äºŒè¡Œä»£ç åœ¨è¯­æ³•ä¸Šå¥½åƒå¹¶æ²¡æœ‰ä»€ä¹ˆä¸å½“ä¹‹å¤„ï¼Œä½†å…¶å®é€šè¿‡è¿™è¡Œè¯­å¥ï¼Œæˆ‘ä»¬è¿˜æ˜¯æ— æ³•ç¡®å®šé”®key1æ˜¯å¦çœŸå®å­˜åœ¨äºmapä¸­ã€‚è¿™æ˜¯å› ä¸ºï¼Œå½“æˆ‘ä»¬å°è¯•å»è·å–ä¸€ä¸ªé”®å¯¹åº”çš„å€¼çš„æ—¶å€™ï¼Œå¦‚æœè¿™ä¸ªé”®åœ¨mapä¸­å¹¶ä¸å­˜åœ¨ï¼Œæˆ‘ä»¬ä¹Ÿä¼šå¾—åˆ°ä¸€ä¸ªå€¼ï¼Œè¿™ä¸ªå€¼æ˜¯valueå…ƒç´ ç±»å‹çš„<strong>é›¶å€¼</strong>ã€‚</p><p>æˆ‘ä»¬ä»¥ä¸Šé¢è¿™ä¸ªä»£ç ä¸ºä¾‹ï¼Œå¦‚æœé”®key1åœ¨mapä¸­å¹¶ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆvçš„å€¼å°±ä¼šè¢«èµ‹äºˆvalueå…ƒç´ ç±»å‹intçš„é›¶å€¼ï¼Œä¹Ÿå°±æ˜¯0ã€‚æ‰€ä»¥æˆ‘ä»¬æ— æ³•é€šè¿‡vå€¼åˆ¤æ–­å‡ºï¼Œç©¶ç«Ÿæ˜¯å› ä¸ºkey1ä¸å­˜åœ¨è¿”å›çš„é›¶å€¼ï¼Œè¿˜æ˜¯å› ä¸ºkey1æœ¬èº«å¯¹åº”çš„valueå°±æ˜¯0ã€‚</p><p>é‚£ä¹ˆåœ¨mapä¸­æŸ¥æ‰¾keyçš„æ­£ç¡®å§¿åŠ¿æ˜¯ä»€ä¹ˆå‘¢ï¼ŸGoè¯­è¨€çš„mapç±»å‹æ”¯æŒé€šè¿‡ç”¨ä¸€ç§åä¸ºâ€œ<strong>comma ok</strong>â€çš„æƒ¯ç”¨æ³•ï¼Œè¿›è¡Œå¯¹æŸä¸ªkeyçš„æŸ¥è¯¢ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å°±ç”¨â€œcomma okâ€æƒ¯ç”¨æ³•æ”¹é€ ä¸€ä¸‹ä¸Šé¢çš„ä»£ç ï¼š</p><pre><code class=\"language-plain\">m := make(map[string]int)\nv, ok := m[\"key1\"]\nif !ok {\n    // \"key1\"ä¸åœ¨mapä¸­\n}\n\n// \"key1\"åœ¨mapä¸­ï¼Œvå°†è¢«èµ‹äºˆ\"key1\"é”®å¯¹åº”çš„value\n</code></pre><p>æˆ‘ä»¬çœ‹åˆ°ï¼Œè¿™é‡Œæˆ‘ä»¬é€šè¿‡äº†ä¸€ä¸ªå¸ƒå°”ç±»å‹å˜é‡okï¼Œæ¥åˆ¤æ–­é”®â€œkey1â€æ˜¯å¦å­˜åœ¨äºmapä¸­ã€‚å¦‚æœå­˜åœ¨ï¼Œå˜é‡vå°±ä¼šè¢«æ­£ç¡®åœ°èµ‹å€¼ä¸ºé”®â€œkey1â€å¯¹åº”çš„valueã€‚</p><p>ä¸è¿‡ï¼Œå¦‚æœæˆ‘ä»¬å¹¶ä¸å…³å¿ƒæŸä¸ªé”®å¯¹åº”çš„valueï¼Œè€Œåªå…³å¿ƒæŸä¸ªé”®æ˜¯å¦åœ¨äºmapä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç©ºæ ‡è¯†ç¬¦æ›¿ä»£å˜é‡vï¼Œå¿½ç•¥å¯èƒ½è¿”å›çš„valueï¼š</p><pre><code class=\"language-plain\">m := make(map[string]int)\n_, ok := m[\"key1\"]\n... ...\n</code></pre><p>å› æ­¤ï¼Œä½ ä¸€å®šè¦è®°ä½ï¼š<strong>åœ¨Goè¯­è¨€ä¸­ï¼Œè¯·ä½¿ç”¨â€œcomma okâ€æƒ¯ç”¨æ³•å¯¹mapè¿›è¡Œé”®æŸ¥æ‰¾å’Œé”®å€¼è¯»å–æ“ä½œã€‚</strong></p><p><strong>æ“ä½œå››ï¼šåˆ é™¤æ•°æ®ã€‚</strong></p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å†çœ‹çœ‹çœ‹å¦‚ä½•ä»mapä¸­åˆ é™¤æŸä¸ªé”®å€¼å¯¹ã€‚åœ¨Goä¸­ï¼Œæˆ‘ä»¬éœ€è¦å€ŸåŠ©<strong>å†…ç½®å‡½æ•°delete</strong>æ¥ä»mapä¸­åˆ é™¤æ•°æ®ã€‚ä½¿ç”¨deleteå‡½æ•°çš„æƒ…å†µä¸‹ï¼Œä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æˆ‘ä»¬çš„mapç±»å‹å˜é‡ï¼Œç¬¬äºŒä¸ªå‚æ•°å°±æ˜¯æˆ‘ä»¬æƒ³è¦åˆ é™¤çš„é”®ã€‚æˆ‘ä»¬å¯ä»¥çœ‹çœ‹è¿™ä¸ªä»£ç ç¤ºä¾‹ï¼š</p><pre><code class=\"language-plain\">m := map[string]int {\n\t\"key1\" : 1,\n\t\"key2\" : 2,\n}\n\nfmt.Println(m) // map[key1:1 key2:2]\ndelete(m, \"key2\") // åˆ é™¤\"key2\"\nfmt.Println(m) // map[key1:1]\n</code></pre><p>è¿™é‡Œè¦æ³¨æ„çš„æ˜¯ï¼Œ<strong>deleteå‡½æ•°æ˜¯ä»mapä¸­åˆ é™¤é”®çš„å”¯ä¸€æ–¹æ³•</strong>ã€‚å³ä¾¿ä¼ ç»™deleteçš„é”®åœ¨mapä¸­å¹¶ä¸å­˜åœ¨ï¼Œdeleteå‡½æ•°çš„æ‰§è¡Œä¹Ÿä¸ä¼šå¤±è´¥ï¼Œæ›´ä¸ä¼šæŠ›å‡ºè¿è¡Œæ—¶çš„å¼‚å¸¸ã€‚</p><p><strong>æ“ä½œäº”ï¼šéå†mapä¸­çš„é”®å€¼æ•°æ®</strong></p><p>æœ€åï¼Œæˆ‘ä»¬æ¥è¯´ä¸€ä¸‹å¦‚ä½•éå†mapä¸­çš„é”®å€¼æ•°æ®ã€‚è¿™ä¸€ç‚¹è™½ç„¶ä¸åƒæŸ¥è¯¢å’Œè¯»å–æ“ä½œé‚£ä¹ˆå¸¸è§ï¼Œä½†æ—¥å¸¸å¼€å‘ä¸­æˆ‘ä»¬è¿˜æ˜¯æœ‰è¿™ä¸ªéœ€æ±‚çš„ã€‚åœ¨Goä¸­ï¼Œéå†mapçš„é”®å€¼å¯¹åªæœ‰ä¸€ç§æ–¹æ³•ï¼Œé‚£å°±æ˜¯<strong>åƒå¯¹å¾…åˆ‡ç‰‡é‚£æ ·é€šè¿‡for rangeè¯­å¥å¯¹mapæ•°æ®è¿›è¡Œéå†</strong>ã€‚æˆ‘ä»¬çœ‹ä¸€ä¸ªä¾‹å­ï¼š</p><pre><code class=\"language-plain\">package main\n  \nimport \"fmt\"\n\nfunc main() {\n    m := map[int]int{\n        1: 11,\n        2: 12,\n        3: 13,\n    }\n\n    fmt.Printf(\"{ \")\n    for k, v := range m {\n        fmt.Printf(\"[%d, %d] \", k, v)\n    }\n    fmt.Printf(\"}\\n\")\n}\n</code></pre><p>ä½ çœ‹ï¼Œé€šè¿‡for rangeéå†mapå˜é‡mï¼Œæ¯æ¬¡è¿­ä»£éƒ½ä¼šè¿”å›ä¸€ä¸ªé”®å€¼å¯¹ï¼Œå…¶ä¸­é”®å­˜åœ¨äºå˜é‡kä¸­ï¼Œå®ƒå¯¹åº”çš„å€¼å­˜å‚¨åœ¨å˜é‡vä¸­ã€‚æˆ‘ä»¬å¯ä»¥è¿è¡Œä¸€ä¸‹è¿™æ®µä»£ç ï¼Œå¯ä»¥å¾—åˆ°ç¬¦åˆæˆ‘ä»¬é¢„æœŸçš„ç»“æœï¼š</p><pre><code class=\"language-plain\">{ [1, 11] [2, 12] [3, 13] }\n</code></pre><p>å¦‚æœæˆ‘ä»¬åªå…³å¿ƒæ¯æ¬¡è¿­ä»£çš„é”®ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„æ–¹å¼å¯¹mapè¿›è¡Œéå†ï¼š</p><pre><code class=\"language-plain\">for k, _ := range m { \n\t// ä½¿ç”¨k\n}\n</code></pre><p>å½“ç„¶æ›´åœ°é“çš„æ–¹å¼æ˜¯è¿™æ ·çš„ï¼š</p><pre><code class=\"language-plain\">for k := range m {\n\t// ä½¿ç”¨k\n}\n</code></pre><p>å¦‚æœæˆ‘ä»¬åªå…³å¿ƒæ¯æ¬¡è¿­ä»£è¿”å›çš„é”®æ‰€å¯¹åº”çš„valueï¼Œæˆ‘ä»¬åŒæ ·å¯ä»¥é€šè¿‡ç©ºæ ‡è¯†ç¬¦æ›¿ä»£å˜é‡kï¼Œå°±åƒä¸‹é¢è¿™æ ·ï¼š</p><pre><code class=\"language-plain\">for _, v := range m {\n\t// ä½¿ç”¨v\n}\n</code></pre><p>ä¸è¿‡ï¼Œå‰é¢mapéå†çš„è¾“å‡ºç»“æœéƒ½éå¸¸ç†æƒ³ï¼Œç»™æˆ‘ä»¬çš„è¡¨è±¡å¥½åƒæ˜¯è¿­ä»£å™¨æŒ‰ç…§mapä¸­å…ƒç´ çš„æ’å…¥æ¬¡åºé€ä¸€éå†ã€‚é‚£äº‹å®æ˜¯ä¸æ˜¯è¿™æ ·å‘¢ï¼Ÿæˆ‘ä»¬å†æ¥è¯•è¯•ï¼Œå¤šéå†å‡ æ¬¡è¿™ä¸ªmapçœ‹çœ‹ã€‚</p><p>æˆ‘ä»¬å…ˆæ¥æ”¹é€ ä¸€ä¸‹ä»£ç ï¼š</p><pre><code class=\"language-plain\">package main\n  \nimport \"fmt\"\n\nfunc doIteration(m map[int]int) {\n    fmt.Printf(\"{ \")\n    for k, v := range m {\n        fmt.Printf(\"[%d, %d] \", k, v)\n    }\n    fmt.Printf(\"}\\n\")\n}\n\nfunc main() {\n    m := map[int]int{\n        1: 11,\n        2: 12,\n        3: 13,\n    }\n\n    for i := 0; i &lt; 3; i++ {\n        doIteration(m)\n    }\n}\n</code></pre><p>è¿è¡Œä¸€ä¸‹ä¸Šè¿°ä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°è¿™æ ·ç»“æœï¼š</p><pre><code class=\"language-plain\">{ [3, 13] [1, 11] [2, 12] }\n{ [1, 11] [2, 12] [3, 13] }\n{ [3, 13] [1, 11] [2, 12] }\n</code></pre><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œ<strong>å¯¹åŒä¸€mapåšå¤šæ¬¡éå†çš„æ—¶å€™ï¼Œæ¯æ¬¡éå†å…ƒç´ çš„æ¬¡åºéƒ½ä¸ç›¸åŒ</strong>ã€‚è¿™æ˜¯Goè¯­è¨€mapç±»å‹çš„ä¸€ä¸ªé‡è¦ç‰¹ç‚¹ï¼Œä¹Ÿæ˜¯å¾ˆå®¹æ˜“è®©Goåˆå­¦è€…æ‰å…¥å‘ä¸­çš„ä¸€ä¸ªåœ°æ–¹ã€‚æ‰€ä»¥è¿™é‡Œä½ ä¸€å®šè¦è®°ä½ï¼š<strong>ç¨‹åºé€»è¾‘åƒä¸‡ä¸è¦ä¾èµ–éå†mapæ‰€å¾—åˆ°çš„çš„å…ƒç´ æ¬¡åº</strong>ã€‚</p><p>ä»æˆ‘ä»¬å‰é¢çš„è®²è§£ï¼Œä½ åº”è¯¥ä¹Ÿæ„Ÿå—åˆ°äº†ï¼Œmapç±»å‹éå¸¸å¥½ç”¨ï¼Œé‚£ä¹ˆï¼Œæˆ‘ä»¬åœ¨å„ä¸ªå‡½æ•°æ–¹æ³•é—´ä¼ é€’mapå˜é‡ä¼šä¸ä¼šæœ‰å¾ˆå¤§å¼€é”€å‘¢ï¼Ÿ</p><h2>mapå˜é‡çš„ä¼ é€’å¼€é”€</h2><p>å…¶å®ä½ ä¸ç”¨æ‹…å¿ƒå¼€é”€çš„é—®é¢˜ã€‚</p><p>å’Œåˆ‡ç‰‡ç±»å‹ä¸€æ ·ï¼Œmapä¹Ÿæ˜¯å¼•ç”¨ç±»å‹ã€‚è¿™å°±æ„å‘³ç€mapç±»å‹å˜é‡ä½œä¸ºå‚æ•°è¢«ä¼ é€’ç»™å‡½æ•°æˆ–æ–¹æ³•çš„æ—¶å€™ï¼Œå®è´¨ä¸Šä¼ é€’çš„åªæ˜¯ä¸€ä¸ª<strong>â€œæè¿°ç¬¦â€</strong>ï¼ˆåé¢æˆ‘ä»¬å†è®²è¿™ä¸ªæè¿°ç¬¦ç©¶ç«Ÿæ˜¯ä»€ä¹ˆ)ï¼Œè€Œä¸æ˜¯æ•´ä¸ªmapçš„æ•°æ®æ‹·è´ï¼Œæ‰€ä»¥è¿™ä¸ªä¼ é€’çš„å¼€é”€æ˜¯å›ºå®šçš„ï¼Œè€Œä¸”ä¹Ÿå¾ˆå°ã€‚</p><p>å¹¶ä¸”ï¼Œå½“mapå˜é‡è¢«ä¼ é€’åˆ°å‡½æ•°æˆ–æ–¹æ³•å†…éƒ¨åï¼Œæˆ‘ä»¬åœ¨å‡½æ•°å†…éƒ¨å¯¹mapç±»å‹å‚æ•°çš„ä¿®æ”¹åœ¨å‡½æ•°å¤–éƒ¨ä¹Ÿæ˜¯å¯è§çš„ã€‚æ¯”å¦‚ä½ ä»è¿™ä¸ªç¤ºä¾‹ä¸­å°±å¯ä»¥çœ‹åˆ°ï¼Œå‡½æ•°fooä¸­å¯¹mapç±»å‹å˜é‡mè¿›è¡Œäº†ä¿®æ”¹ï¼Œè€Œè¿™äº›ä¿®æ”¹åœ¨fooå‡½æ•°å¤–ä¹Ÿå¯è§ã€‚</p><pre><code class=\"language-plain\">package main\n  \nimport \"fmt\"\n\nfunc foo(m map[string]int) {\n    m[\"key1\"] = 11\n    m[\"key2\"] = 12\n}\n\nfunc main() {\n    m := map[string]int{\n        \"key1\": 1,\n        \"key2\": 2,\n    }\n\n    fmt.Println(m) // map[key1:1 key2:2]  \n    foo(m)\n    fmt.Println(m) // map[key1:11 key2:12] \n}\n</code></pre><h2>mapçš„å†…éƒ¨å®ç°</h2><p>å’Œåˆ‡ç‰‡ç›¸æ¯”ï¼Œmapç±»å‹çš„å†…éƒ¨å®ç°è¦æ›´åŠ å¤æ‚ã€‚Goè¿è¡Œæ—¶ä½¿ç”¨ä¸€å¼ å“ˆå¸Œè¡¨æ¥å®ç°æŠ½è±¡çš„mapç±»å‹ã€‚è¿è¡Œæ—¶å®ç°äº†mapç±»å‹æ“ä½œçš„æ‰€æœ‰åŠŸèƒ½ï¼ŒåŒ…æ‹¬æŸ¥æ‰¾ã€æ’å…¥ã€åˆ é™¤ç­‰ã€‚åœ¨ç¼–è¯‘é˜¶æ®µï¼ŒGoç¼–è¯‘å™¨ä¼šå°†Goè¯­æ³•å±‚é¢çš„mapæ“ä½œï¼Œé‡å†™æˆè¿è¡Œæ—¶å¯¹åº”çš„å‡½æ•°è°ƒç”¨ã€‚å¤§è‡´çš„å¯¹åº”å…³ç³»æ˜¯è¿™æ ·çš„ï¼š</p><pre><code class=\"language-plain\">// åˆ›å»ºmapç±»å‹å˜é‡å®ä¾‹\nm := make(map[keyType]valType, capacityhint) â†’ m := runtime.makemap(maptype, capacityhint, m)\n\n// æ’å…¥æ–°é”®å€¼å¯¹æˆ–ç»™é”®é‡æ–°èµ‹å€¼\nm[\"key\"] = \"value\" â†’ v := runtime.mapassign(maptype, m, \"key\") væ˜¯ç”¨äºåç»­å­˜å‚¨valueçš„ç©ºé—´çš„åœ°å€\n\n// è·å–æŸé”®çš„å€¼ \nv := m[\"key\"]      â†’ v := runtime.mapaccess1(maptype, m, \"key\")\nv, ok := m[\"key\"]  â†’ v, ok := runtime.mapaccess2(maptype, m, \"key\")\n\n// åˆ é™¤æŸé”®\ndelete(m, \"key\")   â†’ runtime.mapdelete(maptype, m, â€œkeyâ€)\n</code></pre><p>è¿™æ˜¯mapç±»å‹åœ¨Goè¿è¡Œæ—¶å±‚å®ç°çš„ç¤ºæ„å›¾ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/c9/1f/c9b2d05ffcb3yyd3b7da06763ee46a1f.jpg?wh=1980x1080\" alt=\"\"></p><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå’Œåˆ‡ç‰‡çš„è¿è¡Œæ—¶è¡¨ç¤ºå›¾ç›¸æ¯”ï¼Œmapçš„å®ç°ç¤ºæ„å›¾æ˜¾ç„¶è¦å¤æ‚å¾—å¤šã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ç»“åˆè¿™å¼ å›¾æ¥ç®€è¦æè¿°ä¸€ä¸‹mapåœ¨è¿è¡Œæ—¶å±‚çš„å®ç°åŸç†ã€‚æˆ‘ä»¬é‡ç‚¹è®²è§£ä¸€ä¸‹ä¸€ä¸ªmapå˜é‡åœ¨åˆå§‹çŠ¶æ€ã€è¿›è¡Œé”®å€¼å¯¹æ“ä½œåï¼Œä»¥åŠåœ¨å¹¶å‘åœºæ™¯ä¸‹çš„Goè¿è¡Œæ—¶å±‚çš„å®ç°åŸç†ã€‚</p><h3>åˆå§‹çŠ¶æ€</h3><p>ä»å›¾ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œä¸è¯­æ³•å±‚é¢ map ç±»å‹å˜é‡ï¼ˆmï¼‰ä¸€ä¸€å¯¹åº”çš„æ˜¯*runtime.hmap çš„å®ä¾‹ï¼Œå³runtime.hmapç±»å‹çš„æŒ‡é’ˆï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å‰é¢åœ¨è®²è§£ map ç±»å‹å˜é‡ä¼ é€’å¼€é”€æ—¶æåˆ°çš„ <strong>map ç±»å‹çš„æè¿°ç¬¦</strong>ã€‚hmap ç±»å‹æ˜¯ map ç±»å‹çš„å¤´éƒ¨ç»“æ„ï¼ˆheaderï¼‰ï¼Œå®ƒå­˜å‚¨äº†åç»­ map ç±»å‹æ“ä½œæ‰€éœ€çš„æ‰€æœ‰ä¿¡æ¯ï¼ŒåŒ…æ‹¬ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/2f/04/2f5ff72fbdb17cf0cb0b8da102c3e604.jpg?wh=1920x1047\" alt=\"å›¾ç‰‡\"></p><p>çœŸæ­£ç”¨æ¥å­˜å‚¨é”®å€¼å¯¹æ•°æ®çš„æ˜¯æ¡¶ï¼Œä¹Ÿå°±æ˜¯bucketï¼Œæ¯ä¸ªbucketä¸­å­˜å‚¨çš„æ˜¯Hashå€¼ä½bitä½æ•°å€¼ç›¸åŒçš„å…ƒç´ ï¼Œé»˜è®¤çš„å…ƒç´ ä¸ªæ•°ä¸º BUCKETSIZEï¼ˆå€¼ä¸º 8ï¼ŒGo 1.17ç‰ˆæœ¬ä¸­åœ¨$GOROOT/src/cmd/compile/internal/reflectdata/reflect.goä¸­å®šä¹‰ï¼Œä¸ runtime/map.go ä¸­å¸¸é‡ bucketCnt ä¿æŒä¸€è‡´ï¼‰ã€‚</p><p>å½“æŸä¸ªbucketï¼ˆæ¯”å¦‚buckets[0])çš„8ä¸ªç©ºæ§½slotï¼‰éƒ½å¡«æ»¡äº†ï¼Œä¸”mapå°šæœªè¾¾åˆ°æ‰©å®¹çš„æ¡ä»¶çš„æƒ…å†µä¸‹ï¼Œè¿è¡Œæ—¶ä¼šå»ºç«‹overflow bucketï¼Œå¹¶å°†è¿™ä¸ªoverflow bucketæŒ‚åœ¨ä¸Šé¢bucketï¼ˆå¦‚buckets[0]ï¼‰æœ«å°¾çš„overflowæŒ‡é’ˆä¸Šï¼Œè¿™æ ·ä¸¤ä¸ªbucketså½¢æˆäº†ä¸€ä¸ªé“¾è¡¨ç»“æ„ï¼Œç›´åˆ°ä¸‹ä¸€æ¬¡mapæ‰©å®¹ä¹‹å‰ï¼Œè¿™ä¸ªç»“æ„éƒ½ä¼šä¸€ç›´å­˜åœ¨ã€‚</p><p>ä»å›¾ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæ¯ä¸ªbucketç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼Œä»ä¸Šåˆ°ä¸‹åˆ†åˆ«æ˜¯tophashåŒºåŸŸã€keyå­˜å‚¨åŒºåŸŸå’Œvalueå­˜å‚¨åŒºåŸŸã€‚</p><ul>\n<li><strong>tophashåŒºåŸŸ</strong></li>\n</ul><p>å½“æˆ‘ä»¬å‘mapæ’å…¥ä¸€æ¡æ•°æ®ï¼Œæˆ–è€…æ˜¯ä»mapæŒ‰keyæŸ¥è¯¢æ•°æ®çš„æ—¶å€™ï¼Œè¿è¡Œæ—¶éƒ½ä¼šä½¿ç”¨å“ˆå¸Œå‡½æ•°å¯¹keyåšå“ˆå¸Œè¿ç®—ï¼Œå¹¶è·å¾—ä¸€ä¸ªå“ˆå¸Œå€¼ï¼ˆhashcodeï¼‰ã€‚è¿™ä¸ªhashcodeéå¸¸å…³é”®ï¼Œè¿è¡Œæ—¶ä¼šæŠŠhashcodeâ€œä¸€åˆ†ä¸ºäºŒâ€æ¥çœ‹å¾…ï¼Œå…¶ä¸­ä½ä½åŒºçš„å€¼ç”¨äºé€‰å®šbucketï¼Œé«˜ä½åŒºçš„å€¼ç”¨äºåœ¨æŸä¸ªbucketä¸­ç¡®å®škeyçš„ä½ç½®ã€‚æˆ‘æŠŠè¿™ä¸€è¿‡ç¨‹æ•´ç†æˆäº†ä¸‹é¢è¿™å¼ ç¤ºæ„å›¾ï¼Œä½ ç†è§£èµ·æ¥å¯ä»¥æ›´ç›´è§‚ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/ef/08/ef729c06cd8fa19f29f89df212c7ea08.jpg?wh=1920x1047\" alt=\"å›¾ç‰‡\"></p><p>å› æ­¤ï¼Œæ¯ä¸ªbucketçš„tophashåŒºåŸŸå…¶å®æ˜¯ç”¨æ¥å¿«é€Ÿå®šä½keyä½ç½®çš„ï¼Œè¿™æ ·å°±é¿å…äº†é€ä¸ªkeyè¿›è¡Œæ¯”è¾ƒè¿™ç§ä»£ä»·è¾ƒå¤§çš„æ“ä½œã€‚å°¤å…¶æ˜¯å½“keyæ˜¯sizeè¾ƒå¤§çš„å­—ç¬¦ä¸²ç±»å‹æ—¶ï¼Œå¥½å¤„å°±æ›´çªå‡ºäº†ã€‚è¿™æ˜¯ä¸€ç§ä»¥ç©ºé—´æ¢æ—¶é—´çš„æ€è·¯ã€‚</p><ul>\n<li><strong>keyå­˜å‚¨åŒºåŸŸ</strong></li>\n</ul><p>æ¥ç€ï¼Œæˆ‘ä»¬çœ‹tophashåŒºåŸŸä¸‹é¢æ˜¯ä¸€å—è¿ç»­çš„å†…å­˜åŒºåŸŸï¼Œå­˜å‚¨çš„æ˜¯è¿™ä¸ªbucketæ‰¿è½½çš„æ‰€æœ‰keyæ•°æ®ã€‚è¿è¡Œæ—¶åœ¨åˆ†é…bucketçš„æ—¶å€™éœ€è¦çŸ¥é“keyçš„Sizeã€‚é‚£ä¹ˆè¿è¡Œæ—¶æ˜¯å¦‚ä½•çŸ¥é“keyçš„sizeçš„å‘¢ï¼Ÿ</p><p>å½“æˆ‘ä»¬å£°æ˜ä¸€ä¸ªmapç±»å‹å˜é‡ï¼Œæ¯”å¦‚var m map[string]intæ—¶ï¼ŒGoè¿è¡Œæ—¶å°±ä¼šä¸ºè¿™ä¸ªå˜é‡å¯¹åº”çš„ç‰¹å®šmapç±»å‹ï¼Œç”Ÿæˆä¸€ä¸ªruntime.maptypeå®ä¾‹ã€‚å¦‚æœè¿™ä¸ªå®ä¾‹å·²ç»å­˜åœ¨ï¼Œå°±ä¼šç›´æ¥å¤ç”¨ã€‚maptypeå®ä¾‹çš„ç»“æ„æ˜¯è¿™æ ·çš„ï¼š</p><pre><code class=\"language-plain\">type maptype struct {\n    typ        _type\n    key        *_type\n    elem       *_type\n    bucket     *_type // internal type representing a hash bucket\n    keysize    uint8  // size of key slot\n    elemsize   uint8  // size of elem slot\n    bucketsize uint16 // size of bucket\n    flags      uint32\n} \n</code></pre><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªå®ä¾‹åŒ…å«äº†æˆ‘ä»¬éœ€è¦çš„mapç±»å‹ä¸­çš„æ‰€æœ‰\"å…ƒä¿¡æ¯\"ã€‚æˆ‘ä»¬å‰é¢æåˆ°è¿‡ï¼Œç¼–è¯‘å™¨ä¼šæŠŠè¯­æ³•å±‚é¢çš„mapæ“ä½œé‡å†™æˆè¿è¡Œæ—¶å¯¹åº”çš„å‡½æ•°è°ƒç”¨ï¼Œè¿™äº›è¿è¡Œæ—¶å‡½æ•°éƒ½æœ‰ä¸€ä¸ªå…±åŒçš„ç‰¹ç‚¹ï¼Œé‚£å°±æ˜¯ç¬¬ä¸€ä¸ªå‚æ•°éƒ½æ˜¯maptypeæŒ‡é’ˆç±»å‹çš„å‚æ•°ã€‚</p><p><strong>Goè¿è¡Œæ—¶å°±æ˜¯åˆ©ç”¨maptypeå‚æ•°ä¸­çš„ä¿¡æ¯ç¡®å®škeyçš„ç±»å‹å’Œå¤§å°çš„ã€‚</strong>mapæ‰€ç”¨çš„hashå‡½æ•°ä¹Ÿå­˜æ”¾åœ¨maptype.key.alg.hash(key, hmap.hash0)ä¸­ã€‚åŒæ—¶maptypeçš„å­˜åœ¨ä¹Ÿè®©Goä¸­æ‰€æœ‰mapç±»å‹éƒ½å…±äº«ä¸€å¥—è¿è¡Œæ—¶mapæ“ä½œå‡½æ•°ï¼Œè€Œä¸æ˜¯åƒC++é‚£æ ·ä¸ºæ¯ç§mapç±»å‹åˆ›å»ºä¸€å¥—mapæ“ä½œå‡½æ•°ï¼Œè¿™æ ·å°±èŠ‚çœäº†å¯¹æœ€ç»ˆäºŒè¿›åˆ¶æ–‡ä»¶ç©ºé—´çš„å ç”¨ã€‚</p><ul>\n<li><strong>valueå­˜å‚¨åŒºåŸŸ</strong></li>\n</ul><p>æˆ‘ä»¬å†æ¥ç€çœ‹keyå­˜å‚¨åŒºåŸŸä¸‹æ–¹çš„å¦å¤–ä¸€å—è¿ç»­çš„å†…å­˜åŒºåŸŸï¼Œè¿™ä¸ªåŒºåŸŸå­˜å‚¨çš„æ˜¯keyå¯¹åº”çš„valueã€‚å’Œkeyä¸€æ ·ï¼Œè¿™ä¸ªåŒºåŸŸçš„åˆ›å»ºä¹Ÿæ˜¯å¾—åˆ°äº†maptypeä¸­ä¿¡æ¯çš„å¸®åŠ©ã€‚Goè¿è¡Œæ—¶é‡‡ç”¨äº†æŠŠkeyå’Œvalueåˆ†å¼€å­˜å‚¨çš„æ–¹å¼ï¼Œè€Œä¸æ˜¯é‡‡ç”¨ä¸€ä¸ªkvæ¥ç€ä¸€ä¸ªkvçš„kvç´§é‚»æ–¹å¼å­˜å‚¨ï¼Œè¿™å¸¦æ¥çš„å…¶å®æ˜¯ç®—æ³•ä¸Šçš„å¤æ‚æ€§ï¼Œä½†å´å‡å°‘äº†å› å†…å­˜å¯¹é½å¸¦æ¥çš„å†…å­˜æµªè´¹ã€‚</p><p>æˆ‘ä»¬ä»¥map[int8]int64ä¸ºä¾‹ï¼Œçœ‹çœ‹ä¸‹é¢çš„å­˜å‚¨ç©ºé—´åˆ©ç”¨ç‡å¯¹æ¯”å›¾ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/5b/5a/5bce9aaebc78bdea7d2999606891325a.jpg?wh=1920x1047\" alt=\"å›¾ç‰‡\"></p><p>ä½ ä¼šçœ‹åˆ°ï¼Œå½“å‰Goè¿è¡Œæ—¶ä½¿ç”¨çš„æ–¹æ¡ˆå†…å­˜åˆ©ç”¨æ•ˆç‡å¾ˆé«˜ï¼Œè€Œkvç´§é‚»å­˜å‚¨çš„æ–¹æ¡ˆåœ¨map[int8]int64è¿™æ ·çš„ä¾‹å­ä¸­å†…å­˜æµªè´¹ååˆ†ä¸¥é‡ï¼Œå®ƒçš„å†…å­˜åˆ©ç”¨ç‡æ˜¯72/128=56.25%ï¼Œæœ‰è¿‘ä¸€åŠçš„ç©ºé—´éƒ½æµªè´¹æ‰äº†ã€‚</p><p>å¦å¤–ï¼Œè¿˜æœ‰ä¸€ç‚¹æˆ‘è¦è·Ÿä½ å¼ºè°ƒä¸€ä¸‹ï¼Œå¦‚æœkeyæˆ–valueçš„æ•°æ®é•¿åº¦å¤§äºä¸€å®šæ•°å€¼ï¼Œé‚£ä¹ˆè¿è¡Œæ—¶ä¸ä¼šåœ¨bucketä¸­ç›´æ¥å­˜å‚¨æ•°æ®ï¼Œè€Œæ˜¯ä¼šå­˜å‚¨keyæˆ–valueæ•°æ®çš„æŒ‡é’ˆã€‚ç›®å‰Goè¿è¡Œæ—¶å®šä¹‰çš„æœ€å¤§keyå’Œvalueçš„é•¿åº¦æ˜¯è¿™æ ·çš„ï¼š</p><pre><code class=\"language-plain\">// $GOROOT/src/runtime/map.go\nconst (\n    maxKeySize  = 128\n    maxElemSize = 128\n)\n</code></pre><h3>mapæ‰©å®¹</h3><p>æˆ‘ä»¬å‰é¢æåˆ°è¿‡ï¼Œmapä¼šå¯¹åº•å±‚ä½¿ç”¨çš„å†…å­˜è¿›è¡Œè‡ªåŠ¨ç®¡ç†ã€‚å› æ­¤ï¼Œåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œå½“æ’å…¥å…ƒç´ ä¸ªæ•°è¶…å‡ºä¸€å®šæ•°å€¼åï¼Œmapä¸€å®šä¼šå­˜åœ¨è‡ªåŠ¨æ‰©å®¹çš„é—®é¢˜ï¼Œä¹Ÿå°±æ˜¯æ€ä¹ˆæ‰©å……bucketçš„æ•°é‡ï¼Œå¹¶é‡æ–°åœ¨bucketé—´å‡è¡¡åˆ†é…æ•°æ®çš„é—®é¢˜ã€‚</p><p>é‚£ä¹ˆmapåœ¨ä»€ä¹ˆæƒ…å†µä¸‹ä¼šè¿›è¡Œæ‰©å®¹å‘¢ï¼ŸGoè¿è¡Œæ—¶çš„mapå®ç°ä¸­å¼•å…¥äº†ä¸€ä¸ªLoadFactorï¼ˆè´Ÿè½½å› å­ï¼‰ï¼Œå½“ <strong>count &gt; LoadFactor * 2^B</strong> æˆ–overflow bucketè¿‡å¤šæ—¶ï¼Œè¿è¡Œæ—¶ä¼šè‡ªåŠ¨å¯¹mapè¿›è¡Œæ‰©å®¹ã€‚ç›®å‰Goæœ€æ–°1.17ç‰ˆæœ¬LoadFactorè®¾ç½®ä¸º6.5ï¼ˆloadFactorNum/loadFactorDenï¼‰ã€‚è¿™é‡Œæ˜¯Goä¸­ä¸mapæ‰©å®¹ç›¸å…³çš„éƒ¨åˆ†æºç ï¼š</p><pre><code class=\"language-plain\">// $GOROOT/src/runtime/map.go\nconst (\n\t... ...\n\n\tloadFactorNum = 13\n\tloadFactorDen = 2\n\t... ...\n)\n\nfunc mapassign(t *maptype, h *hmap, key unsafe.Pointer) unsafe.Pointer {\n\t... ...\n\tif !h.growing() &amp;&amp; (overLoadFactor(h.count+1, h.B) || tooManyOverflowBuckets(h.noverflow, h.B)) {\n\t\thashGrow(t, h)\n\t\tgoto again // Growing the table invalidates everything, so try again\n\t}\n\t... ...\n}\n</code></pre><p>è¿™ä¸¤æ–¹é¢åŸå› å¯¼è‡´çš„æ‰©å®¹ï¼Œåœ¨è¿è¡Œæ—¶çš„æ“ä½œå…¶å®æ˜¯ä¸ä¸€æ ·çš„ã€‚å¦‚æœæ˜¯å› ä¸ºoverflow bucketè¿‡å¤šå¯¼è‡´çš„â€œæ‰©å®¹â€ï¼Œå®é™…ä¸Šè¿è¡Œæ—¶ä¼šæ–°å»ºä¸€ä¸ªå’Œç°æœ‰è§„æ¨¡ä¸€æ ·çš„bucketæ•°ç»„ï¼Œç„¶ååœ¨assignå’Œdeleteæ—¶åšæ’ç©ºå’Œè¿ç§»ã€‚</p><p>å¦‚æœæ˜¯å› ä¸ºå½“å‰æ•°æ®æ•°é‡è¶…å‡ºLoadFactoræŒ‡å®šæ°´ä½è€Œè¿›è¡Œçš„æ‰©å®¹ï¼Œé‚£ä¹ˆè¿è¡Œæ—¶ä¼šå»ºç«‹ä¸€ä¸ª<strong>ä¸¤å€äºç°æœ‰è§„æ¨¡çš„bucketæ•°ç»„</strong>ï¼Œä½†çœŸæ­£çš„æ’ç©ºå’Œè¿ç§»å·¥ä½œä¹Ÿæ˜¯åœ¨assignå’Œdeleteæ—¶é€æ­¥è¿›è¡Œçš„ã€‚åŸbucketæ•°ç»„ä¼šæŒ‚åœ¨hmapçš„oldbucketsæŒ‡é’ˆä¸‹é¢ï¼Œç›´åˆ°åŸbucketsæ•°ç»„ä¸­æ‰€æœ‰æ•°æ®éƒ½è¿ç§»åˆ°æ–°æ•°ç»„åï¼ŒåŸbucketsæ•°ç»„æ‰ä¼šè¢«é‡Šæ”¾ã€‚ä½ å¯ä»¥ç»“åˆä¸‹é¢çš„mapæ‰©å®¹ç¤ºæ„å›¾æ¥ç†è§£è¿™ä¸ªè¿‡ç¨‹ï¼Œè¿™ä¼šè®©ä½ ç†è§£å¾—æ›´æ·±åˆ»ä¸€äº›ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/6e/29/6e94c7ee51a01fcf2267a7e2145d6929.jpg?wh=1920x1047\" alt=\"å›¾ç‰‡\"></p><h3>mapä¸å¹¶å‘</h3><p>æ¥ç€æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹mapå’Œå¹¶å‘ã€‚ä»ä¸Šé¢çš„å®ç°åŸç†æ¥çœ‹ï¼Œå……å½“mapæè¿°ç¬¦è§’è‰²çš„hmapå®ä¾‹è‡ªèº«æ˜¯æœ‰çŠ¶æ€çš„ï¼ˆhmap.flagsï¼‰ï¼Œè€Œä¸”å¯¹çŠ¶æ€çš„è¯»å†™æ˜¯æ²¡æœ‰å¹¶å‘ä¿æŠ¤çš„ã€‚æ‰€ä»¥è¯´mapå®ä¾‹ä¸æ˜¯å¹¶å‘å†™å®‰å…¨çš„ï¼Œä¹Ÿä¸æ”¯æŒå¹¶å‘è¯»å†™ã€‚å¦‚æœæˆ‘ä»¬å¯¹mapå®ä¾‹è¿›è¡Œå¹¶å‘è¯»å†™ï¼Œç¨‹åºè¿è¡Œæ—¶å°±ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚ä½ å¯ä»¥çœ‹çœ‹ä¸‹é¢è¿™ä¸ªå¹¶å‘è¯»å†™mapçš„ä¾‹å­ï¼š</p><pre><code class=\"language-plain\">package main\n\nimport (\n    \"fmt\"\n    \"time\"\n)\n\nfunc doIteration(m map[int]int) {\n    for k, v := range m {\n        _ = fmt.Sprintf(\"[%d, %d] \", k, v)\n    }\n}\n\nfunc doWrite(m map[int]int) {\n    for k, v := range m {\n        m[k] = v + 1\n    }\n}\n\nfunc main() {\n    m := map[int]int{\n        1: 11,\n        2: 12,\n        3: 13,\n    }\n\n    go func() {\n        for i := 0; i &lt; 1000; i++ {\n            doIteration(m)\n        }\n    }()\n\n    go func() {\n        for i := 0; i &lt; 1000; i++ {\n            doWrite(m)\n        }\n    }()\n\n    time.Sleep(5 * time.Second)\n}\n</code></pre><p>è¿è¡Œè¿™ä¸ªç¤ºä¾‹ç¨‹åºï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°ä¸‹é¢çš„æ‰§è¡Œé”™è¯¯ç»“æœï¼š</p><pre><code class=\"language-plain\">fatal error: concurrent map iteration and map write\n</code></pre><p>ä¸è¿‡ï¼Œå¦‚æœæˆ‘ä»¬ä»…ä»…æ˜¯è¿›è¡Œå¹¶å‘è¯»ï¼Œmapæ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚è€Œä¸”ï¼ŒGo 1.9ç‰ˆæœ¬ä¸­å¼•å…¥äº†æ”¯æŒå¹¶å‘å†™å®‰å…¨çš„sync.Mapç±»å‹ï¼Œå¯ä»¥åœ¨å¹¶å‘è¯»å†™çš„åœºæ™¯ä¸‹æ›¿æ¢æ‰mapã€‚å¦‚æœä½ æœ‰è¿™æ–¹é¢çš„éœ€æ±‚ï¼Œå¯ä»¥æŸ¥çœ‹ä¸€ä¸‹<a href=\"https://pkg.go.dev/sync#Map\">sync.Mapçš„æ‰‹å†Œ</a>ã€‚</p><p>å¦å¤–ï¼Œä½ è¦æ³¨æ„ï¼Œè€ƒè™‘åˆ°mapå¯ä»¥è‡ªåŠ¨æ‰©å®¹ï¼Œmapä¸­æ•°æ®å…ƒç´ çš„valueä½ç½®å¯èƒ½åœ¨è¿™ä¸€è¿‡ç¨‹ä¸­å‘ç”Ÿå˜åŒ–ï¼Œæ‰€ä»¥ <strong>Goä¸å…è®¸è·å–mapä¸­valueçš„åœ°å€ï¼Œè¿™ä¸ªçº¦æŸæ˜¯åœ¨ç¼–è¯‘æœŸé—´å°±ç”Ÿæ•ˆçš„</strong>ã€‚ä¸‹é¢è¿™æ®µä»£ç å°±å±•ç¤ºäº†Goç¼–è¯‘å™¨è¯†åˆ«å‡ºè·å–mapä¸­valueåœ°å€çš„è¯­å¥åï¼Œç»™å‡ºçš„ç¼–è¯‘é”™è¯¯ï¼š</p><pre><code class=\"language-plain\">p := &amp;m[key]  // cannot take the address of m[key]\nfmt.Println(p)\n</code></pre><h2>å°ç»“</h2><p>å¥½äº†ï¼Œä»Šå¤©çš„è¯¾è®²åˆ°è¿™é‡Œå°±ç»“æŸäº†ã€‚è¿™ä¸€èŠ‚è¯¾ï¼Œæˆ‘ä»¬è®²è§£äº†Goè¯­è¨€çš„å¦ä¸€ç±»ååˆ†å¸¸ç”¨çš„å¤åˆæ•°æ®ç±»å‹ï¼šmapã€‚</p><p>åœ¨Goè¯­è¨€ä¸­ï¼Œmapç±»å‹æ˜¯ä¸€ä¸ªæ— åºçš„é”®å€¼å¯¹çš„é›†åˆã€‚å®ƒæœ‰ä¸¤ç§ç±»å‹å…ƒç´ ï¼Œä¸€ç±»æ˜¯é”®ï¼ˆkeyï¼‰ï¼Œå¦ä¸€ç±»æ˜¯å€¼ï¼ˆvalueï¼‰ã€‚åœ¨ä¸€ä¸ªmapä¸­ï¼Œé”®æ˜¯å”¯ä¸€çš„ï¼Œåœ¨é›†åˆä¸­ä¸èƒ½æœ‰ä¸¤ä¸ªç›¸åŒçš„é”®ã€‚Goä¹Ÿæ˜¯é€šè¿‡è¿™ä¸¤ç§å…ƒç´ ç±»å‹æ¥è¡¨ç¤ºä¸€ä¸ªmapç±»å‹ï¼Œä½ è¦è®°å¾—è¿™ä¸ªé€šç”¨çš„mapç±»å‹è¡¨ç¤ºï¼šâ€œmap[key_type]value_typeâ€ã€‚</p><p>mapç±»å‹å¯¹keyå…ƒç´ çš„ç±»å‹æ˜¯æœ‰çº¦æŸçš„ï¼Œå®ƒè¦æ±‚keyå…ƒç´ çš„ç±»å‹å¿…é¡»æ”¯æŒ\"==â€œå’Œâ€!=\"ä¸¤ä¸ªæ¯”è¾ƒæ“ä½œç¬¦ã€‚valueå…ƒç´ çš„ç±»å‹å¯ä»¥æ˜¯ä»»æ„çš„ã€‚</p><p>ä¸è¿‡ï¼Œmapç±»å‹å˜é‡å£°æ˜åå¿…é¡»å¯¹å®ƒè¿›è¡Œåˆå§‹åŒ–åæ‰èƒ½æ“ä½œã€‚mapç±»å‹æ”¯æŒæ’å…¥æ–°é”®å€¼å¯¹ã€æŸ¥æ‰¾å’Œæ•°æ®è¯»å–ã€åˆ é™¤é”®å€¼å¯¹ã€éå†mapä¸­çš„é”®å€¼æ•°æ®ç­‰æ“ä½œï¼ŒGoä¸ºå¼€å‘è€…æä¾›äº†ååˆ†ç®€å•çš„æ“ä½œæ¥å£ã€‚è¿™é‡Œè¦ä½ é‡ç‚¹è®°ä½çš„æ˜¯ï¼Œæˆ‘ä»¬åœ¨æŸ¥æ‰¾å’Œæ•°æ®è¯»å–æ—¶ä¸€å®šè¦ä½¿ç”¨â€œcomma okâ€æƒ¯ç”¨æ³•ã€‚æ­¤å¤–ï¼Œmapå˜é‡åœ¨å‡½æ•°ä¸æ–¹æ³•é—´ä¼ é€’çš„å¼€é”€å¾ˆå°ï¼Œå¹¶ä¸”åœ¨å‡½æ•°å†…éƒ¨é€šè¿‡mapæè¿°ç¬¦å¯¹mapçš„ä¿®æ”¹ä¼šå¯¹å‡½æ•°å¤–éƒ¨å¯è§ã€‚</p><p>å¦å¤–ï¼Œmapçš„å†…éƒ¨å®ç°è¦æ¯”åˆ‡ç‰‡å¤æ‚å¾—å¤šï¼Œå®ƒæ˜¯ç”±Goç¼–è¯‘å™¨ä¸è¿è¡Œæ—¶è”åˆå®ç°çš„ã€‚Goç¼–è¯‘å™¨åœ¨ç¼–è¯‘é˜¶æ®µä¼šå°†è¯­æ³•å±‚é¢çš„mapæ“ä½œï¼Œé‡å†™ä¸ºè¿è¡Œæ—¶å¯¹åº”çš„å‡½æ•°è°ƒç”¨ã€‚Goè¿è¡Œæ—¶åˆ™é‡‡ç”¨äº†é«˜æ•ˆçš„ç®—æ³•å®ç°äº†mapç±»å‹çš„å„ç±»æ“ä½œï¼Œè¿™é‡Œæˆ‘å»ºè®®ä½ è¦ç»“åˆGoé¡¹ç›®æºç æ¥ç†è§£mapçš„å…·ä½“å®ç°ã€‚</p><p>å’Œåˆ‡ç‰‡ä¸€æ ·ï¼Œmapæ˜¯Goè¯­è¨€æä¾›çš„é‡è¦æ•°æ®ç±»å‹ï¼Œä¹Ÿæ˜¯Gopheræ—¥å¸¸Goç¼–ç æ˜¯æœ€å¸¸ä½¿ç”¨çš„ç±»å‹ä¹‹ä¸€ã€‚æˆ‘ä»¬åœ¨æ—¥å¸¸ä½¿ç”¨mapçš„åœºåˆè¦æŠŠæ¡ä½ä¸‹é¢å‡ ä¸ªè¦ç‚¹ï¼Œä¸è¦èµ°å¼¯è·¯ï¼š</p><ul>\n<li>ä¸è¦ä¾èµ–mapçš„å…ƒç´ éå†é¡ºåºï¼›</li>\n<li>mapä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä¸æ”¯æŒå¹¶å‘è¯»å†™ï¼›</li>\n<li>ä¸è¦å°è¯•è·å–mapä¸­å…ƒç´ ï¼ˆvalueï¼‰çš„åœ°å€ã€‚</li>\n</ul><h2>æ€è€ƒé¢˜</h2><p>é€šè¿‡ä¸Šé¢çš„å­¦ä¹ ï¼Œæˆ‘ä»¬çŸ¥é“å¯¹mapç±»å‹è¿›è¡Œéå†æ‰€å¾—åˆ°çš„é”®çš„æ¬¡åºæ˜¯éšæœºçš„ï¼Œé‚£ä¹ˆæˆ‘æƒ³è¯·ä½ æ€è€ƒå¹¶å®ç°ä¸€ä¸ªæ–¹æ³•ï¼Œè®©æˆ‘ä»¬èƒ½å¯¹mapçš„è¿›è¡Œç¨³å®šæ¬¡åºéå†ï¼ŸæœŸå¾…åœ¨ç•™è¨€åŒºçœ‹åˆ°ä½ çš„æƒ³æ³•ã€‚</p><p>æ¬¢è¿ä½ æŠŠè¿™èŠ‚è¯¾åˆ†äº«ç»™æ›´å¤šå¯¹Goè¯­è¨€mapç±»å‹æ„Ÿå…´è¶£çš„æœ‹å‹ã€‚æˆ‘æ˜¯Tony Baiï¼Œæˆ‘ä»¬ä¸‹èŠ‚è¯¾è§ã€‚</p>","comments":[{"had_liked":false,"id":321964,"user_name":"ç”¨0å’Œ1æ”¹å˜è‡ªå·±","can_delete":false,"product_type":"c1","uid":1527530,"ip_address":"","ucode":"42B8F6ECF6BDD0","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/lfMbV8RibrhFxjILg4550cZiaay64mTh5Zibon64TiaicC8jDMEK7VaXOkllHSpS582Jl1SUHm6Jib2AticVlHibiaBvUOA/132","comment_is_top":false,"comment_ctime":1637118799,"is_pvip":false,"replies":[{"id":117136,"content":"âœ…","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1637555989,"ip_address":"","comment_id":321964,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"å¯ä»¥ç”¨ä¸€ä¸ªæœ‰åºç»“æ„å­˜å‚¨key,å¦‚slice,ç„¶åforè¿™ä¸ªslice,ç”¨keyè·å–å€¼ã€‚èµ„æ–™æ¥æºè‡³ï¼šhttps:&#47;&#47;go.dev&#47;blog&#47;maps","like_count":36},{"had_liked":false,"id":343494,"user_name":"ddh","can_delete":false,"product_type":"c1","uid":2806043,"ip_address":"","ucode":"8E852375365F16","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLBFkSq1oiaEMRjtyyv4ZpCI0OuaSsqs04ODm0OkZF6QhsAh3SvqhxibS2n7PLAVZE3QRSn5Hic0DyXg/132","comment_is_top":false,"comment_ctime":1650875111,"is_pvip":false,"replies":[{"id":125434,"content":"å¥½é—®é¢˜ï¼\n\nå…³äºè¿™ä¸ªé—®é¢˜ï¼Œå®˜æ–¹æ²¡æœ‰æ˜ç¡®è¯´æ˜ã€‚\n\næˆ‘è§‰å¾—ä¹‹æ‰€ä»¥map elementæ˜¯ä¸å¯å¯»å€çš„ï¼Œè¿˜æ˜¯å¤æ‚æ€§å’Œå®‰å…¨æ€§çš„è€ƒè™‘ã€‚\n\nGo sliceå’Œmapéƒ½æ˜¯å¤åˆæ•°æ®ç±»å‹ï¼Œä½†ä¸¤è€…çš„å†…éƒ¨å®ç°å¤æ‚åº¦å´è¿œè¿œä¸åŒã€‚mapè¦è¿œå¤æ‚äºsliceã€‚\n\nsliceçš„å…ƒç´ çš„åœ°å€è¦ä¹ˆåœ¨è¦ä¹ˆåœ¨åŸåº•å±‚æ•°ç»„ä¸­ï¼Œè¦ä¹ˆåœ¨æ‰©å®¹åçš„æ–°æ•°ç»„ä¸­ã€‚å¹¶ä¸”sliceæ‰©å®¹æ˜¯ä¸€æ¬¡å®Œæˆçš„ã€‚\nä½†mapæ‰©å®¹æ˜¯â€œèš‚èšæ¬å®¶â€ï¼Œelementä½ç½®å¤æ‚ä¸€äº›ï¼Œå¯èƒ½åœ¨åŸbucketä¸­ã€å¯èƒ½åœ¨overflow bucketä¸­ï¼Œä¹Ÿå¯èƒ½åœ¨æ–°æ‰©å®¹çš„bucketä¸­ã€‚\n\næ­¤å¤–ï¼Œä¸€æ—¦æš´éœ²map elementçš„åœ°å€ï¼Œæ¯”å¦‚æˆ‘ä»¬ç”¨ä¸€ä¸ªæ ˆä¸Šçš„æŒ‡é’ˆå˜é‡å¼•ç”¨äº†è¯¥åœ°å€ï¼Œå½“å‘ç”Ÿelementç§»åŠ¨æ—¶ï¼Œgoå°±è¦è€ƒè™‘è¿å¸¦å˜æ›´è¿™äº›æ ˆä¸ŠæŒ‡é’ˆå˜é‡çš„æŒ‡å‘ï¼Œè¿™äº›å˜æ›´æ“ä½œåœ¨æ¯ä¸ªmapæ“ä½œä¸­éƒ½ä¼šå¯¼è‡´è¿è¡Œæ—¶æ¶ˆè€—çš„å¢åŠ ã€‚\n           \nè‡³äºå®‰å…¨æ€§ï¼Œmapæœ‰ç€ä¸€ä¸ªå¤æ‚å†…éƒ¨ç»“æ„ï¼Œè¿™ä¸ªç»“æ„ç¯ç¯ç›¸æ‰£ã€‚ä¸€æ—¦map elementåœ°å€è¢«æš´éœ²ï¼Œé€šè¿‡è¯¥åœ°å€ä¸ä»…å¯ä»¥ä¿®æ”¹valueå€¼ï¼Œè¿˜å¯èƒ½ä¼šå¯¹mapå†…éƒ¨ç»“æ„é€ æˆç ´åï¼Œè¿™ç§ç ´åå°†å¯¼è‡´æ•´ä¸ªmapå·¥ä½œä¸æ­£å¸¸ã€‚è€Œsliceçš„elementå³ä¾¿è¢«hackï¼Œæ”¹æ‰çš„ä¹Ÿåªæ˜¯å…ƒç´ å€¼ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1651010354,"ip_address":"","comment_id":343494,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"è¯·é—®ä¸€ä¸‹è€å¸ˆï¼Œ map å…ƒç´ ä¸èƒ½å¯»å€ï¼Œ æ˜¯å› ä¸ºåŠ¨æ€æ‰©å®¹ï¼Œ é‚£ä¹ˆåˆ‡ç‰‡ä¸ä¹Ÿæœ‰åŠ¨æ€æ‰©å®¹å—ã€‚ ä¸ºä»€ä¹ˆåˆ‡ç‰‡å…ƒç´ å¯ä»¥å¯»å€å‘¢ï¼Ÿ  éš¾é“åˆ‡ç‰‡åŠ¨æ€æ‰©å®¹ä¹‹åï¼Œ å®ƒçš„å…ƒç´ åœ°å€ä¸ä¼šå˜å—","like_count":19,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":532204,"discussion_content":"âœ…","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637555989,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1460415,"avatar":"https://static001.geekbang.org/account/avatar/00/16/48/bf/3d76ea74.jpg","nickname":"çœ‹ä¸åˆ°deé¢œè‰²","note":"","ucode":"04B803AED7C22F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":596611,"discussion_content":"LinkedHashmap","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1671111793,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1886796,"avatar":"","nickname":"å¼ æ¯…","note":"","ucode":"0707311786C079","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":610912,"discussion_content":"ä¸é”™","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1679842528,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":341590,"user_name":"thomas","can_delete":false,"product_type":"c1","uid":1016777,"ip_address":"","ucode":"9AB945308F1B50","user_header":"https://static001.geekbang.org/account/avatar/00/0f/83/c9/5d03981a.jpg","comment_is_top":false,"comment_ctime":1649727478,"is_pvip":false,"replies":[{"id":124887,"content":"è¿™ä¸€è¯é¢˜è¦è¿½æº¯åˆ°Go 1.0ç‰ˆæœ¬å‘å¸ƒçš„æ—¶å€™ï¼Œä»Go 1.0ç‰ˆæœ¬çš„å‘å¸ƒæ–‡æ¡£- https:&#47;&#47;go.dev&#47;doc&#47;go1ä¸­ï¼Œæˆ‘ä»¬èƒ½æ‰¾åˆ°å¦‚ä¸‹å†…å®¹ï¼š\n\n\nThe old language specification did not define the order of iteration for maps, and in practice it differed across hardware platforms. This caused tests that iterated over maps to be fragile and non-portable, with the unpleasant property that a test might always pass on one machine but break on another.\n                         \nIn Go 1, the order in which elements are visited when iterating over a map using a for range statement is defined to be unpredictable, even if the same loop is run multiple times with the same map. Code should not assume that the elements are visited in any particular order.\n                         \nThis change means that code that depends on iteration order is very likely to break early and be fixed long before it becomes a problem. Just as important, it allows the map implementation to ensure better map balancing even when programs are using range loops to select an element from a map.                                \n                                            \n                                                                             \nç¿»è¯‘è¿‡æ¥ï¼Œå¤§è‡´æ„æ€å°±æ˜¯ï¼š1.0ç‰ˆæœ¬ä¹‹å‰çš„è¯­è¨€è§„èŒƒä¸­æ²¡æœ‰è§„å®šmapçš„è¿­ä»£æ¬¡åºï¼Œä»è€Œå¯¼è‡´åœ¨å®è·µä¸­çš„ä¸€äº›ç³Ÿç³•çš„å¼€å‘è¿è¡Œä½“éªŒã€‚äºæ˜¯Goå›¢é˜Ÿé€‰\næ‹©æ•…æ„åœ¨mapä¸­åŠ å…¥éšæœºè¿­ä»£åŠŸèƒ½ï¼Œè¿™æ ·ä¸€æ—¦å‡ºç°å¼€å‘äººå‘˜ä¾èµ–keyè¿­ä»£é¡ºåºçš„é”™è¯¯è¡Œä¸ºï¼Œè¿™ä¸€è¡Œä¸ºå¯¼è‡´çš„é—®é¢˜åœ¨å¼€å‘å’Œæµ‹è¯•æ—©æœŸå°±èƒ½è¢«åŠæ—¶å‘ç°ï¼Œè€Œä¸ä¼šå‡ºç°åœ¨ç”Ÿäº§è¿è¡Œç¯å¢ƒä¸­å¯¼è‡´æ›´å¤§çš„å±å®³ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1649905658,"ip_address":"","comment_id":341590,"utype":1}],"discussion_count":1,"race_medal":1,"score":2,"product_id":100093501,"comment_content":"goå›¢é˜Ÿä¸ºä»€ä¹ˆè¦æ•…æ„æŠŠmapçš„éå†è®¾ç½®ä¸ºéšæœºï¼Ÿ","like_count":17,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":562902,"discussion_content":"è¿™ä¸€è¯é¢˜è¦è¿½æº¯åˆ°Go 1.0ç‰ˆæœ¬å‘å¸ƒçš„æ—¶å€™ï¼Œä»Go 1.0ç‰ˆæœ¬çš„å‘å¸ƒæ–‡æ¡£- https://go.dev/doc/go1ä¸­ï¼Œæˆ‘ä»¬èƒ½æ‰¾åˆ°å¦‚ä¸‹å†…å®¹ï¼š\n\n\nThe old language specification did not define the order of iteration for maps, and in practice it differed across hardware platforms. This caused tests that iterated over maps to be fragile and non-portable, with the unpleasant property that a test might always pass on one machine but break on another.\n                         \nIn Go 1, the order in which elements are visited when iterating over a map using a for range statement is defined to be unpredictable, even if the same loop is run multiple times with the same map. Code should not assume that the elements are visited in any particular order.\n                         \nThis change means that code that depends on iteration order is very likely to break early and be fixed long before it becomes a problem. Just as important, it allows the map implementation to ensure better map balancing even when programs are using range loops to select an element from a map.                                \n                                            \n                                                                             \nç¿»è¯‘è¿‡æ¥ï¼Œå¤§è‡´æ„æ€å°±æ˜¯ï¼š1.0ç‰ˆæœ¬ä¹‹å‰çš„è¯­è¨€è§„èŒƒä¸­æ²¡æœ‰è§„å®šmapçš„è¿­ä»£æ¬¡åºï¼Œä»è€Œå¯¼è‡´åœ¨å®è·µä¸­çš„ä¸€äº›ç³Ÿç³•çš„å¼€å‘è¿è¡Œä½“éªŒã€‚äºæ˜¯Goå›¢é˜Ÿé€‰\næ‹©æ•…æ„åœ¨mapä¸­åŠ å…¥éšæœºè¿­ä»£åŠŸèƒ½ï¼Œè¿™æ ·ä¸€æ—¦å‡ºç°å¼€å‘äººå‘˜ä¾èµ–keyè¿­ä»£é¡ºåºçš„é”™è¯¯è¡Œä¸ºï¼Œè¿™ä¸€è¡Œä¸ºå¯¼è‡´çš„é—®é¢˜åœ¨å¼€å‘å’Œæµ‹è¯•æ—©æœŸå°±èƒ½è¢«åŠæ—¶å‘ç°ï¼Œè€Œä¸ä¼šå‡ºç°åœ¨ç”Ÿäº§è¿è¡Œç¯å¢ƒä¸­å¯¼è‡´æ›´å¤§çš„å±å®³ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649905658,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":346967,"user_name":"Geek_244c46","can_delete":false,"product_type":"c1","uid":2034469,"ip_address":"","ucode":"419D97DA9F1F9B","user_header":"","comment_is_top":false,"comment_ctime":1653565585,"is_pvip":false,"replies":[{"id":126525,"content":"ç”¨ä»£ç å›ç­”ä½ çš„é—®é¢˜ï¼šï¼‰\n\n&#47;&#47; testnilasmapkey.go\npackage main\n\nfunc main() {\n\tvar m = make(map[*int]*int)\n\tm[nil] = nil\n\n\tprintln(m)\n\tprintln(len(m))\n\n\tvar b = 5\n\tm[nil] = &amp;b\n\tp := m[nil]\n\tprintln(*p)\n\n}\n\n0xc0000466b0\n1\n5\n\nnilä½œä¸ºvalueä¸æ–°é²œã€‚ä½†nilå¯ä½œä¸ºkeyå¯æ˜¯å¾ˆå¤šäººéƒ½ä¸çŸ¥é“çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1653626868,"ip_address":"","comment_id":346967,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"mapçš„keyå’Œvalueçš„å€¼ï¼Œæ˜¯å¦å¯ä»¥ä¸ºnull","like_count":12,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":573747,"discussion_content":"ç”¨ä»£ç å›ç­”ä½ çš„é—®é¢˜ï¼šï¼‰\n\n// testnilasmapkey.go\npackage main\n\nfunc main() {\n\tvar m = make(map[*int]*int)\n\tm[nil] = nil\n\n\tprintln(m)\n\tprintln(len(m))\n\n\tvar b = 5\n\tm[nil] = &amp;b\n\tp := m[nil]\n\tprintln(*p)\n\n}\n\n0xc0000466b0\n1\n5\n\nnilä½œä¸ºvalueä¸æ–°é²œã€‚ä½†nilå¯ä½œä¸ºkeyå¯æ˜¯å¾ˆå¤šäººéƒ½ä¸çŸ¥é“çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1653626868,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2576960,"avatar":"https://static001.geekbang.org/account/avatar/00/27/52/40/db9b0eb2.jpg","nickname":"è‡ªç”±","note":"","ucode":"4E3B53D29D86CA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":637324,"discussion_content":"nil æ˜¯å¯ä»¥ç”¨ == æˆ– != æ¯”è¾ƒçš„ï¼Œæ‰€ä»¥å¯ä»¥ä½œä¸º map çš„ key ~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1708350935,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":573747,"ip_address":"è´µå·","group_id":0},"score":637324,"extra":""}]}]},{"had_liked":false,"id":342942,"user_name":"flexiver","can_delete":false,"product_type":"c1","uid":2889691,"ip_address":"","ucode":"5D83DFA90826E1","user_header":"","comment_is_top":false,"comment_ctime":1650542814,"is_pvip":false,"replies":[{"id":125300,"content":"åœ¨Goé¡¹ç›®æºç (Go 1.17ç‰ˆæœ¬)çš„ src&#47;cmd&#47;compile&#47;internal&#47;reflectdata&#47;reflect.goä¸­ï¼Œfunc MapBucketType(t *types.Type) *types.Type&gt;è¿™ä¸ªå‡½æ•°å®ç°ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å‹¾å‹’å‡ºä¸€ä¸ªbucketæ¡¶çš„ç»“æ„ï¼š\n\ntophash\nkeys\nvalues\noverflow pointer\n\nä¸è¿‡è¿™ä¸ªoverflow pointeræœ‰ä¸¤ç§æƒ…å†µï¼š\n\n      &#47;&#47; If keys and elems have no pointers, the map implementation\n      &#47;&#47; can keep a list of overflow pointers on the side so that\n      &#47;&#47; buckets can be marked as having no pointers.\n      &#47;&#47; Arrange for the bucket to have no pointers by changing\n      &#47;&#47; the type of the overflow field to uintptr in this case.\n      &#47;&#47; See comment on hmap.overflow in runtime&#47;map.go.\n      otyp := types.Types[types.TUNSAFEPTR]\n      if !elemtype.HasPointers() &amp;&amp; !keytype.HasPointers() {\n          otyp = types.Types[types.TUINTPTR]\n      }\n\nå½“keyå’Œvalueä¸­éƒ½æ²¡æœ‰æŒ‡é’ˆæ—¶ï¼Œæ¯”å¦‚map[int]intã€‚æ­¤æ—¶è€ƒè™‘åˆ°gcä¼˜åŒ–ï¼Œç¼–è¯‘å™¨å°†overflowçš„ç±»å‹è®¾ç½®ä¸ºuintptrã€‚\n\nuintptræ˜¯ä¸€ä¸ªæ•´å‹ï¼Œæ— æ³•è¢«GCè¯†åˆ«ï¼Œè¿™æ ·ä¸€æ¥uintptræŒ‡å‘çš„overflow bucketå°±æ²¡æœ‰æŒ‡å‘å®ƒçš„æŒ‡é’ˆï¼Œè¿™æ ·gcå°±ä¼šå°†overflow bucketè§†ä¸ºunrea\nchableçš„memå—è€Œå°†å…¶é‡Šæ”¾æ‰ã€‚ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œhmapä¸­çš„extraæ­¤æ—¶å°±ä¼šæŒ‡å‘ä¸Šé¢è¿™ç±»bucketçš„overflow bucketï¼Œä¿è¯keyå’Œvalueä¸­éƒ½ä¸å«æŒ‡é’ˆæ—¶ï¼Œoverflow bucketä¾æ—§å¯ä»¥ä¸è¢«gcã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1650608890,"ip_address":"","comment_id":342942,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"è€å¸ˆï¼Œæƒ³è¯·é—®ä¸€ä¸‹ï¼Œhmapè¿™ä¸ªç»“æ„ä¸­çš„extraå­—æ®µï¼Œ åœ¨keyå’Œvalueéƒ½ä¸æ˜¯æŒ‡é’ˆçš„æƒ…å†µä¸‹ï¼Œä¼šå­˜å‚¨æ‰€æœ‰çš„overflow bucketçš„æŒ‡é’ˆï¼Œé‡Œé¢æœ‰æåˆ°ä¸€ä¸ªå†…è”ï¼Œè¿™ä¸ªå†…è”æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿä»¥åŠä¸ºä»€ä¹ˆå½“keyå’Œvalueéƒ½ä¸æ˜¯æŒ‡é’ˆçš„æƒ…å†µä¸‹ï¼Œä¼šå°†bucketä¸­çš„overflowæŒ‡é’ˆå…¨éƒ¨æ”¾åˆ°extraå­—æ®µå­˜å‚¨","like_count":7,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":573747,"discussion_content":"ç”¨ä»£ç å›ç­”ä½ çš„é—®é¢˜ï¼šï¼‰\n\n// testnilasmapkey.go\npackage main\n\nfunc main() {\n\tvar m = make(map[*int]*int)\n\tm[nil] = nil\n\n\tprintln(m)\n\tprintln(len(m))\n\n\tvar b = 5\n\tm[nil] = &amp;b\n\tp := m[nil]\n\tprintln(*p)\n\n}\n\n0xc0000466b0\n1\n5\n\nnilä½œä¸ºvalueä¸æ–°é²œã€‚ä½†nilå¯ä½œä¸ºkeyå¯æ˜¯å¾ˆå¤šäººéƒ½ä¸çŸ¥é“çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1653626868,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2576960,"avatar":"https://static001.geekbang.org/account/avatar/00/27/52/40/db9b0eb2.jpg","nickname":"è‡ªç”±","note":"","ucode":"4E3B53D29D86CA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":637324,"discussion_content":"nil æ˜¯å¯ä»¥ç”¨ == æˆ– != æ¯”è¾ƒçš„ï¼Œæ‰€ä»¥å¯ä»¥ä½œä¸º map çš„ key ~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1708350935,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":573747,"ip_address":"è´µå·","group_id":0},"score":637324,"extra":""}]}]},{"had_liked":false,"id":322384,"user_name":"ä¸è´Ÿé’æ˜¥ä¸è´Ÿå·±ğŸ¤˜","can_delete":false,"product_type":"c1","uid":1363671,"ip_address":"","ucode":"A6DD8E8B20EA6E","user_header":"https://static001.geekbang.org/account/avatar/00/14/ce/d7/5315f6ce.jpg","comment_is_top":false,"comment_ctime":1637334390,"is_pvip":false,"replies":[{"id":117172,"content":"âœ…","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1637565982,"ip_address":"","comment_id":322384,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"å¯ä»¥æŠŠkey èµ‹å€¼åˆ°å˜é‡ï¼Œä½¿ç”¨sort æ’åºï¼Œåœ¨éå†","like_count":6,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":566130,"discussion_content":"åœ¨Goé¡¹ç›®æºç (Go 1.17ç‰ˆæœ¬)çš„ src/cmd/compile/internal/reflectdata/reflect.goä¸­ï¼Œfunc MapBucketType(t *types.Type) *types.Type&gt;è¿™ä¸ªå‡½æ•°å®ç°ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å‹¾å‹’å‡ºä¸€ä¸ªbucketæ¡¶çš„ç»“æ„ï¼š\n\ntophash\nkeys\nvalues\noverflow pointer\n\nä¸è¿‡è¿™ä¸ªoverflow pointeræœ‰ä¸¤ç§æƒ…å†µï¼š\n\n      // If keys and elems have no pointers, the map implementation\n      // can keep a list of overflow pointers on the side so that\n      // buckets can be marked as having no pointers.\n      // Arrange for the bucket to have no pointers by changing\n      // the type of the overflow field to uintptr in this case.\n      // See comment on hmap.overflow in runtime/map.go.\n      otyp := types.Types[types.TUNSAFEPTR]\n      if !elemtype.HasPointers() &amp;&amp; !keytype.HasPointers() {\n          otyp = types.Types[types.TUINTPTR]\n      }\n\nå½“keyå’Œvalueä¸­éƒ½æ²¡æœ‰æŒ‡é’ˆæ—¶ï¼Œæ¯”å¦‚map[int]intã€‚æ­¤æ—¶è€ƒè™‘åˆ°gcä¼˜åŒ–ï¼Œç¼–è¯‘å™¨å°†overflowçš„ç±»å‹è®¾ç½®ä¸ºuintptrã€‚\n\nuintptræ˜¯ä¸€ä¸ªæ•´å‹ï¼Œæ— æ³•è¢«GCè¯†åˆ«ï¼Œè¿™æ ·ä¸€æ¥uintptræŒ‡å‘çš„overflow bucketå°±æ²¡æœ‰æŒ‡å‘å®ƒçš„æŒ‡é’ˆï¼Œè¿™æ ·gcå°±ä¼šå°†overflow bucketè§†ä¸ºunrea\nchableçš„memå—è€Œå°†å…¶é‡Šæ”¾æ‰ã€‚ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œhmapä¸­çš„extraæ­¤æ—¶å°±ä¼šæŒ‡å‘ä¸Šé¢è¿™ç±»bucketçš„overflow bucketï¼Œä¿è¯keyå’Œvalueä¸­éƒ½ä¸å«æŒ‡é’ˆæ—¶ï¼Œoverflow bucketä¾æ—§å¯ä»¥ä¸è¢«gcã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650608891,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":361381,"user_name":"Unknown element","can_delete":false,"product_type":"c1","uid":2028277,"ip_address":"åŒ—äº¬","ucode":"34A129800D0238","user_header":"https://static001.geekbang.org/account/avatar/00/1e/f2/f5/b82f410d.jpg","comment_is_top":false,"comment_ctime":1667459309,"is_pvip":false,"replies":[{"id":131600,"content":"å¥½é—®é¢˜ã€‚è¿™ä¸ªç­‰é‡æ‰©å®¹æ¥è‡ªè¿™ä¸ªissueï¼šhttps:&#47;&#47;github.com&#47;golang&#47;go&#47;issues&#47;16070  è¿™æ˜¯ä¸€ç§æ¯”è¾ƒç‰¹æ®Šçš„æƒ…å†µï¼Œå³å½“æŒç»­å‘å“ˆå¸Œä¸­æ’å…¥æ•°æ®ï¼Œç„¶ååˆå°†å®ƒä»¬å…¨éƒ¨åˆ é™¤æ—¶ï¼Œè¿™ä¸ªè¿‡ç¨‹å¦‚æœè§¦å‘å¢å®¹æ‰©å®¹ï¼Œå°±ä¼šå¯¼è‡´overflow bucketè¿‡å¤šï¼Œä½†æ­¤æ—¶åŸbucketä¸­å·²ç»æ²¡æœ‰æ•°æ®äº†ã€‚æ‰€ä»¥goå¼•å…¥äº†åˆ©ç”¨ç°æœ‰æ‰©å®¹æœºåˆ¶çš„ç­‰é‡æ‰©å®¹ https:&#47;&#47;github.com&#47;golang&#47;go&#47;commit&#47;9980b70cb460f27907a003674ab1b9bea24a847c å°†åŸbucketçš„overflow bucketä¸­çš„æ•°æ®é‡æ–°æŒªåˆ°æ–°bucketä¸­ã€‚ç®—æ³•è¾ƒå¤æ‚ï¼Œä¸“æ å®šä½å…¥é—¨ï¼Œæ‰€ä»¥æ²¡è¿›è¡Œæ·±å…¥ã€‚æ„Ÿå…´è¶£å¯ä»¥è¯»ä¸€ä¸‹è¿™ä¸ªcl commitçš„æºç ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1667819676,"ip_address":"åŒ—äº¬","comment_id":361381,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"è€å¸ˆæˆ‘æƒ³é—®ä¸‹è¿™é‡Œï¼š\nâ€œå¦‚æœæ˜¯å› ä¸º overflow bucket è¿‡å¤šå¯¼è‡´çš„â€œæ‰©å®¹â€ï¼Œå®é™…ä¸Šè¿è¡Œæ—¶ä¼šæ–°å»ºä¸€ä¸ªå’Œç°æœ‰è§„æ¨¡ä¸€æ ·çš„ bucket æ•°ç»„ï¼Œç„¶ååœ¨ assign å’Œ delete æ—¶åšæ’ç©ºå’Œè¿ç§»ã€‚â€\nå¦‚æœbucketè§„æ¨¡ä¸å˜çš„è¯ï¼Œé‚£æ‰€æœ‰keyåœ¨hashä¹‹åè¿˜æ˜¯åˆ†åˆ°åŸæ¥çš„æ¡¶ä¸­ï¼Œå¥½åƒè¯¥overflowè¿˜æ˜¯ä¼šoverflowï¼Ÿä¸»è¦æ˜¯å› ä¸ºè¿™é‡Œæ—¢æ²¡æœ‰é€šè¿‡çœŸæ­£å¢åŠ æ¡¶çš„æ•°é‡å®ç°æ‰©å®¹ï¼Œä¹Ÿæ²¡æœ‰é€šè¿‡æ›´æ¢hashå‡½æ•°æ”¹å˜keyåœ¨æ¡¶ä¸­çš„åˆ†å¸ƒï¼Œé‚£ä¹ˆè¿™ä¸ªoverflowçš„é—®é¢˜åˆ°åº•æ˜¯æ€ä¹ˆè§£å†³çš„å‘¢ï¼Ÿè°¢è°¢è€å¸ˆ","like_count":5,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":532277,"discussion_content":"âœ…","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637565982,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":329484,"user_name":"æ–‡ç»","can_delete":false,"product_type":"c1","uid":1072346,"ip_address":"","ucode":"2C059BD2A4276B","user_header":"https://static001.geekbang.org/account/avatar/00/10/5c/da/0a8bc27b.jpg","comment_is_top":false,"comment_ctime":1641365885,"is_pvip":true,"replies":[{"id":120037,"content":"è¿‡å¥–ã€‚å…¶å®åŸç†è¿™ä¸œè¥¿æœ€ç»ˆè¿˜æ˜¯è¦è½åˆ°ä»£ç ä¸Šã€‚è€Œä¸”ä¸åŒç‰ˆæœ¬å®ç°ä¹Ÿæœ‰å·®å¼‚ã€‚è¦æƒ³çœŸæ­£æŠŠåŸç†åƒé€ï¼Œè¿˜å¾—è‡ªå·±å¤šè¿‡å‡ éä»£ç ","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1641435032,"ip_address":"","comment_id":329484,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"æˆ‘çœ‹äº†ã€ŠGoè¯­è¨€å®è·µã€‹ï¼Œã€ŠGoä¸“å®¶ç¼–ç¨‹ã€‹ï¼Œã€ŠGoè¯­è¨€åº•å±‚åŸç†å‰–æã€‹è¿™å‡ æœ¬ä¹¦å¯¹mapçš„æè¿°ï¼Œå¯¹æ¯”æ‰å‘ç°ç™½è€å¸ˆè®²å¾—æœ€æ¸…æ™°ï¼Œåœ¨å°è£…å’Œç»†èŠ‚æ–¹é¢æ‹¿æå¾—æœ€å¥½ï¼Œå¤§å¤§åœ°èµğŸ‘ å‰©ä¸‹ä¸æ¸…æ¥šçš„åœ°æ–¹å°±åªèƒ½è‡ªå·±çœ‹æºç äº†ã€‚","like_count":4,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":592955,"discussion_content":"å¥½é—®é¢˜ã€‚è¿™ä¸ªç­‰é‡æ‰©å®¹æ¥è‡ªè¿™ä¸ªissueï¼šhttps://github.com/golang/go/issues/16070  è¿™æ˜¯ä¸€ç§æ¯”è¾ƒç‰¹æ®Šçš„æƒ…å†µï¼Œå³å½“æŒç»­å‘å“ˆå¸Œä¸­æ’å…¥æ•°æ®ï¼Œç„¶ååˆå°†å®ƒä»¬å…¨éƒ¨åˆ é™¤æ—¶ï¼Œè¿™ä¸ªè¿‡ç¨‹å¦‚æœè§¦å‘å¢å®¹æ‰©å®¹ï¼Œå°±ä¼šå¯¼è‡´overflow bucketè¿‡å¤šï¼Œä½†æ­¤æ—¶åŸbucketä¸­å·²ç»æ²¡æœ‰æ•°æ®äº†ã€‚æ‰€ä»¥goå¼•å…¥äº†åˆ©ç”¨ç°æœ‰æ‰©å®¹æœºåˆ¶çš„ç­‰é‡æ‰©å®¹ https://github.com/golang/go/commit/9980b70cb460f27907a003674ab1b9bea24a847c å°†åŸbucketçš„overflow bucketä¸­çš„æ•°æ®é‡æ–°æŒªåˆ°æ–°bucketä¸­ã€‚ç®—æ³•è¾ƒå¤æ‚ï¼Œä¸“æ å®šä½å…¥é—¨ï¼Œæ‰€ä»¥æ²¡è¿›è¡Œæ·±å…¥ã€‚æ„Ÿå…´è¶£å¯ä»¥è¯»ä¸€ä¸‹è¿™ä¸ªcl commitçš„æºç ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1667819676,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":3794407,"avatar":"","nickname":"Geek_3d0fe8","note":"","ucode":"E75EACDA00E7A6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":638176,"discussion_content":"ä¹‹å‰èƒŒå…«è‚¡çš„æ—¶å€™ä¸€ç›´ç–‘æƒ‘è¿™ä¸ªç­‰é‡æ‰©å®¹æœ‰ä»€ä¹ˆæ„ä¹‰ï¼Œè¿™ä¸ªè®²å¾—çœŸå¥½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1709304631,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":592955,"ip_address":"å¹¿ä¸œ","group_id":0},"score":638176,"extra":""}]}]},{"had_liked":false,"id":321942,"user_name":"ddh","can_delete":false,"product_type":"c1","uid":2806043,"ip_address":"","ucode":"8E852375365F16","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLBFkSq1oiaEMRjtyyv4ZpCI0OuaSsqs04ODm0OkZF6QhsAh3SvqhxibS2n7PLAVZE3QRSn5Hic0DyXg/132","comment_is_top":false,"comment_ctime":1637114125,"is_pvip":false,"replies":[{"id":117134,"content":"æ˜¯ä¸€ä¸ªå¯è¡Œæ–¹æ³•ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1637555959,"ip_address":"","comment_id":321942,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"æŠŠkeyå­˜åˆ°æœ‰åºåˆ‡ç‰‡ä¸­ï¼Œç”¨åˆ‡ç‰‡éå†","like_count":4,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":532202,"discussion_content":"æ˜¯ä¸€ä¸ªå¯è¡Œæ–¹æ³•ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637555959,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1351076,"avatar":"https://static001.geekbang.org/account/avatar/00/14/9d/a4/e481ae48.jpg","nickname":"lesserror","note":"","ucode":"25A54D1165FCF6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":531101,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637230154,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":324432,"user_name":"wu526","can_delete":false,"product_type":"c1","uid":1022129,"ip_address":"","ucode":"69282EB175B48E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/98/b1/f89a84d0.jpg","comment_is_top":false,"comment_ctime":1638431723,"is_pvip":false,"replies":[{"id":117975,"content":"go mapåº•å±‚çš„hashå‡½æ•°è¦è€ƒè™‘é€šç”¨æ€§ã€‚è°ä¹Ÿä¸èƒ½é¢„æµ‹ç”¨æˆ·ä¼šä½¿ç”¨ä»€ä¹ˆæ ·çš„keyæ•°æ®ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1638829832,"ip_address":"","comment_id":324432,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"è€å¸ˆï¼Œè¯·é—®ä¸€ä¸‹å¦‚æœæ˜¯å› ä¸ºoverflow bucketè¿‡å¤šå¯¼è‡´çš„&quot;æ‰©å®¹&quot;, æ˜¯å¦å¯ä»¥ç†è§£ä¸ºè¿™ä¸ªhashå‡½æ•°çš„ç®—æ³•ä¸å¤ªåˆç†ï¼Œå¯¼è‡´å¤§éƒ¨åˆ†çš„keyéƒ½åˆ†é…åˆ°äº†ä¸€ä¸ªbucketä¸­ï¼Œæ˜¯å¦å¯ä»¥é€šè¿‡ä¿®æ”¹hashç®—æ³•æ¥é‡æ–°hashä¸€éå‘¢ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":532202,"discussion_content":"æ˜¯ä¸€ä¸ªå¯è¡Œæ–¹æ³•ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637555959,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1351076,"avatar":"https://static001.geekbang.org/account/avatar/00/14/9d/a4/e481ae48.jpg","nickname":"lesserror","note":"","ucode":"25A54D1165FCF6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":531101,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637230154,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":321964,"user_name":"ç”¨0å’Œ1æ”¹å˜è‡ªå·±","can_delete":false,"product_type":"c1","uid":1527530,"ip_address":"","ucode":"42B8F6ECF6BDD0","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/lfMbV8RibrhFxjILg4550cZiaay64mTh5Zibon64TiaicC8jDMEK7VaXOkllHSpS582Jl1SUHm6Jib2AticVlHibiaBvUOA/132","comment_is_top":false,"comment_ctime":1637118799,"is_pvip":false,"replies":[{"id":117136,"content":"âœ…","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1637555989,"ip_address":"","comment_id":321964,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"å¯ä»¥ç”¨ä¸€ä¸ªæœ‰åºç»“æ„å­˜å‚¨key,å¦‚slice,ç„¶åforè¿™ä¸ªslice,ç”¨keyè·å–å€¼ã€‚èµ„æ–™æ¥æºè‡³ï¼šhttps:&#47;&#47;go.dev&#47;blog&#47;maps","like_count":36,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":532204,"discussion_content":"âœ…","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637555989,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1460415,"avatar":"https://static001.geekbang.org/account/avatar/00/16/48/bf/3d76ea74.jpg","nickname":"çœ‹ä¸åˆ°deé¢œè‰²","note":"","ucode":"04B803AED7C22F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":596611,"discussion_content":"LinkedHashmap","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1671111793,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1886796,"avatar":"","nickname":"å¼ æ¯…","note":"","ucode":"0707311786C079","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":610912,"discussion_content":"ä¸é”™","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1679842528,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":343494,"user_name":"ddh","can_delete":false,"product_type":"c1","uid":2806043,"ip_address":"","ucode":"8E852375365F16","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLBFkSq1oiaEMRjtyyv4ZpCI0OuaSsqs04ODm0OkZF6QhsAh3SvqhxibS2n7PLAVZE3QRSn5Hic0DyXg/132","comment_is_top":false,"comment_ctime":1650875111,"is_pvip":false,"replies":[{"id":125434,"content":"å¥½é—®é¢˜ï¼\n\nå…³äºè¿™ä¸ªé—®é¢˜ï¼Œå®˜æ–¹æ²¡æœ‰æ˜ç¡®è¯´æ˜ã€‚\n\næˆ‘è§‰å¾—ä¹‹æ‰€ä»¥map elementæ˜¯ä¸å¯å¯»å€çš„ï¼Œè¿˜æ˜¯å¤æ‚æ€§å’Œå®‰å…¨æ€§çš„è€ƒè™‘ã€‚\n\nGo sliceå’Œmapéƒ½æ˜¯å¤åˆæ•°æ®ç±»å‹ï¼Œä½†ä¸¤è€…çš„å†…éƒ¨å®ç°å¤æ‚åº¦å´è¿œè¿œä¸åŒã€‚mapè¦è¿œå¤æ‚äºsliceã€‚\n\nsliceçš„å…ƒç´ çš„åœ°å€è¦ä¹ˆåœ¨è¦ä¹ˆåœ¨åŸåº•å±‚æ•°ç»„ä¸­ï¼Œè¦ä¹ˆåœ¨æ‰©å®¹åçš„æ–°æ•°ç»„ä¸­ã€‚å¹¶ä¸”sliceæ‰©å®¹æ˜¯ä¸€æ¬¡å®Œæˆçš„ã€‚\nä½†mapæ‰©å®¹æ˜¯â€œèš‚èšæ¬å®¶â€ï¼Œelementä½ç½®å¤æ‚ä¸€äº›ï¼Œå¯èƒ½åœ¨åŸbucketä¸­ã€å¯èƒ½åœ¨overflow bucketä¸­ï¼Œä¹Ÿå¯èƒ½åœ¨æ–°æ‰©å®¹çš„bucketä¸­ã€‚\n\næ­¤å¤–ï¼Œä¸€æ—¦æš´éœ²map elementçš„åœ°å€ï¼Œæ¯”å¦‚æˆ‘ä»¬ç”¨ä¸€ä¸ªæ ˆä¸Šçš„æŒ‡é’ˆå˜é‡å¼•ç”¨äº†è¯¥åœ°å€ï¼Œå½“å‘ç”Ÿelementç§»åŠ¨æ—¶ï¼Œgoå°±è¦è€ƒè™‘è¿å¸¦å˜æ›´è¿™äº›æ ˆä¸ŠæŒ‡é’ˆå˜é‡çš„æŒ‡å‘ï¼Œè¿™äº›å˜æ›´æ“ä½œåœ¨æ¯ä¸ªmapæ“ä½œä¸­éƒ½ä¼šå¯¼è‡´è¿è¡Œæ—¶æ¶ˆè€—çš„å¢åŠ ã€‚\n           \nè‡³äºå®‰å…¨æ€§ï¼Œmapæœ‰ç€ä¸€ä¸ªå¤æ‚å†…éƒ¨ç»“æ„ï¼Œè¿™ä¸ªç»“æ„ç¯ç¯ç›¸æ‰£ã€‚ä¸€æ—¦map elementåœ°å€è¢«æš´éœ²ï¼Œé€šè¿‡è¯¥åœ°å€ä¸ä»…å¯ä»¥ä¿®æ”¹valueå€¼ï¼Œè¿˜å¯èƒ½ä¼šå¯¹mapå†…éƒ¨ç»“æ„é€ æˆç ´åï¼Œè¿™ç§ç ´åå°†å¯¼è‡´æ•´ä¸ªmapå·¥ä½œä¸æ­£å¸¸ã€‚è€Œsliceçš„elementå³ä¾¿è¢«hackï¼Œæ”¹æ‰çš„ä¹Ÿåªæ˜¯å…ƒç´ å€¼ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1651010354,"ip_address":"","comment_id":343494,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"è¯·é—®ä¸€ä¸‹è€å¸ˆï¼Œ map å…ƒç´ ä¸èƒ½å¯»å€ï¼Œ æ˜¯å› ä¸ºåŠ¨æ€æ‰©å®¹ï¼Œ é‚£ä¹ˆåˆ‡ç‰‡ä¸ä¹Ÿæœ‰åŠ¨æ€æ‰©å®¹å—ã€‚ ä¸ºä»€ä¹ˆåˆ‡ç‰‡å…ƒç´ å¯ä»¥å¯»å€å‘¢ï¼Ÿ  éš¾é“åˆ‡ç‰‡åŠ¨æ€æ‰©å®¹ä¹‹åï¼Œ å®ƒçš„å…ƒç´ åœ°å€ä¸ä¼šå˜å—","like_count":19,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":567813,"discussion_content":"å¥½é—®é¢˜ï¼\n\nå…³äºè¿™ä¸ªé—®é¢˜ï¼Œå®˜æ–¹æ²¡æœ‰æ˜ç¡®è¯´æ˜ã€‚\n\næˆ‘è§‰å¾—ä¹‹æ‰€ä»¥map elementæ˜¯ä¸å¯å¯»å€çš„ï¼Œè¿˜æ˜¯å¤æ‚æ€§å’Œå®‰å…¨æ€§çš„è€ƒè™‘ã€‚\n\nGo sliceå’Œmapéƒ½æ˜¯å¤åˆæ•°æ®ç±»å‹ï¼Œä½†ä¸¤è€…çš„å†…éƒ¨å®ç°å¤æ‚åº¦å´è¿œè¿œä¸åŒã€‚mapè¦è¿œå¤æ‚äºsliceã€‚\n\nsliceçš„å…ƒç´ çš„åœ°å€è¦ä¹ˆåœ¨è¦ä¹ˆåœ¨åŸåº•å±‚æ•°ç»„ä¸­ï¼Œè¦ä¹ˆåœ¨æ‰©å®¹åçš„æ–°æ•°ç»„ä¸­ã€‚å¹¶ä¸”sliceæ‰©å®¹æ˜¯ä¸€æ¬¡å®Œæˆçš„ã€‚\nä½†mapæ‰©å®¹æ˜¯â€œèš‚èšæ¬å®¶â€ï¼Œelementä½ç½®å¤æ‚ä¸€äº›ï¼Œå¯èƒ½åœ¨åŸbucketä¸­ã€å¯èƒ½åœ¨overflow bucketä¸­ï¼Œä¹Ÿå¯èƒ½åœ¨æ–°æ‰©å®¹çš„bucketä¸­ã€‚\n\næ­¤å¤–ï¼Œä¸€æ—¦æš´éœ²map elementçš„åœ°å€ï¼Œæ¯”å¦‚æˆ‘ä»¬ç”¨ä¸€ä¸ªæ ˆä¸Šçš„æŒ‡é’ˆå˜é‡å¼•ç”¨äº†è¯¥åœ°å€ï¼Œå½“å‘ç”Ÿelementç§»åŠ¨æ—¶ï¼Œgoå°±è¦è€ƒè™‘è¿å¸¦å˜æ›´è¿™äº›æ ˆä¸ŠæŒ‡é’ˆå˜é‡çš„æŒ‡å‘ï¼Œè¿™äº›å˜æ›´æ“ä½œåœ¨æ¯ä¸ªmapæ“ä½œä¸­éƒ½ä¼šå¯¼è‡´è¿è¡Œæ—¶æ¶ˆè€—çš„å¢åŠ ã€‚\n           \nè‡³äºå®‰å…¨æ€§ï¼Œmapæœ‰ç€ä¸€ä¸ªå¤æ‚å†…éƒ¨ç»“æ„ï¼Œè¿™ä¸ªç»“æ„ç¯ç¯ç›¸æ‰£ã€‚ä¸€æ—¦map elementåœ°å€è¢«æš´éœ²ï¼Œé€šè¿‡è¯¥åœ°å€ä¸ä»…å¯ä»¥ä¿®æ”¹valueå€¼ï¼Œè¿˜å¯èƒ½ä¼šå¯¹mapå†…éƒ¨ç»“æ„é€ æˆç ´åï¼Œè¿™ç§ç ´åå°†å¯¼è‡´æ•´ä¸ªmapå·¥ä½œä¸æ­£å¸¸ã€‚è€Œsliceçš„elementå³ä¾¿è¢«hackï¼Œæ”¹æ‰çš„ä¹Ÿåªæ˜¯å…ƒç´ å€¼ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1651010354,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2806043,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLBFkSq1oiaEMRjtyyv4ZpCI0OuaSsqs04ODm0OkZF6QhsAh3SvqhxibS2n7PLAVZE3QRSn5Hic0DyXg/132","nickname":"ddh","note":"","ucode":"8E852375365F16","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":568120,"discussion_content":"è°¢è°¢è€å¸ˆçš„è®²è§£ï¼Œæˆ‘å·²ç»æ˜¯äºŒåˆ·å•¦ï¼Œè¿˜æ˜¯æ”¶è·æ»¡æ»¡ï¼Œå“ˆå“ˆ","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1651067699,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":567813,"ip_address":"","group_id":0},"score":568120,"extra":""}]},{"author":{"id":1098505,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c3/09/dc368335.jpg","nickname":"æ°sir","note":"","ucode":"80BB56B3BFB71A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582345,"discussion_content":"å®‰å…¨æ€§æ›´æœ‰è¯´æœåŠ›ä¸€äº›ï¼Œslieceæ‰©å®¹åï¼ŒåŸå…ˆå¼•ç”¨sliceå…ƒç´ çš„æŒ‡é’ˆè¿˜æ˜¯æŒ‡å‘è€çš„åœ°å€\n    v := []int{1}\n    fmt.Printf(&#34;v: cap: %d\\n&#34;, cap(v)) //v: cap: 1\n    p := &amp;v[0]\n    v = append(v, 2)\n    v = append(v, 3)\n    *p = 2\n    fmt.Printf(&#34;v: %v, cap: %d, %d\\n&#34;, v, cap(v), *p) //v: [1 2 3], cap: 4, 2","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659405031,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":341590,"user_name":"thomas","can_delete":false,"product_type":"c1","uid":1016777,"ip_address":"","ucode":"9AB945308F1B50","user_header":"https://static001.geekbang.org/account/avatar/00/0f/83/c9/5d03981a.jpg","comment_is_top":false,"comment_ctime":1649727478,"is_pvip":false,"replies":[{"id":124887,"content":"è¿™ä¸€è¯é¢˜è¦è¿½æº¯åˆ°Go 1.0ç‰ˆæœ¬å‘å¸ƒçš„æ—¶å€™ï¼Œä»Go 1.0ç‰ˆæœ¬çš„å‘å¸ƒæ–‡æ¡£- https:&#47;&#47;go.dev&#47;doc&#47;go1ä¸­ï¼Œæˆ‘ä»¬èƒ½æ‰¾åˆ°å¦‚ä¸‹å†…å®¹ï¼š\n\n\nThe old language specification did not define the order of iteration for maps, and in practice it differed across hardware platforms. This caused tests that iterated over maps to be fragile and non-portable, with the unpleasant property that a test might always pass on one machine but break on another.\n                         \nIn Go 1, the order in which elements are visited when iterating over a map using a for range statement is defined to be unpredictable, even if the same loop is run multiple times with the same map. Code should not assume that the elements are visited in any particular order.\n                         \nThis change means that code that depends on iteration order is very likely to break early and be fixed long before it becomes a problem. Just as important, it allows the map implementation to ensure better map balancing even when programs are using range loops to select an element from a map.                                \n                                            \n                                                                             \nç¿»è¯‘è¿‡æ¥ï¼Œå¤§è‡´æ„æ€å°±æ˜¯ï¼š1.0ç‰ˆæœ¬ä¹‹å‰çš„è¯­è¨€è§„èŒƒä¸­æ²¡æœ‰è§„å®šmapçš„è¿­ä»£æ¬¡åºï¼Œä»è€Œå¯¼è‡´åœ¨å®è·µä¸­çš„ä¸€äº›ç³Ÿç³•çš„å¼€å‘è¿è¡Œä½“éªŒã€‚äºæ˜¯Goå›¢é˜Ÿé€‰\næ‹©æ•…æ„åœ¨mapä¸­åŠ å…¥éšæœºè¿­ä»£åŠŸèƒ½ï¼Œè¿™æ ·ä¸€æ—¦å‡ºç°å¼€å‘äººå‘˜ä¾èµ–keyè¿­ä»£é¡ºåºçš„é”™è¯¯è¡Œä¸ºï¼Œè¿™ä¸€è¡Œä¸ºå¯¼è‡´çš„é—®é¢˜åœ¨å¼€å‘å’Œæµ‹è¯•æ—©æœŸå°±èƒ½è¢«åŠæ—¶å‘ç°ï¼Œè€Œä¸ä¼šå‡ºç°åœ¨ç”Ÿäº§è¿è¡Œç¯å¢ƒä¸­å¯¼è‡´æ›´å¤§çš„å±å®³ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1649905658,"ip_address":"","comment_id":341590,"utype":1}],"discussion_count":1,"race_medal":1,"score":2,"product_id":100093501,"comment_content":"goå›¢é˜Ÿä¸ºä»€ä¹ˆè¦æ•…æ„æŠŠmapçš„éå†è®¾ç½®ä¸ºéšæœºï¼Ÿ","like_count":17,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":567813,"discussion_content":"å¥½é—®é¢˜ï¼\n\nå…³äºè¿™ä¸ªé—®é¢˜ï¼Œå®˜æ–¹æ²¡æœ‰æ˜ç¡®è¯´æ˜ã€‚\n\næˆ‘è§‰å¾—ä¹‹æ‰€ä»¥map elementæ˜¯ä¸å¯å¯»å€çš„ï¼Œè¿˜æ˜¯å¤æ‚æ€§å’Œå®‰å…¨æ€§çš„è€ƒè™‘ã€‚\n\nGo sliceå’Œmapéƒ½æ˜¯å¤åˆæ•°æ®ç±»å‹ï¼Œä½†ä¸¤è€…çš„å†…éƒ¨å®ç°å¤æ‚åº¦å´è¿œè¿œä¸åŒã€‚mapè¦è¿œå¤æ‚äºsliceã€‚\n\nsliceçš„å…ƒç´ çš„åœ°å€è¦ä¹ˆåœ¨è¦ä¹ˆåœ¨åŸåº•å±‚æ•°ç»„ä¸­ï¼Œè¦ä¹ˆåœ¨æ‰©å®¹åçš„æ–°æ•°ç»„ä¸­ã€‚å¹¶ä¸”sliceæ‰©å®¹æ˜¯ä¸€æ¬¡å®Œæˆçš„ã€‚\nä½†mapæ‰©å®¹æ˜¯â€œèš‚èšæ¬å®¶â€ï¼Œelementä½ç½®å¤æ‚ä¸€äº›ï¼Œå¯èƒ½åœ¨åŸbucketä¸­ã€å¯èƒ½åœ¨overflow bucketä¸­ï¼Œä¹Ÿå¯èƒ½åœ¨æ–°æ‰©å®¹çš„bucketä¸­ã€‚\n\næ­¤å¤–ï¼Œä¸€æ—¦æš´éœ²map elementçš„åœ°å€ï¼Œæ¯”å¦‚æˆ‘ä»¬ç”¨ä¸€ä¸ªæ ˆä¸Šçš„æŒ‡é’ˆå˜é‡å¼•ç”¨äº†è¯¥åœ°å€ï¼Œå½“å‘ç”Ÿelementç§»åŠ¨æ—¶ï¼Œgoå°±è¦è€ƒè™‘è¿å¸¦å˜æ›´è¿™äº›æ ˆä¸ŠæŒ‡é’ˆå˜é‡çš„æŒ‡å‘ï¼Œè¿™äº›å˜æ›´æ“ä½œåœ¨æ¯ä¸ªmapæ“ä½œä¸­éƒ½ä¼šå¯¼è‡´è¿è¡Œæ—¶æ¶ˆè€—çš„å¢åŠ ã€‚\n           \nè‡³äºå®‰å…¨æ€§ï¼Œmapæœ‰ç€ä¸€ä¸ªå¤æ‚å†…éƒ¨ç»“æ„ï¼Œè¿™ä¸ªç»“æ„ç¯ç¯ç›¸æ‰£ã€‚ä¸€æ—¦map elementåœ°å€è¢«æš´éœ²ï¼Œé€šè¿‡è¯¥åœ°å€ä¸ä»…å¯ä»¥ä¿®æ”¹valueå€¼ï¼Œè¿˜å¯èƒ½ä¼šå¯¹mapå†…éƒ¨ç»“æ„é€ æˆç ´åï¼Œè¿™ç§ç ´åå°†å¯¼è‡´æ•´ä¸ªmapå·¥ä½œä¸æ­£å¸¸ã€‚è€Œsliceçš„elementå³ä¾¿è¢«hackï¼Œæ”¹æ‰çš„ä¹Ÿåªæ˜¯å…ƒç´ å€¼ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1651010354,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2806043,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLBFkSq1oiaEMRjtyyv4ZpCI0OuaSsqs04ODm0OkZF6QhsAh3SvqhxibS2n7PLAVZE3QRSn5Hic0DyXg/132","nickname":"ddh","note":"","ucode":"8E852375365F16","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":568120,"discussion_content":"è°¢è°¢è€å¸ˆçš„è®²è§£ï¼Œæˆ‘å·²ç»æ˜¯äºŒåˆ·å•¦ï¼Œè¿˜æ˜¯æ”¶è·æ»¡æ»¡ï¼Œå“ˆå“ˆ","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1651067699,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":567813,"ip_address":"","group_id":0},"score":568120,"extra":""}]},{"author":{"id":1098505,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c3/09/dc368335.jpg","nickname":"æ°sir","note":"","ucode":"80BB56B3BFB71A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582345,"discussion_content":"å®‰å…¨æ€§æ›´æœ‰è¯´æœåŠ›ä¸€äº›ï¼Œslieceæ‰©å®¹åï¼ŒåŸå…ˆå¼•ç”¨sliceå…ƒç´ çš„æŒ‡é’ˆè¿˜æ˜¯æŒ‡å‘è€çš„åœ°å€\n    v := []int{1}\n    fmt.Printf(&#34;v: cap: %d\\n&#34;, cap(v)) //v: cap: 1\n    p := &amp;v[0]\n    v = append(v, 2)\n    v = append(v, 3)\n    *p = 2\n    fmt.Printf(&#34;v: %v, cap: %d, %d\\n&#34;, v, cap(v), *p) //v: [1 2 3], cap: 4, 2","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659405031,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":346967,"user_name":"Geek_244c46","can_delete":false,"product_type":"c1","uid":2034469,"ip_address":"","ucode":"419D97DA9F1F9B","user_header":"","comment_is_top":false,"comment_ctime":1653565585,"is_pvip":false,"replies":[{"id":126525,"content":"ç”¨ä»£ç å›ç­”ä½ çš„é—®é¢˜ï¼šï¼‰\n\n&#47;&#47; testnilasmapkey.go\npackage main\n\nfunc main() {\n\tvar m = make(map[*int]*int)\n\tm[nil] = nil\n\n\tprintln(m)\n\tprintln(len(m))\n\n\tvar b = 5\n\tm[nil] = &amp;b\n\tp := m[nil]\n\tprintln(*p)\n\n}\n\n0xc0000466b0\n1\n5\n\nnilä½œä¸ºvalueä¸æ–°é²œã€‚ä½†nilå¯ä½œä¸ºkeyå¯æ˜¯å¾ˆå¤šäººéƒ½ä¸çŸ¥é“çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1653626868,"ip_address":"","comment_id":346967,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"mapçš„keyå’Œvalueçš„å€¼ï¼Œæ˜¯å¦å¯ä»¥ä¸ºnull","like_count":12,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":562902,"discussion_content":"è¿™ä¸€è¯é¢˜è¦è¿½æº¯åˆ°Go 1.0ç‰ˆæœ¬å‘å¸ƒçš„æ—¶å€™ï¼Œä»Go 1.0ç‰ˆæœ¬çš„å‘å¸ƒæ–‡æ¡£- https://go.dev/doc/go1ä¸­ï¼Œæˆ‘ä»¬èƒ½æ‰¾åˆ°å¦‚ä¸‹å†…å®¹ï¼š\n\n\nThe old language specification did not define the order of iteration for maps, and in practice it differed across hardware platforms. This caused tests that iterated over maps to be fragile and non-portable, with the unpleasant property that a test might always pass on one machine but break on another.\n                         \nIn Go 1, the order in which elements are visited when iterating over a map using a for range statement is defined to be unpredictable, even if the same loop is run multiple times with the same map. Code should not assume that the elements are visited in any particular order.\n                         \nThis change means that code that depends on iteration order is very likely to break early and be fixed long before it becomes a problem. Just as important, it allows the map implementation to ensure better map balancing even when programs are using range loops to select an element from a map.                                \n                                            \n                                                                             \nç¿»è¯‘è¿‡æ¥ï¼Œå¤§è‡´æ„æ€å°±æ˜¯ï¼š1.0ç‰ˆæœ¬ä¹‹å‰çš„è¯­è¨€è§„èŒƒä¸­æ²¡æœ‰è§„å®šmapçš„è¿­ä»£æ¬¡åºï¼Œä»è€Œå¯¼è‡´åœ¨å®è·µä¸­çš„ä¸€äº›ç³Ÿç³•çš„å¼€å‘è¿è¡Œä½“éªŒã€‚äºæ˜¯Goå›¢é˜Ÿé€‰\næ‹©æ•…æ„åœ¨mapä¸­åŠ å…¥éšæœºè¿­ä»£åŠŸèƒ½ï¼Œè¿™æ ·ä¸€æ—¦å‡ºç°å¼€å‘äººå‘˜ä¾èµ–keyè¿­ä»£é¡ºåºçš„é”™è¯¯è¡Œä¸ºï¼Œè¿™ä¸€è¡Œä¸ºå¯¼è‡´çš„é—®é¢˜åœ¨å¼€å‘å’Œæµ‹è¯•æ—©æœŸå°±èƒ½è¢«åŠæ—¶å‘ç°ï¼Œè€Œä¸ä¼šå‡ºç°åœ¨ç”Ÿäº§è¿è¡Œç¯å¢ƒä¸­å¯¼è‡´æ›´å¤§çš„å±å®³ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649905658,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":342942,"user_name":"flexiver","can_delete":false,"product_type":"c1","uid":2889691,"ip_address":"","ucode":"5D83DFA90826E1","user_header":"","comment_is_top":false,"comment_ctime":1650542814,"is_pvip":false,"replies":[{"id":125300,"content":"åœ¨Goé¡¹ç›®æºç (Go 1.17ç‰ˆæœ¬)çš„ src&#47;cmd&#47;compile&#47;internal&#47;reflectdata&#47;reflect.goä¸­ï¼Œfunc MapBucketType(t *types.Type) *types.Type&gt;è¿™ä¸ªå‡½æ•°å®ç°ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å‹¾å‹’å‡ºä¸€ä¸ªbucketæ¡¶çš„ç»“æ„ï¼š\n\ntophash\nkeys\nvalues\noverflow pointer\n\nä¸è¿‡è¿™ä¸ªoverflow pointeræœ‰ä¸¤ç§æƒ…å†µï¼š\n\n      &#47;&#47; If keys and elems have no pointers, the map implementation\n      &#47;&#47; can keep a list of overflow pointers on the side so that\n      &#47;&#47; buckets can be marked as having no pointers.\n      &#47;&#47; Arrange for the bucket to have no pointers by changing\n      &#47;&#47; the type of the overflow field to uintptr in this case.\n      &#47;&#47; See comment on hmap.overflow in runtime&#47;map.go.\n      otyp := types.Types[types.TUNSAFEPTR]\n      if !elemtype.HasPointers() &amp;&amp; !keytype.HasPointers() {\n          otyp = types.Types[types.TUINTPTR]\n      }\n\nå½“keyå’Œvalueä¸­éƒ½æ²¡æœ‰æŒ‡é’ˆæ—¶ï¼Œæ¯”å¦‚map[int]intã€‚æ­¤æ—¶è€ƒè™‘åˆ°gcä¼˜åŒ–ï¼Œç¼–è¯‘å™¨å°†overflowçš„ç±»å‹è®¾ç½®ä¸ºuintptrã€‚\n\nuintptræ˜¯ä¸€ä¸ªæ•´å‹ï¼Œæ— æ³•è¢«GCè¯†åˆ«ï¼Œè¿™æ ·ä¸€æ¥uintptræŒ‡å‘çš„overflow bucketå°±æ²¡æœ‰æŒ‡å‘å®ƒçš„æŒ‡é’ˆï¼Œè¿™æ ·gcå°±ä¼šå°†overflow bucketè§†ä¸ºunrea\nchableçš„memå—è€Œå°†å…¶é‡Šæ”¾æ‰ã€‚ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œhmapä¸­çš„extraæ­¤æ—¶å°±ä¼šæŒ‡å‘ä¸Šé¢è¿™ç±»bucketçš„overflow bucketï¼Œä¿è¯keyå’Œvalueä¸­éƒ½ä¸å«æŒ‡é’ˆæ—¶ï¼Œoverflow bucketä¾æ—§å¯ä»¥ä¸è¢«gcã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1650608890,"ip_address":"","comment_id":342942,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"è€å¸ˆï¼Œæƒ³è¯·é—®ä¸€ä¸‹ï¼Œhmapè¿™ä¸ªç»“æ„ä¸­çš„extraå­—æ®µï¼Œ åœ¨keyå’Œvalueéƒ½ä¸æ˜¯æŒ‡é’ˆçš„æƒ…å†µä¸‹ï¼Œä¼šå­˜å‚¨æ‰€æœ‰çš„overflow bucketçš„æŒ‡é’ˆï¼Œé‡Œé¢æœ‰æåˆ°ä¸€ä¸ªå†…è”ï¼Œè¿™ä¸ªå†…è”æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿä»¥åŠä¸ºä»€ä¹ˆå½“keyå’Œvalueéƒ½ä¸æ˜¯æŒ‡é’ˆçš„æƒ…å†µä¸‹ï¼Œä¼šå°†bucketä¸­çš„overflowæŒ‡é’ˆå…¨éƒ¨æ”¾åˆ°extraå­—æ®µå­˜å‚¨","like_count":7,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":566130,"discussion_content":"åœ¨Goé¡¹ç›®æºç (Go 1.17ç‰ˆæœ¬)çš„ src/cmd/compile/internal/reflectdata/reflect.goä¸­ï¼Œfunc MapBucketType(t *types.Type) *types.Type&gt;è¿™ä¸ªå‡½æ•°å®ç°ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å‹¾å‹’å‡ºä¸€ä¸ªbucketæ¡¶çš„ç»“æ„ï¼š\n\ntophash\nkeys\nvalues\noverflow pointer\n\nä¸è¿‡è¿™ä¸ªoverflow pointeræœ‰ä¸¤ç§æƒ…å†µï¼š\n\n      // If keys and elems have no pointers, the map implementation\n      // can keep a list of overflow pointers on the side so that\n      // buckets can be marked as having no pointers.\n      // Arrange for the bucket to have no pointers by changing\n      // the type of the overflow field to uintptr in this case.\n      // See comment on hmap.overflow in runtime/map.go.\n      otyp := types.Types[types.TUNSAFEPTR]\n      if !elemtype.HasPointers() &amp;&amp; !keytype.HasPointers() {\n          otyp = types.Types[types.TUINTPTR]\n      }\n\nå½“keyå’Œvalueä¸­éƒ½æ²¡æœ‰æŒ‡é’ˆæ—¶ï¼Œæ¯”å¦‚map[int]intã€‚æ­¤æ—¶è€ƒè™‘åˆ°gcä¼˜åŒ–ï¼Œç¼–è¯‘å™¨å°†overflowçš„ç±»å‹è®¾ç½®ä¸ºuintptrã€‚\n\nuintptræ˜¯ä¸€ä¸ªæ•´å‹ï¼Œæ— æ³•è¢«GCè¯†åˆ«ï¼Œè¿™æ ·ä¸€æ¥uintptræŒ‡å‘çš„overflow bucketå°±æ²¡æœ‰æŒ‡å‘å®ƒçš„æŒ‡é’ˆï¼Œè¿™æ ·gcå°±ä¼šå°†overflow bucketè§†ä¸ºunrea\nchableçš„memå—è€Œå°†å…¶é‡Šæ”¾æ‰ã€‚ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œhmapä¸­çš„extraæ­¤æ—¶å°±ä¼šæŒ‡å‘ä¸Šé¢è¿™ç±»bucketçš„overflow bucketï¼Œä¿è¯keyå’Œvalueä¸­éƒ½ä¸å«æŒ‡é’ˆæ—¶ï¼Œoverflow bucketä¾æ—§å¯ä»¥ä¸è¢«gcã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650608891,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":322384,"user_name":"ä¸è´Ÿé’æ˜¥ä¸è´Ÿå·±ğŸ¤˜","can_delete":false,"product_type":"c1","uid":1363671,"ip_address":"","ucode":"A6DD8E8B20EA6E","user_header":"https://static001.geekbang.org/account/avatar/00/14/ce/d7/5315f6ce.jpg","comment_is_top":false,"comment_ctime":1637334390,"is_pvip":false,"replies":[{"id":117172,"content":"âœ…","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1637565982,"ip_address":"","comment_id":322384,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"å¯ä»¥æŠŠkey èµ‹å€¼åˆ°å˜é‡ï¼Œä½¿ç”¨sort æ’åºï¼Œåœ¨éå†","like_count":6,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":532277,"discussion_content":"âœ…","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637565982,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":361381,"user_name":"Unknown element","can_delete":false,"product_type":"c1","uid":2028277,"ip_address":"åŒ—äº¬","ucode":"34A129800D0238","user_header":"https://static001.geekbang.org/account/avatar/00/1e/f2/f5/b82f410d.jpg","comment_is_top":false,"comment_ctime":1667459309,"is_pvip":false,"replies":[{"id":131600,"content":"å¥½é—®é¢˜ã€‚è¿™ä¸ªç­‰é‡æ‰©å®¹æ¥è‡ªè¿™ä¸ªissueï¼šhttps:&#47;&#47;github.com&#47;golang&#47;go&#47;issues&#47;16070  è¿™æ˜¯ä¸€ç§æ¯”è¾ƒç‰¹æ®Šçš„æƒ…å†µï¼Œå³å½“æŒç»­å‘å“ˆå¸Œä¸­æ’å…¥æ•°æ®ï¼Œç„¶ååˆå°†å®ƒä»¬å…¨éƒ¨åˆ é™¤æ—¶ï¼Œè¿™ä¸ªè¿‡ç¨‹å¦‚æœè§¦å‘å¢å®¹æ‰©å®¹ï¼Œå°±ä¼šå¯¼è‡´overflow bucketè¿‡å¤šï¼Œä½†æ­¤æ—¶åŸbucketä¸­å·²ç»æ²¡æœ‰æ•°æ®äº†ã€‚æ‰€ä»¥goå¼•å…¥äº†åˆ©ç”¨ç°æœ‰æ‰©å®¹æœºåˆ¶çš„ç­‰é‡æ‰©å®¹ https:&#47;&#47;github.com&#47;golang&#47;go&#47;commit&#47;9980b70cb460f27907a003674ab1b9bea24a847c å°†åŸbucketçš„overflow bucketä¸­çš„æ•°æ®é‡æ–°æŒªåˆ°æ–°bucketä¸­ã€‚ç®—æ³•è¾ƒå¤æ‚ï¼Œä¸“æ å®šä½å…¥é—¨ï¼Œæ‰€ä»¥æ²¡è¿›è¡Œæ·±å…¥ã€‚æ„Ÿå…´è¶£å¯ä»¥è¯»ä¸€ä¸‹è¿™ä¸ªcl commitçš„æºç ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1667819676,"ip_address":"åŒ—äº¬","comment_id":361381,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"è€å¸ˆæˆ‘æƒ³é—®ä¸‹è¿™é‡Œï¼š\nâ€œå¦‚æœæ˜¯å› ä¸º overflow bucket è¿‡å¤šå¯¼è‡´çš„â€œæ‰©å®¹â€ï¼Œå®é™…ä¸Šè¿è¡Œæ—¶ä¼šæ–°å»ºä¸€ä¸ªå’Œç°æœ‰è§„æ¨¡ä¸€æ ·çš„ bucket æ•°ç»„ï¼Œç„¶ååœ¨ assign å’Œ delete æ—¶åšæ’ç©ºå’Œè¿ç§»ã€‚â€\nå¦‚æœbucketè§„æ¨¡ä¸å˜çš„è¯ï¼Œé‚£æ‰€æœ‰keyåœ¨hashä¹‹åè¿˜æ˜¯åˆ†åˆ°åŸæ¥çš„æ¡¶ä¸­ï¼Œå¥½åƒè¯¥overflowè¿˜æ˜¯ä¼šoverflowï¼Ÿä¸»è¦æ˜¯å› ä¸ºè¿™é‡Œæ—¢æ²¡æœ‰é€šè¿‡çœŸæ­£å¢åŠ æ¡¶çš„æ•°é‡å®ç°æ‰©å®¹ï¼Œä¹Ÿæ²¡æœ‰é€šè¿‡æ›´æ¢hashå‡½æ•°æ”¹å˜keyåœ¨æ¡¶ä¸­çš„åˆ†å¸ƒï¼Œé‚£ä¹ˆè¿™ä¸ªoverflowçš„é—®é¢˜åˆ°åº•æ˜¯æ€ä¹ˆè§£å†³çš„å‘¢ï¼Ÿè°¢è°¢è€å¸ˆ","like_count":5,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":592955,"discussion_content":"å¥½é—®é¢˜ã€‚è¿™ä¸ªç­‰é‡æ‰©å®¹æ¥è‡ªè¿™ä¸ªissueï¼šhttps://github.com/golang/go/issues/16070  è¿™æ˜¯ä¸€ç§æ¯”è¾ƒç‰¹æ®Šçš„æƒ…å†µï¼Œå³å½“æŒç»­å‘å“ˆå¸Œä¸­æ’å…¥æ•°æ®ï¼Œç„¶ååˆå°†å®ƒä»¬å…¨éƒ¨åˆ é™¤æ—¶ï¼Œè¿™ä¸ªè¿‡ç¨‹å¦‚æœè§¦å‘å¢å®¹æ‰©å®¹ï¼Œå°±ä¼šå¯¼è‡´overflow bucketè¿‡å¤šï¼Œä½†æ­¤æ—¶åŸbucketä¸­å·²ç»æ²¡æœ‰æ•°æ®äº†ã€‚æ‰€ä»¥goå¼•å…¥äº†åˆ©ç”¨ç°æœ‰æ‰©å®¹æœºåˆ¶çš„ç­‰é‡æ‰©å®¹ https://github.com/golang/go/commit/9980b70cb460f27907a003674ab1b9bea24a847c å°†åŸbucketçš„overflow bucketä¸­çš„æ•°æ®é‡æ–°æŒªåˆ°æ–°bucketä¸­ã€‚ç®—æ³•è¾ƒå¤æ‚ï¼Œä¸“æ å®šä½å…¥é—¨ï¼Œæ‰€ä»¥æ²¡è¿›è¡Œæ·±å…¥ã€‚æ„Ÿå…´è¶£å¯ä»¥è¯»ä¸€ä¸‹è¿™ä¸ªcl commitçš„æºç ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1667819676,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":3794407,"avatar":"","nickname":"Geek_3d0fe8","note":"","ucode":"E75EACDA00E7A6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":638176,"discussion_content":"ä¹‹å‰èƒŒå…«è‚¡çš„æ—¶å€™ä¸€ç›´ç–‘æƒ‘è¿™ä¸ªç­‰é‡æ‰©å®¹æœ‰ä»€ä¹ˆæ„ä¹‰ï¼Œè¿™ä¸ªè®²å¾—çœŸå¥½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1709304631,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":592955,"ip_address":"å¹¿ä¸œ","group_id":0},"score":638176,"extra":""}]}]},{"had_liked":false,"id":329484,"user_name":"æ–‡ç»","can_delete":false,"product_type":"c1","uid":1072346,"ip_address":"","ucode":"2C059BD2A4276B","user_header":"https://static001.geekbang.org/account/avatar/00/10/5c/da/0a8bc27b.jpg","comment_is_top":false,"comment_ctime":1641365885,"is_pvip":true,"replies":[{"id":120037,"content":"è¿‡å¥–ã€‚å…¶å®åŸç†è¿™ä¸œè¥¿æœ€ç»ˆè¿˜æ˜¯è¦è½åˆ°ä»£ç ä¸Šã€‚è€Œä¸”ä¸åŒç‰ˆæœ¬å®ç°ä¹Ÿæœ‰å·®å¼‚ã€‚è¦æƒ³çœŸæ­£æŠŠåŸç†åƒé€ï¼Œè¿˜å¾—è‡ªå·±å¤šè¿‡å‡ éä»£ç ","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1641435032,"ip_address":"","comment_id":329484,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"æˆ‘çœ‹äº†ã€ŠGoè¯­è¨€å®è·µã€‹ï¼Œã€ŠGoä¸“å®¶ç¼–ç¨‹ã€‹ï¼Œã€ŠGoè¯­è¨€åº•å±‚åŸç†å‰–æã€‹è¿™å‡ æœ¬ä¹¦å¯¹mapçš„æè¿°ï¼Œå¯¹æ¯”æ‰å‘ç°ç™½è€å¸ˆè®²å¾—æœ€æ¸…æ™°ï¼Œåœ¨å°è£…å’Œç»†èŠ‚æ–¹é¢æ‹¿æå¾—æœ€å¥½ï¼Œå¤§å¤§åœ°èµğŸ‘ å‰©ä¸‹ä¸æ¸…æ¥šçš„åœ°æ–¹å°±åªèƒ½è‡ªå·±çœ‹æºç äº†ã€‚","like_count":4,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":544178,"discussion_content":"è¿‡å¥–ã€‚å…¶å®åŸç†è¿™ä¸œè¥¿æœ€ç»ˆè¿˜æ˜¯è¦è½åˆ°ä»£ç ä¸Šã€‚è€Œä¸”ä¸åŒç‰ˆæœ¬å®ç°ä¹Ÿæœ‰å·®å¼‚ã€‚è¦æƒ³çœŸæ­£æŠŠåŸç†åƒé€ï¼Œè¿˜å¾—è‡ªå·±å¤šè¿‡å‡ éä»£ç ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641435033,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":321942,"user_name":"ddh","can_delete":false,"product_type":"c1","uid":2806043,"ip_address":"","ucode":"8E852375365F16","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLBFkSq1oiaEMRjtyyv4ZpCI0OuaSsqs04ODm0OkZF6QhsAh3SvqhxibS2n7PLAVZE3QRSn5Hic0DyXg/132","comment_is_top":false,"comment_ctime":1637114125,"is_pvip":false,"replies":[{"id":117134,"content":"æ˜¯ä¸€ä¸ªå¯è¡Œæ–¹æ³•ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1637555959,"ip_address":"","comment_id":321942,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"æŠŠkeyå­˜åˆ°æœ‰åºåˆ‡ç‰‡ä¸­ï¼Œç”¨åˆ‡ç‰‡éå†","like_count":4,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":544178,"discussion_content":"è¿‡å¥–ã€‚å…¶å®åŸç†è¿™ä¸œè¥¿æœ€ç»ˆè¿˜æ˜¯è¦è½åˆ°ä»£ç ä¸Šã€‚è€Œä¸”ä¸åŒç‰ˆæœ¬å®ç°ä¹Ÿæœ‰å·®å¼‚ã€‚è¦æƒ³çœŸæ­£æŠŠåŸç†åƒé€ï¼Œè¿˜å¾—è‡ªå·±å¤šè¿‡å‡ éä»£ç ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641435033,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":324432,"user_name":"wu526","can_delete":false,"product_type":"c1","uid":1022129,"ip_address":"","ucode":"69282EB175B48E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/98/b1/f89a84d0.jpg","comment_is_top":false,"comment_ctime":1638431723,"is_pvip":false,"replies":[{"id":117975,"content":"go mapåº•å±‚çš„hashå‡½æ•°è¦è€ƒè™‘é€šç”¨æ€§ã€‚è°ä¹Ÿä¸èƒ½é¢„æµ‹ç”¨æˆ·ä¼šä½¿ç”¨ä»€ä¹ˆæ ·çš„keyæ•°æ®ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1638829832,"ip_address":"","comment_id":324432,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100093501,"comment_content":"è€å¸ˆï¼Œè¯·é—®ä¸€ä¸‹å¦‚æœæ˜¯å› ä¸ºoverflow bucketè¿‡å¤šå¯¼è‡´çš„&quot;æ‰©å®¹&quot;, æ˜¯å¦å¯ä»¥ç†è§£ä¸ºè¿™ä¸ªhashå‡½æ•°çš„ç®—æ³•ä¸å¤ªåˆç†ï¼Œå¯¼è‡´å¤§éƒ¨åˆ†çš„keyéƒ½åˆ†é…åˆ°äº†ä¸€ä¸ªbucketä¸­ï¼Œæ˜¯å¦å¯ä»¥é€šè¿‡ä¿®æ”¹hashç®—æ³•æ¥é‡æ–°hashä¸€éå‘¢ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":536602,"discussion_content":"go mapåº•å±‚çš„hashå‡½æ•°è¦è€ƒè™‘é€šç”¨æ€§ã€‚è°ä¹Ÿä¸èƒ½é¢„æµ‹ç”¨æˆ·ä¼šä½¿ç”¨ä»€ä¹ˆæ ·çš„keyæ•°æ®ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1638829832,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":322686,"user_name":"å¤šé€‰å‚æ•°","can_delete":false,"product_type":"c1","uid":1248326,"ip_address":"","ucode":"B2294D80AB075F","user_header":"https://static001.geekbang.org/account/avatar/00/13/0c/46/dfe32cf4.jpg","comment_is_top":false,"comment_ctime":1637550794,"is_pvip":false,"replies":[{"id":117149,"content":"è¯»æ“ä½œå¾—åˆ°çš„æ˜¯å€¼çš„ä¸€ä¸ªcopy","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1637560387,"ip_address":"","comment_id":322686,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100093501,"comment_content":"çªç„¶æƒ³åˆ°ä¹‹å‰ç¢°åˆ°çš„ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯golang ç»“æ„ä½“ä½œä¸ºmapçš„å…ƒç´ æ—¶ï¼Œä¸èƒ½å¤Ÿç›´æ¥èµ‹å€¼ç»™ç»“æ„ä½“çš„æŸä¸ªå­—æ®µã€‚è¿™ä¸ªä¹Ÿæœ‰â€œGo ä¸å…è®¸è·å– map ä¸­ value çš„åœ°å€â€çš„åŸå› åœ¨å˜›ï¼Ÿå‡å¦‚è¿™æ ·çš„è¯ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆè¯»ç»“æ„ä½“ä¸­çš„æŸä¸ªå­—æ®µæ˜¯å¯ä»¥çš„ï¼Ÿ","like_count":3},{"had_liked":false,"id":322024,"user_name":"TonyGao","can_delete":false,"product_type":"c1","uid":2827964,"ip_address":"","ucode":"75E9F13CB7C66D","user_header":"https://static001.geekbang.org/account/avatar/00/2b/26/bc/a73e4275.jpg","comment_is_top":false,"comment_ctime":1637140079,"is_pvip":false,"replies":[{"id":117141,"content":"ä¸é”™çš„æ€è·¯ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1637556678,"ip_address":"","comment_id":322024,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100093501,"comment_content":"func doIteration(m map[int]int) {\n\tmu.RLock()\n\tdefer mu.RUnlock()\n\n\tkeys := []int{}\n\n\tfor k := range m {\n\t\tkeys = append(keys, k)\n\t}\n\n\tsort.SliceStable(keys, func(x, y int) bool {\n\t\treturn x &lt; y\n\t})\n\n\tfor _, k := range keys {\n\t\tfmt.Printf(&quot;[%d, %d] &quot;, k, m[k])\n\t}\n\n\tfmt.Println()\n}\n\nfunc doWrite(m map[int]int) {\n\tmu.Lock()\n\tdefer mu.Unlock()\n\n\tfor k, v := range m {\n\t\tm[k] = v + 1\n\t}\n}\n\n==&gt; å¯¹å¹¶å‘ç¤ºä¾‹ä»£ç çš„ç¨³å®šæ’åºè¾“å‡º (åŸä¾‹1000æ¬¡è¾“å‡ºå¤ªå¤šï¼Œè¾“å‡ºå‰10ä¸ªä½œä¸ºè¯´æ˜)ï¼š\n[1, 11] [2, 12] [3, 13] \n[1, 12] [2, 13] [3, 14] \n[1, 13] [2, 14] [3, 15] \n[1, 14] [2, 15] [3, 16] \n[1, 15] [2, 16] [3, 17] \n[1, 16] [2, 17] [3, 18] \n[1, 17] [2, 18] [3, 19] \n[1, 18] [2, 19] [3, 20] \n[1, 19] [2, 20] [3, 21] \n[1, 20] [2, 21] [3, 22] \nã€‚ã€‚ã€‚","like_count":3,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":532228,"discussion_content":"è¯»æ“ä½œå¾—åˆ°çš„æ˜¯å€¼çš„ä¸€ä¸ªcopy","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637560387,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1248326,"avatar":"https://static001.geekbang.org/account/avatar/00/13/0c/46/dfe32cf4.jpg","nickname":"å¤šé€‰å‚æ•°","note":"","ucode":"B2294D80AB075F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":532520,"discussion_content":"ä½†æ˜¯è¯»è¿™ä¸ªæ“ä½œä¹Ÿæ˜¯éœ€è¦æ¶‰åŠåˆ°åœ°å€çš„è®¿é—®å§ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637634339,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":532228,"ip_address":"","group_id":0},"score":532520,"extra":"{\"user_type\":1}"}]}]},{"had_liked":false,"id":366667,"user_name":"é‚¹å¿—é¹.Joey â·â·â·","can_delete":false,"product_type":"c1","uid":1011311,"ip_address":"å¹¿ä¸œ","ucode":"5DE4B9097D95AE","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6e/6f/44da923f.jpg","comment_is_top":false,"comment_ctime":1674028315,"is_pvip":false,"replies":[{"id":133632,"content":"ğŸ‘ã€‚ç¨åè®©ç¼–è¾‘è€å¸ˆä¿®æ”¹ä¸€ä¸‹è¿™ä¸ªtypoã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1674220678,"ip_address":"è¾½å®","comment_id":366667,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100093501,"comment_content":"æ—¢åˆ‡ç‰‡ä¹‹å, åº”è¯¥æ˜¯ &quot;ç»§åˆ‡ç‰‡ä¹‹å&quot;?","like_count":2,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":532211,"discussion_content":"ä¸é”™çš„æ€è·¯ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637556678,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2827964,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/26/bc/a73e4275.jpg","nickname":"TonyGao","note":"","ucode":"75E9F13CB7C66D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":530774,"discussion_content":"ä¸å¥½æ„æ€ï¼Œç¨³å®šæ’åºå‹˜è¯¯ï¼š\n\tsort.SliceStable(keys, func(x, y int) bool {\n\t\treturn keys[x] &lt; keys[y]\n\t})","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1637145244,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":360170,"user_name":"ä¸è¯´è¯è£…ç³•æ‰‹","can_delete":false,"product_type":"c1","uid":2922271,"ip_address":"åŒ—äº¬","ucode":"6465E83F4E6F58","user_header":"https://static001.geekbang.org/account/avatar/00/2c/97/1f/2a68c980.jpg","comment_is_top":false,"comment_ctime":1666252089,"is_pvip":false,"replies":[{"id":131025,"content":"çœ‹äº†ä¸€ä¸‹ä½ æ”¹åçš„ä»£ç ï¼Œä½ æŠŠdoIterationè¿™ä¸ªgoroutineæ³¨é‡Šæ‰äº†ï¼Œåªä¿ç•™äº†doWriteè¿™ä¸ªgoroutineï¼Œè¿™æ ·å°±æ²¡æœ‰äº†å¹¶å‘ï¼Œå°±å‰©ä¸‹æ‰§è¡ŒdoWriteè¿™ä¸€ä¸ªgoroutineè®¿é—®mapäº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1666335447,"ip_address":"åŒ—äº¬","comment_id":360170,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100093501,"comment_content":"å…³äºè€å¸ˆå¹¶å‘è¯»å†™mapçš„ç¤ºä¾‹ï¼Œåšäº†å¦‚ä¸‹ä¿®æ”¹\n\t&#47;&#47;go func() {\n\t&#47;&#47;\tfor i := 0; i &lt; 1000; i++ {\n\t&#47;&#47;\t\tdoIteration(m)\n\t&#47;&#47;\t}\n\t&#47;&#47;}()\n\n\tgo func() {\n\t\tfor i := 0; i &lt; 10000; i++ {\n\t\t\tdoWrite(m)\n\t\t}\n\t}()\n\n\ttime.Sleep(5 * time.Second)\n\tfmt.Println(m)\n\t\noutput:\nmap[1:10011 2:10012 3:10013]\nè¿›ç¨‹ å·²å®Œæˆï¼Œé€€å‡ºä»£ç ä¸º 0\n\næˆ‘æœ¬åœ°æ˜¯1.16ç‰ˆæœ¬ï¼Œçœ‹èµ·æ¥æ˜¯å¯ä»¥å¹¶å‘å†™çš„ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":591159,"discussion_content":"çœ‹äº†ä¸€ä¸‹ä½ æ”¹åçš„ä»£ç ï¼Œä½ æŠŠdoIterationè¿™ä¸ªgoroutineæ³¨é‡Šæ‰äº†ï¼Œåªä¿ç•™äº†doWriteè¿™ä¸ªgoroutineï¼Œè¿™æ ·å°±æ²¡æœ‰äº†å¹¶å‘ï¼Œå°±å‰©ä¸‹æ‰§è¡ŒdoWriteè¿™ä¸€ä¸ªgoroutineè®¿é—®mapäº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1666335447,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":359173,"user_name":"pythonbug","can_delete":false,"product_type":"c1","uid":1487274,"ip_address":"è¾½å®","ucode":"1A70CA92FFF8EB","user_header":"https://wx.qlogo.cn/mmopen/vi_32/wgMMrp1hvSB3E30KqZvMsj3KQdAI3T1uQM77LT7hZ65nVSjPGRg3AbUOyiahnssA6AIT5PAkyHFmlTBzUH9gdyQ/132","comment_is_top":false,"comment_ctime":1665305666,"is_pvip":false,"replies":[{"id":130656,"content":"âœ…","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1665378297,"ip_address":"è¾½å®","comment_id":359173,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100093501,"comment_content":"func sortMap(m map[string]int) {\n\t&#47;&#47; å­˜key\n\tvar s []string\n\tfor k, _ := range m {\n\t\ts = append(s, k)\n\t}\n\n\t&#47;&#47; å¯¹sè¿›è¡Œæ’åº\n\tsort.Strings(s)\n\n\t&#47;&#47; éå†è¾“å‡º\n\tfor _, v := range s {\n\t\tfmt.Println(v, m[v])\n\t}\n}","like_count":2,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":591159,"discussion_content":"çœ‹äº†ä¸€ä¸‹ä½ æ”¹åçš„ä»£ç ï¼Œä½ æŠŠdoIterationè¿™ä¸ªgoroutineæ³¨é‡Šæ‰äº†ï¼Œåªä¿ç•™äº†doWriteè¿™ä¸ªgoroutineï¼Œè¿™æ ·å°±æ²¡æœ‰äº†å¹¶å‘ï¼Œå°±å‰©ä¸‹æ‰§è¡ŒdoWriteè¿™ä¸€ä¸ªgoroutineè®¿é—®mapäº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1666335447,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":354658,"user_name":"Geek_d86547","can_delete":false,"product_type":"c1","uid":2969563,"ip_address":"åŒ—äº¬","ucode":"AD9AE8FEF6B307","user_header":"","comment_is_top":false,"comment_ctime":1660643265,"is_pvip":false,"replies":[{"id":129071,"content":"ä½ çœ‹çœ‹https:&#47;&#47;tonybai.com&#47;go-course-faqä¸­çš„è¡¥å……æ˜¯å¦æ»¡è¶³ä½ çš„éœ€æ±‚ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1660789226,"ip_address":"åŒ—äº¬","comment_id":354658,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100093501,"comment_content":"è€å¸ˆ mapéå†çš„éšæœºæ€§å¯ä»¥å†è¯¦ç»†è¯´æ˜ä¸€äº›å˜›ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":584364,"discussion_content":"ä½ çœ‹çœ‹https://tonybai.com/go-course-faqä¸­çš„è¡¥å……æ˜¯å¦æ»¡è¶³ä½ çš„éœ€æ±‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660789226,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":351317,"user_name":"zzy","can_delete":false,"product_type":"c1","uid":1805408,"ip_address":"","ucode":"3D7EC623EB8204","user_header":"https://static001.geekbang.org/account/avatar/00/1b/8c/60/58b6c39e.jpg","comment_is_top":false,"comment_ctime":1657696721,"is_pvip":false,"replies":[{"id":127789,"content":"å…³äºä½ æåˆ°çš„goå†…ç½®ç±»å‹mapçš„å®ç°çš„é€‰å‹é—®é¢˜ï¼Œæˆ‘è¿˜çœŸä¸æ¸…æ¥šã€‚æˆ‘åœ¨å…¬å¼€èµ„æ–™é‡Œæœäº†ä¸€ä¸‹ï¼Œä¹Ÿæ²¡æŸ¥åˆ°ã€‚ä¸è¿‡æˆ‘è§‰å¾—ï¼Œgo teamå½“åˆåº”è¯¥ä¸å•å•æ˜¯ä»æ€§èƒ½è¿™ä¸€ä¸ªç»´åº¦è€ƒè™‘çš„ã€‚æ¯•ç«Ÿæ˜¯runtimeå±‚çš„å®ç°ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå•ç‹¬çš„æ ‡å‡†åº“åŒ…ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1657709981,"ip_address":"","comment_id":351317,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100093501,"comment_content":"æƒ³é—®ä¸‹golangä¸ºä½•ä¸åƒjavaé‚£æ ·ï¼Œåœ¨åº•å±‚ä½¿ç”¨çº¢é»‘æ ‘ï¼Œæ€§èƒ½åº”è¯¥æ˜¯æ›´å¥½çš„","like_count":2,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":584364,"discussion_content":"ä½ çœ‹çœ‹https://tonybai.com/go-course-faqä¸­çš„è¡¥å……æ˜¯å¦æ»¡è¶³ä½ çš„éœ€æ±‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660789226,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":351301,"user_name":"è èå¹é›ªâ€”Code","can_delete":false,"product_type":"c1","uid":1650378,"ip_address":"","ucode":"A5B2FC661EE17D","user_header":"https://static001.geekbang.org/account/avatar/00/19/2e/ca/469f7266.jpg","comment_is_top":false,"comment_ctime":1657683928,"is_pvip":false,"replies":[{"id":127784,"content":"âœ…","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1657699933,"ip_address":"","comment_id":351301,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100093501,"comment_content":"å½©ï¼åªè¦keyæ˜¯æœ‰åºçš„å¹¶ä¸”è®¿é—®é¡ºåºæ˜¯å›ºå®šçš„ï¼Œvalueä¹Ÿå°±å¯ä»¥ç¡®å®šé¡ºåºäº†ï¼Œé€šè¿‡åˆ‡ç‰‡ã€æ•°ç»„å¯ä»¥å®ç°","like_count":2,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579813,"discussion_content":"âœ…","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657699933,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":349269,"user_name":"W-T","can_delete":false,"product_type":"c1","uid":1088973,"ip_address":"","ucode":"834869DA80D95B","user_header":"https://static001.geekbang.org/account/avatar/00/10/9d/cd/c21a01dd.jpg","comment_is_top":false,"comment_ctime":1655860607,"is_pvip":false,"replies":[{"id":127149,"content":"ä¸éœ€è¦å®ç°ä»€ä¹ˆæ¥å£ã€‚åªè¦è‡ªå®šä¹‰æ•°æ®ç±»å‹çš„åº•å±‚ç±»å‹(underlying type)æ˜¯æ”¯æŒfor rangeå³å¯ï¼Œæ¯”å¦‚åˆ‡ç‰‡ã€channelã€æ•°ç»„ã€mapç­‰ã€‚\n\næ¯”å¦‚ï¼š\n\ntype Rangable []int\n\nfunc main() {\n\tvar r = Rangable{1, 2, 3, 4, 5, 6}\n\tfor _, n := range r {\n\t\tprintln(n)\n\t}\n}","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1655905733,"ip_address":"","comment_id":349269,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100093501,"comment_content":"è€å¸ˆï¼Œè‡ªå®šä¹‰æ•°æ®ç±»å‹èƒ½å¦æ”¯æŒfor rangeè¯­å¥ï¼Œæ”¯æŒçš„è¯éœ€è¦å®ç°ä»€ä¹ˆæ¥å£","like_count":2,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":577060,"discussion_content":"ä¸éœ€è¦å®ç°ä»€ä¹ˆæ¥å£ã€‚åªè¦è‡ªå®šä¹‰æ•°æ®ç±»å‹çš„åº•å±‚ç±»å‹(underlying type)æ˜¯æ”¯æŒfor rangeå³å¯ï¼Œæ¯”å¦‚åˆ‡ç‰‡ã€channelã€æ•°ç»„ã€mapç­‰ã€‚\n\næ¯”å¦‚ï¼š\n\ntype Rangable []int\n\nfunc main() {\n\tvar r = Rangable{1, 2, 3, 4, 5, 6}\n\tfor _, n := range r {\n\t\tprintln(n)\n\t}\n}","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1655905734,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":340974,"user_name":"å¤§å¸…å“¥","can_delete":false,"product_type":"c1","uid":1439523,"ip_address":"","ucode":"E6AE4804D9F337","user_header":"","comment_is_top":false,"comment_ctime":1649251038,"is_pvip":false,"replies":[{"id":124705,"content":"å¦‚æœåœ¨æ‰©å®¹è¿‡ç¨‹ä¸­ï¼Œé‚£ä¹ˆæ–°æ’å…¥æ•°æ®ä¼šè§¦å‘è¿ç§»è¿‡ç¨‹ã€‚å¦‚æœkeyåŸå…ˆæ²¡æœ‰ï¼Œåˆ™ä¼šç›´æ¥åœ¨æ–°bucketsä¸­ï¼Œå¦‚æœæœ‰ï¼Œåˆ™ä¼šé‡æ–°è®¡ç®—å®ƒåœ¨æ–°bucketsä¸­çš„ä½ç½®ï¼Œç„¶åå†™å…¥æ–°bucketsä¸­ã€‚åŸbucketæ ‡è®°ä¸ºå·²è¿ç§»ã€‚\n\n è¿ç§»è¿‡ç¨‹çš„æ¯”è¾ƒç¹çï¼Œè¦æƒ³çœŸæ­£ç†è§£ï¼Œè¿˜å¾—è‡ªå·±readä¸€ä¸‹ runtime.mapassignçš„ä»£ç ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1649393835,"ip_address":"","comment_id":340974,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100093501,"comment_content":"æƒ³é—®ä¸€ä¸‹ï¼Œå½“mapæ‰©å®¹åï¼Œæœ‰æ–°çš„æ•°æ®æ’å…¥æ˜¯ï¼Œå¦‚æœæ­¤æ—¶æ•°æ®è¿˜æ²¡æœ‰è¿ç§»åˆ°æ–°çš„bucketä¸­ï¼Œé‚£ä¹ˆruntimeæ˜¯æ€ä¹ˆçŸ¥é“è¿™ä¸ªå¯ä»¥æ˜¯åœ¨olderbucketså’Œbucketsçš„å…·ä½“ä½ç½®çš„ï¼Œæ˜¯ä¸æ˜¯è®¡ç®—è§„åˆ™ä¸ä¸€æ ·ï¼Œä½†æ˜¯è¿™ä¸ªè§„åˆ™å…·ä½“æ˜¯æ€ä¹ˆæ ·çš„ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":560571,"discussion_content":"å¦‚æœåœ¨æ‰©å®¹è¿‡ç¨‹ä¸­ï¼Œé‚£ä¹ˆæ–°æ’å…¥æ•°æ®ä¼šè§¦å‘è¿ç§»è¿‡ç¨‹ã€‚å¦‚æœkeyåŸå…ˆæ²¡æœ‰ï¼Œåˆ™ä¼šç›´æ¥åœ¨æ–°bucketsä¸­ï¼Œå¦‚æœæœ‰ï¼Œåˆ™ä¼šé‡æ–°è®¡ç®—å®ƒåœ¨æ–°bucketsä¸­çš„ä½ç½®ï¼Œç„¶åå†™å…¥æ–°bucketsä¸­ã€‚åŸbucketæ ‡è®°ä¸ºå·²è¿ç§»ã€‚\n\n è¿ç§»è¿‡ç¨‹çš„æ¯”è¾ƒç¹çï¼Œè¦æƒ³çœŸæ­£ç†è§£ï¼Œè¿˜å¾—è‡ªå·±readä¸€ä¸‹ runtime.mapassignçš„ä»£ç ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649393835,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":322686,"user_name":"å¤šé€‰å‚æ•°","can_delete":false,"product_type":"c1","uid":1248326,"ip_address":"","ucode":"B2294D80AB075F","user_header":"https://static001.geekbang.org/account/avatar/00/13/0c/46/dfe32cf4.jpg","comment_is_top":false,"comment_ctime":1637550794,"is_pvip":false,"replies":[{"id":117149,"content":"è¯»æ“ä½œå¾—åˆ°çš„æ˜¯å€¼çš„ä¸€ä¸ªcopy","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1637560387,"ip_address":"","comment_id":322686,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100093501,"comment_content":"çªç„¶æƒ³åˆ°ä¹‹å‰ç¢°åˆ°çš„ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯golang ç»“æ„ä½“ä½œä¸ºmapçš„å…ƒç´ æ—¶ï¼Œä¸èƒ½å¤Ÿç›´æ¥èµ‹å€¼ç»™ç»“æ„ä½“çš„æŸä¸ªå­—æ®µã€‚è¿™ä¸ªä¹Ÿæœ‰â€œGo ä¸å…è®¸è·å– map ä¸­ value çš„åœ°å€â€çš„åŸå› åœ¨å˜›ï¼Ÿå‡å¦‚è¿™æ ·çš„è¯ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆè¯»ç»“æ„ä½“ä¸­çš„æŸä¸ªå­—æ®µæ˜¯å¯ä»¥çš„ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":532228,"discussion_content":"è¯»æ“ä½œå¾—åˆ°çš„æ˜¯å€¼çš„ä¸€ä¸ªcopy","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637560387,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1248326,"avatar":"https://static001.geekbang.org/account/avatar/00/13/0c/46/dfe32cf4.jpg","nickname":"å¤šé€‰å‚æ•°","note":"","ucode":"B2294D80AB075F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":532520,"discussion_content":"ä½†æ˜¯è¯»è¿™ä¸ªæ“ä½œä¹Ÿæ˜¯éœ€è¦æ¶‰åŠåˆ°åœ°å€çš„è®¿é—®å§ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637634339,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":532228,"ip_address":"","group_id":0},"score":532520,"extra":"{\"user_type\":1}"}]}]},{"had_liked":false,"id":322024,"user_name":"TonyGao","can_delete":false,"product_type":"c1","uid":2827964,"ip_address":"","ucode":"75E9F13CB7C66D","user_header":"https://static001.geekbang.org/account/avatar/00/2b/26/bc/a73e4275.jpg","comment_is_top":false,"comment_ctime":1637140079,"is_pvip":false,"replies":[{"id":117141,"content":"ä¸é”™çš„æ€è·¯ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1637556678,"ip_address":"","comment_id":322024,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100093501,"comment_content":"func doIteration(m map[int]int) {\n\tmu.RLock()\n\tdefer mu.RUnlock()\n\n\tkeys := []int{}\n\n\tfor k := range m {\n\t\tkeys = append(keys, k)\n\t}\n\n\tsort.SliceStable(keys, func(x, y int) bool {\n\t\treturn x &lt; y\n\t})\n\n\tfor _, k := range keys {\n\t\tfmt.Printf(&quot;[%d, %d] &quot;, k, m[k])\n\t}\n\n\tfmt.Println()\n}\n\nfunc doWrite(m map[int]int) {\n\tmu.Lock()\n\tdefer mu.Unlock()\n\n\tfor k, v := range m {\n\t\tm[k] = v + 1\n\t}\n}\n\n==&gt; å¯¹å¹¶å‘ç¤ºä¾‹ä»£ç çš„ç¨³å®šæ’åºè¾“å‡º (åŸä¾‹1000æ¬¡è¾“å‡ºå¤ªå¤šï¼Œè¾“å‡ºå‰10ä¸ªä½œä¸ºè¯´æ˜)ï¼š\n[1, 11] [2, 12] [3, 13] \n[1, 12] [2, 13] [3, 14] \n[1, 13] [2, 14] [3, 15] \n[1, 14] [2, 15] [3, 16] \n[1, 15] [2, 16] [3, 17] \n[1, 16] [2, 17] [3, 18] \n[1, 17] [2, 18] [3, 19] \n[1, 18] [2, 19] [3, 20] \n[1, 19] [2, 20] [3, 21] \n[1, 20] [2, 21] [3, 22] \nã€‚ã€‚ã€‚","like_count":3,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":532211,"discussion_content":"ä¸é”™çš„æ€è·¯ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637556678,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2827964,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/26/bc/a73e4275.jpg","nickname":"TonyGao","note":"","ucode":"75E9F13CB7C66D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":530774,"discussion_content":"ä¸å¥½æ„æ€ï¼Œç¨³å®šæ’åºå‹˜è¯¯ï¼š\n\tsort.SliceStable(keys, func(x, y int) bool {\n\t\treturn keys[x] &lt; keys[y]\n\t})","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1637145244,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":366667,"user_name":"é‚¹å¿—é¹.Joey â·â·â·","can_delete":false,"product_type":"c1","uid":1011311,"ip_address":"å¹¿ä¸œ","ucode":"5DE4B9097D95AE","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6e/6f/44da923f.jpg","comment_is_top":false,"comment_ctime":1674028315,"is_pvip":false,"replies":[{"id":133632,"content":"ğŸ‘ã€‚ç¨åè®©ç¼–è¾‘è€å¸ˆä¿®æ”¹ä¸€ä¸‹è¿™ä¸ªtypoã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1674220678,"ip_address":"è¾½å®","comment_id":366667,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100093501,"comment_content":"æ—¢åˆ‡ç‰‡ä¹‹å, åº”è¯¥æ˜¯ &quot;ç»§åˆ‡ç‰‡ä¹‹å&quot;?","like_count":2,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":600342,"discussion_content":"ğŸ‘ã€‚ç¨åè®©ç¼–è¾‘è€å¸ˆä¿®æ”¹ä¸€ä¸‹è¿™ä¸ªtypoã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1674220679,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"è¾½å®","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":360170,"user_name":"ä¸è¯´è¯è£…ç³•æ‰‹","can_delete":false,"product_type":"c1","uid":2922271,"ip_address":"åŒ—äº¬","ucode":"6465E83F4E6F58","user_header":"https://static001.geekbang.org/account/avatar/00/2c/97/1f/2a68c980.jpg","comment_is_top":false,"comment_ctime":1666252089,"is_pvip":false,"replies":[{"id":131025,"content":"çœ‹äº†ä¸€ä¸‹ä½ æ”¹åçš„ä»£ç ï¼Œä½ æŠŠdoIterationè¿™ä¸ªgoroutineæ³¨é‡Šæ‰äº†ï¼Œåªä¿ç•™äº†doWriteè¿™ä¸ªgoroutineï¼Œè¿™æ ·å°±æ²¡æœ‰äº†å¹¶å‘ï¼Œå°±å‰©ä¸‹æ‰§è¡ŒdoWriteè¿™ä¸€ä¸ªgoroutineè®¿é—®mapäº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1666335447,"ip_address":"åŒ—äº¬","comment_id":360170,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100093501,"comment_content":"å…³äºè€å¸ˆå¹¶å‘è¯»å†™mapçš„ç¤ºä¾‹ï¼Œåšäº†å¦‚ä¸‹ä¿®æ”¹\n\t&#47;&#47;go func() {\n\t&#47;&#47;\tfor i := 0; i &lt; 1000; i++ {\n\t&#47;&#47;\t\tdoIteration(m)\n\t&#47;&#47;\t}\n\t&#47;&#47;}()\n\n\tgo func() {\n\t\tfor i := 0; i &lt; 10000; i++ {\n\t\t\tdoWrite(m)\n\t\t}\n\t}()\n\n\ttime.Sleep(5 * time.Second)\n\tfmt.Println(m)\n\t\noutput:\nmap[1:10011 2:10012 3:10013]\nè¿›ç¨‹ å·²å®Œæˆï¼Œé€€å‡ºä»£ç ä¸º 0\n\næˆ‘æœ¬åœ°æ˜¯1.16ç‰ˆæœ¬ï¼Œçœ‹èµ·æ¥æ˜¯å¯ä»¥å¹¶å‘å†™çš„ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":600342,"discussion_content":"ğŸ‘ã€‚ç¨åè®©ç¼–è¾‘è€å¸ˆä¿®æ”¹ä¸€ä¸‹è¿™ä¸ªtypoã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1674220679,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"è¾½å®","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":359173,"user_name":"pythonbug","can_delete":false,"product_type":"c1","uid":1487274,"ip_address":"è¾½å®","ucode":"1A70CA92FFF8EB","user_header":"https://wx.qlogo.cn/mmopen/vi_32/wgMMrp1hvSB3E30KqZvMsj3KQdAI3T1uQM77LT7hZ65nVSjPGRg3AbUOyiahnssA6AIT5PAkyHFmlTBzUH9gdyQ/132","comment_is_top":false,"comment_ctime":1665305666,"is_pvip":false,"replies":[{"id":130656,"content":"âœ…","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1665378297,"ip_address":"è¾½å®","comment_id":359173,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100093501,"comment_content":"func sortMap(m map[string]int) {\n\t&#47;&#47; å­˜key\n\tvar s []string\n\tfor k, _ := range m {\n\t\ts = append(s, k)\n\t}\n\n\t&#47;&#47; å¯¹sè¿›è¡Œæ’åº\n\tsort.Strings(s)\n\n\t&#47;&#47; éå†è¾“å‡º\n\tfor _, v := range s {\n\t\tfmt.Println(v, m[v])\n\t}\n}","like_count":2,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":589870,"discussion_content":"âœ…","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1665378297,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"è¾½å®","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":354658,"user_name":"Geek_d86547","can_delete":false,"product_type":"c1","uid":2969563,"ip_address":"åŒ—äº¬","ucode":"AD9AE8FEF6B307","user_header":"","comment_is_top":false,"comment_ctime":1660643265,"is_pvip":false,"replies":[{"id":129071,"content":"ä½ çœ‹çœ‹https:&#47;&#47;tonybai.com&#47;go-course-faqä¸­çš„è¡¥å……æ˜¯å¦æ»¡è¶³ä½ çš„éœ€æ±‚ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1660789226,"ip_address":"åŒ—äº¬","comment_id":354658,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100093501,"comment_content":"è€å¸ˆ mapéå†çš„éšæœºæ€§å¯ä»¥å†è¯¦ç»†è¯´æ˜ä¸€äº›å˜›ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":589870,"discussion_content":"âœ…","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1665378297,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"è¾½å®","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":351317,"user_name":"zzy","can_delete":false,"product_type":"c1","uid":1805408,"ip_address":"","ucode":"3D7EC623EB8204","user_header":"https://static001.geekbang.org/account/avatar/00/1b/8c/60/58b6c39e.jpg","comment_is_top":false,"comment_ctime":1657696721,"is_pvip":false,"replies":[{"id":127789,"content":"å…³äºä½ æåˆ°çš„goå†…ç½®ç±»å‹mapçš„å®ç°çš„é€‰å‹é—®é¢˜ï¼Œæˆ‘è¿˜çœŸä¸æ¸…æ¥šã€‚æˆ‘åœ¨å…¬å¼€èµ„æ–™é‡Œæœäº†ä¸€ä¸‹ï¼Œä¹Ÿæ²¡æŸ¥åˆ°ã€‚ä¸è¿‡æˆ‘è§‰å¾—ï¼Œgo teamå½“åˆåº”è¯¥ä¸å•å•æ˜¯ä»æ€§èƒ½è¿™ä¸€ä¸ªç»´åº¦è€ƒè™‘çš„ã€‚æ¯•ç«Ÿæ˜¯runtimeå±‚çš„å®ç°ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå•ç‹¬çš„æ ‡å‡†åº“åŒ…ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1657709981,"ip_address":"","comment_id":351317,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100093501,"comment_content":"æƒ³é—®ä¸‹golangä¸ºä½•ä¸åƒjavaé‚£æ ·ï¼Œåœ¨åº•å±‚ä½¿ç”¨çº¢é»‘æ ‘ï¼Œæ€§èƒ½åº”è¯¥æ˜¯æ›´å¥½çš„","like_count":2,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579834,"discussion_content":"å…³äºä½ æåˆ°çš„goå†…ç½®ç±»å‹mapçš„å®ç°çš„é€‰å‹é—®é¢˜ï¼Œæˆ‘è¿˜çœŸä¸æ¸…æ¥šã€‚æˆ‘åœ¨å…¬å¼€èµ„æ–™é‡Œæœäº†ä¸€ä¸‹ï¼Œä¹Ÿæ²¡æŸ¥åˆ°ã€‚ä¸è¿‡æˆ‘è§‰å¾—ï¼Œgo teamå½“åˆåº”è¯¥ä¸å•å•æ˜¯ä»æ€§èƒ½è¿™ä¸€ä¸ªç»´åº¦è€ƒè™‘çš„ã€‚æ¯•ç«Ÿæ˜¯runtimeå±‚çš„å®ç°ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå•ç‹¬çš„æ ‡å‡†åº“åŒ…ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657709981,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":351301,"user_name":"è èå¹é›ªâ€”Code","can_delete":false,"product_type":"c1","uid":1650378,"ip_address":"","ucode":"A5B2FC661EE17D","user_header":"https://static001.geekbang.org/account/avatar/00/19/2e/ca/469f7266.jpg","comment_is_top":false,"comment_ctime":1657683928,"is_pvip":false,"replies":[{"id":127784,"content":"âœ…","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1657699933,"ip_address":"","comment_id":351301,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100093501,"comment_content":"å½©ï¼åªè¦keyæ˜¯æœ‰åºçš„å¹¶ä¸”è®¿é—®é¡ºåºæ˜¯å›ºå®šçš„ï¼Œvalueä¹Ÿå°±å¯ä»¥ç¡®å®šé¡ºåºäº†ï¼Œé€šè¿‡åˆ‡ç‰‡ã€æ•°ç»„å¯ä»¥å®ç°","like_count":2,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579834,"discussion_content":"å…³äºä½ æåˆ°çš„goå†…ç½®ç±»å‹mapçš„å®ç°çš„é€‰å‹é—®é¢˜ï¼Œæˆ‘è¿˜çœŸä¸æ¸…æ¥šã€‚æˆ‘åœ¨å…¬å¼€èµ„æ–™é‡Œæœäº†ä¸€ä¸‹ï¼Œä¹Ÿæ²¡æŸ¥åˆ°ã€‚ä¸è¿‡æˆ‘è§‰å¾—ï¼Œgo teamå½“åˆåº”è¯¥ä¸å•å•æ˜¯ä»æ€§èƒ½è¿™ä¸€ä¸ªç»´åº¦è€ƒè™‘çš„ã€‚æ¯•ç«Ÿæ˜¯runtimeå±‚çš„å®ç°ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå•ç‹¬çš„æ ‡å‡†åº“åŒ…ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657709981,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":349269,"user_name":"W-T","can_delete":false,"product_type":"c1","uid":1088973,"ip_address":"","ucode":"834869DA80D95B","user_header":"https://static001.geekbang.org/account/avatar/00/10/9d/cd/c21a01dd.jpg","comment_is_top":false,"comment_ctime":1655860607,"is_pvip":false,"replies":[{"id":127149,"content":"ä¸éœ€è¦å®ç°ä»€ä¹ˆæ¥å£ã€‚åªè¦è‡ªå®šä¹‰æ•°æ®ç±»å‹çš„åº•å±‚ç±»å‹(underlying type)æ˜¯æ”¯æŒfor rangeå³å¯ï¼Œæ¯”å¦‚åˆ‡ç‰‡ã€channelã€æ•°ç»„ã€mapç­‰ã€‚\n\næ¯”å¦‚ï¼š\n\ntype Rangable []int\n\nfunc main() {\n\tvar r = Rangable{1, 2, 3, 4, 5, 6}\n\tfor _, n := range r {\n\t\tprintln(n)\n\t}\n}","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1655905733,"ip_address":"","comment_id":349269,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100093501,"comment_content":"è€å¸ˆï¼Œè‡ªå®šä¹‰æ•°æ®ç±»å‹èƒ½å¦æ”¯æŒfor rangeè¯­å¥ï¼Œæ”¯æŒçš„è¯éœ€è¦å®ç°ä»€ä¹ˆæ¥å£","like_count":2,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579813,"discussion_content":"âœ…","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657699933,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":340974,"user_name":"å¤§å¸…å“¥","can_delete":false,"product_type":"c1","uid":1439523,"ip_address":"","ucode":"E6AE4804D9F337","user_header":"","comment_is_top":false,"comment_ctime":1649251038,"is_pvip":false,"replies":[{"id":124705,"content":"å¦‚æœåœ¨æ‰©å®¹è¿‡ç¨‹ä¸­ï¼Œé‚£ä¹ˆæ–°æ’å…¥æ•°æ®ä¼šè§¦å‘è¿ç§»è¿‡ç¨‹ã€‚å¦‚æœkeyåŸå…ˆæ²¡æœ‰ï¼Œåˆ™ä¼šç›´æ¥åœ¨æ–°bucketsä¸­ï¼Œå¦‚æœæœ‰ï¼Œåˆ™ä¼šé‡æ–°è®¡ç®—å®ƒåœ¨æ–°bucketsä¸­çš„ä½ç½®ï¼Œç„¶åå†™å…¥æ–°bucketsä¸­ã€‚åŸbucketæ ‡è®°ä¸ºå·²è¿ç§»ã€‚\n\n è¿ç§»è¿‡ç¨‹çš„æ¯”è¾ƒç¹çï¼Œè¦æƒ³çœŸæ­£ç†è§£ï¼Œè¿˜å¾—è‡ªå·±readä¸€ä¸‹ runtime.mapassignçš„ä»£ç ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1649393835,"ip_address":"","comment_id":340974,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100093501,"comment_content":"æƒ³é—®ä¸€ä¸‹ï¼Œå½“mapæ‰©å®¹åï¼Œæœ‰æ–°çš„æ•°æ®æ’å…¥æ˜¯ï¼Œå¦‚æœæ­¤æ—¶æ•°æ®è¿˜æ²¡æœ‰è¿ç§»åˆ°æ–°çš„bucketä¸­ï¼Œé‚£ä¹ˆruntimeæ˜¯æ€ä¹ˆçŸ¥é“è¿™ä¸ªå¯ä»¥æ˜¯åœ¨olderbucketså’Œbucketsçš„å…·ä½“ä½ç½®çš„ï¼Œæ˜¯ä¸æ˜¯è®¡ç®—è§„åˆ™ä¸ä¸€æ ·ï¼Œä½†æ˜¯è¿™ä¸ªè§„åˆ™å…·ä½“æ˜¯æ€ä¹ˆæ ·çš„ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":577060,"discussion_content":"ä¸éœ€è¦å®ç°ä»€ä¹ˆæ¥å£ã€‚åªè¦è‡ªå®šä¹‰æ•°æ®ç±»å‹çš„åº•å±‚ç±»å‹(underlying type)æ˜¯æ”¯æŒfor rangeå³å¯ï¼Œæ¯”å¦‚åˆ‡ç‰‡ã€channelã€æ•°ç»„ã€mapç­‰ã€‚\n\næ¯”å¦‚ï¼š\n\ntype Rangable []int\n\nfunc main() {\n\tvar r = Rangable{1, 2, 3, 4, 5, 6}\n\tfor _, n := range r {\n\t\tprintln(n)\n\t}\n}","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1655905734,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":337105,"user_name":"Rayjun","can_delete":false,"product_type":"c1","uid":1002514,"ip_address":"","ucode":"61A3D1A3D03569","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4c/12/f0c145d4.jpg","comment_is_top":false,"comment_ctime":1646624838,"is_pvip":false,"replies":[{"id":123245,"content":"åœ¨runtimeå®ç°å±‚é¢ï¼Œhmapç»“æ„ä½“ä¸­çš„bucketsæ˜¯ä¸€ä¸ªunsafe.Pointerï¼Œå®ƒæ˜¯ä¸€ä¸ªæŒ‡å‘bucketâ€œæ•°ç»„â€çš„æŒ‡é’ˆã€‚è¿™ä¸ªâ€œæ•°ç»„â€ä¸æ˜¯goè¯­æ³•å±‚é¢çš„æ•°ç»„ï¼Œæ˜¯ä¸€ä¸ªç»„åˆä½“ã€‚æ¯ä¸ªæ•°ç»„å…ƒç´ æ˜¯ç”±bmapã€keysæ•°ç»„ã€valuesæ•°ç»„å’ŒoverflowæŒ‡é’ˆç»„æˆï¼ˆçœ‹å›¾ï¼‰ã€‚go runtimeæ˜¯çŸ¥é“æ¯ä¸ªkeyã€valueçš„ç±»å‹çš„ï¼Œä¹Ÿå°±çŸ¥é“äº†æ¯ä¸ªkeyå’Œvalueçš„sizeï¼Œruntimeåªè¦æŒ‰sizeåˆ†é…å¯¹åº”çš„å†…å­˜å—å³å¯ï¼Œå…¶æ“ä½œå¹¶ä¸æ˜¯é€šè¿‡æ•°ç»„è¯­æ³•è¿›è¡Œçš„ï¼Œè€Œæ˜¯é€šè¿‡æŒ‡é’ˆè¿ç®—å¾—åˆ°çš„åç§»å€¼ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1646724496,"ip_address":"","comment_id":337105,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100093501,"comment_content":" è€å¸ˆï¼Œé—®ä¸€ä¸‹å…³äº bucket çš„é—®é¢˜ï¼Œæ—¢ç„¶ bucket æ˜¯æ•°ç»„ï¼Œå¦‚æœ key å’Œ value çš„ç±»å‹ä¸ä¸€æ ·ï¼Œè¦æ€ä¹ˆå­˜å‚¨å‘¢ï¼Ÿè€Œä¸”ä¸‹é¢è¿˜éœ€è¦å­˜å‚¨ overflow bucket çš„æŒ‡é’ˆ","like_count":2},{"had_liked":false,"id":335895,"user_name":"Geek_f654de","can_delete":false,"product_type":"c1","uid":2424712,"ip_address":"","ucode":"252C9BE5989D88","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/QPLkhJ3CoNt0j4ccGovE8tp7ma097vMrKbEq3jefQZNxI6psShxXxqMWTtI4T7oV0Jqq2KnWREnsJwkkZwnJ8Q/132","comment_is_top":false,"comment_ctime":1645759348,"is_pvip":false,"replies":[{"id":122777,"content":"âœ…","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1645837734,"ip_address":"","comment_id":335895,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100093501,"comment_content":"æ€è€ƒé¢˜ï¼š\n1.æŠŠmapçš„keyæ‹¿å‡ºæ¥ï¼Œæ”¾åˆ°åˆ‡ç‰‡é‡Œ\n2.å¯¹åˆ‡ç‰‡è¿›è¡Œæ’åº\n3.å–å‡ºåˆ‡ç‰‡ä¸­å…ƒç´ å¯¹åº”çš„value","like_count":2,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":555029,"discussion_content":"åœ¨runtimeå®ç°å±‚é¢ï¼Œhmapç»“æ„ä½“ä¸­çš„bucketsæ˜¯ä¸€ä¸ªunsafe.Pointerï¼Œå®ƒæ˜¯ä¸€ä¸ªæŒ‡å‘bucketâ€œæ•°ç»„â€çš„æŒ‡é’ˆã€‚è¿™ä¸ªâ€œæ•°ç»„â€ä¸æ˜¯goè¯­æ³•å±‚é¢çš„æ•°ç»„ï¼Œæ˜¯ä¸€ä¸ªç»„åˆä½“ã€‚æ¯ä¸ªæ•°ç»„å…ƒç´ æ˜¯ç”±bmapã€keysæ•°ç»„ã€valuesæ•°ç»„å’ŒoverflowæŒ‡é’ˆç»„æˆï¼ˆçœ‹å›¾ï¼‰ã€‚go runtimeæ˜¯çŸ¥é“æ¯ä¸ªkeyã€valueçš„ç±»å‹çš„ï¼Œä¹Ÿå°±çŸ¥é“äº†æ¯ä¸ªkeyå’Œvalueçš„sizeï¼Œruntimeåªè¦æŒ‰sizeåˆ†é…å¯¹åº”çš„å†…å­˜å—å³å¯ï¼Œå…¶æ“ä½œå¹¶ä¸æ˜¯é€šè¿‡æ•°ç»„è¯­æ³•è¿›è¡Œçš„ï¼Œè€Œæ˜¯é€šè¿‡æŒ‡é’ˆè¿ç®—å¾—åˆ°çš„åç§»å€¼ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646724496,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":332952,"user_name":"Geek_2337af","can_delete":false,"product_type":"c1","uid":2847330,"ip_address":"","ucode":"54B135EB7E70F1","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ep7c7UKsjRiclaAqD9vMHSUXayzrvRhvic3Lm6ibX82L3DibJnCCtDmB3OfxbuVjetpT6Qa8IuwqZCWlw/132","comment_is_top":false,"comment_ctime":1643876873,"is_pvip":false,"replies":[{"id":121804,"content":"ä¸æ”¯æŒçš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1644290895,"ip_address":"","comment_id":332952,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100093501,"comment_content":"goæ˜¯å¦æ”¯æŒåˆ©ç”¨è‡ªå®šä¹‰çš„å“ˆå¸Œå‡½æ•°åˆ›å»ºmapå‘¢","like_count":2,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":553300,"discussion_content":"âœ…","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645837734,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":332436,"user_name":"Niverkk","can_delete":false,"product_type":"c1","uid":2179875,"ip_address":"","ucode":"F9220C10107E44","user_header":"https://static001.geekbang.org/account/avatar/00/21/43/23/d98fb8f7.jpg","comment_is_top":false,"comment_ctime":1643250525,"is_pvip":false,"replies":[{"id":121620,"content":"1. æ˜¯çš„\n2. è®°å¾—è®²ç»“æ„ä½“ç±»å‹é‚£ä¸€è®²æœ‰è¯´è¿‡å†…å­˜å¯¹é½çš„æ„ä¹‰\n3. ä¸€æ¬¡æ€§è¿ç§» ä¼šå¯¼è‡´mapæ“ä½œçš„å»¶è¿Ÿè¾ƒå¤§ï¼Œæ‰€ä»¥è¦é€æ­¥è¿ç§»ï¼Œæœ‰ç‚¹åƒèš‚èšæ¬å®¶ï¼Œä¸€ç‚¹ç‚¹å¼„ï¼Œå°†è¾ƒå¤§çš„æ¶ˆè€—åˆ†æ‹…åˆ°å¤šæ¬¡æ“ä½œä¸­ã€‚ä¸€æ—¦å¼€å§‹è¿ç§»ï¼Œä¸è®ºæ˜¯assignè¿˜æ˜¯deleteéƒ½ä¼šè¿›è¡Œåˆ†æ‹…éƒ¨åˆ†è¿ç§»æ“ä½œï¼Œè¿™å’Œassignè¿˜æ˜¯deleteçš„è¯­ä¹‰æ— å…³ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1643544134,"ip_address":"","comment_id":332436,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100093501,"comment_content":"è€å¸ˆå¥½ï¼Œæœ‰å‡ ä¸ªé—®é¢˜è¯·æ•™ä¸‹\né—®é¢˜1ï¼š\n1.v := m[&quot;key&quot;] â†’ v := runtime.mapaccess1(maptype, m, &quot;key&quot;)\n2.v, ok := m[&quot;key&quot;] â†’ v, ok := runtime.mapaccess2(maptype, m, &quot;key&quot;)\nå…¶å®è¿™ä¸¤ç§å†™æ³•è°ƒç”¨çš„åº•å±‚æ–¹æ³•æ˜¯ä¸ä¸€æ ·çš„ï¼Œ2ä»–ä¼šè¿”å›ä¸¤ä¸ªå€¼ï¼Œvæ˜¯å¯¹åº”çš„valueï¼Œ okä»£è¡¨keyæ˜¯å¦å­˜åœ¨äºmapä¸­ï¼Ÿ\n\né—®é¢˜2ï¼š\nvalueå­˜å‚¨åŒºåŸŸkvæ ¼å¼ä¸ºä»€ä¹ˆéœ€è¦å¯¹é½ï¼Ÿ\n\né—®é¢˜3ï¼š\nå¦‚æœæ˜¯å› ä¸ºå½“å‰æ•°æ®æ•°é‡è¶…å‡º LoadFactor æŒ‡å®šæ°´ä½è€Œè¿›è¡Œçš„æ‰©å®¹ï¼Œé‚£ä¹ˆè¿è¡Œæ—¶ä¼šå»ºç«‹ä¸€ä¸ªä¸¤å€äºç°æœ‰è§„æ¨¡çš„ bucket æ•°ç»„ï¼Œä½†çœŸæ­£çš„æ’ç©ºå’Œè¿ç§»å·¥ä½œä¹Ÿæ˜¯åœ¨ assign å’Œ delete æ—¶é€æ­¥è¿›è¡Œçš„ã€‚\n\nå¯¹äºè¿™æ®µè¯ï¼Œé€æ­¥è¿ç§»æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿassignä»£è¡¨å¢åŠ å—ï¼Ÿåˆ é™¤è·Ÿæ‰©å®¹æœ‰å…³ç³»å—ï¼Œåˆ é™¤åº”è¯¥æ˜¯å½±å“ç¼©å®¹å§ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":549906,"discussion_content":"ä¸æ”¯æŒçš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644290895,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":331918,"user_name":"å¤©æ•Œ","can_delete":false,"product_type":"c1","uid":1059944,"ip_address":"","ucode":"CD29A622197197","user_header":"https://static001.geekbang.org/account/avatar/00/10/2c/68/c299bc71.jpg","comment_is_top":false,"comment_ctime":1642882511,"is_pvip":false,"replies":[{"id":121614,"content":"tophash [bucketCnt]uint8  &#47;&#47; tophashå­˜å‚¨äº†ä¸€ç»„åç§»å€¼\n\nå¦‚æœä¸¤ä¸ªkeyçš„hashcodeå®Œå…¨ä¸€æ ·ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªkeyä¼šåˆ†é…åˆ°ä¸€ä¸ªbucketä¸­ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1643542590,"ip_address":"","comment_id":331918,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100093501,"comment_content":"è€å¸ˆ, tophashåŒºåŸŸå­˜çš„æ˜¯æŒ‡é’ˆå—ï¼Ÿå½“ä¸¤ä¸ªkeyçš„hashcodeå®Œå…¨ä¸€æ ·åˆæ˜¯å¦‚ä½•å¤„ç†çš„ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":549082,"discussion_content":"1. æ˜¯çš„\n2. è®°å¾—è®²ç»“æ„ä½“ç±»å‹é‚£ä¸€è®²æœ‰è¯´è¿‡å†…å­˜å¯¹é½çš„æ„ä¹‰\n3. ä¸€æ¬¡æ€§è¿ç§» ä¼šå¯¼è‡´mapæ“ä½œçš„å»¶è¿Ÿè¾ƒå¤§ï¼Œæ‰€ä»¥è¦é€æ­¥è¿ç§»ï¼Œæœ‰ç‚¹åƒèš‚èšæ¬å®¶ï¼Œä¸€ç‚¹ç‚¹å¼„ï¼Œå°†è¾ƒå¤§çš„æ¶ˆè€—åˆ†æ‹…åˆ°å¤šæ¬¡æ“ä½œä¸­ã€‚ä¸€æ—¦å¼€å§‹è¿ç§»ï¼Œä¸è®ºæ˜¯assignè¿˜æ˜¯deleteéƒ½ä¼šè¿›è¡Œåˆ†æ‹…éƒ¨åˆ†è¿ç§»æ“ä½œï¼Œè¿™å’Œassignè¿˜æ˜¯deleteçš„è¯­ä¹‰æ— å…³ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643544134,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":323779,"user_name":"æ–‡ç»","can_delete":false,"product_type":"c1","uid":1072346,"ip_address":"","ucode":"2C059BD2A4276B","user_header":"https://static001.geekbang.org/account/avatar/00/10/5c/da/0a8bc27b.jpg","comment_is_top":false,"comment_ctime":1638158532,"is_pvip":true,"replies":[{"id":117583,"content":"è¿™ç§æ–¹å¼ä¸æ˜¯å‡½æ•°ï¼Œè¿™å°±æ˜¯goçš„è¯­æ³•ã€‚goç¼–è¯‘å™¨ä¼šå¤„ç†è¿™ç§è¯­æ³•ï¼Œç¿»è¯‘ä¸ºå¯¹åº”çš„å¤„ç†ä»£ç ã€‚ä½ åªéœ€è¦çŸ¥é“å…¶è¯­ä¹‰æ˜¯å•¥å°±å¯ä»¥äº†ï¼Œç„¶åç”¨å°±okäº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1638262768,"ip_address":"","comment_id":323779,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100093501,"comment_content":"v, ok := m[&quot;key1&quot;]\nv := m[&quot;key1&quot;]\nç™½è€å¸ˆï¼Œè¿™ä¸¤ç§æ–¹å¼éƒ½å¯ä»¥ï¼Œè¯·é—®commaï¼ŒOKï¼Œ è¿™ç§æ–¹å¼æ˜¯å‡½æ•°å®ç°çš„å—ï¼Ÿå¦‚æœæ˜¯å‡½æ•°çš„è¯ï¼Œæ€ä¹ˆä¸€ä¸ªå‡½æ•°å¯ä»¥åŒæ—¶è¿”å›ä¸€ä¸ªå€¼ï¼Œæˆ–è€…ä¸¤ä¸ªå€¼ï¼Ÿ channelä¹Ÿæœ‰ç±»ä¼¼çš„ç”¨æ³•ï¼Œä¸å¤ªç†è§£ã€‚\n","like_count":2,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":549074,"discussion_content":"tophash [bucketCnt]uint8  // tophashå­˜å‚¨äº†ä¸€ç»„åç§»å€¼\n\nå¦‚æœä¸¤ä¸ªkeyçš„hashcodeå®Œå…¨ä¸€æ ·ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªkeyä¼šåˆ†é…åˆ°ä¸€ä¸ªbucketä¸­ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643542590,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":323776,"user_name":"æ–‡ç»","can_delete":false,"product_type":"c1","uid":1072346,"ip_address":"","ucode":"2C059BD2A4276B","user_header":"https://static001.geekbang.org/account/avatar/00/10/5c/da/0a8bc27b.jpg","comment_is_top":false,"comment_ctime":1638158050,"is_pvip":true,"replies":[{"id":117587,"content":"åˆ‡ç‰‡ç±»å‹ä¹Ÿä¸æ˜¯åœ¨æ‰€æœ‰åœºæ™¯ä¸‹éƒ½æ˜¯é›¶å€¼å¯ç”¨çš„å•Šã€‚\n\nvar sl []int\nsl[0] = 13 &#47;&#47; panic\n\nsl = append(sl, 13) &#47;&#47; ok\n\nä½†mapæ²¡æœ‰appendï¼Œåªæœ‰m[k]=vï¼Œè¿™æ ·å½“mapå˜é‡æ²¡æœ‰åˆå§‹åŒ–çš„æ—¶å€™ï¼Œåªèƒ½panicã€‚\n\næ‰€è°“å®ƒå†…éƒ¨å®ç°çš„å¤æ‚æ€§ï¼Œå°±æ˜¯goæ²¡æœ‰æä¾›ç±»ä¼¼appendçš„å†…ç½®å‡½æ•°æ¥æ”¯æŒé›¶å€¼çš„mapã€‚\n\n","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1638265255,"ip_address":"","comment_id":323776,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100093501,"comment_content":"&quot;ä½† map ç±»å‹ï¼Œå› ä¸ºå®ƒå†…éƒ¨å®ç°çš„å¤æ‚æ€§ï¼Œæ— æ³•â€œé›¶å€¼å¯ç”¨â€ã€‚æ‰€ä»¥ï¼Œå¦‚æœæˆ‘ä»¬å¯¹å¤„äºé›¶å€¼çŠ¶æ€çš„ map å˜é‡ç›´æ¥è¿›è¡Œæ“ä½œï¼Œå°±ä¼šå¯¼è‡´è¿è¡Œæ—¶å¼‚å¸¸ï¼ˆpanicï¼‰ï¼Œä»è€Œå¯¼è‡´ç¨‹åºè¿›ç¨‹å¼‚å¸¸é€€å‡ºã€‚&quot;\n\nç™½è€å¸ˆï¼Œæˆ‘ç†è§£é›¶å€¼å¯ç”¨ï¼Œæ—¢å¯ä»¥æŠŠå˜é‡å½“åšnilæ¥ä½¿ç”¨ï¼Œåˆå¯ä»¥å½“åšä¸€ä¸ªåˆå§‹åŒ–å¥½çš„å¯¹è±¡æ¥ä½¿ç”¨ã€‚è¿™æ ·å¯¹å—ï¼Ÿæœ‰ä¸¤ä¸ªè¿›ä¸€æ­¥çš„ç–‘é—®\n1. slice çš„é›¶å€¼åˆå§‹åŒ–æ˜¯æ€ä¹ˆå®ç°çš„ï¼Œç¼–è¯‘å™¨å’Œè¿è¡Œæ—¶åˆ†åˆ«æ‰®æ¼”äº†ä»€ä¹ˆè§’è‰²ã€‚\n2. mapçš„é›¶å€¼åˆå§‹åŒ–éš¾åœ¨å“ªé‡Œï¼ŒæŒ‰ç…§æˆ‘çš„ç†è§£ï¼Œåªè¦åœ¨ç¼–è¯‘çš„æ—¶å€™åˆ¤æ–­æ˜¯å¦ä¸ºnilï¼Œè¿è¡Œçš„æ—¶å€™å‘ç°å®ƒæ˜¯nilï¼Œç»™å®ƒåˆ†é…ä¸€ä¸ªå¯¹è±¡å°±å¯ä»¥äº†ã€‚è‚¯å®šæ˜¯æˆ‘é—æ¼äº†å“ªäº›é‡è¦çš„ä¿¡æ¯ï¼Œè¯·ç™½è€å¸ˆè§£æƒ‘ã€‚","like_count":2,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":534733,"discussion_content":"åˆ‡ç‰‡ç±»å‹ä¹Ÿä¸æ˜¯åœ¨æ‰€æœ‰åœºæ™¯ä¸‹éƒ½æ˜¯é›¶å€¼å¯ç”¨çš„å•Šã€‚\n\nvar sl []int\nsl[0] = 13 // panic\n\nsl = append(sl, 13) // ok\n\nä½†mapæ²¡æœ‰appendï¼Œåªæœ‰m[k]=vï¼Œè¿™æ ·å½“mapå˜é‡æ²¡æœ‰åˆå§‹åŒ–çš„æ—¶å€™ï¼Œåªèƒ½panicã€‚\n\næ‰€è°“å®ƒå†…éƒ¨å®ç°çš„å¤æ‚æ€§ï¼Œå°±æ˜¯goæ²¡æœ‰æä¾›ç±»ä¼¼appendçš„å†…ç½®å‡½æ•°æ¥æ”¯æŒé›¶å€¼çš„mapã€‚\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638265255,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":370076,"user_name":"â„¡äººè§äººçˆ±æµ©ç„¶å›ã‚œ","can_delete":false,"product_type":"c1","uid":1592298,"ip_address":"åŒ—äº¬","ucode":"D042A622533C72","user_header":"https://static001.geekbang.org/account/avatar/00/18/4b/ea/a9e7bc50.jpg","comment_is_top":false,"comment_ctime":1678351113,"is_pvip":false,"replies":[{"id":134926,"content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1678432218,"ip_address":"åŒ—äº¬","comment_id":370076,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100093501,"comment_content":"package main\n\nimport (\n\t&quot;fmt&quot;\n\t&quot;sort&quot;\n)\n\nfunc main(){\n\tm := map[string]int{ &#47;&#47;åˆå§‹åŒ–ä¸€ä¸ªmapç±»å‹çš„å˜é‡m\n\t\t&quot;apple&quot;:1,\n\t\t&quot;banana&quot;:2,\n\t\t&quot;cherry&quot;:3,\n\t}\n\tkeySlice := make([]string,0,len(m)) &#47;&#47;åˆ›å»ºä¸€ä¸ªåˆ‡ç‰‡ï¼Œé•¿åº¦æ˜¯mçš„é•¿åº¦\n\t&#47;&#47;éå†mè·å–mapç±»å‹çš„keyå¹¶å­˜åˆ°keySliceä¸­\n        for k := range m {\n\t\tkeySlice = append(keySlice, k)\n\t}\n\t&#47;&#47; å¯¹mySliceæ’åº\n\tsort.Strings(keySlice)\n        &#47;&#47;é€šè¿‡éå†æœ‰åºkeyçš„æ–¹å¼è·å–mapçš„å€¼\n\tfor _,v := range keySlice{\n\t\tfmt.Println(v,m[v])\n\t}\n}","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":534733,"discussion_content":"åˆ‡ç‰‡ç±»å‹ä¹Ÿä¸æ˜¯åœ¨æ‰€æœ‰åœºæ™¯ä¸‹éƒ½æ˜¯é›¶å€¼å¯ç”¨çš„å•Šã€‚\n\nvar sl []int\nsl[0] = 13 // panic\n\nsl = append(sl, 13) // ok\n\nä½†mapæ²¡æœ‰appendï¼Œåªæœ‰m[k]=vï¼Œè¿™æ ·å½“mapå˜é‡æ²¡æœ‰åˆå§‹åŒ–çš„æ—¶å€™ï¼Œåªèƒ½panicã€‚\n\næ‰€è°“å®ƒå†…éƒ¨å®ç°çš„å¤æ‚æ€§ï¼Œå°±æ˜¯goæ²¡æœ‰æä¾›ç±»ä¼¼appendçš„å†…ç½®å‡½æ•°æ¥æ”¯æŒé›¶å€¼çš„mapã€‚\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638265255,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":368463,"user_name":"Ppppppp","can_delete":false,"product_type":"c1","uid":3294642,"ip_address":"æ±Ÿè‹","ucode":"5AD679CC53B6D1","user_header":"https://static001.geekbang.org/account/avatar/00/32/45/b2/24dee83c.jpg","comment_is_top":false,"comment_ctime":1676360934,"is_pvip":false,"replies":[{"id":134189,"content":"æˆ‘å¹³æ—¶åœ¨å¼€å‘ä¸­çš„ç¡®ç”¨çš„å¾ˆå°‘ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1676363971,"ip_address":"åŒ—äº¬","comment_id":368463,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100093501,"comment_content":"syncmapé€‚åˆçš„åœºæ™¯å¥½åƒä¸æ˜¯å¾ˆå¤šã€‚\n\nThe Map type is specialized. Most code should use a plain Go map instead, with separate locking or coordination, for better type safety and to make it easier to maintain other invariants along with the map content.\n\nThe Map type is optimized for two common use cases: (1) when the entry for a given key is only ever written once but read many times, as in caches that only grow, or (2) when multiple goroutines read, write, and overwrite entries for disjoint sets of keys. In these two cases, use of a Map may significantly reduce lock contention compared to a Go map paired with a separate Mutex or RWMutex.","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":608410,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1678432219,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":361905,"user_name":"éƒ‘ç«¥æ–‡","can_delete":false,"product_type":"c1","uid":1030733,"ip_address":"è¾½å®","ucode":"3D193715CB8549","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ba/4d/7ba09ff0.jpg","comment_is_top":false,"comment_ctime":1667965733,"is_pvip":false,"replies":[{"id":131666,"content":"ä¸æ˜¯å¾ˆæ˜ç™½ä½ çš„é—®é¢˜ã€‚tophashç”¨æ¥æ‰¾keyï¼Œä½†keyä¹Ÿæ€»è¦æœ‰åœ°æ–¹å­˜å‚¨å§ã€‚ç°åœ¨çš„è®¾è®¡å°±æ˜¯keyæ¥ç»­åœ¨tophashåŒºåŸŸåé¢å­˜å‚¨çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1667999925,"ip_address":"è¾½å®","comment_id":361905,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100093501,"comment_content":"è¯·é—®æœ‰äº†tophashåŒºåŸŸä¸ºä»€ä¹ˆè¿˜éœ€è¦keyåŒºåŸŸå‘¢ï¼Ÿtophashå°±æ˜¯ç”¨æ¥å†³å®škeyå­˜å‚¨çš„ä½ç½®çš„å•Š","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":604426,"discussion_content":"æˆ‘å¹³æ—¶åœ¨å¼€å‘ä¸­çš„ç¡®ç”¨çš„å¾ˆå°‘ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1676363972,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":337105,"user_name":"Rayjun","can_delete":false,"product_type":"c1","uid":1002514,"ip_address":"","ucode":"61A3D1A3D03569","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4c/12/f0c145d4.jpg","comment_is_top":false,"comment_ctime":1646624838,"is_pvip":false,"replies":[{"id":123245,"content":"åœ¨runtimeå®ç°å±‚é¢ï¼Œhmapç»“æ„ä½“ä¸­çš„bucketsæ˜¯ä¸€ä¸ªunsafe.Pointerï¼Œå®ƒæ˜¯ä¸€ä¸ªæŒ‡å‘bucketâ€œæ•°ç»„â€çš„æŒ‡é’ˆã€‚è¿™ä¸ªâ€œæ•°ç»„â€ä¸æ˜¯goè¯­æ³•å±‚é¢çš„æ•°ç»„ï¼Œæ˜¯ä¸€ä¸ªç»„åˆä½“ã€‚æ¯ä¸ªæ•°ç»„å…ƒç´ æ˜¯ç”±bmapã€keysæ•°ç»„ã€valuesæ•°ç»„å’ŒoverflowæŒ‡é’ˆç»„æˆï¼ˆçœ‹å›¾ï¼‰ã€‚go runtimeæ˜¯çŸ¥é“æ¯ä¸ªkeyã€valueçš„ç±»å‹çš„ï¼Œä¹Ÿå°±çŸ¥é“äº†æ¯ä¸ªkeyå’Œvalueçš„sizeï¼Œruntimeåªè¦æŒ‰sizeåˆ†é…å¯¹åº”çš„å†…å­˜å—å³å¯ï¼Œå…¶æ“ä½œå¹¶ä¸æ˜¯é€šè¿‡æ•°ç»„è¯­æ³•è¿›è¡Œçš„ï¼Œè€Œæ˜¯é€šè¿‡æŒ‡é’ˆè¿ç®—å¾—åˆ°çš„åç§»å€¼ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1646724496,"ip_address":"","comment_id":337105,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100093501,"comment_content":" è€å¸ˆï¼Œé—®ä¸€ä¸‹å…³äº bucket çš„é—®é¢˜ï¼Œæ—¢ç„¶ bucket æ˜¯æ•°ç»„ï¼Œå¦‚æœ key å’Œ value çš„ç±»å‹ä¸ä¸€æ ·ï¼Œè¦æ€ä¹ˆå­˜å‚¨å‘¢ï¼Ÿè€Œä¸”ä¸‹é¢è¿˜éœ€è¦å­˜å‚¨ overflow bucket çš„æŒ‡é’ˆ","like_count":2,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":555029,"discussion_content":"åœ¨runtimeå®ç°å±‚é¢ï¼Œhmapç»“æ„ä½“ä¸­çš„bucketsæ˜¯ä¸€ä¸ªunsafe.Pointerï¼Œå®ƒæ˜¯ä¸€ä¸ªæŒ‡å‘bucketâ€œæ•°ç»„â€çš„æŒ‡é’ˆã€‚è¿™ä¸ªâ€œæ•°ç»„â€ä¸æ˜¯goè¯­æ³•å±‚é¢çš„æ•°ç»„ï¼Œæ˜¯ä¸€ä¸ªç»„åˆä½“ã€‚æ¯ä¸ªæ•°ç»„å…ƒç´ æ˜¯ç”±bmapã€keysæ•°ç»„ã€valuesæ•°ç»„å’ŒoverflowæŒ‡é’ˆç»„æˆï¼ˆçœ‹å›¾ï¼‰ã€‚go runtimeæ˜¯çŸ¥é“æ¯ä¸ªkeyã€valueçš„ç±»å‹çš„ï¼Œä¹Ÿå°±çŸ¥é“äº†æ¯ä¸ªkeyå’Œvalueçš„sizeï¼Œruntimeåªè¦æŒ‰sizeåˆ†é…å¯¹åº”çš„å†…å­˜å—å³å¯ï¼Œå…¶æ“ä½œå¹¶ä¸æ˜¯é€šè¿‡æ•°ç»„è¯­æ³•è¿›è¡Œçš„ï¼Œè€Œæ˜¯é€šè¿‡æŒ‡é’ˆè¿ç®—å¾—åˆ°çš„åç§»å€¼ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646724496,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":335895,"user_name":"Geek_f654de","can_delete":false,"product_type":"c1","uid":2424712,"ip_address":"","ucode":"252C9BE5989D88","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/QPLkhJ3CoNt0j4ccGovE8tp7ma097vMrKbEq3jefQZNxI6psShxXxqMWTtI4T7oV0Jqq2KnWREnsJwkkZwnJ8Q/132","comment_is_top":false,"comment_ctime":1645759348,"is_pvip":false,"replies":[{"id":122777,"content":"âœ…","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1645837734,"ip_address":"","comment_id":335895,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100093501,"comment_content":"æ€è€ƒé¢˜ï¼š\n1.æŠŠmapçš„keyæ‹¿å‡ºæ¥ï¼Œæ”¾åˆ°åˆ‡ç‰‡é‡Œ\n2.å¯¹åˆ‡ç‰‡è¿›è¡Œæ’åº\n3.å–å‡ºåˆ‡ç‰‡ä¸­å…ƒç´ å¯¹åº”çš„value","like_count":2,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":553300,"discussion_content":"âœ…","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645837734,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":332952,"user_name":"Geek_2337af","can_delete":false,"product_type":"c1","uid":2847330,"ip_address":"","ucode":"54B135EB7E70F1","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ep7c7UKsjRiclaAqD9vMHSUXayzrvRhvic3Lm6ibX82L3DibJnCCtDmB3OfxbuVjetpT6Qa8IuwqZCWlw/132","comment_is_top":false,"comment_ctime":1643876873,"is_pvip":false,"replies":[{"id":121804,"content":"ä¸æ”¯æŒçš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1644290895,"ip_address":"","comment_id":332952,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100093501,"comment_content":"goæ˜¯å¦æ”¯æŒåˆ©ç”¨è‡ªå®šä¹‰çš„å“ˆå¸Œå‡½æ•°åˆ›å»ºmapå‘¢","like_count":2,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":549906,"discussion_content":"ä¸æ”¯æŒçš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644290895,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":332436,"user_name":"Niverkk","can_delete":false,"product_type":"c1","uid":2179875,"ip_address":"","ucode":"F9220C10107E44","user_header":"https://static001.geekbang.org/account/avatar/00/21/43/23/d98fb8f7.jpg","comment_is_top":false,"comment_ctime":1643250525,"is_pvip":false,"replies":[{"id":121620,"content":"1. æ˜¯çš„\n2. è®°å¾—è®²ç»“æ„ä½“ç±»å‹é‚£ä¸€è®²æœ‰è¯´è¿‡å†…å­˜å¯¹é½çš„æ„ä¹‰\n3. ä¸€æ¬¡æ€§è¿ç§» ä¼šå¯¼è‡´mapæ“ä½œçš„å»¶è¿Ÿè¾ƒå¤§ï¼Œæ‰€ä»¥è¦é€æ­¥è¿ç§»ï¼Œæœ‰ç‚¹åƒèš‚èšæ¬å®¶ï¼Œä¸€ç‚¹ç‚¹å¼„ï¼Œå°†è¾ƒå¤§çš„æ¶ˆè€—åˆ†æ‹…åˆ°å¤šæ¬¡æ“ä½œä¸­ã€‚ä¸€æ—¦å¼€å§‹è¿ç§»ï¼Œä¸è®ºæ˜¯assignè¿˜æ˜¯deleteéƒ½ä¼šè¿›è¡Œåˆ†æ‹…éƒ¨åˆ†è¿ç§»æ“ä½œï¼Œè¿™å’Œassignè¿˜æ˜¯deleteçš„è¯­ä¹‰æ— å…³ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1643544134,"ip_address":"","comment_id":332436,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100093501,"comment_content":"è€å¸ˆå¥½ï¼Œæœ‰å‡ ä¸ªé—®é¢˜è¯·æ•™ä¸‹\né—®é¢˜1ï¼š\n1.v := m[&quot;key&quot;] â†’ v := runtime.mapaccess1(maptype, m, &quot;key&quot;)\n2.v, ok := m[&quot;key&quot;] â†’ v, ok := runtime.mapaccess2(maptype, m, &quot;key&quot;)\nå…¶å®è¿™ä¸¤ç§å†™æ³•è°ƒç”¨çš„åº•å±‚æ–¹æ³•æ˜¯ä¸ä¸€æ ·çš„ï¼Œ2ä»–ä¼šè¿”å›ä¸¤ä¸ªå€¼ï¼Œvæ˜¯å¯¹åº”çš„valueï¼Œ okä»£è¡¨keyæ˜¯å¦å­˜åœ¨äºmapä¸­ï¼Ÿ\n\né—®é¢˜2ï¼š\nvalueå­˜å‚¨åŒºåŸŸkvæ ¼å¼ä¸ºä»€ä¹ˆéœ€è¦å¯¹é½ï¼Ÿ\n\né—®é¢˜3ï¼š\nå¦‚æœæ˜¯å› ä¸ºå½“å‰æ•°æ®æ•°é‡è¶…å‡º LoadFactor æŒ‡å®šæ°´ä½è€Œè¿›è¡Œçš„æ‰©å®¹ï¼Œé‚£ä¹ˆè¿è¡Œæ—¶ä¼šå»ºç«‹ä¸€ä¸ªä¸¤å€äºç°æœ‰è§„æ¨¡çš„ bucket æ•°ç»„ï¼Œä½†çœŸæ­£çš„æ’ç©ºå’Œè¿ç§»å·¥ä½œä¹Ÿæ˜¯åœ¨ assign å’Œ delete æ—¶é€æ­¥è¿›è¡Œçš„ã€‚\n\nå¯¹äºè¿™æ®µè¯ï¼Œé€æ­¥è¿ç§»æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿassignä»£è¡¨å¢åŠ å—ï¼Ÿåˆ é™¤è·Ÿæ‰©å®¹æœ‰å…³ç³»å—ï¼Œåˆ é™¤åº”è¯¥æ˜¯å½±å“ç¼©å®¹å§ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":549082,"discussion_content":"1. æ˜¯çš„\n2. è®°å¾—è®²ç»“æ„ä½“ç±»å‹é‚£ä¸€è®²æœ‰è¯´è¿‡å†…å­˜å¯¹é½çš„æ„ä¹‰\n3. ä¸€æ¬¡æ€§è¿ç§» ä¼šå¯¼è‡´mapæ“ä½œçš„å»¶è¿Ÿè¾ƒå¤§ï¼Œæ‰€ä»¥è¦é€æ­¥è¿ç§»ï¼Œæœ‰ç‚¹åƒèš‚èšæ¬å®¶ï¼Œä¸€ç‚¹ç‚¹å¼„ï¼Œå°†è¾ƒå¤§çš„æ¶ˆè€—åˆ†æ‹…åˆ°å¤šæ¬¡æ“ä½œä¸­ã€‚ä¸€æ—¦å¼€å§‹è¿ç§»ï¼Œä¸è®ºæ˜¯assignè¿˜æ˜¯deleteéƒ½ä¼šè¿›è¡Œåˆ†æ‹…éƒ¨åˆ†è¿ç§»æ“ä½œï¼Œè¿™å’Œassignè¿˜æ˜¯deleteçš„è¯­ä¹‰æ— å…³ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643544134,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":331918,"user_name":"å¤©æ•Œ","can_delete":false,"product_type":"c1","uid":1059944,"ip_address":"","ucode":"CD29A622197197","user_header":"https://static001.geekbang.org/account/avatar/00/10/2c/68/c299bc71.jpg","comment_is_top":false,"comment_ctime":1642882511,"is_pvip":false,"replies":[{"id":121614,"content":"tophash [bucketCnt]uint8  &#47;&#47; tophashå­˜å‚¨äº†ä¸€ç»„åç§»å€¼\n\nå¦‚æœä¸¤ä¸ªkeyçš„hashcodeå®Œå…¨ä¸€æ ·ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªkeyä¼šåˆ†é…åˆ°ä¸€ä¸ªbucketä¸­ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1643542590,"ip_address":"","comment_id":331918,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100093501,"comment_content":"è€å¸ˆ, tophashåŒºåŸŸå­˜çš„æ˜¯æŒ‡é’ˆå—ï¼Ÿå½“ä¸¤ä¸ªkeyçš„hashcodeå®Œå…¨ä¸€æ ·åˆæ˜¯å¦‚ä½•å¤„ç†çš„ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":549074,"discussion_content":"tophash [bucketCnt]uint8  // tophashå­˜å‚¨äº†ä¸€ç»„åç§»å€¼\n\nå¦‚æœä¸¤ä¸ªkeyçš„hashcodeå®Œå…¨ä¸€æ ·ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªkeyä¼šåˆ†é…åˆ°ä¸€ä¸ªbucketä¸­ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643542590,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":323779,"user_name":"æ–‡ç»","can_delete":false,"product_type":"c1","uid":1072346,"ip_address":"","ucode":"2C059BD2A4276B","user_header":"https://static001.geekbang.org/account/avatar/00/10/5c/da/0a8bc27b.jpg","comment_is_top":false,"comment_ctime":1638158532,"is_pvip":true,"replies":[{"id":117583,"content":"è¿™ç§æ–¹å¼ä¸æ˜¯å‡½æ•°ï¼Œè¿™å°±æ˜¯goçš„è¯­æ³•ã€‚goç¼–è¯‘å™¨ä¼šå¤„ç†è¿™ç§è¯­æ³•ï¼Œç¿»è¯‘ä¸ºå¯¹åº”çš„å¤„ç†ä»£ç ã€‚ä½ åªéœ€è¦çŸ¥é“å…¶è¯­ä¹‰æ˜¯å•¥å°±å¯ä»¥äº†ï¼Œç„¶åç”¨å°±okäº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1638262768,"ip_address":"","comment_id":323779,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100093501,"comment_content":"v, ok := m[&quot;key1&quot;]\nv := m[&quot;key1&quot;]\nç™½è€å¸ˆï¼Œè¿™ä¸¤ç§æ–¹å¼éƒ½å¯ä»¥ï¼Œè¯·é—®commaï¼ŒOKï¼Œ è¿™ç§æ–¹å¼æ˜¯å‡½æ•°å®ç°çš„å—ï¼Ÿå¦‚æœæ˜¯å‡½æ•°çš„è¯ï¼Œæ€ä¹ˆä¸€ä¸ªå‡½æ•°å¯ä»¥åŒæ—¶è¿”å›ä¸€ä¸ªå€¼ï¼Œæˆ–è€…ä¸¤ä¸ªå€¼ï¼Ÿ channelä¹Ÿæœ‰ç±»ä¼¼çš„ç”¨æ³•ï¼Œä¸å¤ªç†è§£ã€‚\n","like_count":2,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":534722,"discussion_content":"è¿™ç§æ–¹å¼ä¸æ˜¯å‡½æ•°ï¼Œè¿™å°±æ˜¯goçš„è¯­æ³•ã€‚goç¼–è¯‘å™¨ä¼šå¤„ç†è¿™ç§è¯­æ³•ï¼Œç¿»è¯‘ä¸ºå¯¹åº”çš„å¤„ç†ä»£ç ã€‚ä½ åªéœ€è¦çŸ¥é“å…¶è¯­ä¹‰æ˜¯å•¥å°±å¯ä»¥äº†ï¼Œç„¶åç”¨å°±okäº†ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1638262768,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":323776,"user_name":"æ–‡ç»","can_delete":false,"product_type":"c1","uid":1072346,"ip_address":"","ucode":"2C059BD2A4276B","user_header":"https://static001.geekbang.org/account/avatar/00/10/5c/da/0a8bc27b.jpg","comment_is_top":false,"comment_ctime":1638158050,"is_pvip":true,"replies":[{"id":117587,"content":"åˆ‡ç‰‡ç±»å‹ä¹Ÿä¸æ˜¯åœ¨æ‰€æœ‰åœºæ™¯ä¸‹éƒ½æ˜¯é›¶å€¼å¯ç”¨çš„å•Šã€‚\n\nvar sl []int\nsl[0] = 13 &#47;&#47; panic\n\nsl = append(sl, 13) &#47;&#47; ok\n\nä½†mapæ²¡æœ‰appendï¼Œåªæœ‰m[k]=vï¼Œè¿™æ ·å½“mapå˜é‡æ²¡æœ‰åˆå§‹åŒ–çš„æ—¶å€™ï¼Œåªèƒ½panicã€‚\n\næ‰€è°“å®ƒå†…éƒ¨å®ç°çš„å¤æ‚æ€§ï¼Œå°±æ˜¯goæ²¡æœ‰æä¾›ç±»ä¼¼appendçš„å†…ç½®å‡½æ•°æ¥æ”¯æŒé›¶å€¼çš„mapã€‚\n\n","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1638265255,"ip_address":"","comment_id":323776,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100093501,"comment_content":"&quot;ä½† map ç±»å‹ï¼Œå› ä¸ºå®ƒå†…éƒ¨å®ç°çš„å¤æ‚æ€§ï¼Œæ— æ³•â€œé›¶å€¼å¯ç”¨â€ã€‚æ‰€ä»¥ï¼Œå¦‚æœæˆ‘ä»¬å¯¹å¤„äºé›¶å€¼çŠ¶æ€çš„ map å˜é‡ç›´æ¥è¿›è¡Œæ“ä½œï¼Œå°±ä¼šå¯¼è‡´è¿è¡Œæ—¶å¼‚å¸¸ï¼ˆpanicï¼‰ï¼Œä»è€Œå¯¼è‡´ç¨‹åºè¿›ç¨‹å¼‚å¸¸é€€å‡ºã€‚&quot;\n\nç™½è€å¸ˆï¼Œæˆ‘ç†è§£é›¶å€¼å¯ç”¨ï¼Œæ—¢å¯ä»¥æŠŠå˜é‡å½“åšnilæ¥ä½¿ç”¨ï¼Œåˆå¯ä»¥å½“åšä¸€ä¸ªåˆå§‹åŒ–å¥½çš„å¯¹è±¡æ¥ä½¿ç”¨ã€‚è¿™æ ·å¯¹å—ï¼Ÿæœ‰ä¸¤ä¸ªè¿›ä¸€æ­¥çš„ç–‘é—®\n1. slice çš„é›¶å€¼åˆå§‹åŒ–æ˜¯æ€ä¹ˆå®ç°çš„ï¼Œç¼–è¯‘å™¨å’Œè¿è¡Œæ—¶åˆ†åˆ«æ‰®æ¼”äº†ä»€ä¹ˆè§’è‰²ã€‚\n2. mapçš„é›¶å€¼åˆå§‹åŒ–éš¾åœ¨å“ªé‡Œï¼ŒæŒ‰ç…§æˆ‘çš„ç†è§£ï¼Œåªè¦åœ¨ç¼–è¯‘çš„æ—¶å€™åˆ¤æ–­æ˜¯å¦ä¸ºnilï¼Œè¿è¡Œçš„æ—¶å€™å‘ç°å®ƒæ˜¯nilï¼Œç»™å®ƒåˆ†é…ä¸€ä¸ªå¯¹è±¡å°±å¯ä»¥äº†ã€‚è‚¯å®šæ˜¯æˆ‘é—æ¼äº†å“ªäº›é‡è¦çš„ä¿¡æ¯ï¼Œè¯·ç™½è€å¸ˆè§£æƒ‘ã€‚","like_count":2,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":534722,"discussion_content":"è¿™ç§æ–¹å¼ä¸æ˜¯å‡½æ•°ï¼Œè¿™å°±æ˜¯goçš„è¯­æ³•ã€‚goç¼–è¯‘å™¨ä¼šå¤„ç†è¿™ç§è¯­æ³•ï¼Œç¿»è¯‘ä¸ºå¯¹åº”çš„å¤„ç†ä»£ç ã€‚ä½ åªéœ€è¦çŸ¥é“å…¶è¯­ä¹‰æ˜¯å•¥å°±å¯ä»¥äº†ï¼Œç„¶åç”¨å°±okäº†ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1638262768,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":370076,"user_name":"â„¡äººè§äººçˆ±æµ©ç„¶å›ã‚œ","can_delete":false,"product_type":"c1","uid":1592298,"ip_address":"åŒ—äº¬","ucode":"D042A622533C72","user_header":"https://static001.geekbang.org/account/avatar/00/18/4b/ea/a9e7bc50.jpg","comment_is_top":false,"comment_ctime":1678351113,"is_pvip":false,"replies":[{"id":134926,"content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1678432218,"ip_address":"åŒ—äº¬","comment_id":370076,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100093501,"comment_content":"package main\n\nimport (\n\t&quot;fmt&quot;\n\t&quot;sort&quot;\n)\n\nfunc main(){\n\tm := map[string]int{ &#47;&#47;åˆå§‹åŒ–ä¸€ä¸ªmapç±»å‹çš„å˜é‡m\n\t\t&quot;apple&quot;:1,\n\t\t&quot;banana&quot;:2,\n\t\t&quot;cherry&quot;:3,\n\t}\n\tkeySlice := make([]string,0,len(m)) &#47;&#47;åˆ›å»ºä¸€ä¸ªåˆ‡ç‰‡ï¼Œé•¿åº¦æ˜¯mçš„é•¿åº¦\n\t&#47;&#47;éå†mè·å–mapç±»å‹çš„keyå¹¶å­˜åˆ°keySliceä¸­\n        for k := range m {\n\t\tkeySlice = append(keySlice, k)\n\t}\n\t&#47;&#47; å¯¹mySliceæ’åº\n\tsort.Strings(keySlice)\n        &#47;&#47;é€šè¿‡éå†æœ‰åºkeyçš„æ–¹å¼è·å–mapçš„å€¼\n\tfor _,v := range keySlice{\n\t\tfmt.Println(v,m[v])\n\t}\n}","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":608410,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1678432219,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":368463,"user_name":"Ppppppp","can_delete":false,"product_type":"c1","uid":3294642,"ip_address":"æ±Ÿè‹","ucode":"5AD679CC53B6D1","user_header":"https://static001.geekbang.org/account/avatar/00/32/45/b2/24dee83c.jpg","comment_is_top":false,"comment_ctime":1676360934,"is_pvip":false,"replies":[{"id":134189,"content":"æˆ‘å¹³æ—¶åœ¨å¼€å‘ä¸­çš„ç¡®ç”¨çš„å¾ˆå°‘ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1676363971,"ip_address":"åŒ—äº¬","comment_id":368463,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100093501,"comment_content":"syncmapé€‚åˆçš„åœºæ™¯å¥½åƒä¸æ˜¯å¾ˆå¤šã€‚\n\nThe Map type is specialized. Most code should use a plain Go map instead, with separate locking or coordination, for better type safety and to make it easier to maintain other invariants along with the map content.\n\nThe Map type is optimized for two common use cases: (1) when the entry for a given key is only ever written once but read many times, as in caches that only grow, or (2) when multiple goroutines read, write, and overwrite entries for disjoint sets of keys. In these two cases, use of a Map may significantly reduce lock contention compared to a Go map paired with a separate Mutex or RWMutex.","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":604426,"discussion_content":"æˆ‘å¹³æ—¶åœ¨å¼€å‘ä¸­çš„ç¡®ç”¨çš„å¾ˆå°‘ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1676363972,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":361905,"user_name":"éƒ‘ç«¥æ–‡","can_delete":false,"product_type":"c1","uid":1030733,"ip_address":"è¾½å®","ucode":"3D193715CB8549","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ba/4d/7ba09ff0.jpg","comment_is_top":false,"comment_ctime":1667965733,"is_pvip":false,"replies":[{"id":131666,"content":"ä¸æ˜¯å¾ˆæ˜ç™½ä½ çš„é—®é¢˜ã€‚tophashç”¨æ¥æ‰¾keyï¼Œä½†keyä¹Ÿæ€»è¦æœ‰åœ°æ–¹å­˜å‚¨å§ã€‚ç°åœ¨çš„è®¾è®¡å°±æ˜¯keyæ¥ç»­åœ¨tophashåŒºåŸŸåé¢å­˜å‚¨çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1667999925,"ip_address":"è¾½å®","comment_id":361905,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100093501,"comment_content":"è¯·é—®æœ‰äº†tophashåŒºåŸŸä¸ºä»€ä¹ˆè¿˜éœ€è¦keyåŒºåŸŸå‘¢ï¼Ÿtophashå°±æ˜¯ç”¨æ¥å†³å®škeyå­˜å‚¨çš„ä½ç½®çš„å•Š","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":593201,"discussion_content":"ä¸æ˜¯å¾ˆæ˜ç™½ä½ çš„é—®é¢˜ã€‚tophashç”¨æ¥æ‰¾keyï¼Œä½†keyä¹Ÿæ€»è¦æœ‰åœ°æ–¹å­˜å‚¨å§ã€‚ç°åœ¨çš„è®¾è®¡å°±æ˜¯keyæ¥ç»­åœ¨tophashåŒºåŸŸåé¢å­˜å‚¨çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1667999926,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"è¾½å®","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":357183,"user_name":"å¾®å¾®è¶…çº§ä¸¹ğŸ’«","can_delete":false,"product_type":"c1","uid":2996016,"ip_address":"è¾½å®","ucode":"ABEFC2FA673BE4","user_header":"https://static001.geekbang.org/account/avatar/00/2d/b7/30/c1e4f5b5.jpg","comment_is_top":false,"comment_ctime":1663047552,"is_pvip":false,"replies":[{"id":130006,"content":"maptypeä»£è¡¨çš„æ˜¯ç±»å‹ä¿¡æ¯ï¼Œæ¯”å¦‚å£°æ˜ä¸¤ä¸ªç›¸åŒç±»å‹çš„mapå˜é‡ï¼š\n\nvar m map[string]int\nvar m1 map[string]int\n\nå½“é¦–æ¬¡å£°æ˜ç±»å‹ä¸ºmap[string]intç±»å‹çš„mæ—¶ï¼Œgoè¿è¡Œæ—¶ä¼šåˆ›å»ºå¯¹åº”map[string]intç±»å‹çš„maptypeå®ä¾‹ã€‚\n\nå½“å†æ¬¡å£°æ˜ç±»å‹ä¸ºmap[string]intç±»å‹çš„m1æ—¶ï¼Œgoè¿è¡Œæ—¶ä¼šå¤ç”¨ä¸Šé¢çš„maptypeã€‚å› ä¸ºç±»å‹ä¸€è‡´ã€‚\n\nå…ƒç´ ä¸ªæ•°ä¸mapç±»å‹ä¿¡æ¯æ²¡æœ‰ç›´æ¥å…³ç³»ï¼Œå…ƒç´ ä¸ªæ•°å±äºmapç±»å‹çš„å˜é‡çš„â€œå±æ€§â€èŒƒç•´ï¼Œä¸æ˜¯ç±»å‹èŒƒç•´ã€‚\n","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1663099232,"ip_address":"è¾½å®","comment_id":357183,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100093501,"comment_content":"éº»çƒ¦é—®ä¸‹è€å¸ˆï¼š\n&quot;å½“æˆ‘ä»¬å£°æ˜ä¸€ä¸ª map ç±»å‹å˜é‡ï¼Œæ¯”å¦‚ var m map[string]int æ—¶ï¼ŒGo è¿è¡Œæ—¶å°±ä¼šä¸ºè¿™ä¸ªå˜é‡å¯¹åº”çš„ç‰¹å®š map ç±»å‹ï¼Œç”Ÿæˆä¸€ä¸ª runtime.maptype å®ä¾‹ã€‚å¦‚æœè¿™ä¸ªå®ä¾‹å·²ç»å­˜åœ¨ï¼Œå°±ä¼šç›´æ¥å¤ç”¨&quot;\nè¿™ä¸ªç›´æ¥å¤ç”¨æ²¡æœ‰ç†è§£ï¼Ÿæ¯ä¸ªå®ä¾‹æ€ä¹ˆèƒ½å¤ç”¨å‘¢ï¼Ÿä»–ä»¬çš„åŸä¿¡æ¯æ˜¯ä¸èƒ½å…±äº«çš„å‘€ï¼Ÿæ¯ä¸ªmapä¸æ˜¯éƒ½æœ‰è‡ªå·±çš„åŸä¿¡æ¯å—ï¼Ÿæ¯”å¦‚å…ƒç´ ä¸ªæ•°ä¹‹ç±»çš„éƒ½æ˜¯ä¸ä¸€æ ·çš„å‘€","like_count":1},{"had_liked":false,"id":353617,"user_name":"ç™½å°ç™½","can_delete":false,"product_type":"c1","uid":1031680,"ip_address":"åŒ—äº¬","ucode":"2CCB878DA2E93D","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/pESfAX6YVRnVg3HpOX44bTa64bHTbhsnlHJqqDjicBeELxCs5rwwIXibFibd0fua3VyVExypnqnfgTSUp8WoYmc9g/132","comment_is_top":false,"comment_ctime":1659605086,"is_pvip":false,"replies":[{"id":128701,"content":"mapçš„å®ç°åŸç†å†³å®šäº†æˆ‘ä»¬æ— æ³•åšåˆ°ã€‚é™¤éåœ¨mapä¹‹å¤–åœ¨è‡ªè¡ŒåŒ…ä¸€å±‚ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1659925029,"ip_address":"åŒ—äº¬","comment_id":353617,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100093501,"comment_content":"å¦‚ä½•ä¿è¯æ¯æ¬¡è¯»å–mapçš„å€¼æ˜¯æœ‰åºçš„ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":587491,"discussion_content":"maptypeä»£è¡¨çš„æ˜¯ç±»å‹ä¿¡æ¯ï¼Œæ¯”å¦‚å£°æ˜ä¸¤ä¸ªç›¸åŒç±»å‹çš„mapå˜é‡ï¼š\n\nvar m map[string]int\nvar m1 map[string]int\n\nå½“é¦–æ¬¡å£°æ˜ç±»å‹ä¸ºmap[string]intç±»å‹çš„mæ—¶ï¼Œgoè¿è¡Œæ—¶ä¼šåˆ›å»ºå¯¹åº”map[string]intç±»å‹çš„maptypeå®ä¾‹ã€‚\n\nå½“å†æ¬¡å£°æ˜ç±»å‹ä¸ºmap[string]intç±»å‹çš„m1æ—¶ï¼Œgoè¿è¡Œæ—¶ä¼šå¤ç”¨ä¸Šé¢çš„maptypeã€‚å› ä¸ºç±»å‹ä¸€è‡´ã€‚\n\nå…ƒç´ ä¸ªæ•°ä¸mapç±»å‹ä¿¡æ¯æ²¡æœ‰ç›´æ¥å…³ç³»ï¼Œå…ƒç´ ä¸ªæ•°å±äºmapç±»å‹çš„å˜é‡çš„â€œå±æ€§â€èŒƒç•´ï¼Œä¸æ˜¯ç±»å‹èŒƒç•´ã€‚\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663099232,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"è¾½å®","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":349034,"user_name":"æ’‡æ’‡","can_delete":false,"product_type":"c1","uid":1010786,"ip_address":"","ucode":"938305F9F3F19C","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6c/62/cbb91635.jpg","comment_is_top":false,"comment_ctime":1655660557,"is_pvip":false,"replies":[{"id":127032,"content":"hmapæ˜¯æè¿°mapæ•´ä½“çš„ï¼Œå”¯ä¸€ä»£è¡¨ä¸€ä¸ªmapå®ä¾‹ã€‚è€Œmaptypeåˆ™æ˜¯ç”¨æ¥æè¿°ä¸€ä¸ªmapä¸­çš„keyå’Œvalueçš„ä¿¡æ¯çš„ï¼ŒåŒ…æ‹¬ç±»å‹ã€å¤§å°ç­‰ã€‚ç”¨äºè¾…åŠ©é’ˆå¯¹hmapçš„å„ç§æ“ä½œã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1655705629,"ip_address":"","comment_id":349034,"utype":1}],"discussion_count":2,"race_medal":0,"score":5,"product_id":100093501,"comment_content":"maptypeå’Œhmapéƒ½æ˜¯å…ƒä¿¡æ¯ï¼Œä¸ºä»€ä¹ˆéœ€è¦ä¸¤ä¸ªï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":576618,"discussion_content":"hmapæ˜¯æè¿°mapæ•´ä½“çš„ï¼Œå”¯ä¸€ä»£è¡¨ä¸€ä¸ªmapå®ä¾‹ã€‚è€Œmaptypeåˆ™æ˜¯ç”¨æ¥æè¿°ä¸€ä¸ªmapä¸­çš„keyå’Œvalueçš„ä¿¡æ¯çš„ï¼ŒåŒ…æ‹¬ç±»å‹ã€å¤§å°ç­‰ã€‚ç”¨äºè¾…åŠ©é’ˆå¯¹hmapçš„å„ç§æ“ä½œã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1655705629,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1010786,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/6c/62/cbb91635.jpg","nickname":"æ’‡æ’‡","note":"","ucode":"938305F9F3F19C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":577650,"discussion_content":"è°¢è°¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656262120,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":576618,"ip_address":"","group_id":0},"score":577650,"extra":""}]}]},{"had_liked":false,"id":347956,"user_name":"Geek_25f93f","can_delete":false,"product_type":"c1","uid":2917509,"ip_address":"","ucode":"D5932373E8EEA2","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/5JKZO1Ziax3Ky03noshpVNyEvZw0pUwjLcHrHRo1XNPKXdmCE88homb6ltA15CdVRnjzjgGs3Ex42CaDbeYzNuQ/132","comment_is_top":false,"comment_ctime":1654607140,"is_pvip":false,"replies":[{"id":126851,"content":"mapçš„keyçš„ç±»å‹ä¸ä¸€ï¼Œä½¿ç”¨çš„hashå‡½æ•°å¯èƒ½ä¸åŒã€‚è¿™ä¸ªç”±ç¼–è¯‘å™¨å’Œè¿è¡Œæ—¶å†³å®šã€‚ä½†hashç®—æ³•éƒ½åœ¨runtimeåŒ…çš„alg.goä¸­ï¼Œå¯ä»¥è‡ªå·±çœ‹ä¸€ä¸‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1654762502,"ip_address":"","comment_id":347956,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100093501,"comment_content":"æƒ³é—®ä¸‹go mapä½¿ç”¨ä»€ä¹ˆå“ˆå¸Œç®—æ³•ç®—å‡ºå“ˆå¸Œå€¼çš„å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":576618,"discussion_content":"hmapæ˜¯æè¿°mapæ•´ä½“çš„ï¼Œå”¯ä¸€ä»£è¡¨ä¸€ä¸ªmapå®ä¾‹ã€‚è€Œmaptypeåˆ™æ˜¯ç”¨æ¥æè¿°ä¸€ä¸ªmapä¸­çš„keyå’Œvalueçš„ä¿¡æ¯çš„ï¼ŒåŒ…æ‹¬ç±»å‹ã€å¤§å°ç­‰ã€‚ç”¨äºè¾…åŠ©é’ˆå¯¹hmapçš„å„ç§æ“ä½œã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1655705629,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1010786,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/6c/62/cbb91635.jpg","nickname":"æ’‡æ’‡","note":"","ucode":"938305F9F3F19C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":577650,"discussion_content":"è°¢è°¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656262120,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":576618,"ip_address":"","group_id":0},"score":577650,"extra":""}]}]},{"had_liked":false,"id":343375,"user_name":"Geek_as","can_delete":false,"product_type":"c1","uid":1534500,"ip_address":"","ucode":"AB7B70DBC2B5F8","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/qhonwcQle1RBufvLdTm4MgSNl554GBXUZtNNH65oYajbbRLxKsZX4hM9vFtrLLpDM0H93ZNWRFAZSrIZC7yAsQ/132","comment_is_top":false,"comment_ctime":1650805633,"is_pvip":false,"replies":[{"id":125441,"content":"âœ…","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1651011627,"ip_address":"","comment_id":343375,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100093501,"comment_content":"å¼„ä¸€ä¸ªé“¾è¡¨å…ƒç´ æ˜¯keyç±»å‹ï¼Œè®°å½•keyæ’å…¥çš„é¡ºåºï¼Œéå†çš„æ—¶å€™æŒ‰è¿™ä¸ªkeyé¡ºåºå»å–å°±è¡Œäº†","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":575344,"discussion_content":"mapçš„keyçš„ç±»å‹ä¸ä¸€ï¼Œä½¿ç”¨çš„hashå‡½æ•°å¯èƒ½ä¸åŒã€‚è¿™ä¸ªç”±ç¼–è¯‘å™¨å’Œè¿è¡Œæ—¶å†³å®šã€‚ä½†hashç®—æ³•éƒ½åœ¨runtimeåŒ…çš„alg.goä¸­ï¼Œå¯ä»¥è‡ªå·±çœ‹ä¸€ä¸‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1654762503,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":342974,"user_name":"mikewoo","can_delete":false,"product_type":"c1","uid":1118888,"ip_address":"","ucode":"9AE90E05048DE1","user_header":"https://static001.geekbang.org/account/avatar/00/11/12/a8/8aaf13e0.jpg","comment_is_top":false,"comment_ctime":1650556765,"is_pvip":true,"replies":[{"id":125294,"content":"âœ…","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1650601609,"ip_address":"","comment_id":342974,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100093501,"comment_content":"å•ç‹¬å¯¹mapä¸­çš„keyè¿›è¡Œæœ‰åºå­˜å‚¨ï¼Œç„¶åå†ä¾æ®keyçš„æ¬¡åºä¾æ¬¡è·å–mapä¸­keyå¯¹åº”çš„value.","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":566097,"discussion_content":"âœ…","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650601609,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":342852,"user_name":"è«å¾—åŠæ³•","can_delete":false,"product_type":"c1","uid":1073958,"ip_address":"","ucode":"D3E07A4CFD1AAA","user_header":"https://static001.geekbang.org/account/avatar/00/10/63/26/8c8be018.jpg","comment_is_top":false,"comment_ctime":1650507310,"is_pvip":false,"replies":[{"id":125290,"content":"æ— è®ºæŸ¥è¯¢è¿˜æ˜¯å†™å…¥ï¼Œéƒ½æ˜¯å…ˆé€‰æ¡¶ï¼Œå†åœ¨æ¡¶å†…åŒ¹é…ã€‚å¦‚æœå‡ºç°ç¢°æ’ï¼Œæ˜¯è¦æ¯”è¾ƒkeyçš„ã€‚ä»åŸç†ä¸Šçœ‹ï¼Œä¸€ä¸ªæ¡¶å†…æ˜¯å¯èƒ½å­˜åœ¨tophashä¸€æ ·çš„keyã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1650596617,"ip_address":"","comment_id":342852,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100093501,"comment_content":"æƒ³é—®ä¸€ä¸‹å¦‚æœå‡ºç°å“ˆå¸Œç¢°æ’ï¼Œå­˜å‚¨è¿‡ç¨‹å’ŒæŸ¥è¯¢è¿‡ç¨‹æ˜¯å’‹æ ·çš„å‘¢ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":566097,"discussion_content":"âœ…","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650601609,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":342168,"user_name":"ryanxw","can_delete":false,"product_type":"c1","uid":2119325,"ip_address":"","ucode":"0B91EAC8D06EED","user_header":"https://static001.geekbang.org/account/avatar/00/20/56/9d/4b2a7d29.jpg","comment_is_top":false,"comment_ctime":1650079817,"is_pvip":false,"replies":[{"id":125045,"content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1650108704,"ip_address":"","comment_id":342168,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100093501,"comment_content":"æŠŠkeyå­˜åˆ°arrä¸­ï¼ŒæŒ‰ç…§é¡ºåºæ ¹æ®keyå»mapä¸­å–value","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":566083,"discussion_content":"æ— è®ºæŸ¥è¯¢è¿˜æ˜¯å†™å…¥ï¼Œéƒ½æ˜¯å…ˆé€‰æ¡¶ï¼Œå†åœ¨æ¡¶å†…åŒ¹é…ã€‚å¦‚æœå‡ºç°ç¢°æ’ï¼Œæ˜¯è¦æ¯”è¾ƒkeyçš„ã€‚ä»åŸç†ä¸Šçœ‹ï¼Œä¸€ä¸ªæ¡¶å†…æ˜¯å¯èƒ½å­˜åœ¨tophashä¸€æ ·çš„keyã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650596617,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":337533,"user_name":"éšé£wli","can_delete":false,"product_type":"c1","uid":1932930,"ip_address":"","ucode":"655BD9182D7570","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/OEZQyDeZd2oCPZiak19FKQOZI4I21WjLlwUgJzVFxyXsVKbIlpEEEYZcHbA4lYVzFbd3CtmDfZuUictW3ujvKnUQ/132","comment_is_top":false,"comment_ctime":1646881660,"is_pvip":false,"replies":[{"id":123365,"content":"åˆ‡ç‰‡çš„å¼•ç”¨æ˜¯sliceçš„runtimeç»“æ„ä½“(ä¸‰å…ƒç»„)å®ä¾‹ï¼Œmapçš„å¼•ç”¨æ˜¯hmapç±»å‹çš„æŒ‡é’ˆã€‚æ–‡ä¸­åç»­æˆ‘è®©ç¼–è¾‘è€å¸ˆå†ä¿®æ”¹ä¸€ä¸‹ï¼Œæ˜ç¡®è¯´æ˜æ˜¯hmapçš„æŒ‡é’ˆã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ä½œè€…","uid":1026224,"ctime":1646950225,"ip_address":"","comment_id":337533,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100093501,"comment_content":"è€å¸ˆï¼Œgo map å’Œ slice makeè¿”å›éƒ½æ˜¯å¼•ç”¨ï¼Œè¿™ä¸ªæ˜¯æŒ‡hmapå’Œsliceç»“æ„ä½“çš„æŒ‡é’ˆå—ï¼Ÿè¿™å—ä¸€ç›´æœ‰ç‚¹å›°æƒ‘ï¼Œå¸Œæœ›è§£ç­”ä¸€ä¸‹","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":555512,"discussion_content":"åˆ‡ç‰‡çš„å¼•ç”¨æ˜¯sliceçš„runtimeç»“æ„ä½“(ä¸‰å…ƒç»„)å®ä¾‹ï¼Œmapçš„å¼•ç”¨æ˜¯hmapç±»å‹çš„æŒ‡é’ˆã€‚æ–‡ä¸­åç»­æˆ‘è®©ç¼–è¾‘è€å¸ˆå†ä¿®æ”¹ä¸€ä¸‹ï¼Œæ˜ç¡®è¯´æ˜æ˜¯hmapçš„æŒ‡é’ˆã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646950225,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":337016,"user_name":"simple_å­™","can_delete":false,"product_type":"c1","uid":1873629,"ip_address":"","ucode":"A77203E242D652","user_header":"https://static001.geekbang.org/account/avatar/00/1c/96/dd/1620a744.jpg","comment_is_top":false,"comment_ctime":1646553557,"is_pvip":false,"replies":[{"id":123238,"content":"éšæœºçš„è®¾å®šæ˜¯goå›¢é˜Ÿæ•…æ„è€Œä¸ºä¹‹ã€‚\ngoåœ¨æ ‡å‡†åº“ä¸­å¢åŠ äº†ä¸€ä¸ªsync.Mapï¼Œæ”¯æŒå¹¶å‘å†™ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1646722608,"ip_address":"","comment_id":337016,"utype":1}],"discussion_count":2,"race_medal":0,"score":5,"product_id":100093501,"comment_content":"ä¸ºå•¥mapçš„éå†é¡ºåºæ˜¯éšæœºçš„å‘¢\nç°åœ¨æœ‰å¹¶å‘å®‰å…¨çš„mapç”¨å—","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":555512,"discussion_content":"åˆ‡ç‰‡çš„å¼•ç”¨æ˜¯sliceçš„runtimeç»“æ„ä½“(ä¸‰å…ƒç»„)å®ä¾‹ï¼Œmapçš„å¼•ç”¨æ˜¯hmapç±»å‹çš„æŒ‡é’ˆã€‚æ–‡ä¸­åç»­æˆ‘è®©ç¼–è¾‘è€å¸ˆå†ä¿®æ”¹ä¸€ä¸‹ï¼Œæ˜ç¡®è¯´æ˜æ˜¯hmapçš„æŒ‡é’ˆã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646950225,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":357183,"user_name":"å¾®å¾®è¶…çº§ä¸¹ğŸ’«","can_delete":false,"product_type":"c1","uid":2996016,"ip_address":"è¾½å®","ucode":"ABEFC2FA673BE4","user_header":"https://static001.geekbang.org/account/avatar/00/2d/b7/30/c1e4f5b5.jpg","comment_is_top":false,"comment_ctime":1663047552,"is_pvip":false,"replies":[{"id":130006,"content":"maptypeä»£è¡¨çš„æ˜¯ç±»å‹ä¿¡æ¯ï¼Œæ¯”å¦‚å£°æ˜ä¸¤ä¸ªç›¸åŒç±»å‹çš„mapå˜é‡ï¼š\n\nvar m map[string]int\nvar m1 map[string]int\n\nå½“é¦–æ¬¡å£°æ˜ç±»å‹ä¸ºmap[string]intç±»å‹çš„mæ—¶ï¼Œgoè¿è¡Œæ—¶ä¼šåˆ›å»ºå¯¹åº”map[string]intç±»å‹çš„maptypeå®ä¾‹ã€‚\n\nå½“å†æ¬¡å£°æ˜ç±»å‹ä¸ºmap[string]intç±»å‹çš„m1æ—¶ï¼Œgoè¿è¡Œæ—¶ä¼šå¤ç”¨ä¸Šé¢çš„maptypeã€‚å› ä¸ºç±»å‹ä¸€è‡´ã€‚\n\nå…ƒç´ ä¸ªæ•°ä¸mapç±»å‹ä¿¡æ¯æ²¡æœ‰ç›´æ¥å…³ç³»ï¼Œå…ƒç´ ä¸ªæ•°å±äºmapç±»å‹çš„å˜é‡çš„â€œå±æ€§â€èŒƒç•´ï¼Œä¸æ˜¯ç±»å‹èŒƒç•´ã€‚\n","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1663099232,"ip_address":"è¾½å®","comment_id":357183,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100093501,"comment_content":"éº»çƒ¦é—®ä¸‹è€å¸ˆï¼š\n&quot;å½“æˆ‘ä»¬å£°æ˜ä¸€ä¸ª map ç±»å‹å˜é‡ï¼Œæ¯”å¦‚ var m map[string]int æ—¶ï¼ŒGo è¿è¡Œæ—¶å°±ä¼šä¸ºè¿™ä¸ªå˜é‡å¯¹åº”çš„ç‰¹å®š map ç±»å‹ï¼Œç”Ÿæˆä¸€ä¸ª runtime.maptype å®ä¾‹ã€‚å¦‚æœè¿™ä¸ªå®ä¾‹å·²ç»å­˜åœ¨ï¼Œå°±ä¼šç›´æ¥å¤ç”¨&quot;\nè¿™ä¸ªç›´æ¥å¤ç”¨æ²¡æœ‰ç†è§£ï¼Ÿæ¯ä¸ªå®ä¾‹æ€ä¹ˆèƒ½å¤ç”¨å‘¢ï¼Ÿä»–ä»¬çš„åŸä¿¡æ¯æ˜¯ä¸èƒ½å…±äº«çš„å‘€ï¼Ÿæ¯ä¸ªmapä¸æ˜¯éƒ½æœ‰è‡ªå·±çš„åŸä¿¡æ¯å—ï¼Ÿæ¯”å¦‚å…ƒç´ ä¸ªæ•°ä¹‹ç±»çš„éƒ½æ˜¯ä¸ä¸€æ ·çš„å‘€","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":587491,"discussion_content":"maptypeä»£è¡¨çš„æ˜¯ç±»å‹ä¿¡æ¯ï¼Œæ¯”å¦‚å£°æ˜ä¸¤ä¸ªç›¸åŒç±»å‹çš„mapå˜é‡ï¼š\n\nvar m map[string]int\nvar m1 map[string]int\n\nå½“é¦–æ¬¡å£°æ˜ç±»å‹ä¸ºmap[string]intç±»å‹çš„mæ—¶ï¼Œgoè¿è¡Œæ—¶ä¼šåˆ›å»ºå¯¹åº”map[string]intç±»å‹çš„maptypeå®ä¾‹ã€‚\n\nå½“å†æ¬¡å£°æ˜ç±»å‹ä¸ºmap[string]intç±»å‹çš„m1æ—¶ï¼Œgoè¿è¡Œæ—¶ä¼šå¤ç”¨ä¸Šé¢çš„maptypeã€‚å› ä¸ºç±»å‹ä¸€è‡´ã€‚\n\nå…ƒç´ ä¸ªæ•°ä¸mapç±»å‹ä¿¡æ¯æ²¡æœ‰ç›´æ¥å…³ç³»ï¼Œå…ƒç´ ä¸ªæ•°å±äºmapç±»å‹çš„å˜é‡çš„â€œå±æ€§â€èŒƒç•´ï¼Œä¸æ˜¯ç±»å‹èŒƒç•´ã€‚\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663099232,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"è¾½å®","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":353617,"user_name":"ç™½å°ç™½","can_delete":false,"product_type":"c1","uid":1031680,"ip_address":"åŒ—äº¬","ucode":"2CCB878DA2E93D","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/pESfAX6YVRnVg3HpOX44bTa64bHTbhsnlHJqqDjicBeELxCs5rwwIXibFibd0fua3VyVExypnqnfgTSUp8WoYmc9g/132","comment_is_top":false,"comment_ctime":1659605086,"is_pvip":false,"replies":[{"id":128701,"content":"mapçš„å®ç°åŸç†å†³å®šäº†æˆ‘ä»¬æ— æ³•åšåˆ°ã€‚é™¤éåœ¨mapä¹‹å¤–åœ¨è‡ªè¡ŒåŒ…ä¸€å±‚ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1659925029,"ip_address":"åŒ—äº¬","comment_id":353617,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100093501,"comment_content":"å¦‚ä½•ä¿è¯æ¯æ¬¡è¯»å–mapçš„å€¼æ˜¯æœ‰åºçš„ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583128,"discussion_content":"mapçš„å®ç°åŸç†å†³å®šäº†æˆ‘ä»¬æ— æ³•åšåˆ°ã€‚é™¤éåœ¨mapä¹‹å¤–åœ¨è‡ªè¡ŒåŒ…ä¸€å±‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659925029,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":349034,"user_name":"æ’‡æ’‡","can_delete":false,"product_type":"c1","uid":1010786,"ip_address":"","ucode":"938305F9F3F19C","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6c/62/cbb91635.jpg","comment_is_top":false,"comment_ctime":1655660557,"is_pvip":false,"replies":[{"id":127032,"content":"hmapæ˜¯æè¿°mapæ•´ä½“çš„ï¼Œå”¯ä¸€ä»£è¡¨ä¸€ä¸ªmapå®ä¾‹ã€‚è€Œmaptypeåˆ™æ˜¯ç”¨æ¥æè¿°ä¸€ä¸ªmapä¸­çš„keyå’Œvalueçš„ä¿¡æ¯çš„ï¼ŒåŒ…æ‹¬ç±»å‹ã€å¤§å°ç­‰ã€‚ç”¨äºè¾…åŠ©é’ˆå¯¹hmapçš„å„ç§æ“ä½œã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1655705629,"ip_address":"","comment_id":349034,"utype":1}],"discussion_count":2,"race_medal":0,"score":5,"product_id":100093501,"comment_content":"maptypeå’Œhmapéƒ½æ˜¯å…ƒä¿¡æ¯ï¼Œä¸ºä»€ä¹ˆéœ€è¦ä¸¤ä¸ªï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583128,"discussion_content":"mapçš„å®ç°åŸç†å†³å®šäº†æˆ‘ä»¬æ— æ³•åšåˆ°ã€‚é™¤éåœ¨mapä¹‹å¤–åœ¨è‡ªè¡ŒåŒ…ä¸€å±‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659925029,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":347956,"user_name":"Geek_25f93f","can_delete":false,"product_type":"c1","uid":2917509,"ip_address":"","ucode":"D5932373E8EEA2","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/5JKZO1Ziax3Ky03noshpVNyEvZw0pUwjLcHrHRo1XNPKXdmCE88homb6ltA15CdVRnjzjgGs3Ex42CaDbeYzNuQ/132","comment_is_top":false,"comment_ctime":1654607140,"is_pvip":false,"replies":[{"id":126851,"content":"mapçš„keyçš„ç±»å‹ä¸ä¸€ï¼Œä½¿ç”¨çš„hashå‡½æ•°å¯èƒ½ä¸åŒã€‚è¿™ä¸ªç”±ç¼–è¯‘å™¨å’Œè¿è¡Œæ—¶å†³å®šã€‚ä½†hashç®—æ³•éƒ½åœ¨runtimeåŒ…çš„alg.goä¸­ï¼Œå¯ä»¥è‡ªå·±çœ‹ä¸€ä¸‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1654762502,"ip_address":"","comment_id":347956,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100093501,"comment_content":"æƒ³é—®ä¸‹go mapä½¿ç”¨ä»€ä¹ˆå“ˆå¸Œç®—æ³•ç®—å‡ºå“ˆå¸Œå€¼çš„å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":575344,"discussion_content":"mapçš„keyçš„ç±»å‹ä¸ä¸€ï¼Œä½¿ç”¨çš„hashå‡½æ•°å¯èƒ½ä¸åŒã€‚è¿™ä¸ªç”±ç¼–è¯‘å™¨å’Œè¿è¡Œæ—¶å†³å®šã€‚ä½†hashç®—æ³•éƒ½åœ¨runtimeåŒ…çš„alg.goä¸­ï¼Œå¯ä»¥è‡ªå·±çœ‹ä¸€ä¸‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1654762503,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":343375,"user_name":"Geek_as","can_delete":false,"product_type":"c1","uid":1534500,"ip_address":"","ucode":"AB7B70DBC2B5F8","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/qhonwcQle1RBufvLdTm4MgSNl554GBXUZtNNH65oYajbbRLxKsZX4hM9vFtrLLpDM0H93ZNWRFAZSrIZC7yAsQ/132","comment_is_top":false,"comment_ctime":1650805633,"is_pvip":false,"replies":[{"id":125441,"content":"âœ…","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1651011627,"ip_address":"","comment_id":343375,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100093501,"comment_content":"å¼„ä¸€ä¸ªé“¾è¡¨å…ƒç´ æ˜¯keyç±»å‹ï¼Œè®°å½•keyæ’å…¥çš„é¡ºåºï¼Œéå†çš„æ—¶å€™æŒ‰è¿™ä¸ªkeyé¡ºåºå»å–å°±è¡Œäº†","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":567822,"discussion_content":"âœ…","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651011627,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":342974,"user_name":"mikewoo","can_delete":false,"product_type":"c1","uid":1118888,"ip_address":"","ucode":"9AE90E05048DE1","user_header":"https://static001.geekbang.org/account/avatar/00/11/12/a8/8aaf13e0.jpg","comment_is_top":false,"comment_ctime":1650556765,"is_pvip":true,"replies":[{"id":125294,"content":"âœ…","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1650601609,"ip_address":"","comment_id":342974,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100093501,"comment_content":"å•ç‹¬å¯¹mapä¸­çš„keyè¿›è¡Œæœ‰åºå­˜å‚¨ï¼Œç„¶åå†ä¾æ®keyçš„æ¬¡åºä¾æ¬¡è·å–mapä¸­keyå¯¹åº”çš„value.","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":567822,"discussion_content":"âœ…","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651011627,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":342852,"user_name":"è«å¾—åŠæ³•","can_delete":false,"product_type":"c1","uid":1073958,"ip_address":"","ucode":"D3E07A4CFD1AAA","user_header":"https://static001.geekbang.org/account/avatar/00/10/63/26/8c8be018.jpg","comment_is_top":false,"comment_ctime":1650507310,"is_pvip":false,"replies":[{"id":125290,"content":"æ— è®ºæŸ¥è¯¢è¿˜æ˜¯å†™å…¥ï¼Œéƒ½æ˜¯å…ˆé€‰æ¡¶ï¼Œå†åœ¨æ¡¶å†…åŒ¹é…ã€‚å¦‚æœå‡ºç°ç¢°æ’ï¼Œæ˜¯è¦æ¯”è¾ƒkeyçš„ã€‚ä»åŸç†ä¸Šçœ‹ï¼Œä¸€ä¸ªæ¡¶å†…æ˜¯å¯èƒ½å­˜åœ¨tophashä¸€æ ·çš„keyã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1650596617,"ip_address":"","comment_id":342852,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100093501,"comment_content":"æƒ³é—®ä¸€ä¸‹å¦‚æœå‡ºç°å“ˆå¸Œç¢°æ’ï¼Œå­˜å‚¨è¿‡ç¨‹å’ŒæŸ¥è¯¢è¿‡ç¨‹æ˜¯å’‹æ ·çš„å‘¢ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":566083,"discussion_content":"æ— è®ºæŸ¥è¯¢è¿˜æ˜¯å†™å…¥ï¼Œéƒ½æ˜¯å…ˆé€‰æ¡¶ï¼Œå†åœ¨æ¡¶å†…åŒ¹é…ã€‚å¦‚æœå‡ºç°ç¢°æ’ï¼Œæ˜¯è¦æ¯”è¾ƒkeyçš„ã€‚ä»åŸç†ä¸Šçœ‹ï¼Œä¸€ä¸ªæ¡¶å†…æ˜¯å¯èƒ½å­˜åœ¨tophashä¸€æ ·çš„keyã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650596617,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":342168,"user_name":"ryanxw","can_delete":false,"product_type":"c1","uid":2119325,"ip_address":"","ucode":"0B91EAC8D06EED","user_header":"https://static001.geekbang.org/account/avatar/00/20/56/9d/4b2a7d29.jpg","comment_is_top":false,"comment_ctime":1650079817,"is_pvip":false,"replies":[{"id":125045,"content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1650108704,"ip_address":"","comment_id":342168,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100093501,"comment_content":"æŠŠkeyå­˜åˆ°arrä¸­ï¼ŒæŒ‰ç…§é¡ºåºæ ¹æ®keyå»mapä¸­å–value","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":563899,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650108704,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":337533,"user_name":"éšé£wli","can_delete":false,"product_type":"c1","uid":1932930,"ip_address":"","ucode":"655BD9182D7570","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/OEZQyDeZd2oCPZiak19FKQOZI4I21WjLlwUgJzVFxyXsVKbIlpEEEYZcHbA4lYVzFbd3CtmDfZuUictW3ujvKnUQ/132","comment_is_top":false,"comment_ctime":1646881660,"is_pvip":false,"replies":[{"id":123365,"content":"åˆ‡ç‰‡çš„å¼•ç”¨æ˜¯sliceçš„runtimeç»“æ„ä½“(ä¸‰å…ƒç»„)å®ä¾‹ï¼Œmapçš„å¼•ç”¨æ˜¯hmapç±»å‹çš„æŒ‡é’ˆã€‚æ–‡ä¸­åç»­æˆ‘è®©ç¼–è¾‘è€å¸ˆå†ä¿®æ”¹ä¸€ä¸‹ï¼Œæ˜ç¡®è¯´æ˜æ˜¯hmapçš„æŒ‡é’ˆã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ä½œè€…","uid":1026224,"ctime":1646950225,"ip_address":"","comment_id":337533,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100093501,"comment_content":"è€å¸ˆï¼Œgo map å’Œ slice makeè¿”å›éƒ½æ˜¯å¼•ç”¨ï¼Œè¿™ä¸ªæ˜¯æŒ‡hmapå’Œsliceç»“æ„ä½“çš„æŒ‡é’ˆå—ï¼Ÿè¿™å—ä¸€ç›´æœ‰ç‚¹å›°æƒ‘ï¼Œå¸Œæœ›è§£ç­”ä¸€ä¸‹","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":563899,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650108704,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":337016,"user_name":"simple_å­™","can_delete":false,"product_type":"c1","uid":1873629,"ip_address":"","ucode":"A77203E242D652","user_header":"https://static001.geekbang.org/account/avatar/00/1c/96/dd/1620a744.jpg","comment_is_top":false,"comment_ctime":1646553557,"is_pvip":false,"replies":[{"id":123238,"content":"éšæœºçš„è®¾å®šæ˜¯goå›¢é˜Ÿæ•…æ„è€Œä¸ºä¹‹ã€‚\ngoåœ¨æ ‡å‡†åº“ä¸­å¢åŠ äº†ä¸€ä¸ªsync.Mapï¼Œæ”¯æŒå¹¶å‘å†™ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1646722608,"ip_address":"","comment_id":337016,"utype":1}],"discussion_count":2,"race_medal":0,"score":5,"product_id":100093501,"comment_content":"ä¸ºå•¥mapçš„éå†é¡ºåºæ˜¯éšæœºçš„å‘¢\nç°åœ¨æœ‰å¹¶å‘å®‰å…¨çš„mapç”¨å—","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":555019,"discussion_content":"éšæœºçš„è®¾å®šæ˜¯goå›¢é˜Ÿæ•…æ„è€Œä¸ºä¹‹ã€‚\ngoåœ¨æ ‡å‡†åº“ä¸­å¢åŠ äº†ä¸€ä¸ªsync.Mapï¼Œæ”¯æŒå¹¶å‘å†™ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646722608,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2576960,"avatar":"https://static001.geekbang.org/account/avatar/00/27/52/40/db9b0eb2.jpg","nickname":"è‡ªç”±","note":"","ucode":"4E3B53D29D86CA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":637325,"discussion_content":"è¿˜å¯ä»¥ä½¿ç”¨ä¸€äº›å¼€æºæ–¹æ¡ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1708351048,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"è´µå·","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":335259,"user_name":"1âƒ£ï¸","can_delete":false,"product_type":"c1","uid":1375706,"ip_address":"","ucode":"DDD1B98F90281C","user_header":"https://static001.geekbang.org/account/avatar/00/14/fd/da/7e0f0a02.jpg","comment_is_top":false,"comment_ctime":1645430498,"is_pvip":false,"replies":[{"id":122614,"content":"å—goroutineå¹¶å‘è°ƒåº¦å½±å“ã€‚éå†æ¬¡æ•°è¶Šå¤šï¼Œå‡ºç°å¹¶å‘å†™å¯¼è‡´æŠ›panicçš„æ¦‚ç‡è¶Šå¤§ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1645605549,"ip_address":"","comment_id":335259,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100093501,"comment_content":"è¯·é—®ä¸€ä¸‹ï¼Œä¸ºå•¥éœ€è¦ä¾‹å­ä¸­éœ€è¦éå†1000æ¬¡æ‰èƒ½å‡ºç°å¹¶å‘è¯»å†™çš„é”™è¯¯ï¼Œä½†éå†100æ¬¡ä¸ä¼šï¼Ÿ","like_count":1},{"had_liked":false,"id":334370,"user_name":"éƒ­çº¯","can_delete":false,"product_type":"c1","uid":1314521,"ip_address":"","ucode":"2613860B4642C4","user_header":"https://static001.geekbang.org/account/avatar/00/14/0e/d9/e61ce097.jpg","comment_is_top":false,"comment_ctime":1644904100,"is_pvip":false,"replies":[{"id":122145,"content":"æ­£ç¡®âœ…","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1644916006,"ip_address":"","comment_id":334370,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100093501,"comment_content":"å¯ä»¥é€šè¿‡ slice æˆ–è€… æ•°ç»„ é…åˆ map å®ç°ã€‚","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":551169,"discussion_content":"æ­£ç¡®âœ…","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644916006,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":325537,"user_name":"å¼ ç”³å‚²","can_delete":false,"product_type":"c1","uid":1182372,"ip_address":"","ucode":"22D46BC529BA8A","user_header":"https://static001.geekbang.org/account/avatar/00/12/0a/a4/828a431f.jpg","comment_is_top":false,"comment_ctime":1639017510,"is_pvip":false,"replies":[{"id":118606,"content":"æ²¡è¿ç§»å®Œè‚¯å®šä¸ä¼šé‡Šæ”¾ã€‚ä½†æˆ‘è®°å¾—è¿ç§»å¥½åƒä¹Ÿä¸æ˜¯åªè¿ç§»å‘½ä¸­çš„keyã€‚å‘½ä¸­çš„keyè‚¯å®šä¼šè¿ç§»ï¼Œä½†åœ¨ä¸€æ¬¡è¿ç§»è¿‡ç¨‹ä¸­ï¼Œè¿˜ä¼šè¿ç§»å…¶ä»–keyã€‚å…·ä½“ä½ çœ‹ä¸€ä¸‹æºç ç¡®è®¤ä¸€ä¸‹å§ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1639564153,"ip_address":"","comment_id":325537,"utype":1}],"discussion_count":1,"race_medal":2,"score":6,"product_id":100093501,"comment_content":"è€å¸ˆå¥½ï¼Œè¯·æ•™ä¸ªé—®é¢˜ï¼šåœ¨ map è¿›è¡Œè‡ªåŠ¨æ‰©å®¹æ—¶ï¼ŒçœŸæ­£çš„å…ƒç´ è¿ç§»æ˜¯åœ¨ assign å’Œ delete æ—¶é€æ­¥è¿›è¡Œçš„ï¼Œè¿™ä¸ªæˆ‘ç†è§£æ˜¯å°†æ•°æ®è¿ç§»çš„å¼€é”€åˆ†æ‘Šåˆ°å¤šæ¬¡è¯»å†™æ“ä½œä¸­ï¼Œä»¥å‡å°‘æ‰©å®¹æ—¶çš„æ€§èƒ½æŸè€—ã€‚ä½†æ˜¯å¦‚æœæŸäº› key ä¸€ç›´æ²¡æœ‰è¢«è®¿é—®åˆ°ï¼Œé‚£ä¹ˆ oldbuckets æ˜¯ä¸€ç›´ä¸ä¼šé‡Šæ”¾å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":551169,"discussion_content":"æ­£ç¡®âœ…","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644916006,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":325261,"user_name":"lemon","can_delete":false,"product_type":"c1","uid":2323716,"ip_address":"","ucode":"47626025C55E5E","user_header":"https://static001.geekbang.org/account/avatar/00/23/75/04/d26cd437.jpg","comment_is_top":false,"comment_ctime":1638883526,"is_pvip":false,"replies":[{"id":118591,"content":"ä»æºç ä¸­çœ‹æ˜¯è¿™æ ·ï¼šm := bucketMask(h.B)","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1639560275,"ip_address":"","comment_id":325261,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100093501,"comment_content":"è€å¸ˆï¼Œâ€œæ¯ä¸ª bucket ä¸­å­˜å‚¨çš„æ˜¯ Hash å€¼ä½ bit ä½æ•°å€¼ç›¸åŒçš„å…ƒç´ â€è¿™é‡Œï¼Œåº”è¯¥æ˜¯Hash å€¼ä½ B bit ä½å§?ã€Bæ˜¯æŒ‡hmapä¸­çš„Bã€‘ï¼Œä¹Ÿå°±è½åœ¨å“ªä¸ªbucketé‡Œæ˜¯ç”±Hashå€¼çš„ä½ B bit ä½å†³å®šçš„ï¼Œbucketçš„æ•°é‡ä¹Ÿæ­£å¥½æ˜¯2^Bä¸ªï¼Œæ¯”å¦‚B=3ï¼Œé‚£ä¹ˆHashä¸º...011çš„keyå°±è½åœ¨011=3ä¹Ÿå°±æ˜¯ç´¢å¼•ä¸º3çš„bucketå†…ï¼Œå¦å¤–æœ‰å¼ å›¾é‚£é‡ŒHashå€¼ä¹Ÿä¸æ˜¯å°±åˆ†ä¸ºäº†é«˜ä½åŒºå’Œä½ä½åŒºï¼Œå®é™…ä¸Šé«˜ä½åŒºæ˜¯8ä½ï¼Œä½ä½åŒºæ˜¯Bä½ï¼Œä¸­é—´å¯èƒ½è¿˜æœ‰åˆ«çš„ä½ï¼Œä¸çŸ¥é“ç†è§£çš„å¯¹ä¸å¯¹","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":538960,"discussion_content":"æ²¡è¿ç§»å®Œè‚¯å®šä¸ä¼šé‡Šæ”¾ã€‚ä½†æˆ‘è®°å¾—è¿ç§»å¥½åƒä¹Ÿä¸æ˜¯åªè¿ç§»å‘½ä¸­çš„keyã€‚å‘½ä¸­çš„keyè‚¯å®šä¼šè¿ç§»ï¼Œä½†åœ¨ä¸€æ¬¡è¿ç§»è¿‡ç¨‹ä¸­ï¼Œè¿˜ä¼šè¿ç§»å…¶ä»–keyã€‚å…·ä½“ä½ çœ‹ä¸€ä¸‹æºç ç¡®è®¤ä¸€ä¸‹å§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639564153,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":322857,"user_name":"å¤šé€‰å‚æ•°","can_delete":false,"product_type":"c1","uid":1248326,"ip_address":"","ucode":"B2294D80AB075F","user_header":"https://static001.geekbang.org/account/avatar/00/13/0c/46/dfe32cf4.jpg","comment_is_top":false,"comment_ctime":1637635327,"is_pvip":false,"replies":[{"id":117552,"content":"å…¶å®å°±æ˜¯go mapçš„è®¾è®¡å†³å®šäº†æ—¢ä¸èƒ½è·å–valueçš„åœ°å€ï¼Œä¹Ÿä¸èƒ½å¹¶å‘å†™ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1638256132,"ip_address":"","comment_id":322857,"utype":1}],"discussion_count":3,"race_medal":0,"score":6,"product_id":100093501,"comment_content":"é—®é¢˜å†é—®ï¼šgolang ç»“æ„ä½“ä½œä¸º map çš„å…ƒç´ æ—¶ï¼Œä¸èƒ½å¤Ÿç›´æ¥èµ‹å€¼ç»™ç»“æ„ä½“çš„æŸä¸ªå­—æ®µã€‚è¿™ä¸ªä¹Ÿæœ‰â€œGo ä¸å…è®¸è·å– map ä¸­ value çš„åœ°å€â€çš„åŸå› åœ¨å˜›ï¼Ÿå‡å¦‚è¿™æ ·çš„è¯ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆè¯»ç»“æ„ä½“ä¸­çš„æŸä¸ªå­—æ®µæ˜¯å¯ä»¥çš„ï¼Ÿå› ä¸ºè¯»å’Œå†™ç»“æ„ä½“ä¸­æŸä¸ªå­—æ®µçš„æ—¶å€™éƒ½ä¼šæ¶‰åŠåˆ°è·å– map ä¸­ value çš„åœ°å€ï¼Œè€Œæ­¤æ—¶è¯»æ“ä½œæ˜¯å…è®¸çš„ï¼Œè€Œå†™æ“ä½œæ˜¯ä¸å…è®¸çš„ã€‚æœ‰æ²¡æœ‰å¯èƒ½æ˜¯å› ä¸º map ä¸æ”¯æŒå¹¶å‘ï¼Œå‡å¦‚æ˜¯å†™æ“ä½œçš„è¯ï¼Œä¼šå­˜åœ¨ä¸€äº›å¹¶å‘å¸¦æ¥çš„é—®é¢˜ï¼Œè€Œè¯»æ“ä½œä¸å­˜åœ¨è¿™äº›é—®é¢˜ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":538939,"discussion_content":"ä»æºç ä¸­çœ‹æ˜¯è¿™æ ·ï¼šm := bucketMask(h.B)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639560276,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":322750,"user_name":"å¸ƒå‡¡","can_delete":false,"product_type":"c1","uid":1202465,"ip_address":"","ucode":"346FCD332F8BFA","user_header":"https://static001.geekbang.org/account/avatar/00/12/59/21/d2efde18.jpg","comment_is_top":false,"comment_ctime":1637573810,"is_pvip":false,"replies":[{"id":117599,"content":"1. æ–‡ä¸­çš„è¡¨é‡Œæœ‰ 2^B=bucketæ•°é‡\n2. å·®ä¸å¤šã€‚ç»†èŠ‚è¿˜å¾—å»é˜…è¯»ä»£ç ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1638281530,"ip_address":"","comment_id":322750,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100093501,"comment_content":"\nmap.go æºç åœ°å€\nhttps:&#47;&#47;github.com&#47;golang&#47;go&#47;blob&#47;master&#47;src&#47;runtime&#47;map.go\n \n è€å¸ˆè¯·é—®ï¼Œ\n 1ã€buckets[2^B-1]å¯¹åº”Bçš„å–å€¼èŒƒå›´æ˜¯ä¸æ˜¯[0,1,2â€¦â€¦n),nçš„å€¼åº”è¯¥æ˜¯å¤šå°‘å‘¢ï¼Ÿ\n 2ã€buckets[0]å¯¹åº”çš„æ˜¯key[0â€¦7]ï¼Œ å½“buckets[0]å®¹é‡ä¸å¤Ÿæ—¶ bucket æ˜¯ä¸æ˜¯ä¸€ç›´æ ¹æ®2å€é€Ÿåº¦å¢æ¶¨ï¼Œå³ buckets[1]å¯¹åº”çš„å°±æ˜¯key[0â€¦15]ï¼Œbuckets[2]å¯¹åº”çš„key[0â€¦31]ã€‚\n ä¸€ç›´åˆ°count&gt;LoadFactoræ—¶åº”è¯¥å°±æ˜¯6.5*å‰ä¸€ä¸ªbucketçš„å®¹é‡ï¼Œæ˜¯è¿™æ ·å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":534674,"discussion_content":"å…¶å®å°±æ˜¯go mapçš„è®¾è®¡å†³å®šäº†æ—¢ä¸èƒ½è·å–valueçš„åœ°å€ï¼Œä¹Ÿä¸èƒ½å¹¶å‘å†™ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638256132,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2323716,"avatar":"https://static001.geekbang.org/account/avatar/00/23/75/04/d26cd437.jpg","nickname":"lemon","note":"","ucode":"47626025C55E5E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":536866,"discussion_content":"&#34;ä¸èƒ½è·å–valueçš„åœ°å€&#34;ä¼šä¸ä¼šæ˜¯å› ä¸ºè®¾è®¡è€…ä¸æƒ³è®©æˆ‘ä»¬ç”¨è¿™ä¸ªåœ°å€å€¼å»è¿›è¡Œè¿ç®—ä¹‹ç±»çš„åŠ¨ä½œå•Šï¼Œè¿™æ ·çš„è¯ï¼Œä¹‹åæ‰©å®¹çš„æ—¶å€™valueçš„å€¼å˜äº†ï¼Œå°±ä¼šå½±å“åˆ°ä»£ç çš„ç»“æœ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638883016,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1248326,"avatar":"https://static001.geekbang.org/account/avatar/00/13/0c/46/dfe32cf4.jpg","nickname":"å¤šé€‰å‚æ•°","note":"","ucode":"B2294D80AB075F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2323716,"avatar":"https://static001.geekbang.org/account/avatar/00/23/75/04/d26cd437.jpg","nickname":"lemon","note":"","ucode":"47626025C55E5E","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":537120,"discussion_content":"ä½†æ˜¯è¯»å–çš„è¯ä¸ä¹Ÿæ˜¯æ‹¿åˆ°äº†é‚£ä¸ªåœ°å€ï¼Œç„¶åå–å€¼çš„å˜›ï¼Ÿæˆ‘è§‰å¾—æ˜¯å¹¶å‘çš„åŸå› ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638961570,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":536866,"ip_address":"","group_id":0},"score":537120,"extra":""}]}]},{"had_liked":false,"id":322348,"user_name":"lesserror","can_delete":false,"product_type":"c1","uid":1351076,"ip_address":"","ucode":"25A54D1165FCF6","user_header":"https://static001.geekbang.org/account/avatar/00/14/9d/a4/e481ae48.jpg","comment_is_top":false,"comment_ctime":1637312553,"is_pvip":false,"replies":[{"id":117173,"content":"1. å¼•ç”¨å±‚æ¬¡å¤ªæ·±ï¼Œæ‰€ä»¥ç”¨äº†ä¼ªä»£ç å½¢å¼çš„ç®€å†™ã€‚å°±æ˜¯è¯´hashå‡½æ•°å­˜æ”¾åœ¨maptypeç±»å‹ä¸­çš„keyå­—æ®µçš„algå­—æ®µä¸­çš„hashå­—æ®µä¸­ï¼Œkeyæ˜¯hashå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œæ˜¯å¾…hashçš„å­—æ®µã€‚ç¬¬äºŒä¸ªå‚æ•°æ˜¯ç§å­(hmap.hash0å°±æ˜¯ç§å­)ã€‚go 1.17ä¸­è¿™å—çš„ç»„æˆå‘ç”Ÿäº†ä¸€äº›å˜åŒ–ã€‚è¿™ä¸ªhashå‡½æ•°ç›´æ¥æ”¾åœ¨maptypeçš„hasherå­—æ®µä¸­äº†ã€‚ä½†åŸç†åº”è¯¥æ²¡æœ‰å˜ã€‚\n\n2. var m map[string]int &amp;#47;&amp;#47; m = nil  ä½ è¯´çš„æ˜¯è¿™é‡Œä¹ˆï¼Ÿè¿™é‡Œåé¢æ³¨é‡Šä¸­ä¸æ˜¯æ‰“å°è¾“å‡ºï¼Œè€Œæ˜¯æŒ‡ mä¸ºnilã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1637566820,"ip_address":"","comment_id":322348,"utype":1}],"discussion_count":4,"race_medal":0,"score":6,"product_id":100093501,"comment_content":"Tony Bai è€å¸ˆï¼Œéº»çƒ¦æœ‰æ—¶é—´å›å¤ä¸€ä¸‹ä»¥ä¸‹å‡ ä¸ªé—®é¢˜ï¼š\n\n1. æ–‡ä¸­è¯´ï¼š â€œmap æ‰€ç”¨çš„ hash å‡½æ•°ä¹Ÿå­˜æ”¾åœ¨ maptype.key.alg.hash(key, hmap.hash0) ä¸­ã€‚â€ åé¢çš„è¿™ä¸€ä¸²ï¼šâ€œmaptype.key.alg.hash(key, hmap.hash0) â€ æ˜¯ä»€ä¹ˆï¼Ÿ çœ‹çš„æœ‰ç‚¹æ‡µã€‚\n\n2. ä¸ç®¡æ˜¯ä½¿ç”¨å­—é¢å€¼ è¿˜æ˜¯ç”¨ makeå‡½æ•°åˆå§‹åŒ– mapç±»å‹å˜é‡ï¼Œæ‰“å°å˜é‡åï¼Œéƒ½æ˜¯è¾“å‡ºçš„ map[] è€Œä¸æ˜¯ nil ï¼Œè¿™ä¸ªè¾“å‡ºæ˜¯æ­£å¸¸çš„å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1896658,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/f0/d2/6f8c7d72.jpg","nickname":";","note":"","ucode":"28C2B95415BBF7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":531971,"discussion_content":"ç¬¬äºŒä¸ªé—®é¢˜æ„Ÿè§‰æ˜¯Goè¯­è¨€ä¸­ä¸èƒ½æ‰“å°nilå‡ºæ¥ï¼Œæˆ‘è¯•äº†ä¸€ä¸‹sliceä¹Ÿæ˜¯ç›´æ¥æ‰“å°ä¸€ä¸ª[]ï¼Œè€Œä¸æ˜¯nilï¼Œå¯ä»¥ä½¿ç”¨ifè¯­å¥æ¥åˆ¤åˆ«æ˜¯ä¸æ˜¯nil","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1637486049,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":1,"child_discussions":[{"author":{"id":1351076,"avatar":"https://static001.geekbang.org/account/avatar/00/14/9d/a4/e481ae48.jpg","nickname":"lesserror","note":"","ucode":"25A54D1165FCF6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1896658,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/f0/d2/6f8c7d72.jpg","nickname":";","note":"","ucode":"28C2B95415BBF7","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":532061,"discussion_content":"æ„Ÿè§‰æ˜¯è¿™æ ·çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637507055,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":531971,"ip_address":"","group_id":0},"score":532061,"extra":"{\"user_type\":1}"}]},{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":532282,"discussion_content":"1. å¼•ç”¨å±‚æ¬¡å¤ªæ·±ï¼Œæ‰€ä»¥ç”¨äº†ä¼ªä»£ç å½¢å¼çš„ç®€å†™ã€‚å°±æ˜¯è¯´hashå‡½æ•°å­˜æ”¾åœ¨maptypeç±»å‹ä¸­çš„keyå­—æ®µçš„algå­—æ®µä¸­çš„hashå­—æ®µä¸­ï¼Œkeyæ˜¯hashå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œæ˜¯å¾…hashçš„å­—æ®µã€‚ç¬¬äºŒä¸ªå‚æ•°æ˜¯ç§å­(hmap.hash0å°±æ˜¯ç§å­)ã€‚go 1.17ä¸­è¿™å—çš„ç»„æˆå‘ç”Ÿäº†ä¸€äº›å˜åŒ–ã€‚è¿™ä¸ªhashå‡½æ•°ç›´æ¥æ”¾åœ¨maptypeçš„hasherå­—æ®µä¸­äº†ã€‚ä½†åŸç†åº”è¯¥æ²¡æœ‰å˜ã€‚\n\n2. var m map[string]int &amp;#47;&amp;#47; m = nil  ä½ è¯´çš„æ˜¯è¿™é‡Œä¹ˆï¼Ÿè¿™é‡Œåé¢æ³¨é‡Šä¸­ä¸æ˜¯æ‰“å°è¾“å‡ºï¼Œè€Œæ˜¯æŒ‡ mä¸ºnilã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1637566820,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1603004,"avatar":"https://static001.geekbang.org/account/avatar/00/18/75/bc/89d88775.jpg","nickname":"Calvin","note":"","ucode":"0EEF5B207623B5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":532094,"discussion_content":"ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘åœ¨ go 1.17.3 ä¸­å‘ç°æ˜¯å¤šäº†ä¸€ä¸ªå±æ€§ hasherï¼Œä¸æ˜¯è€å¸ˆè¿™é‡Œè¯´çš„è¿™æ ·äº†ï¼Œçœ‹æ–‡ç« ä¸­ç¬”è®°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637512309,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":322198,"user_name":"AlexWillBeGood","can_delete":false,"product_type":"c1","uid":1505492,"ip_address":"","ucode":"6D7BB91781E38C","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/exfIUlVdCpicQPc7fOI6XezUuXd7rayRia7sB2GGHGP7IEBibI6TJbQS2R0bMNejzR1odAIDFP05cWjujrmbIzzwg/132","comment_is_top":false,"comment_ctime":1637230060,"is_pvip":false,"replies":[{"id":117162,"content":"çœ‹å®Œç¬¬17è®²ï¼Œä½ å°±æœ‰æ€è·¯äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1637564760,"ip_address":"","comment_id":322198,"utype":1}],"discussion_count":4,"race_medal":0,"score":6,"product_id":100093501,"comment_content":"è€å¸ˆï¼Œæœ‰ä¸€ç‚¹æˆ‘ä¸æ˜ç™½ï¼Œä¸ºä»€ä¹ˆkv ç´§é‚»å­˜å‚¨çš„æ—¶å€™ä¸€å®šéœ€è¦Paddingï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":532262,"discussion_content":"çœ‹å®Œç¬¬17è®²ï¼Œä½ å°±æœ‰æ€è·¯äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637564760,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1263587,"avatar":"","nickname":"Celebi","note":"","ucode":"443499E71435E7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":531210,"discussion_content":"çœ‹CSAPPè¿™æœ¬ä¹¦ã€‚cpuæ˜¯æŒ‰å­—é•¿è¯»æ•°æ®çš„ï¼Œå†…å­˜å¯¹é½cpuæ•ˆç‡é«˜","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1637247790,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2119325,"avatar":"https://static001.geekbang.org/account/avatar/00/20/56/9d/4b2a7d29.jpg","nickname":"ryanxw","note":"","ucode":"0B91EAC8D06EED","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":563798,"discussion_content":"cpuå¯¹é½åŸåˆ™","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650079949,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1505492,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/exfIUlVdCpicQPc7fOI6XezUuXd7rayRia7sB2GGHGP7IEBibI6TJbQS2R0bMNejzR1odAIDFP05cWjujrmbIzzwg/132","nickname":"AlexWillBeGood","note":"","ucode":"6D7BB91781E38C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":531340,"discussion_content":"å¤šè°¢ ä¸‹ä¸€è¯¾å¥½åƒç»™å‡ºäº†ç­”æ¡ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637289302,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":322066,"user_name":"é…¥å®è¯ä¸å¤š","can_delete":false,"product_type":"c1","uid":2564698,"ip_address":"","ucode":"3B9BF256682504","user_header":"https://static001.geekbang.org/account/avatar/00/27/22/5a/873ac981.jpg","comment_is_top":false,"comment_ctime":1637154321,"is_pvip":false,"replies":[{"id":117144,"content":"ç¬”è¯¯ï¼Œå·²æ”¹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1637558269,"ip_address":"","comment_id":322066,"utype":1}],"discussion_count":2,"race_medal":0,"score":6,"product_id":100093501,"comment_content":"è¿™é‡Œ p æ‹¿åˆ°çš„ä¸æ˜¯åœ°å€ï¼Œè€Œæ˜¯ key å¯¹åº”çš„ value ","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":532218,"discussion_content":"ç¬”è¯¯ï¼Œå·²æ”¹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637558269,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1351076,"avatar":"https://static001.geekbang.org/account/avatar/00/14/9d/a4/e481ae48.jpg","nickname":"lesserror","note":"","ucode":"25A54D1165FCF6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":531435,"discussion_content":"å—¯ï¼Ÿ æ²¡æ‡‚ä½ çš„æ„æ€ï¼Œè€å¸ˆè¡¨è¿°æœ‰é—®é¢˜ä¹ˆï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637311319,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":322001,"user_name":"Geek_0b92d9","can_delete":false,"product_type":"c1","uid":2835237,"ip_address":"","ucode":"9212443F63B64B","user_header":"","comment_is_top":false,"comment_ctime":1637133341,"is_pvip":false,"replies":[{"id":117139,"content":"var m map[string]int &amp;#47;&amp;#47; m = nil æ³¨é‡Šä¸­çš„m = nil æ˜¯æç¤ºmçš„å€¼ä¸ºnilï¼Œä¸æ˜¯æ‰“å°è¾“å‡ºã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1637556310,"ip_address":"","comment_id":322001,"utype":1}],"discussion_count":2,"race_medal":0,"score":6,"product_id":100093501,"comment_content":"è€å¸ˆå¥½ã€‚æˆ‘æ˜¯ go1.16.2 ç‰ˆæœ¬\n\nvar m map[string]int å®šä¹‰åï¼Œ æ‰“å° m , æ˜¯ map[]ï¼Œä¸æ˜¯ nil","like_count":1},{"had_liked":false,"id":335259,"user_name":"1âƒ£ï¸","can_delete":false,"product_type":"c1","uid":1375706,"ip_address":"","ucode":"DDD1B98F90281C","user_header":"https://static001.geekbang.org/account/avatar/00/14/fd/da/7e0f0a02.jpg","comment_is_top":false,"comment_ctime":1645430498,"is_pvip":false,"replies":[{"id":122614,"content":"å—goroutineå¹¶å‘è°ƒåº¦å½±å“ã€‚éå†æ¬¡æ•°è¶Šå¤šï¼Œå‡ºç°å¹¶å‘å†™å¯¼è‡´æŠ›panicçš„æ¦‚ç‡è¶Šå¤§ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1645605549,"ip_address":"","comment_id":335259,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100093501,"comment_content":"è¯·é—®ä¸€ä¸‹ï¼Œä¸ºå•¥éœ€è¦ä¾‹å­ä¸­éœ€è¦éå†1000æ¬¡æ‰èƒ½å‡ºç°å¹¶å‘è¯»å†™çš„é”™è¯¯ï¼Œä½†éå†100æ¬¡ä¸ä¼šï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":552828,"discussion_content":"å—goroutineå¹¶å‘è°ƒåº¦å½±å“ã€‚éå†æ¬¡æ•°è¶Šå¤šï¼Œå‡ºç°å¹¶å‘å†™å¯¼è‡´æŠ›panicçš„æ¦‚ç‡è¶Šå¤§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645605550,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":334370,"user_name":"éƒ­çº¯","can_delete":false,"product_type":"c1","uid":1314521,"ip_address":"","ucode":"2613860B4642C4","user_header":"https://static001.geekbang.org/account/avatar/00/14/0e/d9/e61ce097.jpg","comment_is_top":false,"comment_ctime":1644904100,"is_pvip":false,"replies":[{"id":122145,"content":"æ­£ç¡®âœ…","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1644916006,"ip_address":"","comment_id":334370,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100093501,"comment_content":"å¯ä»¥é€šè¿‡ slice æˆ–è€… æ•°ç»„ é…åˆ map å®ç°ã€‚","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":552828,"discussion_content":"å—goroutineå¹¶å‘è°ƒåº¦å½±å“ã€‚éå†æ¬¡æ•°è¶Šå¤šï¼Œå‡ºç°å¹¶å‘å†™å¯¼è‡´æŠ›panicçš„æ¦‚ç‡è¶Šå¤§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645605550,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":325537,"user_name":"å¼ ç”³å‚²","can_delete":false,"product_type":"c1","uid":1182372,"ip_address":"","ucode":"22D46BC529BA8A","user_header":"https://static001.geekbang.org/account/avatar/00/12/0a/a4/828a431f.jpg","comment_is_top":false,"comment_ctime":1639017510,"is_pvip":false,"replies":[{"id":118606,"content":"æ²¡è¿ç§»å®Œè‚¯å®šä¸ä¼šé‡Šæ”¾ã€‚ä½†æˆ‘è®°å¾—è¿ç§»å¥½åƒä¹Ÿä¸æ˜¯åªè¿ç§»å‘½ä¸­çš„keyã€‚å‘½ä¸­çš„keyè‚¯å®šä¼šè¿ç§»ï¼Œä½†åœ¨ä¸€æ¬¡è¿ç§»è¿‡ç¨‹ä¸­ï¼Œè¿˜ä¼šè¿ç§»å…¶ä»–keyã€‚å…·ä½“ä½ çœ‹ä¸€ä¸‹æºç ç¡®è®¤ä¸€ä¸‹å§ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1639564153,"ip_address":"","comment_id":325537,"utype":1}],"discussion_count":1,"race_medal":2,"score":6,"product_id":100093501,"comment_content":"è€å¸ˆå¥½ï¼Œè¯·æ•™ä¸ªé—®é¢˜ï¼šåœ¨ map è¿›è¡Œè‡ªåŠ¨æ‰©å®¹æ—¶ï¼ŒçœŸæ­£çš„å…ƒç´ è¿ç§»æ˜¯åœ¨ assign å’Œ delete æ—¶é€æ­¥è¿›è¡Œçš„ï¼Œè¿™ä¸ªæˆ‘ç†è§£æ˜¯å°†æ•°æ®è¿ç§»çš„å¼€é”€åˆ†æ‘Šåˆ°å¤šæ¬¡è¯»å†™æ“ä½œä¸­ï¼Œä»¥å‡å°‘æ‰©å®¹æ—¶çš„æ€§èƒ½æŸè€—ã€‚ä½†æ˜¯å¦‚æœæŸäº› key ä¸€ç›´æ²¡æœ‰è¢«è®¿é—®åˆ°ï¼Œé‚£ä¹ˆ oldbuckets æ˜¯ä¸€ç›´ä¸ä¼šé‡Šæ”¾å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":538960,"discussion_content":"æ²¡è¿ç§»å®Œè‚¯å®šä¸ä¼šé‡Šæ”¾ã€‚ä½†æˆ‘è®°å¾—è¿ç§»å¥½åƒä¹Ÿä¸æ˜¯åªè¿ç§»å‘½ä¸­çš„keyã€‚å‘½ä¸­çš„keyè‚¯å®šä¼šè¿ç§»ï¼Œä½†åœ¨ä¸€æ¬¡è¿ç§»è¿‡ç¨‹ä¸­ï¼Œè¿˜ä¼šè¿ç§»å…¶ä»–keyã€‚å…·ä½“ä½ çœ‹ä¸€ä¸‹æºç ç¡®è®¤ä¸€ä¸‹å§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639564153,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":325261,"user_name":"lemon","can_delete":false,"product_type":"c1","uid":2323716,"ip_address":"","ucode":"47626025C55E5E","user_header":"https://static001.geekbang.org/account/avatar/00/23/75/04/d26cd437.jpg","comment_is_top":false,"comment_ctime":1638883526,"is_pvip":false,"replies":[{"id":118591,"content":"ä»æºç ä¸­çœ‹æ˜¯è¿™æ ·ï¼šm := bucketMask(h.B)","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1639560275,"ip_address":"","comment_id":325261,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100093501,"comment_content":"è€å¸ˆï¼Œâ€œæ¯ä¸ª bucket ä¸­å­˜å‚¨çš„æ˜¯ Hash å€¼ä½ bit ä½æ•°å€¼ç›¸åŒçš„å…ƒç´ â€è¿™é‡Œï¼Œåº”è¯¥æ˜¯Hash å€¼ä½ B bit ä½å§?ã€Bæ˜¯æŒ‡hmapä¸­çš„Bã€‘ï¼Œä¹Ÿå°±è½åœ¨å“ªä¸ªbucketé‡Œæ˜¯ç”±Hashå€¼çš„ä½ B bit ä½å†³å®šçš„ï¼Œbucketçš„æ•°é‡ä¹Ÿæ­£å¥½æ˜¯2^Bä¸ªï¼Œæ¯”å¦‚B=3ï¼Œé‚£ä¹ˆHashä¸º...011çš„keyå°±è½åœ¨011=3ä¹Ÿå°±æ˜¯ç´¢å¼•ä¸º3çš„bucketå†…ï¼Œå¦å¤–æœ‰å¼ å›¾é‚£é‡ŒHashå€¼ä¹Ÿä¸æ˜¯å°±åˆ†ä¸ºäº†é«˜ä½åŒºå’Œä½ä½åŒºï¼Œå®é™…ä¸Šé«˜ä½åŒºæ˜¯8ä½ï¼Œä½ä½åŒºæ˜¯Bä½ï¼Œä¸­é—´å¯èƒ½è¿˜æœ‰åˆ«çš„ä½ï¼Œä¸çŸ¥é“ç†è§£çš„å¯¹ä¸å¯¹","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":538939,"discussion_content":"ä»æºç ä¸­çœ‹æ˜¯è¿™æ ·ï¼šm := bucketMask(h.B)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639560276,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":322857,"user_name":"å¤šé€‰å‚æ•°","can_delete":false,"product_type":"c1","uid":1248326,"ip_address":"","ucode":"B2294D80AB075F","user_header":"https://static001.geekbang.org/account/avatar/00/13/0c/46/dfe32cf4.jpg","comment_is_top":false,"comment_ctime":1637635327,"is_pvip":false,"replies":[{"id":117552,"content":"å…¶å®å°±æ˜¯go mapçš„è®¾è®¡å†³å®šäº†æ—¢ä¸èƒ½è·å–valueçš„åœ°å€ï¼Œä¹Ÿä¸èƒ½å¹¶å‘å†™ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1638256132,"ip_address":"","comment_id":322857,"utype":1}],"discussion_count":3,"race_medal":0,"score":6,"product_id":100093501,"comment_content":"é—®é¢˜å†é—®ï¼šgolang ç»“æ„ä½“ä½œä¸º map çš„å…ƒç´ æ—¶ï¼Œä¸èƒ½å¤Ÿç›´æ¥èµ‹å€¼ç»™ç»“æ„ä½“çš„æŸä¸ªå­—æ®µã€‚è¿™ä¸ªä¹Ÿæœ‰â€œGo ä¸å…è®¸è·å– map ä¸­ value çš„åœ°å€â€çš„åŸå› åœ¨å˜›ï¼Ÿå‡å¦‚è¿™æ ·çš„è¯ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆè¯»ç»“æ„ä½“ä¸­çš„æŸä¸ªå­—æ®µæ˜¯å¯ä»¥çš„ï¼Ÿå› ä¸ºè¯»å’Œå†™ç»“æ„ä½“ä¸­æŸä¸ªå­—æ®µçš„æ—¶å€™éƒ½ä¼šæ¶‰åŠåˆ°è·å– map ä¸­ value çš„åœ°å€ï¼Œè€Œæ­¤æ—¶è¯»æ“ä½œæ˜¯å…è®¸çš„ï¼Œè€Œå†™æ“ä½œæ˜¯ä¸å…è®¸çš„ã€‚æœ‰æ²¡æœ‰å¯èƒ½æ˜¯å› ä¸º map ä¸æ”¯æŒå¹¶å‘ï¼Œå‡å¦‚æ˜¯å†™æ“ä½œçš„è¯ï¼Œä¼šå­˜åœ¨ä¸€äº›å¹¶å‘å¸¦æ¥çš„é—®é¢˜ï¼Œè€Œè¯»æ“ä½œä¸å­˜åœ¨è¿™äº›é—®é¢˜ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":534674,"discussion_content":"å…¶å®å°±æ˜¯go mapçš„è®¾è®¡å†³å®šäº†æ—¢ä¸èƒ½è·å–valueçš„åœ°å€ï¼Œä¹Ÿä¸èƒ½å¹¶å‘å†™ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638256132,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2323716,"avatar":"https://static001.geekbang.org/account/avatar/00/23/75/04/d26cd437.jpg","nickname":"lemon","note":"","ucode":"47626025C55E5E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":536866,"discussion_content":"&#34;ä¸èƒ½è·å–valueçš„åœ°å€&#34;ä¼šä¸ä¼šæ˜¯å› ä¸ºè®¾è®¡è€…ä¸æƒ³è®©æˆ‘ä»¬ç”¨è¿™ä¸ªåœ°å€å€¼å»è¿›è¡Œè¿ç®—ä¹‹ç±»çš„åŠ¨ä½œå•Šï¼Œè¿™æ ·çš„è¯ï¼Œä¹‹åæ‰©å®¹çš„æ—¶å€™valueçš„å€¼å˜äº†ï¼Œå°±ä¼šå½±å“åˆ°ä»£ç çš„ç»“æœ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638883016,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1248326,"avatar":"https://static001.geekbang.org/account/avatar/00/13/0c/46/dfe32cf4.jpg","nickname":"å¤šé€‰å‚æ•°","note":"","ucode":"B2294D80AB075F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2323716,"avatar":"https://static001.geekbang.org/account/avatar/00/23/75/04/d26cd437.jpg","nickname":"lemon","note":"","ucode":"47626025C55E5E","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":537120,"discussion_content":"ä½†æ˜¯è¯»å–çš„è¯ä¸ä¹Ÿæ˜¯æ‹¿åˆ°äº†é‚£ä¸ªåœ°å€ï¼Œç„¶åå–å€¼çš„å˜›ï¼Ÿæˆ‘è§‰å¾—æ˜¯å¹¶å‘çš„åŸå› ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638961570,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":536866,"ip_address":"","group_id":0},"score":537120,"extra":""}]}]},{"had_liked":false,"id":322750,"user_name":"å¸ƒå‡¡","can_delete":false,"product_type":"c1","uid":1202465,"ip_address":"","ucode":"346FCD332F8BFA","user_header":"https://static001.geekbang.org/account/avatar/00/12/59/21/d2efde18.jpg","comment_is_top":false,"comment_ctime":1637573810,"is_pvip":false,"replies":[{"id":117599,"content":"1. æ–‡ä¸­çš„è¡¨é‡Œæœ‰ 2^B=bucketæ•°é‡\n2. å·®ä¸å¤šã€‚ç»†èŠ‚è¿˜å¾—å»é˜…è¯»ä»£ç ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1638281530,"ip_address":"","comment_id":322750,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100093501,"comment_content":"\nmap.go æºç åœ°å€\nhttps:&#47;&#47;github.com&#47;golang&#47;go&#47;blob&#47;master&#47;src&#47;runtime&#47;map.go\n \n è€å¸ˆè¯·é—®ï¼Œ\n 1ã€buckets[2^B-1]å¯¹åº”Bçš„å–å€¼èŒƒå›´æ˜¯ä¸æ˜¯[0,1,2â€¦â€¦n),nçš„å€¼åº”è¯¥æ˜¯å¤šå°‘å‘¢ï¼Ÿ\n 2ã€buckets[0]å¯¹åº”çš„æ˜¯key[0â€¦7]ï¼Œ å½“buckets[0]å®¹é‡ä¸å¤Ÿæ—¶ bucket æ˜¯ä¸æ˜¯ä¸€ç›´æ ¹æ®2å€é€Ÿåº¦å¢æ¶¨ï¼Œå³ buckets[1]å¯¹åº”çš„å°±æ˜¯key[0â€¦15]ï¼Œbuckets[2]å¯¹åº”çš„key[0â€¦31]ã€‚\n ä¸€ç›´åˆ°count&gt;LoadFactoræ—¶åº”è¯¥å°±æ˜¯6.5*å‰ä¸€ä¸ªbucketçš„å®¹é‡ï¼Œæ˜¯è¿™æ ·å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":534803,"discussion_content":"1. æ–‡ä¸­çš„è¡¨é‡Œæœ‰ 2^B=bucketæ•°é‡\n2. å·®ä¸å¤šã€‚ç»†èŠ‚è¿˜å¾—å»é˜…è¯»ä»£ç ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638281530,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":322348,"user_name":"lesserror","can_delete":false,"product_type":"c1","uid":1351076,"ip_address":"","ucode":"25A54D1165FCF6","user_header":"https://static001.geekbang.org/account/avatar/00/14/9d/a4/e481ae48.jpg","comment_is_top":false,"comment_ctime":1637312553,"is_pvip":false,"replies":[{"id":117173,"content":"1. å¼•ç”¨å±‚æ¬¡å¤ªæ·±ï¼Œæ‰€ä»¥ç”¨äº†ä¼ªä»£ç å½¢å¼çš„ç®€å†™ã€‚å°±æ˜¯è¯´hashå‡½æ•°å­˜æ”¾åœ¨maptypeç±»å‹ä¸­çš„keyå­—æ®µçš„algå­—æ®µä¸­çš„hashå­—æ®µä¸­ï¼Œkeyæ˜¯hashå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œæ˜¯å¾…hashçš„å­—æ®µã€‚ç¬¬äºŒä¸ªå‚æ•°æ˜¯ç§å­(hmap.hash0å°±æ˜¯ç§å­)ã€‚go 1.17ä¸­è¿™å—çš„ç»„æˆå‘ç”Ÿäº†ä¸€äº›å˜åŒ–ã€‚è¿™ä¸ªhashå‡½æ•°ç›´æ¥æ”¾åœ¨maptypeçš„hasherå­—æ®µä¸­äº†ã€‚ä½†åŸç†åº”è¯¥æ²¡æœ‰å˜ã€‚\n\n2. var m map[string]int &amp;#47;&amp;#47; m = nil  ä½ è¯´çš„æ˜¯è¿™é‡Œä¹ˆï¼Ÿè¿™é‡Œåé¢æ³¨é‡Šä¸­ä¸æ˜¯æ‰“å°è¾“å‡ºï¼Œè€Œæ˜¯æŒ‡ mä¸ºnilã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1637566820,"ip_address":"","comment_id":322348,"utype":1}],"discussion_count":4,"race_medal":0,"score":6,"product_id":100093501,"comment_content":"Tony Bai è€å¸ˆï¼Œéº»çƒ¦æœ‰æ—¶é—´å›å¤ä¸€ä¸‹ä»¥ä¸‹å‡ ä¸ªé—®é¢˜ï¼š\n\n1. æ–‡ä¸­è¯´ï¼š â€œmap æ‰€ç”¨çš„ hash å‡½æ•°ä¹Ÿå­˜æ”¾åœ¨ maptype.key.alg.hash(key, hmap.hash0) ä¸­ã€‚â€ åé¢çš„è¿™ä¸€ä¸²ï¼šâ€œmaptype.key.alg.hash(key, hmap.hash0) â€ æ˜¯ä»€ä¹ˆï¼Ÿ çœ‹çš„æœ‰ç‚¹æ‡µã€‚\n\n2. ä¸ç®¡æ˜¯ä½¿ç”¨å­—é¢å€¼ è¿˜æ˜¯ç”¨ makeå‡½æ•°åˆå§‹åŒ– mapç±»å‹å˜é‡ï¼Œæ‰“å°å˜é‡åï¼Œéƒ½æ˜¯è¾“å‡ºçš„ map[] è€Œä¸æ˜¯ nil ï¼Œè¿™ä¸ªè¾“å‡ºæ˜¯æ­£å¸¸çš„å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1896658,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/f0/d2/6f8c7d72.jpg","nickname":";","note":"","ucode":"28C2B95415BBF7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":531971,"discussion_content":"ç¬¬äºŒä¸ªé—®é¢˜æ„Ÿè§‰æ˜¯Goè¯­è¨€ä¸­ä¸èƒ½æ‰“å°nilå‡ºæ¥ï¼Œæˆ‘è¯•äº†ä¸€ä¸‹sliceä¹Ÿæ˜¯ç›´æ¥æ‰“å°ä¸€ä¸ª[]ï¼Œè€Œä¸æ˜¯nilï¼Œå¯ä»¥ä½¿ç”¨ifè¯­å¥æ¥åˆ¤åˆ«æ˜¯ä¸æ˜¯nil","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1637486049,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":1,"child_discussions":[{"author":{"id":1351076,"avatar":"https://static001.geekbang.org/account/avatar/00/14/9d/a4/e481ae48.jpg","nickname":"lesserror","note":"","ucode":"25A54D1165FCF6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1896658,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/f0/d2/6f8c7d72.jpg","nickname":";","note":"","ucode":"28C2B95415BBF7","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":532061,"discussion_content":"æ„Ÿè§‰æ˜¯è¿™æ ·çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637507055,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":531971,"ip_address":"","group_id":0},"score":532061,"extra":"{\"user_type\":1}"}]},{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":532282,"discussion_content":"1. å¼•ç”¨å±‚æ¬¡å¤ªæ·±ï¼Œæ‰€ä»¥ç”¨äº†ä¼ªä»£ç å½¢å¼çš„ç®€å†™ã€‚å°±æ˜¯è¯´hashå‡½æ•°å­˜æ”¾åœ¨maptypeç±»å‹ä¸­çš„keyå­—æ®µçš„algå­—æ®µä¸­çš„hashå­—æ®µä¸­ï¼Œkeyæ˜¯hashå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œæ˜¯å¾…hashçš„å­—æ®µã€‚ç¬¬äºŒä¸ªå‚æ•°æ˜¯ç§å­(hmap.hash0å°±æ˜¯ç§å­)ã€‚go 1.17ä¸­è¿™å—çš„ç»„æˆå‘ç”Ÿäº†ä¸€äº›å˜åŒ–ã€‚è¿™ä¸ªhashå‡½æ•°ç›´æ¥æ”¾åœ¨maptypeçš„hasherå­—æ®µä¸­äº†ã€‚ä½†åŸç†åº”è¯¥æ²¡æœ‰å˜ã€‚\n\n2. var m map[string]int &amp;#47;&amp;#47; m = nil  ä½ è¯´çš„æ˜¯è¿™é‡Œä¹ˆï¼Ÿè¿™é‡Œåé¢æ³¨é‡Šä¸­ä¸æ˜¯æ‰“å°è¾“å‡ºï¼Œè€Œæ˜¯æŒ‡ mä¸ºnilã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1637566820,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1603004,"avatar":"https://static001.geekbang.org/account/avatar/00/18/75/bc/89d88775.jpg","nickname":"Calvin","note":"","ucode":"0EEF5B207623B5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":532094,"discussion_content":"ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘åœ¨ go 1.17.3 ä¸­å‘ç°æ˜¯å¤šäº†ä¸€ä¸ªå±æ€§ hasherï¼Œä¸æ˜¯è€å¸ˆè¿™é‡Œè¯´çš„è¿™æ ·äº†ï¼Œçœ‹æ–‡ç« ä¸­ç¬”è®°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637512309,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":322198,"user_name":"AlexWillBeGood","can_delete":false,"product_type":"c1","uid":1505492,"ip_address":"","ucode":"6D7BB91781E38C","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/exfIUlVdCpicQPc7fOI6XezUuXd7rayRia7sB2GGHGP7IEBibI6TJbQS2R0bMNejzR1odAIDFP05cWjujrmbIzzwg/132","comment_is_top":false,"comment_ctime":1637230060,"is_pvip":false,"replies":[{"id":117162,"content":"çœ‹å®Œç¬¬17è®²ï¼Œä½ å°±æœ‰æ€è·¯äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1637564760,"ip_address":"","comment_id":322198,"utype":1}],"discussion_count":4,"race_medal":0,"score":6,"product_id":100093501,"comment_content":"è€å¸ˆï¼Œæœ‰ä¸€ç‚¹æˆ‘ä¸æ˜ç™½ï¼Œä¸ºä»€ä¹ˆkv ç´§é‚»å­˜å‚¨çš„æ—¶å€™ä¸€å®šéœ€è¦Paddingï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":532262,"discussion_content":"çœ‹å®Œç¬¬17è®²ï¼Œä½ å°±æœ‰æ€è·¯äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637564760,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1263587,"avatar":"","nickname":"Celebi","note":"","ucode":"443499E71435E7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":531210,"discussion_content":"çœ‹CSAPPè¿™æœ¬ä¹¦ã€‚cpuæ˜¯æŒ‰å­—é•¿è¯»æ•°æ®çš„ï¼Œå†…å­˜å¯¹é½cpuæ•ˆç‡é«˜","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1637247790,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2119325,"avatar":"https://static001.geekbang.org/account/avatar/00/20/56/9d/4b2a7d29.jpg","nickname":"ryanxw","note":"","ucode":"0B91EAC8D06EED","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":563798,"discussion_content":"cpuå¯¹é½åŸåˆ™","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650079949,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1505492,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/exfIUlVdCpicQPc7fOI6XezUuXd7rayRia7sB2GGHGP7IEBibI6TJbQS2R0bMNejzR1odAIDFP05cWjujrmbIzzwg/132","nickname":"AlexWillBeGood","note":"","ucode":"6D7BB91781E38C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":531340,"discussion_content":"å¤šè°¢ ä¸‹ä¸€è¯¾å¥½åƒç»™å‡ºäº†ç­”æ¡ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637289302,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":322066,"user_name":"é…¥å®è¯ä¸å¤š","can_delete":false,"product_type":"c1","uid":2564698,"ip_address":"","ucode":"3B9BF256682504","user_header":"https://static001.geekbang.org/account/avatar/00/27/22/5a/873ac981.jpg","comment_is_top":false,"comment_ctime":1637154321,"is_pvip":false,"replies":[{"id":117144,"content":"ç¬”è¯¯ï¼Œå·²æ”¹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1637558269,"ip_address":"","comment_id":322066,"utype":1}],"discussion_count":2,"race_medal":0,"score":6,"product_id":100093501,"comment_content":"è¿™é‡Œ p æ‹¿åˆ°çš„ä¸æ˜¯åœ°å€ï¼Œè€Œæ˜¯ key å¯¹åº”çš„ value ","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":532218,"discussion_content":"ç¬”è¯¯ï¼Œå·²æ”¹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637558269,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1351076,"avatar":"https://static001.geekbang.org/account/avatar/00/14/9d/a4/e481ae48.jpg","nickname":"lesserror","note":"","ucode":"25A54D1165FCF6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":531435,"discussion_content":"å—¯ï¼Ÿ æ²¡æ‡‚ä½ çš„æ„æ€ï¼Œè€å¸ˆè¡¨è¿°æœ‰é—®é¢˜ä¹ˆï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637311319,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":322001,"user_name":"Geek_0b92d9","can_delete":false,"product_type":"c1","uid":2835237,"ip_address":"","ucode":"9212443F63B64B","user_header":"","comment_is_top":false,"comment_ctime":1637133341,"is_pvip":false,"replies":[{"id":117139,"content":"var m map[string]int &amp;#47;&amp;#47; m = nil æ³¨é‡Šä¸­çš„m = nil æ˜¯æç¤ºmçš„å€¼ä¸ºnilï¼Œä¸æ˜¯æ‰“å°è¾“å‡ºã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1637556310,"ip_address":"","comment_id":322001,"utype":1}],"discussion_count":2,"race_medal":0,"score":6,"product_id":100093501,"comment_content":"è€å¸ˆå¥½ã€‚æˆ‘æ˜¯ go1.16.2 ç‰ˆæœ¬\n\nvar m map[string]int å®šä¹‰åï¼Œ æ‰“å° m , æ˜¯ map[]ï¼Œä¸æ˜¯ nil","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":534803,"discussion_content":"1. æ–‡ä¸­çš„è¡¨é‡Œæœ‰ 2^B=bucketæ•°é‡\n2. å·®ä¸å¤šã€‚ç»†èŠ‚è¿˜å¾—å»é˜…è¯»ä»£ç ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638281530,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":321965,"user_name":"liaomars","can_delete":false,"product_type":"c1","uid":2104856,"ip_address":"","ucode":"4FCA97EE9FB57D","user_header":"https://static001.geekbang.org/account/avatar/00/20/1e/18/9d1f1439.jpg","comment_is_top":false,"comment_ctime":1637119071,"is_pvip":false,"replies":[{"id":117137,"content":"æ˜¯çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1637556007,"ip_address":"","comment_id":321965,"utype":1}],"discussion_count":4,"race_medal":0,"score":7,"product_id":100093501,"comment_content":"è€å¸ˆï¼šå‡½æ•°ç±»å‹ã€map ç±»å‹è‡ªèº«ï¼Œä»¥åŠåˆ‡ç‰‡ç±»å‹æ˜¯ä¸èƒ½ä½œä¸º map çš„ key ç±»å‹çš„ã€‚\nè¿™ä¸ªæ˜¯ä¸æ˜¯å¯ä»¥ç†è§£æˆï¼šå‡½æ•°ç±»å‹ï¼Œmapç±»å‹ï¼Œåˆ‡ç‰‡ç±»å‹æ˜¯ä¸èƒ½åšä¸ºkeyçš„ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":532205,"discussion_content":"æ˜¯çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637556007,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1121758,"avatar":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","nickname":"aoe","note":"","ucode":"1C6201EDB4E954","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":530675,"discussion_content":"æ­£å¸¸äººä¹Ÿä¸ä¼šæ‹¿è¿™äº›æ•°æ®ç»“æ„åšKeyå‘€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637123351,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":2,"child_discussions":[{"author":{"id":1603004,"avatar":"https://static001.geekbang.org/account/avatar/00/18/75/bc/89d88775.jpg","nickname":"Calvin","note":"","ucode":"0EEF5B207623B5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1121758,"avatar":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","nickname":"aoe","note":"","ucode":"1C6201EDB4E954","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":532095,"discussion_content":"å¦‚æœæˆ‘æƒ³å®ç°ç±»ä¼¼ java çš„ Map&lt;Map&lt;String, Object&gt;&gt; ç±»å‹å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637512411,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":530675,"ip_address":"","group_id":0},"score":532095,"extra":"{\"user_type\":1}"},{"author":{"id":1121758,"avatar":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","nickname":"aoe","note":"","ucode":"1C6201EDB4E954","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1603004,"avatar":"https://static001.geekbang.org/account/avatar/00/18/75/bc/89d88775.jpg","nickname":"Calvin","note":"","ucode":"0EEF5B207623B5","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":532098,"discussion_content":"ä½ è¿™ä¸ªå¤–é¢æ˜¯Setå§ï¼Ÿè®¡ç®—æœºä¸­ä»»ä½•é—®é¢˜éƒ½å¯ä»¥é€šè¿‡ä¸€ä¸ªä¸­é—´å±‚è§£å†³ï¼Œè¯•è¯•çœ‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637512989,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":532095,"ip_address":"","group_id":0},"score":532098,"extra":"{\"user_type\":1}"}]}]},{"had_liked":false,"id":321939,"user_name":"Badb0y","can_delete":false,"product_type":"c1","uid":1022861,"ip_address":"","ucode":"7CF859100B53F8","user_header":"https://static001.geekbang.org/account/avatar/00/0f/9b/8d/784ca17e.jpg","comment_is_top":false,"comment_ctime":1637113749,"is_pvip":false,"replies":[{"id":117135,"content":"âœ…","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1637555971,"ip_address":"","comment_id":321939,"utype":1}],"discussion_count":1,"race_medal":0,"score":7,"product_id":100093501,"comment_content":"å¯ä»¥å¯¹KEYæ’åºåå†éå†","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":532203,"discussion_content":"âœ…","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637555971,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":394778,"user_name":"Geek_ab5640","can_delete":false,"product_type":"c1","uid":3920769,"ip_address":"å¹¿ä¸œ","ucode":"F60F4BB5C82636","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/F08j9niaVZyib2qzG6nvkd6wMia8d2hD5a6pepdtSiaEAJp9TRwTqxPvh6mhokxleIqqjyJrTEMnxMzPnDB05yuBnBnAFaDib2BdBicJOBibdr9LPA/132","comment_is_top":false,"comment_ctime":1728313655,"is_pvip":false,"replies":[{"id":143299,"content":"å—¯ï¼Œè¦è€ƒè™‘å†…å­˜å¯¹é½ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1728440933,"ip_address":"åŒ—äº¬","comment_id":394778,"utype":1}],"discussion_count":1,"race_medal":0,"score":7,"product_id":100093501,"comment_content":"valueå­˜å‚¨åŒºåŸŸï¼Œé‡Œè¾¹è®²åˆ°äº†kvç´§é‚»æ–¹æ¡ˆï¼Œkey1ä¸ªå­—èŠ‚ï¼Œvalueä¸º8ä¸ªå­—èŠ‚ï¼Œä¸ºä»€ä¹ˆè¿˜è¦å¡«å……å‡‘åˆ°16ä¸ªå­—èŠ‚å‘¢ï¼Œæ˜¯ä¸æ˜¯æœ‰ä»€ä¹ˆé™åˆ¶ï¼Œéœ€è¦æ»¡è¶³8çš„æ•´æ•°å€ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":652146,"discussion_content":"å—¯ï¼Œè¦è€ƒè™‘å†…å­˜å¯¹é½ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1728440933,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":390280,"user_name":"å‘æ¡æ©™","can_delete":false,"product_type":"c1","uid":3875922,"ip_address":"ä¸Šæµ·","ucode":"F52E4EB1F9A3C9","user_header":"https://static001.geekbang.org/account/avatar/00/3b/24/52/4e1f33d0.jpg","comment_is_top":false,"comment_ctime":1714979334,"is_pvip":false,"replies":[{"id":142010,"content":"è¿™æ˜¯æ–‡ä¸­çš„å“ªè¡Œä»£ç ï¼Ÿæˆ‘å’‹æ²¡æ‰¾åˆ°å‘¢ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1715262475,"ip_address":"è¾½å®","comment_id":390280,"utype":1}],"discussion_count":1,"race_medal":0,"score":7,"product_id":100093501,"comment_content":"_, ok := m1[2]\n\næç¤ºï¼š no new variables on left side of :=\n\n","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":644471,"discussion_content":"è¿™æ˜¯æ–‡ä¸­çš„å“ªè¡Œä»£ç ï¼Ÿæˆ‘å’‹æ²¡æ‰¾åˆ°å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1715262475,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"è¾½å®","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":382583,"user_name":"çˆ±åƒèƒ¡èåœ","can_delete":false,"product_type":"c1","uid":1459413,"ip_address":"å¹¿ä¸œ","ucode":"35FCF84D1E04C5","user_header":"https://static001.geekbang.org/account/avatar/00/16/44/d5/ca522e83.jpg","comment_is_top":false,"comment_ctime":1697611742,"is_pvip":false,"replies":[{"id":139512,"content":"go mapå¯¹keyè¿›è¡Œhashåå¾—åˆ°hash_valueã€‚hash_valueçš„ä½ä½åŒºç”¨äºé€‰æ¡¶(bucket)ï¼Œè¿›å…¥åˆ°ä¸€ä¸ªbucketä¸­çš„keyç†è®ºä¸Šéƒ½æ˜¯â€œç¢°æ’çš„â€ã€‚go mapä½¿ç”¨hash_valueä¸­çš„é«˜ä½å€¼åœ¨bucketçš„tophashåŒºè¿›è¡Œé€ä¸ªå€¼æ¯”å¯¹ï¼Œå¯¹Tophashç›¸åŒçš„é¡¹ï¼Œå†å»å¯¹æ¯”keyæ˜¯å¦ç›¸åŒã€‚ç›¸åŒå³æ‰¾åˆ°ã€‚å¦åˆ™ç»§ç»­æ‰¾ä¸‹ä¸€ä¸ªtophashã€‚bucketä¸­æœ€å¤§çš„keyæ•°é‡æ§åˆ¶åœ¨8ä¸ªï¼Œä¹Ÿå°±æ˜¯æœ€å¤š8æ¬¡tophashæ¯”è¾ƒã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1698371893,"ip_address":"è¾½å®","comment_id":382583,"utype":1}],"discussion_count":1,"race_medal":0,"score":7,"product_id":100093501,"comment_content":"æˆ‘æƒ³é—®ä¸‹è€å¸ˆè¿™é‡Œgoè¯­è¨€æ˜¯å¦‚ä½•é¿å…hashç¢°æ’ï¼ŒæŒ‰ç…§æˆ‘çš„ç†è§£mapåˆå§‹åŒ–æ—¶å€™æ¡¶å­çš„å®¹é‡å’Œæ•°é‡æ˜¯æœ‰é™çš„ï¼Œé‚£è¿™ç§æƒ…å†µ ç¬¬ä¸€å¦‚ä½•é¿å…ç®—å‡ºæ¥çš„hashä¸€è‡´è¿™ç§æƒ…å†µäº§ç”Ÿ(æ¯”å¦‚æ•´ä½“å®¹é‡åªæœ‰64ï¼Œéœ€è¦å­˜65ä¸ªæ•°è¿™ç§ï¼Œ è¿˜æœ‰å°±æ˜¯è™½ç„¶åªéœ€è¦å­˜63ä¸ªæ•°ï¼Œä½†æ˜¯ç¬¬63ä¸ªæ•°çš„æ—¶å€™å‘ç°å®ƒçš„ä½ç½®å·²ç»è¢«å…¶ä»–æ•°å æ®äº†)ï¼Œç¬¬äºŒå¦‚æœå‘ç”Ÿäº†å®ƒæ˜¯æ€ä¹ˆå¤„ç†çš„ï¼Œæˆ‘è®°å¾—ä»¥å‰çœ‹è¿‡ä¸€ä¸ªç»“æ„é‡Œé¢è¯´çš„æ˜¯æŒ‚åœ¨å‰ä¸€ä¸ªå€¼çš„åé¢ï¼Œè¿™æ ·å½¢æˆäº†ä¸€ä¸ªé“¾è¡¨ç»“æ„ï¼Œä½†æ ¹æ®è¿™ç¯‡æ–‡ç« æ¥çœ‹æ˜¾ç„¶ä¸æ˜¯è¿™ä¹ˆå¤„ç†çš„ã€‚","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":630366,"discussion_content":"go mapå¯¹keyè¿›è¡Œhashåå¾—åˆ°hash_valueã€‚hash_valueçš„ä½ä½åŒºç”¨äºé€‰æ¡¶(bucket)ï¼Œè¿›å…¥åˆ°ä¸€ä¸ªbucketä¸­çš„keyç†è®ºä¸Šéƒ½æ˜¯â€œç¢°æ’çš„â€ã€‚go mapä½¿ç”¨hash_valueä¸­çš„é«˜ä½å€¼åœ¨bucketçš„tophashåŒºè¿›è¡Œé€ä¸ªå€¼æ¯”å¯¹ï¼Œå¯¹Tophashç›¸åŒçš„é¡¹ï¼Œå†å»å¯¹æ¯”keyæ˜¯å¦ç›¸åŒã€‚ç›¸åŒå³æ‰¾åˆ°ã€‚å¦åˆ™ç»§ç»­æ‰¾ä¸‹ä¸€ä¸ªtophashã€‚bucketä¸­æœ€å¤§çš„keyæ•°é‡æ§åˆ¶åœ¨8ä¸ªï¼Œä¹Ÿå°±æ˜¯æœ€å¤š8æ¬¡tophashæ¯”è¾ƒã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1698371893,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"è¾½å®","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":375785,"user_name":"111","can_delete":false,"product_type":"c1","uid":2046189,"ip_address":"åŒ—äº¬","ucode":"7ACA555BDC139B","user_header":"","comment_is_top":false,"comment_ctime":1685965603,"is_pvip":false,"replies":[{"id":137149,"content":"âœ…","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1686093344,"ip_address":"è¾½å®","comment_id":375785,"utype":1}],"discussion_count":1,"race_medal":0,"score":7,"product_id":100093501,"comment_content":"æƒ³è¦ç¨³å®šæ¬¡åºéå†ï¼Œå¯ä»¥ç”¨sliceæ¥å­˜å‚¨keyçš„é¡ºåºï¼Œç”¨mapæ¥å­˜å‚¨æ˜ å°„","like_count":0},{"had_liked":false,"id":322619,"user_name":"Calvin","can_delete":false,"product_type":"c1","uid":1603004,"ip_address":"","ucode":"0EEF5B207623B5","user_header":"https://static001.geekbang.org/account/avatar/00/18/75/bc/89d88775.jpg","comment_is_top":false,"comment_ctime":1637501917,"is_pvip":false,"replies":[{"id":117159,"content":"ä½ æ˜¯å¯¹çš„ï¼Œæ„Ÿè°¢æé†’ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1637563080,"ip_address":"","comment_id":322619,"utype":1}],"discussion_count":1,"race_medal":0,"score":7,"product_id":100093501,"comment_content":"è€å¸ˆï¼Œâ€œé»˜è®¤çš„å…ƒç´ ä¸ªæ•°ä¸º BUCKETSIZEâ€ çš„å€¼åº”è¯¥æ˜¯åœ¨ $GOROOT&#47;src&#47;cmd&#47;compile&#47;internal&#47;reflectdata&#47;reflect.go ä¸­å®šä¹‰ã€‚\nPSï¼šæˆ‘çš„ go ç‰ˆæœ¬æ˜¯ 1.17.3 (mac intel)ã€‚","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":532205,"discussion_content":"æ˜¯çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637556007,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1121758,"avatar":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","nickname":"aoe","note":"","ucode":"1C6201EDB4E954","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":530675,"discussion_content":"æ­£å¸¸äººä¹Ÿä¸ä¼šæ‹¿è¿™äº›æ•°æ®ç»“æ„åšKeyå‘€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637123351,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":2,"child_discussions":[{"author":{"id":1603004,"avatar":"https://static001.geekbang.org/account/avatar/00/18/75/bc/89d88775.jpg","nickname":"Calvin","note":"","ucode":"0EEF5B207623B5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1121758,"avatar":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","nickname":"aoe","note":"","ucode":"1C6201EDB4E954","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":532095,"discussion_content":"å¦‚æœæˆ‘æƒ³å®ç°ç±»ä¼¼ java çš„ Map&lt;Map&lt;String, Object&gt;&gt; ç±»å‹å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637512411,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":530675,"ip_address":"","group_id":0},"score":532095,"extra":"{\"user_type\":1}"},{"author":{"id":1121758,"avatar":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","nickname":"aoe","note":"","ucode":"1C6201EDB4E954","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1603004,"avatar":"https://static001.geekbang.org/account/avatar/00/18/75/bc/89d88775.jpg","nickname":"Calvin","note":"","ucode":"0EEF5B207623B5","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":532098,"discussion_content":"ä½ è¿™ä¸ªå¤–é¢æ˜¯Setå§ï¼Ÿè®¡ç®—æœºä¸­ä»»ä½•é—®é¢˜éƒ½å¯ä»¥é€šè¿‡ä¸€ä¸ªä¸­é—´å±‚è§£å†³ï¼Œè¯•è¯•çœ‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637512989,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":532095,"ip_address":"","group_id":0},"score":532098,"extra":"{\"user_type\":1}"}]}]},{"had_liked":false,"id":321982,"user_name":"ç½—æ°","can_delete":false,"product_type":"c1","uid":1320487,"ip_address":"","ucode":"96BAFAA147341F","user_header":"https://static001.geekbang.org/account/avatar/00/14/26/27/eba94899.jpg","comment_is_top":false,"comment_ctime":1637126423,"is_pvip":false,"replies":null,"discussion_count":11,"race_medal":0,"score":7,"product_id":100093501,"comment_content":"è¿˜æƒ³æ·±å…¥ç ”ç©¶ map çš„å°ä¼™ä¼´ï¼Œå¯ä»¥å»ç ”ç©¶è¿™äº›åšå®¢ï¼š\nhttps:&#47;&#47;www.qcrao.com&#47;2019&#47;05&#47;22&#47;dive-into-go-map&#47;   \nhttps:&#47;&#47;qcrao.com&#47;2020&#47;05&#47;06&#47;dive-into-go-sync-map&#47;\nhttps:&#47;&#47;draveness.me&#47;golang&#47;docs&#47;part2-foundation&#47;ch03-datastructure&#47;golang-hashmap&#47;","like_count":38,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":532203,"discussion_content":"âœ…","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637555971,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":322090,"user_name":"Darren","can_delete":false,"product_type":"c1","uid":1254968,"ip_address":"","ucode":"CCD2B2C492BE9A","user_header":"https://static001.geekbang.org/account/avatar/00/13/26/38/ef063dc2.jpg","comment_is_top":false,"comment_ctime":1637161765,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":7,"product_id":100093501,"comment_content":"å¯ä»¥å‚è€ƒjavaçš„LinkedHashMap,èƒ½å®ç°æ’å…¥æœ‰åºæˆ–è€…è®¿é—®æœ‰åºï¼Œå°±æ˜¯ä½¿ç”¨é¢å¤–çš„é“¾è¡¨æ¥ä¿å­˜é¡ºåºã€‚\ngo ä¸­å¯ä»¥åŸºäºcontainer&#47;listæ¥å®ç°ã€‚githubä¸Šç°æˆçš„åŠŸèƒ½ã€‚\nhttps:&#47;&#47;github.com&#47;elliotchance&#47;orderedmap","like_count":8},{"had_liked":false,"id":321999,"user_name":"return","can_delete":false,"product_type":"c1","uid":1135528,"ip_address":"","ucode":"42B8A3380DF04B","user_header":"https://static001.geekbang.org/account/avatar/00/11/53/a8/abc96f70.jpg","comment_is_top":false,"comment_ctime":1637132794,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":7,"product_id":100093501,"comment_content":"è€å¸ˆè®²çš„å¤ªå¥½äº†ï¼Œ","like_count":2,"discussions":[{"author":{"id":2720810,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/xfclWEPQ7szTZnKqnX9icSbgDWV0VAib3Cyo8Vg0OG3Usby88ic7ZgO2ho5lj0icOWI4JeJ70zUBiaTW1xh1UCFRPqA/132","nickname":"Geek_6bdb4e","note":"","ucode":"2953D400AA5385","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582655,"discussion_content":"ç¬¬ä¸€ç¯‡æ¢äº†è¿™ä¸ªåœ°å€äº†https://golang.design/go-questions/map/principal/","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1659579263,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1910824,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/28/28/5dd38c93.jpg","nickname":"é£é‡‡ä¾æ—§é£˜","note":"","ucode":"EAF86CD80E3020","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":620213,"discussion_content":"mark\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1685954604,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"é‡åº†","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":3554552,"avatar":"","nickname":"Geek_gofzw","note":"","ucode":"F5DFB1622C80BE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":609129,"discussion_content":"m","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1678845752,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1006424,"avatar":"","nickname":"Geek_xbye50","note":"","ucode":"0BF3780C247F22","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":595295,"discussion_content":"mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1669903022,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ç¦å»º","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1473123,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJiartmgOY37cwbdbsX7j6EGic3SMfDLqCVBFS9HEs7IA1icVovzMtSiaxiaic6GOpl4cyvDdrqgK3rU4icA/132","nickname":"Geek_097a1e","note":"","ucode":"ED0A3C047E1B98","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":586974,"discussion_content":"M","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662635764,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å®‰å¾½","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1111176,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f4/88/133bc14b.jpg","nickname":"c340","note":"","ucode":"D64CC3DDD09A0F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585769,"discussion_content":"mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661819291,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ç¦å»º","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1637228,"avatar":"https://static001.geekbang.org/account/avatar/00/18/fb/6c/12fdc372.jpg","nickname":"è¿ˆå‘æ¶æ„å¸ˆ","note":"","ucode":"2476594CF76001","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":578660,"discussion_content":"å‰2ç¯‡404äº†ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656927690,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1156153,"avatar":"https://static001.geekbang.org/account/avatar/00/11/a4/39/a3e452cd.jpg","nickname":"a115","note":"","ucode":"0C733004371E29","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":575845,"discussion_content":"m","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655135834,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1886796,"avatar":"","nickname":"å¼ æ¯…","note":"","ucode":"0707311786C079","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":573121,"discussion_content":"m","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1653211221,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1519200,"avatar":"https://static001.geekbang.org/account/avatar/00/17/2e/60/4fa1f3bd.jpg","nickname":"rså‹¿å¿˜åˆå¿ƒ","note":"","ucode":"557D1ECD757195","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":546492,"discussion_content":"æ·±å…¥ç ”ç©¶ mapçš„ç¬”è®°ï¼Œmarkä¸€ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642318582,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1936087,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/8a/d7/daabec34.jpg","nickname":"tequ1lAneio","note":"","ucode":"41336E87FF2E1A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":531581,"discussion_content":"çœ‹äº†ç¬¬ä¸€ç¯‡ï¼ŒçœŸçš„æ£’ï¼Œèµä¸€ä¸ª","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637335591,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":3,"extra":"{\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":321965,"user_name":"liaomars","can_delete":false,"product_type":"c1","uid":2104856,"ip_address":"","ucode":"4FCA97EE9FB57D","user_header":"https://static001.geekbang.org/account/avatar/00/20/1e/18/9d1f1439.jpg","comment_is_top":false,"comment_ctime":1637119071,"is_pvip":false,"replies":[{"id":117137,"content":"æ˜¯çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1637556007,"ip_address":"","comment_id":321965,"utype":1}],"discussion_count":4,"race_medal":0,"score":7,"product_id":100093501,"comment_content":"è€å¸ˆï¼šå‡½æ•°ç±»å‹ã€map ç±»å‹è‡ªèº«ï¼Œä»¥åŠåˆ‡ç‰‡ç±»å‹æ˜¯ä¸èƒ½ä½œä¸º map çš„ key ç±»å‹çš„ã€‚\nè¿™ä¸ªæ˜¯ä¸æ˜¯å¯ä»¥ç†è§£æˆï¼šå‡½æ•°ç±»å‹ï¼Œmapç±»å‹ï¼Œåˆ‡ç‰‡ç±»å‹æ˜¯ä¸èƒ½åšä¸ºkeyçš„ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":620343,"discussion_content":"âœ…","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1686093344,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"è¾½å®","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":321939,"user_name":"Badb0y","can_delete":false,"product_type":"c1","uid":1022861,"ip_address":"","ucode":"7CF859100B53F8","user_header":"https://static001.geekbang.org/account/avatar/00/0f/9b/8d/784ca17e.jpg","comment_is_top":false,"comment_ctime":1637113749,"is_pvip":false,"replies":[{"id":117135,"content":"âœ…","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1637555971,"ip_address":"","comment_id":321939,"utype":1}],"discussion_count":1,"race_medal":0,"score":7,"product_id":100093501,"comment_content":"å¯ä»¥å¯¹KEYæ’åºåå†éå†","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":532251,"discussion_content":"ä½ æ˜¯å¯¹çš„ï¼Œæ„Ÿè°¢æé†’ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637563080,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":394778,"user_name":"Geek_ab5640","can_delete":false,"product_type":"c1","uid":3920769,"ip_address":"å¹¿ä¸œ","ucode":"F60F4BB5C82636","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/F08j9niaVZyib2qzG6nvkd6wMia8d2hD5a6pepdtSiaEAJp9TRwTqxPvh6mhokxleIqqjyJrTEMnxMzPnDB05yuBnBnAFaDib2BdBicJOBibdr9LPA/132","comment_is_top":false,"comment_ctime":1728313655,"is_pvip":false,"replies":[{"id":143299,"content":"å—¯ï¼Œè¦è€ƒè™‘å†…å­˜å¯¹é½ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1728440933,"ip_address":"åŒ—äº¬","comment_id":394778,"utype":1}],"discussion_count":1,"race_medal":0,"score":7,"product_id":100093501,"comment_content":"valueå­˜å‚¨åŒºåŸŸï¼Œé‡Œè¾¹è®²åˆ°äº†kvç´§é‚»æ–¹æ¡ˆï¼Œkey1ä¸ªå­—èŠ‚ï¼Œvalueä¸º8ä¸ªå­—èŠ‚ï¼Œä¸ºä»€ä¹ˆè¿˜è¦å¡«å……å‡‘åˆ°16ä¸ªå­—èŠ‚å‘¢ï¼Œæ˜¯ä¸æ˜¯æœ‰ä»€ä¹ˆé™åˆ¶ï¼Œéœ€è¦æ»¡è¶³8çš„æ•´æ•°å€ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":652146,"discussion_content":"å—¯ï¼Œè¦è€ƒè™‘å†…å­˜å¯¹é½ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1728440933,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":390280,"user_name":"å‘æ¡æ©™","can_delete":false,"product_type":"c1","uid":3875922,"ip_address":"ä¸Šæµ·","ucode":"F52E4EB1F9A3C9","user_header":"https://static001.geekbang.org/account/avatar/00/3b/24/52/4e1f33d0.jpg","comment_is_top":false,"comment_ctime":1714979334,"is_pvip":false,"replies":[{"id":142010,"content":"è¿™æ˜¯æ–‡ä¸­çš„å“ªè¡Œä»£ç ï¼Ÿæˆ‘å’‹æ²¡æ‰¾åˆ°å‘¢ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1715262475,"ip_address":"è¾½å®","comment_id":390280,"utype":1}],"discussion_count":1,"race_medal":0,"score":7,"product_id":100093501,"comment_content":"_, ok := m1[2]\n\næç¤ºï¼š no new variables on left side of :=\n\n","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":644471,"discussion_content":"è¿™æ˜¯æ–‡ä¸­çš„å“ªè¡Œä»£ç ï¼Ÿæˆ‘å’‹æ²¡æ‰¾åˆ°å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1715262475,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"è¾½å®","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":382583,"user_name":"çˆ±åƒèƒ¡èåœ","can_delete":false,"product_type":"c1","uid":1459413,"ip_address":"å¹¿ä¸œ","ucode":"35FCF84D1E04C5","user_header":"https://static001.geekbang.org/account/avatar/00/16/44/d5/ca522e83.jpg","comment_is_top":false,"comment_ctime":1697611742,"is_pvip":false,"replies":[{"id":139512,"content":"go mapå¯¹keyè¿›è¡Œhashåå¾—åˆ°hash_valueã€‚hash_valueçš„ä½ä½åŒºç”¨äºé€‰æ¡¶(bucket)ï¼Œè¿›å…¥åˆ°ä¸€ä¸ªbucketä¸­çš„keyç†è®ºä¸Šéƒ½æ˜¯â€œç¢°æ’çš„â€ã€‚go mapä½¿ç”¨hash_valueä¸­çš„é«˜ä½å€¼åœ¨bucketçš„tophashåŒºè¿›è¡Œé€ä¸ªå€¼æ¯”å¯¹ï¼Œå¯¹Tophashç›¸åŒçš„é¡¹ï¼Œå†å»å¯¹æ¯”keyæ˜¯å¦ç›¸åŒã€‚ç›¸åŒå³æ‰¾åˆ°ã€‚å¦åˆ™ç»§ç»­æ‰¾ä¸‹ä¸€ä¸ªtophashã€‚bucketä¸­æœ€å¤§çš„keyæ•°é‡æ§åˆ¶åœ¨8ä¸ªï¼Œä¹Ÿå°±æ˜¯æœ€å¤š8æ¬¡tophashæ¯”è¾ƒã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1698371893,"ip_address":"è¾½å®","comment_id":382583,"utype":1}],"discussion_count":1,"race_medal":0,"score":7,"product_id":100093501,"comment_content":"æˆ‘æƒ³é—®ä¸‹è€å¸ˆè¿™é‡Œgoè¯­è¨€æ˜¯å¦‚ä½•é¿å…hashç¢°æ’ï¼ŒæŒ‰ç…§æˆ‘çš„ç†è§£mapåˆå§‹åŒ–æ—¶å€™æ¡¶å­çš„å®¹é‡å’Œæ•°é‡æ˜¯æœ‰é™çš„ï¼Œé‚£è¿™ç§æƒ…å†µ ç¬¬ä¸€å¦‚ä½•é¿å…ç®—å‡ºæ¥çš„hashä¸€è‡´è¿™ç§æƒ…å†µäº§ç”Ÿ(æ¯”å¦‚æ•´ä½“å®¹é‡åªæœ‰64ï¼Œéœ€è¦å­˜65ä¸ªæ•°è¿™ç§ï¼Œ è¿˜æœ‰å°±æ˜¯è™½ç„¶åªéœ€è¦å­˜63ä¸ªæ•°ï¼Œä½†æ˜¯ç¬¬63ä¸ªæ•°çš„æ—¶å€™å‘ç°å®ƒçš„ä½ç½®å·²ç»è¢«å…¶ä»–æ•°å æ®äº†)ï¼Œç¬¬äºŒå¦‚æœå‘ç”Ÿäº†å®ƒæ˜¯æ€ä¹ˆå¤„ç†çš„ï¼Œæˆ‘è®°å¾—ä»¥å‰çœ‹è¿‡ä¸€ä¸ªç»“æ„é‡Œé¢è¯´çš„æ˜¯æŒ‚åœ¨å‰ä¸€ä¸ªå€¼çš„åé¢ï¼Œè¿™æ ·å½¢æˆäº†ä¸€ä¸ªé“¾è¡¨ç»“æ„ï¼Œä½†æ ¹æ®è¿™ç¯‡æ–‡ç« æ¥çœ‹æ˜¾ç„¶ä¸æ˜¯è¿™ä¹ˆå¤„ç†çš„ã€‚","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":630366,"discussion_content":"go mapå¯¹keyè¿›è¡Œhashåå¾—åˆ°hash_valueã€‚hash_valueçš„ä½ä½åŒºç”¨äºé€‰æ¡¶(bucket)ï¼Œè¿›å…¥åˆ°ä¸€ä¸ªbucketä¸­çš„keyç†è®ºä¸Šéƒ½æ˜¯â€œç¢°æ’çš„â€ã€‚go mapä½¿ç”¨hash_valueä¸­çš„é«˜ä½å€¼åœ¨bucketçš„tophashåŒºè¿›è¡Œé€ä¸ªå€¼æ¯”å¯¹ï¼Œå¯¹Tophashç›¸åŒçš„é¡¹ï¼Œå†å»å¯¹æ¯”keyæ˜¯å¦ç›¸åŒã€‚ç›¸åŒå³æ‰¾åˆ°ã€‚å¦åˆ™ç»§ç»­æ‰¾ä¸‹ä¸€ä¸ªtophashã€‚bucketä¸­æœ€å¤§çš„keyæ•°é‡æ§åˆ¶åœ¨8ä¸ªï¼Œä¹Ÿå°±æ˜¯æœ€å¤š8æ¬¡tophashæ¯”è¾ƒã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1698371893,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"è¾½å®","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":375785,"user_name":"111","can_delete":false,"product_type":"c1","uid":2046189,"ip_address":"åŒ—äº¬","ucode":"7ACA555BDC139B","user_header":"","comment_is_top":false,"comment_ctime":1685965603,"is_pvip":false,"replies":[{"id":137149,"content":"âœ…","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1686093344,"ip_address":"è¾½å®","comment_id":375785,"utype":1}],"discussion_count":1,"race_medal":0,"score":7,"product_id":100093501,"comment_content":"æƒ³è¦ç¨³å®šæ¬¡åºéå†ï¼Œå¯ä»¥ç”¨sliceæ¥å­˜å‚¨keyçš„é¡ºåºï¼Œç”¨mapæ¥å­˜å‚¨æ˜ å°„","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":620343,"discussion_content":"âœ…","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1686093344,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"è¾½å®","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":322619,"user_name":"Calvin","can_delete":false,"product_type":"c1","uid":1603004,"ip_address":"","ucode":"0EEF5B207623B5","user_header":"https://static001.geekbang.org/account/avatar/00/18/75/bc/89d88775.jpg","comment_is_top":false,"comment_ctime":1637501917,"is_pvip":false,"replies":[{"id":117159,"content":"ä½ æ˜¯å¯¹çš„ï¼Œæ„Ÿè°¢æé†’ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1026224,"ctime":1637563080,"ip_address":"","comment_id":322619,"utype":1}],"discussion_count":1,"race_medal":0,"score":7,"product_id":100093501,"comment_content":"è€å¸ˆï¼Œâ€œé»˜è®¤çš„å…ƒç´ ä¸ªæ•°ä¸º BUCKETSIZEâ€ çš„å€¼åº”è¯¥æ˜¯åœ¨ $GOROOT&#47;src&#47;cmd&#47;compile&#47;internal&#47;reflectdata&#47;reflect.go ä¸­å®šä¹‰ã€‚\nPSï¼šæˆ‘çš„ go ç‰ˆæœ¬æ˜¯ 1.17.3 (mac intel)ã€‚","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":532251,"discussion_content":"ä½ æ˜¯å¯¹çš„ï¼Œæ„Ÿè°¢æé†’ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637563080,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":321982,"user_name":"ç½—æ°","can_delete":false,"product_type":"c1","uid":1320487,"ip_address":"","ucode":"96BAFAA147341F","user_header":"https://static001.geekbang.org/account/avatar/00/14/26/27/eba94899.jpg","comment_is_top":false,"comment_ctime":1637126423,"is_pvip":false,"replies":null,"discussion_count":11,"race_medal":0,"score":7,"product_id":100093501,"comment_content":"è¿˜æƒ³æ·±å…¥ç ”ç©¶ map çš„å°ä¼™ä¼´ï¼Œå¯ä»¥å»ç ”ç©¶è¿™äº›åšå®¢ï¼š\nhttps:&#47;&#47;www.qcrao.com&#47;2019&#47;05&#47;22&#47;dive-into-go-map&#47;   \nhttps:&#47;&#47;qcrao.com&#47;2020&#47;05&#47;06&#47;dive-into-go-sync-map&#47;\nhttps:&#47;&#47;draveness.me&#47;golang&#47;docs&#47;part2-foundation&#47;ch03-datastructure&#47;golang-hashmap&#47;","like_count":38,"discussions":[{"author":{"id":2720810,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/xfclWEPQ7szTZnKqnX9icSbgDWV0VAib3Cyo8Vg0OG3Usby88ic7ZgO2ho5lj0icOWI4JeJ70zUBiaTW1xh1UCFRPqA/132","nickname":"Geek_6bdb4e","note":"","ucode":"2953D400AA5385","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582655,"discussion_content":"ç¬¬ä¸€ç¯‡æ¢äº†è¿™ä¸ªåœ°å€äº†https://golang.design/go-questions/map/principal/","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1659579263,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1910824,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/28/28/5dd38c93.jpg","nickname":"é£é‡‡ä¾æ—§é£˜","note":"","ucode":"EAF86CD80E3020","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":620213,"discussion_content":"mark\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1685954604,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"é‡åº†","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":3554552,"avatar":"","nickname":"Geek_gofzw","note":"","ucode":"F5DFB1622C80BE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":609129,"discussion_content":"m","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1678845752,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1006424,"avatar":"","nickname":"Geek_xbye50","note":"","ucode":"0BF3780C247F22","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":595295,"discussion_content":"mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1669903022,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ç¦å»º","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1473123,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJiartmgOY37cwbdbsX7j6EGic3SMfDLqCVBFS9HEs7IA1icVovzMtSiaxiaic6GOpl4cyvDdrqgK3rU4icA/132","nickname":"Geek_097a1e","note":"","ucode":"ED0A3C047E1B98","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":586974,"discussion_content":"M","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662635764,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å®‰å¾½","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1111176,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f4/88/133bc14b.jpg","nickname":"c340","note":"","ucode":"D64CC3DDD09A0F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585769,"discussion_content":"mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661819291,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ç¦å»º","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1637228,"avatar":"https://static001.geekbang.org/account/avatar/00/18/fb/6c/12fdc372.jpg","nickname":"è¿ˆå‘æ¶æ„å¸ˆ","note":"","ucode":"2476594CF76001","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":578660,"discussion_content":"å‰2ç¯‡404äº†ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656927690,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1156153,"avatar":"https://static001.geekbang.org/account/avatar/00/11/a4/39/a3e452cd.jpg","nickname":"a115","note":"","ucode":"0C733004371E29","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":575845,"discussion_content":"m","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655135834,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1886796,"avatar":"","nickname":"å¼ æ¯…","note":"","ucode":"0707311786C079","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":573121,"discussion_content":"m","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1653211221,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1519200,"avatar":"https://static001.geekbang.org/account/avatar/00/17/2e/60/4fa1f3bd.jpg","nickname":"rså‹¿å¿˜åˆå¿ƒ","note":"","ucode":"557D1ECD757195","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":546492,"discussion_content":"æ·±å…¥ç ”ç©¶ mapçš„ç¬”è®°ï¼Œmarkä¸€ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642318582,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1936087,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/8a/d7/daabec34.jpg","nickname":"tequ1lAneio","note":"","ucode":"41336E87FF2E1A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":531581,"discussion_content":"çœ‹äº†ç¬¬ä¸€ç¯‡ï¼ŒçœŸçš„æ£’ï¼Œèµä¸€ä¸ª","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637335591,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":3,"extra":"{\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":322090,"user_name":"Darren","can_delete":false,"product_type":"c1","uid":1254968,"ip_address":"","ucode":"CCD2B2C492BE9A","user_header":"https://static001.geekbang.org/account/avatar/00/13/26/38/ef063dc2.jpg","comment_is_top":false,"comment_ctime":1637161765,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":7,"product_id":100093501,"comment_content":"å¯ä»¥å‚è€ƒjavaçš„LinkedHashMap,èƒ½å®ç°æ’å…¥æœ‰åºæˆ–è€…è®¿é—®æœ‰åºï¼Œå°±æ˜¯ä½¿ç”¨é¢å¤–çš„é“¾è¡¨æ¥ä¿å­˜é¡ºåºã€‚\ngo ä¸­å¯ä»¥åŸºäºcontainer&#47;listæ¥å®ç°ã€‚githubä¸Šç°æˆçš„åŠŸèƒ½ã€‚\nhttps:&#47;&#47;github.com&#47;elliotchance&#47;orderedmap","like_count":8},{"had_liked":false,"id":321999,"user_name":"return","can_delete":false,"product_type":"c1","uid":1135528,"ip_address":"","ucode":"42B8A3380DF04B","user_header":"https://static001.geekbang.org/account/avatar/00/11/53/a8/abc96f70.jpg","comment_is_top":false,"comment_ctime":1637132794,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":7,"product_id":100093501,"comment_content":"è€å¸ˆè®²çš„å¤ªå¥½äº†ï¼Œ","like_count":2},{"had_liked":false,"id":322387,"user_name":"ä¸è´Ÿé’æ˜¥ä¸è´Ÿå·±ğŸ¤˜","can_delete":false,"product_type":"c1","uid":1363671,"ip_address":"","ucode":"A6DD8E8B20EA6E","user_header":"https://static001.geekbang.org/account/avatar/00/14/ce/d7/5315f6ce.jpg","comment_is_top":false,"comment_ctime":1637334773,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":8,"product_id":100093501,"comment_content":"var kindex []int\n\tfor k := range m {\n\t\tkindex = append(kindex, k)\n\t}\n\t&#47;&#47;for k1,m1:=range m {\n\t&#47;&#47;\tfmt.Printf(&quot;k1 %d,m1 %d\\n&quot;, k1, m1)\n\t&#47;&#47;}\n\tsort.Ints(kindex)\n\n\tfor i:=0;i&lt;len(m);i++{\n\t\tfmt.Println(kindex[i],m[kindex[i]])\n\t}","like_count":1},{"had_liked":false,"id":322370,"user_name":"è¿›åŒ–èŒ","can_delete":false,"product_type":"c1","uid":1276861,"ip_address":"","ucode":"B30A5F78BB4171","user_header":"https://static001.geekbang.org/account/avatar/00/13/7b/bd/ccb37425.jpg","comment_is_top":false,"comment_ctime":1637322328,"is_pvip":true,"replies":null,"discussion_count":2,"race_medal":4,"score":8,"product_id":100093501,"comment_content":"æ²¡å¤ªæ˜ç™½ï¼Œä¸ºå•¥mapé»˜è®¤nilä¸èƒ½è¢«ç›´æ¥æ“ä½œï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1896658,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/f0/d2/6f8c7d72.jpg","nickname":";","note":"","ucode":"28C2B95415BBF7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":531970,"discussion_content":"åº”è¯¥æ˜¯è¿˜æ²¡æœ‰å¼€è¾Ÿå­˜å‚¨å†…å­˜ï¼Œsliceæ˜¯é€šè¿‡appendå‡½æ•°æ¥æ·»åŠ çš„ï¼Œå‡½æ•°å†…éƒ¨å¯ä»¥åˆ¤æ–­åå¼€è¾Ÿï¼Œè€Œmapæ˜¯é€šè¿‡[]æ¥æ·»åŠ çš„ï¼Œæ²¡æœ‰åˆ¤æ–­è¿‡ç¨‹","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1637485768,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":1,"child_discussions":[{"author":{"id":1276861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/7b/bd/ccb37425.jpg","nickname":"è¿›åŒ–èŒ","note":"","ucode":"B30A5F78BB4171","race_medal":4,"user_type":1,"is_pvip":true},"reply_author":{"id":1896658,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/f0/d2/6f8c7d72.jpg","nickname":";","note":"","ucode":"28C2B95415BBF7","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":532243,"discussion_content":"è°¢è°¢ä½ çš„è§£ç­”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637562686,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":531970,"ip_address":"","group_id":0},"score":532243,"extra":"{\"user_type\":1}"}]}]},{"had_liked":false,"id":321975,"user_name":"aoe","can_delete":false,"product_type":"c1","uid":1121758,"ip_address":"","ucode":"1C6201EDB4E954","user_header":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","comment_is_top":false,"comment_ctime":1637123280,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":8,"product_id":100093501,"comment_content":"ä½¿ç”¨é“¾è¡¨å­˜å‚¨å¯ä»¥å¾—åˆ°æœ‰åºçš„Mapã€‚æœ‰äº†æè¿°ç¬¦ï¼Œå†ä¹Ÿä¸ç”¨æ‹…å¿ƒä¼ é€’æ€§èƒ½é—®é¢˜äº†ï¼åŸæ¥å¤šä¸ªbucketæ˜¯ä¸ºäº†é™ä½Hashå†²çªï¼Œè™½ç„¶ä¸€ä¸ªbucketå’Œå¤šä¸ªbucketåœ¨æŸ¥æ‰¾Keyæ—¶æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯O(1)ï¼Œä½†ä¸€ä¸ªBucketé‡åˆ°Hashå†²çªçš„å¯èƒ½æ€§è¦æ¯”å¤šä¸ªé«˜å‡ºå¾ˆå¤šã€‚","like_count":1},{"had_liked":false,"id":390560,"user_name":"äººè¨€æœ‰åŠ›","can_delete":false,"product_type":"c1","uid":1690736,"ip_address":"æµ™æ±Ÿ","ucode":"3708FBBFB641FE","user_header":"https://static001.geekbang.org/account/avatar/00/19/cc/70/64045bc0.jpg","comment_is_top":false,"comment_ctime":1715659128,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":8,"product_id":100093501,"comment_content":"æœ¬èŠ‚ä»‹ç»äº†é‡è¦çš„æ•°æ®ç»“æ„mapåœ¨goä¸­çš„ä½¿ç”¨ï¼ŒåŒ…æ‹¬å£°æ˜ã€åˆå§‹åŒ–ã€éå†ã€å¢åˆ æ”¹æŸ¥ã€åŸç†\n1. mapç”±key-valueé”®å€¼å¯¹æ„æˆï¼Œkeyçš„ç±»å‹å¿…é¡»æ˜¯å®ç°==å’Œ!=çš„ï¼Œæ‰€ä»¥mapã€sliceã€funcéƒ½ä¸èƒ½ä½œä¸ºkey\n2. mapä¸æ˜¯é›¶å€¼å¯ç”¨ï¼Œéœ€è¦æ˜¾ç¤ºåˆå§‹åŒ–\na. ä¸€ç§æ˜¯é€šè¿‡å¤åˆå­—é¢é‡{key:value}\nb. é€šè¿‡makeæ–¹æ³•make(map[{keyType}]{valueType}, cap int)\n3. éå†é‡‡ç”¨for rangeçš„æ–¹å¼ï¼Œè·å¾—kã€vå˜é‡å³å¯ï¼Œpsï¼šä¸ä¿è¯æœ‰åºï¼Œæ¯æ¬¡éå†å¯èƒ½å¦ä¸åŒåºåˆ—\n4. æ’å…¥ã€æ›´æ–°å’ŒæŸ¥è¯¢éƒ½æ˜¯é€šè¿‡[]ç›´æ¥è¿›è¡Œï¼Œéœ€è¦æ³¨æ„æŸ¥è¯¢å¯èƒ½è·å¾—é›¶å€¼ï¼Œéœ€è¦é€šè¿‡kã€okçš„æ–¹å¼æŸ¥è¯¢ï¼Œç¡®è®¤æ˜¯å¦åŒ…å«å…ƒç´ ï¼Œåˆ é™¤ç”¨deleteå³å¯\n5. mapçš„å‚æ•°ä¼ é€’æ˜¯æè¿°ç¬¦ä¼ é€’ï¼Œä¸ä¼šæœ‰å¤§é‡å¼€é”€ï¼Œä¼ é€’çš„hmapç±»å‹\n6. mapçš„åº•å±‚å®ç°æ˜¯ç¼–è¯‘å’Œè¿è¡Œæ—¶å…±åŒå®ç°ï¼Œåº•å±‚çš„hmapåŒ…å«é•¿åº¦ã€çŠ¶æ€ã€bucketæŒ‡é’ˆã€bucketæ•°é‡å¯¹æ•°ã€æ‰©å®¹è¿›åº¦ã€å†å²bucketæŒ‡é’ˆã€extraï¼ˆoverflowæŒ‡é’ˆï¼‰ã€‚\n7. mapå­˜å‚¨çš„è¿‡ç¨‹æ˜¯\naã€å…ˆæ‰§è¡Œhashç®—æ³•è·å¾—hashCode\nbã€hashcodeåˆ†æˆé«˜ä½å’Œä½ä½å€¼ï¼Œä½ä½å€¼ç”¨æ¥ç´¢å¼•bucketæ•°ç»„ï¼Œé«˜ä½å€¼ç”¨äºbucketæ•°ç»„ä¸­å®šä½é”®å€¼å¯¹tophash\ncã€æ¯ä¸ªkeyå’Œvalueæ˜¯å•ç‹¬æ•°ç»„å­˜å‚¨çš„ï¼Œè§£å†³å†…å­˜å¯¹å…¶å¸¦æ¥çš„æµªè´¹\ndã€kvç±»å‹ä¼šæœ‰ä¸€ä¸ªä¸“é—¨çš„maptypeå®ä¾‹åœ¨å­˜å‚¨\neã€æ–°å¢kvä¼šåˆ¤å®šæ˜¯å¦éœ€è¦æ‰©å®¹ï¼Œå¦‚count&gt;len(bucket)*6.5æˆ–è€…overflowBucketè¿‡å¤šï¼Œéƒ½ä¼šè§¦å‘æ‰©å®¹ï¼Œå‰è€…ä¼šåˆ›å»ºä¸€ä¸ª2å€çš„bucketæ•°ç»„ï¼Œå¹¶ä¸”åœ¨æ•°æ®æ“ä½œæ—¶è¿›è¡Œè¿ç§»ï¼Œå¹¶è®°å½•è¿ç§»è¿›åº¦ï¼›åè€…åªä¼šåˆ›å»ºä¸€ä¸ªåŒè§„æ¨¡çš„æ•°ç»„\n\nç–‘é—®ï¼šä¸ºä»€ä¹ˆoverflowè¿‡å¤šè§¦å‘çš„æ‰©å®¹ï¼Œåˆ›å»ºçš„æ˜¯åŒè§„æ¨¡æ•°ç»„ï¼Œè¿™æ ·åŒæ · hashç®—æ³•å‡ºæ¥è¿˜æ˜¯ä¼šè¾¾åˆ°overflowæ‰©å®¹é˜ˆå€¼ï¼Ÿ\n\næ€è€ƒé¢˜ï¼šå¦‚ä½•è®¾è®¡ä¸€ä¸ªæ–¹æ³•ä¿è¯mapéå†é¡ºåºå›ºå®š\nå°†keyå¼•ç”¨èµ‹å€¼åˆ°ä¸€ä¸ªæ•°ç»„ï¼Œç„¶åæ’åºåéå†","like_count":0},{"had_liked":false,"id":353163,"user_name":"åŠŸå¤«ç†ŠçŒ«","can_delete":false,"product_type":"c1","uid":2732243,"ip_address":"æ±Ÿè‹","ucode":"D124F4FA4E816F","user_header":"https://static001.geekbang.org/account/avatar/00/29/b0/d3/200e82ff.jpg","comment_is_top":false,"comment_ctime":1659205131,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":8,"product_id":100093501,"comment_content":"å…¶å®å°±æ˜¯LRUç±»ä¼¼çš„äº‹æƒ…ï¼Œç”¨é“¾è¡¨æˆ–è€…åˆ‡ç‰‡æ¥åŠ","like_count":0},{"had_liked":false,"id":322588,"user_name":"å¤šé€‰å‚æ•°","can_delete":false,"product_type":"c1","uid":1248326,"ip_address":"","ucode":"B2294D80AB075F","user_header":"https://static001.geekbang.org/account/avatar/00/13/0c/46/dfe32cf4.jpg","comment_is_top":false,"comment_ctime":1637490083,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":8,"product_id":100093501,"comment_content":"é’ˆå¯¹ overflow bucket çš„ç§»åŠ¨æ¥è¯´ï¼Œå…¶å®ä¹Ÿæœ‰ä¸¤ç§æƒ…å†µï¼Ÿä¸€ç§æ˜¯ bucket ä¸­çš„å…ƒç´ ä¸å¤šï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™å°† overflow bucket ä¸­çš„å…ƒç´ ç§»åˆ° bucket ä¸­æ˜¯æœ‰æ•ˆçš„ï¼Ÿå¦ä¸€ç§æ˜¯ bucket æœ¬èº«å°±æ»¡äº†ï¼Œè¿™ä¸ªæ—¶å€™åˆ›å»ºæ–°çš„ï¼Œå…¶å® overfow bucket å‹æ ¹ä¸ä¼šç§»åŠ¨ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":2323716,"avatar":"https://static001.geekbang.org/account/avatar/00/23/75/04/d26cd437.jpg","nickname":"lemon","note":"","ucode":"47626025C55E5E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":536867,"discussion_content":"æˆ‘æ„Ÿè§‰æ˜¯è¿™æ ·çš„å“ï¼Œå°±æ˜¯è¯´è¿™ç§æ‰©å®¹æœ‰çš„æ—¶å€™æ˜¯ä¸èµ·ä½œç”¨çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638883111,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":322387,"user_name":"ä¸è´Ÿé’æ˜¥ä¸è´Ÿå·±ğŸ¤˜","can_delete":false,"product_type":"c1","uid":1363671,"ip_address":"","ucode":"A6DD8E8B20EA6E","user_header":"https://static001.geekbang.org/account/avatar/00/14/ce/d7/5315f6ce.jpg","comment_is_top":false,"comment_ctime":1637334773,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":8,"product_id":100093501,"comment_content":"var kindex []int\n\tfor k := range m {\n\t\tkindex = append(kindex, k)\n\t}\n\t&#47;&#47;for k1,m1:=range m {\n\t&#47;&#47;\tfmt.Printf(&quot;k1 %d,m1 %d\\n&quot;, k1, m1)\n\t&#47;&#47;}\n\tsort.Ints(kindex)\n\n\tfor i:=0;i&lt;len(m);i++{\n\t\tfmt.Println(kindex[i],m[kindex[i]])\n\t}","like_count":1},{"had_liked":false,"id":322370,"user_name":"è¿›åŒ–èŒ","can_delete":false,"product_type":"c1","uid":1276861,"ip_address":"","ucode":"B30A5F78BB4171","user_header":"https://static001.geekbang.org/account/avatar/00/13/7b/bd/ccb37425.jpg","comment_is_top":false,"comment_ctime":1637322328,"is_pvip":true,"replies":null,"discussion_count":2,"race_medal":4,"score":8,"product_id":100093501,"comment_content":"æ²¡å¤ªæ˜ç™½ï¼Œä¸ºå•¥mapé»˜è®¤nilä¸èƒ½è¢«ç›´æ¥æ“ä½œï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1896658,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/f0/d2/6f8c7d72.jpg","nickname":";","note":"","ucode":"28C2B95415BBF7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":531970,"discussion_content":"åº”è¯¥æ˜¯è¿˜æ²¡æœ‰å¼€è¾Ÿå­˜å‚¨å†…å­˜ï¼Œsliceæ˜¯é€šè¿‡appendå‡½æ•°æ¥æ·»åŠ çš„ï¼Œå‡½æ•°å†…éƒ¨å¯ä»¥åˆ¤æ–­åå¼€è¾Ÿï¼Œè€Œmapæ˜¯é€šè¿‡[]æ¥æ·»åŠ çš„ï¼Œæ²¡æœ‰åˆ¤æ–­è¿‡ç¨‹","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1637485768,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":1,"child_discussions":[{"author":{"id":1276861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/7b/bd/ccb37425.jpg","nickname":"è¿›åŒ–èŒ","note":"","ucode":"B30A5F78BB4171","race_medal":4,"user_type":1,"is_pvip":true},"reply_author":{"id":1896658,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/f0/d2/6f8c7d72.jpg","nickname":";","note":"","ucode":"28C2B95415BBF7","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":532243,"discussion_content":"è°¢è°¢ä½ çš„è§£ç­”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637562686,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":531970,"ip_address":"","group_id":0},"score":532243,"extra":"{\"user_type\":1}"}]}]},{"had_liked":false,"id":321975,"user_name":"aoe","can_delete":false,"product_type":"c1","uid":1121758,"ip_address":"","ucode":"1C6201EDB4E954","user_header":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","comment_is_top":false,"comment_ctime":1637123280,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":8,"product_id":100093501,"comment_content":"ä½¿ç”¨é“¾è¡¨å­˜å‚¨å¯ä»¥å¾—åˆ°æœ‰åºçš„Mapã€‚æœ‰äº†æè¿°ç¬¦ï¼Œå†ä¹Ÿä¸ç”¨æ‹…å¿ƒä¼ é€’æ€§èƒ½é—®é¢˜äº†ï¼åŸæ¥å¤šä¸ªbucketæ˜¯ä¸ºäº†é™ä½Hashå†²çªï¼Œè™½ç„¶ä¸€ä¸ªbucketå’Œå¤šä¸ªbucketåœ¨æŸ¥æ‰¾Keyæ—¶æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯O(1)ï¼Œä½†ä¸€ä¸ªBucketé‡åˆ°Hashå†²çªçš„å¯èƒ½æ€§è¦æ¯”å¤šä¸ªé«˜å‡ºå¾ˆå¤šã€‚","like_count":1},{"had_liked":false,"id":390560,"user_name":"äººè¨€æœ‰åŠ›","can_delete":false,"product_type":"c1","uid":1690736,"ip_address":"æµ™æ±Ÿ","ucode":"3708FBBFB641FE","user_header":"https://static001.geekbang.org/account/avatar/00/19/cc/70/64045bc0.jpg","comment_is_top":false,"comment_ctime":1715659128,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":8,"product_id":100093501,"comment_content":"æœ¬èŠ‚ä»‹ç»äº†é‡è¦çš„æ•°æ®ç»“æ„mapåœ¨goä¸­çš„ä½¿ç”¨ï¼ŒåŒ…æ‹¬å£°æ˜ã€åˆå§‹åŒ–ã€éå†ã€å¢åˆ æ”¹æŸ¥ã€åŸç†\n1. mapç”±key-valueé”®å€¼å¯¹æ„æˆï¼Œkeyçš„ç±»å‹å¿…é¡»æ˜¯å®ç°==å’Œ!=çš„ï¼Œæ‰€ä»¥mapã€sliceã€funcéƒ½ä¸èƒ½ä½œä¸ºkey\n2. mapä¸æ˜¯é›¶å€¼å¯ç”¨ï¼Œéœ€è¦æ˜¾ç¤ºåˆå§‹åŒ–\na. ä¸€ç§æ˜¯é€šè¿‡å¤åˆå­—é¢é‡{key:value}\nb. é€šè¿‡makeæ–¹æ³•make(map[{keyType}]{valueType}, cap int)\n3. éå†é‡‡ç”¨for rangeçš„æ–¹å¼ï¼Œè·å¾—kã€vå˜é‡å³å¯ï¼Œpsï¼šä¸ä¿è¯æœ‰åºï¼Œæ¯æ¬¡éå†å¯èƒ½å¦ä¸åŒåºåˆ—\n4. æ’å…¥ã€æ›´æ–°å’ŒæŸ¥è¯¢éƒ½æ˜¯é€šè¿‡[]ç›´æ¥è¿›è¡Œï¼Œéœ€è¦æ³¨æ„æŸ¥è¯¢å¯èƒ½è·å¾—é›¶å€¼ï¼Œéœ€è¦é€šè¿‡kã€okçš„æ–¹å¼æŸ¥è¯¢ï¼Œç¡®è®¤æ˜¯å¦åŒ…å«å…ƒç´ ï¼Œåˆ é™¤ç”¨deleteå³å¯\n5. mapçš„å‚æ•°ä¼ é€’æ˜¯æè¿°ç¬¦ä¼ é€’ï¼Œä¸ä¼šæœ‰å¤§é‡å¼€é”€ï¼Œä¼ é€’çš„hmapç±»å‹\n6. mapçš„åº•å±‚å®ç°æ˜¯ç¼–è¯‘å’Œè¿è¡Œæ—¶å…±åŒå®ç°ï¼Œåº•å±‚çš„hmapåŒ…å«é•¿åº¦ã€çŠ¶æ€ã€bucketæŒ‡é’ˆã€bucketæ•°é‡å¯¹æ•°ã€æ‰©å®¹è¿›åº¦ã€å†å²bucketæŒ‡é’ˆã€extraï¼ˆoverflowæŒ‡é’ˆï¼‰ã€‚\n7. mapå­˜å‚¨çš„è¿‡ç¨‹æ˜¯\naã€å…ˆæ‰§è¡Œhashç®—æ³•è·å¾—hashCode\nbã€hashcodeåˆ†æˆé«˜ä½å’Œä½ä½å€¼ï¼Œä½ä½å€¼ç”¨æ¥ç´¢å¼•bucketæ•°ç»„ï¼Œé«˜ä½å€¼ç”¨äºbucketæ•°ç»„ä¸­å®šä½é”®å€¼å¯¹tophash\ncã€æ¯ä¸ªkeyå’Œvalueæ˜¯å•ç‹¬æ•°ç»„å­˜å‚¨çš„ï¼Œè§£å†³å†…å­˜å¯¹å…¶å¸¦æ¥çš„æµªè´¹\ndã€kvç±»å‹ä¼šæœ‰ä¸€ä¸ªä¸“é—¨çš„maptypeå®ä¾‹åœ¨å­˜å‚¨\neã€æ–°å¢kvä¼šåˆ¤å®šæ˜¯å¦éœ€è¦æ‰©å®¹ï¼Œå¦‚count&gt;len(bucket)*6.5æˆ–è€…overflowBucketè¿‡å¤šï¼Œéƒ½ä¼šè§¦å‘æ‰©å®¹ï¼Œå‰è€…ä¼šåˆ›å»ºä¸€ä¸ª2å€çš„bucketæ•°ç»„ï¼Œå¹¶ä¸”åœ¨æ•°æ®æ“ä½œæ—¶è¿›è¡Œè¿ç§»ï¼Œå¹¶è®°å½•è¿ç§»è¿›åº¦ï¼›åè€…åªä¼šåˆ›å»ºä¸€ä¸ªåŒè§„æ¨¡çš„æ•°ç»„\n\nç–‘é—®ï¼šä¸ºä»€ä¹ˆoverflowè¿‡å¤šè§¦å‘çš„æ‰©å®¹ï¼Œåˆ›å»ºçš„æ˜¯åŒè§„æ¨¡æ•°ç»„ï¼Œè¿™æ ·åŒæ · hashç®—æ³•å‡ºæ¥è¿˜æ˜¯ä¼šè¾¾åˆ°overflowæ‰©å®¹é˜ˆå€¼ï¼Ÿ\n\næ€è€ƒé¢˜ï¼šå¦‚ä½•è®¾è®¡ä¸€ä¸ªæ–¹æ³•ä¿è¯mapéå†é¡ºåºå›ºå®š\nå°†keyå¼•ç”¨èµ‹å€¼åˆ°ä¸€ä¸ªæ•°ç»„ï¼Œç„¶åæ’åºåéå†","like_count":0},{"had_liked":false,"id":353163,"user_name":"åŠŸå¤«ç†ŠçŒ«","can_delete":false,"product_type":"c1","uid":2732243,"ip_address":"æ±Ÿè‹","ucode":"D124F4FA4E816F","user_header":"https://static001.geekbang.org/account/avatar/00/29/b0/d3/200e82ff.jpg","comment_is_top":false,"comment_ctime":1659205131,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":8,"product_id":100093501,"comment_content":"å…¶å®å°±æ˜¯LRUç±»ä¼¼çš„äº‹æƒ…ï¼Œç”¨é“¾è¡¨æˆ–è€…åˆ‡ç‰‡æ¥åŠ","like_count":0},{"had_liked":false,"id":322588,"user_name":"å¤šé€‰å‚æ•°","can_delete":false,"product_type":"c1","uid":1248326,"ip_address":"","ucode":"B2294D80AB075F","user_header":"https://static001.geekbang.org/account/avatar/00/13/0c/46/dfe32cf4.jpg","comment_is_top":false,"comment_ctime":1637490083,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":8,"product_id":100093501,"comment_content":"é’ˆå¯¹ overflow bucket çš„ç§»åŠ¨æ¥è¯´ï¼Œå…¶å®ä¹Ÿæœ‰ä¸¤ç§æƒ…å†µï¼Ÿä¸€ç§æ˜¯ bucket ä¸­çš„å…ƒç´ ä¸å¤šï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™å°† overflow bucket ä¸­çš„å…ƒç´ ç§»åˆ° bucket ä¸­æ˜¯æœ‰æ•ˆçš„ï¼Ÿå¦ä¸€ç§æ˜¯ bucket æœ¬èº«å°±æ»¡äº†ï¼Œè¿™ä¸ªæ—¶å€™åˆ›å»ºæ–°çš„ï¼Œå…¶å® overfow bucket å‹æ ¹ä¸ä¼šç§»åŠ¨ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":2323716,"avatar":"https://static001.geekbang.org/account/avatar/00/23/75/04/d26cd437.jpg","nickname":"lemon","note":"","ucode":"47626025C55E5E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":536867,"discussion_content":"æˆ‘æ„Ÿè§‰æ˜¯è¿™æ ·çš„å“ï¼Œå°±æ˜¯è¯´è¿™ç§æ‰©å®¹æœ‰çš„æ—¶å€™æ˜¯ä¸èµ·ä½œç”¨çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638883111,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}