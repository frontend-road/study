{"id":723496,"title":"09ï½œåˆè¯†traitï¼šåè®®çº¦æŸä¸èƒ½åŠ›é…ç½®","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯Mikeã€‚ä»Šå¤©æˆ‘ä»¬æ¥ä¸€èµ·å­¦ä¹ traitã€‚</p><p>trait åœ¨Rustä¸­éå¸¸é‡è¦ã€‚å¦‚æœè¯´æ‰€æœ‰æƒæ˜¯Rustä¸­çš„ä¹é˜³ç¥åŠŸï¼ˆå†…åŠŸæŠ¤ä½“ï¼‰ï¼Œé‚£ä¹ˆç±»å‹ç³»ç»Ÿï¼ˆtypes + traitï¼‰å°±æ˜¯Rustä¸­çš„é™é¾™åå…«æŒï¼Œå­¦å¥½äº†ä¾¿å¦‚æ‘§æ¯æ‹‰æœ½èˆ¬è§£å†³é—®é¢˜ã€‚å¦å¤–ä¸€æ–¹é¢ï¼Œå¦‚æœæŠŠRustæ¯”ä½œä¸€ä¸ªAIäººçš„è¯ï¼Œé‚£ä¹ˆæ‰€æœ‰æƒç›¸å½“äºRustçš„å¿ƒè„ï¼Œç±»å‹ + traitç›¸å½“äºè¿™ä¸ªAIäººçš„å¤§è„‘ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/c0/28/c05e31106c4f880f5ce29cdc8f1a8128.png?wh=1920x1349\" alt=\"å›¾ç‰‡\"></p><p>å¥½äº†ï¼Œæˆ‘å°±ä¸å–å…³å­äº†ã€‚å‰é¢æˆ‘ä»¬å·²ç»å­¦ä¹ äº†æ‰€æœ‰æƒï¼Œç°åœ¨æˆ‘ä»¬æ¥äº†è§£ä¸€ä¸‹è¿™ä¸ªtraitåˆ°åº•æ˜¯ä»€ä¹ˆã€‚</p><p><span class=\"reference\">æ³¨ï¼šæ‰€æœ‰æƒæ˜¯è¿™é—¨è¯¾ç¨‹çš„ä¸»çº¿ï¼Œä¼šä¸€ç›´è´¯ç©¿åˆ°æœ€åã€‚</span></p><h2>traitæ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>traitç”¨ä¸­æ–‡æ¥è®²å°±æ˜¯ç‰¹å¾ï¼Œä½†æ˜¯æˆ‘å€¾å‘äºä¸ç¿»è¯‘ã€‚å› ä¸º trait æœ¬èº«å¾ˆç®€å•ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªæ ‡è®°ï¼ˆmarker æˆ– tagï¼‰è€Œå·²ã€‚æ¯”å¦‚ <code>trait TraitA {}</code> å°±å®šä¹‰äº†ä¸€ä¸ªtraitï¼ŒTraitAã€‚</p><p>åªä¸è¿‡è¿™ä¸ªæ ‡è®°è¢«ç”¨åœ¨ç‰¹å®šçš„åœ°æ–¹ï¼Œä¹Ÿå°±æ˜¯ç±»å‹å‚æ•°çš„åé¢ï¼Œç”¨æ¥é™å®šï¼ˆboundï¼‰è¿™ä¸ªç±»å‹å‚æ•°å¯èƒ½çš„ç±»å‹èŒƒå›´ã€‚æ‰€ä»¥traitå¾€å¾€æ˜¯è·Ÿç±»å‹å‚æ•°ç»“åˆèµ·æ¥ä½¿ç”¨çš„ã€‚æ¯”å¦‚ <code>T: TraitA</code> å°±æ˜¯ä½¿ç”¨ TraitA å¯¹ç±»å‹å‚æ•°Tè¿›è¡Œé™åˆ¶ã€‚</p><p>è¿™ä¹ˆè®²èµ·æ¥æ¯”è¾ƒæŠ½è±¡ï¼Œæˆ‘ä»¬ä¸‹é¢ä¸¾ä¾‹è¯´æ˜ã€‚</p><h3>traitæ˜¯ä¸€ç§çº¦æŸ</h3><p>æˆ‘ä»¬å…ˆå›å¿†ä¸€ä¸‹<a href=\"https://time.geekbang.org/column/article/722240\">ç¬¬ 7 è®²</a>çš„ä¸€ä¸ªä¾‹å­ã€‚</p><pre><code class=\"language-plain\">struct Point&lt;T&gt; {\n&nbsp; &nbsp; x: T,\n&nbsp; &nbsp; y: T,\n}\n\nfn print&lt;T: std::fmt::Display&gt;(p: Point&lt;T&gt;) {\n&nbsp; &nbsp; println!(\"Point {}, {}\", p.x, p.y);\n}\n\nfn main() {\n&nbsp; &nbsp; let p = Point {x: 10, y: 20};\n&nbsp; &nbsp; print(p);\n\n&nbsp; &nbsp; let p = Point {x: 10.2, y: 20.4};\n&nbsp; &nbsp; print(p);\n}\n// è¾“å‡º \nPoint 10, 20\nPoint 10.2, 20.4\n</code></pre><!-- [[[read_end]]] --><p>æ³¨æ„ä»£ç é‡Œçš„ç¬¬å…­è¡Œã€‚</p><pre><code class=\"language-plain\">fn print&lt;T: std::fmt::Display&gt;(p: Point&lt;T&gt;) {\n</code></pre><p>è¿™é‡Œçš„Displayå°±æ˜¯ä¸€ä¸ªtraitï¼Œç”¨æ¥å¯¹ç±»å‹å‚æ•°Tè¿›è¡Œçº¦æŸã€‚å®ƒè¡¨ç¤º<strong>å¿…é¡»è¦å®ç°äº†Displayçš„ç±»å‹æ‰èƒ½è¢«ä»£å…¥ç±»å‹å‚æ•° T</strong>ï¼Œä¹Ÿå°±æ˜¯é™å®šäº† T å¯èƒ½çš„ç±»å‹èŒƒå›´ã€‚<code>std::fmt::Display</code> è¿™ä¸ªtrait ä¸»è¦æ˜¯å®šä¹‰æˆé…åˆæ ¼å¼åŒ–å‚æ•° <code>\"{}\"</code> ä½¿ç”¨çš„ï¼Œå’Œå®ƒç›¸å¯¹çš„è¿˜æœ‰ <code>std::fmt::Debug</code>ï¼Œç”¨æ¥å®šä¹‰æˆé…åˆæ ¼å¼åŒ–å‚æ•° <code>\"{:?}\"</code> ä½¿ç”¨ã€‚è€Œä¾‹å­é‡Œçš„æ•´æ•°å’Œæµ®ç‚¹æ•°ï¼Œéƒ½é»˜è®¤å®ç°äº†è¿™ä¸ªDisplay traitï¼Œå› æ­¤æ•´æ•°å’Œæµ®ç‚¹æ•°è¿™ä¸¤ç§ç±»å‹èƒ½å¤Ÿä»£å…¥å‡½æ•° print() çš„ç±»å‹å‚æ•° Tï¼Œä»è€Œæ‰§è¡Œæ‰“å°çš„åŠŸèƒ½ã€‚</p><p>æˆ‘ä»¬çœ‹ä¸€ä¸‹å¦‚æœä¸€ä¸ªç±»å‹æ²¡æœ‰å®ç°Displayï¼ŒæŠŠå®ƒä»£å…¥ print() å‡½æ•°ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆã€‚</p><pre><code class=\"language-plain\">struct Point&lt;T&gt; {\n&nbsp; &nbsp; x: T,\n&nbsp; &nbsp; y: T,\n}\n\nstruct Foo;  // æ–°å®šä¹‰äº†ä¸€ç§ç±»å‹\n\nfn print&lt;T: std::fmt::Display&gt;(p: Point&lt;T&gt;) {\n&nbsp; &nbsp; println!(\"Point {}, {}\", p.x, p.y);\n}\n\nfn main() {\n&nbsp; &nbsp; let p = Point {x: 10, y: 20};\n&nbsp; &nbsp; print(p);\n\n&nbsp; &nbsp; let p = Point {x: 10.2, y: 20.4};\n&nbsp; &nbsp; print(p);\n&nbsp; &nbsp;&nbsp;\n&nbsp; &nbsp; let p = Point {x: Foo, y: Foo};  // åˆå§‹åŒ–ä¸€ä¸ªPoint&lt;T&gt; å®ä¾‹\n&nbsp; &nbsp; print(p);\n}\n</code></pre><p>æŠ¥ç¼–è¯‘é”™è¯¯ï¼š</p><pre><code class=\"language-plain\">error[E0277]: `Foo` doesn't implement `std::fmt::Display`\n&nbsp; --&gt; src/main.rs:20:11\n&nbsp; &nbsp;|\n20 |&nbsp; &nbsp; &nbsp;print(p);\n&nbsp; &nbsp;|&nbsp; &nbsp; &nbsp;----- ^ `Foo` cannot be formatted with the default formatter\n&nbsp; &nbsp;|&nbsp; &nbsp; &nbsp;|\n&nbsp; &nbsp;|&nbsp; &nbsp; &nbsp;required by a bound introduced by this call\n&nbsp; &nbsp;|\n&nbsp; &nbsp;= help: the trait `std::fmt::Display` is not implemented for `Foo`\n&nbsp; &nbsp;= note: in format strings you may be able to use `{:?}` (or {:#?} for pretty-print) instead\n</code></pre><p>æç¤ºè¯´ï¼ŒFoo ç±»å‹æ²¡æœ‰å®ç° Displayï¼Œæ‰€ä»¥æ²¡åŠæ³•ç¼–è¯‘é€šè¿‡ã€‚</p><p>å›é¡¾ä¸€ä¸‹æˆ‘ä»¬å‰é¢<a href=\"https://time.geekbang.org/column/article/722240\">ç¬¬ 7 è®²</a>é‡Œè¯´åˆ°çš„ï¼šç±»å‹æ˜¯å¯¹å˜é‡å€¼ç©ºé—´çš„çº¦æŸã€‚ç»“åˆtraitæ˜¯å¯¹ç±»å‹å‚æ•°ç±»å‹ç©ºé—´çš„çº¦æŸã€‚æˆ‘ä»¬å¯ä»¥æ•´ç†å‡ºä¸€å¼ å›¾æ¥è¡¨è¾¾å®ƒä»¬ä¹‹é—´çš„å…³ç³»ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/cc/5d/cc358e58c96f97bb7edf9c721cf3905d.jpg?wh=1920x1149\" alt=\"å›¾ç‰‡\"></p><p>é¦–å…ˆï¼Œå¦‚æœæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªå˜é‡ï¼Œè¿™ä¸ªæ—¶å€™è¿˜æ²¡æœ‰ç»™å®ƒæŒ‡å®šç±»å‹ã€‚é‚£ä¹ˆè¿™ä¸ªæ—¶å€™è¿™ä¸ªå˜é‡çš„å–å€¼ç©ºé—´å°±æ˜¯ä»»æ„çš„ã€‚ç”±äºå€¼ç©ºé—´å¤ªè¿‡å®½æ³›ï¼Œæˆ‘ä»¬ç»™å®ƒæŒ‡å®šç±»å‹ï¼Œæ¯”å¦‚u32æˆ–å­—ç¬¦ä¸²ï¼Œç»™è¿™ä¸ªå˜é‡çš„å€¼ç©ºé—´æ·»åŠ äº†çº¦æŸã€‚å¹¶ä¸”æŒ‡å®šäº†æ˜ç¡®çš„ç±»å‹åï¼Œ<strong>è¿™ä¸ªå˜é‡çš„å€¼ç©ºé—´å°±è¢«é™å®šä¸ºä»…è¿™ä¸€ç§ç±»å‹çš„å€¼ç©ºé—´</strong>ã€‚</p><p>å¯¹äºç®€å•çš„åº”ç”¨ï¼Œåˆ°è¿™ä¸€æ­¥ä¹Ÿå¤Ÿäº†ï¼Œä½†å¯¹æŠ½è±¡ç¨‹åº¦æ¯”è¾ƒé«˜çš„å¤æ‚åº”ç”¨ï¼Œè¿™ç§é™å®šå°±æ˜¾å¾—å¤ªæ­»äº†ã€‚æ‰€ä»¥åˆå¼•å…¥äº†ç±»å‹å‚æ•°ï¼ˆæ³›å‹ï¼‰è¿™ä¸ªæœºåˆ¶ï¼Œç”¨ä¸€ä¸ªç±»å‹å‚æ•°Tå°±å¯ä»¥ä»£è¡¨ä¸åŒçš„ç±»å‹ã€‚è¿™æ ·ï¼Œä»¥å¾€ä¸ºä¸€äº›ç‰¹å®šç±»å‹å¼€å‘çš„å‡½æ•°ç­‰ï¼Œå°±å¯ä»¥åœ¨ä¸æ”¹å˜é€»è¾‘çš„æƒ…å†µä¸‹ï¼Œæ‰©å±•åˆ°æ”¯æŒå¤šç§ç±»å‹ï¼Œè¿™æ ·å°±çµæ´»äº†å¾ˆå¤šã€‚</p><p>ä½†æ˜¯ï¼Œåªæœ‰ä¸€ä¸ªç±»å‹å‚æ•°Tï¼Œè¿™ä¸ªä¿¡æ¯è¿˜ä¸å¤Ÿï¼Œå¯¹åŒä¸€ä¸ªå‡½æ•°ï¼Œå¯èƒ½åªæœ‰å°‘æ•°ä¸€äº›ç±»å‹é€‚ç”¨ï¼Œè€Œç¬¦å· T æœ¬èº«å¦‚æœä¸åŠ ä»»ä½•é™åˆ¶çš„è¯ï¼Œå®ƒçš„å†…æ¶µï¼ˆç±»å‹ç©ºé—´ï¼‰å°±å¤ªå®½æ³›äº†ï¼Œå®ƒå¯ä»¥å–ä»»æ„ç±»å‹ã€‚æ‰€ä»¥å…‰å¼•å…¥ç±»å‹å‚æ•°è¿™ä¸ªæœºåˆ¶è¿˜ä¸å¤Ÿï¼Œè¿˜å¾—é…å¥—åœ°å¼•å…¥ä¸€ä¸ªå¯¹ç±»å‹å‚æ•°è¿›è¡Œçº¦æŸçš„æœºåˆ¶ã€‚äºæ˜¯å°±å‡ºç°äº†traitã€‚ç»“åˆå›¾ç‰‡ï¼Œæˆ‘ä»¬å¯ä»¥æ˜ç™½å¼•å…¥traitçš„åŸå› å’Œtraitèµ·çš„ä½œç”¨ã€‚</p><p>å¦ä¸€æ–¹é¢ï¼Œä»å›¾ç‰‡é‡Œå…¶å®ä¹Ÿå¯ä»¥çœ‹å‡ºç”¨Rustå¯¹é—®é¢˜å»ºæ¨¡çš„æ€ç»´æ–¹å¼ã€‚å½“ä½ åœ¨å¤´è„‘ä¸­ç»è¿‡è¿™æ ·ä¸€ä¸ªè¿‡ç¨‹åï¼Œé’ˆå¯¹ä¸€ä¸ªé—®é¢˜åœ¨Rustä¸­å°±èƒ½å»ºç«‹èµ·å¯¹åº”çš„æ¨¡å‹æ¥ï¼Œæ•´ä¸ªè¿‡ç¨‹éå¸¸è‡ªç„¶ã€‚è¾“å…¥é—®é¢˜ï¼Œè¾“å‡ºæ¨¡å‹ï¼</p><p>è¯­æ³•ä¸Šï¼Œ<code>T: TraitA</code> æ„æ€å°±æ˜¯æˆ‘ä»¬å¯¹ç±»å‹å‚æ•°Tæ–½åŠ äº†TraitAè¿™ä¸ªçº¦æŸæ ‡è®°ã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬æ€ä¹ˆç»™æŸç§å…·ä½“çš„ç±»å‹å®ç° TraitAï¼Œæ¥è®©é‚£ä¸ªå…·ä½“çš„ç±»å‹å¯ä»¥ä»£å…¥Tå‘¢ï¼Ÿå…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬è¦å¯¹æŸä¸ªç±»å‹Atypeå®ç°æŸä¸ªtraitçš„è¯ï¼Œä½¿ç”¨è¯­æ³• <code>impl TraitA for Atype {}</code> å°±å¯ä»¥åšåˆ°ã€‚</p><p>åªéœ€è¦ä¸‹é¢ä¸‰è¡Œä»£ç å°±å¯ä»¥ã€‚</p><pre><code class=\"language-plain\">trait TraitA {}\n\nstruct Atype;\n\nimpl TraitA for Atype {}\n</code></pre><p>è¿™ä¸‰è¡Œä»£ç æ˜¯å¯ä»¥é€šè¿‡ç¼–è¯‘çš„ï¼Œæ˜¯ä¸æ˜¯æœ‰ç‚¹åƒæƒŠï¼Ÿ</p><p>å¯¹äºæŸä¸ªç±»å‹ T ï¼ˆè¿™é‡ŒæŒ‡çš„æ˜¯æŸç§å…·ä½“çš„ç±»å‹ï¼‰æ¥è¯´ï¼Œå¦‚æœå®ƒå®ç°äº†è¿™ä¸ªTraitAï¼Œæˆ‘ä»¬å°±è¯´è¿™ä¸ªç±»å‹<strong>æ»¡è¶³çº¦æŸ</strong>ã€‚</p><pre><code class=\"language-plain\">T: TraitA\n</code></pre><p>ä¸€ä¸ªtraitåœ¨ä¸€ä¸ªç±»å‹ä¸Šåªèƒ½è¢«å®ç°ä¸€æ¬¡ã€‚æ¯”å¦‚ï¼š</p><pre><code class=\"language-plain\">trait TraitA {}\n\nstruct Atype;\n\nimpl TraitA for Atype {}\nimpl TraitA for Atype {}\n// è¾“å‡ºï¼Œç¼–è¯‘é”™è¯¯ï¼š\nerror[E0119]: conflicting implementations of trait `TraitA` for type `Atype`\n</code></pre><p>ä¾‹å­ä¹Ÿå¾ˆå¥½ç†è§£ï¼Œçº¦æŸå£°æ˜ä¸€æ¬¡å°±å¤Ÿäº†ï¼Œå¤šæ¬¡å£°æ˜å°±å†²çªäº†ï¼Œä¸çŸ¥é“å“ªä¸€ä¸ªç”Ÿæ•ˆã€‚</p><h3>traitæ˜¯ä¸€ç§èƒ½åŠ›é…ç½®</h3><p>å¦‚æœtraitä»…ä»…æ˜¯ä¸€ä¸ªçº¯æ ‡è®°åç§°ï¼Œè€Œä¸åŒ…å«å†…å®¹çš„è¯ï¼Œé‚£å®ƒçš„ä½œç”¨æ˜¯éå¸¸æœ‰é™çš„ã€‚</p><pre><code class=\"language-plain\">trait TraitA {}\n</code></pre><p>ä¸‹é¢æˆ‘ä»¬ä¼šçŸ¥é“ï¼Œè¿™ä¸ª{}é‡Œå¯ä»¥æ”¾å…¥ä¸€äº›å…ƒç´ ï¼Œè¿™äº›å…ƒç´ å±äºè¿™ä¸ªtraitã€‚</p><p>æˆ‘ä»¬å…ˆæ¥ç€å‰é¢é‚£ä¸ªç¤ºä¾‹ç»§ç»­è®²ã€‚</p><pre><code class=\"language-plain\">fn print&lt;T: std::fmt::Display&gt;(p: Point&lt;T&gt;) {\n</code></pre><p>Displayå¯¹ç±»å‹å‚æ•°Tä½œäº†çº¦æŸï¼Œè¦æ±‚å°†æ¥è¦ä»£å…¥çš„å…·ä½“ç±»å‹å¿…é¡»å®ç°äº†Displayè¿™ä¸ªtraitã€‚å¦ä¸€æ–¹é¢ï¼Œä¹Ÿå¯ä»¥è¯´æˆï¼ŒDisplayç»™å°†æ¥è¦ä»£å…¥åˆ°è¿™ä¸ªç±»å‹å‚æ•°é‡Œçš„å…·ä½“ç±»å‹æä¾›äº†ä¸€å¥—â€œèƒ½åŠ›â€ï¼Œè¿™å¥—èƒ½åŠ›æ˜¯åœ¨ Display è¿™ä¸ªtraitä¸­å®šä¹‰å’Œå°è£…çš„ã€‚å…·ä½“æ¥è¯´ï¼Œå°±æ˜¯èƒ½å¤Ÿæ‰“å°çš„èƒ½åŠ›ï¼Œå› ä¸ºç¡®å®æœ‰äº›å€¼æ˜¯æ²¡æ³•æ‰“å°å‡ºæ¥çš„ï¼Œæ¯”å¦‚åŸå§‹äºŒè¿›åˆ¶ç¼–ç ï¼Œæ‰“å‡ºæ¥ä¹Ÿæ˜¯ä¹±ç ã€‚è€ŒDisplayå°±æä¾›äº†æ‰“å°çš„èƒ½åŠ›ï¼ŒåŒæ—¶è¿˜å®šä¹‰äº†å…·ä½“çš„æ‰“å°è¦æ±‚ã€‚</p><p><span class=\"reference\">æ³¨ï¼šDisplayæ˜¯æ ‡å‡†åº“æä¾›çš„ä¸€ç§å¸¸ç”¨traitï¼Œæˆ‘ä»¬ä¼šåœ¨ç¬¬11è®²ä¸“é—¨è®²è§£æ ‡å‡†åº“é‡Œçš„å„ç§å¸¸ç”¨traitã€‚</span></p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œ<strong>traitå¯¹ç±»å‹å‚æ•°å®æ–½çº¦æŸçš„åŒæ—¶ï¼Œä¹Ÿå¯¹å…·ä½“çš„ç±»å‹æä¾›äº†èƒ½åŠ›</strong>ã€‚è®©æˆ‘ä»¬çœ‹åˆ°ç±»å‹å‚æ•°åé¢çš„çº¦æŸï¼Œå°±çŸ¥é“åˆ°æ—¶å€™ä»£å…¥è¿™å…¶ä¸­çš„ç±»å‹ä¼šå…·æœ‰å“ªäº›èƒ½åŠ›ã€‚æ¯”å¦‚æˆ‘ä»¬çœ‹åˆ°äº† Displayï¼Œå°±çŸ¥é“é‚£äº›ç±»å‹å…·æœ‰æ‰“å°çš„èƒ½åŠ›ã€‚æˆ‘ä»¬çœ‹åˆ°äº† PartialEqï¼Œå°±çŸ¥é“é‚£äº›ç±»å‹å…·æœ‰æ¯”è¾ƒå¤§å°çš„èƒ½åŠ›ç­‰ç­‰ã€‚</p><p>ä½ ä¹Ÿå¯ä»¥è¿™æ ·ç†è§£ï¼Œåœ¨Rustä¸­<strong>çº¦æŸå’Œèƒ½åŠ›å°±æ˜¯ä¸€ä½“ä¸¤é¢ï¼Œæ˜¯åŒä¸€ä¸ªä¸œè¥¿</strong>ã€‚è¿™æ ·ä¸‹é¢çš„å†™æ³•æ˜¯ä¸æ˜¯å°±å¥½ç†è§£å¤šäº†ï¼Ÿ</p><pre><code class=\"language-plain\">T: TraitA + TraitB + TraitC + TraitD\n</code></pre><p>è¿™ä¸ªçº¦æŸè¡¨è¾¾å¼ï¼Œç»™æŸç§ç±»å‹Tæä¾›äº†ä»TraitAåˆ°TraitDè¿™4å¥—èƒ½åŠ›ã€‚æˆ‘ä»¬åé¢è¿˜ä¼šçœ‹åˆ°ï¼ŒåŸºäºå¤štraitç»„åˆçš„çº¦æŸè¡¨è¾¾å¼ï¼Œå¯ä»¥ç”¨è¿™ç§æ–¹å¼æä¾›ä¼˜ç¾çš„èƒ½åŠ›ï¼ˆæƒé™ï¼‰é…ç½®ã€‚</p><p>é‚£ä¹ˆï¼Œä¸€ä¸ªtraité‡Œé¢å…·ä½“å¯ä»¥æœ‰å“ªäº›ä¸œè¥¿å‘¢ï¼Ÿ</p><h2>traitä¸­åŒ…å«ä»€ä¹ˆï¼Ÿ</h2><p>traité‡Œé¢å¯ä»¥åŒ…å«å…³è”å‡½æ•°ã€å…³è”ç±»å‹å’Œå…³è”å¸¸é‡ã€‚</p><h3>å…³è”å‡½æ•°</h3><p>åœ¨traité‡Œå¯ä»¥å®šä¹‰å…³è”å‡½æ•°ã€‚æ¯”å¦‚ä¸‹é¢Sportè¿™ä¸ªtraitå°±å®šä¹‰äº†å››ä¸ªå…³è”å‡½æ•°ã€‚</p><pre><code class=\"language-plain\">trait Sport {\n  fn play(&amp;self);     // æ³¨æ„è¿™é‡Œç›´æ¥ä»¥åˆ†å·ç»“å°¾ï¼Œè¡¨ç¤ºå‡½æ•°ç­¾å\n  fn play_mut(&amp;mut self);\n  fn play_own(self);\n  fn play_some() -&gt; Self;\n}\n</code></pre><p>ä¾‹å­é‡Œï¼Œå‰3ä¸ªå…³è”å‡½æ•°éƒ½å¸¦æœ‰Selfå‚æ•°ï¼ˆâš ï¸ æ‰€æœ‰æƒä¸‰æ€åˆå‡ºç°äº†ï¼‰ï¼Œå®ƒä»¬è¢«å®ç°åˆ°å…·ä½“ç±»å‹ä¸Šçš„æ—¶å€™ï¼Œå°±æˆä¸ºé‚£ä¸ªå…·ä½“ç±»å‹çš„æ–¹æ³•ã€‚ç¬¬4ä¸ªæ–¹æ³•ï¼Œ<code>play_some()</code> å‡½æ•°é‡Œç¬¬ä¸€ä¸ªå‚æ•°ä¸æ˜¯Selfç±»å‹ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒä¸æ˜¯selfã€&amp;selfã€&amp;mut selfä¸­çš„ä¸€ä¸ªï¼Œå®ƒè¢«å®ç°åœ¨å…·ä½“ç±»å‹ä¸Šçš„æ—¶å€™ï¼Œå°±æ˜¯é‚£ä¸ªç±»å‹çš„å…³è”å‡½æ•°ã€‚</p><p>å¯ä»¥çœ‹åˆ°ï¼Œåœ¨traitä¸­å¯ä»¥ä½¿ç”¨Rustè¯­è¨€é‡Œçš„æ ‡å‡†ç±»å‹Selfï¼Œç”¨æ¥æŒ‡ä»£å°†è¦è¢«å®ç°è¿™ä¸ªtraitçš„é‚£ä¸ªç±»å‹ã€‚ä½¿ç”¨ impl è¯­æ³•å°†ä¸€ä¸ª trait å®ç°åˆ°ç›®æ ‡ç±»å‹ä¸Šå»ã€‚</p><p>ä½ å¯ä»¥çœ‹ä¸€ä¸‹ç¤ºä¾‹ã€‚</p><pre><code class=\"language-plain\">struct Football;\n\nimpl Sport for Football {\n  fn play(&amp;self) {}    // æ³¨æ„å‡½æ•°åé¢çš„èŠ±æ‹¬å·ï¼Œè¡¨ç¤ºå®ç°\n  fn play_mut(&amp;mut self) {}\n  fn play_own(self) {}\n  fn play_some() -&gt; Self { Self }\n}\n</code></pre><p>è¿™é‡Œè¿™ä¸ªSelfï¼Œå°±æŒ‡ä»£ Football è¿™ä¸ªç±»å‹ã€‚</p><p>traitä¸­ä¹Ÿå¯ä»¥å®šä¹‰å…³è”å‡½æ•°çš„é»˜è®¤å®ç°ã€‚</p><p>æ¯”å¦‚ï¼š</p><pre><code class=\"language-plain\">trait Sport {\n  fn play(&amp;self) {}    // æ³¨æ„è¿™é‡Œä¸€å¯¹èŠ±æ‹¬å·ï¼Œå°±æ˜¯traitçš„å…³è”å‡½æ•°çš„é»˜è®¤å®ç°\n  fn play_mut(&amp;mut self) {}\n  fn play_own(self);   // æ³¨æ„è¿™é‡Œæ˜¯ä»¥åˆ†å·ç»“å°¾ï¼Œå°±è¡¨ç¤ºæ²¡æœ‰é»˜è®¤å®ç°\n  fn play_some() -&gt; Self;\n}\n</code></pre><p>åœ¨è¿™ä¸ªç¤ºä¾‹é‡Œï¼Œ<code>play()</code> å’Œ <code>play_mut()</code> åé¢å®šä¹‰äº†å‡½æ•°ä½“ï¼Œå› æ­¤å®é™…ä¸Šæä¾›äº†é»˜è®¤å®ç°ã€‚</p><p>æœ‰äº†traitå…³è”å‡½æ•°çš„é»˜è®¤å®ç°åï¼Œå…·ä½“ç±»å‹åœ¨å®ç°è¿™ä¸ªtraitçš„æ—¶å€™ï¼Œå°±å¯ä»¥â€œå·æ‡’â€ï¼Œç›´æ¥åˆ©ç”¨é»˜è®¤å®ç°ã€‚æ¯”å¦‚ï¼š</p><pre><code class=\"language-plain\">struct Football;\n\nimpl Sport for Football {\n&nbsp; fn play_own(self) {}\n&nbsp; fn play_some() -&gt; Self { Self }\n}\n</code></pre><p>è¿™ä¸ªè·Ÿä¸‹é¢è¿™ä¸ªä¾‹å­æ•ˆæœæ˜¯ä¸€æ ·çš„ã€‚</p><pre><code class=\"language-plain\">struct Football;\n\nimpl Sport for Football {\n  fn play(&amp;self) {}\n  fn play_mut(&amp;mut self) {}\n  fn play_own(self) {}\n  fn play_some() -&gt; Self { Self }\n}\n</code></pre><p>ä¸Šé¢çš„ä»£ç ç›¸å½“äº Football ç±»å‹é‡æ–°å®ç°äº†ä¸€æ¬¡ <code>play()</code> å’Œ <code>play_mut()</code> å‡½æ•°ï¼Œè¦†ç›–äº†traitçš„è¿™ä¸¤ä¸ªå‡½æ•°çš„é»˜è®¤å®ç°ã€‚</p><p>åœ¨ç±»å‹ä¸Šå®ç°äº†traitåå°±å¯ä»¥ä½¿ç”¨è¿™äº›æ–¹æ³•äº†ã€‚</p><pre><code class=\"language-plain\">fn main () {\n&nbsp; let mut f = Football;\n&nbsp; f.play();      // æ–¹æ³•åœ¨å®ä¾‹ä¸Šè°ƒç”¨\n&nbsp; f.play_mut();\n  f.play_own();\n&nbsp; let _g = Football::play_some();    // å…³è”å‡½æ•°è¦åœ¨ç±»å‹ä¸Šè°ƒç”¨\n  let _g = &lt;Football as Sport&gt;::play_some();  // æ³¨æ„è¿™æ ·ä¹Ÿæ˜¯å¯ä»¥çš„\n}\n</code></pre><h3>å…³è”ç±»å‹</h3><p>åœ¨traitä¸­ï¼Œå¯ä»¥å¸¦ä¸€ä¸ªæˆ–å¤šä¸ªå…³è”ç±»å‹ã€‚å…³è”ç±»å‹èµ·ä¸€ç§ç±»å‹å ä½åŠŸèƒ½ï¼Œå®šä¹‰traitæ—¶å£°æ˜ï¼Œåœ¨æŠŠtraitå®ç°åˆ°ç±»å‹ä¸Šçš„æ—¶å€™ä¸ºå…¶æŒ‡å®šå…·ä½“çš„ç±»å‹ã€‚æ¯”å¦‚ï¼š</p><pre><code class=\"language-plain\">pub trait Sport {\n&nbsp; &nbsp; type SportType;\n&nbsp; &nbsp;&nbsp;\n&nbsp; &nbsp; fn play(&amp;self,  st: Self::SportType);\n}\n\nstruct Football;\npub enum SportType {\n&nbsp; Land,\n&nbsp; Water,\n}\n\nimpl Sport for Football {\n&nbsp; type SportType = SportType;&nbsp; // è¿™é‡Œæ•…æ„å–ç›¸åŒçš„åå­—ï¼Œä¸åŒçš„åå­—ä¹Ÿæ˜¯å¯ä»¥çš„\n&nbsp; fn play(&amp;self,  st: Self::SportType){}&nbsp; // æ–¹æ³•ä¸­ç”¨åˆ°äº†å…³è”ç±»å‹\n}\n\nfn main() {\n&nbsp; let f = Football;\n&nbsp; f.play(SportType::Land);\n}\n</code></pre><p>è§£é‡Šä¸€ä¸‹ï¼Œæˆ‘ä»¬åœ¨ç»™Footballç±»å‹å®ç°Sport traitçš„æ—¶å€™ï¼ŒæŒ‡æ˜å…·ä½“çš„å…³è”ç±»å‹SportTypeä¸ºä¸€ä¸ªæšä¸¾ç±»å‹ï¼Œç”¨æ¥åŒºåˆ†é™†åœ°è¿åŠ¨ä¸æ°´ä¸Šè¿åŠ¨ã€‚æ³¨æ„çœ‹traitä¸­çš„playæ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œå®ƒå°±æ˜¯ç”¨çš„å…³è”ç±»å‹å ä½ã€‚</p><h4>åœ¨ T ä¸Šä½¿ç”¨å…³è”ç±»å‹</h4><p>æˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸ªç¤ºä¾‹ï¼Œæ ‡å‡†åº“ä¸­è¿­ä»£å™¨ Iterator traitçš„å®šä¹‰ã€‚</p><pre><code class=\"language-plain\">pub trait Iterator {\n    type Item;\n\n    fn next(&amp;mut self) -&gt; Option&lt;Self::Item&gt;;\n}\n</code></pre><p>Iteratorå®šä¹‰äº†ä¸€ä¸ªå…³è”ç±»å‹Itemã€‚æ³¨æ„è¿™é‡Œçš„ <code>Self::Item</code> å®é™…æ˜¯ <code>&lt;Self as Iterator&gt;::Item</code> çš„ç®€å†™ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå¦‚æœä¸€ä¸ªç±»å‹å‚æ•°è¢«TraitAçº¦æŸï¼Œè€ŒTraitAé‡Œæœ‰å…³è”ç±»å‹ MyTypeï¼Œé‚£ä¹ˆå¯ä»¥ç”¨ <code>T::Mytype</code> è¿™ç§å½¢å¼æ¥è¡¨ç¤ºè·¯ç”±åˆ°è¿™ä¸ªå…³è”ç±»å‹ã€‚</p><p>æ¯”å¦‚ï¼š</p><pre><code class=\"language-plain\">trait TraitA {\n  type Mytype;\n}\n\nfn doit&lt;T: TraitA&gt;(a: T::Mytype) {}  // è¿™é‡Œåœ¨å‡½æ•°ä¸­ä½¿ç”¨äº†å…³è”ç±»å‹\n\nstruct TypeA;\nimpl TraitA for TypeA {\n  type Mytype = String;  // å…·åŒ–å…³è”ç±»å‹ä¸ºString\n}\n\nfn main() {\n  doit::&lt;TypeA&gt;(\"abc\".to_string());  // ç»™Rustcå°åŠ©æ‰‹å–‚ä¿¡æ¯ï¼šTå…·åŒ–ä¸ºTypeA\n}\n</code></pre><p>ä¸Šé¢ç¤ºä¾‹åœ¨ <code>doit()</code> å‡½æ•°ä¸­ä½¿ç”¨äº†TraitAä¸­çš„å…³è”ç±»å‹ï¼Œç”¨çš„æ˜¯ <code>T::Mytype</code> è¿™ç§è·¯ç”±/è·¯å¾„å½¢å¼ã€‚åœ¨ <code>main()</code> å‡½æ•°ä¸­è°ƒç”¨ <code>doit()</code> å‡½æ•°æ—¶ï¼Œæ‰‹åŠ¨æŠŠç±»å‹å‚æ•°Tå…·åŒ–ä¸ºTypeAã€‚ä½ å¯ä»¥å¤šèŠ±ä¸€äº›æ—¶é—´ç†Ÿæ‚‰ä¸€ä¸‹è¿™ç§è¡¨è¾¾å½¢å¼ã€‚</p><h4>åœ¨çº¦æŸä¸­å…·åŒ–å…³è”ç±»å‹</h4><p>åœ¨æŒ‡å®šçº¦æŸçš„æ—¶å€™ï¼Œå¯ä»¥æŠŠå…³è”ç±»å‹å…·åŒ–ã€‚ä½ å¯ä»¥çœ‹ä¸€ä¸‹æˆ‘ç»™å‡ºçš„ç¤ºä¾‹ã€‚</p><pre><code class=\"language-plain\">trait TraitA {\n    type Item;\n}\nstruct Foo&lt;T: TraitA&lt;Item=String&gt;&gt; {  // è¿™é‡Œåœ¨çº¦æŸè¡¨è¾¾å¼ä¸­å¯¹å…³è”ç±»å‹åšäº†å…·åŒ–\n    x: T\n}\nstruct A;\nimpl TraitA for A {\n    type Item = String;\n}\n\nfn main() {\n    let a = Foo {\n        x: A,\n    };   \n}\n</code></pre><p>ä¸Šé¢çš„ä»£ç åœ¨çº¦æŸè¡¨è¾¾å¼ä¸­å¯¹å…³è”ç±»å‹åšäº†å…·åŒ–ï¼Œå…·åŒ–ä¸º String ç±»å‹ã€‚</p><pre><code class=\"language-plain\">T: TraitA&lt;Item=String&gt;\n</code></pre><p>è¿™æ ·è¡¨è¾¾çš„æ„æ€å°±æ˜¯é™åˆ¶å¿…é¡»å®ç°äº†TraitAï¼Œè€Œä¸”å®ƒçš„å…³è”ç±»å‹å¿…é¡»æ˜¯Stringæ‰èƒ½ä»£å…¥è¿™ä¸ªTã€‚å‡å¦‚æˆ‘ä»¬ç¨å¾®æ”¹ä¸€ä¸‹ï¼ŒæŠŠç±»å‹Aå®ç°TraitA æ—¶çš„å…³è”ç±»å‹Itemå…·åŒ–ä¸ºu32ï¼Œå°±ä¼šç¼–è¯‘æŠ¥é”™ï¼Œä½ å¯ä»¥è¯•ç€ç¼–è¯‘ä¸€ä¸‹çœ‹ä¸‹æç¤ºã€‚</p><pre><code class=\"language-plain\">trait TraitA {\n    type Item;\n}\nstruct Foo&lt;T: TraitA&lt;Item=String&gt;&gt; {\n    x: T\n}\nstruct A;\nimpl TraitA for A {\n    type Item = u32;  // è¿™é‡Œç±»å‹ä¸åŒ¹é…\n}\n\nfn main() {\n    let a = Foo {\n        x: A,  // æŠ¥é”™\n    };   \n}\n</code></pre><p>æ…¢æ…¢åœ°æˆ‘ä»¬ç»™çš„ç¤ºä¾‹æœ‰äº›çƒ§è„‘äº†ï¼Œç°åœ¨ä½ å¹¶ä¸éœ€è¦ç²¾é€šè¿™äº›ç”¨æ³•ï¼Œ<strong>ç¬¬ä¸€æ­¥æ˜¯è¦è®¤è¯†å®ƒä»¬</strong>ï¼Œå½“ä½ çœ‹åˆ°åˆ«äººå†™è¿™ç§ä»£ç çš„æ—¶å€™ï¼Œèƒ½åŸºæœ¬çœ‹æ‡‚å°±å¯ä»¥äº†ã€‚</p><h4>å¯¹å…³è”ç±»å‹çš„çº¦æŸ</h4><p>åœ¨å®šä¹‰å…³è”ç±»å‹çš„æ—¶å€™ï¼Œä¹Ÿå¯ä»¥ç»™å…³è”ç±»å‹æ·»åŠ çº¦æŸã€‚æ„æ€æ˜¯åé¢åœ¨å…·åŒ–è¿™ä¸ªç±»å‹çš„æ—¶å€™ï¼Œé‚£äº›ç±»å‹å¿…é¡»è¦æ»¡è¶³äºè¿™äº›çº¦æŸï¼Œæˆ–è€…è¯´å®ç°è¿‡è¿™äº›çº¦æŸã€‚ä½ å¯ä»¥çœ‹æˆ‘ç»™å‡ºçš„è¿™ä¸ªä¾‹å­ã€‚</p><pre><code class=\"language-plain\">use std::fmt::Debug;\n\ntrait TraitA {\n&nbsp; &nbsp; type Item: Debug;&nbsp; // è¿™é‡Œå¯¹å…³è”ç±»å‹æ·»åŠ äº†Debugçº¦æŸ\n}\n\n#[derive(Debug)]       // è¿™é‡Œåœ¨ç±»å‹Aä¸Šè‡ªåŠ¨derive Debugçº¦æŸ\nstruct A;\n\nstruct B;\n\nimpl TraitA for B {\n&nbsp; type Item = A;&nbsp; // è¿™é‡Œè¿™ä¸ªç±»å‹Aå·²æ»¡è¶³Debugçº¦æŸ\n}\n</code></pre><p>åœ¨ä½¿ç”¨æ—¶ç”šè‡³å¯ä»¥åŠ å¼ºå¯¹å…³è”ç±»å‹çš„çº¦æŸã€‚æ¯”å¦‚ï¼š</p><pre><code class=\"language-plain\">use std::fmt::Debug;\n\ntrait TraitA {\n&nbsp; &nbsp; type Item: Debug;&nbsp; // è¿™é‡Œå¯¹å…³è”ç±»å‹æ·»åŠ äº†Debugçº¦æŸ\n}\n\n#[derive(Debug)]\nstruct A;\n\nstruct B;\n\nimpl TraitA for B {\n&nbsp; type Item = A;&nbsp; // è¿™é‡Œè¿™ä¸ªç±»å‹Aå·²æ»¡è¶³Debugçº¦æŸ\n}\n\nfn doit&lt;T&gt;()&nbsp;   // å®šä¹‰ç±»å‹å‚æ•°T\nwhere\n&nbsp; &nbsp; T: TraitA,  // ä½¿ç”¨whereè¯­å¥å°†Tçš„çº¦æŸè¡¨è¾¾æ”¾åœ¨åé¢æ¥\n&nbsp; &nbsp; T::Item: Debug + PartialEq  // æ³¨æ„è¿™ä¸€å¥ï¼Œç›´æ¥å¯¹TraitAçš„å…³è”ç±»å‹Itemæ·»åŠ äº†æ›´å¤šä¸€ä¸ªçº¦æŸ PartialEq  \n{\n}\n</code></pre><p>è¯·æ³¨æ„ä¸Šé¢ä¾‹å­é‡Œçš„ <code>doit()</code> å‡½æ•°ã€‚æˆ‘ä»¬ä½¿ç”¨whereè¯­å¥æŠŠç±»å‹å‚æ•°Tçš„çº¦æŸè¡¨è¾¾æ”¾åœ¨åé¢ï¼ŒåŒæ—¶ä½¿ç”¨ <code>T::Item: Debug + PartialEq</code> æ¥åŠ å¼ºå¯¹ TraitAçš„å…³è”ç±»å‹Item çš„çº¦æŸï¼Œè¡¨ç¤ºåªæœ‰å®ç°è¿‡ TraitA ä¸”å…¶å…³è”ç±»å‹ Item çš„å…·åŒ–ç‰ˆå¿…é¡»æ»¡è¶³ Debug å’Œ PartialEq çš„çº¦æŸã€‚</p><p>è¿™ä¸ªä¾‹å­ç¨å¾®æœ‰ç‚¹å¤æ‚ï¼Œä¸è¿‡ç†è§£åï¼Œä½ ä¼šæ„Ÿè§‰åˆ°Rust traitçš„ç²¾é«“ã€‚ç›®å‰ä½ å¯ä»¥æŠŠè¿™ä¸ªç¤ºä¾‹å½“ä½œæ€ç»´ä½“æ“æ¥ç»ƒä¸€ç»ƒï¼Œæ²¡äº‹äº†å›æ¥ç»†å“ä¸€ä¸‹ã€‚å¦å¤–ï¼Œä½ å¯ä»¥è‡ªå·±ä¿®æ”¹è¿™ä¸ªä¾‹å­ï¼Œçœ‹çœ‹Rustcå°åŠ©æ‰‹ä¼šå‘Šè¯‰ä½ ä»€ä¹ˆã€‚</p><h3>å…³è”å¸¸é‡</h3><p>åŒæ ·çš„ï¼Œtraité‡Œä¹Ÿå¯ä»¥æºå¸¦ä¸€äº›å¸¸é‡ä¿¡æ¯ï¼Œè¡¨ç¤ºè¿™ä¸ªtraitçš„ä¸€äº›å†…åœ¨ä¿¡æ¯ï¼ˆæŒ‚è½½åœ¨traitä¸Šçš„ä¿¡æ¯ï¼‰ã€‚å’Œå…³è”ç±»å‹ä¸åŒçš„æ˜¯ï¼Œå…³è”å¸¸é‡å¯ä»¥åœ¨traitå®šä¹‰çš„æ—¶å€™æŒ‡å®šï¼Œä¹Ÿå¯ä»¥åœ¨ç»™å…·ä½“çš„ç±»å‹å®ç°çš„æ—¶å€™æŒ‡å®šã€‚</p><p>ä½ å¯ä»¥çœ‹ä¸€ä¸‹è¿™ä¸ªä¾‹å­ã€‚</p><pre><code class=\"language-plain\">trait TraitA {\n    const LEN: u32 = 10;\n}\n\nstruct A;\nimpl TraitA for A {\n    const LEN: u32 = 12;\n}\n\nfn main() {\n    println!(\"{:?}\",A::LEN);\n    println!(\"{:?}\",&lt;A as TraitA&gt;::LEN);\n}\n//è¾“å‡º\n12\n12\n</code></pre><p>å¦‚æœåœ¨implçš„æ—¶å€™ä¸æŒ‡å®šï¼Œä¼šæœ‰ä»€ä¹ˆæ•ˆæœå‘¢ï¼Ÿä½ å¯ä»¥çœ‹çœ‹ä»£ç è¿è¡Œåçš„ç»“æœã€‚</p><pre><code class=\"language-plain\">trait TraitA {\n    const LEN: u32 = 10;\n}\n\nstruct A;\nimpl TraitA for A {}\n\nfn main() {\n    println!(\"{:?}\",A::LEN);\n    println!(\"{:?}\",&lt;A as TraitA&gt;::LEN);\n}\n//è¾“å‡º\n10\n10\n</code></pre><h2>trait ä½œä¸ºä¸€ç§åè®®</h2><p>æˆ‘ä»¬å·²ç»çœ‹åˆ°ï¼Œtraité‡Œæœ‰å¯é€‰çš„å…³è”å‡½æ•°ã€å…³è”ç±»å‹ã€å…³è”å¸¸é‡è¿™ä¸‰é¡¹å†…å®¹ã€‚ä¸€æ—¦traitå®šä¹‰å¥½ï¼Œå®ƒå°±ç›¸å½“äºä¸€æ¡æ³•å¾‹æˆ–åè®®ï¼Œåœ¨å®ç°å®ƒçš„å„ä¸ªç±»å‹ä¹‹é—´ï¼Œåœ¨å›¢é˜Ÿåä½œä¸­ä¸åŒçš„å¼€å‘è€…ä¹‹é—´ï¼Œéƒ½å¿…é¡»æŒ‰ç…§å®ƒå®šä¹‰çš„è§„èŒƒå®æ–½ã€‚è¿™æ˜¯<strong>å¼ºåˆ¶æ€§</strong>çš„ï¼Œè€Œä¸”è¿™ç§å¼ºåˆ¶æ€§æ˜¯ç”±Rustç¼–è¯‘å™¨æ¥æ‰§è¡Œçš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ<strong>å¦‚æœä½ ä¸æƒ³æŒ‰è¿™å¥—åè®®æ¥å®æ–½ï¼Œé‚£ä¹ˆä½ æ³¨å®šæ— æ³•ç¼–è¯‘é€šè¿‡ã€‚</strong></p><p>è¿™ä¸ªå¯¹äºå›¢é˜Ÿå¼€å‘æ¥è¯´éå¸¸é‡è¦ã€‚å®ƒç›¸å½“äºåœ¨å›¢é˜Ÿä¸­åè°ƒçš„æ¥å£åè®®ï¼Œå¼ºåˆ¶ä¸åŒæˆå‘˜ä¹‹é—´è¾¾æˆä¸€è‡´ã€‚<strong>ä»è¿™ä¸ªæ„ä¹‰ä¸Šæ¥è®²ï¼ŒRustéå¸¸é€‚åˆå›¢é˜Ÿå¼€å‘</strong>ã€‚</p><h3>Where</h3><p>å½“ç±»å‹å‚æ•°åé¢æœ‰å¤šä¸ªtraitçº¦æŸçš„æ—¶å€™ï¼Œä¼šæ˜¾å¾—â€œå¤´é‡è„šè½»â€ï¼Œæ¯”è¾ƒéš¾çœ‹ï¼Œæ‰€ä»¥Rustæä¾›äº†Whereè¯­æ³•æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚Whereå…³é”®å­—å¯ç”¨æ¥æŠŠçº¦æŸå…³ç³»ç»Ÿä¸€æ”¾åœ¨åé¢è¡¨ç¤ºã€‚</p><p>æ¯”å¦‚è¿™ä¸ªå‡½æ•°ï¼š</p><pre><code class=\"language-plain\">fn doit&lt;T: TraitA + TraitB + TraitC + TraitD + TraitE&gt;(t: T) -&gt; i32 {}\n</code></pre><p>è¿™è¡Œä»£ç å¯ä»¥å†™æˆä¸‹é¢è¿™ç§å½¢å¼ã€‚</p><pre><code class=\"language-plain\">fn doit&lt;T&gt;(t: T) -&gt; i32\nwhere \n    T: TraitA + TraitB + TraitC + TraitD + TraitE\n{}\n</code></pre><p>è¿™æ ·è¿‡å¤šçš„traitçº¦æŸå°±ä¸è‡³äºå¤ªå¹²æ‰°å‡½æ•°ç­¾åçš„è§†è§‰å®Œæ•´æ€§ã€‚</p><h3>çº¦æŸä¾èµ–</h3><p>Rustè¿˜æä¾›äº†ä¸€ç§è¯­æ³•è¡¨ç¤ºçº¦æŸé—´çš„ä¾èµ–ã€‚</p><pre><code class=\"language-plain\">trait TraitA: TraitB {}\n</code></pre><p>åˆçœ‹èµ·æ¥ï¼Œè¿™è·ŸC++ç­‰è¯­è¨€çš„ç±»çš„ç»§æ‰¿æœ‰ç‚¹åƒã€‚å®é™…ä¸æ˜¯ï¼Œå·®å¼‚å¾ˆå¤§ã€‚<strong>è¿™ä¸ªè¯­æ³•çš„æ„æ€æ˜¯å¦‚æœæŸç§ç±»å‹è¦å®ç°TraitAï¼Œé‚£ä¹ˆå®ƒä¹Ÿè¦åŒæ—¶å®ç°TraitB</strong>ã€‚åè¿‡æ¥ä¸æˆç«‹ã€‚</p><p>ä¾‹å­ï¼š</p><pre><code class=\"language-plain\">trait Shape { fn area(&amp;self) -&gt; f64; }\ntrait Circle : Shape { fn radius(&amp;self) -&gt; f64; }\n</code></pre><p>ä¸Šé¢è¿™ä¸¤è¡Œä»£ç å…¶å®ç­‰ä»·äºä¸‹é¢è¿™ä¸¤è¡Œä»£ç ã€‚</p><pre><code class=\"language-plain\">trait Shape { fn area(&amp;self) -&gt; f64; }\ntrait Circle where Self: Shape { fn radius(&amp;self) -&gt; f64; }\n</code></pre><p>ä½ ä¹Ÿå¯ä»¥çœ‹ä¸€ä¸‹ä½¿ç”¨æ—¶çš„çº¦æŸè¡¨ç¤ºã€‚</p><pre><code class=\"language-plain\">T: Circle \nå®é™…ä¸Šè¡¨ç¤ºï¼š\nT: Circle + Shape\n</code></pre><p>åœ¨è¿™ä¸ªçº¦æŸä¾èµ–çš„é™å®šä¸‹ï¼Œå¦‚æœä½ å¯¹ä¸€ä¸ªç±»å‹å®ç°äº†Circle traitï¼Œå´æ²¡æœ‰å®ç°Shapeï¼Œé‚£ä¹ˆRustå°åŠ©æ‰‹ä¼šæç¤ºä½ è¿™ä¸ªç±»å‹ä¸æ»¡è¶³çº¦æŸShapeã€‚</p><p>æ¯”å¦‚ä¸‹é¢ä»£ç ï¼š</p><pre><code class=\"language-plain\">trait Shape {}\ntrait Circle : Shape {}\nstruct A;\nstruct B;\nimpl Shape for A {}\nimpl Circle for A {}\nimpl Circle for B {}\n</code></pre><p>æç¤ºå‡ºé”™ï¼š</p><pre><code class=\"language-plain\">error[E0277]: the trait bound `B: Shape` is not satisfied\n --&gt; src/main.rs:7:17\n  |\n7 | impl Circle for B {}\n  |                 ^ the trait `Shape` is not implemented for `B`\n  |\n  = help: the trait `Shape` is implemented for `A`\nnote: required by a bound in `Circle`\n --&gt; src/main.rs:2:16\n  |\n2 | trait Circle : Shape {}\n  |                ^^^^^ required by this bound in `Circle`\n\n</code></pre><p>ä¸€ä¸ªtraitä¾èµ–å¤šä¸ªtraitä¹Ÿæ˜¯å¯ä»¥çš„ã€‚</p><pre><code class=\"language-plain\">trait TraitA: TraitB + TraitC {}\n</code></pre><p>è¿™ä¸ªä¾‹å­é‡Œé¢ï¼Œ<code>T: TraitA&nbsp;</code> å®é™…è¡¨ <code>T: TraitA + TraitB + TraitC</code>ã€‚å› æ­¤å¯ä»¥å°‘å†™ä¸å°‘ä»£ç ã€‚</p><p><strong>çº¦æŸä¹‹é—´æ˜¯å®Œå…¨å¹³ç­‰çš„ï¼Œç†è§£è¿™ä¸€ç‚¹éå¸¸é‡è¦</strong>ï¼Œé€šè¿‡åˆšåˆšçš„è¿™äº›ä¾‹å­å¯ä»¥çœ‹åˆ°çº¦æŸä¾èµ–æ˜¯æ¶ˆé™¤çº¦æŸæ¡ä»¶å†—ä½™çš„ä¸€ç§æ–¹å¼ã€‚</p><p>åœ¨çº¦æŸä¾èµ–ä¸­ï¼Œå†’å·åé¢çš„å« supertraitï¼Œå†’å·å‰é¢çš„å« subtraitã€‚å¯ä»¥ç†è§£ä¸ºsubtraitåœ¨supertraitçš„çº¦æŸä¹‹ä¸Šï¼Œåˆå¤šäº†ä¸€å¥—æ–°çš„çº¦æŸã€‚è¿™äº›ä¸åŒçº¦æŸçš„åœ°ä½æ˜¯å¹³ç­‰çš„ã€‚</p><h3>çº¦æŸä¸­åŒåæ–¹æ³•çš„è®¿é—®</h3><p>æœ‰çš„æ—¶å€™å¤šä¸ªçº¦æŸä¸Šä¼šå®šä¹‰åŒåæ–¹æ³•ï¼Œåƒä¸‹é¢è¿™æ ·ï¼š</p><pre><code class=\"language-plain\">trait Shape {\n    fn play(&amp;self) {    // å®šä¹‰äº†play()æ–¹æ³•\n        println!(\"1\");\n    }\n}\ntrait Circle : Shape {\n    fn play(&amp;self) {    // ä¹Ÿå®šä¹‰äº†play()æ–¹æ³•\n        println!(\"2\");\n    }\n}\nstruct A;\nimpl Shape for A {}\nimpl Circle for A {}\n\nimpl A {\n    fn play(&amp;self) {    // åˆç›´æ¥åœ¨Aä¸Šå®ç°äº†play()æ–¹æ³•\n        println!(\"3\");\n    }\n}\n\nfn main() {\n  let a = A;\n  a.play();    // è°ƒç”¨ç±»å‹Aä¸Šå®ç°çš„play()æ–¹æ³•\n  &lt;A as Circle&gt;::play(&amp;a);  // è°ƒç”¨trait Circleä¸Šå®šä¹‰çš„play()æ–¹æ³•\n  &lt;A as Shape&gt;::play(&amp;a);   // è°ƒç”¨trait Shapeä¸Šå®šä¹‰çš„play()æ–¹æ³•\n}\n//è¾“å‡º\n3\n2\n1\n</code></pre><p>ä¸Šé¢ç¤ºä¾‹å±•ç¤ºäº†ä¸¤ä¸ªä¸åŒçš„traitå®šä¹‰åŒåæ–¹æ³•ï¼Œä»¥åŠåœ¨ç±»å‹è‡ªèº«ä¸Šå†å®šä¹‰åŒåæ–¹æ³•ï¼Œç„¶åæ˜¯å¦‚ä½•ç²¾å‡†åœ°è°ƒç”¨åˆ°ä¸åŒçš„å®ç°çš„ã€‚å¯ä»¥çœ‹åˆ°ï¼Œåœ¨Rustä¸­ï¼ŒåŒåæ–¹æ³•æ²¡æœ‰è¢«è¦†ç›–ï¼Œèƒ½ç²¾å‡†åœ°è·¯ç”±è¿‡å»ã€‚</p><p><code>&lt;A as Circle&gt;::play(&amp;a);</code> è¿™ç§è¯­æ³•ï¼Œå«åš<strong>å®Œå…¨é™å®šè¯­æ³•</strong>ï¼Œæ˜¯è°ƒç”¨ç±»å‹ä¸ŠæŸä¸€ä¸ªæ–¹æ³•çš„å®Œæ•´è·¯å¾„è¡¨è¾¾ã€‚å¦‚æœimplå’Œimpl traitæ—¶æœ‰åŒåæ–¹æ³•ï¼Œç”¨è¿™ä¸ªè¯­æ³•å°±å¯ä»¥æ˜ç¡®åŒºåˆ†å‡ºæ¥ã€‚</p><h2>ç”¨traitå®ç°èƒ½åŠ›é…ç½®</h2><h3>traitæä¾›äº†å¯»æ‰¾æ–¹æ³•çš„èŒƒå›´</h3><p>Ruståœ¨ä¸€ä¸ªå®ä¾‹ä¸Šæ˜¯æ€ä¹ˆæ£€æŸ¥æœ‰æ²¡æœ‰æŸä¸ªæ–¹æ³•çš„å‘¢ï¼Ÿ</p><ol>\n<li>æ£€æŸ¥æœ‰æ²¡æœ‰ç›´æ¥åœ¨è¿™ä¸ªç±»å‹ä¸Šå®ç°è¿™ä¸ªæ–¹æ³•ã€‚</li>\n<li>æ£€æŸ¥æœ‰æ²¡æœ‰åœ¨è¿™ä¸ªç±»å‹ä¸Šå®ç°æŸä¸ªtraitï¼Œtraitä¸­æœ‰è¿™ä¸ªæ–¹æ³•ã€‚</li>\n</ol><p>ä¸€ä¸ªç±»å‹å¯èƒ½å®ç°äº†å¤šä¸ªtraitï¼Œä¸åŒçš„traitä¸­å„æœ‰ä¸€å¥—æ–¹æ³•ï¼Œè¿™äº›ä¸åŒçš„æ–¹æ³•ä¸­å¯èƒ½è¿˜ä¼šå‡ºç°åŒåæ–¹æ³•ã€‚Ruståœ¨è¿™é‡Œé‡‡ç”¨äº†ä¸€ç§æƒ°æ€§çš„æœºåˆ¶ï¼Œç”±å¼€å‘è€…æŒ‡å®šåœ¨å½“å‰çš„modæˆ–scopeä¸­ä½¿ç”¨å“ªå¥—æˆ–å“ªå‡ å¥—èƒ½åŠ›ã€‚å› æ­¤ï¼Œå¯¹åº”åœ°éœ€è¦å¼€å‘è€…æ‰‹åŠ¨åœ°å°†è¦ç”¨åˆ°çš„traitå¼•å…¥å½“å‰scopeã€‚</p><p>æ¯”å¦‚ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬å®šä¹‰ä¸¤ä¸ªéš”ç¦»çš„æ¨¡å—ï¼Œå¹¶åœ¨module_bé‡Œå¼•å…¥module_aä¸­å®šä¹‰çš„ç±»å‹Aã€‚</p><pre><code class=\"language-plain\">mod module_a {\n&nbsp; &nbsp; pub trait Shape {\n&nbsp; &nbsp; &nbsp; &nbsp; fn play(&amp;self) {\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; println!(\"1\");\n&nbsp; &nbsp; &nbsp; &nbsp; }\n&nbsp; &nbsp; }\n&nbsp; &nbsp;&nbsp;\n&nbsp; &nbsp; pub struct A;\n&nbsp; &nbsp; impl Shape for A {}\n}\n\nmod module_b {\n&nbsp; &nbsp; use super::module_a::A;  // è¿™é‡Œåªå¼•å…¥äº†å¦ä¸€ä¸ªæ¨¡å—ä¸­çš„ç±»å‹\n&nbsp; &nbsp;&nbsp;\n&nbsp; &nbsp; fn doit() {\n&nbsp; &nbsp; &nbsp; &nbsp; let a = A;\n&nbsp; &nbsp; &nbsp; &nbsp; a.play();\n&nbsp; &nbsp; }\n}\n</code></pre><p>æŠ¥é”™äº†ï¼Œæ€ä¹ˆåŠå‘¢ï¼Ÿ</p><pre><code class=\"language-plain\">error[E0599]: no method named `play` found for struct `A` in the current scope\n  --&gt; src/lib.rs:17:11\n   |\n3  |         fn play(&amp;self) {\n   |            ---- the method is available for `A` here\n...\n8  |     pub struct A;\n   |     ------------ method `play` not found for this struct\n...\n17 |         a.play();\n   |           ^^^^ method not found in `A`\n   |\n   = help: items from traits can only be used if the trait is in scope\nhelp: the following trait is implemented but not in scope; perhaps add a `use` for it:\n   |\n13 +     use crate::module_a::Shape;\n</code></pre><p>å¼•å…¥traitå°±å¯ä»¥äº†ã€‚</p><pre><code class=\"language-plain\">mod module_a {\n&nbsp; &nbsp; pub trait Shape {\n&nbsp; &nbsp; &nbsp; &nbsp; fn play(&amp;self) {\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; println!(\"1\");\n&nbsp; &nbsp; &nbsp; &nbsp; }\n&nbsp; &nbsp; }\n&nbsp; &nbsp;&nbsp;\n&nbsp; &nbsp; pub struct A;\n&nbsp; &nbsp; impl Shape for A {}\n}\n\nmod module_b {\n&nbsp; &nbsp; use super::module_a::Shape;  // å¼•å…¥è¿™ä¸ªtrait\n&nbsp; &nbsp; use super::module_a::A;\n&nbsp; &nbsp;&nbsp;\n&nbsp; &nbsp; fn doit() {\n&nbsp; &nbsp; &nbsp; &nbsp; let a = A;\n&nbsp; &nbsp; &nbsp; &nbsp; a.play();\n&nbsp; &nbsp; }\n}\n</code></pre><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨å½“å‰modä¸å¼•å…¥å¯¹åº”çš„traitï¼Œä½ å°±å¾—ä¸åˆ°ç›¸åº”çš„èƒ½åŠ›ã€‚å› æ­¤ <strong>Rust çš„traitéœ€è¦å¼•å…¥å½“å‰scopeæ‰èƒ½ä½¿ç”¨çš„æ–¹å¼å¯ä»¥çœ‹ä½œæ˜¯èƒ½åŠ›é…ç½®ï¼ˆCapability Configurationï¼‰æœºåˆ¶ã€‚</strong></p><h3>çº¦æŸå¯æŒ‰éœ€é…ç½®</h3><p>æœ‰äº†traitè¿™ç§èƒ½åŠ›é…ç½®æœºåˆ¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨éœ€è¦çš„åœ°æ–¹æŒ‰éœ€åŠ è½½èƒ½åŠ›ã€‚éœ€è¦ä»€ä¹ˆèƒ½åŠ›å°±å¼•å…¥ä»€ä¹ˆèƒ½åŠ›ï¼ˆæä¾›å¯¹åº”çš„çº¦æŸï¼‰ã€‚ä¸éœ€è¦ä¸€æ¬¡æ€§é™åˆ¶è¿‡æ­»ï¼Œæ¯”å¦‚ä¸‹é¢çš„ç¤ºä¾‹å°±æ¼”ç¤ºäº†å‡ ç§çº¦æŸç»„åˆçš„å¯èƒ½æ€§ã€‚</p><pre><code class=\"language-plain\">trait TraitA {}\ntrait TraitB {}\ntrait TraitC {}\n\nstruct A;\nstruct B;\nstruct C;\n\nimpl TraitA for A {}\nimpl TraitB for A {}\nimpl TraitC for A {}  // å¯¹ç±»å‹Aå®ç°äº†TraitA, TraitB, TraitC\nimpl TraitB for B {}\nimpl TraitC for B {}  // å¯¹ç±»å‹Bå®ç°äº†TraitB, TraitC\nimpl TraitC for C {}  // å¯¹ç±»å‹Cå®ç°äº†TraitC\n\n// 7ä¸ªç‰ˆæœ¬çš„doit() å‡½æ•°\nfn doit1&lt;T: TraitA + TraitB + TraitC&gt;(t: T) {}\nfn doit2&lt;T: TraitA + TraitB&gt;(t: T) {}\nfn doit3&lt;T: TraitA + TraitC&gt;(t: T) {}\nfn doit4&lt;T: TraitB + TraitC&gt;(t: T) {}\nfn doit5&lt;T: TraitA&gt;(t: T) {}\nfn doit6&lt;T: TraitB&gt;(t: T) {}\nfn doit7&lt;T: TraitC&gt;(t: T) {}\n\nfn main() {\n    doit1(A);\n    doit2(A);\n    doit3(A);\n    doit4(A);\n    doit5(A);\n    doit6(A);\n    doit7(A);  // Açš„å®ä¾‹èƒ½ç”¨åœ¨æ‰€æœ‰7ä¸ªå‡½æ•°ç‰ˆæœ¬ä¸­\n\n    doit4(B);\n    doit6(B);\n    doit7(B);  // Bçš„å®ä¾‹åªèƒ½ç”¨åœ¨3ä¸ªå‡½æ•°ç‰ˆæœ¬ä¸­\n    \n    doit7(C);  // Cçš„å®ä¾‹åªèƒ½ç”¨åœ¨1ä¸ªå‡½æ•°ç‰ˆæœ¬ä¸­\n}\n</code></pre><p>ç¤ºä¾‹é‡Œï¼ŒAçš„å®ä¾‹èƒ½ç”¨åœ¨å…¨éƒ¨çš„ï¼ˆ7ä¸ªï¼‰å‡½æ•°ç‰ˆæœ¬ä¸­ï¼ŒBçš„å®ä¾‹åªèƒ½ç”¨åœ¨3ä¸ªå‡½æ•°ç‰ˆæœ¬ä¸­ï¼ŒCçš„å®ä¾‹åªèƒ½ç”¨åœ¨1ä¸ªå‡½æ•°ç‰ˆæœ¬ä¸­ã€‚</p><p>æˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸ªç¤ºä¾‹ï¼Œè¿™ä¸ªç¤ºä¾‹æ¼”ç¤ºäº†å¦‚ä½•å¯¹å¸¦ç±»å‹å‚æ•°çš„ç»“æ„ä½“åœ¨å®ç°æ–¹æ³•çš„æ—¶å€™ï¼ŒæŒ‰éœ€æ±‚æ–½åŠ çº¦æŸã€‚</p><pre><code class=\"language-plain\">use std::fmt::Display;\n\nstruct Pair&lt;T&gt; {\n    x: T,\n    y: T,\n}\n\nimpl&lt;T&gt; Pair&lt;T&gt; {    // ç¬¬ä¸€æ¬¡ impl \n    fn new(x: T, y: T) -&gt; Self {\n        Self { x, y }\n    }\n}\n\nimpl&lt;T: Display + PartialOrd&gt; Pair&lt;T&gt; {  // ç¬¬äºŒæ¬¡ impl \n    fn cmp_display(&amp;self) {\n        if self.x &gt;= self.y {\n            println!(\"The largest member is x = {}\", self.x);\n        } else {\n            println!(\"The largest member is y = {}\", self.y);\n        }\n    }\n}\n</code></pre><p>è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å¯¹ç±»å‹ <code>Pair&lt;T&gt;</code> åšäº†ä¸¤æ¬¡implã€‚å¯ä»¥çœ‹åˆ°ï¼Œç¬¬äºŒæ¬¡implæ—¶ï¼Œæ·»åŠ äº†çº¦æŸ <code>T: Display + PartialOrd</code>ã€‚</p><p>å› ä¸ºæˆ‘ä»¬cmd_displayæ–¹æ³•éœ€è¦ç”¨åˆ°æ‰“å°èƒ½åŠ›å’Œå…ƒç´ æ¯”å¤§å°æ’åºçš„èƒ½åŠ›ï¼Œæ‰€ä»¥å¯¹ç±»å‹å‚æ•°Tæ–½åŠ äº† Display å’Œ PartialOrdä¸¤ç§çº¦æŸï¼ˆä¸¤ç§èƒ½åŠ›ï¼‰ã€‚è€Œå¯¹äºnewå‡½æ•°æ¥è¯´ï¼Œå®ƒä¸éœ€è¦è¿™äº›èƒ½åŠ›ï¼Œå› æ­¤implçš„æ—¶å€™å°±å¯ä»¥ä¸æ–½åŠ è¿™äº›çº¦æŸã€‚æˆ‘ä»¬å‰é¢è®²è¿‡ï¼ŒRustä¸­å¯¹ç±»å‹æ˜¯å¯ä»¥å¤šæ¬¡implçš„ã€‚</p><h2>å…³äºtraitï¼Œä½ è¿˜è¦äº†è§£ä»€ä¹ˆï¼Ÿ</h2><h3>å­¤å„¿è§„åˆ™</h3><p>ä¸ºäº†ä¸å¯¼è‡´æ··ä¹±ï¼ŒRustè¦æ±‚åœ¨ä¸€ä¸ªæ¨¡å—ä¸­ï¼Œå¦‚æœè¦å¯¹ä¸€ä¸ªç±»å‹å®ç°æŸä¸ªtraitï¼Œè¿™ä¸ªç±»å‹å’Œè¿™ä¸ªtraitå…¶ä¸­å¿…é¡»æœ‰ä¸€ä¸ªæ˜¯åœ¨å½“å‰æ¨¡å—ä¸­å®šä¹‰çš„ã€‚æ¯”å¦‚ä¸‹é¢è¿™ä¸¤ç§æƒ…å†µéƒ½æ˜¯å¯ä»¥çš„ã€‚</p><p>æƒ…å†µ1ï¼š</p><pre><code class=\"language-plain\">use std::fmt::Display;\n\nstruct A;\nimpl Display for A {}\n</code></pre><p>æƒ…å†µ2ï¼š</p><pre><code class=\"language-plain\">trait TraitA {}\nimpl TraitA for u32 {}\n</code></pre><p>ä½†æ˜¯ä¸‹é¢è¿™æ ·ä¸å¯ä»¥ï¼Œä¼šç¼–è¯‘æŠ¥é”™ã€‚</p><pre><code class=\"language-plain\">use std::fmt::Display;\n\nimpl Display for u32 {}\n</code></pre><pre><code class=\"language-plain\">error[E0117]: only traits defined in the current crate can be implemented for primitive types\n --&gt; src/lib.rs:3:1\n  |\n3 | impl Display for u32 {}\n  | ^^^^^^^^^^^^^^^^^---\n  | |                |\n  | |                `u32` is not defined in the current crate\n  | impl doesn't use only types from inside the current crate\n  |\n  = note: define and implement a trait or new type instead\n</code></pre><p>å› ä¸ºæˆ‘ä»¬æƒ³ç»™ä¸€ä¸ªå¤–éƒ¨ç±»å‹å®ç°ä¸€ä¸ªå¤–éƒ¨traitï¼Œè¿™æ˜¯ä¸å…è®¸çš„ã€‚Rustcå°åŠ©æ‰‹æç¤ºæˆ‘ä»¬ï¼Œå¦‚æœå®åœ¨æƒ³ç”¨çš„è¯ï¼Œå¯ä»¥ç”¨Newtypeæ¨¡å¼ã€‚</p><p>æ¯”å¦‚åƒä¸‹é¢è¿™æ ·ï¼š</p><pre><code class=\"language-plain\">use std::fmt::Display;\n\nstruct MyU32(u32);    // ç”¨ MyU32 ä»£æ›¿ u32\n\nimpl Display for MyU32 {\n  // è¯·å®ç°å®Œæ•´\n}\n\nimpl MyU32 {\n    fn get(&amp;self) -&gt; u32 {  // éœ€è¦å®šä¹‰ä¸€ä¸ªè·å–çœŸå®æ•°æ®çš„æ–¹æ³•\n        self.0\n    }\n}\n</code></pre><h3>Blanket Implementation</h3><p>Blanket Implementationåˆå«åšç»Ÿä¸€å®ç°ã€‚</p><p>æ–¹å¼å¦‚ä¸‹ï¼š</p><pre><code class=\"language-plain\">trait TraitA {}\ntrait TraitB {}\n\nimpl&lt;T: TraitB&gt; TraitA for T {}  // è¿™é‡Œç›´æ¥å¯¹Tè¿›è¡Œå®ç°TraitA\n</code></pre><p>ç»Ÿä¸€å®ç°åï¼Œå°±ä¸è¦å¯¹æŸä¸ªå…·ä½“çš„ç±»å‹å†å®ç°ä¸€æ¬¡äº†ã€‚å› ä¸ºåŒä¸€ä¸ªtraitåªèƒ½å®ç°ä¸€æ¬¡åˆ°æŸä¸ªç±»å‹ä¸Šã€‚è¿™ä¸ªä¸åƒæ˜¯å¯¹ç±»å‹åš implï¼Œå¯ä»¥å®ç°å¤šæ¬¡ï¼ˆå‡½æ•°åè¦ä¸å†²çªï¼‰ã€‚</p><p>æ¯”å¦‚ï¼š</p><pre><code class=\"language-plain\">trait TraitA {}\ntrait TraitB {}\n\nimpl&lt;T: TraitB&gt; TraitA for T {}\n\nimpl TraitB for u32 {}\nimpl TraitA for u32 {}\n</code></pre><p>è¿™æ ·å°±ä¼šæŠ¥é”™ã€‚</p><pre><code class=\"language-plain\">error[E0119]: conflicting implementations of trait `TraitA` for type `u32`\n  --&gt; src/lib.rs:10:1\n   |\n6  | impl&lt;T: TraitB&gt; TraitA for T {}\n   | ---------------------------- first implementation here\n...\n10 | impl TraitA for u32 {}\n   | ^^^^^^^^^^^^^^^^^^^ conflicting implementation for `u32`\n\n</code></pre><p>æˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹ï¼Œè¿™æ ·å°±ä¸ä¼šæŠ¥é”™äº†ã€‚</p><pre><code class=\"language-plain\">trait TraitA {}\ntrait TraitB {}\n\nimpl&lt;T: TraitB&gt; TraitA for T {}\n\nimpl TraitA for u32 {}\n</code></pre><p>å› ä¸ºu32å¹¶æ²¡æœ‰è¢«TraitBçº¦æŸï¼Œæ‰€ä»¥å®ƒä¸æ»¡è¶³ç¬¬4è¡Œçš„blanket implementationã€‚å› æ­¤å°±ä¸ç®—é‡å¤å®ç°ã€‚</p><h2>å°ç»“</h2><p>è®¤çœŸå­¦å®Œäº†è¿™èŠ‚è¯¾çš„å†…å®¹ä¹‹åï¼Œä½ æœ‰æ²¡æœ‰è¢«éœ‡æ’¼åˆ°ï¼Ÿè¿™å®Œå…¨å°±æ˜¯ä¸€ç§å…¨æ–°çš„æ€ç»´ä½“ç³»ï¼Œå’Œä¹‹å‰æˆ‘ä»¬ç†Ÿæ‚‰çš„OOPç­‰æ–¹å¼å®Œå…¨ä¸åŒäº†ã€‚Rustä¸­traitçš„æ¦‚å¿µæœ¬èº«éå¸¸ç®€å•ï¼Œä½†ç”¨æ³•åˆæå…¶çµæ´»ã€‚</p><p>traitçš„å¼•å…¥æ˜¯ä¸ºäº†å¯¹æ³›å‹çš„ç±»å‹ç©ºé—´è¿›è¡Œçº¦æŸï¼Œè¿›å…¥çº¦æŸçš„åŒæ—¶ä¹Ÿå°±æä¾›äº†èƒ½åŠ›ï¼Œçº¦æŸä¸èƒ½åŠ›æ˜¯ä¸€ä½“ä¸¤é¢ã€‚traitä¸­å¯ä»¥åŒ…å«å…³è”å‡½æ•°ã€å…³è”ç±»å‹å’Œå…³è”å¸¸é‡ã€‚å…¶ä¸­å…³è”ç±»å‹çš„ç†è§£éš¾åº¦è¾ƒå¤§ï¼Œä½†æ˜¯å…¶æ¨¡å¼ä¹Ÿå°±é‚£ä¹ˆå›ºå®šçš„å‡ ç§ï¼Œå¤šèŠ±ç‚¹æ—¶é—´ç†Ÿæ‚‰ä¸€èˆ¬ä¸ä¼šæœ‰é—®é¢˜ã€‚</p><p>traitå®šä¹‰å¥½åï¼Œå¯ä»¥ä½œä¸ºä»£ç ä¸ä»£ç ä¹‹é—´ã€ä»£ç ä¸å¼€å‘è€…ä¹‹é—´ã€å¼€å‘è€…ä¸å¼€å‘è€…ä¹‹é—´çš„å¼ºåˆ¶æ€§æ³•å¾‹åè®®è€Œå­˜åœ¨ï¼Œè€Œè¿™ä¸ªæ³•å¾‹çš„ä»²è£è€…å°±æ˜¯Rustcç¼–è¯‘å™¨ã€‚</p><p>å¯ä»¥è¯´ï¼Œ<strong>Rustæ˜¯ä¸€é—¨é¢å‘çº¦æŸç¼–ç¨‹çš„è¯­è¨€</strong>ã€‚é¢å‘çº¦æŸæ˜¯Rustä¸­éå¸¸ç‹¬ç‰¹çš„è®¾è®¡ï¼Œä¹Ÿæ˜¯Rustçš„çµé­‚ã€‚ç®€å•åœ°æŠŠtraitå½“ä½œå…¶ä»–è¯­è¨€ä¸­çš„classæˆ–interfaceå»ç†è§£ä½¿ç”¨ï¼Œæ˜¯éå¸¸æœ‰å®³çš„ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/5f/94/5f57eb3a7ebaa3d1cc6196ee01137c94.jpg?wh=1961x1669\" alt=\"\"></p><h2>æ€è€ƒé¢˜</h2><p>å¦‚æœä½ å­¦ä¹ æˆ–è€…äº†è§£è¿‡Javaã€C++ç­‰é¢å‘å¯¹è±¡è¯­è¨€çš„è¯ï¼Œå¯ä»¥èŠä¸€èŠtraitçš„ä¾èµ–å’ŒOOPç»§æ‰¿çš„åŒºåˆ«åœ¨å“ªé‡Œã€‚</p><p>æ¬¢è¿ä½ æŠŠæ€è€ƒåçš„ç»“æœåˆ†äº«åˆ°è¯„è®ºåŒºï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠè¿™èŠ‚è¯¾çš„å†…å®¹åˆ†äº«ç»™å¯¹Rustæ„Ÿå…´è¶£çš„æœ‹å‹ï¼Œæˆ‘ä»¬ä¸‹èŠ‚è¯¾å†è§ï¼</p>","neighbors":{"left":{"article_title":"08ï½œOption<T>ä¸Result<T, E>ã€è¿­ä»£å™¨","id":722702},"right":{"article_title":"10ï½œå†æ¢traitï¼šå¸¦ç±»å‹å‚æ•°çš„traitåŠtrait object","id":724776}},"comments":[{"had_liked":false,"id":383712,"user_name":"Mike Tang","can_delete":false,"product_type":"c1","uid":2186062,"ip_address":"é‡åº†","ucode":"55775BCEDB5937","user_header":"https://static001.geekbang.org/account/avatar/00/21/5b/4e/8e1f699e.jpg","comment_is_top":true,"comment_ctime":1699506705,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":2,"product_id":100626901,"comment_content":"ç¥è¯´ï¼Œä¼—ç”Ÿå¹³ç­‰ã€‚Rustè¯´ï¼Œä¼—traitå¹³ç­‰ã€‚","like_count":10,"discussions":[{"author":{"id":1195144,"avatar":"https://static001.geekbang.org/account/avatar/00/12/3c/88/6bef27d6.jpg","nickname":"å¤§ç¥åšå£«","note":"","ucode":"8C4318095949F0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":632485,"discussion_content":"åŒå­¦ä½ å¥½ ğŸ˜","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1700822671,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":383682,"user_name":"ä¸‹é›¨å¤©","can_delete":false,"product_type":"c1","uid":1008315,"ip_address":"æ¹–åŒ—","ucode":"816B3792ECC50A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/62/bb/323a3133.jpg","comment_is_top":false,"comment_ctime":1699443037,"is_pvip":false,"replies":[{"id":139935,"content":"å¤ªå½¢è±¡äº†ï¼Œ10000ä¸ªèµ","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":2186062,"ctime":1699505346,"ip_address":"é‡åº†","comment_id":383682,"utype":1}],"discussion_count":5,"race_medal":0,"score":2,"product_id":100626901,"comment_content":"trait çš„ä¾èµ–ï¼šå°æ˜è¦å¬ä»æ•°å­¦è€å¸ˆï¼Œè¯­æ–‡è€å¸ˆï¼Œè‹±è¯­è€å¸ˆçš„è¯ã€‚è€å¸ˆä¹‹é—´æ˜¯å¹³ç­‰å…³ç³»ï¼Œå¤šä¸ªä¾èµ–å¹³ç­‰ï¼Œæœ€å°ä¾èµ–é€‰æ‹©è‡ªå·±å–œæ¬¢æ»´åŠŸèƒ½ã€‚\nOOP ç»§æ‰¿ï¼šå°æ˜è¦å¬ä»–çˆ¸ï¼Œä»–çˆ·çˆ·ï¼Œä»–æ›¾ç¥–çˆ¶çš„è¯ã€‚ç»§æ‰¿ä¹‹é—´å­˜åœ¨çˆ¶å­å…³ç³»ï¼Œç»§æ‰¿è¿‡æ¥ä¸€å †ç ´å±æ€§å’Œæ–¹æ³•ï¼Œä¹Ÿè®¸æ ¹æœ¬ä¸æ˜¯è‡ªå·±æƒ³è¦æ»´ï¼Œè¿˜è¦è´Ÿé‡å‰è¡Œã€‚","like_count":30,"discussions":[{"author":{"id":2186062,"avatar":"https://static001.geekbang.org/account/avatar/00/21/5b/4e/8e1f699e.jpg","nickname":"Mike Tang","note":"","ucode":"55775BCEDB5937","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":631402,"discussion_content":"å¤ªå½¢è±¡äº†ï¼Œ10000ä¸ªèµ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1699505346,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"é‡åº†","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":3791900,"avatar":"","nickname":"Geek_2bd44f","note":"","ucode":"6BD3312C2AAC69","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":632962,"discussion_content":"æ˜¯çš„ï¼Œå†™äº†6å¹´javaçš„æˆ‘ï¼Œæ·±æ·±çš„æ„Ÿå—åˆ°ç»§æ‰¿å¾ˆå¤šæ—¶å€™ä¸æ˜¯æœ€ä¼˜è§£ï¼Œç»„åˆæ‰æ˜¯å¤§éƒ¨åˆ†æƒ…å†µçš„æœ€ä¼˜è§£ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1701680274,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å››å·","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2911084,"avatar":"https://static001.geekbang.org/account/avatar/00/2c/6b/6c/3e80afaf.jpg","nickname":"HappyHasson","note":"","ucode":"B84CC43E349CFA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":648546,"discussion_content":"è¯´çš„å¾ˆå½¢è±¡ã€‚ ç‚¹èµã€‚\nä¸ªäººè§‰å¾—è¿™é‡Œéšè—äº†ä¸€ä¸ªé—®é¢˜ï¼Œç»§æ‰¿äº†ä¸€å †ç ´çƒ‚ç†Ÿæ‚‰ï¼Œå…¶å®æ˜¯çˆ¶å¯¹è±¡åˆ†ç¦»çš„ä¸å¥½ï¼Œå¦‚æœæ¨¡å—åŒ–çš„å¾ˆå¥½ï¼Œåšèµ·æ¥å’Œrustçš„å·®ä¸å¤šèˆ’æœã€‚ä½†æ˜¯ï¼Œrustçš„ä¼˜åŠ¿æ˜¯è¯­è¨€å±‚é¢å°±æŠŠè®¾è®¡åšå®Œäº†ï¼Œå…¶ä»–è¯­è¨€å¦‚javaã€c++çš„ç»§æ‰¿å´å¾ˆè€ƒéªŒcoderçš„è®¾è®¡èƒ½åŠ›ã€‚ä¹Ÿç»™rustç‚¹èµ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1721785550,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1115149,"avatar":"https://static001.geekbang.org/account/avatar/00/11/04/0d/3dc5683a.jpg","nickname":"æŸ¯å¯Ÿé‡‘","note":"","ucode":"F722BF8FCD2C47","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":645737,"discussion_content":"ä½ ç”Ÿå‘½ä¸­åªæœ‰è€å¸ˆï¼Œæ²¡æœ‰äº²äººå—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1716613963,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ç¾å›½","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1672482,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqrbHib1v0wPRVHxrFK2CPQQX8Wg3rRMPiaZ5teMKu5klT48yns6yo4krZsIqHskwdEsibVvQ3QB7CUQ/132","nickname":"Geek_6fjt20","note":"","ucode":"B7EB9B061E2C06","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":631422,"discussion_content":"ä¸æƒ³ç»§æ‰¿çš„å¯ä»¥æ‰”æ‰ï¼Œä½†æœ‰äº›ä¸œè¥¿æ˜¯é—ä¼ ï¼Œæƒ³æ‰”éƒ½æ‰”ä¸æ‰ã€‚ã€‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1699517009,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":386110,"user_name":"weineel","can_delete":false,"product_type":"c1","uid":1049741,"ip_address":"æ±Ÿè‹","ucode":"6DC6EF4F256A53","user_header":"https://static001.geekbang.org/account/avatar/00/10/04/8d/005c2ff3.jpg","comment_is_top":false,"comment_ctime":1704114809,"is_pvip":true,"replies":[{"id":140729,"content":"å¯¹çš„å¯¹çš„.","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":2186062,"ctime":1704170925,"ip_address":"é‡åº†","comment_id":386110,"utype":1}],"discussion_count":1,"race_medal":1,"score":2,"product_id":100626901,"comment_content":"åœ¨è¯­æ³•å±‚é¢å®è·µäº†ç»„åˆä¼˜äºç»§æ‰¿ã€‚","like_count":6,"discussions":[{"author":{"id":2186062,"avatar":"https://static001.geekbang.org/account/avatar/00/21/5b/4e/8e1f699e.jpg","nickname":"Mike Tang","note":"","ucode":"55775BCEDB5937","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":634878,"discussion_content":"å¯¹çš„å¯¹çš„.","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1704170925,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"é‡åº†","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":389389,"user_name":"ç‹¬é’“å¯’æ±Ÿ","can_delete":false,"product_type":"c1","uid":1203049,"ip_address":"å¹¿ä¸œ","ucode":"2C81906FD88C8C","user_header":"https://static001.geekbang.org/account/avatar/00/12/5b/69/7ace1ddb.jpg","comment_is_top":false,"comment_ctime":1712390208,"is_pvip":false,"replies":[{"id":141738,"content":"å¯¹çš„ã€‚æ˜¯è¿™æ ·çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":2186062,"ctime":1713027612,"ip_address":"åŠ æ‹¿å¤§","comment_id":389389,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100626901,"comment_content":"çœ‹åˆ°supertrait å’Œ subtraitï¼Œ Shape å’Œ Circle çš„æ—¶å€™ï¼Œ çš„ç¡®è”æƒ³åˆ°ç»§æ‰¿äº†ï¼Œä¸è¿‡ä½œè€…å¼ºè°ƒå¹³ç­‰ï¼Œé‚£å°±æ‰“æ¶ˆäº†è¿™ä¸ªå¿µå¤´","like_count":2,"discussions":[{"author":{"id":2186062,"avatar":"https://static001.geekbang.org/account/avatar/00/21/5b/4e/8e1f699e.jpg","nickname":"Mike Tang","note":"","ucode":"55775BCEDB5937","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":641817,"discussion_content":"å¯¹çš„ã€‚æ˜¯è¿™æ ·çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1713027612,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŠ æ‹¿å¤§","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":383665,"user_name":"cluskiîŒ","can_delete":false,"product_type":"c1","uid":2760117,"ip_address":"æ±Ÿè‹","ucode":"F161EAE54DC801","user_header":"https://static001.geekbang.org/account/avatar/00/2a/1d/b5/d843bef9.jpg","comment_is_top":false,"comment_ctime":1699425753,"is_pvip":false,"replies":[{"id":139939,"content":"å¯¹çš„ã€‚rustçš„traitå°†æ¨¡å‹ä»oopçš„ç­‰çº§æ£®ä¸¥çš„ç‰¢æˆ¿é‡Œé¢è§£æ•‘å‡ºæ¥äº†","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":2186062,"ctime":1699505508,"ip_address":"é‡åº†","comment_id":383665,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100626901,"comment_content":"ä¸ªäººç†è§£ï¼Œtraitå¾ˆåƒJavaä¸­çš„interfaceã€‚Javaçš„interfaceå¯ä»¥ä½œä¸ºæŸç§èƒ½åŠ›çš„æŠ½è±¡ï¼Œå¹¶ä¸”åœ¨æ³›å‹çš„ä½¿ç”¨ä¸­ï¼Œå¯ä»¥èµ·åˆ°é™åˆ¶çš„ä½œç”¨ã€‚\nJavaã€C++ç­‰OOPè¯­è¨€ä¸­çš„ç»§æ‰¿ä¸ªäººæ„Ÿè§‰æ›´å¤šæ˜¯åœ¨å¼ºè°ƒis-aè¿™ä¸ªæ¦‚å¿µã€‚ä¾‹å¦‚ï¼Œç”·äººæ˜¯ä¸€ä¸ªäººï¼Œé¸½å­æ˜¯ä¸€ä¸ªé¸Ÿè¿™ç±»ã€‚ä¸Rustçš„traitæ›´åŠ å¼ºè°ƒçš„ä¸€ç§èƒ½åŠ›å’Œçº¦æŸã€‚","like_count":2,"discussions":[{"author":{"id":2186062,"avatar":"https://static001.geekbang.org/account/avatar/00/21/5b/4e/8e1f699e.jpg","nickname":"Mike Tang","note":"","ucode":"55775BCEDB5937","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":631406,"discussion_content":"å¯¹çš„ã€‚rustçš„traitå°†æ¨¡å‹ä»oopçš„ç­‰çº§æ£®ä¸¥çš„ç‰¢æˆ¿é‡Œé¢è§£æ•‘å‡ºæ¥äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1699505508,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"é‡åº†","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":385445,"user_name":"superggn","can_delete":false,"product_type":"c1","uid":3623568,"ip_address":"åŒ—äº¬","ucode":"831CCD98B393FE","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/7Q403U68Oy4lXG5sFBPVKLrfwaRzBqpBZibpEBXcPf9UOO3qrnh7RELoByTLzBZLkN9Nukfsj7DibynbZjKAKgag/132","comment_is_top":false,"comment_ctime":1702628693,"is_pvip":false,"replies":[{"id":140470,"content":"éå¸¸ğŸ‰æ£’","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":2186062,"ctime":1702701783,"ip_address":"é‡åº†","comment_id":385445,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100626901,"comment_content":"ç¬”è®°\n\nä¸€èˆ¬æˆ‘ä»¬è¯´å…³è”ç±»å‹ &#47; associated types çš„æ—¶å€™ï¼Œ è¯´çš„æ˜¯ trait åº•ä¸‹çš„ type\n\nå…³è”ç±»å‹å°±æ˜¯è·Ÿç€ trait èµ°çš„æ³›å‹\n\nè‡³äºå•¥æ—¶å€™å…³è”ç±»å‹è¦å…·åŒ– &#47; å•æ€åŒ– &#47; å…·ä½“å†™æ˜ç™½æ˜¯å•¥ï¼Ÿ\n\nå¾—åœ¨ impl trait for typeA çš„æ—¶å€™å†™æ¸…æ¥š\n\n\n\nä¸€èˆ¬è¯´ A æœ‰ trait boundï¼Œ æ„æ€å°±æ˜¯è¿™ä¸ª A å¿…é¡»å®ç°æŸä¸ª trait\n\næˆ‘ä»¬ä¸ä»…å¯ä»¥æ trait bound, æœ‰ trait bound ä¹‹ååœ¨ where clause é‡Œè¿˜å¯ä»¥æ trait type boundï¼š\n\n`T: trait A, T::typeB: Debug + PartialEq`\n\n\n\nä¸ºå•¥è°ƒç”¨ trait æ–¹æ³•è¿˜éœ€è¦ use trait?\n\nå› ä¸º rust ä¸ä¼šå¤§æµ·æé’ˆéå†æ‰€æœ‰ trait æ‰¾æ–¹æ³•ï¼Œ ä½ å¾—å…ˆæŒ‡å®šåœ¨å“ªå„¿æ‰¾\n\n","like_count":1,"discussions":[{"author":{"id":2186062,"avatar":"https://static001.geekbang.org/account/avatar/00/21/5b/4e/8e1f699e.jpg","nickname":"Mike Tang","note":"","ucode":"55775BCEDB5937","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":633873,"discussion_content":"éå¸¸ğŸ‰æ£’","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1702701783,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"é‡åº†","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":384065,"user_name":"$ä¾¯","can_delete":false,"product_type":"c1","uid":1019939,"ip_address":"æµ™æ±Ÿ","ucode":"488B1BD3924E7E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/90/23/5c74e9b7.jpg","comment_is_top":false,"comment_ctime":1700208919,"is_pvip":false,"replies":[{"id":140111,"content":"ä»–æç¤ºäº†ï¼Œç”¨ Self::SportTypeï¼Œå®Œæ•´è·¯å¾„ã€‚æˆ‘å‘ç°æˆ‘é‚£ä¸ªä¾‹å­ä¹Ÿæ¼äº†ï¼Œæˆ‘åŠ ä¸Šã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ä½œè€…","uid":2186062,"ctime":1700215918,"ip_address":"é‡åº†","comment_id":384065,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100626901,"comment_content":"æ—¢ç„¶å…³è”ç±»å‹ä½œä¸ºå ä½ç¬¦ï¼Œé‚£ä¸ºä»€ä¹ˆè¿™æ ·ä¼šæŠ¥é”™å‘¢ï¼ŒæŒ‰æˆ‘ç†è§£ç†å ä½ç¬¦åº”è¯¥ä¸éœ€è¦äº‹å…ˆå£°æ˜\npub trait Sport {\n    type SportType;\n\n    fn play(&amp;self, st: SportType);\n}\n\nfn main() {}\n\n\nerror[E0412]: cannot find type `SportType` in this scope\n --&gt; src\\main.rs:4:24\n  |\n4 |     fn play(&amp;self, st: SportType);\n  |                        ^^^^^^^^^ help: you might have meant to use the associated type: `Self::SportType`\n","like_count":1,"discussions":[{"author":{"id":2186062,"avatar":"https://static001.geekbang.org/account/avatar/00/21/5b/4e/8e1f699e.jpg","nickname":"Mike Tang","note":"","ucode":"55775BCEDB5937","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":631972,"discussion_content":"ä»–æç¤ºäº†ï¼Œç”¨ Self::SportTypeï¼Œå®Œæ•´è·¯å¾„ã€‚æˆ‘å‘ç°æˆ‘é‚£ä¸ªä¾‹å­ä¹Ÿæ¼äº†ï¼Œæˆ‘åŠ ä¸Šã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1700215918,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"é‡åº†","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":383674,"user_name":"duwoodly","can_delete":false,"product_type":"c1","uid":2020398,"ip_address":"é‡åº†","ucode":"12F7BFCB78DB0E","user_header":"https://static001.geekbang.org/account/avatar/00/1e/d4/2e/d478a412.jpg","comment_is_top":false,"comment_ctime":1699435634,"is_pvip":false,"replies":[{"id":139938,"content":"å¯¹çš„","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":2186062,"ctime":1699505437,"ip_address":"é‡åº†","comment_id":383674,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100626901,"comment_content":"CPPçš„ç»§æ‰¿ï¼Œå­ç±»ä¼šç»§æ‰¿çˆ¶ç±»çš„å±æ€§å’Œæ–¹æ³•ï¼Œå­ç±»å¯ä»¥é‡å†™çˆ¶ç±»çš„æ–¹æ³•ã€‚ ç»§æ‰¿å¼•èµ·çš„è€¦åˆæ€§å¾ˆå¼ºã€‚ æ‰€ä»¥æ–°äº§ç”Ÿçš„è¯­è¨€éƒ½ä¸å†æ”¯æŒç»§æ‰¿ï¼Œåƒgoå’Œrustä½¿ç”¨ç»„åˆï¼Œé™ä½äº†è€¦åˆæ€§ã€‚\nRust çš„trait æ˜¯ä¸€ç§çº¦æŸï¼Œä¹Ÿæ˜¯ä¸€ç§èƒ½åŠ›ï¼Œé¿å…äº†ç»§æ‰¿çš„å¼ºè€¦åˆï¼Œåˆæä¾›äº†çµæ´»æ€§ã€‚","like_count":1,"discussions":[{"author":{"id":2186062,"avatar":"https://static001.geekbang.org/account/avatar/00/21/5b/4e/8e1f699e.jpg","nickname":"Mike Tang","note":"","ucode":"55775BCEDB5937","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":631405,"discussion_content":"å¯¹çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1699505437,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"é‡åº†","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":389131,"user_name":"ç‹æ™“å®‡","can_delete":false,"product_type":"c1","uid":1479349,"ip_address":"ä¸Šæµ·","ucode":"BF57001A305A49","user_header":"https://static001.geekbang.org/account/avatar/00/16/92/b5/98062fbf.jpg","comment_is_top":false,"comment_ctime":1711637646,"is_pvip":false,"replies":[{"id":141742,"content":"æˆ‘åœ¨playgroundé‡Œé¢è¯•å¯ä»¥çš„ã€‚https:&#47;&#47;play.rust-lang.org&#47;?version=stable&amp;mode=debug&amp;edition=2021 ã€‚ä½ æ˜¯åœ¨å“ªé‡Œè¯•çš„å‘€ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":2186062,"ctime":1713028212,"ip_address":"åŠ æ‹¿å¤§","comment_id":389131,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100626901,"comment_content":"è€å¸ˆï¼Œåœ¨Tä¸Šä½¿ç”¨å…³è”ç±»å‹é‚£ä¸ªç¤ºä¾‹ç¼–è¯‘ä¸é€šè¿‡\ntrait TraitA {\n  type Mytype;\n}\n\nfn doit&lt;T: TraitA&gt;(a: T::Mytype) {}  &#47;&#47; è¿™é‡Œåœ¨å‡½æ•°ä¸­ä½¿ç”¨äº†å…³è”ç±»å‹\n\nstruct TypeA;\nimpl TraitA for TypeA {\n  type Mytype = String;  &#47;&#47; å…·åŒ–å…³è”ç±»å‹ä¸ºString\n}\n\nfn main() {\n  doit::&lt;TypeA&gt;(&quot;abc&quot;.to_string());  &#47;&#47; ç»™Rustcå°åŠ©æ‰‹å–‚ä¿¡æ¯ï¼šTå…·åŒ–ä¸ºTypeA\n}","like_count":0,"discussions":[{"author":{"id":2186062,"avatar":"https://static001.geekbang.org/account/avatar/00/21/5b/4e/8e1f699e.jpg","nickname":"Mike Tang","note":"","ucode":"55775BCEDB5937","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":641823,"discussion_content":"æˆ‘åœ¨playgroundé‡Œé¢è¯•å¯ä»¥çš„ã€‚https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2021 ã€‚ä½ æ˜¯åœ¨å“ªé‡Œè¯•çš„å‘€ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1713028213,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŠ æ‹¿å¤§","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":388255,"user_name":"å•Šè‰¯æ¢“æ˜¯æˆ‘","can_delete":false,"product_type":"c1","uid":1655117,"ip_address":"å¹¿ä¸œ","ucode":"E42FC1A60D331C","user_header":"https://static001.geekbang.org/account/avatar/00/19/41/4d/f6d6d13a.jpg","comment_is_top":false,"comment_ctime":1709721893,"is_pvip":false,"replies":[{"id":141474,"content":"åé¢å®æˆ˜ç¯‡å°±æ˜¯å‡ ä¸ªå…¥é—¨çš„é¡¹ç›®","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":2186062,"ctime":1710434399,"ip_address":"åŠ æ‹¿å¤§","comment_id":388255,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100626901,"comment_content":"æœ‰æ²¡æœ‰å…¥é—¨é¡¹ç›®æ¥ç»ƒç»ƒæ‰‹ï¼Œ\nçœ‹å®Œå°±å¿˜äº†ï¼Œä¸ä¸Šæ‰‹çš„è¯","like_count":0,"discussions":[{"author":{"id":2186062,"avatar":"https://static001.geekbang.org/account/avatar/00/21/5b/4e/8e1f699e.jpg","nickname":"Mike Tang","note":"","ucode":"55775BCEDB5937","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":639285,"discussion_content":"åé¢å®æˆ˜ç¯‡å°±æ˜¯å‡ ä¸ªå…¥é—¨çš„é¡¹ç›®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1710434399,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŠ æ‹¿å¤§","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":386938,"user_name":"é£äº†çš„é¸­å­è¢«ç…®äº†","can_delete":false,"product_type":"c1","uid":3813080,"ip_address":"æ¹–å—","ucode":"5781D69934D956","user_header":"https://static001.geekbang.org/account/avatar/00/3a/2e/d8/7beb49a4.jpg","comment_is_top":false,"comment_ctime":1705937869,"is_pvip":false,"replies":[{"id":141078,"content":"ğŸ‘ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":2186062,"ctime":1705983348,"ip_address":"é‡åº†","comment_id":386938,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100626901,"comment_content":"trait ä¸éœ€è¦è€ƒè™‘å±‚çº§å…³ç³»ï¼Œæ„Ÿè§‰ç±»å‹çš„çº¦æŸæ›´åŠ åŸå­åŒ–äº†ï¼Œè¢«æ¶ˆè´¹æ—¶ä¸éœ€è¦è€ƒè™‘é‚£ä¹ˆå¤šçš„è€¦åˆã€‚","like_count":0,"discussions":[{"author":{"id":2186062,"avatar":"https://static001.geekbang.org/account/avatar/00/21/5b/4e/8e1f699e.jpg","nickname":"Mike Tang","note":"","ucode":"55775BCEDB5937","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":636352,"discussion_content":"ğŸ‘ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1705983348,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"é‡åº†","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":385939,"user_name":"åƒå›ç™¾è½¬æ— åŠ«å±±","can_delete":false,"product_type":"c1","uid":1456256,"ip_address":"åŒ—äº¬","ucode":"2C249889C00929","user_header":"","comment_is_top":false,"comment_ctime":1703692099,"is_pvip":true,"replies":[{"id":140657,"content":"rustä¸ç»™å¼€å‘è€…è®¾ç½®å¤©èŠ±æ¿","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":2186062,"ctime":1703770631,"ip_address":"é‡åº†","comment_id":385939,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100626901,"comment_content":"ä»pythonè¿‡æ¥çš„ï¼Œåªèƒ½è¯´æ‰“å¼€äº†æ–°ä¸–ç•Œçš„å¤§é—¨","like_count":0,"discussions":[{"author":{"id":2186062,"avatar":"https://static001.geekbang.org/account/avatar/00/21/5b/4e/8e1f699e.jpg","nickname":"Mike Tang","note":"","ucode":"55775BCEDB5937","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":634657,"discussion_content":"rustä¸ç»™å¼€å‘è€…è®¾ç½®å¤©èŠ±æ¿","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1703770631,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"é‡åº†","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":385446,"user_name":"superggn","can_delete":false,"product_type":"c1","uid":3623568,"ip_address":"åŒ—äº¬","ucode":"831CCD98B393FE","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/7Q403U68Oy4lXG5sFBPVKLrfwaRzBqpBZibpEBXcPf9UOO3qrnh7RELoByTLzBZLkN9Nukfsj7DibynbZjKAKgag/132","comment_is_top":false,"comment_ctime":1702629307,"is_pvip":false,"replies":[{"id":140472,"content":"æœ€å¥½ä¸è¦é€šè¿‡ç»§æ‰¿é‚£ä¸ªæ€ç»´æ¥ç†è§£ï¼Œå¯¹çš„ï¼Œå…ˆåˆ·å®Œä¸€éå†å›å¤´æ¥çœ‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":2186062,"ctime":1702702038,"ip_address":"é‡åº†","comment_id":385446,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100626901,"comment_content":"æ€è€ƒé¢˜ï¼ˆæˆ‘ä» python æ¥çš„ï¼Œ cpp å’Œ java æ²¡å­¦è¿‡ï¼‰\n\nOOP\n\nclass é‡Œæœ‰å„ç§æ–¹æ³•ï¼Œ æä¸ªå­ç±»å°±å¯ä»¥å¯¹åŸºç±»è¿›è¡Œå„ç§ä¿®æ”¹\n\nå®šä¹‰ä¸ª class, class é‡Œæœ‰å„ç§æ–¹æ³•ï¼ˆåŒ…æ‹¬ static method å•¥çš„ï¼‰\n\nå¤§éƒ¨åˆ†æƒ…å†µæ˜¯ä¸€ä¸ªæ ‘å½¢ç»“æ„\n\n\n\né¢å‘ trait bound ç¼–ç¨‹\n\ntrait ç±»ä¼¼äº OOP é‡Œæä¸€ä¸ªæ ‡å‡†åŸºç±»ï¼Œ ç„¶åæ¥å›ç»§æ‰¿ï¼Œ ä¸åŒç‚¹åœ¨äºæ›´çµæ´»\n\næˆ–è€…ç±»ä¼¼äº python3 é‡Œçš„ mixinï¼ˆè¿™ç©æ„æˆ‘æ²¡æ€ä¹ˆç©è¿‡ï¼Œ ä¸ç†Ÿï¼Œ ä½†çœ‹è¿‡åŒäº‹å†™çš„ä»£ç ï¼‰ï¼Œ æä¸ª must implement çš„ abstract method æ„Ÿè§‰ä¹Ÿå·®ä¸å¤š\n\nå¼•ç”¨æ¥å¼•ç”¨å»ï¼Œ é£æ¥é£å»~\n\n\n\nè¿™ç§æ€è€ƒé¢˜æ²¡å•¥æ„Ÿè§‰ï¼Œ åæ­£æˆ‘ä¹Ÿä¸ä¼šå†™ï¼Œ éšä¾¿å¨å¨ï¼Œ ç­‰å…¨éƒ½åˆ·ä¸€éä¹‹åå¯èƒ½ä¼šæœ‰åˆ«çš„æ„Ÿæƒ³","like_count":0,"discussions":[{"author":{"id":2186062,"avatar":"https://static001.geekbang.org/account/avatar/00/21/5b/4e/8e1f699e.jpg","nickname":"Mike Tang","note":"","ucode":"55775BCEDB5937","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":633875,"discussion_content":"æœ€å¥½ä¸è¦é€šè¿‡ç»§æ‰¿é‚£ä¸ªæ€ç»´æ¥ç†è§£ï¼Œå¯¹çš„ï¼Œå…ˆåˆ·å®Œä¸€éå†å›å¤´æ¥çœ‹ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1702702038,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"é‡åº†","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":385438,"user_name":"superggn","can_delete":false,"product_type":"c1","uid":3623568,"ip_address":"åŒ—äº¬","ucode":"831CCD98B393FE","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/7Q403U68Oy4lXG5sFBPVKLrfwaRzBqpBZibpEBXcPf9UOO3qrnh7RELoByTLzBZLkN9Nukfsj7DibynbZjKAKgag/132","comment_is_top":false,"comment_ctime":1702624995,"is_pvip":false,"replies":[{"id":140473,"content":"æˆ‘æ˜¯æ ¹æ®rust referenceçš„è¯´æ³•æ¥çš„ï¼Œå…¶å®æ„æ€éƒ½å·®ä¸å¤šï¼Œè¿™ä¸ªå±€éƒ¨å¯ä»¥äº’æ¢ç†è§£ã€‚ä¸¤ç§è¯´æ³•éƒ½æ˜¯å¯¹çš„","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":2186062,"ctime":1702702140,"ip_address":"é‡åº†","comment_id":385438,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100626901,"comment_content":"æˆ‘è®°å¾— trait åº•ä¸‹å®šä¹‰çš„å‡½æ•°é‡Œï¼Œ æœ‰ self å‚æ•°çš„å«æ–¹æ³•ï¼ˆmethod, called on instanceï¼‰ï¼Œ æ²¡ self å‚æ•°çš„æ‰å« å…³è”å‡½æ•°ï¼ˆassociated function, called on type)?\n=================\nåˆšæ‰æŸ¥äº†ä¸‹ï¼Œ duckduckgo æœå‡ºæ¥çš„ rust associated function è·Ÿæˆ‘è®°å¾—ä¸€æ ·ï¼Œ åŒºåˆ† method å’Œ associated functionï¼Œ ä½† Rust By Practice (RBP) å’Œ Rust By Example (RBE) è¯´çš„ä¸ä¸€æ ·...\n\nRBP\nhttps:&#47;&#47;practice.rs&#47;method.html\n=&gt; &quot;All functions defined within an impl block are called associated functions because theyâ€™re associated with the type named after the impl.&quot; æ‰€æœ‰åœ¨ impl åº•ä¸‹çš„å‡½æ•°éƒ½èƒ½å«åš associated functions\n\nRBE\nhttps:&#47;&#47;doc.rust-lang.org&#47;rust-by-example&#47;fn&#47;methods.html\n=&gt; &quot;Some functions are connected to a particular type. These come in two forms: associated functions, and methods.&quot;\n","like_count":0,"discussions":[{"author":{"id":2186062,"avatar":"https://static001.geekbang.org/account/avatar/00/21/5b/4e/8e1f699e.jpg","nickname":"Mike Tang","note":"","ucode":"55775BCEDB5937","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":633876,"discussion_content":"æˆ‘æ˜¯æ ¹æ®rust referenceçš„è¯´æ³•æ¥çš„ï¼Œå…¶å®æ„æ€éƒ½å·®ä¸å¤šï¼Œè¿™ä¸ªå±€éƒ¨å¯ä»¥äº’æ¢ç†è§£ã€‚ä¸¤ç§è¯´æ³•éƒ½æ˜¯å¯¹çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1702702140,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"é‡åº†","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":1,"child_discussions":[{"author":{"id":3623568,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/7Q403U68Oy4lXG5sFBPVKLrfwaRzBqpBZibpEBXcPf9UOO3qrnh7RELoByTLzBZLkN9Nukfsj7DibynbZjKAKgag/132","nickname":"superggn","note":"","ucode":"831CCD98B393FE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2186062,"avatar":"https://static001.geekbang.org/account/avatar/00/21/5b/4e/8e1f699e.jpg","nickname":"Mike Tang","note":"","ucode":"55775BCEDB5937","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":633879,"discussion_content":"æ„Ÿè°¢çŒ›ç”·","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1702709532,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":633876,"ip_address":"åŒ—äº¬","group_id":0},"score":633879,"extra":""}]}]},{"had_liked":false,"id":384643,"user_name":"plh","can_delete":false,"product_type":"c1","uid":1031828,"ip_address":"å››å·","ucode":"D79F2B87AC3AD2","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erEHTaQDkWqEYib9iabib8rACYpSFBHTPFmgicUKaib79MB6VIxNwiajHUS8kYFEKCGOjpibf0dibhIjqhfzg/132","comment_is_top":false,"comment_ctime":1701268169,"is_pvip":false,"replies":[{"id":140295,"content":"äºŒä¸‰æ˜¯å¯¹ç±»å‹çš„å¼•ç”¨ç±»å‹è¿›è¡Œå®ç°ï¼Œä¸æ˜¯ç±»å‹æœ¬èº«ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":2186062,"ctime":1701352230,"ip_address":"é‡åº†","comment_id":384643,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100626901,"comment_content":"è€å¸ˆä½ å¥½: åŸæ–‡ [å› ä¸ºåŒä¸€ä¸ª trait åªèƒ½å®ç°ä¸€æ¬¡åˆ°æŸä¸ªç±»å‹ä¸Šã€‚]  è¿™ä¸ª &quot;æŸä¸ªç±»å‹&quot; æ€ä¹ˆç†è§£? \næ¯”å¦‚: æ ‡å‡†åº“ä¸Šæœ‰ Option ä¸Šé¢ å°±æœ‰è¿™ä¹ˆ3ä¸ªæ–¹æ³•: æ„Ÿè§‰è¿™ä¸ªæœ‰ç‚¹è¿·æƒ‘?  \n\nimpl&lt;T&gt; IntoIterator for Option&lt;T&gt;\nimpl&lt;&#39;a, T&gt; IntoIterator for &amp;&#39;a Option&lt;T&gt;\nimpl&lt;&#39;a, T&gt; IntoIterator for &amp;&#39;a mut Option&lt;T&gt;\n\n\n\n\n","like_count":0,"discussions":[{"author":{"id":2186062,"avatar":"https://static001.geekbang.org/account/avatar/00/21/5b/4e/8e1f699e.jpg","nickname":"Mike Tang","note":"","ucode":"55775BCEDB5937","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":632801,"discussion_content":"äºŒä¸‰æ˜¯å¯¹ç±»å‹çš„å¼•ç”¨ç±»å‹è¿›è¡Œå®ç°ï¼Œä¸æ˜¯ç±»å‹æœ¬èº«ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1701352230,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"é‡åº†","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":384422,"user_name":"javpower","can_delete":false,"product_type":"c1","uid":1362777,"ip_address":"æ±Ÿè¥¿","ucode":"92867F35D11590","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJJ4reATXtqhQ26vWXhiaZUEF9W1E0ZEqibrxxzR7NrlGwjrCZeLvF2HnL8jFjGXaFtN1vBTSia6492g/132","comment_is_top":false,"comment_ctime":1700830220,"is_pvip":false,"replies":[{"id":140254,"content":"å¯ä»¥å€ŸåŠ©é‚£ä¸ªæ¥ç†è§£ï¼Œä½†æ˜¯æ³¨æ„ä¸èƒ½ç­‰åŒã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":2186062,"ctime":1700888983,"ip_address":"é‡åº†","comment_id":384422,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100626901,"comment_content":"trait ç±»ä¼¼Javaä¸­çš„æ¥å£\nèŒƒå‹çº¦æŸç±»ä¼¼Javaä¸­çš„&lt;? extends æ¥å£&gt;","like_count":0,"discussions":[{"author":{"id":2186062,"avatar":"https://static001.geekbang.org/account/avatar/00/21/5b/4e/8e1f699e.jpg","nickname":"Mike Tang","note":"","ucode":"55775BCEDB5937","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":632505,"discussion_content":"å¯ä»¥å€ŸåŠ©é‚£ä¸ªæ¥ç†è§£ï¼Œä½†æ˜¯æ³¨æ„ä¸èƒ½ç­‰åŒã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1700888983,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"é‡åº†","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":384411,"user_name":"unistart","can_delete":false,"product_type":"c1","uid":1524770,"ip_address":"æ¹–å—","ucode":"C51E5D242530D2","user_header":"https://static001.geekbang.org/account/avatar/00/17/44/22/403a340a.jpg","comment_is_top":false,"comment_ctime":1700818413,"is_pvip":false,"replies":[{"id":140248,"content":"1. æˆ‘æ£€æŸ¥äº†ä¸€ä¸‹ï¼Œæ²¡è¯´é”™å‘€ã€‚ä¿®æ”¹åçš„ä»£ç ï¼Œå› ä¸º u32 å®ç°äº† TraitAï¼Œè€Œæ²¡æœ‰å®ç°TraitBï¼Œå› æ­¤u32æ²¡æœ‰è¢«TraitBçº¦æŸï¼Œæ˜¯è¿™ä¸ªæ„æ€ã€‚\n\n2. ä½ æ³¨é‡Šæ‰ impl TraitA for u32 å½“ç„¶ä¸ä¼šæŠ¥é”™ï¼Œå› ä¸ºé€»è¾‘è·Ÿä¸Šé¢é‚£ä¸ª blanket implementation æ— å…³äº†ï¼Œä½ å¯ä»¥ä»”ç»†ä½“ä¼šä¸€ä¸‹ã€‚\n\n3. å¯¹çš„ï¼Œä½ çš„ç¬¬ä¸‰æ¡çš„ç†è§£éå¸¸æ­£ç¡®ã€‚ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":2186062,"ctime":1700837335,"ip_address":"é‡åº†","comment_id":384411,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100626901,"comment_content":"æœ€åçš„Blanket Implementationé‚£éƒ¨åˆ†æœ‰ç‚¹æ²¡çœ‹æ˜ç™½ï¼Œæœ‰å¤§ä½¬èƒ½æŒ‡ç‚¹ä¸€ä¸‹ä¹ˆ\n\né—®é¢˜ä¸€ï¼šæ–‡ç¨¿ä¸Šä¿®æ”¹åçš„ä»£ç å’Œä¹‹åè§£é‡Šè¯´æ˜è²Œä¼¼å¯¹ä¸ä¸Šï¼Œæ–‡ç¨¿ä¸­è¯´`å› ä¸º u32 å¹¶æ²¡æœ‰è¢« TraitB çº¦æŸï¼Œæ‰€ä»¥å®ƒä¸æ»¡è¶³ç¬¬ 4 è¡Œçš„ blanket implementationã€‚å› æ­¤å°±ä¸ç®—é‡å¤å®ç°`ã€‚ä½†æ˜¯ä¿®æ”¹åçš„ä»£ç ä¸­æ˜¯ä¿ç•™çš„impl TraitA for u32 {}è€Œä¸æ˜¯impl TraitB for u32 {}ã€‚\n\né—®é¢˜äºŒï¼šæˆ‘å°†æœ‰é—®é¢˜çš„ä»£ç å¤åˆ¶åˆ°rus playgroundä¸­å¹¶å°è¯•ä¿®æ”¹ï¼Œå‘ç°æ³¨é‡Šæ‰é—®é¢˜ä»£ç ä¸­çš„impl TraitA for u32 {}æˆ–è€…impl TraitB for u32 {}è²Œä¼¼éƒ½ä¸ä¼šæŠ¥é”™ï¼Œæ²¡æ˜ç™½è¿™æ˜¯ä»€ä¹ˆæ„æ€ã€‚\n\né—®é¢˜ä¸‰ï¼šå…³äºimpl&lt;T: TraitB&gt; TraitA for T {}è¿™å¥ä»£ç çš„ç†è§£ï¼Œæ˜¯ä¸æ˜¯ä¸ºTç±»å‹å®ç°TraitAï¼ŒåŒæ—¶å¯¹Tç±»å‹åšäº†traitçº¦æŸä¸ºTraitBï¼Œä¹‹åå¦‚æœTç±»å‹å®ç°äº†TraitBï¼Œé‚£ä¹ˆè‡ªç„¶å°±æœ‰äº†TraitAçš„èƒ½åŠ›\n\ntrait TraitA {\n    fn test(&amp;self) {\n        println!(&quot;TraitA::test&quot;)\n    }\n}\n\ntrait TraitB {\n    fn some(&amp;self) {\n        println!(&quot;TraitB::some&quot;)\n    }\n}\n\nimpl&lt;T: TraitB&gt; TraitA for T {}\n\nimpl TraitB for u32 {}\n&#47;&#47; impl TraitA for u32 {}\n\nimpl TraitB for f32 {}\n\nfn main() {\n    1u32.test(); &#47;&#47; è¾“å‡º TraitA::test\n    1u32.some(); &#47;&#47; è¾“å‡º TraitB::some\n    \n    1.0f32.test(); &#47;&#47; è¾“å‡ºï¼šTraitA::test\n    1.0f32.some(); &#47;&#47; è¾“å‡ºï¼šTraitB::some\n}\n\n\n","like_count":0,"discussions":[{"author":{"id":2186062,"avatar":"https://static001.geekbang.org/account/avatar/00/21/5b/4e/8e1f699e.jpg","nickname":"Mike Tang","note":"","ucode":"55775BCEDB5937","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":632490,"discussion_content":"1. æˆ‘æ£€æŸ¥äº†ä¸€ä¸‹ï¼Œæ²¡è¯´é”™å‘€ã€‚ä¿®æ”¹åçš„ä»£ç ï¼Œå› ä¸º u32 å®ç°äº† TraitAï¼Œè€Œæ²¡æœ‰å®ç°TraitBï¼Œå› æ­¤u32æ²¡æœ‰è¢«TraitBçº¦æŸï¼Œæ˜¯è¿™ä¸ªæ„æ€ã€‚\n\n2. ä½ æ³¨é‡Šæ‰ impl TraitA for u32 å½“ç„¶ä¸ä¼šæŠ¥é”™ï¼Œå› ä¸ºé€»è¾‘è·Ÿä¸Šé¢é‚£ä¸ª blanket implementation æ— å…³äº†ï¼Œä½ å¯ä»¥ä»”ç»†ä½“ä¼šä¸€ä¸‹ã€‚\n\n3. å¯¹çš„ï¼Œä½ çš„ç¬¬ä¸‰æ¡çš„ç†è§£éå¸¸æ­£ç¡®ã€‚ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1700837336,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"é‡åº†","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1524770,"avatar":"https://static001.geekbang.org/account/avatar/00/17/44/22/403a340a.jpg","nickname":"unistart","note":"","ucode":"C51E5D242530D2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2186062,"avatar":"https://static001.geekbang.org/account/avatar/00/21/5b/4e/8e1f699e.jpg","nickname":"Mike Tang","note":"","ucode":"55775BCEDB5937","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":632535,"discussion_content":"å—¯å—¯ï¼Œè°¢è°¢è€å¸ˆè§£ç­”ã€‚æˆ‘ä¹‹åä»”ç»†æƒ³äº†æƒ³é—®é¢˜ä¸€å’Œé—®é¢˜äºŒæ˜¯æˆ‘ä¹‹å‰ç†è§£æœ‰ç‚¹é—®é¢˜ã€‚\n\nimpl TraitB for u32 {}å’Œimpl TraitA for u32 {}ä¹‹æ‰€ä»¥ä¸èƒ½åŒæ—¶å­˜åœ¨ï¼Œæ˜¯å› ä¸ºä¹‹å‰çš„Blanket  Implementationåšäº†é™åˆ¶ï¼Œä¸€æ—¦u32å®ç°äº†TraitBå°±è‡ªåŠ¨æ‹¥æœ‰äº†TraitAçš„èƒ½åŠ›ï¼Œè‡ªç„¶ä¹‹åimpl TraitA for u32 {}æ—¶ä¼šå‡ºç°å†²çªçš„é—®é¢˜ï¼Œè¿™æ—¶å¯ä»¥æ³¨é‡Šæ‰impl TraitA for u32 {}ï¼›è¿˜æœ‰ä¸€ç§å°±æ˜¯æ³¨é‡Šæ‰impl TraitB for u32 {}ï¼Œè¿™æ—¶u32ç±»å‹ä¸å—ä¹‹å‰çš„Blanket Implementationçš„é™åˆ¶ï¼Œç›¸å½“äºæ²¡æœ‰å®ç°è¿‡TraitAï¼Œå› æ­¤ä¹‹åè¿˜å¯ä»¥åœ¨u32ç±»å‹ä¸Šå®ç°TraitAã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1700957226,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":632490,"ip_address":"æ¹–å—","group_id":0},"score":632535,"extra":""}]}]},{"had_liked":false,"id":384331,"user_name":"è¸©ç€å¤ªé˜³çœ‹æ—¥å‡º","can_delete":false,"product_type":"c1","uid":1328082,"ip_address":"å¹¿ä¸œ","ucode":"6837BC35E75A8A","user_header":"https://static001.geekbang.org/account/avatar/00/14/43/d2/71b06883.jpg","comment_is_top":false,"comment_ctime":1700705631,"is_pvip":false,"replies":[{"id":140232,"content":"ä½ ç”¨çš„trait objectï¼ŒåŠ¨æ€åˆ†æ´¾äº§ç”Ÿçš„ç°è±¡ã€‚ä¸çŸ¥é“è°ƒç”¨å“ªä¸€ä¸ª","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":2186062,"ctime":1700708737,"ip_address":"é‡åº†","comment_id":384331,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100626901,"comment_content":"trait Shape {\n    fn play(&amp;self) {    &#47;&#47; å®šä¹‰äº†play()æ–¹æ³•\n        println!(&quot;1&quot;);\n    }\n}\ntrait Circle : Shape {\n    fn play(&amp;self) {    &#47;&#47; ä¹Ÿå®šä¹‰äº†play()æ–¹æ³•\n        println!(&quot;2&quot;);\n    }\n}\nstruct A;\nimpl Shape for A {}\nimpl Circle for A {}\n\nimpl A {\n    fn play(&amp;self) {    &#47;&#47; åˆç›´æ¥åœ¨Aä¸Šå®ç°äº†play()æ–¹æ³•\n        println!(&quot;3&quot;);\n    }\n}\n\nfn main() {\n    let a = A;\n    a.play();    &#47;&#47; è°ƒç”¨ç±»å‹Aä¸Šå®ç°çš„play()æ–¹æ³•\n    &lt;A as Circle&gt;::play(&amp;a);  &#47;&#47; è°ƒç”¨trait Circleä¸Šå®šä¹‰çš„play()æ–¹æ³•\n    &lt;A as Shape&gt;::play(&amp;a);   &#47;&#47; è°ƒç”¨trait Shapeä¸Šå®šä¹‰çš„play()æ–¹æ³•\n\n    (&amp;a as &amp;dyn Shape).play();\n    Circle::play(&amp;a as &amp;dyn Circle);\n    Circle::play(&amp;a);\n\n    A::play(&amp;a);\n    (&amp;a as &amp;dyn Circle).play();\n}\n\nerror[E0034]: multiple applicable items in scope\n  --&gt; 07_ownership&#47;src&#47;mytest.rs:32:25\n   |\n32 |     (&amp;a as &amp;dyn Circle).play();\n   |                         ^^^^ multiple `play` found\n   |\nnote: candidate #1 is defined in the trait `Shape`\n  --&gt; 07_ownership&#47;src&#47;mytest.rs:2:5\n   |\n2  |     fn play(&amp;self) {    &#47;&#47; å®šä¹‰äº†play()æ–¹æ³•\n   |     ^^^^^^^^^^^^^^\nnote: candidate #2 is defined in the trait `Circle`\n  --&gt; 07_ownership&#47;src&#47;mytest.rs:7:5\n   |\n7  |     fn play(&amp;self) {    &#47;&#47; ä¹Ÿå®šä¹‰äº†play()æ–¹æ³•\n   |     ^^^^^^^^^^^^^^\nhelp: disambiguate the method for candidate #1\n   |\n32 |     Shape::play(&amp;(&amp;a as &amp;dyn Circle));\n   |     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\nhelp: disambiguate the method for candidate #2\n   |\n32 |     Circle::play(&amp;(&amp;a as &amp;dyn Circle));\n   |     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n\næç¤ºå¤šä¸ªæ–¹æ³•ï¼Œæ„Ÿè§‰è¿˜æ˜¯æœ‰ç‚¹åƒé›†æˆçš„æ„æ€ï¼Œè€å¸ˆè§£é‡Šä¸‹","like_count":0,"discussions":[{"author":{"id":2186062,"avatar":"https://static001.geekbang.org/account/avatar/00/21/5b/4e/8e1f699e.jpg","nickname":"Mike Tang","note":"","ucode":"55775BCEDB5937","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":632362,"discussion_content":"ä½ ç”¨çš„trait objectï¼ŒåŠ¨æ€åˆ†æ´¾äº§ç”Ÿçš„ç°è±¡ã€‚ä¸çŸ¥é“è°ƒç”¨å“ªä¸€ä¸ª","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1700708737,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"é‡åº†","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":384233,"user_name":"-HedonğŸ­","can_delete":false,"product_type":"c1","uid":3176234,"ip_address":"æ¹–åŒ—","ucode":"FAE541E7A2B88F","user_header":"https://static001.geekbang.org/account/avatar/00/30/77/2a/0cd4c373.jpg","comment_is_top":false,"comment_ctime":1700562467,"is_pvip":false,"replies":[{"id":140220,"content":"å¯¹çš„  ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":2186062,"ctime":1700707255,"ip_address":"é‡åº†","comment_id":384233,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100626901,"comment_content":"Rust çš„ trait æ›´æ³¨é‡è¡Œä¸ºçš„æŠ½è±¡å’Œæ–¹æ³•çš„å¥‘çº¦ï¼Œè€Œä¸æ¶‰åŠæ•°æ®çš„ç»§æ‰¿ã€‚\nOOP çš„ç»§æ‰¿æ¶‰åŠåˆ°ç±»çš„å±‚æ¬¡ç»“æ„ï¼Œå­ç±»ç»§æ‰¿çˆ¶ç±»çš„å±æ€§å’Œæ–¹æ³•ã€‚","like_count":0,"discussions":[{"author":{"id":2186062,"avatar":"https://static001.geekbang.org/account/avatar/00/21/5b/4e/8e1f699e.jpg","nickname":"Mike Tang","note":"","ucode":"55775BCEDB5937","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":632346,"discussion_content":"å¯¹çš„  ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1700707255,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"é‡åº†","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":383909,"user_name":"æå¿—å‹‡(Leo)","can_delete":false,"product_type":"c1","uid":1228080,"ip_address":"æµ™æ±Ÿ","ucode":"5833C0831DD271","user_header":"https://static001.geekbang.org/account/avatar/00/12/bd/30/55488a4c.jpg","comment_is_top":false,"comment_ctime":1699928364,"is_pvip":false,"replies":[{"id":140079,"content":"å¯¹çš„ï¼Œå›°åœ¨interfaceä¸­ï¼Œä¸è¶³ä»¥è®¤è¯†traitçš„çœŸå®é¢ç›®ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":2186062,"ctime":1699948935,"ip_address":"é‡åº†","comment_id":383909,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100626901,"comment_content":"å¾ˆä¸ä¸€æ ·çš„è§†è§’ã€å¯¹æ³›å‹ç±»å‹çš„çº¦æŸã€‘ï¼Œ\nä¸€ç›´ä»¥interfaceçš„æ¦‚å¿µçš„å»ç†è§£ï¼Œå†™ä»£ç çš„æ—¶å€™æ„Ÿè§‰å¾ˆæœ‰å‹åŠ›ã€‚","like_count":0,"discussions":[{"author":{"id":2186062,"avatar":"https://static001.geekbang.org/account/avatar/00/21/5b/4e/8e1f699e.jpg","nickname":"Mike Tang","note":"","ucode":"55775BCEDB5937","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":631772,"discussion_content":"å¯¹çš„ï¼Œå›°åœ¨interfaceä¸­ï¼Œä¸è¶³ä»¥è®¤è¯†traitçš„çœŸå®é¢ç›®ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1699948936,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"é‡åº†","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":383799,"user_name":"æ˜å¤©","can_delete":false,"product_type":"c1","uid":3738284,"ip_address":"ä¸Šæµ·","ucode":"5F7E4D0F35C802","user_header":"https://static001.geekbang.org/account/avatar/00/39/0a/ac/81053dda.jpg","comment_is_top":false,"comment_ctime":1699667297,"is_pvip":false,"replies":[{"id":139991,"content":"ä½ åšäº†è¿™ä¸ªå®ç°     impl Sport for FootBall { ï¼Œå½“ç„¶æ˜¯è°ƒç”¨åŒä¸€ä¸ªå‡½æ•° äº†ã€‚ä½ å¯ä»¥ impl FootBall å®ç°ä¸€ä¸‹åŒåå‡½æ•°è¯•è¯•ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":2186062,"ctime":1699846647,"ip_address":"é‡åº†","comment_id":383799,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100626901,"comment_content":"```rust\npub fn trait_fn() {\n    trait Sport {\n        &#47;&#47; å®ä¾‹æ–¹æ³•\n        fn play(&amp;self) {\n            println!(&quot;this is a default method&quot;);\n        }\n        fn play_mut(&amp;mut self);\n        fn play_own(self);\n        &#47;&#47; å…³è”å‡½æ•°\n        fn play_some() -&gt; String {\n            &quot;this is a default method&quot;.to_string()\n        }\n    }\n\n    struct FootBall;\n\n    impl Sport for FootBall {\n        fn play(&amp;self) {\n            println!(&quot;this is a new method&quot;);\n        }\n\n        fn play_mut(&amp;mut self) {}\n\n        fn play_own(self) {}\n\n        fn play_some() -&gt; String {\n            &quot;this is a new method&quot;.to_string()\n        }\n    }\n\n    let s1 = FootBall::play_some();\n    let s2 = &lt;FootBall as Sport&gt;::play_some();\n\n    println!(&quot;s1 = {}&quot;, s1);\n    println!(&quot;s2 = {}&quot;, s2);\n}\n```\nè¯·é—®è€å¸ˆï¼Œ `let s2 = &lt;FootBall as Sport&gt;::play_some();`è¿™é‡Œè°ƒç”¨çš„æ˜¯FootBallä¸­çš„play_some()æ–¹æ³•å—ï¼Œæˆ‘è¿™è¾¹è¯•äº†ä¸€ä¸‹ï¼Œ éƒ½æ˜¯FootBallä¸­çš„paly_some()è§¦å‘çš„","like_count":0,"discussions":[{"author":{"id":2186062,"avatar":"https://static001.geekbang.org/account/avatar/00/21/5b/4e/8e1f699e.jpg","nickname":"Mike Tang","note":"","ucode":"55775BCEDB5937","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":631619,"discussion_content":"ä½ åšäº†è¿™ä¸ªå®ç°     impl Sport for FootBall { ï¼Œå½“ç„¶æ˜¯è°ƒç”¨åŒä¸€ä¸ªå‡½æ•° äº†ã€‚ä½ å¯ä»¥ impl FootBall å®ç°ä¸€ä¸‹åŒåå‡½æ•°è¯•è¯•ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1699846647,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"é‡åº†","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":383701,"user_name":"A0.ä½•æ–‡ç¥¥","can_delete":false,"product_type":"c1","uid":1052569,"ip_address":"å¹¿ä¸œ","ucode":"2549126DAEA15D","user_header":"https://static001.geekbang.org/account/avatar/00/10/0f/99/0d72321f.jpg","comment_is_top":false,"comment_ctime":1699495657,"is_pvip":false,"replies":[{"id":139933,"content":"çœ¼å°–çš„ä½ ï¼Œå¤šè°¢ğŸ™","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":2186062,"ctime":1699505274,"ip_address":"é‡åº†","comment_id":383701,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100626901,"comment_content":" typoï¼šDispaly -ã€‹ Display","like_count":0,"discussions":[{"author":{"id":2186062,"avatar":"https://static001.geekbang.org/account/avatar/00/21/5b/4e/8e1f699e.jpg","nickname":"Mike Tang","note":"","ucode":"55775BCEDB5937","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":631400,"discussion_content":"çœ¼å°–çš„ä½ ï¼Œå¤šè°¢ğŸ™","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1699505274,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"é‡åº†","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":383677,"user_name":"-","can_delete":false,"product_type":"c1","uid":1546505,"ip_address":"åŒ—äº¬","ucode":"7B34258D346793","user_header":"https://static001.geekbang.org/account/avatar/00/17/99/09/29c46a7b.jpg","comment_is_top":false,"comment_ctime":1699437275,"is_pvip":false,"replies":[{"id":139937,"content":"é‚£è‚¯å®šçš„å‘€ï¼Œå¾—åŠ¨æ‰‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":2186062,"ctime":1699505422,"ip_address":"é‡åº†","comment_id":383677,"utype":1}],"discussion_count":2,"race_medal":0,"score":4,"product_id":100626901,"comment_content":"å¬è¯­éŸ³åˆå­¦è€…å®Œå…¨è·Ÿä¸ä¸Šï¼Œè¿˜æ˜¯å¾—ç»†ç»†çœ‹è¿‡æ–‡ç« æ‰è¡Œ","like_count":0,"discussions":[{"author":{"id":2186062,"avatar":"https://static001.geekbang.org/account/avatar/00/21/5b/4e/8e1f699e.jpg","nickname":"Mike Tang","note":"","ucode":"55775BCEDB5937","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":631404,"discussion_content":"é‚£è‚¯å®šçš„å‘€ï¼Œå¾—åŠ¨æ‰‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1699505422,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"é‡åº†","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1012627,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/73/93/abb7bfe3.jpg","nickname":"Marco","note":"","ucode":"502149B57700FE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":631259,"discussion_content":"ç¡®å®å•Šï¼Œè¦ä»”ç»†çœ‹æ–‡ç« å†…å®¹\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1699443812,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":383657,"user_name":"å•ŠRay","can_delete":false,"product_type":"c1","uid":1081676,"ip_address":"å¹¿ä¸œ","ucode":"FE14A61A6F3C15","user_header":"https://static001.geekbang.org/account/avatar/00/10/81/4c/e42bc9b8.jpg","comment_is_top":false,"comment_ctime":1699416152,"is_pvip":false,"replies":[{"id":139940,"content":"æ”¾playgroundé‡Œé¢æ”¹æ”¹è¿è¡Œè¿è¡Œï¼Œæœ‰åŠ©äºç†è§£ã€‚å…‰çœ‹æ˜¯ç»å¯¹ä¼šæ™•æ»´","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":2186062,"ctime":1699505562,"ip_address":"é‡åº†","comment_id":383657,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100626901,"comment_content":"æ„Ÿè§‰å…³è”ç±»å‹é‚£é‡Œçœ‹å¾—ä¸€å¤´é›¾æ°´çš„ã€‚ã€‚èƒ½ä¸èƒ½æå‡ ä¸ªé€šä¿—æ˜“æ‡‚çš„ä¾‹å­è®²è§£ä¸€ä¸‹ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":2186062,"avatar":"https://static001.geekbang.org/account/avatar/00/21/5b/4e/8e1f699e.jpg","nickname":"Mike Tang","note":"","ucode":"55775BCEDB5937","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":631407,"discussion_content":"æ”¾playgroundé‡Œé¢æ”¹æ”¹è¿è¡Œè¿è¡Œï¼Œæœ‰åŠ©äºç†è§£ã€‚å…‰çœ‹æ˜¯ç»å¯¹ä¼šæ™•æ»´","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1699505562,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"é‡åº†","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":383634,"user_name":"Geek_cbeb39","can_delete":false,"product_type":"c1","uid":2882773,"ip_address":"ç¾å›½","ucode":"40B0CDA6B67BB6","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ep7w8XNyxrp9fmSds4F1CUnDqVRUSyicsf3icLOeK5S11WybjqUM86TDz0LwJibSECD6w22umsGiamWXA/132","comment_is_top":false,"comment_ctime":1699382923,"is_pvip":false,"replies":[{"id":139816,"content":"æ¶‰åŠä¸€ç‚¹ç‚¹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":2186062,"ctime":1699412192,"ip_address":"é‡åº†","comment_id":383634,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100626901,"comment_content":"å¤§ä½¬è¿™ä¸ªè¯¾ä¹‹åä¼šæ¶‰åŠåˆ°Rust&amp;webassmblyçš„å†…å®¹å—","like_count":0,"discussions":[{"author":{"id":2186062,"avatar":"https://static001.geekbang.org/account/avatar/00/21/5b/4e/8e1f699e.jpg","nickname":"Mike Tang","note":"","ucode":"55775BCEDB5937","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":631228,"discussion_content":"æ¶‰åŠä¸€ç‚¹ç‚¹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1699412193,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"é‡åº†","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":386214,"user_name":"mihello","can_delete":false,"product_type":"c1","uid":1287406,"ip_address":"å¹¿ä¸œ","ucode":"4B1E7B7A141606","user_header":"https://static001.geekbang.org/account/avatar/00/13/a4/ee/b960a322.jpg","comment_is_top":false,"comment_ctime":1704340274,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":4,"product_id":100626901,"comment_content":"æˆ‘ä¸æ˜¯åˆå­¦è€…äº†ï¼Œå·²ç»ç”¨Rustå†™è¿‡åƒæ¥è¡Œçš„å°å·¥å…·ã€‚ä¸è¿‡å§‹ç»ˆè¿˜æ˜¯æ²¡æœ‰ä¸€ç§é€šé€æ„Ÿè§‰ï¼Œçœ‹äº†è¿™ä¸€ç« æ”¶è·è‰¯å¤šï¼Œæœ‰ç‚¹é†é†çŒé¡¶ã€‚è¿œè¿œè¶…è¶Šå®˜æ–¹æ•™ç¨‹ï¼Œå®˜æ–¹æ•™ç¨‹çœŸçš„å¤ªç®€é™‹äº†...\nå…¶å®è‡ªå·±å†™è¿˜å¥½ï¼Œæœ€æ€•çœ‹å¼€æºé¡¹ç›®æºç ï¼Œå¦‚æœæ²¡å­¦é€çœŸçš„çœ‹ä¸æ‡‚ã€‚çœ‹äº†è€å¸ˆçš„æ•™ç¨‹ç›¸ä¿¡ä¼šå¤§æœ‰è¿›æ­¥ã€‚","like_count":1,"discussions":[{"author":{"id":3736170,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/fLI3NSG6qScRzrMBQzuXHzAY0QyialcvoadMd662U7hxhJe7jlpAPgjtRPTicE91lWWSJx80TRrXXaVja59YJQ9g/132","nickname":"Geek_07ce33","note":"","ucode":"E4E4C89A024433","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":636257,"discussion_content":"æˆ‘å°±æ˜¯çœ‹äº†å®˜æ–¹å…è´¹æ•™ç¨‹ï¼Œçœ‹äº†ä¸€ç‚¹å®åœ¨çœ‹ä¸ä¸‹å»äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1705912895,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å±±ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":396003,"user_name":"å½“åˆè«ç›¸è¯†","can_delete":false,"product_type":"c1","uid":2768765,"ip_address":"åŒ—äº¬","ucode":"313917BB360D48","user_header":"https://static001.geekbang.org/account/avatar/00/2a/3f/7d/f624fa69.jpg","comment_is_top":false,"comment_ctime":1732672000,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100626901,"comment_content":"è¿™ç¯‡çŸ¥è¯†å¯†åº¦å¤ªé«˜ï¼Œå­¦ä¸æ‡‚äº†ï¼Œå­¦ä¹ rustå¤ªæŠ½è±¡äº†ï¼Œå¾ˆéš¾ç”¨å¯¹æ¯”å’ŒçŸ¥è¯†è¿ç§»çš„æ–¹æ³•è¿›è¡Œå­¦ä¹ ","like_count":0},{"had_liked":false,"id":392788,"user_name":"HappyHasson","can_delete":false,"product_type":"c1","uid":2911084,"ip_address":"å¹¿ä¸œ","ucode":"B84CC43E349CFA","user_header":"https://static001.geekbang.org/account/avatar/00/2c/6b/6c/3e80afaf.jpg","comment_is_top":false,"comment_ctime":1721783648,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100626901,"comment_content":"å…³è”å¸¸é‡çš„ä¸€èŠ‚é‡Œï¼Œ`println!(&quot;{:?}&quot;,::LEN); ` \n\nè¿™é‡Œä¸ºä»€ä¹ˆè¾“å‡º 12  ï¼Ÿ  ä¸æ˜¯æŠŠ A è½¬ä¸º TraitA äº†å—ï¼Ÿåœ¨C++çš„å¯¹è±¡æ¨¡å‹é‡Œ è¿™é‡Œåº”è¯¥è¾“å‡º 10 ã€‚ è¿™é‡Œçš„åº•å±‚å®ç°æ˜¯ä»€ä¹ˆ ","like_count":0},{"had_liked":false,"id":391070,"user_name":"ç‹¬é’“å¯’æ±Ÿ","can_delete":false,"product_type":"c1","uid":1203049,"ip_address":"ä¸­å›½é¦™æ¸¯","ucode":"2C81906FD88C8C","user_header":"https://static001.geekbang.org/account/avatar/00/12/5b/69/7ace1ddb.jpg","comment_is_top":false,"comment_ctime":1717220208,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100626901,"comment_content":"trait TraitA {}\ntrait TraitB {}\n\nimpl&lt;T: TraitB&gt; TraitA for T {}\n\nimpl TraitA for u32 {}\n\næœ€åä¸€å¥åº”è¯¥æ˜¯ impl TraitB for u32 {} æ‰å¯¹å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":390178,"user_name":"ç‹¬é’“å¯’æ±Ÿ","can_delete":false,"product_type":"c1","uid":1203049,"ip_address":"å¹¿ä¸œ","ucode":"2C81906FD88C8C","user_header":"https://static001.geekbang.org/account/avatar/00/12/5b/69/7ace1ddb.jpg","comment_is_top":false,"comment_ctime":1714562646,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100626901,"comment_content":"trait TraitA {}\ntrait TraitB {}\n\nimpl&lt;T: TraitB&gt; TraitA for T {}\n\nimpl TraitA for u32 {}\n\næ²¡æƒ³æ˜ç™½ä¸ºä»€ä¹ˆè¿™é‡Œu32 {}T {}\n\nimpl TraitA for u32 {}\n\næ²¡æƒ³æ˜ç™½ä¸ºä»€ä¹ˆè¿™é‡Œu32 {} å’Œ T {} è”ç³»ä¸Šäº†","like_count":0}]}