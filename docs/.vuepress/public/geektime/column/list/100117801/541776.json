{"id":541776,"title":"02｜RISC特性与发展：RISC-V凭什么成为“半导体行业的Linux”？","content":"<p>你好，我是LMOS。</p><p>上节课，我带你见证了两种计算机指令集的设计结构——CISC与RISC。而今天我们的“主角”就是RISC中的一个代表性特例，它就是RISC-V。</p><p>作为未来芯片指令集的主流，RISC-V是今后芯片设计的最佳方案，甚至可以说它就是硬件行业里的Linux。</p><p>为什么这么说呢？这节课，我会从RISC-V发展历史、原理与技术特性几个方面入手，带你弄明白为什么RISC-V在半导体行业中发展得如此迅猛。</p><h3>RISC-V从何而来</h3><p>让我们“穿越时空”，把时间线拉回到2010年。在加州伯克利分校的校园中，Krste Asanovic教授正为了学生们学习计算机架构而发愁。由于现存芯片指令集冗余且专利许可费用昂贵，还有很多IP法律问题，没有一款合适的CPU用于学习。</p><p>于是他想要带领一个研究团队，来设计一款用于学生学习的CPU。研究团队在选择架构的时候，对比了传统已经存在的ARM、MIPS、SPARC以及x86架构等，发现这些架构指令集要么极其复杂，要么极其昂贵。所以，他们的研究团队最终决定设计一套全新的指令集。</p><p>这个研究团队最开始只有4个人，却在三个月之内完成了指令集原型开发，其能力可见一斑。后来，这个项目被计算机体系结构方面的泰斗 David Patterson 发现，并且得到了他的大力支持。</p><!-- [[[read_end]]] --><p>早在1981年，伯克利分校已经设计出了第一代RISC指令集，之后又陆续设计了四代RISC指令集的架构。有了这些设计经验，在设计RISC-V指令集架构时，研究团队就变得驾轻就熟。</p><p>用RISC-V来命名该指令集架构，有两层意思：RISC-V中的“V”，一方面代表第5代RISC；另一方面，“V”取“ Variation”之意，代表变化。</p><p>虽然RISC-V在2010年才开始研发，但在第二年（2011年）就进行了首次流片，流片就是按照芯片设计生产出可以工作的芯片成品。从这以后，基于RISC-V的CPU设计，或者在SOC中集成RISC-V架构，各种软件工具链的开发和各种基于RISC-V架构的操作系统移植，在不断涌现。这给CPU整个行业带来了不小轰动，当然，这也离不开泰斗 David Patterson 的号召作用。</p><p>一个产品的成功，技术当然是非常重要的原因，但也需要非常给力的运营。在2015年，由最初的25个成员一起成立了非盈利性组织RISC-V基金会（RISC-V Foundation）。</p><p>之后，有多达300个单位加入RISC-V基金会，其中包括阿里、谷歌、华为、英伟达、高通、麻省理工学院、普林斯顿大学、印度理工学院、中科院计算所、联发科等。这些学术机构、芯片开发公司、设计服务与系统厂商的加入，为RISC-V的发展建立了良好的生态环境。</p><h3>RISC-V是什么</h3><p>通过上节课，我们知道了RISC就是指精简指令集计算机体系结构。而前面也说了，RISC-V是伯克利分校设计出的第五代RISC指令集架构。但既然迅速走红的是RISC-V，相比其他的RISC，它必然有过人之处，这样才能立足于市场，不然很可能只沦为学生们的学习工具。</p><p>如果只是对RISC-V下一个定义，会相当简单：<strong>RISC-V是一套开放许可证书、免费的、由基金会维护的、一个整数运算指令集外加多个扩展指令集的CPU架构规范。</strong></p><p>任何硬件开发商或者相关组织都可以免费使用这套规范，构建CPU芯片产品。如果我们的目的只是想对RISC-V有个概念了解，前面这些信息就足够了。不过想知道RISC-V为什么流行这个秘密，显然我们还需要更详细的信息，才能深入了解。</p><h4>指令集命名方式</h4><p>现在假定我们是一家芯片公司的芯片工程师，公司有了新的业务，对CPU提出了更高的要求，让我们基于RISCV指令集架构实现一款全新的CPU。根据我们公司的业务场景，我们只需要选择RISC-V架构中的一部分指令，CPU的位宽也有特定的要求。</p><p>因此，现在需要一些命名方式，来对我们选择的RISCV架构进行命名。这样，用户在阅读该CPU文档时，马上就能了解这款CPU是多少位的、有哪些指令集，它们具体有什么功能。</p><p>其实这个命名方式在RISC-V规范中有相关定义说明，以RV为前缀，然后是位宽，最后是代表指令集的字母集合，具体形式如下：</p><pre><code class=\"language-plain\">RV[###][abc……xyz]\n</code></pre><p>我用表格为你说明一下这个格式，如下所示：<img src=\"https://static001.geekbang.org/resource/image/fe/3e/fedceecb22936111a74227f7b3dc273e.jpg?wh=1920x810\" alt=\"图片\"></p><p>举个例子，比如：RV64IMAC，就表示64位的RISC-V，支持整数指令、乘除法指令、原子指令和压缩指令。</p><h4>指令集模块</h4><p>接着我们一起来看看指令集模块。指令集是一款CPU架构的主要组成部分，是CPU和上层软件交互的核心，也是CPU主要功能的体现。</p><p>但RISC-V规范只定义了CPU需要包含基础整形操作指令，如整型的储存、加载、加减、逻辑、移位、分支等。其它的指令称为可选指令或者用户扩展指令，比如乘、除、取模、单精度浮点、双精度浮点、压缩、原子指令等，这些都是扩展指令。扩展指令需要芯片工程师结合功能需求自定义。</p><p>所以RISC-V采用的是模块化的指令集，易于扩展、组装。它适应于不同的应用场景，可以降低CPU的实现成本。</p><p>我给你列了一张图，图里展示的是RISC-V 指令集的各个组成部分。</p><p><img src=\"https://static001.geekbang.org/resource/image/32/05/325yy6b15697abae97c145f3135af005.jpg?wh=1920x1414\" alt=\"图片\"></p><p>RISC-V的基本指令集和扩展指令集你有个大致印象就可以，更详细的技术讲解，后面第五节课我再展开。下面我们去看看RISC-V的寄存器。</p><h4>RISC-V寄存器</h4><p>指令的操作数是来源于寄存器，精简指令集架构的CPU，都会提供大量的寄存器，RISC-V当然也不例外。RISC-V 的规范定义了32个通用寄存器以及一个 PC寄存器，这对于RV32I、RV64I、RV128I指令集都是一样的，只是寄存器位宽不一样。</p><p>如果实现支持 F/D 扩展指令集的CPU，则需要额外支持 32个浮点寄存器。而如果实现只支持RV32E指令集的嵌入式CPU，则可以将32个通用寄存器缩减为16个通用寄存器。  <img src=\"https://static001.geekbang.org/resource/image/29/6b/29b1fcdeeaecffb0b86499066c3d9b6b.jpg?wh=1920x1097\" alt=\"图片\"></p><p>为了帮助你聚焦要点，不常用的32个浮点寄存器并没有列在这张表里。表中的ABI名称，即应用程序二进制接口，你可以理解为寄存器别名，高级语言在生成汇编语言的时候会用到它们。</p><p>比如C语言处理函数调用时，用哪些寄存器传递参数、返回值，调用者应该保护哪些寄存器，用什么寄存器管理栈帧等等。</p><p>定义好ABI标准，我们就能在语言间互相调用函数了。比如C语言函数调用汇编语言函数，这里我先卖个关子，后面语言与指令的篇章再给你详细展开。</p><h4>RISC-V特权级</h4><p>研究完了RISC-V寄存器，我们再来看看RISC-V的特权级。不同的特权级能访问的系统资源不同，高特权级能访问低特权级的资源，反之则不行。RISC-V 的规范文档定义了四个特权级别（privilege level），特权等级由高到低排列，如下表所示。</p><p><img src=\"https://static001.geekbang.org/resource/image/6c/6c/6cb32d65dddb4742ea1229c3d3a28a6c.jpg?wh=3432x1350\" alt=\"\"></p><p>一个RISC-V硬件线程（hart），相当于一个CPU内的独立的可执行核心，在任一时刻，只能运行在某一个特权级上，这个特权级由CSR（控制和状态寄存器）指定和配置。</p><p>具体分级如下：</p><p>1.机器特权级（M）：RISC-V中hart可以执行的最高权限模式。在M模式下运行的hart，对内存、I/O和一些必要的底层功能（启动和系统配置）有着完全的控制权。因此，它是唯一一个所有标准RISC-V CPU都必须实现的权限级。实际上，普通的RISC-V微控制器仅支持机器特权级。</p><p>2.虚拟机监视特权级（H）：为了支持虚拟机监视器而定义的特权级。</p><p>3.管理员特权级（S）：主要用于支持现代操作系统，如Linux、FreeBSD和Windows。</p><p>4.用户应用特权级（U）：用于运行应用程序，同样也适用于嵌入式系统。</p><p>好了，关于RISC-V的特权级，你了解这些，在现阶段已经足够了。需要把握的重点是，特权级起到了怎样的作用。</p><p><strong>有了特权级的存在，就给指令加上了权力，从而去控制用指令编写的程序。应用程序只能干应用程序该干的事情，不能越权操作。操作系统则拥有更高的权力，能对系统的资源进行管理。</strong></p><h3>RISC-V因何流行</h3><p>RISC-V指令集架构在2010年才开发出来，到今天不过10多年的时间。这个时间从CPU行业的发展看，是非常短的，也可以说是非常年轻的。相比x86的40多岁的年纪，还有ARM、MIPS、SPARC的30多的年纪，RISC-V简直是个孩子。</p><p>要知道ARM、MIPS、SPARC都是RISC系的，MIPS和SPARC甚至已经进入了死亡阶段。按道理讲，RISC-V不应该在这么短的时间内流行起来，成为芯片行业一颗耀眼的新星。</p><p>那么RISC-V流行起来，肯定有其优势：<strong>一是RISC-V完全开放，二是RISC-V指令简单，三是RISC-V实行模块化设计，易于扩展。</strong></p><p>我们先来看看为什么说RISC-V是开放的。之前硬件和软件一样，都是小心地保护自己的“源代码”，因为那是自己的命脉。</p><p>直到后来，软件界出现了开源的Linux，一经开源就迅速席卷了全球。在今天的互联网、云计算、手机等领域Linux已经无处不在。但是硬件依然保护着自己的“源代码”，Intel和AMD还是以售卖x86芯片为主，而ARM直接售卖ARM CPU的“源代码”，连生产芯片的步骤都省了。</p><p>这种模式下，无论厂商还是个人，要获得CPU都要付出昂贵的代价。这时RISC-V应运而生，它完全毫无保留地开放了CPU设计标准，任何人都可以使用该标准，自由地设计生产CPU，不需要支付任何费用，也没有任何法律问题。这相当于硬件界的“Linux”，推动了开放硬件的运动和发展。</p><p>然后，我们来看看为什么说RISC-V很简单？RISC-V提供了一个非常强大且开放的精简指令集架构，只有32个通用寄存器、40多条常用指令、4个特权级。如果需要其它功能，则要进行指令集的扩展，单核心的规范文档才不到300页，一个人在一周之内就能搞清楚。</p><p>相比ARM、x86动不动就有8000多页的规范文档，这实在是太简单了。其实，简单也意味着可靠和高效，同时可以让学生或者硬件开发者迅速入手，降低学习和开发成本。</p><p>最后，我们来说说RISC-V的模块化设计。RISC-V虽然简单，但这并不意味着功能的缺失。通过模块化的设计，就能实现对各种功能组件的剪裁和扩展。</p><p>事实上，现代IT架构已经发生了巨大的改变。举几个我们身边的例子吧。你正在使用的网卡，上面越来越多的网络处理任务和功能，都从主处理器上移到了网卡中，由网卡芯片自己来处理了。</p><p>数据处理器 (DPU) 也体现了这一点。由于通用处理器对大规模数据处理能力的限制，所以我们需要专用的数据处理器。而人工智能领域，现在也已经开始通过GPU运行相关算法。</p><p>这些例子都在告诉我们，专用处理器芯片的需求在大量激增，而这正是RISC-V的用武之地。RISC-V的标准开放，指令功能模块可以自由组合，所以用RISC-V就能定制一款满足特殊用途的处理器。芯片工程师会自由组合RISC-V现有的指令功能模块，按需对齐进行修改优化，或者实现一个新的指令功能模块，就像你根据需要修改和使用Linux内核一样。</p><p>正是因为RISC-V开放、简单和模块化这三大特点，硬件工程师和软件工程师才能站在巨人的肩膀上开发，自由地调用和组装功能模块，快速去实现特定业务场景下的芯片需求。因此，才有了RISC-V引爆芯片行业，迅速火热起来的现象，这是推动开放硬件的革命性壮举。</p><h3>重点回顾</h3><p>今天的课程又到了尾声，我们还是来看一下，在这节课中，我们都学习了什么。</p><p>首先，我们了解了RISC-V从何而来，明白了RISC-V发源于加州伯克利分校，是该校第五代RISC指令集，即第五代精简指令集。起初是为了学生有一套用来学习研究的指令集。后来因为有技术泰斗David Patterson的加入，又成立RISC-V基金会，RISC-V慢慢流行了起来。</p><p>之后我们研究了RISC-V是什么，我带你了解了RISC-V指令集的命名方式、组成模块、寄存器与特权级。这些部分共同组成了RISC-V指令集架构规范。任何硬件厂商都可以按照这个规范，实现自己的RISC-V处理器。</p><p>最后，我们讨论了RISC-V因何流行。RISC-V是开放的，没有任何法律和许可证问题，又极其简单，指令集是模块化的，易于剪裁和扩展。这种开放、简单、易于扩展的特点，使得硬件工程师非常容易上手和定制满足特定功能需要的处理器，这直接推动了开放硬件的革命。</p><p>课程里的重点内容，我整理成了导图，供你参考。</p><p><img src=\"https://static001.geekbang.org/resource/image/92/a2/92fa1a8227f77b74898ccab17386f1a2.jpg?wh=1920x1755\" alt=\"图片\"></p><h3>思考题</h3><p>为什么RISC-V要定义特权级？</p><p>欢迎你在留言区跟我交流互动，如果觉得内容还不错，也推荐你把这节课分享给更多朋友。下节课我们就进入手写miniCPU的部分，敬请期待！</p>","neighbors":{"left":{"article_title":"01｜CISC & RISC：从何而来，何至于此","id":541289},"right":{"article_title":"先睹为快：迷你CPU项目效果演示","id":576720}},"comments":[{"had_liked":false,"id":352484,"user_name":"听水的湖","can_delete":false,"product_type":"c1","uid":1501385,"ip_address":"","ucode":"B1759F90165D81","user_header":"https://static001.geekbang.org/account/avatar/00/16/e8/c9/59bcd490.jpg","comment_is_top":true,"comment_ctime":1658723006,"is_pvip":false,"replies":[{"id":"128249","content":"比心","user_name":"作者回复","comment_id":352484,"uid":"1345199","ip_address":"","utype":1,"ctime":1658798124,"user_name_real":"编辑"}],"discussion_count":1,"race_medal":0,"score":"9.2233721072329994e+18","product_id":100117801,"comment_content":"又见面啦，我是这门课的编辑小新。<br><br>以下是下节课的预告和“预习作业”：<br><br>下个模块开始手写CPU啦（8月1日更新），我们这次用Verilog语言写。老师正奋战中，把配套代码等等都为大家准备上，大伙儿可以趁等待更新这周吸收消化下前两节课。<br><br>还可以看看下面的“预习”作业：<br><br>1.第一季也有一篇内容稍微涉及了一点Verilog语言，代码也不多，会带你实现一个可以计算任意 N 位二进制数的 ALU。迫不及待的同学可以先行去瞅瞅，找个感觉：https:&#47;&#47;time.geekbang.org&#47;column&#47;article&#47;409790<br><br>2.也许你之前并没接触过硬件语言，但对比学习大法还是很不错的。可以先自行思考一下Verilog语言和我们熟悉的软件编程所用语言有哪些不同，带着疑问学习，效果加倍哦。答案我们将在后面揭晓！","like_count":17,"discussions":[{"author":{"id":1345199,"avatar":"https://static001.geekbang.org/account/avatar/00/14/86/af/99219321.jpg","nickname":"LMOS","note":"","ucode":"B037712C8B8B3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581462,"discussion_content":"比心","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658798124,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":351985,"user_name":"pedro","can_delete":false,"product_type":"c1","uid":1200704,"ip_address":"","ucode":"F40C839DDFD599","user_header":"https://static001.geekbang.org/account/avatar/00/12/52/40/e57a736e.jpg","comment_is_top":false,"comment_ctime":1658312984,"is_pvip":false,"replies":[{"id":"128011","content":"我p哥 66666","user_name":"作者回复","comment_id":351985,"uid":"1345199","ip_address":"","utype":1,"ctime":1658369751,"user_name_real":"编辑"}],"discussion_count":5,"race_medal":0,"score":"143392233752","product_id":100117801,"comment_content":"为什么riscv需要定义不同的特权级？<br><br>这并不是riscv独有的，让我们把注意力回到老朋友intel上。<br><br>事实上，cpu刚出现的那段时间里，压根就没有特权级这个概念，任何人都是实打实土皇帝，但是这样怎么管理？应用程序之间经常打架斗殴，搞不好还把机器搞垮了。<br><br>然后inter的那帮人就搞出了一个特权级的概念，你虽然想打架，但我不准你打，你出手，我就红牌，然后大家都老实了，系统运行就很稳定了。<br><br>说了这么多，特权级无非是让大家守规矩，讲安全，和谐共生。","like_count":33,"discussions":[{"author":{"id":1345199,"avatar":"https://static001.geekbang.org/account/avatar/00/14/86/af/99219321.jpg","nickname":"LMOS","note":"","ucode":"B037712C8B8B3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":580766,"discussion_content":"我p哥 66666","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658369751,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2600018,"avatar":"https://static001.geekbang.org/account/avatar/00/27/ac/52/4eba136e.jpg","nickname":"Gosling","note":"","ucode":"65FEF06DB6CFDC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582629,"discussion_content":"66666","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659541906,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"湖北"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2725667,"avatar":"https://static001.geekbang.org/account/avatar/00/29/97/23/9c9bd0d4.jpg","nickname":"苜蓿°","note":"","ucode":"BEEDCB2B88363A","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581596,"discussion_content":"666","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658881698,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2934665,"avatar":"https://static001.geekbang.org/account/avatar/00/2c/c7/89/16437396.jpg","nickname":"极客酱酱","note":"","ucode":"18CDC1DB754D58","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":580956,"discussion_content":"666","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658416228,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2465726,"avatar":"https://static001.geekbang.org/account/avatar/00/25/9f/be/14b2ad2e.jpg","nickname":"卖薪沽酒","note":"","ucode":"7F04A84EDBA856","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":580698,"discussion_content":"66666","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658321846,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":352047,"user_name":"仰望星空","can_delete":false,"product_type":"c1","uid":1149084,"ip_address":"","ucode":"A9E46C9FDB3275","user_header":"https://static001.geekbang.org/account/avatar/00/11/88/9c/cbc463e6.jpg","comment_is_top":false,"comment_ctime":1658365041,"is_pvip":false,"replies":[{"id":"127991","content":"是的 是的 学的明白","user_name":"作者回复","comment_id":352047,"uid":"1345199","ip_address":"","utype":1,"ctime":1658365836,"user_name_real":"编辑"}],"discussion_count":1,"race_medal":0,"score":"10248299633","product_id":100117801,"comment_content":"为什么RISC-V要定义特权级？主要是为了系统能稳定和安全的运行，设想一下如果没有特权级，任何应用都能任意访问所有硬件，这必将会是一场灾难","like_count":2,"discussions":[{"author":{"id":1345199,"avatar":"https://static001.geekbang.org/account/avatar/00/14/86/af/99219321.jpg","nickname":"LMOS","note":"","ucode":"B037712C8B8B3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":580736,"discussion_content":"是的 是的 学的明白","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658365836,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":352045,"user_name":"可爱因子1&#47;n","can_delete":false,"product_type":"c1","uid":2797352,"ip_address":"","ucode":"52A4759408AD20","user_header":"https://static001.geekbang.org/account/avatar/00/2a/af/28/9ffc55a2.jpg","comment_is_top":false,"comment_ctime":1658364433,"is_pvip":false,"replies":[{"id":"127990","content":"正确 理解到位","user_name":"作者回复","comment_id":352045,"uid":"1345199","ip_address":"","utype":1,"ctime":1658365814,"user_name_real":"编辑"}],"discussion_count":1,"race_medal":0,"score":"10248299025","product_id":100117801,"comment_content":"就像老师上课讲到的，设置特权级就是给指令加上了权力，这样的话应用程序所执行的指令就只能做自己权利范围以内的事情，避免对其他的应用程序产生不必要的干扰和破坏，维持这个生态的稳定和平衡<br>","like_count":2,"discussions":[{"author":{"id":1345199,"avatar":"https://static001.geekbang.org/account/avatar/00/14/86/af/99219321.jpg","nickname":"LMOS","note":"","ucode":"B037712C8B8B3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":580735,"discussion_content":"正确 理解到位","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1658365814,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":352022,"user_name":"青玉白露","can_delete":false,"product_type":"c1","uid":2619436,"ip_address":"","ucode":"96FE2D4D2B94A0","user_header":"https://static001.geekbang.org/account/avatar/00/27/f8/2c/92969c48.jpg","comment_is_top":false,"comment_ctime":1658331831,"is_pvip":false,"replies":[{"id":"127994","content":"哈哈 对的","user_name":"作者回复","comment_id":352022,"uid":"1345199","ip_address":"","utype":1,"ctime":1658365978,"user_name_real":"编辑"}],"discussion_count":1,"race_medal":0,"score":"10248266423","product_id":100117801,"comment_content":"特权级是为了能够实现资源隔离、权限管理所设置的。之后实现的操作系统就需要用到他","like_count":2,"discussions":[{"author":{"id":1345199,"avatar":"https://static001.geekbang.org/account/avatar/00/14/86/af/99219321.jpg","nickname":"LMOS","note":"","ucode":"B037712C8B8B3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":580739,"discussion_content":"哈哈 对的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658365978,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":352820,"user_name":"杨景胜","can_delete":false,"product_type":"c1","uid":1005023,"ip_address":"北京","ucode":"1B4FB1326032B6","user_header":"https://static001.geekbang.org/account/avatar/00/0f/55/df/6dfd3cde.jpg","comment_is_top":false,"comment_ctime":1658970593,"is_pvip":false,"replies":[{"id":"128296","content":"更新啦，催学～","user_name":"编辑回复","comment_id":352820,"uid":"1501385","ip_address":"北京","utype":2,"ctime":1658980018,"user_name_real":"编辑"}],"discussion_count":2,"race_medal":0,"score":"5953937889","product_id":100117801,"comment_content":"催更催更催更","like_count":1,"discussions":[{"author":{"id":1501385,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e8/c9/59bcd490.jpg","nickname":"听水的湖","note":"","ucode":"B1759F90165D81","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581765,"discussion_content":"更新啦，催学～","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658980018,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京"},"score":2,"extra":"{\"reply\":true,\"user_type\":8}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2745918,"avatar":"https://static001.geekbang.org/account/avatar/00/29/e6/3e/c9ea608a.jpg","nickname":"Michael","note":"","ucode":"5227B7BDA76566","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582291,"discussion_content":"更新有些慢啊，一周更新三讲？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659351595,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"上海"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":352029,"user_name":"苏流郁宓","can_delete":false,"product_type":"c1","uid":2729645,"ip_address":"","ucode":"AD07BD9CE03047","user_header":"https://static001.geekbang.org/account/avatar/00/29/a6/ad/e65aec4c.jpg","comment_is_top":false,"comment_ctime":1658335543,"is_pvip":false,"replies":[{"id":"127993","content":"是的 其它CPU的核心 也是一样的 同一时间只用运行在一个特权级上","user_name":"作者回复","comment_id":352029,"uid":"1345199","ip_address":"","utype":1,"ctime":1658365964,"user_name_real":"编辑"}],"discussion_count":1,"race_medal":0,"score":"5953302839","product_id":100117801,"comment_content":"俺觉得特权级区分用户软件与操作系统功能，在操作系统那边讲过，亮点应该是硬件线程，任意时刻只能运行在一个特权级上。这算不算是在安全与好用上做平衡？算不算是RISCv指令集对cpu发展的贡献？","like_count":1,"discussions":[{"author":{"id":1345199,"avatar":"https://static001.geekbang.org/account/avatar/00/14/86/af/99219321.jpg","nickname":"LMOS","note":"","ucode":"B037712C8B8B3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":580738,"discussion_content":"是的 其它CPU的核心 也是一样的 同一时间只用运行在一个特权级上","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658365964,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":351994,"user_name":"J","can_delete":false,"product_type":"c1","uid":1002675,"ip_address":"","ucode":"EC6B45BD3E128D","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4c/b3/931dcd9e.jpg","comment_is_top":false,"comment_ctime":1658316102,"is_pvip":true,"replies":[{"id":"128015","content":"对 正确的","user_name":"作者回复","comment_id":351994,"uid":"1345199","ip_address":"","utype":1,"ctime":1658370407,"user_name_real":"编辑"}],"discussion_count":1,"race_medal":0,"score":"5953283398","product_id":100117801,"comment_content":"RISC-V定义特权级，有助于保护系统资源不被滥用和破坏，不会因为低特权程序的bug或恶意代码破坏环境。","like_count":1,"discussions":[{"author":{"id":1345199,"avatar":"https://static001.geekbang.org/account/avatar/00/14/86/af/99219321.jpg","nickname":"LMOS","note":"","ucode":"B037712C8B8B3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":580771,"discussion_content":"对 正确的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658370407,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":360385,"user_name":"lifetime","can_delete":false,"product_type":"c1","uid":2622088,"ip_address":"湖北","ucode":"7E4C18D41351A0","user_header":"https://static001.geekbang.org/account/avatar/00/28/02/88/df790e16.jpg","comment_is_top":false,"comment_ctime":1666531471,"is_pvip":false,"replies":[{"id":"131310","content":"设计CPU的资料","user_name":"作者回复","comment_id":360385,"uid":"1345199","ip_address":"湖北","utype":1,"ctime":1667034723,"user_name_real":"编辑"}],"discussion_count":1,"race_medal":0,"score":"1666531471","product_id":100117801,"comment_content":"问个小白才会问到的问题？<br>硬件CPU的“源代码”指的是什么？<br>对于ARM是售卖“源代码”存活的，那么它的“源代码”是指指令集的定义，寄存器的定义，特权级的定义吗，以及如何实现特权级的转换，寄存器如何使用等的规范？<br>我觉得是不是除了这些规范，还会包含CPU的内部结构，那些晶体管的摆放和连接设计图纸呀？","like_count":1,"discussions":[{"author":{"id":1345199,"avatar":"https://static001.geekbang.org/account/avatar/00/14/86/af/99219321.jpg","nickname":"LMOS","note":"","ucode":"B037712C8B8B3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":592029,"discussion_content":"设计CPU的资料","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1667034724,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"湖北"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":359711,"user_name":"揭晓林","can_delete":false,"product_type":"c1","uid":2437586,"ip_address":"湖北","ucode":"5D91C5DF067ECA","user_header":"https://static001.geekbang.org/account/avatar/00/25/31/d2/40338b73.jpg","comment_is_top":false,"comment_ctime":1665799049,"is_pvip":false,"replies":[{"id":"131058","content":"嗯嗯","user_name":"作者回复","comment_id":359711,"uid":"1345199","ip_address":"湖北","utype":1,"ctime":1666421304,"user_name_real":"编辑"}],"discussion_count":1,"race_medal":0,"score":"1665799049","product_id":100117801,"comment_content":"老师和同学们好，我这边想补充两个点：<br><br>1. 在RSIC-V因何流行那里，老师写的是“之前硬件和软件一样，都是小心地保护自己的 “源代码” ”这里是否将“硬件”和“软件”互换位置更顺畅一点？因为后面讲的是“直到后来，软件界出现了开源的 Linux”<br><br>2. 评论区有人评论特权级是如何切换的：我在B站看哈工大的操作系统课程时，第5讲里说到是用段寄存器来实现的，CPL（Current Privilege Level    当前的特权级） 和 DPL （Descriptor Privilege Level，目标段）。在操作系统启动的时候会初始化好。当用户程序执行的时候，会判断两个寄存器的值。","like_count":0,"discussions":[{"author":{"id":1345199,"avatar":"https://static001.geekbang.org/account/avatar/00/14/86/af/99219321.jpg","nickname":"LMOS","note":"","ucode":"B037712C8B8B3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":591254,"discussion_content":"嗯嗯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1666421304,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"湖北"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":355958,"user_name":"WGJ","can_delete":false,"product_type":"c1","uid":1468547,"ip_address":"湖北","ucode":"AC585A245E2509","user_header":"https://static001.geekbang.org/account/avatar/00/16/68/83/ecd4e4d6.jpg","comment_is_top":false,"comment_ctime":1661868528,"is_pvip":false,"replies":[{"id":"129739","content":"是的","user_name":"作者回复","comment_id":355958,"uid":"1345199","ip_address":"湖北","utype":1,"ctime":1662256144,"user_name_real":"编辑"}],"discussion_count":1,"race_medal":0,"score":"1661868528","product_id":100117801,"comment_content":"这个特权级是怎么切换的呢，如果是通过控制和状态寄存器控制，那是不是不同应用的寄存器的特权标志是有区别的，像操作系统的特权级是0，其他应用就是3，是这么区分的吗","like_count":0,"discussions":[{"author":{"id":1345199,"avatar":"https://static001.geekbang.org/account/avatar/00/14/86/af/99219321.jpg","nickname":"LMOS","note":"","ucode":"B037712C8B8B3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":586484,"discussion_content":"是的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662256144,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"湖北"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":354412,"user_name":"Abcd","can_delete":false,"product_type":"c1","uid":1796908,"ip_address":"湖北","ucode":"274C7487FDDC21","user_header":"https://static001.geekbang.org/account/avatar/00/1b/6b/2c/b27eefc5.jpg","comment_is_top":false,"comment_ctime":1660376152,"is_pvip":false,"replies":[{"id":"128945","content":"就是规范调用函数与被调用函数 应该各自维护哪些寄存器的值 在后面语言部分会有介绍","user_name":"作者回复","comment_id":354412,"uid":"1345199","ip_address":"湖北","utype":1,"ctime":1660523288,"user_name_real":"编辑"}],"discussion_count":1,"race_medal":0,"score":"1660376152","product_id":100117801,"comment_content":"关于 CPU 通用寄存器的保存问题，有的寄存器需要caller保存，有的需要callee保存，能举个例子吗？","like_count":0,"discussions":[{"author":{"id":1345199,"avatar":"https://static001.geekbang.org/account/avatar/00/14/86/af/99219321.jpg","nickname":"LMOS","note":"","ucode":"B037712C8B8B3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583945,"discussion_content":"就是规范调用函数与被调用函数 应该各自维护哪些寄存器的值 在后面语言部分会有介绍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660523289,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"湖北"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":354117,"user_name":"小杰","can_delete":false,"product_type":"c1","uid":2853200,"ip_address":"湖北","ucode":"BBDF8E9F348F65","user_header":"https://static001.geekbang.org/account/avatar/00/2b/89/50/aee9fdab.jpg","comment_is_top":false,"comment_ctime":1660105803,"is_pvip":true,"replies":[{"id":"128897","content":"对的","user_name":"作者回复","comment_id":354117,"uid":"1345199","ip_address":"湖北","utype":1,"ctime":1660318749,"user_name_real":"编辑"}],"discussion_count":1,"race_medal":0,"score":"1660105803","product_id":100117801,"comment_content":"每个模块，每个指令，做自己应该要做的事，不然就乱套了。","like_count":0,"discussions":[{"author":{"id":1345199,"avatar":"https://static001.geekbang.org/account/avatar/00/14/86/af/99219321.jpg","nickname":"LMOS","note":"","ucode":"B037712C8B8B3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583734,"discussion_content":"对的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660318749,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"湖北"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":353316,"user_name":"Lpc-Win32","can_delete":false,"product_type":"c1","uid":1214551,"ip_address":"湖北","ucode":"3B32792A3E614D","user_header":"https://static001.geekbang.org/account/avatar/00/12/88/57/0526d6c8.jpg","comment_is_top":false,"comment_ctime":1659348016,"is_pvip":true,"replies":[{"id":"128489","content":"哈哈  类比正确","user_name":"作者回复","comment_id":353316,"uid":"1345199","ip_address":"湖北","utype":1,"ctime":1659433038,"user_name_real":"编辑"}],"discussion_count":1,"race_medal":0,"score":"1659348016","product_id":100117801,"comment_content":"实模式、保护模式","like_count":0,"discussions":[{"author":{"id":1345199,"avatar":"https://static001.geekbang.org/account/avatar/00/14/86/af/99219321.jpg","nickname":"LMOS","note":"","ucode":"B037712C8B8B3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582435,"discussion_content":"哈哈  类比正确","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659433038,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"湖北"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":353008,"user_name":"0ver10@d","can_delete":false,"product_type":"c1","uid":1569581,"ip_address":"陕西","ucode":"36721BC40C328A","user_header":"https://static001.geekbang.org/account/avatar/00/17/f3/2d/1a5f7542.jpg","comment_is_top":false,"comment_ctime":1659075499,"is_pvip":false,"replies":[{"id":"128363","content":"这当然可能 ","user_name":"作者回复","comment_id":353008,"uid":"1345199","ip_address":"陕西","utype":1,"ctime":1659090960,"user_name_real":"编辑"}],"discussion_count":1,"race_medal":0,"score":"1659075499","product_id":100117801,"comment_content":"排除虚拟化的应用场景,对于多核处理器理论上有没有可能一个核运行在高特权级,一个核运行在低特权级?","like_count":0,"discussions":[{"author":{"id":1345199,"avatar":"https://static001.geekbang.org/account/avatar/00/14/86/af/99219321.jpg","nickname":"LMOS","note":"","ucode":"B037712C8B8B3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581968,"discussion_content":"这当然可能 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659090961,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"陕西"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":352665,"user_name":"jk001","can_delete":false,"product_type":"c1","uid":2812934,"ip_address":"","ucode":"FF1E3A2883E8D9","user_header":"https://static001.geekbang.org/account/avatar/00/2a/ec/06/4494ecde.jpg","comment_is_top":false,"comment_ctime":1658847660,"is_pvip":false,"replies":[{"id":"128268","content":"看下置顶留言哦，可以预习下～","user_name":"编辑回复","comment_id":352665,"uid":"1501385","ip_address":"","utype":2,"ctime":1658855097,"user_name_real":"编辑"}],"discussion_count":1,"race_medal":0,"score":"1658847660","product_id":100117801,"comment_content":"这几天怎么没更新？","like_count":0,"discussions":[{"author":{"id":1501385,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e8/c9/59bcd490.jpg","nickname":"听水的湖","note":"","ucode":"B1759F90165D81","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581586,"discussion_content":"看下置顶留言哦，可以预习下～","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658855097,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":8}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":352560,"user_name":"熊出没","can_delete":false,"product_type":"c1","uid":1145377,"ip_address":"","ucode":"6E39230CC87808","user_header":"https://static001.geekbang.org/account/avatar/00/11/7a/21/a33cc944.jpg","comment_is_top":false,"comment_ctime":1658761571,"is_pvip":true,"replies":[{"id":"128243","content":"嗯嗯 对的","user_name":"作者回复","comment_id":352560,"uid":"1345199","ip_address":"","utype":1,"ctime":1658797976,"user_name_real":"编辑"}],"discussion_count":1,"race_medal":0,"score":"1658761571","product_id":100117801,"comment_content":"权级设置是为了从杂乱中设置秩序 否则硬件资源就会被无序使用 导致机器崩溃","like_count":0,"discussions":[{"author":{"id":1345199,"avatar":"https://static001.geekbang.org/account/avatar/00/14/86/af/99219321.jpg","nickname":"LMOS","note":"","ucode":"B037712C8B8B3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581456,"discussion_content":"嗯嗯 对的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658797976,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":352551,"user_name":"砥砺奋进","can_delete":false,"product_type":"c1","uid":1608643,"ip_address":"","ucode":"2F12FD10F749AD","user_header":"https://static001.geekbang.org/account/avatar/00/18/8b/c3/bf036d99.jpg","comment_is_top":false,"comment_ctime":1658757303,"is_pvip":false,"replies":[{"id":"128242","content":"哈哈 为提供优质教程而努力 ","user_name":"作者回复","comment_id":352551,"uid":"1345199","ip_address":"","utype":1,"ctime":1658797956,"user_name_real":"编辑"}],"discussion_count":1,"race_medal":1,"score":"1658757303","product_id":100117801,"comment_content":"不得不说 彭老师这思维导图真心到位","like_count":0,"discussions":[{"author":{"id":1345199,"avatar":"https://static001.geekbang.org/account/avatar/00/14/86/af/99219321.jpg","nickname":"LMOS","note":"","ucode":"B037712C8B8B3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581455,"discussion_content":"哈哈 为提供优质教程而努力 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658797957,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":352529,"user_name":"落叶🍂建良","can_delete":false,"product_type":"c1","uid":1238358,"ip_address":"","ucode":"4015FADD0EFD61","user_header":"https://static001.geekbang.org/account/avatar/00/12/e5/56/3bee284c.jpg","comment_is_top":false,"comment_ctime":1658747412,"is_pvip":true,"replies":[{"id":"128360","content":"哈哈这个联想很不错嘛","user_name":"编辑回复","comment_id":352529,"uid":"1501385","ip_address":"","utype":2,"ctime":1659080434,"user_name_real":"编辑"}],"discussion_count":1,"race_medal":1,"score":"1658747412","product_id":100117801,"comment_content":"为什么设置特权级？<br>从业务角度来理解，应该就是权限管理，特权级就是管理员，其他的属于不同的角色，拥有不同的权限，目的是为了系统的安全和稳定","like_count":0,"discussions":[{"author":{"id":1501385,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e8/c9/59bcd490.jpg","nickname":"听水的湖","note":"","ucode":"B1759F90165D81","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581946,"discussion_content":"哈哈这个联想很不错嘛","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659080435,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":8}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":352378,"user_name":"Geek_53914b","can_delete":false,"product_type":"c1","uid":1993190,"ip_address":"","ucode":"E35B07C27408B4","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJIGLdWEhYTSa6ibdibOpUISmXqSmBIoPEKaEQPrafA2jvNiaWkuEhWvyAzr3icrN8NuGUViaRIsfpO76A/132","comment_is_top":false,"comment_ctime":1658622423,"is_pvip":false,"replies":[{"id":"128190","content":"为什么会乱","user_name":"作者回复","comment_id":352378,"uid":"1345199","ip_address":"","utype":1,"ctime":1658644787,"user_name_real":"编辑"}],"discussion_count":1,"race_medal":0,"score":"1658622423","product_id":100117801,"comment_content":"同一时间只能运行在一个特权级，那不就不会冲突了吗？不同时间特权级来回切换不更乱？","like_count":0,"discussions":[{"author":{"id":1345199,"avatar":"https://static001.geekbang.org/account/avatar/00/14/86/af/99219321.jpg","nickname":"LMOS","note":"","ucode":"B037712C8B8B3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581230,"discussion_content":"为什么会乱","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658644787,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":352278,"user_name":"nmg","can_delete":false,"product_type":"c1","uid":1663910,"ip_address":"","ucode":"11D0C183CC9B5F","user_header":"","comment_is_top":false,"comment_ctime":1658494637,"is_pvip":false,"replies":[{"id":"128156","content":"收到催更。上线一次性发了三篇哦，8月1日起每周一三五各更新一篇～<br><br>今天已经更新03啦，记得跟上～","user_name":"编辑回复","user_name_real":"编辑","uid":"1501385","ctime":1658500890,"ip_address":"","comment_id":352278,"utype":2}],"discussion_count":1,"race_medal":0,"score":"1658494637","product_id":100117801,"comment_content":"今天没有更新吗，今天是周五啊","like_count":0,"discussions":[{"author":{"id":1501385,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e8/c9/59bcd490.jpg","nickname":"听水的湖","note":"","ucode":"B1759F90165D81","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581111,"discussion_content":"收到催更。上线一次性发了三篇哦，8月1日起每周一三五各更新一篇～\n\n今天已经更新03啦，记得跟上～","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658500890,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":8}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":352263,"user_name":"Ball","can_delete":false,"product_type":"c1","uid":1521451,"ip_address":"","ucode":"1EE949E68D84CA","user_header":"https://static001.geekbang.org/account/avatar/00/17/37/2b/b32f1d66.jpg","comment_is_top":false,"comment_ctime":1658487147,"is_pvip":false,"replies":[{"id":"128175","content":"对的 ","user_name":"作者回复","user_name_real":"编辑","uid":"1345199","ctime":1658558623,"ip_address":"","comment_id":352263,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1658487147","product_id":100117801,"comment_content":"设定特权级别主要为了适应分时操作系统的全局调度操作，部分系统资源的访问权限收敛到一个地方，方便解决冲突和提高资源利用率","like_count":0,"discussions":[{"author":{"id":1345199,"avatar":"https://static001.geekbang.org/account/avatar/00/14/86/af/99219321.jpg","nickname":"LMOS","note":"","ucode":"B037712C8B8B3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581153,"discussion_content":"对的 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658558623,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":352204,"user_name":"东风第一枝","can_delete":false,"product_type":"c1","uid":1402697,"ip_address":"","ucode":"0CD0F62E90DAD8","user_header":"https://static001.geekbang.org/account/avatar/00/15/67/49/864dba17.jpg","comment_is_top":false,"comment_ctime":1658455612,"is_pvip":false,"replies":[{"id":"128146","content":"支持 香山","user_name":"作者回复","user_name_real":"编辑","uid":"1345199","ctime":1658487266,"ip_address":"","comment_id":352204,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1658455612","product_id":100117801,"comment_content":"老师怎么看基于RISC-V的XiangShan (香山)开源处理器","like_count":0,"discussions":[{"author":{"id":1345199,"avatar":"https://static001.geekbang.org/account/avatar/00/14/86/af/99219321.jpg","nickname":"LMOS","note":"","ucode":"B037712C8B8B3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581085,"discussion_content":"支持 香山","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1658487266,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":352192,"user_name":"和某欢","can_delete":false,"product_type":"c1","uid":2120663,"ip_address":"","ucode":"5E0F27533597F1","user_header":"https://static001.geekbang.org/account/avatar/00/20/5b/d7/d88c1850.jpg","comment_is_top":false,"comment_ctime":1658451975,"is_pvip":false,"replies":[{"id":"128121","content":"对的 ","user_name":"作者回复","user_name_real":"编辑","uid":"1345199","ctime":1658457719,"ip_address":"","comment_id":352192,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1658451975","product_id":100117801,"comment_content":"设置特权级是为了保护操作系统资源，不被上层应用程序滥用资源导致系统崩溃","like_count":0,"discussions":[{"author":{"id":1345199,"avatar":"https://static001.geekbang.org/account/avatar/00/14/86/af/99219321.jpg","nickname":"LMOS","note":"","ucode":"B037712C8B8B3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581001,"discussion_content":"对的 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658457719,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":352180,"user_name":"jeigiye","can_delete":false,"product_type":"c1","uid":1123522,"ip_address":"","ucode":"08DE1CBBE1354C","user_header":"https://static001.geekbang.org/account/avatar/00/11/24/c2/791d0f5e.jpg","comment_is_top":false,"comment_ctime":1658445974,"is_pvip":false,"replies":[{"id":"128125","content":"是的 哈哈 ","user_name":"作者回复","user_name_real":"编辑","uid":"1345199","ctime":1658457826,"ip_address":"","comment_id":352180,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1658445974","product_id":100117801,"comment_content":"”特权”就相对“一般”，他们都为程序服务，应用、服务、驱动、操作系统都程序，但程序也有分层，地层服务上层，比如操作系统为应用服务，这样操作系统就要稳定，一些危险操作或是控制就只能操作系统运行，即“特权”","like_count":0,"discussions":[{"author":{"id":1345199,"avatar":"https://static001.geekbang.org/account/avatar/00/14/86/af/99219321.jpg","nickname":"LMOS","note":"","ucode":"B037712C8B8B3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581006,"discussion_content":"是的 哈哈 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658457826,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":352154,"user_name":"peter","can_delete":false,"product_type":"c1","uid":1058183,"ip_address":"","ucode":"261C3FC001DE2D","user_header":"https://static001.geekbang.org/account/avatar/00/10/25/87/f3a69d1b.jpg","comment_is_top":false,"comment_ctime":1658410586,"is_pvip":true,"replies":[{"id":"128129","content":"Q1要考虑功耗 和 工艺","user_name":"作者回复","user_name_real":"编辑","uid":"1345199","ctime":1658457947,"ip_address":"","comment_id":352154,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1658410586","product_id":100117801,"comment_content":"请教老师几个问题：<br>Q1：CPU为什么不多造一些寄存器？<br>CPU的寄存器好像数量不多，为什么不多造几个寄存器呢，比如造一百个，<br>这样不就速度快了吗？寄存器数量少，是因为制造难度大？还是因为成本高？<br>或者是没有必要造那么多？<br>Q2：“需要保存的寄存器”，什么意思？<br>Q3：RV特权级，0是最高特权、3是最低特权吗？","like_count":0,"discussions":[{"author":{"id":1345199,"avatar":"https://static001.geekbang.org/account/avatar/00/14/86/af/99219321.jpg","nickname":"LMOS","note":"","ucode":"B037712C8B8B3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581010,"discussion_content":"Q1要考虑功耗 和 工艺","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658457947,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":352150,"user_name":"nmg","can_delete":false,"product_type":"c1","uid":1663910,"ip_address":"","ucode":"11D0C183CC9B5F","user_header":"","comment_is_top":false,"comment_ctime":1658409691,"is_pvip":false,"replies":[{"id":"128132","content":"哈哈 这是CPU内部的实现了","user_name":"作者回复","user_name_real":"编辑","uid":"1345199","ctime":1658458055,"ip_address":"","comment_id":352150,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1658409691","product_id":100117801,"comment_content":"虽然理解特权级别是为了资源合理分配，不被滥用，但是还是想不到这种特权级，在硬件上是如何实现的","like_count":0,"discussions":[{"author":{"id":1345199,"avatar":"https://static001.geekbang.org/account/avatar/00/14/86/af/99219321.jpg","nickname":"LMOS","note":"","ucode":"B037712C8B8B3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581013,"discussion_content":"哈哈 这是CPU内部的实现了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658458055,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":352126,"user_name":"softbaddog","can_delete":false,"product_type":"c1","uid":1267296,"ip_address":"","ucode":"7030262C82F900","user_header":"https://static001.geekbang.org/account/avatar/00/13/56/60/17bbbcf3.jpg","comment_is_top":false,"comment_ctime":1658393416,"is_pvip":true,"replies":[{"id":"128090","content":"6666","user_name":"作者回复","user_name_real":"编辑","uid":"1345199","ctime":1658396258,"ip_address":"","comment_id":352126,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1658393416","product_id":100117801,"comment_content":"特权设计肯定就是为了安全，但所谓合久必分，分久必合。说不定哪天又冒出一个新架构，打破了现有权限等级，将权限放到OS中，自身追求极致精简。","like_count":0,"discussions":[{"author":{"id":1345199,"avatar":"https://static001.geekbang.org/account/avatar/00/14/86/af/99219321.jpg","nickname":"LMOS","note":"","ucode":"B037712C8B8B3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":580897,"discussion_content":"6666","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658396258,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":352014,"user_name":"沙里飞","can_delete":false,"product_type":"c1","uid":2005433,"ip_address":"","ucode":"E68FE314029A3A","user_header":"https://static001.geekbang.org/account/avatar/00/1e/99/b9/96261f86.jpg","comment_is_top":false,"comment_ctime":1658326064,"is_pvip":true,"replies":[{"id":"128003","content":"是的 你有远见","user_name":"作者回复","user_name_real":"编辑","uid":"1345199","ctime":1658368017,"ip_address":"","comment_id":352014,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1658326064","product_id":100117801,"comment_content":"开源软件, 和开源硬件内容不同, 本质上有相似的理念. 成本&#47;利润是商业的重要出发点<br>1. 开源<br>2. 可定制, 可控; 适用领域广泛, 避免捆绑销售, 节省成本<br>3. 需要的行业规范, 业界标准. RISC-V基于&quot;前人&quot;的基础, 没有过多的历史包袱<br>4. 行业发展趋势本身; 去中心化, 去耦合, 软件定义; 感觉都是信息从一个量级到另外一个量级变化过程中的必然结果","like_count":0,"discussions":[{"author":{"id":1345199,"avatar":"https://static001.geekbang.org/account/avatar/00/14/86/af/99219321.jpg","nickname":"LMOS","note":"","ucode":"B037712C8B8B3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":580754,"discussion_content":"是的 你有远见","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658368017,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}