{"id":232440,"title":"53 | ForwardedHeadersï¼šç¡®ä¿æœåŠ¡åœ¨è´Ÿè½½å‡è¡¡ä¸‹æ­£å¸¸å·¥ä½œ","content":"<p><strong>è¯¾ä»¶å’ŒDemoåœ°å€</strong><br>\n<a href=\"https://gitee.com/geektime-geekbang/NET-Core\">https://gitee.com/geektime-geekbang/NET-Core</a></p>","comments":[{"had_liked":false,"id":220770,"user_name":"ğŸŒšğŸ˜‚ğŸ™„æ‡’å¾—å‹¤å¿«ğŸ¤—ğŸ¤”ğŸŒ","can_delete":false,"product_type":"c3","uid":1291721,"ip_address":"","ucode":"4ADE8C73BEB869","user_header":"https://static001.geekbang.org/account/avatar/00/13/b5/c9/e449329d.jpg","comment_is_top":false,"comment_ctime":1590322655,"is_pvip":false,"replies":[{"id":82221,"content":"ä¸€èˆ¬æ¥è®²ï¼Œåº”ç”¨åº”è¯¥åªä¿¡ä»»å†…éƒ¨åå‘ä»£ç†æä¾›çš„X-Forwarded-Forï¼Œå¦å¤–åå‘ä»£ç†ã€è´Ÿè½½å‡è¡¡åº”è¯¥å…³é—­å¯¹å…¶å®ƒX-Forwarded-Forçš„ä¿¡ä»»ï¼Œå¯ä»¥è®¾ç½®ä¿¡ä»»çš„ä»£ç†","user_name":"ä½œè€…å›å¤","user_name_real":"è‚–ä¼Ÿå®‡","uid":1756585,"ctime":1591006472,"ip_address":"","comment_id":220770,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100044601,"comment_content":"å…³äºX-Forwarded-Foræ ‡å¤´ï¼Œä¸ªäººæœ€è¿‘é‡åˆ°çš„ä¸€äº›é—®é¢˜åœ¨æ­¤åˆ†äº«ä¸€ä¸‹ï¼ŒX-Forwarded-Forè¿™ä¸ªæ ‡å¤´æ˜¯å®¢æˆ·ç«¯å¯ä»¥è¿›è¡Œç¯¡æ”¹çš„ï¼Œé€šå¸¸æ˜¯ç”¨äºä¼ªé€ IPï¼Œå‰æ®µæ—¶é—´æˆ‘è‡ªå·±çš„ç½‘ç«™å°±æ˜¯å› ä¸ºè¿™ä¸ªæ¼æ´å¯¼è‡´äº†åŸæœ¬å·²ç»è¢«å°é”çš„ä¸€äº›IPæ®µå’Œåœ°åŒºçš„ç”¨æˆ·ï¼Œå¯ä»¥é€šè¿‡ä¼ªé€ X-Forwarded-Foræ ‡å¤´ï¼Œæ¯”å¦‚192.168.1.1ã€127.0.0.1è¿™æ ·çš„IPæ¥æ¬ºéª—webé˜²ç«å¢™ï¼Œè€Œæ­£å¥½å»å¹¿å‘Šå·¥å…·adguardå°±æ­£å¥½æä¾›äº†å¯ä»¥ä¼ªé€ X-Forwarded-Foræ ‡å¤´çš„åŠŸèƒ½ï¼Œæ‰€ä»¥å®é™…æƒ…å†µä¸­ï¼Œæˆ‘ä»¬è¿˜éœ€è¦é€šè¿‡äºŒæ¬¡æ¯”å¯¹X-Forwarded-Foræ ‡å¤´å’Œå¦å¤–ä¸€ä¸ªä»£ç†æœåŠ¡å™¨è½¬å‘æ¥çš„åŸå§‹IPæ ‡å¤´ï¼Œæ¯”å¦‚ï¼šcloudflareçš„CF-Connecting-IPè¿™ç§æ— æ³•è¢«å®¢æˆ·ç«¯ç¯¡æ”¹çš„å¤´ï¼Œå¦‚æœè¯·æ±‚æ˜¯æ²¡æœ‰è¢«ç¯¡æ”¹çš„ï¼Œé‚£ä¹ˆX-Forwarded-Foræ ‡å¤´å’ŒCF-Connecting-IPä¸€å®šæ˜¯ç›¸ç­‰çš„ï¼Œå¦‚æœé¡¹ç›®ä¸­æœ‰è¦æ±‚ä¸€å®šè¦æ£€æµ‹åˆ°çœŸå®çš„å®¢æˆ·ç«¯IPè¿™ä¸ªé—®é¢˜éœ€è¦æ³¨æ„ä¸€ä¸‹ï¼","like_count":2,"discussions":[{"author":{"id":1756585,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cd/a9/791d0f5e.jpg","nickname":"è€è‚–æƒ³å½“å¤–è¯­å¤§ä½¬","note":"","ucode":"F662D1BF671E92","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496235,"discussion_content":"ä¸€èˆ¬æ¥è®²ï¼Œåº”ç”¨åº”è¯¥åªä¿¡ä»»å†…éƒ¨åå‘ä»£ç†æä¾›çš„X-Forwarded-Forï¼Œå¦å¤–åå‘ä»£ç†ã€è´Ÿè½½å‡è¡¡åº”è¯¥å…³é—­å¯¹å…¶å®ƒX-Forwarded-Forçš„ä¿¡ä»»ï¼Œå¯ä»¥è®¾ç½®ä¿¡ä»»çš„ä»£ç†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591006472,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1291721,"avatar":"https://static001.geekbang.org/account/avatar/00/13/b5/c9/e449329d.jpg","nickname":"ğŸŒšğŸ˜‚ğŸ™„æ‡’å¾—å‹¤å¿«ğŸ¤—ğŸ¤”ğŸŒ","note":"","ucode":"4ADE8C73BEB869","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":286588,"discussion_content":"è®¾ç½®å¯ä¿¡ä»£ç†ç¡®å®æ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯è¿™æ ·éœ€è¦åšé¢å¤–çš„é…ç½®ï¼Œå¦‚æœCDNèŠ‚ç‚¹IPå‘ç”Ÿå˜åŠ¨å°±ä¸€å®šéœ€è¦å»ä¿®æ”¹é…ç½®ï¼Œå¢åŠ äº†é¢å¤–çš„ç»´æŠ¤æˆæœ¬å’Œæµ‹è¯•æˆæœ¬ï¼Œæ‰€ä»¥æˆ‘ä¸ªäººè¿˜æ˜¯è§‰å¾—ç›´æ¥å–CDNçš„çœŸå®çš„å®¢æˆ·ç«¯IPæ ‡å¤´æ¥è·å–çœŸå®IPæ¯”è¾ƒå¯è¡Œã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593237613,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":230040,"user_name":"å°å–µå–µ","can_delete":false,"product_type":"c3","uid":1062444,"ip_address":"","ucode":"FDBBB2A59DB8B6","user_header":"https://static001.geekbang.org/account/avatar/00/10/36/2c/8bd4be3a.jpg","comment_is_top":false,"comment_ctime":1593246378,"is_pvip":false,"replies":[{"id":86000,"content":"è®¿é—®æµé‡åˆ†æï¼Œå®¢æˆ·åœ°ç†ä½ç½®å¤„ç†ç­‰ï¼Œä¾‹å¦‚è´¦æˆ·å¼‚åœ°ç™»é™†è¯†åˆ«","user_name":"ä½œè€…å›å¤","user_name_real":"è‚–ä¼Ÿå®‡","uid":1756585,"ctime":1594222069,"ip_address":"","comment_id":230040,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100044601,"comment_content":"ä¸ºä»€ä¹ˆéœ€è¦è·å–åŸç†çš„åœ°å€æˆ–ipï¼Ÿè¿™ä¸ªæ˜¯ç”¨åœ¨ä»€ä¹ˆæ ·å­çš„åœºæ™¯ä¸­å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1756585,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cd/a9/791d0f5e.jpg","nickname":"è€è‚–æƒ³å½“å¤–è¯­å¤§ä½¬","note":"","ucode":"F662D1BF671E92","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":499745,"discussion_content":"è®¿é—®æµé‡åˆ†æï¼Œå®¢æˆ·åœ°ç†ä½ç½®å¤„ç†ç­‰ï¼Œä¾‹å¦‚è´¦æˆ·å¼‚åœ°ç™»é™†è¯†åˆ«","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594222069,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1291721,"avatar":"https://static001.geekbang.org/account/avatar/00/13/b5/c9/e449329d.jpg","nickname":"ğŸŒšğŸ˜‚ğŸ™„æ‡’å¾—å‹¤å¿«ğŸ¤—ğŸ¤”ğŸŒ","note":"","ucode":"4ADE8C73BEB869","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":287324,"discussion_content":"ä¸€èˆ¬æ˜¯åšå®¢æˆ·ç«¯çš„åŸ‹ç‚¹ç»Ÿè®¡æˆ–è€…é˜²ç«å¢™æ¸…æ´—ç­‰åœºæ™¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593415540,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":271149,"user_name":"Yaphet","can_delete":false,"product_type":"c3","uid":1156307,"ip_address":"","ucode":"6A00C081771315","user_header":"https://static001.geekbang.org/account/avatar/00/11/a4/d3/e27a97c4.jpg","comment_is_top":false,"comment_ctime":1609416614,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100044601,"comment_content":"ä½ å¥½è€å¸ˆï¼Œæˆ‘ç°åœ¨é‡åˆ°è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘æŠŠgrpcæœåŠ¡éƒ¨ç½²åˆ°k8såï¼Œå‘ç°podæ¥æ”¶åˆ°çš„è¯·æ±‚ä¸å‡åŒ€ï¼Œæˆ‘æ„Ÿè§‰å¯èƒ½æ˜¯å› ä¸ºgrpcæœåŠ¡æ˜¯é•¿è¿æ¥çš„ï¼Œè¯·é—®grpcæœåŠ¡éƒ¨ç½²k8såæ€ä¹ˆå®ç°è´Ÿè½½å‡è¡¡","like_count":1},{"had_liked":false,"id":251740,"user_name":"é¡¾ä½ å¿ƒå®‰","can_delete":false,"product_type":"c3","uid":1813098,"ip_address":"","ucode":"D0080EBA52CFBB","user_header":"https://static001.geekbang.org/account/avatar/00/1b/aa/6a/fade4619.jpg","comment_is_top":false,"comment_ctime":1601818764,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100044601,"comment_content":"å—æ•™äº†","like_count":0}]}