{"id":499714,"title":"17 | Web åº”ç”¨é˜²ç«å¢™ï¼šæ€æ ·æ‹¦æˆªæ¶æ„ç”¨æˆ·çš„éæ³•è¯·æ±‚ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯ææ™ºæ…§ã€‚</p><p>Webåº”ç”¨é˜²ç«å¢™ï¼ˆWeb Application Firewallï¼Œ WAFï¼‰é€šè¿‡å¯¹HTTP(S)è¯·æ±‚è¿›è¡Œæ£€æµ‹ï¼Œè¯†åˆ«å¹¶é˜»æ–­SQLæ³¨å…¥ã€è·¨ç«™è„šæœ¬æ”»å‡»ã€è·¨ç«™è¯·æ±‚ä¼ªé€ ç­‰æ”»å‡»ï¼Œä¿æŠ¤WebæœåŠ¡å®‰å…¨ç¨³å®šã€‚</p><p>Webå®‰å…¨æ˜¯æ‰€æœ‰äº’è”ç½‘åº”ç”¨å¿…é¡»å…·å¤‡çš„åŠŸèƒ½ï¼Œæ²¡æœ‰å®‰å…¨é˜²æŠ¤çš„åº”ç”¨çŠ¹å¦‚æ€€æ£ç å®çš„å„¿ç«¥ç‹¬è‡ªè¡Œèµ°åœ¨ç›—è´¼ç¯ä¼ºçš„é»‘å¤œé‡Œã€‚æˆ‘ä»¬å‡†å¤‡å¼€å‘ä¸€ä¸ªWebåº”ç”¨é˜²ç«å¢™ï¼Œè¯¥é˜²ç«å¢™å¯ä½œä¸ºWebæ’ä»¶ï¼Œéƒ¨ç½²åœ¨Webåº”ç”¨æˆ–è€…å¾®æœåŠ¡ç½‘å…³ç­‰HTTPæœåŠ¡çš„å…¥å£ï¼Œæ‹¦æˆªæ¶æ„è¯·æ±‚ï¼Œä¿æŠ¤ç³»ç»Ÿå®‰å…¨ã€‚æˆ‘ä»¬å‡†å¤‡å¼€å‘çš„Webåº”ç”¨é˜²ç«å¢™åç§°ä¸ºâ€œZhurongï¼ˆç¥èï¼‰â€ã€‚</p><h2>éœ€æ±‚åˆ†æ</h2><p>HTTPè¯·æ±‚å‘é€åˆ°WebæœåŠ¡å™¨æ—¶ï¼Œè¯·æ±‚é¦–å…ˆåˆ°è¾¾Zhurongé˜²ç«å¢™ï¼Œé˜²ç«å¢™åˆ¤æ–­è¯·æ±‚ä¸­æ˜¯å¦åŒ…å«æ¶æ„æ”»å‡»ä¿¡æ¯ã€‚å¦‚æœåŒ…å«ï¼Œé˜²ç«å¢™æ ¹æ®é…ç½®ç­–ç•¥ï¼Œå¯é€‰æ‹©æ‹’ç»è¯·æ±‚ï¼Œè¿”å›418çŠ¶æ€ç ï¼›ä¹Ÿå¯ä»¥å°†è¯·æ±‚ä¸­çš„æ¶æ„æ•°æ®è¿›è¡Œæ¶ˆæ¯’å¤„ç†ï¼Œä¹Ÿå°±æ˜¯å¯¹æ¶æ„æ•°æ®è¿›è¡Œæ›¿æ¢ï¼Œæˆ–è€…æ’å…¥æŸäº›å­—ç¬¦ï¼Œä»è€Œä½¿è¯·æ±‚æ•°æ®ä¸å†å…·æœ‰æ”»å‡»æ€§ï¼Œç„¶åå†è°ƒç”¨åº”ç”¨ç¨‹åºå¤„ç†ã€‚å¦‚ä¸‹å›¾ï¼š</p><p></p><p><img src=\"https://static001.geekbang.org/resource/image/c6/27/c62b0c3517c9yy2ce9e556a75a44a427.jpg?wh=1920x588\" alt=\"å›¾ç‰‡\"></p><p>Zhurongéœ€è¦å¤„ç†çš„æ”»å‡»å’Œå®‰å…¨æ¼æ´åˆ—è¡¨ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/ec/e2/ec061c371c83170cbdb4254332319ee2.jpg?wh=1920x884\" alt=\"å›¾ç‰‡\"></p><h2>æ¦‚è¦è®¾è®¡</h2><p>Zhurongèƒ½å¤Ÿå‘ç°æ¶æ„æ”»å‡»è¯·æ±‚çš„ä¸»è¦æ‰‹æ®µï¼Œæ˜¯å¯¹HTTPè¯·æ±‚å†…å®¹è¿›è¡Œæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ï¼Œå°†å„ç§æ”»å‡»ç±»å‹å¯èƒ½åŒ…å«çš„æ¶æ„å†…å®¹æ„é€ æˆæ­£åˆ™è¡¨è¾¾å¼ï¼Œç„¶åå¯¹HTTPè¯·æ±‚å¤´å’Œè¯·æ±‚ä½“è¿›è¡ŒåŒ¹é…ã€‚å¦‚æœåŒ¹é…æˆåŠŸï¼Œé‚£ä¹ˆå°±è§¦å‘ç›¸å…³çš„å¤„ç†é€»è¾‘ï¼Œç›´æ¥æ‹’ç»è¯·æ±‚ï¼›æˆ–è€…å°†è¯·æ±‚ä¸­çš„æ¶æ„å†…å®¹è¿›è¡Œæ¶ˆæ¯’ï¼Œå³è¿›è¡Œå­—ç¬¦æ›¿æ¢ï¼Œä½¿æ”»å‡»æ— æ³•ç”Ÿæ•ˆã€‚</p><!-- [[[read_end]]] --><p>å…¶ä¸­ï¼Œæ¶æ„å†…å®¹æ­£åˆ™è¡¨è¾¾å¼æ˜¯é€šè¿‡è¿œç¨‹é…ç½®æ¥è·å–çš„ã€‚å¦‚æœå‘ç°äº†æ–°çš„æ”»å‡»æ¼æ´ï¼Œè¿œç¨‹é…ç½®çš„æ¼æ´æ”»å‡»æ­£åˆ™è¡¨è¾¾å¼å°±ä¼šè¿›è¡Œæ›´æ–°ï¼Œå¹¶åœ¨æ‰€æœ‰è¿è¡Œäº†Zhurongé˜²ç«å¢™çš„æœåŠ¡å™¨ä¸Šç”Ÿæ•ˆï¼Œæ‹¦æˆªæ–°çš„æ”»å‡»ã€‚ç»„ä»¶å›¾å¦‚ä¸‹ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/42/f5/420c438eda5328c627e1957aabbd20f5.jpg?wh=1920x1227\" alt=\"å›¾ç‰‡\"></p><p>HTTPè¯·æ±‚å…ˆåˆ°è¾¾è¯·æ±‚è¿‡æ»¤å™¨ï¼Œè¯·æ±‚è¿‡æ»¤å™¨æå–HTTPè¯·æ±‚å¤´å’ŒHTTPè¯·æ±‚ä½“ä¸­çš„æ•°æ®ï¼Œè¿™ä¸ªè¿‡æ»¤å™¨å…¶å®å°±æ˜¯Javaä¸­çš„Filterã€‚è¿‡æ»¤å™¨è°ƒç”¨æ¼æ´ç­–ç•¥å¤„ç†å™¨è¿›è¡Œå¤„ç†ï¼Œè€Œæ¼æ´ç­–ç•¥å¤„ç†å™¨éœ€è¦è°ƒç”¨æ¼æ´å®šä¹‰æ–‡ä»¶åŠ è½½æ¨¡å—è·å¾—æ¼æ´å®šä¹‰è§„åˆ™ï¼Œæ¼æ´å®šä¹‰æ–‡ä»¶åŠ è½½æ¨¡å—ç¼“å­˜äº†å„ç§æ¼æ´å®šä¹‰è§„åˆ™æ–‡ä»¶ï¼Œå¦‚æœç¼“å­˜è¶…æ—¶ï¼Œå°±ä»è¿œç¨‹é…ç½®ä¸­å¿ƒé‡æ–°åŠ è½½æ¼æ´å®šä¹‰è§„åˆ™ã€‚</p><p>æ¼æ´å®šä¹‰è§„åˆ™æ–‡ä»¶æ˜¯Zhurongçš„æ ¸å¿ƒï¼Œè¯¥æ–‡ä»¶å®šä¹‰äº†æ”»å‡»çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œè¿‡æ»¤å™¨æ­£æ˜¯é€šè¿‡ä½¿ç”¨è¿™äº›æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…HTTPè¯·æ±‚å¤´å’ŒHTTPè¯·æ±‚ä½“çš„æ–¹å¼ï¼Œè¯†åˆ«å‡ºHTTPè¯·æ±‚ä¸­æ˜¯å¦å­˜åœ¨æ”»å‡»å†…å®¹ã€‚åŒæ—¶ï¼Œæ¼æ´å®šä¹‰è§„åˆ™æ–‡ä»¶ä¸­è¿˜å®šä¹‰äº†å‘ç°æ”»å‡»å†…å®¹åçš„å¤„ç†æ–¹å¼ï¼šæ˜¯æ‹’ç»è¯·æ±‚ï¼Œè·³è½¬åˆ°å‡ºé”™é¡µé¢ï¼Œè¿˜æ˜¯é‡‡ç”¨æ¶ˆæ¯’çš„æ–¹å¼ï¼Œå°†æ”»å‡»å†…å®¹å­—ç¬¦è¿›è¡Œæ›¿æ¢ã€‚</p><p>æ¼æ´è§„åˆ™å®šä¹‰æ–‡ä»¶é‡‡ç”¨XMLæ ¼å¼ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š</p><pre><code class=\"language-xml\">&lt;?xml version=\"1.0\"?&gt;\n&nbsp;\n&lt;recipe\n&nbsp;&nbsp;&nbsp; attacktype=\"Sql\"\n&nbsp;&nbsp;&nbsp; path=\"^/protectfolder/.*$\"\n&nbsp;&nbsp;&nbsp; description=\"Sql injection attacks\"\n&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n&nbsp;&nbsp;&nbsp; &lt;ruleSet\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; stage = \"request\"\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; condition = \"or\"\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;action\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; name=\"forward\"\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; arg=\"error.html\"\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;rule\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; operator = \"regex\"\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; arg = \"paramNames[*]\"\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; value = \"select|update|delete|count|*|sum|master|script|'|declare|\nã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€or|execute|alter|statement|executeQuery|count|executeUpdate\"\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /&gt;\n&nbsp;&nbsp;&nbsp; &lt;/ruleSet&gt;&nbsp;&nbsp;\n&nbsp;&nbsp;&nbsp;\n&nbsp;&nbsp;&nbsp; &lt;ruleSet\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; stage = \"response\"\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; condition = \"or\"\n&gt;&nbsp;&nbsp;&nbsp;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;action\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; name =\"replace\"\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; arg = \" \" &nbsp;&nbsp;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; /&gt;&nbsp;&nbsp;&nbsp;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;rule\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; operator = \"regex\"\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; arg = \" responseBody \"\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; value = \"(//.+\\n)|(/\\*\\*.+\\*/)|(&lt;!--.*--&gt;)\"\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /&gt;\n&nbsp;&nbsp;&nbsp; &lt;/ruleSet&gt;&nbsp;&nbsp;\n&nbsp;&nbsp;&nbsp;\n&lt;/recipe&gt;\n</code></pre><p>recipeæ˜¯æ¼æ´å®šä¹‰æ–‡ä»¶çš„æ ¹æ ‡ç­¾ï¼Œå±æ€§attacktypeè¡¨ç¤ºå¤„ç†çš„æ”»å‡»ç±»å‹ï¼Œæœ‰ä»¥ä¸‹å‡ ç§ã€‚</p><ul>\n<li>SQLï¼š SQLæ³¨å…¥æ”»å‡»</li>\n<li>XSSï¼š è·¨ç«™ç‚¹è„šæœ¬æ”»å‡»</li>\n<li>CSCï¼š æ³¨é‡Šä¸å¼‚å¸¸ä¿¡æ¯æ³„éœ²</li>\n<li>CSRFï¼š è·¨ç«™ç‚¹è¯·æ±‚ä¼ªé€ </li>\n<li>FBï¼š è·¯å¾„éå†ä¸å¼ºåˆ¶æµè§ˆ<br>\npathè¡¨ç¤ºè¦å¤„ç†çš„è¯·æ±‚è·¯å¾„ï¼Œå¯ä»¥ä¸ºç©ºï¼Œè¡¨ç¤ºå¤„ç†æ‰€æœ‰è¯·æ±‚è·¯å¾„ã€‚</li>\n</ul><p>ruleSetæ˜¯æ¼æ´å¤„ç†è§„åˆ™é›†åˆï¼Œä¸€ä¸ªæ¼æ´æ–‡ä»¶å¯ä»¥åŒ…å«å¤šä¸ªruleSetã€‚stageæ ‡ç­¾è¡¨ç¤ºå¤„ç†çš„é˜¶æ®µï¼Œè¯·æ±‚é˜¶æ®µï¼šrequestï¼Œå“åº”é˜¶æ®µï¼šresponseã€‚conditionè¡¨ç¤ºå’Œå…¶ä»–è§„åˆ™çš„é€»è¾‘å…³ç³»ï¼Œâ€œorâ€è¡¨ç¤ºâ€œæˆ–â€å…³ç³»ï¼Œå³è¯¥è§„åˆ™å¤„ç†å®Œæˆåï¼Œå…¶ä»–è§„åˆ™ä¸éœ€è¦å†å¤„ç†ï¼›â€œandâ€è¡¨ç¤ºâ€œä¸â€å…³ç³»ï¼Œè¯¥è§„åˆ™å¤„ç†å®Œæˆåï¼Œå…¶ä»–è§„åˆ™è¿˜éœ€è¦å†å¤„ç†ã€‚</p><p>actionè¡¨ç¤ºå‘ç°æ”»å‡»åçš„å¤„ç†åŠ¨ä½œã€‚â€œforwardâ€è¡¨ç¤ºè¡¨ç¤ºè·³è½¬åˆ°å‡ºé”™é¡µé¢ï¼Œåé¢çš„â€œargâ€è¡¨ç¤ºè¦è·³è½¬çš„è·¯å¾„ï¼›â€œreplaceâ€è¡¨ç¤ºå¯¹æ”»å‡»å†…å®¹è¿›è¡Œæ›¿æ¢ï¼Œå³æ‰€è°“çš„æ¶ˆæ¯’ï¼Œä½¿å…¶ä¸å†å…·æœ‰æ”»å‡»æ€§ï¼Œåé¢çš„â€œargâ€è¡¨ç¤ºè¦æ›¿æ¢çš„å†…å®¹ã€‚</p><p>ruleè¡¨ç¤ºæ¼æ´è§„åˆ™ï¼Œè§¦å‘æ¼æ´è§„åˆ™ï¼Œå°±ä¼šå¼•èµ·actionå¤„ç†åŠ¨ä½œã€‚operatorè¡¨ç¤ºå¦‚ä½•åŒ¹é…å†…å®¹ä¸­çš„æ”»å‡»å†…å®¹ï¼Œâ€œregexâ€è¡¨ç¤ºæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ï¼Œâ€œurlmatchâ€è¡¨ç¤ºURLè·¯å¾„åŒ¹é…ã€‚â€œargâ€è¡¨ç¤ºè¦åŒ¹é…çš„ç›®æ ‡ï¼Œå¯ä»¥æ˜¯HTTPè¯·æ±‚å‚æ•°åã€è¯·æ±‚å‚æ•°å€¼ã€è¯·æ±‚å¤´ã€å“åº”ä½“ã€ULRè·¯å¾„ã€‚â€œvalueâ€å°±æ˜¯åŒ¹é…æ”»å‡»å†…å®¹çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚</p><h2>è¯¦ç»†è®¾è®¡</h2><p>Zhurongå¯ä»¥å¤„ç†çš„æ”»å‡»ç±»å‹æœ‰å“ªäº›ï¼Ÿå®ƒä»¬çš„åŸç†æ˜¯ä»€ä¹ˆï¼ŸZhurongå¯¹åº”çš„å¤„ç†æ–¹æ³•åˆæ˜¯ä»€ä¹ˆï¼Ÿè¯¦ç»†è®¾è®¡å°†è§£å†³è¿™äº›é—®é¢˜ã€‚</p><h4>XSSè·¨ç«™ç‚¹è„šæœ¬æ”»å‡»</h4><p>XSS æ”»å‡»å³è·¨ç«™ç‚¹è„šæœ¬æ”»å‡»(Cross Site Script)ï¼ŒæŒ‡é»‘å®¢é€šè¿‡ç¯¡æ”¹ç½‘é¡µï¼Œæ³¨å…¥æ¶æ„ JavaScriptè„šæœ¬ï¼Œåœ¨ç”¨æˆ·æµè§ˆç½‘é¡µæ—¶ï¼Œæ§åˆ¶ç”¨æˆ·æµè§ˆå™¨è¿›è¡Œæ¶æ„æ“ä½œçš„ä¸€ç§æ”»å‡»æ–¹å¼ã€‚</p><p>å¸¸è§çš„ XSS æ”»å‡»ç±»å‹æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯åå°„å‹ï¼Œæ”»å‡»è€…è¯±ä½¿ç”¨æˆ·ç‚¹å‡»ä¸€ä¸ªåµŒå…¥æ¶æ„è„šæœ¬çš„é“¾æ¥ï¼Œè¾¾åˆ°æ”»å‡»çš„ç›®çš„ã€‚å¦‚å›¾ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/91/e4/918a55f1c407f13b9c548d4c6bfb44e4.jpg?wh=1920x942\" alt=\"å›¾ç‰‡\"></p><p>æ”»å‡»è€…å‘å¸ƒçš„å¾®åšä¸­æœ‰ä¸€ä¸ªå«æœ‰æ¶æ„è„šæœ¬çš„ URLï¼ˆåœ¨å®é™…åº”ç”¨ä¸­ï¼Œè¯¥è„šæœ¬åœ¨æ”»å‡»è€…è‡ªå·±çš„æœåŠ¡å™¨ www.2kt.cnä¸Šï¼ŒURL ä¸­åŒ…å«è„šæœ¬çš„é“¾æ¥ï¼‰ï¼Œç”¨æˆ·ç‚¹å‡»è¯¥ URLï¼Œä¼šè‡ªåŠ¨å…³æ³¨æ”»å‡»è€…çš„æ–°æµªå¾®åš IDï¼Œå‘å¸ƒå«æœ‰æ¶æ„è„šæœ¬ URL çš„å¾®åšï¼Œæ”»å‡»å°±è¢«æ‰©æ•£äº†ã€‚</p><p>å¦å¤–ä¸€ç§ XSS æ”»å‡»æ˜¯æŒä¹…å‹ XSS æ”»å‡»ï¼Œé»‘å®¢æäº¤å«æœ‰æ¶æ„è„šæœ¬çš„è¯·æ±‚ï¼Œä¿å­˜åœ¨è¢«æ”»å‡»çš„ Web ç«™ç‚¹çš„æ•°æ®åº“ä¸­ï¼Œç”¨æˆ·æµè§ˆç½‘é¡µæ—¶ï¼Œæ¶æ„è„šæœ¬è¢«åŒ…å«åœ¨æ­£å¸¸é¡µé¢ä¸­ï¼Œè¾¾åˆ°æ”»å‡»çš„ç›®çš„ã€‚å¦‚å›¾ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/fd/23/fd4f318yyf430c034eb23a0e62afb023.jpg?wh=1920x1428\" alt=\"å›¾ç‰‡\"></p><p>æ­¤ç§æ”»å‡»ç»å¸¸ä½¿ç”¨åœ¨è®ºå›ã€åšå®¢ç­‰ Web åº”ç”¨ä¸­ã€‚</p><p>Zhurongé‡‡ç”¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…å«æœ‰XSSæ”»å‡»å†…å®¹çš„è¯·æ±‚ï¼Œæ­£åˆ™è¡¨è¾¾å¼å¦‚ä¸‹ï¼š</p><pre><code class=\"language-plain\">\"(?:\\b(?:on(?:(?:mo(?:use(?:o(?:ver|ut)|down|move|up)|ve)|key(?:press|down|up)|c(?:hange|lick)|s(?:elec|ubmi)t|(?:un)?load|dragdrop|resize|focus|blur)\\b\\W*?=|abort\\b)|(?:l(?:owsrc\\b\\W*?\\b(?:(?:java|vb)script|shell)|ivescript)|(?:href|url)\\b\\W*?\\b(?:(?:java|vb)script|shell)|background-image|mocha):|type\\b\\W*?\\b(?:text\\b(?:\\W*?\\b(?:j(?:ava)?|ecma)script\\b|[vbscript])|application\\b\\W*?\\bx-(?:java|vb)script\\b)|s(?:(?:tyle\\b\\W*=.*\\bexpression\\b\\W*|ettimeout\\b\\W*?)\\(|rc\\b\\W*?\\b(?:(?:java|vb)script|shell|http):)|(?:c(?:opyparentfolder|reatetextrange)|get(?:special|parent)folder)\\b|a(?:ctivexobject\\b|lert\\b\\W*?\\())|&lt;(?:(?:body\\b.*?\\b(?:backgroun|onloa)d|input\\b.*?\\\\btype\\b\\W*?\\bimage)\\b|!\\[CDATA\\[|script|meta)|(?:\\.(?:(?:execscrip|addimpor)t|(?:fromcharcod|cooki)e|innerhtml)|\\@import)\\b)\"\n</code></pre><p>åŒ¹é…æˆåŠŸåï¼Œæ ¹æ®æ¼æ´å®šä¹‰æ–‡ä»¶ï¼Œå¯ä»¥é€‰æ‹©forwardåˆ°é”™è¯¯é¡µé¢ï¼Œä¹Ÿå¯ä»¥é‡‡ç”¨replaceæ–¹å¼è¿›è¡Œæ¶ˆæ¯’ï¼Œreplaceæ¶ˆæ¯’è¡¨å¦‚ä¸‹ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/2f/5a/2f005ce671e91529fe7aef3ef935f15a.jpg?wh=1920x1475\" alt=\"å›¾ç‰‡\"></p><p>åœ¨XSSæ”»å‡»å­—ç¬¦å‰ååŠ ä¸Šâ€œ&amp;nbsp;â€å­—ç¬¦ä¸²ï¼Œä½¿å¾—æ”»å‡»è„šæœ¬æ— æ³•è¿è¡Œï¼ŒåŒæ—¶åœ¨æµè§ˆå™¨æ˜¾ç¤ºçš„æ—¶å€™ä¸ä¼šå½±å“æ˜¾ç¤ºå†…å®¹ã€‚</p><h4>SQLæ³¨å…¥æ”»å‡»</h4><p>SQL æ³¨å…¥æ”»å‡»çš„åŸç†å¦‚ä¸‹ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/4a/9b/4acb47242873733023eed6321d3b799b.jpg?wh=1920x1089\" alt=\"å›¾ç‰‡\"></p><p>æ”»å‡»è€…åœ¨ HTTP è¯·æ±‚ä¸­æ³¨å…¥æ¶æ„ SQL å‘½ä»¤(drop table users;)ï¼ŒæœåŠ¡å™¨ç”¨è¯·æ±‚å‚æ•°æ„é€ æ•°æ®åº“ SQL å‘½ä»¤æ—¶ï¼Œæ¶æ„ SQL è¢«ä¸€èµ·æ„é€ ï¼Œå¹¶åœ¨æ•°æ®åº“ä¸­æ‰§è¡Œã€‚</p><p>å¦‚æœåœ¨Webé¡µé¢ä¸­æœ‰ä¸ªè¾“å…¥æ¡†ï¼Œè¦æ±‚ç”¨æˆ·è¾“å…¥å§“åï¼Œæ™®é€šç”¨æˆ·è¾“å…¥ä¸€ä¸ªæ™®é€šçš„å§“åFrankï¼Œé‚£ä¹ˆæœ€åæäº¤çš„HTTPè¯·æ±‚å¦‚ä¸‹ï¼š</p><pre><code>http://www.a.com?username=Frank\n</code></pre><p>æœåŠ¡å™¨åœ¨å¤„ç†è®¡ç®—åï¼Œå‘æ•°æ®åº“æäº¤çš„SQLæŸ¥è¯¢å‘½ä»¤å¦‚ä¸‹ï¼š</p><pre><code>Select id from users where username='Frank';\n</code></pre><p>ä½†æ˜¯æ¶æ„æ”»å‡»è€…å¯èƒ½ä¼šæäº¤è¿™æ ·çš„HTTPè¯·æ±‚ï¼š</p><pre><code>http://www.a.com?username=Frank';drop table users;--\n</code></pre><p>å³è¾“å…¥çš„uernameæ˜¯ï¼š</p><pre><code>Frank';drop table users;--\n</code></pre><p>è¿™æ ·ï¼ŒæœåŠ¡å™¨åœ¨å¤„ç†åï¼Œæœ€åç”Ÿæˆçš„SQLæ˜¯è¿™æ ·çš„ï¼š</p><pre><code>Select id from users where username='Frank';drop table users;--';\n</code></pre><p>äº‹å®ä¸Šï¼Œè¿™æ˜¯ä¸¤æ¡SQLï¼Œä¸€æ¡selectæŸ¥è¯¢SQLï¼Œä¸€æ¡drop tableåˆ é™¤è¡¨SQLã€‚æ•°æ®åº“åœ¨æ‰§è¡Œå®ŒæŸ¥è¯¢åï¼Œå°±å°†usersè¡¨åˆ é™¤äº†ï¼Œç³»ç»Ÿå´©æºƒäº†ã€‚</p><p>å¤„ç†SQLæ³¨å…¥æ”»å‡»çš„ruleæ­£åˆ™è¡¨è¾¾å¼å¦‚ä¸‹ã€‚</p><pre><code class=\"language-plain\">(?:\\b(?:(?:s(?:elect\\b(?:.{1,100}?\\b(?:(?:length|count|top)\\b.{1,100}?\\bfrom|from\\b.{1,100}?\\bwhere)|.*?\\b(?:d(?:ump\\b.*\\bfrom|ata_type)|(?:to_(?:numbe|cha)|inst)r))|p_(?:(?:addextendedpro|sqlexe)c|(?:oacreat|prepar)e|execute(?:sql)?|makewebtask)|ql_(?:longvarchar|variant))|xp_(?:reg(?:re(?:movemultistring|ad)|delete(?:value|key)|enum(?:value|key)s|addmultistring|write)|e(?:xecresultset|numdsn)|(?:terminat|dirtre)e|availablemedia|loginconfig|cmdshell|filelist|makecab|ntsec)|u(?:nion\\b.{1,100}?\\bselect|tl_(?:file|http))|group\\b.*\\bby\\b.{1,100}?\\bhaving|load\\b\\W*?\\bdata\\b.*\\binfile|(?:n?varcha|tbcreato)r|autonomous_transaction|open(?:rowset|query)|dbms_java)\\b|i(?:n(?:to\\b\\W*?\\b(?:dump|out)file|sert\\b\\W*?\\binto|ner\\b\\W*?\\bjoin)\\b|(?:f(?:\\b\\W*?\\(\\W*?\\bbenchmark|null\\b)|snull\\b)\\W*?\\()|(?:having|or|and)\\b\\s+?(?:\\d{1,10}|'[^=]{1,10}')\\s*?[=&lt;&gt;]+|(?:print\\]\\b\\W*?\\@|root)\\@|c(?:ast\\b\\W*?\\(|oalesce\\b))|(?:;\\W*?\\b(?:shutdown|drop)|\\@\\@version)\\b|'(?:s(?:qloledb|a)|msdasql|dbo)')\n</code></pre><p>ä»è¯·æ±‚ä¸­åŒ¹é…åˆ°SQLæ³¨å…¥æ”»å‡»å†…å®¹åï¼Œå¯ä»¥è®¾ç½®è·³è½¬é”™è¯¯é¡µé¢ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©æ¶ˆæ¯’replaceï¼Œreplaceè¡¨å¦‚ä¸‹ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/ec/ee/ece6aaa553e21db9a95c0d07ccd761ee.jpg?wh=1920x1014\" alt=\"å›¾ç‰‡\"></p><h4>CSRFè·¨ç«™ç‚¹è¯·æ±‚ä¼ªé€ æ”»å‡»</h4><p>CSRF(Cross Site Request Forgeryï¼Œè·¨ç«™ç‚¹è¯·æ±‚ä¼ªé€ )ï¼Œæ”»å‡»è€…é€šè¿‡è·¨ç«™è¯·æ±‚ï¼Œä»¥åˆæ³•ç”¨æˆ·çš„èº«ä»½è¿›è¡Œéæ³•æ“ä½œï¼Œå¦‚è½¬è´¦äº¤æ˜“ã€å‘è¡¨è¯„è®ºç­‰ï¼Œå¦‚å›¾ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/16/85/1603d26c11ayybb6be13160434df0785.jpg?wh=1920x1089\" alt=\"å›¾ç‰‡\"></p><p>CSRF çš„ä¸»è¦æ‰‹æ³•æ˜¯åˆ©ç”¨è·¨ç«™è¯·æ±‚ï¼Œåœ¨ç”¨æˆ·ä¸çŸ¥æƒ…çš„æƒ…å†µä¸‹ï¼Œä»¥ç”¨æˆ·çš„èº«ä»½ä¼ªé€ è¯·æ±‚ã€‚å…¶æ ¸å¿ƒæ˜¯åˆ©ç”¨äº†æµè§ˆå™¨ Cookie æˆ–æœåŠ¡å™¨ Session ç­–ç•¥ï¼Œç›—å–ç”¨æˆ·èº«ä»½ã€‚</p><p>Zhurongçš„é˜²æ”»å‡»ç­–ç•¥ï¼Œæ˜¯è¿‡æ»¤å™¨è‡ªåŠ¨åœ¨æ‰€æœ‰å“åº”é¡µé¢çš„è¡¨å•formä¸­æ·»åŠ ä¸€ä¸ªéšè—å­—æ®µï¼Œåˆæ³•ç”¨æˆ·åœ¨æäº¤è¯·æ±‚çš„æ—¶å€™ï¼Œä¼šå°†è¿™ä¸ªéšè—å­—æ®µå‘é€åˆ°æœåŠ¡å™¨ï¼Œé˜²ç«å¢™æ£€æŸ¥éšè—å­—æ®µå€¼æ˜¯å¦æ­£ç¡®ï¼Œæ¥ç¡®å®šæ˜¯å¦ä¸ºCSRFæ”»å‡»ã€‚æ¶æ„ç”¨æˆ·çš„è¯·æ±‚æ˜¯è‡ªå·±ä¼ªé€ çš„ï¼Œæ— æ³•æ„é€ è¿™ä¸ªéšè—å­—æ®µï¼Œå°±ä¼šè¢«é˜²ç«å¢™æ‹¦æˆªã€‚</p><h4>æ³¨é‡Šä¸å¼‚å¸¸ä¿¡æ¯æ³„éœ²</h4><p>ä¸ºè°ƒè¯•ç¨‹åºæ–¹ä¾¿æˆ–å…¶ä»–ä¸æ°å½“çš„åŸå› ï¼Œæœ‰æ—¶ç¨‹åºå¼€å‘äººå‘˜ä¼šåœ¨å‰ç«¯é¡µé¢ç¨‹åºä¸­ä½¿ç”¨ HTML æ³¨é‡Šè¯­æ³•è¿›è¡Œç¨‹åºæ³¨é‡Šï¼Œè¿™äº› HTML æ³¨é‡Šå°±ä¼šæ˜¾ç¤ºåœ¨å®¢æˆ·ç«¯æµè§ˆå™¨ï¼Œç»™é»‘å®¢é€ æˆæ”»å‡»ä¾¿åˆ©ã€‚</p><p>æ­¤å¤–ï¼Œè®¸å¤š Web æœåŠ¡å™¨é»˜è®¤æ˜¯æ‰“å¼€å¼‚å¸¸ä¿¡æ¯è¾“å‡ºçš„ï¼Œå³æœåŠ¡å™¨ç«¯æœªå¤„ç†çš„å¼‚å¸¸å †æ ˆä¿¡æ¯ä¼šç›´æ¥è¾“å‡ºåˆ°å®¢æˆ·ç«¯æµè§ˆå™¨ï¼Œè¿™ç§æ–¹å¼è™½ç„¶å¯¹ç¨‹åºè°ƒè¯•å’Œé”™è¯¯æŠ¥å‘Šæœ‰å¥½å¤„ï¼Œä½†åŒæ—¶ä¹Ÿç»™é»‘å®¢é€ æˆå¯ä¹˜ä¹‹æœºã€‚é»‘å®¢é€šè¿‡æ•…æ„åˆ¶é€ éæ³•è¾“å…¥ï¼Œä½¿ç³»ç»Ÿè¿è¡Œæ—¶å‡ºé”™ï¼Œè·å¾—å¼‚å¸¸ä¿¡æ¯ï¼Œä»è€Œå¯»æ‰¾ç³»ç»Ÿæ¼æ´è¿›è¡Œæ”»å‡»ã€‚</p><p>åŒ¹é…HTMLæ³¨é‡Šçš„æ­£åˆ™è¡¨è¾¾å¼å¦‚ä¸‹ï¼š</p><pre><code class=\"language-plain\">â€œ&amp;lt;!--(.|&amp;#x000A;|&amp;#x000D;)*--&amp;gt;â€\n</code></pre><p>å¦‚æœåŒ¹é…åˆ°HTMLæ³¨é‡Šï¼Œå°±ç”¨ç©ºå­—ç¬¦ä¸²replaceè¯¥æ³¨é‡Šã€‚</p><p>å¯¹äºå¼‚å¸¸ä¿¡æ¯æ³„éœ²ï¼ŒZhurongä¼šæ£€æŸ¥å“åº”çŠ¶æ€ç ã€‚å¦‚æœå“åº”çŠ¶æ€ç ä¸º500ç³»åˆ—é”™è¯¯ï¼Œåˆ™ä¼šè¿›ä¸€æ­¥åŒ¹é…å“åº”ä½“å†…å®¹ï¼Œæ£€æŸ¥æ˜¯å¦å­˜åœ¨é”™è¯¯å †æ ˆä¿¡æ¯ã€‚</p><h2>å°ç»“</h2><p>è¿™ç¯‡è®¾è®¡æ–‡æ¡£ä¹Ÿæ˜¯æ”¹ç¼–è‡ªæŸå…¨çƒITä¼ä¸šçš„å†…éƒ¨è®¾è®¡æ–‡æ¡£ï¼Œè¿™ä¸ªäº§å“å’Œè¯¥ä¼ä¸šçš„WebæœåŠ¡å™¨æ†ç»‘é”€å”®ï¼Œå·²ç»åœ¨å…¨çƒèŒƒå›´å†…å”®å–äº†åå‡ å¹´ã€‚è¿™ä¸ªäº§å“ä¹Ÿæ˜¯ä¸­å›½åˆ†å…¬å¸æˆç«‹ä¹‹åˆæœ€æˆåŠŸçš„äº§å“ï¼Œå¸®åŠ©ä¸­å›½åˆ†å…¬å¸å¥ å®šäº†è‡ªå·±åœ¨æ€»å…¬å¸çš„åœ°ä½ã€‚è€Œè¿™ä¸ªäº§å“çš„æœ€åˆç‰ˆæœ¬ï¼Œåˆ™æ˜¯ä¸€ä¸ªæ¶æ„å¸ˆå¸¦é¢†ä¸€ä¸ªå¼€å‘å°ç»„èŠ±äº†å‡ ä¸ªæœˆçš„æ—¶é—´å°±å¼€å‘å‡ºæ¥çš„ã€‚</p><p>äººä»¬å¸¸è¯´è½¯ä»¶å·¥ç¨‹å¸ˆçš„èŒä¸šç”Ÿæ¶¯åªæœ‰åå‡ å¹´ï¼Œç”šè‡³åªæœ‰å‡ å¹´ã€‚äº‹å®ä¸Šï¼Œå¾ˆå¤šå•†ä¸šè½¯ä»¶çš„ç”Ÿå‘½å‘¨æœŸéƒ½ä¸æ­¢åå‡ å¹´ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ä½ çš„èŒä¸šç”Ÿæ¶¯ä¸­ï¼Œåªè¦å¼€å‘å‡ºä¸€æ¬¾æˆåŠŸçš„è½¯ä»¶ï¼Œå…‰æ˜¯ä¸ºè¿™ä¸ªè½¯ä»¶ä¿®ä¿®è¡¥è¡¥ã€ç»´æŠ¤å‡çº§ï¼Œä½ ä¹Ÿèƒ½å¹²ä¸ªåå‡ å¹´ï¼Œå‡ åå¹´ã€‚</p><p>ä½†æ˜¯å¾ˆé—æ†¾ï¼Œå°±æˆ‘æ‰€è§ï¼Œå¤§å¤šæ•°è½¯ä»¶å·¥ç¨‹å¸ˆåœ¨è‡ªå·±çš„èŒä¸šç”Ÿæ¶¯ä¸­éƒ½æ²¡æœ‰ç»å†è¿‡æˆåŠŸã€‚è¦ä¹ˆå°±æ˜¯åŠ å…¥ä¸€ä¸ªå·²ç»æˆåŠŸçš„é¡¹ç›®ä¿®ä¿®è¡¥è¡¥ï¼Œè¦ä¹ˆå°±æ˜¯åœ¨ä¸€ä¸ªä¸æ¸©ä¸ç«çš„é¡¹ç›®é‡Œè€—äº†å‡ å¹´ï¼Œæœ€åæ— ç–¾è€Œç»ˆã€‚äº‹å®ä¸Šï¼Œç»å†è¿‡æˆåŠŸçš„äººä¼šæ˜ç™½ä»€ä¹ˆæ ·çš„é¡¹ç›®å°†ä¼šèµ°å‘æˆåŠŸï¼Œæ‰€ä»¥ä¸ä¼šå®ˆç€ä¸€ä¸ªæˆåŠŸçš„é¡¹ç›®å…»è€ï¼Œè€Œæ˜¯ä¸æ–­è¿½æ±‚æ–°çš„æˆåŠŸï¼›è€Œæ²¡æœ‰ç»å†è¿‡æˆåŠŸçš„äººåˆ™åœ¨æ›²æ›²æŠ˜æŠ˜ä¸­èµ°å‘è‡ªå·±çš„ä¸­å¹´å±æœºã€‚</p><p>æˆ‘ä»¬è¿™ä¸ªä¸“æ æŒ‘é€‰çš„è®¾è®¡ï¼Œéƒ½æ˜¯åŸºäºä¸€äº›å·²ç»æˆåŠŸäº†çš„æ¡ˆä¾‹ã€‚æˆåŠŸçš„ä¸œè¥¿æœ‰ä¸€ç§æˆåŠŸçš„å‘³é“ï¼Œæ­£æ˜¯è¿™ç§å‘³é“å¸¦é¢†æˆåŠŸè€…èµ°å‘æˆåŠŸã€‚å¸Œæœ›ä½ åœ¨å­¦ä¹ æŠ€æœ¯çš„åŒæ—¶ï¼Œä¹Ÿèƒ½å—…åˆ°æˆåŠŸçš„å‘³é“ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>è¿˜æœ‰å“ªäº›å¸¸è§çš„Webå®‰å…¨æ¼æ´ï¼Œå¦‚ä½•è¿›è¡Œé˜²æŠ¤ï¼Ÿ</p><p>é™„ï¼šæå®¢æ—¶é—´ä¹Ÿæœ‰ä¸€ä¸ªä¸“é—¨è®²Webæ¼æ´æ”»å‡»ä¸é˜²æŠ¤çš„ä¸“æ <a href=\"https://time.geekbang.org/column/intro/100101501?tab=intro\">Web æ¼æ´æŒ–æ˜å®æˆ˜</a>ï¼Œæœ‰å…´è¶£çš„åŒå­¦ä¸å¦¨çœ‹ä¸€çœ‹ï¼Œå†å›æ¥ä¸€èµ·äº¤æµè®¨è®ºã€‚</p><blockquote>\n<p>ã€ç¼–è¾‘æ¸©é¦¨æç¤ºã€‘4æœˆ10æ—¥12ç‚¹å‰ï¼Œæäº¤<a href=\"http://https://time.geekbang.org/column/article/495175\">æœŸä¸­æµ‹è¯•</a>ä½œä¸šï¼Œæœ‰æœºä¼šè·å¾—è€å¸ˆç²¾å¿ƒå‡†å¤‡çš„å¥–åŠ±å“¦~</p>\n</blockquote>","neighbors":{"left":{"article_title":"16 | é«˜å¯ç”¨æ¶æ„çš„åç§æ­¦å™¨ï¼šæ€ä¹ˆåº¦é‡ç³»ç»Ÿçš„å¯ç”¨æ€§ï¼Ÿ","id":498514},"right":{"article_title":"18 | åŠ è§£å¯†æœåŠ¡å¹³å°ï¼šå¦‚ä½•è®©æ•æ„Ÿæ•°æ®å­˜å‚¨ä¸ä¼ è¾“æ›´å®‰å…¨ï¼Ÿ","id":500458}},"comments":[{"had_liked":false,"id":344636,"user_name":"neohope","can_delete":false,"product_type":"c1","uid":1043475,"ip_address":"","ucode":"C0268F6E7E2B6E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ec/13/49e98289.jpg","comment_is_top":false,"comment_ctime":1651680420,"is_pvip":true,"replies":[{"id":"125784","content":"èµ","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1007349","ctime":1651720105,"ip_address":"","comment_id":344636,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23126516900","product_id":100105701,"comment_content":"<br>é™¤äº†è¯¾ç¨‹ä¸­æåˆ°çš„å‡ ç§ï¼ŒWebæ–¹é¢çš„è¿˜æœ‰æ°´å¹³è¶Šæƒæ”»å‡»ï¼Œå‚ç›´è¶Šæƒæ”»å‡»ï¼Œæ¸—é€æ”»å‡»ï¼Œæ¼æ´æ”»å‡»ï¼Œæºç åˆ†ææ”»å‡»ï¼ŒDDOSæ”»å‡»ï¼Œç¼“å­˜æ”»å‡»ï¼Œéšæœºæ•°é¢„æµ‹æ”»å‡»ï¼Œå­—å…¸æ”»å‡»ï¼Œåˆ·å•æ”»å‡»ï¼Œé’“é±¼ç½‘ç«™ï¼Œé’“é±¼é‚®ä»¶ï¼Œæœ¨é©¬æ”»å‡»ï¼Œç¤¾ä¼šå·¥ç¨‹å­¦æ”»å‡»ç­‰ç­‰å¾ˆå¤šç§ã€‚<br>å¤§å‹å•†ä¸šæœºæ„ï¼Œä¸€èˆ¬éƒ½ä¼šä¿¡æ¯æ•°æ®å®‰å…¨æ–¹é¢æŠ•å…¥é«˜é¢æˆæœ¬ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºé˜²ç«å¢™ã€ç½‘é—¸ã€å®‰å…¨æ‰«ç ã€æ€æ¯’è½¯ä»¶ã€å…¥ä¾µæ£€æµ‹ã€æ“ä½œç³»ç»Ÿã€ä¸­é—´ä»¶ã€ç¼–ç æµæ°´çº¿ã€å®‰å…¨ç­–ç•¥ã€å®‰å…¨å’¨è¯¢ç­‰ç­‰ã€‚<br>ä½†è¿™æ–¹é¢çš„æ”»é˜²å…¶å®æ˜¯å¾ˆä¸å¯¹ç­‰çš„ï¼Œé»‘å®¢åªéœ€æ”»ç ´ä¸€ç‚¹ï¼Œå…¶ä½™æŠ•å…¥ä¾¿éƒ½æˆäº†é©¬å¥‡è¯ºé˜²çº¿ã€‚è¿‘å¹´æ¥ï¼Œç¤¾ä¼šå·¥ç¨‹ç³»æ”»å‡»é¢‘é¢‘çˆ†é›·ã€‚ä»è¿™ä¸ªè§’åº¦çœ‹ï¼Œæå‡å‘˜å·¥çš„å®‰å…¨æ„è¯†ï¼Œä¸ä¸Šé¢çš„å„ç±»æŠ•å…¥ç›¸æ¯”ï¼Œåè€Œæ›´åŠ é‡è¦ä¸€äº›ã€‚","like_count":6,"discussions":[{"author":{"id":1007349,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5e/f5/018907ac.jpg","nickname":"ææ™ºæ…§","note":"","ucode":"8C9980C438AFD1","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":570263,"discussion_content":"èµ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651720105,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":339822,"user_name":"ğŸ‘½","can_delete":false,"product_type":"c1","uid":1274117,"ip_address":"","ucode":"D313AF941B412D","user_header":"https://static001.geekbang.org/account/avatar/00/13/71/05/db554eba.jpg","comment_is_top":false,"comment_ctime":1648424140,"is_pvip":false,"replies":[{"id":"124256","content":"å¯¹äºæœåŠ¡å™¨çš„CPUè´Ÿè½½å‹åŠ›ä¼šæ¯”è¾ƒå¤§ä¸€ç‚¹ï¼Œä½†æ˜¯è¿™ä¸ªè€—æ—¶å¯¹äºè¯·æ±‚å“åº”çš„å¤„ç†å‘¨æœŸè€Œè¨€æ˜¯å¾®ä¸è¶³é“çš„ã€‚è€Œä¸”éœ€è¦è¿›è¡Œå®‰å…¨æ ¡éªŒçš„è¯·æ±‚åŒ…å«çš„å­—ç¬¦ä¸²ä¸€èˆ¬ä¸ä¼šå¤ªé•¿","user_name":"ä½œè€…å›å¤","user_name_real":"ä½œè€…","uid":"1007349","ctime":1648446677,"ip_address":"","comment_id":339822,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5943391436","product_id":100105701,"comment_content":"è¯·æ•™ä¸€ä¸‹ï¼Œè¿™ç§å¤šå±‚çš„å®‰å…¨æ ¡éªŒä¼šä¸ä¼šæœ‰æ€§èƒ½é—®é¢˜ï¼Ÿè¦è¿‡æ»¤è¿™ä¹ˆå¤šå±‚ï¼Œæ¯ä¸€å±‚éƒ½æœ‰è‹¥å¹²ä¸ªæ­£åˆ™ã€‚éœ€è¦åŒ¹é…çš„å­—ç¬¦ä¸²æ¯”è¾ƒé•¿çš„è¯ï¼Œæ„Ÿè§‰æ€§èƒ½å¯èƒ½ä¼šå—å½±å“ã€‚<br>","like_count":2,"discussions":[{"author":{"id":1007349,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5e/f5/018907ac.jpg","nickname":"ææ™ºæ…§","note":"","ucode":"8C9980C438AFD1","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":558741,"discussion_content":"å¯¹äºæœåŠ¡å™¨çš„CPUè´Ÿè½½å‹åŠ›ä¼šæ¯”è¾ƒå¤§ä¸€ç‚¹ï¼Œä½†æ˜¯è¿™ä¸ªè€—æ—¶å¯¹äºè¯·æ±‚å“åº”çš„å¤„ç†å‘¨æœŸè€Œè¨€æ˜¯å¾®ä¸è¶³é“çš„ã€‚è€Œä¸”éœ€è¦è¿›è¡Œå®‰å…¨æ ¡éªŒçš„è¯·æ±‚åŒ…å«çš„å­—ç¬¦ä¸²ä¸€èˆ¬ä¸ä¼šå¤ªé•¿","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1648446677,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1002201,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/4a/d9/75dd7cf9.jpg","nickname":"Mew151","note":"","ucode":"D4793F5874F345","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":590661,"discussion_content":"æ„Ÿè§‰ä¹Ÿåˆ†ä¸šåŠ¡åœºæ™¯å§ï¼Œé‡‘èç³»ç»Ÿæ•°æ®æ•æ„Ÿå‹ä¸šåŠ¡ï¼Œå†å¤šå±‚æ ¡éªŒä¹Ÿä¸ä¸ºè¿‡ï¼Œæ€§èƒ½ç¨å¾®ä½ä¸€äº›ä¹Ÿæ²¡é—®é¢˜ï¼›å…¶ä»–æ•°æ®æ•æ„Ÿå‹ä½ä¸€äº›çš„ä¸šåŠ¡ï¼Œåªè¦èƒ½ä¿è¯ä¸€äº›åŸºæœ¬çš„å®‰å…¨é˜²èŒƒï¼ˆæ¯”å¦‚ SQL æ³¨å…¥ï¼Œåˆ«è¢«åˆ åº“äº†ï¼‰ï¼Œä¹Ÿå°±å¤Ÿäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1665978122,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æ²³åŒ—"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":346904,"user_name":"é›ªç¢§å¿ƒæ‹”å‡‰","can_delete":false,"product_type":"c1","uid":1161522,"ip_address":"","ucode":"D13EEBAA0F443B","user_header":"https://static001.geekbang.org/account/avatar/00/11/b9/32/84346d4a.jpg","comment_is_top":false,"comment_ctime":1653530402,"is_pvip":false,"replies":[{"id":"126489","content":"sdk<br>å¯¹æ€§èƒ½æœ‰å½±å“ï¼Œä½†æ˜¯webåº”ç”¨çš„å“åº”æ—¶é—´ä¸€èˆ¬æ˜¯æ•°ç™¾æ¯«ç§’ï¼Œè€Œbodyè§£æçš„æ—¶é—´é€šå¸¸æ˜¯å¾®å¦™çº§ï¼Œæ€§èƒ½å½±å“å¯ä»¥å¿½ç•¥ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1007349","ctime":1653613396,"ip_address":"","comment_id":346904,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1653530402","product_id":100105701,"comment_content":"è¿™ç§é˜²ç«å¢™åº”ç”¨æ˜¯è¦ä»¥ä¸€ä¸ªåº”ç”¨çš„è§’è‰²(ç±»ä¼¼ç½‘å…³ï¼Ÿ)æŒ‚åœ¨æ™®é€šåº”ç”¨çš„å‰é¢ï¼Œè¿˜æ˜¯ä»¥sdkåŒ…çš„æ–¹å¼åµŒå…¥åˆ°åº”ç”¨ä¸­å»ï¼Ÿ<br>å¦‚æœæ˜¯ä»¥ç½‘å…³çš„å½¢å¼å­˜åœ¨ï¼Œé‚£è¦è§£æbodyå¯¹æ€§èƒ½æ˜¯ä¸æ˜¯ä¼šæœ‰æœ‰å¾ˆå¤§çš„å½±å“å‘¢ï¼Ÿä¸€èˆ¬æˆ‘ä»¬ç½‘å…³éƒ½æ˜¯å“åº”å¼ç½‘å…³ï¼Œä¸ä¼šå»è§£æbodyæµå§ï¼Œè§£æbodyç›¸å½“äºè¦å°†æ•°æ®ä»å†…æ ¸æ€æ‹·è´åˆ°ç”¨æˆ·æ€ï¼Œè½¬å‘æ—¶åœ¨ä»ç”¨æˆ·æ€æ‹·è´åˆ°å†…æ ¸æ€ï¼Œæ€§èƒ½æ˜¯æœ‰å½±å“å§ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1007349,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5e/f5/018907ac.jpg","nickname":"ææ™ºæ…§","note":"","ucode":"8C9980C438AFD1","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":573694,"discussion_content":"sdk\nå¯¹æ€§èƒ½æœ‰å½±å“ï¼Œä½†æ˜¯webåº”ç”¨çš„å“åº”æ—¶é—´ä¸€èˆ¬æ˜¯æ•°ç™¾æ¯«ç§’ï¼Œè€Œbodyè§£æçš„æ—¶é—´é€šå¸¸æ˜¯å¾®å¦™çº§ï¼Œæ€§èƒ½å½±å“å¯ä»¥å¿½ç•¥ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1653613396,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":342996,"user_name":"ABC","can_delete":false,"product_type":"c1","uid":1054958,"ip_address":"","ucode":"7501AD9C0C4A70","user_header":"https://static001.geekbang.org/account/avatar/00/10/18/ee/a1ed60d1.jpg","comment_is_top":false,"comment_ctime":1650587959,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1650587959","product_id":100105701,"comment_content":"æ—©å¹´åœ¨ä¸€ä¸ªé€šç”¨è¯„è®ºç±»æ’ä»¶ï¼ˆç±»ä¼¼Disqusï¼‰é‡Œé¢ï¼Œå‘ç°äº†JSè„šæœ¬æ³¨å…¥ã€‚æœ‰äººåœ¨è¯„è®ºé‡Œé¢å†™äº†ä¸€ä¸ªalertï¼Œå¯¼è‡´æ¯æ¬¡è¿›å…¥é¡µé¢çš„æ—¶å€™æµè§ˆå™¨ä¼šå¼¹å‡ºä¸€ä¸ªå¼¹çª—ã€‚","like_count":0},{"had_liked":false,"id":339943,"user_name":"peter","can_delete":false,"product_type":"c1","uid":1058183,"ip_address":"","ucode":"261C3FC001DE2D","user_header":"https://static001.geekbang.org/account/avatar/00/10/25/87/f3a69d1b.jpg","comment_is_top":false,"comment_ctime":1648477525,"is_pvip":true,"replies":[{"id":"124282","content":"1 å°±æ˜¯å¸¸è§çš„é’“é±¼ï¼Œç¬¬ä¸€æ­¥æ˜¯å‰æï¼Œéœ€è¦ç™»å½•è¢«æ”»å‡»çš„æœåŠ¡å™¨ï¼Œç¬¬äºŒæ­¥ä¸æ˜¯å¿…é¡»çš„ï¼Œé’“é±¼é“¾æ¥ç›´æ¥æ„é€ çš„å¤æ‚è¯·æ±‚å‚æ•°ä¹Ÿå¯ä»¥ï¼Œé’“é±¼é“¾æ¥ç›´æ¥æŒ‡å‘è¢«æ”»å‡»æœåŠ¡å™¨ã€‚æ›´å¸¸è§çš„æ˜¯é’“é±¼é“¾æ¥æŒ‡å‘æ”»å‡»è€…è‡ªå·±çš„æœåŠ¡å™¨ï¼Œåœ¨è¿”å›å“åº”ä¸­åŒ…å«å¯æ‰§è¡Œè„šæœ¬ï¼Œè„šæœ¬ä¸­æ„é€ å¤æ‚è¯·æ±‚å‚æ•°ï¼Œè®¿é—®è¢«æ”»å‡»çš„æœåŠ¡å™¨ã€‚<br><br>2 æ˜¯çš„","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1007349","ctime":1648520343,"ip_address":"","comment_id":339943,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1648477525","product_id":100105701,"comment_content":"è¯·æ•™è€å¸ˆä¸¤ä¸ªé—®é¢˜ï¼š<br>Q1ï¼šCSRFç¬¬ä¸€æ­¥æ€ä¹ˆè¿‡æ¸¡åˆ°ç¬¬äºŒæ­¥ï¼Ÿ<br>CSRFçš„ç¬¬ä¸€æ­¥æ˜¯è®¿é—®æ­£å¸¸æœåŠ¡å™¨ï¼Œæ€ä¹ˆç¬¬äºŒæ­¥å°±è®¿é—®æ”»å‡»è€…æœåŠ¡å™¨äº†ï¼Ÿæ€ä¹ˆè¿‡æ¸¡çš„ï¼Ÿ<br>Q2ï¼šå‡å¦‚åº”ç”¨æœåŠ¡å™¨æ˜¯Tomcatï¼ŒZhurongæ€ä¹ˆæ‰èƒ½å…ˆäºtomcatå¤„ç†è¯·æ±‚ï¼Ÿæ˜¯å°†Zhurongæ³¨å†Œåˆ°tomcatæ¥ä½œä¸ºä¸€ä¸ªå‰ç½®filterå—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1007349,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5e/f5/018907ac.jpg","nickname":"ææ™ºæ…§","note":"","ucode":"8C9980C438AFD1","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":558887,"discussion_content":"1 å°±æ˜¯å¸¸è§çš„é’“é±¼ï¼Œç¬¬ä¸€æ­¥æ˜¯å‰æï¼Œéœ€è¦ç™»å½•è¢«æ”»å‡»çš„æœåŠ¡å™¨ï¼Œç¬¬äºŒæ­¥ä¸æ˜¯å¿…é¡»çš„ï¼Œé’“é±¼é“¾æ¥ç›´æ¥æ„é€ çš„å¤æ‚è¯·æ±‚å‚æ•°ä¹Ÿå¯ä»¥ï¼Œé’“é±¼é“¾æ¥ç›´æ¥æŒ‡å‘è¢«æ”»å‡»æœåŠ¡å™¨ã€‚æ›´å¸¸è§çš„æ˜¯é’“é±¼é“¾æ¥æŒ‡å‘æ”»å‡»è€…è‡ªå·±çš„æœåŠ¡å™¨ï¼Œåœ¨è¿”å›å“åº”ä¸­åŒ…å«å¯æ‰§è¡Œè„šæœ¬ï¼Œè„šæœ¬ä¸­æ„é€ å¤æ‚è¯·æ±‚å‚æ•°ï¼Œè®¿é—®è¢«æ”»å‡»çš„æœåŠ¡å™¨ã€‚\n\n2 æ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1648520343,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1253652,"avatar":"https://static001.geekbang.org/account/avatar/00/13/21/14/423a821f.jpg","nickname":"Steven","note":"","ucode":"3FE64459842015","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":558864,"discussion_content":"Q1ï¼ŒCSRFï¼Œç”¨æˆ·æ— æ„é—´è®¿é—®äº†æ¶æ„ç«™ç‚¹ï¼Œæ°å¥½åœ¨æ­¤ä¹‹å‰ä»–ç™»å½•è¿‡å—ä¿¡ç«™ç‚¹ï¼ŒSession æœªè¿‡æœŸï¼Œæ¶æ„ç«™ç‚¹å°±å¯ä»¥é€šè¿‡ç›—å–å—ä¿¡ç«™ç‚¹çš„ç”¨æˆ·èº«ä»½ï¼Œå‘èµ·æ¶æ„æ“ä½œã€‚\n\nQ2ï¼Œè€å¸ˆå·²ç»è¯´è¿‡äº†ï¼Œâ€œéƒ¨ç½²åœ¨ Web åº”ç”¨æˆ–è€…å¾®æœåŠ¡ç½‘å…³ç­‰ HTTP æœåŠ¡çš„å…¥å£â€ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1648514194,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}