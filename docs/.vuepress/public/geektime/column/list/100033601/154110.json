{"id":154110,"title":"34 | CSRFæ”»å‡»ï¼šé™Œç”Ÿé“¾æ¥ä¸è¦éšä¾¿ç‚¹","content":"<p>åœ¨<a href=\"https://time.geekbang.org/column/article/152807\">ä¸Šä¸€ç¯‡æ–‡ç« </a>ä¸­æˆ‘ä»¬è®²åˆ°äº†XSSæ”»å‡»ï¼ŒXSS çš„æ”»å‡»æ–¹å¼æ˜¯é»‘å®¢å¾€ç”¨æˆ·çš„é¡µé¢ä¸­æ³¨å…¥æ¶æ„è„šæœ¬ï¼Œç„¶åå†é€šè¿‡æ¶æ„è„šæœ¬å°†ç”¨æˆ·é¡µé¢çš„æ•°æ®ä¸Šä¼ åˆ°é»‘å®¢çš„æœåŠ¡å™¨ä¸Šï¼Œæœ€åé»‘å®¢å†åˆ©ç”¨è¿™äº›æ•°æ®è¿›è¡Œä¸€äº›æ¶æ„æ“ä½œã€‚XSSæ”»å‡»èƒ½å¤Ÿå¸¦æ¥å¾ˆå¤§çš„ç ´åæ€§ï¼Œä¸è¿‡å¦å¤–ä¸€ç§ç±»å‹çš„æ”»å‡»ä¹Ÿä¸å®¹å¿½è§†ï¼Œå®ƒå°±æ˜¯æˆ‘ä»¬ä»Šå¤©è¦èŠçš„CSRFæ”»å‡»ã€‚</p><p>ç›¸ä¿¡ä½ ç»å¸¸èƒ½å¬åˆ°çš„ä¸€å¥è¯ï¼šâ€œåˆ«ç‚¹é‚£ä¸ªé“¾æ¥ï¼Œå°å¿ƒæœ‰ç—…æ¯’ï¼â€ç‚¹å‡»ä¸€ä¸ªé“¾æ¥æ€ä¹ˆå°±èƒ½æŸ“ä¸Šç—…æ¯’äº†å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬ç»“åˆä¸€ä¸ªçœŸå®çš„å…³äºCSRFæ”»å‡»çš„å…¸å‹æ¡ˆä¾‹æ¥åˆ†æä¸‹ï¼Œåœ¨2007å¹´çš„æŸä¸€å¤©ï¼ŒDavid æ— æ„é—´æ‰“å¼€äº†Gmailé‚®ç®±ä¸­çš„ä¸€ä»½é‚®ä»¶ï¼Œå¹¶ç‚¹å‡»äº†è¯¥é‚®ä»¶ä¸­çš„ä¸€ä¸ªé“¾æ¥ã€‚è¿‡äº†å‡ å¤©ï¼ŒDavidå°±å‘ç°ä»–çš„åŸŸåè¢«ç›—äº†ã€‚ä¸è¿‡å‡ ç»å‘¨æŠ˜ï¼ŒDavidè¿˜æ˜¯è¦å›äº†ä»–çš„åŸŸåï¼Œä¹Ÿå¼„æ¸…æ¥šäº†ä»–çš„åŸŸåä¹‹æ‰€ä»¥è¢«ç›—ï¼Œå°±æ˜¯å› ä¸ºæ— æ„é—´ç‚¹å‡»çš„é‚£ä¸ªé“¾æ¥ã€‚</p><p><strong>é‚£Davidçš„åŸŸåæ˜¯æ€ä¹ˆè¢«ç›—çš„å‘¢ï¼Ÿ</strong></p><p>æˆ‘ä»¬ç»“åˆä¸‹å›¾æ¥åˆ†æä¸‹DavidåŸŸåçš„è¢«ç›—æµç¨‹ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/3d/6b/3d7f097b1d6a8f93a960a12892f1556b.png?wh=1142*694\" alt=\"\"></p><center><span class=\"reference\">DavidåŸŸåè¢«ç›—æµç¨‹</span></center><ul>\n<li>é¦–å…ˆDavidå‘èµ·ç™»å½•Gmailé‚®ç®±è¯·æ±‚ï¼Œç„¶åGmailæœåŠ¡å™¨è¿”å›ä¸€äº›ç™»å½•çŠ¶æ€ç»™Davidçš„æµè§ˆå™¨ï¼Œè¿™äº›ä¿¡æ¯åŒ…æ‹¬äº†Cookieã€Sessionç­‰ï¼Œè¿™æ ·åœ¨Davidçš„æµè§ˆå™¨ä¸­ï¼ŒGmailé‚®ç®±å°±å¤„äºç™»å½•çŠ¶æ€äº†ã€‚</li>\n<li>æ¥ç€é»‘å®¢é€šè¿‡å„ç§æ‰‹æ®µå¼•è¯±Davidå»æ‰“å¼€ä»–çš„é“¾æ¥ï¼Œæ¯”å¦‚hacker.comï¼Œç„¶ååœ¨hacker.comé¡µé¢ä¸­ï¼Œé»‘å®¢ç¼–å†™å¥½äº†ä¸€ä¸ªé‚®ä»¶è¿‡æ»¤å™¨ï¼Œå¹¶é€šè¿‡Gmailæä¾›çš„HTTPè®¾ç½®æ¥å£è®¾ç½®å¥½äº†æ–°çš„é‚®ä»¶è¿‡æ»¤åŠŸèƒ½ï¼Œè¯¥è¿‡æ»¤å™¨ä¼šå°†Davidæ‰€æœ‰çš„é‚®ä»¶éƒ½è½¬å‘åˆ°é»‘å®¢çš„é‚®ç®±ä¸­ã€‚</li>\n<li>æœ€åçš„äº‹æƒ…å°±å¾ˆç®€å•äº†ï¼Œå› ä¸ºæœ‰äº†Davidçš„é‚®ä»¶å†…å®¹ï¼Œæ‰€ä»¥é»‘å®¢å°±å¯ä»¥å»åŸŸåæœåŠ¡å•†é‚£è¾¹é‡ç½®DavidåŸŸåè´¦æˆ·çš„å¯†ç ï¼Œé‡ç½®å¥½å¯†ç ä¹‹åï¼Œå°±å¯ä»¥å°†å…¶è½¬å‡ºåˆ°é»‘å®¢çš„è´¦æˆ·äº†ã€‚</li>\n</ul><!-- [[[read_end]]] --><p>ä»¥ä¸Šå°±æ˜¯Davidçš„åŸŸåè¢«ç›—çš„å®Œæ•´è¿‡ç¨‹ï¼Œå…¶ä¸­å‰ä¸¤æ­¥å°±æ˜¯æˆ‘ä»¬ä»Šå¤©è¦èŠçš„CSRFæ”»å‡»ã€‚Davidåœ¨è¦å›äº†ä»–çš„åŸŸåä¹‹åï¼Œä¹Ÿå°†æ•´ä¸ªæ”»å‡»è¿‡ç¨‹åˆ†äº«åˆ°ä»–çš„ç«™ç‚¹ä¸Šäº†ï¼Œå¦‚æœä½ æ„Ÿå…´è¶£çš„è¯ï¼Œå¯ä»¥å‚è€ƒ<a href=\"https://www.davidairey.com/google-gmail-security-hijack\">è¯¥é“¾æ¥</a>ï¼ˆæ”¾å¿ƒè¿™ä¸ªé“¾æ¥æ˜¯å®‰å…¨çš„ï¼‰ã€‚</p><h2>ä»€ä¹ˆæ˜¯CSRFæ”»å‡»</h2><p>CSRFè‹±æ–‡å…¨ç§°æ˜¯Cross-site request forgeryï¼Œæ‰€ä»¥åˆç§°ä¸ºâ€œè·¨ç«™è¯·æ±‚ä¼ªé€ â€ï¼Œæ˜¯æŒ‡é»‘å®¢å¼•è¯±ç”¨æˆ·æ‰“å¼€é»‘å®¢çš„ç½‘ç«™ï¼Œåœ¨é»‘å®¢çš„ç½‘ç«™ä¸­ï¼Œåˆ©ç”¨ç”¨æˆ·çš„ç™»å½•çŠ¶æ€å‘èµ·çš„è·¨ç«™è¯·æ±‚ã€‚ç®€å•æ¥è®²ï¼Œ<strong>CSRFæ”»å‡»å°±æ˜¯é»‘å®¢åˆ©ç”¨äº†ç”¨æˆ·çš„ç™»å½•çŠ¶æ€ï¼Œå¹¶é€šè¿‡ç¬¬ä¸‰æ–¹çš„ç«™ç‚¹æ¥åšä¸€äº›åäº‹</strong>ã€‚</p><p>é€šå¸¸å½“ç”¨æˆ·æ‰“å¼€äº†é»‘å®¢çš„é¡µé¢åï¼Œé»‘å®¢æœ‰ä¸‰ç§æ–¹å¼å»å®æ–½CSRFæ”»å‡»ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬ä»¥æå®¢æ—¶é—´å®˜ç½‘ä¸ºä¾‹å­ï¼Œæ¥åˆ†æè¿™ä¸‰ç§æ”»å‡»æ–¹å¼éƒ½æ˜¯æ€ä¹ˆå®æ–½çš„ã€‚è¿™é‡Œå‡è®¾æå®¢æ—¶é—´å…·æœ‰è½¬è´¦åŠŸèƒ½ï¼Œå¯ä»¥é€šè¿‡POSTæˆ–Getæ¥å®ç°è½¬è´¦ï¼Œè½¬è´¦æ¥å£å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>#åŒæ—¶æ”¯æŒPOSTå’ŒGet\n#æ¥å£ \nhttps://time.geekbang.org/sendcoin\n#å‚æ•°\n##ç›®æ ‡ç”¨æˆ·\nuser\n##ç›®æ ‡é‡‘é¢\nnumber\n</code></pre><p>æœ‰äº†ä¸Šé¢çš„è½¬è´¦æ¥å£ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ¥æ¨¡æ‹ŸCSRFæ”»å‡»äº†ã€‚</p><h3>1. è‡ªåŠ¨å‘èµ·Getè¯·æ±‚</h3><p>é»‘å®¢æœ€å®¹æ˜“å®æ–½çš„æ”»å‡»æ–¹å¼æ˜¯è‡ªåŠ¨å‘èµ·Getè¯·æ±‚ï¼Œå…·ä½“æ”»å‡»æ–¹å¼ä½ å¯ä»¥å‚è€ƒä¸‹é¢è¿™æ®µä»£ç ï¼š</p><pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n  &lt;body&gt;\n    &lt;h1&gt;é»‘å®¢çš„ç«™ç‚¹ï¼šCSRFæ”»å‡»æ¼”ç¤º&lt;/h1&gt;\n    &lt;img src=&quot;https://time.geekbang.org/sendcoin?user=hacker&amp;number=100&quot;&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre><p>è¿™æ˜¯é»‘å®¢é¡µé¢çš„HTMLä»£ç ï¼Œåœ¨è¿™æ®µä»£ç ä¸­ï¼Œé»‘å®¢å°†è½¬è´¦çš„è¯·æ±‚æ¥å£éšè—åœ¨imgæ ‡ç­¾å†…ï¼Œæ¬ºéª—æµè§ˆå™¨è¿™æ˜¯ä¸€å¼ å›¾ç‰‡èµ„æºã€‚å½“è¯¥é¡µé¢è¢«åŠ è½½æ—¶ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨å‘èµ·imgçš„èµ„æºè¯·æ±‚ï¼Œå¦‚æœæœåŠ¡å™¨æ²¡æœ‰å¯¹è¯¥è¯·æ±‚åšåˆ¤æ–­çš„è¯ï¼Œé‚£ä¹ˆæœåŠ¡å™¨å°±ä¼šè®¤ä¸ºè¯¥è¯·æ±‚æ˜¯ä¸€ä¸ªè½¬è´¦è¯·æ±‚ï¼Œäºæ˜¯ç”¨æˆ·è´¦æˆ·ä¸Šçš„100æå®¢å¸å°±è¢«è½¬ç§»åˆ°é»‘å®¢çš„è´¦æˆ·ä¸Šå»äº†ã€‚</p><h3>2. è‡ªåŠ¨å‘èµ·POSTè¯·æ±‚</h3><p>é™¤äº†è‡ªåŠ¨å‘é€Getè¯·æ±‚ä¹‹å¤–ï¼Œæœ‰äº›æœåŠ¡å™¨çš„æ¥å£æ˜¯ä½¿ç”¨POSTæ–¹æ³•çš„ï¼Œæ‰€ä»¥é»‘å®¢è¿˜éœ€è¦åœ¨ä»–çš„ç«™ç‚¹ä¸Šä¼ªé€ POSTè¯·æ±‚ï¼Œå½“ç”¨æˆ·æ‰“å¼€é»‘å®¢çš„ç«™ç‚¹æ—¶ï¼Œæ˜¯è‡ªåŠ¨æäº¤POSTè¯·æ±‚ï¼Œå…·ä½“çš„æ–¹å¼ä½ å¯ä»¥å‚è€ƒä¸‹é¢ç¤ºä¾‹ä»£ç ï¼š</p><pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;body&gt;\n  &lt;h1&gt;é»‘å®¢çš„ç«™ç‚¹ï¼šCSRFæ”»å‡»æ¼”ç¤º&lt;/h1&gt;\n  &lt;form id='hacker-form' action=&quot;https://time.geekbang.org/sendcoin&quot; method=POST&gt;\n    &lt;input type=&quot;hidden&quot; name=&quot;user&quot; value=&quot;hacker&quot; /&gt;\n    &lt;input type=&quot;hidden&quot; name=&quot;number&quot; value=&quot;100&quot; /&gt;\n  &lt;/form&gt;\n  &lt;script&gt; document.getElementById('hacker-form').submit(); &lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre><p>åœ¨è¿™æ®µä»£ç ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°é»‘å®¢åœ¨ä»–çš„é¡µé¢ä¸­æ„å»ºäº†ä¸€ä¸ªéšè—çš„è¡¨å•ï¼Œè¯¥è¡¨å•çš„å†…å®¹å°±æ˜¯æå®¢æ—¶é—´çš„è½¬è´¦æ¥å£ã€‚å½“ç”¨æˆ·æ‰“å¼€è¯¥ç«™ç‚¹ä¹‹åï¼Œè¿™ä¸ªè¡¨å•ä¼šè¢«è‡ªåŠ¨æ‰§è¡Œæäº¤ï¼›å½“è¡¨å•è¢«æäº¤ä¹‹åï¼ŒæœåŠ¡å™¨å°±ä¼šæ‰§è¡Œè½¬è´¦æ“ä½œã€‚å› æ­¤ä½¿ç”¨æ„å»ºè‡ªåŠ¨æäº¤è¡¨å•è¿™ç§æ–¹å¼ï¼Œå°±å¯ä»¥è‡ªåŠ¨å®ç°è·¨ç«™ç‚¹POSTæ•°æ®æäº¤ã€‚</p><h3>3. å¼•è¯±ç”¨æˆ·ç‚¹å‡»é“¾æ¥</h3><p>é™¤äº†è‡ªåŠ¨å‘èµ·Getå’ŒPostè¯·æ±‚ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€ç§æ–¹å¼æ˜¯è¯±æƒ‘ç”¨æˆ·ç‚¹å‡»é»‘å®¢ç«™ç‚¹ä¸Šçš„é“¾æ¥ï¼Œè¿™ç§æ–¹å¼é€šå¸¸å‡ºç°åœ¨è®ºå›æˆ–è€…æ¶æ„é‚®ä»¶ä¸Šã€‚é»‘å®¢ä¼šé‡‡ç”¨å¾ˆå¤šæ–¹å¼å»è¯±æƒ‘ç”¨æˆ·ç‚¹å‡»é“¾æ¥ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>&lt;div&gt;\n  &lt;img width=150 src=http://images.xuejuzi.cn/1612/1_161230185104_1.jpg&gt; &lt;/img&gt; &lt;/div&gt; &lt;div&gt;\n  &lt;a href=&quot;https://time.geekbang.org/sendcoin?user=hacker&amp;number=100&quot; taget=&quot;_blank&quot;&gt;\n    ç‚¹å‡»ä¸‹è½½ç¾å¥³ç…§ç‰‡\n  &lt;/a&gt;\n&lt;/div&gt;\n</code></pre><p>è¿™æ®µé»‘å®¢ç«™ç‚¹ä»£ç ï¼Œé¡µé¢ä¸Šæ”¾äº†ä¸€å¼ ç¾å¥³å›¾ç‰‡ï¼Œä¸‹é¢æ”¾äº†å›¾ç‰‡ä¸‹è½½åœ°å€ï¼Œè€Œè¿™ä¸ªä¸‹è½½åœ°å€å®é™…ä¸Šæ˜¯é»‘å®¢ç”¨æ¥è½¬è´¦çš„æ¥å£ï¼Œä¸€æ—¦ç”¨æˆ·ç‚¹å‡»äº†è¿™ä¸ªé“¾æ¥ï¼Œé‚£ä¹ˆä»–çš„æå®¢å¸å°±è¢«è½¬åˆ°é»‘å®¢è´¦æˆ·ä¸Šäº†ã€‚</p><p>ä»¥ä¸Šä¸‰ç§å°±æ˜¯é»‘å®¢ç»å¸¸é‡‡ç”¨çš„æ”»å‡»æ–¹å¼ã€‚å¦‚æœå½“ç”¨æˆ·ç™»å½•äº†æå®¢æ—¶é—´ï¼Œä»¥ä¸Šä¸‰ç§CSRFæ”»å‡»æ–¹å¼ä¸­çš„ä»»ä½•ä¸€ç§å‘ç”Ÿæ—¶ï¼Œé‚£ä¹ˆæœåŠ¡å™¨éƒ½ä¼šå°†ä¸€å®šé‡‘é¢çš„æå®¢å¸å‘é€åˆ°é»‘å®¢è´¦æˆ·ã€‚</p><p>åˆ°è¿™é‡Œï¼Œç›¸ä¿¡ä½ å·²ç»çŸ¥é“ä»€ä¹ˆæ˜¯CSRFæ”»å‡»äº†ã€‚<strong>å’ŒXSSä¸åŒçš„æ˜¯ï¼ŒCSRFæ”»å‡»ä¸éœ€è¦å°†æ¶æ„ä»£ç æ³¨å…¥ç”¨æˆ·çš„é¡µé¢ï¼Œä»…ä»…æ˜¯åˆ©ç”¨æœåŠ¡å™¨çš„æ¼æ´å’Œç”¨æˆ·çš„ç™»å½•çŠ¶æ€æ¥å®æ–½æ”»å‡»</strong>ã€‚</p><h2>å¦‚ä½•é˜²æ­¢CSRFæ”»å‡»</h2><p>äº†è§£äº†CSRFæ”»å‡»çš„ä¸€äº›æ‰‹æ®µä¹‹åï¼Œæˆ‘ä»¬å†æ¥çœ‹çœ‹CSRFæ”»å‡»çš„ä¸€äº›â€œç‰¹å¾â€ï¼Œç„¶åæ ¹æ®è¿™äº›â€œç‰¹å¾â€åˆ†æä¸‹å¦‚ä½•é˜²æ­¢CSRFæ”»å‡»ã€‚ä¸‹é¢æ˜¯æˆ‘æ€»ç»“çš„å‘èµ·CSRFæ”»å‡»çš„ä¸‰ä¸ªå¿…è¦æ¡ä»¶ï¼š</p><ul>\n<li>ç¬¬ä¸€ä¸ªï¼Œç›®æ ‡ç«™ç‚¹ä¸€å®šè¦æœ‰CSRFæ¼æ´ï¼›</li>\n<li>ç¬¬äºŒä¸ªï¼Œç”¨æˆ·è¦ç™»å½•è¿‡ç›®æ ‡ç«™ç‚¹ï¼Œå¹¶ä¸”åœ¨æµè§ˆå™¨ä¸Šä¿æŒæœ‰è¯¥ç«™ç‚¹çš„ç™»å½•çŠ¶æ€ï¼›</li>\n<li>ç¬¬ä¸‰ä¸ªï¼Œéœ€è¦ç”¨æˆ·æ‰“å¼€ä¸€ä¸ªç¬¬ä¸‰æ–¹ç«™ç‚¹ï¼Œå¯ä»¥æ˜¯é»‘å®¢çš„ç«™ç‚¹ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€äº›è®ºå›ã€‚</li>\n</ul><p>æ»¡è¶³ä»¥ä¸Šä¸‰ä¸ªæ¡ä»¶ä¹‹åï¼Œé»‘å®¢å°±å¯ä»¥å¯¹ç”¨æˆ·è¿›è¡ŒCSRFæ”»å‡»äº†ã€‚è¿™é‡Œè¿˜éœ€è¦é¢å¤–æ³¨æ„ä¸€ç‚¹ï¼Œä¸XSSæ”»å‡»ä¸åŒï¼ŒCSRFæ”»å‡»ä¸ä¼šå¾€é¡µé¢æ³¨å…¥æ¶æ„è„šæœ¬ï¼Œå› æ­¤é»‘å®¢æ˜¯æ— æ³•é€šè¿‡CSRFæ”»å‡»æ¥è·å–ç”¨æˆ·é¡µé¢æ•°æ®çš„ï¼›å…¶æœ€å…³é”®çš„ä¸€ç‚¹æ˜¯è¦èƒ½æ‰¾åˆ°æœåŠ¡å™¨çš„æ¼æ´ï¼Œæ‰€ä»¥è¯´å¯¹äºCSRFæ”»å‡»æˆ‘ä»¬ä¸»è¦çš„é˜²æŠ¤æ‰‹æ®µæ˜¯æå‡æœåŠ¡å™¨çš„å®‰å…¨æ€§ã€‚</p><p>è¦è®©æœåŠ¡å™¨é¿å…é­å—åˆ°CSRFæ”»å‡»ï¼Œé€šå¸¸æœ‰ä»¥ä¸‹å‡ ç§é€”å¾„ã€‚</p><h3>1. å……åˆ†åˆ©ç”¨å¥½Cookie çš„ SameSite å±æ€§</h3><p>é€šè¿‡ä¸Šé¢çš„ä»‹ç»ï¼Œç›¸ä¿¡ä½ å·²ç»çŸ¥é“äº†é»‘å®¢ä¼šåˆ©ç”¨ç”¨æˆ·çš„ç™»å½•çŠ¶æ€æ¥å‘èµ·CSRFæ”»å‡»ï¼Œè€Œ<strong>Cookieæ­£æ˜¯æµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¹‹é—´ç»´æŠ¤ç™»å½•çŠ¶æ€çš„ä¸€ä¸ªå…³é”®æ•°æ®</strong>ï¼Œå› æ­¤è¦é˜»æ­¢CSRFæ”»å‡»ï¼Œæˆ‘ä»¬é¦–å…ˆå°±è¦è€ƒè™‘åœ¨Cookieä¸Šæ¥åšæ–‡ç« ã€‚</p><p>é€šå¸¸CSRFæ”»å‡»éƒ½æ˜¯ä»ç¬¬ä¸‰æ–¹ç«™ç‚¹å‘èµ·çš„ï¼Œè¦é˜²æ­¢CSRFæ”»å‡»ï¼Œæˆ‘ä»¬æœ€å¥½èƒ½å®ç°ä»ç¬¬ä¸‰æ–¹ç«™ç‚¹å‘é€è¯·æ±‚æ—¶ç¦æ­¢Cookieçš„å‘é€ï¼Œå› æ­¤åœ¨æµè§ˆå™¨é€šè¿‡ä¸åŒæ¥æºå‘é€HTTPè¯·æ±‚æ—¶ï¼Œæœ‰å¦‚ä¸‹åŒºåˆ«ï¼š</p><ul>\n<li>å¦‚æœæ˜¯ä»ç¬¬ä¸‰æ–¹ç«™ç‚¹å‘èµ·çš„è¯·æ±‚ï¼Œé‚£ä¹ˆéœ€è¦æµè§ˆå™¨ç¦æ­¢å‘é€æŸäº›å…³é”®Cookieæ•°æ®åˆ°æœåŠ¡å™¨ï¼›</li>\n<li>å¦‚æœæ˜¯åŒä¸€ä¸ªç«™ç‚¹å‘èµ·çš„è¯·æ±‚ï¼Œé‚£ä¹ˆå°±éœ€è¦ä¿è¯Cookieæ•°æ®æ­£å¸¸å‘é€ã€‚</li>\n</ul><p>è€Œæˆ‘ä»¬è¦èŠçš„Cookie ä¸­çš„SameSiteå±æ€§æ­£æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜çš„ï¼Œé€šè¿‡ä½¿ç”¨SameSiteå¯ä»¥æœ‰æ•ˆåœ°é™ä½CSRFæ”»å‡»çš„é£é™©ã€‚</p><p>é‚£SameSiteæ˜¯æ€ä¹ˆé˜²æ­¢CSRFæ”»å‡»çš„å‘¢ï¼Ÿ</p><p>åœ¨HTTPå“åº”å¤´ä¸­ï¼Œé€šè¿‡set-cookieå­—æ®µè®¾ç½®Cookieæ—¶ï¼Œå¯ä»¥å¸¦ä¸ŠSameSiteé€‰é¡¹ï¼Œå¦‚ä¸‹ï¼š</p><pre><code>set-cookie: 1P_JAR=2019-10-20-06; expires=Tue, 19-Nov-2019 06:36:21 GMT; path=/; domain=.google.com; SameSite=none\n</code></pre><p><strong>SameSiteé€‰é¡¹é€šå¸¸æœ‰Strictã€Laxå’ŒNoneä¸‰ä¸ªå€¼ã€‚</strong></p><ul>\n<li>Strictæœ€ä¸ºä¸¥æ ¼ã€‚å¦‚æœSameSiteçš„å€¼æ˜¯Strictï¼Œé‚£ä¹ˆæµè§ˆå™¨ä¼šå®Œå…¨ç¦æ­¢ç¬¬ä¸‰æ–¹ Cookieã€‚ç®€è¨€ä¹‹ï¼Œå¦‚æœä½ ä»æå®¢æ—¶é—´çš„é¡µé¢ä¸­è®¿é—®InfoQçš„èµ„æºï¼Œè€ŒInfoQçš„æŸäº›Cookieè®¾ç½®äº†SameSite = Strictçš„è¯ï¼Œé‚£ä¹ˆè¿™äº›Cookieæ˜¯ä¸ä¼šè¢«å‘é€åˆ°InfoQçš„æœåŠ¡å™¨ä¸Šçš„ã€‚åªæœ‰ä½ ä»InfoQçš„ç«™ç‚¹å»è¯·æ±‚InfoQçš„èµ„æºæ—¶ï¼Œæ‰ä¼šå¸¦ä¸Šè¿™äº›Cookieã€‚</li>\n<li>Laxç›¸å¯¹å®½æ¾ä¸€ç‚¹ã€‚åœ¨è·¨ç«™ç‚¹çš„æƒ…å†µä¸‹ï¼Œä»ç¬¬ä¸‰æ–¹ç«™ç‚¹çš„é“¾æ¥æ‰“å¼€å’Œä»ç¬¬ä¸‰æ–¹ç«™ç‚¹æäº¤Getæ–¹å¼çš„è¡¨å•è¿™ä¸¤ç§æ–¹å¼éƒ½ä¼šæºå¸¦Cookieã€‚ä½†å¦‚æœåœ¨ç¬¬ä¸‰æ–¹ç«™ç‚¹ä¸­ä½¿ç”¨Postæ–¹æ³•ï¼Œæˆ–è€…é€šè¿‡imgã€iframeç­‰æ ‡ç­¾åŠ è½½çš„URLï¼Œè¿™äº›åœºæ™¯éƒ½ä¸ä¼šæºå¸¦Cookieã€‚</li>\n<li>è€Œå¦‚æœä½¿ç”¨Noneçš„è¯ï¼Œåœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½ä¼šå‘é€Cookieæ•°æ®ã€‚</li>\n</ul><p>å…³äºSameSiteçš„å…·ä½“ä½¿ç”¨æ–¹å¼ï¼Œä½ å¯ä»¥å‚è€ƒè¿™ä¸ªé“¾æ¥ï¼š<a href=\"https://web.dev/samesite-cookies-explained\">https://web.dev/samesite-cookies-explained</a> ã€‚</p><p>å¯¹äºé˜²èŒƒCSRFæ”»å‡»ï¼Œæˆ‘ä»¬å¯ä»¥é’ˆå¯¹å®é™…æƒ…å†µå°†ä¸€äº›å…³é”®çš„Cookieè®¾ç½®ä¸ºStrictæˆ–è€…Laxæ¨¡å¼ï¼Œè¿™æ ·åœ¨è·¨ç«™ç‚¹è¯·æ±‚æ—¶ï¼Œè¿™äº›å…³é”®çš„Cookieå°±ä¸ä¼šè¢«å‘é€åˆ°æœåŠ¡å™¨ï¼Œä»è€Œä½¿å¾—é»‘å®¢çš„CSRFæ”»å‡»å¤±æ•ˆã€‚</p><h3>2. éªŒè¯è¯·æ±‚çš„æ¥æºç«™ç‚¹</h3><p>æ¥ç€æˆ‘ä»¬å†æ¥äº†è§£å¦å¤–ä¸€ç§é˜²æ­¢CSRFæ”»å‡»çš„ç­–ç•¥ï¼Œé‚£å°±æ˜¯<strong>åœ¨æœåŠ¡å™¨ç«¯éªŒè¯è¯·æ±‚æ¥æºçš„ç«™ç‚¹</strong>ã€‚ç”±äºCSRFæ”»å‡»å¤§å¤šæ¥è‡ªäºç¬¬ä¸‰æ–¹ç«™ç‚¹ï¼Œå› æ­¤æœåŠ¡å™¨å¯ä»¥ç¦æ­¢æ¥è‡ªç¬¬ä¸‰æ–¹ç«™ç‚¹çš„è¯·æ±‚ã€‚é‚£ä¹ˆè¯¥æ€ä¹ˆåˆ¤æ–­è¯·æ±‚æ˜¯å¦æ¥è‡ªç¬¬ä¸‰æ–¹ç«™ç‚¹å‘¢ï¼Ÿ</p><p>è¿™å°±éœ€è¦ä»‹ç»HTTPè¯·æ±‚å¤´ä¸­çš„ Refererå’ŒOrigin å±æ€§äº†ã€‚</p><p><strong>Refereræ˜¯HTTPè¯·æ±‚å¤´ä¸­çš„ä¸€ä¸ªå­—æ®µï¼Œè®°å½•äº†è¯¥HTTPè¯·æ±‚çš„æ¥æºåœ°å€</strong>ã€‚æ¯”å¦‚æˆ‘ä»æå®¢æ—¶é—´çš„å®˜ç½‘æ‰“å¼€äº†InfoQçš„ç«™ç‚¹ï¼Œé‚£ä¹ˆè¯·æ±‚å¤´ä¸­çš„Refererå€¼æ˜¯æå®¢æ—¶é—´çš„URLï¼Œå¦‚ä¸‹å›¾ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/15/c9/159430e9d15cb7bcfa4fd014da31a2c9.png?wh=1142*816\" alt=\"\"></p><center><span class=\"reference\">HTTPè¯·æ±‚å¤´ä¸­çš„Refererå¼•ç”¨</span></center><p>è™½ç„¶å¯ä»¥é€šè¿‡Refererå‘Šè¯‰æœåŠ¡å™¨HTTPè¯·æ±‚çš„æ¥æºï¼Œä½†æ˜¯æœ‰ä¸€äº›åœºæ™¯æ˜¯ä¸é€‚åˆå°†æ¥æºURLæš´éœ²ç»™æœåŠ¡å™¨çš„ï¼Œå› æ­¤æµè§ˆå™¨æä¾›ç»™å¼€å‘è€…ä¸€ä¸ªé€‰é¡¹ï¼Œå¯ä»¥ä¸ç”¨ä¸Šä¼ Refererå€¼ï¼Œå…·ä½“å¯å‚è€ƒ<strong>Referrer Policy</strong>ã€‚</p><p>ä½†åœ¨æœåŠ¡å™¨ç«¯éªŒè¯è¯·æ±‚å¤´ä¸­çš„Refererå¹¶ä¸æ˜¯å¤ªå¯é ï¼Œå› æ­¤æ ‡å‡†å§”å‘˜ä¼šåˆåˆ¶å®šäº†<strong>Originå±æ€§</strong>ï¼Œåœ¨ä¸€äº›é‡è¦çš„åœºåˆï¼Œæ¯”å¦‚é€šè¿‡XMLHttpRequestã€Fecthå‘èµ·è·¨ç«™è¯·æ±‚æˆ–è€…é€šè¿‡Postæ–¹æ³•å‘é€è¯·æ±‚æ—¶ï¼Œéƒ½ä¼šå¸¦ä¸ŠOriginå±æ€§ï¼Œå¦‚ä¸‹å›¾ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/25/03/258dc5542db8961aaa23ec0c02030003.png?wh=1142*864\" alt=\"\"></p><center><span class=\"reference\">Postè¯·æ±‚æ—¶çš„Originä¿¡æ¯</span></center><p>ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼ŒOriginå±æ€§åªåŒ…å«äº†åŸŸåä¿¡æ¯ï¼Œå¹¶æ²¡æœ‰åŒ…å«å…·ä½“çš„URLè·¯å¾„ï¼Œè¿™æ˜¯Originå’ŒRefererçš„ä¸€ä¸ªä¸»è¦åŒºåˆ«ã€‚åœ¨è¿™é‡Œéœ€è¦è¡¥å……ä¸€ç‚¹ï¼ŒOriginçš„å€¼ä¹‹æ‰€ä»¥ä¸åŒ…å«è¯¦ç»†è·¯å¾„ä¿¡æ¯ï¼Œæ˜¯æœ‰äº›ç«™ç‚¹å› ä¸ºå®‰å…¨è€ƒè™‘ï¼Œä¸æƒ³æŠŠæºç«™ç‚¹çš„è¯¦ç»†è·¯å¾„æš´éœ²ç»™æœåŠ¡å™¨ã€‚</p><p>å› æ­¤ï¼ŒæœåŠ¡å™¨çš„ç­–ç•¥æ˜¯ä¼˜å…ˆåˆ¤æ–­Originï¼Œå¦‚æœè¯·æ±‚å¤´ä¸­æ²¡æœ‰åŒ…å«Originå±æ€§ï¼Œå†æ ¹æ®å®é™…æƒ…å†µåˆ¤æ–­æ˜¯å¦ä½¿ç”¨Refererå€¼ã€‚</p><h3>3. CSRF Token</h3><p>é™¤äº†ä½¿ç”¨ä»¥ä¸Šä¸¤ç§æ–¹å¼æ¥é˜²æ­¢CSRFæ”»å‡»ä¹‹å¤–ï¼Œè¿˜å¯ä»¥é‡‡ç”¨CSRF Tokenæ¥éªŒè¯ï¼Œè¿™ä¸ªæµç¨‹æ¯”è¾ƒå¥½ç†è§£ï¼Œå¤§è‡´åˆ†ä¸ºä¸¤æ­¥ã€‚</p><p>ç¬¬ä¸€æ­¥ï¼Œåœ¨æµè§ˆå™¨å‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚æ—¶ï¼ŒæœåŠ¡å™¨ç”Ÿæˆä¸€ä¸ªCSRF Tokenã€‚CSRF Tokenå…¶å®å°±æ˜¯æœåŠ¡å™¨ç”Ÿæˆçš„å­—ç¬¦ä¸²ï¼Œç„¶åå°†è¯¥å­—ç¬¦ä¸²æ¤å…¥åˆ°è¿”å›çš„é¡µé¢ä¸­ã€‚ä½ å¯ä»¥å‚è€ƒä¸‹é¢ç¤ºä¾‹ä»£ç ï¼š</p><pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;body&gt;\n    &lt;form action=&quot;https://time.geekbang.org/sendcoin&quot; method=&quot;POST&quot;&gt;\n      &lt;input type=&quot;hidden&quot; name=&quot;csrf-token&quot; value=&quot;nc98P987bcpncYhoadjoiydc9ajDlcn&quot;&gt;\n      &lt;input type=&quot;text&quot; name=&quot;user&quot;&gt;\n      &lt;input type=&quot;text&quot; name=&quot;number&quot;&gt;\n      &lt;input type=&quot;submit&quot;&gt;\n    &lt;/form&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre><p>ç¬¬äºŒæ­¥ï¼Œåœ¨æµè§ˆå™¨ç«¯å¦‚æœè¦å‘èµ·è½¬è´¦çš„è¯·æ±‚ï¼Œé‚£ä¹ˆéœ€è¦å¸¦ä¸Šé¡µé¢ä¸­çš„CSRF Tokenï¼Œç„¶åæœåŠ¡å™¨ä¼šéªŒè¯è¯¥Tokenæ˜¯å¦åˆæ³•ã€‚å¦‚æœæ˜¯ä»ç¬¬ä¸‰æ–¹ç«™ç‚¹å‘å‡ºçš„è¯·æ±‚ï¼Œé‚£ä¹ˆå°†æ— æ³•è·å–åˆ°CSRF Tokençš„å€¼ï¼Œæ‰€ä»¥å³ä½¿å‘å‡ºäº†è¯·æ±‚ï¼ŒæœåŠ¡å™¨ä¹Ÿä¼šå› ä¸ºCSRF Tokenä¸æ­£ç¡®è€Œæ‹’ç»è¯·æ±‚ã€‚</p><h2>æ€»ç»“</h2><p>å¥½äº†ï¼Œä»Šå¤©æˆ‘ä»¬å°±ä»‹ç»åˆ°è¿™é‡Œï¼Œä¸‹é¢æˆ‘æ¥æ€»ç»“ä¸‹æœ¬æ–‡çš„ä¸»è¦å†…å®¹ã€‚</p><p>æˆ‘ä»¬ç»“åˆä¸€ä¸ªå®é™…æ¡ˆä¾‹ä»‹ç»äº†CSRFæ”»å‡»ï¼Œè¦å‘èµ·CSRFæ”»å‡»éœ€è¦å…·å¤‡ä¸‰ä¸ªæ¡ä»¶ï¼šç›®æ ‡ç«™ç‚¹å­˜åœ¨æ¼æ´ã€ç”¨æˆ·è¦ç™»å½•è¿‡ç›®æ ‡ç«™ç‚¹å’Œé»‘å®¢éœ€è¦é€šè¿‡ç¬¬ä¸‰æ–¹ç«™ç‚¹å‘èµ·æ”»å‡»ã€‚</p><p>æ ¹æ®è¿™ä¸‰ä¸ªå¿…è¦æ¡ä»¶ï¼Œæˆ‘ä»¬åˆä»‹ç»äº†è¯¥å¦‚ä½•é˜²æ­¢CSRFæ”»å‡»ï¼Œå…·ä½“æ¥è®²ä¸»è¦æœ‰ä¸‰ç§æ–¹å¼ï¼šå……åˆ†åˆ©ç”¨å¥½Cookieçš„SameSiteå±æ€§ã€éªŒè¯è¯·æ±‚çš„æ¥æºç«™ç‚¹å’Œä½¿ç”¨CSRF Tokenã€‚è¿™ä¸‰ç§æ–¹å¼éœ€è¦åˆç†æ­é…ä½¿ç”¨ï¼Œè¿™æ ·æ‰å¯ä»¥æœ‰æ•ˆåœ°é˜²æ­¢CSRFæ”»å‡»ã€‚</p><p>å†ç»“åˆå‰é¢ä¸¤ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºé¡µé¢å®‰å…¨é—®é¢˜çš„ä¸»è¦åŸå› å°±æ˜¯æµè§ˆå™¨ä¸ºåŒæºç­–ç•¥å¼€çš„ä¸¤ä¸ªâ€œåé—¨â€ï¼šä¸€ä¸ªæ˜¯åœ¨é¡µé¢ä¸­å¯ä»¥ä»»æ„å¼•ç”¨ç¬¬ä¸‰æ–¹èµ„æºï¼Œå¦å¤–ä¸€ä¸ªæ˜¯é€šè¿‡CORSç­–ç•¥è®©XMLHttpRequestå’ŒFetchå»è·¨åŸŸè¯·æ±‚èµ„æºã€‚</p><p>ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œæˆ‘ä»¬å¼•å…¥äº†CSPæ¥é™åˆ¶é¡µé¢ä»»æ„å¼•å…¥å¤–éƒ¨èµ„æºï¼Œå¼•å…¥äº†HttpOnlyæœºåˆ¶æ¥ç¦æ­¢XMLHttpRequestæˆ–è€…Fetchå‘é€ä¸€äº›å…³é”®Cookieï¼Œå¼•å…¥äº†SameSiteå’ŒOriginæ¥é˜²æ­¢CSRFæ”»å‡»ã€‚</p><p>é€šè¿‡è¿™ä¸‰ç¯‡æ–‡ç« çš„åˆ†æï¼Œç›¸ä¿¡ä½ åº”è¯¥å·²ç»èƒ½æ­å»º<strong>Webé¡µé¢å®‰å…¨</strong>çš„çŸ¥è¯†ä½“ç³»ç½‘ç»œäº†ã€‚æœ‰äº†è¿™å¼ ç½‘ç»œï¼Œä½ å°±å¯ä»¥å°†HTTPè¯·æ±‚å¤´å’Œå“åº”å¤´ä¸­å„ç§å®‰å…¨ç›¸å…³çš„å­—æ®µå…³è”èµ·æ¥ï¼Œæ¯”å¦‚Cookieä¸­çš„ä¸€äº›å­—æ®µï¼Œè¿˜æœ‰X-Frame-Optionsã€X-Content-Type-Optionsã€X-XSS-Protectionç­‰å­—æ®µï¼Œä¹Ÿå¯ä»¥å°†CSPã€CORSè¿™äº›çŸ¥è¯†ç‚¹å…³è”èµ·æ¥ã€‚å½“ç„¶è¿™äº›å¹¶ä¸æ˜¯æµè§ˆå™¨å®‰å…¨çš„å…¨éƒ¨ï¼Œåé¢ä¸¤ç¯‡æ–‡ç« æˆ‘ä»¬è¿˜ä¼šä»‹ç»<strong>æµè§ˆå™¨ç³»ç»Ÿå®‰å…¨</strong>å’Œ<strong>æµè§ˆå™¨ç½‘ç»œå®‰å…¨</strong>ä¸¤å¤§å—çš„å†…å®¹ï¼Œè¿™å¯¹äºä½ å­¦ä¹ æµè§ˆå™¨å®‰å…¨æ¥è¯´ä¹Ÿæ˜¯è‡³å…³é‡è¦çš„ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>ä»Šå¤©ç•™ç»™ä½ çš„æ€è€ƒé¢˜ï¼šä»€ä¹ˆæ˜¯CSRFæ”»å‡»ï¼Ÿåœ¨å¼€å‘é¡¹ç›®è¿‡ç¨‹ä¸­åº”è¯¥å¦‚ä½•é˜²å¾¡CSRFæ”»å‡»ï¼Ÿ</p><p>æ¬¢è¿åœ¨ç•™è¨€åŒºä¸æˆ‘åˆ†äº«ä½ çš„æƒ³æ³•ï¼Œä¹Ÿæ¬¢è¿ä½ åœ¨ç•™è¨€åŒºè®°å½•ä½ çš„æ€è€ƒè¿‡ç¨‹ã€‚æ„Ÿè°¢é˜…è¯»ï¼Œå¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©çš„è¯ï¼Œä¹Ÿæ¬¢è¿æŠŠå®ƒåˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ã€‚</p><p></p>","comments":[{"had_liked":false,"id":143456,"user_name":"æ·¡","can_delete":false,"product_type":"c1","uid":1456392,"ip_address":"","ucode":"6856CA319DE2F0","user_header":"https://static001.geekbang.org/account/avatar/00/16/39/08/09055b47.jpg","comment_is_top":false,"comment_ctime":1571711608,"is_pvip":false,"replies":[{"id":"55395","content":"æˆ‘æŠŠæ•´ä¸ªæµç¨‹å†™ä¸€éï¼š<br>é¦–å…ˆå‡è®¾ä½ å‘å‡ºç™»å½•InfoQçš„ç«™ç‚¹è¯·æ±‚ï¼Œç„¶ååœ¨InfoQè¿”å›HTTPå“åº”å¤´ç»™æµè§ˆå™¨ï¼ŒInfoQå“åº”å¤´ä¸­çš„æŸäº›set-cookieå­—æ®µå¦‚ä¸‹æ‰€ç¤ºï¼š<br>set-cookie: a_value=avalue_xxx; expires=Thu, 21-Nov-2019 03:53:16 GMT; path=&#47;; domain=.infoq.com; SameSite=strict<br>set-cookie: b_value=bvalue_xxx; expires=Thu, 21-Nov-2019 03:53:16 GMT; path=&#47;; domain=.infoq.com; SameSite=lax<br>set-cookie: c_value=cvaule_xxx; expires=Thu, 21-Nov-2019 03:53:16 GMT; path=&#47;; domain=.infoq.com; SameSite=none<br>set-cookie: d_value=dvaule_xxxx; expires=Thu, 21-Nov-2019 03:53:16 GMT; path=&#47;; domain=.infoq.com; <br><br><br>æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œ<br>a_valueçš„SameSiteå±æ€§è®¾ç½®æˆäº†strictï¼Œ<br>b_valueçš„SameSiteå±æ€§è®¾ç½®æˆäº†lax<br>c_valueçš„SameSiteå±æ€§å€¼è®¾ç½®æˆäº†none<br>d_valueæ²¡æœ‰è®¾ç½®SameSiteå±æ€§å€¼<br><br><br>å¥½ï¼Œè¿™äº›Cookieè®¾ç½®å¥½ä¹‹åï¼Œå½“ä½ å†æ¬¡åœ¨InfoQçš„é¡µé¢å†…éƒ¨è¯·æ±‚InfoQçš„èµ„æºæ—¶ï¼Œè¿™äº›Cookieä¿¡æ¯éƒ½ä¼šè¢«é™„åŠ åˆ°HTTPçš„è¯·æ±‚å¤´ä¸­ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š<br>cookie: a_value=avalue_xxx;b_value=bvalue_xxx;c_value=cvaule_xxx;d_value=dvaule_xxxx;<br><br>ä½†æ˜¯ï¼Œå‡å¦‚ä½ ä»time.geekbang.orgçš„é¡µé¢ä¸­ï¼Œé€šè¿‡aæ ‡ç­¾æ‰“å¼€é¡µé¢ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š<br>&lt;a href=&quot;https:&#47;&#47;www.infoq.cn&#47;sendcoin?user=hacker&amp;number=100&quot;&gt;ç‚¹æˆ‘ä¸‹è½½&lt;&#47;a&gt;<br>å½“ç”¨æˆ·ç‚¹å‡»æ•´ä¸ªé“¾æ¥çš„æ—¶å€™ï¼Œå› ä¸ºInfoQä¸­a_vauleçš„SameSiteçš„å€¼è®¾ç½®æˆäº†strictï¼Œé‚£ä¹ˆa_vauleçš„å€¼å°†ä¸ä¼šè¢«æºå¸¦åˆ°è¿™ä¸ªè¯·æ±‚çš„HTTPå¤´ä¸­ã€‚<br><br>å¦‚æœtime.geekbang.orgçš„é¡µé¢ä¸­ï¼Œæœ‰é€šè¿‡imgæ¥åŠ è½½çš„infoqçš„èµ„æºä»£ç ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š<br> &lt;img src=&quot;https:&#47;&#47;www.infoq.cn&#47;sendcoin?user=hacker&amp;number=100&quot;&gt;<br>é‚£ä¹ˆåœ¨åŠ è½½infoQèµ„æºçš„æ—¶å€™ï¼Œåªä¼šæºå¸¦c_value,å’Œd_valueçš„å€¼ã€‚<br><br><br>è¿™æ ·å†™ä¸çŸ¥é“ä½ æ˜ç™½æ²¡æœ‰ï¼Œå¦‚æœè¿˜æœ‰ç–‘æƒ‘æ¬¢è¿ç»§ç»­æé—®ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æå…µ","uid":"1141464","ctime":1571717639,"ip_address":"","comment_id":143456,"utype":1}],"discussion_count":5,"race_medal":0,"score":"263564716664","product_id":100033601,"comment_content":"â€œç®€è¨€ä¹‹ï¼Œå¦‚æœä½ ä»æå®¢æ—¶é—´çš„é¡µé¢ä¸­è®¿é—® InfoQ çš„èµ„æºï¼Œè€Œ InfoQ çš„æŸäº› Cookie è®¾ç½®äº† SameSite = Strict çš„è¯ï¼Œé‚£ä¹ˆè¿™äº› Cookie æ˜¯ä¸ä¼šè¢«å‘é€åˆ° InfoQ çš„æœåŠ¡å™¨ä¸Šçš„â€ï¼Œè¿™é‡Œæ˜¯ä¸æ˜¯æˆ‘ç†è§£é”™äº†è¿˜æ˜¯å†™é”™äº†ã€‚åº”è¯¥æ˜¯ä¸ä¼šå‘é€åˆ°æå®¢æ—¶é—´çš„æœåŠ¡å™¨ä¸Šï¼Œæˆ–è€…è¯´æå®¢æ—¶é—´çš„æŸäº›Cookieè®¾ç½®äº†SameSite = Strictå§ã€‚","like_count":62,"discussions":[{"author":{"id":1358174,"avatar":"https://static001.geekbang.org/account/avatar/00/14/b9/5e/a8f6f7db.jpg","nickname":"Ming","note":"","ucode":"A94E8D8433E54F","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":38251,"discussion_content":"@è€å¸ˆ é˜è¿°çš„æ²¡æ¯›ç—…ï¼Œå°±æ˜¯ä¸¾ä¾‹ä¸æ˜¯å¤ªæ°å½“ï¼Œå› ä¸ºæ½œæ„è¯†é‡ŒæŠŠæå®¢ç«™ç‚¹å½“åšæ­£å‘ç½‘ç«™ï¼Œç¬¬ä¸‰æ–¹ç«™ç‚¹å½“åšæ¶æ„ç½‘ç«™ï¼Œå¦‚æœæè¿°ä¸ºæå®¢ç«™ç‚¹è®¾ç½®SameSiteä¸ºä¸¥æ ¼ï¼Œç¬¬ä¸‰æ–¹ç«™ç‚¹å»è¯·æ±‚æå®¢ï¼Œæå®¢ä¸è®¤ç›¸åº”cookieæ›´æ˜“ç†è§£ğŸ˜Š","likes_number":14,"is_delete":false,"is_hidden":false,"ctime":1571752343,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1141464,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6a/d8/228449c9.jpg","nickname":"æå…µ","note":"","ucode":"3F3D3F6E20209E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":471547,"discussion_content":"æˆ‘æŠŠæ•´ä¸ªæµç¨‹å†™ä¸€éï¼š\né¦–å…ˆå‡è®¾ä½ å‘å‡ºç™»å½•InfoQçš„ç«™ç‚¹è¯·æ±‚ï¼Œç„¶ååœ¨InfoQè¿”å›HTTPå“åº”å¤´ç»™æµè§ˆå™¨ï¼ŒInfoQå“åº”å¤´ä¸­çš„æŸäº›set-cookieå­—æ®µå¦‚ä¸‹æ‰€ç¤ºï¼š\nset-cookie: a_value=avalue_xxx; expires=Thu, 21-Nov-2019 03:53:16 GMT; path=/; domain=.infoq.com; SameSite=strict\nset-cookie: b_value=bvalue_xxx; expires=Thu, 21-Nov-2019 03:53:16 GMT; path=/; domain=.infoq.com; SameSite=lax\nset-cookie: c_value=cvaule_xxx; expires=Thu, 21-Nov-2019 03:53:16 GMT; path=/; domain=.infoq.com; SameSite=none\nset-cookie: d_value=dvaule_xxxx; expires=Thu, 21-Nov-2019 03:53:16 GMT; path=/; domain=.infoq.com; \n\n\næˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œ\na_valueçš„SameSiteå±æ€§è®¾ç½®æˆäº†strictï¼Œ\nb_valueçš„SameSiteå±æ€§è®¾ç½®æˆäº†lax\nc_valueçš„SameSiteå±æ€§å€¼è®¾ç½®æˆäº†none\nd_valueæ²¡æœ‰è®¾ç½®SameSiteå±æ€§å€¼\n\n\nå¥½ï¼Œè¿™äº›Cookieè®¾ç½®å¥½ä¹‹åï¼Œå½“ä½ å†æ¬¡åœ¨InfoQçš„é¡µé¢å†…éƒ¨è¯·æ±‚InfoQçš„èµ„æºæ—¶ï¼Œè¿™äº›Cookieä¿¡æ¯éƒ½ä¼šè¢«é™„åŠ åˆ°HTTPçš„è¯·æ±‚å¤´ä¸­ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\ncookie: a_value=avalue_xxx;b_value=bvalue_xxx;c_value=cvaule_xxx;d_value=dvaule_xxxx;\n\nä½†æ˜¯ï¼Œå‡å¦‚ä½ ä»time.geekbang.orgçš„é¡µé¢ä¸­ï¼Œé€šè¿‡aæ ‡ç­¾æ‰“å¼€é¡µé¢ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\n&amp;lt;a href=&amp;quot;https://www.infoq.cn/sendcoin?user=hacker&amp;amp;number=100&amp;quot;&amp;gt;ç‚¹æˆ‘ä¸‹è½½&amp;lt;/a&amp;gt;\nå½“ç”¨æˆ·ç‚¹å‡»æ•´ä¸ªé“¾æ¥çš„æ—¶å€™ï¼Œå› ä¸ºInfoQä¸­a_vauleçš„SameSiteçš„å€¼è®¾ç½®æˆäº†strictï¼Œé‚£ä¹ˆa_vauleçš„å€¼å°†ä¸ä¼šè¢«æºå¸¦åˆ°è¿™ä¸ªè¯·æ±‚çš„HTTPå¤´ä¸­ã€‚\n\nå¦‚æœtime.geekbang.orgçš„é¡µé¢ä¸­ï¼Œæœ‰é€šè¿‡imgæ¥åŠ è½½çš„infoqçš„èµ„æºä»£ç ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\n &amp;lt;img src=&amp;quot;https://www.infoq.cn/sendcoin?user=hacker&amp;amp;number=100&amp;quot;&amp;gt;\né‚£ä¹ˆåœ¨åŠ è½½infoQèµ„æºçš„æ—¶å€™ï¼Œåªä¼šæºå¸¦c_value,å’Œd_valueçš„å€¼ã€‚\n\n\nè¿™æ ·å†™ä¸çŸ¥é“ä½ æ˜ç™½æ²¡æœ‰ï¼Œå¦‚æœè¿˜æœ‰ç–‘æƒ‘æ¬¢è¿ç»§ç»­æé—®ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1571717639,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2378535,"avatar":"https://static001.geekbang.org/account/avatar/00/24/4b/27/d5266f19.jpg","nickname":"æ‹¿æ¥å§","note":"","ucode":"7F4B64285D2AA5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1141464,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6a/d8/228449c9.jpg","nickname":"æå…µ","note":"","ucode":"3F3D3F6E20209E","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":545018,"discussion_content":"çˆ¶å­åŸŸåä¹‹é—´è®¿é—® ä¼šæºå¸¦SameSite: strict|laxçš„cookieå—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641802723,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":471547,"ip_address":""},"score":545018,"extra":""}]},{"author":{"id":2217956,"avatar":"https://static001.geekbang.org/account/avatar/00/21/d7/e4/8154a102.jpg","nickname":"CVç»ƒä¹ ç”Ÿ","note":"","ucode":"E874C7992ECA72","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":322686,"discussion_content":"æ˜ç™½äº†ï¼Œä»åˆ«çš„ç«™ç‚¹è¯·æ±‚ä¼šæœ‰stricté™åˆ¶ï¼Œä»å½“å‰ç«™ç‚¹å°±æ²¡é™åˆ¶","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604800389,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1456392,"avatar":"https://static001.geekbang.org/account/avatar/00/16/39/08/09055b47.jpg","nickname":"æ·¡","note":"","ucode":"6856CA319DE2F0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":38099,"discussion_content":"éå¸¸æ„Ÿè°¢ï¼Œæˆ‘æŠŠæµç¨‹æƒ³é”™äº†ã€‚ã€‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571726275,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":143691,"user_name":"æå°ç™½","can_delete":false,"product_type":"c1","uid":1322576,"ip_address":"","ucode":"7187646DDEACE6","user_header":"https://static001.geekbang.org/account/avatar/00/14/2e/50/240e7beb.jpg","comment_is_top":false,"comment_ctime":1571756608,"is_pvip":false,"discussion_count":13,"race_medal":0,"score":"74586200640","product_id":100033601,"comment_content":"è€å¸ˆï¼Œæˆ‘æƒ³è¯·é—®ä¸€ä¸‹ï¼Œåœ¨æµè§ˆå™¨æ‰“å¼€ç¬¬ä¸‰æ–¹ç«™ç‚¹æ˜¯å¦‚ä½•æ‹¿åˆ°æå®¢æ—¶é—´ç«™ç‚¹cookieçš„ï¼Ÿç¬¬ä¸‰æ–¹ç«™ç‚¹å’Œæå®¢æ—¶é—´çš„ç«™ç‚¹ä¸åŒï¼Œå­˜åœ¨åŒæºç­–ç•¥ï¼Œæ‰€ä»¥è½¬è´¦è¯·æ±‚éªŒè¯cookieä¹Ÿæ˜¯ä¸é€šè¿‡çš„ï¼Œé‚£ä¹ˆCSRFæ˜¯å¦‚ä½•æ”»å‡»çš„å‘¢ï¼Ÿ","like_count":18,"discussions":[{"author":{"id":1624537,"avatar":"https://static001.geekbang.org/account/avatar/00/18/c9/d9/00870178.jpg","nickname":"Slowdive","note":"","ucode":"AF3429CE47C462","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":261559,"discussion_content":"æµè§ˆå™¨å¤„ç†cookieçš„æœºåˆ¶ï¼ŒåšæŸä¸ªåŸŸçš„è¯·æ±‚ï¼Œè‡ªåŠ¨ä¼šæŠŠè¿™ä¸ªåŸŸçš„cookieå¸¦ä¸Šã€‚","likes_number":12,"is_delete":false,"is_hidden":false,"ctime":1588983928,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1391354,"avatar":"https://static001.geekbang.org/account/avatar/00/15/3a/fa/21f64eaa.jpg","nickname":"mimof9","note":"","ucode":"C83B3E2CD62BBD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":230888,"discussion_content":"å±‚ä¸»çš„é—®é¢˜æ¢³ç†ä¸€ä¸‹æ˜¯ä¸¤ä¸ªç‚¹ï¼š1.ç¬¬ä¸‰æ–¹ç½‘ç«™æ˜¯å¦‚ä½•æ‹¿åˆ°cookieçš„ 2.åŒæºç­–ç•¥ä¸ºä»€ä¹ˆä¸èƒ½é˜»æ­¢CSRFã€‚\nåŒæºç­–ç•¥å¹¶æ²¡æœ‰å®Œå…¨é™åˆ¶ç½‘ç«™ä¸èƒ½ä½¿ç”¨éåŒæºçš„èµ„æºï¼Œæ¯”å¦‚å¼•ç”¨ç¬¬ä¸‰æ–¹scriptæ–‡ä»¶ï¼Œå¼•ç”¨ç¬¬ä¸‰æ–¹CSSæ–‡ä»¶ç­‰ï¼ŒåŒæ ·çš„ï¼Œä¹Ÿæ²¡æœ‰é™åˆ¶ä¸€äº›è·¨åŸŸå†™æ“ä½œï¼Œæ¯”å¦‚è¡¨å•æäº¤ã€‚å› æ­¤ï¼Œå…‰é åŒæºç­–ç•¥ä¸èƒ½é˜»æ­¢CSRFã€‚æ˜ç™½äº†å¯ä»¥åœ¨ç¬¬ä¸‰æ–¹ç«™ç‚¹æˆåŠŸå‘é€è·¨åŸŸè¯·æ±‚è¿™ä¸€ç‚¹ä¹‹åï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨å¸¦ä¸Šè¯·æ±‚çš„é‚£ä¸ªç«™ç‚¹çš„cookieã€‚","likes_number":12,"is_delete":false,"is_hidden":false,"ctime":1586778888,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1016299,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/81/eb/04c16c3e.jpg","nickname":"silence_wh","note":"","ucode":"95FB5D6C02EC89","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1391354,"avatar":"https://static001.geekbang.org/account/avatar/00/15/3a/fa/21f64eaa.jpg","nickname":"mimof9","note":"","ucode":"C83B3E2CD62BBD","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":288495,"discussion_content":"æœ‰åˆç†çš„CORSç­–ç•¥çš„è¯ï¼Œä¹Ÿå¯ä»¥é™ä½CSRFçš„é£é™©","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593762331,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":230888,"ip_address":""},"score":288495,"extra":""},{"author":{"id":1039904,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/de/20/03130a39.jpg","nickname":"æ²§æµ·ä¸€å£°ç¬‘","note":"","ucode":"5297F2F4736B63","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1391354,"avatar":"https://static001.geekbang.org/account/avatar/00/15/3a/fa/21f64eaa.jpg","nickname":"mimof9","note":"","ucode":"C83B3E2CD62BBD","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":296918,"discussion_content":"è§£ç­”äº†æˆ‘å¾ˆä¹…çš„ç–‘é—®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596705518,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":230888,"ip_address":""},"score":296918,"extra":""}]},{"author":{"id":1748640,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/ae/a0/707350ef.jpg","nickname":"ç©¿ç§‹è£¤çš„ç”·å­©","note":"","ucode":"D0F48C66377893","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":244736,"discussion_content":"ç¬¬ä¸‰æ–¹cookieäº†è§£ä¸€ä¸‹ã€‚ç¬¬ä¸‰æ–¹ç½‘å€åªéœ€è¦è´Ÿè´£å‘èµ·å³åˆ»æ—¶é—´çš„è½¬è´¦æ¥å£ï¼Œæ¥å£å‘èµ·çš„æ—¶å€™ä¼šå¸¦ä¸Šæµè§ˆå™¨ä¸­ä¿å­˜çš„æœ¬ç«™cookieï¼Œæ­¤æ—¶cookieæ˜¯ä½œä¸ºç¬¬ä¸‰æ–¹cookieå¸¦ä¸Šçš„ï¼Œæ‰€ä»¥ç¬¬ä¸‰æ–¹å‹æ ¹ä¸éœ€è¦è·å–ä½ çš„cookieï¼Œæµè§ˆå™¨è‡ªåŠ¨ä¼šå¸¦ä¸Šã€‚è¿™ä¹Ÿæ˜¯samesiteçš„ä½œç”¨ï¼Œç¦æ­¢æœ¬cookieä½œä¸ºç¬¬ä¸‰æ–¹cookieã€‚","likes_number":10,"is_delete":false,"is_hidden":false,"ctime":1587626034,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1005391,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","nickname":"ä¸€æ­¥","note":"","ucode":"73CEA468CE70C3","race_medal":1,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":38829,"discussion_content":"åœ¨ç¬¬ä¸‰æ–¹ç«™ç‚¹å¯ä»¥è¯·æ±‚ç›®æ ‡çš„æœåŠ¡å™¨å™¨åœ°å€ï¼Œè¿™æ—¶ä¼šå¸¦ä¸Šç›®æ ‡ç«™ç‚¹çš„ç”¨æˆ·Cookie ç™»é™†æ€ä¿¡æ¯","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1571839749,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1782777,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/33/f9/50b76abe.jpg","nickname":"AMIR","note":"","ucode":"65142D9669071B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1005391,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","nickname":"ä¸€æ­¥","note":"","ucode":"73CEA468CE70C3","race_medal":1,"user_type":1,"is_pvip":true},"discussion":{"id":113801,"discussion_content":"çœŸçš„æ˜¯è¿™æ ·çš„å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577933332,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":38829,"ip_address":""},"score":113801,"extra":""},{"author":{"id":1005391,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","nickname":"ä¸€æ­¥","note":"","ucode":"73CEA468CE70C3","race_medal":1,"user_type":1,"is_pvip":true},"reply_author":{"id":1782777,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/33/f9/50b76abe.jpg","nickname":"AMIR","note":"","ucode":"65142D9669071B","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":113855,"discussion_content":"å¦‚æœä½ æ²¡æœ‰è®¾ç½®ä¸€äº›é™åˆ¶ï¼Œæ˜¯è¿™æ ·çš„ï¼Œè‡ªå·±å¯ä»¥è¯•éªŒä¸€ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577937309,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":113801,"ip_address":""},"score":113855,"extra":""}]},{"author":{"id":1121775,"avatar":"https://static001.geekbang.org/account/avatar/00/11/1d/ef/00874090.jpg","nickname":"æå¤§å†›","note":"","ucode":"5B01D44F2F9248","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":217826,"discussion_content":"ç¬¬ä¸‰æ–¹ç½‘é¡µå¯ä»¥é€šè¿‡ form è¡¨å•çš„å½¢å¼æäº¤ï¼Œæµè§ˆå™¨ä¸ä¼šé™åˆ¶formè¡¨å•çš„æäº¤ï¼Œä¸ä¼šæœ‰è·¨åŸŸ","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1585581421,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1782777,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/33/f9/50b76abe.jpg","nickname":"AMIR","note":"","ucode":"65142D9669071B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":113761,"discussion_content":"æœ‰ç‚¹æ„æ€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577930964,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1022568,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/9a/68/92caeed6.jpg","nickname":"Shine","note":"","ucode":"C8C617B87C63C7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":39001,"discussion_content":"æˆ‘ä¹Ÿå¾ˆå›°æƒ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571877509,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1626759,"avatar":"https://static001.geekbang.org/account/avatar/00/18/d2/87/e5f78961.jpg","nickname":"äºä½ ","note":"","ucode":"6A3F8C38874410","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":38553,"discussion_content":"æˆ‘ä¹Ÿæ˜¯æ²¡å¼„æ‡‚ï¼Œè·¨åŸŸé™åˆ¶ç¬¬ä¸‰æ–¹ç½‘ç«™æ˜¯ä¸å¯èƒ½æ‹¿åˆ°cookieæˆ–è€…å…¶ä»–çš„ç½‘ç«™ä¿¡æ¯ï¼Œé‚£è¿™ä¸ªuserä¿¡æ¯æ˜¯æ€ä¹ˆæ¥çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571802863,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1272789,"avatar":"https://static001.geekbang.org/account/avatar/00/13/6b/d5/0e4b70a2.jpg","nickname":"Sean","note":"","ucode":"BC0715BF423613","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1626759,"avatar":"https://static001.geekbang.org/account/avatar/00/18/d2/87/e5f78961.jpg","nickname":"äºä½ ","note":"","ucode":"6A3F8C38874410","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":56629,"discussion_content":"æˆ‘çš„ç†è§£æ˜¯ï¼Œè·¨åŸŸé™åˆ¶ç¬¬ä¸‰æ–¹ç«™ç‚¹è·å–cookieä¿¡æ¯ï¼Œé™åˆ¶çš„æ˜¯ç¬¬ä¸‰æ–¹ç«™ç‚¹ä»¥ä»£ç çš„å½¢å¼è¯»å–åˆ°cookieä¿¡æ¯ï¼›\nä½†æ˜¯ä½ åœ¨ç¬¬ä¸‰æ–¹ç«™ç‚¹ä¸Šå‘ç›®æ ‡ç«™ç‚¹å‘èµ·è¯·æ±‚çš„æ—¶å€™ï¼Œå¦‚æœä½ æ›¾ç»ç™»å½•è¿‡ç›®æ ‡ç«™ç‚¹ï¼Œæµè§ˆå™¨ä¸­å­˜å‚¨è¿™ç›®æ ‡ç«™ç‚¹çš„cookieï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨å¸®ä½ æŠŠè¿™äº›cookieå¸¦ä¸Šçš„ã€‚\né»‘å®¢æ‹¿ä¸åˆ°ä½†æ˜¯å¯ä»¥åˆ©ç”¨cookie\næ„Ÿè§‰åƒæ˜¯æµè§ˆå™¨çš„è¿™ä¸ªcookieæœºåˆ¶ï¼Œå¸®åŠ©äº†csrfçš„æ”»å‡»ã€‚","likes_number":21,"is_delete":false,"is_hidden":false,"ctime":1574504529,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":38553,"ip_address":""},"score":56629,"extra":""}]}]},{"had_liked":false,"id":143374,"user_name":"è¨±æ•²æ•²","can_delete":false,"product_type":"c1","uid":1046681,"ip_address":"","ucode":"6486466820E7BF","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f8/99/8e760987.jpg","comment_is_top":false,"comment_ctime":1571700750,"is_pvip":false,"replies":[{"id":"55384","content":"ä¸»è¦æ˜¯æ ¹æ®è¿™å‡ å¹´å·¥ä½œç»éªŒå’Œæµè§ˆå™¨æ–‡æ¡£ã€æºç æ€»ç»“å‡ºæ¥çš„ï¼Œå› ä¸ºç»´æŠ¤ä¸€ä¸ªæ—¥æ´»è·ƒå‡ åƒä¸‡çš„æµè§ˆå™¨ï¼Œèƒ½å¸¦æ¥å¤§é‡çš„æµé‡ï¼Œè€Œæµé‡å°±æ˜¯é‡‘é’±ï¼Œå› æ­¤æˆ‘ä»¬çš„æµè§ˆå™¨ä¼šé­å—åˆ°å„ç§ç±»å‹çš„æ”»å‡»ï¼Œæ‰€ä»¥æˆ‘ä»¬æœ‰å¾ˆå¤§ä¸€éƒ¨åˆ†æ—¶é—´éƒ½æ˜¯åœ¨å¤„ç†æ”»å‡»ï¼<br><br>å½“ç„¶ä¸ºäº†å†™è¿™ä¸ªä¸“æ ï¼Œç½‘ä¸Šwebå®‰å…¨ç›¸å…³çš„ä¹¦ç±æˆ‘ä¹Ÿä¹°äº†å¥½å¤šï¼ŒåŸºæœ¬éƒ½çœ‹äº†ä¸€åœˆï¼Œä½†æ˜¯æœ‰ä¸€äº›é—®é¢˜ï¼š<br>ç¬¬ä¸€æ˜¯è¿™äº›ä¹¦ç±éƒ½æœ‰ä¸€äº›å¹´é™äº†ï¼Œé‡Œé¢çš„çŸ¥è¯†æ¯”è¾ƒæ»åï¼<br>ç¬¬äºŒï¼Œå¤§å¤šæ•°å’Œå‰ç«¯å…³ç³»ä¸æ˜¯å¤ªå¤§<br>ç¬¬ä¸‰ï¼Œå¤§å¤šæ•°å†™çš„æ¯”è¾ƒé›¶ç¢<br><br><br>ä½ ä»¬å¦‚æœå‘ç°æœ‰å¥½çš„webå®‰å…¨ç›¸å…³çš„ä¹¦ç±ï¼Œä¹Ÿå¯ä»¥æ¨èä¸‹ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"æå…µ","uid":"1141464","ctime":1571708002,"ip_address":"","comment_id":143374,"utype":1}],"discussion_count":2,"race_medal":0,"score":"57406275598","product_id":100033601,"comment_content":"è€å¸ˆï¼Œè¿™æ–¹é¢æœ‰æ¯”è¾ƒå¥½çš„èµ„æ–™æˆ–æ˜¯ä¹¦å˜›ï¼Ÿæƒ³å¤šäº†è§£ä¸€ä¸‹","like_count":14,"discussions":[{"author":{"id":1141464,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6a/d8/228449c9.jpg","nickname":"æå…µ","note":"","ucode":"3F3D3F6E20209E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":471506,"discussion_content":"ä¸»è¦æ˜¯æ ¹æ®è¿™å‡ å¹´å·¥ä½œç»éªŒå’Œæµè§ˆå™¨æ–‡æ¡£ã€æºç æ€»ç»“å‡ºæ¥çš„ï¼Œå› ä¸ºç»´æŠ¤ä¸€ä¸ªæ—¥æ´»è·ƒå‡ åƒä¸‡çš„æµè§ˆå™¨ï¼Œèƒ½å¸¦æ¥å¤§é‡çš„æµé‡ï¼Œè€Œæµé‡å°±æ˜¯é‡‘é’±ï¼Œå› æ­¤æˆ‘ä»¬çš„æµè§ˆå™¨ä¼šé­å—åˆ°å„ç§ç±»å‹çš„æ”»å‡»ï¼Œæ‰€ä»¥æˆ‘ä»¬æœ‰å¾ˆå¤§ä¸€éƒ¨åˆ†æ—¶é—´éƒ½æ˜¯åœ¨å¤„ç†æ”»å‡»ï¼\n\nå½“ç„¶ä¸ºäº†å†™è¿™ä¸ªä¸“æ ï¼Œç½‘ä¸Šwebå®‰å…¨ç›¸å…³çš„ä¹¦ç±æˆ‘ä¹Ÿä¹°äº†å¥½å¤šï¼ŒåŸºæœ¬éƒ½çœ‹äº†ä¸€åœˆï¼Œä½†æ˜¯æœ‰ä¸€äº›é—®é¢˜ï¼š\nç¬¬ä¸€æ˜¯è¿™äº›ä¹¦ç±éƒ½æœ‰ä¸€äº›å¹´é™äº†ï¼Œé‡Œé¢çš„çŸ¥è¯†æ¯”è¾ƒæ»åï¼\nç¬¬äºŒï¼Œå¤§å¤šæ•°å’Œå‰ç«¯å…³ç³»ä¸æ˜¯å¤ªå¤§\nç¬¬ä¸‰ï¼Œå¤§å¤šæ•°å†™çš„æ¯”è¾ƒé›¶ç¢\n\n\nä½ ä»¬å¦‚æœå‘ç°æœ‰å¥½çš„webå®‰å…¨ç›¸å…³çš„ä¹¦ç±ï¼Œä¹Ÿå¯ä»¥æ¨èä¸‹ï¼","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1571708002,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1626734,"avatar":"","nickname":"Geek_f74777","note":"","ucode":"8B512972A145A7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":38010,"discussion_content":"æ¨èå¯ä»¥çœ‹çœ‹ã€ŠReal-World Bug Huntingã€‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571713779,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":143401,"user_name":"è“é…é¸¡","can_delete":false,"product_type":"c1","uid":1348738,"ip_address":"","ucode":"C79A7CA8885B7C","user_header":"https://static001.geekbang.org/account/avatar/00/14/94/82/d0a417ba.jpg","comment_is_top":false,"comment_ctime":1571705661,"is_pvip":false,"replies":[{"id":"55382","content":"å¦‚æœæ˜¯CSRFæ”»å‡»ï¼Œé‚£ä¹ˆé»‘å®¢æ˜¯æ‹¿ä¸åˆ°å—å®³è€…ç«™ç‚¹æ•°æ®çš„ã€‚<br><br>ä½†æ˜¯é»‘å®¢ä¼šåœ¨ä»–çš„Aç«™ç‚¹ä¸­è°ƒç”¨å—å®³è€…Bç«™ç‚¹çš„httpæ¥å£ï¼Œè¿™äº›æ¥å£å¯ä»¥æ˜¯è½¬è´¦ï¼Œåˆ å¸–æˆ–è€…è®¾ç½®ç­‰ã€‚<br><br>è¿™ä¸ªè¿‡ç¨‹ä¸­ä½ éœ€è¦æ³¨æ„ä¸€ç‚¹ï¼Œåœ¨é»‘å®¢Aç«™ç‚¹ä¸­è°ƒç”¨å—å®³è€…Bç«™ç‚¹çš„httpæ¥å£æ—¶ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œæµè§ˆå™¨ä¾ç„¶ä¼šæŠŠå—å®³è€…çš„Cookieç­‰ä¿¡æ¯æ•°æ®å‘é€åˆ°å—å®³è€…çš„Bç«™ç‚¹ï¼Œã€æ³¨æ„è¿™é‡Œå¹¶ä¸æ˜¯é»‘å®¢çš„Aç«™ç‚¹ã€‘ã€‚<br><br>å¦‚æœBç«™ç‚¹å­˜åœ¨æ¼æ´çš„è¯ï¼Œé‚£ä¹ˆé»‘å®¢å°±ä¼šæ”»å‡»æˆåŠŸï¼Œæ¯”å¦‚å°†å—å®³è€…çš„é‡‘å¸è½¬å‡ºå»äº†ï¼  <br><br>è¿™æ ·è§£é‡Šä¸çŸ¥é“é—®ä½ æ¸…æ¥šäº†æ²¡æœ‰ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"æå…µ","uid":"1141464","ctime":1571707399,"ip_address":"","comment_id":143401,"utype":1}],"discussion_count":5,"race_medal":0,"score":"44521378621","product_id":100033601,"comment_content":"æœ‰ä¸ªç–‘é—®ï¼š<br>same origin policyä¸æ˜¯ç¡®ä¿äº†ä¸åŒåŸŸåæ—¶é—´ä¸å¯ä»¥è®¿é—®æ•°æ®çš„å—ï¼Ÿ é‚£ç¬¬ä¸‰æ–¹ç«™ç‚¹å¦‚ä½•æ‹¿åˆ°cookieå’Œsessionï¼Ÿ<br><br>è°¢è°¢è€å¸ˆğŸ™","like_count":11,"discussions":[{"author":{"id":1141464,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6a/d8/228449c9.jpg","nickname":"æå…µ","note":"","ucode":"3F3D3F6E20209E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":471516,"discussion_content":"å¦‚æœæ˜¯CSRFæ”»å‡»ï¼Œé‚£ä¹ˆé»‘å®¢æ˜¯æ‹¿ä¸åˆ°å—å®³è€…ç«™ç‚¹æ•°æ®çš„ã€‚\n\nä½†æ˜¯é»‘å®¢ä¼šåœ¨ä»–çš„Aç«™ç‚¹ä¸­è°ƒç”¨å—å®³è€…Bç«™ç‚¹çš„httpæ¥å£ï¼Œè¿™äº›æ¥å£å¯ä»¥æ˜¯è½¬è´¦ï¼Œåˆ å¸–æˆ–è€…è®¾ç½®ç­‰ã€‚\n\nè¿™ä¸ªè¿‡ç¨‹ä¸­ä½ éœ€è¦æ³¨æ„ä¸€ç‚¹ï¼Œåœ¨é»‘å®¢Aç«™ç‚¹ä¸­è°ƒç”¨å—å®³è€…Bç«™ç‚¹çš„httpæ¥å£æ—¶ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œæµè§ˆå™¨ä¾ç„¶ä¼šæŠŠå—å®³è€…çš„Cookieç­‰ä¿¡æ¯æ•°æ®å‘é€åˆ°å—å®³è€…çš„Bç«™ç‚¹ï¼Œã€æ³¨æ„è¿™é‡Œå¹¶ä¸æ˜¯é»‘å®¢çš„Aç«™ç‚¹ã€‘ã€‚\n\nå¦‚æœBç«™ç‚¹å­˜åœ¨æ¼æ´çš„è¯ï¼Œé‚£ä¹ˆé»‘å®¢å°±ä¼šæ”»å‡»æˆåŠŸï¼Œæ¯”å¦‚å°†å—å®³è€…çš„é‡‘å¸è½¬å‡ºå»äº†ï¼  \n\nè¿™æ ·è§£é‡Šä¸çŸ¥é“é—®ä½ æ¸…æ¥šäº†æ²¡æœ‰ï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1571707399,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1684882,"avatar":"https://static001.geekbang.org/account/avatar/00/19/b5/92/ac0d4705.jpg","nickname":"geek_syk","note":"","ucode":"1CAA40765D1F23","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":38008,"discussion_content":"åŒæºæ”¿ç­–é™åˆ¶çš„æ˜¯ XMLHttpRequest è¯·æ±‚ï¼Œè€Œåƒ <script src=&#34;http://.....&#34;></script> è¿™ç§å†…åµŒçš„è¯·æ±‚ä¸å±äº XMLHttpRequestï¼Œè€Œæ˜¯ JSONPï¼Œæ‰€ä»¥ä¸ä¼šå—é™","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1571713051,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1348738,"avatar":"https://static001.geekbang.org/account/avatar/00/14/94/82/d0a417ba.jpg","nickname":"è“é…é¸¡","note":"","ucode":"C79A7CA8885B7C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":37984,"discussion_content":"è°¢è°¢è€å¸ˆçš„ç­”å¤ï¼Œå¯æˆ‘è¿˜æ˜¯æœ‰ä¸€äº›ä¸è§£ã€‚\n\næ¯”æ–¹è¯´é»‘å®¢åœ¨Aç«™ç‚¹è°ƒç”¨Bç«™ç‚¹çš„httpæ¥å£ï¼ŒåŒæºç­–ç•¥ä¸æ˜¯ä¼šé˜»æ­¢è¿™ä¸ªhttpè¯·æ±‚å—ï¼Ÿ\n\nå¦‚æœBç«™ç‚¹çš„æœåŠ¡å™¨è®¾ç½®äº†Corså…è®¸Aç«™ç‚¹è¯·æ±‚ã€‚\næˆ‘å¯¹cookieçš„ç†è§£æ˜¯ï¼šâ€œä»–æ˜¯å±äºä¸€ä¸ªç«™ç‚¹çš„æ•°æ®â€ï¼Œ ä¸åŒç«™ç‚¹æ€ä¹ˆå¯ä»¥è®¿é—®å…¶ä»–ç«™ç‚¹çš„æ•°æ®å‘¢ï¼Ÿ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571708849,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1456392,"avatar":"https://static001.geekbang.org/account/avatar/00/16/39/08/09055b47.jpg","nickname":"æ·¡","note":"","ucode":"6856CA319DE2F0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1348738,"avatar":"https://static001.geekbang.org/account/avatar/00/14/94/82/d0a417ba.jpg","nickname":"è“é…é¸¡","note":"","ucode":"C79A7CA8885B7C","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":38103,"discussion_content":"æˆ‘çš„ç†è§£ï¼šCookieæ˜¯å±äºä¸€ä¸ªç«™ç‚¹çš„æ•°æ®ï¼Œæ‰€ä»¥ä½ åœ¨Aé¡µé¢é‡Œæ˜¯ç›´æ¥æ‹¿ä¸åˆ°Bçš„Cookieï¼›ä½†æ˜¯åœ¨Aé¡µé¢é‡Œå‘Bç«™è¯·æ±‚çš„æ—¶å€™ï¼Œé»˜è®¤æµè§ˆå™¨ä¼šç»™å¡ä¸Šï¼Œåœ¨æœåŠ¡å™¨çœ‹æ¥è¿™å°±æ˜¯ä¸€ä¸ªåˆæ³•çš„è¯·æ±‚ï¼ˆè¯¥è¦çš„æ•°æ®å•¥éƒ½æœ‰ï¼‰ã€‚æ‰€ä»¥å°±æœ‰äº†è®¾ç½®Cookie SameSiteçš„ç­–ç•¥æ¥é˜²CRSFæ”»å‡»","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1571727002,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":37984,"ip_address":""},"score":38103,"extra":""},{"author":{"id":1348738,"avatar":"https://static001.geekbang.org/account/avatar/00/14/94/82/d0a417ba.jpg","nickname":"è“é…é¸¡","note":"","ucode":"C79A7CA8885B7C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1456392,"avatar":"https://static001.geekbang.org/account/avatar/00/16/39/08/09055b47.jpg","nickname":"æ·¡","note":"","ucode":"6856CA319DE2F0","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":38233,"discussion_content":"è°¢è°¢å›ç­”ï¼Œ ä»Šå¤©å»çœ‹äº†ä¸‹httpçš„cookieæœºåˆ¶ï¼Œ æ˜ç™½äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571748728,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":38103,"ip_address":""},"score":38233,"extra":""}]}]},{"had_liked":false,"id":157028,"user_name":"æ±Ÿè°¢æœ¨","can_delete":false,"product_type":"c1","uid":1563403,"ip_address":"","ucode":"E1B1B0F0F03D41","user_header":"https://static001.geekbang.org/account/avatar/00/17/db/0b/f0ded153.jpg","comment_is_top":false,"comment_ctime":1575015037,"is_pvip":false,"replies":[{"id":"60301","content":"æ˜¯çš„ï¼Œé’ˆå¯¹äºè¯·æ±‚çš„ï¼Œæ¯”å¦‚åŒä¸€ä¸ªæµè§ˆå™¨æ‰“å¼€ä¸¤ä¸ªç›¸åŒé¡µé¢ï¼Œé‚£ä¹ˆæœåŠ¡å™¨ä¸ºè¿™ä¸¤ä¸ªé¡µé¢ç”Ÿæˆçš„csrf tokenéƒ½æ˜¯ä¸åŒçš„","user_name":"ä½œè€…å›å¤","user_name_real":"æå…µ","uid":"1141464","ctime":1575081713,"ip_address":"","comment_id":157028,"utype":1}],"discussion_count":4,"race_medal":0,"score":"35934753405","product_id":100033601,"comment_content":"CSRF TOKENç±»ä¼¼äºcookie, éƒ½æ˜¯å­˜å‚¨ç”¨æˆ·ä¿¡æ¯ï¼Œè€Œæ­¤ç”¨æˆ·ä¿¡æ¯åªå­˜å‚¨åœ¨å½“å‰ä½ è¯·æ±‚çš„ç«™ç‚¹ï¼Œè€Œä¸æ˜¯æµè§ˆå™¨ï¼Œæ‰€ä»¥ä¸åŒçš„æ ‡ç­¾é¡µé¢ï¼Œæˆ–ä¸åŒæ¬¡çš„è¯·æ±‚æ˜¯ä¸å…±äº«æ­¤ç”¨æˆ·ä¿¡æ¯çš„ï¼Œæ‰€ä»¥è§„é¿äº†cookieæ‰€å¸¦æ¥çš„çš„æ¼æ´ï¼Œè€å¸ˆï¼Œæˆ‘è¿™æ ·ç†è§£å¯¹ï¼Ÿ","like_count":9,"discussions":[{"author":{"id":1141464,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6a/d8/228449c9.jpg","nickname":"æå…µ","note":"","ucode":"3F3D3F6E20209E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476308,"discussion_content":"æ˜¯çš„ï¼Œé’ˆå¯¹äºè¯·æ±‚çš„ï¼Œæ¯”å¦‚åŒä¸€ä¸ªæµè§ˆå™¨æ‰“å¼€ä¸¤ä¸ªç›¸åŒé¡µé¢ï¼Œé‚£ä¹ˆæœåŠ¡å™¨ä¸ºè¿™ä¸¤ä¸ªé¡µé¢ç”Ÿæˆçš„csrf tokenéƒ½æ˜¯ä¸åŒçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575081713,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2840430,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/57/6e/0010eec8.jpg","nickname":"æœˆå…‰æ—åœ°","note":"","ucode":"827DFEBA385367","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1141464,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6a/d8/228449c9.jpg","nickname":"æå…µ","note":"","ucode":"3F3D3F6E20209E","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":534884,"discussion_content":"é‚£å¦‚æœé»‘å®¢çŸ¥é“äº†è¿™ä¸ªé€»è¾‘ï¼Œåœ¨csrfé¡µé¢ä¹Ÿåšä¸¤æ¬¡è¯·æ±‚ï¼Œä¸€æ¬¡æ‹¿csrf tokenï¼Œä¸€æ¬¡åšcsrfï¼Œä¸å°±ç»•è¿‡äº†ã€‚æœ¬è´¨ä¸Šæ˜¯å› ä¸ºè¿™ä¸ªç«™ç‚¹æ¥å£æ²¡æœ‰é™åˆ¶è·¨åŸŸæˆ–è€…cookieæ²¡æœ‰è®¾ç½®å¥½samesiteï¼Œæˆ–è€…å¹²è„†ä¸è¦ç”¨cookieï¼ŒæŠŠç”¨æˆ·ä¿¡æ¯æ”¾è¿›sessionæˆ–è€…localstorageã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1638288295,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":476308,"ip_address":""},"score":534884,"extra":""}]},{"author":{"id":2530802,"avatar":"https://static001.geekbang.org/account/avatar/00/26/9d/f2/a93285b0.jpg","nickname":"Dwayne","note":"","ucode":"17714CF4011350","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":382544,"discussion_content":"csrfæ˜¯æ€ä¹ˆç”Ÿæˆçš„ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625628480,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1592279,"avatar":"https://static001.geekbang.org/account/avatar/00/18/4b/d7/f46c6dfd.jpg","nickname":"William Ning","note":"","ucode":"4DB8D05E69E5F3","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":352305,"discussion_content":"æ²¡çœ‹æ˜ç™½, æ˜¯ä¸€ä¸ªcsrf_tokenåœ¨åŒä¸€ä¸ªé¡µé¢æœ€å¤šåªèƒ½ç”¨äºä¸€æ¬¡è¯·æ±‚?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614677792,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":229093,"user_name":"LIKE","can_delete":false,"product_type":"c1","uid":1254252,"ip_address":"","ucode":"9DAB7F9051648A","user_header":"https://static001.geekbang.org/account/avatar/00/13/23/6c/82ba5e1f.jpg","comment_is_top":false,"comment_ctime":1592895966,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"31657667038","product_id":100033601,"comment_content":"1.CSRFæ˜¯ä»€ä¹ˆï¼š è·¨åŸŸè¯·æ±‚ä¼ªé€ ï¼Œé€šè¿‡ç¬¬ä¸‰æ–¹ç«™ç‚¹æ¨¡æ‹Ÿç”¨æˆ·è¯·æ±‚è¡Œä¸º<br>2.å¦‚ä½•é˜²èŒƒCSRFæ”»å‡»ï¼š  æœ¬è´¨å°±æ˜¯è¯†åˆ«å®¢æˆ·ç«¯æ“ä½œæ˜¯å¦æ˜¯ç”¨æˆ·æœ¬äººæ“ä½œ<br>\t1&gt;.ä¸šåŠ¡ä¸Šé’ˆå¯¹é‡è¦æ“ä½œï¼Œéœ€è¦å†æ¬¡éªŒè¯ï¼Œå¦‚çŸ­ä¿¡éªŒè¯ç ç­‰ï¼Œç¡®ä¿ä½ æ˜¯ä½ <br>\t2&gt;.å…¬å¸å†…éƒ¨åšå¥½æ–‡æ¡£ç®¡ç†ï¼šæºç ã€æ¥å£æ–‡æ¡£ç­‰ï¼Œå‡å°‘ä¿¡æ¯æ³„éœ²<br>\t3&gt;.æœåŠ¡ç«¯é’ˆå¯¹cookieã€sessionç­‰æ•æ„Ÿå¤´ä¿¡æ¯è®¾ç½®samesite<br>\t4&gt;.æ•æ„Ÿæ¥å£æ•°æ®é‡‡ç”¨åŠ å¯†ä¼ è¾“ã€æ–°å¢æ—¶æ•ˆæ€§æˆ–éšæœºå‚æ•°ï¼Œå¢åŠ è¯·æ±‚ä¿¡æ¯ä¸ç¡®å®šæ€§ï¼Œæ¯”å¦‚ï¼šCSRF Tokenå‚æ•°","like_count":7},{"had_liked":false,"id":143518,"user_name":"Chao","can_delete":false,"product_type":"c1","uid":1108745,"ip_address":"","ucode":"DD7742F5537521","user_header":"https://static001.geekbang.org/account/avatar/00/10/eb/09/ba5f0135.jpg","comment_is_top":false,"comment_ctime":1571723811,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"23046560291","product_id":100033601,"comment_content":"chrome é»˜è®¤å¯ç”¨ SameSite äº†","like_count":5},{"had_liked":false,"id":275694,"user_name":"ç”°","can_delete":false,"product_type":"c1","uid":1669795,"ip_address":"","ucode":"2CC99CC96D59CC","user_header":"https://static001.geekbang.org/account/avatar/00/19/7a/a3/19d9bf76.jpg","comment_is_top":false,"comment_ctime":1611647833,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14496549721","product_id":100033601,"comment_content":"ç»ˆäºææ‡‚csrfäº†ï¼ˆä¹‹å‰çœ‹æ˜é‡‘ã€çœ‹ä¹¦æ²¡æœ‰ç¤ºä¾‹ï¼‰ï¼Œå­¦ä¹ ç½‘ç»œè¦ç»“åˆäº‹ä¾‹ï¼Œæœ‰äº†äº‹ä¾‹å°±èƒ½é€šä¿—æ˜“æ‡‚","like_count":3},{"had_liked":false,"id":152662,"user_name":"lee","can_delete":false,"product_type":"c1","uid":1134107,"ip_address":"","ucode":"F931BF01A04F1E","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJrZb9pm07aickG3dVFBd2yhk5J2clztUniaMNFsjpHu7uacfpGhleKYbgicEnwF5MusKNFKLTUUAYKg/132","comment_is_top":false,"comment_ctime":1574058727,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"14458960615","product_id":100033601,"comment_content":"åœ¨å‰åç«¯åˆ†ç¦»çš„é¡¹ç›®é‡Œé¢ï¼Œæ˜¯ä¸æ˜¯æœåŠ¡å™¨ç«¯è®¾ç½®äº†access-control-allow-ariginåªå…è®¸å—ä¿¡ä»»çš„ç«™ç‚¹è®¿é—®æ¥å£ä¹Ÿå¯ä»¥é˜²æ­¢CSRFæ”»å‡»ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1201350,"avatar":"https://static001.geekbang.org/account/avatar/00/12/54/c6/c2481790.jpg","nickname":"lisiur","note":"","ucode":"CEB2DBCE29CAA7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":245904,"discussion_content":"å¦ä¸€æ–¹é¢ï¼ŒåŒæºç­–ç•¥åªæ˜¯é˜»æ­¢æµè§ˆå™¨è·å–å“åº”æ•°æ®ï¼Œæ²¡æœ‰é˜»æ­¢å…¶å‘é€è¯·æ±‚","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1587709959,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1201350,"avatar":"https://static001.geekbang.org/account/avatar/00/12/54/c6/c2481790.jpg","nickname":"lisiur","note":"","ucode":"CEB2DBCE29CAA7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":245899,"discussion_content":"åº”è¯¥æ²¡ä½œç”¨ï¼Œcsrf æ˜¯é€šè¿‡ img form ç­‰æ„é€ è¯·æ±‚å‘é€çš„ï¼Œè¿™äº›è¯·æ±‚ä¸å—è·¨åŸŸé™åˆ¶","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1587709681,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":237164,"user_name":"æ˜µç§°","can_delete":false,"product_type":"c1","uid":1486529,"ip_address":"","ucode":"38C14BF83EAC1C","user_header":"https://static001.geekbang.org/account/avatar/00/16/ae/c1/76a9237f.jpg","comment_is_top":false,"comment_ctime":1595695155,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10185629747","product_id":100033601,"comment_content":"ç›®å‰ä¸ºæ­¢æ¯”è¾ƒå¥½çš„é˜²æ­¢csrfç­–ç•¥<br>1ï¼šä¸ç”¨cookie,ç™»å½•æ€æ”¹ç”¨token,è¿™æ ·å°±ä¸ä¼šæœ‰csrfæ”»å‡»;<br>2ï¼šé‡è¦æ¥å£åŠ éªŒè¯å‚æ•°ï¼šå¦‚çŸ­ä¿¡éªŒè¯ç ã€è°·æ­ŒéªŒè¯ç éªŒè¯ã€‚å³ä½¿å®ƒå‘èµ·è¯·æ±‚äº†ï¼Œæ²¡æœ‰ç”¨æˆ·æœ¬èº«çš„æ‰‹æœºéªŒè¯ç ã€è°·æ­ŒéªŒè¯ç ä¹Ÿé€šè¿‡ä¸äº†è¿™æ¬¡è¯·æ±‚ã€‚","like_count":2},{"had_liked":false,"id":285726,"user_name":"Xx","can_delete":false,"product_type":"c1","uid":2514423,"ip_address":"","ucode":"0BE62D47E42B0E","user_header":"","comment_is_top":false,"comment_ctime":1616991698,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5911958994","product_id":100033601,"comment_content":"æœ€åæ€»ç»“é‡Œçš„è¿™æ®µ<br>&quot;ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œæˆ‘ä»¬å¼•å…¥äº† CSP æ¥é™åˆ¶é¡µé¢ä»»æ„å¼•å…¥å¤–éƒ¨èµ„æºï¼Œå¼•å…¥äº† HttpOnly æœºåˆ¶æ¥ç¦æ­¢ XMLHttpRequest æˆ–è€… Fetch å‘é€ä¸€äº›å…³é”® Cookieï¼Œå¼•å…¥äº† SameSite å’Œ Origin æ¥é˜²æ­¢ CSRF æ”»å‡»ã€‚&quot;<br>å¥½åƒä¸å¤ªæ­£ç¡®ï¼Ÿ HttpOnlyä¸æ˜¯ç”¨æ¥é™åˆ¶é™¤Httpä¹‹å¤–çš„æ¸ é“æ¥è·å–cookieå—ï¼Ÿ SameSiteå±æ€§æ‰æ˜¯ç”¨æ¥é™åˆ¶Ajaxè¯·æ±‚å¯¹äºcookieçš„æƒé™çš„å§ï¼Ÿ","like_count":1},{"had_liked":false,"id":270960,"user_name":"ä¸äºŒ","can_delete":false,"product_type":"c1","uid":1253124,"ip_address":"","ucode":"B018B32EDB44E5","user_header":"https://static001.geekbang.org/account/avatar/00/13/1f/04/1cddf65b.jpg","comment_is_top":false,"comment_ctime":1609330310,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5904297606","product_id":100033601,"comment_content":"å¸Œæœ›è€å¸ˆå¸®å¿™è§£ç­”ä¸€ä¸‹ï¼Œç–‘é—®ç‚¹æ˜¯ï¼Œå‘èµ·csrfæ”»å‡»ï¼Œä¸ºä»€ä¹ˆä¸€å®šè¦ç”¨æˆ·è·³è½¬åˆ°ç¬¬ä¸‰æ–¹é¡µé¢ï¼Œå†è¯·æ±‚å½“å‰åŸŸåçš„è¯·æ±‚ï¼Œæ„Ÿè§‰ç›´æ¥ç»“åˆXSSä¸æ›´å¥½ï¼Ÿåˆ©ç”¨XSSåœ¨æµè§ˆå™¨ç«¯æ³¨å…¥æ¶æ„ä»£ç ï¼Œå½“ç„¶æ¶æ„ä»£ç çš„å†…å®¹å°±æ˜¯ç›´æ¥å‘èµ·è¯·æ±‚ï¼Œä¾‹å¦‚è½¬è´¦çš„ä¾‹å­ï¼Œç›´æ¥åœ¨æ¶æ„ä»£ç å°±æ˜¯è½¬è´¦åˆ°æŒ‡å®šç”¨æˆ·ï¼Œè¿™æ ·æ„Ÿè§‰ä¹Ÿå¯ä»¥å‘€ã€‚","like_count":1,"discussions":[{"author":{"id":1269541,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/u1TI6W7VyYJmRqGoyY9dvHU8icxdZT6LVbsWLibWBIj3Tia8p2Ipia8DjoiagWKMmFib1g9KTNcvagThaLNialKk4VaCw/132","nickname":"Geek_0a1c28","note":"","ucode":"FAFA866B841001","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":352266,"discussion_content":"é‚£é¦–å…ˆè¯¥ç½‘ç«™å¾—æœ‰XSSæ¼æ´æ‰è¡Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614669866,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":173109,"user_name":"çˆ±çœ‹ä¹¦çš„èœ—ç‰›","can_delete":false,"product_type":"c1","uid":1115276,"ip_address":"","ucode":"02A280A16F162D","user_header":"https://static001.geekbang.org/account/avatar/00/11/04/8c/ce36a2d0.jpg","comment_is_top":false,"comment_ctime":1579425440,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"5874392736","product_id":100033601,"comment_content":"â€œå¦‚æœæ˜¯ä»ç¬¬ä¸‰æ–¹ç«™ç‚¹å‘å‡ºçš„è¯·æ±‚ï¼Œé‚£ä¹ˆå°†æ— æ³•è·å–åˆ° CSRF Token çš„å€¼ï¼Œæ‰€ä»¥å³ä½¿å‘å‡ºäº†è¯·æ±‚â€è¦è·å¾—è¿™ä¸ªtokenåº”è¯¥å¾ˆå®¹æ˜“å§ï¼ŒæŠ“åŒ…å°±è¡Œå•Š","like_count":1,"discussions":[{"author":{"id":1239917,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/OVq8d3D1m1SkoOUL6iaerJjDfVlibDDfutGBJ3ceu2vpskOXb6ib6vS7iaLAQSUK7U5kv2xrHcdqFXR6ROo5QeAhow/132","nickname":"Oliveryoung","note":"","ucode":"1EA8AB91949B82","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":215874,"discussion_content":"https ä¸­é—´äººæŠ“ä¸åˆ°","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1585393660,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1480732,"avatar":"https://static001.geekbang.org/account/avatar/00/16/98/1c/d7a1439e.jpg","nickname":"KaKaKa","note":"","ucode":"07D1980A71F321","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1239917,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/OVq8d3D1m1SkoOUL6iaerJjDfVlibDDfutGBJ3ceu2vpskOXb6ib6vS7iaLAQSUK7U5kv2xrHcdqFXR6ROo5QeAhow/132","nickname":"Oliveryoung","note":"","ucode":"1EA8AB91949B82","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":242135,"discussion_content":"å‰å®³~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587468133,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":215874,"ip_address":""},"score":242135,"extra":""}]},{"author":{"id":1055073,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/sOvjoV6STk6SYPHRqVOo7DkiajY0KKuKLHSnDNvOKic5lllRNGEQo6W1oE6FrPiaSzUia1vCw9lqmV0vibCOtYtIfHQ/132","nickname":"ä½™æ˜­","note":"","ucode":"29EEEA1BFFE16B","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":549406,"discussion_content":"å› ä¸ºCSRF Tokenæ¯æ¬¡æ‰“å¼€é¡µé¢éƒ½ä¸ä¸€æ ·ï¼Œä¸€èˆ¬ä¸é‡ç”¨ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643950985,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":162732,"user_name":"-_-|||","can_delete":false,"product_type":"c1","uid":1328142,"ip_address":"","ucode":"94B21594658BF9","user_header":"https://static001.geekbang.org/account/avatar/00/14/44/0e/ce14b7d3.jpg","comment_is_top":false,"comment_ctime":1576582453,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"5871549749","product_id":100033601,"comment_content":"&quot;å¦‚æœæ˜¯ä»ç¬¬ä¸‰æ–¹ç«™ç‚¹å‘èµ·çš„è¯·æ±‚ï¼Œé‚£ä¹ˆéœ€è¦æµè§ˆå™¨ç¦æ­¢å‘é€æŸäº›å…³é”® Cookie æ•°æ®åˆ°æœåŠ¡å™¨ï¼›&quot;,å¦‚æœæ˜¯ç¬¬ä¸‰æ–¹ç½‘ç«™ï¼Œè¿˜ä¼šæœ‰è¢«æ”»å‡»ç½‘ç«™çš„cookieå—ï¼ŒåŸŸåä¸ä¸€æ ·ï¼Œåº”è¯¥æ²¡æœ‰å§ã€‚","like_count":1},{"had_liked":false,"id":144006,"user_name":"å¯ç¬‘çš„éœ¸ç‹","can_delete":false,"product_type":"c1","uid":1379465,"ip_address":"","ucode":"CDCE2AA7119E2C","user_header":"https://static001.geekbang.org/account/avatar/00/15/0c/89/d5077e61.jpg","comment_is_top":false,"comment_ctime":1571823246,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5866790542","product_id":100033601,"comment_content":"è€å¸ˆï¼Œå…³äºReferreræœåŠ¡å™¨éªŒè¯ä¸å¤ªç¨³å®šå¯ä»¥è¯¦ç»†è§£é‡Šä¸‹å—ï¼Œå› ä¸ºæˆ‘çœ‹åˆ°Referrer-Policyä¹Ÿå¯ä»¥è®¾ç½®ä¸ºoriginï¼Œè¾¾åˆ°Originç±»ä¼¼çš„æ•ˆæœ","like_count":1},{"had_liked":false,"id":344289,"user_name":"Geek_115bc8","can_delete":false,"product_type":"c1","uid":1673843,"ip_address":"","ucode":"71FBC9F02AFE1B","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erXRaa98A3zjLDkOibUJV1254aQ4EYFTbSLJuEvD0nXicMNA8pLoxOfHf5kPTbGLXNicg8CPFH3Tn0mA/132","comment_is_top":false,"comment_ctime":1651422824,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1651422824","product_id":100033601,"comment_content":"ä»€ä¹ˆæ˜¯ CSRF æ”»å‡»ï¼Ÿ<br>å°±æ˜¯ç”¨æˆ·ç‚¹å‡»äº†é»‘å®¢çš„è¿æ¥ï¼Œè·³è½¬åˆ°é»‘å®¢çš„ç½‘ç«™ï¼Œç„¶åè¯¥ç½‘ç«™æœ‰ç¬¬ä¸‰æ–¹ç½‘ç«™çš„è¿æ¥ï¼Œå¦‚æœç”¨æˆ·æµè§ˆå™¨æ­¤æ—¶æœ‰è¯¥ç¬¬ä¸‰æ–¹ç½‘ç«™çš„æœªè¿‡æœŸçš„cookieï¼Œé‚£ä¹ˆå°†è¢«å‘é€ã€‚ç”¨æ¥åšä¸€äº›è½¬è´¦çš„å±é™©æ“ä½œã€‚<br><br>åœ¨å¼€å‘é¡¹ç›®è¿‡ç¨‹ä¸­åº”è¯¥å¦‚ä½•é˜²å¾¡ CSRF æ”»å‡»ï¼Ÿ<br>1. é€šè¿‡è®¾ç½®cookie samesite: strictã€‚é˜»æ­¢ç”¨æˆ·é€šè¿‡é“¾æ¥è·³è½¬æ¥å‘é€cookieã€‚<br>2. å› ä¸ºå‘é€è¯·æ±‚ï¼Œéƒ½ä¼šæºå¸¦origin, refererå¤´å­—æ®µæ¥è¡¨ç¤ºå‘é€æ–¹çš„åŸŸåã€‚æœåŠ¡å™¨è¿›è¡ŒéªŒè¯ã€‚<br>3. é€šè¿‡é¢å‘tokenï¼ŒéªŒè¯ç”¨æˆ·èº«ä»½ã€‚","like_count":1},{"had_liked":false,"id":334905,"user_name":"JC.å½¦","can_delete":false,"product_type":"c1","uid":1698735,"ip_address":"","ucode":"E87C1420B140F4","user_header":"https://static001.geekbang.org/account/avatar/00/19/eb/af/e49af9a8.jpg","comment_is_top":false,"comment_ctime":1645176304,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1645176304","product_id":100033601,"comment_content":"å®æ–½CSRFæ”»å‡»éœ€è¦3ä¸ªæ¡ä»¶ï¼š<br>1. ç›®æ ‡ç«™ç‚¹å­˜åœ¨CSRFæ¼æ´<br>2. ç”¨æˆ·ç™»å½•è¿‡ç›®æ ‡ç«™ç‚¹ï¼Œä¸”åœ¨æµè§ˆå™¨æœ‰ç™»å½•ä¿¡æ¯ã€‚<br>3. éœ€è¦ç”¨æˆ·æ‰“å¼€ç¬¬ä¸‰æ–¹ç«™ç‚¹<br><br>è¿™é‡Œçš„CSRFæ¼æ´æ˜¯ä»€ä¹ˆæ¼æ´ï¼Ÿ","like_count":0},{"had_liked":false,"id":332549,"user_name":"Geek_cd4e2d","can_delete":false,"product_type":"c1","uid":2872600,"ip_address":"","ucode":"6CFABCA5502217","user_header":"","comment_is_top":false,"comment_ctime":1643336356,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1643336356","product_id":100033601,"comment_content":"æç¤ºä¸€ä¸‹ï¼Œæ”»å‡»è€…å†…éƒ¨é¡µé¢é€šè¿‡imgæ ‡ç­¾è®¿é—®æ¥å£ä¸å­˜åœ¨åŒæºç­–ç•¥","like_count":1},{"had_liked":false,"id":326259,"user_name":"lynnli","can_delete":false,"product_type":"c1","uid":1850528,"ip_address":"","ucode":"EE2FA8B6637BFE","user_header":"https://static001.geekbang.org/account/avatar/00/1c/3c/a0/1d286e39.jpg","comment_is_top":false,"comment_ctime":1639451659,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1639451659","product_id":100033601,"comment_content":"è€å¸ˆçš„è¯¾è®²çš„çœŸçš„å¾ˆå¥½ï¼Œå—ç›ŠåŒªæµ…å€¼å¾—å¤šçœ‹å‡ éï¼Œå¸Œæœ›è€å¸ˆæœ‰æ—¶é—´å¯ä»¥å‡ºæœ¬æµè§ˆå™¨æ¸²æŸ“åŸç†æ–¹é¢çš„ä¹¦ï¼Œå¸‚é¢ä¸Šæ²¡æœ‰è¿™ç±»ä¹¦ï¼Œéƒ½æ˜¯æ¶‰åŠä¸€ç‚¹ç‚¹è¿™æ–¹é¢çš„çŸ¥è¯†ï¼Œç°åœ¨è¿˜æ²¡æœ‰ç³»ç»Ÿæ€»ç»“æµè§ˆå™¨æ¸²æŸ“åŸç†çš„ä¹¦æœ¬","like_count":0},{"had_liked":false,"id":326127,"user_name":"äº†ä¸èµ·çš„å°å…­å…ˆç”ŸğŸŒŠ","can_delete":false,"product_type":"c1","uid":2863185,"ip_address":"","ucode":"159F73780EC51E","user_header":"https://static001.geekbang.org/account/avatar/00/2b/b0/51/26f7cb0b.jpg","comment_is_top":false,"comment_ctime":1639387890,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1639387890","product_id":100033601,"comment_content":"CSRFæ”»å‡»å«åšè·¨ç«™è¯·æ±‚ä¼ªé€ ï¼Œæ˜¯æŒ‡ç”¨æˆ·åœ¨ç™»å½•äº†ä¸€ä¸ªå®‰å…¨ç½‘ç«™åä¼šå­˜å‚¨ç”¨æˆ·ç™»å½•æ€åœ¨cookieä¸­ï¼Œæ­¤æ—¶é»‘å®¢è¯±å¯¼ç”¨æˆ·ç‚¹å‡»æ¶æ„é“¾æ¥ï¼ˆå¯èƒ½æ˜¯ç‚¹å‡»äº‹ä»¶ã€ä¹Ÿå¯èƒ½æ˜¯æ¶æ„ç½‘ç«™ï¼‰æ¥åšä¸€äº›æ¶æ„æ“ä½œ","like_count":0},{"had_liked":false,"id":322672,"user_name":"Geek_Ranfon","can_delete":false,"product_type":"c1","uid":2790908,"ip_address":"","ucode":"31F420EB2330B1","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/LDN7icjqGqTWSmiay9mKj5pChr86V8xjljseJnwHL2lPreGtQy4v0wFBGHb1N1XbibLP1Qv3FRcOPNwVazaPQJCxQ/132","comment_is_top":false,"comment_ctime":1637547696,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1637547696","product_id":100033601,"comment_content":"è€å¸ˆæˆ‘æœ‰ä¸ªé—®é¢˜å°±æ˜¯ï¼Œè¿™ä¸ªç¬¬ä¸‰æ–¹ç½‘ç«™æ˜¯å†™å¥½çš„å—ï¼Ÿé‚£æˆ‘æ€ä¹ˆçŸ¥é“ä½ è¦ç™»å½•çš„ç«™ç‚¹æ˜¯ä»€ä¹ˆï¼Œè¿™ä¸ªä¼ªé€ çš„æ¥å£æ€ä¹ˆæå‰å†™å¥½ï¼Ÿ","like_count":0},{"had_liked":false,"id":321678,"user_name":"æ’’å“ˆæ‹‰","can_delete":false,"product_type":"c1","uid":1608406,"ip_address":"","ucode":"2F64B26543D772","user_header":"https://static001.geekbang.org/account/avatar/00/18/8a/d6/00cf9218.jpg","comment_is_top":false,"comment_ctime":1636989807,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1636989807","product_id":100033601,"comment_content":"csrf  é€šå¸¸ç¿»è¯‘ä¸ºè·¨ç«™è¯·æ±‚ä¼ªé€ ï¼Œåˆ©ç”¨ç”¨æˆ·ç™»å½•æ—¶ï¼Œæµè§ˆå™¨å‘é€è¯·æ±‚è‡ªåŠ¨æºå¸¦ç”¨æˆ·ç™»å½•ä¿¡æ¯çš„ç‰¹ç‚¹ï¼Œä¼ªé€ è™šå‡è¯·æ±‚æ¬ºéª—ç”¨æˆ·ç‚¹å‡»ï¼Œè·å–ç”¨æˆ·ç™»å½•ä¿¡æ¯ï¼Œç„¶åè¿›è¡Œä¸æ³•è¡Œä¸ºçš„æ”»å‡»ã€‚","like_count":0},{"had_liked":false,"id":318742,"user_name":"ss","can_delete":false,"product_type":"c1","uid":1438827,"ip_address":"","ucode":"3CEA88D72E5C36","user_header":"https://static001.geekbang.org/account/avatar/00/15/f4/6b/b6f6810c.jpg","comment_is_top":false,"comment_ctime":1635408866,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1635408866","product_id":100033601,"comment_content":"è€å¸ˆä½ å¥½ï¼Œæˆ‘æƒ³è¯·é—®ä¸‹get  å’Œ postæ–¹å¼çš„xsrfæ”»å‡»æ˜¯å…·ä½“çš„å‘ç”Ÿåœºæ™¯æœ‰å“ªäº›å‘€ï¼Ÿæˆ‘èƒ½æƒ³åˆ°çš„å¥½åƒéƒ½æ˜¯ç‚¹å‡»ä¸€ä¸ªé“¾æ¥","like_count":0},{"had_liked":false,"id":217538,"user_name":"c.h","can_delete":false,"product_type":"c1","uid":1374695,"ip_address":"","ucode":"08FAC6FF81D0FA","user_header":"https://static001.geekbang.org/account/avatar/00/14/f9/e7/99318dd9.jpg","comment_is_top":false,"comment_ctime":1589529385,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1589529385","product_id":100033601,"comment_content":"è€å¸ˆï¼Œæˆ‘æƒ³è¯·é—®ä¸€ä¸‹ï¼Œè¿™å¥ â€œå¦‚æœæ˜¯ä»ç¬¬ä¸‰æ–¹ç«™ç‚¹å‘å‡ºçš„è¯·æ±‚ï¼Œé‚£ä¹ˆå°†æ— æ³•è·å–åˆ° CSRF Token çš„å€¼â€œ è¿™ç§æ–¹å¼æ˜¯ä¸€å®šå®‰å…¨çš„å—ï¼Ÿç¬¬ä¸‰æ–¹ä¸€å®šæ²¡æœ‰åŠæ³•è·å–åˆ°CSRF Token çš„å€¼å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1059845,"avatar":"https://static001.geekbang.org/account/avatar/00/10/2c/05/b8e769fa.jpg","nickname":"Mickey","note":"","ucode":"548E950F57D2A8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":284404,"discussion_content":"1ã€å¯¹äºé¢„é˜² csrf æ”»å‡»æ¥è¯´è¿˜æ˜¯è¿˜æ˜¯å®‰å…¨çš„\n2ã€æ”»å‡»è€…æ˜¯å¯ä»¥è·å– csrf token çš„ï¼Œæ”»å‡»è€…è®¿é—®ä¸»ç«™ï¼Œä»å…ƒç´ ä¸­æŠŠcsrf token æ‹·ä¸‹æ¥å³å¯ï¼Œcsrf token ä¸€èˆ¬æœ‰ä¸ªæœ‰æ•ˆæœŸï¼Œåœ¨æœ‰æ•ˆæœŸå†…ï¼Œéƒ½å¯ä»¥ä½¿ç”¨\n 3ã€ä½†æ˜¯ csrf æ”»å‡»æ˜¯ä¾èµ–æµè§ˆå™¨å‘é€è¯·æ±‚æ—¶ï¼Œä¼šæºå¸¦å½“å‰åŸŸä¸‹çš„ cookie ä»è€Œé€šè¿‡è¢«æ”»å‡»ç”¨æˆ·æ ¡éªŒå¯¼è‡´çš„æ”»å‡»ï¼Œåªè¦æœåŠ¡å™¨ä¸æŠŠ csrf token è®¾ç½®åœ¨ cookie ä¸­ï¼Œå°±æ˜¯OKçš„","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1592528502,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":213848,"user_name":"æ±¤æ˜¾æ–‡","can_delete":false,"product_type":"c1","uid":1377966,"ip_address":"","ucode":"C3D41A180EB0F7","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/xCAJCvA3iaMXgjibb0mh99qN9y2Kibc5y31DOaAM0RaEryHM50qJ8GOqXvPAtjILIArIysRQhEWPq9Bt1NgibZpBoA/132","comment_is_top":false,"comment_ctime":1588576533,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1588576533","product_id":100033601,"comment_content":"csrf token è·Ÿ jsonwebtoken å¯ä»¥ç†è§£æˆæ˜¯ä¸€ä¸ªä¸œè¥¿å—","like_count":0,"discussions":[{"author":{"id":1059845,"avatar":"https://static001.geekbang.org/account/avatar/00/10/2c/05/b8e769fa.jpg","nickname":"Mickey","note":"","ucode":"548E950F57D2A8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":284412,"discussion_content":"ä¸æ˜¯åŒä¸€ä¸ªä¸œè¥¿\ncsrf token æ˜¯æœåŠ¡å™¨ç”¨äºæ ¡éªŒå½“å‰è¯·æ±‚æ˜¯å¦åˆæ³•çš„\njwt ä¸€èˆ¬ç”¨äºæ ¡éªŒå½“å‰ç”¨æˆ·æ˜¯å¦åˆæ³•","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1592528999,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":212397,"user_name":"l_j_dota_1111","can_delete":false,"product_type":"c1","uid":1490128,"ip_address":"","ucode":"4CA8A41F5107C7","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEJwHLLQK3AicN8XqichEbfqSACpRB5kry8bIMBcuB3bSiaeic9hABrmn7TZgqaWJ8Xc1gWh6icasZCt3Fg/132","comment_is_top":false,"comment_ctime":1588117305,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1588117305","product_id":100033601,"comment_content":"å¦‚æœç”¨æˆ·ä¿¡æ¯å­˜å‚¨åœ¨localstorageä¸­å‘¢ï¼Ÿæ˜¯ä¸æ˜¯csrfå°±ä¸èµ·ä½œç”¨äº†","like_count":0,"discussions":[{"author":{"id":1059845,"avatar":"https://static001.geekbang.org/account/avatar/00/10/2c/05/b8e769fa.jpg","nickname":"Mickey","note":"","ucode":"548E950F57D2A8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":284414,"discussion_content":"å¯ä»¥è¿™ä¹ˆè¯´ï¼Œä½†æ˜¯æœ‰å¯èƒ½ä¼šå¯¼è‡´ xss æ”»å‡»ã€å¦‚æœè¢«æ³¨å…¥æ¶æ„è„šæœ¬ï¼Œæµè§ˆå™¨ä¸­js æ˜¯å¯ä»¥è¯»å–å½“å‰åŸŸä¸‹çš„ localStorage çš„ï¼Œä½†æ˜¯ å½“ cookie è¿™æ˜¯ http only ä¹‹åï¼Œjs å°±æ— æ³•è¯»å–äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592529097,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":197708,"user_name":"Oliveryoung","can_delete":false,"product_type":"c1","uid":1239917,"ip_address":"","ucode":"1EA8AB91949B82","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/OVq8d3D1m1SkoOUL6iaerJjDfVlibDDfutGBJ3ceu2vpskOXb6ib6vS7iaLAQSUK7U5kv2xrHcdqFXR6ROo5QeAhow/132","comment_is_top":false,"comment_ctime":1585393566,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1585393566","product_id":100033601,"comment_content":"csrf tokenæ˜¯æµè§ˆå™¨ç«¯jsç”Ÿæˆï¼Ÿé‚£å²‚ä¸æ˜¯å¯ä»¥è·å–åˆ°ç”Ÿæˆæ–¹æ³•","like_count":0,"discussions":[{"author":{"id":1059845,"avatar":"https://static001.geekbang.org/account/avatar/00/10/2c/05/b8e769fa.jpg","nickname":"Mickey","note":"","ucode":"548E950F57D2A8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":284415,"discussion_content":"å¯¹äºå‰ç«¯æœåŠ¡è€Œè¨€ï¼Œä¸€èˆ¬æ˜¯ Node ç«¯ç”Ÿæˆçš„ï¼Œéšç€ é¡µé¢æ¸²æŸ“æ³¨å…¥åˆ° é¡µé¢ä¸­çš„ï¼Œ egg æ¡†æ¶æœ‰é›†æˆ csrf token çš„ç”Ÿæˆï¼Œå…·ä½“ç”Ÿæˆæ–¹æ³•å¯ä»¥çœ‹çœ‹æºç ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592529229,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":185472,"user_name":"Vfeelit","can_delete":false,"product_type":"c1","uid":1501818,"ip_address":"","ucode":"F3FF2B069F347F","user_header":"https://static001.geekbang.org/account/avatar/00/16/ea/7a/d857723d.jpg","comment_is_top":false,"comment_ctime":1583588645,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1583588645","product_id":100033601,"comment_content":"ç¬¬ä¸€ ä»cookieä¸Šä¸‹åŠŸå¤« è®¾ç½®ä¸¥æ ¼æ¨¡å¼ ä½†æ˜¯å…¼å®¹æ€§ä¸å¥½  ç¬¬äºŒ è¿”å›ä¸€ä¸ªtoken æœåŠ¡ç«¯éªŒè¯  ç¬¬ä¸‰ ä¸ä½¿ç”¨cookie   ç°ä»£çš„å‰ç«¯åº”ç”¨ ç™»å½•åæŠŠtokenä¿å­˜åˆ°localä¸­ è°ƒç”¨apiæ—¶åŠ¨æ€é™„åŠ    æ‰€ä»¥è¿˜æ˜¯ä¸ä½¿ç”¨cookieæ‰æ˜¯å¥½æ–¹æ³• ","like_count":0,"discussions":[{"author":{"id":1059845,"avatar":"https://static001.geekbang.org/account/avatar/00/10/2c/05/b8e769fa.jpg","nickname":"Mickey","note":"","ucode":"548E950F57D2A8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":284416,"discussion_content":"æŠŠ token ä¿å­˜åœ¨ local ä¸­æœ‰ä¸ªé£é™©ç‚¹ï¼Œå°±æ˜¯ xss æ”»å‡»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592529277,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":165251,"user_name":"æœ™","can_delete":false,"product_type":"c1","uid":1623308,"ip_address":"","ucode":"55FE217C4CEDCC","user_header":"https://static001.geekbang.org/account/avatar/00/18/c5/0c/03bd4b4e.jpg","comment_is_top":false,"comment_ctime":1577188801,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1577188801","product_id":100033601,"comment_content":"æ€»æ„Ÿè§‰CSRF Tokenè¿™ä¹ˆæ˜ç›®å¼ èƒ†åœ°å†™åœ¨htmlé‡Œï¼Œä¹Ÿä¸å®‰å…¨å‘¢ã€‚é»‘å®¢æ˜¯ä¸èƒ½çœ‹åˆ°è¿™ä¸ªé¡µé¢çš„å†…å®¹å—ï¼Ÿè€å¸ˆèƒ½è®²è®²ä»€ä¹ˆæƒ…å†µä¸‹ä¸€ä¸ªé¡µé¢å¯ä»¥çœ‹åˆ°å¦ä¸€é¡µé¢çš„å†…å®¹ï¼Œä»€ä¹ˆæƒ…å†µä¸‹ä¸èƒ½å—ï¼Ÿæ˜¯ä¸æ˜¯XSSå°±å¯ä»¥æ‹¿åˆ°è¿™ä¸ªTokenäº†","like_count":0,"discussions":[{"author":{"id":1023016,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/9c/28/87421d8f.jpg","nickname":"Happy-Coming","note":"","ucode":"4F7EA88432EDCD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":236695,"discussion_content":"æ¯æ¬¡åˆ·æ–°é¡µé¢ï¼Œåå°éƒ½ä¼šä¸ºhtmlç”Ÿæˆä¸åŒçš„tokenã€‚é»‘å®¢å¯ä»¥çœ‹åˆ°å†…å®¹ï¼Œä½†æ˜¯æ— æ³•ç”Ÿæˆtokenï¼Œé»‘å®¢ç”Ÿæˆçš„tokenæ— æ³•é€šéš¾è¿‡åå°çš„éªŒè¯ã€‚å…¶å®å›¾ç‰‡éªŒè¯ç å’Œtokençš„æ€è·¯æ˜¯ä¸€æ ·çš„ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1587116305,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}