{"id":129333,"title":"17 | å¦‚ä½•æ­£ç¡®ä½¿ç”¨é”ä¿æŠ¤å…±äº«æ•°æ®ï¼Œåè°ƒå¼‚æ­¥çº¿ç¨‹ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯æç¥ã€‚</p><p>åœ¨å‰å‡ å¤©çš„åŠ é¤æ–‡ç« ä¸­æˆ‘è®²åˆ°ï¼ŒJMQä¸ºäº†æå‡æ•´ä¸ªæµç¨‹çš„å¤„ç†æ€§èƒ½ï¼Œä½¿ç”¨äº†ä¸€ä¸ªâ€œè¿‘ä¹æ— é”â€çš„è®¾è®¡ï¼Œè¿™é‡Œé¢å…¶å®éšå«ç€ä¸¤ä¸ªä¿¡æ¯ç‚¹ã€‚ç¬¬ä¸€ä¸ªæ˜¯ï¼Œåœ¨æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼Œâ€œé”â€æ˜¯ä¸€ä¸ªå¿…é¡»è¦ä½¿ç”¨çš„æŠ€æœ¯ã€‚ç¬¬äºŒä¸ªæ˜¯ï¼Œä½¿ç”¨é”å…¶å®ä¼šé™ä½ç³»ç»Ÿçš„æ€§èƒ½ã€‚</p><p>é‚£ä¹ˆï¼Œå¦‚ä½•æ­£ç¡®ä½¿ç”¨é”ï¼Œåˆéœ€è¦æ³¨æ„å“ªäº›äº‹é¡¹å‘¢ï¼Ÿä»Šå¤©æˆ‘ä»¬å°±æ¥èŠä¸€èŠè¿™ä¸ªé—®é¢˜ã€‚</p><p>æˆ‘ä»¬çŸ¥é“ï¼Œä½¿ç”¨å¼‚æ­¥å’Œå¹¶å‘çš„è®¾è®¡å¯ä»¥å¤§å¹…æå‡ç¨‹åºçš„æ€§èƒ½ï¼Œä½†æˆ‘ä»¬ä¸ºæ­¤ä»˜å‡ºçš„ä»£ä»·æ˜¯ï¼Œç¨‹åºæ¯”åŸæ¥æ›´åŠ å¤æ‚äº†ï¼Œå¤šçº¿ç¨‹åœ¨å¹¶è¡Œæ‰§è¡Œçš„æ—¶å€™ï¼Œå¸¦æ¥äº†å¾ˆå¤šä¸ç¡®å®šæ€§ã€‚ç‰¹åˆ«æ˜¯å¯¹äºä¸€äº›éœ€è¦å¤šä¸ªçº¿ç¨‹å¹¶å‘è¯»å†™çš„å…±äº«æ•°æ®ï¼Œå¦‚æœå¤„ç†ä¸å¥½ï¼Œå¾ˆå¯èƒ½ä¼šäº§å‡ºä¸å¯é¢„æœŸçš„ç»“æœï¼Œè¿™è‚¯å®šä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚</p><p>æˆ‘ç»™ä½ ä¸¾ä¸ªä¾‹å­æ¥è¯´æ˜ä¸€ä¸‹ï¼Œå¤§å®¶åº”è¯¥éƒ½å‚ä¸è¿‡å¾®ä¿¡ç¾¤æŠ•ç¥¨å§ï¼Ÿæ¯”å¦‚ï¼Œç¾¤ä¸»è¯´ï¼šâ€œä»Šæ™šå„¿å’±ä»¬èšé¤ï¼Œèƒ½æ¥çš„éƒ½å›æ¶ˆæ¯æŠ¥ä¸€ä¸‹åï¼Œé¡ºä¾¿ç»Ÿè®¡ä¸€ä¸‹äººæ•°ã€‚éƒ½æŒ‰æˆ‘è¿™ä¸ªæ ¼å¼æ¥æŠ¥åã€‚â€ç„¶åï¼Œç¾¤ä¸»å‘äº†ä¸€æ¡æ¶ˆæ¯ï¼šâ€œç¾¤ä¸»ï¼Œ1äººâ€ã€‚</p><p>è¿™æ—¶å€™å°å…­å’Œæ— åŒéƒ½è¦æŠ¥åï¼Œè¿‡ä¸€ä¼šå„¿ï¼Œä»–ä¿©å‡ ä¹åŒæ—¶å„å‘äº†ä¸€æ¡æ¶ˆæ¯ï¼Œâ€œå°å…­ï¼Œ2äººâ€â€œæ— åŒï¼Œ2äººâ€ï¼Œæ¯ä¸ªäººå‘çš„æ¶ˆæ¯éƒ½åªç»Ÿè®¡äº†ç¾¤ä¸»å’Œä»–ä»¬è‡ªå·±ï¼Œä¸€å…±2äººï¼Œè€Œè¿™æ—¶å€™ï¼Œå…¶å®å·²ç»æœ‰3ä¸ªäººæŠ¥åäº†ï¼Œå¹¶ä¸”ï¼Œåœ¨æœ€åå‘æ¶ˆæ¯çš„æ— åŒçš„åå•ä¸­ï¼Œå°å…­çš„æŠ¥åè¢«è¦†ç›–äº†ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/87/e7/87ac82860fe52434dee843c8e710b2e7.jpg?wh=3383*1690\" alt=\"\"></p><p>è¿™å°±æ˜¯ä¸€ä¸ªéå¸¸å…¸å‹çš„ç”±äºå¹¶å‘è¯»å†™å¯¼è‡´çš„æ•°æ®é”™è¯¯ã€‚ä½¿ç”¨é”å¯ä»¥éå¸¸æœ‰æ•ˆåœ°è§£å†³è¿™ä¸ªé—®é¢˜ã€‚é”çš„åŸç†æ˜¯è¿™æ ·çš„ï¼š<strong>ä»»ä½•æ—¶é—´éƒ½åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹æŒæœ‰é”ï¼Œåªæœ‰æŒæœ‰é”çš„çº¿ç¨‹æ‰èƒ½è®¿é—®è¢«é”ä¿æŠ¤çš„èµ„æºã€‚</strong></p><!-- [[[read_end]]] --><p>åœ¨ä¸Šé¢å¾®ä¿¡ç¾¤æŠ¥åçš„ä¾‹å­ä¸­ï¼Œå¦‚æœè¯´æˆ‘ä»¬çš„å¾®ä¿¡ç¾¤ä¸­æœ‰ä¸€æŠŠé”ï¼Œæƒ³è¦æŠ¥åçš„äººå¿…é¡»å…ˆæ‹¿åˆ°é”ï¼Œç„¶åæ‰èƒ½æ›´æ–°æŠ¥ååå•ã€‚è¿™æ ·ï¼Œå°±é¿å…äº†å¤šä¸ªäººåŒæ—¶æ›´æ–°æ¶ˆæ¯ï¼ŒæŠ¥ååå•ä¹Ÿå°±ä¸ä¼šå‡ºé”™äº†ã€‚</p><h2>é¿å…æ»¥ç”¨é”</h2><p>é‚£æ˜¯ä¸æ˜¯é‡åˆ°è¿™ç§æƒ…å†µéƒ½è¦ç”¨é”è§£å†³å‘¢ï¼Ÿæˆ‘åˆ†äº«ä¸€ä¸‹æˆ‘ä¸ªäººä½¿ç”¨é”çš„ç¬¬ä¸€æ¡åŸåˆ™ï¼š<strong>å¦‚æœèƒ½ä¸ç”¨é”ï¼Œå°±ä¸ç”¨é”ï¼›å¦‚æœä½ ä¸ç¡®å®šæ˜¯ä¸æ˜¯åº”è¯¥ç”¨é”ï¼Œé‚£ä¹Ÿä¸è¦ç”¨é”ã€‚</strong>ä¸ºä»€ä¹ˆè¿™ä¹ˆè¯´å‘¢ï¼Ÿå› ä¸ºï¼Œè™½ç„¶è¯´ä½¿ç”¨é”å¯ä»¥ä¿æŠ¤å…±äº«èµ„æºï¼Œä½†æ˜¯ä»£ä»·è¿˜æ˜¯ä¸å°çš„ã€‚</p><p>ç¬¬ä¸€ï¼ŒåŠ é”å’Œè§£é”è¿‡ç¨‹éƒ½æ˜¯éœ€è¦CPUæ—¶é—´çš„ï¼Œè¿™æ˜¯ä¸€ä¸ªæ€§èƒ½çš„æŸå¤±ã€‚å¦å¤–ï¼Œä½¿ç”¨é”å°±æœ‰å¯èƒ½å¯¼è‡´çº¿ç¨‹ç­‰å¾…é”ï¼Œç­‰å¾…é”è¿‡ç¨‹ä¸­çº¿ç¨‹æ˜¯é˜»å¡çš„çŠ¶æ€ï¼Œè¿‡å¤šçš„é”ç­‰å¾…ä¼šæ˜¾è‘—é™ä½ç¨‹åºçš„æ€§èƒ½ã€‚</p><p>ç¬¬äºŒï¼Œå¦‚æœå¯¹é”ä½¿ç”¨ä¸å½“ï¼Œå¾ˆå®¹æ˜“é€ æˆæ­»é”ï¼Œå¯¼è‡´æ•´ä¸ªç¨‹åºâ€œå¡æ­»â€ï¼Œè¿™æ˜¯éå¸¸ä¸¥é‡çš„é—®é¢˜ã€‚æœ¬æ¥å¤šçº¿ç¨‹çš„ç¨‹åºå°±éå¸¸éš¾äºè°ƒè¯•ï¼Œå¦‚æœå†åŠ ä¸Šé”ï¼Œå‡ºç°å¹¶å‘é—®é¢˜æˆ–è€…æ­»é”é—®é¢˜ï¼Œä½ çš„ç¨‹åºå°†æ›´åŠ éš¾è°ƒè¯•ã€‚</p><p>æ‰€ä»¥ï¼Œä½ åœ¨ä½¿ç”¨é”ä»¥å‰ï¼Œä¸€å®šè¦éå¸¸æ¸…æ¥šæ˜ç¡®åœ°çŸ¥é“ï¼Œè¿™ä¸ªé—®é¢˜å¿…é¡»è¦ç”¨ä¸€æŠŠé”æ¥è§£å†³ã€‚åˆ‡å¿Œçœ‹åˆ°ä¸€ä¸ªå…±äº«æ•°æ®ï¼Œä¹Ÿæä¸æ¸…å®ƒåœ¨å¹¶å‘ç¯å¢ƒä¸­ä¼šä¸ä¼šå‡ºç°äº‰ç”¨é—®é¢˜ï¼Œå°±â€œä¸ºäº†ä¿é™©ï¼Œç»™å®ƒåŠ ä¸ªé”å§ã€‚â€<strong>åƒä¸‡ä¸èƒ½æœ‰è¿™ç§ä¸è´Ÿè´£ä»»çš„æƒ³æ³•ï¼Œå¦åˆ™ä½ å°†ä¼šä»˜å‡ºæƒ¨ç—›çš„ä»£ä»·ï¼</strong>æˆ‘æ›¾ç»é‡åˆ°è¿‡çš„ä¸¥é‡çº¿ä¸Šäº‹æ•…ï¼Œå…¶ä¸­æœ‰å‡ æ¬¡å°±æ˜¯ç”±äºä¸å½“åœ°ä½¿ç”¨é”å¯¼è‡´çš„ã€‚</p><p><strong>åªæœ‰åœ¨å¹¶å‘ç¯å¢ƒä¸­ï¼Œå…±äº«èµ„æºä¸æ”¯æŒå¹¶å‘è®¿é—®ï¼Œæˆ–è€…è¯´å¹¶å‘è®¿é—®å…±äº«èµ„æºä¼šå¯¼è‡´ç³»ç»Ÿé”™è¯¯çš„æƒ…å†µä¸‹ï¼Œæ‰éœ€è¦ä½¿ç”¨é”ã€‚</strong></p><h2>é”çš„ç”¨æ³•</h2><p>é”çš„ç”¨æ³•ä¸€èˆ¬æ˜¯è¿™æ ·çš„ï¼š</p><ol>\n<li>åœ¨è®¿é—®å…±äº«èµ„æºä¹‹å‰ï¼Œå…ˆè·å–é”ã€‚</li>\n<li>å¦‚æœè·å–é”æˆåŠŸï¼Œå°±å¯ä»¥è®¿é—®å…±äº«èµ„æºäº†ã€‚</li>\n<li>æœ€åï¼Œéœ€è¦é‡Šæ”¾é”ï¼Œä»¥ä¾¿å…¶ä»–çº¿ç¨‹ç»§ç»­è®¿é—®å…±äº«èµ„æºã€‚</li>\n</ol><p>åœ¨Javaè¯­è¨€ä¸­ï¼Œä½¿ç”¨é”çš„ä¾‹å­ï¼š</p><pre><code>private Lock lock = new ReentrantLock();\n\npublic void visitShareResWithLock() {\n  lock.lock();\n  try {\n    // åœ¨è¿™é‡Œå®‰å…¨çš„è®¿é—®å…±äº«èµ„æº\n  } finally {\n    lock.unlock();\n  }\n}\n</code></pre><p>ä¹Ÿå¯ä»¥ä½¿ç”¨synchronizedå…³é”®å­—ï¼Œå®ƒçš„æ•ˆæœå’Œé”æ˜¯ä¸€æ ·çš„ï¼š</p><pre><code>private Object lock = new Object();\n\npublic void visitShareResWithLock() {\n  synchronized (lock) {\n    // åœ¨è¿™é‡Œå®‰å…¨çš„è®¿é—®å…±äº«èµ„æº\n  }\n}\n</code></pre><p>ä½¿ç”¨é”çš„æ—¶å€™ï¼Œä½ éœ€è¦æ³¨æ„å‡ ä¸ªé—®é¢˜ï¼š</p><p>ç¬¬ä¸€ä¸ªï¼Œä¹Ÿæ˜¯æœ€é‡è¦çš„é—®é¢˜å°±æ˜¯ï¼Œ<strong>ä½¿ç”¨å®Œé”ï¼Œä¸€å®šè¦é‡Šæ”¾å®ƒ</strong>ã€‚æ¯”è¾ƒå®¹æ˜“å‡ºç°çŠ¶å†µçš„åœ°æ–¹æ˜¯ï¼Œå¾ˆå¤šè¯­è¨€éƒ½æœ‰å¼‚å¸¸æœºåˆ¶ï¼Œå½“æŠ›å‡ºå¼‚å¸¸çš„æ—¶å€™ï¼Œä¸å†æ‰§è¡Œåé¢çš„ä»£ç ã€‚å¦‚æœåœ¨è®¿é—®å…±äº«èµ„æºæ—¶æŠ›å‡ºå¼‚å¸¸ï¼Œé‚£åé¢é‡Šæ”¾é”çš„ä»£ç å°±ä¸ä¼šè¢«æ‰§è¡Œï¼Œè¿™æ ·ï¼Œé”å°±ä¸€ç›´æ— æ³•é‡Šæ”¾ï¼Œå½¢æˆæ­»é”ã€‚æ‰€ä»¥ï¼Œä½ è¦è€ƒè™‘åˆ°ä»£ç å¯èƒ½èµ°åˆ°çš„æ‰€æœ‰æ­£å¸¸å’Œå¼‚å¸¸çš„åˆ†æ”¯ï¼Œç¡®ä¿æ‰€æœ‰æƒ…å†µä¸‹ï¼Œé”éƒ½èƒ½è¢«é‡Šæ”¾ã€‚</p><p>æœ‰äº›è¯­è¨€æä¾›äº†try-withçš„æœºåˆ¶ï¼Œä¸éœ€è¦æ˜¾å¼åœ°è·å–å’Œé‡Šæ”¾é”ï¼Œå¯ä»¥ç®€åŒ–ç¼–ç¨‹ï¼Œæœ‰æ•ˆé¿å…è¿™ç§é—®é¢˜ï¼Œæ¨èä½ ä½¿ç”¨ã€‚</p><p>æ¯”å¦‚åœ¨Pythonä¸­ï¼š</p><pre><code>lock = threading.RLock()\n\ndef visitShareResWithLock():\n  with lock:\n    # æ³¨æ„ç¼©è¿›\n    # åœ¨è¿™é‡Œå®‰å…¨çš„è®¿é—®å…±äº«èµ„æº\n  \n  # é”ä¼šåœ¨withä»£ç æ®µæ‰§è¡Œå®Œæˆåè‡ªåŠ¨é‡Šæ”¾\n</code></pre><p>æ¥ä¸‹æ¥æˆ‘ä»¬è¯´ä¸€ä¸‹ï¼Œä½¿ç”¨é”çš„æ—¶å€™ï¼Œé‡åˆ°çš„æœ€å¸¸è§çš„é—®é¢˜ï¼šæ­»é”ã€‚</p><h2>å¦‚ä½•é¿å…æ­»é”ï¼Ÿ</h2><p>æ­»é”æ˜¯æŒ‡ï¼Œç”±äºæŸç§åŸå› ï¼Œé”ä¸€ç›´æ²¡æœ‰é‡Šæ”¾ï¼Œåç»­éœ€è¦è·å–é”çš„çº¿ç¨‹éƒ½å°†å¤„äºç­‰å¾…é”çš„çŠ¶æ€ï¼Œè¿™æ ·ç¨‹åºå°±å¡æ­»äº†ã€‚</p><p>å¯¼è‡´æ­»é”çš„åŸå› å¹¶ä¸å¤šï¼Œç¬¬ä¸€ç§åŸå› å°±æ˜¯æˆ‘åœ¨åˆšåˆšè®²çš„ï¼Œè·å–äº†é”ä¹‹åæ²¡æœ‰é‡Šæ”¾ï¼Œæœ‰ç»éªŒçš„ç¨‹åºå‘˜å¾ˆå°‘ä¼šçŠ¯è¿™ç§é”™è¯¯ï¼Œå³ä½¿å‡ºç°è¿™ç§é”™è¯¯ï¼Œä¹Ÿå¾ˆå®¹æ˜“é€šè¿‡æŸ¥çœ‹ä»£ç æ‰¾åˆ°Bugã€‚</p><p>è¿˜æœ‰ä¸€ç§æ˜¯é”çš„é‡å…¥é—®é¢˜ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹é¢è¿™æ®µä»£ç ï¼š</p><pre><code>public void visitShareResWithLock() {\n  lock.lock(); // è·å–é”\n  try {\n    lock.lock(); // å†æ¬¡è·å–é”ï¼Œä¼šå¯¼è‡´æ­»é”å—ï¼Ÿ\n  } finally {\n    lock.unlock();\n  }\n</code></pre><p>åœ¨è¿™æ®µä»£ç ä¸­ï¼Œå½“å‰çš„çº¿ç¨‹è·å–åˆ°äº†é”lockï¼Œç„¶ååœ¨æŒæœ‰è¿™æŠŠé”çš„æƒ…å†µä¸‹ï¼Œå†æ¬¡å»å°è¯•è·å–è¿™æŠŠé”ï¼Œè¿™æ ·ä¼šå¯¼è‡´æ­»é”å—ï¼Ÿ</p><p>ç­”æ¡ˆæ˜¯ï¼Œä¸ä¸€å®šã€‚<strong>ä¼šä¸ä¼šæ­»é”å–å†³äºï¼Œä½ è·å–çš„è¿™æŠŠé”å®ƒæ˜¯ä¸æ˜¯å¯é‡å…¥é”ã€‚</strong>å¦‚æœæ˜¯å¯é‡å…¥é”ï¼Œé‚£å°±æ²¡æœ‰é—®é¢˜ï¼Œå¦åˆ™å°±ä¼šæ­»é”ã€‚</p><p>å¤§éƒ¨åˆ†ç¼–ç¨‹è¯­è¨€éƒ½æä¾›äº†å¯é‡å…¥é”ï¼Œå¦‚æœæ²¡æœ‰ç‰¹åˆ«çš„è¦æ±‚ï¼Œä½ è¦å°½é‡ä½¿ç”¨å¯é‡å…¥é”ã€‚æœ‰çš„åŒå­¦å¯èƒ½ä¼šé—®ï¼Œâ€œæ—¢ç„¶å·²ç»è·å–åˆ°é”äº†ï¼Œæˆ‘å¹²å˜›è¿˜è¦å†æ¬¡è·å–åŒä¸€æŠŠé”å‘¢ï¼Ÿâ€</p><p>å…¶å®ï¼Œå¦‚æœä½ çš„ç¨‹åºè¶³å¤Ÿå¤æ‚ï¼Œè°ƒç”¨æ ˆå¾ˆæ·±ï¼Œå¾ˆå¤šæƒ…å†µä¸‹ï¼Œå½“ä½ éœ€è¦è·å–ä¸€æŠŠé”çš„æ—¶å€™ï¼Œä½ æ˜¯ä¸å¤ªå¥½åˆ¤æ–­åœ¨nå±‚è°ƒç”¨ä¹‹å¤–çš„æŸä¸ªåœ°æ–¹ï¼Œæ˜¯ä¸æ˜¯å·²ç»è·å–è¿‡è¿™æŠŠé”äº†ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œè·å–å¯é‡å…¥é”å°±æœ‰æ„ä¹‰äº†ã€‚</p><p>æœ€åä¸€ç§æ­»é”çš„æƒ…å†µæ˜¯æœ€å¤æ‚çš„ï¼Œä¹Ÿæ˜¯æœ€éš¾è§£å†³çš„ã€‚å¦‚æœä½ çš„ç¨‹åºä¸­å­˜åœ¨å¤šæŠŠé”ï¼Œå°±æœ‰å¯èƒ½å‡ºç°è¿™äº›é”äº’ç›¸é”ä½çš„æƒ…å†µã€‚æˆ‘ä»¬ä¸€èµ·æ¥çœ‹ä¸‹é¢è¿™æ®µPythonä»£ç ï¼š</p><pre><code>import threading\n\ndef func1(lockA, lockB):\n  while True:\n    print(&quot;Thread1: Try to accquire lockA...&quot;)\n    with lockA:\n      print(&quot;Thread1: lockA accquired. Try to accquire lockB...&quot;)\n      with lockB:\n        print(&quot;Thread1: Both lockA and LockB accrquired.&quot;)\n\n\ndef func2(lockA, lockB):\n  while True:\n    print(&quot;Thread2: Try to accquire lockB...&quot;)\n    with lockB:\n      print(&quot;Thread2: lockB accquired. Try to accquire lockA...&quot;)\n      with lockA:\n        print(&quot;Thread2: Both lockA and LockB accrquired.&quot;)\n\n\nif __name__ == '__main__':\n  lockA = threading.RLock();\n  lockB = threading.RLock()\n  t1 = threading.Thread(target=func1, args=(lockA, lockB,))\n  t2 = threading.Thread(target=func2, args=(lockA, lockB,))\n  t1.start()\n  t2.start()\n</code></pre><p>è¿™ä¸ªä»£ç æ¨¡æ‹Ÿäº†ä¸€ä¸ªæœ€ç®€å•æœ€å…¸å‹çš„æ­»é”æƒ…å†µã€‚åœ¨è¿™ä¸ªç¨‹åºé‡Œé¢ï¼Œæˆ‘ä»¬æœ‰ä¸¤æŠŠé”ï¼šlockAå’ŒlockBï¼Œç„¶åæˆ‘ä»¬å®šä¹‰äº†ä¸¤ä¸ªçº¿ç¨‹ï¼Œè¿™ä¸¤ä¸ªçº¿ç¨‹åå¤åœ°å»è·å–è¿™ä¸¤æŠŠé”ï¼Œç„¶åé‡Šæ”¾ã€‚æˆ‘ä»¬æ‰§è¡Œä»¥ä¸‹è¿™æ®µä»£ç ï¼Œçœ‹çœ‹ä¼šå‡ºç°ä»€ä¹ˆæƒ…å†µï¼š</p><pre><code>$ python3 DeadLock.py\nThread1: Try to accquire lockA...\nThread1: lockA accquired. Try to accquire lockB...\nThread1: Both lockA and LockB accrquired.\nThread1: Try to accquire lockA...\n... ...\nThread1: Try to accquire lockA...\nThread2: Try to accquire lockB...\nThread1: lockA accquired. Try to accquire lockB...\nThread2: lockB accquired. Try to accquire lockA...\n</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œç¨‹åºæ‰§è¡Œä¸€ä¼šå„¿å°±å¡ä½äº†ï¼Œå‘ç”Ÿäº†æ­»é”ã€‚é‚£æ­»é”çš„åŸå› æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿè¯·æ³¨æ„çœ‹ä»£ç ï¼Œè¿™ä¸¤ä¸ªçº¿ç¨‹ï¼Œä»–ä»¬è·å–é”çš„é¡ºåºæ˜¯ä¸ä¸€æ ·çš„ã€‚ç¬¬ä¸€ä¸ªçº¿ç¨‹ï¼Œå…ˆè·å–lockAï¼Œå†è·å–lockBï¼Œè€Œç¬¬äºŒä¸ªçº¿ç¨‹æ­£å¥½ç›¸åï¼Œå…ˆè·å–lockBï¼Œå†è·å–lockAã€‚</p><p>ç„¶åï¼Œä½ å†çœ‹ä¸€ä¸‹æ­»é”å‰çš„æœ€åä¸¤è¡Œæ—¥å¿—ï¼Œçº¿ç¨‹1æŒæœ‰äº†lockAï¼Œç°åœ¨å°è¯•è·å–lockBï¼Œè€Œçº¿ç¨‹2æŒæœ‰äº†lockBï¼Œå°è¯•è·å–lockAã€‚ä½ å¯ä»¥æƒ³ä¸€ä¸‹è¿™ä¸ªåœºæ™¯ï¼Œä¸¤ä¸ªçº¿ç¨‹ï¼Œå„æŒæœ‰ä¸€æŠŠé”ï¼Œéƒ½ç­‰ç€å¯¹æ–¹æ‰‹é‡Œçš„å¦å¤–ä¸€æŠŠé”ï¼Œè¿™æ ·å°±åƒµæŒä½äº†ã€‚</p><p>è¿™æ˜¯æœ€ç®€å•çš„ä¸¤æŠŠé”ä¸¤ä¸ªçº¿ç¨‹æ­»é”çš„æƒ…å†µï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åˆ†ææ¸…æ¥šï¼Œä½ æƒ³æƒ³å¦‚æœä½ çš„ç¨‹åºä¸­æœ‰åå‡ æŠŠé”ï¼Œå‡ åå¤„åŠ é”è§£é”ï¼Œå‡ ç™¾çš„çº¿ç¨‹ï¼Œå¦‚æœå‡ºç°æ­»é”ä½ è¿˜èƒ½åˆ†ææ¸…æ¥šæ˜¯ä»€ä¹ˆæƒ…å†µå—ï¼Ÿ</p><p>å…³äºé¿å…æ­»é”ï¼Œæˆ‘åœ¨è¿™é‡Œç»™ä½ å‡ ç‚¹å»ºè®®ã€‚</p><ol>\n<li>å†æ¬¡å¼ºè°ƒä¸€ä¸‹ï¼Œé¿å…æ»¥ç”¨é”ï¼Œç¨‹åºé‡Œç”¨çš„é”å°‘ï¼Œå†™å‡ºæ­»é”Bugçš„å‡ ç‡è‡ªç„¶å°±ä½ã€‚</li>\n<li>å¯¹äºåŒä¸€æŠŠé”ï¼ŒåŠ é”å’Œè§£é”å¿…é¡»è¦æ”¾åœ¨åŒä¸€ä¸ªæ–¹æ³•ä¸­ï¼Œè¿™æ ·ä¸€æ¬¡åŠ é”å¯¹åº”ä¸€æ¬¡è§£é”ï¼Œä»£ç æ¸…æ™°ç®€å•ï¼Œä¾¿äºåˆ†æé—®é¢˜ã€‚</li>\n<li>å°½é‡é¿å…åœ¨æŒæœ‰ä¸€æŠŠé”çš„æƒ…å†µä¸‹ï¼Œå»è·å–å¦å¤–ä¸€æŠŠé”ï¼Œå°±æ˜¯è¦å°½é‡é¿å…åŒæ—¶æŒæœ‰å¤šæŠŠé”ã€‚</li>\n<li>å¦‚æœéœ€è¦æŒæœ‰å¤šæŠŠé”ï¼Œä¸€å®šè¦æ³¨æ„åŠ è§£é”çš„é¡ºåºï¼Œè§£é”çš„é¡ºåºè¦å’ŒåŠ é”é¡ºåºç›¸åã€‚æ¯”å¦‚ï¼Œè·å–ä¸‰æŠŠé”çš„é¡ºåºæ˜¯Aã€Bã€Cï¼Œé‡Šæ”¾é”çš„é¡ºåºå¿…é¡»æ˜¯Cã€Bã€Aã€‚</li>\n<li>ç»™ä½ ç¨‹åºä¸­æ‰€æœ‰çš„é”æ’ä¸€ä¸ªé¡ºåºï¼Œåœ¨æ‰€æœ‰éœ€è¦åŠ é”çš„åœ°æ–¹ï¼ŒæŒ‰ç…§åŒæ ·çš„é¡ºåºåŠ è§£é”ã€‚æ¯”å¦‚æˆ‘åˆšåˆšä¸¾çš„é‚£ä¸ªä¾‹å­ï¼Œå¦‚æœä¸¤ä¸ªçº¿ç¨‹éƒ½æŒ‰ç…§å…ˆè·å–lockAå†è·å–lockBçš„é¡ºåºåŠ é”ï¼Œå°±ä¸ä¼šäº§ç”Ÿæ­»é”ã€‚</li>\n</ol><p>æœ€åï¼Œä½ éœ€è¦çŸ¥é“ï¼Œå³ä½¿ä½ å®Œå…¨éµä»æˆ‘è¿™äº›å»ºè®®ï¼Œæˆ‘ä¹Ÿæ— æ³•å®Œå…¨ä¿è¯ä½ å†™å‡ºçš„ç¨‹åºå°±æ²¡æœ‰æ­»é”ï¼Œåªèƒ½è¯´ï¼Œä¼šé™ä½ä¸€äº›çŠ¯é”™è¯¯çš„æ¦‚ç‡ã€‚</p><h2>ä½¿ç”¨è¯»å†™é”è¦å…¼é¡¾æ€§èƒ½å’Œå®‰å…¨æ€§</h2><p>å¯¹äºå…±äº«æ•°æ®æ¥è¯´ï¼Œå¦‚æœè¯´æŸä¸ªæ–¹æ³•åœ¨è®¿é—®å®ƒçš„æ—¶å€™ï¼Œåªæ˜¯å»è¯»å–ï¼Œå¹¶ä¸æ›´æ–°æ•°æ®ï¼Œé‚£æ˜¯ä¸æ˜¯å°±ä¸éœ€è¦åŠ é”å‘¢ï¼Ÿè¿˜æ˜¯éœ€è¦çš„ï¼Œå› ä¸ºå¦‚æœä¸€ä¸ªçº¿ç¨‹è¯»æ•°æ®çš„åŒæ—¶ï¼Œå¦å¤–ä¸€ä¸ªçº¿ç¨‹åŒæ—¶åœ¨æ›´æ–°æ•°æ®ï¼Œé‚£ä¹ˆä½ è¯»åˆ°çš„æ•°æ®æœ‰å¯èƒ½æ˜¯æ›´æ–°åˆ°ä¸€åŠçš„æ•°æ®ï¼Œè¿™è‚¯å®šæ˜¯ä¸ç¬¦åˆé¢„æœŸçš„ã€‚æ‰€ä»¥ï¼Œæ— è®ºæ˜¯åªè¯»è®¿é—®ï¼Œè¿˜æ˜¯è¯»å†™è®¿é—®ï¼Œéƒ½æ˜¯éœ€è¦åŠ é”çš„ã€‚</p><p>å¦‚æœç»™æ•°æ®ç®€å•åœ°åŠ ä¸€æŠŠé”ï¼Œè™½ç„¶è§£å†³äº†å®‰å…¨æ€§çš„é—®é¢˜ï¼Œä½†æ˜¯ç‰ºç‰²äº†æ€§èƒ½ï¼Œå› ä¸ºï¼Œé‚£æ— è®ºè¯»è¿˜æ˜¯å†™ï¼Œéƒ½æ— æ³•å¹¶å‘äº†ï¼Œè·Ÿå•çº¿ç¨‹çš„ç¨‹åºæ€§èƒ½æ˜¯ä¸€æ ·ã€‚</p><p>å®é™…ä¸Šï¼Œå¦‚æœæ²¡æœ‰çº¿ç¨‹åœ¨æ›´æ–°æ•°æ®ï¼Œé‚£å³ä½¿å¤šä¸ªçº¿ç¨‹éƒ½åœ¨å¹¶å‘è¯»ï¼Œä¹Ÿæ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚æˆ‘åœ¨ä¸ŠèŠ‚è¯¾è·Ÿä½ è®²è¿‡ï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œæ•°æ®çš„è¯»å†™æ¯”æ˜¯ä¸å‡è¡¡çš„ï¼Œè¯»è¦è¿œè¿œå¤šäºå†™ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬å¸Œæœ›çš„æ˜¯ï¼š</p><ul>\n<li>è¯»è®¿é—®å¯ä»¥å¹¶å‘æ‰§è¡Œã€‚</li>\n<li>å†™çš„åŒæ—¶ä¸èƒ½å¹¶å‘è¯»ï¼Œä¹Ÿä¸èƒ½å¹¶å‘å†™ã€‚</li>\n</ul><p>è¿™æ ·å°±å…¼é¡¾äº†æ€§èƒ½å’Œå®‰å…¨æ€§ã€‚è¯»å†™é”å°±æ˜¯ä¸ºè¿™ä¸€éœ€æ±‚è®¾è®¡çš„ã€‚æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹Javaä¸­æä¾›çš„è¯»å†™é”ï¼š</p><pre><code>ReadWriteLock rwlock = new ReentrantReadWriteLock();\n\npublic void read() {\n  rwlock.readLock().lock();\n  try {\n    // åœ¨è¿™å„¿è¯»å–å…±äº«æ•°æ®\n  } finally {\n    rwlock.readLock().unlock();\n  }\n}\npublic void write() {\n  rwlock.writeLock().lock();\n  try {\n    // åœ¨è¿™å„¿æ›´æ–°å…±äº«æ•°æ®\n  } finally {\n    rwlock.writeLock().unlock();\n  }\n}\n</code></pre><p>åœ¨è¿™æ®µä»£ç ä¸­ï¼Œéœ€è¦è¯»æ•°æ®çš„æ—¶å€™ï¼Œæˆ‘ä»¬è·å–è¯»é”ï¼Œè·å–åˆ°çš„è¯»é”ä¸æ˜¯ä¸€ä¸ªäº’æ–¥é”ï¼Œä¹Ÿå°±æ˜¯è¯´read()æ–¹æ³•æ˜¯å¯ä»¥å¤šä¸ªçº¿ç¨‹å¹¶è¡Œæ‰§è¡Œçš„ï¼Œè¿™æ ·ä½¿å¾—è¯»æ•°æ®çš„æ€§èƒ½ä¾ç„¶å¾ˆå¥½ã€‚å†™æ•°æ®çš„æ—¶å€™ï¼Œæˆ‘ä»¬è·å–å†™é”ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹æŒæœ‰å†™é”çš„æ—¶å€™ï¼Œå…¶ä»–çº¿ç¨‹æ—¢æ— æ³•è·å–è¯»é”ï¼Œä¹Ÿä¸èƒ½è·å–å†™é”ï¼Œè¾¾åˆ°ä¿æŠ¤å…±äº«æ•°æ®çš„ç›®çš„ã€‚</p><p>è¿™æ ·ï¼Œä½¿ç”¨è¯»å†™é”å°±å…¼é¡¾äº†æ€§èƒ½å’Œå®‰å…¨ã€‚</p><h2>å°ç»“</h2><p>é”å¯ä»¥ä¿æŠ¤å…±äº«èµ„æºï¼Œé¿å…å¹¶å‘æ›´æ–°é€ æˆçš„æ•°æ®é”™è¯¯ã€‚åªæœ‰æŒæœ‰é”çš„çº¿ç¨‹æ‰èƒ½è®¿é—®è¢«ä¿æŠ¤èµ„æºã€‚çº¿ç¨‹åœ¨è®¿é—®èµ„æºä¹‹å‰å¿…é¡»è·å–é”ï¼Œè®¿é—®å®Œæˆåä¸€å®šè¦è®°å¾—é‡Šæ”¾é”ã€‚</p><p>ä¸€å®šä¸è¦æ»¥ç”¨é”ï¼Œå¦åˆ™å®¹æ˜“å¯¼è‡´æ­»é”ã€‚æ­»é”çš„åŸå› ï¼Œä¸»è¦ç”±äºå¤šä¸ªçº¿ç¨‹ä¸­å¤šæŠŠé”ç›¸äº’äº‰ç”¨å¯¼è‡´çš„ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå¦‚æœç¨‹åºä¸­ä½¿ç”¨çš„é”æ¯”è¾ƒå¤šï¼Œå¾ˆéš¾åˆ†ææ­»é”çš„åŸå› ï¼Œæ‰€ä»¥éœ€è¦å°½é‡å°‘çš„ä½¿ç”¨é”ï¼Œå¹¶ä¸”ä¿æŒç¨‹åºçš„ç»“æ„å°½é‡ç®€å•ã€æ¸…æ™°ã€‚</p><p>æœ€åï¼Œæˆ‘ä»¬ä»‹ç»äº†è¯»å†™é”ï¼Œåœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œä½¿ç”¨è¯»å†™é”å¯ä»¥å…¼é¡¾æ€§èƒ½å’Œå®‰å…¨æ€§ï¼Œæ˜¯éå¸¸å¥½çš„é€‰æ‹©ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>æˆ‘åˆšåˆšè®²åˆ°ï¼ŒPythonä¸­æä¾›äº†try-with-lockï¼Œä¸éœ€è¦æ˜¾å¼åœ°è·å–å’Œé‡Šæ”¾é”ï¼Œéå¸¸æ–¹ä¾¿ã€‚é—æ†¾çš„æ˜¯ï¼Œåœ¨Javaä¸­å¹¶æ²¡æœ‰è¿™æ ·çš„æœºåˆ¶ï¼Œé‚£ä½ èƒ½ä¸èƒ½è‡ªå·±åœ¨Javaä¸­å®ç°ä¸€ä¸ªtry-with-lockå‘¢ï¼Ÿ</p><p>æ¬¢è¿ä½ æŠŠä»£ç ä¸Šä¼ åˆ°GitHubä¸Šï¼Œç„¶ååœ¨è¯„è®ºåŒºç»™å‡ºè®¿é—®é“¾æ¥ã€‚å¦‚æœä½ æœ‰ä»»ä½•é—®é¢˜ï¼Œä¹Ÿå¯ä»¥åœ¨è¯„è®ºåŒºç•™è¨€ä¸æˆ‘äº¤æµã€‚</p><p>æ„Ÿè°¢é˜…è¯»ï¼Œå¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰ä¸€äº›å¯å‘ï¼Œä¹Ÿæ¬¢è¿æŠŠå®ƒåˆ†äº«ç»™ä½ çš„æœ‹å‹ã€‚</p><p></p>","neighbors":{"left":{"article_title":"16 | ç¼“å­˜ç­–ç•¥ï¼šå¦‚ä½•ä½¿ç”¨ç¼“å­˜æ¥å‡å°‘ç£ç›˜IOï¼Ÿ","id":128038},"right":{"article_title":"18 | å¦‚ä½•ç”¨ç¡¬ä»¶åŒæ­¥åŸè¯­ï¼ˆCASï¼‰æ›¿ä»£é”ï¼Ÿ","id":130743}},"comments":[{"had_liked":false,"id":129932,"user_name":"ç³–é†‹ğŸ€","can_delete":false,"product_type":"c1","uid":1118333,"ip_address":"","ucode":"E6FD12D630B439","user_header":"https://static001.geekbang.org/account/avatar/00/11/10/7d/a9b5d5f0.jpg","comment_is_top":false,"comment_ctime":1567329109,"is_pvip":false,"replies":[{"id":48562,"content":"ğŸ‘ğŸ‘ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1567404371,"ip_address":"","comment_id":129932,"utype":1}],"discussion_count":4,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"java7å¼€å§‹ioå°±æœ‰try-with-resourceã€‚\nå¯ä»¥åˆ©ç”¨è¿™ä¸€ä¸ªç‰¹æ€§ï¼Œæ¥è¯´å®ç°ï¼Œè‡ªåŠ¨é‡Šæ”¾ã€‚\nä»£ç å¦‚ä¸‹ï¼š\n\npublic class AutoUnlockProxy implements Closeable {\n\n    private Lock lock;\n\n    public AutoUnlockProxy(Lock lock) {\n        this.lock = lock;\n    }\n\n    @Override\n    public void close() throws IOException {\n        lock.unlock();\n        System.out.println(&quot;é‡Šæ”¾é”&quot;);\n    }\n\n    public void lock() {\n        lock.lock();\n    }\n\n    public void tryLock(long time, TimeUnit unit) throws InterruptedException {\n        lock.tryLock(time, unit);\n    }\n\n    public static void main(String[] args) {\n\n        try (AutoUnlockProxy autoUnlockProxy = new AutoUnlockProxy(new ReentrantLock())) {\n            autoUnlockProxy.lock();\n            System.out.println(&quot;åŠ é”äº†&quot;);\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n\n    }\n\n}","like_count":74},{"had_liked":false,"id":129900,"user_name":"humor","can_delete":false,"product_type":"c1","uid":1181867,"ip_address":"","ucode":"9B48C4C7BEC92C","user_header":"https://static001.geekbang.org/account/avatar/00/12/08/ab/caec7bca.jpg","comment_is_top":false,"comment_ctime":1567321459,"is_pvip":false,"replies":[{"id":48724,"content":"ğŸ‘ğŸ‘ğŸ‘\n","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1567491924,"ip_address":"","comment_id":129900,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"&#47;**\n*ä¸šåŠ¡è°ƒç”¨æ¥å£\n**&#47;\npublic interface Invoker{\n\tvoid invoke();\n}\n\n&#47;**\n*try-with-lock\n**&#47;\npublic class RLock{\n\tprivate Lock lock = new ReentrantLock();\n\n\tpublic void run(Invoker invoker) {\n\t\tlock.lock();\n\t\ttry{\n\t\t\tinvoker.invoke();\n\t\t} finally{\n\t\t\tlock.unlock();\n\t\t}\n\t}\n}\n\npublic BizInvoker implements Inoker{\n\tprivate RLock rLock = new RLock();\n\tpublic void invoke() {\n\t\t&#47;&#47;éœ€è¦åŠ é”çš„ä¸šåŠ¡é€»è¾‘\n\t}\n\n\tpublic static void main(String[] args) {\n\t\trLock.run(new BizInvoker());\n\t}\n}","like_count":15,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465724,"discussion_content":"ğŸ‘ğŸ‘ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567404371,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1532404,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEIvUlicgrWtibbDzwhLw5cQrDSy2JuE1mVvmXq11KQIwpLicgDuWfpp9asE0VCN6HhibPDWn7wBc2lfmA/132","nickname":"aã€","note":"","ucode":"590FE8DB111492","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":7110,"discussion_content":"ä½ è¿™ä¸ªæ–¹æ³•æœ‰ç‚¹é—®é¢˜ï¼Œæ¯æ¬¡new ReentrantlLockï¼Œæ ¹æœ¬é”ä¸ä½å§ï¼Œåº”è¯¥æŠŠnewåŠ¨ä½œæå‡ºæ¥","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1567388274,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1365147,"avatar":"https://static001.geekbang.org/account/avatar/00/14/d4/9b/5d69d4d3.jpg","nickname":"binary","note":"","ucode":"084B71B8695727","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1532404,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEIvUlicgrWtibbDzwhLw5cQrDSy2JuE1mVvmXq11KQIwpLicgDuWfpp9asE0VCN6HhibPDWn7wBc2lfmA/132","nickname":"aã€","note":"","ucode":"590FE8DB111492","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":7179,"discussion_content":"èµåŒ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567416721,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":7110,"ip_address":"","group_id":0},"score":7179,"extra":""},{"author":{"id":1118333,"avatar":"https://static001.geekbang.org/account/avatar/00/11/10/7d/a9b5d5f0.jpg","nickname":"ç³–é†‹ğŸ€","note":"","ucode":"E6FD12D630B439","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1532404,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEIvUlicgrWtibbDzwhLw5cQrDSy2JuE1mVvmXq11KQIwpLicgDuWfpp9asE0VCN6HhibPDWn7wBc2lfmA/132","nickname":"aã€","note":"","ucode":"590FE8DB111492","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":7245,"discussion_content":"å—¯ï¼Œé¡ºæ‰‹å†™äº†ä¸‹ã€‚\nä¼˜åŒ–ç‚¹è¿˜æœ‰å¥½å‡ ä¸ªã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567427513,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":7110,"ip_address":"","group_id":0},"score":7245,"extra":""}]}]},{"had_liked":false,"id":129996,"user_name":"Cast","can_delete":false,"product_type":"c1","uid":1315515,"ip_address":"","ucode":"226B483C60F797","user_header":"","comment_is_top":false,"comment_ctime":1567348638,"is_pvip":false,"replies":[{"id":48725,"content":"å¦‚æœé‡Šæ”¾å‡ æŠŠé”çš„è¿‡ç¨‹ä¸­ï¼Œä¸å†æœ‰å…¶å®ƒåŠ é”çš„ä»£ç ï¼Œæ­£åºé‡Šæ”¾ä¹Ÿæ˜¯æ²¡é—®é¢˜çš„ã€‚\n\né€†åºé‡Šæ”¾åªæ˜¯ä¸€ç§ä¹ æƒ¯ï¼Œè®©ä»£ç çš„ç»“æ„æ›´æ¸…æ™°ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1567492392,"ip_address":"","comment_id":129996,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"è€å¸ˆï¼Œè¯·é—®ä¸ºä»€ä¹ˆè¦æŒ‰é€†åºå»é‡Šæ”¾é”å‘¢ï¼ŸæŒ‰ç…§è·å–çš„é¡ºåºå»é‡Šæ”¾å¥½åƒä¹Ÿæ²¡ä»€ä¹ˆæ¯›ç—…å§ï¼Ÿ","like_count":10,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465705,"discussion_content":"ğŸ‘ğŸ‘ğŸ‘\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567491924,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":207556,"user_name":"å–œæ¬¢åœ°çƒçš„é˜¿åŸ¹åŒå­¦","can_delete":false,"product_type":"c1","uid":1361746,"ip_address":"","ucode":"5F97037585F857","user_header":"https://static001.geekbang.org/account/avatar/00/14/c7/52/c5adf218.jpg","comment_is_top":false,"comment_ctime":1587107224,"is_pvip":false,"replies":[{"id":77841,"content":"ä¸ä¼šã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1587352172,"ip_address":"","comment_id":207556,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"è€å¸ˆçªç„¶æƒ³åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œå‡è®¾ç°åœ¨100ä¸ªçº¿ç¨‹ï¼Œä¸€ä¸ªçº¿ç¨‹æ­£åœ¨è¿è¡Œï¼Œ99ä¸ªçº¿ç¨‹æ­£åœ¨é˜»å¡(ç­‰å¾…é”é‡Šæ”¾)ï¼Œé‚£ä¹ˆä¼šå¯¼è‡´CPUä¸Šä¸‹æ–‡é¢‘ç¹åˆ‡æ¢å—ï¼Ÿ","like_count":7,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":492165,"discussion_content":"ä¸ä¼šã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587352172,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":175511,"user_name":"é“","can_delete":false,"product_type":"c1","uid":1100869,"ip_address":"","ucode":"B17CA7372C21C1","user_header":"https://static001.geekbang.org/account/avatar/00/10/cc/45/73a0f7f8.jpg","comment_is_top":false,"comment_ctime":1580736786,"is_pvip":false,"replies":[{"id":68336,"content":"è¿˜æ˜¯è¦çœ‹å…·ä½“çš„ä½¿ç”¨åœºæ™¯ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1580864036,"ip_address":"","comment_id":175511,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"é˜»å¡é˜Ÿåˆ—èƒ½å¤Ÿè§£å†³å¤§éƒ¨åˆ†å¹¶å‘è®¿é—®çš„é—®é¢˜ï¼ŒGolangå¯¹ä»–å°±æä¾›äº†è¯­è¨€å±‚é¢çš„æ”¯æŒï¼Œä¸ºä½•ç°å®ä¸­ç”¨çš„ä¸å¤šå“©ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":482768,"discussion_content":"è¿˜æ˜¯è¦çœ‹å…·ä½“çš„ä½¿ç”¨åœºæ™¯ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580864036,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":139073,"user_name":"é•¿æœŸè§„åˆ’","can_delete":false,"product_type":"c1","uid":1019332,"ip_address":"","ucode":"5EF65E9115834B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8d/c4/6f97daea.jpg","comment_is_top":false,"comment_ctime":1570541101,"is_pvip":false,"replies":[{"id":53645,"content":"æ˜¯çš„ï¼Œåªæœ‰è¯»é”ä¹‹é—´æ˜¯å…±äº«çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1570583483,"ip_address":"","comment_id":139073,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"é‚£ä¸ªè¯»å†™é”ï¼Œè¯»é”å’Œå†™é”ä¹‹é—´åº”è¯¥ä¹Ÿæ˜¯äº’æ–¥çš„å§","like_count":1,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":469777,"discussion_content":"æ˜¯çš„ï¼Œåªæœ‰è¯»é”ä¹‹é—´æ˜¯å…±äº«çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570583483,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":139074,"user_name":"é•¿æœŸè§„åˆ’","can_delete":false,"product_type":"c1","uid":1019332,"ip_address":"","ucode":"5EF65E9115834B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8d/c4/6f97daea.jpg","comment_is_top":false,"comment_ctime":1570541544,"is_pvip":false,"replies":[{"id":53644,"content":"å³ä½¿æ˜¯è¿™æ ·ä¹Ÿä¸èƒ½å®Œå…¨ä¿è¯æ²¡æœ‰æ­»é”ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1570583460,"ip_address":"","comment_id":139074,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"è€å¸ˆï¼Œåªè¦ä¿è¯æ‰€æœ‰ä½¿ç”¨é”çš„åœ°æ–¹éƒ½æŒ‰ç›¸åŒçš„é¡ºåºè·å–ï¼Œè€Œä¸”æŒ‰è·å–çš„é¡ºåºçš„ååºè§£é”ï¼Œåº”è¯¥å°±ä¸ä¼šå‘ç”Ÿæ­»é”äº†å§ã€‚","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":469778,"discussion_content":"å³ä½¿æ˜¯è¿™æ ·ä¹Ÿä¸èƒ½å®Œå…¨ä¿è¯æ²¡æœ‰æ­»é”ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570583460,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1019332,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8d/c4/6f97daea.jpg","nickname":"é•¿æœŸè§„åˆ’","note":"","ucode":"5EF65E9115834B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":25995,"discussion_content":"è€å¸ˆï¼Œèƒ½ä¸¾ä¸ªä¾‹å­è¯´æ˜ä¸€ä¸‹å—","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1570583785,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1747803,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/ab/5b/eb3983f0.jpg","nickname":"liuchao90h","note":"","ucode":"30A89E766EED2B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1019332,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8d/c4/6f97daea.jpg","nickname":"é•¿æœŸè§„åˆ’","note":"","ucode":"5EF65E9115834B","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":577048,"discussion_content":"mysqlé—´éš™é”ç®—å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655901628,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":25995,"ip_address":"","group_id":0},"score":577048,"extra":""}]}]},{"had_liked":false,"id":130667,"user_name":"æ˜æ—¥","can_delete":false,"product_type":"c1","uid":1003917,"ip_address":"","ucode":"348899EC65AE8D","user_header":"https://static001.geekbang.org/account/avatar/00/0f/51/8d/09f28606.jpg","comment_is_top":false,"comment_ctime":1567504751,"is_pvip":false,"replies":[{"id":48978,"content":"è¿™æ ·åšåº”è¯¥æ˜¯å¯ä»¥çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1567564483,"ip_address":"","comment_id":130667,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"è¯·é—®è€å¸ˆè¿™ç§åœ¨new å¯¹è±¡è¿‡ç¨‹ä¸­é”å®šå…±äº«é”çš„æ–¹å¼æ˜¯å¦å¯è¡Œ \n ä»£ç : https:&#47;&#47;gist.github.com&#47;imgaoxin&#47;91234a9edbf083b10244221493ce7fb5","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465882,"discussion_content":"æ˜¯çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567490525,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":130268,"user_name":"åˆ˜å¤©é¹","can_delete":false,"product_type":"c1","uid":1632015,"ip_address":"","ucode":"FB146250578911","user_header":"https://static001.geekbang.org/account/avatar/00/18/e7/0f/fa840c1b.jpg","comment_is_top":false,"comment_ctime":1567415720,"is_pvip":false,"replies":[{"id":48721,"content":"æ˜¯çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1567490525,"ip_address":"","comment_id":130268,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"å¯¹äºgolangåº”è¯¥å°±æ˜¯è¿™æ ·å§\nfunc foo(){\n  lock.Lock()\n  defer lock.Unlock()\n  &#47;&#47;do something...\n}","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465882,"discussion_content":"æ˜¯çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567490525,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":130239,"user_name":"ä½ è¯´çš„ç°","can_delete":false,"product_type":"c1","uid":1158981,"ip_address":"","ucode":"650FA935A7741F","user_header":"https://static001.geekbang.org/account/avatar/00/11/af/45/8bacada2.jpg","comment_is_top":false,"comment_ctime":1567410860,"is_pvip":false,"replies":[{"id":48730,"content":"æ”¾åˆ°tryä¹‹åçš„ç¬¬ä¸€å¥ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1567492898,"ip_address":"","comment_id":130239,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"\npublic void visitShareResWithLock() {\n  lock.lock();\n  try {\n    &#47;&#47; åœ¨è¿™é‡Œå®‰å…¨çš„è®¿é—®å…±äº«èµ„æº\n  } finally {\n    lock.unlock();\n  }\n}\n\n lock.lock(); åŠ é”è¯­å¥æ”¾åœ¨ try catch é‡Œé¢æ˜¯å¦å¯ä»¥ã€‚ä¸ºä»€ä¹ˆå¾ˆå¤šç¤ºä¾‹ä»£ç éƒ½æ”¾åœ¨å¤–é¢ã€‚","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465871,"discussion_content":"æ”¾åˆ°tryä¹‹åçš„ç¬¬ä¸€å¥ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567492898,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1365147,"avatar":"https://static001.geekbang.org/account/avatar/00/14/d4/9b/5d69d4d3.jpg","nickname":"binary","note":"","ucode":"084B71B8695727","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":7180,"discussion_content":" lock.lock(); åŠ é”è¯­å¥æ”¾åœ¨ tryé‡Œé¢çš„è¯ï¼Œæ˜¯ä¸å®‰å…¨çš„ã€‚\n\nå› ä¸ºlock.lock(); åŠ é”å¯èƒ½æˆåŠŸï¼Œä¹Ÿå¯èƒ½ä¼šå¤±è´¥ã€‚å¦‚æœåœ¨tryé‡Œé¢çš„è¯ï¼Œåœ¨åŠ é”å¤±è´¥çš„æƒ…å†µä¸‹ï¼Œä»ç„¶ä¼šåœ¨finallyé‡Œé¢æ‰§è¡Œlock.unlock();ï¼Œå°†å¯¼è‡´æœªåŠ é”æˆåŠŸï¼Œä½†æ˜¯å´å»é‡Šæ”¾é”çš„ç»“æœã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567417174,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":129932,"user_name":"ç³–é†‹ğŸ€","can_delete":false,"product_type":"c1","uid":1118333,"ip_address":"","ucode":"E6FD12D630B439","user_header":"https://static001.geekbang.org/account/avatar/00/11/10/7d/a9b5d5f0.jpg","comment_is_top":false,"comment_ctime":1567329109,"is_pvip":false,"replies":[{"id":48562,"content":"ğŸ‘ğŸ‘ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1567404371,"ip_address":"","comment_id":129932,"utype":1}],"discussion_count":4,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"java7å¼€å§‹ioå°±æœ‰try-with-resourceã€‚\nå¯ä»¥åˆ©ç”¨è¿™ä¸€ä¸ªç‰¹æ€§ï¼Œæ¥è¯´å®ç°ï¼Œè‡ªåŠ¨é‡Šæ”¾ã€‚\nä»£ç å¦‚ä¸‹ï¼š\n\npublic class AutoUnlockProxy implements Closeable {\n\n    private Lock lock;\n\n    public AutoUnlockProxy(Lock lock) {\n        this.lock = lock;\n    }\n\n    @Override\n    public void close() throws IOException {\n        lock.unlock();\n        System.out.println(&quot;é‡Šæ”¾é”&quot;);\n    }\n\n    public void lock() {\n        lock.lock();\n    }\n\n    public void tryLock(long time, TimeUnit unit) throws InterruptedException {\n        lock.tryLock(time, unit);\n    }\n\n    public static void main(String[] args) {\n\n        try (AutoUnlockProxy autoUnlockProxy = new AutoUnlockProxy(new ReentrantLock())) {\n            autoUnlockProxy.lock();\n            System.out.println(&quot;åŠ é”äº†&quot;);\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n\n    }\n\n}","like_count":74,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465724,"discussion_content":"ğŸ‘ğŸ‘ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567404371,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1532404,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEIvUlicgrWtibbDzwhLw5cQrDSy2JuE1mVvmXq11KQIwpLicgDuWfpp9asE0VCN6HhibPDWn7wBc2lfmA/132","nickname":"aã€","note":"","ucode":"590FE8DB111492","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":7110,"discussion_content":"ä½ è¿™ä¸ªæ–¹æ³•æœ‰ç‚¹é—®é¢˜ï¼Œæ¯æ¬¡new ReentrantlLockï¼Œæ ¹æœ¬é”ä¸ä½å§ï¼Œåº”è¯¥æŠŠnewåŠ¨ä½œæå‡ºæ¥","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1567388274,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1365147,"avatar":"https://static001.geekbang.org/account/avatar/00/14/d4/9b/5d69d4d3.jpg","nickname":"binary","note":"","ucode":"084B71B8695727","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1532404,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEIvUlicgrWtibbDzwhLw5cQrDSy2JuE1mVvmXq11KQIwpLicgDuWfpp9asE0VCN6HhibPDWn7wBc2lfmA/132","nickname":"aã€","note":"","ucode":"590FE8DB111492","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":7179,"discussion_content":"èµåŒ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567416721,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":7110,"ip_address":"","group_id":0},"score":7179,"extra":""},{"author":{"id":1118333,"avatar":"https://static001.geekbang.org/account/avatar/00/11/10/7d/a9b5d5f0.jpg","nickname":"ç³–é†‹ğŸ€","note":"","ucode":"E6FD12D630B439","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1532404,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEIvUlicgrWtibbDzwhLw5cQrDSy2JuE1mVvmXq11KQIwpLicgDuWfpp9asE0VCN6HhibPDWn7wBc2lfmA/132","nickname":"aã€","note":"","ucode":"590FE8DB111492","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":7245,"discussion_content":"å—¯ï¼Œé¡ºæ‰‹å†™äº†ä¸‹ã€‚\nä¼˜åŒ–ç‚¹è¿˜æœ‰å¥½å‡ ä¸ªã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567427513,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":7110,"ip_address":"","group_id":0},"score":7245,"extra":""}]}]},{"had_liked":false,"id":129900,"user_name":"humor","can_delete":false,"product_type":"c1","uid":1181867,"ip_address":"","ucode":"9B48C4C7BEC92C","user_header":"https://static001.geekbang.org/account/avatar/00/12/08/ab/caec7bca.jpg","comment_is_top":false,"comment_ctime":1567321459,"is_pvip":false,"replies":[{"id":48724,"content":"ğŸ‘ğŸ‘ğŸ‘\n","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1567491924,"ip_address":"","comment_id":129900,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"&#47;**\n*ä¸šåŠ¡è°ƒç”¨æ¥å£\n**&#47;\npublic interface Invoker{\n\tvoid invoke();\n}\n\n&#47;**\n*try-with-lock\n**&#47;\npublic class RLock{\n\tprivate Lock lock = new ReentrantLock();\n\n\tpublic void run(Invoker invoker) {\n\t\tlock.lock();\n\t\ttry{\n\t\t\tinvoker.invoke();\n\t\t} finally{\n\t\t\tlock.unlock();\n\t\t}\n\t}\n}\n\npublic BizInvoker implements Inoker{\n\tprivate RLock rLock = new RLock();\n\tpublic void invoke() {\n\t\t&#47;&#47;éœ€è¦åŠ é”çš„ä¸šåŠ¡é€»è¾‘\n\t}\n\n\tpublic static void main(String[] args) {\n\t\trLock.run(new BizInvoker());\n\t}\n}","like_count":15,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465705,"discussion_content":"ğŸ‘ğŸ‘ğŸ‘\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567491924,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":129996,"user_name":"Cast","can_delete":false,"product_type":"c1","uid":1315515,"ip_address":"","ucode":"226B483C60F797","user_header":"","comment_is_top":false,"comment_ctime":1567348638,"is_pvip":false,"replies":[{"id":48725,"content":"å¦‚æœé‡Šæ”¾å‡ æŠŠé”çš„è¿‡ç¨‹ä¸­ï¼Œä¸å†æœ‰å…¶å®ƒåŠ é”çš„ä»£ç ï¼Œæ­£åºé‡Šæ”¾ä¹Ÿæ˜¯æ²¡é—®é¢˜çš„ã€‚\n\né€†åºé‡Šæ”¾åªæ˜¯ä¸€ç§ä¹ æƒ¯ï¼Œè®©ä»£ç çš„ç»“æ„æ›´æ¸…æ™°ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1567492392,"ip_address":"","comment_id":129996,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"è€å¸ˆï¼Œè¯·é—®ä¸ºä»€ä¹ˆè¦æŒ‰é€†åºå»é‡Šæ”¾é”å‘¢ï¼ŸæŒ‰ç…§è·å–çš„é¡ºåºå»é‡Šæ”¾å¥½åƒä¹Ÿæ²¡ä»€ä¹ˆæ¯›ç—…å§ï¼Ÿ","like_count":10,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465754,"discussion_content":"å¦‚æœé‡Šæ”¾å‡ æŠŠé”çš„è¿‡ç¨‹ä¸­ï¼Œä¸å†æœ‰å…¶å®ƒåŠ é”çš„ä»£ç ï¼Œæ­£åºé‡Šæ”¾ä¹Ÿæ˜¯æ²¡é—®é¢˜çš„ã€‚\n\né€†åºé‡Šæ”¾åªæ˜¯ä¸€ç§ä¹ æƒ¯ï¼Œè®©ä»£ç çš„ç»“æ„æ›´æ¸…æ™°ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567492392,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2257630,"avatar":"https://static001.geekbang.org/account/avatar/00/22/72/de/7f5d9468.jpg","nickname":"Xã€‚","note":"","ucode":"1B4CB1A21F280A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":590164,"discussion_content":"ä¸‡ä¸€ç´¢åµŒå¥—ï¼Œä¸å°±å¾—é€†åºäº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1665561262,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æ±Ÿè¥¿","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1481811,"avatar":"https://static001.geekbang.org/account/avatar/00/16/9c/53/ade0afb0.jpg","nickname":"ub8","note":"","ucode":"0D937C3EAEB781","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":82796,"discussion_content":"çœ‹å®Œåå…¶å®æˆ‘ä¹Ÿæ²¡æ˜ç™½ä¸ºå•¥è¦æŒ‰é€†åºå»é‡Šæ”¾é”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576380998,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":207556,"user_name":"å–œæ¬¢åœ°çƒçš„é˜¿åŸ¹åŒå­¦","can_delete":false,"product_type":"c1","uid":1361746,"ip_address":"","ucode":"5F97037585F857","user_header":"https://static001.geekbang.org/account/avatar/00/14/c7/52/c5adf218.jpg","comment_is_top":false,"comment_ctime":1587107224,"is_pvip":false,"replies":[{"id":77841,"content":"ä¸ä¼šã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1587352172,"ip_address":"","comment_id":207556,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"è€å¸ˆçªç„¶æƒ³åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œå‡è®¾ç°åœ¨100ä¸ªçº¿ç¨‹ï¼Œä¸€ä¸ªçº¿ç¨‹æ­£åœ¨è¿è¡Œï¼Œ99ä¸ªçº¿ç¨‹æ­£åœ¨é˜»å¡(ç­‰å¾…é”é‡Šæ”¾)ï¼Œé‚£ä¹ˆä¼šå¯¼è‡´CPUä¸Šä¸‹æ–‡é¢‘ç¹åˆ‡æ¢å—ï¼Ÿ","like_count":7,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465754,"discussion_content":"å¦‚æœé‡Šæ”¾å‡ æŠŠé”çš„è¿‡ç¨‹ä¸­ï¼Œä¸å†æœ‰å…¶å®ƒåŠ é”çš„ä»£ç ï¼Œæ­£åºé‡Šæ”¾ä¹Ÿæ˜¯æ²¡é—®é¢˜çš„ã€‚\n\né€†åºé‡Šæ”¾åªæ˜¯ä¸€ç§ä¹ æƒ¯ï¼Œè®©ä»£ç çš„ç»“æ„æ›´æ¸…æ™°ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567492392,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2257630,"avatar":"https://static001.geekbang.org/account/avatar/00/22/72/de/7f5d9468.jpg","nickname":"Xã€‚","note":"","ucode":"1B4CB1A21F280A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":590164,"discussion_content":"ä¸‡ä¸€ç´¢åµŒå¥—ï¼Œä¸å°±å¾—é€†åºäº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1665561262,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æ±Ÿè¥¿","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1481811,"avatar":"https://static001.geekbang.org/account/avatar/00/16/9c/53/ade0afb0.jpg","nickname":"ub8","note":"","ucode":"0D937C3EAEB781","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":82796,"discussion_content":"çœ‹å®Œåå…¶å®æˆ‘ä¹Ÿæ²¡æ˜ç™½ä¸ºå•¥è¦æŒ‰é€†åºå»é‡Šæ”¾é”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576380998,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":175511,"user_name":"é“","can_delete":false,"product_type":"c1","uid":1100869,"ip_address":"","ucode":"B17CA7372C21C1","user_header":"https://static001.geekbang.org/account/avatar/00/10/cc/45/73a0f7f8.jpg","comment_is_top":false,"comment_ctime":1580736786,"is_pvip":false,"replies":[{"id":68336,"content":"è¿˜æ˜¯è¦çœ‹å…·ä½“çš„ä½¿ç”¨åœºæ™¯ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1580864036,"ip_address":"","comment_id":175511,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"é˜»å¡é˜Ÿåˆ—èƒ½å¤Ÿè§£å†³å¤§éƒ¨åˆ†å¹¶å‘è®¿é—®çš„é—®é¢˜ï¼ŒGolangå¯¹ä»–å°±æä¾›äº†è¯­è¨€å±‚é¢çš„æ”¯æŒï¼Œä¸ºä½•ç°å®ä¸­ç”¨çš„ä¸å¤šå“©ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":492165,"discussion_content":"ä¸ä¼šã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587352172,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":139073,"user_name":"é•¿æœŸè§„åˆ’","can_delete":false,"product_type":"c1","uid":1019332,"ip_address":"","ucode":"5EF65E9115834B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8d/c4/6f97daea.jpg","comment_is_top":false,"comment_ctime":1570541101,"is_pvip":false,"replies":[{"id":53645,"content":"æ˜¯çš„ï¼Œåªæœ‰è¯»é”ä¹‹é—´æ˜¯å…±äº«çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1570583483,"ip_address":"","comment_id":139073,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"é‚£ä¸ªè¯»å†™é”ï¼Œè¯»é”å’Œå†™é”ä¹‹é—´åº”è¯¥ä¹Ÿæ˜¯äº’æ–¥çš„å§","like_count":1,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":482768,"discussion_content":"è¿˜æ˜¯è¦çœ‹å…·ä½“çš„ä½¿ç”¨åœºæ™¯ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580864036,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":139074,"user_name":"é•¿æœŸè§„åˆ’","can_delete":false,"product_type":"c1","uid":1019332,"ip_address":"","ucode":"5EF65E9115834B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8d/c4/6f97daea.jpg","comment_is_top":false,"comment_ctime":1570541544,"is_pvip":false,"replies":[{"id":53644,"content":"å³ä½¿æ˜¯è¿™æ ·ä¹Ÿä¸èƒ½å®Œå…¨ä¿è¯æ²¡æœ‰æ­»é”ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1570583460,"ip_address":"","comment_id":139074,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"è€å¸ˆï¼Œåªè¦ä¿è¯æ‰€æœ‰ä½¿ç”¨é”çš„åœ°æ–¹éƒ½æŒ‰ç›¸åŒçš„é¡ºåºè·å–ï¼Œè€Œä¸”æŒ‰è·å–çš„é¡ºåºçš„ååºè§£é”ï¼Œåº”è¯¥å°±ä¸ä¼šå‘ç”Ÿæ­»é”äº†å§ã€‚","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":469777,"discussion_content":"æ˜¯çš„ï¼Œåªæœ‰è¯»é”ä¹‹é—´æ˜¯å…±äº«çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570583483,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":130667,"user_name":"æ˜æ—¥","can_delete":false,"product_type":"c1","uid":1003917,"ip_address":"","ucode":"348899EC65AE8D","user_header":"https://static001.geekbang.org/account/avatar/00/0f/51/8d/09f28606.jpg","comment_is_top":false,"comment_ctime":1567504751,"is_pvip":false,"replies":[{"id":48978,"content":"è¿™æ ·åšåº”è¯¥æ˜¯å¯ä»¥çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1567564483,"ip_address":"","comment_id":130667,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"è¯·é—®è€å¸ˆè¿™ç§åœ¨new å¯¹è±¡è¿‡ç¨‹ä¸­é”å®šå…±äº«é”çš„æ–¹å¼æ˜¯å¦å¯è¡Œ \n ä»£ç : https:&#47;&#47;gist.github.com&#47;imgaoxin&#47;91234a9edbf083b10244221493ce7fb5","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466058,"discussion_content":"è¿™æ ·åšåº”è¯¥æ˜¯å¯ä»¥çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567564483,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":130268,"user_name":"åˆ˜å¤©é¹","can_delete":false,"product_type":"c1","uid":1632015,"ip_address":"","ucode":"FB146250578911","user_header":"https://static001.geekbang.org/account/avatar/00/18/e7/0f/fa840c1b.jpg","comment_is_top":false,"comment_ctime":1567415720,"is_pvip":false,"replies":[{"id":48721,"content":"æ˜¯çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1567490525,"ip_address":"","comment_id":130268,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"å¯¹äºgolangåº”è¯¥å°±æ˜¯è¿™æ ·å§\nfunc foo(){\n  lock.Lock()\n  defer lock.Unlock()\n  &#47;&#47;do something...\n}","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":469778,"discussion_content":"å³ä½¿æ˜¯è¿™æ ·ä¹Ÿä¸èƒ½å®Œå…¨ä¿è¯æ²¡æœ‰æ­»é”ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570583460,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1019332,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8d/c4/6f97daea.jpg","nickname":"é•¿æœŸè§„åˆ’","note":"","ucode":"5EF65E9115834B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":25995,"discussion_content":"è€å¸ˆï¼Œèƒ½ä¸¾ä¸ªä¾‹å­è¯´æ˜ä¸€ä¸‹å—","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1570583785,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1747803,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/ab/5b/eb3983f0.jpg","nickname":"liuchao90h","note":"","ucode":"30A89E766EED2B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1019332,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8d/c4/6f97daea.jpg","nickname":"é•¿æœŸè§„åˆ’","note":"","ucode":"5EF65E9115834B","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":577048,"discussion_content":"mysqlé—´éš™é”ç®—å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655901628,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":25995,"ip_address":"","group_id":0},"score":577048,"extra":""}]}]},{"had_liked":false,"id":130239,"user_name":"ä½ è¯´çš„ç°","can_delete":false,"product_type":"c1","uid":1158981,"ip_address":"","ucode":"650FA935A7741F","user_header":"https://static001.geekbang.org/account/avatar/00/11/af/45/8bacada2.jpg","comment_is_top":false,"comment_ctime":1567410860,"is_pvip":false,"replies":[{"id":48730,"content":"æ”¾åˆ°tryä¹‹åçš„ç¬¬ä¸€å¥ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1567492898,"ip_address":"","comment_id":130239,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"\npublic void visitShareResWithLock() {\n  lock.lock();\n  try {\n    &#47;&#47; åœ¨è¿™é‡Œå®‰å…¨çš„è®¿é—®å…±äº«èµ„æº\n  } finally {\n    lock.unlock();\n  }\n}\n\n lock.lock(); åŠ é”è¯­å¥æ”¾åœ¨ try catch é‡Œé¢æ˜¯å¦å¯ä»¥ã€‚ä¸ºä»€ä¹ˆå¾ˆå¤šç¤ºä¾‹ä»£ç éƒ½æ”¾åœ¨å¤–é¢ã€‚","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466058,"discussion_content":"è¿™æ ·åšåº”è¯¥æ˜¯å¯ä»¥çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567564483,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":129800,"user_name":"Geek_q29f6t","can_delete":false,"product_type":"c1","uid":1299521,"ip_address":"","ucode":"1FDEC87C133E28","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJbh5FQajwKhNlMrkoSklPpOXBtEYXCLvuWibhfWIS9QxHWDqzhEHJzEdmtUiaiaqFjfpsr2LwgNGpbQ/132","comment_is_top":false,"comment_ctime":1567258365,"is_pvip":false,"replies":[{"id":48722,"content":"å¯ä»¥è¿™æ ·è§£å†³ï¼Œæ¯ä¸ªè®¡ç®—ä»»åŠ¡éƒ½éœ€è¦ä¸€ä¸ªå­˜å‚¨æ¥å­˜æ”¾ï¼Œè¿™ä¸ªå­˜å‚¨å¯ä»¥MySQLã€Redisæˆ–è€…ZooKeeperï¼Œåç«¯æ‰§è¡Œè®¡ç®—ä»»åŠ¡çš„æœåŠ¡è´Ÿè´£æ›´æ–°ä»»åŠ¡çš„çŠ¶æ€ï¼ˆæ¯”å¦‚è®¡ç®—ä¸­ï¼Œè®¡ç®—å®Œæˆï¼Œè®¡ç®—å¤±è´¥ç­‰ï¼‰ï¼Œåœ¨è®¡ç®—è¿‡ç¨‹ä¸­ï¼Œè®¡ç®—æœåŠ¡å®šæ—¶å»æ›´æ–°è¿™ä¸ªä»»åŠ¡çš„æ—¶é—´æˆ³ï¼Œå¦‚æœä»»åŠ¡çŠ¶æ€æ˜¯è®¡ç®—ä¸­ï¼Œä½†æ—¶é—´æˆ³é•¿æ—¶é—´æœªæ›´æ–°ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯è®¡ç®—æœåŠ¡å®•æœºäº†ã€‚ç±»ä¼¼äºä¸€ä¸ªå¿ƒè·³æœºåˆ¶ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1567491641,"ip_address":"","comment_id":129800,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"è€å¸ˆï¼Œè¯·æ•™ä¸€ä¸ªé—®é¢˜ï¼šå‡è®¾æœ‰ä¸€ä¸ªæ–¹æ³•åœ¨è®¡ç®—æŠ¥è¡¨ï¼Œä½†è¿™ä¸ªè®¡ç®—çš„çº¿ç¨‹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­è¢«æ„å¤–é‡Šæ”¾äº†ï¼ˆå¹¶ä¸æ˜¯æŠ›å¼‚å¸¸ï¼‰ï¼Œ æ­¤æ—¶try catchæ•è·æ˜¯æ•è·ä¸åˆ°è¿™ç§æƒ…å†µçš„ã€‚è€Œä»å®¢æˆ·ç«¯çœ‹æ¥ï¼Œè¿™ä¸ªè®¡ç®—è¿‡ç¨‹å°±æ°¸è¿œåœåœ¨é‚£é‡Œäº†ï¼Œè€Œåå°åˆæ²¡èƒ½åŠ›å‘Šè¯‰å®¢æˆ·ç«¯ï¼šâ€œä½ åˆ«ç­‰äº†â€ã€‚ è¿™ç§æƒ…å†µåº”è¯¥å¦‚æœå¤„ç†å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":129787,"user_name":"æ ‘æ¢¢çš„æœå®","can_delete":false,"product_type":"c1","uid":1645124,"ip_address":"","ucode":"6A3CE5CE957EDA","user_header":"https://static001.geekbang.org/account/avatar/00/19/1a/44/331b3f41.jpg","comment_is_top":false,"comment_ctime":1567250688,"is_pvip":false,"replies":[{"id":48561,"content":"è¿™æ ·åšæ˜¯å¯ä»¥çš„ï¼Œå…¶å®ä½ ç”¨çš„è¿™ä¸ªé˜»å¡é˜Ÿåˆ—å®ƒå°±æ˜¯ç”¨é”æ¥å®ç°çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1567404349,"ip_address":"","comment_id":129787,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"Cè¯­è¨€ä¸‹ï¼Œé€šè¿‡å®å¾ˆå®¹æ˜“å®ç°try-with-lockã€‚\nå¦‚æœä¸¤ä¸ªçº¿ç¨‹ä¸­è·å–mutexçš„é¡ºåºä¸ä¸€è‡´ï¼Œå¯ä»¥é€šè¿‡å¢åŠ ç¬¬ä¸‰ä¸ªmutexæ¥é¿å…æ­»é”ã€‚\næ—¢ç„¶æˆ‘ä»¬åšå¼‚æ­¥ã€å¹¶è¡Œï¼Œç£ç›˜è¯»å†™ä¹Ÿå¯ä»¥è¿™ä¹ˆåšå•Šï¼ŒåŠ ä¸€ä¸ªqueueï¼Œæ‰€æœ‰è¯»å†™æ“ä½œè¯·æ±‚éƒ½æ”¾åˆ°queueä¸­ï¼Œåœ¨å•ç‹¬çš„çº¿ç¨‹ä¸­å®ŒæˆIOæ“ä½œå¹¶é€šè¿‡callbackæˆ–å¦ä¸€ä¸ªqueueè¿”å›ç»“æœã€‚ä¸çŸ¥æœåŠ¡å™¨ä¸Šè¿™ä¹ˆåšæœ‰ä»€ä¹ˆä¸å¦¥ï¼Ÿ\n","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465658,"discussion_content":"å¯ä»¥è¿™æ ·è§£å†³ï¼Œæ¯ä¸ªè®¡ç®—ä»»åŠ¡éƒ½éœ€è¦ä¸€ä¸ªå­˜å‚¨æ¥å­˜æ”¾ï¼Œè¿™ä¸ªå­˜å‚¨å¯ä»¥MySQLã€Redisæˆ–è€…ZooKeeperï¼Œåç«¯æ‰§è¡Œè®¡ç®—ä»»åŠ¡çš„æœåŠ¡è´Ÿè´£æ›´æ–°ä»»åŠ¡çš„çŠ¶æ€ï¼ˆæ¯”å¦‚è®¡ç®—ä¸­ï¼Œè®¡ç®—å®Œæˆï¼Œè®¡ç®—å¤±è´¥ç­‰ï¼‰ï¼Œåœ¨è®¡ç®—è¿‡ç¨‹ä¸­ï¼Œè®¡ç®—æœåŠ¡å®šæ—¶å»æ›´æ–°è¿™ä¸ªä»»åŠ¡çš„æ—¶é—´æˆ³ï¼Œå¦‚æœä»»åŠ¡çŠ¶æ€æ˜¯è®¡ç®—ä¸­ï¼Œä½†æ—¶é—´æˆ³é•¿æ—¶é—´æœªæ›´æ–°ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯è®¡ç®—æœåŠ¡å®•æœºäº†ã€‚ç±»ä¼¼äºä¸€ä¸ªå¿ƒè·³æœºåˆ¶ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567491641,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1208637,"avatar":"https://static001.geekbang.org/account/avatar/00/12/71/3d/da8dc880.jpg","nickname":"æ¸¸å¼‹äº‘ç«¯","note":"","ucode":"A960E8F5AA25B9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":7061,"discussion_content":"å¯ä»¥ä½¿ç”¨è¶…æ—¶æœºåˆ¶ï¼Œæˆ–è€…å®šæœŸè½®è¯¢è¿›å±•ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1567329527,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":131893,"user_name":"èœé¸Ÿå’Œè°å·","can_delete":false,"product_type":"c1","uid":1632108,"ip_address":"","ucode":"649BD61DC406C2","user_header":"https://static001.geekbang.org/account/avatar/00/18/e7/6c/aa73b7a7.jpg","comment_is_top":false,"comment_ctime":1567952165,"is_pvip":false,"replies":null,"discussion_count":10,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"æ—¢ç„¶æ˜¯æ¶ˆæ¯é˜Ÿåˆ—è‡ªç„¶è¦å¤šè®²è®²æ¶ˆæ¯é˜Ÿåˆ—çš„çŸ¥è¯†ï¼Œä¸€ä¸‹ioï¼Œä¸€ä¸‹ç¼“å­˜ï¼Œä¸€ä¸‹å¤šçº¿ç¨‹ï¼Œè®²çš„å¾ˆæ‚ï¼Œä¹Ÿä¸æ·±å…¥ã€‚","like_count":46,"discussions":[{"author":{"id":1295609,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJRFRX8kNzNet7FibNvtavbVpAwK09AhIhrib9k762qWtH6mre8ickP7hM5mgZC4ytr8NnmIfmAhxMSQ/132","nickname":"è€å¤§ä¸å°","note":"","ucode":"35BCDD3CB13467","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":337353,"discussion_content":"ä½ ä»–å–µçš„æ˜¯æƒ³é˜»æ­¢æˆ‘çš„è¿›æ­¥ï¼Œä½ ä¸æƒ³çœ‹å¯ä»¥è·³è¿‡å»ï¼Œæ²¡äººæ±‚ç€ä½ çœ‹","likes_number":8,"is_delete":false,"is_hidden":false,"ctime":1608882358,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1736048,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/MItiagXxZFfAQsF9T2OSJTyzQgs65fAcDU4PmxwzBJaasu3icUbxEDaZwu1DoB6zJ8ez9mfe9tzHtelbSgrOSjTg/132","nickname":"Geek_49e5c2","note":"","ucode":"A2DA9A279EB6B1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":143410,"discussion_content":"è¿èµ·æ¥çœ‹ï¼Œä½ å°±çŸ¥é“è€å¸ˆåœ¨è®²ä»€ä¹ˆäº†","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1579505326,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1179298,"avatar":"https://static001.geekbang.org/account/avatar/00/11/fe/a2/5252a278.jpg","nickname":"å¯¹æ–¹æ­£åœ¨è¾“å…¥ã€‚ã€‚ã€‚","note":"","ucode":"7B0DEB4D9B43D2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1736048,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/MItiagXxZFfAQsF9T2OSJTyzQgs65fAcDU4PmxwzBJaasu3icUbxEDaZwu1DoB6zJ8ez9mfe9tzHtelbSgrOSjTg/132","nickname":"Geek_49e5c2","note":"","ucode":"A2DA9A279EB6B1","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":539918,"discussion_content":"ä»–ä¼°è®¡çœ‹ä¸æ‡‚â€¦æ‰è¿™ä¹ˆè¯´çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639879331,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":143410,"ip_address":"","group_id":0},"score":539918,"extra":""}]},{"author":{"id":1434423,"avatar":"https://static001.geekbang.org/account/avatar/00/15/e3/37/c132802f.jpg","nickname":"WESTWALL","note":"","ucode":"295A030F9D3BF4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":544217,"discussion_content":"MQçš„ä½¿ç”¨æ–¹æ³•ï¼Œå°±æ˜¯åŸºç¡€ç¯‡é‡Œçš„é‚£äº›å†…å®¹ã€‚ä¸ç®¡æ˜¯RabbitMQã€è¿˜æ˜¯Kafkaã€è¿˜æ˜¯RocketMQï¼Œéƒ½å¤§åŒå°å¼‚ã€‚å¦‚æœæ˜¯æ‰‹æŠŠæ‰‹è¯»APIçš„è¯ï¼Œæ‰¾æœ¬ä¹¦çœ‹å°±å¥½äº†ï¼Œä¸éœ€è¦èŠ±é’±æ¥å­¦çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641441741,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2163653,"avatar":"https://static001.geekbang.org/account/avatar/00/21/03/c5/600fd645.jpg","nickname":"tianbingJ","note":"","ucode":"666141CAD8260F","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1434423,"avatar":"https://static001.geekbang.org/account/avatar/00/15/e3/37/c132802f.jpg","nickname":"WESTWALL","note":"","ucode":"295A030F9D3BF4","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":553716,"discussion_content":"ä½ è¿™çœŸæ˜¯æ ï¼Œå¦‚æœéƒ½æ˜¯è¿™ç§å†…å®¹ï¼Œä½ ä¹Ÿå¯ä»¥æ‰¾æœ¬æ“ä½œç³»ç»Ÿçš„ä¹¦çœ‹ï¼Œä¸ç”¨æ¥ç€èŠ±é’±çœ‹ã€‚","likes_number":8,"is_delete":false,"is_hidden":false,"ctime":1646038837,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":544217,"ip_address":"","group_id":0},"score":553716,"extra":""}]},{"author":{"id":1488038,"avatar":"https://static001.geekbang.org/account/avatar/00/16/b4/a6/b6fa2562.jpg","nickname":"æ¸ æ¢","note":"","ucode":"DC86BDEC63C9BC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":299740,"discussion_content":"up++","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597804010,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1230242,"avatar":"https://static001.geekbang.org/account/avatar/00/12/c5/a2/4bef8cb6.jpg","nickname":"é¹","note":"","ucode":"AAA01498C85FCE","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":153046,"discussion_content":"è¿™ä¸ªè¯¾ä¸æ˜¯æ¶æ„ä¹‹è·¯å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580018788,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1001970,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/49/f2/25cfa472.jpg","nickname":"å¯’æºª","note":"","ucode":"67B9F1A1C15A20","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":143468,"discussion_content":"up!","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579509102,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1603271,"avatar":"","nickname":"Geek_f3a3d1","note":"","ucode":"E15FA1C3AB3174","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":104831,"discussion_content":"up","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577452486,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1115761,"avatar":"https://static001.geekbang.org/account/avatar/00/11/06/71/1d98ad80.jpg","nickname":"oOèœ—ç‰›å›ğŸŒã€ã€","note":"","ucode":"9178C612393FD5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":96825,"discussion_content":"upï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577095480,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":129646,"user_name":"å¼ ä¸‰","can_delete":false,"product_type":"c1","uid":1004092,"ip_address":"","ucode":"1155528FAE1546","user_header":"https://static001.geekbang.org/account/avatar/00/0f/52/3c/d6fcb93a.jpg","comment_is_top":false,"comment_ctime":1567181713,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"å¹¸äºå­¦è¿‡æå®¢æ—¶é—´çš„å¹¶å‘ç¼–ç¨‹ä¸“æ ï¼Œçœ‹æ‡‚äº†ã€‚æˆ‘è§‰å¾—å¹¶å‘å®¹å™¨çš„é€‰æ‹©æ¯”è¾ƒå¤æ‚ã€‚","like_count":7,"discussions":[{"author":{"id":1164531,"avatar":"https://static001.geekbang.org/account/avatar/00/11/c4/f3/92f654f1.jpg","nickname":"Bug? Feature!","note":"","ucode":"F8FA8A0094FBA0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301591,"discussion_content":"æˆ‘ä¹Ÿæ˜¯ï¼Œçœ‹ç€æ²¡æœ‰é¸­æ¢¨~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598583337,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":285018,"user_name":"long","can_delete":false,"product_type":"c1","uid":2461108,"ip_address":"","ucode":"952E1B5338C92B","user_header":"https://static001.geekbang.org/account/avatar/00/25/8d/b4/4a8b4b0a.jpg","comment_is_top":false,"comment_ctime":1616580016,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"è¦æ˜¯èƒ½è®²ä¸€ä¸‹, è®¾è®¡æ¶ˆæ¯é˜Ÿåˆ—, å“ªé‡Œéœ€è¦ç”¨åˆ°é”, å°±å®Œç¾äº†.","like_count":3},{"had_liked":false,"id":139078,"user_name":"é•¿æœŸè§„åˆ’","can_delete":false,"product_type":"c1","uid":1019332,"ip_address":"","ucode":"5EF65E9115834B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8d/c4/6f97daea.jpg","comment_is_top":false,"comment_ctime":1570542153,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"é¿å…æ­»é”\n1ã€‚é”æœ€å¥½ä¸è¦åµŒå¥—ï¼Œå¦‚æœå®åœ¨éœ€è¦åµŒå¥—ï¼Œè¦æŒ‰2çš„é¡ºåº\n2ã€‚æ‰€æœ‰é”çš„åœ°æ–¹éƒ½æŒ‰ç›¸åŒçš„é¡ºåºåŠ é”ã€‚æ¯”å¦‚æœ‰Aï¼ŒBï¼ŒCï¼ŒDå››æŠŠé”ï¼Œæ‰€æœ‰åŠ é”çš„åœ°æ–¹çš„é¡ºåºéƒ½æ˜¯Aâ†’Bâ†’Câ†’Dï¼Œæˆ–è€…æ˜¯å…¶åˆ‡ç‰‡ï¼Œæ¯”å¦‚çº¿ç¨‹1ä½¿ç”¨Bâ†’Cï¼Œçº¿ç¨‹2ä½¿ç”¨Aâ†’Bï¼Œçº¿ç¨‹3ä½¿ç”¨Câ†’D\n3ã€‚è§£é”é¡ºåºæœ€å¥½å’ŒåŠ é”é¡ºåºç›¸åï¼Œè¿™æ ·é€»è¾‘æ¸…æ™°ï¼Œé”ä¸ç”¨åä¸€å®šè¦é‡Šæ”¾\n","like_count":3},{"had_liked":false,"id":129696,"user_name":"L!en6o","can_delete":false,"product_type":"c1","uid":1054472,"ip_address":"","ucode":"E0931CB8998260","user_header":"https://static001.geekbang.org/account/avatar/00/10/17/08/566fb246.jpg","comment_is_top":false,"comment_ctime":1567221975,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"åŠ ä¸€ä¸ªé”å›è°ƒ å°è£…èµ·æ¥ å®ç° try-with-lock\n","like_count":3},{"had_liked":false,"id":341083,"user_name":"å†è§ç†æƒ³","can_delete":false,"product_type":"c1","uid":1245999,"ip_address":"","ucode":"FAC88B3F6F6DFD","user_header":"https://static001.geekbang.org/account/avatar/00/13/03/2f/0a5e0751.jpg","comment_is_top":false,"comment_ctime":1649335237,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"å…³äºé”çš„æ³¨æ„äº‹é¡¹ï¼š\n1ï¼Œå¦‚æ— å¿…è¦ï¼Œå°½é‡ä¸è¦ç”¨é”ï¼ŒåŠ &#47;è§£é”ä¼šå ç”¨cpuæ—¶é—´ï¼Œå¯¹ç³»ç»Ÿæ€§èƒ½å½±å“å¾ˆå¤§ã€‚\n2ï¼ŒåŠ é”åä¸€å®šè¦è®°å¾—é‡Šæ”¾é”ï¼Œå¦åˆ™ä¼šå¯¼è‡´å…¶ä»–éœ€è¦ç”¨é”çš„ç¨‹åºé˜»å¡ã€‚\n3ï¼Œå¿…è¦çš„åœºæ™¯ï¼Œé”è¦è®¾è®¡å¯é‡å…¥æˆ–è¶…æ—¶æ—¶é—´ï¼Œé˜²æ­¢ç¨‹åºæ­»é”ã€‚\n4ï¼Œä½¿ç”¨å¤šä¸ªé”çš„æƒ…å†µï¼Œé‡Šæ”¾é”çš„é¡ºåºè¦å’ŒåŠ é”çš„é¡ºåºç›¸åã€‚\n5ï¼Œä½¿ç”¨å¤šä¸ªé”çš„æƒ…å†µï¼Œéœ€è¦å°†é”è¿›è¡Œæ’åºï¼Œç”¨åˆ°ç”¨é”çš„åœ°æ–¹éƒ½æŒ‰ç…§é”é¡ºåºåŠ é”ï¼Œé˜²æ­¢é”å¾ªç¯ç­‰å¾…ã€‚\n6ï¼Œå¯ä»¥ç”¨è¯»å†™é”æå‡æ€§èƒ½ï¼Œæ”¯æŒå¹¶å‘è¯»ï¼Œä¸æ”¯æŒå¹¶å‘è¯»å†™ã€‚\n7ï¼Œå°½é‡é¿å…ä½¿ç”¨å¤šä¸ªé”ã€‚\n8ï¼ŒåŠ é”ï¼Œé‡Šæ”¾é”å°½é‡æ”¾åœ¨åŒä¸€ä¸ªæ–¹æ³•å†…ã€‚","like_count":2},{"had_liked":false,"id":181105,"user_name":"å‡¡","can_delete":false,"product_type":"c1","uid":1721168,"ip_address":"","ucode":"80C2A6452AB9EA","user_header":"https://static001.geekbang.org/account/avatar/00/1a/43/50/abb4ca1e.jpg","comment_is_top":false,"comment_ctime":1582476143,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"ç±»ä¼¼ MySql ä¸­çš„ æ’å®ƒé”ï¼ˆXï¼‰å’Œå…±äº«é”(S)ï¼Œ å…±äº«é”ä¹‹é—´ä¸äº’æ–¥ï¼Œæ’å®ƒé”å’Œå…±äº«é”äº’æ–¥ï¼Œæ’å®ƒé”å’Œæ’å®ƒé”äº’æ–¥","like_count":2},{"had_liked":false,"id":129800,"user_name":"Geek_q29f6t","can_delete":false,"product_type":"c1","uid":1299521,"ip_address":"","ucode":"1FDEC87C133E28","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJbh5FQajwKhNlMrkoSklPpOXBtEYXCLvuWibhfWIS9QxHWDqzhEHJzEdmtUiaiaqFjfpsr2LwgNGpbQ/132","comment_is_top":false,"comment_ctime":1567258365,"is_pvip":false,"replies":[{"id":48722,"content":"å¯ä»¥è¿™æ ·è§£å†³ï¼Œæ¯ä¸ªè®¡ç®—ä»»åŠ¡éƒ½éœ€è¦ä¸€ä¸ªå­˜å‚¨æ¥å­˜æ”¾ï¼Œè¿™ä¸ªå­˜å‚¨å¯ä»¥MySQLã€Redisæˆ–è€…ZooKeeperï¼Œåç«¯æ‰§è¡Œè®¡ç®—ä»»åŠ¡çš„æœåŠ¡è´Ÿè´£æ›´æ–°ä»»åŠ¡çš„çŠ¶æ€ï¼ˆæ¯”å¦‚è®¡ç®—ä¸­ï¼Œè®¡ç®—å®Œæˆï¼Œè®¡ç®—å¤±è´¥ç­‰ï¼‰ï¼Œåœ¨è®¡ç®—è¿‡ç¨‹ä¸­ï¼Œè®¡ç®—æœåŠ¡å®šæ—¶å»æ›´æ–°è¿™ä¸ªä»»åŠ¡çš„æ—¶é—´æˆ³ï¼Œå¦‚æœä»»åŠ¡çŠ¶æ€æ˜¯è®¡ç®—ä¸­ï¼Œä½†æ—¶é—´æˆ³é•¿æ—¶é—´æœªæ›´æ–°ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯è®¡ç®—æœåŠ¡å®•æœºäº†ã€‚ç±»ä¼¼äºä¸€ä¸ªå¿ƒè·³æœºåˆ¶ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1567491641,"ip_address":"","comment_id":129800,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"è€å¸ˆï¼Œè¯·æ•™ä¸€ä¸ªé—®é¢˜ï¼šå‡è®¾æœ‰ä¸€ä¸ªæ–¹æ³•åœ¨è®¡ç®—æŠ¥è¡¨ï¼Œä½†è¿™ä¸ªè®¡ç®—çš„çº¿ç¨‹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­è¢«æ„å¤–é‡Šæ”¾äº†ï¼ˆå¹¶ä¸æ˜¯æŠ›å¼‚å¸¸ï¼‰ï¼Œ æ­¤æ—¶try catchæ•è·æ˜¯æ•è·ä¸åˆ°è¿™ç§æƒ…å†µçš„ã€‚è€Œä»å®¢æˆ·ç«¯çœ‹æ¥ï¼Œè¿™ä¸ªè®¡ç®—è¿‡ç¨‹å°±æ°¸è¿œåœåœ¨é‚£é‡Œäº†ï¼Œè€Œåå°åˆæ²¡èƒ½åŠ›å‘Šè¯‰å®¢æˆ·ç«¯ï¼šâ€œä½ åˆ«ç­‰äº†â€ã€‚ è¿™ç§æƒ…å†µåº”è¯¥å¦‚æœå¤„ç†å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465658,"discussion_content":"å¯ä»¥è¿™æ ·è§£å†³ï¼Œæ¯ä¸ªè®¡ç®—ä»»åŠ¡éƒ½éœ€è¦ä¸€ä¸ªå­˜å‚¨æ¥å­˜æ”¾ï¼Œè¿™ä¸ªå­˜å‚¨å¯ä»¥MySQLã€Redisæˆ–è€…ZooKeeperï¼Œåç«¯æ‰§è¡Œè®¡ç®—ä»»åŠ¡çš„æœåŠ¡è´Ÿè´£æ›´æ–°ä»»åŠ¡çš„çŠ¶æ€ï¼ˆæ¯”å¦‚è®¡ç®—ä¸­ï¼Œè®¡ç®—å®Œæˆï¼Œè®¡ç®—å¤±è´¥ç­‰ï¼‰ï¼Œåœ¨è®¡ç®—è¿‡ç¨‹ä¸­ï¼Œè®¡ç®—æœåŠ¡å®šæ—¶å»æ›´æ–°è¿™ä¸ªä»»åŠ¡çš„æ—¶é—´æˆ³ï¼Œå¦‚æœä»»åŠ¡çŠ¶æ€æ˜¯è®¡ç®—ä¸­ï¼Œä½†æ—¶é—´æˆ³é•¿æ—¶é—´æœªæ›´æ–°ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯è®¡ç®—æœåŠ¡å®•æœºäº†ã€‚ç±»ä¼¼äºä¸€ä¸ªå¿ƒè·³æœºåˆ¶ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567491641,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1208637,"avatar":"https://static001.geekbang.org/account/avatar/00/12/71/3d/da8dc880.jpg","nickname":"æ¸¸å¼‹äº‘ç«¯","note":"","ucode":"A960E8F5AA25B9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":7061,"discussion_content":"å¯ä»¥ä½¿ç”¨è¶…æ—¶æœºåˆ¶ï¼Œæˆ–è€…å®šæœŸè½®è¯¢è¿›å±•ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1567329527,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":129787,"user_name":"æ ‘æ¢¢çš„æœå®","can_delete":false,"product_type":"c1","uid":1645124,"ip_address":"","ucode":"6A3CE5CE957EDA","user_header":"https://static001.geekbang.org/account/avatar/00/19/1a/44/331b3f41.jpg","comment_is_top":false,"comment_ctime":1567250688,"is_pvip":false,"replies":[{"id":48561,"content":"è¿™æ ·åšæ˜¯å¯ä»¥çš„ï¼Œå…¶å®ä½ ç”¨çš„è¿™ä¸ªé˜»å¡é˜Ÿåˆ—å®ƒå°±æ˜¯ç”¨é”æ¥å®ç°çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1567404349,"ip_address":"","comment_id":129787,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"Cè¯­è¨€ä¸‹ï¼Œé€šè¿‡å®å¾ˆå®¹æ˜“å®ç°try-with-lockã€‚\nå¦‚æœä¸¤ä¸ªçº¿ç¨‹ä¸­è·å–mutexçš„é¡ºåºä¸ä¸€è‡´ï¼Œå¯ä»¥é€šè¿‡å¢åŠ ç¬¬ä¸‰ä¸ªmutexæ¥é¿å…æ­»é”ã€‚\næ—¢ç„¶æˆ‘ä»¬åšå¼‚æ­¥ã€å¹¶è¡Œï¼Œç£ç›˜è¯»å†™ä¹Ÿå¯ä»¥è¿™ä¹ˆåšå•Šï¼ŒåŠ ä¸€ä¸ªqueueï¼Œæ‰€æœ‰è¯»å†™æ“ä½œè¯·æ±‚éƒ½æ”¾åˆ°queueä¸­ï¼Œåœ¨å•ç‹¬çš„çº¿ç¨‹ä¸­å®ŒæˆIOæ“ä½œå¹¶é€šè¿‡callbackæˆ–å¦ä¸€ä¸ªqueueè¿”å›ç»“æœã€‚ä¸çŸ¥æœåŠ¡å™¨ä¸Šè¿™ä¹ˆåšæœ‰ä»€ä¹ˆä¸å¦¥ï¼Ÿ\n","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465649,"discussion_content":"è¿™æ ·åšæ˜¯å¯ä»¥çš„ï¼Œå…¶å®ä½ ç”¨çš„è¿™ä¸ªé˜»å¡é˜Ÿåˆ—å®ƒå°±æ˜¯ç”¨é”æ¥å®ç°çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567404349,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":131893,"user_name":"èœé¸Ÿå’Œè°å·","can_delete":false,"product_type":"c1","uid":1632108,"ip_address":"","ucode":"649BD61DC406C2","user_header":"https://static001.geekbang.org/account/avatar/00/18/e7/6c/aa73b7a7.jpg","comment_is_top":false,"comment_ctime":1567952165,"is_pvip":false,"replies":null,"discussion_count":10,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"æ—¢ç„¶æ˜¯æ¶ˆæ¯é˜Ÿåˆ—è‡ªç„¶è¦å¤šè®²è®²æ¶ˆæ¯é˜Ÿåˆ—çš„çŸ¥è¯†ï¼Œä¸€ä¸‹ioï¼Œä¸€ä¸‹ç¼“å­˜ï¼Œä¸€ä¸‹å¤šçº¿ç¨‹ï¼Œè®²çš„å¾ˆæ‚ï¼Œä¹Ÿä¸æ·±å…¥ã€‚","like_count":46,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465649,"discussion_content":"è¿™æ ·åšæ˜¯å¯ä»¥çš„ï¼Œå…¶å®ä½ ç”¨çš„è¿™ä¸ªé˜»å¡é˜Ÿåˆ—å®ƒå°±æ˜¯ç”¨é”æ¥å®ç°çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567404349,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":129646,"user_name":"å¼ ä¸‰","can_delete":false,"product_type":"c1","uid":1004092,"ip_address":"","ucode":"1155528FAE1546","user_header":"https://static001.geekbang.org/account/avatar/00/0f/52/3c/d6fcb93a.jpg","comment_is_top":false,"comment_ctime":1567181713,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"å¹¸äºå­¦è¿‡æå®¢æ—¶é—´çš„å¹¶å‘ç¼–ç¨‹ä¸“æ ï¼Œçœ‹æ‡‚äº†ã€‚æˆ‘è§‰å¾—å¹¶å‘å®¹å™¨çš„é€‰æ‹©æ¯”è¾ƒå¤æ‚ã€‚","like_count":7,"discussions":[{"author":{"id":1295609,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJRFRX8kNzNet7FibNvtavbVpAwK09AhIhrib9k762qWtH6mre8ickP7hM5mgZC4ytr8NnmIfmAhxMSQ/132","nickname":"è€å¤§ä¸å°","note":"","ucode":"35BCDD3CB13467","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":337353,"discussion_content":"ä½ ä»–å–µçš„æ˜¯æƒ³é˜»æ­¢æˆ‘çš„è¿›æ­¥ï¼Œä½ ä¸æƒ³çœ‹å¯ä»¥è·³è¿‡å»ï¼Œæ²¡äººæ±‚ç€ä½ çœ‹","likes_number":8,"is_delete":false,"is_hidden":false,"ctime":1608882358,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1736048,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/MItiagXxZFfAQsF9T2OSJTyzQgs65fAcDU4PmxwzBJaasu3icUbxEDaZwu1DoB6zJ8ez9mfe9tzHtelbSgrOSjTg/132","nickname":"Geek_49e5c2","note":"","ucode":"A2DA9A279EB6B1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":143410,"discussion_content":"è¿èµ·æ¥çœ‹ï¼Œä½ å°±çŸ¥é“è€å¸ˆåœ¨è®²ä»€ä¹ˆäº†","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1579505326,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1179298,"avatar":"https://static001.geekbang.org/account/avatar/00/11/fe/a2/5252a278.jpg","nickname":"å¯¹æ–¹æ­£åœ¨è¾“å…¥ã€‚ã€‚ã€‚","note":"","ucode":"7B0DEB4D9B43D2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1736048,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/MItiagXxZFfAQsF9T2OSJTyzQgs65fAcDU4PmxwzBJaasu3icUbxEDaZwu1DoB6zJ8ez9mfe9tzHtelbSgrOSjTg/132","nickname":"Geek_49e5c2","note":"","ucode":"A2DA9A279EB6B1","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":539918,"discussion_content":"ä»–ä¼°è®¡çœ‹ä¸æ‡‚â€¦æ‰è¿™ä¹ˆè¯´çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639879331,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":143410,"ip_address":"","group_id":0},"score":539918,"extra":""}]},{"author":{"id":1434423,"avatar":"https://static001.geekbang.org/account/avatar/00/15/e3/37/c132802f.jpg","nickname":"WESTWALL","note":"","ucode":"295A030F9D3BF4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":544217,"discussion_content":"MQçš„ä½¿ç”¨æ–¹æ³•ï¼Œå°±æ˜¯åŸºç¡€ç¯‡é‡Œçš„é‚£äº›å†…å®¹ã€‚ä¸ç®¡æ˜¯RabbitMQã€è¿˜æ˜¯Kafkaã€è¿˜æ˜¯RocketMQï¼Œéƒ½å¤§åŒå°å¼‚ã€‚å¦‚æœæ˜¯æ‰‹æŠŠæ‰‹è¯»APIçš„è¯ï¼Œæ‰¾æœ¬ä¹¦çœ‹å°±å¥½äº†ï¼Œä¸éœ€è¦èŠ±é’±æ¥å­¦çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641441741,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2163653,"avatar":"https://static001.geekbang.org/account/avatar/00/21/03/c5/600fd645.jpg","nickname":"tianbingJ","note":"","ucode":"666141CAD8260F","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1434423,"avatar":"https://static001.geekbang.org/account/avatar/00/15/e3/37/c132802f.jpg","nickname":"WESTWALL","note":"","ucode":"295A030F9D3BF4","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":553716,"discussion_content":"ä½ è¿™çœŸæ˜¯æ ï¼Œå¦‚æœéƒ½æ˜¯è¿™ç§å†…å®¹ï¼Œä½ ä¹Ÿå¯ä»¥æ‰¾æœ¬æ“ä½œç³»ç»Ÿçš„ä¹¦çœ‹ï¼Œä¸ç”¨æ¥ç€èŠ±é’±çœ‹ã€‚","likes_number":8,"is_delete":false,"is_hidden":false,"ctime":1646038837,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":544217,"ip_address":"","group_id":0},"score":553716,"extra":""}]},{"author":{"id":1488038,"avatar":"https://static001.geekbang.org/account/avatar/00/16/b4/a6/b6fa2562.jpg","nickname":"æ¸ æ¢","note":"","ucode":"DC86BDEC63C9BC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":299740,"discussion_content":"up++","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597804010,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1230242,"avatar":"https://static001.geekbang.org/account/avatar/00/12/c5/a2/4bef8cb6.jpg","nickname":"é¹","note":"","ucode":"AAA01498C85FCE","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":153046,"discussion_content":"è¿™ä¸ªè¯¾ä¸æ˜¯æ¶æ„ä¹‹è·¯å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580018788,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1001970,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/49/f2/25cfa472.jpg","nickname":"å¯’æºª","note":"","ucode":"67B9F1A1C15A20","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":143468,"discussion_content":"up!","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579509102,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1603271,"avatar":"","nickname":"Geek_f3a3d1","note":"","ucode":"E15FA1C3AB3174","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":104831,"discussion_content":"up","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577452486,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1115761,"avatar":"https://static001.geekbang.org/account/avatar/00/11/06/71/1d98ad80.jpg","nickname":"oOèœ—ç‰›å›ğŸŒã€ã€","note":"","ucode":"9178C612393FD5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":96825,"discussion_content":"upï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577095480,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":285018,"user_name":"long","can_delete":false,"product_type":"c1","uid":2461108,"ip_address":"","ucode":"952E1B5338C92B","user_header":"https://static001.geekbang.org/account/avatar/00/25/8d/b4/4a8b4b0a.jpg","comment_is_top":false,"comment_ctime":1616580016,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"è¦æ˜¯èƒ½è®²ä¸€ä¸‹, è®¾è®¡æ¶ˆæ¯é˜Ÿåˆ—, å“ªé‡Œéœ€è¦ç”¨åˆ°é”, å°±å®Œç¾äº†.","like_count":3},{"had_liked":false,"id":139078,"user_name":"é•¿æœŸè§„åˆ’","can_delete":false,"product_type":"c1","uid":1019332,"ip_address":"","ucode":"5EF65E9115834B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8d/c4/6f97daea.jpg","comment_is_top":false,"comment_ctime":1570542153,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"é¿å…æ­»é”\n1ã€‚é”æœ€å¥½ä¸è¦åµŒå¥—ï¼Œå¦‚æœå®åœ¨éœ€è¦åµŒå¥—ï¼Œè¦æŒ‰2çš„é¡ºåº\n2ã€‚æ‰€æœ‰é”çš„åœ°æ–¹éƒ½æŒ‰ç›¸åŒçš„é¡ºåºåŠ é”ã€‚æ¯”å¦‚æœ‰Aï¼ŒBï¼ŒCï¼ŒDå››æŠŠé”ï¼Œæ‰€æœ‰åŠ é”çš„åœ°æ–¹çš„é¡ºåºéƒ½æ˜¯Aâ†’Bâ†’Câ†’Dï¼Œæˆ–è€…æ˜¯å…¶åˆ‡ç‰‡ï¼Œæ¯”å¦‚çº¿ç¨‹1ä½¿ç”¨Bâ†’Cï¼Œçº¿ç¨‹2ä½¿ç”¨Aâ†’Bï¼Œçº¿ç¨‹3ä½¿ç”¨Câ†’D\n3ã€‚è§£é”é¡ºåºæœ€å¥½å’ŒåŠ é”é¡ºåºç›¸åï¼Œè¿™æ ·é€»è¾‘æ¸…æ™°ï¼Œé”ä¸ç”¨åä¸€å®šè¦é‡Šæ”¾\n","like_count":3},{"had_liked":false,"id":129696,"user_name":"L!en6o","can_delete":false,"product_type":"c1","uid":1054472,"ip_address":"","ucode":"E0931CB8998260","user_header":"https://static001.geekbang.org/account/avatar/00/10/17/08/566fb246.jpg","comment_is_top":false,"comment_ctime":1567221975,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"åŠ ä¸€ä¸ªé”å›è°ƒ å°è£…èµ·æ¥ å®ç° try-with-lock\n","like_count":3},{"had_liked":false,"id":341083,"user_name":"å†è§ç†æƒ³","can_delete":false,"product_type":"c1","uid":1245999,"ip_address":"","ucode":"FAC88B3F6F6DFD","user_header":"https://static001.geekbang.org/account/avatar/00/13/03/2f/0a5e0751.jpg","comment_is_top":false,"comment_ctime":1649335237,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"å…³äºé”çš„æ³¨æ„äº‹é¡¹ï¼š\n1ï¼Œå¦‚æ— å¿…è¦ï¼Œå°½é‡ä¸è¦ç”¨é”ï¼ŒåŠ &#47;è§£é”ä¼šå ç”¨cpuæ—¶é—´ï¼Œå¯¹ç³»ç»Ÿæ€§èƒ½å½±å“å¾ˆå¤§ã€‚\n2ï¼ŒåŠ é”åä¸€å®šè¦è®°å¾—é‡Šæ”¾é”ï¼Œå¦åˆ™ä¼šå¯¼è‡´å…¶ä»–éœ€è¦ç”¨é”çš„ç¨‹åºé˜»å¡ã€‚\n3ï¼Œå¿…è¦çš„åœºæ™¯ï¼Œé”è¦è®¾è®¡å¯é‡å…¥æˆ–è¶…æ—¶æ—¶é—´ï¼Œé˜²æ­¢ç¨‹åºæ­»é”ã€‚\n4ï¼Œä½¿ç”¨å¤šä¸ªé”çš„æƒ…å†µï¼Œé‡Šæ”¾é”çš„é¡ºåºè¦å’ŒåŠ é”çš„é¡ºåºç›¸åã€‚\n5ï¼Œä½¿ç”¨å¤šä¸ªé”çš„æƒ…å†µï¼Œéœ€è¦å°†é”è¿›è¡Œæ’åºï¼Œç”¨åˆ°ç”¨é”çš„åœ°æ–¹éƒ½æŒ‰ç…§é”é¡ºåºåŠ é”ï¼Œé˜²æ­¢é”å¾ªç¯ç­‰å¾…ã€‚\n6ï¼Œå¯ä»¥ç”¨è¯»å†™é”æå‡æ€§èƒ½ï¼Œæ”¯æŒå¹¶å‘è¯»ï¼Œä¸æ”¯æŒå¹¶å‘è¯»å†™ã€‚\n7ï¼Œå°½é‡é¿å…ä½¿ç”¨å¤šä¸ªé”ã€‚\n8ï¼ŒåŠ é”ï¼Œé‡Šæ”¾é”å°½é‡æ”¾åœ¨åŒä¸€ä¸ªæ–¹æ³•å†…ã€‚","like_count":2},{"had_liked":false,"id":181105,"user_name":"å‡¡","can_delete":false,"product_type":"c1","uid":1721168,"ip_address":"","ucode":"80C2A6452AB9EA","user_header":"https://static001.geekbang.org/account/avatar/00/1a/43/50/abb4ca1e.jpg","comment_is_top":false,"comment_ctime":1582476143,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"ç±»ä¼¼ MySql ä¸­çš„ æ’å®ƒé”ï¼ˆXï¼‰å’Œå…±äº«é”(S)ï¼Œ å…±äº«é”ä¹‹é—´ä¸äº’æ–¥ï¼Œæ’å®ƒé”å’Œå…±äº«é”äº’æ–¥ï¼Œæ’å®ƒé”å’Œæ’å®ƒé”äº’æ–¥","like_count":2,"discussions":[{"author":{"id":1164531,"avatar":"https://static001.geekbang.org/account/avatar/00/11/c4/f3/92f654f1.jpg","nickname":"Bug? Feature!","note":"","ucode":"F8FA8A0094FBA0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301591,"discussion_content":"æˆ‘ä¹Ÿæ˜¯ï¼Œçœ‹ç€æ²¡æœ‰é¸­æ¢¨~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598583337,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":338743,"user_name":"i_chase","can_delete":false,"product_type":"c1","uid":1795511,"ip_address":"","ucode":"09C41C863F4EA3","user_header":"https://static001.geekbang.org/account/avatar/00/1b/65/b7/058276dc.jpg","comment_is_top":false,"comment_ctime":1647697986,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"å˜æˆjavaå¤§è®²å ‚äº†ã€‚ã€‚","like_count":1},{"had_liked":false,"id":176411,"user_name":"å¾€äº‹éšé£ï¼Œé¡ºå…¶è‡ªç„¶","can_delete":false,"product_type":"c1","uid":1235692,"ip_address":"","ucode":"F266EC6B143E38","user_header":"https://static001.geekbang.org/account/avatar/00/12/da/ec/779c1a78.jpg","comment_is_top":false,"comment_ctime":1581053485,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"åå…«èˆ¬æ­¦å™¨å…¨ç”¨ä¸Šï¼Œé˜Ÿåˆ—è¿˜æ˜¯å¤šè®²äº›æ·±å…¥çš„çŸ¥è¯†","like_count":1},{"had_liked":false,"id":144417,"user_name":"Switch","can_delete":false,"product_type":"c1","uid":1049360,"ip_address":"","ucode":"D8A7F7F6A0BEA9","user_header":"https://static001.geekbang.org/account/avatar/00/10/03/10/26f9f762.jpg","comment_is_top":false,"comment_ctime":1571918255,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"try with resourceå®ç°\nä¼ å…¥å‚æ•°å®ç°\n\nhttps:&#47;&#47;github.com&#47;Switch-vov&#47;mq-learing&#47;tree&#47;master&#47;src&#47;main&#47;java&#47;com&#47;switchvov&#47;lock","like_count":1},{"had_liked":false,"id":367465,"user_name":"åƒé”¤ç™¾ç‚¼é¢†æ‚Ÿä¹‹æé™","can_delete":false,"product_type":"c1","uid":1744257,"ip_address":"å¹¿ä¸œ","ucode":"224B5CF2101716","user_header":"https://static001.geekbang.org/account/avatar/00/1a/9d/81/d748b7eb.jpg","comment_is_top":false,"comment_ctime":1675249651,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"å…³äºé”ä½¿ç”¨çš„å»ºè®®ï¼š\n\n1.èƒ½ä¸ä½¿ç”¨é”å°±ä¸è¦ä½¿ç”¨é”ï¼Œæˆ–è€…ä¸æ¸…æ¥šæ˜¯å¦éœ€è¦é”çš„æƒ…å†µä¸‹ä¹Ÿä¸è¦ä½¿ç”¨é”ã€‚\n2.åŠ é”ä¸è§£é”éƒ½å¿…é¡»åœ¨åŒä¸€ä¸ªæ–¹æ³•å†…ï¼Œé¿å…åŠ é”åå¿˜è®°è§£é”ã€‚\n3.å°½é‡ä¸è¦åœ¨å·²ç»æŒæœ‰ä¸€æŠŠé”çš„æƒ…å†µä¸‹ï¼Œå†å»æŒæœ‰å¤šæŠŠé”ã€‚\n4.å¦‚æœå¿…é¡»æŒæœ‰å¤šæŠŠé”ï¼ŒåŠ é”ä¸è§£é”çš„é¡ºåºè¦ç›¸åï¼Œä¾‹å¦‚åŠ é”é¡ºåºæ˜¯A-&gt;B-&gt;Cï¼Œé‚£ä¹ˆè§£é”çš„é¡ºåºå°±æ˜¯C-&gt;B-&gt;Aã€‚\n5.ç»™ä½ ç³»ç»Ÿä¸­çš„é”å®šä¸€ä¸ªé¡ºåºï¼Œåœ¨ä»»ä½•æƒ…å†µéƒ½æŒ‰è¿™ä¸ªé¡ºåºåŠ é”ã€‚","like_count":0},{"had_liked":false,"id":351431,"user_name":"syz","can_delete":false,"product_type":"c1","uid":1174704,"ip_address":"","ucode":"54AF17ACD72645","user_header":"https://static001.geekbang.org/account/avatar/00/11/ec/b0/4e22819f.jpg","comment_is_top":false,"comment_ctime":1657784378,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"æ­»é”ï¼šå¿˜è®°é‡Šæ”¾ã€é”é‡å…¥é—®é¢˜ã€å¤šä¸ªé”å¤šå¤„è°ƒç”¨ç›¸äº’ç«äº‰\nfun lockAndUnlock(doSth :()-&gt;Unit,onError:(e:Exception)-&gt;Unit){\n        try {\n            lock.lock()\n            doSth()\n        }catch (e:Exception){\n            onError(e)\n        }finally {\n            lock.unlock()\n        }\n    }\n\n}","like_count":0},{"had_liked":false,"id":342819,"user_name":"é™ˆæ–Œ","can_delete":false,"product_type":"c1","uid":1367048,"ip_address":"","ucode":"B639AB5F6AA03D","user_header":"https://static001.geekbang.org/account/avatar/00/14/dc/08/64f5ab52.jpg","comment_is_top":false,"comment_ctime":1650477012,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"è¯»å†™é”ï¼Œåœ¨å…¶ä»–çº¿ç¨‹æŒæœ‰è¯»é”æ—¶ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹å¯ä»¥è¿‡å»åˆ°å†™é”å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":308746,"user_name":"èœé¸Ÿ","can_delete":false,"product_type":"c1","uid":2451215,"ip_address":"","ucode":"214A61B6B3410F","user_header":"https://static001.geekbang.org/account/avatar/00/25/67/0f/3cb10900.jpg","comment_is_top":false,"comment_ctime":1629780345,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"çº¿ç¨‹çš„åˆ‡æ¢çš„ä»£ä»·æœ‰å¤šå¤§ï¼Ÿä»¥åŠçº¿ç¨‹åˆ‡æ¢ä¼šå¼•èµ·ç¼“å­˜å¤±æ•ˆå—ï¼Ÿ","like_count":0},{"had_liked":false,"id":277899,"user_name":"Heaven","can_delete":false,"product_type":"c1","uid":1694207,"ip_address":"","ucode":"FA33FBCC66C911","user_header":"https://static001.geekbang.org/account/avatar/00/19/d9/ff/b23018a6.jpg","comment_is_top":false,"comment_ctime":1612665027,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"Java7 æä¾›äº†å¯¹åº”çš„try-with-resource,æˆ‘ä»¬å¯ä»¥å®ç°ä¸€ä¸ªå®ç°äº†Closeableæ¥å£,åˆ©ç”¨è£…é¥°å™¨æ¨¡å¼åŒ…è£¹äº†å¯¹åº”çš„Reentrantlockçš„å®ä½“ç±»æ¥è¾¾æˆæˆ‘ä»¬çš„ç›®æ ‡","like_count":0},{"had_liked":false,"id":218780,"user_name":"è´ºå®‡","can_delete":false,"product_type":"c1","uid":1445040,"ip_address":"","ucode":"55854825CC4AD2","user_header":"https://static001.geekbang.org/account/avatar/00/16/0c/b0/26c0e53f.jpg","comment_is_top":false,"comment_ctime":1589874747,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"é‡åˆ°è¿‡æ•°æ®åº“æ­»é”çš„æƒ…å†µï¼ŒåŠ é”é¡ºåºè¿˜æ˜¯å¾ˆé‡è¦çš„","like_count":0},{"had_liked":false,"id":173771,"user_name":"å°ä¼Ÿ","can_delete":false,"product_type":"c1","uid":1359701,"ip_address":"","ucode":"124953423491E2","user_header":"https://static001.geekbang.org/account/avatar/00/14/bf/55/198c6104.jpg","comment_is_top":false,"comment_ctime":1579682290,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"è¯¾åä½œä¸šï¼šhttps:&#47;&#47;github.com&#47;ToddSAP&#47;Geektime&#47;tree&#47;master&#47;src&#47;mqmaster&#47;course17\nä¸¤ç§æ–¹æ³•ï¼š\n1. æ¥å£ä»£ç†ï¼šä»£ç æœ‰å…¥ä¾µ\n2. AOPï¼šå¯åšåˆ°ä»£ç æ— å…¥ä¾µ","like_count":0,"discussions":[{"author":{"id":1111821,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f7/0d/355a9658.jpg","nickname":"poxiao1234","note":"","ucode":"DBAA45E47DAA7A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":210815,"discussion_content":"ä¹°äº†æç¥è€å¸ˆä¸¤ä¸ªä¸“æ ï¼Œæœ‰è¾ƒç›¸åŒçš„æ„Ÿæ‚Ÿï¼Œå¾ˆå¸Œæœ›è€å¸ˆç»™ç‚¹æ·±å…¥çš„å¹²è´§å‘¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584778550,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":338743,"user_name":"i_chase","can_delete":false,"product_type":"c1","uid":1795511,"ip_address":"","ucode":"09C41C863F4EA3","user_header":"https://static001.geekbang.org/account/avatar/00/1b/65/b7/058276dc.jpg","comment_is_top":false,"comment_ctime":1647697986,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"å˜æˆjavaå¤§è®²å ‚äº†ã€‚ã€‚","like_count":1},{"had_liked":false,"id":176411,"user_name":"å¾€äº‹éšé£ï¼Œé¡ºå…¶è‡ªç„¶","can_delete":false,"product_type":"c1","uid":1235692,"ip_address":"","ucode":"F266EC6B143E38","user_header":"https://static001.geekbang.org/account/avatar/00/12/da/ec/779c1a78.jpg","comment_is_top":false,"comment_ctime":1581053485,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"åå…«èˆ¬æ­¦å™¨å…¨ç”¨ä¸Šï¼Œé˜Ÿåˆ—è¿˜æ˜¯å¤šè®²äº›æ·±å…¥çš„çŸ¥è¯†","like_count":1,"discussions":[{"author":{"id":1111821,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f7/0d/355a9658.jpg","nickname":"poxiao1234","note":"","ucode":"DBAA45E47DAA7A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":210815,"discussion_content":"ä¹°äº†æç¥è€å¸ˆä¸¤ä¸ªä¸“æ ï¼Œæœ‰è¾ƒç›¸åŒçš„æ„Ÿæ‚Ÿï¼Œå¾ˆå¸Œæœ›è€å¸ˆç»™ç‚¹æ·±å…¥çš„å¹²è´§å‘¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584778550,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":144417,"user_name":"Switch","can_delete":false,"product_type":"c1","uid":1049360,"ip_address":"","ucode":"D8A7F7F6A0BEA9","user_header":"https://static001.geekbang.org/account/avatar/00/10/03/10/26f9f762.jpg","comment_is_top":false,"comment_ctime":1571918255,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"try with resourceå®ç°\nä¼ å…¥å‚æ•°å®ç°\n\nhttps:&#47;&#47;github.com&#47;Switch-vov&#47;mq-learing&#47;tree&#47;master&#47;src&#47;main&#47;java&#47;com&#47;switchvov&#47;lock","like_count":1},{"had_liked":false,"id":367465,"user_name":"åƒé”¤ç™¾ç‚¼é¢†æ‚Ÿä¹‹æé™","can_delete":false,"product_type":"c1","uid":1744257,"ip_address":"å¹¿ä¸œ","ucode":"224B5CF2101716","user_header":"https://static001.geekbang.org/account/avatar/00/1a/9d/81/d748b7eb.jpg","comment_is_top":false,"comment_ctime":1675249651,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"å…³äºé”ä½¿ç”¨çš„å»ºè®®ï¼š\n\n1.èƒ½ä¸ä½¿ç”¨é”å°±ä¸è¦ä½¿ç”¨é”ï¼Œæˆ–è€…ä¸æ¸…æ¥šæ˜¯å¦éœ€è¦é”çš„æƒ…å†µä¸‹ä¹Ÿä¸è¦ä½¿ç”¨é”ã€‚\n2.åŠ é”ä¸è§£é”éƒ½å¿…é¡»åœ¨åŒä¸€ä¸ªæ–¹æ³•å†…ï¼Œé¿å…åŠ é”åå¿˜è®°è§£é”ã€‚\n3.å°½é‡ä¸è¦åœ¨å·²ç»æŒæœ‰ä¸€æŠŠé”çš„æƒ…å†µä¸‹ï¼Œå†å»æŒæœ‰å¤šæŠŠé”ã€‚\n4.å¦‚æœå¿…é¡»æŒæœ‰å¤šæŠŠé”ï¼ŒåŠ é”ä¸è§£é”çš„é¡ºåºè¦ç›¸åï¼Œä¾‹å¦‚åŠ é”é¡ºåºæ˜¯A-&gt;B-&gt;Cï¼Œé‚£ä¹ˆè§£é”çš„é¡ºåºå°±æ˜¯C-&gt;B-&gt;Aã€‚\n5.ç»™ä½ ç³»ç»Ÿä¸­çš„é”å®šä¸€ä¸ªé¡ºåºï¼Œåœ¨ä»»ä½•æƒ…å†µéƒ½æŒ‰è¿™ä¸ªé¡ºåºåŠ é”ã€‚","like_count":0},{"had_liked":false,"id":351431,"user_name":"syz","can_delete":false,"product_type":"c1","uid":1174704,"ip_address":"","ucode":"54AF17ACD72645","user_header":"https://static001.geekbang.org/account/avatar/00/11/ec/b0/4e22819f.jpg","comment_is_top":false,"comment_ctime":1657784378,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"æ­»é”ï¼šå¿˜è®°é‡Šæ”¾ã€é”é‡å…¥é—®é¢˜ã€å¤šä¸ªé”å¤šå¤„è°ƒç”¨ç›¸äº’ç«äº‰\nfun lockAndUnlock(doSth :()-&gt;Unit,onError:(e:Exception)-&gt;Unit){\n        try {\n            lock.lock()\n            doSth()\n        }catch (e:Exception){\n            onError(e)\n        }finally {\n            lock.unlock()\n        }\n    }\n\n}","like_count":0},{"had_liked":false,"id":342819,"user_name":"é™ˆæ–Œ","can_delete":false,"product_type":"c1","uid":1367048,"ip_address":"","ucode":"B639AB5F6AA03D","user_header":"https://static001.geekbang.org/account/avatar/00/14/dc/08/64f5ab52.jpg","comment_is_top":false,"comment_ctime":1650477012,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"è¯»å†™é”ï¼Œåœ¨å…¶ä»–çº¿ç¨‹æŒæœ‰è¯»é”æ—¶ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹å¯ä»¥è¿‡å»åˆ°å†™é”å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":308746,"user_name":"èœé¸Ÿ","can_delete":false,"product_type":"c1","uid":2451215,"ip_address":"","ucode":"214A61B6B3410F","user_header":"https://static001.geekbang.org/account/avatar/00/25/67/0f/3cb10900.jpg","comment_is_top":false,"comment_ctime":1629780345,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"çº¿ç¨‹çš„åˆ‡æ¢çš„ä»£ä»·æœ‰å¤šå¤§ï¼Ÿä»¥åŠçº¿ç¨‹åˆ‡æ¢ä¼šå¼•èµ·ç¼“å­˜å¤±æ•ˆå—ï¼Ÿ","like_count":0},{"had_liked":false,"id":277899,"user_name":"Heaven","can_delete":false,"product_type":"c1","uid":1694207,"ip_address":"","ucode":"FA33FBCC66C911","user_header":"https://static001.geekbang.org/account/avatar/00/19/d9/ff/b23018a6.jpg","comment_is_top":false,"comment_ctime":1612665027,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"Java7 æä¾›äº†å¯¹åº”çš„try-with-resource,æˆ‘ä»¬å¯ä»¥å®ç°ä¸€ä¸ªå®ç°äº†Closeableæ¥å£,åˆ©ç”¨è£…é¥°å™¨æ¨¡å¼åŒ…è£¹äº†å¯¹åº”çš„Reentrantlockçš„å®ä½“ç±»æ¥è¾¾æˆæˆ‘ä»¬çš„ç›®æ ‡","like_count":0},{"had_liked":false,"id":218780,"user_name":"è´ºå®‡","can_delete":false,"product_type":"c1","uid":1445040,"ip_address":"","ucode":"55854825CC4AD2","user_header":"https://static001.geekbang.org/account/avatar/00/16/0c/b0/26c0e53f.jpg","comment_is_top":false,"comment_ctime":1589874747,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"é‡åˆ°è¿‡æ•°æ®åº“æ­»é”çš„æƒ…å†µï¼ŒåŠ é”é¡ºåºè¿˜æ˜¯å¾ˆé‡è¦çš„","like_count":0},{"had_liked":false,"id":173771,"user_name":"å°ä¼Ÿ","can_delete":false,"product_type":"c1","uid":1359701,"ip_address":"","ucode":"124953423491E2","user_header":"https://static001.geekbang.org/account/avatar/00/14/bf/55/198c6104.jpg","comment_is_top":false,"comment_ctime":1579682290,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"è¯¾åä½œä¸šï¼šhttps:&#47;&#47;github.com&#47;ToddSAP&#47;Geektime&#47;tree&#47;master&#47;src&#47;mqmaster&#47;course17\nä¸¤ç§æ–¹æ³•ï¼š\n1. æ¥å£ä»£ç†ï¼šä»£ç æœ‰å…¥ä¾µ\n2. AOPï¼šå¯åšåˆ°ä»£ç æ— å…¥ä¾µ","like_count":0},{"had_liked":false,"id":152343,"user_name":"Leododo","can_delete":false,"product_type":"c1","uid":1103745,"ip_address":"","ucode":"755DDB8A00B7A4","user_header":"https://static001.geekbang.org/account/avatar/00/10/d7/81/2727b475.jpg","comment_is_top":false,"comment_ctime":1573979228,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¦‚æœä¸šåŠ¡åœºæ™¯éœ€è¦è°ƒç”¨å¤šä¸ªé”ï¼Œåº”è¯¥å°†è¿™å‡ æŠŠé”å½’æ”¾åˆ°ä¸€ä¸ªç›’å­é‡Œé¢ã€‚åŠ é”è§£é”çš„æ¡ä»¶ï¼Œåœ¨å®šä¹‰é”çš„æ—¶å€™å°±è§„å®šå¥½ã€‚æ¯”å¦‚ï¼Œæ‹¿åˆ°Bé”çš„æ¡ä»¶æ˜¯å¿…é¡»å·²ç»æ‹¿åˆ°Aé”ã€‚è¿™æ ·å¯ä»¥æœ‰æ•ˆçš„é¿å…äººä¸ºçš„å¤±è¯¯ã€‚","like_count":0},{"had_liked":false,"id":138857,"user_name":"é™ˆå‡¯","can_delete":false,"product_type":"c1","uid":1453035,"ip_address":"","ucode":"69A979A5DC91D6","user_header":"","comment_is_top":false,"comment_ctime":1570493974,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"å¹²è´§æ»¡æ»¡ğŸ‘","like_count":0},{"had_liked":false,"id":135990,"user_name":"é’±","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1569321400,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"å­¦è¿‡å®ä»¤è€å¸ˆçš„å¹¶å‘ç¼–ç¨‹ï¼Œå†çœ‹è€å¸ˆè¿™ä¸ªæ„Ÿè§‰å¾ˆè½»æ¾ï¼Œä¸è¿‡æ¯•ç«Ÿä¸“æ ä¸»é¢˜æ‰€é™ï¼Œå®ä»¤è€å¸ˆæ•´ä¸ªä¸“æ éƒ½åœ¨è®²å¹¶å‘ç¼–ç¨‹æ›´åŠ ç³»ç»Ÿå’Œä¸“ä¸šã€‚\nJAVAä¸­å®ç°ä¸€ä¸ªtry-with-lockï¼Œæ€è·¯æœ‰ä¸¤ä¸ªï¼š\n1ï¼šæ³¨è§£\n2ï¼šä»£ç†ï¼Œé™æ€æˆ–åŠ¨æ€","like_count":0},{"had_liked":false,"id":129936,"user_name":"æ¸¸å¼‹äº‘ç«¯","can_delete":false,"product_type":"c1","uid":1208637,"ip_address":"","ucode":"A960E8F5AA25B9","user_header":"https://static001.geekbang.org/account/avatar/00/12/71/3d/da8dc880.jpg","comment_is_top":false,"comment_ctime":1567329745,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"ABBAé”æœ€å®¹æ˜“å‡ºé—®é¢˜ï¼Œè€å¸ˆçš„ç»éªŒå¾ˆé‡è¦ï¼Œå°½å¯èƒ½é¿å…é”ä¸­é”ã€‚","like_count":0},{"had_liked":false,"id":129721,"user_name":"è®¸ç«¥ç«¥","can_delete":false,"product_type":"c1","uid":1003005,"ip_address":"","ucode":"4B799C0C6BC678","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4d/fd/0aa0e39f.jpg","comment_is_top":false,"comment_ctime":1567231548,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"è€å¸ˆè¿™ç¯‡æ–‡ç« çš„åˆ†äº«å¯¹æˆ‘è¿™æ ·çš„éåç«¯ç¨‹åºå‘˜å¾ˆå‹å¥½ï¼Œæ„Ÿè°¢è€å¸ˆçš„åˆ†äº«ã€‚","like_count":0},{"had_liked":false,"id":129663,"user_name":"ãƒ¾(â—Â°âˆ‡Â°â—)ï¾‰ï¾","can_delete":false,"product_type":"c1","uid":1044175,"ip_address":"","ucode":"89545632BDA56E","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJOBwR7MCVqwZbPA5RQ2mjUjd571jUXUcBCE7lY5vSMibWn8D5S4PzDZMaAhRPdnRBqYbVOBTJibhJg/132","comment_is_top":false,"comment_ctime":1567211415,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"é”æ˜¯ä¸ºäº†å¹¶å‘æ—¶çš„å…±äº«è€Œåˆ›å»ºï¼Œå¦‚æœæ²¡æœ‰å…±äº«çš„çœŸæ­£éœ€æ±‚ä¸åº”è¯¥ä½¿ç”¨é”ã€‚é”å¸¦æ¥çš„æœ€å¤§é—®é¢˜å°±æ˜¯å¤æ‚åº¦å’Œå¿ƒæ™ºè´Ÿæ‹…ä¸Šå‡ï¼Œæ‰€ä»¥å¾ˆå¤šæ¡†æ¶æŠŠæœ€å¤æ‚çš„å®ç°éšè—åœ¨å†…éƒ¨ï¼Œç•™ç»™ä½¿ç”¨è€…ä½¿ç”¨å‡†åˆ™","like_count":0},{"had_liked":false,"id":152343,"user_name":"Leododo","can_delete":false,"product_type":"c1","uid":1103745,"ip_address":"","ucode":"755DDB8A00B7A4","user_header":"https://static001.geekbang.org/account/avatar/00/10/d7/81/2727b475.jpg","comment_is_top":false,"comment_ctime":1573979228,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¦‚æœä¸šåŠ¡åœºæ™¯éœ€è¦è°ƒç”¨å¤šä¸ªé”ï¼Œåº”è¯¥å°†è¿™å‡ æŠŠé”å½’æ”¾åˆ°ä¸€ä¸ªç›’å­é‡Œé¢ã€‚åŠ é”è§£é”çš„æ¡ä»¶ï¼Œåœ¨å®šä¹‰é”çš„æ—¶å€™å°±è§„å®šå¥½ã€‚æ¯”å¦‚ï¼Œæ‹¿åˆ°Bé”çš„æ¡ä»¶æ˜¯å¿…é¡»å·²ç»æ‹¿åˆ°Aé”ã€‚è¿™æ ·å¯ä»¥æœ‰æ•ˆçš„é¿å…äººä¸ºçš„å¤±è¯¯ã€‚","like_count":0},{"had_liked":false,"id":138857,"user_name":"é™ˆå‡¯","can_delete":false,"product_type":"c1","uid":1453035,"ip_address":"","ucode":"69A979A5DC91D6","user_header":"","comment_is_top":false,"comment_ctime":1570493974,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"å¹²è´§æ»¡æ»¡ğŸ‘","like_count":0},{"had_liked":false,"id":135990,"user_name":"é’±","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1569321400,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"å­¦è¿‡å®ä»¤è€å¸ˆçš„å¹¶å‘ç¼–ç¨‹ï¼Œå†çœ‹è€å¸ˆè¿™ä¸ªæ„Ÿè§‰å¾ˆè½»æ¾ï¼Œä¸è¿‡æ¯•ç«Ÿä¸“æ ä¸»é¢˜æ‰€é™ï¼Œå®ä»¤è€å¸ˆæ•´ä¸ªä¸“æ éƒ½åœ¨è®²å¹¶å‘ç¼–ç¨‹æ›´åŠ ç³»ç»Ÿå’Œä¸“ä¸šã€‚\nJAVAä¸­å®ç°ä¸€ä¸ªtry-with-lockï¼Œæ€è·¯æœ‰ä¸¤ä¸ªï¼š\n1ï¼šæ³¨è§£\n2ï¼šä»£ç†ï¼Œé™æ€æˆ–åŠ¨æ€","like_count":0},{"had_liked":false,"id":129936,"user_name":"æ¸¸å¼‹äº‘ç«¯","can_delete":false,"product_type":"c1","uid":1208637,"ip_address":"","ucode":"A960E8F5AA25B9","user_header":"https://static001.geekbang.org/account/avatar/00/12/71/3d/da8dc880.jpg","comment_is_top":false,"comment_ctime":1567329745,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"ABBAé”æœ€å®¹æ˜“å‡ºé—®é¢˜ï¼Œè€å¸ˆçš„ç»éªŒå¾ˆé‡è¦ï¼Œå°½å¯èƒ½é¿å…é”ä¸­é”ã€‚","like_count":0},{"had_liked":false,"id":129721,"user_name":"è®¸ç«¥ç«¥","can_delete":false,"product_type":"c1","uid":1003005,"ip_address":"","ucode":"4B799C0C6BC678","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4d/fd/0aa0e39f.jpg","comment_is_top":false,"comment_ctime":1567231548,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"è€å¸ˆè¿™ç¯‡æ–‡ç« çš„åˆ†äº«å¯¹æˆ‘è¿™æ ·çš„éåç«¯ç¨‹åºå‘˜å¾ˆå‹å¥½ï¼Œæ„Ÿè°¢è€å¸ˆçš„åˆ†äº«ã€‚","like_count":0},{"had_liked":false,"id":129663,"user_name":"ãƒ¾(â—Â°âˆ‡Â°â—)ï¾‰ï¾","can_delete":false,"product_type":"c1","uid":1044175,"ip_address":"","ucode":"89545632BDA56E","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJOBwR7MCVqwZbPA5RQ2mjUjd571jUXUcBCE7lY5vSMibWn8D5S4PzDZMaAhRPdnRBqYbVOBTJibhJg/132","comment_is_top":false,"comment_ctime":1567211415,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"é”æ˜¯ä¸ºäº†å¹¶å‘æ—¶çš„å…±äº«è€Œåˆ›å»ºï¼Œå¦‚æœæ²¡æœ‰å…±äº«çš„çœŸæ­£éœ€æ±‚ä¸åº”è¯¥ä½¿ç”¨é”ã€‚é”å¸¦æ¥çš„æœ€å¤§é—®é¢˜å°±æ˜¯å¤æ‚åº¦å’Œå¿ƒæ™ºè´Ÿæ‹…ä¸Šå‡ï¼Œæ‰€ä»¥å¾ˆå¤šæ¡†æ¶æŠŠæœ€å¤æ‚çš„å®ç°éšè—åœ¨å†…éƒ¨ï¼Œç•™ç»™ä½¿ç”¨è€…ä½¿ç”¨å‡†åˆ™","like_count":0}]}