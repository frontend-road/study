{"id":95847,"title":"35 | ä¸¤é˜¶æ®µç»ˆæ­¢æ¨¡å¼ï¼šå¦‚ä½•ä¼˜é›…åœ°ç»ˆæ­¢çº¿ç¨‹ï¼Ÿ","content":"<p>å‰é¢ä¸¤ç¯‡æ–‡ç« æˆ‘ä»¬è®²è¿°çš„å†…å®¹ï¼Œä»çº¯æŠ€æœ¯çš„è§’åº¦çœ‹ï¼Œéƒ½æ˜¯<strong>å¯åŠ¨</strong>å¤šçº¿ç¨‹å»æ‰§è¡Œä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡ã€‚æ—¢å¯åŠ¨ï¼Œé‚£åˆè¯¥å¦‚ä½•ç»ˆæ­¢å‘¢ï¼Ÿä»Šå¤©å’±ä»¬å°±ä»æŠ€æœ¯çš„è§’åº¦èŠèŠå¦‚ä½•ä¼˜é›…åœ°<strong>ç»ˆæ­¢</strong>çº¿ç¨‹ï¼Œæ­£æ‰€è°“æœ‰å§‹æœ‰ç»ˆã€‚</p><p>åœ¨<a href=\"https://time.geekbang.org/column/article/86366\">ã€Š09 | Javaçº¿ç¨‹ï¼ˆä¸Šï¼‰ï¼šJavaçº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸã€‹</a>ä¸­ï¼Œæˆ‘æ›¾è®²è¿‡ï¼šçº¿ç¨‹æ‰§è¡Œå®Œæˆ–è€…å‡ºç°å¼‚å¸¸å°±ä¼šè¿›å…¥ç»ˆæ­¢çŠ¶æ€ã€‚è¿™æ ·çœ‹ï¼Œç»ˆæ­¢ä¸€ä¸ªçº¿ç¨‹çœ‹ä¸Šå»å¾ˆç®€å•å•Šï¼ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œå®Œè‡ªå·±çš„ä»»åŠ¡ï¼Œè‡ªå·±è¿›å…¥ç»ˆæ­¢çŠ¶æ€ï¼Œè¿™çš„ç¡®å¾ˆç®€å•ã€‚ä¸è¿‡æˆ‘ä»¬ä»Šå¤©è°ˆåˆ°çš„â€œä¼˜é›…åœ°ç»ˆæ­¢çº¿ç¨‹â€ï¼Œä¸æ˜¯è‡ªå·±ç»ˆæ­¢è‡ªå·±ï¼Œè€Œæ˜¯åœ¨ä¸€ä¸ªçº¿ç¨‹T1ä¸­ï¼Œç»ˆæ­¢çº¿ç¨‹T2ï¼›è¿™é‡Œæ‰€è°“çš„â€œä¼˜é›…â€ï¼ŒæŒ‡çš„æ˜¯ç»™T2ä¸€ä¸ªæœºä¼šæ–™ç†åäº‹ï¼Œè€Œä¸æ˜¯è¢«ä¸€å‰‘å°å–‰ã€‚</p><p>Javaè¯­è¨€çš„Threadç±»ä¸­æ›¾ç»æä¾›äº†ä¸€ä¸ªstop()æ–¹æ³•ï¼Œç”¨æ¥ç»ˆæ­¢çº¿ç¨‹ï¼Œå¯æ˜¯æ—©å·²ä¸å»ºè®®ä½¿ç”¨äº†ï¼ŒåŸå› æ˜¯è¿™ä¸ªæ–¹æ³•ç”¨çš„å°±æ˜¯ä¸€å‰‘å°å–‰çš„åšæ³•ï¼Œè¢«ç»ˆæ­¢çš„çº¿ç¨‹æ²¡æœ‰æœºä¼šæ–™ç†åäº‹ã€‚</p><p>æ—¢ç„¶ä¸å»ºè®®ä½¿ç”¨stop()æ–¹æ³•ï¼Œé‚£åœ¨Javaé¢†åŸŸï¼Œæˆ‘ä»¬åˆè¯¥å¦‚ä½•ä¼˜é›…åœ°ç»ˆæ­¢çº¿ç¨‹å‘¢ï¼Ÿ</p><h2>å¦‚ä½•ç†è§£ä¸¤é˜¶æ®µç»ˆæ­¢æ¨¡å¼</h2><p>å‰è¾ˆä»¬ç»è¿‡è®¤çœŸå¯¹æ¯”åˆ†æï¼Œå·²ç»æ€»ç»“å‡ºäº†ä¸€å¥—æˆç†Ÿçš„æ–¹æ¡ˆï¼Œå«åš<strong>ä¸¤é˜¶æ®µç»ˆæ­¢æ¨¡å¼</strong>ã€‚é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯å°†ç»ˆæ­¢è¿‡ç¨‹åˆ†æˆä¸¤ä¸ªé˜¶æ®µï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªé˜¶æ®µä¸»è¦æ˜¯çº¿ç¨‹T1å‘çº¿ç¨‹T2<strong>å‘é€ç»ˆæ­¢æŒ‡ä»¤</strong>ï¼Œè€Œç¬¬äºŒé˜¶æ®µåˆ™æ˜¯çº¿ç¨‹T2<strong>å“åº”ç»ˆæ­¢æŒ‡ä»¤</strong>ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/a5/5c/a5ea3cb2106f11ef065702f34703645c.png?wh=1142*278\" alt=\"\"></p><center><span class=\"reference\">ä¸¤é˜¶æ®µç»ˆæ­¢æ¨¡å¼ç¤ºæ„å›¾</span></center><!-- [[[read_end]]] --><p>é‚£åœ¨Javaè¯­è¨€é‡Œï¼Œç»ˆæ­¢æŒ‡ä»¤æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿè¿™ä¸ªè¦ä»Javaçº¿ç¨‹çš„çŠ¶æ€è½¬æ¢è¿‡ç¨‹è¯´èµ·ã€‚æˆ‘ä»¬åœ¨<a href=\"https://time.geekbang.org/column/article/86366\">ã€Š09 | Javaçº¿ç¨‹ï¼ˆä¸Šï¼‰ï¼šJavaçº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸã€‹</a>ä¸­æ›¾ç»æåˆ°è¿‡Javaçº¿ç¨‹çš„çŠ¶æ€è½¬æ¢å›¾ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/3f/8c/3f6c6bf95a6e8627bdf3cb621bbb7f8c.png?wh=1142*714\" alt=\"\"></p><center><span class=\"reference\">Javaä¸­çš„çº¿ç¨‹çŠ¶æ€è½¬æ¢å›¾</span></center><p>ä»è¿™ä¸ªå›¾é‡Œä½ ä¼šå‘ç°ï¼ŒJavaçº¿ç¨‹è¿›å…¥ç»ˆæ­¢çŠ¶æ€çš„å‰ææ˜¯çº¿ç¨‹è¿›å…¥RUNNABLEçŠ¶æ€ï¼Œè€Œå®é™…ä¸Šçº¿ç¨‹ä¹Ÿå¯èƒ½å¤„åœ¨ä¼‘çœ çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬è¦æƒ³ç»ˆæ­¢ä¸€ä¸ªçº¿ç¨‹ï¼Œé¦–å…ˆè¦æŠŠçº¿ç¨‹çš„çŠ¶æ€ä»ä¼‘çœ çŠ¶æ€è½¬æ¢åˆ°RUNNABLEçŠ¶æ€ã€‚å¦‚ä½•åšåˆ°å‘¢ï¼Ÿè¿™ä¸ªè¦é Java Threadç±»æä¾›çš„<strong>interrupt()æ–¹æ³•</strong>ï¼Œå®ƒå¯ä»¥å°†ä¼‘çœ çŠ¶æ€çš„çº¿ç¨‹è½¬æ¢åˆ°RUNNABLEçŠ¶æ€ã€‚</p><p>çº¿ç¨‹è½¬æ¢åˆ°RUNNABLEçŠ¶æ€ä¹‹åï¼Œæˆ‘ä»¬å¦‚ä½•å†å°†å…¶ç»ˆæ­¢å‘¢ï¼ŸRUNNABLEçŠ¶æ€è½¬æ¢åˆ°ç»ˆæ­¢çŠ¶æ€ï¼Œä¼˜é›…çš„æ–¹å¼æ˜¯è®©Javaçº¿ç¨‹è‡ªå·±æ‰§è¡Œå®Œ run() æ–¹æ³•ï¼Œæ‰€ä»¥ä¸€èˆ¬æˆ‘ä»¬é‡‡ç”¨çš„æ–¹æ³•æ˜¯<strong>è®¾ç½®ä¸€ä¸ªæ ‡å¿—ä½</strong>ï¼Œç„¶åçº¿ç¨‹ä¼šåœ¨åˆé€‚çš„æ—¶æœºæ£€æŸ¥è¿™ä¸ªæ ‡å¿—ä½ï¼Œå¦‚æœå‘ç°ç¬¦åˆç»ˆæ­¢æ¡ä»¶ï¼Œåˆ™è‡ªåŠ¨é€€å‡ºrun()æ–¹æ³•ã€‚è¿™ä¸ªè¿‡ç¨‹å…¶å®å°±æ˜¯æˆ‘ä»¬å‰é¢æåˆ°çš„ç¬¬äºŒé˜¶æ®µï¼š<strong>å“åº”ç»ˆæ­¢æŒ‡ä»¤</strong>ã€‚</p><p>ç»¼åˆä¸Šé¢è¿™ä¸¤ç‚¹ï¼Œæˆ‘ä»¬èƒ½æ€»ç»“å‡ºç»ˆæ­¢æŒ‡ä»¤ï¼Œå…¶å®åŒ…æ‹¬ä¸¤æ–¹é¢å†…å®¹ï¼š<strong>interrupt()æ–¹æ³•</strong>å’Œ<strong>çº¿ç¨‹ç»ˆæ­¢çš„æ ‡å¿—ä½</strong>ã€‚</p><p>ç†è§£äº†ä¸¤é˜¶æ®µç»ˆæ­¢æ¨¡å¼ä¹‹åï¼Œä¸‹é¢æˆ‘ä»¬çœ‹ä¸€ä¸ªå®é™…å·¥ä½œä¸­çš„æ¡ˆä¾‹ã€‚</p><h2>ç”¨ä¸¤é˜¶æ®µç»ˆæ­¢æ¨¡å¼ç»ˆæ­¢ç›‘æ§æ“ä½œ</h2><p>å®é™…å·¥ä½œä¸­ï¼Œæœ‰äº›ç›‘æ§ç³»ç»Ÿéœ€è¦åŠ¨æ€åœ°é‡‡é›†ä¸€äº›æ•°æ®ï¼Œä¸€èˆ¬éƒ½æ˜¯ç›‘æ§ç³»ç»Ÿå‘é€é‡‡é›†æŒ‡ä»¤ç»™è¢«ç›‘æ§ç³»ç»Ÿçš„ç›‘æ§ä»£ç†ï¼Œç›‘æ§ä»£ç†æ¥æ”¶åˆ°æŒ‡ä»¤ä¹‹åï¼Œä»ç›‘æ§ç›®æ ‡æ”¶é›†æ•°æ®ï¼Œç„¶åå›ä¼ ç»™ç›‘æ§ç³»ç»Ÿï¼Œè¯¦ç»†è¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚å‡ºäºå¯¹æ€§èƒ½çš„è€ƒè™‘ï¼ˆæœ‰äº›ç›‘æ§é¡¹å¯¹ç³»ç»Ÿæ€§èƒ½å½±å“å¾ˆå¤§ï¼Œæ‰€ä»¥ä¸èƒ½ä¸€ç›´æŒç»­ç›‘æ§ï¼‰ï¼ŒåŠ¨æ€é‡‡é›†åŠŸèƒ½ä¸€èˆ¬éƒ½ä¼šæœ‰ç»ˆæ­¢æ“ä½œã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/11/5f/11e3b0a4a9cf743124091b22e10d275f.png?wh=1142*339\" alt=\"\"></p><center><span class=\"reference\">åŠ¨æ€é‡‡é›†åŠŸèƒ½ç¤ºæ„å›¾</span></center><p>ä¸‹é¢çš„ç¤ºä¾‹ä»£ç æ˜¯<strong>ç›‘æ§ä»£ç†</strong>ç®€åŒ–ä¹‹åçš„å®ç°ï¼Œstart()æ–¹æ³•ä¼šå¯åŠ¨ä¸€ä¸ªæ–°çš„çº¿ç¨‹rptThreadæ¥æ‰§è¡Œç›‘æ§æ•°æ®é‡‡é›†å’Œå›ä¼ çš„åŠŸèƒ½ï¼Œstop()æ–¹æ³•éœ€è¦ä¼˜é›…åœ°ç»ˆæ­¢çº¿ç¨‹rptThreadï¼Œé‚£stop()ç›¸å…³åŠŸèƒ½è¯¥å¦‚ä½•å®ç°å‘¢ï¼Ÿ</p><pre><code>class Proxy {\n  boolean started = false;\n  //é‡‡é›†çº¿ç¨‹\n  Thread rptThread;\n  //å¯åŠ¨é‡‡é›†åŠŸèƒ½\n  synchronized void start(){\n    //ä¸å…è®¸åŒæ—¶å¯åŠ¨å¤šä¸ªé‡‡é›†çº¿ç¨‹\n    if (started) {\n      return;\n    }\n    started = true;\n    rptThread = new Thread(()-&gt;{\n      while (true) {\n        //çœç•¥é‡‡é›†ã€å›ä¼ å®ç°\n        report();\n        //æ¯éš”ä¸¤ç§’é’Ÿé‡‡é›†ã€å›ä¼ ä¸€æ¬¡æ•°æ®\n        try {\n          Thread.sleep(2000);\n        } catch (InterruptedException e) {  \n        }\n      }\n      //æ‰§è¡Œåˆ°æ­¤å¤„è¯´æ˜çº¿ç¨‹é©¬ä¸Šç»ˆæ­¢\n      started = false;\n    });\n    rptThread.start();\n  }\n  //ç»ˆæ­¢é‡‡é›†åŠŸèƒ½\n  synchronized void stop(){\n    //å¦‚ä½•å®ç°ï¼Ÿ\n  }\n}  \n</code></pre><p>æŒ‰ç…§ä¸¤é˜¶æ®µç»ˆæ­¢æ¨¡å¼ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦åšçš„å°±æ˜¯å°†çº¿ç¨‹rptThreadçŠ¶æ€è½¬æ¢åˆ°RUNNABLEï¼Œåšæ³•å¾ˆç®€å•ï¼Œåªéœ€è¦åœ¨è°ƒç”¨ <code>rptThread.interrupt()</code> å°±å¯ä»¥äº†ã€‚çº¿ç¨‹rptThreadçš„çŠ¶æ€è½¬æ¢åˆ°RUNNABLEä¹‹åï¼Œå¦‚ä½•ä¼˜é›…åœ°ç»ˆæ­¢å‘¢ï¼Ÿä¸‹é¢çš„ç¤ºä¾‹ä»£ç ä¸­ï¼Œæˆ‘ä»¬é€‰æ‹©çš„æ ‡å¿—ä½æ˜¯çº¿ç¨‹çš„ä¸­æ–­çŠ¶æ€ï¼š<code>Thread.currentThread().isInterrupted()</code> ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬åœ¨æ•è·Thread.sleep()çš„ä¸­æ–­å¼‚å¸¸ä¹‹åï¼Œé€šè¿‡ <code>Thread.currentThread().interrupt()</code> é‡æ–°è®¾ç½®äº†çº¿ç¨‹çš„ä¸­æ–­çŠ¶æ€ï¼Œå› ä¸ºJVMçš„å¼‚å¸¸å¤„ç†ä¼šæ¸…é™¤çº¿ç¨‹çš„ä¸­æ–­çŠ¶æ€ã€‚</p><pre><code>class Proxy {\n  boolean started = false;\n  //é‡‡é›†çº¿ç¨‹\n  Thread rptThread;\n  //å¯åŠ¨é‡‡é›†åŠŸèƒ½\n  synchronized void start(){\n    //ä¸å…è®¸åŒæ—¶å¯åŠ¨å¤šä¸ªé‡‡é›†çº¿ç¨‹\n    if (started) {\n      return;\n    }\n    started = true;\n    rptThread = new Thread(()-&gt;{\n      while (!Thread.currentThread().isInterrupted()){\n        //çœç•¥é‡‡é›†ã€å›ä¼ å®ç°\n        report();\n        //æ¯éš”ä¸¤ç§’é’Ÿé‡‡é›†ã€å›ä¼ ä¸€æ¬¡æ•°æ®\n        try {\n          Thread.sleep(2000);\n        } catch (InterruptedException e){\n          //é‡æ–°è®¾ç½®çº¿ç¨‹ä¸­æ–­çŠ¶æ€\n          Thread.currentThread().interrupt();\n        }\n      }\n      //æ‰§è¡Œåˆ°æ­¤å¤„è¯´æ˜çº¿ç¨‹é©¬ä¸Šç»ˆæ­¢\n      started = false;\n    });\n    rptThread.start();\n  }\n  //ç»ˆæ­¢é‡‡é›†åŠŸèƒ½\n  synchronized void stop(){\n    rptThread.interrupt();\n  }\n}\n</code></pre><p>ä¸Šé¢çš„ç¤ºä¾‹ä»£ç çš„ç¡®èƒ½å¤Ÿè§£å†³å½“å‰çš„é—®é¢˜ï¼Œä½†æ˜¯å»ºè®®ä½ åœ¨å®é™…å·¥ä½œä¸­è°¨æ…ä½¿ç”¨ã€‚åŸå› åœ¨äºæˆ‘ä»¬å¾ˆå¯èƒ½åœ¨çº¿ç¨‹çš„run()æ–¹æ³•ä¸­è°ƒç”¨ç¬¬ä¸‰æ–¹ç±»åº“æä¾›çš„æ–¹æ³•ï¼Œè€Œæˆ‘ä»¬æ²¡æœ‰åŠæ³•ä¿è¯ç¬¬ä¸‰æ–¹ç±»åº“æ­£ç¡®å¤„ç†äº†çº¿ç¨‹çš„ä¸­æ–­å¼‚å¸¸ï¼Œä¾‹å¦‚ç¬¬ä¸‰æ–¹ç±»åº“åœ¨æ•è·åˆ°Thread.sleep()æ–¹æ³•æŠ›å‡ºçš„ä¸­æ–­å¼‚å¸¸åï¼Œæ²¡æœ‰é‡æ–°è®¾ç½®çº¿ç¨‹çš„ä¸­æ–­çŠ¶æ€ï¼Œé‚£ä¹ˆå°±ä¼šå¯¼è‡´çº¿ç¨‹ä¸èƒ½å¤Ÿæ­£å¸¸ç»ˆæ­¢ã€‚æ‰€ä»¥å¼ºçƒˆå»ºè®®ä½ <strong>è®¾ç½®è‡ªå·±çš„çº¿ç¨‹ç»ˆæ­¢æ ‡å¿—ä½</strong>ï¼Œä¾‹å¦‚åœ¨ä¸‹é¢çš„ä»£ç ä¸­ï¼Œä½¿ç”¨isTerminatedä½œä¸ºçº¿ç¨‹ç»ˆæ­¢æ ‡å¿—ä½ï¼Œæ­¤æ—¶æ— è®ºæ˜¯å¦æ­£ç¡®å¤„ç†äº†çº¿ç¨‹çš„ä¸­æ–­å¼‚å¸¸ï¼Œéƒ½ä¸ä¼šå½±å“çº¿ç¨‹ä¼˜é›…åœ°ç»ˆæ­¢ã€‚</p><pre><code>class Proxy {\n  //çº¿ç¨‹ç»ˆæ­¢æ ‡å¿—ä½\n  volatile boolean terminated = false;\n  boolean started = false;\n  //é‡‡é›†çº¿ç¨‹\n  Thread rptThread;\n  //å¯åŠ¨é‡‡é›†åŠŸèƒ½\n  synchronized void start(){\n    //ä¸å…è®¸åŒæ—¶å¯åŠ¨å¤šä¸ªé‡‡é›†çº¿ç¨‹\n    if (started) {\n      return;\n    }\n    started = true;\n    terminated = false;\n    rptThread = new Thread(()-&gt;{\n      while (!terminated){\n        //çœç•¥é‡‡é›†ã€å›ä¼ å®ç°\n        report();\n        //æ¯éš”ä¸¤ç§’é’Ÿé‡‡é›†ã€å›ä¼ ä¸€æ¬¡æ•°æ®\n        try {\n          Thread.sleep(2000);\n        } catch (InterruptedException e){\n          //é‡æ–°è®¾ç½®çº¿ç¨‹ä¸­æ–­çŠ¶æ€\n          Thread.currentThread().interrupt();\n        }\n      }\n      //æ‰§è¡Œåˆ°æ­¤å¤„è¯´æ˜çº¿ç¨‹é©¬ä¸Šç»ˆæ­¢\n      started = false;\n    });\n    rptThread.start();\n  }\n  //ç»ˆæ­¢é‡‡é›†åŠŸèƒ½\n  synchronized void stop(){\n    //è®¾ç½®ä¸­æ–­æ ‡å¿—ä½\n    terminated = true;\n    //ä¸­æ–­çº¿ç¨‹rptThread\n    rptThread.interrupt();\n  }\n}\n</code></pre><h2>å¦‚ä½•ä¼˜é›…åœ°ç»ˆæ­¢çº¿ç¨‹æ± </h2><p>Javaé¢†åŸŸç”¨çš„æœ€å¤šçš„è¿˜æ˜¯çº¿ç¨‹æ± ï¼Œè€Œä¸æ˜¯æ‰‹åŠ¨åœ°åˆ›å»ºçº¿ç¨‹ã€‚é‚£æˆ‘ä»¬è¯¥å¦‚ä½•ä¼˜é›…åœ°ç»ˆæ­¢çº¿ç¨‹æ± å‘¢ï¼Ÿ</p><p>çº¿ç¨‹æ± æä¾›äº†ä¸¤ä¸ªæ–¹æ³•ï¼š<strong>shutdown()<strong>å’Œ</strong>shutdownNow()</strong>ã€‚è¿™ä¸¤ä¸ªæ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿè¦äº†è§£å®ƒä»¬çš„åŒºåˆ«ï¼Œå°±å…ˆéœ€è¦äº†è§£çº¿ç¨‹æ± çš„å®ç°åŸç†ã€‚</p><p>æˆ‘ä»¬æ›¾ç»è®²è¿‡ï¼ŒJavaçº¿ç¨‹æ± æ˜¯ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å¼çš„ä¸€ç§å®ç°ï¼Œæäº¤ç»™çº¿ç¨‹æ± çš„ä»»åŠ¡ï¼Œé¦–å…ˆæ˜¯è¿›å…¥ä¸€ä¸ªé˜»å¡é˜Ÿåˆ—ä¸­ï¼Œä¹‹åçº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹ä»é˜»å¡é˜Ÿåˆ—ä¸­å–å‡ºä»»åŠ¡æ‰§è¡Œã€‚</p><p>shutdown()æ–¹æ³•æ˜¯ä¸€ç§å¾ˆä¿å®ˆçš„å…³é—­çº¿ç¨‹æ± çš„æ–¹æ³•ã€‚çº¿ç¨‹æ± æ‰§è¡Œshutdown()åï¼Œå°±ä¼šæ‹’ç»æ¥æ”¶æ–°çš„ä»»åŠ¡ï¼Œä½†æ˜¯ä¼šç­‰å¾…çº¿ç¨‹æ± ä¸­æ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡å’Œå·²ç»è¿›å…¥é˜»å¡é˜Ÿåˆ—çš„ä»»åŠ¡éƒ½æ‰§è¡Œå®Œä¹‹åæ‰æœ€ç»ˆå…³é—­çº¿ç¨‹æ± ã€‚</p><p>è€ŒshutdownNow()æ–¹æ³•ï¼Œç›¸å¯¹å°±æ¿€è¿›ä¸€äº›äº†ï¼Œçº¿ç¨‹æ± æ‰§è¡ŒshutdownNow()åï¼Œä¼šæ‹’ç»æ¥æ”¶æ–°çš„ä»»åŠ¡ï¼ŒåŒæ—¶è¿˜ä¼šä¸­æ–­çº¿ç¨‹æ± ä¸­æ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡ï¼Œå·²ç»è¿›å…¥é˜»å¡é˜Ÿåˆ—çš„ä»»åŠ¡ä¹Ÿè¢«å‰¥å¤ºäº†æ‰§è¡Œçš„æœºä¼šï¼Œä¸è¿‡è¿™äº›è¢«å‰¥å¤ºæ‰§è¡Œæœºä¼šçš„ä»»åŠ¡ä¼šä½œä¸ºshutdownNow()æ–¹æ³•çš„è¿”å›å€¼è¿”å›ã€‚å› ä¸ºshutdownNow()æ–¹æ³•ä¼šä¸­æ–­æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹ï¼Œæ‰€ä»¥æäº¤åˆ°çº¿ç¨‹æ± çš„ä»»åŠ¡ï¼Œå¦‚æœéœ€è¦ä¼˜é›…åœ°ç»“æŸï¼Œå°±éœ€è¦æ­£ç¡®åœ°å¤„ç†çº¿ç¨‹ä¸­æ–­ã€‚</p><p>å¦‚æœæäº¤åˆ°çº¿ç¨‹æ± çš„ä»»åŠ¡ä¸å…è®¸å–æ¶ˆï¼Œé‚£å°±ä¸èƒ½ä½¿ç”¨shutdownNow()æ–¹æ³•ç»ˆæ­¢çº¿ç¨‹æ± ã€‚ä¸è¿‡ï¼Œå¦‚æœæäº¤åˆ°çº¿ç¨‹æ± çš„ä»»åŠ¡å…è®¸åç»­ä»¥è¡¥å¿çš„æ–¹å¼é‡æ–°æ‰§è¡Œï¼Œä¹Ÿæ˜¯å¯ä»¥ä½¿ç”¨shutdownNow()æ–¹æ³•ç»ˆæ­¢çº¿ç¨‹æ± çš„ã€‚<a href=\"time://mall?url=https%3A%2F%2Fh5.youzan.com%2Fv2%2Fgoods%2F2758xqdzr6uuw\">ã€ŠJavaå¹¶å‘ç¼–ç¨‹å®æˆ˜ã€‹</a>è¿™æœ¬ä¹¦ç¬¬7ç« ã€Šå–æ¶ˆä¸å…³é—­ã€‹çš„â€œshutdownNowçš„å±€é™æ€§â€ä¸€èŠ‚ä¸­ï¼Œæåˆ°ä¸€ç§å°†å·²æäº¤ä½†å°šæœªå¼€å§‹æ‰§è¡Œçš„ä»»åŠ¡ä»¥åŠå·²ç»å–æ¶ˆçš„æ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡ä¿å­˜èµ·æ¥ï¼Œä»¥ä¾¿åç»­é‡æ–°æ‰§è¡Œçš„æ–¹æ¡ˆï¼Œä½ å¯ä»¥å‚è€ƒä¸€ä¸‹ï¼Œæ–¹æ¡ˆå¾ˆç®€å•ï¼Œè¿™é‡Œå°±ä¸è¯¦ç»†ä»‹ç»äº†ã€‚</p><p>å…¶å®åˆ†æå®Œshutdown()å’ŒshutdownNow()æ–¹æ³•ä½ ä¼šå‘ç°ï¼Œå®ƒä»¬å®è´¨ä¸Šä½¿ç”¨çš„ä¹Ÿæ˜¯ä¸¤é˜¶æ®µç»ˆæ­¢æ¨¡å¼ï¼Œåªæ˜¯ç»ˆæ­¢æŒ‡ä»¤çš„èŒƒå›´ä¸åŒè€Œå·²ï¼Œå‰è€…åªå½±å“é˜»å¡é˜Ÿåˆ—æ¥æ”¶ä»»åŠ¡ï¼Œåè€…èŒƒå›´æ‰©å¤§åˆ°çº¿ç¨‹æ± ä¸­æ‰€æœ‰çš„ä»»åŠ¡ã€‚</p><h2>æ€»ç»“</h2><p>ä¸¤é˜¶æ®µç»ˆæ­¢æ¨¡å¼æ˜¯ä¸€ç§åº”ç”¨å¾ˆå¹¿æ³›çš„å¹¶å‘è®¾è®¡æ¨¡å¼ï¼Œåœ¨Javaè¯­è¨€ä¸­ä½¿ç”¨ä¸¤é˜¶æ®µç»ˆæ­¢æ¨¡å¼æ¥ä¼˜é›…åœ°ç»ˆæ­¢çº¿ç¨‹ï¼Œéœ€è¦æ³¨æ„ä¸¤ä¸ªå…³é”®ç‚¹ï¼šä¸€ä¸ªæ˜¯ä»…æ£€æŸ¥ç»ˆæ­¢æ ‡å¿—ä½æ˜¯ä¸å¤Ÿçš„ï¼Œå› ä¸ºçº¿ç¨‹çš„çŠ¶æ€å¯èƒ½å¤„äºä¼‘çœ æ€ï¼›å¦ä¸€ä¸ªæ˜¯ä»…æ£€æŸ¥çº¿ç¨‹çš„ä¸­æ–­çŠ¶æ€ä¹Ÿæ˜¯ä¸å¤Ÿçš„ï¼Œå› ä¸ºæˆ‘ä»¬ä¾èµ–çš„ç¬¬ä¸‰æ–¹ç±»åº“å¾ˆå¯èƒ½æ²¡æœ‰æ­£ç¡®å¤„ç†ä¸­æ–­å¼‚å¸¸ã€‚</p><p>å½“ä½ ä½¿ç”¨Javaçš„çº¿ç¨‹æ± æ¥ç®¡ç†çº¿ç¨‹çš„æ—¶å€™ï¼Œéœ€è¦ä¾èµ–çº¿ç¨‹æ± æä¾›çš„shutdown()å’ŒshutdownNow()æ–¹æ³•æ¥ç»ˆæ­¢çº¿ç¨‹æ± ã€‚ä¸è¿‡åœ¨ä½¿ç”¨æ—¶éœ€è¦æ³¨æ„å®ƒä»¬çš„åº”ç”¨åœºæ™¯ï¼Œå°¤å…¶æ˜¯åœ¨ä½¿ç”¨shutdownNow()çš„æ—¶å€™ï¼Œä¸€å®šè¦è°¨æ…ã€‚</p><h2>è¯¾åæ€è€ƒ</h2><p>æœ¬æ–‡çš„ç¤ºä¾‹ä»£ç ä¸­ï¼Œçº¿ç¨‹ç»ˆæ­¢æ ‡å¿—ä½isTerminatedè¢«å£°æ˜ä¸ºvolatileï¼Œä½ è§‰å¾—æ˜¯å¦æœ‰å¿…è¦å‘¢ï¼Ÿ</p><pre><code>class Proxy {\n  //çº¿ç¨‹ç»ˆæ­¢æ ‡å¿—ä½\n  volatile boolean terminated = false;\n  ......\n}\n</code></pre><p>æ¬¢è¿åœ¨ç•™è¨€åŒºä¸æˆ‘åˆ†äº«ä½ çš„æƒ³æ³•ï¼Œä¹Ÿæ¬¢è¿ä½ åœ¨ç•™è¨€åŒºè®°å½•ä½ çš„æ€è€ƒè¿‡ç¨‹ã€‚æ„Ÿè°¢é˜…è¯»ï¼Œå¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©çš„è¯ï¼Œä¹Ÿæ¬¢è¿æŠŠå®ƒåˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ã€‚</p>","neighbors":{"left":{"article_title":"34 | Worker Threadæ¨¡å¼ï¼šå¦‚ä½•é¿å…é‡å¤åˆ›å»ºçº¿ç¨‹ï¼Ÿ","id":95525},"right":{"article_title":"36 | ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å¼ï¼šç”¨æµæ°´çº¿æ€æƒ³æé«˜æ•ˆç‡","id":96168}},"comments":[{"had_liked":false,"id":96158,"user_name":"ä½‘å„¿","can_delete":false,"product_type":"c1","uid":1226196,"ip_address":"","ucode":"0629888E7A5E16","user_header":"https://static001.geekbang.org/account/avatar/00/12/b5/d4/3bd5b77b.jpg","comment_is_top":false,"comment_ctime":1558346219,"is_pvip":false,"replies":[{"id":"34431","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1558357938,"ip_address":"","comment_id":96158,"utype":1}],"discussion_count":4,"race_medal":0,"score":"254961416683","product_id":100023901,"comment_content":"stopå’Œstartæ–¹æ³•å¯¹äºterminatedè®¿é—®ç”±äºsynå…³é”®å­—ï¼Œçº¿ç¨‹å®‰å…¨ï¼Œä½†æ˜¯startä¸­æ–°èµ·äº†ä¸€ä¸ªçº¿ç¨‹rptthreadï¼Œå¯¼è‡´stopæ–¹æ³•ä¸­å¯¹äºterminatedå­˜åœ¨å¯è§æ€§é—®é¢˜ï¼Œå› æ­¤éœ€è¦volatieï¼ŒåŸå­æ€§é—®é¢˜å¯¹è¿™ä¸ªä»£ç æ®µæ²¡æœ‰å½±å“ï¼Œæ‰€ä»¥åŸå­æ€§é—®é¢˜æ— éœ€å…³æ³¨ã€‚","like_count":60,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":450745,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558357938,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1655940,"avatar":"https://static001.geekbang.org/account/avatar/00/19/44/84/4da14994.jpg","nickname":"å‘†ç“œ","note":"","ucode":"C98C7B224D0640","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":343653,"discussion_content":"åº”è¯¥æ˜¯:stop()ä¿®æ”¹terminatedå,rptThreadå¯¹terminatedå€¼çš„å¯è§æ€§å­˜åœ¨é—®é¢˜!","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1611123938,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1008933,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/65/25/c6de04bc.jpg","nickname":"æ–œæœˆæµ®äº‘","note":"","ucode":"25CECBB175DA02","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301159,"discussion_content":"æ²¡æœ‰å¯è§æ€§é—®é¢˜å§ã€‚ä¿®æ”¹åå°±è°ƒç”¨äº†interrupt(), æ ¹æ®ä¼ é€’åŸåˆ™ï¼Œterminatedä¸€ç›´æ˜¯å¯è§çš„ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1598429368,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2849095,"avatar":"","nickname":"äº¬åŠ›","note":"","ucode":"2E11C03FC757E2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1008933,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/65/25/c6de04bc.jpg","nickname":"æ–œæœˆæµ®äº‘","note":"","ucode":"25CECBB175DA02","race_medal":1,"user_type":1,"is_pvip":false},"discussion":{"id":584627,"discussion_content":"æ–°çº¿ç¨‹rptThreadå’Œthisä¸»çº¿ç¨‹å¯èƒ½ä¸åœ¨åŒä¸€ä¸ªcpuæ‰§è¡Œï¼Œthisä¸­çš„terminatedå’ŒrptThreadä¸­çš„terminatedå¯èƒ½ä¸æ˜¯åŒä¸€å—å†…å­˜ï¼Œå› æ­¤éœ€è¦volatileå¼ºåˆ¶flushåˆ°å„ä¸ªcpuçš„å†…å­˜é‡Œã€‚æˆ‘çš„ç¬¬ä¸€æ„Ÿè§‰ä¹Ÿè§‰å¾—ä¸éœ€è¦ï¼Œåæ¥æƒ³åˆ°volatileçš„åŸç†æ‰æƒ³èµ·æ¥åŒä¸€ä¸ªå­—æ®µå¯èƒ½ä¸æ˜¯åŒä¸€å—å†…å­˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660981277,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":301159,"ip_address":"ä¸Šæµ·"},"score":584627,"extra":""}]}]},{"had_liked":false,"id":95671,"user_name":"echoï¼¿é™ˆ","can_delete":false,"product_type":"c1","uid":1080794,"ip_address":"","ucode":"EFAEADA8A05906","user_header":"https://static001.geekbang.org/account/avatar/00/10/7d/da/780f149e.jpg","comment_is_top":false,"comment_ctime":1558139842,"is_pvip":false,"replies":[{"id":"34256","content":"æ˜¯çš„ï¼Œçº¿ç¨‹ä¸è°ƒç”¨wait,sleepç­‰æ–¹æ³•ï¼Œæ˜¯æ— æ³•å“åº”ä¸­æ–­çš„ï¼Œè¿™ä¸ªæ—¶å€™åŸºäºinterruptçš„å¯è§æ€§å°±ä¸æˆç«‹äº†ï¼Œæ‰€ä»¥å·¥ç¨‹ä¸Šè¿™ç±»å˜é‡éƒ½éœ€è¦åŠ volatile","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1558168955,"ip_address":"","comment_id":95671,"utype":1}],"discussion_count":12,"race_medal":0,"score":"156176962498","product_id":100023901,"comment_content":"æˆ‘è§‰å¾—ï¼Œåœ¨æœ¬ä¾‹å­ä¸­ã€‚stopä¸­ï¼Œè®¾ç½®ç»ˆæ­¢æ ‡è¯†ä½å¯¹interuptæ˜¯å¯è§çš„ã€‚è€Œinterruptå¯¹è¢«ä¸­æ–­çº¿ç¨‹æ£€æµ‹åˆ°ä¸­æ–­äº‹ä»¶æ˜¯å¯è§çš„â€¦â€¦æ ¹æ®ä¼ é€’æ€§åŸåˆ™â€¦â€¦æˆ‘è§‰å¾—æœ¬ä¾‹å­ä¸éœ€è¦volatileå…³é”®å­—ã€‚ä½†å¹³æ—¶å¼€å‘ä¸­ï¼Œä¸€èˆ¬ä¼šåŠ ä¸Šï¼Œä¸»è¦æ˜¯å› ä¸ºæ€•åç»­å¼€å‘ä¸æ³¨æ„è¿™äº›äº‹æƒ…å¯¼è‡´ä¿®æ”¹ç ´åäº†è§„åˆ™ï¼Œå¼•èµ·å¯è§æ€§é—®é¢˜äº§ç”Ÿbugï¼Œä¿é™©èµ·è§ä¼šåŠ ä¸Švolatile","like_count":37,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":450551,"discussion_content":"æ˜¯çš„ï¼Œçº¿ç¨‹ä¸è°ƒç”¨wait,sleepç­‰æ–¹æ³•ï¼Œæ˜¯æ— æ³•å“åº”ä¸­æ–­çš„ï¼Œè¿™ä¸ªæ—¶å€™åŸºäºinterruptçš„å¯è§æ€§å°±ä¸æˆç«‹äº†ï¼Œæ‰€ä»¥å·¥ç¨‹ä¸Šè¿™ç±»å˜é‡éƒ½éœ€è¦åŠ volatile","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558168955,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1855137,"avatar":"","nickname":"Geek_e6f358","note":"","ucode":"C21E94A90258A2","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":388343,"discussion_content":"stopæ–¹æ³•ï¼Œå’Œstartæ–¹æ³•æ˜¯ä¸¤æ¡çº¿ç¨‹è·‘ï¼Œæ‰€ä»¥ä¼šæœ‰å¯è§æ€§é—®é¢˜","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1628725030,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1231302,"avatar":"https://static001.geekbang.org/account/avatar/00/12/c9/c6/16136ab3.jpg","nickname":"é¾™è¡Œå¤©ä¸‹","note":"","ucode":"90BEED7A164ADE","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":565727,"discussion_content":"è¿™ä¸ªhappens-beforeä¼ é€’æ€§æœ‰é—®é¢˜ï¼Œhappens-beforeåªä¿è¯äº†rptThread.interupt()å…ˆè¡Œå‘ç”Ÿäºcatch(INterruptedException e),æ ¹æ®ä¸²è¡Œä¸€è‡´æ€§ï¼Œterminated=trueå®Œå…¨æœ‰å¯èƒ½è¢«é‡æ’äºrptThread.interupt()ä¹‹å","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650529312,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2697700,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/LFJZ4x47rvShGhsePLIxc8EzdlBxAmVAIjJ2FQZ4NEpo8E4JCZQEOb2NIfOuiaQLL6Otkt7W3Rmu6Tv3AkgYdRA/132","nickname":"é”®ç›˜ä¸Šçš„é­”æœ¯","note":"","ucode":"A731D721FB8D3A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1231302,"avatar":"https://static001.geekbang.org/account/avatar/00/12/c9/c6/16136ab3.jpg","nickname":"é¾™è¡Œå¤©ä¸‹","note":"","ucode":"90BEED7A164ADE","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":585241,"discussion_content":"è¿™ä¸ªæ²¡äº‹ï¼Œ catchå¥½åï¼Œ ä¸‹ä¸€ä¸ªå¾ªç¯å°±å¯è§äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661416135,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":565727,"ip_address":"ä¸Šæµ·"},"score":585241,"extra":""}]},{"author":{"id":1450462,"avatar":"https://static001.geekbang.org/account/avatar/00/16/21/de/c935d3bd.jpg","nickname":"æ–‡åŸ¹","note":"","ucode":"D8BC9BD6F2B261","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":386062,"discussion_content":"é«˜æ‰‹ï¼Œé©¬ä¸Šèƒ½æƒ³åˆ°HBï¼Œç†è§£çš„å¾ˆé€å½»å•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627390499,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1241576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/f1/e8/d2e88567.jpg","nickname":"ssrsdzry","note":"","ucode":"89BCFA6A1997E5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":142345,"discussion_content":"ä¸‹é¢ä¹Ÿæœ‰åŒå­¦æåˆ°started å˜é‡çš„å¯è§æ€§é—®é¢˜ï¼Œæ„Ÿè§‰æ˜¯å’Œä¼ é€’æ€§æœ‰å…³ï¼Œå› ä¸ºçº¿ç¨‹ç»ˆæ­¢äº†startedå˜é‡çš„å€¼è‚¯å®šèƒ½è¢«å…¶å®ƒçº¿ç¨‹çœ‹è§ã€‚è€Œinterruptedå˜é‡ç”±äºå­çº¿ç¨‹æŒç»­è¿è¡Œä¸­æ— æ³•ä¿è¯å¯è§æ€§ã€‚ä¸çŸ¥é“ç†è§£å¯¹ä¸å¯¹ï¼Œå¸Œæœ›è€å¸ˆç­”ç–‘æ—¶è§£ç­”ä¸€ä¸‹ï¼Œè°¢è°¢ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579450747,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1031327,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/bc/9f/a19fe018.jpg","nickname":"é£ç¬‘å¢™","note":"","ucode":"6E584A01644218","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":73387,"discussion_content":"è¿™ä¸æ˜¯ä¼ é€’æ€§å§ï¼Ÿå‡è®¾ç±»æœ‰ä¸¤ä¸ªintå˜é‡ï¼Œå…¶ä¸­ä¸€ä¸ªå£°æ˜ä¸ºvolatileï¼Œé‚£å¦ä¸€ä¸ªæ˜¯å¦å¤šçº¿ç¨‹å¯è§å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575558677,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1181650,"avatar":"https://static001.geekbang.org/account/avatar/00/12/07/d2/0d7ee298.jpg","nickname":"æƒ˜ é—»","note":"","ucode":"C5909F034BF072","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1031327,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/bc/9f/a19fe018.jpg","nickname":"é£ç¬‘å¢™","note":"","ucode":"6E584A01644218","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":299933,"discussion_content":"å›å»çœ‹çœ‹happenbeforeåŸåˆ™å°±æ˜ç™½äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597882920,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":73387,"ip_address":""},"score":299933,"extra":""}]},{"author":{"id":1302670,"avatar":"https://static001.geekbang.org/account/avatar/00/13/e0/8e/2376cd87.jpg","nickname":"è“å¤©ç™½äº‘çœ‹å¤§æµ·","note":"","ucode":"02EF13FE37174B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":239,"discussion_content":"çº¿ç¨‹ä¸è°ƒç”¨wait,sleepç­‰æ–¹æ³•ï¼Œæ˜¯æ— æ³•å“åº”ä¸­æ–­çš„###å¯¹è€å¸ˆè¿™æ®µè¯å¾ˆç–‘æƒ‘ï¼Œä¸ºä»€ä¹ˆï¼Œè¿™é‡Œçš„å“åº”ä¸­æ–­æŒ‡çš„æ˜¯å•¥ï¼Ÿéš¾é“ä¸æ˜¯isInterrupted=trueï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561346423,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1335293,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKR3ibELhjgVicCNShZCBwvaDxibnzibggG4wUzVkS2mkDxUBZyIs87nDEdJ7PiahJBVoZcuhQ84RxAziag/132","nickname":"å‘¨æ²»æ…§","note":"","ucode":"7D56C4E66BEE17","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1302670,"avatar":"https://static001.geekbang.org/account/avatar/00/13/e0/8e/2376cd87.jpg","nickname":"è“å¤©ç™½äº‘çœ‹å¤§æµ·","note":"","ucode":"02EF13FE37174B","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":167991,"discussion_content":"å½“çº¿ç¨‹å¤„äºç¡çœ çŠ¶æ€æ‰èƒ½å»å“åº”ä¸­æ–­,ä¹Ÿå°±æ˜¯ä»ç¡çœ çŠ¶æ€å˜ä¸ºäº†RunnableçŠ¶æ€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581545821,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":239,"ip_address":""},"score":167991,"extra":""},{"author":{"id":1937062,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/8e/a6/c3286b61.jpg","nickname":"Javaå’å¢™å·¥ç¨‹å¸ˆ","note":"","ucode":"E76AE44A9C76AE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1302670,"avatar":"https://static001.geekbang.org/account/avatar/00/13/e0/8e/2376cd87.jpg","nickname":"è“å¤©ç™½äº‘çœ‹å¤§æµ·","note":"","ucode":"02EF13FE37174B","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301360,"discussion_content":"è®¤ä¸ºJavaè®¾ç½®çº¿ç¨‹ä¸­æ–­å°±æ˜¯è¡¨ç¤ºçº¿ç¨‹åœæ­¢äº†ï¼Œä¸å¾€å‰æ‰§è¡Œäº†ï¼Œ Thread.currentThread().interrupt()   å…¶å®ä¸æ˜¯è¿™æ ·çš„ï¼Œçº¿ç¨‹ä¸­æ–­åªæ˜¯ä¸€ä¸ªçŠ¶æ€è€Œå·²ï¼Œtrueè¡¨ç¤ºå·²ä¸­æ–­ï¼Œfalseè¡¨ç¤ºæœªä¸­æ–­ã€‚ è®¾ç½®çº¿ç¨‹ä¸­æ–­ä¸å½±å“çº¿ç¨‹çš„ç»§ç»­æ‰§è¡Œï¼Œä½†æ˜¯çº¿ç¨‹è®¾ç½®ä¸­æ–­åï¼Œçº¿ç¨‹å†…è°ƒç”¨äº†waitã€jionã€sleepæ–¹æ³•ä¸­çš„ä¸€ç§ï¼Œ ç«‹é©¬æŠ›å‡ºä¸€ä¸ª InterruptedExceptionï¼Œä¸”ä¸­æ–­æ ‡å¿—è¢«æ¸…é™¤ï¼Œé‡æ–°è®¾ç½®ä¸ºfalseã€‚","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1598501986,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":239,"ip_address":""},"score":301360,"extra":""},{"author":{"id":2697700,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/LFJZ4x47rvShGhsePLIxc8EzdlBxAmVAIjJ2FQZ4NEpo8E4JCZQEOb2NIfOuiaQLL6Otkt7W3Rmu6Tv3AkgYdRA/132","nickname":"é”®ç›˜ä¸Šçš„é­”æœ¯","note":"","ucode":"A731D721FB8D3A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1937062,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/8e/a6/c3286b61.jpg","nickname":"Javaå’å¢™å·¥ç¨‹å¸ˆ","note":"","ucode":"E76AE44A9C76AE","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585227,"discussion_content":"æœ¬æ¥ä»¥ä¸ºæ˜¯å…ˆwait,join,sleepç„¶åinterruptä¼šè¿›å…¥å¼‚å¸¸å¤„ç†å—ã€‚ å…ˆinterruptç„¶ååœ¨wait,join,sleepä¹Ÿä¼šè¿›å…¥å¼‚å¸¸å¤„ç†å—æ˜¯å§ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661409301,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":301360,"ip_address":"ä¸Šæµ·"},"score":585227,"extra":""}]}]},{"had_liked":false,"id":95687,"user_name":"å­™å¿—å¼º","can_delete":false,"product_type":"c1","uid":1325997,"ip_address":"","ucode":"9C070F1E4EC6FF","user_header":"https://static001.geekbang.org/account/avatar/00/14/3b/ad/31193b83.jpg","comment_is_top":false,"comment_ctime":1558143426,"is_pvip":true,"replies":[{"id":"34254","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1558168251,"ip_address":"","comment_id":95687,"utype":1}],"discussion_count":3,"race_medal":0,"score":"108932325826","product_id":100023901,"comment_content":"æœ‰å¿…è¦ï¼Œå˜é‡è¢«å¤šä¸ªçº¿ç¨‹è®¿é—®ï¼Œéœ€è¦ä¿è¯å¯è§æ€§","like_count":26,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":450560,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558168251,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2436755,"avatar":"https://static001.geekbang.org/account/avatar/00/25/2e/93/81e3e4ca.jpg","nickname":"à¸…Slekà¸…","note":"","ucode":"B732C672B3D301","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":550306,"discussion_content":"å…¶å®å°±è¿™ä¹ˆç®€å•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644479696,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1041534,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoEb4oys1R20cc9FfpZsVEt04Dias86A30LUNWM8lPyBahKaMRISNB854hhXRjoohCIIwX1sO86zfA/132","nickname":"0909","note":"","ucode":"56BAF3C6FBF200","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":119115,"discussion_content":"æ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578216378,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":95827,"user_name":"é‡è§é˜³å…‰","can_delete":false,"product_type":"c1","uid":1203576,"ip_address":"","ucode":"378E5D37B3CD0E","user_header":"https://static001.geekbang.org/account/avatar/00/12/5d/78/f011d586.jpg","comment_is_top":false,"comment_ctime":1558193159,"is_pvip":false,"replies":[{"id":"34356","content":"é—®é¢˜æ˜¯startæ–¹æ³•é‡Œåˆå¯åŠ¨äº†ä¸€ä¸ªæ–°çš„çº¿ç¨‹ï¼Œsynchronizedç®¡ä¸åˆ°è¿™ä¸ªæ–°çš„çº¿ç¨‹","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1558314211,"ip_address":"","comment_id":95827,"utype":1}],"discussion_count":3,"race_medal":0,"score":"104637408263","product_id":100023901,"comment_content":"æŒ‰é“ç†è€Œè¨€ï¼Œsynchronizedä¿è¯åŸå­æ€§çš„åŒæ—¶ï¼Œä¹Ÿèƒ½é—´æ¥çš„ä¿è¯å¯è§æ€§å•Šã€‚æ„Ÿè§‰å¯ä»¥ä¸åŠ  volatileå…³é”®å­—","like_count":25,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":450609,"discussion_content":"é—®é¢˜æ˜¯startæ–¹æ³•é‡Œåˆå¯åŠ¨äº†ä¸€ä¸ªæ–°çš„çº¿ç¨‹ï¼Œsynchronizedç®¡ä¸åˆ°è¿™ä¸ªæ–°çš„çº¿ç¨‹","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1558314211,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2697700,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/LFJZ4x47rvShGhsePLIxc8EzdlBxAmVAIjJ2FQZ4NEpo8E4JCZQEOb2NIfOuiaQLL6Otkt7W3Rmu6Tv3AkgYdRA/132","nickname":"é”®ç›˜ä¸Šçš„é­”æœ¯","note":"","ucode":"A731D721FB8D3A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":585225,"discussion_content":"é‚£ä¹ˆstartedå˜é‡ä¹Ÿæ˜¯ä¸»çº¿ç¨‹å’Œå­çº¿ç¨‹éƒ½è®¿é—®äº†ï¼Œæ€ä¹ˆæ²¡åŠ volatileå‘¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661409076,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":450609,"ip_address":"ä¸Šæµ·"},"score":585225,"extra":""}]},{"author":{"id":1231829,"avatar":"https://static001.geekbang.org/account/avatar/00/12/cb/d5/fab32cf7.jpg","nickname":"å–è—¥éƒ","note":"","ucode":"0539EF1D335918","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":576120,"discussion_content":"å°±ä¸€æ¡ï¼šå˜é‡è¢«å¤šä¸ªçº¿ç¨‹è®¿é—®äº† æ‰€ä»¥è¦ä¿è¯å¯è§æ€§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655283429,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":96191,"user_name":"WL","can_delete":false,"product_type":"c1","uid":1173771,"ip_address":"","ucode":"6277DCD776B87E","user_header":"https://static001.geekbang.org/account/avatar/00/11/e9/0b/1171ac71.jpg","comment_is_top":false,"comment_ctime":1558354862,"is_pvip":false,"replies":[{"id":"34430","content":"æ˜¯çš„","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1558357883,"ip_address":"","comment_id":96191,"utype":1}],"discussion_count":1,"race_medal":0,"score":"65982864302","product_id":100023901,"comment_content":"è¯·é—®ä¸€ä¸‹è€å¸ˆ&quot;JVM çš„å¼‚å¸¸å¤„ç†ä¼šæ¸…é™¤çº¿ç¨‹çš„ä¸­æ–­çŠ¶æ€&quot;æŒ‡çš„æ˜¯ä»€ä¹ˆæ„æ€, æ˜¯æŒ‡æŠŠçº¿ç¨‹çš„ä¸ºtrueçš„ä¸­æ–­çŠ¶æ€æ”¹ä¸ºfalseå—, JVMæ˜¯åœ¨catchåˆ°Interruptå¼‚å¸¸çš„æ—¶å€™é‡ç½®çº¿ç¨‹ä¸­æ–­çŠ¶æ€çš„å—? ","like_count":16,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":450760,"discussion_content":"æ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558357883,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":140289,"user_name":"è¿œä¸œé€šä¿¡-åº”ç”¨è½¯ä»¶","can_delete":false,"product_type":"c1","uid":1351651,"ip_address":"","ucode":"3A1796000AC089","user_header":"","comment_is_top":false,"comment_ctime":1570871351,"is_pvip":false,"replies":[{"id":"54229","content":"æ˜¯çš„","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1570881714,"ip_address":"","comment_id":140289,"utype":1}],"discussion_count":2,"race_medal":0,"score":"48815511607","product_id":100023901,"comment_content":"åœ¨æœ¬ç« èŠ‚åé¢ä¸€ä¸ªå®ä¾‹ä»£ç ä¸­whileå¾ªç¯æ²¡æœ‰ä½¿ç”¨çº¿ç¨‹çš„ä¸­æ–­æ ‡å¿—ä½åšåˆ¤æ–­ï¼Œä½†æ˜¯stopé‡Œé¢ä»ç„¶å»è°ƒç”¨rptThread.interrupt()æœ‰å¿…è¦å—ï¼Ÿåªæ˜¯ä¸ºäº†å°†é‡‡é›†çº¿ç¨‹ä»sleepçŠ¶æ€å”¤é†’å—ï¼Ÿ","like_count":11,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470331,"discussion_content":"æ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570881714,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2861352,"avatar":"","nickname":"é˜¿ç‹¸å¼Ÿå¼Ÿçš„åŒ…å­åº—","note":"","ucode":"0CCF598B029075","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":556101,"discussion_content":"å¦‚æœæœ‰å¤šä¸ªsleepéš¾é“è¦å¤šæ¬¡interrupt","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647217857,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":95773,"user_name":"ZOUå¿—ä¼Ÿ","can_delete":false,"product_type":"c1","uid":1029179,"ip_address":"","ucode":"439779871CC992","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b4/3b/a1f7e3a4.jpg","comment_is_top":false,"comment_ctime":1558170866,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"48802811122","product_id":100023901,"comment_content":"shutdown()è°ƒç”¨åï¼Œè¿˜è¦å†è°ƒç”¨awaitTerminationæ–¹æ³•ç­‰å¾…ä¸€ç‚¹æ—¶é—´ï¼Œçº¿ç¨‹æ± é‡Œçš„çº¿ç¨‹æ‰ä¼šç»ˆæ­¢ã€‚","like_count":11},{"had_liked":false,"id":170734,"user_name":"jason","can_delete":false,"product_type":"c1","uid":1167872,"ip_address":"","ucode":"3329F08BAF307E","user_header":"https://static001.geekbang.org/account/avatar/00/11/d2/00/9a247b1e.jpg","comment_is_top":false,"comment_ctime":1578696202,"is_pvip":false,"replies":[{"id":"66613","content":"åŠ ä¸Šæ›´ä¿é™©ï¼Œä¸åŠ æ•°æ®ä¹Ÿä¸ä¼šé”™ï¼Œåªæ˜¯å¯èƒ½éœ€è¦å¤šç­‰ä¸€ä¼š","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1579014022,"ip_address":"","comment_id":170734,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23053532682","product_id":100023901,"comment_content":"æŒ‰è¿™æ ·è¯´ï¼Œæ–°çº¿ç¨‹é‡Œä¼šä¿®æ”¹startå˜é‡çš„å€¼ï¼Œä¸ºäº†ä¿è¯startçš„æœ€æ–°å€¼èƒ½è¢«start()æ–¹æ³•çœ‹è§ï¼Œæ˜¯ä¸æ˜¯ä¹Ÿè¦å¯¹startå˜é‡åŠ volatileä¿®é¥°ï¼Ÿ","like_count":6,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481088,"discussion_content":"åŠ ä¸Šæ›´ä¿é™©ï¼Œä¸åŠ æ•°æ®ä¹Ÿä¸ä¼šé”™ï¼Œåªæ˜¯å¯èƒ½éœ€è¦å¤šç­‰ä¸€ä¼š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579014022,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":114163,"user_name":"å…¶","can_delete":false,"product_type":"c1","uid":1486367,"ip_address":"","ucode":"93A2EBA79E3066","user_header":"https://static001.geekbang.org/account/avatar/00/16/ae/1f/43b13ef0.jpg","comment_is_top":false,"comment_ctime":1563244531,"is_pvip":false,"replies":[{"id":"41674","content":"çº¿ç¨‹ä¸èƒ½è¢«ä¸­æ–­ï¼Œä½†æ˜¯å¾ˆå¤šç³»ç»Ÿå‡½æ•°å¦‚sleepæ˜¯å“åº”ä¸­æ–­çš„ã€‚æç«¯åœ°è®²ï¼Œçº¯CPUè®¡ç®—ä¸€å®šä¸ä¼šè¢«ä¸­æ–­","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1563262893,"ip_address":"","comment_id":114163,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23038081011","product_id":100023901,"comment_content":"è€å¸ˆï¼Œæƒ³é—®ä¸€ä¸ªé—®é¢˜å¦‚æœinterrupt()æ–¹æ³•åªæ˜¯ç»™çº¿ç¨‹æ‰“ä¸€ä¸ªä¸­æ–­çš„æ ‡ç­¾ï¼Œé‚£ä¹ˆå¦‚æœæˆ‘çº¿ç¨‹æœ¬èº«æ²¡æœ‰æ˜¾ç¤ºçš„å»åšè¿™ä¸ªæ ‡çš„åˆ¤æ–­ï¼Œçº¿ç¨‹è¿˜èƒ½è¢«ä¸­æ–­ä¹ˆï¼Œå½“ç„¶çº¿ç¨‹æ˜¯runnableçš„ï¼Œå¦‚æœèƒ½ä¸­æ–­åˆæ˜¯è°å»è¯†åˆ«çš„å‘¢ï¼Ÿ","like_count":5,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458534,"discussion_content":"çº¿ç¨‹ä¸èƒ½è¢«ä¸­æ–­ï¼Œä½†æ˜¯å¾ˆå¤šç³»ç»Ÿå‡½æ•°å¦‚sleepæ˜¯å“åº”ä¸­æ–­çš„ã€‚æç«¯åœ°è®²ï¼Œçº¯CPUè®¡ç®—ä¸€å®šä¸ä¼šè¢«ä¸­æ–­","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563262893,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":96169,"user_name":"ä½‘å„¿","can_delete":false,"product_type":"c1","uid":1226196,"ip_address":"","ucode":"0629888E7A5E16","user_header":"https://static001.geekbang.org/account/avatar/00/12/b5/d4/3bd5b77b.jpg","comment_is_top":false,"comment_ctime":1558348091,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"23033184571","product_id":100023901,"comment_content":"ä¸¤é˜¶æ®µç»ˆæ­¢æ¨¡å¼ï¼šå‘é€ç»ˆæ­¢æŒ‡ä»¤+å“åº”ç»ˆæ­¢æŒ‡ä»¤ã€‚<br>ç»ˆæ­¢æŒ‡ä»¤é€šå¸¸å¯ä»¥å®šä¹‰ä¸€ä¸ªç»ˆæ­¢æ ‡è¯†å˜é‡(æ³¨æ„å¹¶å‘é—®é¢˜,éœ€è¦volatieä¿è¯å¯è§æ€§)ã€‚<br>å¦‚æœçº¿ç¨‹ä¸­è°ƒç”¨äº†å¯ä¸­æ–­æ–¹æ³•(waitç­‰)ï¼Œåœ¨å‘é€ç»ˆæ­¢æŒ‡ä»¤çš„åŒæ—¶éœ€è¦è°ƒç”¨Thread.interrupt()ã€‚<br>ä¸å»ºè®®ä½¿ç”¨çº¿ç¨‹è‡ªèº«çš„ä¸­æ–­æ ‡è¯†ä½œä¸ºç»ˆæ­¢æŒ‡ä»¤ï¼Œå› ä¸ºé¡¹ç›®ä¸­ç¬¬ä¸‰æ–¹çš„è°ƒç”¨æ— æ³•ä¿è¯è¯¥æ ‡å¿—ä½ã€‚","like_count":5},{"had_liked":false,"id":214143,"user_name":"é’é“œ5 å‘¨ç¾¤åŠ›","can_delete":false,"product_type":"c1","uid":1111965,"ip_address":"","ucode":"EA80B442EC8A68","user_header":"https://static001.geekbang.org/account/avatar/00/10/f7/9d/c7295d17.jpg","comment_is_top":false,"comment_ctime":1588666522,"is_pvip":false,"replies":[{"id":"80123","content":"åŸºæœ¬ä¸Šå¸¦æ± å­—çš„ï¼Œç”Ÿå‘½å‘¨æœŸéƒ½å’Œåº”ç”¨åŒé¾„","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1589286818,"ip_address":"","comment_id":214143,"utype":1}],"discussion_count":2,"race_medal":0,"score":"18768535706","product_id":100023901,"comment_content":"ä»€ä¹ˆæƒ…å†µéœ€è¦æ‰‹åŠ¨shutdownçº¿ç¨‹æ± å‘¢ï¼Œæˆ‘ç†è§£åªè¦çº¿ç¨‹æ± ä¸å†è¢«å¼•ç”¨ï¼Œé‡Œé¢çš„çº¿ç¨‹è‡ªå·±å°±è¢«gcå›æ”¶æ‰äº†ï¼Œä¸éœ€è¦æ‰‹åŠ¨è°ƒshutdown?","like_count":5,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":493967,"discussion_content":"åŸºæœ¬ä¸Šå¸¦æ± å­—çš„ï¼Œç”Ÿå‘½å‘¨æœŸéƒ½å’Œåº”ç”¨åŒé¾„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589286818,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1055854,"avatar":"https://static001.geekbang.org/account/avatar/00/10/1c/6e/6c5f5734.jpg","nickname":"ç»ˆç»“è€…999å·","note":"","ucode":"33ADE61580B6DD","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":263312,"discussion_content":"ä¾‹å¦‚ä½¿ç”¨redissonæ¡†æ¶ä¹‹åï¼Œåœ¨å®¹å™¨shutdownä¹‹å‰ã€‚æˆ‘ä»¬å€¾å‘äºå…ˆå…³é—­çº¿ç¨‹æ± å†å…³é—­redisson","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589198403,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":97283,"user_name":"ban","can_delete":false,"product_type":"c1","uid":1034204,"ip_address":"","ucode":"E523CE97E48266","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c7/dc/9408c8c2.jpg","comment_is_top":false,"comment_ctime":1558627769,"is_pvip":false,"replies":[{"id":"35832","content":"startedçš„è¯»å†™éƒ½åœ¨åŒæ­¥æ–¹æ³•é‡Œé¢","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1559304502,"ip_address":"","comment_id":97283,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18738496953","product_id":100023901,"comment_content":"è€å¸ˆï¼Œæ€è€ƒé¢˜å‰çš„æœ€åä¸€ä¸ªç¤ºä¾‹ä»£ç ï¼Œä¸ºä»€ä¹ˆ<br>&#47;&#47; çº¿ç¨‹ç»ˆæ­¢æ ‡å¿—ä½<br>volatile boolean terminated = false;<br>boolean started = false;<br><br>ä¸ºä»€ä¹ˆstartedå¯ä»¥ä¸åŠ volatileï¼Œterminatedå´è¦åŠ å‘¢ï¼Ÿ","like_count":4,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451212,"discussion_content":"startedçš„è¯»å†™éƒ½åœ¨åŒæ­¥æ–¹æ³•é‡Œé¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1559304502,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":95892,"user_name":"æ™“æ°","can_delete":false,"product_type":"c1","uid":1441546,"ip_address":"","ucode":"1174C88EEBF8A6","user_header":"https://static001.geekbang.org/account/avatar/00/15/ff/0a/12faa44e.jpg","comment_is_top":false,"comment_ctime":1558245726,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18738114910","product_id":100023901,"comment_content":"æœ‰å¿…è¦ï¼Œå› ä¸ºstopæ–¹æ³•å¯¹isTerminatedçš„ä¿®æ”¹éœ€è¦è¢«startæ–¹æ³•è¯»å–åˆ°ï¼Œä¿è¯å…±äº«å˜é‡çš„å¯è§æ€§","like_count":4},{"had_liked":false,"id":101775,"user_name":"null","can_delete":false,"product_type":"c1","uid":1024294,"ip_address":"","ucode":"F9039EFED6B55D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaELZPnUAiajaR5C25EDLWeJURggyiaOP5GGPe2qlwpQcm5e3ybib8OsP4tvddFDLVRSNNGL5I3SFPJHsA/132","comment_is_top":false,"comment_ctime":1559967815,"is_pvip":false,"replies":[{"id":"54026","content":"printlnå†…éƒ¨æœ‰é”ï¼Œè€Œä¸”è¿˜æœ‰ioæ“ä½œï¼Œæ‰€ä»¥ä¼šè®©ç»“æœä¸å‡†ç¡®","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1570767380,"ip_address":"","comment_id":101775,"utype":1}],"discussion_count":3,"race_medal":0,"score":"14444869703","product_id":100023901,"comment_content":"```java<br>&#47;&#47; å› ä¸ºç•™è¨€è¶…å­—æ•°ï¼š1. çœç•¥æœªä¿®æ”¹çš„ä»£ç ç‰‡æ®µï¼Œ2. println æ˜¯ System.out.println çš„ç®€å†™<br>class Proxy {<br>&#47;&#47; å˜é‡å£°æ˜ï¼Œï¼ˆç•™è¨€è¶…å­—æ•°ï¼Œæ­¤å¤„æœªåšä¿®æ”¹ï¼Œçœç•¥ï¼‰<br><br>public static void main(String[] args) {<br>  Proxy proxy=new Proxy();<br>  for (int i=0; i&lt;100; i++) {<br>    new Thread(() -&gt; {<br>    proxy.start();<br>    proxy.stop();<br>    }, &quot;å¤–éƒ¨çº¿ç¨‹_&quot;+i)<br>    .start();<br>  }<br>}<br><br>&#47;&#47; å¯åŠ¨é‡‡é›†åŠŸèƒ½<br>synchronized void start() {<br>  &#47;&#47; ä¸å…è®¸åŒæ—¶å¯åŠ¨å¤šä¸ªé‡‡é›†çº¿ç¨‹<br>  String outerName=Thread.currentThread().getName();<br>  println(&quot;[&quot;+outerName+&quot;]çº¿ç¨‹æ˜¯å¦å¯åŠ¨ï¼Ÿ&quot;+started);<br><br>  if (started) {<br>    println(&quot;[&quot;+outerName+&quot;]çº¿ç¨‹ return&quot;);<br>    return;<br>  }<br>  started=true;<br>  terminated=false;<br><br>  rptThread=new Thread(() -&gt; {<br>    while (!terminated) {<br>      &#47;&#47; æ¯éš”ä¸¤ç§’é’Ÿé‡‡é›†ã€å›ä¼ ä¸€æ¬¡æ•°æ®ï¼ˆç•™è¨€è¶…å­—æ•°ï¼Œæ­¤å¤„æœªåšä¿®æ”¹ï¼Œçœç•¥ï¼‰<br>    }<br>    &#47;&#47; æ‰§è¡Œåˆ°æ­¤å¤„è¯´æ˜çº¿ç¨‹é©¬ä¸Šç»ˆæ­¢<br>    started=false;<br>    println(&quot;[&quot;+outerName+&quot;,å†…éƒ¨çº¿ç¨‹ï¼š&quot;+Thread.currentThread().getName()+&quot;] started=false æˆåŠŸæ‰§è¡Œ&quot;);<br>  });<br><br>  rptThread.start();<br>  println(&quot;[&quot;+outerName+&quot;]çº¿ç¨‹æ‰§è¡Œå®Œæ¯•ï¼Œå†…éƒ¨å­çº¿ç¨‹æ­£åœ¨æ‰§è¡Œä¸­...&quot;);<br>}<br><br>&#47;&#47; ç»ˆæ­¢é‡‡é›†åŠŸèƒ½ï¼ˆç•™è¨€è¶…å­—æ•°ï¼Œæ­¤å¤„æœªåšä¿®æ”¹ï¼Œçœç•¥ï¼‰<br>}<br>```<br><br>```<br>æ‰§è¡Œç»“æœï¼š<br>[å¤–éƒ¨çº¿ç¨‹_77]çº¿ç¨‹æ˜¯å¦å¯åŠ¨ï¼Ÿfalse<br>[å¤–éƒ¨çº¿ç¨‹_77]çº¿ç¨‹æ‰§è¡Œå®Œæ¯•ï¼Œå†…éƒ¨å­çº¿ç¨‹æ­£åœ¨æ‰§è¡Œä¸­...<br>[å¤–éƒ¨çº¿ç¨‹_82]çº¿ç¨‹æ˜¯å¦å¯åŠ¨ï¼Ÿtrue<br>[å¤–éƒ¨çº¿ç¨‹_82]çº¿ç¨‹ return<br>[å¤–éƒ¨çº¿ç¨‹_81]çº¿ç¨‹æ˜¯å¦å¯åŠ¨ï¼Ÿfalse<br>[å¤–éƒ¨çº¿ç¨‹_77,å†…éƒ¨çº¿ç¨‹ï¼šThread-72] started=false æˆåŠŸæ‰§è¡Œ<br>[å¤–éƒ¨çº¿ç¨‹_81]çº¿ç¨‹æ‰§è¡Œå®Œæ¯•ï¼Œå†…éƒ¨å­çº¿ç¨‹æ­£åœ¨æ‰§è¡Œä¸­...<br>[å¤–éƒ¨çº¿ç¨‹_81,å†…éƒ¨çº¿ç¨‹ï¼šThread-73] started=false æˆåŠŸæ‰§è¡Œ<br>[å¤–éƒ¨çº¿ç¨‹_84]çº¿ç¨‹æ˜¯å¦å¯åŠ¨ï¼Ÿfalse<br>[å¤–éƒ¨çº¿ç¨‹_84]çº¿ç¨‹æ‰§è¡Œå®Œæ¯•ï¼Œå†…éƒ¨å­çº¿ç¨‹æ­£åœ¨æ‰§è¡Œä¸­...<br>[å¤–éƒ¨çº¿ç¨‹_80]çº¿ç¨‹æ˜¯å¦å¯åŠ¨ï¼Ÿtrue<br>[å¤–éƒ¨çº¿ç¨‹_84,å†…éƒ¨çº¿ç¨‹ï¼šThread-74] started=false æˆåŠŸæ‰§è¡Œ<br>[å¤–éƒ¨çº¿ç¨‹_80]çº¿ç¨‹æ‰§è¡Œå®Œæ¯•ï¼Œå†…éƒ¨å­çº¿ç¨‹æ­£åœ¨æ‰§è¡Œä¸­...<br>[å¤–éƒ¨çº¿ç¨‹_79]çº¿ç¨‹æ˜¯å¦å¯åŠ¨ï¼Ÿtrue<br>[å¤–éƒ¨çº¿ç¨‹_80,å†…éƒ¨çº¿ç¨‹ï¼šThread-75] started=false æˆåŠŸæ‰§è¡Œ<br>```<br><br>è§£é‡Šè¯´æ˜ï¼š<br>1. â€œ[å¤–éƒ¨çº¿ç¨‹_81]çº¿ç¨‹æ˜¯å¦å¯åŠ¨ï¼Ÿfalseâ€ å…ˆäº â€œ[å¤–éƒ¨çº¿ç¨‹_77,å†…éƒ¨çº¿ç¨‹ï¼šThread-72] started=false æˆåŠŸæ‰§è¡Œâ€ï¼š<br>[å¤–éƒ¨çº¿ç¨‹_77,å†…éƒ¨çº¿ç¨‹ï¼šThread-72] æ‰§è¡Œå®Œ started=falseï¼Œè¿˜æ²¡æ‰§è¡Œ System.out è¾“å‡ºè¯­å¥ï¼Œ[å¤–éƒ¨çº¿ç¨‹_81] å°±å·²ç»æ‹¿åˆ° started=false çš„ç»“æœäº†ã€‚<br><br>2. â€œ[å¤–éƒ¨çº¿ç¨‹_80]çº¿ç¨‹æ˜¯å¦å¯åŠ¨ï¼Ÿtrueâ€ ç„¶ååˆ â€œ[å¤–éƒ¨çº¿ç¨‹_80]çº¿ç¨‹æ‰§è¡Œå®Œæ¯•ï¼Œå†…éƒ¨å­çº¿ç¨‹æ­£åœ¨æ‰§è¡Œä¸­...â€ï¼š<br>è¿™æ—¶[å¤–éƒ¨çº¿ç¨‹_80]è®©å‡ºäº† cpuï¼Œç­‰åˆ°æ—¶é—´ç‰‡åå†æ¬¡æ‰§è¡Œæ—¶å¹¶æ²¡æœ‰ returnï¼Œè€Œæ˜¯æˆåŠŸæ‰§è¡Œäº†å†…éƒ¨å­çº¿ç¨‹ã€‚<br><br>ç»“è®ºï¼šstarted åœ¨çº¿ç¨‹ä¹‹é—´å¯ä»¥ä¿è¯å¯è§æ€§çš„ï¼Œä½†æ˜¯å…·ä½“åŸå› ï¼Œè‡ªå·±ä¹Ÿæ²¡æƒ³æ˜ç™½ã€‚<br><br>-----<br><br>è‡ªå·±å¥—ç”¨äº†ä¸‹é¢çš„ Happens-Before è§„åˆ™ï¼š<br>0. Happens-Before çš„ä¼ é€’æ€§ã€‚<br>1. ç®¡ç¨‹ä¸­é”çš„è§„åˆ™ã€‚<br>2. çº¿ç¨‹å¯åŠ¨è§„åˆ™ã€‚<br>3. çº¿ç¨‹ç»ˆæ­¢è§„åˆ™ã€‚<br>4. çº¿ç¨‹ä¸­æ–­è§„åˆ™ã€‚<br>å¥½åƒä¹Ÿæ— æ³•æ¨å¯¼å‡ºï¼šä¸ºä½•åœ¨å†…éƒ¨çº¿ç¨‹ rptThread ä¿®æ”¹çš„ started å˜é‡ï¼Œå¯ä»¥ä¿è¯å¯è§æ€§ã€‚<br>æ˜¯æ ¹æ®ä»€ä¹ˆè§„åˆ™ï¼Œä¿è¯äº† started å˜é‡çš„å¯è§æ€§ï¼Œè€å¸ˆå¯ä»¥å¸®å¿™åˆ†æä¸€ä¸‹ä¹ˆï¼ŸæœŸå¾…æ‚¨çš„å›å¤ï¼Œè°¢è°¢è€å¸ˆï¼ï¼","like_count":3,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":453111,"discussion_content":"printlnå†…éƒ¨æœ‰é”ï¼Œè€Œä¸”è¿˜æœ‰ioæ“ä½œï¼Œæ‰€ä»¥ä¼šè®©ç»“æœä¸å‡†ç¡®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570767380,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1621470,"avatar":"https://static001.geekbang.org/account/avatar/00/18/bd/de/e0c994b3.jpg","nickname":"ååœ°é“çš„ç¨‹åºå‘˜","note":"","ucode":"A04A239D173E2A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":7053,"discussion_content":"è¿™ä¸ªè²Œä¼¼æ²¡æœ‰åŠæ³•é€šè¿‡heppens-beforeè§„åˆ™å¯¼å‡ºï¼Œä½†ç¡®å®ä¿è¯å¯è§æ€§ï¼Œå¼•ç”¨ç¬¬ä¸‰ç¯‡ä¸­ä¸€ä¸ªåŒå­¦è¯„è®ºçš„å†…å®¹æ¥å›ç­”ã€‚Doug Leaå¤§ç¥çš„Concurrent Programming in Javaä¸€ä¹¦ä¸­æœ‰è¿™æ ·ä¸€ä¸ªç‰‡æ®µæ¥æè¿°synchronizedè¿™ä¸ªå…³é”®å­—ï¼š\n \nè¿™é‡Œè‹±æ–‡å°±ä¸æ”¾å‡ºæ¥äº† å­—æ•°è¶…è¿‡ä¸¤åƒâ€¦â€¦\nè¿™ç¯‡æ–‡ç« ä¹Ÿæœ‰æåŠhttps://www.jianshu.com/p/3c06ffbf0d52\n \nç®€å•ç¿»è¯‘ä¸€ä¸‹ï¼šä»æœ¬è´¨ä¸Šæ¥è¯´ï¼Œå½“çº¿ç¨‹é‡Šæ”¾ä¸€ä¸ªé”æ—¶ä¼šå¼ºåˆ¶æ€§çš„å°†å·¥ä½œå†…å­˜ä¸­ä¹‹å‰æ‰€æœ‰çš„å†™æ“ä½œéƒ½åˆ·æ–°åˆ°ä¸»å†…å­˜ä¸­å»ï¼Œè€Œè·å–ä¸€ä¸ªé”åˆ™ä¼šå¼ºåˆ¶æ€§çš„åŠ è½½å¯è®¿é—®åˆ°çš„å€¼åˆ°çº¿ç¨‹å·¥ä½œå†…å­˜ä¸­æ¥ã€‚è™½ç„¶é”æ“ä½œåªå¯¹åŒæ­¥æ–¹æ³•å’ŒåŒæ­¥ä»£ç å—è¿™ä¸€å—èµ·åˆ°ä½œç”¨ï¼Œä½†æ˜¯å½±å“çš„å´æ˜¯çº¿ç¨‹æ‰§è¡Œæ“ä½œæ‰€ä½¿ç”¨çš„æ‰€æœ‰å­—æ®µã€‚\n","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1567325091,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1024294,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaELZPnUAiajaR5C25EDLWeJURggyiaOP5GGPe2qlwpQcm5e3ybib8OsP4tvddFDLVRSNNGL5I3SFPJHsA/132","nickname":"null","note":"","ucode":"F9039EFED6B55D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1621470,"avatar":"https://static001.geekbang.org/account/avatar/00/18/bd/de/e0c994b3.jpg","nickname":"ååœ°é“çš„ç¨‹åºå‘˜","note":"","ucode":"A04A239D173E2A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":7073,"discussion_content":"è°¢è°¢å¤§ä½¬çš„å›å¤","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567337519,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":7053,"ip_address":""},"score":7073,"extra":""}]}]},{"had_liked":false,"id":256370,"user_name":"èšä¸é±¿é±¼","can_delete":false,"product_type":"c1","uid":1428043,"ip_address":"","ucode":"5DB98E406F1D3E","user_header":"https://static001.geekbang.org/account/avatar/00/15/ca/4b/c1ace3aa.jpg","comment_is_top":false,"comment_ctime":1603611082,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"10193545674","product_id":100023901,"comment_content":"å¤§é¾„ç¨‹åºå‘˜çš„å‘¨æœ«ï¼Œå¿…é¡»æ¥ç‚¹ç²¾ç¥é£Ÿç²®ï¼Œä¸ç„¶å°±å¾ˆæ…Œï¼Œå°½ç®¡å®ƒå¯èƒ½æ²¡å•¥ç”¨ï¼Œä½†æ˜¯è°çŸ¥é“å‘¢ï¼Œè°è®©å’±è¾“åœ¨äº†èµ·è·‘çº¿ä¸Šå‘¢â€¦â€¦","like_count":2,"discussions":[{"author":{"id":1812970,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/a9/ea/5bfce6c5.jpg","nickname":"mgs2002","note":"","ucode":"F5931108BD509B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":318293,"discussion_content":"åŒæ˜¯å¤§é¾„çš„è·¯è¿‡","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1603699951,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":172421,"user_name":"IF You","can_delete":false,"product_type":"c1","uid":1108957,"ip_address":"","ucode":"C14188B97658A6","user_header":"https://static001.geekbang.org/account/avatar/00/10/eb/dd/3c9c613c.jpg","comment_is_top":false,"comment_ctime":1579174576,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"10169109168","product_id":100023901,"comment_content":"æœ¬æ–‡ä¸­çš„start()æ–¹æ³•æœ‰é—®é¢˜ï¼Œä½¿ç”¨çš„sleep()æ–¹æ³•ï¼Œè€Œè¯¥æ–¹æ³•ä¸ä¼šé‡Šæ”¾é”ï¼Œå¯¼è‡´è°ƒç”¨stopçš„æ–¹æ³•é˜»å¡åœ¨è·å–ç›‘è§†å™¨é”çš„çŠ¶æ€ï¼Œæ°¸è¿œä¸èƒ½é€šè¿‡stopæ–¹æ³•ä¼˜é›…åœæ­¢çº¿ç¨‹","like_count":2,"discussions":[{"author":{"id":1554995,"avatar":"https://static001.geekbang.org/account/avatar/00/17/ba/33/2d83d174.jpg","nickname":"æ—¶å…‰å®ˆæŠ¤è€…-åŸºå…°","note":"","ucode":"F0B0887B1979D2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":372411,"discussion_content":"sleepçš„æ˜¯æ–°å¼€çš„çº¿ç¨‹ï¼Œsleepçš„æ—¶å€™è°ƒç”¨startçš„çº¿ç¨‹å·²ç»é‡Šæ”¾Proxyå¯¹è±¡è¿™æŠŠé”è¿™æŠŠé”äº†ã€‚stopçš„æ—¶å€™æ˜¯å¦ä¸€ä¸ªçº¿ç¨‹è·å–Proxyå¯¹è±¡è¿™æŠŠé”ï¼Œä¸ºå•¥è°ƒç”¨stopä¼šé˜»å¡å‘¢","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1620310598,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":286899,"user_name":"é©¬ä»¥","can_delete":false,"product_type":"c1","uid":1344431,"ip_address":"","ucode":"3FEA06CA14DE28","user_header":"https://static001.geekbang.org/account/avatar/00/14/83/af/1cb42cd3.jpg","comment_is_top":false,"comment_ctime":1617674133,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5912641429","product_id":100023901,"comment_content":"è¿™é‡ŒåŠ ä¸åŠ volatileå…¶å®å½±å“ä¸å¤§ï¼Œåº”ä¸ºç¨‹åºä¸­çš„stop()æ–¹æ³•ä¸­åªæ˜¯æŠŠterminatedè®¾ç½®ä¸ºtrueï¼Œå³ä½¿å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®ï¼Œå½±å“çš„ä¹Ÿåªæ˜¯å¤šä¸ŠæŠ¥ä¸€æ®µæ—¶é—´ï¼Œå½±å“ä¸å¤§ï¼Œä¸ªäººè§‚ç‚¹","like_count":2},{"had_liked":false,"id":270215,"user_name":"æ”¾ç‰§äºº","can_delete":false,"product_type":"c1","uid":1980326,"ip_address":"","ucode":"CA248909EFE7E0","user_header":"https://static001.geekbang.org/account/avatar/00/1e/37/a6/3e7c2d5c.jpg","comment_is_top":false,"comment_ctime":1608992095,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5903959391","product_id":100023901,"comment_content":"æœ‰è¶£çš„äº‹ï¼Œè¿™é‡Œçš„terminateå˜é‡åŠ ä¸Šäº†volatileä¿®é¥°ï¼Œæ­£å¸¸æ¥è¯´æŒ‰ç…§ happen-beforeçš„è§„åˆ™ï¼Œå¯¹synchronizeçš„è§£é”æ˜¯èƒ½å¤Ÿè¢«åŠ é”å¯è§çš„ã€‚<br>ä½†è¿™ä¸ªåº”è¯¥æ˜¯ä¿è¯åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸‹çš„å¯è§ï¼Œä¾‹å¦‚å¯¹Proxyå¯¹è±¡çš„è§£é”æ˜¯åœ¨ä¸»çº¿ç¨‹ä¸­è°ƒç”¨çš„ï¼ŒåŠ é”ä¹Ÿåœ¨ä¸»çº¿ç¨‹ï¼Œé‚£ä¹ˆä¸»çº¿ç¨‹åŠ é”æ—¶å¯ä»¥æŸ¥çœ‹åˆ°è§£é”å˜é‡çš„æœ€æ–°å€¼ï¼Œä½†æ˜¯è¿™ä¸ªä»£ç çš„åŠ é”æ–°å¼€äº†ä¸€ä¸ªçº¿ç¨‹Cï¼Œè¿™ä¸ªæ—¶å€™å¯è§æ€§æ˜¯ä¼ é€’ä¸åˆ°çº¿ç¨‹Cçš„ï¼Œåªèƒ½ä¼ é€’ç»™æ‰§è¡Œè§£é”çš„çº¿ç¨‹å³ä¸»çº¿ç¨‹ï¼Œæ‰€ä»¥è¦åŠ volatileä¿®é¥° terminateå˜é‡","like_count":2},{"had_liked":false,"id":140346,"user_name":"è™šç«¹","can_delete":false,"product_type":"c1","uid":1691109,"ip_address":"","ucode":"8D8C96C793724E","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJIocn8OMjfSGqyeSJEV3ID2rquLR0S6xo0ibdNYQgzicib6L6VlqWjhgxOqD2iaicX1KhbWXWCsmBTskA/132","comment_is_top":false,"comment_ctime":1570886079,"is_pvip":false,"replies":[{"id":"54344","content":"å¯ä»¥è¿™æ ·å†™","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1571017990,"ip_address":"","comment_id":140346,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5865853375","product_id":100023901,"comment_content":"ç‹è€å¸ˆå¥½ï¼Œè¯·æ•™ä¸‹ï¼š<br>1.è‡ªå®šä¹‰æ ‡å¿—ä½ç»ˆæ­¢çº¿ç¨‹æ—¶ï¼Œæ˜¯ä¸æ˜¯è¿™æ ·å¯ä»¥è¿™æ ·å†™ï¼Ÿ<br>whlie(!Thread.currentThread()isInterrupted() || !terminated){}<br>2.çº¿ç¨‹æ± å…³é—­æ—¶ï¼Œå®Œæ•´çš„æ˜¯è¿™æ ·å§?<br>exec.shutdown();<br>while(true){<br>  if(exec.isTerminated()){<br>    print(&quot;æ‰€æœ‰çš„ä»»åŠ¡éƒ½ç»“æŸäº†~&quot;);<br>  }<br>  Thread.sleep(1000);<br>}<br><br>","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470352,"discussion_content":"å¯ä»¥è¿™æ ·å†™","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571017990,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":113999,"user_name":"ç¾ç¾","can_delete":false,"product_type":"c1","uid":1148422,"ip_address":"","ucode":"44CC95C45AF345","user_header":"https://static001.geekbang.org/account/avatar/00/11/86/06/72b01bb7.jpg","comment_is_top":false,"comment_ctime":1563202337,"is_pvip":false,"replies":[{"id":"41576","content":"æ²¡æœ‰whileå¯ä»¥å…³é”®ç‚¹ä¸Šæ£€æŸ¥ï¼Œä¹Ÿå¯ä»¥ç­‰å¾…è‡ªç„¶ç»“æŸï¼Œçœ‹å®é™…éœ€æ±‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1563234840,"ip_address":"","comment_id":113999,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5858169633","product_id":100023901,"comment_content":"æˆ‘çœ‹ç»“æŸçº¿ç¨‹çš„ç¤ºä¾‹éƒ½æœ‰whileæ–¹æ³•ï¼Œå¦‚æœæ²¡æœ‰whileï¼Œå¦‚æœä¸­æ–­å‘¢ï¼ŸåŒæ—¶ä¹Ÿæ²¡æœ‰å¤„äºä¼‘çœ çŠ¶æ€çš„è¯ï¼Œæ˜¯ä¸æ˜¯åªèƒ½ç­‰ç¨‹åºè‡ªç„¶ç»“æŸäº†ï¼Œæ˜¯ä¸æ˜¯æˆ‘çš„é—®é¢˜æœ‰é—®é¢˜ã€‚ã€‚ã€‚","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458473,"discussion_content":"æ²¡æœ‰whileå¯ä»¥å…³é”®ç‚¹ä¸Šæ£€æŸ¥ï¼Œä¹Ÿå¯ä»¥ç­‰å¾…è‡ªç„¶ç»“æŸï¼Œçœ‹å®é™…éœ€æ±‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563234840,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":111624,"user_name":"èƒ¡å°ç¦¾","can_delete":false,"product_type":"c1","uid":1132315,"ip_address":"","ucode":"1C23B7492C0C9E","user_header":"https://static001.geekbang.org/account/avatar/00/11/47/1b/64262861.jpg","comment_is_top":false,"comment_ctime":1562575060,"is_pvip":false,"replies":[{"id":"40630","content":"æ ¸å¿ƒé€»è¾‘æ˜¯å¼‚æ­¥æ‰§è¡Œçš„ï¼Œæ‰€ä»¥è¿˜æ˜¯æœ‰å¿…è¦çš„","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1562590350,"ip_address":"","comment_id":111624,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5857542356","product_id":100023901,"comment_content":"ç¬¬ä¸€æ®µä»£ç ä¸­çš„ç¬¬ä¹è¡Œï¼š<br>      started = true;<br>æœ‰å¿…è¦å­˜åœ¨å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":457393,"discussion_content":"æ ¸å¿ƒé€»è¾‘æ˜¯å¼‚æ­¥æ‰§è¡Œçš„ï¼Œæ‰€ä»¥è¿˜æ˜¯æœ‰å¿…è¦çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562590350,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":97901,"user_name":"å…«ç™¾","can_delete":false,"product_type":"c1","uid":1253530,"ip_address":"","ucode":"79F1F79ADF5A00","user_header":"https://static001.geekbang.org/account/avatar/00/13/20/9a/3b1c65fd.jpg","comment_is_top":false,"comment_ctime":1558836341,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5853803637","product_id":100023901,"comment_content":"æˆ‘è®°å¾—åœ¨kafka0.8ç‰ˆæœ¬çš„æ—¶å€™ï¼Œæˆ‘è®¾ç½®ä¸­æ–­æ¥å…³é—­æ¶ˆè´¹è€…çº¿ç¨‹ï¼Œç»“æœä¸è¡Œï¼Œç„¶åæˆ‘æŠŠä¸­æ–­æ ‡å¿—ä½ï¼Œæ¢å¤äº†ï¼Œå°±å¥½äº†ã€‚ã€‚Ô¾â€¸Ô¾","like_count":1},{"had_liked":false,"id":97064,"user_name":"shangyu","can_delete":false,"product_type":"c1","uid":1011389,"ip_address":"","ucode":"13A26E53508D75","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6e/bd/b83ad32d.jpg","comment_is_top":false,"comment_ctime":1558579625,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5853546921","product_id":100023901,"comment_content":"è¯·é—®è€å¸ˆ ç”¨interruptæ–¹å¼ä¸­æ–­çº¿ç¨‹æ˜¯è®¾ç½®æ ‡å¿—ä½ï¼Œåœ¨runæ–¹æ³•ä¸­ç”¨å¾ªç¯æ£€æµ‹è¯¥ä¸­æ–­æ ‡å¿—ä½ï¼Œå¦‚æœä¸­æ–­åˆ™ä¸å†å¾ªç¯ã€‚<br>è¿™é‡Œæœ‰ä¸ªé—®é¢˜æ˜¯å¿…é¡»æ‰§è¡Œå®Œå¾ªç¯é‡Œçš„ä»£ç ï¼Œé‡æ–°æ£€æµ‹å¾ªç¯æ¡ä»¶æ‰èƒ½ä¸­æ–­ï¼Œé‚£æœ‰æ²¡æœ‰åŠæ³•èƒ½åœ¨å¾ªç¯ä¸­ä¸­æ–­ï¼Œå®ç°ç±»ä¼¼ctrl-Cçš„åŠŸèƒ½ï¼Œç”¨Thread.stopå—ï¼Ÿ","like_count":1},{"had_liked":false,"id":96062,"user_name":"åŒ…å­","can_delete":false,"product_type":"c1","uid":1089345,"ip_address":"","ucode":"6CC4EBB8CD3924","user_header":"https://static001.geekbang.org/account/avatar/00/10/9f/41/82306dfe.jpg","comment_is_top":false,"comment_ctime":1558318531,"is_pvip":false,"replies":[{"id":"34433","content":"stopæ–¹æ³•é‡Œè®¾ç½®è¿‡äº†","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1558358043,"ip_address":"","comment_id":96062,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5853285827","product_id":100023901,"comment_content":"è€å¸ˆä½ å¥½ï¼Œ<br>ä¼˜é›…å…³é—­çº¿ç¨‹æœ€åä¸€ä¸ªæ¡ˆä¾‹ä»£ç ä½¿ç”¨terminatedä½œä¸ºçº¿ç¨‹ä¸­æ–­çš„æ ‡å¿—ä½ï¼Œé‚£cacheä½sleepæ—¶ï¼Œä¸ç”¨è®¾ç½®terminatedä¸ºtrueå—ã€‚ä¸è®¾ç½®çº¿ç¨‹æ˜¯å…³é—­ä¸äº†çš„å•Šã€‚<br>        try {<br>          Thread.sleep(2000);<br>        } catch (InterruptedException e){<br>          &#47;&#47; é‡æ–°è®¾ç½®çº¿ç¨‹ä¸­æ–­çŠ¶æ€<br>          Thread.currentThread().interrupt();<br>        }<br><br>","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":450703,"discussion_content":"stopæ–¹æ³•é‡Œè®¾ç½®è¿‡äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558358043,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":95964,"user_name":"é£èµ·æ—¶","can_delete":false,"product_type":"c1","uid":1125840,"ip_address":"","ucode":"41E3E457F1E970","user_header":"https://static001.geekbang.org/account/avatar/00/11/2d/d0/1fe7144e.jpg","comment_is_top":false,"comment_ctime":1558276918,"is_pvip":false,"replies":[{"id":"34352","content":"synchronized å°±ä¸éœ€è¦äº†","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1558313146,"ip_address":"","comment_id":95964,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5853244214","product_id":100023901,"comment_content":"è€å¸ˆï¼Œstartedæ˜¯å¦éœ€è¦åŠ voliatleä¿è¯ï¼Œå¤šä¸ªçº¿ç¨‹çœ‹åˆ°çš„éƒ½æ˜¯æœ€æ–°çš„å€¼","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":450661,"discussion_content":"synchronized å°±ä¸éœ€è¦äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558313146,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2143963,"avatar":"https://static001.geekbang.org/account/avatar/00/20/b6/db/ffaed7bf.jpg","nickname":"åˆ˜é¹","note":"","ucode":"EA8BD8810350C3","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":555407,"discussion_content":"è€å¸ˆé‚£è¿™æ ·startedå˜é‡å­˜åœ¨æ˜¯ä¸ºäº†ä»€ä¹ˆå‘¢ï¼Ÿsynchronizedå·²ç»ä¿è¯äº†çº¿ç¨‹äº’æ–¥äº†å‘€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646895154,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":450661,"ip_address":""},"score":555407,"extra":""}]}]},{"had_liked":false,"id":338759,"user_name":"ä¸€ç‚¹ç‚¹å°±å¥½","can_delete":false,"product_type":"c1","uid":1055913,"ip_address":"","ucode":"3082B6E93FA7D8","user_header":"https://static001.geekbang.org/account/avatar/00/10/1c/a9/49ffc8c7.jpg","comment_is_top":false,"comment_ctime":1647703010,"is_pvip":true,"replies":[{"id":"123923","content":"å¯ä»¥è¯•è¯•ç”¨é˜Ÿåˆ—ï¼Œbæ¶ˆè´¹é˜Ÿåˆ—ä»»åŠ¡ï¼Œå¦‚æœè¢«ä¸­æ–­ï¼Œå°±æ‰§è¡Œä¸­æ–­é€»è¾‘ï¼Œæœ€åbåœ¨æŠŠä»»åŠ¡å¢åŠ åˆ°é˜Ÿåˆ—ä¸­ã€‚<br>aç”Ÿäº§é˜Ÿåˆ—ä»»åŠ¡ï¼ŒåŒæ—¶æ£€æµ‹æ˜¯å¦ä»»åŠ¡åœ¨æ‰§è¡Œä¸­ï¼Œå¦‚æœåœ¨æ‰§è¡Œä¸­ï¼Œå°±ä¸­æ–­ä»»åŠ¡æ‰§è¡Œçº¿ç¨‹ã€‚<br>éœ€è¦ä¸€ä¸ªä»»åŠ¡å¯¹è±¡æ¥ä¿å­˜ä¸€äº›çŠ¶æ€","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1269969","ctime":1647912979,"ip_address":"","comment_id":338759,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1647703010","product_id":100023901,"comment_content":"æœ‰è¿™æ ·ä¸€ä¸ªåœºæ™¯<br>Açº¿ç¨‹å‘æ¬¡ä¸¤æ¬¡ä»»åŠ¡è°ƒåº¦ï¼Œå°†å…¶æ”¾å…¥åˆ°Bçº¿ç¨‹ä¸­è¿›è¡Œæ‰§è¡Œï¼Œå¦‚æœBä¸­å·²ç»æœ‰ä»»åŠ¡åœ¨æ‰§è¡Œï¼Œé‚£ä¹ˆAçº¿ç¨‹ä¸­å…ˆä¸­æ–­çº¿ç¨‹ä¸­æ‰§è¡Œè¿™ä¸ªä»»åŠ¡çš„è¿›ç¨‹ååœ¨è¿›è¡Œä»»åŠ¡æäº¤ï¼Œè¿™ä¸ªåœºæ™¯æœ‰æ²¡æœ‰ä¼˜é›…çš„æ–¹å¼","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":557631,"discussion_content":"å¯ä»¥è¯•è¯•ç”¨é˜Ÿåˆ—ï¼Œbæ¶ˆè´¹é˜Ÿåˆ—ä»»åŠ¡ï¼Œå¦‚æœè¢«ä¸­æ–­ï¼Œå°±æ‰§è¡Œä¸­æ–­é€»è¾‘ï¼Œæœ€åbåœ¨æŠŠä»»åŠ¡å¢åŠ åˆ°é˜Ÿåˆ—ä¸­ã€‚\naç”Ÿäº§é˜Ÿåˆ—ä»»åŠ¡ï¼ŒåŒæ—¶æ£€æµ‹æ˜¯å¦ä»»åŠ¡åœ¨æ‰§è¡Œä¸­ï¼Œå¦‚æœåœ¨æ‰§è¡Œä¸­ï¼Œå°±ä¸­æ–­ä»»åŠ¡æ‰§è¡Œçº¿ç¨‹ã€‚\néœ€è¦ä¸€ä¸ªä»»åŠ¡å¯¹è±¡æ¥ä¿å­˜ä¸€äº›çŠ¶æ€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647912979,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":290823,"user_name":"æˆ‘çœŸä¸æ˜¯åœ°çƒ","can_delete":false,"product_type":"c1","uid":1451048,"ip_address":"","ucode":"873F7222DE35BE","user_header":"https://static001.geekbang.org/account/avatar/00/16/24/28/9b5b1396.jpg","comment_is_top":false,"comment_ctime":1619769740,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1619769740","product_id":100023901,"comment_content":"Thread.currentThread().interrupt()å’ŒrptThread().interrupt()<br>æœ‰ä»€ä¹ˆåŒºåˆ«å•Šè€å¸ˆï¼Œæ„Ÿè§‰æ˜¯ä¸€å›äº‹å§","like_count":0},{"had_liked":false,"id":271310,"user_name":"å•¸æ­Œ","can_delete":false,"product_type":"c1","uid":1113874,"ip_address":"","ucode":"D8C8963BB940F6","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83er2rgam9XfHbuSIZB4S3UG2GLrf9CLkiatDG62eEMicT4yprYdSAZET3kfqQBPxqBHkZw2KRhMdJX4Q/132","comment_is_top":false,"comment_ctime":1609550711,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1609550711","product_id":100023901,"comment_content":"1ã€è‡ªå®šä¹‰ä¸­æ–­æ ‡å¿—ä½çš„é—®é¢˜ï¼šå¦‚æœrunæ–¹æ³•é‡Œæœ‰é˜»å¡è°ƒç”¨æ—¶ä¼šæ— æ³•å¾ˆå¿«æ£€æµ‹åˆ°ä¸­æ–­æ ‡å¿—ï¼Œçº¿ç¨‹å¿…é¡»ä»é˜»å¡è°ƒç”¨è¿”å›åï¼Œæ‰ä¼šæ£€æŸ¥è¿™ä¸ªä¸­æ–­æ ‡å¿—<br>2ã€ç¤ºä¾‹ä»£ç stopæ–¹æ³•è®¾ç½®äº†ä¸­æ–­æ ‡å¿—ä½ å´æ²¡æœ‰ä¸»åŠ¨æ£€æŸ¥ã€‚<br>whlie(!Thread.currentThread()isInterrupted() || !terminated){}","like_count":0},{"had_liked":false,"id":269638,"user_name":"Monday","can_delete":false,"product_type":"c1","uid":1250907,"ip_address":"","ucode":"77B9BACC783598","user_header":"https://static001.geekbang.org/account/avatar/00/13/16/5b/83a35681.jpg","comment_is_top":false,"comment_ctime":1608722972,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1608722972","product_id":100023901,"comment_content":"JVMä¼šåœ¨å¼‚å¸¸å¤„ç†æ¸…é™¤çº¿ç¨‹ä¸­æ–­çŠ¶æ€ã€‚æˆ‘ä¹Ÿé‡ç°äº†ã€‚<br>ä½†æ˜¯ä¸ºä»€ä¹ˆJVMè¦è¿™æ ·åšå‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":250805,"user_name":"witluo","can_delete":false,"product_type":"c1","uid":1443117,"ip_address":"","ucode":"3D9608C3DDDD95","user_header":"","comment_is_top":false,"comment_ctime":1601251088,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1601251088","product_id":100023901,"comment_content":"æœ‰äº›ç–‘æƒ‘ï¼šHappend-BeforeåŸåˆ™ä¸­æœ‰ä¸ªstart()åŸåˆ™ã€‚ ä¸»çº¿ç¨‹Aå¯åŠ¨å­çº¿ç¨‹Bï¼Œ å¯¹äºä¸»çº¿ç¨‹å¯åŠ¨å­çº¿ç¨‹B.start()ä¹‹å‰çš„æ“ä½œ Happens-Before ä¸ start()æ–¹æ³•ã€‚   å†åŠ ä¸Šä¼ é€’æ€§ï¼Œæˆ‘æ€ä¹ˆè§‰å¾— volatitleä¹Ÿæ²¡å¿…è¦å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":225603,"user_name":"çŸ³å¤´æ±¤","can_delete":false,"product_type":"c1","uid":1022282,"ip_address":"","ucode":"45E4578E54F585","user_header":"https://static001.geekbang.org/account/avatar/00/0f/99/4a/bdf26d5c.jpg","comment_is_top":false,"comment_ctime":1591798455,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1591798455","product_id":100023901,"comment_content":"synchronized æœ¬èº«å·²ç»è§£å†³äº†åŸå­æ€§é—®é¢˜ï¼Œå¦‚æœå¯¹æŸå˜é‡çš„æ“ä½œéƒ½ç”¨äº† synchronized ï¼Œhappen before ç”Ÿæ•ˆï¼Œæ˜¯ä¸éœ€è¦ volatile çš„; ç¤ºä¾‹éœ€è¦ç”¨volatile ï¼Œæ˜¯å› ä¸ºåœ¨ new Thread() å†…å¯¹æ­¤å˜é‡çš„è¯»æ“ä½œæ²¡æœ‰åŠ  syncronized","like_count":0},{"had_liked":false,"id":224208,"user_name":"å’¸é±¼","can_delete":false,"product_type":"c1","uid":1179028,"ip_address":"","ucode":"5E79636DE48155","user_header":"https://static001.geekbang.org/account/avatar/00/11/fd/94/0247f945.jpg","comment_is_top":false,"comment_ctime":1591317871,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1591317871","product_id":100023901,"comment_content":"æ„Ÿè§‰å¯ä»¥ä¸éœ€è¦çš„å•Šï¼Œè™½ç„¶volatileä¿è¯å†…å­˜å¯è§æ€§ï¼Œä½†æ˜¯è¿™é‡Œä»…æœ‰ä¸€å¤„å†™æ“ä½œï¼Œç”šè‡³stopéƒ½å¯ä»¥ä¸ç”¨åšåŒæ­¥æ“ä½œï¼Œterminalçš„ä¿®æ”¹å¹¶ä¸éœ€è¦ç«‹é©¬å¯è§ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥ä¸éœ€è¦ç«‹é©¬å»å“åº”åœæ­¢é‡‡é›†ï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸‹æ„Ÿè§‰å¯ä»¥ä¸ç”¨","like_count":0},{"had_liked":false,"id":219451,"user_name":"sky","can_delete":false,"product_type":"c1","uid":1008071,"ip_address":"","ucode":"9FE5F43055D3AB","user_header":"https://static001.geekbang.org/account/avatar/00/0f/61/c7/b64ac05e.jpg","comment_is_top":false,"comment_ctime":1590027164,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1590027164","product_id":100023901,"comment_content":"è¿™é‡Œä¸æ˜¯åªèƒ½å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹ä¹ˆï¼Œç”±äºsync äº†startæ–¹æ³•ï¼Œæ ¹æ®jmm ä¸ä¼šåŒæ—¶æœ‰ä¸¤ä¸ªçº¿ç¨‹åˆ›å»ºå§ï¼Œæ˜¯ä¸æ˜¯å°±ä¸ä¼šæœ‰terminate å¯è§æ€§é—®é¢˜","like_count":0},{"had_liked":false,"id":212033,"user_name":"è§å—å±±","can_delete":false,"product_type":"c1","uid":1118111,"ip_address":"","ucode":"6A8BB82B7573CA","user_header":"https://static001.geekbang.org/account/avatar/00/11/0f/9f/f4b06bd5.jpg","comment_is_top":false,"comment_ctime":1588049875,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1588049875","product_id":100023901,"comment_content":"é—®ä¸ªé—®é¢˜:  sutdownnowè¿™ä¸ªæ–¹æ³•ï¼Œæ˜¯é€šè¿‡è®¾ç½®ä¸­æ–­ä½æ¥åœæ­¢çº¿ç¨‹å—ï¼Ÿå¦‚æœæˆ‘åœ¨ä»£ç ä¸­ä¸å¤„ç†æ ‡å¿—ä½é€€å‡ºï¼Œæ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹ä¼šæ‰§è¡Œå®Œå—","like_count":0},{"had_liked":false,"id":209721,"user_name":"ä¾§è€³å€¾å¬","can_delete":false,"product_type":"c1","uid":1512642,"ip_address":"","ucode":"5BF2A2440B54F0","user_header":"https://static001.geekbang.org/account/avatar/00/17/14/c2/46ebe3a0.jpg","comment_is_top":false,"comment_ctime":1587604943,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1587604943","product_id":100023901,"comment_content":"å…ˆä¸è¯´è¯¾åé¢˜çš„volaitleæ˜¯å¦æœ‰å¿…è¦ï¼Œæ–‡ä¸­æ‰€ä¸¾çš„ä¾‹å­ï¼Œæ˜¯å¦æœ‰å¿…è¦ç”¨synchronizedæ¥äº’æ–¥ï¼ŒçŠ¶æ€æ˜¯ä¸€ä¸ªå¸ƒå°”å‹ï¼Œç”¨åŸå­ç±»å°±å¯ä»¥å§ï¼Ÿä¸è¿‡è¿™ä¸ªç±»çš„æ–¹æ³•åº”è¯¥åªè¢«è°ƒç”¨ä¸€æ¬¡ï¼Œç”¨é‡é‡çº§é”ä¹Ÿä¸ä¼šå¼•èµ·ä»€ä¹ˆæ€§èƒ½é—®é¢˜ã€‚<br>å†è¯´è¯¾åé¢˜ï¼Œæ ¹æ®happends-beforeåŸåˆ™ï¼Œå˜é‡çš„å¯è§æ€§æ²¡æœ‰é—®é¢˜ï¼Œä¸éœ€è¦é€šè¿‡volatileæ¥æ ‡è¯†ï¼Œå€’æ˜¯æœ‰åºæ€§å¯èƒ½ä¼šäº§ç”Ÿé—®é¢˜ï¼Œæ‰€ä»¥æ­¤å¤„çš„volatileåº”è¯¥æ˜¯è¾¾æˆvolatileåŸåˆ™ï¼Œé¿å…æŒ‡ä»¤é‡æ’åºçš„","like_count":0},{"had_liked":false,"id":202888,"user_name":"hellojd","can_delete":false,"product_type":"c1","uid":1341697,"ip_address":"","ucode":"4E51807AE7E472","user_header":"https://static001.geekbang.org/account/avatar/00/14/79/01/e71510dc.jpg","comment_is_top":false,"comment_ctime":1586080150,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1586080150","product_id":100023901,"comment_content":"Proxy.javaä¾‹å­ä¸­ï¼Œæˆ‘æ„Ÿè§‰ æ²¡å¿…è¦å®šä¹‰2ä¸ªå˜é‡ã€‚<br>volatile boolean terminated = false; <br>boolean started = false;<br>ä¸€ä¸ªä¹Ÿå¯ä»¥å®ç°ä¼˜é›…å…³é—­æ•ˆæœã€‚è€Œä¸”ä¸éœ€è¦start,stopæ–¹æ³•æ— éœ€å®è¡ŒåŒæ­¥ã€‚ä»…ä»…æ˜¯ä¸€ä¸ªçŠ¶æ€è€Œå·²ï¼Œä¸æ¶‰åŠåŸå­æ€§æ“ä½œï¼Œæ— éœ€å¤„ç†åŒæ­¥ã€‚","like_count":0},{"had_liked":false,"id":198834,"user_name":"genji","can_delete":false,"product_type":"c1","uid":1906775,"ip_address":"","ucode":"43C2959371373F","user_header":"https://static001.geekbang.org/account/avatar/00/1d/18/57/6229a783.jpg","comment_is_top":false,"comment_ctime":1585470009,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585470009","product_id":100023901,"comment_content":"å¦™å•Šå¦™å•Šã€‚ä¸¤é˜¶æ®µç»ˆæ­¢ï¼Œinterrupt()å¯ä»¥ä¸»åŠ¨è°ƒèµ·å¼‚å¸¸æ¥å¤„ç†ä¸­æ­¢(å¯ä»¥é˜²æ­¢æŸäº›çº¿ç¨‹åœ¨é˜»å¡çŠ¶æ€è€Œæ²¡æœ‰ç«‹å³ä¸­æ­¢)ï¼Œterminatedåˆ™å¯ä»¥ä¿è¯æ— è®ºå‡ºç°ä»€ä¹ˆå¼‚å¸¸éƒ½èƒ½ç›´æ¥å…³é—­çº¿ç¨‹çš„å¾ªç¯çŠ¶æ€ï¼Œå®ç°äº†è¿è¡Œ-&gt;ä¸­æ­¢çš„è¿‡ç¨‹ï¼Œå½»åº•çš„ä¸­æ–­äº†çº¿ç¨‹ã€‚","like_count":0},{"had_liked":false,"id":196010,"user_name":"Mr.wang","can_delete":false,"product_type":"c1","uid":1224805,"ip_address":"","ucode":"86F341A5316BBC","user_header":"https://static001.geekbang.org/account/avatar/00/12/b0/65/90387745.jpg","comment_is_top":false,"comment_ctime":1585230132,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"1585230132","product_id":100023901,"comment_content":"æˆ‘è®¤ä¸ºæ˜¯æœ‰å¿…è¦æ€§çš„ï¼Œå½“è®¾ç½®terminatedä¸ºtrueçš„æ—¶å€™ï¼Œéœ€è¦ç³»ç»Ÿç«‹åˆ»çŸ¥é“å½“å‰terminatedçš„å€¼ï¼Œå¹¶å“åº”è®¾ç½®åçš„çº¿ç¨‹å˜åŒ–ã€‚","like_count":0},{"had_liked":false,"id":194905,"user_name":"æ±¡åä¾¦æ¢","can_delete":false,"product_type":"c1","uid":1049154,"ip_address":"","ucode":"D9C4D175E5EF7B","user_header":"https://static001.geekbang.org/account/avatar/00/10/02/42/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1585118407,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585118407","product_id":100023901,"comment_content":"æŒºå¥½ï¼Œå¾ˆæ¸…æ¥šï¼Œæ”¶è·å¾ˆå¤š","like_count":0},{"had_liked":false,"id":178575,"user_name":"benjamindora","can_delete":false,"product_type":"c1","uid":1046455,"ip_address":"","ucode":"66C29727AE47C8","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f7/b7/a2b4c9b9.jpg","comment_is_top":false,"comment_ctime":1581749514,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1581749514","product_id":100023901,"comment_content":"è€å¸ˆï¼Œä¸ªäººè§‰å¾—terminatedä¸éœ€è¦volatileã€‚ä»ä»£ç ä¸Šçœ‹ï¼Œstartæ–¹æ³•ä¸stopæ–¹æ³•ä¸­ï¼ŒterminatedçŠ¶æ€ä¸ç®¡å¯ä¸å¯è§éƒ½å¯¹åç»­çš„ä¸šåŠ¡é€»è¾‘æ²¡æœ‰å½±å“ã€‚","like_count":0},{"had_liked":false,"id":178558,"user_name":"supermouse","can_delete":false,"product_type":"c1","uid":1321860,"ip_address":"","ucode":"88072D5F881827","user_header":"https://static001.geekbang.org/account/avatar/00/14/2b/84/07f0c0d6.jpg","comment_is_top":false,"comment_ctime":1581743943,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1581743943","product_id":100023901,"comment_content":"æœ‰å¿…è¦ï¼Œå› ä¸ºè¦ä¿è¯ terminated çš„å¯è§æ€§ã€‚æ¯”å¦‚çº¿ç¨‹ T1 è¦ç»ˆæ­¢çº¿ç¨‹ T2ï¼Œé‚£ä¹ˆåªæœ‰åŠ ä¸Š volatile æ‰èƒ½è®© T1 å¯¹ terminated çš„ä¿®æ”¹å¯¹ T2 æ˜¯å¯è§çš„ã€‚","like_count":0},{"had_liked":false,"id":146825,"user_name":"potato00fa","can_delete":false,"product_type":"c1","uid":1307080,"ip_address":"","ucode":"D179E68D87CC50","user_header":"https://static001.geekbang.org/account/avatar/00/13/f1/c8/8e6dc340.jpg","comment_is_top":false,"comment_ctime":1572665846,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1572665846","product_id":100023901,"comment_content":"æœ‰å¿…è¦åŠ volatieï¼Œçˆ¶çº¿ç¨‹è°ƒç”¨stopæ”¹æ ‡å¿—ä½é€šçŸ¥å­çº¿ç¨‹ï¼Œæ ‡å¿—ä½å±äºè·¨çº¿ç¨‹çš„å…±äº«å˜é‡","like_count":0},{"had_liked":false,"id":145443,"user_name":"åå¤§æ°å‡ºé’å¹´","can_delete":false,"product_type":"c1","uid":1559178,"ip_address":"","ucode":"BAB4AA12604CF6","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/a5U0nqaicLy5ZJkESxBd5lMicNQcTTDK8vURyyWiabHxic7vS1VVk7HWTZg6ltyWJ3n9jb3Gq554ibfjsf7bv1v1Sdw/132","comment_is_top":false,"comment_ctime":1572274061,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1572274061","product_id":100023901,"comment_content":"è€å¸ˆï¼Œå¯ä»¥ä¸¾ä¸€ä¸ªè°ƒç”¨ç¬¬ä¸‰æ–¹ç±»åº“ï¼Œç¬¬ä¸‰æ–¹ç±»åº“æ•è·äº†å¼‚å¸¸ï¼Œå´æ²¡æœ‰æ­£å¸¸å¤„ç†çš„ä¾‹å­å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":112018,"user_name":"èƒ¡å°ç¦¾","can_delete":false,"product_type":"c1","uid":1132315,"ip_address":"","ucode":"1C23B7492C0C9E","user_header":"https://static001.geekbang.org/account/avatar/00/11/47/1b/64262861.jpg","comment_is_top":false,"comment_ctime":1562654220,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1562654220","product_id":100023901,"comment_content":"class Proxy {<br>  &#47;&#47; çº¿ç¨‹ç»ˆæ­¢æ ‡å¿—ä½<br>  volatile boolean terminated = false;<br>  boolean started = false;<br>  &#47;&#47; é‡‡é›†çº¿ç¨‹<br>  Thread rptThread;<br>  &#47;&#47; å¯åŠ¨é‡‡é›†åŠŸèƒ½<br>  synchronized void start(){<br>    &#47;&#47; ä¸å…è®¸åŒæ—¶å¯åŠ¨å¤šä¸ªé‡‡é›†çº¿ç¨‹<br>    if (started) {<br>      return;<br>    }<br>    started = true;<br>    terminated = false;<br>    rptThread = new Thread(()-&gt;{<br>      while (!terminated){<br>        &#47;&#47; çœç•¥é‡‡é›†ã€å›ä¼ å®ç°<br>        report();<br>        &#47;&#47; æ¯éš”ä¸¤ç§’é’Ÿé‡‡é›†ã€å›ä¼ ä¸€æ¬¡æ•°æ®<br>        try {<br>          Thread.sleep(2000);<br>        } catch (InterruptedException e){<br>          &#47;&#47; é‡æ–°è®¾ç½®çº¿ç¨‹ä¸­æ–­çŠ¶æ€<br>          Thread.currentThread().interrupt();<br>        }<br>      }<br>      &#47;&#47; æ‰§è¡Œåˆ°æ­¤å¤„è¯´æ˜çº¿ç¨‹é©¬ä¸Šç»ˆæ­¢<br>      started = false;<br>    });<br>    rptThread.start();<br>  }<br>  &#47;&#47; ç»ˆæ­¢é‡‡é›†åŠŸèƒ½<br>  synchronized void stop(){<br>    &#47;&#47; è®¾ç½®ä¸­æ–­æ ‡å¿—ä½<br>    terminated = true;<br>    &#47;&#47; ä¸­æ–­çº¿ç¨‹ rptThread<br>    rptThread.interrupt();<br>  }<br>}<br><br>è¿™é‡Œä½¿ç”¨äº† terminated ä½œä¸ºä¸­æ–­æ ‡å¿—ä½äº†ï¼Œ<br>æ˜¯ä¸æ˜¯è¯´ å°±ä¸éœ€è¦ rptThread.interrupt()<br>æˆ–è€…    Thread.currentThread().interrupt() <br>çš„ä¸­æ–­æ ‡å¿—ä½äº†ï¼Ÿ","like_count":0},{"had_liked":false,"id":109420,"user_name":"Jason","can_delete":false,"product_type":"c1","uid":1446282,"ip_address":"","ucode":"2D3A1F6FE2C495","user_header":"https://static001.geekbang.org/account/avatar/00/16/11/8a/cbcbab41.jpg","comment_is_top":false,"comment_ctime":1562030951,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1562030951","product_id":100023901,"comment_content":"è€å¸ˆï¼Œstarted=trueè¿™ä¸€è¡Œæ˜æ˜¾åœ¨æ–°èµ·çš„çº¿ç¨‹å†…æ“ä½œçš„ï¼Œä¸èƒ½ä¿è¯å¯è§æ€§ï¼Œæ˜¯ä¸æ˜¯åº”è¯¥ç§»å‡ºåˆ°æ–°èµ·çš„çº¿ç¨‹å¤–ã€‚åœ¨); åé¢è€Œä¸æ˜¯åœ¨é‡Œé¢","like_count":0,"discussions":[{"author":{"id":1621470,"avatar":"https://static001.geekbang.org/account/avatar/00/18/bd/de/e0c994b3.jpg","nickname":"ååœ°é“çš„ç¨‹åºå‘˜","note":"","ucode":"A04A239D173E2A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":7056,"discussion_content":"Doug Leaå¤§ç¥çš„Concurrent Programming in Javaä¸€ä¹¦ä¸­æœ‰è¿™æ ·ä¸€ä¸ªç‰‡æ®µæ¥æè¿°synchronizedè¿™ä¸ªå…³é”®å­—ï¼š\n \nè¿™é‡Œè‹±æ–‡å°±ä¸æ”¾å‡ºæ¥äº† å­—æ•°è¶…è¿‡ä¸¤åƒâ€¦â€¦\nè¿™ç¯‡æ–‡ç« ä¹Ÿæœ‰æåŠhttps://www.jianshu.com/p/3c06ffbf0d52\n \nç®€å•ç¿»è¯‘ä¸€ä¸‹ï¼šä»æœ¬è´¨ä¸Šæ¥è¯´ï¼Œå½“çº¿ç¨‹é‡Šæ”¾ä¸€ä¸ªé”æ—¶ä¼šå¼ºåˆ¶æ€§çš„å°†å·¥ä½œå†…å­˜ä¸­ä¹‹å‰æ‰€æœ‰çš„å†™æ“ä½œéƒ½åˆ·æ–°åˆ°ä¸»å†…å­˜ä¸­å»ï¼Œè€Œè·å–ä¸€ä¸ªé”åˆ™ä¼šå¼ºåˆ¶æ€§çš„åŠ è½½å¯è®¿é—®åˆ°çš„å€¼åˆ°çº¿ç¨‹å·¥ä½œå†…å­˜ä¸­æ¥ã€‚è™½ç„¶é”æ“ä½œåªå¯¹åŒæ­¥æ–¹æ³•å’ŒåŒæ­¥ä»£ç å—è¿™ä¸€å—èµ·åˆ°ä½œç”¨ï¼Œä½†æ˜¯å½±å“çš„å´æ˜¯çº¿ç¨‹æ‰§è¡Œæ“ä½œæ‰€ä½¿ç”¨çš„æ‰€æœ‰å­—æ®µã€‚\n","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1567325906,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":106876,"user_name":"narsilçš„æ¢¦","can_delete":false,"product_type":"c1","uid":1185187,"ip_address":"","ucode":"67110C673BD951","user_header":"https://static001.geekbang.org/account/avatar/00/12/15/a3/e67d6039.jpg","comment_is_top":false,"comment_ctime":1561420866,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1561420866","product_id":100023901,"comment_content":"è‡ªå·±è®¾ç½®isTerminateæ ‡å¿—ä½çš„æ„ä¹‰ä½•åœ¨ï¼Œæ²¡å¤ªæ˜ç™½","like_count":0,"discussions":[{"author":{"id":1437158,"avatar":"https://static001.geekbang.org/account/avatar/00/15/ed/e6/75a32708.jpg","nickname":"æ—¥æ‹±ä¸€å…µ","note":"","ucode":"D6386E5CD7C061","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6247,"discussion_content":"ä¸ä¾èµ–ç³»ç»Ÿçš„æ ‡å¿—ä½ï¼Œä¸‡ä¸€çº¿ç¨‹è¢«ç»ˆç«¯çš„ä»£ç åœ¨ç¬¬ä¸‰æ–¹åº“ï¼Œç¬¬ä¸‰æ–¹åº“æºç æ²¡æœ‰é‡ç½®æ ‡å¿—ä½ï¼Œè¿™å°±æ­»å¾ªç¯äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566810365,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":98535,"user_name":"Kaleidoscoper","can_delete":false,"product_type":"c1","uid":1031741,"ip_address":"","ucode":"E705716641B08F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/be/3d/b782c7a5.jpg","comment_is_top":false,"comment_ctime":1559019573,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1559019573","product_id":100023901,"comment_content":"è€å¸ˆï¼Œstartedå­—æ®µæ˜¯ä¸æ˜¯ä¹Ÿæœ‰å¯è§æ€§é—®é¢˜ï¼Œå­˜åœ¨åœ¨rptthreadå’Œæ‰§è¡Œstartæ–¹æ³•çº¿ç¨‹ä¹‹é—´ï¼Œrpté‡Œstartedï¼falseä¹‹åï¼Œå¦å¤–ä¸€ä¸ªçº¿ç¨‹ä¸èƒ½é©¬ä¸Šæ¥æ”¶åˆ°è¿™ä¸ªä¿¡æ¯ï¼Œå¯¼è‡´ä¸èƒ½æ­£å¸¸è¿›è¡Œä¸‹ä¸€æ¬¡rpttheadæ‰§è¡Œ","like_count":0,"discussions":[{"author":{"id":1621470,"avatar":"https://static001.geekbang.org/account/avatar/00/18/bd/de/e0c994b3.jpg","nickname":"ååœ°é“çš„ç¨‹åºå‘˜","note":"","ucode":"A04A239D173E2A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":7057,"discussion_content":"Doug Leaå¤§ç¥çš„Concurrent Programming in Javaä¸€ä¹¦ä¸­æœ‰è¿™æ ·ä¸€ä¸ªç‰‡æ®µæ¥æè¿°synchronizedè¿™ä¸ªå…³é”®å­—ï¼š\n \nè¿™é‡Œè‹±æ–‡å°±ä¸æ”¾å‡ºæ¥äº† å­—æ•°è¶…è¿‡ä¸¤åƒâ€¦â€¦\nè¿™ç¯‡æ–‡ç« ä¹Ÿæœ‰æåŠhttps://www.jianshu.com/p/3c06ffbf0d52\n \nç®€å•ç¿»è¯‘ä¸€ä¸‹ï¼šä»æœ¬è´¨ä¸Šæ¥è¯´ï¼Œå½“çº¿ç¨‹é‡Šæ”¾ä¸€ä¸ªé”æ—¶ä¼šå¼ºåˆ¶æ€§çš„å°†å·¥ä½œå†…å­˜ä¸­ä¹‹å‰æ‰€æœ‰çš„å†™æ“ä½œéƒ½åˆ·æ–°åˆ°ä¸»å†…å­˜ä¸­å»ï¼Œè€Œè·å–ä¸€ä¸ªé”åˆ™ä¼šå¼ºåˆ¶æ€§çš„åŠ è½½å¯è®¿é—®åˆ°çš„å€¼åˆ°çº¿ç¨‹å·¥ä½œå†…å­˜ä¸­æ¥ã€‚è™½ç„¶é”æ“ä½œåªå¯¹åŒæ­¥æ–¹æ³•å’ŒåŒæ­¥ä»£ç å—è¿™ä¸€å—èµ·åˆ°ä½œç”¨ï¼Œä½†æ˜¯å½±å“çš„å´æ˜¯çº¿ç¨‹æ‰§è¡Œæ“ä½œæ‰€ä½¿ç”¨çš„æ‰€æœ‰å­—æ®µã€‚\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567325933,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":97289,"user_name":"S","can_delete":false,"product_type":"c1","uid":1339720,"ip_address":"","ucode":"9B6B225657BD26","user_header":"https://static001.geekbang.org/account/avatar/00/14/71/48/e5570f84.jpg","comment_is_top":false,"comment_ctime":1558629744,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1558629744","product_id":100023901,"comment_content":"ä¸ºä»€ä¹ˆThread.sleep()ä¹‹åè¦é‡æ–°ä¸­æ–­è®¾ç½®æ ‡è¯†ä½?Thread.sleep()å°†ä¸­æ–­æ ‡è¯†ä½æ¸…é™¤äº†ä¹‹å,ä¸è®¾ç½®ä¸­æ–­æ ‡è¯†ä½ä¹Ÿä¸ä¼šå¯¹ä¸Šè¿°ä»£ç æœ‰ä»€ä¹ˆå½±å“å•Š","like_count":0},{"had_liked":false,"id":96195,"user_name":"WL","can_delete":false,"product_type":"c1","uid":1173771,"ip_address":"","ucode":"6277DCD776B87E","user_header":"https://static001.geekbang.org/account/avatar/00/11/e9/0b/1171ac71.jpg","comment_is_top":false,"comment_ctime":1558355272,"is_pvip":false,"replies":[{"id":"34429","content":"å®é™…åœºæ™¯éƒ½ä¸ä¼šè¿™ä¹ˆç®€å•","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1558357836,"ip_address":"","comment_id":96195,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1558355272","product_id":100023901,"comment_content":"è€å¸ˆè¯·é—®ä¸€ä¸‹å¯¹&quot;æ²¡æœ‰åŠæ³•ä¿è¯ç¬¬ä¸‰æ–¹ç±»åº“æ­£ç¡®å¤„ç†äº†çº¿ç¨‹çš„ä¸­æ–­å¼‚å¸¸&quot;è¿™å¥è¯æˆ‘ä¸æ˜¯å¾ˆç†è§£,  ä¾‹å­ä¸­çš„sleepæ–¹æ³•ä¸æ˜¯åœ¨æœ¬åœ°æ‰§è¡Œçš„å—, ä¸ºä»€ä¹ˆä¼šè·Ÿç¬¬ä¸‰æ–¹ç±»åº“æœ‰å…³ç³» ?","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":450762,"discussion_content":"å®é™…åœºæ™¯éƒ½ä¸ä¼šè¿™ä¹ˆç®€å•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558357836,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1079495,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/c7/083a3a0b.jpg","nickname":"æ–°ä¸–ç•Œ","note":"","ucode":"4473DC1505F158","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":549118,"discussion_content":"éš¾é“æ˜¯ç¬¬ä¸‰æ–¹ç±»åº“ä¸­æœ‰sleepæˆ–è€…waitğŸ˜‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643588787,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":96007,"user_name":"Liam","can_delete":false,"product_type":"c1","uid":1094597,"ip_address":"","ucode":"1D15D3B64F2606","user_header":"https://static001.geekbang.org/account/avatar/00/10/b3/c5/7fc124e2.jpg","comment_is_top":false,"comment_ctime":1558311711,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1558311711","product_id":100023901,"comment_content":"æ‰€ä»¥ä¼˜é›…åœæ­¢çº¿ç¨‹çš„å…³é”®åœ¨äºå¦‚ä½•ä¼˜é›…åœ°å¤„ç†ä¸­æ–­","like_count":0},{"had_liked":false,"id":96002,"user_name":"ææœªæ¥","can_delete":false,"product_type":"c1","uid":1034079,"ip_address":"","ucode":"4A339B35E3B419","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c7/5f/2028aae5.jpg","comment_is_top":false,"comment_ctime":1558309427,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1558309427","product_id":100023901,"comment_content":"æœ‰å¿…è¦ï¼Œä¿æŒå¯è§æ€§.","like_count":0},{"had_liked":false,"id":95749,"user_name":"å…”æ–¯åŸº","can_delete":false,"product_type":"c1","uid":1061320,"ip_address":"","ucode":"146A5FE2D8B301","user_header":"https://static001.geekbang.org/account/avatar/00/10/31/c8/a64e4aef.jpg","comment_is_top":false,"comment_ctime":1558164706,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1558164706","product_id":100023901,"comment_content":"æœ‰å¿…è¦ï¼Œé¡¹ç›®ä¸­å°±æ˜¯è¿™ä¹ˆè®¾ç½®çš„ï¼Œè¸©è¿‡ä¸€æ¬¡äº†å‘äº†","like_count":0},{"had_liked":false,"id":95734,"user_name":"ZOUå¿—ä¼Ÿ","can_delete":false,"product_type":"c1","uid":1029179,"ip_address":"","ucode":"439779871CC992","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b4/3b/a1f7e3a4.jpg","comment_is_top":false,"comment_ctime":1558152526,"is_pvip":false,"replies":[{"id":"34253","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1558168224,"ip_address":"","comment_id":95734,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1558152526","product_id":100023901,"comment_content":"æœ‰å¿…è¦ï¼Œstop()æ–¹æ³•æ‰§è¡Œåï¼Œè¯»terminatedçš„start()æ–¹æ³•è¦å†æ¬¡æ‰§è¡Œæ‰ä¼šå¯è§","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":450579,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558168224,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":95705,"user_name":"ack","can_delete":false,"product_type":"c1","uid":1440912,"ip_address":"","ucode":"69CA1233EEA8E2","user_header":"https://static001.geekbang.org/account/avatar/00/15/fc/90/c9df0459.jpg","comment_is_top":false,"comment_ctime":1558146192,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1558146192","product_id":100023901,"comment_content":"æœ‰å¿…è¦ï¼Œå‡è®¾ä¸åŠ volatileï¼Œ é‚£ä¹ˆåœ¨while (!terminated)æ—¶è¯»terminatedçš„å€¼å¯èƒ½ä¼šåœ¨stop()æ–¹æ³•ä¸­å†™terminatedå€¼ä¹‹å‰ï¼Œå¹¶ä¸”stop()æ–¹æ³•æ‰§è¡Œçš„çº¿ç¨‹Aå’Œåœ¨whileå¾ªç¯çš„çº¿ç¨‹Bæ˜¯ä¸åŒçš„ï¼Œä¹Ÿå°±æ˜¯è¯´éƒ½æœ‰è‡ªå·±å˜é‡å‰¯æœ¬ï¼ŒAçº¿ç¨‹åœ¨è‡ªå·±ç¼“å­˜è®¾ç½®å€¼åä¸çŸ¥é“ä»€ä¹ˆæ—¶å€™æ‰å†™å›å†…å­˜ï¼Œå¯èƒ½å¯¼è‡´ä¸­æ–­å»¶è¿Ÿã€‚","like_count":0},{"had_liked":false,"id":95701,"user_name":"å—åŒ—å°‘å¿","can_delete":false,"product_type":"c1","uid":1018958,"ip_address":"","ucode":"DFCC59F2BBD8CE","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8c/4e/b81969fa.jpg","comment_is_top":false,"comment_ctime":1558145866,"is_pvip":false,"replies":[{"id":"34252","content":"æœ‰å¿…è¦","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1558168153,"ip_address":"","comment_id":95701,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1558145866","product_id":100023901,"comment_content":"start() å’Œstop()éƒ½æ˜¯ä½¿ç”¨çš„åŒä¸€æŠŠé”thisï¼Œè¿™æ ·çš„è¯ï¼Œæ²¡å¿…è¦å†ç”¨volatileå£°æ˜isTerminatedäº†å§<br>","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":450563,"discussion_content":"æœ‰å¿…è¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558168153,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":95681,"user_name":"zero","can_delete":false,"product_type":"c1","uid":1299615,"ip_address":"","ucode":"528DD5C8399AEC","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKlwpFM3tkeG15YqyJTYWkfqkdmro9POq6SicYm57TaEFDOUZCXjoe0Z0Iz6UibGQqic3icJRsHdFzibtw/132","comment_is_top":false,"comment_ctime":1558141794,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1558141794","product_id":100023901,"comment_content":"æ˜¯æœ‰å¿…è¦çš„ï¼Œä¿è¯å¯è§æ€§","like_count":0},{"had_liked":false,"id":95674,"user_name":"é”¦","can_delete":false,"product_type":"c1","uid":1468298,"ip_address":"","ucode":"CB0EB4B68C468B","user_header":"https://static001.geekbang.org/account/avatar/00/16/67/8a/babd74dc.jpg","comment_is_top":false,"comment_ctime":1558140523,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1558140523","product_id":100023901,"comment_content":"æ‰“å¡ï¼Œæœ‰å¿…è¦","like_count":0},{"had_liked":false,"id":95659,"user_name":"Corner","can_delete":false,"product_type":"c1","uid":1446316,"ip_address":"","ucode":"7862D593172536","user_header":"https://static001.geekbang.org/account/avatar/00/16/11/ac/9cc5e692.jpg","comment_is_top":false,"comment_ctime":1558135106,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1558135106","product_id":100023901,"comment_content":"å¤šçº¿ç¨‹è¯»å†™å…±äº«å˜é‡ï¼Œä¿è¯å¯è§æ€§ä½¿ç”¨volitaleæ²¡æ¯›ç—…","like_count":0},{"had_liked":false,"id":95653,"user_name":"å¼ ä¸‰","can_delete":false,"product_type":"c1","uid":1004092,"ip_address":"","ucode":"1155528FAE1546","user_header":"https://static001.geekbang.org/account/avatar/00/0f/52/3c/d6fcb93a.jpg","comment_is_top":false,"comment_ctime":1558118121,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1558118121","product_id":100023901,"comment_content":"æ‰“å¡ï¼","like_count":0}]}