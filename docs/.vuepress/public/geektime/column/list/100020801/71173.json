{"id":71173,"title":"10 | MySQLä¸ºä»€ä¹ˆæœ‰æ—¶å€™ä¼šé€‰é”™ç´¢å¼•ï¼Ÿ","content":"<p>å‰é¢æˆ‘ä»¬ä»‹ç»è¿‡ç´¢å¼•ï¼Œä½ å·²ç»çŸ¥é“äº†åœ¨MySQLä¸­ä¸€å¼ è¡¨å…¶å®æ˜¯å¯ä»¥æ”¯æŒå¤šä¸ªç´¢å¼•çš„ã€‚ä½†æ˜¯ï¼Œä½ å†™SQLè¯­å¥çš„æ—¶å€™ï¼Œå¹¶æ²¡æœ‰ä¸»åŠ¨æŒ‡å®šä½¿ç”¨å“ªä¸ªç´¢å¼•ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½¿ç”¨å“ªä¸ªç´¢å¼•æ˜¯ç”±MySQLæ¥ç¡®å®šçš„ã€‚</p><p>ä¸çŸ¥é“ä½ æœ‰æ²¡æœ‰ç¢°åˆ°è¿‡è¿™ç§æƒ…å†µï¼Œä¸€æ¡æœ¬æ¥å¯ä»¥æ‰§è¡Œå¾—å¾ˆå¿«çš„è¯­å¥ï¼Œå´ç”±äºMySQLé€‰é”™äº†ç´¢å¼•ï¼Œè€Œå¯¼è‡´æ‰§è¡Œé€Ÿåº¦å˜å¾—å¾ˆæ…¢ï¼Ÿ</p><p>æˆ‘ä»¬ä¸€èµ·æ¥çœ‹ä¸€ä¸ªä¾‹å­å§ã€‚</p><p>æˆ‘ä»¬å…ˆå»ºä¸€ä¸ªç®€å•çš„è¡¨ï¼Œè¡¨é‡Œæœ‰aã€bä¸¤ä¸ªå­—æ®µï¼Œå¹¶åˆ†åˆ«å»ºä¸Šç´¢å¼•ï¼š</p><pre><code>CREATE TABLE `t` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `a` int(11) DEFAULT NULL,\n  `b` int(11) DEFAULT NULL,\n  PRIMARY KEY (`id`),\n  KEY `a` (`a`),\n  KEY `b` (`b`)\n) ENGINE=InnoDB;\n</code></pre><p>ç„¶åï¼Œæˆ‘ä»¬å¾€è¡¨tä¸­æ’å…¥10ä¸‡è¡Œè®°å½•ï¼Œå–å€¼æŒ‰æ•´æ•°é€’å¢ï¼Œå³ï¼š(1,1,1)ï¼Œ(2,2,2)ï¼Œ(3,3,3) ç›´åˆ°(100000,100000,100000)ã€‚</p><p>æˆ‘æ˜¯ç”¨å­˜å‚¨è¿‡ç¨‹æ¥æ’å…¥æ•°æ®çš„ï¼Œè¿™é‡Œæˆ‘è´´å‡ºæ¥æ–¹ä¾¿ä½ å¤ç°ï¼š</p><pre><code>delimiter ;;\ncreate procedure idata()\nbegin\n  declare i int;\n  set i=1;\n  while(i&lt;=100000)do\n    insert into t values(i, i, i);\n    set i=i+1;\n  end while;\nend;;\ndelimiter ;\ncall idata();\n</code></pre><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åˆ†æä¸€æ¡SQLè¯­å¥ï¼š</p><pre><code>mysql&gt; select * from t where a between 10000 and 20000;\n</code></pre><p>ä½ ä¸€å®šä¼šè¯´ï¼Œè¿™ä¸ªè¯­å¥è¿˜ç”¨åˆ†æå—ï¼Œå¾ˆç®€å•å‘€ï¼Œaä¸Šæœ‰ç´¢å¼•ï¼Œè‚¯å®šæ˜¯è¦ä½¿ç”¨ç´¢å¼•açš„ã€‚</p><p>ä½ è¯´å¾—æ²¡é”™ï¼Œå›¾1æ˜¾ç¤ºçš„å°±æ˜¯ä½¿ç”¨explainå‘½ä»¤çœ‹åˆ°çš„è¿™æ¡è¯­å¥çš„æ‰§è¡Œæƒ…å†µã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/2c/e3/2cfce769551c6eac9bfbee0563d48fe3.png?wh=1743*159\" alt=\"\"></p><center><span class=\"reference\">å›¾1 ä½¿ç”¨explainå‘½ä»¤æŸ¥çœ‹è¯­å¥æ‰§è¡Œæƒ…å†µ</span></center><p>ä»å›¾1çœ‹ä¸Šå»ï¼Œè¿™æ¡æŸ¥è¯¢è¯­å¥çš„æ‰§è¡Œä¹Ÿç¡®å®ç¬¦åˆé¢„æœŸï¼Œkeyè¿™ä¸ªå­—æ®µå€¼æ˜¯â€™aâ€™ï¼Œè¡¨ç¤ºä¼˜åŒ–å™¨é€‰æ‹©äº†ç´¢å¼•aã€‚</p><p>ä¸è¿‡åˆ«æ€¥ï¼Œè¿™ä¸ªæ¡ˆä¾‹ä¸ä¼šè¿™ä¹ˆç®€å•ã€‚åœ¨æˆ‘ä»¬å·²ç»å‡†å¤‡å¥½çš„åŒ…å«äº†10ä¸‡è¡Œæ•°æ®çš„è¡¨ä¸Šï¼Œæˆ‘ä»¬å†åšå¦‚ä¸‹æ“ä½œã€‚</p><!-- [[[read_end]]] --><p><img src=\"https://static001.geekbang.org/resource/image/1e/1e/1e5ba1c2934d3b2c0d96b210a27e1a1e.png?wh=936*344\" alt=\"\"></p><center><span class=\"reference\">å›¾2 session Aå’Œsession Bçš„æ‰§è¡Œæµç¨‹</span></center><p>è¿™é‡Œï¼Œsession Açš„æ“ä½œä½ å·²ç»å¾ˆç†Ÿæ‚‰äº†ï¼Œå®ƒå°±æ˜¯å¼€å¯äº†ä¸€ä¸ªäº‹åŠ¡ã€‚éšåï¼Œsession BæŠŠæ•°æ®éƒ½åˆ é™¤åï¼Œåˆè°ƒç”¨äº† idataè¿™ä¸ªå­˜å‚¨è¿‡ç¨‹ï¼Œæ’å…¥äº†10ä¸‡è¡Œæ•°æ®ã€‚</p><p>è¿™æ—¶å€™ï¼Œsession Bçš„æŸ¥è¯¢è¯­å¥select * from t where a between 10000 and 20000å°±ä¸ä¼šå†é€‰æ‹©ç´¢å¼•aäº†ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡æ…¢æŸ¥è¯¢æ—¥å¿—ï¼ˆslow logï¼‰æ¥æŸ¥çœ‹ä¸€ä¸‹å…·ä½“çš„æ‰§è¡Œæƒ…å†µã€‚</p><p>ä¸ºäº†è¯´æ˜ä¼˜åŒ–å™¨é€‰æ‹©çš„ç»“æœæ˜¯å¦æ­£ç¡®ï¼Œæˆ‘å¢åŠ äº†ä¸€ä¸ªå¯¹ç…§ï¼Œå³ï¼šä½¿ç”¨force index(a)æ¥è®©ä¼˜åŒ–å™¨å¼ºåˆ¶ä½¿ç”¨ç´¢å¼•aï¼ˆè¿™éƒ¨åˆ†å†…å®¹ï¼Œæˆ‘è¿˜ä¼šåœ¨è¿™ç¯‡æ–‡ç« çš„ååŠéƒ¨åˆ†ä¸­æåˆ°ï¼‰ã€‚</p><p>ä¸‹é¢çš„ä¸‰æ¡SQLè¯­å¥ï¼Œå°±æ˜¯è¿™ä¸ªå®éªŒè¿‡ç¨‹ã€‚</p><pre><code>set long_query_time=0;\nselect * from t where a between 10000 and 20000; /*Q1*/\nselect * from t force index(a) where a between 10000 and 20000;/*Q2*/\n</code></pre><ul>\n<li>ç¬¬ä¸€å¥ï¼Œæ˜¯å°†æ…¢æŸ¥è¯¢æ—¥å¿—çš„é˜ˆå€¼è®¾ç½®ä¸º0ï¼Œè¡¨ç¤ºè¿™ä¸ªçº¿ç¨‹æ¥ä¸‹æ¥çš„è¯­å¥éƒ½ä¼šè¢«è®°å½•å…¥æ…¢æŸ¥è¯¢æ—¥å¿—ä¸­ï¼›</li>\n<li>ç¬¬äºŒå¥ï¼ŒQ1æ˜¯session BåŸæ¥çš„æŸ¥è¯¢ï¼›</li>\n<li>ç¬¬ä¸‰å¥ï¼ŒQ2æ˜¯åŠ äº†force index(a)æ¥å’Œsession BåŸæ¥çš„æŸ¥è¯¢è¯­å¥æ‰§è¡Œæƒ…å†µå¯¹æ¯”ã€‚</li>\n</ul><p>å¦‚å›¾3æ‰€ç¤ºæ˜¯è¿™ä¸‰æ¡SQLè¯­å¥æ‰§è¡Œå®Œæˆåçš„æ…¢æŸ¥è¯¢æ—¥å¿—ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/7c/f6/7c58b9c71853b8bba1a8ad5e926de1f6.png?wh=1221*325\" alt=\"\"></p><center><span class=\"reference\">å›¾3 slow logç»“æœ</span></center><p>å¯ä»¥çœ‹åˆ°ï¼ŒQ1æ‰«æäº†10ä¸‡è¡Œï¼Œæ˜¾ç„¶æ˜¯èµ°äº†å…¨è¡¨æ‰«æï¼Œæ‰§è¡Œæ—¶é—´æ˜¯40æ¯«ç§’ã€‚Q2æ‰«æäº†10001è¡Œï¼Œæ‰§è¡Œäº†21æ¯«ç§’ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬åœ¨æ²¡æœ‰ä½¿ç”¨force indexçš„æ—¶å€™ï¼ŒMySQLç”¨é”™äº†ç´¢å¼•ï¼Œå¯¼è‡´äº†æ›´é•¿çš„æ‰§è¡Œæ—¶é—´ã€‚</p><p>è¿™ä¸ªä¾‹å­å¯¹åº”çš„æ˜¯æˆ‘ä»¬å¹³å¸¸ä¸æ–­åœ°åˆ é™¤å†å²æ•°æ®å’Œæ–°å¢æ•°æ®çš„åœºæ™¯ã€‚è¿™æ—¶ï¼ŒMySQLç«Ÿç„¶ä¼šé€‰é”™ç´¢å¼•ï¼Œæ˜¯ä¸æ˜¯æœ‰ç‚¹å¥‡æ€ªå‘¢ï¼Ÿä»Šå¤©ï¼Œæˆ‘ä»¬å°±ä»è¿™ä¸ªå¥‡æ€ªçš„ç»“æœè¯´èµ·å§ã€‚</p><h1>ä¼˜åŒ–å™¨çš„é€»è¾‘</h1><p>åœ¨ç¬¬ä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°±æåˆ°è¿‡ï¼Œé€‰æ‹©ç´¢å¼•æ˜¯ä¼˜åŒ–å™¨çš„å·¥ä½œã€‚</p><p>è€Œä¼˜åŒ–å™¨é€‰æ‹©ç´¢å¼•çš„ç›®çš„ï¼Œæ˜¯æ‰¾åˆ°ä¸€ä¸ªæœ€ä¼˜çš„æ‰§è¡Œæ–¹æ¡ˆï¼Œå¹¶ç”¨æœ€å°çš„ä»£ä»·å»æ‰§è¡Œè¯­å¥ã€‚åœ¨æ•°æ®åº“é‡Œé¢ï¼Œæ‰«æè¡Œæ•°æ˜¯å½±å“æ‰§è¡Œä»£ä»·çš„å› ç´ ä¹‹ä¸€ã€‚æ‰«æçš„è¡Œæ•°è¶Šå°‘ï¼Œæ„å‘³ç€è®¿é—®ç£ç›˜æ•°æ®çš„æ¬¡æ•°è¶Šå°‘ï¼Œæ¶ˆè€—çš„CPUèµ„æºè¶Šå°‘ã€‚</p><p>å½“ç„¶ï¼Œæ‰«æè¡Œæ•°å¹¶ä¸æ˜¯å”¯ä¸€çš„åˆ¤æ–­æ ‡å‡†ï¼Œä¼˜åŒ–å™¨è¿˜ä¼šç»“åˆæ˜¯å¦ä½¿ç”¨ä¸´æ—¶è¡¨ã€æ˜¯å¦æ’åºç­‰å› ç´ è¿›è¡Œç»¼åˆåˆ¤æ–­ã€‚</p><p>æˆ‘ä»¬è¿™ä¸ªç®€å•çš„æŸ¥è¯¢è¯­å¥å¹¶æ²¡æœ‰æ¶‰åŠåˆ°ä¸´æ—¶è¡¨å’Œæ’åºï¼Œæ‰€ä»¥MySQLé€‰é”™ç´¢å¼•è‚¯å®šæ˜¯åœ¨åˆ¤æ–­æ‰«æè¡Œæ•°çš„æ—¶å€™å‡ºé—®é¢˜äº†ã€‚</p><p>é‚£ä¹ˆï¼Œé—®é¢˜å°±æ˜¯ï¼š<strong>æ‰«æè¡Œæ•°æ˜¯æ€ä¹ˆåˆ¤æ–­çš„ï¼Ÿ</strong></p><p>MySQLåœ¨çœŸæ­£å¼€å§‹æ‰§è¡Œè¯­å¥ä¹‹å‰ï¼Œå¹¶ä¸èƒ½ç²¾ç¡®åœ°çŸ¥é“æ»¡è¶³è¿™ä¸ªæ¡ä»¶çš„è®°å½•æœ‰å¤šå°‘æ¡ï¼Œè€Œåªèƒ½æ ¹æ®ç»Ÿè®¡ä¿¡æ¯æ¥ä¼°ç®—è®°å½•æ•°ã€‚</p><p>è¿™ä¸ªç»Ÿè®¡ä¿¡æ¯å°±æ˜¯ç´¢å¼•çš„â€œåŒºåˆ†åº¦â€ã€‚æ˜¾ç„¶ï¼Œä¸€ä¸ªç´¢å¼•ä¸Šä¸åŒçš„å€¼è¶Šå¤šï¼Œè¿™ä¸ªç´¢å¼•çš„åŒºåˆ†åº¦å°±è¶Šå¥½ã€‚è€Œä¸€ä¸ªç´¢å¼•ä¸Šä¸åŒçš„å€¼çš„ä¸ªæ•°ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºâ€œåŸºæ•°â€ï¼ˆcardinalityï¼‰ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸ªåŸºæ•°è¶Šå¤§ï¼Œç´¢å¼•çš„åŒºåˆ†åº¦è¶Šå¥½ã€‚</p><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨show indexæ–¹æ³•ï¼Œçœ‹åˆ°ä¸€ä¸ªç´¢å¼•çš„åŸºæ•°ã€‚å¦‚å›¾4æ‰€ç¤ºï¼Œå°±æ˜¯è¡¨tçš„show index çš„ç»“æœ ã€‚è™½ç„¶è¿™ä¸ªè¡¨çš„æ¯ä¸€è¡Œçš„ä¸‰ä¸ªå­—æ®µå€¼éƒ½æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯åœ¨ç»Ÿè®¡ä¿¡æ¯ä¸­ï¼Œè¿™ä¸‰ä¸ªç´¢å¼•çš„åŸºæ•°å€¼å¹¶ä¸åŒï¼Œè€Œä¸”å…¶å®éƒ½ä¸å‡†ç¡®ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/16/d4/16dbf8124ad529fec0066950446079d4.png?wh=1850*209\" alt=\"\"></p><center><span class=\"reference\">å›¾4 è¡¨tçš„show index ç»“æœ</span></center><p>é‚£ä¹ˆï¼Œ<strong>MySQLæ˜¯æ€æ ·å¾—åˆ°ç´¢å¼•çš„åŸºæ•°çš„å‘¢ï¼Ÿ</strong>è¿™é‡Œï¼Œæˆ‘ç»™ä½ ç®€å•ä»‹ç»ä¸€ä¸‹MySQLé‡‡æ ·ç»Ÿè®¡çš„æ–¹æ³•ã€‚</p><p>ä¸ºä»€ä¹ˆè¦é‡‡æ ·ç»Ÿè®¡å‘¢ï¼Ÿå› ä¸ºæŠŠæ•´å¼ è¡¨å–å‡ºæ¥ä¸€è¡Œè¡Œç»Ÿè®¡ï¼Œè™½ç„¶å¯ä»¥å¾—åˆ°ç²¾ç¡®çš„ç»“æœï¼Œä½†æ˜¯ä»£ä»·å¤ªé«˜äº†ï¼Œæ‰€ä»¥åªèƒ½é€‰æ‹©â€œé‡‡æ ·ç»Ÿè®¡â€ã€‚</p><p>é‡‡æ ·ç»Ÿè®¡çš„æ—¶å€™ï¼ŒInnoDBé»˜è®¤ä¼šé€‰æ‹©Nä¸ªæ•°æ®é¡µï¼Œç»Ÿè®¡è¿™äº›é¡µé¢ä¸Šçš„ä¸åŒå€¼ï¼Œå¾—åˆ°ä¸€ä¸ªå¹³å‡å€¼ï¼Œç„¶åä¹˜ä»¥è¿™ä¸ªç´¢å¼•çš„é¡µé¢æ•°ï¼Œå°±å¾—åˆ°äº†è¿™ä¸ªç´¢å¼•çš„åŸºæ•°ã€‚</p><p>è€Œæ•°æ®è¡¨æ˜¯ä¼šæŒç»­æ›´æ–°çš„ï¼Œç´¢å¼•ç»Ÿè®¡ä¿¡æ¯ä¹Ÿä¸ä¼šå›ºå®šä¸å˜ã€‚æ‰€ä»¥ï¼Œå½“å˜æ›´çš„æ•°æ®è¡Œæ•°è¶…è¿‡1/Mçš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨è§¦å‘é‡æ–°åšä¸€æ¬¡ç´¢å¼•ç»Ÿè®¡ã€‚</p><p>åœ¨MySQLä¸­ï¼Œæœ‰ä¸¤ç§å­˜å‚¨ç´¢å¼•ç»Ÿè®¡çš„æ–¹å¼ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®å‚æ•°innodb_stats_persistentçš„å€¼æ¥é€‰æ‹©ï¼š</p><ul>\n<li>è®¾ç½®ä¸ºonçš„æ—¶å€™ï¼Œè¡¨ç¤ºç»Ÿè®¡ä¿¡æ¯ä¼šæŒä¹…åŒ–å­˜å‚¨ã€‚è¿™æ—¶ï¼Œé»˜è®¤çš„Næ˜¯20ï¼ŒMæ˜¯10ã€‚</li>\n<li>è®¾ç½®ä¸ºoffçš„æ—¶å€™ï¼Œè¡¨ç¤ºç»Ÿè®¡ä¿¡æ¯åªå­˜å‚¨åœ¨å†…å­˜ä¸­ã€‚è¿™æ—¶ï¼Œé»˜è®¤çš„Næ˜¯8ï¼ŒMæ˜¯16ã€‚</li>\n</ul><p>ç”±äºæ˜¯é‡‡æ ·ç»Ÿè®¡ï¼Œæ‰€ä»¥ä¸ç®¡Næ˜¯20è¿˜æ˜¯8ï¼Œè¿™ä¸ªåŸºæ•°éƒ½æ˜¯å¾ˆå®¹æ˜“ä¸å‡†çš„ã€‚</p><p>ä½†ï¼Œè¿™è¿˜ä¸æ˜¯å…¨éƒ¨ã€‚</p><p>ä½ å¯ä»¥ä»å›¾4ä¸­çœ‹åˆ°ï¼Œè¿™æ¬¡çš„ç´¢å¼•ç»Ÿè®¡å€¼ï¼ˆcardinalityåˆ—ï¼‰è™½ç„¶ä¸å¤Ÿç²¾ç¡®ï¼Œä½†å¤§ä½“ä¸Šè¿˜æ˜¯å·®ä¸å¤šçš„ï¼Œé€‰é”™ç´¢å¼•ä¸€å®šè¿˜æœ‰åˆ«çš„åŸå› ã€‚</p><p>å…¶å®ç´¢å¼•ç»Ÿè®¡åªæ˜¯ä¸€ä¸ªè¾“å…¥ï¼Œå¯¹äºä¸€ä¸ªå…·ä½“çš„è¯­å¥æ¥è¯´ï¼Œä¼˜åŒ–å™¨è¿˜è¦åˆ¤æ–­ï¼Œæ‰§è¡Œè¿™ä¸ªè¯­å¥æœ¬èº«è¦æ‰«æå¤šå°‘è¡Œã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å†ä¸€èµ·çœ‹çœ‹ä¼˜åŒ–å™¨é¢„ä¼°çš„ï¼Œè¿™ä¸¤ä¸ªè¯­å¥çš„æ‰«æè¡Œæ•°æ˜¯å¤šå°‘ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/e2/89/e2bc5f120858391d4accff05573e1289.png?wh=1606*382\" alt=\"\"></p><center><span class=\"reference\">å›¾5 æ„å¤–çš„explainç»“æœ</span></center><p>rowsè¿™ä¸ªå­—æ®µè¡¨ç¤ºçš„æ˜¯é¢„è®¡æ‰«æè¡Œæ•°ã€‚</p><p>å…¶ä¸­ï¼ŒQ1çš„ç»“æœè¿˜æ˜¯ç¬¦åˆé¢„æœŸçš„ï¼Œrowsçš„å€¼æ˜¯104620ï¼›ä½†æ˜¯Q2çš„rowså€¼æ˜¯37116ï¼Œåå·®å°±å¤§äº†ã€‚è€Œå›¾1ä¸­æˆ‘ä»¬ç”¨explainå‘½ä»¤çœ‹åˆ°çš„rowsæ˜¯åªæœ‰10001è¡Œï¼Œæ˜¯è¿™ä¸ªåå·®è¯¯å¯¼äº†ä¼˜åŒ–å™¨çš„åˆ¤æ–­ã€‚</p><p>åˆ°è¿™é‡Œï¼Œå¯èƒ½ä½ çš„ç¬¬ä¸€ä¸ªç–‘é—®ä¸æ˜¯ä¸ºä»€ä¹ˆä¸å‡†ï¼Œè€Œæ˜¯ä¼˜åŒ–å™¨ä¸ºä»€ä¹ˆæ”¾ç€æ‰«æ37000è¡Œçš„æ‰§è¡Œè®¡åˆ’ä¸ç”¨ï¼Œå´é€‰æ‹©äº†æ‰«æè¡Œæ•°æ˜¯100000çš„æ‰§è¡Œè®¡åˆ’å‘¢ï¼Ÿ</p><p>è¿™æ˜¯å› ä¸ºï¼Œå¦‚æœä½¿ç”¨ç´¢å¼•aï¼Œæ¯æ¬¡ä»ç´¢å¼•aä¸Šæ‹¿åˆ°ä¸€ä¸ªå€¼ï¼Œéƒ½è¦å›åˆ°ä¸»é”®ç´¢å¼•ä¸ŠæŸ¥å‡ºæ•´è¡Œæ•°æ®ï¼Œè¿™ä¸ªä»£ä»·ä¼˜åŒ–å™¨ä¹Ÿè¦ç®—è¿›å»çš„ã€‚</p><p>è€Œå¦‚æœé€‰æ‹©æ‰«æ10ä¸‡è¡Œï¼Œæ˜¯ç›´æ¥åœ¨ä¸»é”®ç´¢å¼•ä¸Šæ‰«æçš„ï¼Œæ²¡æœ‰é¢å¤–çš„ä»£ä»·ã€‚</p><p>ä¼˜åŒ–å™¨ä¼šä¼°ç®—è¿™ä¸¤ä¸ªé€‰æ‹©çš„ä»£ä»·ï¼Œä»ç»“æœçœ‹æ¥ï¼Œä¼˜åŒ–å™¨è®¤ä¸ºç›´æ¥æ‰«æä¸»é”®ç´¢å¼•æ›´å¿«ã€‚å½“ç„¶ï¼Œä»æ‰§è¡Œæ—¶é—´çœ‹æ¥ï¼Œè¿™ä¸ªé€‰æ‹©å¹¶ä¸æ˜¯æœ€ä¼˜çš„ã€‚</p><p>ä½¿ç”¨æ™®é€šç´¢å¼•éœ€è¦æŠŠå›è¡¨çš„ä»£ä»·ç®—è¿›å»ï¼Œåœ¨å›¾1æ‰§è¡Œexplainçš„æ—¶å€™ï¼Œä¹Ÿè€ƒè™‘äº†è¿™ä¸ªç­–ç•¥çš„ä»£ä»· ï¼Œä½†å›¾1çš„é€‰æ‹©æ˜¯å¯¹çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸ªç­–ç•¥å¹¶æ²¡æœ‰é—®é¢˜ã€‚</p><p>æ‰€ä»¥å†¤æœ‰å¤´å€ºæœ‰ä¸»ï¼ŒMySQLé€‰é”™ç´¢å¼•ï¼Œè¿™ä»¶äº‹å„¿è¿˜å¾—å½’å’åˆ°æ²¡èƒ½å‡†ç¡®åœ°åˆ¤æ–­å‡ºæ‰«æè¡Œæ•°ã€‚è‡³äºä¸ºä»€ä¹ˆä¼šå¾—åˆ°é”™è¯¯çš„æ‰«æè¡Œæ•°ï¼Œè¿™ä¸ªåŸå› å°±ä½œä¸ºè¯¾åé—®é¢˜ï¼Œç•™ç»™ä½ å»åˆ†æäº†ã€‚</p><p>æ—¢ç„¶æ˜¯ç»Ÿè®¡ä¿¡æ¯ä¸å¯¹ï¼Œé‚£å°±ä¿®æ­£ã€‚analyze table t å‘½ä»¤ï¼Œå¯ä»¥ç”¨æ¥é‡æ–°ç»Ÿè®¡ç´¢å¼•ä¿¡æ¯ã€‚æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹æ‰§è¡Œæ•ˆæœã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/20/9c/209e9d3514688a3bcabbb75e54e1e49c.png?wh=1736*397\" alt=\"\"></p><center><span class=\"reference\">å›¾6 æ‰§è¡Œanalyze table t å‘½ä»¤æ¢å¤çš„explainç»“æœ</span></center><p>è¿™å›å¯¹äº†ã€‚</p><p>æ‰€ä»¥åœ¨å®è·µä¸­ï¼Œå¦‚æœä½ å‘ç°explainçš„ç»“æœé¢„ä¼°çš„rowså€¼è·Ÿå®é™…æƒ…å†µå·®è·æ¯”è¾ƒå¤§ï¼Œå¯ä»¥é‡‡ç”¨è¿™ä¸ªæ–¹æ³•æ¥å¤„ç†ã€‚</p><p>å…¶å®ï¼Œå¦‚æœåªæ˜¯ç´¢å¼•ç»Ÿè®¡ä¸å‡†ç¡®ï¼Œé€šè¿‡analyzeå‘½ä»¤å¯ä»¥è§£å†³å¾ˆå¤šé—®é¢˜ï¼Œä½†æ˜¯å‰é¢æˆ‘ä»¬è¯´äº†ï¼Œä¼˜åŒ–å™¨å¯ä¸æ­¢æ˜¯çœ‹æ‰«æè¡Œæ•°ã€‚</p><p>ä¾ç„¶æ˜¯åŸºäºè¿™ä¸ªè¡¨tï¼Œæˆ‘ä»¬çœ‹çœ‹å¦å¤–ä¸€ä¸ªè¯­å¥ï¼š</p><pre><code>mysql&gt; select * from t where (a between 1 and 1000)  and (b between 50000 and 100000) order by b limit 1;\n</code></pre><p>ä»æ¡ä»¶ä¸Šçœ‹ï¼Œè¿™ä¸ªæŸ¥è¯¢æ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„è®°å½•ï¼Œå› æ­¤ä¼šè¿”å›ç©ºé›†åˆã€‚</p><p>åœ¨å¼€å§‹æ‰§è¡Œè¿™æ¡è¯­å¥ä¹‹å‰ï¼Œä½ å¯ä»¥å…ˆè®¾æƒ³ä¸€ä¸‹ï¼Œå¦‚æœä½ æ¥é€‰æ‹©ç´¢å¼•ï¼Œä¼šé€‰æ‹©å“ªä¸€ä¸ªå‘¢ï¼Ÿ</p><p>ä¸ºäº†ä¾¿äºåˆ†æï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹aã€bè¿™ä¸¤ä¸ªç´¢å¼•çš„ç»“æ„å›¾ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/1d/b9/1d037f92063e800c3bfff3f4dbf1a2b9.png?wh=1142*856\" alt=\"\"></p><center><span class=\"reference\">å›¾7 aã€bç´¢å¼•çš„ç»“æ„å›¾</span></center><p>å¦‚æœä½¿ç”¨ç´¢å¼•aè¿›è¡ŒæŸ¥è¯¢ï¼Œé‚£ä¹ˆå°±æ˜¯æ‰«æç´¢å¼•açš„å‰1000ä¸ªå€¼ï¼Œç„¶åå–åˆ°å¯¹åº”çš„idï¼Œå†åˆ°ä¸»é”®ç´¢å¼•ä¸Šå»æŸ¥å‡ºæ¯ä¸€è¡Œï¼Œç„¶åæ ¹æ®å­—æ®µbæ¥è¿‡æ»¤ã€‚æ˜¾ç„¶è¿™æ ·éœ€è¦æ‰«æ1000è¡Œã€‚</p><p>å¦‚æœä½¿ç”¨ç´¢å¼•bè¿›è¡ŒæŸ¥è¯¢ï¼Œé‚£ä¹ˆå°±æ˜¯æ‰«æç´¢å¼•bçš„æœ€å50001ä¸ªå€¼ï¼Œä¸ä¸Šé¢çš„æ‰§è¡Œè¿‡ç¨‹ç›¸åŒï¼Œä¹Ÿæ˜¯éœ€è¦å›åˆ°ä¸»é”®ç´¢å¼•ä¸Šå–å€¼å†åˆ¤æ–­ï¼Œæ‰€ä»¥éœ€è¦æ‰«æ50001è¡Œã€‚</p><p>æ‰€ä»¥ä½ ä¸€å®šä¼šæƒ³ï¼Œå¦‚æœä½¿ç”¨ç´¢å¼•açš„è¯ï¼Œæ‰§è¡Œé€Ÿåº¦æ˜æ˜¾ä¼šå¿«å¾ˆå¤šã€‚é‚£ä¹ˆï¼Œä¸‹é¢æˆ‘ä»¬å°±æ¥çœ‹çœ‹åˆ°åº•æ˜¯ä¸æ˜¯è¿™ä¹ˆä¸€å›äº‹å„¿ã€‚</p><p>å›¾8æ˜¯æ‰§è¡Œexplainçš„ç»“æœã€‚</p><pre><code>mysql&gt; explain select * from t where (a between 1 and 1000) and (b between 50000 and 100000) order by b limit 1;\n</code></pre><p><img src=\"https://static001.geekbang.org/resource/image/48/b8/483bcb1ef3bb902844e80d9cbdd73ab8.png?wh=1891*163\" alt=\"\"></p><center><span class=\"reference\">å›¾8 ä½¿ç”¨explainæ–¹æ³•æŸ¥çœ‹æ‰§è¡Œè®¡åˆ’ 2</span></center><p>å¯ä»¥çœ‹åˆ°ï¼Œè¿”å›ç»“æœä¸­keyå­—æ®µæ˜¾ç¤ºï¼Œè¿™æ¬¡ä¼˜åŒ–å™¨é€‰æ‹©äº†ç´¢å¼•bï¼Œè€Œrowså­—æ®µæ˜¾ç¤ºéœ€è¦æ‰«æçš„è¡Œæ•°æ˜¯50198ã€‚</p><p>ä»è¿™ä¸ªç»“æœä¸­ï¼Œä½ å¯ä»¥å¾—åˆ°ä¸¤ä¸ªç»“è®ºï¼š</p><ol>\n<li>\n<p>æ‰«æè¡Œæ•°çš„ä¼°è®¡å€¼ä¾ç„¶ä¸å‡†ç¡®ï¼›</p>\n</li>\n<li>\n<p>è¿™ä¸ªä¾‹å­é‡ŒMySQLåˆé€‰é”™äº†ç´¢å¼•ã€‚</p>\n</li>\n</ol><h1>ç´¢å¼•é€‰æ‹©å¼‚å¸¸å’Œå¤„ç†</h1><p>å…¶å®å¤§å¤šæ•°æ—¶å€™ä¼˜åŒ–å™¨éƒ½èƒ½æ‰¾åˆ°æ­£ç¡®çš„ç´¢å¼•ï¼Œä½†å¶å°”ä½ è¿˜æ˜¯ä¼šç¢°åˆ°æˆ‘ä»¬ä¸Šé¢ä¸¾ä¾‹çš„è¿™ä¸¤ç§æƒ…å†µï¼šåŸæœ¬å¯ä»¥æ‰§è¡Œå¾—å¾ˆå¿«çš„SQLè¯­å¥ï¼Œæ‰§è¡Œé€Ÿåº¦å´æ¯”ä½ é¢„æœŸçš„æ…¢å¾ˆå¤šï¼Œä½ åº”è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ</p><p><strong>ä¸€ç§æ–¹æ³•æ˜¯ï¼Œåƒæˆ‘ä»¬ç¬¬ä¸€ä¸ªä¾‹å­ä¸€æ ·ï¼Œé‡‡ç”¨force indexå¼ºè¡Œé€‰æ‹©ä¸€ä¸ªç´¢å¼•ã€‚</strong>MySQLä¼šæ ¹æ®è¯æ³•è§£æçš„ç»“æœåˆ†æå‡ºå¯èƒ½å¯ä»¥ä½¿ç”¨çš„ç´¢å¼•ä½œä¸ºå€™é€‰é¡¹ï¼Œç„¶ååœ¨å€™é€‰åˆ—è¡¨ä¸­ä¾æ¬¡åˆ¤æ–­æ¯ä¸ªç´¢å¼•éœ€è¦æ‰«æå¤šå°‘è¡Œã€‚å¦‚æœforce indexæŒ‡å®šçš„ç´¢å¼•åœ¨å€™é€‰ç´¢å¼•åˆ—è¡¨ä¸­ï¼Œå°±ç›´æ¥é€‰æ‹©è¿™ä¸ªç´¢å¼•ï¼Œä¸å†è¯„ä¼°å…¶ä»–ç´¢å¼•çš„æ‰§è¡Œä»£ä»·ã€‚</p><p>æˆ‘ä»¬æ¥çœ‹çœ‹ç¬¬äºŒä¸ªä¾‹å­ã€‚åˆšå¼€å§‹åˆ†ææ—¶ï¼Œæˆ‘ä»¬è®¤ä¸ºé€‰æ‹©ç´¢å¼•aä¼šæ›´å¥½ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬å°±æ¥çœ‹çœ‹æ‰§è¡Œæ•ˆæœï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/95/54/9582401a6bed6cb8fd803c9555750b54.png?wh=1235*115\" alt=\"\"></p><center><span class=\"reference\">å›¾9 ä½¿ç”¨ä¸åŒç´¢å¼•çš„è¯­å¥æ‰§è¡Œè€—æ—¶</span></center><p>å¯ä»¥çœ‹åˆ°ï¼ŒåŸæœ¬è¯­å¥éœ€è¦æ‰§è¡Œ2.23ç§’ï¼Œè€Œå½“ä½ ä½¿ç”¨force index(a)çš„æ—¶å€™ï¼Œåªç”¨äº†0.05ç§’ï¼Œæ¯”ä¼˜åŒ–å™¨çš„é€‰æ‹©å¿«äº†40å¤šå€ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œä¼˜åŒ–å™¨æ²¡æœ‰é€‰æ‹©æ­£ç¡®çš„ç´¢å¼•ï¼Œforce indexèµ·åˆ°äº†â€œçŸ«æ­£â€çš„ä½œç”¨ã€‚</p><p>ä¸è¿‡å¾ˆå¤šç¨‹åºå‘˜ä¸å–œæ¬¢ä½¿ç”¨force indexï¼Œä¸€æ¥è¿™ä¹ˆå†™ä¸ä¼˜ç¾ï¼ŒäºŒæ¥å¦‚æœç´¢å¼•æ”¹äº†åå­—ï¼Œè¿™ä¸ªè¯­å¥ä¹Ÿå¾—æ”¹ï¼Œæ˜¾å¾—å¾ˆéº»çƒ¦ã€‚è€Œä¸”å¦‚æœä»¥åè¿ç§»åˆ°åˆ«çš„æ•°æ®åº“çš„è¯ï¼Œè¿™ä¸ªè¯­æ³•è¿˜å¯èƒ½ä¼šä¸å…¼å®¹ã€‚</p><p>ä½†å…¶å®ä½¿ç”¨force indexæœ€ä¸»è¦çš„é—®é¢˜è¿˜æ˜¯å˜æ›´çš„åŠæ—¶æ€§ã€‚å› ä¸ºé€‰é”™ç´¢å¼•çš„æƒ…å†µè¿˜æ˜¯æ¯”è¾ƒå°‘å‡ºç°çš„ï¼Œæ‰€ä»¥å¼€å‘çš„æ—¶å€™é€šå¸¸ä¸ä¼šå…ˆå†™ä¸Šforce indexã€‚è€Œæ˜¯ç­‰åˆ°çº¿ä¸Šå‡ºç°é—®é¢˜çš„æ—¶å€™ï¼Œä½ æ‰ä¼šå†å»ä¿®æ”¹SQLè¯­å¥ã€åŠ ä¸Šforce indexã€‚ä½†æ˜¯ä¿®æ”¹ä¹‹åè¿˜è¦æµ‹è¯•å’Œå‘å¸ƒï¼Œå¯¹äºç”Ÿäº§ç³»ç»Ÿæ¥è¯´ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸å¤Ÿæ•æ·ã€‚</p><p>æ‰€ä»¥ï¼Œæ•°æ®åº“çš„é—®é¢˜æœ€å¥½è¿˜æ˜¯åœ¨æ•°æ®åº“å†…éƒ¨æ¥è§£å†³ã€‚é‚£ä¹ˆï¼Œåœ¨æ•°æ®åº“é‡Œé¢è¯¥æ€æ ·è§£å†³å‘¢ï¼Ÿ</p><p>æ—¢ç„¶ä¼˜åŒ–å™¨æ”¾å¼ƒäº†ä½¿ç”¨ç´¢å¼•aï¼Œè¯´æ˜aè¿˜ä¸å¤Ÿåˆé€‚ï¼Œæ‰€ä»¥<strong>ç¬¬äºŒç§æ–¹æ³•å°±æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘ä¿®æ”¹è¯­å¥ï¼Œå¼•å¯¼MySQLä½¿ç”¨æˆ‘ä»¬æœŸæœ›çš„ç´¢å¼•ã€‚</strong>æ¯”å¦‚ï¼Œåœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œæ˜¾ç„¶æŠŠâ€œorder by b limit 1â€ æ”¹æˆ â€œorder by b,a limit 1â€ ï¼Œè¯­ä¹‰çš„é€»è¾‘æ˜¯ç›¸åŒçš„ã€‚</p><p>æˆ‘ä»¬æ¥çœ‹çœ‹æ”¹ä¹‹åçš„æ•ˆæœï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/14/94/14cd598e52a2b72dd334a42603e5b894.png?wh=1623*146\" alt=\"\"></p><center><span class=\"reference\">å›¾10 order by b,a limit 1 æ‰§è¡Œç»“æœ</span></center><p>ä¹‹å‰ä¼˜åŒ–å™¨é€‰æ‹©ä½¿ç”¨ç´¢å¼•bï¼Œæ˜¯å› ä¸ºå®ƒè®¤ä¸ºä½¿ç”¨ç´¢å¼•bå¯ä»¥é¿å…æ’åºï¼ˆbæœ¬èº«æ˜¯ç´¢å¼•ï¼Œå·²ç»æ˜¯æœ‰åºçš„äº†ï¼Œå¦‚æœé€‰æ‹©ç´¢å¼•bçš„è¯ï¼Œä¸éœ€è¦å†åšæ’åºï¼Œåªéœ€è¦éå†ï¼‰ï¼Œæ‰€ä»¥å³ä½¿æ‰«æè¡Œæ•°å¤šï¼Œä¹Ÿåˆ¤å®šä¸ºä»£ä»·æ›´å°ã€‚</p><p>ç°åœ¨order by b,a è¿™ç§å†™æ³•ï¼Œè¦æ±‚æŒ‰ç…§b,aæ’åºï¼Œå°±æ„å‘³ç€ä½¿ç”¨è¿™ä¸¤ä¸ªç´¢å¼•éƒ½éœ€è¦æ’åºã€‚å› æ­¤ï¼Œæ‰«æè¡Œæ•°æˆäº†å½±å“å†³ç­–çš„ä¸»è¦æ¡ä»¶ï¼Œäºæ˜¯æ­¤æ—¶ä¼˜åŒ–å™¨é€‰äº†åªéœ€è¦æ‰«æ1000è¡Œçš„ç´¢å¼•aã€‚</p><p>å½“ç„¶ï¼Œè¿™ç§ä¿®æ”¹å¹¶ä¸æ˜¯é€šç”¨çš„ä¼˜åŒ–æ‰‹æ®µï¼Œåªæ˜¯åˆšå¥½åœ¨è¿™ä¸ªè¯­å¥é‡Œé¢æœ‰limit 1ï¼Œå› æ­¤å¦‚æœæœ‰æ»¡è¶³æ¡ä»¶çš„è®°å½•ï¼Œ order by b limit 1å’Œorder by b,a limit 1 éƒ½ä¼šè¿”å›bæ˜¯æœ€å°çš„é‚£ä¸€è¡Œï¼Œé€»è¾‘ä¸Šä¸€è‡´ï¼Œæ‰å¯ä»¥è¿™ä¹ˆåšã€‚</p><p>å¦‚æœä½ è§‰å¾—ä¿®æ”¹è¯­ä¹‰è¿™ä»¶äº‹å„¿ä¸å¤ªå¥½ï¼Œè¿™é‡Œè¿˜æœ‰ä¸€ç§æ”¹æ³•ï¼Œå›¾11æ˜¯æ‰§è¡Œæ•ˆæœã€‚</p><pre><code>mysql&gt; select * from  (select * from t where (a between 1 and 1000)  and (b between 50000 and 100000) order by b limit 100)alias limit 1;\n</code></pre><p><img src=\"https://static001.geekbang.org/resource/image/b1/d7/b1a2ad43c78477d7f93dbc692cbaa0d7.png?wh=1824*165\" alt=\"\"></p><center><span class=\"reference\">å›¾11 æ”¹å†™SQLçš„explain</span></center><p>åœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œæˆ‘ä»¬ç”¨limit 100è®©ä¼˜åŒ–å™¨æ„è¯†åˆ°ï¼Œä½¿ç”¨bç´¢å¼•ä»£ä»·æ˜¯å¾ˆé«˜çš„ã€‚å…¶å®æ˜¯æˆ‘ä»¬æ ¹æ®æ•°æ®ç‰¹å¾è¯±å¯¼äº†ä¸€ä¸‹ä¼˜åŒ–å™¨ï¼Œä¹Ÿä¸å…·å¤‡é€šç”¨æ€§ã€‚</p><p><strong>ç¬¬ä¸‰ç§æ–¹æ³•æ˜¯ï¼Œåœ¨æœ‰äº›åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥æ–°å»ºä¸€ä¸ªæ›´åˆé€‚çš„ç´¢å¼•ï¼Œæ¥æä¾›ç»™ä¼˜åŒ–å™¨åšé€‰æ‹©ï¼Œæˆ–åˆ æ‰è¯¯ç”¨çš„ç´¢å¼•ã€‚</strong></p><p>ä¸è¿‡ï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘æ²¡æœ‰æ‰¾åˆ°é€šè¿‡æ–°å¢ç´¢å¼•æ¥æ”¹å˜ä¼˜åŒ–å™¨è¡Œä¸ºçš„æ–¹æ³•ã€‚è¿™ç§æƒ…å†µå…¶å®æ¯”è¾ƒå°‘ï¼Œå°¤å…¶æ˜¯ç»è¿‡DBAç´¢å¼•ä¼˜åŒ–è¿‡çš„åº“ï¼Œå†ç¢°åˆ°è¿™ä¸ªbugï¼Œæ‰¾åˆ°ä¸€ä¸ªæ›´åˆé€‚çš„ç´¢å¼•ä¸€èˆ¬æ¯”è¾ƒéš¾ã€‚</p><p>å¦‚æœæˆ‘è¯´è¿˜æœ‰ä¸€ä¸ªæ–¹æ³•æ˜¯åˆ æ‰ç´¢å¼•bï¼Œä½ å¯èƒ½ä¼šè§‰å¾—å¥½ç¬‘ã€‚ä½†å®é™…ä¸Šæˆ‘ç¢°åˆ°è¿‡ä¸¤æ¬¡è¿™æ ·çš„ä¾‹å­ï¼Œæœ€ç»ˆæ˜¯DBAè·Ÿä¸šåŠ¡å¼€å‘æ²Ÿé€šåï¼Œå‘ç°è¿™ä¸ªä¼˜åŒ–å™¨é”™è¯¯é€‰æ‹©çš„ç´¢å¼•å…¶å®æ ¹æœ¬æ²¡æœ‰å¿…è¦å­˜åœ¨ï¼Œäºæ˜¯å°±åˆ æ‰äº†è¿™ä¸ªç´¢å¼•ï¼Œä¼˜åŒ–å™¨ä¹Ÿå°±é‡æ–°é€‰æ‹©åˆ°äº†æ­£ç¡®çš„ç´¢å¼•ã€‚</p><h1>å°ç»“</h1><p>ä»Šå¤©æˆ‘ä»¬ä¸€èµ·èŠäº†èŠç´¢å¼•ç»Ÿè®¡çš„æ›´æ–°æœºåˆ¶ï¼Œå¹¶æåˆ°äº†ä¼˜åŒ–å™¨å­˜åœ¨é€‰é”™ç´¢å¼•çš„å¯èƒ½æ€§ã€‚</p><p>å¯¹äºç”±äºç´¢å¼•ç»Ÿè®¡ä¿¡æ¯ä¸å‡†ç¡®å¯¼è‡´çš„é—®é¢˜ï¼Œä½ å¯ä»¥ç”¨analyze tableæ¥è§£å†³ã€‚</p><p>è€Œå¯¹äºå…¶ä»–ä¼˜åŒ–å™¨è¯¯åˆ¤çš„æƒ…å†µï¼Œä½ å¯ä»¥åœ¨åº”ç”¨ç«¯ç”¨force indexæ¥å¼ºè¡ŒæŒ‡å®šç´¢å¼•ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ä¿®æ”¹è¯­å¥æ¥å¼•å¯¼ä¼˜åŒ–å™¨ï¼Œè¿˜å¯ä»¥é€šè¿‡å¢åŠ æˆ–è€…åˆ é™¤ç´¢å¼•æ¥ç»•è¿‡è¿™ä¸ªé—®é¢˜ã€‚</p><p>ä½ å¯èƒ½ä¼šè¯´ï¼Œä»Šå¤©è¿™ç¯‡æ–‡ç« åé¢çš„å‡ ä¸ªä¾‹å­ï¼Œæ€ä¹ˆéƒ½æ²¡æœ‰å±•å¼€è¯´æ˜å…¶åŸç†ã€‚æˆ‘è¦å‘Šè¯‰ä½ çš„æ˜¯ï¼Œä»Šå¤©çš„è¯é¢˜ï¼Œæˆ‘ä»¬é¢å¯¹çš„æ˜¯MySQLçš„bugï¼Œæ¯ä¸€ä¸ªå±•å¼€éƒ½å¿…é¡»æ·±å…¥åˆ°ä¸€è¡Œè¡Œä»£ç å»é‡åŒ–ï¼Œå®åœ¨ä¸æ˜¯æˆ‘ä»¬åœ¨è¿™é‡Œåº”è¯¥åšçš„äº‹æƒ…ã€‚</p><p>æ‰€ä»¥ï¼Œæˆ‘æŠŠæˆ‘ç”¨è¿‡çš„è§£å†³æ–¹æ³•è·Ÿä½ åˆ†äº«ï¼Œå¸Œæœ›ä½ åœ¨ç¢°åˆ°ç±»ä¼¼æƒ…å†µçš„æ—¶å€™ï¼Œèƒ½å¤Ÿæœ‰ä¸€äº›æ€è·¯ã€‚</p><p>ä½ å¹³æ—¶åœ¨å¤„ç†MySQLä¼˜åŒ–å™¨bugçš„æ—¶å€™æœ‰ä»€ä¹ˆåˆ«çš„æ–¹æ³•ï¼Œä¹Ÿå‘åˆ°è¯„è®ºåŒºåˆ†äº«ä¸€ä¸‹å§ã€‚</p><p>æœ€åï¼Œæˆ‘ç»™ä½ ç•™ä¸‹ä¸€ä¸ªæ€è€ƒé¢˜ã€‚å‰é¢æˆ‘ä»¬åœ¨æ„é€ ç¬¬ä¸€ä¸ªä¾‹å­çš„è¿‡ç¨‹ä¸­ï¼Œé€šè¿‡session Açš„é…åˆï¼Œè®©session Båˆ é™¤æ•°æ®ååˆé‡æ–°æ’å…¥äº†ä¸€éæ•°æ®ï¼Œç„¶åå°±å‘ç°explainç»“æœä¸­ï¼Œrowså­—æ®µä»10001å˜æˆ37000å¤šã€‚</p><p>è€Œå¦‚æœæ²¡æœ‰session Açš„é…åˆï¼Œåªæ˜¯å•ç‹¬æ‰§è¡Œdelete from t ã€call idata()ã€explainè¿™ä¸‰å¥è¯ï¼Œä¼šçœ‹åˆ°rowså­—æ®µå…¶å®è¿˜æ˜¯10000å·¦å³ã€‚ä½ å¯ä»¥è‡ªå·±éªŒè¯ä¸€ä¸‹è¿™ä¸ªç»“æœã€‚</p><p>è¿™æ˜¯ä»€ä¹ˆåŸå› å‘¢ï¼Ÿä¹Ÿè¯·ä½ åˆ†æä¸€ä¸‹å§ã€‚</p><p>ä½ å¯ä»¥æŠŠä½ çš„åˆ†æç»“è®ºå†™åœ¨ç•™è¨€åŒºé‡Œï¼Œæˆ‘ä¼šåœ¨ä¸‹ä¸€ç¯‡æ–‡ç« çš„æœ«å°¾å’Œä½ è®¨è®ºè¿™ä¸ªé—®é¢˜ã€‚æ„Ÿè°¢ä½ çš„æ”¶å¬ï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ä¸€èµ·é˜…è¯»ã€‚</p><h1>ä¸ŠæœŸé—®é¢˜æ—¶é—´</h1><p>æˆ‘åœ¨ä¸Šä¸€ç¯‡æ–‡ç« æœ€åç•™ç»™ä½ çš„é—®é¢˜æ˜¯ï¼Œå¦‚æœæŸæ¬¡å†™å…¥ä½¿ç”¨äº†change bufferæœºåˆ¶ï¼Œä¹‹åä¸»æœºå¼‚å¸¸é‡å¯ï¼Œæ˜¯å¦ä¼šä¸¢å¤±change bufferå’Œæ•°æ®ã€‚</p><p>è¿™ä¸ªé—®é¢˜çš„ç­”æ¡ˆæ˜¯ä¸ä¼šä¸¢å¤±ï¼Œç•™è¨€åŒºçš„å¾ˆå¤šåŒå­¦éƒ½å›ç­”å¯¹äº†ã€‚è™½ç„¶æ˜¯åªæ›´æ–°å†…å­˜ï¼Œä½†æ˜¯åœ¨äº‹åŠ¡æäº¤çš„æ—¶å€™ï¼Œæˆ‘ä»¬æŠŠchange bufferçš„æ“ä½œä¹Ÿè®°å½•åˆ°redo logé‡Œäº†ï¼Œæ‰€ä»¥å´©æºƒæ¢å¤çš„æ—¶å€™ï¼Œchange bufferä¹Ÿèƒ½æ‰¾å›æ¥ã€‚</p><p>åœ¨è¯„è®ºåŒºæœ‰åŒå­¦é—®åˆ°ï¼Œmergeçš„è¿‡ç¨‹æ˜¯å¦ä¼šæŠŠæ•°æ®ç›´æ¥å†™å›ç£ç›˜ï¼Œè¿™æ˜¯ä¸ªå¥½é—®é¢˜ã€‚è¿™é‡Œï¼Œæˆ‘å†ä¸ºä½ åˆ†æä¸€ä¸‹ã€‚</p><p>mergeçš„æ‰§è¡Œæµç¨‹æ˜¯è¿™æ ·çš„ï¼š</p><ol>\n<li>\n<p>ä»ç£ç›˜è¯»å…¥æ•°æ®é¡µåˆ°å†…å­˜ï¼ˆè€ç‰ˆæœ¬çš„æ•°æ®é¡µï¼‰ï¼›</p>\n</li>\n<li>\n<p>ä»change bufferé‡Œæ‰¾å‡ºè¿™ä¸ªæ•°æ®é¡µçš„change buffer è®°å½•(å¯èƒ½æœ‰å¤šä¸ªï¼‰ï¼Œä¾æ¬¡åº”ç”¨ï¼Œå¾—åˆ°æ–°ç‰ˆæ•°æ®é¡µï¼›</p>\n</li>\n<li>\n<p>å†™redo logã€‚è¿™ä¸ªredo logåŒ…å«äº†æ•°æ®çš„å˜æ›´å’Œchange bufferçš„å˜æ›´ã€‚</p>\n</li>\n</ol><p>åˆ°è¿™é‡Œmergeè¿‡ç¨‹å°±ç»“æŸäº†ã€‚è¿™æ—¶å€™ï¼Œæ•°æ®é¡µå’Œå†…å­˜ä¸­change bufferå¯¹åº”çš„ç£ç›˜ä½ç½®éƒ½è¿˜æ²¡æœ‰ä¿®æ”¹ï¼Œå±äºè„é¡µï¼Œä¹‹åå„è‡ªåˆ·å›è‡ªå·±çš„ç‰©ç†æ•°æ®ï¼Œå°±æ˜¯å¦å¤–ä¸€ä¸ªè¿‡ç¨‹äº†ã€‚</p><p>è¯„è®ºåŒºç•™è¨€ç‚¹èµæ¿ï¼š</p><blockquote>\n<p>@æŸã€äºº æŠŠ02ç¯‡çš„redo logæ›´æ–°ç»†èŠ‚å’Œchange bufferçš„æ›´æ–°ä¸²äº†èµ·æ¥ï¼›<br>\n@Ivan å›å¤äº†å…¶ä»–åŒå­¦çš„é—®é¢˜ï¼Œå¹¶è”ç³»åˆ°Checkpointæœºåˆ¶ï¼›<br>\n@çº¦ä¹¦äºš é—®åˆ°äº†mergeå’Œredologçš„å…³ç³»ã€‚</p>\n</blockquote>","comments":[{"had_liked":false,"id":46980,"user_name":"æŸã€äºº","can_delete":false,"product_type":"c1","uid":1308784,"ip_address":"","ucode":"ADB42AA12A11C1","user_header":"https://static001.geekbang.org/account/avatar/00/13/f8/70/f3a33a14.jpg","comment_is_top":true,"comment_ctime":1544014442,"is_pvip":false,"replies":[{"id":"16775","content":"1. å¥½é—®é¢˜ï¼Œè€Œä¸”ä½ åšäº†ä¸ªä¸é”™çš„å¯¹ç…§å®éªŒã€‚æ˜¯çš„ï¼ŒåŠ äº†limit 1 èƒ½å‡å°‘æ‰«æå¤šå°‘è¡Œï¼Œå…¶å®ä¼˜åŒ–å™¨ä¹Ÿä¸ç¡®å®šï¼Œã€å¾—æ‰§è¡Œæ‰çŸ¥é“ã€‘ï¼Œæ‰€ä»¥æ˜¾ç¤ºçš„æ—¶å€™è¿˜æ˜¯æŒ‰ç…§â€œæœ€å¤šå¯èƒ½æ‰«å¤šå°‘è¡Œâ€æ¥æ˜¾ç¤ºã€‚<br><br>2. ä½ è¿™ä¸ªä¾‹å­é‡Œï¼Œå¦‚æœç¡®å®æ˜¯æŒ‰ç…§bæ‰«æäº†ï¼Œåº”è¯¥è‚¯å®šæ˜¯IDæœ€å¤§å€¼å‘€ï¼Œé™¤éIDæœ€å¤§çš„é‚£ä¸ªè®°å½•ï¼Œaæ¡ä»¶ä¸æ»¡è¶³ã€‚ä½†æ˜¯ä¸€å®šæ˜¯â€œæ»¡è¶³aæ¡ä»¶é‡Œé¢æœ€å¤§çš„é‚£ä¸ªIDçš„â€ï¼Œä½ å†éªŒè¯ä¸‹ã€‚<br><br> è€Œå¦‚æœæ˜¯ç”¨äº†a, é‚£å°±æœ‰ä¸´æ—¶è¡¨æ’åºï¼Œä¸´æ—¶è¡¨æ’åºæœ‰ä¸‰ç§ç®—æ³•ï¼Œè¿˜åˆ†å†…å­˜è¿˜æ˜¯ç£ç›˜ä¸´æ—¶è¡¨â€¦ è¿™é‡Œå±•å¼€ä¸äº†äº†ï¼Œåé¢ã€Šorder byæ˜¯æ€ä¹ˆå·¥ä½œçš„ã€‹è¿™ç¯‡ä¼šè®²ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544019723,"ip_address":"","comment_id":46980,"utype":1}],"discussion_count":3,"race_medal":0,"score":"9.2233723218666004e+18","product_id":100020801,"comment_content":"ä»Šå¤©è¿™ä¸ªé—®é¢˜ä¸æ˜¯ç‰¹åˆ«æ˜ç™½ä¸ºä»€ä¹ˆã€‚session Aå¼€å¯äº†ä¸€è‡´æ€§è¯»,session B deleteæˆ–è€…insert,ä¹‹å‰è®°å½•éƒ½å·²ç»æ”¾è¿›äº†undoäº†ã€‚äºŒçº§ç´¢å¼•çš„è®°å½•ä¹Ÿå†™è¿›äº†redoå’Œchange buffer,åº”è¯¥è¯´åˆ é™¤äº†ç´¢å¼•é¡µä¹Ÿä¸å½±å“session Açš„é‡å¤è¯»ã€‚ä¼°è®¡æ˜¯å¼€å¯äº†ä¸€è‡´æ€§è¯»ä¹‹å,åœ¨è¿™ä¸ªäº‹åŠ¡æ‰§è¡ŒæœŸé—´,ä¸èƒ½é‡Šæ”¾ç©ºé—´,å¯¼è‡´ç»Ÿè®¡ä¿¡æ¯å˜å¤§ã€‚è¿˜æ˜¯éœ€è¦è€å¸ˆè§£é‡Šä¸‹å…·ä½“çš„ç»†èŠ‚<br><br>ä»Šå¤©æœ‰ä¸¤ä¸ªé—®é¢˜,æƒ³è¯·æ•™ä¸‹è€å¸ˆ<br>1.æˆ‘çš„ç†è§£æ˜¯ç”±äºBæ˜¯æŸ¥æ‰¾(50000,100000),ç”±äºB+æ ‘æœ‰åº,é€šè¿‡äºŒåˆ†æŸ¥æ‰¾æ‰¾åˆ°b=50000çš„å€¼,ä»50000å¾€å³æ‰«æ,ä¸€æ¡ä¸€æ¡å›è¡¨æŸ¥æ•°æ®,åœ¨æ‰§è¡Œå™¨ä¸Šåšwhere a(1,1000)çš„ç­›é€‰,ç„¶ååšåˆ¤æ–­æ˜¯å¦å¤Ÿä¸å¤Ÿlimitçš„æ•°,å¤Ÿå°±ç»“æŸå¾ªç¯ã€‚ç”±äºè¿™é‡Œb(50000,100000)å¿…ç„¶ä¸å­˜åœ¨a(1,1000),æ‰€ä»¥éœ€è¦æ‰«æ5Wè¡Œå·¦å³.ä½†æ˜¯å¦‚æœæŠŠaæ”¹ä¸º(50001,51000),æ‰«æè¡Œæ•°æ²¡æœ‰å˜ã€‚é‚£ä¹ˆæ˜¯å› ä¸ºä¼˜åŒ–å™¨ç»™çš„æ‰«æè¡Œæ•°æœ‰é—®é¢˜è¿˜æ˜¯æ‰§è¡Œå™¨æ²¡æœ‰ç»“æŸå¾ªç¯ï¼Ÿä¸ºä»€ä¹ˆä¸ç»“æŸå¾ªç¯?<br>(å¥½åƒrowsèƒ½ç›´è§‚å±•ç¤ºlimitèµ·ä½œç”¨,å¿…é¡»åœ¨æ‰§è¡Œå™¨ä¸Šè¿‡æ»¤æ•°æ®,ä¸èƒ½åœ¨ç´¢å¼•ä¸Šè¿‡æ»¤æ•°æ®,ä¸çŸ¥é“ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡)<br><br>2.å‡è®¾bä¸Šæ•°æ®æ˜¯ä¼šæœ‰å¾ˆå¤šé‡å¤çš„æ•°æ®,bçš„æœ€å¤§å€¼ä¹Ÿå­˜åœ¨å¤šè¡Œé‡å¤<br>select * from t where (a between 1 and 1000) and (b between 50000 and 100000) order by b desc limit 1;<br>è¿™é‡Œå€’åºå»æ‰«æbç´¢å¼•æ ‘,é€‰å–çš„æ˜¯bå€¼æœ€å¤§,idå€¼ä¸ºä¸€ä¸ªå›ºå®šå€¼(æ—¢ä¸æœ€å¤§ä¹Ÿä¸æœ€å°)<br>select * from t force index(a) where (a between 1 and 1000) and (b between 50000 and 100000) order by b desc limit 1;<br>ç”±äºè¿™é‡Œé€‰å–çš„æ˜¯aç´¢å¼•,æ’åºä¸èƒ½ç”¨åˆ°ç´¢å¼•,åªèƒ½ç”¨ä¼˜åŒ–æ’åº.é€‰å–çš„æ˜¯bå€¼æœ€å¤§,idå€¼æœ€å°é‚£ä¸€è¡Œ<br>è¿™å°±æ˜¯å…¸å‹çš„ä¸¤æ¡ç›¸åŒçš„sql,ä½†æ˜¯ç´¢å¼•é€‰æ‹©çš„ä¸åŒ,å‡ºç°çš„æ•°æ®ä¸ä¸€è‡´ã€‚<br>æ‰€ä»¥å¦‚æœæ˜¯order by b,aå°±å¯ä»¥é¿å…è¿™ç§æƒ…å†µçš„å¼•èµ·çš„ä¸ä¸€è‡´,ä¹Ÿå¯ä»¥é¿å…å †æ’åºé€ æˆçš„ä¸ä¸€è‡´<br>ä½†æ˜¯å¦‚æœæ˜¯ascæ²¡æœ‰å‡ºç°è¿™ç§æƒ…å†µã€‚è¿™é‡Œå‡ºç°ä¸ä¸€è‡´,åº”è¯¥è¿˜ä¸æ˜¯ç”±äºå †æ’åºé€ æˆçš„ã€‚è¿™æ˜¯ä»€ä¹ˆåŸå› é€ æˆçš„ï¼Ÿ","like_count":66,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431626,"discussion_content":"1. å¥½é—®é¢˜ï¼Œè€Œä¸”ä½ åšäº†ä¸ªä¸é”™çš„å¯¹ç…§å®éªŒã€‚æ˜¯çš„ï¼ŒåŠ äº†limit 1 èƒ½å‡å°‘æ‰«æå¤šå°‘è¡Œï¼Œå…¶å®ä¼˜åŒ–å™¨ä¹Ÿä¸ç¡®å®šï¼Œã€å¾—æ‰§è¡Œæ‰çŸ¥é“ã€‘ï¼Œæ‰€ä»¥æ˜¾ç¤ºçš„æ—¶å€™è¿˜æ˜¯æŒ‰ç…§â€œæœ€å¤šå¯èƒ½æ‰«å¤šå°‘è¡Œâ€æ¥æ˜¾ç¤ºã€‚\n\n2. ä½ è¿™ä¸ªä¾‹å­é‡Œï¼Œå¦‚æœç¡®å®æ˜¯æŒ‰ç…§bæ‰«æäº†ï¼Œåº”è¯¥è‚¯å®šæ˜¯IDæœ€å¤§å€¼å‘€ï¼Œé™¤éIDæœ€å¤§çš„é‚£ä¸ªè®°å½•ï¼Œaæ¡ä»¶ä¸æ»¡è¶³ã€‚ä½†æ˜¯ä¸€å®šæ˜¯â€œæ»¡è¶³aæ¡ä»¶é‡Œé¢æœ€å¤§çš„é‚£ä¸ªIDçš„â€ï¼Œä½ å†éªŒè¯ä¸‹ã€‚\n\n è€Œå¦‚æœæ˜¯ç”¨äº†a, é‚£å°±æœ‰ä¸´æ—¶è¡¨æ’åºï¼Œä¸´æ—¶è¡¨æ’åºæœ‰ä¸‰ç§ç®—æ³•ï¼Œè¿˜åˆ†å†…å­˜è¿˜æ˜¯ç£ç›˜ä¸´æ—¶è¡¨â€¦ è¿™é‡Œå±•å¼€ä¸äº†äº†ï¼Œåé¢ã€Šorder byæ˜¯æ€ä¹ˆå·¥ä½œçš„ã€‹è¿™ç¯‡ä¼šè®²ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544019723,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1934802,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/85/d2/045c63fb.jpg","nickname":"ç‹å»ºæ–°","note":"","ucode":"E3151DDC0EEF0D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":348193,"discussion_content":"ä½ è¿™é—®é¢˜å¤ªé•¿ æˆ‘éšä¾¿çœ‹äº†ä¸‹ï¼Œä½ éƒ½èƒ½æè¿°çš„æ¸…æ¥šï¼Œè‡ªå·±è¿˜ä¸çŸ¥é“ç­”æ¡ˆï¼Ÿæœ‰ç‚¹ä¸å¯¹åŠ²å•Šï¼Œè¿˜æ˜¯ä¸“é—¨æé¢—æ—¶é—´æ¥åˆ·è¯„è®ºçš„ï¼Œæˆ–è€…è¿˜æ˜¯ä½ å¤ªèœ","likes_number":7,"is_delete":false,"is_hidden":false,"ctime":1612451179,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1986739,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/50/b3/9269cd59.jpg","nickname":"LWD","note":"","ucode":"DDA444DB113C01","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":587301,"discussion_content":"å †æ’åºæ˜¯ä¸ç¨³å®šç®—æ³•ã€‚é‡å¤å€¼çš„ä½ç½®å¯èƒ½å‘ç”Ÿå˜åŒ–","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1662968375,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":47027,"user_name":"è·¯è¿‡","can_delete":false,"product_type":"c1","uid":1316401,"ip_address":"","ucode":"7152C19ED024CC","user_header":"https://static001.geekbang.org/account/avatar/00/14/16/31/ae8adf82.jpg","comment_is_top":true,"comment_ctime":1544021198,"is_pvip":false,"replies":[{"id":"16797","content":"å•Šï¼Œè¯¯ä¼šäº†ï¼Œç¡®å®æ˜¯å“ªä¸ªç´¢å¼•çš„åŸºæ•°å°±æ˜¯åœ¨å“ªä¸ªç´¢å¼•æ ‘ä¸Šæ‹¿çš„ã€‚<br><br>ä½ çš„ç†è§£æ˜¯å¯¹çš„ï¼Œæˆ‘æ–‡ä¸­ä¹Ÿæ˜¯è¿™ä¸ªæ„æ€å“¦ğŸ˜“","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544026892,"ip_address":"","comment_id":47027,"utype":1}],"discussion_count":5,"race_medal":0,"score":"9.2233721844277002e+18","product_id":100020801,"comment_content":"è€å¸ˆï¼Œå…³äºæœ¬ç« ä¸­çš„â€œåŸºæ•°â€ï¼ˆcardinalityï¼‰é—®é¢˜ã€‚æ—¢ç„¶å·²ç»ä¸ºåˆ—aåˆ›å»ºäº†ç´¢å¼•ï¼Œå³æœ‰ä¸“é—¨çš„æ•°æ®é¡µå­˜æ”¾ç´¢å¼•ã€‚éå†ç´¢å¼•æ˜¯å¾ˆå¿«çš„ï¼Œä»è€Œå¾—åˆ°â€œåŸºæ•°â€çš„å€¼åº”è¯¥å¾ˆå¿«å‘€ã€‚ä¸ºä½•è¦åˆ°åŸå§‹çš„æ•°æ®é¡µä¸­ï¼Œæ‰¾Né¡µï¼Œç»Ÿè®¡ä¸Šé¢ä¸åŒçš„å€¼å‘¢ï¼Ÿæœ‰ç‚¹å¤šæ­¤ä¸€ä¸¾å•Šã€‚å¦‚æœè¿™æ ·æ“ä½œï¼Œä¼šå¯¼è‡´ä¿¡æ¯ä¸å‡†ç¡®ï¼Œæ¯”å¦‚æœ¬æ¥ä¸€ä¸ªé¡µä¸­æœ‰50æ¡æ•°æ®ï¼Œåæ¥å…¶ä¸­20æ¡æ•°æ®è¢«åˆ é™¤äº†ï¼Œç©ºé—´æ²¡æœ‰è¢«é‡Šæ”¾ï¼Œè¿™å¯¼è‡´ç»Ÿè®¡çš„ä¿¡æ¯å°±å‘ç”Ÿåå·®ã€‚åŸºæ•°ä¿¡æ¯å°±æ›´ä¸å‡†ç¡®äº†ã€‚<br>ä»åŸå§‹é¡µä¸­è®¡ç®—â€œåŸºæ•°â€ï¼Œæ˜¯ä¸æ˜¯è€ƒè™‘åˆ°ç´¢å¼•é¡µä¸­çš„æ•°æ®å…·æœ‰æ»åæ€§ï¼Œå³æ›´æ–°äº†è¡¨ä¸­æ•°æ®ï¼Œè¦è¿‡ä¸€ä¼šæ‰æ›´æ–°ç´¢å¼•é¡µï¼Ÿ<br>è¯·è€å¸ˆæŒ‡æ­£ï¼Œè°¢è°¢ï¼<br><br>","like_count":34,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431641,"discussion_content":"å•Šï¼Œè¯¯ä¼šäº†ï¼Œç¡®å®æ˜¯å“ªä¸ªç´¢å¼•çš„åŸºæ•°å°±æ˜¯åœ¨å“ªä¸ªç´¢å¼•æ ‘ä¸Šæ‹¿çš„ã€‚\n\nä½ çš„ç†è§£æ˜¯å¯¹çš„ï¼Œæˆ‘æ–‡ä¸­ä¹Ÿæ˜¯è¿™ä¸ªæ„æ€å“¦ğŸ˜“","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544026892,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1160678,"avatar":"https://static001.geekbang.org/account/avatar/00/11/b5/e6/c67f12bd.jpg","nickname":"å·¦è€³æœµä¸œ","note":"","ucode":"60134ACF12BB52","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":381088,"discussion_content":"â€œanalyze table t å‘½ä»¤ï¼Œå¯ä»¥ç”¨æ¥é‡æ–°ç»Ÿè®¡ç´¢å¼•ä¿¡æ¯ã€‚â€å®ƒçš„ä½œç”¨ä¸æ˜¯é‡æ–°è®¡ç®—ç´¢å¼•åŸºæ•°å—ï¼Œæ€ä¹ˆä¹Ÿä½¿å¾—é¢„ä¼°è¦æ‰«æçš„è¡Œæ•°ä¹Ÿæ›´å‡†ç¡®äº†å‘¢ï¼Ÿ","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1624889500,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1062848,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ersGSic8ib7OguJv6CJiaXY0s4n9C7Z51sWxTTljklFpq3ZAIWXoFTPV5oLo0GMTkqW5sYJRRnibNqOJQ/132","nickname":"walleæ–Œ","note":"","ucode":"0DB3243004951F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":293136,"discussion_content":"æ¯æ¬¡ä¹Ÿæ˜¯æ•°æ®å—çš„å–ï¼Œè€Œä¸”ä¸€èˆ¬æ ‘é«˜ä¸è¶…è¿‡4å±‚ã€‚ã€‚ä¹‹å‰çš„çŸ¥è¯†ç‚¹æœ‰è®²ï¼Œä¸€èˆ¬æ ¹èŠ‚ç‚¹ä»¥åŠç¬¬äºŒå±‚å¤§æ¦‚ç‡éƒ½åœ¨å†…å­˜ï¼Œå®é™…å°±æ˜¯2~3æ¬¡å¯»å€è¯»å–","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1595461594,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1780797,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/2c/3d/0bd58aa4.jpg","nickname":"Em","note":"","ucode":"32012A5C603C8A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1062848,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ersGSic8ib7OguJv6CJiaXY0s4n9C7Z51sWxTTljklFpq3ZAIWXoFTPV5oLo0GMTkqW5sYJRRnibNqOJQ/132","nickname":"walleæ–Œ","note":"","ucode":"0DB3243004951F","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":576571,"discussion_content":"å¤§æ¦‚ç‡åœ¨å†…å­˜æ˜¯å› ä¸ºå¾ˆå®¹æ˜“è¢«è®¿é—®åˆ°å—  é¢‘ç¹è®¿é—®æ‰€ä»¥å¸¸é©»å†…å­˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655654067,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":293136,"ip_address":""},"score":576571,"extra":""}]},{"author":{"id":1242455,"avatar":"https://static001.geekbang.org/account/avatar/00/12/f5/57/ce10fb1b.jpg","nickname":"å¤©å¤©å‘ä¸Š","note":"","ucode":"0CCCA6F4DCC480","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":196064,"discussion_content":"éå†ç´¢å¼•ä¹Ÿéœ€è¦å°†ç´¢å¼•çš„æ•°æ®é¡µä»ç£ç›˜è¯»å–å§ï¼Œè¿™æ ·ä¹Ÿè¦æ¶ˆè€—å¾ˆå¤šæ—¶é—´çš„å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583328991,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":46844,"user_name":"bowenz","can_delete":false,"product_type":"c1","uid":1127589,"ip_address":"","ucode":"A58FF6F9E4040C","user_header":"https://static001.geekbang.org/account/avatar/00/11/34/a5/db01dc4f.jpg","comment_is_top":true,"comment_ctime":1543990354,"is_pvip":false,"replies":[{"id":"16748","content":"Session Aæäº¤æ—©äº†â€¦ ä»ä¸Šåˆ°ä¸‹æŒ‰ç…§æ—¶é—´é¡ºåºæ‰§è¡Œå“ˆ","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544012072,"ip_address":"","comment_id":46844,"utype":1}],"discussion_count":3,"race_medal":0,"score":"9.2233721028232991e+18","product_id":100020801,"comment_content":"åœ¨5.7.21 percona ç‰ˆæœ¬å®éªŒï¼Œæœªå‡ºç°æ¡ˆä¾‹1çš„æƒ…å†µ ã€‚ <br>dev02&gt; select @@global.tx_isolation,@@tx_isolation,version(),&quot;session A&quot;;<br>+-----------------------+-----------------+---------------+-----------+<br>| @@global.tx_isolation | @@tx_isolation  | version()     | session A |<br>+-----------------------+-----------------+---------------+-----------+<br>| REPEATABLE-READ       | REPEATABLE-READ | 5.7.21-20-log | session A |<br>+-----------------------+-----------------+---------------+-----------+<br>dev02&gt; start transaction with consistent snapshot;<br>Query OK, 0 rows affected (0.00 sec)<br>dev02&gt; commit;<br>Query OK, 0 rows affected (0.00 sec)<br>dev02&gt; select now() ;<br>+---------------------+<br>| now()               |<br>+---------------------+<br>| 2018-12-04 22:03:48 |<br>+---------------------+<br>1 row in set (0.00 sec)<br>dev02&gt; select @@global.tx_isolation,@@tx_isolation,version(),&quot;session B&quot;;<br>+-----------------------+-----------------+---------------+-----------+<br>| @@global.tx_isolation | @@tx_isolation  | version()     | session B |<br>+-----------------------+-----------------+---------------+-----------+<br>| REPEATABLE-READ       | REPEATABLE-READ | 5.7.21-20-log | session B |<br>+-----------------------+-----------------+---------------+-----------+<br>1 row in set, 2 warnings (0.00 sec)<br><br>dev02&gt; delete from t;<br>Query OK, 100000 rows affected (0.51 sec)<br><br>dev02&gt; call idata();<br>Query OK, 1 row affected (2 min 38.34 sec)<br><br>dev02&gt; select now();<br>+---------------------+<br>| now()               |<br>+---------------------+<br>| 2018-12-04 22:03:58 |<br>+---------------------+<br>1 row in set (0.00 sec)<br><br>dev02&gt; explain select * from t where a between 10000 and 20000;<br>| id | select_type | table | partitions | type  | possible_keys | key  | key_len | ref  | rows  | filtered | Extra                 |<br>|  1 | SIMPLE      | t     | NULL       | range | a             | a    | 5       | NULL | 10001 |   100.00 | Using index condition |","like_count":15,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431565,"discussion_content":"Session Aæäº¤æ—©äº†â€¦ ä»ä¸Šåˆ°ä¸‹æŒ‰ç…§æ—¶é—´é¡ºåºæ‰§è¡Œå“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544012072,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2797976,"avatar":"","nickname":"Geek_323a60","note":"","ucode":"CDC276EC255411","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":584397,"discussion_content":"åœ¨ 5.7.36 ç‰ˆæœ¬ä¸‹ï¼Œå¥½åƒçœŸçš„ä¸è¡Œ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1660804134,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":431565,"ip_address":"å››å·"},"score":584397,"extra":""}]},{"author":{"id":1341575,"avatar":"https://static001.geekbang.org/account/avatar/00/14/78/87/54eb0929.jpg","nickname":"æµ·æ´‹ä¹‹å¿ƒ","note":"","ucode":"D540476207AFF4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":590350,"discussion_content":"5.7.39ç‰ˆæœ¬ä¸‹åŒæ ·æ²¡æœ‰å¤ç°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1665702196,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":47342,"user_name":"æŸã€äºº","can_delete":false,"product_type":"c1","uid":1308784,"ip_address":"","ucode":"ADB42AA12A11C1","user_header":"https://static001.geekbang.org/account/avatar/00/13/f8/70/f3a33a14.jpg","comment_is_top":false,"comment_ctime":1544110459,"is_pvip":false,"replies":[{"id":"16890","content":"ğŸ‘ğŸ¿","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544112309,"ip_address":"","comment_id":47342,"utype":1}],"discussion_count":18,"race_medal":0,"score":"1397408481659","product_id":100020801,"comment_content":"è¶ç€ç­”æ¡ˆå…¬å¸ƒä¹‹å‰çš„æœ€åæ—¶é—´,å†æ¥å°è¯•æ€§ç­”ä¸€ä¸‹è¿™ä¸ªé¢˜<br>1.ä¸ºä»€ä¹ˆæ²¡æœ‰session A,session Bæ‰«æçš„è¡Œæ•°æ˜¯1W<br>ç”±äºmysqlæ˜¯ä½¿ç”¨æ ‡è®°åˆ é™¤æ¥åˆ é™¤è®°å½•çš„,å¹¶ä¸ä»ç´¢å¼•å’Œæ•°æ®æ–‡ä»¶ä¸­çœŸæ­£çš„åˆ é™¤ã€‚<br>å¦‚æœdeleteå’Œinsertä¸­é—´çš„é—´éš”ç›¸å¯¹è¾ƒå°,purgeçº¿ç¨‹è¿˜æ²¡æœ‰æ¥å¾—åŠæ¸…ç†è¯¥è®°å½•ã€‚<br>å¦‚æœä¸»é”®ç›¸åŒçš„æƒ…å†µä¸‹,æ–°æ’å…¥çš„insertä¼šæ²¿ç”¨ä¹‹å‰åˆ é™¤çš„deleteçš„è®°å½•çš„ç©ºé—´ã€‚<br>ç”±äºç›¸åŒçš„æ•°æ®é‡ä»¥åŠè¡¨å¤§å°,æ‰€ä»¥å¯¼è‡´äº†ç»Ÿè®¡ä¿¡æ¯æ²¡æœ‰å˜åŒ–<br>2.ä¸ºä»€ä¹ˆå¼€å¯äº†session A,session Bæ‰«æè¡Œæ•°å˜æˆ3W<br>ç”±äºsession Aå¼€å¯äº†ä¸€è‡´æ€§è¯»,ç›®çš„ä¸ºäº†ä¿è¯session Açš„å¯é‡å¤è¯»,insertåªèƒ½<br>å¦èµ·ç‚‰ç¶,ä¸èƒ½å ç”¨deleteçš„ç©ºé—´ã€‚æ‰€ä»¥å‡ºç°çš„æƒ…å†µå°±æ˜¯deleteè™½ç„¶åˆ é™¤äº†,ä½†æ˜¯<br>æœªé‡Šæ”¾ç©ºé—´,insertåˆå¢åŠ äº†ç©ºé—´ã€‚å¯¼è‡´ç»Ÿè®¡ä¿¡æ¯æœ‰è¯¯","like_count":326,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431743,"discussion_content":"ğŸ‘ğŸ¿","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544112309,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1068361,"avatar":"https://static001.geekbang.org/account/avatar/00/10/4d/49/28e73b9c.jpg","nickname":"æ˜ç¿¼","note":"","ucode":"E77F86BEB3D5C1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":262896,"discussion_content":"å¼€å§‹äº‹åŠ¡åŠ äº†é•œåƒï¼Œä¸ºä»€ä¹ˆä¸ç”¨undoæ—¥å¿—è¿˜åŸæ•°æ®è€Œæ˜¯ä¿ç•™è¢«åˆ é™¤çš„æ•°æ®é‚£ï¼Ÿ","likes_number":7,"is_delete":false,"is_hidden":false,"ctime":1589154966,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":5,"child_discussions":[{"author":{"id":1392326,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/7KvTibLByic8Eht03jsera25gTIoJEKnajulAVyRibaFic34rNjCSd3DBpjwWInJ72gBMuo1RNNoFdiay0PUSy8971Q/132","nickname":"hahahhh","note":"","ucode":"ED94DDF526F94D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1068361,"avatar":"https://static001.geekbang.org/account/avatar/00/10/4d/49/28e73b9c.jpg","nickname":"æ˜ç¿¼","note":"","ucode":"E77F86BEB3D5C1","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":292875,"discussion_content":"æœ‰åŒæ ·çš„ç–‘é—®","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1595374540,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":262896,"ip_address":""},"score":292875,"extra":""},{"author":{"id":1015189,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7d/95/dd73022c.jpg","nickname":"æˆ‘æ˜¯æ›¾ç»é‚£ä¸ªå°‘å¹´","note":"","ucode":"9F02F7FF147D14","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1068361,"avatar":"https://static001.geekbang.org/account/avatar/00/10/4d/49/28e73b9c.jpg","nickname":"æ˜ç¿¼","note":"","ucode":"E77F86BEB3D5C1","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":334270,"discussion_content":"Mysqlæ•°æ®åº•å±‚æ˜¯é€šè¿‡é¡µå­˜å‚¨çš„ï¼Œåˆ é™¤æ•°æ®ï¼Œå°±åˆ é™¤è®°å½•å°±éœ€è¦IOæ“ä½œï¼Œè¿™å°±æ˜¯å¾ˆæ˜¾ç„¶çš„ç©ºé—´æ¢æ—¶é—´ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1607781330,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":262896,"ip_address":""},"score":334270,"extra":""},{"author":{"id":2552742,"avatar":"https://static001.geekbang.org/account/avatar/00/26/f3/a6/1dd784f6.jpg","nickname":"é‡Œæ²³","note":"","ucode":"0A05A5F7A19EFA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1068361,"avatar":"https://static001.geekbang.org/account/avatar/00/10/4d/49/28e73b9c.jpg","nickname":"æ˜ç¿¼","note":"","ucode":"E77F86BEB3D5C1","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":368862,"discussion_content":"æœ‰åŒæ ·ç–‘é—®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618845854,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":262896,"ip_address":""},"score":368862,"extra":""}]},{"author":{"id":1442588,"avatar":"https://static001.geekbang.org/account/avatar/00/16/03/1c/c9fe6738.jpg","nickname":"Kvicii.Y","note":"","ucode":"446BFA633569EA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":203932,"discussion_content":"insertæ˜¯å½“å‰è¯»å§ï¼Œå½“å‰è¯»åªèƒ½è¯»æœ€æ–°çš„ï¼Œä½†æ˜¯åˆ é™¤æ ‡å¿—è¿˜æ²¡æ¥å¾—åŠæ¸…ç†æ‰ä¼šå¤šå‡ºæ¥ï¼Ÿ","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1584102974,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2571749,"avatar":"","nickname":"wdm","note":"","ucode":"E538FCDE900D6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":369053,"discussion_content":"insertæ˜¯åœ¨è§†å›¾åˆ›å»ºåæäº¤çš„ æœ¬èº«å¯¹äº‹åŠ¡Aä¸å¯è§äº†å•Š ä¸ºä»€ä¹ˆè¿˜è¦è¯´ä¿è¯ä¸€è‡´æ€§è¯»","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1618912984,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1648865,"avatar":"https://static001.geekbang.org/account/avatar/00/19/28/e1/93886c86.jpg","nickname":"é‡‘é‡çŸ³é â´Â².â‚â‚‰â‚…","note":"","ucode":"38F3DD549A5676","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":229514,"discussion_content":"è¿™æ ·æ˜¯æˆ‘çœ‹åˆ°æ¡ˆä¾‹æ—¶äº§ç”Ÿçš„ç–‘é—®ï¼Œå±‚ä¸»è§£é‡Šçš„å¤ªæ£’äº†","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1586659862,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1986739,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/50/b3/9269cd59.jpg","nickname":"LWD","note":"","ucode":"DDA444DB113C01","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":587303,"discussion_content":"mysqlçš„å¿«ç…§æœ‰2ç§å®ç°ï¼š1.èƒ½åŸåœ°æ›´æ–°åˆ™é‡‡ç”¨undo logè®°å½•è€å€¼ 2.ä¸èƒ½åŸåœ°æ›´æ–°åˆ™é€»è¾‘æ‰“ä¸Šåˆ é™¤æ ‡è¯†å¹¶æ–°å¢ä¸€æ¡è®°å½•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662969178,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ"},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":3178022,"avatar":"https://static001.geekbang.org/account/avatar/00/30/7e/26/4f17e754.jpg","nickname":"Brian","note":"","ucode":"87D7902656C93E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1986739,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/50/b3/9269cd59.jpg","nickname":"LWD","note":"","ucode":"DDA444DB113C01","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":587308,"discussion_content":"å¯ä»¥è§£é‡Šä¸€ä¸‹ï¼Œä»€ä¹ˆæ—¶å€™ä¼šåŸåœ°æ›´æ–°? è°¢è°¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662971465,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":587303,"ip_address":"å¹¿ä¸œ"},"score":587308,"extra":""},{"author":{"id":1986739,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/50/b3/9269cd59.jpg","nickname":"LWD","note":"","ucode":"DDA444DB113C01","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":3178022,"avatar":"https://static001.geekbang.org/account/avatar/00/30/7e/26/4f17e754.jpg","nickname":"Brian","note":"","ucode":"87D7902656C93E","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":590073,"discussion_content":"è®°å½•æ›´æ–°ä»¥åå¤§äºåŸæ¥ç©ºé—´ï¼›","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1665501292,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":587308,"ip_address":"å¹¿ä¸œ"},"score":590073,"extra":""}]},{"author":{"id":1041685,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKPIrGvZ9qJOmfwy37ruzpKQXlTxA1WACHiaPWEq59tR3ID6Dp9qo7L7nlbic4TiamCSribxwqV7IKKSg/132","nickname":"Seven","note":"","ucode":"78266D8828B61B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":81336,"discussion_content":"æ€ä¹ˆç»Ÿè®¡ä¿¡æ¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576242319,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1041685,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKPIrGvZ9qJOmfwy37ruzpKQXlTxA1WACHiaPWEq59tR3ID6Dp9qo7L7nlbic4TiamCSribxwqV7IKKSg/132","nickname":"Seven","note":"","ucode":"78266D8828B61B","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":153179,"discussion_content":"show index from t;","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580034945,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":81336,"ip_address":""},"score":153179,"extra":""}]},{"author":{"id":1173894,"avatar":"https://static001.geekbang.org/account/avatar/00/11/e9/86/d34800a4.jpg","nickname":"heyman","note":"","ucode":"92EF9EF1B1B1B3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":47582,"discussion_content":"æ‰€ä»¥ç¬¬2ç§æƒ…å†µè§¦å‘äº†cardinalityçš„é‡æ–°è®¡ç®—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573371116,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1173894,"avatar":"https://static001.geekbang.org/account/avatar/00/11/e9/86/d34800a4.jpg","nickname":"heyman","note":"","ucode":"92EF9EF1B1B1B3","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":153182,"discussion_content":"ç¬¬2ç§æƒ…å†µä¸»è¦æ˜¯é’ˆå¯¹æ‰«æè¡Œæ•°æ¥è¯´ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580035069,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":47582,"ip_address":""},"score":153182,"extra":""},{"author":{"id":1324122,"avatar":"https://static001.geekbang.org/account/avatar/00/14/34/5a/723311cd.jpg","nickname":"å¥å­","note":"","ucode":"C0C20F466DF9D0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":336413,"discussion_content":"æ‰«æè¡Œæ•°è¿™é‡Œä¸ºä»€ä¹ˆæ˜¯37000ï¼Œæ˜¯æ€ä¹ˆè®¡ç®—çš„å‘¢ï¼Ÿå’Œcardinalityä¹‹é—´çš„å…³è”æ˜¯ä»€ä¹ˆï¼Ÿ","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1608566666,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":153182,"ip_address":""},"score":336413,"extra":""}]}]},{"had_liked":false,"id":48072,"user_name":"WL","can_delete":false,"product_type":"c1","uid":1173771,"ip_address":"","ucode":"6277DCD776B87E","user_header":"https://static001.geekbang.org/account/avatar/00/11/e9/0b/1171ac71.jpg","comment_is_top":false,"comment_ctime":1544342266,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"461105842938","product_id":100020801,"comment_content":"æŠŠè¯¥è®²å†…å®¹æ€»ç»“ä¸ºå‡ ä¸ªé—®é¢˜, å¤§å®¶å¤ä¹ çš„æ—¶å€™å¯ä»¥å…ˆå°è¯•å›ç­”è¿™äº›é—®é¢˜æ£€æŸ¥è‡ªå·±çš„æŒæ¡ç¨‹åº¦:<br><br>\t1. <br>mysqlå¦‚ä½•åˆ¤æ–­ä¸€ä¸ªæŸ¥è¯¢çš„æ‰«æè¡Œæ•°?<br>\t2. <br>ç´¢å¼•åŸºæ•°å¦‚ä½•è®¡ç®—? é€šè¿‡å“ªä¸ªå‚æ•°å¯ä»¥è®¾ç½®ç´¢å¼•ç»Ÿè®¡çš„å­˜å‚¨æ–¹å¼?<br>\t3. <br>å¯ä»¥é‡æ–°ç»Ÿè®¡ç´¢å¼•ä¿¡æ¯çš„å‘½ä»¤æ˜¯ä»€ä¹ˆ?<br>\t4. <br>å¦‚ä½•å®šä½ç´¢å¼•é€‰æ‹©å¼‚å¸¸è¿™æ ·çš„é—®é¢˜?<br>\t5. <br>ç´¢å¼•é€‰æ‹©å¼‚å¸¸çš„é—®é¢˜å¯ä»¥æœ‰å“ªå‡ ç§å¤„ç†æ–¹å¼?<br><br>","like_count":108},{"had_liked":false,"id":46966,"user_name":"Ying","can_delete":false,"product_type":"c1","uid":1307466,"ip_address":"","ucode":"FAE36C852765F2","user_header":"https://static001.geekbang.org/account/avatar/00/13/f3/4a/4874b350.jpg","comment_is_top":false,"comment_ctime":1544011469,"is_pvip":false,"replies":[{"id":"16754","content":"ğŸ‘ğŸ¿<br><br>è€Œä¸”å‘è¯„è®ºçš„æ—¶å€™è¿˜åšäº†å¾ˆç»†è‡´åœ°è„±æ•ï¼Œèµ","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544016444,"ip_address":"","comment_id":46966,"utype":1}],"discussion_count":12,"race_medal":0,"score":"254947081933","product_id":100020801,"comment_content":"ç°å­¦ç°ç”¨ ä»Šå¤©æœ‰ä¸ª500ä¸‡çš„è¡¨ åˆ†é¡µæŸ¥è¯¢ç‰¹åˆ«æ…¢ã€‚<br>select * from table where create_time and create_time&gt;=æ—¶é—´æˆ³ and  create_time&lt;=æ—¶é—´æˆ³ <br>and subtype=&#39;xx&#39; and type=&#39;xx&#39; and company_id =x order by create_time limited 90,30 ;<br>å·²ç»å»ºç«‹äº†ç»„åˆç´¢å¼• union_indexåŒ…æ‹¬å­—æ®µ create_time subtype  type company_id<br>ä½†æ˜¯ explain å‘ç°ç«Ÿç„¶èµ°äº†create_time çš„ç´¢å¼•<br>è¯­å¥é‡ŒåŠ äº†ä¸€ä¸ªuse index(union_index) ï¼Œç«‹é©¬å¥½äº†<br>çœŸæ­£çš„è§£å†³äº†å®¢æˆ·çš„å®é™…é—®é¢˜å•Šã€‚ æ„Ÿè°¢è€å¸ˆ","like_count":59,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431622,"discussion_content":"ğŸ‘ğŸ¿\n\nè€Œä¸”å‘è¯„è®ºçš„æ—¶å€™è¿˜åšäº†å¾ˆç»†è‡´åœ°è„±æ•ï¼Œèµ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544016444,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":153200,"discussion_content":"ç›´æ¥å°†createtimeç´¢å¼•åˆ é™¤å§ã€‚ç”¨ç»„åˆç´¢å¼•å°±å¤Ÿäº†ã€‚","likes_number":15,"is_delete":false,"is_hidden":false,"ctime":1580036870,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1446512,"avatar":"https://static001.geekbang.org/account/avatar/00/16/12/70/10faf04b.jpg","nickname":"Lywane","note":"","ucode":"2B0027AA069CE9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":128441,"discussion_content":"è¿™ä¸ªä¸æ˜¯åªéœ€è¦è”åˆç´¢å¼•å°±è¡Œäº†å—ï¼Œcreate_timeå•åˆ—ç´¢å¼•æ²¡æœ‰å­˜åœ¨å¿…è¦äº†å§","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1578640311,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1652085,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKORTofsU89GYKtywquzKuEiabvZnEOonfMYKuCPlo8GDlXqZuJdBicu0XtlaeodH4BnmHV1kldSAwQ/132","nickname":"æœªæ¥æ€æ ·","note":"","ucode":"4E54EB62595B27","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":14661,"discussion_content":"æœ€å·¦å‰ç¼€ è·Ÿwhereæ¡ä»¶ä¹‹å å­—æ®µçš„å‰åé¡ºåºæ— å…³ï¼Œåªè¦åŒ…å«äº†è”åˆç´¢å¼•ä¸­å·¦æ–¹å­—æ®µå³å¯","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1568775559,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1593957,"avatar":"https://static001.geekbang.org/account/avatar/00/18/52/65/320eccb3.jpg","nickname":"ç‹æ–¯æ‹‰","note":"","ucode":"D00DD3CE432189","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":1706,"discussion_content":"æ˜¯ä¸æ˜¯å¦‚æœæŠŠè¯­å¥çš„create_timeæ”¹åˆ°åé¢ä¹Ÿèƒ½è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå› ä¸ºæœ€å·¦å‰ç¼€çš„åŸç†ã€‚","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1562830774,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1335293,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKR3ibELhjgVicCNShZCBwvaDxibnzibggG4wUzVkS2mkDxUBZyIs87nDEdJ7PiahJBVoZcuhQ84RxAziag/132","nickname":"å‘¨æ²»æ…§","note":"","ucode":"7D56C4E66BEE17","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1593957,"avatar":"https://static001.geekbang.org/account/avatar/00/18/52/65/320eccb3.jpg","nickname":"ç‹æ–¯æ‹‰","note":"","ucode":"D00DD3CE432189","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":186320,"discussion_content":"è·Ÿwhereæ¡ä»¶çš„é¡ºåºæ²¡æœ‰å…³ç³»,è¿™é‡Œæ˜¯å› ä¸ºorder byçš„æ—¶å€™create_timeå­—æ®µåŸå› æ²¡å»é€‰æ‹©è”åˆç´¢å¼•  å»æ‰create_timeå•ç‹¬çš„ç´¢å¼•å­—æ®µå³å¯","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1582676616,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":1706,"ip_address":""},"score":186320,"extra":""},{"author":{"id":1986739,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/50/b3/9269cd59.jpg","nickname":"LWD","note":"","ucode":"DDA444DB113C01","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1335293,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKR3ibELhjgVicCNShZCBwvaDxibnzibggG4wUzVkS2mkDxUBZyIs87nDEdJ7PiahJBVoZcuhQ84RxAziag/132","nickname":"å‘¨æ²»æ…§","note":"","ucode":"7D56C4E66BEE17","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":587305,"discussion_content":"è¿™é‡Œçš„æƒ…å†µè·Ÿæ’åºæ²¡æœ‰å…³ç³»ï¼Œ2ä¸ªç´¢å¼•æ’åºæˆæœ¬éƒ½ä¸€è‡´","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662969682,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":186320,"ip_address":"å¹¿ä¸œ"},"score":587305,"extra":""}]},{"author":{"id":1501671,"avatar":"","nickname":"bobo","note":"","ucode":"0A3DA38BB8925F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":141419,"discussion_content":"è¿™é‡Œåº”è¯¥æ˜¯mysqlæƒ³ç”¨create_timeç´¢å¼•è¿›è¡Œæ’åºï¼Œç´¢å¼•æ²¡æœ‰ä½¿ç”¨è”åˆç´¢å¼•","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1579420033,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1624574,"avatar":"https://static001.geekbang.org/account/avatar/00/18/c9/fe/874b172b.jpg","nickname":"benxiong","note":"","ucode":"F6498059D439D9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":303967,"discussion_content":"è¯·é—®æ˜¯ç”¨äº† use index è¿˜æ˜¯force index è§£å†³çš„ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599439017,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1643181,"avatar":"https://static001.geekbang.org/account/avatar/00/19/12/ad/8a149930.jpg","nickname":"é’åŸ","note":"","ucode":"9C255FF808D4EF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1624574,"avatar":"https://static001.geekbang.org/account/avatar/00/18/c9/fe/874b172b.jpg","nickname":"benxiong","note":"","ucode":"F6498059D439D9","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":350297,"discussion_content":"use indexå’Œforce indexéƒ½å¯ä»¥è®©ä¼˜åŒ–å™¨ä½¿ç”¨æŒ‡å®šçš„ç´¢å¼•","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1613803881,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":303967,"ip_address":""},"score":350297,"extra":""}]},{"author":{"id":2086624,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/d6/e0/3ccaaa7b.jpg","nickname":"é¢†å­","note":"","ucode":"64AC4E6AB74E68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":294541,"discussion_content":"è¿™ä¸ªå†™æ³•è™½ç„¶å‡å°‘äº†å›è¡¨çš„æ•°é‡ï¼Œä½†æ˜¯èµ°äº†å…¨ç´¢å¼•æ‰«æ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595921291,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1758820,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/d6/64/17ac0b0c.jpg","nickname":"ååå","note":"","ucode":"D3374AF036254D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":294262,"discussion_content":"ä¹Ÿè®¸ä¸šåŠ¡è¦ä¿è¯å”¯ä¸€æ€§ï¼Œæ€ä¹ˆéšä¾¿åˆ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595842517,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":48974,"user_name":"Niko.","can_delete":false,"product_type":"c1","uid":1304975,"ip_address":"","ucode":"AC573B894DC693","user_header":"https://static001.geekbang.org/account/avatar/00/13/e9/8f/0de9ca55.jpg","comment_is_top":false,"comment_ctime":1544584180,"is_pvip":false,"discussion_count":36,"race_medal":0,"score":"190523145204","product_id":100020801,"comment_content":"æˆ‘è¯•äº†å‡ é ä¹Ÿæ˜¯æ²¡æœ‰å¤ç°é€‰é”™ç´¢å¼•<br>Aä¼šè¯<br>mysql&gt; select @@tx_isolation;<br>+-----------------+<br>| @@tx_isolation  |<br>+-----------------+<br>| REPEATABLE-READ |<br>+-----------------+<br>1 row in set, 1 warning (0.01 sec)<br><br>mysql&gt; select @@version<br>    -&gt; ;<br>+------------+<br>| @@version  |<br>+------------+<br>| 5.7.22-log |<br>+------------+<br>1 row in set (0.00 sec)<br>mysql&gt; start transaction with consistent snapshot;<br>Query OK, 0 rows affected (0.00 sec)<br><br>Bä¼šè¯<br>mysql&gt; delete from t;<br>Query OK, 100000 rows affected (2.58 sec)<br><br>mysql&gt; call idata();<br>Query OK, 1 row affected (24.32 sec)<br><br>mysql&gt; explain select * from t where a between 10000 and 20000;<br>+----+-------------+-------+------------+-------+---------------+------+---------+------+-------+----------+-----------------------+<br>| id | select_type | table | partitions | type  | possible_keys | key  | key_len | ref  | rows  | filtered | Extra                 |<br>+----+-------------+-------+------------+-------+---------------+------+---------+------+-------+----------+-----------------------+<br>|  1 | SIMPLE      | t     | NULL       | range | a             | a    | 5       | NULL | 10001 |   100.00 | Using index condition |<br>+----+-------------+-------+------------+-------+---------------+------+---------+------+-------+----------+-----------------------+<br>1 row in set, 1 warning (0.00 sec)<br><br>ä¸ºå•¥å‘¢ï¼Ÿ ","like_count":44,"discussions":[{"author":{"id":1228424,"avatar":"https://static001.geekbang.org/account/avatar/00/12/be/88/8d15796f.jpg","nickname":"John","note":"","ucode":"A46AF2906C38C1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":310323,"discussion_content":"è€å¸ˆçš„è¡¨åº”è¯¥æ˜¯ä¸»é”®è‡ªå¢çš„ï¼Œä¼°è®¡ SQL å‘é”™äº†ï¼Œä¸‹é¢æ˜¯æˆ‘å¤ç°çš„SQL\n```mysql\nCREATE TABLE `t` (\n  `id` int(11) AUTO_INCREMENT NOT NULL,\n  `a` int(11) DEFAULT NULL,\n  `b` int(11) DEFAULT NULL,\n  PRIMARY KEY (`id`),\n  KEY `a` (`a`),\n  KEY `b` (`b`)\n) ENGINE=InnoDB;\n\ndelimiter ;;\ncreate procedure idata()\nbegin\n  declare i int;\n  set i=1;\n  while(i<=100000)do\n    insert into t(a, b) values(i, i);\n    set i=i+1;\n  end while;\nend;;\ndelimiter ;\n\ncall idata();\n```\nè‡³äºä¸»é”®è‡ªå¢å’Œéè‡ªå¢çš„åŒºåˆ«ï¼š\n- è‡ªå¢çš„æ—¶å€™ï¼Œå¯¹äºäºŒçº§ç´¢å¼•aæ¥è¯´ï¼Œåˆ é™¤æ‰çš„10wè¡Œæ•°æ®å’Œé‡æ–°æ’å…¥çš„10wè¡Œæ•°æ®åœ¨å…¶å¶å­èŠ‚ç‚¹ä¸­ä¿å­˜çš„ä¸»é”®å­—æ®µå€¼æ˜¯ä¸ä¸€æ ·çš„ï¼Œæ­¤æ—¶å› ä¸ºå¦å¤–ä¸€ä¸ªäº‹åŠ¡çš„ä¸€è‡´æ€§è§†å›¾å¯¼è‡´åˆ é™¤æ‰çš„10wè¡Œæ•°æ®åªèƒ½ç»§ç»­ä¿ç•™åœ¨ç´¢å¼•ä¸­ï¼Œä½¿å¾—å®ƒå†æ¬¡æŸ¥è¯¢è¿™äº›æ•°æ®çš„æ—¶å€™å¯ä»¥æŸ¥è¯¢å¾—åˆ°ã€‚æ‰€ä»¥æ­¤æ—¶ç´¢å¼•aé‡Œé¢æ˜¯æœ‰20wæ•°æ®çš„\n- éè‡ªå¢ï¼Œå°±æ˜¯è€å¸ˆæ–‡ç« ä¸­å‘å‡ºæ¥çš„å»ºè¡¨å’Œå­˜å‚¨è¿‡ç¨‹è¯­å¥ï¼Œåˆ é™¤æ‰å’Œæ–°å¢çš„10wè¡Œæ•°æ®çš„ä¸»é”®å€¼æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥æ–°å¢çš„æ¯è¡Œæ•°æ®åœ¨æ’å…¥çš„æ—¶å€™éƒ½ä¼šé€šè¿‡ï¼ˆaï¼Œidï¼‰çš„æ–¹å¼ä¹Ÿå®šä½äº†åˆ°äº†å¯¹åº”çš„åˆ é™¤çš„æ•°æ®è¡Œï¼Œæ‰€ä»¥æ–°å¢çš„æ•°æ®ä¼šè¦†ç›–ä¸ºæœ€æ–°ç‰ˆæœ¬ï¼ŒåŒæ—¶åˆ é™¤çš„æ•°æ®è¡Œè¢«æ„é€ ä¸ºè¯¥æœ€æ–°ç‰ˆæœ¬çš„undo logäº†ï¼Œæ­¤æ—¶ç´¢å¼•ä¸­åªæœ‰10wè¡Œæ•°æ®ã€‚\n\nè¿™æ˜¯æˆ‘ä¸ªäººçš„ç†è§£ï¼Œè¡Œæ‰«æé¢„ä¼°æ˜¯ç›´æ¥æ ¹æ®ç´¢å¼•çš„pageä¸­çš„æœ‰å¤šå°‘è¡Œè¿›è¡ŒæŠ½æ ·æ£€æŸ¥çš„ï¼Œå› ä¸ºåƒè‡ªå¢çš„æƒ…å½¢ï¼Œè™½ç„¶è¯´åˆ é™¤çš„10wè¡Œæ•°æ®è¢«æ ‡è®°ä¸ºåˆ é™¤äº†ï¼Œä½†æ˜¯å¦‚æœå®ƒä¸èƒ½å½»åº•åœ°ä»ç´¢å¼•ä¸­ç§»é™¤ï¼ˆåˆ é™¤çº¿ç¨‹æ¥ä¸åŠåˆ é™¤æˆ–è€…å®ƒçš„undo logè¢«å…¶å®ƒread viewå¼•ç”¨å¯¼è‡´ä¸èƒ½åˆ é™¤ï¼‰ï¼Œé‚£ä¹ˆå®ƒå°±è¿˜æ˜¯åœ¨è¯¥ç´¢å¼•ä¸­çš„ï¼Œæ‰€ä»¥åˆ©ç”¨ç´¢å¼•aè¿›è¡Œæ£€ç´¢çš„æ—¶å€™ï¼Œå¿…ç„¶ä¼šæ£€ç´¢åˆ°è¿™äº›åˆ é™¤çš„ç´¢å¼•ï¼Œç„¶åå†æ£€æŸ¥å®ƒæ˜¯å¦æ˜¯æ ‡è®°ä¸ºdeleteçš„ï¼Œè¿™ä¸ªæ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„è®¡ç®—æ¥çš„ï¼Œæ‰€ä»¥ä¸ªäººç†è§£å·®å¼‚åº”è¯¥è¿™é‡Œã€‚ã€‚ã€‚ã€‚ã€‚\n\nä¸çŸ¥é“è¯´çš„å¯¹ä¸å¯¹ã€‚ã€‚ã€‚","likes_number":31,"is_delete":false,"is_hidden":false,"ctime":1601776238,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":10,"child_discussions":[{"author":{"id":1229070,"avatar":"https://static001.geekbang.org/account/avatar/00/12/c1/0e/2b987d54.jpg","nickname":"èœ‰è£","note":"","ucode":"77CF92496855D4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1228424,"avatar":"https://static001.geekbang.org/account/avatar/00/12/be/88/8d15796f.jpg","nickname":"John","note":"","ucode":"A46AF2906C38C1","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":310349,"discussion_content":"æ„Ÿè°¢ï¼Œå€ŸåŠ©ä½ çš„æ–¹æ³•å¤ç°äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1601791774,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":310323,"ip_address":""},"score":310349,"extra":""},{"author":{"id":2299060,"avatar":"https://static001.geekbang.org/account/avatar/00/23/14/b4/6418c05a.jpg","nickname":"æˆ‘çš„åˆš","note":"","ucode":"243BAE26E2295D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1228424,"avatar":"https://static001.geekbang.org/account/avatar/00/12/be/88/8d15796f.jpg","nickname":"John","note":"","ucode":"A46AF2906C38C1","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":325756,"discussion_content":"ä½ è¯´çš„å¾ˆnice ç‰›é€¼å…‹æ‹‰æ–¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605425944,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":310323,"ip_address":""},"score":325756,"extra":""},{"author":{"id":2326134,"avatar":"https://static001.geekbang.org/account/avatar/00/23/7e/76/368394bf.jpg","nickname":"å“¦","note":"","ucode":"C776659DED9D79","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1228424,"avatar":"https://static001.geekbang.org/account/avatar/00/12/be/88/8d15796f.jpg","nickname":"John","note":"","ucode":"A46AF2906C38C1","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":331654,"discussion_content":"nice","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606922521,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":310323,"ip_address":""},"score":331654,"extra":""}]},{"author":{"id":1044546,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f0/42/7728d4f5.jpg","nickname":"è‰¿è‰¿","note":"","ucode":"8F727AB7A7F6B2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":34104,"discussion_content":"æˆ‘ä¹Ÿæ˜¯ã€‚ã€‚ã€‚\n\næˆ‘å·²ç»ä¸åœ¨å»æ¨¡æ‹Ÿäº†ï¼Œå‡è£…å‡ºç°äº†ã€‚ç†è§£æ„æ€å°±å¥½ã€‚","likes_number":19,"is_delete":false,"is_hidden":false,"ctime":1571157263,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":7,"child_discussions":[{"author":{"id":1243722,"avatar":"https://static001.geekbang.org/account/avatar/00/12/fa/4a/a31fd498.jpg","nickname":"æ—…äººé˜¿æ°é²","note":"","ucode":"1483D608AEDC2E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1044546,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f0/42/7728d4f5.jpg","nickname":"è‰¿è‰¿","note":"","ucode":"8F727AB7A7F6B2","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":283528,"discussion_content":"æˆ‘å±…ç„¶åœ¨è¿™é‡Œçœ‹åˆ°äº†èŠ‹é“æºç ã€‚ã€‚ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1592291667,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":34104,"ip_address":""},"score":283528,"extra":""},{"author":{"id":1044546,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f0/42/7728d4f5.jpg","nickname":"è‰¿è‰¿","note":"","ucode":"8F727AB7A7F6B2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1243722,"avatar":"https://static001.geekbang.org/account/avatar/00/12/fa/4a/a31fd498.jpg","nickname":"æ—…äººé˜¿æ°é²","note":"","ucode":"1483D608AEDC2E","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":284360,"discussion_content":"é¢ï¼Œæˆ‘ä¹Ÿè®¤çœŸå­¦ä¹ ä¹Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1592518568,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":283528,"ip_address":""},"score":284360,"extra":""},{"author":{"id":1243722,"avatar":"https://static001.geekbang.org/account/avatar/00/12/fa/4a/a31fd498.jpg","nickname":"æ—…äººé˜¿æ°é²","note":"","ucode":"1483D608AEDC2E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1044546,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f0/42/7728d4f5.jpg","nickname":"è‰¿è‰¿","note":"","ucode":"8F727AB7A7F6B2","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":285020,"discussion_content":"æˆ‘ç»å¸¸é€›ä½ çš„åšå®¢çš„ğŸ˜‚ğŸ˜‚ğŸ˜‚ï¼Œåªæ˜¯åœ¨è¿™é‡Œçœ‹åˆ°æœ‰ç‚¹æ„å¤–","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1592716583,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":284360,"ip_address":""},"score":285020,"extra":""}]},{"author":{"id":1798979,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/73/43/ae139b1f.jpg","nickname":"åš","note":"","ucode":"F7CA69FF5D09BA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":128354,"discussion_content":"ä¼°è®¡æ˜¯mysqlçš„ç‰ˆæœ¬ä¸åŒå¯¼è‡´çš„å§ï¼Œæˆ‘ç”¨çš„ä¹Ÿæ˜¯5.7çš„ï¼Œä¹Ÿæ²¡æœ‰å‡ºç°è¯¥æƒ…å†µ","likes_number":6,"is_delete":false,"is_hidden":false,"ctime":1578631634,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2459923,"avatar":"https://static001.geekbang.org/account/avatar/00/25/89/13/0d3c5008.jpg","nickname":"æœ€å¥½ä¸è¿‡","note":"","ucode":"C7DBCD08402DF8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":374714,"discussion_content":"MySQL8.0æ²¡æœ‰å¤ç°","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1621324474,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1063308,"avatar":"https://static001.geekbang.org/account/avatar/00/10/39/8c/089525aa.jpg","nickname":"å°ä¹™å“¥","note":"","ucode":"C77E79BEA0C325","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2459923,"avatar":"https://static001.geekbang.org/account/avatar/00/25/89/13/0d3c5008.jpg","nickname":"æœ€å¥½ä¸è¿‡","note":"","ucode":"C7DBCD08402DF8","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":399181,"discussion_content":"æˆ‘çš„8.0.19ä¹Ÿæ²¡æœ‰å¤ç°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632917670,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":374714,"ip_address":""},"score":399181,"extra":""}]},{"author":{"id":1515223,"avatar":"https://static001.geekbang.org/account/avatar/00/17/1e/d7/7d28a531.jpg","nickname":"é£æœºç¿…è†€ä¸Š","note":"","ucode":"D239DFFECDBF01","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":332863,"discussion_content":"ä¸ºä»€ä¹ˆéè¦å¤ç°å‘¢ï¼Œè®²å¸ˆå°±æ˜¯æè¿°äº†è¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼ŒMySQLé€‰é”™ç´¢å¼•åˆä¸æ˜¯ä¸€å¤©ä¸¤å¤©çš„äº‹äº†ã€‚å› ä¸ºè¿™æ˜¯ä¸€ä¸ªBUGï¼ŒMySQLä¹Ÿåœ¨ä¸æ–­ä¼˜åŒ–ï¼Œæ‰€ä»¥é«˜ç‰ˆæœ¬çš„å¯èƒ½ä¼šå¥½ä¸€ç‚¹","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1607356931,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1695608,"avatar":"https://static001.geekbang.org/account/avatar/00/19/df/78/d4946736.jpg","nickname":"å¾ˆå¤§çš„å‹‡æ°”","note":"","ucode":"7871D1C1E22F3F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1515223,"avatar":"https://static001.geekbang.org/account/avatar/00/17/1e/d7/7d28a531.jpg","nickname":"é£æœºç¿…è†€ä¸Š","note":"","ucode":"D239DFFECDBF01","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":577869,"discussion_content":"ä½ çœ‹æ–‡ç« æœ€åæåˆ°çš„é—®é¢˜ï¼Œâ€œä¸ºä½•å¤ç°ç´¢å¼•é€‰æ‹©é”™è¯¯æ—¶è¦ï¼Œæœ‰ä¸€ä¸ªsessionå¼€å¯ä¸€ä¸ªäº‹åŠ¡ã€‚â€ æ‰€ä»¥è¯´è¯¥é—®é¢˜è¿˜æ˜¯éœ€è¦ç ”ç©¶å’Œå®è·µçš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656400000,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":332863,"ip_address":""},"score":577869,"extra":""}]},{"author":{"id":2083033,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/c8/d9/51288e15.jpg","nickname":"å®‰ç•…","note":"","ucode":"03855E154A1AD3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":308126,"discussion_content":"æ²¡å¤ç°ï¼Œä¾ç„¶æ˜¯é€‰æ‹©çš„a","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1600850821,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1649057,"avatar":"https://static001.geekbang.org/account/avatar/00/19/29/a1/41607383.jpg","nickname":"hello","note":"","ucode":"4F42DAA5DB5C38","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":2083033,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/c8/d9/51288e15.jpg","nickname":"å®‰ç•…","note":"","ucode":"03855E154A1AD3","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":339391,"discussion_content":"ä¸€æ ·æ²¡æœ‰å¤ç°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609656565,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":308126,"ip_address":""},"score":339391,"extra":""}]},{"author":{"id":1354415,"avatar":"https://static001.geekbang.org/account/avatar/00/14/aa/af/98c5e896.jpg","nickname":"Lion","note":"","ucode":"AB9F4F373A5DF9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":304948,"discussion_content":"æˆ‘çš„ä¹Ÿä¸èƒ½å¤ç°ï¼šServer version: 5.7.28-log MySQL Community Server (GPL)","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1599720192,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1136228,"avatar":"https://static001.geekbang.org/account/avatar/00/11/56/64/b70e50c0.jpg","nickname":"å±±è¾£","note":"","ucode":"4EFEF826347809","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301339,"discussion_content":"åŠ ä¸€å“‡ï¼Œæˆ‘5.5å’Œ8éƒ½è¯•äº†çš„ç¡®æ²¡æœ‰å¤ç°","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1598493745,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1036353,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/d0/41/52be7dad.jpg","nickname":"é˜³","note":"","ucode":"44B06F129A2C65","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":285879,"discussion_content":"5.7.30ä¹Ÿæ˜¯æ— æ³•å¤ç°","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1592982760,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1591072,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIDhIpvB4hJnrY6bj9xJMK95b2XSicYJQIdavSp1dRbBUJr1gK22jgGodQIIZHP39qtDRia93d1WAVQ/132","nickname":"Seayoné˜¿é˜³","note":"","ucode":"50E14D9C03669E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":541848,"discussion_content":"5.7.34-log æœªæ›¾å¤ç°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640583997,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1194853,"avatar":"https://static001.geekbang.org/account/avatar/00/12/3b/65/3a4fc8cf.jpg","nickname":"prepared","note":"","ucode":"00E54A5C7CDCBE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":400975,"discussion_content":"5.7.12 æ²¡æœ‰å¤ç°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633508693,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1513833,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/T47ep9TMicuHcPAYnu1vAiaxq0But7pgpLEdNKcice8sfsl1UdzDGhQorHhpbBfHOtf5vmZZe9w5Z3nAezBaxGspg/132","nickname":"é»‘é»‘","note":"","ucode":"3948F4DA211374","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":321780,"discussion_content":"5.7.31,idå­—æ®µå˜æˆè‡ªå¢ï¼Œå¯ä»¥å¤ç°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604631267,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1194853,"avatar":"https://static001.geekbang.org/account/avatar/00/12/3b/65/3a4fc8cf.jpg","nickname":"prepared","note":"","ucode":"00E54A5C7CDCBE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":297010,"discussion_content":"æ²¡å¤ç°+1ï¼Œmysqlç‰ˆæœ¬ 5.7","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596727415,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1180676,"avatar":"https://static001.geekbang.org/account/avatar/00/12/04/04/0af56558.jpg","nickname":"Jc.Chen","note":"","ucode":"36886491352CD4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":267776,"discussion_content":"æˆ‘ä¹Ÿæ˜¯å¤ç°ä¸äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589686360,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1986918,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/51/66/00b24ae2.jpg","nickname":"Andy","note":"","ucode":"EC6259AAD64533","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":258171,"discussion_content":"ä¿ºä¹Ÿä¸€æ ·","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588658747,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1026960,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/ab/90/52d85edf.jpg","nickname":"Alvin","note":"","ucode":"BAC5FDAF1E3E5E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":164342,"discussion_content":"me too","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581169935,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":46767,"user_name":"æ–œé¢é•œå­ Bill","can_delete":false,"product_type":"c1","uid":1305242,"ip_address":"","ucode":"B5505F94540D52","user_header":"https://static001.geekbang.org/account/avatar/00/13/ea/9a/02d589f9.jpg","comment_is_top":false,"comment_ctime":1543978771,"is_pvip":false,"replies":[{"id":"16697","content":"ğŸ‘ğŸ¿","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543982866,"ip_address":"","comment_id":46767,"utype":1}],"discussion_count":4,"race_medal":0,"score":"181932605203","product_id":100020801,"comment_content":"é—®é¢˜çš„æ€è€ƒï¼š<br>æˆ‘ç†è§£ session A å¼€å¯çš„äº‹åŠ¡å¯¹ session Bçš„deleteæ“ä½œåçš„ç´¢å¼•æ•°æ®çš„ç»Ÿè®¡æ—¶æ•ˆäº§ç”Ÿäº†å½±å“ï¼Œå› ä¸ºéœ€è¦ä¿è¯äº‹åŠ¡Açš„é‡å¤è¯»ï¼Œåœ¨æ•°æ®é¡µæ²¡æœ‰å®é™…åˆ é™¤ï¼Œè€Œç´¢å¼•çš„ç»Ÿè®¡é€‰æ‹©äº†Nä¸ªæ•°æ®é¡µï¼Œè¿™éƒ¨åˆ†æ•°æ®é¡µä¸æ”¶åˆ°å‰å°äº‹åŠ¡çš„å½±å“ï¼Œæ‰€ä»¥æ•´ä½“ç»Ÿè®¡å€¼ä¼šå˜å¤§ï¼Œç›´æ¥å½±å“äº†ç´¢å¼•é€‰æ‹©çš„å‡†ç¡®æ€§ï¼›","like_count":42,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431538,"discussion_content":"ğŸ‘ğŸ¿","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543982866,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1810051,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK0uyg1IicbEhLwsgM2A2ROoyVdWdmUqZfQfs6G67w9m3hdRNBMOQJatQoACj3qNGgj2KVIgricaYiaQ/132","nickname":"æœ¨å¾—æ„Ÿæƒ…çš„ç¼–ç æœºå™¨","note":"","ucode":"9C6CD47ADCB8E6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":169869,"discussion_content":"å…„å¼Ÿï¼Œæˆ‘è§‰å¾—ä½ çš„å›ç­”æ¯”ç½®é¡¶å›ç­”æ›´å®¹æ˜“ç†è§£ã€‚èµï¼","likes_number":7,"is_delete":false,"is_hidden":false,"ctime":1581651532,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1041685,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKPIrGvZ9qJOmfwy37ruzpKQXlTxA1WACHiaPWEq59tR3ID6Dp9qo7L7nlbic4TiamCSribxwqV7IKKSg/132","nickname":"Seven","note":"","ucode":"78266D8828B61B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":81337,"discussion_content":"åŸºæ•°æ˜¯æ€ä¹ˆè®¡ç®—çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576242375,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1041685,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKPIrGvZ9qJOmfwy37ruzpKQXlTxA1WACHiaPWEq59tR3ID6Dp9qo7L7nlbic4TiamCSribxwqV7IKKSg/132","nickname":"Seven","note":"","ucode":"78266D8828B61B","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":153205,"discussion_content":"é‡‡æ ·ç»Ÿè®¡æ—¶ï¼ŒInnoDBé»˜è®¤ä¼šé€‰æ‹©Nä¸ªæ•°æ®é¡µï¼Œç»Ÿè®¡è¿™äº›é¡µé¢ä¸Šçš„ä¸åŒå€¼ï¼Œå¾—åˆ°ä¸€ä¸ªå¹³å‡å€¼ï¼Œç„¶åä¹˜ä»¥è¿™ä¸ªç´¢å¼•çš„é¡µé¢æ•°ï¼Œå°±å¾—åˆ°äº†è¿™ä¸ªç´¢å¼•çš„åŸºæ•°ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580037588,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":81337,"ip_address":""},"score":153205,"extra":""}]}]},{"had_liked":false,"id":65022,"user_name":"æ¢ä¸­å","can_delete":false,"product_type":"c1","uid":1006789,"ip_address":"","ucode":"52FE40242CBAD0","user_header":"https://static001.geekbang.org/account/avatar/00/0f/5c/c5/1231d633.jpg","comment_is_top":false,"comment_ctime":1549004819,"is_pvip":true,"replies":[{"id":"23040","content":"å¥½é—®é¢˜<br>where  A in (a,b,c) AND B in (x,y,z)<br>ä¼šè½¬æˆ<br> <br>(A=a and B=x) or (A=a and B=y) or (A=a and B=z) or<br>(A=b and B=x) or (A=b and B=y) or (A=b and B=z) or<br>(A=c and B=x) or (A=c and B=y) or (A=c and B=z) ","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1549008398,"ip_address":"","comment_id":65022,"utype":1}],"discussion_count":17,"race_medal":1,"score":"177642663955","product_id":100020801,"comment_content":"å‡å¦‚è¦æŸ¥ A in () AND B in (), æ€ä¹ˆå»ºç´¢å¼•?","like_count":41,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438280,"discussion_content":"å¥½é—®é¢˜\nwhere  A in (a,b,c) AND B in (x,y,z)\nä¼šè½¬æˆ\n \n(A=a and B=x) or (A=a and B=y) or (A=a and B=z) or\n(A=b and B=x) or (A=b and B=y) or (A=b and B=z) or\n(A=c and B=x) or (A=c and B=y) or (A=c and B=z) ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1549008398,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":2,"child_discussions":[{"author":{"id":2822072,"avatar":"","nickname":"600988277","note":"","ucode":"2071F6F66087CF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":532170,"discussion_content":"è½¬æˆ\n \n(A=a and B=x) or (A=a and B=y) or (A=a and B=z) or\n(A=b and B=x) or (A=b and B=y) or (A=b and B=z) or\n(A=c and B=x) or (A=c and B=y) or (A=c and B=z)\nå› ä¸ºorçš„åŸå› ï¼Œè¿™ä¸ªè¯­å¥æ˜¯ä¸èµ°ç´¢å¼•çš„å§ï¼Œä¼šé€ æˆå…¨è¡¨æ‰«æ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637548847,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":438280,"ip_address":""},"score":532170,"extra":"{\"user_type\":1}"},{"author":{"id":2633486,"avatar":"https://static001.geekbang.org/account/avatar/00/28/2f/0e/d61a9a47.jpg","nickname":"2Years","note":"","ucode":"9CC611009FCA4E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2822072,"avatar":"","nickname":"600988277","note":"","ucode":"2071F6F66087CF","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":549952,"discussion_content":"a,béƒ½æœ‰ç´¢å¼•æ˜¯ä¼šèµ°çš„å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644309769,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":532170,"ip_address":""},"score":549952,"extra":""}]},{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":153207,"discussion_content":"å°†A,Bå»ºç«‹è”åˆç´¢å¼•å°±è¡Œå§ã€‚","likes_number":7,"is_delete":false,"is_hidden":false,"ctime":1580037694,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1124075,"avatar":"https://static001.geekbang.org/account/avatar/00/11/26/eb/24e0ac9c.jpg","nickname":"å¬´æ¢¦å·","note":"","ucode":"104CDFD26A1711","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":362098,"discussion_content":"å¯è§ï¼Œè®¡ç®—æœºä¸–ç•Œé‡Œé¢å…¶å®æ²¡æœ‰æ·å¾„ï¼Œå½’æ ¹ç»“åº•éƒ½æ˜¯â€œæš´åŠ›ç ´å‡»â€â€œéå†â€ã€‚åªä¸è¿‡ï¼Œå¦‚æœé‡‡ç”¨äº†ç´¢å¼•ç­‰ç»“æ„ï¼Œéå†æ¬¡æ•°ä¼šå¤§å¤§å‡å°ç½¢äº†","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1616849789,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1235750,"avatar":"https://static001.geekbang.org/account/avatar/00/12/db/26/3c8d68fb.jpg","nickname":"å¤©ä½¿æ¢¦æ³ª","note":"","ucode":"782991747DD424","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3274,"discussion_content":"å¯ä»¥åˆ›å»ºï¼ˆa,x,y,zï¼‰(b,x,y,z)  (c,x,y,z)ä¸‰ä¸ªè”åˆç´¢å¼•ï¼Œå¯¹å—ï¼Ÿ","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1564370424,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":10,"child_discussions":[{"author":{"id":1308783,"avatar":"https://static001.geekbang.org/account/avatar/00/13/f8/6f/080973cf.jpg","nickname":"Edward","note":"","ucode":"10FAADF92D05F4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1235750,"avatar":"https://static001.geekbang.org/account/avatar/00/12/db/26/3c8d68fb.jpg","nickname":"å¤©ä½¿æ¢¦æ³ª","note":"","ucode":"782991747DD424","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":7022,"discussion_content":"a x y zæ˜¯å€¼ï¼Œå­—æ®µæ˜¯Aå’ŒBï¼Œæ­¤å¤„å»ºç«‹ABè”åˆç´¢å¼•å³å¯","likes_number":19,"is_delete":false,"is_hidden":false,"ctime":1567269278,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":3274,"ip_address":""},"score":7022,"extra":""},{"author":{"id":1241420,"avatar":"https://static001.geekbang.org/account/avatar/00/12/f1/4c/8db65c40.jpg","nickname":"Felix.WongğŸ˜ˆ à½²à½¼à¼½","note":"","ucode":"033F90CE6E8AF4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1235750,"avatar":"https://static001.geekbang.org/account/avatar/00/12/db/26/3c8d68fb.jpg","nickname":"å¤©ä½¿æ¢¦æ³ª","note":"","ucode":"782991747DD424","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":159048,"discussion_content":"æ„Ÿè°¢ä½ ç»™æˆ‘æ¯ç‡¥çš„å­¦ä¹ ä¸­å¸¦æ¥ç‚¹ä¹è¶£ï¼Œæ²¡å¿ä½ï¼Œä¸å¥½æ„æ€","likes_number":59,"is_delete":false,"is_hidden":false,"ctime":1580650259,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":3274,"ip_address":""},"score":159048,"extra":""},{"author":{"id":1327313,"avatar":"https://static001.geekbang.org/account/avatar/00/14/40/d1/fb6f402a.jpg","nickname":"melon","note":"","ucode":"AFBE9426C10AFA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1241420,"avatar":"https://static001.geekbang.org/account/avatar/00/12/f1/4c/8db65c40.jpg","nickname":"Felix.WongğŸ˜ˆ à½²à½¼à¼½","note":"","ucode":"033F90CE6E8AF4","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":184286,"discussion_content":"æˆ‘ä¹Ÿç¬‘äº† å“ˆå“ˆå“ˆ ğŸ˜„","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1582551856,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":159048,"ip_address":""},"score":184286,"extra":""}]},{"author":{"id":1049017,"avatar":"https://static001.geekbang.org/account/avatar/00/10/01/b9/73435279.jpg","nickname":"å­¦ä¹ å­¦ä¸ªå±","note":"","ucode":"DF2D61E6FB2FCE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":405890,"discussion_content":"å“ˆå“ˆå“ˆå“ˆï¼Œå­¦åˆ°äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634656238,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":46885,"user_name":"LeonğŸ“·","can_delete":false,"product_type":"c1","uid":1219496,"ip_address":"","ucode":"B9BBD1EFAAE5A2","user_header":"https://static001.geekbang.org/account/avatar/00/12/9b/a8/6a391c66.jpg","comment_is_top":false,"comment_ctime":1543996913,"is_pvip":false,"replies":[{"id":"16790","content":"â€¦â€¦â€¦<br><br>ä¸ä¼šå§ï¼Œæ’å…¥10ä¸‡æ¡27åˆ†é’Ÿâ€¦ ä½ æŠŠinnodb_flush_log_at_trx_commit å’Œ sync_binlogéƒ½è®¾ç½®æˆ0è¯•è¯•","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544022824,"ip_address":"","comment_id":46885,"utype":1}],"discussion_count":12,"race_medal":0,"score":"160457786865","product_id":100020801,"comment_content":"å…¬å¸æµ‹è¯•æœºå™¨IOæ€§èƒ½å¤ªå·®ï¼Œæ’åä¸‡æ¡è¦27åˆ†é’Ÿï¼Œåšè¿™ä¸ªæ–‡ç« çš„å®éªŒè¦1ä¸ªå°æ—¶ä»¥ä¸Š","like_count":37,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431585,"discussion_content":"â€¦â€¦â€¦\n\nä¸ä¼šå§ï¼Œæ’å…¥10ä¸‡æ¡27åˆ†é’Ÿâ€¦ ä½ æŠŠinnodb_flush_log_at_trx_commit å’Œ sync_binlogéƒ½è®¾ç½®æˆ0è¯•è¯•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544022824,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1686410,"avatar":"https://static001.geekbang.org/account/avatar/00/19/bb/8a/d33d9d3f.jpg","nickname":"å°è èğŸ","note":"","ucode":"DA814203C6C062","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":221295,"discussion_content":"åœ¨å¾ªç¯å¼€å§‹ä¹‹å‰å¯åŠ¨ä¸€æ¬¡äº‹åŠ¡ï¼Œå¾ªç¯ç»“æŸåæäº¤ï¼Œè¿™æ ·æ¯æ¬¡insertå°±ä¸ä¼šé‡æ–°å¯åŠ¨ä¸€ä¸ªäº‹åŠ¡å†æäº¤äº†\nCREATE DEFINER=`root`@`localhost` PROCEDURE `idata`()\nbegin\n  declare i int;\n  set i=1;\n\tSTART TRANSACTION;\n  while(i<=100000)do\n    insert into t values(i, i, i);\n    set i=i+1;\n  end while;\n\tcommit;\nend","likes_number":23,"is_delete":false,"is_hidden":false,"ctime":1586000159,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1691517,"avatar":"https://static001.geekbang.org/account/avatar/00/19/cf/7d/d9085aaa.jpg","nickname":"punnpkin","note":"","ucode":"E635BD016D892F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1686410,"avatar":"https://static001.geekbang.org/account/avatar/00/19/bb/8a/d33d9d3f.jpg","nickname":"å°è èğŸ","note":"","ucode":"DA814203C6C062","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":304743,"discussion_content":"å¾ˆå¥½ç”¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599653524,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":221295,"ip_address":""},"score":304743,"extra":""},{"author":{"id":1365206,"avatar":"https://static001.geekbang.org/account/avatar/00/14/d4/d6/1d4543ac.jpg","nickname":"äº‘æµ·","note":"","ucode":"0C6CA0BE58EA21","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1686410,"avatar":"https://static001.geekbang.org/account/avatar/00/19/bb/8a/d33d9d3f.jpg","nickname":"å°è èğŸ","note":"","ucode":"DA814203C6C062","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":380092,"discussion_content":"whileå¾ªç¯å†…ï¼Œinsertä¸€æ¡æ•°æ®è°ƒæ•´æˆå¤šæ¡ï¼Œä¹Ÿä¼šå¿«å¾ˆå¤šå§","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1624338469,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":221295,"ip_address":""},"score":380092,"extra":""},{"author":{"id":2633486,"avatar":"https://static001.geekbang.org/account/avatar/00/28/2f/0e/d61a9a47.jpg","nickname":"2Years","note":"","ucode":"9CC611009FCA4E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1686410,"avatar":"https://static001.geekbang.org/account/avatar/00/19/bb/8a/d33d9d3f.jpg","nickname":"å°è èğŸ","note":"","ucode":"DA814203C6C062","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":549954,"discussion_content":"ç‰›å•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644309977,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":221295,"ip_address":""},"score":549954,"extra":""}]},{"author":{"id":1361746,"avatar":"https://static001.geekbang.org/account/avatar/00/14/c7/52/c5adf218.jpg","nickname":"å–œæ¬¢åœ°çƒçš„é˜¿åŸ¹åŒå­¦","note":"","ucode":"5F97037585F857","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6059,"discussion_content":"ä½ å¦‚æœæ²¡æœ‰è®¾ç½®çš„è¯ï¼Œæ’å…¥10Wæ¡æ•°æ®ï¼Œé»˜è®¤è‡ªåŠ¨æäº¤10Wæ¬¡äº‹åŠ¡çš„å“¦","likes_number":11,"is_delete":false,"is_hidden":false,"ctime":1566646791,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":2070879,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/99/5f/9232a19f.jpg","nickname":"Lion","note":"","ucode":"BD8DDC17EAE6FD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1361746,"avatar":"https://static001.geekbang.org/account/avatar/00/14/c7/52/c5adf218.jpg","nickname":"å–œæ¬¢åœ°çƒçš„é˜¿åŸ¹åŒå­¦","note":"","ucode":"5F97037585F857","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":292998,"discussion_content":"ä¸ºä»€ä¹ˆæ˜¯é»˜è®¤æäº¤10Wæ­¤äº‹åŠ¡å‘¢ã€‚ã€‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595407757,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":6059,"ip_address":""},"score":292998,"extra":""},{"author":{"id":1576711,"avatar":"https://static001.geekbang.org/account/avatar/00/18/0f/07/c09035a2.jpg","nickname":"æ‰«åœ°åƒ§","note":"","ucode":"5C6A080EFE7575","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2070879,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/99/5f/9232a19f.jpg","nickname":"Lion","note":"","ucode":"BD8DDC17EAE6FD","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":294860,"discussion_content":"ä½ æ²¡å¼€å¯äº‹ç‰©ï¼Œå½“ç„¶æ˜¯æ‰§è¡Œä¸€æ¬¡æäº¤ä¸€æ¬¡å•Šã€‚ä½ åˆ›å»ºçš„å‡½æ•°ï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªwhileå¾ªç¯ï¼Œé‡Œé¢æ‰§è¡Œäº†10Wçš„æ’å…¥","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1596017009,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":292998,"ip_address":""},"score":294860,"extra":""},{"author":{"id":1649662,"avatar":"https://static001.geekbang.org/account/avatar/00/19/2b/fe/7925eb7e.jpg","nickname":"pdf","note":"","ucode":"A44250955878BB","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":2070879,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/99/5f/9232a19f.jpg","nickname":"Lion","note":"","ucode":"BD8DDC17EAE6FD","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":306403,"discussion_content":"éšå¼äº‹åŠ¡  auto commit  = 1","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1600263413,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":292998,"ip_address":""},"score":306403,"extra":""}]},{"author":{"id":1012361,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/72/89/1a83120a.jpg","nickname":"yihang","note":"","ucode":"A5506F085D1793","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":157743,"discussion_content":"æŠŠå­˜å‚¨è¿‡ç¨‹çš„ä»£ç ä¿®æ”¹ä¸€ä¸‹ï¼Œæ‰€æœ‰ insert æ”¾åœ¨ä¸€ä¸ªäº‹åŠ¡å†…å°±å¯ä»¥äº†","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1580513462,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2497728,"avatar":"https://static001.geekbang.org/account/avatar/00/26/1c/c0/b8ff566a.jpg","nickname":"æˆ‘æ˜¯å¤§æ©™å­132","note":"","ucode":"61660568CF07C9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":555740,"discussion_content":"â€œå…¬å¸â€æœºå™¨ï¼Ÿç‹—å¤´^.^","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647054876,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1702861,"avatar":"https://static001.geekbang.org/account/avatar/00/19/fb/cd/ea7373d6.jpg","nickname":"é½é¸£","note":"","ucode":"D83001B96B49CE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":60321,"discussion_content":"ä½ å¯ä»¥ç”¨åˆ†å¸ƒå¼æ¥æ’å…¥ï¼Œåªéœ€0.8ç§’å°±èƒ½æ’å…¥10ä¸‡æ¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574727549,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":46703,"user_name":"æ²‰æµ®","can_delete":false,"product_type":"c1","uid":1310165,"ip_address":"","ucode":"7F6D52DA51E309","user_header":"https://static001.geekbang.org/account/avatar/00/13/fd/d5/0194ea41.jpg","comment_is_top":false,"comment_ctime":1543972840,"is_pvip":false,"replies":[{"id":"16701","content":"æ˜¯ï¼Œå·²ç»ä¿®æ”¹äº†ï¼Œè°¢è°¢ã€‚<br><br>åˆ é™¤çš„æ—¶å€™æ˜¯æ ‡è®°åˆ é™¤ï¼Œæ‰€ä»¥å¾ˆå¿«ã€‚<br>å»ºç´¢å¼•æ˜¯è¦æ‰«ææ•°æ®å’ŒçœŸæ­£ç”Ÿæˆç´¢å¼•æ ‘ï¼Œæ˜¯ä¼šæ…¢äº›","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543985016,"ip_address":"","comment_id":46703,"utype":1}],"discussion_count":1,"race_medal":0,"score":"138982926312","product_id":100020801,"comment_content":"å›¾åä¸‹é¢ç¬¬äºŒæ®µ<br>ç°åœ¨ limit b,a è¿™ç§å†™æ³•ï¼Œè¦æ±‚æŒ‰ç…§ b,a æ’åºï¼Œå°±æ„å‘³ç€ä½¿ç”¨è¿™ä¸¤ä¸ªç´¢å¼•éƒ½éœ€è¦æ’åºã€‚<br>åº”è¯¥æ˜¯order by b,aå§<br>å¦å¤–æœ‰ä¸ªé—®é¢˜è¯·æ•™æ—è€å¸ˆï¼Œæ ¹æ®ç»éªŒå¤§è¡¨å¢åŠ ç´¢å¼•çš„æ—¶å€™æ¯”è¾ƒæ…¢ï¼Œè¿™ä¸ªæ˜¯ç†è§£çš„ï¼Œä½†æ˜¯åˆ é™¤ç´¢å¼•çš„æ—¶å€™èƒ½åšåˆ°ç§’åˆ ï¼Œè¿™ä¸ªä»€ä¹ˆåŸç†å‘¢ï¼Ÿ","like_count":32,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431511,"discussion_content":"æ˜¯ï¼Œå·²ç»ä¿®æ”¹äº†ï¼Œè°¢è°¢ã€‚\n\nåˆ é™¤çš„æ—¶å€™æ˜¯æ ‡è®°åˆ é™¤ï¼Œæ‰€ä»¥å¾ˆå¿«ã€‚\nå»ºç´¢å¼•æ˜¯è¦æ‰«ææ•°æ®å’ŒçœŸæ­£ç”Ÿæˆç´¢å¼•æ ‘ï¼Œæ˜¯ä¼šæ…¢äº›","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543985016,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":70617,"user_name":"XD","can_delete":false,"product_type":"c1","uid":1079293,"ip_address":"","ucode":"DC9DCFB3841A4E","user_header":"https://static001.geekbang.org/account/avatar/00/10/77/fd/c6619535.jpg","comment_is_top":false,"comment_ctime":1551147448,"is_pvip":false,"replies":[{"id":"25209","content":"æ˜¯çš„ï¼Œä½ æåˆ°çš„è¿™äº›ï¼Œéƒ½åœ¨serverå±‚<br><br>å¾ˆæ—©ä¹‹å‰è¿è¿‡æ»¤æ•°æ®éƒ½åœ¨serverå±‚ï¼Œåæ¥æœ‰äº†index condition pushdownä¸‹æ¨äº†ä¸€ç‚¹åˆ°å¼•æ“å±‚<br><br>","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1551154871,"ip_address":"","comment_id":70617,"utype":1}],"discussion_count":1,"race_medal":0,"score":"121810231736","product_id":100020801,"comment_content":"è°¢è°¢è€å¸ˆçš„è§£ç­”ï¼Œæˆ‘ä¹‹å‰ä¸€ç›´ä»¥ä¸ºè¿™ä¸ªæ“ä½œä¹Ÿæ˜¯åœ¨å­˜å‚¨å±‚è¿›è¡Œçš„ã€‚<br>é‚£æ‰§è¡Œå™¨è°ƒç”¨å­˜å‚¨å±‚çš„æ¥å£æ˜¯ä¸æ˜¯åªèƒ½è·å–åˆ°æœ€åŸå§‹çš„æ•°æ®ï¼Œåç»­çš„åŠ å·¥ï¼Œæ¯”å¦‚orderï¼Œjoinå’Œgroupæ“ä½œä¹Ÿéƒ½æ˜¯åœ¨æ‰§è¡Œå™¨é‡Œè¿›è¡Œçš„å—ï¼Ÿå¯¹åº”çš„bufferå’Œå†…å­˜ä¸´æ—¶è¡¨ä¹Ÿéƒ½æ˜¯serverå±‚çš„ä¸œè¥¿ï¼Ÿ","like_count":28,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":440730,"discussion_content":"æ˜¯çš„ï¼Œä½ æåˆ°çš„è¿™äº›ï¼Œéƒ½åœ¨serverå±‚\n\nå¾ˆæ—©ä¹‹å‰è¿è¿‡æ»¤æ•°æ®éƒ½åœ¨serverå±‚ï¼Œåæ¥æœ‰äº†index condition pushdownä¸‹æ¨äº†ä¸€ç‚¹åˆ°å¼•æ“å±‚\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551154871,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":167560,"user_name":"æ¸©æ•…è€ŒçŸ¥æ–°å¯ä»¥ä¸ºå¸ˆçŸ£","can_delete":false,"product_type":"c1","uid":1453053,"ip_address":"","ucode":"FADCDFA9F9E5E8","user_header":"https://static001.geekbang.org/account/avatar/00/16/2b/fd/7013289d.jpg","comment_is_top":false,"comment_ctime":1577859647,"is_pvip":false,"discussion_count":13,"race_medal":0,"score":"113247009343","product_id":100020801,"comment_content":"å·å¤–ï¼Œå·å¤–ï¼Œæˆ‘ç»ˆäºæŠŠå¼€å¤´ä¾‹å­ç»™å¤ç°äº†ï¼Œä¿®æ”¹å»ºè¡¨è¯­å¥ï¼ˆidè‡ªå¢ï¼‰ï¼Œå­˜å‚¨è¿‡ç¨‹ä»£ç ï¼ˆä¸è¦æŒ‡å®šidå€¼ï¼‰å¦‚ä¸‹ï¼Œå³å¯å¤ç°ä¸é€‰æ‹©ç´¢å¼•aé—®é¢˜ï¼š<br>CREATE TABLE `t` (<br>  `id` int(11) auto_increment,<br>  `a` int(11) DEFAULT NULL,<br>  `b` int(11) DEFAULT NULL,<br>  PRIMARY KEY (`id`),<br>  KEY `a` (`a`),<br>  KEY `b` (`b`)<br>) ENGINE=InnoDB;<br><br>delimiter ;;<br>create procedure idata()<br>begin<br>  declare i int;<br>  set i=1;<br>  while(i&lt;=100000)do<br>    insert into t (`a`,`b`) values(i, i);<br>    set i=i+1;<br>  end while;<br>end;;<br>delimiter ;","like_count":26,"discussions":[{"author":{"id":1152599,"avatar":"https://static001.geekbang.org/account/avatar/00/11/96/57/397ead08.jpg","nickname":"ä¸€ä¸ªç±³å±Œ","note":"","ucode":"8470D3FB4456F3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":218333,"discussion_content":" 8.0.19ä¹Ÿé‡ç°äº†ã€‚ã€‚ä½†æ˜¯ä¸ºä»€ä¹ˆå‘¢","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1585649038,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1026960,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/ab/90/52d85edf.jpg","nickname":"Alvin","note":"","ucode":"BAC5FDAF1E3E5E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":164362,"discussion_content":"æ„Ÿè°¢ï¼Œæˆ‘çš„version æ˜¯  5.7.22-log, ä¹Ÿæ˜¯é è¿™ä¸ªè§£å†³çš„ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1581171129,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1026960,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/ab/90/52d85edf.jpg","nickname":"Alvin","note":"","ucode":"BAC5FDAF1E3E5E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":164361,"discussion_content":"æ„Ÿè°¢ï¼Œæˆ‘çš„version æ˜¯  5.7.22-log, ä¹Ÿæ˜¯é è¿™ä¸ªè§£å†³çš„ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1581171127,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":3030463,"avatar":"https://static001.geekbang.org/account/avatar/00/2e/3d/bf/e84ddf60.jpg","nickname":"ä¸œæ–¹å¤©ç©º","note":"","ucode":"9967A50C83F3CD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":576443,"discussion_content":"æ„Ÿè°¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655554176,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1261530,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKDKsicmpne7xQNocwRQ80DDZ3CzjsDoVIcH0SBiaYzS056oVOx4pEeEVeCaXE3QtsjUIEI0x1xQVTw/132","nickname":"muggle","note":"","ucode":"D78087BCAD0860","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":414820,"discussion_content":"ç»ˆäºå¤ç°å‡ºæ¥äº†ï¼Œå¾ˆæƒ³çŸ¥é“åŸç†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636901942,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2112092,"avatar":"https://static001.geekbang.org/account/avatar/00/20/3a/5c/60fdf8e2.jpg","nickname":"wtdd","note":"","ucode":"26C64BF9CCA061","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":391549,"discussion_content":"æˆ‘æƒ³é—®é—®ä¹°çš„å“ªæ¬¾è½¦å˜¿å˜¿ï¼Œæˆ‘è€çˆ¹ä¹Ÿå‡†å¤‡è€ƒé©¾ç…§äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630504657,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1453053,"avatar":"https://static001.geekbang.org/account/avatar/00/16/2b/fd/7013289d.jpg","nickname":"æ¸©æ•…è€ŒçŸ¥æ–°å¯ä»¥ä¸ºå¸ˆçŸ£","note":"","ucode":"FADCDFA9F9E5E8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2112092,"avatar":"https://static001.geekbang.org/account/avatar/00/20/3a/5c/60fdf8e2.jpg","nickname":"wtdd","note":"","ucode":"26C64BF9CCA061","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":578200,"discussion_content":"æ–¯æŸ¯è¾¾æ˜é”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656570065,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":391549,"ip_address":""},"score":578200,"extra":""}]},{"author":{"id":2564230,"avatar":"","nickname":"é›¨å£°","note":"","ucode":"5ABF8607971CE7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":384245,"discussion_content":"å¢åŠ äº‹åŠ¡ï¼ŒåŠ å¿«æ•°æ®æ’å…¥é€Ÿåº¦\ndelimiter ;;\ncreate procedure idata2()\nbegin\n  declare i int;\n  set i=1;\n  start transaction;\n  while(i<=100000)do\n    insert into t2 values(i, i, i);\n    set i=i+1;\n  end while;\n  commit;\nend;;\ndelimiter ;\ncall idata2();","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626438850,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2564230,"avatar":"","nickname":"é›¨å£°","note":"","ucode":"5ABF8607971CE7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":382724,"discussion_content":"æ„Ÿè°¢ï¼Œ8.0.21ä¹Ÿå¤ç°äº†ã€‚å¦å¤–ï¼Œåœ¨å­˜å‚¨è¿‡ç¨‹å¼€å¯äº‹åŠ¡çš„è¯ï¼Œæ’å…¥é€Ÿåº¦ä¹Ÿä¼šåŠ å¿«ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625706809,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1130791,"avatar":"https://static001.geekbang.org/account/avatar/00/11/41/27/528144cc.jpg","nickname":"å…±å’Œå›½é•¿å­","note":"","ucode":"C2F8F66FB23D3D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375631,"discussion_content":"åŸå› æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621780056,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1324314,"avatar":"https://static001.geekbang.org/account/avatar/00/14/35/1a/9fa38dc9.jpg","nickname":"å­ç»","note":"","ucode":"5C26FF10934534","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":313791,"discussion_content":"è¯·é—®ç¬¬äºŒç§æ–¹æ³•ä¸­ limit 100ä¼˜åŒ–å™¨æ˜¯æ€ä¹ˆé€‰æ‹©çš„ç´¢å¼•a?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603093142,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1019860,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8f/d4/c506f8b2.jpg","nickname":"é˜¿æ£®","note":"","ucode":"ECE79780038445","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":308099,"discussion_content":"æ„Ÿè°¢ï¼Œ5.7.26é è¿™ä¸ªå¤ç°ï¼Œç­”æ¡ˆä¸Šé¢æ–œé¢é•œå­æœ‹å‹è§£é‡Šäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600846019,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1332594,"avatar":"https://static001.geekbang.org/account/avatar/00/14/55/72/8e89ce99.jpg","nickname":"ä½•ä½•ä½•","note":"","ucode":"CACE8A22996A0B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":299524,"discussion_content":"æ„Ÿè°¢ 8.0.21 å·²å¤ç°ã€‚ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597722172,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":46997,"user_name":"å¼ æ°¸å¿—","can_delete":false,"product_type":"c1","uid":1208727,"ip_address":"","ucode":"E54B75EF3F63B3","user_header":"https://static001.geekbang.org/account/avatar/00/12/71/97/f1a3d398.jpg","comment_is_top":false,"comment_ctime":1544016208,"is_pvip":false,"replies":[{"id":"16772","content":"å‡†ç¡®ã€‚<br><br>æ‚„æ‚„åœ°æˆ‘æ¶¨äº†ä¸€ç‚¹ä¿¡å¿ƒğŸ˜„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544018620,"ip_address":"","comment_id":46997,"utype":1}],"discussion_count":10,"race_medal":0,"score":"108918198608","product_id":100020801,"comment_content":"mergeé‚£æ®µçš„è§£é‡Šæ˜ç™½äº†change bufferæ“ä½œé€»è¾‘ã€‚å³change bufferå˜åŒ–ä¸æ•°æ®å—å˜åŒ–æ˜¯åˆ†å¼€çš„ï¼Œæœ€åˆredoä¸­è®°å½•çš„åªæ˜¯change bufferçš„å˜æ›´ï¼Œå› ä¸ºè¿˜æœªåº”ç”¨åˆ°æ•°æ®å—ä¸Šã€‚è€Œmergeåredoè®°å½•çš„æ˜¯æ•°æ®å—ã€change bufferçš„å˜æ›´ã€‚<br>æ˜¯è¿™æ ·å§ï¼ŸğŸ˜„","like_count":25,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431631,"discussion_content":"å‡†ç¡®ã€‚\n\næ‚„æ‚„åœ°æˆ‘æ¶¨äº†ä¸€ç‚¹ä¿¡å¿ƒğŸ˜„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544018620,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1122349,"avatar":"https://static001.geekbang.org/account/avatar/00/11/20/2d/dfa5bec8.jpg","nickname":"Han","note":"","ucode":"280808D4F641AA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":313225,"discussion_content":"mergeåredoè®°å½•çš„æ˜¯æ•°æ®å—ã€change bufferçš„å˜æ›´ã€‚ change bufferå˜æ›´æ˜¯æŒ‡åˆ é™¤change bufferå—ï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1603006018,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1255277,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLDVXsv6JOOficLK07867AkAb21eoG5KBgYFmwhMXKJooU5B6iaIZwyDxExicokVQSiaKEwZ4qPicqVFcg/132","nickname":"æ‹¼yinä¸–ç•Œ","note":"","ucode":"9571428A12B72A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1122349,"avatar":"https://static001.geekbang.org/account/avatar/00/11/20/2d/dfa5bec8.jpg","nickname":"Han","note":"","ucode":"280808D4F641AA","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":349359,"discussion_content":"åŒé—®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1613129944,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":313225,"ip_address":""},"score":349359,"extra":""},{"author":{"id":2362279,"avatar":"","nickname":"æ›¾ç¥¥é‡‘","note":"","ucode":"CBBB7FC1EA00D6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1122349,"avatar":"https://static001.geekbang.org/account/avatar/00/11/20/2d/dfa5bec8.jpg","nickname":"Han","note":"","ucode":"280808D4F641AA","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":351111,"discussion_content":"åŒé—®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614155906,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":313225,"ip_address":""},"score":351111,"extra":""},{"author":{"id":1010344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/6a/a8/ee414a25.jpg","nickname":"å…¬å‘Š-SREè¿ç»´å®è·µ","note":"","ucode":"86F4E48AE1D9D8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1122349,"avatar":"https://static001.geekbang.org/account/avatar/00/11/20/2d/dfa5bec8.jpg","nickname":"Han","note":"","ucode":"280808D4F641AA","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":557270,"discussion_content":"æ˜¯ç›´æ¥ä¿®æ”¹changbufferå†…å®¹ï¼Œä¿®æ”¹å†…å­˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647747211,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":313225,"ip_address":""},"score":557270,"extra":""}]},{"author":{"id":1986739,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/50/b3/9269cd59.jpg","nickname":"LWD","note":"","ucode":"DDA444DB113C01","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":587312,"discussion_content":"666å•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662973576,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1295609,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJRFRX8kNzNet7FibNvtavbVpAwK09AhIhrib9k762qWtH6mre8ickP7hM5mgZC4ytr8NnmIfmAhxMSQ/132","nickname":"è€å¤§ä¸å°","note":"","ucode":"35BCDD3CB13467","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":586152,"discussion_content":"æ²¡çœ‹æ‡‚è¿‡è¯´çš„å•¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662006836,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1254801,"avatar":"https://static001.geekbang.org/account/avatar/00/13/25/91/46600294.jpg","nickname":"çŒ´å“¥ä¸€ä¸€ cium","note":"","ucode":"38EC64F8D1A0B4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":312458,"discussion_content":"ç‰›æ‰¹!","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602689894,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1453053,"avatar":"https://static001.geekbang.org/account/avatar/00/16/2b/fd/7013289d.jpg","nickname":"æ¸©æ•…è€ŒçŸ¥æ–°å¯ä»¥ä¸ºå¸ˆçŸ£","note":"","ucode":"FADCDFA9F9E5E8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":114333,"discussion_content":"å¯ä»¥è¯´redo-logå’Œæ•°æ®ç›¸å…³çš„å˜åŒ–éƒ½è¦è®°å½•ï¼ˆchange bufferï¼Œmergeå¼•èµ·çš„åŸå§‹æ•°æ®å˜æ›´ç­‰ï¼‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577968730,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1006849,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5d/01/9cd84003.jpg","nickname":"æ ‹èƒ½","note":"","ucode":"8BD9C939D3E8E1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":96975,"discussion_content":"æˆ‘å’‹è¯´mergeå’‹è¿˜è¦å†™redo log...","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577101941,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108756,"user_name":"é’±","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1561876312,"is_pvip":false,"discussion_count":4,"race_medal":0,"score":"100346124120","product_id":100020801,"comment_content":"ä¸ºåŠ æ·±å°è±¡å°ç»“å¦‚ä¸‹ï¼š<br><br>1ï¼šMySQLé€‰é”™ç´¢å¼•ï¼Œå•¥æ„æ€ï¼Ÿ<br><br>æˆ‘ä»¬è®¤ä¸ºä½¿ç”¨Kç´¢å¼•æ£€ç´¢çš„é€Ÿåº¦ä¼šæ›´å¿«çš„ï¼Œä½†æ˜¯MySQLæ²¡æœ‰ä½¿ç”¨ï¼Œå†³å®šä½¿ç”¨ä»€ä¹ˆç´¢å¼•æ˜¯ç”±Serverå±‚çš„ä¼˜åŒ–å™¨æ¥å†³å®šçš„ï¼Œå¥¹ä¹Ÿæ˜¯æƒ³é€‰æ‹©æœ€ä½³çš„æ–¹æ¡ˆæ¥æ£€ç´¢æ•°æ®çš„ï¼Œä¸è¿‡ä»–ä¹Ÿæ˜¯äººå†™çš„ç¨‹åºä¹Ÿæ˜¯å­˜åœ¨bugçš„ã€‚<br><br>2ï¼šMySQLä¸ºå•¥ä¼šé€‰é”™ç´¢å¼•ï¼Ÿ<br><br>ä¼˜åŒ–å™¨è®¤ä¸ºä½¿ç”¨é‚£ä¸ªç´¢å¼•æ£€ç´¢æ•°æ®çš„é€Ÿåº¦æ¯”è¾ƒå¿«æ˜¯ä¸€ä¸ªéœ€è¦å„ç§å› ç´ ç»¼åˆè¯„ä¼°çš„äº‹æƒ…ï¼Œæ¯”å¦‚ï¼šæ˜¯å¦ä½¿ç”¨ä¸´æ—¶è¡¨ã€æ˜¯å¦æ’åºã€æ‰«æçš„è¡Œæ•°å¤šå°‘ã€å›è¡¨çš„æ¬¡æ•°ç­‰ï¼Œæ–‡ä¸­çš„ä¾‹å­ä¼˜åŒ–å™¨åˆ¤æ–­å¤±è¯¯çš„ä¸»è¦åŸå› æ˜¯æ‰«æè¡Œæ•°çš„åˆ¤æ–­å­˜åœ¨è¯¯å·®ï¼Œå› ä¸ºè¿™ä¸ªä¿¡æ¯æ˜¯é‡‡æ ·è¯„ä¼°å¾—åˆ°çš„ã€‚ç´¢å¼•çš„åˆ›å»ºæ˜¯éå¸¸çš„è€—æ—¶çš„ï¼Œå› ä¸ºéœ€è¦çœŸæ­£çš„å»ºç´¢å¼•çš„è¿‡ç¨‹ï¼Œä½†æ˜¯åˆ é™¤ç´¢å¼•å´ä¸éœ€è¦è€—è´¹å¤ªå¤šæ—¶é—´ï¼Œå› ä¸ºæ˜¯æ ‡è®°åˆ é™¤ï¼Œè¿™ä¸ªæ˜¯ä»¥ç©ºé—´æ¢æ—¶é—´çš„æ€è·¯ã€‚ä¼˜åŒ–å™¨é‡‡ç”¨é‡‡æ ·è¯„ä¼°å‡ºç°è¯¯å·®çš„åŸå› ä¹Ÿåœ¨äºï¼Œç´¢å¼•çš„æ ‡è®°åˆ é™¤å½±å“çš„ã€‚<br><br>3ï¼šMySQLé€‰é”™ç´¢å¼•æ€ä¹ˆç ´ï¼Ÿ<br><br>3-1ï¼šå¼ºåˆ¶æŒ‡å®šä½¿ç”¨æŸä¸ªç´¢å¼•ï¼Œä¸å¸¸ç”¨ä¸æ¨èç”¨<br><br>3-2ï¼šè°ƒæ•´SQLè¯­å¥ï¼Œä½¿ä¼˜åŒ–å™¨é€‰æ‹©çš„å’Œæˆ‘ä»¬æƒ³çš„ä¸€æ ·ï¼Œä¸å…·æœ‰é€šç”¨æ€§<br><br>3-3ï¼šæ–°å»ºæ›´åˆé€‚çš„ç´¢å¼•æˆ–è€…åˆ é™¤ä¸åˆé€‚çš„ç´¢å¼•ï¼Œæ˜¯ä¸€ä¸ªæ€è·¯<br><br>3-4ï¼šä½¿ç”¨analyze tableå¯ä»¥è§£å†³ç´¢å¼•ç»Ÿè®¡ä¿¡æ¯ä¸å‡†ç¡®å¯¼è‡´çš„ç´¢å¼•é€‰é”™çš„é—®é¢˜<br><br>è¿™ç¯‡åˆ·æ–°äº†è®¤çŸ¥ï¼Œä»¥å‰ä»æ²¡æœ‰æ€è€ƒè¿‡è¿™ä¸ªé—®é¢˜ï¼Œè§‰å¾—MySQLå¾ˆç‰›é€¼æ²¡æœ‰ä»€ä¹ˆbugï¼Œå³ä½¿æœ‰æˆ‘ä¹Ÿå‘ç°ä¸äº†ï¼Œå¦‚æœä½¿ç”¨æ˜¯æœ‰é—®é¢˜ä¹Ÿæ˜¯è‡ªå·±ä¸ä¼šä½¿ç”¨ã€‚<br><br>ç°åœ¨è¿˜å­˜åœ¨è¿™ä¸ªé—®é¢˜å˜›ï¼Ÿ<br><br>é€šè¿‡æ”¹å˜ä½¿ç”¨æ–¹å¼å°±è§£å†³äº†ï¼Œå¥½åƒä¹Ÿä¸ç®—æ˜¯bugäº†ï¼Ÿ<br><br>","like_count":23,"discussions":[{"author":{"id":2305167,"avatar":"https://static001.geekbang.org/account/avatar/00/23/2c/8f/aa45f6c4.jpg","nickname":"lambda","note":"","ucode":"D1990B7903913B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":339698,"discussion_content":"èµ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609759102,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1324122,"avatar":"https://static001.geekbang.org/account/avatar/00/14/34/5a/723311cd.jpg","nickname":"å¥å­","note":"","ucode":"C0C20F466DF9D0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":336415,"discussion_content":"æ‰«æè¡Œæ•°çš„åˆ¤æ–­æ€ä¹ˆæ˜¯é‡‡æ ·å¾—åˆ°çš„å‘¢ï¼Ÿä¸æ˜¯åŸºæ•°æ‰æ˜¯é‡‡æ ·å¾—åˆ°å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608567325,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1324314,"avatar":"https://static001.geekbang.org/account/avatar/00/14/35/1a/9fa38dc9.jpg","nickname":"å­ç»","note":"","ucode":"5C26FF10934534","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":313793,"discussion_content":"è¯·é—®ç¬¬äºŒç§æ–¹æ³•ä¸­ limit 100ä¼˜åŒ–å™¨æ˜¯æ€ä¹ˆé€‰æ‹©çš„ç´¢å¼•a?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603093170,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1970443,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIx1V1QAxC4NHaxYZGyuibBN8lcURJWc5nrnO4yic1kxnDemYV2FJGialf47kYX9qtDnZZOfe1SJeLicg/132","nickname":"lleft","note":"","ucode":"D573EB509455AE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1324314,"avatar":"https://static001.geekbang.org/account/avatar/00/14/35/1a/9fa38dc9.jpg","nickname":"å­ç»","note":"","ucode":"5C26FF10934534","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":370482,"discussion_content":"è®©ä¼˜åŒ–å™¨è®¤ä¸ºèµ°ç´¢å¼•bçš„ä»£ä»·æ¯”ç´¢å¼•açš„é«˜ï¼Œè¿™ä¸ªåœ°æ–¹åº”è¯¥ä¸ä¸€å®šæ˜¯100ï¼Œåªè¦è®©ä¼˜åŒ–å™¨è®¤ä¸ºç”¨bçš„ä»£ä»·é«˜äºç”¨açš„ä»£ä»·å³å¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619430817,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":313793,"ip_address":""},"score":370482,"extra":""}]}]},{"had_liked":false,"id":47984,"user_name":"èš‚èšå†…æ¨+v","can_delete":false,"product_type":"c1","uid":1050508,"ip_address":"","ucode":"24B10AEE54B3FD","user_header":"https://static001.geekbang.org/account/avatar/00/10/07/8c/0d886dcc.jpg","comment_is_top":false,"comment_ctime":1544280038,"is_pvip":false,"replies":[{"id":"17098","content":"å…¶å®è¿™ç¯‡ä¸»è¦å°±æ˜¯è¯´ä¼˜åŒ–å™¨çš„bugğŸ˜„ bugå˜›å°±æ²¡ä»€ä¹ˆé“ç†ğŸ˜“","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544332604,"ip_address":"","comment_id":47984,"utype":1}],"discussion_count":4,"race_medal":0,"score":"78853691366","product_id":100020801,"comment_content":"è€å¸ˆï¼ŒåŸæ–‡ä¸­ï¼šåœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œæˆ‘ä»¬ç”¨ limit 100 è®©ä¼˜åŒ–å™¨æ„è¯†åˆ°ï¼Œä½¿ç”¨bç´¢å¼•ä»£ä»·æ˜¯å¾ˆé«˜çš„ã€‚<br>é—®é¢˜ï¼šä¸ºä»€ä¹ˆlimit 100æ—¶å€™ï¼Œä½¿ç”¨bç´¢å¼•ä»£ä»·é«˜å‘¢ï¼Ÿå’Œlimit 1ç›¸æ¯”ï¼Œèµ¶ç´§æ²¡æœ‰ä»€ä¹ˆè´¨çš„å˜åŒ–å•Š","like_count":18,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431973,"discussion_content":"å…¶å®è¿™ç¯‡ä¸»è¦å°±æ˜¯è¯´ä¼˜åŒ–å™¨çš„bugğŸ˜„ bugå˜›å°±æ²¡ä»€ä¹ˆé“ç†ğŸ˜“","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544332604,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2716512,"avatar":"https://static001.geekbang.org/account/avatar/00/29/73/60/469bcdfb.jpg","nickname":"ææ‰¿èŠ³","note":"","ucode":"0848375E0178E9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":403172,"discussion_content":"ä¼˜åŒ–å™¨ä¹Ÿåœ¨èµŒï¼Œlimit1 å°±æ˜¯éå†1000æ¬¡å‰åªè¦å‘½ä¸­1æ¡å°±å¯ä»¥äº†ï¼Œæ‰€ä»¥å¯ä»¥å»èµŒï¼Œå› ä¸ºæ˜¯åƒåˆ†ä¸€çš„å¤±è´¥ç‡ã€‚ä½†æ˜¯æ¢æˆ100çš„è¯ï¼Œå¤±è´¥ç‡å°±æ˜¯ç™¾åˆ†ä¹‹åäº†ï¼Œæ¦‚ç‡å¤§å¤§å¢åŠ ï¼ˆè¿™é‡Œçš„æ¦‚ç‡æ˜¯æ‹Ÿäººè¯äº†ï¼Œå…¶å®æ˜¯è®¡ç®—äº†ä¸€ä¸‹æŸ¥è¯¢ç£ç›˜çš„æ¬¡æ•°ï¼Œè¿˜æœ‰å›è¡¨çš„æ¬¡æ•°æ¥çš„ï¼‰","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1634023099,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2036366,"avatar":"","nickname":"åŸæ¸¸è¯—äºº","note":"","ucode":"27CA90D3D9C5B6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":327245,"discussion_content":"æˆ‘è‡ªå·±çš„ç†è§£æ˜¯ï¼Œå‡è®¾æˆ‘æ˜¯ä¼˜åŒ–å™¨ï¼Œä¸€ä¸ªé€‰æ‹©æ˜¯ä»1000ä¸ªæ•°æ®é‡Œæ‰¾åˆ°æ»¡è¶³Açº¦æŸæ¡ä»¶çš„å‰100ä¸ªï¼Œç„¶åå†åšä¸ªæ’åºï¼Œè·Ÿä»5000ä¸ªæ‰¾åˆ°æ»¡è¶³Bçº¦æŸæ¡ä»¶çš„å‰100ä¸ªï¼Œå¯èƒ½å‰ä¸€ä¸ªé€‰æ‹©æ›´å¥½ï¼Ÿå¯ä»¥æŠŠ100å½“åšä¸ªå˜é‡ï¼Œéšç€å®ƒçš„å¢å¤§ï¼Œæ¯”å¦‚æŠŠå®ƒè°ƒæ•´åˆ°900ï¼Œè¿™æ—¶ç¬¬ä¸€ä¸ªé€‰æ‹©æœ€å¤šä¹Ÿå°±æ˜¯è¦éå†1000ä¸ªï¼Œè€Œç¬¬äºŒä¸ªé€‰æ‹©æœ€åè¦éå†5000ä¸ªï¼Œä»¥è‡³äºæŠµæ¶ˆäº†å‡å°‘æ’åºçš„ä¼˜åŠ¿","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1605773999,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1324314,"avatar":"https://static001.geekbang.org/account/avatar/00/14/35/1a/9fa38dc9.jpg","nickname":"å­ç»","note":"","ucode":"5C26FF10934534","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":313799,"discussion_content":"è¿™é‡Œæˆ‘ä¹Ÿä¸æ˜ç™½ï¼Œå¯èƒ½å°±æ˜¯è€å¸ˆç»éªŒä¸°å¯Œï¼Œæ‰¾åˆ°äº†ä¼˜åŒ–å™¨çš„bugã€‚å“ˆå“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603093480,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":46801,"user_name":"kevin","can_delete":false,"product_type":"c1","uid":1081413,"ip_address":"","ucode":"6634588DD7FD2D","user_header":"https://static001.geekbang.org/account/avatar/00/10/80/45/24c30321.jpg","comment_is_top":false,"comment_ctime":1543984403,"is_pvip":false,"replies":[{"id":"16716","content":"Redo log å’Œ binlogåˆ·ç›˜æ¬¡æ•°å°‘äº†ï¼Œä½ æŠŠ100000ä¸ªäº‹åŠ¡å˜æˆäº†100ä¸ªäº‹åŠ¡ã€‚<br>","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543990321,"ip_address":"","comment_id":46801,"utype":1}],"discussion_count":1,"race_medal":0,"score":"70263461139","product_id":100020801,"comment_content":"è€å¸ˆä½ å¥½ã€‚æˆ‘ç”¨å­˜å‚¨è¿‡ç¨‹æ’å…¥100000æ¡æ•°æ®ç‰¹åˆ«æ…¢ï¼Œåæ¥æˆ‘set autocommit=0,æ¯1000æ¡æ‰commitï¼Œè¿™æ ·å°±å¿«äº†ã€‚æˆ‘æƒ³ä¸å‡ºæ¥è¿™æ˜¯ä¸ºä»€ä¹ˆï¼Œæ±‚è§£æƒ‘","like_count":16,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431550,"discussion_content":"Redo log å’Œ binlogåˆ·ç›˜æ¬¡æ•°å°‘äº†ï¼Œä½ æŠŠ100000ä¸ªäº‹åŠ¡å˜æˆäº†100ä¸ªäº‹åŠ¡ã€‚\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543990321,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":46823,"user_name":"Laputa","can_delete":false,"product_type":"c1","uid":1079345,"ip_address":"","ucode":"64C157042CF138","user_header":"https://static001.geekbang.org/account/avatar/00/10/78/31/c7f8d1db.jpg","comment_is_top":false,"comment_ctime":1543986964,"is_pvip":false,"replies":[{"id":"16713","content":"Redolog bufferæ˜¯åœ¨äº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå…ˆæŠŠè¦å†™å…¥çš„å†…å®¹åœ¨å†…å­˜é‡Œå­˜èµ·æ¥ï¼Œåœ¨commité˜¶æ®µï¼Œä¸€æ¬¡æ€§å†™å…¥redolog file ","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543990059,"ip_address":"","comment_id":46823,"utype":1}],"discussion_count":3,"race_medal":0,"score":"57378561812","product_id":100020801,"comment_content":"è€å¸ˆï¼Œredo log æ˜¯å®æ—¶å†™å…¥ç£ç›˜çš„å—ï¼Ÿæ˜¯ä¸æ˜¯è¿˜æœ‰ä¸€å±‚æ‰€è°“çš„â€œredo log bufferâ€ï¼Ÿ","like_count":13,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431558,"discussion_content":"Redolog bufferæ˜¯åœ¨äº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå…ˆæŠŠè¦å†™å…¥çš„å†…å®¹åœ¨å†…å­˜é‡Œå­˜èµ·æ¥ï¼Œåœ¨commité˜¶æ®µï¼Œä¸€æ¬¡æ€§å†™å…¥redolog file ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543990059,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1986739,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/50/b3/9269cd59.jpg","nickname":"LWD","note":"","ucode":"DDA444DB113C01","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":587313,"discussion_content":"äº‹åŠ¡æœ‰å¤šæ¡è¯­å¥ï¼›æ€»ä¸èƒ½æ¯æ¡éƒ½åˆ·ç›˜ä¸€æ¬¡å§ï¼Œæ‰€ä»¥éœ€è¦ä¸€å±‚bufferï¼›bufferçš„åˆ·ç›˜ä¹Ÿä¸å®šæ˜¯å½“å‰äº‹åŠ¡å‘èµ·çš„ï¼Œå› ä¸ºæœ‰ç»„æäº¤çš„ä¼˜åŒ–","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662973693,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1980201,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/37/29/b3af57a7.jpg","nickname":"å‡¯æ–‡å°çŒª","note":"","ucode":"36D8AD0229547F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":350156,"discussion_content":"ä¸ä¼šçš„ï¼Œå¤§å¤šæ•°å­˜å‚¨ä»‹è´¨éƒ½ä¼šèµ°write backç­–ç•¥ã€‚ç»“åˆæ•°æ®åº“åŸç†ï¼Œä»–ä»¬ä¼šç­‰å¾…serverå±‚ä¼ å…¥commitä¿¡å·","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1613728036,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":47235,"user_name":"EAGLE","can_delete":false,"product_type":"c1","uid":1303484,"ip_address":"","ucode":"5B0FE019A8C9BD","user_header":"https://static001.geekbang.org/account/avatar/00/13/e3/bc/064401c7.jpg","comment_is_top":false,"comment_ctime":1544085324,"is_pvip":false,"replies":[{"id":"16851","content":"æ–‡ç« è¯´é”™äº†â€¦ ğŸ˜“<br>é»˜è®¤æŒ‰ç…§â€œæŸ¥è¯¢ä½¿ç”¨çš„ç´¢å¼•â€æ’åº","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544089774,"ip_address":"","comment_id":47235,"utype":1}],"discussion_count":3,"race_medal":0,"score":"53083692876","product_id":100020801,"comment_content":"è€å¸ˆï¼Œçœ‹äº†ä¸€ç¯‡æ–‡ç« è¯´innodbå¦‚æœä¸åŠ order byé»˜è®¤æ˜¯æŒ‰ç…§ä¸»é”®æ’åºçš„ã€‚ä¹Ÿå°±æ˜¯è¯´å¦‚æœä¸åŠ order byï¼ŒæŸ¥è¯¢ç»“æœä¹Ÿæ˜¯æœ‰ä¸€å®šæ¬¡åºçš„ã€‚é‚£ä¹ˆå¦‚æœæ²¡æœ‰ä¸šåŠ¡éœ€æ±‚ï¼Œçº¯ç²¹åªæ˜¯ä¸ºäº†åˆ†é¡µæ˜¾ç¤ºæ•°æ®ï¼Œä¸åŠ order byä¹Ÿæ˜¯å¯ä»¥çš„å—ï¼Ÿ","like_count":12,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431708,"discussion_content":"æ–‡ç« è¯´é”™äº†â€¦ ğŸ˜“\né»˜è®¤æŒ‰ç…§â€œæŸ¥è¯¢ä½¿ç”¨çš„ç´¢å¼•â€æ’åº","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1544089774,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1254801,"avatar":"https://static001.geekbang.org/account/avatar/00/13/25/91/46600294.jpg","nickname":"çŒ´å“¥ä¸€ä¸€ cium","note":"","ucode":"38EC64F8D1A0B4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":312459,"discussion_content":"å­¦åˆ°äº†,æŸ¥è¯¢é»˜è®¤æŒ‰ç…§â€œæŸ¥è¯¢ä½¿ç”¨çš„ç´¢å¼•â€æ’åº","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1602690140,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1970443,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIx1V1QAxC4NHaxYZGyuibBN8lcURJWc5nrnO4yic1kxnDemYV2FJGialf47kYX9qtDnZZOfe1SJeLicg/132","nickname":"lleft","note":"","ucode":"D573EB509455AE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":370484,"discussion_content":"ä¸åŠ æ’åº ï¼Œåˆ†é¡µä¼šæœ‰é‡å¤æ•°æ®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619431246,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76776,"user_name":"Shen","can_delete":false,"product_type":"c1","uid":1182167,"ip_address":"","ucode":"CFF7609A754392","user_header":"https://static001.geekbang.org/account/avatar/00/12/09/d7/ffe7b0bf.jpg","comment_is_top":false,"comment_ctime":1552706527,"is_pvip":false,"discussion_count":4,"race_medal":0,"score":"44502379487","product_id":100020801,"comment_content":"1ã€sessionAï¼šstart transaction with consistent snapshot;<br>2ã€sessionBï¼šdelete from t;<br>3ã€sessionBï¼šcall idata();<br>4ã€sessionBï¼šexplain select * from t where a between 10000 and 20000;<br>+----+-------------+-------+-------+---------------+------+---------+------+-------+-----------------------+<br>| id | select_type | table | type  | possible_keys | key  | key_len | ref  | rows  | Extra                 |<br>+----+-------------+-------+-------+---------------+------+---------+------+-------+-----------------------+<br>|  1 | SIMPLE      | t     | range | a             | a    | 5       | NULL | 10000 | Using index condition |<br>+----+-------------+-------+-------+---------------+------+---------+------+-------+-----------------------+<br><br><br>5.6.43æ²¡æœ‰å¤ç° æ¡ˆä¾‹1çš„æƒ…å†µ<br>","like_count":10,"discussions":[{"author":{"id":1339768,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eozpyAUaM6ra8W0icl5RFc2VmGdBCTbU84uG2qoOdtdgBFSjGOqSU2h05jwxKVVbpuyh5omcKic4ZFg/132","nickname":"æå°é¹","note":"","ucode":"E325904431A4B1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":368299,"discussion_content":"å¿…é¡»è¦æ³¨æ„çš„æ˜¯éš”ç¦»çº§åˆ«ã€‚è¦ä½¿ç”¨repeatable read;å¯é‡å¤è¯»ï¼Œæ‰èƒ½å®ç°ä¸Šé¢è¿™ä¸ªé”™è¯¯ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618648524,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1623409,"avatar":"https://static001.geekbang.org/account/avatar/00/18/c5/71/f7c43b49.jpg","nickname":"é£å‘åŒ—å¹","note":"","ucode":"2FD0BC5159E1C1","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":329788,"discussion_content":"æˆ‘ä¹Ÿè¯•äº†å¥½å¤šæ¬¡ï¼Œéƒ½æ²¡æœ‰å¤ç°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606459798,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1970443,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIx1V1QAxC4NHaxYZGyuibBN8lcURJWc5nrnO4yic1kxnDemYV2FJGialf47kYX9qtDnZZOfe1SJeLicg/132","nickname":"lleft","note":"","ucode":"D573EB509455AE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1623409,"avatar":"https://static001.geekbang.org/account/avatar/00/18/c5/71/f7c43b49.jpg","nickname":"é£å‘åŒ—å¹","note":"","ucode":"2FD0BC5159E1C1","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":370483,"discussion_content":"idä¸»é”®æ˜¯è‡ªå¢çš„ï¼Œä¸”idataå­˜å‚¨è¿‡ç¨‹ä¸­insertä¸è¦å†™idçš„å€¼ï¼Œå°±å¯ä»¥å¤ç°äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619430960,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":329788,"ip_address":""},"score":370483,"extra":""}]},{"author":{"id":1599738,"avatar":"https://static001.geekbang.org/account/avatar/00/18/68/fa/103589dc.jpg","nickname":"å‘¨æœ«éŸ³ä¹å®¶","note":"","ucode":"B603D53E6576A2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":32529,"discussion_content":"MySQLå•¥ç‰ˆæœ¬","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571045043,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":48771,"user_name":"æ°ä¹‹7","can_delete":false,"product_type":"c1","uid":1297232,"ip_address":"","ucode":"F7DA2E21085332","user_header":"https://static001.geekbang.org/account/avatar/00/13/cb/50/66d0bd7f.jpg","comment_is_top":false,"comment_ctime":1544533310,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"44494206270","product_id":100020801,"comment_content":"é€šè¿‡è¿™ä¸€è®²çš„å­¦ä¹ ï¼Œé˜…è¯»å®Œæœ¬æ–‡ï¼Œå…¶å®æ ¸å¿ƒç‚¹å°±æ˜¯ä¼˜åŒ–å™¨çš„ç´¢å¼•é€‰æ‹©ï¼Œä»è€Œç‰µå¼•å‡ºç´¢å¼•ç»Ÿè®¡çš„æ›´æ–°æœºåˆ¶ï¼Œä»¥åŠé€šè¿‡Analyze tabeæ¥è¿›è¡Œåˆ†æç´¢å¼•ã€‚å½“ç„¶æœ‰æ—¶é¿å…ä¸äº†å¯ä»¥é€‰æ‹©ç®€å•ç²—æš´çš„ç”¨Force indexæ¥è¿›è¡Œç´¢å¼•é€‰æ‹©ã€‚<br>ä¸‹åŠéƒ¨åˆ†è€å¸ˆé€šè¿‡å®è·µä¸Šçš„é—®é¢˜ç»™å‡ºäº†ç´¢å¼•é€‰æ‹©ä¸Šçš„æ–¹æ¡ˆï¼Œä¸€ã€é€šè¿‡Force indexå¼ºè¡Œé€‰æ‹©ä¸€ä¸ªç´¢å¼•ã€‚äºŒã€é€šè¿‡ä¿®æ”¹SQLè¯­å¥æ¥ä¿®æ”¹ç´¢å¼•ï¼Œä¸‰ã€é€šè¿‡æä¾›ä¸€ä¸ªæ›´åˆé€‚çš„ç´¢å¼•æ¥ç»™ä¼˜åŒ–å™¨åšå‡ºé€‰æ‹©ã€‚<br>å­¦ä¹ åˆ°è¿™é‡Œï¼Œæˆ‘æƒ³å†™é€šè¿‡è®¤çœŸé˜…è¯»è€å¸ˆçš„æ¯ä¸€ç¯‡æ–‡ç« ï¼Œè‡³å°‘æˆ‘ç°åœ¨å¼€å§‹æ€è€ƒè€å¸ˆæ¯ç¯‡æ–‡ç« çœŸæ­£çš„å‡ºå‘ç‚¹æ˜¯ä»€ä¹ˆï¼Œç„¶åé€šè¿‡è€å¸ˆçš„æ¯ä¸€æ­¥ç»†èŠ‚æ¥ææ‡‚æŠ€æœ¯ä¸Šçš„é—®é¢˜ï¼Œä¸æ•¢è¯´æœ‰å¤šå¤§è¿›æ­¥ï¼Œè‡³å°‘æˆ‘ç›¸ä¿¡æˆ‘åœ¨ä¸ä¹…ä¹‹åå¯ä»¥åšæ•°æ®åº“æŠ€æœ¯è¿™ä»¶äº‹ï¼Œæ„Ÿè°¢å’Œè€å¸ˆä¸€åŒè¿›æ­¥æˆé•¿ã€‚","like_count":10,"discussions":[{"author":{"id":1120025,"avatar":"https://static001.geekbang.org/account/avatar/00/11/17/19/46fcde38.jpg","nickname":"yonyoupht","note":"","ucode":"9B3AC96150B8AD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":297899,"discussion_content":" åŠ æ²¹ï¼Œä½ è‚¯å®šå¯ä»¥ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597107082,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":46971,"user_name":"Ryoma","can_delete":false,"product_type":"c1","uid":1130590,"ip_address":"","ucode":"7F692369239692","user_header":"https://static001.geekbang.org/account/avatar/00/11/40/5e/b8fada94.jpg","comment_is_top":false,"comment_ctime":1544012721,"is_pvip":true,"replies":[{"id":"16780","content":"æ¯”åˆ†æˆä¸¤å¥å¿«ğŸ˜„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544020178,"ip_address":"","comment_id":46971,"utype":1}],"discussion_count":2,"race_medal":2,"score":"40198718385","product_id":100020801,"comment_content":"è¯·é—®ä½¿ç”¨insert ... on duplicate key updateå¯¹æ€§èƒ½æœ‰ä»€ä¹ˆå½±å“å‘¢","like_count":9,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431623,"discussion_content":"æ¯”åˆ†æˆä¸¤å¥å¿«ğŸ˜„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544020178,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2166073,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/k3YD3y3BzGDSdrwRJyJY4BXsNJibfM4uzOdDVKIAlFApR2FZCLg2ibrZtJ4vuahA3LHLW9GKzH5CMGqCDhWjhZqg/132","nickname":"æˆ’é…’çš„æç™½","note":"","ucode":"744E1A22761647","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":400328,"discussion_content":"insert updateæ˜¯åŸå­çš„å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633235346,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":53287,"user_name":"sky","can_delete":false,"product_type":"c1","uid":1008071,"ip_address":"","ucode":"9FE5F43055D3AB","user_header":"https://static001.geekbang.org/account/avatar/00/0f/61/c7/b64ac05e.jpg","comment_is_top":false,"comment_ctime":1545622408,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"35905360776","product_id":100020801,"comment_content":"æŒ‰ç…§é¡ºåºæ‰§è¡Œï¼Œæ²¡èƒ½å¤ç°é€‰é”™ç´¢å¼• ç‰ˆæœ¬5.6.33ã€‚<br>Server version: 5.6.33 MySQL Community Server (GPL)<br># Time: 181224 11:32:26<br># User@Host: root[root] @ localhost []  Id: 20852<br># Query_time: 0.012308  Lock_time: 0.000124 Rows_sent: 10001  Rows_examined: 10001<br>SET timestamp=1545622346;<br>select * from t where a between 10000 and 20000;<br># Time: 181224 11:32:32<br># User@Host: root[root] @ localhost []  Id: 20852<br># Query_time: 0.351406  Lock_time: 0.000086 Rows_sent: 0  Rows_examined: 100000<br>SET timestamp=1545622352;<br>delete from t;<br># Time: 181224 11:32:37<br># User@Host: root[root] @ localhost []  Id: 20852<br># Query_time: 3.234390  Lock_time: 0.000000 Rows_sent: 0  Rows_examined: 0<br>SET timestamp=1545622357;<br>call idata();<br># Time: 181224 11:32:40<br># User@Host: root[root] @ localhost []  Id: 20852<br># Query_time: 0.014459  Lock_time: 0.000160 Rows_sent: 10001  Rows_examined: 10001<br>SET timestamp=1545622360;<br>select * from t where a between 10000 and 20000;","like_count":8,"discussions":[{"author":{"id":1181844,"avatar":"https://static001.geekbang.org/account/avatar/00/12/08/94/2c22bd4e.jpg","nickname":"å…‹é‡Œæ–¯","note":"","ucode":"00B755C10AC1C3","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":327845,"discussion_content":"å¤§ä½¬ä»¬ï¼Œå¸®æˆ‘åˆ†æä¸€ä¸‹ï¼Œä¸ºå•¥ä¼šé€‰æ‹©one_nameä½œä¸ºç´¢å¼•è€Œæ˜¯ä¸two_id?\n*************************** 1. row ***************************\n        Table: one\n   Non_unique: 0\n     Key_name: PRIMARY\n Seq_in_index: 1\n  Column_name: one_id\n    Collation: A\n  Cardinality: 1\n     Sub_part: NULL\n       Packed: NULL\n         Null: \n   Index_type: BTREE\n      Comment: \nIndex_comment: \n      Visible: YES\n   Expression: NULL\n*************************** 2. row ***************************\n        Table: one\n   Non_unique: 1\n     Key_name: one_name\n Seq_in_index: 1\n  Column_name: one_name\n    Collation: A\n  Cardinality: 1\n     Sub_part: NULL\n       Packed: NULL\n         Null: YES\n   Index_type: BTREE\n      Comment: \nIndex_comment: \n      Visible: YES\n   Expression: NULL\n*************************** 3. row ***************************\n        Table: one\n   Non_unique: 1\n     Key_name: two_id\n Seq_in_index: 1\n  Column_name: two_id\n    Collation: A\n  Cardinality: 1\n     Sub_part: NULL\n       Packed: NULL\n         Null: YES\n   Index_type: BTREE\n      Comment: \nIndex_comment: \n      Visible: YES\n   Expression: NULL\n3 rows in set (0.01 sec)\n\n\n\nexplain select * from one where two_id=&#39;1&#39; and one_name=&#39;&#39; order by two_id\\G\n*************************** 1. row ***************************\n           id: 1\n  select_type: SIMPLE\n        table: one\n   partitions: NULL\n         type: ref\npossible_keys: one_name,two_id\n          key: one_name\n      key_len: 131\n          ref: const\n         rows: 1\n     filtered: 100.00\n        Extra: Using where\n1 row in set, 1 warning (0.00 sec)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605967444,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":47032,"user_name":"æŸã€äºº","can_delete":false,"product_type":"c1","uid":1308784,"ip_address":"","ucode":"ADB42AA12A11C1","user_header":"https://static001.geekbang.org/account/avatar/00/13/f8/70/f3a33a14.jpg","comment_is_top":false,"comment_ctime":1544022018,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"35903760386","product_id":100020801,"comment_content":"è°¢è°¢è€å¸ˆçš„å›ç­”.<br>1.ç¡®å®æœ‰æ—¶å€™æ„Ÿè§‰è™½ç„¶æ˜¾ç¤ºäº†æ‰«æè¡Œæ•°æ¯”è¾ƒå¤š,ä½†æ˜¯limitåº”è¯¥æ˜¯èµ·äº†ä½œç”¨çš„,ä»æ‰§è¡Œæ—¶é—´å°±èƒ½çœ‹å‡ºæ¥ã€‚<br>2.å¤±è¯¯,ç¡®å®æ˜¯åº”è¯¥æ»¡è¶³aæ¡ä»¶idæœ€å¤§çš„ã€‚<br>ä¸´æ—¶è¡¨æ’åºä¹‹å‰äº†è§£è¿‡ä¸€ç‚¹,1.å¸¸è§„æ’åºã€‚2.ä¼˜åŒ–æ’åº 3.ä¼˜å…ˆé˜Ÿåˆ—æ’åº(å †æ’åº)<br>ç”±äºé€‰å–çš„å­—æ®µæ²¡è¶…è¿‡max_length_for_sort_data,æ‰€ä»¥é€‰å–çš„æ˜¯ä¼˜åŒ–æ’åº,åªéœ€è¦è¿›è¡Œä¸€æ¬¡I&#47;Oã€‚","like_count":8},{"had_liked":false,"id":70673,"user_name":"kuzicala","can_delete":false,"product_type":"c1","uid":1200531,"ip_address":"","ucode":"AD1C21328E9928","user_header":"https://static001.geekbang.org/account/avatar/00/12/51/93/ed274018.jpg","comment_is_top":false,"comment_ctime":1551161636,"is_pvip":false,"replies":[{"id":"25226","content":"å¯¹ï¼Œä¸€æ¡æ¡è¿”å›ç»™serverå±‚ï¼Œserverå±‚å¤„ç†å®Œå†è¯»ä¸‹ä¸€ä¸ª","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1551163297,"ip_address":"","comment_id":70673,"utype":1}],"discussion_count":1,"race_medal":0,"score":"31615932708","product_id":100020801,"comment_content":"è¯·æ•™ä¸€ä¸ªç–‘é—®ï¼š<br>  å­˜å‚¨å¼•æ“åœ¨æ‰¾åˆ°ä¸€è¡Œåˆæ ¼çš„æ•°æ®å æ˜¯å…ˆè¿”å›åœ¨ç»§ç»­æŸ¥ è¿˜æ˜¯ä¸€å£æ°”æŸ¥å®Œåœ¨ä¸€æ¬¡æ€§è¿”å›ï¼Ÿ <br>æˆ‘çš„ç†è§£æ˜¯æŸ¥åˆ°ä¸€è¡Œå°±è¿”å› ä¸çŸ¥å¯¹å¦ï¼Ÿ","like_count":7,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":440762,"discussion_content":"å¯¹ï¼Œä¸€æ¡æ¡è¿”å›ç»™serverå±‚ï¼Œserverå±‚å¤„ç†å®Œå†è¯»ä¸‹ä¸€ä¸ª","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551163297,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":58771,"user_name":"ä»²ç„","can_delete":false,"product_type":"c1","uid":1049139,"ip_address":"","ucode":"CA42FFC21DE0EB","user_header":"https://static001.geekbang.org/account/avatar/00/10/02/33/b4bb0b9c.jpg","comment_is_top":false,"comment_ctime":1547190652,"is_pvip":false,"replies":[{"id":"21233","content":"æ‰€ä»¥æˆ‘ä»¬è¦åŠ ä¸€ä¸ªçº¦å®šï¼Œå¦‚æœinnodb_flush_logs_at_trx_commit=1ï¼Œå°±è¦æ¯æ¬¡æäº¤äº‹åŠ¡çš„æ—¶å€™ï¼Œç¡®ä¿è¿™ä¸ªäº‹åŠ¡çš„redo logè¦æŒä¹…åŒ–åˆ°ç£ç›˜ã€‚<br><br>","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547194062,"ip_address":"","comment_id":58771,"utype":1}],"discussion_count":2,"race_medal":0,"score":"31611961724","product_id":100020801,"comment_content":"è€å¸ˆä½ å¥½ , æˆ‘çœ‹ä½ è¯´æ•°æ®å†™åˆ°redo logä¸Š,æ‰€ä»¥ä¸»æœºå¼‚å¸¸é‡å¯ä¸ä¼šä¸¢å¤±, ä½†æ˜¯redo logåŒ…æ‹¬ä¸¤éƒ¨åˆ†ï¼šä¸€æ˜¯å†…å­˜ä¸­çš„æ—¥å¿—ç¼“å†²(redo log buffer)ï¼Œè¯¥éƒ¨åˆ†æ—¥å¿—æ˜¯æ˜“å¤±æ€§çš„ï¼›äºŒæ˜¯ç£ç›˜ä¸Šçš„é‡åšæ—¥å¿—æ–‡ä»¶(redo log file)ï¼Œè¯¥éƒ¨åˆ†æ—¥å¿—æ˜¯æŒä¹…çš„ã€‚ å¦‚æœæ•°æ®æ˜¯åœ¨redo log bufferä¸Šçš„,æ˜¯ä¼šä¸¢å¤±çš„å§?","like_count":7,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436204,"discussion_content":"æ‰€ä»¥æˆ‘ä»¬è¦åŠ ä¸€ä¸ªçº¦å®šï¼Œå¦‚æœinnodb_flush_logs_at_trx_commit=1ï¼Œå°±è¦æ¯æ¬¡æäº¤äº‹åŠ¡çš„æ—¶å€™ï¼Œç¡®ä¿è¿™ä¸ªäº‹åŠ¡çš„redo logè¦æŒä¹…åŒ–åˆ°ç£ç›˜ã€‚\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547194062,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1254801,"avatar":"https://static001.geekbang.org/account/avatar/00/13/25/91/46600294.jpg","nickname":"çŒ´å“¥ä¸€ä¸€ cium","note":"","ucode":"38EC64F8D1A0B4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":312461,"discussion_content":"ä¸ºäº†æ–¹ä¾¿ç†è§£,æˆ‘å°±è¿™æ ·è®°äº†,åˆ· redo log å°±æ˜¯å®æ—¶,æä»€ä¹ˆå¼‚æ­¥åˆ·ç›˜.\nå¯¹æˆ‘æ¥è¯´å¤Ÿç”¨äº†.","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602690285,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":86959,"user_name":"Geek_8c4277","can_delete":false,"product_type":"c1","uid":1448066,"ip_address":"","ucode":"D68861FEE25660","user_header":"","comment_is_top":false,"comment_ctime":1555487209,"is_pvip":false,"discussion_count":4,"race_medal":0,"score":"23030323689","product_id":100020801,"comment_content":"è€å¸ˆï¼Œä½ ç»™çš„ä¾‹å­æœ‰è¯¯ï¼Œè¡¨tçš„ä¸»é”®åº”è¯¥æ˜¯è‡ªå¢ä¸»é”®ï¼Œç„¶åå­˜å‚¨è¿‡ç¨‹ä¹Ÿéœ€è¦æ”¹ä¸‹ï¼Œå»æ‰ä¸»é”®çš„æ’å…¥ï¼Œè¿™æ ·æ‰èƒ½é‡ç°ç´¢å¼•é€‰æ‹©é”™è¯¯ã€‚å¤§éƒ¨åˆ†åŒå­¦æ˜¯æŒ‰ç…§æä¾›çš„å»ºè¡¨è¯­å¥å»åšå®éªŒçš„ï¼Œç»“æœéƒ½æ²¡é‡ç°ï¼Œå“ˆå“ˆã€‚","like_count":5,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":153221,"discussion_content":"èƒ¡æ‰¯ï¼Œæ ¹æœ¬ä¸è¡Œï¼Œä¾æ—§æ˜¯10001","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1580038971,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2843604,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/63/d4/b63373c3.jpg","nickname":"é‡‘é‡‘","note":"","ucode":"807EDDCDB2E939","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":560175,"discussion_content":"8.0.28å¯ä»¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649221577,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":153221,"ip_address":""},"score":560175,"extra":""}]},{"author":{"id":2760460,"avatar":"","nickname":"BOOM","note":"","ucode":"A776D865CFD08B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":397593,"discussion_content":"ç‰ˆæœ¬ Ver 8.0.17 for Linux on x86_64 å¯ä»¥å¤ç°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632647771,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1143234,"avatar":"","nickname":"åˆ˜ç‘","note":"","ucode":"7E712BC281A8A7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":227385,"discussion_content":"è¯·é—®ä¸‹æ‚¨çš„ç‰ˆæœ¬æ˜¯ä»€ä¹ˆï¼ŒæŒ‰ç…§æ‚¨çš„æ“ä½œæ‚¨å¤ç°äº†å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586487264,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":50715,"user_name":"William","can_delete":false,"product_type":"c1","uid":1346215,"ip_address":"","ucode":"55F5D9DEE485B1","user_header":"https://static001.geekbang.org/account/avatar/00/14/8a/a7/674c1864.jpg","comment_is_top":false,"comment_ctime":1545033939,"is_pvip":true,"discussion_count":2,"race_medal":0,"score":"23019870419","product_id":100020801,"comment_content":"ä½¿ç”¨navicate for  mysql  .<br><br>å¼€å¯äº†2ä¸ªæŸ¥è¯¢ç¼–è¾‘å™¨ã€‚<br><br>åœ¨1 ç¼–è¾‘å™¨ä¸­  å¼€å¯é•¿äº‹åŠ¡ï¼šstart TRANSACTION with CONSISTENT SNAPSHOT ; <br><br>ç„¶ååˆ°2ç¼–è¾‘å™¨ä¸­ï¼Œ è¿›è¡Œäº† <br><br>delete from t ; <br><br>call idata();<br><br>explain select *from t where a BETWEEN  1000 and  2000 ; <br><br>ä¾ç„¶ç”¨äº† aç´¢å¼•ã€‚ <br><br>åŒ…æ‹¬ä¸‹ä¸€ç¯‡çš„ä¾‹å­ï¼Œæˆ‘ä¹Ÿçœ‹äº†ã€‚<br>ä¹Ÿæ˜¯æŒ‰ç…§é‚£ä¸ªæ–¹å¼æ¨¡æ‹Ÿçš„ï¼Œå·®åˆ«å°±æ˜¯æˆ‘ç”¨çš„navicat ï¼Œä¸ºä»€ä¹ˆå°±æ— æ³•é‡ç°å‘¢ã€‚ã€‚ã€‚ã€‚","like_count":5,"discussions":[{"author":{"id":2400648,"avatar":"https://static001.geekbang.org/account/avatar/00/24/a1/88/c9ef1b75.jpg","nickname":"è¨€åˆ","note":"","ucode":"F0F0AAFD179DF4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":540543,"discussion_content":"åº”è¯¥æ˜¯é»˜è®¤commitäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640077770,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1273813,"avatar":"https://static001.geekbang.org/account/avatar/00/13/6f/d5/3e284a71.jpg","nickname":"tlseek","note":"","ucode":"39956BA395AADF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":7955,"discussion_content":"ä½¿ç”¨navicatçš„å‘½ä»¤è¡Œè¯•è¯•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567739707,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":50691,"user_name":"William","can_delete":false,"product_type":"c1","uid":1346215,"ip_address":"","ucode":"55F5D9DEE485B1","user_header":"https://static001.geekbang.org/account/avatar/00/14/8a/a7/674c1864.jpg","comment_is_top":false,"comment_ctime":1545030169,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"23019866649","product_id":100020801,"comment_content":"è€å¸ˆï¼Œä½ å¥½ã€‚ <br><br>æˆ‘æŒ‰ç…§æ–‡æ¡£ä¸­çš„ä¾‹å­ã€‚æ²¡æœ‰å¤ç°é€‰æ‹©é”™ç´¢å¼•å‘¢ï¼Ÿ<br><br>select @@global.tx_isolation,@@tx_isolation,version(),&quot;session A&quot;;<br><br><br>start transaction with consistent snapshot;<br><br>select now() ;<br><br><br>select @@global.tx_isolation,@@tx_isolation,version(),&quot;session B&quot;;<br><br><br>delete from tt;<br><br>call idata();<br><br>select now();<br><br>explain select * from tt where a between 10000 and 20000;<br><br>select @@global.tx_isolation,@@tx_isolation,version(),&quot;session A&quot;;<br><br>commit;<br><br>","like_count":5},{"had_liked":false,"id":64857,"user_name":"kyqå¶é‘«","can_delete":false,"product_type":"c1","uid":1129030,"ip_address":"","ucode":"0002BFD7569B06","user_header":"https://static001.geekbang.org/account/avatar/00/11/3a/46/9fd9bd26.jpg","comment_is_top":false,"comment_ctime":1548926939,"is_pvip":true,"replies":[{"id":"22946","content":"å°±æ˜¯å› ä¸ºè¿™ä¸ªlimit 100ï¼Œè®©ä¼˜åŒ–å™¨ç®—å®Œå‘ç°ç”¨ç´¢å¼•æ¯”è¾ƒå¿«<br><br>æ€»ä¹‹ï¼Œè¿™ä¸ªå…¶å®æˆ‘è®¤ä¸ºåŸæ¥çš„ä¼˜åŒ–å™¨åˆ¤æ–­æ˜¯ä¸ªbugï¼Œå°±æ˜¯æä¾›ä¸€ä¸ªæ€è·¯ç»™å¤§å®¶å“ˆ","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1548936716,"ip_address":"","comment_id":64857,"utype":1}],"discussion_count":3,"race_medal":0,"score":"18728796123","product_id":100020801,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼šæˆ‘åå¤è¯»äº†å‡ éæ–‡ç« è¿˜æ˜¯æ— æ³•ç†è§£ä¸ºä»€ä¹ˆè¿™ä¸ªè¯­å¥ï¼šselect * from  (select * from t where (a between 1 and 1000)  and (b between 50000 and 100000) order by b limit 100)alias limit 1å¯ä»¥è¯±å¯¼ä¼˜åŒ–å™¨é€‰æ‹©æ­£ç¡®çš„ç´¢å¼•ã€‚ã€‚ã€‚æ±‚è§£æƒ‘ã€‚","like_count":4,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438208,"discussion_content":"å°±æ˜¯å› ä¸ºè¿™ä¸ªlimit 100ï¼Œè®©ä¼˜åŒ–å™¨ç®—å®Œå‘ç°ç”¨ç´¢å¼•æ¯”è¾ƒå¿«\n\næ€»ä¹‹ï¼Œè¿™ä¸ªå…¶å®æˆ‘è®¤ä¸ºåŸæ¥çš„ä¼˜åŒ–å™¨åˆ¤æ–­æ˜¯ä¸ªbugï¼Œå°±æ˜¯æä¾›ä¸€ä¸ªæ€è·¯ç»™å¤§å®¶å“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548936716,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1003956,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/51/b4/0d402ae8.jpg","nickname":"å—æ¡¥ç•‚ç¿Š","note":"","ucode":"A97C49A6309A42","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":38493,"discussion_content":"æˆ‘ä¹Ÿæ˜¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571795483,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1015754,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7f/ca/ea85bfdd.jpg","nickname":"helloworld","note":"","ucode":"00DF2FEC58D2E6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":9520,"discussion_content":"åŸæ¥å’Œæˆ‘æœ‰åŒæ ·çš„ç–‘é—®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568181303,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":64783,"user_name":"greatcl","can_delete":false,"product_type":"c1","uid":1009449,"ip_address":"","ucode":"44D3C55394EC08","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/29/b0ec5430.jpg","comment_is_top":false,"comment_ctime":1548907635,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18728776819","product_id":100020801,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œåˆšå­¦ä¹ åˆ°è¿™èŠ‚å†…å®¹ï¼Œä¸€ç›´å¤ç°ä¸äº†å…¨è¡¨æ‰«æçš„æƒ…å†µï¼Œçœ‹äº†ä¸‹èŠ‚è¯¾é‡Œé¢çš„è§†é¢‘ï¼ŒæŒ‰ç…§ä¸€æ ·çš„æ­¥éª¤æ“ä½œï¼ŒSession Bé‡Œæœ€åè¿˜æ˜¯èµ°aç´¢å¼•ï¼Œè¿™ä¸ªä¼šæ˜¯ç‰ˆæœ¬é—®é¢˜å—ï¼Ÿåœ¨Windowsä¸Šæ˜¯5.7.21ï¼ŒUbuntuä¸Šæ˜¯5.7.23éƒ½ä¸è¡Œã€‚<br>æˆ‘ä¹ŸæŠŠåœ¨Ubuntuä¸Šçš„æ“ä½œæ­¥éª¤å½•äº†ä¸ªè§†é¢‘ï¼Œå¦‚æœè€å¸ˆæœ‰æ—¶é—´ï¼Œå¸Œæœ›èƒ½å¸®å¿™çœ‹ä¸€ä¸‹å“ªé‡Œå‡ºé—®é¢˜äº†ï¼Œè°¢è°¢ï¼<br>https:&#47;&#47;www.youtube.com&#47;watch?v=LSS9GUUjEmA<br>","like_count":4},{"had_liked":false,"id":53662,"user_name":"æ›¹é¾™é£","can_delete":false,"product_type":"c1","uid":1198055,"ip_address":"","ucode":"DD2DF8C0E89E38","user_header":"https://static001.geekbang.org/account/avatar/00/12/47/e7/53416498.jpg","comment_is_top":false,"comment_ctime":1545706815,"is_pvip":true,"discussion_count":0,"race_medal":2,"score":"14430608703","product_id":100020801,"comment_content":"ä¸è€å¸ˆï¼ŒæŒ‰ç…§å›¾2çš„æµç¨‹,è¿˜å‚è€ƒäº†è€å¸ˆä¸‹ä¸€ç¯‡æ–‡ç« æœ«å°¾çš„è§†é¢‘,è¿˜æ˜¯æ²¡æœ‰é‡ç°é€‰é”™ç´¢å¼•çš„æƒ…å†µï¼›æ“ä½œå¾ªåºæ˜¯æ²¡æœ‰é—®é¢˜ï¼Œéš”ç¦»çº§åˆ«å’Œè¡¨çš„å­˜å‚¨å¼•æ“ç±»å‹æˆ‘éƒ½æ£€æŸ¥äº†ï¼Œæˆ‘æƒ³é—®çš„æ˜¯:è¿™ä¸ªæ˜¯å¿…ç°çš„å—ï¼Ÿå¦‚æœæ˜¯å¿…ç°ï¼Œä¸å‡ºç°çš„å¯èƒ½åŸå› åˆæœ‰å“ªäº›å‘¢ï¼Ÿ","like_count":3},{"had_liked":false,"id":46934,"user_name":"monkay","can_delete":false,"product_type":"c1","uid":1066182,"ip_address":"","ucode":"07C0BB8A47799A","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/pc41FOKAiabVaaKiawibEm7zglvnsYBnYeRiaSAElf9ciczovXmXmI0hOeR6U9RULFtMoqX5kobNttvwXCLsUM9Hbcg/132","comment_is_top":false,"comment_ctime":1544004352,"is_pvip":false,"replies":[{"id":"16744","content":"Mergeçš„è¿‡ç¨‹ä¸­è¦ä¿®æ”¹æ•°æ®é¡µï¼Œè¿™æ¬¡è®°æ•°æ®é¡µçš„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544011664,"ip_address":"","comment_id":46934,"utype":1}],"discussion_count":4,"race_medal":0,"score":"14428906240","product_id":100020801,"comment_content":"mergeçš„ç¬¬ä¸‰éƒ¨å†™redo logï¼Œä¸æ˜¯å‰é¢çš„æ›´æ–°è¯­å¥å·²ç»å†™äº†redo logäº†å—ï¼Ÿä¸ºä»€ä¹ˆmergeæ—¶åˆå†™ä¸€æ¬¡ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431609,"discussion_content":"Mergeçš„è¿‡ç¨‹ä¸­è¦ä¿®æ”¹æ•°æ®é¡µï¼Œè¿™æ¬¡è®°æ•°æ®é¡µçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544011664,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2667025,"avatar":"","nickname":"Geek_a39aea","note":"","ucode":"94E6C8088AE0CB","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":389499,"discussion_content":"mergeçš„æ—¶å€™è®°å½•çš„æ˜¯æ•°æ®é¡µçš„å˜åŒ–ï¼Œmergeä¹‹å‰è®°å½•çš„æ˜¯change bufferçš„é¡µçš„å˜åŒ–ï¼Œä¸ä¸€æ ·çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629295544,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1263932,"avatar":"https://static001.geekbang.org/account/avatar/00/13/49/3c/5d54c510.jpg","nickname":"é™é™è†å¬","note":"","ucode":"0A8600CB928EFE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":286950,"discussion_content":"è¯´å®è¯ï¼Œæˆ‘ä¹Ÿè§‰å¾—æœ‰ç‚¹å¤šæ­¤ä¸€ä¸¾äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593331889,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1970443,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIx1V1QAxC4NHaxYZGyuibBN8lcURJWc5nrnO4yic1kxnDemYV2FJGialf47kYX9qtDnZZOfe1SJeLicg/132","nickname":"lleft","note":"","ucode":"D573EB509455AE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1263932,"avatar":"https://static001.geekbang.org/account/avatar/00/13/49/3c/5d54c510.jpg","nickname":"é™é™è†å¬","note":"","ucode":"0A8600CB928EFE","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":370494,"discussion_content":"mergeçš„æ—¶å€™è®°å½•çš„æ˜¯æ•°æ®é¡µçš„å˜åŒ–ï¼Œmergeä¹‹å‰è®°å½•çš„æ˜¯change bufferçš„é¡µçš„å˜åŒ–ï¼Œä¸ä¸€æ ·çš„ã€‚å¦‚æœæ²¡æœ‰æ•°æ®é¡µçš„redo æ²¡æœ‰åŠæ³•ä¿è¯æ•°æ®çš„crash-safe","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1619434566,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":286950,"ip_address":""},"score":370494,"extra":""}]}]},{"had_liked":false,"id":319169,"user_name":"wsxzei","can_delete":false,"product_type":"c1","uid":2766280,"ip_address":"","ucode":"8527ED444BFC73","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/JHzZynEKL2CibTaxCZV3XOs1bJJFqbmwhmibd4U5njlaNVWPrbre1Qha2XUx1dcQ99iaYFl13PyjlYQ0rcl9N5vEg/132","comment_is_top":false,"comment_ctime":1635651151,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10225585743","product_id":100020801,"comment_content":"è¯·æ•™ä¸‹å„ä½åŒå­¦è€å¸ˆï¼Œä¸ºä»€ä¹ˆåŠ äº†aç´¢å¼•åæ‰«æè¡Œæ•°ä¼°è®¡ä¸º37000è¡Œï¼Œè€Œä¸æ˜¯20000å¤šè¡Œã€‚ï¼ˆè€ƒè™‘åˆ°æ ‡è®°åˆ é™¤çš„æ•°æ®ï¼Œåº”è¯¥æ˜¯æ­£ç¡®ç»“æœçš„ä¸¤å€ï¼Ÿï¼‰","like_count":2},{"had_liked":false,"id":263978,"user_name":"Wangyf","can_delete":false,"product_type":"c1","uid":2226219,"ip_address":"","ucode":"349068A07CB1D4","user_header":"https://static001.geekbang.org/account/avatar/00/21/f8/2b/339660f1.jpg","comment_is_top":false,"comment_ctime":1606306776,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"10196241368","product_id":100020801,"comment_content":"æœ‰ä¸€è¯´ä¸€è¿™èŠ‚æ˜¯è¿„ä»Šä¸ºæ­¢æœ€æ¨¡ç³Šçš„ä¸€èŠ‚äº†ï¼Œå¾ˆå¤šæ¦‚å¿µè½»è½»ä¸€æ‰«å°±è¿‡å»äº†ï¼Œå®Œå…¨æ²¡æœ‰å†™æ˜ç™½ã€‚çœ‹äº†åˆ«çš„åŒå­¦çš„ç¬”è®°ï¼Œè¯´æ˜å¹¶ä¸æ˜¯æˆ‘ä¸€ä¸ªäººè§‰å¾—æŸäº›åœ°æ–¹å¾ˆæ¨¡ç³Šã€‚å¯èƒ½ä½œè€…å·¥ä½œèƒ½åŠ›ç¡®å®å¾ˆå¼ºï¼Œä½†æ˜¯åœ¨è¿™ç¯‡æ–‡ç« ä¸Šçš„æŸäº›åœ°æ–¹ï¼Œå†™çš„ç€å®åƒåœ¾å¾—ä¸è¡Œï¼Œçœ‹äº†å¾ˆå¤šéä¾ç„¶æ˜¯æœ‰å¾ˆå¤šåœ°æ–¹æ²¡æœ‰å¼„æ¸…æ¥šï¼Œè€Œä¸”è¿™ä¸“æ æ—©å·²æ›´æ–°å®Œæ¯•ï¼Œæœ‰é—®é¢˜ä¹Ÿä¸ä¸€å®šèƒ½å¾—åˆ°å›ç­”ï¼ŒçœŸäºã€‚<br><br>è®²é“ç†é€‰é”™ç´¢å¼•ï¼Œæ˜¯ä¼˜åŒ–å™¨è§‰å¾—å›è¡¨ã€ç£ç›˜ IO ç­‰å¼€é”€è¿‡å¤§ï¼Œå®ƒåšå‡ºäº†è‡ªå·±è§‰å¾—åˆ’ç®—çš„é€‰æ‹©ã€‚ä½•ä¸ä½¿ç”¨ trace å·¥å…·ï¼Œå¾—åˆ°ä¸€ä¸ª json æ–‡ä»¶ï¼Œç„¶åçœ‹é‡Œé¢çš„å¯¹äºæ¯ä¸€ä¸ªç´¢å¼•ï¼Œä¼˜åŒ–å™¨åšå‡ºçš„åˆ¤æ–­ã€‚","like_count":2},{"had_liked":false,"id":256800,"user_name":"Pluto","can_delete":false,"product_type":"c1","uid":1324404,"ip_address":"","ucode":"CD99ED8487BC7D","user_header":"https://static001.geekbang.org/account/avatar/00/14/35/74/8eaee356.jpg","comment_is_top":false,"comment_ctime":1603756739,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"10193691331","product_id":100020801,"comment_content":"è¯•äº†å‡ æ¬¡æ²¡æœ‰é€‰é”™ç´¢å¼•ï¼Œä¸æ˜¯å¾ˆç†è§£","like_count":2,"discussions":[{"author":{"id":1015184,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7d/90/abb7bfe3.jpg","nickname":"fourge","note":"","ucode":"F3E3FFC4990358","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582576,"discussion_content":"åˆ›å»ºè¡¨ç»“æ„çš„æ—¶å€™å»æ‰ä¸»é”®è‡ªå¢å±æ€§ï¼Œå°±å¯ä»¥å¤ç°ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659513810,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":227779,"user_name":"haruki","can_delete":false,"product_type":"c1","uid":1233609,"ip_address":"","ucode":"EE1BA166F20466","user_header":"https://static001.geekbang.org/account/avatar/00/12/d2/c9/f262f947.jpg","comment_is_top":false,"comment_ctime":1592478228,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10182412820","product_id":100020801,"comment_content":"è€å¸ˆæœ‰ä¸ªé—®é¢˜æƒ³é—®ä¸‹ï¼šæœ€å¼€å§‹æ•°æ®é¡µä¸åœ¨å†…å­˜ï¼Œæ›´æ–°æ“ä½œè®°å½•åˆ°change bufferä¸­ï¼Œç„¶åä¹Ÿåœ¨redo log ä¸­è®°å½•äº†ä¸€æ¡change bufferçš„å˜æ›´ï¼Œç„¶åä¹Ÿè®°å½•binlogå¹¶fsyncåˆ°ç£ç›˜ï¼Œç„¶åredo logå˜ä¸ºcommitï¼Œæ˜¯è¿™æ ·ä¸€ä¸ªè¿‡ç¨‹å—ï¼Ÿ<br>å¦‚æœæ˜¯çš„è¯ï¼Œä¸ºä»€ä¹ˆmergeçš„æ—¶å€™è¿˜è¦å†å†™ä¸€æ¬¡redo logï¼Ÿè¿˜æ˜¯è¯´æœªmergeä¹‹å‰ï¼Œredo logè®°å½•çš„æ˜¯change bufferçš„å˜æ›´ï¼Œmergeä¹‹åè®°å½•çš„æ˜¯æ•°æ®é¡µçš„å˜æ›´ã€‚å¦‚æœæ˜¯è¿™æ ·çš„è¯ï¼Œè¿™ä¸¤ç§ä¸åŒçš„å˜æ›´è®°å½•æ˜¯ä¸æ˜¯æœ‰ä»€ä¹ˆæ ‡è®°æ¥åŒºåˆ†å‘¢ï¼Ÿ","like_count":2},{"had_liked":false,"id":161975,"user_name":"å°ç æ¸£","can_delete":false,"product_type":"c1","uid":1723655,"ip_address":"","ucode":"8432409D9616D1","user_header":"https://static001.geekbang.org/account/avatar/00/1a/4d/07/7d331b04.jpg","comment_is_top":false,"comment_ctime":1576420393,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10166354985","product_id":100020801,"comment_content":"è€å¸ˆ ä¸çŸ¥é“ç°åœ¨æ‚¨è¿˜èƒ½çœ‹åˆ°é—®é¢˜å—ï¼Ÿ<br>çœ‹å®Œè¿™ç« ï¼Œæœ‰ä¸ªåœ°æ–¹æœ‰ç‚¹ä¸æ˜ç™½ï¼š<br>åœ¨æ‰«æè¡Œæ•°æ˜¯æ€ä¹ˆåˆ¤æ–­çš„ä¸‹é¢æœ‰è¯´åˆ°mysql åªèƒ½æ ¹æ®ç»Ÿè®¡ä¿¡æ¯æ¥ä¼°ç®—è®°å½•æ•°ï¼Œä½†æ˜¯åé¢åˆè¯´ å…¶å®ç´¢å¼•ç»Ÿè®¡åªæ˜¯ä¸€ä¸ªè¾“å…¥ï¼Œå¯¹äºä¸€ä¸ªå…·ä½“çš„è¯­å¥æ¥è¯´ï¼Œæœ‰ä¼˜åŒ–å™¨è¿˜è¦åˆ¤æ–­æ‰§è¡Œè¿™ä¸ªè¯­å¥æœ¬èº«è¦æ‰«æå¤šå°‘è¡Œï¼æ—¢ç„¶è¯´éœ€è¦ç”¨åˆ°åŸºæ•°æ¥ä¼°ç®—è®°å½•æ•°ï¼Œåé¢æ€ä¹ˆåˆè¯´è¿˜è¦åˆ¤æ–­æ‰«æå¤šå°‘è¡Œï¼Œè¿™ä¸ªæ‰«æçš„ä¸æ˜¯åªå’Œç»Ÿè®¡ä¿¡æ¯ä¹Ÿå°±æ˜¯åŸºæ•°ç›¸å…³å— ï¼Ÿ ","like_count":2},{"had_liked":false,"id":47174,"user_name":"TiTi","can_delete":false,"product_type":"c1","uid":1127343,"ip_address":"","ucode":"58F19596A1EF4C","user_header":"https://static001.geekbang.org/account/avatar/00/11/33/af/dda311cf.jpg","comment_is_top":false,"comment_ctime":1544067279,"is_pvip":false,"replies":[{"id":"16832","content":"å†™redo logæ–‡ä»¶ï¼Œæ˜¯åœ¨æ›´æ–°å†…å­˜ä¹‹åçš„ã€‚<br>","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544071101,"ip_address":"","comment_id":47174,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10134001871","product_id":100020801,"comment_content":"çœ‹äº†è€å¸ˆå¯¹äºä¸Šä¸€æœŸæ€è€ƒé¢˜çš„è§£ç­”ï¼Œâ€œè™½ç„¶æ˜¯åªæ›´æ–°å†…å­˜ï¼Œä½†æ˜¯åœ¨äº‹åŠ¡æäº¤çš„æ—¶å€™ï¼Œæˆ‘ä»¬æŠŠ change bufferçš„æ“ä½œä¹Ÿè®°å½•åˆ° redo log é‡Œäº†ï¼Œæ‰€ä»¥å´©æºƒæ¢å¤çš„æ—¶å€™ï¼Œchange bufferä¹Ÿèƒ½å¤Ÿæ‰¾å›æ¥ â€ï¼Œéš¾é“è®°å½•redo logæ˜¯åœ¨æ›´æ–°change bufferå†…å­˜å†…å®¹ä¹‹å‰å°±åšå¥½çš„å—ï¼Ÿç…§æ‚¨çš„è¯´æ³•ï¼Œäº‹åŠ¡æäº¤ä¹Ÿæ˜¯åœ¨æ›´æ–°å†…å­˜ä¹‹å‰ï¼Œä»è€Œä¿è¯å†™å†…å­˜æ—¶æ–­ç”µï¼Œchange bufferçš„å†…å®¹ä¾ç„¶ä¿å­˜åœ¨redo logé‡Œï¼Ÿæœ‰ç‚¹é¢ è¦†æˆ‘çš„ä¸‰è§‚å•Š","like_count":2,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431687,"discussion_content":"å†™redo logæ–‡ä»¶ï¼Œæ˜¯åœ¨æ›´æ–°å†…å­˜ä¹‹åçš„ã€‚\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544071101,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":47042,"user_name":"åšæ¢¦åˆ°å¤©äº®list","can_delete":false,"product_type":"c1","uid":1314060,"ip_address":"","ucode":"6EE25EBC17C26D","user_header":"https://static001.geekbang.org/account/avatar/00/14/0d/0c/3dbffd56.jpg","comment_is_top":false,"comment_ctime":1544025155,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10133959747","product_id":100020801,"comment_content":"èˆ’æœäº†","like_count":2},{"had_liked":false,"id":46882,"user_name":"â˜","can_delete":false,"product_type":"c1","uid":1302793,"ip_address":"","ucode":"6FAEF05F234D2A","user_header":"https://static001.geekbang.org/account/avatar/00/13/e1/09/9483f537.jpg","comment_is_top":false,"comment_ctime":1543996579,"is_pvip":false,"replies":[{"id":"16791","content":"ä¸èƒ½ï¼Œæˆ–è€…ä½å³°æœŸæ‰§è¡Œ","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544022845,"ip_address":"","comment_id":46882,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10133931171","product_id":100020801,"comment_content":"è€å¸ˆanlyze tableæˆ–è€…optimize tableéƒ½æ˜¯ä¼šé”è¡¨çš„å§ï¼Œçº¿ä¸Šå¯ä»¥ç›´æ¥æ‰§è¡Œå—ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431584,"discussion_content":"ä¸èƒ½ï¼Œæˆ–è€…ä½å³°æœŸæ‰§è¡Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544022845,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":46783,"user_name":"è§è‹¥æ„š","can_delete":false,"product_type":"c1","uid":1081558,"ip_address":"","ucode":"E9AD6D1F65E932","user_header":"https://static001.geekbang.org/account/avatar/00/10/80/d6/1f78bc57.jpg","comment_is_top":false,"comment_ctime":1543980777,"is_pvip":false,"replies":[{"id":"16698","content":"è¿™ä¸ªé—®é¢˜ä¼šåœ¨åé¢ã€Šä¹±ç æ€ä¹ˆåŠã€‹ä¸­å±•å¼€å“ˆã€‚<br><br>å…ˆç®€å•å›ç­”ä¸€ä¸ªï¼Œå­—æ®µåçš„ä¹±ç æ˜¯æ”¹ä¸äº†äº†ï¼Œè¿”å›ç»“æœçš„schemaä¿¡æ¯å›ºå®šåªèƒ½ç”¨utf8, utf8ä¸è®¤è¯†è¡¨æƒ…ç¬¦å·â€¦","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543983039,"ip_address":"","comment_id":46783,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10133915369","product_id":100020801,"comment_content":"è¯·æ•™ä¸ªé—®é¢˜ï¼Œå¦‚æœä¸€ä¸ªè¡¨çš„å­—æ®µåä¸­åŒ…å«è¡¨æƒ…ç¬¦å·æ¯”å¦‚ ağŸ˜‡ï¼ŒæŸ¥è¯¢è¡¨çš„ç»“æœä¸­å­—æ®µåå˜ä¸ºaï¼Ÿï¼Œè¯¥è¡¨çš„å­—ç¬¦é›†å·²è®¾ä¸º utf8_mb4ã€‚æŸ¥çœ‹ information_schema è¡¨ä¸­å­—æ®µåä¹Ÿæ˜¯aï¼Ÿï¼Œå‘ç° information_schema è¡¨çš„é»˜è®¤å­—ç¬¦é›†æ˜¯ utf8ã€‚æŸ¥è¯¢æ—¶è‹¥æ¡ä»¶è¯­å¥ä¸­ç”¨åˆ°è¯¥å­—æ®µåæ—¶ï¼Œç”¨`a?`ï¼Œ`ağŸ˜‡`ï¼Œä»¥åŠ ağŸ˜‡ éƒ½å¯æ­£ç¡®æŸ¥è¯¢åˆ°ç»“æœï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆï¼Ÿè¿˜æœ‰ï¼Œå¦‚ä½•æŸ¥è¯¢å‡ºæ­£ç¡®çš„å­—æ®µåï¼Œå³æŸ¥è¯¢ç»“æœä¸­ä¸º ağŸ˜‡ è€Œä¸æ˜¯ a?ã€‚è°¢è°¢ï¼","like_count":2,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431543,"discussion_content":"è¿™ä¸ªé—®é¢˜ä¼šåœ¨åé¢ã€Šä¹±ç æ€ä¹ˆåŠã€‹ä¸­å±•å¼€å“ˆã€‚\n\nå…ˆç®€å•å›ç­”ä¸€ä¸ªï¼Œå­—æ®µåçš„ä¹±ç æ˜¯æ”¹ä¸äº†äº†ï¼Œè¿”å›ç»“æœçš„schemaä¿¡æ¯å›ºå®šåªèƒ½ç”¨utf8, utf8ä¸è®¤è¯†è¡¨æƒ…ç¬¦å·â€¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543983039,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":46700,"user_name":"æŸšå­","can_delete":false,"product_type":"c1","uid":1002136,"ip_address":"","ucode":"7641A699DA0CFD","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/NhbRicjvf8v3K6D3v1FtOicxOciaPZQsCjCmuGCqea4vJeRVaLicKLpAcFQlcTgLvczBWY7SYDkeOtibxXj1PGl7Nug/132","comment_is_top":false,"comment_ctime":1543972636,"is_pvip":true,"replies":[{"id":"16681","content":"æ˜¯ä¸æ˜¯è®°åäº†â€¦ åº”è¯¥æ˜¯a æ˜¯varchar ç±»å‹ï¼Œç„¶åSQLæ˜¯ a=1, æ”¹æˆâ€™1â€™å°±å¥½äº†ï¼Ÿ<br>è¿™ä¸ªæ˜¯è·Ÿç±»å‹è½¬åŒ–è§„åˆ™æœ‰å…³ï¼Œæˆ‘ä»¬ä¼šåœ¨åé¢æ–‡ç« æåˆ°","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543974770,"ip_address":"","comment_id":46700,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10133907228","product_id":100020801,"comment_content":"æˆ‘ä»¥å‰é‡åˆ°è¿‡ä¸€æ¬¡ï¼Œå­—æ®µaç±»å‹æ˜¯intï¼Œwhere a=â€˜1â€™,æ¡ä»¶å€¼æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œæœ€åå‘ç°æ²¡æœ‰ç”¨åˆ°ç´¢å¼•ï¼Œæ”¹æˆæ•°å€¼1å°±ç”¨åˆ°äº†ï¼Œåªåœ¨é‚£ä¸€å°æœºå­å¤ç°äº†ï¼Œè¯·é—®è¿™æ˜¯mysqlæœ‰è¿™æ ·è®¾è®¡ä¹ˆï¼Œæ˜¯æœ‰é…ç½®æ§åˆ¶çš„ä¹ˆ","like_count":2,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431510,"discussion_content":"æ˜¯ä¸æ˜¯è®°åäº†â€¦ åº”è¯¥æ˜¯a æ˜¯varchar ç±»å‹ï¼Œç„¶åSQLæ˜¯ a=1, æ”¹æˆâ€™1â€™å°±å¥½äº†ï¼Ÿ\nè¿™ä¸ªæ˜¯è·Ÿç±»å‹è½¬åŒ–è§„åˆ™æœ‰å…³ï¼Œæˆ‘ä»¬ä¼šåœ¨åé¢æ–‡ç« æåˆ°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543974770,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":46674,"user_name":"å¤©ç‹","can_delete":false,"product_type":"c1","uid":1239337,"ip_address":"","ucode":"C074B2F9A5F007","user_header":"https://static001.geekbang.org/account/avatar/00/12/e9/29/629d9bb0.jpg","comment_is_top":false,"comment_ctime":1543970648,"is_pvip":false,"replies":[{"id":"16677","content":"1. ä¸€èˆ¬ä¸æ˜¯ï¼Œä½†æ˜¯ä¸å½±å“è¿™ä¸ªé€»è¾‘å“ˆ<br>2. æœ‰å¯èƒ½çš„, index_mergeç®—æ³•å¯ä»¥ã€‚å°±æ˜¯ä½ è¯´çš„å„è‡ªé€‰å‡ºIDã€‚è¿™ä¸ªè¿‡ç¨‹éœ€è¦ç”»ä¸ªå›¾è®²æ¯”è¾ƒæ¸…æ¥šï¼Œæˆ‘æ”¾åˆ°ç­”ç–‘æ–‡ç« ä¸­ã€‚<br> ","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543974563,"ip_address":"","comment_id":46674,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10133905240","product_id":100020801,"comment_content":"è¯·æ•™å‡ ä¸ªé—®é¢˜  1 ç´¢å¼•çš„åŸºæ•°ï¼é¡µé¢ä¸åŒå€¼çš„å¹³å‡å€¼æ•°é‡*ç´¢å¼•çš„é¡µé¢æ•°ï¼Œä»€ä¹ˆæ˜¯ç´¢å¼•çš„é¡µé¢æ•°ï¼Œç´¢å¼•æ˜¯åœ¨é¡µé¢ä¸Šè¿ç»­ä¿å­˜çš„ï¼Ÿ2 ä¸€ä¸ªè¡¨æœ‰å¤šä¸ªç´¢å¼•çš„æƒ…å†µï¼Œwhereæ¡ä»¶é‡Œé¢æœ‰å¤šä¸ªç´¢å¼•åˆ—çš„æ¡ä»¶ï¼Œæ¯æ¬¡éƒ½åªèƒ½èµ°ä¸€ä¸ªç´¢å¼•å—ï¼Œèƒ½éƒ½ä¼˜åŒ–è®©èµ°å¤šä¸ªç´¢å¼•å—ï¼Œä¸èƒ½åŒæ—¶èµ°å¤šä¸ªç´¢å¼•çš„åŸå› æ˜¯ä»€ä¹ˆï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431504,"discussion_content":"1. ä¸€èˆ¬ä¸æ˜¯ï¼Œä½†æ˜¯ä¸å½±å“è¿™ä¸ªé€»è¾‘å“ˆ\n2. æœ‰å¯èƒ½çš„, index_mergeç®—æ³•å¯ä»¥ã€‚å°±æ˜¯ä½ è¯´çš„å„è‡ªé€‰å‡ºIDã€‚è¿™ä¸ªè¿‡ç¨‹éœ€è¦ç”»ä¸ªå›¾è®²æ¯”è¾ƒæ¸…æ¥šï¼Œæˆ‘æ”¾åˆ°ç­”ç–‘æ–‡ç« ä¸­ã€‚\n ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543974563,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":278096,"user_name":"éƒ‘å–œäº®","can_delete":false,"product_type":"c1","uid":1450420,"ip_address":"","ucode":"9E47DC9361B6D3","user_header":"https://static001.geekbang.org/account/avatar/00/16/21/b4/7fb0d713.jpg","comment_is_top":false,"comment_ctime":1612759139,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5907726435","product_id":100020801,"comment_content":"æ²¡æœ‰çœŸå®åˆ é™¤ï¼Œå†æ’å…¥æ—¶é¡µé¢åˆ©ç”¨ç‡ä»…æœ‰çº¦50%ï¼Œæ‰€ä»¥ç»Ÿè®¡ç»“æœæ”¾å¤§äº†çº¦å››å€ã€‚ä¸è¿‡æœ‰ä¸ªç–‘é—®ï¼Œä¸ºä»€ä¹ˆç»Ÿè®¡æ—¶ä¸åˆ¤æ–­ä¸‹åˆ é™¤æ ‡è¯†ï¼Ÿå¦å¤–ï¼Œæ—¢ç„¶æ˜¯é‡‡æ ·ï¼Œä¸ºä»€ä¹ˆä¸åšä¸€ä¸‹å¹³å‡é¡µé¢åˆ©ç”¨ç‡çš„é‡‡æ ·è®¡ç®—ï¼Ÿå¦‚æœè¯´åˆ é™¤æ‹…å¿ƒå›æ»šï¼Œé‚£ä¸è®¡ç®—é¡µé¢åˆ©ç”¨ç‡åªèƒ½æ˜¯ä¸ºäº†æ€§èƒ½è€ƒè™‘ï¼Ÿ","like_count":1},{"had_liked":false,"id":273217,"user_name":"Ansyear","can_delete":false,"product_type":"c1","uid":1629257,"ip_address":"","ucode":"489CE96852EA2C","user_header":"https://static001.geekbang.org/account/avatar/00/18/dc/49/43ae1627.jpg","comment_is_top":false,"comment_ctime":1610500790,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5905468086","product_id":100020801,"comment_content":"æ­£æ–‡ä¸­æ’å…¥100000æ¡æ•°æ®çš„å‡½æ•°åˆ°åº•åº”è¯¥æ€ä¹ˆæ‰§è¡Œçš„ï¼Œä¸ºä»€ä¹ˆåœ¨Navicatåˆ›å»ºå‡½æ•°æ€»æ˜¯æŠ¥é”™ï¼šinvalid stored procedure syntax","like_count":1,"discussions":[{"author":{"id":2843604,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/63/d4/b63373c3.jpg","nickname":"é‡‘é‡‘","note":"","ucode":"807EDDCDB2E939","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":560177,"discussion_content":"ä½ è¦è´´ä¸€ä¸ªä½ è‡ªå·±å†™çš„å•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649221678,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":205331,"user_name":"helloworld2018","can_delete":false,"product_type":"c1","uid":1210386,"ip_address":"","ucode":"2AE40C0DF5A9F7","user_header":"https://static001.geekbang.org/account/avatar/00/12/78/12/7df38a54.jpg","comment_is_top":false,"comment_ctime":1586594203,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"5881561499","product_id":100020801,"comment_content":"mysqlæ˜¯å¦‚ä½•æ ¹æ®ç´¢å¼•åŒºåˆ†åº¦cardinalityï¼Œæ¥ä¼°ç®—éœ€è¦æ‰«æå¤šå°‘è®°å½•çš„ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":2843604,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/63/d4/b63373c3.jpg","nickname":"é‡‘é‡‘","note":"","ucode":"807EDDCDB2E939","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":560180,"discussion_content":"ç´¢å¼•åŒºåˆ†åº¦è¡¨ç¤ºçš„æ˜¯ç´¢å¼•ä¸­ä¸åŒå€¼çš„æ¯”ä¾‹ï¼Œæ‰€ä»¥å®ƒå½±å“çš„åº”è¯¥æ˜¯æŒ‰ç…§æŸä¸ªå€¼è¿›è¡ŒæŸ¥æ‰¾å¹³å‡å¤§æ¦‚ä¼šæ‰§è¡Œå¤šå°‘æ¬¡è¡Œæ‰«æçš„æ¬¡æ•°ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚æœ‰ä¸€ä¸ªç´¢å¼•çš„åŒºåˆ†åº¦æ˜¯0.5ï¼Œè¿™ä¸ªç´¢å¼•æ˜¯åœ¨å±æ€§aä¸Šå»ºç«‹çš„ï¼Œå¦‚æœè¿™å¼ è¡¨ä¸€å…±æœ‰1wè¡Œï¼Œé‚£å°±è¡¨ç¤ºåœ¨è¿™å¼ è¡¨ä¸­ï¼Œä¸é‡å¤çš„aå€¼å¤§æ¦‚åªæœ‰5000ï¼ˆå½“ç„¶è¿™æ ·çš„ä¼°è®¡å…¶å®ä¹Ÿä¸æ˜¯å¾ˆå‡†ç¡®ï¼‰ï¼Œæ‰€ä»¥ä½ åœ¨æŸ¥è¯¢æ—¶å¦‚æœæŒ‡æ˜a=xxxæ¥æŸ¥è¯¢çš„è¯ï¼Œé‚£ä¼°è®¡å°±ä¼šæ‰«æ2è¡Œã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649222141,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1970443,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIx1V1QAxC4NHaxYZGyuibBN8lcURJWc5nrnO4yic1kxnDemYV2FJGialf47kYX9qtDnZZOfe1SJeLicg/132","nickname":"lleft","note":"","ucode":"D573EB509455AE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":370496,"discussion_content":"èµ°å“ªä¸ªç´¢å¼•å°±æ ¹æ®ç´¢å¼•çš„åŒºåˆ†åº¦å’Œwhereæ¡ä»¶æ¥è®¡ç®—ä¸å°±è¡Œäº†ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619434881,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1324122,"avatar":"https://static001.geekbang.org/account/avatar/00/14/34/5a/723311cd.jpg","nickname":"å¥å­","note":"","ucode":"C0C20F466DF9D0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":336111,"discussion_content":"æ„Ÿè§‰æ˜¯cardinalityå½±å“äº†ç´¢å¼•çš„é€‰æ‹©ï¼Œç´¢å¼•çš„é€‰æ‹©å½±å“äº†æ‰«æçš„è¡Œæ•°ã€‚å¦‚é€‰æ‹©ä¸»é”®ï¼Œè¿™é‡Œä¼šæ‰«æ100000ï¼Œé€‰æ‹©ç´¢å¼•cå°±ä¸ä¸€æ ·äº†ã€‚ä½†æ˜¯ä¸ºä»€ä¹ˆä¼šæ‰«æ3ä¸‡å¤šè¡Œï¼Œè¿™ä¸ªä¸æ˜¯å¾ˆæ¸…æ¥šï¼Œè€å¸ˆåœ¨ä¸‹ä¸€èŠ‚è¯¾ä¸­ä¹Ÿæ²¡æœ‰ç»™å‡ºç­”æ¡ˆã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608479518,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":180772,"user_name":"mgs2002","can_delete":false,"product_type":"c1","uid":1812970,"ip_address":"","ucode":"F5931108BD509B","user_header":"https://static001.geekbang.org/account/avatar/00/1b/a9/ea/5bfce6c5.jpg","comment_is_top":false,"comment_ctime":1582384227,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5877351523","product_id":100020801,"comment_content":"ç®€å•æ€»ç»“<br>1. MySQLç´¢å¼•æ˜¯é€šè¿‡ä¼˜åŒ–å™¨æ¥é€‰æ‹©<br>2. æ‰«æè¡Œæ•°æ˜¯ä¼˜åŒ–å™¨é€‰æ‹©ç´¢å¼•çš„é‡è¦å› ç´ ï¼Œæ‰«æçš„è¡Œæ•°è¶Šå°‘ï¼Œè®¿é—®ç£ç›˜çš„æ¬¡æ•°å°±è¶Šå°‘ï¼ŒCPUæ¶ˆè€—ä¹Ÿè¶Šå°‘<br>3. ä¼˜åŒ–å™¨æœ‰å¯èƒ½é”™è¯¯ä¼°è®¡æ‰«æè¡Œæ•°ï¼Œå¯ä½¿ç”¨analyze table è¡¨å é‡æ–°ç»Ÿè®¡ä¿¡æ¯<br>4. ç´¢å¼•é€‰æ‹©é”™è¯¯å¤„ç†æ–¹å¼â‘ ä½¿ç”¨force index ç´¢å¼• å¼ºåˆ¶ä½¿ç”¨ç´¢å¼• â‘¡ä¿®æ”¹SQLè¯­å¥ï¼Œå¼•å¯¼MySQLä½¿ç”¨æˆ‘ä»¬æœŸæœ›çš„ç´¢å¼•â‘¢åˆ›å»ºæ›´åˆé€‚çš„ç´¢å¼•æˆ–è€…åˆ é™¤è¯¯ç”¨çš„ç´¢å¼•","like_count":1},{"had_liked":false,"id":175172,"user_name":"escray","can_delete":false,"product_type":"c1","uid":1020525,"ip_address":"","ucode":"1F4204930E47C4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/92/6d/becd841a.jpg","comment_is_top":false,"comment_ctime":1580601277,"is_pvip":true,"discussion_count":0,"race_medal":2,"score":"5875568573","product_id":100020801,"comment_content":"ä¸çŸ¥é“å¦‚ä½•å»æŸ¥è¯¢æ…¢æŸ¥è¯¢æ—¥å¿—ï¼Œç®€å•çš„æœç´¢äº†ä¸€ä¸‹ï¼š<br><br># æŸ¥çœ‹æ…¢æŸ¥è¯¢æ—¥å¿—çš„å‚æ•°<br>mysql&gt; show variables like â€˜%slow_query_log%â€™;<br># å¼€å¯æ…¢æŸ¥è¯¢æ—¥å¿—<br>mysql&gt; set global slow_query_log=1;<br># æŸ¥çœ‹æ…¢æŸ¥è¯¢é˜ˆå€¼ï¼Œå•ä½ï¼šæ¯«ç§’<br>mysql&gt; show variables like â€˜long_query_time%â€™;<br># è®¾ç½®æ…¢æŸ¥è¯¢é˜ˆå€¼<br>mysql&gt; set global log_query_time=0;<br><br>è‡ªå·±åšå®éªŒçš„æ—¶å€™ï¼Œå¾—åˆ°äº† show log çš„æ¯”è¾ƒç»“æœï¼Œä½†æ˜¯æ²¡æœ‰å¾—åˆ° explain çš„æ¯”è¾ƒç»“æœï¼Œå¾ˆå¥‡æ€ªçš„æ˜¯ï¼Œé‡æ–°åšå®éªŒéªŒçš„æ—¶å€™ï¼Œshow log ä¹Ÿè¶‹äºä¸€è‡´äº†ï¼Œæœ‰ç‚¹æ€€ç–‘æ˜¯å› ä¸º MySQL ç¼“å­˜äº†æŸ¥è¯¢çš„ç»“æœã€‚<br><br>ä¹‹å‰åœ¨ä½¿ç”¨ Oracle çš„æ—¶å€™ï¼Œæ›¾ç»å¤§çº¦åŠå¹´å·¦å³ä¼šåšä¸€æ¬¡ç´¢å¼•çš„ä¼˜åŒ–ï¼Œç”¨çš„å°±æ˜¯ç±»ä¼¼çš„ analysis çš„å‘½ä»¤ã€‚<br><br>alter index rebuild<br><br>å¯¹äºæ€è€ƒé¢˜ï¼Œå…¶å®æˆ‘è‡ªå·±æ˜¯æ²¡æœ‰èƒ½å¤Ÿå®ç°åˆ©ç”¨ session A é…åˆï¼Œè®© rows å­—æ®µå˜æˆ 30000+ï¼Œæˆ‘ä¹Ÿæ˜¯å¼€äº†ä¸¤ä¸ª MySQL çš„çª—å£ï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆæ²¡æœ‰è¢«è¯†åˆ«ä¸ºä¸¤ä¸ª sessionã€‚<br><br>åœ¨ç•™è¨€é‡Œé¢çœ‹åˆ°æœ‰ä¸å°‘åŒå­¦éƒ½æ²¡èƒ½å¤ç°é‚£ä¸ªç”¨é”™ç´¢å¼•çš„ä¾‹å­ï¼Œåæ¥åœ¨ @Geek_8c4277 çš„æç¤ºä¸‹ï¼ŒåŸæ–‡æä¾›çš„å»ºè¡¨è¯­å¥å’Œå­˜å‚¨è¿‡ç¨‹å®šä¹‰å¯èƒ½æœ‰é—®é¢˜ã€‚å¦‚æœä½¿ç”¨è‡ªå¢ ID åšä¸»é”®ï¼Œé‚£ä¹ˆèƒ½å¤Ÿå¤ç°ç”¨é”™ç´¢å¼•ï¼Œä½†æ˜¯è¿™æ ·ä¸€æ¥ï¼Œè¡¨ä¸­çš„æ•°æ®å…¶å®æ˜¯ä¸ä¸€æ ·çš„ï¼ˆIDå­—æ®µï¼‰ï¼Œä¸çŸ¥é“æ˜¯å¦ä¸ºä½œè€…æœ¬æ„ã€‚","like_count":1},{"had_liked":false,"id":103366,"user_name":"å¤©ä½¿æ¢¦æ³ª","can_delete":false,"product_type":"c1","uid":1235750,"ip_address":"","ucode":"782991747DD424","user_header":"https://static001.geekbang.org/account/avatar/00/12/db/26/3c8d68fb.jpg","comment_is_top":false,"comment_ctime":1560420981,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5855388277","product_id":100020801,"comment_content":"è€å¸ˆå¥½ï¼Œorder by bï¼Œa  limit 1 è¿™ä¸ªè¯­å¥çš„æ‰§è¡Œæµç¨‹ä¸ºå•¥ä¸æ˜¯å–å¾—æœ€åæŸ¥è¯¢ç»“æœçš„ä¸€è¡Œè®°å½•å‘¢ï¼Ÿå’Œä¸ä½¿ç”¨order byï¼Œç›´æ¥ä½¿ç”¨limit 1çš„æ‰§è¡Œæµç¨‹æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":153252,"discussion_content":"é»˜è®¤å‡åºã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580040323,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":97185,"user_name":"Geek_e7a036","can_delete":false,"product_type":"c1","uid":1497030,"ip_address":"","ucode":"65EA05C403441F","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIUvKMecKzfLSgFuYicksMxz1BJHp2Qz1uJBZsrfMTwBmF39tibW7HvbRmompwr71x86qwW22hLTULw/132","comment_is_top":false,"comment_ctime":1558603994,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5853571290","product_id":100020801,"comment_content":"æ–‡ç« çš„ä¾‹å­æˆ‘åˆšå¼€å§‹æ²¡å¤ç°ï¼Œç„¶ååŠ äº†è‡ªå¢æ˜¯å¤ç°äº†ã€‚ä½†æ˜¯æœ‰ä¸€äº›ç–‘é—®ã€‚<br>1. æˆ‘å¼€å¯äº‹åŠ¡Açš„æ—¶å€™ï¼Œäº‹åŠ¡Bè¿›è¡Œåˆ é™¤å‰åexplainçš„rowsä¸ä¸€æ ·ã€‚æˆ‘çŒœæµ‹æ˜¯explainä¸­rowsæ˜¯æŸ¥è¯¢çš„å…¨å±€çš„table statusä¸­çš„è¡Œæ•°ï¼Ÿè€Œä¸æ˜¯å¦‚selectæ“ä½œå»ºç«‹äº†å¿«ç…§è¯»ï¼Ÿ<br>MariaDB [test_mysql]&gt; begin;<br>Query OK, 0 rows affected (0.00 sec)<br><br>MariaDB [test_mysql]&gt; select * from t where a between 10000 and 20000 limit 1;<br>+-------+-------+-------+<br>| id    | a     | b     |<br>+-------+-------+-------+<br>| 10000 | 10000 | 10000 |<br>+-------+-------+-------+<br>1 row in set (0.00 sec)<br><br>MariaDB [test_mysql]&gt; explain select * from t where a between 10000 and 20000;<br>+------+-------------+-------+-------+---------------+------+---------+------+-------+-----------------------+<br>| id   | select_type | table | type  | possible_keys | key  | key_len | ref  | rows  | Extra                 |<br>+------+-------------+-------+-------+---------------+------+---------+------+-------+-----------------------+<br>|    1 | SIMPLE      | t     | range | a             | a    | 5       | NULL | 10000 | Using index condition |<br>+------+-------------+-------+-------+---------------+------+---------+------+-------+-----------------------+<br>1 row in set (0.00 sec)<br><br>MariaDB [test_mysql]&gt; explain select * from t where a between 10000 and 20000;<br>+------+-------------+-------+------+---------------+------+---------+------+------+-------------+<br>| id   | select_type | table | type | possible_keys | key  | key_len | ref  | rows | Extra       |<br>+------+-------------+-------+------+---------------+------+---------+------+------+-------------+<br>|    1 | SIMPLE      | t     | ALL  | a             | NULL | NULL    | NULL |    1 | Using where |<br>+------+-------------+-------+------+---------------+------+---------+------+------+-------------+<br>1 row in set (0.00 sec)<br><br>2. äº‹åŠ¡Aä¸­çš„explainçš„rowséšç€æ’å…¥æ˜¯ä»1ä¸æ–­ä¸Šå‡åˆ°58407ï¼Œæ’å…¥å®Œæˆåˆæ¢å¤åˆ°10000ï¼Œè¿™ä¸ªåˆ°5wæ˜¯å› ä¸ºäº‹åŠ¡Aæœ‰å¿«ç…§è¯»çš„æ ‡è®°åˆ é™¤çš„æ•°æ®ï¼Œåˆæœ‰æ–°æ’å…¥çš„æ•°æ®ï¼Œç„¶åä¸æ–­ä¸Šå‡ï¼Ÿæœ€ååˆæ¢å¤åˆ°å½“å‰è¡¨ç»Ÿè®¡çš„è¡Œæ•°ï¼Ÿ<br>","like_count":1},{"had_liked":false,"id":96575,"user_name":"ç‹‚é£éª¤é›¨","can_delete":false,"product_type":"c1","uid":1305749,"ip_address":"","ucode":"5CE9B9438FAB3F","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKZSibeTatZ2ImL5Xu3QqdTWQs5nyQAxDlsm3m0KicP3TN6icJqYricvhjOFfTB2B3oLInU45CC9LtqMA/132","comment_is_top":false,"comment_ctime":1558451152,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5853418448","product_id":100020801,"comment_content":"åƒæ–‡ä¸­è¿™ç§æƒ…å†µï¼Œç”¨ç»„åˆç´¢å¼•æ˜¯ä¸æ˜¯å°±ä¸ä¼šå‡ºé—®é¢˜å‘¢","like_count":1},{"had_liked":false,"id":70288,"user_name":"ä¸‰èƒ–","can_delete":false,"product_type":"c1","uid":1373454,"ip_address":"","ucode":"CD69FCD606FC5C","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/1hp9kzzuLUVHzmmddIPIO2OgUWr1ibJRr8cMoB7K0fwx8Vmn34L8yN2NoYUtgNicfPGaXKF02pQ2huXd59r2I0kw/132","comment_is_top":false,"comment_ctime":1551065146,"is_pvip":false,"replies":[{"id":"25080","content":"æ­£å¸¸åº”è¯¥æ˜¯å¤šä¸ªçº¿ç¨‹å§ï¼Œ<br>ä½ å¯ä»¥é€šè¿‡ select @@pseudo_thread_id æ¥æŸ¥çœ‹æœ¬çª—å£çš„session id<br><br>ä¸è¿‡ç´¢å¼•é€‰æ‹©çš„caseæœ‰æ—¶å€™ä¾èµ–äºç°åœºç¯å¢ƒçš„å“ˆ^_^","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1551068758,"ip_address":"","comment_id":70288,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5846032442","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæˆ‘æ˜¯windowsä¸Šé¢å®è·µçš„ï¼Œç”¨navicatå¼€ä¸¤ä¸ªçª—å£è¿›è¡Œå¤ç°ï¼Œä½†æ˜¯æ²¡æœ‰å¤ç°æˆåŠŸã€‚æ˜¯å› ä¸ºä¸¤ä¸ªçª—å£å…¶å®éƒ½ç®—ä¸€ä¸ªssesionå—","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":440547,"discussion_content":"æ­£å¸¸åº”è¯¥æ˜¯å¤šä¸ªçº¿ç¨‹å§ï¼Œ\nä½ å¯ä»¥é€šè¿‡ select @@pseudo_thread_id æ¥æŸ¥çœ‹æœ¬çª—å£çš„session id\n\nä¸è¿‡ç´¢å¼•é€‰æ‹©çš„caseæœ‰æ—¶å€™ä¾èµ–äºç°åœºç¯å¢ƒçš„å“ˆ^_^","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551068758,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":61832,"user_name":"äº®","can_delete":false,"product_type":"c1","uid":1086346,"ip_address":"","ucode":"5B8E59AEA6E3F2","user_header":"https://static001.geekbang.org/account/avatar/00/10/93/8a/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1547812594,"is_pvip":false,"replies":[{"id":"21932","content":"åŠ MDL è¯»é”","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547825060,"ip_address":"","comment_id":61832,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5842779890","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæ‚¨å¥½ï¼Œanalyze table è¯­å¥ä¼šé”è¡¨å—","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437012,"discussion_content":"åŠ MDL è¯»é”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547825060,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":57136,"user_name":"æˆ‘æ˜¯å°é˜Ÿé•¿","can_delete":false,"product_type":"c1","uid":1334198,"ip_address":"","ucode":"E0687666EE2031","user_header":"https://static001.geekbang.org/account/avatar/00/14/5b/b6/f404b490.jpg","comment_is_top":false,"comment_ctime":1546657432,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5841624728","product_id":100020801,"comment_content":"è€å¸ˆï¼Œçœ‹ä¸‹è¿™ä¸ªæœ‰é—®é¢˜ä¹ˆï¼Ÿmysql&gt; select @@global.tx_isolation,@@tx_isolation,version(),&quot;session A&quot;;<br>+-----------------------+-----------------+------------+-----------+<br>| @@global.tx_isolation | @@tx_isolation  | version()  | session A |<br>+-----------------------+-----------------+------------+-----------+<br>| REPEATABLE-READ       | REPEATABLE-READ | 5.7.17-log | session A |<br>+-----------------------+-----------------+------------+-----------+<br>1 row in set<br><br>mysql&gt; start transaction with consistent snapshot;<br>Query OK, 0 rows affected<br><br>mysql&gt; select @@global.tx_isolation,@@tx_isolation,version(),&quot;session B&quot;;<br>+-----------------------+-----------------+------------+-----------+<br>| @@global.tx_isolation | @@tx_isolation  | version()  | session B |<br>+-----------------------+-----------------+------------+-----------+<br>| REPEATABLE-READ       | REPEATABLE-READ | 5.7.17-log | session B |<br>+-----------------------+-----------------+------------+-----------+<br>1 row in set<br><br>mysql&gt; delete from t;<br>Query OK, 100000 rows affected<br><br>mysql&gt; call ww();<br>Query OK, 1 row affected<br><br>mysql&gt;  explain select * from t where a between 10000 and 20000;<br>+----+-------------+-------+------------+-------+---------------+-----+---------+------+-------+----------+-----------------------+<br>| id | select_type | table | partitions | type  | possible_keys | key | key_len | ref  | rows  | filtered | Extra                 |<br>+----+-------------+-------+------------+-------+---------------+-----+---------+------+-------+----------+-----------------------+<br>|  1 | SIMPLE      | t     | NULL       | range | a             | a   | 5       | NULL | 10001 |      100 | Using index condition |<br>+----+-------------+-------+------------+-------+---------------+-----+---------+------+-------+----------+-----------------------+<br>1 row in set<br><br>mysql&gt;  commit;<br>","like_count":1},{"had_liked":false,"id":53566,"user_name":"è¿æ–¤æˆé£","can_delete":false,"product_type":"c1","uid":1350812,"ip_address":"","ucode":"BAFF69C29FDFA5","user_header":"https://static001.geekbang.org/account/avatar/00/14/9c/9c/e02a0daf.jpg","comment_is_top":false,"comment_ctime":1545692139,"is_pvip":false,"replies":[{"id":"19483","content":"æ²¡æœ‰è§¦å‘ç´¢å¼•é‡æ–°ç»Ÿè®¡ï¼Œå°±æ˜¯ç›´æ¥ç”¨æŒ‡å®šçš„ç´¢å¼•æ‰§è¡Œ","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1545702784,"ip_address":"","comment_id":53566,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5840659435","product_id":100020801,"comment_content":"è€å¸ˆå¥½ï¼Œå¯¹ ä¸Šé¢ç½‘å‹ ying çš„500ä¸‡è®°å½•ç”¨use indexç´¢å¼•æç¤ºåæ”¹å˜äº†æ‰§è¡Œè®¡åˆ’ï¼Œæˆ‘è¿˜æ˜¯æœ‰ç‚¹å°ç–‘é—®ï¼Œè‹¥æ˜¯åªæ˜¯ç”¨use index è€Œç»Ÿè®¡ä¿¡æ¯æ²¡æœ‰å˜åŒ–çš„è¯ï¼Œä¼˜åŒ–å™¨ä¸ä¼šä»…ä»…ä¾æ®è¯¥æç¤ºå»è°ƒæ•´æ‰§è¡Œè®¡åˆ’ï¼Ÿè¿˜æ˜¯åŠ ç´¢å¼•æç¤ºåä¼šè§¦å‘é‡æ–°æ”¶é›†ç»Ÿè®¡ä¿¡æ¯ç­‰å†…éƒ¨æœºåˆ¶ï¼Ÿè°¢è°¢","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":434183,"discussion_content":"æ²¡æœ‰è§¦å‘ç´¢å¼•é‡æ–°ç»Ÿè®¡ï¼Œå°±æ˜¯ç›´æ¥ç”¨æŒ‡å®šçš„ç´¢å¼•æ‰§è¡Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545702784,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":50693,"user_name":"William","can_delete":false,"product_type":"c1","uid":1346215,"ip_address":"","ucode":"55F5D9DEE485B1","user_header":"https://static001.geekbang.org/account/avatar/00/14/8a/a7/674c1864.jpg","comment_is_top":false,"comment_ctime":1545030215,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5839997511","product_id":100020801,"comment_content":"è¡¥å……ï¼šREPEATABLE-READ\tREPEATABLE-READ\t5.7.17-log\tsession A   åˆšæé—®çš„å†…å®¹ã€‚","like_count":1},{"had_liked":false,"id":49510,"user_name":"æ±æ—å¤–å²","can_delete":false,"product_type":"c1","uid":1188906,"ip_address":"","ucode":"3C66C0F0537A99","user_header":"https://static001.geekbang.org/account/avatar/00/12/24/2a/33441e2b.jpg","comment_is_top":false,"comment_ctime":1544702488,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5839669784","product_id":100020801,"comment_content":"ä¸å¤§ï¼Œæˆ‘æœ¬åœ°mysqlæ˜¯5.6.40ï¼Œç»è¿‡å›¾2çš„æµ‹è¯•åä»ç„¶ç”¨çš„æ˜¯ç´¢å¼•a,è¡Œæ•°æ˜¯10000ï¼Œå›¾11çš„ç»“æœä¹Ÿä¸æ‚¨çš„ç»“æœä¸åŒï¼Œæˆ‘çš„ä¸‹é¢çš„è¿˜æ˜¯ç”¨çš„bç´¢å¼•ï¼Œç„¶åè¡Œæ•°æ˜¯50128ï¼Œè¯·é—®æ˜¯ç‰ˆæœ¬çš„é—®é¢˜å—ï¼Ÿ","like_count":1},{"had_liked":false,"id":48251,"user_name":"andy","can_delete":false,"product_type":"c1","uid":1063321,"ip_address":"","ucode":"F03BE5E20B471C","user_header":"https://static001.geekbang.org/account/avatar/00/10/39/99/42929758.jpg","comment_is_top":false,"comment_ctime":1544406584,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5839373880","product_id":100020801,"comment_content":"create table #t<br>(<br>\ta int,<br>\tb int,<br>\tc int<br>)<br><br>insert into #t values(1,1,1)<br><br>declare @count int<br>set @count=1<br><br>while @count&lt;=70000<br>begin<br>\tinsert into #t select a+@count,b+@count,c+@count from #t<br>\tset @count= @count*2<br>end<br><br>æ’å…¥æµ‹è¯•æ•°æ®ï¼Œè¿™ç§æ–¹æ³•æˆ‘è¯•è¿‡å¾ˆå¿«ï¼Œä¸è¿‡ä¸èƒ½å‡†ç¡®æ’å…¥10ä¸‡æ¡ï¼Œä»¥ä¸Šæ˜¯SQL Serverçš„è¯­æ³•","like_count":1,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":153223,"discussion_content":"é‚£å°±æŒ‰ç…§è€å¸ˆçš„sqlè¯­å¥ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580039301,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":48060,"user_name":"gentlemanâ™¥ï¸","can_delete":false,"product_type":"c1","uid":1119062,"ip_address":"","ucode":"0BAC746A70038C","user_header":"https://static001.geekbang.org/account/avatar/00/11/13/56/6a062937.jpg","comment_is_top":false,"comment_ctime":1544337766,"is_pvip":false,"replies":[{"id":"17133","content":"æ˜¯è¿™æ ·çš„ï¼Œé—®é¢˜ç¡®å®åªæ˜¯ç”¨æ¥å¼•å‡ºè¯é¢˜ï¼Œå¦åˆ™è¿™ç¯‡æ–‡ç« å¦‚æœåªè®²ä¸€ä¸ªâ€œç´¢å¼•ç»Ÿè®¡â€é—®é¢˜å‘¢ï¼Œ<br>æˆ‘è§‰å¾—å†…å®¹ä¸å¤Ÿï¼Œå¯¹ä¸èµ·å¤§å®¶èŠ±æ—¶é—´æ¥è¯»â€¦<br><br>æ‰€ä»¥ä½ æŠŠé—®é¢˜å½“ä½œå°å­å¥½äº†ï¼Œ<br>è¿™ç¯‡æ–‡ç« å°±æ˜¯è¯´çš„â€œç´¢å¼•é€‰é”™ï¼Œæ¡ˆä¾‹åŠå¤„ç†åˆ†äº«â€","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544353941,"ip_address":"","comment_id":48060,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5839305062","product_id":100020801,"comment_content":"è€å¸ˆ æä¸ªå»ºè®®ï¼Œçœ‹äº†ä½ å‡ ç« äº†ï¼Œå‘ç°ä¸€ä¸ªé—®é¢˜ï¼Œ<br>æœ‰æ—¶å€™ï¼Œå¸¦å‡ºä¸€ä¸ªé—®é¢˜ï¼Œåé¢åˆä¸æ˜¯ç”±è¿™ä¸ªé—®é¢˜å¼•èµ·çš„ï¼Œ<br>æ„Ÿè§‰å°±å¥½åˆ†æ•£ï¼Œä¼šè®©äººæ‘¸ç€å¤´è„‘çš„æ„Ÿè§‰ï¼Œ<br>å°½é‡ï¼Œå‰åå› æœå…³ç³»è¡”æ¥ç‚¹å“ˆ","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432012,"discussion_content":"æ˜¯è¿™æ ·çš„ï¼Œé—®é¢˜ç¡®å®åªæ˜¯ç”¨æ¥å¼•å‡ºè¯é¢˜ï¼Œå¦åˆ™è¿™ç¯‡æ–‡ç« å¦‚æœåªè®²ä¸€ä¸ªâ€œç´¢å¼•ç»Ÿè®¡â€é—®é¢˜å‘¢ï¼Œ\næˆ‘è§‰å¾—å†…å®¹ä¸å¤Ÿï¼Œå¯¹ä¸èµ·å¤§å®¶èŠ±æ—¶é—´æ¥è¯»â€¦\n\næ‰€ä»¥ä½ æŠŠé—®é¢˜å½“ä½œå°å­å¥½äº†ï¼Œ\nè¿™ç¯‡æ–‡ç« å°±æ˜¯è¯´çš„â€œç´¢å¼•é€‰é”™ï¼Œæ¡ˆä¾‹åŠå¤„ç†åˆ†äº«â€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544353941,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":47985,"user_name":"èš‚èšå†…æ¨+v","can_delete":false,"product_type":"c1","uid":1050508,"ip_address":"","ucode":"24B10AEE54B3FD","user_header":"https://static001.geekbang.org/account/avatar/00/10/07/8c/0d886dcc.jpg","comment_is_top":false,"comment_ctime":1544280097,"is_pvip":false,"replies":[{"id":"17097","content":"1. æ˜¯çš„<br><br>2. å¦‚æœä½ çš„éœ€æ±‚å°±æ˜¯è¦å¯¼å‡ºå…¨è¡¨ï¼Œé‚£åªèƒ½è¿™æ ·äº†ã€‚ã€‚ æŒ‰versionåˆ†è¡¨å¯ä»¥è§£å†³å›è¡¨é—®é¢˜ï¼Œä½†æ˜¯å¾—çœ‹çœ‹ä½ åˆ«çš„ä¸šåŠ¡è¯·æ±‚éœ€æ±‚","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544332551,"ip_address":"","comment_id":47985,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5839247393","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæˆ‘ä»¬ç°åœ¨ä½¿ç”¨mysqlæ—¶ï¼Œåœ¨è¡¨tä¸Šæœ‰ä¸€ä¸ªç‰ˆæœ¬å·ç´¢å¼•ï¼Œæ¯å¤©æ›´æ–°ä¸€æ¬¡æ•°æ®é‡100wå·¦å³ï¼Œæ›´æ–°çš„å½“å¤©æ—¥æœŸä½œä¸ºç‰ˆæœ¬å·ï¼Œæ­¤æ—¶æŸä¸€å¤©çš„ç‰ˆæœ¬å·ç´¢å¼•ï¼Œå¯¹åº”çš„æ•°æ®æœ‰100wï¼Œé‚£ä¹ˆ<br>1. æˆ‘å¦‚æœæŸ¥è¯¢select * from t where version =&#39;xxxx&#39;çš„æ—¶å€™ï¼Œéœ€è¦å›è¡¨100wæ¬¡å—ï¼Ÿ<br>2. å‡å°‘å›è¡¨æ¬¡æ•°çš„åŠæ³•å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431974,"discussion_content":"1. æ˜¯çš„\n\n2. å¦‚æœä½ çš„éœ€æ±‚å°±æ˜¯è¦å¯¼å‡ºå…¨è¡¨ï¼Œé‚£åªèƒ½è¿™æ ·äº†ã€‚ã€‚ æŒ‰versionåˆ†è¡¨å¯ä»¥è§£å†³å›è¡¨é—®é¢˜ï¼Œä½†æ˜¯å¾—çœ‹çœ‹ä½ åˆ«çš„ä¸šåŠ¡è¯·æ±‚éœ€æ±‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544332551,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":47882,"user_name":"Long","can_delete":false,"product_type":"c1","uid":1318970,"ip_address":"","ucode":"2417242560360A","user_header":"https://static001.geekbang.org/account/avatar/00/14/20/3a/90db6a24.jpg","comment_is_top":false,"comment_ctime":1544245361,"is_pvip":false,"replies":[{"id":"17052","content":"1. å—¯ï¼Œè¿™ä¹ˆè¯´ä¹Ÿå¯ä»¥ï¼Œå…¶å®æ˜¯information_schema.table å’Œ ä¼˜åŒ–å™¨ç”¨çš„æ˜¯åŒä¸€ä»½æ•°æ®ï¼›<br><br>2. Analyze åªæ˜¯é‡æ–°ç»Ÿè®¡ï¼Œæ›´æ–°è¡¨ç´¢å¼•çš„ç»Ÿè®¡ä¿¡æ¯ï¼› åé¢ä¸¤ä¸ªä¼šé‡å»ºè¡¨<br><br>3. è¿™ä¸ªï¼Œé™¤äº†å°½é‡ä½¿ç”¨è‡ªå¢ä¸»é”®å¤–ï¼Œå…¶å®ƒçš„åªèƒ½æŒ‰ç…§ä¸šåŠ¡éœ€æ±‚æ¥äº†","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544268773,"ip_address":"","comment_id":47882,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5839212657","product_id":100020801,"comment_content":"è€å¸ˆå¥½ï¼Œ1. èƒ½ä¸èƒ½å†è¯´ä¸‹å…³è”çš„free dataçš„ç»Ÿè®¡ï¼Œå°±æ˜¯information_schema.tablesé‡Œé¢çš„ä¿¡æ¯ï¼Œä¼˜åŒ–å™¨è¯»å–çš„è¡Œæ•°ä¿¡æ¯åº”è¯¥æ˜¯æ¥è‡ªäºè¿™ä¸ªè¡¨çš„å§ï¼Ÿ2. è¿˜æœ‰ä¿®æ­£ç»Ÿè®¡ä¿¡æ¯å¯ä»¥ç”¨analyze tableï¼Œoptimize tableï¼Œå¦‚æœæ˜¯innodbçš„è¿˜å¯ä»¥set engine = innodbæ¥è§£å†³.è¿™ä¸‰è€…æ—¶å€™æœ‰ä»€ä¹ˆå¤§çš„ç®—æ³•ä¸Šçš„åŒºåˆ«ï¼Ÿ   3 æœ‰æ²¡æœ‰æ¡ˆä¾‹è¯´è‡ªå·±çš„åº”ç”¨ç¨‹åºè®¾è®¡çš„æ—¶å€™åº”è¯¥æ³¨æ„ä»€ä¹ˆï¼Œå°±å¥½æ¯”è¯´ä¸€ä¸ªç»å¸¸æ–°å¢å’Œåˆ é™¤çš„è¡¨åº”è¯¥æ³¨æ„ä»€ä¹ˆï¼Œæ¥å‡å°‘free dataçš„å¤§å°ï¼Ÿå¸Œæœ›è€å¸ˆèƒ½å¤Ÿè§£ç­”ä¸€ä¸‹ï¼Œå¤šè°¢","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431927,"discussion_content":"1. å—¯ï¼Œè¿™ä¹ˆè¯´ä¹Ÿå¯ä»¥ï¼Œå…¶å®æ˜¯information_schema.table å’Œ ä¼˜åŒ–å™¨ç”¨çš„æ˜¯åŒä¸€ä»½æ•°æ®ï¼›\n\n2. Analyze åªæ˜¯é‡æ–°ç»Ÿè®¡ï¼Œæ›´æ–°è¡¨ç´¢å¼•çš„ç»Ÿè®¡ä¿¡æ¯ï¼› åé¢ä¸¤ä¸ªä¼šé‡å»ºè¡¨\n\n3. è¿™ä¸ªï¼Œé™¤äº†å°½é‡ä½¿ç”¨è‡ªå¢ä¸»é”®å¤–ï¼Œå…¶å®ƒçš„åªèƒ½æŒ‰ç…§ä¸šåŠ¡éœ€æ±‚æ¥äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544268773,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":47295,"user_name":"J!","can_delete":false,"product_type":"c1","uid":1305003,"ip_address":"","ucode":"71C946119B59D1","user_header":"https://static001.geekbang.org/account/avatar/00/13/e9/ab/37903736.jpg","comment_is_top":false,"comment_ctime":1544101938,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5839069234","product_id":100020801,"comment_content":"æˆ‘æƒ³é—®ä¸‹mysql dbname çš„é•¿åº¦åœ¨æºç ä¸­æ˜¯åœ¨å“ªé‡Œå®šä¹‰çš„ï¼Œä¸ºä»€ä¹ˆæœ€å¤§é•¿åº¦æ˜¯64=?","like_count":1},{"had_liked":false,"id":47221,"user_name":"york","can_delete":false,"product_type":"c1","uid":1318852,"ip_address":"","ucode":"EE938B81A7FC04","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epGMibYc0m7cDHMsNRBUur2NPVnlBZFXoNjWomibfjnHeAO3XRt27VaH3WNtdUX11d3uIT1ZHWCxLeg/132","comment_is_top":false,"comment_ctime":1544080286,"is_pvip":false,"replies":[{"id":"16848","content":"set sql_long_query=0; æ”¹æˆ set long_query_time=0; ğŸ˜“","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544084535,"ip_address":"","comment_id":47221,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5839047582","product_id":100020801,"comment_content":"è€å¸ˆï¼š<br>1.  æˆ‘çš„æœºå™¨ä¹Ÿæ²¡å¤ç°å›¾2æ‰€æŒ‡çš„é—®é¢˜ï¼ŒMySQLç‰ˆæœ¬5.7.24<br>2. set sql_long_query=0å‘½ä»¤ï¼Œåœ¨æˆ‘çš„MySQLæ‰§è¡ŒæŠ¥é”™<br>    Unknown system variable &#39;sql_long_query&#39;<br>3. ç”¨è™šæ‹Ÿæœºæ’å…¥10ä¸‡æ¡æ•°æ®è€—æ—¶é•¿çš„é—®é¢˜ï¼Œå¯èƒ½æ˜¯å› ä¸ºåˆ›å»ºè™šæ‹Ÿæœºæ—¶ï¼Œç£ç›˜é€‰æ‹©çš„æ˜¯åŠ¨æ€å¢é•¿å®¹é‡çš„æ–¹å¼ï¼Œå…¶ä»–åŒå­¦å¯ä»¥è¯•è¯•ã€‚","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431701,"discussion_content":"set sql_long_query=0; æ”¹æˆ set long_query_time=0; ğŸ˜“","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544084535,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":47183,"user_name":"DanielAnton","can_delete":false,"product_type":"c1","uid":1308521,"ip_address":"","ucode":"69D49AC70898B0","user_header":"https://static001.geekbang.org/account/avatar/00/13/f7/69/d8dba3de.jpg","comment_is_top":false,"comment_ctime":1544069647,"is_pvip":false,"replies":[{"id":"16829","content":"å°±æ˜¯ç”¨ä¸¤ä¸ªä¸åŒçš„ç»ˆç«¯ï¼Œè¿è¿›å»å°±æ˜¯ä¸¤ä¸ªä¸åŒçš„session ","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544070944,"ip_address":"","comment_id":47183,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5839036943","product_id":100020801,"comment_content":"å°ç™½ï¼Œé—®ä¸‹è€å¸ˆï¼Œæˆ‘æƒ³åœ¨æœ¬æœºä¸Šåšè¿™ä¸ªå®éªŒï¼Œä½†æ˜¯æ€ä¹ˆåœ¨ä¸€å°æœºå™¨ä¸Šå¼€å¯ä¸åŒçš„ session å‘¢ï¼ˆæˆ–è€…è¯´æ€ä¹ˆåœ¨ session A çš„æ‰§è¡Œè¿‡ç¨‹ä¸­å¼€å¯ session B å‘¢ï¼‰ï¼Œæˆ‘ç”¨çš„ windows , æˆ‘è¯•ç€æ‰“å¼€ä¸¤ä¸ª cmd ç»ˆç«¯ï¼Œä½†ç¬¬ä¸€ä¸ªä¾‹å­çš„æ•ˆæœè¿˜æ˜¯ rows ä¸º 10001ã€‚ åˆå­¦ï¼Œå®åœ¨ä¸æ‡‚ï¼Œè¯·è€å¸ˆæŒ‡æ•™ã€‚","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431693,"discussion_content":"å°±æ˜¯ç”¨ä¸¤ä¸ªä¸åŒçš„ç»ˆç«¯ï¼Œè¿è¿›å»å°±æ˜¯ä¸¤ä¸ªä¸åŒçš„session ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544070944,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":47182,"user_name":"Bennet","can_delete":false,"product_type":"c1","uid":1022801,"ip_address":"","ucode":"C85C47A75BA412","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIXYib4bOBtUeLniaqjMNaOY4gDPPbL4hYmv1HYHSPibyHVQlAeWhabABIy0YL7qgOqaa8EibxGSoiaw1w/132","comment_is_top":false,"comment_ctime":1544069443,"is_pvip":false,"replies":[{"id":"16830","content":"è¿™æ˜¯ä¸€ä¸ªåŸå› ï¼Œ<br>è¿˜æœ‰å°±æ˜¯åŒºåˆ†åº¦ä¸å¥½ã€‚<br>ä¸šåŠ¡ä¸Šè¦å°½é‡é¿å…åªæœ‰è¿™ä¸€ä¸ªæ¡ä»¶çš„è¯­å¥ï¼ˆå¦‚æœå®åœ¨æœ‰ï¼Œé‚£ä¹Ÿæ²¡åŠæ³•è¿˜æ˜¯è¦å»ºï¼‰","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544071010,"ip_address":"","comment_id":47182,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5839036739","product_id":100020801,"comment_content":"è¯·æ•™è€å¸ˆä¸€ä¸ªé—®é¢˜ï¼šå¯¹äºæšä¸¾å±æ€§ï¼ˆåƒï¼šç±»å‹ã€æ ‡è®°è¿™ç§åªæœ‰å°‘é‡å€¼çš„å­—æ®µï¼‰å­—æ®µï¼ŒæŒ‰ç…§æ–‡ä¸­çš„æ„æ€è¿™æ ·çš„å­—æ®µå»ºç«‹ç´¢å¼•çš„è¯åŒºåˆ†åº¦å¾ˆä½ï¼ŒåŸºæ•°ä¹Ÿå¾ˆå°ã€‚é‚£é€‚åˆåœ¨è¿™æ ·çš„å­—æ®µä¸Šå»ºç´¢å¼•å—ï¼Ÿ<br><br>æˆ‘èƒ½æƒ³åˆ°çš„ä¸åˆé€‚çš„ç†ç”±æ˜¯ï¼šè¡Œçº§é”çš„èŒƒå›´ä¼šå¾ˆå¤§ã€‚","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431692,"discussion_content":"è¿™æ˜¯ä¸€ä¸ªåŸå› ï¼Œ\nè¿˜æœ‰å°±æ˜¯åŒºåˆ†åº¦ä¸å¥½ã€‚\nä¸šåŠ¡ä¸Šè¦å°½é‡é¿å…åªæœ‰è¿™ä¸€ä¸ªæ¡ä»¶çš„è¯­å¥ï¼ˆå¦‚æœå®åœ¨æœ‰ï¼Œé‚£ä¹Ÿæ²¡åŠæ³•è¿˜æ˜¯è¦å»ºï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544071010,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":46888,"user_name":"kunsect","can_delete":false,"product_type":"c1","uid":1299322,"ip_address":"","ucode":"2CC4ADF82887FC","user_header":"https://static001.geekbang.org/account/avatar/00/13/d3/7a/dd7d35b5.jpg","comment_is_top":false,"comment_ctime":1543997314,"is_pvip":false,"replies":[{"id":"16788","content":"ä½ æŠŠsession A çš„commitæ”¹ç§»åŠ¨åˆ°æœ€åæ‰§è¡Œçœ‹çœ‹","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544022633,"ip_address":"","comment_id":46888,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5838964610","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæˆ‘è¿™è¾¹å¤ç°ä¸äº†èµ°å…¨å±€æ‰«æçš„æ¡ˆä¾‹ã€‚<br><br>mysql&gt; select version();<br>+-----------+<br>| version() |<br>+-----------+<br>| 5.7.22    |<br>+-----------+<br>1 row in set (0.00 sec)<br><br>mysql&gt; show variables like &#39;transaction_isolation&#39;;<br>+-----------------------+-----------------+<br>| Variable_name         | Value           |<br>+-----------------------+-----------------+<br>| transaction_isolation | REPEATABLE-READ |<br>+-----------------------+-----------------+<br>1 row in set (0.00 sec)<br><br>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”<br>Session Aï¼š<br>mysql&gt; start transaction with consistent snapshot;<br>Query OK, 0 rows affected (0.00 sec)<br><br>Session Bï¼š<br>mysql&gt; delete from t;<br>Query OK, 100000 rows affected (0.52 sec)<br><br>Session Bï¼š<br>mysql&gt; call idata();<br>Query OK, 1 row affected (1.91 sec)<br><br>Session Aï¼š<br>mysql&gt; commit;<br>Query OK, 0 rows affected (0.00 sec)<br><br>Session Bï¼š<br>mysql&gt; explain select * from t where a between 10000 and 20000;<br>+----+-------------+-------+------------+-------+---------------+------+---------+------+-------+----------+-----------------------+<br>| id | select_type | table | partitions | type  | possible_keys | key  | key_len | ref  | rows  | filtered | Extra                 |<br>+----+-------------+-------+------------+-------+---------------+------+---------+------+-------+----------+-----------------------+<br>|  1 | SIMPLE      | t     | NULL       | range | a             | a    | 5       | NULL | 10001 |   100.00 | Using index condition |<br>+----+-------------+-------+------------+-------+---------------+------+---------+------+-------+----------+-----------------------+<br>1 row in set, 1 warning (0.00 sec)","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431587,"discussion_content":"ä½ æŠŠsession A çš„commitæ”¹ç§»åŠ¨åˆ°æœ€åæ‰§è¡Œçœ‹çœ‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544022633,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":46740,"user_name":"é«˜æ•","can_delete":false,"product_type":"c1","uid":1310312,"ip_address":"","ucode":"20F6CF75EC9AA4","user_header":"https://static001.geekbang.org/account/avatar/00/13/fe/68/e0bebd9a.jpg","comment_is_top":false,"comment_ctime":1543976261,"is_pvip":false,"replies":[{"id":"16705","content":"1. æ˜¯çš„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543985338,"ip_address":"","comment_id":46740,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5838943557","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæ‚¨æ–‡ä¸­æåˆ°ï¼šâ€œä» change buffer é‡Œæ‰¾å‡ºè¿™ä¸ªæ•°æ®é¡µçš„ change buffer è®°å½• (å¯èƒ½æœ‰å¤šä¸ªï¼‰ï¼Œä¾æ¬¡åº”ç”¨ï¼Œå¾—åˆ°æ–°ç‰ˆæ•°æ®é¡µï¼›<br><br>å†™ redo logã€‚è¿™ä¸ª redo log åŒ…å«äº†æ•°æ®çš„å˜æ›´å’Œ change buffer çš„å˜æ›´ã€‚â€<br>æ‚¨çš„æ„æ€æ˜¯ï¼Œè¿™äº›æ–°ç‰ˆçš„æ•°æ®é¡µåçš„æ•°æ® ï¼Œæ²¡æœ‰ç›´æ¥å†™å›åˆ°ç£ç›˜ï¼ˆæ•°æ®é¡µï¼‰ï¼Œè€Œæ˜¯å†™è¿›äº†redo logï¼Ÿ<br>å†™å›æ•°æ®é¡µå’Œæ›´æ–°ç³»ç»Ÿè¡¨ç©ºé—´å¯¹åº”çš„change bufferæ˜¯å¦å¤–çš„ä¸€ä¸ªè¿‡ç¨‹ï¼Ÿ<br>å†™è¿›","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431523,"discussion_content":"1. æ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543985338,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1970443,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIx1V1QAxC4NHaxYZGyuibBN8lcURJWc5nrnO4yic1kxnDemYV2FJGialf47kYX9qtDnZZOfe1SJeLicg/132","nickname":"lleft","note":"","ucode":"D573EB509455AE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":370498,"discussion_content":"redo logè®°å½•çš„ä¸æ˜¯å…·ä½“çš„æ•°æ®æ˜¯æ•°æ®é¡µçš„å˜åŒ–ï¼Œç£ç›˜ä¸Šé¢çš„æ•°æ®ä¹Ÿä¸æ˜¯æ ¹æ®redo logæ¥ä¿®æ”¹çš„ï¼Œæ˜¯æŠŠå†…å­˜ä¸­çš„æ•°æ®é¡µçš„è„é¡µåˆ·æ–°åˆ°ç£ç›˜æ•°æ®é¡µä¸­","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619435525,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":46734,"user_name":"é«˜æ•","can_delete":false,"product_type":"c1","uid":1310312,"ip_address":"","ucode":"20F6CF75EC9AA4","user_header":"https://static001.geekbang.org/account/avatar/00/13/fe/68/e0bebd9a.jpg","comment_is_top":false,"comment_ctime":1543975649,"is_pvip":false,"replies":[{"id":"16686","content":"å‰é¢ä¸¤å¥ç†è§£å¯¹åº”ä½ç½®æ˜¯å¯¹çš„å“ˆï¼Œ<br>æœ€åä¸€å¥é—®é¢˜ï¼šæ²¡æœ‰é©¬ä¸Šå†™","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543979302,"ip_address":"","comment_id":46734,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5838942945","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæ‚¨æ–‡ä¸­æœ€åå†™é“ï¼šâ€œè¿™æ—¶å€™ï¼Œæ•°æ®é¡µå’Œå†…å­˜ä¸­ change buffer å¯¹åº”çš„ç£ç›˜ä½ç½®éƒ½è¿˜æ²¡æœ‰ä¿®æ”¹ï¼Œå±äºè„é¡µï¼Œä¹‹åå„è‡ªåˆ·å›è‡ªå·±çš„ç‰©ç†æ•°æ®ï¼Œå°±æ˜¯å¦å¤–ä¸€ä¸ªè¿‡ç¨‹äº†ã€‚â€<br>èƒ½å†ç»™è§£é‡Šä¸‹change bufferå’Œæ•°æ®é¡µå¯¹åº”çš„ç£ç›˜ä½ç½®æ˜¯å“ªé‡Œå—ï¼Ÿ<br>æˆ‘ç†è§£change buffer å¯¹åº”çš„ç£ç›˜ä½ç½®æ˜¯ç³»ç»Ÿè¡¨ç©ºé—´ï¼Œæ•°æ®é¡µæ‰€åœ¨çš„ç£ç›˜ä½ç½®æ˜¯è¡¨ç©ºé—´çš„ä½ç½®ï¼Œmargeå¹¶æ²¡æœ‰æŠŠæ•°æ®ç›´æ¥å†™é“è¿™ä¸ªè¡¨ç©ºé—´çš„ä½ç½®å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431520,"discussion_content":"å‰é¢ä¸¤å¥ç†è§£å¯¹åº”ä½ç½®æ˜¯å¯¹çš„å“ˆï¼Œ\næœ€åä¸€å¥é—®é¢˜ï¼šæ²¡æœ‰é©¬ä¸Šå†™","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543979302,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1254801,"avatar":"https://static001.geekbang.org/account/avatar/00/13/25/91/46600294.jpg","nickname":"çŒ´å“¥ä¸€ä¸€ cium","note":"","ucode":"38EC64F8D1A0B4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":312463,"discussion_content":"ä¸“é—¨çš„åˆ·ç›˜çº¿ç¨‹å»åˆ·è„é¡µ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602690717,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":359843,"user_name":"å¬é£","can_delete":false,"product_type":"c1","uid":2786848,"ip_address":"æµ™æ±Ÿ","ucode":"EC2EB012E8DB6D","user_header":"https://static001.geekbang.org/account/avatar/00/2a/86/20/1f1221f5.jpg","comment_is_top":false,"comment_ctime":1665973187,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1665973187","product_id":100020801,"comment_content":"è€å¸ˆä½ å¥½æˆ‘åœ¨ä¼˜åŒ–ä¸€ä¸ªsqlæ—¶é‡åˆ°è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼Œä¸çŸ¥é“è€å¸ˆæœ‰æ²¡æœ‰æ—¶é—´è§£ç­”ä¸‹ï¼š<br><br>u_cash_withdraw_log è¡¨æ•°æ®é‡380ä¸‡ï¼Œéš”ç¦»çº§åˆ«rr ï¼Œè¡¨ç»“æ„å¦‚ä¸‹<br><br>```<br>create table u_cash_withdraw_log<br>(<br>    order_no               varchar(100)                        not null comment &#39;è®¢å•å·&#39;<br>        primary key,<br>    user_id                bigint                              not null comment &#39;ç”¨æˆ·ID&#39;,<br>    <br>    real_money             double(8, 2)                        not null comment &#39;é‡‘é¢(å…ƒ)&#39;,<br>  <br>    expect_submit_time     datetime                            not null comment &#39;é¢„è®¡æäº¤æ—¶é—´&#39;,<br>    create_time            datetime                            not null comment &#39;æ—¶é—´æˆ³ï¼Œåˆ†åŒºé”®&#39;<br>)<br>    comment &#39;ç”¨æˆ·æç°è®°å½•è¡¨&#39; collate = utf8mb4_general_ci;<br><br>create index expect_submit_time<br>    on u_cash_withdraw_log (expect_submit_time);<br>```<br><br> æ‰§è¡Œä¸‹é¢sql<br><br>ä¸èµ°ç´¢å¼•<br><br>```<br>select sum(l.real_money) from jc_cash.u_cash_withdraw_log l where<br>                          l.expect_submit_time &gt;= &#39;2022-09-14 00:00:00&#39;<br>                         and l.expect_submit_time &lt;= &#39;2022-10-15 23:00:00&#39;<br>[2022-10-17 10:06:02] 1 row retrieved starting from 1 in 1 s 531 ms (execution: 1 s 500 ms, fetching: 31 ms)<br><br>```<br><br>explain åˆ†æ<br><br>```<br>1|SIMPLE|l||ALL|expect_submit_time||||3663169|31.15|Using where<br>```<br><br>ä¼˜åŒ–åèµ°ç´¢å¼•<br><br>select sum(l.real_money) from jc_cash.u_cash_withdraw_log l where<br>                          l.expect_submit_time &gt;= &#39;2022-09-14 00:00:00&#39;<br>                         and l.expect_submit_time &lt;= &#39;2022-10-15 23:00:00&#39;<br>         order by expect_submit_time limit 1<br>[2022-10-17 10:06:31] 1 row retrieved starting from 1 in 1 s 815 ms (execution: 1 s 765 ms, fetching: 50 ms)<br><br>explain åˆ†æ<br><br>1|SIMPLE|l||range|expect_submit_time|expect_submit_time|5||1141008|100|Using index condition<br><br><br><br>æˆ‘çš„é—®é¢˜æ˜¯ä¸ºå•¥ç”¨äº†ç´¢å¼•çš„æ‰§è¡Œexecutionçš„æ—¶é—´è¦æ¯”å…¨è¡¨è¿˜è¦å¤§ï¼Œæ‰«æè¡Œæ•°æœ‰ç´¢å¼•100ä¸‡è¡Œæ˜æ˜¾ä¹Ÿæ¯”300ä¸‡è¦å°‘å¾ˆå¤š ä¸ºå•¥é€Ÿåº¦è¿˜æ…¢","like_count":0},{"had_liked":false,"id":354817,"user_name":"Geek_323a60","can_delete":false,"product_type":"c1","uid":2797976,"ip_address":"å››å·","ucode":"CDC276EC255411","user_header":"","comment_is_top":false,"comment_ctime":1660804089,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1660804089","product_id":100020801,"comment_content":"æŒ‰ç…§å›¾2 ä¸­çš„ session A ä¸ session B çš„æ‰§è¡Œæµç¨‹å¹¶ä¸èƒ½å¤ç°ä¼˜åŒ–å™¨é”™è¯¯é€‰æ‹©ç»“æœã€‚mysql ç‰ˆæœ¬ 5.7.36","like_count":0},{"had_liked":false,"id":351811,"user_name":"è‹¥~","can_delete":false,"product_type":"c1","uid":1401787,"ip_address":"","ucode":"23E59E7C067A05","user_header":"https://static001.geekbang.org/account/avatar/00/15/63/bb/1b0387b0.jpg","comment_is_top":false,"comment_ctime":1658204994,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1658204994","product_id":100020801,"comment_content":"æœ‰ä¸€å¼ è¡¨ï¼Œæ•°æ®2700000wï¼Œåœ¨ä¸€ä¸ªå­—æ®µä¸ŠåŠ äº†ç´¢å¼•ï¼Œä½†æ˜¯ç®€å•æŸ¥è¯¢çš„æ‰§è¡Œè®¡åˆ’å´ä¸ç”¨ç´¢å¼•ï¼Œforce indexä¹Ÿä¸ç”¨ï¼Œanalyzeå’Œalter éƒ½ç”¨äº†ä¹Ÿæ²¡ä½œç”¨ï¼Œæ˜¯ä»€ä¹ˆåŸå› å‘¢","like_count":0},{"had_liked":false,"id":351320,"user_name":"Geek_57eac9","can_delete":false,"product_type":"c1","uid":2579808,"ip_address":"","ucode":"E31699EDFF2A56","user_header":"","comment_is_top":false,"comment_ctime":1657698735,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1657698735","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæœ‰ä¸ªé—®é¢˜ï¼Œâ€œä¸ºä»€ä¹ˆå†™chengeBufferè¦å†™redoLogï¼Œmerge changeBufferæ—¶å€™ä¹Ÿè¦å†™redoLogã€‚â€<br>        æˆ‘çš„ç†è§£æ˜¯ï¼š<br>        1ã€å†™change bufferçš„æ—¶å€™ï¼Œå¾€redo logä¸­è®°å½•çš„æ˜¯ æ“ä½œè®°å½•ï¼Œä¹Ÿå°±æ˜¯new change buffer item&quot;add (id2,k2)to Page2&quot;;<br>        2ã€merge change bufferçš„æ—¶å€™ï¼Œå¾€redo logä¸­è®°å½•çš„æ˜¯ æ•°æ®å˜æ›´è®°å½•ï¼Œä¹Ÿå°±æ˜¯ add (id2,k2)to Page2ï¼›<br>        3ã€â€œæ“ä½œè®°å½•â€æ˜¯ç”¨æ¥ä¿è¯ï¼šå³ä½¿æ–­ç”µé‡å¯åï¼Œå†…å­˜ä¸­çš„changeBufferå·²ç»ä¸¢å¤±äº†ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡redo logä¸­çš„æ“ä½œè®°å½•å’Œ æ•°æ®å˜æ›´è®°å½•æ¥è¿˜åŸè¿˜æœªmergeçš„changeBufferã€‚ï¼ˆå‡è®¾æ“ä½œè®°å½•æœ‰aã€bã€cï¼Œæ•°æ®å˜æ›´è®°å½•æœ‰aã€bï¼Œé‚£ä¹ˆè¯´æ˜è¿˜æœ‰ä¸ªcè¿˜æ²¡mergeï¼Œé‚£ä¹ˆå°±å¯¹æ¯”è¿™ä¸¤ç§è®°å½•æ¥ç¡®å®šéœ€è¦æ¢å¤çš„changeBufferæ˜¯cé‚£ä¸€æ¡ï¼‰<br>        4ã€â€œæ•°æ®å˜æ›´è®°å½•â€æ˜¯ç”¨æ¥ä¿è¯ï¼šæ•°æ®åº“çš„CrashSafeèƒ½åŠ›ã€‚<br><br>ä¸çŸ¥é“æˆ‘çš„ç†è§£å¯¹ä¸å¯¹ï¼Ÿ","like_count":0},{"had_liked":false,"id":350183,"user_name":"å¼ æ»¡æ„","can_delete":false,"product_type":"c1","uid":2974275,"ip_address":"","ucode":"2AA2AC8F1A3364","user_header":"","comment_is_top":false,"comment_ctime":1656640869,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1656640869","product_id":100020801,"comment_content":"è¿™é‡Œè¦å¤ç°ç»Ÿè®¡åŸºæ•°å¤±å‡†çš„æƒ…å†µï¼Œinnodb_stats_include_delete_marked è¦çœ‹ä¸€ä¸‹æŠ˜å‚æ•°çš„é…ç½®","like_count":0},{"had_liked":false,"id":348345,"user_name":"åƒé”¤ç™¾ç‚¼é¢†æ‚Ÿä¹‹æé™","can_delete":false,"product_type":"c1","uid":1744257,"ip_address":"","ucode":"224B5CF2101716","user_header":"https://static001.geekbang.org/account/avatar/00/1a/9d/81/d748b7eb.jpg","comment_is_top":false,"comment_ctime":1655006657,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1655006657","product_id":100020801,"comment_content":"å½±å“ä¼˜åŒ–å™¨é€‰æ‹©ç´¢å¼•çš„å› ç´ å¾ˆå¤šï¼Œä¾‹å¦‚æ‰«æè¡Œæ•°ï¼Œæ˜¯å¦ä½¿ç”¨ä¸´æ—¶è¡¨ï¼Œæ˜¯å¦æ’åºï¼Œå›è¡¨æ¬¡æ•°ç­‰ã€‚<br><br>è§£å†³ä¼˜åŒ–å™¨é€‰æ‹©é”™ç´¢å¼•çš„æ–¹æ³•<br>1.ä½¿ç”¨force indexå¼ºåˆ¶æŒ‡å®šç´¢å¼•ã€‚<br>2.ä¿®æ”¹SQLè¯­å¥ä½¿ä¼˜åŒ–å™¨èƒ½å‘½ä¸­é¢„æœŸç´¢å¼•ã€‚<br>3.æ–°å¢æˆ–åˆ é™¤ç´¢å¼•ï¼Œä½¿ä¼˜åŒ–å™¨èƒ½å‘½ä¸­é¢„æœŸç´¢å¼•ã€‚","like_count":0},{"had_liked":false,"id":341903,"user_name":"å†è§ç†æƒ³","can_delete":false,"product_type":"c1","uid":1245999,"ip_address":"","ucode":"FAC88B3F6F6DFD","user_header":"https://static001.geekbang.org/account/avatar/00/13/03/2f/0a5e0751.jpg","comment_is_top":false,"comment_ctime":1649909331,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1649909331","product_id":100020801,"comment_content":"ä¼˜åŒ–å™¨ä¼šæ ¹æ®ç´¢å¼•çš„æ‰«æè¡Œæ•°ï¼Œæ˜¯å¦ä½¿ç”¨ä¸´æ—¶è¡¨ï¼Œæ’åºç­‰æ¡ä»¶ç¡®å®šä½¿ç”¨çš„ç´¢å¼•ã€‚<br>è€Œæ‰«æè¡Œæ•°æ˜¯æ ¹æ®ç´¢å¼•çš„åŒºåˆ†åº¦è®¡ç®—çš„ï¼Œç´¢å¼•çš„åŒºåˆ†åº¦ä½¿ç”¨çš„æŠ½æ ·ç»Ÿè®¡ï¼Œå¹¶ä¸æ˜¯å®Œå…¨ç²¾å‡†ã€‚<br>show index from t å¯ä»¥æŸ¥è¯¢ç´¢å¼•çš„åŒºåˆ†åº¦ã€‚<br>analyze table t  å¯ä»¥é‡æ–°ç»Ÿè®¡ç´¢å¼•çš„ä¿¡æ¯<br>1ï¼Œå¯ä»¥ä½¿ç”¨ force indexï¼ˆÂ·index_nameÂ·ï¼‰æ–¹å¼å¼ºåˆ¶ä½¿ç”¨ç´¢å¼•<br>2ï¼Œä¿®æ”¹sqlè¯­å¥ï¼Œå¼•å¯¼ä¼˜åŒ–å™¨ä½¿ç”¨æˆ‘ä»¬æŒ‡å®šçš„ç´¢å¼•<br>3ï¼Œåˆ é™¤é”™è¯¯æˆ–æ²¡å¿…è¦çš„ç´¢å¼•<br>","like_count":0},{"had_liked":false,"id":341467,"user_name":"äºšæ—","can_delete":false,"product_type":"c1","uid":1018972,"ip_address":"","ucode":"4A5A6D24314B79","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8c/5c/3f164f66.jpg","comment_is_top":false,"comment_ctime":1649645840,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1649645840","product_id":100020801,"comment_content":"MySQL8å·²ç»æŠŠç¬¬ä¸€ä¸ªé—®é¢˜ä¿®å¤äº†","like_count":0},{"had_liked":false,"id":341384,"user_name":"imageine","can_delete":false,"product_type":"c1","uid":1784001,"ip_address":"","ucode":"05A7EA8F28818C","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIcLjatV3GHd94SjWGpTYlTXc0NMKyk1ejq6XeAgdf8QWbZKa67CHvVvicoC6oXRfJmqmnAZcepOrw/132","comment_is_top":false,"comment_ctime":1649574630,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1649574630","product_id":100020801,"comment_content":"è€å¸ˆå¥½ï¼Œæœ€è¿‘è§£å†³äº†ä¸€ä¸ªå› ä¸ºinå’Œorder by idå¯¼è‡´çš„æ…¢SQLé—®é¢˜ï¼Œä¹Ÿæ˜¯å› ä¸ºä¼˜åŒ–å™¨ä½¿ç”¨äº†é”™è¯¯çš„ç´¢å¼•å¯¼è‡´çš„ï¼Œå‘ç°å»æ‰inæˆ–è€…å»æ‰order by id éƒ½å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè¯¦æƒ…è¯·æŸ¥çœ‹ï¼šhttps:&#47;&#47;blog.csdn.net&#47;zhouwenjun0820&#47;article&#47;details&#47;124070771<br><br>ä½†æ˜¯ä»æœ‰ä¸€ç‚¹ç–‘æƒ‘ï¼šä¸ºä»€ä¹ˆin ä¸¤ä¸ªå…ƒç´ çš„åˆ—è¡¨ä¹Ÿä¼šä½¿ç´¢å¼•å¤±æ•ˆå‘¢ï¼Ÿ<br><br>è°¢è°¢è€å¸ˆ","like_count":0},{"had_liked":false,"id":340512,"user_name":"Geek_290df2","can_delete":false,"product_type":"c1","uid":2951010,"ip_address":"","ucode":"45052E4F5225BA","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epzf6xib6HyMiakG6QiblZ58dqwxEcwOqK16hhXYfRcg9jP1WD1dE3xDmluIs6N2u3ib6giaEzmPfpohdg/132","comment_is_top":false,"comment_ctime":1648870775,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"1648870775","product_id":100020801,"comment_content":"è¿™ä¸ªæ…¢æŸ¥è¯¢æ—¥å¿—æ˜¯é€šè¿‡ä»€ä¹ˆå‘½ä»¤æ‰¾åˆ°çš„å•Š ","like_count":0,"discussions":[{"author":{"id":1015184,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7d/90/abb7bfe3.jpg","nickname":"fourge","note":"","ucode":"F3E3FFC4990358","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582579,"discussion_content":"çœ‹æ•°æ®ç›®å½•ä¸‹çš„slow.logæ–‡ä»¶","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659516128,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":336063,"user_name":"Geek_9527","can_delete":false,"product_type":"c1","uid":2925289,"ip_address":"","ucode":"F064D2EE4B30EC","user_header":"https://static001.geekbang.org/account/avatar/00/2c/a2/e9/f70d3144.jpg","comment_is_top":false,"comment_ctime":1645876091,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1645876091","product_id":100020801,"comment_content":"Oracleä¸­çš„è¯ï¼Œé€šè¿‡hintsæ¥å›ºåŒ–ç´¢å¼•ï¼ˆå¼ºåˆ¶ç´¢å¼•ï¼‰ ï¼Œå¦‚ &#47;*+INDEX(TABLE INDEX_NAME)*&#47;","like_count":0},{"had_liked":false,"id":335828,"user_name":"æ—ä¼Ÿå","can_delete":false,"product_type":"c1","uid":1308094,"ip_address":"","ucode":"38BDA7DB6CAB09","user_header":"https://static001.geekbang.org/account/avatar/00/13/f5/be/f2c346e3.jpg","comment_is_top":false,"comment_ctime":1645706020,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1645706020","product_id":100020801,"comment_content":"ä¼˜åŒ–å™¨çš„é€‰æ‹©æ˜¯å¦å­˜åœ¨ä¼˜å…ˆçº§çš„æƒ…å†µå•Š ä¾‹å¦‚<br>å›è¡¨å¤§äºè¡Œæ•°è¿™æ ·çš„ è¿˜æ˜¯ç»¼åˆè€ƒè™‘çš„","like_count":0},{"had_liked":false,"id":335660,"user_name":"Jason","can_delete":false,"product_type":"c1","uid":1756181,"ip_address":"","ucode":"B2765DD1D90B0C","user_header":"https://static001.geekbang.org/account/avatar/00/1a/cc/15/35622b02.jpg","comment_is_top":false,"comment_ctime":1645616298,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1645616298","product_id":100020801,"comment_content":"è€å¸ˆä½ å¥½ï¼Œæˆ‘ä»Šå¤©å‘ç°äº†ä¸ªç°è±¡ï¼Œselect * from table_a where id = 0; table_a è¡¨çš„ä¸»é”®æ˜¯idï¼Œ å¦‚æœè¡¨é‡Œé¢æ²¡æœ‰ id = 0 çš„æƒ…å†µï¼Œç”¨explain æŸ¥çœ‹è¿™ä¸ªè¯­å¥çš„æ‰§è¡Œæƒ…å†µï¼Œæ˜¾ç¤ºæ²¡æœ‰èµ°ç´¢å¼•ï¼Œä½†æ˜¯ä»å®é™…ä¸Šæ‰§è¡Œé€Ÿç‡æ¥çœ‹å¥½åƒæ˜¯èµ°äº†ç´¢å¼•ï¼ˆ6äº¿çš„æ•°æ®ï¼Œéå¸¸å¿«çš„è¿”å›äº†ç»“æœï¼‰ï¼Œè¯·é—®è¿™ç§æƒ…å†µåˆ°åº•æœ‰æ²¡æœ‰èµ°ç´¢å¼•ï¼Ÿå¦‚æœæ²¡æœ‰èµ°ç´¢å¼•çš„è¯ï¼Œåœ¨ä¸»é”®ä¸Šçš„ç­‰å€¼æŸ¥è¯¢ä¸ºä»€ä¹ˆä¸èµ°ç´¢å¼•å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":334082,"user_name":"å¤©å ‚åœ¨å·¦ DBAåœ¨å³","can_delete":false,"product_type":"c1","uid":1324234,"ip_address":"","ucode":"40D0BBB2B170CC","user_header":"https://static001.geekbang.org/account/avatar/00/14/34/ca/84d80f76.jpg","comment_is_top":false,"comment_ctime":1644733395,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1644733395","product_id":100020801,"comment_content":"æ˜¯å¦å¯ä»¥é€šè¿‡æ”¹å˜ç»Ÿè®¡ä¿¡æ¯çš„æ–¹å¼è®©æŸ¥è¯¢èµ°æŒ‡å®šç´¢å¼•ï¼Œä¾‹å¦‚updateæ›´æ–°mysql.innodb_table_statsè®¾è®¡tè¡¨çš„n_rowsï¼Œå’Œä¸»ç´¢å¼•å¤§å°clustered_index_sizeï¼Œå…¶ä»–éä¸»ç´¢å¼•çš„æ€»å¤§å°sum_of_other_index_sizesæ¥è®©æŸ¥è¯¢èµ°åˆ°æŒ‡å®šç´¢å¼•ï¼Œç„¶ååˆ é™¤innodb_index_statsçš„ç´¢å¼•ç»Ÿè®¡ä¿¡æ¯ï¼Œé‡æ–°flush table","like_count":0},{"had_liked":false,"id":331237,"user_name":"é§±ç‚³èª","can_delete":false,"product_type":"c1","uid":2011284,"ip_address":"","ucode":"55E724536C271E","user_header":"https://static001.geekbang.org/account/avatar/00/1e/b0/94/fa6668e7.jpg","comment_is_top":false,"comment_ctime":1642497644,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1642497644","product_id":100020801,"comment_content":"é‚£æ›´æ–°çš„æ“ä½œçš„æµç¨‹å°±æ˜¯ç°åœ¨æ”¹å˜è®°åˆ° change buffer å½“äº‹åŠ¡æäº¤çš„æ—¶å€™ï¼Œæ‰æŠŠ change buffer çš„æ“ä½œä¹Ÿè®°å½•åˆ° redo log é‡Œäº†å¯¹å§ï¼Ÿ","like_count":0},{"had_liked":false,"id":325082,"user_name":"é»‘å¾®ç‹—â€®â€®","can_delete":false,"product_type":"c1","uid":1177797,"ip_address":"","ucode":"D44505E7E97BB3","user_header":"https://static001.geekbang.org/account/avatar/00/11/f8/c5/6d38f3e3.jpg","comment_is_top":false,"comment_ctime":1638801867,"is_pvip":false,"replies":[{"id":"118294","content":"æ˜¯æ•°å€¼ï¼Œä¸è¿‡ä¸æ­¢ä¸€ä¸ªï¼Œä½ å¯ä»¥ç†è§£ä¸ºä¸€ç»„â€œç»Ÿè®¡ç›´æ–¹å›¾â€","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1264162","ctime":1639385141,"ip_address":"","comment_id":325082,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1638801867","product_id":100020801,"comment_content":"è€å¸ˆä½ å¥½ æƒ³é—®ä¸‹ä¼˜åŒ–å™¨æ˜¯æ€ä¹ˆæ ¹æ®ç»Ÿè®¡ä¿¡æ¯æ¥é¢„ä¼°æ‰«æè¡Œæ•°çš„é˜¿ï¼Ÿæˆ‘ç†è§£ç»Ÿè®¡ä¿¡æ¯åªæ˜¯ä¸€ä¸ªæ•°å€¼å§ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":538258,"discussion_content":"æ˜¯æ•°å€¼ï¼Œä¸è¿‡ä¸æ­¢ä¸€ä¸ªï¼Œä½ å¯ä»¥ç†è§£ä¸ºä¸€ç»„â€œç»Ÿè®¡ç›´æ–¹å›¾â€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639385141,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":321504,"user_name":"muggle","can_delete":false,"product_type":"c1","uid":1261530,"ip_address":"","ucode":"D78087BCAD0860","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKDKsicmpne7xQNocwRQ80DDZ3CzjsDoVIcH0SBiaYzS056oVOx4pEeEVeCaXE3QtsjUIEI0x1xQVTw/132","comment_is_top":false,"comment_ctime":1636908994,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1636908994","product_id":100020801,"comment_content":"ç”±äºäº‹åŠ¡Aä¸€è‡´æ€§è¯»è§†å›¾åŸå› å¯¼è‡´äº‹åŠ¡Bçš„aç´¢å¼•æ‰«æè¡Œæ•°ç¿»å€ï¼Œè¿™ä¸ªå¯ä»¥ç†è§£äº†ï¼Œé‚£ä¸ºä»€ä¹ˆä¸»é”®ç´¢å¼•æ ‘åœ¨è¿™ä¸ªåœºæ™¯ä¸‹æ‰«æè¡Œæ•°ä»ç„¶æ˜¯10wï¼Œè€Œä¸æ˜¯20wå‘¢ï¼Ÿï¼Ÿ","like_count":0,"discussions":[{"author":{"id":2843604,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/63/d4/b63373c3.jpg","nickname":"é‡‘é‡‘","note":"","ucode":"807EDDCDB2E939","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":560195,"discussion_content":"ç¿»å€åº”è¯¥æ˜¯ä¸¤ä¸‡è¡Œå•Šï¼Œä¸ºä»€ä¹ˆä¼šæ˜¯æ¥è¿‘4ä¸‡è¡Œå‘¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649226849,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":321375,"user_name":"æ— å…³é£æœˆä¸¶","can_delete":false,"product_type":"c1","uid":1446583,"ip_address":"","ucode":"4F27DC4DCFED32","user_header":"https://static001.geekbang.org/account/avatar/00/16/12/b7/32deac2b.jpg","comment_is_top":false,"comment_ctime":1636816491,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1636816491","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæˆ‘è¯•ç€å°†å­—æ®µbä¸­è¶…è¿‡1&#47;mçš„å€¼æ›´æ–°ï¼Œå†çœ‹åŸºæ•°ï¼Œä¸ºä»€ä¹ˆæ²¡æœ‰å‘ç”Ÿæ”¹å˜ï¼Ÿè€Œä¸”ä¸å‡†ç¡®","like_count":0},{"had_liked":false,"id":320720,"user_name":"åå¹´","can_delete":false,"product_type":"c1","uid":2184438,"ip_address":"","ucode":"6E1A26C38C11BC","user_header":"https://static001.geekbang.org/account/avatar/00/21/54/f6/ac89dddb.jpg","comment_is_top":false,"comment_ctime":1636467881,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1636467881","product_id":100020801,"comment_content":"MySQL8.0 æ‰§è¡Œå­˜å‚¨è¿‡ç¨‹ï¼Œæ’å…¥10wæ¡æ•°æ®ç”¨äº†800å¤šs ã€‚ä¸ºä»€ä¹ˆï¼Ÿ<br>MySQL5.7æ­£å¸¸æ‰§è¡Œï¼Œå¾ˆå¿«å°±æ’å…¥å®Œäº†","like_count":0,"discussions":[{"author":{"id":1015184,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7d/90/abb7bfe3.jpg","nickname":"fourge","note":"","ucode":"F3E3FFC4990358","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582580,"discussion_content":"æŠŠinnodb_flush_log_at_trx_commitå’Œsync_binlog éƒ½æ”¹æˆ0è¯•è¯•çœ‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659516269,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":320279,"user_name":"çˆ±å­¦ä¹ çš„W","can_delete":false,"product_type":"c1","uid":2641096,"ip_address":"","ucode":"C66BFF0D54E57F","user_header":"https://static001.geekbang.org/account/avatar/00/28/4c/c8/77e4d78b.jpg","comment_is_top":false,"comment_ctime":1636194813,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1636194813","product_id":100020801,"comment_content":"æˆ‘æœ‰ä¸ªç–‘é—®ï¼Ÿç´¢å¼•åŒºåˆ†åº¦è¶Šå¤§æŸ¥è¯¢æ—¶æ‰«æçš„è®°å½•æ•°è¶Šå°‘å‘¢ï¼Ÿï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1015184,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7d/90/abb7bfe3.jpg","nickname":"fourge","note":"","ucode":"F3E3FFC4990358","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582581,"discussion_content":"åœ¨whereæ¡ä»¶æŸ¥è¯¢æ—¶å€™ï¼Œç¬¦åˆæŸ¥è¯¢æ¡ä»¶çš„è¡Œæ•°å°±è¶Šå°‘ï¼Œå³æ‰«æè¡Œæ•°è¶Šå°ï¼Œioæ¬¡æ•°è¶Šå°‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659516369,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":319421,"user_name":"æå¤é¾™","can_delete":false,"product_type":"c1","uid":2824858,"ip_address":"","ucode":"68346B996EE22B","user_header":"https://static001.geekbang.org/account/avatar/00/2b/1a/9a/f2f9f5dd.jpg","comment_is_top":false,"comment_ctime":1635810961,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1635810961","product_id":100020801,"comment_content":"æˆ‘ç”¨mysql 8.0åšæµ‹è¯•ï¼Œå¹¶æ²¡æœ‰å‡ºç°è€å¸ˆåœ¨æ–‡ä¸­æåˆ°çš„bugï¼Œæ˜¯å¦è¯¥bugåœ¨8.0å·²ç»ä¿®å¤ï¼Ÿ<br><br>## é»˜è®¤æ‰§è¡Œè®¡åˆ’<br>mysql&gt; explain select * from t where (a between 1 and 1000) and (b between 50000 and 100000) order by b limit 1;<br>+----+-------------+-------+------------+-------+---------------+------+---------+------+-------+----------+-------------+<br>| id | select_type | table | partitions | type  | possible_keys | key  | key_len | ref  | rows  | filtered | Extra       |<br>+----+-------------+-------+------------+-------+---------------+------+---------+------+-------+----------+-------------+<br>|  1 | SIMPLE      | t     | NULL       | range | a,b           | b    | 5       | NULL | 50097 |     1.00 | Using where |<br>+----+-------------+-------+------------+-------+---------------+------+---------+------+-------+----------+-------------+<br>1 row in set, 1 warning (0.00 sec)<br><br>## ä½¿ç”¨å¼ºåˆ¶ç´¢å¼•<br>mysql&gt; explain select * from t force index(a) where (a between 1 and 1000) and (b between 50000 and 100000) order by b limit 1;<br>+----+-------------+-------+------------+-------+---------------+------+---------+------+------+----------+-----------------------------+<br>| id | select_type | table | partitions | type  | possible_keys | key  | key_len | ref  | rows | filtered | Extra                       |<br>+----+-------------+-------+------------+-------+---------------+------+---------+------+------+----------+-----------------------------+<br>|  1 | SIMPLE      | t     | NULL       | range | a             | a    | 5       | NULL | 1000 |    11.11 | Using where; Using filesort |<br>+----+-------------+-------+------------+-------+---------------+------+---------+------+------+----------+-----------------------------+<br>1 row in set, 1 warning (0.00 sec)","like_count":0},{"had_liked":false,"id":316622,"user_name":"åº·æ–¯å¦ä¸","can_delete":false,"product_type":"c1","uid":1368096,"ip_address":"","ucode":"C130E800E8D5C9","user_header":"https://static001.geekbang.org/account/avatar/00/14/e0/20/003190c1.jpg","comment_is_top":false,"comment_ctime":1634456692,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1634456692","product_id":100020801,"comment_content":"ä¸ºä»€ä¹ˆSessionAå¯åŠ¨äº‹åŠ¡, ä¼šå¯¼è‡´æ ‡ç»Ÿè®¡ä¿¡æ¯ä¸å‡†ç¡®?  å› ä¸ºSessionAå¯åŠ¨äº‹åŠ¡å,   ç”±äºMvvcæœºåˆ¶, å¯¹è¡¨çºªå½•åšçš„æ›´æ–°æ“ä½œ,  éƒ½éœ€è¦ä¿æŒä¸‹æ¥ã€‚","like_count":0},{"had_liked":false,"id":315442,"user_name":"zone","can_delete":false,"product_type":"c1","uid":2078885,"ip_address":"","ucode":"06C1BA105D3BE3","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIM05VW3moIQKe85gz4YRlajrPjUTYrK0dW0efbFlfYOibLWww70uNS9gIj2wBickdn7leoPIFErIWw/132","comment_is_top":false,"comment_ctime":1633907682,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1633907682","product_id":100020801,"comment_content":"è€å¸ˆè¯·æ•™3ä¸ªé—®é¢˜<br>1.æ‰«æè¡Œæ•°-ã€‹åŸºæ•°ä¼°ç®—-ã€‹é‡‡æ ·ç»Ÿè®¡ã€‚æˆ‘æƒ³è½¬ä¸‹ç‰›è§’å°–é—®ä¸‹æ‰«æè¡Œæ•°æ˜¯å¦‚ä½•è®¡ç®—å‡ºæ¥çš„ï¼Ÿå®ƒæ˜¯æ ¹æ®whereè¯­å¥æ¡ä»¶ä¼°ç®—å‡ºæ¥çš„å—ï¼Ÿ<br>2.è”åˆç´¢å¼•åŸºæ•°ç»Ÿè®¡é—®é¢˜<br><br>idx_machant_id_status_type_deleted | 1\t| merchant_id\t| A\t| 68357<br>idx_machant_id_status_type_deleted | 2\t| status\t    | A\t| 123276<br>idx_machant_id_status_type_deleted | 3\t| draft_type\t| A\t| 71050<br>idx_machant_id_status_type_deleted | 4\t| is_deleted\t| A\t| 104516<br>è¿™ä¸ªè”åˆç´¢å¼•çš„åŸºæ•°ç»Ÿè®¡è®©æˆ‘ç™¾æ€ä¸å¾—å…¶è§£ï¼Œç†è®ºä¸Šæ¥è®²ç»Ÿè®¡æ˜¯æ ¹æ®(merchant),(merchant,status),(merchant,status,type),(merchant,status,type,delete)æ¥åšç´¢å¼•ç»Ÿè®¡çš„ï¼Œç†è®ºä¸ŠåŒºåˆ†åº¦ä¸æ˜¯åº”è¯¥è¶Šæ¥è¶Šé«˜å—ï¼Œå°±ç®—åŒºåˆ†åº¦ä¸ä¼šæé«˜ä¹Ÿä¸åº”è¯¥å‡å°‘å•Šï¼Ÿ<br>3.è”åˆç´¢å¼•åˆ›å»ºé¡ºåºæ˜¯ä¸æ˜¯åº”è¯¥å°†åŒºåˆ†åº¦é«˜çš„å­—æ®µæ”¾å‰é¢ï¼Ÿï¼ˆç½‘ä¸Šçœ‹äº†å¥½å¤šè¯´åŒºåˆ†åº¦å¥½çš„æ”¾åé¢ï¼‰","like_count":0},{"had_liked":false,"id":314833,"user_name":"é¢œæµ·èˆª","can_delete":false,"product_type":"c1","uid":1308159,"ip_address":"","ucode":"5644F6328BF901","user_header":"https://static001.geekbang.org/account/avatar/00/13/f5/ff/523fb378.jpg","comment_is_top":false,"comment_ctime":1633490847,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1633490847","product_id":100020801,"comment_content":"è€å¸ˆ æˆ‘çœ‹è¿™èŠ‚è¯¾çš„æ¡ˆä¾‹ä¸­ explainä¸­çš„using  index conditionï¼Œusing where ,using index èƒ½ä¸èƒ½è¿™äº› æ„Ÿè§‰å¾ˆè¿·æƒ‘","like_count":0,"discussions":[{"author":{"id":1015184,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7d/90/abb7bfe3.jpg","nickname":"fourge","note":"","ucode":"F3E3FFC4990358","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582582,"discussion_content":"1. using index condition: å³ç´¢å¼•æ¡ä»¶ï¼ˆäºŒçº§ç´¢å¼•ï¼‰ä¸‹æ¨ï¼Œåœ¨å¼•æ“å±‚è¿‡æ»¤ä¸ç¬¦åˆæ¡ä»¶çš„è®°å½•\n2. using whereï¼šæŸ¥æ‰¾ä½¿ç”¨ç´¢å¼•çš„æƒ…å†µä¸‹ï¼Œéœ€è¦å›è¡¨æŸ¥è¯¢æ‰€éœ€çš„æ•°æ®\n3. using index: è¦†ç›–ç´¢å¼•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659516631,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":314806,"user_name":"Geek_fa5760","can_delete":false,"product_type":"c1","uid":2795982,"ip_address":"","ucode":"05996A78C09073","user_header":"","comment_is_top":false,"comment_ctime":1633444080,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1633444080","product_id":100020801,"comment_content":"è€å¸ˆä½ å¥½ï¼Œmysqlæ—¢ç„¶ç»Ÿè®¡ä¿¡æ¯ä¸€ç›´åœ¨å‘ç”Ÿå˜åŒ–ï¼Œå¯¹äºåŒä¸€ä¸ªsqlï¼Œæ‰§è¡Œè®¡åˆ’æ˜¯å¦ä¹Ÿä¼šä¸€ç›´å˜åŒ–ï¼Ÿå¦‚æœå˜åŒ–çš„è¯ä»æ…¢æ—¥å¿—é‡Œæ‹¿å‡ºæ¥sql explainå¹¶ä¸èƒ½çœ‹åˆ°æ…¢çš„æ—¶å€™çš„æ‰§è¡Œè®¡åˆ’å§ï¼Œæœ‰ä»€ä¹ˆåŠæ³•å˜›ã€‚","like_count":0},{"had_liked":false,"id":312209,"user_name":"å…‹å…‹","can_delete":false,"product_type":"c1","uid":2742451,"ip_address":"","ucode":"0FA7CA5AB26A6F","user_header":"https://static001.geekbang.org/account/avatar/00/29/d8/b3/38105dbb.jpg","comment_is_top":false,"comment_ctime":1631684832,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1631684832","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæˆ‘æƒ³é—®ä¸‹çº¿ä¸Šå¯ä»¥ç›´æ¥æ‰§è¡Œdropè¯­å¥åˆ é™¤ç´¢å¼•å—ï¼Ÿåˆ é™¤ç´¢å¼•çš„æ“ä½œä¼šè·å–mdlå†™é”å—ï¼Œè¿˜æ˜¯ä¼šæœ‰å…¶ä»–çš„æ ‡å¿—ä½å‘Šè¯‰åˆ«çš„æ“ä½œè¿™ä¸ªç´¢å¼•è¢«åºŸå¼ƒäº†","like_count":0},{"had_liked":false,"id":309339,"user_name":"é˜¿å¸‚","can_delete":false,"product_type":"c1","uid":1320234,"ip_address":"","ucode":"1DF2A71043A644","user_header":"https://static001.geekbang.org/account/avatar/00/14/25/2a/972a5881.jpg","comment_is_top":false,"comment_ctime":1630053573,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1630053573","product_id":100020801,"comment_content":"æ‰€ä»¥ï¼Œåœ¨çŸ¥é“äº†ç´¢å¼•åŸºæ•°åï¼Œå†å¦‚ä½•å»åˆ¤æ–­æ‰«æè¡Œæ•°å‘¢","like_count":0},{"had_liked":false,"id":308188,"user_name":"jzq","can_delete":false,"product_type":"c1","uid":2531565,"ip_address":"","ucode":"CAF2BA2F2092D5","user_header":"https://static001.geekbang.org/account/avatar/00/26/a0/ed/432a1c51.jpg","comment_is_top":false,"comment_ctime":1629444679,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1629444679","product_id":100020801,"comment_content":"åœ¨Mergeçš„ç¬¬ä¸‰æ­¥æ“ä½œæ—¶ <br>å¯¹æ•°æ®çš„å˜æ›´ï¼šå…¶å®å°±ç±»ä¼¼ä¸€ä¸ªç®€å•çš„updateè¯­å¥è®°å½•æ•°æ®å˜æ›´æ—¥å¿—çš„è¿‡ç¨‹ï¼Œä¹Ÿæ˜¯å…ˆprepareå†commit <br>å¯¹change buffer çš„å˜æ›´ï¼šæ¯”å¦‚ç±»ä¼¼æŠŠä¹‹å‰ä¸€ä¸ªè®°å½•new change buffer çš„è®°å½•åˆ æ‰<br>è¯·é—®è€å¸ˆæˆ‘è¿™æ ·ç†è§£å¯¹å˜›","like_count":0},{"had_liked":false,"id":307551,"user_name":"æŸ¯å¯Ÿé‡‘","can_delete":false,"product_type":"c1","uid":1115149,"ip_address":"","ucode":"F722BF8FCD2C47","user_header":"https://static001.geekbang.org/account/avatar/00/11/04/0d/3dc5683a.jpg","comment_is_top":false,"comment_ctime":1629158072,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1629158072","product_id":100020801,"comment_content":"æ ¹æ®ç­”ç–‘çš„æ„æ€ï¼Œredo log æ˜¯åœ¨ merge change buffer çš„æ—¶å€™æ‰è®°å½•çš„ï¼Œé‚£ç€ä¸­é—´ä¼šæœ‰æ—¶é—´å·®å•Šã€‚å¦‚æœ change buffer å› ä¸º crash ä¸¢å¤±ï¼Œé‚£æ•°æ®ä¹Ÿå°±ä¸¢å¤±äº†ï¼Ÿ<br><br>è¿˜æœ‰ä¸€ç‚¹ï¼Œä»ä¹‹å‰çš„ç•™è¨€çœ‹ï¼Œå‘ç”Ÿ crash æ—¶ï¼Œéƒ½æ˜¯æ ¹æ® redo log æ¢å¤çš„ï¼Œé‚£ change buffer ä¸ºå•¥è¦æœ‰å†™è¡¨ç©ºé—´çš„åŠ¨ä½œå•Šï¼Œæ„Ÿè§‰æ²¡æœ‰å¿…è¦å•Š","like_count":0},{"had_liked":false,"id":304995,"user_name":"Tsang","can_delete":false,"product_type":"c1","uid":2720215,"ip_address":"","ucode":"5B46AD25EA5BB9","user_header":"https://static001.geekbang.org/account/avatar/00/29/81/d7/629ee141.jpg","comment_is_top":false,"comment_ctime":1627739045,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1627739045","product_id":100020801,"comment_content":"çœ‹è¿™äº›å¯¹æ™ºåŠ›æ˜¯ä¸¥å³»æŒ‘æˆ˜ï¼Œä¸çŸ¥é“é‚£äº›è€ƒä¸Š211çš„å­¦ç”Ÿæ˜¯ä¸æ˜¯ä¼šå¾ˆè½»æ¾","like_count":0},{"had_liked":false,"id":304042,"user_name":"èµ´","can_delete":false,"product_type":"c1","uid":2675954,"ip_address":"","ucode":"D47B3179BE3950","user_header":"https://static001.geekbang.org/account/avatar/00/28/d4/f2/3c0bfa0e.jpg","comment_is_top":false,"comment_ctime":1627204550,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1627204550","product_id":100020801,"comment_content":"ç¬¬äºŒä¸ªä¾‹å­ï¼Œä¸ºä»€ä¹ˆä¼šåŸºäºbç´¢å¼•? æ˜¯å› ä¸ºä½¿ç”¨äº†order by å—?æˆ‘çš„ç†è§£æ˜¯æ’åºåœ¨ç´¢å¼•åˆ—æ˜¯åŸºæœ¬ä¸Šæ²¡æœ‰å¤šä½™çš„æ¶ˆè€—çš„ã€‚å‡å¦‚è¿™ä¸ªæŸ¥è¯¢å°±æ˜¯èƒ½æŸ¥å‡ºæ¥é‚£ä¹ˆå¤šæ•°æ®ï¼Œåº”è¯¥èµ°bæ›´ä½³ï¼Œå…ˆå ä¸ªä½ï¼Œå†æµ‹è¯•ä¸€ä¸‹","like_count":0},{"had_liked":false,"id":300542,"user_name":"prader26","can_delete":false,"product_type":"c1","uid":1433707,"ip_address":"","ucode":"5EFFFC374ADECE","user_header":"https://static001.geekbang.org/account/avatar/00/15/e0/6b/f61d7466.jpg","comment_is_top":false,"comment_ctime":1625212701,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1625212701","product_id":100020801,"comment_content":"mysql ç´¢å¼•å¼‚å¸¸ï¼š<br>1 é€šå¸¸çš„å¼‚å¸¸æƒ…å†µä¸ºï¼Œä½¿ç”¨é”™ç´¢å¼•ï¼Œå¯¼è‡´æ…¢æŸ¥è¯¢ã€‚<br>2 ä¸ºä»€ä¹ˆä¼šä½¿ç”¨é”™ç´¢å¼•å‘¢ï¼Ÿ<br>    å› ä¸ºåœ¨æ‰§è¡Œ sql ä¹‹å‰ï¼Œä¼˜åŒ–å™¨ä¼š åˆ†æè¯­å¥ï¼Œé€‰æ‹©ä¸åŒçš„ç´¢å¼• å¯¼è‡´ä¸åŒçš„ æ‰«æè¡Œæ•°ï¼Œ æ’åºç­‰æ“ä½œï¼Œå› æ­¤å­˜åœ¨é€‰é”™ç´¢å¼•çš„æƒ…å†µã€‚<br>    ä¼˜åŒ–å™¨ä¼šåˆ¤æ–­ä½¿ç”¨è¿™ä¸ªç´¢å¼•éœ€è¦æ‰«æå¤šå°‘è¡Œçš„æ•°æ®ã€‚<br>3  ä¸åŒçš„ç´¢å¼•ä¼šæœ‰ä¸åŒçš„åŸºæ•°ï¼šå°±æ˜¯è¿™ä¸ªç´¢å¼•è¢«å¤šå°‘ä¸åŒçš„æ•°æ®å¼•ç”¨ï¼ˆç´¢å¼•çš„è¿™ä¸€åˆ—å¤§æ¦‚æœ‰å¤šå°‘æ•°æ®ã€‚ï¼‰ è®¡ç®—æ–¹æ³•å³ä½¿ï¼Œéšæœºé€‰å–å‡ ä¸ªæ•°æ®é¡µï¼Œè®¡ç®—å‡ºæ•°æ®é‡çš„å¹³å‡å€¼ï¼Œç„¶åä¹˜ä»¥é¡µæ•°ã€‚<br>4 åœ¨ MySQL ä¸­ï¼Œæœ‰ä¸¤ç§å­˜å‚¨ç´¢å¼•ç»Ÿè®¡çš„æ–¹å¼ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®å‚æ•° innodb_stats_persistent çš„å€¼æ¥é€‰æ‹©ï¼š<br>  è®¾ç½®ä¸º on çš„æ—¶å€™ï¼Œè¡¨ç¤ºç»Ÿè®¡ä¿¡æ¯ä¼šæŒä¹…åŒ–å­˜å‚¨ã€‚è¿™æ—¶ï¼Œé»˜è®¤çš„ N æ˜¯ 20ï¼ŒM æ˜¯ 10ã€‚<br>   è®¾ç½®ä¸º off çš„æ—¶å€™ï¼Œè¡¨ç¤ºç»Ÿè®¡ä¿¡æ¯åªå­˜å‚¨åœ¨å†…å­˜ä¸­ã€‚è¿™æ—¶ï¼Œé»˜è®¤çš„ N æ˜¯ 8ï¼ŒM æ˜¯ 16ã€‚<br>5  åº”å¯¹ç´¢å¼•å¼‚å¸¸çš„æƒ…å†µï¼Œå¯ä»¥é‡‡å–ä¸‹é¢ä¸‰ç§æ–¹å¼åº”å¯¹ï¼š<br>  5.1  å¼ºåˆ¶ä½¿ç”¨æŸä¸ªç´¢å¼•ã€‚<br>  5.2 ä¿®æ”¹è¯­å¥å¼•å¯¼mysqlä½¿ç”¨æœŸæœ›çš„ç´¢å¼•ã€‚<br>  5.3 åˆ é™¤æˆ–è€…æ–°å»ºç´¢å¼•ã€‚<br>6 analyze table t å‘½ä»¤ï¼Œå¯ä»¥ç”¨æ¥é‡æ–°ç»Ÿè®¡ç´¢å¼•ä¿¡æ¯ã€‚","like_count":0},{"had_liked":false,"id":298859,"user_name":"è‘«èŠ¦å¨ƒ-Dear","can_delete":false,"product_type":"c1","uid":1743582,"ip_address":"","ucode":"606C2E1D80B612","user_header":"https://static001.geekbang.org/account/avatar/00/1a/9a/de/abd008f3.jpg","comment_is_top":false,"comment_ctime":1624347012,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1624347012","product_id":100020801,"comment_content":"çº¿ä¸Šæœ‰ä¸ª5ä¸‡ä¸ªå†…å®¹çš„inæŸ¥è¯¢,å‘ç°ä½¿ç”¨å¼ºåˆ¶ç´¢å¼•ä¼šå…¨è¡¨æ‰«æ,ä¸ä½¿ç”¨å¼ºåˆ¶ç´¢å¼•ä½¿ç”¨çš„æ˜¯model_id,versionçš„ç´¢å¼•<br>SELECT  <br>  model_id, COUNT( 1) as  device_num, `VERSION`   force index(index_sn)<br>FROM  <br>   `tb_device_upgrade_device_version`<br>WHERE<br>device_id in(5ä¸‡ä¸ªsn)<br>GROUP BY model_id, version ;<br>è¡¨ç»“æ„:CREATE TABLE `tb_device_upgrade_device_version` ( `id` int(11) unsigned NOT NULL AUTO_INCREMENT, `model_id` int(11) DEFAULT NULL, `device_id` varchar(50) DEFAULT NULL, `version` varchar(50) DEFAULT NULL, `online_num` int(11) DEFAULT NULL, `b_auto_id` int(11) DEFAULT NULL, `device_type` tinyint(4) DEFAULT NULL, `platform` varchar(10) DEFAULT NULL, `oem_auto_id` int(11) DEFAULT NULL, `channel_id` int(11) DEFAULT NULL, PRIMARY KEY (`id`), KEY `index_sn` (`device_id`) USING BTREE, KEY `index_model_id_version` (`model_id`,`version`) USING BTREE ) ENGINE=InnoDB  DEFAULT CHARSET=utf8<br>åœ¨device_idæ¯”è¾ƒå°‘çš„æ—¶å€™,ä¸ä½¿ç”¨å¼ºåˆ¶ç´¢å¼•ä¹Ÿæ˜¯ä¼šèµ°device_idçš„ç´¢å¼•çš„. è¿™é‡Œå·²ç»å¼ºåˆ¶ä½¿ç”¨ç´¢å¼•äº†,ä¸ºä»€ä¹ˆä¸ç”Ÿæ•ˆå‘¢,éš¾é“æ˜¯å› ä¸ºinä¸­çš„å†…å®¹å¤ªå¤šäº†?","like_count":0},{"had_liked":false,"id":298767,"user_name":"å“ˆå“ˆå“ˆ","can_delete":false,"product_type":"c1","uid":1248876,"ip_address":"","ucode":"C40ABE7161EFAE","user_header":"https://static001.geekbang.org/account/avatar/00/13/0e/6c/1f3b1372.jpg","comment_is_top":false,"comment_ctime":1624322145,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1624322145","product_id":100020801,"comment_content":"è€å¸ˆï¼Œé˜¿é‡Œçš„mysqlåˆ†æ”¯æ˜¯å¦å¯¹æ–‡ä¸­æåˆ°çš„é‡‡æ ·ç»Ÿè®¡ä¸ç²¾å‡†é—®é¢˜åšä¼˜åŒ–å‘¢","like_count":0},{"had_liked":false,"id":298038,"user_name":"å¹³å‡¡ä¸­çš„ä¸å¹³å‡¡","can_delete":false,"product_type":"c1","uid":1334463,"ip_address":"","ucode":"D1235E6E8378A6","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIdIwR8uj8espUpYYMV0QhP88U4dx3hU5G58RGKuubUiaRgzj5e8WAgucxZibySICEF2rX4ErLJn6lg/132","comment_is_top":false,"comment_ctime":1623895356,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1623895356","product_id":100020801,"comment_content":"ä¼˜åŒ–å™¨é€‰æ‹©ç´¢å¼•çš„æ¡ä»¶æœ‰æ‰«æè¡Œï¼Œæ˜¯å¦æœ‰ä¸´æ—¶è¡¨åŠæ˜¯å¦æ’åºç­‰ï¼Œå…¶ä¸­æ‰«æè¡Œæ¶‰åŠåˆ°åŒºåˆ†åº¦çš„åˆ¤æ–­ã€‚åŒºåˆ†åº¦é‡‡ç”¨éšæœºé‡‡æ ·çš„ç»Ÿè®¡æ–¹æ³•ã€‚å¦‚æœå­˜åœ¨äº‹åŠ¡ä¸­æ— åºæ›´æ–°è¡¨æ•°æ®å¯èƒ½ä¼šäº§ç”Ÿé¡µåˆ†è£‚å¯¼è‡´éšæœºé‡‡æ ·ç»Ÿè®¡ä¸å‡†ç¡®çš„æƒ…å†µã€‚å¯ä»¥é€šè¿‡å¼ºåˆ¶ç´¢å¼•å’Œanalyze tableä¼˜åŒ–ã€‚æ’åºæƒ…å†µé€‰æ‹©ç´¢å¼•è¦è€ƒè™‘æ‰«æè¡Œçš„é—®é¢˜","like_count":0},{"had_liked":false,"id":295088,"user_name":"Z","can_delete":false,"product_type":"c1","uid":1257299,"ip_address":"","ucode":"8E56D0618F1B76","user_header":"https://static001.geekbang.org/account/avatar/00/13/2f/53/f17cfee2.jpg","comment_is_top":false,"comment_ctime":1622213212,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1622213212","product_id":100020801,"comment_content":"åœ¨å°†æ“ä½œç¼“å­˜åˆ° change buffer æ—¶ ä¼šå°† æ•°æ®å˜åŒ–å†™å…¥åˆ°redologä¸­ï¼Œredologæ˜¯ä¸æ˜¯ä¹Ÿæ˜¯è®°å½•ä¸¤æ¡ä¸€æ¡æ˜¯change buffer å˜åŒ–ï¼Œä¸€æ¡æ˜¯æ•°æ®çš„å˜åŒ–ï¼Ÿ","like_count":0},{"had_liked":false,"id":294183,"user_name":"æ‰§å¿µã€","can_delete":false,"product_type":"c1","uid":1304683,"ip_address":"","ucode":"96A609813D231F","user_header":"https://static001.geekbang.org/account/avatar/00/13/e8/6b/d76b7540.jpg","comment_is_top":false,"comment_ctime":1621819814,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1621819814","product_id":100020801,"comment_content":"è¯·é—®ä¸‹è€å¸ˆä¸€ä¸ªé—®é¢˜ï¼Œä¸»åº“å’Œä»åº“ä¸€æ ·çš„é…ç½®ï¼Œè¯­å¥å¦‚select * from xxx where id &gt; 1230087 and book_id<br>=123   ä¸»åº“é€‰æ‹©äº†idä¸»é”®ç´¢å¼•ï¼Œä»åº“é€‰æ‹©äº†book_idäºŒçº§ç´¢å¼•ï¼ˆæœ‰æ…¢sqlï¼‰ï¼Œç´¢å¼•é€‰æ‹©ä¸ä¸€æ ·çš„åŸå› æ˜¯ä»€ä¹ˆã€‚","like_count":0},{"had_liked":false,"id":283803,"user_name":"å‡ºå–çµé­‚çš„æ•™ç»ƒKerry","can_delete":false,"product_type":"c1","uid":1807943,"ip_address":"","ucode":"8C64517DA556FE","user_header":"https://static001.geekbang.org/account/avatar/00/1b/96/47/93838ff7.jpg","comment_is_top":false,"comment_ctime":1615943085,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"1615943085","product_id":100020801,"comment_content":"è€å¸ˆï¼Œmergeè¿‡ç¨‹æœ€åï¼Œä¸ºä»€ä¹ˆä¼šå†™redologå‘¢ï¼Ÿä¹‹å‰change bufferå·²ç»å†™äº†redoï¼Œä¸ºä»€ä¹ˆmergeè¿˜è¦å†™å‘¢ï¼Œæƒ³äº†å¾ˆä¹…ï¼Œéƒ½æƒ³ä¸é€šï¼Œå¸Œæœ›è€å¸ˆå¯ä»¥è§£ç­”ï¼ï¼ï¼","like_count":0,"discussions":[{"author":{"id":1970443,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIx1V1QAxC4NHaxYZGyuibBN8lcURJWc5nrnO4yic1kxnDemYV2FJGialf47kYX9qtDnZZOfe1SJeLicg/132","nickname":"lleft","note":"","ucode":"D573EB509455AE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":370503,"discussion_content":"change bufferå†™çš„redoæ˜¯change bufferæ•°æ®é¡µçš„å˜åŒ–ï¼Œmergeä¹‹åå†™çš„redoæ˜¯æ•°æ®çš„æ•°æ®é¡µçš„å˜åŒ–ï¼Œåº”è¯¥æ˜¯è¿™æ ·","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1619438141,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":280557,"user_name":"é›¨çš„è®°å¿†","can_delete":false,"product_type":"c1","uid":1691901,"ip_address":"","ucode":"E55A5CAC977DC6","user_header":"https://static001.geekbang.org/account/avatar/00/19/d0/fd/f7f4fdc3.jpg","comment_is_top":false,"comment_ctime":1614246602,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1614246602","product_id":100020801,"comment_content":"ä½¿ç”¨change buffer çš„æƒ…å†µä¸‹ä¼šæœ‰ä¸¤æ¬¡å†™redo log å—ï¼Ÿ  ç¬¬ä¸€æ¬¡æ˜¯äº‹åŠ¡æäº¤ï¼Œç¬¬äºŒæ¬¡æ˜¯merge ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1970443,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIx1V1QAxC4NHaxYZGyuibBN8lcURJWc5nrnO4yic1kxnDemYV2FJGialf47kYX9qtDnZZOfe1SJeLicg/132","nickname":"lleft","note":"","ucode":"D573EB509455AE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":370506,"discussion_content":"redoåœ¨äº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­ä¹Ÿæ˜¯ä¸€ç›´å†™çš„ï¼Œä¸åªæ˜¯åœ¨äº‹åŠ¡æäº¤çš„æ—¶å€™ï¼Œmergeæ—¶ä¹Ÿè®°å½•redo","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619439274,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":279325,"user_name":"L","can_delete":false,"product_type":"c1","uid":1135761,"ip_address":"","ucode":"68954D2A92AB01","user_header":"https://static001.geekbang.org/account/avatar/00/11/54/91/845de758.jpg","comment_is_top":false,"comment_ctime":1613721479,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1613721479","product_id":100020801,"comment_content":"drop table if exists test;<br>CREATE TABLE `test` (<br>  `id` int(11) NOT NULL,<br>  `ca` varchar(16) DEFAULT NULL,<br>  PRIMARY KEY (`id`),<br> KEY `ia` (`ca`) USING BTREE<br>) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;<br>truncate test;<br>begin;<br>insert into test (id, ca) values (1, &#39;1&#39;);<br>insert into test (id, ca) values (2, &#39;2&#39;);<br>insert into test (id, ca) values (3, &#39;3&#39;);<br>insert into test (id, ca) values (4, &#39;4&#39;);<br>insert into test (id, ca) values (5, &#39;5&#39;);<br>insert into test (id, ca) values (6, &#39;6&#39;);<br>insert into test (id, ca) values (7, &#39;7&#39;);<br>insert into test (id, ca) values (8, &#39;8&#39;);<br>insert into test (id, ca) values (9, &#39;9&#39;);<br>insert into test (id, ca) values (10, &#39;10&#39;);<br>commit;<br>begin;<br>delete from test where id = 8;<br>insert into test (id, ca) values (8, &#39;1&#39;);<br>commit;<br>æ‰§è¡Œå®Œåå‘ç°æ’åºå¹¶ä¸æ˜¯ æŒ‰idæ¥æ’åºçš„<br>EXPLAIN select * from test;<br>å‘ç°ç´¢å¼•ç”¨çš„æ˜¯ia  è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ<br>","like_count":0,"discussions":[{"author":{"id":1970443,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIx1V1QAxC4NHaxYZGyuibBN8lcURJWc5nrnO4yic1kxnDemYV2FJGialf47kYX9qtDnZZOfe1SJeLicg/132","nickname":"lleft","note":"","ucode":"D573EB509455AE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":370507,"discussion_content":"ç”¨åˆ°äº†ç´¢å¼•è¦†ç›–","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619439419,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":277863,"user_name":"è´ºå­","can_delete":false,"product_type":"c1","uid":2076283,"ip_address":"","ucode":"A64DC9D9CF7CCD","user_header":"https://static001.geekbang.org/account/avatar/00/1f/ae/7b/47200692.jpg","comment_is_top":false,"comment_ctime":1612626997,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1612626997","product_id":100020801,"comment_content":"merge çš„æ‰§è¡Œæµç¨‹æ˜¯è¿™æ ·çš„ï¼š<br>ä»ç£ç›˜è¯»å…¥æ•°æ®é¡µåˆ°å†…å­˜ï¼ˆè€ç‰ˆæœ¬çš„æ•°æ®é¡µï¼‰ï¼›<br>ä» change buffer é‡Œæ‰¾å‡ºè¿™ä¸ªæ•°æ®é¡µçš„ change buffer è®°å½• (å¯èƒ½æœ‰å¤šä¸ªï¼‰ï¼Œä¾æ¬¡åº”ç”¨ï¼Œå¾—åˆ°æ–°ç‰ˆæ•°æ®é¡µï¼›<br>å†™ redo logã€‚è¿™ä¸ª redo log åŒ…å«äº†æ•°æ®çš„å˜æ›´å’Œ change buffer çš„å˜æ›´ã€‚<br>é’ˆå¯¹è¿™ä¸ªè¿‡ç¨‹æœ‰ä¸ªç–‘é—®ï¼Ÿmergeçš„æ—¶å€™ä¹Ÿéœ€è¦å†™redoï¼Œç„¶åå¼€å§‹çš„æ—¶å€™è®°å½•change bufferçš„æ—¶å€™ä¹Ÿè®°å½•redoäº†ï¼Œé‚£ä¹ˆè¯·é—®è¿™ä¸¤æ¬¡redoè®°å½•çš„å†…å®¹ä¸å†²çªå—ï¼Ÿæˆ–è€…è¯´åˆ†åˆ«è®°å½•çš„æ˜¯ä»€ä¹ˆ","like_count":0,"discussions":[{"author":{"id":1970443,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIx1V1QAxC4NHaxYZGyuibBN8lcURJWc5nrnO4yic1kxnDemYV2FJGialf47kYX9qtDnZZOfe1SJeLicg/132","nickname":"lleft","note":"","ucode":"D573EB509455AE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":370508,"discussion_content":"ä¸€æ¬¡å†™change bufferçš„ï¼Œä¸€æ¬¡å†™æ•°æ®çš„æ•°æ®é¡µçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619439528,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":277374,"user_name":"Long","can_delete":false,"product_type":"c1","uid":1318970,"ip_address":"","ucode":"2417242560360A","user_header":"https://static001.geekbang.org/account/avatar/00/14/20/3a/90db6a24.jpg","comment_is_top":false,"comment_ctime":1612397814,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1612397814","product_id":100020801,"comment_content":"äºŒåˆ·ç¬¬7å¤©ï¼Œæ¸©æ•…çŸ¥æ–°ï¼Œvariables innodb_stats_persistent; é»˜è®¤å€¼ ä¸ºon ,é€‰æ‹©20é¡µï¼Œ 10%æ›´æ–°é‡æ–°æ›´æ–°ç»Ÿè®¡ä¿¡æ¯ï¼Œä¸ºOFFé€‰æ‹©8é¡µï¼Œæ›´æ–°16%åé‡æ–°ç»Ÿè®¡ç»Ÿè®¡ä¿¡æ¯ã€‚<br><br>åœ¨RRéš”ç¦»çº§åˆ«ä¸‹ï¼Œæœªæäº¤äº‹åŠ¡çš„è¯»å†™ï¼Œå¯èƒ½ä¼šå½±å“ç´¢å¼•çš„é€‰æ‹©ã€‚è¿™ä¸ªçŸ¥è¯†ç‚¹å·²ç»å¿˜äº†ã€‚æ¸©æ•…çŸ¥æ–°ã€‚","like_count":0},{"had_liked":false,"id":273119,"user_name":"å†’æ—­","can_delete":false,"product_type":"c1","uid":2410735,"ip_address":"","ucode":"EB0591AC4597B3","user_header":"https://static001.geekbang.org/account/avatar/00/24/c8/ef/1251fe4b.jpg","comment_is_top":false,"comment_ctime":1610444490,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1610444490","product_id":100020801,"comment_content":"é€‰æ‹©çš„ç´¢å¼•æ˜¯å¦å’Œç´¢å¼•é¡ºåºæœ‰å…³ç³»ï¼Œæœ‰ä¸€æ¬¡æˆ‘æ›´æ”¹äº†2ä¸ªç´¢å¼•çš„åˆ›å»ºé¡ºåºï¼Œå‘ç°ä¸¤æ¬¡ä½¿ç”¨çš„ç´¢å¼•ä¸åŒ","like_count":0},{"had_liked":false,"id":272003,"user_name":"Buffalo","can_delete":false,"product_type":"c1","uid":1198446,"ip_address":"","ucode":"A066E048EBDA33","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/ajNVdqHZLLBLNWibggjw6BHRvG4FoZuQeNtMwCFUepzp36u8u9kf9K2ibcEnoMn876WNAeib7JgIUvK9UPxWeenyQ/132","comment_is_top":false,"comment_ctime":1609906048,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1609906048","product_id":100020801,"comment_content":"é™¤äº†åˆ é™¤æ–°å¢æ“ä½œï¼Œupdateæ“ä½œä¼šå½±å“ç»Ÿè®¡ä¿¡æ¯çš„ä¹ˆï¼Ÿ æ¯”å¦‚ç´¢å¼•index(a,b)ï¼Œbå­—æ®µé¢‘ç¹æ›´æ–°ã€‚è¿™æ ·ä¼šå½±å“ç»Ÿè®¡çš„å‡†ç¡®æ€§ä¹ˆï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1970443,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIx1V1QAxC4NHaxYZGyuibBN8lcURJWc5nrnO4yic1kxnDemYV2FJGialf47kYX9qtDnZZOfe1SJeLicg/132","nickname":"lleft","note":"","ucode":"D573EB509455AE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":370512,"discussion_content":"ç»Ÿè®¡ä¿¡æ¯ä¹Ÿä¼šæ›´æ–°çš„ï¼Œæ ¹æ®æ•°æ®çš„å˜åŒ–é‡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619439732,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":271945,"user_name":"å‡¹å‡¸é¸¿","can_delete":false,"product_type":"c1","uid":1915334,"ip_address":"","ucode":"A458BAEBF314B2","user_header":"https://static001.geekbang.org/account/avatar/00/1d/39/c6/1e12f271.jpg","comment_is_top":false,"comment_ctime":1609892579,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1609892579","product_id":100020801,"comment_content":"æä¸ªå»ºè®®ï¼Œç•™è¨€åŒºå·¦ä¾§ç©ºäº†å¾ˆå¤§åŒºåŸŸï¼Œèƒ½ä¸èƒ½åˆ©ç”¨èµ·æ¥å‘¢ï¼Œç°åœ¨ç•™è¨€æ–‡æœ¬çš„æ˜¾ç¤ºåŒºåŸŸå¤ªçª„äº†ï¼Œæ˜¾å¾—å¾ˆæ‹¥æŒ¤ã€‚","like_count":0},{"had_liked":false,"id":271927,"user_name":"å‡¹å‡¸é¸¿","can_delete":false,"product_type":"c1","uid":1915334,"ip_address":"","ucode":"A458BAEBF314B2","user_header":"https://static001.geekbang.org/account/avatar/00/1d/39/c6/1e12f271.jpg","comment_is_top":false,"comment_ctime":1609866781,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1609866781","product_id":100020801,"comment_content":"å½“å˜æ›´çš„æ•°æ®è¡Œæ•°è¶…è¿‡ 1&#47;M çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨è§¦å‘é‡æ–°åšä¸€æ¬¡ç´¢å¼•ç»Ÿè®¡ã€‚<br>æ€ä¹ˆçªç„¶å†’å‡ºä¸ª1&#47;Mï¼Œä»€ä¹ˆæ„æ€ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1970443,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIx1V1QAxC4NHaxYZGyuibBN8lcURJWc5nrnO4yic1kxnDemYV2FJGialf47kYX9qtDnZZOfe1SJeLicg/132","nickname":"lleft","note":"","ucode":"D573EB509455AE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":370513,"discussion_content":"Mæ˜¯é€šè¿‡innodb_states_persistentçš„å–å€¼æ¥ç¡®å®šçš„ï¼Œå–å€¼ä¸åŒMçš„å€¼ä¸åŒ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619439847,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":269392,"user_name":"Geek_e1987e","can_delete":false,"product_type":"c1","uid":2367735,"ip_address":"","ucode":"B44F9EE148409B","user_header":"","comment_is_top":false,"comment_ctime":1608631486,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1608631486","product_id":100020801,"comment_content":"è¿™ä¸€è®²ä¸­è¯´ merge æ²¡æœ‰æ›´æ–°ç£ç›˜æ•°æ®ï¼Œ09å°†ä¸­åˆè¯´merge æ˜¯çœŸæ­£è¿›è¡Œæ•°æ®æ›´æ–°çš„æ—¶åˆ»ï¼Œå“ªä¸€ä¸ªæ˜¯æ­£ç¡®çš„ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚","like_count":0,"discussions":[{"author":{"id":1970443,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIx1V1QAxC4NHaxYZGyuibBN8lcURJWc5nrnO4yic1kxnDemYV2FJGialf47kYX9qtDnZZOfe1SJeLicg/132","nickname":"lleft","note":"","ucode":"D573EB509455AE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":370546,"discussion_content":"ä¸¤ä¸ªè¯´æ³•éƒ½æ²¡æœ‰é”™ï¼Œmergeæ˜¯ä»change bufferåº”ç”¨å˜åŒ–åˆ°æ•°æ®é¡µä¸Šé¢ï¼Œå¯ä»¥è¯´æ˜¯æ•°æ®æ›´æ–°çš„æ—¶åˆ»ï¼Œä½†æ˜¯æ•°æ®é¡µæ›´æ–°äº†è®°å½•äº†redoï¼Œæ•°æ®é¡µå°±ä¸éœ€è¦åŠæ—¶æ›´æ–°åˆ°ç£ç›˜äº†ï¼Œä¹Ÿå¯ä»¥è¯´mergeæ²¡æœ‰æ›´æ–°ç£ç›˜æ•°æ®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619447749,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":267474,"user_name":"poordickey","can_delete":false,"product_type":"c1","uid":1810156,"ip_address":"","ucode":"2A436EC813AF97","user_header":"","comment_is_top":false,"comment_ctime":1607760865,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1607760865","product_id":100020801,"comment_content":"è€å¸ˆçš„æ–‡ç« å‡ºç°äº†å¾ˆå¤šæ–°çš„åè¯æ—¶  å¯ä»¥è§£é‡Šä¸‹  å¦‚æœä¸è§£é‡Šçš„è¯  ä¸‹æ–‡å°±æ— æ³•ç†è§£äº†  æ¯”å¦‚åˆšå¼€å§‹æåˆ°åŸºæ•°æ˜¯æŒ‡å“ªä¸ªå­—æ®µ  må€¼ä»£è¡¨ä»€ä¹ˆå«ä¹‰  æœ€å¼€å§‹æåŠçš„æ—¶å€™éƒ½æ²¡è¯´æ˜  åé¢é˜…è¯»å°±æœ‰ç‚¹è·Ÿä¸ä¸Šäº†","like_count":0},{"had_liked":false,"id":266488,"user_name":"Tank","can_delete":false,"product_type":"c1","uid":2262986,"ip_address":"","ucode":"A7108E83D2D199","user_header":"https://static001.geekbang.org/account/avatar/00/22/87/ca/00cc5a1a.jpg","comment_is_top":false,"comment_ctime":1607352388,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1607352388","product_id":100020801,"comment_content":"è¯·é—®MySQLå•è¡¨æ•°æ®é‡è¾¾åˆ°8ä¸ªäº¿ï¼Œç´¢å¼•å­—æ®µè¾ƒå¤šæ˜¯å¦å½±å“innerã€updateçš„æ€§èƒ½ï¼Ÿ","like_count":0},{"had_liked":false,"id":265918,"user_name":"å“ˆå§†","can_delete":false,"product_type":"c1","uid":1097042,"ip_address":"","ucode":"B40EFE58BD2D20","user_header":"https://static001.geekbang.org/account/avatar/00/10/bd/52/5994ad51.jpg","comment_is_top":false,"comment_ctime":1607068132,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1607068132","product_id":100020801,"comment_content":"è€å¸ˆï¼Œè¯·é—®ä¸€ä¸‹ï¼Œå…¨æ¨¡ç³ŠæŸ¥è¯¢ åƒlike %%è¿™ç§ï¼Œå¦‚ä½•å¯ä»¥è®©å®ƒè·‘ç´¢å¼•å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1970443,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIx1V1QAxC4NHaxYZGyuibBN8lcURJWc5nrnO4yic1kxnDemYV2FJGialf47kYX9qtDnZZOfe1SJeLicg/132","nickname":"lleft","note":"","ucode":"D573EB509455AE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":370549,"discussion_content":"èƒ½ç”¨åˆ°ç´¢å¼•å§ï¼Ÿåªä¸è¿‡æ˜¯ä¸èƒ½ç”¨åˆ°ç´¢å¼•çš„å¿«é€Ÿå®šä½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619447937,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":262669,"user_name":"Geek_0c1732","can_delete":false,"product_type":"c1","uid":1721278,"ip_address":"","ucode":"6276D0412CCE51","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/ajNVdqHZLLAhj2fB8NI2TPI1SNicgiciczuMUHyAb9HHBkkKJHrgtR162fsicaTqdAneHfuVX7icDXaVibDHstM9L47g/132","comment_is_top":false,"comment_ctime":1605798194,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1605798194","product_id":100020801,"comment_content":"å¬è€å¸ˆçš„æ€»ç»“ï¼Œæ„Ÿè§‰æœ‰æ—¶æ˜¯ä¸æ˜¯dbaé‡åˆ°çš„bugå±äºé€»è¾‘bugï¼Œåªèƒ½ä»æºç ä¸­æ‰¾åˆ°åŸå› äº†","like_count":0},{"had_liked":false,"id":260263,"user_name":"Windqiu","can_delete":false,"product_type":"c1","uid":2278659,"ip_address":"","ucode":"EF78D3CF73BCBB","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/TUMtkaIMdbFDS28AhjrQcqOhiapNvHyPMApz9QoZZkShZmomJRh6GX2aL2YeSMg4SicdydzdWxXZOZz49HNS9EtA/132","comment_is_top":false,"comment_ctime":1604971803,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1604971803","product_id":100020801,"comment_content":"è¯·é—®è€å¸ˆï¼Œæ‚¨è¯´çš„sessionAå’ŒsessionBæ˜¯å¼€ä¸¤ä¸ªçª—å£çš„mysqlæ‰§è¡Œå‘½ä»¤å—ï¼Ÿè¿˜æ˜¯åŒä¸€ä¸ªçª—å£ï¼ŒæŠŠå¼€å¯äº‹åŠ¡çœ‹åšsessionAï¼ŒæŠŠæ‰§è¡ŒDDLçœ‹åšsessionBå‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1649057,"avatar":"https://static001.geekbang.org/account/avatar/00/19/29/a1/41607383.jpg","nickname":"hello","note":"","ucode":"4F42DAA5DB5C38","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":339397,"discussion_content":"è‚¯å®šæ˜¯æ‰“å¼€ä¸¤ä¸ªçª—å£","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609658008,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":258118,"user_name":"æ–œæ é’å¹´","can_delete":false,"product_type":"c1","uid":1177739,"ip_address":"","ucode":"D7AF02B8588549","user_header":"https://static001.geekbang.org/account/avatar/00/11/f8/8b/74d2ab6b.jpg","comment_is_top":false,"comment_ctime":1604304710,"is_pvip":true,"discussion_count":1,"race_medal":1,"score":"1604304710","product_id":100020801,"comment_content":"æ²¡æœ‰å¤ç°å‡ºæ¥ç¬¬ä¸€ä¸ªç°è±¡ï¼Œæœ‰åŒå­¦å¸®å¸®æˆ‘å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1649057,"avatar":"https://static001.geekbang.org/account/avatar/00/19/29/a1/41607383.jpg","nickname":"hello","note":"","ucode":"4F42DAA5DB5C38","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":339398,"discussion_content":"ä¼°è®¡å¥½å¤šéƒ½æ²¡æœ‰å¤ç°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609658026,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":256805,"user_name":"Pluto","can_delete":false,"product_type":"c1","uid":1324404,"ip_address":"","ucode":"CD99ED8487BC7D","user_header":"https://static001.geekbang.org/account/avatar/00/14/35/74/8eaee356.jpg","comment_is_top":false,"comment_ctime":1603757588,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1603757588","product_id":100020801,"comment_content":"<br>Session A<br>mysql&gt; explain select * from t where a between 10000 and 20000;<br>+----+-------------+-------+------------+-------+---------------+------+---------+------+-------+----------+-----------------------+<br>| id | select_type | table | partitions | type  | possible_keys | key  | key_len | ref  | rows  | filtered | Extra                 |<br>+----+-------------+-------+------------+-------+---------------+------+---------+------+-------+----------+-----------------------+<br>|  1 | SIMPLE      | t     | NULL       | range | a             | a    | 5       | NULL | 10001 |   100.00 | Using index condition |<br>+----+-------------+-------+------------+-------+---------------+------+---------+------+-------+----------+-----------------------+<br>1 row in set, 1 warning (0.00 sec)<br><br>mysql&gt; start transaction with consistent snapshot;<br>Query OK, 0 rows affected (0.00 sec)<br><br>mysql&gt; commit<br>    -&gt; ;<br>Query OK, 0 rows affected (0.00 sec)<br><br>Session B:<br><br>mysql&gt; use first;<br>Database changed<br>mysql&gt; delete from t;<br>Query OK, 100000 rows affected (0.44 sec)<br><br>mysql&gt; call idata();<br>Query OK, 1 row affected (59.20 sec)<br><br>mysql&gt;<br>mysql&gt;<br>mysql&gt;<br>mysql&gt; explain select * from t where a between 10000 and 20000;<br>+----+-------------+-------+------------+-------+---------------+------+---------+------+-------+----------+-----------------------+<br>| id | select_type | table | partitions | type  | possible_keys | key  | key_len | ref  | rows  | filtered | Extra                 |<br>+----+-------------+-------+------------+-------+---------------+------+---------+------+-------+----------+-----------------------+<br>|  1 | SIMPLE      | t     | NULL       | range | a             | a    | 5       | NULL | 10001 |   100.00 | Using index condition |<br>+----+-------------+-------+------------+-------+---------------+------+---------+------+-------+----------+-----------------------+<br>1 row in set, 1 warning (0.00 sec)<br><br>mysql&gt;<br>","like_count":0},{"had_liked":false,"id":253847,"user_name":"LinSharry","can_delete":false,"product_type":"c1","uid":1622499,"ip_address":"","ucode":"74828240C1FF99","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqyr8VM0QCSDaiaQ5K8OFF3o6h3rwucDicYNhKxaxqEanic9aWfd3bOuopUPza6uTfskpELQms8QBvdQ/132","comment_is_top":false,"comment_ctime":1602917972,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1602917972","product_id":100020801,"comment_content":"å¯¹ç¬¬ä¹è®²çš„å›ç­”è¶Šçœ‹è¶Šç–‘æƒ‘ï¼šæ„Ÿè§‰ä½œè€…è‡ªå·±éƒ½ä¸çŸ¥é“åœ¨è®²ä»€ä¹ˆï¼Œåœ¨ç¬¬ï¼™è®²changebufferå’Œredologçš„è¯»æ“ä½œç¤ºä¾‹æ—¶è¯´é“ï¼Œå’Œç³»ç»Ÿè¡¨ç©ºé—´å’Œredo logæ— å…³ï¼Œåœ¨è¿™éƒ¨åˆ†å›ç­”ä¸­ï¼Œåˆè¯´ä¸redo logæœ‰å…³ï¼Œåˆ°åº•ä»¥å“ªä¸ªä¸ºå‡†ï¼Œå¸Œæœ›ä½œè€…åœ¨æè¿°ç»†èŠ‚çš„æ—¶å€™å°½é‡ç”¨å‡†ç¡®çš„è¯­è¨€ï¼æ¯”å¦‚æ›´æ–°å†…å­˜æ—¶å¸Œæœ›æè¿°æˆæ›´æ–°åˆ°å…·ä½“çš„å†…å­˜åå­—ï¼Œå¦‚ä½•è¿›è¡Œæ›´æ–°çš„ï¼Œæ›´æ–°æ“ä½œæ¶‰åŠçš„ç»†èŠ‚ç­‰åšå‡ºæè¿°ï¼è€Œä¸æ˜¯å†™å°†æ›´æ–°åˆ°å†…å­˜å°±å®Œäº†ï¼å¸Œæœ›ä½œè€…é‡æ–°å†™ä¸‹ç¬¬ï¼™å°†ï¼Œå°½é‡æŠŠæ›´æ–°è®¾æ¶‰åŠåˆ°çš„ç»†èŠ‚æè¿°æ¸…æ¥šï¼Œè€Œä¸æ˜¯æ³›æ³›è€Œè°ˆ","like_count":0},{"had_liked":false,"id":251741,"user_name":"å´”ç»åˆš","can_delete":false,"product_type":"c1","uid":1827943,"ip_address":"","ucode":"207FDF850860C4","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/P5lTnAkviacPGu5S5XJQGQdTpvkSjAVU9Nu2EYicIpMAjiaNP8aXDtfcIHicSnHw2fVIoqTWGGg48rZVzcficUlbgmw/132","comment_is_top":false,"comment_ctime":1601819136,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1601819136","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæˆ‘æŒ‰ç…§æ‚¨çš„æ­¥éª¤æ¥ä¹Ÿæ— æ³•å¤ç°ã€‚æˆ‘æ˜¯å¤ç°çš„æ­¥éª¤æ˜¯è¿™æ ·çš„ï¼š<br>é¦–å…ˆï¼Œç¡®è®¤æ˜¯å¯é‡å¤è¯»éš”ç¦»çº§åˆ«ï¼š<br>show variables like &#39;transaction_isolation&#39;;<br>+-----------------------+-----------------+<br>| Variable_name         | Value           |<br>+-----------------------+-----------------+<br>| transaction_isolation | REPEATABLE-READ |<br>+-----------------------+-----------------+<br><br>session Aï¼š<br>           1. å…ˆåˆ æ‰è¡¨t â€”â€” drop table tï¼›<br>           3. åˆ›å»ºè¡¨t<br>mysql&gt; CREATE TABLE `t` (<br>    -&gt;   `id` int(11) NOT NULL,<br>    -&gt;   `a` int(11) DEFAULT NULL,<br>    -&gt;   `b` int(11) DEFAULT NULL,<br>    -&gt;   PRIMARY KEY (`id`),<br>    -&gt;   KEY `a` (`a`),<br>    -&gt;   KEY `b` (`b`)<br>    -&gt; ) ENGINE=InnoDB;<br><br>         3. æ‰§è¡Œå­˜å‚¨è¿‡ç¨‹ï¼Œæ’å…¥10ä¸‡è¡Œæ•°æ®   call idata();<br>æ¥ç€æ˜¯session Bï¼š<br>          1. å¼€å¯äº‹åŠ¡   start transaction with consistent snapshot;<br>ç´§æ¥ç€æ˜¯session Cï¼š<br>          1. deleteæ‰è¡¨ t çš„æ‰€æœ‰æ•°æ®    delete from t;<br>          2. æ‰§è¡Œå­˜å‚¨è¿‡ç¨‹ï¼Œæ’å…¥10ä¸‡è¡Œæ•°æ®    call idata();<br>          3. æ‰§è¡Œselectæ“ä½œ<br>explain select * from t where a between 10000 and 20000;<br>+----+-------------+-------+------------+-------+---------------+------+---------+------+-------+----------+-----------------------+<br>| id | select_type | table | partitions | type  | possible_keys | key  | key_len | ref  | rows  | filtered | Extra                 |<br>+----+-------------+-------+------------+-------+---------------+------+---------+------+-------+----------+-----------------------+<br>|  1 | SIMPLE      | t     | NULL       | range | a             | a    | 5       | NULL | 10001 |   100.00 | Using index condition |<br>+----+-------------+-------+------------+-------+---------------+------+---------+------+-------+----------+-----------------------+<br><br>å‘ç°é€‰æ‹©çš„ç´¢å¼•è¿˜æ˜¯ a <br><br>è¯·é—®ï¼Œmysqlæ˜¯ä¿®å¤äº†é€‰é”™ç´¢å¼•çš„è¿™ä¸ªbugäº†å—ï¼Ÿæˆ‘çš„mysqlç‰ˆæœ¬æ˜¯5.7.31çš„<br>root@localhost ~]# mysql -Vsersion<br>mysql  Ver 14.14 Distrib 5.7.31, for Linux (x86_64) using  EditLine wrapper","like_count":0},{"had_liked":false,"id":246379,"user_name":"å­¦ä¹ å­¦ä¸ªå±","can_delete":false,"product_type":"c1","uid":1049017,"ip_address":"","ucode":"DF2D61E6FB2FCE","user_header":"https://static001.geekbang.org/account/avatar/00/10/01/b9/73435279.jpg","comment_is_top":false,"comment_ctime":1599302333,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1599302333","product_id":100020801,"comment_content":"ä¸ºä»€ä¹ˆä½¿ç”¨limitçš„æ—¶å€™ ä¼šè®©mysqlè§‰å¾—ä½¿ç”¨ç´¢å¼•ä»£ä»·é«˜å‘¢,æ˜¯å› ä¸ºæ•°æ®é‡å¤§,æˆ‘åªæƒ³æ‹¿100æ¡??","like_count":0},{"had_liked":false,"id":243284,"user_name":"black_mirror","can_delete":false,"product_type":"c1","uid":1320092,"ip_address":"","ucode":"2549C87298BF12","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q3auHgzwzM4z9WYWVvWDhMF0SicPE5ad56ME6DibyWGbRoQa0lH4U9icdsjNcv3ssRickcuRMDA01e6vMXnmOVSr9l5LVUefVxicn/132","comment_is_top":false,"comment_ctime":1598014681,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1598014681","product_id":100020801,"comment_content":"æˆ‘è¦ç»™çˆ¸çˆ¸ä¹°è¾†äºŒæ‰‹è½¦(å·²ä¹°)<br>å·å¤–ï¼Œå·å¤–ï¼Œæˆ‘ç»ˆäºæŠŠå¼€å¤´ä¾‹å­ç»™å¤ç°äº†ï¼Œä¿®æ”¹å»ºè¡¨è¯­å¥ï¼ˆidè‡ªå¢ï¼‰ï¼Œå­˜å‚¨è¿‡ç¨‹ä»£ç ï¼ˆä¸è¦æŒ‡å®šidå€¼ï¼‰å¦‚ä¸‹ï¼Œå³å¯å¤ç°ä¸é€‰æ‹©ç´¢å¼•aé—®é¢˜ï¼š<br>CREATE TABLE `t` (<br>  `id` int(11) auto_increment,<br>  `a` int(11) DEFAULT NULL,<br>  `b` int(11) DEFAULT NULL,<br>  PRIMARY KEY (`id`),<br>  KEY `a` (`a`),<br>  KEY `b` (`b`)<br>) ENGINE=InnoDB;<br><br>delimiter ;;<br>create procedure idata()<br>begin<br>  declare i int;<br>  set i=1;<br>  while(i&lt;=100000)do<br>    insert into t (`a`,`b`) values(i, i);<br>    set i=i+1;<br>  end while;<br>end;;<br>delimiter ;<br><br>ä¸€ä¸ªç±³å±Œ<br>8.0.19ä¹Ÿé‡ç°äº†ã€‚ã€‚ä½†æ˜¯ä¸ºä»€ä¹ˆå‘¢<br>-----------------------------<br><br>åœ¨rræ¨¡å¼ï¼Œinnodbè¡¨ï¼Œsession aå…ˆå¼€å¯ä¸€è‡´æ€§è¯»å‰æä¸‹; session b(delete+call data())ï¼š<br>å› ä¸ºæ˜¯ç»™è‡ªå¢PKæ˜¾ç¤ºèµ‹å€¼ï¼ŒåŒæ—¶èµ‹çš„å€¼éƒ½å°äºå½“å‰è‡ªå¢å€¼auto_increment=100001ï¼Œå› æ­¤è‡ªå¢å€¼å°±ä¸å†å‘ç”Ÿå˜åŒ–<br>å³ä½¿äº‹åŠ¡aå¼€å¯ä¸€è‡´æ€§è¯»ï¼Œæ„Ÿè§‰è¢«æ ‡è®°ä¸ºdeleteçš„ç©ºé—´è¢«é‡å¤åˆ©ç”¨ï¼Œæ²¡æœ‰ç”³è¯·æ–°çš„ç©ºé—´ï¼Œç»Ÿè®¡ä¿¡æ¯æ²¡æœ‰å‘ç”Ÿå˜åŒ–<br>è¿™ä¸ªä¾‹å­ä¸­ï¼Œå› ä¸ºæ˜¾ç¤ºç»™PKèµ‹å€¼å…¶å®æ•°æ®å¹¶æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œå› æ­¤ä¹Ÿä¸å½±å“session açœ‹åˆ°çš„æ•°æ®ï¼Œå³å¯é‡å¤è¯»<br>éæ˜¾ç¤ºç»™PKèµ‹å€¼ï¼Œé‡‡ç”¨è‡ªå¢å±æ€§è‡ªåŠ¨èµ‹å€¼ï¼Œå› ä¸ºPKå€¼ä¸åŒï¼Œéœ€è¦ç”³è¯·æ–°çš„ç©ºé—´<br><br>è¯·é—®è€å¸ˆè¿™ä¹ˆç†è§£å¯¹å—ï¼Ÿ<br>","like_count":0},{"had_liked":false,"id":240052,"user_name":"prepared","can_delete":false,"product_type":"c1","uid":1194853,"ip_address":"","ucode":"00E54A5C7CDCBE","user_header":"https://static001.geekbang.org/account/avatar/00/12/3b/65/3a4fc8cf.jpg","comment_is_top":false,"comment_ctime":1596727506,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1596727506","product_id":100020801,"comment_content":"è€å¸ˆç”¨çš„ä»€ä¹ˆç‰ˆæœ¬çš„ mysql ï¼Ÿå¤ç°ä¸äº†é—®é¢˜ã€‚<br><br>EXPLAIN select * from t where a between 10000 and 20000; &#47;*Q1*&#47;<br>EXPLAIN select * from t force index(a) where a between 10000 and 20000;&#47;*Q2*&#47;<br><br>mysqlç‰ˆæœ¬ï¼š 5.7.31 MySQL Community Server (GPL)","like_count":0},{"had_liked":false,"id":238837,"user_name":"Geek_e8d55e","can_delete":false,"product_type":"c1","uid":1602239,"ip_address":"","ucode":"5F13626B0E1E45","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKyobcyicicCQoldZofsS36xrjA2R2hk2F89pu1hCqwjlRaRG4xKkgCicZibEVdOwpfN5rWjEchrsxicSQ/132","comment_is_top":false,"comment_ctime":1596339148,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1596339148","product_id":100020801,"comment_content":"Using index conditionæ˜¯æŒ‡ç´¢å¼•ä¸‹æ¨å§?ç´¢å¼•ä¹Ÿä¸æ˜¯è”åˆç´¢å¼•ï¼Œæ²¡ä»€ä¹ˆå¥½è¿‡æ»¤çš„å•Šï¼Œä¸ºå•¥ä¾‹å­ä¸­çš„å¾ˆå¤šæŸ¥è¯¢éƒ½æœ‰èµ°ç´¢å¼•ä¸‹æ¨ï¼Ÿ","like_count":0},{"had_liked":false,"id":237631,"user_name":"æŸ¥å† å‹","can_delete":false,"product_type":"c1","uid":1402749,"ip_address":"","ucode":"C0F1B5BD2CA29E","user_header":"https://static001.geekbang.org/account/avatar/00/15/67/7d/dbc8d10a.jpg","comment_is_top":false,"comment_ctime":1595905531,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1595905531","product_id":100020801,"comment_content":"è€å¸ˆå¥½ï¼Œé¢è¯•ç»å¸¸è¢«é—®åˆ°ä»€ä¹ˆæƒ…å†µä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆï¼Ÿ<br>1ã€å…³äºå­—æ®µä¸­æœ‰nullã€æˆ–è€…ä½¿ç”¨is nullå’Œis not null æ—¶ç´¢å¼•æ˜¯å¦ä¼šå¤±æ•ˆï¼Ÿ<br>2ã€è¿˜æœ‰ä½¿ç”¨oræ—¶çš„æƒ…å†µï¼Œæ¯”å¦‚orå‰å­—æ®µæœ‰ç´¢å¼•åå­—æ®µæ²¡æœ‰ç´¢å¼•ã€è”åˆç´¢å¼•ï¼ˆa, b, cï¼‰bå‰ç”¨äº†orï¼Œcè¿˜èƒ½ä½¿ç”¨ç´¢å¼•å—ï¼Ÿ<br>ç½‘ä¸Šè¯´ä»€ä¹ˆçš„éƒ½æœ‰ï¼Œè€å¸ˆèƒ½å¸®å¿™è§£ç­”ä¸€ä¸‹å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1303322,"avatar":"https://static001.geekbang.org/account/avatar/00/13/e3/1a/061e77b6.jpg","nickname":"äº¢æ˜Ÿä¸œ","note":"","ucode":"5E4063E83B2BB9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":315426,"discussion_content":"is null  is not null ä¸ä¼šèµ°ç´¢å¼•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603273447,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":236860,"user_name":"xiao.bona","can_delete":false,"product_type":"c1","uid":1064758,"ip_address":"","ucode":"183B35082F67B1","user_header":"https://static001.geekbang.org/account/avatar/00/10/3f/36/2b791093.jpg","comment_is_top":false,"comment_ctime":1595570267,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1595570267","product_id":100020801,"comment_content":"è²Œä¼¼æ²¡æœ‰é‡ç°åˆ é™¤è¡¨è®°å½•åé‡æ–°æ·»åŠ è®°å½• æ‰«æè¡Œè®°å½•çš„å˜åŒ–ã€‚<br>&#47;***********************************************************<br> session a 2020-07-24 13:25:07 <br> ***********************************************************&#47;<br>mysql&gt; start transaction with consistent snapshot;<br><br>mysql&gt; select count(*) from t; <br>&#47;* count(*) :100000 *&#47;<br><br>mysql&gt; select now(); <br>&#47;* 2020-07-24 13:26:18 *&#47;<br>mysql&gt; select count(*) from t;<br>&#47;* count(*) :100000 *&#47;<br><br><br>&#47;************************************************************************<br> session b 2020-07-24 13:25:17 <br> ************************************************************************&#47;<br>mysql&gt; select count(*) from t;<br>&#47;* count(*) :100000 *&#47;<br><br>mysql&gt; explain select * from t where a between 10000 and 20000;<br><br>| id | select_type | table | type  | possible_keys | key  | key_len | ref  | rows  | Extra       |<br>|  1 | SIMPLE      | t     | range | a             | a    | 5       | NULL | 10000 | Using where |<br><br>mysql&gt; delete from t;<br>Query OK, 100000 rows affected (0.79 sec)<br><br>mysql&gt; select now();&#47;*  2020-07-24 13:26:10 *&#47;<br>mysql&gt; select count(*) from t; &#47;* count(*) :0 *&#47;<br><br>mysql&gt; explain select * from t where a between 10000 and 20000;<br>| id | select_type | table | type  | possible_keys | key  | key_len | ref  | rows  | Extra       |<br>|  1 | SIMPLE      | t     | range | a             | a    | 5       | NULL | 10000 | Using where |<br><br>mysql&gt; call idata();<br>Query OK, 1 row affected (2.15 sec)<br><br>mysql&gt; explain select * from t where a between 10000 and 20000;<br>| id | select_type | table | type  | possible_keys | key  | key_len | ref  | rows  | Extra       |<br>|  1 | SIMPLE      | t     | range | a             | a    | 5       | NULL | 10000 | Using where |<br><br>","like_count":0},{"had_liked":false,"id":233041,"user_name":"ç«¯èµ–æŸ”å˜‰","can_delete":false,"product_type":"c1","uid":2033321,"ip_address":"","ucode":"DD08DBCF2BF76B","user_header":"https://static001.geekbang.org/account/avatar/00/1f/06/a9/308187cb.jpg","comment_is_top":false,"comment_ctime":1594200175,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1594200175","product_id":100020801,"comment_content":"è€å¸ˆè¯·é—®è”åˆç´¢å¼•åœ¨æœç´¢çš„è¿‡ç¨‹ä¸­æ˜¯æ€ä¹ˆæ‰§è¡Œçš„ï¼Ÿæ¯”å¦‚æœ‰ï¼ˆaï¼Œbï¼‰è¿™æ ·çš„è”åˆç´¢å¼• select * from table where a=1 and b=2è¿™æ ·çš„sqlè¯­å¥ã€‚æ˜¯å…ˆæ‰¾aç„¶åæ‰¾bï¼Œè¿˜æ˜¯aï¼Œbä¸€å—æ‰¾çš„ï¼Ÿ","like_count":0},{"had_liked":false,"id":230263,"user_name":"é™é™è†å¬","can_delete":false,"product_type":"c1","uid":1263932,"ip_address":"","ucode":"0A8600CB928EFE","user_header":"https://static001.geekbang.org/account/avatar/00/13/49/3c/5d54c510.jpg","comment_is_top":false,"comment_ctime":1593330537,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1593330537","product_id":100020801,"comment_content":"è€å¸ˆï¼Œå…³äºè¯¾åé—®é¢˜å›ç­”ï¼Œç¬¬ä¸‰æ¡â€œå†™ redo logã€‚è¿™ä¸ª redo log åŒ…å«äº†æ•°æ®çš„å˜æ›´å’Œ change buffer çš„å˜æ›´ã€‚â€ï¼Œæœ‰ä¸¤ç‚¹ç–‘é—®ï¼š<br>1ã€ä¹‹å‰çš„æ•°æ®å˜æ›´å·²ç»è®°å½•åˆ°redo logäº†ï¼Œä¸ºä»€ä¹ˆè¿˜è¦è®°å½•<br>2ã€change bufferçš„å˜æ›´å±äºå†…å­˜å±‚é¢çš„ï¼Œä¸ºä»€ä¹ˆè¦è®°å½•redo log","like_count":0,"discussions":[{"author":{"id":1208499,"avatar":"https://static001.geekbang.org/account/avatar/00/12/70/b3/5d27c25d.jpg","nickname":"ä¼˜ç§€æ˜¯ä¸€ç§ä¹ æƒ¯","note":"","ucode":"5131AE84B04F95","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":299789,"discussion_content":"å¦‚æœchange bufferæ²¡æœ‰åŠæ—¶merge è¦è½ç›˜åœ¨ç³»ç»Ÿè¡¨ç©ºé—´ï¼Œredolog å°±æ˜¯ç”¨æ¥å´©æºƒæ¢å¤change bufferåˆ°ç³»ç»Ÿè¡¨ç©ºé—´çš„","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1597820170,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":230189,"user_name":"æ²ˆå“’å“’","can_delete":false,"product_type":"c1","uid":2035731,"ip_address":"","ucode":"77ACC760C8FA4B","user_header":"https://static001.geekbang.org/account/avatar/00/1f/10/13/e7cf06a2.jpg","comment_is_top":false,"comment_ctime":1593306681,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1593306681","product_id":100020801,"comment_content":"è€å¸ˆï¼Œé—®ä¸ªé—®é¢˜ï¼Œæ˜¯å› ä¸ºsession Açš„åŸå› å¯¼è‡´session  Bçš„æ•°æ®æ²¡åˆ é™¤å—ï¼Œè¿˜æ˜¯deleteåˆ é™¤åï¼Œç”±äºå†™å…¥change bufferæ²¡åˆçš„åŸå› ","like_count":0,"discussions":[{"author":{"id":1208499,"avatar":"https://static001.geekbang.org/account/avatar/00/12/70/b3/5d27c25d.jpg","nickname":"ä¼˜ç§€æ˜¯ä¸€ç§ä¹ æƒ¯","note":"","ucode":"5131AE84B04F95","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":299792,"discussion_content":"sessionA mvcc ä½¿æ•°æ®æ²¡æœ‰çœŸæ­£çš„åˆ é™¤ï¼Œæ•°æ®é¡µè¿˜åœ¨ï¼Œåˆæ–°æ’å…¥çš„10wï¼Œåˆäº§ç”Ÿçš„æ–°çš„æ•°æ®é¡µ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597822116,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":228806,"user_name":"thong","can_delete":false,"product_type":"c1","uid":1369211,"ip_address":"","ucode":"C9DF492B704CD0","user_header":"https://static001.geekbang.org/account/avatar/00/14/e4/7b/2258ef5d.jpg","comment_is_top":false,"comment_ctime":1592814714,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1592814714","product_id":100020801,"comment_content":"600ä¸‡çš„è¡¨ï¼Œupdate inï¼ˆ10000ä¸ªä¸»é”®idï¼‰ï¼Œç”¨ä¸Šäº†ä¸»é”®ç´¢å¼•ï¼Œä½†æ˜¯select_typeç”±rangeå˜ä¸ºindexï¼Œå¯¼è‡´æ‰«æè¡Œæ•°é€€åŒ–éå¸¸ä¸¥é‡ï¼Œin 4000çš„æ—¶å€™è¿˜æ˜¯rangeï¼Œä¸å¤ªæ˜ç™½ä¸ºä»€ä¹ˆä¼šé€€åŒ–","like_count":0,"discussions":[{"author":{"id":1208499,"avatar":"https://static001.geekbang.org/account/avatar/00/12/70/b3/5d27c25d.jpg","nickname":"ä¼˜ç§€æ˜¯ä¸€ç§ä¹ æƒ¯","note":"","ucode":"5131AE84B04F95","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":299794,"discussion_content":"å…³é”®å­—æœindex diveï¼Œiné‡Œå€¼å¤šï¼Œå¯èƒ½é€€åŒ–å…¨è¡¨æ‰«æ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597822305,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2036786,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/14/32/e37762cb.jpg","nickname":"æ ‡å‡†ç å†œ","note":"","ucode":"F1AAA474EC0619","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":286339,"discussion_content":"æ˜¯ä¸æ˜¯æ›´æ–°çš„è¿™äº›id åˆ†å¸ƒæ¯”è¾ƒæ•£ ä¸é›†ä¸­åœ¨å‡ ä¸ªæ•°æ®é¡µå†… ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593139990,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":228192,"user_name":"æµ·é¸Ÿ","can_delete":false,"product_type":"c1","uid":1028311,"ip_address":"","ucode":"EBAF85D1EFFAAB","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b0/d7/22ce0046.jpg","comment_is_top":false,"comment_ctime":1592584392,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1592584392","product_id":100020801,"comment_content":"æ—è€å¸ˆå¥½ï¼ŒMySQL 8 å¥½åƒé‡ç°ä¸äº†è¿™ä¸ªç°è±¡ï¼Œæ˜¯ä¸æ˜¯åŠ äº†ä»€ä¹ˆç‰¹æ€§ä¼˜åŒ–è¿™å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":225497,"user_name":"along","can_delete":false,"product_type":"c1","uid":1118419,"ip_address":"","ucode":"0F44495219E0BC","user_header":"https://static001.geekbang.org/account/avatar/00/11/10/d3/157068af.jpg","comment_is_top":false,"comment_ctime":1591769915,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1591769915","product_id":100020801,"comment_content":"æˆ‘è¯•äº†ä¸¤æ¬¡éƒ½æ²¡æœ‰æˆåŠŸï¼Œæ˜¯ä»€ä¹ˆåŸå› å‘¢ï¼Ÿ<br>=======================Session B===========================<br>mysql&gt; &#47;* session B *&#47; explain select * from t where a between 10000 and 20000;<br>+----+-------------+-------+------------+-------+---------------+------+---------+------+-------+----------+-----------------------+<br>| id | select_type | table | partitions | type  | possible_keys | key  | key_len | ref  | rows  | filtered | Extra                 |<br>+----+-------------+-------+------------+-------+---------------+------+---------+------+-------+----------+-----------------------+<br>|  1 | SIMPLE      | t     | NULL       | range | a             | a    | 5       | NULL | 10001 |   100.00 | Using index condition |<br>+----+-------------+-------+------------+-------+---------------+------+---------+------+-------+----------+-----------------------+<br>1 row in set, 1 warning (0.01 sec)<br><br>mysql&gt; delete from t;<br>Query OK, 99999 rows affected (0.66 sec)<br><br>mysql&gt; call idata();<br>Query OK, 1 row affected (36.58 sec)<br><br>mysql&gt; explain select * from t where a between 10000 and 20000;<br>+----+-------------+-------+------------+-------+---------------+------+---------+------+-------+----------+-----------------------+<br>| id | select_type | table | partitions | type  | possible_keys | key  | key_len | ref  | rows  | filtered | Extra                 |<br>+----+-------------+-------+------------+-------+---------------+------+---------+------+-------+----------+-----------------------+<br>|  1 | SIMPLE      | t     | NULL       | range | a             | a    | 5       | NULL | 10001 |   100.00 | Using index condition |<br>+----+-------------+-------+------------+-------+---------------+------+---------+------+-------+----------+-----------------------+<br>1 row in set, 1 warning (0.00 sec)<br><br>=======================Session A===========================<br><br>mysql&gt; &#47;* sesson A*&#47; start transaction with consistent snapshot;<br>Query OK, 0 rows affected (0.00 sec)","like_count":0},{"had_liked":false,"id":225455,"user_name":"HaydnSyx","can_delete":false,"product_type":"c1","uid":1185263,"ip_address":"","ucode":"2B4241CD385875","user_header":"https://static001.geekbang.org/account/avatar/00/12/15/ef/84ed23fb.jpg","comment_is_top":false,"comment_ctime":1591758989,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1591758989","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæˆ‘åœ¨çº¿ä¸Šé‡åˆ°ä¸€ä¸ªç‰¹åˆ«å¥‡æ€ªçš„é—®é¢˜ï¼š<br>explain select amount, out_transaction_id, transaction_account_id from money_fund_pre_buy_order where uid = 575534929 and status in (&#39;new&#39;,&#39;wait&#39;);<br>åˆ†æå‡ºæ¥çš„ç»“æœæ˜¯å…¨è¡¨æ‰«æï¼Œä¸€ä¸ªç´¢å¼•ä¹Ÿä¸é€‰æ‹©ï¼Œ<br>+----+-------------+--------------------------+------+------------------------+------+---------+------+---------+-------------+<br>| id | select_type | table                    | type | possible_keys          | key  | key_len | ref  | rows    | Extra       |<br>+----+-------------+--------------------------+------+------------------------+------+---------+------+---------+-------------+<br>|  1 | SIMPLE      | money_fund_pre_buy_order | ALL  | idx_status_uid,idx_uid | NULL | NULL    | NULL | 2006693 | Using where |<br>+----+-------------+--------------------------+------+------------------------+------+---------+------+---------+-------------+<br>è¿™ä¸ªè¡¨çš„ç´¢å¼•ä¿¡æ¯å¦‚ä¸‹ï¼š<br>  PRIMARY KEY (`id`),<br>  UNIQUE KEY `idx_transaction_id` (`out_transaction_id`),<br>  KEY `idx_status_uid` (`status`,`uid`),<br>  KEY `idx_uid` (`uid`) USING BTREE<br>è€å¸ˆèƒ½åˆ†æä¸€ä¸‹è¿™ä¸ªå¯èƒ½äº§ç”Ÿçš„åŸå› å—","like_count":0},{"had_liked":false,"id":224002,"user_name":"shawn","can_delete":false,"product_type":"c1","uid":1010221,"ip_address":"","ucode":"8F6A8C7920996E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6a/2d/ec4ed8ce.jpg","comment_is_top":false,"comment_ctime":1591253585,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1591253585","product_id":100020801,"comment_content":"è€å¸ˆï¼Œå¯ä»¥ç”»ä¸€ä¸‹è”åˆç´¢å¼•çš„ç»“æ„å›¾ï¼Œè¿™æ ·å¯ä»¥å¾ˆå¥½çš„è§£é‡Šä¸ºä»€ä¹ˆæœ‰æœ€å·¦å‰ç¼€åŸåˆ™ã€‚","like_count":0},{"had_liked":false,"id":217981,"user_name":"Jc.Chen","can_delete":false,"product_type":"c1","uid":1180676,"ip_address":"","ucode":"36886491352CD4","user_header":"https://static001.geekbang.org/account/avatar/00/12/04/04/0af56558.jpg","comment_is_top":false,"comment_ctime":1589686052,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1589686052","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæœ‰ä¸ªé—®é¢˜ï¼š<br>æˆ‘ä»¬ç”¨ limit 100 è®©ä¼˜åŒ–å™¨æ„è¯†åˆ°ï¼Œä½¿ç”¨ b ç´¢å¼•ä»£ä»·æ˜¯å¾ˆé«˜çš„<br><br>ä¸ºå•¥limit 100 èƒ½è®©ä¼˜åŒ–å™¨æ„è¯†åˆ°ä½¿ç”¨bç´¢å¼•ä»£ä»·å¾ˆé«˜ï¼Ÿlimit 1å’Œlimit 100ä¸éƒ½æ˜¯åªæ˜¯éå†ä¸ç”¨æ’åºå—ï¼ˆå› ä¸ºbæœ‰ç´¢å¼•ï¼‰ï¼Ÿ","like_count":0},{"had_liked":false,"id":216620,"user_name":"ç§¦åŸ¹è£","can_delete":false,"product_type":"c1","uid":1495143,"ip_address":"","ucode":"DFC1EB3001730D","user_header":"https://static001.geekbang.org/account/avatar/00/16/d0/67/32a8f861.jpg","comment_is_top":false,"comment_ctime":1589297011,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1589297011","product_id":100020801,"comment_content":"ä½ å¥½ï¼Œä¸€ä¸ªè¡¨ä¸­æœ‰100æ¡è®°å½•ï¼Œè®°å½•æœ‰id è®¢å•å·å’Œä¸‹å•æ—¶é—´ï¼Œå…¶ä¸­ä¸‹å•æ—¶é—´æ˜¯ä»Šå¤©çš„æœ‰50æ¡ï¼Œä¸‹å•æ—¶é—´æœ‰ç´¢å¼•ï¼Œæ ¹æ®ä¸‹å•æ—¶é—´æŸ¥è¯¢è®°å½•ï¼Œå‘ç°æ‰§è¡Œè®¡åˆ’æ²¡æœ‰ç”¨ä¸‹å•æ—¶é—´ç´¢å¼•ï¼Œèµ°äº†å…¨è¡¨æ‰«æï¼Œä¸çŸ¥é“æ˜¯ä¸ºå•¥ï¼Œæ±‚å¸®åŠ©ï¼Œè°¢è°¢ï¼Œæ˜¯ä¼˜åŒ–å™¨åˆé€‰é”™ç´¢å¼•äº†å—","like_count":0},{"had_liked":false,"id":211998,"user_name":"è°è¿˜ä¸æ˜¯ä¸ªå°å…¬ä¸»æ˜¯å’‹æ»´","can_delete":false,"product_type":"c1","uid":1723955,"ip_address":"","ucode":"8E35446E63541A","user_header":"https://static001.geekbang.org/account/avatar/00/1a/4e/33/029194b5.jpg","comment_is_top":false,"comment_ctime":1588044159,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1588044159","product_id":100020801,"comment_content":"ä»Šå¤©é‡åˆ°äº†ä¸€ä¸ªé—®é¢˜ï¼Œå†å›æ¥çœ‹è¿™ç¯‡æ–‡ç« ,ä½†æ˜¯æ²¡æœ‰è§£å†³ã€‚å¸Œæœ›è€å¸ˆå’Œå„ä½å¤§ç¥èƒ½æŒ‡ç‚¹ä¸‹ï¼š<br>èƒŒæ™¯ï¼š<br>tè¡¨æ•°æ®:3378564<br>biz_type  int(4) Not Null<br>current_max_id bigint(20)  Not Null<br><br>sql:<br>SELECT biz_type, MAX(current_max_id) AS current_max_id,`offset` FROM t  GROUP BY biz_type<br><br>é—®é¢˜æè¿°ï¼š<br>åœ¨è¡¨t ä¸­æ·»åŠ ç´¢å¼• idx_biz_type(`biz_type`) å’Œç´¢å¼• idx_biz_current_max_id(`biz_type`,current_max_id);<br>æŸ¥çœ‹æ‰§è¡Œè®¡åˆ’,èµ°ç¬¬ä¸€ä¸ªç´¢å¼•ï¼Œken_len ä¸º4  ï¼ˆæ­£å¸¸ï¼‰<br><br>åˆ é™¤idx_biz_type(`biz_type`) å†æ¬¡æŸ¥çœ‹æ‰§è¡Œè®¡åˆ’, å¯ä»¥çœ‹åˆ°SQLèµ°äº†å¤åˆç´¢å¼•ï¼ˆbiz_type,current_max_idï¼‰ken_len ä¸º20<br><br>é—®é¢˜1ï¼šç´¢å¼•åˆ—ä¸Šæœ‰å‡½æ•°çš„è¯ï¼Œæ­¤åˆ—ä¸Šçš„ç´¢å¼•ä¼šå¤±æ•ˆå—ï¼Ÿå¦‚æœä¼šçš„è¯ï¼Œæ€ä¹ˆè¿˜ç”¨åˆ°äº†ç´¢å¼•ç¬¬äºŒåˆ—ï¼Ÿ<br>é—®é¢˜2 ï¼šä¸ºä»€ä¹ˆä¸¤ä¸ªç´¢å¼•éƒ½å­˜åœ¨çš„æƒ…å†µï¼Œä¼˜åŒ–å™¨é€‰æ‹©äº†å‰è€…ï¼Ÿ<br>","like_count":0,"discussions":[{"author":{"id":1537739,"avatar":"https://static001.geekbang.org/account/avatar/00/17/76/cb/83b62223.jpg","nickname":"çµé›¨æ—¢é›¶","note":"","ucode":"6DB62A9EB731FA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":342949,"discussion_content":"1ã€ç´¢å¼•åˆ—ä¸Šæœ‰å‡½æ•°æ˜¯æŒ‡åœ¨where æ¡ä»¶å“ªé‡Œ\n2ã€å› ä¸ºç¬¦åˆæœ€å·¦åŒ¹é…åŸåˆ™æ‰€ä»¥ç”¨äº†biz_type","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610885337,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":211003,"user_name":"baronouyang","can_delete":false,"product_type":"c1","uid":1941572,"ip_address":"","ucode":"46E6ADAF91021C","user_header":"https://static001.geekbang.org/account/avatar/00/1d/a0/44/528be246.jpg","comment_is_top":false,"comment_ctime":1587879950,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1587879950","product_id":100020801,"comment_content":"å“ˆå–½ï¼Œè€å¸ˆï¼Œæˆ‘è¿™è¾¹æœ‰ä¸ªé—®é¢˜æƒ³è¯·æ•™ä¸€ä¸‹ï¼š<br><br>æˆ‘æœ‰ä¸€ä¸ªsqlè¯­å¥explainçœ‹å·²ç»å‘½ä¸­äº†ç´¢å¼•ï¼Œæ‰«æè¡Œæ•°æœ‰13wè¡Œæ•°æ®ï¼ˆæ€»å…±56ä¸‡è¡Œæ•°æ®ï¼‰<br>ä½†æ˜¯å½“æˆ‘ä½¿ç”¨force index åï¼Œ æ‰«æè¡Œæ•°åªæœ‰4ä¸‡è¡Œï¼Œä¸çŸ¥é“æ˜¯ä»€ä¹ˆåŸå› äº†ï¼Ÿ","like_count":0},{"had_liked":false,"id":209234,"user_name":"Sparrow","can_delete":false,"product_type":"c1","uid":1693667,"ip_address":"","ucode":"88D3F3920C68BC","user_header":"https://static001.geekbang.org/account/avatar/00/19/d7/e3/e6cf6352.jpg","comment_is_top":false,"comment_ctime":1587521808,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1587521808","product_id":100020801,"comment_content":"åŸæ¥çŒœé”™äº†ï¼Œ ä»¥ä¸ºmsyqlåœ¨å¤šä¸ªç´¢å¼•æŸ¥è¯¢çš„æ—¶å€™ï¼Œä¼šå–å‡ºæ¯ä¸ªç´¢å¼•çš„æŸ¥è¯¢ç»“æœï¼Œåšä¸ªäº¤é›†å†å›è¡¨ã€‚<br>æ¯”å¦‚<br>select * from t where (a between 1 and 1000)  and (b between 50000 and 100000) ï¼›è¿™ä¸ªè¯­å¥<br>å…ˆå–å‡ºa åœ¨0~1000çš„ä¸»é”®é›†åˆï¼Œ  ç„¶åå†å–å‡ºbåœ¨50000~100000çš„ä¸»é”®é›†åˆï¼Œ åšä¸ªäº¤é›†è¿ç®—ï¼Œç„¶åå›è¡¨å–å‡ºæ•°æ®ã€‚<br>è¯·é—®ä¸è¿™ä¹ˆåšæ˜¯å› ä¸ºæ€§ä»·æ¯”é—®é¢˜å—ï¼Ÿæ¯”å¦‚åªèƒ½ç”¨äºå…¨éƒ¨ç´¢å¼•æŸ¥è¯¢çš„æƒ…å†µï¼Œäº¤é›†å¤šäº†æ€§èƒ½æ›´å·®ï¼Œ è¿˜æœ‰å®ç°å¤æ‚åº¦çš„åŸå› ï¼Ÿ<br><br>æœ‰æ²¡æœ‰è¿™ä¹ˆå®ç°æŸ¥è¯¢çš„æ•°æ®åº“ï¼Ÿ<br>","like_count":0},{"had_liked":false,"id":208808,"user_name":"çº¢é¢œé“­å¿ƒ","can_delete":false,"product_type":"c1","uid":1889026,"ip_address":"","ucode":"18F94E5444C71A","user_header":"","comment_is_top":false,"comment_ctime":1587441235,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1587441235","product_id":100020801,"comment_content":"è€å¸ˆï¼Œç´¢å¼•åŸºæ•°è¯»å–çš„æ˜¯index pageï¼Œå¹¶ä¸æ˜¯data pageã€‚è¿˜æœ‰change bufferä¹Ÿåªæ˜¯ä¼˜åŒ–éå”¯ä¸€äºŒçº§ç´¢å¼•çš„æ›´æ–°æ“ä½œï¼Œ<br>é’ˆå¯¹çš„ä¹Ÿæ˜¯index pageï¼Œè€Œä¸æ˜¯data pageã€‚è¾›è‹¦åœ¨æ–‡ä¸­æ›´æ­£ä¸‹ã€‚","like_count":0},{"had_liked":false,"id":204884,"user_name":"englefly","can_delete":false,"product_type":"c1","uid":1145907,"ip_address":"","ucode":"E3FCF19E618718","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ep2gRIticwS6CiatsCiaU4QRjAODKibQevrhSciatrmd90lNIZFxywE9yyZgAxKTmWiaBSH4zZUcRIV46qQ/132","comment_is_top":false,"comment_ctime":1586486633,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1586486633","product_id":100020801,"comment_content":"æ—è€å¸ˆï¼Œæ‚¨å¥½ï¼Œæœ‰ä¸€ä¸ªhash ç´¢å¼•çš„é—®é¢˜æƒ³è¯·æ•™ä¸€ä¸‹ã€‚<br>mysql é‡Œ ä¸€ä¸ª hash ç´¢å¼•ä¼šåˆ›å»ºå¤šå°‘ä¸ª bucketå‘¢ï¼Ÿä¸€èˆ¬æ¥è¯´bucketæ•°é‡ å’Œ è¢«hashå…ƒç´ çš„æ•°é‡æœ‰å¾ˆå¼ºçš„å…³ç³»ï¼Œæ¯”å¦‚æ˜¯1.5å€ã€‚ä½†æ•°æ®åº“è¡¨ä¸­tupleçš„æ•°é‡æ˜¯å˜åŒ–çš„ï¼Œè€Œä¸”å»ºç´¢å¼•çš„æ—¶å€™è¡¨å¯èƒ½æ˜¯ç©ºçš„ï¼Œé‚£mysqlæ€ä¹ˆçŸ¥é“åº”è¯¥å»ºå¤šå°‘ä¸ªbucketå‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":198848,"user_name":"Ryan","can_delete":false,"product_type":"c1","uid":1667987,"ip_address":"","ucode":"95BBBEE5B23878","user_header":"https://static001.geekbang.org/account/avatar/00/19/73/93/0a3a1e5b.jpg","comment_is_top":false,"comment_ctime":1585470428,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585470428","product_id":100020801,"comment_content":"åˆ¤æ–­æ‰«æè¡Œæ•°ï¼šMySQL åœ¨çœŸæ­£å¼€å§‹æ‰§è¡Œè¯­å¥ä¹‹å‰ï¼Œå¹¶ä¸èƒ½ç²¾ç¡®åœ°çŸ¥é“æ»¡è¶³è¿™ä¸ªæ¡ä»¶çš„è®°å½•æœ‰å¤šå°‘æ¡ï¼Œè€Œåªèƒ½æ ¹æ®ç»Ÿè®¡ä¿¡æ¯æ¥ä¼°ç®—è®°å½•æ•°ã€‚è¿™ä¸ªç»Ÿè®¡ä¿¡æ¯å°±æ˜¯ç´¢å¼•çš„â€œåŒºåˆ†åº¦â€ã€‚æ˜¾ç„¶ï¼Œä¸€ä¸ªç´¢å¼•ä¸Šä¸åŒçš„å€¼è¶Šå¤šï¼Œè¿™ä¸ªç´¢å¼•çš„åŒºåˆ†åº¦å°±è¶Šå¥½ã€‚è€Œä¸€ä¸ªç´¢å¼•ä¸Šä¸åŒçš„å€¼çš„ä¸ªæ•°ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºâ€œåŸºæ•°â€ï¼ˆcardinalityï¼‰ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸ªåŸºæ•°è¶Šå¤§ï¼Œç´¢å¼•çš„åŒºåˆ†åº¦è¶Šå¥½ã€‚","like_count":0},{"had_liked":false,"id":194057,"user_name":"å–»èŒ‚","can_delete":false,"product_type":"c1","uid":1318661,"ip_address":"","ucode":"C8BD8086A17365","user_header":"https://static001.geekbang.org/account/avatar/00/14/1f/05/8a06692e.jpg","comment_is_top":false,"comment_ctime":1585019917,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585019917","product_id":100020801,"comment_content":"10.1.34-MariaDB  å°±ç®—æœ‰äº‹åŠ¡é…åˆä¹Ÿæ²¡æœ‰å‡ºç°ä¸Šé¢çš„æƒ…å†µï¼Œshow index from t; Cardinalityå€¼éƒ½æ˜¯1ä¸‡å¤š","like_count":0},{"had_liked":false,"id":190980,"user_name":"å—å±±","can_delete":false,"product_type":"c1","uid":1119593,"ip_address":"","ucode":"94656FE4A6C378","user_header":"https://static001.geekbang.org/account/avatar/00/11/15/69/187b9968.jpg","comment_is_top":false,"comment_ctime":1584715668,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1584715668","product_id":100020801,"comment_content":"çœŸå®é‡åˆ°è¿‡é€‰é”™ç´¢å¼•ï¼Œå½“æ—¶åªæ˜¯ç”¨force indexè§£å†³ï¼Œæ²¡ç»†æƒ³åŸç†","like_count":0},{"had_liked":false,"id":188123,"user_name":"å“ˆå¯†é”…å„¿","can_delete":false,"product_type":"c1","uid":1792142,"ip_address":"","ucode":"35B34503F530AB","user_header":"https://static001.geekbang.org/account/avatar/00/1b/58/8e/97b20eb3.jpg","comment_is_top":false,"comment_ctime":1584322936,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584322936","product_id":100020801,"comment_content":"MySQLé‡‡æ ·ç»Ÿè®¡è®¡ç®—ç´¢å¼•åŒºåˆ†åº¦çš„æ—¶å€™ï¼Œæœ‰æ—¶å‡†æœ‰æ—¶ä¸å‡†ï¼Œä¸ç¡®åˆ‡çš„è¯´ï¼Œè¿™æ˜¯ä¸€ä¸ªæ¦‚ç‡é—®é¢˜ã€‚å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œä¼šæŠŠç´¢å¼•å»ºç«‹åœ¨ç´¢å¼•åŒºåˆ†åº¦é«˜çš„åˆ—ä¸Šï¼Œå¦‚æœç´¢å¼•åŒºåˆ†åº¦å¾ˆä½ï¼Œé‚£ä¹ˆå°±ç®—å»ºç«‹ç´¢å¼•ï¼ŒæŸ¥è¯¢æ•ˆç‡ä¹Ÿä¸é«˜ã€‚","like_count":0},{"had_liked":false,"id":187216,"user_name":"æ·±ç™½è‰²","can_delete":false,"product_type":"c1","uid":1123171,"ip_address":"","ucode":"C4B26AB70D8A6D","user_header":"https://static001.geekbang.org/account/avatar/00/11/23/63/4fb6fee0.jpg","comment_is_top":false,"comment_ctime":1584062807,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584062807","product_id":100020801,"comment_content":"å¾ˆç–‘æƒ‘ï¼Œå¹¶æ²¡æœ‰å¤ç°æˆåŠŸã€‚<br>Server version: 5.7.28-log MySQL Community Server (GPL)<br><br>session A:<br>mysql&gt; start transaction with consistent snapshot;<br>Query OK, 0 rows affected (0.00 sec)<br>--ä¸­é—´ç­‰å¾…session Bçš„æ“ä½œ<br>mysql&gt; commit;<br>Query OK, 0 rows affected (0.00 sec)<br><br><br>session B:<br>mysql&gt; select @@global.tx_isolation;<br>+-----------------------+<br>| @@global.tx_isolation |<br>+-----------------------+<br>| REPEATABLE-READ       |<br>+-----------------------+<br>1 row in set, 1 warning (0.00 sec)<br><br>mysql&gt; delete from t;<br>Query OK, 100000 rows affected (1.09 sec)<br><br>mysql&gt; call idata();<br>Query OK, 1 row affected (34.93 sec)<br><br>mysql&gt; explain select * from t where a between 10000 and 20000;<br>+----+-------------+-------+------------+-------+---------------+------+---------+------+-------+----------+-----------------------+<br>| id | select_type | table | partitions | type  | possible_keys | key  | key_len | ref  | rows  | filtered | Extra                 |<br>+----+-------------+-------+------------+-------+---------------+------+---------+------+-------+----------+-----------------------+<br>|  1 | SIMPLE      | t     | NULL       | range | a             | a    | 5       | NULL | 10001 |   100.00 | Using index condition |<br>+----+-------------+-------+------------+-------+---------------+------+---------+------+-------+----------+-----------------------+<br>1 row in set, 1 warning (0.00 sec)<br>","like_count":0},{"had_liked":false,"id":184493,"user_name":"å¤©å¤©å‘ä¸Š","can_delete":false,"product_type":"c1","uid":1242455,"ip_address":"","ucode":"0CCCA6F4DCC480","user_header":"https://static001.geekbang.org/account/avatar/00/12/f5/57/ce10fb1b.jpg","comment_is_top":false,"comment_ctime":1583328354,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1583328354","product_id":100020801,"comment_content":"ï¼ˆ1ï¼‰change buffer çš„æ“ä½œä¹Ÿè®°å½•åˆ° redo log é‡Œï¼Œå’Œï¼ˆ2ï¼‰ merge çš„æ‰§è¡Œæµç¨‹ä¸­ï¼Œå†™ redo logã€‚è¿™ä¸ª redo log åŒ…å«äº†æ•°æ®çš„å˜æ›´å’Œ change buffer çš„å˜æ›´ï¼Œä¸¤ä¸ªæ˜¯å¦é‡å¤å‘¢ï¼Ÿ<br>1ä¸­å·²ç»è®°å½•redo logäº†ï¼Œä¹‹åè½ç›˜ï¼Œé‚£2ä¸­è·å–åˆ°çš„æ–°æ•°æ®é¡µä¸­æ˜¯ä»ç£ç›˜è·å–çš„ï¼Œåº”è¯¥å°±åŒ…å«äº†change bufferä¸­çš„æ•°æ®äº†å§ï¼Œé‚£å°±æ²¡æœ‰å¿…è¦mergeäº†å§ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1208499,"avatar":"https://static001.geekbang.org/account/avatar/00/12/70/b3/5d27c25d.jpg","nickname":"ä¼˜ç§€æ˜¯ä¸€ç§ä¹ æƒ¯","note":"","ucode":"5131AE84B04F95","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":299799,"discussion_content":"change bufferæ²¡æœ‰åŠæ—¶mergeè¦è½ç›˜ï¼Œå­˜åœ¨ç³»ç»Ÿè¡¨ç©ºé—´ï¼Œï¼ˆ1ï¼‰ä¸­redologç›®çš„æ¢å¤ç³»ç»Ÿè¡¨ç©ºé—´çš„change bufferã€‚ï¼ˆ2ï¼‰ä¸­redo log å°±æ˜¯æ­£å¸¸æ•°æ®é¡µçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597824041,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":183073,"user_name":"ipofss","can_delete":false,"product_type":"c1","uid":1018620,"ip_address":"","ucode":"DE3061C9259F9E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8a/fc/d1dd57dd.jpg","comment_is_top":false,"comment_ctime":1582948655,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1582948655","product_id":100020801,"comment_content":"è‹¥åç»­å‡ºç°ç´¢å¼•é€‰æ‹©å¤±è´¥çš„åœºæ™¯ï¼Œå¯ä»¥è¿™æ ·åšï¼š<br>1ã€ä½¿ç”¨force index<br>2ã€è°ƒæ•´sqlè¯­å¥<br>3ã€è°ƒæ•´ç´¢å¼•ï¼ŒåŠ ç´¢å¼•ï¼Œå‡ç´¢å¼•<br><br>ä½†å½’æ ¹ç»“åº•ï¼ŒMySQLçš„é—®é¢˜è¿˜æ˜¯åº”è¯¥æœ‰MySQLæ¥è§£å†³ï¼Œç›¸ä¿¡åœ¨åç»­çš„ç‰ˆæœ¬ä¸­ä¼šè§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ–è€…åœ¨è¿›è¡Œä¼˜åŒ–ï¼Œä½¿å‡ºç°é€‰é”™ç´¢å¼•çš„caseæ›´å°‘","like_count":0},{"had_liked":false,"id":182990,"user_name":"ä¹”ä¸¹","can_delete":false,"product_type":"c1","uid":1217413,"ip_address":"","ucode":"D832A9F97A0C7E","user_header":"https://static001.geekbang.org/account/avatar/00/12/93/85/f5d9474c.jpg","comment_is_top":false,"comment_ctime":1582902571,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1582902571","product_id":100020801,"comment_content":"è¿™èŠ‚è¯¾çš„éš¾åº¦æ²¡æœ‰ä¸ŠèŠ‚è¯¾é‚£ä¹ˆé«˜ã€‚å“ˆå“ˆã€‚<br>è¿™èŠ‚è¯¾çš„æ ¸å¿ƒå°±æ˜¯ï¼šmysqlçš„ä¼˜åŒ–å™¨å¯èƒ½ä¼šé€‰é”™ç´¢å¼•ã€‚<br>ä¸ºå•¥ä¼šé€‰é”™ç´¢å¼•å‘¢ï¼Ÿ <br>è¿™å°±å¯¼å‡ºäº†é€‰ç´¢å¼•çš„ç‚¹ï¼ˆè¡Œæ•°ï¼Œæ˜¯å¦ä¸ºä¸´æ—¶è¡¨ï¼Œæ˜¯å¦æ’åºç­‰ï¼‰ï¼›å¦‚ä½•è§£å†³é€‰é”™ç´¢å¼•çš„é—®é¢˜ï¼Ÿ","like_count":0},{"had_liked":false,"id":179853,"user_name":"Casper","can_delete":false,"product_type":"c1","uid":1022129,"ip_address":"","ucode":"69282EB175B48E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/98/b1/f89a84d0.jpg","comment_is_top":false,"comment_ctime":1582111215,"is_pvip":true,"discussion_count":0,"race_medal":5,"score":"1582111215","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæˆ‘å¤ç°å‡ºæ¥çš„æƒ…å†µå¾ˆè¯¡å¼‚,  æ•°æ®åº“ç‰ˆæœ¬æ˜¯ mysql5.6.42, ç¡®è®¤å¼€å¯äº†RRï¼Œæ…¢æŸ¥è¯¢æ—¥å¿—æ˜¯:<br># Time: 200219 11:17:24<br># User@Host: root[root] @ localhost []  Id:     6<br># Query_time: 0.042119  Lock_time: 0.000256 Rows_sent: 10001  Rows_examined: 100000<br>SET timestamp=1582111044;<br>select * from t where a between 10000 and 20000;<br># Time: 200219 11:17:32<br># User@Host: root[root] @ localhost []  Id:     6<br># Query_time: 0.034305  Lock_time: 0.000269 Rows_sent: 10001  Rows_examined: 10001<br>SET timestamp=1582111052;<br>select * from t force index(a) where a between 10000 and 20000;<br><br>è¿˜æœ›è€å¸ˆè§£æƒ‘ä¸€ä¸‹, è°¢è°¢è€å¸ˆã€‚","like_count":0},{"had_liked":false,"id":177393,"user_name":"å°äºˆ","can_delete":false,"product_type":"c1","uid":1442580,"ip_address":"","ucode":"3F5EAEE1746074","user_header":"https://static001.geekbang.org/account/avatar/00/16/03/14/e9ca2d09.jpg","comment_is_top":false,"comment_ctime":1581387048,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1581387048","product_id":100020801,"comment_content":"select * from t where a between 10000 and 20000; è¿™ä¸ªä¾‹å­æˆ‘æŒ‰è€å¸ˆçš„æ“ä½œï¼ŒMySQLæ²¡æœ‰é€‰é”™ç´¢å¼•ï¼Œæ˜¯MySQLçš„ç‰¹å®šç‰ˆæœ¬æ‰æœ‰è¿™ä¸ªé—®é¢˜ä¹ˆï¼Œæˆ‘çš„ç‰ˆæœ¬æ˜¯5.7.27","like_count":0},{"had_liked":false,"id":175213,"user_name":"æ˜Ÿä¹‹æ‰€åœ¨","can_delete":false,"product_type":"c1","uid":1247574,"ip_address":"","ucode":"03ADB0ADD5FC27","user_header":"https://static001.geekbang.org/account/avatar/00/13/09/56/2628852c.jpg","comment_is_top":false,"comment_ctime":1580617474,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1580617474","product_id":100020801,"comment_content":"æˆ‘ä¹‹å‰ä¹Ÿé‡åˆ°ç±»ä¼¼é—®é¢˜ï¼Œmysqlä¼˜åŒ–å™¨é€‰æ‹©","like_count":0},{"had_liked":false,"id":174411,"user_name":"ä¸ç‹¼å…±èˆ","can_delete":false,"product_type":"c1","uid":1391144,"ip_address":"","ucode":"02AC04B43F0194","user_header":"https://static001.geekbang.org/account/avatar/00/15/3a/28/cf707831.jpg","comment_is_top":false,"comment_ctime":1580195960,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1580195960","product_id":100020801,"comment_content":"ä¸çŸ¥é“æ˜¯ä¸æ˜¯å› ä¸ºæˆ‘ä½¿ç”¨çš„æ˜¯mysql8.0ç‰ˆæœ¬çš„é—®é¢˜ï¼Œæ–‡ç« çš„è¿™ä¸ªé—®é¢˜æ²¡æœ‰é‡ç°æˆåŠŸã€‚","like_count":0},{"had_liked":false,"id":174223,"user_name":"é£˜é€¸çš„ç¿”äº‘","can_delete":false,"product_type":"c1","uid":1254012,"ip_address":"","ucode":"0E756D3AC3D889","user_header":"https://static001.geekbang.org/account/avatar/00/13/22/7c/7169323f.jpg","comment_is_top":false,"comment_ctime":1580096364,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1580096364","product_id":100020801,"comment_content":"æ¯æ¬¡éƒ½å¥½è®¤çœŸåœ°çœ‹è¯„è®ºï¼Œè€å¸ˆæ€»èƒ½å¾ˆè´Ÿè´£åœ°å›ç­”é—®é¢˜ã€‚å¥½å¤šæ—¶å€™è¯„è®ºæ›´ç²¾å½©ï¼Œèƒ½å­¦åˆ°æ›´å¤šç»†èŠ‚çš„çŸ¥è¯†ï¼Œè¿˜èƒ½åŠ æ·±äº†å¯¹æ–‡ç« çŸ¥è¯†ç‚¹åŸç†çš„ç†è§£ã€‚","like_count":0},{"had_liked":false,"id":172362,"user_name":"åˆ˜ç¾¤é¾™é¾™","can_delete":false,"product_type":"c1","uid":1322832,"ip_address":"","ucode":"2084A841E9208F","user_header":"https://static001.geekbang.org/account/avatar/00/14/2f/50/fdb594d9.jpg","comment_is_top":false,"comment_ctime":1579161207,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1579161207","product_id":100020801,"comment_content":"æˆ‘ç”¨ç›¸åŒçš„æ“ä½œæ“ä½œè‡ªå·±çš„æ•°æ®åº“ æˆ‘çš„æ•°æ®åº“ç‰ˆæœ¬æ˜¯mysql5.7.28   å›¾äºŒå¤ç°ä¾æ—§ç”¨åˆ°äº† aç´¢å¼• è¿™ä¸ªæ˜¯ï¼Ÿ","like_count":0},{"had_liked":false,"id":171999,"user_name":"Ethan","can_delete":false,"product_type":"c1","uid":1276373,"ip_address":"","ucode":"016F1DEBA895B8","user_header":"https://static001.geekbang.org/account/avatar/00/13/79/d5/4a7971fc.jpg","comment_is_top":false,"comment_ctime":1579067580,"is_pvip":true,"discussion_count":0,"race_medal":1,"score":"1579067580","product_id":100020801,"comment_content":"æ­¥éª¤ï¼š<br>explain select * from t force index(a) where a between 1 and 100000;<br><br>ç»“æœï¼š<br>rows=50128<br><br>é—®é¢˜ï¼š<br>è¿™é‡Œæƒ³è¦æŸ¥è¯¢çš„æ˜¯å…¨è¡¨çš„æ•°æ®ï¼Œä¸ºä»€ä¹ˆä½¿ç”¨ç´¢å¼• a ï¼Œä¼˜åŒ–å™¨æ˜¾ç¤ºçš„éœ€è¦çš„æ‰«æç»“æœæ˜¯ï¼š50128ï¼Œè¿™é‡Œæˆ‘çš„ç†è§£åº”è¯¥æ˜¯å…¨è¡¨çš„æ•°æ®è¡Œæ•°æ‰å¯¹å•Šã€‚<br>æ¥ç€å‘ç°å½“ between 1 åˆ° 50000 åŠä¹‹ä¸Šçš„ rows çš„å€¼åŸºæœ¬éƒ½æ˜¯ä¸€æ ·çš„ã€‚<br><br><br><br>","like_count":0},{"had_liked":false,"id":167416,"user_name":"lyt","can_delete":false,"product_type":"c1","uid":1526706,"ip_address":"","ucode":"8C179F339C2A27","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/OwolYO3ppfrxTcX81cswxNkD4tIlHM7vrnfroMzoTx878mDCnfJ3esicvbhm7ricUAbR7T9DjEDstVklh9z6uzjQ/132","comment_is_top":false,"comment_ctime":1577788117,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1577788117","product_id":100020801,"comment_content":"å’Œè€å¸ˆè¯´çš„æ‰§è¡Œæ­¥éª¤ä¸€æ ·ï¼Œå¼€å§‹çº§åˆ«ä¹Ÿæ˜¯å¯é‡å¤è¯»ï¼Œä½†è¯•äº†å‡ éï¼Œéƒ½æ²¡æœ‰å‡ºç°é€‰é”™ç´¢å¼•çš„ç»“æœ","like_count":0},{"had_liked":false,"id":160306,"user_name":"é•¿æœŸè§„åˆ’","can_delete":false,"product_type":"c1","uid":1019332,"ip_address":"","ucode":"5EF65E9115834B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8d/c4/6f97daea.jpg","comment_is_top":false,"comment_ctime":1575916424,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575916424","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæœ‰æ²¡æœ‰æŒ‡æ ‡å¯ä»¥ç›‘æµ‹åˆ°ç´¢å¼•è¯¥æ›´æ–°äº†ï¼Ÿè¿™èŠ‚è¯¾æ‡‚äº†ï¼Œä½†é—®é¢˜æ˜¯ï¼Œæˆ‘æ— æ³•å†³å®šä½•æ—¶æ›´æ–°ç´¢å¼•","like_count":0},{"had_liked":false,"id":156536,"user_name":"æ«","can_delete":false,"product_type":"c1","uid":1310357,"ip_address":"","ucode":"819CA7B97DD7E2","user_header":"https://static001.geekbang.org/account/avatar/00/13/fe/95/39856e4e.jpg","comment_is_top":false,"comment_ctime":1574907025,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1574907025","product_id":100020801,"comment_content":"é¢ï¼Œæˆ‘ä»¥å‰ä»¥ä¸ºç”¨between andæ˜¯å‡½æ•°ä¸èµ°ç´¢å¼•å‘¢ã€‚ã€‚ã€‚","like_count":0},{"had_liked":false,"id":154007,"user_name":"Return12321","can_delete":false,"product_type":"c1","uid":1134694,"ip_address":"","ucode":"F7A3C5ED02E1D9","user_header":"https://static001.geekbang.org/account/avatar/00/11/50/66/047ee060.jpg","comment_is_top":false,"comment_ctime":1574346092,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1574346092","product_id":100020801,"comment_content":"åœ¨MySQL8.0.18ä¸Šä»ä¸Šåˆ°ä¸‹æŒ‰ç…§æ—¶é—´é¡ºåºæ‰§è¡Œäº†å›¾1ä¸­çš„è¯­å¥ï¼Œå°±æ˜¯æ²¡å‡ºç°å›¾1ä¸­çš„ç»“æœï¼Œæ˜¯å¦è¢«ä¼˜åŒ–æ‰äº†ï¼Ÿï¼Ÿï¼Ÿ","like_count":0},{"had_liked":false,"id":152280,"user_name":"é•¿æœŸè§„åˆ’","can_delete":false,"product_type":"c1","uid":1019332,"ip_address":"","ucode":"5EF65E9115834B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8d/c4/6f97daea.jpg","comment_is_top":false,"comment_ctime":1573958761,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1573958761","product_id":100020801,"comment_content":"æ–‡æœ«é—®é¢˜ï¼šæˆ‘ç†è§£æ˜¯å›æ»šæ®µçš„åŸå› å§ï¼Ÿæ•°æ®å¹¶æ²¡æœ‰åˆ é™¤ï¼Ÿ","like_count":0},{"had_liked":false,"id":151393,"user_name":"Geek_3004e0","can_delete":false,"product_type":"c1","uid":1732823,"ip_address":"","ucode":"441D39BDC39E4A","user_header":"https://static001.geekbang.org/account/avatar/00/1a/70/d7/d1049bae.jpg","comment_is_top":false,"comment_ctime":1573713034,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1573713034","product_id":100020801,"comment_content":"ä½¿ç”¨çš„8.0.16ç‰ˆæœ¬çš„mysqlï¼Œå¼€å¯äº†innodb_stats_include_delete_markedï¼Œç´¢å¼•ç»Ÿè®¡é”™è¯¯æ²¡æœ‰å¤ç°ã€‚è§‰å¾—è¿™ä¸ªé…ç½®å°±æ˜¯è§£å†³æ ‡è®°ä¸ºdeleteçš„è¡Œè¢«ç»Ÿè®¡çš„é—®é¢˜çš„ã€‚ä¸çŸ¥é“ç†è§£çš„å¯¹ä¸å¯¹ï¼Ÿ","like_count":0},{"had_liked":false,"id":150912,"user_name":"èåœæ¡","can_delete":false,"product_type":"c1","uid":1692713,"ip_address":"","ucode":"4BC975BBFE50A7","user_header":"https://static001.geekbang.org/account/avatar/00/19/d4/29/5f52a82c.jpg","comment_is_top":false,"comment_ctime":1573626052,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1573626052","product_id":100020801,"comment_content":"ä½ å¥½ï¼Œè¯·æ•™ä¸€ä¸ªé—®é¢˜ï¼šä¸ºä»€ä¹ˆorder by b limit 1å’Œorder by b limit 100ä¸­ï¼Œä¼˜åŒ–å™¨ä¼šåˆ†åˆ«ä½¿ç”¨ç´¢å¼•bå’Œç´¢å¼•aå‘¢ï¼Ÿæ—¢ç„¶ç´¢å¼•bå·²ç»æ˜¯æœ‰åºçš„äº†ï¼Œ1å’Œ100ä¸ºä»€ä¹ˆ100ä»£ä»·å¤§å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":150586,"user_name":"learn more","can_delete":false,"product_type":"c1","uid":1128702,"ip_address":"","ucode":"0EF628B2E0F95E","user_header":"https://static001.geekbang.org/account/avatar/00/11/38/fe/00ddeb81.jpg","comment_is_top":false,"comment_ctime":1573563192,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1573563192","product_id":100020801,"comment_content":"ä½¿ç”¨ä½œè€…çš„æ’å…¥è¯­å¥ï¼ŒåŠä¸ªå°æ—¶äº†è¿˜æ²¡æ‰§è¡Œå®Œæˆï¼Œåé¢æ”¹æˆäº† insert into values(),() ï¼Œ 100000 æ¡è®°å½•åªè¦ 5.44ç§’ã€‚<br>JavaScript <br>var str = &quot;insert into t(id,a,b) values&quot;;<br>for(var i = 0 ;i &lt; 100000; i++){<br><br>\tstr += &quot;(&quot;;<br>\tstr += i+&quot;,&quot;+i+&quot;,&quot;+i;<br>\tstr += &quot;)&quot;;<br>\tif(i &lt; 99999){<br>\t\tstr += &quot;,&quot;;<br>\t}<br>}<br>console.info(str); <br>","like_count":0},{"had_liked":false,"id":148248,"user_name":"æ˜å¤©æœ‰ä½ ","can_delete":false,"product_type":"c1","uid":1183001,"ip_address":"","ucode":"C673E13D0E6540","user_header":"https://static001.geekbang.org/account/avatar/00/12/0d/19/8cf1a9d2.jpg","comment_is_top":false,"comment_ctime":1572963529,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1572963529","product_id":100020801,"comment_content":"æˆ‘åœ¨win10ä¸Šé¢å®‰è£…äº†vmwareæ¥å®‰è£…äº†ä¸€ä¸ªcentos7ï¼Œåœ¨è¿™ä¸ªcentos7é‡Œé¢å®‰è£…äº† 5.6.44-log MySQL Community Server (GPL)ï¼Œç„¶åæˆ‘åœ¨win10ä¸Šæ‰“å¼€ä¸¤ä¸ªcmdçª—å£Aã€Bã€‚ä¸¤ä¸ªçª—å£éƒ½è¿æ¥åˆ°äº†centos7é‡Œé¢çš„mysqlã€‚A æ‰§è¡Œäº†  set autocommit=0; start TRANSACTION WITH CONSISTENT SNAPSHOT; è¯­å¥ï¼ŒB æ‰§è¡Œäº† DELETE from t;CALL idata();set long_query_time=0; select * from t where a between 10000 and 20000; select * from t force index(a) where a between 10000 and 20000; è¯­å¥ï¼Œä¸¤æ¡select è¯­å¥çš„æŸ¥è¯¢æ—¶é—´åªç›¸å·®äº†0.0001ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œé‡ç°ä¸äº†æœ¬è¯¾ç¨‹çš„å†…å®¹ã€‚æˆ‘çš„é—®é¢˜å‡ºç°åœ¨å“ªé‡Œå‘¢ï¼Œæœ›å„ä½æŒ‡å¯¼ä¸€ä¸‹ã€‚","like_count":0},{"had_liked":false,"id":148084,"user_name":"å°ç°ç°zyh","can_delete":false,"product_type":"c1","uid":1323362,"ip_address":"","ucode":"47C5B1C7002FCD","user_header":"https://static001.geekbang.org/account/avatar/00/14/31/62/103e276b.jpg","comment_is_top":false,"comment_ctime":1572939597,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1572939597","product_id":100020801,"comment_content":"è€å¸ˆï¼Œè¯·æ•™ä¸ªé—®é¢˜ï¼Œå¦‚æœwhereæ¡ä»¶where a=? and b=? and c=? and d=?ã€‚å¦‚æœcå’Œdå­—æ®µå»ºç«‹äº†è”åˆç´¢å¼•ï¼Œé‚£ä¹ˆæœ€ç»ˆè¿™æ¡sqlæ‰§è¡Œçš„æ—¶å€™ä¼šèµ°è”åˆç´¢å¼•å—ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1005391,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","nickname":"ä¸€æ­¥","note":"","ucode":"73CEA468CE70C3","race_medal":1,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":49245,"discussion_content":"åœ¨ c çš„æŸ¥è¯¢æ¡ä»¶äº†ä¼šèµ°è”åˆç´¢å¼•çš„ï¼Œwhere åé¢çš„æ¡ä»¶é¡ºåºæ˜¯æ²¡æœ‰å…³ç³»ï¼Œä¼˜åŒ–å™¨ä¼šé€‰æ‹©æœ€ä¼˜çš„é¡ºåº","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573566681,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":145015,"user_name":"xinglichea","can_delete":false,"product_type":"c1","uid":1176447,"ip_address":"","ucode":"986DA07BF3CA89","user_header":"https://static001.geekbang.org/account/avatar/00/11/f3/7f/2dd9409b.jpg","comment_is_top":false,"comment_ctime":1572160732,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1572160732","product_id":100020801,"comment_content":"åˆ°è¿™é‡Œ merge è¿‡ç¨‹å°±ç»“æŸäº†ã€‚è¿™æ—¶å€™ï¼Œæ•°æ®é¡µå’Œå†…å­˜ä¸­ change buffer å¯¹åº”çš„ç£ç›˜ä½ç½®éƒ½è¿˜æ²¡æœ‰ä¿®æ”¹ï¼Œå±äºè„é¡µï¼Œä¹‹åå„è‡ªåˆ·å›è‡ªå·±çš„ç‰©ç†æ•°æ®ï¼Œå°±æ˜¯å¦å¤–ä¸€ä¸ªè¿‡ç¨‹äº†ã€‚<br>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”<br>è€å¸ˆï¼Œè¯·é—®ä¸‹ï¼Œå†…å­˜ä¸­çš„æ•°æ®é¡µå’Œchange bufferåˆ·ç›˜ï¼Œé™¤äº†checkpointæœºåˆ¶è§¦å‘ï¼Œè¿˜æœ‰å…¶å®ƒçš„è§¦å‘æœºåˆ¶å—ï¼Ÿæ‚¨åœ¨ï¼Œç¬¬äºŒèŠ‚çš„ç•™è¨€æœ‰æåˆ°è¿‡ç¬¬10è®²ä¼šè®²ï¼Œä½†å…¨ç¯‡æ²¡æœ‰è®²çš„ï¼Œå¸Œæœ›è€å¸ˆæŒ‡ç‚¹ä¸‹ï¼Œéå¸¸æ„Ÿè°¢","like_count":0},{"had_liked":false,"id":134407,"user_name":"å®¶ä¹","can_delete":false,"product_type":"c1","uid":1301941,"ip_address":"","ucode":"94F8720B59F221","user_header":"https://wx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEJia90ErsTQtNDNeyTWNwWjicERicXj72b4xgbvru2IkUdrLxrgJb5lCrTaiaW2iaX3mOYiaV8vYo3voWlg/132","comment_is_top":false,"comment_ctime":1568820132,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1568820132","product_id":100020801,"comment_content":"çœŸçš„å¾ˆæ¬£èµå¥‡å“¥çš„æ–‡ç« å’Œæ¯ä¸ªè¯„è®ºçš„å›ç­”ã€‚ä¸“ä¸šï¼Œé€šä¿—æ˜“æ‡‚ï¼Œè€Œä¸”å¾ˆè°¦é€Šã€‚","like_count":0},{"had_liked":false,"id":132634,"user_name":"helloworld","can_delete":false,"product_type":"c1","uid":1015754,"ip_address":"","ucode":"00DF2FEC58D2E6","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7f/ca/ea85bfdd.jpg","comment_is_top":false,"comment_ctime":1568181209,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1568181209","product_id":100020801,"comment_content":"ä¸ºä»€ä¹ˆlimit 100åå°±å¯ä»¥è®©ä¼˜åŒ–å™¨è®¤è¯†åˆ°ä½¿ç”¨bç´¢å¼•ä»£ä»·ä¼šå¾ˆé«˜ï¼Ÿï¼Ÿï¼Ÿ","like_count":0},{"had_liked":false,"id":129708,"user_name":"å¼ ä¸‰ä¸°","can_delete":false,"product_type":"c1","uid":1155275,"ip_address":"","ucode":"3A6215A40B3B21","user_header":"https://static001.geekbang.org/account/avatar/00/11/a0/cb/aab3b3e7.jpg","comment_is_top":false,"comment_ctime":1567224911,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1567224911","product_id":100020801,"comment_content":"é‡‡æ ·ç»Ÿè®¡çš„æ—¶å€™ï¼ŒInnoDB é»˜è®¤ä¼šé€‰æ‹© N ä¸ªæ•°æ®é¡µï¼Œç»Ÿè®¡è¿™äº›é¡µé¢ä¸Šçš„ä¸åŒå€¼ï¼Œå¾—åˆ°ä¸€ä¸ªå¹³å‡å€¼ï¼Œç„¶åä¹˜ä»¥è¿™ä¸ªç´¢å¼•çš„é¡µé¢æ•°ï¼Œå°±å¾—åˆ°äº†è¿™ä¸ªç´¢å¼•çš„åŸºæ•°ã€‚<br><br>æ²¡æ˜ç™½   æ€ä¹ˆç»Ÿè®¡çš„ï¼Œèƒ½è¯¦ç»†å±•å¼€ä¸€ä¸‹ä¹ˆ","like_count":0},{"had_liked":false,"id":129428,"user_name":"Dthan","can_delete":false,"product_type":"c1","uid":1177838,"ip_address":"","ucode":"B5DEB7D050981D","user_header":"https://static001.geekbang.org/account/avatar/00/11/f8/ee/2cf560f5.jpg","comment_is_top":false,"comment_ctime":1567128265,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1567128265","product_id":100020801,"comment_content":"è€å¸ˆï¼ŒNæ˜¯æ•°æ®é¡µæ ‘ï¼ŒMæ˜¯æ€»è¡Œæ•°è¿˜æ˜¯é¡µçš„è¡Œæ•°","like_count":0},{"had_liked":false,"id":125180,"user_name":"å¼ ä¸‰ä¸°","can_delete":false,"product_type":"c1","uid":1155275,"ip_address":"","ucode":"3A6215A40B3B21","user_header":"https://static001.geekbang.org/account/avatar/00/11/a0/cb/aab3b3e7.jpg","comment_is_top":false,"comment_ctime":1566112673,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1566112673","product_id":100020801,"comment_content":"â€è€Œå¦‚æœé€‰æ‹©æ‰«æ 10 ä¸‡è¡Œï¼Œæ˜¯ç›´æ¥åœ¨ä¸»é”®ç´¢å¼•ä¸Šæ‰«æçš„ï¼Œæ²¡æœ‰é¢å¤–çš„ä»£ä»·ã€‚â€<br><br>è¿™å¥è¯ä¸ç†è§£ï¼Œè¿™å’Œå…¨è¡¨æ‰«ææœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿä¸€å…±å°±10000è¡Œè®°å½•ã€‚ä¸»é”®ç´¢å¼•å¹¶æ²¡æœ‰å‘æŒ¥å‡ºâ€ç´¢å¼•â€æ‰€å…·å¤‡çš„èƒ½åŠ›ã€‚","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":153240,"discussion_content":"ä¸»é”®ç´¢å¼•è¡¨æ‰«æå°±æ˜¯æŒ‡å…¨è¡¨æ‰«æã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580039901,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":125003,"user_name":"Mr.é’§ğŸ‘»","can_delete":false,"product_type":"c1","uid":1249939,"ip_address":"","ucode":"D781E030E79245","user_header":"https://static001.geekbang.org/account/avatar/00/13/12/93/3470fc43.jpg","comment_is_top":false,"comment_ctime":1566039785,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1566039785","product_id":100020801,"comment_content":"è€å¸ˆï¼Œä¸ºä»€ä¹ˆä¼šå¾—åˆ°é”™çš„æ‰«æè¡Œæ•°å‘¢ï¼Ÿæ˜¯è¿˜æœ‰å…¶ä»–é‡‡æ ·ç»Ÿè®¡å—ï¼Ÿ æ ¹æ®æ–‡ç« ï¼Œæ‰«æè¡Œæ•°å—åˆ°ç´¢å¼•ç»Ÿè®¡ï¼Œæ’åºï¼Œä¸´æ—¶è¡¨çš„å½±å“ã€‚è¿˜å—åˆ°å…¶ä»–å› ç´ çš„å½±å“å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":153243,"discussion_content":"åŸºæ•°ã€æ‰«æè¡Œæ•°ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580039926,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":116600,"user_name":"ç«¹è€","can_delete":false,"product_type":"c1","uid":1604511,"ip_address":"","ucode":"3380C18DCAD203","user_header":"https://static001.geekbang.org/account/avatar/00/18/7b/9f/7825b97c.jpg","comment_is_top":false,"comment_ctime":1563877586,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1563877586","product_id":100020801,"comment_content":"åä¸‡è¡Œæ•°æ®å¤ªå¤§äº†ï¼Œæˆ‘insertåŠä¸ªå¤šé’Ÿå¤´è¿˜æ˜¯æ²¡æœ‰å¥½ï¼Œè¿™æ˜¯æ€ä¹ˆä¸€å›äº‹å‘¢ï¼Ÿæˆ‘çš„ç”µè„‘æ˜¯i7,8Gå†…å­˜ï¼Œå„ä½insertçš„æ•ˆæœå¦‚ä½•å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":153245,"discussion_content":"å°†innodb_flush_log_at_trx_commitè®¾ç½®ä¸º0å°±å¥½äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580039965,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":116442,"user_name":"Hacker","can_delete":false,"product_type":"c1","uid":1142767,"ip_address":"","ucode":"FB33501701B9FE","user_header":"","comment_is_top":false,"comment_ctime":1563850907,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1563850907","product_id":100020801,"comment_content":"ä¸ºäº†å¯ä»¥è®© MySQL é€‰é”™ç´¢å¼•ï¼Œåœ¨ä¸åŒçš„æœºå™¨ä¸Šï¼Œæµ‹è¯•äº†è€å¸ˆçš„æ–¹æ³•ï¼Œå‡æ— æ•ˆã€‚è´¹å°½åƒè¾›ä¸‡å¤ï¼Œä¸å¦‚å¥½å¥½é˜…è¯»ã€‚ç»ˆäºè¢«è€å¸ˆçš„ä¸€å¥ order by rand()ï¼Œç‚¹é†’ã€‚å¦‚æœæœ‹å‹æ‚¨ä¹Ÿä¸èƒ½é‡ç°é€‰é”™ç´¢å¼•ï¼Œä¸å¦¨ä»…å®æ–½éšå³åˆ é™¤ï¼Œäº²æµ‹æœ‰æ•ˆã€‚ä¸€æ¡è¯¯å…¥æ­§é€”çš„è¯­å¥ï¼Œè®©MySQLé€‰é”™ç´¢å¼•ï¼Œï¼šdelete from t order by rand() limit 12000;  # 12000 ä¸ºäº†é‡æ–°ç´¢å¼•ç»Ÿè®¡ã€‚","like_count":0},{"had_liked":false,"id":113978,"user_name":"TioSun","can_delete":false,"product_type":"c1","uid":1590457,"ip_address":"","ucode":"4A039179296310","user_header":"","comment_is_top":false,"comment_ctime":1563197462,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1563197462","product_id":100020801,"comment_content":"é—®ä¸ªå¾ˆç™½ç—´çš„é—®é¢˜å»ºç«‹(b,a)æˆ–è€…(a,b)è¿™æ ·çš„ç»„åˆç´¢å¼•ä¸ä¼šä¼˜åŒ–å—","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":153247,"discussion_content":"ï¼ˆb,a)å’Œ(a,b)æ˜¯ä¸¤ä¸ªä¸åŒçš„ç´¢å¼•ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580040013,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":112012,"user_name":"æ—¶é—´æ˜¯æœ€çœŸçš„ç­”æ¡ˆ","can_delete":false,"product_type":"c1","uid":1183601,"ip_address":"","ucode":"B90F3EF769F865","user_header":"https://static001.geekbang.org/account/avatar/00/12/0f/71/9273e8a4.jpg","comment_is_top":false,"comment_ctime":1562653693,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1562653693","product_id":100020801,"comment_content":"æ€ä¹ˆæ¨¡æ‹Ÿ session A å’Œ session B å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":153248,"discussion_content":"æ‰“å¼€ä¸¤ä¸ªæŸ¥è¯¢ç¼–è¾‘çª—å£æˆ–è€…å‘½ä»¤çª—å£ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580040039,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":110341,"user_name":"æ®‹å¤©å™¬é­‚","can_delete":false,"product_type":"c1","uid":1506609,"ip_address":"","ucode":"A2AD8303A4518D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/q2HwchogzNiavKhIB4GfAxH6B88NhSoC7B7keVEUqiaP6JPokDUNJLYehocOyqYqrhA3iaxywyRXLYkYJjDUQESZw/132","comment_is_top":false,"comment_ctime":1562235493,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1562235493","product_id":100020801,"comment_content":"å¼€å¯äº‹åŠ¡ä¹‹åæŒ‰ç…§è€å¸ˆçš„æ“ä½œï¼Œæ²¡æœ‰å¤ç°å‡ºé€‰é”™ç´¢å¼•çš„é—®é¢˜<br>session a : start transaction with CONSISTENT SNAPSHOT;<br>session b:  DELETE from t;<br>session b:  call idata();<br>session b:  EXPLAIN select * from t WHERE a BETWEEN 10000 and 20000;<br>å¾—åˆ°çš„ç»“æœè¿˜æ˜¯<br>id\tselect_type\ttable\tpartitions\ttype\tpossible_keys\tkey\tkey_len\tref\trows\tfiltered\tExtra<br>1\tSIMPLE\tt\t\trange\ta\ta\t5\t\t10001\t100.00\tUsing index condition<br><br>æˆ‘ç”¨çš„æ˜¯mysql8.0ï¼Œä¼šæ˜¯ç‰ˆæœ¬å¼•å‘çš„é—®é¢˜ä¹ˆï¼Ÿï¼Ÿ","like_count":0},{"had_liked":false,"id":109096,"user_name":"å¤šè¥„ä¸¸","can_delete":false,"product_type":"c1","uid":1074310,"ip_address":"","ucode":"1AA1497C5A293C","user_header":"https://static001.geekbang.org/account/avatar/00/10/64/86/f5a9403a.jpg","comment_is_top":false,"comment_ctime":1561961288,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561961288","product_id":100020801,"comment_content":"1. æˆ‘çš„æ‰«æè¡Œæ•°ç¡®å®æ˜¯åœ¨å˜ï¼Œæˆ‘åœ¨æƒ³æ˜¯ä¸æ˜¯å› ä¸ºå­˜å‚¨è¿‡ç¨‹æ²¡æœ‰æ‰§è¡Œå®Œï¼Ÿ<br><br>2. æˆ‘çš„æœ€ç»ˆåœ¨æ•°æ®è®°å½•æ˜¯10Wæ¡çš„æƒ…å†µä¸‹ï¼Œ<br>select count(*) from t2;<br>\tcount(*)<br>\t100000<br><br> æ‰§è¡Œ explain select * from t2 where a between 10000 and 20000; ç»“æœå¦‚ä¸‹ï¼š<br>\tid\tselect_type\ttable\tpartitions\ttype\tpossible_keys\tkey\tkey_len\tref\trows\tfiltered\tExtra<br>\t1\tSIMPLE\tt2\t\tALL\ta\t\t\t\t100263\t9.97\tUsing where<br><br>æ‰«æé™¤äº†100263è¡Œè®°å½•ï¼Œå¥½å¥‡æ€ªå•Šï¼Ÿ ç‰ˆæœ¬æ˜¯8.0.16ï¼›<br><br><br>","like_count":0},{"had_liked":false,"id":104615,"user_name":"å¤§å®","can_delete":false,"product_type":"c1","uid":1102771,"ip_address":"","ucode":"224458E5D1A35A","user_header":"https://static001.geekbang.org/account/avatar/00/10/d3/b3/4f5550c0.jpg","comment_is_top":false,"comment_ctime":1560785320,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1560785320","product_id":100020801,"comment_content":"å›¾ 2ä¸­çš„sessionAæœ‰ä»€ä¹ˆä½œç”¨å—","like_count":0},{"had_liked":false,"id":100235,"user_name":"Tunayoyo","can_delete":false,"product_type":"c1","uid":1447213,"ip_address":"","ucode":"E77AFDE575CE04","user_header":"https://static001.geekbang.org/account/avatar/00/16/15/2d/8447e8c8.jpg","comment_is_top":false,"comment_ctime":1559490525,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1559490525","product_id":100020801,"comment_content":"è¯´ä¸‹æˆ‘å¯¹å›¾ä¸‰å’Œå›¾äº”çš„ç†è§£ï¼šå›¾ä¸‰session Aå¼€å¯äº‹åŠ¡åï¼Œsession Bæ²¡æœ‰â€œçœŸæ­£â€deleteæ‰æ•°æ®ï¼Œè¿›è€Œå½±å“äº†force indexæ‰«æè¡Œçš„ä¼°è®¡ï¼Œæ‰€ä»¥æœ‰å›¾äº”ä¼°è®¡çš„ç»“æœ37116ï¼›è€Œå›¾ä¸‰ä¸­æ…¢æŸ¥è¯¢æ—¥å¿—è®°å½•force indexæ‰«æè¡Œæ˜¯å®é™…è¿è¡Œå¾—åˆ°çš„çœŸå®æ•°æ®10001ã€‚","like_count":0},{"had_liked":false,"id":98320,"user_name":"Longerian","can_delete":false,"product_type":"c1","uid":1032464,"ip_address":"","ucode":"0B74EE70D09A2A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c1/10/28d5a686.jpg","comment_is_top":false,"comment_ctime":1558958266,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1558958266","product_id":100020801,"comment_content":"æ€æ ·æ¨¡æ‹Ÿå›¾2é‡Œ Session A å’Œ Session Bçš„æµç¨‹ï¼Œæˆ‘å¼€äº†ä¸¤ä¸ªbashè®¿é—®mysqlï¼Œç¬¬ä¸€ä¸ªå½“ä½œsession Aï¼Œç¬¬äºŒä¸ªå½“ä½œ session Bï¼ŒæŒ‰æ—¶é—´é¡ºåºæ‰§è¡Œå›¾2é‡Œçš„è¯­å¥ï¼Œå¹¶ä¸èƒ½å¤ç°","like_count":0},{"had_liked":false,"id":98317,"user_name":"å¼ ä¸‰ä¸°","can_delete":false,"product_type":"c1","uid":1155275,"ip_address":"","ucode":"3A6215A40B3B21","user_header":"https://static001.geekbang.org/account/avatar/00/11/a0/cb/aab3b3e7.jpg","comment_is_top":false,"comment_ctime":1558956197,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1558956197","product_id":100020801,"comment_content":"â€œâ€è€Œå¦‚æœé€‰æ‹©æ‰«æ 10 ä¸‡è¡Œï¼Œæ˜¯ç›´æ¥åœ¨ä¸»é”®ç´¢å¼•ä¸Šæ‰«æçš„ï¼Œæ²¡æœ‰é¢å¤–çš„ä»£ä»·ã€‚â€<br><br>è¿™å¥è¯æƒ³ä¸æ˜ç™½ï¼Ÿä¸ºä½•ç›´æ¥åœ¨ä¸»é”®ç´¢å¼•æ‰«æï¼Ÿaå¹¶ä¸æ˜¯ä¸»é”®ç´¢å¼•å•Š","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":153254,"discussion_content":"ä¸»é”®ç´¢å¼•è¡¨æ‰«æå°±æ˜¯å…¨è¡¨æ‰«æã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580040374,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":93819,"user_name":"ç¬¨çš„","can_delete":false,"product_type":"c1","uid":1304330,"ip_address":"","ucode":"9CD069C815A40F","user_header":"https://static001.geekbang.org/account/avatar/00/13/e7/0a/a7c5c647.jpg","comment_is_top":false,"comment_ctime":1557629495,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1557629495","product_id":100020801,"comment_content":"æ—è€å¸ˆï¼Œæœ‰ä¸ªé—®é¢˜è¯·æ•™ä¸€ä¸‹ã€‚<br>å°±æ˜¯æ—¶é—´å­—æ®µdatetimeæˆ–è€…Intå‹çš„ã€‚å¦‚æœç”¨Likeçš„æ–¹å¼ã€‚å³ä½¿å­—æ®µæœ‰ç´¢å¼•ï¼Œä¹Ÿæ˜¯ä¼šå…¨è¡¨æ‰«æï¼Œè¯·é—®è¿™æ˜¯ç±»å‹è½¬æ¢çš„åŸå› ä¹ˆï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":153258,"discussion_content":"æ²¡è¿™ä¹ˆç©è¿‡ï¼Œæ•´å‹å¯ä»¥ç”¨like?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580040574,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":89513,"user_name":"é£åœ¨èº«å","can_delete":false,"product_type":"c1","uid":1486579,"ip_address":"","ucode":"AA28C7C4FB6393","user_header":"https://static001.geekbang.org/account/avatar/00/16/ae/f3/f9b8b077.jpg","comment_is_top":false,"comment_ctime":1556191679,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1556191679","product_id":100020801,"comment_content":"Oracleå¯ä»¥ä½¿ç”¨æ˜Ÿå‹è½¬æ¢æ¥åŒæ—¶åˆ©ç”¨å¤šä¸ªä½å›¾ç´¢å¼•ã€‚mysqlçš„èƒ½æœ‰ä¸€æ¬¡ä½¿ç”¨å¤šä¸ªäºŒçº§ç´¢å¼•çš„åœºæ™¯ä¹ˆ","like_count":0},{"had_liked":false,"id":85646,"user_name":"çº¸ç‰‡äºº","can_delete":false,"product_type":"c1","uid":1358508,"ip_address":"","ucode":"84490E7CEF59A4","user_header":"https://static001.geekbang.org/account/avatar/00/14/ba/ac/b44b256a.jpg","comment_is_top":false,"comment_ctime":1555157167,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1555157167","product_id":100020801,"comment_content":"å””ï¼Œæœ¬ç« ç¬¬ä¸€ä¸ªç¤ºä¾‹ï¼Œå› ä¸ºä¼šè¯Aä¸Šçš„è¯»äº‹åŠ¡ï¼Œundoç¡®å®æ²¡æœ‰å›æ”¶ã€‚ä½†æ˜¯undoæ²¡æœ‰å›æ”¶å’Œç´¢å¼•ç»Ÿè®¡ç»“æœæœ‰è¯¯æ˜¯å¦æœ‰å…³ï¼Œå°±è¯´ä¸å‡†äº†ã€‚æˆ‘æ˜¯é€šè¿‡åè¯æ³•æ¥è¿›è¡Œåˆ¤æ–­çš„ã€‚<br>å‡è®¾ç´¢å¼•ç»Ÿè®¡ç»“æœæœ‰è¯¯å’Œundoæœ‰å…³ï¼Œé‚£ä¹ˆç¬¬ä¸€ä¸ªç¤ºä¾‹ä¸åŠ auto_incrementçš„æƒ…å†µä¸‹ï¼Œç¬¬äºŒæ¬¡è°ƒç”¨idata()æ‰€å¼•å‘çš„é‡æ–°ç»Ÿè®¡ï¼Œä¼šå°†åŒä¸€è¡Œä¸Šundoä¸Šçš„æ•°æ®è¡Œè®°å½•åœ¨å†…ã€‚ç”±äºæ‰€æœ‰è¡Œåˆ é™¤å‰å’Œåˆ é™¤åçš„æ•°æ®å®Œå…¨ç›¸åŒï¼Œæ‰€ä»¥åŸºæ•°ä¸€å®šä¼šä¸‹é™åˆ°åŸæ¥çš„1&#47;2å·¦å³ã€‚<br>å®é™…æƒ…å†µæ˜¯ï¼Œä¸æ·»åŠ è‡ªå¢å…³é”®å€¼æ—¶ï¼Œåˆ é™¤å†æ’å…¥å‰ååŸºæ•°å·®è·å¹¶ä¸å¤§ã€‚è€Œæ·»åŠ äº†è‡ªå¢å…³é”®å€¼ï¼ŒåŸºæ•°å˜åŒ–å°±ä¸å¯ç¢ç£¨äº†ã€‚æˆ‘å…¶ä¸­ä¸€æ¬¡å®éªŒï¼Œåœ¨Bæ“ä½œä¹‹ååŸºæ•°å€¼å˜æˆ1ï¼Œ142ï¼Œ142ã€‚æˆ‘æƒ³è¿™åº”è¯¥å’Œç´¢å¼•ç»Ÿè®¡é€‰æ‹©çš„æ•°æ®é¡µæœ‰å…³ï¼Œä¹Ÿå’Œæˆ‘åå¤å®éªŒæœ‰å…³ã€‚å› ä¸ºæˆ‘åœ¨åŒä¸€å¯¹ä¼šè¯ä¸Šåå¤æ“ä½œäº†næ¬¡ï¼Œidç§¯ç´¯åˆ°äº†800,000ã€‚<br>æ€»è€Œè¨€ä¹‹ï¼ŒåŸºäºä¸Šè¿°æ“ä½œç»“æœï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºç»“è®ºï¼Œç´¢å¼•ç»Ÿè®¡æœ‰è¯¯ï¼Œå’Œundoæ²¡æœ‰ç›´æ¥å…³ç³»ï¼Œåè€Œå¯èƒ½å’Œæ•°æ®è¡¨æ ¼ä¸­â€œå·²åˆ é™¤â€çš„è¡Œæœ‰å…³ã€‚æ˜¾ç„¶ï¼Œåˆ é™¤æ ‡è®°å¹¶æ²¡æœ‰é˜»æ‹¦MySQLè®¡ç®—ç´¢å¼•åŒºåˆ†åº¦çš„è„šæ­¥ã€‚","like_count":0},{"had_liked":false,"id":85643,"user_name":"çº¸ç‰‡äºº","can_delete":false,"product_type":"c1","uid":1358508,"ip_address":"","ucode":"84490E7CEF59A4","user_header":"https://static001.geekbang.org/account/avatar/00/14/ba/ac/b44b256a.jpg","comment_is_top":false,"comment_ctime":1555155863,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1555155863","product_id":100020801,"comment_content":"è¿˜æ˜¯æœ‰ç‚¹ä¸åŒçš„ã€‚å¦‚æœIdåŠ ä¸Šauto_incrementï¼Œä¼šè¯Bç¬¬äºŒæ¬¡è°ƒç”¨idata()çš„æ—¶å€™ï¼Œæ’å…¥çš„æ˜¯ä¸åŒè¡Œï¼Œå› ä¸ºidå€¼ä¸ä¸€æ ·ã€‚åªæœ‰è¿™ç§æƒ…å†µä¸‹ï¼Œè¯¾ç¨‹ç»“æœæ‰èƒ½å¤ç°ã€‚å¦‚æœæ²¡æœ‰auto_incrementï¼Œä¸ä¼šå‡ºç°ä¸Šè¿°ç»“æœã€‚æ­¤æ—¶ï¼Œç¬¬äºŒæ¬¡æ’å…¥ç›´æ¥â€œè¦†ç›–â€äº†ä¹‹å‰çš„è¡Œã€‚<br><br>é‡æ–°çœ‹äº†ä¸€éåï¼Œæˆ‘è„‘æµ·é‡Œå‡ºç°äº†ä¸¤ä¸ªé—®é¢˜ï¼Œå¸Œæœ›æ‚¨è§£ç­”ğŸ¤”ï¼š<br>1ã€åˆ é™¤è¡Œçš„æ—¶å€™ï¼Œåˆ é™¤æ ‡è®°æ˜¯ç›´æ¥æ‰“åœ¨æ•°æ®é¡µä¸Šçš„å§ã€‚é‚£undoä¸Šä¼šå¦‚ä½•è®°å½•è¿™ä¸ªæ“ä½œå‘¢ï¼Ÿç›´æ¥å¤åˆ¶ä¸€è¡Œå—ï¼Ÿåœ¨åŒä¸€è¡Œä¸Šï¼Œé‡æ–°æ’å…¥æ•°æ®ï¼Œundoåˆä¼šæ€ä¹ˆè®°å½•å‘¢ï¼Ÿ<br>2ã€æ–‡ç« æœ«å°¾ï¼Œé‚£ä¸ªlimit 100ï¼Œæˆ‘æƒ³åˆ°äº†ä¸€ç§å¯èƒ½æ€§ã€‚å¦‚æœMySQLå‡è®¾æŸ¥è¯¢æ¡ä»¶Bç­›é€‰å‡ºæ¥çš„è¡Œï¼ŒåŒæ—¶ç¬¦åˆæ¡ä»¶Açš„å¹³å‡æ¦‚ç‡æ˜¯1%çš„è¯ï¼Œé‚£ä¹ˆlimit 1ä½¿ç”¨ç´¢å¼•Bæœ€æœ‰å¯èƒ½çš„çœŸå®æ‰«æè¡Œæ•°ä¸º500ï¼Œlimit 100æ˜¯50000ã€‚<br>å½“ç„¶äº†ï¼Œæ„Ÿè§‰äº‹æƒ…ä¸å¯èƒ½é‚£ä¹ˆç®€å•ã€‚å› ä¸ºå‘½ä¸­ç‡çœ‹èµ·æ¥ä¹Ÿå¯ä»¥ç”¨åœ¨æ¡ä»¶Aä¸Šï¼ŒåŒç†æ¨æ–­limit 1åªç”¨æ‰«æä¸¤è¡Œï¼Œlimit 100ä»…éœ€200è¡Œã€‚ä½†æ˜¯å› ä¸ºorder by bï¼Œæ— æ³•ä¿è¯å…ˆæ ¹æ®Aæ‰«æå‡ºæ¥çš„ç»“æœæ˜¯å¦æ­£ç¡®ã€‚ä¼˜åŒ–çš„å‰ææ˜¯ç»“æœæ­£ç¡®ï¼ä¸ºäº†ä¿è¯ç»“æœçš„æ­£ç¡®æ€§ï¼Œæ‰€ä»¥é€‰æ‹©ç´¢å¼•Aï¼Œä¸€å®šä¼šæ‰«æ1000è¡Œã€‚<br>å¦‚æ­¤ï¼Œlimit 1å’Œlimit 100æ—¶MySQLçš„ä¸åŒæŠ‰æ‹©è²Œä¼¼è¯´çš„é€šäº†ğŸ˜æˆ‘çš„é—®é¢˜æ˜¯ï¼ŒMySQLè¡¡é‡ç´¢å¼•ä»£ä»·çš„æƒé‡å‡½æ•°é‡Œï¼Œæ˜¯å¦åŒ…å«ç±»ä¼¼å¹³å‡å‘½ä¸­ç‡ä¹‹ç±»çš„æ•°å€¼ï¼Ÿæˆ–è€…å®ƒä½¿ç”¨äº†æ›´å¤æ‚çš„æœºåˆ¶ï¼Œæ¥â€œå­¦ä¹ â€æ•°æ®è·¨åˆ—çš„åˆ†å¸ƒè§„å¾‹ã€‚","like_count":0},{"had_liked":false,"id":84646,"user_name":"ç”»èˆ¹å¬é›¨çœ ","can_delete":false,"product_type":"c1","uid":1204530,"ip_address":"","ucode":"7BF99B0B26F3B2","user_header":"https://static001.geekbang.org/account/avatar/00/12/61/32/61112578.jpg","comment_is_top":false,"comment_ctime":1554889300,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554889300","product_id":100020801,"comment_content":"mysql&gt; select version();<br>+-----------+<br>| version() |<br>+-----------+<br>| 5.7.12    |<br>+-----------+<br>æˆ‘å°è¯•äº†å‡ æ¬¡ä¹Ÿæ²¡æœ‰å¤ç°æ¡ˆä¾‹1çš„æƒ…å†µå•Šï¼","like_count":0},{"had_liked":false,"id":83840,"user_name":"çº¸ç‰‡äºº","can_delete":false,"product_type":"c1","uid":1358508,"ip_address":"","ucode":"84490E7CEF59A4","user_header":"https://static001.geekbang.org/account/avatar/00/14/ba/ac/b44b256a.jpg","comment_is_top":false,"comment_ctime":1554723127,"is_pvip":false,"replies":[{"id":"30756","content":"æˆ‘æ„Ÿè§‰æˆ‘ä»¬è¯´çš„æ˜¯ä¸€æ ·çš„æ„æ€<br><br>åˆ é™¤çš„æ•°æ®ä¸ºä»€ä¹ˆä¼šè¢«ç®—è¿›å»ï¼Œæ˜¯å› ä¸ºè¿˜æ²¡æœ‰è¢«çœŸæ­£åˆ é™¤ï¼›<br>undo logä¹Ÿè¿˜æ²¡æœ‰å›æ”¶ã€‚<br><br>","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1555148543,"ip_address":"","comment_id":83840,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1554723127","product_id":100020801,"comment_content":"æ—è€å¸ˆï¼Œæˆ‘å°±æœ¬ç« çš„ç¬¬ä¸€ç¤ºä¾‹ï¼Œåšäº†å››ç»„å®éªŒï¼Œå‘ç°æ‚¨çš„è¯´æ³•å­˜åœ¨é—®é¢˜ã€‚ä»¥ä¸‹æ˜¯æˆ‘çš„å®éªŒè¿‡ç¨‹ï¼Œè¯·æŒ‡æ­£ï¼<br>ç¬¬ä¸€ç»„å®éªŒï¼Œmysqlç‰ˆæœ¬5.7.18ï¼Œä¸¥æ ¼æŒ‰ç…§æœ¬ç« å™è¿°æ­¥éª¤è¿›è¡Œã€‚å¤ç°å¤±è´¥ï¼Œexplainç»“æœæ˜¾ç¤ºï¼Œmysqlé€‰æ‹©äº†ç´¢å¼•aã€‚<br>ç¬¬äºŒç»„å®éªŒï¼Œmysqlç‰ˆæœ¬5.6.24ï¼ŒåŒæ ·çš„æ­¥éª¤ï¼Œå¤ç°å¤±è´¥ã€‚åŒæ—¶æˆ‘æ³¨æ„åˆ°ï¼Œåœ¨ç¬¬äºŒæ¬¡è°ƒç”¨call idata()å‰ï¼Œåœ¨ä¼šè¯Aï¼ˆå³è¯»äº‹åŠ¡æ‰€åœ¨ä¼šè¯ï¼‰ä¸­explainç›®æ ‡selectè¯­å¥ï¼Œè¿”å›çš„ç´¢å¼•ç±»å‹å’Œé•¿åº¦éƒ½ä¸ºNULLï¼Œé¢„æµ‹æ‰«æé•¿åº¦ä¸º1ã€‚æ­¤æ—¶ï¼Œç”±äºå½“å‰éš”ç¦»çº§åˆ«ä¸ºRRï¼Œè¯»äº‹åŠ¡çœ‹åˆ°çš„æ•°æ®éƒ½è¢«ä¼šè¯Båˆ é™¤äº†ï¼Œæ‰€ä»¥å…¶è§†å›¾æ¥è‡ªundoæ—¥å¿—ã€‚å¦‚æœexplainç»Ÿè®¡æ‰«æè¡Œæ•°ä¼šå°†undo logé‡Œçš„æ•°æ®è¡Œç»Ÿè®¡åœ¨å†…çš„è¯ï¼Œexplainçš„rowsä¸å¯èƒ½ç­‰äº1ã€‚æ‰€ä»¥â€œå› ä¸ºundo logé‡Œçš„æ•°æ®ä¸èƒ½å®é™…åˆ é™¤ï¼Œå¯¼è‡´explain... force index(a)...çš„æ‰«æè¡Œæ•°å‡ºç°è¯¯å·®â€çš„è¯´æ³•æ˜¯é”™è¯¯çš„ï¼ï¼ï¼<br>ç¬¬ä¸‰ç»„å®éªŒï¼Œå°è¯•å°†idbæ”¾å…¥ç³»ç»Ÿè¡¨ç©ºé—´ã€‚æˆ‘æƒ³çœ‹çœ‹å¦‚æœæ•°æ®è¡Œå’Œundo logæ”¾åœ¨ä¸€èµ·ï¼Œæ˜¯å¦ä¼šæ”¹å˜ç°çŠ¶ã€‚å®éªŒç»“æœè¡¨æ˜ï¼Œmysqlè¿˜æ˜¯é€‰æ‹©äº†ç´¢å¼•aã€‚<br>ç¬¬å››ç»„å®éªŒï¼Œå°†idæ”¹æˆè‡ªå¢ä¸»é”®ï¼ˆçµæ„Ÿæ¥è‡ªç¬¬11ç« æ‚¨ç»™@æŸã€äººçš„å›å¤ï¼‰ï¼ŒæˆåŠŸå¤ç°ç¤ºä¾‹ç»“æœï¼ï¼explain... force index(a)...çš„rowsä¸º37136ï¼Œå’Œæ–‡ç« é‡Œçš„æ•°å€¼ç›¸å·®æ— å‡ ã€‚<br><br>ç»“è®ºï¼š<br>1ã€mysqlçš„ä¼˜åŒ–å™¨è¯„ä¼°selectæŸ¥è¯¢ä»£ä»·ï¼Œè¯»å–çš„æ˜¯è¡¨æ ¼å’Œç´¢å¼•çš„å…ƒæ•°æ®ï¼Œæ‰€ä»¥explainç»“æœä¸ä¼šå› ä¸ºäº‹åŠ¡ä¸åŒè¢«éš”ç¦»ã€‚<br>2ã€explainä¸ä¼šå°†undo logä¸Šçš„æ•°æ®è®¡ç®—åœ¨å†…ï¼Œå³undoä¸Šçš„æ•°æ®ä¸ä¼šå½±å“explainçš„ä¼°ç®—ç»“æœã€‚<br>3ã€åŸºæ•°ä¸æ˜¯å¯¼è‡´rowså‡ºç°è¯¯å·®çš„æ ¹æœ¬åŸå› â€”â€”æˆ‘å…¶ä¸­æœ‰ä¸€ç»„å®éªŒæ‰€æœ‰æ­¥éª¤å®Œæˆåï¼Œä¸‰ä¸ªç´¢å¼•çš„åŸºæ•°éƒ½ä¸º100141ã€‚<br>4ã€explainä¼šæŠŠå·²ç»æ‰“ä¸Šâ€œåˆ é™¤â€æ ‡è®°çš„è¡Œä¹Ÿè€ƒè™‘è¿›å»ï¼Œè¿™å¯èƒ½æ˜¯rowså‡ºç°è¯¯å·®çš„çœŸæ­£åŸå› ã€‚","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446160,"discussion_content":"æˆ‘æ„Ÿè§‰æˆ‘ä»¬è¯´çš„æ˜¯ä¸€æ ·çš„æ„æ€\n\nåˆ é™¤çš„æ•°æ®ä¸ºä»€ä¹ˆä¼šè¢«ç®—è¿›å»ï¼Œæ˜¯å› ä¸ºè¿˜æ²¡æœ‰è¢«çœŸæ­£åˆ é™¤ï¼›\nundo logä¹Ÿè¿˜æ²¡æœ‰å›æ”¶ã€‚\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555148543,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":79532,"user_name":"ä¸ä¼¼æ—§æ—¥","can_delete":false,"product_type":"c1","uid":1161271,"ip_address":"","ucode":"DF4C5E3AB9570C","user_header":"https://static001.geekbang.org/account/avatar/00/11/b8/37/98991aeb.jpg","comment_is_top":false,"comment_ctime":1553505641,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1553505641","product_id":100020801,"comment_content":"ç´¢å¼•å¤±æ•ˆ: ä¼˜åŒ–å™¨é€‰æ‹©é”™çš„ç´¢å¼•(æˆ–è€…ä¸ä½¿ç”¨ç´¢å¼•)<br>å‘ç°ç´¢å¼•å¤±æ•ˆ: ä½¿ç”¨expainæŸ¥çœ‹sqlæ‰§è¡Œè®¡åˆ’<br>è§£å†³ç´¢å¼•å¤±æ•ˆ: ä½¿ç”¨force indexè¯­å¥æŒ‡å®šç´¢å¼•, å†™åˆé€‚çš„sqlè¯­å¥","like_count":0},{"had_liked":false,"id":77960,"user_name":"è§æœˆæ˜","can_delete":false,"product_type":"c1","uid":1314680,"ip_address":"","ucode":"89D13DFE959344","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIq0R7vjEVNqQhQ7JALNWAnSqoSYuia6aAibGFfnbdVHXQlpWIQyvF4uPSCQu51BSCEw06bPTJs6cgg/132","comment_is_top":false,"comment_ctime":1553046769,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1553046769","product_id":100020801,"comment_content":"æœ€åä¸€ä¸ªä¾‹å­ï¼Œmysqlè®¤ä¸ºBç´¢å¼•æ›´å¥½ã€‚è¿™ç§æƒ…å†µæ˜¯ç»Ÿè®¡ä¿¡æ¯å…¨çš„æƒ…å†µä¸‹mysqlçš„ä¼˜åŒ–å™¨å‡ºç°äº†é—®é¢˜ï¼Ÿæˆ‘ä»¥ä¸ºä¼˜åŒ–å™¨åœ¨ç»Ÿè®¡ä¿¡æ¯æ²¡é—®é¢˜çš„çŠ¶æ€ä¸‹åŸºæœ¬ä¸Šä¸ä¼šèµ°é”™å‘¢ã€‚ã€‚ã€‚ä¼°è®¡ä»¥åmysqlä¼šæ›´ç²¾è¿›è¿™æ–¹é¢","like_count":0},{"had_liked":false,"id":74057,"user_name":"è·¯è¿‡","can_delete":false,"product_type":"c1","uid":1316401,"ip_address":"","ucode":"7152C19ED024CC","user_header":"https://static001.geekbang.org/account/avatar/00/14/16/31/ae8adf82.jpg","comment_is_top":false,"comment_ctime":1552095589,"is_pvip":false,"replies":[{"id":"27084","content":"å•Š ä¸ä¼šå§ï¼Œæ²¡ç¢°åˆ°è¿‡è¿™ç§æƒ…å†µã€‚ã€‚<br>è¦ä¸ä½ æŠŠå®Œæ•´çš„å¤ç°æ­¥éª¤å†™ä¸€ä¸‹ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1552111052,"ip_address":"","comment_id":74057,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552095589","product_id":100020801,"comment_content":"è€å¸ˆå¥½ã€‚<br>5.7.17ä¸Šï¼Œè®¾ç½®long_query_time=0.æ‰§è¡Œç®€å•çš„å‘½ä»¤åï¼Œè¯¥è¯­å¥ä¸ä¼šå‡ºç°åœ¨slow logä¸­ï¼Œè¡¨ä¸­åªæœ‰20æ¡è®°å½•ã€‚æ¯”å¦‚ï¼š<br>select * from wordsï¼›<br>ä½†æ‰§è¡Œç¨å¾®å¤æ‚ç‚¹çš„è¯­å¥å°±è®°å½•åˆ°slow logä¸­ï¼š<br>select word from words order by rand() limit 3;<br>è¯·é—®è¿™æ˜¯ä¸ºä½•ï¼Ÿè°¢è°¢ï¼","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442414,"discussion_content":"å•Š ä¸ä¼šå§ï¼Œæ²¡ç¢°åˆ°è¿‡è¿™ç§æƒ…å†µã€‚ã€‚\nè¦ä¸ä½ æŠŠå®Œæ•´çš„å¤ç°æ­¥éª¤å†™ä¸€ä¸‹ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552111052,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":70581,"user_name":"XD","can_delete":false,"product_type":"c1","uid":1079293,"ip_address":"","ucode":"DC9DCFB3841A4E","user_header":"https://static001.geekbang.org/account/avatar/00/10/77/fd/c6619535.jpg","comment_is_top":false,"comment_ctime":1551143543,"is_pvip":false,"replies":[{"id":"25186","content":"å¯¹ï¼Œä½†æ˜¯è¿™é‡Œçš„â€œéƒ½â€ï¼Œæ”¹æˆâ€œä¾æ¬¡â€æ¯”è¾ƒä¸å®¹æ˜“å¼•èµ·è¯¯è§£å“ˆ","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1551145191,"ip_address":"","comment_id":70581,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1551143543","product_id":100020801,"comment_content":"è€å¸ˆï¼Œåœ¨where a between 1 and 10000 and b between 50000 and 100000çš„æƒ…å†µä¸‹ï¼Œå¦‚æœèµ°çš„æ˜¯ç´¢å¼•bï¼Œé‚£ä¹ˆå­˜å‚¨å±‚æ˜¯æŠŠæ»¡è¶³æ¡ä»¶çš„5wè¡Œæ•°æ®éƒ½è¿”å›ç»™æ‰§è¡Œå™¨ç„¶åæ‰§è¡Œå™¨å†è¿›è¡Œè¿‡æ»¤å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":440709,"discussion_content":"å¯¹ï¼Œä½†æ˜¯è¿™é‡Œçš„â€œéƒ½â€ï¼Œæ”¹æˆâ€œä¾æ¬¡â€æ¯”è¾ƒä¸å®¹æ˜“å¼•èµ·è¯¯è§£å“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551145191,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":65163,"user_name":"devil","can_delete":false,"product_type":"c1","uid":1259625,"ip_address":"","ucode":"BB6090411BAA23","user_header":"https://static001.geekbang.org/account/avatar/00/13/38/69/864569a4.jpg","comment_is_top":false,"comment_ctime":1549081788,"is_pvip":false,"replies":[{"id":"23094","content":"è¿™ä¸ªå°±æ˜¯ä¼˜åŒ–å™¨ç®—ä»£ä»·çš„æ—¶å€™çš„è®¡ç®—ç»†èŠ‚äº†<br><br>åªæ˜¯ç»™å¤§å®¶æä¾›ä¸€ä¸ªæ€è·¯å“ˆ","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1549101864,"ip_address":"","comment_id":65163,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1549081788","product_id":100020801,"comment_content":"ä¸ºä»€ä¹ˆæŠŠlimit 1æ¢æˆlimit 100ä¼šè®©ä¼˜åŒ–å™¨è§‰å¾—ä½¿ç”¨ç´¢å¼•bä»£ä»·å˜é«˜å‘¢ï¼Ÿéƒ½æ˜¯è¦æ’åºbï¼Œå–å‰ä¸€ç™¾è¿˜æ˜¯å‰ä¸€ä¸ªä»£ä»·å·®ä¸å¤šå§ï¼Œå¦‚æœç”¨ç´¢å¼•aè¿˜æ˜¯è¦æ’åºbä»£ä»·è¿˜æ˜¯æ›´å¤§ã€‚","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438343,"discussion_content":"è¿™ä¸ªå°±æ˜¯ä¼˜åŒ–å™¨ç®—ä»£ä»·çš„æ—¶å€™çš„è®¡ç®—ç»†èŠ‚äº†\n\nåªæ˜¯ç»™å¤§å®¶æä¾›ä¸€ä¸ªæ€è·¯å“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1549101864,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":64899,"user_name":"L!en6o","can_delete":false,"product_type":"c1","uid":1054472,"ip_address":"","ucode":"E0931CB8998260","user_header":"https://static001.geekbang.org/account/avatar/00/10/17/08/566fb246.jpg","comment_is_top":false,"comment_ctime":1548945456,"is_pvip":false,"replies":[{"id":"23004","content":"ğŸ˜…ï¼ŒğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1548980441,"ip_address":"","comment_id":64899,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1548945456","product_id":100020801,"comment_content":"å‰ä¸ä¹…å°±ç¢°åˆ°è¿‡ï¼Œåˆ é™¤ç´¢å¼•è§£å†³çš„ã€‚è‡ªå·±æŒ–çš„å‘ è·ªçš„ä¹Ÿè¦è¸©å®Œ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438226,"discussion_content":"ğŸ˜…ï¼ŒğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548980441,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":61834,"user_name":"äº®","can_delete":false,"product_type":"c1","uid":1086346,"ip_address":"","ucode":"5B8E59AEA6E3F2","user_header":"https://static001.geekbang.org/account/avatar/00/10/93/8a/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1547813306,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1547813306","product_id":100020801,"comment_content":"è€å¸ˆï¼Œanalyze table é”è¡¨å—","like_count":0},{"had_liked":false,"id":60009,"user_name":"w","can_delete":false,"product_type":"c1","uid":1318306,"ip_address":"","ucode":"DB837CAE2FB7C7","user_header":"https://static001.geekbang.org/account/avatar/00/14/1d/a2/ef8758c9.jpg","comment_is_top":false,"comment_ctime":1547436710,"is_pvip":false,"replies":[{"id":"21511","content":"å°±æ˜¯ç”¨å›æ»šæ—¥å¿—â€œç®—å‡ºæ¥â€çš„<br>ä½ çœ‹ä¸‹15ç¯‡å“ˆ","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547446892,"ip_address":"","comment_id":60009,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1547436710","product_id":100020801,"comment_content":"CREATE TABLE `user` (<br>  `id` int(11) NOT NULL,<br>  `card` int(11) DEFAULT NULL,<br>  PRIMARY KEY (`id`),<br>  UNIQUE KEY `card` (`card`)<br>) ENGINE=InnoDB DEFAULT CHARSET=utf8;<br>insert into `user`(id, card) values(1, 3);<br><br>ä¸‹é¢çš„sqlæŒ‰æ—¶é—´é¡ºåºæ‰§è¡Œ<br>session a: start transaction with consistent snapshot;<br>session a: select * from user where card = 3; result: (1, 3)<br>session b: update user set card = 2  where card = 3; commit;<br>session a: select * from user where card = 3; result: (1, 3)<br>session b: select * from user where card = 3; result: empty;<br><br>è€å¸ˆæ‚¨ä¹‹å‰è¯´ æ•°æ®é¡µä¸Šæ²¡æœ‰å†å²ç‰ˆæœ¬ã€‚<br>å¾ˆå¥½å¥‡ åœ¨session bæ›´æ–°äº†card=2ä¹‹åï¼Œé€šè¿‡ç´¢å¼•cardï¼Œå¦‚ä½•æ£€ç´¢åˆ°card=3è¿™æ¡è®°å½•çš„ã€‚<br>æ±‚è§£æƒ‘","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436435,"discussion_content":"å°±æ˜¯ç”¨å›æ»šæ—¥å¿—â€œç®—å‡ºæ¥â€çš„\nä½ çœ‹ä¸‹15ç¯‡å“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547446892,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":59640,"user_name":"w","can_delete":false,"product_type":"c1","uid":1318306,"ip_address":"","ucode":"DB837CAE2FB7C7","user_header":"https://static001.geekbang.org/account/avatar/00/14/1d/a2/ef8758c9.jpg","comment_is_top":false,"comment_ctime":1547395094,"is_pvip":false,"replies":[{"id":"21482","content":"1. å› ä¸ºå­˜åœ¨é‡å¤æ•°æ®ã€‚å¯¼è‡´é¢„ä¼°çš„æ‰«æè¡Œæ•°å˜å¤šäº†ã€‚ æ˜¯çš„ ï¼Œä¸è¿‡å‡†ç¡®è¯´ä¸æ˜¯â€œé‡å¤æ•°æ®â€ï¼Œè€Œæ˜¯è¯´è¿™ä¸ªèŒƒå›´çš„æ˜¯æ•°æ®é¡µå˜å¤šäº†<br>2. æ•°æ®é¡µä¸Šæ²¡æœ‰å†å²ç‰ˆæœ¬çš„ï¼Œ çœ‹ä¸€ä¸‹08ç¯‡","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547432451,"ip_address":"","comment_id":59640,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1547395094","product_id":100020801,"comment_content":"è€å¸ˆ é’ˆå¯¹æ‚¨æé—®çš„rowsè¡Œæ•°ä»10000å˜æˆ37000å¤šï¼Œæœ‰ä¸¤ä¸ªé—®é¢˜æƒ³ç¡®å®šã€‚<br>1ã€æ‚¨åœ¨ç­”æ¡ˆä¸­æåˆ°å› ä¸ºä¸€è‡´æ€§è§†å›¾ï¼Œæœªåˆ é™¤çš„æ—§æ•°æ®å…¶å®è¿˜æš‚æ—¶ä¿ç•™ã€‚<br>æ‰€ä»¥æˆ‘æ˜¯å¦å¯ä»¥è¿›ä¸€æ­¥çš„ç†è§£ä¸ºï¼Œå¯¹äºç´¢å¼•ç»Ÿè®¡ä¿¡æ¯æ¥è¯´ï¼Œæ•°æ®è®°å½•ç¿»äº†ä¸€å€ï¼Œä½†æ˜¯cardinalityæ²¡å˜ã€‚å› ä¸ºéƒ½æ˜¯é‡å¤æ•°æ®ã€‚å¯¼è‡´é¢„ä¼°çš„æ‰«æè¡Œæ•°å˜å¤šäº†ï¼Ÿæ–‡ç« ä¸­ä¼¼ä¹æ²¡æœ‰æåˆ° cardinalityå¦‚ä½•ä¼°ç®—æ‰«æè¡Œæ•°ï¼Œï¼Œåªæäº†å¦‚ä½•è®¡ç®—cardinalityã€‚<br><br>2ã€å¯¹äºæœªåˆ é™¤çš„æ—§æ•°æ®ï¼Œä¸å•æŒ‡è®°å½•åœ¨undo logé‡Œé¢ã€‚ç´¢å¼•çš„æ•°æ®é¡µä¸Šä¹Ÿä¸ä¼šæ¸…é™¤è¯¥æ•°æ®ã€‚å› ä¸ºæˆ‘ç†è§£æ•°æ®é¡µä¸Šå†å²ç‰ˆæœ¬çš„æ•°æ®å¦‚æœåˆ æ‰äº†ï¼Œå°±æ²¡åŠæ³•é€šè¿‡ç´¢å¼•æ£€ç´¢åˆ°äº†ã€‚","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436372,"discussion_content":"1. å› ä¸ºå­˜åœ¨é‡å¤æ•°æ®ã€‚å¯¼è‡´é¢„ä¼°çš„æ‰«æè¡Œæ•°å˜å¤šäº†ã€‚ æ˜¯çš„ ï¼Œä¸è¿‡å‡†ç¡®è¯´ä¸æ˜¯â€œé‡å¤æ•°æ®â€ï¼Œè€Œæ˜¯è¯´è¿™ä¸ªèŒƒå›´çš„æ˜¯æ•°æ®é¡µå˜å¤šäº†\n2. æ•°æ®é¡µä¸Šæ²¡æœ‰å†å²ç‰ˆæœ¬çš„ï¼Œ çœ‹ä¸€ä¸‹08ç¯‡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547432451,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2166073,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/k3YD3y3BzGDSdrwRJyJY4BXsNJibfM4uzOdDVKIAlFApR2FZCLg2ibrZtJ4vuahA3LHLW9GKzH5CMGqCDhWjhZqg/132","nickname":"æˆ’é…’çš„æç™½","note":"","ucode":"744E1A22761647","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":400595,"discussion_content":"æ„Ÿè§‰æ˜ç™½äº†ä¸€ç‚¹äº†ï¼Œå› ä¸ºæ•°æ®é¡µåˆ é™¤çš„æ•°æ®åªæ˜¯æ ‡è®°åˆ é™¤ï¼Œæ²¡æœ‰çœŸæ­£çš„æ¸…ç†ï¼Œè¿™äº›è®°å½•å ç”¨çš„é¡µç©ºé—´è¿˜åœ¨ï¼Œè¿™æ ·æŸ¥æ‰¾æ•°æ®æ—¶éœ€è¦æ‰«ææ›´å¤šçš„é¡µï¼Œé¢„ä¼°æ‰«æè¡Œæ•°å°±ä¼šå˜å¤š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633342591,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":57138,"user_name":"æˆ‘æ˜¯å°é˜Ÿé•¿","can_delete":false,"product_type":"c1","uid":1334198,"ip_address":"","ucode":"E0687666EE2031","user_header":"https://static001.geekbang.org/account/avatar/00/14/5b/b6/f404b490.jpg","comment_is_top":false,"comment_ctime":1546657601,"is_pvip":false,"replies":[{"id":"20635","content":"é—®é¢˜æ˜¯å•¥ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1546690575,"ip_address":"","comment_id":57138,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1546657601","product_id":100020801,"comment_content":"æ¥ä¸Šé¢é—®é¢˜ï¼Œè¿™ä¸ªæ˜¯æ‰“å°å‡ºçš„æ…¢æ—¥å¿—ï¼Œ# Time: 2019-01-05T02:59:29.655832Z<br># User@Host: root[root] @ localhost [127.0.0.1]  Id:    16<br># Query_time: 0.024064  Lock_time: 0.000000 Rows_sent: 10001  Rows_examined: 10001<br>SET timestamp=1546657169;<br>select * from t where a between 10000 and 20000;<br># Time: 2019-01-05T02:59:55.757943Z<br># User@Host: root[root] @ localhost [127.0.0.1]  Id:    16<br># Query_time: 0.021558  Lock_time: 0.000000 Rows_sent: 10001  Rows_examined: 10001<br>SET timestamp=1546657195;<br>select * from t force index(a) where a between 10000 and 20000;","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435423,"discussion_content":"é—®é¢˜æ˜¯å•¥ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1546690575,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":53564,"user_name":"è¿æ–¤æˆé£","can_delete":false,"product_type":"c1","uid":1350812,"ip_address":"","ucode":"BAFF69C29FDFA5","user_header":"https://static001.geekbang.org/account/avatar/00/14/9c/9c/e02a0daf.jpg","comment_is_top":false,"comment_ctime":1545691435,"is_pvip":false,"replies":[{"id":"19485","content":"å°±æ˜¯å› ä¸ºä¸èƒ½çœŸçš„åˆ é™¤å¯¼è‡´çš„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1545702915,"ip_address":"","comment_id":53564,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1545691435","product_id":100020801,"comment_content":"Session a å‘èµ·äº†è¯»ä¸€ç›´æ€§æŸ¥è¯¢ï¼Œè€Œsession bçš„åšå¤§æ‰¹é‡çš„åˆ é™¤åï¼Œç´§æ¥ç€åšæ’å…¥æ“ä½œï¼Œå¯¼è‡´å…¨è¡¨æ‰«æä¸»å› æ˜¯ç»Ÿè®¡ä¿¡æ¯ä¸å‡†ç¡®ã€‚é‚£ç»Ÿè®¡ä¿¡æ¯ä¸å‡†çš„åŸå› æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿé‡‡æ ·ç®—æ³•é‡‡æ ·åœ¨ä¸€è‡´æ€§è¯»çš„å¹²æ‰°ä¸‹ä¸å‡†ç¡®ï¼Ÿå› ä¸ºåæœŸæ‰‹åŠ¨æ”¶é›†ç»Ÿè®¡åˆ†æåç»“æœå°±æ­£å¸¸äº†ï¼Œè°¢è°¢ï¼","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":434182,"discussion_content":"å°±æ˜¯å› ä¸ºä¸èƒ½çœŸçš„åˆ é™¤å¯¼è‡´çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545702915,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":53144,"user_name":"æµ®æ²‰éšæµªè®°ä»Šæœ","can_delete":false,"product_type":"c1","uid":1302527,"ip_address":"","ucode":"09514602876EFC","user_header":"https://static001.geekbang.org/account/avatar/00/13/df/ff/55d529ec.jpg","comment_is_top":false,"comment_ctime":1545611843,"is_pvip":false,"replies":[{"id":"19266","content":"é¢ï¼Œhbaseä¸ç†Ÿï¼Œè€Œä¸”ä½ è¿™ä¹ˆé—®æˆ‘ä¼°è®¡hbaseçš„ä¸“å®¶ä¹Ÿä¸çŸ¥é“æ€ä¹ˆå›ç­”å“ˆ","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1545616250,"ip_address":"","comment_id":53144,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1545611843","product_id":100020801,"comment_content":"è¯·é—®åœ¨hbaseä¸­ï¼Œä»–çš„æ‰§è¡Œé€»è¾‘å’Œmysqlç±»ä¼¼å—","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":434044,"discussion_content":"é¢ï¼Œhbaseä¸ç†Ÿï¼Œè€Œä¸”ä½ è¿™ä¹ˆé—®æˆ‘ä¼°è®¡hbaseçš„ä¸“å®¶ä¹Ÿä¸çŸ¥é“æ€ä¹ˆå›ç­”å“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545616250,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":51262,"user_name":"åƒå¾·å‹’","can_delete":false,"product_type":"c1","uid":1020912,"ip_address":"","ucode":"821466DEF391C2","user_header":"https://static001.geekbang.org/account/avatar/00/0f/93/f0/e3ed3ae3.jpg","comment_is_top":false,"comment_ctime":1545143824,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1545143824","product_id":100020801,"comment_content":"åˆšå¥½é‡åˆ°äº†ï¼Œæµ‹è¯•æœºèµ°æ­£ç¡®ç´¢å¼•ï¼Œæ­£å¼ç¯å¢ƒèµ°é”™ç´¢å¼•ï¼Œåæ¥åˆ æ‰é”™çš„ã€‚ã€‚åªçŸ¥é“è¿™æ ·è§£å†³é—®é¢˜äº†ï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼Œè¿™ç¯‡ç®—æ˜¯è§£æƒ‘äº†ã€‚ã€‚","like_count":0},{"had_liked":false,"id":50236,"user_name":"Mr.Strive.Z.H.L","can_delete":false,"product_type":"c1","uid":1030198,"ip_address":"","ucode":"6D97E159E2EECD","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b8/36/542c96bf.jpg","comment_is_top":false,"comment_ctime":1544930041,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1544930041","product_id":100020801,"comment_content":"å…³äºç¬¬ä¸€ä¸ªä¾‹å­çš„ç–‘æƒ‘ï¼š<br>sessionAæ˜¯é•¿äº‹åŠ¡ï¼ŒsessionBæ˜¯å…ˆåˆ é™¤å†æ’å…¥ã€‚é‚£ä¹ˆå¦‚æœsessionBæ˜¯updateè¯­å¥ï¼ŒæŠŠ10Wè¡Œæ•°æ®å…¨éƒ¨æ›´æ–°ï¼ˆæ¯”å¦‚açš„å€¼éƒ½å¢åŠ 100ï¼‰ï¼Œè¿™æ ·sessionBçš„explainè¯­å¥ï¼Œä¹Ÿä¸ä¼šé€‰æ‹©ç´¢å¼•aï¼Œè€Œæ˜¯é€‰æ‹©å…¨è¡¨å—ï¼Ÿ<br><br>æˆ‘çš„ç­”æ¡ˆï¼šsessionBåˆ é™¤æ•°æ®å†æ’å…¥ï¼Œæ ¹æ®MVCCçš„æœºåˆ¶ï¼Œåº”è¯¥æ˜¯å¢åŠ undo logï¼Œè¿™æ ·æ–¹ä¾¿sessionAé€šè¿‡undo logæŸ¥è¯¢åˆ°åˆ é™¤ä¹‹å‰çš„æ•°æ®ã€‚é‚£ä¹ˆæ›´æ–°æ“ä½œè‚¯å®šä¹Ÿå’Œåˆ é™¤æ“ä½œä¸€æ ·ï¼Œä¹Ÿæ˜¯å¢åŠ undo logã€‚æ‰€ä»¥æˆ‘è®¤ä¸ºå³ä½¿sessionBä½¿ç”¨çš„æ˜¯æ›´æ–°è¯­å¥ï¼Œåº”è¯¥ä¹Ÿæœ‰æå¤§å¯èƒ½æ€§æ˜¯é€‰æ‹©å…¨è¡¨æ‰«æã€‚<br>è€å¸ˆä½ çœ‹æˆ‘ç†è§£çš„å¯¹å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":2166073,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/k3YD3y3BzGDSdrwRJyJY4BXsNJibfM4uzOdDVKIAlFApR2FZCLg2ibrZtJ4vuahA3LHLW9GKzH5CMGqCDhWjhZqg/132","nickname":"æˆ’é…’çš„æç™½","note":"","ucode":"744E1A22761647","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":400602,"discussion_content":"æ„Ÿè§‰ä¸æ˜¯ï¼Œæ›´æ–°å¦‚æœä¸æ¶‰åŠé¡µåˆ†è£‚ï¼Œæ²¡æœ‰è¿‡æ—¶çš„è®°å½•ï¼Œä¸ä¼šå¯¼è‡´cadinalityæœ‰å¤ªå¤§çš„è¯¯å·®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633346389,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":48708,"user_name":"ç½—æ°","can_delete":false,"product_type":"c1","uid":1316843,"ip_address":"","ucode":"7D440AFAA78678","user_header":"https://static001.geekbang.org/account/avatar/00/14/17/eb/8bfd69b0.jpg","comment_is_top":false,"comment_ctime":1544520267,"is_pvip":false,"replies":[{"id":"17487","content":"Sessionå°±æ˜¯ä¼šè¯ï¼Œå¯¹åº”çš„æ˜¯ä¸€ä¸ªè¿æ¥ã€‚è¿æ¥é‡Œé¢å¯ä»¥å¯åŠ¨äº‹åŠ¡","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544524095,"ip_address":"","comment_id":48708,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1544520267","product_id":100020801,"comment_content":"sessionAå’ŒsessionBæ˜¯æŒ‡äº‹åŠ¡aå’Œäº‹åŠ¡bçš„æ„æ€å—","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432320,"discussion_content":"Sessionå°±æ˜¯ä¼šè¯ï¼Œå¯¹åº”çš„æ˜¯ä¸€ä¸ªè¿æ¥ã€‚è¿æ¥é‡Œé¢å¯ä»¥å¯åŠ¨äº‹åŠ¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544524095,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":48073,"user_name":"WL","can_delete":false,"product_type":"c1","uid":1173771,"ip_address":"","ucode":"6277DCD776B87E","user_header":"https://static001.geekbang.org/account/avatar/00/11/e9/0b/1171ac71.jpg","comment_is_top":false,"comment_ctime":1544342333,"is_pvip":false,"replies":[{"id":"17141","content":"ä¸€èˆ¬æ˜¯åœ¨å·¥ä½œç›®å½•ä¸‹å‘€ï¼Œ æœä¸€ä¸‹ï¼Œæ–‡ä»¶ååŒ…å«slow_log","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544357499,"ip_address":"","comment_id":48073,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1544342333","product_id":100020801,"comment_content":"å†è¯·æ•™ä¸€ä¸‹è€å¸ˆ, æ…¢æŸ¥è¯¢æ—¥å¿—æ˜¯åœ¨å“ªé‡Œçœ‹? åˆšåˆšæ‰¾äº†åŠå¤©æ²¡æ‰¾åˆ°","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432015,"discussion_content":"ä¸€èˆ¬æ˜¯åœ¨å·¥ä½œç›®å½•ä¸‹å‘€ï¼Œ æœä¸€ä¸‹ï¼Œæ–‡ä»¶ååŒ…å«slow_log","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544357499,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":48071,"user_name":"WL","can_delete":false,"product_type":"c1","uid":1173771,"ip_address":"","ucode":"6277DCD776B87E","user_header":"https://static001.geekbang.org/account/avatar/00/11/e9/0b/1171ac71.jpg","comment_is_top":false,"comment_ctime":1544342243,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1544342243","product_id":100020801,"comment_content":"æ€è€ƒé¢˜: å¯èƒ½æ˜¯session Aå¯åŠ¨äº‹åŠ¡å, å› ä¸ºè¦ä¿è¯Açš„ä¸€è‡´è¯»è§†å›¾, session Bçš„åˆ é™¤æ“ä½œæ”¶åˆ°äº†å½±å“å¹¶æ²¡æœ‰çœŸæ­£åˆ é™¤, æ‰€ä»¥é‡æ–°æ’å…¥10æ¡å, åœ¨session BæŸ¥è¯¢çš„æ—¶å€™æ”¶åˆ°Açš„è§†å›¾æ•°æ®çš„å½±å“å¯¼è‡´æ‰«æäº†3ä¸‡å¤šè¡Œ.","like_count":0},{"had_liked":false,"id":47856,"user_name":"404","can_delete":false,"product_type":"c1","uid":1313407,"ip_address":"","ucode":"2E7815DDCBA8AB","user_header":"","comment_is_top":false,"comment_ctime":1544236906,"is_pvip":false,"replies":[{"id":"17109","content":"æˆ‘çš„æ˜¯5.7.21ï¼Œåº”è¯¥æ²¡å·®åˆ«çš„ã€‚ä½ çœ‹ä¸‹ä¸‹ä¸€ç¯‡æ–‡ç« æœ«å°¾çš„è§†é¢‘ï¼ŒæŒ‰ç…§é¡ºåºæ‰§è¡Œä¸€ä¸‹","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544333763,"ip_address":"","comment_id":47856,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1544236906","product_id":100020801,"comment_content":"è€å¸ˆï¼Œè¿™ä¸ªå’Œç‰ˆæœ¬æœ‰å…³ç³»å—ã€‚æˆ‘çš„æ˜¯5.7.24çš„ã€‚åšäº‹åŠ¡è¿™å—å®éªŒçš„æ—¶å€™ï¼Œç»“æœè·Ÿä½ çš„ä¸ä¸€æ ·ã€‚index å’Œ force index ç´¢å¼•ç»“æœæ˜¯ä¸€æ ·çš„ã€‚<br>Cardinality è¿™ä¸ªå€¼ä¹Ÿæ˜¯ç›¸ç­‰çš„","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431914,"discussion_content":"æˆ‘çš„æ˜¯5.7.21ï¼Œåº”è¯¥æ²¡å·®åˆ«çš„ã€‚ä½ çœ‹ä¸‹ä¸‹ä¸€ç¯‡æ–‡ç« æœ«å°¾çš„è§†é¢‘ï¼ŒæŒ‰ç…§é¡ºåºæ‰§è¡Œä¸€ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544333763,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":47724,"user_name":"ä¿¡ä¿¡","can_delete":false,"product_type":"c1","uid":1303865,"ip_address":"","ucode":"8DF0EC045579FD","user_header":"https://static001.geekbang.org/account/avatar/00/13/e5/39/951f89c8.jpg","comment_is_top":false,"comment_ctime":1544186954,"is_pvip":false,"replies":[{"id":"16997","content":"å…¨è¡¨æ‰«æçš„é¢„æœŸæ˜¯10ä¸‡å“¦","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544190589,"ip_address":"","comment_id":47724,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1544186954","product_id":100020801,"comment_content":"è¯·é—®è€å¸ˆï¼Œå›¾5ä¸‹è¯´Q1 çš„ç»“æœè¿˜æ˜¯ç¬¦åˆé¢„æœŸçš„ï¼Œrows çš„å€¼æ˜¯ 104620ã€‚å¯æ˜¯é¢„æœŸæ˜¯10001å§ï¼Ÿæ¯”Q2å·®çš„æ›´è¿œå‘€ã€‚ã€‚ã€‚ã€‚","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431871,"discussion_content":"å…¨è¡¨æ‰«æçš„é¢„æœŸæ˜¯10ä¸‡å“¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544190589,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":47679,"user_name":"yy","can_delete":false,"product_type":"c1","uid":1307788,"ip_address":"","ucode":"4F6E10E2D1FE8C","user_header":"","comment_is_top":false,"comment_ctime":1544178514,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1544178514","product_id":100020801,"comment_content":"è€å¸ˆå¥½ è¯·é—®åœ¨ç”¨analyzeç»Ÿè®¡å¤§è¡¨çš„æ—¶å€™ ä¼šå¯¹è¡¨äº§ç”Ÿé” ä»è€Œå½±å“ä¸šåŠ¡å—","like_count":0},{"had_liked":false,"id":47650,"user_name":"æ½®æ±","can_delete":false,"product_type":"c1","uid":1042208,"ip_address":"","ucode":"F5E4F6DF9CEA9E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/e7/20/70a95f94.jpg","comment_is_top":false,"comment_ctime":1544172312,"is_pvip":false,"discussion_count":0,"race_medal":4,"score":"1544172312","product_id":100020801,"comment_content":"è¯·é—®è€å¸ˆï¼Œè¿™ä¸ªä¼˜åŒ–å™¨çš„é€‰æ‹©çš„é—®é¢˜ï¼Œ8.0ç‰ˆæœ¬æœ‰ä¿®å¤å—ï¼Œæˆ‘è£…çš„8.0.13çš„ï¼ŒæŒ‰ç…§è¿‡ç¨‹èµ°æ²¡æœ‰å‡ºç°è¿™äº›é€‰é”™çš„ç°è±¡","like_count":0},{"had_liked":false,"id":47423,"user_name":"æ½®æ±","can_delete":false,"product_type":"c1","uid":1042208,"ip_address":"","ucode":"F5E4F6DF9CEA9E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/e7/20/70a95f94.jpg","comment_is_top":false,"comment_ctime":1544143529,"is_pvip":false,"replies":[{"id":"16935","content":"æ˜¯çš„ï¼Œset global å‘½ä»¤","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544149368,"ip_address":"","comment_id":47423,"utype":1}],"discussion_count":1,"race_medal":4,"score":"1544143529","product_id":100020801,"comment_content":"è€å¸ˆï¼Œä¹‹å‰æœ‰äººè¯„è®ºè¯´æ’å…¥åä¸‡è¡Œè¦å¾ˆä¹…ï¼Œä»Šå¤©æˆ‘ä¹Ÿåƒå¤ç°æ–‡ä¸­çš„è¿‡ç¨‹ï¼Œä¹Ÿæ˜¯å¾ˆæ…¢ï¼Œä½ å›ç­”è¯´è®¾ç½®innodb_flush_log_at_trx_commitå’Œsync_binlogä¸º0æ˜¯åœ¨å“ªè®¾ç½®ï¼Œå­˜å‚¨è¿‡ç¨‹æ‰§è¡Œå‰å—ï¼Ÿå°ç™½ä¸€æšï¼Œè¯·è€å¸ˆæŒ‡å‡ºï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431764,"discussion_content":"æ˜¯çš„ï¼Œset global å‘½ä»¤","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544149368,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":47287,"user_name":"æ½˜å¤šæ‹‰","can_delete":false,"product_type":"c1","uid":1327046,"ip_address":"","ucode":"6EBB6F281018A0","user_header":"https://static001.geekbang.org/account/avatar/00/14/3f/c6/ccc487f9.jpg","comment_is_top":false,"comment_ctime":1544101007,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1544101007","product_id":100020801,"comment_content":"è€å¸ˆå¥½ï¼Œæˆ‘æƒ³é—®ä¸€ä¸‹åœ¨æ•°æ®åº“é‡Œç”¨å¤§å­—æ®µï¼Œå¯¹æ•°æ®åº“æŸ¥é˜…å’Œæ›´æ–°çš„æ€§èƒ½å½±å“æœ‰å¤šå¤§å‘€","like_count":0},{"had_liked":false,"id":47228,"user_name":"wjz1991","can_delete":false,"product_type":"c1","uid":1311687,"ip_address":"","ucode":"D82D744F5A4E6D","user_header":"https://static001.geekbang.org/account/avatar/00/14/03/c7/563345e1.jpg","comment_is_top":false,"comment_ctime":1544082294,"is_pvip":false,"replies":[{"id":"16845","content":"æˆ‘ä¸‹ä¸€ç¯‡ä¸­ç»™ä¸ªè§†é¢‘","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544084277,"ip_address":"","comment_id":47228,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1544082294","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæˆ‘ç”¨äº†mysqlå®˜æ–¹ç‰ˆæœ¬5.7.21å’Œperconaç‰ˆæœ¬çš„5.6.36éƒ½å¤ç°ä¸äº†è€å¸ˆçš„æƒ…å†µï¼Œæ˜¯æŒ‰ç€è€å¸ˆçš„æ­¥éª¤ä¸€æ­¥æ­¥æ¥çš„ï¼Œè€Œä¸”è¯„è®ºé‡Œä¹Ÿæœ‰æŒºå¤šäººå¤ç°ä¸äº†çš„ï¼Œæ˜¯è€å¸ˆçš„æ­¥éª¤æœ‰é—æ¼å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431705,"discussion_content":"æˆ‘ä¸‹ä¸€ç¯‡ä¸­ç»™ä¸ªè§†é¢‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544084277,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":47222,"user_name":"EAGLE","can_delete":false,"product_type":"c1","uid":1303484,"ip_address":"","ucode":"5B0FE019A8C9BD","user_header":"https://static001.geekbang.org/account/avatar/00/13/e3/bc/064401c7.jpg","comment_is_top":false,"comment_ctime":1544080744,"is_pvip":false,"replies":[{"id":"16847","content":"è¦çœ‹ä½ ä¸šåŠ¡éœ€æ±‚å“¦","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544084384,"ip_address":"","comment_id":47222,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1544080744","product_id":100020801,"comment_content":"è€å¸ˆè¯·é—®ï¼Œä¸€ä¸ªåˆ†é¡µæŸ¥è¯¢éœ€è¦ä½¿ç”¨order byå—ï¼Ÿæ˜¯ä¸æ˜¯é»˜è®¤çš„æ’åºç”¨æ¥ä¹Ÿæ˜¯OKçš„ã€‚","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431702,"discussion_content":"è¦çœ‹ä½ ä¸šåŠ¡éœ€æ±‚å“¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544084384,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":47192,"user_name":"æ™¨æ€æš®è¯­","can_delete":false,"product_type":"c1","uid":1304974,"ip_address":"","ucode":"F21D2FDCDD6B43","user_header":"https://static001.geekbang.org/account/avatar/00/13/e9/8e/6dc15a91.jpg","comment_is_top":false,"comment_ctime":1544073226,"is_pvip":false,"replies":[{"id":"16850","content":"ä¸æ˜¯ï¼Œä¸¤ä¸ªæ“ä½œéƒ½å†™å…¥redologäº†çš„ï¼Œåªæ˜¯å†…å®¹ä¸åŒ","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544084701,"ip_address":"","comment_id":47192,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1544073226","product_id":100020801,"comment_content":"ä¸è€å¸ˆå¥½ï¼Œå’¨è¯¢ä¸€ä¸ªå‰é¢çš„é—®é¢˜ï¼åœ¨ç¬¬äºŒèŠ‚ä¸¤é˜¶æ®µè¿™ä¸€å—ï¼Œä½ è¯´æ˜¯redoå†™ä¸¤æ¬¡ç£ç›˜ï¼Œç¬¬ä¸€æ¬¡ä¸ºprepareï¼Œç¬¬äºŒæ¬¡ä¸ºcommitï¼ä¸ªäººç†è§£ä¸ºï¼Œç¬¬ä¸€æ¬¡æ˜¯å†™æ—¥å¿—åˆ°redo fileï¼Œç¬¬äºŒæ¬¡æ˜¯å†™commitåˆ°redo fileã€‚ä¸çŸ¥é“è¿™æ ·ç†è§£æ­£ç¡®å—ï¼Œè¯·å¸®å¿™ç­”ç–‘ï¼Œè°¢è°¢ï¼","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431695,"discussion_content":"ä¸æ˜¯ï¼Œä¸¤ä¸ªæ“ä½œéƒ½å†™å…¥redologäº†çš„ï¼Œåªæ˜¯å†…å®¹ä¸åŒ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544084701,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":47148,"user_name":"kunsect","can_delete":false,"product_type":"c1","uid":1299322,"ip_address":"","ucode":"2CC4ADF82887FC","user_header":"https://static001.geekbang.org/account/avatar/00/13/d3/7a/dd7d35b5.jpg","comment_is_top":false,"comment_ctime":1544063929,"is_pvip":false,"replies":[{"id":"16852","content":"ä»Šæ™šå‘çš„ä¸‹ä¸€ç¯‡é‡Œé¢æˆ‘æœ‰è´´ä¸ªè§†é¢‘ï¼Œä½ åˆ°æ—¶çœ‹ä¸‹","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544089814,"ip_address":"","comment_id":47148,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1544063929","product_id":100020801,"comment_content":"è€å¸ˆæ—©<br>ä»Šå¤©å°† session A çš„ commit æ”¾åœ¨ explain åé¢ï¼Œè¿˜æ˜¯æ²¡æœ‰å¤ç°ã€‚<br><br>mysql&gt; explain select * from t where a between 10000 and 20000;<br>+----+-------------+-------+------------+-------+---------------+------+---------+------+-------+----------+-----------------------+<br>| id | select_type | table | partitions | type  | possible_keys | key  | key_len | ref  | rows  | filtered | Extra                 |<br>+----+-------------+-------+------------+-------+---------------+------+---------+------+-------+----------+-----------------------+<br>|  1 | SIMPLE      | t     | NULL       | range | a             | a    | 5       | NULL | 10001 |   100.00 | Using index condition |<br>+----+-------------+-------+------------+-------+---------------+------+---------+------+-------+----------+-----------------------+<br>1 row in set, 1 warning (0.00 sec)<br>","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431679,"discussion_content":"ä»Šæ™šå‘çš„ä¸‹ä¸€ç¯‡é‡Œé¢æˆ‘æœ‰è´´ä¸ªè§†é¢‘ï¼Œä½ åˆ°æ—¶çœ‹ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544089814,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":47132,"user_name":"Wrelon","can_delete":false,"product_type":"c1","uid":1306021,"ip_address":"","ucode":"8670BDBF317A36","user_header":"https://static001.geekbang.org/account/avatar/00/13/ed/a5/ca3b4cc4.jpg","comment_is_top":false,"comment_ctime":1544061408,"is_pvip":false,"replies":[{"id":"16837","content":"ç¬¬äºŒå¥leftå»æ‰çœ‹çœ‹","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544071577,"ip_address":"","comment_id":47132,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1544061408","product_id":100020801,"comment_content":"è€å¸ˆï¼Œä¸Šä¸€ä¸ªé—®é¢˜è§£å†³äº†ï¼Œä½†æ˜¯æ²¡æ˜ç™½å…¶ä¸­çš„é“ç†ï¼Œè¿˜è¯·è€å¸ˆè®²è§£ã€‚<br>SELECT <br>a.`materialCode`<br>,b.`MaterialCode`<br>FROM sit_r_iwm_data.gr_materialpreferedstoragebin\ta<br>,pdata.`tb_material`\t\t\t\tb<br>WHERE a.`materialCode`=b.`MaterialCode`<br>AND a.`legalPersonCode`=b.`LegalPersonCode`<br>è·Ÿ<br>SELECT<br>a.`materialCode`<br>,b.`MaterialCode`<br>FROM sit_r_iwm_data.gr_materialpreferedstoragebin\ta<br>LEFT JOIN pdata.`tb_material`\t\t\t\tb<br>ON  a.`legalPersonCode`=b.`LegalPersonCode`<br>AND a.`materialCode`=b.`MaterialCode`<br>è¿™ä¸¤ä¸ªSQLå¯¹äºç´¢å¼•çš„é€‰æ‹©ï¼Œæ‰§è¡Œçš„æ•ˆç‡å·®åˆ«å¾ˆå¤§ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431674,"discussion_content":"ç¬¬äºŒå¥leftå»æ‰çœ‹çœ‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544071577,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":47130,"user_name":"25ma","can_delete":false,"product_type":"c1","uid":1303713,"ip_address":"","ucode":"AB5435B9DB52C9","user_header":"https://static001.geekbang.org/account/avatar/00/13/e4/a1/178387da.jpg","comment_is_top":false,"comment_ctime":1544060902,"is_pvip":false,"replies":[{"id":"16858","content":"è¡¨æ˜¯Innodb çš„å§ï¼Ÿè¿˜æœ‰æ•°æ®åº“éš”ç¦»çº§åˆ«æ˜¯RRå—","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544094692,"ip_address":"","comment_id":47130,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1544060902","product_id":100020801,"comment_content":"è€å¸ˆå¥½ï¼Œæˆ‘è¿™è¾¹æ‰§è¡Œä¹Ÿæ˜¯éƒ½ç”¨åˆ°äº†a ç´¢å¼•ï¼Œæ˜¯ä¸æ˜¯æˆ‘æ‰§è¡Œé¡ºåºçš„é—®é¢˜ï¼Ÿ<br>æˆ‘çš„æ‰§è¡Œé¡ºåºæ˜¯ï¼š <br>1. åˆ›å»ºè¡¨<br>2. ç”¨å­˜å‚¨è¿‡ç¨‹å†™å…¥æ•°æ®ï¼ˆ100000ï¼‰<br>3. åœ¨session Aï¼ˆå®¢æˆ·ç«¯ï¼‰ è°ƒç”¨ START TRANSACTION WITH CONSISTENT SNAPSHOT; å‘½ä»¤<br>4. session B (ä½¿ç”¨å‘½ä»¤è¡Œç™»å½•mysqlï¼‰  æ‰§è¡Œ delete from t;  <br>5. session B å†æ¬¡è°ƒç”¨å­˜å‚¨è¿‡ç¨‹å‡½æ•° call idata();<br>6. session B æ‰§è¡Œ EXPLAIN SELECT * FROM t WHERE a BETWEEN 10000 AND 20000;<br>å¾—åˆ°çš„ç»“æœä¾ç„¶æ˜¯ <br>mysql&gt; EXPLAIN SELECT * FROM t WHERE a BETWEEN 10000 AND 20000;<br>+----+-------------+-------+-------+---------------+------+---------+------+-------+-----------------------+<br>| id | select_type | table | type  | possible_keys | key  | key_len | ref  | rows  | Extra                 |<br>+----+-------------+-------+-------+---------------+------+---------+------+-------+-----------------------+<br>|  1 | SIMPLE      | t     | range | a             | a    | 5       | NULL | 10000 | Using index condition |<br>+----+-------------+-------+-------+---------------+------+---------+------+-------+-----------------------+<br>1 row in set (0.01 sec)<br><br>æ²¡æœ‰é‡ç°æ–‡ç« ä¸­çš„é—®é¢˜ï¼Œç»§ç»­æŸ¥æ‰¾åŸå› ä¸­ã€‚ã€‚ã€‚<br>mysql  å°ç™½æ•¬ä¸Š<br>","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431673,"discussion_content":"è¡¨æ˜¯Innodb çš„å§ï¼Ÿè¿˜æœ‰æ•°æ®åº“éš”ç¦»çº§åˆ«æ˜¯RRå—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544094692,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":47122,"user_name":"Jason","can_delete":false,"product_type":"c1","uid":1005685,"ip_address":"","ucode":"8651661C362897","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJdic50nGmb0a4IhlUEbFOxN37ng7ziclUibx5zPRkFZVe9LKSQBeqd9J7DicTNbN63hriamcqmicqXzWVQ/132","comment_is_top":false,"comment_ctime":1544060489,"is_pvip":false,"replies":[{"id":"16838","content":"éƒ½ä¼šå»éå†ä¹Ÿæ²¡å…³ç³»ï¼Œå…³é”®ä½ çš„åˆ†åŒºä¸è¦å¤ªå¤šã€‚<br><br><br>è¿˜æœ‰ï¼Œåˆ«çš„å­—æ®µè¯¥å»ºçš„ç´¢å¼•è¿˜æ˜¯è¦å»ºå“ˆ","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544071687,"ip_address":"","comment_id":47122,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1544060489","product_id":100020801,"comment_content":"å¤§ç¥å¥½ï¼Œæå‰é—®ä¸€å¥ï¼ŒMySQLè¡¨åˆ†åŒºæ–¹æ¡ˆé è°±ä¹ˆ?æ¯å¤©äº§ç”Ÿä¸Šç™¾ä¸‡çš„å¤§è¡¨ï¼Œæƒ³æŒ‰æ—¶é—´è¿›è¡Œåˆ†åŒºï¼Œä¸çŸ¥é“ä¼šä¸ä¼šè¸©å‘ï¼Œçœ‹å¾ˆå¤šäººè¯´ä¸å»ºè®®ç”¨ã€‚<br><br>2018-12-05<br><br>î˜ˆÂ ä½œè€…å›å¤<br><br>å…¶å®æˆ‘è§‰å¾—å¯ä»¥â€¦<br>åˆ†åŒºåˆ«å¤ªå¤šï¼Œæ»šåŠ¨å»ºä¸Šå»<br><br>________<br>å¥½åƒä¸èƒ½ç»§ç»­è¿½åŠ ï¼Œåªèƒ½å†æ¬¡æé—®äº†ã€‚ã€‚<br>å¤§ç¥ï¼Œæˆ‘è¿™è¾¹æµ‹è¯•äº†æ ¹æ®åˆ›å»ºæ—¶é—´æŒ‰å¤©å»ºåˆ†åŒºï¼Œä½†æ˜¯æœ‰åº”ç”¨åœºæ™¯ç”¨ä¸åˆ°åˆ›å»ºæ—¶é—´è¿™ä¸ªæ¡ä»¶ï¼ŒæŸ¥è¯¢å°±å·¨æ…¢ï¼ŒåŸºæœ¬æŸ¥ä¸å‡ºæ¥ï¼Œå°±æŒ‚äº†ï¼Œåˆ†åŒºçš„åŸç†ï¼Œæ˜¯æ ¹æ®åˆ†åŒºå­—æ®µæ¥åˆ¤æ–­è½åˆ°å“ªä¸ªåŒºå»æŸ¥è¯¢å¯¹å§ï¼Œå¦‚æœæ²¡æœ‰è¿™ä¸ªå­—æ®µï¼Œæˆ–è€…è¿‡å¤§ï¼Œæ˜¯ä¸æ˜¯å°±å°±å…¨é‡åˆ†åŒºéƒ½ä¼šå»éå†ä¸€è¾¹ï¼Œè¯·é—®å¤§ç¥æœ‰ä»€ä¹ˆæ›´å¥½çš„å»ºè®®ä¹ˆã€‚","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431670,"discussion_content":"éƒ½ä¼šå»éå†ä¹Ÿæ²¡å…³ç³»ï¼Œå…³é”®ä½ çš„åˆ†åŒºä¸è¦å¤ªå¤šã€‚\n\n\nè¿˜æœ‰ï¼Œåˆ«çš„å­—æ®µè¯¥å»ºçš„ç´¢å¼•è¿˜æ˜¯è¦å»ºå“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544071687,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":47111,"user_name":"50åŒ…é‚®è§£å›æ„","can_delete":false,"product_type":"c1","uid":1077636,"ip_address":"","ucode":"BFC08A518F24B3","user_header":"https://static001.geekbang.org/account/avatar/00/10/71/84/4b33817f.jpg","comment_is_top":false,"comment_ctime":1544059363,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1544059363","product_id":100020801,"comment_content":"explainçš„æ—¶å€™å¥½å¤šæ¬¡çœ‹åˆ°aè¡¨çš„ç´¢å¼•ä¸€ä¸ªä¹Ÿæ²¡æœ‰ä½¿ç”¨ï¼Œæˆ‘æ˜¯ä¸ªæ–°æ‰‹ï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼Œæœ‰æ—¶å€™å»ºäº†å¥½å¤šä¸ªç´¢å¼•mysqlå´ä¸€ä¸ªä¹Ÿä¸ç”¨","like_count":0},{"had_liked":false,"id":47063,"user_name":"ye7zi","can_delete":false,"product_type":"c1","uid":1271757,"ip_address":"","ucode":"1534EF36A1CD5A","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKicssIR5KDT8mEXiciadjkxNHr83EicBsD8Ln9Lwrc6BiczFZcwbeFOicUA4QmsFHp3DFDMBN2jVcAmggA/132","comment_is_top":false,"comment_ctime":1544027343,"is_pvip":false,"replies":[{"id":"16826","content":"ä½ è¿™ä¸ªæœºå™¨çš„ioä¸è¡Œâ€¦ <br>ä½ æŠŠinnodb_flush_log_at_trx_commit å’Œ sync_binlog éƒ½è®¾ç½®æˆ0æ¥æµ‹å§","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544066538,"ip_address":"","comment_id":47063,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1544027343","product_id":100020801,"comment_content":"è€å¸ˆï¼šä¸‹é¢é“¾æ¥ç›´æ¥ç‚¹å‡»å°±å¥½ï¼š<br>http:&#47;&#47;www.ye7zi.xyz:8000&#47;<br>è¿™æ˜¯æˆ‘çš„ç¾å›½æœåŠ¡å™¨ï¼Œå¾ˆå®‰å…¨ï¼","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431650,"discussion_content":"ä½ è¿™ä¸ªæœºå™¨çš„ioä¸è¡Œâ€¦ \nä½ æŠŠinnodb_flush_log_at_trx_commit å’Œ sync_binlog éƒ½è®¾ç½®æˆ0æ¥æµ‹å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544066538,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":47057,"user_name":"ye7zi","can_delete":false,"product_type":"c1","uid":1271757,"ip_address":"","ucode":"1534EF36A1CD5A","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKicssIR5KDT8mEXiciadjkxNHr83EicBsD8Ln9Lwrc6BiczFZcwbeFOicUA4QmsFHp3DFDMBN2jVcAmggA/132","comment_is_top":false,"comment_ctime":1544026884,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1544026884","product_id":100020801,"comment_content":"è€å¸ˆï¼Œè¿™ä¹ˆæ™šè¿˜æ²¡ç¡å‘€ è¾›è‹¦å“ˆ<br>æˆ‘æŠŠç»“æœæ”¾åœ¨ç¾å›½æœåŠ¡å™¨ä¸Šï¼Œä¸€ä¼šå‘é“¾æ¥","like_count":0},{"had_liked":false,"id":47043,"user_name":"ye7zi","can_delete":false,"product_type":"c1","uid":1271757,"ip_address":"","ucode":"1534EF36A1CD5A","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKicssIR5KDT8mEXiciadjkxNHr83EicBsD8Ln9Lwrc6BiczFZcwbeFOicUA4QmsFHp3DFDMBN2jVcAmggA/132","comment_is_top":false,"comment_ctime":1544025173,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1544025173","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæ‚¨å¥½ï¼Œé—®ä¸€ä¸‹ï¼Œæ’äºº10ä¸‡æ¡éå¸¸æ…¢ï¼š<br>ç¯å¢ƒï¼šè™šæ‹Ÿæœºï¼Œ4c,8Gå†…å­˜ï¼Œcentos6.5ï¼Œmysql5.7.24ï¼Œå¼€binlogï¼›<br><br>æ’10ä¸‡æ¡ï¼Œåˆ°ç°åœ¨ï¼Œä¸€ä¸ªå°æ—¶äº†ï¼Œè¿˜æ²¡ç»“æŸï¼Œæ­¤æ—¶ï¼šbinlogæ—¥å¿—ï¼š19MBï¼›æ•°æ®æ–‡ä»¶ï¼št.ibd 13M<br><br>ç„¶åï¼šåœ¨æ’å…¥çš„è¿‡ç¨‹ä¸­ï¼šiostatå’Œvmstatæµ‹è¯•ç£ç›˜ï¼š<br>[root@vm205 test]# iostat -x 1 5<br><br>avg-cpu:  %user   %nice %system %iowait  %steal   %idle<br>           0.22    0.00    0.25    0.83    0.00   98.70<br>Device:         rrqm&#47;s   wrqm&#47;s     r&#47;s     w&#47;s   rsec&#47;s   wsec&#47;s avgrq-sz avgqu-sz   await r_await w_await  svctm  %util<br>sda               0.00     7.00    0.00   87.00     0.00   752.00     8.64     1.48   17.22    0.00   17.22  11.44  99.50<br>dm-0              0.00     0.00    0.00   93.00     0.00   744.00     8.00     1.81   19.62    0.00   19.62  10.69  99.40<br>[root@vm205 test]# vmstat 1 5<br>procs -----------memory---------- ---swap-- -----io---- --system-- -----cpu-----<br> r  b   swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa st<br> 0  1      0 7924356 227072 3370624    0    0     0   536 1497 2757  0  1 75 24  0<br>[root@vm205 test]# <br><br>æœ€åï¼šorionæµ‹è¯•IOPS:<br><br>[root@vm205 iops]# .&#47;orion_linux_x86-64 -run advanced -testname zhang -num_disks 1 -size_small 8 -size_large 8 -type rand <br>ORION: ORacle IO Numbers -- Version 11.1.0.7.0<br>zhang_20181205_2321<br>Test will take approximately 9 minutes<br>Larger caches may take longer<br><br>[root@vm205 iops]# more zhang_20181205_2321_summary.txt <br>ORION VERSION 11.1.0.7.0<br><br>Commandline:<br>-run advanced -testname zhang -num_disks 1 -size_small 8 -size_large 8 -type rand <br><br>This maps to this test:<br>Test: zhang<br>Small IO size: 8 KB<br>Large IO size: 8 KB<br>IO Types: Small Random IOs, Large Random IOs<br>Simulated Array Type: CONCAT<br>Write: 0%<br>Cache Size: Not Entered<br>Duration for each Data Point: 60 seconds<br>Small Columns:,      0<br>Large Columns:,      0,      1,      2<br>Total Data Points: 8<br><br>Name: &#47;dev&#47;sda1 Size: 209715200<br>1 FILEs found.<br><br>Maximum Large MBPS=96.14 @ Small=0 and Large=2<br>Maximum Small IOPS=15930 @ Small=4 and Large=0<br>Minimum Small Latency=0.15 @ Small=1 and Large=0<br><br>è€å¸ˆï¼šï¼šï¼šæ‚¨å¥½ï¼š<br><br>æ‚¨èƒ½å¸®å¿™çœ‹çœ‹   ç»™ç‚¹åˆ†ææ„è§å—ï¼Ÿï¼Ÿå¤šè°¢äº†ã€‚<br>","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":153278,"discussion_content":"ä½ æŠŠinnodb_flush_log_at_trx_commit å’Œ sync_binlog éƒ½è®¾ç½®æˆ0æ¥æµ‹å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580041776,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":47008,"user_name":"é˜¿ä¸½","can_delete":false,"product_type":"c1","uid":1170970,"ip_address":"","ucode":"C01D32E7165302","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erJFlHhylrbLANtehiaX50wgVa2Z1ibQAdLpgyW4gCpEyOKEI9bPNZZBiabrP2oCleZWc2KKyKADz8tg/132","comment_is_top":false,"comment_ctime":1544018626,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1544018626","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæˆ‘ç¢°åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œupdateæ—¶where id=x and tid=xx and sid=xxxï¼Œidæ˜¯ä¸»é”®ï¼Œåä¸¤åˆ—åˆ†åˆ«æœ‰ç´¢å¼•ï¼Œæ‰§è¡Œè®¡åˆ’ç”¨çš„primaryï¼Œä½†typeæ˜¯rangeï¼Œè®©äººè´¹è§£ï¼Œä½¿ç”¨selectæ‰§è¡Œè®¡åˆ’çš„typeå´æ˜¯constï¼Œï¼Œå¸Œæœ›è€å¸ˆæœ‰æ—¶é—´å¸®å¿™è§£ç­”ï¼Œè°¢è°¢ï¼","like_count":0},{"had_liked":false,"id":47002,"user_name":"nero","can_delete":false,"product_type":"c1","uid":1110627,"ip_address":"","ucode":"BACD4A95B5FA09","user_header":"https://static001.geekbang.org/account/avatar/00/10/f2/63/1f495e51.jpg","comment_is_top":false,"comment_ctime":1544017243,"is_pvip":false,"replies":[{"id":"16770","content":"å¦‚æœæœ‰æ»¡è¶³æ¡ä»¶çš„è¡Œï¼Œç¡®å®å°±æ˜¯ä½ è¯´çš„è¿™ä¹ˆåšçš„ï¼Œ<br>ä½†æ˜¯è¿™ä¸ªä¾‹å­é‡Œé¢å¹¶æ²¡æœ‰æ»¡è¶³çš„å“¦<br><br>","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544018559,"ip_address":"","comment_id":47002,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1544017243","product_id":100020801,"comment_content":"è€å¸ˆæˆ‘æœ‰ä¸ªå¥‡æ€ªçš„é—®é¢˜è¯·æ•™ä¸‹æ‚¨ï¼š select * from t where (a between 1 and 1000)  and (b between 50000 and 100000) order by b limit 1; mysqlåœ¨é€‰é”™ç´¢å¼•çš„æƒ…å†µä¸‹ï¼Œä¸ºå•¥ä¸è€ƒè™‘åé¢çš„limit1ï¼Œæ¯”å¦‚é”™è¯¯ç”¨äº†bç´¢å¼•ï¼ŒæŸ¥ä¸€æ¡åï¼Œç›´æ¥åˆ¤æ–­aæ˜¯å¦æ»¡è¶³æ¡ä»¶ï¼Œaæ»¡è¶³æ¡ä»¶çš„è¯å°±ç›´æ¥è¿”å›å¥½äº†ï¼Œå› ä¸ºbæœ¬èº«å°±æ˜¯æœ‰åºçš„ï¼Œè¿™æ ·å°±åªè¦æ‰«æå‰å‡ ä¸ªå°±å¥½äº†ï¼Œä¸ºå•¥è¦æŠŠbçš„50001ä¸ªå…¨æŸ¥å‡ºæ¥å†è¿›è¡Œaçš„åˆ¤æ–­ï¼Œæœ€åå†æ’åºè¿”å›ä¸€ä¸ªã€‚<br>å¯èƒ½æœ‰ç‚¹å°ç™½å“ˆ<br><br>","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431632,"discussion_content":"å¦‚æœæœ‰æ»¡è¶³æ¡ä»¶çš„è¡Œï¼Œç¡®å®å°±æ˜¯ä½ è¯´çš„è¿™ä¹ˆåšçš„ï¼Œ\nä½†æ˜¯è¿™ä¸ªä¾‹å­é‡Œé¢å¹¶æ²¡æœ‰æ»¡è¶³çš„å“¦\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544018559,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":46975,"user_name":"Wrelon","can_delete":false,"product_type":"c1","uid":1306021,"ip_address":"","ucode":"8670BDBF317A36","user_header":"https://static001.geekbang.org/account/avatar/00/13/ed/a5/ca3b4cc4.jpg","comment_is_top":false,"comment_ctime":1544013975,"is_pvip":false,"replies":[{"id":"16779","content":"ä½ è¿™æ ·æè¿°æˆ‘å¾ˆéš¾å›ç­”â€¦ ç¡®ä¿ä¸šåŠ¡å®‰å…¨çš„æƒ…å†µä¸‹ï¼Œanalyzeä¸€æŠŠï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544020156,"ip_address":"","comment_id":46975,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1544013975","product_id":100020801,"comment_content":"è€å¸ˆï¼Œä»Šå¤©åšä¼˜åŒ–çš„æ—¶å€™ç¢°åˆ°ç±»ä¼¼é—®é¢˜äº†ï¼Œexplainåˆ†æSQLå‘ç°é¢„è®¡ç´¢å¼•ä¸ºç©ºï¼Œå®é™…ç´¢å¼•ä¸ºä¸¤å¼ è¡¨çš„ç´¢å¼•ï¼Œä½†æ˜¯rowsä¸º62wè·Ÿ8wï¼Œä¹Ÿå°±æ˜¯å…¨è¡¨æ‰«æäº†ï¼Œä½†æ˜¯ç¡®å®æœ‰ç”¨åˆ°ç´¢å¼•ï¼Œè¯·é—®è¯¥æ€ä¹ˆè§£å†³ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431624,"discussion_content":"ä½ è¿™æ ·æè¿°æˆ‘å¾ˆéš¾å›ç­”â€¦ ç¡®ä¿ä¸šåŠ¡å®‰å…¨çš„æƒ…å†µä¸‹ï¼Œanalyzeä¸€æŠŠï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544020156,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":46909,"user_name":"LeonğŸ“·","can_delete":false,"product_type":"c1","uid":1219496,"ip_address":"","ucode":"B9BBD1EFAAE5A2","user_header":"https://static001.geekbang.org/account/avatar/00/12/9b/a8/6a391c66.jpg","comment_is_top":false,"comment_ctime":1543999941,"is_pvip":false,"replies":[{"id":"16784","content":"Session Açš„æ“ä½œæ—¶é—´é¡ºåºå¯¹äº†ma","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544020390,"ip_address":"","comment_id":46909,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543999941","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæ˜¯ä¸æ˜¯æ–°ç‰ˆmysql5.7å·²ç»ä¿®å¤äº†ä½ è¯´çš„è¿™ä¸ªbugï¼Œæˆ‘çš„slow_logæ˜¯è¿™æ ·çš„<br>SET timestamp=1543999785;<br>set long_query_time=0;<br># Time: 2018-12-05T08:49:58.292037Z<br># User@Host: root[root] @ localhost []  Id:     7<br># Query_time: 0.017165  Lock_time: 0.000179 Rows_sent: 10001  Rows_examined: 10001<br>SET timestamp=1543999798;<br>select * from t where a between 10000 and 20000;<br># Time: 2018-12-05T08:50:04.762129Z<br># User@Host: root[root] @ localhost []  Id:     7<br># Query_time: 0.014629  Lock_time: 0.000170 Rows_sent: 10001  Rows_examined: 10001<br>SET timestamp=1543999804;<br>select * from t force index(a) where a between 10000 and 20000;","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431595,"discussion_content":"Session Açš„æ“ä½œæ—¶é—´é¡ºåºå¯¹äº†ma","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544020390,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":46889,"user_name":"æ— çœ ","can_delete":false,"product_type":"c1","uid":1123870,"ip_address":"","ucode":"FBFA936A884EAA","user_header":"https://static001.geekbang.org/account/avatar/00/11/26/1e/adc166df.jpg","comment_is_top":false,"comment_ctime":1543997426,"is_pvip":false,"replies":[{"id":"16787","content":"1. 2. è¿™ä¸ªæœ‰ç‚¹å¤æ‚æˆ‘æ²¡æƒ³å¥½æ€ä¹ˆæè¿°ï¼Œå®¹æˆ‘ä¸‰æ€â€¦<br>3. serverå±‚","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544022469,"ip_address":"","comment_id":46889,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543997426","product_id":100020801,"comment_content":"æœ‰äº›ä¸å¤ªæ˜ç™½ï¼Œå›¾11ä¸‹é¢æè¿°çš„â€œæˆ‘ä»¬ç”¨limit 100è®©ä¼˜åŒ–å™¨æ„è¯†åˆ°ï¼Œä½¿ç”¨bç´¢å¼•ä»£ä»·æ˜¯å¾ˆé«˜çš„â€è¿™å¥ï¼Œlimit 100æ€ä¹ˆå°±ä»£ä»·é«˜äº†ï¼Ÿå¦å¤–ï¼Œä¼˜åŒ–å™¨æ˜¯å¦‚ä½•åˆ†ælimitå­å¥çš„ï¼Ÿå¯¹äºlimit å­å¥æ˜¯åœ¨å¼•æ“å±‚è¿˜æ˜¯serverå±‚èµ·ä½œç”¨çš„ï¼Ÿæœ›è€å¸ˆè§£æƒ‘","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431588,"discussion_content":"1. 2. è¿™ä¸ªæœ‰ç‚¹å¤æ‚æˆ‘æ²¡æƒ³å¥½æ€ä¹ˆæè¿°ï¼Œå®¹æˆ‘ä¸‰æ€â€¦\n3. serverå±‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544022469,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":46886,"user_name":"Jason","can_delete":false,"product_type":"c1","uid":1005685,"ip_address":"","ucode":"8651661C362897","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJdic50nGmb0a4IhlUEbFOxN37ng7ziclUibx5zPRkFZVe9LKSQBeqd9J7DicTNbN63hriamcqmicqXzWVQ/132","comment_is_top":false,"comment_ctime":1543997034,"is_pvip":false,"replies":[{"id":"16789","content":"å…¶å®æˆ‘è§‰å¾—å¯ä»¥â€¦<br>åˆ†åŒºåˆ«å¤ªå¤šï¼Œæ»šåŠ¨å»ºä¸Šå»","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544022691,"ip_address":"","comment_id":46886,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543997034","product_id":100020801,"comment_content":"å¤§ç¥å¥½ï¼Œæå‰é—®ä¸€å¥ï¼ŒMySQLè¡¨åˆ†åŒºæ–¹æ¡ˆé è°±ä¹ˆ?æ¯å¤©äº§ç”Ÿä¸Šç™¾ä¸‡çš„å¤§è¡¨ï¼Œæƒ³æŒ‰æ—¶é—´è¿›è¡Œåˆ†åŒºï¼Œä¸çŸ¥é“ä¼šä¸ä¼šè¸©å‘ï¼Œçœ‹å¾ˆå¤šäººè¯´ä¸å»ºè®®ç”¨ã€‚","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431586,"discussion_content":"å…¶å®æˆ‘è§‰å¾—å¯ä»¥â€¦\nåˆ†åŒºåˆ«å¤ªå¤šï¼Œæ»šåŠ¨å»ºä¸Šå»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544022691,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":46862,"user_name":"ajlidue","can_delete":false,"product_type":"c1","uid":1308376,"ip_address":"","ucode":"D6B29E941958E8","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83er6NXib2NGaTAAEe2KCcibH2FiafOOD73kQdcuAMGrnRib5CDWXum0SWDOM9NnWicbUsDpghmxEmJtpk9w/132","comment_is_top":false,"comment_ctime":1543993207,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543993207","product_id":100020801,"comment_content":"5.6.24ï¼Œshow variables like â€˜tx_isolationâ€™ ä¸ºREPEATABLE-READï¼Œæœªå¤ç°ï¼Œä¸”explainçš„rowsä¸º10000","like_count":0},{"had_liked":false,"id":46854,"user_name":"lianjie1229","can_delete":false,"product_type":"c1","uid":1302615,"ip_address":"","ucode":"C13DD612602DA9","user_header":"","comment_is_top":false,"comment_ctime":1543991590,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543991590","product_id":100020801,"comment_content":"ç¬¬ä¸€ä¸ªé€‰é”™ç´¢å¼•çš„ä¾‹å­ï¼Œåœ¨5.7.24ç‰ˆæœ¬ä¸Šæ²¡å¤ç°å‡ºæ¥<br>session A:<br>| transaction_isolation                                    | REPEATABLE-READ |<br>13 rows in set (0.01 sec)<br>mysql&gt; start transaction with consistent snapshot;<br>Query OK, 0 rows affected (0.00 sec)<br>mysql&gt; select now();<br>+---------------------+<br>| now()               |<br>+---------------------+<br>| 2018-12-04 22:20:03 |<br>+---------------------+<br>1 row in set (0.00 sec)<br><br>mysql&gt; select now();<br>+---------------------+<br>| now()               |<br>+---------------------+<br>| 2018-12-04 22:22:16 |<br>+---------------------+<br>1 row in set (0.00 sec)<br>mysql&gt; commit;<br>Query OK, 0 rows affected (0.00 sec)<br>session B:<br>mysql&gt; select now();<br>+---------------------+<br>| now()               |<br>+---------------------+<br>| 2018-12-04 22:20:20 |<br>+---------------------+<br>1 row in set (0.00 sec)<br>mysql&gt;<br>mysql&gt; delete from t;<br>Query OK, 100000 rows affected (0.66 sec)<br>mysql&gt; call idata();<br>Query OK, 1 row affected (52.57 sec)<br>mysql&gt; select now();<br>+---------------------+<br>| now()               |<br>+---------------------+<br>| 2018-12-04 22:21:57 |<br>+---------------------+<br>1 row in set (0.01 sec)<br><br>mysql&gt; explain select * from t where a between 10000 and 20000;<br>+----+-------------+-------+------------+-------+---------------+------+---------+------+-------+----------+-----------------------+<br>| id | select_type | table | partitions | type  | possible_keys | key  | key_len | ref  | rows  | filtered | Extra                 |<br>+----+-------------+-------+------------+-------+---------------+------+---------+------+-------+----------+-----------------------+<br>|  1 | SIMPLE      | t     | NULL       | range | a             | a    | 5       | NULL | 10001 |   100.00 | Using index condition |<br>","like_count":0},{"had_liked":false,"id":46846,"user_name":"æœ¨å¶äººKing","can_delete":false,"product_type":"c1","uid":1028805,"ip_address":"","ucode":"0BDCA51E6F0B76","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b2/c5/6ae0be56.jpg","comment_is_top":false,"comment_ctime":1543990678,"is_pvip":false,"replies":[{"id":"16747","content":"æ²¡åŒºåˆ«","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544011941,"ip_address":"","comment_id":46846,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543990678","product_id":100020801,"comment_content":"è€å¸ˆä½ å¥½, è¿™ä¸ªåˆ›å»ºç´¢å¼•çš„æ—¶å€™,æˆ‘çœ‹åˆ°è¿™é‡Œç»å¸¸ç”¨çš„æ˜¯key,   è€Œä¸æ˜¯index.  è¿™ä¸ªæœ‰ä»€ä¹ˆåŒºåˆ«å—?","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431566,"discussion_content":"æ²¡åŒºåˆ«","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544011941,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":46843,"user_name":"bowenz","can_delete":false,"product_type":"c1","uid":1127589,"ip_address":"","ucode":"A58FF6F9E4040C","user_header":"https://static001.geekbang.org/account/avatar/00/11/34/a5/db01dc4f.jpg","comment_is_top":false,"comment_ctime":1543990100,"is_pvip":false,"replies":[{"id":"16746","content":"å‘ä¸ªå¾®åšæˆ–åšå®¢ï¼Œç„¶åè´´åœ°å€ã€‚æˆ‘ä¹Ÿç”¨çš„5.7.21â€¦","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544011801,"ip_address":"","comment_id":46843,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543990100","product_id":100020801,"comment_content":"åœ¨5.7.21ç‰ˆæœ¬æ²¡æœ‰å‡ºç°æ¡ˆä¾‹1çš„æƒ…å†µ <br>ç•™è¨€å¥½åƒä¸Šä¸äº†æˆªå›¾","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431564,"discussion_content":"å‘ä¸ªå¾®åšæˆ–åšå®¢ï¼Œç„¶åè´´åœ°å€ã€‚æˆ‘ä¹Ÿç”¨çš„5.7.21â€¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544011801,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":46818,"user_name":"Tony Du","can_delete":false,"product_type":"c1","uid":1001661,"ip_address":"","ucode":"F5FCC400E615EA","user_header":"https://static001.geekbang.org/account/avatar/00/0f/48/bd/6c7d4230.jpg","comment_is_top":false,"comment_ctime":1543986178,"is_pvip":false,"replies":[{"id":"16714","content":"å‰é¢çš„è¿‡ç¨‹æœ‰ä¸ªç†è§£ä¸å¤ªå¯¹ï¼š<br><br>å¦‚æœmergeè¿˜æ²¡åšï¼Œç£ç›˜ä¸Špage 2çš„æ•°æ®æ˜¯ä¸ä¼šå˜çš„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543990166,"ip_address":"","comment_id":46818,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543986178","product_id":100020801,"comment_content":"å¯¹äºredo logï¼Œåå°ä¼šå®šæœŸæŠŠredo logçš„å†…å®¹åˆ·åˆ°ç£ç›˜ï¼Œç„¶åå¯¹äºchange bufferï¼Œåå°ä¹Ÿä¼šå®šæœŸåšmergeæ“ä½œï¼ˆæˆ–è€…å½“è®¿é—®æ•°æ®é¡µçš„æ—¶å€™åšå®šæœŸæ“ä½œï¼‰ã€‚é‚£å½“redo logåˆ·åˆ°ç£ç›˜ä¸Šåï¼Œè¯»å–ç£ç›˜ä¸Šçš„æ•°æ®é¡µå°±æ˜¯æœ€æ–°çš„äº†ï¼Œåˆ™æ­¤æ—¶å½“è¯»å–æ•°æ®é¡µæ—¶çš„mergeæ“ä½œï¼ˆmergeæ“ä½œ ï¼ æ›´æ–°æ“ä½œ ï¼‹ è€çš„æ•°æ®é¡µé¢ï¼‰ä¸å°±æ˜¾å¾—ä¸ä¸æ­£ç¡®äº†ï¼Ÿ<br>æ¢ä¸€ä¸ªè§’åº¦é—®ï¼Œredo logå®šæœŸåˆ·åˆ°ç£ç›˜å’Œchange bufferå®šæœŸmergeæ“ä½œï¼ˆä¹‹åæŠŠè„é¡µåˆ·åˆ°ç£ç›˜ï¼‰ï¼Œä¹‹é—´æœ‰ä»€ä¹ˆè”ç³»ï¼Ÿå› ä¸ºå®ƒä»¬éƒ½ä¼šå°†æœ€æ–°çš„æ•°æ®åˆ·åˆ°ç£ç›˜ä¸Šã€‚å¦‚æœæœ‰ä¸¤æ¡å¹¶è¡Œçš„çº¿å»åˆ·æœ€æ–°çš„æ•°æ®åˆ°ç£ç›˜ï¼Œåˆ™ä¸¤è€…ä¹‹é—´å¦‚ä½•åŒæ­¥ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431556,"discussion_content":"å‰é¢çš„è¿‡ç¨‹æœ‰ä¸ªç†è§£ä¸å¤ªå¯¹ï¼š\n\nå¦‚æœmergeè¿˜æ²¡åšï¼Œç£ç›˜ä¸Špage 2çš„æ•°æ®æ˜¯ä¸ä¼šå˜çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543990166,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":46806,"user_name":"éƒ­æ±Ÿä¼Ÿ","can_delete":false,"product_type":"c1","uid":1313994,"ip_address":"","ucode":"613D638619B5A2","user_header":"https://static001.geekbang.org/account/avatar/00/14/0c/ca/6173350b.jpg","comment_is_top":false,"comment_ctime":1543984778,"is_pvip":false,"replies":[{"id":"16715","content":"99722å·²ç»ç®—æ˜¯ä¸é”™å•¦ï¼ŒæŒºæ¥è¿‘çš„äº†â€¦","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543990249,"ip_address":"","comment_id":46806,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543984778","product_id":100020801,"comment_content":"é‡å¤æµ‹è¯•å‡ æ¬¡å§‹ç»ˆæ— æ³•è·å–æ­£ç¡®çš„ç»Ÿè®¡ä¿¡æ¯ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š<br>mysql&gt; show create table t;<br>| Table | Create Table   |<br>| t     | CREATE TABLE `t` (<br>  `id` int(11) NOT NULL,<br>  `a` int(11) DEFAULT NULL,<br>  `b` int(11) DEFAULT NULL,<br>  PRIMARY KEY (`id`),<br>  KEY `a` (`a`),<br>  KEY `b` (`b`)<br>) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 |<br>æŒ‰ç…§ä¸“æ è„šæœ¬æ’å…¥æ•°æ®åï¼š<br>mysql&gt; select count(*) from t where a between 10001 and 20000;<br>| count(*) |<br>|    10000 |<br>æ‰§è¡Œè®¡åˆ’rowsç†è®ºå€¼åº”è¯¥åœ¨10000é™„è¿‘ï¼Œå®é™…å´æ˜¯18900 <br>mysql&gt; explain select * from t   where a between 10001 and 20000 ;<br>| id | select_type | table | partitions | type | possible_keys | key  | key_len | ref  | rows  | filtered | Extra       |<br>+----+-------------+-------+------------+------+---------------+------+---------+------+-------<br>|  1 | SIMPLE      | t     | NULL       | ALL  | a             | NULL | NULL    | NULL | 99722 |    18.95 | Using where |<br><br>mysql&gt; explain select * from t  force index(a)  where a between 10001 and 20000 ;<br>| id | select_type | table | partitions | type  | possible_keys | key  | key_len | ref  | rows  | filtered | Extra                 |<br>+----+-------------+-------+------------+-------+---------------+------+---------+------+-------<br>|  1 | SIMPLE      | t     | NULL       | range | a             | a    | 5       | NULL | 18900 |   100.00 | Using index condition |<br>1 row in set, 1 warning (0.00 sec)<br><br>mysql&gt; analyze table t;<br>| Table      | Op      | Msg_type | Msg_text |<br>| sysbench.t | analyze | status   | OK       |<br><br>mysql&gt; explain select * from t   where a between 10001 and 20000 ;<br>| id | select_type | table | partitions | type | possible_keys | key  | key_len | ref  | rows  | filtered | Extra       |<br>+----+-------------+-------+------------+------+---------------+------+<br>|  1 | SIMPLE      | t     | NULL       | ALL  | a             | NULL | NULL    | NULL | 99722 |    18.95 | Using where |<br><br>mysql&gt; show variables like &#39;%stats_persistent%&#39;;<br>| innodb_stats_persistent              | ON    |<br>| innodb_stats_persistent_sample_pages | 20    |<br>æ‰§è¡Œ truncate table t;åé‡æ–°æ’å…¥æ•°æ®ä¾ç„¶æ˜¯ä¸Šé¢çš„æƒ…å†µ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431552,"discussion_content":"99722å·²ç»ç®—æ˜¯ä¸é”™å•¦ï¼ŒæŒºæ¥è¿‘çš„äº†â€¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543990249,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":46805,"user_name":"æ ‹èƒ½","can_delete":false,"product_type":"c1","uid":1006849,"ip_address":"","ucode":"8BD9C939D3E8E1","user_header":"https://static001.geekbang.org/account/avatar/00/0f/5d/01/9cd84003.jpg","comment_is_top":false,"comment_ctime":1543984679,"is_pvip":false,"replies":[{"id":"16706","content":"åˆ ä¸æ‰ï¼ŒMDLé”ä½äº†","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543985379,"ip_address":"","comment_id":46805,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543984679","product_id":100020801,"comment_content":"çœ‹åˆ°è¿™ç¯‡æ–‡ç« æˆ‘çªç„¶æœ‰äº†ä¸ªæ–°çš„MVCCç–‘æƒ‘ï¼Œå¸Œæœ›è€å¸ˆè§£æƒ‘ä¸‹ã€‚è°¢è°¢ã€‚<br>æˆ‘ç†è§£Deleteæ“ä½œæ˜¯ç‰©ç†åˆ é™¤ã€‚å¦‚æœæœ‰ä¸¤ä¸ªäº‹åŠ¡ï¼Œäº‹åŠ¡Aâ€œè¯»Tè¡¨ï¼Œå†æ›´æ–°Tè¡¨â€çš„â€œæ›´æ–°Tè¡¨â€å‰äº‹åŠ¡Båˆ é™¤äº†Tè¡¨ï¼Œé‚£æ›´æ–°è¿˜ä¼šæˆåŠŸå—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431551,"discussion_content":"åˆ ä¸æ‰ï¼ŒMDLé”ä½äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543985379,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":46786,"user_name":"Rainbow","can_delete":false,"product_type":"c1","uid":1214835,"ip_address":"","ucode":"0651CFFE920BE7","user_header":"https://static001.geekbang.org/account/avatar/00/12/89/73/e1e01096.jpg","comment_is_top":false,"comment_ctime":1543981532,"is_pvip":false,"replies":[{"id":"16708","content":"äº‹åŠ¡éš”ç¦»çº§åˆ«æ˜¯å¯é‡å¤è¯»å—ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543985634,"ip_address":"","comment_id":46786,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543981532","product_id":100020801,"comment_content":"è€å¸ˆä½ å¥½ï¼Œæˆ‘æŠŠæ–‡ç« å¼€å¤´çš„å®éªŒæŒ‰æ­¥éª¤åšäº†ã€‚<br>æ‰§è¡Œäº†session A å’Œsession B çš„æ“ä½œä¹‹åï¼ŒMySQLå¹¶æ²¡æœ‰é€‰é”™ç´¢å¼•ï¼Œç”¨çš„è¿˜æ˜¯`a`è¿™ä¸ªç´¢å¼•ã€‚<br>æ˜¯å› ä¸ºMySQLç‰ˆæœ¬é—®é¢˜å—ï¼Ÿ<br>æˆ‘ç”¨çš„æ˜¯5.7<br>mysql&gt; select version();<br>+-------------------------+<br>| version()               |<br>+-------------------------+<br>| 5.7.24-0ubuntu0.16.04.1 <br><br>å¸Œæœ›è€å¸ˆèƒ½è§£ç­”ä¸€ä¸‹ï¼šï¼‰<br>","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431545,"discussion_content":"äº‹åŠ¡éš”ç¦»çº§åˆ«æ˜¯å¯é‡å¤è¯»å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543985634,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":46770,"user_name":"HuaMax","can_delete":false,"product_type":"c1","uid":1118488,"ip_address":"","ucode":"2E78DE1AF098AF","user_header":"https://static001.geekbang.org/account/avatar/00/11/11/18/8cee35f9.jpg","comment_is_top":false,"comment_ctime":1543979201,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543979201","product_id":100020801,"comment_content":"è¯¾åé¢˜æˆ‘çš„ç†è§£æ˜¯ï¼Œsession Aåœ¨Bä¹‹å‰å¯åŠ¨ï¼Œå¯¹äºsession Bï¼ŒAå¯¹æ•°æ®çš„å˜æ›´ä¸å¯è§ï¼Œå› æ­¤ç´¢å¼•åœ¨ç»Ÿè®¡æ—¶åªèƒ½æ‚²è§‚çš„åŠ ä¸Šsession Aè§†å›¾ä¸‹çš„ç»Ÿè®¡ä¿¡æ¯ï¼Œå¹¶ä¸”Bè‡ªå·±çš„äº‹åŠ¡å†…çš„å­˜å‚¨è¿‡ç¨‹æ’å…¥äº†1ä¸‡è¡Œæ•°æ®ï¼Œç”±äºæ²¡æœ‰æäº¤ï¼Œæ‰€ä»¥åŠ ä¸Šè¿™1ä¸‡è¡Œæ•°æ®ã€‚è¿™æ ·ç®—èµ·æ¥åº”è¯¥æ˜¯2ä¸‡ï¼Œä¸ºå•¥æ˜¯3ä¸‡å¤šï¼Œæ²¡æƒ³æ˜ç™½ï¼Œæœ›è§£æƒ‘","like_count":0},{"had_liked":false,"id":46768,"user_name":"å¤©ç‹","can_delete":false,"product_type":"c1","uid":1239337,"ip_address":"","ucode":"C074B2F9A5F007","user_header":"https://static001.geekbang.org/account/avatar/00/12/e9/29/629d9bb0.jpg","comment_is_top":false,"comment_ctime":1543978932,"is_pvip":false,"replies":[{"id":"16695","content":"Joinçš„é¡ºåºMySQL ä¼šå¸®ä½ é€‰çš„å“ˆï¼Œ<br><br>è¿™ä¸ªæˆ‘å¾—æƒ³ä¸‹ï¼Œæ”¾åˆ°ç¯‡æ–‡ç« å±•å¼€","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543982763,"ip_address":"","comment_id":46768,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543978932","product_id":100020801,"comment_content":"è¯·æ•™ä¸€ä¸ªé—®é¢˜ï¼šå•è¡¨ç´¢å¼•çš„åˆ†æç›¸å¯¹ç®€å•ä¸€äº›ã€‚å¦‚æœæ˜¯å¤šè¡¨å…³è”æŸ¥è¯¢ï¼Œå¤šä¸ªè¡¨çš„æ•°æ®é‡å¾ˆå¤§ï¼Œwhereæ¡ä»¶é‡Œé¢æœ‰å¤šä¸ªåˆ—ï¼Œ<br>æ€ä¹ˆæ§åˆ¶joinå’Œonçš„é¡ºåºï¼Œwhereæ¡ä»¶é‡Œé¢å­—æ®µçš„é¡ºåºï¼Œæ€ä¹ˆå»ºç´¢å¼•ï¼Œè®©æŸ¥è¯¢æ€§èƒ½è¾¾åˆ°æœ€ä¼˜ï¼Œæœ‰æˆå‹çš„è§„å¾‹å—ï¼Œèƒ½å¦é€šè¿‡ä¸€äº›ä¾‹å­è®²ä¸‹ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431539,"discussion_content":"Joinçš„é¡ºåºMySQL ä¼šå¸®ä½ é€‰çš„å“ˆï¼Œ\n\nè¿™ä¸ªæˆ‘å¾—æƒ³ä¸‹ï¼Œæ”¾åˆ°ç¯‡æ–‡ç« å±•å¼€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543982763,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":46755,"user_name":"çœ‹ä¸ç©¿","can_delete":false,"product_type":"c1","uid":1259769,"ip_address":"","ucode":"8D35C36C7A35F0","user_header":"https://static001.geekbang.org/account/avatar/00/13/38/f9/2b4755b5.jpg","comment_is_top":false,"comment_ctime":1543977806,"is_pvip":false,"replies":[{"id":"16693","content":"å—¯ï¼ŒMySQL çš„ä¼˜åŒ–å™¨æœ‰æ—¶å€™å°±æ˜¯ä¸ä¼šåšé‚£äº›ï¼Œæˆ‘ä»¬è§‰å¾—â€œæœ¬è¯¥åšâ€çš„äº‹æƒ…ğŸ˜“","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543982553,"ip_address":"","comment_id":46755,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543977806","product_id":100020801,"comment_content":"è€å¸ˆï¼ŒMySQLè¿˜æœ‰ä¸ªä¸èµ°ç´¢å¼•çš„bugï¼Œæ„Ÿè§‰å¾ˆè¯¡å¼‚ï¼Œç”Ÿäº§ä¸Šç¢°åˆ°å¤šæ¬¡äº†ï¼Œå°±æ˜¯update  ... set ...  where in selectï¼Œèµ°çš„ç´¢å¼•ä¸æ˜¯æˆ‘ä»¬æœŸæœ›çš„ï¼Œå¿…é¡»è½¬åŒ–ä¸ºupdate ... join ... set ...ã€‚<br>å‚è€ƒæ–‡æ¡£ï¼šhttps:&#47;&#47;blog.csdn.net&#47;defonds&#47;article&#47;details&#47;46745143<br>ä»¥å‰åœ¨å­¦oracleçš„æ—¶å€™ï¼Œè€å¸ˆå¸¸è¯´oracleçš„ä¼˜åŒ–å™¨æ˜¯æ´»çš„ã€‚å¯æ˜¯åˆ°äº†mysqlè¿™ï¼Œæœ‰æ—¶å€™åªèƒ½å‘µå‘µäº†","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431531,"discussion_content":"å—¯ï¼ŒMySQL çš„ä¼˜åŒ–å™¨æœ‰æ—¶å€™å°±æ˜¯ä¸ä¼šåšé‚£äº›ï¼Œæˆ‘ä»¬è§‰å¾—â€œæœ¬è¯¥åšâ€çš„äº‹æƒ…ğŸ˜“","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543982553,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":46754,"user_name":"lianjie1229","can_delete":false,"product_type":"c1","uid":1302615,"ip_address":"","ucode":"C13DD612602DA9","user_header":"","comment_is_top":false,"comment_ctime":1543977686,"is_pvip":false,"replies":[{"id":"16696","content":"Session Aæ­£å¸¸å·¥ä½œäº†å—ï¼Ÿè¿‡ç¨‹æˆªå›¾çœ‹ä¸‹ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543982814,"ip_address":"","comment_id":46754,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543977686","product_id":100020801,"comment_content":"ç¬¬ä¸€ä¸ªé€‰é”™ç´¢å¼•çš„ä¾‹å­ï¼Œåœ¨5.7.24ç‰ˆæœ¬ä¸Šæ²¡å¤ç°å‡ºæ¥ï¼Œå…¶ä»–åŒå­¦æœ‰å¤ç°å‡ºæ¥çš„å—","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431530,"discussion_content":"Session Aæ­£å¸¸å·¥ä½œäº†å—ï¼Ÿè¿‡ç¨‹æˆªå›¾çœ‹ä¸‹ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543982814,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":46748,"user_name":"dancer","can_delete":false,"product_type":"c1","uid":1019036,"ip_address":"","ucode":"B8D5641A3AC490","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8c/9c/d48473ab.jpg","comment_is_top":false,"comment_ctime":1543976899,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543976899","product_id":100020801,"comment_content":"æ„Ÿè°¢è€å¸ˆçš„ç»†è‡´è®²è§£ï¼Œæ›¾ç»é¢è¯•è¿‡ç¨‹ä¸­å°±é‡åˆ°è¿‡ç±»ä¼¼çš„é—®ç´¢å¼•åŒºåˆ†åº¦çš„é—®é¢˜~","like_count":0},{"had_liked":false,"id":46676,"user_name":"Justin","can_delete":false,"product_type":"c1","uid":1305601,"ip_address":"","ucode":"D49723FEA66731","user_header":"https://static001.geekbang.org/account/avatar/00/13/ec/01/978d54af.jpg","comment_is_top":false,"comment_ctime":1543970763,"is_pvip":false,"replies":[{"id":"16678","content":"ä¼šï¼Œæ™®é€šç´¢å¼•ä¹Ÿè¦æ»¡è¶³äº‹åŠ¡éš”ç¦»çº§åˆ«ä¸‹çš„å¯è§æ€§è§„åˆ™","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543974639,"ip_address":"","comment_id":46676,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543970763","product_id":100020801,"comment_content":"æ™®é€šç´¢å¼•å’Œmvccæœ‰å…³ç³»å— ä¼šä¸ä¼šæ ¹æ®ä¸åŒçš„tx id æœ‰ä¸åŒçš„ç»“æœå‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431505,"discussion_content":"ä¼šï¼Œæ™®é€šç´¢å¼•ä¹Ÿè¦æ»¡è¶³äº‹åŠ¡éš”ç¦»çº§åˆ«ä¸‹çš„å¯è§æ€§è§„åˆ™","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543974639,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":46666,"user_name":"Justin","can_delete":false,"product_type":"c1","uid":1305601,"ip_address":"","ucode":"D49723FEA66731","user_header":"https://static001.geekbang.org/account/avatar/00/13/ec/01/978d54af.jpg","comment_is_top":false,"comment_ctime":1543970348,"is_pvip":false,"replies":[{"id":"16674","content":"ç´¢å¼•çš„å†…å®¹ï¼ˆé€»è¾‘ä¸Šï¼‰æ˜¯é©¬ä¸Šå˜åŒ–çš„ï¼Œå¦åˆ™æˆ‘ä»¬å†å»æŸ¥çš„æ—¶å€™å°±å‡ºé”™äº†ã€‚<br><br>ä½†æ˜¯ç‰©ç†ä¸Šï¼Œå¯èƒ½ä¼šæœ‰Change buffer,<br>å¦‚æœæ˜¯è¿™ç¯‡æ–‡ç« ä¸­è¯´çš„ç»Ÿè®¡ä¿¡æ¯ï¼Œä¸ä¼šæ¯æ¬¡æ›´æ–°éƒ½é‡æ–°ç»Ÿè®¡ï¼Œå‚è€ƒâ€œ1&#47;Mâ€é‚£æ®µ","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543974389,"ip_address":"","comment_id":46666,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543970348","product_id":100020801,"comment_content":"åˆ é™¤è¡Œä¹‹åç´¢å¼•ä¼šç«‹åˆ»åšå‡ºå˜åŒ–å—ï¼Ÿæ˜¯æ€ä¹ˆå˜åŒ–çš„å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431501,"discussion_content":"ç´¢å¼•çš„å†…å®¹ï¼ˆé€»è¾‘ä¸Šï¼‰æ˜¯é©¬ä¸Šå˜åŒ–çš„ï¼Œå¦åˆ™æˆ‘ä»¬å†å»æŸ¥çš„æ—¶å€™å°±å‡ºé”™äº†ã€‚\n\nä½†æ˜¯ç‰©ç†ä¸Šï¼Œå¯èƒ½ä¼šæœ‰Change buffer,\nå¦‚æœæ˜¯è¿™ç¯‡æ–‡ç« ä¸­è¯´çš„ç»Ÿè®¡ä¿¡æ¯ï¼Œä¸ä¼šæ¯æ¬¡æ›´æ–°éƒ½é‡æ–°ç»Ÿè®¡ï¼Œå‚è€ƒâ€œ1/Mâ€é‚£æ®µ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543974389,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":46654,"user_name":"ä¸€å¤§åªğŸ˜´","can_delete":false,"product_type":"c1","uid":1310960,"ip_address":"","ucode":"92F3D2B7F63568","user_header":"https://static001.geekbang.org/account/avatar/00/14/00/f0/08409e78.jpg","comment_is_top":false,"comment_ctime":1543969430,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1543969430","product_id":100020801,"comment_content":"è€å¸ˆï¼Œè”åˆç´¢å¼•çš„åŒºåˆ†åº¦å’‹çœ‹å•Šï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":153314,"discussion_content":"å¯ä»¥çœ‹ä¸€ä¸‹ç´¢å¼•çš„åŸºæ•°ï¼Œè¿™ä¸å°±æ˜¯åŒºåˆ†åº¦äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580043495,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":46639,"user_name":"404  had found","can_delete":false,"product_type":"c1","uid":1025939,"ip_address":"","ucode":"BF6983EB50AC74","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a7/93/62f03467.jpg","comment_is_top":false,"comment_ctime":1543967943,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1543967943","product_id":100020801,"comment_content":"ä¼˜åŒ–å™¨é€‰æ‹©ç´¢å¼•çš„åŸåˆ™æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå¯ä»¥ä»‹ç»ä¸‹å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":153330,"discussion_content":"é€‰æ‹©è¡Œæ•°æœ€å°‘çš„ï¼ŒèŠ‚çœCPUæ—¶é—´çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580044039,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":46637,"user_name":"404  had found","can_delete":false,"product_type":"c1","uid":1025939,"ip_address":"","ucode":"BF6983EB50AC74","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a7/93/62f03467.jpg","comment_is_top":false,"comment_ctime":1543967710,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543967710","product_id":100020801,"comment_content":"ä¸€æ¥¼çš„æ˜¯ä¸æ˜¯ç”¨äº†è”åˆæŸ¥è¯¢ï¼Œä¼˜åŒ–å™¨ä¼šé€‰æ‹©å°è¡¨å»é©±åŠ¨ï¼Œå¦‚æœå¦‚æœæ’åºå­—æ®µæ˜¯é©±åŠ¨è¡¨çš„å­—æ®µä¼šç”¨ç´¢å¼•çš„ï¼Œä¸ç„¶åªèƒ½æŒ‡å®šé©±åŠ¨è¡¨äº†ã€‚å¯ä»¥æ‰§è¡Œexplainçœ‹é©±åŠ¨è¡¨ï¼Œè¿ªå“¥0ç¬¬ä¸€ä¸ªå°±æ˜¯é©±åŠ¨è¡¨","like_count":0},{"had_liked":false,"id":46613,"user_name":"ç ä¸Šæœ‰é’±","can_delete":false,"product_type":"c1","uid":1081524,"ip_address":"","ucode":"BB10B8686DE9B0","user_header":"https://static001.geekbang.org/account/avatar/00/10/80/b4/4bce6198.jpg","comment_is_top":false,"comment_ctime":1543953645,"is_pvip":true,"replies":[{"id":"16665","content":"å—¯å—¯ï¼Œè¿™ç§ä¸æ˜¯ bug,è¿™æ˜¯ä¼˜åŒ–å™¨æ­£å¸¸å·¥ä½œäº†ğŸ˜„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1543974010,"ip_address":"","comment_id":46613,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543953645","product_id":100020801,"comment_content":"é‡åˆ°è¿‡è¿™æ ·ä¸€ç§æƒ…å†µï¼Œç´¢å¼•æ˜¯å»ºåœ¨ä¸€ä¸ªæ—¥æœŸç±»å‹çš„å­—æ®µï¼ŒèŒƒå›´æŸ¥è¯¢æ—¶ï¼Œè¦æŸ¥çš„æ•°é‡å°‘çš„æ—¶å€™å°±èµ°ç´¢å¼•ï¼Œæ•°é‡å¤§çš„æ—¶å€™å°±ä¸èµ°ç´¢å¼•ã€‚","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431492,"discussion_content":"å—¯å—¯ï¼Œè¿™ç§ä¸æ˜¯ bug,è¿™æ˜¯ä¼˜åŒ–å™¨æ­£å¸¸å·¥ä½œäº†ğŸ˜„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543974010,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}