{"id":113648,"title":"45 | 什么是测试金字塔？","content":"<ul>\n<li>\n<p>代码：<a href=\"https://gitee.com/geektime-geekbang/staffjoy\">https://gitee.com/geektime-geekbang/staffjoy</a></p>\n</li>\n<li>\n<p>课件：<a href=\"https://pan.baidu.com/s/1Q7eP3yZ1Vm8J2nhle5RzTQ\">https://pan.baidu.com/s/1Q7eP3yZ1Vm8J2nhle5RzTQ</a> 提取码: 1aeh</p>\n</li>\n</ul>","comments":[{"had_liked":false,"id":136989,"user_name":"面朝大海","can_delete":false,"product_type":"c3","uid":1600552,"ip_address":"","ucode":"E544A5441A0330","user_header":"https://static001.geekbang.org/account/avatar/00/18/6c/28/39a71e18.jpg","comment_is_top":false,"comment_ctime":1569571871,"is_pvip":false,"replies":[{"id":52571,"content":"我本人开发坚持测试驱动，前期有一些投入，但是中长期有回报。\n\n我之前团队要求他们测试驱动，我一般会做code review抽查。有些偷懒或者胆子大不写单元测试，如果产品上线出了问题，事后追溯是绕开流程或者没写单元测试，则年度绩效不能高于C(需要改进)。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1569589123,"ip_address":"","comment_id":136989,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100031401,"comment_content":"请教老师: 您之前所服务过的公司，单元测试代码都是必须要写的吗？身边大部分的人，都觉得写测试代码多花时间，影响开发进度，因此很少有项目真正去写单元测试代码。","like_count":10,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468893,"discussion_content":"我本人开发坚持测试驱动，前期有一些投入，但是中长期有回报。\n\n我之前团队要求他们测试驱动，我一般会做code review抽查。有些偷懒或者胆子大不写单元测试，如果产品上线出了问题，事后追溯是绕开流程或者没写单元测试，则年度绩效不能高于C(需要改进)。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1569589123,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2433704,"avatar":"","nickname":"戴磊磊","note":"","ucode":"0CC6B5D473C88C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":348689,"discussion_content":"单元测试其实非常重要，为此偷的懒，后期阶段都得补回来。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612679975,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":189715,"user_name":"彬清","can_delete":false,"product_type":"c3","uid":1220372,"ip_address":"","ucode":"04620BAC60F15F","user_header":"https://static001.geekbang.org/account/avatar/00/12/9f/14/b9505789.jpg","comment_is_top":false,"comment_ctime":1584542134,"is_pvip":false,"replies":[{"id":73419,"content":"可以采用嵌入式内存模式的Kafka做单元测试，参考网上资料：\nhttps:&#47;&#47;blog.mimacom.com&#47;testing-apache-kafka-with-spring-boot&#47;\nhttps:&#47;&#47;stackoverflow.com&#47;questions&#47;48753051&#47;simple-embedded-kafka-test-example-with-spring-boot\n","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1584791317,"ip_address":"","comment_id":189715,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100031401,"comment_content":"微服务需要订阅kafka消息进行消费，这种接收消息进行业务处理的情况怎么做单元测试？","like_count":2,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":487774,"discussion_content":"可以采用嵌入式内存模式的Kafka做单元测试，参考网上资料：\nhttps://blog.mimacom.com/testing-apache-kafka-with-spring-boot/\nhttps://stackoverflow.com/questions/48753051/simple-embedded-kafka-test-example-with-spring-boot\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584791317,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":178897,"user_name":"古德","can_delete":false,"product_type":"c3","uid":1037755,"ip_address":"","ucode":"E3F646BB73F60E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/d5/bb/98b93862.jpg","comment_is_top":false,"comment_ctime":1581849337,"is_pvip":false,"replies":[{"id":69736,"content":"同意，具体看场景上下文。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1582039942,"ip_address":"","comment_id":178897,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100031401,"comment_content":"个人觉得针对一些核心业务，以及业务场景有一定复杂度的功能，必须写单元测试，一方面是研发自己验证逻辑，另一方面是为了以后的重构。\n但对一些功能很简单，比如基本的增删改查一类的功能，不一定需要写单元测试。","like_count":1,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484010,"discussion_content":"同意，具体看场景上下文。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582039942,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":227596,"user_name":"VincentQ","can_delete":false,"product_type":"c3","uid":1226862,"ip_address":"","ucode":"BDA2CE2453881C","user_header":"https://static001.geekbang.org/account/avatar/00/12/b8/6e/0aae08d6.jpg","comment_is_top":false,"comment_ctime":1592440974,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100031401,"comment_content":"在外资银行搞end2end测试真心累啊😂系统跨时区不说，核心需要日终跑批才能完成计息和下游报表导出…","like_count":0},{"had_liked":false,"id":220587,"user_name":"xgbyl","can_delete":false,"product_type":"c3","uid":1363123,"ip_address":"","ucode":"1D48711210CAD4","user_header":"https://static001.geekbang.org/account/avatar/00/14/cc/b3/ac3e3d8f.jpg","comment_is_top":false,"comment_ctime":1590291074,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100031401,"comment_content":"Unit -&gt; Integration -&gt; Component -&gt; End-to-end -&gt; Exploratory","like_count":0}]}