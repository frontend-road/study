{"id":146715,"title":"02 | 内容综述","content":"","comments":[{"had_liked":false,"id":140095,"user_name":"Robin","can_delete":false,"product_type":"c3","uid":1190025,"ip_address":"","ucode":"C8951C5EA7A539","user_header":"https://static001.geekbang.org/account/avatar/00/12/28/89/475cbc55.jpg","comment_is_top":false,"comment_ctime":1570806322,"is_pvip":false,"replies":[{"id":54468,"content":"我没有用netty udp开发过，所以特地上社区看了下，15年就有人想要这个功能了，但是现在也还没有，我觉得你这个任务不太容易，因为没什么太成熟的代码可以抄，但是搞出来肯定很有成就感！","user_name":"作者回复","user_name_real":"Geek_9bc307","uid":1638649,"ctime":1571058600,"ip_address":"","comment_id":140095,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"想了解一下，用netty实现QUIC的难度和工作量有多大，项目有涉及，但是担心几个月做不完（毕竟有KPI），刚毕业的新手，对此缺乏认识","like_count":10,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"傅健","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470243,"discussion_content":"我没有用netty udp开发过，所以特地上社区看了下，15年就有人想要这个功能了，但是现在也还没有，我觉得你这个任务不太容易，因为没什么太成熟的代码可以抄，但是搞出来肯定很有成就感！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571058600,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":139827,"user_name":"hgf","can_delete":false,"product_type":"c3","uid":1085297,"ip_address":"","ucode":"A9649ECFDBD9E8","user_header":"https://static001.geekbang.org/account/avatar/00/10/8f/71/29fb7bc2.jpg","comment_is_top":false,"comment_ctime":1570753297,"is_pvip":false,"replies":[{"id":54110,"content":"看使用的协议，如果是http协议，那测试工具就多了，如果是自己定制的私有协议，只能自己写了，建议自己写工具来测，100%自己能控制，jmeter等等工具还不是完全自由控制的，然后测试上，注意几个方面:测试环境，软硬件和上线的一样，核心用户场景也要尽量模拟出来，然后也可以排除业务，把业务调用的地方给mock掉测测，测试的时候还要注意，最好和自己的场景一致，比如1台机器产生1000tps的压力和1000台机器一起产生1000tps的。课程设计上没加测试是因为测试的结果意义不大，因为脱离真实的业务，我们经常听到很多文章说netty百万链接多少吞吐量，但是我们不定能做到？为什么，业务不同，机器多少也不同。总之，性能测试是个非常大的话题，有点很肯定，尽量自己写工具测，不要依赖工具，特别是gui工具，个人看法","user_name":"作者回复","user_name_real":"Geek_9bc307","uid":1638649,"ctime":1570788150,"ip_address":"","comment_id":139827,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"老师，建议加一节讲讲netty应用开发好后，怎么做性能测试，容量测试。请问在这方面老师有什么实用的工具，案例，或者是方法吗？","like_count":6,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"傅健","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470129,"discussion_content":"看使用的协议，如果是http协议，那测试工具就多了，如果是自己定制的私有协议，只能自己写了，建议自己写工具来测，100%自己能控制，jmeter等等工具还不是完全自由控制的，然后测试上，注意几个方面:测试环境，软硬件和上线的一样，核心用户场景也要尽量模拟出来，然后也可以排除业务，把业务调用的地方给mock掉测测，测试的时候还要注意，最好和自己的场景一致，比如1台机器产生1000tps的压力和1000台机器一起产生1000tps的。课程设计上没加测试是因为测试的结果意义不大，因为脱离真实的业务，我们经常听到很多文章说netty百万链接多少吞吐量，但是我们不定能做到？为什么，业务不同，机器多少也不同。总之，性能测试是个非常大的话题，有点很肯定，尽量自己写工具测，不要依赖工具，特别是gui工具，个人看法","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570788150,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"傅健","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":29867,"discussion_content":"比如1台机器产生1000tps的压力和1000台机器一起产生1000tps的不一样，刚漏打字了，不好意思","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1570788318,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":140598,"user_name":"新一天","can_delete":false,"product_type":"c3","uid":1206286,"ip_address":"","ucode":"6D69AB90460EA1","user_header":"https://static001.geekbang.org/account/avatar/00/12/68/0e/30b97251.jpg","comment_is_top":false,"comment_ctime":1571014337,"is_pvip":false,"replies":[{"id":54487,"content":"做的事情不一样，pipe是通过包含两个channel一个读一个写(一个本地的tcp连接)，来做了一个管道，作用是运输了数据。，你仅仅一个channel做不了这个效果，所以pipe相当于借助了channel来提供了一个好用的功能给大家。所以pipe需要channel.所以你说的问题是为什么还需要pipe.等于说我有晾袜子的小夹子，为什么还需要买那种上面有很多小夹子的那种圆盘式的晾晒的(应该都买了吧)，能干掉别的事，比如二个小夹子可以加个小衣服什么的，不知道我可解释清楚了，哈","user_name":"作者回复","user_name_real":"Geek_9bc307","uid":1638649,"ctime":1571063985,"ip_address":"","comment_id":140598,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"老师问一下问题，NIO为什么有channel 还需要Pipe。","like_count":5,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"傅健","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470459,"discussion_content":"做的事情不一样，pipe是通过包含两个channel一个读一个写(一个本地的tcp连接)，来做了一个管道，作用是运输了数据。，你仅仅一个channel做不了这个效果，所以pipe相当于借助了channel来提供了一个好用的功能给大家。所以pipe需要channel.所以你说的问题是为什么还需要pipe.等于说我有晾袜子的小夹子，为什么还需要买那种上面有很多小夹子的那种圆盘式的晾晒的(应该都买了吧)，能干掉别的事，比如二个小夹子可以加个小衣服什么的，不知道我可解释清楚了，哈","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571063985,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":144784,"user_name":"hi兵哥","can_delete":false,"product_type":"c3","uid":1151209,"ip_address":"","ucode":"5425B0EBE5B624","user_header":"https://static001.geekbang.org/account/avatar/00/11/90/e9/87f2956a.jpg","comment_is_top":false,"comment_ctime":1572057743,"is_pvip":false,"replies":[{"id":59067,"content":"这个问题和netty并无关系，哈哈\n1 只能从class loader角度去处理了；\n2 你说的这个情况我也遇到过，估计你用的是spring boot，它只有一个rest template，所以你又想搞出2个自定义的rest template，这个时候你就自己定义就行了，不要去用它默认的。spring虽然好，但是面对你这个情况，就要自己去搞了，因为它太约定俗称了。就像一个智能电饭煲，天天全自动，有天想换口味，就不行了，你就参考它的自动配置实现，自己重新搞下就行了。不过心里上，可能觉得怪怪的。但是确实也没有办法。","user_name":"作者回复","user_name_real":"Geek_9bc307","uid":1638649,"ctime":1574303440,"ip_address":"","comment_id":144784,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"请教老师一个实际使用中的问题解决方案，多个jar包中有相同路径的相同class,如何让jvm加载制定包下的class?springcloud中有时引入了多个依赖，譬如引入的包使用@bean 生成了 restTemplate，而我自己项目中同样有要生restTemplate的需求，两个处理逻辑有区别，而我想基于robbin去实现负载均衡。基于上面我大致知道可以通过类加载，classScan方式去做一些处理，请问老师能否给出一些具体的可操作的解决方案，谢谢。","like_count":0,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"傅健","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":472109,"discussion_content":"这个问题和netty并无关系，哈哈\n1 只能从class loader角度去处理了；\n2 你说的这个情况我也遇到过，估计你用的是spring boot，它只有一个rest template，所以你又想搞出2个自定义的rest template，这个时候你就自己定义就行了，不要去用它默认的。spring虽然好，但是面对你这个情况，就要自己去搞了，因为它太约定俗称了。就像一个智能电饭煲，天天全自动，有天想换口味，就不行了，你就参考它的自动配置实现，自己重新搞下就行了。不过心里上，可能觉得怪怪的。但是确实也没有办法。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574303440,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1151209,"avatar":"https://static001.geekbang.org/account/avatar/00/11/90/e9/87f2956a.jpg","nickname":"hi兵哥","note":"","ucode":"5425B0EBE5B624","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":55046,"discussion_content":"谢谢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574334936,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":139735,"user_name":"青青木","can_delete":false,"product_type":"c3","uid":1049870,"ip_address":"","ucode":"2732BA6FBC149D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJKILshrJiasJADt0FTdA9x9rJbSeM3t7BUgUxKqBpsZK4Uukg9qwmbOCmLia89VaqsPcKyauGBLRFw/132","comment_is_top":false,"comment_ctime":1570712755,"is_pvip":false,"replies":[{"id":54122,"content":"你描述的有点宽泛，看起来是server强制断了是的，你可以换些思路排查下，(1)就是写个java的客户端测试下，这样定位下到底是服务器端问题还是c客户端问题。(2)只能debug了","user_name":"作者回复","user_name_real":"Geek_9bc307","uid":1638649,"ctime":1570792328,"ip_address":"","comment_id":139735,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"老师 我们公司正在使用netty4做tcpserver 客户端是c实现的 又个奇怪的现象是客户端第一次链接是总是收到一个reset 这样导致客户端第一条数据丢失了 后面重新连接上就就好了 没有什么思路 老师有什么建议吗？","like_count":0,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"傅健","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470083,"discussion_content":"你描述的有点宽泛，看起来是server强制断了是的，你可以换些思路排查下，(1)就是写个java的客户端测试下，这样定位下到底是服务器端问题还是c客户端问题。(2)只能debug了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570792328,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1049870,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJKILshrJiasJADt0FTdA9x9rJbSeM3t7BUgUxKqBpsZK4Uukg9qwmbOCmLia89VaqsPcKyauGBLRFw/132","nickname":"青青木","note":"","ucode":"2732BA6FBC149D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":43811,"discussion_content":"目前看是长链接长时间空闲 导致链路失效，tcp的keeplive是配了的，但路径中有多个路由器和一个网关 没找到是那个环节。我现在在客户端加了个主动心跳包，并且检测长时间无数据发送就关闭socket 等下次要发数据时再连.","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572911230,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"傅健","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":29877,"discussion_content":"简单方法:置换法先试试，你用java写一个客户端，如果他可以，说明或许你客户端有问题，如果没有，说明你服务器有问题。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570788549,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":139716,"user_name":"helloworld","can_delete":false,"product_type":"c3","uid":1015754,"ip_address":"","ucode":"00DF2FEC58D2E6","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7f/ca/ea85bfdd.jpg","comment_is_top":false,"comment_ctime":1570710724,"is_pvip":false,"replies":[{"id":54127,"content":"后面会有一些","user_name":"作者回复","user_name_real":"Geek_9bc307","uid":1638649,"ctime":1570792633,"ip_address":"","comment_id":139716,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"希望不仅仅能深入理解Netty的原理，更期待老师课程介绍中说的也可以学习到网络等相关的一些深度知识","like_count":0,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"傅健","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470072,"discussion_content":"后面会有一些","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570792633,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":192105,"user_name":"ran","can_delete":false,"product_type":"c3","uid":1296666,"ip_address":"","ucode":"D5F4DFA2644A05","user_header":"https://static001.geekbang.org/account/avatar/00/13/c9/1a/7f326801.jpg","comment_is_top":false,"comment_ctime":1584838259,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"章节设计感觉挺好的","like_count":1},{"had_liked":false,"id":380289,"user_name":"赵启明","can_delete":false,"product_type":"c3","uid":3012204,"ip_address":"浙江","ucode":"96AFD073DCF129","user_header":"","comment_is_top":false,"comment_ctime":1693314499,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"老师你好，有个问题请教一下，如果用netty开发充电桩接入服务是否可行，能不能顶住10万台电桩的并发长连接请求和处理，现在是用go做的，想改写一版用netty或者用c的，老师是否可以给点建议。感谢！","like_count":0},{"had_liked":false,"id":377310,"user_name":"hola","can_delete":false,"product_type":"c3","uid":3247385,"ip_address":"北京","ucode":"14E395FC38A029","user_header":"https://static001.geekbang.org/account/avatar/00/31/8d/19/24377316.jpg","comment_is_top":false,"comment_ctime":1688309214,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"老师 想问一下 不了解Netty，但是想了解netty能直接学您这门课吗？","like_count":0},{"had_liked":false,"id":373628,"user_name":"Geek_2327f1","can_delete":false,"product_type":"c3","uid":3600945,"ip_address":"广东","ucode":"DAE56B5FED83BD","user_header":"","comment_is_top":false,"comment_ctime":1682839559,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"哈哈，我自己用netty写了一个翻强的代理，希望大佬的课能让我对netty的理解和应用更上一层楼。","like_count":0}]}