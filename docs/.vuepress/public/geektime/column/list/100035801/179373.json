{"id":179373,"title":"37 | è®¡æ•°ç³»ç»Ÿè®¾è®¡ï¼ˆä¸€ï¼‰ï¼šé¢å¯¹æµ·é‡æ•°æ®çš„è®¡æ•°å™¨è¦å¦‚ä½•åšï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯å”æ‰¬ã€‚</p><p>ä»ä»Šå¤©å¼€å§‹ï¼Œæˆ‘ä»¬æ­£å¼è¿›å…¥æœ€åçš„å®æˆ˜ç¯‡ã€‚åœ¨ä¹‹å‰çš„è¯¾ç¨‹ä¸­ï¼Œæˆ‘åˆ†åˆ«ä»æ•°æ®åº“ã€ç¼“å­˜ã€æ¶ˆæ¯é˜Ÿåˆ—å’Œåˆ†å¸ƒå¼æœåŠ¡åŒ–çš„è§’åº¦ï¼Œå¸¦ä½ äº†è§£äº†é¢å¯¹é«˜å¹¶å‘çš„æ—¶å€™è¦å¦‚ä½•ä¿è¯ç³»ç»Ÿçš„é«˜æ€§èƒ½ã€é«˜å¯ç”¨å’Œé«˜å¯æ‰©å±•ã€‚è¯¾ç¨‹ä¸­è™½ç„¶æœ‰å¤§é‡çš„ä¾‹å­è¾…åŠ©ä½ ç†è§£ç†è®ºçŸ¥è¯†ï¼Œä½†æ˜¯æ²¡æœ‰ä¸€ä¸ªå®Œæ•´çš„å®ä¾‹å¸®ä½ æŠŠçŸ¥è¯†ä¸²èµ·æ¥ã€‚</p><p>æ‰€ä»¥ï¼Œä¸ºäº†å°†æˆ‘ä»¬æåŠçš„çŸ¥è¯†è½åœ°ï¼Œåœ¨å®æˆ˜ç¯‡ä¸­ï¼Œæˆ‘ä¼šä»¥å¾®åšä¸ºèƒŒæ™¯ï¼Œç”¨ä¸¤ä¸ªå®Œæ•´çš„æ¡ˆä¾‹å¸¦ä½ ä»å®è·µçš„è§’åº¦åº”å¯¹é«˜å¹¶å‘å¤§æµé‡çš„å†²å‡»ï¼ŒæœŸæœ›ç»™ä½ ä¸€ä¸ªæ›´åŠ å…·ä½“çš„æ„Ÿæ€§è®¤è¯†ï¼Œä¸ºä½ åœ¨å®ç°ç±»ä¼¼ç³»ç»Ÿçš„æ—¶å€™æä¾›ä¸€äº›æ€è·¯ã€‚ä»Šå¤©æˆ‘è¦è®²çš„ç¬¬ä¸€ä¸ªæ¡ˆä¾‹æ˜¯å¦‚ä½•è®¾è®¡ä¸€ä¸ªæ”¯æŒé«˜å¹¶å‘å¤§å­˜å‚¨é‡çš„è®¡æ•°ç³»ç»Ÿã€‚</p><p><strong>æ¥çœ‹è¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼š</strong> åœ¨åœ°é“ä¸Šï¼Œä½ ä¹Ÿè®¸ä¼šç»å¸¸åˆ·å¾®åšã€ç‚¹èµçƒ­æœï¼Œå¦‚æœæœ‰æŠ½å¥–æ´»åŠ¨ï¼Œå†è½¬å‘ä¸€æ³¢ï¼Œè€Œè¿™äº›ä¸å¾®åšæ¯æ¯ç›¸å…³çš„æ•°æ®ï¼Œå…¶å®å°±æ˜¯å¾®åšåœºæ™¯ä¸‹çš„è®¡æ•°æ•°æ®ï¼Œç»†è¯´èµ·æ¥ï¼Œå®ƒä¸»è¦æœ‰å‡ ç±»ï¼š</p><ol>\n<li>å¾®åšçš„è¯„è®ºæ•°ã€ç‚¹èµæ•°ã€è½¬å‘æ•°ã€æµè§ˆæ•°ã€è¡¨æ€æ•°ç­‰ç­‰ï¼›</li>\n<li>ç”¨æˆ·çš„ç²‰ä¸æ•°ã€å…³æ³¨æ•°ã€å‘å¸ƒå¾®åšæ•°ã€ç§ä¿¡æ•°ç­‰ç­‰ã€‚</li>\n</ol><p>å¾®åšç»´åº¦çš„è®¡æ•°ä»£è¡¨äº†è¿™æ¡å¾®åšå—æ¬¢è¿çš„ç¨‹åº¦ï¼Œç”¨æˆ·ç»´åº¦çš„æ•°æ®ï¼ˆå°¤å…¶æ˜¯ç²‰ä¸æ•°ï¼‰ï¼Œä»£è¡¨äº†è¿™ä¸ªç”¨æˆ·çš„å½±å“åŠ›ï¼Œå› æ­¤å¤§å®¶ä¼šæ™®éçœ‹é‡è¿™äº›è®¡æ•°ä¿¡æ¯ã€‚å¹¶ä¸”åœ¨å¾ˆå¤šåœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬éƒ½éœ€è¦æŸ¥è¯¢è®¡æ•°æ•°æ®ï¼ˆæ¯”å¦‚é¦–é¡µä¿¡æ¯æµé¡µé¢ã€ä¸ªäººä¸»é¡µé¢ï¼‰ï¼Œè®¡æ•°æ•°æ®è®¿é—®é‡å·¨å¤§ï¼Œæ‰€ä»¥éœ€è¦è®¾è®¡è®¡æ•°ç³»ç»Ÿç»´æŠ¤å®ƒã€‚</p><!-- [[[read_end]]] --><p>ä½†åœ¨è®¾è®¡è®¡æ•°ç³»ç»Ÿæ—¶ï¼Œä¸å°‘äººä¼šå‡ºç°æ€§èƒ½ä¸é«˜ã€å­˜å‚¨æˆæœ¬å¾ˆå¤§çš„é—®é¢˜ï¼Œæ¯”å¦‚ï¼ŒæŠŠè®¡æ•°ä¸å¾®åšæ•°æ®å­˜å‚¨åœ¨ä¸€èµ·ï¼Œè¿™æ ·æ¯æ¬¡æ›´æ–°è®¡æ•°çš„æ—¶å€™éƒ½éœ€è¦é”ä½è¿™ä¸€è¡Œè®°å½•ï¼Œé™ä½äº†å†™å…¥çš„å¹¶å‘ã€‚åœ¨æˆ‘çœ‹æ¥ï¼Œä¹‹æ‰€ä»¥å‡ºç°è¿™äº›é—®é¢˜ï¼Œè¿˜æ˜¯å› ä¸ºä½ å¯¹è®¡æ•°ç³»ç»Ÿçš„è®¾è®¡å’Œä¼˜åŒ–ä¸ç”šäº†è§£ï¼Œæ‰€ä»¥è¦æƒ³è§£å†³ç—›ç‚¹ï¼Œä½ æœ‰å¿…è¦å½¢æˆå®Œå¤‡çš„è®¾è®¡æ–¹æ¡ˆã€‚</p><h2>è®¡æ•°åœ¨ä¸šåŠ¡ä¸Šçš„ç‰¹ç‚¹</h2><p>é¦–å…ˆï¼Œä½ è¦äº†è§£è¿™äº›è®¡æ•°åœ¨ä¸šåŠ¡ä¸Šçš„ç‰¹ç‚¹æ˜¯ä»€ä¹ˆï¼Œè¿™æ ·æ‰èƒ½é’ˆå¯¹ç‰¹ç‚¹è®¾è®¡å‡ºåˆç†çš„æ–¹æ¡ˆã€‚åœ¨æˆ‘çœ‹æ¥ï¼Œä¸»è¦æœ‰è¿™æ ·å‡ ä¸ªç‰¹ç‚¹ã€‚</p><ul>\n<li>æ•°æ®é‡å·¨å¤§ã€‚æ®æˆ‘æ‰€çŸ¥ï¼Œå¾®åšç³»ç»Ÿä¸­å¾®åšæ¡ç›®çš„æ•°é‡æ—©å·²ç»è¶…è¿‡äº†åƒäº¿çº§åˆ«ï¼Œä»…ä»…è®¡ç®—å¾®åšçš„è½¬å‘ã€è¯„è®ºã€ç‚¹èµã€æµè§ˆç­‰æ ¸å¿ƒè®¡æ•°ï¼Œå…¶æ•°æ®é‡çº§å°±å·²ç»åœ¨å‡ åƒäº¿çš„çº§åˆ«ã€‚æ›´ä½•å†µå¾®åšæ¡ç›®çš„æ•°é‡è¿˜åœ¨ä¸æ–­é«˜é€Ÿåœ°å¢é•¿ï¼Œå¹¶ä¸”éšç€å¾®åšä¸šåŠ¡è¶Šæ¥è¶Šå¤æ‚ï¼Œå¾®åšç»´åº¦çš„è®¡æ•°ç§ç±»ä¹Ÿå¯èƒ½ä¼šæŒç»­æ‰©å±•ï¼ˆæ¯”å¦‚è¯´å¢åŠ äº†è¡¨æ€æ•°ï¼‰ï¼Œå› æ­¤ï¼Œä»…ä»…æ˜¯å¾®åšç»´åº¦ä¸Šçš„è®¡æ•°é‡çº§å°±å·²ç»è¿‡äº†ä¸‡äº¿çº§åˆ«ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå¾®åšçš„ç”¨æˆ·é‡çº§å·²ç»è¶…è¿‡äº†10äº¿ï¼Œç”¨æˆ·ç»´åº¦çš„è®¡æ•°é‡çº§ç›¸æ¯”å¾®åšç»´åº¦æ¥è¯´è™½ç„¶ç›¸å·®å¾ˆå¤§ï¼Œä½†æ˜¯ä¹Ÿè¾¾åˆ°äº†ç™¾äº¿çº§åˆ«ã€‚é‚£ä¹ˆå¦‚ä½•å­˜å‚¨è¿™äº›è¿‡ä¸‡äº¿çº§åˆ«çš„æ•°å­—ï¼Œå¯¹æˆ‘ä»¬æ¥è¯´å°±æ˜¯ä¸€å¤§æŒ‘æˆ˜ã€‚</li>\n<li>è®¿é—®é‡å¤§ï¼Œå¯¹äºæ€§èƒ½çš„è¦æ±‚é«˜ã€‚å¾®åšçš„æ—¥æ´»ç”¨æˆ·è¶…è¿‡2äº¿ï¼Œæœˆæ´»ç”¨æˆ·æ¥è¿‘5äº¿ï¼Œæ ¸å¿ƒæœåŠ¡ï¼ˆæ¯”å¦‚é¦–é¡µä¿¡æ¯æµï¼‰è®¿é—®é‡çº§è¾¾åˆ°æ¯ç§’å‡ åä¸‡æ¬¡ï¼Œè®¡æ•°ç³»ç»Ÿçš„è®¿é—®é‡çº§ä¹Ÿè¶…è¿‡äº†æ¯ç§’ç™¾ä¸‡çº§åˆ«ï¼Œè€Œä¸”åœ¨æ€§èƒ½æ–¹é¢ï¼Œå®ƒè¦æ±‚è¦æ¯«ç§’çº§åˆ«è¿”å›ç»“æœã€‚</li>\n<li>æœ€åï¼Œå¯¹äºå¯ç”¨æ€§ã€æ•°å­—çš„å‡†ç¡®æ€§è¦æ±‚é«˜ã€‚ä¸€èˆ¬æ¥è®²ï¼Œç”¨æˆ·å¯¹äºè®¡æ•°æ•°å­—æ˜¯éå¸¸æ•æ„Ÿçš„ï¼Œæ¯”å¦‚ä½ ç›´æ’­äº†å¥½å‡ ä¸ªæœˆï¼Œæ‰æ¶¨äº†1000ä¸ªç²‰ï¼Œçªç„¶æœ‰ä¸€å¤©ç²‰ä¸æ•°å°‘äº†å‡ ç™¾ä¸ªï¼Œé‚£ä¹ˆä½ æ˜¯ä¸æ˜¯ä¼šç¢ç£¨å“ªé‡Œå‡ºç°é—®é¢˜ï¼Œæˆ–è€…æ‰“ç”µè¯æŠ•è¯‰ç›´æ’­å¹³å°ï¼Ÿ</li>\n</ul><p>é‚£ä¹ˆï¼Œé¢ä¸´ç€é«˜å¹¶å‘ã€å¤§æ•°æ®é‡ã€æ•°æ®å¼ºä¸€è‡´è¦æ±‚çš„æŒ‘æˆ˜ï¼Œå¾®åšçš„è®¡æ•°ç³»ç»Ÿæ˜¯å¦‚ä½•è®¾è®¡å’Œæ¼”è¿›çš„å‘¢ï¼Ÿä½ åˆèƒ½ä»ä¸­å€Ÿé‰´ä»€ä¹ˆç»éªŒå‘¢ï¼Ÿ</p><h2>æ”¯æ’‘é«˜å¹¶å‘çš„è®¡æ•°ç³»ç»Ÿè¦å¦‚ä½•è®¾è®¡</h2><p>åˆšå¼€å§‹è®¾è®¡è®¡æ•°ç³»ç»Ÿçš„æ—¶å€™ï¼Œå¾®åšçš„æµé‡è¿˜æ²¡æœ‰ç°åœ¨è¿™ä¹ˆå¤¸å¼ ï¼Œæˆ‘ä»¬æœ¬ç€KISSï¼ˆKeep It Simple and Stupidï¼‰åŸåˆ™ï¼Œå°½é‡å°†ç³»ç»Ÿè®¾è®¡å¾—ç®€å•æ˜“ç»´æŠ¤ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬ä½¿ç”¨MySQLå­˜å‚¨è®¡æ•°çš„æ•°æ®ï¼Œå› ä¸ºå®ƒæ˜¯æˆ‘ä»¬æœ€ç†Ÿæ‚‰çš„ï¼Œå›¢é˜Ÿåœ¨è¿ç»´ä¸Šç»éªŒä¹Ÿä¼šæ¯”è¾ƒä¸°å¯Œã€‚ä¸¾ä¸ªå…·ä½“çš„ä¾‹å­ã€‚</p><p>å‡å¦‚è¦å­˜å‚¨å¾®åšç»´åº¦ï¼ˆå¾®åšçš„è®¡æ•°ï¼Œè½¬å‘æ•°ã€ç‚¹èµæ•°ç­‰ç­‰ï¼‰çš„æ•°æ®ï¼Œä½ å¯ä»¥è¿™ä¹ˆè®¾è®¡è¡¨ç»“æ„ï¼šä»¥å¾®åšIDä¸ºä¸»é”®ï¼Œè½¬å‘æ•°ã€è¯„è®ºæ•°ã€ç‚¹èµæ•°å’Œæµè§ˆæ•°åˆ†åˆ«ä¸ºå•ç‹¬ä¸€åˆ—ï¼Œè¿™æ ·åœ¨è·å–è®¡æ•°æ—¶ç”¨ä¸€ä¸ªSQLè¯­å¥å°±æå®šäº†ã€‚</p><pre><code>select repost_count, comment_count, praise_count, view_count from t_weibo_count where weibo_id = ?\n</code></pre><p>åœ¨æ•°æ®é‡çº§å’Œè®¿é—®é‡çº§éƒ½ä¸å¤§çš„æƒ…å†µä¸‹ï¼Œè¿™ç§æ–¹å¼æœ€ç®€å•ï¼Œæ‰€ä»¥å¦‚æœä½ çš„ç³»ç»Ÿé‡çº§ä¸å¤§ï¼Œä½ å¯ä»¥ç›´æ¥é‡‡ç”¨è¿™ç§æ–¹å¼æ¥å®ç°ã€‚</p><p>åæ¥ï¼Œéšç€å¾®åšçš„ä¸æ–­å£®å¤§ï¼Œä¹‹å‰çš„è®¡æ•°ç³»ç»Ÿé¢ä¸´äº†å¾ˆå¤šçš„é—®é¢˜å’ŒæŒ‘æˆ˜ã€‚</p><p>æ¯”å¦‚å¾®åšç”¨æˆ·é‡å’Œå‘å¸ƒçš„å¾®åšé‡å¢åŠ è¿…çŒ›ï¼Œè®¡æ•°å­˜å‚¨æ•°æ®é‡çº§ä¹Ÿé£é€Ÿå¢é•¿ï¼Œè€ŒMySQLæ•°æ®åº“å•è¡¨çš„å­˜å‚¨é‡çº§è¾¾åˆ°å‡ åƒä¸‡çš„æ—¶å€™ï¼Œæ€§èƒ½ä¸Šå°±ä¼šæœ‰æŸè€—ã€‚æ‰€ä»¥æˆ‘ä»¬è€ƒè™‘ä½¿ç”¨åˆ†åº“åˆ†è¡¨çš„æ–¹å¼åˆ†æ•£æ•°æ®é‡ï¼Œæå‡è¯»å–è®¡æ•°çš„æ€§èƒ½ã€‚</p><p>æˆ‘ä»¬ç”¨â€œweibo_idâ€ä½œä¸ºåˆ†åŒºé”®ï¼Œåœ¨é€‰æ‹©åˆ†åº“åˆ†è¡¨çš„æ–¹å¼æ—¶ï¼Œè€ƒè™‘äº†ä¸‹é¢ä¸¤ç§ï¼š</p><ul>\n<li>ä¸€ç§æ–¹å¼æ˜¯é€‰æ‹©ä¸€ç§å“ˆå¸Œç®—æ³•å¯¹weibo_idè®¡ç®—å“ˆå¸Œå€¼ï¼Œç„¶åæ ¹æ®è¿™ä¸ªå“ˆå¸Œå€¼è®¡ç®—å‡ºéœ€è¦å­˜å‚¨åˆ°å“ªä¸€ä¸ªåº“å“ªä¸€å¼ è¡¨ä¸­ï¼Œå…·ä½“çš„æ–¹å¼ä½ å¯ä»¥å›é¡¾ä¸€ä¸‹ç¬¬9è®²æ•°æ®åº“åˆ†åº“åˆ†è¡¨çš„å†…å®¹ï¼›</li>\n<li>å¦ä¸€ç§æ–¹å¼æ˜¯æŒ‰ç…§weibo_idç”Ÿæˆçš„æ—¶é—´æ¥åšåˆ†åº“åˆ†è¡¨ï¼Œæˆ‘ä»¬åœ¨ç¬¬10è®²è°ˆåˆ°å‘å·å™¨çš„æ—¶å€™æ›¾ç»æåˆ°ï¼ŒIDçš„ç”Ÿæˆæœ€å¥½å¸¦æœ‰ä¸šåŠ¡æ„ä¹‰çš„å­—æ®µï¼Œæ¯”å¦‚ç”ŸæˆIDçš„æ—¶é—´æˆ³ã€‚æ‰€ä»¥åœ¨åˆ†åº“åˆ†è¡¨çš„æ—¶å€™ï¼Œå¯ä»¥å…ˆä¾æ®å‘å·å™¨çš„ç®—æ³•åè§£å‡ºæ—¶é—´æˆ³ï¼Œç„¶åæŒ‰ç…§æ—¶é—´æˆ³æ¥åšåˆ†åº“åˆ†è¡¨ï¼Œæ¯”å¦‚ï¼Œä¸€å¤©ä¸€å¼ è¡¨æˆ–è€…ä¸€ä¸ªæœˆä¸€å¼ è¡¨ç­‰ç­‰ã€‚</li>\n</ul><p>å› ä¸ºè¶Šæ˜¯æœ€è¿‘å‘å¸ƒçš„å¾®åšï¼Œè®¡æ•°æ•°æ®çš„è®¿é—®é‡å°±è¶Šå¤§ï¼Œæ‰€ä»¥è™½ç„¶æˆ‘è€ƒè™‘äº†ä¸¤ç§æ–¹æ¡ˆï¼Œä½†æ˜¯æŒ‰ç…§æ—¶é—´æ¥åˆ†åº“åˆ†è¡¨ä¼šé€ æˆæ•°æ®è®¿é—®çš„ä¸å‡åŒ€ï¼Œæœ€åç”¨äº†å“ˆå¸Œçš„æ–¹å¼æ¥åšåˆ†åº“åˆ†è¡¨ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/50/9c/508201de80dd909d8b7dff1d34be9f9c.jpg?wh=1142*306\" alt=\"\"></p><p>ä¸æ­¤åŒæ—¶ï¼Œè®¡æ•°çš„è®¿é—®é‡çº§ä¹Ÿæœ‰è´¨çš„é£è·ƒã€‚åœ¨å¾®åšæœ€åˆçš„ç‰ˆæœ¬ä¸­ï¼Œé¦–é¡µä¿¡æ¯æµé‡Œé¢æ˜¯ä¸å±•ç¤ºè®¡æ•°æ•°æ®çš„ï¼Œé‚£ä¹ˆä½¿ç”¨MySQLä¹Ÿå¯ä»¥æ‰¿å—å½“æ—¶è¯»å–è®¡æ•°çš„è®¿é—®é‡ã€‚ä½†æ˜¯åæ¥åœ¨é¦–é¡µä¿¡æ¯æµä¸­ä¹Ÿè¦å±•ç¤ºè½¬å‘ã€è¯„è®ºå’Œç‚¹èµç­‰è®¡æ•°æ•°æ®äº†ã€‚è€Œä¿¡æ¯æµçš„è®¿é—®é‡å·¨å¤§ï¼Œä»…ä»…é æ•°æ®åº“å·²ç»å®Œå…¨ä¸èƒ½æ‰¿æ‹…å¦‚æ­¤é«˜çš„å¹¶å‘é‡äº†ã€‚äºæ˜¯æˆ‘ä»¬è€ƒè™‘ä½¿ç”¨Redisæ¥åŠ é€Ÿè¯»è¯·æ±‚ï¼Œé€šè¿‡éƒ¨ç½²å¤šä¸ªä»èŠ‚ç‚¹æ¥æå‡å¯ç”¨æ€§å’Œæ€§èƒ½ï¼Œå¹¶ä¸”é€šè¿‡Hashçš„æ–¹å¼å¯¹æ•°æ®åšåˆ†ç‰‡ï¼Œä¹ŸåŸºæœ¬ä¸Šå¯ä»¥ä¿è¯è®¡æ•°çš„è¯»å–æ€§èƒ½ã€‚ç„¶è€Œï¼Œè¿™ç§æ•°æ®åº“+ç¼“å­˜çš„æ–¹å¼æœ‰ä¸€ä¸ªå¼Šç«¯ï¼šæ— æ³•ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ï¼Œæ¯”å¦‚ï¼Œå¦‚æœæ•°æ®åº“å†™å…¥æˆåŠŸè€Œç¼“å­˜æ›´æ–°å¤±è´¥ï¼Œå°±ä¼šå¯¼è‡´æ•°æ®çš„ä¸ä¸€è‡´ï¼Œå½±å“è®¡æ•°çš„å‡†ç¡®æ€§ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å®Œå…¨æŠ›å¼ƒäº†MySQLï¼Œå…¨é¢ä½¿ç”¨Redisæ¥ä½œä¸ºè®¡æ•°çš„å­˜å‚¨ç»„ä»¶ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/7c/62/7c8ed7992ec206671a18b8d537eaef62.jpg?wh=1142*599\" alt=\"\"></p><p>é™¤äº†è€ƒè™‘è®¡æ•°çš„è¯»å–æ€§èƒ½ä¹‹å¤–ï¼Œç”±äºçƒ­é—¨å¾®åšçš„è®¡æ•°å˜åŒ–é¢‘ç‡ç›¸å½“é«˜ï¼Œä¹Ÿéœ€è¦è€ƒè™‘å¦‚ä½•æå‡è®¡æ•°çš„å†™å…¥æ€§èƒ½ã€‚æ¯”å¦‚ï¼Œæ¯æ¬¡åœ¨è½¬å‘ä¸€æ¡å¾®åšçš„æ—¶å€™ï¼Œéƒ½éœ€è¦å¢åŠ è¿™æ¡å¾®åšçš„è½¬å‘æ•°ï¼Œé‚£ä¹ˆå¦‚æœæ˜æ˜Ÿå‘å¸ƒç»“å©šã€ç¦»å©šçš„å¾®åšï¼Œç¬æ—¶å°±å¯èƒ½ä¼šäº§ç”Ÿå‡ ä¸‡ç”šè‡³å‡ åä¸‡çš„è½¬å‘ã€‚å¦‚æœæ˜¯ä½ çš„è¯ï¼Œè¦å¦‚ä½•é™ä½å†™å‹åŠ›å‘¢ï¼Ÿ</p><p>ä½ å¯èƒ½å·²ç»æƒ³åˆ°ç”¨æ¶ˆæ¯é˜Ÿåˆ—æ¥å‰Šå³°å¡«è°·äº†ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬åœ¨è½¬å‘å¾®åšçš„æ—¶å€™å‘æ¶ˆæ¯é˜Ÿåˆ—å†™å…¥ä¸€æ¡æ¶ˆæ¯ï¼Œç„¶ååœ¨æ¶ˆæ¯å¤„ç†ç¨‹åºä¸­ç»™è¿™æ¡å¾®åšçš„è½¬å‘è®¡æ•°åŠ 1ã€‚<strong>è¿™é‡Œéœ€è¦æ³¨æ„çš„ä¸€ç‚¹ï¼Œ</strong> æˆ‘ä»¬å¯ä»¥é€šè¿‡æ‰¹é‡å¤„ç†æ¶ˆæ¯çš„æ–¹å¼è¿›ä¸€æ­¥å‡å°Redisçš„å†™å‹åŠ›ï¼Œæ¯”å¦‚åƒä¸‹é¢è¿™æ ·è¿ç»­æ›´æ”¹ä¸‰æ¬¡è½¬å‘æ•°ï¼ˆæˆ‘ç”¨SQLæ¥è¡¨ç¤ºæ¥æ–¹ä¾¿ä½ ç†è§£ï¼‰ï¼š</p><pre><code>UPDATE t_weibo_count SET repost_count = repost_count + 1 WHERE weibo_id = 1; \nUPDATE t_weibo_count SET repost_count = repost_count + 1 WHERE weibo_id = 1;  \nUPDATE  t_weibo_count SET repost_count = repost_count +1 WHERE weibo_id = 1; \n</code></pre><p>è¿™ä¸ªæ—¶å€™ï¼Œä½ å¯ä»¥æŠŠå®ƒä»¬åˆå¹¶æˆä¸€æ¬¡æ›´æ–°ï¼š</p><pre><code>UPDATE t_weibo_count SET repost_count = repost_count + 3 WHERE weibo_id = 1; \n</code></pre><h2>å¦‚ä½•é™ä½è®¡æ•°ç³»ç»Ÿçš„å­˜å‚¨æˆæœ¬</h2><p>è®²åˆ°è¿™é‡Œï¼Œæˆ‘å…¶å®å·²ç»å‘Šè¯‰ä½ ä¸€ä¸ªæ”¯æ’‘é«˜å¹¶å‘æŸ¥è¯¢è¯·æ±‚çš„è®¡æ•°ç³»ç»Ÿæ˜¯å¦‚ä½•å®ç°çš„äº†ã€‚ä½†æ˜¯åœ¨å¾®åšçš„åœºæ™¯ä¸‹ï¼Œè®¡æ•°çš„é‡çº§æ˜¯ä¸‡äº¿çš„çº§åˆ«ï¼Œè¿™ä¹Ÿç»™æˆ‘ä»¬æå‡ºäº†æ›´é«˜çš„è¦æ±‚ï¼Œ<strong>å°±æ˜¯å¦‚ä½•åœ¨æœ‰é™çš„å­˜å‚¨æˆæœ¬ä¸‹å®ç°å¯¹äºå…¨é‡è®¡æ•°æ•°æ®çš„å­˜å–ã€‚</strong></p><p>ä½ çŸ¥é“ï¼ŒRedisæ˜¯ä½¿ç”¨å†…å­˜æ¥å­˜å‚¨ä¿¡æ¯ï¼Œç›¸æ¯”äºä½¿ç”¨ç£ç›˜å­˜å‚¨æ•°æ®çš„MySQLæ¥è¯´ï¼Œå­˜å‚¨çš„æˆæœ¬ä¸å¯åŒæ—¥è€Œè¯­ï¼Œæ¯”å¦‚ä¸€å°æœåŠ¡å™¨ç£ç›˜å¯ä»¥æŒ‚è½½åˆ°2ä¸ªTï¼Œä½†æ˜¯å†…å­˜å¯èƒ½åªæœ‰128Gï¼Œè¿™æ ·ç£ç›˜çš„å­˜å‚¨ç©ºé—´å°±æ˜¯å†…å­˜çš„16å€ã€‚è€ŒRedisåŸºäºé€šç”¨æ€§çš„è€ƒè™‘ï¼Œå¯¹äºå†…å­˜çš„ä½¿ç”¨æ¯”è¾ƒç²—æ”¾ï¼Œå­˜åœ¨å¤§é‡çš„æŒ‡é’ˆä»¥åŠé¢å¤–æ•°æ®ç»“æ„çš„å¼€é”€ï¼Œå¦‚æœè¦å­˜å‚¨ä¸€ä¸ªKVç±»å‹çš„è®¡æ•°ä¿¡æ¯ï¼ŒKeyæ˜¯8å­—èŠ‚Longç±»å‹çš„weibo_idï¼ŒValueæ˜¯4å­—èŠ‚intç±»å‹çš„è½¬å‘æ•°ï¼Œå­˜å‚¨åœ¨Redisä¸­ä¹‹åä¼šå ç”¨è¶…è¿‡70ä¸ªå­—èŠ‚çš„ç©ºé—´ï¼Œç©ºé—´çš„æµªè´¹æ˜¯å·¨å¤§çš„ã€‚<strong>å¦‚æœä½ é¢ä¸´è¿™ä¸ªé—®é¢˜ï¼Œè¦å¦‚ä½•ä¼˜åŒ–å‘¢ï¼Ÿ</strong></p><p>æˆ‘å»ºè®®ä½ å…ˆå¯¹åŸç”ŸRedisåšä¸€äº›æ”¹é€ ï¼Œé‡‡ç”¨æ–°çš„æ•°æ®ç»“æ„å’Œæ•°æ®ç±»å‹æ¥å­˜å‚¨è®¡æ•°æ•°æ®ã€‚æˆ‘åœ¨æ”¹é€ æ—¶ï¼Œä¸»è¦æ¶‰åŠäº†ä¸¤ç‚¹ï¼š</p><ul>\n<li>ä¸€æ˜¯åŸç”Ÿçš„Redisåœ¨å­˜å‚¨Keyæ—¶æ˜¯æŒ‰ç…§å­—ç¬¦ä¸²ç±»å‹æ¥å­˜å‚¨çš„ï¼Œæ¯”å¦‚ä¸€ä¸ª8å­—èŠ‚çš„Longç±»å‹çš„æ•°æ®ï¼Œéœ€è¦8ï¼ˆsdshdræ•°æ®ç»“æ„é•¿åº¦ï¼‰+ 19ï¼ˆ8å­—èŠ‚æ•°å­—çš„é•¿åº¦ï¼‰+1ï¼ˆâ€™\\0â€™ï¼‰=28ä¸ªå­—èŠ‚ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨Longç±»å‹æ¥å­˜å‚¨å°±åªéœ€è¦8ä¸ªå­—èŠ‚ï¼Œä¼šèŠ‚çœ20ä¸ªå­—èŠ‚çš„ç©ºé—´ï¼›</li>\n<li>äºŒæ˜¯å»é™¤äº†åŸç”ŸRedisä¸­å¤šä½™çš„æŒ‡é’ˆï¼Œå¦‚æœè¦å­˜å‚¨ä¸€ä¸ªKVä¿¡æ¯å°±åªéœ€è¦8ï¼ˆweibo_idï¼‰+4ï¼ˆè½¬å‘æ•°ï¼‰=12ä¸ªå­—èŠ‚ï¼Œç›¸æ¯”ä¹‹å‰æœ‰å¾ˆå¤§çš„æ”¹è¿›ã€‚</li>\n</ul><p>åŒæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿä¼šä½¿ç”¨ä¸€ä¸ªå¤§çš„æ•°ç»„æ¥å­˜å‚¨è®¡æ•°ä¿¡æ¯ï¼Œå­˜å‚¨çš„ä½ç½®æ˜¯åŸºäºweibo_idçš„å“ˆå¸Œå€¼æ¥è®¡ç®—å‡ºæ¥çš„ï¼Œå…·ä½“çš„ç®—æ³•åƒä¸‹é¢å±•ç¤ºçš„è¿™æ ·ï¼š</p><pre><code>æ’å…¥æ—¶:\nh1 = hash1(weibo_id) //æ ¹æ®å¾®åšIDè®¡ç®—Hash\nh2 = hash2(weibo_id) //æ ¹æ®å¾®åšIDè®¡ç®—å¦ä¸€ä¸ªHashï¼Œç”¨ä»¥è§£å†³å‰ä¸€ä¸ªHashç®—æ³•å¸¦æ¥çš„å†²çª\nfor s in 0,1000\n   pos = (h1 + h2*s) % tsize //å¦‚æœå‘ç”Ÿå†²çªï¼Œå°±å¤šç®—å‡ æ¬¡Hash2\n     if(isempty(pos) || isdelete(pos))\n         t[ pos ] = item  //å†™å…¥æ•°ç»„\n\n\næŸ¥è¯¢æ—¶:\nfor s in 0,1000\n   pos = (h1 + h2*s) % tsize  //ä¾ç…§æ’å…¥æ•°æ®æ—¶å€™çš„é€»è¾‘ï¼Œè®¡ç®—å‡ºå­˜å‚¨åœ¨æ•°ç»„ä¸­çš„ä½ç½®\n      if(!isempty(pos) &amp;&amp; t[pos]==weibo_id)\n         return t[pos]\nreturn 0 \n\n\nåˆ é™¤æ—¶:\ninsert(FFFF) //æ’å…¥ä¸€ä¸ªç‰¹æ®Šçš„æ ‡\n</code></pre><p>åœ¨å¯¹åŸç”Ÿçš„Redisåšäº†æ”¹é€ ä¹‹åï¼Œä½ è¿˜éœ€è¦è¿›ä¸€æ­¥è€ƒè™‘å¦‚ä½•èŠ‚çœå†…å­˜çš„ä½¿ç”¨ã€‚æ¯”å¦‚ï¼Œå¾®åšçš„è®¡æ•°æœ‰è½¬å‘æ•°ã€è¯„è®ºæ•°ã€æµè§ˆæ•°ã€ç‚¹èµæ•°ç­‰ç­‰ï¼Œå¦‚æœæ¯ä¸€ä¸ªè®¡æ•°éƒ½éœ€è¦å­˜å‚¨weibo_idï¼Œé‚£ä¹ˆæ€»å…±å°±éœ€è¦8ï¼ˆweibo_idï¼‰*4ï¼ˆ4ä¸ªå¾®åšIDï¼‰+4ï¼ˆè½¬å‘æ•°ï¼‰ + 4ï¼ˆè¯„è®ºæ•°ï¼‰ + 4ï¼ˆç‚¹èµæ•°ï¼‰ + 4ï¼ˆæµè§ˆæ•°ï¼‰= 48å­—èŠ‚ã€‚ä½†æ˜¯æˆ‘ä»¬å¯ä»¥æŠŠç›¸åŒå¾®åšIDçš„è®¡æ•°å­˜å‚¨åœ¨ä¸€èµ·ï¼Œè¿™æ ·å°±åªéœ€è¦è®°å½•ä¸€ä¸ªå¾®åšIDï¼Œçœæ‰äº†å¤šä½™çš„ä¸‰ä¸ªå¾®åšIDçš„å­˜å‚¨å¼€é”€ï¼Œå­˜å‚¨ç©ºé—´å°±è¿›ä¸€æ­¥å‡å°‘äº†ã€‚</p><p>ä¸è¿‡ï¼Œå³ä½¿ç»è¿‡ä¸Šé¢çš„ä¼˜åŒ–ï¼Œç”±äºè®¡æ•°çš„é‡çº§å®åœ¨æ˜¯å¤ªè¿‡å·¨å¤§ï¼Œå¹¶ä¸”è¿˜åœ¨ä»¥æå¿«çš„é€Ÿåº¦å¢é•¿ï¼Œæ‰€ä»¥å¦‚æœæˆ‘ä»¬ä»¥å…¨å†…å­˜çš„æ–¹å¼æ¥å­˜å‚¨è®¡æ•°ä¿¡æ¯ï¼Œå°±éœ€è¦ä½¿ç”¨éå¸¸å¤šçš„æœºå™¨æ¥æ”¯æ’‘ã€‚</p><p>ç„¶è€Œå¾®åšè®¡æ•°çš„æ•°æ®å…·æœ‰æ˜æ˜¾çš„çƒ­ç‚¹å±æ€§ï¼šè¶Šæ˜¯æœ€è¿‘çš„å¾®åšè¶Šæ˜¯ä¼šè¢«è®¿é—®åˆ°ï¼Œæ—¶é—´ä¸Šä¹…è¿œçš„å¾®åšè¢«è®¿é—®çš„å‡ ç‡å¾ˆå°ã€‚æ‰€ä»¥ä¸ºäº†å°½é‡å‡å°‘æœåŠ¡å™¨çš„ä½¿ç”¨ï¼Œæˆ‘ä»¬è€ƒè™‘ç»™è®¡æ•°æœåŠ¡å¢åŠ SSDç£ç›˜ï¼Œç„¶åå°†æ—¶é—´ä¸Šæ¯”è¾ƒä¹…è¿œçš„æ•°æ®dumpåˆ°ç£ç›˜ä¸Šï¼Œå†…å­˜ä¸­åªä¿ç•™æœ€è¿‘çš„æ•°æ®ã€‚å½“æˆ‘ä»¬è¦è¯»å–å†·æ•°æ®çš„æ—¶å€™ï¼Œä½¿ç”¨å•ç‹¬çš„I/Oçº¿ç¨‹å¼‚æ­¥åœ°å°†å†·æ•°æ®ä»SSDç£ç›˜ä¸­åŠ è½½åˆ°ä¸€å—å„¿å•ç‹¬çš„Cold  Cacheä¸­ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/16/93/16cb144c96a0ab34214c966f686c9693.jpg?wh=1142*677\" alt=\"\"></p><p>åœ¨ç»è¿‡äº†ä¸Šé¢è¿™äº›ä¼˜åŒ–ä¹‹åï¼Œæˆ‘ä»¬çš„è®¡æ•°æœåŠ¡å°±å¯ä»¥æ”¯æ’‘é«˜å¹¶å‘å¤§æ•°æ®é‡çš„è€ƒéªŒï¼Œæ— è®ºæ˜¯åœ¨æ€§èƒ½ä¸Šã€æˆæœ¬ä¸Šå’Œå¯ç”¨æ€§ä¸Šéƒ½èƒ½å¤Ÿè¾¾åˆ°ä¸šåŠ¡çš„éœ€æ±‚äº†ã€‚</p><p>æ€»çš„æ¥è¯´ï¼Œæˆ‘ç”¨å¾®åšè®¾è®¡è®¡æ•°ç³»ç»Ÿçš„ä¾‹å­ï¼Œå¹¶ä¸æ˜¯ä»…ä»…å‘Šè¯‰ä½ è®¡æ•°ç³»ç»Ÿæ˜¯å¦‚ä½•åšçš„ï¼Œè€Œæ˜¯æƒ³å‘Šè¯‰ä½ åœ¨åšç³»ç»Ÿè®¾è®¡çš„æ—¶å€™éœ€è¦äº†è§£è‡ªå·±ç³»ç»Ÿç›®å‰çš„ç—›ç‚¹æ˜¯ä»€ä¹ˆï¼Œç„¶åå†é’ˆå¯¹ç—›ç‚¹æ¥åšç»†è‡´çš„ä¼˜åŒ–ã€‚æ¯”å¦‚ï¼Œå¾®åšè®¡æ•°ç³»ç»Ÿçš„ç—›ç‚¹æ˜¯å­˜å‚¨çš„æˆæœ¬ï¼Œé‚£ä¹ˆæˆ‘ä»¬åæœŸåšçš„äº‹æƒ…å¾ˆå¤šéƒ½æ˜¯å›´ç»•ç€å¦‚ä½•ä½¿ç”¨æœ‰é™çš„æœåŠ¡å™¨å­˜å‚¨å…¨é‡çš„è®¡æ•°æ•°æ®ï¼Œå³ä½¿æ˜¯å¯¹å¼€æºç»„ä»¶ï¼ˆRedisï¼‰åšæ·±åº¦çš„å®šåˆ¶ä¼šå¸¦æ¥å¾ˆå¤§çš„è¿ç»´æˆæœ¬ï¼Œä¹Ÿåªèƒ½è¢«è®¤ä¸ºæ˜¯ä¸ºäº†å®ç°è®¡æ•°ç³»ç»Ÿè€Œå¿…é¡»è¦åšçš„æƒè¡¡ã€‚</p><h2>è¯¾ç¨‹å°ç»“</h2><p>ä»¥ä¸Šå°±æ˜¯æœ¬èŠ‚è¯¾çš„å…¨éƒ¨å†…å®¹äº†ã€‚æœ¬èŠ‚è¯¾æˆ‘ä»¥å¾®åšä¸ºä¾‹å¸¦ä½ äº†è§£äº†å¦‚ä½•å®ç°ä¸€å¥—å­˜å‚¨åƒäº¿ç”šè‡³ä¸‡äº¿æ•°æ®çš„é«˜å¹¶å‘è®¡æ•°ç³»ç»Ÿï¼Œè¿™é‡Œä½ éœ€è¦äº†è§£çš„é‡ç‚¹å¦‚ä¸‹ï¼š</p><ol>\n<li>æ•°æ®åº“+ç¼“å­˜çš„æ–¹æ¡ˆæ˜¯è®¡æ•°ç³»ç»Ÿçš„åˆçº§é˜¶æ®µï¼Œå®Œå…¨å¯ä»¥æ”¯æ’‘ä¸­å°è®¿é—®é‡å’Œå­˜å‚¨é‡çš„å­˜å‚¨æœåŠ¡ã€‚å¦‚æœä½ çš„é¡¹ç›®è¿˜å¤„åœ¨åˆçº§é˜¶æ®µï¼Œé‡çº§è¿˜ä¸æ˜¯å¾ˆå¤§ï¼Œé‚£ä¹ˆä½ ä¸€å¼€å§‹å¯ä»¥è€ƒè™‘ä½¿ç”¨è¿™ç§æ–¹æ¡ˆã€‚</li>\n<li>é€šè¿‡å¯¹åŸç”ŸRedisç»„ä»¶çš„æ”¹é€ ï¼Œæˆ‘ä»¬å¯ä»¥æå¤§åœ°å‡å°å­˜å‚¨æ•°æ®çš„å†…å­˜å¼€é”€ã€‚</li>\n<li>ä½¿ç”¨SSD+å†…å­˜çš„æ–¹æ¡ˆå¯ä»¥æœ€ç»ˆè§£å†³å­˜å‚¨è®¡æ•°æ•°æ®çš„æˆæœ¬é—®é¢˜ã€‚è¿™ä¸ªæ–¹å¼é€‚ç”¨äºå†·çƒ­æ•°æ®æ˜æ˜¾çš„åœºæ™¯ï¼Œä½ åœ¨ä½¿ç”¨æ—¶éœ€è¦è€ƒè™‘å¦‚ä½•å°†å†…å­˜ä¸­çš„æ•°æ®åšæ¢å…¥æ¢å‡ºã€‚</li>\n</ol><p>å…¶å®ï¼Œéšç€äº’è”ç½‘æŠ€æœ¯çš„å‘å±•ï¼Œå·²ç»æœ‰è¶Šæ¥è¶Šå¤šçš„ä¸šåŠ¡åœºæ™¯éœ€è¦ä½¿ç”¨ä¸Šç™¾Gç”šè‡³å‡ ç™¾Gçš„å†…å­˜èµ„æºæ¥å­˜å‚¨ä¸šåŠ¡æ•°æ®ï¼Œä½†æ˜¯å¯¹äºæ€§èƒ½æˆ–è€…å»¶è¿Ÿå¹¶æ²¡æœ‰é‚£ä¹ˆé«˜çš„è¦æ±‚ï¼Œå¦‚æœå…¨éƒ¨ä½¿ç”¨å†…å­˜æ¥å­˜å‚¨æ— ç–‘ä¼šå¸¦æ¥æå¤§çš„æˆæœ¬æµªè´¹ã€‚å› æ­¤ï¼Œåœ¨ä¸šç•Œæœ‰ä¸€äº›å¼€æºç»„ä»¶ä¹Ÿåœ¨æ”¯æŒä½¿ç”¨SSDæ›¿ä»£å†…å­˜å­˜å‚¨å†·æ•°æ®ï¼Œæ¯”å¦‚<a href=\"https://github.com/Qihoo360/pika\">Pika</a>ï¼Œ<a href=\"https://github.com/ideawu/ssdb\">SSDB</a>ï¼Œè¿™ä¸¤ä¸ªå¼€æºç»„ä»¶ï¼Œæˆ‘å»ºè®®ä½ å¯ä»¥äº†è§£ä¸€ä¸‹å®ƒä»¬çš„å®ç°åŸç†ï¼Œè¿™æ ·å¯ä»¥åœ¨é¡¹ç›®ä¸­éœ€è¦çš„æ—¶å€™ä½¿ç”¨ã€‚è€Œä¸”ï¼Œåœ¨å¾®åšçš„è®¡æ•°æœåŠ¡ä¸­ä¹Ÿé‡‡ç”¨äº†ç±»ä¼¼çš„æ€è·¯ï¼Œå¦‚æœä½ çš„ä¸šåŠ¡ä¸­ä¹Ÿéœ€è¦ä½¿ç”¨å¤§é‡çš„å†…å­˜ï¼Œå­˜å‚¨çƒ­ç‚¹æ¯”è¾ƒæ˜æ˜¾çš„æ•°æ®ï¼Œä¸å¦¨ä¹Ÿå¯ä»¥è€ƒè™‘ä½¿ç”¨ç±»ä¼¼çš„æ€è·¯ã€‚</p><h2>ä¸€è¯¾ä¸€æ€</h2><p>ä½ çš„ç³»ç»Ÿä¸­æ˜¯å¦ä¹Ÿæœ‰å¤§é‡çš„è®¡æ•°ç±»çš„éœ€æ±‚å‘¢ï¼Ÿä½ æ˜¯å¦‚ä½•è®¾è®¡æ–¹æ¡ˆæ¥å­˜å‚¨å’Œè¯»å–è¿™äº›è®¡æ•°çš„å‘¢ï¼Ÿæ¬¢è¿åœ¨ç•™è¨€åŒºä¸æˆ‘åˆ†äº«ä½ çš„ç»éªŒã€‚</p><p>æœ€åï¼Œæ„Ÿè°¢ä½ çš„é˜…è¯»ï¼Œå¦‚æœè¿™ç¯‡æ–‡ç« è®©ä½ æœ‰æ‰€æ”¶è·ï¼Œä¹Ÿæ¬¢è¿ä½ å°†å®ƒåˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ã€‚</p>","neighbors":{"left":{"article_title":"36 | é¢è¯•ç°åœºç¬¬ä¸‰æœŸï¼šä½ è¦å¦‚ä½•å‡†å¤‡ä¸€åœºæŠ€æœ¯é¢è¯•å‘¢ï¼Ÿ","id":178324},"right":{"article_title":"38 | è®¡æ•°ç³»ç»Ÿè®¾è®¡ï¼ˆäºŒï¼‰ï¼š50ä¸‡QPSä¸‹å¦‚ä½•è®¾è®¡æœªè¯»æ•°ç³»ç»Ÿï¼Ÿ","id":180211}},"comments":[{"had_liked":false,"id":162981,"user_name":"å°é£éª†éª†","can_delete":false,"product_type":"c1","uid":1170748,"ip_address":"","ucode":"891D3599644ABD","user_header":"https://static001.geekbang.org/account/avatar/00/11/dd/3c/a595eb2a.jpg","comment_is_top":false,"comment_ctime":1576637204,"is_pvip":true,"replies":[{"id":"62134","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1576735129,"ip_address":"","comment_id":162981,"utype":1}],"discussion_count":3,"race_medal":0,"score":"242094805780","product_id":100035801,"comment_content":"æ€»ç»“ï¼š<br>1ã€ä¸€å¼€å§‹ç”¨mysqlè¿›è¡Œè®¡æ•°ï¼Œåæ¥åŠ å…¥äº†ä¸»ä»æ¶æ„ï¼Œåˆ†åº“åˆ†è¡¨æ¶æ„ã€‚<br>2ã€å› ä¸ºè®¡æ•°è®¿é—®é‡å¤ªå¤§äº†ï¼ŒåŠ å…¥äº†ç¼“å­˜ï¼Œä½†æ˜¯è¿™ä¸ªä¼šé€ æˆç›¸åº”çš„é‚£ä¸ªç¼“å­˜å’Œæ•°æ®åº“æ•°æ®ä¸ä¸€è‡´ï¼Œå¦‚æœè¦ä¿è¯ä¸€æ€§çš„è¯ï¼Œå°±éœ€è¦é‡‡ç”¨å†…å­˜é˜Ÿåˆ—ï¼Œå¯¹äºåŒä¸€ä¸ªidçš„æ•°é‡åªèƒ½ç”¨å•çº¿ç¨‹è¿›è¡Œå¤„ç†ï¼Œè¿™ä¸ªä¼šé€ æˆæ€§èƒ½é—®é¢˜ã€‚<br>3ã€åæ¥ç›´æ¥æŠ›å¼ƒäº†mysqlï¼Œç›´æ¥ç”¨redis clusteræ¥æ”¯æŒè®¡æ•°æœåŠ¡,å› ä¸ºredisé€šè¿‡rdbå’Œaofæ¥æ”¯æŒæŒä¹…åŒ–ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®ä¿è¯è‡³å°‘æœ‰ä¸€å°ä»redisæœºå™¨åŒæ­¥äº†æ•°æ®ï¼Œä»redisæ¥åšç›¸åº”çš„é‚£ä¸ªæŒä¹…åŒ–æ“ä½œè¾¾åˆ°æ•°æ®ä¸ä¸¢å¤±ï¼Œå› ä¸ºåŸç”Ÿçš„redisæ•°æ®ç»“æ„ä¼šå ç”¨æ¯”è¾ƒå¤šçš„å­—èŠ‚ï¼Œè¿™é‡Œç›´æ¥è¿›è¡Œæ”¹é€ ï¼Œè®©redisçš„æ•°æ®ç»“æ„å ç”¨å†…å­˜åŠ å°‘ã€‚<br>4ã€ä½†æ˜¯redisæ˜¯å…¨å†…å­˜çš„ï¼Œéšç€é‡è¶Šæ¥è¶Šå¤§è‚¯å®šæ²¡æ³•æ”¯æŒäº†ï¼Œè¿™é‡Œè¿›è¡Œæ”¹é€ ï¼Œå¼•å…¥ssdï¼Œæ”¯æŒæŠŠå†·æ•°æ®æ”¾åˆ°ssdä¸­ï¼Œçƒ­æ•°æ®åœ¨å†…å­˜ä¸­ï¼Œå½“è¦è®¿é—®å†·æ•°æ®æ—¶åˆ©ç”¨ä¸€ä¸ªçº¿ç¨‹å¼‚æ­¥æŠŠå†·æ•°æ®åŠ è½½åˆ°ä¸€ä¸ªcold cacheé‡Œé¢å»ã€‚è¿™ä¸ªæœ‰å¾ˆå¤šå¼€æºçš„å®ç°ï¼Œå¦‚Pikaï¼ŒSSDBç”¨ssdæ¥æ›¿ä»£å†…å­˜å­˜å‚¨å†·æ•°æ®ã€‚","like_count":57,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478196,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576735129,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1255277,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLDVXsv6JOOficLK07867AkAb21eoG5KBgYFmwhMXKJooU5B6iaIZwyDxExicokVQSiaKEwZ4qPicqVFcg/132","nickname":"æ‹¼yinä¸–ç•Œ","note":"","ucode":"9571428A12B72A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":535609,"discussion_content":"å…³é”®æ˜¯ï¼Œå†·çƒ­æ•°æ®ï¼Œå¦‚ä½•åŒºåˆ†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638495339,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2675399,"avatar":"https://static001.geekbang.org/account/avatar/00/28/d2/c7/b7f52df2.jpg","nickname":"é›¨é‡Œ","note":"","ucode":"C475DE8B5375AB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1255277,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLDVXsv6JOOficLK07867AkAb21eoG5KBgYFmwhMXKJooU5B6iaIZwyDxExicokVQSiaKEwZ4qPicqVFcg/132","nickname":"æ‹¼yinä¸–ç•Œ","note":"","ucode":"9571428A12B72A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":571114,"discussion_content":"æœ€è¿‘è®¿é—®å°±æ˜¯çƒ­æ•°æ®ï¼Œéš”çš„æ—¶é—´è¶Šè¿œå°±æ˜¯å†·æ•°æ®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1652074974,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":535609,"ip_address":""},"score":571114,"extra":""}]}]},{"had_liked":false,"id":220231,"user_name":"å°å›°","can_delete":false,"product_type":"c1","uid":1350019,"ip_address":"","ucode":"8F143BEC9F2A5D","user_header":"https://static001.geekbang.org/account/avatar/00/14/99/83/b5743382.jpg","comment_is_top":false,"comment_ctime":1590209883,"is_pvip":false,"replies":[{"id":"83116","content":"å¸ƒéš†è¿‡æ»¤å™¨","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1591803272,"ip_address":"","comment_id":220231,"utype":1}],"discussion_count":8,"race_medal":0,"score":"57424784731","product_id":100035801,"comment_content":"å¾®åšç‚¹èµè¿˜æœ‰å“¥éš¾ç‚¹ï¼Œå°±æ˜¯ç”¨æˆ·åªèƒ½ç‚¹èµä¸€æ¬¡ï¼Œè¿™ä¸ªè¯¥ç”¨ä»€ä¹ˆå­˜å‚¨ç»“æ„å‘¢ï¼Œæˆ–è€…æŠ€æœ¯æ–¹æ¡ˆ","like_count":14,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496096,"discussion_content":"å¸ƒéš†è¿‡æ»¤å™¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591803272,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1255277,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLDVXsv6JOOficLK07867AkAb21eoG5KBgYFmwhMXKJooU5B6iaIZwyDxExicokVQSiaKEwZ4qPicqVFcg/132","nickname":"æ‹¼yinä¸–ç•Œ","note":"","ucode":"9571428A12B72A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":535610,"discussion_content":"çœ‹äº†åŠå¤©ï¼Œè¿˜æ˜¯æ²¡æœ‰çœ‹æ˜ç™½ï¼Œæ‰å¿ƒäº†\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638495502,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1062848,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ersGSic8ib7OguJv6CJiaXY0s4n9C7Z51sWxTTljklFpq3ZAIWXoFTPV5oLo0GMTkqW5sYJRRnibNqOJQ/132","nickname":"walleæ–Œ","note":"","ucode":"0DB3243004951F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":387474,"discussion_content":"å“‡  è€å‰è¾ˆäº†ã€‚ã€‚å¾®åšåˆ¤æ–­æ˜¯å¦èµè¿‡æ•°æ®æˆ‘è¿™è¾¹æè¿‡ã€‚ã€‚æ˜¯å¦èµæŒ‰ç…§å¸ƒéš†è¿‡æ»¤å™¨ç®—ï¼Œåè¾¹è·Ÿç€ä¸€ä¸ªè¾ƒå°çš„redis+dbå³å¯ï¼Œå› ä¸ºæ¯ä¸ªæœˆçš„é‡åŸºæœ¬æ˜¯å¯ä»¥é¢„ä¼°å‡ºæ¥çš„ã€‚æŒ‰ç…§å¹´å¢é•¿å¤šå°‘ï¼Œå¹³æ‘Šåˆ°æœˆã€‚ã€‚è‡³äºå–æ¶ˆç‚¹èµ ä¸ç”¨ç®¡ã€‚å› ä¸ºæœ¬èº«å¸ƒéš†è¿‡æ»¤å™¨å‘Šä½ ä¹ˆæœ‰å¯ä¿¡ï¼Œã€‚ã€‚æœ‰çš„æ—¶å€™åè€Œç©¿é€redis + dbã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628209801,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1667714,"avatar":"https://static001.geekbang.org/account/avatar/00/19/72/82/24fb9d18.jpg","nickname":"æ…•ç„¶","note":"","ucode":"8622102560A80F","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1062848,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ersGSic8ib7OguJv6CJiaXY0s4n9C7Z51sWxTTljklFpq3ZAIWXoFTPV5oLo0GMTkqW5sYJRRnibNqOJQ/132","nickname":"walleæ–Œ","note":"","ucode":"0DB3243004951F","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":408366,"discussion_content":"å¸ƒéš†è¿‡æ»¤å™¨ï¼Œç‚¹èµï¼Œuidä¸º3ï¼ˆ0x11ï¼‰ç‚¹äº†åï¼Œuidä¸º1ï¼ˆox01ï¼‰æ€ä¹ˆåˆ¤æ–­ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635236141,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":387474,"ip_address":""},"score":408366,"extra":""}]},{"author":{"id":1371061,"avatar":"https://static001.geekbang.org/account/avatar/00/14/eb/b5/d2e517c2.jpg","nickname":"è¿™ä¸ªåå­—ä¸å¸¦è‰²å½©","note":"","ucode":"E9FE4D62835551","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":358947,"discussion_content":"å–æ¶ˆç‚¹èµæ€ä¹ˆæï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616077978,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1092169,"avatar":"https://static001.geekbang.org/account/avatar/00/10/aa/49/51790edb.jpg","nickname":"è½å°˜kira","note":"","ucode":"D203B519E43F85","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1371061,"avatar":"https://static001.geekbang.org/account/avatar/00/14/eb/b5/d2e517c2.jpg","nickname":"è¿™ä¸ªåå­—ä¸å¸¦è‰²å½©","note":"","ucode":"E9FE4D62835551","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":373226,"discussion_content":"bitè½¬number","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620654944,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":358947,"ip_address":""},"score":373226,"extra":""},{"author":{"id":1308939,"avatar":"https://static001.geekbang.org/account/avatar/00/13/f9/0b/275cb83a.jpg","nickname":"å¤§è¥¿å‡ à¸„à¸´à¸”à¸–à¸¶à¸‡","note":"","ucode":"A4BE6153A4DC19","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1092169,"avatar":"https://static001.geekbang.org/account/avatar/00/10/aa/49/51790edb.jpg","nickname":"è½å°˜kira","note":"","ucode":"D203B519E43F85","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":389425,"discussion_content":"èƒ½è¯¦ç»†è§£é‡Šä¸‹å—\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629273900,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":373226,"ip_address":""},"score":389425,"extra":""},{"author":{"id":1474954,"avatar":"https://static001.geekbang.org/account/avatar/00/16/81/8a/15a96a64.jpg","nickname":"Gatsby","note":"","ucode":"5DBFDA12556BDB","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1308939,"avatar":"https://static001.geekbang.org/account/avatar/00/13/f9/0b/275cb83a.jpg","nickname":"å¤§è¥¿å‡ à¸„à¸´à¸”à¸–à¸¶à¸‡","note":"","ucode":"A4BE6153A4DC19","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":406653,"discussion_content":"åŸæ¥åªæ˜¯å­˜çš„æ˜¯1åšæ ‡è¯†ï¼Œç°åœ¨å­˜æ•°å€¼ï¼Œé‡å æ—¶++ï¼Œåˆ é™¤æ—¶--","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1634815487,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":389425,"ip_address":""},"score":406653,"extra":""}]}]},{"had_liked":false,"id":168649,"user_name":"bugå·¥ç¨‹å¸ˆ","can_delete":false,"product_type":"c1","uid":1042743,"ip_address":"","ucode":"E143D2DD9FFC9C","user_header":"https://static001.geekbang.org/account/avatar/00/0f/e9/37/4780b70c.jpg","comment_is_top":false,"comment_ctime":1578131719,"is_pvip":false,"replies":[{"id":"66192","content":"ç²‰ä¸ä¸€èˆ¬åªåœ¨ç²‰ä¸åˆ—è¡¨ä¸­å±•ç¤ºï¼Œç°åœ¨å¾®åšåªå±•ç¤º5000ä¸ªç²‰ä¸ï¼Œæ‰€ä»¥æ²¡å¿…è¦ç¼“å­˜å…¨é‡çš„ç²‰ä¸æ•°æ®ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1578732827,"ip_address":"","comment_id":168649,"utype":1}],"discussion_count":3,"race_medal":0,"score":"48822771975","product_id":100035801,"comment_content":"è€å¸ˆï¼Œå…³äºå…³æ³¨å…³ç³»å­˜å‚¨ï¼Œæˆ‘ä»¬å…¬å¸ç°åœ¨ç”¨æˆ·çš„å…³æ³¨åˆ—è¡¨å’Œç²‰ä¸åˆ—è¡¨éƒ½æ”¾åœ¨redisçš„sortedsetç»“æ„ä¸­ï¼Œä¸€ä¸ªkeyæœ€å¤§èƒ½å¤Ÿå åˆ°2gï¼Œç°åœ¨8ä¸ªèŠ‚ç‚¹ï¼Œæ¯ä¸ªèŠ‚ç‚¹å¹³å‡å·²ä½¿ç”¨20gå®¹é‡ï¼Œredisæ”¹é€ çš„èƒ½åŠ›æˆ‘ä»¬ä¸å…·å¤‡ï¼Œè¿˜æœ‰ä»€ä¹ˆå…¶ä»–ä¼˜åŒ–æ€è·¯ï¼Œèƒ½å¤Ÿå‡å°‘å­˜å‚¨æˆæœ¬ï¼Œè·å–ç²‰ä¸åˆ—è¡¨å“åº”æ—¶é—´ä½å»¶è¿Ÿå‘¢ï¼Ÿ","like_count":12,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480282,"discussion_content":"ç²‰ä¸ä¸€èˆ¬åªåœ¨ç²‰ä¸åˆ—è¡¨ä¸­å±•ç¤ºï¼Œç°åœ¨å¾®åšåªå±•ç¤º5000ä¸ªç²‰ä¸ï¼Œæ‰€ä»¥æ²¡å¿…è¦ç¼“å­˜å…¨é‡çš„ç²‰ä¸æ•°æ®ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578732827,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1015754,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7f/ca/ea85bfdd.jpg","nickname":"helloworld","note":"","ucode":"00DF2FEC58D2E6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":294813,"discussion_content":"ä»ä¸šåŠ¡ä¸Šè§„é¿","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1596007939,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1292724,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJw2X8ib9oJCfoAavUFQiaHUk6ibUahvDicstTSjmib3OzPSic4KgWx98z4fOyiaTyd9WUF0W8niaeCpMOxog/132","nickname":"Geek_zhuyu","note":"","ucode":"E27E4CC9806FF5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":143418,"discussion_content":"è€å¸ˆï¼Œå¾®åšå…³æ³¨åˆ—è¡¨å’Œç²‰ä¸åˆ—è¡¨æ˜¯æ€ä¹ˆå­˜å‚¨çš„ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579505637,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":173329,"user_name":"Geek_zhuyu","can_delete":false,"product_type":"c1","uid":1292724,"ip_address":"","ucode":"E27E4CC9806FF5","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJw2X8ib9oJCfoAavUFQiaHUk6ibUahvDicstTSjmib3OzPSic4KgWx98z4fOyiaTyd9WUF0W8niaeCpMOxog/132","comment_is_top":false,"comment_ctime":1579505764,"is_pvip":false,"replies":[{"id":"67363","content":"å…¶å®ä½ å¾ˆéš¾ä¿è¯å†™å…¥å®Œå…¨æ²¡æœ‰é”™è¯¯ï¼Œä¸€èˆ¬æ˜¯å¯¹äºç²‰ä¸æ•°æ¯”è¾ƒå°‘çš„ç”¨æˆ·ï¼Œåœ¨è·å–ç²‰ä¸æ•°çš„æ—¶å€™å¼‚æ­¥ä»æ•°æ®åº“æ ¡å¯¹ä¸€ä¸‹æ•°æ®ï¼›å¦‚æœç²‰ä¸æ˜¯æ¯”è¾ƒå¤šï¼Œé‚£ä¹ˆå·®å‡ ä¸ªç”¨æˆ·ä¹Ÿä¸ä¼šæ„Ÿè§‰åˆ°ğŸ˜‚","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1579695039,"ip_address":"","comment_id":173329,"utype":1}],"discussion_count":2,"race_medal":0,"score":"40234211428","product_id":100035801,"comment_content":"è€å¸ˆï¼Œé€šè¿‡æ¶ˆæ¯é˜Ÿåˆ—æ¥è®¡æ•°çš„è¯ï¼Œæ€ä¹ˆä¿è¯è®¡æ•°çš„å‡†ç¡®æ€§ï¼Œæ¯”å¦‚å…³æ³¨æ•°å’Œç²‰ä¸æ•°è¿™ç§å¯¹å‡†ç¡®æ€§è¦æ±‚æ¯”è¾ƒé«˜çš„","like_count":9,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":482040,"discussion_content":"å…¶å®ä½ å¾ˆéš¾ä¿è¯å†™å…¥å®Œå…¨æ²¡æœ‰é”™è¯¯ï¼Œä¸€èˆ¬æ˜¯å¯¹äºç²‰ä¸æ•°æ¯”è¾ƒå°‘çš„ç”¨æˆ·ï¼Œåœ¨è·å–ç²‰ä¸æ•°çš„æ—¶å€™å¼‚æ­¥ä»æ•°æ®åº“æ ¡å¯¹ä¸€ä¸‹æ•°æ®ï¼›å¦‚æœç²‰ä¸æ˜¯æ¯”è¾ƒå¤šï¼Œé‚£ä¹ˆå·®å‡ ä¸ªç”¨æˆ·ä¹Ÿä¸ä¼šæ„Ÿè§‰åˆ°ğŸ˜‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579695039,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1114352,"avatar":"https://static001.geekbang.org/account/avatar/00/11/00/f0/fe94061e.jpg","nickname":"å‡è£…åœ¨å…»ğŸ·","note":"","ucode":"D0AB9CD03E0D5B","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":573935,"discussion_content":"æŠ€æœ¯æ€ç»´å’Œä¸šåŠ¡æ€ç»´ç›¸ç»“åˆï¼ŒæŠ€æœ¯ä¸Šä¸å¥½å®ç°çš„ï¼Œä¸šåŠ¡ä¸Šå¯ä»¥å¦¥å","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1653735253,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":164827,"user_name":"æ‰¬ä¸€åœºè¿œè¿œçš„é£","can_delete":false,"product_type":"c1","uid":1357801,"ip_address":"","ucode":"AB47E3D2EAB8A8","user_header":"https://static001.geekbang.org/account/avatar/00/14/b7/e9/5400cdf3.jpg","comment_is_top":false,"comment_ctime":1577096942,"is_pvip":false,"replies":[{"id":"63051","content":"KVå‹çš„redisã€leveldbä¹‹ç±»è¦æ¯”hbaseæ€§èƒ½å¥½å¾ˆå¤šï¼Œhbaseä¹Ÿæ¯”è¾ƒé‡ï¼Œè¦ä¾èµ–hdfs","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1577240406,"ip_address":"","comment_id":164827,"utype":1}],"discussion_count":1,"race_medal":0,"score":"35936835310","product_id":100035801,"comment_content":"è€å¸ˆï¼Œè¿™ç§æµ·é‡çš„KVå‹è®¡æ•°ï¼Œæ˜¯å¦ç”¨ hbaseå­˜å‚¨ä¼šå¥½ç®€å•è®¸å¤šï¼Ÿèµ·ç ä¸ç”¨åƒmysqlé‚£æ ·è¦åœ¨clientç«¯åšåˆ†åº“åˆ†è¡¨ã€‚è¯»è¯·æ±‚ä¾ç„¶å¯ä»¥èµ°ç¼“å­˜ã€‚","like_count":8,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478906,"discussion_content":"KVå‹çš„redisã€leveldbä¹‹ç±»è¦æ¯”hbaseæ€§èƒ½å¥½å¾ˆå¤šï¼Œhbaseä¹Ÿæ¯”è¾ƒé‡ï¼Œè¦ä¾èµ–hdfs","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577240406,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":163013,"user_name":"åƒé¥­é¥­","can_delete":false,"product_type":"c1","uid":1231549,"ip_address":"","ucode":"95CFA07CDA2957","user_header":"https://static001.geekbang.org/account/avatar/00/12/ca/bd/a51ae4b2.jpg","comment_is_top":false,"comment_ctime":1576640014,"is_pvip":false,"replies":[{"id":"62131","content":"å…¶å®å°±æ˜¯redisæœ¬èº«éœ€è¦çš„ä¸€äº›å­˜å‚¨ç©ºé—´ï¼Œæ¯”å¦‚åˆšæ‰æåˆ°çš„keyä½¿ç”¨stringæ¥å­˜å‚¨éœ€è¦28ä¸ªå­—èŠ‚ï¼Œredisä¸­ä½¿ç”¨çš„ç±»ä¼¼å“ˆå¸Œè¡¨çš„æ•°æ®ç»“æ„å«dictEntryï¼Œä¹Ÿéœ€è¦24ä¸ªå­—èŠ‚ï¼Œè¿˜å­˜å‚¨ä¸€äº›æŒ‡é’ˆä¹‹ç±»","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1576734922,"ip_address":"","comment_id":163013,"utype":1}],"discussion_count":2,"race_medal":0,"score":"35936378382","product_id":100035801,"comment_content":"ã€å¦‚æœè¦å­˜å‚¨ä¸€ä¸ª KV ç±»å‹çš„è®¡æ•°ä¿¡æ¯ï¼ŒKey æ˜¯ 8 å­—èŠ‚ Long ç±»å‹çš„ weibo_idï¼ŒValue æ˜¯ 4 å­—èŠ‚ int ç±»å‹çš„è½¬å‘æ•°ï¼Œå­˜å‚¨åœ¨ Redis ä¸­ä¹‹åä¼šå ç”¨è¶…è¿‡ 70 ä¸ªå­—èŠ‚çš„ç©ºé—´ã€‘è¿™ä¸ª 70 ä¸ªå­—èŠ‚æ˜¯æ€ä¹ˆç®—å‡ºæ¥çš„ï¼Œæœ‰ç‚¹æ‡µ","like_count":8,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478214,"discussion_content":"å…¶å®å°±æ˜¯redisæœ¬èº«éœ€è¦çš„ä¸€äº›å­˜å‚¨ç©ºé—´ï¼Œæ¯”å¦‚åˆšæ‰æåˆ°çš„keyä½¿ç”¨stringæ¥å­˜å‚¨éœ€è¦28ä¸ªå­—èŠ‚ï¼Œredisä¸­ä½¿ç”¨çš„ç±»ä¼¼å“ˆå¸Œè¡¨çš„æ•°æ®ç»“æ„å«dictEntryï¼Œä¹Ÿéœ€è¦24ä¸ªå­—èŠ‚ï¼Œè¿˜å­˜å‚¨ä¸€äº›æŒ‡é’ˆä¹‹ç±»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576734922,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1009652,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","nickname":"é’±","note":"","ucode":"2C92A243A463D4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":262345,"discussion_content":"åŒæ ·æœ‰ç–‘é—®ï¼Œè€å¸ˆçš„å›ç­”è¿‡äºç¬¼ç»Ÿä¸ç»†è‡´äº†ï¼Œ8+4ï¼12ï¼Œéœ€è¦å ç”¨70ï¼Œå¤šå‡ºæ¥çš„58å­—èŠ‚å…·ä½“æ¯ä¸ªè‡ªå·±å­˜å‚¨çš„å•¥ï¼Ÿä¸ºä»€ä¹ˆæ¯”å®é™…å­˜å‚¨çš„æ•°æ®å¤šè¿™ä¹ˆå¤šï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589077891,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":162932,"user_name":"gogo","can_delete":false,"product_type":"c1","uid":1003104,"ip_address":"","ucode":"E8F0F3B000020A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4e/60/0d5aa340.jpg","comment_is_top":false,"comment_ctime":1576632035,"is_pvip":false,"replies":[{"id":"62136","content":"rediså¯ä»¥åšä¸»ä»ï¼Œç„¶åä»ä»åº“æ¢å¤æ•°æ®","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1576735194,"ip_address":"","comment_id":162932,"utype":1}],"discussion_count":4,"race_medal":0,"score":"31641403107","product_id":100035801,"comment_content":"é€šè¿‡rediså­˜å‚¨è®¡æ•°çš„è¯ï¼Œå¦‚æœredisæœºå™¨æ•…éšœäº†æ€ä¹ˆåŠå‘¢ï¼Ÿå¾®åšæœ¬èº«çš„ä¿¡æ¯æ˜¯å¦‚ä½•å­˜å‚¨çš„å‘¢ï¼Œè€å¸ˆèƒ½ç›¸ä¿¡è®²è§£ä¸‹å—","like_count":7,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478184,"discussion_content":"rediså¯ä»¥åšä¸»ä»ï¼Œç„¶åä»ä»åº“æ¢å¤æ•°æ®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576735194,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1667714,"avatar":"https://static001.geekbang.org/account/avatar/00/19/72/82/24fb9d18.jpg","nickname":"æ…•ç„¶","note":"","ucode":"8622102560A80F","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":408368,"discussion_content":"ä¸¢çš„æ•°æ®æ€ä¹ˆåŠå‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635236342,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1474954,"avatar":"https://static001.geekbang.org/account/avatar/00/16/81/8a/15a96a64.jpg","nickname":"Gatsby","note":"","ucode":"5DBFDA12556BDB","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":406661,"discussion_content":"redisæ˜¯å†™åæ—¥å¿—ï¼Œä¸èƒ½ä¿è¯æ•°æ®ä¸ä¸¢å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634816917,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1047604,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/fc/34/c733b116.jpg","nickname":"ä½•ç£Š","note":"","ucode":"78934C3ED4A342","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":87771,"discussion_content":"redisæ˜¯å¯ä»¥æŒä¹…åŒ–çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576678570,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":162922,"user_name":"Dovelol","can_delete":false,"product_type":"c1","uid":1253384,"ip_address":"","ucode":"9B5DDF7720F307","user_header":"https://static001.geekbang.org/account/avatar/00/13/20/08/bc06bc69.jpg","comment_is_top":false,"comment_ctime":1576631390,"is_pvip":false,"replies":[{"id":"62138","content":"å°±æ˜¯éœ€è¦æ”¹é€ ä¸€ä¸‹redisï¼Œå¦‚æœredisçš„æ•°æ®å†™æ»¡äº†ï¼Œå°±å°†æ¯”è¾ƒæ—§çš„æ•°æ®dumpåˆ°ç£ç›˜ä¸Š","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1576735270,"ip_address":"","comment_id":162922,"utype":1}],"discussion_count":4,"race_medal":0,"score":"27346435166","product_id":100035801,"comment_content":"è€å¸ˆå¥½ï¼Œæƒ³é—®ä¸‹ç”¨redisçš„è¯è¯¥æ€ä¹ˆç”¨ssdé…åˆåšå†·çƒ­æ•°æ®å­˜å‚¨å‘¢ï¼Œè¿™å—å®Œå…¨æ²¡ç»éªŒï¼Œèƒ½è®²è®²å…·ä½“çš„å®ç°æ–¹æ¡ˆå—ï¼Ÿ","like_count":6,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478178,"discussion_content":"å°±æ˜¯éœ€è¦æ”¹é€ ä¸€ä¸‹redisï¼Œå¦‚æœredisçš„æ•°æ®å†™æ»¡äº†ï¼Œå°±å°†æ¯”è¾ƒæ—§çš„æ•°æ®dumpåˆ°ç£ç›˜ä¸Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576735270,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1755152,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/VTPuhJb5xxuRwH1iblqrAe3De4PoETgNWibZRkLlhvszysdtpAvSPZFuYtsJfWJmoXOFFWnpR02W9NGIiammU8UPg/132","nickname":"Info_E","note":"","ucode":"97207B2CC4C776","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":365134,"discussion_content":"lruå—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617715634,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1253384,"avatar":"https://static001.geekbang.org/account/avatar/00/13/20/08/bc06bc69.jpg","nickname":"Dovelol","note":"","ucode":"9B5DDF7720F307","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":294951,"discussion_content":"æŸ¥äº†ä¸€ä¸‹ï¼Œç›®å‰å¼€æºçš„å®ç°æœ‰swapdbï¼Œpikaã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596035414,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1015754,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7f/ca/ea85bfdd.jpg","nickname":"helloworld","note":"","ucode":"00DF2FEC58D2E6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":294812,"discussion_content":"åªæ˜¯ä¸€ä¸ªæ€è·¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596007669,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":165909,"user_name":"grandcool","can_delete":false,"product_type":"c1","uid":1000037,"ip_address":"","ucode":"7545E76CE3FEFC","user_header":"https://static001.geekbang.org/account/avatar/00/0f/42/65/f444ea39.jpg","comment_is_top":false,"comment_ctime":1577343927,"is_pvip":false,"replies":[{"id":"63256","content":"æ˜¯çš„","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1577348273,"ip_address":"","comment_id":165909,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23052180407","product_id":100035801,"comment_content":"Redisä¸ºå•¥å¼€å§‹ä¸ælongç±»å‹çš„keyå‘¢ï¼Œæ˜¯ä¸ºäº†é€šç”¨æ€§å—","like_count":5,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479313,"discussion_content":"æ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577348273,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":163913,"user_name":"æ˜Ÿç©º123","can_delete":false,"product_type":"c1","uid":1596920,"ip_address":"","ucode":"E998A7C585671B","user_header":"https://static001.geekbang.org/account/avatar/00/18/5d/f8/7de2c1cc.jpg","comment_is_top":false,"comment_ctime":1576825211,"is_pvip":false,"replies":[{"id":"63005","content":"å¤šè°¢è‚¯å®šï½","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1577196726,"ip_address":"","comment_id":163913,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18756694395","product_id":100035801,"comment_content":"è€å¸ˆçš„è¯¾è™½ç„¶ä»£ç æ¯”è¾ƒå°‘ï¼Œä½†æ˜¯è¯´å®è¯ï¼Œå®é™…ä¸šåŠ¡åœºæ™¯é‡Œè¿˜æ˜¯èƒ½æˆ‘ä»¬ä¸å°‘ä¼˜åŒ–çš„æ€è·¯ã€‚","like_count":4,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478577,"discussion_content":"å¤šè°¢è‚¯å®šï½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577196726,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":239768,"user_name":"Shine","can_delete":false,"product_type":"c1","uid":1184853,"ip_address":"","ucode":"BF3DB5ADF2B153","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/ydVBBkofXDqCyP7pdwkicHZ9xtyEEuZvzrrkeWcnQjZ1ibEgG60eLotQTsKJFpWibuf6e7G9r0I1xaribUAQibPMl7g/132","comment_is_top":false,"comment_ctime":1596638100,"is_pvip":false,"replies":[{"id":"90317","content":"æ•°æ®é‡å¤§çš„æƒ…å†µä¸‹ï¼Œè®¡æ•°å¾ˆéš¾ç™¾åˆ†ç™¾å‡†ç¡®ï¼Œå¯ä»¥çœ‹çœ‹å¾®åšçš„è®¡æ•°ï¼Œå¾ˆå¤šæ˜¯ä¸å‡†ç¡®çš„","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1599009627,"ip_address":"","comment_id":239768,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14481539988","product_id":100035801,"comment_content":"è¯·æ•™ä¸€ä¸ªé—®é¢˜ï¼Œæœ‰äº›è®¡æ•°ç‚¹è¿›å»æ˜¯æœ‰å…·ä½“æ•°æ®åˆ—è¡¨çš„ï¼Œæ¯”å¦‚è¯„è®ºæ•°ï¼Œè®¡æ•°åœ¨redisï¼Œæ•°æ®åœ¨æ•°æ®åº“ï¼Œæ•°æ®ä¼šä¸ä¼šä¸ä¸€è‡´ï¼Œå¦‚æœå¼•å…¥åˆ†å¸ƒå¼é”ï¼Œä¼šä¸ä¼šå½±å“æ€§èƒ½?","like_count":3,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":503212,"discussion_content":"æ•°æ®é‡å¤§çš„æƒ…å†µä¸‹ï¼Œè®¡æ•°å¾ˆéš¾ç™¾åˆ†ç™¾å‡†ç¡®ï¼Œå¯ä»¥çœ‹çœ‹å¾®åšçš„è®¡æ•°ï¼Œå¾ˆå¤šæ˜¯ä¸å‡†ç¡®çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599009627,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":165904,"user_name":"grandcool","can_delete":false,"product_type":"c1","uid":1000037,"ip_address":"","ucode":"7545E76CE3FEFC","user_header":"https://static001.geekbang.org/account/avatar/00/0f/42/65/f444ea39.jpg","comment_is_top":false,"comment_ctime":1577343772,"is_pvip":false,"replies":[{"id":"63257","content":"ç±»ä¼¼","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1577348281,"ip_address":"","comment_id":165904,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14462245660","product_id":100035801,"comment_content":"Pikaæ˜¯ä¸æ˜¯å°±æ˜¯åœ¨Redisä¸­æ”¹é€ äº†ä¸‹é€»è¾‘ï¼ŒæŠŠæ—§çš„æ•°æ®dumpåˆ°SSDä¸Šäº†å•Šï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479312,"discussion_content":"ç±»ä¼¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577348281,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":221444,"user_name":"stg609","can_delete":false,"product_type":"c1","uid":1073025,"ip_address":"","ucode":"FB70A75A891BB8","user_header":"https://static001.geekbang.org/account/avatar/00/10/5f/81/1c614f4a.jpg","comment_is_top":false,"comment_ctime":1590500059,"is_pvip":false,"replies":[{"id":"83120","content":"é¢å‘Cç«¯çš„ä¸šåŠ¡åŸºæœ¬ä¸Šä¸å¤ªå¯èƒ½select countå§","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1591803696,"ip_address":"","comment_id":221444,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10180434651","product_id":100035801,"comment_content":"ä¸€èˆ¬è¾¾åˆ°å¤šå¤§çš„æ•°æ®è§„æ¨¡ï¼Œéœ€è¦è€ƒè™‘å•ç‹¬æä¾›è®¡æ•°å™¨çš„åŠŸèƒ½å‘¢ï¼Ÿè¿˜æ˜¯è¯´é’ˆå¯¹æŸä¸€ç±»çš„è®¡æ•°ï¼Ÿ<br><br>æˆ‘ä»¬å¤§éƒ¨åˆ†éƒ½æ˜¯ç›´æ¥é€šè¿‡sqlå»æ•°æ®åº“ select countï¼Œä¼¼ä¹ç›®å‰ä¹Ÿæ²¡ä»€ä¹ˆé—®é¢˜","like_count":2,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496454,"discussion_content":"é¢å‘Cç«¯çš„ä¸šåŠ¡åŸºæœ¬ä¸Šä¸å¤ªå¯èƒ½select countå§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591803696,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":203039,"user_name":"tm1234","can_delete":false,"product_type":"c1","uid":1947612,"ip_address":"","ucode":"4042321C713186","user_header":"","comment_is_top":false,"comment_ctime":1586108785,"is_pvip":false,"replies":[{"id":"78251","content":"redisä¹Ÿæ˜¯ä¸€è‡´çš„å‘€","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1587622596,"ip_address":"","comment_id":203039,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10176043377","product_id":100035801,"comment_content":"è¯·é—®è€å¸ˆ mysqlæ˜¯æ”¯æŒå¼ºä¸€è‡´æ€§çš„ ä½†rediså¹¶ä¸èƒ½ï¼Œæ‰€ä»¥å¦‚æœæ˜¯å¯¹éœ€è¦å¼ºä¸€è‡´æ€§çš„è®¡æ•°åœºæ™¯ï¼ˆæ¯”å¦‚è´­ç‰©ç³»ç»Ÿï¼‰æ˜¯ä¸æ˜¯å°±ä¸èƒ½æ”¾å¼ƒmysqlå®Œå…¨ä½¿ç”¨rediså‘¢ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490744,"discussion_content":"redisä¹Ÿæ˜¯ä¸€è‡´çš„å‘€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587622596,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":193473,"user_name":"SuperYue","can_delete":false,"product_type":"c1","uid":1232077,"ip_address":"","ucode":"97DEDA055C462A","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epkttbAibb21Cf4Hvq7ASReEyk5klDhxQulmnrzQWEcqslZ6qhlFf8zw0ZpG8BA65icnz8ianlZVnkFA/132","comment_is_top":false,"comment_ctime":1584899972,"is_pvip":false,"replies":[{"id":"73869","content":"æ˜¯è¦æ‰‹åŠ¨è¡¥æ•°æ®","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1585012218,"ip_address":"","comment_id":193473,"utype":1}],"discussion_count":2,"race_medal":0,"score":"10174834564","product_id":100035801,"comment_content":"è€å¸ˆ çº¯ç”¨redisï¼Œæ€ä¹ˆè§£å†³äº‹åŠ¡çš„å¼ºä¸€è‡´æ€§å‘¢  æ¯”å¦‚è½¬å‘å’Œè¯„è®ºæ˜¯ä¸€ä¸ªäº‹åŠ¡æ€§è´¨çš„ä¸šåŠ¡ï¼Œè½¬å‘çš„redisæ“ä½œæˆåŠŸäº†ï¼Œè¯„è®ºæ“ä½œå¤±è´¥äº† è¦æ‰‹åŠ¨è¡¥æ•°æ®å—","like_count":2,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488565,"discussion_content":"æ˜¯è¦æ‰‹åŠ¨è¡¥æ•°æ®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585012218,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1947612,"avatar":"","nickname":"tm1234","note":"","ucode":"4042321C713186","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":222269,"discussion_content":"è¯·é—®è€å¸ˆ æ‰‹åŠ¨è¡¥æ•°æ®æ˜¯æ€ä¹ˆå®ç°çš„å‘¢ï¼Œæ˜¯æœ‰ä¸€ä¸ªä¸“é—¨çš„ä»»åŠ¡è¿›ç¨‹æ¥åšè¿™ä¸ªäº‹æƒ…å—\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586108876,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":188663,"user_name":"å¥½æœ›è§’","can_delete":false,"product_type":"c1","uid":1061396,"ip_address":"","ucode":"E1B67245D054A0","user_header":"https://static001.geekbang.org/account/avatar/00/10/32/14/5eaa10f6.jpg","comment_is_top":false,"comment_ctime":1584401895,"is_pvip":false,"replies":[{"id":"73101","content":"æ˜¯çš„","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1584590760,"ip_address":"","comment_id":188663,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10174336487","product_id":100035801,"comment_content":"åŸç”Ÿredisæ”¹é€ æ˜¯å•¥æ„æ€å•Šï¼Ÿæ”¹æºä»£ç å˜›","like_count":2,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":487479,"discussion_content":"æ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584590760,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":228576,"user_name":"å°é±¼å„¿åæ³¡æ³¡","can_delete":false,"product_type":"c1","uid":1031710,"ip_address":"","ucode":"2B4AA532B2B066","user_header":"https://static001.geekbang.org/account/avatar/00/0f/be/1e/94886200.jpg","comment_is_top":false,"comment_ctime":1592741068,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"5887708364","product_id":100035801,"comment_content":"æœ‰ä¸€ä¸ªæŠ€æœ¯é—®é¢˜ æƒ³è¦è¯·æ•™ä¸‹ï¼š<br><br>    éœ€æ±‚ï¼šè·å–æœ€è¿‘24å°æ—¶å†… ç‚¹èµæ•° æœ€å¤šçš„top1000 çš„å¾®åšä¿¡æ¯ï¼Œæ›´æ–°é—´éš”10åˆ†é’Ÿ<br><br>æ³¨æ„ï¼šè¿™ä¸ªç‚¹èµæ•°æ˜¯24h å†…çš„ç‚¹èµæ•° ï¼Œå¦‚ï¼šå¾®åša 24hä¹‹å‰æ˜¯1000ä¸ªç‚¹èµ æœ€è¿‘24hå†… æ˜¯5ä¸ªç‚¹èµ é‚£ä¹ˆæˆ‘ä»¬åœ¨è®¡ç®—æ—¶ éœ€è¦ä»¥5 æ¥è¿›è¡Œè®¡ç®— è€Œé1005ï¼ˆ1000+5ï¼‰<br><br><br>æˆ‘çš„æƒ³æ³•æ˜¯zset ä¿å­˜æœ€è¿‘24hå†…çš„å¾®åšid<br><br>ç„¶åæ¯ä¸ªå¾®åšidå†ç»´æŠ¤ä¸€ä¸ªzsetæ¥è®¡æ•° scoreä¸ºæ—¶é—´æˆ³ <br><br>è¯·æ•™ä¸‹ è€å¸ˆ æœ‰æ›´å¥½çš„è§£å†³æ–¹æ¡ˆå—","like_count":1,"discussions":[{"author":{"id":1081265,"avatar":"https://static001.geekbang.org/account/avatar/00/10/7f/b1/6418563f.jpg","nickname":"lose","note":"","ucode":"B8927A207A6B9E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":388872,"discussion_content":"æ‰«æä¿å­˜ç‚¹èµæ•°æ®çš„keyï¼Œä½¿ç”¨luaè„šæœ¬ï¼Œå¯¹æ¯ä¸ªkeyå…ˆremoveBySocre(24å°æ—¶ä¹‹å‰çš„æ•°æ®) ç„¶å zcardå°±å¯ä»¥äº†å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629023231,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":215689,"user_name":"é’±","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1589078688,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5884045984","product_id":100035801,"comment_content":"è¿™è®²çš„ä¸æ˜¯ä¸€ä¸ªç³»ç»Ÿå®Œæ•´çš„æ–¹æ¡ˆï¼Œæ›´åƒæ˜¯ä¸€ç§è®¡æ•°å™¨çš„æ¼”è¿›<br>1ï¼šæ”¾åœ¨MySQLä¸­<br>2ï¼šæ”¾åœ¨MySQLï¼‹redisä¸­<br>3ï¼šå…¨éƒ¨æ”¾åœ¨redisä¸­<br>4ï¼šæŠŠredisæ”¹é€ ä¸€ä¸‹ï¼Œç²¾ç®€å­˜å‚¨ç©ºé—´ï¼Œç„¶åæ”¾åœ¨äºŒæ¬¡å¼€å‘çš„redisä¸­ï¼Œæˆ‘è¡¨ç¤ºæ€€ç–‘ï¼Œæ­£å¸¸æ¥è®²redisçš„ä½œè€…åº”è¯¥åšäº†è¿™éƒ¨åˆ†å·¥ä½œï¼Œå†è¿›è¡Œå®šåˆ¶åŒ–å¯èƒ½æ˜¯æ·»åŠ æ–°çš„åŠŸèƒ½ç‰¹æ€§ï¼Œå¦‚æœè¿˜èƒ½ç²¾ç®€å­˜å‚¨ç©ºé—´ï¼Œå¯ä»¥ç»™redisæPRï¼Œå¦åˆ™ä¼°è®¡ä¸å…·æœ‰é€šç”¨æ€§ï¼Œè¿™é‡Œå°†æ”¹ä»£ç ä¹Ÿä¸å…·ä½“çš„<br>5ï¼šæ”¾åˆ°redisï¼‹ssdä¸­ï¼Œåˆå›åˆ°MySQLï¼‹redisäº†ï¼Œåªæ˜¯æ ¹æ®æ•°æ®çš„å†·çƒ­ï¼Œåˆ†åŒºåŸŸå­˜å‚¨<br>æˆ‘çŒœæµ‹MySQLï¼‹redisèƒ½æ»¡è¶³80%çš„éœ€æ±‚ï¼Œç”šè‡³æ›´å¤šï¼Œå†æœ‰å®šåˆ¶åŒ–çš„éœ€æ±‚ä¼°è®¡ä¹Ÿæœ‰å®åŠ›æ”¹ä¸€ä¸‹redisçš„æºç ","like_count":1},{"had_liked":false,"id":206344,"user_name":"Geek_bd613f","can_delete":false,"product_type":"c1","uid":1343671,"ip_address":"","ucode":"69740C1D0FC15B","user_header":"","comment_is_top":false,"comment_ctime":1586844833,"is_pvip":true,"replies":[{"id":"78246","content":"æ²¡è®°é”™çš„è¯ï¼Œlen å’Œfreeæ˜¯unsigned intï¼Œå„4ä¸ªå­—èŠ‚","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1587622419,"ip_address":"","comment_id":206344,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5881812129","product_id":100035801,"comment_content":"è€å¸ˆä½ å¥½ï¼ŒåŸç”Ÿçš„ Redis åœ¨å­˜å‚¨ Key æ—¶æ˜¯æŒ‰ç…§å­—ç¬¦ä¸²ç±»å‹æ¥å­˜å‚¨çš„ï¼Œæ¯”å¦‚ä¸€ä¸ª 8 å­—èŠ‚çš„ Long ç±»å‹çš„æ•°æ®ï¼Œéœ€è¦ 8ï¼ˆsdshdr æ•°æ®ç»“æ„é•¿åº¦ï¼‰+ 19ï¼ˆ8 å­—èŠ‚æ•°å­—çš„é•¿åº¦ï¼‰+1ï¼ˆâ€™\\0â€™ï¼‰=28 ä¸ªå­—èŠ‚ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨ Long ç±»å‹æ¥å­˜å‚¨å°±åªéœ€è¦ 8 ä¸ªå­—èŠ‚ï¼Œä¼šèŠ‚çœ 20 ä¸ªå­—èŠ‚çš„ç©ºé—´ã€‚<br><br>æˆ‘æŸ¥äº†ä¸‹èµ„æ–™ï¼š<br><br>redis çš„ key æŒ‰ç…§å­—ç¬¦ä¸²ç±»å‹å‚¨å­˜çš„æ—¶å€™ï¼Œ key ç”±  SDS ç»„æˆï¼ŒSDS ç”±<br>len     å­—ç¬¦ä¸²é•¿åº¦        1byt<br>alloc    åˆ†é…çš„å†…å­˜       1byt<br>flags\t\tæ˜¯å“ªç§å®ç°    sdshdr4   8  16    1byt<br>char buf[]   å­—ç¬¦æ•°ç»„ç”¨æ¥å‚¨å­˜    16byt<br><br>SDS çš„å¤§å°æ˜¯ 19ä¸ªå­—èŠ‚, <br>è€å¸ˆä½ è¯´ï¼šéœ€è¦8ï¼ˆsdshdræ•°æ®ç»“æ„é•¿åº¦ï¼‰è¿™ä¸ªæ˜¯ä»€ä¹ˆæ„æ€å‘€ï¼Ÿ<br>æ˜¯ä¸æ˜¯æˆ‘ å¯¹ redis string ç±»å‹çš„å‚¨å­˜å®ç°ç†è§£æœ‰è¯¯å‘€ï¼Œçœ‹äº†åŠå¤©æ²¡ç†è§£è¿™ä¸ªåœ°æ–¹ã€‚ç›¼å›å¤~","like_count":1,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":491759,"discussion_content":"æ²¡è®°é”™çš„è¯ï¼Œlen å’Œfreeæ˜¯unsigned intï¼Œå„4ä¸ªå­—èŠ‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587622419,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":181682,"user_name":"å°æ´›","can_delete":false,"product_type":"c1","uid":1005062,"ip_address":"","ucode":"227EC21891012B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/56/06/ea49b29d.jpg","comment_is_top":false,"comment_ctime":1582615610,"is_pvip":false,"replies":[{"id":"71103","content":"1. ä½¿ç”¨redisçš„è¯åŸºæœ¬ä¸ä¼š<br>2. å…¶å®æ–‡ä¸­æœ‰è®²åˆ°ï¼Œä¸»è¦æ˜¯å¯¹redisçš„ä»£ç åšäº†ä¿®æ”¹ï¼Œå»æ‰äº†ä¸€äº›ä¸å¿…è¦çš„æ•°æ®ç»“æ„ï¼Œä»¥åŠæ›´æ”¹çš„å­˜å‚¨ç»“æ„","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1583115286,"ip_address":"","comment_id":181682,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5877582906","product_id":100035801,"comment_content":"ä¸¤ä¸ªé—®é¢˜å’¨ä¸‹è€å¸ˆï¼Œç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯ç›¸åŒå¾®åšidçš„è®¡æ•°æ•°æ®æ”¾åœ¨ä¸€èµ·ï¼Œé‚£åœ¨é«˜å¹¶å‘æ›´æ–°ä¸‹ï¼Œä¼šæœ‰æ€§èƒ½é—®é¢˜å—ï¼Œä¾‹å¦‚é”è®°å½•ç­‰ï¼Œç¬¬äºŒä¸ªé—®é¢˜æ˜¯rediså¦‚ä½•æ”¹é€ ï¼Œæ‰èƒ½ä¸å½±å“åŸæœ¬é«˜æ•ˆçš„æŸ¥è¯¢æ€§èƒ½ï¼Œæœ‰è¿›ä¸€æ­¥ç»†èŠ‚çš„åˆ†äº«ä¹ˆï¼Ÿè°¢è°¢è€å¸ˆ","like_count":1,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":485077,"discussion_content":"1. ä½¿ç”¨redisçš„è¯åŸºæœ¬ä¸ä¼š\n2. å…¶å®æ–‡ä¸­æœ‰è®²åˆ°ï¼Œä¸»è¦æ˜¯å¯¹redisçš„ä»£ç åšäº†ä¿®æ”¹ï¼Œå»æ‰äº†ä¸€äº›ä¸å¿…è¦çš„æ•°æ®ç»“æ„ï¼Œä»¥åŠæ›´æ”¹çš„å­˜å‚¨ç»“æ„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583115286,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":168069,"user_name":"y3","can_delete":false,"product_type":"c1","uid":1128084,"ip_address":"","ucode":"C93F8EC2AAACF6","user_header":"https://static001.geekbang.org/account/avatar/00/11/36/94/5aecb0ef.jpg","comment_is_top":false,"comment_ctime":1578010764,"is_pvip":false,"replies":[{"id":"66184","content":"æ˜¯çš„","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1578727769,"ip_address":"","comment_id":168069,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5872978060","product_id":100035801,"comment_content":"è¯·é—®è€å¸ˆï¼Œæœ¬æ–‡ä¸­æåˆ°å¯¹åŸç”Ÿredisç»„ä»¶è¿›è¡Œæ”¹é€ ï¼Œæ˜¯æŒ‡çš„åœ¨redisæºç ä¸Šè¿›è¡Œæ”¹é€ å’Œå®šåˆ¶å—ï¼ŸğŸ¤”ï¸ğŸ˜„","like_count":1,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480125,"discussion_content":"æ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578727769,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":167198,"user_name":"æ¢…å°è¥¿","can_delete":false,"product_type":"c1","uid":1118196,"ip_address":"","ucode":"F55CC7763DF440","user_header":"https://static001.geekbang.org/account/avatar/00/11/0f/f4/026bddc6.jpg","comment_is_top":false,"comment_ctime":1577714464,"is_pvip":false,"replies":[{"id":"65169","content":"æ˜¯è¿™æ ·çš„ï¼Œè¿™ç§æ–¹æ³•æ˜¯ä¸ºäº†è§£å†³hashå†²çªçš„é—®é¢˜ï¼Œä¹Ÿå°±æ˜¯å¤šä¸ªweibo_idæœ‰å¯èƒ½ç®—å‡ºåŒä¸€ä¸ªå“ˆå¸Œå€¼ã€‚æ‰€ä»¥åœ¨å­˜å‚¨ä¿¡æ¯çš„æ—¶å€™ï¼Œéœ€è¦ä¹Ÿè¦å­˜å‚¨å¾®åšçš„idï¼Œè¿™æ ·æ‰èƒ½ç¡®å®šè¿™ä¸ªä½ç½®ä¸Šåˆ°åº•å­˜å‚¨çš„æ˜¯å“ªä¸€ä¸ªå¾®åšID","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1577956186,"ip_address":"","comment_id":167198,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5872681760","product_id":100035801,"comment_content":"è€å¸ˆï¼Œæœ‰ä¸ªåœ°æ–¹æ²¡çœ‹æ‡‚ã€‚å­˜æ•°æ®çš„æ—¶å€™ï¼Œæˆ‘çš„ç†è§£æ˜¯é€šè¿‡ä¸€å®šçš„hashæŠŠweiboidçš„ä½ç½®æ‰¾åˆ°ï¼Œç„¶ååœ¨æ•°ç»„å“åº”çš„ä½ç½®å­˜å…¥ç‚¹èµæ•°ã€‚ä½†æ˜¯åœ¨å–æ•°æ®çš„æ—¶å€™ï¼Œä½ åŠ äº†ä¸€ä¸ª t[pos]==weibo_id ã€‚ä½ è¿™ä¸ªt[pos]ä¸æ˜¯å­˜çš„ç‚¹èµæ•°ä¹ˆï¼Œæ€ä¹ˆåˆè·Ÿweibo_idæ¥åˆ¤æ–­ç›¸ä¸ç›¸ç­‰å‘¢","like_count":1,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479777,"discussion_content":"æ˜¯è¿™æ ·çš„ï¼Œè¿™ç§æ–¹æ³•æ˜¯ä¸ºäº†è§£å†³hashå†²çªçš„é—®é¢˜ï¼Œä¹Ÿå°±æ˜¯å¤šä¸ªweibo_idæœ‰å¯èƒ½ç®—å‡ºåŒä¸€ä¸ªå“ˆå¸Œå€¼ã€‚æ‰€ä»¥åœ¨å­˜å‚¨ä¿¡æ¯çš„æ—¶å€™ï¼Œéœ€è¦ä¹Ÿè¦å­˜å‚¨å¾®åšçš„idï¼Œè¿™æ ·æ‰èƒ½ç¡®å®šè¿™ä¸ªä½ç½®ä¸Šåˆ°åº•å­˜å‚¨çš„æ˜¯å“ªä¸€ä¸ªå¾®åšID","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577956186,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1118196,"avatar":"https://static001.geekbang.org/account/avatar/00/11/0f/f4/026bddc6.jpg","nickname":"æ¢…å°è¥¿","note":"","ucode":"F55CC7763DF440","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":191031,"discussion_content":"é‚£è€å¸ˆè¿™ä¸ªå¤§æ•°ç»„ä¹Ÿæ˜¯ç”¨redisåšçš„å—ï¼Ÿlistï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582985301,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":163496,"user_name":"çŸ¥è¡Œåˆä¸€","can_delete":false,"product_type":"c1","uid":1521486,"ip_address":"","ucode":"2B8E634FC4CFB7","user_header":"https://static001.geekbang.org/account/avatar/00/17/37/4e/5c3153b2.jpg","comment_is_top":false,"comment_ctime":1576731705,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5871699001","product_id":100035801,"comment_content":"redisæ”¹é€ è¿™ä¸ªè¿˜æ˜¯æœ‰ç‚¹éš¾ï¼ŒredisåŠ SSDåšå†·çƒ­æ•°æ®åˆ†ç¦»ï¼Œè¿™ä¸ªå€¼å¾—å€Ÿé‰´ã€‚","like_count":1},{"had_liked":false,"id":162904,"user_name":"ç¨‹åºæ°´æœå®","can_delete":false,"product_type":"c1","uid":1371633,"ip_address":"","ucode":"1700DDFE073A56","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqyicZYyW7ahaXgXUD8ZAS8x0t8jx5rYLhwbUCJiawRepKIZfsLdkxdQ9XQMo99c1UDibmNVfFnAqwPg/132","comment_is_top":false,"comment_ctime":1576630229,"is_pvip":false,"replies":[{"id":"62139","content":"è¿™è¿˜å¥½å§ï¼Œhashè®¡ç®—åŸºæœ¬ä¸Šå¾®ç§’çº§åˆ«å§","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1576735295,"ip_address":"","comment_id":162904,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5871597525","product_id":100035801,"comment_content":"é€šè¿‡hashæ¥åˆ†è¡¨ï¼Œé‚£æ¯æ¬¡æŸ¥è¯¢çš„æ—¶å€™ä¹Ÿè¦è®¡ç®—hashå€¼æ‰èƒ½çŸ¥é“å»æŸ¥å“ªå¼ è¡¨ï¼Œæ€§èƒ½ä¸ä¼šæœ‰å½±å“å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478173,"discussion_content":"è¿™è¿˜å¥½å§ï¼Œhashè®¡ç®—åŸºæœ¬ä¸Šå¾®ç§’çº§åˆ«å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576735295,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1022247,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/99/27/47aa9dea.jpg","nickname":"é˜¿å¡ç‰›","note":"","ucode":"0BC43A904C3199","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":88743,"discussion_content":"ç›¸å¯¹äºåˆ†è¡¨åå¸¦æ¥çš„IOæå‡ï¼Œè¿™ç‚¹CPUæ€§èƒ½æŸå¤±æ˜¯å®Œå…¨å€¼å¾—çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576729054,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":350748,"user_name":"geek_arong2048","can_delete":false,"product_type":"c1","uid":1518310,"ip_address":"","ucode":"AB575BE100E4A9","user_header":"https://static001.geekbang.org/account/avatar/00/17/2a/e6/c788257f.jpg","comment_is_top":false,"comment_ctime":1657160691,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1657160691","product_id":100035801,"comment_content":"rediså¯ä»¥ä½¿ç”¨tikvè¿›è¡Œæ›¿æ¢ï¼ŒtikvåŸºäºrocksdbï¼Œä¼šå°†æ•°æ®å­˜å‚¨åœ¨ç£ç›˜ä¸­","like_count":0},{"had_liked":false,"id":342846,"user_name":"ç å“¥å­—èŠ‚","can_delete":false,"product_type":"c1","uid":1572356,"ip_address":"","ucode":"362103AD52C8E0","user_header":"https://static001.geekbang.org/account/avatar/00/17/fe/04/bb427e47.jpg","comment_is_top":false,"comment_ctime":1650505709,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1650505709","product_id":100035801,"comment_content":"HyperLogLog","like_count":0},{"had_liked":false,"id":310657,"user_name":"çš‡å®¶æ•‘æ˜Ÿ","can_delete":false,"product_type":"c1","uid":1326106,"ip_address":"","ucode":"89F1274A3835FE","user_header":"https://static001.geekbang.org/account/avatar/00/14/3c/1a/1806ef25.jpg","comment_is_top":false,"comment_ctime":1630825992,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1630825992","product_id":100035801,"comment_content":"æˆ‘ä»¬ç¢°åˆ°çš„åœºæ™¯ï¼Œè®¡æ•°è¦æ±‡æ€»ï¼Œä¸çŸ¥é“æ€ä¹ˆå‡å°‘é”å†²çªã€‚ä¾‹å¦‚æ¶ˆè´¹é™é¢ï¼Œè¦æ±‚å®¢æˆ·æœ‰å®¢æˆ·ä¸ªäººé™é¢ï¼Œç³»ç»Ÿè¿˜æœ‰å¤šçº§çš„æ€»é™é¢ï¼ˆä¾‹å¦‚å¸‚çº§æ€»é™é¢ï¼Œçœçº§æ€»é™é¢ï¼Œå…¨å›½æ€»é™é¢ï¼‰ï¼Œç°åœ¨ç”¨æˆ·æ¶ˆè´¹ä¸€æ¬¡å°±è¦æ›´æ”¹å¤šæ¡è®°å½•ï¼Œç´¯è®¡å·²ç”¨é™é¢ï¼Œé”å†²çªæ¯”è¾ƒä¸¥é‡ã€‚","like_count":0},{"had_liked":false,"id":310371,"user_name":"å°èƒ¡","can_delete":false,"product_type":"c1","uid":2397964,"ip_address":"","ucode":"1E0DD4138E9D0E","user_header":"","comment_is_top":false,"comment_ctime":1630633916,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1630633916","product_id":100035801,"comment_content":"æœ€å¥½èƒ½æŠŠè®¡æ•°ç³»ç»Ÿæ•´ä½“çš„æ¶æ„å›¾æˆ–è€…è¯´æ•´ä½“çš„æµç¨‹å›¾ç”»ä¸€ä¸‹å°±å¥½äº†","like_count":0},{"had_liked":false,"id":310370,"user_name":"å°èƒ¡","can_delete":false,"product_type":"c1","uid":2397964,"ip_address":"","ucode":"1E0DD4138E9D0E","user_header":"","comment_is_top":false,"comment_ctime":1630633844,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1630633844","product_id":100035801,"comment_content":"æ—¶é—´ä¹…è¿œçš„æ•°æ®æ˜¯å¦‚ä½•å†™åˆ°ç£ç›˜çš„ï¼Ÿå¼‚æ­¥å†™å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":299997,"user_name":"èºæ­Œè•¾è¥¿","can_delete":false,"product_type":"c1","uid":1263009,"ip_address":"","ucode":"445AE78CF5C86B","user_header":"https://static001.geekbang.org/account/avatar/00/13/45/a1/d97c3e23.jpg","comment_is_top":false,"comment_ctime":1624950686,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"1624950686","product_id":100035801,"comment_content":"æ–‡ç« ä¸­è¿˜æåˆ°å› ä¸ºè€ƒè™‘åˆ°æ•°æ®ä¸ä¸€è‡´çš„é—®é¢˜ï¼Œå¾®åšæ”¾å¼ƒäº†æ•°æ®åº“+ç¼“å­˜çš„å­˜å‚¨æ–¹å¼ï¼Œé’ˆå¯¹è¯„è®ºæ•°æ®ï¼Œä¸ä»…æœ‰è¯„è®ºæ•°é‡è¿˜æœ‰è¯„è®ºçš„è¯¦æƒ…åˆ—è¡¨ï¼Œè¿™æ ·æ˜¯ä¸æ˜¯ä¹Ÿä¼šå¯¼è‡´å¤–æ˜¾çš„è¯„è®ºæ•°ä¸è¯„è®ºåˆ—è¡¨é¡µçš„æ•°é‡ä¸ä¸€è‡´ï¼Ÿä½œè€…æ˜¯æ€æ ·é¿å…çš„ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":2756576,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/0f/e0/b53a7701.jpg","nickname":"éª‘è½¦ä¸Šå¤©ç©º","note":"","ucode":"364365E2721122","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583575,"discussion_content":"è¿™ç§ä¸ä¸€è‡´ä¸šåŠ¡ä¸Šèƒ½æ¥å—å§ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660210509,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":299995,"user_name":"èºæ­Œè•¾è¥¿","can_delete":false,"product_type":"c1","uid":1263009,"ip_address":"","ucode":"445AE78CF5C86B","user_header":"https://static001.geekbang.org/account/avatar/00/13/45/a1/d97c3e23.jpg","comment_is_top":false,"comment_ctime":1624950386,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1624950386","product_id":100035801,"comment_content":"æœ‰ä¸ªç–‘é—®æƒ³è¯·æ•™ä¸‹ä½œè€…ï¼Œç”¨äºå­˜å‚¨è¯„è®ºæ•°ã€ç‚¹èµæ•°ã€è½¬å‘æ•°çš„æ•°ç»„æ˜¯åºåˆ—åŒ–ä¹‹åå­˜å‚¨åˆ°redisçš„å—ï¼Ÿä¸ºä»€ä¹ˆä¸ç›´æ¥ä½¿ç”¨hashå­˜å‚¨ï¼Ÿ","like_count":0},{"had_liked":false,"id":293527,"user_name":"ç‰›å‘³æµ“é¾™é­æµ","can_delete":false,"product_type":"c1","uid":1605322,"ip_address":"","ucode":"FB58F144635B2A","user_header":"https://static001.geekbang.org/account/avatar/00/18/7e/ca/0689da8f.jpg","comment_is_top":false,"comment_ctime":1621418812,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1621418812","product_id":100035801,"comment_content":"ä¸€ç›´ä»¥æ¥éƒ½è¢«å‘Šè¯«ä¸è¦æŠŠrediså½“åšæ•°æ®åº“æ¥ç”¨ï¼Œè¿™ç¯‡æ–‡ç« åˆé¢ è¦†äº†æˆ‘çš„è®¤çŸ¥","like_count":0},{"had_liked":false,"id":286667,"user_name":"æ²™æ¼ ä¹‹é¹°","can_delete":false,"product_type":"c1","uid":1222887,"ip_address":"","ucode":"9FB290B874317F","user_header":"https://static001.geekbang.org/account/avatar/00/12/a8/e7/b86938a1.jpg","comment_is_top":false,"comment_ctime":1617466763,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1617466763","product_id":100035801,"comment_content":"å¦‚æœè¦ç»Ÿè®¡æœˆ&#47;å­£åº¦ç‚¹èµ&#47;åˆ†äº«è¶‹åŠ¿ï¼Œæ˜¯å¦è¦è®°å½•ç”¨æˆ·ç‚¹èµäº‹ä»¶äº†ã€‚è¿™ç§éœ€æ±‚å¦‚ä½•ä¿è¯é«˜å¹¶å‘å‘¢","like_count":0},{"had_liked":false,"id":264553,"user_name":"Geek_9c3134","can_delete":false,"product_type":"c1","uid":1141689,"ip_address":"","ucode":"479BC6B4CF22FA","user_header":"https://static001.geekbang.org/account/avatar/00/11/6b/b9/9b0630b1.jpg","comment_is_top":false,"comment_ctime":1606524346,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1606524346","product_id":100035801,"comment_content":"è€å¸ˆ  æŠŠç›¸åŒå¾®åš ID çš„è®¡æ•°å­˜å‚¨åœ¨ä¸€èµ·  æ€ä¹ˆåšåŠ å‡æ“ä½œ  æ˜¯è¦è‡ªå·±åŠ å‡å®Œåœ¨è®¾ç½®å—","like_count":0},{"had_liked":false,"id":251527,"user_name":"è¯·å«æˆ‘å’Œå°š","can_delete":false,"product_type":"c1","uid":1703256,"ip_address":"","ucode":"33A8A1CDA103F9","user_header":"https://static001.geekbang.org/account/avatar/00/19/fd/58/1af629c7.jpg","comment_is_top":false,"comment_ctime":1601644346,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"1601644346","product_id":100035801,"comment_content":"æŠŠè€çš„æ•°æ®æ”¾åœ¨SSDç£ç›˜ä¸Šï¼Œå¦‚æœè€ƒè™‘åˆ°SSDç£ç›˜æŒ‚æ‰äº†ï¼Œåˆå¦‚ä½•åšå®¹ç¾å…œåº•ï¼Ÿ","like_count":0},{"had_liked":false,"id":226110,"user_name":"daydaynobug","can_delete":false,"product_type":"c1","uid":1336773,"ip_address":"","ucode":"C6923405EB62BA","user_header":"https://static001.geekbang.org/account/avatar/00/14/65/c5/97003360.jpg","comment_is_top":false,"comment_ctime":1591953212,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1591953212","product_id":100035801,"comment_content":"8ä½æ•°å­—çš„é•¿åº¦ä¸º19æŒ‡çš„æ˜¯å–å€¼èŒƒå›´ä¸º19ä½ï¼Œæ‰€ä»¥è½¬æˆå­—ç¬¦ä¸²å 19å­—èŠ‚å—","like_count":0},{"had_liked":false,"id":225109,"user_name":"å°æ´›","can_delete":false,"product_type":"c1","uid":1005062,"ip_address":"","ucode":"227EC21891012B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/56/06/ea49b29d.jpg","comment_is_top":false,"comment_ctime":1591660553,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1591660553","product_id":100035801,"comment_content":"æœ‰ä¸ªé—®é¢˜è¯·æ•™ä¸‹è€å¸ˆï¼Œå¦‚æœRedisæ•°æ®è¿‡æœŸäº†ï¼Œç„¶åè¿™æ—¶å€™å¾ˆå¤šè¯·æ±‚æ¥äº†ï¼Œå‘ç°redisæ²¡æ•°æ®äº†ï¼Œæ˜¯å»ssdåŠ è½½æ•°æ®å—ï¼Ÿé«˜å¹¶å‘è¯·æ±‚ä¸‹ï¼Œæ€§èƒ½ä¼šæœ‰é—®é¢˜å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1066508,"avatar":"https://static001.geekbang.org/account/avatar/00/10/46/0c/773ba2f3.jpg","nickname":"ä¸‹ä¸ªç›®æ ‡45k","note":"","ucode":"193BA8C3AA9A61","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":331480,"discussion_content":"è¿™ç§æƒ…å†µæŒ‡çš„å°±æ˜¯ç¼“å­˜é›ªå´©ï¼Œæµé‡å…¨éƒ¨åˆ°dbå±‚é«˜å¹¶å‘ä¸‹å¿…ç„¶ä¼šå‡ºç°ç“¶é¢ˆã€‚\nè€ƒè™‘è§£å†³æ–¹æ¡ˆçš„è¯ä¸€èˆ¬éœ€è¦å…³æ³¨ä»¥ä¸‹å‡ ç‚¹ï¼š\n1.è®¾ç½®keyçš„è¿‡æœŸæ—¶é—´å¢åŠ éšæœºæ•°ï¼Œè®©è¿‡æœŸæ—¶é—´åœ¨ä¸€å®šå‘¨æœŸå†…å‡åŒ€åˆ†å¸ƒ\n2.DBå±‚è¯»è¯·æ±‚é™æµï¼Œè®©ä¸€éƒ¨åˆ†è¯·æ±‚å¿«é€Ÿå¤±è´¥\n3.ä¸šåŠ¡å±‚é™æµ\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606881685,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":212459,"user_name":"é«˜å³°","can_delete":false,"product_type":"c1","uid":1046111,"ip_address":"","ucode":"2DFE77FE4970B8","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f6/5f/85e82813.jpg","comment_is_top":false,"comment_ctime":1588127931,"is_pvip":false,"replies":[{"id":"83124","content":"ä¸šåŠ¡åœºæ™¯ä¸åŒå§","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1591803919,"ip_address":"","comment_id":212459,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1588127931","product_id":100035801,"comment_content":"è€å¸ˆï¼Œå¯ä»¥ä¸å¯ä»¥ç”¨ hyperloglog ç”¨æ¥è®¡æ•° æ˜¯ä¸æ˜¯æ¶ˆè€—æ›´å°ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":493510,"discussion_content":"ä¸šåŠ¡åœºæ™¯ä¸åŒå§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591803919,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1099053,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c5/2d/1eebfc3c.jpg","nickname":"GaGiî","note":"","ucode":"CC8D22E1DD8CA2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":284788,"discussion_content":"hyperloglogç»Ÿè®¡uvç”¨ï¼Œæœ‰è¯¯å·®ç‡ï¼Œæ•°æ®è¶Šå¤§ï¼Œæ•°æ®è¯¯å·®å°±è¶Šæ˜æ˜¾","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592638552,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":168697,"user_name":"longslee","can_delete":false,"product_type":"c1","uid":1465986,"ip_address":"","ucode":"C24E32E5B1B6F5","user_header":"https://static001.geekbang.org/account/avatar/00/16/5e/82/438c8534.jpg","comment_is_top":false,"comment_ctime":1578142736,"is_pvip":false,"replies":[{"id":"66190","content":"ç±»ä¼¼å§","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1578731355,"ip_address":"","comment_id":168697,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1578142736","product_id":100035801,"comment_content":"æ‰“å¡ã€‚è€å¸ˆï¼Œä½ åé¢è¯´çš„éœ€è¦ä¸€ä¸ªå¤§æ•°ç»„æ¥å­˜å‚¨ï¼Œæ˜¯ä¸æ˜¯ä¹‹å‰æåˆ°çš„å¸ƒéš†è¿‡æ»¤å™¨é‚£ç§æ–¹å¼ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480302,"discussion_content":"ç±»ä¼¼å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578731355,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":167269,"user_name":"jun.hai","can_delete":false,"product_type":"c1","uid":1702947,"ip_address":"","ucode":"9740C5118DE6DC","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epx1w8VkC30tcu4GlOCkUZB7picI2xesBBZF3rGWVPp9tHZfJdkc5iaqhSg7LOsvtefiajkM1YPno2JA/132","comment_is_top":false,"comment_ctime":1577754546,"is_pvip":false,"replies":[{"id":"65117","content":"è¿™ä¸ªä¸»è¦æ˜¯å‚è€ƒredisçš„å®ç°","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1577935635,"ip_address":"","comment_id":167269,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1577754546","product_id":100035801,"comment_content":"è€å¸ˆï¼Œæ‚¨å¥½ï¼Œå¯¹redisæ·±åº¦æ”¹é€ è¿™å—å„¿æ²¡å¤ªæ‡‚ï¼Œå¦‚ï¼šâ€œKey æ˜¯ 8 å­—èŠ‚ Long ç±»å‹çš„ weibo_idï¼ŒValue æ˜¯ 4 å­—èŠ‚ int ç±»å‹çš„è½¬å‘æ•°ï¼Œå­˜å‚¨åœ¨ Redis ä¸­ä¹‹åä¼šå ç”¨è¶…è¿‡ 70 ä¸ªå­—èŠ‚çš„ç©ºé—´â€è¿™å—å„¿æ˜¯æ€ä¹ˆè®¡ç®—å‡ºæ¥çš„ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479802,"discussion_content":"è¿™ä¸ªä¸»è¦æ˜¯å‚è€ƒredisçš„å®ç°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577935635,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":165474,"user_name":"xiaobao","can_delete":false,"product_type":"c1","uid":1249482,"ip_address":"","ucode":"0D39ADE07C9BC4","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEJV0t7NEwlq7iahuSyncBGYBffJOKTOZnqXnhorp47wGQdXLWj7pIoicIUtEgESIhIOHp5MrEYdyCvg/132","comment_is_top":false,"comment_ctime":1577242221,"is_pvip":false,"replies":[{"id":"63155","content":"å°±æ˜¯è¦æ”¹ä¸€ä¸‹redisçš„å®ç°ï¼ŒåŸç”Ÿçš„kvçš„keyæ˜¯stringï¼Œç°åœ¨æ”¹æˆlong","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1577275870,"ip_address":"","comment_id":165474,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1577242221","product_id":100035801,"comment_content":"è€å¸ˆæ‚¨å¥½ â€œä¸€æ˜¯åŸç”Ÿçš„ Redis åœ¨å­˜å‚¨ Key æ—¶æ˜¯æŒ‰ç…§å­—ç¬¦ä¸²ç±»å‹æ¥å­˜å‚¨çš„ï¼Œæ¯”å¦‚ä¸€ä¸ª 8 å­—èŠ‚çš„ Long ç±»å‹çš„æ•°æ®ï¼Œéœ€è¦ 8ï¼ˆsdshdr æ•°æ®ç»“æ„é•¿åº¦ï¼‰+ 19ï¼ˆ8 å­—èŠ‚æ•°å­—çš„é•¿åº¦ï¼‰+1ï¼ˆâ€™\\0â€™ï¼‰=28 ä¸ªå­—èŠ‚ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨ Long ç±»å‹æ¥å­˜å‚¨å°±åªéœ€è¦ 8 ä¸ªå­—èŠ‚ï¼Œä¼šèŠ‚çœ 20 ä¸ªå­—èŠ‚çš„ç©ºé—´â€ longç±»å‹å­˜å‚¨çš„è¯ä¸ä¹Ÿæ˜¯ k-vç»“æ„å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479176,"discussion_content":"å°±æ˜¯è¦æ”¹ä¸€ä¸‹redisçš„å®ç°ï¼ŒåŸç”Ÿçš„kvçš„keyæ˜¯stringï¼Œç°åœ¨æ”¹æˆlong","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577275870,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":163499,"user_name":"çŸ¥è¡Œåˆä¸€","can_delete":false,"product_type":"c1","uid":1521486,"ip_address":"","ucode":"2B8E634FC4CFB7","user_header":"https://static001.geekbang.org/account/avatar/00/17/37/4e/5c3153b2.jpg","comment_is_top":false,"comment_ctime":1576731859,"is_pvip":false,"replies":[{"id":"62140","content":"ä¸éœ€è¦å®æ—¶æ¯”å¯¹~","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1576735664,"ip_address":"","comment_id":163499,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1576731859","product_id":100035801,"comment_content":"è®¡æ•°ç³»ç»Ÿå¦‚ä½•å’Œä¸šåŠ¡ç³»ç»Ÿä¿æŒä¸€è‡´æ€§ï¼Ÿä¸ä¼šå°‘è®¡æ•°ï¼Œéœ€è¦æ ¸å¯¹æ•°æ®å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478417,"discussion_content":"ä¸éœ€è¦å®æ—¶æ¯”å¯¹~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576735664,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":162995,"user_name":"å•è¡Œé“","can_delete":false,"product_type":"c1","uid":1168105,"ip_address":"","ucode":"4EB42149B476FF","user_header":"https://static001.geekbang.org/account/avatar/00/11/d2/e9/c7a80d9f.jpg","comment_is_top":false,"comment_ctime":1576638594,"is_pvip":false,"replies":[{"id":"62132","content":"è¿™ä¸ªåº”è¯¥æ²¡æœ‰åŠæ³•ç”¨è®¡æ•°å™¨è§£å†³ï¼Œè®¡æ•°å™¨åªèƒ½è®°å½•ä¸€ä¸ªäººè·èµæ•°æ˜¯å¤šå°‘ï¼Ÿ<br>","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1576734993,"ip_address":"","comment_id":162995,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1576638594","product_id":100035801,"comment_content":"è®¡æ•°å™¨åªå­˜idçš„æƒ…å†µä¸‹ï¼Œå¦‚æœæœ‰æŒ‰äººç»´åº¦æŸ¥è¯¢çš„éœ€æ±‚æ€ä¹ˆåŠï¼Œæ¯”å¦‚æŸ¥ä¸€å®šæ—¶é—´è·èµæ•°æœ€å¤šçš„äººï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478205,"discussion_content":"è¿™ä¸ªåº”è¯¥æ²¡æœ‰åŠæ³•ç”¨è®¡æ•°å™¨è§£å†³ï¼Œè®¡æ•°å™¨åªèƒ½è®°å½•ä¸€ä¸ªäººè·èµæ•°æ˜¯å¤šå°‘ï¼Ÿ\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576734993,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":162982,"user_name":"å°é£éª†éª†","can_delete":false,"product_type":"c1","uid":1170748,"ip_address":"","ucode":"891D3599644ABD","user_header":"https://static001.geekbang.org/account/avatar/00/11/dd/3c/a595eb2a.jpg","comment_is_top":false,"comment_ctime":1576637388,"is_pvip":true,"replies":[{"id":"62133","content":"è°¢è°¢~","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1576735115,"ip_address":"","comment_id":162982,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1576637388","product_id":100035801,"comment_content":"è€å¸ˆï¼Œè¯·ä»¥åå¤šå‡ºäº›ä¸“æ ï¼Œæ¯æ¬¡çœ‹ä½ çš„ä¸“æ éƒ½æœ‰ç«èŠ±å‡ºæ¥","like_count":0,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478197,"discussion_content":"è°¢è°¢~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576735115,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1413499,"avatar":"https://static001.geekbang.org/account/avatar/00/15/91/7b/2dd4d0c1.jpg","nickname":"å¤§é¸¡è…¿ğŸ—","note":"","ucode":"38AF8AE00F6166","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":87554,"discussion_content":"æˆ‘æƒ³çŸ¥é“ç«èŠ±åœ¨å“ªé‡Œï¼Œæå‡ºä½ çš„è§è§£æ‰èƒ½æœ‰ç«èŠ±","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1576672953,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}