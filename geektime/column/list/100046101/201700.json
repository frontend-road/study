{"id":201700,"title":"05 | Paxos算法（一）：如何在多个节点间确定某变量的值？","content":"<p>你好，我是韩健。</p><p>提到分布式算法，就不得不提Paxos算法，在过去几十年里，它基本上是分布式共识的代名词，因为当前最常用的一批共识算法都是基于它改进的。比如，Fast Paxos算法、Cheap Paxos算法、Raft算法等等。而很多同学都会在准确和系统理解Paxos算法上踩坑，比如，只知道它可以用来达成共识，但不知道它是如何达成共识的。</p><p>这其实侧面说明了Paxos算法有一定的难度，可分布式算法本身就很复杂，Paxos算法自然也不会例外，当然了，除了这一点，还跟兰伯特有关。</p><p>兰伯特提出的Paxos算法包含2个部分：</p><ul>\n<li>一个是Basic Paxos算法，描述的是多节点之间如何就某个值（提案Value）达成共识；</li>\n<li>另一个是Multi-Paxos思想，描述的是执行多个Basic Paxos实例，就一系列值达成共识。</li>\n</ul><p>可因为兰伯特提到的Multi-Paxos思想，缺少代码实现的必要细节（比如怎么选举领导者），所以在理解上比较难。</p><p>为了让你理解Paxos算法，接下来我会用2节课的时间，分别以Basic Paxos和Multi-Paxos为核心，带你了解Basic Paxos如何达成共识，以及针对Basic Paxos的局限性Multi-Paxos又是如何改进的。今天咱们先来聊聊Basic Paxos。</p><!-- [[[read_end]]] --><p>在我看来，Basic Paxos是Multi-Paxos思想的核心，说白了，Multi-Paxos就是多执行几次Basic Paxos。所以掌握它之后，你能更好地理解后几讲基于Multi-Paxos思想的共识算法（比如Raft算法），还能掌握分布式共识算法的最核心内容，当现在的算法不能满足业务需求，进行权衡折中，设计自己的算法。</p><p><strong>来看一道思考题。</strong></p><p>假设我们要实现一个分布式集群，这个集群是由节点A、B、C组成，提供只读KV存储服务。你应该知道，创建只读变量的时候，必须要对它进行赋值，而且这个值后续没办法修改。因此一个节点创建只读变量后就不能再修改它了，所以所有节点必须要先对只读变量的值达成共识，然后所有节点再一起创建这个只读变量。</p><p>那么，当有多个客户端（比如客户端1、2）访问这个系统，试图创建同一个只读变量（比如X），客户端1试图创建值为3的X，客户端2试图创建值为7的X，这样要如何达成共识，实现各节点上X值的一致呢？带着这个问题，我们进入今天的学习。</p><p><img src=\"https://static001.geekbang.org/resource/image/93/67/93a9fa0a75c23971066dc791389b8567.jpg?wh=1142*424\" alt=\"\" title=\"图1\"></p><p>在一些经典的算法中，你会看到一些既形象又独有的概念（比如二阶段提交协议中的协调者），Basic Paxos算法也不例外。为了帮助人们更好地理解Basic Paxos算法，兰伯特在讲解时，也使用了一些独有而且比较重要的概念，提案、准备（Prepare）请求、接受（Accept）请求、角色等等，其中最重要的就是“角色”。因为角色是对Basic Paxos中最核心的三个功能的抽象，比如，由接受者（Acceptor）对提议的值进行投票，并存储接受的值。</p><h2>你需要了解的三种角色</h2><p>在Basic Paxos中，有提议者（Proposer）、接受者（Acceptor）、学习者（Learner）三种角色，他们之间的关系如下：</p><p><img src=\"https://static001.geekbang.org/resource/image/77/42/77be9903f7cbe980e5a6e77412d2ad42.jpg?wh=1142*620\" alt=\"\" title=\"图2\"></p><p>看着是不是有些复杂，其实并不难理解：</p><ul>\n<li>\n<p><strong>提议者（Proposer）</strong>：提议一个值，用于投票表决。为了方便演示，你可以把图1中的客户端1和2看作是提议者。但在绝大多数场景中，集群中收到客户端请求的节点，才是提议者（图1 这个架构，是为了方便演示算法原理）。这样做的好处是，对业务代码没有入侵性，也就是说，我们不需要在业务代码中实现算法逻辑，就可以像使用数据库一样访问后端的数据。</p>\n</li>\n<li>\n<p><strong>接受者（Acceptor）</strong>：对每个提议的值进行投票，并存储接受的值，比如A、B、C三个节点。 一般来说，集群中的所有节点都在扮演接受者的角色，参与共识协商，并接受和存储数据。</p>\n</li>\n</ul><p>讲到这儿，你可能会有疑惑：前面不是说接收客户端请求的节点是提议者吗？这里怎么又是接受者呢？这是因为一个节点（或进程）可以身兼多个角色。想象一下，一个3节点的集群，1个节点收到了请求，那么该节点将作为提议者发起二阶段提交，然后这个节点和另外2个节点一起作为接受者进行共识协商，就像下图的样子：</p><p><img src=\"https://static001.geekbang.org/resource/image/3f/fe/3fed0fe5682f97f0a9249cf9519d09fe.jpg?wh=1142*590\" alt=\"\" title=\"图3\"></p><ul>\n<li><strong>学习者（Learner）</strong>：被告知投票的结果，接受达成共识的值，存储保存，不参与投票的过程。一般来说，学习者是数据备份节点，比如“Master-Slave”模型中的Slave，被动地接受数据，容灾备份。</li>\n</ul><p>其实，这三种角色，在本质上代表的是三种功能：</p><ul>\n<li>提议者代表的是接入和协调功能，收到客户端请求后，发起二阶段提交，进行共识协商；</li>\n<li>接受者代表投票协商和存储数据，对提议的值进行投票，并接受达成共识的值，存储保存；</li>\n<li>学习者代表存储数据，不参与共识协商，只接受达成共识的值，存储保存。</li>\n</ul><p>因为一个完整的算法过程是由这三种角色对应的功能组成的，所以理解这三种角色，是你理解Basic Paxos如何就提议的值达成共识的基础。那么接下来，咱们看看如何使用Basic Paxos达成共识，解决开篇提到的那道思考题。</p><h2>如何达成共识？</h2><p>想象这样一个场景，现在疫情这么严重，每个村的路都封得差不多了，就你的村委会不作为，迟迟没有什么防疫的措施。你决定给村委会提交个提案，提一些防疫的建议，除了建议之外，为了和其他村民的提案做区分，你的提案还得包含一个提案编号，来起到唯一标识的作用。</p><p>与你的做法类似，在Basic Paxos中，兰伯特也使用提案代表一个提议。不过在提案中，除了提案编号，还包含了提议值。为了方便演示，我使用[n, v]表示一个提案，其中n为提案编号，v 为提议值。</p><p>我想强调一下，整个共识协商是分2个阶段进行的（也就是我在03讲提到的二阶段提交）。那么具体要如何协商呢？</p><p>我们假设客户端1的提案编号为1，客户端2的提案编号为5，并假设节点A、B先收到来自客户端1的准备请求，节点C先收到来自客户端2的准备请求。</p><h3>准备（Prepare）阶段</h3><p>先来看第一个阶段，首先客户端1、2作为提议者，分别向所有接受者发送包含提案编号的准备请求：</p><p><img src=\"https://static001.geekbang.org/resource/image/64/54/640219532d0fcdffc08dbd1b3b3f0454.jpg?wh=1142*456\" alt=\"\" title=\"图4\"></p><p><strong>你要注意，在准备请求中是不需要指定提议的值的，只需要携带提案编号就可以了，这是很多同学容易产生误解的地方。</strong></p><p>接着，当节点A、B收到提案编号为1的准备请求，节点C收到提案编号为5的准备请求后，将进行这样的处理：</p><p><img src=\"https://static001.geekbang.org/resource/image/5b/7a/5b6fcc5af76ad53e62c433e2589b6d7a.jpg?wh=1142*445\" alt=\"\" title=\"图5\"></p><ul>\n<li>由于之前没有通过任何提案，所以节点A、B将返回一个 “尚无提案”的响应。也就是说节点A和B在告诉提议者，我之前没有通过任何提案呢，并承诺以后不再响应提案编号小于等于1的准备请求，不会通过编号小于1的提案。</li>\n<li>节点C也是如此，它将返回一个 “尚无提案”的响应，并承诺以后不再响应提案编号小于等于5的准备请求，不会通过编号小于5的提案。</li>\n</ul><p>另外，当节点A、B收到提案编号为5的准备请求，和节点C收到提案编号为1的准备请求的时候，将进行这样的处理过程：</p><p><img src=\"https://static001.geekbang.org/resource/image/ec/24/ecf9a5872201e875a2e0417c32ec2d24.jpg?wh=1142*439\" alt=\"\" title=\"图6\"></p><ul>\n<li>当节点A、B收到提案编号为5的准备请求的时候，因为提案编号5大于它们之前响应的准备请求的提案编号1，而且两个节点都没有通过任何提案，所以它将返回一个 “尚无提案”的响应，并承诺以后不再响应提案编号小于等于5的准备请求，不会通过编号小于5的提案。</li>\n<li>当节点C收到提案编号为1的准备请求的时候，由于提案编号1小于它之前响应的准备请求的提案编号5，所以丢弃该准备请求，不做响应。</li>\n</ul><h3>接受（Accept）阶段</h3><p>第二个阶段也就是接受阶段，首先客户端1、2在收到大多数节点的准备响应之后，会分别发送接受请求：</p><p><img src=\"https://static001.geekbang.org/resource/image/70/89/70de602cb4b52de7545f05c5485deb89.jpg?wh=1142*434\" alt=\"\" title=\"图7\"></p><ul>\n<li>\n<p>当客户端1收到大多数的接受者（节点A、B）的准备响应后，根据响应中提案编号最大的提案的值，设置接受请求中的值。因为该值在来自节点A、B的准备响应中都为空（也就是图5中的“尚无提案”），所以就把自己的提议值3作为提案的值，发送接受请求[1, 3]。</p>\n</li>\n<li>\n<p>当客户端2收到大多数的接受者的准备响应后（节点A、B和节点C），根据响应中提案编号最大的提案的值，来设置接受请求中的值。因为该值在来自节点A、B、C的准备响应中都为空（也就是图5和图6中的“尚无提案”），所以就把自己的提议值7作为提案的值，发送接受请求[5, 7]。</p>\n</li>\n</ul><p>当三个节点收到2个客户端的接受请求时，会进行这样的处理：</p><p><img src=\"https://static001.geekbang.org/resource/image/f8/45/f836c40636d26826fc04a51a5945d545.jpg?wh=1142*430\" alt=\"\" title=\"图8\"></p><ul>\n<li>当节点A、B、C收到接受请求[1, 3]的时候，由于提案的提案编号1小于三个节点承诺能通过的提案的最小提案编号5，所以提案[1, 3]将被拒绝。</li>\n<li>当节点A、B、C收到接受请求[5, 7]的时候，由于提案的提案编号5不小于三个节点承诺能通过的提案的最小提案编号5，所以就通过提案[5, 7]，也就是接受了值7，三个节点就X值为7达成了共识。</li>\n</ul><p>讲到这儿我想补充一下，如果集群中有学习者，当接受者通过了一个提案时，就通知给所有的学习者。当学习者发现大多数的接受者都通过了某个提案，那么它也通过该提案，接受该提案的值。</p><p>通过上面的演示过程，你可以看到，最终各节点就X的值达成了共识。那么在这里我还想强调一下，Basic Paxos的容错能力，源自“大多数”的约定，你可以这么理解：当少于一半的节点出现故障的时候，共识协商仍然在正常工作。</p><h2>内容小结</h2><p>本节课我主要带你了解了Basic Paxos的原理和一些特点，我希望你明确这样几个重点。</p><ol>\n<li>\n<p>你可以看到，Basic Paxos是通过二阶段提交的方式来达成共识的。二阶段提交是达成共识的常用方式，如果你需要设计新的共识算法的时候，也可以考虑这个方式。</p>\n</li>\n<li>\n<p>除了共识，Basic Paxos还实现了容错，在少于一半的节点出现故障时，集群也能工作。它不像分布式事务算法那样，必须要所有节点都同意后才提交操作，因为“所有节点都同意”这个原则，在出现节点故障的时候会导致整个集群不可用。也就是说，“大多数节点都同意”的原则，赋予了Basic Paxos容错的能力，让它能够容忍少于一半的节点的故障。</p>\n</li>\n<li>\n<p>本质上而言，提案编号的大小代表着优先级，你可以这么理解，根据提案编号的大小，接受者保证<strong>三个承诺</strong>，具体来说：如果准备请求的提案编号，<strong>小于等于</strong>接受者已经响应的准备请求的提案编号，那么接受者将承诺不响应这个准备请求；如果接受请求中的提案的提案编号，<strong>小于</strong>接受者已经响应的准备请求的提案编号，那么接受者将承诺不通过这个提案；如果接受者之前有通过提案，那么接受者将承诺，会在准备请求的响应中，包含<strong>已经通过的最大编号的提案信息</strong>。</p>\n</li>\n</ol><h2>课堂思考</h2><p>在示例中，如果节点A、B已经通过了提案[5, 7]，节点C未通过任何提案，那么当客户端3提案编号为9时，通过Basic Paxos执行“SET X = 6”，最终三个节点上X值是多少呢？为什么呢？欢迎在留言区分享你的看法，与我一同讨论。</p><p>最后，感谢你的阅读，如果这篇文章让你有所收获，也欢迎你将它分享给更多的朋友。</p>","comments":[{"had_liked":false,"id":180356,"user_name":"小晏子","can_delete":false,"product_type":"c1","uid":1132337,"ip_address":"","ucode":"3AAA6FB5ACB6AE","user_header":"https://static001.geekbang.org/account/avatar/00/11/47/31/f35367c8.jpg","comment_is_top":false,"comment_ctime":1582266897,"is_pvip":false,"replies":[{"id":"70130","content":"加一颗星:)","user_name":"作者回复","comment_id":180356,"uid":"1642497","ip_address":"","utype":1,"ctime":1582387128,"user_name_real":"hanj4096"}],"discussion_count":32,"race_medal":1,"score":"461143767569","product_id":100046101,"comment_content":"如果节点 A、B 已经通过了提案[5, 7]，节点 C 未通过任何提案，那么当客户端 3 提案编号为 9 ，通过 Basic Paxos 执行“SET X = 6”, 最终节点值应该是[9,7], 过程如下：<br>1. 在准备阶段，节点C收到客户端3的准备请求[9,6], 因为节点C未收到任何提案，所以返回“尚无提案”的相应。这时如果节点C收到了之前客户端的准备请求[5, 7], 根据提案编号5小于它之前响应的准备请求的提案编号9，会丢弃该准备请求。<br>2. 客户端3发送准备请求[9,6]给节点A，B，这时因为节点A，B已经通过了提案[5,7], 根据“如果接受者之前有通过提案，那么接受者将承诺，会在准备请求的响应中，包含已经通过的最大编号的提案信息”，节点A，B会返回[5,7]给客户端3.<br>3. 客户端3发送会接受请求[9,7]给节点A，B，C（注意这里使用的是准备阶段的最大提议编号和已经被通过的值），因为此时请求编号9不小于之前的请求编号，所以所有节点接受该请求[9,7].<br>4, 所有学习者会接受该提案，学习该值。<br> ","like_count":107,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484623,"discussion_content":"加一颗星:)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582387128,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1246157,"avatar":"https://static001.geekbang.org/account/avatar/00/13/03/cd/264f6a1c.jpg","nickname":"渔夫","note":"","ucode":"43C267E01220F7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":349445,"discussion_content":"第3步感觉太突兀了，客户端3怎么一下子变成了［9,7］呢,6是怎么没的呢？","likes_number":8,"is_delete":false,"is_hidden":false,"ctime":1613212537,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2648313,"avatar":"","nickname":"Geek_41d3aa","note":"","ucode":"CADD0177DDA324","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1246157,"avatar":"https://static001.geekbang.org/account/avatar/00/13/03/cd/264f6a1c.jpg","nickname":"渔夫","note":"","ucode":"43C267E01220F7","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":389931,"discussion_content":"阶段A，B返回准备请求的响应中包含最大编号的提案信息[5,7]","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629518878,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":349445,"ip_address":""},"score":389931,"extra":""}]},{"author":{"id":1173129,"avatar":"https://static001.geekbang.org/account/avatar/00/11/e6/89/d8aec012.jpg","nickname":"Liang","note":"","ucode":"E1A816EE5CE7DC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":293543,"discussion_content":"楼主说的是其中一种情况，补充另一种更复杂的情况：C已经先收到了一阶段的编号为5的prepare请求，这时客户端3才发出9的prepare\n1）C收到该9 的prepare时，回响应，并且承诺不在接受小于等于9的提案，并且不会通过小于等于9的value\n2）接下来，C收到客户端2的二阶段[5,7],由于5 < 9,所以C将不会通过这个提案\n3）接下来，A，B又收到了客户端3发来的9，但是A，B已经接受了[5,7],所以会返回当前的提案信息和最大编号，客户端3只好将自己的提案变更为[9,7](因为他不可能收到大多数的prepare的响应提出自己的提案)，再次下发\n4）此时，C节点收到客户端3发来的[9,7],接受成功","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1595573634,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1336951,"avatar":"https://static001.geekbang.org/account/avatar/00/14/66/77/194ba21d.jpg","nickname":"lzh","note":"","ucode":"C3D83DF4230109","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1173129,"avatar":"https://static001.geekbang.org/account/avatar/00/11/e6/89/d8aec012.jpg","nickname":"Liang","note":"","ucode":"E1A816EE5CE7DC","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":333448,"discussion_content":"第2点，AB不是都通过了[5,7]吗，怎么会又来一次客户端2的[5,7]","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607522014,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":293543,"ip_address":""},"score":333448,"extra":""}]},{"author":{"id":1216930,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIQMh5jMlvAibnTgiaVXmsb333JBjpdvLVcptc232zQey5wkBOEPiauepQpv8UlRcOFqnTyhEQiadaHMA/132","nickname":"winfield","note":"","ucode":"6A5E1B449328C9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":222409,"discussion_content":"有个问题，那岂不是 x 的值，以后都无法被更改了吗？","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1586142428,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1499380,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/6vz8MgZia6Xwdhayv9Jdnee7HfDYSAMTUtMAAVORMhiaN8bIM0QJibrQ5EDqB8o5pWE6FRuaqguwG86o5Gh90ruDw/132","nickname":"不会爬树的熊","note":"","ucode":"E417D8D9D5FED2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1216930,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIQMh5jMlvAibnTgiaVXmsb333JBjpdvLVcptc232zQey5wkBOEPiauepQpv8UlRcOFqnTyhEQiadaHMA/132","nickname":"winfield","note":"","ucode":"6A5E1B449328C9","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":283379,"discussion_content":"是啊，对一个key如果达成共识，后面该key的值也不会变了","likes_number":7,"is_delete":false,"is_hidden":false,"ctime":1592264380,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":222409,"ip_address":""},"score":283379,"extra":""},{"author":{"id":2848612,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIShQFfZkuPib0K09UHAGnsGMiaAWhYX9pxogWIH68swS4foNkgwHTKZcNablWI50S4fn856LnI88OQ/132","nickname":"Geek_wyq","note":"","ucode":"E20CC23E665879","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1216930,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIQMh5jMlvAibnTgiaVXmsb333JBjpdvLVcptc232zQey5wkBOEPiauepQpv8UlRcOFqnTyhEQiadaHMA/132","nickname":"winfield","note":"","ucode":"6A5E1B449328C9","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":535281,"discussion_content":"要创建的就是只读变量","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1638400780,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":222409,"ip_address":""},"score":535281,"extra":""}]},{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375805,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1621855051,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1744596,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/9e/d4/95f6fb65.jpg","nickname":"仲夏夜空星星多","note":"","ucode":"DB512D7722E551","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":299154,"discussion_content":"这客户端的行为，属实文中也没提，而且这客户端的定义是什么，是用户请求还是，什么东西。作者能不能回答一下","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1597578635,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1247568,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/J1ADsCjfat7ibMcup6DV9DhH3lzKo2lIeBqCjuBa5nIWYu7u8NYDFb3iaPRp9cia9uH4464GDaGKcd7c0d0dkhibbA/132","nickname":"dakingkong","note":"","ucode":"6B492887E7E4A2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1744596,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/9e/d4/95f6fb65.jpg","nickname":"仲夏夜空星星多","note":"","ucode":"DB512D7722E551","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":300133,"discussion_content":"作者说了，这里的客户端指的是提议者，在绝大多数场景中，集群中收到用户请求的节点，就是提议者，也就是本文的客户端","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1597941261,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":299154,"ip_address":""},"score":300133,"extra":""}]},{"author":{"id":1744596,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/9e/d4/95f6fb65.jpg","nickname":"仲夏夜空星星多","note":"","ucode":"DB512D7722E551","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":299151,"discussion_content":"这客户端的行为，作者也没提啊。咋回事，只讲了接收者会返回之前的共识信息，客户端行为会怎样，作者也没讲啊。客户端也属于这个分布式系统一部分吗","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1597578445,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1868022,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKWoZTcppN58aH8fM3MKjh2BWJngicJwfZQzz72yzewnfFHIAyxibFBcKBLQt4YD51iagdGUEV8equkA/132","nickname":"Geek_3d63af","note":"","ucode":"7B1D96D71B3A22","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":286627,"discussion_content":"说的很清晰","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1593249348,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1508821,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLW0QsFv0sORDAvO96RDFCUuHvjEJ6icUILlh2W93Y9wCGnBGgznHe2a9icvIl0lwJhiadzvYedRJJRw/132","nickname":"newtypelv_9","note":"","ucode":"512252E3A7718A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":551576,"discussion_content":"同样感觉有问题，那岂不是 以后 这个值始终无法修改了呢","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1645064244,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1017140,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/85/34/7a4b5fc9.jpg","nickname":"大妖的千年一念","note":"","ucode":"2BD5F96EF6AA45","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":199526,"discussion_content":"我觉得，这里，是不是有点儿问题……\n如果A、B两个节点已经通过了提案[5,7]的话，表示提议者已经完成了本次内容的提交？虽然这并不影响最终[9,7]的结果","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1583592815,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1476387,"avatar":"https://static001.geekbang.org/account/avatar/00/16/87/23/f6835d17.jpg","nickname":"语法糖不甜","note":"","ucode":"8346BCFF20CA45","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":181483,"discussion_content":"这里使用的是准备阶段的最大提议编号和已经被通过的值 ，这里没看懂诶，为什么返回了【5,7】给客户端3， 客户端3就用【9，7】去发送接收请求呀","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1582372607,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1132337,"avatar":"https://static001.geekbang.org/account/avatar/00/11/47/31/f35367c8.jpg","nickname":"小晏子","note":"","ucode":"3AAA6FB5ACB6AE","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":1476387,"avatar":"https://static001.geekbang.org/account/avatar/00/16/87/23/f6835d17.jpg","nickname":"语法糖不甜","note":"","ucode":"8346BCFF20CA45","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":182189,"discussion_content":"分两个提议编号的确定和被通过值的确定，提议编号因为需要按最大的来，那么只能选大的，所以是9，被确定的值从7和6里选，7已经被两个接受了，6只有一个，所以应该选7，我是这么理解的","likes_number":10,"is_delete":false,"is_hidden":false,"ctime":1582387513,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":181483,"ip_address":""},"score":182189,"extra":""},{"author":{"id":1858852,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/5d/24/213f09c6.jpg","nickname":"Ma vie","note":"","ucode":"924A7C07050DED","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1476387,"avatar":"https://static001.geekbang.org/account/avatar/00/16/87/23/f6835d17.jpg","nickname":"语法糖不甜","note":"","ucode":"8346BCFF20CA45","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":560903,"discussion_content":"acceptor返回自己通过的议案的值，这个值是7；proposer在选择议案的值的时候，如果acceptor返回的是&#34;尚无议案&#34;，就可以使用自己提议的值，也就是6；但是acceptor返回了之前通过的议案的值7，就只能使用这个7了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649488814,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":181483,"ip_address":""},"score":560903,"extra":""},{"author":{"id":1077598,"avatar":"https://static001.geekbang.org/account/avatar/00/10/71/5e/5393a76d.jpg","nickname":"Peter Yu","note":"","ucode":"D56786A6E85321","race_medal":4,"user_type":1,"is_pvip":true},"reply_author":{"id":1858852,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/5d/24/213f09c6.jpg","nickname":"Ma vie","note":"","ucode":"924A7C07050DED","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":575943,"discussion_content":"这部分文中没有提到，所以没有了解过paxos的人估计不知道🤷‍♂️","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655200615,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":560903,"ip_address":""},"score":575943,"extra":""}]},{"author":{"id":2346917,"avatar":"https://static001.geekbang.org/account/avatar/00/23/cf/a5/5224b297.jpg","nickname":"cafe babe","note":"","ucode":"6205DF67AD86F8","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582845,"discussion_content":"准备请求怎么还带着值啊","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659699414,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"重庆"},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1102062,"avatar":"https://static001.geekbang.org/account/avatar/00/10/d0/ee/f5c5e191.jpg","nickname":"LYy","note":"","ucode":"8D5C39B9531E71","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":561135,"discussion_content":"这里的关键是X值不能被修改了，所以Client 3只能接受大多数人的选择，用(9，7)给响应自己准备请求的接收者。\n如果X能修改的话，那相当于这是新的一轮协商，最终大家都会改成(9，6)。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649559315,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1117410,"avatar":"https://static001.geekbang.org/account/avatar/00/11/0c/e2/8a5e14b1.jpg","nickname":"ujshenry","note":"","ucode":"52840F95862014","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":364259,"discussion_content":"想不到","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617425401,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1017140,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/85/34/7a4b5fc9.jpg","nickname":"大妖的千年一念","note":"","ucode":"2BD5F96EF6AA45","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":199529,"discussion_content":"我的意思是说，C节点并不会收到[5,7]这样的请求了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583592849,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1132337,"avatar":"https://static001.geekbang.org/account/avatar/00/11/47/31/f35367c8.jpg","nickname":"小晏子","note":"","ucode":"3AAA6FB5ACB6AE","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":1017140,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/85/34/7a4b5fc9.jpg","nickname":"大妖的千年一念","note":"","ucode":"2BD5F96EF6AA45","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":199790,"discussion_content":"会收到请求的，你可以查看相关论文","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583627688,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":199529,"ip_address":""},"score":199790,"extra":""}]},{"author":{"id":1507527,"avatar":"https://static001.geekbang.org/account/avatar/00/17/00/c7/da08a1f4.jpg","nickname":"俊","note":"","ucode":"57B6C6A1A5F6B6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":199058,"discussion_content":"突然想明白了，二阶段协议prepare是要求所有节点都返回后，才进行第二阶段提交","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583551832,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1743447,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIHnnNRhRvtictcpvDrFn7XC1NRFQTz2j6mnntR03eRyibqFVS8DrNCy7EDuaAM6wLn8hAUs7Hcvibbg/132","nickname":"hao","note":"","ucode":"1491E144AEC93F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1507527,"avatar":"https://static001.geekbang.org/account/avatar/00/17/00/c7/da08a1f4.jpg","nickname":"俊","note":"","ucode":"57B6C6A1A5F6B6","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":208470,"discussion_content":"只要收到过半恢复就可以继续了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584545292,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":199058,"ip_address":""},"score":208470,"extra":""}]},{"author":{"id":1507527,"avatar":"https://static001.geekbang.org/account/avatar/00/17/00/c7/da08a1f4.jpg","nickname":"俊","note":"","ucode":"57B6C6A1A5F6B6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":199050,"discussion_content":"你好，有没有可能客户端3先发给c节点，c节点先接受[9,6]，然后客户端3再发给AB节点，AB返回[5,7]，此时该如何处理？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583550981,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":4,"child_discussions":[{"author":{"id":1046893,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f9/6d/b623562a.jpg","nickname":"霹雳大仙pp","note":"","ucode":"F654FD9AEC1D56","race_medal":3,"user_type":1,"is_pvip":false},"reply_author":{"id":1507527,"avatar":"https://static001.geekbang.org/account/avatar/00/17/00/c7/da08a1f4.jpg","nickname":"俊","note":"","ucode":"57B6C6A1A5F6B6","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":201012,"discussion_content":"AB返回[5,7]给客户端3，客户端3一看，已经过半提交，则将自己的提按改成[9,7]，然后将[9,7]发给AB，AB接受提按，客户端3达成了一致","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583751921,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":199050,"ip_address":""},"score":201012,"extra":""},{"author":{"id":1743447,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIHnnNRhRvtictcpvDrFn7XC1NRFQTz2j6mnntR03eRyibqFVS8DrNCy7EDuaAM6wLn8hAUs7Hcvibbg/132","nickname":"hao","note":"","ucode":"1491E144AEC93F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1046893,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f9/6d/b623562a.jpg","nickname":"霹雳大仙pp","note":"","ucode":"F654FD9AEC1D56","race_medal":3,"user_type":1,"is_pvip":false},"discussion":{"id":208462,"discussion_content":"不用已经提交过半也会改","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584545155,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":201012,"ip_address":""},"score":208462,"extra":""},{"author":{"id":1744596,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/9e/d4/95f6fb65.jpg","nickname":"仲夏夜空星星多","note":"","ucode":"DB512D7722E551","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1046893,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f9/6d/b623562a.jpg","nickname":"霹雳大仙pp","note":"","ucode":"F654FD9AEC1D56","race_medal":3,"user_type":1,"is_pvip":false},"discussion":{"id":299152,"discussion_content":"客户端为什么会这样改啊","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597578563,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":201012,"ip_address":""},"score":299152,"extra":""}]},{"author":{"id":1476387,"avatar":"https://static001.geekbang.org/account/avatar/00/16/87/23/f6835d17.jpg","nickname":"语法糖不甜","note":"","ucode":"8346BCFF20CA45","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":182778,"discussion_content":"明白啦～谢谢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582456272,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":181072,"user_name":"EidLeung","can_delete":false,"product_type":"c1","uid":1120259,"ip_address":"","ucode":"0F16DDB4779D1F","user_header":"https://static001.geekbang.org/account/avatar/00/11/18/03/ef0efcc4.jpg","comment_is_top":false,"comment_ctime":1582470653,"is_pvip":false,"replies":[{"id":"70323","content":"加一颗星:)","user_name":"作者回复","comment_id":181072,"uid":"1642497","ip_address":"","utype":1,"ctime":1582555631,"user_name_real":"hanj4096"}],"discussion_count":5,"race_medal":0,"score":"229215737341","product_id":100046101,"comment_content":"“作者回复: 大多数节点就某个值，达成共识后，值就不再变了，哪怕有新的提案，这个值，也能保证不再变了。”这个最后的值肯定是7，至于编号嘛，取最大的🤪。","like_count":53,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484907,"discussion_content":"加一颗星:)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582555631,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1475385,"avatar":"https://static001.geekbang.org/account/avatar/00/16/83/39/f9623363.jpg","nickname":"竹马彦四郎的好朋友影法師","note":"","ucode":"A9555AEFF90CDF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":251264,"discussion_content":"这个解答最简洁也最接近本质","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1588077715,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1475876,"avatar":"https://static001.geekbang.org/account/avatar/00/16/85/24/98d00055.jpg","nickname":"持#樞","note":"","ucode":"2974D70A62A406","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":390114,"discussion_content":"为啥是这样的,,卧槽","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629678704,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375806,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855056,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2036705,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/13/e1/6939ae4f.jpg","nickname":"knight劉先生","note":"","ucode":"CEE9BFC8D3D969","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":366987,"discussion_content":"一句话说明白了！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618232014,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":223734,"user_name":"LiuHu","can_delete":false,"product_type":"c1","uid":1039768,"ip_address":"","ucode":"284E2025C554BB","user_header":"https://static001.geekbang.org/account/avatar/00/0f/dd/98/883c42b4.jpg","comment_is_top":false,"comment_ctime":1591168634,"is_pvip":false,"discussion_count":5,"race_medal":0,"score":"186274762362","product_id":100046101,"comment_content":"推荐一个  youtube 上的视频讲解 https:&#47;&#47;www.youtube.com&#47;watch?v=UUQ8xYWR4do 。<br>推荐理由是，视频中通过类似于时序图的方式讲解了如下3个场景：如何处理首个提案、如何解决冲突提案并达成共识、达成共识后如何处理新提案。<br>并且在讲解这3个场景时，也详细描述了 Proposer、Acceptor、Learner 在集群中会产生哪些消息，如何处理这些消息。总之看了之后，对 Basic Paxos 算法的理解更加通透了。","like_count":43,"discussions":[{"author":{"id":1023768,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/9f/18/07d88ed7.jpg","nickname":"碰上这样的朋友","note":"","ucode":"E93CCAC151382A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":536934,"discussion_content":"讲的不错。有原始论文关于如何达成共识的话，会更好理解一些。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638894723,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1014200,"avatar":"","nickname":"lacfo","note":"","ucode":"F724032ABD431D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":380851,"discussion_content":"感谢！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1624747406,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375807,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855060,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1886331,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/c8/7b/153181d7.jpg","nickname":"夜辉","note":"","ucode":"9421385F51FF9E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":364202,"discussion_content":"速度太快，我听力跟不上，不太确信我看懂没","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617382766,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1228560,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/10/b7974690.jpg","nickname":"BD","note":"","ucode":"A95CF8C3EDC228","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":342247,"discussion_content":"厉害厉害 英文可以","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610623896,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":180508,"user_name":"Jialin","can_delete":false,"product_type":"c1","uid":1112955,"ip_address":"","ucode":"12583269732A75","user_header":"https://static001.geekbang.org/account/avatar/00/10/fb/7b/2d4b38fb.jpg","comment_is_top":false,"comment_ctime":1582299615,"is_pvip":false,"replies":[{"id":"70117","content":"加一颗星:)","user_name":"作者回复","comment_id":180508,"uid":"1642497","ip_address":"","utype":1,"ctime":1582385372,"user_name_real":"hanj4096"}],"discussion_count":5,"race_medal":0,"score":"121841383903","product_id":100046101,"comment_content":"如果节点 A、B 已经通过了提案[5, 7]，节点 C 未通过任何提案，那么当客户端 3 提案编号为 9 时，通过 Basic Paxos 执行“SET X = 6”时<br>准备阶段：当节点 A、B 收到提案编号为 9 的准备请求的时候，因为提案编号 9 大于它们之前响应的准备请求的提案编号 5，但这两个节点之前通过了提案[5, 7]，接受者A、B会在准备请求的响应中，包含已经通过的最大编号的提案信息[5, 7]，并承诺以后不再响应提案编号小于等于 9 的准备请求，不会通过编号小于 9 的提案；由于之前没有通过任何提案，所以节点 C 将返回一个 “尚无提案”的响应。并承诺以后不再响应提案编号小于等于 9 的准备请求，不会通过编号小于 9 的提案。<br>接受阶段：当客户端 3 收到大多数的接受者的准备响应后（节点 A、B 和节点 C），根据响应中提案编号最大的提案的值，来设置接受请求中的值。因为来自节点 A、B 的准备响应中为[5, 7]和C的准确响应为空，所以就把节点 A、B的响应值 7 作为提案的值，发送接受请求[9, 7]。当节点 A、B、C 收到接受请求[9, 7]的时候，由于提案的提案编号 9 不小于三个节点承诺能通过的提案的最小提案编号 9，所以就通过提案[9, 7]，也就是接受了值 7，三个节点就 X 值为 7 达成了共识","like_count":28,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484687,"discussion_content":"加一颗星:)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582385372,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375808,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855066,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1499380,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/6vz8MgZia6Xwdhayv9Jdnee7HfDYSAMTUtMAAVORMhiaN8bIM0QJibrQ5EDqB8o5pWE6FRuaqguwG86o5Gh90ruDw/132","nickname":"不会爬树的熊","note":"","ucode":"E417D8D9D5FED2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":276521,"discussion_content":"👍🏻👍🏻👍🏻👍🏻用于看懂了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590894240,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1296635,"avatar":"https://static001.geekbang.org/account/avatar/00/13/c8/fb/1e282c37.jpg","nickname":"Jungggle","note":"","ucode":"CEF098BDED51BB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":228933,"discussion_content":"“因为来自节点 A、B 的准备响应中为[5, 7]和C的准确响应为空，所以就把节点 A、B的响应值 7 作为提案的值”，这句话中的所以是怎么理解呢？是因为[5,7]大于了一半吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586591903,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1024954,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a3/ba/7fd521b1.jpg","nickname":"Minecraft","note":"","ucode":"0F4D6683F03A12","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1296635,"avatar":"https://static001.geekbang.org/account/avatar/00/13/c8/fb/1e282c37.jpg","nickname":"Jungggle","note":"","ucode":"CEF098BDED51BB","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":295776,"discussion_content":"被确定的值从7和6里选，7已经被两个接受了，6只有一个，所以应该选7","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1596339824,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":228933,"ip_address":""},"score":295776,"extra":""}]}]},{"had_liked":false,"id":213169,"user_name":"竹马彦四郎的好朋友影法師","can_delete":false,"product_type":"c1","uid":1475385,"ip_address":"","ucode":"A9555AEFF90CDF","user_header":"https://static001.geekbang.org/account/avatar/00/16/83/39/f9623363.jpg","comment_is_top":false,"comment_ctime":1588320715,"is_pvip":false,"replies":[{"id":"79461","content":"加一颗星:)","user_name":"作者回复","comment_id":213169,"uid":"1642497","ip_address":"","utype":1,"ctime":1588782681,"user_name_real":"hanj4096"}],"discussion_count":3,"race_medal":0,"score":"100372568523","product_id":100046101,"comment_content":"这里总结一下韩老师讲解的为什么需要Basic paxos算法，或者说Basic Paxos 算法到底解决了个什么问题<br><br>Basic Paxos 算法解决的问题是一个分布式系统如何就某个值X（决议）达成一致。一个典型的场景是，在一个分布式数据库存储中，如果各节点的初始状态一致，每个节点执行相同的操作序列（例如上面是每个节点都要执行SET(X, 3)操作和SET(X, 7)操作，其中SET(X, 3)指令是客户端1向每个节点发出，SET(X, 7)指令是客户端2向每个节点发出），那么他们最后肯定能达到一个一致的状态。例如A、B、C三个节点执行的指令按照顺序都是 SET(X,3)--&gt;SET(X, 7)的话，则A、B、C三个节点最终X的值都是7.<br><br>但是网络的不可靠性导致实际上最后每个节点执行的指令顺序并不一样，如果A节点、B节点执行顺序是SET(X,3)--&gt;SET(X,7)，则A、B节点上最后的值就是X=7，而C节点上可能因为网络原因执行的顺序是 SET(X,7)--&gt;SET(X,3), 结果最后C节点上的X值就是3了. 这种情况可能导致客户端发送相同执行指令，但是最终节点上的值不完全相同. 我们当然不希望看到这种情况的发生.  于是 Basic paxos算法横空出世.<br>basic paxos算法需要在每一条指令上执行一个“一致性算法”以保证每个节点看到的指令一致。","like_count":23,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":493699,"discussion_content":"加一颗星:)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588782681,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375812,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855086,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1744596,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/9e/d4/95f6fb65.jpg","nickname":"仲夏夜空星星多","note":"","ucode":"DB512D7722E551","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":299155,"discussion_content":"不是很理解，每个节点看到的指令都是一样的这个意思，问一个问题，如果是读写分离，写都在一个节点上是不是没有这个问题？  然后指令传输的顺序，照理来说不是一个有序二进制流传过去的吗，为什么会有顺序不一样问题？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597579854,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":182771,"user_name":"vi","can_delete":false,"product_type":"c1","uid":1504664,"ip_address":"","ucode":"943CADFE6C1A6A","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLIBabuBHlohpGYRDt4mwWghVDztHyRnC9SfyYnENUZNbCe8m05qQn0cHdiazU4eKmMtSQ0bHicwLLQ/132","comment_is_top":false,"comment_ctime":1582863211,"is_pvip":false,"replies":[{"id":"70760","content":"最终的值，可能是6，也可能是7，取决于节点A的准备响应，是否是“大多数”中的一个。","user_name":"作者回复","comment_id":182771,"uid":"1642497","ip_address":"","utype":1,"ctime":1582924131,"user_name_real":"hanj4096"}],"discussion_count":12,"race_medal":0,"score":"61712405355","product_id":100046101,"comment_content":"看了评论的推导，理解了结果是[9,7]，还有另外一个问题，对于接收阶段的值是如何确定的呢？<br>如果问题改为，只有一个节点A通过提案[5, 7]，另外两个节点 B,C 未通过任何提案，这个时候客户端发起[9,6]的请求时，三个结点的最终值还会是[9,7]么？","like_count":14,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":485444,"discussion_content":"最终的值，可能是6，也可能是7，取决于节点A的准备响应，是否是“大多数”中的一个。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582924131,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375809,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855072,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1912942,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/TpXzl8Tkc43nScElZibBJDqQ9mUtrrwBhe53w3RRQ3aD4OKMKS8o93BqdLal9DaTz3XTXibIk7kYhAaLFVibqPnWQ/132","nickname":"Geek_9e7b2d","note":"","ucode":"F34668B03F701F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":370344,"discussion_content":"首先要明确一点，ABC三个节点还未达成共识，所以节点A的值仍然是有可能被改变的。\n在准备阶段，客户端向节点A发起提议，节点A返回【5，7】，此时客户端并未修改提案值，接着向BC节点发起提议，如果在客户端发起提议之前BC或者其中某一个节点已经有通过【5，7】提案了，那么客户端是可以知道【5，7】已经满足大多数提案了，于是将自己的提案值修改成【9，7】；如果发起提议之前BC都未通过任何提案，那么基本上就是【9，6】的天下了，只有在BC都通过提案编号为9的情况下，那么最终的共识就是【9，6】了。以上纯属个人理解，我好奇当向节点A发起接受请求时，它的值会变吗，看其他人提的问题加上老师的解答，说是不会，需要BC将最新值同步给节点A，我没能理解到。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619366107,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":4,"child_discussions":[{"author":{"id":1281834,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/yjPribEvEjfucxIXMz37icztGulgcuBAEQllOWKypiamntLLxkRIb20L7CQ2MVJxSt2KpyXW4dLpgL9YjbkDe9pAQ/132","nickname":"sanyu.h","note":"","ucode":"E4851BF6E2FB17","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1912942,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/TpXzl8Tkc43nScElZibBJDqQ9mUtrrwBhe53w3RRQ3aD4OKMKS8o93BqdLal9DaTz3XTXibIk7kYhAaLFVibqPnWQ/132","nickname":"Geek_9e7b2d","note":"","ucode":"F34668B03F701F","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":407567,"discussion_content":"A的值无所谓变不变呀 它接受了【5，7】，代表A同意7这个值，但是最终提议者广播通知大家的是不是7跟你A同意了什么值没有关系。假设另外的提议者因为某些原因没能收到A的信息 仅根据B C两个大多数决定取新的值6 于是会向所有成员广播这个6的结果。此时假设到A的通信恢复了 A收到最终结果是6 那才叫达成了一致 跟你A之前同意了7没有关系，A最终只知道 达成的一致值是6 至于我A之前投票的值是7还是什么 都没有关系了","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1635062662,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":370344,"ip_address":""},"score":407567,"extra":""},{"author":{"id":1281834,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/yjPribEvEjfucxIXMz37icztGulgcuBAEQllOWKypiamntLLxkRIb20L7CQ2MVJxSt2KpyXW4dLpgL9YjbkDe9pAQ/132","nickname":"sanyu.h","note":"","ucode":"E4851BF6E2FB17","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1912942,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/TpXzl8Tkc43nScElZibBJDqQ9mUtrrwBhe53w3RRQ3aD4OKMKS8o93BqdLal9DaTz3XTXibIk7kYhAaLFVibqPnWQ/132","nickname":"Geek_9e7b2d","note":"","ucode":"F34668B03F701F","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":407568,"discussion_content":"所以这里其实讲师完全就是漏掉了最后这个广播的阶段 其实这个提议者广播最终选定结果是非常重要的一步","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1635062732,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":370344,"ip_address":""},"score":407568,"extra":""},{"author":{"id":1457932,"avatar":"https://static001.geekbang.org/account/avatar/00/16/3f/0c/a045c54f.jpg","nickname":"Jeddy","note":"","ucode":"807EA2E369B8A7","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1281834,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/yjPribEvEjfucxIXMz37icztGulgcuBAEQllOWKypiamntLLxkRIb20L7CQ2MVJxSt2KpyXW4dLpgL9YjbkDe9pAQ/132","nickname":"sanyu.h","note":"","ucode":"E4851BF6E2FB17","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":537092,"discussion_content":"我肿么感觉不对呢，节点A通过提案[5, 7]，客户端在发起[9,6]准备阶段时，A会只更新提案编号，但不会改变提案内容，并返回客户端[9,7]。客户端收到响应后会更新内容为[9,7]，再去提案，所以最终结果就是[9,7]。也就是，第一个接受提案的就会作为所有节点最终接受提案内容。讲师这块并没有讲明白，节点之间也没有广播机制","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638955122,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":407568,"ip_address":""},"score":537092,"extra":""}]},{"author":{"id":1158795,"avatar":"https://static001.geekbang.org/account/avatar/00/11/ae/8b/43ce01ca.jpg","nickname":"ezekiel","note":"","ucode":"AB4AB6FA8612D8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":307074,"discussion_content":"当A通过了【5，7】，如果客户端3发往A的请求迟迟没有收到回应，但收到了B和C的回应，满足大多数，提交请求。那样的话集群A【5，7】，B和C【9，6】，节点A的值会修改吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600488851,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1336951,"avatar":"https://static001.geekbang.org/account/avatar/00/14/66/77/194ba21d.jpg","nickname":"lzh","note":"","ucode":"C3D83DF4230109","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1158795,"avatar":"https://static001.geekbang.org/account/avatar/00/11/ae/8b/43ce01ca.jpg","nickname":"ezekiel","note":"","ucode":"AB4AB6FA8612D8","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":333465,"discussion_content":"会改变，因为A此时还不是大多数节点。过程应该是阶段一A从【5,7】变【9,7】，阶段二接收【9,6】。参考作者回复，最终值可能为6，那说明A此时可变。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607524293,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":307074,"ip_address":""},"score":333465,"extra":""},{"author":{"id":1228560,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/10/b7974690.jpg","nickname":"BD","note":"","ucode":"A95CF8C3EDC228","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1158795,"avatar":"https://static001.geekbang.org/account/avatar/00/11/ae/8b/43ce01ca.jpg","nickname":"ezekiel","note":"","ucode":"AB4AB6FA8612D8","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":342482,"discussion_content":"看下面的评论作者的回复是会的，A节点收到[9,6]的接受阶段请求后因为编号9大于自己的5所以会通过[9,6]","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610694103,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":307074,"ip_address":""},"score":342482,"extra":""}]},{"author":{"id":1499380,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/6vz8MgZia6Xwdhayv9Jdnee7HfDYSAMTUtMAAVORMhiaN8bIM0QJibrQ5EDqB8o5pWE6FRuaqguwG86o5Gh90ruDw/132","nickname":"不会爬树的熊","note":"","ucode":"E417D8D9D5FED2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":294444,"discussion_content":"好问题","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595895557,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2008349,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/a5/1d/49dfb810.jpg","nickname":"byrne","note":"","ucode":"5445A1791BEA98","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":269246,"discussion_content":"不大明白，能不能进一步解释下？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589885386,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":183213,"user_name":"NICK","can_delete":false,"product_type":"c1","uid":1069035,"ip_address":"","ucode":"0B7A9C3DF8DED8","user_header":"https://static001.geekbang.org/account/avatar/00/10/4f/eb/3165ae4c.jpg","comment_is_top":false,"comment_ctime":1582973761,"is_pvip":false,"replies":[{"id":"70896","content":"加一颗星：是这样的:)，通过提案是不会改的的，如果有节点上不存在通过的提案，不管后来的提议者，如何提交提案，值都不变的，也就是节点C上的X值是7，3个节点上的X值，都是7。<br>通过这个思考题，希望大家注意到这么2点，首先在Basic Paxos的准备阶段，是会发现之前通过的提案的值；另外，Basic Paxos是一个共识算法，就一个值达成共识后，共识的这个值，就不会再变了。","user_name":"作者回复","comment_id":183213,"uid":"1642497","ip_address":"","utype":1,"ctime":1582986358,"user_name_real":"hanj4096"}],"discussion_count":3,"race_medal":0,"score":"57417548609","product_id":100046101,"comment_content":"对思考题有个疑问，这个x的值是不是只要大多数节点通过后就不能被update了？即只要过半数的节点通过后，无论后面的新的请求的提案编号多高，这个值都不会被更新了？这个感觉哪里不对啊！","like_count":13,"discussions":[{"author":{"id":1312016,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ephT4ucrKH1F3iagialpTVzUyTgOA84IAfKK7gOywSD3v8TTa9NPf2S83NElb0ScDBNJ5nALOH3lKmQ/132","nickname":"evancao","note":"","ucode":"BD5BBD82B839BB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":371181,"discussion_content":"那如果下次还要更新这个X值的呢","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1619679287,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":485601,"discussion_content":"加一颗星：是这样的:)，通过提案是不会改的的，如果有节点上不存在通过的提案，不管后来的提议者，如何提交提案，值都不变的，也就是节点C上的X值是7，3个节点上的X值，都是7。\n通过这个思考题，希望大家注意到这么2点，首先在Basic Paxos的准备阶段，是会发现之前通过的提案的值；另外，Basic Paxos是一个共识算法，就一个值达成共识后，共识的这个值，就不会再变了。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1582986358,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375811,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855080,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":180713,"user_name":"Dovelol","can_delete":false,"product_type":"c1","uid":1253384,"ip_address":"","ucode":"9B5DDF7720F307","user_header":"https://static001.geekbang.org/account/avatar/00/13/20/08/bc06bc69.jpg","comment_is_top":false,"comment_ctime":1582372044,"is_pvip":false,"replies":[{"id":"70226","content":"大多数节点就某个值，达成共识后，值就不再变了，哪怕有新的提案，这个值，也能保证不再变了。节点挂了，属于系统实现层面，如何同步数据的问题，如果要处理的话，比如，可以这么做，实现数据同步机制或重新执行Basic Paxos。如果更新某个值，这是需要Multi-Paxos和状态机，我19、20讲，我会具体说说。<br>咱们要注意的一点，Basic Paxos只能就单值达成共识，属于一个基础算法，Multi-Paxos，才能在实际场景中落地。","user_name":"作者回复","comment_id":180713,"uid":"1642497","ip_address":"","utype":1,"ctime":1582467830,"user_name_real":"hanj4096"}],"discussion_count":2,"race_medal":0,"score":"48827012300","product_id":100046101,"comment_content":"老师好，今天题目开始说到是一个只读的kv存储，那是不是只要最后所有节点数据一样就算成功了？如果某个节点挂了，重启了该怎么获取到最新值呢？如果是可读写的节点，该怎么取更新某个值呢？","like_count":11,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484769,"discussion_content":"大多数节点就某个值，达成共识后，值就不再变了，哪怕有新的提案，这个值，也能保证不再变了。节点挂了，属于系统实现层面，如何同步数据的问题，如果要处理的话，比如，可以这么做，实现数据同步机制或重新执行Basic Paxos。如果更新某个值，这是需要Multi-Paxos和状态机，我19、20讲，我会具体说说。\n咱们要注意的一点，Basic Paxos只能就单值达成共识，属于一个基础算法，Multi-Paxos，才能在实际场景中落地。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582467830,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375810,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855076,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":200623,"user_name":"88591","can_delete":false,"product_type":"c1","uid":1254656,"ip_address":"","ucode":"04CE3E46455185","user_header":"https://static001.geekbang.org/account/avatar/00/13/25/00/3afbab43.jpg","comment_is_top":false,"comment_ctime":1585625664,"is_pvip":false,"replies":[{"id":"75548","content":"加一颗星:)","user_name":"作者回复","comment_id":200623,"uid":"1642497","ip_address":"","utype":1,"ctime":1585933109,"user_name_real":"hanj4096"}],"discussion_count":2,"race_medal":0,"score":"35945364032","product_id":100046101,"comment_content":" 准备阶段：<br>\t\t1、 client3 [9,]—&gt;A  、A 已提案通过，承诺编码为&gt;=9、被返回 [5,7]\t\t<br>                 2、client3 [9,]—&gt;B 、B 已提案通过,承诺编码为&gt;=9、    被返回 [5,7]<br>                 3、client3 [9,]—&gt;C 、C  无提案通过,承诺编码为&gt;=9、  被返回尚无提案<br>                                                C  收到的提议 [5,7]或者[9,6],不管是先收到5，还是9，都会承诺9.<br>                                                           <br>                                          <br> 接受阶段<br>           client3 ：依据A,B 返回的信息为[5,7]，多数提议为【5，7】，只更新自己的编码不更新值<br>            \t 1、client3  [9,7]—&gt; A  ,A 提案通过。\t<br>                 2、client3  [9,7]—&gt;B , B  提案通过, <br>                 3、client3  [9,7]—&gt;C ,C  提案通过<br>                 4、学习者学习改提案值","like_count":8,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490081,"discussion_content":"加一颗星:)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585933109,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1651441,"avatar":"https://static001.geekbang.org/account/avatar/00/19/32/f1/fd24d52b.jpg","nickname":"青禾qingh","note":"","ucode":"453FC435B03790","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":537255,"discussion_content":"m","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639014440,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":211494,"user_name":"piboye","can_delete":false,"product_type":"c1","uid":1066752,"ip_address":"","ucode":"7CFD8712857A85","user_header":"https://static001.geekbang.org/account/avatar/00/10/47/00/3202bdf0.jpg","comment_is_top":false,"comment_ctime":1587973237,"is_pvip":true,"replies":[{"id":"80140","content":"加一颗星:)，可以通过独立单调递增、随机超时，来避免重复冲突，比如，可以参考Hashicorp Raft对CurrentTerm的实现。","user_name":"作者回复","comment_id":211494,"uid":"1642497","ip_address":"","utype":1,"ctime":1589310568,"user_name_real":"hanj4096"}],"discussion_count":2,"race_medal":0,"score":"31652744309","product_id":100046101,"comment_content":"怎么保障提案号不重复呢？","like_count":7,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":493278,"discussion_content":"加一颗星:)，可以通过独立单调递增、随机超时，来避免重复冲突，比如，可以参考Hashicorp Raft对CurrentTerm的实现。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589310568,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375813,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855090,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":180367,"user_name":"沉淀的梦想","can_delete":false,"product_type":"c1","uid":1177315,"ip_address":"","ucode":"BCB7C26F9D214B","user_header":"https://static001.geekbang.org/account/avatar/00/11/f6/e3/e4bcd69e.jpg","comment_is_top":false,"comment_ctime":1582267946,"is_pvip":false,"replies":[{"id":"70123","content":"Basic Paxos解决的单值的共识的问题，如果需要就一系列值达成共识，就多执行几次Basic Paxos，也就是Multi Paxos。如果，多个key，需要反复修改时，之前的共识是不能修改的，可以在之前的共识的基础之上，实现新的指令，在提交给状态机后，就可以修改value了。","user_name":"作者回复","comment_id":180367,"uid":"1642497","ip_address":"","utype":1,"ctime":1582386412,"user_name_real":"hanj4096"}],"discussion_count":3,"race_medal":0,"score":"31647039018","product_id":100046101,"comment_content":"Basic Paxos 是只能用来解决这种只有一个 Key 的并且一次性赋值的只读 KV 存储的一致性问题吗？如果有多个 Key，或者要反复修改，就要用 Multi Paxos？","like_count":7,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484629,"discussion_content":"Basic Paxos解决的单值的共识的问题，如果需要就一系列值达成共识，就多执行几次Basic Paxos，也就是Multi Paxos。如果，多个key，需要反复修改时，之前的共识是不能修改的，可以在之前的共识的基础之上，实现新的指令，在提交给状态机后，就可以修改value了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582386412,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375815,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855104,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1270127,"avatar":"https://static001.geekbang.org/account/avatar/00/13/61/6f/f072c3d1.jpg","nickname":"charles","note":"","ucode":"936B89B442DB7B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":552356,"discussion_content":"大哥，你是机器人吗","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645428900,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":375815,"ip_address":""},"score":552356,"extra":""}]}]},{"had_liked":false,"id":219035,"user_name":"byrne","can_delete":false,"product_type":"c1","uid":2008349,"ip_address":"","ucode":"5445A1791BEA98","user_header":"https://static001.geekbang.org/account/avatar/00/1e/a5/1d/49dfb810.jpg","comment_is_top":false,"comment_ctime":1589936114,"is_pvip":false,"replies":[{"id":"80954","content":"加一颗星:)，这种情况属于一个异常情况，与实现有关，也是Basic Paxos没有约定的，在实现中，客户端重试就可以了。其实，异常情况（比如网络连接失败）虽然会肯定发生，但概率低，持续时间很短，“失败 - 缓存 - 重试”是一种很好的解决办法。","user_name":"作者回复","comment_id":219035,"uid":"1642497","ip_address":"","utype":1,"ctime":1589944781,"user_name_real":"hanj4096"}],"discussion_count":11,"race_medal":0,"score":"27359739890","product_id":100046101,"comment_content":"老师，我下面的例子是我哪里理解错了，望百忙中抽空回答下，谢谢！<br>假设有ABC三个节点，客户端甲发起一次提案编号1将X的值设为1，假设AB两个节点都收到客户端甲这次提案，客户端甲得到AB两个节点的应答之后开始进入第二阶段（三个节点中的两个，所以已经是大部分节点给了应答），假设此时客户端乙又发起一次提案编号2将X的值设为2，假设B和C两个节点收到客户端乙的提案，B发现编号2大于原先的编号1，因此给客户端乙回了没有提案，C由于从来没收到提案，因此也给客户端乙回了没有提案，此时客户端乙也进入了第二阶段，这样客户端甲将A节点的X设定为1，客户端乙将B和C节点的X设为2，这样两边就不一致了。","like_count":6,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":495662,"discussion_content":"加一颗星:)，这种情况属于一个异常情况，与实现有关，也是Basic Paxos没有约定的，在实现中，客户端重试就可以了。其实，异常情况（比如网络连接失败）虽然会肯定发生，但概率低，持续时间很短，“失败 - 缓存 - 重试”是一种很好的解决办法。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589944781,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2994288,"avatar":"","nickname":"起风了","note":"","ucode":"9EE9A1783B2B00","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":570056,"discussion_content":"忘了一点，客户端乙也会到达节点A的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651650021,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1361159,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqJobg767PUeqrqQQ4B6YvMatj2SRyOicKZZ4gWTf30dMketiaj58Gc3RFTmckGxAXlL9ERSxGovq9g/132","nickname":"涛哥哥","note":"","ucode":"329A1384E3AB5E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":552167,"discussion_content":"这不正是paxos要解决的问题吗！他是一个能让分布式所有节点达到共识的呀，所以这个分布式集群中所有节点都会达成×=2这个共识呀。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645334027,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2088152,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/dc/d8/3473f0eb.jpg","nickname":"Loki","note":"","ucode":"C9A9BDD78ACA49","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":387207,"discussion_content":"这里应该是混淆了副本和共识的概念，集群就某个提案形成大多数后达成了共识，但是副本不保证一致，在2f+1个节点的集群里，只要f+1个节点接受某个提案k，则就k达成共识，但是副本只保证至少f+1个是正确的提案，其余的节点上的提案不做保证。简单的说法是此时需要获取某个提案的话，需要从2f+1个节点上都获取一次，再确认集群提交的提案是哪个，才算是从集群的一次读取过程。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628052563,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1030135,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b7/f7/b2423197.jpg","nickname":"牛牛","note":"","ucode":"3FC01F8D66B2FB","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":380980,"discussion_content":"这时候最好的处理方式，不应该是节点B拒绝甲的二阶段请求么？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1624851004,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375653,"discussion_content":"大哥，你这个问题有没有得到答案，我都感觉这老师这个地方没讲好，给我感觉是basic-paxos有bug，没法说服自己，我都没法往下继续看下去了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621785769,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1853638,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/48/c6/3c8d9a0c.jpg","nickname":"爱德华","note":"","ucode":"800E6A9490D90F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":379176,"discussion_content":"对于这个问题是想多了，我一开始也陷进去了。首先Paxos从一开始就是设想Acceptor可以批准多个提案的，有了这个前提，再来看这个问题。最终客户端乙也会到达A节点（如果没有达到A节点，在客户端乙来看，它是故障了，这种情况客户端乙直接放弃它即可，不予讨论），这里无论是客户端甲的Accept请求先到还是客户端乙的Accept请求先到，算法都是正确的，如果甲先到，A节点先批准甲，然后再批准乙更新提案内容，如果乙先到，A会拒绝甲。","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1623740657,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":375653,"ip_address":""},"score":379176,"extra":""},{"author":{"id":2994288,"avatar":"","nickname":"起风了","note":"","ucode":"9EE9A1783B2B00","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1853638,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/48/c6/3c8d9a0c.jpg","nickname":"爱德华","note":"","ucode":"800E6A9490D90F","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":570055,"discussion_content":"同意","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651649934,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":379176,"ip_address":""},"score":570055,"extra":""},{"author":{"id":1158930,"avatar":"https://static001.geekbang.org/account/avatar/00/11/af/12/fe5196f8.jpg","nickname":"Tutu","note":"","ucode":"1F105484397134","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1853638,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/48/c6/3c8d9a0c.jpg","nickname":"爱德华","note":"","ucode":"800E6A9490D90F","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":570694,"discussion_content":"现在的问题是甲先到，并且在乙的一阶段到A节点之前，甲已经把二阶段完成了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651881081,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":379176,"ip_address":""},"score":570694,"extra":""}]},{"author":{"id":2002299,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/8d/7b/feb476e1.jpg","nickname":"满想Elvin","note":"","ucode":"4A994A138C525B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":370608,"discussion_content":"还是不明白，这个时候的不一致算是算法bug吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619485016,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1850206,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/AyUEibEbicwMib9XSYFxDd13rIj5xMLCAwlEogd1c2bwW7Dwof0AQkRaSS5FrEK0Cg0s36ZnVZK2GW37WlVjzbydQ/132","nickname":"a解code","note":"","ucode":"A9DA207611BF78","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":286534,"discussion_content":"我觉得这种情况，很容易发生，如果一开始AB开始接受提议的时候就和c不一样啦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593218451,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":185638,"user_name":"X中倪","can_delete":false,"product_type":"c1","uid":1418862,"ip_address":"","ucode":"F28FAFF2FEDD1A","user_header":"https://static001.geekbang.org/account/avatar/00/15/a6/6e/21907ff9.jpg","comment_is_top":false,"comment_ctime":1583652118,"is_pvip":false,"replies":[{"id":"76362","content":"加一颗星:)，其实Basic Paxos不关心这个问题，Basic Paxos解决的是如何就单值达成共识，并保证达成共识后的值，就不再变了。在这个延伸中，探讨的是如何接受最适合的值，既然我们知道它最适合了，就可以直接赋值了，不使用共识算法。正如，我们在文中常说的，技术用来解决问题，需要根据场景特点，选择适合的技术。","user_name":"作者回复","comment_id":185638,"uid":"1642497","ip_address":"","utype":1,"ctime":1586375078,"user_name_real":"hanj4096"}],"discussion_count":2,"race_medal":0,"score":"27353455894","product_id":100046101,"comment_content":"有个小问题。延伸一下，这里的提案编号就好比 达成共识协商的优先级别。就拿文章上述说的1，5提案编号对应的提案值是3，7。假设来了一个很好的提案的值这个值就是 6 ，但是提案编号是4 。自然都舍去了提案号为4的提案。系统该怎么才能接受这个提案编号为4 的提案值呢。<br>对映上述疫情， 优先级越大那么接受的可能就越大。假设 A B的提案编号是 200，500 。这时来了一个C 他的提案是最完美的，他的提案编号是100 ，怎么才能不被舍弃。","like_count":6,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":486446,"discussion_content":"加一颗星:)，其实Basic Paxos不关心这个问题，Basic Paxos解决的是如何就单值达成共识，并保证达成共识后的值，就不再变了。在这个延伸中，探讨的是如何接受最适合的值，既然我们知道它最适合了，就可以直接赋值了，不使用共识算法。正如，我们在文中常说的，技术用来解决问题，需要根据场景特点，选择适合的技术。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586375078,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375814,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855100,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":310676,"user_name":"神垂死","can_delete":false,"product_type":"c1","uid":1016334,"ip_address":"","ucode":"EE924E8E0A6814","user_header":"https://static001.geekbang.org/account/avatar/00/0f/82/0e/9c42e6f9.jpg","comment_is_top":false,"comment_ctime":1630836278,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"18810705462","product_id":100046101,"comment_content":"可以看下这个文章，讲得非常清楚：https:&#47;&#47;www.cnblogs.com&#47;linbingdong&#47;p&#47;6253479.html","like_count":4,"discussions":[{"author":{"id":2440071,"avatar":"https://static001.geekbang.org/account/avatar/00/25/3b/87/96f62392.jpg","nickname":"冬","note":"","ucode":"C2ACD09659C176","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":587251,"discussion_content":"很清晰明了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662907165,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"四川"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1361159,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqJobg767PUeqrqQQ4B6YvMatj2SRyOicKZZ4gWTf30dMketiaj58Gc3RFTmckGxAXlL9ERSxGovq9g/132","nickname":"涛哥哥","note":"","ucode":"329A1384E3AB5E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":552166,"discussion_content":"经典","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645333096,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":192878,"user_name":"烽火戏诸侯","can_delete":false,"product_type":"c1","uid":1177767,"ip_address":"","ucode":"EFB94B8DDF6D4C","user_header":"https://static001.geekbang.org/account/avatar/00/11/f8/a7/4e4126d1.jpg","comment_is_top":false,"comment_ctime":1584877546,"is_pvip":false,"replies":[{"id":"77535","content":"加一颗星:)，如何实现提案编号？论文提到了思路，独立、递增、存储在可靠性设备中。具体细节实现，可以参考Hashicorp Raft的CurrentTerm的实现（Raft.setCurrentTerm()、raftState.getCurrentTerm()、raftState.setCurrentTerm()），原子、递增、持久存储。","user_name":"作者回复","comment_id":192878,"uid":"1642497","ip_address":"","utype":1,"ctime":1587128535,"user_name_real":"hanj4096"}],"discussion_count":2,"race_medal":0,"score":"18764746730","product_id":100046101,"comment_content":"每个客服端的提案号如何生成的","like_count":4,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488479,"discussion_content":"加一颗星:)，如何实现提案编号？论文提到了思路，独立、递增、存储在可靠性设备中。具体细节实现，可以参考Hashicorp Raft的CurrentTerm的实现（Raft.setCurrentTerm()、raftState.getCurrentTerm()、raftState.setCurrentTerm()），原子、递增、持久存储。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587128535,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375816,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855109,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":191631,"user_name":"kylexy_0817","can_delete":false,"product_type":"c1","uid":1068372,"ip_address":"","ucode":"392DD9DD5E4B6E","user_header":"https://static001.geekbang.org/account/avatar/00/10/4d/54/9c214885.jpg","comment_is_top":false,"comment_ctime":1584785910,"is_pvip":false,"replies":[{"id":"75706","content":"在实际场景中，需要改变的不是达成共识的值，而是最终数据的值，比如KV存储系统。对于共识算法而言，达成了共识后，值就不会再变了，但如果我们想改变数据的值，可以实现状态机，和提议新的指令。","user_name":"作者回复","comment_id":191631,"uid":"1642497","ip_address":"","utype":1,"ctime":1586019714,"user_name_real":"hanj4096"}],"discussion_count":3,"race_medal":0,"score":"18764655094","product_id":100046101,"comment_content":"韩老师好，想问下有没达到数据共识后，还需要发生改变的情况呢？该算法是达到共识后，就不能改变了，所以不能用来处理这种情况了吧？","like_count":4,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488215,"discussion_content":"在实际场景中，需要改变的不是达成共识的值，而是最终数据的值，比如KV存储系统。对于共识算法而言，达成了共识后，值就不会再变了，但如果我们想改变数据的值，可以实现状态机，和提议新的指令。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586019714,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1211936,"avatar":"https://static001.geekbang.org/account/avatar/00/12/7e/20/d9ae2a0b.jpg","nickname":"Cherish","note":"","ucode":"C1B5E1B44703BA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582989,"discussion_content":"这个问题我看好些人都问了，作者评论都差不多，不过我还是一直没太看懂，实现状态机和提议新的指令指的是什么？楼主懂了么","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1659862670,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"北京"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375819,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855139,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":266985,"user_name":"Geek_b1b6b1","can_delete":false,"product_type":"c1","uid":1609720,"ip_address":"","ucode":"927923A36F22B1","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ0SDra4ZSspknscVIV8ZKQia684AjyzVaBiceT84p0Vic4GhrW6pKMkbDWBSwqbrdbaksr1nqKbF7rg/132","comment_is_top":false,"comment_ctime":1607563140,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"14492465028","product_id":100046101,"comment_content":"为什么达成共识之后还需要去处理请求。直接拒绝不可以吗？反正都不能修改","like_count":3,"discussions":[{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375826,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855172,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":212240,"user_name":"竹马彦四郎的好朋友影法師","can_delete":false,"product_type":"c1","uid":1475385,"ip_address":"","ucode":"A9555AEFF90CDF","user_header":"https://static001.geekbang.org/account/avatar/00/16/83/39/f9623363.jpg","comment_is_top":false,"comment_ctime":1588078064,"is_pvip":false,"replies":[{"id":"78889","content":"加一颗星:)，很经典。","user_name":"作者回复","comment_id":212240,"uid":"1642497","ip_address":"","utype":1,"ctime":1588100451,"user_name_real":"hanj4096"}],"discussion_count":2,"race_medal":0,"score":"14472979952","product_id":100046101,"comment_content":"感觉paxos这个大多数是个本质核心啊~ 它能保证一旦达成共识，后面除了提案编号变大之外，提案的值不变，而且2pc的第一阶段就能感知到已经通过的提案的信息，很神奇的算法！","like_count":3,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":493459,"discussion_content":"加一颗星:)，很经典。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588100451,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375818,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855135,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":180310,"user_name":"ID171","can_delete":false,"product_type":"c1","uid":1542849,"ip_address":"","ucode":"C2112C0927FDCA","user_header":"https://static001.geekbang.org/account/avatar/00/17/8a/c1/ef41947c.jpg","comment_is_top":false,"comment_ctime":1582254970,"is_pvip":false,"replies":[{"id":"70135","content":"加一颗星:)，从代码实现的角度，是需要的。","user_name":"作者回复","comment_id":180310,"uid":"1642497","ip_address":"","utype":1,"ctime":1582387783,"user_name_real":"hanj4096"}],"discussion_count":3,"race_medal":0,"score":"14467156858","product_id":100046101,"comment_content":"因为节点C没有通过提案，可能是在接受阶段没有接收到来自客户端2的信息。<br>当客户端3提出提案9，提议阶段节点A, B将会把已经通过的值7返回给C，在接受阶段，客户端3会通知节点C设置[9, 7] （这里有个问题，还需要同步信息给A, B吗，需要把提案编号9保存在A, B, C节点上吗？），然后三个节点 A, B ,C 的X值均为7","like_count":3,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484605,"discussion_content":"加一颗星:)，从代码实现的角度，是需要的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582387783,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375817,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855131,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1228560,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/10/b7974690.jpg","nickname":"BD","note":"","ucode":"A95CF8C3EDC228","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":342477,"discussion_content":"怎么看不懂，准备阶段A B把7给了客户端C，接受阶段客户端会向A B发送[9,7]的提案啊，C也会收到客户端C的[9,7]提案，为什么还需要同步呢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610693373,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":316596,"user_name":"LWD","can_delete":false,"product_type":"c1","uid":1986739,"ip_address":"","ucode":"DDA444DB113C01","user_header":"https://static001.geekbang.org/account/avatar/00/1e/50/b3/9269cd59.jpg","comment_is_top":false,"comment_ctime":1634441601,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"10224376193","product_id":100046101,"comment_content":"有一篇文章是这样总结的：<br>Our full Paxos protocol now looks like this:<br>Phase 1a: Proposer (PREPARE)<br>A proposer initiates a PREPARE message, picking a unique, ever-incrementing value.<br>ID = cnt++;<br>send PREPARE(ID)<br><br>Phase 1b: Acceptor (PROMISE)<br>An acceptor receives a PREPARE(ID) message:<br>    if (ID &lt;= max_id)<br>        do not respond (or respond with a &quot;fail&quot; message)<br>    else<br>        max_id = ID     &#47;&#47; save highest ID we&#39;ve seen so far<br>        if (proposal_accepted == true) &#47;&#47; was a proposal already accepted?<br>            respond: PROMISE(ID, accepted_ID, accepted_VALUE)<br>        else<br>            respond: PROMISE(ID)<br><br>Phase 2a: Proposer (PROPOSE)<br>The proposer now checks to see if it can use its proposal or if it has to use the highest-numbered one it received from among all responses:<br>did I receive PROMISE responses from a majority of acceptors?<br>if yes<br>    do any responses contain accepted values (from other proposals)?<br>    if yes<br>        val = accepted_VALUE    &#47;&#47; value from PROMISE message with the highest accepted ID<br>    if no<br>        val = VALUE     &#47;&#47; we can use our proposed value<br>    send PROPOSE(ID, val) to at least a majority of acceptors<br><br>Phase 2b: Acceptor (ACCEPT)<br>Each acceptor receives a PROPOSE(ID, VALUE) message from a proposer. If the ID is the highest number it has processed then accept the proposal and propagate the value to the proposer and to all the learners.<br>if (ID == max_id) &#47;&#47; is the ID the largest I have seen so far?<br>    proposal_accepted = true     &#47;&#47; note that we accepted a proposal<br>    accepted_ID = ID             &#47;&#47; save the accepted proposal number<br>    accepted_VALUE = VALUE       &#47;&#47; save the accepted proposal data<br>    respond: ACCEPTED(ID, VALUE) to the proposer and all learners<br>else<br>    do not respond (or respond with a &quot;fail&quot; message)<br><br>If a majority of acceptors accept ID, value then consensus is reached. Consensus is on the value, not necessarily the ID.","like_count":2,"discussions":[{"author":{"id":2700925,"avatar":"https://static001.geekbang.org/account/avatar/00/29/36/7d/eab0d26a.jpg","nickname":"丹尼尔-雪碧","note":"","ucode":"F098396F4B7500","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":553616,"discussion_content":"算法很清晰，尤其是the first phase，proposer在获取accepter返回的promise后，对propose阶段的value如何选择做了说明，其实就是“尽量”取的是所有的accepter返回的promise中的maximal accepted value。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645983507,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":243123,"user_name":"dakingkong","can_delete":false,"product_type":"c1","uid":1247568,"ip_address":"","ucode":"6B492887E7E4A2","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/J1ADsCjfat7ibMcup6DV9DhH3lzKo2lIeBqCjuBa5nIWYu7u8NYDFb3iaPRp9cia9uH4464GDaGKcd7c0d0dkhibbA/132","comment_is_top":false,"comment_ctime":1597972474,"is_pvip":false,"replies":[{"id":"90286","content":"加一颗星:)，这里的响应可以理解为“处理（handle）”；在实现的时候，基于连接的考虑，咱们可以返回一个状态值。","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1598966140,"ip_address":"","comment_id":243123,"utype":1}],"discussion_count":2,"race_medal":0,"score":"10187907066","product_id":100046101,"comment_content":"老师，文中说在准备阶段，如果接受者收到的提案编号小于已响应过的提案编号，则不会响应本次请求。为什么这里不能返回一个状态值，告诉提议者，他的提案编号太小，不能通过呢？这样提议者就不用等待超时后，才知道自己没有收到大多数节点的响应","like_count":2,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504185,"discussion_content":"加一颗星:)，这里的响应可以理解为“处理（handle）”；在实现的时候，基于连接的考虑，咱们可以返回一个状态值。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598966140,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375828,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855185,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":187321,"user_name":"Theodore","can_delete":false,"product_type":"c1","uid":1055049,"ip_address":"","ucode":"0735C2A64295FC","user_header":"https://static001.geekbang.org/account/avatar/00/10/19/49/9452b2fd.jpg","comment_is_top":false,"comment_ctime":1584083068,"is_pvip":false,"replies":[{"id":"77543","content":"加一颗星:)，与时间戳无关哈，或者说时间戳不能解决这个问题，比如你想象下，如果基于时间戳，多个提议者同时提交提案时，提案标号不就一样的了，肯定会出问题的。论文提到了思路，独立、递增、存储在可靠性设备中。具体细节实现，可以参考Hashicorp Raft的CurrentTerm的实现（Raft.setCurrentTerm()、raftState.getCurrentTerm()、raftState.setCurrentTerm()），原子、递增、持久存储。","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1587131800,"ip_address":"","comment_id":187321,"utype":1}],"discussion_count":2,"race_medal":0,"score":"10174017660","product_id":100046101,"comment_content":"所以，提案编号就是整个协议设计的核心了。那么如何设计提案编号的生产算法呢？不会是毫秒级时间戳吧？","like_count":2,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":487071,"discussion_content":"加一颗星:)，与时间戳无关哈，或者说时间戳不能解决这个问题，比如你想象下，如果基于时间戳，多个提议者同时提交提案时，提案标号不就一样的了，肯定会出问题的。论文提到了思路，独立、递增、存储在可靠性设备中。具体细节实现，可以参考Hashicorp Raft的CurrentTerm的实现（Raft.setCurrentTerm()、raftState.getCurrentTerm()、raftState.setCurrentTerm()），原子、递增、持久存储。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587131800,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375820,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855144,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":185750,"user_name":"吴小智","can_delete":false,"product_type":"c1","uid":1310798,"ip_address":"","ucode":"C7C9F58B5C9F7B","user_header":"https://static001.geekbang.org/account/avatar/00/14/00/4e/be2b206b.jpg","comment_is_top":false,"comment_ctime":1583674338,"is_pvip":false,"replies":[{"id":"77555","content":"加一颗星:)，比如原子变量、持久化存储，在每次发起新的准备请求时，递增下编号值。类似Hashicorp Raft的CurrentTerm的实现.","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1587143155,"ip_address":"","comment_id":185750,"utype":1}],"discussion_count":3,"race_medal":0,"score":"10173608930","product_id":100046101,"comment_content":"提案编号这个怎么保证递增呢？","like_count":2,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":486486,"discussion_content":"加一颗星:)，比如原子变量、持久化存储，在每次发起新的准备请求时，递增下编号值。类似Hashicorp Raft的CurrentTerm的实现.","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587143155,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1040621,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/e0/ed/181f0d5d.jpg","nickname":"coney","note":"","ucode":"0EB84BA2B9EFAA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":215493,"discussion_content":"提案编号的生成采用cp。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1585325364,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375821,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855149,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":183378,"user_name":"Jialin","can_delete":false,"product_type":"c1","uid":1112955,"ip_address":"","ucode":"12583269732A75","user_header":"https://static001.geekbang.org/account/avatar/00/10/fb/7b/2d4b38fb.jpg","comment_is_top":false,"comment_ctime":1583030611,"is_pvip":false,"replies":[{"id":"76373","content":"加一颗星:)","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1586377441,"ip_address":"","comment_id":183378,"utype":1}],"discussion_count":3,"race_medal":0,"score":"10172965203","product_id":100046101,"comment_content":"思考题觉得答案是6的同学可能忽略一点：多数服从少数原则。在接受阶段，当接受者收到提议者的响应时，会根据多数服从少数原则，设置提议值。思考题中，客户端3会收到来自A和B的响应[5，7]、C的尚无提案响应，所以客户端3根据多数原则，设置[9，7]的请求给ABC。","like_count":2,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":485666,"discussion_content":"加一颗星:)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586377441,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2700925,"avatar":"https://static001.geekbang.org/account/avatar/00/29/36/7d/eab0d26a.jpg","nickname":"丹尼尔-雪碧","note":"","ucode":"F098396F4B7500","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":553617,"discussion_content":"跟多数服从少数没有关系，这跟proposer得到的准备相应中最大的提议和对应的value有关。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645983645,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1228560,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/10/b7974690.jpg","nickname":"BD","note":"","ucode":"A95CF8C3EDC228","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":342473,"discussion_content":"这里跟多数服从少数没关系吧，只要接受者在准备阶段响应给提议者的值不为空，比如分别收到A的[1,3]，B的[5,7]那么提议者在接受阶段就会把编号最大的那个值设置为自己的接受阶段的值","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610691730,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":182844,"user_name":"川杰","can_delete":false,"product_type":"c1","uid":1099750,"ip_address":"","ucode":"815211E1D698E6","user_header":"https://static001.geekbang.org/account/avatar/00/10/c7/e6/11f21cb4.jpg","comment_is_top":false,"comment_ctime":1582874297,"is_pvip":false,"replies":[{"id":"70757","content":"提案编号相同，本身不是问题，问题在于是否会导致准备响应被瓜分。如果有提议者收到大多数准备响应的，那么它就可以发送接受请求，如果没有提议者收到大多数准备响应，那么，增加提案编号，开始新一轮协商。","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1582923742,"ip_address":"","comment_id":182844,"utype":1}],"discussion_count":2,"race_medal":0,"score":"10172808889","product_id":100046101,"comment_content":"会出现，提案编号相同，但是值不同的情况吗？如果出现了，要怎么处理？","like_count":2,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":485470,"discussion_content":"提案编号相同，本身不是问题，问题在于是否会导致准备响应被瓜分。如果有提议者收到大多数准备响应的，那么它就可以发送接受请求，如果没有提议者收到大多数准备响应，那么，增加提案编号，开始新一轮协商。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582923742,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375822,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855154,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":180800,"user_name":"kernel_distribution","can_delete":false,"product_type":"c1","uid":1131988,"ip_address":"","ucode":"39C0BC94D04C3C","user_header":"https://static001.geekbang.org/account/avatar/00/11/45/d4/83d69083.jpg","comment_is_top":false,"comment_ctime":1582395393,"is_pvip":false,"replies":[{"id":"71064","content":"可能出现各节点的值不一致的情况。因为少数节点，可能只执行了Accept(n, value)，也就是没有经过prepare阶段，如果此时，有小于n的提议者在之前得到大多数准备响应，现在在发起接受请求，尽管少数节点，已执行了Accept(n, value)，因为没有设置minProposal，节点还是会重新接受这个低提案编号的提案，导致最终的值，被修改。","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1583093174,"ip_address":"","comment_id":180800,"utype":1}],"discussion_count":2,"race_medal":0,"score":"10172329985","product_id":100046101,"comment_content":"http:&#47;&#47;pages.cs.wisc.edu&#47;~remzi&#47;Classes&#47;739&#47;Fall2017&#47;paxos.lecture.pdf  请问下老师，这个最后的Q2有什么问题么。","like_count":2,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484797,"discussion_content":"可能出现各节点的值不一致的情况。因为少数节点，可能只执行了Accept(n, value)，也就是没有经过prepare阶段，如果此时，有小于n的提议者在之前得到大多数准备响应，现在在发起接受请求，尽管少数节点，已执行了Accept(n, value)，因为没有设置minProposal，节点还是会重新接受这个低提案编号的提案，导致最终的值，被修改。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583093174,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375823,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855160,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":180378,"user_name":"沉淀的梦想","can_delete":false,"product_type":"c1","uid":1177315,"ip_address":"","ucode":"BCB7C26F9D214B","user_header":"https://static001.geekbang.org/account/avatar/00/11/f6/e3/e4bcd69e.jpg","comment_is_top":false,"comment_ctime":1582270810,"is_pvip":false,"replies":[{"id":"70129","content":"读，算法没有约定，Basic Paxos解决的是如何就单值达成共识。读，可以按需实现。","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1582387068,"ip_address":"","comment_id":180378,"utype":1}],"discussion_count":2,"race_medal":0,"score":"10172205402","product_id":100046101,"comment_content":"如果此时有客户端要读数据，那怎么处理？","like_count":2,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484635,"discussion_content":"读，算法没有约定，Basic Paxos解决的是如何就单值达成共识。读，可以按需实现。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582387068,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375824,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855164,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":180360,"user_name":"沉淀的梦想","can_delete":false,"product_type":"c1","uid":1177315,"ip_address":"","ucode":"BCB7C26F9D214B","user_header":"https://static001.geekbang.org/account/avatar/00/11/f6/e3/e4bcd69e.jpg","comment_is_top":false,"comment_ctime":1582267414,"is_pvip":false,"replies":[{"id":"70127","content":"实现细节，兰伯特是没有提的，需要自己实现的， 比如，在Raft中，可以将任期编号理解为提案编号，跟随者发起选举时，增加自己的任期编号；发现自己的任期编号比其他节点小，那么它会更新自己的编号到较大的编号值；还通过随机超时时间，避免相同任期编号的跟随者同时发起选举。","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1582386976,"ip_address":"","comment_id":180360,"utype":1}],"discussion_count":2,"race_medal":0,"score":"10172202006","product_id":100046101,"comment_content":"提案编号需要唯一且递增吗？如果需要的话，这在算法中又要如何保证呢？","like_count":2,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484626,"discussion_content":"实现细节，兰伯特是没有提的，需要自己实现的， 比如，在Raft中，可以将任期编号理解为提案编号，跟随者发起选举时，增加自己的任期编号；发现自己的任期编号比其他节点小，那么它会更新自己的编号到较大的编号值；还通过随机超时时间，避免相同任期编号的跟随者同时发起选举。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582386976,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375825,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855169,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":347107,"user_name":"SS","can_delete":false,"product_type":"c1","uid":1014781,"ip_address":"","ucode":"14CB1ECAC0AD6E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7b/fd/26cfeaf5.jpg","comment_is_top":false,"comment_ctime":1653723485,"is_pvip":false,"replies":[{"id":"126574","content":"同学你具体哪里不清楚可以仔细说一下嗷，我们可以针对你的具体意见，进行后续的迭代优化～","user_name":"编辑回复","user_name_real":"编辑","uid":"1998098","ctime":1653754284,"ip_address":"","comment_id":347107,"utype":2}],"discussion_count":1,"race_medal":0,"score":"5948690781","product_id":100046101,"comment_content":"不清不楚，作为课程真是太勉强了","like_count":1,"discussions":[{"author":{"id":1998098,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/7d/12/d377d445.jpg","nickname":"Tristan","note":"","ucode":"217D7D8836E9D2","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":573979,"discussion_content":"同学你具体哪里不清楚可以仔细说一下嗷，我们可以针对你的具体意见，进行后续的迭代优化～","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1653754285,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":8}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":255398,"user_name":"水煮小鲁班","can_delete":false,"product_type":"c1","uid":1102683,"ip_address":"","ucode":"F1AD805F7BE93B","user_header":"https://static001.geekbang.org/account/avatar/00/10/d3/5b/66d35c66.jpg","comment_is_top":false,"comment_ctime":1603336458,"is_pvip":false,"replies":[{"id":"95915","content":"加一颗星:)，可以是偶数，比如4节点集群的“大多数”是3，但相比对应的奇数值，并没有提升节点容错能力，所以一般是奇数。","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1606556028,"ip_address":"","comment_id":255398,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5898303754","product_id":100046101,"comment_content":"节点的数量可以是偶数吗，如果是偶数，大多数怎么定义？","like_count":1,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":507706,"discussion_content":"加一颗星:)，可以是偶数，比如4节点集群的“大多数”是3，但相比对应的奇数值，并没有提升节点容错能力，所以一般是奇数。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606556028,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375841,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855249,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":249514,"user_name":"shenfl","can_delete":false,"product_type":"c1","uid":1184233,"ip_address":"","ucode":"607CD894152241","user_header":"https://static001.geekbang.org/account/avatar/00/12/11/e9/b6aa6364.jpg","comment_is_top":false,"comment_ctime":1600679502,"is_pvip":false,"replies":[{"id":"96271","content":"加一颗星:)，赞，思考的很深。首先，Paxos是一个共识算法，他们确保的是“大多数”节点就某个值达成共识后，这个值就不再变化，在示例中，并没有1个值被“大多数”节点接受，所以，这个值是会变化的。另外，如果要实现各节点数据（值）的一致，就需要“客户端”或“领导者”重试，确保指定值最终被所有节点都接受。","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1606797579,"ip_address":"","comment_id":249514,"utype":1}],"discussion_count":5,"race_medal":0,"score":"5895646798","product_id":100046101,"comment_content":"发现个矛盾点：A、B、C都收到了客户端1的准备阶段，然后A、B接受了客户端2的准备阶段，然后A、B、C收到客户端1的接受阶段（会拒绝），C收到客户端1的接受阶段（会同意），C收到客户端2的准备阶段，然后客户端2挂了，这样A、B、C中只有C中有最新值，A、B中是旧值，出现了不一致现象。","like_count":1,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":505941,"discussion_content":"加一颗星:)，赞，思考的很深。首先，Paxos是一个共识算法，他们确保的是“大多数”节点就某个值达成共识后，这个值就不再变化，在示例中，并没有1个值被“大多数”节点接受，所以，这个值是会变化的。另外，如果要实现各节点数据（值）的一致，就需要“客户端”或“领导者”重试，确保指定值最终被所有节点都接受。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606797579,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1228560,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/10/b7974690.jpg","nickname":"BD","note":"","ucode":"A95CF8C3EDC228","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":342471,"discussion_content":"问题问的不太对吧，C已经收到了客户端1的接受阶段，那么再C收到 客户端2的准备阶段之后会把客户端1的值返回给客户端2，客户端2挂了之后怎么只有C有最新的值呢？\n","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1610690990,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1128843,"avatar":"https://static001.geekbang.org/account/avatar/00/11/39/8b/d021d285.jpg","nickname":"Pierce","note":"","ucode":"D5401B96AC2E1A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":395393,"discussion_content":"这问题问的有问题,是不是打错字了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632298561,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375827,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855180,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2113978,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLLniccwC1Mootc7IQsRGUTX3ZkkCKPc7lYV0g8CAqscWtAjd8xkHYcY3UFbYvicm42FXuAO5bZP6WQ/132","nickname":"Geek_417e74","note":"","ucode":"BEA8915879274D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":572549,"discussion_content":"我也找了很久，老师这里其实已经回答了。paxos 是共识算法，确保的是大多数节点就某个值达成共识后，这个值就不再变化。如果要实现各节点数据（值）的一致，就需要客户端或领导者重试（中间是会出现短暂的数据不一致的，当节点不知道共识的值时，设置为它接受的值；当节点知道共识的值后，修改为共识的值）来确保指定值最终被所有节点都接受","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1652849603,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":375827,"ip_address":""},"score":572549,"extra":""}]}]},{"had_liked":false,"id":225943,"user_name":"Geek_fa2241","can_delete":false,"product_type":"c1","uid":1983314,"ip_address":"","ucode":"DBA250A1E5DC25","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/KPX65F5IdxtfywLR0kIiap8saEQN9QTRHUrakyoaI4yg8XTUgWK9ibmRrkicdovRgia4tZdQtk2Vcia9kTBXiaNBiajAQ/132","comment_is_top":false,"comment_ctime":1591916438,"is_pvip":false,"replies":[{"id":"87756","content":"加一颗星:)，重新协商就可以了，另外，可以通过引入“随机性”来减少提案编号冲突的概率，比如，Raft就采用了类似的思想。","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1595866123,"ip_address":"","comment_id":225943,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5886883734","product_id":100046101,"comment_content":"Paxos算法本身有解决提案编号冲突的能力吗？","like_count":1,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":498050,"discussion_content":"加一颗星:)，重新协商就可以了，另外，可以通过引入“随机性”来减少提案编号冲突的概率，比如，Raft就采用了类似的思想。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595866123,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375829,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855188,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":220317,"user_name":"宁悦","can_delete":false,"product_type":"c1","uid":1901403,"ip_address":"","ucode":"68844C314FEEF8","user_header":"https://static001.geekbang.org/account/avatar/00/1d/03/5b/3cdbc9fa.jpg","comment_is_top":false,"comment_ctime":1590222403,"is_pvip":false,"replies":[{"id":"87753","content":"加一颗星:)，可以这么理解，比如，网络延迟。","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1595864886,"ip_address":"","comment_id":220317,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5885189699","product_id":100046101,"comment_content":"看了评论的推导，理解了结果是[9,7]，还有另外一个问题，对于接收阶段的值是如何确定的呢？<br>如果问题改为，只有一个节点A通过提案[5, 7]，另外两个节点 B,C 未通过任何提案，这个时候客户端发起[9,6]的请求时，三个结点的最终值还会是[9,7]么？<br>--------------------------------------------------------------------<br>对于vi同学的这个问题是不是可以这么理解，在准备阶段，如果节点A没有收到【9,6】请求的话，最后节点的值就是【9,6】，如果A节点收到【9,6】值的时候，最后节点的值就是【9,7】。但是好像比较矛盾，老师能举例说一下，A在不在大多数情况是什么意思吗？","like_count":1,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496117,"discussion_content":"加一颗星:)，可以这么理解，比如，网络延迟。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595864886,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375853,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855304,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":208334,"user_name":"骨汤鸡蛋面","can_delete":false,"product_type":"c1","uid":1050002,"ip_address":"","ucode":"2AC141A523E710","user_header":"https://static001.geekbang.org/account/avatar/00/10/05/92/b609f7e3.jpg","comment_is_top":false,"comment_ctime":1587341035,"is_pvip":true,"replies":[{"id":"77865","content":"加一颗星:)，效率不是挑战，可以参考Hashicorp Raft对CurrentTerm的处理，简洁的实现，是通过随机超时，来避免ID冲突，需要持久化存储，和设计为原子变量。","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1587357256,"ip_address":"","comment_id":208334,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5882308331","product_id":100046101,"comment_content":"所以是不是分布式算法都对唯一ID生成器的效率要求很高呢？","like_count":1,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":492422,"discussion_content":"加一颗星:)，效率不是挑战，可以参考Hashicorp Raft对CurrentTerm的处理，简洁的实现，是通过随机超时，来避免ID冲突，需要持久化存储，和设计为原子变量。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587357256,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375830,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855193,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":186827,"user_name":" 尿布","can_delete":false,"product_type":"c1","uid":1476323,"ip_address":"","ucode":"D1C8BDA7540962","user_header":"https://static001.geekbang.org/account/avatar/00/16/86/e3/a31f6869.jpg","comment_is_top":false,"comment_ctime":1583934844,"is_pvip":false,"replies":[{"id":"77553","content":"加一颗星:)，这个不是问题，是约定，只有接收到大多数准备响应后，才能发起接受请求。关于“如果”，是的。","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1587141682,"ip_address":"","comment_id":186827,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5878902140","product_id":100046101,"comment_content":"有个问题。如何保证准备阶段客户端1和客户端2都是接收到超过半数响应，才进行接受请求。如果客户端1在收到尚无提案的时候就发送接受请求[1,3]，并且在客户端2的准备提案5到达之前。此时岂不是接受提案[1,3]","like_count":1,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":486888,"discussion_content":"加一颗星:)，这个不是问题，是约定，只有接收到大多数准备响应后，才能发起接受请求。关于“如果”，是的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587141682,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":186131,"user_name":"刘学","can_delete":false,"product_type":"c1","uid":1309769,"ip_address":"","ucode":"98716A686F1D6C","user_header":"https://static001.geekbang.org/account/avatar/00/13/fc/49/bd2ff785.jpg","comment_is_top":false,"comment_ctime":1583763453,"is_pvip":false,"replies":[{"id":"77554","content":"加一颗星:)。值是7，因为在准备阶段会发现之前被接受的值7。问题1：需要的。问题2：Basic Paxos处理的是单值的共识，日志空洞是在Multi-Paxos中存在现象。","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1587142831,"ip_address":"","comment_id":186131,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5878730749","product_id":100046101,"comment_content":"老师你好，我先回答思考题，最终的结果是A，B，C节点会通过并接受编号为9的提案，所以X=6，原因是编号为9的提案比以前提交的任何提案都新；那么我有两个疑问，<br>1.提案号因该是全局的，那么针对新的请求，提案号是否应该单调递增的呢？<br>2.因为节点 C 未通过任何提案（可能是C节点经历一段时间的宕机后网络恢复或网络隔离后恢复），那么这个时候C节点就会出现日志落后，那么当客户端 3 提案编号为 9 来临时，通过 Basic Paxos 执行“SET X = 6”，这个时候C节点是否会造成日志空洞呢？","like_count":1,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":486637,"discussion_content":"加一颗星:)。值是7，因为在准备阶段会发现之前被接受的值7。问题1：需要的。问题2：Basic Paxos处理的是单值的共识，日志空洞是在Multi-Paxos中存在现象。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587142831,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":183575,"user_name":"木 木 兮","can_delete":false,"product_type":"c1","uid":1123129,"ip_address":"","ucode":"5B1B90A52BC080","user_header":"https://static001.geekbang.org/account/avatar/00/11/23/39/d4c06d39.jpg","comment_is_top":false,"comment_ctime":1583070159,"is_pvip":false,"replies":[{"id":"76371","content":"加一颗星:)，作为元数据，在每个节点上，持久保存就可以了。","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1586376993,"ip_address":"","comment_id":183575,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5878037455","product_id":100046101,"comment_content":"老师，我有一个疑问，在三个节点接收（Accept）客户端数据（图8）前，当前最大提案编号（5）是需要在三个节点之间做一次同步吗？还是会把这个编号存放在某个第三方位置（类似于分布式锁的锁获取）？否则接收客户端数据时节点A、B 还是老的编号1。","like_count":1,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":485716,"discussion_content":"加一颗星:)，作为元数据，在每个节点上，持久保存就可以了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586376993,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":181742,"user_name":"nestle","can_delete":false,"product_type":"c1","uid":1762252,"ip_address":"","ucode":"469800BED81B54","user_header":"https://static001.geekbang.org/account/avatar/00/1a/e3/cc/0947ff0b.jpg","comment_is_top":false,"comment_ctime":1582626381,"is_pvip":false,"replies":[{"id":"70399","content":"这个是为了显式表示，之前接收到了提案编号为5的准备请求，承诺以后不再响应提案编号小于等于 5 的准备请求，不会通过编号小于 5 的提案，辅助理解。另外，如果咱们实现Basic Paxos代码时，也需要找个变量记录下这个值的。","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1582633989,"ip_address":"","comment_id":181742,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5877593677","product_id":100046101,"comment_content":"图7的 [5,] 没太看明白是啥意思。","like_count":1,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":485102,"discussion_content":"这个是为了显式表示，之前接收到了提案编号为5的准备请求，承诺以后不再响应提案编号小于等于 5 的准备请求，不会通过编号小于 5 的提案，辅助理解。另外，如果咱们实现Basic Paxos代码时，也需要找个变量记录下这个值的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582633989,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1762252,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/e3/cc/0947ff0b.jpg","nickname":"nestle","note":"","ucode":"469800BED81B54","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":187007,"discussion_content":"看起来像客户端1又发起了 [5,] 的prepare请求，但其实并没有。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582723835,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":180950,"user_name":"约书亚","can_delete":false,"product_type":"c1","uid":1046714,"ip_address":"","ucode":"81EA27ADD9EC1A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f8/ba/14e05601.jpg","comment_is_top":false,"comment_ctime":1582448352,"is_pvip":false,"replies":[{"id":"70224","content":"会的，在19、20讲，会具体分析如何实现kv存储，比如，可以将“set key = value”作为指令，需要更改值的时候，提出一个新指令，例如“set key = value2”，在状态机执行后，就可以更key的值了，这时需要的是Multi-Paxos和状态机了。","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1582466974,"ip_address":"","comment_id":180950,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5877415648","product_id":100046101,"comment_content":"这里是只读KV，后面会分析可以修改的KV系统下的场景么？看到对有相同疑问的同学的回复里提到：<br>&quot;需要反复修改时，之前的共识是不能修改的，可以在之前的共识的基础之上，实现新的指令，在提交给状态机后，就可以修改value了。&quot;<br>我可以理解成这样嘛？：<br>假如针对一个X修改其值，要写成 [编号，(当前值，新值)] ? 当前值和新值整体作为一个值，套用到basic paxos流程中？","like_count":1,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484860,"discussion_content":"会的，在19、20讲，会具体分析如何实现kv存储，比如，可以将“set key = value”作为指令，需要更改值的时候，提出一个新指令，例如“set key = value2”，在状态机执行后，就可以更key的值了，这时需要的是Multi-Paxos和状态机了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582466974,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":180553,"user_name":"Purson","can_delete":false,"product_type":"c1","uid":1446120,"ip_address":"","ucode":"5F0C1BB3C0C0A2","user_header":"https://static001.geekbang.org/account/avatar/00/16/10/e8/ec11e306.jpg","comment_is_top":false,"comment_ctime":1582335935,"is_pvip":false,"replies":[{"id":"70115","content":"答案是7，在准备阶段是可以发现之前通过的值。","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1582385318,"ip_address":"","comment_id":180553,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5877303231","product_id":100046101,"comment_content":"前提：假设我们要实现一个分布式集群，这个集群是由节点 A、B、C 组成，提供只读 KV 存储服务。你应该知道，创建只读变量的时候，必须要对它进行赋值，而且这个值后续没办法修改。<br>准备阶段<br><br>1. 客户端3 分别发送[9,]到 A、B、C节点；<br>2. A、B节点收到[9,],因为已经通过了[5,7]，返回“已经通过提案”到客户端3；<br>3. C 节点收到[9,]，前面承诺不接受少于等于编号为5的提案，但是编号9的提案大于5，因此C返回“尚无提案”到客户端3<br><br>接受阶段<br>客户端3 收到来自A、B的两个“已经通过提案”消息，和C的“尚无提案”，但是2:1的节点表示提案已通过，代表大多数节点的意见，同时前提条件是这是一个KV存储服务，只读赋值后无法修改。因此，客户端3不会发起[9,6]的提案<br><br>所以结果还是7","like_count":1,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484709,"discussion_content":"答案是7，在准备阶段是可以发现之前通过的值。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582385318,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":357746,"user_name":"冬","can_delete":false,"product_type":"c1","uid":2440071,"ip_address":"四川","ucode":"C2ACD09659C176","user_header":"https://static001.geekbang.org/account/avatar/00/25/3b/87/96f62392.jpg","comment_is_top":false,"comment_ctime":1663595643,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1663595643","product_id":100046101,"comment_content":"请问一下“活锁”问题是什么，要怎么解决？  在网上看了很多，还是不太能理解","like_count":0},{"had_liked":false,"id":356260,"user_name":"once","can_delete":false,"product_type":"c1","uid":1170533,"ip_address":"安徽","ucode":"7026094E0B99BF","user_header":"https://static001.geekbang.org/account/avatar/00/11/dc/65/3da02c30.jpg","comment_is_top":false,"comment_ctime":1662090391,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1662090391","product_id":100046101,"comment_content":"老师 能说一下提案编号的生成规则吗? 是全局自增? 还是随机值这样","like_count":0},{"had_liked":false,"id":351325,"user_name":"冬","can_delete":false,"product_type":"c1","uid":2440071,"ip_address":"","ucode":"C2ACD09659C176","user_header":"https://static001.geekbang.org/account/avatar/00/25/3b/87/96f62392.jpg","comment_is_top":false,"comment_ctime":1657701021,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1657701021","product_id":100046101,"comment_content":"请问有源码demo吗？  有java的更好","like_count":0},{"had_liked":false,"id":337881,"user_name":"LJK","can_delete":false,"product_type":"c1","uid":1199213,"ip_address":"","ucode":"12B2441099FF1D","user_header":"https://static001.geekbang.org/account/avatar/00/12/4c/6d/c20f2d5a.jpg","comment_is_top":false,"comment_ctime":1647117871,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1647117871","product_id":100046101,"comment_content":"为什么在提议9中可以执行set x＝6呢？提议9的接收者响应中，promise时不是会带上x＝7，这样提议9只能执行x＝7了吗？","like_count":0},{"had_liked":false,"id":336789,"user_name":"SunshineBoy","can_delete":false,"product_type":"c1","uid":1160644,"ip_address":"","ucode":"FC54CD1815CCBA","user_header":"https://static001.geekbang.org/account/avatar/00/11/b5/c4/9148b40d.jpg","comment_is_top":false,"comment_ctime":1646366483,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"1646366483","product_id":100046101,"comment_content":"韩老师，paxos的一致性是强一致性还是最终一致性？","like_count":0},{"had_liked":false,"id":336698,"user_name":"张可夫斯基","can_delete":false,"product_type":"c1","uid":1076487,"ip_address":"","ucode":"3B8DF6D98583F2","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIKoEicqUZTJly55qoUXRmK4wia7YbnibsMncJaO6tKgKAQNJRfpMsibvfeiaukIibsCsuaic8QjQ3gOoTGA/132","comment_is_top":false,"comment_ctime":1646296830,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1646296830","product_id":100046101,"comment_content":"唉 应该把最后的接受者的三个承诺放在示例前面，并重点突出，不然不容易理解。","like_count":0},{"had_liked":false,"id":334662,"user_name":"newtypelv_9","can_delete":false,"product_type":"c1","uid":1508821,"ip_address":"","ucode":"512252E3A7718A","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLW0QsFv0sORDAvO96RDFCUuHvjEJ6icUILlh2W93Y9wCGnBGgznHe2a9icvIl0lwJhiadzvYedRJJRw/132","comment_is_top":false,"comment_ctime":1645064193,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1645064193","product_id":100046101,"comment_content":"还是不太理解思考题中为啥最终三个节点的值是7，感觉就是编号越高的值就应该覆盖之前的值。<br>现实情况下，三个节点， 其中一个节点接收到最新请求[9,y]，大于三个节点现有的[5,x]，那难道值就始终就是x？什么样的情况才能修改为y呢？","like_count":0},{"had_liked":false,"id":318783,"user_name":"akingbr","can_delete":false,"product_type":"c1","uid":2328626,"ip_address":"","ucode":"4D97A6AD4ED74E","user_header":"https://static001.geekbang.org/account/avatar/00/23/88/32/24c38281.jpg","comment_is_top":false,"comment_ctime":1635423342,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1635423342","product_id":100046101,"comment_content":"客户端和接受者有点晕，为啥客户端要发三次给接受者abc，如果把看客户端看成节点，那它为什么不参加协商？","like_count":0},{"had_liked":false,"id":318357,"user_name":"dobby","can_delete":false,"product_type":"c1","uid":2549097,"ip_address":"","ucode":"9C1992C4DD28F5","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoib6BjEV4KPEaIdlLEfoVFRCxCSlL2XaIVDiaakvjhWEibibym323ZeHXAY46JMO3nSHmjiaWtAY47eww/132","comment_is_top":false,"comment_ctime":1635255462,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1635255462","product_id":100046101,"comment_content":"老师请问那这个提案编号，一般采取什么算法来生成呢，这个编号按着basic paxos的实现逻辑应该是很有技巧性的呢","like_count":0},{"had_liked":false,"id":313312,"user_name":"严海波","can_delete":false,"product_type":"c1","uid":1264573,"ip_address":"","ucode":"8D4E230FD95383","user_header":"https://static001.geekbang.org/account/avatar/00/13/4b/bd/fe8c68b3.jpg","comment_is_top":false,"comment_ctime":1632373089,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1632373089","product_id":100046101,"comment_content":"这里有一个疑惑<br>如果准备请求的提案编号，小于等于接受者已经响应的准备请求的提案编号，那么接受者将承诺不响应这个准备请求<br>这里为什么等于是个条件，我在想如果接受者的确相应了准备请求的提案编号，但是发生了网络故障，相应消息并未送达，而建议者进行了消息重传，这种情况下，接受者应该是要相应的。但是我也很疑惑，假设多个请求者使用同一个提案编号，又如何去区分不同接受者的相同提案编号呢。所以我想记录提案编号的时候还要记录请求者，这样如果提案编号相同，如果是相同请求者，还需相应，不同请求者，就不相应。不知道对不对。","like_count":0},{"had_liked":false,"id":313266,"user_name":"Geek_8c4282","can_delete":false,"product_type":"c1","uid":1562826,"ip_address":"","ucode":"09E13C2DDBA48D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eq3opKxGyQia0CQibZU8If7Qv6ia3j4XiaWIdCHxrK0T3uZ5RVUSgwf0IJVRVt0wVLibryycTqv4VnEzbw/132","comment_is_top":false,"comment_ctime":1632358526,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1632358526","product_id":100046101,"comment_content":"二刷了，这次有了一些新的疑问：<br>1、为什么提案编号小于已经回复的过的编号就不响应？难道要客户端等待直到超时吗？这样latency会很大，我理解直接回复个错误码就好了嘛<br>2、提案编号是哪里生成的？跟物理机或容器绑死的？还是怎么样生成的？<br>希望老师回答下，感谢","like_count":0},{"had_liked":false,"id":306146,"user_name":"乘修","can_delete":false,"product_type":"c1","uid":1745932,"ip_address":"","ucode":"45FB065DDD94D3","user_header":"https://static001.geekbang.org/account/avatar/00/1a/a4/0c/be3ac2ca.jpg","comment_is_top":false,"comment_ctime":1628405919,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1628405919","product_id":100046101,"comment_content":"在接受阶段,如果出现某节点宕机,那么会出现数据不一致现象,这种情况,是否不在达成共识的算法解决范围内?","like_count":0},{"had_liked":false,"id":303968,"user_name":"cake","can_delete":false,"product_type":"c1","uid":1966533,"ip_address":"","ucode":"55A7FC6CC1204C","user_header":"https://static001.geekbang.org/account/avatar/00/1e/01/c5/b48d25da.jpg","comment_is_top":false,"comment_ctime":1627131247,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1627131247","product_id":100046101,"comment_content":"腾讯大佬 讲的真不错 哈哈哈看了书，看了哔哩哔哩视频，都没你好","like_count":0},{"had_liked":false,"id":301994,"user_name":"X中倪","can_delete":false,"product_type":"c1","uid":1418862,"ip_address":"","ucode":"F28FAFF2FEDD1A","user_header":"https://static001.geekbang.org/account/avatar/00/15/a6/6e/21907ff9.jpg","comment_is_top":false,"comment_ctime":1626012739,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1626012739","product_id":100046101,"comment_content":"回答上面的思考。如果有成员变更的情况下。 目前 A B 通过提案 和 提案值 【5，7】 客户端3 发送提案和提案值【9，6】 到C，假设 成员变更为。A B C D E F ，A B 虽然说返回了提案值，但是。A B C D E F 的提案值 都是 【9，6】，按照少数服从多数。最终的结果是否变为 【9，6】 而不是。【9.7】<br><br>分析：成员变更 新增成员 D E F<br>准备：<br>C 收到提案 9  ，作为提议者，通知 ABDEF 节点，AB 已经通过提案。返回 【9，7】 DEFC都没有提案值，那么返回的是 尚无提案，<br>接受阶段：ABCEDF 都接受了 【9，6】这个提案，最终的结果是否是 【9，6】。还是说 paxos 不支持成员变更的这个特性。","like_count":0},{"had_liked":false,"id":299762,"user_name":"牛牛","can_delete":false,"product_type":"c1","uid":1030135,"ip_address":"","ucode":"3FC01F8D66B2FB","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b7/f7/b2423197.jpg","comment_is_top":false,"comment_ctime":1624848965,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1624848965","product_id":100046101,"comment_content":"Basic Paxos维护的值不能变更，这个算法的意义在哪里呢，好像没有什么生产场景啊？不如直接预先初台化来的简单直接。","like_count":0},{"had_liked":false,"id":298222,"user_name":"天天向上","can_delete":false,"product_type":"c1","uid":1031113,"ip_address":"","ucode":"5948D359734193","user_header":"https://static001.geekbang.org/account/avatar/00/0f/bb/c9/37924ad4.jpg","comment_is_top":false,"comment_ctime":1623972728,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1623972728","product_id":100046101,"comment_content":"1-3-2-3","like_count":0},{"had_liked":false,"id":294150,"user_name":"xingshouzhyan","can_delete":false,"product_type":"c1","uid":2051062,"ip_address":"","ucode":"BFDD6987C12F68","user_header":"","comment_is_top":false,"comment_ctime":1621786152,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1621786152","product_id":100046101,"comment_content":"老师，byrne的问题麻烦你说具体点呀，感觉有这个问题，你这上面的图都不成立。这样已将，给我的感觉是Basic-paxos有bug一下，还是说你在这个地方没有将清楚呀。怎么能一句重试就能带过去呢？你这样将，给我的感觉是basic-paxos有bug，让我后面的文章都看不下去了，应为下面的东西都是建立在这个错误的知识上的。希望老师要是看到了我的问题，明确的回答一下。<br>顺便一说，这个要是异常，那上面的消息先后到达的分析还有什么意义。实际情况就是可能出现byrne说的场景呀","like_count":0},{"had_liked":false,"id":293520,"user_name":"夏风","can_delete":false,"product_type":"c1","uid":1496195,"ip_address":"","ucode":"EEF37E75FBBA8A","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJrgpv3Kia5Iw2kmg2rV4PSReiaic8d0Dj93XPlJaNpPRPC2xAIS22PQerSxb0cgjChSGAEOyX4tJBCQ/132","comment_is_top":false,"comment_ctime":1621416046,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1621416046","product_id":100046101,"comment_content":"A、B、C都已通过了提案[5,7]，按照这个承诺&quot;如果接受者之前有通过提案，那么接受者将承诺，会在准备请求的响应中，包含已经通过的最大编号的提案信息。&quot;，后续不管编号怎么变化，值都是7吗？","like_count":0,"discussions":[{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375832,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855215,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":292643,"user_name":"夏风","can_delete":false,"product_type":"c1","uid":1496195,"ip_address":"","ucode":"EEF37E75FBBA8A","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJrgpv3Kia5Iw2kmg2rV4PSReiaic8d0Dj93XPlJaNpPRPC2xAIS22PQerSxb0cgjChSGAEOyX4tJBCQ/132","comment_is_top":false,"comment_ctime":1620909700,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1620909700","product_id":100046101,"comment_content":"多个客户端同一时间针对同一个数据进行修改的情况，理解这点很重要<br>1、准备阶段<br>客户端3作为提议者发送序号为9的提议[9,null]，A、B收到后修改自己的最大编号为9，并把最新接受的数据[5,7]返回，C接受提议，返回尚无接收值。<br>2、提交阶段<br>提议者收到A、B、C返回的数据，找到最大编号对应的值为7(为了就某一个值快速达成共识，选择最快达成共识的方式)，组装数据[9,7]给到A、B、C<br>","like_count":0,"discussions":[{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375833,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855221,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":284949,"user_name":"叶落风行","can_delete":false,"product_type":"c1","uid":1221391,"ip_address":"","ucode":"8CE594ED9B2001","user_header":"https://static001.geekbang.org/account/avatar/00/12/a3/0f/a5839c1d.jpg","comment_is_top":false,"comment_ctime":1616556055,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1616556055","product_id":100046101,"comment_content":"接受者节点之间是否有通信呢？<br>假设客户端二阶段发送给A、B【5,7】提案时，客户端与节点B出现网络中断情况，这时只有节点A通过提案，最终就不会是多数节点通过提案了，那么客户端3的提案【9,6】就会是最终的的结果。","like_count":0,"discussions":[{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375834,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855225,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":275758,"user_name":"Geek_b52974","can_delete":false,"product_type":"c1","uid":1298252,"ip_address":"","ucode":"59884399646620","user_header":"","comment_is_top":false,"comment_ctime":1611661129,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"1611661129","product_id":100046101,"comment_content":"<br>提案的编号由client 送出，若是比较大小，表示编号包含时间的资讯，那不由 client 发起 node 回传编号，node  再使用此编号传递值提给其他接受者，以及回传给client，是不是更准确？","like_count":0,"discussions":[{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375835,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855228,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":274730,"user_name":"Geek_森","can_delete":false,"product_type":"c1","uid":1972836,"ip_address":"","ucode":"FC5D51B6CA8620","user_header":"https://static001.geekbang.org/account/avatar/00/1e/1a/64/36f511e0.jpg","comment_is_top":false,"comment_ctime":1611138178,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1611138178","product_id":100046101,"comment_content":"个人理解的下面的题解有问题：我的理解是这样的，求楼主解答，如果每次的新提议的接受请求阶段 都是以 准备请求通过的上一次的通过提议的值作为 接受请求的请求值，那么是不是我的理解是第一次 达成共识以后，后续不管多少轮提议值都是不变的啊，这不明显错了吗？<br>举个例子：<br>第一轮 初始化的提议  （1，3）被ABC三个节点采纳。<br>第二轮：提议（2，5），在准备阶段 根据承诺三个节点都会响应（1，3),那么按照接受阶段&quot;当客户端 1 收到大多数的接受者（节点 A、B）的准备响应后，根据响应中提案编号最大的提案的值，设置接受请求中的值。&quot;的说法，接受请求应该是（2，3），而且这个请求会被通过。<br>如此王法那么值岂不是永远不会变？<br><br>","like_count":0,"discussions":[{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375836,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855232,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":273799,"user_name":"BD","can_delete":false,"product_type":"c1","uid":1228560,"ip_address":"","ucode":"A95CF8C3EDC228","user_header":"https://static001.geekbang.org/account/avatar/00/12/bf/10/b7974690.jpg","comment_is_top":false,"comment_ctime":1610681217,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1610681217","product_id":100046101,"comment_content":"有个疑问，如果准备阶段由于网络原因导致了接受者节点C没收到客户端2的准请求，在接受阶段，提议者1的接受请求到达了接受者节点C，此时接收者节点C会通过提议者1的提案，那么在接下来提议者2的接受阶段请求到达节点C时节点C是直接丢弃吗","like_count":0,"discussions":[{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375837,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855235,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":273143,"user_name":"凯瑞杨","can_delete":false,"product_type":"c1","uid":2254016,"ip_address":"","ucode":"199526B3F2DFC6","user_header":"https://static001.geekbang.org/account/avatar/00/22/64/c0/66d8e252.jpg","comment_is_top":false,"comment_ctime":1610455038,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1610455038","product_id":100046101,"comment_content":"还有一个问题，就是提议者一般都是集群内的某个节点吧？并不是客户端？  实际上不同客户端可以将请求发送给集群内的任何其中一个提议者？ 实际上paxos与raft的区别，就是paxos是支持多写的？ 而raft是将所有的写请求都需要往一个领导者节点上发？","like_count":0,"discussions":[{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375838,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855239,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":273140,"user_name":"凯瑞杨","can_delete":false,"product_type":"c1","uid":2254016,"ip_address":"","ucode":"199526B3F2DFC6","user_header":"https://static001.geekbang.org/account/avatar/00/22/64/c0/66d8e252.jpg","comment_is_top":false,"comment_ctime":1610454712,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1610454712","product_id":100046101,"comment_content":"有个疑问，在实现层面上，在整个分布式系统下，提案号是怎么保证全局递增的，如果两个客户端给了一样的提案号，但是值不一样不就会有问题么？","like_count":0,"discussions":[{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375839,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855243,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":262663,"user_name":"hao","can_delete":false,"product_type":"c1","uid":1148845,"ip_address":"","ucode":"997F2B57E2F556","user_header":"https://static001.geekbang.org/account/avatar/00/11/87/ad/50a85a04.jpg","comment_is_top":false,"comment_ctime":1605797176,"is_pvip":false,"replies":[{"id":"95467","content":"“被learner提交了”是指什么呢？方便补充下吗？感谢:)","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1606011626,"ip_address":"","comment_id":262663,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1605797176","product_id":100046101,"comment_content":"如果节点 A、B 已经通过了提案[5, 7] ，此时被learner提交了呢","like_count":0,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":509918,"discussion_content":"“被learner提交了”是指什么呢？方便补充下吗？感谢:)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606011626,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375840,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855246,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":249167,"user_name":"ezekiel","can_delete":false,"product_type":"c1","uid":1158795,"ip_address":"","ucode":"AB4AB6FA8612D8","user_header":"https://static001.geekbang.org/account/avatar/00/11/ae/8b/43ce01ca.jpg","comment_is_top":false,"comment_ctime":1600490480,"is_pvip":false,"replies":[{"id":"96272","content":"加一颗星:)，因为，三节点集群只有一个节点接受了[5, 7]，不满足“大多数”原则，所以，这个值可能会被发现，也可能不会被发现。只有被“大多数”节点接受的值，一定会被发现，一定不再变化。","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1606797768,"ip_address":"","comment_id":249167,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1600490480","product_id":100046101,"comment_content":"看了这篇，让我想明白了以前的一些问题！<br>但是看评论区中您的回复说，“在准备阶段可以发现之前通过的值”<br>我有一个疑问，如果 A通过提案【5，7】，B和C的提案在路上<br>新的客户端3发来请求，B和C收到了，A没有收到。<br>B和C返回客户端3，满足大多数，客户端3提交请求。这样的话是无法发现之前的提案呀？","like_count":0,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":505856,"discussion_content":"加一颗星:)，因为，三节点集群只有一个节点接受了[5, 7]，不满足“大多数”原则，所以，这个值可能会被发现，也可能不会被发现。只有被“大多数”节点接受的值，一定会被发现，一定不再变化。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606797768,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375842,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855254,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":244001,"user_name":"路人","can_delete":false,"product_type":"c1","uid":1084291,"ip_address":"","ucode":"55FF703DE772D7","user_header":"https://static001.geekbang.org/account/avatar/00/10/8b/83/d2afc837.jpg","comment_is_top":false,"comment_ctime":1598349215,"is_pvip":false,"replies":[{"id":"96355","content":"加一颗星:)，与实现有关，可以设计算法来避免，比如Raft引入随机超时时间，来避免候选人的任期编号相同。","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1606822122,"ip_address":"","comment_id":244001,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1598349215","product_id":100046101,"comment_content":"问一下，不同的提议者编号会不会重复？","like_count":0,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504448,"discussion_content":"加一颗星:)，与实现有关，可以设计算法来避免，比如Raft引入随机超时时间，来避免候选人的任期编号相同。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606822122,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375843,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855259,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":241276,"user_name":"Heaven","can_delete":false,"product_type":"c1","uid":1694207,"ip_address":"","ucode":"FA33FBCC66C911","user_header":"https://static001.geekbang.org/account/avatar/00/19/d9/ff/b23018a6.jpg","comment_is_top":false,"comment_ctime":1597234792,"is_pvip":false,"replies":[{"id":"95925","content":"加一颗星:)","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1606565008,"ip_address":"","comment_id":241276,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1597234792","product_id":100046101,"comment_content":"https:&#47;&#47;uploader.shimo.im&#47;f&#47;kReqb8UFIrRJXTM4.png <br>试着画了个图说明了下课后思考,看了留言的大佬们,加上了些注解,嘻嘻","like_count":0,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":503693,"discussion_content":"加一颗星:)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606565008,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375844,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855263,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":237125,"user_name":"战斗机二虎🐯","can_delete":false,"product_type":"c1","uid":1157201,"ip_address":"","ucode":"8AB69AD2D76784","user_header":"https://static001.geekbang.org/account/avatar/00/11/a8/51/46a788b1.jpg","comment_is_top":false,"comment_ctime":1595684092,"is_pvip":false,"replies":[{"id":"88086","content":"加一颗星:)，因为提案编号5大于提案编号1，那么节点A将通过来自客户端B的提案[5, 7]，即，最终三节点的X都为5。","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1596176151,"ip_address":"","comment_id":237125,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1595684092","product_id":100046101,"comment_content":"如果客户端A提案[1,3]，客户端B提案[5,7]，1和2节点准备请求阶段返回准备响应（尚无提案），然后客户端A发送接收请求给节点1和2，同时客户端B发送准备请求给1和2和3，1节点先收到了A的接受请求，更新了X的值，2节点先收到了B的准备请求，再收到了A的接受请求，不更新X的值，这时候1节点的X的值更新了，但是A客户端收到更新失败请求，分布式系统中出现了数据不一致，这怎么解决？","like_count":0,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":502307,"discussion_content":"加一颗星:)，因为提案编号5大于提案编号1，那么节点A将通过来自客户端B的提案[5, 7]，即，最终三节点的X都为5。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596176151,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375845,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855267,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1228560,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/10/b7974690.jpg","nickname":"BD","note":"","ucode":"A95CF8C3EDC228","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":342461,"discussion_content":"意思就是说如果一个接受者节点之前已经通过了一个提案，但是如果再次收到一个接受请求编号比自己的最大编号还大，那就会更新自己的值？那会不会就有可能打破了共识过的值不能修改的承诺呢？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610688019,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":232929,"user_name":"爱德华","can_delete":false,"product_type":"c1","uid":1853638,"ip_address":"","ucode":"800E6A9490D90F","user_header":"https://static001.geekbang.org/account/avatar/00/1c/48/c6/3c8d9a0c.jpg","comment_is_top":false,"comment_ctime":1594170705,"is_pvip":false,"replies":[{"id":"88072","content":"加一颗星:)，[3, 5]，因为在C接收到准备请求的响应中，提案编号最大的响应是来自SERV5的[2, 5]。","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1596160723,"ip_address":"","comment_id":232929,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1594170705","product_id":100046101,"comment_content":"韩老师，请教个问题，情况如下<br><br>假如有三个提案者A, B, C，五个接受者SERV1, SERV2, SERV3, SERV4, SERV5<br>A提案编号为1，值为3<br>B提案编号为2，值为5<br>C提案编号为3，值为8<br><br>①A第一阶段发给SERV1, SERV2, SERV3获得回应，赢得半数选票<br>②B开始第一阶段，获得SERV3, SERV4, SERV5的选票<br>③A开始第二阶段，发给SERV1值为3的提案后，SERV1允许提交该值，此时A宕机<br>④B开始第二阶段，发给SERV5值为5的提案后，SERV5允许提交该值，此时B宕机<br>⑤C开始第一阶段，获得SERV1, SERV2, SERV5的选票，根据规定，它将收到SERV1接受的值为3，SERV5接受的值为5。<br>那C的第二阶段提案应该是[3, 3]还是[3, 5]呢？","like_count":0,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":500815,"discussion_content":"加一颗星:)，[3, 5]，因为在C接收到准备请求的响应中，提案编号最大的响应是来自SERV5的[2, 5]。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596160723,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375846,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855273,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1853638,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/48/c6/3c8d9a0c.jpg","nickname":"爱德华","note":"","ucode":"800E6A9490D90F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":289826,"discussion_content":"应该是[3，5]，在prepare响应中收到多个已批准的提案时，会选择提案编号最大的那个提案值作为自己的accept请求的提案值","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594220837,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":230973,"user_name":"Geek_e6d636","can_delete":false,"product_type":"c1","uid":2050267,"ip_address":"","ucode":"66790154C84F6C","user_header":"","comment_is_top":false,"comment_ctime":1593536394,"is_pvip":false,"replies":[{"id":"87633","content":"加一颗星:)，设置不成功的，因为按照算法约定，在准备阶段会发现之前通过提案的值（7），那么，在接下来的接受请求中，将使用值7，而不是6。","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1595750925,"ip_address":"","comment_id":230973,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1593536394","product_id":100046101,"comment_content":"老师，我不太懂，最后编号9设置6，难道就设置不成功吗","like_count":0,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":500097,"discussion_content":"加一颗星:)，设置不成功的，因为按照算法约定，在准备阶段会发现之前通过提案的值（7），那么，在接下来的接受请求中，将使用值7，而不是6。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595750925,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375847,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855277,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":227940,"user_name":"Laputa","can_delete":false,"product_type":"c1","uid":1079345,"ip_address":"","ucode":"64C157042CF138","user_header":"https://static001.geekbang.org/account/avatar/00/10/78/31/c7f8d1db.jpg","comment_is_top":false,"comment_ctime":1592528826,"is_pvip":false,"replies":[{"id":"87819","content":"加一颗星:)，这个时候，就需要引入领导者了，具体原理，可参考06讲的兰伯特的Multi-Paxos，和07、08、09讲的Raft。","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1595937006,"ip_address":"","comment_id":227940,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1592528826","product_id":100046101,"comment_content":"老师的讲解感觉多个key同时赋值的共识过程是串行的，实际的实现上应该不会只根据提案编号来决定是否接受提案吧？以文中的kv存储为例，提案编号是不是应该和key进行关联，即一次共识过程是基于key的，不同key的共识过程是可以并行的，不知道具体的实现是怎样的？","like_count":0,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":498849,"discussion_content":"加一颗星:)，这个时候，就需要引入领导者了，具体原理，可参考06讲的兰伯特的Multi-Paxos，和07、08、09讲的Raft。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595937006,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375848,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855282,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":227796,"user_name":"贰的11次方","can_delete":false,"product_type":"c1","uid":1813810,"ip_address":"","ucode":"73299BAA100131","user_header":"https://static001.geekbang.org/account/avatar/00/1b/ad/32/8d4ca29e.jpg","comment_is_top":false,"comment_ctime":1592482738,"is_pvip":false,"replies":[{"id":"87818","content":"加一颗星:)，在接下来的接受请求中，将使用准备响应中提案编号最大的那个提案的值。","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1595936509,"ip_address":"","comment_id":227796,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1592482738","product_id":100046101,"comment_content":"请问老师 “根据响应中提案编号最大的提案的值，设置接受请求中的值“，这句话怎么理解。你据的例子都是无提案的请求，如果准备响应中有响应某个提案值呢，是怎么决议的","like_count":0,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":498784,"discussion_content":"加一颗星:)，在接下来的接受请求中，将使用准备响应中提案编号最大的那个提案的值。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595936509,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375849,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855287,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1228560,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/10/b7974690.jpg","nickname":"BD","note":"","ucode":"A95CF8C3EDC228","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":342444,"discussion_content":"感觉有问题吧，如果一个接受者节点因为网络原因没收到提议者2的准备请求，那么就会在接受阶段接受提议者1的接受请求并通过[1,3]的值，而A B节点正常通过提议者2的接受请求通过[5,7]的提案，那么在后面客户端3的准备请求的响应中就会收到两个7和一个3，这时候客户端3会根据多数原则把自己的值设置成7再发起接受请求？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610682000,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":224517,"user_name":"superfq","can_delete":false,"product_type":"c1","uid":1033472,"ip_address":"","ucode":"37B45E9018F14F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c5/00/37ef050e.jpg","comment_is_top":false,"comment_ctime":1591427088,"is_pvip":true,"replies":[{"id":"87278","content":"加一颗星:)，每个节点自己负责产生的，论文提到了思路，独立、递增、存储在可靠性设备中。具体细节实现，可以参考Hashicorp Raft的CurrentTerm的实现（Raft.setCurrentTerm()、raftState.getCurrentTerm()、raftState.setCurrentTerm()），原子、递增、持久存储。不推荐集中的提案号服务，将系统复杂化了。","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1595347235,"ip_address":"","comment_id":224517,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1591427088","product_id":100046101,"comment_content":"请问老师，提案号产生是每个client自己负责产生还是由一个集中的提案号服务负责产生？如果是集中的提案号服务，这个服务本身的高可用和高性能如何保证？","like_count":0,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497505,"discussion_content":"加一颗星:)，每个节点自己负责产生的，论文提到了思路，独立、递增、存储在可靠性设备中。具体细节实现，可以参考Hashicorp Raft的CurrentTerm的实现（Raft.setCurrentTerm()、raftState.getCurrentTerm()、raftState.setCurrentTerm()），原子、递增、持久存储。不推荐集中的提案号服务，将系统复杂化了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595347235,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375850,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855291,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":224129,"user_name":"LiuHu","can_delete":false,"product_type":"c1","uid":1039768,"ip_address":"","ucode":"284E2025C554BB","user_header":"https://static001.geekbang.org/account/avatar/00/0f/dd/98/883c42b4.jpg","comment_is_top":false,"comment_ctime":1591280957,"is_pvip":false,"replies":[{"id":"87001","content":"加一颗星:)，赞！","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1595093347,"ip_address":"","comment_id":224129,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1591280957","product_id":100046101,"comment_content":"用时序图的方式画了一个 Paxos  如何解决冲突达成一致的图: https:&#47;&#47;www.processon.com&#47;view&#47;link&#47;5ed89d5e1e0853199b4ee193<br>欢迎指正呀～","like_count":0,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497371,"discussion_content":"加一颗星:)，赞！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595093347,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375851,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855295,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":221423,"user_name":"苗苗","can_delete":false,"product_type":"c1","uid":1108878,"ip_address":"","ucode":"55FC603C1DB45D","user_header":"https://static001.geekbang.org/account/avatar/00/10/eb/8e/f73c54f0.jpg","comment_is_top":false,"comment_ctime":1590497000,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1590497000","product_id":100046101,"comment_content":"1、Paxos通过二阶段提交方式达成共识<br>2、Paxos通过大多数节点同意达成容错<br>3、在准备请求中，接受这只响应大于自己的提案编号，在响应中包含已通过的最大提案编号信息（提案编号、提案值）<br>4、在接受请求中，接受者只通过大于或等于自己的提案编号，并且在接受请求中的值为准备相应中包含的已通过的最大提案编号信息的值","like_count":0,"discussions":[{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375852,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855300,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":219337,"user_name":"cp★钊","can_delete":false,"product_type":"c1","uid":1275690,"ip_address":"","ucode":"6B86D4D538BDF7","user_header":"https://static001.geekbang.org/account/avatar/00/13/77/2a/244d98aa.jpg","comment_is_top":false,"comment_ctime":1589991506,"is_pvip":false,"replies":[{"id":"86543","content":"加一颗星:)，觉得哪里难理解呢？或者理解起来，卡在哪里呢？期待你的反馈哈:)","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1594742021,"ip_address":"","comment_id":219337,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1589991506","product_id":100046101,"comment_content":"第一次看老师这篇文章没看懂，去找了原论文了解后再来看就懂了😂","like_count":0,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":495772,"discussion_content":"加一颗星:)，觉得哪里难理解呢？或者理解起来，卡在哪里呢？期待你的反馈哈:)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594742021,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375855,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855308,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":217859,"user_name":"注意力$","can_delete":false,"product_type":"c1","uid":1142316,"ip_address":"","ucode":"7FB3399A1EAB72","user_header":"https://static001.geekbang.org/account/avatar/00/11/6e/2c/e2f3cfc0.jpg","comment_is_top":false,"comment_ctime":1589632893,"is_pvip":false,"replies":[{"id":"80706","content":"加一颗星:)，在演示中，是因为接收到了提案编号为1的准备请求，所以，就不再响应了。下次响应的准备请求，它包含的提案编号必须大于1.","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1589768603,"ip_address":"","comment_id":217859,"utype":1}],"discussion_count":2,"race_medal":1,"score":"1589632893","product_id":100046101,"comment_content":"老师，在准备阶段 为什么承诺以后不再响应提案编号小于等于 1 的准备请求，准备请求是从几开始的？有些不理解","like_count":0,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":495276,"discussion_content":"加一颗星:)，在演示中，是因为接收到了提案编号为1的准备请求，所以，就不再响应了。下次响应的准备请求，它包含的提案编号必须大于1.","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589768603,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375856,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855312,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":208123,"user_name":"QQ怪","can_delete":false,"product_type":"c1","uid":1211223,"ip_address":"","ucode":"1A39B8433D9208","user_header":"https://static001.geekbang.org/account/avatar/00/12/7b/57/a9b04544.jpg","comment_is_top":false,"comment_ctime":1587281796,"is_pvip":false,"replies":[{"id":"77703","content":"加油！多交流:)","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1587301188,"ip_address":"","comment_id":208123,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1587281796","product_id":100046101,"comment_content":"终于懂了","like_count":0,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":492349,"discussion_content":"加油！多交流:)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587301188,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375857,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855317,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":207752,"user_name":"爱德华","can_delete":false,"product_type":"c1","uid":1853638,"ip_address":"","ucode":"800E6A9490D90F","user_header":"https://static001.geekbang.org/account/avatar/00/1c/48/c6/3c8d9a0c.jpg","comment_is_top":false,"comment_ctime":1587174516,"is_pvip":false,"replies":[{"id":"77603","content":"加一颗星:)，这个问题，是需要避免的，在极端情况下，可能会出现2个提议者反复失败、重试、无法达成共识，比如，可以通过引入随机超时来解决这个问题。怎么处理C、A节点，与实现有关了，需要我们注意的是，要保证已达成共识后的值，就不再改变了，也就值6不能被改变，比如，可以这样，节点A的接受请求出错，继续重试，发起新一轮的Basic Paxos，提案编号递增，也就是2，这次会因为无法接收到大多数的准备响应而协商失败、超时，这时继续重试，发起新一轮的Basic Paxos，提案编号递增，也就是3，这时会发现之前被接受的值6，然后发起接受请求&lt;3, 6&gt;,最终，节点C、A的值也变成6了。","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1587220785,"ip_address":"","comment_id":207752,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1587174516","product_id":100046101,"comment_content":"对于paxos有一个问题，想请教下，辛苦有时间帮我解答下。就是两个提案并发提出的情况<br><br>A节点进入paxos第二阶段，发送提案(1,3)在本身同意该提案后，发给C节点和其他半数以上的节点，C节点也修改成功，但是其余节点在收到这个请求之前。<br><br><br>其他半数以上节点(不包含C,A节点)收到来自B节点的准备阶段的提案编号为2的请求，并接受该提案准备请求。<br><br>那么这时A节点的提案(1,3)理论上就会修改失败，然后重新进去第一阶段。<br><br>这时B节点开始第二阶段，因为第一阶段半数以上的节点不包含C和A节点，所以提案值可以任意修改成6。那么B节点将提案(2,6)发给半数以上的节点(不包含C和A节点）这时该半数节点成功修改。<br><br>到此为止，情况如下，集群中半数节点值为6，C和A节点值为3。<br><br>那么在接下来的情况中，C和A节点应该怎么处理？集群直接抛弃掉C和A节点，还是需要用其他的算法使C和A节点数据变成6？","like_count":0,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":492230,"discussion_content":"加一颗星:)，这个问题，是需要避免的，在极端情况下，可能会出现2个提议者反复失败、重试、无法达成共识，比如，可以通过引入随机超时来解决这个问题。怎么处理C、A节点，与实现有关了，需要我们注意的是，要保证已达成共识后的值，就不再改变了，也就值6不能被改变，比如，可以这样，节点A的接受请求出错，继续重试，发起新一轮的Basic Paxos，提案编号递增，也就是2，这次会因为无法接收到大多数的准备响应而协商失败、超时，这时继续重试，发起新一轮的Basic Paxos，提案编号递增，也就是3，这时会发现之前被接受的值6，然后发起接受请求&amp;lt;3, 6&amp;gt;,最终，节点C、A的值也变成6了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587220785,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375858,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855322,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1853638,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/48/c6/3c8d9a0c.jpg","nickname":"爱德华","note":"","ucode":"800E6A9490D90F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":240164,"discussion_content":"这样的话，还存在一个问题，节点A继续发起paxos，确实能将自己的值变为6，但是要是节点A发起的paxos，其多数集都不包含节点C，那节点C的值也修改不了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587344437,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":204204,"user_name":"cbping","can_delete":false,"product_type":"c1","uid":1608798,"ip_address":"","ucode":"16D891E80A352B","user_header":"https://static001.geekbang.org/account/avatar/00/18/8c/5e/8cb6fad1.jpg","comment_is_top":false,"comment_ctime":1586350859,"is_pvip":false,"replies":[{"id":"76357","content":"加一颗星:)，更确切的说是，当大多数节点就值达成共识后，值就不会再变了。","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1586371181,"ip_address":"","comment_id":204204,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1586350859","product_id":100046101,"comment_content":"当所有节点都接受了提案，是不是后面不再可以改值了呢？","like_count":0,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":491102,"discussion_content":"加一颗星:)，更确切的说是，当大多数节点就值达成共识后，值就不会再变了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586371181,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375859,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855326,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":197389,"user_name":"李鑫磊","can_delete":false,"product_type":"c1","uid":1101615,"ip_address":"","ucode":"D06517CFCEEE00","user_header":"https://static001.geekbang.org/account/avatar/00/10/cf/2f/4f89f22a.jpg","comment_is_top":false,"comment_ctime":1585372821,"is_pvip":false,"replies":[{"id":"75994","content":"加一颗星:)，可以这么理解。","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1586194978,"ip_address":"","comment_id":197389,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1585372821","product_id":100046101,"comment_content":"虽然提案号 n 是单调递增的，但是 Acceptor 应该是能知道提交过来的提案 [n, v] 是针对哪个议题<br>（比如 x = ?）的，每个 Acceptor 应该有维护一个 &lt;议题, 针对该议题承诺通过的最小提案号&gt;，不知道这样的理解是否正确？","like_count":0,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":489510,"discussion_content":"加一颗星:)，可以这么理解。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586194978,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375860,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855329,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":196012,"user_name":"W.G.Ma","can_delete":false,"product_type":"c1","uid":1349798,"ip_address":"","ucode":"3518F2058023F4","user_header":"https://static001.geekbang.org/account/avatar/00/14/98/a6/41394d63.jpg","comment_is_top":false,"comment_ctime":1585230426,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1585230426","product_id":100046101,"comment_content":"接受者喜新厌旧，提议者后者认同前者","like_count":0,"discussions":[{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375861,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855332,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":193368,"user_name":"桂冠远航","can_delete":false,"product_type":"c1","uid":1155463,"ip_address":"","ucode":"5959E1A1DAA05D","user_header":"https://static001.geekbang.org/account/avatar/00/11/a1/87/259ab5a3.jpg","comment_is_top":false,"comment_ctime":1584891134,"is_pvip":false,"replies":[{"id":"75566","content":"感谢，多交流:)。","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1585936691,"ip_address":"","comment_id":193368,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1584891134","product_id":100046101,"comment_content":"顶作者。","like_count":0,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488549,"discussion_content":"感谢，多交流:)。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585936691,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375862,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855337,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":190026,"user_name":"dream","can_delete":false,"product_type":"c1","uid":1117793,"ip_address":"","ucode":"65B33D32FA8BE9","user_header":"https://static001.geekbang.org/account/avatar/00/11/0e/61/ae68f8eb.jpg","comment_is_top":false,"comment_ctime":1584595177,"is_pvip":false,"replies":[{"id":"77537","content":"加一颗星:)，需要提议者维护的，递增、存储在可靠性设备中。","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1587130092,"ip_address":"","comment_id":190026,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1584595177","product_id":100046101,"comment_content":"客户端的提案编号是怎么来的呢？","like_count":0,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":487857,"discussion_content":"加一颗星:)，需要提议者维护的，递增、存储在可靠性设备中。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587130092,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375863,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855340,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":189730,"user_name":"hao","can_delete":false,"product_type":"c1","uid":1743447,"ip_address":"","ucode":"1491E144AEC93F","user_header":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIHnnNRhRvtictcpvDrFn7XC1NRFQTz2j6mnntR03eRyibqFVS8DrNCy7EDuaAM6wLn8hAUs7Hcvibbg/132","comment_is_top":false,"comment_ctime":1584543625,"is_pvip":false,"replies":[{"id":"75711","content":"什么状态呢？:)","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1586020178,"ip_address":"","comment_id":189730,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1584543625","product_id":100046101,"comment_content":"大多数节点就某个值达成共识，这个状态保存在哪呢","like_count":0,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":487777,"discussion_content":"什么状态呢？:)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586020178,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375865,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855344,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":187972,"user_name":"阿凯啊","can_delete":false,"product_type":"c1","uid":1048218,"ip_address":"","ucode":"781D46376B67DE","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fe/9a/791d0f5e.jpg","comment_is_top":false,"comment_ctime":1584285822,"is_pvip":false,"replies":[{"id":"76028","content":"加一颗星:)，[9, 7]。","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1586204549,"ip_address":"","comment_id":187972,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1584285822","product_id":100046101,"comment_content":"老师，留得题目。客户端3，收到了abc的响应之后，他该发起什么样的接受请求？","like_count":0,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":487307,"discussion_content":"加一颗星:)，[9, 7]。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586204549,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375866,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855347,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":184653,"user_name":"L!en6o","can_delete":false,"product_type":"c1","uid":1054472,"ip_address":"","ucode":"E0931CB8998260","user_header":"https://static001.geekbang.org/account/avatar/00/10/17/08/566fb246.jpg","comment_is_top":false,"comment_ctime":1583377905,"is_pvip":false,"replies":[{"id":"71420","content":"加一颗星:)，开心~","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1583387750,"ip_address":"","comment_id":184653,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1583377905","product_id":100046101,"comment_content":"终于懂了。。。。","like_count":0,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":486081,"discussion_content":"加一颗星:)，开心~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583387750,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375867,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855353,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":183188,"user_name":"Geek_niu","can_delete":false,"product_type":"c1","uid":1856903,"ip_address":"","ucode":"9C02ACC12F2D4B","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Uv4icib4ZLZVa4RTW7CUibJAh6h23IPM5eiaibKzlmZfxWPWibUmAmxmnpafsesQiazcy5TtghOFwaMgppv58gbAgnRicA/132","comment_is_top":false,"comment_ctime":1582968779,"is_pvip":false,"replies":[{"id":"70910","content":"接收到大多数准备响应的那个客户端，它发起的提案值，是达成共识的值。","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1582991303,"ip_address":"","comment_id":183188,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1582968779","product_id":100046101,"comment_content":"按照这个逻辑，当客户端1和客户端2同时发出一件事情提案，最终达成协议的一定是客户端2发出的提案结果？不是很理解","like_count":0,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":485589,"discussion_content":"接收到大多数准备响应的那个客户端，它发起的提案值，是达成共识的值。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582991303,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375868,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855357,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1856903,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Uv4icib4ZLZVa4RTW7CUibJAh6h23IPM5eiaibKzlmZfxWPWibUmAmxmnpafsesQiazcy5TtghOFwaMgppv58gbAgnRicA/132","nickname":"Geek_niu","note":"","ucode":"9C02ACC12F2D4B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":190767,"discussion_content":"还有二阶段提交的主要原因是什么？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582976372,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":182570,"user_name":"Daiver","can_delete":false,"product_type":"c1","uid":1466447,"ip_address":"","ucode":"9B1A03AFBC79BC","user_header":"https://static001.geekbang.org/account/avatar/00/16/60/4f/db0e62b3.jpg","comment_is_top":false,"comment_ctime":1582810040,"is_pvip":false,"replies":[{"id":"70658","content":"加油！有疑问，多留言，咱们一起讨论:)","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1582826119,"ip_address":"","comment_id":182570,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1582810040","product_id":100046101,"comment_content":"看了三遍，终于看懂了。","like_count":0,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":485373,"discussion_content":"加油！有疑问，多留言，咱们一起讨论:)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582826119,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375869,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855361,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":182010,"user_name":"looper","can_delete":false,"product_type":"c1","uid":1299572,"ip_address":"","ucode":"BF60C93A515DAB","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJf3aXIOYKbJq6WicnrPMgm5CpXVBuaWS6UibLUia4ib3QAeUrXvtYdYUfOkaJnics5ME6HlNdic92Ap1hA/132","comment_is_top":false,"comment_ctime":1582691819,"is_pvip":false,"replies":[{"id":"77556","content":"加一颗星:)，1)，有多种情况，演示的是其中的一种情况，应该是[1, 3]，这是已经通过的最大编号的提案信息。<br>2)，这里为了演示方便，将提议者和接受者分开了，客户端作为提议者，集群的节点作为接受者。执行了相关功能，就扮演了相关的角色，这个是咱们在实现系统时，可以自定义的，比如，一个节点，可以只是接受者，也可以同时作为提议者和接受者。<br>3)，这个与实现有关，比如，可以设置初始值为1，如果我们实现了递增、持久存储，并引入随机超时，就能避免因提案编号相同，投票被瓜分的情况，最终是能达成共识的。","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1587144876,"ip_address":"","comment_id":182010,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1582691819","product_id":100046101,"comment_content":"跟着老师的讲述，一步步，反复看了多遍，每次都能看懂，看完又忘记了。于是，自己仔细的琢磨一番，有些疑问和不解，望老师能在百忙之中，抽空解答。<br>1）从图5上看，客户端1已经收到了大多数Acceptor对提案[1,]准备响应（节点A,节点B),正常情况应该是走接受阶段，客户端1，发送接受请求[1,3].可是下面的图6，描述的是客户端2，也通过了对于提案[5,]准备响应（节点A，节点B）.在从图5到图6这个过程中，有一些细节没有描述清楚,对于图6的结果，还有一个前提，就是客户端没有发送接受请求，或者节点A，节点B都没有响应客户端1的接受请求。否则，如果在图5到图6的过程中，先通过了客户端1的提案，按“如果接受者之前有通过提案，那么接受者将承诺，会在准备请求的响应中，包含已经通过的最大编号的提案信息&quot;,那么此时在图6中，客户端2的准备响应是不是应该是[5,3]？<br>2）作为角色问题，老师也说过，做为一个Proposer，它也可能是Acceptor,Proposer准确一点的来说是，客户端请求的节点。我的理解是，Proposer，Acceptor，都是集群中的结点，而客户端不是。如此，在图4-图8 提议者（客户端）让人容易产生误解，还有，既然提议者也可以做为接受者。那为什么提义者（客户端1）没有给提议者（客户端2）发送请求呢？<br>3）做为提案编号问题，假设这样一个场景，一个集群中，在没有任何历史提案下。2个Proposer，同时发送提案，准备响应。此时，这个提案编号会是什么情况？","like_count":0,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":485198,"discussion_content":"加一颗星:)，1)，有多种情况，演示的是其中的一种情况，应该是[1, 3]，这是已经通过的最大编号的提案信息。\n2)，这里为了演示方便，将提议者和接受者分开了，客户端作为提议者，集群的节点作为接受者。执行了相关功能，就扮演了相关的角色，这个是咱们在实现系统时，可以自定义的，比如，一个节点，可以只是接受者，也可以同时作为提议者和接受者。\n3)，这个与实现有关，比如，可以设置初始值为1，如果我们实现了递增、持久存储，并引入随机超时，就能避免因提案编号相同，投票被瓜分的情况，最终是能达成共识的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587144876,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375870,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855366,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":181897,"user_name":"bc","can_delete":false,"product_type":"c1","uid":1009801,"ip_address":"","ucode":"3899698EA715EC","user_header":"https://static001.geekbang.org/account/avatar/00/0f/68/89/173601c5.jpg","comment_is_top":false,"comment_ctime":1582675406,"is_pvip":false,"replies":[{"id":"76377","content":"加一颗星:)，大多数，也就是2个接受者，就能保证对该值达成共识，并且这个值，不会再变化了。","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1586378543,"ip_address":"","comment_id":181897,"utype":1}],"discussion_count":4,"race_medal":0,"score":"1582675406","product_id":100046101,"comment_content":"有个问题，就是网络中角色的数量，比如，10个节点，1个提案者，3个接受者，其余6个都是学习者，提案者提交的提案，3个接受者都接受了，也算是大多数通过么？还是说acceptor要占一定的比例？","like_count":0,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":485159,"discussion_content":"加一颗星:)，大多数，也就是2个接受者，就能保证对该值达成共识，并且这个值，不会再变化了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586378543,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375871,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855371,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1228560,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/10/b7974690.jpg","nickname":"BD","note":"","ucode":"A95CF8C3EDC228","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":342320,"discussion_content":"文中说准备阶段如果acceptor的准备响应有值的话会拿编号最大的那个值作为接收阶段的值。那么编号最大的值怎么就是大多数acceptor达成共识的值呢？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610635662,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1179952,"avatar":"https://static001.geekbang.org/account/avatar/00/12/01/30/cb3a729e.jpg","nickname":"XHH","note":"","ucode":"3EF89099982977","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":189347,"discussion_content":"只要接受者中的过半通过就行了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582872343,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":181607,"user_name":"Fs","can_delete":false,"product_type":"c1","uid":1083184,"ip_address":"","ucode":"0AD0EFB5544B9A","user_header":"https://static001.geekbang.org/account/avatar/00/10/87/30/4626c8c0.jpg","comment_is_top":false,"comment_ctime":1582594293,"is_pvip":false,"replies":[{"id":"70401","content":"还是7，解这个问题的关键是，在准备阶段会发现之前已经通过的提案的值:)","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1582634522,"ip_address":"","comment_id":181607,"utype":1}],"discussion_count":5,"race_medal":0,"score":"1582594293","product_id":100046101,"comment_content":"怎么感觉有一定误导性，还是我理解错了。如果不是只读值呢，是可修改的呢。<br>那么最终示例还是[9,7]吗？","like_count":0,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":485050,"discussion_content":"还是7，解这个问题的关键是，在准备阶段会发现之前已经通过的提案的值:)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582634522,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375872,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855376,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1762252,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/e3/cc/0947ff0b.jpg","nickname":"nestle","note":"","ucode":"469800BED81B54","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":186922,"discussion_content":"我想知道在一次实例中，一个Acceptor已经接受了某个值，还能接受另外的值吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582721141,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1083184,"avatar":"https://static001.geekbang.org/account/avatar/00/10/87/30/4626c8c0.jpg","nickname":"Fs","note":"","ucode":"0AD0EFB5544B9A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":185613,"discussion_content":"对，但是这个是新的更新值呢。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582636212,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1670737,"avatar":"https://static001.geekbang.org/account/avatar/00/19/7e/51/1b899927.jpg","nickname":"工兵","note":"","ucode":"2B00C204A85436","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1083184,"avatar":"https://static001.geekbang.org/account/avatar/00/10/87/30/4626c8c0.jpg","nickname":"Fs","note":"","ucode":"0AD0EFB5544B9A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":187461,"discussion_content":"确实，否则如何更新值呢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582731713,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":185613,"ip_address":""},"score":187461,"extra":""}]}]},{"had_liked":false,"id":180694,"user_name":"rm -rf&#47;*","can_delete":false,"product_type":"c1","uid":1388034,"ip_address":"","ucode":"D5A997682B6F7E","user_header":"https://static001.geekbang.org/account/avatar/00/15/2e/02/07ae4c9e.jpg","comment_is_top":false,"comment_ctime":1582366190,"is_pvip":false,"replies":[{"id":"70930","content":"会重新发起共识协商的，提案编号递增，由具体代码实现决定，一般是加1。可以参考Raft的实现来理解，比如Hashicorp Raft中的领导者选举。","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1583021487,"ip_address":"","comment_id":180694,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1582366190","product_id":100046101,"comment_content":"老师：<br>      当客户端A 在准备请求的阶段，没有接收者收到响应信息，那么A会增大请求编号，重新发送请求么？按照什么规则增大的呢？","like_count":0,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484764,"discussion_content":"会重新发起共识协商的，提案编号递增，由具体代码实现决定，一般是加1。可以参考Raft的实现来理解，比如Hashicorp Raft中的领导者选举。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583021487,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375873,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855379,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":180613,"user_name":"姜川","can_delete":false,"product_type":"c1","uid":1684311,"ip_address":"","ucode":"0F8A349623EAB5","user_header":"https://static001.geekbang.org/account/avatar/00/19/b3/57/2d92cf9a.jpg","comment_is_top":false,"comment_ctime":1582351168,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1582351168","product_id":100046101,"comment_content":"准备请求：就是发送一个提案编号给各个节点<br>准备响应：各节点返回已经通过的提案中，编号最大的那个&lt;提案编号：提案结果&gt;<br>接受请求：就是发送一个&lt;提案编号：提案结果&gt;给各个节点，特殊的是，提案结果是受准备响应中提案结果影响的","like_count":0,"discussions":[{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375874,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855384,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":180612,"user_name":"姜川","can_delete":false,"product_type":"c1","uid":1684311,"ip_address":"","ucode":"0F8A349623EAB5","user_header":"https://static001.geekbang.org/account/avatar/00/19/b3/57/2d92cf9a.jpg","comment_is_top":false,"comment_ctime":1582351034,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1582351034","product_id":100046101,"comment_content":"准备请求：就是发送一个提案编号","like_count":0,"discussions":[{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375875,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855387,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":180421,"user_name":"羽翼1982","can_delete":false,"product_type":"c1","uid":1130194,"ip_address":"","ucode":"1C7362888B7E3D","user_header":"https://static001.geekbang.org/account/avatar/00/11/3e/d2/5f9d3fa7.jpg","comment_is_top":false,"comment_ctime":1582277978,"is_pvip":false,"replies":[{"id":"70119","content":"达成的是“大多数”节点的共识，少于一半的节点故障，也就是少数的节点故障时，不影响“大多数”这个约定。","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1582385674,"ip_address":"","comment_id":180421,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1582277978","product_id":100046101,"comment_content":"为什么当少于一半的节点故障时，共识协商依然能够正常工作？这块老师能够展开讲讲吗？<br>上面描述的达成共识的过程中并没有解释这个问题<br>[我的猜想] 是不是提议者会受到接受者的回复，告诉他的提议是否被接受，如果收到超过一半的节点回复（成功 &#47; 失败），他就认为他的提议已经完成，否则他还会不断重发消息<br><br>PS：最终三个节点上的值应该是编号最大的9提议的6，因为他编号最大，在节点都正常的情况下，应该最终会接受编号最大的提议","like_count":0,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484659,"discussion_content":"达成的是“大多数”节点的共识，少于一半的节点故障，也就是少数的节点故障时，不影响“大多数”这个约定。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582385674,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1030135,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b7/f7/b2423197.jpg","nickname":"牛牛","note":"","ucode":"3FC01F8D66B2FB","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":380986,"discussion_content":"如何知道一共有多少个节点，也不是论文考虑的范围吗？集群的扩容和缩容是不是只有停机维护了呢？@老师","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1624854184,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375876,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855391,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":180410,"user_name":"子钧","can_delete":false,"product_type":"c1","uid":1154864,"ip_address":"","ucode":"86850622F14394","user_header":"https://static001.geekbang.org/account/avatar/00/11/9f/30/101c501e.jpg","comment_is_top":false,"comment_ctime":1582276085,"is_pvip":false,"replies":[{"id":"70120","content":"是大多数，不是半数哈，只要宕机数不过半，算法是能继续运行的。","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1582385836,"ip_address":"","comment_id":180410,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1582276085","product_id":100046101,"comment_content":"1、如何实现提案编号的共识？<br>2、半数机器同意，里机器数也是一个共识数值，在有机器宕机时，这个数值如何达成共识？","like_count":0,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484652,"discussion_content":"是大多数，不是半数哈，只要宕机数不过半，算法是能继续运行的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582385836,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375877,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855397,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":180372,"user_name":"Geek_MYMSwen","can_delete":false,"product_type":"c1","uid":1514343,"ip_address":"","ucode":"092A011977F25A","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/iajMePfd6rh5RcAUb5hr0RtkjkhQtkssicSgDoRBWZ0h74FiajVVNl1gVwQQKT6GPtjibMW22zKusibX6SK7CT1cH3A/132","comment_is_top":false,"comment_ctime":1582269560,"is_pvip":false,"replies":[{"id":"70122","content":"是7哈，在准备阶段，可以发现之前通过的提案的值。这也是为什么大多数节点达成共识后，这个值就不再变了。","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1582386157,"ip_address":"","comment_id":180372,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1582269560","product_id":100046101,"comment_content":"思考题应该是6吧。<br>原因：接受者的第三个承诺：在接受者之前通过提案，会在准备请求的响应中包含已经通过最大编号的提案信息。<br>在接到编号为9的准备请求时，接受者的状态相当于：已经响应了编号为5的准备请求。<br>然后接到了编号为9的准备请求。按照流程应该会将状态调整为已经响应编号为9的准备请求，等待编号大于等于9的接受请求。<br>所以值应该为6. <br>这里面还有一个问题：如果在等待编号为9的接受请求时，突然接到了编号为[11,8]的接受请求，那么接受者状态是否直接跳转为：值为8呢？","like_count":0,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484632,"discussion_content":"是7哈，在准备阶段，可以发现之前通过的提案的值。这也是为什么大多数节点达成共识后，这个值就不再变了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582386157,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375878,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855401,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1514343,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/iajMePfd6rh5RcAUb5hr0RtkjkhQtkssicSgDoRBWZ0h74FiajVVNl1gVwQQKT6GPtjibMW22zKusibX6SK7CT1cH3A/132","nickname":"Geek_MYMSwen","note":"","ucode":"092A011977F25A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":182316,"discussion_content":"哈哈，谢谢指点","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582419569,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":180359,"user_name":"沉淀的梦想","can_delete":false,"product_type":"c1","uid":1177315,"ip_address":"","ucode":"BCB7C26F9D214B","user_header":"https://static001.geekbang.org/account/avatar/00/11/f6/e3/e4bcd69e.jpg","comment_is_top":false,"comment_ctime":1582267352,"is_pvip":false,"replies":[{"id":"70128","content":"加一颗星:)","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1582386991,"ip_address":"","comment_id":180359,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1582267352","product_id":100046101,"comment_content":"课堂思考：最终的 X 值还是 7，因为 A B 已经通过了提案 [5, 7]，会在准备响应中将 [5,7]，在提案 9 的接受请求中会将提案值设置为准备响应中提案编号最大的提案值，所以最终提案 9 的接受请求为 [9, 7]，节点 A B C 的 X 值就全部同步为 7 了","like_count":0,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484625,"discussion_content":"加一颗星:)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582386991,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375879,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855405,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":180342,"user_name":"蓝魔丶","can_delete":false,"product_type":"c1","uid":1219438,"ip_address":"","ucode":"2AE4359E263558","user_header":"https://static001.geekbang.org/account/avatar/00/12/9b/6e/edd2da0c.jpg","comment_is_top":false,"comment_ctime":1582261825,"is_pvip":false,"replies":[{"id":"70133","content":"如何生成提案编号，没有约定的，需要自己实现算法时实现，但编号值不同，不影响达成共识，编号值的大小是优先级。","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1582387483,"ip_address":"","comment_id":180342,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1582261825","product_id":100046101,"comment_content":"老师，文中的提案编号是怎么生成的？这应该是个分布式时钟的问题，会不会出现这样一种情况，客户端1使用5编号，客户端2使用1编号？","like_count":0,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484618,"discussion_content":"如何生成提案编号，没有约定的，需要自己实现算法时实现，但编号值不同，不影响达成共识，编号值的大小是优先级。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582387483,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375880,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855408,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":180314,"user_name":"黄海峰","can_delete":false,"product_type":"c1","uid":1275357,"ip_address":"","ucode":"E9340719BC96B2","user_header":"https://static001.geekbang.org/account/avatar/00/13/75/dd/9ead6e69.jpg","comment_is_top":false,"comment_ctime":1582255377,"is_pvip":false,"replies":[{"id":"70134","content":"是7哈，因为在准备阶段，会发现之前通过的提案的值的。","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1582387645,"ip_address":"","comment_id":180314,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1582255377","product_id":100046101,"comment_content":"思考题：应该是6，接受了提案9，因为根据文章说只是不响应不通过小于等于已响应的提案","like_count":0,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484607,"discussion_content":"是7哈，因为在准备阶段，会发现之前通过的提案的值的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582387645,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375881,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855412,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":180287,"user_name":"pedro","can_delete":false,"product_type":"c1","uid":1200704,"ip_address":"","ucode":"F40C839DDFD599","user_header":"https://static001.geekbang.org/account/avatar/00/12/52/40/e57a736e.jpg","comment_is_top":false,"comment_ctime":1582249233,"is_pvip":false,"replies":[{"id":"70136","content":"值是7哈，咱们这样思考哈，在准备阶段，是会发现之前通过的提案的值的。","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1582387955,"ip_address":"","comment_id":180287,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1582249233","product_id":100046101,"comment_content":"思考:节点c未通过任何提案，那么[5,7]的提案也不会再发送给c了，所以在客户端3发送提案之前，节点a,b会给c进行一致性同步吗？    如果同步在接收客户端3的提案之前，那么此时三个节点的x值均为7。再接收客户端的提案，三个节点均接受，所以值为9。","like_count":0,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484597,"discussion_content":"值是7哈，咱们这样思考哈，在准备阶段，是会发现之前通过的提案的值的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582387955,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375882,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855416,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1211987,"avatar":"https://static001.geekbang.org/account/avatar/00/12/7e/53/c29c2fc9.jpg","nickname":"sdjdd","note":"","ucode":"512F2338DFF793","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":180094,"discussion_content":"值只可能是7或者6吧","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582276524,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":180261,"user_name":"石头","can_delete":false,"product_type":"c1","uid":1065776,"ip_address":"","ucode":"87921CA52689DC","user_header":"https://static001.geekbang.org/account/avatar/00/10/43/30/4c12618b.jpg","comment_is_top":false,"comment_ctime":1582243406,"is_pvip":false,"replies":[{"id":"70137","content":"因为A、B、C三节点承诺不通过编号小于5的提案，所以，提案[1, 3]不被接受，这里和CP没有关系哟。","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1582388292,"ip_address":"","comment_id":180261,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1582243406","product_id":100046101,"comment_content":"当节点 A、B、C 收到接受请求[1, 3]的时候，由于提案的提案编号 1 小于三个节点承诺能通过的提案的最小提案编号 5，所以提案[1, 3]将被拒绝。<br>图8中为什么提案【1，3】不被接受，如果是这样那只能保证CP","like_count":0,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484587,"discussion_content":"因为A、B、C三节点承诺不通过编号小于5的提案，所以，提案[1, 3]不被接受，这里和CP没有关系哟。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582388292,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2051062,"avatar":"","nickname":"xingshouzhyan","note":"","ucode":"BFDD6987C12F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375883,"discussion_content":"麻烦大哥看一下，byrne的问题怎么解释，给我感觉Basic-paxos有bug一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621855421,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}