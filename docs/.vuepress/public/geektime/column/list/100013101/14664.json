{"id":14664,"title":"11 | é€šé“çš„é«˜çº§ç©æ³•","content":"<p>æˆ‘ä»¬å·²ç»è®¨è®ºè¿‡äº†é€šé“çš„åŸºæœ¬æ“ä½œä»¥åŠèƒŒåçš„è§„åˆ™ã€‚ä»Šå¤©ï¼Œæˆ‘å†æ¥è®²è®²é€šé“çš„é«˜çº§ç©æ³•ã€‚</p><p>é¦–å…ˆæ¥è¯´è¯´å•å‘é€šé“ã€‚æˆ‘ä»¬åœ¨è¯´â€œé€šé“â€çš„æ—¶å€™æŒ‡çš„éƒ½æ˜¯åŒå‘é€šé“ï¼Œå³ï¼šæ—¢å¯ä»¥å‘ä¹Ÿå¯ä»¥æ”¶çš„é€šé“ã€‚</p><p>æ‰€è°“å•å‘é€šé“å°±æ˜¯ï¼Œåªèƒ½å‘ä¸èƒ½æ”¶ï¼Œæˆ–è€…åªèƒ½æ”¶ä¸èƒ½å‘çš„é€šé“ã€‚ä¸€ä¸ªé€šé“æ˜¯åŒå‘çš„ï¼Œè¿˜æ˜¯å•å‘çš„æ˜¯ç”±å®ƒçš„ç±»å‹å­—é¢é‡ä½“ç°çš„ã€‚</p><p>è¿˜è®°å¾—æˆ‘ä»¬åœ¨ä¸Šç¯‡æ–‡ç« ä¸­è¯´è¿‡çš„æ¥æ”¶æ“ä½œç¬¦<code>&lt;-</code>å—ï¼Ÿå¦‚æœæˆ‘ä»¬æŠŠå®ƒç”¨åœ¨é€šé“çš„ç±»å‹å­—é¢é‡ä¸­ï¼Œé‚£ä¹ˆå®ƒä»£è¡¨çš„å°±ä¸æ˜¯â€œå‘é€â€æˆ–â€œæ¥æ”¶â€çš„åŠ¨ä½œäº†ï¼Œè€Œæ˜¯è¡¨ç¤ºé€šé“çš„æ–¹å‘ã€‚</p><p>æ¯”å¦‚ï¼š</p><pre><code>var uselessChan = make(chan&lt;- int, 1)\n</code></pre><p>æˆ‘å£°æ˜å¹¶åˆå§‹åŒ–äº†ä¸€ä¸ªåå«<code>uselessChan</code>çš„å˜é‡ã€‚è¿™ä¸ªå˜é‡çš„ç±»å‹æ˜¯<code>chan&lt;- int</code>ï¼Œå®¹é‡æ˜¯<code>1</code>ã€‚</p><p>è¯·æ³¨æ„ç´§æŒ¨åœ¨å…³é”®å­—<code>chan</code>å³è¾¹çš„é‚£ä¸ª<code>&lt;-</code>ï¼Œè¿™è¡¨ç¤ºäº†è¿™ä¸ªé€šé“æ˜¯å•å‘çš„ï¼Œå¹¶ä¸”åªèƒ½å‘è€Œä¸èƒ½æ”¶ã€‚</p><p>ç±»ä¼¼çš„ï¼Œå¦‚æœè¿™ä¸ªæ“ä½œç¬¦ç´§æŒ¨åœ¨<code>chan</code>çš„å·¦è¾¹ï¼Œé‚£ä¹ˆå°±è¯´æ˜è¯¥é€šé“åªèƒ½æ”¶ä¸èƒ½å‘ã€‚æ‰€ä»¥ï¼Œå‰è€…å¯ä»¥è¢«ç®€ç§°ä¸ºå‘é€é€šé“ï¼Œåè€…å¯ä»¥è¢«ç®€ç§°ä¸ºæ¥æ”¶é€šé“ã€‚</p><p>æ³¨æ„ï¼Œä¸å‘é€æ“ä½œå’Œæ¥æ”¶æ“ä½œå¯¹åº”ï¼Œè¿™é‡Œçš„â€œå‘â€å’Œâ€œæ”¶â€éƒ½æ˜¯ç«™åœ¨æ“ä½œé€šé“çš„ä»£ç çš„è§’åº¦ä¸Šè¯´çš„ã€‚</p><p>ä»ä¸Šè¿°å˜é‡çš„åå­—ä¸Šä½ ä¹Ÿèƒ½çŒœåˆ°ï¼Œè¿™æ ·çš„é€šé“æ˜¯æ²¡ç”¨çš„ã€‚é€šé“å°±æ˜¯ä¸ºäº†ä¼ é€’æ•°æ®è€Œå­˜åœ¨çš„ï¼Œå£°æ˜ä¸€ä¸ªåªæœ‰ä¸€ç«¯ï¼ˆå‘é€ç«¯æˆ–è€…æ¥æ”¶ç«¯ï¼‰èƒ½ç”¨çš„é€šé“æ²¡æœ‰ä»»ä½•æ„ä¹‰ã€‚é‚£ä¹ˆï¼Œå•å‘é€šé“çš„ç”¨é€”ç©¶ç«Ÿåœ¨å“ªå„¿å‘¢ï¼Ÿ</p><!-- [[[read_end]]] --><p><strong>é—®é¢˜ï¼šå•å‘é€šé“æœ‰ä»€ä¹ˆåº”ç”¨ä»·å€¼ï¼Ÿ</strong></p><p>ä½ å¯ä»¥å…ˆè‡ªå·±æƒ³æƒ³ï¼Œç„¶åå†æ¥ç€å¾€ä¸‹çœ‹ã€‚</p><p><strong>å…¸å‹å›ç­”</strong></p><p>æ¦‚æ‹¬åœ°è¯´ï¼Œå•å‘é€šé“æœ€ä¸»è¦çš„ç”¨é€”å°±æ˜¯çº¦æŸå…¶ä»–ä»£ç çš„è¡Œä¸ºã€‚</p><p><strong>é—®é¢˜è§£æ</strong></p><p>è¿™éœ€è¦ä»ä¸¤ä¸ªæ–¹é¢è®²ï¼Œéƒ½è·Ÿå‡½æ•°çš„å£°æ˜æœ‰äº›å…³ç³»ã€‚å…ˆæ¥çœ‹ä¸‹é¢çš„ä»£ç ï¼š</p><pre><code>func SendInt(ch chan&lt;- int) {\n\tch &lt;- rand.Intn(1000)\n}\n</code></pre><p>æˆ‘ç”¨<code>func</code>å…³é”®å­—å£°æ˜äº†ä¸€ä¸ªå«åš<code>SendInt</code>çš„å‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°åªæ¥å—ä¸€ä¸ª<code>chan&lt;- int</code>ç±»å‹çš„å‚æ•°ã€‚åœ¨è¿™ä¸ªå‡½æ•°ä¸­çš„ä»£ç åªèƒ½å‘å‚æ•°<code>ch</code>å‘é€å…ƒç´ å€¼ï¼Œè€Œä¸èƒ½ä»å®ƒé‚£é‡Œæ¥æ”¶å…ƒç´ å€¼ã€‚è¿™å°±èµ·åˆ°äº†çº¦æŸå‡½æ•°è¡Œä¸ºçš„ä½œç”¨ã€‚</p><p>ä½ å¯èƒ½ä¼šé—®ï¼Œæˆ‘è‡ªå·±å†™çš„å‡½æ•°è‡ªå·±è‚¯å®šèƒ½ç¡®å®šæ“ä½œé€šé“çš„æ–¹å¼ï¼Œä¸ºä»€ä¹ˆè¿˜è¦å†çº¦æŸï¼Ÿå¥½å§ï¼Œè¿™ä¸ªä¾‹å­å¯èƒ½è¿‡äºç®€å•äº†ã€‚åœ¨å®é™…åœºæ™¯ä¸­ï¼Œè¿™ç§çº¦æŸä¸€èˆ¬ä¼šå‡ºç°åœ¨æ¥å£ç±»å‹å£°æ˜ä¸­çš„æŸä¸ªæ–¹æ³•å®šä¹‰ä¸Šã€‚è¯·çœ‹è¿™ä¸ªå«<code>Notifier</code>çš„æ¥å£ç±»å‹å£°æ˜ï¼š</p><pre><code>type Notifier interface {\n\tSendInt(ch chan&lt;- int)\n}\n</code></pre><p>åœ¨æ¥å£ç±»å‹å£°æ˜çš„èŠ±æ‹¬å·ä¸­ï¼Œæ¯ä¸€è¡Œéƒ½ä»£è¡¨ç€ä¸€ä¸ªæ–¹æ³•çš„å®šä¹‰ã€‚æ¥å£ä¸­çš„æ–¹æ³•å®šä¹‰ä¸å‡½æ•°å£°æ˜å¾ˆç±»ä¼¼ï¼Œä½†æ˜¯åªåŒ…å«äº†æ–¹æ³•åç§°ã€å‚æ•°åˆ—è¡¨å’Œç»“æœåˆ—è¡¨ã€‚</p><p>ä¸€ä¸ªç±»å‹å¦‚æœæƒ³æˆä¸ºä¸€ä¸ªæ¥å£ç±»å‹çš„å®ç°ç±»å‹ï¼Œé‚£ä¹ˆå°±å¿…é¡»å®ç°è¿™ä¸ªæ¥å£ä¸­å®šä¹‰çš„æ‰€æœ‰æ–¹æ³•ã€‚å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬åœ¨æŸä¸ªæ–¹æ³•çš„å®šä¹‰ä¸­ä½¿ç”¨äº†å•å‘é€šé“ç±»å‹ï¼Œé‚£ä¹ˆå°±ç›¸å½“äºåœ¨å¯¹å®ƒçš„æ‰€æœ‰å®ç°åšå‡ºçº¦æŸã€‚</p><p>åœ¨è¿™é‡Œï¼Œ<code>Notifier</code>æ¥å£ä¸­çš„<code>SendInt</code>æ–¹æ³•åªä¼šæ¥å—ä¸€ä¸ªå‘é€é€šé“ä½œä¸ºå‚æ•°ï¼Œæ‰€ä»¥ï¼Œåœ¨è¯¥æ¥å£çš„æ‰€æœ‰å®ç°ç±»å‹ä¸­çš„<code>SendInt</code>æ–¹æ³•éƒ½ä¼šå—åˆ°é™åˆ¶ã€‚è¿™ç§çº¦æŸæ–¹å¼è¿˜æ˜¯å¾ˆæœ‰ç”¨çš„ï¼Œå°¤å…¶æ˜¯åœ¨æˆ‘ä»¬ç¼–å†™æ¨¡æ¿ä»£ç æˆ–è€…å¯æ‰©å±•çš„ç¨‹åºåº“çš„æ—¶å€™ã€‚</p><p>é¡ºä¾¿è¯´ä¸€ä¸‹ï¼Œæˆ‘ä»¬åœ¨è°ƒç”¨<code>SendInt</code>å‡½æ•°çš„æ—¶å€™ï¼Œåªéœ€è¦æŠŠä¸€ä¸ªå…ƒç´ ç±»å‹åŒ¹é…çš„åŒå‘é€šé“ä¼ ç»™å®ƒå°±è¡Œäº†ï¼Œæ²¡å¿…è¦ç”¨å‘é€é€šé“ï¼Œå› ä¸ºGoè¯­è¨€åœ¨è¿™ç§æƒ…å†µä¸‹ä¼šè‡ªåŠ¨åœ°æŠŠåŒå‘é€šé“è½¬æ¢ä¸ºå‡½æ•°æ‰€éœ€çš„å•å‘é€šé“ã€‚</p><pre><code>intChan1 := make(chan int, 3)\nSendInt(intChan1)\n</code></pre><p>åœ¨å¦ä¸€ä¸ªæ–¹é¢ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åœ¨å‡½æ•°å£°æ˜çš„ç»“æœåˆ—è¡¨ä¸­ä½¿ç”¨å•å‘é€šé“ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>func getIntChan() &lt;-chan int {\n\tnum := 5\n\tch := make(chan int, num)\n\tfor i := 0; i &lt; num; i++ {\n\t\tch &lt;- i\n\t}\n\tclose(ch)\n\treturn ch\n}\n</code></pre><p>å‡½æ•°<code>getIntChan</code>ä¼šè¿”å›ä¸€ä¸ª<code>&lt;-chan int</code>ç±»å‹çš„é€šé“ï¼Œè¿™å°±æ„å‘³ç€å¾—åˆ°è¯¥é€šé“çš„ç¨‹åºï¼Œåªèƒ½ä»é€šé“ä¸­æ¥æ”¶å…ƒç´ å€¼ã€‚è¿™å®é™…ä¸Šå°±æ˜¯å¯¹å‡½æ•°è°ƒç”¨æ–¹çš„ä¸€ç§çº¦æŸäº†ã€‚</p><p>å¦å¤–ï¼Œæˆ‘ä»¬åœ¨Goè¯­è¨€ä¸­è¿˜å¯ä»¥å£°æ˜å‡½æ•°ç±»å‹ï¼Œå¦‚æœæˆ‘ä»¬åœ¨å‡½æ•°ç±»å‹ä¸­ä½¿ç”¨äº†å•å‘é€šé“ï¼Œé‚£ä¹ˆå°±ç›¸ç­‰äºåœ¨çº¦æŸæ‰€æœ‰å®ç°äº†è¿™ä¸ªå‡½æ•°ç±»å‹çš„å‡½æ•°ã€‚</p><p>æˆ‘ä»¬å†é¡ºä¾¿çœ‹ä¸€ä¸‹è°ƒç”¨<code>getIntChan</code>çš„ä»£ç ï¼š</p><pre><code>intChan2 := getIntChan()\nfor elem := range intChan2 {\n\tfmt.Printf(&quot;The element in intChan2: %v\\n&quot;, elem)\n}\n</code></pre><p>æˆ‘æŠŠè°ƒç”¨<code>getIntChan</code>å¾—åˆ°çš„ç»“æœå€¼èµ‹ç»™äº†å˜é‡<code>intChan2</code>ï¼Œç„¶åç”¨<code>for</code>è¯­å¥å¾ªç¯åœ°å–å‡ºäº†è¯¥é€šé“ä¸­çš„æ‰€æœ‰å…ƒç´ å€¼ï¼Œå¹¶æ‰“å°å‡ºæ¥ã€‚</p><p>è¿™é‡Œçš„<code>for</code>è¯­å¥ä¹Ÿå¯ä»¥è¢«ç§°ä¸ºå¸¦æœ‰<code>range</code>å­å¥çš„<code>for</code>è¯­å¥ã€‚å®ƒçš„ç”¨æ³•æˆ‘åœ¨åé¢è®²<code>for</code>è¯­å¥çš„æ—¶å€™ä¸“é—¨è¯´æ˜ã€‚ç°åœ¨ä½ åªéœ€è¦çŸ¥é“å…³äºå®ƒçš„ä¸‰ä»¶äº‹ï¼š</p><ol>\n<li>ä¸Šè¿°<code>for</code>è¯­å¥ä¼šä¸æ–­åœ°å°è¯•ä»é€šé“<code>intChan2</code>ä¸­å–å‡ºå…ƒç´ å€¼ã€‚å³ä½¿<code>intChan2</code>å·²ç»è¢«å…³é—­äº†ï¼Œå®ƒä¹Ÿä¼šåœ¨å–å‡ºæ‰€æœ‰å‰©ä½™çš„å…ƒç´ å€¼ä¹‹åå†ç»“æŸæ‰§è¡Œã€‚</li>\n<li>é€šå¸¸ï¼Œå½“é€šé“<code>intChan2</code>ä¸­æ²¡æœ‰å…ƒç´ å€¼æ—¶ï¼Œè¿™æ¡<code>for</code>è¯­å¥ä¼šè¢«é˜»å¡åœ¨æœ‰<code>for</code>å…³é”®å­—çš„é‚£ä¸€è¡Œï¼Œç›´åˆ°æœ‰æ–°çš„å…ƒç´ å€¼å¯å–ã€‚ä¸è¿‡ï¼Œç”±äºè¿™é‡Œçš„<code>getIntChan</code>å‡½æ•°ä¼šäº‹å…ˆå°†<code>intChan2</code>å…³é—­ï¼Œæ‰€ä»¥å®ƒåœ¨å–å‡º<code>intChan2</code>ä¸­çš„æ‰€æœ‰å…ƒç´ å€¼ä¹‹åä¼šç›´æ¥ç»“æŸæ‰§è¡Œã€‚</li>\n<li>å€˜è‹¥é€šé“<code>intChan2</code>çš„å€¼ä¸º<code>nil</code>ï¼Œé‚£ä¹ˆè¿™æ¡<code>for</code>è¯­å¥å°±ä¼šè¢«æ°¸è¿œåœ°é˜»å¡åœ¨æœ‰<code>for</code>å…³é”®å­—çš„é‚£ä¸€è¡Œã€‚</li>\n</ol><p>è¿™å°±æ˜¯å¸¦<code>range</code>å­å¥çš„<code>for</code>è¯­å¥ä¸é€šé“çš„è”ç”¨æ–¹å¼ã€‚ä¸è¿‡ï¼Œå®ƒæ˜¯ä¸€ç§ç”¨é€”æ¯”è¾ƒå¹¿æ³›çš„è¯­å¥ï¼Œè¿˜å¯ä»¥è¢«ç”¨æ¥ä»å…¶ä»–ä¸€äº›ç±»å‹çš„å€¼ä¸­è·å–å…ƒç´ ã€‚é™¤æ­¤ä¹‹å¤–ï¼ŒGoè¯­è¨€è¿˜æœ‰ä¸€ç§ä¸“é—¨ä¸ºäº†æ“ä½œé€šé“è€Œå­˜åœ¨çš„è¯­å¥ï¼š<code>select</code>è¯­å¥ã€‚</p><p><strong>çŸ¥è¯†æ‰©å±•</strong></p><p><strong>é—®é¢˜1ï¼š<code>select</code>è¯­å¥ä¸é€šé“æ€æ ·è”ç”¨ï¼Œåº”è¯¥æ³¨æ„äº›ä»€ä¹ˆï¼Ÿ</strong></p><p><code>select</code>è¯­å¥åªèƒ½ä¸é€šé“è”ç”¨ï¼Œå®ƒä¸€èˆ¬ç”±è‹¥å¹²ä¸ªåˆ†æ”¯ç»„æˆã€‚æ¯æ¬¡æ‰§è¡Œè¿™ç§è¯­å¥çš„æ—¶å€™ï¼Œä¸€èˆ¬åªæœ‰ä¸€ä¸ªåˆ†æ”¯ä¸­çš„ä»£ç ä¼šè¢«è¿è¡Œã€‚</p><p><code>select</code>è¯­å¥çš„åˆ†æ”¯åˆ†ä¸ºä¸¤ç§ï¼Œä¸€ç§å«åšå€™é€‰åˆ†æ”¯ï¼Œå¦ä¸€ç§å«åšé»˜è®¤åˆ†æ”¯ã€‚å€™é€‰åˆ†æ”¯æ€»æ˜¯ä»¥å…³é”®å­—<code>case</code>å¼€å¤´ï¼Œåè·Ÿä¸€ä¸ª<code>case</code>è¡¨è¾¾å¼å’Œä¸€ä¸ªå†’å·ï¼Œç„¶åæˆ‘ä»¬å¯ä»¥ä»ä¸‹ä¸€è¡Œå¼€å§‹å†™å…¥å½“åˆ†æ”¯è¢«é€‰ä¸­æ—¶éœ€è¦æ‰§è¡Œçš„è¯­å¥ã€‚</p><p>é»˜è®¤åˆ†æ”¯å…¶å®å°±æ˜¯default caseï¼Œå› ä¸ºï¼Œå½“ä¸”ä»…å½“æ²¡æœ‰å€™é€‰åˆ†æ”¯è¢«é€‰ä¸­æ—¶å®ƒæ‰ä¼šè¢«æ‰§è¡Œï¼Œæ‰€ä»¥å®ƒä»¥å…³é”®å­—<code>default</code>å¼€å¤´å¹¶ç›´æ¥åè·Ÿä¸€ä¸ªå†’å·ã€‚åŒæ ·çš„ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨<code>default:</code>çš„ä¸‹ä¸€è¡Œå†™å…¥è¦æ‰§è¡Œçš„è¯­å¥ã€‚</p><p>ç”±äº<code>select</code>è¯­å¥æ˜¯ä¸“ä¸ºé€šé“è€Œè®¾è®¡çš„ï¼Œæ‰€ä»¥æ¯ä¸ª<code>case</code>è¡¨è¾¾å¼ä¸­éƒ½åªèƒ½åŒ…å«æ“ä½œé€šé“çš„è¡¨è¾¾å¼ï¼Œæ¯”å¦‚æ¥æ”¶è¡¨è¾¾å¼ã€‚</p><p>å½“ç„¶ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦æŠŠæ¥æ”¶è¡¨è¾¾å¼çš„ç»“æœèµ‹ç»™å˜é‡çš„è¯ï¼Œè¿˜å¯ä»¥æŠŠè¿™é‡Œå†™æˆèµ‹å€¼è¯­å¥æˆ–è€…çŸ­å˜é‡å£°æ˜ã€‚ä¸‹é¢å±•ç¤ºä¸€ä¸ªç®€å•çš„ä¾‹å­ã€‚</p><pre><code>// å‡†å¤‡å¥½å‡ ä¸ªé€šé“ã€‚\nintChannels := [3]chan int{\n\tmake(chan int, 1),\n\tmake(chan int, 1),\n\tmake(chan int, 1),\n}\n// éšæœºé€‰æ‹©ä¸€ä¸ªé€šé“ï¼Œå¹¶å‘å®ƒå‘é€å…ƒç´ å€¼ã€‚\nindex := rand.Intn(3)\nfmt.Printf(&quot;The index: %d\\n&quot;, index)\nintChannels[index] &lt;- index\n// å“ªä¸€ä¸ªé€šé“ä¸­æœ‰å¯å–çš„å…ƒç´ å€¼ï¼Œå“ªä¸ªå¯¹åº”çš„åˆ†æ”¯å°±ä¼šè¢«æ‰§è¡Œã€‚\nselect {\ncase &lt;-intChannels[0]:\n\tfmt.Println(&quot;The first candidate case is selected.&quot;)\ncase &lt;-intChannels[1]:\n\tfmt.Println(&quot;The second candidate case is selected.&quot;)\ncase elem := &lt;-intChannels[2]:\n\tfmt.Printf(&quot;The third candidate case is selected, the element is %d.\\n&quot;, elem)\ndefault:\n\tfmt.Println(&quot;No candidate case is selected!&quot;)\n}\n</code></pre><p>æˆ‘å…ˆå‡†å¤‡å¥½äº†ä¸‰ä¸ªç±»å‹ä¸º<code>chan int</code>ã€å®¹é‡ä¸º<code>1</code>çš„é€šé“ï¼Œå¹¶æŠŠå®ƒä»¬å­˜å…¥äº†ä¸€ä¸ªå«åš<code>intChannels</code>çš„æ•°ç»„ã€‚</p><p>ç„¶åï¼Œæˆ‘éšæœºé€‰æ‹©ä¸€ä¸ªèŒƒå›´åœ¨[0, 2]çš„æ•´æ•°ï¼ŒæŠŠå®ƒä½œä¸ºç´¢å¼•åœ¨ä¸Šè¿°æ•°ç»„ä¸­é€‰æ‹©ä¸€ä¸ªé€šé“ï¼Œå¹¶å‘å…¶ä¸­å‘é€ä¸€ä¸ªå…ƒç´ å€¼ã€‚</p><p>æœ€åï¼Œæˆ‘ç”¨ä¸€ä¸ªåŒ…å«äº†ä¸‰ä¸ªå€™é€‰åˆ†æ”¯çš„<code>select</code>è¯­å¥ï¼Œåˆ†åˆ«å°è¯•ä»ä¸Šè¿°ä¸‰ä¸ªé€šé“ä¸­æ¥æ”¶å…ƒç´ å€¼ï¼Œå“ªä¸€ä¸ªé€šé“ä¸­æœ‰å€¼ï¼Œå“ªä¸€ä¸ªå¯¹åº”çš„å€™é€‰åˆ†æ”¯å°±ä¼šè¢«æ‰§è¡Œã€‚åé¢è¿˜æœ‰ä¸€ä¸ªé»˜è®¤åˆ†æ”¯ï¼Œä¸è¿‡åœ¨è¿™é‡Œå®ƒæ˜¯ä¸å¯èƒ½è¢«é€‰ä¸­çš„ã€‚</p><p>åœ¨ä½¿ç”¨<code>select</code>è¯­å¥çš„æ—¶å€™ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦æ³¨æ„ä¸‹é¢å‡ ä¸ªäº‹æƒ…ã€‚</p><ol>\n<li>å¦‚æœåƒä¸Šè¿°ç¤ºä¾‹é‚£æ ·åŠ å…¥äº†é»˜è®¤åˆ†æ”¯ï¼Œé‚£ä¹ˆæ— è®ºæ¶‰åŠé€šé“æ“ä½œçš„è¡¨è¾¾å¼æ˜¯å¦æœ‰é˜»å¡ï¼Œ<code>select</code>è¯­å¥éƒ½ä¸ä¼šè¢«é˜»å¡ã€‚å¦‚æœé‚£å‡ ä¸ªè¡¨è¾¾å¼éƒ½é˜»å¡äº†ï¼Œæˆ–è€…è¯´éƒ½æ²¡æœ‰æ»¡è¶³æ±‚å€¼çš„æ¡ä»¶ï¼Œé‚£ä¹ˆé»˜è®¤åˆ†æ”¯å°±ä¼šè¢«é€‰ä¸­å¹¶æ‰§è¡Œã€‚</li>\n<li>å¦‚æœæ²¡æœ‰åŠ å…¥é»˜è®¤åˆ†æ”¯ï¼Œé‚£ä¹ˆä¸€æ—¦æ‰€æœ‰çš„<code>case</code>è¡¨è¾¾å¼éƒ½æ²¡æœ‰æ»¡è¶³æ±‚å€¼æ¡ä»¶ï¼Œé‚£ä¹ˆ<code>select</code>è¯­å¥å°±ä¼šè¢«é˜»å¡ã€‚ç›´åˆ°è‡³å°‘æœ‰ä¸€ä¸ª<code>case</code>è¡¨è¾¾å¼æ»¡è¶³æ¡ä»¶ä¸ºæ­¢ã€‚</li>\n<li>è¿˜è®°å¾—å—ï¼Ÿæˆ‘ä»¬å¯èƒ½ä¼šå› ä¸ºé€šé“å…³é—­äº†ï¼Œè€Œç›´æ¥ä»é€šé“æ¥æ”¶åˆ°ä¸€ä¸ªå…¶å…ƒç´ ç±»å‹çš„é›¶å€¼ã€‚æ‰€ä»¥ï¼Œåœ¨å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡æ¥æ”¶è¡¨è¾¾å¼çš„ç¬¬äºŒä¸ªç»“æœå€¼æ¥åˆ¤æ–­é€šé“æ˜¯å¦å·²ç»å…³é—­ã€‚ä¸€æ—¦å‘ç°æŸä¸ªé€šé“å…³é—­äº†ï¼Œæˆ‘ä»¬å°±åº”è¯¥åŠæ—¶åœ°å±è”½æ‰å¯¹åº”çš„åˆ†æ”¯æˆ–è€…é‡‡å–å…¶ä»–æªæ–½ã€‚è¿™å¯¹äºç¨‹åºé€»è¾‘å’Œç¨‹åºæ€§èƒ½éƒ½æ˜¯æœ‰å¥½å¤„çš„ã€‚</li>\n<li><code>select</code>è¯­å¥åªèƒ½å¯¹å…¶ä¸­çš„æ¯ä¸€ä¸ª<code>case</code>è¡¨è¾¾å¼å„æ±‚å€¼ä¸€æ¬¡ã€‚æ‰€ä»¥ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¿ç»­æˆ–å®šæ—¶åœ°æ“ä½œå…¶ä¸­çš„é€šé“çš„è¯ï¼Œå°±å¾€å¾€éœ€è¦é€šè¿‡åœ¨<code>for</code>è¯­å¥ä¸­åµŒå…¥<code>select</code>è¯­å¥çš„æ–¹å¼å®ç°ã€‚ä½†è¿™æ—¶è¦æ³¨æ„ï¼Œç®€å•åœ°åœ¨<code>select</code>è¯­å¥çš„åˆ†æ”¯ä¸­ä½¿ç”¨<code>break</code>è¯­å¥ï¼Œåªèƒ½ç»“æŸå½“å‰çš„<code>select</code>è¯­å¥çš„æ‰§è¡Œï¼Œè€Œå¹¶ä¸ä¼šå¯¹å¤–å±‚çš„<code>for</code>è¯­å¥äº§ç”Ÿä½œç”¨ã€‚è¿™ç§é”™è¯¯çš„ç”¨æ³•å¯èƒ½ä¼šè®©è¿™ä¸ª<code>for</code>è¯­å¥æ— ä¼‘æ­¢åœ°è¿è¡Œä¸‹å»ã€‚</li>\n</ol><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ã€‚</p><pre><code>intChan := make(chan int, 1)\n// ä¸€ç§’åå…³é—­é€šé“ã€‚\ntime.AfterFunc(time.Second, func() {\n\tclose(intChan)\n})\nselect {\ncase _, ok := &lt;-intChan:\n\tif !ok {\n\t\tfmt.Println(&quot;The candidate case is closed.&quot;)\n\t\tbreak\n\t}\n\tfmt.Println(&quot;The candidate case is selected.&quot;)\n}\n</code></pre><p>æˆ‘å…ˆå£°æ˜å¹¶åˆå§‹åŒ–äº†ä¸€ä¸ªå«åš<code>intChan</code>çš„é€šé“ï¼Œç„¶åé€šè¿‡<code>time</code>åŒ…ä¸­çš„<code>AfterFunc</code>å‡½æ•°çº¦å®šåœ¨ä¸€ç§’é’Ÿä¹‹åå…³é—­è¯¥é€šé“ã€‚</p><p>åé¢çš„<code>select</code>è¯­å¥åªæœ‰ä¸€ä¸ªå€™é€‰åˆ†æ”¯ï¼Œæˆ‘åœ¨å…¶ä¸­åˆ©ç”¨æ¥æ”¶è¡¨è¾¾å¼çš„ç¬¬äºŒä¸ªç»“æœå€¼å¯¹<code>intChan</code>é€šé“æ˜¯å¦å·²å…³é—­åšäº†åˆ¤æ–­ï¼Œå¹¶åœ¨å¾—åˆ°è‚¯å®šç»“æœåï¼Œé€šè¿‡<code>break</code>è¯­å¥ç«‹å³ç»“æŸå½“å‰<code>select</code>è¯­å¥çš„æ‰§è¡Œã€‚</p><p>è¿™ä¸ªä¾‹å­ä»¥åŠå‰é¢é‚£ä¸ªä¾‹å­éƒ½å¯ä»¥åœ¨demo24.goæ–‡ä»¶ä¸­è¢«æ‰¾åˆ°ã€‚ä½ åº”è¯¥è¿è¡Œä¸‹ï¼Œçœ‹çœ‹ç»“æœå¦‚ä½•ã€‚</p><p>ä¸Šé¢è¿™äº›æ³¨æ„äº‹é¡¹ä¸­çš„ä¸€éƒ¨åˆ†æ¶‰åŠåˆ°äº†<code>select</code>è¯­å¥çš„åˆ†æ”¯é€‰æ‹©è§„åˆ™ã€‚æˆ‘è§‰å¾—å¾ˆæœ‰å¿…è¦å†ä¸“é—¨æ•´ç†å’Œæ€»ç»“ä¸€ä¸‹è¿™äº›è§„åˆ™ã€‚</p><p><strong>é—®é¢˜2ï¼š<code>select</code>è¯­å¥çš„åˆ†æ”¯é€‰æ‹©è§„åˆ™éƒ½æœ‰å“ªäº›ï¼Ÿ</strong></p><p>è§„åˆ™å¦‚ä¸‹é¢æ‰€ç¤ºã€‚</p><ol>\n<li>å¯¹äºæ¯ä¸€ä¸ª<code>case</code>è¡¨è¾¾å¼ï¼Œéƒ½è‡³å°‘ä¼šåŒ…å«ä¸€ä¸ªä»£è¡¨å‘é€æ“ä½œçš„å‘é€è¡¨è¾¾å¼æˆ–è€…ä¸€ä¸ªä»£è¡¨æ¥æ”¶æ“ä½œçš„æ¥æ”¶è¡¨è¾¾å¼ï¼ŒåŒæ—¶ä¹Ÿå¯èƒ½ä¼šåŒ…å«å…¶ä»–çš„è¡¨è¾¾å¼ã€‚æ¯”å¦‚ï¼Œå¦‚æœ<code>case</code>è¡¨è¾¾å¼æ˜¯åŒ…å«äº†æ¥æ”¶è¡¨è¾¾å¼çš„çŸ­å˜é‡å£°æ˜æ—¶ï¼Œé‚£ä¹ˆåœ¨èµ‹å€¼ç¬¦å·å·¦è¾¹çš„å°±å¯ä»¥æ˜¯ä¸€ä¸ªæˆ–ä¸¤ä¸ªè¡¨è¾¾å¼ï¼Œä¸è¿‡æ­¤å¤„çš„è¡¨è¾¾å¼çš„ç»“æœå¿…é¡»æ˜¯å¯ä»¥è¢«èµ‹å€¼çš„ã€‚å½“è¿™æ ·çš„<code>case</code>è¡¨è¾¾å¼è¢«æ±‚å€¼æ—¶ï¼Œå®ƒåŒ…å«çš„å¤šä¸ªè¡¨è¾¾å¼æ€»ä¼šä»¥ä»å·¦åˆ°å³çš„é¡ºåºè¢«æ±‚å€¼ã€‚<br>\n<br></li>\n<li><code>select</code>è¯­å¥åŒ…å«çš„å€™é€‰åˆ†æ”¯ä¸­çš„<code>case</code>è¡¨è¾¾å¼éƒ½ä¼šåœ¨è¯¥è¯­å¥æ‰§è¡Œå¼€å§‹æ—¶å…ˆè¢«æ±‚å€¼ï¼Œå¹¶ä¸”æ±‚å€¼çš„é¡ºåºæ˜¯ä¾ä»ä»£ç ç¼–å†™çš„é¡ºåºä»ä¸Šåˆ°ä¸‹çš„ã€‚ç»“åˆä¸Šä¸€æ¡è§„åˆ™ï¼Œåœ¨<code>select</code>è¯­å¥å¼€å§‹æ‰§è¡Œæ—¶ï¼Œæ’åœ¨æœ€ä¸Šè¾¹çš„å€™é€‰åˆ†æ”¯ä¸­æœ€å·¦è¾¹çš„è¡¨è¾¾å¼ä¼šæœ€å…ˆè¢«æ±‚å€¼ï¼Œç„¶åæ˜¯å®ƒå³è¾¹çš„è¡¨è¾¾å¼ã€‚ä»…å½“æœ€ä¸Šè¾¹çš„å€™é€‰åˆ†æ”¯ä¸­çš„æ‰€æœ‰è¡¨è¾¾å¼éƒ½è¢«æ±‚å€¼å®Œæ¯•åï¼Œä»ä¸Šè¾¹æ•°ç¬¬äºŒä¸ªå€™é€‰åˆ†æ”¯ä¸­çš„è¡¨è¾¾å¼æ‰ä¼šè¢«æ±‚å€¼ï¼Œé¡ºåºåŒæ ·æ˜¯ä»å·¦åˆ°å³ï¼Œç„¶åæ˜¯ç¬¬ä¸‰ä¸ªå€™é€‰åˆ†æ”¯ã€ç¬¬å››ä¸ªå€™é€‰åˆ†æ”¯ï¼Œä»¥æ­¤ç±»æ¨ã€‚<br>\n<br></li>\n<li>å¯¹äºæ¯ä¸€ä¸ª<code>case</code>è¡¨è¾¾å¼ï¼Œå¦‚æœå…¶ä¸­çš„å‘é€è¡¨è¾¾å¼æˆ–è€…æ¥æ”¶è¡¨è¾¾å¼åœ¨è¢«æ±‚å€¼æ—¶ï¼Œç›¸åº”çš„æ“ä½œæ­£å¤„äºé˜»å¡çŠ¶æ€ï¼Œé‚£ä¹ˆå¯¹è¯¥<code>case</code>è¡¨è¾¾å¼çš„æ±‚å€¼å°±æ˜¯ä¸æˆåŠŸçš„ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥è¯´ï¼Œè¿™ä¸ª<code>case</code>è¡¨è¾¾å¼æ‰€åœ¨çš„å€™é€‰åˆ†æ”¯æ˜¯ä¸æ»¡è¶³é€‰æ‹©æ¡ä»¶çš„ã€‚<br>\n<br></li>\n<li>ä»…å½“<code>select</code>è¯­å¥ä¸­çš„æ‰€æœ‰<code>case</code>è¡¨è¾¾å¼éƒ½è¢«æ±‚å€¼å®Œæ¯•åï¼Œå®ƒæ‰ä¼šå¼€å§‹é€‰æ‹©å€™é€‰åˆ†æ”¯ã€‚è¿™æ—¶å€™ï¼Œå®ƒåªä¼šæŒ‘é€‰æ»¡è¶³é€‰æ‹©æ¡ä»¶çš„å€™é€‰åˆ†æ”¯æ‰§è¡Œã€‚å¦‚æœæ‰€æœ‰çš„å€™é€‰åˆ†æ”¯éƒ½ä¸æ»¡è¶³é€‰æ‹©æ¡ä»¶ï¼Œé‚£ä¹ˆé»˜è®¤åˆ†æ”¯å°±ä¼šè¢«æ‰§è¡Œã€‚å¦‚æœè¿™æ—¶æ²¡æœ‰é»˜è®¤åˆ†æ”¯ï¼Œé‚£ä¹ˆ<code>select</code>è¯­å¥å°±ä¼šç«‹å³è¿›å…¥é˜»å¡çŠ¶æ€ï¼Œç›´åˆ°è‡³å°‘æœ‰ä¸€ä¸ªå€™é€‰åˆ†æ”¯æ»¡è¶³é€‰æ‹©æ¡ä»¶ä¸ºæ­¢ã€‚ä¸€æ—¦æœ‰ä¸€ä¸ªå€™é€‰åˆ†æ”¯æ»¡è¶³é€‰æ‹©æ¡ä»¶ï¼Œ<code>select</code>è¯­å¥ï¼ˆæˆ–è€…è¯´å®ƒæ‰€åœ¨çš„goroutineï¼‰å°±ä¼šè¢«å”¤é†’ï¼Œè¿™ä¸ªå€™é€‰åˆ†æ”¯å°±ä¼šè¢«æ‰§è¡Œã€‚<br>\n<br></li>\n<li>å¦‚æœ<code>select</code>è¯­å¥å‘ç°åŒæ—¶æœ‰å¤šä¸ªå€™é€‰åˆ†æ”¯æ»¡è¶³é€‰æ‹©æ¡ä»¶ï¼Œé‚£ä¹ˆå®ƒå°±ä¼šç”¨ä¸€ç§ä¼ªéšæœºçš„ç®—æ³•åœ¨è¿™äº›åˆ†æ”¯ä¸­é€‰æ‹©ä¸€ä¸ªå¹¶æ‰§è¡Œã€‚æ³¨æ„ï¼Œå³ä½¿<code>select</code>è¯­å¥æ˜¯åœ¨è¢«å”¤é†’æ—¶å‘ç°çš„è¿™ç§æƒ…å†µï¼Œä¹Ÿä¼šè¿™æ ·åšã€‚<br>\n<br></li>\n<li>ä¸€æ¡<code>select</code>è¯­å¥ä¸­åªèƒ½å¤Ÿæœ‰ä¸€ä¸ªé»˜è®¤åˆ†æ”¯ã€‚å¹¶ä¸”ï¼Œé»˜è®¤åˆ†æ”¯åªåœ¨æ— å€™é€‰åˆ†æ”¯å¯é€‰æ—¶æ‰ä¼šè¢«æ‰§è¡Œï¼Œè¿™ä¸å®ƒçš„ç¼–å†™ä½ç½®æ— å…³ã€‚<br>\n<br></li>\n<li><code>select</code>è¯­å¥çš„æ¯æ¬¡æ‰§è¡Œï¼ŒåŒ…æ‹¬<code>case</code>è¡¨è¾¾å¼æ±‚å€¼å’Œåˆ†æ”¯é€‰æ‹©ï¼Œéƒ½æ˜¯ç‹¬ç«‹çš„ã€‚ä¸è¿‡ï¼Œè‡³äºå®ƒçš„æ‰§è¡Œæ˜¯å¦æ˜¯å¹¶å‘å®‰å…¨çš„ï¼Œå°±è¦çœ‹å…¶ä¸­çš„<code>case</code>è¡¨è¾¾å¼ä»¥åŠåˆ†æ”¯ä¸­ï¼Œæ˜¯å¦åŒ…å«å¹¶å‘ä¸å®‰å…¨çš„ä»£ç äº†ã€‚</li>\n</ol><p>æˆ‘æŠŠä¸ä»¥ä¸Šè§„åˆ™ç›¸å…³çš„ç¤ºä¾‹æ”¾åœ¨demo25.goæ–‡ä»¶ä¸­äº†ã€‚ä½ ä¸€å®šè¦å»è¯•è¿è¡Œä¸€ä¸‹ï¼Œç„¶åå°è¯•ç”¨ä¸Šé¢çš„è§„åˆ™å»è§£é‡Šå®ƒçš„è¾“å‡ºå†…å®¹ã€‚</p><p><strong>æ€»ç»“</strong></p><p>ä»Šå¤©ï¼Œæˆ‘ä»¬å…ˆè®²äº†å•å‘é€šé“çš„è¡¨ç¤ºæ–¹æ³•ï¼Œæ“ä½œç¬¦â€œ<code>&lt;-</code>â€ä»ç„¶æ˜¯å…³é”®ã€‚å¦‚æœåªç”¨ä¸€ä¸ªè¯æ¥æ¦‚æ‹¬å•å‘é€šé“å­˜åœ¨çš„æ„ä¹‰çš„è¯ï¼Œé‚£å°±æ˜¯â€œçº¦æŸâ€ï¼Œä¹Ÿå°±æ˜¯å¯¹ä»£ç çš„çº¦æŸã€‚</p><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¸¦<code>range</code>å­å¥çš„<code>for</code>è¯­å¥ä»é€šé“ä¸­è·å–æ•°æ®ï¼Œä¹Ÿå¯ä»¥é€šè¿‡<code>select</code>è¯­å¥æ“çºµé€šé“ã€‚</p><p><code>select</code>è¯­å¥æ˜¯ä¸“é—¨ä¸ºé€šé“è€Œè®¾è®¡çš„ï¼Œå®ƒå¯ä»¥åŒ…å«è‹¥å¹²ä¸ªå€™é€‰åˆ†æ”¯ï¼Œæ¯ä¸ªåˆ†æ”¯ä¸­çš„<code>case</code>è¡¨è¾¾å¼éƒ½ä¼šåŒ…å«é’ˆå¯¹æŸä¸ªé€šé“çš„å‘é€æˆ–æ¥æ”¶æ“ä½œã€‚</p><p>å½“<code>select</code>è¯­å¥è¢«æ‰§è¡Œæ—¶ï¼Œå®ƒä¼šæ ¹æ®ä¸€å¥—<strong>åˆ†æ”¯é€‰æ‹©è§„åˆ™</strong>é€‰ä¸­æŸä¸€ä¸ªåˆ†æ”¯å¹¶æ‰§è¡Œå…¶ä¸­çš„ä»£ç ã€‚å¦‚æœæ‰€æœ‰çš„å€™é€‰åˆ†æ”¯éƒ½æ²¡æœ‰è¢«é€‰ä¸­ï¼Œé‚£ä¹ˆé»˜è®¤åˆ†æ”¯ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰å°±ä¼šè¢«æ‰§è¡Œã€‚æ³¨æ„ï¼Œå‘é€å’Œæ¥æ”¶æ“ä½œçš„é˜»å¡æ˜¯åˆ†æ”¯é€‰æ‹©è§„åˆ™çš„ä¸€ä¸ªå¾ˆé‡è¦çš„ä¾æ®ã€‚</p><p><strong>æ€è€ƒé¢˜</strong></p><p>ä»Šå¤©çš„æ€è€ƒé¢˜éƒ½ç”±ä¸Šè¿°å†…å®¹ä¸­çš„çº¿ç´¢å»¶ä¼¸è€Œæ¥ã€‚</p><ol>\n<li>å¦‚æœåœ¨<code>select</code>è¯­å¥ä¸­å‘ç°æŸä¸ªé€šé“å·²å…³é—­ï¼Œé‚£ä¹ˆåº”è¯¥æ€æ ·å±è”½æ‰å®ƒæ‰€åœ¨çš„åˆ†æ”¯ï¼Ÿ</li>\n<li>åœ¨<code>select</code>è¯­å¥ä¸<code>for</code>è¯­å¥è”ç”¨æ—¶ï¼Œæ€æ ·ç›´æ¥é€€å‡ºå¤–å±‚çš„<code>for</code>è¯­å¥ï¼Ÿ</li>\n</ol><p><a href=\"https://github.com/hyper0x/Golang_Puzzlers\">æˆ³æ­¤æŸ¥çœ‹Goè¯­è¨€ä¸“æ æ–‡ç« é…å¥—è¯¦ç»†ä»£ç ã€‚</a></p>","neighbors":{"left":{"article_title":"10 | é€šé“çš„åŸºæœ¬æ“ä½œ","id":14660},"right":{"article_title":"12 | ä½¿ç”¨å‡½æ•°çš„æ­£ç¡®å§¿åŠ¿","id":14671}},"comments":[{"had_liked":false,"id":23007,"user_name":"æ±Ÿå±±å¦‚ç”»","can_delete":false,"product_type":"c1","uid":1188280,"ip_address":"","ucode":"BEB6228E6135B5","user_header":"https://static001.geekbang.org/account/avatar/00/12/21/b8/aca814dd.jpg","comment_is_top":false,"comment_ctime":1536109936,"is_pvip":false,"discussion_count":7,"race_medal":0,"score":"418147937648","product_id":100013101,"comment_content":"æ„Ÿè§‰æ–¹æ³•åº”è¯¥æŒºå¤šï¼Œå°±çœ‹è§£å†³çš„æ˜¯ä¸æ˜¯ä¼˜é›…<br><br>ç¬¬ä¸€ä¸ªé—®é¢˜ï¼šå‘ç°æŸä¸ªchannelè¢«å…³é—­åï¼Œä¸ºäº†é˜²æ­¢å†æ¬¡è¿›å…¥è¿™ä¸ªåˆ†æ”¯ï¼Œå¯ä»¥æŠŠè¿™ä¸ªchannelé‡æ–°èµ‹å€¼æˆä¸ºä¸€ä¸ªé•¿åº¦ä¸º0çš„éç¼“å†²é€šé“ï¼Œè¿™æ ·è¿™ä¸ªcaseå°±ä¸€ç›´è¢«é˜»å¡äº†ï¼š<br>for {<br>\t\tselect {<br>\t\tcase _, ok := &lt;-ch1:<br>\t\t\tif !ok {<br>\t\t\t\tch1 = make(chan int)<br>\t\t\t}<br>\t\tcase ..... :<br>\t\t\t&#47;&#47;&#47;&#47;<br>\t\tdefault:<br>\t\t\t&#47;&#47;&#47;&#47;\t<br>\t\t}<br>\t}<br><br>ç¬¬äºŒä¸ªé—®é¢˜ï¼šå¯ä»¥ç”¨ breakå’Œæ ‡ç­¾é…åˆä½¿ç”¨ï¼Œç›´æ¥breakå‡ºæŒ‡å®šçš„å¾ªç¯ä½“ï¼Œæˆ–è€…gotoè¯­å¥ç›´æ¥è·³è½¬åˆ°æŒ‡å®šæ ‡ç­¾æ‰§è¡Œ<br><br>breaké…åˆæ ‡ç­¾ï¼š<br><br>ch1 := make(chan int, 1)<br>\ttime.AfterFunc(time.Second, func() { close(ch1) })<br>loop:<br>\tfor {<br>\t\tselect {<br>\t\tcase _, ok := &lt;-ch1:<br>\t\t\tif !ok {<br>\t\t\t\tbreak loop<br>\t\t\t}<br>\t\t\tfmt.Println(&quot;ch1&quot;)<br>\t\t}<br>\t}<br>\tfmt.Println(&quot;END&quot;)<br><br>gotoé…åˆæ ‡ç­¾ï¼š<br><br>ch1 := make(chan int, 1)<br>\ttime.AfterFunc(time.Second, func() { close(ch1) })<br>\tfor {<br>\t\tselect {<br>\t\tcase _, ok := &lt;-ch1:<br>\t\t\tif !ok {<br>\t\t\t\tgoto loop<br>\t\t\t}<br>\t\t\tfmt.Println(&quot;ch1&quot;)<br>\t\t}<br>\t}<br>loop:<br>\tfmt.Println(&quot;END&quot;)","like_count":98,"discussions":[{"author":{"id":1239277,"avatar":"https://static001.geekbang.org/account/avatar/00/12/e8/ed/f9347e5e.jpg","nickname":"æˆ‘çš„è…¿è…¿","note":"","ucode":"2AAA36A7C3AD75","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":324169,"discussion_content":"ç›´æ¥return å¯ä»¥å—ï¼Ÿ\n","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1605064134,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2334257,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/4fZ9thib248ZkR1N3Eekeyb8N1V1Ud0uePctlI4VQUibPSmEZvgoP0VYl6IsVHJc7ZMiczQMtU76y6E6ag1zNAK4Q/132","nickname":"Geek_336577","note":"","ucode":"4826355EBA4950","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1239277,"avatar":"https://static001.geekbang.org/account/avatar/00/12/e8/ed/f9347e5e.jpg","nickname":"æˆ‘çš„è…¿è…¿","note":"","ucode":"2AAA36A7C3AD75","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":353145,"discussion_content":"é‚£å°±çœ‹ä½ è¿™ä¸ªä»£ç æ®µæ‰€åœ¨çš„å‡½æ•°æ˜¯ä¸æ˜¯è¿˜æœ‰åç»­ä»£ç è¦è¿è¡Œï¼Œå¦‚æœè¿˜æœ‰ä»»åŠ¡è¦è¿è¡Œé‚£å°±ä¸è¡Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615033436,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":324169,"ip_address":""},"score":353145,"extra":""}]},{"author":{"id":1236156,"avatar":"https://static001.geekbang.org/account/avatar/00/12/dc/bc/3c5a1634.jpg","nickname":"Loyalty","note":"","ucode":"C23EE6878580C4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585590,"discussion_content":"è®¾ç½®ä¸ºä¸å¸¦ç¼“å†²åŒºçš„ä¸ä¼šå°†å…¶ç½®ä¸ºé˜»å¡ï¼Œæœ‰å…¥chanæ²¡æœ‰å‡ºæˆ–è€…æ²¡æœ‰å…¥chanæœ‰å‡ºæ‰ä¼šé˜»å¡ï¼Œä½ è¿™ä¸ªä¹Ÿæ²¡æœ‰å…¥ï¼Œselectä¼šä¸€ç›´å»æŸ¥çœ‹å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661691961,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1649662,"avatar":"https://static001.geekbang.org/account/avatar/00/19/2b/fe/7925eb7e.jpg","nickname":"pdf","note":"","ucode":"A44250955878BB","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":314108,"discussion_content":"è¯·é—®\nchan struct{}\nchan int\nå“ªä¸ªä¼šå¥½ä¸€ç‚¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603117756,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2550566,"avatar":"","nickname":"brad","note":"","ucode":"B836AEA074B7BA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1649662,"avatar":"https://static001.geekbang.org/account/avatar/00/19/2b/fe/7925eb7e.jpg","nickname":"pdf","note":"","ucode":"A44250955878BB","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":365267,"discussion_content":"chan struct{}","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617758103,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":314108,"ip_address":""},"score":365267,"extra":""}]},{"author":{"id":1676966,"avatar":"https://static001.geekbang.org/account/avatar/00/19/96/a6/32a286e0.jpg","nickname":"å¤§é›„","note":"","ucode":"5FCFDD3A940801","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":62395,"discussion_content":"ç‰›é€¼\nè¿™ä¸€çœ‹ä¸å°±æ˜¯æ–°æ‰‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574840238,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1459980,"avatar":"https://static001.geekbang.org/account/avatar/00/16/47/0c/f2f0245e.jpg","nickname":"ğŸ¶","note":"","ucode":"D9E46DDB64BA77","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4478,"discussion_content":"ä¼˜é›…ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565452242,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":27308,"user_name":"ä»»æ€§ğŸ˜€","can_delete":false,"product_type":"c1","uid":1209711,"ip_address":"","ucode":"F80DB5E6896105","user_header":"https://static001.geekbang.org/account/avatar/00/12/75/6f/8a6e0a14.jpg","comment_is_top":false,"comment_ctime":1537869578,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"246351005450","product_id":100013101,"comment_content":"demo24é‡Œè¾¹å°‘äº†rand.Seed(time.Now().Unix())ï¼Œä¸ç„¶æ¯æ¬¡éšæœºæ•°éƒ½æ˜¯å›ºå®šçš„é¡ºåº","like_count":58},{"had_liked":false,"id":79363,"user_name":"å·¦æ°§ä½›æ²™æ˜Ÿäºº","can_delete":false,"product_type":"c1","uid":1195278,"ip_address":"","ucode":"0D8295E1DABA8C","user_header":"https://static001.geekbang.org/account/avatar/00/12/3d/0e/92176eaa.jpg","comment_is_top":false,"comment_ctime":1553447273,"is_pvip":true,"replies":[{"id":"29065","content":"å› ä¸º make(chan int) åˆå§‹åŒ–çš„æ˜¯ä¸å¸¦ç¼“å†²çš„é€šé“ã€‚éç¼“å†²é€šé“åªæœ‰åœ¨æ”¶å‘åŒæ–¹éƒ½å°±ç»ªçš„æƒ…å†µä¸‹æ‰èƒ½ä¼ é€’å…ƒç´ å€¼ï¼Œå¦åˆ™å°±é˜»å¡ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1553531388,"ip_address":"","comment_id":79363,"utype":1}],"discussion_count":2,"race_medal":0,"score":"130402466153","product_id":100013101,"comment_content":"è€å¸ˆå¥½ï¼Œdemo25ä¸­çš„è¿™æ®µä»£ç æˆ‘æ²¡çœ‹æ‡‚ï¼Œä¸æ˜¯è¿™ä¸ªåŒ¹é…ä¸Šäº†å—ï¼Ÿä¸ºå•¥æ²¡æœ‰æ‰§è¡Œå‘¢ï¼Ÿæˆ‘ç†è§£åº”è¯¥æ‰“å°The second candidate case is selected.ã€‚ã€‚ã€‚ã€‚<br>```<br>case getChan(1) &lt;- getNumber(1):<br>```<br>èƒ½æŒ‡ç‚¹ä¸€ä¸‹å—ï¼Ÿ","like_count":31,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":444468,"discussion_content":"å› ä¸º make(chan int) åˆå§‹åŒ–çš„æ˜¯ä¸å¸¦ç¼“å†²çš„é€šé“ã€‚éç¼“å†²é€šé“åªæœ‰åœ¨æ”¶å‘åŒæ–¹éƒ½å°±ç»ªçš„æƒ…å†µä¸‹æ‰èƒ½ä¼ é€’å…ƒç´ å€¼ï¼Œå¦åˆ™å°±é˜»å¡ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553531388,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2811353,"avatar":"","nickname":"Geek3977","note":"","ucode":"7BE3A2592A2D36","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":560216,"discussion_content":"æ‰€ä»¥æ”¹é€ ä¸€ä¸‹ç¨‹åºï¼Œå¢åŠ ä¸€ä¸ªæ¥å—æ–¹ï¼Œåº”è¯¥å°±èƒ½åŒ¹é…ä¸Šäº†ï¼š\néœ€è¦æŠŠæ¥æ”¶è¯­å¥å’Œdemoä¸­çš„selectè¯­å¥å—åˆ†åˆ«æ”¾åˆ°goè¯­å¥ä¸­ï¼Œå¹¶åœ¨mainä¸­é€šè¿‡sync.WaitGroupæ§åˆ¶","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649231383,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":34859,"user_name":"åˆ°ä¸äº†çš„å¡”","can_delete":false,"product_type":"c1","uid":1258362,"ip_address":"","ucode":"0F5BE3CB58DE31","user_header":"https://static001.geekbang.org/account/avatar/00/13/33/7a/ac307bfc.jpg","comment_is_top":false,"comment_ctime":1540342027,"is_pvip":false,"replies":[{"id":"13317","content":"è®¾ç½®ä¸ºnilå°±å¯ä»¥äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1541482543,"ip_address":"","comment_id":34859,"utype":1}],"discussion_count":2,"race_medal":0,"score":"74554786059","product_id":100013101,"comment_content":"éƒè€å¸ˆï¼Œè¯·é—®ç¬¬ä¸€é¢˜çš„ç­”æ¡ˆæ˜¯å•¥ï¼Œä¸çŸ¥é“æ€ä¹ˆå±è”½åˆ†æ”¯å‘¢","like_count":18,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":427365,"discussion_content":"è®¾ç½®ä¸ºnilå°±å¯ä»¥äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1541482543,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1254138,"avatar":"https://static001.geekbang.org/account/avatar/00/13/22/fa/671d2937.jpg","nickname":"é‡æ–°æ¥è¿‡","note":"","ucode":"27CC35140B63F3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":389669,"discussion_content":"è€å¸ˆæ˜¯è®¾ç½®é€šé“ä¸ºnilå—ï¼Ÿæˆ‘æµ‹è¯•è¿™æ ·ä¸è¡Œ\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629370996,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":23039,"user_name":"ç¬¨ç¬¨","can_delete":false,"product_type":"c1","uid":1005351,"ip_address":"","ucode":"6DA6DCAF6A7DCB","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/27/805786be.jpg","comment_is_top":false,"comment_ctime":1536116745,"is_pvip":true,"replies":[{"id":"8401","content":"ä½ çš„é—®é¢˜æ˜¯ä»€ä¹ˆï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1536215996,"ip_address":"","comment_id":23039,"utype":1}],"discussion_count":1,"race_medal":0,"score":"70255593481","product_id":100013101,"comment_content":"è°¢è°¢èµ«è€å¸ˆä»Šæ—¥åˆ†äº«ï¼Œå›ç­”é—®é¢˜å¦‚ä¸‹<br>1.å¯¹äºselectä¸­è¢«closeçš„channelåˆ¤æ–­å…¶ç¬¬äºŒä¸ªbooleanå‚æ•°ï¼Œå¦‚æœæ˜¯falseåˆ™è¢«å…³é—­ï¼Œé‚£ä¹ˆèµ‹å€¼æ­¤channelä¸ºnilï¼Œé‚£ä¹ˆæ¯æ¬¡åˆ°è¿™ä¸ªnilçš„channelå°±ä¼šé˜»å¡ï¼Œselectä¼šå¿½ç•¥é˜»å¡çš„é€šé“ï¼Œå¦‚æœå†æ­é…ä¸Šdefaultå°±ä¸€å®šèƒ½ä¿è¯ä¸ä¼šè¢«é˜»å¡äº†ã€‚<br>2.é€šè¿‡å®šä¹‰æ ‡ç­¾ï¼Œé…åˆgotoæˆ–è€…breakèƒ½å®ç°åœ¨åŒä¸€ä¸ªå‡½æ•°å†…ä»»æ„è·³è½¬ï¼Œæ•…å¯ä»¥è·³å‡ºå¤šå±‚åµŒå¥—çš„å¾ªç¯ã€‚","like_count":17,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423383,"discussion_content":"ä½ çš„é—®é¢˜æ˜¯ä»€ä¹ˆï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536215996,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":68705,"user_name":"zhaopan","can_delete":false,"product_type":"c1","uid":1151132,"ip_address":"","ucode":"2AD77203285F6E","user_header":"https://static001.geekbang.org/account/avatar/00/11/90/9c/532446e4.jpg","comment_is_top":false,"comment_ctime":1550580197,"is_pvip":false,"replies":[{"id":"25260","content":"è¿™é‡Œåªä¼šæ£€æŸ¥ä¸€ä¸‹æ¥æ”¶æ“ä½œæˆ–å‘é€æ“ä½œæ˜¯å¦å¯ä»¥è¿›è¡Œï¼ˆæ˜¯å¦ä¸ä¼šè¢«é˜»å¡ï¼‰ã€‚æœ‰å…´è¶£çš„è¯å¯ä»¥çœ‹ä¸€ä¸‹ runtime&#47;select.go ä¸­çš„ selectgo å‡½æ•°çš„æºç ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1551184025,"ip_address":"","comment_id":68705,"utype":1}],"discussion_count":1,"race_medal":0,"score":"48795220453","product_id":100013101,"comment_content":"è€å¸ˆå¥½:<br>ä»…å½“selectè¯­å¥ä¸­çš„æ‰€æœ‰caseè¡¨è¾¾å¼éƒ½è¢«æ±‚å€¼å®Œæ¯•åï¼Œå®ƒæ‰ä¼šå¼€å§‹é€‰æ‹©å€™é€‰åˆ†æ”¯ã€‚<br>å½“æ¥æ”¶é€šé“æ“ä½œæœ‰å¤šä¸ªæ»¡è¶³æ¡ä»¶æ—¶, è¿™é‡Œçš„æ‰€æœ‰caseè¡¨è¾¾å¼éƒ½è¢«æ±‚å€¼å®Œæ¯•, åº”è¯¥æ€ä¹ˆç†è§£? <br>æ˜¯å¤šä¸ªcaseè¡¨è¾¾å¼éƒ½èƒ½æ¥æ”¶åˆ°é€šé“çš„æ•°æ®ä¹ˆ?<br>å¦‚æœéƒ½æ¥æ”¶äº†, éšæœºé€‰æ‹©ä¸€ä¸ªåˆ†æ”¯å»å¤„ç†æ¥æ”¶çš„é€šé“æ•°æ®. é‚£å…¶ä»–æ»¡è¶³æ¡ä»¶çš„caseåˆ†æ”¯æ€ä¹ˆæ‰§è¡Œåˆ°äº†?<br>å¦‚æœæ˜¯å¤–å±‚åŠ forå¾ªç¯, é‡æ–°selectè¯­å¥, é‚£ä¸Šä¸€æ¬¡selectçš„æ“ä½œå…¶ä»–æ»¡è¶³æ¡ä»¶æœªè¢«é€‰æ‹©çš„caseè¿˜èƒ½æ”¶åˆ°ä¸Šä¸€æ¬¡çš„æ•°æ®ä¹ˆ?<br>è¿™é‡Œçš„åŸç†æ˜¯ä»€ä¹ˆå‘¢?<br>","like_count":11,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":439807,"discussion_content":"è¿™é‡Œåªä¼šæ£€æŸ¥ä¸€ä¸‹æ¥æ”¶æ“ä½œæˆ–å‘é€æ“ä½œæ˜¯å¦å¯ä»¥è¿›è¡Œï¼ˆæ˜¯å¦ä¸ä¼šè¢«é˜»å¡ï¼‰ã€‚æœ‰å…´è¶£çš„è¯å¯ä»¥çœ‹ä¸€ä¸‹ runtime/select.go ä¸­çš„ selectgo å‡½æ•°çš„æºç ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551184025,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":65957,"user_name":"ğŸ»","can_delete":false,"product_type":"c1","uid":1043072,"ip_address":"","ucode":"534EDAD496A0E6","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ea/80/8759e4c1.jpg","comment_is_top":false,"comment_ctime":1549798326,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"40204503990","product_id":100013101,"comment_content":"https:&#47;&#47;stackoverflow.com&#47;questions&#47;25469682&#47;break-out-of-select-loop<br><br>for-select break æ–¹æ³•ã€‚","like_count":9},{"had_liked":false,"id":57178,"user_name":"é˜¿æµ·","can_delete":false,"product_type":"c1","uid":1281585,"ip_address":"","ucode":"2589431F840C42","user_header":"https://static001.geekbang.org/account/avatar/00/13/8e/31/28972804.jpg","comment_is_top":false,"comment_ctime":1546672933,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"35906411301","product_id":100013101,"comment_content":"è¿è¡Œäº†demo25.go, å‘ç°ç»“æœæ˜¯No candidate case is selectedï¼ŒåŸå› è·Ÿ<br>var channels = [3]chan int{<br>\tnil,<br>\tmake(chan int, 1),<br>\tnil,<br>}<br>æœ‰å…³ï¼Œå› ä¸ºchannels[0], channels[2]éƒ½æ˜¯nilï¼Œæ‰€ä»¥select caseæ—¶é˜»å¡ï¼Œè€Œchannels[1]åˆå§‹åŒ–ä¸ºæ— ç¼“å­˜channelï¼Œå½“æ²¡æœ‰ä»channels[1]å–å€¼æ—¶ï¼Œselect caseé˜»å¡ï¼Œæ‰€ä»¥ä¸€è½®ä¸‹æ¥ï¼Œæ²¡æœ‰ç¬¦åˆçš„æ¡ä»¶caseï¼Œåªèƒ½è¿è¡Œcase defaultäº†ã€‚","like_count":8,"discussions":[{"author":{"id":1676966,"avatar":"https://static001.geekbang.org/account/avatar/00/19/96/a6/32a286e0.jpg","nickname":"å¤§é›„","note":"","ucode":"5FCFDD3A940801","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":62399,"discussion_content":"var channels = [3]chan int{\n\tnil,\n\tmake(chan int),\n\tnil,\n}\nå†…å®¹ä¸æ˜¯è¿™ä¸ªä¹ˆã€‚ é»˜è®¤ä¸º0ï¼Œæ˜¯éç¼“å­˜é€šé“æ‰€ä»¥å µå¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574840378,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":23721,"user_name":"å•µå•µ","can_delete":false,"product_type":"c1","uid":1118843,"ip_address":"","ucode":"627A3E72DBFF79","user_header":"https://static001.geekbang.org/account/avatar/00/11/12/7b/5da66a2f.jpg","comment_is_top":false,"comment_ctime":1536625319,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"35896363687","product_id":100013101,"comment_content":"ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœåˆ¤æ–­åˆ°chanå…³é—­ï¼Œå³å–åˆ°çš„ç¬¬äºŒä¸ªå€¼ä¸ºfalseã€‚åˆ™å°†è¯¥chanèµ‹å€¼ä¸ºnilã€‚<br>ç¬¬äºŒä¸ªé—®é¢˜ï¼Œæ ¹æ®æƒ…å†µä½¿ç”¨gotoæˆ–è€…returnã€‚æˆ–è€…åŠ ä¸€ä¸ªæ˜¯å¦ç»“æŸçš„æ ‡è¯†ï¼Œgotoç„¶åç”¨ä¸¤ä¸ªbreakã€‚","like_count":9},{"had_liked":false,"id":36976,"user_name":"heha37","can_delete":false,"product_type":"c1","uid":1008962,"ip_address":"","ucode":"13C180307574A6","user_header":"https://static001.geekbang.org/account/avatar/00/0f/65/42/76eb78bd.jpg","comment_is_top":false,"comment_ctime":1541410466,"is_pvip":true,"replies":[{"id":"13295","content":"æ˜¯çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1541480649,"ip_address":"","comment_id":36976,"utype":1}],"discussion_count":1,"race_medal":0,"score":"31606181538","product_id":100013101,"comment_content":"å½“ç¬¬äºŒä¸ªbooleanå‚æ•°ä¸ºfalseçš„æ—¶å€™ï¼Œåœ¨ç›¸åº”çš„caseä¸­è®¾ç½®chanä¸ºnilé›¶å€¼ï¼Œå†æ¬¡caseæ±‚å€¼çš„æ—¶å€™ä¼šé­é‡é˜»å¡ï¼Œä¼šå±è”½è¯¥caseã€‚","like_count":8,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":428105,"discussion_content":"æ˜¯çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1541480649,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":130966,"user_name":"Tron","can_delete":false,"product_type":"c1","uid":1130053,"ip_address":"","ucode":"2C4FC68C80A7DD","user_header":"https://static001.geekbang.org/account/avatar/00/11/3e/45/3879f334.jpg","comment_is_top":false,"comment_ctime":1567584790,"is_pvip":false,"replies":[{"id":"49382","content":"é¦–å…ˆä¿®æ­£ä¸€ç‚¹ï¼Œè¿™ä¸è¿›ç¨‹æ— å…³ï¼Œä¸ goroutine æœ‰å…³ï¼Œè€Œä¸”æ²¡æœ‰çˆ¶å­å…³ç³»ã€‚<br><br>æ­£é¢˜å›ç­”ï¼šä¸èƒ½ã€‚å› ä¸ºç¨‹åºæµç¨‹å·²ç»èµ°åˆ° downloadBigBigFile() è¿™é‡Œäº†ï¼Œä¸å¯èƒ½åœ¨æ²¡æœ‰å¾ªç¯æˆ–è·³è½¬çš„æƒ…å†µä¸‹å†å¾€å›èµ°ã€‚<br><br>çœ‹èµ·æ¥ä½ åº”è¯¥æŠŠ ctx æ”¾å…¥ downloadBigBigFile å‡½æ•°ï¼Œç„¶ååœ¨è¿™ä¸ªå‡½æ•°é‡Œåšåˆ¤æ–­ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1567653913,"ip_address":"","comment_id":130966,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23042421270","product_id":100013101,"comment_content":"è¯·æ•™è€å¸ˆä¸€ä¸ªé—®é¢˜, å¦‚æœæˆ‘ç”¨context å–æ¶ˆä¸€ä¸ªæ­£åœ¨æ‰§è¡Œçš„ä¸‹è½½ä»»åŠ¡ï¼Œå½¢å¦‚ï¼š<br>select {<br>    case i := &lt;- jobs:<br>          downloadBigBigFile()<br>    case ctx &lt;-Done<br>          return<br>}<br><br>å½“ çˆ¶è¿›ç¨‹å‘å‡ºcancel æŒ‡ä»¤åï¼Œ èƒ½å¤Ÿå–æ¶ˆdownloadBigBigFileï¼ˆï¼‰é‡Œé¢è¿è¡Œçš„ä»»åŠ¡å—ï¼Ÿ","like_count":6,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466218,"discussion_content":"é¦–å…ˆä¿®æ­£ä¸€ç‚¹ï¼Œè¿™ä¸è¿›ç¨‹æ— å…³ï¼Œä¸ goroutine æœ‰å…³ï¼Œè€Œä¸”æ²¡æœ‰çˆ¶å­å…³ç³»ã€‚\n\næ­£é¢˜å›ç­”ï¼šä¸èƒ½ã€‚å› ä¸ºç¨‹åºæµç¨‹å·²ç»èµ°åˆ° downloadBigBigFile() è¿™é‡Œäº†ï¼Œä¸å¯èƒ½åœ¨æ²¡æœ‰å¾ªç¯æˆ–è·³è½¬çš„æƒ…å†µä¸‹å†å¾€å›èµ°ã€‚\n\nçœ‹èµ·æ¥ä½ åº”è¯¥æŠŠ ctx æ”¾å…¥ downloadBigBigFile å‡½æ•°ï¼Œç„¶ååœ¨è¿™ä¸ªå‡½æ•°é‡Œåšåˆ¤æ–­ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567653913,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":88740,"user_name":"Flo","can_delete":false,"product_type":"c1","uid":1206979,"ip_address":"","ucode":"B7B721892229B8","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoCl6Nxf9oW9mGnZj6iarW2ica5uE7dTQ1BiaSrPu4lVNkn0VIToLOgC0K4eJrEicia1pIh345WRibMtQlw/132","comment_is_top":false,"comment_ctime":1555988795,"is_pvip":false,"replies":[{"id":"31793","content":"ä¸å¥½æ„æ€ï¼Œé—®é—®é¢˜çš„äººå¤ªå¤šäº†ï¼Œä½ é—®çš„æ—¶å€™æœ€å¥½å¸¦ä¸Šæ¯”è¾ƒå®Œæ•´çš„ä¸Šä¸‹æ–‡ã€‚æˆ‘ä¸‹é¢æŒ‰æˆ‘ç›®å‰å¯¹ä½ é—®é¢˜çš„ç†è§£å›ç­”ä½ å§ã€‚<br><br>select è¯­å¥å¯¹æŸä¸ª case ä¸­çš„é€šé“æ¥æ”¶è¡¨è¾¾å¼çš„å®é™…æ‰§è¡Œéœ€è¦ä¸¤ä¸ªå‰ææ¡ä»¶ï¼š<br><br>1. æ¥æ”¶æ“ä½œä¸ä¼šè¢«é˜»å¡ã€‚<br>2. å½“å‰ case è¢«é€‰ä¸­ã€‚<br><br>å¯¹äº case ä¸­çš„é€šé“å‘é€è¡¨è¾¾å¼æ¥è¯´ä¹Ÿæ˜¯ç±»ä¼¼ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å®Œå…¨ä¸ç”¨æ‹…å¿ƒé‚£äº›æœªè¢«é€‰ä¸­çš„é€šé“æ“ä½œä¼šçªç„¶æ‰§è¡Œã€‚<br><br><br>","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1555996528,"ip_address":"","comment_id":88740,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23030825275","product_id":100013101,"comment_content":"å¯¹zhaopançš„é—®é¢˜ä¸­è€å¸ˆçš„å›å¤å­˜åœ¨ç–‘æƒ‘ï¼Œè€å¸ˆå›å¤å¦‚ä¸‹ï¼šâ€œä½œè€…å›å¤: è¿™é‡Œåªä¼šæ£€æŸ¥ä¸€ä¸‹æ¥æ”¶æ“ä½œæˆ–å‘é€æ“ä½œæ˜¯å¦å¯ä»¥è¿›è¡Œï¼ˆæ˜¯å¦ä¸ä¼šè¢«é˜»å¡ï¼‰ã€‚æœ‰å…´è¶£çš„è¯å¯ä»¥çœ‹ä¸€ä¸‹ runtime&#47;select.go ä¸­çš„ selectgo å‡½æ•°çš„æºç ã€‚â€<br>-----è¿™é‡Œæ˜¯ä¸æ˜¯è¡¨ç¤ºï¼Œå¯¹äºé‚£äº›ç¬¦åˆæ¡ä»¶ä½†æ²¡æœ‰æ‰§è¡Œåˆ°çš„caseï¼Œä¹‹å‰åˆ¤æ–­çš„æ—¶å€™æ˜¯ä¸æ˜¯å¹¶æ²¡æœ‰ä»chanä¸­å–å‡ºæ•°æ®ï¼Ÿ","like_count":5,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":447887,"discussion_content":"ä¸å¥½æ„æ€ï¼Œé—®é—®é¢˜çš„äººå¤ªå¤šäº†ï¼Œä½ é—®çš„æ—¶å€™æœ€å¥½å¸¦ä¸Šæ¯”è¾ƒå®Œæ•´çš„ä¸Šä¸‹æ–‡ã€‚æˆ‘ä¸‹é¢æŒ‰æˆ‘ç›®å‰å¯¹ä½ é—®é¢˜çš„ç†è§£å›ç­”ä½ å§ã€‚\n\nselect è¯­å¥å¯¹æŸä¸ª case ä¸­çš„é€šé“æ¥æ”¶è¡¨è¾¾å¼çš„å®é™…æ‰§è¡Œéœ€è¦ä¸¤ä¸ªå‰ææ¡ä»¶ï¼š\n\n1. æ¥æ”¶æ“ä½œä¸ä¼šè¢«é˜»å¡ã€‚\n2. å½“å‰ case è¢«é€‰ä¸­ã€‚\n\nå¯¹äº case ä¸­çš„é€šé“å‘é€è¡¨è¾¾å¼æ¥è¯´ä¹Ÿæ˜¯ç±»ä¼¼ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å®Œå…¨ä¸ç”¨æ‹…å¿ƒé‚£äº›æœªè¢«é€‰ä¸­çš„é€šé“æ“ä½œä¼šçªç„¶æ‰§è¡Œã€‚\n\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555996528,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":23044,"user_name":"ç™«ç‹‚çš„å°å…µ","can_delete":false,"product_type":"c1","uid":1018069,"ip_address":"","ucode":"77AB0E7A21CEF9","user_header":"https://static001.geekbang.org/account/avatar/00/0f/88/d5/1e8fccab.jpg","comment_is_top":false,"comment_ctime":1536119447,"is_pvip":false,"replies":[{"id":"8400","content":"æ”¾åœ¨forå¾ªç¯é‡Œæ¯æ¬¡ä¹Ÿæ˜¯éšæœºçš„ï¼Œä¸è¿‡å¯ä»¥ç”¨forå¾ªç¯ï¼Œæˆ–è€…å†æ¬¡æ‰§è¡Œselectè¯­å¥ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1536215934,"ip_address":"","comment_id":23044,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23010955927","product_id":100013101,"comment_content":"è¯·é—®å½“selectè¯­å¥å‘ç°å¤šä¸ªåˆ†æ”¯æ»¡è¶³æ¡ä»¶æ—¶éšæœºé€‰æ‹©ä¸€ä¸ªåˆ†æ”¯æ‰§è¡Œ é‚£æ€æ ·è®©å…¶ä»–æ»¡è¶³æ¡ä»¶çš„åˆ†æ”¯æ‰§è¡Œå‘¢ï¼Ÿ for å¾ªç¯ ç­‰å¾…ä¸‹ä¸€æ¬¡å¾ªç¯æ—¶å†æ‰§è¡Œï¼Ÿ ","like_count":5,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423386,"discussion_content":"æ”¾åœ¨forå¾ªç¯é‡Œæ¯æ¬¡ä¹Ÿæ˜¯éšæœºçš„ï¼Œä¸è¿‡å¯ä»¥ç”¨forå¾ªç¯ï¼Œæˆ–è€…å†æ¬¡æ‰§è¡Œselectè¯­å¥ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536215934,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":59308,"user_name":"é•¿æ°","can_delete":false,"product_type":"c1","uid":1312212,"ip_address":"","ucode":"DD52C9494005F7","user_header":"https://static001.geekbang.org/account/avatar/00/14/05/d4/e06bf86d.jpg","comment_is_top":false,"comment_ctime":1547349439,"is_pvip":false,"replies":[{"id":"25235","content":"ä½ å¯ä»¥çœ‹çœ‹æˆ‘åœ¨å‰é¢çš„ï¼ˆç¨‹åºå®ä½“ç›¸å…³çš„ï¼‰æ–‡ç« ä¸­è®²çš„ã€‚ç¨‹åºå®ä½“çš„åç§°å¦‚æœé¦–å­—æ¯å¤§å†™é‚£ä¹ˆå°±è¯´æ˜æ˜¯å…¶è®¿é—®æƒé™æ˜¯å…¬å¼€çš„ï¼Œå¦åˆ™å°±æ˜¯åŒ…çº§ç§æœ‰çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1551180389,"ip_address":"","comment_id":59308,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18727218623","product_id":100013101,"comment_content":"å‡½æ•°å®šä¹‰ï¼Œæœ‰çš„ç”¨é¦–å­—æ¯å¤§å†™çš„å‘½åè§„åˆ™ï¼Œæœ‰çš„ç”¨é©¼å³°å‘½åè§„åˆ™ï¼Œè€å¸ˆèƒ½ä»‹ç»ä¸€ä¸‹goè¯­è¨€ç¼–ç¨‹çš„è§„èŒƒä»‹ç»å—ï¼Ÿ","like_count":4,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436322,"discussion_content":"ä½ å¯ä»¥çœ‹çœ‹æˆ‘åœ¨å‰é¢çš„ï¼ˆç¨‹åºå®ä½“ç›¸å…³çš„ï¼‰æ–‡ç« ä¸­è®²çš„ã€‚ç¨‹åºå®ä½“çš„åç§°å¦‚æœé¦–å­—æ¯å¤§å†™é‚£ä¹ˆå°±è¯´æ˜æ˜¯å…¶è®¿é—®æƒé™æ˜¯å…¬å¼€çš„ï¼Œå¦åˆ™å°±æ˜¯åŒ…çº§ç§æœ‰çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551180389,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":24233,"user_name":"è®¸æ£®æ£®","can_delete":false,"product_type":"c1","uid":1105360,"ip_address":"","ucode":"7C46D56DD8366B","user_header":"https://static001.geekbang.org/account/avatar/00/10/dd/d0/36b6eaf7.jpg","comment_is_top":false,"comment_ctime":1536855909,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18716725093","product_id":100013101,"comment_content":"1 å‘ç°channelæ˜¯closedä¹‹åï¼Œé‡æ–°makeï¼Œä½¿å¾—ä¸ºnilï¼Œä¿è¯ä¸€ç›´ é˜»å¡ã€‚<br><br>\t\ti := 0<br>\t\tfor {<br>\t\t\tselect {<br>\t\t\tcase _, ok := &lt;-c:<br>\t\t\t\tif !ok {<br>\t\t\t\t\tc = make(chan bool)<br>\t\t\t\t\tfmt.Println(&quot;!ok&quot;)<br>\t\t\t\t} else {<br>\t\t\t\t\tfmt.Println(&quot;c:&quot;, c)<br>\t\t\t\t}<br>\t\t\tdefault:<br>\t\t\t\ttime.Sleep(1e9) &#47;&#47; ç­‰å¾…1ç§’é’Ÿ<br>\t\t\t\tfmt.Println(&quot;default, &quot;, i)<br>\t\t\t\ti = i + 1<br>\t\t\t\tif i &gt; 3 {<br>\t\t\t\t\treturn<br>\t\t\t\t}<br>\t\t\t}<br>\t\t}<br>2 <br>return ç›´æ¥é€€å‡ºç¨‹åº<br>break loop &#47;&#47; ç»“åˆloopï¼Œä¼šé€€å‡ºforå¾ªç¯<br>goto end &#47;&#47;ç»“åˆendï¼Œè·³è½¬<br><br>\t&#47;&#47;åœ¨selectè¯­å¥ä¸forè¯­å¥è”ç”¨æ—¶ï¼Œæ€æ ·ç›´æ¥é€€å‡ºå¤–å±‚çš„forè¯­å¥?<br>\ttick := time.Tick(100 * time.Millisecond)<br>\tboom := time.After(500 * time.Millisecond)<br>\t&#47;&#47;loop:<br>\tfor {<br>\t\tselect {<br>\t\tcase &lt;-tick:<br>\t\t\tfmt.Println(&quot;tick.&quot;)<br>\t\tcase &lt;-boom:<br>\t\t\tfmt.Println(&quot;BOOM!&quot;)<br>\t\t\t&#47;&#47; return  &#47;&#47;ç›´æ¥é€€å‡ºç¨‹åº<br>\t\t\t&#47;&#47;break loop &#47;&#47; ç»“åˆloopï¼Œä¼šé€€å‡ºforå¾ªç¯<br>\t\t\tgoto end &#47;&#47;ç»“åˆend<br>\t\tdefault:<br>\t\t\tfmt.Println(&quot;    .&quot;)<br>\t\t\ttime.Sleep(50 * time.Millisecond)<br>\t\t}<br>\t}<br><br>end:<br>\tfmt.Println(&quot;END...&quot;)<br>","like_count":4},{"had_liked":false,"id":23590,"user_name":"Kennedy","can_delete":false,"product_type":"c1","uid":1049022,"ip_address":"","ucode":"C50627007E5ED0","user_header":"https://static001.geekbang.org/account/avatar/00/10/01/be/be358cab.jpg","comment_is_top":false,"comment_ctime":1536539129,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"18716408313","product_id":100013101,"comment_content":"é€šé“çš„ç±»å‹å¦‚æœæ˜¯æ–¹æ³•ï¼Œæ€§èƒ½ä¼šå·®å—ï¼Ÿ","like_count":4},{"had_liked":false,"id":163674,"user_name":"æ°´å…ˆç”Ÿî”","can_delete":false,"product_type":"c1","uid":1249714,"ip_address":"","ucode":"362A71DF511E3E","user_header":"https://static001.geekbang.org/account/avatar/00/13/11/b2/dd0606b2.jpg","comment_is_top":false,"comment_ctime":1576765085,"is_pvip":false,"replies":[{"id":"62323","content":"åœ¨è¿™é‡Œä¸ä¼šï¼Œå› ä¸ºgetIntChanå‡½æ•°å·²ç»æŠŠintChan2å…³é—­äº†ã€‚<br><br>æ–‡ç« é‡Œçš„æè¿°æˆ‘æ”¹è¿›äº†ä¸€ä¸‹ï¼š<br><br>2. é€šå¸¸ï¼Œå½“é€šé“ intChan2 ä¸­æ²¡æœ‰å…ƒç´ å€¼æ—¶ï¼Œè¿™æ¡ for è¯­å¥ä¼šè¢«é˜»å¡åœ¨æœ‰ for å…³é”®å­—çš„é‚£ä¸€è¡Œï¼Œç›´åˆ°æœ‰æ–°çš„å…ƒç´ å€¼å¯å–ã€‚ä¸è¿‡ï¼Œç”±äºè¿™é‡Œçš„ getIntChan å‡½æ•°ä¼šäº‹å…ˆå°† intChan2 å…³é—­ï¼Œæ‰€ä»¥å®ƒåœ¨å–å‡º intChan2 ä¸­çš„æ‰€æœ‰å…ƒç´ å€¼ä¹‹åä¼šç›´æ¥ç»“æŸæ‰§è¡Œã€‚<br><br>åé¢æˆ‘ä¼šè®©ç¼–è¾‘å¸®æˆ‘æ›´æ–°ä¸€ä¸‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1576825235,"ip_address":"","comment_id":163674,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14461666973","product_id":100013101,"comment_content":"â€œäºŒã€å½“intChan2ä¸­æ²¡æœ‰å…ƒç´ å€¼æ—¶ï¼Œå®ƒä¼šè¢«é˜»å¡åœ¨æœ‰forå…³é”®å­—çš„é‚£ä¸€è¡Œï¼Œç›´åˆ°æœ‰æ–°çš„å…ƒç´ å€¼å¯å–ã€‚â€<br>è€å¸ˆï¼Œæˆ‘æœ‰ä¸€ä¸ªç–‘é—®ï¼šfor...range..ä¼šæŠŠchannelçš„å…ƒç´ å…¨éƒ¨å–å‡ºæ¥çš„ï¼Œæ„æ€æ˜¯åˆ°æœ€åï¼Œå°±ä¼šé˜»å¡ä¹ˆï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478501,"discussion_content":"åœ¨è¿™é‡Œä¸ä¼šï¼Œå› ä¸ºgetIntChanå‡½æ•°å·²ç»æŠŠintChan2å…³é—­äº†ã€‚\n\næ–‡ç« é‡Œçš„æè¿°æˆ‘æ”¹è¿›äº†ä¸€ä¸‹ï¼š\n\n2. é€šå¸¸ï¼Œå½“é€šé“ intChan2 ä¸­æ²¡æœ‰å…ƒç´ å€¼æ—¶ï¼Œè¿™æ¡ for è¯­å¥ä¼šè¢«é˜»å¡åœ¨æœ‰ for å…³é”®å­—çš„é‚£ä¸€è¡Œï¼Œç›´åˆ°æœ‰æ–°çš„å…ƒç´ å€¼å¯å–ã€‚ä¸è¿‡ï¼Œç”±äºè¿™é‡Œçš„ getIntChan å‡½æ•°ä¼šäº‹å…ˆå°† intChan2 å…³é—­ï¼Œæ‰€ä»¥å®ƒåœ¨å–å‡º intChan2 ä¸­çš„æ‰€æœ‰å…ƒç´ å€¼ä¹‹åä¼šç›´æ¥ç»“æŸæ‰§è¡Œã€‚\n\nåé¢æˆ‘ä¼šè®©ç¼–è¾‘å¸®æˆ‘æ›´æ–°ä¸€ä¸‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576825235,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":69653,"user_name":"ä¸€åªå‚»å“ˆçš®","can_delete":false,"product_type":"c1","uid":1197402,"ip_address":"","ucode":"D819A20B528E0A","user_header":"https://static001.geekbang.org/account/avatar/00/12/45/5a/97337039.jpg","comment_is_top":false,"comment_ctime":1550803187,"is_pvip":false,"replies":[{"id":"25265","content":"è¿™å±äºè¯­è¨€ç‰¹æ€§ä¹‹ä¸€ï¼Œæ²¡æœ‰ä»€ä¹ˆç‰¹æ®ŠåŸå› ã€‚ä½ å¯ä»¥ç†è§£ä¸ºé¿å…caseä¹¦å†™é¡ºåºå½±å“åˆ°æ‰§è¡Œé¡ºåºã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1551184530,"ip_address":"","comment_id":69653,"utype":1}],"discussion_count":2,"race_medal":0,"score":"14435705075","product_id":100013101,"comment_content":"è¯·é—®selectä¼ªéšæœºæ‰§è¡Œçš„ç›®çš„æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæ²¡å¤ªç†è§£è¿™æ ·åšçš„ç›®çš„ã€‚","like_count":3,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":440207,"discussion_content":"è¿™å±äºè¯­è¨€ç‰¹æ€§ä¹‹ä¸€ï¼Œæ²¡æœ‰ä»€ä¹ˆç‰¹æ®ŠåŸå› ã€‚ä½ å¯ä»¥ç†è§£ä¸ºé¿å…caseä¹¦å†™é¡ºåºå½±å“åˆ°æ‰§è¡Œé¡ºåºã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551184530,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1557834,"avatar":"https://static001.geekbang.org/account/avatar/00/17/c5/4a/340bda41.jpg","nickname":"æ°´é˜¡å¢¨","note":"","ucode":"87C949F0E295A9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":340720,"discussion_content":"è¿™ä¸ªå›å¤çœŸå¥½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610106708,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":24037,"user_name":"Neo","can_delete":false,"product_type":"c1","uid":1070189,"ip_address":"","ucode":"A2B2E2F8780557","user_header":"https://static001.geekbang.org/account/avatar/00/10/54/6d/c947ef55.jpg","comment_is_top":false,"comment_ctime":1536766951,"is_pvip":false,"replies":[{"id":"8932","content":"è¿™ç§æƒ…å†µä¸‹æ˜¯è¿™æ ·ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1536975659,"ip_address":"","comment_id":24037,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14421668839","product_id":100013101,"comment_content":"è¯·é—®è€å¸ˆï¼š <br>select åˆ†æ”¯é€‰æ‹©è§„åˆ™ä¸­ç¬¬5ä¸ªï¼š&quot;å¦‚æœselectè¯­å¥å‘ç°åŒæ—¶æœ‰å¤šä¸ªå€™é€‰åˆ†æ”¯æ»¡è¶³é€‰æ‹©æ¡ä»¶ï¼Œé‚£ä¹ˆå®ƒå°±ä¼šç”¨ä¸€ç§ä¼ªéšæœºç®—æ³•åœ¨è¿™äº›åˆ†æ”¯ä¸­é€‰æ‹©ä¸€ä¸ªæ‰§è¡Œ&quot;   éšæœºé€‰ä¸€ä¸ªæ‰§è¡Œ é‚£æˆ‘ä»¬æ˜¯ä¸æ˜¯å°±ä¸èƒ½ç¡®å®šç¨‹åºä¼šæ‰§è¡Œå“ªä¸€æ¡ä¸è¯­å¥äº†ï¼Ÿ<br><br>","like_count":3,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423815,"discussion_content":"è¿™ç§æƒ…å†µä¸‹æ˜¯è¿™æ ·ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536975659,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":23683,"user_name":"Forever","can_delete":false,"product_type":"c1","uid":1200760,"ip_address":"","ucode":"76BE8C9BFD41B2","user_header":"https://static001.geekbang.org/account/avatar/00/12/52/78/4365471c.jpg","comment_is_top":false,"comment_ctime":1536587240,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"14421489128","product_id":100013101,"comment_content":"è€å¸ˆè¯·é—®å¦‚æœæˆ‘æ˜¯100ä¸ªç®¡é“å¹¶è¡Œè¯»å…¥1äº¿çš„æ•°å­— ç„¶å100ä¸ªç®¡é“åˆ†åˆ«å»è°ƒç”¨åˆ¤æ–­æ•°å­—æ˜¯å¦æ˜¯è´¨æ•°çš„å‡½æ•° ç„¶åæœ¬æ¥è¿è¡Œç€å¥½å¥½çš„cpuå ç”¨ç‡åˆ°äº†99  åæ¥çªç„¶ä¸å†è¿ç®—äº† cpuä¹Ÿç›´æ¥å ç”¨ç‡éª¤é™åˆ°5% ä½†æ˜¯ç¨‹åºæ²¡æœ‰æŠ¥é”™è€Œæ˜¯æš‚åœä¸åŠ¨ è¯·é—®è€å¸ˆæ˜¯ä»€ä¹ˆåŸå› ","like_count":2,"discussions":[{"author":{"id":1197376,"avatar":"https://static001.geekbang.org/account/avatar/00/12/45/40/ba205571.jpg","nickname":"King","note":"","ucode":"2C1806226C69B9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":146076,"discussion_content":"OOMäº†å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579596266,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":23190,"user_name":"æœ‰é“­","can_delete":false,"product_type":"c1","uid":1046302,"ip_address":"","ucode":"2C7CB36CA5C04C","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/3XbCueYYVWTiclv8T5tFpwiblOxLphvSZxL4ujMdqVMibZnOiaFK2C5nKRGv407iaAsrI0CDICYVQJtiaITzkjfjbvrQ/132","comment_is_top":false,"comment_ctime":1536196605,"is_pvip":false,"replies":[{"id":"8397","content":"è®¾è®¡APIçš„æ—¶å€™å¾ˆæœ‰ç”¨ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1536215643,"ip_address":"","comment_id":23190,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14421098493","product_id":100013101,"comment_content":"æˆ‘æ„Ÿè§‰é‚£ä¸ªåªå‘ä¸æ”¶å’Œåªæ”¶ä¸å‘çš„é€šé“ï¼Œè¿˜æ˜¯æ²¡å•¥ç”¨å•Š","like_count":3,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423458,"discussion_content":"è®¾è®¡APIçš„æ—¶å€™å¾ˆæœ‰ç”¨ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536215643,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":163707,"user_name":"æ°´å…ˆç”Ÿî”","can_delete":false,"product_type":"c1","uid":1249714,"ip_address":"","ucode":"362A71DF511E3E","user_header":"https://static001.geekbang.org/account/avatar/00/13/11/b2/dd0606b2.jpg","comment_is_top":false,"comment_ctime":1576770775,"is_pvip":false,"replies":[{"id":"62326","content":"ä½ æ˜¯æ”¹æˆè¿™æ ·äº†ä¹ˆï¼Ÿ<br><br>var channels = [3]chan int{<br>\tnil,<br>\tmake(chan int, 1),<br>\tnil,<br>}<br><br>å¦‚æœæ˜¯è¿™æ ·ï¼Œé‚£ä¹ˆä½ å°±æŠŠç¬¬äºŒä¸ªé€šé“ç”±éç¼“å†²é€šé“æ”¹æˆäº†ç¼“å†²é€šé“ã€‚å¦‚æ­¤ä¸€æ¥ï¼Œé€šé“ä¸­å°±æœ‰äº†ä¸€ä¸ªç©ºä½ï¼Œå¯ä»¥å®¹çº³ä¸€ä¸ªå…ƒç´ äº†ï¼Œæ‰€ä»¥ç¬¬äºŒä¸ªcaseå°±èƒ½æ‰§è¡Œäº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1576825657,"ip_address":"","comment_id":163707,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10166705367","product_id":100013101,"comment_content":"è€å¸ˆï¼Œæˆ‘åœ¨demo25ä¸­ï¼Œå°è¯•å°†channelsçš„å®¹é‡æ˜¯ä½•æ­¢ä¸º1ï¼Œè·‘çš„æ—¶å€™å‘ç°ï¼Œæ‰€æœ‰çš„caseéƒ½æœ‰ä¼ é€’å‚æ•°ï¼ŒgetChanå’ŒgetNumberéƒ½æœ‰æ‰“å°æˆåŠŸï¼Œä½†æ˜¯æœ€ç»ˆæ˜¯caseæ‰“å°äº†secondï¼Œè¿™æ˜¯ä»€ä¹ˆåŸå› ï¼Œæ²¡æƒ³æ˜ç™½ã€‚ï¼ˆåŸºç¡€ä¸æ‰å®ï¼‰","like_count":2,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478510,"discussion_content":"ä½ æ˜¯æ”¹æˆè¿™æ ·äº†ä¹ˆï¼Ÿ\n\nvar channels = [3]chan int{\n\tnil,\n\tmake(chan int, 1),\n\tnil,\n}\n\nå¦‚æœæ˜¯è¿™æ ·ï¼Œé‚£ä¹ˆä½ å°±æŠŠç¬¬äºŒä¸ªé€šé“ç”±éç¼“å†²é€šé“æ”¹æˆäº†ç¼“å†²é€šé“ã€‚å¦‚æ­¤ä¸€æ¥ï¼Œé€šé“ä¸­å°±æœ‰äº†ä¸€ä¸ªç©ºä½ï¼Œå¯ä»¥å®¹çº³ä¸€ä¸ªå…ƒç´ äº†ï¼Œæ‰€ä»¥ç¬¬äºŒä¸ªcaseå°±èƒ½æ‰§è¡Œäº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576825657,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":73593,"user_name":"Cxb","can_delete":false,"product_type":"c1","uid":1228479,"ip_address":"","ucode":"4B275B3F3079D3","user_header":"https://static001.geekbang.org/account/avatar/00/12/be/bf/36077300.jpg","comment_is_top":false,"comment_ctime":1551934113,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10141868705","product_id":100013101,"comment_content":"@ç‹å°å‹ƒ<br>demo25 ä¸è¾“å‡ºsecond candidate åŸå› åº”è¯¥æ˜¯channels[1]æ˜¯éç¼“å†²é€šé“ï¼Œselectè¯­å¥æ£€æµ‹åˆ°é˜»å¡çŠ¶æ€ï¼Œæ‰€ä»¥caseè¯­å¥ä¸æˆç«‹ã€‚æŠŠchannels[1]è®¾ç½®ä¸ºç¼“å†²é€šé“ï¼Œæˆ–è€…å†™ä¸ªåç¨‹æ¥å—channels[1]å°±å¯ä»¥è¾“å‡ºsecond candidate<br>func main() {<br>\t&#47;&#47;go func() {<br>\t&#47;&#47;\tfmt.Println(&lt;-channels[1])<br>\t&#47;&#47;}()<br>\tselect {<br>\tcase getChan(0) &lt;- getNumber(0):<br>\t\tfmt.Println(&quot;The first candidate case is selected.&quot;)<br>\tcase getChan(1) &lt;- getNumber(1):<br>\t\tfmt.Println(&quot;The second candidate case is selected.&quot;)<br>\tcase getChan(2) &lt;- getNumber(2):<br>\t\tfmt.Println(&quot;The third candidate case is selected&quot;)<br>\tdefault:<br>\t\tfmt.Println(&quot;No candidate case is selected!&quot;)<br>\t}<br>}","like_count":2},{"had_liked":false,"id":24360,"user_name":"ä¸€æ­¥","can_delete":false,"product_type":"c1","uid":1005391,"ip_address":"","ucode":"73CEA468CE70C3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","comment_is_top":false,"comment_ctime":1536925528,"is_pvip":true,"replies":[{"id":"8925","content":"åªèƒ½å‘å®ƒå‘é€æ•°æ®çš„æˆ‘ç®€ç§°ä¸ºå‘é€é€šé“ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1536974826,"ip_address":"","comment_id":24360,"utype":1}],"discussion_count":1,"race_medal":1,"score":"10126860120","product_id":100013101,"comment_content":"è€å¸ˆä½ ä¸Šé¢çš„å‘é€é€šé“&lt;-æ˜¯ä»£è¡¨ï¼Œå¯ä»¥å‘é€šé“ä¸­å‘é€æ•°æ®å‘¢ï¼Ÿé‚£å¯¹äºé€šé“è€Œè¨€æ˜¯ä¸æ˜¯å°±æ˜¯ï¼Œé€šé“æ¥æ”¶æ•°æ®ï¼Œå«åšæ¥æ”¶é€šé“?","like_count":2,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423952,"discussion_content":"åªèƒ½å‘å®ƒå‘é€æ•°æ®çš„æˆ‘ç®€ç§°ä¸ºå‘é€é€šé“ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536974826,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":23500,"user_name":"michael","can_delete":false,"product_type":"c1","uid":1086975,"ip_address":"","ucode":"EBCFCB4196FC8C","user_header":"https://static001.geekbang.org/account/avatar/00/10/95/ff/033caa38.jpg","comment_is_top":false,"comment_ctime":1536425952,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10126360544","product_id":100013101,"comment_content":"ç¬¬äºŒä¸ªé—®é¢˜ï¼Œå¯ä»¥å°†for selectå†™åˆ°ä¸€ä¸ªå‡½æ•°é‡Œé¢ï¼Œç”¨returnçš„æ–¹å¼æ¥è·³å‡ºforå¾ªç¯","like_count":2},{"had_liked":false,"id":23417,"user_name":"ç‹è…¾é£","can_delete":false,"product_type":"c1","uid":1035111,"ip_address":"","ucode":"6D4F81620470E2","user_header":"https://static001.geekbang.org/account/avatar/00/0f/cb/67/5a3f9ae8.jpg","comment_is_top":false,"comment_ctime":1536363334,"is_pvip":false,"replies":[{"id":"8485","content":"åˆ‡ç‰‡ä¸æ˜¯å¹¶å‘å®‰å…¨çš„ï¼Œåœ¨è¿™ç§åœºæ™¯ä¸‹æœ€å¥½ä¸è¦ç”¨ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1536385750,"ip_address":"","comment_id":23417,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10126297926","product_id":100013101,"comment_content":"å¦‚ä½•åŠ¨æ€çš„è°ƒæ•´selectçš„channelï¼Œæ¯”å¦‚æˆ‘èƒ½å¦selectä¸€ä¸ªchannelåˆ‡ç‰‡ï¼Œç„¶åæ ¹æ®éœ€è¦è°ƒæ•´åˆ‡ç‰‡çš„å†…å®¹ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423557,"discussion_content":"åˆ‡ç‰‡ä¸æ˜¯å¹¶å‘å®‰å…¨çš„ï¼Œåœ¨è¿™ç§åœºæ™¯ä¸‹æœ€å¥½ä¸è¦ç”¨ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536385750,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":299647,"user_name":"zach_turing","can_delete":false,"product_type":"c1","uid":2231266,"ip_address":"","ucode":"7DFC2068B50B1E","user_header":"","comment_is_top":false,"comment_ctime":1624780398,"is_pvip":false,"replies":[{"id":"108720","content":"å¯¹ï¼Œè¿™æ˜¯ä¸€ä¸ªè¯­è¨€è§„èŒƒçº§åˆ«çš„è§„åˆ™ã€‚å•ç‹¬ä½¿ç”¨ä¸é…åˆä½¿ç”¨çš„è¡Œä¸ºæ˜¯ä¸åŒçš„ï¼Œè¿™ä¹Ÿå‡¸æ˜¾äº†selectè¯­å¥çš„é‡è¦ä½œç”¨ï¼Œç±»ä¼¼çš„è¿˜æœ‰forè¯­å¥ä¸é€šé“çš„è”ç”¨ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1624860839,"ip_address":"","comment_id":299647,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5919747694","product_id":100013101,"comment_content":"å‰é¢è®²åˆ°ï¼Œå¦‚æœå¯¹nilé€šé“å†™æ“ä½œä¼šå‘ç”Ÿpanicã€‚ä½†æ˜¯å¯¹äºdemo25.goä¸­çš„case ï¼Œå¯¹äºç¬¬ä¸€ä¸ªæ˜¯ä¸ªnilé€šé“ï¼Œå‘é‡Œå†™åªæ˜¯ä¼šé˜»å¡ï¼Œè€Œä¸ä¼španicï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ  å½“åšselectçš„ä¸€ç§ç‰¹æ®Šæƒ…å†µæ¥ç†è§£å—","like_count":1,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":522496,"discussion_content":"å¯¹ï¼Œè¿™æ˜¯ä¸€ä¸ªè¯­è¨€è§„èŒƒçº§åˆ«çš„è§„åˆ™ã€‚å•ç‹¬ä½¿ç”¨ä¸é…åˆä½¿ç”¨çš„è¡Œä¸ºæ˜¯ä¸åŒçš„ï¼Œè¿™ä¹Ÿå‡¸æ˜¾äº†selectè¯­å¥çš„é‡è¦ä½œç”¨ï¼Œç±»ä¼¼çš„è¿˜æœ‰forè¯­å¥ä¸é€šé“çš„è”ç”¨ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1624860839,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":293057,"user_name":"escray","can_delete":false,"product_type":"c1","uid":1020525,"ip_address":"","ucode":"1F4204930E47C4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/92/6d/becd841a.jpg","comment_is_top":false,"comment_ctime":1621176684,"is_pvip":true,"discussion_count":0,"race_medal":2,"score":"5916143980","product_id":100013101,"comment_content":"å•å‘é€šé“è¿™ä¸ªè®¾è®¡ï¼Œä¼¼ä¹åœ¨åˆ«çš„è¯­è¨€ä¸­æ˜¯æ²¡æœ‰çš„ï¼Œæœ‰ç‚¹ç±»ä¼¼äºæ–‡ä»¶çš„åªè¯»æˆ–è€…åªå†™å±æ€§ï¼ˆç”¨äºçº¦æŸ IO æ“ä½œï¼‰ï¼Œå•å‘é€šé“ç”¨äºçº¦æŸå…¶ä»–ä»£ç çš„è¡Œä¸ºã€‚<br><br>å•å‘é€šé“å¯ä»¥ç”¨äºæ¥å£ç±»å‹ç”³æ˜ä¸­çš„æ–¹æ³•å®šä¹‰ï¼ˆå‚æ•°åˆ—è¡¨ï¼‰ï¼Œä¹Ÿå¯ä»¥ç”¨åœ¨å‡½æ•°å£°æ˜çš„ç»“æœåˆ—è¡¨ä¸­<br><br>è€Œ Go è¯­è¨€åœ¨å®ç°è¿‡ç¨‹ä¸­ï¼Œè‡ªåŠ¨çš„å°†åŒå‘é€šé“è½¬æ¢ä¸ºå•å‘é€šé“ä¹Ÿå‡è½»äº†å®ç°æ—¶å€™çš„è´Ÿæ‹…ã€‚<br><br>demo24 ç¤ºä¾‹ 1 çš„ä»£ç æœ‰ä¸€ç‚¹å¥‡æ€ªï¼Œæˆ‘æ‰§è¡Œçš„æ—¶å€™é€šå¸¸éšæœºæ•°ä¼šç”Ÿæˆä¸º 2ï¼Œä¸çŸ¥é“ä»€ä¹ˆåŸå› ï¼Œå½“ç„¶ï¼Œè¿™ä¸ªä¸é‡è¦ã€‚<br><br>çœ‹åˆ°ç•™è¨€é‡Œé¢ @ä»»æ€§ åŒå­¦çš„æç¤ºï¼Œå¢åŠ  <br><br>```<br>rand.Seed(time.Now().Unix())<br>```<br><br>å°±å¯ä»¥è§£å†³éšæœºæ•°çš„é—®é¢˜ã€‚<br><br>ä» demo25 ä¸­çš„ç¤ºä¾‹å¯ä»¥çœ‹åˆ°ï¼ŒGo è¯­è¨€ select è¯­å¥ï¼ˆä¸é€šé“è¿ç”¨ï¼‰å’Œå…¶ä»–è¯­è¨€çš„ switch æ˜¯å®Œå…¨ä¸ä¸€æ ·çš„ï¼Œæˆ‘ä¹‹å‰å¯¹è¿™ä¸ªéƒ¨åˆ†æœ‰ä¸€äº›æ··æ·†ã€‚<br><br>å¯¹äºæ€è€ƒé¢˜ï¼š<br><br>1. å¦‚æœåœ¨ select è¯­å¥ä¸­å‘ç°æŸä¸ªé€šé“å·²å…³é—­ï¼Œä½¿ç”¨ç±»ä¼¼ demo24 ç¤ºä¾‹äºŒä¸­çš„æ–¹æ³•ï¼Œå¯ä»¥åˆ¤æ–­é€šé“æ˜¯å¦å·²å…³é—­ï¼Œå¦‚æœå…³é—­ï¼Œå°±æ˜¯ç”¨ break æ¥ç»“æŸå½“å‰ selectã€‚ä¸çŸ¥é“è¿™ä¸ªæ˜¯ä¸æ˜¯å±è”½çš„æ„æ€<br><br>2. å¦‚æœ select è¯­å¥å’Œ for è¯­å¥è¿ç”¨ï¼Œä¸€æ–¹é¢ä½¿ç”¨ break ç»“æŸå½“å‰çš„ selectï¼Œå¦å¤–å°±æ˜¯å¯ä»¥è®¾ç½®ä¸€ä¸ªæ ‡è®°ä¸ºï¼Œç»“æŸæ•´ä¸ª for å¾ªç¯ã€‚<br><br>çœ‹äº†ä¸€ä¸‹ç•™è¨€å’Œæ ‡å‡†ç­”æ¡ˆï¼Œä¸¤é“æ€è€ƒé¢˜ä¼¼ä¹éƒ½æ²¡æœ‰åšå¯¹ã€‚<br><br>ç¬¬ä¸€ä¸ªæ€è€ƒé¢˜å½“å‘ç°é€šé“å…³é—­çš„æ—¶å€™ï¼Œå°† chan èµ‹å€¼ä¸º nilï¼Œå°±å¯ä»¥å®ç°å±è”½ã€‚<br><br>ç¬¬äºŒä¸ªé¢˜ç›®æ¨èç•™è¨€ä¸­æåˆ°äº† stackoverflow çš„é“¾æ¥ï¼Œhttps:&#47;&#47;stackoverflow.com&#47;questions&#47;25469682&#47;break-out-of-select-loopfor-select break <br><br>ç»™å‡ºäº†ä¸¤ç§æ–¹æ³•ï¼Œä¸€ç§æ˜¯ç”¨ return æ›¿æ¢ breakï¼Œå¦ä¸€ç§æ˜¯ä½¿ç”¨ç±»ä¼¼äº goto è¯­å¥çš„æ ‡ç­¾ï¼Œè¿›è¡Œ break<br><br>```<br>L:<br>\tfor {<br>\t\tselect {<br>\t\tcase &lt;-done:<br>\t\t\t&#47;&#47; break<br>\t\t\t&#47;&#47; return<br>\t\t\tbreak L<br>\t\tcase num := &lt;- numbers:<br>\t\t\tfmt.Println(num)<br>\t\t}<br>\t}<br>```<br><br>æ¯”è¾ƒä½©æœé‚£äº›ä¸çœ‹ç•™è¨€ï¼Œä¹Ÿä¸çœ‹çœ‹è¯¾åç­”æ¡ˆï¼Œç›´æ¥æé—®çš„åŒå­¦ã€‚","like_count":2},{"had_liked":false,"id":222414,"user_name":"æµ·ç›—èˆ¹é•¿","can_delete":false,"product_type":"c1","uid":1363634,"ip_address":"","ucode":"ECB28BA21A4113","user_header":"https://static001.geekbang.org/account/avatar/00/14/ce/b2/1f914527.jpg","comment_is_top":false,"comment_ctime":1590799668,"is_pvip":false,"replies":[{"id":"82202","content":"åªä¼šæ‰§è¡Œä¸€ä¸ªå•Šï¼Œåœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½åªä¼šæœ‰ä¸€ä¸ªåˆ†æ”¯è¢«æ‰§è¡Œã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1590981986,"ip_address":"","comment_id":222414,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5885766964","product_id":100013101,"comment_content":"â€œå¦‚æœselectè¯­å¥å‘ç°åŒæ—¶æœ‰å¤šä¸ªå€™é€‰åˆ†æ”¯æ»¡è¶³é€‰æ‹©æ¡ä»¶ï¼Œé‚£ä¹ˆå®ƒå°±ä¼šç”¨ä¸€ç§ä¼ªéšæœºçš„ç®—æ³•åœ¨è¿™äº›åˆ†æ”¯ä¸­é€‰æ‹©ä¸€ä¸ªå¹¶æ‰§è¡Œã€‚æ³¨æ„ï¼Œå³ä½¿selectè¯­å¥æ˜¯åœ¨è¢«å”¤é†’æ—¶å‘ç°çš„è¿™ç§æƒ…å†µï¼Œä¹Ÿä¼šè¿™æ ·åšã€‚â€ è€å¸ˆ è¯·é—®ä¸‹ æ ¹æ®è¿™æ¡è§„åˆ™ï¼Œæ˜¯ä¸æ˜¯æ‰€æœ‰æ»¡è¶³é€‰æ‹©æ¡ä»¶çš„åˆ†æ”¯æœ€ç»ˆéƒ½ä¼šè¢«æ‰§è¡Œï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496786,"discussion_content":"åªä¼šæ‰§è¡Œä¸€ä¸ªå•Šï¼Œåœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½åªä¼šæœ‰ä¸€ä¸ªåˆ†æ”¯è¢«æ‰§è¡Œã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590981986,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":170645,"user_name":"å–µäº†ä¸ªå’ªçš„æ±ª","can_delete":false,"product_type":"c1","uid":1338163,"ip_address":"","ucode":"8D6BDF3B681147","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEKTDI00ykOfZ1UFxHGZ1Yhknb2BIqrwZgjFD6ykDlN3KUEMN4YgKa8N9TVib8vrtQ2Uk0tFCGAwNsw/132","comment_is_top":false,"comment_ctime":1578650255,"is_pvip":false,"replies":[{"id":"66119","content":"ä¸å¤ªå¯¹ï¼Œå†æƒ³æƒ³ï¼Ÿï¼šï¼‰","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1578656686,"ip_address":"","comment_id":170645,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5873617551","product_id":100013101,"comment_content":"æ„Ÿè§‰ä¸¤ä¸ªæ€è€ƒé¢˜éƒ½å¯ä»¥ç”¨æ·»åŠ å“¨å…µæ¥è§£å†³ï¼Œä¸çŸ¥é“å¯¹ä¸å¯¹ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481053,"discussion_content":"ä¸å¤ªå¯¹ï¼Œå†æƒ³æƒ³ï¼Ÿï¼šï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578656686,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":156234,"user_name":"å¤§é›„","can_delete":false,"product_type":"c1","uid":1676966,"ip_address":"","ucode":"5FCFDD3A940801","user_header":"https://static001.geekbang.org/account/avatar/00/19/96/a6/32a286e0.jpg","comment_is_top":false,"comment_ctime":1574840594,"is_pvip":false,"replies":[{"id":"60038","content":"æœ‰ä¸€æ–¹æ­£åœ¨æ”¶ï¼Œè¿˜æœ‰å¦ä¸€æ–¹æ­£åœ¨å‘ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1574856141,"ip_address":"","comment_id":156234,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5869807890","product_id":100013101,"comment_content":"çœ‹åˆ°è¯„è®ºï¼š<br>éç¼“å†²é€šé“åªæœ‰åœ¨æ”¶å‘åŒæ–¹éƒ½å°±ç»ªçš„æƒ…å†µä¸‹æ‰èƒ½ä¼ é€’å…ƒç´ å€¼<br>æ€ä¹ˆç†è§£æ”¶å‘åŒæ–¹éƒ½å°±ç»ªçš„æƒ…å†µä¸‹ã€‚èƒ½ä¸¾ä¸ªä¾‹å­å—ï¼Ÿ<br>","like_count":1,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476043,"discussion_content":"æœ‰ä¸€æ–¹æ­£åœ¨æ”¶ï¼Œè¿˜æœ‰å¦ä¸€æ–¹æ­£åœ¨å‘ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574856141,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":71115,"user_name":"deanä¸é—·","can_delete":false,"product_type":"c1","uid":1120512,"ip_address":"","ucode":"6440E0250AD0D8","user_header":"https://static001.geekbang.org/account/avatar/00/11/19/00/a7f4cde8.jpg","comment_is_top":false,"comment_ctime":1551268022,"is_pvip":false,"replies":[{"id":"25758","content":"å½“ç„¶ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1551415472,"ip_address":"","comment_id":71115,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5846235318","product_id":100013101,"comment_content":"è€å¸ˆï¼Œå‡å¦‚ä¸€ä¸ªé€šé“ä¸­å­˜ç€1ï¼Œ2ï¼Œ3ï¼Œ4ï¼Œ5äº”ä¸ªå€¼ï¼Œç¬¬ä¸€ä¸ªcaseä»é€šé“è¯»èµ°äº†1ï¼Œé‚£ä¹ˆåç»­çš„caseå°±è¯»ä¸åˆ°1äº†å§ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":440998,"discussion_content":"å½“ç„¶ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551415472,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":52266,"user_name":"è™¢åœ‹æŠ€é†¬","can_delete":false,"product_type":"c1","uid":1056807,"ip_address":"","ucode":"5A192262AA037E","user_header":"https://static001.geekbang.org/account/avatar/00/10/20/27/a6932fbe.jpg","comment_is_top":false,"comment_ctime":1545356106,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5840323402","product_id":100013101,"comment_content":"æœ‰ä¸ªé—®é¢˜ä¸æ˜ï¼šdemo25ä¸­ selectä¸ºä»€ä¹ˆé€‰æ‹©çš„ä¸æ˜¯ç¬¬äºŒä¸ªcaseè¾“å‡ºï¼Ÿ<br>ç¬¬äºŒä¸ªcaseå®é™…ä¸Šåœ¨å¾€channels[1] &lt;- 2 ,é‚£ä¸ºä»€ä¹ˆä¸è¾“å‡ºï¼šThe second candidate case is selected.<br>package main<br><br>import &quot;fmt&quot;<br><br>var channels = [3]chan int{<br>\tnil,<br>\tmake(chan int),<br>\tnil,<br>}<br><br>var numbers = []int{1, 2, 3}<br><br>func main() {<br>\tselect {<br>\tcase getChan(0) &lt;- getNumber(0):<br>\t\tfmt.Println(&quot;The first candidate case is selected.&quot;)<br>\tcase getChan(1) &lt;- getNumber(1):<br>\t\tfmt.Println(&quot;The second candidate case is selected.&quot;)<br>\tcase getChan(2) &lt;- getNumber(2):<br>\t\tfmt.Println(&quot;The third candidate case is selected&quot;)<br>\tdefault:<br>\t\tfmt.Println(&quot;No candidate case is selected!&quot;)<br>\t}<br>}<br><br>func getNumber(i int) int {<br>\tfmt.Printf(&quot;numbers[%d]\\n&quot;, i)<br>\treturn numbers[i]<br>}<br><br>func getChan(i int) chan int {<br>\tfmt.Printf(&quot;channels[%d]\\n&quot;, i)<br>\treturn channels[i]<br>}","like_count":1},{"had_liked":false,"id":34720,"user_name":"æ†çˆ±ä¸å…³å¿ƒ","can_delete":false,"product_type":"c1","uid":1133580,"ip_address":"","ucode":"A868ACB200C798","user_header":"https://static001.geekbang.org/account/avatar/00/11/4c/0c/ada45f25.jpg","comment_is_top":false,"comment_ctime":1540269326,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5835236622","product_id":100013101,"comment_content":"è€å¸ˆä½ å¥½ï¼Œè¿™èŠ‚è¯¾ï¼Œè¿˜æ²¡çœ‹ä½†æ˜¯ä¹°äº†ä½ çš„GOå¹¶å‘ç¼–ç¨‹ï¼Œå€Ÿå®åœ°é—®è€å¸ˆä¸€ä¸ªé—®é¢˜ï¼Œç¬¬å››ç« çš„loadgenä»£ç é‡Œï¼Œæœ‰ä¸€ä¸ªå‡½æ•°å¦‚ä¸‹ï¼š<br>&#47;&#47; genLoad ä¼šå‘ç”Ÿè½½è·å¹¶å‘æ‰¿å—æ–¹å‘é€ã€‚<br>func (gen *myGenerator) genLoad(throttle &lt;-chan time.Time) {<br>\tfor {<br>\t\tselect {<br>\t\tcase &lt;- gen.ctx.Done():<br>\t\t\tgen.prepareToStop(gen.ctx.Err())<br>\t\t\treturn<br>\t\tdefault:<br>\t\t}<br><br>\t\tgen.asyncCall()<br><br>\t\tif gen.lps &gt; 0 {<br>\t\t\tselect {<br>\t\t\t\tcase&lt;-throttle:<br>\t\t\t\tcase&lt;-gen.ctx.Done():<br>\t\t\t\t\tgen.prepareToStop(gen.ctx.Err())<br>\t\t\t\t\treturn<br>\t\t\t\tdefault:<br>\t\t\t\t\t&#47;&#47;fmt.Println(&quot;DD&quot;)<br>\t\t\t}<br>\t\t}<br>\t}<br>}<br><br>æœ€åè¿™ä¸ªdefaultï¼š<br>æœ¬æ¥åœ¨è€å¸ˆçš„ä»£ç é‡Œæ²¡æœ‰ï¼Œæˆ‘æ— æ„ä¸­åŠ ä¸Šäº†ã€‚<br>ç»“æœåŠ ä¸åŠ è¿™ä¸ªdefaultï¼šæ‰§è¡Œçš„ç»“æœå®Œå…¨æ˜¯ä¸¤ä¸ªï¼Œå¤©å·®åœ°åˆ«ï¼Œè€å¸ˆå¦‚æœæœ‰æ—¶é—´ï¼Œè¯·åœ¨è¿™é‡ŒåŠ ä¸Šè¿™ä¸€è¡Œä»£ç default: testä¸€ä¸‹ï¼Œæœ¬æ¥æ˜¯success 5000å¤šä¸ªï¼Œç»“æœåŠ ä¸Šä¹‹åï¼Œcall error 1000ï¼Œsuccuess 40000å¤šï¼Œtimeout2000å¤šï¼Œå®åœ¨ä¸æ˜ç™½ä¸ºä½•ä¼šè¿™æ ·ï¼Œè°¢è°¢è€å¸ˆã€‚","like_count":1},{"had_liked":false,"id":23307,"user_name":"å†°æ¿€å‡Œçš„çœ¼æ³ª","can_delete":false,"product_type":"c1","uid":1087945,"ip_address":"","ucode":"5DCB974667E93A","user_header":"https://static001.geekbang.org/account/avatar/00/10/99/c9/a7c77746.jpg","comment_is_top":false,"comment_ctime":1536282591,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5831249887","product_id":100013101,"comment_content":"å•å‘é€šé“ä¹çœ‹æ²¡ä»€ä¹ˆä½œç”¨ï¼Œä½†æ˜¯çœ‹äº†åé¢æ–‡ç« ï¼Œçœ‹åˆ°åœ¨å‡½æ•°ä¼ å‚ã€è¿”å›æ—¶å¯ä»¥é€šè¿‡åŒå‘é€šé“çš„é€€åŒ–å½¢æˆå•å‘é€šé“ï¼Œå°±æ˜ç™½ä½œè€…è¯´çš„çº¦æŸè¡Œä¸ºçš„æ„ä¹‰äº†ã€‚","like_count":1},{"had_liked":false,"id":340419,"user_name":"é’å±±","can_delete":false,"product_type":"c1","uid":1131070,"ip_address":"","ucode":"749BAD1834AC0F","user_header":"https://static001.geekbang.org/account/avatar/00/11/42/3e/c1f76202.jpg","comment_is_top":false,"comment_ctime":1648806650,"is_pvip":false,"replies":[{"id":"124528","content":"æ–‡å­—æè¿°æ²¡æœ‰å†™å‡ºä»£ç æ¸…æ™°ï¼Œä½†æ˜¯å°±æˆ‘çœ‹ï¼Œè¿™æ ·åšåœ¨è®¾è®¡å±‚é¢çœ‹æ˜¯æœ‰é—®é¢˜çš„ã€‚è¿™ç§å¾ªç¯é˜»å¡æœ€å®¹æ˜“å‡ºé—®é¢˜ã€‚<br><br>ä»ä»£ç å±‚é¢çœ‹ä¹Ÿæœ‰é—®é¢˜ï¼Œä½ æ€ä¹ˆåˆ¤æ–­bçš„chanå·²ç»é˜»å¡äº†ï¼Ÿä¾é è¶…æ—¶æ¥åˆ¤æ–­å˜›ï¼Ÿæ²¡æ³•ç²¾ç¡®åˆ¤æ–­ã€‚å¦å¤–ï¼Œè®©açš„chanä¹Ÿé˜»å¡ï¼Œè¿™ç§åŒæ­¥æ–¹å¼å¾ˆè¹©è„šã€‚<br><br>ä½ å¯ä»¥è€ƒè™‘ç”¨ä¸€äº›åŒæ­¥å·¥å…·æ¥åšï¼Œæ¯”å¦‚ WaitGroup æˆ–è€… Context ã€‚Channel ä¸»è¦ç”¨äºä¼ é€’ä¿¡æ¯ï¼Œè€Œä¸æ˜¯åŒæ­¥ã€‚ä½ è¦æ˜¯çœŸæƒ³æŠŠå®ƒå½“ä¿¡å·ä¼ é€’ç®¡é“æ¥ç”¨ï¼Œé‚£å°±ç”¨éç¼“å†²é€šé“ make(chan struct{}, 0)  ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1026643","ctime":1648881022,"ip_address":"","comment_id":340419,"utype":1}],"discussion_count":1,"race_medal":1,"score":"1648806650","product_id":100013101,"comment_content":"è€å¸ˆä½ å¥½ï¼Œæˆ‘æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨chanæ¥æ§åˆ¶æµç¨‹ï¼Œaå‡½æ•°æœ‰ä¸ªä¸€ä¸ªå®¹é‡ä¸º5çš„chanï¼Œbå‡½æ•°æœ‰ä¸€ä¸ªä¸º1çš„å®¹é‡chanï¼Œbå‡½æ•°è·å–açš„é˜Ÿåˆ—ï¼Œå½“bå‡½æ•°çš„çš„é˜Ÿåˆ—é˜»å¡æ‰äº†å°±ä¼šè®©aå‡½æ•°çš„é˜Ÿåˆ—åˆ°5ä¹‹åé˜»å¡ï¼Œè¾¾åˆ°bå‡½æ•°æ§åˆ¶aå‡½æ•°æµç¨‹ï¼Œè¿™æ ·è®¾è®¡åˆç†å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":559685,"discussion_content":"æ–‡å­—æè¿°æ²¡æœ‰å†™å‡ºä»£ç æ¸…æ™°ï¼Œä½†æ˜¯å°±æˆ‘çœ‹ï¼Œè¿™æ ·åšåœ¨è®¾è®¡å±‚é¢çœ‹æ˜¯æœ‰é—®é¢˜çš„ã€‚è¿™ç§å¾ªç¯é˜»å¡æœ€å®¹æ˜“å‡ºé—®é¢˜ã€‚\n\nä»ä»£ç å±‚é¢çœ‹ä¹Ÿæœ‰é—®é¢˜ï¼Œä½ æ€ä¹ˆåˆ¤æ–­bçš„chanå·²ç»é˜»å¡äº†ï¼Ÿä¾é è¶…æ—¶æ¥åˆ¤æ–­å˜›ï¼Ÿæ²¡æ³•ç²¾ç¡®åˆ¤æ–­ã€‚å¦å¤–ï¼Œè®©açš„chanä¹Ÿé˜»å¡ï¼Œè¿™ç§åŒæ­¥æ–¹å¼å¾ˆè¹©è„šã€‚\n\nä½ å¯ä»¥è€ƒè™‘ç”¨ä¸€äº›åŒæ­¥å·¥å…·æ¥åšï¼Œæ¯”å¦‚ WaitGroup æˆ–è€… Context ã€‚Channel ä¸»è¦ç”¨äºä¼ é€’ä¿¡æ¯ï¼Œè€Œä¸æ˜¯åŒæ­¥ã€‚ä½ è¦æ˜¯çœŸæƒ³æŠŠå®ƒå½“ä¿¡å·ä¼ é€’ç®¡é“æ¥ç”¨ï¼Œé‚£å°±ç”¨éç¼“å†²é€šé“ make(chan struct{}, 0)  ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1648881022,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":323058,"user_name":"jxs1211","can_delete":false,"product_type":"c1","uid":1101006,"ip_address":"","ucode":"B7F1F2D84389E7","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKELX1Rd1vmLRWibHib8P95NA87F4zcj8GrHKYQL2RcLDVnxNy1ia2geTWgW6L2pWn2kazrPNZMRVrIg/132","comment_is_top":false,"comment_ctime":1637717471,"is_pvip":false,"replies":[{"id":"117299","content":"ä½ å¥½å¥½çœ‹çœ‹é‚£ä¸ªä¾‹å­çš„ä¸Šä¸‹æ–‡ï¼Œå‰é¢çš„ä»£ç ï¼š<br><br>&amp;#47;&amp;#47; éšæœºé€‰æ‹©ä¸€ä¸ªé€šé“ï¼Œå¹¶å‘å®ƒå‘é€å…ƒç´ å€¼ã€‚<br>index := rand.Intn(3)<br>fmt.Printf(&amp;quot;The index: %d\\n&amp;quot;, index)<br>intChannels[index] &amp;lt;- index<br><br>è¿™é‡Œæ˜ç¡®è¡¨ç¤ºï¼šåªéšæœºé€‰å–ä¸€ä¸ªé€šé“ç„¶åå‘å®ƒå‘é€å€¼ã€‚<br><br>å¦å¤–ï¼Œåœ¨ä½ çš„è¡¨è¿°ä¸­ä¹Ÿå­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼šå¹¶ä¸æ˜¯â€œæ±‚å€¼æˆåŠŸçš„caseæ”¾åˆ°å€™é€‰â€ï¼Œè€Œæ˜¯â€œä¸€æ—¦å‘ç°æŸä¸ªé€šé“ä¸­æœ‰å…ƒç´ å€¼å¯å–å°±ä½œä¸ºå€™é€‰â€ã€‚å¦‚æœå¯¹æ‰€æœ‰çš„caseè¡¨è¾¾å¼éƒ½åšçœŸçš„æ±‚å€¼ï¼Œé‚£ä¹ˆå°±ç­‰äºæŠŠæ‰€æœ‰é€šé“ä¸­çš„å¯å–å…ƒç´ å€¼å…¨å–å‡ºæ¥äº†ã€‚è¿™æ ·çš„è¯ï¼Œå°±ç›¸å½“äºselectè¯­å¥ç§è‡ªè½¬ç§»äº†ç”¨æˆ·ï¼ˆå¼€å‘è€…ï¼‰ä½¿ç”¨çš„æ•°æ®ï¼Œè‚¯å®šä¼šå‡ºå¤§é—®é¢˜çš„ã€‚å°¤å…¶æ˜¯åœ¨å¹¶å‘æ“ä½œé€šé“çš„æƒ…å†µä¸‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1026643","ctime":1637822714,"ip_address":"","comment_id":323058,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1637717471","product_id":100013101,"comment_content":"&#47;&#47; å“ªä¸€ä¸ªé€šé“ä¸­æœ‰å¯å–çš„å…ƒç´ å€¼ï¼Œå“ªä¸ªå¯¹åº”çš„åˆ†æ”¯å°±ä¼šè¢«æ‰§è¡Œã€‚<br>éš¾é“ä¸åº”è¯¥æ˜¯æ±‚å€¼æˆåŠŸçš„caseæ”¾åˆ°å€™é€‰ï¼Œåœ¨è¿›è¡Œä¼ªéšæœºç®—æ³•ç°åœ¨æ‰§è¡Œä¸€ä¸ªcaseå­å¥å—","like_count":0,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":533240,"discussion_content":"ä½ å¥½å¥½çœ‹çœ‹é‚£ä¸ªä¾‹å­çš„ä¸Šä¸‹æ–‡ï¼Œå‰é¢çš„ä»£ç ï¼š\n\n&amp;#47;&amp;#47; éšæœºé€‰æ‹©ä¸€ä¸ªé€šé“ï¼Œå¹¶å‘å®ƒå‘é€å…ƒç´ å€¼ã€‚\nindex := rand.Intn(3)\nfmt.Printf(&amp;quot;The index: %d\\n&amp;quot;, index)\nintChannels[index] &amp;lt;- index\n\nè¿™é‡Œæ˜ç¡®è¡¨ç¤ºï¼šåªéšæœºé€‰å–ä¸€ä¸ªé€šé“ç„¶åå‘å®ƒå‘é€å€¼ã€‚\n\nå¦å¤–ï¼Œåœ¨ä½ çš„è¡¨è¿°ä¸­ä¹Ÿå­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼šå¹¶ä¸æ˜¯â€œæ±‚å€¼æˆåŠŸçš„caseæ”¾åˆ°å€™é€‰â€ï¼Œè€Œæ˜¯â€œä¸€æ—¦å‘ç°æŸä¸ªé€šé“ä¸­æœ‰å…ƒç´ å€¼å¯å–å°±ä½œä¸ºå€™é€‰â€ã€‚å¦‚æœå¯¹æ‰€æœ‰çš„caseè¡¨è¾¾å¼éƒ½åšçœŸçš„æ±‚å€¼ï¼Œé‚£ä¹ˆå°±ç­‰äºæŠŠæ‰€æœ‰é€šé“ä¸­çš„å¯å–å…ƒç´ å€¼å…¨å–å‡ºæ¥äº†ã€‚è¿™æ ·çš„è¯ï¼Œå°±ç›¸å½“äºselectè¯­å¥ç§è‡ªè½¬ç§»äº†ç”¨æˆ·ï¼ˆå¼€å‘è€…ï¼‰ä½¿ç”¨çš„æ•°æ®ï¼Œè‚¯å®šä¼šå‡ºå¤§é—®é¢˜çš„ã€‚å°¤å…¶æ˜¯åœ¨å¹¶å‘æ“ä½œé€šé“çš„æƒ…å†µä¸‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637822714,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":308832,"user_name":"0770","can_delete":false,"product_type":"c1","uid":1961314,"ip_address":"","ucode":"CC55AB48F23C3E","user_header":"","comment_is_top":false,"comment_ctime":1629815528,"is_pvip":false,"replies":[{"id":"111911","content":"åªæ˜¯è¯„ä¼°æ˜¯å¦å¯æ“ä½œï¼Œå¹¶ä¸ä¼šçœŸæ­£è¿›è¡Œæ“ä½œã€‚å¦å¤–ï¼Œæ¯æ¬¡ select éƒ½æ˜¯ç‹¬ç«‹æ±‚å€¼çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1629974435,"ip_address":"","comment_id":308832,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1629815528","product_id":100013101,"comment_content":"ä»…å½“selectè¯­å¥ä¸­çš„æ‰€æœ‰caseè¡¨è¾¾å¼éƒ½è¢«æ±‚å€¼å®Œæ¯•åï¼Œå®ƒæ‰ä¼šå¼€å§‹é€‰æ‹©å€™é€‰åˆ†æ”¯ã€‚ æˆ‘çš„ç–‘é—®æ˜¯ï¼Œnä¸ªcaseä¸­æ±‚å€¼ï¼Œå·²ç»ä»chanå–å‡ºæ•°æ®ï¼Œå¦‚æœæ‹©å…¶ä¸€ä¸ªcaseæ‰§è¡Œï¼Œå…¶ä»–å·²ç»å–å€¼çš„caseçš„chanï¼Œä¸å°±ä¸¢å¤±æ•°æ®å—ï¼Ÿè¿˜æ˜¯è¯´1.ä¼šæ”¾å›å»chanï¼Œè¿˜æ˜¯ç­‰ä¸‹æ¬¡selectï¼Œå†åŒ¹é…caseçš„æ—¶å€™ï¼Œä¸éœ€è¦å†æ±‚å€¼äº†ã€‚","like_count":0,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":525638,"discussion_content":"åªæ˜¯è¯„ä¼°æ˜¯å¦å¯æ“ä½œï¼Œå¹¶ä¸ä¼šçœŸæ­£è¿›è¡Œæ“ä½œã€‚å¦å¤–ï¼Œæ¯æ¬¡ select éƒ½æ˜¯ç‹¬ç«‹æ±‚å€¼çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629974435,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":308219,"user_name":"ç›˜èƒ§","can_delete":false,"product_type":"c1","uid":1650748,"ip_address":"","ucode":"5386CC4C92ECC2","user_header":"https://static001.geekbang.org/account/avatar/00/19/30/3c/0668d6ae.jpg","comment_is_top":false,"comment_ctime":1629454798,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1629454798","product_id":100013101,"comment_content":"break æ”¹æˆ returnå°±å¥½äº†","like_count":0},{"had_liked":false,"id":296239,"user_name":"ç½—å³°","can_delete":false,"product_type":"c1","uid":1218501,"ip_address":"","ucode":"5F3D6AF8F28322","user_header":"https://static001.geekbang.org/account/avatar/00/12/97/c5/84491beb.jpg","comment_is_top":false,"comment_ctime":1622853746,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1622853746","product_id":100013101,"comment_content":"Selectæ±‚å€¼åº”è¯¥ä»…åˆ¤æ–­æ˜¯å¦é˜»å¡","like_count":0},{"had_liked":false,"id":296238,"user_name":"ç½—å³°","can_delete":false,"product_type":"c1","uid":1218501,"ip_address":"","ucode":"5F3D6AF8F28322","user_header":"https://static001.geekbang.org/account/avatar/00/12/97/c5/84491beb.jpg","comment_is_top":false,"comment_ctime":1622853568,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1622853568","product_id":100013101,"comment_content":"Selectè¯­å¥åŒ…æ‹¬åˆ†æ”¯æ±‚å€¼ï¼Œåˆ†æ”¯é€‰æ‹©ã€‚å‰è€…ä»ä¸Šåˆ°ä¸‹ï¼Œåè€…éšæœºã€‚","like_count":0},{"had_liked":false,"id":261171,"user_name":"æˆ‘çš„è…¿è…¿","can_delete":false,"product_type":"c1","uid":1239277,"ip_address":"","ucode":"2AAA36A7C3AD75","user_header":"https://static001.geekbang.org/account/avatar/00/12/e8/ed/f9347e5e.jpg","comment_is_top":false,"comment_ctime":1605233586,"is_pvip":false,"replies":[{"id":"94841","content":"ç›®å‰è¿˜æ— æ³•ç›´æ¥è®¾å®š goroutineçš„åç§°ã€‚ä¸è¿‡ä½ å¯ä»¥åˆ©ç”¨å‚æ•°å€¼æŠŠæ‰€è°“çš„åç§°ä¼ å…¥åˆ°goå‡½æ•°å½“ä¸­ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1605279402,"ip_address":"","comment_id":261171,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1605233586","product_id":100013101,"comment_content":"go å­åç¨‹åœ¨å¯åŠ¨çš„æ—¶å€™æ€ä¹ˆè‡ªå®šä¹‰åç§°ï¼Œæˆ‘æœ¬åœ°è¿è¡Œåå­—éƒ½å«runtime.gopark,ä¸å¥½æ’æŸ¥é—®é¢˜","like_count":0,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":509403,"discussion_content":"ç›®å‰è¿˜æ— æ³•ç›´æ¥è®¾å®š goroutineçš„åç§°ã€‚ä¸è¿‡ä½ å¯ä»¥åˆ©ç”¨å‚æ•°å€¼æŠŠæ‰€è°“çš„åç§°ä¼ å…¥åˆ°goå‡½æ•°å½“ä¸­ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605279402,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":260588,"user_name":"æˆ‘çš„è…¿è…¿","can_delete":false,"product_type":"c1","uid":1239277,"ip_address":"","ucode":"2AAA36A7C3AD75","user_header":"https://static001.geekbang.org/account/avatar/00/12/e8/ed/f9347e5e.jpg","comment_is_top":false,"comment_ctime":1605066137,"is_pvip":false,"replies":[{"id":"94734","content":"å¾ˆé—æ†¾ï¼Œä¸¤ä¸ªéƒ½ä¸å¯¹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1605149057,"ip_address":"","comment_id":260588,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1605066137","product_id":100013101,"comment_content":"ç¬¬ä¸€ä¸ªé—®é¢˜ï¼š<br>ch1 = make(chan struct{})<br>ç¬¬äºŒä¸ªé—®é¢˜ï¼š<br>done := make(chan struct{})<br>close(done)<br>for {<br>\t\tselect {<br>\t\tcase &lt;-done:<br>\t\t\treturn<br>\t\tcase ...<br>\t\tcase ...<br>\t}","like_count":0,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":509239,"discussion_content":"å¾ˆé—æ†¾ï¼Œä¸¤ä¸ªéƒ½ä¸å¯¹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605149057,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1239277,"avatar":"https://static001.geekbang.org/account/avatar/00/12/e8/ed/f9347e5e.jpg","nickname":"æˆ‘çš„è…¿è…¿","note":"","ucode":"2AAA36A7C3AD75","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":325027,"discussion_content":"å°´å°¬æ­»äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605224456,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":207666,"user_name":"LbbNiu","can_delete":false,"product_type":"c1","uid":1142526,"ip_address":"","ucode":"AD0D05864C6913","user_header":"https://static001.geekbang.org/account/avatar/00/11/6e/fe/79955244.jpg","comment_is_top":false,"comment_ctime":1587133372,"is_pvip":true,"replies":[{"id":"77687","content":"æˆ‘ä¸Šä¸‹æ–‡éƒ½ä¸æ¸…æ¥šï¼Œæ²¡æ³•å›ç­”ä½ ã€‚ä½ éœ€è¦ç°æœ‰çŒœæµ‹ï¼Œç„¶åéªŒè¯çŒœæµ‹ï¼Œé€ä¸€æ’æŸ¥ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1587286810,"ip_address":"","comment_id":207666,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1587133372","product_id":100013101,"comment_content":"client := &amp;http.Client{}<br>\tclient.Transport = &amp;http.Transport{<br>\t\t&#47;&#47;DisableKeepAlives:true,<br>\t\tTLSClientConfig: &amp;tls.Config{<br>\t\t\tInsecureSkipVerify: true,<br>\t\t},<br>\t\tProxy: func(request *http.Request) (u *url.URL, err error) {<br>\t\t\t&#47;&#47;return url.Parse(&quot;http:&#47;&#47;10.19.0.85:8888&quot;)<br>\t\t\t&#47;&#47;return url.Parse(&quot;http:&#47;&#47;192.168.11.123:8888&quot;)<br>\t\t\treturn rp(request) &#47;&#47;è¿”å› squidçš„ä»£ç†åœ°å€URL ä¾‹å¦‚ http:&#47;&#47;è´¦å·:å¯†ç @ipåœ°å€:8999<br>\t\t},<br>\t}<br>\tmethod := &quot;GET&quot;<br>\tu = &quot;https:&#47;&#47;220.181.38.150&quot;<br>\treq, err := http.NewRequest(method, u, nil)<br>\tif err != nil {<br>\t\tfmt.Println(err)<br>\t}<br>\treq.Host = &quot;www.baidu.com&quot;<br>\tres, err := client.Do(req)<br>è¯·æ±‚è€å¸ˆï¼Œè¿™ä¹ˆå†™ä¸ºä»€ä¹ˆè¯·æ±‚ä¼šæŠ¥é”™å‘¢ï¼Œsquidæ—¥å¿—ç›´æ¥500","like_count":0,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":492200,"discussion_content":"æˆ‘ä¸Šä¸‹æ–‡éƒ½ä¸æ¸…æ¥šï¼Œæ²¡æ³•å›ç­”ä½ ã€‚ä½ éœ€è¦ç°æœ‰çŒœæµ‹ï¼Œç„¶åéªŒè¯çŒœæµ‹ï¼Œé€ä¸€æ’æŸ¥ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587286810,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":201149,"user_name":"Jason","can_delete":false,"product_type":"c1","uid":1217554,"ip_address":"","ucode":"C5A540BC5A60B9","user_header":"https://static001.geekbang.org/account/avatar/00/12/94/12/15558f28.jpg","comment_is_top":false,"comment_ctime":1585723689,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585723689","product_id":100013101,"comment_content":"æ€è€ƒé¢˜<br>1ã€åœ¨caseä¸­é€šè¿‡ç¬¬äºŒä¸ªå‚æ•°åˆ¤æ–­chanæ˜¯å¦å…³é—­ï¼Œå¦‚æœå…³é—­åˆ™é€šè¿‡make(chan type)æ¥å¯¹å…³é—­çš„chanç½®nilï¼Œå½“å†æ¬¡æ‰§è¡Œåˆ°selectæ—¶ï¼Œå› ä¸ºchanæ—¶nilä¼šè¿›å…¥é˜»å¡ä»è€Œä¸ä¼šè¢«é€‰ä¸ºå€™é€‰åˆ†æ”¯ã€‚<br>2ã€æ–¹æ³•ä¸€å¯ä»¥ä½¿ç”¨lableåŠ gotoè·³è½¬åˆ°forå¤–é¢ï¼›æ–¹æ³•äºŒï¼šå¯ä»¥è®¾ç½®ä¸€ä¸ªé¢å¤–çš„æ ‡è®°ä½ï¼Œå½“chanå…³é—­æ—¶ï¼Œè®¾ç½®flag=trueï¼Œåœ¨forçš„æœ€ååˆ¤æ–­flagå†³å®šæ˜¯å¦break","like_count":0},{"had_liked":false,"id":186020,"user_name":"ä¼ è¯´ä¸­çš„æˆå¤§å¤§","can_delete":false,"product_type":"c1","uid":1236766,"ip_address":"","ucode":"103543D6E706BF","user_header":"https://static001.geekbang.org/account/avatar/00/12/df/1e/cea897e8.jpg","comment_is_top":false,"comment_ctime":1583743229,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1583743229","product_id":100013101,"comment_content":"æ€»ç»“ å•å‘é€šé“å’Œselect<br>1. å•å‘é€šé“ <br>   åªèƒ½æ¥æ”¶æˆ–è€…å‘é€çš„é€šé“,ä¸»è¦æ˜¯ç”¨æ¥å¯¹ä»£ç è¿›è¡Œçº¦æŸ<br>   æ³¨æ„äº‹é¡¹:<br>      å¦‚æœä»¥ä¸€ä¸ªå•å‘é€šé“ä½œä¸ºå‚æ•°æ—¶ å®ƒå¯ä»¥æ¥æ”¶ä¸€ä¸ªåŒå‘é€šé“å¹¶ä¸”æŠŠä»–è½¬å˜æˆå•å‘é€šé“<br>2. select ä¸»è¦å°±æ˜¯ä¸ºäº†æ“ä½œè€Œè®¾è®¡çš„<br>   1 å…ˆå¯¹æ‰€æœ‰çš„caseè¯­å¥è¿›è¡Œæ±‚å€¼<br>   2 å†ä»å€™é€‰åˆ†æ”¯é€‰æ‹©ä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„<br>   3 å¦‚æœåŒæ—¶æœ‰å¤šæ¡åˆ†æ”¯ é‚£ä¹ˆå°±ä¼šé‡‡ç”¨ä¸€ä¸ªä¼ªéšæœºç®—æ³• é€‰å–ä¸€ä¸ªåˆ†æ”¯<br>   4 å¦‚æœæ²¡æœ‰åˆ†æ”¯ åˆ™èµ°å‘defaultå­å¥<br>   å¿…é¡»è¦æä¾›ä¸€ä¸ªdefaultå­è¯­å¥ å¦‚æœæ²¡æä¾›çš„è¯æ²¡æœ‰æ»¡è¶³åˆ†æ”¯æ¡ä»¶çš„æƒ…å†µä¸‹ä¼šä¸€ç›´é˜»å¡ç€ <br>   selectåªä¼šæ‰§è¡Œä¸€æ¬¡ æ‰€ä»¥ä¸€èˆ¬ä¹Ÿä¼šæ­é…forä½¿ç”¨<br>å…³äºæ€è€ƒé¢˜ <br>ç¬¬ä¸€é—® å› ä¸ºé€šé“æ¥æ”¶è¿”å›ä¸¤ä¸ªå€¼ ç¬¬äºŒä¸ªå€¼å¯ä»¥è¡¨ç¤ºå…¶æ˜¯å¦å·²ç»å…³é—­äº† å¦‚æœå·²ç»å…³é—­äº†åˆ™å¯ä»¥é‡‡ç”¨breakæ¥å±è”½è¯¥å®ƒçš„åˆ†æ”¯<br>ç¬¬äºŒé—®<br>1. å¦‚æœæ˜¯å‡½æ•° ç›´æ¥return<br>2. åŠ æ ‡ç­¾","like_count":0},{"had_liked":false,"id":163672,"user_name":"æ°´å…ˆç”Ÿî”","can_delete":false,"product_type":"c1","uid":1249714,"ip_address":"","ucode":"362A71DF511E3E","user_header":"https://static001.geekbang.org/account/avatar/00/13/11/b2/dd0606b2.jpg","comment_is_top":false,"comment_ctime":1576764978,"is_pvip":false,"replies":[{"id":"62324","content":"ä½ çš„ä¸¤ä¸ªé—®é¢˜é‡å¤äº†ï¼Œæˆ‘å†å¦ä¸€ä¸ªé‚£é‡Œå›ç­”ä½ äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1576825260,"ip_address":"","comment_id":163672,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1576764978","product_id":100013101,"comment_content":"&quot;äºŒã€å½“intChan2ä¸­æ²¡æœ‰å…ƒç´ å€¼æ—¶ï¼Œå®ƒä¼šè¢«é˜»å¡åœ¨æœ‰forå…³é”®å­—çš„é‚£ä¸€è¡Œï¼Œç›´åˆ°æœ‰æ–°çš„å…ƒç´ å€¼å¯å–ã€‚&quot;<br><br>è€å¸ˆï¼Œè¯·é—®for...range...ä¼šæŠŠchannelçš„å…ƒç´ å–å‡ºæ¥ä¹ˆï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478499,"discussion_content":"ä½ çš„ä¸¤ä¸ªé—®é¢˜é‡å¤äº†ï¼Œæˆ‘å†å¦ä¸€ä¸ªé‚£é‡Œå›ç­”ä½ äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576825260,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":144347,"user_name":"Geek_f8dc6b","can_delete":false,"product_type":"c1","uid":1448402,"ip_address":"","ucode":"D60EB10F9F5932","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJBiaPEt5QP5QtiaYthFoLwLGc9oicd1OOMRXZGzRPECuSq0tPrp7BLhqoJDiarfYFT6GnrTicoQVoZk0w/132","comment_is_top":false,"comment_ctime":1571900641,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1571900641","product_id":100013101,"comment_content":"å¸Œæœ›è®²æ·±ä¸€ç‚¹","like_count":0},{"had_liked":false,"id":130957,"user_name":"Tron","can_delete":false,"product_type":"c1","uid":1130053,"ip_address":"","ucode":"2C4FC68C80A7DD","user_header":"https://static001.geekbang.org/account/avatar/00/11/3e/45/3879f334.jpg","comment_is_top":false,"comment_ctime":1567583870,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1567583870","product_id":100013101,"comment_content":"GOTOè¯­å¥","like_count":0},{"had_liked":false,"id":95148,"user_name":"çªçªå¤´","can_delete":false,"product_type":"c1","uid":1063866,"ip_address":"","ucode":"5C2635ED6484F8","user_header":"https://static001.geekbang.org/account/avatar/00/10/3b/ba/3b30dcde.jpg","comment_is_top":false,"comment_ctime":1557974611,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1557974611","product_id":100013101,"comment_content":"ç¬¬ä¸€ä¸ªé—®é¢˜ç›´æ¥åœ¨caseé‡Œé¢å¯¹é€šé“èµ‹ç©ºå€¼æˆ–è€…æ›¿æ¢é€šé“å˜é‡<br>ç¬¬äºŒä¸ªé—®é¢˜å¯ä»¥ç›´æ¥ç”¨break+æ ‡ç­¾è·³å‡ºæŒ‡å®štagçš„forå¾ªç¯","like_count":0},{"had_liked":false,"id":78422,"user_name":"è›‹è›‹çš„è›‹è›‹","can_delete":false,"product_type":"c1","uid":1332201,"ip_address":"","ucode":"FDB92E5ECDF538","user_header":"https://static001.geekbang.org/account/avatar/00/14/53/e9/83413f80.jpg","comment_is_top":false,"comment_ctime":1553144233,"is_pvip":false,"replies":[{"id":"28872","content":"ç®€å•æ¥è¯´ï¼Œå¯ä»¥ç”¨gotoè¯­å¥é…åˆç€æ¥å†™ã€‚å½“ç„¶äº†ï¼Œä½ è‡ªå·±è®¾ç½®ä¸ªä»£è¡¨çŠ¶æ€çš„å˜é‡ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1553397902,"ip_address":"","comment_id":78422,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1553144233","product_id":100013101,"comment_content":"è¯·é—®ç¬¬äºŒé¢˜æ˜¯ä¸æ˜¯å¯ä»¥åœ¨ for å¤–ç”¨ä¸ª flag è®°å½• select break æƒ…å†µï¼Œå¦‚æœ select breakï¼Œflag çŠ¶æ€åˆ‡æ¢ï¼Œselect ä¸€æ¬¡ç»“æŸååˆ¤æ–­ flag çŠ¶æ€å» break for å¾ªç¯","like_count":0,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":444089,"discussion_content":"ç®€å•æ¥è¯´ï¼Œå¯ä»¥ç”¨gotoè¯­å¥é…åˆç€æ¥å†™ã€‚å½“ç„¶äº†ï¼Œä½ è‡ªå·±è®¾ç½®ä¸ªä»£è¡¨çŠ¶æ€çš„å˜é‡ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553397902,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":68706,"user_name":"zhaopan","can_delete":false,"product_type":"c1","uid":1151132,"ip_address":"","ucode":"2AD77203285F6E","user_header":"https://static001.geekbang.org/account/avatar/00/11/90/9c/532446e4.jpg","comment_is_top":false,"comment_ctime":1550580920,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1550580920","product_id":100013101,"comment_content":"é—®é¢˜1:<br>å½“ç¬¬äºŒä¸ªbooleanå‚æ•°ä¸ºfalseçš„æ—¶å€™ï¼Œåœ¨ç›¸åº”çš„caseä¸­*è®¾ç½®chanä¸ºnilé›¶å€¼*ï¼Œå†æ¬¡caseæ±‚å€¼çš„æ—¶å€™ä¼šé­é‡é˜»å¡ï¼Œä¼šå±è”½è¯¥caseã€‚<br>é—®é¢˜2:<br>&#47;&#47; ç¤ºä¾‹1ã€‚<br>func example1() {<br>\t&#47;&#47; å‡†å¤‡å¥½å‡ ä¸ªé€šé“ã€‚<br>\tintChannels := [3]chan int{<br>\t\tmake(chan int, 1),<br>\t\tmake(chan int, 1),<br>\t\tmake(chan int, 1),<br>\t}<br>\tintChannels[0] &lt;- 01<br>\tintChannels[1] &lt;- 11<br>\tintChannels[2] &lt;- 22<br>\t&#47;&#47; å“ªä¸€ä¸ªé€šé“ä¸­æœ‰å¯å–çš„å…ƒç´ å€¼ï¼Œå“ªä¸ªå¯¹åº”çš„åˆ†æ”¯å°±ä¼šè¢«æ‰§è¡Œã€‚<br>\tfor {<br>\t\tselect {<br>\t\tcase elem0 := &lt;-intChannels[0]:<br>\t\t\tfmt.Printf(&quot;elem0 the element is %d.\\n&quot;, elem0)<br>\t\tcase elem1 := &lt;-intChannels[1]:<br>\t\t\tfmt.Printf(&quot;elem1 the element is %d.\\n&quot;, elem1)<br>\t\tcase elem2 := &lt;-intChannels[2]:<br>\t\t\tfmt.Printf(&quot;elem2 the element is %d.\\n&quot;, elem2)<br>\t\tdefault:<br>\t\t\tfmt.Println(&quot;No candidate case is selected!&quot;)<br>\t\t\tgoto end  &#47;&#47;æˆ–è€…ç›´æ¥return<br>\t\t}<br>\t}<br>\tend:<br>}<br>è¿è¡Œç»“æœ(åˆ†æ”¯æ‰§è¡Œçš„é¡ºåºæ˜¯éšæœºçš„):<br>elem1 the element is 11.<br>elem2 the element is 22.<br>elem0 the element is 1.<br>No candidate case is selected!<br><br>ä»…å½“selectè¯­å¥ä¸­çš„æ‰€æœ‰caseè¡¨è¾¾å¼éƒ½è¢«æ±‚å€¼å®Œæ¯•åï¼Œå®ƒæ‰ä¼šå¼€å§‹é€‰æ‹©å€™é€‰åˆ†æ”¯ã€‚<br>æ±‚å€¼æ“ä½œåº”è¯¥æ€ä¹ˆç†è§£???","like_count":0},{"had_liked":false,"id":52181,"user_name":"è™¢åœ‹æŠ€é†¬","can_delete":false,"product_type":"c1","uid":1056807,"ip_address":"","ucode":"5A192262AA037E","user_header":"https://static001.geekbang.org/account/avatar/00/10/20/27/a6932fbe.jpg","comment_is_top":false,"comment_ctime":1545329248,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1545329248","product_id":100013101,"comment_content":"æ‰“å¡","like_count":0},{"had_liked":false,"id":34865,"user_name":"åˆ°ä¸äº†çš„å¡”","can_delete":false,"product_type":"c1","uid":1258362,"ip_address":"","ucode":"0F5BE3CB58DE31","user_header":"https://static001.geekbang.org/account/avatar/00/13/33/7a/ac307bfc.jpg","comment_is_top":false,"comment_ctime":1540342945,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1540342945","product_id":100013101,"comment_content":"selectæœ‰ä¸€ä¸ªåˆ†æ”¯è¢«å”¤é†’åï¼Œä¼šæœ‰å¤šé•¿çš„æ—¶é—´ç»§ç»­ç›‘å¬å…¶ä»–åˆ†æ”¯çš„å”¤é†’ï¼Œç„¶ååœ¨æ‰§è¡Œcaseåˆ†æ”¯ã€‚<br>intChannels := [3]chan int{<br>\t\tmake(chan int, 1),<br>\t\tmake(chan int, 1),<br>\t\tmake(chan int, 1),<br>\t}<br><br>\ttime.AfterFunc(5, func() {<br>\t\tintChannels[1] &lt;- 1<br>\t})<br>\ttime.AfterFunc(5000, func() {   &#47;&#47;æ—¶é—´ä¸º500æ—¶ï¼Œå°±å˜ä¸ºäº†intChannels[2]è¢«å”¤é†’äº†<br>\t\tintChannels[2] &lt;- 2<br>\t})<br>\tselect {<br>\tcase &lt;-intChannels[0]:<br>\t\tfmt.Println(&quot;The first channel is ready&quot;)<br>\tcase &lt;-intChannels[1]:<br>\t\tfmt.Println(&quot;The second channel is ready &quot;)<br>\tcase &lt;-intChannels[2]:<br>\t\tfmt.Println(&quot;The third channel is ready&quot;)<br>\t}","like_count":0},{"had_liked":false,"id":24424,"user_name":"Pixar","can_delete":false,"product_type":"c1","uid":1197659,"ip_address":"","ucode":"E653387BA8EA16","user_header":"https://static001.geekbang.org/account/avatar/00/12/46/5b/07858c33.jpg","comment_is_top":false,"comment_ctime":1536996674,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1536996674","product_id":100013101,"comment_content":"func main() {<br>\tch1 := make(chan int64, 3)<br>\tch1 &lt;- 100<br><br>\tch2 := make(chan int64, 3)<br>\tclose(ch2)<br><br>\tfor {<br>\t\tselect {<br>\t\tcase v1 := &lt;-ch1:<br>\t\t\tfmt.Println(v1)<br>\t\tcase _, isOpen := &lt;-ch2:<br>\t\t\tif !isOpen {<br>\t\t\t\tch2 = nil<br>\t\t\t}<br>\t\tdefault:<br>\t\t\tgoto next<br>\t\t}<br>\t}<br><br>next:<br>\tfmt.Println(&quot;The Programe is over&quot;)<br>}","like_count":0},{"had_liked":false,"id":23906,"user_name":"Gavin","can_delete":false,"product_type":"c1","uid":1197118,"ip_address":"","ucode":"A9674DFC26FBBF","user_header":"https://static001.geekbang.org/account/avatar/00/12/44/3e/8f13b074.jpg","comment_is_top":false,"comment_ctime":1536716208,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1536716208","product_id":100013101,"comment_content":"å•å‘é€šé“å¯ä»¥å®ç°äº‹ä»¶ç›‘å¬","like_count":0},{"had_liked":false,"id":23034,"user_name":"asdf100","can_delete":false,"product_type":"c1","uid":1043738,"ip_address":"","ucode":"39D8D71453E575","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ed/1a/ce7f7d54.jpg","comment_is_top":false,"comment_ctime":1536115427,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1536115427","product_id":100013101,"comment_content":"å¦‚æœselectè¯­å¥å‘ç°åŒæ—¶æœ‰å¤šä¸ªå€™é€‰åˆ†æ”¯æ»¡è¶³é€‰æ‹©æ¡ä»¶,é‚£ä¹ˆå®ƒå°±ä¼šç”¨ä¸€ç§ä¼ªéšæœºçš„ç®—æ³•åœ¨è¿™äº›åˆ†æ”¯ä¸­é€‰æ‹©ä¸€ä¸ªå¹¶æ‰§è¡Œã€‚","like_count":0},{"had_liked":false,"id":23022,"user_name":"Yayu","can_delete":false,"product_type":"c1","uid":1058015,"ip_address":"","ucode":"5E7842458D8229","user_header":"https://static001.geekbang.org/account/avatar/00/10/24/df/645f8087.jpg","comment_is_top":false,"comment_ctime":1536111785,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1536111785","product_id":100013101,"comment_content":"1.åœ¨å€™é€‰åˆ†æ”¯ä¸­å°†æ¥æ”¶è¡¨è¾¾å¼èµ‹å€¼ç»™ä¸¤ä¸ªå˜é‡ï¼Œä½¿ç”¨ç¬¬äºŒä¸ªå˜é‡æ¥åˆ¤æ–­ channel æ˜¯å¦å…³é—­ï¼Œå¦‚æœå…³é—­ï¼Œå¯ä»¥ä½¿ç”¨ break æ¥å±è”½è¿™æ¡å€™é€‰åˆ†æ”¯çš„é€»è¾‘ä»£ç ã€‚<br>2.æ˜¾ç„¶ä½¿ç”¨ break è¯­å¥åªèƒ½æ¨å‡º select åˆ†æ”¯è¯­å¥ï¼Œæ— æ³•é€€å‡ºå¤–å±‚ for å¾ªç¯ï¼Œè¦æƒ³åœ¨ select åˆ†æ”¯è¯­å¥ä¸­ç›´æ¥è·³å‡ºå¤–å±‚å¾ªç¯ï¼Œéœ€è¦å€ŸåŠ© æ ‡ç­¾æ¥å®Œæˆï¼Œåœ¨å¤–å±‚ for å¾ªç¯è¯­å¥å‰ å®šä¹‰æ ‡ç­¾ Loop:ï¼ˆå½“ç„¶ä¹Ÿå¯ä»¥èµ·ä¸ªå…¶ä»–åå­—ï¼‰åœ¨ select çš„ case è¯­å¥ä¸­ä½¿ç”¨ goto Loop æˆ–è€… break Loop æ¥ç›´æ¥è·³å‡ºå¤–å±‚ for å¾ªç¯ã€‚<br>å½“ç„¶ï¼Œè¿™ä¸¤è€…æ˜¯æœ‰åŒºåˆ«çš„ã€‚åŒºåˆ«åœ¨äºã€Œbreak æ ‡ç­¾ ã€åªèƒ½ç”¨äº for å¾ªç¯ï¼Œä¸”æ ‡ç­¾åœ¨ for å¾ªç¯å‰é¢ã€‚è€Œã€Œgoto æ ‡ç­¾ã€æ˜¯ä¸€ä¸ªé€šç”¨çš„è·³è½¬è¯­å¥ã€‚","like_count":0}]}