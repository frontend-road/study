{"id":64879,"title":"38 | bytesåŒ…ä¸å­—èŠ‚ä¸²æ“ä½œï¼ˆä¸Šï¼‰","content":"<p>æˆ‘ç›¸ä¿¡ï¼Œç»è¿‡ä¸Šä¸€æ¬¡çš„å­¦ä¹ ï¼Œä½ å·²ç»å¯¹<code>strings.Builder</code>å’Œ<code>strings.Reader</code>è¿™ä¸¤ä¸ªç±»å‹è¶³å¤Ÿç†Ÿæ‚‰äº†ã€‚</p><p>æˆ‘ä¸Šæ¬¡è¿˜å»ºè®®ä½ å»è‡ªè¡ŒæŸ¥é˜…<code>strings</code>ä»£ç åŒ…ä¸­çš„å…¶ä»–ç¨‹åºå®ä½“ã€‚å¦‚æœä½ è®¤çœŸå»çœ‹äº†ï¼Œé‚£ä¹ˆè‚¯å®šä¼šå¯¹æˆ‘ä»¬ä»Šå¤©è¦è®¨è®ºçš„<code>bytes</code>ä»£ç åŒ…ï¼Œæœ‰ç§ä¼¼æ›¾ç›¸è¯†çš„æ„Ÿè§‰ã€‚</p><h2>å‰å¯¼å†…å®¹ï¼š <code>bytes.Buffer</code>åŸºç¡€çŸ¥è¯†</h2><p><code>strings</code>åŒ…å’Œ<code>bytes</code>åŒ…å¯ä»¥è¯´æ˜¯ä¸€å¯¹å­ªç”Ÿå…„å¼Ÿï¼Œå®ƒä»¬åœ¨APIæ–¹é¢éå¸¸çš„ç›¸ä¼¼ã€‚å•ä»å®ƒä»¬æä¾›çš„å‡½æ•°çš„æ•°é‡å’ŒåŠŸèƒ½ä¸Šè®²ï¼Œå·®åˆ«å¯ä»¥è¯´æ˜¯å¾®ä¹å…¶å¾®ã€‚</p><p><strong>åªä¸è¿‡ï¼Œ<code>strings</code>åŒ…ä¸»è¦é¢å‘çš„æ˜¯Unicodeå­—ç¬¦å’Œç»è¿‡UTF-8ç¼–ç çš„å­—ç¬¦ä¸²ï¼Œè€Œ<code>bytes</code>åŒ…é¢å¯¹çš„åˆ™ä¸»è¦æ˜¯å­—èŠ‚å’Œå­—èŠ‚åˆ‡ç‰‡ã€‚</strong></p><p>æˆ‘ä»Šå¤©ä¼šä¸»è¦è®²<code>bytes</code>åŒ…ä¸­æœ€æœ‰ç‰¹è‰²çš„ç±»å‹<code>Buffer</code>ã€‚é¡¾åæ€ä¹‰ï¼Œ<code>bytes.Buffer</code>ç±»å‹çš„ç”¨é€”ä¸»è¦æ˜¯ä½œä¸ºå­—èŠ‚åºåˆ—çš„ç¼“å†²åŒºã€‚</p><p>ä¸<code>strings.Builder</code>ç±»å‹ä¸€æ ·ï¼Œ<code>bytes.Buffer</code>ä¹Ÿæ˜¯å¼€ç®±å³ç”¨çš„ã€‚</p><p>ä½†ä¸åŒçš„æ˜¯ï¼Œ<code>strings.Builder</code>åªèƒ½æ‹¼æ¥å’Œå¯¼å‡ºå­—ç¬¦ä¸²ï¼Œè€Œ<code>bytes.Buffer</code>ä¸ä½†å¯ä»¥æ‹¼æ¥ã€æˆªæ–­å…¶ä¸­çš„å­—èŠ‚åºåˆ—ï¼Œä»¥å„ç§å½¢å¼å¯¼å‡ºå…¶ä¸­çš„å†…å®¹ï¼Œè¿˜å¯ä»¥é¡ºåºåœ°è¯»å–å…¶ä¸­çš„å­åºåˆ—ã€‚</p><p>å¯ä»¥è¯´ï¼Œ<code>bytes.Buffer</code>æ˜¯é›†è¯»ã€å†™åŠŸèƒ½äºä¸€èº«çš„æ•°æ®ç±»å‹ã€‚å½“ç„¶äº†ï¼Œè¿™äº›ä¹ŸåŸºæœ¬ä¸Šéƒ½æ˜¯ä½œä¸ºä¸€ä¸ªç¼“å†²åŒºåº”è¯¥æ‹¥æœ‰çš„åŠŸèƒ½ã€‚</p><!-- [[[read_end]]] --><p>åœ¨å†…éƒ¨ï¼Œ<code>bytes.Buffer</code>ç±»å‹åŒæ ·æ˜¯ä½¿ç”¨å­—èŠ‚åˆ‡ç‰‡ä½œä¸ºå†…å®¹å®¹å™¨çš„ã€‚å¹¶ä¸”ï¼Œä¸<code>strings.Reader</code>ç±»å‹ç±»ä¼¼ï¼Œ<code>bytes.Buffer</code>æœ‰ä¸€ä¸ª<code>int</code>ç±»å‹çš„å­—æ®µï¼Œç”¨äºä»£è¡¨å·²è¯»å­—èŠ‚çš„è®¡æ•°ï¼Œå¯ä»¥ç®€ç§°ä¸ºå·²è¯»è®¡æ•°ã€‚</p><p>ä¸è¿‡ï¼Œè¿™é‡Œçš„å·²è¯»è®¡æ•°å°±æ— æ³•é€šè¿‡<code>bytes.Buffer</code>æä¾›çš„æ–¹æ³•è®¡ç®—å‡ºæ¥äº†ã€‚</p><p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹é¢çš„ä»£ç ï¼š</p><pre><code>var buffer1 bytes.Buffer\ncontents := &quot;Simple byte buffer for marshaling data.&quot;\nfmt.Printf(&quot;Writing contents %q ...\\n&quot;, contents)\nbuffer1.WriteString(contents)\nfmt.Printf(&quot;The length of buffer: %d\\n&quot;, buffer1.Len())\nfmt.Printf(&quot;The capacity of buffer: %d\\n&quot;, buffer1.Cap())\n</code></pre><p>æˆ‘å…ˆå£°æ˜äº†ä¸€ä¸ª<code>bytes.Buffer</code>ç±»å‹çš„å˜é‡<code>buffer1</code>ï¼Œå¹¶å†™å…¥äº†ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚ç„¶åï¼Œæˆ‘æƒ³æ‰“å°å‡ºè¿™ä¸ª<code>bytes.Buffer</code>ç±»å‹çš„å€¼ï¼ˆä»¥ä¸‹ç®€ç§°<code>Buffer</code>å€¼ï¼‰çš„é•¿åº¦å’Œå®¹é‡ã€‚åœ¨è¿è¡Œè¿™æ®µä»£ç ä¹‹åï¼Œæˆ‘ä»¬å°†ä¼šçœ‹åˆ°å¦‚ä¸‹çš„è¾“å‡ºï¼š</p><pre><code>Writing contents &quot;Simple byte buffer for marshaling data.&quot; ...\nThe length of buffer: 39\nThe capacity of buffer: 64\n</code></pre><p>ä¹ä¸€çœ‹è¿™æ²¡ä»€ä¹ˆé—®é¢˜ã€‚é•¿åº¦<code>39</code>å’Œå®¹é‡<code>64</code>çš„å«ä¹‰çœ‹èµ·æ¥ä¸æˆ‘ä»¬å·²çŸ¥çš„æ¦‚å¿µæ˜¯ä¸€è‡´çš„ã€‚æˆ‘å‘ç¼“å†²åŒºä¸­å†™å…¥äº†ä¸€ä¸ªé•¿åº¦ä¸º<code>39</code>çš„å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥<code>buffer1</code>çš„é•¿åº¦å°±æ˜¯<code>39</code>ã€‚</p><p>æ ¹æ®åˆ‡ç‰‡çš„è‡ªåŠ¨æ‰©å®¹ç­–ç•¥ï¼Œ<code>64</code>è¿™ä¸ªæ•°å­—ä¹Ÿæ˜¯åˆç†çš„ã€‚å¦å¤–ï¼Œå¯ä»¥æƒ³è±¡ï¼Œè¿™æ—¶çš„å·²è¯»è®¡æ•°çš„å€¼åº”è¯¥æ˜¯<code>0</code>ï¼Œè¿™æ˜¯å› ä¸ºæˆ‘è¿˜æ²¡æœ‰è°ƒç”¨ä»»ä½•ç”¨äºè¯»å–å…¶ä¸­å†…å®¹çš„æ–¹æ³•ã€‚</p><p>å¯å®é™…ä¸Šï¼Œä¸<code>strings.Reader</code>ç±»å‹çš„<code>Len</code>æ–¹æ³•ä¸€æ ·ï¼Œ<code>buffer1</code>çš„<code>Len</code>æ–¹æ³•è¿”å›çš„ä¹Ÿæ˜¯å†…å®¹å®¹å™¨ä¸­æœªè¢«è¯»å–éƒ¨åˆ†çš„é•¿åº¦ï¼Œè€Œä¸æ˜¯å…¶ä¸­å·²å­˜å†…å®¹çš„æ€»é•¿åº¦ï¼ˆä»¥ä¸‹ç®€ç§°å†…å®¹é•¿åº¦ï¼‰ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><pre><code>p1 := make([]byte, 7)\nn, _ := buffer1.Read(p1)\nfmt.Printf(&quot;%d bytes were read. (call Read)\\n&quot;, n)\nfmt.Printf(&quot;The length of buffer: %d\\n&quot;, buffer1.Len())\nfmt.Printf(&quot;The capacity of buffer: %d\\n&quot;, buffer1.Cap())\n</code></pre><p>å½“æˆ‘ä»<code>buffer1</code>ä¸­è¯»å–ä¸€éƒ¨åˆ†å†…å®¹ï¼Œå¹¶ç”¨å®ƒä»¬å¡«æ»¡é•¿åº¦ä¸º<code>7</code>çš„å­—èŠ‚åˆ‡ç‰‡<code>p1</code>ä¹‹åï¼Œ<code>buffer1</code>çš„<code>Len</code>æ–¹æ³•è¿”å›çš„ç»“æœå€¼ä¹Ÿä¼šéšå³å‘ç”Ÿå˜åŒ–ã€‚å¦‚æœè¿è¡Œè¿™æ®µä»£ç ï¼Œæˆ‘ä»¬ä¼šå‘ç°ï¼Œè¿™ä¸ªç¼“å†²åŒºçš„é•¿åº¦å·²ç»å˜ä¸ºäº†<code>32</code>ã€‚</p><p>å¦å¤–ï¼Œå› ä¸ºæˆ‘ä»¬å¹¶æ²¡æœ‰å†å‘è¯¥ç¼“å†²åŒºä¸­å†™å…¥ä»»ä½•å†…å®¹ï¼Œæ‰€ä»¥å®ƒçš„å®¹é‡ä¼šä¿æŒä¸å˜ï¼Œä»æ˜¯<code>64</code>ã€‚</p><p><strong>æ€»ä¹‹ï¼Œåœ¨è¿™é‡Œï¼Œä½ éœ€è¦è®°ä½çš„æ˜¯ï¼Œ<code>Buffer</code>å€¼çš„é•¿åº¦æ˜¯æœªè¯»å†…å®¹çš„é•¿åº¦ï¼Œè€Œä¸æ˜¯å·²å­˜å†…å®¹çš„æ€»é•¿åº¦ã€‚</strong> å®ƒä¸åœ¨å½“å‰å€¼ä¹‹ä¸Šçš„è¯»æ“ä½œå’Œå†™æ“ä½œéƒ½æœ‰å…³ç³»ï¼Œå¹¶ä¼šéšç€è¿™ä¸¤ç§æ“ä½œçš„è¿›è¡Œè€Œæ”¹å˜ï¼Œå®ƒå¯èƒ½ä¼šå˜å¾—æ›´å°ï¼Œä¹Ÿå¯èƒ½ä¼šå˜å¾—æ›´å¤§ã€‚</p><p>è€Œ<code>Buffer</code>å€¼çš„å®¹é‡æŒ‡çš„æ˜¯å®ƒçš„å†…å®¹å®¹å™¨ï¼ˆä¹Ÿå°±æ˜¯é‚£ä¸ªå­—èŠ‚åˆ‡ç‰‡ï¼‰çš„å®¹é‡ï¼Œå®ƒåªä¸åœ¨å½“å‰å€¼ä¹‹ä¸Šçš„å†™æ“ä½œæœ‰å…³ï¼Œå¹¶ä¼šéšç€å†…å®¹çš„å†™å…¥è€Œä¸æ–­å¢é•¿ã€‚</p><p>å†è¯´å·²è¯»è®¡æ•°ã€‚ç”±äº<code>strings.Reader</code>è¿˜æœ‰ä¸€ä¸ª<code>Size</code>æ–¹æ³•å¯ä»¥ç»™å‡ºå†…å®¹é•¿åº¦çš„å€¼ï¼Œæ‰€ä»¥æˆ‘ä»¬ç”¨å†…å®¹é•¿åº¦å‡å»æœªè¯»éƒ¨åˆ†çš„é•¿åº¦ï¼Œå°±å¯ä»¥å¾ˆæ–¹ä¾¿åœ°å¾—åˆ°å®ƒçš„å·²è¯»è®¡æ•°ã€‚</p><p>ç„¶è€Œï¼Œ<code>bytes.Buffer</code>ç±»å‹å´æ²¡æœ‰è¿™æ ·ä¸€ä¸ªæ–¹æ³•ï¼Œå®ƒåªæœ‰<code>Cap</code>æ–¹æ³•ã€‚å¯æ˜¯<code>Cap</code>æ–¹æ³•æä¾›çš„æ˜¯å†…å®¹å®¹å™¨çš„å®¹é‡ï¼Œä¹Ÿä¸æ˜¯å†…å®¹é•¿åº¦ã€‚</p><p>å¹¶ä¸”ï¼Œè¿™é‡Œçš„å†…å®¹å®¹å™¨å®¹é‡åœ¨å¾ˆå¤šæ—¶å€™éƒ½ä¸å†…å®¹é•¿åº¦ä¸ç›¸åŒã€‚å› æ­¤ï¼Œæ²¡æœ‰äº†ç°æˆçš„è®¡ç®—å…¬å¼ï¼Œåªè¦é‡åˆ°ç¨å¾®å¤æ‚äº›çš„æƒ…å†µï¼Œæˆ‘ä»¬å°±å¾ˆéš¾ä¼°ç®—å‡º<code>Buffer</code>å€¼çš„å·²è¯»è®¡æ•°ã€‚</p><p>ä¸€æ—¦ç†è§£äº†å·²è¯»è®¡æ•°è¿™ä¸ªæ¦‚å¿µï¼Œå¹¶ä¸”èƒ½å¤Ÿåœ¨è¯»å†™çš„è¿‡ç¨‹ä¸­ï¼Œå®æ—¶åœ°è·å¾—å·²è¯»è®¡æ•°å’Œå†…å®¹é•¿åº¦çš„å€¼ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¾ˆç›´è§‚åœ°äº†è§£åˆ°å½“å‰<code>Buffer</code>å€¼å„ç§æ–¹æ³•çš„è¡Œä¸ºäº†ã€‚ä¸è¿‡ï¼Œå¾ˆå¯æƒœï¼Œè¿™ä¸¤ä¸ªæ•°å­—æˆ‘ä»¬éƒ½æ— æ³•ç›´æ¥æ‹¿åˆ°ã€‚</p><p>è™½ç„¶ï¼Œæˆ‘ä»¬æ— æ³•ç›´æ¥å¾—åˆ°ä¸€ä¸ª<code>Buffer</code>å€¼çš„å·²è¯»è®¡æ•°ï¼Œå¹¶ä¸”æœ‰æ—¶å€™ä¹Ÿå¾ˆéš¾ä¼°ç®—å®ƒï¼Œä½†æ˜¯æˆ‘ä»¬ç»å¯¹ä¸èƒ½å°±æ­¤ä½œç½¢ï¼Œè€Œåº”è¯¥é€šè¿‡ç ”è¯»<code>bytes.Buffer</code>å’Œæ–‡æ¡£å’Œæºç ï¼Œå»æ¢ç©¶å·²è¯»è®¡æ•°åœ¨å…¶ä¸­èµ·åˆ°çš„å…³é”®ä½œç”¨ã€‚</p><p>å¦åˆ™ï¼Œæˆ‘ä»¬æƒ³ç”¨å¥½<code>bytes.Buffer</code>çš„æ„æ„¿ï¼Œææ€•å°±ä¸ä¼šé‚£ä¹ˆå®¹æ˜“å®ç°äº†ã€‚</p><p>ä¸‹é¢çš„è¿™ä¸ªé—®é¢˜ï¼Œå¦‚æœä½ è®¤çœŸåœ°é˜…è¯»äº†<code>bytes.Buffer</code>çš„æºç ä¹‹åï¼Œå°±å¯ä»¥å¾ˆå¥½åœ°å›ç­”å‡ºæ¥ã€‚</p><p><strong>æˆ‘ä»¬ä»Šå¤©çš„é—®é¢˜æ˜¯ï¼š<code>bytes.Buffer</code>ç±»å‹çš„å€¼è®°å½•çš„å·²è¯»è®¡æ•°ï¼Œåœ¨å…¶ä¸­èµ·åˆ°äº†æ€æ ·çš„ä½œç”¨ï¼Ÿ</strong></p><p>è¿™é“é¢˜çš„å…¸å‹å›ç­”æ˜¯è¿™æ ·çš„ã€‚</p><p><code>bytes.Buffer</code>ä¸­çš„å·²è¯»è®¡æ•°çš„å¤§è‡´åŠŸç”¨å¦‚ä¸‹æ‰€ç¤ºã€‚</p><ol>\n<li>è¯»å–å†…å®¹æ—¶ï¼Œç›¸åº”æ–¹æ³•ä¼šä¾æ®å·²è¯»è®¡æ•°æ‰¾åˆ°æœªè¯»éƒ¨åˆ†ï¼Œå¹¶åœ¨è¯»å–åæ›´æ–°è®¡æ•°ã€‚</li>\n<li>å†™å…¥å†…å®¹æ—¶ï¼Œå¦‚éœ€æ‰©å®¹ï¼Œç›¸åº”æ–¹æ³•ä¼šæ ¹æ®å·²è¯»è®¡æ•°å®ç°æ‰©å®¹ç­–ç•¥ã€‚</li>\n<li>æˆªæ–­å†…å®¹æ—¶ï¼Œç›¸åº”æ–¹æ³•æˆªæ‰çš„æ˜¯å·²è¯»è®¡æ•°ä»£è¡¨ç´¢å¼•ä¹‹åçš„æœªè¯»éƒ¨åˆ†ã€‚</li>\n<li>è¯»å›é€€æ—¶ï¼Œç›¸åº”æ–¹æ³•éœ€è¦ç”¨å·²è¯»è®¡æ•°è®°å½•å›é€€ç‚¹ã€‚</li>\n<li>é‡ç½®å†…å®¹æ—¶ï¼Œç›¸åº”æ–¹æ³•ä¼šæŠŠå·²è¯»è®¡æ•°ç½®ä¸º<code>0</code>ã€‚</li>\n<li>å¯¼å‡ºå†…å®¹æ—¶ï¼Œç›¸åº”æ–¹æ³•åªä¼šå¯¼å‡ºå·²è¯»è®¡æ•°ä»£è¡¨çš„ç´¢å¼•ä¹‹åçš„æœªè¯»éƒ¨åˆ†ã€‚</li>\n<li>è·å–é•¿åº¦æ—¶ï¼Œç›¸åº”æ–¹æ³•ä¼šä¾æ®å·²è¯»è®¡æ•°å’Œå†…å®¹å®¹å™¨çš„é•¿åº¦ï¼Œè®¡ç®—æœªè¯»éƒ¨åˆ†çš„é•¿åº¦å¹¶è¿”å›ã€‚</li>\n</ol><h2>é—®é¢˜è§£æ</h2><p>é€šè¿‡ä¸Šé¢çš„å…¸å‹å›ç­”ï¼Œæˆ‘ä»¬å·²ç»èƒ½å¤Ÿä½“ä¼šåˆ°å·²è¯»è®¡æ•°åœ¨<code>bytes.Buffer</code>ç±»å‹ï¼ŒåŠå…¶æ–¹æ³•ä¸­çš„é‡è¦æ€§äº†ã€‚æ²¡é”™ï¼Œ<code>bytes.Buffer</code>çš„ç»å¤§å¤šæ•°æ–¹æ³•éƒ½ç”¨åˆ°äº†å·²è¯»è®¡æ•°ï¼Œè€Œä¸”éƒ½æ˜¯éç”¨ä¸å¯ã€‚</p><p><strong>åœ¨è¯»å–å†…å®¹çš„æ—¶å€™</strong>ï¼Œç›¸åº”æ–¹æ³•ä¼šå…ˆæ ¹æ®å·²è¯»è®¡æ•°ï¼Œåˆ¤æ–­ä¸€ä¸‹å†…å®¹å®¹å™¨ä¸­æ˜¯å¦è¿˜æœ‰æœªè¯»çš„å†…å®¹ã€‚å¦‚æœæœ‰ï¼Œé‚£ä¹ˆå®ƒå°±ä¼šä»å·²è¯»è®¡æ•°ä»£è¡¨çš„ç´¢å¼•å¤„å¼€å§‹è¯»å–ã€‚</p><p><strong>åœ¨è¯»å–å®Œæˆå</strong>ï¼Œå®ƒè¿˜ä¼šåŠæ—¶åœ°æ›´æ–°å·²è¯»è®¡æ•°ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒä¼šè®°å½•ä¸€ä¸‹åˆæœ‰å¤šå°‘ä¸ªå­—èŠ‚è¢«è¯»å–äº†ã€‚<strong>è¿™é‡Œæ‰€è¯´çš„ç›¸åº”æ–¹æ³•åŒ…æ‹¬äº†æ‰€æœ‰åç§°ä»¥<code>Read</code>å¼€å¤´çš„æ–¹æ³•ï¼Œä»¥åŠ<code>Next</code>æ–¹æ³•å’Œ<code>WriteTo</code>æ–¹æ³•ã€‚</strong></p><p><strong>åœ¨å†™å…¥å†…å®¹çš„æ—¶å€™</strong>ï¼Œç»å¤§å¤šæ•°çš„ç›¸åº”æ–¹æ³•éƒ½ä¼šå…ˆæ£€æŸ¥å½“å‰çš„å†…å®¹å®¹å™¨ï¼Œæ˜¯å¦æœ‰è¶³å¤Ÿçš„å®¹é‡å®¹çº³æ–°çš„å†…å®¹ã€‚å¦‚æœæ²¡æœ‰ï¼Œé‚£ä¹ˆå®ƒä»¬å°±ä¼šå¯¹å†…å®¹å®¹å™¨è¿›è¡Œæ‰©å®¹ã€‚</p><p><strong>åœ¨æ‰©å®¹çš„æ—¶å€™</strong>ï¼Œæ–¹æ³•ä¼šåœ¨å¿…è¦æ—¶ï¼Œä¾æ®å·²è¯»è®¡æ•°æ‰¾åˆ°æœªè¯»éƒ¨åˆ†ï¼Œå¹¶æŠŠå…¶ä¸­çš„å†…å®¹æ‹·è´åˆ°æ‰©å®¹åå†…å®¹å®¹å™¨çš„å¤´éƒ¨ä½ç½®ã€‚</p><p>ç„¶åï¼Œæ–¹æ³•å°†ä¼šæŠŠå·²è¯»è®¡æ•°çš„å€¼ç½®ä¸º<code>0</code>ï¼Œä»¥è¡¨ç¤ºä¸‹ä¸€æ¬¡è¯»å–éœ€è¦ä»å†…å®¹å®¹å™¨çš„ç¬¬ä¸€ä¸ªå­—èŠ‚å¼€å§‹ã€‚<strong>ç”¨äºå†™å…¥å†…å®¹çš„ç›¸åº”æ–¹æ³•ï¼ŒåŒ…æ‹¬äº†æ‰€æœ‰åç§°ä»¥<code>Write</code>å¼€å¤´çš„æ–¹æ³•ï¼Œä»¥åŠ<code>ReadFrom</code>æ–¹æ³•ã€‚</strong></p><p><strong>ç”¨äºæˆªæ–­å†…å®¹çš„æ–¹æ³•<code>Truncate</code>ï¼Œä¼šè®©å¾ˆå¤šå¯¹<code>bytes.Buffer</code>ä¸å¤ªäº†è§£çš„ç¨‹åºå¼€å‘è€…è¿·æƒ‘ã€‚</strong> å®ƒä¼šæ¥å—ä¸€ä¸ª<code>int</code>ç±»å‹çš„å‚æ•°ï¼Œè¿™ä¸ªå‚æ•°çš„å€¼ä»£è¡¨äº†ï¼šåœ¨æˆªæ–­æ—¶éœ€è¦ä¿ç•™å¤´éƒ¨çš„å¤šå°‘ä¸ªå­—èŠ‚ã€‚</p><p>ä¸è¿‡ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œè¯´çš„å¤´éƒ¨æŒ‡çš„å¹¶ä¸æ˜¯å†…å®¹å®¹å™¨çš„å¤´éƒ¨ï¼Œè€Œæ˜¯å…¶ä¸­çš„æœªè¯»éƒ¨åˆ†çš„å¤´éƒ¨ã€‚å¤´éƒ¨çš„èµ·å§‹ç´¢å¼•æ­£æ˜¯ç”±å·²è¯»è®¡æ•°çš„å€¼è¡¨ç¤ºçš„ã€‚å› æ­¤ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå·²è¯»è®¡æ•°çš„å€¼å†åŠ ä¸Šå‚æ•°å€¼åå¾—åˆ°çš„å’Œï¼Œå°±æ˜¯å†…å®¹å®¹å™¨æ–°çš„æ€»é•¿åº¦ã€‚</p><p><strong>åœ¨<code>bytes.Buffer</code>ä¸­ï¼Œç”¨äºè¯»å›é€€çš„æ–¹æ³•æœ‰<code>UnreadByte</code>å’Œ<code>UnreadRune</code>ã€‚</strong> è¿™ä¸¤ä¸ªæ–¹æ³•åˆ†åˆ«ç”¨äºå›é€€ä¸€ä¸ªå­—èŠ‚å’Œå›é€€ä¸€ä¸ªUnicodeå­—ç¬¦ã€‚è°ƒç”¨å®ƒä»¬ä¸€èˆ¬éƒ½æ˜¯ä¸ºäº†é€€å›åœ¨ä¸Šä¸€æ¬¡è¢«è¯»å–å†…å®¹æœ«å°¾çš„é‚£ä¸ªåˆ†éš”ç¬¦ï¼Œæˆ–è€…ä¸ºé‡æ–°è¯»å–å‰ä¸€ä¸ªå­—èŠ‚æˆ–å­—ç¬¦åšå‡†å¤‡ã€‚</p><p>ä¸è¿‡ï¼Œé€€å›çš„å‰ææ˜¯ï¼Œåœ¨è°ƒç”¨å®ƒä»¬ä¹‹å‰çš„é‚£ä¸€ä¸ªæ“ä½œå¿…é¡»æ˜¯â€œè¯»å–â€ï¼Œå¹¶ä¸”æ˜¯æˆåŠŸçš„è¯»å–ï¼Œå¦åˆ™è¿™äº›æ–¹æ³•å°±åªèƒ½å¿½ç•¥åç»­æ“ä½œå¹¶è¿”å›ä¸€ä¸ªé<code>nil</code>çš„é”™è¯¯å€¼ã€‚</p><p><code>UnreadByte</code>æ–¹æ³•çš„åšæ³•æ¯”è¾ƒç®€å•ï¼ŒæŠŠå·²è¯»è®¡æ•°çš„å€¼å‡<code>1</code>å°±å¥½äº†ã€‚è€Œ<code>UnreadRune</code>æ–¹æ³•éœ€è¦ä»å·²è¯»è®¡æ•°ä¸­å‡å»çš„ï¼Œæ˜¯ä¸Šä¸€æ¬¡è¢«è¯»å–çš„Unicodeå­—ç¬¦æ‰€å ç”¨çš„å­—èŠ‚æ•°ã€‚</p><p>è¿™ä¸ªå­—èŠ‚æ•°ç”±<code>bytes.Buffer</code>çš„å¦ä¸€ä¸ªå­—æ®µè´Ÿè´£å­˜å‚¨ï¼Œå®ƒåœ¨è¿™é‡Œçš„æœ‰æ•ˆå–å€¼èŒƒå›´æ˜¯[1, 4]ã€‚åªæœ‰<code>ReadRune</code>æ–¹æ³•æ‰ä¼šæŠŠè¿™ä¸ªå­—æ®µçš„å€¼è®¾å®šåœ¨æ­¤èŒƒå›´ä¹‹å†…ã€‚</p><p>ç”±æ­¤å¯è§ï¼Œåªæœ‰ç´§æ¥åœ¨è°ƒç”¨<code>ReadRune</code>æ–¹æ³•ä¹‹åï¼Œå¯¹<code>UnreadRune</code>æ–¹æ³•çš„è°ƒç”¨æ‰èƒ½å¤ŸæˆåŠŸå®Œæˆã€‚è¯¥æ–¹æ³•æ˜æ˜¾æ¯”<code>UnreadByte</code>æ–¹æ³•çš„é€‚ç”¨é¢æ›´çª„ã€‚</p><p>æˆ‘åœ¨å‰é¢è¯´è¿‡ï¼Œ<code>bytes.Buffer</code>çš„<code>Len</code>æ–¹æ³•è¿”å›çš„æ˜¯å†…å®¹å®¹å™¨ä¸­æœªè¯»éƒ¨åˆ†çš„é•¿åº¦ï¼Œè€Œä¸æ˜¯å…¶ä¸­å·²å­˜å†…å®¹çš„æ€»é•¿åº¦ï¼ˆå³ï¼šå†…å®¹é•¿åº¦ï¼‰ã€‚</p><p>è€Œè¯¥ç±»å‹çš„<code>Bytes</code>æ–¹æ³•å’Œ<code>String</code>æ–¹æ³•çš„è¡Œä¸ºï¼Œä¸<code>Len</code>æ–¹æ³•æ˜¯ä¿æŒä¸€è‡´çš„ã€‚å‰ä¸¤ä¸ªæ–¹æ³•åªä¼šå»è®¿é—®æœªè¯»éƒ¨åˆ†ä¸­çš„å†…å®¹ï¼Œå¹¶è¿”å›ç›¸åº”çš„ç»“æœå€¼ã€‚</p><p>åœ¨æˆ‘ä»¬å‰–æäº†æ‰€æœ‰çš„ç›¸å…³æ–¹æ³•ä¹‹åï¼Œå¯ä»¥è¿™æ ·æ¥æ€»ç»“ï¼šåœ¨å·²è¯»è®¡æ•°ä»£è¡¨çš„ç´¢å¼•ä¹‹å‰çš„é‚£äº›å†…å®¹ï¼Œæ°¸è¿œéƒ½æ˜¯å·²ç»è¢«è¯»è¿‡çš„ï¼Œå®ƒä»¬å‡ ä¹æ²¡æœ‰æœºä¼šå†æ¬¡è¢«è¯»å–ã€‚</p><p>ä¸è¿‡ï¼Œè¿™äº›å·²è¯»å†…å®¹æ‰€åœ¨çš„å†…å­˜ç©ºé—´å¯èƒ½ä¼šè¢«å­˜å…¥æ–°çš„å†…å®¹ã€‚è¿™ä¸€èˆ¬éƒ½æ˜¯ç”±äºé‡ç½®æˆ–è€…æ‰©å……å†…å®¹å®¹å™¨å¯¼è‡´çš„ã€‚è¿™æ—¶ï¼Œå·²è¯»è®¡æ•°ä¸€å®šä¼šè¢«ç½®ä¸º<code>0</code>ï¼Œä»è€Œå†æ¬¡æŒ‡å‘å†…å®¹å®¹å™¨ä¸­çš„ç¬¬ä¸€ä¸ªå­—èŠ‚ã€‚è¿™æœ‰æ—¶å€™ä¹Ÿæ˜¯ä¸ºäº†é¿å…å†…å­˜åˆ†é…å’Œé‡ç”¨å†…å­˜ç©ºé—´ã€‚</p><h2>æ€»ç»“</h2><p>æ€»ç»“ä¸€ä¸‹ï¼Œ<code>bytes.Buffer</code>æ˜¯ä¸€ä¸ªé›†è¯»ã€å†™åŠŸèƒ½äºä¸€èº«çš„æ•°æ®ç±»å‹ã€‚å®ƒéå¸¸é€‚åˆä½œä¸ºå­—èŠ‚åºåˆ—çš„ç¼“å†²åŒºã€‚æˆ‘ä»¬ä¼šåœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­ç»§ç»­å¯¹bytes.Bufferçš„çŸ¥è¯†è¿›è¡Œå»¶å±•ã€‚å¦‚æœä½ å¯¹äºè¿™éƒ¨åˆ†å†…å®¹æœ‰ä»€ä¹ˆæ ·é—®é¢˜ï¼Œæ¬¢è¿ç»™æˆ‘ç•™è¨€ï¼Œæˆ‘ä»¬ä¸€èµ·è®¨è®ºã€‚</p><p>æ„Ÿè°¢ä½ çš„æ”¶å¬ï¼Œæˆ‘ä»¬ä¸‹æ¬¡å†è§ã€‚</p><p><a href=\"https://github.com/hyper0x/Golang_Puzzlers\">æˆ³æ­¤æŸ¥çœ‹Goè¯­è¨€ä¸“æ æ–‡ç« é…å¥—è¯¦ç»†ä»£ç ã€‚</a></p><p></p>","neighbors":{"left":{"article_title":"37 | stringsåŒ…ä¸å­—ç¬¦ä¸²æ“ä½œ","id":64877},"right":{"article_title":"39 | bytesåŒ…ä¸å­—èŠ‚ä¸²æ“ä½œï¼ˆä¸‹ï¼‰","id":64881}},"comments":[{"had_liked":false,"id":121401,"user_name":"é™æ°´æµæ·±","can_delete":false,"product_type":"c1","uid":1339724,"ip_address":"","ucode":"644F05EFBD2E7B","user_header":"https://static001.geekbang.org/account/avatar/00/14/71/4c/2cefec07.jpg","comment_is_top":false,"comment_ctime":1565134915,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"91759448131","product_id":100013101,"comment_content":"ä¸€å›¾èƒœåƒè¨€","like_count":22,"discussions":[{"author":{"id":2997610,"avatar":"","nickname":"Geek_superkai","note":"","ucode":"11BD59E867CEF8","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":586188,"discussion_content":"çœ‹åäº† è§‰å¾—è¿™ä¸ªè€å¸ˆæƒ³åˆ°å“ªé‡Œè®²åˆ°å“ªé‡Œ å…¨ç¯‡æ–‡å­— æ²¡æœ‰ä¸€ä¸ªæµç¨‹å›¾","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662024870,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1065849,"avatar":"https://static001.geekbang.org/account/avatar/00/10/43/79/18073134.jpg","nickname":"test","note":"","ucode":"9A4973E591DD12","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":374693,"discussion_content":"å“ã€‚ã€‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621318947,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1445744,"avatar":"https://static001.geekbang.org/account/avatar/00/16/0f/70/f59db672.jpg","nickname":"æ§‘Â·å…ˆç”Ÿ","note":"","ucode":"897F0475592E3A","race_medal":2,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":369734,"discussion_content":"ä¹ æƒ¯å§ï¼Œè¿™ä¸ªè¯¾ç¨‹ä¸€ç›´éƒ½æ˜¯è¿™æ ·çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619144182,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":280233,"user_name":"AllenGFLiu","can_delete":false,"product_type":"c1","uid":1221991,"ip_address":"","ucode":"90FA8A619A2629","user_header":"https://static001.geekbang.org/account/avatar/00/12/a5/67/bf286335.jpg","comment_is_top":false,"comment_ctime":1614138567,"is_pvip":false,"replies":[{"id":"101813","content":"å¦‚æœæƒ³äº†è§£æ ‡å‡†åº“ä¸­æŸä¸ªåŒ…çš„åŠŸèƒ½ï¼Œå¯ä»¥ä»åº”ç”¨ç¨‹åºè°ƒç”¨çš„å‡½æ•°çœ‹èµ·ï¼Œä¸€æ­¥æ­¥æ·±å…¥ã€‚æ ‡å‡†åº“æ˜¯ä¸€å¼ ç½‘ï¼Œæ‰€ä»¥ä½ åœ¨çœ‹çš„æ—¶å€™ä¹Ÿéœ€è¦ç»‡ä¸€å¼ ç½‘ï¼Œä¹Ÿå°±æ˜¯è¯´éœ€è¦è®°å¥½ç¬”è®°ï¼Œå¹¶ä¸”åœ¨å¿…è¦çš„æ—¶å€™æŠŠé‚£äº›ç‚¹è”ç»“èµ·æ¥ã€‚è¿™æ ·æ‰çœ‹å¾—æ˜ç™½ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1614226582,"ip_address":"","comment_id":280233,"utype":1}],"discussion_count":3,"race_medal":0,"score":"23088975047","product_id":100013101,"comment_content":"èµ«è€å¸«å¤šæ¬¡é—¡æ˜æºç¢¼çš„é‡è¦æ€§ï¼Œä½†æºç¢¼å…§å®¹çš„é‡ç¢ºå¯¦ä¸å°ã€‚<br>ä¸çŸ¥é“è€å¸«èƒ½ä¸èƒ½çµ¦å€‹é–±è®€æºç¢¼çš„è·¯å¾‘ï¼Ÿ","like_count":6,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":516030,"discussion_content":"å¦‚æœæƒ³äº†è§£æ ‡å‡†åº“ä¸­æŸä¸ªåŒ…çš„åŠŸèƒ½ï¼Œå¯ä»¥ä»åº”ç”¨ç¨‹åºè°ƒç”¨çš„å‡½æ•°çœ‹èµ·ï¼Œä¸€æ­¥æ­¥æ·±å…¥ã€‚æ ‡å‡†åº“æ˜¯ä¸€å¼ ç½‘ï¼Œæ‰€ä»¥ä½ åœ¨çœ‹çš„æ—¶å€™ä¹Ÿéœ€è¦ç»‡ä¸€å¼ ç½‘ï¼Œä¹Ÿå°±æ˜¯è¯´éœ€è¦è®°å¥½ç¬”è®°ï¼Œå¹¶ä¸”åœ¨å¿…è¦çš„æ—¶å€™æŠŠé‚£äº›ç‚¹è”ç»“èµ·æ¥ã€‚è¿™æ ·æ‰çœ‹å¾—æ˜ç™½ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614226582,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1650748,"avatar":"https://static001.geekbang.org/account/avatar/00/19/30/3c/0668d6ae.jpg","nickname":"ç›˜èƒ§","note":"","ucode":"5386CC4C92ECC2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":407338,"discussion_content":"å­¦ä¹ æºç ä»¥åŠä½¿ç”¨çš„è¿‡ç¨‹ï¼ŒæŒ‰ç…§ä½œè€…å†™è¿™ä¸ªæ ‡å‡†åº“çš„æ—¶å€™çš„æ€è·¯ï¼šåº“å‡½æ•° > ç»“æ„å®šä¹‰ > ç»“æ„å‡½æ•°\nä¸¾ä¾‹å­¦ä¹ stringsåŒ…ï¼š\n1. å…ˆç†Ÿæ‚‰å¤–éƒ¨åº“å‡½æ•°ï¼šgo doc strings|grep &#34;^func&#34;\n2. ç†Ÿæ‚‰å¯¹åº”çš„ç»“æ„å®šä¹‰ï¼šgo doc strings|grep &#34;^type&#34;|grep &#34;struct&#34;\n3. æ¥ä¸‹æ¥å°±åº”è¯¥å­¦ä¹ å¯¹åº”çš„å†…éƒ¨ç»“æ„çš„å‡½æ•°äº† go doc strings.Builder|grep &#34;^func&#34;\nå¯ä»¥ä½¿ç”¨æ€ç»´å¯¼å›¾ï¼Œé¡ºç€å‡½æ•°çš„è°ƒç”¨å»çœ‹ï¼ŒæŠŠè¿‡ç¨‹è®°å½•ä¸‹æ¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634985227,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1336951,"avatar":"https://static001.geekbang.org/account/avatar/00/14/66/77/194ba21d.jpg","nickname":"lzh","note":"","ucode":"C3D83DF4230109","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":364739,"discussion_content":"ç³»éƒï¼ˆhaoï¼‰è€å¸ˆï¼Œå””ç³»èµ«è€å¸ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617590766,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":58474,"user_name":"sket","can_delete":false,"product_type":"c1","uid":1197729,"ip_address":"","ucode":"C7E24300D794F7","user_header":"http://thirdwx.qlogo.cn/mmopen/KFgDEHIEpnSjjGClCeqmKYJsSOQo40BMHRTtNYrWyQP9WypAjTToplVND944one2pkEyH5Oib4m4wUOJ9xBEIZQ/132","comment_is_top":false,"comment_ctime":1547088133,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"18726957317","product_id":100013101,"comment_content":"åŸæ¥readæŠŠä»ç¼“å†²åŒºè¯»çš„å­—èŠ‚æ”¾åˆ°p1é‡Œé¢äº†ï¼Œè®©æˆ‘è¿™ä¸ªå°ç™½çº ç»“äº†å¥½åŠå¤©","like_count":4,"discussions":[{"author":{"id":1099379,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c6/73/abb7bfe3.jpg","nickname":"ç–¯ç´","note":"","ucode":"82ACAA4A27753D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":121322,"discussion_content":"ä½ è¯´å®Œæˆ‘å°±ä¸çº ç»“äº†ğŸ˜†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578317029,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":317832,"user_name":"ç›˜èƒ§","can_delete":false,"product_type":"c1","uid":1650748,"ip_address":"","ucode":"5386CC4C92ECC2","user_header":"https://static001.geekbang.org/account/avatar/00/19/30/3c/0668d6ae.jpg","comment_is_top":false,"comment_ctime":1634984806,"is_pvip":false,"replies":[{"id":"115334","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1635177591,"ip_address":"","comment_id":317832,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10224919398","product_id":100013101,"comment_content":"èŠ±äº†2å°æ—¶ï¼Œä¸€éå•ƒæºç ï¼Œä¸€éå¯¹ç…§æ–‡ç« ,ä¸€è¾¹è‡ªå·±å†™æµ‹è¯•ç”¨ä¾‹ï¼Œä¸€è¾¹æå®˜æ–¹åŒ…è‡ªå·±å®ç°çš„ç”¨ä¾‹ã€‚ã€‚ã€‚ç»äº†ï¼Œå•ƒæ´¥æ´¥æœ‰å‘³ï¼Œä¸çŸ¥ä¸è§‰éƒ½å¤©é»‘äº†","like_count":2,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":528997,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635177591,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":129667,"user_name":"NoTryNoSuccess","can_delete":false,"product_type":"c1","uid":1372735,"ip_address":"","ucode":"89EE8B4CEECC1F","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKOM6tVLSiciaQeQst0g3iboWO74ibicicVAia9qno0X6cf65pEKLgdKkUdcpCWpjAB5e6semrFrruiaGQWhg/132","comment_is_top":false,"comment_ctime":1567212808,"is_pvip":false,"replies":[{"id":"48536","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1567392557,"ip_address":"","comment_id":129667,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10157147400","product_id":100013101,"comment_content":"åšæŒåˆ°è¿™é‡Œäº†ï¼Œç»™è‡ªå·±ç‚¹èµï¼","like_count":2,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465591,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567392557,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":216395,"user_name":"L.","can_delete":false,"product_type":"c1","uid":1543396,"ip_address":"","ucode":"9803C2EDC799DC","user_header":"https://static001.geekbang.org/account/avatar/00/17/8c/e4/ad3e7c39.jpg","comment_is_top":false,"comment_ctime":1589251049,"is_pvip":false,"replies":[{"id":"80091","content":"å¯ä»¥è¿›å…¥æˆ‘çš„çŸ¥è¯†æ˜Ÿçƒâ€œGoHackers VIPâ€ç„¶åå‘æˆ‘æé—®ï¼ˆçŸ¥è¯†æ˜Ÿçƒæ˜¯ä¸€æ¬¾Appï¼‰ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥åœ¨è¿™é‡Œå‘æˆ‘æé—®ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1589260960,"ip_address":"","comment_id":216395,"utype":1}],"discussion_count":1,"race_medal":1,"score":"5884218345","product_id":100013101,"comment_content":"è€å¸ˆåŒå­¦ä»¬å¥½ï¼Œè¯·é—®ä¸€ä¸‹å¤§å®¶æ‰‹å¤´æœ‰èƒ½å¤Ÿè¾…åŠ©é˜…è¯»æºç çš„ä¹¦ç±æˆ–è€…èµ„æ–™å—ï¼Œæœ‰çš„åŒ…ä¸‹è¾¹çš„æºç å®åœ¨æ˜¯ç†è§£ä¸äº†ï¼Œæœ‰çš„æ˜¯ä¸ç†è§£æ•´ä½“é€»è¾‘ï¼Œæœ‰çš„æ˜¯ä¸ç†è§£æŸä¸€è¡Œçš„å†™æ³•ç­‰ç­‰(å°ç™½æ±‚åŠ©","like_count":1,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":494801,"discussion_content":"å¯ä»¥è¿›å…¥æˆ‘çš„çŸ¥è¯†æ˜Ÿçƒâ€œGoHackers VIPâ€ç„¶åå‘æˆ‘æé—®ï¼ˆçŸ¥è¯†æ˜Ÿçƒæ˜¯ä¸€æ¬¾Appï¼‰ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥åœ¨è¿™é‡Œå‘æˆ‘æé—®ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589260960,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":212533,"user_name":"ä¼ è¯´ä¸­çš„æˆå¤§å¤§","can_delete":false,"product_type":"c1","uid":1236766,"ip_address":"","ucode":"103543D6E706BF","user_header":"https://static001.geekbang.org/account/avatar/00/12/df/1e/cea897e8.jpg","comment_is_top":false,"comment_ctime":1588142769,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5883110065","product_id":100013101,"comment_content":"æˆ‘å»é˜…è¯»äº†æºç  å‘ç°é‡è¦çš„ä¸æ­¢æ˜¯ off æˆ‘æš‚ä¸”å«ä»–åç§»é‡ è¿˜æœ‰ä¸€ä¸ªé‡è¦çš„å­—æ®µlastRead æ ‡è¯†ä¸Šä¸€æ¬¡æ˜¯å¦æ˜¯æˆåŠŸè¯»å– å’Œè¯»äº†å¤šå°‘ä¸ªå­—èŠ‚ æ‰€ä»¥UnreadRuneæ–¹æ³•åº”è¯¥è¿˜æ˜¯å¯ä»¥æ­£å¸¸ä½¿ç”¨å§(ä¸åŒ…å«ReadRuneçš„æƒ…å†µ) æ¯•ç«Ÿåº•å±‚æ˜¯b.off -= int(b.lastRead) ","like_count":1,"discussions":[{"author":{"id":1505155,"avatar":"https://static001.geekbang.org/account/avatar/00/16/f7/83/7fa4bd45.jpg","nickname":"è¶£å­¦è½¦","note":"","ucode":"5279A6BF4C67A3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":326911,"discussion_content":"ä½¿ç”¨UnreadRuneæ˜¯ï¼Œ ä¼šåˆ¤æ–­ b.lastRead <= opInvalidæ—¶ä¼šç›´æ¥æŠ¥é”™ï¼Œ åªæœ‰åœ¨ReadRuneåï¼Œb.lastReadæ‰ä¼šå¤§äºopInvalid","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605698334,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":342839,"user_name":"æ–°ä¸–ç•Œ","can_delete":false,"product_type":"c1","uid":1079495,"ip_address":"","ucode":"4473DC1505F158","user_header":"https://static001.geekbang.org/account/avatar/00/10/78/c7/083a3a0b.jpg","comment_is_top":false,"comment_ctime":1650503194,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1650503194","product_id":100013101,"comment_content":"æ¯å¤©åšæŒåˆ·ï¼Œè®²çš„å¾ˆä¸é”™","like_count":0},{"had_liked":false,"id":319267,"user_name":"somenzz","can_delete":false,"product_type":"c1","uid":1187197,"ip_address":"","ucode":"EA59A170DF8910","user_header":"https://static001.geekbang.org/account/avatar/00/12/1d/7d/368df396.jpg","comment_is_top":false,"comment_ctime":1635727988,"is_pvip":false,"replies":[{"id":"115811","content":"ä¸è¦è‡ªå·±è®¤ä¸ºï¼Œè¦å»çœ‹Goçš„æºç ã€‚æºç é¢å‰æ— ç§˜å¯†ï¼<br><br>è€Œä¸”å’±ä»¬ä¸“æ çš„ä»£ç ä¾‹å­ä¸­ä¹Ÿæœ‰ç›¸åº”çš„è¯´æ˜ï¼š<br><br>https:&#47;&#47;github.com&#47;hyper0x&#47;Golang_Puzzlers&#47;tree&#47;master&#47;src&#47;puzzlers&#47;article31<br><br>å†å¤šè¯´ä¸€ç‚¹å§ï¼ŒRead() æ–¹æ³•è¿”å›çš„ n åªæ˜¯å½“æ¬¡è¯»å–çš„å­—èŠ‚æ•°ã€‚å¦å¤– Len æ–¹æ³•çš„æºç æ˜¯è¿™æ ·çš„ï¼š<br><br>func (b *Buffer) Len() int { return len(b.buf) - b.off }<br><br>è¿™é‡Œçš„ b.off ä»£è¡¨çš„æ˜¯è¯»åç§»é‡ï¼ˆç›¸å½“äºâ€œè¯»æŒ‡é’ˆâ€ï¼‰ï¼Œè€Œ len(b.buf) ä»£è¡¨çš„æ˜¯å†™åç§»é‡ï¼ˆç›¸å½“äºâ€œå†™æŒ‡é’ˆâ€ï¼‰ã€‚<br><br>å¦å¤–ï¼Œå·²è¯»çš„é‚£äº›å­—èŠ‚å¹¶ä¸ä¼šè¢«é©¬ä¸Šåˆ é™¤æ‰ï¼Œé‚£æ ·çš„è¯æ“ä½œä¼šå¤ªé¢‘ç¹ï¼ˆè¯»æ—¶æˆæœ¬è¿‡é«˜ï¼‰ï¼Œå®ƒä»¬æ˜¯åœ¨å†™æ—¶å‘ç°éœ€è¦å¢é•¿ç¼“å­˜å®¹é‡çš„æ—¶å€™æ‰è¢«åˆ é™¤æ‰çš„ã€‚<br><br>** ç¼–ç¨‹å·¥ä½œç¬¬ä¸€å¤§å¿Œè®³ï¼šåªè‡ªå·±æƒ³è±¡ï¼Œä¸çœ‹æºç ã€‚åˆ‡è®°åˆ‡è®°ï¼ï¼**<br><br>æœ€åï¼Œå¯¹æ‰€æœ‰æœ¬ä¸“æ çš„è¯»è€…è¯´ä¸€å¥ï¼šè¯»è¿™ä¸ªä¸“æ ï¼Œè¶Šå¾€åè¶Šéœ€è¦éšçœ‹éšæŸ¥æºç ã€‚è¿™æ ·æ‰èƒ½å¤Ÿæœ‰æ·±åˆ»çš„ç†è§£å’Œè®¤è¯†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1635839693,"ip_address":"","comment_id":319267,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1635727988","product_id":100013101,"comment_content":"æ— æ³•ç›´æ¥å¾—åˆ°ä¸€ä¸ªBufferå€¼çš„å·²è¯»è®¡æ•°ï¼Ÿï¼Ÿ<br>\tn, _ := buffer1.Read(p1)<br>è¿™ä¸ª n ä¸å°±æ˜¯å·²è¯»å–çš„å­—èŠ‚æ•°å—ï¼Ÿ<br><br>è€å¸ˆè¿˜è¯´ buffer1çš„Lenæ–¹æ³•è¿”å›çš„ä¹Ÿæ˜¯å†…å®¹å®¹å™¨ä¸­æœªè¢«è¯»å–éƒ¨åˆ†çš„é•¿åº¦ï¼Œæˆ‘è®¤ä¸ºæ˜¯é”™çš„ï¼Œbuffer1çš„Lenæ–¹æ³•è¿”å›å°±æ˜¯ buffer1 å†…çš„é•¿åº¦ï¼Œåªè¦è¯»å–äº†ï¼Œå°±ä¸ä¼šå­˜åœ¨ buffer1 é‡Œé¢äº†ï¼Œéš¾é“ä¸æ˜¯å—ï¼Ÿ éš¾é“ buffer1 ä¸­è¿˜ä¿ç•™æœ‰å·²è¯»å–çš„å­—èŠ‚å—ï¼Ÿå¦‚æœæˆ‘é”™äº†ï¼Œè¯·è€å¸ˆç»™æ®µä»£ç è¯æ˜ä¸‹ï¼Œbuffer1 å·²è¯»å–çš„å­—èŠ‚ä»ç„¶å¯å†æ¬¡è¯»å–ã€‚ ","like_count":1,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529565,"discussion_content":"ä¸è¦è‡ªå·±è®¤ä¸ºï¼Œè¦å»çœ‹Goçš„æºç ã€‚æºç é¢å‰æ— ç§˜å¯†ï¼\n\nè€Œä¸”å’±ä»¬ä¸“æ çš„ä»£ç ä¾‹å­ä¸­ä¹Ÿæœ‰ç›¸åº”çš„è¯´æ˜ï¼š\n\nhttps://github.com/hyper0x/Golang_Puzzlers/tree/master/src/puzzlers/article31\n\nå†å¤šè¯´ä¸€ç‚¹å§ï¼ŒRead() æ–¹æ³•è¿”å›çš„ n åªæ˜¯å½“æ¬¡è¯»å–çš„å­—èŠ‚æ•°ã€‚å¦å¤– Len æ–¹æ³•çš„æºç æ˜¯è¿™æ ·çš„ï¼š\n\nfunc (b *Buffer) Len() int { return len(b.buf) - b.off }\n\nè¿™é‡Œçš„ b.off ä»£è¡¨çš„æ˜¯è¯»åç§»é‡ï¼ˆç›¸å½“äºâ€œè¯»æŒ‡é’ˆâ€ï¼‰ï¼Œè€Œ len(b.buf) ä»£è¡¨çš„æ˜¯å†™åç§»é‡ï¼ˆç›¸å½“äºâ€œå†™æŒ‡é’ˆâ€ï¼‰ã€‚\n\nå¦å¤–ï¼Œå·²è¯»çš„é‚£äº›å­—èŠ‚å¹¶ä¸ä¼šè¢«é©¬ä¸Šåˆ é™¤æ‰ï¼Œé‚£æ ·çš„è¯æ“ä½œä¼šå¤ªé¢‘ç¹ï¼ˆè¯»æ—¶æˆæœ¬è¿‡é«˜ï¼‰ï¼Œå®ƒä»¬æ˜¯åœ¨å†™æ—¶å‘ç°éœ€è¦å¢é•¿ç¼“å­˜å®¹é‡çš„æ—¶å€™æ‰è¢«åˆ é™¤æ‰çš„ã€‚\n\n** ç¼–ç¨‹å·¥ä½œç¬¬ä¸€å¤§å¿Œè®³ï¼šåªè‡ªå·±æƒ³è±¡ï¼Œä¸çœ‹æºç ã€‚åˆ‡è®°åˆ‡è®°ï¼ï¼**\n\næœ€åï¼Œå¯¹æ‰€æœ‰æœ¬ä¸“æ çš„è¯»è€…è¯´ä¸€å¥ï¼šè¯»è¿™ä¸ªä¸“æ ï¼Œè¶Šå¾€åè¶Šéœ€è¦éšçœ‹éšæŸ¥æºç ã€‚è¿™æ ·æ‰èƒ½å¤Ÿæœ‰æ·±åˆ»çš„ç†è§£å’Œè®¤è¯†ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1635839693,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1187197,"avatar":"https://static001.geekbang.org/account/avatar/00/12/1d/7d/368df396.jpg","nickname":"somenzz","note":"","ucode":"EA59A170DF8910","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":411081,"discussion_content":"é‚£ä¸ªoffæ˜¯ç§æœ‰çš„å¯¹å¤–ä¸å¯è§ï¼Œbuffer.Lenè¿”å›çš„å°±æ˜¯buffer é‡Œé¢è¿˜èƒ½è¯»åˆ°çš„å­—èŠ‚æ•°ï¼Œé‚£äº›ä¸å¯è¯»çš„è™½ç„¶è¿˜å­˜åœ¨ï¼Œä½†æ˜¯å·²ç»æ— æ³•å–åˆ°äº†ï¼Œè€å¸ˆéè®²è¿™ä¹ˆå¤æ‚ï¼Œæå¾—æœ‰åŠæ³•è¯»åˆ°å·²è¯»çš„å­—èŠ‚æ•°æ®ä¸€æ ·ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635844596,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":317833,"user_name":"ç›˜èƒ§","can_delete":false,"product_type":"c1","uid":1650748,"ip_address":"","ucode":"5386CC4C92ECC2","user_header":"https://static001.geekbang.org/account/avatar/00/19/30/3c/0668d6ae.jpg","comment_is_top":false,"comment_ctime":1634985238,"is_pvip":false,"replies":[{"id":"115333","content":"å¾ˆå¥½ï¼šï¼‰","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1635177568,"ip_address":"","comment_id":317833,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1634985238","product_id":100013101,"comment_content":"å­¦ä¹ æºç ä»¥åŠä½¿ç”¨çš„è¿‡ç¨‹ï¼ŒæŒ‰ç…§ä½œè€…å†™è¿™ä¸ªæ ‡å‡†åº“çš„æ—¶å€™çš„æ€è·¯ï¼šåº“å‡½æ•° &gt; ç»“æ„å®šä¹‰ &gt; ç»“æ„å‡½æ•°<br>ä¸¾ä¾‹å­¦ä¹ stringsåŒ…ï¼š<br>1. å…ˆç†Ÿæ‚‰å¤–éƒ¨åº“å‡½æ•°ï¼šgo doc strings|grep &quot;^func&quot;<br>2. ç†Ÿæ‚‰å¯¹åº”çš„ç»“æ„å®šä¹‰ï¼šgo doc strings|grep &quot;^type&quot;|grep &quot;struct&quot;<br>3. æ¥ä¸‹æ¥å°±åº”è¯¥å­¦ä¹ å¯¹åº”çš„å†…éƒ¨ç»“æ„çš„å‡½æ•°äº† go doc strings.Builder|grep &quot;^func&quot;<br>å¯ä»¥ä½¿ç”¨æ€ç»´å¯¼å›¾ï¼Œé¡ºç€å‡½æ•°çš„è°ƒç”¨å»çœ‹ï¼ŒæŠŠè¿‡ç¨‹è®°å½•ä¸‹æ¥","like_count":0,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":528998,"discussion_content":"å¾ˆå¥½ï¼šï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635177568,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":308844,"user_name":"lesserror","can_delete":false,"product_type":"c1","uid":1351076,"ip_address":"","ucode":"25A54D1165FCF6","user_header":"https://static001.geekbang.org/account/avatar/00/14/9d/a4/e481ae48.jpg","comment_is_top":false,"comment_ctime":1629820376,"is_pvip":false,"replies":[{"id":"111910","content":"1. å·²è¯»è®¡æ•°å€¼å±äºå†…éƒ¨çŠ¶æ€ï¼Œå¤–ç•Œä¸éœ€è¦çŸ¥é“å•Šã€‚ä½ æƒ³æ‹¿è¿™ä¸ªä¸œè¥¿åšä»€ä¹ˆç”¨å‘¢ï¼Ÿè¯¥å°è£…çš„å°±å¾—å°è£…èµ·æ¥ï¼Œå……åˆ†è§£è€¦ã€‚<br><br>2. å¯¹çš„ã€‚<br><br>3. Buffer åœ¨æ‰©å……è‡ªå·±æ—¶æœ‰å¯èƒ½ä¼šå¯¹æ•°æ®è¿›è¡Œå‹ç¼©ï¼Œä¹Ÿå°±æ˜¯æŠŠæœªè¯»çš„æ•°æ®è¿ç§»åˆ°å·²è¯»çš„é‚£äº›å…ƒç´ æ§½ä½ä¸Šã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœç»å‹ç¼©åé‚£äº›ä¹‹å‰çš„â€œå·²è¯»ç©ºé—´â€ä¸­è¿˜æœ‰ç©ºä½ï¼Œé‚£ä¹ˆæ–°æ•°æ®å°±å¯ä»¥å­˜åˆ°é‚£é‡Œã€‚<br><br>å¦å¤–ï¼Œä¼šå¯¼è‡´â€œå·²è¯»è®¡æ•°â€å˜åŒ–çš„é‚£äº›â€œè¯»æ–¹æ³•â€è¯»å‡ºå»çš„æ˜¯ä¸€ä¸ªä¸ªæ•°æ®å…ƒç´ ï¼ˆé€šè¿‡ copy å‡½æ•°åšçš„ï¼‰ï¼Œè€Œä¸æ˜¯åŸºäºBufferçš„åˆ‡ç‰‡ã€‚æ‰€ä»¥å‹ç¼©æ•°æ®å¹¶ä¸ä¼šå¯¹å·²ç»è¯»å‡ºå»çš„é‚£äº›æ•°æ®é€ æˆå½±å“ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1629974295,"ip_address":"","comment_id":308844,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1629820376","product_id":100013101,"comment_content":"éƒæ—è€å¸ˆï¼Œä»¥ä¸‹é—®é¢˜ï¼Œéº»çƒ¦å›ç­”ä¸€ä¸‹ï¼š<br><br>1.  ã€Œbytes.Bufferã€ ä¸ºä»€ä¹ˆä¸æä¾›ä¸€ä¸ª Bufferå€¼çš„å·²è¯»è®¡æ•°å€¼çš„è·å–æ–¹æ³•å‘¢ï¼Ÿ<br><br>2.  æ–‡ä¸­è¯´ï¼š â€œåœ¨æˆ‘ä»¬å‰–æäº†æ‰€æœ‰çš„ç›¸å…³æ–¹æ³•ä¹‹åï¼Œå¯ä»¥è¿™æ ·æ¥æ€»ç»“ï¼šåœ¨å·²è¯»è®¡æ•°ä»£è¡¨çš„ç´¢å¼•ä¹‹å‰çš„é‚£äº›å†…å®¹ï¼Œæ°¸è¿œéƒ½æ˜¯å·²ç»è¢«è¯»è¿‡çš„ï¼Œå®ƒä»¬å‡ ä¹æ²¡æœ‰æœºä¼šå†æ¬¡è¢«è¯»å–â€ã€‚æˆ‘ç†è§£çš„æ˜¯ï¼š å”¯ä¸€æœ‰æœºä¼šè·å–åˆ°è¿™äº›å†…å®¹çš„æœºä¼šæ˜¯ ã€ŒUnreadByteã€å’Œ ã€ŒUnreadRuneã€è¿™ä¸¤ä¸ªæ–¹æ³•å—ï¼Ÿ<br><br>3. æ–‡ä¸­è¯´ï¼šâ€œè¿™äº›å·²è¯»å†…å®¹æ‰€åœ¨çš„å†…å­˜ç©ºé—´å¯èƒ½ä¼šè¢«å­˜å…¥æ–°çš„å†…å®¹ã€‚è¿™ä¸€èˆ¬éƒ½æ˜¯ç”±äºé‡ç½®æˆ–è€…æ‰©å……å†…å®¹å®¹å™¨å¯¼è‡´çš„â€ã€‚ å·²è¯»çš„å†…å®¹ä¸æ˜¯å·²ç» å¤åˆ¶ç»™å¦å¤–çš„å˜é‡è¿”å›ç»™è°ƒç”¨æ–¹äº†å—ï¼Ÿä¸ºä»€ä¹ˆè¿˜ä¼šè¢«è¢«å­˜å…¥æ–°çš„å†…å®¹å‘¢ï¼Ÿæ²¡ç†è§£è¿™å¥è¯çš„æƒ³è¡¨è¾¾çš„æ„æ€ã€‚","like_count":1,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":525643,"discussion_content":"1. å·²è¯»è®¡æ•°å€¼å±äºå†…éƒ¨çŠ¶æ€ï¼Œå¤–ç•Œä¸éœ€è¦çŸ¥é“å•Šã€‚ä½ æƒ³æ‹¿è¿™ä¸ªä¸œè¥¿åšä»€ä¹ˆç”¨å‘¢ï¼Ÿè¯¥å°è£…çš„å°±å¾—å°è£…èµ·æ¥ï¼Œå……åˆ†è§£è€¦ã€‚\n\n2. å¯¹çš„ã€‚\n\n3. Buffer åœ¨æ‰©å……è‡ªå·±æ—¶æœ‰å¯èƒ½ä¼šå¯¹æ•°æ®è¿›è¡Œå‹ç¼©ï¼Œä¹Ÿå°±æ˜¯æŠŠæœªè¯»çš„æ•°æ®è¿ç§»åˆ°å·²è¯»çš„é‚£äº›å…ƒç´ æ§½ä½ä¸Šã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœç»å‹ç¼©åé‚£äº›ä¹‹å‰çš„â€œå·²è¯»ç©ºé—´â€ä¸­è¿˜æœ‰ç©ºä½ï¼Œé‚£ä¹ˆæ–°æ•°æ®å°±å¯ä»¥å­˜åˆ°é‚£é‡Œã€‚\n\nå¦å¤–ï¼Œä¼šå¯¼è‡´â€œå·²è¯»è®¡æ•°â€å˜åŒ–çš„é‚£äº›â€œè¯»æ–¹æ³•â€è¯»å‡ºå»çš„æ˜¯ä¸€ä¸ªä¸ªæ•°æ®å…ƒç´ ï¼ˆé€šè¿‡ copy å‡½æ•°åšçš„ï¼‰ï¼Œè€Œä¸æ˜¯åŸºäºBufferçš„åˆ‡ç‰‡ã€‚æ‰€ä»¥å‹ç¼©æ•°æ®å¹¶ä¸ä¼šå¯¹å·²ç»è¯»å‡ºå»çš„é‚£äº›æ•°æ®é€ æˆå½±å“ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629974295,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1206849,"avatar":"https://static001.geekbang.org/account/avatar/00/12/6a/41/74e3d86c.jpg","nickname":"kyle","note":"","ucode":"B67440A90E02F3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":390544,"discussion_content":"1.å› ä¸ºæ²¡å¿…è¦ï¼Œå‡ ä¹ç”¨ä¸ä¸Š\n2.å¯ä»¥è¿™ä¹ˆè®¤ä¸º\n3.å¯¹å•Šï¼Œå®ƒæ˜¯ä¸ªå€¼å¤åˆ¶ã€‚å®ƒæœ¬èº«è¿˜åœ¨åŸå¤„ï¼Œå¯èƒ½è¢«å­˜å…¥æ–°çš„å†…å®¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629882813,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":304438,"user_name":"å—é›","can_delete":false,"product_type":"c1","uid":2159290,"ip_address":"","ucode":"F6AE8B6820C312","user_header":"https://static001.geekbang.org/account/avatar/00/20/f2/ba/aad606a6.jpg","comment_is_top":false,"comment_ctime":1627423566,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1627423566","product_id":100013101,"comment_content":"æˆ‘ä¸ªäººè§‰å¾—è€å¸ˆè®²çš„å†…å®¹å¾ˆä¸é”™ï¼Œèå…¥äº†ä»–çš„ç»éªŒå’Œç²¾åï¼Œä½†ä½ è§‰å¾—è¿™ç§å™äº‹æ–¹å¼æˆ‘ä¸ªäººè§‰å¾—è¿˜æ˜¯ä¸å¤ªé€‚åˆæ–°æ‰‹çš„ã€‚","like_count":0},{"had_liked":false,"id":160441,"user_name":"è™¢åœ‹æŠ€é†¬","can_delete":false,"product_type":"c1","uid":1056807,"ip_address":"","ucode":"5A192262AA037E","user_header":"https://static001.geekbang.org/account/avatar/00/10/20/27/a6932fbe.jpg","comment_is_top":false,"comment_ctime":1575951654,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1575951654","product_id":100013101,"comment_content":"äºŒåˆ·<br>æ³¨æ„ç‚¹ï¼š<br>Stringå’ŒBytesæ–¹æ³•ä¸ä¼šæ›´æ–°å†…éƒ¨è®¡æ•°å™¨off","like_count":0,"discussions":[{"author":{"id":1351076,"avatar":"https://static001.geekbang.org/account/avatar/00/14/9d/a4/e481ae48.jpg","nickname":"lesserror","note":"","ucode":"25A54D1165FCF6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":390423,"discussion_content":"å› ä¸ºè¿™ä¸¤ä¸ªçš„æ–¹æ³•çš„ç›®çš„åªæ˜¯ä»…ä»…è¿”å›ç¼“å†²åŒºçš„æœªè¯»éƒ¨åˆ†å†…å®¹è€Œå·²ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629820655,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":37645,"user_name":"å‹‡.Max","can_delete":false,"product_type":"c1","uid":1248128,"ip_address":"","ucode":"AE5DBC10805A9B","user_header":"https://static001.geekbang.org/account/avatar/00/13/0b/80/a0533acb.jpg","comment_is_top":false,"comment_ctime":1541665017,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1541665017","product_id":100013101,"comment_content":"è€å¸ˆ è¯·æ•™ä¸‹ğŸ‘‡<br>golangå¦‚ä½•å®éªŒsolidityä¸­çš„requireå’Œassertå‡½æ•°åŠŸèƒ½å•Š è¯•ç€å†™äº†ä¸‹ æ²¡å•¥æ€è·¯ æ±‚è€å¸ˆæŒ‡ç‚¹ è°¢è°¢","like_count":0},{"had_liked":false,"id":37644,"user_name":"å‹‡.Max","can_delete":false,"product_type":"c1","uid":1248128,"ip_address":"","ucode":"AE5DBC10805A9B","user_header":"https://static001.geekbang.org/account/avatar/00/13/0b/80/a0533acb.jpg","comment_is_top":false,"comment_ctime":1541664886,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1541664886","product_id":100013101,"comment_content":"è€å¸ˆï¼Œè¯·æ•™ä¸‹ğŸ‘‡<br>golangä¸­å¦‚ä½•å®ç°ç±»ä¼¼solidityä¸­çš„require(ç”¨æ¥åˆ¤æ–­è¾“å…¥çš„å‚æ•°æ˜¯å¦ç¬¦åˆæŸäº›æ¡ä»¶)å’Œassert(ä¸åªæ˜¯å¯¹ç±»å‹çš„æ–­è¨€)å‘¢ï¼Ÿ<br>è¯•ç€å†™äº†ä¸‹ï¼Œæ²¡æ€è·¯ï¼Œæ±‚è€å¸ˆæŒ‡æ•™ã€‚éå¸¸æ„Ÿè°¢","like_count":0}]}