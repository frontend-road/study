{"id":414504,"title":"03｜实战5步（上）：怎么定义问题和预处理数据？","content":"<p>你好，我是黄佳。</p><p>在<a href=\"https://time.geekbang.org/column/article/413057\">《打好基础：到底什么是机器学习？》</a>中，我和你说了到底什么是机器学习，你还记得我们的结论吗？机器学习是一种从数据生成规则、发现模型，来帮助我们预测、判断、分析和解决问题的技术。现在，你是不是跃跃欲试，准备动手开跑机器学习程序了？</p><p>不要着急，在实战之前你还需要掌握最后一个知识点，也就是机器学习项目分为哪些步骤，你才好跟着一步步走。一个机器学习项目从开始到结束大致分为5步，分别是<strong>定义问题、收集数据和预处理、选择算法和确定模型、训练拟合模型、评估并优化模型性能</strong>。这5步是一个循环迭代的过程，你可以参考下面的图片：</p><p><img src=\"https://static001.geekbang.org/resource/image/41/9a/41ca9369d516198b33d736462fd8bd9a.jpg?wh=1920x1047\" alt=\"\"></p><p>我们所有的项目都会按照这5步来做，我把它简称为实战5步。为了让你更深地理解这5步，在后面能更快地上手，我会带你做一个项目，我会给你清楚解释每一个步骤的目的和背后的原理。我会把这个项目分成两节课，今天我们先来一起搞定前两步，也就是<strong>定义问题和数据的预处理。</strong></p><p>好了，我们正式开始吧！</p><h2>第1步 定义问题</h2><p>我们先来看第一步，定义问题。在定义问题这个环节中，我们要剖析业务场景，设定清晰的目标，同时还要明确当前问题属于哪一种机器学习类型。如果不搞清楚这些，我们后面就无法选择模型了。</p><p>所以首先，我们先得来了解一下我们这个项目的业务场景。假设你已经入职了“易速鲜花”的运营部，正在对微信公众号推广文案的运营效率进行分析。你收集了大量的软文数据，包括点赞数、转发数和浏览量等等，就像下面这样：</p><!-- [[[read_end]]] --><p><img src=\"https://static001.geekbang.org/resource/image/a6/f7/a68bc4218bb6112b1a6c50742c7cd6f7.png?wh=401x165\" alt=\"\"></p><p>因为微信公众号阅读量超过10万之后，就不能显示它的具体阅读量了。所以针对这个问题，我们项目的目标就是，建立一个机器学习模型，根据点赞数和转发数等指标，估计一篇文章能实现多大的浏览量。</p><p>因为要估计浏览量，所以在这个数据集中：点赞数、转发数、热度指数、文章评级，这4个字段都是特征，浏览量就是标签。这里我们已经有要估计的标签了，所以这是一个监督学习问题。再加上我们的标签是连续性的数值，因此它是一个回归问题。</p><p>不难看出，在这个数据集中，特征和标签之间明显呈现出一种相关性：点赞数、转发数多的时候，往往浏览量也多。但是，这种相关性可以通过哪个具体的函数来描绘呢？目前我们还不知道，所以我们在这个项目中的任务就是找到这个函数。</p><p>这样，我们就已经把问题定义好了，紧接着下一步就是数据收集和预处理。</p><h2>第2步 收集数据和预处理</h2><p>“数据的收集和预处理”在所有机器学习项目中都会出现，它的作用是为机器学习模型提供好的燃料。数据好，模型才跑得更带劲。这步骤看似只有一句话，其实里面包含了好几个小步骤，完整来讲有6步：</p><ul>\n<li>收集数据；</li>\n<li>数据可视化；</li>\n<li>数据清洗；</li>\n<li>特征工程；</li>\n<li>构建特征集和标签集；</li>\n<li>拆分训练集、验证集和测试集。</li>\n</ul><p>你可能一眼看上去不太明白这6个步骤的意思。不要着急，接下来我会继续结合“易速鲜花”这个项目挨个解释的。</p><ol>\n<li>\n<h3>收集数据</h3>\n</li>\n</ol><p>首先是收集数据，这一步又叫采集数据。在我们的项目中，我已经把它做好了，你可以在<a href=\"https://github.com/huangjia2019/geektime/tree/main/%E5%87%86%E5%A4%87%E7%AF%8703\">这里</a>下载现成的数据集。</p><p>不过，在现实中，收集数据通常很辛苦，要在运营环节做很多数据埋点、获取用户消费等行为信息和兴趣偏好信息，有时候还需要上网爬取数据。收集数据不是我们的课程重点，你有兴趣的话我向你推荐陈旸老师的<a href=\"https://time.geekbang.org/column/intro/147\">《数据分析实战45讲》</a>，里面有很多收集数据的方法。</p><p>有了数据集，接下来我们要做的是数据可视化的工作，也就是通过可视化去观察一下数据，为选择具体的机器学习模型找找感觉。</p><ol start=\"2\">\n<li>\n<h3>数据可视化</h3>\n</li>\n</ol><p>数据可视化是个万金油技能，能做的事非常多。比如说，可以看一看特征和标签之间可能存在的关系，也可以看看数据里有没有“脏数据”和“离群点”等。</p><p>不过在正式可视化之前，我们需要把收集到的数据导入运行环境。数据导入我们需要用到Pandas数据处理工具包。这个包可是操作数据的利器，我们未来每个项目中都会用到。现在我们用import语句导入它：</p><pre><code>import pandas as pd # 导入Pandas数据处理工具包\n</code></pre><p>然后，我们通过下面的代码把这个项目的数据集读入到Python运行环境，用DataFrame的形式呈现出来：</p><pre><code>df_ads = pd.read_csv('易速鲜花微信软文.csv') # 读入数据\ndf_ads.head() # 显示前几行数据\n</code></pre><p>DataFrame是机器学习中常见的二维表格类型数据结构。在上面的代码中，我用read_csv API把CSV格式的数据文件，读入到Pandas的DataFrame中，把它命名为了df_ads。这段代码输出如下：</p><p><img src=\"https://static001.geekbang.org/resource/image/cd/16/cd6332eyyb97f956fa5e603f96f40816.png?wh=294x285\" alt=\"\"></p><p>这样就完成了数据的导入了，接着我们就可以正式进入“可视化”了。根据经验，我们猜测“点赞数”最有可能和“浏览量”之间存在线性关系。那是不是真的这样呢？我们可以画出图来验证一下。</p><p>在这个“验证”环节中，我们需要用到两个包：一个是Python画图工具库“Matplotlib ”，另一个是统计学数据可视化工具库“Seaborn”。这两个包都是Python数据可视化的必备工具包，它们是Anaconda默认安装包的一部分，不需要pip install语句重复安装。</p><p>在导入这两个包时，我们依旧用import语句。请你注意，为了节省代码量，我并没有导入完整的matplotlib包，而是只导入了matplotlib包中的绘图模块pyplot：</p><pre><code>#导入数据可视化所需要的库\nimport matplotlib.pyplot as plt # Matplotlib – Python画图工具库\nimport seaborn as sns # Seaborn – 统计学数据可视化工具库\n</code></pre><p>因为线性关系可以简单地用散点图来验证一下。所以下面我们用matplotlib包中的plot API，绘制出“点赞数”和“浏览量”之间的散点图，看看它们的分布状态。</p><pre><code>plt.plot(df_ads['点赞数'],df_ads['浏览量'],'r.', label='Training data') # 用matplotlib.pyplot的plot方法显示散点图\nplt.xlabel('点赞数') # x轴Label\nplt.ylabel('浏览量') # y轴Label\nplt.legend() # 显示图例\nplt.show() # 显示绘图结果！\n</code></pre><p>输出的结果如下图所示：</p><p><img src=\"https://static001.geekbang.org/resource/image/24/7d/24e97d5a919c0e03b924270233a3b67d.png?wh=399x260\" alt=\"\"></p><p>从这张图中我们可以看出来，这些数据基本上集中在一条线附近，所以它的标签和特征之间，好像真的存在着线性的关系，这可以为我们将来选模型提供参考信息。</p><p>接下来，我要用Seaborn的boxplot工具画个箱线图。来看看这个数据集里有没有“离群点”。我这里随便选择了热度指数这个特征，你也可以为其它特征试试绘制箱线图。</p><pre><code>data = pd.concat([df_ads['浏览量'], df_ads['热度指数']], axis=1) # 浏览量和热度指数\nfig = sns.boxplot(x='热度指数', y=&quot;浏览量&quot;, data=data) # 用seaborn的箱线图画图\nfig.axis(ymin=0, ymax=800000); #设定y轴坐标\n</code></pre><p>下图就是我们输出的箱线图：</p><p><img src=\"https://static001.geekbang.org/resource/image/9b/e7/9b5fc402a8b2b4dc8482a96e1c304ee7.png?wh=399x264\" alt=\"\"></p><p>箱线图是由五个数值点组成，分别是最小值(min)、下四分位数(Q1)、中位数(median)、上四分位数(Q3)和最大值(max)。在统计学上，这叫做五数概括。这五个数值可以清楚地为我们展示数据的分布和离散程度。</p><p>这个图中下四分位数、中位数、上四分位数组成一个“带有隔间的盒子”，就是所谓的箱；上四分位数到最大值之间建立一条延伸线，就是所谓的线，也叫“胡须”；胡须的两极就是最小值与最大值；此外，箱线图还会将离群的数据点单独绘出。</p><p>在上面这个箱线图中，我们不难发现，热度指数越高，浏览量的中位数越大。我们还可以看到，有一些离群的数据点，比其它的文章浏览量大了很多，这些“离群点”就是我们说的“爆款文章”了。</p><p>到这里，数据可视化工作算是基本完成了。在数据可视化之后，下一步就是数据的清洗。</p><ol start=\"3\">\n<li>\n<h3>数据清洗</h3>\n</li>\n</ol><p>很多人都把数据清洗比作“炒菜”前的“洗菜”，也就是说数据越干净，模型的效果也就越好。清洗的数据一般分为4种情况：</p><p>第一种是处理缺失的数据。如果备份系统里面有缺了的数据，那我们尽量补录；如果没有，我们可以剔除掉残缺的数据，也可以用其他数据记录的平均值、随机值或者0值来补值。这个补值的过程叫数据修复。</p><p>第二个是处理重复的数据：如果是完全相同的重复数据处理，删掉就行了。可如果同一个主键出现两行不同的数据，比如同一个身份证号后面有两条不同的地址，我们就要看看有没有其他辅助的信息可以帮助我们判断（如时戳），要是无法判断的话，只能随机删除或者全部保留。</p><p>第三个是处理错误的数据：比如商品的销售量、销售金额出现负值，这时候就需要删除或者转成有意义的正值。再比如表示百分比或概率的字段，如果值大于1，也属于逻辑错误数据。</p><p>第四个是处理不可用的数据：这指的是整理数据的格式，比如有些商品以人民币为单位，有些以美元为单位，就需要先统一。另一个常见例子是把“是”、“否”转换成“1”、“0”值再输入机器学习模型。</p><p>那么如何看数据集中有没有脏数据呢？</p><p>就我们这个项目的数据集来说，细心的你可能在DataFrame图中已经发现，行索引为6的数据中“转发数”的值是“NaN”，意思是Not A Number。在Python中，它代表无法表示、也无法处理的值。这是典型的脏数据。</p><p><img src=\"https://static001.geekbang.org/resource/image/cd/16/cd6332eyyb97f956fa5e603f96f40816.png?wh=294x285\" alt=\"\"></p><p>我们可以通过DataFrame的isna().sum()函数来统计所有的NaN的个数。这样，我们就可以在看看有没有NaN的同时，也看看NaN出现的次数。如果NaN过多的话，那么说明这个数据集质量不好，就要找找数据源出了什么问题。</p><pre><code>df_ads.isna().sum() # NaN出现的次数\n</code></pre><p>输出结果如下:</p><pre><code>点赞数      0\n转发数     37\n热度指数     0\n文章评级     0\n浏览量      0\ndtype: int64\n</code></pre><p>输出显示我们的数据集中“转发数”这个字段有37个NaN值。对于上千条数据的数据集，这还不算很多。那么该如何处理呢？也很简单。我们可以用dropna()这个API把出现了NaN的数据行删掉。</p><pre><code>df_ads = df_ads.dropna() # 把出现了NaN的数据行删掉\n</code></pre><p>你可能会觉得，我们刚才通过箱线图找到了离群点（爆款文章），这些算是脏数据吗？这是个很好的问题，而且这个问题并没有固定的答案。</p><p>删去了离群点，模型针对普通的数据会拟合得比较漂亮。但是现实生活中，就是存在着这样的离群点，让模型不那么漂亮。如果把这里的离群点删掉，那模型就不能工作得那么好了。所以，这是一个平衡和取舍的过程。</p><p>我们可以训练出包含这些离群点的模型，以及不包含这些离群点的模型，并进行比较。在这里，我建议保留这些“离群点”。</p><p>现在，我们就完成了对这个数据的简单清洗。不同类型的数据有不同的清洗方法，我们这里就不一一介绍了。后续项目中，针对具体项目和数据集，我们还会再细讲的。我们继续讲下一个步骤，把数据转换成机器所更易于读取的格式，也就是特征工程。</p><ol start=\"4\">\n<li>\n<h3>特征工程</h3>\n</li>\n</ol><p>特征工程是一个专门的机器学习子领域，而且我认为它是数据处理过程中<strong>最有创造力的环节</strong>，特征工程做得好不好，非常影响机器学习模型的效率。</p><p>我举个例子来解释下什么是特征工程。你知道什么是BMI指数吗？它等于体重除以身高的平方，这就是一个特征工程。</p><p>$$BMI=\\frac{Weight（kg）}{\\left[ Height(m) \\right]^{2}}$$</p><p>什么意思呢？就是说经过了这个过程，BMI这一个指数就替代了原来的两个特征——体重和身高，而且完全能客观地描绘我们的身材情况。</p><p>因此，经过了这个特征工程，我们可以把BIM指数作为新特征，输入用于评估健康情况的机器学习模型。</p><p>你可能会问这样做的好处是什么？以BMI特征工程为例，它降低了特征数据集的维度。维度就是数据集特征的个数。要知道，在数据集中，每多一个特征，模型拟合时的特征空间就更大，运算量也就更大。所以，<strong>摒弃掉冗余的特征、降低特征的维度，能使机器学习模型训练得更快。</strong></p><p>这只是特征工程的诸多的妙处之一，此外特征工程还能更好地表示业务逻辑，并提升机器学习模型的性能。</p><p>由于我们这个项目的问题相对简单，对特征工程的要求并不高，这里暂时不做特征工程。后面我会用一节课专门讲解各类特征工程的应用。下面，我们直接进入下一个子步骤，也就是构建机器学习的特征集和标签集。</p><ol start=\"5\">\n<li>\n<h3>构建特征集和标签集</h3>\n</li>\n</ol><p>我们说过，特征就是所收集的各个数据点，是要输入机器学习模型的变量。而标签是要预测、判断或者分类的内容。对于所有监督学习算法，我们都需要向模型中输入“特征集”和“标签集”这两组数据。因此，在开始机器学习的模型搭建之前，我们需要先构建一个特征数据集和一个标签数据集。</p><p>具体的构建过程也很简单，我们只要从原始数据集删除我们不需要的数据就行了。在这个项目中，特征是点赞数、转发数、热度指数和文章评级，所以只需要从原始数据集中删除“浏览量”就行了。</p><pre><code>X = df_ads.drop(['浏览量'],axis=1) # 特征集，Drop掉标签相关字段\n</code></pre><p>而标签是我们想要预测的浏览量，因此，我们在标签数据集中只保留“浏览量”字段：</p><pre><code>y = df_ads.浏览量 # 标签集\n</code></pre><p>下面我们再看看特征集和标签集里面都有什么数据。</p><pre><code>X.head() # 显示前几行数据\n</code></pre><pre><code>y.head() #显示前几行数据\n</code></pre><p>因为Notebook一个单元格只能有一个输出。所以我把显示两个数据的代码放在了不同的单元格中。它们的输出结果如下图所示：</p><p><img src=\"https://static001.geekbang.org/resource/image/a8/07/a8b2dddyy331e2f7586c55d7b18f6c07.jpg?wh=2284x546\" alt=\"\"></p><p>可以看到，除了浏览量之外，所有其它字段仍然都在特征数据集中，而只有浏览量被保存在了标签数据集中，也就是说原始数据集就被拆分成了机器学习的特征集和标签集。</p><p>这里我想请你思考的是，无监督学习算法需要这个步骤吗？没错，答案是不需要。因为无监督算法根本就没有标签。</p><p>不过，从原数据集从列的维度纵向地拆分成了特征集和标签集后，还需要进一步从行的维度横向拆分。你可能想问，为啥还要拆分呀？因为我们在第一讲<a href=\"https://time.geekbang.org/column/article/413057\">《打好基础：弄懂到底什么是机器学习》</a>里就讲过，机器学习并不是通过训练数据集找出一个模型就结束了，我们需要用验证数据集看看这个模型好不好，然后用测试数据集看看模型在新数据上能不能用。</p><p>那么具体该怎么拆分呢？这就是我们接下来要解决的问题了。</p><ol start=\"6\">\n<li>\n<h3>拆分训练集、验证集和测试集</h3>\n</li>\n</ol><p>在拆分之前，我先说明一点，对于学习型项目来说，为了简化流程，经常会省略验证的环节。我们今天的项目比较简单，所以我们也省略了验证，只拆分训练集和测试集，而此时的测试集就肩负着验证和测试双重功能了。</p><p>拆分的时候，留作测试的数据比例一般是20%或30%。不过如果你的数据量非常庞大，比如超过1百万的时候，那你也不一定非要留这么多。一般来说有上万条的测试数据就足够了。这里我会按照80/20的比例来拆分数据。具体的拆分，我们会用机器学习工具包scikit-learn里的数据集拆分工具train_test_split来完成：</p><pre><code>#将数据集进行80%（训练集）和20%（验证集）的分割\nfrom sklearn.model_selection import train_test_split #导入train_test_split工具\nX_train, X_test, y_train, y_test = train_test_split(X, y, \n                                   test_size=0.2, random_state=0)\n</code></pre><p>这里请你注意一下，虽然是随机分割，但我们要指定一个random_state值，这样就保证程序每次运行都分割一样的训练集和测试集。训练集和测试集每次拆分都不一样的话，那比较模型调参前后的优劣就失去了固定的标准。</p><p>现在，训练集和测试集拆分也完成了，你会发现原始数据现在变成了四个数据集，分别是：</p><ul>\n<li>特征训练集（X_train）</li>\n<li>特征测试集（X_test）</li>\n<li>标签训练集（y_train）</li>\n<li>标签测试集（y_test）</li>\n</ul><p>至此，我们全部的数据预处理工作就结束了。</p><h2>总结一下</h2><p>现在，我来给你总结一下。</p><p>这节课我们介绍了机器学习实战5步中的前两步：定义问题以及数据的收集和预处理。不明确定义要解决的问题，我们就没办法有的放矢地选择模型。</p><p>而数据的收集和预处理虽然看起来没有模型的选择和优化那么“吸引眼球”，但它其实才是机器学习项目成败的关键。这一步可以分为下图中的6个小步：</p><p><img src=\"https://static001.geekbang.org/resource/image/90/fd/9065b2d14d1416197ab841025d59d7fd.jpg?wh=2284x1165\" alt=\"\"></p><p>这6步中，尤其是数据可视化和特征工程，因为无定法可循，所以很考验经验，它既是我们对着已有数据找感觉的过程，又是下一步把数据“喂”给模型之前的必要准备。</p><p>除此之外，这里我还希望你注意两点：</p><p>第一点是，<strong>这些子步骤中的次序并不是固定的</strong>，比如数据可视化和特征工程，很多时候是先可视化，发现了一些特征工程的思路，然后做特征工程，然后再次可视化。而且有的特征工程比如特征缩放，还必须在拆分数据之后做；</p><p>第二点，这些子步骤<strong>在一个特定的机器学习项目中，可能不需要全部用到</strong>。比如说无监督学习项目，就不需要创建特征集和标签集这个步骤，一般也不需要用到验证集和测试集。</p><p>好的，那么这一讲就到这里，我把这节课使用的代码放在<a href=\"https://github.com/huangjia2019/geektime/tree/main/%E5%87%86%E5%A4%87%E7%AF%8703\">这里</a>了。下一讲，我们要开始选择机器学习模型了，敬请期待！</p><h2>思考题</h2><p>这节课到这我们就讲完了，我来给你留两道练习题。</p><ol>\n<li>今天我们显示了特征和标签的散点图，还显示了热度指数特征的箱线图。你能不能试着显示一下其它特征之间的散点图，或者箱线图呢？</li>\n<li>在数据清洗部分，我们用dropna()这个API，把出现了NaN的数据行删掉了。如果你出于保留更多数据的考虑，应该为该字段补值，你会怎么做呢？你能想到哪些补值方法？</li>\n</ol><p>提示一种方法：</p><pre><code>df_ads['转发数'].fillna(df_ads['转发数'].mean(), inplace=True) # 用均值补值\n</code></pre><p>欢迎你在留言区里分享你做这两个题时的收获和遇到的问题，我在留言区等你。如果这节课帮到了你的话，也欢迎你把这节课分享给自己的朋友。</p><p><img src=\"https://static001.geekbang.org/resource/image/1f/47/1fe8181d62cdef912a6bd829f3582647.jpg?wh=2284x1136\" alt=\"\"></p>","neighbors":{"left":{"article_title":"02｜工具准备：安装并使用Jupyter Notebook","id":413648},"right":{"article_title":"04｜ 实战5步（下）：怎么建立估计10万+软文点击率的模型？","id":415149}},"comments":[{"had_liked":false,"id":310404,"user_name":"在路上","can_delete":false,"product_type":"c1","uid":1402511,"ip_address":"","ucode":"6E31908EFE1107","user_header":"https://static001.geekbang.org/account/avatar/00/15/66/8f/02be926d.jpg","comment_is_top":true,"comment_ctime":1630641694,"is_pvip":false,"replies":[{"id":"112464","content":"谢谢，这是特别好的经验分享。值得置顶！","user_name":"作者回复","user_name_real":"黄佳","uid":"1809833","ctime":1630651582,"ip_address":"","comment_id":310404,"utype":1}],"discussion_count":1,"race_medal":0,"score":"9.2233721072049009e+18","product_id":100085501,"comment_content":"黄老师好，面对空缺的数据，可以采用默认值、均值、中位值等方式填充，有条件的话，可以和业务方沟通，要求补全空缺数据。","like_count":17,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"黄佳","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526223,"discussion_content":"谢谢，这是特别好的经验分享。值得置顶！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630651582,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":310345,"user_name":"年轻","can_delete":false,"product_type":"c1","uid":1900044,"ip_address":"","ucode":"0EE1C7B82DD960","user_header":"https://static001.geekbang.org/account/avatar/00/1c/fe/0c/f5267835.jpg","comment_is_top":true,"comment_ctime":1630600081,"is_pvip":true,"replies":[{"id":"112426","content":"嗯，谢谢支持。我们这边也多努力一下。","user_name":"作者回复","user_name_real":"黄佳","uid":"1809833","ctime":1630601063,"ip_address":"","comment_id":310345,"utype":1}],"discussion_count":1,"race_medal":0,"score":"9.2233720513702994e+18","product_id":100085501,"comment_content":"真想一爱看完，太难等了","like_count":3,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"黄佳","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526204,"discussion_content":"嗯，谢谢支持。我们这边也多努力一下。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630601063,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":310497,"user_name":"谦","can_delete":false,"product_type":"c1","uid":2417283,"ip_address":"","ucode":"9AA072153D7A09","user_header":"https://static001.geekbang.org/account/avatar/00/24/e2/83/e2888084.jpg","comment_is_top":false,"comment_ctime":1630681306,"is_pvip":true,"replies":[{"id":"112488","content":"有方法。试试这个：<br>例子：<br>import pandas as pd<br>data = [[100] ,[&#39;&#47;&#39;], [&#39;Zero&#39;], [99]]<br>columns = [&#39;成绩&#39;]<br>df = pd.DataFrame(data=data, columns=columns)<br>df<br>原始数据输出：<br>       成绩<br>0\t100<br>1\t&#47;<br>2\tZero<br>3\t99<br><br>转换语句<br>df[&#39;新成绩&#39;] = pd.to_numeric(df.成绩.astype(str).str.replace(&#39;,&#39;,&#39;&#39;), errors=&#39;coerce&#39;).fillna(0).astype(int)<br>df<br>新字段的输出<br>\t成绩\t新成绩<br>0\t100\t100<br>1\t&#47;\t   0<br>2\tZero\t   0<br>3\t99\t 99<br><br>是不是比Excel快很多呀？","user_name":"作者回复","user_name_real":"黄佳","uid":"1809833","ctime":1630692537,"ip_address":"","comment_id":310497,"utype":1}],"discussion_count":4,"race_medal":0,"score":"83235059930","product_id":100085501,"comment_content":"黄老师，请问如果工作人员录入数据的时候空值并没有留空，而是用“\\”，“-”，“无”等字符来标注的话，有什么好的处理方法呢？我一般是用excel进行筛选，查看异常值，然后排序之后吧异常值整行删掉，处理干净之后再用pandas导入。想看看有没有一些更智能的方法。谢谢🙏","like_count":20,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"黄佳","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526251,"discussion_content":"有方法。试试这个：\n例子：\nimport pandas as pd\ndata = [[100] ,[&amp;#39;/&amp;#39;], [&amp;#39;Zero&amp;#39;], [99]]\ncolumns = [&amp;#39;成绩&amp;#39;]\ndf = pd.DataFrame(data=data, columns=columns)\ndf\n原始数据输出：\n       成绩\n0\t100\n1\t/\n2\tZero\n3\t99\n\n转换语句\ndf[&amp;#39;新成绩&amp;#39;] = pd.to_numeric(df.成绩.astype(str).str.replace(&amp;#39;,&amp;#39;,&amp;#39;&amp;#39;), errors=&amp;#39;coerce&amp;#39;).fillna(0).astype(int)\ndf\n新字段的输出\n\t成绩\t新成绩\n0\t100\t100\n1\t/\t   0\n2\tZero\t   0\n3\t99\t 99\n\n是不是比Excel快很多呀？","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1630692537,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2770207,"avatar":"","nickname":"Geek_d63a94","note":"","ucode":"B10D1189EB11A9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":395411,"discussion_content":"想请问老师，为什么要.str.replace(&#39;,&#39;,&#39;&#39;)。数据中也没有‘,’,就算有不也一起变成NaN了吗？","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1632301508,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2813087,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/ec/9f/7fa3bf00.jpg","nickname":"Elaine","note":"","ucode":"BC35964F85B55B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2770207,"avatar":"","nickname":"Geek_d63a94","note":"","ucode":"B10D1189EB11A9","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":410017,"discussion_content":"所以后面用fillna填充0再转成整数","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635573605,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":395411,"ip_address":""},"score":410017,"extra":""}]},{"author":{"id":2417283,"avatar":"https://static001.geekbang.org/account/avatar/00/24/e2/83/e2888084.jpg","nickname":"谦","note":"","ucode":"9AA072153D7A09","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":392002,"discussion_content":"这个方法很好，谢谢老师👍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630758772,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":313357,"user_name":"shatu","can_delete":false,"product_type":"c1","uid":2760732,"ip_address":"","ucode":"27077AA35B8C22","user_header":"https://static001.geekbang.org/account/avatar/00/2a/20/1c/de379ed1.jpg","comment_is_top":false,"comment_ctime":1632387907,"is_pvip":false,"replies":[{"id":"113497","content":"谢谢分享！","user_name":"作者回复","user_name_real":"黄佳","uid":"1809833","ctime":1632394826,"ip_address":"","comment_id":313357,"utype":1}],"discussion_count":3,"race_medal":0,"score":"23107224387","product_id":100085501,"comment_content":"在开始前花了一些时间解决中文乱码的问题：<br>1.编码不为utf-8且文件路径有中文，产生的乱码<br>用记事本另存为utf-8编码，加入engine=&#39;python&#39;参数<br>例：<br>df_ads = pd.read_csv(&#39;易速鲜花微信软文.csv&#39;,engine=&#39;python&#39;,encoding=&#39;utf-8&#39;)<br><br>2.matplotlib作图标签产生乱码的<br>例：<br>plt.rcParams[&#39;font.sans-serif&#39;]=[&#39;SimHei&#39;] #用来正常显示中文标签<br>plt.rcParams[&#39;axes.unicode_minus&#39;]=False #用来正常显示负号<br>","like_count":5,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"黄佳","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527325,"discussion_content":"谢谢分享！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632394826,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1070069,"avatar":"https://static001.geekbang.org/account/avatar/00/10/53/f5/0a91e3bf.jpg","nickname":"谢仲文","note":"","ucode":"F23794A9A4109B","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":586772,"discussion_content":"谢谢！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662510268,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"山东"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1087879,"avatar":"https://static001.geekbang.org/account/avatar/00/10/99/87/98ebb20e.jpg","nickname":"dao","note":"","ucode":"4181FB270462CF","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":401711,"discussion_content":"可能用 plt.rcParams[&#39;font.family&#39;] = &#39;SimHei&#39; 更好。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633707440,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":310438,"user_name":"茜茜","can_delete":false,"product_type":"c1","uid":2652053,"ip_address":"","ucode":"8861DD63536EEF","user_header":"https://static001.geekbang.org/account/avatar/00/28/77/95/0d10d4b2.jpg","comment_is_top":false,"comment_ctime":1630655976,"is_pvip":false,"replies":[{"id":"112471","content":"感谢支持，一起加油😁！作业完成的非常认真，我看到你还给出了median()和众数的方法mode()。很好。","user_name":"作者回复","user_name_real":"黄佳","uid":"1809833","ctime":1630665772,"ip_address":"","comment_id":310438,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14515557864","product_id":100085501,"comment_content":"谢谢黄老师的讲解。这是我的回答，我还买了老师的书《零基础学机器学习》,昨天浏览了一遍，希望把这本书和专栏的知识都学会。<br>#思考题1<br>import matplotlib.pyplot as plt<br>import seaborn as sns<br>from pylab import mpl<br>plt.rcParams[&#39;font.sans-serif&#39;] = [&#39;KaiTi&#39;]<br><br>plt.figure(figsize = (20,8), dpi = 100)<br>fig, axes = plt.subplots(2, 2, figsize = (20,8), dpi = 100)<br>#散点图<br>axes[0,0].plot(df_ads[&#39;点赞数&#39;],df_ads[&#39;浏览量&#39;],&#39;r.&#39;, label=&#39;点赞数-浏览量&#39;)<br>axes[0,1].plot(df_ads[&#39;转发数&#39;],df_ads[&#39;浏览量&#39;],&#39;b.&#39;, label=&#39;转发数-浏览量&#39;)<br>axes[1,0].plot(df_ads[&#39;热度指数&#39;],df_ads[&#39;浏览量&#39;],&#39;g.&#39;, label=&#39;热度指数-浏览量&#39;)<br>axes[1,1].plot(df_ads[&#39;文章评级&#39;],df_ads[&#39;浏览量&#39;],&#39;y.&#39;, label=&#39;文章评级-浏览量&#39;)<br><br>axes[0,0].set_xlabel(&#39;点赞数&#39;)<br>axes[0,0].set_ylabel(&#39;浏览量&#39;)<br>axes[0,1].set_xlabel(&#39;转发数&#39;)<br>axes[0,1].set_ylabel(&#39;浏览量&#39;)<br>axes[1,0].set_xlabel(&#39;热度指数&#39;)<br>axes[1,0].set_ylabel(&#39;浏览量&#39;)<br>axes[1,1].set_xlabel(&#39;文章评级&#39;)<br>axes[1,1].set_ylabel(&#39;浏览量&#39;)<br> <br>plt.legend(loc = 0) <br>axes[0,0].legend(loc = 2)  <br>axes[0,1].legend(loc = 2)  <br>axes[1,0].legend(loc = 2)  <br>axes[1,1].legend(loc = 2) <br>plt.show() <br><br>#箱线图<br>plt.figure(figsize = (20,8), dpi = 100)<br>fig, axes = plt.subplots(2, 2, figsize = (20,8), dpi = 100)<br><br>data1 = df_ads[[&#39;浏览量&#39;,&#39;点赞数&#39;]]<br>data2 = df_ads[[&#39;浏览量&#39;,&#39;转发数&#39;]]<br>data3 = df_ads[[&#39;浏览量&#39;,&#39;热度指数&#39;]]<br>data4 = df_ads[[&#39;浏览量&#39;,&#39;文章评级&#39;]]<br><br>fig1 = sns.boxplot(x = &#39;点赞数&#39;, y = &#39;浏览量&#39;, data = data1, ax = axes[0,0])<br>fig1.axis(ymin = 0, ymax = 800000)<br>fig2 = sns.boxplot(x = &#39;转发数&#39;, y = &#39;浏览量&#39;, data = data2, ax = axes[0,1])<br>fig2.axis(ymin = 0, ymax = 800000)<br>fig3 = sns.boxplot(x = &#39;热度指数&#39;, y = &#39;浏览量&#39;, data = data3, ax = axes[1,0])<br>fig3.axis(ymin = 0, ymax = 800000)<br>fig4 = sns.boxplot(x = &#39;文章评级&#39;, y = &#39;浏览量&#39;, data = data4, ax = axes[1,1])<br>fig4.axis(ymin = 0, ymax = 800000)<br><br>axes[0,0].set_xlabel(&#39;点赞数&#39;)<br>axes[0,0].set_ylabel(&#39;浏览量&#39;)<br>axes[0,1].set_xlabel(&#39;转发数&#39;)<br>axes[0,1].set_ylabel(&#39;浏览量&#39;)<br>axes[1,0].set_xlabel(&#39;热度指数&#39;)<br>axes[1,0].set_ylabel(&#39;浏览量&#39;)<br>axes[1,1].set_xlabel(&#39;文章评级&#39;)<br>axes[1,1].set_ylabel(&#39;浏览量&#39;)<br>plt.show() <br> <br>#思考题2<br># 用中位数填充<br>df_ads[&#39;转发数&#39;].fillna(df_ads[&#39;转发数&#39;].median(), inplace=True) <br>#用众数填充<br>df_ads[&#39;转发数&#39;].fillna(df_ads[&#39;转发数&#39;].mode(), inplace=True) <br>","like_count":4,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"黄佳","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526235,"discussion_content":"感谢支持，一起加油😁！作业完成的非常认真，我看到你还给出了median()和众数的方法mode()。很好。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630665772,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":313788,"user_name":"Allen","can_delete":false,"product_type":"c1","uid":1168265,"ip_address":"","ucode":"10D365C791D28F","user_header":"https://static001.geekbang.org/account/avatar/00/11/d3/89/fcf95d32.jpg","comment_is_top":false,"comment_ctime":1632665789,"is_pvip":false,"replies":[{"id":"113663","content":"对，对。<br>fig = sns.boxplot(x=&#39;热度指数&#39;, y=&quot;浏览量&quot;, data=df_ads[[&#39;浏览量&#39;, &#39;热度指数&#39;]]) <br>这样就完全可以了。","user_name":"作者回复","user_name_real":"黄佳","uid":"1809833","ctime":1632757550,"ip_address":"","comment_id":313788,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10222600381","product_id":100085501,"comment_content":"感觉data = pd.concat([df_ads[&#39;浏览量&#39;], df_ads[&#39;热度指数&#39;]], axis=1)，这句可以用df_ads[[&#39;浏览量&#39;, &#39;热度指数&#39;]]替代，看上去更简单一些","like_count":2,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"黄佳","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527471,"discussion_content":"对，对。\nfig = sns.boxplot(x=&amp;#39;热度指数&amp;#39;, y=&amp;quot;浏览量&amp;quot;, data=df_ads[[&amp;#39;浏览量&amp;#39;, &amp;#39;热度指数&amp;#39;]]) \n这样就完全可以了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632757550,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":344113,"user_name":"自娱自乐★","can_delete":false,"product_type":"c1","uid":2703793,"ip_address":"","ucode":"8CB39EB8C684D5","user_header":"https://static001.geekbang.org/account/avatar/00/29/41/b1/44dd10c1.jpg","comment_is_top":false,"comment_ctime":1651253639,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5946220935","product_id":100085501,"comment_content":"mac中图表横纵坐标乱码解决方法<br>plt.rcParams[&#39;font.sans-serif&#39;] = [&#39;Arial Unicode MS&#39;]","like_count":2},{"had_liked":false,"id":315139,"user_name":"dao","can_delete":false,"product_type":"c1","uid":1087879,"ip_address":"","ucode":"4181FB270462CF","user_header":"https://static001.geekbang.org/account/avatar/00/10/99/87/98ebb20e.jpg","comment_is_top":false,"comment_ctime":1633699619,"is_pvip":true,"replies":[{"id":"114219","content":"谢谢分享！！🎿","user_name":"作者回复","user_name_real":"黄佳","uid":"1809833","ctime":1633926714,"ip_address":"","comment_id":315139,"utype":1}],"discussion_count":4,"race_medal":0,"score":"5928666915","product_id":100085501,"comment_content":"如果大家遇到这个问题：<br>RuntimeWarning: Glyph missing from current font<br><br>尝试了很多方法都无法解决，那请删除 matplotlib cache ，然后重启 jupyter kernel。<br>---<br>rm -rf ~&#47;.matplotlib&#47;<br>jupyter lab<br>---<br><br>确保 matplotlib cache 中有中文字体<br>---<br>vi ~&#47;.matplotlib&#47;fontlist-v330.json<br>---<br>","like_count":2,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"黄佳","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527879,"discussion_content":"谢谢分享！！🎿","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633926714,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2840148,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/56/54/f8d9e6e0.jpg","nickname":"🇱 、🇲","note":"","ucode":"F709EA85196768","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":413620,"discussion_content":"、怎么确定.matplotlib/fontlist-v330.json文件中是否有中文字体呢\n，中文字体的name是啥呢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636528538,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1087879,"avatar":"https://static001.geekbang.org/account/avatar/00/10/99/87/98ebb20e.jpg","nickname":"dao","note":"","ucode":"4181FB270462CF","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":402180,"discussion_content":"补充一下，matplotlib 的配置文件是 site-packages/matplotlib/mpl-data/matplotlibrc，可以在其中查看 font.family 设置。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633825977,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1087879,"avatar":"https://static001.geekbang.org/account/avatar/00/10/99/87/98ebb20e.jpg","nickname":"dao","note":"","ucode":"4181FB270462CF","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":402179,"discussion_content":"这种方式是一劳永逸，不需要再在每次使用 matplotlib 绘图时指定\nplt.rcParams[&#39;font.family&#39;] = &#39;字体名称&#39;。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633825873,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":310455,"user_name":"GAC·DU","can_delete":false,"product_type":"c1","uid":1385403,"ip_address":"","ucode":"7847FBE1C13740","user_header":"https://static001.geekbang.org/account/avatar/00/15/23/bb/a1a61f7c.jpg","comment_is_top":false,"comment_ctime":1630659807,"is_pvip":true,"replies":[{"id":"112472","content":"嗯，非常好。大家都有自己的思考，我也有一个可能的想法，暂时先不分享给大家，让大家继续自由讨论。我过几天在分享这个想法。<br><br>补充一下，我的这个想法是对于转发数的空值，可以把同一行的“点赞数”拷贝到“转发数”中。因为这两个值接近。","user_name":"作者回复","user_name_real":"黄佳","uid":"1809833","ctime":1630665883,"ip_address":"","comment_id":310455,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5925627103","product_id":100085501,"comment_content":"想到两个补值方法，我试了感觉都不是很好。第一个是取临近值，这种方法误差很大。第二个是利用对比标签值，反推特征值，这种方法适合小数据量，如果是大数据量很消耗机器性能。还请老师给出个完美的方案。","like_count":2,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"黄佳","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526241,"discussion_content":"嗯，非常好。大家都有自己的思考，我也有一个可能的想法，暂时先不分享给大家，让大家继续自由讨论。我过几天在分享这个想法。\n\n补充一下，我的这个想法是对于转发数的空值，可以把同一行的“点赞数”拷贝到“转发数”中。因为这两个值接近。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630665883,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2842763,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/60/8b/b764037d.jpg","nickname":"小骨萨麻","note":"","ucode":"0D6A7948987AF4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":531748,"discussion_content":"df_ads.loc[df_ads.转发数.isna(),&#39;转发数&#39;] = df_ads.loc[df_ads.转发数.isna(),&#39;点赞数&#39;] # 把空行的“点赞数”拷贝到“转发数”中\n\npython小白来献丑啦~~~按老师的思路写了个拷贝语句~~成功啦~~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637404794,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":310416,"user_name":"胡了","can_delete":false,"product_type":"c1","uid":1042339,"ip_address":"","ucode":"A36D7870DD0783","user_header":"https://static001.geekbang.org/account/avatar/00/0f/e7/a3/229d9704.jpg","comment_is_top":false,"comment_ctime":1630647637,"is_pvip":true,"replies":[{"id":"112473","content":"更新时间：周一，周三，周五😅","user_name":"作者回复","user_name_real":"黄佳","uid":"1809833","ctime":1630665975,"ip_address":"","comment_id":310416,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5925614933","product_id":100085501,"comment_content":"老师能催更吗？着急。。。","like_count":1,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"黄佳","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526228,"discussion_content":"更新时间：周一，周三，周五😅","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630665975,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":351723,"user_name":"安迪密恩","can_delete":false,"product_type":"c1","uid":1331611,"ip_address":"","ucode":"A6F3F67CF8E6F8","user_header":"https://static001.geekbang.org/account/avatar/00/14/51/9b/ccea47d9.jpg","comment_is_top":false,"comment_ctime":1658128273,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1658128273","product_id":100085501,"comment_content":"想请教老师一个问题，箱线图为什么会有离群点？最大值和最小值区间不是应该包含所有的点了吗？","like_count":0,"discussions":[{"author":{"id":1257020,"avatar":"https://static001.geekbang.org/account/avatar/00/13/2e/3c/9e2d4a51.jpg","nickname":"。","note":"","ucode":"A8FCFD9BBB380C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581073,"discussion_content":"可以看一下这一篇文章介绍的https://blog.csdn.net/weixin_42131618/article/details/112156583；最大和最小值指的是对应的观测值，是排除异常值的情况","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658483739,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":341896,"user_name":"Geek_82cb5e","can_delete":false,"product_type":"c1","uid":2750398,"ip_address":"","ucode":"AD79F40FE61F61","user_header":"","comment_is_top":false,"comment_ctime":1649906027,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1649906027","product_id":100085501,"comment_content":"黄老师，特征工程是不是可以理解为为计算的结果减负，结合各种因变量利用逻辑推导生成指标公式啊","like_count":0},{"had_liked":false,"id":341254,"user_name":"长烽","can_delete":false,"product_type":"c1","uid":1009584,"ip_address":"","ucode":"78D00D021E9087","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/b0/791d0f5e.jpg","comment_is_top":false,"comment_ctime":1649483975,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1649483975","product_id":100085501,"comment_content":"已验证不同特征的散点图和箱线图，有趣","like_count":0},{"had_liked":false,"id":337624,"user_name":"立与里","can_delete":false,"product_type":"c1","uid":1371924,"ip_address":"","ucode":"FC0A78773D2D46","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/VPpxxrWBKOGZ7k8g8iay7wTO4StxDJhF8RMXBY7Ax7YREL2AfZTvwibs80xS9VfkgaleYtLkiacVCG0MAUdYMjqmQ/132","comment_is_top":false,"comment_ctime":1646920410,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1646920410","product_id":100085501,"comment_content":"数据源链接打不开","like_count":0},{"had_liked":false,"id":333813,"user_name":"Dayton","can_delete":false,"product_type":"c1","uid":1303232,"ip_address":"","ucode":"5654382E7D7D4F","user_header":"https://static001.geekbang.org/account/avatar/00/13/e2/c0/bf8764b5.jpg","comment_is_top":false,"comment_ctime":1644546920,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1644546920","product_id":100085501,"comment_content":"python matplotlib RuntimeWarning: Glyph xxxxx missing from current font.字体设置问题<br>------------------------------------------------------------------<br>from matplotlib import font_manager as fm, rcParams <br>import matplotlib as plt<br>plt.rcParams[&#39;font.sans-serif&#39;]=[&#39;SimHei&#39;] #显示中文标签<br>plt.rcParams[&#39;axes.unicode_minus&#39;]=False #这两行需要手动设置","like_count":0},{"had_liked":false,"id":329079,"user_name":"TWJ","can_delete":false,"product_type":"c1","uid":2019025,"ip_address":"","ucode":"D45F7F43F231BE","user_header":"https://static001.geekbang.org/account/avatar/00/1e/ce/d1/25b26edb.jpg","comment_is_top":false,"comment_ctime":1641101616,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1641101616","product_id":100085501,"comment_content":"#作业1：易信鲜花数据可视化<br>#导入数据可视化所需要的库<br>import pandas as pd # 导入Pandas-数据处理工具，命名为pd<br>import matplotlib.pyplot as plt # Matplotlib – Python画图工具库(仅导入数据展示库)，命名为plt<br>import seaborn as sns # Seaborn – 统计学数据可视化工具库,命名为sns<br><br>#利用pandas读入数据<br>df_ads = pd.read_csv(&#39;易速鲜花微信软文.csv&#39;) # 读入数据<br>#df_ads.head() # 显示前几行数据<br><br>#用于显示中文标签的设置<br>plt.rcParams[&#39;font.sans-serif&#39;]=[&#39;SimHei&#39;] #显示中文标签<br>plt.rcParams[&#39;axes.unicode_minus&#39;]=False   #这两行需要手动设置<br><br>#显示散点图--点赞数&#47;浏览量<br>plt.plot(df_ads[&#39;点赞数&#39;],df_ads[&#39;浏览量&#39;],&#39;r.&#39;, label=&#39;Training data&#39;) # 用matplotlib.pyplot的plot方法显示散点图<br>plt.xlabel(&#39;点赞数&#39;) # x轴Label<br>plt.ylabel(&#39;浏览量&#39;) # y轴Label<br>plt.legend() # 显示图例<br>plt.show() # 显示绘图结果！<br><br>#显示散点图--转发数&#47;浏览量<br>plt.plot(df_ads[&#39;转发数&#39;],df_ads[&#39;浏览量&#39;],&#39;b.&#39;, label=&#39;Training data&#39;) # 用matplotlib.pyplot的plot方法显示散点图<br>plt.xlabel(&#39;转发数&#39;) # x轴Label<br>plt.ylabel(&#39;浏览量&#39;) # y轴Label<br>plt.legend() # 显示图例<br>plt.show() # 显示绘图结果！<br><br>#显示箱式图--[&#39;浏览量&#39;,&#39;热度指数&#39;]<br>data = pd.concat([df_ads[&#39;浏览量&#39;], df_ads[&#39;热度指数&#39;]], axis=1) # 浏览量和热度指数<br>fig = sns.boxplot(x=&#39;热度指数&#39;, y=&quot;浏览量&quot;, data=data) # 用seaborn的箱线图画图<br>fig.axis(ymin=0, ymax=800000); #设定y轴坐标<br>plt.show()# 显示绘图结果！<br>data2 = pd.concat([df_ads[&#39;点赞数&#39;], df_ads[&#39;热度指数&#39;]], axis=1) # 浏览量和热度指数df_ads[[&#39;点赞数&#39;,&#39;热度指数&#39;]]<br>#显示箱式图--[&#39;点赞数&#39;,&#39;热度指数&#39;]<br>fig2 = sns.boxplot(x=&#39;热度指数&#39;, y=&quot;点赞数&quot;, data=data2) # 用seaborn的箱线图画图<br>fig2.axis(ymin=0, ymax=10000); #设定y轴坐标","like_count":1},{"had_liked":false,"id":323753,"user_name":"夏日🍉情缘","can_delete":false,"product_type":"c1","uid":2755497,"ip_address":"","ucode":"0BD258E390E537","user_header":"https://static001.geekbang.org/account/avatar/00/2a/0b/a9/ccacdd57.jpg","comment_is_top":false,"comment_ctime":1638152230,"is_pvip":false,"replies":[{"id":"118522","content":"数据集就把它放在Notebook的同一个目录下。","user_name":"作者回复","user_name_real":"编辑","uid":"1809833","ctime":1639496383,"ip_address":"","comment_id":323753,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1638152230","product_id":100085501,"comment_content":"黄老师好，请问下：易速鲜花微信软文.csv    这个文件下载之后放在哪里呀？","like_count":0,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"黄佳","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":538756,"discussion_content":"数据集就把它放在Notebook的同一个目录下。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639496383,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2568642,"avatar":"https://static001.geekbang.org/account/avatar/00/27/31/c2/7771e0e9.jpg","nickname":"季申","note":"","ucode":"679966B9B6B9E5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":536717,"discussion_content":"和程序一个目录里","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638854829,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":322467,"user_name":"小骨萨麻","can_delete":false,"product_type":"c1","uid":2842763,"ip_address":"","ucode":"0D6A7948987AF4","user_header":"https://static001.geekbang.org/account/avatar/00/2b/60/8b/b764037d.jpg","comment_is_top":false,"comment_ctime":1637402560,"is_pvip":false,"replies":[{"id":"117522","content":"已把所有的数据集都打包成zip方便大家下载","user_name":"作者回复","user_name_real":"编辑","uid":"1809833","ctime":1638171231,"ip_address":"","comment_id":322467,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1637402560","product_id":100085501,"comment_content":"不知道有没有小伙伴像我一样卡在了下载数据集的环节（笑cry）似乎要站在墙外才能下载。<br>还有就是，下那个03.zip（csv链接里没有下载键，不要浪费时间了）","like_count":0,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"黄佳","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":534358,"discussion_content":"已把所有的数据集都打包成zip方便大家下载","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1638171231,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2568642,"avatar":"https://static001.geekbang.org/account/avatar/00/27/31/c2/7771e0e9.jpg","nickname":"季申","note":"","ucode":"679966B9B6B9E5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"黄佳","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":536718,"discussion_content":"方便很多","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638854848,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":534358,"ip_address":""},"score":536718,"extra":""}]},{"author":{"id":2929225,"avatar":"https://static001.geekbang.org/account/avatar/00/2c/b2/49/9f0f7a90.jpg","nickname":"　","note":"","ucode":"966C8A0FE03A9C","race_medal":2,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":586990,"discussion_content":"ZIP怎么下载啊\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662645703,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"新疆"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":321421,"user_name":"左超文","can_delete":false,"product_type":"c1","uid":2840159,"ip_address":"","ucode":"1C8315B5B5EE35","user_header":"https://static001.geekbang.org/account/avatar/00/2b/56/5f/99c924f7.jpg","comment_is_top":false,"comment_ctime":1636864791,"is_pvip":false,"replies":[{"id":"116876","content":"可以git clone命令把整个folder给复制到本机文件夹。","user_name":"作者回复","user_name_real":"编辑","uid":"1809833","ctime":1637075293,"ip_address":"","comment_id":321421,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1636864791","product_id":100085501,"comment_content":"数据集csv文件如何下载啊点进去找不到下载的地方<br>","like_count":0,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"黄佳","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":530457,"discussion_content":"可以git clone命令把整个folder给复制到本机文件夹。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637075293,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1019191,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8d/37/a1487011.jpg","nickname":"Austin Sun","note":"","ucode":"C1145C2CDD4E5D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":540029,"discussion_content":"Raw 右健 另存","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639922145,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":311870,"user_name":"黑山老妖","can_delete":false,"product_type":"c1","uid":1115958,"ip_address":"","ucode":"A1659F99C5BE1E","user_header":"https://static001.geekbang.org/account/avatar/00/11/07/36/d677e741.jpg","comment_is_top":false,"comment_ctime":1631517105,"is_pvip":false,"replies":[{"id":"113011","content":"👍","user_name":"作者回复","user_name_real":"黄佳","uid":"1809833","ctime":1631520409,"ip_address":"","comment_id":311870,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1631517105","product_id":100085501,"comment_content":"解决<br>RuntimeWarning: Glyph 25968 missing from current font.   font.set_text(s, 0.0, flags=flags)<br>问题<br>https:&#47;&#47;www.pythonheidong.com&#47;blog&#47;article&#47;635035&#47;e287593f798660b672fe&#47;","like_count":0,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"黄佳","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526778,"discussion_content":"👍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631520409,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2840148,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/56/54/f8d9e6e0.jpg","nickname":"🇱 、🇲","note":"","ucode":"F709EA85196768","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":413617,"discussion_content":"、我这试了下，没效果-。-","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636527734,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":310829,"user_name":"！null","can_delete":false,"product_type":"c1","uid":1242483,"ip_address":"","ucode":"4E5B7922980397","user_header":"https://static001.geekbang.org/account/avatar/00/12/f5/73/f7d3a996.jpg","comment_is_top":false,"comment_ctime":1630925350,"is_pvip":false,"replies":[{"id":"112633","content":"嗯，散点图的那张图，所谓的一条线就是能够穿越散点，使上面的点和下面的点均匀分布在上下的回归线。后面的拟合过程我画出了回归线的变换过程。指得就是那条“想象中的线”。","user_name":"作者回复","user_name_real":"黄佳","uid":"1809833","ctime":1630932373,"ip_address":"","comment_id":310829,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1630925350","product_id":100085501,"comment_content":"从这张图中我们可以看出来，这些数据基本上集中在一条线附近<br>这是从哪看出来的？","like_count":0,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"黄佳","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526371,"discussion_content":"嗯，散点图的那张图，所谓的一条线就是能够穿越散点，使上面的点和下面的点均匀分布在上下的回归线。后面的拟合过程我画出了回归线的变换过程。指得就是那条“想象中的线”。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630932373,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":310746,"user_name":"青松","can_delete":false,"product_type":"c1","uid":2746821,"ip_address":"","ucode":"B98F744AF1135B","user_header":"https://static001.geekbang.org/account/avatar/00/29/e9/c5/7ecb497f.jpg","comment_is_top":false,"comment_ctime":1630890783,"is_pvip":false,"replies":[{"id":"112585","content":"我们加油！","user_name":"作者回复","user_name_real":"黄佳","uid":"1809833","ctime":1630897902,"ip_address":"","comment_id":310746,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1630890783","product_id":100085501,"comment_content":"真想一次都看完，能否更新快点！","like_count":0,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"黄佳","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526334,"discussion_content":"我们加油！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630897902,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}