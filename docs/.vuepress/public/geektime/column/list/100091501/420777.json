{"id":420777,"title":"01ï½œç›´é¢ç—›ç‚¹ï¼šç§’æ€ç³»ç»Ÿçš„æŒ‘æˆ˜å’Œè®¾è®¡åŸåˆ™","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯å¿—ä¸œï¼Œæ¬¢è¿å’Œæˆ‘ä¸€èµ·ä»é›¶æ‰“é€ ç§’æ€ç³»ç»Ÿã€‚</p><p>æ¯å¹´çš„618ã€åŒ11éƒ½æ˜¯ç”µå•†å¹³å°çš„ç‹‚æ¬¢æ—¥ï¼Œå„ç§è¥é”€æ´»åŠ¨ã€è¥é”€æ–¹å¼å±‚å‡ºä¸ç©·ï¼Œè€Œç§’æ€å°±æ˜¯å…¶ä¸­æœ€é‡è¦çš„æ‰‹æ®µä¹‹ä¸€ã€‚é£å¤©èŒ…å°ã€åä¸ºæ‰‹æœºã€é«˜ç«¯æ˜¾å¡ç­‰çƒ­é—¨å•†å“çš„æŠ¢è´­æ´»åŠ¨ï¼Œå³ä½¿ä½ æ²¡æœ‰æŠ¢è¿‡ï¼Œä¹Ÿæˆ–è®¸å¬è¿‡ï¼Œè¿™å°±æ˜¯ç§’æ€å¸¦æ¥çš„å½±å“åŠ›ã€‚ç”¨å…·æœ‰ä»·æ ¼ä¼˜åŠ¿çš„ç¨€ç¼ºå•†å“ï¼Œæ¥å¢åŠ ç”µå•†å¹³å°çš„å…³æ³¨åº¦ï¼Œå¸¦æ¥ç©ºå‰çš„æµé‡ï¼Œè¿›è€Œå¯ä»¥ä¸ºå¹³å°çš„æ‹‰æ–°å¸¦æ¥æ–°åŠ©åŠ›ï¼Œå¦‚æœå†è¾…ä»¥å…¶ä»–è¥é”€æ‰‹æ®µï¼Œæ¯”å¦‚æŠ¢è´­èµ„æ ¼é™åˆ¶VIPç­‰ï¼Œé‚£ä¹ˆè¿™åˆæ˜¯ä¸€ç¬”å¯è§‚çš„åˆ›æ”¶ã€‚</p><p>æ‰€ä»¥åœ¨å½“ä¸‹è¿™ä¸ªæµé‡ä¸ºç‹çš„ç½‘ç»œæ—¶ä»£ï¼Œèƒ½å¤Ÿæä¾›ç§’æ€çš„è¥é”€æ‰‹æ®µï¼Œå°±æ˜¾å¾—å¼‚å¸¸é‡è¦ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬ä¸ºä»€ä¹ˆéœ€è¦åšç§’æ€ç³»ç»Ÿã€‚</p><p>å½“ç„¶ï¼Œå®ç°ä¸€ä¸ªç§’æ€ç³»ç»Ÿä¹Ÿå¹¶ä¸æ˜¯é‚£ä¹ˆå®¹æ˜“çš„äº‹ï¼Œè¦è€ƒè™‘çš„ç‚¹æœ‰å¾ˆå¤šã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬é¦–å…ˆè¦çŸ¥é“ç§’æ€æ´»åŠ¨çš„ä¸šåŠ¡ç‰¹ç‚¹ï¼Œå…¶æ¬¡æ˜¯è¦æ¸…æ¥šç§’æ€ç³»ç»Ÿçš„è¯·æ±‚é“¾è·¯ï¼Œè¿™æ ·æ‰èƒ½æ ¹æ®å…¶ç‰¹ç‚¹ï¼Œé’ˆå¯¹è¯·æ±‚é“¾è·¯ä¸­å¯èƒ½å­˜åœ¨çš„ç“¶é¢ˆç‚¹åšä¼˜åŒ–ä¸è®¾è®¡ã€‚é™¤æ­¤ä¹‹å¤–è¿˜æœ‰å¾ˆå¤šå…¶ä»–é—®é¢˜ï¼Œæˆ‘ä¼šåœ¨ä¹‹åçš„è¯¾ç¨‹ä¸­ä¸€ä¸€è¯¦è§£ã€‚</p><p>é‚£ä¹ˆä½œä¸ºä¸“æ çš„ç¬¬ä¸€è¯¾ï¼Œä¸ºäº†è®©ä½ å¯¹ç§’æ€ç³»ç»Ÿæœ‰ä¸€ä¸ªæ•´ä½“çš„è®¤çŸ¥ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±ç»¼åˆçœ‹ä¸€ä¸‹å½“ä¸‹ç§’æ€ç³»ç»Ÿéƒ½å­˜åœ¨å“ªäº›æŒ‘æˆ˜ï¼Œä»¥åŠæ‰€è¦éµå¾ªçš„è®¾è®¡åŸåˆ™ï¼Œè¿™äº›å¯ä»¥ä¸ºæˆ‘ä»¬åé¢çš„å®æˆ˜æ‰“ä¸‹ä¸€ä¸ªå¾ˆå¥½çš„åŸºç¡€ã€‚</p><h2>ç§’æ€æ€ä¹ˆç©</h2><p>æˆ‘å…ˆç®€å•ä»‹ç»ä¸‹ç§’æ€ä¸šåŠ¡å…·ä½“æ˜¯æ€ä¹ˆç©çš„ã€‚</p><!-- [[[read_end]]] --><p>é€šå¸¸æƒ…å†µä¸‹ï¼Œå¹³å°å•†å®¶ä¼šæ‹¿å‡ºç¨€ç¼ºå•†å“ï¼Œäº‹å…ˆåœ¨ç§’æ€çš„è¿è¥ç³»ç»Ÿä¸­è®¾ç½®å¥½æ´»åŠ¨çš„å¼€å§‹ã€ç»“æŸæ—¶é—´ï¼Œä»¥åŠæŠ•å…¥çš„åº“å­˜ï¼ˆç®€å•çš„ç©æ³•ï¼Œåªè¦è¿™å‡ ä¸ªä¸»è¦å…ƒç´ å³å¯ï¼‰ã€‚åœ¨æ´»åŠ¨å¼€å§‹ä¹‹åï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡æ´»åŠ¨æŠ¢è´­å…¥å£ï¼ˆä¸€ä¸ªå•†å“è¯¦æƒ…é¡µï¼Œæˆ–æ˜¯ä¸€ä¸ªå¹¿å‘Šé“¾æ¥ï¼‰ï¼Œè¿›å…¥åˆ°æ´»åŠ¨çš„ç»“ç®—é¡µï¼Œç„¶åç‚¹å‡»ä¸‹å•ï¼Œå®Œæˆå•†å“çš„æŠ¢è´­æ“ä½œï¼Œæ•´ä¸ªè¿‡ç¨‹å¦‚ä¸‹ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/38/73/380d9ea5bbaeb991d2fcdf87bd1bd773.jpg?wh=2000x1100\" alt=\"\"></p><p>è¿™ç§æ–¹å¼é€šç”¨æ€§å¾ˆå¼ºï¼Œå¯ä»¥é€‚é…å¤§éƒ¨åˆ†çš„å¹³å°ã€‚å½“ç„¶å¦‚æœæƒ³å¯¹æµé‡æœ‰ä¸ªé¢„æœŸä¸Šé™ï¼Œæ–¹ä¾¿åšå¤‡æˆ˜å·¥ä½œï¼Œé‚£ä¹ˆä½ å¯ä»¥åŠ ä¸Šé¢„çº¦åŠŸèƒ½ï¼Œå³åœ¨æ´»åŠ¨å¼€å§‹å‰ï¼Œå…ˆå¼€æ”¾ä¸€æ®µæ—¶é—´çš„é¢„çº¦ï¼Œè®©ç”¨æˆ·å…ˆå»è¿›è¡Œé¢„çº¦ï¼Œç„¶åæ‰èƒ½è·å¾—å‚åŠ æŠ¢è´­æ´»åŠ¨çš„èµ„æ ¼ã€‚</p><p>å¦‚æœé¢å¯¹çš„ä¸šåŠ¡åœºæ™¯å¤æ‚äº›ï¼Œä½ è¿˜å¯ä»¥è”åˆé£æ§ï¼Œåœ¨å‚åŠ æ´»åŠ¨æ—¶æ ¡éªŒç”¨æˆ·èµ„è´¨ï¼Œè¸¢æ‰é»„ç‰›ä»¥åŠæœ‰è¿‡ä¸è‰¯è¡Œä¸ºçš„äººï¼Œå°½é‡å°†èµ„æºç»™åˆ°ä¼˜è´¨ç”¨æˆ·ã€‚</p><p>é‚£ä¹ˆå¦‚æœä¸šåŠ¡å†å¤æ‚äº›å‘¢ï¼Ÿå¯ä»¥æ­é…é™è´­å¼€å±•æ´»åŠ¨ï¼Œæ§åˆ¶ä¸ªäººç»´åº¦ä¸‹ä¸€æ®µæ—¶é—´å†…çš„è´­ä¹°æ•°ï¼Œè®©æŠ¢è´­æˆåŠŸçš„å¿«ä¹è§¦è¾¾æ›´å¤šçš„äººã€‚</p><p>ä»¥ä¸Šåˆ—ä¸¾çš„å„ç§ç»„åˆä½¿ç”¨åœºæ™¯ï¼Œä½ éƒ½å¯ä»¥æ ¹æ®è‡ªå·±çš„å®é™…æƒ…å†µçµæ´»å˜é€šï¼Œæˆ–è€…å¼€æ‹“æ€ç»´åˆ›é€ å±äºè‡ªå·±ç‹¬ç‰¹çš„ç§’æ€ç©æ³•ã€‚å…¶å®åœ¨ç”µå•†å¤§è¡Œå…¶é“çš„ä»Šå¤©ï¼Œå¤§éƒ¨åˆ†ç©æ³•å·²ç»æ¯”è¾ƒé€šç”¨äº†ï¼Œç›¸ä¿¡è¿™äº›æ–¹å¼ä½ ä¹Ÿéƒ½å‚ä¸è¿‡ã€‚</p><p>ç§’æ€ç³»ç»Ÿè¿˜æ˜¯å¾ˆç¾å¥½çš„ï¼Œå¯æ€ä¹ˆæ ·æ‰èƒ½å®ç°å®ƒå‘¢ï¼Ÿ</p><h2>ç§’æ€ç³»ç»Ÿçš„æŒ‘æˆ˜</h2><p>é¦–å…ˆï¼Œæˆ‘ä»¬å¾—ç›´é¢ä»¥ä¸‹çš„è¿™äº›æŒ‘æˆ˜ã€‚</p><h3>å·¨å¤§çš„ç¬æ—¶æµé‡</h3><p>ç§’æ€æ´»åŠ¨çš„ç‰¹ç‚¹ï¼Œå°±æ˜¯å°†ç”¨æˆ·å…¨éƒ¨é›†ä¸­åˆ°åŒä¸€ä¸ªæ—¶åˆ»ï¼Œç„¶åä¸€èµ·å¼€æŠ¢æŸä¸ªçƒ­é—¨å•†å“ï¼Œè€Œçƒ­é—¨å•†å“çš„åº“å­˜å¾€å¾€åˆéå¸¸å°‘ï¼Œæ‰€ä»¥æŒç»­çš„æ—¶é—´ä¹Ÿæ¯”è¾ƒçŸ­ï¼Œå¿«çš„è¯å¯èƒ½ä¸€ä¸¤ç§’å†…å°±ç»“æŸäº†ã€‚</p><p>è¿™ç§åœºæ™¯ä¸‹ï¼Œé«˜å¹¶å‘äº§ç”Ÿçš„å·¨å¤§ç¬æ—¶æµé‡ï¼Œé¦–å…ˆä¼šå‡»å®ä½ æœåŠ¡çš„â€œå¤§é—¨â€ï¼Œå½“â€œå¤§é—¨â€è¢«å‡»å®åï¼Œå¤–é¢çš„è¿›ä¸æ¥ï¼Œé‡Œé¢çš„å‡ºä¸å»ï¼Œè¿›è€Œé€ æˆäº†æ•´ä¸ªæœåŠ¡çš„ç˜«ç—ªï¼›é€€ä¸€æ­¥è¯´ï¼Œå³ä¾¿ä½ ä¿ä½äº†å¤§é—¨ï¼Œè¿›æ¥çš„æµé‡å¦‚æœä¸åŠ ä»¥ç®¡æ§ï¼Œä»»å‡­å…¶æ¨ªå†²ç›´æ’ï¼Œä¹Ÿä¼šå¯¹ä¾èµ–çš„åŸºç¡€è®¾æ–½æœåŠ¡é€ æˆæ¯ç­æ€§æ‰“å‡»ï¼›å†é€€ä¸€æ­¥è¯´ï¼Œå³ä½¿æˆ‘ä»¬çš„ç³»ç»Ÿæ²¡æœ‰è¢«æ‘§æ¯ï¼Œåœ¨æœºå™¨èµ„æºçš„é«˜è´Ÿè½½ä¸‹ï¼Œæ•´ä¸ªè¯·æ±‚é“¾è·¯çš„å“åº”æ—¶é—´ä¹Ÿä¼šè·Ÿç€æ‹‰é•¿ï¼Œè¿™æ ·å°±ä¼šå¤§å¤§é™ä½ç”¨æˆ·çš„æŠ¢è´­ä½“éªŒï¼Œç´§æ¥ç€å°±ä¼šæ˜¯èœ‚æ‹¥è€Œæ¥çš„å®¢è¯‰ã€‚æœ¬æƒ³é€šè¿‡ç§’æ€æ´»åŠ¨å¸¦æ¥æ­£é¢å½±å“ï¼Œä½†ç»“æœå¯èƒ½æ°æ°ç›¸åã€‚</p><p>æˆ‘è®°å¾—äº¬ä¸œæœ€å¼€å§‹ç”¨ç§’æ€ç³»ç»Ÿå”®å–å£ç½©æ—¶ï¼Œå°±å‡ºç°è¿‡ç±»ä¼¼çš„é—®é¢˜ã€‚æŠ€æœ¯å›¢é˜Ÿå†…éƒ¨äº‹å‰æ²¡æœ‰æ²Ÿé€šå……åˆ†ï¼Œå¯¼è‡´å‡†å¤‡ä¸è¶³ï¼Œå¤§å®¶è°ä¹Ÿæ²¡æœ‰é¢„æ–™åˆ°æ´»åŠ¨å•†å“ä¼šæˆä¸ºçˆ†å“ï¼Œä»¥è‡´æœ€ç»ˆçš„ç”¨æˆ·æŠ¢è´­ä½“éªŒå¾ˆå·®ã€‚å½“ç„¶äº†è¿™ä¹Ÿä¸é™äºäº¬ä¸œï¼Œç›¸ä¿¡æ¯é€¢å¤§ä¿ƒæŠŠç¬æ—¶æµé‡æµ‹è¯•åˆ—ä¸ºé‡ä¸­ä¹‹é‡çš„å¹³å°è¿˜æ˜¯éå¸¸å¤šçš„ã€‚</p><h3>çƒ­ç‚¹æ•°æ®é—®é¢˜</h3><p>é«˜å¹¶å‘ä¸‹ä¸€ä¸ªæ— æ³•é¿å¼€çš„é—®é¢˜ï¼Œå°±æ˜¯çƒ­ç‚¹æ•°æ®é—®é¢˜ã€‚</p><p>ç‰¹åˆ«æ˜¯å¯¹äºç§’æ€æ´»åŠ¨ï¼Œå¤§å®¶æŠ¢è´­çš„éƒ½æ˜¯åŒä¸€ä¸ªå•†å“ï¼Œæ‰€ä»¥è¿™ä¸ªå•†å“ç›´æ¥å°±è¢«æ¨åˆ°äº†çƒ­ç‚¹çš„ä½ç½®ï¼Œä¸ç®¡ä½ æ˜¯ç”¨çš„æ•°æ®åº“ï¼Œè¿˜æ˜¯åˆ†å¸ƒå¼ç¼“å­˜ï¼Œéƒ½æ— æ³•æ”¯æŒå‡ åä¸‡ã€ä¸Šç™¾ä¸‡å¯¹åŒä¸€ä¸ªkeyçš„è¯»å†™ï¼Œä»¥Redisçš„å†™ä¸ºä¾‹ï¼Œæœ€é«˜ä»…å¯æ”¯æŒå‡ ä¸‡çš„TPSã€‚åƒå•†å“åº“å­˜çš„æ§åˆ¶ï¼Œå°±ä¼šæœ‰è¿™ä¸ªé—®é¢˜ã€‚</p><h3>åˆ·å­æµé‡</h3><p>å½“ä½ çš„ç³»ç»Ÿè¢«åˆ·å­ç›¯ä¸Šï¼Œé‚£è¯´æ˜ä½ çš„ç§’æ€ç³»ç»Ÿå·²ç»æœ‰äº†å¾ˆå¤§çš„å½±å“åŠ›äº†ã€‚ä¸€èˆ¬æˆ‘ä»¬æä¾›çš„ç§’æ€å¯¹å¤–æœåŠ¡ï¼Œéƒ½æ˜¯HTTPçš„æœåŠ¡ã€‚ä¸ç®¡ä½ æ˜¯ç”¨H5å®ç°çš„é¡µé¢ï¼Œè¿˜æ˜¯é€šè¿‡å®‰å“æˆ–æ˜¯iOSå®ç°çš„åŸç”Ÿé¡µé¢ï¼Œç‰¹åˆ«æ˜¯H5ï¼Œéƒ½å¯ä»¥ç›´æ¥é€šè¿‡æµè§ˆå™¨æˆ–æ˜¯æŠ“åŒ…å·¥å…·æ‹¿åˆ°è¯·æ±‚æ•°æ®ï¼Œè¿™æ ·åˆ·å­ä¾¿å¯ä»¥è‡ªå·±é€šè¿‡ç¨‹åºå®ç°æ¥å£çš„ç›´æ¥è°ƒç”¨ï¼Œå¹¶å¯ä»¥è®¾ç½®è¯·æ±‚çš„é¢‘ç‡ã€‚</p><p>è¿™æ ·é«˜é¢‘æ¬¡çš„è¯·æ±‚ï¼Œä¼šæŒ¤å æ­£å¸¸ç”¨æˆ·çš„æŠ¢è´­é€šé“ï¼ŒåŒæ—¶ï¼Œåˆ·å­ä¹Ÿè·å¾—äº†æ›´é«˜çš„ç§’æ€æˆåŠŸç‡ã€‚è¿™ä¸ä»…ç ´åäº†å…¬å¹³çš„æŠ¢è´­ç¯å¢ƒï¼Œä¹Ÿç»™ç³»ç»ŸæœåŠ¡å¸¦æ¥äº†å·¨å¤§çš„é¢å¤–è´Ÿæ‹…ã€‚</p><p>å…¶å®æ€»ç»“æ¥è¯´ï¼Œç¬æ—¶çš„å¤§æµé‡å°±æ˜¯æœ€å¤§çš„æŒ‘æˆ˜ï¼Œå½“ä¸šåŠ¡ç³»ç»Ÿæµé‡æˆå‡ ä½•å¢é•¿æ—¶ï¼Œæœ‰äº›ä¸šåŠ¡æ¥å£åŠ æœºå™¨ä¾¿å¯ä»¥æ”¯æŒã€‚ä½†è€ƒè™‘åˆ°æˆæœ¬ä¸æ”¶ç›Šï¼Œåœ¨æœ‰é™çš„èµ„æºä¸‹ï¼Œå¦‚ä½•é€šè¿‡åˆç†çš„ç³»ç»Ÿè®¾è®¡æ¥è¾¾åˆ°é¢„æœŸçš„ä¸šåŠ¡ç›®æ ‡ï¼Œå°±æ˜¾å¾—æ ¼å¤–é‡è¦äº†ã€‚</p><h2>ç§’æ€ç³»ç»Ÿå¦‚ä½•è®¾è®¡</h2><p>æ¸…æ¥šäº†ç§’æ€ç³»ç»Ÿæ‰€é¢ä¸´çš„æŒ‘æˆ˜ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±å¯ä»¥è€ƒè™‘å¦‚ä½•åº”å¯¹äº†ã€‚æ‰€è°“çŸ¥å·±çŸ¥å½¼ï¼Œç™¾æˆ˜ä¸æ®†ã€‚åœ¨è®¾è®¡ç³»ç»Ÿä¹‹å‰ï¼Œæˆ‘ä»¬ä¸å¦¨å…ˆæ¥çœ‹ä¸‹ï¼Œä¸€æ¬¡HTTPè¯·æ±‚æ‰€ç»è¿‡çš„é“¾è·¯è·¯å¾„ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/b0/1b/b00056b2589a86dc6523e248f607f11b.jpg?wh=1918x934\" alt=\"\"></p><p>è¿™æ˜¯ä¸€ä¸ªæ¯”è¾ƒå®è§‚çš„å›¾è°±ï¼Œå¦‚æœæˆ‘ä»¬æä¾›çš„æ˜¯ä¸€ä¸ªHTTPæœåŠ¡ï¼Œé‚£ä¹ˆæ¯ä¸ªå®¢æˆ·ç«¯è¯·æ±‚è¿›æ¥éƒ½è¦ç»è¿‡è¿™äº›é“¾è·¯ï¼Œè€Œæ¯ä¸ªé“¾è·¯èŠ‚ç‚¹çš„ä½œç”¨åˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæˆ‘ä»¬é€ä¸€çœ‹ä¸‹ã€‚</p><p><strong>DNS</strong>ï¼šè´Ÿè´£åŸŸåè§£æï¼Œä¼šå°†ä½ çš„åŸŸåè¯·æ±‚æŒ‡å®šä¸€ä¸ªå®é™…çš„IPæ¥å¤„ç†ï¼ˆäº‹å…ˆé…ç½®å¥½å¤„ç†è¯·æ±‚çš„IPï¼ŒDNSæŒ‰é¡ºåºæŒ‡å®šï¼‰ï¼Œå¹¶ä¸”ä¸€èˆ¬å®¢æˆ·ç«¯æµè§ˆå™¨ä¼šç¼“å­˜è¿™ä¸ªIPä¸€æ®µæ—¶é—´ï¼Œå½“ä¸‹æ¬¡å†è¯·æ±‚æ—¶å°±ç›´æ¥ç”¨è¿™ä¸ªIPæ¥å»ºç«‹è¿æ¥ï¼Œå½“ç„¶å¦‚æœæŒ‡å®šçš„IPæŒ‚äº†ï¼ŒDNSå¹¶ä¸ä¼šè‡ªåŠ¨å‰”é™¤ï¼Œä¸‹æ¬¡ä¾ç„¶ä¼šä½¿ç”¨å®ƒã€‚</p><p><strong>Nginx</strong>ï¼šä¹Ÿå°±æ˜¯ä¸Šé¢çš„è¢«DNSæŒ‡å®šæ¥å¤„ç†è¯·æ±‚çš„IPï¼Œä¸€èˆ¬éƒ½ä¼šè¢«ç”¨æ¥å½“åšåå‘ä»£ç†å’Œè´Ÿè½½å‡è¡¡å™¨ä½¿ç”¨ï¼Œå› ä¸ºå®ƒå…·æœ‰è‰¯å¥½çš„ååæ€§èƒ½ï¼Œæ‰€ä»¥ä¸€èˆ¬ä¹Ÿå¯ä»¥ç”¨æ¥åšé™æ€èµ„æºæœåŠ¡å™¨ã€‚å½“Nginxæ¥æ”¶åˆ°å®¢æˆ·ç«¯è¯·æ±‚åï¼Œæ ¹æ®è´Ÿè½½å‡è¡¡ç®—æ³•ï¼ˆé»˜è®¤æ˜¯è½®è¯¢ï¼‰å°†è¯·æ±‚åˆ†å‘ç»™ä¸‹æ¸¸çš„WebæœåŠ¡ã€‚</p><p><strong>WebæœåŠ¡</strong>ï¼šè¿™ä¸ªå°±æ˜¯æˆ‘ä»¬éƒ½æ¯”è¾ƒç†ŸçŸ¥çš„é¢†åŸŸäº†ï¼Œä¸€èˆ¬æˆ‘ä»¬å†™ä¸šåŠ¡æ¥å£çš„åœ°æ–¹å°±æ˜¯è¿™äº†ï¼Œè¿˜æœ‰æˆ‘ä»¬çš„H5é¡µé¢ï¼Œä¹Ÿéƒ½å¯ä»¥æ”¾åˆ°è¿™é‡Œï¼Œè¿™é‡Œæ˜¯æˆ‘ä»¬åšä¸šåŠ¡èšåˆçš„åœ°æ–¹ï¼Œæä¾›é¡µé¢éœ€è¦çš„æ•°æ®ä»¥åŠå…ƒç´ ã€‚</p><p><strong>RPCæœåŠ¡</strong>ï¼šä¸€èˆ¬æä¾›æ”¯æ’‘ä¸šåŠ¡çš„åŸºç¡€æœåŠ¡ï¼ŒæœåŠ¡åŠŸèƒ½ç›¸å¯¹å•ä¸€ï¼Œå¯çµæ´»ã€å¿«é€Ÿéƒ¨ç½²ï¼Œå¤ç”¨æ€§é«˜ã€‚RPCæœåŠ¡ä¸€èˆ¬éƒ½æ˜¯å…¬å¸å†…éƒ¨æœåŠ¡ï¼Œä»…ä¾›å†…éƒ¨æœåŠ¡é—´è°ƒç”¨ï¼Œä¸å¯¹å¤–å¼€æ”¾ï¼Œå®‰å…¨æ€§é«˜ã€‚</p><p>åœ¨äº†è§£äº†ä¸€æ¬¡è¯·æ±‚æ‰€ç»è¿‡çš„é“¾è·¯èŠ‚ç‚¹åï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å†çœ‹ä¸‹ï¼Œåœ¨ç”¨æˆ·çš„ä¸€æ¬¡æŠ¢è´­è¿‡ç¨‹ä¸­ï¼Œæ¯æ¬¡å’Œç³»ç»Ÿçš„äº¤äº’éƒ½è¦åšä»€ä¹ˆäº‹æƒ…ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/0b/68/0bbe71ceab7c344cyydfc81bb32e8968.jpg?wh=1973x1502\" alt=\"\"></p><p>ç»“åˆä¸Šå›¾æ¥çœ‹ï¼Œå•†è¯¦é¡µéƒ¨åˆ†å’Œæ”¯ä»˜é¡µéƒ¨åˆ†ï¼Œå¯¹äºä¸€èˆ¬å¹³å°æ¥è¯´ï¼Œéƒ½æ˜¯é€šç”¨æ¿å—ï¼Œè€Œä»â€œç‚¹å‡»æŠ¢è´­â€å¼€å§‹åˆ°â€œä¸‹å•æˆåŠŸå¾…æ”¯ä»˜â€ï¼Œè¿™ä¸€æ®µæ˜¯å±äºç§’æ€ç³»ç»Ÿçš„ä¸šåŠ¡èŒƒç•´ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬æ¢³ç†ä¸‹ï¼Œæœ‰å“ªå‡ ä»¶äº‹æƒ…æ˜¯éœ€è¦ç§’æ€ç³»ç»Ÿæ¥åšçš„ã€‚</p><p><strong>1.æä¾›æ´»åŠ¨æ•°æ®</strong>ï¼šæä¾›å‚åŠ ç§’æ€æ´»åŠ¨çš„å•†å“ä¿¡æ¯ï¼Œä¸»è¦ç”¨äºå•†è¯¦é¡µåˆ¤æ–­æ´»åŠ¨çš„å€’è®¡æ—¶ã€å¼€å§‹ã€ç»“æŸç­‰é¡µé¢å±•ç¤ºå’ŒæŠ¢è´­å…¥å£æ ¡éªŒã€‚</p><p><strong>2.æä¾›ç»“ç®—é¡µ</strong>ï¼šå¦‚æœæŠŠç§’æ€åšæˆä¸€ä¸ªå•ç‹¬ä¸šåŠ¡æ¨¡å—ï¼Œå¯è·¨å¹³å°ï¼ˆå®‰å“ã€PCã€iOSï¼‰åµŒå…¥ï¼Œé‚£ä¹ˆå°±éœ€è¦æä¾›ä¸€æ•´å¥—æœåŠ¡ï¼ŒåŒ…æ‹¬H5é¡µé¢ï¼Œä¸»è¦ç”¨äºå±•ç¤ºå•†å“çš„æŠ¢è´­ä¿¡æ¯ï¼ŒåŒ…æ‹¬å•†å“åç§°ã€ä»·æ ¼ã€æŠ¢è´­æ•°é‡ã€åœ°å€ã€æ”¯ä»˜æ–¹å¼ã€è™šæ‹Ÿèµ„äº§ç­‰ç­‰ã€‚</p><p><strong>3.æä¾›ç»“ç®—é¡µé¡µé¢æ¸²æŸ“æ‰€éœ€æ•°æ®</strong>ï¼šåŒ…æ‹¬ç”¨æˆ·ç»´åº¦çš„åœ°å€ã€è™šæ‹Ÿèµ„äº§ç­‰æ•°æ®ï¼Œæ´»åŠ¨ç»´åº¦çš„åç§°ã€ä»·æ ¼ç­‰æ•°æ®ã€‚</p><p><strong>4.æä¾›ä¸‹å•</strong>ï¼šç”¨æˆ·ç»“ç®—é¡µä¸‹å•ï¼Œæä¾›è®¢å•ç”Ÿæˆæˆ–æ˜¯å°†ä¸‹å•æ•°æ®é€ä¼ ç»™ä¸‹æ¸¸ï¼ˆå¦‚æœå¹³å°æœ‰é€šç”¨çš„è®¢å•æ¥å…¥æ¥å£ï¼‰ã€‚</p><p>å½“ç„¶åœ¨è¿™ä¸­é—´ï¼Œè¿˜æœ‰ä¸ªéšå½¢çš„ï¼Œä½†å´æ˜¯éå¸¸é‡è¦çš„æ ¸å¿ƒèƒ½åŠ›ï¼Œé‚£å°±æ˜¯åš<strong>æµé‡çš„ç²¾ç»†åŒ–ç­›é€‰</strong>ï¼Œå°½é‡ç¡®ä¿ä¼ ç»™ä¸‹æ¸¸æ¥å£çš„æµé‡ï¼Œéƒ½æ˜¯ä¼˜è´¨è¯·æ±‚ã€‚</p><p>ä»¥ä¸Šï¼Œæˆ‘ä»¬äº†è§£äº†HTTPè¯·æ±‚æ‰€ç»è¿‡çš„é“¾è·¯ï¼Œä¹Ÿæ€»ç»“äº†ç§’æ€ç³»ç»Ÿæ‰€éœ€è¦æä¾›çš„èƒ½åŠ›ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç€æ‰‹åšç§’æ€ç³»ç»Ÿçš„è®¾è®¡äº†ã€‚</p><p>å¯¹äºç³»ç»Ÿçš„è®¾è®¡ï¼Œæœ‰ä¸€äº›åŸºæœ¬çš„åŸåˆ™ï¼Œæ¯”å¦‚æ ¡éªŒå‰ç½®ã€åˆ†å±‚è¿‡æ»¤ï¼Œå†ç»“åˆæˆ‘ä»¬ä¸Šé¢çš„é“¾è·¯è·¯å¾„å›¾ï¼Œæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/5f/50/5fd7d23c72f02459c9e17yy50d0e2850.jpg?wh=2000x1100\" alt=\"\" title=\"æµé‡æ¼æ–—å›¾\"></p><p>ä¸€èˆ¬æˆ‘ä»¬ä¼šåœ¨<strong>DNSå±‚</strong>åšä¸€äº›å’Œç½‘ç»œç›¸å…³çš„é˜²æ”»å‡»æªæ–½ï¼Œå…¬å¸çš„ç½‘ç»œå®‰å…¨éƒ¨é—¨æœ‰ç»Ÿä¸€çš„ä¸€äº›é…ç½®æªæ–½ï¼Œè¿™å±‚æˆ‘ä»¬æ— æ³•å†™ä¸šåŠ¡ï¼Œä½†æ˜¯å¯ä»¥æ‹¦æˆªä¸€äº›æ”»å‡»è¯·æ±‚ã€‚</p><p>æ¥ä¸‹æ¥åˆ°<strong>Nginxå±‚ã€‚</strong>Nginxä¸ä»…å¯ä»¥ä½œä¸ºåå‘ä»£ç†å’Œè´Ÿè½½å‡è¡¡å™¨ï¼Œä¹Ÿå¯ä»¥åšå¤§æµé‡çš„WebæœåŠ¡å™¨ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ä¸€æ¬¾éå¸¸ä¼˜ç§€çš„é™æ€èµ„æºæœåŠ¡å™¨ã€‚å¦‚æœæŠŠä¸šåŠ¡æ ¡éªŒä¹Ÿæ”¾åˆ°è¿™é‡Œæ¥ï¼Œå°±å¯ä»¥å®ç°æ ¡éªŒå‰ç½®çš„åŸåˆ™äº†å—ï¼Ÿ</p><p>Nginx+Luaè¯´ï¼Œæ²¡é—®é¢˜ã€‚è¿™æ—¶å€™å¯èƒ½ä½ ä¼šæœ‰é¡¾è™‘ï¼ŒNginxæ‹…è´Ÿäº†é‚£ä¹ˆå¤šä»»åŠ¡ï¼Œä¼šè¢«æ‹–å®å—ï¼Ÿä¸ä¼šï¼Œå› ä¸ºNginxå¾ˆå¼ºå¤§ï¼Œèƒ½åŠ›è¶Šå¤§ï¼Œè´£ä»»è¶Šå¤§ã€‚é‚£ä¹ˆNginxä¸ºä»€ä¹ˆæ¯”ApacheæœåŠ¡æ›´å¼ºå¤§å‘¢ï¼Ÿç¬¬1è¯¾æˆ‘ä»¬ç•™ä¸ªæ‚¬å¿µï¼Œåé¢ä¼šè®²ã€‚</p><p>æ¥ä¸‹æ¥å°±åˆ°äº†<strong>WebæœåŠ¡</strong>äº†ã€‚æˆ‘ä»¬åœ¨è¿™é‡Œåšä¸šåŠ¡çš„èšåˆï¼Œæä¾›ç»“ç®—é¡µé¡µé¢æ¸²æŸ“æ‰€éœ€è¦çš„æ•°æ®ä»¥åŠä¸‹å•æ•°æ®é€ä¼ ï¼ŒåŒæ—¶ä¹Ÿè´Ÿè´£æµé‡çš„ç­›é€‰ä¸æ§åˆ¶ï¼Œä¿è¯ä¸‹æ¸¸ç³»ç»Ÿçš„å®‰å…¨ã€‚</p><p>æœ€åå°±æ˜¯<strong>RPCæœåŠ¡ã€‚</strong>å®ƒæä¾›åŸºç¡€æœåŠ¡ï¼Œä¸€èˆ¬ç»è¿‡ä¸Šé¢3å±‚çš„ä¸¥æ ¼æŠŠå…³ï¼Œåˆ°è¿™é‡Œçš„è¯·æ±‚ï¼Œé‡å·²ç»å°å¾ˆå¤šäº†ï¼Œæˆ‘ä»¬å†™ä¸šåŠ¡é€»è¾‘ï¼Œåœ¨æŠ€æœ¯ä¸Šä¹Ÿæœ‰æ›´å¤šçš„å‘æŒ¥ç©ºé—´ã€‚</p><h2>å°ç»“</h2><p>æƒ³è¦è®¾è®¡ç§’æ€ç³»ç»Ÿï¼Œé¦–å…ˆå¾—äº†è§£ç§’æ€ï¼ŒåŒ…æ‹¬ä¸šåŠ¡å’ŒæŠ€æœ¯å±‚é¢ã€‚ä»ä¸šåŠ¡ä¸Šæ¥è¯´ï¼Œæˆ‘ä»¬äº†è§£åˆ°ç§’æ€ä¸€èˆ¬é€‚ç”¨äºç¨€ç¼ºå•†å“çš„å”®å–ï¼Œèƒ½å¤Ÿèšé›†äººæ°”ï¼Œå¯ä»¥ç»™å¹³å°å¸¦æ¥å…³æ³¨åº¦å’Œæµé‡ã€‚åŒæ—¶é…åˆç§’æ€çš„è¥é”€æ‰‹æ®µä¹Ÿæœ‰å¾ˆå¤šç§ï¼Œå¯ä»¥ç»“åˆé¢„çº¦ã€é™è´­ã€é£æ§ç­‰åŠŸèƒ½æ¨¡å—å¼€å±•æ´»åŠ¨ï¼Œä»¥åº”å¯¹ä¸åŒçš„ä¸šåŠ¡åœºæ™¯ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬ä¹Ÿå½’çº³äº†ç§’æ€éœ€è¦æä¾›çš„èƒ½åŠ›ï¼Œå³æ´»åŠ¨æ•°æ®ã€æ´»åŠ¨ç»“ç®—é¡µã€æ´»åŠ¨æå•ç­‰èƒ½åŠ›ã€‚</p><p>ä»æŠ€æœ¯å±‚é¢ä¸Šæ¥è¯´ï¼Œæˆ‘ä»¬éœ€è¦äº†è§£HTTPæœåŠ¡çš„è¯·æ±‚é“¾è·¯è·¯å¾„ï¼Œå³è¯·æ±‚ä»DNSåˆ°Nginxï¼ŒNginxå¤„ç†ååˆ†å‘ç»™WebæœåŠ¡ï¼ŒWebæœåŠ¡å†èšåˆè°ƒç”¨ä¸‹æ¸¸çš„RPCæœåŠ¡ã€‚æ¯ä¸ªé“¾è·¯èŠ‚ç‚¹éƒ½æœ‰å®ƒæ“…é•¿åšçš„äº‹æƒ…ã€‚åªæœ‰æ¸…æ¥šäº†è¿™äº›ï¼Œæˆ‘ä»¬æ‰èƒ½å¤Ÿå°†ç§’æ€ç³»ç»Ÿæä¾›çš„ä¸šåŠ¡åŠŸèƒ½ï¼ŒæŒ‰ä¸åŒé˜¶æ®µã€ä¸åŒå“åº”ï¼Œåˆç†åœ°æ‹†åˆ†åˆ°ä¸åŒçš„é“¾è·¯å±‚çº§æ¥å®ç°ï¼Œä»¥ç¬¦åˆæˆ‘ä»¬æ ¡éªŒå‰ç½®ã€åˆ†å±‚è¿‡æ»¤ã€ç¼©çŸ­é“¾è·¯çš„è®¾è®¡åŸåˆ™ï¼Œå¹¶èƒ½å¤Ÿä»å®¹åº”å¯¹ç§’æ€ç³»ç»Ÿæ‰€é¢ä¸´çš„ç¬æ—¶å¤§æµé‡ã€çƒ­ç‚¹æ•°æ®ã€é»„ç‰›åˆ·å­ç­‰å„ç§æŒ‘æˆ˜ã€‚</p><p>å½“ç„¶ï¼Œè¿™åªæ˜¯ç¬¬ä¸€æ­¥ï¼Œåœ¨æ¥ä¸‹æ¥è¯¾ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†å®é™…å¼€å‘ä¸€ä¸ªç§’æ€ç³»ç»Ÿï¼Œå¹¶å°†æˆ‘ä»¥å¾€åœ¨å®é™…ç”Ÿäº§ä¸­é‡åˆ°çš„é—®é¢˜ä»¥åŠç§¯ç´¯çš„å„ç¯èŠ‚ä¼˜åŒ–æŠ€æœ¯ï¼Œä¸€ä¸€åˆ†äº«ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>è¿™èŠ‚è¯¾æˆ‘ä»¬ä»‹ç»äº†ç§’æ€ç³»ç»Ÿé¢ä¸´çš„æŒ‘æˆ˜ï¼Œé™¤äº†é‡ç‚¹ä»‹ç»çš„ç¬æ—¶æµé‡ä»¥å¤–ï¼Œä½ è§‰å¾—å¯¹ç§’æ€ç³»ç»Ÿè€Œè¨€ï¼Œè¿˜æœ‰å“ªäº›æ–¹é¢ä¹Ÿæ˜¯æ¯”è¾ƒé‡è¦çš„å‘¢ï¼Ÿæˆ‘ä»¬åˆè¯¥é€šè¿‡æ€æ ·çš„è®¾è®¡æ¥è§£å†³å‘¢ï¼Ÿ</p><p>ä»¥ä¸Šå°±æ˜¯è¿™èŠ‚è¯¾çš„å…¨éƒ¨å†…å®¹ï¼Œæ¬¢è¿ä½ åœ¨è¯„è®ºåŒºå’Œæˆ‘è®¨è®ºé—®é¢˜ï¼Œäº¤æµç»éªŒï¼</p>","neighbors":{"left":{"article_title":"å¼€ç¯‡è¯ï½œå¦‚ä½•è®¾è®¡ä¸€ä¸ªé«˜å¹¶å‘ã€é«˜å¯ç”¨çš„ç§’æ€ç³»ç»Ÿï¼Ÿ","id":420765},"right":{"article_title":"02ï½œè“„åŠ¿å¾…å‘ï¼šç§’æ€ç³»ç»Ÿæ¶æ„è®¾è®¡å’Œç¯å¢ƒå‡†å¤‡","id":422016}},"comments":[{"had_liked":false,"id":314464,"user_name":"é»„åº","can_delete":false,"product_type":"c1","uid":2037282,"ip_address":"","ucode":"C8C2749E2DE72B","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erpYAcOqrNNxmMuKsd6Dh69BzxiaXjJRh6IMnQlxOqBFiae1EMic32Wv6aFESWytliaL7uniaZ4DgNUwxg/132","comment_is_top":false,"comment_ctime":1633086982,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"74647531014","product_id":100091501,"comment_content":"æ ¹æ®è‡ªå·±å¯¹äºç§’æ€ä¸šåŠ¡çš„äº†è§£ï¼Œé™¤äº†ç¬æ—¶çš„æµé‡ï¼Œè¿˜éœ€è¦è€ƒè™‘å¦‚ä¸‹çš„ç‚¹ï¼š<br>1ï¼‰ç§’æ€ç³»ç»Ÿä»å…¥å£åˆ°æµé‡éƒ½éœ€è¦ä¸æ™®é€šçš„å…¥å£è¿›è¡Œéš”ç¦»ï¼Œé˜²æ­¢ç³»ç»Ÿé—´çš„å½±å“ï¼›<br>2ï¼‰éœ€è¦å®ç°å¤šåœ°å¤šæœºæˆ¿éƒ¨ç½²ï¼Œä¿è¯ç³»ç»Ÿçš„é«˜å¯ç”¨ï¼›<br>3ï¼‰å®ç°åˆ†å¸ƒå¼äº‹åŠ¡ï¼Œä¿è¯ç”¨æˆ·ä¸‹å•ã€åº“å­˜ã€æ‰£æ¬¾ç­‰æ“ä½œçš„äº‹åŠ¡æ€§ï¼Œé˜²æ­¢å‡ºç°è¶…ä¹°è¶…å–é—®é¢˜ï¼›<br>4ï¼‰å¢åŠ é£æ§èƒ½åŠ›ï¼Œé˜²åˆ·ï¼›<br>5ï¼‰å¢åŠ é™æµã€ç†”æ–­å’Œé™çº§æ–¹æ¡ˆï¼›<br>6ï¼‰çƒ­ç‚¹å•†å“çš„è‡ªåŠ¨å‘ç°ä¸è‡ªåŠ¨é¢„è­¦æœºåˆ¶ï¼›<br>7ï¼‰äººå·¥è¡¥å¿æœºåˆ¶","like_count":17,"discussions":[{"author":{"id":2940341,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/blRHZZricfN9ib8MP0CICuPDBAKDXIUmhSQd4GQZzKduib51lRjRkWibAvXgcHrWTNYUSpKItiaWQd2Wgh0SDo4j6ag/132","nickname":"Geek_c96346","note":"","ucode":"7BFE8BDFFFB8E9","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":555409,"discussion_content":"wowï¼Œå’‹åŠ å¥½å‹\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646896082,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":313279,"user_name":"å½¼å²¸","can_delete":false,"product_type":"c1","uid":2502617,"ip_address":"","ucode":"4FBA33D3E71119","user_header":"https://static001.geekbang.org/account/avatar/00/26/2f/d9/fa6b654a.jpg","comment_is_top":false,"comment_ctime":1632362981,"is_pvip":false,"replies":[{"id":"113493","content":"éƒ½ä¼šè®²åˆ°ï¼Œæ•¬è¯·æœŸå¾…ï¼","user_name":"ç¼–è¾‘å›å¤","user_name_real":"ç‹å†¬é’","uid":"1356014","ctime":1632377396,"ip_address":"","comment_id":313279,"utype":2}],"discussion_count":1,"race_medal":0,"score":"27402166757","product_id":100091501,"comment_content":"1ï¼šç§’æ€ç³»ç»Ÿå’Œå…¶å®ƒä¸šåŠ¡ç³»ç»Ÿéš”ç¦»ã€‚<br>2ï¼šæ‰£å‡åº“å­˜ï¼Œä¸èƒ½è¶…å–ã€‚<br>3ï¼šé˜²æ­¢éæ³•ç”¨æˆ·åˆ·å•ã€‚<br>4ï¼šé™çº§ï¼Œç†”æ–­ã€‚","like_count":6,"discussions":[{"author":{"id":1356014,"avatar":"https://static001.geekbang.org/account/avatar/00/14/b0/ee/d0871efd.jpg","nickname":"å†¬é’","note":"","ucode":"14576781B499FB","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527300,"discussion_content":"éƒ½ä¼šè®²åˆ°ï¼Œæ•¬è¯·æœŸå¾…ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632377396,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":4}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":313926,"user_name":"James_Shangguan","can_delete":false,"product_type":"c1","uid":1262808,"ip_address":"","ucode":"F5855BC008DDEA","user_header":"https://static001.geekbang.org/account/avatar/00/13/44/d8/1a1761f9.jpg","comment_is_top":false,"comment_ctime":1632744357,"is_pvip":false,"replies":[{"id":"116186","content":"åé¢çš„ç« èŠ‚ä¼šæœ‰ä»‹ç»å“¦","user_name":"ä½œè€…å›å¤","user_name_real":"Zhidong","uid":"1222758","ctime":1636352795,"ip_address":"","comment_id":313926,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23107580837","product_id":100091501,"comment_content":"ç§’æ€ç³»ç»Ÿä¼šè¿›è¡Œå‹æµ‹å—ï¼Ÿå‹æµ‹å€¼è¦å¦‚ä½•è¯„ä¼°å’Œè®¾å®šï¼Ÿå¸Œæœ›è€å¸ˆæŒ‡ç‚¹","like_count":5,"discussions":[{"author":{"id":1222758,"avatar":"https://static001.geekbang.org/account/avatar/00/12/a8/66/02ab2ce7.jpg","nickname":"Zhidong","note":"","ucode":"AEBBCE20C242C3","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527521,"discussion_content":"åé¢çš„ç« èŠ‚ä¼šæœ‰ä»‹ç»å“¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636352795,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":314414,"user_name":"éå¢¨","can_delete":false,"product_type":"c1","uid":2739046,"ip_address":"","ucode":"6C2F75B04DA1EB","user_header":"https://static001.geekbang.org/account/avatar/00/29/cb/66/c34226a9.jpg","comment_is_top":false,"comment_ctime":1633009011,"is_pvip":false,"replies":[{"id":"114764","content":"å¾ˆèµï¼Œä½ å›ç­”çš„è¿™äº›ç‚¹åœ¨ç§’æ€ç³»ç»Ÿé‡Œéƒ½ä¼šç”¨åˆ°","user_name":"ä½œè€…å›å¤","user_name_real":"Zhidong","uid":"1222758","ctime":1634633731,"ip_address":"","comment_id":314414,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14517910899","product_id":100091501,"comment_content":"1ã€ç¬é—´é«˜å¹¶å‘ï¼›<br>2ã€æ´»åŠ¨é¡µé¢é™æ€åŒ–ï¼ˆå‡å°‘ä¸å¿…è¦çš„æœåŠ¡ç«¯è¯·æ±‚ï¼‰ï¼›<br>3ã€ä½¿ç”¨CDNåŠ é€Ÿï¼ˆå…¨ç§°æ˜¯Content Delivery Networkï¼Œå³å†…å®¹åˆ†å‘ç½‘ç»œï¼‰ï¼Œé™ä½ç½‘ç»œæ‹¥å¡ï¼Œæé«˜ç”¨æˆ·è®¿é—®å“åº”é€Ÿåº¦å’Œå‘½ä¸­ç‡ï¼›<br>4ã€å¯ä»¥ä½¿ç”¨åˆ†å¸ƒå¼é”ã€ç¼“å­˜é¢„çƒ­ç­‰æ–¹å¼é¿å…å¤§é‡è¯·æ±‚åŒæ—¶è®¿é—®æ•°æ®åº“ï¼Œ<br>5ã€æ‰£å‡åº“å­˜é—®é¢˜ï¼Œå¯ä»¥é€šè¿‡åœ¨redisä¸­å†™luaè„šæœ¬æ¥é¿å…è¶…å–ç­‰é—®é¢˜<br>6ã€é™æµï¼šå¯¹åŒä¸€ç”¨æˆ·é™æµã€å¯¹åŒä¸€ipé™æµã€å¯¹æ¥å£é™æµã€åŠ éªŒè¯ç ã€æé«˜ä¸šåŠ¡é—¨æ§›ç­‰","like_count":3,"discussions":[{"author":{"id":1222758,"avatar":"https://static001.geekbang.org/account/avatar/00/12/a8/66/02ab2ce7.jpg","nickname":"Zhidong","note":"","ucode":"AEBBCE20C242C3","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527678,"discussion_content":"å¾ˆèµï¼Œä½ å›ç­”çš„è¿™äº›ç‚¹åœ¨ç§’æ€ç³»ç»Ÿé‡Œéƒ½ä¼šç”¨åˆ°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634633731,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":313822,"user_name":"èŒƒ","can_delete":false,"product_type":"c1","uid":1574450,"ip_address":"","ucode":"D115514B2AA5CC","user_header":"https://static001.geekbang.org/account/avatar/00/18/06/32/3de6a189.jpg","comment_is_top":false,"comment_ctime":1632700318,"is_pvip":false,"replies":[{"id":"113848","content":"è¦æœ‰çƒ­ç‚¹å•†å“çš„è‡ªåŠ¨å‘ç°å’Œé¢„è­¦æœºåˆ¶ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Zhidong","uid":"1222758","ctime":1632981320,"ip_address":"","comment_id":313822,"utype":1}],"discussion_count":2,"race_medal":0,"score":"14517602206","product_id":100091501,"comment_content":"ä»¥ä¸Šçš„éƒ½æ˜¯åŸºäºæ˜ç¡®æœ‰å•†å“è¦ç§’æ€è€Œå»æ­å»ºç³»ç»Ÿã€‚è€Œå¯¹äºæŸäº›çªç„¶ç«çˆ†çš„å•†å“ï¼ˆé¢„æœŸä¹‹å¤–çš„ï¼‰ï¼Œç³»ç»Ÿå±‚é¢åº”è¯¥åšå“ªäº›é¢„å¤‡æ–¹æ¡ˆï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1222758,"avatar":"https://static001.geekbang.org/account/avatar/00/12/a8/66/02ab2ce7.jpg","nickname":"Zhidong","note":"","ucode":"AEBBCE20C242C3","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527481,"discussion_content":"è¦æœ‰çƒ­ç‚¹å•†å“çš„è‡ªåŠ¨å‘ç°å’Œé¢„è­¦æœºåˆ¶ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632981320,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1297887,"avatar":"https://static001.geekbang.org/account/avatar/00/13/cd/df/c520d418.jpg","nickname":"è‘£ä¿Šä¿Š","note":"","ucode":"732300A779660B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":399542,"discussion_content":"å¼¹æ€§æ‰©å®¹","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1632988253,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":313581,"user_name":"lingo","can_delete":false,"product_type":"c1","uid":1263523,"ip_address":"","ucode":"A891205B8F6C58","user_header":"https://static001.geekbang.org/account/avatar/00/13/47/a3/588eed0a.jpg","comment_is_top":false,"comment_ctime":1632535884,"is_pvip":false,"replies":[{"id":"113846","content":"ä½ çš„ç†è§£æ˜¯å¯¹çš„ï¼Œä¸»è¦æ˜¯è¯»æµé‡ï¼Œä¸‹å•ä¹Ÿä¼šé™æµï¼Œä½†ç»è¿‡å‰é¢çš„å±‚å±‚ä¿æŠ¤ä¹‹åï¼Œä¸‹å•çš„æµé‡æ˜¯å¯æ§çš„","user_name":"ä½œè€…å›å¤","user_name_real":"Zhidong","uid":"1222758","ctime":1632981008,"ip_address":"","comment_id":313581,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10222470476","product_id":100091501,"comment_content":"è€å¸ˆï¼Œæµé‡æ¿€å¢å’Œçƒ­ç‚¹éƒ½æ˜¯ ä¸»è¦æ˜¯è¯» è¯·æ±‚å—ï¼Ÿ<br>ä¸‹å•å’Œå’ŒæŠ¢è´­ è¿™ä¸¤ä¸ªå†™ æ“ä½œ ä¹‹å‰éƒ½ä¼šå¯¹å…¶è¿›è¡Œé™æµå— ï¼Ÿæ˜¯å¯ä»¥ç†è§£ä¸º æŠ—ä½å¤§é‡æŸ¥è¯¢  å‡ç¼“å†™åˆ°æ•°æ®åº“çš„å‹åŠ›","like_count":2,"discussions":[{"author":{"id":1222758,"avatar":"https://static001.geekbang.org/account/avatar/00/12/a8/66/02ab2ce7.jpg","nickname":"Zhidong","note":"","ucode":"AEBBCE20C242C3","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527399,"discussion_content":"ä½ çš„ç†è§£æ˜¯å¯¹çš„ï¼Œä¸»è¦æ˜¯è¯»æµé‡ï¼Œä¸‹å•ä¹Ÿä¼šé™æµï¼Œä½†ç»è¿‡å‰é¢çš„å±‚å±‚ä¿æŠ¤ä¹‹åï¼Œä¸‹å•çš„æµé‡æ˜¯å¯æ§çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632981008,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":336127,"user_name":"YX","can_delete":false,"product_type":"c1","uid":2636178,"ip_address":"","ucode":"CC108CCE845EAE","user_header":"https://static001.geekbang.org/account/avatar/00/28/39/92/88ed94f2.jpg","comment_is_top":false,"comment_ctime":1645946686,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5940913982","product_id":100091501,"comment_content":"**1ï¼‰ç§’æ€ä¸šåŠ¡é€»è¾‘æ˜¯æ€æ ·çš„ï¼Ÿ**<br><br>- å•†å®¶æ‹¿å‡ºç¨€ç¼ºå•†å“ï¼Œäº‹å…ˆåœ¨ç§’æ€çš„è¿è¥ç³»ç»Ÿä¸­è®¾ç½®å¥½æ´»åŠ¨çš„å¼€å§‹ã€ç»“æŸæ—¶é—´ï¼Œä»¥åŠæŠ•å…¥çš„åº“å­˜ã€‚<br>- æ´»åŠ¨å¼€å§‹ä¹‹åï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡æ´»åŠ¨æŠ¢è´­å…¥å£ï¼ˆå•†å“è¯¦æƒ…é¡µæˆ–è€…é“¾æ¥ï¼‰ï¼Œè¿›å…¥åˆ°æ´»åŠ¨çš„ç»“ç®—é¡µï¼Œç„¶åç‚¹å‡»ä¸‹å•ï¼Œå®Œæˆå•†å“çš„æŠ¢è´­<br><br>![img](æ‰‹æŠŠæ‰‹å¸¦ä½ æ­å»ºç§’æ€ç³»ç»Ÿ.assets&#47;380d9ea5bbaeb991d2fcdf87bd1bd773.jpg)<br><br>**2ï¼‰å¦‚æœæƒ³å¯¹æµé‡æœ‰ä¸ªé¢„æœŸä¸Šé™ï¼Œæ–¹ä¾¿åšå¤‡æˆ˜å·¥ä½œï¼Œé‚£ä¹ˆåº”è¯¥æ€ä¹ˆåšï¼Ÿ**<br><br>- åŠ ä¸Šé¢„çº¦åŠŸèƒ½ï¼Œé¢„çº¦çš„æ‰æœ‰æŠ¢è´­èµ„æ ¼<br><br>**3ï¼‰å¦‚æœä¸šåŠ¡åœºæ™¯æ›´åŠ å¤æ‚æ€ä¹ˆåŠï¼Ÿ**<br><br>- è”åˆé£æ§ï¼Œåœ¨å‚åŠ æ´»åŠ¨æ—¶æ ¡éªŒç”¨æˆ·èµ„è´¨ï¼Œè¸¢æ‰é»„ç‰›ä»¥åŠæœ‰è¿‡ä¸è‰¯è¡Œä¸ºçš„äººï¼Œå°½é‡å°†èµ„æºç»™åˆ°ä¼˜è´¨ç”¨æˆ·ã€‚<br><br>**4ï¼‰å¦‚æœä¸šåŠ¡å†å¤æ‚äº›å‘¢ï¼Ÿ**<br><br>- å¯ä»¥æ­é…é™è´­å¼€å±•æ´»åŠ¨ï¼Œæ§åˆ¶ä¸ªäººç»´åº¦ä¸‹ä¸€æ®µæ—¶é—´å†…çš„è´­ä¹°æ•°ï¼Œè®©æŠ¢è´­æˆåŠŸçš„å¿«ä¹è§¦è¾¾æ›´å¤šçš„äººã€‚<br><br>**5ï¼‰ç§’æ€ç³»ç»Ÿé¢ä¸´çš„æŒ‘æˆ˜æœ‰å“ªäº›ï¼Ÿ**<br><br>- å·¨å¤§çš„ç¬æ—¶æµé‡<br>  -  çŸ­çŸ­å‡ ç§’ä¸­ï¼Œå‡ åä¸Šç™¾ä¸‡çš„æµé‡<br>- çƒ­ç‚¹æ•°æ®é—®é¢˜<br>  - çƒ­é—¨å•†å“æ•°æ®åº“çš„å¹¶å‘è®¿é—®é‡å¤ªå¤§ï¼Œæ•°æ®åº“ï¼Œè¿˜æ˜¯åˆ†å¸ƒå¼ç¼“å­˜ï¼Œéƒ½æ— æ³•æ”¯æŒå‡ åä¸‡ã€ä¸Šç™¾ä¸‡å¯¹åŒä¸€ä¸ª key çš„è¯»å†™<br>- åˆ·å­æµé‡<br>  -  åˆ·å­é€šè¿‡æµè§ˆå™¨æˆ–æ˜¯æŠ“åŒ…å·¥å…·æ‹¿åˆ°è¯·æ±‚æ•°æ®ï¼Œè‡ªå·±é€šè¿‡ç¨‹åºå®ç°æ¥å£çš„ç›´æ¥è°ƒç”¨ï¼Œå¹¶å¯ä»¥è®¾ç½®è¯·æ±‚çš„é¢‘ç‡ã€‚<br><br>**6ï¼‰ç§’æ€ç³»ç»Ÿå¦‚ä½•è®¾è®¡ï¼Ÿ**<br>**6.1ï¼‰ä¸€æ¬¡ HTTP è¯·æ±‚æ‰€ç»è¿‡çš„é“¾è·¯è·¯å¾„æœ‰å“ªäº›ï¼Ÿ**<br><br>**6.1.1ï¼‰DNSçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ**<br><br>- åŸŸåè§£æï¼Œå°†ä½ çš„åŸŸåè¯·æ±‚æŒ‡å®šä¸€ä¸ªå®é™…çš„IPæ¥å¤„ç†ï¼Œä¸€èˆ¬æµè§ˆå™¨ä¼šç¼“å­˜è¿™ä¸ªIPä¸€æ®µæ—¶é—´ã€‚ä¸‹æ¬¡è¯·æ±‚æ¥çš„æ—¶å€™ç›´æ¥ç”¨è¿™ä¸ªIPæ¥å»ºç«‹è¿æ¥ï¼Œå°±ä¸ç”¨éº»çƒ¦DNSäº†ã€‚<br><br>**6.1.2ï¼‰Nginxçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ**<br><br>è¢« DNS æŒ‡å®šæ¥å¤„ç†è¯·æ±‚çš„ IP<br><br>- åå‘ä»£ç†<br>- è´Ÿè½½å‡è¡¡<br>- ä¹Ÿå¯ä»¥ç”¨æ¥åšé™æ€èµ„æºæœåŠ¡å™¨<br><br>- Nginx æ¥æ”¶åˆ°å®¢æˆ·ç«¯è¯·æ±‚åï¼Œæ ¹æ®è´Ÿè½½å‡è¡¡ç®—æ³•ï¼ˆé»˜è®¤æ˜¯è½®è¯¢ï¼‰å°†è¯·æ±‚åˆ†å‘ç»™ä¸‹æ¸¸çš„ Web æœåŠ¡ã€‚<br><br>**6.1.2ï¼‰Web æœåŠ¡çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ**<br><br>- å®é™…ä¸šåŠ¡çš„å¢åˆ æ”¹æŸ¥éƒ½åœ¨è¿™é‡Œ<br><br>**6.1.3ï¼‰RPC æœåŠ¡çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ**<br><br>- åŸºç¡€ä¸ç‰¢ï¼Œåœ°åŠ¨å±±æ‘‡ã€‚è¿™ä¸ªæ˜¯å®é™…ä¸šåŠ¡çš„åœ°åŸºã€‚ä»…ä¾›å†…éƒ¨æœåŠ¡é—´è°ƒç”¨ï¼Œä¸å¯¹å¤–å¼€æ”¾ï¼Œå®‰å…¨æ€§é«˜ã€‚<br><br>**7ï¼‰ç”¨æˆ·çš„ä¸€æ¬¡æŠ¢è´­è¿‡ç¨‹ä¸­ï¼Œæ¯æ¬¡å’Œç³»ç»Ÿçš„äº¤äº’éƒ½è¦åšä»€ä¹ˆäº‹æƒ…ï¼Ÿ**<br><br>å•†è¯¦é¡µéƒ¨åˆ†å’Œæ”¯ä»˜é¡µéƒ¨åˆ†ï¼Œå¯¹äºä¸€èˆ¬å¹³å°æ¥è¯´ï¼Œéƒ½æ˜¯é€šç”¨æ¿å—ï¼Œè€Œä»â€œç‚¹å‡»æŠ¢è´­â€å¼€å§‹åˆ°â€œä¸‹å•æˆåŠŸå¾…æ”¯ä»˜â€ï¼Œè¿™ä¸€æ®µæ˜¯å±äºç§’æ€ç³»ç»Ÿçš„ä¸šåŠ¡èŒƒç•´ã€‚<br><br>**8)å“ªå‡ ä»¶äº‹æƒ…æ˜¯éœ€è¦ç§’æ€ç³»ç»Ÿæ¥åšçš„?**<br><br>- æä¾›æ´»åŠ¨æ•°æ®<br>- æä¾›ç»“ç®—é¡µ<br>- æä¾›ç»“ç®—é¡µé¡µé¢æ¸²æŸ“æ‰€éœ€æ•°æ®<br>- æä¾›ä¸‹å•ï¼š<br><br>**9ï¼‰ç§’æ€ç³»ç»Ÿè®¾è®¡çš„åŸºæœ¬åŸåˆ™æœ‰å“ªäº›ï¼Ÿ**<br><br>- æ ¡éªŒå‰ç½®<br><br>- åˆ†å±‚è¿‡æ»¤<br><br>","like_count":1},{"had_liked":false,"id":313195,"user_name":"yz","can_delete":false,"product_type":"c1","uid":1256001,"ip_address":"","ucode":"D646E3BDD795A2","user_header":"https://static001.geekbang.org/account/avatar/00/13/2a/41/6116db1b.jpg","comment_is_top":false,"comment_ctime":1632306312,"is_pvip":false,"replies":[{"id":"113489","content":"åé¢ä¼šè®²åˆ°ï¼Œæ•¬è¯·æœŸå¾…ï¼","user_name":"ç¼–è¾‘å›å¤","user_name_real":"ç‹å†¬é’","uid":"1356014","ctime":1632377242,"ip_address":"","comment_id":313195,"utype":2}],"discussion_count":1,"race_medal":0,"score":"5927273608","product_id":100091501,"comment_content":"ç¬æ—¶æµé‡ä¹‹åçš„æ•°æ®æ€ä¹ˆå­˜å‚¨ï¼Œå¦‚ä½•åšè¡¥å¿","like_count":1,"discussions":[{"author":{"id":1356014,"avatar":"https://static001.geekbang.org/account/avatar/00/14/b0/ee/d0871efd.jpg","nickname":"å†¬é’","note":"","ucode":"14576781B499FB","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527270,"discussion_content":"åé¢ä¼šè®²åˆ°ï¼Œæ•¬è¯·æœŸå¾…ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632377242,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":4}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":357258,"user_name":"æ¸¸å­","can_delete":false,"product_type":"c1","uid":1449109,"ip_address":"å¹¿ä¸œ","ucode":"61E889178E7DF7","user_header":"https://static001.geekbang.org/account/avatar/00/16/1c/95/d25d96d7.jpg","comment_is_top":false,"comment_ctime":1663123024,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1663123024","product_id":100091501,"comment_content":"nginxå†å¼ºï¼Œä¸€èˆ¬å•æœºåªæ”¯æŒ5ä¸‡å¹¶å‘ï¼Ÿåƒä¸‡çº§å¹¶å‘çš„è¯·æ±‚ï¼Œéœ€è¦é€šè¿‡DNSåˆ†æµï¼Œå’Œä¸“ç”¨LBæœåŠ¡å™¨å§ï¼Ÿ","like_count":0},{"had_liked":false,"id":313499,"user_name":"éª†é©¼ã€","can_delete":false,"product_type":"c1","uid":1443660,"ip_address":"","ucode":"252ECDB1524867","user_header":"https://static001.geekbang.org/account/avatar/00/16/07/4c/f9852f8f.jpg","comment_is_top":false,"comment_ctime":1632467143,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1632467143","product_id":100091501,"comment_content":"nginx+luaè®©æˆ‘æƒ³èµ·äº†apisixç½‘å…³","like_count":0,"discussions":[{"author":{"id":1667175,"avatar":"https://static001.geekbang.org/account/avatar/00/19/70/67/0c1359c2.jpg","nickname":"qinsi","note":"","ucode":"090D9C4068FF12","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":397868,"discussion_content":"ä¸æ˜¯openrestyå—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632688157,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":313400,"user_name":"ğŸ”¥ Amber_Mao","can_delete":false,"product_type":"c1","uid":2259037,"ip_address":"","ucode":"0CA0D8EE4A2C59","user_header":"https://static001.geekbang.org/account/avatar/00/22/78/5d/39975064.jpg","comment_is_top":false,"comment_ctime":1632407107,"is_pvip":false,"replies":[{"id":"113502","content":"15èŠ‚è¯¾ï¼Œå¹³å‡æ¯èŠ‚è¯¾4500å­—ï¼Œ15åˆ†é’Ÿå·¦å³çš„éŸ³é¢‘ã€‚è”ç³»é”€å”®æ˜¯è¦ï¼Ÿä¹°è¯¾ï¼Ÿå¯ä»¥ç›´æ¥ä»˜è´¹è´­ä¹°çš„ã€‚","user_name":"ç¼–è¾‘å›å¤","user_name_real":"ç‹å†¬é’","uid":"1356014","ctime":1632408944,"ip_address":"","comment_id":313400,"utype":2}],"discussion_count":1,"race_medal":0,"score":"1632407107","product_id":100091501,"comment_content":"è¯·é—®æ•´ä¸ªè¯¾ç¨‹æ—¶é•¿å¤šå°‘ï¼Ÿæ€ä¹ˆè”ç³»é”€å”®å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1356014,"avatar":"https://static001.geekbang.org/account/avatar/00/14/b0/ee/d0871efd.jpg","nickname":"å†¬é’","note":"","ucode":"14576781B499FB","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527338,"discussion_content":"15èŠ‚è¯¾ï¼Œå¹³å‡æ¯èŠ‚è¯¾4500å­—ï¼Œ15åˆ†é’Ÿå·¦å³çš„éŸ³é¢‘ã€‚è”ç³»é”€å”®æ˜¯è¦ï¼Ÿä¹°è¯¾ï¼Ÿå¯ä»¥ç›´æ¥ä»˜è´¹è´­ä¹°çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632408944,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":4}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":313399,"user_name":"é£è½»æ‰¬","can_delete":false,"product_type":"c1","uid":1542987,"ip_address":"","ucode":"DB972F2DF059C4","user_header":"https://static001.geekbang.org/account/avatar/00/17/8b/4b/15ab499a.jpg","comment_is_top":false,"comment_ctime":1632407005,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1632407005","product_id":100091501,"comment_content":"éå¸¸æœŸå¾…ã€‚å¾ˆæƒ³çŸ¥é“ä¸ºä»€ä¹ˆç§’æ€ç³»ç»Ÿä¸€å®šè¦å¼•å…¥nginx","like_count":0,"discussions":[{"author":{"id":2758498,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/17/62/3ef473e7.jpg","nickname":"ç¿ç‘æ¬£å›¾å…¬å…±","note":"","ucode":"97EFD456CB05B5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":397444,"discussion_content":"åº”è¯¥è¿™ä¹ˆé—®ï¼Œè¿˜æœ‰ä»€ä¹ˆé¢å‘Cç«¯ç”¨æˆ·çš„ç³»ç»Ÿï¼Œå‰é¢æ²¡æœ‰å¼•å…¥nginx","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1632622406,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}