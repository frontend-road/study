{"id":198614,"title":"45 | å·¥å‚æ¨¡å¼ï¼ˆä¸‹ï¼‰ï¼šå¦‚ä½•è®¾è®¡å®ç°ä¸€ä¸ªDependency Injectionæ¡†æ¶ï¼Ÿ","content":"<p>åœ¨ä¸Šä¸€èŠ‚è¯¾æˆ‘ä»¬è®²åˆ°ï¼Œå½“åˆ›å»ºå¯¹è±¡æ˜¯ä¸€ä¸ªâ€œå¤§å·¥ç¨‹â€çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šé€‰æ‹©ä½¿ç”¨å·¥å‚æ¨¡å¼ï¼Œæ¥å°è£…å¯¹è±¡å¤æ‚çš„åˆ›å»ºè¿‡ç¨‹ï¼Œå°†å¯¹è±¡çš„åˆ›å»ºå’Œä½¿ç”¨åˆ†ç¦»ï¼Œè®©ä»£ç æ›´åŠ æ¸…æ™°ã€‚é‚£ä½•ä¸ºâ€œå¤§å·¥ç¨‹â€å‘¢ï¼Ÿä¸Šä¸€èŠ‚è¯¾ä¸­æˆ‘ä»¬è®²äº†ä¸¤ç§æƒ…å†µï¼Œä¸€ç§æ˜¯åˆ›å»ºè¿‡ç¨‹æ¶‰åŠå¤æ‚çš„if-elseåˆ†æ”¯åˆ¤æ–­ï¼Œå¦ä¸€ç§æ˜¯å¯¹è±¡åˆ›å»ºéœ€è¦ç»„è£…å¤šä¸ªå…¶ä»–ç±»å¯¹è±¡æˆ–è€…éœ€è¦å¤æ‚çš„åˆå§‹åŒ–è¿‡ç¨‹ã€‚</p><p>ä»Šå¤©ï¼Œæˆ‘ä»¬å†æ¥è®²ä¸€ä¸ªåˆ›å»ºå¯¹è±¡çš„â€œå¤§å·¥ç¨‹â€ï¼Œä¾èµ–æ³¨å…¥æ¡†æ¶ï¼Œæˆ–è€…å«ä¾èµ–æ³¨å…¥å®¹å™¨ï¼ˆDependency Injection Containerï¼‰ï¼Œç®€ç§°DIå®¹å™¨ã€‚åœ¨ä»Šå¤©çš„è®²è§£ä¸­ï¼Œæˆ‘ä¼šå¸¦ä½ ä¸€å—ææ¸…æ¥šè¿™æ ·å‡ ä¸ªé—®é¢˜ï¼šDIå®¹å™¨è·Ÿæˆ‘ä»¬è®²çš„å·¥å‚æ¨¡å¼åˆæœ‰ä½•åŒºåˆ«å’Œè”ç³»ï¼ŸDIå®¹å™¨çš„æ ¸å¿ƒåŠŸèƒ½æœ‰å“ªäº›ï¼Œä»¥åŠå¦‚ä½•å®ç°ä¸€ä¸ªç®€å•çš„DIå®¹å™¨ï¼Ÿ</p><p>è¯ä¸å¤šè¯´ï¼Œè®©æˆ‘ä»¬æ­£å¼å¼€å§‹ä»Šå¤©çš„å­¦ä¹ å§ï¼</p><h2>å·¥å‚æ¨¡å¼å’ŒDIå®¹å™¨æœ‰ä½•åŒºåˆ«ï¼Ÿ</h2><p>å®é™…ä¸Šï¼ŒDIå®¹å™¨åº•å±‚æœ€åŸºæœ¬çš„è®¾è®¡æ€è·¯å°±æ˜¯åŸºäºå·¥å‚æ¨¡å¼çš„ã€‚DIå®¹å™¨ç›¸å½“äºä¸€ä¸ªå¤§çš„å·¥å‚ç±»ï¼Œè´Ÿè´£åœ¨ç¨‹åºå¯åŠ¨çš„æ—¶å€™ï¼Œæ ¹æ®é…ç½®ï¼ˆè¦åˆ›å»ºå“ªäº›ç±»å¯¹è±¡ï¼Œæ¯ä¸ªç±»å¯¹è±¡çš„åˆ›å»ºéœ€è¦ä¾èµ–å“ªäº›å…¶ä»–ç±»å¯¹è±¡ï¼‰äº‹å…ˆåˆ›å»ºå¥½å¯¹è±¡ã€‚å½“åº”ç”¨ç¨‹åºéœ€è¦ä½¿ç”¨æŸä¸ªç±»å¯¹è±¡çš„æ—¶å€™ï¼Œç›´æ¥ä»å®¹å™¨ä¸­è·å–å³å¯ã€‚æ­£æ˜¯å› ä¸ºå®ƒæŒæœ‰ä¸€å †å¯¹è±¡ï¼Œæ‰€ä»¥è¿™ä¸ªæ¡†æ¶æ‰è¢«ç§°ä¸ºâ€œå®¹å™¨â€ã€‚</p><p>DIå®¹å™¨ç›¸å¯¹äºæˆ‘ä»¬ä¸ŠèŠ‚è¯¾è®²çš„å·¥å‚æ¨¡å¼çš„ä¾‹å­æ¥è¯´ï¼Œå®ƒå¤„ç†çš„æ˜¯æ›´å¤§çš„å¯¹è±¡åˆ›å»ºå·¥ç¨‹ã€‚ä¸ŠèŠ‚è¯¾è®²çš„å·¥å‚æ¨¡å¼ä¸­ï¼Œä¸€ä¸ªå·¥å‚ç±»åªè´Ÿè´£æŸä¸ªç±»å¯¹è±¡æˆ–è€…æŸä¸€ç»„ç›¸å…³ç±»å¯¹è±¡ï¼ˆç»§æ‰¿è‡ªåŒä¸€æŠ½è±¡ç±»æˆ–è€…æ¥å£çš„å­ç±»ï¼‰çš„åˆ›å»ºï¼Œè€ŒDIå®¹å™¨è´Ÿè´£çš„æ˜¯æ•´ä¸ªåº”ç”¨ä¸­æ‰€æœ‰ç±»å¯¹è±¡çš„åˆ›å»ºã€‚</p><!-- [[[read_end]]] --><p>é™¤æ­¤ä¹‹å¤–ï¼ŒDIå®¹å™¨è´Ÿè´£çš„äº‹æƒ…è¦æ¯”å•çº¯çš„å·¥å‚æ¨¡å¼è¦å¤šã€‚æ¯”å¦‚ï¼Œå®ƒè¿˜åŒ…æ‹¬é…ç½®çš„è§£æã€å¯¹è±¡ç”Ÿå‘½å‘¨æœŸçš„ç®¡ç†ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±è¯¦ç»†è®²è®²ï¼Œä¸€ä¸ªç®€å•çš„DIå®¹å™¨åº”è¯¥åŒ…å«å“ªäº›æ ¸å¿ƒåŠŸèƒ½ã€‚</p><h2>DIå®¹å™¨çš„æ ¸å¿ƒåŠŸèƒ½æœ‰å“ªäº›ï¼Ÿ</h2><p>æ€»ç»“ä¸€ä¸‹ï¼Œä¸€ä¸ªç®€å•çš„DIå®¹å™¨çš„æ ¸å¿ƒåŠŸèƒ½ä¸€èˆ¬æœ‰ä¸‰ä¸ªï¼šé…ç½®è§£æã€å¯¹è±¡åˆ›å»ºå’Œå¯¹è±¡ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚</p><p><strong>é¦–å…ˆï¼Œæˆ‘ä»¬æ¥çœ‹é…ç½®è§£æã€‚</strong></p><p>åœ¨ä¸ŠèŠ‚è¯¾è®²çš„å·¥å‚æ¨¡å¼ä¸­ï¼Œå·¥å‚ç±»è¦åˆ›å»ºå“ªä¸ªç±»å¯¹è±¡æ˜¯äº‹å…ˆç¡®å®šå¥½çš„ï¼Œå¹¶ä¸”æ˜¯å†™æ­»åœ¨å·¥å‚ç±»ä»£ç ä¸­çš„ã€‚ä½œä¸ºä¸€ä¸ªé€šç”¨çš„æ¡†æ¶æ¥è¯´ï¼Œæ¡†æ¶ä»£ç è·Ÿåº”ç”¨ä»£ç åº”è¯¥æ˜¯é«˜åº¦è§£è€¦çš„ï¼ŒDIå®¹å™¨äº‹å…ˆå¹¶ä¸çŸ¥é“åº”ç”¨ä¼šåˆ›å»ºå“ªäº›å¯¹è±¡ï¼Œä¸å¯èƒ½æŠŠæŸä¸ªåº”ç”¨è¦åˆ›å»ºçš„å¯¹è±¡å†™æ­»åœ¨æ¡†æ¶ä»£ç ä¸­ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡ä¸€ç§å½¢å¼ï¼Œè®©åº”ç”¨å‘ŠçŸ¥DIå®¹å™¨è¦åˆ›å»ºå“ªäº›å¯¹è±¡ã€‚è¿™ç§å½¢å¼å°±æ˜¯æˆ‘ä»¬è¦è®²çš„é…ç½®ã€‚</p><p>æˆ‘ä»¬å°†éœ€è¦ç”±DIå®¹å™¨æ¥åˆ›å»ºçš„ç±»å¯¹è±¡å’Œåˆ›å»ºç±»å¯¹è±¡çš„å¿…è¦ä¿¡æ¯ï¼ˆä½¿ç”¨å“ªä¸ªæ„é€ å‡½æ•°ä»¥åŠå¯¹åº”çš„æ„é€ å‡½æ•°å‚æ•°éƒ½æ˜¯ä»€ä¹ˆç­‰ç­‰ï¼‰ï¼Œæ”¾åˆ°é…ç½®æ–‡ä»¶ä¸­ã€‚å®¹å™¨è¯»å–é…ç½®æ–‡ä»¶ï¼Œæ ¹æ®é…ç½®æ–‡ä»¶æä¾›çš„ä¿¡æ¯æ¥åˆ›å»ºå¯¹è±¡ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªå…¸å‹çš„Springå®¹å™¨çš„é…ç½®æ–‡ä»¶ã€‚Springå®¹å™¨è¯»å–è¿™ä¸ªé…ç½®æ–‡ä»¶ï¼Œè§£æå‡ºè¦åˆ›å»ºçš„ä¸¤ä¸ªå¯¹è±¡ï¼šrateLimiterå’ŒredisCounterï¼Œå¹¶ä¸”å¾—åˆ°ä¸¤è€…çš„ä¾èµ–å…³ç³»ï¼šrateLimiterä¾èµ–redisCounterã€‚</p><pre><code>public class RateLimiter {\n  private RedisCounter redisCounter;\n  public RateLimiter(RedisCounter redisCounter) {\n    this.redisCounter = redisCounter;\n  }\n  public void test() {\n    System.out.println(&quot;Hello World!&quot;);\n  }\n  //...\n}\n\npublic class RedisCounter {\n  private String ipAddress;\n  private int port;\n  public RedisCounter(String ipAddress, int port) {\n    this.ipAddress = ipAddress;\n    this.port = port;\n  }\n  //...\n}\n\né…ç½®æ–‡ä»¶beans.xmlï¼š\n&lt;beans&gt;\n   &lt;bean id=&quot;rateLimiter&quot; class=&quot;com.xzg.RateLimiter&quot;&gt;\n      &lt;constructor-arg ref=&quot;redisCounter&quot;/&gt;\n   &lt;/bean&gt;\n \n   &lt;bean id=&quot;redisCounter&quot; class=&quot;com.xzg.redisCounter&quot;&gt;\n     &lt;constructor-arg type=&quot;String&quot; value=&quot;127.0.0.1&quot;&gt;\n     &lt;constructor-arg type=&quot;int&quot; value=1234&gt;\n   &lt;/bean&gt;\n&lt;/beans&gt;\n</code></pre><p><strong>å…¶æ¬¡ï¼Œæˆ‘ä»¬å†æ¥çœ‹å¯¹è±¡åˆ›å»ºã€‚</strong></p><p>åœ¨DIå®¹å™¨ä¸­ï¼Œå¦‚æœæˆ‘ä»¬ç»™æ¯ä¸ªç±»éƒ½å¯¹åº”åˆ›å»ºä¸€ä¸ªå·¥å‚ç±»ï¼Œé‚£é¡¹ç›®ä¸­ç±»çš„ä¸ªæ•°ä¼šæˆå€å¢åŠ ï¼Œè¿™ä¼šå¢åŠ ä»£ç çš„ç»´æŠ¤æˆæœ¬ã€‚è¦è§£å†³è¿™ä¸ªé—®é¢˜å¹¶ä¸éš¾ã€‚æˆ‘ä»¬åªéœ€è¦å°†æ‰€æœ‰ç±»å¯¹è±¡çš„åˆ›å»ºéƒ½æ”¾åˆ°ä¸€ä¸ªå·¥å‚ç±»ä¸­å®Œæˆå°±å¯ä»¥äº†ï¼Œæ¯”å¦‚BeansFactoryã€‚</p><p>ä½ å¯èƒ½ä¼šè¯´ï¼Œå¦‚æœè¦åˆ›å»ºçš„ç±»å¯¹è±¡éå¸¸å¤šï¼ŒBeansFactoryä¸­çš„ä»£ç ä¼šä¸ä¼šçº¿æ€§è†¨èƒ€ï¼ˆä»£ç é‡è·Ÿåˆ›å»ºå¯¹è±¡çš„ä¸ªæ•°æˆæ­£æ¯”ï¼‰å‘¢ï¼Ÿå®é™…ä¸Šå¹¶ä¸ä¼šã€‚å¾…ä¼šè®²åˆ°DIå®¹å™¨çš„å…·ä½“å®ç°çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šè®²â€œåå°„â€è¿™ç§æœºåˆ¶ï¼Œå®ƒèƒ½åœ¨ç¨‹åºè¿è¡Œçš„è¿‡ç¨‹ä¸­ï¼ŒåŠ¨æ€åœ°åŠ è½½ç±»ã€åˆ›å»ºå¯¹è±¡ï¼Œä¸éœ€è¦äº‹å…ˆåœ¨ä»£ç ä¸­å†™æ­»è¦åˆ›å»ºå“ªäº›å¯¹è±¡ã€‚æ‰€ä»¥ï¼Œä¸ç®¡æ˜¯åˆ›å»ºä¸€ä¸ªå¯¹è±¡è¿˜æ˜¯åä¸ªå¯¹è±¡ï¼ŒBeansFactoryå·¥å‚ç±»ä»£ç éƒ½æ˜¯ä¸€æ ·çš„ã€‚</p><p><strong>æœ€åï¼Œæˆ‘ä»¬æ¥çœ‹å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚</strong></p><p>ä¸Šä¸€èŠ‚è¯¾æˆ‘ä»¬è®²åˆ°ï¼Œç®€å•å·¥å‚æ¨¡å¼æœ‰ä¸¤ç§å®ç°æ–¹å¼ï¼Œä¸€ç§æ˜¯æ¯æ¬¡éƒ½è¿”å›æ–°åˆ›å»ºçš„å¯¹è±¡ï¼Œå¦ä¸€ç§æ˜¯æ¯æ¬¡éƒ½è¿”å›åŒä¸€ä¸ªäº‹å…ˆåˆ›å»ºå¥½çš„å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„å•ä¾‹å¯¹è±¡ã€‚åœ¨Springæ¡†æ¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡é…ç½®scopeå±æ€§ï¼Œæ¥åŒºåˆ†è¿™ä¸¤ç§ä¸åŒç±»å‹çš„å¯¹è±¡ã€‚scope=prototypeè¡¨ç¤ºè¿”å›æ–°åˆ›å»ºçš„å¯¹è±¡ï¼Œscope=singletonè¡¨ç¤ºè¿”å›å•ä¾‹å¯¹è±¡ã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é…ç½®å¯¹è±¡æ˜¯å¦æ”¯æŒæ‡’åŠ è½½ã€‚å¦‚æœlazy-init=trueï¼Œå¯¹è±¡åœ¨çœŸæ­£è¢«ä½¿ç”¨åˆ°çš„æ—¶å€™ï¼ˆæ¯”å¦‚ï¼šBeansFactory.getBean(â€œuserServiceâ€)ï¼‰æ‰è¢«è¢«åˆ›å»ºï¼›å¦‚æœlazy-init=falseï¼Œå¯¹è±¡åœ¨åº”ç”¨å¯åŠ¨çš„æ—¶å€™å°±äº‹å…ˆåˆ›å»ºå¥½ã€‚</p><p>ä¸ä»…å¦‚æ­¤ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é…ç½®å¯¹è±¡çš„init-methodå’Œdestroy-methodæ–¹æ³•ï¼Œæ¯”å¦‚init-method=loadProperties()ï¼Œdestroy-method=updateConfigFile()ã€‚DIå®¹å™¨åœ¨åˆ›å»ºå¥½å¯¹è±¡ä¹‹åï¼Œä¼šä¸»åŠ¨è°ƒç”¨init-methodå±æ€§æŒ‡å®šçš„æ–¹æ³•æ¥åˆå§‹åŒ–å¯¹è±¡ã€‚åœ¨å¯¹è±¡è¢«æœ€ç»ˆé”€æ¯ä¹‹å‰ï¼ŒDIå®¹å™¨ä¼šä¸»åŠ¨è°ƒç”¨destroy-methodå±æ€§æŒ‡å®šçš„æ–¹æ³•æ¥åšä¸€äº›æ¸…ç†å·¥ä½œï¼Œæ¯”å¦‚é‡Šæ”¾æ•°æ®åº“è¿æ¥æ± ã€å…³é—­æ–‡ä»¶ã€‚</p><h2>å¦‚ä½•å®ç°ä¸€ä¸ªç®€å•çš„DIå®¹å™¨ï¼Ÿ</h2><p>å®é™…ä¸Šï¼Œç”¨Javaè¯­è¨€æ¥å®ç°ä¸€ä¸ªç®€å•çš„DIå®¹å™¨ï¼Œæ ¸å¿ƒé€»è¾‘åªéœ€è¦åŒ…æ‹¬è¿™æ ·ä¸¤ä¸ªéƒ¨åˆ†ï¼šé…ç½®æ–‡ä»¶è§£æã€æ ¹æ®é…ç½®æ–‡ä»¶é€šè¿‡â€œåå°„â€è¯­æ³•æ¥åˆ›å»ºå¯¹è±¡ã€‚</p><h3>1.æœ€å°åŸå‹è®¾è®¡</h3><p>å› ä¸ºæˆ‘ä»¬ä¸»è¦æ˜¯è®²è§£è®¾è®¡æ¨¡å¼ï¼Œæ‰€ä»¥ï¼Œåœ¨ä»Šå¤©çš„è®²è§£ä¸­ï¼Œæˆ‘ä»¬åªå®ç°ä¸€ä¸ªDIå®¹å™¨çš„æœ€å°åŸå‹ã€‚åƒSpringæ¡†æ¶è¿™æ ·çš„DIå®¹å™¨ï¼Œå®ƒæ”¯æŒçš„é…ç½®æ ¼å¼éå¸¸çµæ´»å’Œå¤æ‚ã€‚ä¸ºäº†ç®€åŒ–ä»£ç å®ç°ï¼Œé‡ç‚¹è®²è§£åŸç†ï¼Œåœ¨æœ€å°åŸå‹ä¸­ï¼Œæˆ‘ä»¬åªæ”¯æŒä¸‹é¢é…ç½®æ–‡ä»¶ä¸­æ¶‰åŠçš„é…ç½®è¯­æ³•ã€‚</p><pre><code>é…ç½®æ–‡ä»¶beans.xml\n&lt;beans&gt;\n   &lt;bean id=&quot;rateLimiter&quot; class=&quot;com.xzg.RateLimiter&quot;&gt;\n      &lt;constructor-arg ref=&quot;redisCounter&quot;/&gt;\n   &lt;/bean&gt;\n \n   &lt;bean id=&quot;redisCounter&quot; class=&quot;com.xzg.redisCounter&quot; scope=&quot;singleton&quot; lazy-init=&quot;true&quot;&gt;\n     &lt;constructor-arg type=&quot;String&quot; value=&quot;127.0.0.1&quot;&gt;\n     &lt;constructor-arg type=&quot;int&quot; value=1234&gt;\n   &lt;/bean&gt;\n&lt;/bean\n</code></pre><p>æœ€å°åŸå‹çš„ä½¿ç”¨æ–¹å¼è·ŸSpringæ¡†æ¶éå¸¸ç±»ä¼¼ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>public class Demo {\n  public static void main(String[] args) {\n    ApplicationContext applicationContext = new ClassPathXmlApplicationContext(\n            &quot;beans.xml&quot;);\n    RateLimiter rateLimiter = (RateLimiter) applicationContext.getBean(&quot;rateLimiter&quot;);\n    rateLimiter.test();\n    //...\n  }\n}\n</code></pre><h3>2.æä¾›æ‰§è¡Œå…¥å£</h3><p>å‰é¢æˆ‘ä»¬è®²åˆ°ï¼Œé¢å‘å¯¹è±¡è®¾è®¡çš„æœ€åä¸€æ­¥æ˜¯ï¼šç»„è£…ç±»å¹¶æä¾›æ‰§è¡Œå…¥å£ã€‚åœ¨è¿™é‡Œï¼Œæ‰§è¡Œå…¥å£å°±æ˜¯ä¸€ç»„æš´éœ²ç»™å¤–éƒ¨ä½¿ç”¨çš„æ¥å£å’Œç±»ã€‚</p><p>é€šè¿‡åˆšåˆšçš„æœ€å°åŸå‹ä½¿ç”¨ç¤ºä¾‹ä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œæ‰§è¡Œå…¥å£ä¸»è¦åŒ…å«ä¸¤éƒ¨åˆ†ï¼šApplicationContextå’ŒClassPathXmlApplicationContextã€‚å…¶ä¸­ï¼ŒApplicationContextæ˜¯æ¥å£ï¼ŒClassPathXmlApplicationContextæ˜¯æ¥å£çš„å®ç°ç±»ã€‚ä¸¤ä¸ªç±»å…·ä½“å®ç°å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>public interface ApplicationContext {\n  Object getBean(String beanId);\n}\n\npublic class ClassPathXmlApplicationContext implements ApplicationContext {\n  private BeansFactory beansFactory;\n  private BeanConfigParser beanConfigParser;\n\n  public ClassPathXmlApplicationContext(String configLocation) {\n    this.beansFactory = new BeansFactory();\n    this.beanConfigParser = new XmlBeanConfigParser();\n    loadBeanDefinitions(configLocation);\n  }\n\n  private void loadBeanDefinitions(String configLocation) {\n    InputStream in = null;\n    try {\n      in = this.getClass().getResourceAsStream(&quot;/&quot; + configLocation);\n      if (in == null) {\n        throw new RuntimeException(&quot;Can not find config file: &quot; + configLocation);\n      }\n      List&lt;BeanDefinition&gt; beanDefinitions = beanConfigParser.parse(in);\n      beansFactory.addBeanDefinitions(beanDefinitions);\n    } finally {\n      if (in != null) {\n        try {\n          in.close();\n        } catch (IOException e) {\n          // TODO: log error\n        }\n      }\n    }\n  }\n\n  @Override\n  public Object getBean(String beanId) {\n    return beansFactory.getBean(beanId);\n  }\n}\n</code></pre><p>ä»ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼ŒClassPathXmlApplicationContextè´Ÿè´£ç»„è£…BeansFactoryå’ŒBeanConfigParserä¸¤ä¸ªç±»ï¼Œä¸²è”æ‰§è¡Œæµç¨‹ï¼šä»classpathä¸­åŠ è½½XMLæ ¼å¼çš„é…ç½®æ–‡ä»¶ï¼Œé€šè¿‡BeanConfigParserè§£æä¸ºç»Ÿä¸€çš„BeanDefinitionæ ¼å¼ï¼Œç„¶åï¼ŒBeansFactoryæ ¹æ®BeanDefinitionæ¥åˆ›å»ºå¯¹è±¡ã€‚</p><h3>3.é…ç½®æ–‡ä»¶è§£æ</h3><p>é…ç½®æ–‡ä»¶è§£æä¸»è¦åŒ…å«BeanConfigParseræ¥å£å’ŒXmlBeanConfigParserå®ç°ç±»ï¼Œè´Ÿè´£å°†é…ç½®æ–‡ä»¶è§£æä¸ºBeanDefinitionç»“æ„ï¼Œä»¥ä¾¿BeansFactoryæ ¹æ®è¿™ä¸ªç»“æ„æ¥åˆ›å»ºå¯¹è±¡ã€‚</p><p>é…ç½®æ–‡ä»¶çš„è§£ææ¯”è¾ƒç¹çï¼Œä¸æ¶‰åŠæˆ‘ä»¬ä¸“æ è¦è®²çš„ç†è®ºçŸ¥è¯†ï¼Œä¸æ˜¯æˆ‘ä»¬è®²è§£çš„é‡ç‚¹ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘åªç»™å‡ºä¸¤ä¸ªç±»çš„å¤§è‡´è®¾è®¡æ€è·¯ï¼Œå¹¶æœªç»™å‡ºå…·ä½“çš„å®ç°ä»£ç ã€‚å¦‚æœæ„Ÿå…´è¶£çš„è¯ï¼Œä½ å¯ä»¥è‡ªè¡Œè¡¥å……å®Œæ•´ã€‚å…·ä½“çš„ä»£ç æ¡†æ¶å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>public interface BeanConfigParser {\n  List&lt;BeanDefinition&gt; parse(InputStream inputStream);\n  List&lt;BeanDefinition&gt; parse(String configContent);\n}\n\npublic class XmlBeanConfigParser implements BeanConfigParser {\n\n  @Override\n  public List&lt;BeanDefinition&gt; parse(InputStream inputStream) {\n    String content = null;\n    // TODO:...\n    return parse(content);\n  }\n\n  @Override\n  public List&lt;BeanDefinition&gt; parse(String configContent) {\n    List&lt;BeanDefinition&gt; beanDefinitions = new ArrayList&lt;&gt;();\n    // TODO:...\n    return beanDefinitions;\n  }\n\n}\n\npublic class BeanDefinition {\n  private String id;\n  private String className;\n  private List&lt;ConstructorArg&gt; constructorArgs = new ArrayList&lt;&gt;();\n  private Scope scope = Scope.SINGLETON;\n  private boolean lazyInit = false;\n  // çœç•¥å¿…è¦çš„getter/setter/constructors\n \n  public boolean isSingleton() {\n    return scope.equals(Scope.SINGLETON);\n  }\n\n\n  public static enum Scope {\n    SINGLETON,\n    PROTOTYPE\n  }\n  \n  public static class ConstructorArg {\n    private boolean isRef;\n    private Class type;\n    private Object arg;\n    // çœç•¥å¿…è¦çš„getter/setter/constructors\n  }\n}\n</code></pre><h3>4.æ ¸å¿ƒå·¥å‚ç±»è®¾è®¡</h3><p>æœ€åï¼Œæˆ‘ä»¬æ¥çœ‹ï¼ŒBeansFactoryæ˜¯å¦‚ä½•è®¾è®¡å’Œå®ç°çš„ã€‚è¿™ä¹Ÿæ˜¯æˆ‘ä»¬è¿™ä¸ªDIå®¹å™¨æœ€æ ¸å¿ƒçš„ä¸€ä¸ªç±»äº†ã€‚å®ƒè´Ÿè´£æ ¹æ®ä»é…ç½®æ–‡ä»¶è§£æå¾—åˆ°çš„BeanDefinitionæ¥åˆ›å»ºå¯¹è±¡ã€‚</p><p>å¦‚æœå¯¹è±¡çš„scopeå±æ€§æ˜¯singletonï¼Œé‚£å¯¹è±¡åˆ›å»ºä¹‹åä¼šç¼“å­˜åœ¨singletonObjectsè¿™æ ·ä¸€ä¸ªmapä¸­ï¼Œä¸‹æ¬¡å†è¯·æ±‚æ­¤å¯¹è±¡çš„æ—¶å€™ï¼Œç›´æ¥ä»mapä¸­å–å‡ºè¿”å›ï¼Œä¸éœ€è¦é‡æ–°åˆ›å»ºã€‚å¦‚æœå¯¹è±¡çš„scopeå±æ€§æ˜¯prototypeï¼Œé‚£æ¯æ¬¡è¯·æ±‚å¯¹è±¡ï¼ŒBeansFactoryéƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡è¿”å›ã€‚</p><p>å®é™…ä¸Šï¼ŒBeansFactoryåˆ›å»ºå¯¹è±¡ç”¨åˆ°çš„ä¸»è¦æŠ€æœ¯ç‚¹å°±æ˜¯Javaä¸­çš„åå°„è¯­æ³•ï¼šä¸€ç§åŠ¨æ€åŠ è½½ç±»å’Œåˆ›å»ºå¯¹è±¡çš„æœºåˆ¶ã€‚æˆ‘ä»¬çŸ¥é“ï¼ŒJVMåœ¨å¯åŠ¨çš„æ—¶å€™ä¼šæ ¹æ®ä»£ç è‡ªåŠ¨åœ°åŠ è½½ç±»ã€åˆ›å»ºå¯¹è±¡ã€‚è‡³äºéƒ½è¦åŠ è½½å“ªäº›ç±»ã€åˆ›å»ºå“ªäº›å¯¹è±¡ï¼Œè¿™äº›éƒ½æ˜¯åœ¨ä»£ç ä¸­å†™æ­»çš„ï¼Œæˆ–è€…è¯´æå‰å†™å¥½çš„ã€‚ä½†æ˜¯ï¼Œå¦‚æœæŸä¸ªå¯¹è±¡çš„åˆ›å»ºå¹¶ä¸æ˜¯å†™æ­»åœ¨ä»£ç ä¸­ï¼Œè€Œæ˜¯æ”¾åˆ°é…ç½®æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ç¨‹åºè¿è¡ŒæœŸé—´ï¼ŒåŠ¨æ€åœ°æ ¹æ®é…ç½®æ–‡ä»¶æ¥åŠ è½½ç±»ã€åˆ›å»ºå¯¹è±¡ï¼Œé‚£è¿™éƒ¨åˆ†å·¥ä½œå°±æ²¡æ³•è®©JVMå¸®æˆ‘ä»¬è‡ªåŠ¨å®Œæˆäº†ï¼Œæˆ‘ä»¬éœ€è¦åˆ©ç”¨Javaæä¾›çš„åå°„è¯­æ³•è‡ªå·±å»ç¼–å†™ä»£ç ã€‚</p><p>ææ¸…æ¥šäº†åå°„çš„åŸç†ï¼ŒBeansFactoryçš„ä»£ç å°±ä¸éš¾çœ‹æ‡‚äº†ã€‚å…·ä½“ä»£ç å®ç°å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>public class BeansFactory {\n  private ConcurrentHashMap&lt;String, Object&gt; singletonObjects = new ConcurrentHashMap&lt;&gt;();\n  private ConcurrentHashMap&lt;String, BeanDefinition&gt; beanDefinitions = new ConcurrentHashMap&lt;&gt;();\n\n  public void addBeanDefinitions(List&lt;BeanDefinition&gt; beanDefinitionList) {\n    for (BeanDefinition beanDefinition : beanDefinitionList) {\n      this.beanDefinitions.putIfAbsent(beanDefinition.getId(), beanDefinition);\n    }\n\n    for (BeanDefinition beanDefinition : beanDefinitionList) {\n      if (beanDefinition.isLazyInit() == false &amp;&amp; beanDefinition.isSingleton()) {\n        createBean(beanDefinition);\n      }\n    }\n  }\n\n  public Object getBean(String beanId) {\n    BeanDefinition beanDefinition = beanDefinitions.get(beanId);\n    if (beanDefinition == null) {\n      throw new NoSuchBeanDefinitionException(&quot;Bean is not defined: &quot; + beanId);\n    }\n    return createBean(beanDefinition);\n  }\n\n  @VisibleForTesting\n  protected Object createBean(BeanDefinition beanDefinition) {\n    if (beanDefinition.isSingleton() &amp;&amp; singletonObjects.contains(beanDefinition.getId())) {\n      return singletonObjects.get(beanDefinition.getId());\n    }\n\n    Object bean = null;\n    try {\n      Class beanClass = Class.forName(beanDefinition.getClassName());\n      List&lt;BeanDefinition.ConstructorArg&gt; args = beanDefinition.getConstructorArgs();\n      if (args.isEmpty()) {\n        bean = beanClass.newInstance();\n      } else {\n        Class[] argClasses = new Class[args.size()];\n        Object[] argObjects = new Object[args.size()];\n        for (int i = 0; i &lt; args.size(); ++i) {\n          BeanDefinition.ConstructorArg arg = args.get(i);\n          if (!arg.getIsRef()) {\n            argClasses[i] = arg.getType();\n            argObjects[i] = arg.getArg();\n          } else {\n            BeanDefinition refBeanDefinition = beanDefinitions.get(arg.getArg());\n            if (refBeanDefinition == null) {\n              throw new NoSuchBeanDefinitionException(&quot;Bean is not defined: &quot; + arg.getArg());\n            }\n            argClasses[i] = Class.forName(refBeanDefinition.getClassName());\n            argObjects[i] = createBean(refBeanDefinition);\n          }\n        }\n        bean = beanClass.getConstructor(argClasses).newInstance(argObjects);\n      }\n    } catch (ClassNotFoundException | IllegalAccessException\n            | InstantiationException | NoSuchMethodException | InvocationTargetException e) {\n      throw new BeanCreationFailureException(&quot;&quot;, e);\n    }\n\n    if (bean != null &amp;&amp; beanDefinition.isSingleton()) {\n      singletonObjects.putIfAbsent(beanDefinition.getId(), bean);\n      return singletonObjects.get(beanDefinition.getId());\n    }\n    return bean;\n  }\n}\n</code></pre><h2>é‡ç‚¹å›é¡¾</h2><p>å¥½äº†ï¼Œä»Šå¤©çš„å†…å®¹åˆ°æ­¤å°±è®²å®Œäº†ã€‚æˆ‘ä»¬æ¥ä¸€å—æ€»ç»“å›é¡¾ä¸€ä¸‹ï¼Œä½ éœ€è¦é‡ç‚¹æŒæ¡çš„å†…å®¹ã€‚</p><p>DIå®¹å™¨åœ¨ä¸€äº›è½¯ä»¶å¼€å‘ä¸­å·²ç»æˆä¸ºäº†æ ‡é…ï¼Œæ¯”å¦‚Spring IOCã€Google Guiceã€‚ä½†æ˜¯ï¼Œå¤§éƒ¨åˆ†äººå¯èƒ½åªæ˜¯æŠŠå®ƒå½“ä½œä¸€ä¸ªé»‘ç›’å­æ¥ä½¿ç”¨ï¼Œå¹¶æœªçœŸæ­£å»äº†è§£å®ƒçš„åº•å±‚æ˜¯å¦‚ä½•å®ç°çš„ã€‚å½“ç„¶ï¼Œå¦‚æœåªæ˜¯åšä¸€äº›ç®€å•çš„å°é¡¹ç›®ï¼Œç®€å•ä¼šç”¨å°±è¶³å¤Ÿäº†ï¼Œä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬é¢å¯¹çš„æ˜¯éå¸¸å¤æ‚çš„ç³»ç»Ÿï¼Œå½“ç³»ç»Ÿå‡ºç°é—®é¢˜çš„æ—¶å€™ï¼Œå¯¹åº•å±‚åŸç†çš„æŒæ¡ç¨‹åº¦ï¼Œå†³å®šäº†æˆ‘ä»¬æ’æŸ¥é—®é¢˜çš„èƒ½åŠ›ï¼Œç›´æ¥å½±å“åˆ°æˆ‘ä»¬æ’æŸ¥é—®é¢˜çš„æ•ˆç‡ã€‚</p><p>ä»Šå¤©ï¼Œæˆ‘ä»¬è®²è§£äº†ä¸€ä¸ªç®€å•çš„DIå®¹å™¨çš„å®ç°åŸç†ï¼Œå…¶æ ¸å¿ƒé€»è¾‘ä¸»è¦åŒ…æ‹¬ï¼šé…ç½®æ–‡ä»¶è§£æï¼Œä»¥åŠæ ¹æ®é…ç½®æ–‡ä»¶é€šè¿‡â€œåå°„â€è¯­æ³•æ¥åˆ›å»ºå¯¹è±¡ã€‚å…¶ä¸­ï¼Œåˆ›å»ºå¯¹è±¡çš„è¿‡ç¨‹å°±åº”ç”¨åˆ°äº†æˆ‘ä»¬åœ¨å­¦çš„å·¥å‚æ¨¡å¼ã€‚å¯¹è±¡åˆ›å»ºã€ç»„è£…ã€ç®¡ç†å®Œå…¨æœ‰DIå®¹å™¨æ¥è´Ÿè´£ï¼Œè·Ÿå…·ä½“ä¸šåŠ¡ä»£ç è§£è€¦ï¼Œè®©ç¨‹åºå‘˜èšç„¦åœ¨ä¸šåŠ¡ä»£ç çš„å¼€å‘ä¸Šã€‚</p><h2>è¯¾å ‚è®¨è®º</h2><p>BeansFactoryç±»ä¸­çš„createBean()å‡½æ•°æ˜¯ä¸€ä¸ªé€’å½’å‡½æ•°ã€‚å½“æ„é€ å‡½æ•°çš„å‚æ•°æ˜¯refç±»å‹æ—¶ï¼Œä¼šé€’å½’åœ°åˆ›å»ºrefå±æ€§æŒ‡å‘çš„å¯¹è±¡ã€‚å¦‚æœæˆ‘ä»¬åœ¨é…ç½®æ–‡ä»¶ä¸­é”™è¯¯åœ°é…ç½®äº†å¯¹è±¡ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œå¯¼è‡´å­˜åœ¨å¾ªç¯ä¾èµ–ï¼Œé‚£BeansFactoryçš„createBean()å‡½æ•°æ˜¯å¦ä¼šå‡ºç°å †æ ˆæº¢å‡ºï¼Ÿåˆè¯¥å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ</p><p>ä½ å¯ä»¥å¯ä»¥åœ¨ç•™è¨€åŒºè¯´ä¸€è¯´ï¼Œå’ŒåŒå­¦ä¸€èµ·äº¤æµå’Œåˆ†äº«ã€‚å¦‚æœæœ‰æ”¶è·ï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«ç»™ä½ çš„æœ‹å‹ã€‚</p>","neighbors":{"left":{"article_title":"44 | å·¥å‚æ¨¡å¼ï¼ˆä¸Šï¼‰ï¼šæˆ‘ä¸ºä»€ä¹ˆè¯´æ²¡äº‹ä¸è¦éšä¾¿ç”¨å·¥å‚æ¨¡å¼åˆ›å»ºå¯¹è±¡ï¼Ÿ","id":197254},"right":{"article_title":"46 | å»ºé€ è€…æ¨¡å¼ï¼šè¯¦è§£æ„é€ å‡½æ•°ã€setæ–¹æ³•ã€å»ºé€ è€…æ¨¡å¼ä¸‰ç§å¯¹è±¡åˆ›å»ºæ–¹å¼","id":199674}},"comments":[{"had_liked":false,"id":179514,"user_name":"æ²ˆåº·","can_delete":false,"product_type":"c1","uid":1611025,"ip_address":"","ucode":"02AFA50738AB8E","user_header":"https://static001.geekbang.org/account/avatar/00/18/95/11/eb431e52.jpg","comment_is_top":false,"comment_ctime":1582018878,"is_pvip":false,"discussion_count":6,"race_medal":0,"score":"654417047870","product_id":100039001,"comment_content":"é»˜é»˜çš„æå‡ºäº†ã€Šspringæºç æ·±åº¦è§£æã€‹å›é¡¾ä¸€ç•ª<br> 1ã€æ„é€ å™¨å¾ªç¯ä¾èµ–<br>æ„é€ å™¨æ³¨å…¥çš„å¾ªç¯ä¾èµ–æ˜¯æ— æ³•è§£å†³çš„ï¼Œåªèƒ½æŠ›å‡ºbeanåˆ›å»ºå¼‚å¸¸ä½¿å®¹å™¨æ— æ³•å¯åŠ¨<br>å¦‚ä½•åˆ¤æ–­æ˜¯å¾ªç¯ä¾èµ–ï¼Ÿ<br>æŠŠæ­£åœ¨åˆ›å»ºçš„beanæ”¾å…¥åˆ°ä¸€ä¸ª(æ­£åœ¨åˆ›å»ºçš„map)ä¸­ï¼Œå¦‚æœä¾èµ–åˆ›å»ºbeanåœ¨æ­¤mapä¸­å­˜åœ¨ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸ã€‚<br>2ã€setteræ–¹æ³•å¾ªç¯ä¾èµ–<br>â‘ å•ä¾‹æƒ…å†µå¯ä»¥è§£å†³å¾ªç¯ä¾èµ–ï¼Œæ–¹æ³•æ˜¯æå‰æš´éœ²ä¸€ä¸ªè¿”å›è¯¥å•ä¾‹çš„å·¥å‚æ–¹æ³•ï¼Œè®©ä¾èµ–å¯¹è±¡å¯ä»¥å¼•ç”¨åˆ°<br>â‘¡å¤šä¾‹ä¸èƒ½è§£å†³å¾ªç¯ä¾èµ–ï¼Œå› ä¸ºå¤šä¾‹ä¸éœ€è¦ç¼“å­˜","like_count":153,"discussions":[{"author":{"id":1796908,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/6b/2c/b27eefc5.jpg","nickname":"Abcd","note":"","ucode":"274C7487FDDC21","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":284628,"discussion_content":"ä½ è¯´çš„å¾ˆå¯¹ï¼Œc++ç¼–è¯‘å™¨åˆæœŸå°±æ˜¯å°†c++ä»£ç ç¿»è¯‘æˆcè¯­è¨€ï¼Œç„¶åè°ƒç”¨cç¼–è¯‘å™¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592571733,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":181074,"user_name":"undefined","can_delete":false,"product_type":"c1","uid":1587803,"ip_address":"","ucode":"867405CA5A9FB7","user_header":"https://static001.geekbang.org/account/avatar/00/18/3a/5b/ce1724ca.jpg","comment_is_top":false,"comment_ctime":1582470758,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"242100639334","product_id":100039001,"comment_content":"æŠŠæœ¬æ–‡çš„ç¤ºä¾‹è¡¥å…¨æˆäº†å¯æ‰§è¡Œä»£ç ï¼š<br>https:&#47;&#47;github.com&#47;plusmancn&#47;learn-java&#47;tree&#47;master&#47;src&#47;main&#47;java&#47;Exercise&#47;di<br>é¡ºä¾¿çº æ­£ä¸€ä¸ªç¬”è¯¯ï¼š<br>BeansFactory ä¸‹ createBean æ–¹æ³•ä¸­ï¼šsingletonObjects.contains åº”ä¸º singletonObjects. containsKey","like_count":57,"discussions":[{"author":{"id":1097836,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c0/6c/29be1864.jpg","nickname":"éšå¿ƒè€Œè‡³","note":"","ucode":"31866865255101","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":352963,"discussion_content":"è·‘äº†ä¸‹ï¼Œç¡®å®æ˜¯å¯ä»¥çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614928537,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1397298,"avatar":"https://static001.geekbang.org/account/avatar/00/15/52/32/bb570f48.jpg","nickname":"å‘å¾€çš„ç”Ÿæ´»","note":"","ucode":"0E8DB45357820F","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":288138,"discussion_content":"å¼º","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593658903,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":179629,"user_name":"javaadu","can_delete":false,"product_type":"c1","uid":1000519,"ip_address":"","ucode":"8C0B140F1C8992","user_header":"https://static001.geekbang.org/account/avatar/00/0f/44/47/3ddb94d0.jpg","comment_is_top":false,"comment_ctime":1582041624,"is_pvip":true,"discussion_count":2,"race_medal":0,"score":"156200864280","product_id":100039001,"comment_content":"20200218å†æ¬¡å¤ä¹ ï¼š<br>1. ç ”ç©¶äº†Springå®¹å™¨ä¸­å¤„ç†å¾ªç¯ä¾èµ–çš„çŸ¥è¯†ç‚¹ï¼šï¼ˆ1ï¼‰åªèƒ½å¤„ç†å•ä¾‹çš„ã€setteræ³¨å…¥çš„å¾ªç¯ä¾èµ–ï¼Œå…¶ä»–çš„æ³¨å…¥æ¨¡å¼æ— æ³•å¤„ç†ï¼›ï¼ˆ2ï¼‰ä¾èµ–ç¼“å­˜å¤„ç†å¾ªç¯ä¾èµ–ï¼Œå…³é”®æ€æƒ³æ˜¯ï¼Œå°†æ­£åœ¨åˆ›å»ºä¸­çš„å¯¹è±¡æå‰æš´éœ²ä¸€ä¸ªå•ä¾‹å·¥å‚ï¼Œè®©å…¶ä»–å®ä¾‹å¯ä»¥å¼•ç”¨åˆ°<br>2. ç½‘ä¸Šä¸€ç¯‡æ¯”è¾ƒå¥½çš„æ–‡ç« ï¼šhttps:&#47;&#47;juejin.im&#47;post&#47;5d0d8f64f265da1b7b3193ac","like_count":36,"discussions":[{"author":{"id":1438860,"avatar":"https://static001.geekbang.org/account/avatar/00/15/f4/8c/0866b228.jpg","nickname":"å­æˆ¿","note":"","ucode":"CB05938C248BB3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":341550,"discussion_content":"ä¸ä¸€æ ·çš„ ï¼Œ @Lazy åªæ˜¯å†³å®šä½ çš„åˆå§‹åŒ–è¡Œä¸ºï¼Œæ— æ³•è§£å†³å¾ªç¯ä¾èµ–çš„é—®é¢˜","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1610449924,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1293907,"avatar":"https://static001.geekbang.org/account/avatar/00/13/be/53/eda4b622.jpg","nickname":"Smile @ Life","note":"","ucode":"320EDAD5A8BE56","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":295062,"discussion_content":"æ²¡äººç”¨@Lazy æ³¨è§£æ¥å¤„ç†å•ä¾‹å¾ªç¯ä¾èµ–å— ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596077286,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":217362,"user_name":"ç®€å•çŒ«","can_delete":false,"product_type":"c1","uid":1866485,"ip_address":"","ucode":"EA027D4C344E25","user_header":"https://static001.geekbang.org/account/avatar/00/1c/7a/f5/54a5084b.jpg","comment_is_top":false,"comment_ctime":1589469791,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"130438488671","product_id":100039001,"comment_content":"ä¸è¦è¢«è¿™äº›æ‰€è°“çš„ä¸“ä¸šåŒ–åè¯å“åˆ°äº† ä»€ä¹ˆä¸‰çº§ç¼“å­˜ã€‚aä¾èµ–bï¼Œbä¾èµ–cï¼Œcä¾èµ–a,dä¾èµ–aï¼Œbï¼Œcä»€ä¹ˆçš„ï¼Œä½ è¦è§£å†³çš„æ ¸å¿ƒæ˜¯ä¸è¦é‡å¤åˆ›å»ºã€‚é‚£ä¹ˆä½ å°±è¦æŠŠå·²ç»åˆ›å»ºçš„å¯¹è±¡å­˜èµ·æ¥(mapï¼Œhashmapsä»€ä¹ˆçš„) ï¼Œç„¶åå†æ¬¡åˆ›å»ºçš„æ—¶å€™å…ˆå»ç¼“å­˜mapä¸­è¯»å–ï¼Œæ²¡æœ‰æ‰åˆ›å»ºã€‚ åˆ›å»ºå¯¹è±¡æµç¨‹ï¼š1å…ˆåå°„åˆ›å»ºç±»å¯¹è±¡  2ç„¶åé…ç½®ç±»é‡Œé¢çš„å±æ€§ æ–¹æ³•(ä¾èµ–å°±åœ¨è¿™)ã€‚<br>è‡³äºä½ è¦æ€ä¹ˆåˆ©ç”¨è®¾è®¡æ¨¡å¼è§£è€¦ åˆ†3çº§ç¼“å­˜ åˆ†åˆ«å­˜å‚¨å®Œå…¨å®ä¾‹åŒ–çš„å¯¹è±¡  æœªè®¾ç½®å±æ€§æ–¹æ³•ç±»å¯¹è±¡  è¿˜æ˜¯å¯¹è±¡å·¥å‚  é‚£å°±çœ‹å¦‚ä½•å¥½ç”¨å’¯","like_count":31,"discussions":[{"author":{"id":1030842,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/ba/ba/83de3488.jpg","nickname":"Carter","note":"","ucode":"1FD476D8F2BE27","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":367397,"discussion_content":"é—®é¢˜æ˜¯ï¼Œåˆ›å»ºaå¿…é¡»å…ˆæœ‰bï¼Œåˆ›å»ºbåˆå¾—å…ˆæœ‰a","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1618336671,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1613665,"avatar":"https://static001.geekbang.org/account/avatar/00/18/9f/61/c46b42f4.jpg","nickname":"talkyoung","note":"","ucode":"8D231FA9004B64","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1030842,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/ba/ba/83de3488.jpg","nickname":"Carter","note":"","ucode":"1FD476D8F2BE27","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":553941,"discussion_content":"æ¥¼ä¸»æ²¡çœ‹æ˜ç™½ï¼Œåˆ«ç†ä»–","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646138642,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":367397,"ip_address":""},"score":553941,"extra":""}]}]},{"had_liked":false,"id":178284,"user_name":"æ­¤é±¼ä¸å¾—æ°´","can_delete":false,"product_type":"c1","uid":1257453,"ip_address":"","ucode":"95268E823FB4D2","user_header":"https://static001.geekbang.org/account/avatar/00/13/2f/ed/a87bb8fa.jpg","comment_is_top":false,"comment_ctime":1581650132,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"91775963348","product_id":100039001,"comment_content":"Springè§£å†³å¾ªç¯ä¾èµ–çš„åŠæ³•æ˜¯å¤šçº§ç¼“å­˜ã€‚","like_count":21},{"had_liked":false,"id":210270,"user_name":"zhengyu.nie","can_delete":false,"product_type":"c1","uid":1541669,"ip_address":"","ucode":"FFE0377D323E46","user_header":"https://static001.geekbang.org/account/avatar/00/17/86/25/25ded6c3.jpg","comment_is_top":false,"comment_ctime":1587710908,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"57422285756","product_id":100039001,"comment_content":"åŸºæœ¬å°±æ˜¯Springæºç å¤§ä½“åŸå‹äº†ï¼Œå§”æ‰˜çš„BeanFactoryåœ¨Springæºç é‡Œæ˜¯DefaultListableBeanFactoryã€‚å¾ªç¯ä¾èµ–è§£å†³æ˜¯ä¸‰çº§ç¼“å­˜ï¼Œæå‰æš´éœ²è¿˜æ²¡æœ‰åˆå§‹åŒ–ç»“æŸçš„beanã€‚æ£€æµ‹æ˜¯Mapå­˜ä¸€ä¸‹è¿‡ç¨‹ï¼Œabaè¿™æ ·é¡ºåºåˆ¤æ–­ï¼Œæœ‰é‡å¤ï¼ˆaå‡ºç°ä¸¤æ¬¡ï¼‰å°±æ˜¯ç¯äº†ã€‚<br><br>ä¸‰çº§ç¼“å­˜æºç å¯¹åº”<br>org.springframework.beans.factory.support.DefaultSingletonBeanRegistry#getSingleton<br><br>&#47;**<br>\t * Return the (raw) singleton object registered under the given name.<br>\t * &lt;p&gt;Checks already instantiated singletons and also allows for an early<br>\t * reference to a currently created singleton (resolving a circular reference).<br>\t * @param beanName the name of the bean to look for<br>\t * @param allowEarlyReference whether early references should be created or not<br>\t * @return the registered singleton object, or {@code null} if none found<br>\t *&#47;<br>\t@Nullable<br>\tprotected Object getSingleton(String beanName, boolean allowEarlyReference) {<br>\t\tObject singletonObject = this.singletonObjects.get(beanName);<br>\t\tif (singletonObject == null &amp;&amp; isSingletonCurrentlyInCreation(beanName)) {<br>\t\t\tsynchronized (this.singletonObjects) {<br>\t\t\t\tsingletonObject = this.earlySingletonObjects.get(beanName);<br>\t\t\t\tif (singletonObject == null &amp;&amp; allowEarlyReference) {<br>\t\t\t\t\tObjectFactory&lt;?&gt; singletonFactory = this.singletonFactories.get(beanName);<br>\t\t\t\t\tif (singletonFactory != null) {<br>\t\t\t\t\t\tsingletonObject = singletonFactory.getObject();<br>\t\t\t\t\t\tthis.earlySingletonObjects.put(beanName, singletonObject);<br>\t\t\t\t\t\tthis.singletonFactories.remove(beanName);<br>\t\t\t\t\t}<br>\t\t\t\t}<br>\t\t\t}<br>\t\t}<br>\t\treturn singletonObject;<br>\t}<br><br><br>\t&#47;** Cache of singleton objects: bean name to bean instance. *&#47;<br>\tprivate final Map&lt;String, Object&gt; singletonObjects = new ConcurrentHashMap&lt;&gt;(256);<br><br>\t&#47;** Cache of singleton factories: bean name to ObjectFactory. *&#47;<br>\tprivate final Map&lt;String, ObjectFactory&lt;?&gt;&gt; singletonFactories = new HashMap&lt;&gt;(16);<br><br>\t&#47;** Cache of early singleton objects: bean name to bean instance. *&#47;<br>\tprivate final Map&lt;String, Object&gt; earlySingletonObjects = new HashMap&lt;&gt;(16);<br>","like_count":14},{"had_liked":false,"id":227044,"user_name":"ç‹å…ˆæ£®","can_delete":false,"product_type":"c1","uid":1022267,"ip_address":"","ucode":"1AF1A395107479","user_header":"https://static001.geekbang.org/account/avatar/00/0f/99/3b/791d0f5e.jpg","comment_is_top":false,"comment_ctime":1592271789,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"40246977453","product_id":100039001,"comment_content":"phpå¼€å‘è€…é»˜é»˜çš„å»ç…laravelçš„DIå®¹å™¨","like_count":10},{"had_liked":false,"id":178306,"user_name":"J.Smile","can_delete":false,"product_type":"c1","uid":1336475,"ip_address":"","ucode":"C4D98DFDBF7584","user_header":"https://static001.geekbang.org/account/avatar/00/14/64/9b/0b578b08.jpg","comment_is_top":false,"comment_ctime":1581657078,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"40236362742","product_id":100039001,"comment_content":"æ€è€ƒé¢˜:<br>â‘ æ„é€ å™¨åˆå§‹åŒ–æ–¹å¼ï¼Œæ— æ³•è§£å†³å¾ªç¯ä¾èµ–<br>â‘¡setæ³¨å…¥æ–¹å¼åˆå§‹åŒ–ï¼Œæœ‰ä¸¤ç§:<br>ç¬¬ä¸€ç§ï¼Œåˆ›å»ºçš„æ˜¯å•ä¾‹å¯¹è±¡ï¼Œå¯ä»¥è§£å†³ã€‚<br>ç¬¬äºŒç§ï¼Œåˆ›å»ºçš„æ˜¯åŸå‹å¯¹è±¡ï¼Œç”±äºdiå®¹å™¨ä¸ç¼“å­˜å¯¹è±¡å¯¼è‡´æ— æ³•æå‰æš´éœ²ä¸€ä¸ªåˆ›å»ºä¸­çš„å¯¹è±¡ï¼Œä¾èµ–å¯¹è±¡å°±ä¼šgetbeanæ—¶åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œæ¥ç€åˆè¿›å»å¾ªç¯ä¾èµ–åˆ›å»ºæ–°å¯¹è±¡â€¦ä¾ç„¶è§£å†³ä¸äº†ã€‚","like_count":9},{"had_liked":false,"id":178322,"user_name":"å‹¤åŠ³çš„æ˜é…±","can_delete":false,"product_type":"c1","uid":1259140,"ip_address":"","ucode":"05EBE89B80371B","user_header":"https://static001.geekbang.org/account/avatar/00/13/36/84/788f0c60.jpg","comment_is_top":false,"comment_ctime":1581661385,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"31646432457","product_id":100039001,"comment_content":"æ€è€ƒé¢˜ï¼š<br> æ„é€ å™¨æ³¨å…¥ä¸å¥½è§£å†³<br> setteræ³¨å…¥ï¼šæ ¹æ®BenDefinitionåˆ›å»ºçš„beanå¯ä»¥æ˜¯æœªå®Œæˆçš„beanï¼Œå°±æ˜¯è¯´beané‡Œé¢çš„å±æ€§å¯ä»¥æ˜¯æ²¡æœ‰å¡«å……è¿‡çš„ï¼Œè¿™ä¸ªæ—¶å€™beanä¾ç„¶èƒ½åˆ›å»ºæˆåŠŸï¼Œä¹‹åå±æ€§ï¼ŒpostConstructã€InitializingBeanã€init-methodå®Œæˆä¹‹åæ‰èƒ½ç®—æ˜¯ä¸€ä¸ªå®Œæ•´çš„beanï¼Œæ‰€ä»¥å³ä½¿å‡ºç°å¾ªç¯ä¾èµ–ä¹Ÿèƒ½è§£å†³ã€‚","like_count":7},{"had_liked":false,"id":178316,"user_name":"å¥½åƒä¸è´µ","can_delete":false,"product_type":"c1","uid":1316993,"ip_address":"","ucode":"6576E2BECE4F7C","user_header":"https://static001.geekbang.org/account/avatar/00/14/18/81/83b6ade2.jpg","comment_is_top":false,"comment_ctime":1581660385,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"31646431457","product_id":100039001,"comment_content":"createBeanå…ˆç”¨Topology sortçœ‹æ˜¯å¦æœ‰ç¯ï¼Œç„¶åå†æŒ‰åºåˆ›å»ºï¼Ÿ","like_count":8,"discussions":[{"author":{"id":1904717,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/10/4d/3f4ae286.jpg","nickname":"Dimon Ho","note":"","ucode":"5B090E7FF6FC05","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":374187,"discussion_content":"è€å¸ˆè¯´çš„æ˜¯å¦‚æœè¿™ä¸ªå¸¸é‡åªæœ‰è¿™ä¸€ä¸ªç±»ä¸­æœ‰ä½¿ç”¨ï¼Œå°±åœ¨è¿™ä¸ªç±»ä¸­å®šä¹‰å°±å¥½äº†ï¼Œæ²¡å¿…è¦æ”¾åœ¨Constantsç±»ä¸­ï¼Œå¦‚æœè¿™ä¸ªå¸¸é‡åœ¨é¡¹ç›®ä¸­å¤šä¸ªåœ°æ–¹ä½¿ç”¨ï¼Œè‚¯å®šè¿˜æ˜¯è¦åœ¨Constantsä¸­å®šä¹‰çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621055097,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":178227,"user_name":"Geek_3b1096","can_delete":false,"product_type":"c1","uid":1549364,"ip_address":"","ucode":"A6BD92B79B3632","user_header":"","comment_is_top":false,"comment_ctime":1581624559,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"31646395631","product_id":100039001,"comment_content":"ç»ˆäºè§£ç­”äº†æˆ‘å¯¹äºDIçš„ç–‘æƒ‘","like_count":7,"discussions":[{"author":{"id":2690172,"avatar":"","nickname":"Geek_è®¾è®¡æ¨¡å¼ä¹‹ç¾","note":"","ucode":"59263416E65594","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":384238,"discussion_content":"åŒæ„Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626435296,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":181522,"user_name":"DullBird","can_delete":false,"product_type":"c1","uid":1110494,"ip_address":"","ucode":"80E2FD5F9687CB","user_header":"https://static001.geekbang.org/account/avatar/00/10/f1/de/3ebcbb3f.jpg","comment_is_top":false,"comment_ctime":1582554402,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"27352358178","product_id":100039001,"comment_content":"1. æˆ‘ç†è§£spring è§£å†³Aå’ŒBå¯¹è±¡çš„å¾ªç¯å¼•ç”¨æ˜¯è¿™æ ·çš„æµç¨‹æ˜¯è¿™æ ·çš„ï¼Œå‡è®¾å…ˆåŠ è½½Aï¼Œä¸¢ä¸€ä¸ªAçš„å¼•ç”¨åˆ°ä¸€ä¸ªå¼•ç”¨map&lt;id, ref&gt;ï¼Œå‘ç°Aæœ‰ä¸€ä¸ªfiled å¼•ç”¨Bï¼Œå°±åˆå§‹åŒ–Bï¼Œä¸¢ä¸€ä¸ªBçš„å¼•ç”¨åˆ°Mapï¼Œåˆå§‹åŒ–å‘ç°éœ€è¦ä¸€ä¸ªAï¼Œå°±ä»mapé‡Œé¢æ‰¾ï¼Œæ‰¾åˆ°äº†ä¸€ä¸ªAï¼Œå°±æŠŠAçš„å¼•ç”¨ä¸¢ç»™Bçš„å±æ€§ï¼Œç„¶åBåŠ è½½ç»“æŸäº†ï¼ŒAç»§ç»­åŠ è½½ï¼Œæ‹¿åˆ°mapé‡Œé¢çš„Bï¼ŒåŠ è½½å®Œæˆã€‚","like_count":6,"discussions":[{"author":{"id":1313115,"avatar":"https://static001.geekbang.org/account/avatar/00/14/09/5b/e9ee3b41.jpg","nickname":"éŸ³ä¸º","note":"","ucode":"D78E4CBCE6BF45","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":299915,"discussion_content":"é€»è¾‘é”™è¯¯ï¼ŒæŠŠaä¸¢ç»™bçš„æ—¶å€™aè¿˜æ²¡åˆ›å»ºå®Œæˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597853895,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1554995,"avatar":"https://static001.geekbang.org/account/avatar/00/17/ba/33/2d83d174.jpg","nickname":"æ—¶å…‰å®ˆæŠ¤è€…-åŸºå…°","note":"","ucode":"F0B0887B1979D2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1313115,"avatar":"https://static001.geekbang.org/account/avatar/00/14/09/5b/e9ee3b41.jpg","nickname":"éŸ³ä¸º","note":"","ucode":"D78E4CBCE6BF45","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":312267,"discussion_content":"å¦‚æœæ˜¯setæ–¹æ³•ä¾èµ–aå°±åˆ›å»ºå®Œæˆäº†ï¼Œæ‰€ä»¥åˆ†æ„é€ å™¨å¾ªç¯ä¾èµ–å’Œsetæ–¹æ³•å¾ªç¯ä¾èµ–","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1602646022,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":299915,"ip_address":""},"score":312267,"extra":""},{"author":{"id":2874237,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/db/7d/a3510ae3.jpg","nickname":"å‡¯æ—","note":"","ucode":"20A1024A7ECE17","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1554995,"avatar":"https://static001.geekbang.org/account/avatar/00/17/ba/33/2d83d174.jpg","nickname":"æ—¶å…‰å®ˆæŠ¤è€…-åŸºå…°","note":"","ucode":"F0B0887B1979D2","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":544479,"discussion_content":"åº”è¯¥è¯´æå‰æš´éœ²å¼•ç”¨å§ï¼Œå¹¶æ²¡æœ‰åˆå§‹åŒ–å®Œæˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641537018,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":312267,"ip_address":""},"score":544479,"extra":""}]}]},{"had_liked":false,"id":178463,"user_name":"javaadu","can_delete":false,"product_type":"c1","uid":1000519,"ip_address":"","ucode":"8C0B140F1C8992","user_header":"https://static001.geekbang.org/account/avatar/00/0f/44/47/3ddb94d0.jpg","comment_is_top":false,"comment_ctime":1581694280,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"23056530760","product_id":100039001,"comment_content":"å…³äºæ€è€ƒé¢˜ï¼Œå¯¹è±¡çš„ä¾èµ–å…³ç³»åº”è¯¥æ˜¯ä¸€ä¸ªæœ‰å‘æ— ç¯å›¾ï¼ˆDAGï¼‰ï¼Œæˆ‘å€¾å‘äºåœ¨è§£æé…ç½®æ–‡ä»¶çš„æ—¶å€™æ£€æµ‹æ˜¯å¦å­˜åœ¨ç¯ï¼Œä¸è¿‡è¿™æ ·åœ¨å¤§å‹é¡¹ç›®ä¸­å¯èƒ½æ€§èƒ½ä¸ä¼šå¤ªå¥½ã€‚å›å¤´ç ”ç©¶ä¸‹Springå’‹åšçš„ã€‚","like_count":6},{"had_liked":false,"id":261995,"user_name":"éƒ‘å¤§é’±","can_delete":false,"product_type":"c1","uid":1503067,"ip_address":"","ucode":"114CF48056880E","user_header":"https://static001.geekbang.org/account/avatar/00/16/ef/5b/ff28088f.jpg","comment_is_top":false,"comment_ctime":1605601941,"is_pvip":false,"replies":[{"id":"96127","content":"è¯´çš„å¥½","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹äº‰","uid":"1190123","ctime":1606701207,"ip_address":"","comment_id":261995,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18785471125","product_id":100039001,"comment_content":"â€œåˆçº§å·¥ç¨‹å¸ˆåœ¨ç»´æŠ¤ä»£ç ï¼Œé«˜çº§å·¥ç¨‹å¸ˆåœ¨è®¾è®¡ä»£ç ï¼Œèµ„æ·±å·¥ç¨‹å¸ˆåœ¨é‡æ„ä»£ç â€<br>ä¾èµ–æ³¨å…¥æ¡†æ¶å¥½ç‰›é€¼å‘€ï¼å½“æ‰‹æŠŠæ‰‹æ•™æˆ‘è®¾è®¡ä¸€ä¸ªæ¡†æ¶ä¹‹åï¼Œæ‰ç ´é™¤äº†æˆ‘å¯¹æ¡†æ¶çš„æƒå¨å’Œè¿·ä¿¡ã€‚<br>è‡ªå·±æœ€å¼€å§‹åšä¸šåŠ¡ä¹Ÿæ˜¯åœ¨åŸæœ‰æ¡†æ¶ä¸Šé¢ä¿®ä¿®è¡¥è¡¥ï¼Œå›è¿‡å¤´æ¥çœ‹ï¼Œå‘ç°è‡ªå·±éå¸¸èƒ½å¿ï¼Œå³ä½¿åŸæœ‰çš„æ¡†æ¶å¾ˆéš¾ç”¨ï¼Œè‡ªå·±ä¹Ÿèƒ½åšæŒç”¨ä¸‹å»ã€‚<br>è½¬å¿µä¸€æƒ³ï¼Œé‚£ä¸æ˜¯èƒ½å¿ï¼Œé‚£æ˜¯æ‡’ã€‚æ‡’å¾—å»ç†è§£æ¡†æ¶çš„åŸç†ï¼Œæ‡’å¾—è®©å®ƒæ›´æ˜“ç”¨ã€‚<br>åƒè±Œè±†å…¬ä¸»ä¸€æ ·ä¿æŒè‡ªå·±çš„æ•æ„Ÿï¼Œæ˜¯æŒç»­æ”¹è¿›çš„åŠ¨åŠ›ã€‚","like_count":5,"discussions":[{"author":{"id":1190123,"avatar":"https://static001.geekbang.org/account/avatar/00/12/28/eb/af064421.jpg","nickname":"ç‹äº‰","note":"","ucode":"2B611BE0E0EDD4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":509684,"discussion_content":"è¯´çš„å¥½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606701207,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":202523,"user_name":"xk_","can_delete":false,"product_type":"c1","uid":1514305,"ip_address":"","ucode":"DFE1AC38EA78A7","user_header":"https://static001.geekbang.org/account/avatar/00/17/1b/41/dbb7d785.jpg","comment_is_top":false,"comment_ctime":1586001628,"is_pvip":false,"discussion_count":5,"race_medal":0,"score":"18765870812","product_id":100039001,"comment_content":"å›ç­”ä¸€ä¸‹è¯¾åé¢˜ï¼š<br>é¦–å…ˆï¼Œæˆ‘ä»¬ä¸ç”¨springåˆ›å»ºå¯¹è±¡å»æ€è€ƒä¸€ä¸‹ï¼š<br>1.æ„é€ å‡½æ•°æ˜¯ä¸å¯èƒ½å­˜åœ¨å¾ªç¯ä¾èµ–çš„ï¼Œå› ä¸ºä½œä¸ºå‚æ•°ä¾èµ–çš„å¯¹è±¡å¿…é¡»æå‰å­˜åœ¨ï¼Œå‚æ•°çš„åˆ›å»ºä¹Ÿéœ€è¦å‚æ•°ï¼Œæ‰€ä»¥ä¸å­˜åœ¨ã€‚<br>2.setteræ³¨å…¥ï¼ŒAä¾èµ–Bï¼ŒBä¾èµ–Aï¼Œåªè¦æœ€åå½¢æˆé—­ç¯ï¼Œå°±ä¸ä¼šæŠ¥é”™ã€‚<br>3. setteræ³¨å…¥ï¼Œåˆ›å»ºAéœ€è¦Bï¼Œåˆ›å»ºBéœ€è¦æ–°çš„Aï¼Œåˆ›å»ºæ–°çš„Aéœ€è¦æ–°çš„Bâ€¦å¦‚æ­¤å¾ªç¯ä¸‹å»å°±ä¼šæ ˆæº¢å‡ºäº†ã€‚<br><br>springä¹Ÿæ­£å¥½æ˜¯è¿™æ ·å®ç°çš„ã€‚<br>å¯¹äºç¬¬äºŒç‚¹ï¼Œspringæ˜¯ç”¨ä¸‰çº§ç¼“å­˜æ¥å®ç°çš„ã€‚","like_count":4},{"had_liked":false,"id":178917,"user_name":"è¾£ä¹ˆå¤§","can_delete":false,"product_type":"c1","uid":1396951,"ip_address":"","ucode":"AB308B6DCA0108","user_header":"https://static001.geekbang.org/account/avatar/00/15/50/d7/f82ed283.jpg","comment_is_top":false,"comment_ctime":1581855208,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"18761724392","product_id":100039001,"comment_content":"å¾ªç¯ä¾èµ–çš„æ„æ€æ˜¯Aä¾èµ–äºBï¼ŒBä¾èµ–äºAï¼ˆBean A â†’ Bean B â†’ Bean Aï¼‰å‡ºç°å¾ªç¯ä¾èµ–ï¼Œé¦–å…ˆåº”è¯¥è€ƒè™‘è®¾è®¡å‡ºäº†é—®é¢˜ï¼Œåº”è¯¥é‡æ–°åˆ’åˆ†ç±»çš„èŒè´£ã€‚å¦‚æœæ˜¯è€çš„é¡¹ç›®ï¼Œåˆ™å¯ä»¥æŒ‰ç…§å…¶ä»–å°ä¼™ä¼´ç»™å‡ºçš„è§£å†³æ–¹å¼ã€‚æœ€å¥½çš„è§£å†³æ–¹æ¡ˆè¿˜æ˜¯çœ‹å®˜æ–¹æ–‡æ¡£ï¼šé“¾æ¥åœ¨è¿™é‡Œhttps:&#47;&#47;docs.spring.io&#47;spring&#47;docs&#47;current&#47;spring-framework-reference&#47;core.html#beans<br>Circular dependencies<br>If you use predominantly constructor injection, it is possible to create an unresolvable circular dependency scenario.<br><br>For example: Class A requires an instance of class B through constructor injection, and class B requires an instance of class A through constructor injection. If you configure beans for classes A and B to be injected into each other, the Spring IoC container detects this circular reference at runtime, and throws a BeanCurrentlyInCreationException.<br><br>One possible solution is to edit the source code of some classes to be configured by setters rather than constructors. Alternatively, avoid constructor injection and use setter injection only. In other words, although it is not recommended, you can configure circular dependencies with setter injection.<br><br>Unlike the typical case (with no circular dependencies), a circular dependency between bean A and bean B forces one of the beans to be injected into the other prior to being fully initialized itself (a classic chicken-and-egg scenario).","like_count":4},{"had_liked":false,"id":197853,"user_name":"change","can_delete":false,"product_type":"c1","uid":1110876,"ip_address":"","ucode":"D78B4B3752B6FE","user_header":"https://static001.geekbang.org/account/avatar/00/10/f3/5c/8704e784.jpg","comment_is_top":false,"comment_ctime":1585400850,"is_pvip":true,"discussion_count":1,"race_medal":5,"score":"10175335442","product_id":100039001,"comment_content":"å·¥å‚æ¨¡å¼ä¸DIå®¹å™¨<br>1ã€DIå®¹å™¨ç›¸å½“äºä¸€ä¸ªå¤§çš„å·¥å‚ç±»,è´Ÿè´£åœ¨ç¨‹åºå¯åŠ¨,æ ¹æ®é…ç½®å‚æ•°å°†æ‰€éœ€è¦çš„å¯¹è±¡éƒ½åˆ›å»ºå¥½,å½“ç¨‹åºéœ€è¦æ—¶,ç›´æ¥ä»å®¹å™¨ä¸­è·å–æŸç±»å¯¹è±¡;<br>2ã€å·¥å‚ç±»åªè´Ÿè´£åˆ›å»ºæŸä¸€ä¸ªæˆ–æŸä¸€ç»„ç±»å¯¹è±¡,è€ŒDIå®¹å™¨æ˜¯åˆ›å»ºæ•´ä¸ªåº”ç”¨æ‰€æœ‰éœ€è¦çš„ç±»å¯¹è±¡<br>DIå®¹å™¨çš„åŸºæœ¬åŠŸèƒ½<br>1ã€è¯»å–é…ç½®æ–‡ä»¶:é…ç½®æ–‡ä»¶ä¸­åŒ…å«è¦åˆ›å»ºçš„ç±»å¯¹è±¡åŠåˆ›å»ºç±»å¯¹è±¡çš„å¿…è¦ä¿¡æ¯(ä½¿ç”¨é‚£ä¸ªæ„é€ å‡½æ•°åŠæ„é€ å‡½æ•°çš„å‚æ•°åˆ—è¡¨);<br>2ã€åˆ›å»ºå¯¹è±¡:åˆ©ç”¨åå°„æœºåˆ¶,åŠ¨æ€åŠ è½½ç±»ã€åˆ›å»ºå¯¹è±¡;<br>3ã€å¯¹è±¡ç”Ÿå‘½å‘¨æœŸç®¡ç†:æ¯æ¬¡è·å–éƒ½è¿”å›æ–°åˆ›å»ºçš„å¯¹è±¡(prototype)å’Œæ¯æ¬¡è·å–éƒ½è¿”å›åŒä¸€ä¸ªäº‹å…ˆåˆ›å»ºå¥½çš„å¯¹è±¡(singleton,å³å•ä¾‹å¯¹è±¡),åœ¨å•ä¾‹å¯¹è±¡ä¸­,è¿˜åŒºåˆ†æ˜¯å¦åœ¨ç¨‹åºå¯åŠ¨æ—¶åˆ›å»ºè¿˜æ˜¯éœ€è¦æ—¶åˆ›å»º(init-lazy);<br>DIå®¹å™¨æ¥å£è®¾è®¡<br>1ã€BeanConfigParser:è§£æé…ç½®æ–‡ä»¶<br>2ã€BeanFactory:æ ¹æ®è§£æé…ç½®çš„ç»“æœæ¥åˆ›å»ºå¯¹è±¡;<br>1ã€ApplicationContext:DIå®¹å™¨å†…çš„ä¸Šå¸ç±»(ç»„è£…BeanFactoryå’ŒConfigParser),ä¹Ÿæ˜¯å¯¹å¤–çš„æ¥å£;","like_count":3,"discussions":[{"author":{"id":1148142,"avatar":"https://static001.geekbang.org/account/avatar/00/11/84/ee/3a364ccd.jpg","nickname":"æ»‡è¥¿ä¹‹ç‹","note":"","ucode":"B1EBFFAE3AECEF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":553140,"discussion_content":"å…¬ç”¨çš„è¿˜æ˜¯å¾—æå‡ºæ¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645752073,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":181016,"user_name":"yu","can_delete":false,"product_type":"c1","uid":1138645,"ip_address":"","ucode":"56856DCC0C8387","user_header":"https://static001.geekbang.org/account/avatar/00/11/5f/d5/2fec2911.jpg","comment_is_top":false,"comment_ctime":1582460194,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10172394786","product_id":100039001,"comment_content":"å­¦ä¹ springçš„æ—¶å€™è€å¸ˆè®²è¿‡ï¼Œå½“æ—¶å°±æ˜¯èƒŒäº†ä¸€ä¸‹ï¼ŒçŸ¥é“æœ‰è¿™ä¹ˆå›äº‹å„¿ï¼Œè¿™å›ç®—æ˜¯çŸ¥é“äº†æ¥é¾™å»è„‰","like_count":2},{"had_liked":false,"id":346751,"user_name":"Geek_d1f952","can_delete":false,"product_type":"c1","uid":2906259,"ip_address":"","ucode":"179570630107A0","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/bFOAzic4EYicm2U3mdHKl67uceibPpgM7QBC8nAGdMCC6PCiamolNIfw9rstzGCEBNiaIWkianFG28VZzOggcehkMic5A/132","comment_is_top":false,"comment_ctime":1653399487,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5948366783","product_id":100039001,"comment_content":"çœ‹ç€æœ‰ç‚¹æ‡µ è¿™ä¸€è®²å¯¹å…¶ä»–è¯­è¨€çš„åŒå­¦ä¸æ˜¯å¾ˆå‹å¥½å•Š","like_count":2},{"had_liked":false,"id":344673,"user_name":"KK","can_delete":false,"product_type":"c1","uid":1324863,"ip_address":"","ucode":"FFC31A3FE3A285","user_header":"https://static001.geekbang.org/account/avatar/00/14/37/3f/a9127a73.jpg","comment_is_top":false,"comment_ctime":1651719588,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"5946686884","product_id":100039001,"comment_content":"è¿™é‡Œä¾‹å­ï¼Œè¿‡äºé™åˆ¶è¯­è¨€äº†ã€‚å¯¹ java ç”¨æˆ·å‹å¥½ï¼Œå¯¹å…¶ä»–ç”¨æˆ·ä¼¼ä¹æ„ä¹‰ä¸å¤§ã€‚","like_count":2,"discussions":[{"author":{"id":1190123,"avatar":"https://static001.geekbang.org/account/avatar/00/12/28/eb/af064421.jpg","nickname":"ç‹äº‰","note":"","ucode":"2B611BE0E0EDD4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":503369,"discussion_content":"å¹¶ä¸æ˜¯éƒ½ä¸èƒ½åŠ çš„ï¼Œå¿…è¦çš„æ—¶å€™ä¹Ÿå¯ä»¥åŠ getterã€setterçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597453600,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":340408,"user_name":"è°¢å°è·¯","can_delete":false,"product_type":"c1","uid":1035064,"ip_address":"","ucode":"C9FE2EB10DC105","user_header":"https://static001.geekbang.org/account/avatar/00/0f/cb/38/4c9cfdf4.jpg","comment_is_top":false,"comment_ctime":1648802106,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5943769402","product_id":100039001,"comment_content":"ç¾¡æ…•è¿™äº›å­¦ Java çš„ï¼Œçœ‹çš„æ¸…æ¸…æ¥šæ¥šï¼Œä½ é—®é—®æ²¡æ¥è§¦ Java çœ‹çš„ç´¯ä¸ï¼Ÿ","like_count":1},{"had_liked":false,"id":215467,"user_name":"Pluto","can_delete":false,"product_type":"c1","uid":1038251,"ip_address":"","ucode":"E292AFAD428135","user_header":"https://static001.geekbang.org/account/avatar/00/0f/d7/ab/15c9b94e.jpg","comment_is_top":false,"comment_ctime":1588996526,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"5883963822","product_id":100039001,"comment_content":"çœ‹äº†ç•™è¨€æœ‰äº›æ„Ÿæ…¨ï¼Œ@Autowired æ˜¯ä»€ä¹ˆæ³¨å…¥æ–¹å¼ï¼Ÿè¿™ç§æ–¹å¼çš„å¾ªç¯ä¾èµ– Spring å¯ä»¥è‡ªåŠ¨è§£å†³å—ï¼Ÿå¦‚æœå¯ä»¥ï¼Œå“ªç§åœºæ™¯ä¸‹å¯ä»¥è§£å†³ï¼Ÿå¦‚æœä¸è¡Œï¼Œå“ªç§åœºæ™¯ä¸‹ä¸èƒ½è§£å†³ï¼ŸçœŸçš„è¸©è¿‡å‘çš„äººæ‰æ‡‚","like_count":1,"discussions":[{"author":{"id":1074897,"avatar":"https://static001.geekbang.org/account/avatar/00/10/66/d1/8664c464.jpg","nickname":"flyCoder","note":"","ucode":"82FB7B60775978","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":315933,"discussion_content":"å¤§ä½¬ï¼Œä¸è¯¦ç»†è§£é‡Šä¸‹ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603337885,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":189350,"user_name":"ç©ºç™½æ˜µç§°","can_delete":false,"product_type":"c1","uid":1433815,"ip_address":"","ucode":"91F50CA25102AB","user_header":"https://static001.geekbang.org/account/avatar/00/15/e0/d7/744bd8c3.jpg","comment_is_top":false,"comment_ctime":1584504181,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5879471477","product_id":100039001,"comment_content":"ä½œä¸ºä¸€ä¸ªswifterï¼Œæˆ‘ç«Ÿç„¶ä¹Ÿçœ‹æ‡‚äº†è¿™é‡Œçš„demoå®ä¾‹ä»£ç ã€‚é˜…è¯»javaçš„èƒ½åŠ›æœç„¶åœ¨é€æ­¥æé«˜ã€‚<br>å…³äºç»ƒä¹ éƒ¨åˆ†ï¼Œå¦‚æœå•ä¾‹åœ¨åˆ›å»ºæ—¶å‘ç”Ÿäº†ç¯ä¾èµ–ï¼Œè¿™æ—¶ä¸€å®šæ˜¯é”™è¯¯çš„ã€æ­¤æ—¶å°±è¦æ£€æŸ¥é…ç½®äº†ã€‚å¦‚æœæ˜¯éå•ä¾‹å‚æ•°ä¾èµ–ï¼Œä¸ªäººæ„Ÿè§‰è¿™é‡Œä¾èµ–å…³ç³»è®¾è®¡åº”è¯¥è¶‹å‘äºæ ‘çš„å½¢çŠ¶ï¼Œè€Œéè®¾è®¡æˆæœ‰å‘å›¾ã€‚å¦‚æœå‘ç°ä¾èµ–å…³ç³»æ˜¯å›¾çš„å½¢çŠ¶ï¼Œåº”è¯¥è€ƒè™‘è°ƒæ•´æ•´ä½“å®ç°ä»£ç æ¶æ„äº†ã€‚ä¸çŸ¥é“æˆ‘ç†è§£å¯¹ä¸å¯¹ã€‚<br>å¸Œæœ›å„ä½å¤§ç¥å¤šå¤šæŒ‡ç‚¹ğŸ™","like_count":1},{"had_liked":false,"id":178768,"user_name":"FIGNT","can_delete":false,"product_type":"c1","uid":1540988,"ip_address":"","ucode":"D9DB185AE9E67C","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKZ16iaIia0029oI1Qh5NicibpbTiaBAaCOPYXoLplKHr6uQ2rSVxPZanBvpMcL2NuhwKQYCFnaHP5tedQ/132","comment_is_top":false,"comment_ctime":1581820506,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5876787802","product_id":100039001,"comment_content":"è¿™ä¸ªäº‰å“¥çš„æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹ç¾çš„é€’å½’æœ‰ç­”æ¡ˆã€‚å¯¹è±¡ä¾èµ–ä¸ªæ•°å¯ä»¥é™åˆ¶ä¸ªå¤§å°ï¼Œé€’å½’æ—¶å¦‚æœè¶…è¿‡è¯¥æ·±åº¦å°±æŠ¥é”™ã€‚å¯èƒ½æœ‰æ›´å¥½çš„æ–¹å¼ï¼ŒæœŸå¾…è€å¸ˆçš„ç­”æ¡ˆ","like_count":1,"discussions":[{"author":{"id":1190123,"avatar":"https://static001.geekbang.org/account/avatar/00/12/28/eb/af064421.jpg","nickname":"ç‹äº‰","note":"","ucode":"2B611BE0E0EDD4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":493263,"discussion_content":"åé¢ä¼šè®²åˆ°çš„ ä½ å¾€åçœ‹çœ‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588042140,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":178341,"user_name":"Frank","can_delete":false,"product_type":"c1","uid":1018370,"ip_address":"","ucode":"7A488CC6FE15E7","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8a/02/828938c9.jpg","comment_is_top":false,"comment_ctime":1581665193,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5876632489","product_id":100039001,"comment_content":"ä»€ä¹ˆåœºæ™¯ä¸‹ä½¿ç”¨å·¥å‚æ¨¡å¼åˆ¤æ–­ä¾æ®ä¸ºï¼šå½“åˆ›å»ºå¯¹è±¡æ˜¯ä¸€ä¸ªâ€œå¤§å·¥ç¨‹â€æ—¶ï¼Œä¸€èˆ¬ä½¿ç”¨å·¥å‚æ¨¡å¼æ¥å®ç°ï¼Œå°†å¯¹è±¡çš„å¤æ‚é€»è¾‘å°è£…èµ·æ¥ï¼Œå®ç°å¯¹è±¡çš„åˆ›å»ºå’Œä½¿ç”¨åˆ†ç¦»ï¼Œä½¿å¾—ä»£ç ç»“æ„æ›´åŠ æ¸…æ™°ï¼Œç±»çš„èŒè´£æ›´åŠ å•ä¸€ï¼Œä¹Ÿä½“ç°äº†ä¾èµ–åè½¬åŸåˆ™ã€‚â€œå¤§å·¥ç¨‹â€çš„åˆ¤æ–­ä¾æ®æœ‰ä¸¤ä¸ªï¼šåˆ›å»ºè¿‡ç¨‹æ¶‰åŠå¤æ‚çš„if-elseé€»è¾‘åˆ¤æ–­å’Œå¯¹è±¡åˆ›å»ºéœ€è¦ç»„è£…å¤šä¸ªå…¶ä»–ç±»å¯¹è±¡æˆ–è€…éœ€è¦å¤æ‚çš„åˆå§‹åŒ–è¿‡ç¨‹ã€‚<br>Springçš„IOCå®¹å™¨å°±æ˜¯ä¸€ä¸ªå…¸å‹çš„å·¥å‚ï¼Œå½“æˆ‘ä»¬éœ€è¦Beanæ—¶ï¼Œåªè¦æ­£ç¡®çš„é…ç½®äº†å¯¹è±¡åˆ›å»ºéœ€è¦çš„è§„åˆ™ï¼Œä»–ä»¬é€šè¿‡IOCå®¹å™¨æä¾›çš„æ¥å£å°±å¯ä»¥è·å–å¯¹è±¡ï¼Œå®ç°äº†æ§åˆ¶åè½¬ã€‚<br>å¯¹äºè¯¾å ‚è®¨è®ºï¼šä¼šå‡ºç°å †æ ˆæº¢å‡ºStackOverflowErrorå¼‚å¸¸ã€‚","like_count":1},{"had_liked":false,"id":178257,"user_name":"Monday","can_delete":false,"product_type":"c1","uid":1250907,"ip_address":"","ucode":"77B9BACC783598","user_header":"https://static001.geekbang.org/account/avatar/00/13/16/5b/83a35681.jpg","comment_is_top":false,"comment_ctime":1581644425,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5876611721","product_id":100039001,"comment_content":"æ€è€ƒé¢˜ï¼š<br>1ã€å¦‚æœå¾ªç¯ä¾èµ–çš„ç±»éƒ½æ˜¯SINGLETONï¼Œä¸ä¼šå‡ºç°å †æ ˆæº¢å‡º<br>2ã€å¦‚æœå¾ªç¯ä¾èµ–çš„ç±»éƒ½æ˜¯PROTOTYPEï¼Œæœ¬ç« çš„ä»£ç æ¥çœ‹ï¼Œçš„ç¡®ä¼šå‡ºç°å †æ ˆæº¢å‡ºï¼›è§£å†³åŠæ³•ï¼Œå¯ä»¥åšé€’å½’çš„æ·±åº¦æ§åˆ¶ã€‚","like_count":1},{"had_liked":false,"id":352370,"user_name":"å°å­¦ç”Ÿçš„å¤§é“é”¤","can_delete":false,"product_type":"c1","uid":1793606,"ip_address":"","ucode":"347B17A73FE7A6","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/90DWsNicbNLJqRBLXWgM0t7AomqD4UpNnGFtkw4CorUg27tfuPfDiaImEMQkesCzzmFNicCPwHtYFjQ16Alf2fxjQ/132","comment_is_top":false,"comment_ctime":1658589368,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1658589368","product_id":100039001,"comment_content":"é€šè¿‡spring IOCå®¹å™¨è®²è§£äº†å·¥å‚æ–¹æ³•æ¨¡å¼çš„åº”ç”¨ï¼Œæ˜ç™½äº†é€šè¿‡å·¥å‚æ–¹æ³•æ¨¡å¼éš”ç¦»å˜åŒ–ï¼Œéš”ç¦»å¤æ‚çš„åŸºæœ¬å¤„ç†æµç¨‹å’Œæ•ˆæœã€‚","like_count":0},{"had_liked":false,"id":340283,"user_name":"å°”å†¬æ©™","can_delete":false,"product_type":"c1","uid":1225224,"ip_address":"","ucode":"0B013A49BC18DA","user_header":"https://static001.geekbang.org/account/avatar/00/12/b2/08/92f42622.jpg","comment_is_top":false,"comment_ctime":1648718944,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1648718944","product_id":100039001,"comment_content":"ä¸æ˜¯å¾ˆæ˜ç™½  private List&lt;ConstructorArg&gt; constructorArgs = new ArrayList&lt;&gt;(); è¿™é‡Œä¸ºå•¥æ˜¯è·å–çš„æ‰€æœ‰æ„é€ å™¨å‚æ•°ï¼Ÿè€Œä¸æ˜¯æ‰€æœ‰æ„é€ å™¨ã€‚","like_count":0},{"had_liked":false,"id":322582,"user_name":"é£äº‘","can_delete":false,"product_type":"c1","uid":1240650,"ip_address":"","ucode":"08A9E045664843","user_header":"","comment_is_top":false,"comment_ctime":1637487755,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1637487755","product_id":100039001,"comment_content":"å¹²è´§æ»¡æ»¡","like_count":0},{"had_liked":false,"id":322416,"user_name":"é™†ä¸€é¸£çŒœä¸åŠ¨","can_delete":false,"product_type":"c1","uid":2831163,"ip_address":"","ucode":"68E89A037F9A0C","user_header":"https://static001.geekbang.org/account/avatar/00/2b/33/3b/0b25b622.jpg","comment_is_top":false,"comment_ctime":1637377410,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1637377410","product_id":100039001,"comment_content":"æ„Ÿè§‰å†™å¥½ä»£ç æœ€é‡è¦çš„è¿˜æ˜¯ç²¾å‡†æ‹†è§£åŠŸèƒ½çš„èƒ½åŠ›","like_count":0},{"had_liked":false,"id":320332,"user_name":"charmsongo","can_delete":false,"product_type":"c1","uid":1609051,"ip_address":"","ucode":"4FBEE716E93A1A","user_header":"https://static001.geekbang.org/account/avatar/00/18/8d/5b/383a49e4.jpg","comment_is_top":false,"comment_ctime":1636257842,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1636257842","product_id":100039001,"comment_content":"æ€»ç»“<br>1ã€å·¥å‚æ¨¡å¼å’Œ DI å®¹å™¨æœ‰ä½•åŒºåˆ«ï¼Ÿ<br>\tä¸€ä¸ªå·¥å‚ç±»åªè´Ÿè´£æŸä¸ªç±»å¯¹è±¡æˆ–è€…æŸä¸€ç»„ç›¸å…³ç±»å¯¹è±¡ï¼ˆç»§æ‰¿è‡ªåŒä¸€æŠ½è±¡ç±»æˆ–è€…æ¥å£çš„å­ç±»ï¼‰çš„åˆ›å»ºï¼Œè€Œ DI å®¹å™¨è´Ÿè´£çš„æ˜¯æ•´ä¸ªåº”ç”¨ä¸­æ‰€æœ‰ç±»å¯¹è±¡çš„åˆ›å»ºã€‚<br>2ã€DI å®¹å™¨çš„æ ¸å¿ƒåŠŸèƒ½æœ‰å“ªäº›ï¼Ÿ<br>\tä¸€ä¸ªç®€å•çš„ DI å®¹å™¨çš„æ ¸å¿ƒåŠŸèƒ½ä¸€èˆ¬æœ‰ä¸‰ä¸ªï¼šé…ç½®è§£æã€å¯¹è±¡åˆ›å»ºå’Œå¯¹è±¡ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚<br>3ã€å¦‚ä½•å®ç°ä¸€ä¸ªç®€å•çš„ DI å®¹å™¨ï¼Ÿ<br>\tæ ¸å¿ƒé€»è¾‘åªéœ€è¦åŒ…æ‹¬è¿™æ ·ä¸¤ä¸ªéƒ¨åˆ†ï¼šé…ç½®æ–‡ä»¶è§£æã€æ ¹æ®é…ç½®æ–‡ä»¶é€šè¿‡â€œåå°„â€è¯­æ³•æ¥åˆ›å»ºå¯¹è±¡ã€‚<br>\tBeansFactory åˆ›å»ºå¯¹è±¡ç”¨åˆ°çš„ä¸»è¦æŠ€æœ¯ç‚¹å°±æ˜¯ Java ä¸­çš„åå°„è¯­æ³•ï¼šä¸€ç§åŠ¨æ€åŠ è½½ç±»å’Œåˆ›å»ºå¯¹è±¡çš„æœºåˆ¶ã€‚","like_count":0},{"had_liked":false,"id":307656,"user_name":"Geek_b7eb88","can_delete":false,"product_type":"c1","uid":1573715,"ip_address":"","ucode":"0EB46381D9B1CB","user_header":"","comment_is_top":false,"comment_ctime":1629191091,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1629191091","product_id":100039001,"comment_content":"è¿™ç¯‡æ–‡ç« æœ‰ç‚¹ç±»ä¼¼äºiOSä¸­ï¼ŒRuntimeçš„ç±»å’Œå¯¹è±¡ã€‚å¸®åŠ©æˆ‘ä»¬çŸ¥é“ç±»åº•å±‚æ•´ä½“ç»“æ„ï¼Œæ–¹æ³•è°ƒç”¨ç­‰ã€‚","like_count":0},{"had_liked":false,"id":303728,"user_name":"Derek","can_delete":false,"product_type":"c1","uid":1572759,"ip_address":"","ucode":"AA6959B3E80019","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/SGkm1DWZU7d1FepiczXZvLahCWP5Px4aNdDRUJGBIy2IWuUSGaNRn8zdWMyr0wNEjx0zAPyac6h5ya1VFDbibicDQ/132","comment_is_top":false,"comment_ctime":1626946097,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1626946097","product_id":100039001,"comment_content":"æœ¬äººå†™çš„ç®€åŒ–ç‰ˆçš„springæ¡†æ¶ï¼Œæœ‰å…´è¶£çš„å°ä¼™ä¼´äº’ç›¸å­¦ä¹ ä¸‹ï¼ŒGitHubæœmini-spring","like_count":0},{"had_liked":false,"id":303727,"user_name":"Derek","can_delete":false,"product_type":"c1","uid":1572759,"ip_address":"","ucode":"AA6959B3E80019","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/SGkm1DWZU7d1FepiczXZvLahCWP5Px4aNdDRUJGBIy2IWuUSGaNRn8zdWMyr0wNEjx0zAPyac6h5ya1VFDbibicDQ/132","comment_is_top":false,"comment_ctime":1626945848,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1626945848","product_id":100039001,"comment_content":"æœ¬äººå†™çš„ç®€åŒ–ç‰ˆçš„springæ¡†æ¶ï¼Œæœ‰å…´è¶£çš„äº’ç›¸æ²Ÿé€šå­¦ä¹ ä¸‹ï¼Œåœ°å€ï¼š","like_count":0,"discussions":[{"author":{"id":1283461,"avatar":"https://static001.geekbang.org/account/avatar/00/13/95/85/15cd21c2.jpg","nickname":"æ¨é”‹","note":"","ucode":"85A7828A538FB0","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":284969,"discussion_content":"vue.jsä¸æ˜¯ä¸ªæ¡†æ¶å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592702542,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":299470,"user_name":"Ivan.Qi","can_delete":false,"product_type":"c1","uid":1099170,"ip_address":"","ucode":"36F46A4D1F0EAA","user_header":"https://static001.geekbang.org/account/avatar/00/10/c5/a2/4ece341b.jpg","comment_is_top":false,"comment_ctime":1624646816,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1624646816","product_id":100039001,"comment_content":"PHPä¾èµ–æ³¨å…¥å®¹å™¨<br>https:&#47;&#47;github.com&#47;wuYin&#47;blog&#47;blob&#47;master&#47;php&#47;laravel-ioc-design-pattern-and-service-container.md","like_count":0},{"had_liked":false,"id":299229,"user_name":"å­Ÿåº†ç¥¥","can_delete":false,"product_type":"c1","uid":1454705,"ip_address":"","ucode":"BA5CE528587DAD","user_header":"https://static001.geekbang.org/account/avatar/00/16/32/71/a4fbd9f3.jpg","comment_is_top":false,"comment_ctime":1624519646,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1624519646","product_id":100039001,"comment_content":"public void addBeanDefinitions(List beanDefinitionList) { for (BeanDefinition beanDefinition : beanDefinitionList) { this.beanDefinitions.putIfAbsent(beanDefinition.getId(), beanDefinition); } for (BeanDefinition beanDefinition : beanDefinitionList) { if (beanDefinition.isLazyInit() == false &amp;&amp; beanDefinition.isSingleton()) { createBean(beanDefinition); } } }<br><br>è¿™2ä¸ªforå¾ªç¯æ˜¯ä¸æ˜¯å¯ä»¥åˆæˆä¸€ä¸ªforå¾ªç¯","like_count":0},{"had_liked":false,"id":286621,"user_name":"äººç”Ÿè‹¥åªå¦‚åˆè§","can_delete":false,"product_type":"c1","uid":1254828,"ip_address":"","ucode":"6D9E2D10550210","user_header":"https://static001.geekbang.org/account/avatar/00/13/25/ac/44f8cc92.jpg","comment_is_top":false,"comment_ctime":1617433174,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1617433174","product_id":100039001,"comment_content":"å·¥å‚æ¨¡å¼ç¤ºä¾‹ï¼šDIå®¹å™¨ã€‚<br>DIå®¹å™¨æ ¸å¿ƒï¼šé…ç½®æ–‡ä»¶è§£æã€æ ¹æ®è§£æçš„ç±»ä¿¡æ¯åå°„ç”Ÿæˆå¯¹è±¡ã€ç®¡ç†å¯¹è±¡ç”Ÿå‘½å‘¨æœŸã€‚","like_count":0},{"had_liked":false,"id":285918,"user_name":"æ¸Šà¸ˆà¸¸à¹Šà¸š","can_delete":false,"product_type":"c1","uid":1530295,"ip_address":"","ucode":"E3A2C1E89EB576","user_header":"https://static001.geekbang.org/account/avatar/00/17/59/b7/9db9c657.jpg","comment_is_top":false,"comment_ctime":1617074247,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1617074247","product_id":100039001,"comment_content":"æ€è€ƒé¢˜ï¼š<br>æˆ‘è§‰å¾—å¯ä»¥ç”¨ã€Šæ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹ç¾ã€‹é‡Œè®²åˆ°çš„æ‹“æ‰‘å›¾æ¥è§£å†³ç¯ä¾èµ–çš„é—®é¢˜ã€‚<br>æˆ‘åœ¨https:&#47;&#47;github.com&#47;ClessLi&#47;bifrosté¡¹ç›®é‡Œpkg&#47;resolv&#47;V2&#47;nginx&#47;loop_preventer.LoopPreventeré‡Œå°±ç”¨åˆ°è¿™ä¸ªæœºåˆ¶ï¼Œè§£å†³äº†nginxé…ç½®æ–‡ä»¶includeå­é…ç½®æ–‡ä»¶ç¯åŠ è½½","like_count":0},{"had_liked":false,"id":280848,"user_name":"å¾¡é£","can_delete":false,"product_type":"c1","uid":1812807,"ip_address":"","ucode":"51C8212BE06364","user_header":"https://static001.geekbang.org/account/avatar/00/1b/a9/47/ded5da90.jpg","comment_is_top":false,"comment_ctime":1614421663,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1614421663","product_id":100039001,"comment_content":"æŠŠæœ¬æ–‡çš„ç¤ºä¾‹è¡¥å…¨äº†ï¼Œå‘å¸ƒåœ¨ä¸ªäººå…¬ä¼—å·ä¸Šï¼š<br>https:&#47;&#47;mp.weixin.qq.com&#47;s&#47;b4fjeE1YTCYj95_VwVUAuA","like_count":0},{"had_liked":false,"id":267019,"user_name":"æ·¤ç™½","can_delete":false,"product_type":"c1","uid":1206503,"ip_address":"","ucode":"D1E65DC40DAF68","user_header":"https://static001.geekbang.org/account/avatar/00/12/68/e7/ee47d0e2.jpg","comment_is_top":false,"comment_ctime":1607571533,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1607571533","product_id":100039001,"comment_content":"æ‰“å¡ï¼šç”¨Javaå®ç°äº†æ–‡ä¸­çš„æ¡ˆä¾‹ã€‚ï¼ˆé…ç½®è§£æé€»è¾‘åé¢è‡ªå·±æŠ½æ—¶é—´å†å®Œå–„ï¼‰","like_count":0},{"had_liked":false,"id":253601,"user_name":"RedDevil","can_delete":false,"product_type":"c1","uid":1131128,"ip_address":"","ucode":"F8F5DC209BB3B9","user_header":"https://static001.geekbang.org/account/avatar/00/11/42/78/7ba89c75.jpg","comment_is_top":false,"comment_ctime":1602810106,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1602810106","product_id":100039001,"comment_content":"å¤ªæ£’äº†ï¼Œä»ç†è®ºé«˜åº¦çœ‹spring","like_count":0},{"had_liked":false,"id":250856,"user_name":"å¤§å¶å­","can_delete":false,"product_type":"c1","uid":1135900,"ip_address":"","ucode":"31CCDE9E88C023","user_header":"https://static001.geekbang.org/account/avatar/00/11/55/1c/c76abe73.jpg","comment_is_top":false,"comment_ctime":1601262273,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1601262273","product_id":100039001,"comment_content":"å†æ¬¡çœ‹ åˆæœ‰ä¸ä¸€æ ·çš„æ”¶è·ï¼Œä»¿ä½›åªèƒ½æ˜¯è¿™æ ·ï¼Œç†æ‰€åº”å½“ï¼Œåå°„çœŸçš„æ˜¯ä¸€æŠŠâ€˜åˆ©å‰‘â€™","like_count":0},{"had_liked":false,"id":250092,"user_name":"ç‹å¤§å–µ","can_delete":false,"product_type":"c1","uid":1109528,"ip_address":"","ucode":"C14AAE3ED964DE","user_header":"https://static001.geekbang.org/account/avatar/00/10/ee/18/65e89d9c.jpg","comment_is_top":false,"comment_ctime":1600931388,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1600931388","product_id":100039001,"comment_content":"åœ¨æ¡†æ¶è®¾è®¡æ—¶ï¼Œå®Œå…¨å¯ä»¥ä½¿ç”¨DIæ¥é€šè¿‡é…ç½®æ§åˆ¶ç»„ä»¶çš„åˆ›å»ºã€ç»„è£…å’Œç®¡ç†ï¼Œå¯¹äºæ¡†æ¶æ¥è®²ï¼Œä¸€èˆ¬æ˜¯ä¸€äº›æœåŠ¡æ²»ç†ç›¸å…³çš„ç»„ä»¶ï¼Œå› ä¸ºæ˜¯æ¡†æ¶ï¼Œåº”è¯¥å¯ä»¥é¿å…é€šè¿‡åå°„è¿›è¡Œè·å–é…ç½®ã€‚<br>ç°å†µï¼Œå…¬å¸æ¡†æ¶æ¯ä¸ªåŸºç¡€ç»„ä»¶ä¼šæœ‰ä¸€ä¸ªç±»ä¼¼çš„å·¥å‚ç±»ã€‚","like_count":0},{"had_liked":false,"id":242345,"user_name":"îŒˆ","can_delete":false,"product_type":"c1","uid":2095026,"ip_address":"","ucode":"79DB151C0BFC63","user_header":"https://static001.geekbang.org/account/avatar/00/1f/f7/b2/b9d2d7d8.jpg","comment_is_top":false,"comment_ctime":1597676828,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1597676828","product_id":100039001,"comment_content":"springè§£å†³å¾ªç¯ä¾èµ–ä¸ºä»€ä¹ˆè¦ç”¨ä¸‰çº§ç¼“å­˜å‘¢ï¼Œä¸ªäººè§‰å¾—2çº§å°±å¤Ÿäº†ï¼Œç¬¬ä¸‰çº§çš„ç”¨å¤„æ²¡æœ‰æƒ³æ˜ç™½","like_count":0},{"had_liked":false,"id":240094,"user_name":"Magic","can_delete":false,"product_type":"c1","uid":1272047,"ip_address":"","ucode":"FD9CEDAA419EB0","user_header":"https://static001.geekbang.org/account/avatar/00/13/68/ef/6264ca3d.jpg","comment_is_top":false,"comment_ctime":1596761111,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1596761111","product_id":100039001,"comment_content":"1 ç”¨ä¸€ä¸ªmapå­˜å‚¨è§£æè¿‡çš„ç±»åï¼Œå½“è§£æä¸€ä¸ªæ–°ç±»åæ—¶åˆ°mapé‡ŒæŸ¥ä¸€ä¸‹ï¼Œå¦‚æœå·²å­˜åœ¨ï¼Œç›´æ¥æŠ¥é”™è¿”å›<br>2 è®¾ç½®æœ€æ·±é€’å½’æ·±åº¦ï¼Œä¾‹å¦‚64ã€‚è¶…è¿‡è¯¥æ·±åº¦ä¹ŸæŠ¥é”™è¿”å›ï¼Œè¿™æ ·åšæ˜¯ä¸ºäº†é¿å…æ ˆæº¢å‡º","like_count":0},{"had_liked":false,"id":238700,"user_name":"å†¬æ¸æš–","can_delete":false,"product_type":"c1","uid":1586800,"ip_address":"","ucode":"907E41AAE9A36C","user_header":"https://static001.geekbang.org/account/avatar/00/18/36/70/00122b24.jpg","comment_is_top":false,"comment_ctime":1596264842,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1596264842","product_id":100039001,"comment_content":"iocå®¹å™¨åŒ…å«ï¼šè¯»å–è§£æé…ç½®æ–‡ä»¶ã€‚å³ æ€ä¹ˆåˆ›å»ºå¯¹è±¡ï¼ˆå¦‚æ§åˆ¶å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸã€è·å–æºï¼‰ï¼Œç”¨è°å»åˆ›å»º(åˆ›å»ºå¯¹è±¡çš„å·¥å‚)","like_count":0},{"had_liked":false,"id":232086,"user_name":"å°‘å¹´é”¦æ—¶","can_delete":false,"product_type":"c1","uid":1313379,"ip_address":"","ucode":"70E2CFF88A0ACB","user_header":"https://static001.geekbang.org/account/avatar/00/14/0a/63/165b0d40.jpg","comment_is_top":false,"comment_ctime":1593852541,"is_pvip":false,"replies":[{"id":"85668","content":"ä¹Ÿå¯ä»¥~","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹äº‰","uid":"1190123","ctime":1593909599,"ip_address":"","comment_id":232086,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1593852541","product_id":100039001,"comment_content":"beanDefinition.isLazyInit() == false  ä¸ºä»€ä¹ˆä¸ç›´æ¥å†™æˆ!beanDefinition.isLazyInit() å‘¢","like_count":0,"discussions":[{"author":{"id":1190123,"avatar":"https://static001.geekbang.org/account/avatar/00/12/28/eb/af064421.jpg","nickname":"ç‹äº‰","note":"","ucode":"2B611BE0E0EDD4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479660,"discussion_content":"åé¢æœ‰è®²åˆ°çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577666020,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":227187,"user_name":"æ„¤æ€’çš„è™¾å¹²","can_delete":false,"product_type":"c1","uid":1266043,"ip_address":"","ucode":"CEBD1B2BE7BCEE","user_header":"https://static001.geekbang.org/account/avatar/00/13/51/7b/191a2112.jpg","comment_is_top":false,"comment_ctime":1592308897,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1592308897","product_id":100039001,"comment_content":"ä½¿ç”¨æ ˆä»£æ›¿é€’å½’åˆ›å»ºï¼Œåšåˆ°åˆ›å»ºè¿‡ç¨‹åœ¨å½“å‰ç±»å¯æ§ï¼›ä½¿ç”¨é›†åˆè®°å½•æ­£åœ¨åˆ›å»ºçš„å¯¹è±¡é“¾ï¼Œå¦‚æœå½“å‰ä¾èµ–å­˜åœ¨ä¸é›†åˆä¸­ï¼Œè¯´æ˜å­˜åœ¨å¾ªç¯ä¾èµ–ã€‚","like_count":0},{"had_liked":false,"id":226900,"user_name":"Leon Wong","can_delete":false,"product_type":"c1","uid":1073650,"ip_address":"","ucode":"B49B327367CF9E","user_header":"https://static001.geekbang.org/account/avatar/00/10/61/f2/ca989d6f.jpg","comment_is_top":false,"comment_ctime":1592225661,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1592225661","product_id":100039001,"comment_content":"å¾ªç¯ä¾èµ–å…¶å®ä¹Ÿå¾ˆå¥½è§£å†³ï¼Œå¦‚æœä¸¤ä¸ªç±»å‡ºç°äº†å¾ªç¯ä¾èµ–ï¼Œè¦ä¹ˆè¯´æ˜ä¾èµ–ä¸åˆç†ï¼Œè¦ä¹ˆè¯´æ˜ä½ éœ€è¦ä¸€ä¸ªæ›´é«˜å±‚çš„beanå»å›Šæ‹¬è¿™ä¸¤ä¸ªbeanï¼Œä»è€Œè§£å†³å¾ªç¯ä¾èµ–","like_count":0},{"had_liked":false,"id":212732,"user_name":"Cutler","can_delete":false,"product_type":"c1","uid":1228136,"ip_address":"","ucode":"2EDECFE039845B","user_header":"https://static001.geekbang.org/account/avatar/00/12/bd/68/3fd6428d.jpg","comment_is_top":false,"comment_ctime":1588204825,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1588204825","product_id":100039001,"comment_content":"å¯ä»¥é™åˆ¶é€’å½’è°ƒç”¨çš„å±‚çº§ï¼Œæ¯”å¦‚è¶…è¿‡100çº§å°±æŠ›å‡ºå¼‚å¸¸ï¼Œå› ä¸ºå³ä½¿æ²¡æœ‰å‡ºç°å¾ªç¯ä¾èµ–ï¼Œä¾èµ–å…³ç³»è¶…è¿‡100å±‚ä¹Ÿæ˜¯ä¸å¯æ¥å—çš„ã€‚","like_count":0},{"had_liked":false,"id":208406,"user_name":"Edward Lee","can_delete":false,"product_type":"c1","uid":1228518,"ip_address":"","ucode":"156223F1D7E94A","user_header":"https://static001.geekbang.org/account/avatar/00/12/be/e6/7808520d.jpg","comment_is_top":false,"comment_ctime":1587351800,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1587351800","product_id":100039001,"comment_content":"å­˜åœ¨ä¾èµ–å…³ç³»çš„ç±»åˆ›å»ºï¼Œåº”å±äºæ— ç¯å›¾çš„ä¸€ç±»ï¼Œå› æ­¤å¯ä»¥é€šè¿‡æ‹“æ‰‘æ’åºï¼Œç¡®å®šç±»çš„åˆ›å»ºé¡ºåºåŠæ£€æµ‹æ˜¯å¦å­˜åœ¨ç¯ï¼Œå¦‚æœå­˜åœ¨ç¯åˆ™è¯´æ˜é…ç½®é”™è¯¯ï¼Œéœ€æŠ›å‡ºå¼‚å¸¸å¤„ç†ã€‚","like_count":0},{"had_liked":false,"id":203247,"user_name":"KK","can_delete":false,"product_type":"c1","uid":1324863,"ip_address":"","ucode":"FFC31A3FE3A285","user_header":"https://static001.geekbang.org/account/avatar/00/14/37/3f/a9127a73.jpg","comment_is_top":false,"comment_ctime":1586160399,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"1586160399","product_id":100039001,"comment_content":"ç®€å•çš„ä¸œè¥¿å¤æ‚åŒ–äº†ï¼Œæ¯ä¸ªäººéƒ½æœ‰è‡ªå·±çš„ç†è§£ã€‚èƒ½å¤ŸæŠŠç®€å•çš„ä¸œè¥¿å¤æ‚åŒ–ï¼Œä¹Ÿä¸æ˜¯ä¸€ä»¶å®¹æ˜“çš„äº‹ã€‚","like_count":0},{"had_liked":false,"id":203241,"user_name":"KK","can_delete":false,"product_type":"c1","uid":1324863,"ip_address":"","ucode":"FFC31A3FE3A285","user_header":"https://static001.geekbang.org/account/avatar/00/14/37/3f/a9127a73.jpg","comment_is_top":false,"comment_ctime":1586159812,"is_pvip":false,"discussion_count":2,"race_medal":1,"score":"1586159812","product_id":100039001,"comment_content":"åœ¨è®²è§£åŸæ¥çš„æ—¶å€™ï¼Œèƒ½ä¸èƒ½å°‘ç”¨ä¸€äº›javaçš„ä¾‹å­çš„ï¼Œå¯ä»¥å¤šç”¨ä¸€ä¸‹æŠ½è±¡çš„ç†è®ºã€‚","like_count":0,"discussions":[{"author":{"id":1190123,"avatar":"https://static001.geekbang.org/account/avatar/00/12/28/eb/af064421.jpg","nickname":"ç‹äº‰","note":"","ucode":"2B611BE0E0EDD4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479450,"discussion_content":"è¿™ç§æƒ…å†µå°±è¦è„±é‚ªæ¶ä¹Ÿæ²¡åŠæ³• åé¢å®æˆ˜ç¯‡ä¼šè®²åˆ°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577666588,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":201368,"user_name":"@%åˆ%@","can_delete":false,"product_type":"c1","uid":1053509,"ip_address":"","ucode":"2B8A6134675ED7","user_header":"https://static001.geekbang.org/account/avatar/00/10/13/45/16c60da2.jpg","comment_is_top":false,"comment_ctime":1585756694,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1585756694","product_id":100039001,"comment_content":"setteræ³¨å…¥<br>è§£å†³å¾ªç¯ä¾èµ–ï¼Œspringçš„åšæ³•å¦‚ä¸‹ï¼Œåˆ›å»ºä¸€ä¸ªobejctFactoryï¼Œæä¾›æ‡’åŠ è½½çš„beanæå‰æš´éœ²ï¼Œåˆå§‹åŒ–å·¥ä½œï¼Œäº¤ç»™åé¢çš„beanPostProcessorå»æå®šã€‚","like_count":0},{"had_liked":false,"id":189212,"user_name":"ä¸å­¦ä¸è¡Œå•Š","can_delete":false,"product_type":"c1","uid":1335474,"ip_address":"","ucode":"69368165141C2D","user_header":"https://static001.geekbang.org/account/avatar/00/14/60/b2/ccebcb71.jpg","comment_is_top":false,"comment_ctime":1584488745,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584488745","product_id":100039001,"comment_content":"666","like_count":0},{"had_liked":false,"id":187758,"user_name":"åˆ˜ä¼Ÿé¾™","can_delete":false,"product_type":"c1","uid":1110912,"ip_address":"","ucode":"D009378493E753","user_header":"https://static001.geekbang.org/account/avatar/00/10/f3/80/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1584232055,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584232055","product_id":100039001,"comment_content":"createBeanä¸­catchæŠ›å‡ºä¸€ä¸ªè‡ªå®šä¹‰å¼‚å¸¸ï¼Œæ–¹æ³•æ²¡æŠ›å¼‚å¸¸ï¼Œå¥½åƒä»£ç æœ‰é—®é¢˜","like_count":0},{"had_liked":false,"id":186228,"user_name":"ççœ¼çœ‹ä¸–ç•Œ","can_delete":false,"product_type":"c1","uid":1206388,"ip_address":"","ucode":"F94CF34BC5B2AC","user_header":"https://static001.geekbang.org/account/avatar/00/12/68/74/461b202d.jpg","comment_is_top":false,"comment_ctime":1583805143,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1583805143","product_id":100039001,"comment_content":"è€å¸ˆè®²è§£çš„é€šä¿—æ˜“æ‡‚ï¼Œä¸€ä¸‹å­å¸®æˆ‘è§£æƒ‘äº†spring-iocçš„æºç é˜…è¯»ï¼Œç‚¹èµï¼›springæ˜¯ç”±ä¸€ä¸ªæœºåˆ¶è§£å†³å¾ªç¯ä¾èµ–é—®é¢˜çš„ï¼Œåˆ›å»ºbeançš„æ—¶å€™ï¼Œåˆ†å‡ ä¸ªé˜¶æ®µã€‚","like_count":0},{"had_liked":false,"id":185970,"user_name":"Heaven","can_delete":false,"product_type":"c1","uid":1694207,"ip_address":"","ucode":"FA33FBCC66C911","user_header":"https://static001.geekbang.org/account/avatar/00/19/d9/ff/b23018a6.jpg","comment_is_top":false,"comment_ctime":1583734272,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1583734272","product_id":100039001,"comment_content":"å¯¹äºè¿™ä¸ªé—®é¢˜,æˆ‘åœ¨çœ‹äº†è¯„è®ºåŒºçš„ç•™è¨€å,å¹¶ä¸”å¤ä¹ äº†ä¹‹å‰çš„Springç›¸å…³ç¬”è®°,å¾—å‡ºçš„ç­”æ¡ˆæ˜¯Springä¸­,å¦‚æœå¾ªç¯æ˜¯å‘ç”Ÿåœ¨æ„é€ å‡½æ•°ä¸­,é‚£ä¹ˆæ— è§£,ä¼šç›´æ¥æŠ›å‡ºè¿è¡Œæ—¶å¼‚å¸¸,<br>è€Œæ˜¯é€šè¿‡setteræ–¹æ³•è®¾ç½®è¿›å»çš„,å¦‚æœå…è®¸äº†å¾ªç¯ä¾èµ–,åˆ™å¯ä»¥åœ¨Aè®¾ç½®å‚æ•°ä¹‹å‰,å…ˆæš´éœ²ä¸€ä¸ªå·¥å‚æ–¹æ³•,æ”¾åœ¨ä¸€ä¸ªå­˜å‚¨å·¥å‚ç±»çš„Mapä¸­,ç„¶åBåœ¨ç”Ÿäº§çš„æ—¶å€™,èƒ½ç›´æ¥è·å–åˆ°è¿™ä¸ªå·¥å‚ç±»,è¿›è¡Œç›¸å…³çš„ç”Ÿäº§,å½“ç„¶,è¿™æ ·è§£å†³å¾ªç¯ä¾èµ–è¿˜æ˜¯å¿…é¡»è®¾ç½®ä¸ºå•ä¾‹,è€Œä¸”å³ä½¿è¿™æ ·,ä½¿ç”¨è¿‡ç¨‹ä¸­,è¿˜æ˜¯ä¼šå‡ºç°æ— é™å¾ªç¯,å¯¼è‡´æ ˆæº¢å‡º","like_count":0},{"had_liked":false,"id":185787,"user_name":"å¦ææ³°æ¥","can_delete":false,"product_type":"c1","uid":1439355,"ip_address":"","ucode":"C249173266251A","user_header":"https://static001.geekbang.org/account/avatar/00/15/f6/7b/b6abcbbe.jpg","comment_is_top":false,"comment_ctime":1583678791,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1583678791","product_id":100039001,"comment_content":"BeansFactory ç±»ä¸­çš„ createBean() å‡½æ•°æ˜¯ä¸€ä¸ªé€’å½’å‡½æ•°ã€‚å½“æ„é€ å‡½æ•°çš„å‚æ•°æ˜¯ ref ç±»å‹æ—¶ï¼Œä¼šé€’å½’åœ°åˆ›å»º ref å±æ€§æŒ‡å‘çš„å¯¹è±¡ã€‚å¦‚æœæˆ‘ä»¬åœ¨é…ç½®æ–‡ä»¶ä¸­é”™è¯¯åœ°é…ç½®äº†å¯¹è±¡ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œå¯¼è‡´å­˜åœ¨å¾ªç¯ä¾èµ–ï¼Œé‚£ BeansFactory çš„ createBean() å‡½æ•°æ˜¯å¦ä¼šå‡ºç°å †æ ˆæº¢å‡ºï¼Ÿåˆè¯¥å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ<br>å¦‚æœå¾ªç¯ä¾èµ–æ²¡æœ‰å¤„ç†è‚¯å®šä¼šæ— é™åˆ¶åˆ›å»ºå¯¹è±¡å¯¼è‡´æº¢å‡ºçš„<br>å¼€å‘ä¸­æ˜¯æ— æ³•ä¿è¯é¿å…å‡ºç°å¾ªç¯ä¾èµ–ï¼Œè™½ç„¶ç±»ä¹‹é—´å¯èƒ½å‡ºç°äº’ç›¸å¼•ç”¨æ˜¯è®¾è®¡ä¸åˆç†å¯¼è‡´çš„ï¼ˆè¿˜å¯èƒ½æ˜¯ç‰ˆæœ¬è¿­ä»£ï¼‰ï¼ŒåŠ ä¸Šå¼€å‘ä¸­æ¯ä¸ªäººæƒ³æ³•éƒ½ä¸ä¸€æ ·ï¼Œè¿˜æœ‰å¯èƒ½æ˜¯å†å²é—ç•™é—®é¢˜<br>æˆ‘ä¹‹å‰å°±é‡åˆ°è¿‡ï¼Œæˆ‘æ˜¯-é€šè¿‡æ‡’åŠ è½½è§£å†³çš„","like_count":0},{"had_liked":false,"id":184629,"user_name":"äºŒå¸ˆå…„","can_delete":false,"product_type":"c1","uid":1027034,"ip_address":"","ucode":"679D497472F5D2","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ab/da/ab32124c.jpg","comment_is_top":false,"comment_ctime":1583374330,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1583374330","product_id":100039001,"comment_content":"ä¸æ˜¯å¾ˆç†Ÿæ‚‰JAVAï¼Œæƒ³çŸ¥é“ï¼šä¸ºä»€ä¹ˆå¼•ç”¨è¦é€’å½’è°ƒç”¨åˆ›å»ºï¼Œè®°å¾—JAVAå¯¹è±¡éƒ½æ˜¯å¼•ç”¨å§ï¼Ÿèƒ½å’ŒC++è¿›è¡Œç±»æ¯”å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":183249,"user_name":"jaryoung","can_delete":false,"product_type":"c1","uid":1077406,"ip_address":"","ucode":"6E72D107DB7E51","user_header":"https://static001.geekbang.org/account/avatar/00/10/70/9e/5095f881.jpg","comment_is_top":false,"comment_ctime":1582982224,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1582982224","product_id":100039001,"comment_content":"è¯´èµ·æ¥è¿™ä¸ªé—®é¢˜ï¼Œä¸ºå•¥springæ¨èä½¿ç”¨æ„é€ å™¨æ³¨å…¥ï¼Ÿé€šè¿‡æ„é€ å™¨æ³¨å…¥ï¼Œèƒ½å¤Ÿå¾ˆå¥½å‘ç°å¾ªç¯ä¾èµ–çš„é—®é¢˜æ‰€åœ¨ã€‚å‡ºç°ä¸€ä¸ªsetå’Œå±æ€§æ³¨å…¥çš„ï¼Œç«Ÿç„¶å¤§éƒ¨åˆ†æƒ…å†µéƒ½ä¸ä¼šå‡ºç°å¾ªç¯ä¾èµ–çš„é—®é¢˜ï¼Œä½†æ˜¯æœ‰æ—¶å€™å¯åŠ¨çš„æ—¶å€™ä¼šå¶å°”å‘ç”Ÿå¾ªç¯ä¾èµ–å¯¼è‡´å¯åŠ¨å¤±è´¥çš„æƒ…å†µã€‚<br>è¯´å›æ­£é¢˜ï¼Œå¦‚æœæ‰¾å‡ºå¾ªç¯ä¾èµ–ï¼Œè¿™ä¸ªé—®é¢˜å¯ä»¥è½¬åŒ–æˆå¦‚ä½•åˆ¤æ–­æ˜¯å¦æœ‰ç¯å§ï¼Ÿå¦‚æœæ˜¯çš„è¯ï¼Œå…¶å®ä¸æ˜¯å°±ç‰¹åˆ«å¥½åˆ¤æ–­äº†å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1190123,"avatar":"https://static001.geekbang.org/account/avatar/00/12/28/eb/af064421.jpg","nickname":"ç‹äº‰","note":"","ucode":"2B611BE0E0EDD4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479319,"discussion_content":"å¹¶æ²¡æœ‰è¯´jdkæ˜¯é¢å‘è¿‡ç¨‹çš„å•Š æˆ‘æ˜¯è¯´jdkä¸­ä¹Ÿå­˜åœ¨é¢å‘è¿‡ç¨‹çš„è®¾è®¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577668528,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":180920,"user_name":"æå°å››","can_delete":false,"product_type":"c1","uid":1112747,"ip_address":"","ucode":"2A766BE16B276B","user_header":"https://static001.geekbang.org/account/avatar/00/10/fa/ab/0d39e745.jpg","comment_is_top":false,"comment_ctime":1582443147,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1582443147","product_id":100039001,"comment_content":"è®¾è®¡æ¨¡å¼_45:<br># ä½œä¸š<br>1. ä¼šå¯¼è‡´å †æ ˆæº¢å‡º<br>2. æƒ³åˆ°çš„åŠæ³•æ˜¯æ£€æµ‹æœ‰å‘æ— ç¯å›¾ï¼Œä½†çœŸå®çš„é¡¹ç›®ä¸­ä¸€å®šä¼šæœ‰å¾ªç¯ä¾èµ–ï¼Œå¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œçœ‹äº†ä¸€ä¸‹*Spring*ä¸­æ˜¯é€šè¿‡*setter*ä¾èµ–çš„æ–¹æ³•æ¥è§£å†³çš„ï¼Œä½¿ç”¨äº†3çº§ç¼“å­˜ã€‚<br><br># æ„Ÿæƒ³<br>ç¨‹åºçš„ä¸€ä¸ªä½œç”¨å°±æ˜¯é«˜æ•ˆè§£å†³é‡å¤çš„åŠ³åŠ¨ï¼Œç°åœ¨æˆ‘æå‡ºä¸€ä¸ªDIæ¡†æ¶ï¼Œç”¨ä»£ç è§£å†³äº†ä¸€ä¸ªé‡å¤çš„åŠ³åŠ¨ï¼šé‚£å°±æ˜¯å†™æ¨¡æ¿ä»£ç ã€‚","like_count":0},{"had_liked":false,"id":180406,"user_name":"å®ˆæ‹™","can_delete":false,"product_type":"c1","uid":1738326,"ip_address":"","ucode":"F594B2DA3F6D4F","user_header":"https://static001.geekbang.org/account/avatar/00/1a/86/56/509535da.jpg","comment_is_top":false,"comment_ctime":1582275158,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1582275158","product_id":100039001,"comment_content":"è¯¾å ‚è®¨è®ºAnswer:    <br>å¯ä»¥å°è¯•åœ¨è§£ææ—¶æ ¡éªŒå¾ªç¯ä¾èµ–. å³ApplicationContextå®ç°ç±»ä¸­çš„loadBeanDefinitions()æ–¹æ³•ä¸­æ ¡éªŒ.<br>","like_count":0},{"had_liked":false,"id":178976,"user_name":"å®‰é™çš„boy","can_delete":false,"product_type":"c1","uid":1196475,"ip_address":"","ucode":"F5F44B75228A85","user_header":"https://static001.geekbang.org/account/avatar/00/12/41/bb/21ce60d2.jpg","comment_is_top":false,"comment_ctime":1581866267,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1581866267","product_id":100039001,"comment_content":"çœ‹äº†è¿™è¾¹æ–‡ç« çªç„¶å¯¹Springçš„IOCæœ‰äº†ä¸€ä¸ªæ¸…æ™°è®¤è¯†ã€‚","like_count":0},{"had_liked":false,"id":178906,"user_name":"å¹³é£é€ é›¨","can_delete":false,"product_type":"c1","uid":1014349,"ip_address":"","ucode":"F9EE4704F31E22","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7a/4d/b0228a1a.jpg","comment_is_top":false,"comment_ctime":1581851519,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1581851519","product_id":100039001,"comment_content":"createBeanå¯¹refBeançš„ä¾èµ–æ˜¯ä¸æ˜¯å¯ä»¥ç†è§£æˆå¼ºä¾èµ–å’Œå¼±ä¾èµ–ï¼Œå¦‚æœæ˜¯å¼±ä¾èµ–çš„è¯ï¼Œå³ä½¿å‡ºç°å¾ªç¯ä¾èµ–ï¼Œä¹Ÿå¯ä»¥ç»§ç»­æ‰§è¡Œè¢«ä¾èµ–beançš„åˆ›å»ºï¼Œç­‰åç»­å†æ£€æŸ¥è¿™äº›ä¸å®Œæ•´çš„Beanï¼Œèµ°åˆå§‹åŒ–é€»è¾‘ã€‚å¦‚æœæ˜¯å¼ºä¾èµ–ï¼Œæ˜¯ä¸æ˜¯åªèƒ½æŠ›å¼‚å¸¸å‡ºæ¥ï¼Ÿ","like_count":0},{"had_liked":false,"id":178838,"user_name":"cricket1981","can_delete":false,"product_type":"c1","uid":1001715,"ip_address":"","ucode":"758262F5958DA4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/48/f3/f1034ffd.jpg","comment_is_top":false,"comment_ctime":1581838938,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1581838938","product_id":100039001,"comment_content":"ä¸é”™ï¼Œæˆæ•™äº†ï¼åœ¨è€å¸ˆçš„åŸºç¡€ä¸Šæ”¹è¿›äº†ä¸‹ï¼Œå°†beané…ç½®å±æ€§classæ¢æˆäº†indexï¼Œé€šè¿‡åå°„è·å–åˆ°åˆé€‚çš„æ„é€ å‡½æ•°","like_count":0},{"had_liked":false,"id":178663,"user_name":"æ¡‚åŸè€æ‰˜å°¼","can_delete":false,"product_type":"c1","uid":1306032,"ip_address":"","ucode":"139E4B8EE88B79","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJcxSpNMqwqyicMvdOSr9ic0p1ABiauHnv7g7YQVSJuoHPoQbYDu3YzdpgmSAk2KricUBQ5yibWBWIq75w/132","comment_is_top":false,"comment_ctime":1581775846,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1581775846","product_id":100039001,"comment_content":"æ„Ÿè°¢åˆ†äº«ï¼Œå°è¯•å›ç­”ä¸‹è¯¾å ‚è®¨è®º<br>1. scope = singleton æƒ…å†µä¸‹æ˜¯ä¸ä¼šçš„ï¼Œé€’å½’æ–¹æ³•é‡Œå¦‚æœå­˜åœ¨äº†bean åˆ™ä¼šç›´æ¥è¿”å›ã€‚ å¦‚æœæ˜¯prototype åˆ™éœ€è¦æ¯æ¬¡è°ƒç”¨éƒ½newå‡ºä¸€ä¸ªå¯¹è±¡æ¥ï¼Œå¯èƒ½å­˜åœ¨é£é™©ï¼Œspring æ˜¯æ€ä¹ˆè§„é¿è¿™ä¸ªé—®é¢˜çš„ï¼Œéœ€è¦ç ”ç©¶ä¸‹ä»£ç ã€‚<br>2. ref æ–‡ä¸­çš„å®ç°ç›®æµ‹æ²¡æœ‰æ£€æŸ¥ ref çš„ç±»å‹æ˜¯å¦å’Œå¯¹è±¡çš„å±æ€§ç±»å‹æ˜¯å¦ä¸€è‡´ã€‚","like_count":0},{"had_liked":false,"id":178631,"user_name":"chanllenge","can_delete":false,"product_type":"c1","uid":1213699,"ip_address":"","ucode":"148FC08C90BC58","user_header":"https://static001.geekbang.org/account/avatar/00/12/85/03/1a7d3dd6.jpg","comment_is_top":false,"comment_ctime":1581763028,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1581763028","product_id":100039001,"comment_content":"è¿™éƒ¨åˆ†ä»£ç å¯ä»¥è¯•ç€è‡ªå·±å®ç°ä¸€éï¼Œç„¶åå†çœ‹springæºç ï¼Œåº”è¯¥å°±å¾ˆå¥½æ‡‚äº†ï¼Œäº‰å“¥è®²çš„å¥½","like_count":0},{"had_liked":false,"id":178562,"user_name":"ç¨‹åºå‘˜å°è·ƒ","can_delete":false,"product_type":"c1","uid":1015483,"ip_address":"","ucode":"25BB96E0791A60","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7e/bb/947c329a.jpg","comment_is_top":false,"comment_ctime":1581744602,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1581744602","product_id":100039001,"comment_content":"æ„å¤–ä¹‹å–œï¼Œè¿˜èƒ½åœ¨è¿™é‡Œå­¦åˆ°Springç›¸å…³çš„çŸ¥è¯†ã€‚çŠ¶æ€è¶Šæ¥è¶Šå¥½ï¼Œ2020è¶Šæ¥è¶Šå¥½","like_count":0},{"had_liked":false,"id":178545,"user_name":"Kenå¼ äº‘å¿ ","can_delete":false,"product_type":"c1","uid":1134288,"ip_address":"","ucode":"D0BAC9FC17DE2B","user_header":"https://static001.geekbang.org/account/avatar/00/11/4e/d0/d8a5f720.jpg","comment_is_top":false,"comment_ctime":1581738445,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1581738445","product_id":100039001,"comment_content":"å¦‚æœæˆ‘ä»¬åœ¨é…ç½®æ–‡ä»¶ä¸­é”™è¯¯åœ°é…ç½®äº†å¯¹è±¡ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œå¯¼è‡´å­˜åœ¨å¾ªç¯ä¾èµ–ï¼Œé‚£ BeansFactory çš„ createBean() å‡½æ•°æ˜¯å¦ä¼šå‡ºç°å †æ ˆæº¢å‡ºï¼Ÿåˆè¯¥å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ<br>ä¼šå‡ºç°å †æ ˆæº¢å‡º.<br>åˆ†æ:é…ç½®äº†å¾ªç¯ä¾èµ–å,åŸå‹æ¨¡å¼å’Œå•ä¾‹æ¨¡å¼éƒ½ä¼šæœ‰å› ä¸ºæ— æ³•å°†å¯¹è±¡æ„å»ºå‡ºæ¥è€Œä¸€ç›´é€’å½’è°ƒç”¨çš„é—®é¢˜,æœ€ç»ˆå¯¼è‡´å †æ ˆæº¢å‡º.<br>è‡³äºè§£å†³æ–¹å¼è¿˜éœ€è¦å‘å­¦å‹å¤šå¤šå­¦ä¹ ,æ„é€ å™¨æ–¹å¼åˆå§‹åŒ–åº”æ˜¯æ— æ³•è§£å†³çš„;<br>setæ³¨å…¥æ–¹å¼ä¸­å•ä¾‹æ¨¡å¼å¯ä»¥è§£å†³,ä½†æ˜¯åŸå‹æ¨¡å¼è¿˜æ˜¯ä¼šå‡ºç°å¾ªç¯ä¾èµ–åˆ›å»ºå®ä¾‹çš„é—®é¢˜,è¿™é‡Œä¹Ÿæ²¡æ³•åšå¾ªç¯ä¾èµ–æ£€æµ‹;<br>æœ‰çš„æå‡ºæ§åˆ¶é€’å½’çš„æ·±åº¦å’Œå¤šçº§ç¼“å­˜,è¿˜æ²¡ç†è§£æ€ä¹ˆå¤„ç†.","like_count":0},{"had_liked":false,"id":178456,"user_name":"å”æœå†œæ°‘","can_delete":false,"product_type":"c1","uid":1133947,"ip_address":"","ucode":"6F8F43C6652225","user_header":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIaOAxRlZjFkGfRBn420LuAcyWkMrpq5iafGdqthX5icJPjql0ibZOAdafaqbfvw4ZpVzDmsaYglVXDw/132","comment_is_top":false,"comment_ctime":1581692669,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1581692669","product_id":100039001,"comment_content":"ä¸å¥½æ„æ€æˆ‘æé”™äº†ï¼Œè¿™é‡Œåœ¨é€’å½’å‡½æ•°é‡Œå¤„ç†äº†","like_count":0},{"had_liked":false,"id":178455,"user_name":"å”æœå†œæ°‘","can_delete":false,"product_type":"c1","uid":1133947,"ip_address":"","ucode":"6F8F43C6652225","user_header":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIaOAxRlZjFkGfRBn420LuAcyWkMrpq5iafGdqthX5icJPjql0ibZOAdafaqbfvw4ZpVzDmsaYglVXDw/132","comment_is_top":false,"comment_ctime":1581692484,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1581692484","product_id":100039001,"comment_content":"BeansFactoryä¸­çš„46-51è¡Œé‚£é‡Œ æ‰€æœ‰çš„ref éƒ½æ˜¯prototypeçš„ï¼Œæ˜¯ä¸æ˜¯ä¹Ÿåº”è¯¥åˆ¤æ–­å…¶æ˜¯å¦singletonçš„ï¼Œå¦‚æœæ˜¯çš„è¯åº”è¯¥ç›´æ¥ä»singleObjectsä¸­è·å–å‘¢","like_count":0},{"had_liked":false,"id":178426,"user_name":"aoe","can_delete":false,"product_type":"c1","uid":1121758,"ip_address":"","ucode":"1C6201EDB4E954","user_header":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","comment_is_top":false,"comment_ctime":1581687803,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1581687803","product_id":100039001,"comment_content":"åŸæ¥ DI å®¹å™¨æ˜¯ä¸€ä¸ªè¶…çº§å·¥å‚","like_count":0},{"had_liked":false,"id":178388,"user_name":"webmin","can_delete":false,"product_type":"c1","uid":1047014,"ip_address":"","ucode":"98B0CA882454E8","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f9/e6/47742988.jpg","comment_is_top":false,"comment_ctime":1581676489,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1581676489","product_id":100039001,"comment_content":"ç†è®ºä¸Šå¦‚æœæ²¡æœ‰è¿›è¡Œå¾ªç¯ä¾èµ–æ£€æµ‹ï¼Œå°±è¿›è¡Œåˆ›å»ºä¼šå‡ºç°å †æ ˆæº¢å‡ºã€‚<br>è§£å†³æ–¹æ³•ï¼šåœ¨å¯¹è±¡åˆ›å»ºä¹‹å‰ï¼Œå…ˆæ ¹æ®é…ç½®ä¿¡æ¯ï¼ŒæŠŠè‡ªå·±çš„idä»¥åŠå…¶refæ‰€æŒ‡å‘çš„å¼•ç”¨ï¼Œé€’å½’çš„æ‰¾å‡ºæ¥æ”¾å…¥Hashè¡¨ï¼Œæ£€æŸ¥æ˜¯å¦å‘ç”Ÿç¢°æ’ã€‚","like_count":0},{"had_liked":false,"id":178376,"user_name":"Geek_849ad3","can_delete":false,"product_type":"c1","uid":1817489,"ip_address":"","ucode":"E20321EF9BA86F","user_header":"","comment_is_top":false,"comment_ctime":1581672894,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1581672894","product_id":100039001,"comment_content":"è®²å¾—å¾ˆä¸é”™","like_count":0},{"had_liked":false,"id":178353,"user_name":"æ¯å¤©æ™’ç™½ç‰™","can_delete":false,"product_type":"c1","uid":1004698,"ip_address":"","ucode":"A1B102CD933DEA","user_header":"https://static001.geekbang.org/account/avatar/00/0f/54/9a/76c0af70.jpg","comment_is_top":false,"comment_ctime":1581667500,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"1581667500","product_id":100039001,"comment_content":"å†™çš„çœŸå¥½ï¼Œæƒ…äººèŠ‚çš„æ—¥å­çœ‹è¿™ç¯‡æ–‡ç« ï¼Œåˆ«æœ‰ä¸€ç•ªæ»‹å‘³ï¼Œ","like_count":0},{"had_liked":false,"id":178294,"user_name":"å°æ™å­","can_delete":false,"product_type":"c1","uid":1132337,"ip_address":"","ucode":"3AAA6FB5ACB6AE","user_header":"https://static001.geekbang.org/account/avatar/00/11/47/31/f35367c8.jpg","comment_is_top":false,"comment_ctime":1581652776,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"1581652776","product_id":100039001,"comment_content":"æ€è€ƒé¢˜ï¼šä¼šå‡ºç°æ ˆæº¢å‡ºï¼Œæ¯”å¦‚ A--&gt;B--&gt;A, åˆ›å»ºBeanæ—¶ï¼Œå› ä¸ºæ²¡æœ‰é‡å¤åˆ›å»ºæ£€æµ‹ï¼Œä¼šå‡ºç°æ­»å¾ªç¯ï¼Œå¯¼è‡´æ ˆæº¢å‡ºï¼Œå¯ä»¥åœ¨æ·»åŠ ä¸€ä¸ªæ­£åœ¨åˆ›å»ºbeançš„å¯¹è±¡æ± ï¼Œæ”¾å…¥æ­£åœ¨åˆ›å»ºçš„å¯¹è±¡ï¼Œç„¶åæ¯æ¬¡åˆ›å»ºçš„æ—¶å€™ï¼Œæ£€æŸ¥å¯¹è±¡æ˜¯å¦åœ¨æ± å­ä¸­ï¼Œå¦‚æœåœ¨æ± å­ä¸­ï¼Œå°±è¯´æ˜å­˜åœ¨å¾ªç¯ä¾èµ–ï¼Œç›´æ¥æŠ›å‡ºå¼‚å¸¸ï¼Œè®©ç”¨æˆ·è§£å†³å¾ªç¯ä¾èµ–çš„é—®é¢˜ã€‚","like_count":0},{"had_liked":false,"id":178256,"user_name":"pedro","can_delete":false,"product_type":"c1","uid":1200704,"ip_address":"","ucode":"F40C839DDFD599","user_header":"https://static001.geekbang.org/account/avatar/00/12/52/40/e57a736e.jpg","comment_is_top":false,"comment_ctime":1581644339,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1581644339","product_id":100039001,"comment_content":"å°äº‰å“¥è¿™ä¸ªDIæ¡†æ¶å·²ç»æœ‰Spring IOCçš„é›å½¢äº†ğŸ¤˜","like_count":0},{"had_liked":false,"id":178241,"user_name":"æ˜ç¿¼","can_delete":false,"product_type":"c1","uid":1068361,"ip_address":"","ucode":"E77F86BEB3D5C1","user_header":"https://static001.geekbang.org/account/avatar/00/10/4d/49/28e73b9c.jpg","comment_is_top":false,"comment_ctime":1581640898,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1581640898","product_id":100039001,"comment_content":"å…³äºé€’å½’çš„åˆ¤æ–­æˆ‘çš„ç†è§£æ˜¯å¦å¯ä»¥ä¿å­˜ä¸€ä¸ªlistï¼Œé‡Œé¢ä¿å­˜ä¾èµ–çš„classåï¼Œå¦‚æœåŠ å…¥äº†ä¾èµ–å·²ç»å­˜åœ¨äº†ï¼Œè¯´æ˜å­˜åœ¨é€’å½’ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸","like_count":0}]}