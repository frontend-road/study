{"id":107577,"title":"21 | è‰¯å¿ƒä¸­é—´å•†ï¼šHTTPçš„ä»£ç†æœåŠ¡","content":"<p><span class=\"orange\"></span>åœ¨å‰é¢è®²HTTPåè®®çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸¥æ ¼éµå¾ªäº†HTTPçš„â€œè¯·æ±‚-åº”ç­”â€æ¨¡å‹ï¼Œåè®®ä¸­åªæœ‰ä¸¤ä¸ªäº’ç›¸é€šä¿¡çš„è§’è‰²ï¼Œåˆ†åˆ«æ˜¯â€œè¯·æ±‚æ–¹â€æµè§ˆå™¨ï¼ˆå®¢æˆ·ç«¯ï¼‰å’Œâ€œåº”ç­”æ–¹â€æœåŠ¡å™¨ã€‚</p><p>ä»Šå¤©ï¼Œæˆ‘ä»¬è¦åœ¨è¿™ä¸ªæ¨¡å‹é‡Œå¼•å…¥ä¸€ä¸ªæ–°çš„è§’è‰²ï¼Œé‚£å°±æ˜¯<span class=\"orange\">HTTPä»£ç†</span>ã€‚</p><p>å¼•å…¥HTTPä»£ç†åï¼ŒåŸæ¥ç®€å•çš„åŒæ–¹é€šä¿¡å°±å˜å¤æ‚äº†ä¸€äº›ï¼ŒåŠ å…¥äº†ä¸€ä¸ªæˆ–è€…å¤šä¸ªä¸­é—´äººï¼Œä½†æ•´ä½“ä¸Šæ¥çœ‹ï¼Œè¿˜æ˜¯ä¸€ä¸ªæœ‰é¡ºåºå…³ç³»çš„é“¾æ¡ï¼Œè€Œä¸”é“¾æ¡é‡Œç›¸é‚»çš„ä¸¤ä¸ªè§’è‰²ä»ç„¶æ˜¯ç®€å•çš„ä¸€å¯¹ä¸€é€šä¿¡ï¼Œä¸ä¼šå‡ºç°è¶Šçº§çš„æƒ…å†µã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/28/f9/28237ef93ce0ddca076d2dc19c16fdf9.png?wh=2097*606\" alt=\"\"></p><p>é“¾æ¡çš„èµ·ç‚¹è¿˜æ˜¯å®¢æˆ·ç«¯ï¼ˆä¹Ÿå°±æ˜¯æµè§ˆå™¨ï¼‰ï¼Œä¸­é—´çš„è§’è‰²è¢«ç§°ä¸ºä»£ç†æœåŠ¡å™¨ï¼ˆproxy serverï¼‰ï¼Œé“¾æ¡çš„ç»ˆç‚¹è¢«ç§°ä¸ºæºæœåŠ¡å™¨ï¼ˆorigin serverï¼‰ï¼Œæ„æ€æ˜¯æ•°æ®çš„â€œæºå¤´â€â€œèµ·æºâ€ã€‚</p><h2>ä»£ç†æœåŠ¡</h2><p>â€œä»£ç†â€è¿™ä¸ªè¯å¬èµ·æ¥å¥½åƒå¾ˆç¥ç§˜ï¼Œæœ‰ç‚¹â€œé«˜å¤§ä¸Šâ€çš„æ„Ÿè§‰ã€‚</p><p>ä½†å…¶å®HTTPåè®®é‡Œå¯¹å®ƒå¹¶æ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«çš„æè¿°ï¼Œå®ƒå°±æ˜¯åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨åŸæœ¬çš„é€šä¿¡é“¾è·¯ä¸­æ’å…¥çš„ä¸€ä¸ªä¸­é—´ç¯èŠ‚ï¼Œä¹Ÿæ˜¯ä¸€å°æœåŠ¡å™¨ï¼Œä½†æä¾›çš„æ˜¯â€œä»£ç†æœåŠ¡â€ã€‚</p><p>æ‰€è°“çš„â€œä»£ç†æœåŠ¡â€å°±æ˜¯æŒ‡<span class=\"orange\">æœåŠ¡æœ¬èº«ä¸ç”Ÿäº§å†…å®¹ï¼Œè€Œæ˜¯å¤„äºä¸­é—´ä½ç½®è½¬å‘ä¸Šä¸‹æ¸¸çš„è¯·æ±‚å’Œå“åº”ï¼Œå…·æœ‰åŒé‡èº«ä»½</span>ï¼šé¢å‘ä¸‹æ¸¸çš„ç”¨æˆ·æ—¶ï¼Œè¡¨ç°ä¸ºæœåŠ¡å™¨ï¼Œä»£è¡¨æºæœåŠ¡å™¨å“åº”å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼›è€Œé¢å‘ä¸Šæ¸¸çš„æºæœåŠ¡å™¨æ—¶ï¼Œåˆè¡¨ç°ä¸ºå®¢æˆ·ç«¯ï¼Œä»£è¡¨å®¢æˆ·ç«¯å‘é€è¯·æ±‚ã€‚</p><!-- [[[read_end]]] --><p>è¿˜æ˜¯æ‹¿ä¸Šä¸€è®²çš„â€œç”Ÿé²œè¶…å¸‚â€æ¥æ‰“ä¸ªæ¯”æ–¹ã€‚</p><p>ä¹‹å‰ä½ éƒ½æ˜¯ä»è¶…å¸‚é‡Œä¹°ä¸œè¥¿ï¼Œç°åœ¨æ¥¼åº•ä¸‹æ–°å¼€äº†ä¸€å®¶24å°æ—¶ä¾¿åˆ©åº—ï¼Œç”±è¶…å¸‚ç›´æ¥ä¾›è´§ï¼Œäºæ˜¯ä½ å°±å¯ä»¥åœ¨ä¾¿åˆ©åº—é‡Œä¹°åˆ°åŸæœ¬å¿…é¡»å»è¶…å¸‚æ‰èƒ½ä¹°åˆ°çš„å•†å“ã€‚</p><p>è¿™æ ·è¶…å¸‚å°±ä¸ç›´æ¥å’Œä½ æ‰“äº¤é“äº†ï¼Œæˆäº†â€œæºæœåŠ¡å™¨â€ï¼Œä¾¿åˆ©åº—å°±æˆäº†è¶…å¸‚çš„â€œä»£ç†æœåŠ¡å™¨â€ã€‚</p><p>åœ¨<a href=\"https://time.geekbang.org/column/article/98934\">ç¬¬4è®²</a>ä¸­ï¼Œæˆ‘æ›¾ç»è¯´è¿‡ï¼Œä»£ç†æœ‰å¾ˆå¤šçš„ç§ç±»ï¼Œä¾‹å¦‚åŒ¿åä»£ç†ã€é€æ˜ä»£ç†ã€æ­£å‘ä»£ç†å’Œåå‘ä»£ç†ã€‚</p><p>ä»Šå¤©æˆ‘ä¸»è¦è®²çš„æ˜¯å®é™…å·¥ä½œä¸­æœ€å¸¸è§çš„åå‘ä»£ç†ï¼Œå®ƒåœ¨ä¼ è¾“é“¾è·¯ä¸­æ›´é è¿‘æºæœåŠ¡å™¨ï¼Œä¸ºæºæœåŠ¡å™¨æä¾›ä»£ç†æœåŠ¡ã€‚</p><h2>ä»£ç†çš„ä½œç”¨</h2><p>ä¸ºä»€ä¹ˆè¦æœ‰ä»£ç†å‘¢ï¼Ÿæ¢å¥è¯è¯´ï¼Œä»£ç†èƒ½å¹²ä»€ä¹ˆã€å¸¦æ¥ä»€ä¹ˆå¥½å¤„å‘¢ï¼Ÿ</p><p>ä½ ä¹Ÿè®¸å¬è¿‡è¿™æ ·ä¸€å¥è‡³ç†åè¨€ï¼šâ€œ<span class=\"orange\">è®¡ç®—æœºç§‘å­¦é¢†åŸŸé‡Œçš„ä»»ä½•é—®é¢˜ï¼Œéƒ½å¯ä»¥é€šè¿‡å¼•å…¥ä¸€ä¸ªä¸­é—´å±‚æ¥è§£å†³</span>â€ï¼ˆåœ¨è¿™å¥è¯åé¢è¿˜å¯ä»¥å†åŠ ä¸Šä¸€å¥â€œå¦‚æœä¸€ä¸ªä¸­é—´å±‚è§£å†³ä¸äº†é—®é¢˜ï¼Œé‚£å°±å†åŠ ä¸€ä¸ªä¸­é—´å±‚â€ï¼‰ã€‚TCP/IPåè®®æ ˆæ˜¯è¿™æ ·ï¼Œè€Œä»£ç†ä¹Ÿæ˜¯è¿™æ ·ã€‚</p><p>ç”±äºä»£ç†å¤„åœ¨HTTPé€šä¿¡è¿‡ç¨‹çš„ä¸­é—´ä½ç½®ï¼Œç›¸åº”åœ°å°±å¯¹ä¸Šå±è”½äº†çœŸå®å®¢æˆ·ç«¯ï¼Œå¯¹ä¸‹å±è”½äº†çœŸå®æœåŠ¡å™¨ï¼Œç®€å•çš„è¯´å°±æ˜¯â€œ<strong>æ¬ºä¸Šç’ä¸‹</strong>â€ã€‚åœ¨è¿™ä¸ªä¸­é—´å±‚çš„â€œå°å¤©åœ°â€é‡Œå°±å¯ä»¥åšå¾ˆå¤šçš„äº‹æƒ…ï¼Œä¸ºHTTPåè®®å¢åŠ æ›´å¤šçš„çµæ´»æ€§ï¼Œå®ç°å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨çš„â€œåŒèµ¢â€ã€‚</p><p>ä»£ç†æœ€åŸºæœ¬çš„ä¸€ä¸ªåŠŸèƒ½æ˜¯<strong>è´Ÿè½½å‡è¡¡</strong>ã€‚å› ä¸ºåœ¨é¢å‘å®¢æˆ·ç«¯æ—¶å±è”½äº†æºæœåŠ¡å™¨ï¼Œå®¢æˆ·ç«¯çœ‹åˆ°çš„åªæ˜¯ä»£ç†æœåŠ¡å™¨ï¼ŒæºæœåŠ¡å™¨ç©¶ç«Ÿæœ‰å¤šå°‘å°ã€æ˜¯å“ªäº›IPåœ°å€éƒ½ä¸çŸ¥é“ã€‚äºæ˜¯ä»£ç†æœåŠ¡å™¨å°±å¯ä»¥æŒæ¡è¯·æ±‚åˆ†å‘çš„â€œå¤§æƒâ€ï¼Œå†³å®šç”±åé¢çš„å“ªå°æœåŠ¡å™¨æ¥å“åº”è¯·æ±‚ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/8c/7c/8c1fe47a7ca4b52702a6a14956033f7c.png?wh=1305*1042\" alt=\"\"></p><p>ä»£ç†ä¸­å¸¸ç”¨çš„è´Ÿè½½å‡è¡¡ç®—æ³•ä½ åº”è¯¥ä¹Ÿæœ‰æ‰€è€³é—»å§ï¼Œæ¯”å¦‚è½®è¯¢ã€ä¸€è‡´æ€§å“ˆå¸Œç­‰ç­‰ï¼Œè¿™äº›ç®—æ³•çš„ç›®æ ‡éƒ½æ˜¯å°½é‡æŠŠå¤–éƒ¨çš„æµé‡åˆç†åœ°åˆ†æ•£åˆ°å¤šå°æºæœåŠ¡å™¨ï¼Œæé«˜ç³»ç»Ÿçš„æ•´ä½“èµ„æºåˆ©ç”¨ç‡å’Œæ€§èƒ½ã€‚</p><p>åœ¨è´Ÿè½½å‡è¡¡çš„åŒæ—¶ï¼Œä»£ç†æœåŠ¡è¿˜å¯ä»¥æ‰§è¡Œæ›´å¤šçš„åŠŸèƒ½ï¼Œæ¯”å¦‚ï¼š</p><ul>\n<li><strong>å¥åº·æ£€æŸ¥</strong>ï¼šä½¿ç”¨â€œå¿ƒè·³â€ç­‰æœºåˆ¶ç›‘æ§åç«¯æœåŠ¡å™¨ï¼Œå‘ç°æœ‰æ•…éšœå°±åŠæ—¶â€œè¸¢å‡ºâ€é›†ç¾¤ï¼Œä¿è¯æœåŠ¡é«˜å¯ç”¨ï¼›</li>\n<li><strong>å®‰å…¨é˜²æŠ¤</strong>ï¼šä¿æŠ¤è¢«ä»£ç†çš„åç«¯æœåŠ¡å™¨ï¼Œé™åˆ¶IPåœ°å€æˆ–æµé‡ï¼ŒæŠµå¾¡ç½‘ç»œæ”»å‡»å’Œè¿‡è½½ï¼›</li>\n<li><strong>åŠ å¯†å¸è½½</strong>ï¼šå¯¹å¤–ç½‘ä½¿ç”¨SSL/TLSåŠ å¯†é€šä¿¡è®¤è¯ï¼Œè€Œåœ¨å®‰å…¨çš„å†…ç½‘ä¸åŠ å¯†ï¼Œæ¶ˆé™¤åŠ è§£å¯†æˆæœ¬ï¼›</li>\n<li><strong>æ•°æ®è¿‡æ»¤</strong>ï¼šæ‹¦æˆªä¸Šä¸‹è¡Œçš„æ•°æ®ï¼Œä»»æ„æŒ‡å®šç­–ç•¥ä¿®æ”¹è¯·æ±‚æˆ–è€…å“åº”ï¼›</li>\n<li><strong>å†…å®¹ç¼“å­˜</strong>ï¼šæš‚å­˜ã€å¤ç”¨æœåŠ¡å™¨å“åº”ï¼Œè¿™ä¸ªä¸<a href=\"https://time.geekbang.org/column/article/106804\">ç¬¬20è®²</a>å¯†åˆ‡ç›¸å…³ï¼Œæˆ‘ä»¬ç¨åå†è¯´ã€‚</li>\n</ul><p>æ¥ç€æ‹¿åˆšæ‰çš„ä¾¿åˆ©åº—æ¥ä¸¾ä¾‹è¯´æ˜ã€‚</p><p>å› ä¸ºä¾¿åˆ©åº—å’Œè¶…å¸‚ä¹‹é—´æ˜¯ä¸“è½¦é…é€ï¼Œæ‰€ä»¥æœ‰äº†ä¾¿åˆ©åº—ï¼Œä»¥åä½ ä¹°ä¸œè¥¿å°±æ›´çœäº‹äº†ï¼Œæ‰“ç”µè¯ç»™ä¾¿åˆ©åº—è®©å®ƒå»å¸®ä½ å–è´§ï¼Œä¸ç”¨å…³å¿ƒè¶…å¸‚æ˜¯å¦åœä¸šä¼‘æ¯ã€æ˜¯å¦äººæ»¡ä¸ºæ‚£ï¼Œè€Œä¸”æ€»èƒ½ä¹°åˆ°æœ€æ–°é²œçš„ã€‚</p><p>ä¾¿åˆ©åº—åŒæ—¶ä¹Ÿæ–¹ä¾¿äº†è¶…å¸‚ï¼Œä¸ç”¨é¢å¤–åŠ å¤§åº—é¢å°±å¯ä»¥å¢åŠ å®¢æºå’Œé”€é‡ï¼Œè´§ç‰©é›†ä¸­è£…å¸ä¹ŸèŠ‚çœäº†ç‰©æµæˆæœ¬ï¼Œç”±äºä¾¿åˆ©åº—ç›´æ¥é¢å¯¹å®¢æˆ·ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥æŠŠæ¶æ„éªšæ‰°ç”µè¯æŒ¡åœ¨å¤–é¢ã€‚</p><h2>ä»£ç†ç›¸å…³å¤´å­—æ®µ</h2><p>ä»£ç†çš„å¥½å¤„å¾ˆå¤šï¼Œä½†å› ä¸ºå®ƒâ€œæ¬ºä¸Šç’ä¸‹â€çš„ç‰¹ç‚¹ï¼Œéšè—äº†çœŸå®å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ï¼Œå¦‚æœåŒæ–¹æƒ³è¦è·å¾—è¿™äº›â€œä¸¢å¤±â€çš„åŸå§‹ä¿¡æ¯ï¼Œè¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ</p><p>é¦–å…ˆï¼Œä»£ç†æœåŠ¡å™¨éœ€è¦ç”¨å­—æ®µâ€œ<strong>Via</strong>â€æ ‡æ˜ä»£ç†çš„èº«ä»½ã€‚</p><p>Viaæ˜¯ä¸€ä¸ªé€šç”¨å­—æ®µï¼Œè¯·æ±‚å¤´æˆ–å“åº”å¤´é‡Œéƒ½å¯ä»¥å‡ºç°ã€‚æ¯å½“æŠ¥æ–‡ç»è¿‡ä¸€ä¸ªä»£ç†èŠ‚ç‚¹ï¼Œä»£ç†æœåŠ¡å™¨å°±ä¼šæŠŠè‡ªèº«çš„ä¿¡æ¯è¿½åŠ åˆ°å­—æ®µçš„æœ«å°¾ï¼Œå°±åƒæ˜¯ç»æ‰‹äººç›–äº†ä¸€ä¸ªç« ã€‚</p><p>å¦‚æœé€šä¿¡é“¾è·¯ä¸­æœ‰å¾ˆå¤šä¸­é—´ä»£ç†ï¼Œå°±ä¼šåœ¨Viaé‡Œå½¢æˆä¸€ä¸ªé“¾è¡¨ï¼Œè¿™æ ·å°±å¯ä»¥çŸ¥é“æŠ¥æ–‡ç©¶ç«Ÿèµ°è¿‡äº†å¤šå°‘ä¸ªç¯èŠ‚æ‰åˆ°è¾¾äº†ç›®çš„åœ°ã€‚</p><p>ä¾‹å¦‚ä¸‹å›¾ä¸­æœ‰ä¸¤ä¸ªä»£ç†ï¼šproxy1å’Œproxy2ï¼Œå®¢æˆ·ç«¯å‘é€è¯·æ±‚ä¼šç»è¿‡è¿™ä¸¤ä¸ªä»£ç†ï¼Œä¾æ¬¡æ·»åŠ å°±æ˜¯â€œVia:  proxy1, proxy2â€ï¼Œç­‰åˆ°æœåŠ¡å™¨è¿”å›å“åº”æŠ¥æ–‡çš„æ—¶å€™å°±è¦åè¿‡æ¥èµ°ï¼Œå¤´å­—æ®µå°±æ˜¯â€œVia:  proxy2,  proxy1â€ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/52/d7/52a3bd760584972011f6be1a5258e2d7.png?wh=2000*687\" alt=\"\"></p><p>Viaå­—æ®µåªè§£å†³äº†å®¢æˆ·ç«¯å’ŒæºæœåŠ¡å™¨åˆ¤æ–­æ˜¯å¦å­˜åœ¨ä»£ç†çš„é—®é¢˜ï¼Œè¿˜ä¸èƒ½çŸ¥é“å¯¹æ–¹çš„çœŸå®ä¿¡æ¯ã€‚</p><p>ä½†æœåŠ¡å™¨çš„IPåœ°å€åº”è¯¥æ˜¯ä¿å¯†çš„ï¼Œå…³ç³»åˆ°ä¼ä¸šçš„å†…ç½‘å®‰å…¨ï¼Œæ‰€ä»¥ä¸€èˆ¬ä¸ä¼šè®©å®¢æˆ·ç«¯çŸ¥é“ã€‚ä¸è¿‡åè¿‡æ¥ï¼Œé€šå¸¸æœåŠ¡å™¨éœ€è¦çŸ¥é“å®¢æˆ·ç«¯çš„çœŸå®IPåœ°å€ï¼Œæ–¹ä¾¿åšè®¿é—®æ§åˆ¶ã€ç”¨æˆ·ç”»åƒã€ç»Ÿè®¡åˆ†æã€‚</p><p>å¯æƒœçš„æ˜¯HTTPæ ‡å‡†é‡Œå¹¶æ²¡æœ‰ä¸ºæ­¤å®šä¹‰å¤´å­—æ®µï¼Œä½†å·²ç»å‡ºç°äº†å¾ˆå¤šâ€œäº‹å®ä¸Šçš„æ ‡å‡†â€ï¼Œæœ€å¸¸ç”¨çš„ä¸¤ä¸ªå¤´å­—æ®µæ˜¯â€œ<strong>X-Forwarded-For</strong>â€å’Œâ€œ<strong>X-Real-IP</strong>â€ã€‚</p><p>â€œX-Forwarded-Forâ€çš„å­—é¢æ„æ€æ˜¯â€œä¸ºè°è€Œè½¬å‘â€ï¼Œå½¢å¼ä¸Šå’Œâ€œViaâ€å·®ä¸å¤šï¼Œä¹Ÿæ˜¯æ¯ç»è¿‡ä¸€ä¸ªä»£ç†èŠ‚ç‚¹å°±ä¼šåœ¨å­—æ®µé‡Œè¿½åŠ ä¸€ä¸ªä¿¡æ¯ã€‚ä½†â€œViaâ€è¿½åŠ çš„æ˜¯ä»£ç†ä¸»æœºåï¼ˆæˆ–è€…åŸŸåï¼‰ï¼Œè€Œâ€œX-Forwarded-Forâ€è¿½åŠ çš„æ˜¯è¯·æ±‚æ–¹çš„IPåœ°å€ã€‚æ‰€ä»¥ï¼Œåœ¨å­—æ®µé‡Œæœ€å·¦è¾¹çš„IPåœ°å€å°±æ˜¯å®¢æˆ·ç«¯çš„åœ°å€ã€‚</p><p>â€œX-Real-IPâ€æ˜¯å¦ä¸€ç§è·å–å®¢æˆ·ç«¯çœŸå®IPçš„æ‰‹æ®µï¼Œå®ƒçš„ä½œç”¨å¾ˆç®€å•ï¼Œå°±æ˜¯è®°å½•å®¢æˆ·ç«¯IPåœ°å€ï¼Œæ²¡æœ‰ä¸­é—´çš„ä»£ç†ä¿¡æ¯ï¼Œç›¸å½“äºæ˜¯â€œX-Forwarded-Forâ€çš„ç®€åŒ–ç‰ˆã€‚å¦‚æœå®¢æˆ·ç«¯å’ŒæºæœåŠ¡å™¨ä¹‹é—´åªæœ‰ä¸€ä¸ªä»£ç†ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªå­—æ®µçš„å€¼å°±æ˜¯ç›¸åŒçš„ã€‚</p><p>æˆ‘ä»¬çš„å®éªŒç¯å¢ƒå®ç°äº†ä¸€ä¸ªåå‘ä»£ç†ï¼Œè®¿é—®â€œ<a href=\"http://www.chrono.com/21-1\">http://www.chrono.com/21-1</a>â€ï¼Œå®ƒä¼šè½¬è€Œè®¿é—®â€œ<a href=\"http://origin.io\">http://origin.io</a>â€ã€‚è¿™é‡Œçš„â€œorigin.ioâ€å°±æ˜¯æºç«™ï¼Œå®ƒä¼šåœ¨å“åº”æŠ¥æ–‡é‡Œè¾“å‡ºâ€œViaâ€â€œX-Forwarded-Forâ€ç­‰ä»£ç†å¤´å­—æ®µä¿¡æ¯ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/c5/e7/c5aa6d5f82e8cc1a35772293972446e7.png?wh=1227*1120\" alt=\"\"></p><p>å•ä»æµè§ˆå™¨çš„é¡µé¢ä¸Šå¾ˆéš¾çœ‹å‡ºä»£ç†åšäº†å“ªäº›å·¥ä½œï¼Œå› ä¸ºä»£ç†çš„è½¬å‘éƒ½åœ¨åå°ä¸å¯è§ï¼Œæ‰€ä»¥æˆ‘æŠŠè¿™ä¸ªè¿‡ç¨‹ç”¨WiresharkæŠ“äº†ä¸€ä¸ªåŒ…ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/5a/54/5a247e9e5bf66f5ac3316fddf4e2b254.png?wh=2112*1296\" alt=\"\"></p><p>ä»æŠ“åŒ…é‡Œå°±å¯ä»¥æ¸…æ™°åœ°çœ‹å‡ºä»£ç†ä¸å®¢æˆ·ç«¯ã€æºæœåŠ¡å™¨çš„é€šä¿¡è¿‡ç¨‹ï¼š</p><ol>\n<li>å®¢æˆ·ç«¯55061å…ˆç”¨ä¸‰æ¬¡æ¡æ‰‹è¿æ¥åˆ°ä»£ç†çš„80ç«¯å£ï¼Œç„¶åå‘é€GETè¯·æ±‚ï¼›</li>\n<li>ä»£ç†ä¸ç›´æ¥ç”Ÿäº§å†…å®¹ï¼Œæ‰€ä»¥å°±ä»£è¡¨å®¢æˆ·ç«¯ï¼Œç”¨55063ç«¯å£è¿æ¥åˆ°æºæœåŠ¡å™¨ï¼Œä¹Ÿæ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼›</li>\n<li>ä»£ç†æˆåŠŸè¿æ¥æºæœåŠ¡å™¨åï¼Œå‘å‡ºäº†ä¸€ä¸ªHTTP/1.0 çš„GETè¯·æ±‚ï¼›</li>\n<li>å› ä¸ºHTTP/1.0é»˜è®¤æ˜¯çŸ­è¿æ¥ï¼Œæ‰€ä»¥æºæœåŠ¡å™¨å‘é€å“åº”æŠ¥æ–‡åç«‹å³ç”¨å››æ¬¡æŒ¥æ‰‹å…³é—­è¿æ¥ï¼›</li>\n<li>ä»£ç†æ‹¿åˆ°å“åº”æŠ¥æ–‡åå†å‘å›ç»™å®¢æˆ·ç«¯ï¼Œå®Œæˆäº†ä¸€æ¬¡ä»£ç†æœåŠ¡ã€‚</li>\n</ol><p>åœ¨è¿™ä¸ªå®éªŒä¸­ï¼Œä½ å¯ä»¥çœ‹åˆ°é™¤äº†â€œX-Forwarded-Forâ€å’Œâ€œX-Real-IPâ€ï¼Œè¿˜å‡ºç°äº†ä¸¤ä¸ªå­—æ®µï¼šâ€œX-Forwarded-Hostâ€å’Œâ€œX-Forwarded-Protoâ€ï¼Œå®ƒä»¬çš„ä½œç”¨ä¸â€œX-Real-IPâ€ç±»ä¼¼ï¼Œåªè®°å½•å®¢æˆ·ç«¯çš„ä¿¡æ¯ï¼Œåˆ†åˆ«æ˜¯å®¢æˆ·ç«¯è¯·æ±‚çš„åŸå§‹åŸŸåå’ŒåŸå§‹åè®®åã€‚</p><h2>ä»£ç†åè®®</h2><p>æœ‰äº†â€œX-Forwarded-Forâ€ç­‰å¤´å­—æ®µï¼ŒæºæœåŠ¡å™¨å°±å¯ä»¥æ‹¿åˆ°å‡†ç¡®çš„å®¢æˆ·ç«¯ä¿¡æ¯äº†ã€‚ä½†å¯¹äºä»£ç†æœåŠ¡å™¨æ¥è¯´å®ƒå¹¶ä¸æ˜¯ä¸€ä¸ªæœ€ä½³çš„è§£å†³æ–¹æ¡ˆã€‚</p><p>å› ä¸ºé€šè¿‡â€œX-Forwarded-Forâ€æ“ä½œä»£ç†ä¿¡æ¯å¿…é¡»è¦è§£æHTTPæŠ¥æ–‡å¤´ï¼Œè¿™å¯¹äºä»£ç†æ¥è¯´æˆæœ¬æ¯”è¾ƒé«˜ï¼ŒåŸæœ¬åªéœ€è¦ç®€å•åœ°è½¬å‘æ¶ˆæ¯å°±å¥½ï¼Œè€Œç°åœ¨å´å¿…é¡»è¦è´¹åŠ›è§£ææ•°æ®å†ä¿®æ”¹æ•°æ®ï¼Œä¼šé™ä½ä»£ç†çš„è½¬å‘æ€§èƒ½ã€‚</p><p>å¦ä¸€ä¸ªé—®é¢˜æ˜¯â€œX-Forwarded-Forâ€ç­‰å¤´å¿…é¡»è¦ä¿®æ”¹åŸå§‹æŠ¥æ–‡ï¼Œè€Œæœ‰äº›æƒ…å†µä¸‹æ˜¯ä¸å…è®¸ç”šè‡³ä¸å¯èƒ½çš„ï¼ˆæ¯”å¦‚ä½¿ç”¨HTTPSé€šä¿¡è¢«åŠ å¯†ï¼‰ã€‚</p><p>æ‰€ä»¥å°±å‡ºç°äº†ä¸€ä¸ªä¸“é—¨çš„â€œä»£ç†åè®®â€ï¼ˆThe PROXY protocolï¼‰ï¼Œå®ƒç”±çŸ¥åçš„ä»£ç†è½¯ä»¶HAProxyæ‰€å®šä¹‰ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªâ€œäº‹å®æ ‡å‡†â€ï¼Œè¢«å¹¿æ³›é‡‡ç”¨ï¼ˆæ³¨æ„å¹¶ä¸æ˜¯RFCï¼‰ã€‚</p><p>â€œä»£ç†åè®®â€æœ‰v1å’Œv2ä¸¤ä¸ªç‰ˆæœ¬ï¼Œv1å’ŒHTTPå·®ä¸å¤šï¼Œä¹Ÿæ˜¯æ˜æ–‡ï¼Œè€Œv2æ˜¯äºŒè¿›åˆ¶æ ¼å¼ã€‚ä»Šå¤©åªä»‹ç»æ¯”è¾ƒå¥½ç†è§£çš„v1ï¼Œå®ƒåœ¨HTTPæŠ¥æ–‡å‰å¢åŠ äº†ä¸€è¡ŒASCIIç æ–‡æœ¬ï¼Œç›¸å½“äºåˆå¤šäº†ä¸€ä¸ªå¤´ã€‚</p><p>è¿™ä¸€è¡Œæ–‡æœ¬å…¶å®éå¸¸ç®€å•ï¼Œå¼€å¤´å¿…é¡»æ˜¯â€œPROXYâ€äº”ä¸ªå¤§å†™å­—æ¯ï¼Œç„¶åæ˜¯â€œTCP4â€æˆ–è€…â€œTCP6â€ï¼Œè¡¨ç¤ºå®¢æˆ·ç«¯çš„IPåœ°å€ç±»å‹ï¼Œå†åé¢æ˜¯è¯·æ±‚æ–¹åœ°å€ã€åº”ç­”æ–¹åœ°å€ã€è¯·æ±‚æ–¹ç«¯å£å·ã€åº”ç­”æ–¹ç«¯å£å·ï¼Œæœ€åç”¨ä¸€ä¸ªå›è½¦æ¢è¡Œï¼ˆ\\r\\nï¼‰ç»“æŸã€‚</p><p>ä¾‹å¦‚ä¸‹é¢çš„è¿™ä¸ªä¾‹å­ï¼Œåœ¨GETè¯·æ±‚è¡Œå‰å¤šå‡ºäº†PROXYä¿¡æ¯è¡Œï¼Œå®¢æˆ·ç«¯çš„çœŸå®IPåœ°å€æ˜¯â€œ1.1.1.1â€ï¼Œç«¯å£å·æ˜¯55555ã€‚</p><pre><code>PROXY TCP4 1.1.1.1 2.2.2.2 55555 80\\r\\n\nGET / HTTP/1.1\\r\\n\nHost: www.xxx.com\\r\\n\n\\r\\n\n</code></pre><p>æœåŠ¡å™¨çœ‹åˆ°è¿™æ ·çš„æŠ¥æ–‡ï¼Œåªè¦è§£æç¬¬ä¸€è¡Œå°±å¯ä»¥æ‹¿åˆ°å®¢æˆ·ç«¯åœ°å€ï¼Œä¸éœ€è¦å†å»ç†ä¼šåé¢çš„HTTPæ•°æ®ï¼Œçœäº†å¾ˆå¤šäº‹æƒ…ã€‚</p><p>ä¸è¿‡ä»£ç†åè®®å¹¶ä¸æ”¯æŒâ€œX-Forwarded-Forâ€çš„é“¾å¼åœ°å€å½¢å¼ï¼Œæ‰€ä»¥æ‹¿åˆ°å®¢æˆ·ç«¯åœ°å€åå†å¦‚ä½•å¤„ç†å°±éœ€è¦ä»£ç†æœåŠ¡å™¨ä¸åç«¯è‡ªè¡Œçº¦å®šã€‚</p><h2>å°ç»“</h2><ol>\n<li><span class=\"orange\">HTTPä»£ç†å°±æ˜¯å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨é€šä¿¡é“¾è·¯ä¸­çš„ä¸€ä¸ªä¸­é—´ç¯èŠ‚ï¼Œä¸ºä¸¤ç«¯æä¾›â€œä»£ç†æœåŠ¡â€ï¼›</span></li>\n<li><span class=\"orange\">ä»£ç†å¤„äºä¸­é—´å±‚ï¼Œä¸ºHTTPå¤„ç†å¢åŠ äº†æ›´å¤šçš„çµæ´»æ€§ï¼Œå¯ä»¥å®ç°è´Ÿè½½å‡è¡¡ã€å®‰å…¨é˜²æŠ¤ã€æ•°æ®è¿‡æ»¤ç­‰åŠŸèƒ½ï¼›</span></li>\n<li><span class=\"orange\">ä»£ç†æœåŠ¡å™¨éœ€è¦ä½¿ç”¨å­—æ®µâ€œViaâ€æ ‡è®°è‡ªå·±çš„èº«ä»½ï¼Œå¤šä¸ªä»£ç†ä¼šå½¢æˆä¸€ä¸ªåˆ—è¡¨ï¼›</span></li>\n<li><span class=\"orange\">å¦‚æœæƒ³è¦çŸ¥é“å®¢æˆ·ç«¯çš„çœŸå®IPåœ°å€ï¼Œå¯ä»¥ä½¿ç”¨å­—æ®µâ€œX-Forwarded-Forâ€å’Œâ€œX-Real-IPâ€ï¼›</span></li>\n<li><span class=\"orange\">ä¸“é—¨çš„â€œä»£ç†åè®®â€å¯ä»¥åœ¨ä¸æ”¹åŠ¨åŸå§‹æŠ¥æ–‡çš„æƒ…å†µä¸‹ä¼ é€’å®¢æˆ·ç«¯çš„çœŸå®IPã€‚</span></li>\n</ol><h2>è¯¾ä¸‹ä½œä¸š</h2><ol>\n<li>ä½ è§‰å¾—ä»£ç†æœ‰ä»€ä¹ˆç¼ºç‚¹ï¼Ÿå®é™…åº”ç”¨æ—¶å¦‚ä½•é¿å…ï¼Ÿ</li>\n<li>ä½ çŸ¥é“å¤šå°‘åå‘ä»£ç†ä¸­ä½¿ç”¨çš„è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Ÿå®ƒä»¬æœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹ï¼Ÿ</li>\n</ol><p>æ¬¢è¿ä½ æŠŠè‡ªå·±çš„å­¦ä¹ ä½“ä¼šå†™åœ¨ç•™è¨€åŒºï¼Œä¸æˆ‘å’Œå…¶ä»–åŒå­¦ä¸€èµ·è®¨è®ºã€‚å¦‚æœä½ è§‰å¾—æœ‰æ‰€æ”¶è·ï¼Œä¹Ÿæ¬¢è¿æŠŠæ–‡ç« åˆ†äº«ç»™ä½ çš„æœ‹å‹ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/a8/9f/a8122180bd01e05613d75d34962da79f.png?wh=1769*2798\" alt=\"unpreview\"></p><p><img src=\"https://static001.geekbang.org/resource/image/56/63/56d766fc04654a31536f554b8bde7b63.jpg?wh=1110*659\" alt=\"unpreview\"></p>","comments":[{"had_liked":false,"id":113747,"user_name":"-W.LI-","can_delete":false,"product_type":"c1","uid":1210699,"ip_address":"","ucode":"3556786538664F","user_header":"https://static001.geekbang.org/account/avatar/00/12/79/4b/740f91ca.jpg","comment_is_top":false,"comment_ctime":1563150868,"is_pvip":false,"replies":[{"id":"41407","content":"greatï¼","user_name":"ä½œè€…å›å¤","comment_id":113747,"uid":"1181974","ip_address":"","utype":1,"ctime":1563153766,"user_name_real":"chrono"}],"discussion_count":4,"race_medal":0,"score":"216311515668","product_id":100029001,"comment_content":"ä»£ç†ä¼šå¢åŠ é“¾è·¯é•¿åº¦ï¼Œåœ¨ä»£ç†ä¸Šåšä¸€äº›å¤æ‚çš„å¤„ç†ã€‚ä¼šå¾ˆè€—è´¹æ€§èƒ½ï¼Œå¢åŠ å“åº”æ—¶é—´ã€‚<br>1.éšæœº<br>2.è½®è¯¢<br>3.ä¸€è‡´æ€§hash<br>4æœ€è¿‘æœ€å°‘ä½¿ç”¨<br>5.é“¾æ¥æœ€å°‘","like_count":51,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458368,"discussion_content":"greatï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563153766,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1105387,"avatar":"https://static001.geekbang.org/account/avatar/00/10/dd/eb/80f9d212.jpg","nickname":"lttzzlll","note":"","ucode":"FA160F7C02ABAA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":337556,"discussion_content":"æ€»ç»“ä¸‹æ¥åˆ†ä¸ºä¸¤ç±»:\n1. æ ¹æ®æœåŠ¡ç«¯çš„æƒ…å†µåšè´Ÿè½½å‡è¡¡ round-robin, weighted-round-robin, LRU, least connecetion\n2. æ ¹æ®å®¢æˆ·ç«¯çš„ä¸€äº›featureåšè´Ÿè½½å‡è¡¡ ip, cookie, other features\n\néšæœºä¹Ÿæ˜¯æ ¹æ®æœåŠ¡ç«¯çš„æƒ…å†µåšè´Ÿè½½å‡è¡¡çš„ä¸€ç§ã€‚","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1608972974,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1003005,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/4d/fd/0aa0e39f.jpg","nickname":"è®¸ç«¥ç«¥","note":"","ucode":"4B799C0C6BC678","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":1986,"discussion_content":"æ€»ç»“å¾—ä¸é”™","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563163086,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1484184,"avatar":"https://static001.geekbang.org/account/avatar/00/16/a5/98/a65ff31a.jpg","nickname":"djfhchdh","note":"","ucode":"E71D75328CE398","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":1974,"discussion_content":"å­¦ä¹ äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563158138,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":215959,"user_name":"BoyiKia","can_delete":false,"product_type":"c1","uid":1983680,"ip_address":"","ucode":"D37541B4451D6B","user_header":"https://static001.geekbang.org/account/avatar/00/1e/44/c0/cd2cd082.jpg","comment_is_top":false,"comment_ctime":1589159678,"is_pvip":false,"replies":[{"id":"79966","content":"è¿™ä¸ªæ˜¯tcpåè®®çš„çŸ¥è¯†äº†ï¼Œå°±æ˜¯è°å…ˆæ–­å¼€è¿æ¥çš„é—®é¢˜ã€‚<br><br>å…¶å®è¿™ä¸ªå¹¶æ²¡æœ‰å¼ºåˆ¶è¦æ±‚å®¢æˆ·ç«¯æˆ–è€…æœåŠ¡å™¨å…ˆæ–­å¼€ï¼Œé€šå¸¸éƒ½æ˜¯å®¢æˆ·ç«¯ä¸»åŠ¨æ–­å¼€ï¼Œä½†æœåŠ¡å™¨ä¹Ÿå¯ä»¥ä¸»åŠ¨æ–­å¼€ï¼Œæ¯”å¦‚è¶…æ—¶ã€çŸ­è¿æ¥ã€èŠ‚çº¦èµ„æºç­‰ç­‰ã€‚<br><br>æ‰€ä»¥ç»“è®ºå°±æ˜¯è°éƒ½å¯ä»¥ï¼Œæœ‰ç©ºå¯ä»¥å†è¡¥ä¸€ä¸‹tcpçš„çŸ¥è¯†ã€‚","user_name":"ä½œè€…å›å¤","comment_id":215959,"uid":"1181974","ip_address":"","utype":1,"ctime":1589182876,"user_name_real":"chrono"}],"discussion_count":2,"race_medal":0,"score":"74603603710","product_id":100029001,"comment_content":"è€å¸ˆï¼Œæˆ‘å‘ç°å‰å‡ èŠ‚è¯¾ï¼Œå››æ¬¡æŒ¥æ‰‹çš„æ—¶å€™ï¼Œæ˜¯å®¢æˆ·ç«¯ä¸»åŠ¨å…ˆå‘ Finä¿¡å·ï¼Œ ä»Šå¤©å®éªŒç»“æœï¼Œæ˜¯æºæœåŠ¡å™¨ï¼Œå…ˆç»™ä»£ç†æœåŠ¡å™¨å‘çš„ Finä¿¡å·ã€‚è€å¸ˆï¼Œæˆ‘æœ‰ç‚¹ç–‘æƒ‘å“ˆã€‚åˆ°åº•æ˜¯è°åº”è¯¥å…ˆå‘ã€‚è¿˜æ˜¯è¯´éƒ½å¯ä»¥å‘¢ã€‚","like_count":18,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":494623,"discussion_content":"è¿™ä¸ªæ˜¯tcpåè®®çš„çŸ¥è¯†äº†ï¼Œå°±æ˜¯è°å…ˆæ–­å¼€è¿æ¥çš„é—®é¢˜ã€‚\n\nå…¶å®è¿™ä¸ªå¹¶æ²¡æœ‰å¼ºåˆ¶è¦æ±‚å®¢æˆ·ç«¯æˆ–è€…æœåŠ¡å™¨å…ˆæ–­å¼€ï¼Œé€šå¸¸éƒ½æ˜¯å®¢æˆ·ç«¯ä¸»åŠ¨æ–­å¼€ï¼Œä½†æœåŠ¡å™¨ä¹Ÿå¯ä»¥ä¸»åŠ¨æ–­å¼€ï¼Œæ¯”å¦‚è¶…æ—¶ã€çŸ­è¿æ¥ã€èŠ‚çº¦èµ„æºç­‰ç­‰ã€‚\n\næ‰€ä»¥ç»“è®ºå°±æ˜¯è°éƒ½å¯ä»¥ï¼Œæœ‰ç©ºå¯ä»¥å†è¡¥ä¸€ä¸‹tcpçš„çŸ¥è¯†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589182876,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1983680,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/44/c0/cd2cd082.jpg","nickname":"BoyiKia","note":"","ucode":"D37541B4451D6B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":263365,"discussion_content":"å—¯å—¯ï¼Œå¾ˆæ„Ÿè°¢è€å¸ˆã€‚è°¢è°¢ğŸ˜œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589203105,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":228437,"user_name":"Demon","can_delete":false,"product_type":"c1","uid":1390641,"ip_address":"","ucode":"58CD838717F36D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIUdfNDQs3eLoIjfIXDm77W66udicLfqh6NA8QX4QuZNO48UlRTfDo2Fm2jGX0z3hjnbARib8wSbxcg/132","comment_is_top":false,"comment_ctime":1592671925,"is_pvip":false,"replies":[{"id":"84245","content":"å½“ç„¶æœ‰äº†ï¼Œäº’è”ç½‘ä¸Šå¾ˆå°‘æœ‰ç›´è¿ç½‘ç«™çš„ï¼Œéƒ½è¦ç»è¿‡å±‚å±‚ä»£ç†ï¼Œè¿™ä¸­é—´å°±å…ä¸äº†ç”¨ä»£ç†åè®®ã€‚<br><br>å¾ˆå¤šä»£ç†å¹¶ä¸æ˜¯ä¸ºäº†åŒ¿åï¼Œè€Œæ˜¯ä¸ºäº†ç¼“å­˜ã€‚","user_name":"ä½œè€…å›å¤","comment_id":228437,"uid":"1181974","ip_address":"","utype":1,"ctime":1592722710,"user_name_real":"ç½—å‰‘é”‹"}],"discussion_count":1,"race_medal":0,"score":"48837312181","product_id":100029001,"comment_content":"å¾ˆå¤šåœºæ™¯ä¸‹ï¼Œä½¿ç”¨ä»£ç†çš„ç›®çš„å°±æ˜¯ä¸ºäº†åŒ¿åï¼Œä¸è®©å¯¹æ–¹çŸ¥é“è¯·æ±‚&#47;å“åº”çš„æ¥æºåœ¨å“ªå„¿ã€‚é™¤äº†åœ¨æµ‹è¯•ç¯å¢ƒåˆ†ææŠ€æœ¯é—®é¢˜çš„åœºæ™¯ï¼Œç°å®ä¸šåŠ¡ä¸­æœ‰éœ€è¦åœ¨æŠ¥æ–‡ä¸­æºå¸¦å±‚å±‚ä»£ç†ä¿¡æ¯çš„åº”ç”¨caseå—ï¼Ÿ","like_count":12,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":499033,"discussion_content":"å½“ç„¶æœ‰äº†ï¼Œäº’è”ç½‘ä¸Šå¾ˆå°‘æœ‰ç›´è¿ç½‘ç«™çš„ï¼Œéƒ½è¦ç»è¿‡å±‚å±‚ä»£ç†ï¼Œè¿™ä¸­é—´å°±å…ä¸äº†ç”¨ä»£ç†åè®®ã€‚\n\nå¾ˆå¤šä»£ç†å¹¶ä¸æ˜¯ä¸ºäº†åŒ¿åï¼Œè€Œæ˜¯ä¸ºäº†ç¼“å­˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592722710,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":114330,"user_name":"ç«è½¦æ—¥è®°","can_delete":false,"product_type":"c1","uid":1480419,"ip_address":"","ucode":"62C57DFA6CDF74","user_header":"https://static001.geekbang.org/account/avatar/00/16/96/e3/dd40ec58.jpg","comment_is_top":false,"comment_ctime":1563275567,"is_pvip":false,"replies":[{"id":"41769","content":"greatï¼","user_name":"ä½œè€…å›å¤","comment_id":114330,"uid":"1181974","ip_address":"","utype":1,"ctime":1563325518,"user_name_real":"chrono"}],"discussion_count":1,"race_medal":0,"score":"40217981231","product_id":100029001,"comment_content":"1 è¡¥å……å‡ ä¸ªï¼Œip_hash ã€æœ€å°‘è¿æ¥æ•°ã€æœ€å¿«è¿æ¥æ•°ï¼Œæ ¹æ®åœºæ™¯åº”ç”¨<br>2 ä½œä¸ºä¸­è½¬ç«™ï¼Œéœ€è¦ä¸ºä¸Šæ¸¸å’Œä¸‹æ¸¸å¼€å¯ä¸¤ä¸ªè¿æ¥ï¼Œå¤§é‡å¹¶å‘è¯·æ±‚ï¼Œä¼šå‡ºç°æ€§èƒ½ç“¶é¢ˆï¼Œåº”å‡å°‘èµ„æºå¼€é”€ï¼ŒåŠ å¿«å“åº”é€Ÿåº¦ï¼Œæ¯”å¦‚ä»£ç†ç¼“å­˜ï¼ŒåŠ¨é™åˆ†ç¦»","like_count":10,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458610,"discussion_content":"greatï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563325518,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":180868,"user_name":"Long","can_delete":false,"product_type":"c1","uid":1580358,"ip_address":"","ucode":"D85B99FD0C4B76","user_header":"https://wx.qlogo.cn/mmopen/vi_32/ZMALpD4bKCVdsx8ymCC5Oo0oxibxIFGQzT6fP2B8MEgLGLktQRX4ictobkbcNBDTQibjoQNKBmWCKomNibWqHZ5kpg/132","comment_is_top":false,"comment_ctime":1582431868,"is_pvip":false,"replies":[{"id":"70198","content":"è¿™ä¸ªé‡Œé¢å…¶å®å¾ˆå¤æ‚ï¼Œé¦–å…ˆç½‘ç«™å¤–é¢ä¼šæœ‰cdnï¼Œç„¶åå…¥å£ä¼šæœ‰åå‘ä»£ç†ï¼Œå†åé¢æ‰å¯èƒ½æ˜¯çœŸå®çš„ä¸šåŠ¡æœåŠ¡å™¨ã€‚<br><br>æœåŠ¡å™¨ä¹Ÿå¯ä»¥å®‰è£…å¤šä¸ªç½‘å¡ï¼Œä¸€ä¸ªç½‘å¡å¯¹å¤–ï¼Œä¸€ä¸ªç½‘å¡å¯¹å†…ï¼Œè¿™æ ·æœ‰ä¸¤ä¸ªipåœ°å€ï¼Œåˆ†åˆ«å¯¹å¤–å¯¹å†…ã€‚","user_name":"ä½œè€…å›å¤","comment_id":180868,"uid":"1181974","ip_address":"","utype":1,"ctime":1582443569,"user_name_real":"chrono"}],"discussion_count":1,"race_medal":0,"score":"27352235644","product_id":100029001,"comment_content":"è€å¸ˆå¥½,æ–‡ä¸­<br>&quot;æœåŠ¡å™¨çš„ IP åœ°å€åº”è¯¥æ˜¯ä¿å¯†çš„ï¼Œå…³ç³»åˆ°ä¼ä¸šçš„å†…ç½‘å®‰å…¨ï¼Œæ‰€ä»¥ä¸€èˆ¬ä¸ä¼šè®©å®¢æˆ·ç«¯çŸ¥é“ã€‚&quot;<br>æ˜¯ä¸æ˜¯å¯ä»¥è®¤ä¸º,åŸŸåæ‰€å¯¹åº”çš„IPåœ°å€å’ŒçœŸå®æœåŠ¡å™¨çš„IPåœ°å€æ˜¯ä¸ä¸€æ ·çš„å‘¢?å› ä¸ºçœŸå®æœåŠ¡å™¨çš„åœ°å€ä¸€èˆ¬éƒ½æ˜¯ç§ç½‘çš„IPåœ°å€.","like_count":6,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484824,"discussion_content":"è¿™ä¸ªé‡Œé¢å…¶å®å¾ˆå¤æ‚ï¼Œé¦–å…ˆç½‘ç«™å¤–é¢ä¼šæœ‰cdnï¼Œç„¶åå…¥å£ä¼šæœ‰åå‘ä»£ç†ï¼Œå†åé¢æ‰å¯èƒ½æ˜¯çœŸå®çš„ä¸šåŠ¡æœåŠ¡å™¨ã€‚\n\næœåŠ¡å™¨ä¹Ÿå¯ä»¥å®‰è£…å¤šä¸ªç½‘å¡ï¼Œä¸€ä¸ªç½‘å¡å¯¹å¤–ï¼Œä¸€ä¸ªç½‘å¡å¯¹å†…ï¼Œè¿™æ ·æœ‰ä¸¤ä¸ªipåœ°å€ï¼Œåˆ†åˆ«å¯¹å¤–å¯¹å†…ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582443569,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":113722,"user_name":"lmingzhi","can_delete":false,"product_type":"c1","uid":1014489,"ip_address":"","ucode":"72DBAF4FD184AF","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7a/d9/4feb4006.jpg","comment_is_top":false,"comment_ctime":1563147844,"is_pvip":false,"replies":[{"id":"41408","content":"å¦‚æœä»£ç†æ¯”è¾ƒâ€œå–„è‰¯â€ï¼Œå°±ä¼šç”¨â€œX-Forwarded-Forâ€å’Œâ€œX-Real-IPâ€å‘ŠçŸ¥å®¢æˆ·ç«¯çš„çœŸå®ipï¼Œå¦‚æœå®ƒæ˜¯å®Œå…¨åŒ¿åï¼Œä¸æä¾›è¿™äº›å­—æ®µï¼Œæˆ‘ä»¬ä¹Ÿæ²¡æœ‰åŠæ³•ï¼Œå› ä¸ºå®ƒå°±æ˜¯ä¸€ä¸ªçœŸå®çš„å®¢æˆ·ç«¯ã€‚","user_name":"ä½œè€…å›å¤","comment_id":113722,"uid":"1181974","ip_address":"","utype":1,"ctime":1563153945,"user_name_real":"chrono"}],"discussion_count":1,"race_medal":0,"score":"18743017028","product_id":100029001,"comment_content":"è€å¸ˆï¼Œè¯·é—®æœ‰ä»€ä¹ˆæ£€æµ‹httpä»£ç†ipåŒ¿åæ€§çš„æ‰‹æ®µï¼Ÿ<br><br>æ˜¯å¦åªè¦æ£€æŸ¥è¯·æ±‚å¤´æ˜¯å¦å¸¦æœ‰â€œX-Forwarded-Forâ€å’Œâ€œX-Real-IPâ€åŠé‡Œé¢æ˜¯å¦å¸¦æœ‰çœŸå®ipå³å¯ï¼Ÿ","like_count":5,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458360,"discussion_content":"å¦‚æœä»£ç†æ¯”è¾ƒâ€œå–„è‰¯â€ï¼Œå°±ä¼šç”¨â€œX-Forwarded-Forâ€å’Œâ€œX-Real-IPâ€å‘ŠçŸ¥å®¢æˆ·ç«¯çš„çœŸå®ipï¼Œå¦‚æœå®ƒæ˜¯å®Œå…¨åŒ¿åï¼Œä¸æä¾›è¿™äº›å­—æ®µï¼Œæˆ‘ä»¬ä¹Ÿæ²¡æœ‰åŠæ³•ï¼Œå› ä¸ºå®ƒå°±æ˜¯ä¸€ä¸ªçœŸå®çš„å®¢æˆ·ç«¯ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563153945,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":176084,"user_name":"sarah","can_delete":false,"product_type":"c1","uid":1140403,"ip_address":"","ucode":"CAF3960C1CCD04","user_header":"https://static001.geekbang.org/account/avatar/00/11/66/b3/8fe66459.jpg","comment_is_top":false,"comment_ctime":1580953543,"is_pvip":false,"replies":[{"id":"68433","content":"è¿™ä¸ªæ˜¯tcpåè®®çš„ackï¼Œè¡¨ç¤ºæ”¶åˆ°æŠ¥æ–‡çš„ç¡®è®¤ï¼Œå¦‚æœä½ å†å¤šäº†è§£ä¸€äº›tcpçš„çŸ¥è¯†å°±ä¼šæ˜ç™½ã€‚","user_name":"ä½œè€…å›å¤","comment_id":176084,"uid":"1181974","ip_address":"","utype":1,"ctime":1580956697,"user_name_real":"chrono"}],"discussion_count":1,"race_medal":0,"score":"14465855431","product_id":100029001,"comment_content":"è€å¸ˆï¼Œå¯¹å›¾ä¸­wiresharkçš„æŠ“åŒ…æœ‰ä¸ªç–‘é—®: æ¯ä¸€æ¬¡çš„httpæŠ¥æ–‡åé¢ä¼šè·Ÿç€ä¸€ä¸ªtcpæŠ¥æ–‡ï¼Œè¿™ä¸ªtcpæŠ¥æ–‡æ˜¯æ€ä¹ˆäº§ç”Ÿçš„ï¼Ÿä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿä¾‹å¦‚ï¼Œç¬¬ä¸€ä¸ªhttpæŠ¥æ–‡ï¼ŒHTTP GET&#47;21-1 HTTP1.1åé¢çš„TCP 80â€“55061 ","like_count":3,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":483011,"discussion_content":"è¿™ä¸ªæ˜¯tcpåè®®çš„ackï¼Œè¡¨ç¤ºæ”¶åˆ°æŠ¥æ–‡çš„ç¡®è®¤ï¼Œå¦‚æœä½ å†å¤šäº†è§£ä¸€äº›tcpçš„çŸ¥è¯†å°±ä¼šæ˜ç™½ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580956697,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":158420,"user_name":"å¤ç›®","can_delete":false,"product_type":"c1","uid":1212750,"ip_address":"","ucode":"67C075A01CF4D2","user_header":"https://static001.geekbang.org/account/avatar/00/12/81/4e/d71092f4.jpg","comment_is_top":false,"comment_ctime":1575367079,"is_pvip":false,"replies":[{"id":"60673","content":"æ˜¯çš„ï¼Œå¯ä»¥ç®—æ˜¯ä¸€ç§å¾®å‹çš„åå‘ä»£ç†ã€‚","user_name":"ä½œè€…å›å¤","comment_id":158420,"uid":"1181974","ip_address":"","utype":1,"ctime":1575421375,"user_name_real":"chrono"}],"discussion_count":1,"race_medal":0,"score":"14460268967","product_id":100029001,"comment_content":"è€å¸ˆï¼Œå¾®æœåŠ¡é‡Œçš„ç½‘å…³ç®—ä¸ç®—ä¸€ä¸ªå¢å¼ºç‰ˆçš„ä»£ç†æœåŠ¡å™¨å‘¢","like_count":3,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476716,"discussion_content":"æ˜¯çš„ï¼Œå¯ä»¥ç®—æ˜¯ä¸€ç§å¾®å‹çš„åå‘ä»£ç†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575421375,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":114338,"user_name":"é™¢é•¿ã€‚","can_delete":false,"product_type":"c1","uid":1153546,"ip_address":"","ucode":"DF56871F42A868","user_header":"https://static001.geekbang.org/account/avatar/00/11/9a/0a/da55228e.jpg","comment_is_top":false,"comment_ctime":1563276925,"is_pvip":false,"replies":[{"id":"41768","content":"å®‰å…¨ç¯‡åçš„é£ç¿”ç¯‡æœ‰http&#47;2å’Œhttp&#47;3ã€‚","user_name":"ä½œè€…å›å¤","comment_id":114338,"uid":"1181974","ip_address":"","utype":1,"ctime":1563325505,"user_name_real":"chrono"}],"discussion_count":1,"race_medal":0,"score":"14448178813","product_id":100029001,"comment_content":"è€å¸ˆåé¢ä¼šè®²HTTP2.0å—","like_count":3,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458615,"discussion_content":"å®‰å…¨ç¯‡åçš„é£ç¿”ç¯‡æœ‰http/2å’Œhttp/3ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563325505,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":227382,"user_name":"Maske","can_delete":false,"product_type":"c1","uid":1696847,"ip_address":"","ucode":"A19BB41A47E852","user_header":"https://static001.geekbang.org/account/avatar/00/19/e4/4f/df6d810d.jpg","comment_is_top":false,"comment_ctime":1592369016,"is_pvip":true,"replies":[{"id":"83807","content":"è¯´çš„æŒºå¥½ï¼Œè¿™æ®µæ—¶é—´å­¦ä¹ å¾—å¾ˆå‹¤å¥‹å•Šï¼Œä¹Ÿè¦é€‚å½“ä¼‘æ¯ã€‚","user_name":"ä½œè€…å›å¤","comment_id":227382,"uid":"1181974","ip_address":"","utype":1,"ctime":1592372231,"user_name_real":"ç½—å‰‘é”‹"}],"discussion_count":2,"race_medal":0,"score":"10182303608","product_id":100029001,"comment_content":"1.a ä»£ç†æœåŠ¡å™¨ä¸ä¸Šä¸‹æ¸¸çš„é€šä¿¡æœºåˆ¶ä¹Ÿæ˜¯httpåè®®ï¼Œå› æ­¤å¢åŠ äº†ä¼ è¾“ä¸­çš„æ•°æ®æ³„æ¼å’Œç¯¡æ”¹é£é™©ï¼Œå¯ä»¥ä½¿ç”¨httpsè§£å†³ã€‚b å¦‚æœä»£ç†æœåŠ¡å™¨å‘ç”Ÿæ•…éšœï¼Œä¼šå½±å“å®¢æˆ·ç«¯çš„æ­£å¸¸è®¿é—®ï¼Œå¯ä»¥å¢åŠ ä»£ç†æœåŠ¡å™¨çš„æ•°é‡ï¼Œå¹¶é…ç½®ä»£ç†æœåŠ¡å™¨è´Ÿè½½å‡è¡¡ç®—æ³•ã€‚c ç”±äºå¤šäº†ä»£ç†æœåŠ¡å™¨çš„è¯·æ±‚å“åº”è¿‡ç¨‹ï¼Œå¢åŠ äº†ä»æºå®¢æˆ·ç«¯å’ŒæºæœåŠ¡å™¨ä¹‹é—´çš„æ¥å›æ—¶é—´ã€‚<br>2.è½®è¯¢ï¼ŒåŠ æƒè½®è¯¢ï¼Œéšæœºæ³•ï¼ŒåŠ æƒéšæœºæ³•ï¼Œæºåœ°å€å“ˆå¸Œæ³•ï¼Œæœ€å°è¿æ¥æ•°æ³•","like_count":3,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":498611,"discussion_content":"è¯´çš„æŒºå¥½ï¼Œè¿™æ®µæ—¶é—´å­¦ä¹ å¾—å¾ˆå‹¤å¥‹å•Šï¼Œä¹Ÿè¦é€‚å½“ä¼‘æ¯ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592372231,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1696847,"avatar":"https://static001.geekbang.org/account/avatar/00/19/e4/4f/df6d810d.jpg","nickname":"Maske","note":"","ucode":"A19BB41A47E852","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":283893,"discussion_content":"å—¯ï¼Œä¼šçš„ï¼Œæ„Ÿè°¢è€å¸ˆæ”¯æŒå“ˆï½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592391096,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":222332,"user_name":"Aaron","can_delete":false,"product_type":"c1","uid":1156222,"ip_address":"","ucode":"059966DCA3A8F0","user_header":"https://static001.geekbang.org/account/avatar/00/11/a4/7e/963c037c.jpg","comment_is_top":false,"comment_ctime":1590750652,"is_pvip":false,"replies":[{"id":"82021","content":"<br>1.proxyå¤´åœ¨ç¬¬ä¸€è¡Œï¼Œç»“æ„å¾ˆç®€å•ï¼Œè€ŒX-Forwarded-Foråœ¨httpå¤´é‡Œï¼Œè¦æœ‰å¤æ‚çš„è§£æï¼Œç‰¹åˆ«æ˜¯å½“httpå¤´å¾ˆå¤§çš„æ—¶å€™ï¼Œæˆæœ¬å°±é«˜äº†ã€‚<br><br>2.åŒæ ·çš„åŸå› ï¼ŒX-Forwarded-Foråœ¨httpå¤´é‡Œï¼Œè¦ä¿®æ”¹å°±ç­‰äºå˜åŠ¨äº†åŸå§‹çš„httpæŠ¥æ–‡ï¼Œè€Œproxy åè®®æ˜¯é™„åŠ åœ¨å¤–é¢çš„ï¼Œä¸ä¼šæ”¹åŠ¨åŸå§‹æŠ¥æ–‡ã€‚","user_name":"ä½œè€…å›å¤","comment_id":222332,"uid":"1181974","ip_address":"","utype":1,"ctime":1590755310,"user_name_real":"ç½—å‰‘é”‹"}],"discussion_count":1,"race_medal":0,"score":"10180685244","product_id":100029001,"comment_content":"ã€å› ä¸ºé€šè¿‡â€œX-Forwarded-Forâ€æ“ä½œä»£ç†ä¿¡æ¯å¿…é¡»è¦è§£æ HTTP æŠ¥æ–‡å¤´ï¼Œè¿™å¯¹äºä»£ç†æ¥è¯´æˆæœ¬æ¯”è¾ƒé«˜ï¼ŒåŸæœ¬åªéœ€è¦ç®€å•åœ°è½¬å‘æ¶ˆæ¯å°±å¥½ï¼Œè€Œç°åœ¨å´å¿…é¡»è¦è´¹åŠ›è§£ææ•°æ®å†ä¿®æ”¹æ•°æ®ï¼Œä¼šé™ä½ä»£ç†çš„è½¬å‘æ€§èƒ½ã€‚ã€<br>é—®ï¼šä»£ç†åè®®çš„ PROXY ä¸ä¹Ÿæ˜¯ä¸€ä¸ªå¤´å—ï¼ŸåŒæ ·éœ€è¦å¯¹ header çš„æ“ä½œã€‚å®ƒçš„ä¼˜åŠ¿æ˜¯ä¸æ˜¯åªåœ¨äºæ“ä½œçš„å†…å®¹æ¯” &quot;X-Forwarded-For&quot; å°‘ä¸€ç‚¹è€Œå·²ï¼Ÿ<br><br>ã€å¦ä¸€ä¸ªé—®é¢˜æ˜¯â€œX-Forwarded-Forâ€ç­‰å¤´å¿…é¡»è¦ä¿®æ”¹åŸå§‹æŠ¥æ–‡ï¼Œè€Œæœ‰äº›æƒ…å†µä¸‹æ˜¯ä¸å…è®¸ç”šè‡³ä¸å¯èƒ½çš„ï¼ˆæ¯”å¦‚ä½¿ç”¨ HTTPS é€šä¿¡è¢«åŠ å¯†ï¼‰ã€<br>é—®ï¼šä¸ºä»€ä¹ˆâ€œX-Forwarded-Forâ€ç­‰å¤´å¿…é¡»è¦ä¿®æ”¹åŸå§‹æŠ¥æ–‡å‘¢ï¼Ÿä¸æ˜¯å¾ˆç†è§£ã€‚çƒ¦è¯·è€å¸ˆè§£é‡Šä¸€ä¸‹ï¼Œè°¢è°¢ã€‚","like_count":3,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496754,"discussion_content":"\n1.proxyå¤´åœ¨ç¬¬ä¸€è¡Œï¼Œç»“æ„å¾ˆç®€å•ï¼Œè€ŒX-Forwarded-Foråœ¨httpå¤´é‡Œï¼Œè¦æœ‰å¤æ‚çš„è§£æï¼Œç‰¹åˆ«æ˜¯å½“httpå¤´å¾ˆå¤§çš„æ—¶å€™ï¼Œæˆæœ¬å°±é«˜äº†ã€‚\n\n2.åŒæ ·çš„åŸå› ï¼ŒX-Forwarded-Foråœ¨httpå¤´é‡Œï¼Œè¦ä¿®æ”¹å°±ç­‰äºå˜åŠ¨äº†åŸå§‹çš„httpæŠ¥æ–‡ï¼Œè€Œproxy åè®®æ˜¯é™„åŠ åœ¨å¤–é¢çš„ï¼Œä¸ä¼šæ”¹åŠ¨åŸå§‹æŠ¥æ–‡ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590755310,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":199775,"user_name":"é’±","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1585495734,"is_pvip":false,"replies":[{"id":"74797","content":"<br>1.å¯¹ï¼Œä»£ç†çš„é—®é¢˜ä¸€ä¸ªæ˜¯æˆæœ¬ï¼Œå¦ä¸€ä¸ªå°±æ˜¯ä¿¡ä»»ã€‚<br><br>2.æœ€å¸¸ç”¨çš„å°±æ˜¯è¿™äº›äº†ã€‚<br><br>3.vpnå’Œä»£ç†æ˜¯ä¸¤å›äº‹ï¼Œå®ƒæ˜¯ä¸€ä¸ªè™šæ‹Ÿçš„é“¾è·¯ï¼Œæœ‰ç‚¹åƒéš§é“ï¼Œä¸­é—´æ²¡æœ‰ä»£ç†è¿™æ ·çš„è§’è‰²ï¼Œæ˜¯ç›´é€šçš„ã€‚","user_name":"ä½œè€…å›å¤","comment_id":199775,"uid":"1181974","ip_address":"","utype":1,"ctime":1585530740,"user_name_real":"chrono"}],"discussion_count":1,"race_medal":0,"score":"10175430326","product_id":100029001,"comment_content":"1ï¼šä½ è§‰å¾—ä»£ç†æœ‰ä»€ä¹ˆç¼ºç‚¹ï¼Ÿå®é™…åº”ç”¨æ—¶å¦‚ä½•é¿å…ï¼Ÿ<br>ä»£ç†ä»£ç†å°±æ˜¯æ‰¾å¥¹äººä»£æ›¿ä½ å»æ‰“ç†ä¸€äº›äº‹æƒ…ï¼Œè®©ä»–äººä»£åŠäº‹æƒ…ä½ å¿…é¡»äº¤ä»£å¥½æ²Ÿé€šå¥½ï¼Œé‚£æ•ˆç‡è‡ªç„¶ä¼šä½ä¸€äº›ï¼Œå¦å¤–ï¼Œå¦‚æœä»£ç†å‡ºé—®é¢˜äº†ï¼Œé‚£ä½ çš„äº‹è‡ªç„¶ä¹ŸåŠä¸æˆäº†ï¼Œæ‰€ä»¥ï¼Œå¯èƒ½å­˜åœ¨å•ç‚¹é—®é¢˜ï¼Œä¸è¿‡ä¸€èˆ¬è¿˜å¥½ã€‚<br><br>2ï¼šä½ çŸ¥é“å¤šå°‘åå‘ä»£ç†ä¸­ä½¿ç”¨çš„è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Ÿå®ƒä»¬æœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹ï¼Ÿ<br>éšæœºâ€”â€”ç®€å•ï¼Œæ˜¯å¦å‡åŒ€çœ‹éšæœºæƒ…å†µ<br>è½®è¯¢ï¼ˆä¸€èˆ¬è½®è¯¢ã€åŠ æƒè½®è¯¢ï¼‰â€”â€”ç›¸å¯¹ç®€å•ï¼Œä¹Ÿä¼šè€ƒè™‘æœºå™¨èµ„æºå’Œæ€§èƒ½çš„å‡è¡¡æ€§<br>å“ˆå¸Œï¼ˆä¸€èˆ¬å“ˆå¸Œã€ä¸€è‡´æ€§å“ˆå¸Œã€å¸¦è™šæ‹ŸèŠ‚ç‚¹çš„ä¸€è‡´æ€§å“ˆå¸Œï¼‰â€”â€”ç›¸å¯¹å¤æ‚ï¼Œè¦æ±‚è¶Šå…¬å¹³å°±ä¼šè¶Šå¤æ‚ï¼Œè€Œä¸”é€‚å½“è€ƒè™‘äº†è¯·æ±‚<br>å“ˆå¸Œæ§½ï¼Œå’Œredisç±»ä¼¼<br><br>åªæœ‰èƒ½ä½¿è¯·æ±‚å°½å¯èƒ½çš„é«˜æ•ˆåˆ†å‘å°±è¡Œï¼Œè¯·æ•™ä¸€ä¸‹VPNå’Œä»£ç†ï¼Œæœ¬è´¨æ˜¯å¦å·®ä¸å¤šï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":489875,"discussion_content":"\n1.å¯¹ï¼Œä»£ç†çš„é—®é¢˜ä¸€ä¸ªæ˜¯æˆæœ¬ï¼Œå¦ä¸€ä¸ªå°±æ˜¯ä¿¡ä»»ã€‚\n\n2.æœ€å¸¸ç”¨çš„å°±æ˜¯è¿™äº›äº†ã€‚\n\n3.vpnå’Œä»£ç†æ˜¯ä¸¤å›äº‹ï¼Œå®ƒæ˜¯ä¸€ä¸ªè™šæ‹Ÿçš„é“¾è·¯ï¼Œæœ‰ç‚¹åƒéš§é“ï¼Œä¸­é—´æ²¡æœ‰ä»£ç†è¿™æ ·çš„è§’è‰²ï¼Œæ˜¯ç›´é€šçš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585530740,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":196626,"user_name":"AKAä¸‰çš®","can_delete":false,"product_type":"c1","uid":1102656,"ip_address":"","ucode":"D3BC5C60025E9D","user_header":"https://static001.geekbang.org/account/avatar/00/10/d3/40/0067d6db.jpg","comment_is_top":false,"comment_ctime":1585298187,"is_pvip":false,"replies":[{"id":"74823","content":"å¯¹ï¼Œè¿™ä¸ªå°±æ˜¯ä¸­é—´å±‚çš„åŠ›é‡ï¼Œä¹Ÿæ˜¯è½¯ä»¶å¼€å‘çš„åŸºæœ¬åŸåˆ™ã€‚","user_name":"ä½œè€…å›å¤","comment_id":196626,"uid":"1181974","ip_address":"","utype":1,"ctime":1585532424,"user_name_real":"chrono"}],"discussion_count":1,"race_medal":0,"score":"10175232779","product_id":100029001,"comment_content":"ä»£ç†æ˜¯ä¸ªå¥½ä¸œè¥¿ï¼Œæ¯”å¦‚å„ç§ç²¾ç»†åŒ–çš„æµé‡æ§åˆ¶ï¼Œç°åº¦å‘å¸ƒï¼ŒåŒæ—¶å¾®æœåŠ¡æ‹†åˆ†åï¼ŒæœåŠ¡æ²»ç†çš„ç›¸å…³åŠŸèƒ½ä¹Ÿå¯ä»¥ä¸‹æ²‰åˆ°ä»£ç†å»åšï¼Œæ¯”å¦‚ é™æµã€ç†”æ–­ã€‚é€‰ä¸ªé«˜æ€§èƒ½çš„ç½‘ç»œä»£ç†æ˜¯ç‹é“ï¼Œæ¯”å¦‚envoy","like_count":3,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":489345,"discussion_content":"å¯¹ï¼Œè¿™ä¸ªå°±æ˜¯ä¸­é—´å±‚çš„åŠ›é‡ï¼Œä¹Ÿæ˜¯è½¯ä»¶å¼€å‘çš„åŸºæœ¬åŸåˆ™ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585532424,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":115856,"user_name":"FF","can_delete":false,"product_type":"c1","uid":1001615,"ip_address":"","ucode":"26349F32B406D7","user_header":"https://static001.geekbang.org/account/avatar/00/0f/48/8f/7ecd4eed.jpg","comment_is_top":false,"comment_ctime":1563758784,"is_pvip":false,"replies":[{"id":"42346","content":"ä»£ç†åè®®çš„é‚£ä¸€è¡Œæ˜¯ä»£ç†æœåŠ¡å™¨åŠ çš„ï¼Œå®¢æˆ·ç«¯ä¸éœ€è¦å‚ä¸ã€‚<br><br>ä»£ç†åè®®çš„ä¼˜åŠ¿æ˜¯ç®€å•ï¼Œæ¯”httpå¤´å¥½è§£æå¥½å¤„ç†ï¼Œè¿™å¯¹äºä»£ç†æœåŠ¡å™¨æ¥è¯´å°±èƒ½å¤Ÿæé«˜è½¬å‘æ•ˆç‡ã€‚<br><br>ä½ åé¢çš„ç†è§£åŸºæœ¬æ­£ç¡®ã€‚","user_name":"ä½œè€…å›å¤","comment_id":115856,"uid":"1181974","ip_address":"","utype":1,"ctime":1563759079,"user_name_real":"chrono"}],"discussion_count":1,"race_medal":0,"score":"10153693376","product_id":100029001,"comment_content":"haproxy é‚£ä¸ªä»£ç†åè®®é‚£ä¸€è¡Œè¦å®¢æˆ·ç«¯è‡ªå·±åŠ ä¸Šå»çš„ ï¼Ÿå¦‚æœå®¢æˆ·ç«¯æŠŠè¿™ä¸ªåŠ åˆ° x-forward-for é‡Œé¢ï¼Œä¸ç”¨ä»£ç†åè®®ï¼Œé‚£ä¸æ˜¯ä¹Ÿå¯ä»¥è§£å†³ä»£ç†å»ä¿®æ”¹å¤´éƒ¨çš„é—®é¢˜ ï¼Ÿé‡ç‚¹éƒ½æ˜¯å®¢æˆ·ç«¯å…ˆåŠ ä¸Šå»è¿™äº›ä¿¡æ¯ ã€‚è¿™æ ·çœ‹ä»£ç†åè®®æ²¡å•¥ä¼˜åŠ¿å•Šï¼Œæˆ–è€…ä¸æ˜¯ä¸ºäº†è§£å†³å‡å°‘ä¸­é—´ä»£ç†å†å»ä¿®æ”¹å¤´çš„é—®é¢˜ ï¼Ÿç›¼å¤ï¼Œæ„Ÿè°¢ã€‚","like_count":2,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459315,"discussion_content":"ä»£ç†åè®®çš„é‚£ä¸€è¡Œæ˜¯ä»£ç†æœåŠ¡å™¨åŠ çš„ï¼Œå®¢æˆ·ç«¯ä¸éœ€è¦å‚ä¸ã€‚\n\nä»£ç†åè®®çš„ä¼˜åŠ¿æ˜¯ç®€å•ï¼Œæ¯”httpå¤´å¥½è§£æå¥½å¤„ç†ï¼Œè¿™å¯¹äºä»£ç†æœåŠ¡å™¨æ¥è¯´å°±èƒ½å¤Ÿæé«˜è½¬å‘æ•ˆç‡ã€‚\n\nä½ åé¢çš„ç†è§£åŸºæœ¬æ­£ç¡®ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563759079,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":114097,"user_name":"æ˜Ÿæ˜Ÿä¹‹ç«","can_delete":false,"product_type":"c1","uid":1046282,"ip_address":"","ucode":"3D57C443E3ED8C","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f7/0a/8534d0fa.jpg","comment_is_top":false,"comment_ctime":1563237968,"is_pvip":true,"replies":[{"id":"41637","content":"è¿™ä¸ªæ— æ³•ä¿è¯ï¼Œåè®®é‡Œçš„å­—æ®µéƒ½æ˜¯å¯ä»¥æ”¹çš„ï¼Œåªèƒ½é ä»£ç†çš„è‰¯å¿ƒã€‚<br><br>ä¸€èˆ¬æ¥è¯´ï¼Œç”¨ä»£ç†åè®®æ˜¯æ¯”è¾ƒå¯é çš„ã€‚","user_name":"ä½œè€…å›å¤","comment_id":114097,"uid":"1181974","ip_address":"","utype":1,"ctime":1563249892,"user_name_real":"chrono"}],"discussion_count":2,"race_medal":0,"score":"10153172560","product_id":100029001,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œè¯·é—®ç»¼åˆè€ƒè™‘ä»£ç†çš„å„ç§æƒ…å†µï¼ˆæ¯”å¦‚åŒ¿åä»£ç†ï¼Œç¯¡æ”¹è¯·æ±‚å¤´å­—æ®µï¼‰ä¹‹åï¼Œæ€ä¹ˆæ‰èƒ½ä¿è¯åœ¨æœåŠ¡ç«¯è·å–å®¢æˆ·ç«¯çš„çœŸå®ipå‘¢ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458514,"discussion_content":"è¿™ä¸ªæ— æ³•ä¿è¯ï¼Œåè®®é‡Œçš„å­—æ®µéƒ½æ˜¯å¯ä»¥æ”¹çš„ï¼Œåªèƒ½é ä»£ç†çš„è‰¯å¿ƒã€‚\n\nä¸€èˆ¬æ¥è¯´ï¼Œç”¨ä»£ç†åè®®æ˜¯æ¯”è¾ƒå¯é çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563249892,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1008348,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/dc/8876c73b.jpg","nickname":"moooofly","note":"","ucode":"4A20795C281B6F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3302,"discussion_content":"ä½†æ˜¯ä»£ç†åè®®åˆä¸èƒ½å¤šçº§é“¾å¼ä¼ æ’­ï¼Œæ‰€ä»¥ï¼Œä¹Ÿæ²¡æœ‰åŠæ³•è§£å†³è¿™ä¸ªé—®é¢˜å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564385117,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":113989,"user_name":"å‰ç«¯è¥¿ç“œå“¥","can_delete":false,"product_type":"c1","uid":1248576,"ip_address":"","ucode":"150130C34CD1C1","user_header":"https://static001.geekbang.org/account/avatar/00/13/0d/40/f70e5653.jpg","comment_is_top":false,"comment_ctime":1563198842,"is_pvip":false,"replies":[{"id":"41594","content":"å¾ˆå¤šä»£ç†éƒ½æ˜¯ç”¨1.0çš„ï¼Œè¿™ä¸ªå–å†³äºä»£ç†è‡ªå·±ï¼Œå› ä¸ºæœ‰ç¼“å­˜ï¼Œæ‰€ä»¥çŸ­è¿æ¥ä¹Ÿä¸ä¼šå¤ªå½±å“æ•ˆç‡ã€‚<br><br>é›†ç¾¤æœ‰å±€åŸŸç½‘çš„ï¼Œä¹Ÿæœ‰å¹¿åŸŸç½‘çš„ã€‚","user_name":"ä½œè€…å›å¤","comment_id":113989,"uid":"1181974","ip_address":"","utype":1,"ctime":1563239397,"user_name_real":"chrono"}],"discussion_count":1,"race_medal":0,"score":"10153133434","product_id":100029001,"comment_content":"ä»£ç†æœåŠ¡å™¨å¦‚ä½•è¿æ¥æºæœåŠ¡å™¨ï¼Ÿç”¨ http1.0 çŸ­è¿æ¥çš„æ•ˆç‡ä¸å¤ªå¥½å§ï¼Ÿé›†ç¾¤ä¸€èˆ¬éƒ½æ˜¯å±€åŸŸç½‘å—ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458468,"discussion_content":"å¾ˆå¤šä»£ç†éƒ½æ˜¯ç”¨1.0çš„ï¼Œè¿™ä¸ªå–å†³äºä»£ç†è‡ªå·±ï¼Œå› ä¸ºæœ‰ç¼“å­˜ï¼Œæ‰€ä»¥çŸ­è¿æ¥ä¹Ÿä¸ä¼šå¤ªå½±å“æ•ˆç‡ã€‚\n\né›†ç¾¤æœ‰å±€åŸŸç½‘çš„ï¼Œä¹Ÿæœ‰å¹¿åŸŸç½‘çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563239397,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":284715,"user_name":"Geek_6ea9af","can_delete":false,"product_type":"c1","uid":2448767,"ip_address":"","ucode":"9E2BE7F4129085","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoSMRiaMtAcqQ6PWHrue81oR1Ujr7lX3Mz1P00aX2SBibUX51yz3zFqovTRIDiaTWNUlq4U0KV2zib2Uw/132","comment_is_top":false,"comment_ctime":1616426079,"is_pvip":false,"replies":[{"id":"103288","content":"æ—¢ç„¶æ˜¯ä»£ç†ï¼Œæ˜¾ç„¶å°±å¸®å®¢æˆ·ç«¯åšæ‰€æœ‰äº‹æƒ…äº†ã€‚å®¢æˆ·ç«¯ç›´æ¥ä¸ä»£ç†é€šä¿¡ï¼Œç”¨ä¸åˆ°åŸŸåè§£æï¼Œç”±ä»£ç†å®ç°å¯¹å¤–æ”¶å‘ä¿¡æ¯ã€‚<br><br>æˆ–è€…åè¿‡æ¥æƒ³ä¸€ä¸‹ï¼Œå¦‚æœå®¢æˆ·ç«¯è§£æåŸŸåï¼Œé‚£ä¹ˆå°±æ‹¿åˆ°äº†çœŸå®ipåœ°å€ï¼Œå°±ä¼šç›´è¿å¤–ç½‘ï¼Œä¹Ÿå°±ä¸ä¼šèµ°ä»£ç†äº†ã€‚","user_name":"ä½œè€…å›å¤","comment_id":284715,"uid":"1181974","ip_address":"","utype":1,"ctime":1616458448,"user_name_real":"ç½—å‰‘é”‹"}],"discussion_count":1,"race_medal":0,"score":"5911393375","product_id":100029001,"comment_content":"è€å¸ˆï¼Œè¯·é—®åœ¨é…ç½®äº†æ­£å‘ä»£ç†ä¹‹åï¼Œå¯¹äºçœŸæ­£æœåŠ¡ç«¯çš„åŸŸåè§£ææ˜¯å‘ç”Ÿåœ¨å®¢æˆ·ç«¯è¿˜æ˜¯ä»£ç†ç«¯ï¼Ÿè¯¥ä»£ç†æœåŠ¡å™¨ä»…åšè¯·æ±‚è½¬å‘ã€‚","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":517443,"discussion_content":"æ—¢ç„¶æ˜¯ä»£ç†ï¼Œæ˜¾ç„¶å°±å¸®å®¢æˆ·ç«¯åšæ‰€æœ‰äº‹æƒ…äº†ã€‚å®¢æˆ·ç«¯ç›´æ¥ä¸ä»£ç†é€šä¿¡ï¼Œç”¨ä¸åˆ°åŸŸåè§£æï¼Œç”±ä»£ç†å®ç°å¯¹å¤–æ”¶å‘ä¿¡æ¯ã€‚\n\næˆ–è€…åè¿‡æ¥æƒ³ä¸€ä¸‹ï¼Œå¦‚æœå®¢æˆ·ç«¯è§£æåŸŸåï¼Œé‚£ä¹ˆå°±æ‹¿åˆ°äº†çœŸå®ipåœ°å€ï¼Œå°±ä¼šç›´è¿å¤–ç½‘ï¼Œä¹Ÿå°±ä¸ä¼šèµ°ä»£ç†äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616458448,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":235886,"user_name":"xuan","can_delete":false,"product_type":"c1","uid":2015544,"ip_address":"","ucode":"EB2C3DB97C34A7","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/QOiaNght8yAR376VdV9L6k47ugAyEk5qJAwJrsqf4rzTDoRZoLYGL0MBTvG0TngKkE8V9CibyDP8O3DQt951Hc2w/132","comment_is_top":false,"comment_ctime":1595234944,"is_pvip":false,"replies":[{"id":"87180","content":"<br>1.è¿™ä¸ªæ˜¯ä»£ç†æœåŠ¡å™¨æ·»åŠ çš„ï¼Œå½“ç„¶å› ä¸ºhttpåè®®å¾ˆè‡ªç”±ï¼Œå®¢æˆ·ç«¯å¡«ä¹Ÿå¯ä»¥ï¼Œä½†è¿™å°±æ²¡æœ‰æ„ä¹‰äº†ã€‚<br><br>2.è¿™ä¸ªå¤´æ˜¯ä¸ºä»£ç†æœåŠ¡å™¨å‡†å¤‡çš„ï¼Œå«ä¹‰æ˜¯åŸå§‹å®¢æˆ·ç«¯ï¼Œæ‰€ä»¥å¯¹äºå®¢æˆ·ç«¯æ¥è¯´å°±ä¸éœ€è¦è¿™ä¸ªå¤´ã€‚","user_name":"ä½œè€…å›å¤","comment_id":235886,"uid":"1181974","ip_address":"","utype":1,"ctime":1595292954,"user_name_real":"ç½—å‰‘é”‹"}],"discussion_count":1,"race_medal":0,"score":"5890202240","product_id":100029001,"comment_content":"é—®é¢˜ï¼š<br>1.&quot;X-Forwarded-Forâ€å¤´çš„ä¿¡æ¯åˆšå¼€å§‹æ˜¯å®¢æˆ·ç«¯ç»™çš„å—ï¼Ÿ<br>2.X-Forwarded-Foråœ¨httpå¤´é‡Œï¼Œè¦ä¿®æ”¹å°±ç­‰äºå˜åŠ¨äº†åŸå§‹çš„httpæŠ¥æ–‡ï¼Œè¿™ä¸ªæ—¶å€™çš„ä¿®æ”¹åŠ¨ä½œå‘ç”Ÿåœ¨å®¢æˆ·ç«¯è¿˜æ˜¯ä»£ç†æœåŠ¡å™¨ï¼Ÿ<br>ä¸ªäººè®¤ä¸ºæ˜¯å®¢æˆ·ç«¯ï¼Œä¸¤ä¸ªåŠ¨ä½œåº”è¯¥éƒ½æ˜¯åœ¨å®¢æˆ·ç«¯","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":501864,"discussion_content":"\n1.è¿™ä¸ªæ˜¯ä»£ç†æœåŠ¡å™¨æ·»åŠ çš„ï¼Œå½“ç„¶å› ä¸ºhttpåè®®å¾ˆè‡ªç”±ï¼Œå®¢æˆ·ç«¯å¡«ä¹Ÿå¯ä»¥ï¼Œä½†è¿™å°±æ²¡æœ‰æ„ä¹‰äº†ã€‚\n\n2.è¿™ä¸ªå¤´æ˜¯ä¸ºä»£ç†æœåŠ¡å™¨å‡†å¤‡çš„ï¼Œå«ä¹‰æ˜¯åŸå§‹å®¢æˆ·ç«¯ï¼Œæ‰€ä»¥å¯¹äºå®¢æˆ·ç«¯æ¥è¯´å°±ä¸éœ€è¦è¿™ä¸ªå¤´ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595292954,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":205377,"user_name":"å¼ ä¸‰","can_delete":false,"product_type":"c1","uid":1004092,"ip_address":"","ucode":"1155528FAE1546","user_header":"https://static001.geekbang.org/account/avatar/00/0f/52/3c/d6fcb93a.jpg","comment_is_top":false,"comment_ctime":1586602948,"is_pvip":false,"replies":[{"id":"76734","content":"haproxyæ˜¯ä¸“é—¨çš„httpä»£ç†è½¯ä»¶ï¼ŒåŠŸèƒ½å¾ˆå¼ºå¤§ï¼Œå’ŒMulesoftçš„å·®è·æ¯”è¾ƒå¤§å§ã€‚","user_name":"ä½œè€…å›å¤","comment_id":205377,"uid":"1181974","ip_address":"","utype":1,"ctime":1586646868,"user_name_real":"chrono"}],"discussion_count":1,"race_medal":0,"score":"5881570244","product_id":100029001,"comment_content":"HAProxyæ˜¯ä¸æ˜¯å°±æ˜¯MuleSoftâ€¦","like_count":2,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":491466,"discussion_content":"haproxyæ˜¯ä¸“é—¨çš„httpä»£ç†è½¯ä»¶ï¼ŒåŠŸèƒ½å¾ˆå¼ºå¤§ï¼Œå’ŒMulesoftçš„å·®è·æ¯”è¾ƒå¤§å§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586646868,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":176206,"user_name":"Geek_f8a084","can_delete":false,"product_type":"c1","uid":1717068,"ip_address":"","ucode":"8B75B6A013AAFF","user_header":"","comment_is_top":false,"comment_ctime":1580989040,"is_pvip":false,"replies":[{"id":"68467","content":"æ˜¯çš„ã€‚","user_name":"ä½œè€…å›å¤","comment_id":176206,"uid":"1181974","ip_address":"","utype":1,"ctime":1581033589,"user_name_real":"chrono"}],"discussion_count":1,"race_medal":0,"score":"5875956336","product_id":100029001,"comment_content":"è½¬å‘æ˜¯æŒ‡çš„ä»£ç†æœåŠ¡å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":483046,"discussion_content":"æ˜¯çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581033589,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":173882,"user_name":"keep it simple","can_delete":false,"product_type":"c1","uid":1574739,"ip_address":"","ucode":"72B8DC00247C9E","user_header":"https://static001.geekbang.org/account/avatar/00/18/07/53/05aa9573.jpg","comment_is_top":false,"comment_ctime":1579753293,"is_pvip":false,"replies":[{"id":"67671","content":"<br>1.æ¯”å¦‚è¯´ï¼Œä»£ç†å¯ä»¥è¿‡æ»¤æŸä¸ªå…³é”®å­—ï¼Œå¦‚æœå‡ºç°æœ‰â€œå¯†ç â€â€œé“¶è¡Œå¡â€å°±æŠŠæ•°æ®ç”¨xxxä»£æ›¿ã€‚<br><br>2.httpæŠ¥æ–‡å¯ä»¥éšæ„ä¿®æ”¹ï¼Œæ²¡æœ‰é˜²çªœæ”¹çš„æ‰‹æ®µï¼Œä¸­é—´çš„ä»£ç†å¯ä»¥ä»»æ„ä¿®æ”¹ï¼Œåé¢çš„ä¹Ÿä¸çŸ¥é“ï¼Œå½“ç„¶é€šå¸¸æ²¡æœ‰å¿…è¦è¿™ä¹ˆåšï¼Œä½†ä¸æ˜¯è¯´ä¸å¯ä»¥æ”¹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"chrono","uid":"1181974","ctime":1579862294,"ip_address":"","comment_id":173882,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5874720589","product_id":100029001,"comment_content":"å­¦å®Œäº†è¿™ä¸€è¯¾ï¼Œæ”¶è·å¾ˆå¤§ï¼ç»™è€å¸ˆç‚¹èµ~<br>ç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯ï¼šæ•°æ®è¿‡æ»¤â€”â€”æ‹¦æˆªä¸Šä¸‹è¡Œçš„æ•°æ®ï¼Œä»»æ„æŒ‡å®šç­–ç•¥ä¿®æ”¹è¯·æ±‚æˆ–è€…å“åº”ã€‚è¿™ä¸ªä¸å¤ªç†è§£ã€‚<br>ç¬¬äºŒä¸ªé—®é¢˜ï¼šX-Real-IPçš„ä¾‹å­ï¼Œå¦‚æœé“¾è·¯ä¸­æœ‰å¤šä¸ªä»£ç†æœåŠ¡å™¨ï¼Œé‚£åªæœ‰ç¬¬ä¸€ä¸ªä»£ç†ä¼šåŠ ä¸ŠX-Real-IPï¼Œåé¢çš„ä»£ç†éƒ½ä¸ä¼šå†åŠ¨è¿™ä¸ªå­—æ®µäº†å§ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":482227,"discussion_content":"\n1.æ¯”å¦‚è¯´ï¼Œä»£ç†å¯ä»¥è¿‡æ»¤æŸä¸ªå…³é”®å­—ï¼Œå¦‚æœå‡ºç°æœ‰â€œå¯†ç â€â€œé“¶è¡Œå¡â€å°±æŠŠæ•°æ®ç”¨xxxä»£æ›¿ã€‚\n\n2.httpæŠ¥æ–‡å¯ä»¥éšæ„ä¿®æ”¹ï¼Œæ²¡æœ‰é˜²çªœæ”¹çš„æ‰‹æ®µï¼Œä¸­é—´çš„ä»£ç†å¯ä»¥ä»»æ„ä¿®æ”¹ï¼Œåé¢çš„ä¹Ÿä¸çŸ¥é“ï¼Œå½“ç„¶é€šå¸¸æ²¡æœ‰å¿…è¦è¿™ä¹ˆåšï¼Œä½†ä¸æ˜¯è¯´ä¸å¯ä»¥æ”¹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579862294,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117084,"user_name":"ä¸šä½™è‰","can_delete":false,"product_type":"c1","uid":1126538,"ip_address":"","ucode":"99BDC1E629049D","user_header":"https://static001.geekbang.org/account/avatar/00/11/30/8a/b5ca7286.jpg","comment_is_top":false,"comment_ctime":1563964308,"is_pvip":false,"replies":[{"id":"42905","content":"go onã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"chrono","uid":"1181974","ctime":1564016563,"ip_address":"","comment_id":117084,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5858931604","product_id":100029001,"comment_content":"è½ä¸‹äº†ä¸å°‘è¯¾ï¼Œä»Šå¤©è¡¥ä¸Š","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459812,"discussion_content":"go onã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564016563,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":114528,"user_name":"LeonğŸ“·","can_delete":false,"product_type":"c1","uid":1219496,"ip_address":"","ucode":"B9BBD1EFAAE5A2","user_header":"https://static001.geekbang.org/account/avatar/00/12/9b/a8/6a391c66.jpg","comment_is_top":false,"comment_ctime":1563329788,"is_pvip":false,"replies":[{"id":"41799","content":"niceã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"chrono","uid":"1181974","ctime":1563332563,"ip_address":"","comment_id":114528,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5858297084","product_id":100029001,"comment_content":"å‰é¢çš„è¯¾ç¨‹éƒ½å¥½è½»æ¾ï¼Œåˆ°è¿™é‡Œçªç„¶æ„Ÿè§‰æœ‰ç‚¹å°å‹åŠ›äº†ï¼Œä»£ç†proxyçš„è¯¾ç¨‹é™¶è¾‰è€å¸ˆçš„è¯¾nginxæœ‰è®²è¿‡ï¼Œè¯´äº†ç¼“è§£ä¸Šæ¸¸å’Œä¸‹æ¸¸çš„ç½‘é€Ÿå·®å¼‚ç­‰ç­‰ä¼˜åŒ–ï¼Œå½“æ—¶ä¸€è„¸æ‡µé€¼ï¼Œä¸çŸ¥é“è¿™ç©æ„å¹²å•¥çš„ï¼Œå­¦åˆ°è¿™é‡Œæ‰çœŸæ­£ç†è§£åˆ°ï¼Œå¼€æºçš„æ–¹æ¡ˆéƒ½æ˜¯ä¸ºäº†è§£å†³å®é™…åº”ç”¨åœºæ™¯çš„é—®é¢˜çš„ï¼Œç»“åˆnginxçš„è§£å†³æ–¹æ¡ˆï¼Œåº”è¯¥éƒ½èƒ½è§£ç­”ä»£ç†çš„ç¼ºé™·é—®é¢˜","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458706,"discussion_content":"niceã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563332563,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1440263,"avatar":"https://static001.geekbang.org/account/avatar/00/15/fa/07/1d50f530.jpg","nickname":"Gasnerd","note":"","ucode":"3630276571AF66","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":213521,"discussion_content":"æˆ‘ä¹Ÿæ˜¯ä¸¤ä¸ªè¯¾ä¸€èµ·å¬çš„ï¼Œå¯¹httpçš„ç¡®è¿™ä¸ªè¯¾æ›´æ·±å…¥ã€‚veli veli nice","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585101415,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":114048,"user_name":"Geek_d4dee7","can_delete":false,"product_type":"c1","uid":1241569,"ip_address":"","ucode":"636908D6F43C6D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLw9fVyja3eQLGQenLf5EqVaxGQoibo7rq8A7IRjlXED9FhicKukcn0ibCCtiaBqpEib4ZEIWfFOkiaGMSQ/132","comment_is_top":false,"comment_ctime":1563233157,"is_pvip":false,"replies":[{"id":"41593","content":"slbåº”è¯¥æ˜¯server load balanceå§ï¼Œè´Ÿè½½å‡è¡¡è®¾å¤‡ï¼Œä¹Ÿå¯ä»¥ç®—æ˜¯ä¸€ç§ä»£ç†ï¼Œä½†æœ‰çš„ä¸ä¸€å®šä½¿ç”¨httpåè®®ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"chrono","uid":"1181974","ctime":1563239296,"ip_address":"","comment_id":114048,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5858200453","product_id":100029001,"comment_content":"å¸¸å¬è¯´çš„SLBæ˜¯ä¸­é—´çš„è¿™ä¸ªä»£ç†ä¹ˆ è€å¸ˆ","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458495,"discussion_content":"slbåº”è¯¥æ˜¯server load balanceå§ï¼Œè´Ÿè½½å‡è¡¡è®¾å¤‡ï¼Œä¹Ÿå¯ä»¥ç®—æ˜¯ä¸€ç§ä»£ç†ï¼Œä½†æœ‰çš„ä¸ä¸€å®šä½¿ç”¨httpåè®®ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563239296,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":113883,"user_name":"ä¸€æ­¥","can_delete":false,"product_type":"c1","uid":1005391,"ip_address":"","ucode":"73CEA468CE70C3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","comment_is_top":false,"comment_ctime":1563179005,"is_pvip":true,"replies":[{"id":"41497","content":"æ˜¯çš„ï¼ŒX-Forwarded-Hostçš„æ ¼å¼ä¸X-Forwarded-Forä¸åŒï¼Œå®ƒåªæœ‰ä¸€ä¸ªå€¼ï¼Œä¸æ˜¯é€—å·åˆ—è¡¨ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"chrono","uid":"1181974","ctime":1563184255,"ip_address":"","comment_id":113883,"utype":1}],"discussion_count":1,"race_medal":1,"score":"5858146301","product_id":100029001,"comment_content":"è¿˜å‡ºç°äº†ä¸¤ä¸ªå­—æ®µï¼šâ€œX-Forwarded-Hostâ€å’Œâ€œX-Forwarded-Protoâ€ï¼Œå®ƒä»¬çš„ä½œç”¨ä¸â€œX-Real-IPâ€ç±»ä¼¼ï¼Œåªè®°å½•å®¢æˆ·ç«¯çš„ä¿¡æ¯ï¼Œåˆ†åˆ«æ˜¯å®¢æˆ·ç«¯è¯·æ±‚çš„åŸå§‹åŸŸåå’ŒåŸå§‹åè®®åã€‚<br>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”<br>è€å¸ˆï¼Œå¯¹äºè¿™å¥è¯ï¼Œæœ‰ç‚¹ç–‘é—®ï¼ŒX-Forwarded-Hoståªæ˜¯çœŸå®å®¢æˆ·ç«¯çš„hostå—ï¼Ÿç±»æ¯”X-Real-IPï¼ŒçœŸå®å®¢æˆ·ç«¯çš„Hostä¸åº”è¯¥æ˜¯X-Real-Hostå—ï¼Ÿæœ‰å…³Forwardedçš„å¤´ä¸åº”è¯¥éƒ½æ˜¯ä»£ç†é“¾è·¯æ‰€æœ‰çš„ä»¥é€—å·åˆ†å¼€çš„ä¿¡æ¯å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458421,"discussion_content":"æ˜¯çš„ï¼ŒX-Forwarded-Hostçš„æ ¼å¼ä¸X-Forwarded-Forä¸åŒï¼Œå®ƒåªæœ‰ä¸€ä¸ªå€¼ï¼Œä¸æ˜¯é€—å·åˆ—è¡¨ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563184255,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":347989,"user_name":"Geek_21a73c","can_delete":false,"product_type":"c1","uid":3014444,"ip_address":"","ucode":"104A4AD89DA6BC","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q3auHgzwzM74658w9PQeTM4TcM14BzfpJnVLrsciaS26ibRwRbCE09ydI6UlZhFrJh7iaVLp2xxhBppVDKLyRRg9Q/132","comment_is_top":false,"comment_ctime":1654653485,"is_pvip":false,"replies":[{"id":"126840","content":"å»ºè®®æ”¹ç”¨è™šæ‹Ÿæœºæˆ–è€…dockerï¼Œåœ¨å®æœºç¯å¢ƒé‡Œå¹²æ‰°å› ç´ å¤ªå¤šäº†ï¼Œä¸å½“é¢å¾ˆéš¾è§£å†³ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1181974","ctime":1654695250,"ip_address":"","comment_id":347989,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1654653485","product_id":100029001,"comment_content":"æˆ‘ä»¬çš„å®éªŒç¯å¢ƒå®ç°äº†ä¸€ä¸ªåå‘ä»£ç†ï¼Œè®¿é—®â€œhttp:&#47;&#47;www.chrono.com&#47;21-1â€ï¼Œå®ƒä¼šè½¬è€Œè®¿é—®â€œhttp:&#47;&#47;origin.ioâ€ã€‚<br><br>è€å¸ˆï¼Œhttp:&#47;&#47;www.chrono.com&#47;21-1â€æ‰“å¼€åæ˜¾ç¤º404ï¼Œè¿™è¦æ€ä¹ˆåŠå‘¢","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":575270,"discussion_content":"å»ºè®®æ”¹ç”¨è™šæ‹Ÿæœºæˆ–è€…dockerï¼Œåœ¨å®æœºç¯å¢ƒé‡Œå¹²æ‰°å› ç´ å¤ªå¤šäº†ï¼Œä¸å½“é¢å¾ˆéš¾è§£å†³ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1654695250,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":333253,"user_name":"çº¢å®ä¹¦ç¬¬å››ç‰ˆ88-931","can_delete":false,"product_type":"c1","uid":2817888,"ip_address":"","ucode":"6DC97E8DB393B9","user_header":"https://static001.geekbang.org/account/avatar/00/2a/ff/60/df2033b8.jpg","comment_is_top":false,"comment_ctime":1644232447,"is_pvip":true,"replies":[{"id":"121846","content":"awesome","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1181974","ctime":1644368720,"ip_address":"","comment_id":333253,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1644232447","product_id":100029001,"comment_content":"1.æ­£å‘ä»£ç†éšè—äº†å®¢æˆ·ç«¯ï¼ŒæºæœåŠ¡å™¨ä¸çŸ¥é“å‘è¯·æ±‚çš„æ˜¯è°ï¼Œä»£è¡¨æ˜¯æŸç§‘å­¦ä¸Šåˆå·¥å…·<br>2.åå‘ä»£ç éšè—äº†æºæœåŠ¡ç«¯ï¼Œå®¢æˆ·ç«¯ä¸çŸ¥é“è¯·æ±‚æœ€ç»ˆä¼šç”±è°æ¥å¤„ç†ï¼Œä»£è¡¨nginx","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":550037,"discussion_content":"awesome","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644368720,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":329624,"user_name":"ç½—æ–‡é™å¥½æ¼‚äº®å•Š","can_delete":false,"product_type":"c1","uid":2439636,"ip_address":"","ucode":"4D1FF065D9CF16","user_header":"https://static001.geekbang.org/account/avatar/00/25/39/d4/08989e53.jpg","comment_is_top":false,"comment_ctime":1641451862,"is_pvip":false,"replies":[{"id":"120270","content":"è¿™ä¸ªæœ‰å¾ˆå¤šæˆç†Ÿçš„æ–¹æ¡ˆï¼Œæ¯”å¦‚keepalivedã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1181974","ctime":1641813787,"ip_address":"","comment_id":329624,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1641451862","product_id":100029001,"comment_content":"æ‰€æœ‰è¯·æ±‚éƒ½è¦é€šè¿‡ä»£ç†,é‚£å¦‚æœä»£ç†æŒ‚äº†æ€ä¹ˆåŠ,æ€ä¹ˆä¿è¯ä»£ç†çš„é«˜å¯ç”¨","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":545046,"discussion_content":"è¿™ä¸ªæœ‰å¾ˆå¤šæˆç†Ÿçš„æ–¹æ¡ˆï¼Œæ¯”å¦‚keepalivedã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641813787,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":319386,"user_name":"cake","can_delete":false,"product_type":"c1","uid":1966533,"ip_address":"","ucode":"55A7FC6CC1204C","user_header":"https://static001.geekbang.org/account/avatar/00/1e/01/c5/b48d25da.jpg","comment_is_top":false,"comment_ctime":1635768148,"is_pvip":false,"replies":[{"id":"115800","content":"æˆ‘æ‘˜ä¸€ä¸‹ç»´åŸºç™¾ç§‘é‡Œçš„æ–‡å­—ï¼Œå¯èƒ½ä¼šè¯´çš„æ¯”è¾ƒæ¸…æ¥šï¼š<br><br>XFFä¸€èˆ¬æ ¼å¼å¦‚ä¸‹:<br><br>X-Forwarded-For: client1, proxy1, proxy2<br><br>å…¶ä¸­çš„å€¼é€šè¿‡ä¸€ä¸ª é€—å·+ç©ºæ ¼ æŠŠå¤šä¸ªIPåœ°å€åŒºåˆ†å¼€, æœ€å·¦è¾¹ï¼ˆclient1ï¼‰æ˜¯æœ€åŸå§‹å®¢æˆ·ç«¯çš„IPåœ°å€, ä»£ç†æœåŠ¡å™¨æ¯æˆåŠŸæ”¶åˆ°ä¸€ä¸ªè¯·æ±‚ï¼Œå°±æŠŠè¯·æ±‚æ¥æºIPåœ°å€æ·»åŠ åˆ°å³è¾¹ã€‚ åœ¨ä¸Šé¢è¿™ä¸ªä¾‹å­ä¸­ï¼Œè¿™ä¸ªè¯·æ±‚æˆåŠŸé€šè¿‡äº†ä¸‰å°ä»£ç†æœåŠ¡å™¨ï¼šproxy1ã€proxy2å’Œproxy3ã€‚è¯·æ±‚ç”±client1å‘å‡ºï¼Œåˆ°è¾¾äº†proxy3ï¼ˆproxy3å¯èƒ½æ˜¯è¯·æ±‚çš„ç»ˆç‚¹ï¼‰ã€‚è¯·æ±‚åˆšä»client1ä¸­å‘å‡ºæ—¶ï¼ŒXFFæ˜¯ç©ºçš„ï¼Œè¯·æ±‚è¢«å‘å¾€proxy1ï¼›é€šè¿‡proxy1çš„æ—¶å€™ï¼Œclient1è¢«æ·»åŠ åˆ°XFFä¸­ï¼Œä¹‹åè¯·æ±‚è¢«å‘å¾€proxy2;é€šè¿‡proxy2çš„æ—¶å€™ï¼Œproxy1è¢«æ·»åŠ åˆ°XFFä¸­ï¼Œä¹‹åè¯·æ±‚è¢«å‘å¾€proxy3ï¼›é€šè¿‡proxy3æ—¶ï¼Œproxy2è¢«æ·»åŠ åˆ°XFFä¸­ï¼Œä¹‹åè¯·æ±‚çš„çš„å»å‘ä¸æ˜ï¼Œå¦‚æœproxy3ä¸æ˜¯è¯·æ±‚ç»ˆç‚¹ï¼Œè¯·æ±‚ä¼šè¢«ç»§ç»­è½¬å‘ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1635814690,"ip_address":"","comment_id":319386,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1635768148","product_id":100029001,"comment_content":"é’ˆå¯¹ X-Real-IP X-Forwarded-For   æ–‡ä¸­ &quot;å¦‚æœå®¢æˆ·ç«¯å’ŒæºæœåŠ¡å™¨ä¹‹é—´åªæœ‰ä¸€ä¸ªä»£ç†ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªå­—æ®µçš„å€¼å°±æ˜¯ç›¸åŒçš„&quot; ã€‚   å®é™…ä¸Š X-Forwarded-For åº”è¯¥è®°å½•å®¢æˆ·ç«¯+ä¸€ä¸ªä»£ç†    X-Real-IPè®°å½•å®¢æˆ·ç«¯ï¼Œæ€ä¹ˆæ˜¯ä¸€æ ·çš„å‘¢ï¼Ÿåº”è¯¥ä¸ä¸€æ ·å­","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529617,"discussion_content":"æˆ‘æ‘˜ä¸€ä¸‹ç»´åŸºç™¾ç§‘é‡Œçš„æ–‡å­—ï¼Œå¯èƒ½ä¼šè¯´çš„æ¯”è¾ƒæ¸…æ¥šï¼š\n\nXFFä¸€èˆ¬æ ¼å¼å¦‚ä¸‹:\n\nX-Forwarded-For: client1, proxy1, proxy2\n\nå…¶ä¸­çš„å€¼é€šè¿‡ä¸€ä¸ª é€—å·+ç©ºæ ¼ æŠŠå¤šä¸ªIPåœ°å€åŒºåˆ†å¼€, æœ€å·¦è¾¹ï¼ˆclient1ï¼‰æ˜¯æœ€åŸå§‹å®¢æˆ·ç«¯çš„IPåœ°å€, ä»£ç†æœåŠ¡å™¨æ¯æˆåŠŸæ”¶åˆ°ä¸€ä¸ªè¯·æ±‚ï¼Œå°±æŠŠè¯·æ±‚æ¥æºIPåœ°å€æ·»åŠ åˆ°å³è¾¹ã€‚ åœ¨ä¸Šé¢è¿™ä¸ªä¾‹å­ä¸­ï¼Œè¿™ä¸ªè¯·æ±‚æˆåŠŸé€šè¿‡äº†ä¸‰å°ä»£ç†æœåŠ¡å™¨ï¼šproxy1ã€proxy2å’Œproxy3ã€‚è¯·æ±‚ç”±client1å‘å‡ºï¼Œåˆ°è¾¾äº†proxy3ï¼ˆproxy3å¯èƒ½æ˜¯è¯·æ±‚çš„ç»ˆç‚¹ï¼‰ã€‚è¯·æ±‚åˆšä»client1ä¸­å‘å‡ºæ—¶ï¼ŒXFFæ˜¯ç©ºçš„ï¼Œè¯·æ±‚è¢«å‘å¾€proxy1ï¼›é€šè¿‡proxy1çš„æ—¶å€™ï¼Œclient1è¢«æ·»åŠ åˆ°XFFä¸­ï¼Œä¹‹åè¯·æ±‚è¢«å‘å¾€proxy2;é€šè¿‡proxy2çš„æ—¶å€™ï¼Œproxy1è¢«æ·»åŠ åˆ°XFFä¸­ï¼Œä¹‹åè¯·æ±‚è¢«å‘å¾€proxy3ï¼›é€šè¿‡proxy3æ—¶ï¼Œproxy2è¢«æ·»åŠ åˆ°XFFä¸­ï¼Œä¹‹åè¯·æ±‚çš„çš„å»å‘ä¸æ˜ï¼Œå¦‚æœproxy3ä¸æ˜¯è¯·æ±‚ç»ˆç‚¹ï¼Œè¯·æ±‚ä¼šè¢«ç»§ç»­è½¬å‘ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635814690,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":300832,"user_name":"kingğŸ³","can_delete":false,"product_type":"c1","uid":2557346,"ip_address":"","ucode":"88DA7981062AB5","user_header":"https://static001.geekbang.org/account/avatar/00/27/05/a2/24d5e88e.jpg","comment_is_top":false,"comment_ctime":1625398652,"is_pvip":false,"replies":[{"id":"108983","content":"å…¶å®ä¼˜åŒ–æ–¹å¼å°±æ˜¯å¸¸è§çš„é‚£äº›ï¼Œç¼“å­˜æ˜¯æœ€æœ‰æ•ˆçš„ï¼Œå…¶ä»–çš„æ¯”å¦‚åŠ CPUã€è°ƒç³»ç»Ÿå‚æ•°ã€å¼€å¯reuseportã€å¤šè¿›ç¨‹å¤šçº¿ç¨‹ç­‰ç­‰ï¼Œè¿™äº›éœ€è¦æ ¹æ®å®é™…æƒ…å†µå»è¯•éªŒã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1625446829,"ip_address":"","comment_id":300832,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1625398652","product_id":100029001,"comment_content":"è¯·æ•™ä¸ªé—®é¢˜ï¼Œå¦‚æœç”¨ä¸ƒå±‚ä»£ç†ã€‚æ‰€æœ‰è¯·æ±‚éƒ½æ‰“åœ¨ä»£ç†æœåŠ¡å™¨ã€‚é™¤äº†åŠ ç¼“å­˜è¿˜æœ‰ä»€ä¹ˆåŠæ³•å¯ä»¥å¢åŠ ä»£ç†æœåŠ¡å™¨çš„å¤„ç†é€Ÿåº¦ã€‚","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":522828,"discussion_content":"å…¶å®ä¼˜åŒ–æ–¹å¼å°±æ˜¯å¸¸è§çš„é‚£äº›ï¼Œç¼“å­˜æ˜¯æœ€æœ‰æ•ˆçš„ï¼Œå…¶ä»–çš„æ¯”å¦‚åŠ CPUã€è°ƒç³»ç»Ÿå‚æ•°ã€å¼€å¯reuseportã€å¤šè¿›ç¨‹å¤šçº¿ç¨‹ç­‰ç­‰ï¼Œè¿™äº›éœ€è¦æ ¹æ®å®é™…æƒ…å†µå»è¯•éªŒã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625446829,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":296192,"user_name":"n0thing","can_delete":false,"product_type":"c1","uid":1197977,"ip_address":"","ucode":"9B44E34712C535","user_header":"https://static001.geekbang.org/account/avatar/00/12/47/99/aefe1b12.jpg","comment_is_top":false,"comment_ctime":1622798395,"is_pvip":false,"replies":[{"id":"107502","content":"greatã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1622853405,"ip_address":"","comment_id":296192,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1622798395","product_id":100029001,"comment_content":"çœ‹åˆ°proxy protocol å•ç‹¬çš„åè®®ï¼Œè§£å†³äº†æœ€è¿‘å›°æ‰°çš„ç–‘é—®ï¼<br>ä¸€ç›´å…³æ³¨çš„æ˜¯tcpå’Œhttpå±‚é¢çš„åŒ…ä¿¡æ¯ï¼Œä¹Ÿæ²¡æœ‰ä»”ç»†çœ‹Nginxå®˜æ–¹æ–‡æ¡£ï¼Œåœ¨å‰ç«¯LBè®¾å¤‡ä¸æ·»åŠ è¯ä¹¦çš„æƒ…å†µä¸‹æƒ³ç€httpsè¯·æ±‚æ²¡æ³•åŠ XFFä¿¡æ¯ï¼Œåç«¯nginxæ€ä¹ˆæ‰èƒ½è·å–æºç«¯å®¢æˆ·ç«¯IPä¿¡æ¯ï¼ŒåŸæ¥è¿˜æœ‰ç±»ä¼¼connectæ–¹æ³•å•ç‹¬çš„proxyåè®®ï¼Œæ„Ÿè°¢ã€‚<br>å†æ¬¡æ‹“å®½è®¡ç®—æœºé¢†åŸŸçš„å®šç†ï¼šæä¸å®šå°±åŠ ä¸€å±‚ï¼","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":521357,"discussion_content":"greatã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622853405,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":290377,"user_name":"huanshui@smile","can_delete":false,"product_type":"c1","uid":2141878,"ip_address":"","ucode":"0A334A3E20CA46","user_header":"https://static001.geekbang.org/account/avatar/00/20/ae/b6/fc1c61f8.jpg","comment_is_top":false,"comment_ctime":1619518712,"is_pvip":false,"replies":[{"id":"105263","content":"proxyåè®®çš„å¤´ä¸httpåè®®çš„viaå¤´ä¸å†²çªï¼Œå„æœ‰å„çš„ä½œç”¨ã€‚<br><br>proxyå¤´å¾ˆç®€å•ï¼Œåªæœ‰åŸå§‹å®¢æˆ·ç«¯çš„ipåœ°å€ï¼Œè€Œviaé‡Œæ˜¯é“¾å¼çš„ã€‚<br><br>æ¯ä¸ªä¸­é—´æœåŠ¡å™¨å¯ä»¥å„å–æ‰€éœ€ï¼Œå¦‚æœåªæƒ³çŸ¥é“å®¢æˆ·ç«¯ï¼Œä¸å…³å¿ƒä¸­é—´çš„ä»£ç†ï¼Œå°±ç”¨proxyå¤´ï¼Œä¸ç”¨å†è§£æhttpå¤´ã€‚<br><br>å…³é”®è¿˜æ˜¯çœ‹æƒ³æ€ä¹ˆå»ç”¨ï¼Œè¿™äº›åè®®åªæ˜¯ç»™å‡ºäº†åŸºæœ¬çš„è§£å†³æ–¹æ¡ˆã€‚<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1619574292,"ip_address":"","comment_id":290377,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1619518712","product_id":100029001,"comment_content":"æœ‰ä¸ªåœ°æ–¹ä¸æ˜¯å¾ˆç†è§£ï¼ŒæŒ‰ç…§ä¸Šä¸‹æ–‡æ¥çœ‹ï¼Œâ€ä»£ç†åè®®â€œå­˜åœ¨çš„æ„ä¹‰ï¼Œå°±åœ¨äºä»£ç†æœåŠ¡å™¨å¯ä»¥ä¸å†è´¹åŠ›çš„å»è§£æhttpæŠ¥æ–‡å¤´äº†ï¼Œä½†æ˜¯æ ¹æ®viaå­—æ®µæ¥çœ‹ï¼Œæ˜¯æ¯ç»è¿‡ä¸€ä¸ªä»£ç†éƒ½éœ€è¦åœ¨å°¾éƒ¨è¿½åŠ å¯¹åº”çš„ä»£ç†ä¿¡æ¯ï¼Œå¦‚æœæ²¡æœ‰è¿›è¡Œè§£æï¼Œé‚£ä¹ˆå¦‚ä½•æ‹¿åˆ°é‡Œé¢çš„å­—æ®µè¿›è¡Œä¿®æ”¹ï¼Ÿå¦‚æœä¿®æ”¹çš„è¯ã€‚åˆå²‚ä¸æ˜¯å’Œâ€œä»£ç†åè®®â€ç›¸æ‚–ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":519189,"discussion_content":"proxyåè®®çš„å¤´ä¸httpåè®®çš„viaå¤´ä¸å†²çªï¼Œå„æœ‰å„çš„ä½œç”¨ã€‚\n\nproxyå¤´å¾ˆç®€å•ï¼Œåªæœ‰åŸå§‹å®¢æˆ·ç«¯çš„ipåœ°å€ï¼Œè€Œviaé‡Œæ˜¯é“¾å¼çš„ã€‚\n\næ¯ä¸ªä¸­é—´æœåŠ¡å™¨å¯ä»¥å„å–æ‰€éœ€ï¼Œå¦‚æœåªæƒ³çŸ¥é“å®¢æˆ·ç«¯ï¼Œä¸å…³å¿ƒä¸­é—´çš„ä»£ç†ï¼Œå°±ç”¨proxyå¤´ï¼Œä¸ç”¨å†è§£æhttpå¤´ã€‚\n\nå…³é”®è¿˜æ˜¯çœ‹æƒ³æ€ä¹ˆå»ç”¨ï¼Œè¿™äº›åè®®åªæ˜¯ç»™å‡ºäº†åŸºæœ¬çš„è§£å†³æ–¹æ¡ˆã€‚\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619574292,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":289302,"user_name":"zs","can_delete":false,"product_type":"c1","uid":1116790,"ip_address":"","ucode":"9B8C10E030E5DD","user_header":"https://static001.geekbang.org/account/avatar/00/11/0a/76/b621772b.jpg","comment_is_top":false,"comment_ctime":1618974145,"is_pvip":false,"replies":[{"id":"105024","content":"<br>1. proxy åè®®æ˜¯haproxyåˆ¶å®šçš„ï¼Œä½†å·²ç»æˆä¸ºäº†å¤§å®¶å…±ç”¨çš„æ ‡å‡†ã€‚<br><br>2.proxyåè®®æ¯”è¾ƒç®€å•ï¼Œæƒ³è¦çŸ¥é“ä¸­é—´ç»è¿‡äº†å¤šå°‘èŠ‚ç‚¹å°±å¾—è‡ªå·±åœ¨httpå¤´é‡Œè®°å½•äº†ï¼Œåƒx-forwarded-forå°±æ˜¯è¿™æ ·ã€‚<br><br>3.nginxå¯ä»¥ç”¨æŒ‡ä»¤é…ç½®ä½¿ç”¨ï¼Œä¸ç„¶é»˜è®¤æ˜¯ä¸æ”¯æŒçš„ï¼Œå…·ä½“å¯ä»¥çœ‹å®ƒçš„æ–‡æ¡£ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1619056387,"ip_address":"","comment_id":289302,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1618974145","product_id":100029001,"comment_content":"è€å¸ˆï¼Œå½“å¤šä¸ªä»£ç†è½¬å‘çš„æ—¶å€™ä»£ç†åè®®å¤´æ€ä¹ˆæè¿°ï¼Œçœ‹ç€è¿™ä¸ªä»£ç†åè®®å¥½åƒæ²¡æœ‰åŠæ³•çŸ¥é“ä¸€å…±ç»è¿‡äº†å¤šå°‘ä¸ªä»£ç†èŠ‚ç‚¹è€Œä¸”ç«¯å£å’Œipç«Ÿç„¶ä¸æ˜¯æˆå¯¹å‡ºç°è¿˜è¦è‡ªå·±åŒ¹é…ä¹Ÿå¤ªä¸å‹å¥½äº†ï¼Œå¯¹äºæœåŠ¡å™¨æ¥ä»£ç†åè®®å¤´ä¼°è®¡è¦å¾ˆå¤šæ”¯æŒä»£ç†åè®®å¤´å¤„ç†çš„apiæ‰èƒ½æ“ä½œè·å–ç›¸å…³ä¿¡æ¯å§ï¼Œä¸ç„¶å°±è¦è‡ªå·±å†™åŸç”Ÿçš„apiæ¥è·å–ã€‚ç°åœ¨å¸‚é¢ä¸Šå¤§å¤šè¯­è¨€æˆ–è€…webæœåŠ¡å™¨éƒ½ä¼šéµå®ˆè¿™ä¸ªä»£ç†åè®®å—ï¼Ÿè¿˜æ˜¯åªæœ‰haproxyè¿™ä¹ˆå¹²ï¼Œè¿˜åœ¨å°±æ˜¯å¤šå±‚ä»£ç†åœ¨è½¬å‘è¯·æ±‚çš„æ—¶å€™ä¼šä¸»åŠ¨å†æ¬¡å¸¦ä¸Šçš„ä¸Šæ¬¡è¿™ä¸ªä»£ç†åè®®å¤´çš„å—ï¼Ÿå¦‚nginxï¼Œæ˜¯å¦éœ€è¦ä»€ä¹ˆé…ç½®æ‰è¡Œå‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518880,"discussion_content":"\n1. proxy åè®®æ˜¯haproxyåˆ¶å®šçš„ï¼Œä½†å·²ç»æˆä¸ºäº†å¤§å®¶å…±ç”¨çš„æ ‡å‡†ã€‚\n\n2.proxyåè®®æ¯”è¾ƒç®€å•ï¼Œæƒ³è¦çŸ¥é“ä¸­é—´ç»è¿‡äº†å¤šå°‘èŠ‚ç‚¹å°±å¾—è‡ªå·±åœ¨httpå¤´é‡Œè®°å½•äº†ï¼Œåƒx-forwarded-forå°±æ˜¯è¿™æ ·ã€‚\n\n3.nginxå¯ä»¥ç”¨æŒ‡ä»¤é…ç½®ä½¿ç”¨ï¼Œä¸ç„¶é»˜è®¤æ˜¯ä¸æ”¯æŒçš„ï¼Œå…·ä½“å¯ä»¥çœ‹å®ƒçš„æ–‡æ¡£ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619056387,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":287934,"user_name":"é£ç¿”çš„è‘±æ²¹é¥¼","can_delete":false,"product_type":"c1","uid":1402668,"ip_address":"","ucode":"42865E09C7F899","user_header":"https://static001.geekbang.org/account/avatar/00/15/67/2c/ee3c2d36.jpg","comment_is_top":false,"comment_ctime":1618222852,"is_pvip":false,"replies":[{"id":"104579","content":"greatã€‚<br><br>è´Ÿè½½å‡è¡¡çš„ç®—æ³•è¿˜æœ‰ip hashã€randomï¼Œleast_conç­‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1618288894,"ip_address":"","comment_id":287934,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1618222852","product_id":100029001,"comment_content":"1.ä»£ç†ç”±äºæ˜¯ä¸­é—´äººçš„è§’è‰²ï¼Œåˆ™ä¼šå­˜åœ¨å®‰å…¨é—®é¢˜ã€‚å®ƒèƒ½æˆªè·çœŸå®å®¢æˆ·ç«¯çš„è¯·æ±‚å’ŒæœåŠ¡å™¨çš„å“åº”ã€‚åˆ™è¯·æ±‚å’Œå“åº”å¯èƒ½ä¼šè¢«ç¯¡æ”¹ï¼Œå¹¶ä¸”å…¶ä¸­çš„æ•æ„Ÿæ•°æ®å¯èƒ½è¢«çªƒå–ã€‚è§£å†³æ–¹å¼åˆ™æ˜¯æ¢ç”¨å®‰å…¨çš„HTTPSåè®®ï¼Œæ•°æ®å¯åŠ å¯†ï¼Œå¹¶ä¸”å¸¦æœ‰æ•°å­—è¯ä¹¦ç­‰èº«ä»½è®¤è¯åŠŸèƒ½ã€‚<br><br>2.è´Ÿè½½å‡è¡¡ã€‚ç›®å‰è‡ªå·±äº†è§£åˆ°çš„ç®—æ³•æœ‰: æ™®é€šè½®è¯¢ï¼ŒRoundRobinè½®è¯¢ï¼Œä¸€è‡´æ€§å“ˆå¸Œ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518466,"discussion_content":"greatã€‚\n\nè´Ÿè½½å‡è¡¡çš„ç®—æ³•è¿˜æœ‰ip hashã€randomï¼Œleast_conç­‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618288894,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":284962,"user_name":"Geek_04707e","can_delete":false,"product_type":"c1","uid":2458509,"ip_address":"","ucode":"540FEE1B3C7E08","user_header":"","comment_is_top":false,"comment_ctime":1616563264,"is_pvip":false,"replies":[{"id":"103380","content":"ç†è§£çš„å·®ä¸å¤šï¼Œå®ƒä½œä¸ºä¸ƒå±‚ä»£ç†ï¼Œå¿…é¡»è¦è§£æhttpåè®®ï¼ŒçŸ¥é“é‡Œé¢æœ‰å“ªäº›å­—æ®µï¼Œç„¶åæ‰èƒ½å‘åé¢è½¬å‘ã€‚<br><br>å¦‚æœåé¢æ˜¯fast-cgiï¼Œé‚£å½“ç„¶è¦ä¾æ®å®ƒçš„è§„å®šå‘æ•°æ®äº†ï¼Œä¸ç„¶åç«¯æœåŠ¡å™¨ä¸è®¤ã€‚<br><br>å…·ä½“çš„ä»£ç å¯ä»¥å»çœ‹Nginxçš„fast-cgiæ¨¡å—çš„ä»£ç äº†ï¼Œæˆ‘ä¸ªäººå¯¹PHPä¸å¤ªäº†è§£ï¼Œè¿™æ–¹é¢å°±ä¸å¥½è¯´äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1616589150,"ip_address":"","comment_id":284962,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1616563264","product_id":100029001,"comment_content":"è¯·æ•™ä¸€ä¸‹ï¼Œnginx çš„åå‘ä»£ç†æ˜¯æ€ä¹ˆå®ç°çš„å‘¢ï¼Œè¦æ‹†æŠ¥æ–‡å¤´å—ï¼Œå¦‚æœåç«¯æ˜¯php-fpmåœ¨9000ä¸Š,nginx é…ç½®.phpçš„åç¼€å°±è½¬å‘åˆ° 9000ä¸Šï¼Œé‚£è¿™å¤„è¿‡ç¨‹æ˜¯æ€ä¹ˆå®ç°çš„å‘¢ï¼Œéœ€è¦æ‹†æµè§ˆå™¨çš„æŠ¥æ–‡å¤´å—ï¼Œç„¶åå†å°è£…è¯·æ±‚å†å‘åˆ°åé¢9000å§ï¼Œè€Œä¸”è¿™ä¸ªå¥½åƒä¸æ˜¯http åè®®ï¼Œåº”è¯¥æ˜¯fast-cgi åè®®ï¼Œé‚£fast-cgi åè®®è¦å‘é€å“ªäº›å­—æ®µå‘¢","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":517526,"discussion_content":"ç†è§£çš„å·®ä¸å¤šï¼Œå®ƒä½œä¸ºä¸ƒå±‚ä»£ç†ï¼Œå¿…é¡»è¦è§£æhttpåè®®ï¼ŒçŸ¥é“é‡Œé¢æœ‰å“ªäº›å­—æ®µï¼Œç„¶åæ‰èƒ½å‘åé¢è½¬å‘ã€‚\n\nå¦‚æœåé¢æ˜¯fast-cgiï¼Œé‚£å½“ç„¶è¦ä¾æ®å®ƒçš„è§„å®šå‘æ•°æ®äº†ï¼Œä¸ç„¶åç«¯æœåŠ¡å™¨ä¸è®¤ã€‚\n\nå…·ä½“çš„ä»£ç å¯ä»¥å»çœ‹Nginxçš„fast-cgiæ¨¡å—çš„ä»£ç äº†ï¼Œæˆ‘ä¸ªäººå¯¹PHPä¸å¤ªäº†è§£ï¼Œè¿™æ–¹é¢å°±ä¸å¥½è¯´äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616589150,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":278638,"user_name":"ä¹˜é£ç ´æµª","can_delete":false,"product_type":"c1","uid":2406841,"ip_address":"","ucode":"937AF15F3FEBDC","user_header":"https://static001.geekbang.org/account/avatar/00/24/b9/b9/9e4d7aa4.jpg","comment_is_top":false,"comment_ctime":1613143322,"is_pvip":false,"replies":[{"id":"101343","content":"<br>1.å‚è€ƒwww&#47;conf&#47;http&#47;servers&#47;locations.incï¼Œé‡Œé¢æ˜¯ä»£ç†è½¬å‘çš„é…ç½®ï¼Œéœ€è¦ä¸€ç‚¹NginxçŸ¥è¯†æ‰èƒ½ç†è§£ã€‚<br><br>2.åŒæ ·çš„Nginxé…ç½®çš„åŸå› ï¼Œåœ¨è¿™é‡Œåªå¯¹â€œ&#47;proxyâ€è¿™ä¸ªuriåšäº†ä»£ç†è½¬å‘é…ç½®ï¼Œå…¶ä»–çš„ä¸ä¼šæ”¹å˜ã€‚<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1613391114,"ip_address":"","comment_id":278638,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1613143322","product_id":100029001,"comment_content":"ç½—å¤§å¸ˆæ–°å¹´å¥½<br><br>æœ‰2ä¸ªé—®é¢˜è¯·æ•™ï¼š<br>1. å¦‚ä½•ç†è§£ä»£ç†æœåŠ¡å™¨å‘å‡ºçš„HTTPè¯·æ±‚ï¼Œè¿™ä¸ªè¯·æ±‚æ€ä¹ˆæ˜ å°„åˆ°origin.ioçš„21-1?<br>è¿™ä¸ª&#47;proxy&#47;æ˜¯å›ºå®šçš„å­—ç¬¦ä¸²ï¼Ÿè¡¨ç¤ºèµ°ä»£ç†æµç¨‹ï¼Ÿ<br>GET &#47;proxy&#47; HTTP&#47;1.0\\r\\n  <br><br>21-1å®éªŒç¯å¢ƒ<br><br>127.0.0.1  --- www.chrono.com --- origin.io<br>ä»£ç†æœåŠ¡å™¨ä»£ç†å‘é€HTTPè¯·æ±‚æ—¶å¸¦çš„å’Œä»£ç†æœ‰å…³çš„å¤´å­—æ®µæœ‰<br>\tX-Real-IP =&gt; 127.0.0.1:57195<br>\tX-Forwarded-For =&gt; 127.0.0.1<br>\tX-Forwarded-Host =&gt; www.chrono.com<br>\tX-Forwarded-Proto =&gt; http<br>\tHost: origin.io  #æ˜ å°„åˆ°origin.io&#47;index.htm?<br>æ³¨ï¼šæœªåŒ…æ‹¬Viaå­—æ®µ<br><br>ä»£ç†æœåŠ¡å™¨è½¬å‘çš„å“åº”æŠ¥æ–‡<br>\tHTTP&#47;1.1 200 OK<br>\tServer: openresty&#47;1.19.3.1<br>\tDate: Fri, 12 Feb 2021 14:59:17 GMT<br>\tContent-Type: text&#47;plain<br>\tContent-Length: 153<br>\tConnection: keep-alive<br>\tOrigin: http:&#47;&#47;origin.io:80<br>\tVia: www.chrono.com:80<br>\tAccept-Ranges: bytes<br><br>é—®é¢˜2ï¼Œè§‚å¯Ÿä¸‹é¢çš„æ¶ˆæ¯ï¼Œå‘ç°è¯·æ±‚favicon.icoä¸ºä½•æ²¡æœ‰èµ°ä»£ç†æµç¨‹ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ<br>\tGET &#47;favicon.ico HTTP&#47;1.1<br>\tHost: www.chrono.com<br>\tConnection: keep-alive<br>\tUser-Agent: Mozilla&#47;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit&#47;537.36 (KHTML, like Gecko) Chrome&#47;88.0.4324.150 Safari&#47;537.36<br>\tAccept: image&#47;avif,image&#47;webp,image&#47;apng,image&#47;svg+xml,image&#47;*,*&#47;*;q=0.8<br>\tReferer: http:&#47;&#47;www.chrono.com&#47;21-1<br>\tAccept-Encoding: gzip, deflate<br>\tAccept-Language: zh-CN,zh;q=0.9<br>\t<br>\tHTTP&#47;1.1 404 Not Found<br>\tServer: openresty&#47;1.19.3.1<br>\tDate: Fri, 12 Feb 2021 14:59:17 GMT<br>\tContent-Type: text&#47;html<br>\tContent-Length: 561<br>\tConnection: keep-alive<br>","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":515456,"discussion_content":"\n1.å‚è€ƒwww/conf/http/servers/locations.incï¼Œé‡Œé¢æ˜¯ä»£ç†è½¬å‘çš„é…ç½®ï¼Œéœ€è¦ä¸€ç‚¹NginxçŸ¥è¯†æ‰èƒ½ç†è§£ã€‚\n\n2.åŒæ ·çš„Nginxé…ç½®çš„åŸå› ï¼Œåœ¨è¿™é‡Œåªå¯¹â€œ/proxyâ€è¿™ä¸ªuriåšäº†ä»£ç†è½¬å‘é…ç½®ï¼Œå…¶ä»–çš„ä¸ä¼šæ”¹å˜ã€‚\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1613391114,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":257214,"user_name":"stg609","can_delete":false,"product_type":"c1","uid":1073025,"ip_address":"","ucode":"FB70A75A891BB8","user_header":"https://static001.geekbang.org/account/avatar/00/10/5f/81/1c614f4a.jpg","comment_is_top":false,"comment_ctime":1603884730,"is_pvip":false,"replies":[{"id":"93629","content":"è¿™ä¸ªhttpåè®®æ²¡æœ‰æ˜ç¡®è§„å®šï¼Œæ‰€ä»¥ç•™ç»™äº†ä»£ç†å¾ˆå¤§çš„çµæ´»æ€§ï¼Œæ¯”å¦‚Nginxå°±æ˜¯æš‚å­˜æ‰€æœ‰æ•°æ®åå†å‘ç»™åç«¯ï¼Œä½†ä¹Ÿå¯ä»¥ä¸€è¾¹æ”¶ä¸€è¾¹å‘ï¼Œè¿™æ ·çš„åšæ³•æ˜¯èŠ‚çº¦å†…å­˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1603892944,"ip_address":"","comment_id":257214,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1603884730","product_id":100029001,"comment_content":"å¯¹äº transfer-encoding chunked è¿™ç§è¯·æ±‚ï¼Œå¦‚æœä¸­é—´æœ‰ä»£ç†ï¼Œæ˜¯ä»£ç†æ”¶åˆ°æ‰€æœ‰chunkåå†è½¬å‘ç»™ç›®æ ‡æœåŠ¡å™¨å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":508260,"discussion_content":"è¿™ä¸ªhttpåè®®æ²¡æœ‰æ˜ç¡®è§„å®šï¼Œæ‰€ä»¥ç•™ç»™äº†ä»£ç†å¾ˆå¤§çš„çµæ´»æ€§ï¼Œæ¯”å¦‚Nginxå°±æ˜¯æš‚å­˜æ‰€æœ‰æ•°æ®åå†å‘ç»™åç«¯ï¼Œä½†ä¹Ÿå¯ä»¥ä¸€è¾¹æ”¶ä¸€è¾¹å‘ï¼Œè¿™æ ·çš„åšæ³•æ˜¯èŠ‚çº¦å†…å­˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603892944,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":251286,"user_name":"Geek_8593e5","can_delete":false,"product_type":"c1","uid":1736807,"ip_address":"","ucode":"B316E40C400CC8","user_header":"","comment_is_top":false,"comment_ctime":1601450728,"is_pvip":false,"replies":[{"id":"91896","content":"<br>1.ä»£ç†å’Œhttpçš„å¤´å­—æ®µä¸å†²çªï¼Œå¯ä»¥åŒæ—¶å‘æŒ¥ä½œç”¨ï¼Œä½†åŒæ—¶å‡ºç°å°±çœ‹æœåŠ¡å™¨å¦‚ä½•å–èˆäº†ï¼Œä¸€èˆ¬ä¼šé‡‡ç”¨ä»£ç†åè®®ã€‚<br><br>2.Nginxå®Œå…¨æ”¯æŒproxyåè®®ï¼Œä½†æ³¨æ„åªæœ‰æ–°ç‰ˆæœ¬æ‰æ”¯æŒv2 proxyåè®®ï¼Œå…·ä½“å¯ä»¥çœ‹Nginxçš„æ›´æ–°å†å²ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1601514791,"ip_address":"","comment_id":251286,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1601450728","product_id":100029001,"comment_content":"è€å¸ˆå¥½ï¼Œè¯·é—®å¦‚æœç½‘ç«™ä½¿ç”¨httpsåè®®çš„åŒæ—¶ä¹Ÿä½¿ç”¨äº†ä»£ç†ï¼Œæ˜¯ä¸æ˜¯å°±æ²¡åŠæ³•é€šè¿‡&quot;X-Forwarded-Forâ€å’Œâ€œX-Real-IPâ€è·å¾—çœŸå®çš„ipäº†ï¼Ÿå¦å¤–nginxæœ‰é‡‡ç”¨HAProxyåè®®ä¹ˆ?","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":506438,"discussion_content":"\n1.ä»£ç†å’Œhttpçš„å¤´å­—æ®µä¸å†²çªï¼Œå¯ä»¥åŒæ—¶å‘æŒ¥ä½œç”¨ï¼Œä½†åŒæ—¶å‡ºç°å°±çœ‹æœåŠ¡å™¨å¦‚ä½•å–èˆäº†ï¼Œä¸€èˆ¬ä¼šé‡‡ç”¨ä»£ç†åè®®ã€‚\n\n2.Nginxå®Œå…¨æ”¯æŒproxyåè®®ï¼Œä½†æ³¨æ„åªæœ‰æ–°ç‰ˆæœ¬æ‰æ”¯æŒv2 proxyåè®®ï¼Œå…·ä½“å¯ä»¥çœ‹Nginxçš„æ›´æ–°å†å²ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1601514791,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":225027,"user_name":"Geek_b7218f","can_delete":false,"product_type":"c1","uid":1240137,"ip_address":"","ucode":"8D9AE65555B31D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/B7mKLJoo0L8GBBSlYWibkrZfyZX49NCCUxMlpJoAicuuyHRoE362ALQVicMXCS894osJ8icKibWdyIbKleicHpZicibgdA/132","comment_is_top":false,"comment_ctime":1591620177,"is_pvip":false,"replies":[{"id":"82871","content":"Apacheæˆ‘ç”¨çš„å¾ˆå°‘ï¼Œæˆ‘è§‰å¾—è¿˜æ˜¯ç”¨Nginxæ¯”è¾ƒå¥½ï¼Œæ›´æœ‰å‰é€”ã€‚<br><br>è¿™æ–¹é¢Nginxçš„èµ„æ–™å¾ˆå¤šï¼Œåœ¨å®˜ç½‘ä¸Šå°±å¯ä»¥æŸ¥åˆ°æŒ‡ä»¤è¯¥å¦‚ä½•é…ç½®ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1591664765,"ip_address":"","comment_id":225027,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1591620177","product_id":100029001,"comment_content":"è¯·æ•™ä¸‹åº”ç”¨é€šè¿‡Apache æ­£å‘ä»£ç†è®¿é—®å¤–éƒ¨ï¼Œä½†å¤–éƒ¨åœ°å€è¦æ±‚åŒå‘https è®¤è¯ï¼ŒApache åº”è¯¥æ€ä¹ˆé…ç½®ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497700,"discussion_content":"Apacheæˆ‘ç”¨çš„å¾ˆå°‘ï¼Œæˆ‘è§‰å¾—è¿˜æ˜¯ç”¨Nginxæ¯”è¾ƒå¥½ï¼Œæ›´æœ‰å‰é€”ã€‚\n\nè¿™æ–¹é¢Nginxçš„èµ„æ–™å¾ˆå¤šï¼Œåœ¨å®˜ç½‘ä¸Šå°±å¯ä»¥æŸ¥åˆ°æŒ‡ä»¤è¯¥å¦‚ä½•é…ç½®ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591664765,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":207248,"user_name":"å¼ ä¸‰","can_delete":false,"product_type":"c1","uid":1004092,"ip_address":"","ucode":"1155528FAE1546","user_header":"https://static001.geekbang.org/account/avatar/00/0f/52/3c/d6fcb93a.jpg","comment_is_top":false,"comment_ctime":1587034613,"is_pvip":false,"replies":[{"id":"77454","content":"è¿™ä¸ªåº”è¯¥èƒ½ä»é”™è¯¯è¿”å›å€¼çœ‹åˆ°å§ï¼Œæ¯”å¦‚åè®®ä¸æ”¯æŒä¹‹ç±»çš„ã€‚<br><br>è¯è¯´å›æ¥ï¼Œæœ‰å…³ç½‘ç»œåè®®çš„é”™è¯¯ç¡®å®ä¸å¥½æŸ¥ï¼Œç¯èŠ‚å¤ªå¤šã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"chrono","uid":"1181974","ctime":1587084566,"ip_address":"","comment_id":207248,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1587034613","product_id":100029001,"comment_content":"ä»ä¸Šå‘¨å¼€å§‹é‡åˆ°è¦åœ¨ä»£ç†ä¸Šå®‰è£…è¯ä¹¦çš„é—®é¢˜ï¼Œäºæ˜¯å¼€å§‹å­¦ä¹ è¿™ä¹ˆè¯¾ï¼Œç¡®å®ææ‡‚äº†httpsåŠ å¯†çš„éƒ¨åˆ†äº†ï¼Œä¹‹ååœ¨ç»§ç»­å·©å›ºï¼›ç„¶ååˆé‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œå®¢æˆ·ç«¯è¯·æ±‚httpsæŠ¥é”™sslhandshake é”™è¯¯ï¼Œåæ¥è¯¯æ‰“è¯¯æ’å‘ç°æ˜¯æœåŠ¡å™¨è¿”å›çš„è¯·æ±‚å¤´åªæ”¯æŒTLSv1.2ï¼Œè€Œå®¢æˆ·ç«¯çš„jdkä¸æ”¯æŒï¼Œå¿…é¡»è¿›è¡Œè®¾ç½®<br>","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":492058,"discussion_content":"è¿™ä¸ªåº”è¯¥èƒ½ä»é”™è¯¯è¿”å›å€¼çœ‹åˆ°å§ï¼Œæ¯”å¦‚åè®®ä¸æ”¯æŒä¹‹ç±»çš„ã€‚\n\nè¯è¯´å›æ¥ï¼Œæœ‰å…³ç½‘ç»œåè®®çš„é”™è¯¯ç¡®å®ä¸å¥½æŸ¥ï¼Œç¯èŠ‚å¤ªå¤šã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587084566,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1004092,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/52/3c/d6fcb93a.jpg","nickname":"å¼ ä¸‰","note":"","ucode":"1155528FAE1546","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":236303,"discussion_content":"javaä»£ç é‡Œè¾¹ç›´æ¥catchå¼‚å¸¸äº†ï¼šsslhandshake exceptionï¼Œè¯è¯´æœåŠ¡å™¨æ”¯æŒçš„åè®®æ˜¯æ€ä¹ˆè®¾ç½®çš„å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587086085,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":138486,"user_name":"lfn","can_delete":false,"product_type":"c1","uid":1026593,"ip_address":"","ucode":"2E1558C6A12A89","user_header":"https://static001.geekbang.org/account/avatar/00/0f/aa/21/6c3ba9af.jpg","comment_is_top":false,"comment_ctime":1570270532,"is_pvip":false,"replies":[{"id":"53475","content":"å‡æœŸä¹Ÿåœ¨åŠªåŠ›å­¦ä¹ ï¼ŒåŠ æ²¹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"chrono","uid":"1181974","ctime":1570496443,"ip_address":"","comment_id":138486,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1570270532","product_id":100029001,"comment_content":"2019-10-05ï¼Œ æ‰“å¡ã€‚","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":469539,"discussion_content":"å‡æœŸä¹Ÿåœ¨åŠªåŠ›å­¦ä¹ ï¼ŒåŠ æ²¹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570496443,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":119606,"user_name":"å°å¯çˆ±(à¹‘â€¢ . â€¢à¹‘)","can_delete":false,"product_type":"c1","uid":1106190,"ip_address":"","ucode":"1E97973449DBDC","user_header":"https://static001.geekbang.org/account/avatar/00/10/e1/0e/2912db26.jpg","comment_is_top":false,"comment_ctime":1564635866,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1564635866","product_id":100029001,"comment_content":"æŠ“ç´§èµ¶ä¸Š","like_count":0},{"had_liked":false,"id":118544,"user_name":"é¾™å®å®","can_delete":false,"product_type":"c1","uid":1511926,"ip_address":"","ucode":"355AF9ADC92CE8","user_header":"https://static001.geekbang.org/account/avatar/00/17/11/f6/36bd007d.jpg","comment_is_top":false,"comment_ctime":1564384823,"is_pvip":false,"replies":[{"id":"43417","content":"ä»£ç†æœåŠ¡å™¨å‘åç«¯å‘é€è¯·æ±‚ä½¿ç”¨çš„æ˜¯HTTP&#47;1.0ï¼Œå¯ä»¥çœ‹ä¸€ä¸‹æºå’Œç›®æ ‡çš„ç«¯å£å·ï¼Œè¿‡æ»¤ä¸€ä¸‹å°±å¯ä»¥äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"chrono","uid":"1181974","ctime":1564385688,"ip_address":"","comment_id":118544,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1564384823","product_id":100029001,"comment_content":"æ–‡ç« ä¸­æŠ“åŒ…çš„å›¾ç‰‡ä¸­ http&#47;1.0å’Œhttp&#47;1.1æ€ä¹ˆäº¤æ›¿å‡ºç°ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460445,"discussion_content":"ä»£ç†æœåŠ¡å™¨å‘åç«¯å‘é€è¯·æ±‚ä½¿ç”¨çš„æ˜¯HTTP/1.0ï¼Œå¯ä»¥çœ‹ä¸€ä¸‹æºå’Œç›®æ ‡çš„ç«¯å£å·ï¼Œè¿‡æ»¤ä¸€ä¸‹å°±å¯ä»¥äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564385688,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":115643,"user_name":"LeonğŸ“·","can_delete":false,"product_type":"c1","uid":1219496,"ip_address":"","ucode":"B9BBD1EFAAE5A2","user_header":"https://static001.geekbang.org/account/avatar/00/12/9b/a8/6a391c66.jpg","comment_is_top":false,"comment_ctime":1563680715,"is_pvip":false,"replies":[{"id":"42323","content":"niceã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"chrono","uid":"1181974","ctime":1563757281,"ip_address":"","comment_id":115643,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1563680715","product_id":100029001,"comment_content":"proxyåè®®çš„é…ç½®demo<br> server {<br>    listen 10003 proxy_protocol;<br>    return &#39;10003 server get ip: $remote_addr!\\n&#39;;<br>  }å¯ä»¥ç›´è§‚æ„Ÿå—ä¸‹","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459204,"discussion_content":"niceã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563757281,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":114586,"user_name":"äºšæ´²èˆç‹.å°¼å¤æ‹‰æ–¯èµµå››","can_delete":false,"product_type":"c1","uid":1443078,"ip_address":"","ucode":"7159F5D7232696","user_header":"https://static001.geekbang.org/account/avatar/00/16/05/06/f5979d65.jpg","comment_is_top":false,"comment_ctime":1563345692,"is_pvip":false,"replies":[{"id":"41823","content":"è¿™ä¸ªåº”è¯¥æ˜¯vpnï¼Œä¸æ˜¯ç®€å•çš„ä»£ç†ã€‚<br><br>è¯é¢˜æ¯”è¾ƒæ•æ„Ÿï¼Œå°±ä¸å¤šè¯´äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"chrono","uid":"1181974","ctime":1563350467,"ip_address":"","comment_id":114586,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1563345692","product_id":100029001,"comment_content":"è€å¸ˆï¼Œæˆ‘ä»¬å¹³å¸¸è¯´çš„ç¿»å¢™æ˜¯é€šè¿‡ä»£ç†å®ç°çš„å—ï¼Ÿæ˜¯åœ¨httpè¯·æ±‚çš„ä»€ä¹ˆé˜¶æ®µä»£ç†ä¸Šçš„å‘¢ï¼Ÿsså’Œssræœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿä¸ºä»€ä¹ˆèƒ½å¤Ÿç¿»è¶Šäº’è”ç½‘é•¿åŸï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458734,"discussion_content":"è¿™ä¸ªåº”è¯¥æ˜¯vpnï¼Œä¸æ˜¯ç®€å•çš„ä»£ç†ã€‚\n\nè¯é¢˜æ¯”è¾ƒæ•æ„Ÿï¼Œå°±ä¸å¤šè¯´äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563350467,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":113899,"user_name":"ç‹¬æ­¥æ˜Ÿç©º","can_delete":false,"product_type":"c1","uid":1414123,"ip_address":"","ucode":"FB57C1D3EB1B6C","user_header":"https://static001.geekbang.org/account/avatar/00/15/93/eb/990c2c5e.jpg","comment_is_top":false,"comment_ctime":1563182306,"is_pvip":false,"replies":[{"id":"41496","content":"å®‰å…¨ç¯‡é‡Œå…¨éƒ½æ˜¯httpsï¼Œå¾ˆå¿«å°±è¦åˆ°äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"chrono","uid":"1181974","ctime":1563183946,"ip_address":"","comment_id":113899,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1563182306","product_id":100029001,"comment_content":"è€å¸ˆï¼Œæ–¹ä¾¿çš„æ—¶å€™èƒ½å‚ç…§ç€httpç»“æ„ï¼Œé¡ºå¸¦ä»‹ç»ä¸‹httpsä¹ˆ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458428,"discussion_content":"å®‰å…¨ç¯‡é‡Œå…¨éƒ½æ˜¯httpsï¼Œå¾ˆå¿«å°±è¦åˆ°äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563183946,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":113885,"user_name":"ä¸€æ­¥","can_delete":false,"product_type":"c1","uid":1005391,"ip_address":"","ucode":"73CEA468CE70C3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","comment_is_top":false,"comment_ctime":1563179768,"is_pvip":true,"replies":[{"id":"41498","content":"ä»£ç†åè®®è®¾è®¡çš„ç›®çš„å°±ä¸æ˜¯è®°å½•ä¼ è¾“é“¾è·¯ï¼Œå› ä¸ºè¿™ä¸ªå·²ç»è¢«X-Forwarded-Foråšäº†ã€‚<br><br>è¿™æ ·éœ€æ±‚è¿˜æ˜¯è¦ç”¨X-Forwarded-Forå­—æ®µã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"chrono","uid":"1181974","ctime":1563184338,"ip_address":"","comment_id":113885,"utype":1}],"discussion_count":1,"race_medal":1,"score":"1563179768","product_id":100029001,"comment_content":"å¯¹äºä»£ç†åè®®ï¼Œä¹Ÿæœ‰ç‚¹ç–‘é—®ã€‚ä»£ç†åè®®åªæ˜¯åœ¨è¯·æ±‚è¡Œçš„å‰é¢åŠ äº†ä¸€ä¸ªå®¢æœç«¯åœ°å€å’ŒæœåŠ¡å™¨åœ°å€ï¼Œè€Œæ²¡æœ‰æ•´ä¸ªè¯·æ±‚çš„ä»£ç†é“¾è·¯ï¼Œå¦‚æœæºæœåŠ¡å™¨æƒ³çœ‹æ•´ä¸ªè¯·æ±‚ç»è¿‡äº†å“ªäº›ä»£ç†æ€ä¹ˆå»çœ‹å‘¢ï¼Ÿ(è¿™ä¸ªä»£ç†æœåŠ¡å™¨æ²¡æœ‰å†å»ä¿®æ”¹X-Forwarded-For)","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458422,"discussion_content":"ä»£ç†åè®®è®¾è®¡çš„ç›®çš„å°±ä¸æ˜¯è®°å½•ä¼ è¾“é“¾è·¯ï¼Œå› ä¸ºè¿™ä¸ªå·²ç»è¢«X-Forwarded-Foråšäº†ã€‚\n\nè¿™æ ·éœ€æ±‚è¿˜æ˜¯è¦ç”¨X-Forwarded-Forå­—æ®µã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563184338,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":113800,"user_name":"djfhchdh","can_delete":false,"product_type":"c1","uid":1484184,"ip_address":"","ucode":"E71D75328CE398","user_header":"https://static001.geekbang.org/account/avatar/00/16/a5/98/a65ff31a.jpg","comment_is_top":false,"comment_ctime":1563158266,"is_pvip":false,"replies":[{"id":"41454","content":"âˆš","user_name":"ä½œè€…å›å¤","user_name_real":"chrono","uid":"1181974","ctime":1563162497,"ip_address":"","comment_id":113800,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1563158266","product_id":100029001,"comment_content":"1ã€ä»£ç†ä¼šæˆä¸ºæ€§èƒ½ç“¶é¢ˆï¼Œæœ‰å•ç‚¹é—®é¢˜","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458392,"discussion_content":"âˆš","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563162497,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}