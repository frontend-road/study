{"id":103270,"title":"13 | HTTP有哪些特点？","content":"<p>通过“基础篇”前几讲的学习，你应该已经知道了HTTP协议的基本知识，了解它的报文结构，请求头、响应头以及内部的请求方法、URI和状态码等细节。</p><p>你会不会有种疑惑：“HTTP协议好像也挺简单的啊，凭什么它就能统治互联网这么多年呢？”</p><p>所以接下来的这两讲，我会跟你聊聊HTTP协议的特点、优点和缺点。既要看到它好的一面，也要正视它不好的一面，只有全方位、多角度了解HTTP，才能实现“扬长避短”，更好地利用HTTP。</p><p>今天这节课主要说的是HTTP协议的特点，但不会讲它们的好坏，这些特点即有可能是优点，也有可能是缺点，你可以边听边思考。</p><p><img src=\"https://static001.geekbang.org/resource/image/78/4a/7808b195c921e0685958c20509855d4a.png?wh=1717*1165\" alt=\"\"></p><h2>灵活可扩展</h2><p>首先， <span class=\"orange\">HTTP协议是一个“灵活可扩展”的传输协议</span>。</p><p>HTTP协议最初诞生的时候就比较简单，本着开放的精神只规定了报文的基本格式，比如用空格分隔单词，用换行分隔字段，“header+body”等，报文里的各个组成部分都没有做严格的语法语义限制，可以由开发者任意定制。</p><p>所以，HTTP协议就随着互联网的发展一同成长起来了。在这个过程中，HTTP协议逐渐增加了请求方法、版本号、状态码、头字段等特性。而body也不再限于文本形式的TXT或HTML，而是能够传输图片、音频视频等任意数据，这些都是源于它的“灵活可扩展”的特点。</p><!-- [[[read_end]]] --><p>而那些RFC文档，实际上也可以理解为是对已有扩展的“承认和标准化”，实现了“从实践中来，到实践中去”的良性循环。</p><p>也正是因为这个特点，HTTP才能在三十年的历史长河中“屹立不倒”，从最初的低速实验网络发展到现在的遍布全球的高速互联网，始终保持着旺盛的生命力。</p><h2>可靠传输</h2><p>第二个特点， <span class=\"orange\">HTTP协议是一个“可靠”的传输协议</span>。</p><p>这个特点显而易见，因为HTTP协议是基于TCP/IP的，而TCP本身是一个“可靠”的传输协议，所以HTTP自然也就继承了这个特性，能够在请求方和应答方之间“可靠”地传输数据。</p><p>它的具体做法与TCP/UDP差不多，都是对实际传输的数据（entity）做了一层包装，加上一个头，然后调用Socket API，通过TCP/IP协议栈发送或者接收。</p><p>不过我们必须正确地理解“可靠”的含义，HTTP并不能100%保证数据一定能够发送到另一端，在网络繁忙、连接质量差等恶劣的环境下，也有可能收发失败。“可靠”只是向使用者提供了一个“承诺”，会在下层用多种手段“尽量”保证数据的完整送达。</p><p>当然，如果遇到光纤被意外挖断这样的极端情况，即使是神仙也不能发送成功。所以，“可靠”传输是指在网络基本正常的情况下数据收发必定成功，借用运维里的术语，大概就是“3个9”或者“4个9”的程度吧。</p><h2>应用层协议</h2><p>第三个特点，<span class=\"orange\">HTTP协议是一个应用层的协议</span>。</p><p>这个特点也是不言自明的，但却很重要。</p><p>在TCP/IP诞生后的几十年里，虽然出现了许多的应用层协议，但它们都仅关注很小的应用领域，局限在很少的应用场景。例如FTP只能传输文件、SMTP只能发送邮件、SSH只能远程登录等，在通用的数据传输方面“完全不能打”。</p><p>所以HTTP凭借着可携带任意头字段和实体数据的报文结构，以及连接控制、缓存代理等方便易用的特性，一出现就“技压群雄”，迅速成为了应用层里的“明星”协议。只要不太苛求性能，HTTP几乎可以传递一切东西，满足各种需求，称得上是一个“万能”的协议。</p><p>套用一个网上流行的段子，HTTP完全可以用开玩笑的口吻说：“不要误会，我不是针对FTP，我是说在座的应用层各位，都是垃圾。”</p><h2>请求-应答</h2><p>第四个特点，<span class=\"orange\">HTTP协议使用的是请求-应答通信模式</span>。</p><p>这个请求-应答模式是HTTP协议最根本的通信模型，通俗来讲就是“一发一收”“有来有去”，就像是写代码时的函数调用，只要填好请求头里的字段，“调用”后就会收到答复。</p><p>请求-应答模式也明确了HTTP协议里通信双方的定位，永远是请求方先发起连接和请求，是主动的，而应答方只有在收到请求后才能答复，是被动的，如果没有请求时不会有任何动作。</p><p>当然，请求方和应答方的角色也不是绝对的，在浏览器-服务器的场景里，通常服务器都是应答方，但如果将它用作代理连接后端服务器，那么它就可能同时扮演请求方和应答方的角色。</p><p>HTTP的请求-应答模式也恰好契合了传统的C/S（Client/Server）系统架构，请求方作为客户端、应答方作为服务器。所以，随着互联网的发展就出现了B/S（Browser/Server）架构，用轻量级的浏览器代替笨重的客户端应用，实现零维护的“瘦”客户端，而服务器则摈弃私有通信协议转而使用HTTP协议。</p><p>此外，请求-应答模式也完全符合RPC（Remote Procedure Call）的工作模式，可以把HTTP请求处理封装成远程函数调用，导致了WebService、RESTful和gRPC等的出现。</p><h2>无状态</h2><p>第五个特点，<span class=\"orange\">HTTP协议是无状态的</span>。</p><p>这个所谓的“状态”应该怎么理解呢？</p><p>“状态”其实就是客户端或者服务器里保存的一些数据或者标志，记录了通信过程中的一些变化信息。</p><p>你一定知道，TCP协议是有状态的，一开始处于CLOSED状态，连接成功后是ESTABLISHED状态，断开连接后是FIN-WAIT状态，最后又是CLOSED状态。</p><p>这些“状态”就需要TCP在内部用一些数据结构去维护，可以简单地想象成是个标志量，标记当前所处的状态，例如0是CLOSED，2是ESTABLISHED等等。</p><p>再来看HTTP，那么对比一下TCP就看出来了，在整个协议里没有规定任何的“状态”，客户端和服务器永远是处在一种“<strong>无知</strong>”的状态。建立连接前两者互不知情，每次收发的报文也都是互相独立的，没有任何的联系。收发报文也不会对客户端或服务器产生任何影响，连接后也不会要求保存任何信息。</p><p>“无状态”形象地来说就是“没有记忆能力”。比如，浏览器发了一个请求，说“我是小明，请给我A文件。”，服务器收到报文后就会检查一下权限，看小明确实可以访问A文件，于是把文件发回给浏览器。接着浏览器还想要B文件，但服务器不会记录刚才的请求状态，不知道第二个请求和第一个请求是同一个浏览器发来的，所以浏览器必须还得重复一次自己的身份才行：“我是刚才的小明，请再给我B文件。”</p><p>我们可以再对比一下UDP协议，不过它是无连接也无状态的，顺序发包乱序收包，数据包发出去后就不管了，收到后也不会顺序整理。而HTTP是有连接无状态，顺序发包顺序收包，按照收发的顺序管理报文。</p><p>但不要忘了HTTP是“灵活可扩展”的，虽然标准里没有规定“状态”，但完全能够在协议的框架里给它“打个补丁”，增加这个特性。</p><h2>其他特点</h2><p>除了以上的五大特点，其实HTTP协议还可以列出非常多的特点，例如传输的实体数据可缓存可压缩、可分段获取数据、支持身份认证、支持国际化语言等。但这些并不能算是HTTP的基本特点，因为这都是由第一个“灵活可扩展”的特点所衍生出来的。</p><h2>小结</h2><ol>\n<li><span class=\"orange\">HTTP是灵活可扩展的，可以任意添加头字段实现任意功能；</span></li>\n<li><span class=\"orange\">HTTP是可靠传输协议，基于TCP/IP协议“尽量”保证数据的送达；</span></li>\n<li><span class=\"orange\">HTTP是应用层协议，比FTP、SSH等更通用功能更多，能够传输任意数据；</span></li>\n<li><span class=\"orange\">HTTP使用了请求-应答模式，客户端主动发起请求，服务器被动回复请求；</span></li>\n<li><span class=\"orange\">HTTP本质上是无状态的，每个请求都是互相独立、毫无关联的，协议不要求客户端或服务器记录请求相关的信息。</span></li>\n</ol><h2>课下作业</h2><ol>\n<li>就如同开头我讲的那样，你能说一下今天列出的这些HTTP的特点中哪些是优点，哪些是缺点吗？</li>\n<li>不同的应用场合有不同的侧重方面，你觉得哪个特点对你来说是最重要的呢？</li>\n</ol><p>欢迎你把自己的答案写在留言区，与我和其他同学一起讨论。如果你觉得有所收获，欢迎你把文章分享给你的朋友。</p><p><img src=\"https://static001.geekbang.org/resource/image/a2/7d/a233c19f92c566614e4e0facbaeab27d.png?wh=1769*2473\" alt=\"unpreview\"></p><p><img src=\"https://static001.geekbang.org/resource/image/56/63/56d766fc04654a31536f554b8bde7b63.jpg?wh=1110*659\" alt=\"unpreview\"></p>","neighbors":{"left":{"article_title":"12 | 响应状态码该怎么用？","id":102483},"right":{"article_title":"14 | HTTP有哪些优点？又有哪些缺点？","id":103746}},"comments":[{"had_liked":false,"id":107318,"user_name":"壹笙☞漂泊","can_delete":false,"product_type":"c1","uid":1092577,"ip_address":"","ucode":"3A0B8EC881665C","user_header":"https://static001.geekbang.org/account/avatar/00/10/ab/e1/f6b921fa.jpg","comment_is_top":false,"comment_ctime":1561514002,"is_pvip":false,"replies":[{"id":"38861","content":"一直这么认真学习，值得表扬！！","user_name":"作者回复","comment_id":107318,"uid":"1181974","ip_address":"","utype":1,"ctime":1561527648,"user_name_real":"chrono"}],"discussion_count":1,"race_medal":0,"score":"237784715282","product_id":100029001,"comment_content":"课后题：<br>1、我觉得所谓的优点和缺点都是要区别场景来看待的，比如，在一些长连接场景中，需要保存上下文状态，那么无状态这一点就成为缺点甚至是致命缺点了。但是在客户端-服务端通信中，如果场景不需要保存上下文信息，那么无状态就可以减少一些网络资源消耗，也就是优点了。<br>2、可靠传输对我比较重要，减少很多查错的工作。。。<br>总结：<br>http特点：<br>灵活可扩展<br>    可以扩展头字段实现功能<br>可靠传输<br>    HTTP并不能100%保证数据一定能够发送到另一端，在网络繁忙、连接差等恶劣环境时，也有可能收发失败，可靠只是向使用者提供了一个承诺，会在下层用多种手段尽量保证数据的完整送达<br>应用层协议<br><br>请求-应答通信模式<br>    客户端主动请求，服务端被动响应<br>无状态协议<br>    状态：客户端或者服务器里保存的一些数据或者标志，记录了通信过程中的一些变化信息<br>    每个请求都是互相独立，毫无关联的，两端都不会记录请求相关的信息","like_count":56,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455463,"discussion_content":"一直这么认真学习，值得表扬！！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561527648,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":119204,"user_name":"狼的诱惑","can_delete":false,"product_type":"c1","uid":1257043,"ip_address":"","ucode":"AE89DFC5963C42","user_header":"https://static001.geekbang.org/account/avatar/00/13/2e/53/bf62683f.jpg","comment_is_top":false,"comment_ctime":1564536779,"is_pvip":false,"replies":[{"id":"43704","content":"<br>1.mq的设计目的就是消息传输，保证不丢失，为此用了很多的手段，比如消息队列、路由、存储等等。而http的目的不在于此，它的可靠性基于tcp，而tcp不能保证消息100%发送。<br><br>2.无状态有的时候是优点有的时候是缺点，看应用场景，在需要扩展的时候无状态就是优点，在需要会话保持的时候就是缺点。<br><br>3.但无状态可以很容易变成有状态，而反过来就很难，这就体现了http的灵活性。","user_name":"作者回复","comment_id":119204,"uid":"1181974","ip_address":"","utype":1,"ctime":1564537680,"user_name_real":"chrono"}],"discussion_count":1,"race_medal":0,"score":"156183359435","product_id":100029001,"comment_content":"老师好，有两点疑问<br>1、为什么说MQ的比HTTP是高可靠的<br>2、个人觉得http的无状态，完全符合可扩展，轻量级、易维护现代设计，属于优点，不算是缺点，为什么大家认为不支持有状态就算是缺点，如果http做成有状态，估计复杂度会非常高吧？<br>个人想法，还请老师指正","like_count":37,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460786,"discussion_content":"\n1.mq的设计目的就是消息传输，保证不丢失，为此用了很多的手段，比如消息队列、路由、存储等等。而http的目的不在于此，它的可靠性基于tcp，而tcp不能保证消息100%发送。\n\n2.无状态有的时候是优点有的时候是缺点，看应用场景，在需要扩展的时候无状态就是优点，在需要会话保持的时候就是缺点。\n\n3.但无状态可以很容易变成有状态，而反过来就很难，这就体现了http的灵活性。","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1564537680,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108493,"user_name":"瑞","can_delete":false,"product_type":"c1","uid":1334600,"ip_address":"","ucode":"1C5945FD2D05C4","user_header":"https://static001.geekbang.org/account/avatar/00/14/5d/48/03abbbd1.jpg","comment_is_top":false,"comment_ctime":1561783621,"is_pvip":false,"replies":[{"id":"39411","content":"http协议里的“状态”是指没有规定通信双方需要记录通信过程的上下文信息，与日常生活的“状态”意思是不一样的。<br><br>每次http请求都是独立，无关的，不需要保留状态信息。","user_name":"作者回复","comment_id":108493,"uid":"1181974","ip_address":"","utype":1,"ctime":1561943170,"user_name_real":"chrono"}],"discussion_count":2,"race_medal":0,"score":"70281260357","product_id":100029001,"comment_content":"http无状态不是特别理解，状态的意思就是一个事物因为外界因素导致这个事物的形态，使用等发生改变，这个就是有状态的吧，http作为一个协议，本质不承载任何东西，只是一个数据的传输通道，即使传输通道里的数据有状态改变，也不能称为是http状态改变，因为理解为无状态，可以这样理解吗？","like_count":17,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456005,"discussion_content":"http协议里的“状态”是指没有规定通信双方需要记录通信过程的上下文信息，与日常生活的“状态”意思是不一样的。\n\n每次http请求都是独立，无关的，不需要保留状态信息。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561943170,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2406841,"avatar":"https://static001.geekbang.org/account/avatar/00/24/b9/b9/9e4d7aa4.jpg","nickname":"乘风破浪","note":"","ucode":"937AF15F3FEBDC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":348142,"discussion_content":"每次请求是有状态的，其状态由状态码体现；多个请求之间没有关系，是无状态的；所以从微观上说，HTTP是有状态的，从宏观上看，是无状态的","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1612440795,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":196362,"user_name":"Celine","can_delete":false,"product_type":"c1","uid":1926366,"ip_address":"","ucode":"63D5F2E8FB2130","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erwIgbTd3oy4GzkdCUBmz8lHGIIWBwoSIfibgQzwDlQuvTrLlqwTh7p99NBJIsu98ziaYoroQCSENwA/132","comment_is_top":false,"comment_ctime":1585275505,"is_pvip":false,"replies":[{"id":"74415","content":"说的很好，最后应该是笔误，WebSocket。","user_name":"作者回复","comment_id":196362,"uid":"1181974","ip_address":"","utype":1,"ctime":1585277326,"user_name_real":"chrono"}],"discussion_count":1,"race_medal":0,"score":"66009784945","product_id":100029001,"comment_content":"Http的缺点，无状态，在需要身份信息验证的时候就显示为缺点，用户登陆后每次请求都需要阐释一下身份，不能保存登陆成功的状态，不过现在可以在头字段里加入cookie或者token来解决这个问题;请求应答模式，导致服务器端只能被动的接收而不能主动推送，如果服务器资源状态变化的时候想要主动推送到客户端就需要借助其他协议来完成，比如we socket","like_count":16,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":489274,"discussion_content":"说的很好，最后应该是笔误，WebSocket。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585277326,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":197990,"user_name":"钱","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1585406071,"is_pvip":false,"replies":[{"id":"74810","content":"<br>1.说的很好，没有绝对的优点，也没有绝对的缺点。<br><br>2.http的可靠传输不能算是顶级的，但搭配上灵活就无敌了。","user_name":"作者回复","comment_id":197990,"uid":"1181974","ip_address":"","utype":1,"ctime":1585531705,"user_name_real":"chrono"}],"discussion_count":1,"race_medal":0,"score":"57419980919","product_id":100029001,"comment_content":"1：就如同开头我讲的那样，你能说一下今天列出的这些 HTTP 的特点中哪些是优点，哪些是缺点吗？<br>灵活可扩展是优点，没有这一点，她不可能一统江湖，这也是她敢说“在坐的各位都是垃圾”的底气。<br>灵活可扩展是缺点，她引入了一定的复杂度，增加了一定的学习成本。<br>可靠传输协议是优点，保证了数据的可靠性。<br>可靠传输协议是缺点，必须先建连才行，效率估计不如UDP。<br>应用层协议是优点，靠近用户，对用户优化，方便使用。<br>应用层协议是缺点，越往上处理的事情会越多，通信效率会差一些。<br>请求应答模式是优点，符合人类的对话方式容易理解，一个请求得到响应在发生另外一个。<br>请求应答模式是缺点，我请求一个资源，发现不够再请求一次，你一次回给我俩，不用回两次这么简单的事就做不到。<br>无状态是优点，无状态意味着易扩展，也不需要保持状态信息，节省空间。<br>无状态是缺点，我想保持回话状态还必须自己去想办法。<br><br>好吧！😅我编不下去了，不过我觉得HTTP最大的优点就是灵活可扩展，我们自己设计程序也希望做到这样，不过真要如此，复杂度会马上上去，不过HTTP确做到了灵活可扩展但是复杂度却没有增加太多。这一点太厉害了。<br><br>2：不同的应用场合有不同的侧重方面，你觉得哪个特点对你来说是最重要的呢？<br>看应用场景吧！目前，可靠传输对我而言至关重要，效率可以放一放，安全稳定第一。","like_count":14,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":489631,"discussion_content":"\n1.说的很好，没有绝对的优点，也没有绝对的缺点。\n\n2.http的可靠传输不能算是顶级的，但搭配上灵活就无敌了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585531705,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":161796,"user_name":"尔冬橙","can_delete":false,"product_type":"c1","uid":1225224,"ip_address":"","ucode":"0B013A49BC18DA","user_header":"https://static001.geekbang.org/account/avatar/00/12/b2/08/92f42622.jpg","comment_is_top":false,"comment_ctime":1576332277,"is_pvip":false,"replies":[{"id":"61678","content":"不矛盾，长连接只是在连接层面节约了成本，每次的请求还是没有携带任何客户端的信息，服务器仍然不记录状态，每次请求都是独立的。","user_name":"作者回复","comment_id":161796,"uid":"1181974","ip_address":"","utype":1,"ctime":1576459627,"user_name_real":"chrono"}],"discussion_count":3,"race_medal":0,"score":"44526005237","product_id":100029001,"comment_content":"HTTP的长连接和无状态不矛盾么","like_count":11,"discussions":[{"author":{"id":1243584,"avatar":"https://static001.geekbang.org/account/avatar/00/12/f9/c0/20b4a205.jpg","nickname":"啊哈哈","note":"","ucode":"A8542946C03707","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":530734,"discussion_content":"长链接实际上是TCP通过三次握手建立连接后不会断开，每次http传输逗服用这一个TCP连接","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1637136153,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1105387,"avatar":"https://static001.geekbang.org/account/avatar/00/10/dd/eb/80f9d212.jpg","nickname":"lttzzlll","note":"","ucode":"FA160F7C02ABAA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":337467,"discussion_content":"HTTP的长连接是为了尽可能复用一个TCP连接，因为每建立/销毁一个TCP连接都需要 3次握手，4次挥手, 开销比较大。","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1608912250,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477865,"discussion_content":"不矛盾，长连接只是在连接层面节约了成本，每次的请求还是没有携带任何客户端的信息，服务器仍然不记录状态，每次请求都是独立的。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1576459627,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":126460,"user_name":"渴望做梦","can_delete":false,"product_type":"c1","uid":1398219,"ip_address":"","ucode":"9EB47530A69C91","user_header":"https://static001.geekbang.org/account/avatar/00/15/55/cb/1efe460a.jpg","comment_is_top":false,"comment_ctime":1566388568,"is_pvip":false,"replies":[{"id":"46802","content":"是的，http这种请求-应答模式就是这样，必须第一个有回应后才能处理下一个。","user_name":"作者回复","comment_id":126460,"uid":"1181974","ip_address":"","utype":1,"ctime":1566430968,"user_name_real":"chrono"}],"discussion_count":2,"race_medal":0,"score":"35926126936","product_id":100029001,"comment_content":"老师，这个顺序发包和顺序收包不是很理解，是是指第一个发送的请求一定会排在第一位处理吗？","like_count":9,"discussions":[{"author":{"id":2406841,"avatar":"https://static001.geekbang.org/account/avatar/00/24/b9/b9/9e4d7aa4.jpg","nickname":"乘风破浪","note":"","ucode":"937AF15F3FEBDC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":348145,"discussion_content":"在HTTP/1.1中客户端发送请求，服务器回应客户端的请求，客户端发送的每一个请求，需要等待服务器回应后才能发送下一个请求，即所有请求在一个FIFO队列里，这样就会造成队头阻塞。即如果队头的请求响应时间太长，会影响后面的请求的处理。","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1612441101,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463999,"discussion_content":"是的，http这种请求-应答模式就是这样，必须第一个有回应后才能处理下一个。","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1566430968,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":107351,"user_name":"火车日记","can_delete":false,"product_type":"c1","uid":1480419,"ip_address":"","ucode":"62C57DFA6CDF74","user_header":"https://static001.geekbang.org/account/avatar/00/16/96/e3/dd40ec58.jpg","comment_is_top":false,"comment_ctime":1561517698,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"35921256066","product_id":100029001,"comment_content":"一个能打的都没有!!<br>缺点:明文传输","like_count":8},{"had_liked":false,"id":107319,"user_name":"彩色的沙漠","can_delete":false,"product_type":"c1","uid":1116183,"ip_address":"","ucode":"19A0975A5E69EA","user_header":"https://static001.geekbang.org/account/avatar/00/11/08/17/e63e50f3.jpg","comment_is_top":false,"comment_ctime":1561514084,"is_pvip":true,"replies":[{"id":"38858","content":"是的，所以就出现了WebSocket。","user_name":"作者回复","comment_id":107319,"uid":"1181974","ip_address":"","utype":1,"ctime":1561524101,"user_name_real":"chrono"}],"discussion_count":4,"race_medal":0,"score":"23036350564","product_id":100029001,"comment_content":"请求应答模式也就注定了HTTP不适合用于IM场景？","like_count":5,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455464,"discussion_content":"是的，所以就出现了WebSocket。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561524101,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2608728,"avatar":"https://static001.geekbang.org/account/avatar/00/27/ce/58/71ed845f.jpg","nickname":"Dexter","note":"","ucode":"909CABC4AC4AC9","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":558111,"discussion_content":"IM场景具体是指？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1648096151,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1265881,"avatar":"https://static001.geekbang.org/account/avatar/00/13/50/d9/18acc2ee.jpg","nickname":"星辰大海","note":"","ucode":"6A1134533337FA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2608728,"avatar":"https://static001.geekbang.org/account/avatar/00/27/ce/58/71ed845f.jpg","nickname":"Dexter","note":"","ucode":"909CABC4AC4AC9","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":558379,"discussion_content":"IM即时通信 例如微信聊天","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1648265147,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":558111,"ip_address":""},"score":558379,"extra":""}]},{"author":{"id":1243584,"avatar":"https://static001.geekbang.org/account/avatar/00/12/f9/c0/20b4a205.jpg","nickname":"啊哈哈","note":"","ucode":"A8542946C03707","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":530735,"discussion_content":"webscoket是交互式的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637136171,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":252031,"user_name":"哈德韦","can_delete":false,"product_type":"c1","uid":1637085,"ip_address":"","ucode":"E7C9B3D087D2D9","user_header":"https://static001.geekbang.org/account/avatar/00/18/fa/dd/f640711f.jpg","comment_is_top":false,"comment_ctime":1602067707,"is_pvip":false,"replies":[{"id":"92099","content":"可能是我说的不是太准确，引起误会了。tcp是保证送达的，用“尽量”也许和udp有点混淆了，抱歉。","user_name":"作者回复","comment_id":252031,"uid":"1181974","ip_address":"","utype":1,"ctime":1602074370,"user_name_real":"罗剑锋"}],"discussion_count":1,"race_medal":0,"score":"18781936891","product_id":100029001,"comment_content":"尽量送达不是UDP的特征吗？只送出去不确认的，而TCP是保证送达，收不到确认会重试的，如果实在不行就会报错。HTTP基于它，应该也是保证送达吧？","like_count":5,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":506696,"discussion_content":"可能是我说的不是太准确，引起误会了。tcp是保证送达的，用“尽量”也许和udp有点混淆了，抱歉。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602074370,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":216664,"user_name":"有米","can_delete":false,"product_type":"c1","uid":1005042,"ip_address":"","ucode":"C9A10B7A67BC12","user_header":"https://static001.geekbang.org/account/avatar/00/0f/55/f2/ba68d931.jpg","comment_is_top":false,"comment_ctime":1589305950,"is_pvip":false,"replies":[{"id":"80159","content":"对，但可靠性99.9%和99.999%还是有差距的，所以需要根据具体场合选用恰当的产品。","user_name":"作者回复","comment_id":216664,"uid":"1181974","ip_address":"","utype":1,"ctime":1589331061,"user_name_real":"chrono"}],"discussion_count":1,"race_medal":0,"score":"18769175134","product_id":100029001,"comment_content":" 即使是当红MQ也没人敢打包票100%不丢","like_count":5,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":494903,"discussion_content":"对，但可靠性99.9%和99.999%还是有差距的，所以需要根据具体场合选用恰当的产品。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589331061,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":226284,"user_name":"潇潇雨歇","can_delete":false,"product_type":"c1","uid":1251429,"ip_address":"","ucode":"4BD52BF0F0A084","user_header":"https://static001.geekbang.org/account/avatar/00/13/18/65/35361f02.jpg","comment_is_top":false,"comment_ctime":1592021617,"is_pvip":false,"replies":[{"id":"83337","content":"学习得很努力啊。","user_name":"作者回复","comment_id":226284,"uid":"1181974","ip_address":"","utype":1,"ctime":1592024403,"user_name_real":"罗剑锋"}],"discussion_count":2,"race_medal":0,"score":"10181956209","product_id":100029001,"comment_content":"1、无状态是把双刃剑，设计成无状态能够减少资源的使用。但是如果需要保存用户身份，那么无状态就是缺点了。<br>2、可靠传输和请求应答吧，能确定成功发起请求和收到响应很重要。这也是平常开发的基础","like_count":3,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":498176,"discussion_content":"学习得很努力啊。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592024403,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1251429,"avatar":"https://static001.geekbang.org/account/avatar/00/13/18/65/35361f02.jpg","nickname":"潇潇雨歇","note":"","ucode":"4BD52BF0F0A084","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":282597,"discussion_content":"最近可能迷上了http","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592024514,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":159123,"user_name":"ddq432","can_delete":false,"product_type":"c1","uid":1131034,"ip_address":"","ucode":"C84F5727BA37B5","user_header":"https://static001.geekbang.org/account/avatar/00/11/42/1a/de91a790.jpg","comment_is_top":false,"comment_ctime":1575542339,"is_pvip":false,"replies":[{"id":"60897","content":"这个属于tcp协议要解决的问题，如果没有收到ack，客户端就认为是丢包，启用重发机制，再发一次。","user_name":"作者回复","comment_id":159123,"uid":"1181974","ip_address":"","utype":1,"ctime":1575594497,"user_name_real":"chrono"}],"discussion_count":3,"race_medal":0,"score":"10165476931","product_id":100029001,"comment_content":"我有个问题，http 用 tcp 来尽量保持可靠请求，客户端发送一次请求服务，服务端会发送一个tcp的ack，告诉客户端我收到消息了，假如说这次发送的tcp下的ack信息，客户端没收到，会怎么办","like_count":2,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476957,"discussion_content":"这个属于tcp协议要解决的问题，如果没有收到ack，客户端就认为是丢包，启用重发机制，再发一次。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575594497,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":2,"child_discussions":[{"author":{"id":1243584,"avatar":"https://static001.geekbang.org/account/avatar/00/12/f9/c0/20b4a205.jpg","nickname":"啊哈哈","note":"","ucode":"A8542946C03707","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":530736,"discussion_content":"那多长时间没收到就认为是丢包呢？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637136279,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":476957,"ip_address":""},"score":530736,"extra":"{\"user_type\":1}"},{"author":{"id":1951999,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/c8/ff/bd602ee9.jpg","nickname":"Luke","note":"","ucode":"72202F5FB5A896","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1243584,"avatar":"https://static001.geekbang.org/account/avatar/00/12/f9/c0/20b4a205.jpg","nickname":"啊哈哈","note":"","ucode":"A8542946C03707","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583002,"discussion_content":"可以去查询tcp文档，我记得在不同点计算机系统中，这个时间段确认方式不同","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659871389,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":530736,"ip_address":"浙江"},"score":583002,"extra":""}]}]},{"had_liked":false,"id":107224,"user_name":"一粟","can_delete":false,"product_type":"c1","uid":1058773,"ip_address":"","ucode":"2EE966F3C36B5F","user_header":"https://static001.geekbang.org/account/avatar/00/10/27/d5/0fd21753.jpg","comment_is_top":false,"comment_ctime":1561495344,"is_pvip":false,"replies":[{"id":"38790","content":"√","user_name":"作者回复","comment_id":107224,"uid":"1181974","ip_address":"","utype":1,"ctime":1561510530,"user_name_real":"chrono"}],"discussion_count":2,"race_medal":0,"score":"10151429936","product_id":100029001,"comment_content":"终于明白为何是HTTP一统天下了，扬长避短灵活使用才是王道。","like_count":3,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455427,"discussion_content":"√","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561510530,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1264287,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/9f/b92a9139.jpg","nickname":"hj","note":"","ucode":"6ED34286AC30FA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":371,"discussion_content":"灵活可扩展，优点是让原始的HTTP协议足够简单，缺点是越来越多的扩展点增加了应用的复杂度；\n可靠传输，优点是相对可靠和数据的顺序性，缺点是性能不佳；\n应用层协议，优点是万能，缺点是性能；\n请求-应答，优点是模式通用覆盖大部分的应用场景，缺点是不能双向交互；\n无状态，优点是简化原始HTTP协议，缺点是实际应用中需要状态数据，需要曲线救国。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1561513197,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":223370,"user_name":"Tintin","can_delete":false,"product_type":"c1","uid":1230604,"ip_address":"","ucode":"53936A3C6A6D20","user_header":"https://static001.geekbang.org/account/avatar/00/12/c7/0c/8e7f1a85.jpg","comment_is_top":false,"comment_ctime":1591074824,"is_pvip":false,"replies":[{"id":"82322","content":"说的很好。","user_name":"作者回复","comment_id":223370,"uid":"1181974","ip_address":"","utype":1,"ctime":1591081970,"user_name_real":"罗剑锋"}],"discussion_count":2,"race_medal":0,"score":"5886042120","product_id":100029001,"comment_content":"1. 优点：可扩展（更能适应不确定的环境）、可靠（在可靠比时效性重要的场景下）；缺点：可靠（在时效性比可靠更重要的场景下）、请求应答模式（服务器无法主动推送数据给浏览器）、无状态","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497110,"discussion_content":"说的很好。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591081970,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2608728,"avatar":"https://static001.geekbang.org/account/avatar/00/27/ce/58/71ed845f.jpg","nickname":"Dexter","note":"","ucode":"909CABC4AC4AC9","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":558113,"discussion_content":"服务器无法主动推送数据给客户端","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1648096238,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":188920,"user_name":"凉人。","can_delete":false,"product_type":"c1","uid":1659177,"ip_address":"","ucode":"4DB16004A62015","user_header":"https://static001.geekbang.org/account/avatar/00/19/51/29/24739c58.jpg","comment_is_top":false,"comment_ctime":1584434146,"is_pvip":false,"replies":[{"id":"72991","content":"cookie只是用来携带kv数据，本身不具有特定含义，可以做任何事情，所以很适合用来标记用户身份，但这只是它的用途之一。","user_name":"作者回复","comment_id":188920,"uid":"1181974","ip_address":"","utype":1,"ctime":1584494069,"user_name_real":"chrono"}],"discussion_count":2,"race_medal":0,"score":"5879401442","product_id":100029001,"comment_content":"cookie应该算是一种上下文么？<br> 这里有点想不通","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":487565,"discussion_content":"cookie只是用来携带kv数据，本身不具有特定含义，可以做任何事情，所以很适合用来标记用户身份，但这只是它的用途之一。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584494069,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1659177,"avatar":"https://static001.geekbang.org/account/avatar/00/19/51/29/24739c58.jpg","nickname":"凉人。","note":"","ucode":"4DB16004A62015","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":208953,"discussion_content":"那cookie应该算http状态的一方面么？我主要是纠结于此。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584594844,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":156724,"user_name":"李鑫磊","can_delete":false,"product_type":"c1","uid":1101615,"ip_address":"","ucode":"D06517CFCEEE00","user_header":"https://static001.geekbang.org/account/avatar/00/10/cf/2f/4f89f22a.jpg","comment_is_top":false,"comment_ctime":1574942446,"is_pvip":false,"replies":[{"id":"60187","content":"在开头几讲简单介绍了这些概念，要搞清楚的是协议、调用接口、设计风格&#47;规范这些更大范围的概念。","user_name":"作者回复","comment_id":156724,"uid":"1181974","ip_address":"","utype":1,"ctime":1574988755,"user_name_real":"chrono"}],"discussion_count":1,"race_medal":0,"score":"5869909742","product_id":100029001,"comment_content":"老师，特别困惑的是：HTTP、WebService、RPC、RESTful、gRPC、WebSocket 这几个概念之间的联系和区别，纠结...","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476213,"discussion_content":"在开头几讲简单介绍了这些概念，要搞清楚的是协议、调用接口、设计风格/规范这些更大范围的概念。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574988755,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":124713,"user_name":"Cris","can_delete":false,"product_type":"c1","uid":1473520,"ip_address":"","ucode":"F8A287134F1078","user_header":"https://static001.geekbang.org/account/avatar/00/16/7b/f0/269139d5.jpg","comment_is_top":false,"comment_ctime":1565949850,"is_pvip":false,"replies":[{"id":"46177","content":"WebSocket属于后来的“小字辈”了，而且应用范围比http还是要差很多，不过应该不算是“垃圾”了，笑。","user_name":"作者回复","comment_id":124713,"uid":"1181974","ip_address":"","utype":1,"ctime":1566260674,"user_name_real":"chrono"}],"discussion_count":1,"race_medal":0,"score":"5860917146","product_id":100029001,"comment_content":"HTTP 完全可以用开玩笑的口吻说：“不要误会，我不是针对 FTP，我是说在座的应用层各位，都是垃圾。”  websocket表示不服","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463292,"discussion_content":"WebSocket属于后来的“小字辈”了，而且应用范围比http还是要差很多，不过应该不算是“垃圾”了，笑。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566260674,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":110394,"user_name":"响雨","can_delete":false,"product_type":"c1","uid":1581705,"ip_address":"","ucode":"C5FB3A3BC68F92","user_header":"https://static001.geekbang.org/account/avatar/00/18/22/89/73397ccb.jpg","comment_is_top":false,"comment_ctime":1562248061,"is_pvip":false,"replies":[{"id":"40160","content":"对","user_name":"作者回复","comment_id":110394,"uid":"1181974","ip_address":"","utype":1,"ctime":1562288308,"user_name_real":"chrono"}],"discussion_count":1,"race_medal":0,"score":"5857215357","product_id":100029001,"comment_content":"优点：灵活拓展性强<br>缺点：明文传输<br>因时而异：无状态","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456856,"discussion_content":"对","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562288308,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":107354,"user_name":"六维","can_delete":false,"product_type":"c1","uid":1022887,"ip_address":"","ucode":"EB1C15AC06A8DF","user_header":"https://static001.geekbang.org/account/avatar/00/0f/9b/a7/440aff07.jpg","comment_is_top":false,"comment_ctime":1561518106,"is_pvip":false,"replies":[{"id":"38859","content":"说的很好。","user_name":"作者回复","comment_id":107354,"uid":"1181974","ip_address":"","utype":1,"ctime":1561524126,"user_name_real":"chrono"}],"discussion_count":1,"race_medal":0,"score":"5856485402","product_id":100029001,"comment_content":"1、灵活可扩展是优点，促进其发展。 2和3也是优点。 4、是优点也是缺点，缺点是应答方不能做到主动反馈。 5、即是优点也是缺点，主要是看适用的场景，无状态，请求时需要携带更多的数据。","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455482,"discussion_content":"说的很好。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561524126,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":338784,"user_name":"阳树","can_delete":false,"product_type":"c1","uid":2743628,"ip_address":"","ucode":"859A4A82B48C74","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/u8g8UoUaBZTGpDgAQKDwLxS2ibE0GfAPED5r0Dnm4RsT22HcWRNE79RFeF9bUP3xQfKa9jiaGUzw0icxK836NvicQQ/132","comment_is_top":false,"comment_ctime":1647738592,"is_pvip":false,"replies":[{"id":"124065","content":"great。","user_name":"作者回复","user_name_real":"编辑","uid":"1181974","ctime":1648081057,"ip_address":"","comment_id":338784,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1647738592","product_id":100029001,"comment_content":"优点与缺点并不绝对，比如我不需要缓存时，无状态就是一个优点，而当我需要缓存时，无状态就是一个缺点。还有的应该算是优点，比如说灵活可扩展，可以添加一些方法，还有HTTP是可靠传输协议，会努力保证数据传输的“可靠”，以及运用了请求应答模式，一接一收。以及HTTP是应用层的协议，能够暴打其他应用层协议，因为它几乎可以传输所有数据类型。","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":558059,"discussion_content":"great。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1648081057,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":317356,"user_name":"功夫熊猫","can_delete":false,"product_type":"c1","uid":2732243,"ip_address":"","ucode":"D124F4FA4E816F","user_header":"https://static001.geekbang.org/account/avatar/00/29/b0/d3/200e82ff.jpg","comment_is_top":false,"comment_ctime":1634751824,"is_pvip":true,"replies":[{"id":"115035","content":"这个是由http的request-response特性决定，不适合双向实时通信，选择websocket非常合理。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1634806423,"ip_address":"","comment_id":317356,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1634751824","product_id":100029001,"comment_content":"其实http目前我最大的问题，我需要持续的后端里获取数据，所有就必须写个用promise和axios写个轮训函数，这个对我来说很麻烦，所以我最后选择了websocket的协议。","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":528784,"discussion_content":"这个是由http的request-response特性决定，不适合双向实时通信，选择websocket非常合理。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634806423,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":297745,"user_name":"在水一方","can_delete":false,"product_type":"c1","uid":1414215,"ip_address":"","ucode":"D8371EFEBED2C7","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKiboeh23vhCNruZ7odUjROiac6N9fx0VWAE6zBNRxJIJFZspSUTQdgu9ajg4F0fAZgdk1vBsicnib3QQ/132","comment_is_top":false,"comment_ctime":1623758322,"is_pvip":false,"replies":[{"id":"108129","content":"Microsoft Visio","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1623806367,"ip_address":"","comment_id":297745,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1623758322","product_id":100029001,"comment_content":"老师，课程中的插图用什么软件画的？","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":521927,"discussion_content":"Microsoft Visio","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623806367,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":290338,"user_name":"dog_brother","can_delete":false,"product_type":"c1","uid":1619597,"ip_address":"","ucode":"9F64D3C6D815FB","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83er6OV33jHia3U9LYlZEx2HrpsELeh3KMlqFiaKpSAaaZeBttXRAVvDXUgcufpqJ60bJWGYGNpT7752w/132","comment_is_top":false,"comment_ctime":1619508638,"is_pvip":true,"replies":[{"id":"105260","content":"这个说法表述得不是太准确，http的无状态是指每一个请求都是独立的，不携带状态信息（当然加上cookie除外）。<br><br>这个说法前半句对，后面实际上表述的是http的短连接，不是无状态。<br><br>http协议规定请求响应必须是一来一回，都是顺序处理的，长连接只是摊平了建连断连的成本，其他的没有变化。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1619573916,"ip_address":"","comment_id":290338,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1619508638","product_id":100029001,"comment_content":"老师好，在隔壁课程看到这么一个知识点“HTTP 协议属于无状态协议，客户端无法对请求和响应进行关联，每次请求都需要重新建立连接，响应完成后再关闭连接“ 老师您对这句话怎么理解啊？<br>我还有个疑问是，http长连接下，如何将每次请求和响应对应起来的呢？","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":519177,"discussion_content":"这个说法表述得不是太准确，http的无状态是指每一个请求都是独立的，不携带状态信息（当然加上cookie除外）。\n\n这个说法前半句对，后面实际上表述的是http的短连接，不是无状态。\n\nhttp协议规定请求响应必须是一来一回，都是顺序处理的，长连接只是摊平了建连断连的成本，其他的没有变化。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619573916,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":289869,"user_name":"huanshui@smile","can_delete":false,"product_type":"c1","uid":2141878,"ip_address":"","ucode":"0A334A3E20CA46","user_header":"https://static001.geekbang.org/account/avatar/00/20/ae/b6/fc1c61f8.jpg","comment_is_top":false,"comment_ctime":1619238875,"is_pvip":false,"replies":[{"id":"105142","content":"great。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1619312197,"ip_address":"","comment_id":289869,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1619238875","product_id":100029001,"comment_content":"这些特点是缺点还是优点都要带入到合适的场景下去分析，抛开场景单独去讨论就是耍流氓，比如http的无状态，如果放在一个需要登录的网站，这就是一个致命的缺点，服务器不能记录当前用户登录的信息，每次请求都需要用户重新登录，用户体验极差。反之则亦然，有无状态影响不大。","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":519038,"discussion_content":"great。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619312197,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":289364,"user_name":"Leolee","can_delete":false,"product_type":"c1","uid":1928428,"ip_address":"","ucode":"2EC31B0AE5B03D","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/8SdpYbicwXVXt0fIN7L0f2TSGIScQIhWXT7vTze9GHBsjTvDyyQW9KEPsKBpRNs4anV61oF59BZqHf586b3o4ibw/132","comment_is_top":false,"comment_ctime":1618989486,"is_pvip":false,"replies":[{"id":"105023","content":"其实http到处都是，比如上网看视频，课程里提供的GitHub项目就是一个很好的实践机会，实际操作看看，再抓包，有了初步的认识之后，再结合自己的工作，看看怎么进一步地研究。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1619056192,"ip_address":"","comment_id":289364,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1618989486","product_id":100029001,"comment_content":"作业:<br>1、HTTP最大的优点应该是灵活可扩展，需要用到的时候可以自己制定，即使标准里没有的也可以改。所以优缺点是看使用场景的，没有绝对的优劣；<br>2、还是个小白，没有任何项目经验，也没应用过HTTP，所以这题真不知道怎么回答。<br><br>再次感谢老师每次的鼓励！谢谢！<br><br><br>HTTP特点：<br><br>灵活可扩展<br>只规定了报文的基本格式，却没对报文的各个组成部分作严格的语法语义先知，可以由开发者任意定制。这也是HTTP协议三十多年来屹立不倒的根基。<br><br>可靠传输<br>基于TCP&#47;IP的HTTP协议也继承了TCP&#47;IP“可靠”的特性，能够在请求方和应答方之间“可靠”地传输数据；它的具体做法与TCP&#47;UDP差不多，都是对传输的数据（entity）做一层包装加一个头，然后调用Socket API，通过TCP&#47;IP协议栈发送或者接收。<br>可靠的正确含义就是：“承诺”会在下层动用多种手段“尽量”保证数据的完整送达。但遇上光纤段了的极端情况，神仙也不能发送成功。可靠不代表保证100%传输成功。<br><br>应用层协议<br>HTTP可以传输几乎任何数据，只要不苛求性能。它能凭借可携带任意头字段和实体数据的报文结构，以及连接控制、缓存代理等方便一用的特性，技压群雄。比如FTP只能传输文件、SMTP只能发送邮件、SSH只能远程登录，做不到传输通用数据！而HTTP却可以！<br><br>请求-应答模式<br>请求应答模式是HTTP协议最根本的通信模型，也即一发一收、有来有去。这个模式明确了通信双方的定位，请求方先主动发起连接和请求，应答方被动回复，如果没有请求就没有应答动作。<br>虽然服务器经常作为应答方存在，但如果它勇作代理连接后端服务器，那么它就同时兼具请求方和应答方了。<br>该模式也契合传统的C&#47;S（Client&#47;Server）系统架构，请求方是Client，应答方是Server。由于客户端笨重，慢慢互联网就发展了B&#47;S（Browser&#47;Server）架构，就是以轻量级的浏览器替换掉客户端。<br><br>无状态<br>TCP是有状态，TCP一开始处于CLOSER状态，连接成功后是ESTABLISHED状态，断开连接后是FIN-WAIT状态，最后又是CLOSED状态。维持这些状态需要TCP在内部用一些数据结构去维护。<br>无状态形象地说就是“没有记忆能力”，每次收发的报文都是互相独立的，没有任何联系，收发后也不要求保存任何信息，也就不会对客户端和服务器端产生任何影响。<br>虽然标准没有规定状态，也即无状态存在，但是可以灵活可扩展的HTTP完全可以打个补丁，增加状态。无状态很容易变成有状态，反过来就难了，这也是HTTP灵活性的体现。<br>这个无状态与响应头里的状态码是两个概念，不能混淆了。","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518892,"discussion_content":"其实http到处都是，比如上网看视频，课程里提供的GitHub项目就是一个很好的实践机会，实际操作看看，再抓包，有了初步的认识之后，再结合自己的工作，看看怎么进一步地研究。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619056192,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1928428,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/8SdpYbicwXVXt0fIN7L0f2TSGIScQIhWXT7vTze9GHBsjTvDyyQW9KEPsKBpRNs4anV61oF59BZqHf586b3o4ibw/132","nickname":"Leolee","note":"","ucode":"2EC31B0AE5B03D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":369534,"discussion_content":"好的，老师，我试试","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619068511,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":283546,"user_name":"Geek_Maggie","can_delete":false,"product_type":"c1","uid":1609708,"ip_address":"","ucode":"3B74088B2C7B93","user_header":"https://static001.geekbang.org/account/avatar/00/18/8f/ec/c30b45d4.jpg","comment_is_top":false,"comment_ctime":1615813537,"is_pvip":false,"replies":[{"id":"102880","content":"good","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1615853740,"ip_address":"","comment_id":283546,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1615813537","product_id":100029001,"comment_content":"【接上】不同的应用场合有不同的侧重方面，你觉得哪个特点对你来说是最重要的呢？<br>我做客户端开发的，对我而言可靠传输吧，如果一直丢失数据，或者收不到返回数据，这个请求-响应的回合可能就终止了，我得不到有用的信息，无法在客户端进行相应展示。","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":517070,"discussion_content":"good","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615853740,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":283545,"user_name":"Geek_Maggie","can_delete":false,"product_type":"c1","uid":1609708,"ip_address":"","ucode":"3B74088B2C7B93","user_header":"https://static001.geekbang.org/account/avatar/00/18/8f/ec/c30b45d4.jpg","comment_is_top":false,"comment_ctime":1615813395,"is_pvip":false,"replies":[{"id":"102879","content":"总结的很好。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1615853720,"ip_address":"","comment_id":283545,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1615813395","product_id":100029001,"comment_content":"就如同开头我讲的那样，你能说一下今天列出的这些 HTTP 的特点中哪些是优点，哪些是缺点吗？<br>优点和缺点不是绝对的<br>【http的可扩展性】<br>       优点：可以按照不同客户端的需求，定义不同的格式，body中可以传输多样的信息（文本、图片、页面、视频流媒体等等）<br>       缺点：暂时没有想到。<br>【http的可靠传输】<br>       优点：一定程度保障了数据的完整送达<br>       缺点：基于TCP三次握手建立连接，在一定程度上效率不如不可靠传输来的高<br>【http的应用层协议特性】<br>       优点：http协议支持多种应用，比 FTP、SSH 等更通用功能更多，可以说是一个多面手<br>       缺点：暂时没有想到，如果硬说有就是FTP、SSH等面临的漏洞及攻击风险，http网站都有可能遇上<br>【请求 - 应答模式】<br>       优点：符合传统的C&#47;S模式；不仅能让服务器则摈弃私有通信协议转而使用更广泛的 HTTP 协议，对客户端而言，浏览器也比传统的客户端也更轻量<br>       缺点：客户端请求-服务端应答模式，不适用于服务端给客户端主动推送消息的场景。如消息推送、服务端下发任务批量更新这样的。<br>【无状态】<br>       优点：对于一些无需记录上下文信息的场景中，这种方式是小而快的。<br>       缺点：不适用于一些长连接场景、需要记录客户端凭证的场景，如：在网银网页进行交易；在购物网站进行下单支付。<br>不同的应用场合有不同的侧重方面，你觉得哪个特点对你来说是最重要的呢？","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":517069,"discussion_content":"总结的很好。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615853720,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":282844,"user_name":"刘杰","can_delete":false,"product_type":"c1","uid":2460800,"ip_address":"","ucode":"5B3A55700D6063","user_header":"https://static001.geekbang.org/account/avatar/00/25/8c/80/7310baac.jpg","comment_is_top":false,"comment_ctime":1615435174,"is_pvip":false,"replies":[{"id":"102652","content":"说的很好，这些特点也正是HTTP能够统治互联网的根本原因。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1615445082,"ip_address":"","comment_id":282844,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1615435174","product_id":100029001,"comment_content":"1、优点：HTTP是灵活易拓展的、HTTP是应用层协议、HTTP是请求-应答通信模式、HTTP是可靠传输<br>既是优点也是缺点：HTTP是无状态的，优点是减少服务器压力，缺点是每一次都需要验证信息，不能一次验证多次传输<br>2、我觉得HTTP的可靠传输对于我们来说是最重要的，这样就可以保证数据如果传输过来，那么一定是完整的","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":516855,"discussion_content":"说的很好，这些特点也正是HTTP能够统治互联网的根本原因。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615445082,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":282150,"user_name":"silentyears","can_delete":false,"product_type":"c1","uid":1061748,"ip_address":"","ucode":"6E137BFEB874CA","user_header":"https://static001.geekbang.org/account/avatar/00/10/33/74/d9d143fa.jpg","comment_is_top":false,"comment_ctime":1615108051,"is_pvip":true,"replies":[{"id":"102442","content":"WebSocket与tcp一样，是全双工的，可以任意通信。而http&#47;2则功能很有限，使用的是协议里的流，不那么灵活。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1615115486,"ip_address":"","comment_id":282150,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1615108051","product_id":100029001,"comment_content":"请问老师，在服务端主动像客户端推送这点上，websocket和http2有什么区别，实现机制有啥不同，谢谢","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":516643,"discussion_content":"WebSocket与tcp一样，是全双工的，可以任意通信。而http/2则功能很有限，使用的是协议里的流，不那么灵活。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615115486,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":258938,"user_name":"少即是多","can_delete":false,"product_type":"c1","uid":1373366,"ip_address":"","ucode":"0BC98C7406BB24","user_header":"https://static001.geekbang.org/account/avatar/00/14/f4/b6/019bbb4d.jpg","comment_is_top":false,"comment_ctime":1604584995,"is_pvip":false,"replies":[{"id":"94261","content":"说的很好，但无状态在很多时候都是好事，比如现在的云计算，要求服务都最好实现无状态的，这样可以很容易地弹性扩容。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1604660737,"ip_address":"","comment_id":258938,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1604584995","product_id":100029001,"comment_content":"\t你能说一下今天列出的这些 HTTP 的特点中哪些是优点，哪些是缺点吗？<br>1，2，3是优点； 4&#47;5是缺点；因为如果服务器可以支持主动推送给客户端的话，客户端就可以避免一些效率很低的操作，比如说轮询；<br>\t不同的应用场合有不同的侧重方面，你觉得哪个特点对你来说是最重要的呢？<br>我觉得3，是最重要的。 如果没有：可传输任意数据这条。我们现在的互联网，可能还是一个文字的世界。<br>","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":508794,"discussion_content":"说的很好，但无状态在很多时候都是好事，比如现在的云计算，要求服务都最好实现无状态的，这样可以很容易地弹性扩容。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604660737,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":254187,"user_name":"J.Smile","can_delete":false,"product_type":"c1","uid":1336475,"ip_address":"","ucode":"C4D98DFDBF7584","user_header":"https://static001.geekbang.org/account/avatar/00/14/64/9b/0b578b08.jpg","comment_is_top":false,"comment_ctime":1603078607,"is_pvip":false,"replies":[{"id":"92800","content":"这个还是需要理解好tcp协议栈，还有网络传输的过程。<br><br>http是应用层，它的header是文本，而body是任意类型的数据，可以是文本、二进制，或者是应用的序列化数据。<br><br>到了tcp层，tcp看到的就是完全二进制数据了，没有什么序列化的问题， 就是一串字节流，它按照自己的规则发送出去就行了。<br><br>协议在传输的过程中不存在序列化的问题，因为报文本身就是数据。<br><br>可以再参考一下第5讲，如果不明白可以再问。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1603084986,"ip_address":"","comment_id":254187,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1603078607","product_id":100029001,"comment_content":"老师好，看了下边的留言发现也没人问过这个问题。<br>问题：http是明文的文本报文，TCP是二进制报文，这中间是由谁来决定序列化的呢？序列化的规则是固定的，还是由谁来决定的呢？希望老师解答，感谢。","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":507311,"discussion_content":"这个还是需要理解好tcp协议栈，还有网络传输的过程。\n\nhttp是应用层，它的header是文本，而body是任意类型的数据，可以是文本、二进制，或者是应用的序列化数据。\n\n到了tcp层，tcp看到的就是完全二进制数据了，没有什么序列化的问题， 就是一串字节流，它按照自己的规则发送出去就行了。\n\n协议在传输的过程中不存在序列化的问题，因为报文本身就是数据。\n\n可以再参考一下第5讲，如果不明白可以再问。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603084986,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1336475,"avatar":"https://static001.geekbang.org/account/avatar/00/14/64/9b/0b578b08.jpg","nickname":"J.Smile","note":"","ucode":"C4D98DFDBF7584","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":313769,"discussion_content":"好的，明白了老师，感谢！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603087841,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":231515,"user_name":"Geek_d59aa7","can_delete":false,"product_type":"c1","uid":1487937,"ip_address":"","ucode":"5850BAAD662E3C","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoTQdEVIg38BZJzTskicylttPwoiaWNwFxE8QXibrze3no9HiaGNvUibTou9zY1HMq2HrEQ1PZfDUFicBBw/132","comment_is_top":false,"comment_ctime":1593695438,"is_pvip":false,"replies":[{"id":"85493","content":"TCP就是有状态的协议，连接后是established状态，断开连接有time_wait状态。<br><br>而http协议里没有关于状态的任何表示，请求-响应就完了，服务器和客户端不需要维护一个“状态”就能通信。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1593737857,"ip_address":"","comment_id":231515,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1593695438","product_id":100029001,"comment_content":"老师，有状态的请求是个什么样子，能够举个具体的例子吗？","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":500328,"discussion_content":"TCP就是有状态的协议，连接后是established状态，断开连接有time_wait状态。\n\n而http协议里没有关于状态的任何表示，请求-响应就完了，服务器和客户端不需要维护一个“状态”就能通信。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593737857,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":226317,"user_name":"罗小黑","can_delete":false,"product_type":"c1","uid":1439398,"ip_address":"","ucode":"FC1663DB477A28","user_header":"https://static001.geekbang.org/account/avatar/00/15/f6/a6/6cb8e81b.jpg","comment_is_top":false,"comment_ctime":1592033931,"is_pvip":false,"replies":[{"id":"83365","content":"不是的，无状态是指在应用层面不记录用户的信息，前后两个请求没有关系，而tcp握手是下层的连接，可以用长连接来解决，参考后面的进阶篇。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1592091556,"ip_address":"","comment_id":226317,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1592033931","product_id":100029001,"comment_content":"HTTP 协议是无状态的这里有个困惑。青椒一下，无状态特性是否意味着，每一次的请求都要从tcp的3次握手再来一遍？","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":498190,"discussion_content":"不是的，无状态是指在应用层面不记录用户的信息，前后两个请求没有关系，而tcp握手是下层的连接，可以用长连接来解决，参考后面的进阶篇。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592091556,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1439398,"avatar":"https://static001.geekbang.org/account/avatar/00/15/f6/a6/6cb8e81b.jpg","nickname":"罗小黑","note":"","ucode":"FC1663DB477A28","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":286461,"discussion_content":"酱紫，谢谢老师","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593180592,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":225836,"user_name":"流苏","can_delete":false,"product_type":"c1","uid":1185733,"ip_address":"","ucode":"A20760352E9CB3","user_header":"https://static001.geekbang.org/account/avatar/00/12/17/c5/d405b312.jpg","comment_is_top":false,"comment_ctime":1591869285,"is_pvip":false,"replies":[{"id":"83200","content":"哈哈，这好像已经成了这节课的一个梗了。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1591879422,"ip_address":"","comment_id":225836,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1591869285","product_id":100029001,"comment_content":"不要误会，我不是针对 FTP，我是说在座的应用层各位，都是垃圾。","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":498012,"discussion_content":"哈哈，这好像已经成了这节课的一个梗了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591879422,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":225661,"user_name":"Maske","can_delete":false,"product_type":"c1","uid":1696847,"ip_address":"","ucode":"A19BB41A47E852","user_header":"https://static001.geekbang.org/account/avatar/00/19/e4/4f/df6d810d.jpg","comment_is_top":false,"comment_ctime":1591807136,"is_pvip":true,"replies":[{"id":"83149","content":"说的很好，继续努力吧。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1591837885,"ip_address":"","comment_id":225661,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1591807136","product_id":100029001,"comment_content":"1.前3个都是优点，对于第4点，HTTP2增加了服务器主动推送资源到客户端，弥补了只能主动请求才可能获得资源的缺陷；第5点，cookie的存在也增加了http的状态性；<br>2.第2 ，3最重要。个人认为，对于web应用来说，资源的可靠传输和传输资源的多样性是基础。","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497933,"discussion_content":"说的很好，继续努力吧。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591837885,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":218932,"user_name":"do it","can_delete":false,"product_type":"c1","uid":1309911,"ip_address":"","ucode":"E0753912E8F2AF","user_header":"https://static001.geekbang.org/account/avatar/00/13/fc/d7/b102034a.jpg","comment_is_top":false,"comment_ctime":1589899957,"is_pvip":false,"replies":[{"id":"80904","content":"good ","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1589931249,"ip_address":"","comment_id":218932,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1589899957","product_id":100029001,"comment_content":"http特点<br>1、灵活可拓展<br>2、是基于tcp&#47;ip的可靠传输<br>3、应用层协议<br>4、发送—应答模式<br>5、无状态","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":495628,"discussion_content":"good ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589931249,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157623,"user_name":"夏目","can_delete":false,"product_type":"c1","uid":1212750,"ip_address":"","ucode":"67C075A01CF4D2","user_header":"https://static001.geekbang.org/account/avatar/00/12/81/4e/d71092f4.jpg","comment_is_top":false,"comment_ctime":1575214858,"is_pvip":false,"replies":[{"id":"60447","content":"这个是最重要的优点。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1575248434,"ip_address":"","comment_id":157623,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1575214858","product_id":100029001,"comment_content":"优点：灵活可扩展，其他几个都要看实际场景吧。","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476485,"discussion_content":"这个是最重要的优点。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575248434,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":123633,"user_name":"Geek_steven_wang","can_delete":false,"product_type":"c1","uid":1477120,"ip_address":"","ucode":"8CC8F4C9726191","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI8mFt5wSkia31qc8paRg2uPSB6AuEBDricrSxvFBuTpP3NnnflekpJ7wqvN0nRrJyu7zVbzd7Lwjxw/132","comment_is_top":false,"comment_ctime":1565736857,"is_pvip":false,"replies":[{"id":"45333","content":"总结的不错。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1565744066,"ip_address":"","comment_id":123633,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1565736857","product_id":100029001,"comment_content":"HTTP 是灵活可扩展的，可以任意添加头字段实现任意功能；可扩展是优点，但不严谨也是缺点，就看我们更看中那方面。<br><br>HTTP 是可靠传输协议，基于 TCP&#47;IP 协议“尽量”保证数据的送达；算是优点。<br><br>HTTP 使用了请求 - 应答模式，客户端主动发起请求，服务器被动回复请求；中性，性能稍微弱小和长链接比。<br>HTTP 本质上是无状态的，每个请求都是互相独立、毫无关联的，协议不要求客户端或服务器记录请求相关的信息。扩展方面是优势，但上下文关联需要额额外处理，是弱势。","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462753,"discussion_content":"总结的不错。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565744066,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122725,"user_name":"ly","can_delete":false,"product_type":"c1","uid":1221628,"ip_address":"","ucode":"5E2B85252DABF3","user_header":"https://static001.geekbang.org/account/avatar/00/12/a3/fc/379387a4.jpg","comment_is_top":false,"comment_ctime":1565505799,"is_pvip":false,"replies":[{"id":"45068","content":"说的非常好，赞！","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1565571409,"ip_address":"","comment_id":122725,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1565505799","product_id":100029001,"comment_content":"一些个人的见解：<br>正如文章所说，由于http只规定了报文的基本格式，并没有严格的语法规则，例如header我们可以随便自定义、body可以随便传输什么数据，以后只要时代需要，就会存在无穷的可能（只要以后这些web服务器和客户端进行事先的约定就能实现）。<br>http的可靠性完全由下层的TCP协议承担，http无力承担可靠性。<br>http对数据的封装，其实就是在数据body的上面加了一个请求行和若干个header（CRLF分隔）。<br>http的万能，http可以传输任意的内容，比如文件内容（将FTP秒杀）；发送邮件（SMTP秒杀），其根本原因还是HTTP没有严格的要求必须传输什么样的数据，基本上没有限制其应用场景。<br>","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462376,"discussion_content":"说的非常好，赞！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565571409,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":121772,"user_name":"四月的紫色花","can_delete":false,"product_type":"c1","uid":1564190,"ip_address":"","ucode":"67863848E5D766","user_header":"https://static001.geekbang.org/account/avatar/00/17/de/1e/ca04d2c5.jpg","comment_is_top":false,"comment_ctime":1565222289,"is_pvip":false,"replies":[{"id":"44760","content":"说的很好。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1565241509,"ip_address":"","comment_id":121772,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1565222289","product_id":100029001,"comment_content":"1.就如同开头我讲的那样，你能说一下今天列出的这些 HTTP 的特点中哪些是优点，哪些是缺点吗？<br>优缺点是需要看在什么场景下的，整体来说，最大优点应该是它的灵活性可扩展，缺点是它传输的是明文，这个还是他大兄弟https出马来改进的，无状态这种东西应该分场景，大部分情况我觉得是缺点，比如我上网查一个资料的时候，可能需要不停的找，点击各种网页，无状态的话每次都记不住服务器的状态，需要重新连接，会使我的查询时间变长(虽然有时候我们并无感觉，这也可能是由于keepalive这个字段)<br>2.不同的应用场合有不同的侧重方面，你觉得哪个特点对你来说是最重要的呢？<br>灵活性对开发者来说应该挺重要；我作为一个使用者，可靠性相对重要一点，我不做web测试，具体的应用场合有哪些其实还不能准确的描述出来，在我眼里都是查询就完了😅😂😂<br>http特点，灵活可扩展，可靠尽量达，应用无限制，一收一发走天下，状态虽然记不住，但是咱有keepalive😀<br>","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461936,"discussion_content":"说的很好。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565241509,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":111145,"user_name":"Young","can_delete":false,"product_type":"c1","uid":1073443,"ip_address":"","ucode":"075C0BBE20FD8C","user_header":"https://static001.geekbang.org/account/avatar/00/10/61/23/30d134cf.jpg","comment_is_top":false,"comment_ctime":1562489272,"is_pvip":false,"replies":[{"id":"40528","content":"这两个应该是互相作用的，就像“鸡生蛋蛋生鸡”一样，没有一个绝对的起点。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1562548682,"ip_address":"","comment_id":111145,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1562489272","product_id":100029001,"comment_content":"老师，关于小贴士里“出于安全原因，绝大多数网站都封禁了80&#47;8080以外的端口号，只允许http协议穿透，这也是造成http流行的客观原因”，想问个比较stupid的问题：是因为80&#47;8080被放行，http才流行；还是因为http流行，80&#47;8080才被放行？  ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":457250,"discussion_content":"这两个应该是互相作用的，就像“鸡生蛋蛋生鸡”一样，没有一个绝对的起点。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562548682,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108014,"user_name":"彧豪","can_delete":false,"product_type":"c1","uid":1161233,"ip_address":"","ucode":"8979F477E0BC5B","user_header":"https://static001.geekbang.org/account/avatar/00/11/b8/11/26838646.jpg","comment_is_top":false,"comment_ctime":1561647775,"is_pvip":false,"replies":[{"id":"39225","content":"笑。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1561705045,"ip_address":"","comment_id":108014,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561647775","product_id":100029001,"comment_content":"都是垃圾，断水流大师兄的即视感，哈哈哈","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455788,"discussion_content":"笑。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561705045,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":107814,"user_name":"业余草","can_delete":false,"product_type":"c1","uid":1126538,"ip_address":"","ucode":"99BDC1E629049D","user_header":"https://static001.geekbang.org/account/avatar/00/11/30/8a/b5ca7286.jpg","comment_is_top":false,"comment_ctime":1561617044,"is_pvip":false,"replies":[{"id":"39001","content":"循序渐进，学业可成。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1561618392,"ip_address":"","comment_id":107814,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561617044","product_id":100029001,"comment_content":"未完待续，迫不及待的想看后面的文章","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455686,"discussion_content":"循序渐进，学业可成。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561618392,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":107665,"user_name":"-W.LI-","can_delete":false,"product_type":"c1","uid":1210699,"ip_address":"","ucode":"3556786538664F","user_header":"https://static001.geekbang.org/account/avatar/00/12/79/4b/740f91ca.jpg","comment_is_top":false,"comment_ctime":1561594828,"is_pvip":false,"replies":[{"id":"38939","content":"说的对。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1561596608,"ip_address":"","comment_id":107665,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1561594828","product_id":100029001,"comment_content":"灵活可扩张是最大优点吧。<br>可靠性比不上MQ，<br>传输数据虽然通用，可是文件传输时效率肯定比不是FTP，<br>无状态，在需要状态的地方通过扩展弥补不足。<br>请求应答，有些需要服务器主动推得需要用websocket协议。<br><br>","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455615,"discussion_content":"说的对。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561596608,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1188710,"avatar":"https://static001.geekbang.org/account/avatar/00/12/23/66/413c0bb5.jpg","nickname":"LDxy","note":"","ucode":"956432CE7B7761","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":320373,"discussion_content":"可是现在绝大多数软件下载网站，甚至各种网盘，传输文件走的都是http协议，基本没见过用ftp协议的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604332049,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":107640,"user_name":"业余爱好者","can_delete":false,"product_type":"c1","uid":1482915,"ip_address":"","ucode":"A890935A982988","user_header":"https://static001.geekbang.org/account/avatar/00/16/a0/a3/8da99bb0.jpg","comment_is_top":false,"comment_ctime":1561590640,"is_pvip":false,"replies":[{"id":"38940","content":"哈哈。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1561596616,"ip_address":"","comment_id":107640,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561590640","product_id":100029001,"comment_content":"读到&quot;都是垃圾&quot;那里，忍不住笑了😂","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455600,"discussion_content":"哈哈。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561596616,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":107311,"user_name":"mark","can_delete":false,"product_type":"c1","uid":1566124,"ip_address":"","ucode":"59EE6EED0F06DD","user_header":"https://static001.geekbang.org/account/avatar/00/17/e5/ac/6c87d5ee.jpg","comment_is_top":false,"comment_ctime":1561513647,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561513647","product_id":100029001,"comment_content":"可扩展，添加自定义头字段很重要，这样可以完成身份认证等任务，当然安全可靠也是很重要的，","like_count":0},{"had_liked":false,"id":107277,"user_name":"一步","can_delete":false,"product_type":"c1","uid":1005391,"ip_address":"","ucode":"73CEA468CE70C3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","comment_is_top":false,"comment_ctime":1561511156,"is_pvip":true,"replies":[{"id":"38860","content":"说的“加上一个头”指的就是http的报文头，只是它是明文的，和body连在一起，看上去好像是一个整体。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1561524205,"ip_address":"","comment_id":107277,"utype":1}],"discussion_count":1,"race_medal":1,"score":"1561511156","product_id":100029001,"comment_content":"它的具体做法与 TCP&#47;UDP 差不多，都是对实际传输的数据（entity）做了一层包装，加上一个头，然后调用 Socket API，通过 TCP&#47;IP 协议栈发送或者接收。<br><br>对于这段描述没有理解的,HTTP的可靠传输不是依赖TCP的机制吗？怎么还自己对数据进一步的封装呢？这个包装的头和调用socket api怎么用wireshark抓包看到的？麻烦老师解惑一下，或者给一些这方面的资料去看看","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455449,"discussion_content":"说的“加上一个头”指的就是http的报文头，只是它是明文的，和body连在一起，看上去好像是一个整体。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561524205,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}