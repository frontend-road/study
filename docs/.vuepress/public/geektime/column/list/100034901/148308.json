{"id":148308,"title":"20 | å­˜å‚¨å’Œå¹¶å‘ï¼šä¸‡äººç¾¤èŠç³»ç»Ÿè®¾è®¡ä¸­çš„å‡ ä¸ªéš¾ç‚¹","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯è¢æ­¦æ—ã€‚</p><p>æˆ‘åœ¨åœºæ™¯ç¯‡çš„ç¬¬10è®²<a href=\"https://time.geekbang.org/column/article/137000\">â€œè‡ªåŠ¨æ™ºèƒ½æ‰©ç¼©å®¹ï¼šç›´æ’­äº’åŠ¨åœºæ™¯ä¸­å³°å€¼æµé‡çš„åº”å¯¹â€</a>ä¸­ï¼Œåˆ†æäº†ç›´æ’­äº’åŠ¨åœºæ™¯ä¸­ï¼Œå®¹æ˜“å‡ºç°ç“¶é¢ˆçš„åŸå› ä¸»è¦åœ¨äºï¼šâ€œç›´æ’­é—´äººæ•°å¤šï¼ŒçŸ­æ—¶é—´å†…æ´»è·ƒåº¦é«˜ï¼Œæ¶ˆæ¯çš„æ‰‡å‡ºé‡å·¨å¤§â€ã€‚</p><p>é‚£ä¹ˆï¼Œå¯¹äºåŒæ ·å±äºå¤šäººäº’åŠ¨çš„ç¾¤èŠåœºæ™¯æ¥è¯´ï¼Œè™½ç„¶åœ¨â€œç¾¤äººæ•°â€ç­‰æ–¹é¢ä¸é«˜çƒ­åº¦çš„ç›´æ’­é—´ç›¸æ¯”è¦å°‘ä¸€äº›ï¼Œä½†ç”±äºåŒæ—¶å¼€æ’­çš„ç›´æ’­é—´æ•°é‡ä¸€èˆ¬ä¸ä¼šå¤ªå¤šï¼Œæ‰€ä»¥ç¾¤åœ¨æ•°é‡ä¸Šçš„æ€»ä½“é‡çº§ç›¸å¯¹è¦å¤§å¾—å¤šï¼Œå¯èƒ½ä¸Šç™¾ä¸‡ä¸ªç¾¤åŒæ—¶ä¼šæœ‰æ¶ˆæ¯æ”¶å‘çš„æƒ…å†µå‘ç”Ÿã€‚å› æ­¤ï¼Œåœ¨æ•´ä½“çš„æµé‡æ–¹é¢ï¼Œç¾¤èŠåœºæ™¯çš„æ¶ˆæ¯æ‰‡å‡ºä¹Ÿæ˜¯éå¸¸å¤§çš„ã€‚</p><p>è€Œä¸”å’Œç›´æ’­äº’åŠ¨åœºæ™¯ä¸å¤ªä¸€æ ·çš„æ˜¯ï¼Œç›´æ’­äº’åŠ¨ä¸­ï¼Œçƒ­åº¦é«˜çš„ç›´æ’­æ´»åŠ¨æŒç»­æ—¶é—´éƒ½æ¯”è¾ƒçŸ­ï¼Œå¯ä»¥å€ŸåŠ©ä¸Šäº‘ï¼Œæ¥è¿›è¡ŒçŸ­æ—¶é—´çš„æ‰©å®¹è§£å†³ï¼Œæˆæœ¬æ–¹é¢ä¹Ÿæ¯”è¾ƒå¯æ§ï¼›ä½†ç¾¤èŠçš„åœºæ™¯ï¼Œä¸€èˆ¬æ˜¯æµé‡æ€»é‡é«˜ï¼Œä½†æ˜¯å³°å€¼æ²¡æœ‰é‚£ä¹ˆæ˜æ˜¾ï¼Œé æ‰©å®¹è§£å†³ä¸å¤ªç°å®ã€‚å› æ­¤ï¼Œæ›´å¤šåœ°éœ€è¦æˆ‘ä»¬ä»æ¶æ„å’Œè®¾è®¡å±‚é¢æ¥ä¼˜åŒ–ã€‚</p><p>ä»Šå¤©ï¼Œæˆ‘ä»¬å°±ä¸€èµ·ä»æ¶æ„è®¾è®¡å±‚é¢ï¼Œæ¥èŠä¸€èŠä¸‡äººç¾¤èŠç³»ç»Ÿä¸­çš„å‡ ä¸ªéš¾ç‚¹ï¼Œä»¥åŠç›¸åº”çš„è§£å†³æ–¹æ¡ˆã€‚</p><h2>ç¾¤èŠæ¶ˆæ¯æ€ä¹ˆå­˜å‚¨ï¼Ÿ</h2><p>é¦–å…ˆæ¥çœ‹ä¸€çœ‹ç¾¤èŠæ¶ˆæ¯å­˜å‚¨çš„é—®é¢˜ã€‚</p><p>å…³äºç‚¹å¯¹ç‚¹èŠå¤©åœºæ™¯ï¼Œæˆ‘åœ¨ç¬¬2è¯¾<a href=\"https://time.geekbang.org/column/article/127978\">â€œæ¶ˆæ¯æ”¶å‘æ¶æ„ï¼šä¸ºä½ çš„Appï¼ŒåŠ ä¸Šå®æ—¶é€šä¿¡åŠŸèƒ½â€</a>ä¸­ä¹Ÿæœ‰è®²åˆ°ï¼šæˆ‘ä»¬åœ¨ä¸€æ¡æ¶ˆæ¯å‘å‡ºåï¼Œä¼šé’ˆå¯¹æ¶ˆæ¯æ”¶å‘çš„åŒæ–¹ï¼Œå„è‡ªå­˜å‚¨ä¸€æ¡ç´¢å¼•ï¼Œä¾¿äºåŒæ–¹è¿›è¡ŒæŸ¥è¯¢ã€åˆ é™¤ã€æ’¤å›ç­‰æ“ä½œã€‚</p><!-- [[[read_end]]] --><p>é‚£ä¹ˆï¼Œå¯¹äºç¾¤èŠæ¶ˆæ¯æ¥è¯´ï¼Œæ˜¯ä¸æ˜¯ä¹Ÿéœ€è¦ç»™ç¾¤é‡Œçš„æ¯ä¸€ä¸ªç”¨æˆ·ï¼Œéƒ½å­˜å‚¨ä¸€æ¡æ¶ˆæ¯ç´¢å¼•å‘¢ï¼Ÿ</p><p>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼šå¯¹äºç‚¹å¯¹ç‚¹èŠå¤©æ¥è¯´ï¼Œé’ˆå¯¹æ¶ˆæ¯æ”¶å‘åŒæ–¹è¿›è¡Œç”¨æˆ·ç»´åº¦çš„ç´¢å¼•å­˜å‚¨ï¼Œèƒ½ä¾¿äºåç»­ä¼šè¯ç»´åº¦çš„æ¶ˆæ¯æŸ¥çœ‹å’Œç¦»çº¿æ¶ˆæ¯çš„è·å–ï¼Œä½†å¦‚æœç¾¤èŠåœºæ™¯ä¹Ÿé‡‡å–è¿™ç§æ–¹å¼ï¼Œé‚£ä¹ˆå‡è®¾ä¸€ä¸ªç¾¤æœ‰ä¸€ä¸‡ä¸ªäººï¼Œå°±éœ€è¦é’ˆå¯¹è¿™ä¸€ä¸‡ä¸ªäººéƒ½è¿›è¡Œè¿™ä¸€æ¡æ¶ˆæ¯çš„å­˜å‚¨ï¼Œä¸€æ–¹é¢ä¼šä½¿å†™å…¥å¹¶å‘é‡å·¨å¤§ï¼Œå¦ä¸€æ–¹é¢ä¹Ÿå­˜åœ¨å­˜å‚¨æµªè´¹çš„é—®é¢˜ã€‚</p><p>æ‰€ä»¥ï¼Œä¸šç•Œé’ˆå¯¹ç¾¤èŠæ¶ˆæ¯çš„å­˜å‚¨ï¼Œä¸€èˆ¬é‡‡å–â€œè¯»æ‰©æ•£â€çš„æ–¹å¼ã€‚ä¹Ÿå°±æ˜¯ä¸€æ¡æ¶ˆæ¯åªé’ˆå¯¹ç¾¤ç»´åº¦å­˜å‚¨ä¸€æ¬¡ï¼Œç¾¤é‡Œç”¨æˆ·éœ€è¦æŸ¥è¯¢æ¶ˆæ¯æ—¶ï¼Œéƒ½é€šè¿‡è¿™ä¸ªç¾¤ç»´åº¦çš„æ¶ˆæ¯ç´¢å¼•æ¥è·å–ã€‚</p><p>ç”¨æˆ·æŸ¥è¯¢ç¾¤èŠæ¶ˆæ¯çš„å¤§æ¦‚æµç¨‹ï¼Œä½ å¯ä»¥å‚è€ƒä¸‹å›¾ï¼š<br>\n<img src=\"https://static001.geekbang.org/resource/image/90/4e/90d8e743b86a2db8474cc00a7cd2d14e.png?wh=640*440\" alt=\"\"></p><p>ç³»ç»Ÿå…ˆæŸ¥è¯¢è¿™ä¸ªç”¨æˆ·åŠ å…¥çš„æ‰€æœ‰ç¾¤ï¼Œæ ¹æ®è¿™äº›ç¾¤çš„æœ€æ–°ä¸€æ¡æ¶ˆæ¯çš„IDï¼ˆæ¶ˆæ¯IDä¸æ—¶é—´ç›¸å…³ï¼‰ï¼Œæˆ–è€…æœ€æ–°ä¸€æ¡æ¶ˆæ¯çš„äº§ç”Ÿæ—¶é—´ï¼Œæ¥è¿›è¡Œâ€œæœ€è¿‘è”ç³»äººâ€ç»´åº¦çš„æ’åºï¼Œå†æ ¹æ®è¿™äº›ç¾¤IDè·å–æ¯ä¸ªç¾¤ç»´åº¦å­˜å‚¨çš„æ¶ˆæ¯ã€‚</p><h3>æ€ä¹ˆä¿è¯æ–°åŠ å…¥ç¾¤çš„ç”¨æˆ·åªçœ‹åˆ°æ–°æ¶ˆæ¯ï¼Ÿ</h3><p>ç¾¤èŠç”¨æˆ·å…±ç”¨ç¾¤ç»´åº¦çš„æ¶ˆæ¯å­˜å‚¨ï¼Œèƒ½å¤§å¹…é™ä½ç”¨æˆ·ç»´åº¦æ¶ˆæ¯çš„å†™å…¥ã€‚</p><p>ä½†è¿™é‡Œæœ‰ä¸€ä¸ªé—®é¢˜ï¼šå¦‚æœç¾¤æ¶ˆæ¯æ˜¯å…±äº«çš„ï¼Œæ€ä¹ˆä¿è¯æ–°åŠ å…¥ç¾¤çš„ç”¨æˆ·çœ‹ä¸åˆ°åŠ ç¾¤å‰çš„ç¾¤èŠæ¶ˆæ¯å‘¢ï¼Ÿ</p><p>è§£å†³è¿™ä¸ªé—®é¢˜å…¶å®æ¯”è¾ƒç®€å•ï¼Œä½ å¯ä»¥é‡‡å–ä¸‹å›¾è¿™ä¸ªæ–¹æ¡ˆï¼š<br>\n<img src=\"https://static001.geekbang.org/resource/image/a1/ce/a19de4332253082f0324c2e6cdc294ce.png?wh=640*440\" alt=\"\"></p><p>æˆ‘ä»¬åªéœ€è¦åœ¨ç”¨æˆ·åŠ ç¾¤çš„æ—¶å€™ï¼Œè®°å½•ä¸€ä¸ªâ€œç”¨æˆ·åŠ ç¾¤çš„ä¿¡æ¯â€ï¼ŒæŠŠç”¨æˆ·åŠ ç¾¤æ—¶é—´ã€ç”¨æˆ·åŠ ç¾¤æ—¶è¯¥ç¾¤æœ€æ–°ä¸€æ¡æ¶ˆæ¯çš„IDç­‰ä¿¡æ¯å­˜å‚¨èµ·æ¥ï¼Œå½“ç”¨æˆ·æŸ¥è¯¢æ¶ˆæ¯æ—¶ï¼Œæ ¹æ®è¿™äº›ä¿¡æ¯æ¥é™åˆ¶æŸ¥è¯¢çš„æ¶ˆæ¯èŒƒå›´å°±å¯ä»¥äº†ã€‚</p><h3>å•ä¸ªç”¨æˆ·åˆ é™¤æ¶ˆæ¯æ€ä¹ˆåŠï¼Ÿ</h3><p>é™¤äº†æ–°åŠ ç¾¤ç”¨æˆ·æ¶ˆæ¯æŸ¥è¯¢èŒƒå›´çš„é—®é¢˜ï¼Œç¾¤æ¶ˆæ¯å…±äº«å­˜å‚¨æ–¹æ¡ˆåœ¨å®ç°æ—¶ï¼Œè¿˜æœ‰ä¸€ä¸ªæ¯”è¾ƒæ™®éçš„é—®é¢˜ï¼šå¦‚æœç¾¤é‡Œçš„æŸä¸€ä¸ªç”¨æˆ·åˆ é™¤äº†è¿™ä¸ªç¾¤é‡Œçš„æŸæ¡æ¶ˆæ¯ï¼Œæˆ‘ä»¬åº”è¯¥æ€ä¹ˆå¤„ç†ï¼Ÿ</p><p>é¦–å…ˆï¼Œç”±äºç¾¤æ¶ˆæ¯æ˜¯å…±ç”¨çš„ï¼Œæˆ‘ä»¬è‚¯å®šä¸èƒ½ç›´æ¥åˆ é™¤ç¾¤æ¶ˆæ¯ç´¢å¼•ä¸­çš„è®°å½•ã€‚</p><p>ä¸€ä¸ªå¯è¡Œçš„åŠæ³•æ˜¯ï¼šåœ¨ç”¨æˆ·åˆ é™¤æ¶ˆæ¯çš„æ—¶å€™ï¼ŒæŠŠè¿™æ¡è¢«åˆ é™¤æ¶ˆæ¯åŠ å…¥åˆ°å½“å‰ç”¨æˆ·å’Œç¾¤ç»´åº¦çš„ä¸€ä¸ªåˆ é™¤ç´¢å¼•ä¸­ï¼›å½“ç”¨æˆ·æŸ¥è¯¢æ¶ˆæ¯æ—¶ï¼Œæˆ‘ä»¬å¯¹ç¾¤ç»´åº¦çš„æ‰€æœ‰æ¶ˆæ¯ï¼Œä»¥åŠå¯¹è¿™ä¸ªâ€œç”¨æˆ·å’Œç¾¤ç»´åº¦â€çš„åˆ é™¤ç´¢å¼•è¿›è¡Œèšåˆå‰”é™¤å°±å¯ä»¥äº†ã€‚</p><p>åŒæ ·çš„å¤„ç†ï¼Œä½ è¿˜å¯ä»¥ç”¨åœ¨å…¶ä»–ä¸€äº›ç§æœ‰ç±»å‹çš„æ¶ˆæ¯ä¸­ã€‚æ¯”å¦‚ï¼Œåªæœ‰è‡ªå·±èƒ½çœ‹åˆ°çš„ä¸€äº›ç³»ç»Ÿæç¤ºç±»æ¶ˆæ¯ç­‰ã€‚</p><h2>æœªè¯»æ•°åˆå¹¶å˜æ›´</h2><p>è§£å†³äº†ç¾¤èŠæ¶ˆæ¯å­˜å‚¨çš„é—®é¢˜ï¼Œè¿˜æœ‰ä¸€ä¸ªç”±äºç¾¤èŠæ¶ˆæ¯é«˜å¹¶å‘æ‰‡å‡ºè€Œå¼•èµ·çš„é—®é¢˜ã€‚</p><p>æˆ‘åœ¨<a href=\"https://time.geekbang.org/column/article/132598\">â€œ07 | åˆ†å¸ƒå¼é”å’ŒåŸå­æ€§ï¼šä½ çœ‹åˆ°çš„æœªè¯»æ¶ˆæ¯æé†’æ˜¯çœŸçš„å—ï¼Ÿâ€</a>è¿™ä¸€ç¯‡ä¸­è®²åˆ°è¿‡ï¼šé’ˆå¯¹æ¯ä¸€ä¸ªç”¨æˆ·ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šç»´æŠ¤ä¸¤ä¸ªæœªè¯»æ•°ï¼Œç”¨äºè®°å½•ç”¨æˆ·åœ¨æŸä¸ªç¾¤çš„æœªè¯»æ¶ˆæ¯æ•°å’Œæ‰€æœ‰æœªè¯»æ•°ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ç¾¤é‡Œæœ‰äººå‘è¨€æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å¯¹è¿™ä¸ªç¾¤é‡Œçš„æ¯ä¸€ä¸ªäººéƒ½è¿›è¡Œâ€œåŠ æœªè¯»â€æ“ä½œã€‚å› æ­¤ï¼Œå¯¹äºæœåŠ¡ç«¯å’Œæœªè¯»æ•°å­˜å‚¨èµ„æºæ¥è¯´ï¼Œæ•´ä½“å¹¶å‘çš„å‹åŠ›ä¼šéšç€ç¾¤äººæ•°å’Œå‘æ¶ˆæ¯é¢‘ç‡çš„å¢é•¿è€Œæˆå€ä¸Šå‡ã€‚</p><p>ä»¥ä¸€ä¸ª5000äººçš„ç¾¤ä¸ºä¾‹ï¼šå‡è®¾è¿™ä¸ªç¾¤å¹³å‡æ¯ç§’æœ‰10ä¸ªäººå‘è¨€ï¼Œé‚£ä¹ˆæ¯ç§’é’ˆå¯¹æœªè¯»èµ„æºçš„å˜æ›´QPSå°±æ˜¯5wï¼›å¦‚æœæœ‰100ä¸ªè¿™æ ·çš„ç¾¤ï¼Œé‚£ä¹ˆå¯¹æœªè¯»èµ„æºçš„å˜æ›´å‹åŠ›å°±æ˜¯500wï¼Œæ‰€ä»¥æ•´ä½“ä¸Šéœ€è¦æ¶ˆè€—çš„èµ„æºæ˜¯éå¸¸å¤šçš„ã€‚</p><p>è§£å†³è¿™ä¸ªé—®é¢˜çš„ä¸€ä¸ªå¯è¡Œæ–¹æ¡ˆæ˜¯ï¼šåœ¨åº”ç”¨å±‚å¯¹æœªè¯»æ•°é‡‡å–<strong>åˆå¹¶å˜æ›´</strong>çš„æ–¹å¼ï¼Œæ¥é™ä½å¯¹å­˜å‚¨èµ„æºçš„å‹åŠ›ã€‚</p><p>åˆå¹¶å˜æ›´çš„æ€è·¯å¤§æ¦‚å¦‚ä¸‹å›¾ï¼š<br>\n<img src=\"https://static001.geekbang.org/resource/image/15/70/151bc6eb9ddb5b85ee10cc499d2a9370.png?wh=768*1142\" alt=\"\"></p><p>æœªè¯»å˜æ›´æœåŠ¡æ¥æ”¶ç¾¤èŠçš„åŠ æœªè¯»è¯·æ±‚ï¼Œå°†è¿™äº›åŠ æœªè¯»è¯·æ±‚æŒ‰ç…§ç¾¤IDè¿›è¡Œå½’ç±»ï¼Œå¹¶æš‚å­˜åˆ°ç¾¤IDç»´åº¦çš„å¤šä¸ªâ€œæš‚å­˜é˜Ÿåˆ—â€ä¸­ï¼›è¿™äº›â€œæš‚å­˜é˜Ÿåˆ—â€çš„è¯·æ±‚ä¼šé€šè¿‡ä¸€ä¸ªTimerç»„ä»¶å’Œä¸€ä¸ªFlusherç»„ä»¶æ¥è´Ÿè´£å¤„ç†ã€‚</p><p>Timerç»„ä»¶è´Ÿè´£å®šæ—¶åˆ·æ–°è¿™äº›é˜Ÿåˆ—ä¸­çš„è¯·æ±‚ï¼Œæ¯”å¦‚ï¼Œæ¯ä¸€ç§’ä»è¿™äº›â€œæš‚å­˜é˜Ÿåˆ—â€å–å‡ºæ•°æ®ï¼Œç„¶åäº¤ç»™Aggregatorè¿›è¡Œåˆå¹¶å¤„ç†ï¼›Flusherç»„ä»¶åˆ™ä¼šæ ¹æ®è¿™äº›â€œæš‚å­˜é˜Ÿåˆ—â€çš„é•¿åº¦æ¥è¿›è¡Œåˆ·æ–°ï¼Œæ¯”å¦‚ï¼Œå½“é˜Ÿåˆ—é•¿åº¦åˆ°è¾¾100æ—¶ï¼ŒFlusherå°±ä»é˜Ÿåˆ—ä¸­å–å‡ºæ•°æ®ï¼Œå†äº¤ç»™Aggregatoræ¥è¿›è¡Œåˆå¹¶å¤„ç†ã€‚</p><p>æ‰€ä»¥ï¼ŒTimerå’ŒFlusherçš„è§¦å‘æ¡ä»¶æ˜¯ï¼šè¿™äº›é˜Ÿåˆ—çš„è¯·æ±‚ä¸­æœ‰ä»»æ„ä¸€ä¸ªåˆ°è¾¾ï¼Œå‡ä¼šè¿›è¡Œåˆ·æ–°æ“ä½œã€‚</p><p>æäº¤ç»™Aggregatorçš„åŠ æœªè¯»è¯·æ±‚ä¼šè¿›è¡Œåˆå¹¶æ“ä½œã€‚æ¯”å¦‚é’ˆå¯¹ç¾¤é‡Œçš„æ¯ä¸€ä¸ªç”¨æˆ·ï¼Œå°†å¤šä¸ªå½’å±äºè¯¥ç¾¤çš„åŠ æœªè¯»è¯·æ±‚åˆå¹¶æˆä¸€ä¸ªè¯·æ±‚ï¼Œå†æäº¤ç»™åº•å±‚èµ„æºã€‚</p><p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œç¾¤IDä¸ºgid1é‡Œçš„ç”¨æˆ·uid1å’Œuid2ï¼Œé€šè¿‡åˆå¹¶æ“ä½œï¼Œç”±4æ¬¡åŠ æœªè¯»æ“ä½œincr 1åˆå¹¶æˆäº†å„è‡ªä¸€æ¡çš„åŠ æœªè¯»æ“ä½œincr 2ã€‚</p><p>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œå°±å°†åŠ æœªè¯»æ“ä½œQPSé™ä½äº†ä¸€åŠã€‚å¦‚æœæ¯ç§’ç¾¤é‡Œå‘æ¶ˆæ¯çš„QPSæ˜¯10çš„è¯ï¼Œç†è®ºä¸Šæˆ‘ä»¬é€šè¿‡è¿™ç§â€œåˆå¹¶â€çš„æ–¹å¼ï¼Œèƒ½å°†QPSé™ä½åˆ°1/10ã€‚</p><p>å½“ç„¶ï¼Œè¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼šç”±äºåŠ æœªè¯»æ“ä½œåœ¨åº”ç”¨å±‚çš„å†…å­˜ä¸­ä¼šæš‚å­˜ä¸€å®šæ—¶é—´ï¼Œå› æ­¤ä¼šå­˜åœ¨ä¸€å®šç¨‹åº¦çš„åŠ æœªè¯»å»¶è¿Ÿçš„é—®é¢˜ï¼›è€Œä¸”å¦‚æœæ­¤æ—¶æœåŠ¡å™¨æ‰ç”µæˆ–è€…é‡å¯ï¼Œå¯èƒ½ä¼šä¸¢å¤±æ‰ä¸€éƒ¨åˆ†åŠ æœªè¯»æ“ä½œã€‚</p><p>ä¸ºäº†æå‡â€œåˆå¹¶å˜æ›´â€æ“ä½œçš„åˆå¹¶ç¨‹åº¦ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç¾¤IDå“ˆå¸Œçš„æ–¹å¼ï¼Œå°†æŸä¸€ä¸ªç¾¤çš„æ‰€æœ‰æœªè¯»å˜æ›´æ“ä½œéƒ½è·¯ç”±åˆ°æŸä¸€å°æœåŠ¡å™¨ï¼Œè¿™æ ·å°±èƒ½å¤Ÿæå‡æœ€ç»ˆåˆå¹¶çš„æ•ˆæœã€‚</p><h3>ç¦»çº¿Bufferåªå­˜æ¶ˆæ¯ID</h3><p>é€šè¿‡â€œåˆå¹¶å˜æ›´â€ï¼Œæˆ‘ä»¬è§£å†³äº†ä¸‡äººç¾¤èŠç³»ç»Ÿä¸­ï¼Œæœªè¯»æ•°é«˜å¹¶å‘çš„å‹åŠ›é—®é¢˜ã€‚</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹ä¸€ä¸‹ï¼Œåœ¨ç¦»çº¿æ¨é€ç¯èŠ‚ä¸­ï¼Œé’ˆå¯¹ç¾¤èŠåœºæ™¯è¿˜æœ‰å“ªäº›å¯ä¼˜åŒ–çš„ç‚¹ã€‚</p><p>æˆ‘åœ¨ç¬¬9è¯¾<a href=\"https://time.geekbang.org/column/article/136020\">â€œåˆ†å¸ƒå¼ä¸€è‡´æ€§ï¼šè®©ä½ çš„æ¶ˆæ¯æ”¯æŒå¤šç»ˆç«¯æ¼«æ¸¸ï¼Ÿâ€</a>ä¸­æœ‰è®²åˆ°ï¼Œä¸ºäº†è§£å†³ç”¨æˆ·ç¦»çº¿æœŸé—´æ”¶ä¸åˆ°æ¶ˆæ¯çš„é—®é¢˜ï¼Œæˆ‘ä»¬ä¼šåœ¨æœåŠ¡ç«¯æŒ‰ç…§æ¥æ”¶ç”¨æˆ·ç»´åº¦ï¼Œæš‚å­˜ç”¨æˆ·ç¦»çº¿æœŸé—´çš„æ¶ˆæ¯ï¼Œç­‰è¯¥ç”¨æˆ·ä¸‹æ¬¡ä¸Šçº¿æ—¶å†è¿›è¡Œæ‹‰å–åŒæ­¥ã€‚</p><p>è¿™é‡Œçš„ç¦»çº¿Bufferæ˜¯ç”¨æˆ·ç»´åº¦çš„ï¼Œå› æ­¤å¯¹äºç¾¤èŠä¸­çš„æ¯ä¸€æ¡æ¶ˆæ¯ï¼ŒæœåŠ¡ç«¯éƒ½ä¼šåœ¨æ‰‡å‡ºåè¿›è¡Œæš‚å­˜ã€‚</p><p>å‡è®¾æ˜¯ä¸€ä¸ª5000äººçš„ç¾¤ï¼Œä¸€æ¡æ¶ˆæ¯å¯èƒ½ä¼šæš‚å­˜5000æ¬¡ï¼Œè¿™æ ·ä¸€æ–¹é¢å¯¹ç¦»çº¿Bufferçš„å‹åŠ›ä¼šæ¯”è¾ƒå¤§ï¼Œå¦å¤–é’ˆå¯¹åŒä¸€æ¡æ¶ˆæ¯çš„å¤šæ¬¡é‡å¤æš‚å­˜ï¼Œå¯¹èµ„æºçš„æµªè´¹ä¹Ÿæ˜¯éå¸¸å¤§çš„ã€‚</p><p>è¦è§£å†³å¤šæ¬¡æš‚å­˜å¯¼è‡´ç¦»çº¿Bufferå¹¶å‘å‹åŠ›å¤§çš„é—®é¢˜ï¼Œä¸€ç§æ–¹æ¡ˆæ˜¯å¯ä»¥å‚è€ƒâ€œæœªè¯»æ•°åˆå¹¶å˜æ›´â€çš„æ–¹å¼ï¼Œå¯¹ç¾¤èŠç¦»çº¿æ¶ˆæ¯çš„å­˜å‚¨ä¹Ÿé‡‡ç”¨â€œåˆå¹¶æš‚å­˜â€è¿›è¡Œä¼˜åŒ–ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘å°±ä¸å†ç»†è®²äº†ã€‚</p><p>å¦ä¸€ç§è§£å†³æ–¹æ¡ˆæ˜¯ï¼šæˆ‘ä»¬å¯ä»¥å¯¹ç¾¤èŠç¦»çº¿æ¶ˆæ¯çš„æš‚å­˜è¿›è¡Œé™é€Ÿï¼Œå¿…è¦æ—¶å¯ä»¥ä¸¢å¼ƒä¸€äº›ç¦»çº¿æ¶ˆæ¯çš„æš‚å­˜ï¼Œæ¥ä¿æŠ¤åç«¯èµ„æºã€‚</p><p>å› ä¸ºé€šè¿‡â€œç‰ˆæœ¬å·çš„é“¾è¡¨æœºåˆ¶â€ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç”¨æˆ·ä¸Šçº¿æ—¶å‘ç°â€œç¦»çº¿æ¶ˆæ¯â€ä¸å®Œæ•´çš„é—®é¢˜ï¼Œç„¶åå†ä»åç«¯æ¶ˆæ¯å­˜å‚¨ä¸­é‡æ–°åˆ†é¡µè·å–ç¦»çº¿æ¶ˆæ¯ï¼Œä»è€Œå¯ä»¥å°†ä¸€éƒ¨åˆ†å†™å…¥å‹åŠ›å»¶è¿Ÿè½¬ç§»åˆ°è¯»å–å‹åŠ›ä¸Šæ¥ã€‚</p><p>ä¸è¿‡è¿™é‡Œä½ éœ€è¦æ³¨æ„çš„æ˜¯ï¼šè¿™ç§é™çº§é™æµæ–¹å¼å­˜åœ¨ä¸¢å¤±ä¸€äº›æ“ä½œä¿¡ä»¤çš„é—®é¢˜ï¼Œæ˜¯æœ‰æŸé™çº§ï¼Œæ‰€ä»¥éå¿…è¦æƒ…å†µä¸‹å°½é‡ä¸ç”¨ã€‚</p><p>å¦å¤–ï¼Œé’ˆå¯¹ç¾¤èŠæ¶ˆæ¯é‡å¤æš‚å­˜çš„é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥åªåœ¨ç¦»çº¿Bufferä¸­æš‚å­˜â€œæ¶ˆæ¯IDâ€ï¼Œä¸æš‚å­˜æ¶ˆæ¯å†…å®¹ï¼Œç­‰åˆ°çœŸæ­£ä¸‹æ¨ç¦»çº¿æ¶ˆæ¯çš„æ—¶å€™ï¼Œå†é€šè¿‡æ¶ˆæ¯IDæ¥è·å–å†…å®¹è¿›è¡Œä¸‹æ¨ï¼Œä»¥æ­¤ä¼˜åŒ–ç¾¤èŠæ¶ˆæ¯å¯¹ç¦»çº¿Bufferèµ„æºè¿‡å¤šå ç”¨çš„æƒ…å†µã€‚</p><h3>ç¦»çº¿æ¶ˆæ¯æ‰¹é‡ACK</h3><p>åœ¨ç¾¤èŠç¦»çº¿æ¶ˆæ¯åœºæ™¯ä¸­ï¼Œè¿˜æœ‰ä¸€ä¸ªç›¸å¯¹å¹¶å‘é‡æ¯”è¾ƒå¤§çš„ç¯èŠ‚å°±æ˜¯ï¼šç¦»çº¿æ¶ˆæ¯çš„ACKå¤„ç†ã€‚</p><p>æˆ‘åœ¨<a href=\"https://time.geekbang.org/column/article/129751\">â€œ04 | ACKæœºåˆ¶ï¼šå¦‚ä½•ä¿è¯æ¶ˆæ¯çš„å¯é æŠ•é€’ï¼Ÿâ€</a>è¿™èŠ‚è¯¾ä¸­è®²åˆ°ï¼Œæˆ‘ä»¬ä¼šé€šè¿‡ACKæœºåˆ¶æ¥ä¿è¯åœ¨çº¿æ¶ˆæ¯å’Œç¦»çº¿æ¶ˆæ¯çš„å¯é æŠ•é€’ã€‚ä½†æ˜¯å¯¹äºç¾¤çš„æ´»è·ƒåº¦è¾ƒé«˜çš„æƒ…å†µæ¥è¯´ï¼Œå½“ç”¨æˆ·ä¸Šçº¿æ—¶ï¼ŒæœåŠ¡ç«¯é’ˆå¯¹è¿™ä¸ªç¾¤çš„ç¦»çº¿æ¶ˆæ¯ä¸‹æ¨é‡ä¼šæ¯”è¾ƒå¤§ã€‚</p><p>ä»¥å¾®åšåœºæ™¯ä¸­çš„è¶…å¤§è§„æ¨¡çš„ç²‰ä¸ç¾¤ä¸ºä¾‹ï¼šæœ¬æ¥ç¾¤å†…çš„ç”¨æˆ·å°±å·²ç»æ¯”è¾ƒæ´»è·ƒäº†ï¼Œå¦‚æœè¯¥ç¾¤éš¶å±çš„æ˜æ˜Ÿçªç„¶ç©ºé™è¿›æ¥ï¼Œå¯èƒ½ä¼šå¯¼è‡´å¤§é‡ç¦»çº¿ç”¨æˆ·è¢«æ¿€æ´»ï¼ŒåŒä¸€æ—¶é—´ä¼šè§¦å‘å¤šä¸ªç”¨æˆ·çš„ç¦»çº¿æ¶ˆæ¯ä¸‹æ¨å’Œè¿™äº›ç¦»çº¿æ¶ˆæ¯çš„ACKï¼›é’ˆå¯¹ç¦»çº¿æ¶ˆæ¯æ¥æ”¶ç«¯çš„ACKå›åŒ…ï¼ŒæœåŠ¡ç«¯éœ€è¦è¿›è¡Œé«˜å¹¶å‘çš„å¤„ç†ï¼Œå› è€Œå¯¹æœåŠ¡ç«¯å‹åŠ›ä¼šæ¯”è¾ƒå¤§ã€‚</p><p>ä½†å®é™…ä¸Šï¼Œç”±äºç¾¤èŠç¦»çº¿æ¶ˆæ¯çš„ä¸‹æ¨å‘ç”Ÿåœ¨ç”¨æˆ·åˆšä¸Šçº¿æ—¶ï¼Œè¿™ä¸ªæ—¶å€™çš„è¿æ¥åˆšå»ºç«‹ï¼Œç¨³å®šæ€§æ¯”è¾ƒå¥½ï¼Œä¸€èˆ¬æ¶ˆæ¯ä¸‹æ¨çš„æˆåŠŸç‡æ˜¯æ¯”è¾ƒé«˜çš„ï¼Œæ‰€ä»¥å¯¹ACKå›åŒ…å¤„ç†çš„åŠæ—¶æ€§å…¶å®ä¸éœ€è¦å¤ªé«˜ã€‚</p><p>å› æ­¤ï¼Œä¸€ç§ä¼˜åŒ–æ–¹æ¡ˆæ˜¯ï¼š<strong>é’ˆå¯¹ç¦»çº¿æ¶ˆæ¯æ¥æ”¶ç«¯è¿›è¡Œæ‰¹é‡ACK</strong>ã€‚</p><p>å‚ç…§TCPçš„Delay ACKï¼ˆå»¶è¿Ÿç¡®è®¤ï¼‰æœºåˆ¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ¥æ”¶åˆ°ç¦»çº¿æ¨é€çš„æ¶ˆæ¯åï¼Œâ€œç­‰å¾…â€ä¸€å®šçš„æ—¶é—´ï¼Œå¦‚æœæœ‰å…¶ä»–ACKåŒ…éœ€è¦è¿”å›ï¼Œé‚£ä¹ˆå¯ä»¥å¯¹è¿™ä¸¤ä¸ªå›åŒ…çš„ACKè¿›è¡Œåˆå¹¶ï¼Œä»è€Œé™ä½æœåŠ¡ç«¯çš„å¤„ç†å‹åŠ›ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼šæ¥æ”¶ç«¯çš„Delay ACKï¼Œå¯èƒ½ä¼šåœ¨ä¸€å®šç¨‹åº¦ä¸ŠåŠ å‰§æ¶ˆæ¯é‡å¤ä¸‹æ¨çš„æ¦‚ç‡ã€‚æ¯”å¦‚ï¼ŒACKç”±äºå»¶è¿Ÿå‘å‡ºï¼Œå¯¼è‡´è¿™æ—¶çš„æœåŠ¡ç«¯å¯èƒ½ä¼šè§¦å‘è¶…æ—¶é‡ä¼ ï¼Œé‡å¤ä¸‹æ¨æ¶ˆæ¯ã€‚</p><p>é’ˆå¯¹è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ¥æ”¶ç«¯å»é‡æ¥è§£å†³ï¼Œä¹Ÿå¹¶ä¸å½±å“ç”¨æˆ·çš„æ•´ä½“ä½“éªŒã€‚</p><h3>ä¸è®°å½•å…¨å±€çš„åœ¨çº¿çŠ¶æ€</h3><p>ç¾¤èŠåœºæ™¯ä¸‹çš„è¶…å¤§æ¶ˆæ¯æ‰‡å‡ºï¼Œé™¤äº†ä¼šåŠ å¤§å¯¹ç¦»çº¿æ¶ˆæ¯çš„èµ„æºæ¶ˆè€—ï¼Œä¹Ÿä¼šå¯¹æ¶ˆæ¯çš„åœ¨çº¿ä¸‹æ¨é€ æˆå¾ˆå¤§çš„å‹åŠ›ã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼šåœ¨ç‚¹å¯¹ç‚¹èŠå¤©åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šåœ¨ç”¨æˆ·ä¸Šçº¿æ—¶ï¼Œè®°å½•ä¸€ä¸ªâ€œç”¨æˆ·è¿æ¥æ‰€åœ¨çš„ç½‘å…³æœºâ€çš„åœ¨çº¿çŠ¶æ€ï¼Œè€Œä¸”ä¸ºäº†å’Œæ¥å…¥æœåŠ¡å™¨è§£è€¦ï¼Œè¿™ä¸ªåœ¨çº¿çŠ¶æ€ä¸€èˆ¬ä¼šå­˜å‚¨åœ¨ä¸­å¤®èµ„æºä¸­ï¼›å½“æœåŠ¡ç«¯éœ€è¦ä¸‹æ¨æ¶ˆæ¯æ—¶ï¼Œæˆ‘ä»¬ä¼šé€šè¿‡è¿™ä¸ªâ€œä¸­å¤®çš„åœ¨çº¿çŠ¶æ€â€æ¥æŸ¥è¯¢æ¥æ”¶æ–¹æ‰€åœ¨çš„æ¥å…¥ç½‘å…³æœºï¼Œç„¶åæŠŠæ¶ˆæ¯æŠ•é€’ç»™è¿™å°ç½‘å…³æœºï¼Œæ¥è¿›è¡Œæœ€ç»ˆæ¶ˆæ¯çš„ä¸‹æ¨ã€‚</p><p>åœ¨ç¾¤èŠåœºæ™¯ä¸­ï¼Œå¾ˆå¤šå®ç°ä¹Ÿä¼šé‡‡ç”¨ç±»ä¼¼æ–¹å¼è¿›è¡Œåœ¨çº¿æ¶ˆæ¯çš„ç²¾å‡†ä¸‹æ¨ï¼Œè¿™ç§æ–¹æ¡ˆåœ¨ç¾¤äººæ•°è¾ƒå°‘çš„æ—¶å€™æ˜¯æ²¡é—®é¢˜çš„ï¼Œä½†æ˜¯å½“ç¾¤æˆå‘˜è§„æ¨¡å¾ˆå¤§æ—¶ï¼Œè¿™ç§æ–¹å¼å°±ä¼šå‡ºç°ç“¶é¢ˆã€‚</p><p>ä¸€ä¸ªç“¶é¢ˆåœ¨äºï¼Œç”¨æˆ·ä¸Šçº¿æ—¶å¯¹â€œåœ¨çº¿çŠ¶æ€â€çš„å†™å…¥æ“ä½œï¼›å¦ä¸€ä¸ªç“¶é¢ˆç‚¹åœ¨äºï¼ŒæœåŠ¡ç«¯æœ‰æ¶ˆæ¯ä¸‹æ¨æ—¶ï¼Œå¯¹â€œåœ¨çº¿çŠ¶æ€â€çš„é«˜å¹¶å‘æŸ¥è¯¢ã€‚</p><p>å› æ­¤ï¼Œé’ˆå¯¹ä¸‡äººç¾¤èŠçš„åœºæ™¯ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡å–ç±»ä¼¼ç›´æ’­äº’åŠ¨ä¸­çš„ä¼˜åŒ–æ–¹å¼ï¼Œä¸ç»´æŠ¤å…¨å±€çš„ä¸­å¤®â€œåœ¨çº¿çŠ¶æ€â€ï¼Œè€Œæ˜¯è®©å„ç½‘å…³æœºâ€œè‡ªæ²»â€ï¼Œæ¥ç»´æŠ¤æ¥å…¥åˆ°æœ¬æœºçš„è¿æ¥å’Œç¾¤çš„æ˜ å°„ã€‚ä½ å¯ä»¥å‚è€ƒä¸‹å›¾æ‰€ç¤ºçš„å®ç°è¿‡ç¨‹ï¼š<br>\n<img src=\"https://static001.geekbang.org/resource/image/24/cd/2427222d320850a08e76f7200cf094cd.png?wh=768*1142\" alt=\"\"></p><p>æ¯”å¦‚åŒä¸€ä¸ªç¾¤çš„ç”¨æˆ·Aã€Bã€Cï¼Œåˆ†åˆ«é€šè¿‡ç½‘å…³æœº1ã€2ã€3ä¸Šçº¿å»ºç«‹é•¿è¿ï¼Œå¤„ç†å»ºè¿è¯·æ±‚æ—¶ï¼Œç½‘å…³æœº1ã€2ã€3 ä¼šåˆ†åˆ«åœ¨å„è‡ªçš„æœ¬åœ°å†…å­˜ç»´æŠ¤å½“å‰ç™»å½•çš„ç”¨æˆ·ä¿¡æ¯ã€‚</p><p>ä¸Šçº¿å®Œæˆåï¼Œç”¨æˆ·Aåœ¨ç¾¤é‡Œå‘äº†ä¸€æ¡æ¶ˆæ¯ï¼Œä¸šåŠ¡é€»è¾‘å¤„ç†å±‚ä¼šé’ˆå¯¹è¿™æ¡æ¶ˆæ¯è¿›è¡Œå¤„ç†ï¼ŒæŸ¥è¯¢å‡ºå½“å‰è¿™æ¡æ¶ˆæ¯æ‰€å½’å±ç¾¤çš„å…¨éƒ¨ç”¨æˆ·ä¿¡æ¯ï¼Œå‡è®¾æŸ¥è¯¢åˆ°è¿™ä¸ªç¾¤ä¸€å…±æœ‰3äººï¼Œé™¤å»å‘é€æ–¹ç”¨æˆ·Aï¼Œè¿˜æœ‰ç”¨æˆ·Bå’Œç”¨æˆ·Cã€‚</p><p>ç„¶åä¸šåŠ¡é€»è¾‘å¤„ç†å±‚æŠŠæ¶ˆæ¯æ‰‡å‡ºåˆ°æ¥æ”¶äººç»´åº¦ï¼ŒæŠ•é€’åˆ°å…¨å±€çš„æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼›æ¯ä¸€å°ç½‘å…³æœºåœ¨å¯åŠ¨åéƒ½ä¼šè®¢é˜…è¿™ä¸ªå…¨å±€çš„Topicï¼Œå› æ­¤éƒ½èƒ½è·å–åˆ°è¿™æ¡æ¶ˆæ¯ï¼›æ¥ç€ï¼Œå„ç½‘å…³æœºæŸ¥è¯¢å„è‡ªæœ¬åœ°ç»´æŠ¤çš„â€œåœ¨çº¿ç”¨æˆ·â€çš„ä¿¡æ¯ï¼ŒæŠŠå½’å±æœ¬æœºçš„ç”¨æˆ·çš„æ¶ˆæ¯ï¼Œé€šè¿‡é•¿è¿ä¸‹æ¨ä¸‹å»ã€‚</p><p>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæ¶ˆæ¯ä¸‹æ¨ä»â€œå…¨å±€çš„è¿œç¨‹ä¾èµ–â€å˜æˆäº†â€œåˆ†ç‰‡çš„æœ¬åœ°å†…å­˜ä¾èµ–â€ï¼Œæ€§èƒ½ä¸Šä¼šå¿«å¾ˆå¤šï¼Œé¿å…äº†æœåŠ¡ç«¯ç»´æŠ¤å…¨å±€åœ¨çº¿çŠ¶æ€çš„èµ„æºå¼€é”€å’Œå‹åŠ›ã€‚</p><h2>å°ç»“</h2><p>ä»Šå¤©çš„è¯¾ç¨‹ï¼Œæˆ‘ä¸»è¦æ˜¯åˆ†æäº†ä¸€äº›åœ¨ä¸‡äººç¾¤èŠåœºæ™¯ä¸­æ¯”è¾ƒçªå‡ºå’Œéš¾è§£å†³çš„é—®é¢˜ï¼Œå¹¶ç»™å‡ºäº†é’ˆå¯¹æ€§çš„åº”å¯¹æ–¹æ¡ˆã€‚æ¯”å¦‚ä»¥ä¸‹å‡ ç§ï¼š</p><ul>\n<li>é’ˆå¯¹ç¾¤èŠæ¶ˆæ¯çš„å­˜å‚¨ï¼Œæˆ‘ä»¬å¯ä»¥ä»ç‚¹å¯¹ç‚¹çš„<strong>â€œå†™æ‰©æ•£â€ä¼˜åŒ–æˆâ€œè¯»æ‰©æ•£â€</strong>ï¼Œä»¥è§£å†³å­˜å‚¨å†™å…¥å¹¶å‘å¤§å’Œèµ„æºå¼€é”€å¤§çš„é—®é¢˜ï¼›</li>\n<li>é’ˆå¯¹é«˜çƒ­åº¦çš„ç¾¤å¸¦æ¥çš„â€œé«˜å¹¶å‘æœªè¯»å˜æ›´â€æ“ä½œï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡<strong>åº”ç”¨å±‚çš„â€œåˆå¹¶å˜æ›´â€</strong>ï¼Œæ¥ç¼“è§£æœªè¯»èµ„æºçš„å†™å…¥å‹åŠ›ï¼›</li>\n<li>å¯¹äºç¦»çº¿æ¶ˆæ¯çš„ä¼˜åŒ–ï¼Œæˆ‘ä»¬åªéœ€è¦å­˜å‚¨æ¶ˆæ¯IDï¼Œé¿å…é‡å¤çš„æ¶ˆæ¯å†…å®¹å­˜å‚¨æµªè´¹ç¦»çº¿Bufferèµ„æºï¼Œè¿˜å¯ä»¥å‚è€ƒTCPçš„Delay ACKæœºåˆ¶ï¼Œ<strong>åœ¨æ¥æ”¶æ–¹å±‚é¢è¿›è¡Œæ‰¹é‡ACK</strong>ï¼Œé™ä½æœåŠ¡ç«¯çš„å¤„ç†å¹¶å‘å‹åŠ›ï¼›</li>\n<li>å¯¹äºå•èŠåœºæ™¯ä¸­ä¾èµ–â€œä¸­å¤®å…¨å±€çš„åœ¨çº¿çŠ¶æ€â€ï¼Œæ¥è¿›è¡Œæ¶ˆæ¯ä¸‹æ¨çš„æ¶æ„ç“¶é¢ˆï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç¾¤èŠåœºæ™¯ä¸­ä¼˜åŒ–æˆ<strong>â€œç½‘å…³æœºæœ¬åœ°è‡ªæ²»ç»´æŠ¤â€</strong>çš„æ–¹å¼ï¼Œä»¥æ­¤è§£å†³é«˜å¹¶å‘ä¸‹æ¨æ—¶ï¼Œä¾èµ–å…¨å±€èµ„æºå®¹æ˜“å‡ºç°ç“¶é¢ˆçš„é—®é¢˜ï¼Œä»è€Œæå‡ç¾¤èŠæ¶ˆæ¯åœ¨çº¿ä¸‹æ¨çš„æ€§èƒ½å’Œç¨³å®šæ€§ã€‚</li>\n</ul><p>é’ˆå¯¹å¤§è§„æ¨¡ç¾¤èŠç³»ç»Ÿçš„æ¶æ„ä¼˜åŒ–ï¼Œä¸€ç›´æ˜¯å³æ—¶æ¶ˆæ¯åœºæ™¯ä¸­éå¸¸é‡è¦å’Œå¿…è¦çš„éƒ¨åˆ†ï¼Œä¹Ÿæ˜¯ä½“ç°æˆ‘ä»¬æ¶æ„èƒ½åŠ›å’ŒåŠŸåº•çš„ç¯èŠ‚ã€‚</p><p>ä»Šå¤©è¯¾ç¨‹ä¸­ä»‹ç»çš„é’ˆå¯¹ä¸‡äººç¾¤èŠç³»ç»Ÿä¼˜åŒ–çš„ä¸€äº›åº”å¯¹æ–¹æ¡ˆï¼Œå¾ˆå¤šéƒ½å…·å¤‡æ™®é€‚æ€§ï¼Œæ¯”å¦‚â€œæœªè¯»åˆå¹¶å˜æ›´â€çš„æ–¹æ¡ˆï¼Œå®é™…ä¸Šä¹Ÿèƒ½åº”ç”¨åœ¨å¾ˆå¤šæœ‰å†™å…¥ç“¶é¢ˆçš„ä¸šåŠ¡ä¸Šï¼ˆå¦‚DBçš„å†™å…¥ç“¶é¢ˆï¼‰ï¼Œåœ¨å¾®åšçš„çº¿ä¸Šä¸šåŠ¡ä¸­ï¼Œç›®å‰ä¹Ÿè¢«å¤§èŒƒå›´ä½¿ç”¨ã€‚ä½ ä¹Ÿå¯ä»¥çœ‹ä¸€çœ‹ï¼Œè‡ªå·±çš„ä¸šåŠ¡ä¸­æ˜¯å¦ä¹Ÿæœ‰ç±»ä¼¼å¯ä¼˜åŒ–çš„åœºæ™¯ï¼Œå¯ä»¥å°è¯•æ¥å‚è€ƒè¿™ä¸ªæ–¹æ¡ˆè¿›è¡Œä¼˜åŒ–ã€‚</p><p>æœ€åç»™å¤§å®¶ç•™ä¸€ä¸ªæ€è€ƒé¢˜ï¼š<strong>ç‚¹å¯¹ç‚¹æ¶ˆæ¯çš„åœ¨çº¿ä¸‹æ¨ï¼Œä¹Ÿé€‚åˆé‡‡ç”¨â€œç½‘å…³æœºè‡ªæ²»ç»´æŠ¤æœ¬åœ°åœ¨çº¿çŠ¶æ€â€çš„æ–¹å¼å—ï¼Ÿè¯´è¯´ä½ çš„çœ‹æ³•å§ã€‚</strong></p><p>ä»¥ä¸Šå°±æ˜¯ä»Šå¤©è¯¾ç¨‹çš„å†…å®¹ï¼Œæ¬¢è¿ä½ ç»™æˆ‘ç•™è¨€ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç•™è¨€åŒºä¸€èµ·è®¨è®ºï¼Œæ„Ÿè°¢ä½ çš„æ”¶å¬ï¼Œæˆ‘ä»¬ä¸‹æœŸå†è§ã€‚</p><p></p>","neighbors":{"left":{"article_title":"19 | ç«¯åˆ°ç«¯Traceï¼šæ¶ˆæ¯æ”¶å‘é“¾è·¯çš„ç›‘æ§ä½“ç³»æ­å»º","id":146995},"right":{"article_title":"21 | æœŸæœ«å®æˆ˜ï¼šä¸ºä½ çš„ç®€çº¦ç‰ˆIMç³»ç»Ÿï¼ŒåŠ ä¸ŠåŠŸèƒ½","id":149644}},"comments":[{"had_liked":false,"id":139950,"user_name":"clip","can_delete":false,"product_type":"c1","uid":1019244,"ip_address":"","ucode":"D0E142605A5BD5","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8d/6c/0c2a26c7.jpg","comment_is_top":false,"comment_ctime":1570772284,"is_pvip":true,"replies":[{"id":"54450","content":"åŸºæœ¬æ²¡é”™ï¼Œä¸è¿‡è¿™é‡Œæœ‰ä¸€ç‚¹è¯´ä¸€ä¸‹ï¼šä¸ç®¡æ˜¯ä¸æ˜¯ç½‘å…³æœºç»´æŠ¤æœ¬åœ°çŠ¶æ€çš„æ–¹å¼ï¼Œæ¶ˆæ¯æœ€ç»ˆä¸‹å‘éƒ½æ˜¯éœ€è¦é€šè¿‡ç½‘å…³æœºæ¨ä¸‹å»çš„å“ˆï¼Œåªæ˜¯ç½‘å…³æœºæœ¬åœ°ç»´æŠ¤çŠ¶æ€çš„æ–¹å¼ä¼šæµªè´¹æ‰ä¸€äº›å…¶ä»–ç½‘å…³æœºçš„è®¡ç®—ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"coldwalker","uid":"1297490","ctime":1571056888,"ip_address":"","comment_id":139950,"utype":1}],"discussion_count":1,"race_medal":0,"score":"40225477948","product_id":100034901,"comment_content":"æ€è€ƒé¢˜ï¼š<br>çœ‹æƒ…å†µè€ƒè™‘ã€‚<br>ä¸å¥½çš„åœ°æ–¹ï¼š<br>æ‰€æœ‰ç½‘å…³æœºéƒ½è¦ä»æ¶ˆæ¯é˜Ÿåˆ—æ¶ˆè´¹è¿™æ¡æ•°æ®ï¼Œä½†æœ€ç»ˆåªæœ‰ä¸€å°æœºå™¨å¤„ç†ï¼Œæ¯”è¾ƒæµªè´¹å¤„ç†èµ„æºã€‚å¯¹è¿™æ¡æ¶ˆæ¯è€Œè¨€æœ¬æ¥å¯ä»¥ç›´æ¥ä¸‹æ¨ï¼Œç»“æœè¦å¤šç»è¿‡äº†ç½‘å…³æœºï¼Œå®æ—¶æ€§å¯èƒ½ä¼šå—åˆ°å¤§ç¾¤çš„å½±å“ã€‚<br>å¥½çš„åœ°æ–¹ï¼š<br>ä¸è¿‡é‡‡ç”¨ç½‘å…³æœºæ–¹æ¡ˆå¯ä»¥çœå»ç»´æŠ¤ä¸­å¤®çš„åœ¨çº¿çŠ¶æ€ã€‚<br>å†³å®šï¼š<br>å¯ä»¥æ ¹æ®ä¸šåŠ¡çš„ç‰¹ç‚¹æƒè¡¡ä¸€ä¸‹ï¼Œå¦‚æœä¸»è¦çš„ä¼šè¯éƒ½å‘ç”Ÿåœ¨ç¾¤èŠï¼Œç§èŠæå°‘ä¸”å®æ—¶æ€§è¦æ±‚ä½é‚£å¯ä»¥é‡‡ç”¨ç½‘å…³æœºç»´æŠ¤çš„æ–¹æ¡ˆï¼Œåä¹‹ä¸é‡‡ç”¨ã€‚","like_count":10,"discussions":[{"author":{"id":1297490,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epK1zyWib7IKYCoRSxIa6dDjrcyBqObGfj1lDVia1pOrSVxyltKI7RfGekdXPQNObwaBQg3gwvarlQA/132","nickname":"coldwalker","note":"","ucode":"AF9AF257A745C9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470188,"discussion_content":"åŸºæœ¬æ²¡é”™ï¼Œä¸è¿‡è¿™é‡Œæœ‰ä¸€ç‚¹è¯´ä¸€ä¸‹ï¼šä¸ç®¡æ˜¯ä¸æ˜¯ç½‘å…³æœºç»´æŠ¤æœ¬åœ°çŠ¶æ€çš„æ–¹å¼ï¼Œæ¶ˆæ¯æœ€ç»ˆä¸‹å‘éƒ½æ˜¯éœ€è¦é€šè¿‡ç½‘å…³æœºæ¨ä¸‹å»çš„å“ˆï¼Œåªæ˜¯ç½‘å…³æœºæœ¬åœ°ç»´æŠ¤çŠ¶æ€çš„æ–¹å¼ä¼šæµªè´¹æ‰ä¸€äº›å…¶ä»–ç½‘å…³æœºçš„è®¡ç®—ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571056888,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":139921,"user_name":"zhxh","can_delete":false,"product_type":"c1","uid":1015791,"ip_address":"","ucode":"40C3CC0A0A3028","user_header":"","comment_is_top":false,"comment_ctime":1570766299,"is_pvip":false,"replies":[{"id":"54441","content":"ä¸éœ€è¦å»ºè¿æ—¶è€¦åˆç¾¤ä¿¡æ¯ç›¸å…³å†…å®¹ï¼Œè¿™ä¸ªé—®é¢˜å¯ä»¥é‡‡ç”¨åˆ†æ‰¹ä¸‹å‘ç»™ç½‘å…³æ¥è§£å†³ï¼Œæ¯”å¦‚ä¸€æ‰¹100è¿™æ ·ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"coldwalker","uid":"1297490","ctime":1571056477,"ip_address":"","comment_id":139921,"utype":1}],"discussion_count":5,"race_medal":0,"score":"31635537371","product_id":100034901,"comment_content":"å¦‚æœé€šè¿‡è®¢é˜…çš„æ–¹å¼ï¼Œé‚£ä¹ˆè¿™æ¡æ¶ˆæ¯åº”è¯¥ä¹Ÿéœ€è¦æŠŠç¾¤æˆå‘˜åˆ—è¡¨å¸¦ç»™ç½‘å…³å§ï¼Œå¦åˆ™ç½‘å…³æ€ä¹ˆç­›é€‰ï¼Œå¯æ˜¯ä¸‡äººç¾¤æˆå‘˜æ¯”è¾ƒå¤šï¼Œä¼šå¯¼è‡´è¿™ä¸ªæ¶ˆæ¯åŒ…æ¯”è¾ƒå¤§ï¼Œå¦‚æœä¸å¸¦æˆå‘˜åˆ—è¡¨ä¿¡æ¯åˆ°ç½‘å…³ï¼Œé‚£ä¹ˆè¦æ±‚ç”¨æˆ·åœ¨å’Œç½‘å…³å»ºç«‹è¿æ¥çš„æ—¶å€™ï¼Œå°±è¦æŠŠè‡ªå·±åŠ å…¥çš„ç¾¤åˆ—è¡¨ä¿¡æ¯å¸¦è¿‡æ¥ï¼Œç»‘å®šåˆ°ç½‘å…³ï¼Œè¿™æ ·é€»è¾‘ä¼¼ä¹å’Œç½‘å…³è€¦åˆæ¯”è¾ƒä¸¥é‡ï¼Œè€å¸ˆèƒ½è¯¦ç»†è§£é‡Šä¸€ä¸‹ä¹ˆ","like_count":7,"discussions":[{"author":{"id":1297490,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epK1zyWib7IKYCoRSxIa6dDjrcyBqObGfj1lDVia1pOrSVxyltKI7RfGekdXPQNObwaBQg3gwvarlQA/132","nickname":"coldwalker","note":"","ucode":"AF9AF257A745C9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470174,"discussion_content":"ä¸éœ€è¦å»ºè¿æ—¶è€¦åˆç¾¤ä¿¡æ¯ç›¸å…³å†…å®¹ï¼Œè¿™ä¸ªé—®é¢˜å¯ä»¥é‡‡ç”¨åˆ†æ‰¹ä¸‹å‘ç»™ç½‘å…³æ¥è§£å†³ï¼Œæ¯”å¦‚ä¸€æ‰¹100è¿™æ ·ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571056477,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1024294,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaELZPnUAiajaR5C25EDLWeJURggyiaOP5GGPe2qlwpQcm5e3ybib8OsP4tvddFDLVRSNNGL5I3SFPJHsA/132","nickname":"null","note":"","ucode":"F9039EFED6B55D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":64395,"discussion_content":"åŸæ–‡æåˆ°ï¼š\nå‡è®¾æŸ¥è¯¢åˆ°è¿™ä¸ªç¾¤ä¸€å…±æœ‰ 3 äººï¼Œé™¤å»å‘é€æ–¹ç”¨æˆ· Aï¼Œè¿˜æœ‰ç”¨æˆ· B å’Œç”¨æˆ· Cã€‚\nç„¶åä¸šåŠ¡é€»è¾‘å¤„ç†å±‚æŠŠæ¶ˆæ¯æ‰‡å‡ºåˆ°ã€æ¥æ”¶äººç»´åº¦ã€ï¼ŒæŠ•é€’åˆ°å…¨å±€çš„æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼›â€¦â€¦\næ¥ç€ï¼Œå„ç½‘å…³æœºæŠŠå½’å±æœ¬æœºçš„ç”¨æˆ·çš„æ¶ˆæ¯ï¼Œé€šè¿‡é•¿è¿ä¸‹æ¨ä¸‹å»ã€‚\n\n\nä¸‡äººç¾¤çš„æ¶ˆæ¯æ¨é€ï¼Œå‡è®¾ç¾¤é‡Œé™¤äº†å‘é€è€…ï¼Œè¿˜æœ‰ 10000 äººã€‚åˆ™ä¸šåŠ¡å±‚éœ€è¦å‘ 10000 æ¡æ¶ˆæ¯åˆ° mqã€‚\ngid1, msg1, uid1\ngid1, msg1, uid2\ngid1, msg1, uid3\nâ€¦\ngid1, msg1, uid10000\n\n","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1574947359,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1024994,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a3/e2/5cb4f43f.jpg","nickname":"laolinshi","note":"","ucode":"269B879389D7D5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":558851,"discussion_content":"ç”±äºç½‘å…³æœºä¸å…³æ³¨ç”¨æˆ·å±äºå“ªä¸ªç¾¤ï¼Œæ‰€ä»¥æ¨é€ç»™ç½‘å…³æœºçš„æ¶ˆæ¯ä¸éœ€è¦å¸¦ç¾¤IDçš„ï¼Œä¸ºäº†å‡å°‘å„ä¸ªç½‘å…³æœºè®¢é˜…çš„æ¶ˆæ¯é‡ï¼Œå¯ä»¥é‡‡ç”¨æ‰¹é‡ä¸‹å‘çš„æ–¹å¼ï¼Œæ¯”å¦‚100ä¸ªç”¨æˆ·ä½œä¸ºä¸€æ‰¹:\nmsg1ï¼Œuserid1,userid2,userid3,...........userid100\nmsg1,   userid101,.............userid200\n................\nç½‘å…³æœºæ¥æ”¶åˆ°é˜Ÿåˆ—ä¸­æ¶ˆæ¯åï¼Œä»ä¿¡æ¯ä¸­è§£æå‡ºç”¨æˆ·IDåˆ—è¡¨ï¼Œæ ¹æ®ç”¨æˆ·IDè·å¾—è¿™ä¸ªç”¨æˆ·å¯¹åº”çš„é•¿è¿æ¥é€šé“ï¼Œæœ€åæŠŠèŠå¤©æ¶ˆæ¯æ¨é€ç»™ç”¨æˆ·ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1648484466,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1111741,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f6/bd/b37fc892.jpg","nickname":"è–›æ–°è£","note":"","ucode":"60BD2DD1C68F8C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":226077,"discussion_content":"è¿™ç§ç¦»çº¿æ¨é€æ€ä¹ˆå¤„ç†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586419194,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1205253,"avatar":"https://static001.geekbang.org/account/avatar/00/12/64/05/6989dce6.jpg","nickname":"æˆ‘æ¥ä¹Ÿ","note":"","ucode":"773D6104F56767","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":30546,"discussion_content":"æˆ‘ä¹Ÿæœ‰è¿™ä¸ªç–‘é—®.\n\nå¦‚æœæ˜¯ä¸‡äººç¾¤, ç”¨æˆ·å”¯ä¸€ç¼–å·æŒ‰4å­—èŠ‚/16å­—èŠ‚,è¯¥ç”¨æˆ·ä¿¡æ¯ä¹Ÿæœ‰39KB/156KB.\nè¿™ä¸ªä¿¡æ¯è‚¯å®šæ¯”æ¶ˆæ¯æœ¬äº‹çš„å†…å®¹å¤§å¤šäº†.\n\né™¤éè¯¥ç¾¤ä¼šè¯çš„èŠå¤©æ¶ˆæ¯ä¹Ÿåšç¼“å­˜,æ¯”å¦‚0.5s/1sæ¨é€ä¸€æ¬¡, å¦åˆ™æ¯æ¡æ¶ˆæ¯éƒ½åŠ è¿™ä¸ªå¤´,å¼€é”€æœ‰ç‚¹å¤§å•Š.","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570842056,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":140090,"user_name":"å¢™è§’å„¿çš„èŠ±","can_delete":false,"product_type":"c1","uid":1258474,"ip_address":"","ucode":"EE5CAD76175CCF","user_header":"","comment_is_top":false,"comment_ctime":1570805388,"is_pvip":false,"replies":[{"id":"54461","content":"ä¹‹å‰æœ‰æåˆ°å¾®ä¿¡æ‰‹æœºç«¯åº”è¯¥èµ°çš„æ˜¯tcpç§æœ‰åè®®ï¼Œä¸æ˜¯websocketã€‚å¦å¤–ä½ æåˆ°çš„websocketå¼±ç½‘ä¸‹å®¹æ˜“æ‰çº¿è¿™ä¸ªå¾—å…·ä½“caseåˆ†æä¸€ä¸‹ï¼Œä¸èƒ½æŠŠè¿™ä¸ªå½’ç»“åˆ°websocketåè®®æœ¬èº«ï¼Œåº•å±‚ä¸€æ ·éƒ½æ˜¯åŸºäºtcpæ¥ä¼ è¾“çš„ã€‚è¿æ¥ä¸ç¨³å®šå’Œå¾ˆå¤šå› ç´ æœ‰å…³ï¼Œè¿æ¥å…¥å£çš„æ˜¯å¦å¤Ÿå¿«ï¼Œæœ‰æ²¡æœ‰æ•…éšœè½¬ç§»é€šé“ï¼Œèƒ½å¦å¿«é€Ÿè¯†åˆ«åˆ°è¿æ¥æ–­å¼€ç„¶åå¿«é€Ÿè¿›è¡Œé‡è¿ï¼Œç½‘ç»œä¼ è¾“çš„æ•°æ®æ˜¯å¦å¤Ÿå°å¤Ÿç²¾ç®€ï¼Œè¿™äº›éƒ½æœ‰å…³ç³»ã€‚å¾®ä¿¡æœ‰ä¸€äº›å…¬å¼€å¯¹å¤–æ¼”è®²çš„èµ„æ–™ï¼Œå¯ä»¥æŸ¥ä¸€ä¸‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"coldwalker","uid":"1297490","ctime":1571057776,"ip_address":"","comment_id":140090,"utype":1}],"discussion_count":3,"race_medal":0,"score":"23045641868","product_id":100034901,"comment_content":"è€å¸ˆ ç”¨websocketåšé•¿é“¾æ¥é€šä¿¡åœ¨ç½‘ç»œè¾ƒå¥½æƒ…å†µä¸‹æ²¡ä»€ä¹ˆé—®é¢˜ ä½†åœ¨å¼±ç½‘ä¸‹å¦‚2g 3gä¸‹å°±ä¼šé¢‘ç¹æ‰çº¿ï¼Œä½†æ˜¯å¾®ä¿¡å´åšçš„è¿™ä¹ˆå¥½ï¼Œåœ°é“é‡Œä»ç„¶å¾ˆç¨³å®šï¼Œå®ƒèµ°çš„ç»å¯¹ä¸æ˜¯websocketï¼Œå®ƒæ€ä¹ˆåšåˆ°çš„è¿™ä¹ˆç¨³å®šé€šç•…å‘¢ï¼Ÿæœ‰ä»€ä¹ˆèµ„æ–™å¯ä»¥æŸ¥çœ‹å­¦ä¹ å—ã€‚","like_count":5,"discussions":[{"author":{"id":1297490,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epK1zyWib7IKYCoRSxIa6dDjrcyBqObGfj1lDVia1pOrSVxyltKI7RfGekdXPQNObwaBQg3gwvarlQA/132","nickname":"coldwalker","note":"","ucode":"AF9AF257A745C9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470240,"discussion_content":"ä¹‹å‰æœ‰æåˆ°å¾®ä¿¡æ‰‹æœºç«¯åº”è¯¥èµ°çš„æ˜¯tcpç§æœ‰åè®®ï¼Œä¸æ˜¯websocketã€‚å¦å¤–ä½ æåˆ°çš„websocketå¼±ç½‘ä¸‹å®¹æ˜“æ‰çº¿è¿™ä¸ªå¾—å…·ä½“caseåˆ†æä¸€ä¸‹ï¼Œä¸èƒ½æŠŠè¿™ä¸ªå½’ç»“åˆ°websocketåè®®æœ¬èº«ï¼Œåº•å±‚ä¸€æ ·éƒ½æ˜¯åŸºäºtcpæ¥ä¼ è¾“çš„ã€‚è¿æ¥ä¸ç¨³å®šå’Œå¾ˆå¤šå› ç´ æœ‰å…³ï¼Œè¿æ¥å…¥å£çš„æ˜¯å¦å¤Ÿå¿«ï¼Œæœ‰æ²¡æœ‰æ•…éšœè½¬ç§»é€šé“ï¼Œèƒ½å¦å¿«é€Ÿè¯†åˆ«åˆ°è¿æ¥æ–­å¼€ç„¶åå¿«é€Ÿè¿›è¡Œé‡è¿ï¼Œç½‘ç»œä¼ è¾“çš„æ•°æ®æ˜¯å¦å¤Ÿå°å¤Ÿç²¾ç®€ï¼Œè¿™äº›éƒ½æœ‰å…³ç³»ã€‚å¾®ä¿¡æœ‰ä¸€äº›å…¬å¼€å¯¹å¤–æ¼”è®²çš„èµ„æ–™ï¼Œå¯ä»¥æŸ¥ä¸€ä¸‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571057776,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1137203,"avatar":"https://static001.geekbang.org/account/avatar/00/11/5a/33/9a66d0b8.jpg","nickname":"Csquare","note":"","ucode":"23CAC353A82D1D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":31796,"discussion_content":"åŸºç¡€ç¯‡é‡Œå¥½åƒæœ‰æåˆ°ï¼Œæ˜¯åŸºäºTCP é•¿è¿æ¥å®šåˆ¶çš„ç§æœ‰åè®®å§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570958399,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1258474,"avatar":"","nickname":"å¢™è§’å„¿çš„èŠ±","note":"","ucode":"EE5CAD76175CCF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1137203,"avatar":"https://static001.geekbang.org/account/avatar/00/11/5a/33/9a66d0b8.jpg","nickname":"Csquare","note":"","ucode":"23CAC353A82D1D","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":31839,"discussion_content":"å—¯ ä½ æœ‰æ›´å¤šèµ„æ–™å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570962272,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":31796,"ip_address":""},"score":31839,"extra":""}]}]},{"had_liked":false,"id":139946,"user_name":"clip","can_delete":false,"product_type":"c1","uid":1019244,"ip_address":"","ucode":"D0E142605A5BD5","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8d/6c/0c2a26c7.jpg","comment_is_top":false,"comment_ctime":1570771729,"is_pvip":true,"replies":[{"id":"54445","content":"å—¯ï¼Œæ˜¯çš„ï¼Œç§æœ‰æ¶ˆæ¯æ˜¯èšåˆï¼Œåˆ é™¤æ˜¯å‰”é™¤ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"coldwalker","uid":"1297490","ctime":1571056716,"ip_address":"","comment_id":139946,"utype":1}],"discussion_count":3,"race_medal":0,"score":"14455673617","product_id":100034901,"comment_content":"ç¾¤èŠçš„ç§æœ‰ç±»å‹æ¶ˆæ¯æ˜¯ä¸æ˜¯è¦é‡‡ç”¨è¡¥é½è€Œä¸æ˜¯å‰”é™¤çš„é€»è¾‘ï¼Ÿå› ä¸ºåŠ äº†ä¸€æ¡ä»…è‡ªå·±å¯è§çš„æ¶ˆæ¯ç»™å…¶ä»–äººéƒ½åˆ›å»ºä¸å¯è§ç´¢å¼•å°±å¾—ä¸å¿å¤±äº†ã€‚","like_count":3,"discussions":[{"author":{"id":1297490,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epK1zyWib7IKYCoRSxIa6dDjrcyBqObGfj1lDVia1pOrSVxyltKI7RfGekdXPQNObwaBQg3gwvarlQA/132","nickname":"coldwalker","note":"","ucode":"AF9AF257A745C9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470185,"discussion_content":"å—¯ï¼Œæ˜¯çš„ï¼Œç§æœ‰æ¶ˆæ¯æ˜¯èšåˆï¼Œåˆ é™¤æ˜¯å‰”é™¤ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571056716,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1205253,"avatar":"https://static001.geekbang.org/account/avatar/00/12/64/05/6989dce6.jpg","nickname":"æˆ‘æ¥ä¹Ÿ","note":"","ucode":"773D6104F56767","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":30541,"discussion_content":"è·Ÿæˆ‘çš„ç–‘é—®ä¸€æ ·,æ­£å‡†å¤‡æå‡ºæ¥çš„.è°¢è°¢ä½ å·²ç»æäº†.","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570841880,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1019244,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8d/6c/0c2a26c7.jpg","nickname":"clip","note":"","ucode":"D0E142605A5BD5","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1205253,"avatar":"https://static001.geekbang.org/account/avatar/00/12/64/05/6989dce6.jpg","nickname":"æˆ‘æ¥ä¹Ÿ","note":"","ucode":"773D6104F56767","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":30709,"discussion_content":"å“ˆå“ˆå“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570853761,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":30541,"ip_address":""},"score":30709,"extra":""}]}]},{"had_liked":false,"id":203822,"user_name":"ğŸ’å­","can_delete":false,"product_type":"c1","uid":1270633,"ip_address":"","ucode":"46072075475E7F","user_header":"https://static001.geekbang.org/account/avatar/00/13/63/69/7275dccc.jpg","comment_is_top":false,"comment_ctime":1586270430,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"10176205022","product_id":100034901,"comment_content":"è€å¸ˆ ä½ å¥½ æˆ‘ä¹‹å‰ä¹Ÿåšè¿‡imç³»ç»Ÿ ä½†æ˜¯åœ¨å­˜å‚¨éƒ¨åˆ†ç”¨ æ•°æ®åº“é€‰å‹æœ‰ä»€ä¹ˆæ¨èå—","like_count":2,"discussions":[{"author":{"id":1203563,"avatar":"https://static001.geekbang.org/account/avatar/00/12/5d/6b/3d42593f.jpg","nickname":"èªå°‘","note":"","ucode":"AB8301B752AC30","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":286834,"discussion_content":"foundationdbäº†è§£ä¸€ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593307964,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1178756,"avatar":"https://static001.geekbang.org/account/avatar/00/11/fc/84/9f8afa9b.jpg","nickname":"ç‘œæ–Œ","note":"","ucode":"171FAF5736F334","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":273087,"discussion_content":"åŒé—®ï¼Œç¾¤èŠæˆ–èŠå¤©å®¤è®°å½•æ€ä¹ˆå­˜å‚¨åˆç†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590409505,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":139987,"user_name":"æˆ‘è¡Œæˆ‘ç´ ","can_delete":false,"product_type":"c1","uid":1224678,"ip_address":"","ucode":"4C69542FAB0671","user_header":"https://static001.geekbang.org/account/avatar/00/12/af/e6/9c77acff.jpg","comment_is_top":false,"comment_ctime":1570780826,"is_pvip":false,"replies":[{"id":"54452","content":"å…¶å®å°±æ˜¯æŠŠç¾¤èŠæ¶ˆæ¯åˆ é™¤è¿™ä¸ªå•ç‹¬è®°å½•ä¸€ä¸‹ï¼Œæ¯”å¦‚ä¸€ä¸ªlisté‡Œé¢ï¼Œkeyæ˜¯ uid_ç¾¤idï¼Œvalueæ˜¯è¿™ä¸ªuidåœ¨è¿™ä¸ªç¾¤åˆ é™¤çš„æ¶ˆæ¯idã€‚æœ€åè¿™ä¸ªç”¨æˆ·è·å–ç¾¤æ¶ˆæ¯æ—¶ï¼Œä»ç¾¤ç»´åº¦çš„å…¨é‡æ¶ˆæ¯é‡Œå‰”é™¤æ‰è¿™ä¸ªç”¨æˆ·åœ¨è¿™ä¸ªç¾¤åˆ é™¤çš„è¿™äº›æ¶ˆæ¯idã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"coldwalker","uid":"1297490","ctime":1571057040,"ip_address":"","comment_id":139987,"utype":1}],"discussion_count":3,"race_medal":0,"score":"10160715418","product_id":100034901,"comment_content":"è€å¸ˆï¼Œæƒ³è¯·é—®ä¸‹ï¼šåœ¨ç”¨æˆ·åˆ é™¤æ¶ˆæ¯çš„æ—¶å€™ï¼ŒæŠŠè¿™æ¡è¢«åˆ é™¤æ¶ˆæ¯åŠ å…¥åˆ°å½“å‰ç”¨æˆ·å’Œç¾¤ç»´åº¦çš„ä¸€ä¸ªåˆ é™¤ç´¢å¼•ä¸­ï¼Œè¿™ä¸€æ­¥ä¸æ˜¯å¾ˆæ˜ç™½","like_count":2,"discussions":[{"author":{"id":1297490,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epK1zyWib7IKYCoRSxIa6dDjrcyBqObGfj1lDVia1pOrSVxyltKI7RfGekdXPQNObwaBQg3gwvarlQA/132","nickname":"coldwalker","note":"","ucode":"AF9AF257A745C9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470200,"discussion_content":"å…¶å®å°±æ˜¯æŠŠç¾¤èŠæ¶ˆæ¯åˆ é™¤è¿™ä¸ªå•ç‹¬è®°å½•ä¸€ä¸‹ï¼Œæ¯”å¦‚ä¸€ä¸ªlisté‡Œé¢ï¼Œkeyæ˜¯ uid_ç¾¤idï¼Œvalueæ˜¯è¿™ä¸ªuidåœ¨è¿™ä¸ªç¾¤åˆ é™¤çš„æ¶ˆæ¯idã€‚æœ€åè¿™ä¸ªç”¨æˆ·è·å–ç¾¤æ¶ˆæ¯æ—¶ï¼Œä»ç¾¤ç»´åº¦çš„å…¨é‡æ¶ˆæ¯é‡Œå‰”é™¤æ‰è¿™ä¸ªç”¨æˆ·åœ¨è¿™ä¸ªç¾¤åˆ é™¤çš„è¿™äº›æ¶ˆæ¯idã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571057040,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1649662,"avatar":"https://static001.geekbang.org/account/avatar/00/19/2b/fe/7925eb7e.jpg","nickname":"pdf","note":"","ucode":"A44250955878BB","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1297490,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epK1zyWib7IKYCoRSxIa6dDjrcyBqObGfj1lDVia1pOrSVxyltKI7RfGekdXPQNObwaBQg3gwvarlQA/132","nickname":"coldwalker","note":"","ucode":"AF9AF257A745C9","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":551922,"discussion_content":"è€å¸ˆï¼Œå¦‚æœæŸ¥è¯¢çš„æ—¶å€™æ²¡æœ‰åŠæ³•è¿è¡¨çš„è¯ï¼Œè¯¥æ€ä¹ˆæŸ¥è¯¢å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645174298,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":470200,"ip_address":""},"score":551922,"extra":""}]},{"author":{"id":1205253,"avatar":"https://static001.geekbang.org/account/avatar/00/12/64/05/6989dce6.jpg","nickname":"æˆ‘æ¥ä¹Ÿ","note":"","ucode":"773D6104F56767","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":30537,"discussion_content":"å°è¯•å›ç­”ä¸‹,ä¸ä¸€å®šå¯¹.\n\nå¯ä»¥åœ¨å¦å¤–ä¸€ä¸ªè¡¨ä¸­è®°å½•,æŸä¸ªç”¨æˆ·,åœ¨æŸä¸ªç¾¤ä¸­,åˆ é™¤äº†å“ªäº›æ¶ˆæ¯.\nè¿™æ ·åœ¨æŸ¥è¯¢è¯¥ç¾¤æ¶ˆæ¯æ—¶,æ ¹æ®å·²åˆ é™¤çš„æ¶ˆæ¯å»åšè¿‡æ»¤.","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570841833,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":139854,"user_name":"ğŸ¾","can_delete":false,"product_type":"c1","uid":1087256,"ip_address":"","ucode":"D0AD0260351C31","user_header":"https://static001.geekbang.org/account/avatar/00/10/97/18/a5218104.jpg","comment_is_top":false,"comment_ctime":1570756745,"is_pvip":false,"replies":[{"id":"54433","content":"1. æ˜¯çš„ã€‚<br>2. ä¸€èˆ¬è¿™ç§æƒ…å†µå¯ä»¥åªä¸‹æ¨ç¦»çº¿æ¶ˆæ¯ï¼Œå†å²æ¶ˆæ¯é€šè¿‡ç”¨æˆ·æ¥è§¦å‘æ‹‰å–ã€‚<br>3. ä¸ä¿å­˜æ¶ˆæ¯è®°å½•æ˜¯æŒ‡å®¢æˆ·ç«¯ä¸åœ¨æœ¬åœ°å­˜å‚¨æ‰€æœ‰æ¶ˆæ¯ï¼Ÿè¿™ç§æ–¹å¼ä¸å¤ªå¥½å‘€ï¼Œè¦ä¸æ²¡ç½‘å°±çœ‹ä¸äº†æ‰€æœ‰èŠå¤©è®°å½•äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"coldwalker","uid":"1297490","ctime":1571056181,"ip_address":"","comment_id":139854,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10160691337","product_id":100034901,"comment_content":"è€å¸ˆä¸Šåˆå¥½ã€æœ‰äº›ç–‘æƒ‘æƒ³è·Ÿæ‚¨ç¡®è®¤ä¸€ä¸‹ï¼Œæ¶ˆæ¯å¤šç»ˆç«¯æ¼«æ¸¸ï¼Œä¸ºè§£å†³ç”¨æˆ·ç¦»çº¿æœŸé—´æ”¶ä¸åˆ°æ¶ˆæ¯çš„é—®é¢˜ï¼Œæˆ‘ä»¬ä¼šåœ¨æœåŠ¡ç«¯æŒ‰ç…§æ¥æ”¶ç”¨æˆ·ç»´åº¦ï¼Œæš‚å­˜ç”¨æˆ·ç¦»çº¿æœŸé—´çš„æ¶ˆæ¯ï¼Œç­‰è¯¥ç”¨æˆ·ä¸‹æ¬¡ä¸Šçº¿æ—¶å†è¿›è¡Œæ‹‰å–åŒæ­¥ã€‚<br>1ã€è¿™é‡Œçš„åŒæ­¥ï¼Œå®é™…ä¸Šæ˜¯æŠŠæœåŠ¡ç«¯çš„æ¶ˆæ¯åŒæ­¥åˆ°å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯ä¹Ÿä¿å­˜è¿™äº›æ¶ˆæ¯å§ï¼Ÿ<br>2ã€å‡å¦‚ç”¨æˆ·é‡æ–°å®‰è£…äº†APPï¼ŒæŠŠå®¢æˆ·ç«¯ä¿å­˜çš„æ•°æ®ä¹Ÿæ¸…ç©ºäº†ï¼Œåƒè¿™ç§æƒ…å†µä¸‹ï¼Œä¸€èˆ¬å¤„ç†æ˜¯åªåŒæ­¥ç¦»çº¿æ¶ˆæ¯ï¼Œä¸åŒæ­¥å†å²æ•°æ®å—ï¼Ÿ<br>3ã€å¦‚æœå®¢æˆ·ç«¯ä¸ä¿å­˜æ¶ˆæ¯è®°å½•ï¼Œä½†åˆè¦æ˜¾ç¤ºæ‰€æœ‰å†å²æ•°æ®ï¼Œæ˜¯ä¸æ˜¯ä¸éœ€è¦è®¾è®¡è¿™ä¸ªç¦»çº¿å­˜å‚¨äº†ï¼Œç›´æ¥è¯»å–ä¼šè¯ç»´åº¦çš„æ‰€æœ‰æ¶ˆæ¯å°±å¥½ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1297490,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epK1zyWib7IKYCoRSxIa6dDjrcyBqObGfj1lDVia1pOrSVxyltKI7RfGekdXPQNObwaBQg3gwvarlQA/132","nickname":"coldwalker","note":"","ucode":"AF9AF257A745C9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470143,"discussion_content":"1. æ˜¯çš„ã€‚\n2. ä¸€èˆ¬è¿™ç§æƒ…å†µå¯ä»¥åªä¸‹æ¨ç¦»çº¿æ¶ˆæ¯ï¼Œå†å²æ¶ˆæ¯é€šè¿‡ç”¨æˆ·æ¥è§¦å‘æ‹‰å–ã€‚\n3. ä¸ä¿å­˜æ¶ˆæ¯è®°å½•æ˜¯æŒ‡å®¢æˆ·ç«¯ä¸åœ¨æœ¬åœ°å­˜å‚¨æ‰€æœ‰æ¶ˆæ¯ï¼Ÿè¿™ç§æ–¹å¼ä¸å¤ªå¥½å‘€ï¼Œè¦ä¸æ²¡ç½‘å°±çœ‹ä¸äº†æ‰€æœ‰èŠå¤©è®°å½•äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571056181,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":139846,"user_name":"å¢™è§’å„¿çš„èŠ±","can_delete":false,"product_type":"c1","uid":1258474,"ip_address":"","ucode":"EE5CAD76175CCF","user_header":"","comment_is_top":false,"comment_ctime":1570755546,"is_pvip":false,"replies":[{"id":"54443","content":"è¿™ä¸ªæ˜¯ä¸ªé—®é¢˜ï¼Œå®é™…ä¸Šä¹Ÿå¯ä»¥ä¸éœ€è¦æŒ‰ç…§uidç»´åº¦æ¥å­˜å‚¨æ¶ˆæ¯ï¼ŒæŒ‰ç…§æ¶ˆæ¯ç»´åº¦å­˜å‚¨å·²ä¸ŠæŠ¥è¿‡ é˜…è¯»äº‹ä»¶çš„uidå°±å¯ä»¥ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"coldwalker","uid":"1297490","ctime":1571056660,"ip_address":"","comment_id":139846,"utype":1}],"discussion_count":3,"race_medal":0,"score":"10160690138","product_id":100034901,"comment_content":"ç¾¤èŠä¿¡æ¯å¦‚æœä¸é‡‡ç”¨æ”¶å‘ç®±çš„æ–¹å¼å­˜å‚¨ï¼Œç¢°è§é’‰é’‰è¿™ç§éœ€è¦è®°å½•æŸ¥çœ‹ä¸€æ¡ç¾¤æ¶ˆæ¯å“ªäº›æˆå‘˜å·²é˜…ï¼Œå“ªäº›æœªé˜…ï¼Œå°±æ— èƒ½ä¸ºåŠ›äº†","like_count":2,"discussions":[{"author":{"id":1297490,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epK1zyWib7IKYCoRSxIa6dDjrcyBqObGfj1lDVia1pOrSVxyltKI7RfGekdXPQNObwaBQg3gwvarlQA/132","nickname":"coldwalker","note":"","ucode":"AF9AF257A745C9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470139,"discussion_content":"è¿™ä¸ªæ˜¯ä¸ªé—®é¢˜ï¼Œå®é™…ä¸Šä¹Ÿå¯ä»¥ä¸éœ€è¦æŒ‰ç…§uidç»´åº¦æ¥å­˜å‚¨æ¶ˆæ¯ï¼ŒæŒ‰ç…§æ¶ˆæ¯ç»´åº¦å­˜å‚¨å·²ä¸ŠæŠ¥è¿‡ é˜…è¯»äº‹ä»¶çš„uidå°±å¯ä»¥ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571056660,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1211987,"avatar":"https://static001.geekbang.org/account/avatar/00/12/7e/53/c29c2fc9.jpg","nickname":"sdjdd","note":"","ucode":"512F2338DFF793","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":29276,"discussion_content":"å’Œæ¶ˆæ¯åˆ é™¤ä¸€æ ·ï¼Œå†ç»´æŠ¤ä¸€ä¸ªå·²é˜…è¡¨ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570758998,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1258474,"avatar":"","nickname":"å¢™è§’å„¿çš„èŠ±","note":"","ucode":"EE5CAD76175CCF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1211987,"avatar":"https://static001.geekbang.org/account/avatar/00/12/7e/53/c29c2fc9.jpg","nickname":"sdjdd","note":"","ucode":"512F2338DFF793","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":29918,"discussion_content":"ä¸€æ ·çš„ å·²é˜…è¡¨ä¼šæ¯”è¾ƒå¤§ å­˜å‚¨çœä¸ä¸‹æ¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570790781,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":29276,"ip_address":""},"score":29918,"extra":""}]}]},{"had_liked":false,"id":187476,"user_name":"kamida","can_delete":false,"product_type":"c1","uid":1904146,"ip_address":"","ucode":"16D7CA59870AC0","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/jXbwicoDwia7ooDfwBTRyvNYQkefnVwF1CMicMS8FqKfuFAdvVZo2pqc4ic0R9kSdHTIxaE6YyqxwX8BdNGv5PqSIw/132","comment_is_top":false,"comment_ctime":1584128526,"is_pvip":false,"replies":[{"id":"72532","content":"timerå’Œflusheræ˜¯å…±ç”¨çš„ï¼Œå› ä¸ºåŠ æœªè¯»æ˜¯uidç»´åº¦çš„ï¼Œæ‰€ä»¥æœ€ç»ˆæ‰§è¡Œæ—¶æŒ‰ç…§uidæ¥å½’å¹¶å°±å¯ä»¥äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"coldwalker","uid":"1297490","ctime":1584279948,"ip_address":"","comment_id":187476,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5879095822","product_id":100034901,"comment_content":"è€å¸ˆ timerå’Œflusheræ˜¯æ‰€æœ‰ç¾¤å…±ç”¨ä¸€ä¸ªå— é‚£ä»–ä»¬æ˜¯æ€ä¹ˆåˆ†åˆ«trackä¸åŒçš„ç¾¤çš„å‘¢","like_count":1,"discussions":[{"author":{"id":1297490,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epK1zyWib7IKYCoRSxIa6dDjrcyBqObGfj1lDVia1pOrSVxyltKI7RfGekdXPQNObwaBQg3gwvarlQA/132","nickname":"coldwalker","note":"","ucode":"AF9AF257A745C9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":487115,"discussion_content":"timerå’Œflusheræ˜¯å…±ç”¨çš„ï¼Œå› ä¸ºåŠ æœªè¯»æ˜¯uidç»´åº¦çš„ï¼Œæ‰€ä»¥æœ€ç»ˆæ‰§è¡Œæ—¶æŒ‰ç…§uidæ¥å½’å¹¶å°±å¯ä»¥äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584279948,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":153850,"user_name":"yic","can_delete":false,"product_type":"c1","uid":1201577,"ip_address":"","ucode":"C8DC471B7C28B8","user_header":"https://static001.geekbang.org/account/avatar/00/12/55/a9/5282a560.jpg","comment_is_top":false,"comment_ctime":1574318342,"is_pvip":false,"replies":[{"id":"59885","content":"åƒå¾®åšæ˜¯åƒä¸‡çº§åœ¨çº¿ï¼Œå¾®ä¿¡å…·ä½“æ•°æ®ä¸å¤ªæ¸…æ¥šã€‚å•å°ç½‘å…³æœºè™½ç„¶ç†è®ºä¸Šèƒ½åˆ°ç™¾ä¸‡çº§åˆ«ï¼Œä½†çº¿ä¸Šä¸€èˆ¬æ§åˆ¶åœ¨å‡ åä¸‡æ¯”è¾ƒæ­£å¸¸ï¼Œå¦‚æœæ˜¯ç±»ä¼¼ç›´æ’­çš„ä¸šåŠ¡ä¼šæ§åˆ¶åœ¨æ›´ä½æ°´å¹³ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"coldwalker","uid":"1297490","ctime":1574771878,"ip_address":"","comment_id":153850,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5869285638","product_id":100034901,"comment_content":"è€å¸ˆï¼Œçœ‹äº†è¿™ä¹ˆå¤šèŠ‚è¯¾ç¨‹ï¼Œçªç„¶æœ‰ä¸ªé—®é¢˜æƒ³é—®ï¼šåƒå¾®åšã€å¾®ä¿¡ç­‰è¿™äº›APPä¸€èˆ¬çš„å®æ—¶åœ¨çº¿äººæ•°å¤§æ¦‚æ˜¯ä»€ä¹ˆé‡çº§ï¼Ÿä¸€å°ç½‘å…³æœºå¤§æ¦‚èƒ½æ‰¿è½½å¤šå°‘åœ¨çº¿ç”¨æˆ·å‘€ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1297490,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epK1zyWib7IKYCoRSxIa6dDjrcyBqObGfj1lDVia1pOrSVxyltKI7RfGekdXPQNObwaBQg3gwvarlQA/132","nickname":"coldwalker","note":"","ucode":"AF9AF257A745C9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475296,"discussion_content":"åƒå¾®åšæ˜¯åƒä¸‡çº§åœ¨çº¿ï¼Œå¾®ä¿¡å…·ä½“æ•°æ®ä¸å¤ªæ¸…æ¥šã€‚å•å°ç½‘å…³æœºè™½ç„¶ç†è®ºä¸Šèƒ½åˆ°ç™¾ä¸‡çº§åˆ«ï¼Œä½†çº¿ä¸Šä¸€èˆ¬æ§åˆ¶åœ¨å‡ åä¸‡æ¯”è¾ƒæ­£å¸¸ï¼Œå¦‚æœæ˜¯ç±»ä¼¼ç›´æ’­çš„ä¸šåŠ¡ä¼šæ§åˆ¶åœ¨æ›´ä½æ°´å¹³ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574771878,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":141215,"user_name":"leslie","can_delete":false,"product_type":"c1","uid":1324255,"ip_address":"","ucode":"798E7C1CC98CC2","user_header":"https://static001.geekbang.org/account/avatar/00/14/34/df/64e3d533.jpg","comment_is_top":false,"comment_ctime":1571129699,"is_pvip":false,"replies":[{"id":"54737","content":"å“ˆå“ˆï¼Œæ„Ÿè°¢æ”¯æŒå’Œè‚¯å®š~","user_name":"ä½œè€…å›å¤","user_name_real":"coldwalker","uid":"1297490","ctime":1571225330,"ip_address":"","comment_id":141215,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5866096995","product_id":100034901,"comment_content":"    å…¶å®ç‚¹å¯¹ç‚¹çš„åœ¨çº¿ä¸‹æ¨ï¼šä¸ªäººç†è§£å°±æ˜¯éå¸¸è€ƒéªŒä¸­é—´ä»¶å­˜å‚¨&#47;æ•°æ®ç³»ç»Ÿçš„è®¾è®¡ï¼Œä¸åˆç†çš„è®¾è®¡å¿…ç„¶é€ æˆæŸå—çš„è´Ÿè½½è¿‡å¤§ï¼Œå¦‚ä½•åˆç†çš„è®¾è®¡å’Œä½¿ç”¨è¿™äº›ä¸œè¥¿ä¼šæˆä¸ºå…³é”®ã€‚<br>   è€å¸ˆçš„å›¾ä¸­å°±æœ‰MQå’ŒRMDBå…¶å®è¿˜æœ‰Nosql DBï¼šåˆšå¥½ä»Šå¤©æç¥è€å¸ˆçš„MQåˆšåˆšå®Œè¯¾ï¼Œçœ‹å®Œäº†è€å¸ˆçš„21è¯¾åå‘æ¥å­¦ä¹ è¿™è¯¾çš„ï¼›çœ‹è¿‡å›½å†…çš„ä¸€äº›IMï¼Œå…¶å®è¿™å—çœŸå®çš„è®¾è®¡éƒ½è¢«éšè—äº†ï¼›ä¸ªäººè§‰å¾—è¿™å—å¦‚ä½•ä¿®æ­£æˆä¸ºè‡ªå·±çš„ä¸œè¥¿å¦‚ä½•åˆ©ç”¨å’Œè®¾è®¡å¥½ä¸­é—´ä»¶å­˜å‚¨åº”å½“æ˜¯IMè®¾è®¡çš„ä¸€å—é‡ç‚¹å’Œéš¾ç‚¹ã€‚<br>    IMæœ‰å¬é—»è¯´ç®€å•çš„å¯æ˜¯è€å¸ˆçš„è¯¾ç¨‹å­¦åˆ°ç°åœ¨ï¼šæˆ‘å‘ç°å¦‚ä½•åˆç†çš„è®¾è®¡åº”ç”¨æ¶æ„ã€æ•°æ®ç³»ç»Ÿã€ä»¥åŠé…åˆåˆé€‚çš„ç›‘æ§åº”å½“æ˜¯ç³»ç»Ÿæˆè´¥çš„å…³é”®ã€‚è°¢è°¢è€å¸ˆè¾›å‹¤çš„åˆ†äº«ä»¥åŠå›°æƒ‘æ—¶çš„æç‚¹å’Œæ•™è¯²ã€‚","like_count":1,"discussions":[{"author":{"id":1297490,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epK1zyWib7IKYCoRSxIa6dDjrcyBqObGfj1lDVia1pOrSVxyltKI7RfGekdXPQNObwaBQg3gwvarlQA/132","nickname":"coldwalker","note":"","ucode":"AF9AF257A745C9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470698,"discussion_content":"å“ˆå“ˆï¼Œæ„Ÿè°¢æ”¯æŒå’Œè‚¯å®š~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571225330,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":140555,"user_name":"é»„æµ·","can_delete":false,"product_type":"c1","uid":1011156,"ip_address":"","ucode":"AC45303035622E","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/L8Hia5sfiafASmBa3eTLMH8C25gMCHLTXddMkIiaCb0ky48FowibUrLQ9WSeTxSIS3prFsSjiaarwbRp1kTXDbug9eQ/132","comment_is_top":false,"comment_ctime":1570984455,"is_pvip":false,"replies":[{"id":"54464","content":"è¿™ä¸ªæ–¹æ¡ˆçš„é—®é¢˜åœ¨äºï¼šç¾¤èŠçš„ä½¿ç”¨åœºæ™¯å¹¶ä¸å­˜åœ¨è¯´â€œæŸä¸ªç”¨æˆ·åœ¨æŸä¸ªç¾¤åœ¨çº¿â€è¿™ä¹ˆä¸ªè¯´æ³•ï¼Œå’Œç›´æ’­çš„æˆ¿é—´æ¦‚å¿µæ˜¯ä¸ä¸€æ ·çš„ã€‚å¯ä»¥è®¤ä¸ºåªè¦ç”¨æˆ·ä¸Šçº¿å°±åº”è¯¥å¤„ç†æ‰€æœ‰ç¾¤çš„æ¶ˆæ¯ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"coldwalker","uid":"1297490","ctime":1571058159,"ip_address":"","comment_id":140555,"utype":1}],"discussion_count":5,"race_medal":0,"score":"5865951751","product_id":100034901,"comment_content":"è¯·è¢è€å¸ˆçœ‹ä¸€ä¸‹è¿™æ ·çš„æ–¹æ¡ˆè¡Œå—ï¼šæŠŠå„å°ç½‘å…³æœºä¸Šçš„åœ¨çº¿ç¾¤(åœ¨çº¿ç¾¤æˆå‘˜æ•°&gt;0ï¼‰çš„ç¾¤ uid ä½œä¸º keyï¼ŒæŠŠç½‘å…³æœºçš„æ¶ˆæ¯é˜Ÿåˆ— topic ä½œä¸º valueï¼Œå†™å…¥ redis set ä¸­ï¼Œå‘é€ç¾¤æ¶ˆæ¯æ—¶ï¼Œæ ¹æ® key ç¾¤ uid ä» redis set ä¸­æŸ¥å‡ºç¾¤æˆå‘˜åˆ†å¸ƒåœ¨å“ªäº›ç½‘å…³æœºä¸Šï¼Œç„¶åé€šè¿‡æ¶ˆæ¯é˜Ÿåˆ—ï¼Œç²¾å‡†çš„å‘è¿™äº›ç½‘å…³æœºæ¨é€ç¾¤èŠæ¶ˆæ¯","like_count":1,"discussions":[{"author":{"id":1297490,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epK1zyWib7IKYCoRSxIa6dDjrcyBqObGfj1lDVia1pOrSVxyltKI7RfGekdXPQNObwaBQg3gwvarlQA/132","nickname":"coldwalker","note":"","ucode":"AF9AF257A745C9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470437,"discussion_content":"è¿™ä¸ªæ–¹æ¡ˆçš„é—®é¢˜åœ¨äºï¼šç¾¤èŠçš„ä½¿ç”¨åœºæ™¯å¹¶ä¸å­˜åœ¨è¯´â€œæŸä¸ªç”¨æˆ·åœ¨æŸä¸ªç¾¤åœ¨çº¿â€è¿™ä¹ˆä¸ªè¯´æ³•ï¼Œå’Œç›´æ’­çš„æˆ¿é—´æ¦‚å¿µæ˜¯ä¸ä¸€æ ·çš„ã€‚å¯ä»¥è®¤ä¸ºåªè¦ç”¨æˆ·ä¸Šçº¿å°±åº”è¯¥å¤„ç†æ‰€æœ‰ç¾¤çš„æ¶ˆæ¯ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571058159,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1011156,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/L8Hia5sfiafASmBa3eTLMH8C25gMCHLTXddMkIiaCb0ky48FowibUrLQ9WSeTxSIS3prFsSjiaarwbRp1kTXDbug9eQ/132","nickname":"é»„æµ·","note":"","ucode":"AC45303035622E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":32919,"discussion_content":"è°¢è°¢å›å¤ï¼Œä¸ªäººè¡¨è¾¾æœ‰è¯¯ï¼Œä¹±å–äº†â€œç¾¤åœ¨çº¿â€çš„è¯´æ³•ï¼Œåº”è¯¥ç§°ä¸ºâ€œæœ¬ç½‘å…³æœºä¸Šåœ¨çº¿ç¾¤æˆå‘˜æ‰€å±çš„ç¾¤ uid â€ã€‚ä¸¾ä¸ªä¾‹å­è¯´æ˜è¿™ä¸ªæ–¹æ¡ˆçš„ä½¿ç”¨åœºæ™¯ï¼šå‡å¦‚æœ‰åä¸ªç½‘å…³æœºï¼ˆ1ï¼Œ2ï¼Œâ€¦10ï¼‰ï¼Œä¸¤ä¸ªï¼ˆåœ¨åŒä¸€ä¸ªç¾¤ uid æ˜¯ 111  çš„ï¼‰åœ¨çº¿ç”¨æˆ·Aå’ŒBï¼ŒAè¿åœ¨1å·ç½‘å…³æœºä¸Šï¼ŒBè¿åœ¨10å·ç½‘å…³æœºä¸Šï¼Œå°±æŠŠ key = 111 ï¼Œvalue = [ 1, 10 ] å†™å…¥ redis set ä¸­ã€‚A æˆ– B å‘ç¾¤èŠæ¶ˆæ¯æ—¶ï¼Œæ ¹æ® redis set ä¸­çš„å€¼ [ 1ï¼Œ10 ] å¯çŸ¥ï¼Œå‘1æˆ–10å·ç½‘å…³æœºæ¨é€æ¶ˆæ¯å³å¯ï¼Œä¸éœ€è¦å‘2ï¼Œ3ï¼Œâ€¦9 å·ç½‘å…³æœºæ¨é€æ¶ˆæ¯ã€‚æˆ‘æ­£åœ¨åšå¾®ä¿¡ç¾¤èŠçš„åŠŸèƒ½ï¼Œæƒ³è¯·è€å¸ˆå¸®å¿™å®¡æ ¸ä¸€ä¸‹è¿™ä¸ªæ–¹æ¡ˆå¯è¡Œå—ï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1571066488,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1024294,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaELZPnUAiajaR5C25EDLWeJURggyiaOP5GGPe2qlwpQcm5e3ybib8OsP4tvddFDLVRSNNGL5I3SFPJHsA/132","nickname":"null","note":"","ucode":"F9039EFED6B55D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1011156,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/L8Hia5sfiafASmBa3eTLMH8C25gMCHLTXddMkIiaCb0ky48FowibUrLQ9WSeTxSIS3prFsSjiaarwbRp1kTXDbug9eQ/132","nickname":"é»„æµ·","note":"","ucode":"AC45303035622E","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":64444,"discussion_content":"ä½ è¿™ä¸ªè®¾è®¡ï¼Œæ˜¯ä¸æ˜¯åˆå›åˆ°äº†â€œä¸­å¤®åœ¨çº¿çŠ¶æ€â€çš„è®¾è®¡æ–¹æ¡ˆäº†ï¼Ÿ\n\nçº¿ä¸Šç¯å¢ƒï¼Œç”¨æˆ·åŸºæ•°è¾ƒå¤§çš„æƒ…å†µï¼Œå¯ä»¥è¿‘ä¼¼è®¤ä¸ºï¼Œç”¨æˆ·è¢«å‡åˆ†åˆ°æ¯å°ç½‘å…³æœºä¸Šã€‚åŒæ—¶ï¼Œä¹Ÿå¾ˆå¤§æ¦‚ç‡ï¼Œç¾¤æˆå‘˜æ˜¯åˆ†æ•£åœ¨æ¯å°ç½‘å…³æœºä¸Šã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574948371,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":32919,"ip_address":""},"score":64444,"extra":""}]},{"author":{"id":1350159,"avatar":"https://static001.geekbang.org/account/avatar/00/14/9a/0f/da7ed75a.jpg","nickname":"èŠ’æœå°‘ä¾ ","note":"","ucode":"98D0BBB52BB80F","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":207558,"discussion_content":"ä»å‡ ç‚¹è€ƒè™‘å§ã€‚å¦‚æœç½‘å…³æœºä¸ªæ•°ç¡®å®å¾ˆå¤šï¼ˆæ¯”å¦‚è¯´æˆåƒä¸Šä¸‡ä¸ªï¼‰ï¼Œå¹¶ä¸”è®¾æ³•æŠŠåŒä¸€ç¾¤ï¼ˆç›´æ’­é—´ï¼‰çš„ç”¨æˆ·å°½é‡é›†ä¸­åˆ°ç½‘å…³æœºä¸Šï¼Œå¯ä»¥æå‡ä¸€éƒ¨åˆ†æ€§èƒ½ã€‚ä½†æ˜¯ï¼Œéœ€è¦é¢å¤–çš„ä¸­å¤®çŠ¶æ€ç»´æŠ¤ï¼Œå¼€å‘ç¨å¾®å¤æ‚äº†ä¸€ç‚¹ã€‚è€Œä¸”çº¿ä¸Šç¯å¢ƒï¼Œå¤§æ¦‚ç‡ç½‘å…³æœºä¸ä¼šé‚£ä¹ˆå¤šä¸ªï¼Œè€Œä¸”ç”¨æˆ·ä¹Ÿå¾ˆå¤§æ¦‚ç‡æ˜¯åˆ†æ•£çš„ã€‚æ‰€ä»¥å¯ä»¥æƒè¡¡ä¸‹åˆ©å¼Šã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584503391,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1201577,"avatar":"https://static001.geekbang.org/account/avatar/00/12/55/a9/5282a560.jpg","nickname":"yic","note":"","ucode":"C8DC471B7C28B8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":54830,"discussion_content":"æ„Ÿè§‰ä½ è¿™ä¸ªæ€è·¯å¯¹äºç½‘å…³æœºä¸ªæ•°å¾ˆå¤šï¼Œè€Œæ¯ä¸ªç¾¤æ€»äººæ•°ä¸å¤§çš„æƒ…å†µä¸‹å¯ä»¥è€ƒäº†ï¼Œå¦‚æœæ˜¯&#34;ä¸‡äººç¾¤&#34;è¿™ç§åœºæ™¯ï¼Œè¿™ä¹ˆè€ƒè™‘å…¶å®æ€§èƒ½ä¸Šæ²¡æœ‰ä»€ä¹ˆå¸®åŠ©ï¼Œåè€Œä¸šåŠ¡ä¸Šå¤æ‚äº†ã€‚-- ä¸ªäººè§‚ç‚¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574317766,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":139884,"user_name":"æœ¨æ§¿èŠ±å¼€","can_delete":false,"product_type":"c1","uid":1068781,"ip_address":"","ucode":"7DD06CDB91A8ED","user_header":"https://static001.geekbang.org/account/avatar/00/10/4e/ed/e99fc0f9.jpg","comment_is_top":false,"comment_ctime":1570759988,"is_pvip":false,"replies":[{"id":"54426","content":"è¿™é‡Œçš„æ„æ€æ˜¯ä¸€ä¸ªç¾¤æœ‰ä¸€ä¸‡äººçš„è¿™ç§è¶…å¤§è§„æ¨¡ç¾¤ã€‚åªæœ‰åœ¨çº¿çš„ç”¨æˆ·æ‰ä¼šå»ºç«‹é•¿è¿","user_name":"ä½œè€…å›å¤","user_name_real":"coldwalker","uid":"1297490","ctime":1571055907,"ip_address":"","comment_id":139884,"utype":1}],"discussion_count":3,"race_medal":0,"score":"5865727284","product_id":100034901,"comment_content":"ä¸‡äººç¾¤èŠï¼Œç³»ç»Ÿæ˜¯ç»´æŠ¤äº†ä¸‡ä¸ªTCPé“¾æ¥å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1297490,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epK1zyWib7IKYCoRSxIa6dDjrcyBqObGfj1lDVia1pOrSVxyltKI7RfGekdXPQNObwaBQg3gwvarlQA/132","nickname":"coldwalker","note":"","ucode":"AF9AF257A745C9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470158,"discussion_content":"è¿™é‡Œçš„æ„æ€æ˜¯ä¸€ä¸ªç¾¤æœ‰ä¸€ä¸‡äººçš„è¿™ç§è¶…å¤§è§„æ¨¡ç¾¤ã€‚åªæœ‰åœ¨çº¿çš„ç”¨æˆ·æ‰ä¼šå»ºç«‹é•¿è¿","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571055907,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1205253,"avatar":"https://static001.geekbang.org/account/avatar/00/12/64/05/6989dce6.jpg","nickname":"æˆ‘æ¥ä¹Ÿ","note":"","ucode":"773D6104F56767","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":30549,"discussion_content":"åœ¨çº¿ç”¨æˆ·æ‰éœ€è¦ç»´æŠ¤tcpè¿æ¥.\n\nä¸€ä¸ªç½‘å…³å¯ä»¥å¾ˆå®¹æ˜“çš„åšåˆ°æ”¯æŒç™¾ä¸‡socketåœ¨çº¿çš„.","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570842193,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1182631,"avatar":"https://static001.geekbang.org/account/avatar/00/12/0b/a7/6ef32187.jpg","nickname":"Keep-Moving","note":"","ucode":"76F33C06E07A27","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":30054,"discussion_content":"ä¸‡äººç¾¤èŠï¼Œä¸ä¸€å®šæ˜¯ä¸‡äººåŒæ—¶åœ¨çº¿","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570797197,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":334899,"user_name":"pdf","can_delete":false,"product_type":"c1","uid":1649662,"ip_address":"","ucode":"A44250955878BB","user_header":"https://static001.geekbang.org/account/avatar/00/19/2b/fe/7925eb7e.jpg","comment_is_top":false,"comment_ctime":1645174363,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1645174363","product_id":100034901,"comment_content":"è€å¸ˆï¼Œå¦‚æœç¾¤æ¶ˆæ¯åˆ é™¤ä½¿ç”¨å¦å¤–ä¸€ä¸ªè¡¨è®°å½•åˆ é™¤æ“ä½œï¼Œåœ¨æ²¡æœ‰è¿è¡¨çš„æƒ…å†µä¸‹è¯¥æ€ä¹ˆæŸ¥è¯¢å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":334636,"user_name":"pdf","can_delete":false,"product_type":"c1","uid":1649662,"ip_address":"","ucode":"A44250955878BB","user_header":"https://static001.geekbang.org/account/avatar/00/19/2b/fe/7925eb7e.jpg","comment_is_top":false,"comment_ctime":1645026207,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1645026207","product_id":100034901,"comment_content":"è€å¸ˆï¼Œå„ä½åŒå­¦ã€‚<br>å¦‚æœæ¶ˆæ¯æŒ‰å¤©åˆ†è¡¨ï¼ŒæŸå¤©ç¾¤è§£æ•£çš„æ—¶å€™ï¼Œè¿™ä¸ªæ¶ˆæ¯åˆ é™¤æ€ä¹ˆå®ç°æ¯”è¾ƒå¥½å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":323056,"user_name":"Geek_d18bea","can_delete":false,"product_type":"c1","uid":2050473,"ip_address":"","ucode":"F8250913E5AD50","user_header":"https://static001.geekbang.org/account/avatar/00/1f/49/a9/d6ec336d.jpg","comment_is_top":false,"comment_ctime":1637716914,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1637716914","product_id":100034901,"comment_content":"åŸæ–‡æåˆ°ï¼š<br>å‡è®¾æŸ¥è¯¢åˆ°è¿™ä¸ªç¾¤ä¸€å…±æœ‰ 3 äººï¼Œé™¤å»å‘é€æ–¹ç”¨æˆ· Aï¼Œè¿˜æœ‰ç”¨æˆ· B å’Œç”¨æˆ· Cã€‚<br>ç„¶åä¸šåŠ¡é€»è¾‘å¤„ç†å±‚æŠŠæ¶ˆæ¯æ‰‡å‡ºåˆ°ã€æ¥æ”¶äººç»´åº¦ã€ï¼ŒæŠ•é€’åˆ°å…¨å±€çš„æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼›â€¦â€¦<br>æ¥ç€ï¼Œå„ç½‘å…³æœºæŠŠå½’å±æœ¬æœºçš„ç”¨æˆ·çš„æ¶ˆæ¯ï¼Œé€šè¿‡é•¿è¿ä¸‹æ¨ä¸‹å»ã€‚<br><br><br>ä¸‡äººç¾¤çš„æ¶ˆæ¯æ¨é€ï¼Œå‡è®¾ç¾¤é‡Œé™¤äº†å‘é€è€…ï¼Œè¿˜æœ‰ 10000 äººã€‚åˆ™ä¸šåŠ¡å±‚éœ€è¦å‘ 10000 æ¡æ¶ˆæ¯åˆ° mqã€‚<br>gid1, msg1, uid1<br>gid1, msg1, uid2<br>gid1, msg1, uid3<br>â€¦<br>gid1, msg1, uid10000<br><br><br>åŒé—®è¿™ä¸ªé—®é¢˜ï¼Œè¯·é—®è€å¸ˆæ˜¯è¿™æ ·ä¸€ä¸ªç¾¤æ¶ˆæ¯ï¼Œæ‰‡å‡ºå¤šä¸ªmqæ¶ˆæ¯å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":276842,"user_name":"åœŸå¨ƒå¨ƒ","can_delete":false,"product_type":"c1","uid":1375163,"ip_address":"","ucode":"E51B999BB7E1BB","user_header":"https://static001.geekbang.org/account/avatar/00/14/fb/bb/51c50432.jpg","comment_is_top":false,"comment_ctime":1612151277,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1612151277","product_id":100034901,"comment_content":"ç¾¤æˆå‘˜åŸºç¡€æ•°æ®çš„å­˜å‚¨ç¼“å­˜ç»“æ„ç”¨ä»€ä¹ˆå‘¢ï¼Ÿè¿›ç¾¤å’Œé€€ç¾¤æ—¶æ€ä¹ˆå¯¹ç¼“å­˜è¿›è¡Œå¤„ç†ã€‚å¦‚ä½•æ ¹æ®ç‰ˆæœ¬å·è·å–åˆ°åˆ é™¤çš„æˆå‘˜ï¼Œä¾‹å¦‚ï¼šå¦‚æœç”¨redisçš„SortedSetï¼Œæ˜¯ç”¨ä¸€ä¸ªsetä¿æŒæ‰€æœ‰çš„æˆå‘˜å¢åˆ çš„ç‰ˆæœ¬å·ï¼ˆè¿™æ ·setä¼šå˜å¾—å¾ˆå¤§ï¼Œå¦‚æœé¢‘ç¹æœ‰äººé€€ç¾¤çš„è¯ï¼‰ï¼Ÿè¿˜æ˜¯ç”¨ä¸¤ä¸ªsetï¼Œå…¶ä¸­ä¸€ä¸ªä¿å­˜å½“å‰ç¾¤çš„æ‰€æœ‰æœ‰æ•ˆæˆå‘˜ï¼Œå¦å¤–ä¸€ä¸ªä¿å­˜åˆ é™¤çš„æˆå‘˜ï¼ŒæŒ‰ç‰ˆæœ¬å·è·å–çš„æ—¶å€™å¯¹ä¸¤ä¸ªsetä¸­çš„ç»“æœè¿›è¡Œåˆå¹¶ï¼Ÿ","like_count":0},{"had_liked":false,"id":267389,"user_name":"å”¯æˆ‘å¤©æ£‹","can_delete":false,"product_type":"c1","uid":1015960,"ip_address":"","ucode":"B925246C92727A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/80/98/5591d99d.jpg","comment_is_top":false,"comment_ctime":1607702251,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1607702251","product_id":100034901,"comment_content":"è€å¸ˆï¼Œä¸€èˆ¬ç”¨ä»€ä¹ˆå­˜å‚¨å»å­˜ç¾¤æˆå‘˜å…³ç³»æ¯”è¾ƒåˆé€‚ã€‚<br>ç”¨mysqlå­˜ï¼ŒæŸ¥è¯¢æœ‰æ€§èƒ½é—®é¢˜ã€‚<br>ç”¨rediså­˜ zset + hashï¼Œéœ€è¦ä¿è¯æ•°æ®ä¸€è‡´æ€§ã€‚è€Œä¸”redisä¸æ”¯æŒæ¡ä»¶æŸ¥è¯¢ï¼Œæ¯”å¦‚æƒ³æŸ¥æ‰€æœ‰ç®¡ç†å‘˜ã€‚<br>è€Œä¸”ï¼Œæ¯”å¦‚ä¸€ä¸ª6000äººçš„ç¾¤ï¼Œæ‹‰å–ç¾¤åˆ—è¡¨ï¼Œæ€§èƒ½å‹åŠ›ç‰¹åˆ«å¤§ã€‚","like_count":0},{"had_liked":false,"id":221903,"user_name":"å€”å¼ºå°å¾·æ™®","can_delete":false,"product_type":"c1","uid":1180884,"ip_address":"","ucode":"4795B744BDDBDD","user_header":"https://static001.geekbang.org/account/avatar/00/12/04/d4/7173785e.jpg","comment_is_top":false,"comment_ctime":1590630501,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1590630501","product_id":100034901,"comment_content":"ç”±å„ç½‘ç®¡æœºç»´æŠ¤æ•°æ®ï¼Œè¿™ä¸ªæ•°æ®è¯»çš„æ˜¯å“ªè¾¹çš„ï¼Ÿå¦‚æœæ˜¯æœ¬åœ°å†…å­˜ èŠ‚ç‚¹æŒ‚äº† å’‹åŠ","like_count":0},{"had_liked":false,"id":204971,"user_name":"æå…ˆç”Ÿ","can_delete":false,"product_type":"c1","uid":1237614,"ip_address":"","ucode":"D9039715F7D290","user_header":"https://static001.geekbang.org/account/avatar/00/12/e2/6e/0a300829.jpg","comment_is_top":false,"comment_ctime":1586502718,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1586502718","product_id":100034901,"comment_content":"æœ‰ä¸ªé—®é¢˜ï¼šå¯¹äºç›´æ’­é—´åœºæ™¯ï¼Œç½‘å…³æœº(imå®¢æˆ·ç«¯)ç»´æŠ¤é•¿é“¾æ¥å’Œç”¨æˆ·ä¿¡æ¯ï¼Œå‡å¦‚ä¸€åœºç›´æ’­æŒç»­1å°æ—¶ï¼Œç›´æ’­ç´¯è®¡uvæ˜¯300ä¸‡ï¼Œç›´æ’­åŒæ—¶åœ¨çº¿uvæ˜¯100ä¸‡ï¼Œéœ€è¦å¯¹ç½‘å…³æœºè¿›è¡Œæ‰©å®¹ï¼Œæ¯”å¦‚ä½¿ç”¨32gçš„æœåŠ¡å™¨ï¼Œéœ€è¦å¤šå°‘å°ç½‘å…³æœºæ‰å¯èƒ½ä½¿ç›´æ’­æ­£å¸¸è¿›è¡Œï¼Œè¿˜æœ‰å¼¹å¹•çš„å‘é€ä¸ä¸‹æ¨åº”å¦‚ä½•å¤„ç†å‘¢(ä¸ºäº†ä¿è¯å¼¹å¹•çš„å®æ—¶æ€§ï¼Œæ˜¯å¦å¯ä»¥ç›´æ¥å±•ç¤ºï¼Œå¼‚æ­¥å­˜å‚¨å¼¹å¹•å‘¢)ï¼Ÿ","like_count":0},{"had_liked":false,"id":203171,"user_name":"kamida","can_delete":false,"product_type":"c1","uid":1904146,"ip_address":"","ucode":"16D7CA59870AC0","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/jXbwicoDwia7ooDfwBTRyvNYQkefnVwF1CMicMS8FqKfuFAdvVZo2pqc4ic0R9kSdHTIxaE6YyqxwX8BdNGv5PqSIw/132","comment_is_top":false,"comment_ctime":1586147839,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1586147839","product_id":100034901,"comment_content":"è€å¸ˆ åœ¨æ‚¨ç»™çš„æœ€åçš„ç¾¤èŠæ¶ˆæ¯å†™åˆ°æ¶ˆæ¯é˜Ÿåˆ—çš„ä¾‹å­é‡Œ å†™çš„æ¶ˆæ¯æ˜¯ä¸æ˜¯åªæœ‰ä¸€æ¡ é‡Œé¢åŒ…å«äº†æ¶ˆæ¯å†…å®¹ ç¾¤idå’ŒAã€Bã€Cè¿™ä¸‰ä¸ªç”¨æˆ·çš„idå•Š<br>è¿˜æ˜¯åˆ†æˆä¸‰æ¡æ¶ˆæ¯ ä¸€ä¸ªç”¨æˆ·ä¸€æ¡","like_count":0,"discussions":[{"author":{"id":1904146,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/jXbwicoDwia7ooDfwBTRyvNYQkefnVwF1CMicMS8FqKfuFAdvVZo2pqc4ic0R9kSdHTIxaE6YyqxwX8BdNGv5PqSIw/132","nickname":"kamida","note":"","ucode":"16D7CA59870AC0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":224358,"discussion_content":"è€å¸ˆèƒ½å›ç­”ä¸€ä¸‹å— å¯¹è¿™ä¸ªé—®é¢˜å¾ˆå›°æƒ‘å•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586293448,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":198013,"user_name":"0xTang","can_delete":false,"product_type":"c1","uid":1019659,"ip_address":"","ucode":"82F5282EF3044B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8f/0b/a438de52.jpg","comment_is_top":false,"comment_ctime":1585406797,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585406797","product_id":100034901,"comment_content":"å¯ä»¥ç”¨è¯»è€…æ‰©æ•£ç»“åˆï¼Œä¸€äº›æ¶ˆæ¯æ˜¯ç»™ç‰¹å®šçš„äººçœ‹çš„ï¼Œä¾‹å¦‚é¢†å–çº¢åŒ…é€šçŸ¥ã€‚","like_count":0},{"had_liked":false,"id":195701,"user_name":"Geek_d7590a","can_delete":false,"product_type":"c1","uid":1651033,"ip_address":"","ucode":"CBA16803CA36EB","user_header":"","comment_is_top":false,"comment_ctime":1585213414,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585213414","product_id":100034901,"comment_content":"æœ‰ä¸ªç–‘é—®æƒ³è€å¸ˆè§£ç­”ä¸€ä¸‹ï¼š<br>1ã€å¹¿æ’­æ¶ˆæ¯ä¸‹æ¨ï¼Œç³»ç»Ÿæ¨é€ä¸€æ¡æ¶ˆæ¯ç»™ç½‘ç«™çš„æ‰€æœ‰ç”¨æˆ·ï¼Œè¿™ä¸ªåœºæ™¯æ˜¯ä¸æ˜¯ç›¸å½“äºç¾¤èŠé‡Œçš„æŸä¸€ä¸ªäººå‘äº†ä¸€æ¡æ¶ˆæ¯ï¼Œæ‰€æœ‰ç¾¤é‡Œçš„äººéƒ½èƒ½æ¥æ”¶åˆ°ï¼Ÿ<br>2ã€ç›®å‰æˆ‘æ­å»ºäº†imç³»ç»Ÿç”¨äºæ¨é€æ¶ˆæ¯ï¼Œæš‚æ—¶æ²¡æœ‰æ¶‰åŠåˆ°èŠå¤©ä¸šåŠ¡ï¼Œæˆ‘åœ¨å­¦ä¹ äº†å‰é¢çš„ç¯‡ç« åï¼Œæœ‰å‡ ä¸ªé—®é¢˜æ¯”è¾ƒæ··ä¹±ï¼š<br>(1)ã€æ¶ˆæ¯çš„å­˜å‚¨æ˜¯å¦å’ŒèŠå¤©çš„å·®ä¸å¤šï¼Œä½†æ˜¯å¦‚æœåªæ˜¯ç³»ç»Ÿæ¨é€ï¼Œæ„Ÿè§‰æ²¡æœ‰ä¼šè¯è¿™ä¸ªå±‚é¢ï¼Œåªæ˜¯æˆ‘ç³»ç»Ÿåˆ›å»ºäº†ä¸€æ¡æ¶ˆæ¯åï¼Œç›´æ¥ä¸‹æ¨<br>(2)ã€ç”¨æˆ·ä¸åœ¨çº¿æ—¶ï¼Œæ˜¯ä¸æ˜¯éƒ½éœ€è¦ç¦»çº¿bufferï¼Œä¸€èˆ¬ä¸ç›´æ¥è¯»å–æ•°æ®åº“çš„ï¼Œè€Œå½“ç”¨æˆ·ä¸Šçº¿æ—¶ï¼Œæ˜¯ä½¿ç”¨æ‹‰çš„æ–¹å¼è¯»å–ç¦»çº¿bufferï¼Œè¿˜æ˜¯æœåŠ¡å™¨è¯»å–ç¦»çº¿bufferé€šè¿‡é•¿è¿æ¥æ¨é€<br>(3)å¥½åƒæ•´ä¸ªè®¾è®¡ä¸­ï¼Œæ²¡æœ‰æ¶‰åŠåˆ°æ ‡è®°å“ªæ¡æ¶ˆæ¯æ˜¯å·²ç»è¯»äº†çš„ï¼Œå“ªäº›æœªè¯»ï¼Œé‚£å®¢æˆ·ç«¯åœ¨è·å–äº†æ¶ˆæ¯åï¼Œæˆ‘æ€ä¹ˆæ ‡å¿—å“ªæ¡æ¶ˆæ¯æ˜¯å·²ç»è¯»äº†çš„ï¼Œå“ªäº›æ¶ˆæ¯æ˜¯æœªè¯»æ˜¾ç¤ºçº¢ç‚¹","like_count":0},{"had_liked":false,"id":156524,"user_name":"null","can_delete":false,"product_type":"c1","uid":1024294,"ip_address":"","ucode":"F9039EFED6B55D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaELZPnUAiajaR5C25EDLWeJURggyiaOP5GGPe2qlwpQcm5e3ybib8OsP4tvddFDLVRSNNGL5I3SFPJHsA/132","comment_is_top":false,"comment_ctime":1574905910,"is_pvip":false,"replies":[{"id":"60938","content":"ç†è®ºä¸Šå‡ºç°æç«¯æƒ…å†µæ˜¯ä¼šçš„ï¼Œä½†åœ¨æˆ‘ä»¬çš„å®è·µé‡Œå¾ˆå°‘å‡ºç°å¤§é‡ç”¨æˆ·åˆ é™¤æŸä¸ªç¾¤çš„ç¾¤æ¶ˆæ¯çš„æƒ…å†µã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"coldwalker","uid":"1297490","ctime":1575626190,"ip_address":"","comment_id":156524,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1574905910","product_id":100034901,"comment_content":"è€å¸ˆï¼Œå¦‚æœç”¨æˆ·å°†ç¾¤æ¶ˆæ¯å…¨åˆ é™¤ï¼Œæ˜¯å­˜å…¨éƒ¨çš„æ¶ˆæ¯ç´¢å¼•åˆ°æ¶ˆæ¯åˆ é™¤è¡¨ä¹ˆäº†ï¼Ÿå¦‚æœè¿™æ ·çš„è¯ï¼Œå½“å­˜åœ¨è¾ƒå¤šç”¨æˆ·åˆ é™¤ç¾¤æ¶ˆæ¯æ—¶ï¼Œæ¶ˆæ¯åˆ é™¤è¡¨ï¼Œå°±æˆäº†ç”¨æˆ·ç»´åº¦çš„ç¾¤æ¶ˆæ¯å­˜å‚¨è¡¨äº†ã€‚","like_count":0,"discussions":[{"author":{"id":1297490,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epK1zyWib7IKYCoRSxIa6dDjrcyBqObGfj1lDVia1pOrSVxyltKI7RfGekdXPQNObwaBQg3gwvarlQA/132","nickname":"coldwalker","note":"","ucode":"AF9AF257A745C9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476140,"discussion_content":"ç†è®ºä¸Šå‡ºç°æç«¯æƒ…å†µæ˜¯ä¼šçš„ï¼Œä½†åœ¨æˆ‘ä»¬çš„å®è·µé‡Œå¾ˆå°‘å‡ºç°å¤§é‡ç”¨æˆ·åˆ é™¤æŸä¸ªç¾¤çš„ç¾¤æ¶ˆæ¯çš„æƒ…å†µã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575626190,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":150594,"user_name":"ç‹¬é…Œç›¸æ€è§£åƒæ„","can_delete":false,"product_type":"c1","uid":1653628,"ip_address":"","ucode":"578995696A1482","user_header":"https://static001.geekbang.org/account/avatar/00/19/3b/7c/a977d9a9.jpg","comment_is_top":false,"comment_ctime":1573565056,"is_pvip":false,"replies":[{"id":"58812","content":"æ²¡é—®é¢˜çš„ï¼Œéæ‰‡å‡ºç±»å‹çš„åœºæ™¯å¯ä»¥ç›´æ¥é€šè¿‡åœ¨çº¿çŠ¶æ€æ¥ç²¾ç¡®ä¸‹å‘ï¼Œå‡å°‘ç½‘å…³æœºè´Ÿè½½ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"coldwalker","uid":"1297490","ctime":1574149083,"ip_address":"","comment_id":150594,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1573565056","product_id":100034901,"comment_content":"æ€è€ƒé¢˜ï¼šä¸ªäººè§‰å¾—å¯¹äºç‚¹å¯¹ç‚¹æ¶ˆæ¯ä¸‹æ¨ä¸é€‚åˆé‡‡ç”¨ç½‘å…³è‡ªæ²»ç»´æŠ¤æœ¬åœ°åœ¨çº¿çŠ¶æ€ã€‚åŸå› æ˜¯æœ¬æ¥é‡‡ç”¨ä¸­å¤®ç»´æŠ¤çš„æ¨¡å¼ç‚¹å¯¹ç‚¹åªéœ€è¦æ¶‰åŠä¸ªåˆ«ç½‘å…³æœºå°±èƒ½å®Œæˆä¸‹æ¨ï¼Œé‡‡ç”¨è‡ªæ²»ç»´æŠ¤åç”±äºåœ¨çº¿çŠ¶æ€å¯¹äºå…¶ä»–ç½‘å…³æœºæ˜¯ä¸å¯è§çš„ï¼Œåœ¨æ¶ˆæ¯ä¸‹æ¨æ—¶å°±è¦é‡‡ç”¨ç±»ä¼¼å¹¿æ’­çš„æ–¹å¼ï¼Œå°†æ¶ˆæ¯ä¸‹æ¨ç»™æ¯ä¸ªç½‘å…³æœºï¼Œè¿™äº›ç½‘å…³æœºå†å†è‡ªå·±çš„ç»´æŠ¤çš„åœ¨çº¿çŠ¶æ€è¡¨ä¸­æ‰¾è¿™ä¸ªç›®æ ‡ç”¨æˆ·ï¼Œå¦‚æœæœ‰å°±ä¸‹æ¨ç»™ä»–ï¼Œå¦‚æœæ²¡æœ‰å°±ç»“æŸï¼ˆè‡ªå·±æ„æƒ³çš„è¿‡ç¨‹ï¼‰ã€‚è¿™ä¸ªè¿‡ç¨‹ä¸­ä¼šä¼šæµªè´¹å¾ˆå¯¹ç½‘å…³æœºçš„èµ„æºï¼Œä¸”åšäº†å¤ªå¤šæ— ç”¨å·¥ã€‚å¦å¤–æƒ³é—®ä¸‹ï¼ŒçœŸå®åœºæ™¯æ¯”å¦‚è¯´QQï¼Œå¾®åšè¿™äº›æ˜¯ä¸¤ç§æ¨¡å¼ç»“åˆçš„ä¹ˆï¼Œç‚¹å¯¹ç‚¹å°±æŸ¥è¯¢ä¸­å¤®ï¼Œè‹¥è¯†åˆ«å‡ºæ¥æ˜¯ç¾¤èŠå°±ä¼˜å…ˆæŸ¥ç½‘å…³è‡ªæ²»çš„ä¹ˆï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1297490,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epK1zyWib7IKYCoRSxIa6dDjrcyBqObGfj1lDVia1pOrSVxyltKI7RfGekdXPQNObwaBQg3gwvarlQA/132","nickname":"coldwalker","note":"","ucode":"AF9AF257A745C9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":474211,"discussion_content":"æ²¡é—®é¢˜çš„ï¼Œéæ‰‡å‡ºç±»å‹çš„åœºæ™¯å¯ä»¥ç›´æ¥é€šè¿‡åœ¨çº¿çŠ¶æ€æ¥ç²¾ç¡®ä¸‹å‘ï¼Œå‡å°‘ç½‘å…³æœºè´Ÿè½½ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574149083,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":142281,"user_name":"å¤©å¤©å‘å–„","can_delete":false,"product_type":"c1","uid":1108250,"ip_address":"","ucode":"6AE57FB2B15043","user_header":"https://static001.geekbang.org/account/avatar/00/10/e9/1a/6ba207a3.jpg","comment_is_top":false,"comment_ctime":1571324651,"is_pvip":true,"replies":[{"id":"54998","content":"æ•´ä¸ªè¿™ä¸ªbufferç»„ä»¶æ˜¯ä¸€ä¸ªin jvmçš„ç»„ä»¶ï¼Œtimerå’Œflusheræ˜¯ä¸¤ä¸ªåŠŸèƒ½å®ç°ç±»ã€‚å¯ä»¥å‚è€ƒæˆ‘ä»¬å‰åŒäº‹å¼€æºå‡ºå»çš„ä¸€ä¸ªå®ç°ï¼šgithubæœbufferslayerã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"coldwalker","uid":"1297490","ctime":1571404352,"ip_address":"","comment_id":142281,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1571324651","product_id":100034901,"comment_content":"æœ«è¯»å˜æ›´æœåŠ¡ä¸‹çš„buffer queueæ˜¯ä¸­é—´ä»¶å—ï¼Œtimerï¼Œflusherä¹Ÿæ˜¯å•ç‹¬åº”ç”¨?æ²¡æœ‰æ˜ç™½ï¼Œèƒ½ä¸èƒ½å†è¯¦ç»†ä»‹ç»ä¸‹","like_count":0,"discussions":[{"author":{"id":1297490,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epK1zyWib7IKYCoRSxIa6dDjrcyBqObGfj1lDVia1pOrSVxyltKI7RfGekdXPQNObwaBQg3gwvarlQA/132","nickname":"coldwalker","note":"","ucode":"AF9AF257A745C9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":471059,"discussion_content":"æ•´ä¸ªè¿™ä¸ªbufferç»„ä»¶æ˜¯ä¸€ä¸ªin jvmçš„ç»„ä»¶ï¼Œtimerå’Œflusheræ˜¯ä¸¤ä¸ªåŠŸèƒ½å®ç°ç±»ã€‚å¯ä»¥å‚è€ƒæˆ‘ä»¬å‰åŒäº‹å¼€æºå‡ºå»çš„ä¸€ä¸ªå®ç°ï¼šgithubæœbufferslayerã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571404352,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}