{"id":151949,"title":"14 | ç¼“å­˜çš„ä½¿ç”¨å§¿åŠ¿ï¼ˆäºŒï¼‰ï¼šç¼“å­˜å¦‚ä½•åšåˆ°é«˜å¯ç”¨ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯å”æ‰¬ã€‚</p><p>å‰é¢å‡ èŠ‚è¯¾ï¼Œæˆ‘å¸¦ä½ äº†è§£äº†ç¼“å­˜çš„åŸç†ã€åˆ†ç±»ä»¥åŠå¸¸ç”¨ç¼“å­˜çš„ä½¿ç”¨æŠ€å·§ã€‚æˆ‘ä»¬å¼€å§‹ç”¨ç¼“å­˜æ‰¿æ‹…å¤§éƒ¨åˆ†çš„è¯»å‹åŠ›ï¼Œä»è€Œç¼“è§£æ•°æ®åº“çš„æŸ¥è¯¢å‹åŠ›ï¼Œåœ¨æå‡æ€§èƒ½çš„åŒæ—¶ä¿è¯ç³»ç»Ÿçš„ç¨³å®šæ€§ã€‚è¿™æ—¶ï¼Œä½ çš„ç”µå•†ç³»ç»Ÿæ•´ä½“çš„æ¶æ„æ¼”å˜æˆä¸‹å›¾çš„æ ·å­ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/6c/05/6c860d61a578cde20591968cc2741a05.jpg?wh=1142*559\" alt=\"\"></p><p>æˆ‘ä»¬åœ¨Webå±‚å’Œæ•°æ®åº“å±‚ä¹‹é—´å¢åŠ äº†ç¼“å­˜å±‚ï¼Œè¯·æ±‚ä¼šé¦–å…ˆæŸ¥è¯¢ç¼“å­˜ï¼Œåªæœ‰å½“ç¼“å­˜ä¸­æ²¡æœ‰éœ€è¦çš„æ•°æ®æ—¶æ‰ä¼šæŸ¥è¯¢æ•°æ®åº“ã€‚</p><p>åœ¨è¿™é‡Œï¼Œä½ éœ€è¦å…³æ³¨ç¼“å­˜å‘½ä¸­ç‡è¿™ä¸ªæŒ‡æ ‡ï¼ˆç¼“å­˜å‘½ä¸­ç‡=å‘½ä¸­ç¼“å­˜çš„è¯·æ±‚æ•°/æ€»è¯·æ±‚æ•°ï¼‰ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œåœ¨ä½ çš„ç”µå•†ç³»ç»Ÿä¸­ï¼Œæ ¸å¿ƒç¼“å­˜çš„å‘½ä¸­ç‡éœ€è¦ç»´æŒåœ¨99%ç”šè‡³æ˜¯99.9%ï¼Œå“ªæ€•ä¸‹é™1%ï¼Œç³»ç»Ÿéƒ½ä¼šé­å—æ¯ç­æ€§çš„æ‰“å‡»ã€‚</p><p>è¿™ç»ä¸æ˜¯å±è¨€è€¸å¬ï¼Œæˆ‘ä»¬æ¥è®¡ç®—ä¸€ä¸‹ã€‚å‡è®¾ç³»ç»Ÿçš„QPSæ˜¯10000/sï¼Œæ¯æ¬¡è°ƒç”¨ä¼šè®¿é—®10æ¬¡ç¼“å­˜æˆ–è€…æ•°æ®åº“ä¸­çš„æ•°æ®ï¼Œé‚£ä¹ˆå½“ç¼“å­˜å‘½ä¸­ç‡ä»…ä»…å‡å°‘1%ï¼Œæ•°æ®åº“æ¯ç§’å°±ä¼šå¢åŠ 10000 * 10 * 1% = 1000æ¬¡è¯·æ±‚ã€‚è€Œä¸€èˆ¬æ¥è¯´æˆ‘ä»¬å•ä¸ªMySQLèŠ‚ç‚¹çš„è¯»è¯·æ±‚é‡å³°å€¼å°±åœ¨1500/så·¦å³ï¼Œå¢åŠ çš„è¿™1000æ¬¡è¯·æ±‚å¾ˆå¯èƒ½ä¼šç»™æ•°æ®åº“é€ æˆæå¤§çš„å†²å‡»ã€‚</p><p>å‘½ä¸­ç‡ä»…ä»…ä¸‹é™1%é€ æˆçš„å½±å“å°±å¦‚æ­¤å¯æ€•ï¼Œæ›´ä¸è¦è¯´ç¼“å­˜èŠ‚ç‚¹æ•…éšœäº†ã€‚è€Œå›¾ä¸­å•ç‚¹éƒ¨ç½²çš„ç¼“å­˜èŠ‚ç‚¹å°±æˆäº†æ•´ä½“ç³»ç»Ÿä¸­æœ€å¤§çš„éšæ‚£ï¼Œé‚£æˆ‘ä»¬è¦å¦‚ä½•æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæå‡ç¼“å­˜çš„å¯ç”¨æ€§å‘¢ï¼Ÿ</p><!-- [[[read_end]]] --><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡éƒ¨ç½²å¤šä¸ªèŠ‚ç‚¹ï¼ŒåŒæ—¶è®¾è®¡ä¸€äº›æ–¹æ¡ˆè®©è¿™äº›èŠ‚ç‚¹äº’ä¸ºå¤‡ä»½ã€‚è¿™æ ·ï¼Œå½“æŸä¸ªèŠ‚ç‚¹æ•…éšœæ—¶ï¼Œå®ƒçš„å¤‡ä»½èŠ‚ç‚¹å¯ä»¥é¡¶æ›¿å®ƒç»§ç»­æä¾›æœåŠ¡ã€‚<strong>è€Œè¿™äº›æ–¹æ¡ˆå°±æ˜¯æˆ‘ä»¬æœ¬èŠ‚è¯¾çš„é‡ç‚¹ï¼šåˆ†å¸ƒå¼ç¼“å­˜çš„é«˜å¯ç”¨æ–¹æ¡ˆã€‚</strong></p><p>åœ¨æˆ‘çš„é¡¹ç›®ä¸­ï¼Œæˆ‘ä¸»è¦é€‰æ‹©çš„æ–¹æ¡ˆæœ‰<strong>å®¢æˆ·ç«¯æ–¹æ¡ˆã€ä¸­é—´ä»£ç†å±‚æ–¹æ¡ˆå’ŒæœåŠ¡ç«¯æ–¹æ¡ˆ</strong>ä¸‰å¤§ç±»ï¼š</p><ul>\n<li>\n<p><strong>å®¢æˆ·ç«¯æ–¹æ¡ˆ</strong>å°±æ˜¯åœ¨å®¢æˆ·ç«¯é…ç½®å¤šä¸ªç¼“å­˜çš„èŠ‚ç‚¹ï¼Œé€šè¿‡ç¼“å­˜å†™å…¥å’Œè¯»å–ç®—æ³•ç­–ç•¥æ¥å®ç°åˆ†å¸ƒå¼ï¼Œä»è€Œæé«˜ç¼“å­˜çš„å¯ç”¨æ€§ã€‚</p>\n</li>\n<li>\n<p><strong>ä¸­é—´ä»£ç†å±‚æ–¹æ¡ˆ</strong>æ˜¯åœ¨åº”ç”¨ä»£ç å’Œç¼“å­˜èŠ‚ç‚¹ä¹‹é—´å¢åŠ ä»£ç†å±‚ï¼Œå®¢æˆ·ç«¯æ‰€æœ‰çš„å†™å…¥å’Œè¯»å–çš„è¯·æ±‚éƒ½é€šè¿‡ä»£ç†å±‚ï¼Œè€Œä»£ç†å±‚ä¸­ä¼šå†…ç½®é«˜å¯ç”¨ç­–ç•¥ï¼Œå¸®åŠ©æå‡ç¼“å­˜ç³»ç»Ÿçš„é«˜å¯ç”¨ã€‚</p>\n</li>\n<li>\n<p><strong>æœåŠ¡ç«¯æ–¹æ¡ˆ</strong>å°±æ˜¯Redis 2.4ç‰ˆæœ¬åæå‡ºçš„Redis Sentinelæ–¹æ¡ˆã€‚</p>\n</li>\n</ul><p>æŒæ¡è¿™äº›æ–¹æ¡ˆå¯ä»¥å¸®åŠ©ä½ ï¼ŒæŠµå¾¡éƒ¨åˆ†ç¼“å­˜èŠ‚ç‚¹æ•…éšœå¯¼è‡´çš„ï¼Œç¼“å­˜å‘½ä¸­ç‡ä¸‹é™çš„å½±å“ï¼Œå¢å¼ºä½ çš„ç³»ç»Ÿçš„é²æ£’æ€§ã€‚</p><h2>å®¢æˆ·ç«¯æ–¹æ¡ˆ</h2><p>åœ¨å®¢æˆ·ç«¯æ–¹æ¡ˆä¸­ï¼Œä½ éœ€è¦å…³æ³¨ç¼“å­˜çš„å†™å’Œè¯»ä¸¤ä¸ªæ–¹é¢ï¼š</p><ul>\n<li>\n<p>å†™å…¥æ•°æ®æ—¶ï¼Œéœ€è¦æŠŠè¢«å†™å…¥ç¼“å­˜çš„æ•°æ®åˆ†æ•£åˆ°å¤šä¸ªèŠ‚ç‚¹ä¸­ï¼Œå³è¿›è¡Œæ•°æ®åˆ†ç‰‡ï¼›</p>\n</li>\n<li>\n<p>è¯»æ•°æ®æ—¶ï¼Œå¯ä»¥åˆ©ç”¨å¤šç»„çš„ç¼“å­˜æ¥åšå®¹é”™ï¼Œæå‡ç¼“å­˜ç³»ç»Ÿçš„å¯ç”¨æ€§ã€‚å…³äºè¯»æ•°æ®ï¼Œè¿™é‡Œå¯ä»¥ä½¿ç”¨ä¸»ä»å’Œå¤šå‰¯æœ¬ä¸¤ç§ç­–ç•¥ï¼Œä¸¤ç§ç­–ç•¥æ˜¯ä¸ºäº†è§£å†³ä¸åŒçš„é—®é¢˜è€Œæå‡ºçš„ã€‚</p>\n</li>\n</ul><p>ä¸‹é¢æˆ‘å°±å¸¦ä½ ä¸€èµ·è¯¦ç»†åœ°çœ‹ä¸€ä¸‹åˆ°åº•è¦æ€ä¹ˆåšã€‚</p><p><strong>1.ç¼“å­˜æ•°æ®å¦‚ä½•åˆ†ç‰‡</strong></p><p>å•ä¸€çš„ç¼“å­˜èŠ‚ç‚¹å—åˆ°æœºå™¨å†…å­˜ã€ç½‘å¡å¸¦å®½å’Œå•èŠ‚ç‚¹è¯·æ±‚é‡çš„é™åˆ¶ï¼Œä¸èƒ½æ‰¿æ‹…æ¯”è¾ƒé«˜çš„å¹¶å‘ï¼Œå› æ­¤æˆ‘ä»¬è€ƒè™‘å°†æ•°æ®åˆ†ç‰‡ï¼Œä¾ç…§åˆ†ç‰‡ç®—æ³•å°†æ•°æ®æ‰“æ•£åˆ°å¤šä¸ªä¸åŒçš„èŠ‚ç‚¹ä¸Šï¼Œæ¯ä¸ªèŠ‚ç‚¹ä¸Šå­˜å‚¨éƒ¨åˆ†æ•°æ®ã€‚</p><p>è¿™æ ·åœ¨æŸä¸ªèŠ‚ç‚¹æ•…éšœçš„æƒ…å†µä¸‹ï¼Œå…¶ä»–èŠ‚ç‚¹ä¹Ÿå¯ä»¥æä¾›æœåŠ¡ï¼Œä¿è¯äº†ä¸€å®šçš„å¯ç”¨æ€§ã€‚è¿™å°±å¥½æ¯”ä¸è¦æŠŠé¸¡è›‹æ”¾åœ¨åŒä¸€ä¸ªç¯®å­é‡Œï¼Œè¿™æ ·ä¸€æ—¦ä¸€ä¸ªç¯®å­æ‰åœ¨åœ°ä¸Šï¼Œæ‘”ç¢äº†ï¼Œåˆ«çš„ç¯®å­é‡Œè¿˜æœ‰æ²¡æ‘”ç¢çš„é¸¡è›‹ï¼Œä¸è‡³äºä¸€ä¸ªä¸å‰©ã€‚</p><p><strong>ä¸€èˆ¬æ¥è®²ï¼Œåˆ†ç‰‡ç®—æ³•å¸¸è§çš„å°±æ˜¯Hashåˆ†ç‰‡ç®—æ³•å’Œä¸€è‡´æ€§Hashåˆ†ç‰‡ç®—æ³•ä¸¤ç§ã€‚</strong></p><p>Hashåˆ†ç‰‡çš„ç®—æ³•å°±æ˜¯å¯¹ç¼“å­˜çš„Keyåšå“ˆå¸Œè®¡ç®—ï¼Œç„¶åå¯¹æ€»çš„ç¼“å­˜èŠ‚ç‚¹ä¸ªæ•°å–ä½™ã€‚ä½ å¯ä»¥è¿™ä¹ˆç†è§£ï¼š</p><p>æ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬éƒ¨ç½²äº†ä¸‰ä¸ªç¼“å­˜èŠ‚ç‚¹ç»„æˆä¸€ä¸ªç¼“å­˜çš„é›†ç¾¤ï¼Œå½“æœ‰æ–°çš„æ•°æ®è¦å†™å…¥æ—¶ï¼Œæˆ‘ä»¬å…ˆå¯¹è¿™ä¸ªç¼“å­˜çš„Keyåšæ¯”å¦‚crc32ç­‰Hashç®—æ³•ç”ŸæˆHashå€¼ï¼Œç„¶åå¯¹Hashå€¼æ¨¡3ï¼Œå¾—å‡ºçš„ç»“æœå°±æ˜¯è¦å­˜å…¥ç¼“å­˜èŠ‚ç‚¹çš„åºå·ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/72/55/720f7e4543d45fdc71056de280caff55.jpg?wh=1142*469\" alt=\"\"></p><p>\bè¿™ä¸ªç®—æ³•æœ€å¤§çš„ä¼˜ç‚¹å°±æ˜¯ç®€å•æ˜“ç†è§£ï¼Œç¼ºç‚¹æ˜¯å½“å¢åŠ æˆ–è€…å‡å°‘ç¼“å­˜èŠ‚ç‚¹æ—¶ï¼Œç¼“å­˜æ€»çš„èŠ‚ç‚¹ä¸ªæ•°å˜åŒ–é€ æˆè®¡ç®—å‡ºæ¥çš„èŠ‚ç‚¹å‘ç”Ÿå˜åŒ–ï¼Œä»è€Œé€ æˆç¼“å­˜å¤±æ•ˆä¸å¯ç”¨ã€‚<strong>æ‰€ä»¥æˆ‘å»ºè®®ä½ ï¼Œ</strong>å¦‚æœé‡‡ç”¨è¿™ç§æ–¹æ³•ï¼Œæœ€å¥½å»ºç«‹åœ¨ä½ å¯¹äºè¿™ç»„ç¼“å­˜å‘½ä¸­ç‡ä¸‹é™ä¸æ•æ„Ÿï¼Œæ¯”å¦‚ä¸‹é¢è¿˜æœ‰å¦å¤–ä¸€å±‚ç¼“å­˜æ¥å…œåº•çš„æƒ…å†µä¸‹ã€‚<br>\n\b<br>\n<strong>å½“ç„¶äº†ï¼Œç”¨ä¸€è‡´æ€§Hashç®—æ³•å¯ä»¥å¾ˆå¥½åœ°è§£å†³å¢åŠ å’Œåˆ å‡èŠ‚ç‚¹æ—¶ï¼Œå‘½ä¸­ç‡ä¸‹é™çš„é—®é¢˜ã€‚</strong>åœ¨è¿™ä¸ªç®—æ³•ä¸­ï¼Œæˆ‘ä»¬å°†æ•´ä¸ªHashå€¼ç©ºé—´ç»„ç»‡æˆä¸€ä¸ªè™šæ‹Ÿçš„åœ†ç¯ï¼Œç„¶åå°†ç¼“å­˜èŠ‚ç‚¹çš„IPåœ°å€æˆ–è€…ä¸»æœºååšHashå–å€¼åï¼Œæ”¾ç½®åœ¨è¿™ä¸ªåœ†ç¯ä¸Šã€‚å½“æˆ‘ä»¬éœ€è¦ç¡®å®šæŸä¸€ä¸ªKeyéœ€è¦å­˜å–åˆ°å“ªä¸ªèŠ‚ç‚¹ä¸Šçš„æ—¶å€™ï¼Œå…ˆå¯¹è¿™ä¸ªKeyåšåŒæ ·çš„Hashå–å€¼ï¼Œç¡®å®šåœ¨ç¯ä¸Šçš„ä½ç½®ï¼Œç„¶åæŒ‰ç…§é¡ºæ—¶é’ˆæ–¹å‘åœ¨ç¯ä¸Šâ€œè¡Œèµ°â€ï¼Œé‡åˆ°çš„ç¬¬ä¸€ä¸ªç¼“å­˜èŠ‚ç‚¹å°±æ˜¯è¦è®¿é—®çš„èŠ‚ç‚¹ã€‚æ¯”æ–¹è¯´ä¸‹é¢è¿™å¼ å›¾é‡Œé¢ï¼ŒKey 1å’ŒKey 2ä¼šè½å…¥åˆ°Node  1ä¸­ï¼ŒKey 3ã€Key 4ä¼šè½å…¥åˆ°Node 2ä¸­ï¼ŒKey 5è½å…¥åˆ°Node 3ä¸­ï¼ŒKey 6è½å…¥åˆ°Node 4ä¸­ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/f9/fe/f9ea0e201aa954cf46c5762835095efe.jpg?wh=1142*914\" alt=\"\"></p><p>è¿™æ—¶å¦‚æœåœ¨Node 1å’ŒNode 2ä¹‹é—´å¢åŠ ä¸€ä¸ªNode 5ï¼Œä½ å¯ä»¥çœ‹åˆ°åŸæœ¬å‘½ä¸­Node 2çš„Key 3ç°åœ¨å‘½ä¸­åˆ°Node 5ï¼Œè€Œå…¶å®ƒçš„Keyéƒ½æ²¡æœ‰å˜åŒ–ï¼›åŒæ ·çš„é“ç†ï¼Œå¦‚æœæˆ‘ä»¬æŠŠNode 3ä»é›†ç¾¤ä¸­ç§»é™¤ï¼Œé‚£ä¹ˆåªä¼šå½±å“åˆ°Key 5 ã€‚æ‰€ä»¥ä½ çœ‹ï¼Œ<strong>åœ¨å¢åŠ å’Œåˆ é™¤èŠ‚ç‚¹æ—¶ï¼Œåªæœ‰å°‘é‡çš„Keyä¼šâ€œæ¼‚ç§»â€åˆ°å…¶å®ƒèŠ‚ç‚¹ä¸Šï¼Œ</strong>è€Œå¤§éƒ¨åˆ†çš„Keyå‘½ä¸­çš„èŠ‚ç‚¹è¿˜æ˜¯ä¼šä¿æŒä¸å˜ï¼Œä»è€Œå¯ä»¥ä¿è¯å‘½ä¸­ç‡ä¸ä¼šå¤§å¹…ä¸‹é™ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/4c/91/4c13c4fd4278dc97d072afe09a1a1b91.jpg?wh=1142*807\" alt=\"\"></p><p>ä¸è¿‡ï¼Œäº‹ç‰©æ€»æœ‰ä¸¤é¢æ€§ã€‚è™½ç„¶è¿™ä¸ªç®—æ³•å¯¹å‘½ä¸­ç‡çš„å½±å“æ¯”è¾ƒå°ï¼Œä½†å®ƒè¿˜æ˜¯å­˜åœ¨é—®é¢˜ï¼š</p><ul>\n<li>\n<p>ç¼“å­˜èŠ‚ç‚¹åœ¨åœ†ç¯ä¸Šåˆ†å¸ƒä¸å¹³å‡ï¼Œä¼šé€ æˆéƒ¨åˆ†ç¼“å­˜èŠ‚ç‚¹çš„å‹åŠ›è¾ƒå¤§ï¼›å½“æŸä¸ªèŠ‚ç‚¹æ•…éšœæ—¶ï¼Œè¿™ä¸ªèŠ‚ç‚¹æ‰€è¦æ‰¿æ‹…çš„æ‰€æœ‰è®¿é—®éƒ½ä¼šè¢«é¡ºç§»åˆ°å¦ä¸€ä¸ªèŠ‚ç‚¹ä¸Šï¼Œä¼šå¯¹åé¢è¿™ä¸ªèŠ‚ç‚¹é€ æˆå‹åŠ›ã€‚</p>\n</li>\n<li>\n<p>ä¸€è‡´æ€§Hashç®—æ³•çš„è„æ•°æ®é—®é¢˜ã€‚</p>\n</li>\n</ul><p>æç«¯æƒ…å†µä¸‹ï¼Œæ¯”å¦‚ä¸€ä¸ªæœ‰ä¸‰ä¸ªèŠ‚ç‚¹Aã€Bã€Cæ‰¿æ‹…æ•´ä½“çš„è®¿é—®ï¼Œæ¯ä¸ªèŠ‚ç‚¹çš„è®¿é—®é‡å¹³å‡ï¼ŒAæ•…éšœåï¼ŒBå°†æ‰¿æ‹…åŒå€çš„å‹åŠ›ï¼ˆAå’ŒBçš„å…¨éƒ¨è¯·æ±‚ï¼‰ï¼Œå½“Bæ‰¿æ‹…ä¸äº†æµé‡Crashåï¼ŒCä¹Ÿå°†å› ä¸ºè¦æ‰¿æ‹…åŸå…ˆä¸‰å€çš„æµé‡è€ŒCrashï¼Œè¿™å°±é€ æˆäº†æ•´ä½“ç¼“å­˜ç³»ç»Ÿçš„é›ªå´©ã€‚</p><p>è¯´åˆ°è¿™å„¿ï¼Œä½ å¯èƒ½è§‰å¾—å¾ˆå¯æ€•ï¼Œä½†ä¹Ÿä¸è¦å¤ªæ‹…å¿ƒï¼Œ<strong>æˆ‘ä»¬ç¨‹åºå‘˜å°±æ˜¯è¦èƒ½å¤Ÿåˆ›é€ æ€§åœ°è§£å†³å„ç§é—®é¢˜ï¼Œæ‰€ä»¥ä½ å¯ä»¥åœ¨ä¸€è‡´æ€§Hashç®—æ³•ä¸­å¼•å…¥è™šæ‹ŸèŠ‚ç‚¹çš„æ¦‚å¿µã€‚</strong></p><p>å®ƒå°†ä¸€ä¸ªç¼“å­˜èŠ‚ç‚¹è®¡ç®—å¤šä¸ªHashå€¼åˆ†æ•£åˆ°åœ†ç¯çš„ä¸åŒä½ç½®ï¼Œè¿™æ ·æ—¢å®ç°äº†æ•°æ®çš„å¹³å‡ï¼Œè€Œä¸”å½“æŸä¸€ä¸ªèŠ‚ç‚¹æ•…éšœæˆ–è€…é€€å‡ºçš„æ—¶å€™ï¼Œå®ƒåŸå…ˆæ‰¿æ‹…çš„Keyå°†ä»¥æ›´åŠ å¹³å‡çš„æ–¹å¼åˆ†é…åˆ°å…¶ä»–èŠ‚ç‚¹ä¸Šï¼Œä»è€Œé¿å…é›ªå´©çš„å‘ç”Ÿã€‚</p><p><strong>å…¶æ¬¡ï¼Œå°±æ˜¯ä¸€è‡´æ€§Hashç®—æ³•çš„è„æ•°æ®é—®é¢˜ã€‚ä¸ºä»€ä¹ˆä¼šäº§ç”Ÿè„æ•°æ®å‘¢ï¼Ÿ</strong>æ¯”æ–¹è¯´ï¼Œåœ¨é›†ç¾¤ä¸­æœ‰ä¸¤ä¸ªèŠ‚ç‚¹Aå’ŒBï¼Œå®¢æˆ·ç«¯åˆå§‹å†™å…¥ä¸€ä¸ªKeyä¸ºkï¼Œå€¼ä¸º3çš„ç¼“å­˜æ•°æ®åˆ°Cache Aä¸­ã€‚è¿™æ—¶å¦‚æœè¦æ›´æ–°kçš„å€¼ä¸º4ï¼Œä½†æ˜¯ç¼“å­˜Aæ°å¥½å’Œå®¢æˆ·ç«¯è¿æ¥å‡ºç°äº†é—®é¢˜ï¼Œé‚£è¿™æ¬¡å†™å…¥è¯·æ±‚ä¼šå†™å…¥åˆ°Cache Bä¸­ã€‚æ¥ä¸‹æ¥ç¼“å­˜Aå’Œå®¢æˆ·ç«¯çš„è¿æ¥æ¢å¤ï¼Œå½“å®¢æˆ·ç«¯è¦è·å–kçš„å€¼æ—¶ï¼Œå°±ä¼šè·å–åˆ°å­˜åœ¨Cache Aä¸­çš„è„æ•°æ®3ï¼Œè€Œä¸æ˜¯Cache Bä¸­çš„4ã€‚</p><p><strong>æ‰€ä»¥ï¼Œåœ¨ä½¿ç”¨ä¸€è‡´æ€§Hashç®—æ³•æ—¶ä¸€å®šè¦è®¾ç½®ç¼“å­˜çš„è¿‡æœŸæ—¶é—´ï¼Œ</strong>è¿™æ ·å½“å‘ç”Ÿæ¼‚ç§»æ—¶ï¼Œä¹‹å‰å­˜å‚¨çš„è„æ•°æ®å¯èƒ½å·²ç»è¿‡æœŸï¼Œå°±å¯ä»¥å‡å°‘å­˜åœ¨è„æ•°æ®çš„å‡ ç‡ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/4c/f8/4c10bb2e9b0f6cb9920d4b1c9418b2f8.jpg?wh=1142*591\" alt=\"\"></p><p>å¾ˆæ˜¾ç„¶ï¼Œæ•°æ®åˆ†ç‰‡æœ€å¤§çš„ä¼˜åŠ¿å°±æ˜¯ç¼“è§£ç¼“å­˜èŠ‚ç‚¹çš„å­˜å‚¨å’Œè®¿é—®å‹åŠ›ï¼Œä½†åŒæ—¶å®ƒ\bä¹Ÿè®©ç¼“å­˜çš„ä½¿ç”¨\bæ›´åŠ å¤æ‚ã€‚åœ¨MultiGetï¼ˆæ‰¹é‡è·å–ï¼‰åœºæ™¯ä¸‹ï¼Œå•ä¸ªèŠ‚ç‚¹çš„è®¿é—®é‡å¹¶æ²¡æœ‰å‡å°‘ï¼ŒåŒæ—¶èŠ‚ç‚¹æ•°å¤ªå¤šä¼šé€ æˆç¼“å­˜è®¿é—®çš„SLAï¼ˆå³â€œæœåŠ¡ç­‰çº§åè®®â€ï¼ŒSLAä»£è¡¨äº†ç½‘ç«™æœåŠ¡å¯ç”¨æ€§ï¼‰å¾—ä¸åˆ°å¾ˆå¥½çš„ä¿è¯ï¼Œå› ä¸ºæ ¹æ®æœ¨æ¡¶åŸåˆ™ï¼ŒSLAå–å†³äºæœ€æ…¢ã€æœ€åçš„èŠ‚ç‚¹çš„æƒ…å†µï¼ŒèŠ‚ç‚¹æ•°è¿‡å¤šä¹Ÿä¼šå¢åŠ å‡ºé—®é¢˜çš„æ¦‚ç‡ï¼Œ<strong>å› æ­¤æˆ‘æ¨è4åˆ°6ä¸ªèŠ‚ç‚¹ä¸ºä½³ã€‚</strong></p><p><strong>2.Memcachedçš„ä¸»ä»æœºåˆ¶</strong></p><p>Redisæœ¬èº«æ”¯æŒä¸»ä»çš„éƒ¨ç½²æ–¹å¼ï¼Œä½†æ˜¯Memcachedå¹¶ä¸æ”¯æŒï¼Œæ‰€ä»¥æˆ‘ä»¬ä»Šå¤©ä¸»è¦æ¥äº†è§£ä¸€ä¸‹Memcachedçš„ä¸»ä»æœºåˆ¶æ˜¯å¦‚ä½•åœ¨å®¢æˆ·ç«¯å®ç°çš„ã€‚</p><p>åœ¨ä¹‹å‰çš„é¡¹ç›®ä¸­ï¼Œæˆ‘å°±é‡åˆ°äº†å•ä¸ªä¸»èŠ‚ç‚¹æ•…éšœå¯¼è‡´æ•°æ®ç©¿é€çš„é—®é¢˜ï¼Œè¿™æ—¶æˆ‘ä¸ºæ¯ä¸€ç»„Masteré…ç½®ä¸€ç»„Slaveï¼Œæ›´æ–°æ•°æ®æ—¶ä¸»ä»åŒæ­¥æ›´æ–°ã€‚è¯»å–æ—¶ï¼Œä¼˜å…ˆä»Slaveä¸­è¯»æ•°æ®ï¼Œå¦‚æœè¯»å–ä¸åˆ°æ•°æ®å°±ç©¿é€åˆ°Masterè¯»å–ï¼Œå¹¶ä¸”å°†æ•°æ®å›ç§åˆ°Slaveä¸­ä»¥ä¿æŒSlaveæ•°æ®çš„çƒ­åº¦ã€‚</p><p>ä¸»ä»æœºåˆ¶æœ€å¤§çš„ä¼˜ç‚¹å°±æ˜¯å½“æŸä¸€ä¸ªSlaveå®•æœºæ—¶ï¼Œè¿˜ä¼šæœ‰Masterä½œä¸ºå…œåº•ï¼Œä¸ä¼šæœ‰å¤§é‡è¯·æ±‚ç©¿é€åˆ°æ•°æ®åº“çš„æƒ…å†µå‘ç”Ÿï¼Œæå‡äº†ç¼“å­˜ç³»ç»Ÿçš„é«˜å¯ç”¨æ€§ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/54/60/5468eb8779396b38c3731839f3d8d960.jpg?wh=1142*588\" alt=\"\"></p><p><strong>3.å¤šå‰¯æœ¬</strong></p><p>å…¶å®ï¼Œä¸»ä»æ–¹å¼å·²ç»èƒ½å¤Ÿè§£å†³å¤§éƒ¨åˆ†åœºæ™¯çš„é—®é¢˜ï¼Œä½†æ˜¯å¯¹äºæç«¯æµé‡çš„åœºæ™¯ä¸‹ï¼Œä¸€ç»„Slaveé€šå¸¸æ¥è¯´å¹¶ä¸èƒ½å®Œå…¨æ‰¿æ‹…æ‰€æœ‰æµé‡ï¼ŒSlaveç½‘å¡å¸¦å®½å¯èƒ½æˆä¸ºç“¶é¢ˆã€‚</p><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬è€ƒè™‘åœ¨Master/Slaveä¹‹å‰å¢åŠ ä¸€å±‚å‰¯æœ¬å±‚ï¼Œæ•´ä½“æ¶æ„æ˜¯è¿™æ ·çš„ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/67/03/6779f9b6741b7767068df767218bcd03.jpg?wh=1142*537\" alt=\"\"></p><p>åœ¨è¿™ä¸ªæ–¹æ¡ˆä¸­ï¼Œå½“å®¢æˆ·ç«¯å‘èµ·æŸ¥è¯¢è¯·æ±‚æ—¶ï¼Œè¯·æ±‚é¦–å…ˆä¼šå…ˆä»å¤šä¸ªå‰¯æœ¬ç»„ä¸­é€‰å–ä¸€ä¸ªå‰¯æœ¬ç»„å‘èµ·æŸ¥è¯¢ï¼Œå¦‚æœæŸ¥è¯¢å¤±è´¥ï¼Œå°±ç»§ç»­æŸ¥è¯¢Master/Slaveï¼Œå¹¶ä¸”å°†æŸ¥è¯¢çš„ç»“æœå›ç§åˆ°æ‰€æœ‰å‰¯æœ¬ç»„ä¸­ï¼Œé¿å…å‰¯æœ¬ç»„ä¸­è„æ•°æ®çš„å­˜åœ¨ã€‚</p><p>åŸºäºæˆæœ¬çš„è€ƒè™‘ï¼Œæ¯ä¸€ä¸ªå‰¯æœ¬ç»„å®¹é‡æ¯”Masterå’ŒSlaveè¦å°ï¼Œå› æ­¤å®ƒåªå­˜å‚¨äº†æ›´åŠ çƒ­çš„æ•°æ®ã€‚åœ¨è¿™å¥—æ¶æ„ä¸­ï¼ŒMasterå’ŒSlaveçš„è¯·æ±‚é‡ä¼šå¤§å¤§å‡å°‘ï¼Œä¸ºäº†ä¿è¯å®ƒä»¬å­˜å‚¨æ•°æ®çš„çƒ­åº¦ï¼Œåœ¨å®è·µä¸­æˆ‘ä»¬ä¼šæŠŠMasterå’ŒSlaveä½œä¸ºä¸€ç»„å‰¯æœ¬ç»„ä½¿ç”¨ã€‚</p><h2>ä¸­é—´ä»£ç†å±‚æ–¹æ¡ˆ</h2><p>è™½ç„¶å®¢æˆ·ç«¯æ–¹æ¡ˆå·²ç»èƒ½è§£å†³å¤§éƒ¨åˆ†çš„é—®é¢˜ï¼Œä½†æ˜¯åªèƒ½åœ¨å•ä¸€è¯­è¨€ç³»ç»Ÿä¹‹é—´å¤ç”¨ã€‚ä¾‹å¦‚å¾®åšä½¿ç”¨Javaè¯­è¨€å®ç°äº†è¿™ä¹ˆä¸€å¥—é€»è¾‘ï¼Œæˆ‘ä½¿ç”¨PHPå°±éš¾ä»¥å¤ç”¨ï¼Œéœ€è¦é‡æ–°å†™ä¸€å¥—ï¼Œå¾ˆéº»çƒ¦ã€‚<strong>è€Œä¸­é—´ä»£ç†å±‚çš„æ–¹æ¡ˆå°±å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</strong>ä½ å¯ä»¥å°†å®¢æˆ·ç«¯è§£å†³æ–¹æ¡ˆçš„ç»éªŒç§»æ¤åˆ°ä»£ç†å±‚ä¸­ï¼Œé€šè¿‡é€šç”¨çš„åè®®ï¼ˆå¦‚Redisåè®®ï¼‰æ¥å®ç°åœ¨å…¶ä»–è¯­è¨€ä¸­çš„å¤ç”¨ã€‚</p><p>å¦‚æœä½ æ¥è‡ªç ”ç¼“å­˜ä»£ç†å±‚ï¼Œä½ å°±å¯ä»¥å°†å®¢æˆ·ç«¯æ–¹æ¡ˆä¸­çš„é«˜å¯ç”¨é€»è¾‘å°è£…åœ¨ä»£ç†å±‚ä»£ç é‡Œé¢ï¼Œè¿™æ ·ç”¨æˆ·åœ¨ä½¿ç”¨ä½ çš„ä»£ç†å±‚çš„æ—¶å€™å°±ä¸éœ€è¦å…³å¿ƒç¼“å­˜çš„é«˜å¯ç”¨æ˜¯å¦‚ä½•åšçš„ï¼Œåªéœ€è¦ä¾èµ–ä½ çš„ä»£ç†å±‚å°±å¥½äº†ã€‚</p><p>é™¤æ­¤ä»¥å¤–ï¼Œä¸šç•Œä¹Ÿæœ‰å¾ˆå¤šä¸­é—´ä»£ç†å±‚æ–¹æ¡ˆï¼Œæ¯”å¦‚Facebookçš„<a href=\"https://github.com/facebook/mcrouter\">Mcrouter</a>ï¼ŒTwitterçš„<a href=\"https://github.com/twitter/twemproxy\">Twemproxy</a>ï¼Œè±Œè±†èšçš„<a href=\"https://github.com/CodisLabs/codis\">Codis</a>ã€‚å®ƒä»¬çš„åŸç†åŸºæœ¬ä¸Šå¯ä»¥ç”±ä¸€å¼ å›¾æ¥æ¦‚æ‹¬ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/c5/43/c517437faf418e7fa085b1850e3f7343.jpg?wh=1142*487\" alt=\"\"></p><p>çœ‹è¿™å¼ å›¾ä½ æœ‰ä»€ä¹ˆå‘ç°å—ï¼Ÿ æ‰€æœ‰ç¼“å­˜çš„<strong>è¯»å†™è¯·æ±‚</strong>éƒ½æ˜¯ç»è¿‡ä»£ç†å±‚å®Œæˆçš„ã€‚ä»£ç†å±‚æ˜¯æ— çŠ¶æ€çš„ï¼Œä¸»è¦è´Ÿè´£è¯»å†™è¯·æ±‚çš„è·¯ç”±åŠŸèƒ½ï¼Œå¹¶ä¸”åœ¨å…¶ä¸­å†…ç½®äº†ä¸€äº›é«˜å¯ç”¨çš„é€»è¾‘ï¼Œä¸åŒçš„å¼€æºä¸­é—´ä»£ç†å±‚æ–¹æ¡ˆä¸­ä½¿ç”¨çš„é«˜å¯ç”¨ç­–ç•¥å„æœ‰ä¸åŒã€‚æ¯”å¦‚åœ¨Twemproxyä¸­ï¼ŒProxyä¿è¯åœ¨æŸä¸€ä¸ªRedisèŠ‚ç‚¹æŒ‚æ‰ä¹‹åä¼šæŠŠå®ƒä»é›†ç¾¤ä¸­ç§»é™¤ï¼Œåç»­çš„è¯·æ±‚å°†ç”±å…¶ä»–èŠ‚ç‚¹æ¥å®Œæˆï¼›è€ŒCodisçš„å®ç°ç•¥å¤æ‚ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªå«Codis Haçš„å·¥å…·æ¥å®ç°è‡ªåŠ¨ä»èŠ‚ç‚¹æä¸»èŠ‚ç‚¹ï¼Œåœ¨3.2ç‰ˆæœ¬ä¹‹åæ¢åšäº†Redis Sentinelæ–¹å¼ï¼Œä»è€Œå®ç°RedisèŠ‚ç‚¹çš„é«˜å¯ç”¨ã€‚</p><h2>æœåŠ¡ç«¯æ–¹æ¡ˆ</h2><p>Redisåœ¨2.4ç‰ˆæœ¬ä¸­æå‡ºäº†Redis Sentinelæ¨¡å¼æ¥è§£å†³ä¸»ä»Rediséƒ¨ç½²æ—¶çš„é«˜å¯ç”¨é—®é¢˜ï¼Œå®ƒå¯ä»¥åœ¨ä¸»èŠ‚ç‚¹æŒ‚äº†ä»¥åè‡ªåŠ¨å°†ä»èŠ‚ç‚¹æå‡ä¸ºä¸»èŠ‚ç‚¹ï¼Œä¿è¯æ•´ä½“é›†ç¾¤çš„å¯ç”¨æ€§ï¼Œæ•´ä½“çš„æ¶æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/94/e1/94ae214f840d2844b7b43751aab6d8e1.jpg?wh=1142*531\" alt=\"\"></p><p>Redis Sentinelä¹Ÿæ˜¯é›†ç¾¤éƒ¨ç½²çš„ï¼Œè¿™æ ·å¯ä»¥é¿å…SentinelèŠ‚ç‚¹æŒ‚æ‰é€ æˆæ— æ³•è‡ªåŠ¨æ•…éšœæ¢å¤çš„é—®é¢˜ï¼Œæ¯ä¸€ä¸ªSentinelèŠ‚ç‚¹éƒ½æ˜¯æ— çŠ¶æ€çš„ã€‚åœ¨Sentinelä¸­ä¼šé…ç½®Masterçš„åœ°å€ï¼ŒSentinelä¼šæ—¶åˆ»ç›‘æ§Masterçš„çŠ¶æ€ï¼Œå½“å‘ç°Masteråœ¨é…ç½®çš„æ—¶é—´é—´éš”å†…æ— å“åº”ï¼Œå°±è®¤ä¸ºMasterå·²ç»æŒ‚äº†ï¼ŒSentinelä¼šä»ä»èŠ‚ç‚¹ä¸­é€‰å–ä¸€ä¸ªæå‡ä¸ºä¸»èŠ‚ç‚¹ï¼Œå¹¶ä¸”æŠŠæ‰€æœ‰å…¶ä»–çš„ä»èŠ‚ç‚¹ä½œä¸ºæ–°ä¸»çš„ä»èŠ‚ç‚¹ã€‚Sentinelé›†ç¾¤å†…éƒ¨åœ¨ä»²è£çš„æ—¶å€™ï¼Œä¼šæ ¹æ®é…ç½®çš„å€¼æ¥å†³å®šå½“æœ‰å‡ ä¸ªSentinelèŠ‚ç‚¹è®¤ä¸ºä¸»æŒ‚æ‰å¯ä»¥åšä¸»ä»åˆ‡æ¢çš„æ“ä½œï¼Œä¹Ÿå°±æ˜¯é›†ç¾¤å†…éƒ¨éœ€è¦å¯¹ç¼“å­˜èŠ‚ç‚¹çš„çŠ¶æ€è¾¾æˆä¸€è‡´æ‰è¡Œã€‚</p><p>Redis Sentinelä¸å±äºä»£ç†å±‚æ¨¡å¼ï¼Œå› ä¸ºå¯¹äºç¼“å­˜çš„å†™å…¥å’Œè¯»å–è¯·æ±‚ä¸ä¼šç»è¿‡SentinelèŠ‚ç‚¹ã€‚SentinelèŠ‚ç‚¹åœ¨æ¶æ„ä¸Šå’Œä¸»ä»æ˜¯å¹³çº§çš„ï¼Œæ˜¯ä½œä¸ºç®¡ç†è€…å­˜åœ¨çš„ï¼Œ<strong>æ‰€ä»¥å¯ä»¥è®¤ä¸ºæ˜¯åœ¨æœåŠ¡ç«¯æä¾›çš„ä¸€ç§é«˜å¯ç”¨æ–¹æ¡ˆã€‚</strong></p><h2>è¯¾ç¨‹å°ç»“</h2><p>è¿™å°±æ˜¯ä»Šå¤©åˆ†äº«çš„å…¨éƒ¨å†…å®¹äº†ï¼Œæˆ‘ä»¬ä¸€èµ·æ¥å›é¡¾ä¸€ä¸‹é‡ç‚¹ï¼š</p><p>åˆ†å¸ƒå¼ç¼“å­˜çš„é«˜å¯ç”¨æ–¹æ¡ˆä¸»è¦æœ‰ä¸‰ç§ï¼Œé¦–å…ˆæ˜¯å®¢æˆ·ç«¯æ–¹æ¡ˆï¼Œä¸€èˆ¬ä¹Ÿç§°ä¸ºSmart Clientã€‚æˆ‘ä»¬é€šè¿‡åˆ¶å®šä¸€äº›æ•°æ®åˆ†ç‰‡å’Œæ•°æ®è¯»å†™çš„ç­–ç•¥ï¼Œå¯ä»¥å®ç°ç¼“å­˜é«˜å¯ç”¨ã€‚è¿™ç§æ–¹æ¡ˆçš„å¥½å¤„æ˜¯æ€§èƒ½æ²¡æœ‰æŸè€—ï¼Œç¼ºç‚¹æ˜¯å®¢æˆ·ç«¯é€»è¾‘å¤æ‚ä¸”åœ¨å¤šè¯­è¨€ç¯å¢ƒä¸‹ä¸èƒ½å¤ç”¨ã€‚</p><p>å…¶æ¬¡ï¼Œä¸­é—´ä»£ç†æ–¹æ¡ˆåœ¨å®¢æˆ·ç«¯å’Œç¼“å­˜èŠ‚ç‚¹ä¹‹é—´å¢åŠ äº†ä¸­é—´å±‚ï¼Œåœ¨æ€§èƒ½ä¸Šä¼šæœ‰ä¸€äº›æŸè€—ï¼Œåœ¨ä»£ç†å±‚ä¼šæœ‰ä¸€äº›å†…ç½®çš„é«˜å¯ç”¨æ–¹æ¡ˆï¼Œæ¯”å¦‚Codisä¼šä½¿ç”¨Codis Haæˆ–è€…Sentinelã€‚</p><p>æœ€åï¼ŒæœåŠ¡ç«¯æ–¹æ¡ˆä¾èµ–äºç»„ä»¶çš„å®ç°ï¼ŒMemcachedå°±åªæ”¯æŒå•æœºç‰ˆæ²¡æœ‰åˆ†å¸ƒå¼å’ŒHAçš„æ–¹æ¡ˆï¼Œè€ŒRedisåœ¨2.4ç‰ˆæœ¬æä¾›äº†Sentinelæ–¹æ¡ˆå¯ä»¥è‡ªåŠ¨è¿›è¡Œä¸»ä»åˆ‡æ¢ã€‚æœåŠ¡ç«¯æ–¹æ¡ˆä¼šåœ¨è¿ç»´ä¸Šå¢åŠ ä¸€äº›å¤æ‚åº¦ã€‚</p><p>æ€»ä½“è€Œè¨€ï¼Œåˆ†å¸ƒå¼ç¼“å­˜çš„ä¸‰ç§æ–¹æ¡ˆå„æœ‰æ‰€é•¿ï¼Œæœ‰äº›å›¢é˜Ÿå¯èƒ½åœ¨å¼€å‘è¿‡ç¨‹ä¸­å·²ç»ç§¯ç´¯äº†Smart Clientä¸Šçš„ä¸€äº›ç»éªŒï¼›è€Œæœ‰äº›å›¢é˜Ÿåœ¨Redisè¿ç»´ä¸Šç»éªŒä¸°å¯Œï¼Œå°±å¯ä»¥æ¨è¿›Sentinelæ–¹æ¡ˆï¼›æœ‰äº›å›¢é˜Ÿåœ¨å­˜å‚¨ç ”å‘æ–¹é¢æœ‰äº›ç§¯ç´¯ï¼Œå°±å¯ä»¥æ¨è¿›ä¸­é—´ä»£ç†å±‚æ–¹æ¡ˆï¼Œç”šè‡³å¯ä»¥è‡ªç ”é€‚åˆè‡ªå·±ä¸šåŠ¡åœºæ™¯çš„ä»£ç†å±‚ç»„ä»¶ï¼Œå…·ä½“çš„é€‰æ‹©è¿˜æ˜¯è¦çœ‹å›¢é˜Ÿçš„å®é™…æƒ…å†µè€Œå®šã€‚</p><h2>ä¸€è¯¾ä¸€æ€</h2><p>ç»“åˆä½ ä»¬è¿‡å¾€çš„ç»å†ï¼Œæˆ‘ä»¬æ¥èŠä¸€èŠç¼“å­˜é«˜å¯ç”¨çš„é‡è¦æ€§å§ï¼Œæ¯”å¦‚å½“ç¼“å­˜å¯ç”¨æ€§ä¸‹é™ä¼šé€ æˆä»€ä¹ˆä¸¥é‡é—®é¢˜å‘¢ï¼Ÿä½ ä»¬åˆæ˜¯å¦‚ä½•æ¥ä¿è¯ç¼“å­˜çš„é«˜å¯ç”¨çš„å‘¢ï¼Ÿæ¬¢è¿åœ¨ç•™è¨€åŒºä¸æˆ‘ä¸€åŒè®¨è®ºã€‚</p><p>æœ€åï¼Œæ„Ÿè°¢ä½ çš„é˜…è¯»ï¼Œå¦‚æœè¿™ç¯‡æ–‡ç« è®©ä½ æœ‰æ‰€æ”¶è·ï¼Œä¹Ÿæ¬¢è¿ä½ å°†å®ƒåˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ã€‚</p>","comments":[{"had_liked":false,"id":143445,"user_name":"ğŸ‘½","can_delete":false,"product_type":"c1","uid":1274117,"ip_address":"","ucode":"D313AF941B412D","user_header":"https://static001.geekbang.org/account/avatar/00/13/71/05/db554eba.jpg","comment_is_top":false,"comment_ctime":1571709743,"is_pvip":false,"replies":[{"id":"55493","content":"æ˜¯çš„ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1571792605,"ip_address":"","comment_id":143445,"utype":1}],"discussion_count":1,"race_medal":0,"score":"160485499695","product_id":100035801,"comment_content":"å¤§æ¦‚æ€»ç»“äº†ä¸€ä¸‹ï¼š<br>å®ç°é«˜å¯ç”¨çš„æ ¸å¿ƒä¾æ—§æ˜¯é›†ç¾¤ã€‚å¤šä¸ªç¼“å­˜èŠ‚ç‚¹ï¼Œæé«˜å®¹é”™ç‡ã€‚<br>å®¢æˆ·ç«¯å®ç°ï¼šç”±å®¢æˆ·ç«¯çš„ç­–ç•¥å†³å®šå¦‚ä½•å†™ç¼“å­˜ï¼Œå¦‚ä½•è¯»ç¼“å­˜ã€‚æ€§èƒ½é«˜ï¼Œä½†æ˜¯é€»è¾‘å¤æ‚ï¼Œæ— æ³•è·¨å¹³å°ã€‚<br>ä¸­é—´ä»¶å®ç°ï¼šæ‰€æœ‰å®¢æˆ·ç«¯å…ˆè®¿é—®ä¸­é—´ä»¶ï¼Œç„¶åä¸­é—´ä»¶å†³å®šäº†ç¼“å­˜ç­–ç•¥ã€‚å› ä¸ºå¼•å…¥äº†ä¸­é—´ä»¶ï¼Œæ‰€ä»¥æ€§èƒ½è¾ƒå·®ï¼Œä½†æ˜¯å¯ä»¥è·¨å¹³å°ï¼Œå¹¶ä¸”æœ‰èƒ½åŠ›çš„å…¬å¸è¿˜å¯ä»¥è‡ªç ”ä¸­é—´ä»¶ã€‚<br>æœåŠ¡ç«¯å®ç°ï¼šä¸»ä»åˆ‡æ¢ç”±æœåŠ¡ç«¯å®ç°ã€‚æœ€å¤§çš„ç¼ºç‚¹æ˜¯å¢åŠ äº†è¿ç»´æˆæœ¬ã€‚<br>ä¸çŸ¥é“æˆ‘çš„ç†è§£æ˜¯å¦æ­£ç¡®ã€‚<br><br>","like_count":38,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":471541,"discussion_content":"æ˜¯çš„ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571792605,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":142601,"user_name":"longslee","can_delete":false,"product_type":"c1","uid":1465986,"ip_address":"","ucode":"C24E32E5B1B6F5","user_header":"https://static001.geekbang.org/account/avatar/00/16/5e/82/438c8534.jpg","comment_is_top":false,"comment_ctime":1571410248,"is_pvip":false,"replies":[{"id":"55088","content":"1. å¦‚æœBèŠ‚ç‚¹å‰”é™¤ï¼Œé‚£ä¹ˆK2çš„è¯»å†™éƒ½ä¼šåˆ°CèŠ‚ç‚¹ä¸Š<br>2. å‘½ä¸­ç‡ä¼šä¸‹é™ï¼Œå› ä¸ºBèŠ‚ç‚¹æ²¡æœ‰è¢«åˆ é™¤çš„æ—¶å€™ï¼ŒCèŠ‚ç‚¹ä¸Šæ˜¯æ²¡æœ‰K2æ•°æ®çš„ã€‚BèŠ‚ç‚¹å‰”é™¤åï¼Œç¬¬ä¸€æ¬¡ä»CèŠ‚ç‚¹è·å–K2æ•°æ®æ˜¯è¦ç©¿é€çš„","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1571453669,"ip_address":"","comment_id":142601,"utype":1}],"discussion_count":5,"race_medal":0,"score":"65995919688","product_id":100035801,"comment_content":"æ‰“å¡ã€‚ è€å¸ˆå¥½ï¼Œæé—®ï¼šä¸€è‡´æ€§Hashä¸­ï¼Œæ¯”å¦‚å­˜åœ¨A(k1)ã€B(k2)ã€C(k3)ï¼Œ3ä¸ªèŠ‚ç‚¹ï¼Œæ‹¬å·ä¸­ä¸ºåˆ†é…çš„Keyï¼Œå‡å¦‚BèŠ‚ç‚¹å‰”é™¤äº†ï¼Œé‚£ä¹ˆk2ä¼šæ¼‚ç§»åˆ°CèŠ‚ç‚¹ã€‚ é‚£ä¹ˆæ­¤æ—¶å®¢æˆ·ç«¯è¯·æ±‚get k2çš„æ—¶å€™ï¼Œæ˜¯è¢«è®¡ç®—å¥½ä»CèŠ‚ç‚¹è·å–å‘¢ï¼Œè¿˜æ˜¯å®Œå…¨å°±æ‹¿ä¸åˆ°éœ€è¦å»æ•°æ®åº“æŸ¥ï¼Ÿå¦‚æœæ˜¯ä»CèŠ‚ç‚¹è·å–ï¼Œé‚£æ„Ÿè§‰å‘½ä¸­ç‡å®Œå…¨æ²¡æœ‰ä¸‹é™ã€‚ è¿™ä¸€ç‚¹ç¡®å®æ²¡ææ¸…æ¥šï¼Œå¿˜è€å¸ˆè§£æƒ‘ï¼Œè°¢è°¢ğŸ™","like_count":15,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":471192,"discussion_content":"1. å¦‚æœBèŠ‚ç‚¹å‰”é™¤ï¼Œé‚£ä¹ˆK2çš„è¯»å†™éƒ½ä¼šåˆ°CèŠ‚ç‚¹ä¸Š\n2. å‘½ä¸­ç‡ä¼šä¸‹é™ï¼Œå› ä¸ºBèŠ‚ç‚¹æ²¡æœ‰è¢«åˆ é™¤çš„æ—¶å€™ï¼ŒCèŠ‚ç‚¹ä¸Šæ˜¯æ²¡æœ‰K2æ•°æ®çš„ã€‚BèŠ‚ç‚¹å‰”é™¤åï¼Œç¬¬ä¸€æ¬¡ä»CèŠ‚ç‚¹è·å–K2æ•°æ®æ˜¯è¦ç©¿é€çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571453669,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1180676,"avatar":"https://static001.geekbang.org/account/avatar/00/12/04/04/0af56558.jpg","nickname":"Jc.Chen","note":"","ucode":"36886491352CD4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":302949,"discussion_content":"ä½ åº”è¯¥æ˜¯ç†è§£é”™[æ¼‚ç§»]çš„æ„æ€ï¼Œ[æ¼‚ç§»]æ˜¯æŒ‡ï¼ŒæŒ‡å®škeyå°†è¢«è§£æåˆ°CèŠ‚ç‚¹è·å–ï¼Œä¸æ˜¯æŒ‡keyå’Œvalueè¿™ä¸ªé”®å€¼å¯¹æ¼‚ç§»åˆ°CèŠ‚ç‚¹","likes_number":8,"is_delete":false,"is_hidden":false,"ctime":1599096411,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1480119,"avatar":"https://static001.geekbang.org/account/avatar/00/16/95/b7/15e157ec.jpg","nickname":"è·¯äººç”²","note":"","ucode":"B720984454AFAF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":71559,"discussion_content":"å°±æ˜¯è¯´ï¼Œæ•°æ®å†™åˆ°ä¸€ä¸ªèŠ‚ç‚¹åˆ†ç‰‡ä¸­ï¼Œå…¶ä½™çš„ä¸å†™å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575433480,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1465986,"avatar":"https://static001.geekbang.org/account/avatar/00/16/5e/82/438c8534.jpg","nickname":"longslee","note":"","ucode":"C24E32E5B1B6F5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1480119,"avatar":"https://static001.geekbang.org/account/avatar/00/16/95/b7/15e157ec.jpg","nickname":"è·¯äººç”²","note":"","ucode":"B720984454AFAF","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":71744,"discussion_content":"å—¯ï¼Ÿæ²¡æ‡‚å‘¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575455116,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":71559,"ip_address":""},"score":71744,"extra":""},{"author":{"id":1123043,"avatar":"https://static001.geekbang.org/account/avatar/00/11/22/e3/510b69f9.jpg","nickname":"benny","note":"","ucode":"E2F30AF0C808D9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1480119,"avatar":"https://static001.geekbang.org/account/avatar/00/16/95/b7/15e157ec.jpg","nickname":"è·¯äººç”²","note":"","ucode":"B720984454AFAF","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":166570,"discussion_content":"å¯¹ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581412978,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":71559,"ip_address":""},"score":166570,"extra":""}]}]},{"had_liked":false,"id":144463,"user_name":"é•¿æœŸè§„åˆ’","can_delete":false,"product_type":"c1","uid":1019332,"ip_address":"","ucode":"5EF65E9115834B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8d/c4/6f97daea.jpg","comment_is_top":false,"comment_ctime":1571928686,"is_pvip":false,"replies":[{"id":"55688","content":"1ä¸‡æ˜¯åŸºå‡†æµ‹è¯•çš„ç»“æœï¼Œåœ¨å®é™…ä¸­sqlæ›´å¤æ‚ï¼Œè¾¾ä¸åˆ°è¿™ä¸ªæ€§èƒ½","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1571960008,"ip_address":"","comment_id":144463,"utype":1}],"discussion_count":3,"race_medal":0,"score":"57406503534","product_id":100035801,"comment_content":"è€å¸ˆï¼Œæ‚¨ä¹‹å‰è¯´4æ ¸8Gçš„æœºå™¨ä¸Šï¼ŒMySQLæœ€é«˜æ”¯æ’‘QPSä¸º1ä¸‡ï¼Œæ€æ ·æœ¬æ–‡å¼€å¤´åˆè¯´MySQLè¯»å³°å€¼æ‰1500&#47;så‘¢","like_count":14,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":471954,"discussion_content":"1ä¸‡æ˜¯åŸºå‡†æµ‹è¯•çš„ç»“æœï¼Œåœ¨å®é™…ä¸­sqlæ›´å¤æ‚ï¼Œè¾¾ä¸åˆ°è¿™ä¸ªæ€§èƒ½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571960008,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1886331,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/c8/7b/153181d7.jpg","nickname":"å¤œè¾‰","note":"","ucode":"9421385F51FF9E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":364503,"discussion_content":"ä¹‹å‰ä¸æ˜¯è¯´äº’è”ç½‘çš„SQLéƒ½æ¯”è¾ƒç®€å•å˜›ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617504504,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1744053,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/9c/b5/c936c54b.jpg","nickname":"ğŸ’£","note":"","ucode":"F3B82CEB6B6934","race_medal":3,"user_type":1,"is_pvip":true},"reply_author":{"id":1886331,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/c8/7b/153181d7.jpg","nickname":"å¤œè¾‰","note":"","ucode":"9421385F51FF9E","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":590965,"discussion_content":"äº’è”ç½‘çš„sqlæ˜¯ä¸ªä»€ä¹ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1666190073,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":364503,"ip_address":"ä¸Šæµ·"},"score":590965,"extra":""}]}]},{"had_liked":false,"id":210132,"user_name":"é’±","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1587689514,"is_pvip":false,"replies":[{"id":"78353","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1587699373,"ip_address":"","comment_id":210132,"utype":1}],"discussion_count":4,"race_medal":0,"score":"48832329770","product_id":100035801,"comment_content":"é«˜å¯ç”¨çš„è®¾è®¡æ€è·¯æ²¡æœ‰å…¶ä»–çš„æ ¸å¿ƒå°±æ˜¯å¢åŠ å‰¯æœ¬ï¼Œé’ˆå¯¹æ•°æ®å°±å¢åŠ æ•°æ®å‰¯æœ¬ï¼Œé’ˆå¯¹æœåŠ¡å°±å¢åŠ æœåŠ¡å‰¯æœ¬ï¼Œé’ˆå¯¹æœºæˆ¿å°±å¢åŠ æœºæˆ¿å‰¯æœ¬ï¼Œå¢åŠ å‰¯æœ¬å¼•å…¥çš„æ–°é—®é¢˜æ˜¯æ•°æ®ä¸ä¸€è‡´æ€§ï¼Œä¸‹é¢å„ç§ç®—æ³•ä»€ä¹ˆçš„éƒ½æ˜¯ä¸ºäº†è§£å†³å› å¢åŠ å‰¯æœ¬è€Œå¸¦æ¥çš„æ•°æ®ä¸ä¸€è‡´æ€§é—®é¢˜æˆ–è€…èŠ‚ç‚¹æŒ‚äº†æ€ä¹ˆä½¿æœåŠ¡ç»§ç»­å¯ç”¨çš„ç­–ç•¥ã€‚æ¯”å¦‚ï¼šæ•°æ®æ€ä¹ˆè¿ç§»ï¼Ÿæ•…éšœæ€ä¹ˆéš”ç¦»ï¼Ÿæ•…éšœèŠ‚ç‚¹æ¢å¤åæ€ä¹ˆæ˜¯å¦åŠ å…¥ï¼Ÿæ€ä¹ˆåŠ å…¥ï¼Ÿæœ€è¿‘çƒ­ä¸Šäº†çœ‹ç«å½±ï¼Œå½±åˆ†æœ¯å°±æ˜¯é¸£äººçš„é«˜å¯ç”¨æ–¹å¼ï¼Œå…¶ä»–çš„é«˜å¯ç”¨æ€è·¯å’Œè¿™ä¸ªå¦‚å‡ºä¸€è¾™ã€‚ä»åŠ¨æ¼«ä¸­ä¹Ÿå¯ä»¥çœ‹å‡ºï¼Œè¿™ä¸ªéœ€è¦æ›´å¤šèƒ½é‡ï¼Œå¯¹å…¬å¸è€Œè¨€ï¼Œéœ€è¦æ›´å¤šæœºå™¨å’Œå­˜å‚¨ç©ºé—´ï¼ŒæŠ€æœ¯å¤æ‚åº¦ä¹Ÿä¼šå¢åŠ ä¸€äº›ï¼Œå¹¸å¥½æœ‰ç°æˆçš„ç»„ä»¶é¿å…äººäººéƒ½é‡å¤é€ è½®å­çš„èµ„æºæµªè´¹ã€‚","like_count":12,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":492952,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587699373,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1872697,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/93/39/f642023f.jpg","nickname":"Hplus","note":"","ucode":"DC32CBC3E9C11D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":564275,"discussion_content":"ä¸é”™","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650204820,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1886331,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/c8/7b/153181d7.jpg","nickname":"å¤œè¾‰","note":"","ucode":"9421385F51FF9E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":364511,"discussion_content":"å†—ä½™ä¸åˆ†ç‰‡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617506079,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1092218,"avatar":"https://static001.geekbang.org/account/avatar/00/10/aa/7a/ae8c247d.jpg","nickname":"æŒ‡å°–ä»¥ä¸œ","note":"","ucode":"1DEE134FE92FD0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":262937,"discussion_content":"å‘ä½ å­¦ä¹ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589157851,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":143446,"user_name":"ğŸ‘½","can_delete":false,"product_type":"c1","uid":1274117,"ip_address":"","ucode":"D313AF941B412D","user_header":"https://static001.geekbang.org/account/avatar/00/13/71/05/db554eba.jpg","comment_is_top":false,"comment_ctime":1571709933,"is_pvip":false,"replies":[{"id":"55490","content":"æ˜¯çš„ ï¼šï¼‰","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1571792516,"ip_address":"","comment_id":143446,"utype":1}],"discussion_count":4,"race_medal":0,"score":"40226415597","product_id":100035801,"comment_content":"å¦å¤–å°±å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„ç†è§£ï¼š<br>è€å®è¯´ä¸€å¼€å§‹æˆ‘ä¹Ÿä¸€è„¸æ‡µé€¼ã€‚ä»¥ä¸ºå®¢æˆ·ç«¯å°±æ˜¯ç”¨æˆ·ç«¯ã€‚<br>ä½†æ˜¯åæ¥æƒ³é€šäº†ã€‚<br>åº”ç”¨æœåŠ¡å™¨ä¸ºç”¨æˆ·æä¾›æ•°æ®æ¥å£ï¼Œç”¨æˆ·å°±æ˜¯å®¢æˆ·ç«¯ï¼Œåº”ç”¨å°±æ˜¯æœåŠ¡ç«¯ã€‚<br>ä½†æ˜¯ç¼“å­˜ä¸ºåº”ç”¨æœåŠ¡å™¨æä¾›ç¼“å­˜æœåŠ¡ï¼Œè¿™æ—¶å€™å¯¹äºç¼“å­˜æœåŠ¡å™¨æ¥è¯´åº”ç”¨æœåŠ¡å™¨å°±æ˜¯å®¢æˆ·ç«¯ï¼Œè€Œç¼“å­˜å°±æ˜¯æœåŠ¡ç«¯ã€‚","like_count":9,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":471542,"discussion_content":"æ˜¯çš„ ï¼šï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571792516,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1886331,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/c8/7b/153181d7.jpg","nickname":"å¤œè¾‰","note":"","ucode":"9421385F51FF9E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":364507,"discussion_content":"è¿™ä¸€èŠ‚çš„å®¢æˆ·ç«¯æŒ‡çš„æ˜¯åº”ç”¨å±‚ï¼ŒæœåŠ¡ç«¯æŒ‡çš„æ˜¯ç¼“å­˜ï¼Œå› ä¸ºç¼“å­˜ç»™åº”ç”¨å±‚æä¾›æ•°æ®è¯»å–åŠŸèƒ½\nå®¢æˆ·ç«¯æ–¹æ¡ˆï¼šåœ¨åº”ç”¨å±‚ä»£ç è®¾ç½®ç¼“å­˜è¯»å–å’Œå†™å…¥æ–¹æ¡ˆ\nä¸­é—´ä»£ç†å±‚æ–¹æ¡ˆï¼šåœ¨åº”ç”¨ä»£ç å’Œç¼“å­˜èŠ‚ç‚¹ä¹‹é—´å¢åŠ ä»£ç†å±‚ï¼Œåº”ç”¨å±‚æ‰€æœ‰çš„å†™å…¥å’Œè¯»å–çš„è¯· æ±‚éƒ½é€šè¿‡ä»£ç†å±‚\næœåŠ¡ç«¯æ–¹æ¡ˆï¼šç¼“å­˜æœ¬èº«å†…éƒ¨å®ç°äº†é«˜å¯ç”¨æ–¹æ¡ˆï¼Œredis sentinelæˆ–è€…redis cluster","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1617505774,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1009831,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/68/a7/c3fd1fd9.jpg","nickname":"èª","note":"","ucode":"9D672A8580A945","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":312322,"discussion_content":"è¿™é‡Œçš„clientå°±æ˜¯ä½ çš„å»è¿œç¨‹ç¼“å­˜æ‹¿æ•°æ®çš„ä»£ç ï¼Œç”¨çš„æ¯”å¦‚redis smart clientä¹‹ç±»çš„library","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1602662428,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1592279,"avatar":"https://static001.geekbang.org/account/avatar/00/18/4b/d7/f46c6dfd.jpg","nickname":"William Ning","note":"","ucode":"4DB8D05E69E5F3","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":362718,"discussion_content":"å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯æ˜¯ç›¸å¯¹è€Œè¨€ï¼Œäº’ä¸ºå‚è€ƒï½ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617017976,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":147052,"user_name":"Hwan","can_delete":false,"product_type":"c1","uid":1205627,"ip_address":"","ucode":"A728C6790511BD","user_header":"https://static001.geekbang.org/account/avatar/00/12/65/7b/66b9befd.jpg","comment_is_top":false,"comment_ctime":1572778149,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"23047614629","product_id":100035801,"comment_content":"å›ç­”ä¸€ä¸‹é—®é¢˜ï¼Œå¦‚æœç¼“å­˜çš„é«˜å¯ç”¨åšçš„ä¸å¤Ÿå¥½çš„è¯ï¼Œä¸€æ—¦çº¿ä¸Šå‘ç”Ÿæ•…éšœï¼Œå¯¼è‡´ç¼“å­˜ç›´æ¥å´©äº†ï¼Œå†åŠ ä¸Šå¹¶å‘é‡æ¯”è¾ƒå¤§çš„è¯ï¼Œå¯èƒ½ä¼šç›´æ¥å»è®¿é—®æ•°æ®åº“äº†ï¼Œå¯¹æ•°æ®åº“çš„å‹åŠ›æ¯”è¾ƒå¤§ï¼Œä¸¥é‡çš„è¯ï¼Œä¼šå¯¼è‡´æ•°æ®åº“å´©æºƒï¼Œç„¶åå°±æ˜¯å„ç§ä¸¢æ•°æ®ï¼Œç„¶åå…³äºå¦‚ä½•åšçš„è¯ï¼Œå»ºè®®ä¹‹å‰åšå¥½å…³äºä¸€äº›æµé‡çš„è¯„ä¼°ï¼Œä»¥Redisä¸ºä¾‹ï¼Œç°åœ¨æœ‰ç°æˆçš„å“¨å…µå’Œé›†ç¾¤æ–¹æ¡ˆå¯ä»¥ä½¿ç”¨ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥Codisï¼Œè¿˜æœ‰ä¸€ç‚¹å°±æ˜¯éƒ¨ç½²çº¿ä¸Šçš„æ—¶å€™å¯ä»¥å…ˆæ¼”ç»ƒä¸‹","like_count":6},{"had_liked":false,"id":162946,"user_name":"é•¿æœŸè§„åˆ’","can_delete":false,"product_type":"c1","uid":1019332,"ip_address":"","ucode":"5EF65E9115834B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8d/c4/6f97daea.jpg","comment_is_top":false,"comment_ctime":1576633311,"is_pvip":false,"replies":[{"id":"62135","content":"1. å†™å…¥çš„æ—¶å€™ä¸­ç¼“å­˜ï¼Œè¿™æ ·ä»ç¼“å­˜é‡Œé¢è¯»å°±å®æ—¶äº†<br>2. ç›´æ¥è¯»ä¸»åº“","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1576735174,"ip_address":"","comment_id":162946,"utype":1}],"discussion_count":9,"race_medal":0,"score":"18756502495","product_id":100035801,"comment_content":"è€å¸ˆï¼Œä¸»ä»ä¼šæœ‰å»¶è¿Ÿï¼Œå†™å…¥ä¸»åº“ï¼Œä½†å»¶è¿ŸåŒæ­¥åˆ°ä»åº“ï¼Œåœ¨åŒæ­¥å®Œæˆå‰å»ä»åº“è¯»æ•°æ®ï¼Œè¯»ä¸åˆ°ï¼Œè¿™å¦‚ä½•è§£å†³å‘¢","like_count":5,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478186,"discussion_content":"1. å†™å…¥çš„æ—¶å€™ä¸­ç¼“å­˜ï¼Œè¿™æ ·ä»ç¼“å­˜é‡Œé¢è¯»å°±å®æ—¶äº†\n2. ç›´æ¥è¯»ä¸»åº“","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576735174,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1518310,"avatar":"https://static001.geekbang.org/account/avatar/00/17/2a/e6/c788257f.jpg","nickname":"geek_arong2048","note":"","ucode":"AB575BE100E4A9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":576550,"discussion_content":"å†™å…¥ç¼“å­˜åï¼Œrediså¯èƒ½ä¹Ÿå­˜åœ¨ä¸»ä»å»¶è¿Ÿé—®é¢˜ï¼Œè¿™æ—¶è¯»åˆ°çš„redisæ•°æ®ä¹Ÿæ˜¯è€æ•°æ®ï¼Œè¿™åº”è¯¥å¦‚ä½•è§£å†³å‘¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655645495,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":478186,"ip_address":""},"score":576550,"extra":""}]},{"author":{"id":1013493,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/76/f5/e3f5bd8d.jpg","nickname":"å®ä»”","note":"","ucode":"A0F17DFF99DB21","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":213194,"discussion_content":"å†™å…¥çš„æ—¶å€™ä¸­ç¼“å­˜æ˜¯å•¥æ„æ€ï¼Œè¿™å¥è¯æ²¡ç†è§£","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1585058583,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1755152,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/VTPuhJb5xxuRwH1iblqrAe3De4PoETgNWibZRkLlhvszysdtpAvSPZFuYtsJfWJmoXOFFWnpR02W9NGIiammU8UPg/132","nickname":"Info_E","note":"","ucode":"97207B2CC4C776","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1013493,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/76/f5/e3f5bd8d.jpg","nickname":"å®ä»”","note":"","ucode":"A0F17DFF99DB21","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":550673,"discussion_content":"å†™ä¸»åº“ä¹‹å‰å†™ç¼“å­˜ï¼Œ è¯»çš„æ—¶å€™ç›´æ¥è¯»ç¼“å­˜å°±å®Œäº† åˆ«è¯»ä»åº“","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644664550,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":213194,"ip_address":""},"score":550673,"extra":""}]},{"author":{"id":2104541,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI7paIUwnxWN99xhC2omNeAIbKY0FhYX3ibAh85FZqQphlr97UewO51FyqeIjSg31dZ6p7S8tgKk5Q/132","nickname":"å†°","note":"","ucode":"685BB45108D2DB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":312584,"discussion_content":"ä¸»ä»å¤åˆ¶çš„å»¶è¿Ÿé—®é¢˜(å…ˆåˆ†æ¸…å“ªäº›è¯·æ±‚å…è®¸è¿‡æœŸè¯»ï¼Œå“ªäº›è¯·æ±‚ä¸å…è®¸è¿‡æœŸè¯»)ï¼Œä¸€ä¸»ä¸€ä»çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ åŠåŒæ­¥å¤åˆ¶+å¯¹æ¯”ä½ç‚¹è§£å†³çš„ã€‚\nä¸¤ä¸»ä¸¤ä»çš„æ—¶å€™æˆ‘ä»¬æ˜¯é‡‡ç”¨ä¸å…è®¸è¿‡æœŸè¯»çš„è¯·æ±‚èµ°ä¸»åº“çš„æ–¹æ¡ˆè§£å†³çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602739190,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1755152,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/VTPuhJb5xxuRwH1iblqrAe3De4PoETgNWibZRkLlhvszysdtpAvSPZFuYtsJfWJmoXOFFWnpR02W9NGIiammU8UPg/132","nickname":"Info_E","note":"","ucode":"97207B2CC4C776","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2104541,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI7paIUwnxWN99xhC2omNeAIbKY0FhYX3ibAh85FZqQphlr97UewO51FyqeIjSg31dZ6p7S8tgKk5Q/132","nickname":"å†°","note":"","ucode":"685BB45108D2DB","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":356159,"discussion_content":"å¯¹æ¯”ä½ç‚¹æ˜¯å•¥æ„æ€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615542668,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":312584,"ip_address":""},"score":356159,"extra":""},{"author":{"id":1886331,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/c8/7b/153181d7.jpg","nickname":"å¤œè¾‰","note":"","ucode":"9421385F51FF9E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2104541,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI7paIUwnxWN99xhC2omNeAIbKY0FhYX3ibAh85FZqQphlr97UewO51FyqeIjSg31dZ6p7S8tgKk5Q/132","nickname":"å†°","note":"","ucode":"685BB45108D2DB","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":364512,"discussion_content":"ä¸ºä»€ä¹ˆä¸¤ä¸»ä¸¤ä»çš„æ—¶å€™ä¸ç»§ç»­é‡‡ç”¨åŠåŒæ­¥å¤åˆ¶+å¯¹æ¯”ä½ç‚¹çš„æ–¹æ¡ˆï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617506192,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":312584,"ip_address":""},"score":364512,"extra":""}]},{"author":{"id":1013493,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/76/f5/e3f5bd8d.jpg","nickname":"å®ä»”","note":"","ucode":"A0F17DFF99DB21","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":213199,"discussion_content":"ç¬¬äºŒä¸ªåº”è¯¥æ˜¯ç›´æ¥è¯»ä»åº“å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585058655,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1678641,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/ONIogicHLw4qYdzjVlm5SS75kqnmrdziadgOaHZNn8IGffSZ8xHTgOz0ZBzsFqyO5dsjF7JFs5LBXvHXSpC6eiaibg/132","nickname":"Geek_4c1353","note":"","ucode":"E86D3B067A3694","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1013493,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/76/f5/e3f5bd8d.jpg","nickname":"å®ä»”","note":"","ucode":"A0F17DFF99DB21","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":290273,"discussion_content":"ç¬¬äºŒä¸ªæ˜¯è¯»ä¸»åº“","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1594394028,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":213199,"ip_address":""},"score":290273,"extra":""}]}]},{"had_liked":false,"id":148321,"user_name":"æµ·ç½—æ²ƒå¾·","can_delete":false,"product_type":"c1","uid":1165364,"ip_address":"","ucode":"8704F1D6980FA0","user_header":"https://static001.geekbang.org/account/avatar/00/11/c8/34/fb871b2c.jpg","comment_is_top":false,"comment_ctime":1572979705,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"18752848889","product_id":100035801,"comment_content":"åˆ†äº«ä¸€å€‹è¸©éçš„å‘ï¼Œåœ¨AWSä¸Šï¼Œç”¢å“ç¶“ç†è¦åšä¸€å€‹å¢åŠ æœç´¢é€Ÿåº¦çš„åŠŸèƒ½ï¼Œè¦æ±‚æŠŠæœ€è¿‘æœéçš„é—œéµå­—è·Ÿçµæœç·©å­˜èµ·ä¾†ï¼Œæ–¼æ˜¯å°±é€šéAWS elastic cacheåšäº†ä¸€ç›’ç·©å­˜å±¤ï¼Œç„¶å¾Œç”¢å“ç¶“ç†æå‡ºæˆ‘å€‘çš„é …ç›®æ˜¯è·¨regionè¨ªå•çš„ï¼Œæˆ‘åœ¨A regionæ›´æ”¹æ•¸æ“šå¾Œåœ¨ç¬é–“é–‹å¦ä¸€å€‹ç€è¦½å™¨ç”¨deep linkæ–¹å¼å¾B regionå†è¨ªå•ï¼Œéƒ½è¦çœ‹åˆ°æ•¸æ“šï¼Œç„¶è€ŒAWSçš„ç·©å­˜ä¸æ”¯æŒè·¨regionçš„æ•¸æ“šæ‹·è²ï¼Œæ–¼æ˜¯é€™å€‹storyçš„failureå°±è®Šæˆæˆ‘ä¾†èƒŒé‹","like_count":4,"discussions":[{"author":{"id":1009831,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/68/a7/c3fd1fd9.jpg","nickname":"èª","note":"","ucode":"9D672A8580A945","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":312323,"discussion_content":"äº‹å…ˆä¸è°ƒç ”aws docï¼Ÿå“ˆå“ˆå“ˆå“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602662493,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1724843,"avatar":"","nickname":"Geek_908e99","note":"","ucode":"5E7C4D317F0C73","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":289173,"discussion_content":"æœ€åé—®é¢˜è§£å†³äº†å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594016073,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":147223,"user_name":"æ— å½¢","can_delete":false,"product_type":"c1","uid":1016889,"ip_address":"","ucode":"B740E2A68A17A5","user_header":"https://static001.geekbang.org/account/avatar/00/0f/84/39/c8772466.jpg","comment_is_top":false,"comment_ctime":1572845928,"is_pvip":true,"replies":[{"id":"57040","content":"å…¶å®æ›´å¤šçš„ä¼šåœ¨rediså’Œmysqlä¹‹é—´å¢åŠ å¹¶å‘çš„æ§åˆ¶ï¼Œå› ä¸ºredisè¿˜æ˜¯å¯ä»¥æ‰›å¾ˆå¥½çš„å¹¶å‘çš„","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1572940498,"ip_address":"","comment_id":147223,"utype":1}],"discussion_count":9,"race_medal":0,"score":"18752715112","product_id":100035801,"comment_content":"è¿˜æ²¡çœ‹å®Œå°±æƒ³è¯´ä¸€ä¸‹æˆ‘ä¹‹å‰çš„åšæ³•ï¼Œæˆ‘ä»¬æœ‰ä¸¤çº§ç¼“å­˜ï¼ŒæœåŠ¡å™¨åº”ç”¨ç¨‹åºè‡ªèº«æœ‰ä¸€ä¸ªå†…å­˜ç¼“å­˜ï¼Œå†æœ‰Redisç¼“å­˜ï¼Œå¦‚æœå†…å­˜ç¼“å­˜æ²¡æœ‰å‘½ä¸­ï¼Œåº”ç”¨ç¨‹åºä¼šåˆ›å»ºä¸€ä¸ªå•æœºçš„èµ„æºé”ï¼ˆgoè¯­è¨€ï¼Œç”¨map+chanå®ç°ï¼‰ï¼Œå¤§é‡è¯·æ±‚è¿›æ¥ï¼Œåªæœ‰ç¬¬ä¸€ä¸ªè¯·æ±‚ä¼šè·å–é”ï¼Œå…¶ä»–è¯·æ±‚è·å–é”å¤±è´¥ï¼Œè°ƒç”¨waitæ–¹æ³•ï¼Œç­‰å¾…ç¬¬ä¸€ä¸ªè¯·æ±‚è·å–æ•°æ®ï¼Œç¬¬ä¸€ä¸ªè¯·æ±‚å…ˆä»Redisä¸­è·å–æ•°æ®å†™å…¥åˆ°å†…å­˜ç¼“å­˜ï¼ŒRedisæ²¡æœ‰å‘½ä¸­å†è¯»å–MySQLï¼Œå†™ä¼šåˆ°Redisï¼Œæ‰§è¡Œç»“æŸåä¼šé€šè¿‡close chançš„æ–¹å¼å¹¿æ’­æ¶ˆæ¯ï¼Œé€šçŸ¥å…¶ä»–è¯·æ±‚æ‹¿åˆ°äº†æ•°æ®ï¼Œä»å†…å­˜ä¸­è¯»å–æ•°æ®ï¼Œå†é‡Šæ”¾é”ã€‚è¿™æ ·å°±è§£å†³äº†ç¼“å­˜ç©¿é€çš„é—®é¢˜ï¼ŒåŒä¸€æ—¶åˆ»ï¼Œä¸è®ºå¤šå¤§çš„å¹¶å‘é‡ï¼ŒçœŸæ­£åˆ°å­˜å‚¨æŸ¥è¯¢æ•°æ®çš„è¯·æ±‚åªä¼šæœ‰ä¸€ä¸ªã€‚","like_count":5,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":473207,"discussion_content":"å…¶å®æ›´å¤šçš„ä¼šåœ¨rediså’Œmysqlä¹‹é—´å¢åŠ å¹¶å‘çš„æ§åˆ¶ï¼Œå› ä¸ºredisè¿˜æ˜¯å¯ä»¥æ‰›å¾ˆå¥½çš„å¹¶å‘çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572940498,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1079293,"avatar":"https://static001.geekbang.org/account/avatar/00/10/77/fd/c6619535.jpg","nickname":"XD","note":"","ucode":"DC9DCFB3841A4E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":556335,"discussion_content":"singleflight","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1647318245,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1755152,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/VTPuhJb5xxuRwH1iblqrAe3De4PoETgNWibZRkLlhvszysdtpAvSPZFuYtsJfWJmoXOFFWnpR02W9NGIiammU8UPg/132","nickname":"Info_E","note":"","ucode":"97207B2CC4C776","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":356162,"discussion_content":"å¯¹æ¯ä¸ªkeyéƒ½é…ä¸€ä¸ªchanï¼Œå†…å­˜å‹åŠ›ä¼šä¸ä¼šæ¯”è¾ƒå¤§ã€‚ å†™çš„æ—¶å€™æ€ä¹ˆå†™ï¼Œå¤šä¸ªæœåŠ¡å™¨èŠ‚ç‚¹æ—¶ä¼šä¸ä¼šæœ‰ä¸€è‡´æ€§é—®é¢˜ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615543364,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1118196,"avatar":"https://static001.geekbang.org/account/avatar/00/11/0f/f4/026bddc6.jpg","nickname":"æ¢…å°è¥¿","note":"","ucode":"F55CC7763DF440","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":91495,"discussion_content":"é‚£ä½ è¿™æ¯ä¸ªkeyéƒ½ä¼šé…ä¸€ä¸ªchanä¹ˆï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576836899,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1016889,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/84/39/c8772466.jpg","nickname":"æ— å½¢","note":"","ucode":"B740E2A68A17A5","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1118196,"avatar":"https://static001.geekbang.org/account/avatar/00/11/0f/f4/026bddc6.jpg","nickname":"æ¢…å°è¥¿","note":"","ucode":"F55CC7763DF440","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":93058,"discussion_content":"å¯¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576903412,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":91495,"ip_address":""},"score":93058,"extra":""}]},{"author":{"id":1016889,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/84/39/c8772466.jpg","nickname":"æ— å½¢","note":"","ucode":"B740E2A68A17A5","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":44258,"discussion_content":"æ‰‹åŠ¨@è€å¸ˆï¼ŒRediså¹¶å‘ç¡®å®å¾ˆå¼ºï¼Œç”¨å†…å­˜ç¼“å­˜çš„åŸå› æ˜¯ä¸ºå‡å°‘è¯»å–Rediså¸¦æ¥çš„ç½‘ç»œæ¶ˆè€—ï¼Œæé«˜æœåŠ¡çš„æ€§èƒ½ã€‚åœ¨ç”¨å†…å­˜ç¼“å­˜æ—¶èƒ½å¤Ÿæå‡å‡ å€çš„QPS","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572941240,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1150696,"avatar":"https://static001.geekbang.org/account/avatar/00/11/8e/e8/f1e12f2e.jpg","nickname":"é’æœ¨","note":"","ucode":"2B566ABDAD1339","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":43834,"discussion_content":"ä½ è¿™åªæ˜¯å•ä¸€ä¸šåŠ¡åœºæ™¯çš„å®ç°ï¼Œè€Œéè®¾è®¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572912320,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1016889,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/84/39/c8772466.jpg","nickname":"æ— å½¢","note":"","ucode":"B740E2A68A17A5","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1150696,"avatar":"https://static001.geekbang.org/account/avatar/00/11/8e/e8/f1e12f2e.jpg","nickname":"é’æœ¨","note":"","ucode":"2B566ABDAD1339","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":43984,"discussion_content":"è™½ç„¶æœ‰ç‚¹å±€é™ï¼Œä½†æ˜¯åœ¨goè¯­è¨€å†…æ˜¯é€šç”¨çš„ï¼Œå¦‚æœèƒ½æŠŠç¼“å­˜éƒ¨åˆ†ï¼Œå‡çº§ä¸ºç¼“å­˜ä»£ç†ï¼ŒæŠŠé”çš„éƒ¨åˆ†ç”¨äºå¹¶å‘æ§åˆ¶ï¼Œå°±èƒ½æˆä¸ºä¸€ä¸ªé€šç”¨çš„è§£å†³æ–¹æ¡ˆã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1572920701,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":43834,"ip_address":""},"score":43984,"extra":""},{"author":{"id":1886331,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/c8/7b/153181d7.jpg","nickname":"å¤œè¾‰","note":"","ucode":"9421385F51FF9E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1016889,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/84/39/c8772466.jpg","nickname":"æ— å½¢","note":"","ucode":"B740E2A68A17A5","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":364513,"discussion_content":"ç¼“å­˜â€”â€”ã€‹ç¼“å­˜æœåŠ¡\né”â€”â€”ã€‹åˆ†å¸ƒå¼é”æœåŠ¡\næ”¹ä¸ºRPCä¾›è¿œç¨‹è°ƒç”¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617506378,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":43984,"ip_address":""},"score":364513,"extra":""}]}]},{"had_liked":false,"id":145679,"user_name":"é˜¿å¡ç‰›","can_delete":false,"product_type":"c1","uid":1022247,"ip_address":"","ucode":"0BC43A904C3199","user_header":"https://static001.geekbang.org/account/avatar/00/0f/99/27/47aa9dea.jpg","comment_is_top":false,"comment_ctime":1572342595,"is_pvip":false,"replies":[{"id":"56281","content":"æŒ‡çš„æ˜¯ä½ çš„åº”ç”¨æœåŠ¡å™¨ï¼Œæ˜¯ç¼“å­˜çš„ä½¿ç”¨è€…","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1572392766,"ip_address":"","comment_id":145679,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18752211779","product_id":100035801,"comment_content":"è€å¸ˆï¼Œè¿™ä¸ªå®¢æˆ·ç«¯æ–¹æ¡ˆä¸­çš„å®¢æˆ·ç«¯æŒ‡å“ªé‡Œã€‚ä¸€èˆ¬æˆ‘ç†è§£çš„å®¢æˆ·ç«¯æ˜¯æµè§ˆå™¨æˆ–æ‰‹æœºapp...","like_count":4,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":472525,"discussion_content":"æŒ‡çš„æ˜¯ä½ çš„åº”ç”¨æœåŠ¡å™¨ï¼Œæ˜¯ç¼“å­˜çš„ä½¿ç”¨è€…","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572392766,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":250862,"user_name":"aoe","can_delete":false,"product_type":"c1","uid":1121758,"ip_address":"","ucode":"1C6201EDB4E954","user_header":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","comment_is_top":false,"comment_ctime":1601263862,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14486165750","product_id":100035801,"comment_content":"åœ¨åˆ†äº«è€å¸ˆæ–‡ç« çš„æ—¶å€™ï¼Œå­¦åˆ°äº†ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•çš„ä¸åŒå®ç°<br>1. å“ˆå¸Œç¯æ³•<br>2. googleçš„jump consistent hash<br>3. Maglevä¸€è‡´æ€§å“ˆå¸Œæ³•","like_count":3},{"had_liked":false,"id":191103,"user_name":"kamida","can_delete":false,"product_type":"c1","uid":1904146,"ip_address":"","ucode":"16D7CA59870AC0","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/jXbwicoDwia7ooDfwBTRyvNYQkefnVwF1CMicMS8FqKfuFAdvVZo2pqc4ic0R9kSdHTIxaE6YyqxwX8BdNGv5PqSIw/132","comment_is_top":false,"comment_ctime":1584736922,"is_pvip":false,"replies":[{"id":"73903","content":"åˆ†ç‰‡ç­–ç•¥æ˜¯ç”±ç®—æ³•ç¡®å®šçš„","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1585020138,"ip_address":"","comment_id":191103,"utype":1}],"discussion_count":3,"race_medal":0,"score":"10174671514","product_id":100035801,"comment_content":"åˆ†ç‰‡ç­–ç•¥æ˜¯æ€ä¹ˆé…ç½®çš„å‘¢ æ¯”å¦‚è¯´å®¢æˆ·ç«¯æˆ–è€…ä¸­é—´å±‚æ€ä¹ˆçŸ¥é“å“ªä¸ªnodeè´Ÿè´£consistent hash ringä¸Šçš„keyçš„ï¼Ÿæœ‰zookeeperï¼Ÿ<br><br>è¿˜æœ‰æˆ‘è®°å¾—sentinelä¸æ”¯æŒåˆ†ç‰‡çš„å§","like_count":2,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488115,"discussion_content":"åˆ†ç‰‡ç­–ç•¥æ˜¯ç”±ç®—æ³•ç¡®å®šçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585020138,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1886331,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/c8/7b/153181d7.jpg","nickname":"å¤œè¾‰","note":"","ucode":"9421385F51FF9E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":364525,"discussion_content":"redis sentinel ä¸»ä»æ¶æ„ï¼Œåˆ†ç‰‡ç®—æ³•çš„éœ€è¦åœ¨å®¢æˆ·ç«¯æˆ–è€…ä¸­é—´ä»£ç†å±‚å®ç°å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617508294,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1904146,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/jXbwicoDwia7ooDfwBTRyvNYQkefnVwF1CMicMS8FqKfuFAdvVZo2pqc4ic0R9kSdHTIxaE6YyqxwX8BdNGv5PqSIw/132","nickname":"kamida","note":"","ucode":"16D7CA59870AC0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":211957,"discussion_content":"è€å¸ˆèƒ½è§£ç­”ä¸€ä¸‹å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584906940,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":163685,"user_name":"é•¿æœŸè§„åˆ’","can_delete":false,"product_type":"c1","uid":1019332,"ip_address":"","ucode":"5EF65E9115834B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8d/c4/6f97daea.jpg","comment_is_top":false,"comment_ctime":1576766938,"is_pvip":false,"replies":[{"id":"63086","content":"ç®—æ³•ä¸Šä¸å¤ªä¸€æ ·å“¦","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1577242894,"ip_address":"","comment_id":163685,"utype":1}],"discussion_count":3,"race_medal":0,"score":"10166701530","product_id":100035801,"comment_content":"è€å¸ˆï¼ŒRedis Clusterä¸­ä½¿ç”¨äº†hashæ§½ï¼Œæˆ‘ç†è§£è·Ÿä¸€è‡´æ€§hashå…¶å®æ˜¯ç­‰ä»·çš„ï¼Œå¯¹å§ã€‚ä¸è¿‡ï¼ŒRedisåœ¨åˆ†ç‰‡é—´è¿˜å®ç°äº†åœ¨æ–°å¢èŠ‚ç‚¹æ—¶è‡ªåŠ¨è¿ç§»æ•°æ®","like_count":2,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478505,"discussion_content":"ç®—æ³•ä¸Šä¸å¤ªä¸€æ ·å“¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577242894,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1010209,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/6a/21/fe356d0b.jpg","nickname":"è¾‰è¾‰","note":"","ucode":"BB83A45BB55B1B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":182848,"discussion_content":"å›ºå®šhashæ§½ï¼Œå’Œä¸€è‡´æ€§hashä¸ä¸€æ ·","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582460148,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1886331,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/c8/7b/153181d7.jpg","nickname":"å¤œè¾‰","note":"","ucode":"9421385F51FF9E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1010209,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/6a/21/fe356d0b.jpg","nickname":"è¾‰è¾‰","note":"","ucode":"BB83A45BB55B1B","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":364515,"discussion_content":"hash slot 16384æˆ‘ç†è§£ç­‰ä»·äºä¸€è‡´æ€§hashç®—æ³•å¼•å…¥çš„è™šæ‹ŸèŠ‚ç‚¹ä¸ªæ•°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617506715,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":182848,"ip_address":""},"score":364515,"extra":""}]}]},{"had_liked":false,"id":144562,"user_name":"è“é­”ä¸¶","can_delete":false,"product_type":"c1","uid":1219438,"ip_address":"","ucode":"2AE4359E263558","user_header":"https://static001.geekbang.org/account/avatar/00/12/9b/6e/edd2da0c.jpg","comment_is_top":false,"comment_ctime":1571969053,"is_pvip":false,"replies":[{"id":"55939","content":"1. ä¼šè€ƒè™‘åˆ†ç‰‡<br>2. æ˜¯çš„","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1572219712,"ip_address":"","comment_id":144562,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10161903645","product_id":100035801,"comment_content":"è€å¸ˆï¼Œmemcachedçš„ä¸»ä»æœºåˆ¶ä¼šè€ƒè™‘åˆ†ç‰‡å®ç°å¤šä¸ªä¸»å—ï¼Œè¿˜æ˜¯å•æœºå…¨é‡ï¼Ÿå¤šå‰¯æœ¬æ–¹æ¡ˆä¸­æåˆ°ä¼šé€‰ç”¨ä¸€ä¸ªä¸»ä»ä½œä¸ºä¸€ä¸ªå‰¯æœ¬ç»„ï¼Œæ˜¯ä¸€ä¸ªmasterå¤šä¸ªslaveçš„ç»“æ„å—ï¼Ÿä½†æ˜¯ç”»å›¾æ²¡æœ‰æ ‡ç¤ºè¿™ç§ç»“æ„","like_count":2,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":472008,"discussion_content":"1. ä¼šè€ƒè™‘åˆ†ç‰‡\n2. æ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572219712,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":159113,"user_name":"å¼ å¾·","can_delete":false,"product_type":"c1","uid":1101929,"ip_address":"","ucode":"31FE63E8725EFC","user_header":"https://static001.geekbang.org/account/avatar/00/10/d0/69/5dbdc245.jpg","comment_is_top":false,"comment_ctime":1575539615,"is_pvip":false,"replies":[{"id":"61441","content":"è¿™ä¸ªå’Œsentinalæ— å…³çš„ã€‚åªè¦åšäº†ä¸»ä»åˆ†ç¦»ï¼Œè¯»çš„éƒ½æ˜¯slaveèŠ‚ç‚¹ã€‚sentinalæ˜¯æ¥ç›‘æ§ä¸»åº“ï¼Œåœ¨ä¸»åº“å‡ºç°é—®é¢˜çš„æ—¶å€™å¯ä»¥å¸®åŠ©ä½ åšä»åº“æä¸»","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1576132184,"ip_address":"","comment_id":159113,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5870506911","product_id":100035801,"comment_content":"è€å¸ˆ  æœ€è¿‘å­¦ä¹   è¿™é‡Œè¿˜æœ‰ä¸€ä¸ªé—®é¢˜   åœ¨Redisçš„sentinalæ–¹æ¡ˆä¸­   è¯»ç¼“å­˜æ˜¯è¯»Slaveç»“ç‚¹å—ï¼Ÿï¼Ÿ   æ„Ÿè§‰åªæœ‰è¯»Slaveç»“ç‚¹   æ‰èƒ½å®ç°æ›´é«˜çš„è¯»è¯·æ±‚æ€§èƒ½   ä½†æ˜¯è¯»SlaveèŠ‚ç‚¹æ—¶   Masterä¸­çš„æ•°æ®è¿˜æ²¡æœ‰åŒæ­¥è¿‡æ¥   æ²¡æœ‰è¯»åˆ°ç»“æœ   æˆ–è€…è¯»åˆ°æ—§æ•°æ®è„æ•°æ®çš„è¯  è¿™ä¸ªåº”è¯¥æ€ä¹ˆè§£å†³  ï¼Ÿï¼Ÿï¼Ÿ    è¿˜æ˜¯è¯´  è¯»è¯·æ±‚ä¹Ÿåªèƒ½è¯»Masterç»“ç‚¹","like_count":2,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476954,"discussion_content":"è¿™ä¸ªå’Œsentinalæ— å…³çš„ã€‚åªè¦åšäº†ä¸»ä»åˆ†ç¦»ï¼Œè¯»çš„éƒ½æ˜¯slaveèŠ‚ç‚¹ã€‚sentinalæ˜¯æ¥ç›‘æ§ä¸»åº“ï¼Œåœ¨ä¸»åº“å‡ºç°é—®é¢˜çš„æ—¶å€™å¯ä»¥å¸®åŠ©ä½ åšä»åº“æä¸»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576132184,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":150179,"user_name":"Fourty Seven","can_delete":false,"product_type":"c1","uid":1323868,"ip_address":"","ucode":"DD213225842F68","user_header":"https://static001.geekbang.org/account/avatar/00/14/33/5c/8c0a372a.jpg","comment_is_top":false,"comment_ctime":1573474168,"is_pvip":false,"replies":[{"id":"57792","content":"æ˜¯çš„ï¼Œå› ä¸ºè™šæ‹Ÿäº†å¤šä¸ªèŠ‚ç‚¹ï¼Œè¿™äº›èŠ‚ç‚¹ä¼šåˆ†å¸ƒåœ¨åœ†ç¯çš„å¤šä¸ªä½ç½®","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1573481945,"ip_address":"","comment_id":150179,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5868441464","product_id":100035801,"comment_content":"å®ƒå°†ä¸€ä¸ªç¼“å­˜èŠ‚ç‚¹è®¡ç®—å¤šä¸ª Hash å€¼åˆ†æ•£åˆ°åœ†ç¯çš„ä¸åŒä½ç½®ï¼Œè¿™æ ·æ—¢å®ç°äº†æ•°æ®çš„å¹³å‡ï¼Œè€Œä¸”å½“æŸä¸€ä¸ªèŠ‚ç‚¹æ•…éšœæˆ–è€…é€€å‡ºçš„æ—¶å€™ï¼Œå®ƒåŸå…ˆæ‰¿æ‹…çš„ Key å°†ä»¥æ›´åŠ å¹³å‡çš„æ–¹å¼åˆ†é…åˆ°å…¶ä»–èŠ‚ç‚¹ä¸Šï¼Œä»è€Œé¿å…é›ªå´©çš„å‘ç”Ÿã€‚<br>è€å¸ˆï¼Œè¿™å¥è¯å•¥æ„æ€äº†ï¼Ÿæ˜¯è¯´æŠŠä¸€ä¸ªèŠ‚ç‚¹åˆ†å¸ƒåˆ°å¤šä¸ªä½ç½®ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":474085,"discussion_content":"æ˜¯çš„ï¼Œå› ä¸ºè™šæ‹Ÿäº†å¤šä¸ªèŠ‚ç‚¹ï¼Œè¿™äº›èŠ‚ç‚¹ä¼šåˆ†å¸ƒåœ¨åœ†ç¯çš„å¤šä¸ªä½ç½®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573481945,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":149014,"user_name":"å¼ å¾·","can_delete":false,"product_type":"c1","uid":1101929,"ip_address":"","ucode":"31FE63E8725EFC","user_header":"https://static001.geekbang.org/account/avatar/00/10/d0/69/5dbdc245.jpg","comment_is_top":false,"comment_ctime":1573127439,"is_pvip":false,"replies":[{"id":"57327","content":"åœ¨ä¸€è‡´æ€§hashä¸‹ï¼Œå¦‚æœåˆ é™¤ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæ¯”å¦‚åœ¨ä¸€ä¸ªç¯ä¸Šæœ‰aï¼Œbï¼Œcä¸‰ä¸ªèŠ‚ç‚¹ï¼Œbæ•…éšœï¼Œé‚£ä¹ˆåªæœ‰bçš„æ•°æ®ä¼šè¿ç§»åˆ°cä¸Šï¼›ä½†æ˜¯æ™®é€šhashä¼šé‡æ–°è®¡ç®—hashå€¼ï¼Œç†è®ºä¸Šä¼šå½±å“æ‰€æœ‰çš„æ•°æ®","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1573169825,"ip_address":"","comment_id":149014,"utype":1}],"discussion_count":4,"race_medal":0,"score":"5868094735","product_id":100035801,"comment_content":"è€å¸ˆè¯·æ•™ä¸€ä¸‹  å®¢æˆ·ç«¯ä¸€è‡´æ€§å“ˆå¸Œç®—æ³• å››åˆ°å…­ä¸ªç»“ç‚¹  å¦‚æœå››ä¸ªç»“ç‚¹çš„è¯  åˆ é™¤ä¸€ä¸ªç»“ç‚¹ ä¾ç„¶ä¼šæœ‰å››åˆ†ä¹‹ä¸€çš„è¯·æ±‚æ— æ³•å‘½ä¸­ç¼“å­˜  æ„Ÿè§‰è¿™ä¸ªä¸€ç›´æ€§å“ˆå¸Œç®—æ³•å’Œæ™®é€šçš„å“ˆå¸Œç®—æ³•  æ²¡æœ‰å¤ªå¤§åŒºåˆ«å‘€  è€å¸ˆèƒ½ä¸èƒ½å†ä»”ç»†ç®€ä»‹ä¸€ä¸‹è¿™ä¸ªåœ°æ–¹  çœ‹ä¸å‡ºä¸€è‡´æ€§å“ˆå¸Œç®—æ³•çš„ä¼˜åŠ¿","like_count":1,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":473707,"discussion_content":"åœ¨ä¸€è‡´æ€§hashä¸‹ï¼Œå¦‚æœåˆ é™¤ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæ¯”å¦‚åœ¨ä¸€ä¸ªç¯ä¸Šæœ‰aï¼Œbï¼Œcä¸‰ä¸ªèŠ‚ç‚¹ï¼Œbæ•…éšœï¼Œé‚£ä¹ˆåªæœ‰bçš„æ•°æ®ä¼šè¿ç§»åˆ°cä¸Šï¼›ä½†æ˜¯æ™®é€šhashä¼šé‡æ–°è®¡ç®—hashå€¼ï¼Œç†è®ºä¸Šä¼šå½±å“æ‰€æœ‰çš„æ•°æ®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573169825,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2273081,"avatar":"https://static001.geekbang.org/account/avatar/00/22/af/39/56809e21.jpg","nickname":"èˆŸè¡Œ","note":"","ucode":"A3B5131690EFDE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":360252,"discussion_content":"åœ¨ä¸€è‡´æ€§ç®—æ³•ä¸ŠåŠ ä¸ªè™šæ‹Ÿå±‚å½±å“å°±ä¼šå°å¾ˆå¤šï¼Œå°±ä¸ä¼šæ˜¯å››åˆ†ä¹‹ä¸€äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616399624,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1886331,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/c8/7b/153181d7.jpg","nickname":"å¤œè¾‰","note":"","ucode":"9421385F51FF9E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2273081,"avatar":"https://static001.geekbang.org/account/avatar/00/22/af/39/56809e21.jpg","nickname":"èˆŸè¡Œ","note":"","ucode":"A3B5131690EFDE","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":364517,"discussion_content":"åŠ äº†è™šæ‹Ÿå±‚ä¾ç„¶ä¼šæœ‰1/4çš„æ•°æ®å—å½±å“\nå› ä¸ºåŸæ•°æ®èŠ‚ç‚¹ä¸Šæœ‰å¤§çº¦1/4çš„æ•°æ®æ²¡æœ‰ï¼Œå†æ¬¡è®¿é—®è‚¯å®šä¼šè®¿é—®æ•°æ®åº“ï¼Œä½†åªè¦å¹¶å‘é‡ä¸å¤§ï¼Œç¼“å­˜å¯ä»¥é€æ­¥è¿ç§»\nè™šæ‹Ÿå±‚åªæ˜¯ä¸ºäº†æ•°æ®çš„åˆ†å¸ƒæ›´åŠ å‡è¡¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617507243,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":360252,"ip_address":""},"score":364517,"extra":""}]},{"author":{"id":1101929,"avatar":"https://static001.geekbang.org/account/avatar/00/10/d0/69/5dbdc245.jpg","nickname":"å¼ å¾·","note":"","ucode":"31FE63E8725EFC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":47108,"discussion_content":"æ˜ç™½äº†  è°¢è°¢è€å¸ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573272364,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":145383,"user_name":"èƒ–èƒ–è™","can_delete":false,"product_type":"c1","uid":1139121,"ip_address":"","ucode":"9CA8F99CC82944","user_header":"https://static001.geekbang.org/account/avatar/00/11/61/b1/1261c177.jpg","comment_is_top":false,"comment_ctime":1572262582,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"5867229878","product_id":100035801,"comment_content":"çœ‹åˆ°è€å¸ˆæœ€åçš„æ€»ç»“ï¼š<br>æ€»ä½“è€Œè¨€ï¼Œåˆ†å¸ƒå¼ç¼“å­˜çš„ä¸‰ç§æ–¹æ¡ˆå„æœ‰æ‰€é•¿ï¼Œæœ‰äº›å›¢é˜Ÿå¯èƒ½åœ¨å¼€å‘è¿‡ç¨‹ä¸­å·²ç»ç§¯ç´¯äº† Smart Client ä¸Šçš„ä¸€äº›ç»éªŒï¼›è€Œæœ‰äº›å›¢é˜Ÿåœ¨ Redis è¿ç»´ä¸Šç»éªŒä¸°å¯Œï¼Œå°±å¯ä»¥æ¨è¿› Sentinel æ–¹æ¡ˆï¼›æœ‰äº›å›¢é˜Ÿåœ¨å­˜å‚¨ç ”å‘æ–¹é¢æœ‰äº›ç§¯ç´¯ï¼Œå°±å¯ä»¥æ¨è¿›ä¸­é—´ä»£ç†å±‚æ–¹æ¡ˆï¼Œç”šè‡³å¯ä»¥è‡ªç ”é€‚åˆè‡ªå·±ä¸šåŠ¡åœºæ™¯çš„ä»£ç†å±‚ç»„ä»¶ï¼Œå…·ä½“çš„é€‰æ‹©è¿˜æ˜¯è¦çœ‹å›¢é˜Ÿçš„å®é™…æƒ…å†µè€Œå®šã€‚<br><br>å¦‚æœäº§å“æ˜¯ä»0å¼€å§‹ï¼Œå„æ–¹é¢æ²¡æœ‰å¤ªå¤šç§¯ç´¯ï¼Œåˆç†çš„é€‰æ‹©æ˜¯ä»€ä¹ˆï¼Ÿä¹‹å‰æˆ‘è‡ªå·±é€‰çš„æ˜¯Redis-Sentinelï¼Œå› ä¸ºè¿™æ˜¯å®˜æ–¹æ”¯æŒçš„é«˜å¯ç”¨æ¨¡å¼ï¼Œä½†æ˜¯çœ‹åˆ°è€å¸ˆè¯´å¯¹è¿ç»´è¦æ±‚æ¯”è¾ƒé«˜ï¼Œæƒ³äº†è§£ä¸€ä¸‹éœ€è¦é‡ç‚¹å…³æ³¨å“ªäº›æ–¹é¢ã€‚","like_count":1,"discussions":[{"author":{"id":1139121,"avatar":"https://static001.geekbang.org/account/avatar/00/11/61/b1/1261c177.jpg","nickname":"èƒ–èƒ–è™","note":"","ucode":"9CA8F99CC82944","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":40788,"discussion_content":"æˆ‘å†æè¿°ä¸€ä¸‹æˆ‘çš„åœºæ™¯å§ï¼Œæˆ‘çš„åº”ç”¨åœºæ™¯æ¯”è¾ƒç®€å•ï¼Œä¸»è¦æ˜¯ç”¨æ¥è®°å½•å®¢æˆ·ç«¯çš„ä»¤ç‰Œï¼Œå¤§çº¦10ä¸‡ä¸ªå®¢æˆ·ç«¯ï¼Œæ¯åˆ†é’Ÿä¼šåšä¸€æ¬¡åŒæ­¥ï¼ŒåŒæ­¥çš„æ—¶å€™ä¼šæ¯”å¯¹ä»¤ç‰Œçš„å€¼ï¼Œä»¤ç‰Œ10åˆ†é’Ÿæ›´æ–°ä¸€æ¬¡ã€‚å…¶å®é¢‘åº¦ä¸é«˜ã€‚è®¾è®¡ä¸­ä½¿ç”¨ä¸¤å°redisä»¥å“¨å…µæ¨¡å¼éƒ¨ç½²ã€‚ä¸»è¦è¿˜æ˜¯ä¸ºäº†æ¶ˆé™¤å•ç‚¹ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1572268968,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1886331,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/c8/7b/153181d7.jpg","nickname":"å¤œè¾‰","note":"","ucode":"9421385F51FF9E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1139121,"avatar":"https://static001.geekbang.org/account/avatar/00/11/61/b1/1261c177.jpg","nickname":"èƒ–èƒ–è™","note":"","ucode":"9CA8F99CC82944","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":364518,"discussion_content":"å“¨å…µè‡³å°‘éœ€è¦éƒ¨ç½²åœ¨3å°æœºå™¨ä¸Šï¼Œè·Ÿä¸¤å°rediséƒ½æ˜¯éƒ¨ç½²åœ¨ä¸åŒçš„æœºå™¨ä¸Šå˜›ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617507387,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":40788,"ip_address":""},"score":364518,"extra":""}]}]},{"had_liked":false,"id":142873,"user_name":"å°å–µå–µ","can_delete":false,"product_type":"c1","uid":1062444,"ip_address":"","ucode":"FDBBB2A59DB8B6","user_header":"https://static001.geekbang.org/account/avatar/00/10/36/2c/8bd4be3a.jpg","comment_is_top":false,"comment_ctime":1571571699,"is_pvip":false,"replies":[{"id":"55194","content":"1. ä»æ¦‚ç‡å­¦ä¸Šä¿è¯ï¼Œå¦‚æœä½ è™šæ‹Ÿå‡ºæ¥çš„èŠ‚ç‚¹è¶³å¤Ÿå¤šï¼Œä½ æ— æ³•ä¿è¯ç»å¯¹çš„å‡åŒ€<br>2. æ˜¯çš„ è™šæ‹ŸèŠ‚ç‚¹ä¹Ÿå®•æœºäº†<br>3. è²Œä¼¼æ˜¯æ²¡æœ‰çš„ï¼Œä¸è¿‡åœ¨ä¸€äº›memcachedå®¢æˆ·ç«¯ä»£ç ä¸­éƒ½ä¼šæœ‰å®ç°","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1571577795,"ip_address":"","comment_id":142873,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5866538995","product_id":100035801,"comment_content":"è€å¸ˆï¼Œå…³äºä¸€è‡´æ€§hashæœ‰å‡ ç‚¹ç–‘é—®ï¼Œè¯·è€å¸ˆè§£ç­”ï¼š<br>1.ä¸ºäº†é˜²æ­¢hashç¯çš„å€¾æ–œï¼Œç”±å®é™…èŠ‚ç‚¹è™šæ‹Ÿå‡ºæ¥çš„ä¸€éƒ¨åˆ†è™šæ‹ŸèŠ‚ç‚¹æ˜¯å¦‚ä½•ä¿è¯è™šæ‹ŸèŠ‚ç‚¹èƒ½å‡åŒ€æ’åˆ—å‘¢ï¼Ÿè¿˜æ˜¯è¯´å¢åŠ è™šæ‹ŸèŠ‚ç‚¹çš„ç®—æ³•å¯ä»¥è‡ªå®šä¹‰è™šæ‹ŸèŠ‚ç‚¹æ’å…¥çš„ä½ç½®å‘¢ï¼Ÿ<br>2.å‡è®¾ä¸€ä¸ªçœŸå®èŠ‚ç‚¹å®•æœºäº†ï¼Œé‚£æ˜¯ä¸æ˜¯é‚£ä¸ªçœŸå®èŠ‚ç‚¹ç›¸å¯¹åº”çš„è™šæ‹ŸèŠ‚ç‚¹ä¹Ÿâ€œå®•æœºâ€(ä¸å¯ç”¨)äº†ï¼Ÿ<br>3.ä¸€è‡´æ€§hashç®—æ³•åœ¨javaé‡Œæˆ–è€….neté‡Œé¢æœ‰ç°æˆçš„å®ç°å—ï¼Ÿè‹¥æœ‰æ˜¯å¯¹åº”é‚£ä¸ªç±»å‘¢ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":471304,"discussion_content":"1. ä»æ¦‚ç‡å­¦ä¸Šä¿è¯ï¼Œå¦‚æœä½ è™šæ‹Ÿå‡ºæ¥çš„èŠ‚ç‚¹è¶³å¤Ÿå¤šï¼Œä½ æ— æ³•ä¿è¯ç»å¯¹çš„å‡åŒ€\n2. æ˜¯çš„ è™šæ‹ŸèŠ‚ç‚¹ä¹Ÿå®•æœºäº†\n3. è²Œä¼¼æ˜¯æ²¡æœ‰çš„ï¼Œä¸è¿‡åœ¨ä¸€äº›memcachedå®¢æˆ·ç«¯ä»£ç ä¸­éƒ½ä¼šæœ‰å®ç°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571577795,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":142749,"user_name":"distdev","can_delete":false,"product_type":"c1","uid":1302798,"ip_address":"","ucode":"22AA05788627C6","user_header":"https://static001.geekbang.org/account/avatar/00/13/e1/0e/9ce05946.jpg","comment_is_top":false,"comment_ctime":1571490027,"is_pvip":false,"replies":[{"id":"55192","content":"sorry,æˆ‘ä¹‹å‰å›å¤æœ‰è¯¯ï¼Œåœ¨redis clusterä¸­æœ‰é«˜å¯ç”¨ç­–ç•¥æ¥ä¿è¯çš„","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1571577251,"ip_address":"","comment_id":142749,"utype":1}],"discussion_count":1,"race_medal":1,"score":"5866457323","product_id":100035801,"comment_content":"å¦å¤–æ‚¨è¯´redis clusterä¸æ˜¯é«˜å¯ç”¨æ–¹æ¡ˆ ä¸ºä»€ä¹ˆï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":471252,"discussion_content":"sorry,æˆ‘ä¹‹å‰å›å¤æœ‰è¯¯ï¼Œåœ¨redis clusterä¸­æœ‰é«˜å¯ç”¨ç­–ç•¥æ¥ä¿è¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571577251,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":142456,"user_name":"Chocolate","can_delete":false,"product_type":"c1","uid":1013822,"ip_address":"","ucode":"242CF0E3C10E97","user_header":"https://static001.geekbang.org/account/avatar/00/0f/78/3e/c39d86f1.jpg","comment_is_top":false,"comment_ctime":1571370917,"is_pvip":false,"replies":[{"id":"55093","content":"ç®—æ˜¯å§~","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1571453908,"ip_address":"","comment_id":142456,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5866338213","product_id":100035801,"comment_content":"è€å¸ˆï¼Œrepcached ç®—ä¸ç®— memcached çš„æœåŠ¡ç«¯é«˜å¯ç”¨æ–¹æ¡ˆ","like_count":1,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":471133,"discussion_content":"ç®—æ˜¯å§~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571453908,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":142349,"user_name":"é£ç¿”","can_delete":false,"product_type":"c1","uid":1068571,"ip_address":"","ucode":"65AF6AF292DAD6","user_header":"https://static001.geekbang.org/account/avatar/00/10/4e/1b/f4b786b9.jpg","comment_is_top":false,"comment_ctime":1571358483,"is_pvip":true,"replies":[{"id":"54884","content":"redis clusterä¸ç®—æ˜¯é«˜å¯ç”¨æ–¹æ¡ˆ","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1571358976,"ip_address":"","comment_id":142349,"utype":1}],"discussion_count":8,"race_medal":0,"score":"5866325779","product_id":100035801,"comment_content":"è€å¸ˆ ç°åœ¨æœ‰redis clusteräº† è¿™ä¸ªç®—å“ªç§å®ç°æ–¹æ¡ˆï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":471076,"discussion_content":"redis clusterä¸ç®—æ˜¯é«˜å¯ç”¨æ–¹æ¡ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571358976,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1099957,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c8/b5/b32ff06d.jpg","nickname":"åƒé‡Œä¸ç•™è¡Œ","note":"","ucode":"7F9C518E6E0DFD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":208880,"discussion_content":"æ²¡æ˜ç™½ redis clusterä¸ç®—æ˜¯é«˜å¯ç”¨ ã€‚  å®é™…éƒ¨ç½²æ¯ä¸ªä¸»èŠ‚ç‚¹éƒ½è¦æœ‰ä¸€æˆ–å¤šä¸ªä»èŠ‚ç‚¹ï¼Œä¸»æŒ‚æ‰ï¼Œè¿›è¡Œä¸»ä»åˆ‡æ¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584586872,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1332557,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erbY9UsqHZhhVoI69yXNibBBg0TRdUVsKLMg2UZ1R3NJxXdMicqceI5yhdKZ5Ad6CJYO0XpFHlJzIYQ/132","nickname":"é¥­å›¢","note":"","ucode":"E24F240CC91BE8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":36293,"discussion_content":"ä¸ºä»€ä¹ˆä¹ˆï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571359856,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":5,"child_discussions":[{"author":{"id":1338831,"avatar":"https://static001.geekbang.org/account/avatar/00/14/6d/cf/ec335526.jpg","nickname":"jc9090kkk","note":"","ucode":"6C992D07A2E78F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1332557,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erbY9UsqHZhhVoI69yXNibBBg0TRdUVsKLMg2UZ1R3NJxXdMicqceI5yhdKZ5Ad6CJYO0XpFHlJzIYQ/132","nickname":"é¥­å›¢","note":"","ucode":"E24F240CC91BE8","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":36336,"discussion_content":"redis clusterçš„è§£å†³æ–¹æ¡ˆçš„æ ¸å¿ƒéƒ¨ç½²åŸºç¡€åœ¨äºclusteræ–¹æ¡ˆçš„ä¸»èŠ‚ç‚¹å’Œå­èŠ‚ç‚¹æ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼Œå…¶ä¸­ä¸»èŠ‚ç‚¹æä¾›è¯»å†™æ“ä½œï¼Œä»èŠ‚ç‚¹ä½œä¸ºå¤‡ç”¨èŠ‚ç‚¹ï¼Œåªåšæ•°æ®å¼‚æ­¥å¤åˆ¶ï¼ˆä½†å¹¶ä¸èƒ½åšåˆ°å¼ºä¸€è‡´æ€§ï¼‰ï¼Œä¸æä¾›è¯·æ±‚ï¼Œåªä½œä¸ºæ•…éšœè½¬ç§»ä½¿ç”¨ï¼Œéƒ¨åˆ†èŠ‚ç‚¹ä¸å¯ç”¨æ—¶ï¼Œå¯¹äºé›†ç¾¤æ¥è®²æ˜¯éƒ¨åˆ†å¯ç”¨çš„ã€‚é€šè¿‡å¢åŠ  Slave åš standby æ•°æ®å‰¯æœ¬ï¼Œèƒ½å¤Ÿå®ç°æ•…éšœè‡ªåŠ¨ failoverï¼ŒèŠ‚ç‚¹ä¹‹é—´é€šè¿‡ gossip åè®®äº¤æ¢çŠ¶æ€ä¿¡æ¯ï¼Œç”¨æŠ•ç¥¨æœºåˆ¶å®Œæˆ Slave åˆ° Master çš„è§’è‰²æå‡ï¼Œè€Œå“¨å…µï¼ˆsentinelï¼‰æ¨¡å¼ï¼Œä¸»è¦æ˜¯é’ˆå¯¹ Redis æ•°æ®èŠ‚ç‚¹ä¸­çš„ä¸»èŠ‚ç‚¹çš„é«˜å¯ç”¨åˆ‡æ¢ï¼Œå¯¹ Redis çš„æ•°æ®èŠ‚ç‚¹åšå¤±è´¥åˆ¤å®šåˆ†ä¸ºä¸»è§‚ä¸‹çº¿å’Œå®¢è§‚ä¸‹çº¿ä¸¤ç§ï¼Œå¯¹äº Redis çš„ä»èŠ‚ç‚¹æœ‰å¯¹èŠ‚ç‚¹åšä¸»è§‚ä¸‹çº¿æ“ä½œï¼Œå¹¶ä¸æ‰§è¡Œæ•…éšœè½¬ç§»ï¼Œè¿™ä¸¤ç§æ–¹æ¡ˆä½œå¯¹æ¯”ï¼Œå“¨å…µæ¨¡å¼çš„ä¼˜ç‚¹æ›´å¤šä¸€ç‚¹ï¼Œæ¯”å¦‚éƒ¨ç½²ç›¸å¯¹ç®€å•ï¼Œä¸»ä»é«˜å¯ç”¨åˆ¤å®šæˆæœ¬ä¹Ÿç›¸å¯¹è¾ƒå°ï¼Œè€Œä¸”å“¨å…µæ¨¡å¼ä¹Ÿæ˜¯å®˜æ–¹æ¨èçš„è§£å†³æ–¹æ¡ˆï¼Œä»æ•´ä½“çš„ä¼˜ç¼ºç‚¹æ¥çœ‹ï¼Œå“¨å…µæ¨¡å¼çš„é«˜å¯ç”¨æ€§æ˜¯è¦æ¯”clusterè¦é«˜ä¸€äº›çš„ï¼Œä½†ä¸æ˜¯è¯´clusterå°±å®Œå…¨ä¸èƒ½åšåˆ°é«˜å¯ç”¨ï¼Œåªæ˜¯ä»˜å‡ºçš„æˆæœ¬æ›´é«˜ä¸€äº›ï¼Œå¸Œæœ›èƒ½å¸®åŠ©åˆ°ä½ ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1571364309,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":36293,"ip_address":""},"score":36336,"extra":""},{"author":{"id":1332557,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erbY9UsqHZhhVoI69yXNibBBg0TRdUVsKLMg2UZ1R3NJxXdMicqceI5yhdKZ5Ad6CJYO0XpFHlJzIYQ/132","nickname":"é¥­å›¢","note":"","ucode":"E24F240CC91BE8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1338831,"avatar":"https://static001.geekbang.org/account/avatar/00/14/6d/cf/ec335526.jpg","nickname":"jc9090kkk","note":"","ucode":"6C992D07A2E78F","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":36338,"discussion_content":"æ˜ç™½äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571364664,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":36336,"ip_address":""},"score":36338,"extra":""},{"author":{"id":1001861,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/49/85/3f161d95.jpg","nickname":"Alpha","note":"","ucode":"60CA15A25EC796","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1338831,"avatar":"https://static001.geekbang.org/account/avatar/00/14/6d/cf/ec335526.jpg","nickname":"jc9090kkk","note":"","ucode":"6C992D07A2E78F","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":36352,"discussion_content":"Clusteræ¨¡å¼èƒ½åšåˆ°æ•°æ®åˆ†ç‰‡æé«˜å¯æ‰©å±•æ€§ï¼Œè¿™æ˜¯å“¨å…µæ¨¡å¼ä¸èƒ½åšåˆ°çš„ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1571366781,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":36336,"ip_address":""},"score":36352,"extra":""}]}]},{"had_liked":false,"id":319438,"user_name":"äºšæ—","can_delete":false,"product_type":"c1","uid":1018972,"ip_address":"","ucode":"4A5A6D24314B79","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8c/5c/3f164f66.jpg","comment_is_top":false,"comment_ctime":1635815860,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1635815860","product_id":100035801,"comment_content":"å¿…é¡»æ˜¯ç”©è¿ç»´","like_count":0},{"had_liked":false,"id":318323,"user_name":"mghio","can_delete":false,"product_type":"c1","uid":1213078,"ip_address":"","ucode":"74883EDE4FD0DC","user_header":"https://static001.geekbang.org/account/avatar/00/12/82/96/aa795685.jpg","comment_is_top":false,"comment_ctime":1635240918,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1635240918","product_id":100035801,"comment_content":"ã€å¤‡ä»½ã€‘æ˜¯è§£å†³é«˜å¯ç”¨çš„æœ€å¥½çš„æ–¹å¼ï¼","like_count":0},{"had_liked":false,"id":314860,"user_name":"xueping","can_delete":false,"product_type":"c1","uid":2530432,"ip_address":"","ucode":"8A5DA6F1DB6FCD","user_header":"https://static001.geekbang.org/account/avatar/00/26/9c/80/b1137584.jpg","comment_is_top":false,"comment_ctime":1633508856,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1633508856","product_id":100035801,"comment_content":"é—®ä¸ªé—®é¢˜ï¼Œå®¢æˆ·ç«¯æ–¹æ¡ˆçš„ç¼“å­˜èŠ‚ç‚¹æ˜¯è¯´redisæˆ–memcacheçš„èŠ‚ç‚¹å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":276742,"user_name":"KèŒæ— æƒ¨","can_delete":false,"product_type":"c1","uid":2194764,"ip_address":"","ucode":"97A532D588FD49","user_header":"","comment_is_top":false,"comment_ctime":1612097618,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1612097618","product_id":100035801,"comment_content":"æ–‡ç« è¯´Memcachedä¸æ”¯æŒä¸»ä»æ¨¡å¼,ä½†æ˜¯é…å›¾é‡Œé¢ä»åº“æ•°æ®çš„å†™å…¥ç¡®æ˜¯ä»ä¸»åº“é‚£è¾¹åŒæ­¥è¿‡å»çš„?è¿™è¿˜ç®—æ˜¯å®¢æˆ·ç«¯æ–¹æ¡ˆå—","like_count":0},{"had_liked":false,"id":265857,"user_name":"ä¸å·¥","can_delete":false,"product_type":"c1","uid":1462843,"ip_address":"","ucode":"A8725E6D0E1765","user_header":"https://static001.geekbang.org/account/avatar/00/16/52/3b/f1501d79.jpg","comment_is_top":false,"comment_ctime":1607052910,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1607052910","product_id":100035801,"comment_content":"ä¸€è‡´æ€§hashä¸­çš„è™šæ‹ŸèŠ‚ç‚¹æ²¡æ€ä¹ˆçœ‹æ‡‚ï¼Œèƒ½å¤Ÿç”¨å›¾å±•ç¤ºå‡ºæ¥å—ï¼Ÿè¿˜æœ‰ä¸€è‡´æ€§hashæœ‰ä»€ä¹ˆå®ç°çš„ç»„ä»¶å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":253251,"user_name":"èª","can_delete":false,"product_type":"c1","uid":1009831,"ip_address":"","ucode":"9D672A8580A945","user_header":"https://static001.geekbang.org/account/avatar/00/0f/68/a7/c3fd1fd9.jpg","comment_is_top":false,"comment_ctime":1602662784,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1602662784","product_id":100035801,"comment_content":"å…¶å®éš¾ç‚¹åœ¨äºéœ€è¦æŠŠé«˜é€Ÿç¼“å­˜å½“åšæ•°æ®åº“ç”¨ï¼Œæ„æ€å°±æ˜¯ï¼Œè¦åˆ©ç”¨ç¼“å­˜çš„å¿«ï¼Œè¿˜è¦å¼ºä¸€è‡´æ€§ï¼Œå¯æƒœç‰ºç‰²ä¸€å®šçš„HAé«˜å¯ç”¨ã€‚<br><br>ä¸€èˆ¬æ–‡ç« é‡Œé¢çš„æè¿°éƒ½æ˜¯å½“ç¼“å­˜ç”¨ï¼Œå¤±æ•ˆäº†å¯ä»¥å»åé¢æ•°æ®åº“æ‹¿ã€‚æˆ‘ç»„é‡Œä¸€ä¸ªcaseæ˜¯å­˜dupï¼Œå¤§é‡çš„dupå­˜åœ¨redisä¸Šé¢ã€‚è¦æ±‚è¯»å†™å¼ºä¸€è‡´æ€§ï¼Œè¿˜è¦latencyä½ã€‚ç°åœ¨çš„æ–¹æ¡ˆåŸºæœ¬ä¸Šæ˜¯shard dataï¼Œç„¶åæ¯ä¸ªæ•°æ®ä¸­å¿ƒå¼„5ä¸ªclusterï¼Œæ¯ä¸ªclusteræ”¾3ä¸ªredis serverï¼Œè¿™3ä¸ªserverå­˜ä¸€æ ·çš„keysã€‚è¿™æ ·clientè¯»ä¸‰ä¸ªserverï¼Œåªæœ‰æ•°æ®ä¸€è‡´æ—¶å€™ï¼ˆ0ï¼Œ1ï¼Œæ— ï¼‰å°±åˆ¤å®šå½“å‰æ˜¯å¦æ˜¯duplicateã€‚<br><br>æˆ‘ä»¬æ˜¯æƒ³æ”¹æˆç”¨consistent hashing ç„¶ååˆ©ç”¨clientçš„å†…å­˜ï¼Œå»ç›´æ¥å­˜è¿™äº›keysï¼Œè¿™æ ·å°±ä¸ç”¨ç»´æŠ¤å¾ˆå¤šçš„redis clustersã€‚ä½†æ˜¯ä¸æ˜¯å¾ˆæˆåŠŸï¼Œè¦é‡å†™åŸºæœ¬ä¸Šè¦è€ƒè™‘å¤ªå¤šäº‹æƒ…ã€‚<br><br>","like_count":0,"discussions":[{"author":{"id":1886331,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/c8/7b/153181d7.jpg","nickname":"å¤œè¾‰","note":"","ucode":"9421385F51FF9E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":364524,"discussion_content":"æ¯ä¸ªclusteræœºå™¨æ•…éšœï¼Œä¹Ÿä¼šæ•…éšœï¼Œå¯ç”¨æ€§è®¾ç½®å­˜åœ¨é—®é¢˜å§\nä¸ºä»€ä¹ˆä¸æŠŠclusterå­˜çš„keysäº¤æ›¿åœ¨ä¸åŒæœºå™¨ä¸Šå‘¢ï¼Ÿ\n\næ¯ä¸ªclusteræ”¾3ä¸ªredis serverï¼Œæ¯ä¸ªå†…å­˜è¶³å¤Ÿå˜›ï¼Ÿ\nè¦æ˜¯ä¸ºäº†é«˜æ•ˆåˆ©ç”¨CPUï¼Œæ˜¯ä¸æ˜¯åº”è¯¥éƒ¨ç½²3ä¸ªredis serverï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617507972,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":243562,"user_name":"Gavin","can_delete":false,"product_type":"c1","uid":1616970,"ip_address":"","ucode":"A5735665E303FD","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/2UXuSevhia94o9Eky4OfMuSictaldxcqpjGuvRCOcvjIIoVBAENLEZbv2lgwmwC8icK1ZrUcneNtiaeFBV8MT3uzNg/132","comment_is_top":false,"comment_ctime":1598187342,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1598187342","product_id":100035801,"comment_content":"å“¨å…µæœºåˆ¶ä¸»ä»åˆ‡æ¢ï¼Œå®ç°äº†é«˜å¯ç”¨ï¼Œå®¢æˆ·ç«¯å’Œä¸­é—´ä»£ç†æ–¹æ¡ˆåˆ†ç‰‡ï¼Œè§£å†³äº†å•å‡»èµ„æºé™åˆ¶çš„é—®é¢˜","like_count":0},{"had_liked":false,"id":232755,"user_name":"ç¾ç¾","can_delete":false,"product_type":"c1","uid":1148422,"ip_address":"","ucode":"44CC95C45AF345","user_header":"https://static001.geekbang.org/account/avatar/00/11/86/06/72b01bb7.jpg","comment_is_top":false,"comment_ctime":1594109937,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1594109937","product_id":100035801,"comment_content":"è€å¸ˆï¼Œæƒ³é—®ä¸‹ Memcached ä¸»ä»æœºåˆ¶ï¼Œä¸ºæ¯ä¸€ç»„ master é…ç½®ä¸€ç»„ slaveï¼Œè¯·é—®è¿™é‡Œçš„ä¸€ç»„ master æ˜¯æŒ‡ä¸€ä¸ª master è¿˜æ˜¯å¤šä¸ª master?","like_count":0},{"had_liked":false,"id":227892,"user_name":"ç‹ä¿Š","can_delete":false,"product_type":"c1","uid":1070496,"ip_address":"","ucode":"C513020E635FF4","user_header":"https://static001.geekbang.org/account/avatar/00/10/55/a0/d66b6c74.jpg","comment_is_top":false,"comment_ctime":1592522957,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1592522957","product_id":100035801,"comment_content":"sentinel æ˜¯æ— çŠ¶æ€çš„ï¼Œå®ƒä¿å­˜äº† master çš„æ•°æ®ï¼Œæ„Ÿè§‰ä¿å­˜äº†çŠ¶æ€ä¿¡æ¯å•Šï¼Œsentinelæ˜¯æœ‰çŠ¶æ€çš„å§ï¼Ÿ","like_count":0},{"had_liked":false,"id":224523,"user_name":"Sam_Deep_Thinking","can_delete":false,"product_type":"c1","uid":1001152,"ip_address":"","ucode":"8E4EF6F24B821B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/46/c0/bf880bda.jpg","comment_is_top":false,"comment_ctime":1591430522,"is_pvip":true,"replies":[{"id":"82712","content":"ç¯‡å¹…é™åˆ¶ï¼Œåªè®²è§£äº†åˆ†å¸ƒå¼ç¼“å­˜","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1591538267,"ip_address":"","comment_id":224523,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1591430522","product_id":100035801,"comment_content":"æ€ä¹ˆæ²¡è®²åˆ°æœ¬åœ°ç¼“å­˜å’Œå †å¤–ç¼“å­˜ï¼Œè¿™ç§ä¹Ÿæ˜¯åº”ä»˜ç¬æ—¶å¤§æµé‡çš„ç¼“å­˜æ–¹æ¡ˆã€‚","like_count":0,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497510,"discussion_content":"ç¯‡å¹…é™åˆ¶ï¼Œåªè®²è§£äº†åˆ†å¸ƒå¼ç¼“å­˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591538267,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":213068,"user_name":"Omer","can_delete":false,"product_type":"c1","uid":1676246,"ip_address":"","ucode":"8EE3E531313265","user_header":"https://static001.geekbang.org/account/avatar/00/19/93/d6/040e4965.jpg","comment_is_top":false,"comment_ctime":1588295660,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1588295660","product_id":100035801,"comment_content":"è€å¸ˆï¼Œè¯·æ•™ä¸ªé—®é¢˜ã€‚<br>æˆ‘çœ‹åˆ°ä½ æ–‡ä¸­è¯´çš„ï¼Œä¸€è‡´æ€§hashçš„è„æ•°æ®é—®é¢˜ã€‚æˆ‘æƒ³é—®çš„æ˜¯ï¼Œå¦‚æœæ˜¯æ™®é€šçš„hashç®—æ³•å‡ºç°ä¸€æ ·çš„èŠ‚ç‚¹æŒ‚æ‰çš„æƒ…å†µï¼Œä¼šå¦‚ä½•å¤„ç†å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":197426,"user_name":"Linå¤§å‘haha~","can_delete":false,"product_type":"c1","uid":1307653,"ip_address":"","ucode":"1C0AC3009FA6CB","user_header":"https://static001.geekbang.org/account/avatar/00/13/f4/05/cbcaaef1.jpg","comment_is_top":false,"comment_ctime":1585377205,"is_pvip":false,"replies":[{"id":"74906","content":"æœ‰ä¸€äº›ä»æ•°æ®åº“åŒæ­¥æ•°æ®åˆ°ç¼“å­˜çš„ç»„ä»¶","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1585541640,"ip_address":"","comment_id":197426,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1585377205","product_id":100035801,"comment_content":"ç¼“å­˜å’Œæ•°æ®åº“çš„åŒæ­¥æœºåˆ¶ï¼Œæœ‰æ²¡æœ‰å¼€æºçš„æ¡†æ¶å®ç°å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":489518,"discussion_content":"æœ‰ä¸€äº›ä»æ•°æ®åº“åŒæ­¥æ•°æ®åˆ°ç¼“å­˜çš„ç»„ä»¶","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585541640,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":181413,"user_name":"å°æ´›","can_delete":false,"product_type":"c1","uid":1005062,"ip_address":"","ucode":"227EC21891012B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/56/06/ea49b29d.jpg","comment_is_top":false,"comment_ctime":1582536738,"is_pvip":false,"replies":[{"id":"71108","content":"è°¢è°¢é¼“åŠ±~","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1583115431,"ip_address":"","comment_id":181413,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1582536738","product_id":100035801,"comment_content":"å¤šå‰¯æœ¬å°±æ˜¯ç¼“å­˜çš„ç¼“å­˜ã€‚è§£å†³å•ç»„m&#47;sçš„å•æœºç“¶é¢ˆï¼Œå…¶å®éƒ½æ˜¯ä¸ºäº†æŠµæŠ—å¤§æµé‡ï¼Œå¾ˆå¤šé—®é¢˜çš„è§£å†³æ€è·¯éƒ½æ˜¯ç›¸é€šçš„ï¼Œè°¢è°¢è€å¸ˆåˆ†äº«","like_count":0,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484994,"discussion_content":"è°¢è°¢é¼“åŠ±~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583115431,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":167245,"user_name":"ä»€ä¹ˆä¹Ÿä¸è¯´","can_delete":false,"product_type":"c1","uid":1053685,"ip_address":"","ucode":"1FAB54FA4CAB7D","user_header":"https://static001.geekbang.org/account/avatar/00/10/13/f5/21fd4868.jpg","comment_is_top":false,"comment_ctime":1577751209,"is_pvip":false,"replies":[{"id":"65162","content":"å¤šå‰¯æœ¬ä½ å¯ä»¥è®¤ä¸ºæ˜¯ç¼“å­˜çš„ç¼“å­˜ï¼Œä¹Ÿå°±æ˜¯åœ¨ç¼“å­˜ä¹‹ä¸Šå†åŠ ä¸€ç»„ç¼“å­˜ï¼Œå¯ä»¥è§£å†³å•ç»„ç¼“å­˜çš„å¸¦å®½ç“¶é¢ˆ<br><br>è€Œåœ¨å®è·µè¿‡ç¨‹ä¸­ï¼Œå› ä¸ºå¤§éƒ¨åˆ†æµé‡éƒ½ä¼šè¢«å‰¯æœ¬æ‰¿æ‹…ï¼Œmasterå’Œslaveçš„æ•°æ®æœ‰å¯èƒ½ä¼šå˜å¾—ä¸çƒ­ï¼Œæ‰€ä»¥å¯ä»¥æŠŠmasterå’Œslaveå½“åšå‰¯æœ¬","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1577955293,"ip_address":"","comment_id":167245,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1577751209","product_id":100035801,"comment_content":"è€å¸ˆï¼Œå¤šå‰¯æœ¬èƒ½ä¸¾ä¸ªä¾‹å­å—ï¼Ÿè¿™å—æ²¡çœ‹æ˜ç™½<br>å…ˆæ˜¯è¯´ä¸€ç»„slaveä¼šæœ‰é—®é¢˜<br>åœ¨è¿™ä¸ªæ–¹æ¡ˆä¸­ï¼Œå½“å®¢æˆ·ç«¯å‘èµ·æŸ¥è¯¢è¯·æ±‚æ—¶ï¼Œè¯·æ±‚é¦–å…ˆä¼šå…ˆä»å¤šä¸ªå‰¯æœ¬ç»„ä¸­é€‰å–ä¸€ä¸ªå‰¯æœ¬ç»„å‘èµ·æŸ¥è¯¢ï¼Œå¦‚æœæŸ¥è¯¢å¤±è´¥ï¼Œå°±ç»§ç»­æŸ¥è¯¢ Master&#47;Slaveï¼Œå¹¶ä¸”å°†æŸ¥è¯¢çš„ç»“æœå›ç§åˆ°æ‰€æœ‰å‰¯æœ¬ç»„ä¸­ï¼Œé¿å…å‰¯æœ¬ç»„ä¸­è„æ•°æ®çš„å­˜åœ¨ã€‚<br><br>æœ€åè¯´åœ¨å®è·µä¸­æˆ‘ä»¬ä¼šæŠŠ Master å’Œ Slave ä½œä¸ºä¸€ç»„å‰¯æœ¬ç»„ä½¿ç”¨ã€‚","like_count":0,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479793,"discussion_content":"å¤šå‰¯æœ¬ä½ å¯ä»¥è®¤ä¸ºæ˜¯ç¼“å­˜çš„ç¼“å­˜ï¼Œä¹Ÿå°±æ˜¯åœ¨ç¼“å­˜ä¹‹ä¸Šå†åŠ ä¸€ç»„ç¼“å­˜ï¼Œå¯ä»¥è§£å†³å•ç»„ç¼“å­˜çš„å¸¦å®½ç“¶é¢ˆ\n\nè€Œåœ¨å®è·µè¿‡ç¨‹ä¸­ï¼Œå› ä¸ºå¤§éƒ¨åˆ†æµé‡éƒ½ä¼šè¢«å‰¯æœ¬æ‰¿æ‹…ï¼Œmasterå’Œslaveçš„æ•°æ®æœ‰å¯èƒ½ä¼šå˜å¾—ä¸çƒ­ï¼Œæ‰€ä»¥å¯ä»¥æŠŠmasterå’Œslaveå½“åšå‰¯æœ¬","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577955293,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1242061,"avatar":"https://static001.geekbang.org/account/avatar/00/12/f3/cd/7eaf13fb.jpg","nickname":"æ˜Ÿæ˜Ÿ","note":"","ucode":"2A9C7943C9AEF3","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":588041,"discussion_content":"å¤šçº§ç¼“å­˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663490435,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":164749,"user_name":"é’é’å­è¡¿","can_delete":false,"product_type":"c1","uid":1438102,"ip_address":"","ucode":"4A388A3BA70C29","user_header":"https://static001.geekbang.org/account/avatar/00/15/f1/96/9571fa3d.jpg","comment_is_top":false,"comment_ctime":1577085765,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1577085765","product_id":100035801,"comment_content":"redis clusterèƒ½ä¸èƒ½è¯¦ç»†çš„è¯´è¯´å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":156569,"user_name":"overland","can_delete":false,"product_type":"c1","uid":1208835,"ip_address":"","ucode":"609A463519E5F0","user_header":"https://static001.geekbang.org/account/avatar/00/12/72/03/da1fcc81.jpg","comment_is_top":false,"comment_ctime":1574915013,"is_pvip":false,"replies":[{"id":"60229","content":"æ¯ä¸ªå‰¯æœ¬é‡Œé¢éƒ½æœ‰çƒ­æ•°æ®","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1575014896,"ip_address":"","comment_id":156569,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1574915013","product_id":100035801,"comment_content":"è€å¸ˆï¼Œé‚£ä¸ªå¤šå‰¯æœ¬é‚£å—ï¼Œæ˜¯æ¯ä¸ªå‰¯æœ¬é‡Œé¢å­˜ç€ä¸‰ä¸ªç¼“å­˜çš„çš„çƒ­ç‚¹æ•°æ®è¿˜æ˜¯ï¼Œå¯¹åº”çš„ç¼“å­˜æœ‰ä¸ªå‰¯æœ¬","like_count":0,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476155,"discussion_content":"æ¯ä¸ªå‰¯æœ¬é‡Œé¢éƒ½æœ‰çƒ­æ•°æ®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575014896,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":154544,"user_name":"fomy","can_delete":false,"product_type":"c1","uid":1125834,"ip_address":"","ucode":"CD87EA03B1F327","user_header":"https://static001.geekbang.org/account/avatar/00/11/2d/ca/02b0e397.jpg","comment_is_top":false,"comment_ctime":1574477920,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1574477920","product_id":100035801,"comment_content":"è€å¸ˆï¼ŒRedisæ²¡æœ‰éƒ¨ç½²å“¨å…µä¹‹å‰ï¼Œä½¿ç”¨é›†ç¾¤éƒ¨ç½²ã€‚å½“å•å°æœåŠ¡å™¨å‡ºç°æ•…éšœæ—¶ï¼Œé€ æˆéƒ¨åˆ†ç‰‡åŒºä¸å¯ç”¨ï¼ŒRedisæ˜¯æ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜çš„ï¼Ÿè¿˜æ˜¯æ ¹æœ¬å°±æ²¡è§£å†³å‘¢ï¼Ÿ<br><br>æŒ‰è€å¸ˆçš„æ€è·¯æˆ‘è§‰å¾—ä¼šæœ‰å‡ ç§æ–¹æ¡ˆï¼š<br>ç¬¬ä¸€ç§æ–¹æ¡ˆï¼šRedisè®¾ç½®è¯¥ç‰‡åŒºä¸å¯ç”¨ï¼Œç„¶åé¡ºå»¶åˆ°ä¸‹ä¸€ä¸ªç‰‡åŒºã€‚<br>ç¬¬äºŒç§æ–¹æ¡ˆï¼šè¿ç»´æ‰‹å·¥è§£å†³ï¼ŒæŠŠè¿™ä¸ªç‰‡åŒºåˆ’åˆ†åˆ°å…¶ä»–ç‰‡åŒºï¼Œä¹Ÿå°±æ˜¯é‡æ–°åˆ†ç‰‡ã€‚","like_count":0},{"had_liked":false,"id":151085,"user_name":"å¤©é’","can_delete":false,"product_type":"c1","uid":1603286,"ip_address":"","ucode":"F592CC19954081","user_header":"https://static001.geekbang.org/account/avatar/00/18/76/d6/a9f381bf.jpg","comment_is_top":false,"comment_ctime":1573651732,"is_pvip":false,"replies":[{"id":"58449","content":"å¤šå‰¯æœ¬åº”è¯¥å¯ä»¥ä¸€å®šç¨‹åº¦ä¸Šç¼“è§£çƒ­ç‚¹æ•°æ®çš„é—®é¢˜ï¼Œå› ä¸ºå®ƒçš„ä¸€ä¸ªä¸»è¦ä½œç”¨å°±æ˜¯æŠ—æµé‡<br><br>æœ¬åœ°ç¼“å­˜ç¡®å®å¯ä»¥è§£å†³çƒ­ç‚¹çš„é—®é¢˜","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1573867161,"ip_address":"","comment_id":151085,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1573651732","product_id":100035801,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œæ–‡ä¸­çš„å¤šå‰¯æœ¬å¯ä»¥è§£å†³ç¼“å­˜çš„çƒ­ç‚¹æ•°æ®çš„é—®é¢˜å—ï¼Ÿæˆ‘çš„ç†è§£æ˜¯åœ¨åº”ç”¨æœåŠ¡å’Œç¼“å­˜æœåŠ¡ä¹‹é—´åŠ æœ¬åœ°ç¼“å­˜å±‚å­˜å‚¨çƒ­ç‚¹æ•°æ®ï¼Œèµ·è¿™æ ·å—ï¼Ÿè¿˜æœ‰æ²¡æœ‰å…¶ä»–è§£å†³ç¼“å­˜çš„çƒ­ç‚¹æ•°æ®çš„æ–¹å¼ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":474360,"discussion_content":"å¤šå‰¯æœ¬åº”è¯¥å¯ä»¥ä¸€å®šç¨‹åº¦ä¸Šç¼“è§£çƒ­ç‚¹æ•°æ®çš„é—®é¢˜ï¼Œå› ä¸ºå®ƒçš„ä¸€ä¸ªä¸»è¦ä½œç”¨å°±æ˜¯æŠ—æµé‡\n\næœ¬åœ°ç¼“å­˜ç¡®å®å¯ä»¥è§£å†³çƒ­ç‚¹çš„é—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573867161,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":150439,"user_name":"fdconan","can_delete":false,"product_type":"c1","uid":1244596,"ip_address":"","ucode":"01C71C6E9FD1E4","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLv9HJIW4OACkjlwOQJ9cU7HzvaDFYkACWCib2lzOMef9ZiaGDTVFqjPicpVK5KDRbBRVGGHrMHQO1Rw/132","comment_is_top":false,"comment_ctime":1573534214,"is_pvip":false,"replies":[{"id":"57975","content":"æœåŠ¡ç«¯æ–¹æ¡ˆæ˜¯ç»„ä»¶è‡ªå¸¦çš„ï¼Œä»£ç†å±‚æ˜¯åœ¨ç»„ä»¶ä¹‹ä¸Šçš„","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1573610945,"ip_address":"","comment_id":150439,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1573534214","product_id":100035801,"comment_content":"è¯·æ•™ä¸‹ï¼Œä¸­é—´å±‚ä»£ç†æ–¹æ¡ˆå’ŒæœåŠ¡ç«¯æ–¹æ¡ˆæœ‰ä»€ä¹ˆä¸åŒå—ï¼Ÿæ–‡ä¸­æ²¡æœ‰è¯¦ç»†è¯´æ˜å“¦ã€‚","like_count":0,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":474159,"discussion_content":"æœåŠ¡ç«¯æ–¹æ¡ˆæ˜¯ç»„ä»¶è‡ªå¸¦çš„ï¼Œä»£ç†å±‚æ˜¯åœ¨ç»„ä»¶ä¹‹ä¸Šçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573610945,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":144927,"user_name":"é•¿æœŸè§„åˆ’","can_delete":false,"product_type":"c1","uid":1019332,"ip_address":"","ucode":"5EF65E9115834B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8d/c4/6f97daea.jpg","comment_is_top":false,"comment_ctime":1572097246,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1572097246","product_id":100035801,"comment_content":"è€å¸ˆï¼Œæˆ‘è®¤ä¸ºä»å¦ä¸€ä¸ªè§’åº¦æ¥è®²ï¼Œæœ¬ç¯‡åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼šç¼“å­˜åˆ†ç‰‡ï¼Œä¸»ä»æœºåˆ¶ã€‚ç¼“å­˜åˆ†ç‰‡å¯ä»¥å®¢æˆ·ç«¯åˆ†ï¼Œä¸­é—´ä»¶åˆ†ï¼ŒæœåŠ¡ç«¯åˆ†ï¼Œå®ç°çš„åŸç†æˆ‘ç†è§£å·®ä¸å¤šï¼Œåªæ˜¯åŠŸèƒ½åœ¨çš„ä½ç½®ä¸åŒã€‚ä¸»ä»æœºåˆ¶ï¼Œåªèƒ½åœ¨æœåŠ¡ç«¯å®ç°ã€‚","like_count":0},{"had_liked":false,"id":144552,"user_name":"æ‰¬ä¸€åœºè¿œè¿œçš„é£","can_delete":false,"product_type":"c1","uid":1357801,"ip_address":"","ucode":"AB47E3D2EAB8A8","user_header":"https://static001.geekbang.org/account/avatar/00/14/b7/e9/5400cdf3.jpg","comment_is_top":false,"comment_ctime":1571968018,"is_pvip":false,"replies":[{"id":"55719","content":"å¤§æ¦‚4æ ¸8Gï¼Œæœºæ¢°ç¡¬ç›˜<br>å¦‚æœæœºå™¨é…ç½®æ›´å¥½ï¼Œè‚¯å®šèƒ½æ’‘çš„è¯»è¯·æ±‚æ›´é«˜","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1571974045,"ip_address":"","comment_id":144552,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1571968018","product_id":100035801,"comment_content":"æ‚¨å¥½ï¼Œæ–‡ç« ä¸­æœ‰è¯´MySqlçš„å³°å€¼è¯»è¯·æ±‚æ˜¯1500ï¼Œè¯·é—®ä¸€ä¸‹è¿™æ˜¯åœ¨ä»€ä¹ˆæ ·çš„æœºå™¨é…ç½®ä¸‹ï¼Ÿå¦‚æœç¡¬ç›˜æ˜¯Ssdï¼ŒCPUä¹Ÿæ˜¯å¤šæ ¸ï¼Œä¸”Mysqlçš„bufferèƒ½è®¾ç½®å¥½å‡ ä¸ªï¼§ï¼Œä¸‡å…†ç½‘å¡çš„æœºå™¨é…ç½®ä¸‹æ˜¯å¦è¿˜æ˜¯ä¸èƒ½è¶…è¿‡1500ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":472005,"discussion_content":"å¤§æ¦‚4æ ¸8Gï¼Œæœºæ¢°ç¡¬ç›˜\nå¦‚æœæœºå™¨é…ç½®æ›´å¥½ï¼Œè‚¯å®šèƒ½æ’‘çš„è¯»è¯·æ±‚æ›´é«˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571974045,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1019332,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8d/c4/6f97daea.jpg","nickname":"é•¿æœŸè§„åˆ’","note":"","ucode":"5EF65E9115834B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":86940,"discussion_content":"4æ ¸8Gçš„QPSæ‰1500ï¼Œæ„Ÿè§‰å¥½ä½å•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576633415,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":144279,"user_name":"åˆºçŒ¬","can_delete":false,"product_type":"c1","uid":1108297,"ip_address":"","ucode":"60C3E38F4F03CC","user_header":"https://static001.geekbang.org/account/avatar/00/10/e9/49/29072f9e.jpg","comment_is_top":false,"comment_ctime":1571887223,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1571887223","product_id":100035801,"comment_content":"è€å®è¯´ç¼“å­˜çš„é«˜å¯ç”¨çš„ä¸‰ç§æ–¹æ¡ˆåŒºåˆ†æœ‰ç‚¹æ¨¡ç³Šï¼Œç”¨ä¸€èˆ¬æ€ç»´å»è¯»è¿™ä¸ªï¼Œæœ‰ç‚¹æ‡µï¼Œå°¤å…¶æ˜¯å®¢æˆ·ç«¯æ–¹æ¡ˆã€‚","like_count":0},{"had_liked":false,"id":143517,"user_name":"å¼€å¿ƒå°æ¯›","can_delete":false,"product_type":"c1","uid":1023762,"ip_address":"","ucode":"9D57A2773759F3","user_header":"","comment_is_top":false,"comment_ctime":1571723176,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1571723176","product_id":100035801,"comment_content":"è¯·é—®è€å¸ˆï¼Œåœ¨Memcacheå®ç°ä¸»ä»æœºåˆ¶çš„ä¾‹å­ä¸­ï¼Œä»æœºè¾ƒä¸»æœºæœ‰ä»€ä¹ˆä¸åŒä¹ˆ(è¿‡æœŸæ—¶é—´çŸ­ï¼Ÿä½“ç§¯å°ï¼Ÿé€Ÿåº¦å¿«ï¼Ÿï¼‰å¦åˆ™åˆå¦‚ä½•ä¿è¯åœ¨ä»æœºæœªå‘½ä¸­çš„å‰æä¸‹ä¸»æœºå‘½ä¸­æ¦‚ç‡èƒ½æ›´å¤§ï¼Ÿ","like_count":0},{"had_liked":false,"id":143314,"user_name":"Keith","can_delete":false,"product_type":"c1","uid":1193337,"ip_address":"","ucode":"B40774090714D1","user_header":"https://static001.geekbang.org/account/avatar/00/12/35/79/21647da2.jpg","comment_is_top":false,"comment_ctime":1571666894,"is_pvip":false,"replies":[{"id":"55353","content":"1.æ˜¯çš„ï¼Œå¯¹äºç¼“å­˜æ¥è¯´ï¼Œåº”ç”¨å°±æ˜¯å®ƒçš„å®¢æˆ·ç«¯<br>2.å•ç‹¬éƒ¨ç½²","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1571701060,"ip_address":"","comment_id":143314,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1571666894","product_id":100035801,"comment_content":"ä½ å¥½, å…³äºå®¢æˆ·ç«¯æ¨¡å¼:<br>1. å®¢æˆ·ç«¯æ¨¡å¼æ˜¯æŒ‡ç”¨æˆ·ä»£ç çš„æœåŠ¡ç«¯(ä»¥æˆ‘ä»¬çš„ç”µå•†ç³»ç»Ÿä¸ºä¾‹)å—?<br>2. å®¢æˆ·ç«¯æ¨¡å¼çš„ç¼“å­˜å­˜æ”¾åœ¨ä½•å¤„?","like_count":0,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":471483,"discussion_content":"1.æ˜¯çš„ï¼Œå¯¹äºç¼“å­˜æ¥è¯´ï¼Œåº”ç”¨å°±æ˜¯å®ƒçš„å®¢æˆ·ç«¯\n2.å•ç‹¬éƒ¨ç½²","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571701060,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":143249,"user_name":"é™ˆé–","can_delete":false,"product_type":"c1","uid":1147418,"ip_address":"","ucode":"8C9596A54DB5C8","user_header":"https://static001.geekbang.org/account/avatar/00/11/82/1a/64ec25ff.jpg","comment_is_top":false,"comment_ctime":1571655353,"is_pvip":false,"replies":[{"id":"55359","content":"å®¢æˆ·ç«¯ä»£è¡¨æ˜¯ç¼“å­˜çš„å®¢æˆ·ç«¯ï¼Œä¹Ÿå°±æ˜¯ç¼“å­˜çš„è°ƒç”¨æ–¹ï¼Œå°±æ˜¯ä½ çš„åº”ç”¨<br>æœåŠ¡ç«¯ä»£è¡¨ç¼“å­˜çš„æœåŠ¡ç«¯","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1571701388,"ip_address":"","comment_id":143249,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1571655353","product_id":100035801,"comment_content":"æ²¡ææ‡‚å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä»£è¡¨å•¥","like_count":0,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":471447,"discussion_content":"å®¢æˆ·ç«¯ä»£è¡¨æ˜¯ç¼“å­˜çš„å®¢æˆ·ç«¯ï¼Œä¹Ÿå°±æ˜¯ç¼“å­˜çš„è°ƒç”¨æ–¹ï¼Œå°±æ˜¯ä½ çš„åº”ç”¨\næœåŠ¡ç«¯ä»£è¡¨ç¼“å­˜çš„æœåŠ¡ç«¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571701388,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":142817,"user_name":"è‰¯è®°","can_delete":false,"product_type":"c1","uid":1033503,"ip_address":"","ucode":"F78CC56BB32D8F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c5/1f/485fcff9.jpg","comment_is_top":false,"comment_ctime":1571542489,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1571542489","product_id":100035801,"comment_content":"ä¸ªäººæ„Ÿè§‰Redis Sentinelå’Œå¾®æœåŠ¡ä¸­çš„Eurekaæ˜¯æ¯”è¾ƒç±»ä¼¼çš„æ¨¡å¼ï¼Œé‚£ä¹ˆSentinelåœ¨é‡æ–°é€‰ä¸»çš„æ—¶å€™æ˜¯ä¸æ˜¯ä¸å¯ç”¨çš„ï¼Ÿè¿™æ ·å¯¹äºä¸€ä¸ªè¦æ±‚é«˜çš„ç³»ç»Ÿæ¥è¯´ä¹Ÿæ˜¯éå¸¸ä¸åˆ©çš„ä¸€ä»¶äº‹å§ï¼Ÿ","like_count":0},{"had_liked":false,"id":142748,"user_name":"distdev","can_delete":false,"product_type":"c1","uid":1302798,"ip_address":"","ucode":"22AA05788627C6","user_header":"https://static001.geekbang.org/account/avatar/00/13/e1/0e/9ce05946.jpg","comment_is_top":false,"comment_ctime":1571489905,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"1571489905","product_id":100035801,"comment_content":"èƒ½å¦è°ˆè°ˆreplicaä¹‹é—´ä¸€è‡´æ€§æ–¹æ¡ˆçš„å–èˆï¼Ÿç®€å•çš„ä¸»ä»  åŒæ­¥è¿˜æ˜¯å¼‚æ­¥  æ‰€æœ‰è¯»å†™éƒ½è®¿é—®ä¸»æˆ–è€…å¦‚æ‚¨è¯¾ä¸­æ‰€è¯´çš„ å†™è®¿é—®ä¸» è¯»è®¿é—®ä»  å¦å¤–æ˜¯å¦æœ‰äººé‡‡ç”¨paxosè¿™æ ·çš„æ–¹æ¡ˆ æˆ–è€…è¿˜æœ‰å…¶ä»–çš„æ–¹æ¡ˆå—ï¼Ÿ è°¢è°¢","like_count":0},{"had_liked":false,"id":142732,"user_name":"longslee","can_delete":false,"product_type":"c1","uid":1465986,"ip_address":"","ucode":"C24E32E5B1B6F5","user_header":"https://static001.geekbang.org/account/avatar/00/16/5e/82/438c8534.jpg","comment_is_top":false,"comment_ctime":1571482882,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1571482882","product_id":100035801,"comment_content":"é‚£ä¹ˆï¼Œè€å¸ˆå†é—®ä¸€ä¸‹ï¼ŒRedis çš„ slotï¼Œæ˜¯å¦ä¹Ÿè·Ÿä¸€è‡´æ€§hashä¸€æ ·çš„ï¼Œå¦‚æœä¸€ä¸ªèŠ‚ç‚¹ç§»é™¤æˆ–è€…æŒ‚æ‰ï¼Œä»¥å‰å±äºè¿™ä¸ªèŠ‚ç‚¹çš„keyï¼Œä¹Ÿä¼šåœ¨ä¸‹ä¸€æ¬¡é¦–æ¬¡ä½¿ç”¨çš„æ—¶å€™ï¼Œæ•°æ®éœ€è¦ç©¿é€ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1762252,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/e3/cc/0947ff0b.jpg","nickname":"nestle","note":"","ucode":"469800BED81B54","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":185134,"discussion_content":"æ¯æ®µslotå¯ä»¥é…ä¸€ä¸ªmasterå’Œå¤šä¸ªslaveã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582597200,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":142707,"user_name":"æ–æ³¢é‚£å¥‘","can_delete":false,"product_type":"c1","uid":1464006,"ip_address":"","ucode":"85E2EBC01392B1","user_header":"https://static001.geekbang.org/account/avatar/00/16/56/c6/0b449bc6.jpg","comment_is_top":false,"comment_ctime":1571469437,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1571469437","product_id":100035801,"comment_content":"åˆšåˆšçœ‹äº†è¿™ç‰‡æ–‡ç« è„‘å­é‡Œå°±çµå…‰ä¸€é—ª å¯¹äºæ€è€ƒé¢˜ æˆ‘è§‰å¾—å¯ä»¥å€Ÿé‰´æ“ä½œç³»ç»Ÿç³»ç»Ÿé‡Œçš„tlb å°±æ˜¯åœ¨ç¼“å­˜æˆåœ¨åŠ ä¸€ä¸ªç¼“å­˜ è¿™ä¸ªç¼“å­˜å°±æ˜¯webå­˜åœ¨æœ¬åœ°ï¼ˆä¸åŒäºcookie ä½†å…·ä½“æ€ä¹ˆæ ·è¿˜æ²¡æƒ³æ¸…æ¥š åªæ˜¯çªå‘å¥‡æƒ³ï¼‰","like_count":0},{"had_liked":false,"id":142556,"user_name":"çº¦ä¹¦äºš","can_delete":false,"product_type":"c1","uid":1046714,"ip_address":"","ucode":"81EA27ADD9EC1A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f8/ba/14e05601.jpg","comment_is_top":false,"comment_ctime":1571395036,"is_pvip":false,"replies":[{"id":"55090","content":"1. æ˜¯ä¸€è‡´æ€§hashç®—æ³•å†³å®šçš„ï¼ŒAçš„è¿æ¥å‡ºäº†é—®é¢˜ï¼Œä¼šæŒ‰ç…§åœ†ç¯ä¸Šçš„é¡ºåºä»ä¸‹ä¸€ä¸ªèŠ‚ç‚¹å–<br>2. å› ä¸ºå‰¯æœ¬ç»„çš„å®¹é‡æ¯”ä¸»ä»å°ï¼Œæ‰€ä»¥å®ƒçš„æ•°æ®æ›´å°‘ï¼Œç›¸å¯¹æ¥è¯´ä¼šè¯»å†™çƒ­ç‚¹ä¸€äº›çš„æ•°æ®<br>3. å‰¯æœ¬ç»„å°±ç›¸å½“äºslaveçš„slaveçš„æ¦‚å¿µï¼Œåªæ˜¯å®ƒæœ‰å¤šç»„ï¼Œå¯ä»¥æŠ—æ›´é«˜çš„æµé‡","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1571453797,"ip_address":"","comment_id":142556,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1571395036","product_id":100035801,"comment_content":"1. ä¸€è‡´æ€§Hashçš„è„æ•°æ®é—®é¢˜é‡Œï¼Œç¼“å­˜Aå’Œå®¢æˆ·ç«¯è¿æ¥å‡ºç°é—®é¢˜ï¼Œä¸ºä»€ä¹ˆå®¢æˆ·ç«¯å°±èƒ½å†™å…¥åˆ°Bäº†å‘¢ï¼Ÿ<br>2. å¤šå‰¯æœ¬çš„æ–¹æ¡ˆé‡Œï¼Œä¸ºä»€ä¹ˆè¯´å‰¯æœ¬ç»„åªå­˜å‚¨äº†æ›´åŠ çƒ­çš„æ•°æ®ï¼Ÿéçƒ­ç‚¹æ•°æ®ä¸ä»å‰¯æœ¬ç»„æŸ¥è¯¢ä¹ˆï¼Ÿåªè¦æŸ¥è¯¢ï¼Œä¸æ˜¯ä¾æ—§ä¼šå†™å…¥ï¼Ÿ<br>è¿™ä¸ªè§£å†³æ–¹æ¡ˆç¬¬ä¸€æ¬¡è§ï¼Œæ„Ÿè§‰æ€ªæ€ªçš„ã€‚æ‹…å¿ƒslaveçš„æ‰¿è½½èƒ½åŠ›ï¼Œæ˜¯ä¸æ˜¯ç»™slaveå†æ¥slaveå°±å¥½äº†å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":471174,"discussion_content":"1. æ˜¯ä¸€è‡´æ€§hashç®—æ³•å†³å®šçš„ï¼ŒAçš„è¿æ¥å‡ºäº†é—®é¢˜ï¼Œä¼šæŒ‰ç…§åœ†ç¯ä¸Šçš„é¡ºåºä»ä¸‹ä¸€ä¸ªèŠ‚ç‚¹å–\n2. å› ä¸ºå‰¯æœ¬ç»„çš„å®¹é‡æ¯”ä¸»ä»å°ï¼Œæ‰€ä»¥å®ƒçš„æ•°æ®æ›´å°‘ï¼Œç›¸å¯¹æ¥è¯´ä¼šè¯»å†™çƒ­ç‚¹ä¸€äº›çš„æ•°æ®\n3. å‰¯æœ¬ç»„å°±ç›¸å½“äºslaveçš„slaveçš„æ¦‚å¿µï¼Œåªæ˜¯å®ƒæœ‰å¤šç»„ï¼Œå¯ä»¥æŠ—æ›´é«˜çš„æµé‡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571453797,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":142426,"user_name":"Alpha","can_delete":false,"product_type":"c1","uid":1001861,"ip_address":"","ucode":"60CA15A25EC796","user_header":"https://static001.geekbang.org/account/avatar/00/0f/49/85/3f161d95.jpg","comment_is_top":false,"comment_ctime":1571366875,"is_pvip":false,"replies":[{"id":"55094","content":"æ˜¯çš„ï¼Œæ˜¯ç”±å®¢æˆ·ç«¯æ¥åšçš„","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1571453921,"ip_address":"","comment_id":142426,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1571366875","product_id":100035801,"comment_content":"è¯·é—®è€å¸ˆmemcachedä¸»ä»æ–¹æ¡ˆä¸­æ˜¯æ€ä¹ˆåšä¸»ä»æ•°æ®åŒæ­¥çš„ï¼Œå®¢æˆ·ç«¯åŒå†™å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":471121,"discussion_content":"æ˜¯çš„ï¼Œæ˜¯ç”±å®¢æˆ·ç«¯æ¥åšçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571453921,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":142418,"user_name":"åƒé¥­é¥­","can_delete":false,"product_type":"c1","uid":1231549,"ip_address":"","ucode":"95CFA07CDA2957","user_header":"https://static001.geekbang.org/account/avatar/00/12/ca/bd/a51ae4b2.jpg","comment_is_top":false,"comment_ctime":1571365491,"is_pvip":false,"replies":[{"id":"55096","content":"1. æ˜¯çš„ï¼Œredisçš„é«˜å¯ç”¨æ–¹æ¡ˆæ¯”è¾ƒæˆç†Ÿ<br>2. è™šæ‹ŸèŠ‚ç‚¹å…¶å®æ˜¯æƒ³è®©ç©¿é€å‘ç”Ÿåˆ°å¤šä¸ªèŠ‚ç‚¹ä¸Š","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1571453962,"ip_address":"","comment_id":142418,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1571365491","product_id":100035801,"comment_content":"æ„Ÿè§‰è€å¸ˆé»˜è®¤æŠŠç›®å…‰é›†ä¸­åœ¨ Redis ä¸Šäº†ï¼Œå› ä¸ºæ–‡ä¸­çš„å“¨å…µæ¨¡å¼å’Œä¸»ä»å¤åˆ¶éƒ½æ˜¯ Redis çš„å§ã€‚è¿˜æœ‰æˆ‘æ„Ÿè§‰å‡ºç°è™šæ‹ŸèŠ‚ç‚¹ä¸»è¦ç”¨æ¥è§£å†³ Hash å€¾æ–œï¼Œæœ›æŒ‡æ•™","like_count":0,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":471115,"discussion_content":"1. æ˜¯çš„ï¼Œredisçš„é«˜å¯ç”¨æ–¹æ¡ˆæ¯”è¾ƒæˆç†Ÿ\n2. è™šæ‹ŸèŠ‚ç‚¹å…¶å®æ˜¯æƒ³è®©ç©¿é€å‘ç”Ÿåˆ°å¤šä¸ªèŠ‚ç‚¹ä¸Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571453962,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":142358,"user_name":"é¥­å›¢","can_delete":false,"product_type":"c1","uid":1332557,"ip_address":"","ucode":"E24F240CC91BE8","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erbY9UsqHZhhVoI69yXNibBBg0TRdUVsKLMg2UZ1R3NJxXdMicqceI5yhdKZ5Ad6CJYO0XpFHlJzIYQ/132","comment_is_top":false,"comment_ctime":1571359537,"is_pvip":false,"replies":[{"id":"55098","content":"æ•°æ®æ›´æ–°çš„æ—¶å€™è¦åŒæ—¶æ›´æ–°å‰¯æœ¬ç»„çš„","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1571454023,"ip_address":"","comment_id":142358,"utype":1}],"discussion_count":5,"race_medal":0,"score":"1571359537","product_id":100035801,"comment_content":"è€å¸ˆï¼Œåœ¨m-så‰æ·»åŠ ä¸€å±‚å‰¯æœ¬å±‚ï¼é‚£ä»–çš„æ•°æ®æ˜¯æ€ä¹ˆæ·˜æ±°çš„å‘¢ï¼Ÿæ¯”å¦‚ç¬¬ä¸€æ­¥æˆ‘ä¸»ä»æ•°æ®éƒ½æ˜¯1 å‰¯æœ¬æ²¡æœ‰è¿™æ—¶å›æ¥æŸ¥ï¼Œå¹¶ä¸”å‰¯æœ¬å›å†™ä¸º1.è¿‡ä¸€ä¼šæˆ‘çš„æ•°æ®è¡¨ä¸ºäº†2ï¼ä½†æ˜¯å‰¯æœ¬æ•°æ®æ²¡å˜ï¼è¿™ç§æƒ…å†µæ˜¯å’‹å¤„ç†çš„ï¼","like_count":0,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":471081,"discussion_content":"æ•°æ®æ›´æ–°çš„æ—¶å€™è¦åŒæ—¶æ›´æ–°å‰¯æœ¬ç»„çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571454023,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1762252,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/e3/cc/0947ff0b.jpg","nickname":"nestle","note":"","ucode":"469800BED81B54","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":185100,"discussion_content":"æ„Ÿè§‰å‰¯æœ¬åˆå¢åŠ äº†ç»´æŠ¤æ•°æ®ä¸€è‡´æ€§çš„æˆæœ¬ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582595066,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1332557,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erbY9UsqHZhhVoI69yXNibBBg0TRdUVsKLMg2UZ1R3NJxXdMicqceI5yhdKZ5Ad6CJYO0XpFHlJzIYQ/132","nickname":"é¥­å›¢","note":"","ucode":"E24F240CC91BE8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":36885,"discussion_content":"å“¦ æ˜ç™½äº†ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571456378,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1338831,"avatar":"https://static001.geekbang.org/account/avatar/00/14/6d/cf/ec335526.jpg","nickname":"jc9090kkk","note":"","ucode":"6C992D07A2E78F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":36327,"discussion_content":"ä½ æ•°æ®åº“æ›´æ–°äº† éš¾é“ä¸æ¸…ç†ç¼“å­˜ç³»ç»Ÿå—ï¼Ÿ ä½ è¿™ç§æƒ…å†µæ˜¯ç”±ä½ è‡ªå·±çš„ä¸šåŠ¡ä»£ç ä¸­æ“ä½œç¼“å­˜è¯»å†™æˆ–åˆ é™¤æ¥ä¿è¯çš„ï¼Œç¼“å­˜ç³»ç»Ÿæœ¬èº«ä¸åšä¿è¯ï¼Œç¼“å­˜ç³»ç»Ÿæœ¬èº«åªåšæ•°æ®è¿‡æœŸåˆ é™¤å¤„ç†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571363417,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1332557,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erbY9UsqHZhhVoI69yXNibBBg0TRdUVsKLMg2UZ1R3NJxXdMicqceI5yhdKZ5Ad6CJYO0XpFHlJzIYQ/132","nickname":"é¥­å›¢","note":"","ucode":"E24F240CC91BE8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1338831,"avatar":"https://static001.geekbang.org/account/avatar/00/14/6d/cf/ec335526.jpg","nickname":"jc9090kkk","note":"","ucode":"6C992D07A2E78F","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":36340,"discussion_content":"ä¸ä¸ä¸ï¼Œç¼“å­˜è‚¯å®šä¼šæ›´æ–°ï¼Œä½†æ˜¯ç¼“å­˜ä¸Šå±‚è¿˜æœ‰ä¸€å±‚å‰¯æœ¬ï¼è¿™å±‚å‰¯æœ¬æ€ä¹ˆæ›´æ–°ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571364744,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":36327,"ip_address":""},"score":36340,"extra":""}]}]}]}