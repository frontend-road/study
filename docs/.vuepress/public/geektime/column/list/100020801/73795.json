{"id":73795,"title":"17 | å¦‚ä½•æ­£ç¡®åœ°æ˜¾ç¤ºéšæœºæ¶ˆæ¯ï¼Ÿ","content":"<p>æˆ‘åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ï¼Œä¸ºä½ è®²è§£å®Œorder byè¯­å¥çš„å‡ ç§æ‰§è¡Œæ¨¡å¼åï¼Œå°±æƒ³åˆ°äº†ä¹‹å‰ä¸€ä¸ªåšè‹±è¯­å­¦ä¹ Appçš„æœ‹å‹ç¢°åˆ°è¿‡çš„ä¸€ä¸ªæ€§èƒ½é—®é¢˜ã€‚ä»Šå¤©è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘å°±ä»è¿™ä¸ªæ€§èƒ½é—®é¢˜è¯´èµ·ï¼Œå’Œä½ è¯´è¯´MySQLä¸­çš„å¦å¤–ä¸€ç§æ’åºéœ€æ±‚ï¼Œå¸Œæœ›èƒ½å¤ŸåŠ æ·±ä½ å¯¹MySQLæ’åºé€»è¾‘çš„ç†è§£ã€‚</p><p>è¿™ä¸ªè‹±è¯­å­¦ä¹ Appé¦–é¡µæœ‰ä¸€ä¸ªéšæœºæ˜¾ç¤ºå•è¯çš„åŠŸèƒ½ï¼Œä¹Ÿå°±æ˜¯æ ¹æ®æ¯ä¸ªç”¨æˆ·çš„çº§åˆ«æœ‰ä¸€ä¸ªå•è¯è¡¨ï¼Œç„¶åè¿™ä¸ªç”¨æˆ·æ¯æ¬¡è®¿é—®é¦–é¡µçš„æ—¶å€™ï¼Œéƒ½ä¼šéšæœºæ»šåŠ¨æ˜¾ç¤ºä¸‰ä¸ªå•è¯ã€‚ä»–ä»¬å‘ç°éšç€å•è¯è¡¨å˜å¤§ï¼Œé€‰å•è¯è¿™ä¸ªé€»è¾‘å˜å¾—è¶Šæ¥è¶Šæ…¢ï¼Œç”šè‡³å½±å“åˆ°äº†é¦–é¡µçš„æ‰“å¼€é€Ÿåº¦ã€‚</p><p>ç°åœ¨ï¼Œå¦‚æœè®©ä½ æ¥è®¾è®¡è¿™ä¸ªSQLè¯­å¥ï¼Œä½ ä¼šæ€ä¹ˆå†™å‘¢ï¼Ÿ</p><p>ä¸ºäº†ä¾¿äºç†è§£ï¼Œæˆ‘å¯¹è¿™ä¸ªä¾‹å­è¿›è¡Œäº†ç®€åŒ–ï¼šå»æ‰æ¯ä¸ªçº§åˆ«çš„ç”¨æˆ·éƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„å•è¯è¡¨è¿™ä¸ªé€»è¾‘ï¼Œç›´æ¥å°±æ˜¯ä»ä¸€ä¸ªå•è¯è¡¨ä¸­éšæœºé€‰å‡ºä¸‰ä¸ªå•è¯ã€‚è¿™ä¸ªè¡¨çš„å»ºè¡¨è¯­å¥å’Œåˆå§‹æ•°æ®çš„å‘½ä»¤å¦‚ä¸‹ï¼š</p><pre><code>mysql&gt; CREATE TABLE `words` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `word` varchar(64) DEFAULT NULL,\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB;\n\ndelimiter ;;\ncreate procedure idata()\nbegin\n  declare i int;\n  set i=0;\n  while i&lt;10000 do\n    insert into words(word) values(concat(char(97+(i div 1000)), char(97+(i % 1000 div 100)), char(97+(i % 100 div 10)), char(97+(i % 10))));\n    set i=i+1;\n  end while;\nend;;\ndelimiter ;\n\ncall idata();\n</code></pre><p>ä¸ºäº†ä¾¿äºé‡åŒ–è¯´æ˜ï¼Œæˆ‘åœ¨è¿™ä¸ªè¡¨é‡Œé¢æ’å…¥äº†10000è¡Œè®°å½•ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±ä¸€èµ·çœ‹çœ‹è¦éšæœºé€‰æ‹©3ä¸ªå•è¯ï¼Œæœ‰ä»€ä¹ˆæ–¹æ³•å®ç°ï¼Œå­˜åœ¨ä»€ä¹ˆé—®é¢˜ä»¥åŠå¦‚ä½•æ”¹è¿›ã€‚</p><h1>å†…å­˜ä¸´æ—¶è¡¨</h1><p>é¦–å…ˆï¼Œä½ ä¼šæƒ³åˆ°ç”¨order by rand()æ¥å®ç°è¿™ä¸ªé€»è¾‘ã€‚</p><pre><code>mysql&gt; select word from words order by rand() limit 3;\n</code></pre><p>è¿™ä¸ªè¯­å¥çš„æ„æ€å¾ˆç›´ç™½ï¼Œéšæœºæ’åºå–å‰3ä¸ªã€‚è™½ç„¶è¿™ä¸ªSQLè¯­å¥å†™æ³•å¾ˆç®€å•ï¼Œä½†æ‰§è¡Œæµç¨‹å´æœ‰ç‚¹å¤æ‚çš„ã€‚</p><!-- [[[read_end]]] --><p>æˆ‘ä»¬å…ˆç”¨explainå‘½ä»¤æ¥çœ‹çœ‹è¿™ä¸ªè¯­å¥çš„æ‰§è¡Œæƒ…å†µã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/59/50/59a4fb0165b7ce1184e41f2d061ce350.png?wh=1553*142\" alt=\"\"></p><center><span class=\"reference\">å›¾1 ä½¿ç”¨explainå‘½ä»¤æŸ¥çœ‹è¯­å¥çš„æ‰§è¡Œæƒ…å†µ</span></center><p>Extraå­—æ®µæ˜¾ç¤ºUsing temporaryï¼Œè¡¨ç¤ºçš„æ˜¯éœ€è¦ä½¿ç”¨ä¸´æ—¶è¡¨ï¼›Using filesortï¼Œè¡¨ç¤ºçš„æ˜¯éœ€è¦æ‰§è¡Œæ’åºæ“ä½œã€‚</p><p>å› æ­¤è¿™ä¸ªExtraçš„æ„æ€å°±æ˜¯ï¼Œéœ€è¦ä¸´æ—¶è¡¨ï¼Œå¹¶ä¸”éœ€è¦åœ¨ä¸´æ—¶è¡¨ä¸Šæ’åºã€‚</p><p>è¿™é‡Œï¼Œä½ å¯ä»¥å…ˆå›é¡¾ä¸€ä¸‹<a href=\"https://time.geekbang.org/column/article/73479\">ä¸Šä¸€ç¯‡æ–‡ç« </a>ä¸­å…¨å­—æ®µæ’åºå’Œrowidæ’åºçš„å†…å®¹ã€‚æˆ‘æŠŠä¸Šä¸€ç¯‡æ–‡ç« çš„ä¸¤ä¸ªæµç¨‹å›¾è´´è¿‡æ¥ï¼Œæ–¹ä¾¿ä½ å¤ä¹ ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/6c/72/6c821828cddf46670f9d56e126e3e772.jpg?wh=1142*856\" alt=\"\"></p><center><span class=\"reference\">å›¾2 å…¨å­—æ®µæ’åº</span></center><p><img src=\"https://static001.geekbang.org/resource/image/dc/6d/dc92b67721171206a302eb679c83e86d.jpg?wh=1142*856\" alt=\"\"></p><center>å›¾3 rowidæ’åº</center><p>ç„¶åï¼Œæˆ‘å†é—®ä½ ä¸€ä¸ªé—®é¢˜ï¼Œä½ è§‰å¾—å¯¹äºä¸´æ—¶å†…å­˜è¡¨çš„æ’åºæ¥è¯´ï¼Œå®ƒä¼šé€‰æ‹©å“ªä¸€ç§ç®—æ³•å‘¢ï¼Ÿå›é¡¾ä¸€ä¸‹ä¸Šä¸€ç¯‡æ–‡ç« çš„ä¸€ä¸ªç»“è®ºï¼š<strong>å¯¹äºInnoDBè¡¨æ¥è¯´</strong>ï¼Œæ‰§è¡Œå…¨å­—æ®µæ’åºä¼šå‡å°‘ç£ç›˜è®¿é—®ï¼Œå› æ­¤ä¼šè¢«ä¼˜å…ˆé€‰æ‹©ã€‚</p><p>æˆ‘å¼ºè°ƒäº†â€œInnoDBè¡¨â€ï¼Œä½ è‚¯å®šæƒ³åˆ°äº†ï¼Œ<strong>å¯¹äºå†…å­˜è¡¨ï¼Œå›è¡¨è¿‡ç¨‹åªæ˜¯ç®€å•åœ°æ ¹æ®æ•°æ®è¡Œçš„ä½ç½®ï¼Œç›´æ¥è®¿é—®å†…å­˜å¾—åˆ°æ•°æ®ï¼Œæ ¹æœ¬ä¸ä¼šå¯¼è‡´å¤šè®¿é—®ç£ç›˜</strong>ã€‚ä¼˜åŒ–å™¨æ²¡æœ‰äº†è¿™ä¸€å±‚é¡¾è™‘ï¼Œé‚£ä¹ˆå®ƒä¼šä¼˜å…ˆè€ƒè™‘çš„ï¼Œå°±æ˜¯ç”¨äºæ’åºçš„è¡Œè¶Šå°è¶Šå¥½äº†ï¼Œæ‰€ä»¥ï¼ŒMySQLè¿™æ—¶å°±ä¼šé€‰æ‹©rowidæ’åºã€‚</p><p>ç†è§£äº†è¿™ä¸ªç®—æ³•é€‰æ‹©çš„é€»è¾‘ï¼Œæˆ‘ä»¬å†æ¥çœ‹çœ‹è¯­å¥çš„æ‰§è¡Œæµç¨‹ã€‚åŒæ—¶ï¼Œé€šè¿‡ä»Šå¤©çš„è¿™ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬æ¥å°è¯•åˆ†æä¸€ä¸‹è¯­å¥çš„æ‰«æè¡Œæ•°ã€‚</p><p>è¿™æ¡è¯­å¥çš„æ‰§è¡Œæµç¨‹æ˜¯è¿™æ ·çš„ï¼š</p><ol>\n<li>\n<p>åˆ›å»ºä¸€ä¸ªä¸´æ—¶è¡¨ã€‚è¿™ä¸ªä¸´æ—¶è¡¨ä½¿ç”¨çš„æ˜¯memoryå¼•æ“ï¼Œè¡¨é‡Œæœ‰ä¸¤ä¸ªå­—æ®µï¼Œç¬¬ä¸€ä¸ªå­—æ®µæ˜¯doubleç±»å‹ï¼Œä¸ºäº†åé¢æè¿°æ–¹ä¾¿ï¼Œè®°ä¸ºå­—æ®µRï¼Œç¬¬äºŒä¸ªå­—æ®µæ˜¯varchar(64)ç±»å‹ï¼Œè®°ä¸ºå­—æ®µWã€‚å¹¶ä¸”ï¼Œè¿™ä¸ªè¡¨æ²¡æœ‰å»ºç´¢å¼•ã€‚</p>\n</li>\n<li>\n<p>ä»wordsè¡¨ä¸­ï¼ŒæŒ‰ä¸»é”®é¡ºåºå–å‡ºæ‰€æœ‰çš„wordå€¼ã€‚å¯¹äºæ¯ä¸€ä¸ªwordå€¼ï¼Œè°ƒç”¨rand()å‡½æ•°ç”Ÿæˆä¸€ä¸ªå¤§äº0å°äº1çš„éšæœºå°æ•°ï¼Œå¹¶æŠŠè¿™ä¸ªéšæœºå°æ•°å’Œwordåˆ†åˆ«å­˜å…¥ä¸´æ—¶è¡¨çš„Rå’ŒWå­—æ®µä¸­ï¼Œåˆ°æ­¤ï¼Œæ‰«æè¡Œæ•°æ˜¯10000ã€‚</p>\n</li>\n<li>\n<p>ç°åœ¨ä¸´æ—¶è¡¨æœ‰10000è¡Œæ•°æ®äº†ï¼Œæ¥ä¸‹æ¥ä½ è¦åœ¨è¿™ä¸ªæ²¡æœ‰ç´¢å¼•çš„å†…å­˜ä¸´æ—¶è¡¨ä¸Šï¼ŒæŒ‰ç…§å­—æ®µRæ’åºã€‚</p>\n</li>\n<li>\n<p>åˆå§‹åŒ– sort_bufferã€‚sort_bufferä¸­æœ‰ä¸¤ä¸ªå­—æ®µï¼Œä¸€ä¸ªæ˜¯doubleç±»å‹ï¼Œå¦ä¸€ä¸ªæ˜¯æ•´å‹ã€‚</p>\n</li>\n<li>\n<p>ä»å†…å­˜ä¸´æ—¶è¡¨ä¸­ä¸€è¡Œä¸€è¡Œåœ°å–å‡ºRå€¼å’Œä½ç½®ä¿¡æ¯ï¼ˆæˆ‘åé¢ä¼šå’Œä½ è§£é‡Šè¿™é‡Œä¸ºä»€ä¹ˆæ˜¯â€œä½ç½®ä¿¡æ¯â€ï¼‰ï¼Œåˆ†åˆ«å­˜å…¥sort_bufferä¸­çš„ä¸¤ä¸ªå­—æ®µé‡Œã€‚è¿™ä¸ªè¿‡ç¨‹è¦å¯¹å†…å­˜ä¸´æ—¶è¡¨åšå…¨è¡¨æ‰«æï¼Œæ­¤æ—¶æ‰«æè¡Œæ•°å¢åŠ 10000ï¼Œå˜æˆäº†20000ã€‚</p>\n</li>\n<li>\n<p>åœ¨sort_bufferä¸­æ ¹æ®Rçš„å€¼è¿›è¡Œæ’åºã€‚æ³¨æ„ï¼Œè¿™ä¸ªè¿‡ç¨‹æ²¡æœ‰æ¶‰åŠåˆ°è¡¨æ“ä½œï¼Œæ‰€ä»¥ä¸ä¼šå¢åŠ æ‰«æè¡Œæ•°ã€‚</p>\n</li>\n<li>\n<p>æ’åºå®Œæˆåï¼Œå–å‡ºå‰ä¸‰ä¸ªç»“æœçš„ä½ç½®ä¿¡æ¯ï¼Œä¾æ¬¡åˆ°å†…å­˜ä¸´æ—¶è¡¨ä¸­å–å‡ºwordå€¼ï¼Œè¿”å›ç»™å®¢æˆ·ç«¯ã€‚è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œè®¿é—®äº†è¡¨çš„ä¸‰è¡Œæ•°æ®ï¼Œæ€»æ‰«æè¡Œæ•°å˜æˆäº†20003ã€‚</p>\n</li>\n</ol><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬é€šè¿‡æ…¢æŸ¥è¯¢æ—¥å¿—ï¼ˆslow logï¼‰æ¥éªŒè¯ä¸€ä¸‹æˆ‘ä»¬åˆ†æå¾—åˆ°çš„æ‰«æè¡Œæ•°æ˜¯å¦æ­£ç¡®ã€‚</p><pre><code># Query_time: 0.900376  Lock_time: 0.000347 Rows_sent: 3 Rows_examined: 20003\nSET timestamp=1541402277;\nselect word from words order by rand() limit 3;\n</code></pre><p>å…¶ä¸­ï¼ŒRows_examinedï¼š20003å°±è¡¨ç¤ºè¿™ä¸ªè¯­å¥æ‰§è¡Œè¿‡ç¨‹ä¸­æ‰«æäº†20003è¡Œï¼Œä¹Ÿå°±éªŒè¯äº†æˆ‘ä»¬åˆ†æå¾—å‡ºçš„ç»“è®ºã€‚</p><p>è¿™é‡Œæ’ä¸€å¥é¢˜å¤–è¯ï¼Œåœ¨å¹³æ—¶å­¦ä¹ æ¦‚å¿µçš„è¿‡ç¨‹ä¸­ï¼Œä½ å¯ä»¥ç»å¸¸è¿™æ ·åšï¼Œå…ˆé€šè¿‡åŸç†åˆ†æç®—å‡ºæ‰«æè¡Œæ•°ï¼Œç„¶åå†é€šè¿‡æŸ¥çœ‹æ…¢æŸ¥è¯¢æ—¥å¿—ï¼Œæ¥éªŒè¯è‡ªå·±çš„ç»“è®ºã€‚æˆ‘è‡ªå·±å°±æ˜¯ç»å¸¸è¿™ä¹ˆåšï¼Œè¿™ä¸ªè¿‡ç¨‹å¾ˆæœ‰è¶£ï¼Œåˆ†æå¯¹äº†å¼€å¿ƒï¼Œåˆ†æé”™äº†ä½†æ˜¯å¼„æ¸…æ¥šäº†ä¹Ÿå¾ˆå¼€å¿ƒã€‚</p><p>ç°åœ¨ï¼Œæˆ‘æ¥æŠŠå®Œæ•´çš„æ’åºæ‰§è¡Œæµç¨‹å›¾ç”»å‡ºæ¥ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/2a/fc/2abe849faa7dcad0189b61238b849ffc.png?wh=1142*856\" alt=\"\"></p><center><span class=\"reference\">å›¾4 éšæœºæ’åºå®Œæ•´æµç¨‹å›¾1</span></center><p>å›¾ä¸­çš„poså°±æ˜¯ä½ç½®ä¿¡æ¯ï¼Œä½ å¯èƒ½ä¼šè§‰å¾—å¥‡æ€ªï¼Œè¿™é‡Œçš„â€œä½ç½®ä¿¡æ¯â€æ˜¯ä¸ªä»€ä¹ˆæ¦‚å¿µï¼Ÿåœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å¯¹InnoDBè¡¨æ’åºçš„æ—¶å€™ï¼Œæ˜æ˜ç”¨çš„è¿˜æ˜¯IDå­—æ®µã€‚</p><p>è¿™æ—¶å€™ï¼Œæˆ‘ä»¬å°±è¦å›åˆ°ä¸€ä¸ªåŸºæœ¬æ¦‚å¿µï¼š<strong>MySQLçš„è¡¨æ˜¯ç”¨ä»€ä¹ˆæ–¹æ³•æ¥å®šä½â€œä¸€è¡Œæ•°æ®â€çš„ã€‚</strong></p><p>åœ¨å‰é¢<a href=\"https://time.geekbang.org/column/article/69236\">ç¬¬4</a>å’Œ<a href=\"https://time.geekbang.org/column/article/69636\">ç¬¬5</a>ç¯‡ä»‹ç»ç´¢å¼•çš„æ–‡ç« ä¸­ï¼Œæœ‰å‡ ä½åŒå­¦é—®åˆ°ï¼Œå¦‚æœæŠŠä¸€ä¸ªInnoDBè¡¨çš„ä¸»é”®åˆ æ‰ï¼Œæ˜¯ä¸æ˜¯å°±æ²¡æœ‰ä¸»é”®ï¼Œå°±æ²¡åŠæ³•å›è¡¨äº†ï¼Ÿ</p><p>å…¶å®ä¸æ˜¯çš„ã€‚å¦‚æœä½ åˆ›å»ºçš„è¡¨æ²¡æœ‰ä¸»é”®ï¼Œæˆ–è€…æŠŠä¸€ä¸ªè¡¨çš„ä¸»é”®åˆ æ‰äº†ï¼Œé‚£ä¹ˆInnoDBä¼šè‡ªå·±ç”Ÿæˆä¸€ä¸ªé•¿åº¦ä¸º6å­—èŠ‚çš„rowidæ¥ä½œä¸ºä¸»é”®ã€‚</p><p>è¿™ä¹Ÿå°±æ˜¯æ’åºæ¨¡å¼é‡Œé¢ï¼Œrowidåå­—çš„æ¥å†ã€‚å®é™…ä¸Šå®ƒè¡¨ç¤ºçš„æ˜¯ï¼šæ¯ä¸ªå¼•æ“ç”¨æ¥å”¯ä¸€æ ‡è¯†æ•°æ®è¡Œçš„ä¿¡æ¯ã€‚</p><ul>\n<li>å¯¹äºæœ‰ä¸»é”®çš„InnoDBè¡¨æ¥è¯´ï¼Œè¿™ä¸ªrowidå°±æ˜¯ä¸»é”®IDï¼›</li>\n<li>å¯¹äºæ²¡æœ‰ä¸»é”®çš„InnoDBè¡¨æ¥è¯´ï¼Œè¿™ä¸ªrowidå°±æ˜¯ç”±ç³»ç»Ÿç”Ÿæˆçš„ï¼›</li>\n<li>MEMORYå¼•æ“ä¸æ˜¯ç´¢å¼•ç»„ç»‡è¡¨ã€‚åœ¨è¿™ä¸ªä¾‹å­é‡Œé¢ï¼Œä½ å¯ä»¥è®¤ä¸ºå®ƒå°±æ˜¯ä¸€ä¸ªæ•°ç»„ã€‚å› æ­¤ï¼Œè¿™ä¸ªrowidå…¶å®å°±æ˜¯æ•°ç»„çš„ä¸‹æ ‡ã€‚</li>\n</ul><p>åˆ°è¿™é‡Œï¼Œæˆ‘æ¥ç¨å¾®å°ç»“ä¸€ä¸‹ï¼š<strong>order by rand()ä½¿ç”¨äº†å†…å­˜ä¸´æ—¶è¡¨ï¼Œå†…å­˜ä¸´æ—¶è¡¨æ’åºçš„æ—¶å€™ä½¿ç”¨äº†rowidæ’åºæ–¹æ³•ã€‚</strong></p><h1>ç£ç›˜ä¸´æ—¶è¡¨</h1><p>é‚£ä¹ˆï¼Œæ˜¯ä¸æ˜¯æ‰€æœ‰çš„ä¸´æ—¶è¡¨éƒ½æ˜¯å†…å­˜è¡¨å‘¢ï¼Ÿ</p><p>å…¶å®ä¸æ˜¯çš„ã€‚tmp_table_sizeè¿™ä¸ªé…ç½®é™åˆ¶äº†å†…å­˜ä¸´æ—¶è¡¨çš„å¤§å°ï¼Œé»˜è®¤å€¼æ˜¯16Mã€‚å¦‚æœä¸´æ—¶è¡¨å¤§å°è¶…è¿‡äº†tmp_table_sizeï¼Œé‚£ä¹ˆå†…å­˜ä¸´æ—¶è¡¨å°±ä¼šè½¬æˆç£ç›˜ä¸´æ—¶è¡¨ã€‚</p><p>ç£ç›˜ä¸´æ—¶è¡¨ä½¿ç”¨çš„å¼•æ“é»˜è®¤æ˜¯InnoDBï¼Œæ˜¯ç”±å‚æ•°internal_tmp_disk_storage_engineæ§åˆ¶çš„ã€‚</p><p>å½“ä½¿ç”¨ç£ç›˜ä¸´æ—¶è¡¨çš„æ—¶å€™ï¼Œå¯¹åº”çš„å°±æ˜¯ä¸€ä¸ªæ²¡æœ‰æ˜¾å¼ç´¢å¼•çš„InnoDBè¡¨çš„æ’åºè¿‡ç¨‹ã€‚</p><p>ä¸ºäº†å¤ç°è¿™ä¸ªè¿‡ç¨‹ï¼Œæˆ‘æŠŠtmp_table_sizeè®¾ç½®æˆ1024ï¼ŒæŠŠsort_buffer_sizeè®¾ç½®æˆ 32768, æŠŠ max_length_for_sort_data è®¾ç½®æˆ16ã€‚</p><pre><code>set tmp_table_size=1024;\nset sort_buffer_size=32768;\nset max_length_for_sort_data=16;\n/* æ‰“å¼€ optimizer_traceï¼Œåªå¯¹æœ¬çº¿ç¨‹æœ‰æ•ˆ */\nSET optimizer_trace='enabled=on'; \n\n/* æ‰§è¡Œè¯­å¥ */\nselect word from words order by rand() limit 3;\n\n/* æŸ¥çœ‹ OPTIMIZER_TRACE è¾“å‡º */\nSELECT * FROM `information_schema`.`OPTIMIZER_TRACE`\\G\n</code></pre><p><img src=\"https://static001.geekbang.org/resource/image/78/ab/78d2db9a4fdba81feadccf6e878b4aab.png?wh=646*369\" alt=\"\"></p><center><span class=\"reference\">å›¾5 OPTIMIZER_TRACEéƒ¨åˆ†ç»“æœ</span></center><p>ç„¶åï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹è¿™æ¬¡OPTIMIZER_TRACEçš„ç»“æœã€‚</p><p>å› ä¸ºå°†max_length_for_sort_dataè®¾ç½®æˆ16ï¼Œå°äºwordå­—æ®µçš„é•¿åº¦å®šä¹‰ï¼Œæ‰€ä»¥æˆ‘ä»¬çœ‹åˆ°sort_modeé‡Œé¢æ˜¾ç¤ºçš„æ˜¯rowidæ’åºï¼Œè¿™ä¸ªæ˜¯ç¬¦åˆé¢„æœŸçš„ï¼Œå‚ä¸æ’åºçš„æ˜¯éšæœºå€¼Rå­—æ®µå’Œrowidå­—æ®µç»„æˆçš„è¡Œã€‚</p><p>è¿™æ—¶å€™ä½ å¯èƒ½å¿ƒç®—äº†ä¸€ä¸‹ï¼Œå‘ç°ä¸å¯¹ã€‚Rå­—æ®µå­˜æ”¾çš„éšæœºå€¼å°±8ä¸ªå­—èŠ‚ï¼Œrowidæ˜¯6ä¸ªå­—èŠ‚ï¼ˆè‡³äºä¸ºä»€ä¹ˆæ˜¯6å­—èŠ‚ï¼Œå°±ç•™ç»™ä½ è¯¾åæ€è€ƒå§ï¼‰ï¼Œæ•°æ®æ€»è¡Œæ•°æ˜¯10000ï¼Œè¿™æ ·ç®—å‡ºæ¥å°±æœ‰140000å­—èŠ‚ï¼Œè¶…è¿‡äº†sort_buffer_size å®šä¹‰çš„ 32768å­—èŠ‚äº†ã€‚ä½†æ˜¯ï¼Œnumber_of_tmp_filesçš„å€¼å±…ç„¶æ˜¯0ï¼Œéš¾é“ä¸éœ€è¦ç”¨ä¸´æ—¶æ–‡ä»¶å—ï¼Ÿ</p><p>è¿™ä¸ªSQLè¯­å¥çš„æ’åºç¡®å®æ²¡æœ‰ç”¨åˆ°ä¸´æ—¶æ–‡ä»¶ï¼Œé‡‡ç”¨æ˜¯MySQL 5.6ç‰ˆæœ¬å¼•å…¥çš„ä¸€ä¸ªæ–°çš„æ’åºç®—æ³•ï¼Œå³ï¼šä¼˜å…ˆé˜Ÿåˆ—æ’åºç®—æ³•ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±çœ‹çœ‹ä¸ºä»€ä¹ˆæ²¡æœ‰ä½¿ç”¨ä¸´æ—¶æ–‡ä»¶çš„ç®—æ³•ï¼Œä¹Ÿå°±æ˜¯å½’å¹¶æ’åºç®—æ³•ï¼Œè€Œæ˜¯é‡‡ç”¨äº†ä¼˜å…ˆé˜Ÿåˆ—æ’åºç®—æ³•ã€‚</p><p>å…¶å®ï¼Œæˆ‘ä»¬ç°åœ¨çš„SQLè¯­å¥ï¼Œåªéœ€è¦å–Rå€¼æœ€å°çš„3ä¸ªrowidã€‚ä½†æ˜¯ï¼Œå¦‚æœä½¿ç”¨å½’å¹¶æ’åºç®—æ³•çš„è¯ï¼Œè™½ç„¶æœ€ç»ˆä¹Ÿèƒ½å¾—åˆ°å‰3ä¸ªå€¼ï¼Œä½†æ˜¯è¿™ä¸ªç®—æ³•ç»“æŸåï¼Œå·²ç»å°†10000è¡Œæ•°æ®éƒ½æ’å¥½åºäº†ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œåé¢çš„9997è¡Œä¹Ÿæ˜¯æœ‰åºçš„äº†ã€‚ä½†ï¼Œæˆ‘ä»¬çš„æŸ¥è¯¢å¹¶ä¸éœ€è¦è¿™äº›æ•°æ®æ˜¯æœ‰åºçš„ã€‚æ‰€ä»¥ï¼Œæƒ³ä¸€ä¸‹å°±æ˜ç™½äº†ï¼Œè¿™æµªè´¹äº†éå¸¸å¤šçš„è®¡ç®—é‡ã€‚</p><p>è€Œä¼˜å…ˆé˜Ÿåˆ—ç®—æ³•ï¼Œå°±å¯ä»¥ç²¾ç¡®åœ°åªå¾—åˆ°ä¸‰ä¸ªæœ€å°å€¼ï¼Œæ‰§è¡Œæµç¨‹å¦‚ä¸‹ï¼š</p><ol>\n<li>å¯¹äºè¿™10000ä¸ªå‡†å¤‡æ’åºçš„(R,rowid)ï¼Œå…ˆå–å‰ä¸‰è¡Œï¼Œæ„é€ æˆä¸€ä¸ªå †ï¼›</li>\n</ol><p>ï¼ˆå¯¹æ•°æ®ç»“æ„å°è±¡æ¨¡ç³Šçš„åŒå­¦ï¼Œå¯ä»¥å…ˆè®¾æƒ³æˆè¿™æ˜¯ä¸€ä¸ªç”±ä¸‰ä¸ªå…ƒç´ ç»„æˆçš„æ•°ç»„ï¼‰</p><ol>\n<li>\n<p>å–ä¸‹ä¸€ä¸ªè¡Œ(Râ€™,rowidâ€™)ï¼Œè·Ÿå½“å‰å †é‡Œé¢æœ€å¤§çš„Ræ¯”è¾ƒï¼Œå¦‚æœRâ€™å°äºRï¼ŒæŠŠè¿™ä¸ª(R,rowid)ä»å †ä¸­å»æ‰ï¼Œæ¢æˆ(Râ€™,rowidâ€™)ï¼›</p>\n</li>\n<li>\n<p>é‡å¤ç¬¬2æ­¥ï¼Œç›´åˆ°ç¬¬10000ä¸ª(Râ€™,rowidâ€™)å®Œæˆæ¯”è¾ƒã€‚</p>\n</li>\n</ol><p>è¿™é‡Œæˆ‘ç®€å•ç”»äº†ä¸€ä¸ªä¼˜å…ˆé˜Ÿåˆ—æ’åºè¿‡ç¨‹çš„ç¤ºæ„å›¾ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/e9/97/e9c29cb20bf9668deba8981e444f6897.png?wh=1536*2048\" alt=\"\"></p><center><span class=\"reference\">å›¾6 ä¼˜å…ˆé˜Ÿåˆ—æ’åºç®—æ³•ç¤ºä¾‹</span></center><p>å›¾6æ˜¯æ¨¡æ‹Ÿ6ä¸ª(R,rowid)è¡Œï¼Œé€šè¿‡ä¼˜å…ˆé˜Ÿåˆ—æ’åºæ‰¾åˆ°æœ€å°çš„ä¸‰ä¸ªRå€¼çš„è¡Œçš„è¿‡ç¨‹ã€‚æ•´ä¸ªæ’åºè¿‡ç¨‹ä¸­ï¼Œä¸ºäº†æœ€å¿«åœ°æ‹¿åˆ°å½“å‰å †çš„æœ€å¤§å€¼ï¼Œæ€»æ˜¯ä¿æŒæœ€å¤§å€¼åœ¨å †é¡¶ï¼Œå› æ­¤è¿™æ˜¯ä¸€ä¸ªæœ€å¤§å †ã€‚</p><p>å›¾5çš„OPTIMIZER_TRACEç»“æœä¸­ï¼Œfilesort_priority_queue_optimizationè¿™ä¸ªéƒ¨åˆ†çš„chosen=trueï¼Œå°±è¡¨ç¤ºä½¿ç”¨äº†ä¼˜å…ˆé˜Ÿåˆ—æ’åºç®—æ³•ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸éœ€è¦ä¸´æ—¶æ–‡ä»¶ï¼Œå› æ­¤å¯¹åº”çš„number_of_tmp_filesæ˜¯0ã€‚</p><p>è¿™ä¸ªæµç¨‹ç»“æŸåï¼Œæˆ‘ä»¬æ„é€ çš„å †é‡Œé¢ï¼Œå°±æ˜¯è¿™ä¸ª10000è¡Œé‡Œé¢Rå€¼æœ€å°çš„ä¸‰è¡Œã€‚ç„¶åï¼Œä¾æ¬¡æŠŠå®ƒä»¬çš„rowidå–å‡ºæ¥ï¼Œå»ä¸´æ—¶è¡¨é‡Œé¢æ‹¿åˆ°wordå­—æ®µï¼Œè¿™ä¸ªè¿‡ç¨‹å°±è·Ÿä¸Šä¸€ç¯‡æ–‡ç« çš„rowidæ’åºçš„è¿‡ç¨‹ä¸€æ ·äº†ã€‚</p><p>æˆ‘ä»¬å†çœ‹ä¸€ä¸‹ä¸Šé¢ä¸€ç¯‡æ–‡ç« çš„SQLæŸ¥è¯¢è¯­å¥ï¼š</p><pre><code>select city,name,age from t where city='æ­å·' order by name limit 1000  ;\n</code></pre><p>ä½ å¯èƒ½ä¼šé—®ï¼Œè¿™é‡Œä¹Ÿç”¨åˆ°äº†limitï¼Œä¸ºä»€ä¹ˆæ²¡ç”¨ä¼˜å…ˆé˜Ÿåˆ—æ’åºç®—æ³•å‘¢ï¼ŸåŸå› æ˜¯ï¼Œè¿™æ¡SQLè¯­å¥æ˜¯limit 1000ï¼Œå¦‚æœä½¿ç”¨ä¼˜å…ˆé˜Ÿåˆ—ç®—æ³•çš„è¯ï¼Œéœ€è¦ç»´æŠ¤çš„å †çš„å¤§å°å°±æ˜¯1000è¡Œçš„(name,rowid)ï¼Œè¶…è¿‡äº†æˆ‘è®¾ç½®çš„sort_buffer_sizeå¤§å°ï¼Œæ‰€ä»¥åªèƒ½ä½¿ç”¨å½’å¹¶æ’åºç®—æ³•ã€‚</p><p>æ€»ä¹‹ï¼Œä¸è®ºæ˜¯ä½¿ç”¨å“ªç§ç±»å‹çš„ä¸´æ—¶è¡¨ï¼Œorder by rand()è¿™ç§å†™æ³•éƒ½ä¼šè®©è®¡ç®—è¿‡ç¨‹éå¸¸å¤æ‚ï¼Œéœ€è¦å¤§é‡çš„æ‰«æè¡Œæ•°ï¼Œå› æ­¤æ’åºè¿‡ç¨‹çš„èµ„æºæ¶ˆè€—ä¹Ÿä¼šå¾ˆå¤§ã€‚</p><p>å†å›åˆ°æˆ‘ä»¬æ–‡ç« å¼€å¤´çš„é—®é¢˜ï¼Œæ€ä¹ˆæ­£ç¡®åœ°éšæœºæ’åºå‘¢ï¼Ÿ</p><h1>éšæœºæ’åºæ–¹æ³•</h1><p>æˆ‘ä»¬å…ˆæŠŠé—®é¢˜ç®€åŒ–ä¸€ä¸‹ï¼Œå¦‚æœåªéšæœºé€‰æ‹©1ä¸ªwordå€¼ï¼Œå¯ä»¥æ€ä¹ˆåšå‘¢ï¼Ÿæ€è·¯ä¸Šæ˜¯è¿™æ ·çš„ï¼š</p><ol>\n<li>\n<p>å–å¾—è¿™ä¸ªè¡¨çš„ä¸»é”®idçš„æœ€å¤§å€¼Må’Œæœ€å°å€¼N;</p>\n</li>\n<li>\n<p>ç”¨éšæœºå‡½æ•°ç”Ÿæˆä¸€ä¸ªæœ€å¤§å€¼åˆ°æœ€å°å€¼ä¹‹é—´çš„æ•° X = (M-N)*rand() + N;</p>\n</li>\n<li>\n<p>å–ä¸å°äºXçš„ç¬¬ä¸€ä¸ªIDçš„è¡Œã€‚</p>\n</li>\n</ol><p>æˆ‘ä»¬æŠŠè¿™ä¸ªç®—æ³•ï¼Œæš‚æ—¶ç§°ä½œéšæœºç®—æ³•1ã€‚è¿™é‡Œï¼Œæˆ‘ç›´æ¥ç»™ä½ è´´ä¸€ä¸‹æ‰§è¡Œè¯­å¥çš„åºåˆ—:</p><pre><code>mysql&gt; select max(id),min(id) into @M,@N from t ;\nset @X= floor((@M-@N+1)*rand() + @N);\nselect * from t where id &gt;= @X limit 1;\n</code></pre><p>è¿™ä¸ªæ–¹æ³•æ•ˆç‡å¾ˆé«˜ï¼Œå› ä¸ºå–max(id)å’Œmin(id)éƒ½æ˜¯ä¸éœ€è¦æ‰«æç´¢å¼•çš„ï¼Œè€Œç¬¬ä¸‰æ­¥çš„selectä¹Ÿå¯ä»¥ç”¨ç´¢å¼•å¿«é€Ÿå®šä½ï¼Œå¯ä»¥è®¤ä¸ºå°±åªæ‰«æäº†3è¡Œã€‚ä½†å®é™…ä¸Šï¼Œè¿™ä¸ªç®—æ³•æœ¬èº«å¹¶ä¸ä¸¥æ ¼æ»¡è¶³é¢˜ç›®çš„éšæœºè¦æ±‚ï¼Œå› ä¸ºIDä¸­é—´å¯èƒ½æœ‰ç©ºæ´ï¼Œå› æ­¤é€‰æ‹©ä¸åŒè¡Œçš„æ¦‚ç‡ä¸ä¸€æ ·ï¼Œä¸æ˜¯çœŸæ­£çš„éšæœºã€‚</p><p>æ¯”å¦‚ä½ æœ‰4ä¸ªidï¼Œåˆ†åˆ«æ˜¯1ã€2ã€4ã€5ï¼Œå¦‚æœæŒ‰ç…§ä¸Šé¢çš„æ–¹æ³•ï¼Œé‚£ä¹ˆå–åˆ° id=4çš„è¿™ä¸€è¡Œçš„æ¦‚ç‡æ˜¯å–å¾—å…¶ä»–è¡Œæ¦‚ç‡çš„ä¸¤å€ã€‚</p><p>å¦‚æœè¿™å››è¡Œçš„idåˆ†åˆ«æ˜¯1ã€2ã€40000ã€40001å‘¢ï¼Ÿè¿™ä¸ªç®—æ³•åŸºæœ¬å°±èƒ½å½“bugæ¥çœ‹å¾…äº†ã€‚</p><p>æ‰€ä»¥ï¼Œä¸ºäº†å¾—åˆ°ä¸¥æ ¼éšæœºçš„ç»“æœï¼Œä½ å¯ä»¥ç”¨ä¸‹é¢è¿™ä¸ªæµç¨‹:</p><ol>\n<li>\n<p>å–å¾—æ•´ä¸ªè¡¨çš„è¡Œæ•°ï¼Œå¹¶è®°ä¸ºCã€‚</p>\n</li>\n<li>\n<p>å–å¾— Y = floor(C * rand())ã€‚ floorå‡½æ•°åœ¨è¿™é‡Œçš„ä½œç”¨ï¼Œå°±æ˜¯å–æ•´æ•°éƒ¨åˆ†ã€‚</p>\n</li>\n<li>\n<p>å†ç”¨limit Y,1 å–å¾—ä¸€è¡Œã€‚</p>\n</li>\n</ol><p>æˆ‘ä»¬æŠŠè¿™ä¸ªç®—æ³•ï¼Œç§°ä¸ºéšæœºç®—æ³•2ã€‚ä¸‹é¢è¿™æ®µä»£ç ï¼Œå°±æ˜¯ä¸Šé¢æµç¨‹çš„æ‰§è¡Œè¯­å¥çš„åºåˆ—ã€‚</p><pre><code>mysql&gt; select count(*) into @C from t;\nset @Y = floor(@C * rand());\nset @sql = concat(&quot;select * from t limit &quot;, @Y, &quot;,1&quot;);\nprepare stmt from @sql;\nexecute stmt;\nDEALLOCATE prepare stmt;\n</code></pre><p>ç”±äºlimit åé¢çš„å‚æ•°ä¸èƒ½ç›´æ¥è·Ÿå˜é‡ï¼Œæ‰€ä»¥æˆ‘åœ¨ä¸Šé¢çš„ä»£ç ä¸­ä½¿ç”¨äº†prepare+executeçš„æ–¹æ³•ã€‚ä½ ä¹Ÿå¯ä»¥æŠŠæ‹¼æ¥SQLè¯­å¥çš„æ–¹æ³•å†™åœ¨åº”ç”¨ç¨‹åºä¸­ï¼Œä¼šæ›´ç®€å•äº›ã€‚</p><p>è¿™ä¸ªéšæœºç®—æ³•2ï¼Œè§£å†³äº†ç®—æ³•1é‡Œé¢æ˜æ˜¾çš„æ¦‚ç‡ä¸å‡åŒ€é—®é¢˜ã€‚</p><p>MySQLå¤„ç†limit Y,1 çš„åšæ³•å°±æ˜¯æŒ‰é¡ºåºä¸€ä¸ªä¸€ä¸ªåœ°è¯»å‡ºæ¥ï¼Œä¸¢æ‰å‰Yä¸ªï¼Œç„¶åæŠŠä¸‹ä¸€ä¸ªè®°å½•ä½œä¸ºè¿”å›ç»“æœï¼Œå› æ­¤è¿™ä¸€æ­¥éœ€è¦æ‰«æY+1è¡Œã€‚å†åŠ ä¸Šï¼Œç¬¬ä¸€æ­¥æ‰«æçš„Cè¡Œï¼Œæ€»å…±éœ€è¦æ‰«æC+Y+1è¡Œï¼Œæ‰§è¡Œä»£ä»·æ¯”éšæœºç®—æ³•1çš„ä»£ä»·è¦é«˜ã€‚</p><p>å½“ç„¶ï¼Œéšæœºç®—æ³•2è·Ÿç›´æ¥order by rand()æ¯”èµ·æ¥ï¼Œæ‰§è¡Œä»£ä»·è¿˜æ˜¯å°å¾ˆå¤šçš„ã€‚</p><p>ä½ å¯èƒ½é—®äº†ï¼Œå¦‚æœæŒ‰ç…§è¿™ä¸ªè¡¨æœ‰10000è¡Œæ¥è®¡ç®—çš„è¯ï¼ŒC=10000ï¼Œè¦æ˜¯éšæœºåˆ°æ¯”è¾ƒå¤§çš„Yå€¼ï¼Œé‚£æ‰«æè¡Œæ•°ä¹Ÿè·Ÿ20000å·®ä¸å¤šäº†ï¼Œæ¥è¿‘order by rand()çš„æ‰«æè¡Œæ•°ï¼Œä¸ºä»€ä¹ˆè¯´éšæœºç®—æ³•2çš„ä»£ä»·è¦å°å¾ˆå¤šå‘¢ï¼Ÿæˆ‘å°±æŠŠè¿™ä¸ªé—®é¢˜ç•™ç»™ä½ å»è¯¾åæ€è€ƒå§ã€‚</p><p>ç°åœ¨ï¼Œæˆ‘ä»¬å†çœ‹çœ‹ï¼Œå¦‚æœæˆ‘ä»¬æŒ‰ç…§éšæœºç®—æ³•2çš„æ€è·¯ï¼Œè¦éšæœºå–3ä¸ªwordå€¼å‘¢ï¼Ÿä½ å¯ä»¥è¿™ä¹ˆåšï¼š</p><ol>\n<li>\n<p>å–å¾—æ•´ä¸ªè¡¨çš„è¡Œæ•°ï¼Œè®°ä¸ºCï¼›</p>\n</li>\n<li>\n<p>æ ¹æ®ç›¸åŒçš„éšæœºæ–¹æ³•å¾—åˆ°Y1ã€Y2ã€Y3ï¼›</p>\n</li>\n<li>\n<p>å†æ‰§è¡Œä¸‰ä¸ªlimit Y, 1è¯­å¥å¾—åˆ°ä¸‰è¡Œæ•°æ®ã€‚</p>\n</li>\n</ol><p>æˆ‘ä»¬æŠŠè¿™ä¸ªç®—æ³•ï¼Œç§°ä½œéšæœºç®—æ³•3ã€‚ä¸‹é¢è¿™æ®µä»£ç ï¼Œå°±æ˜¯ä¸Šé¢æµç¨‹çš„æ‰§è¡Œè¯­å¥çš„åºåˆ—ã€‚</p><pre><code>mysql&gt; select count(*) into @C from t;\nset @Y1 = floor(@C * rand());\nset @Y2 = floor(@C * rand());\nset @Y3 = floor(@C * rand());\nselect * from t limit @Y1ï¼Œ1ï¼› //åœ¨åº”ç”¨ä»£ç é‡Œé¢å–Y1ã€Y2ã€Y3å€¼ï¼Œæ‹¼å‡ºSQLåæ‰§è¡Œ\nselect * from t limit @Y2ï¼Œ1ï¼›\nselect * from t limit @Y3ï¼Œ1ï¼›\n</code></pre><h1>å°ç»“</h1><p>ä»Šå¤©è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘æ˜¯å€Ÿç€éšæœºæ’åºçš„éœ€æ±‚ï¼Œè·Ÿä½ ä»‹ç»äº†MySQLå¯¹ä¸´æ—¶è¡¨æ’åºçš„æ‰§è¡Œè¿‡ç¨‹ã€‚</p><p>å¦‚æœä½ ç›´æ¥ä½¿ç”¨order by rand()ï¼Œè¿™ä¸ªè¯­å¥éœ€è¦Using temporary å’Œ Using filesortï¼ŒæŸ¥è¯¢çš„æ‰§è¡Œä»£ä»·å¾€å¾€æ˜¯æ¯”è¾ƒå¤§çš„ã€‚æ‰€ä»¥ï¼Œåœ¨è®¾è®¡çš„æ—¶å€™ä½ è¦å°½é‡é¿å¼€è¿™ç§å†™æ³•ã€‚</p><p>ä»Šå¤©çš„ä¾‹å­é‡Œé¢ï¼Œæˆ‘ä»¬ä¸æ˜¯ä»…ä»…åœ¨æ•°æ®åº“å†…éƒ¨è§£å†³é—®é¢˜ï¼Œè¿˜ä¼šè®©åº”ç”¨ä»£ç é…åˆæ‹¼æ¥SQLè¯­å¥ã€‚åœ¨å®é™…åº”ç”¨çš„è¿‡ç¨‹ä¸­ï¼Œæ¯”è¾ƒè§„èŒƒçš„ç”¨æ³•å°±æ˜¯ï¼šå°½é‡å°†ä¸šåŠ¡é€»è¾‘å†™åœ¨ä¸šåŠ¡ä»£ç ä¸­ï¼Œè®©æ•°æ®åº“åªåšâ€œè¯»å†™æ•°æ®â€çš„äº‹æƒ…ã€‚å› æ­¤ï¼Œè¿™ç±»æ–¹æ³•çš„åº”ç”¨è¿˜æ˜¯æ¯”è¾ƒå¹¿æ³›çš„ã€‚</p><p>æœ€åï¼Œæˆ‘ç»™ä½ ç•™ä¸‹ä¸€ä¸ªæ€è€ƒé¢˜å§ã€‚</p><p>ä¸Šé¢çš„éšæœºç®—æ³•3çš„æ€»æ‰«æè¡Œæ•°æ˜¯ C+(Y1+1)+(Y2+1)+(Y3+1)ï¼Œå®é™…ä¸Šå®ƒè¿˜æ˜¯å¯ä»¥ç»§ç»­ä¼˜åŒ–ï¼Œæ¥è¿›ä¸€æ­¥å‡å°‘æ‰«æè¡Œæ•°çš„ã€‚</p><p>æˆ‘çš„é—®é¢˜æ˜¯ï¼Œå¦‚æœä½ æ˜¯è¿™ä¸ªéœ€æ±‚çš„å¼€å‘äººå‘˜ï¼Œä½ ä¼šæ€ä¹ˆåšï¼Œæ¥å‡å°‘æ‰«æè¡Œæ•°å‘¢ï¼Ÿè¯´è¯´ä½ çš„æ–¹æ¡ˆï¼Œå¹¶è¯´æ˜ä½ çš„æ–¹æ¡ˆéœ€è¦çš„æ‰«æè¡Œæ•°ã€‚</p><p>ä½ å¯ä»¥æŠŠä½ çš„è®¾è®¡å’Œç»“è®ºå†™åœ¨ç•™è¨€åŒºé‡Œï¼Œæˆ‘ä¼šåœ¨ä¸‹ä¸€ç¯‡æ–‡ç« çš„æœ«å°¾å’Œä½ è®¨è®ºè¿™ä¸ªé—®é¢˜ã€‚æ„Ÿè°¢ä½ çš„æ”¶å¬ï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ä¸€èµ·é˜…è¯»ã€‚</p><h1>ä¸ŠæœŸé—®é¢˜æ—¶é—´</h1><p>æˆ‘åœ¨ä¸Šä¸€ç¯‡æ–‡ç« æœ€åç•™ç»™ä½ çš„é—®é¢˜æ˜¯ï¼Œselect * from t where city in (â€œæ­å·â€,\" è‹å· \") order by name limit 100;è¿™ä¸ªSQLè¯­å¥æ˜¯å¦éœ€è¦æ’åºï¼Ÿæœ‰ä»€ä¹ˆæ–¹æ¡ˆå¯ä»¥é¿å…æ’åºï¼Ÿ</p><p>è™½ç„¶æœ‰(city,name)è”åˆç´¢å¼•ï¼Œå¯¹äºå•ä¸ªcityå†…éƒ¨ï¼Œnameæ˜¯é€’å¢çš„ã€‚ä½†æ˜¯ç”±äºè¿™æ¡SQLè¯­å¥ä¸æ˜¯è¦å•ç‹¬åœ°æŸ¥ä¸€ä¸ªcityçš„å€¼ï¼Œè€Œæ˜¯åŒæ—¶æŸ¥äº†\"æ­å·\"å’Œ\" è‹å· \"ä¸¤ä¸ªåŸå¸‚ï¼Œå› æ­¤æ‰€æœ‰æ»¡è¶³æ¡ä»¶çš„nameå°±ä¸æ˜¯é€’å¢çš„äº†ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™æ¡SQLè¯­å¥éœ€è¦æ’åºã€‚</p><p>é‚£æ€ä¹ˆé¿å…æ’åºå‘¢ï¼Ÿ</p><p>è¿™é‡Œï¼Œæˆ‘ä»¬è¦ç”¨åˆ°(city,name)è”åˆç´¢å¼•çš„ç‰¹æ€§ï¼ŒæŠŠè¿™ä¸€æ¡è¯­å¥æ‹†æˆä¸¤æ¡è¯­å¥ï¼Œæ‰§è¡Œæµç¨‹å¦‚ä¸‹ï¼š</p><ol>\n<li>\n<p>æ‰§è¡Œselect * from t where city=â€œæ­å·â€ order by name limit 100; è¿™ä¸ªè¯­å¥æ˜¯ä¸éœ€è¦æ’åºçš„ï¼Œå®¢æˆ·ç«¯ç”¨ä¸€ä¸ªé•¿åº¦ä¸º100çš„å†…å­˜æ•°ç»„Aä¿å­˜ç»“æœã€‚</p>\n</li>\n<li>\n<p>æ‰§è¡Œselect * from t where city=â€œè‹å·â€ order by name limit 100; ç”¨ç›¸åŒçš„æ–¹æ³•ï¼Œå‡è®¾ç»“æœè¢«å­˜è¿›äº†å†…å­˜æ•°ç»„Bã€‚</p>\n</li>\n<li>\n<p>ç°åœ¨Aå’ŒBæ˜¯ä¸¤ä¸ªæœ‰åºæ•°ç»„ï¼Œç„¶åä½ å¯ä»¥ç”¨å½’å¹¶æ’åºçš„æ€æƒ³ï¼Œå¾—åˆ°nameæœ€å°çš„å‰100å€¼ï¼Œå°±æ˜¯æˆ‘ä»¬éœ€è¦çš„ç»“æœäº†ã€‚</p>\n</li>\n</ol><p>å¦‚æœæŠŠè¿™æ¡SQLè¯­å¥é‡Œâ€œlimit 100â€æ”¹æˆâ€œlimit 10000,100â€çš„è¯ï¼Œå¤„ç†æ–¹å¼å…¶å®ä¹Ÿå·®ä¸å¤šï¼Œå³ï¼šè¦æŠŠä¸Šé¢çš„ä¸¤æ¡è¯­å¥æ”¹æˆå†™ï¼š</p><pre><code>select * from t where city=&quot;æ­å·&quot; order by name limit 10100; \n</code></pre><p>å’Œ</p><pre><code> select * from t where city=&quot;è‹å·&quot; order by name limit 10100ã€‚\n</code></pre><p>è¿™æ—¶å€™æ•°æ®é‡è¾ƒå¤§ï¼Œå¯ä»¥åŒæ—¶èµ·ä¸¤ä¸ªè¿æ¥ä¸€è¡Œè¡Œè¯»ç»“æœï¼Œç”¨å½’å¹¶æ’åºç®—æ³•æ‹¿åˆ°è¿™ä¸¤ä¸ªç»“æœé›†é‡Œï¼ŒæŒ‰é¡ºåºå–ç¬¬10001~10100çš„nameå€¼ï¼Œå°±æ˜¯éœ€è¦çš„ç»“æœäº†ã€‚</p><p>å½“ç„¶è¿™ä¸ªæ–¹æ¡ˆæœ‰ä¸€ä¸ªæ˜æ˜¾çš„æŸå¤±ï¼Œå°±æ˜¯ä»æ•°æ®åº“è¿”å›ç»™å®¢æˆ·ç«¯çš„æ•°æ®é‡å˜å¤§äº†ã€‚</p><p>æ‰€ä»¥ï¼Œå¦‚æœæ•°æ®çš„å•è¡Œæ¯”è¾ƒå¤§çš„è¯ï¼Œå¯ä»¥è€ƒè™‘æŠŠè¿™ä¸¤æ¡SQLè¯­å¥æ”¹æˆä¸‹é¢è¿™ç§å†™æ³•ï¼š</p><pre><code>select id,name from t where city=&quot;æ­å·&quot; order by name limit 10100; \n</code></pre><p>å’Œ</p><pre><code>select id,name from t where city=&quot;è‹å·&quot; order by name limit 10100ã€‚\n</code></pre><p>ç„¶åï¼Œå†ç”¨å½’å¹¶æ’åºçš„æ–¹æ³•å–å¾—æŒ‰nameé¡ºåºç¬¬10001~10100çš„nameã€idçš„å€¼ï¼Œç„¶åæ‹¿ç€è¿™100ä¸ªidåˆ°æ•°æ®åº“ä¸­å»æŸ¥å‡ºæ‰€æœ‰è®°å½•ã€‚</p><p>ä¸Šé¢è¿™äº›æ–¹æ³•ï¼Œéœ€è¦ä½ æ ¹æ®æ€§èƒ½éœ€æ±‚å’Œå¼€å‘çš„å¤æ‚åº¦åšå‡ºæƒè¡¡ã€‚</p><p>è¯„è®ºåŒºç•™è¨€ç‚¹èµæ¿ï¼š</p><blockquote>\n<p>è¯„è®ºåŒºå¾ˆå¤šåŒå­¦éƒ½æåˆ°ä¸èƒ½æ’åºï¼Œè¯´æ˜å„ä½å¯¹ç´¢å¼•çš„å­˜å‚¨éƒ½ç†è§£å¯¹äº†ã€‚<br>\n@å³° åŒå­¦æåˆ°äº†å½’å¹¶æ’åºï¼Œæ˜¯æˆ‘ä»¬è¿™ä¸ªé—®é¢˜è§£æ³•çš„æ ¸å¿ƒæ€æƒ³ï¼›<br>\n@è€æ¨åŒå¿— çš„å›ç­”ä¸­æåˆ°äº†â€œä»ä¸šåŠ¡ä¸Šç æ‰åŠŸèƒ½â€ï¼Œè¿™ä¸ªä¹Ÿç¡®å®æ˜¯åœ¨ä¸šåŠ¡è®¾è®¡ä¸­å¯ä»¥è€ƒè™‘çš„ä¸€ä¸ªæ–¹å‘ï¼›<br>\n@æŸã€äºº å¸®å¿™å›ç­”äº†@å‘æ¡æ©™å­åŒå­¦çš„é—®é¢˜ï¼Œå°¤å…¶æ˜¯å¯¹é—®é¢˜ä¸€çš„å›ç­”ï¼Œéå¸¸ç²¾å½©ã€‚</p>\n</blockquote>","neighbors":{"left":{"article_title":"16 | â€œorder byâ€æ˜¯æ€ä¹ˆå·¥ä½œçš„ï¼Ÿ","id":73479},"right":{"article_title":"18 | ä¸ºä»€ä¹ˆè¿™äº›SQLè¯­å¥é€»è¾‘ç›¸åŒï¼Œæ€§èƒ½å´å·®å¼‚å·¨å¤§ï¼Ÿ","id":74059}},"comments":[{"had_liked":false,"id":52283,"user_name":"è€æ¨åŒå¿—","can_delete":false,"product_type":"c1","uid":1246199,"ip_address":"","ucode":"3F334F0CFD3DE6","user_header":"https://static001.geekbang.org/account/avatar/00/13/03/f7/3a493bec.jpg","comment_is_top":true,"comment_ctime":1545358176,"is_pvip":false,"replies":[{"id":"18995","content":"é‡æ–°æ•´ç†è¡¨è¿™ä¸ªæ€è·¯å¾ˆèµğŸ‘ğŸ¿<br><br>çœ‹å¾—å‡ºä½ æ˜¯ä¸šåŠ¡ç»éªŒå¾ˆä¸°å¯Œå•Šï¼Œè¿™å‡ æ¬¡é—®é¢˜ï¼Œå¯¹åº•å±‚å®ç°å’Œä¸šåŠ¡åŠŸèƒ½çš„å¹³è¡¡ï¼Œè€ƒè™‘ç‚¹å¾ˆä¸é”™","user_name":"ä½œè€…å›å¤","comment_id":52283,"uid":"1264162","ip_address":"","utype":1,"ctime":1545359994,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":7,"race_medal":0,"score":"9.2233731851563991e+18","product_id":100020801,"comment_content":"å¯¹åº”å•è¯è¿™ç§æ€»é‡ä¸æ˜¯å¾ˆå¤šçš„æ•°æ®ï¼Œç¬¬ä¸€æ„Ÿè§‰åº”è¯¥è£…jdkç¼“å­˜æˆ–è€…redisç¼“å­˜ã€‚ç”±äºéœ€è¦éšæœºè®¿é—®ï¼Œæ•°ç»„æ¯”è¾ƒå¥½ã€‚å‡å¦‚ä¸€ä¸ªå•è¯å¹³å‡10ä¸ªå­—èŠ‚ï¼Œ10*10000ï¼Œä¸åˆ°1Må°±è£…ä¸‹äº†ã€‚<br>å¦‚æœä¸€å®šè¦ç”¨æ•°æ®åº“æ¥åšï¼Œè€å¸ˆçš„æ–¹æ¡ˆ1æ¯”è¾ƒå¥½ï¼Œç©ºæ´çš„é—®é¢˜ï¼Œå¦‚æœå•è¯åº“ä¸å˜ï¼Œå¯ä»¥åœ¨ä¸Šçº¿å‰æ•´ç†æ•°æ®ï¼ŒæŠŠç©ºæ´å¤„ç†è°ƒã€‚æ¯”å¦‚ï¼šåŸæ¥å•è¯å­˜åœ¨Aè¡¨ï¼Œæ–°å»ºBè¡¨  ï¼Œæ‰§è¡Œ insert into B(word) select word from A.   Bçš„idæ˜¯è‡ªå¢çš„ï¼Œå°±ä¼šç”Ÿæˆè¿ç»­çš„ä¸»é”®ã€‚å½“ç„¶å¦‚æœAè¡¨å†™æ¯”è¾ƒé¢‘ç¹ï¼Œä¸”æ•°æ®é‡è¾ƒå¤§ï¼Œä¸šåŠ¡ä¸Šç¦ç”¨ è¿™ç§å†™æ³•ï¼ŒRRçš„éš”ç¦»çº§åˆ«ä¼šé”Aè¡¨ <br>","like_count":268,"discussions":[{"author":{"id":1254645,"avatar":"https://static001.geekbang.org/account/avatar/00/13/24/f5/64ca8ddd.jpg","nickname":"å‡Œè½©","note":"","ucode":"1BC5A205F3B9C1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":159643,"discussion_content":"å¦‚æœç”¨æ•°æ®åº“ä¸”å­˜åœ¨å¤§é‡å¢åˆ çš„æƒ…å†µä¸‹ï¼Œä¸€èˆ¬ä¸šåŠ¡ä¸Šä¼šè¦æ±‚é€»è¾‘åˆ é™¤ï¼Œè€Œä¸ä¼šçœŸæ­£çš„åˆ é™¤é‚£ä¸€è¡Œï¼Œæ‰€ä»¥idåº”è¯¥å¯ä»¥ä¿æŒè¿ç»­æ€§ï¼Œè¿™æ ·çš„è¯ï¼Œç”¨æ–¹æ¡ˆ1,æ¯æ¬¡å–å¤šä¸ªéšæœºidï¼Œselect id,word\n from t where id in (92,94,95,100,101,109) and deleted = 0;å¦‚æœç»“æœä¸è¶³3ä¸ªï¼Œè¿‡æ»¤æ‰è¿™äº›idå†å–ç¬¬äºŒæ¬¡ç›´åˆ°æ»¡è¶³3ä¸ªä¸ºæ­¢ã€‚","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1580719954,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1589055,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKKKdCyib4iblXC6JIH7HWDfIFVweTb7SgEOuRjquic3GiaiaGInFSiaU8w2y2bjvZjgiaA3IEQuyibXTaeHQ/132","nickname":"10xiaohu","note":"","ucode":"CAB39DBB93E608","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1254645,"avatar":"https://static001.geekbang.org/account/avatar/00/13/24/f5/64ca8ddd.jpg","nickname":"å‡Œè½©","note":"","ucode":"1BC5A205F3B9C1","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":351225,"discussion_content":"è¿™æ ·ä¼šä¸ä¼šéº»çƒ¦äº†ï¼Ÿè¦é€’å½’ï¼Œè¿˜è¦æ’é™¤ä¹‹å‰é€‰ä¸­çš„ï¼Œå½“ç„¶ä¸€èˆ¬ç¬¬äºŒæ¬¡å°±å¯ä»¥äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614180429,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":159643,"ip_address":""},"score":351225,"extra":""}]},{"author":{"id":1019332,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8d/c4/6f97daea.jpg","nickname":"é•¿æœŸè§„åˆ’","note":"","ucode":"5EF65E9115834B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":53015,"discussion_content":"ç”¨ç¼“å­˜æ¯”è¾ƒå¥½ğŸ‘","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1574124180,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2350043,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/sFkJYPdIIjHfxgCxAh1D4Pyk1jAueicu7egY1PUvR8egs12gAXxmO51YT6Bk7NianYRyMRPTpd3kKWXvZ8TEkRyw/132","nickname":"Geek_7794e2","note":"","ucode":"2F749554FEA20D","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":539503,"discussion_content":"ä¸ºä»€ä¹ˆè¿™ä¸ªåœ°æ–¹ä¼šé”è¡¨","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1639730599,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":2665912,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaELkIkwnBrhKPibPZiaJD7LYXksCJ00rsgibk4M0iaUJke4dWBicCs8zOR5dzQqb82alK7HVLqALrTPx3Yg/132","nickname":"Geek_993c4a","note":"","ucode":"A93C79B3502929","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":2350043,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/sFkJYPdIIjHfxgCxAh1D4Pyk1jAueicu7egY1PUvR8egs12gAXxmO51YT6Bk7NianYRyMRPTpd3kKWXvZ8TEkRyw/132","nickname":"Geek_7794e2","note":"","ucode":"2F749554FEA20D","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":555312,"discussion_content":"åŒé—®","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1646843757,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":539503,"ip_address":""},"score":555312,"extra":""},{"author":{"id":2389270,"avatar":"https://static001.geekbang.org/account/avatar/00/24/75/16/6e28bf17.jpg","nickname":"åˆæ™¨","note":"","ucode":"C5D95D13E49127","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2350043,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/sFkJYPdIIjHfxgCxAh1D4Pyk1jAueicu7egY1PUvR8egs12gAXxmO51YT6Bk7NianYRyMRPTpd3kKWXvZ8TEkRyw/132","nickname":"Geek_7794e2","note":"","ucode":"2F749554FEA20D","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":588987,"discussion_content":"RRéš”ç¦»çº§åˆ«ä¸‹ï¼Œinsertä¼šåŠ é—´éš™é”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1664287988,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":539503,"ip_address":"é™•è¥¿"},"score":588987,"extra":""}]},{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":433819,"discussion_content":"é‡æ–°æ•´ç†è¡¨è¿™ä¸ªæ€è·¯å¾ˆèµğŸ‘ğŸ¿\n\nçœ‹å¾—å‡ºä½ æ˜¯ä¸šåŠ¡ç»éªŒå¾ˆä¸°å¯Œå•Šï¼Œè¿™å‡ æ¬¡é—®é¢˜ï¼Œå¯¹åº•å±‚å®ç°å’Œä¸šåŠ¡åŠŸèƒ½çš„å¹³è¡¡ï¼Œè€ƒè™‘ç‚¹å¾ˆä¸é”™","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1545359994,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":52242,"user_name":"é›ªä¸­é¼ ","can_delete":false,"product_type":"c1","uid":1082083,"ip_address":"","ucode":"EBEF2C2422BC93","user_header":"https://static001.geekbang.org/account/avatar/00/10/82/e3/d9285284.jpg","comment_is_top":true,"comment_ctime":1545353987,"is_pvip":false,"replies":[{"id":"19001","content":"è¿™ä¸ªä¹Ÿæ˜¯ä¸ªå¥½æ–¹æ³•ï¼Œå°±æ˜¯ç¡®ä¿è¿ç»­ï¼Œå¯ä»¥å¿«é€Ÿçš„å¾—åˆ°Cå’Œå‡ ä¸ªåç§»é‡","user_name":"ä½œè€…å›å¤","comment_id":52242,"uid":"1264162","ip_address":"","utype":1,"ctime":1545361691,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":3,"race_medal":0,"score":"9.223372158659199e+18","product_id":100020801,"comment_content":"å¦‚æœæŒ‰ç…§ä¸šåŠ¡éœ€æ±‚ï¼Œéšæœºå–ä¸‰ä¸ªï¼Œæ•°æ®åº“è¿˜åœ¨è®¾è®¡é˜¶æ®µ,å¯ä»¥å¢åŠ ä¸€ä¸ªä¸»é”®å­—æ®µ,ç”¨æ¥è®°å½•æ¯è¡Œè®°å½•çš„rowidï¼Œè¿™æ ·ä¸€ä¸‡è¡Œï¼Œé‚£å°±æ˜¯è¿ç»­çš„ä¸€ä¸‡ï¼Œç„¶åéšæœºï¼Œç”¨è¯¥éšæœºrowidå›è¡¨æŸ¥è¯¢è¯¥è¡Œè®°å½•","like_count":29,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":433800,"discussion_content":"è¿™ä¸ªä¹Ÿæ˜¯ä¸ªå¥½æ–¹æ³•ï¼Œå°±æ˜¯ç¡®ä¿è¿ç»­ï¼Œå¯ä»¥å¿«é€Ÿçš„å¾—åˆ°Cå’Œå‡ ä¸ªåç§»é‡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545361691,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1937062,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/8e/a6/c3286b61.jpg","nickname":"Javaå’å¢™å·¥ç¨‹å¸ˆ","note":"","ucode":"E76AE44A9C76AE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301419,"discussion_content":"åˆ é™¤ç¬¬ä¸€æ¡æ•°æ®ï¼Œå…¨è¡¨éƒ½è¦è·Ÿç€å˜åŠ¨è¿™ä¸ªå­—æ®µå—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598520844,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1082083,"avatar":"https://static001.geekbang.org/account/avatar/00/10/82/e3/d9285284.jpg","nickname":"é›ªä¸­é¼ ","note":"","ucode":"EBEF2C2422BC93","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1937062,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/8e/a6/c3286b61.jpg","nickname":"Javaå’å¢™å·¥ç¨‹å¸ˆ","note":"","ucode":"E76AE44A9C76AE","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":305904,"discussion_content":"è¿™é‡Œä¸è€ƒè™‘åˆ é™¤çš„é—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600127147,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":301419,"ip_address":""},"score":305904,"extra":""}]}]},{"had_liked":false,"id":52456,"user_name":"HuaMax","can_delete":false,"product_type":"c1","uid":1118488,"ip_address":"","ucode":"2E78DE1AF098AF","user_header":"https://static001.geekbang.org/account/avatar/00/11/11/18/8cee35f9.jpg","comment_is_top":false,"comment_ctime":1545385631,"is_pvip":false,"replies":[{"id":"19104","content":"ğŸ‘ğŸ¿","user_name":"ä½œè€…å›å¤","comment_id":52456,"uid":"1264162","ip_address":"","utype":1,"ctime":1545398151,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":8,"race_medal":0,"score":"602840807071","product_id":100020801,"comment_content":"å‡è®¾Y1ï¼ŒY2ï¼ŒY3æ˜¯ç”±å°åˆ°å¤§çš„ä¸‰ä¸ªæ•°ï¼Œåˆ™å¯ä»¥ä¼˜åŒ–æˆè¿™æ ·ï¼Œè¿™æ ·æ‰«æè¡Œæ•°ä¸ºY3<br>id1 = select * from t limit @Y1ï¼Œ1ï¼›<br>id2= select * from t where id &gt; id1 limit @Y2-@Y1ï¼Œ1ï¼›<br>select * from t where id &gt; id2 limit @Y3 - @Y2ï¼Œ1ï¼›","like_count":141,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":433883,"discussion_content":"ğŸ‘ğŸ¿","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545398151,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1082785,"avatar":"https://static001.geekbang.org/account/avatar/00/10/85/a1/2442332c.jpg","nickname":"éƒ­ä¿Šæ°","note":"","ucode":"D328E5738A4413","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":1643,"discussion_content":"C+Y3","likes_number":6,"is_delete":false,"is_hidden":false,"ctime":1562754850,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2690457,"avatar":"https://static001.geekbang.org/account/avatar/00/29/0d/99/448d0e2b.jpg","nickname":"æ®‹éœœæ™“æœˆ","note":"","ucode":"A615784C1EA7F1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":559475,"discussion_content":"â€œå¦‚ä½•ä¼˜åŒ–å¤§è¡¨åˆ†é¡µæŸ¥è¯¢â€çš„ç­”æ³•ä¹‹ä¸€","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1648791198,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1363822,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/uktgj5R0p78c67oLib8EuRMRCgP8yjxnZ1ibVOuibhRZvjJpKSJNaTl0UlEfGyiaaiaGyPmqpGYpibTt0QopX1qtWfQQ/132","nickname":"æ¨å¤§å°æœ€å—¨çš®","note":"","ucode":"7DFACF1414AE16","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":531915,"discussion_content":"6 æœ¬è´¨æ˜¯ç”¨åˆ©ç”¨ä¸»é”®ç´¢å¼•é¿å…é‡å¤çš„å…¨è¡¨æ‰«æ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1637467544,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2254917,"avatar":"https://static001.geekbang.org/account/avatar/00/22/68/45/ddf89612.jpg","nickname":"bestgopher","note":"","ucode":"D89735C8CA9C6E","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":551139,"discussion_content":"ç‰›é€¼å•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644908547,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1970443,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIx1V1QAxC4NHaxYZGyuibBN8lcURJWc5nrnO4yic1kxnDemYV2FJGialf47kYX9qtDnZZOfe1SJeLicg/132","nickname":"lleft","note":"","ucode":"D573EB509455AE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":373338,"discussion_content":"è·å–ä¸‰ä¸ªéšæœºæ•°å°±æ˜¯3Cï¼Œè·å–ä¸‰ä¸ªéšæœºwordæ‰«æY3+3è¡Œï¼Œæ€»å…±æ‰«æäº†3C+Y3+3è¡Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620701587,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1809799,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJNxMqDoNODfL1aFpkJboxlZPyFANAt9ovzksYtMUIGo3KbHr4Qy8j20Txrpiau6iaJGgAr1nCfpy9w/132","nickname":"çˆ±å­¦ä¹ çš„è€å´","note":"","ucode":"E515F50E7A8A68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1970443,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIx1V1QAxC4NHaxYZGyuibBN8lcURJWc5nrnO4yic1kxnDemYV2FJGialf47kYX9qtDnZZOfe1SJeLicg/132","nickname":"lleft","note":"","ucode":"D573EB509455AE","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":380973,"discussion_content":"è·å–éšæœºæ•°æ˜¯å‡½æ•°æ“ä½œï¼Œä¸ç”¨æ‰«è¡¨ï¼Œåº”è¯¥æ˜¯count(*) æ—¶æ‰«äº†Cï¼Œæ€»å…±æ˜¯C+Y3 + 3","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1624848677,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":373338,"ip_address":""},"score":380973,"extra":""}]},{"author":{"id":1475528,"avatar":"https://static001.geekbang.org/account/avatar/00/16/83/c8/5ce842f6.jpg","nickname":"maybe","note":"","ucode":"93D160F617E750","race_medal":4,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":372412,"discussion_content":"æˆ‘ä¹Ÿæ˜¯æƒ³åˆ°è¿™ä¸ªï¼Œåˆ†é¡µæŸ¥è¯¢ä¼˜åŒ–æ–¹å¼\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620311400,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":52337,"user_name":"å²æœˆå®‰ç„¶","can_delete":false,"product_type":"c1","uid":1258557,"ip_address":"","ucode":"4538C24B67B513","user_header":"https://static001.geekbang.org/account/avatar/00/13/34/3d/51762e76.jpg","comment_is_top":false,"comment_ctime":1545363943,"is_pvip":false,"replies":[{"id":"19020","content":"å¯¹çš„ï¼Œ<br><br>ä½ æ˜¯ç¬¬ä¸€ä¸ªå›ç­”æ­£æ–‡ä¸­é—´é—®é¢˜çš„ğŸ˜„ğŸ‘ğŸ¿","user_name":"ä½œè€…å›å¤","comment_id":52337,"uid":"1264162","ip_address":"","utype":1,"ctime":1545364645,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":4,"race_medal":0,"score":"400977322471","product_id":100020801,"comment_content":"ä¸ºä»€ä¹ˆéšæœºç®—æ³•2æ¯”order by rand()çš„ä»£ä»·å°å¾ˆå¤šï¼Ÿ<br>å› ä¸ºéšæœºç®—æ³•2è¿›è¡Œlimitè·å–æ•°æ®çš„æ—¶å€™æ˜¯æ ¹æ®ä¸»é”®æ’åºè·å–çš„ï¼Œä¸»é”®å¤©ç„¶ç´¢å¼•æ’åºã€‚è·å–åˆ°ç¬¬9999æ¡çš„æ•°æ®ä¹Ÿè¿œæ¯”order by rand()æ–¹æ³•çš„ç»„æˆä¸´æ—¶è¡¨Rå­—æ®µæ’åºå†è·å–rowidä»£ä»·å°çš„å¤šã€‚","like_count":94,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":433838,"discussion_content":"å¯¹çš„ï¼Œ\n\nä½ æ˜¯ç¬¬ä¸€ä¸ªå›ç­”æ­£æ–‡ä¸­é—´é—®é¢˜çš„ğŸ˜„ğŸ‘ğŸ¿","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545364645,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1937062,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/8e/a6/c3286b61.jpg","nickname":"Javaå’å¢™å·¥ç¨‹å¸ˆ","note":"","ucode":"E76AE44A9C76AE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301420,"discussion_content":"åªæ‰«æï¼Œä¸å»ºç«‹ä¸´æ—¶è¡¨ä¸æ’åºï¼Œä»£ä»·å°å¤ªå¤šäº†","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1598521023,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":3004698,"avatar":"https://static001.geekbang.org/account/avatar/00/2d/d9/1a/f5bb1a23.jpg","nickname":"LL","note":"","ucode":"1E498475B2D9EC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":576554,"discussion_content":"mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655648993,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1475528,"avatar":"https://static001.geekbang.org/account/avatar/00/16/83/c8/5ce842f6.jpg","nickname":"maybe","note":"","ucode":"93D160F617E750","race_medal":4,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":372414,"discussion_content":"èµåŒ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620311849,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":52197,"user_name":"å´å®‡æ™¨","can_delete":false,"product_type":"c1","uid":1199968,"ip_address":"","ucode":"F8F45B7067DF6D","user_header":"https://static001.geekbang.org/account/avatar/00/12/4f/60/049a20e9.jpg","comment_is_top":false,"comment_ctime":1545350427,"is_pvip":false,"replies":[{"id":"19007","content":"æŠ“ä½äº†å…³é”®ç‚¹ğŸ‘ğŸ¿","user_name":"ä½œè€…å›å¤","comment_id":52197,"uid":"1264162","ip_address":"","utype":1,"ctime":1545362115,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":4,"race_medal":0,"score":"383797439771","product_id":100020801,"comment_content":"æˆ‘è§‰å¾—å¯ä»¥æŒ‰Yæ’ä¸ªåºï¼Œç¬¬ä¸€æ¡å–å®Œï¼Œæ‹¿åˆ°å¯¹åº”idï¼Œç„¶åæœ‰ä¸€æ¡è¯­å¥å°±æ˜¯where idå¤§äºxxxï¼Œlimit y2-y1ï¼Œ1","like_count":90,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":433777,"discussion_content":"æŠ“ä½äº†å…³é”®ç‚¹ğŸ‘ğŸ¿","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545362115,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1672786,"avatar":"https://static001.geekbang.org/account/avatar/00/19/86/52/91c7d112.jpg","nickname":"Garen","note":"","ucode":"0608C88F83EF0C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":34735,"discussion_content":"æˆ‘è§‰å¾—è€å¸ˆä¸¾çš„ä¾‹å­æ²¡æœ‰è€ƒè™‘Y1ï¼ŒY2ï¼ŒY3å€¼ç›¸åŒçš„æƒ…å†µã€‚è€Œæ¥¼ä¸»ä¸¾çš„ä¾‹å­å®Œå…¨æ²¡çœ‹æ‡‚.\nä¸€ã€è¾¹ç•Œçš„é—®é¢˜ï¼Œä¸‡ä¸€æ‹¿åˆ°çš„Idæ˜¯9998ï¼ˆç”šè‡³å¯èƒ½æ˜¯9999ï¼Œ10000ï¼‰ã€‚\näºŒã€whereæ¡ä»¶çš„å¤§äºå’Œlimit y2-y1ç»„åˆèµ·æ¥æœ‰é—®é¢˜ã€‚å¯èƒ½ä¼šåç§»å‡º10000ä»¥å¤–ã€‚\nä¸‰ã€æˆ‘æ²¡èƒ½çœ‹å‡ºè¿™æ¯”ç®—æ³•3å°‘äº†æ‰«æè¡Œæ•°\n\nä¸çŸ¥é“æ˜¯ä¸æ˜¯æˆ‘æ²¡èƒ½ç†è§£å…¨é¢","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1571218509,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1691243,"avatar":"https://static001.geekbang.org/account/avatar/00/19/ce/6b/ae7489a0.jpg","nickname":"Ccc","note":"","ucode":"EAEA0284948959","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1672786,"avatar":"https://static001.geekbang.org/account/avatar/00/19/86/52/91c7d112.jpg","nickname":"Garen","note":"","ucode":"0608C88F83EF0C","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":64252,"discussion_content":"where id > xxxç›´æ¥å®šä½åˆ°ç¬¬Y1æ¡äº†ï¼Œæ‰€ä»¥ç¬¬äºŒæ¬¡selectçš„æ—¶å€™å°±å¯ä»¥å°‘æ‰«æäº†Yè¡Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574943364,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":34735,"ip_address":""},"score":64252,"extra":""},{"author":{"id":1691243,"avatar":"https://static001.geekbang.org/account/avatar/00/19/ce/6b/ae7489a0.jpg","nickname":"Ccc","note":"","ucode":"EAEA0284948959","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1672786,"avatar":"https://static001.geekbang.org/account/avatar/00/19/86/52/91c7d112.jpg","nickname":"Garen","note":"","ucode":"0608C88F83EF0C","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":64258,"discussion_content":"è¿™ä¸ªå’Œåˆ†é¡µçš„é€»è¾‘æ˜¯ä¸€æ ·çš„ï¼Œæ¯æ¬¡éƒ½ç”¨ä¸Šä¸€æ¬¡æ‹¿åˆ°çš„æœ€åä¸€æ¡idä½œä¸ºwhereæ¡ä»¶","likes_number":11,"is_delete":false,"is_hidden":false,"ctime":1574943458,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":34735,"ip_address":""},"score":64258,"extra":""}]}]},{"had_liked":false,"id":52316,"user_name":"å€ªå¤§äºº","can_delete":false,"product_type":"c1","uid":1193052,"ip_address":"","ucode":"4798D69F3E86FB","user_header":"https://static001.geekbang.org/account/avatar/00/12/34/5c/6b4757a0.jpg","comment_is_top":false,"comment_ctime":1545361810,"is_pvip":false,"replies":[{"id":"19017","content":"æ¼‚äº®","user_name":"ä½œè€…å›å¤","comment_id":52316,"uid":"1264162","ip_address":"","utype":1,"ctime":1545364413,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":18,"race_medal":0,"score":"147574249874","product_id":100020801,"comment_content":"è¯¾åé¢˜å¯ä»¥åœ¨éšæœºå‡ºY1ã€Y2ã€Y3åï¼Œç®—å‡ºYmaxã€Ymin<br>å†ç”¨ select id from t limit Yminï¼Œ(Ymax - Ymin)ï¼›<br>å¾—åˆ°idé›†åç®—å‡ºY1ã€Y2ã€Y3å¯¹åº”çš„ä¸‰ä¸ªid<br>æœ€å  select * from t where id in (id1, id2, id3)<br>è¿™æ ·æ‰«æçš„è¡Œæ•°åº”è¯¥æ˜¯C+Ymax+3","like_count":35,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":433831,"discussion_content":"æ¼‚äº®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545364413,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1526471,"avatar":"https://static001.geekbang.org/account/avatar/00/17/4a/c7/0cff4a59.jpg","nickname":"æœ¨æœ¨å¤•","note":"","ucode":"EA5D709D0DE50E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":29759,"discussion_content":"æˆ‘æœ‰ä¸€ä¸ªç–‘é—®å°±æ˜¯ï¼Œä¸‡ä¸€æœ€å¤§å€¼å’Œæœ€å°å€¼çš„ç›¸å·®å¾ˆå¤§ï¼Œæ¯”å¦‚1000ä¸‡æ•°æ®ï¼Œlimt min,max  ç›¸å·®äº†500ä¸‡ï¼Œé‚£å–500ä¸‡ä¸ªIDå›åˆ°åº”ç”¨ä¸­ï¼Œä¸æ˜¯å äº†å¾ˆå¤§çš„å†…å­˜å—ï¼Ÿä¸å®¹æ˜“OOMå—ï¼Ÿï¼Œå¦‚æœå¤šä¸ªç”¨æˆ·åŒæ—¶è¿™æ ·å¹¶å‘ï¼Œé‚£ä¼šä¸ä¼šç‚¸ï¼Ÿ","likes_number":8,"is_delete":false,"is_hidden":false,"ctime":1570782482,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1044546,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f0/42/7728d4f5.jpg","nickname":"è‰¿è‰¿","note":"","ucode":"8F727AB7A7F6B2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1526471,"avatar":"https://static001.geekbang.org/account/avatar/00/17/4a/c7/0cff4a59.jpg","nickname":"æœ¨æœ¨å¤•","note":"","ucode":"EA5D709D0DE50E","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":37762,"discussion_content":"ç‰›é€¼ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571664469,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":29759,"ip_address":""},"score":37762,"extra":""},{"author":{"id":1583588,"avatar":"https://static001.geekbang.org/account/avatar/00/18/29/e4/ade74d94.jpg","nickname":"hejun","note":"","ucode":"DCF01B4159178F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1526471,"avatar":"https://static001.geekbang.org/account/avatar/00/17/4a/c7/0cff4a59.jpg","nickname":"æœ¨æœ¨å¤•","note":"","ucode":"EA5D709D0DE50E","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":283230,"discussion_content":"æœ‰é“ç†ï¼Œæ•°æ®é‡å¤§äº†å°±ä¸å¥½ä½¿äº†ã€‚å…¶å®ä¸»è¦é—®é¢˜å°±æ˜¯å¦‚ä½•æ›´é«˜æ•ˆçš„å®šä½Y1ï¼ŒY2ï¼ŒY3ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592216859,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":29759,"ip_address":""},"score":283230,"extra":""},{"author":{"id":2289364,"avatar":"https://static001.geekbang.org/account/avatar/00/22/ee/d4/040686cd.jpg","nickname":"é˜³å…‰ä¸‹çš„å°ä¸‘","note":"","ucode":"57995B5CC72715","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1526471,"avatar":"https://static001.geekbang.org/account/avatar/00/17/4a/c7/0cff4a59.jpg","nickname":"æœ¨æœ¨å¤•","note":"","ucode":"EA5D709D0DE50E","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":543100,"discussion_content":"åŒæ ·æƒ³åˆ°è¿™ä¸ªé—®é¢˜ï¼Œæ„Ÿè§‰æ˜¯åœ¨åˆ¶é€ æ›´å¤§çš„é—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640948025,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":29759,"ip_address":""},"score":543100,"extra":""}]},{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":160642,"discussion_content":"ä½ æ˜¯å¦‚ä½•æ ¹æ®y1-y3ç®—å‡ºç›¸åº”çš„IDçš„ï¼Œè¿™ä¸ªæœ‰ç‚¹ä¸çŸ¥æ‰€è°“å•Šã€‚è€Œä¸”limitè¿”å›æ¥æ˜¯å¤šä¸ªå€¼çš„ï¼Œè‚¯å®šä¸æ˜¯3ä¸ªï¼Œå› ä¸ºmax-minéšæœºå¾—å‡ºä»»ä½•å€¼éƒ½æœ‰å¯èƒ½ã€‚è¿™å«ä»€ä¹ˆè·¯å­ï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1580821599,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1212009,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLyfaTNuvbkicpu3mTujhbQ2Xr6KSbfNJrukFv1gSmtdicxTNgN61M2ibxZdQpRToicQNJDKDuB27F3Ag/132","nickname":"è·¯äººç”²","note":"","ucode":"D6247E2F110FC7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":182722,"discussion_content":"æˆ‘è§‰å¾—ä»–çš„æ„æ€æ˜¯å…ˆå–å‡ºè¿™èŒƒå›´å†…çš„æ‰€æœ‰idï¼Œç„¶åæ ¹æ®[y1,y3]ï¼ˆåŒºé—´å†…æ˜¯è¿ç»­çš„æ•´æ•°ï¼‰è¿™ä¸ªåŒºé—´ä¸­ï¼Œy1ï¼ˆç¬¬ä¸€ä¸ªå€¼ï¼‰ï¼Œy2ï¼Œy3ï¼ˆæœ€åä¸€ä¸ªå€¼ï¼‰æ‰€åœ¨çš„ä½ç½®æ‹¿åˆ°å‰©ä¸‹çš„y2","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1582451926,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":160642,"ip_address":""},"score":182722,"extra":""},{"author":{"id":1526355,"avatar":"https://static001.geekbang.org/account/avatar/00/17/4a/53/063f9d17.jpg","nickname":"moonfox","note":"","ucode":"902BFF40EFA9FA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1212009,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLyfaTNuvbkicpu3mTujhbQ2Xr6KSbfNJrukFv1gSmtdicxTNgN61M2ibxZdQpRToicQNJDKDuB27F3Ag/132","nickname":"è·¯äººç”²","note":"","ucode":"D6247E2F110FC7","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298397,"discussion_content":"åŒºé—´å†…ä¸ä¸€å®šæ˜¯è¿ç»­çš„ï¼Œä½†y2å¯ä»¥é€šè¿‡y2-y1æ‹¿åˆ°","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1597289136,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":182722,"ip_address":""},"score":298397,"extra":""}]},{"author":{"id":1541014,"avatar":"https://static001.geekbang.org/account/avatar/00/17/83/96/73ff13a0.jpg","nickname":"å¤©äº®å‰è¯´æ™šå®‰","note":"","ucode":"1D82EE562A7C71","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":135167,"discussion_content":"ç¬¬ä¸€æ¡è¯­å¥å¯ä»¥id>Y1,è¿™æ ·æ‰«æå°±æ˜¯ï¼šC+Ymax-Ymin+3äº†","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1579074847,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1446494,"avatar":"https://static001.geekbang.org/account/avatar/00/16/12/5e/77b67a85.jpg","nickname":"é£˜äº‘","note":"","ucode":"C6FE0310D6853C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":563093,"discussion_content":"select * from t where id in (id1, id2, id3) è¿™æ¡è¯­å¥ä¸æ˜¯æ‰«æä¸‰è¡Œå§ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649939600,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2873959,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/da/67/e18b690e.jpg","nickname":"ç¥ç»è›™","note":"","ucode":"E0CE74B2363E10","race_medal":2,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":541444,"discussion_content":" â€œselect id from t limit Yminï¼Œ(Ymax - Ymin)ï¼›â€ é€šè¿‡ 3 ä¸ªéšæœºæ•°å¾—åˆ° id çš„èŒƒå›´é›†åˆï¼Œç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯ Ymin çš„ idï¼Œæœ€åä¸€ä¸ªæ˜¯ Ymax çš„ idï¼Œç¬¬ y2-Ymin ä¸ªå…ƒç´ æ˜¯ y2 çš„ id","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640362944,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1526355,"avatar":"https://static001.geekbang.org/account/avatar/00/17/4a/53/063f9d17.jpg","nickname":"moonfox","note":"","ucode":"902BFF40EFA9FA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":333987,"discussion_content":"å‰å®³ï¼Œè¿™ä¹ˆå¥½æ»´ç®—æ³•åªæ¨è‡ªå·±æƒ³ä¸å‡ºæ¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607685022,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1702547,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/DYAIOgq83eruzEDjGnUFZz8ehoKKwy1IZKsPQ9ANkcZt0QMk1Uxuvx5FVlAYoiaaKoaKia99ticTib5sUkxsPduD4A/132","nickname":"GEEKBANG_7745681","note":"","ucode":"9668855F627CFD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":303293,"discussion_content":"ä¸ºäº†è§£å†³éƒ¨åˆ†é—®é¢˜å¯èƒ½å¸¦æ¥æ›´å¤§çš„é—®é¢˜ï¼Œä¸å¦¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599208551,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1209431,"avatar":"https://static001.geekbang.org/account/avatar/00/12/74/57/7b828263.jpg","nickname":"å¼ sir","note":"","ucode":"52958DF6705208","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":195889,"discussion_content":"ä½†æ„Ÿè§‰æœ‰é—®é¢˜ï¼Œå¦‚æœè®¡ç®—Yminå’ŒYmaxçš„Idä¸å­˜åœ¨å’‹åŠï¼Œè¿™æ ·å–å‡ºçš„æ•°æ®å°±ä¸è¶³3æ¡äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583320173,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1526355,"avatar":"https://static001.geekbang.org/account/avatar/00/17/4a/53/063f9d17.jpg","nickname":"moonfox","note":"","ucode":"902BFF40EFA9FA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1209431,"avatar":"https://static001.geekbang.org/account/avatar/00/12/74/57/7b828263.jpg","nickname":"å¼ sir","note":"","ucode":"52958DF6705208","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298395,"discussion_content":"y1 y2 y3éƒ½æ˜¯åç§»é‡ï¼Œä¸idåˆ†å¸ƒæ— å…³","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597288890,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":195889,"ip_address":""},"score":298395,"extra":""}]},{"author":{"id":1680305,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLcS8xEPSgUyy3Yicib9OvB2JXXMibWRQpFPxVzmonZeHDyD9X2nMZx3kEicdvWyIxoMictAkdcxrez57A/132","nickname":"the7th","note":"","ucode":"D1F910232C847D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":152873,"discussion_content":"æˆ‘æœ‰ä¸ªéœ€æ±‚ï¼Œè¯·å„ä½æŒ‡ç‚¹ä¸€äºŒï¼Œå¦‚æœæœ‰ä»Šå¤©å‘å¸ƒçš„æ–‡ç« å…ˆæŒ‰ä»Šå¤©çš„æ’åºï¼Œå†å–ä½™ä¸‹çš„éšæœºæ’åºï¼Œå¦‚æœæ²¡æœ‰ä»Šå¤©å‘å¸ƒçš„å°±éšæœºæ’åºï¼Œå¹¶ä¸”è¦åˆ†é¡µ.","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580001769,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1153928,"avatar":"https://static001.geekbang.org/account/avatar/00/11/9b/88/34c171f1.jpg","nickname":"herongwei","note":"","ucode":"E4158BF7AD2E70","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":121746,"discussion_content":"æƒ³é—®çš„æ˜¯ï¼Œå¾—åˆ° id é›†åï¼Œå¦‚ä½•ç®—å‡º Y1ã€Y2ã€Y3 å¯¹åº”çš„ä¸‰ä¸ª id å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578322635,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1526355,"avatar":"https://static001.geekbang.org/account/avatar/00/17/4a/53/063f9d17.jpg","nickname":"moonfox","note":"","ucode":"902BFF40EFA9FA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1153928,"avatar":"https://static001.geekbang.org/account/avatar/00/11/9b/88/34c171f1.jpg","nickname":"herongwei","note":"","ucode":"E4158BF7AD2E70","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298402,"discussion_content":"é›†åˆçš„ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯Yminï¼Œæœ€åä¸€ä¸ªæ˜¯Ymaxï¼Œå‰©ä¸‹é‚£æ¯”å¦‚æ˜¯y2ï¼Œå°±ç”¨y2-Yminï¼Œåœ¨é›†åˆä¸Šé€šè¿‡åç§»çš„åˆ°","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1597289817,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":121746,"ip_address":""},"score":298402,"extra":""}]}]},{"had_liked":false,"id":69041,"user_name":"å¤§ç¥ä»™","can_delete":false,"product_type":"c1","uid":1151944,"ip_address":"","ucode":"8179D170A97936","user_header":"https://static001.geekbang.org/account/avatar/00/11/93/c8/9eb6c644.jpg","comment_is_top":false,"comment_ctime":1550650466,"is_pvip":false,"replies":[{"id":"24485","content":"æˆ‘çš„ç†è§£æ˜¯è¯´ï¼Œ<br>ä½ ç¢°åˆ°äº†è¿™ç§æƒ…å†µï¼š<br><br>limit  n, a; æ˜¾ç¤ºaæ¡è®°å½•ï¼›<br>ç„¶å limit n+a, aæ˜¾ç¤ºç¬¬äºŒç»„aæ¡ä»¶è®°å½•ï¼›<br>è¿™ä¸¤ç»„aä¸ªè®°å½•å‡ºç°äº†é‡å¤æ•°æ®å¯¹å§ï¼Œ<br><br>æ˜¯çš„ï¼Œæ˜¯å› ä¸ºlimit æœ‰å¯èƒ½å‡ºç°ä¸¤ç§ç®—æ³•ï¼Œæ¯”å¦‚ç›´æ¥æ’åºå’Œä¼˜å…ˆé˜Ÿåˆ—æ’åºï¼Œå°±æ˜¯ä¸åŒçš„ç»“æœã€‚<br>è€Œlimit åé¢çš„å‚æ•°ï¼Œæ˜¯ä¼šå½±å“ç®—æ³•çš„","user_name":"ä½œè€…å›å¤","comment_id":69041,"uid":"1264162","ip_address":"","utype":1,"ctime":1550651724,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":13,"race_medal":0,"score":"113219800162","product_id":100020801,"comment_content":"è€å¸ˆï¼Œlimit n order by éç´¢å¼•å­—æ®µ è¿›è¡Œåˆ†é¡µæŸ¥è¯¢ã€‚æ•°æ®åº“ç¬¦åˆæ¡ä»¶çš„count=147000æ¡ï¼Œåˆ†é¡µæŸ¥è¯¢countä¹Ÿæ­£ç¡®ï¼Œä½†æ˜¯åˆ†é¡µæŸ¥è¯¢å‡ºçš„147000æ¡æ•°æ®ä¸­å­˜åœ¨é‡å¤æ•°æ®ã€‚<br>1ï¼Œè¿™ä¸ªæˆ‘çœ‹ç½‘ä¸Šè§£é‡Šæ˜¯å› ä¸ºå †æ’åºç®—æ³•ä¸ç¨³å®šå¯¼è‡´çš„ã€‚è¿™ä¸ªè¯´æ³•æ˜¯å¦æ­£ç¡®ã€‚<br>2ï¼Œæˆ‘æŸ¥äº†å¾ˆå¤šèµ„æ–™ï¼Œæ²¡æ‰¾åˆ°ï¼Œæˆ–è€…æ‚¨èƒ½ç»™æˆ‘ä¸ªæŒ‡å¯¼ï¼Œæˆ‘å»æŸ¥æŸ¥","like_count":26,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":439928,"discussion_content":"æˆ‘çš„ç†è§£æ˜¯è¯´ï¼Œ\nä½ ç¢°åˆ°äº†è¿™ç§æƒ…å†µï¼š\n\nlimit  n, a; æ˜¾ç¤ºaæ¡è®°å½•ï¼›\nç„¶å limit n+a, aæ˜¾ç¤ºç¬¬äºŒç»„aæ¡ä»¶è®°å½•ï¼›\nè¿™ä¸¤ç»„aä¸ªè®°å½•å‡ºç°äº†é‡å¤æ•°æ®å¯¹å§ï¼Œ\n\næ˜¯çš„ï¼Œæ˜¯å› ä¸ºlimit æœ‰å¯èƒ½å‡ºç°ä¸¤ç§ç®—æ³•ï¼Œæ¯”å¦‚ç›´æ¥æ’åºå’Œä¼˜å…ˆé˜Ÿåˆ—æ’åºï¼Œå°±æ˜¯ä¸åŒçš„ç»“æœã€‚\nè€Œlimit åé¢çš„å‚æ•°ï¼Œæ˜¯ä¼šå½±å“ç®—æ³•çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1550651724,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1933794,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJjiaBHJyfAKK3lAdX62MveJHoPb4V6zE6jhPa3cjdBv7owc53aBHbNf3pibOsbciccSwichwiaR4m5nAQ/132","nickname":"Geek_82640c","note":"","ucode":"A69C2D502A27D0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":332890,"discussion_content":"ä»¥å‰ç–‘æƒ‘ä¸ºå•¥limitåœ¨ä¸‹ä¸€é¡µä¼šå‡ºç°ä¸Šä¸€é¡µçš„æ•°æ®ï¼ŒåŸæ¥æ˜¯é‡‡ç”¨äº†å †æ’åºå’Œä¼˜å…ˆé˜Ÿåˆ—æ’åºçš„ç®—æ³•å¯¼è‡´","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1607387479,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1475528,"avatar":"https://static001.geekbang.org/account/avatar/00/16/83/c8/5ce842f6.jpg","nickname":"maybe","note":"","ucode":"93D160F617E750","race_medal":4,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":372420,"discussion_content":"å †æ’åºä¸æ˜¯ç¨³å®šæ’åºç®—æ³•","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1620312484,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1054108,"avatar":"https://static001.geekbang.org/account/avatar/00/10/15/9c/310c902c.jpg","nickname":"e^x","note":"","ucode":"29B56E0DF4EF48","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1475528,"avatar":"https://static001.geekbang.org/account/avatar/00/16/83/c8/5ce842f6.jpg","nickname":"maybe","note":"","ucode":"93D160F617E750","race_medal":4,"user_type":1,"is_pvip":false},"discussion":{"id":530543,"discussion_content":"æ­¤è¯æ€è®²ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637082964,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":372420,"ip_address":""},"score":530543,"extra":"{\"user_type\":1}"},{"author":{"id":2254917,"avatar":"https://static001.geekbang.org/account/avatar/00/22/68/45/ddf89612.jpg","nickname":"bestgopher","note":"","ucode":"D89735C8CA9C6E","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":1054108,"avatar":"https://static001.geekbang.org/account/avatar/00/10/15/9c/310c902c.jpg","nickname":"e^x","note":"","ucode":"29B56E0DF4EF48","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":551140,"discussion_content":"è¿™ä¸æ˜¯åŸºæœ¬ç†è®ºå—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644908708,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":530543,"ip_address":""},"score":551140,"extra":""}]},{"author":{"id":1649662,"avatar":"https://static001.geekbang.org/account/avatar/00/19/2b/fe/7925eb7e.jpg","nickname":"pdf","note":"","ucode":"A44250955878BB","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":306795,"discussion_content":"å­˜åœ¨é‡å¤å…ƒç´ æ‰ä¼šæœ‰è¿™ç§æƒ…å†µï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1600392090,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1069103,"avatar":"https://static001.geekbang.org/account/avatar/00/10/50/2f/5992eb8f.jpg","nickname":"é™æ‚„æ‚„çš„çœ‹","note":"","ucode":"D3602584911805","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":553786,"discussion_content":"æ‰€ä»¥è¿™æ ·é—®é¢˜æ€ä¹ˆé¿å…å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646094002,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1879290,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/ac/fa/a32099e7.jpg","nickname":"Curiosity","note":"","ucode":"A6732CAE6CBE8E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1069103,"avatar":"https://static001.geekbang.org/account/avatar/00/10/50/2f/5992eb8f.jpg","nickname":"é™æ‚„æ‚„çš„çœ‹","note":"","ucode":"D3602584911805","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":554250,"discussion_content":"ä½¿ç”¨æˆ–ç»“åˆæ•°æ®å”¯ä¸€çš„å­—æ®µè¿›è¡Œæ’åº","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1646286066,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":553786,"ip_address":""},"score":554250,"extra":""}]},{"author":{"id":2448277,"avatar":"https://static001.geekbang.org/account/avatar/00/25/5b/95/462890c6.jpg","nickname":"å¶æ¶›","note":"","ucode":"B45348979BE159","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":365759,"discussion_content":"è¿™ä¸ªçš„ç›´æ¥æ’åºæ˜¯æŒ‡å½’å¹¶æ’åº?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617876960,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1589055,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKKKdCyib4iblXC6JIH7HWDfIFVweTb7SgEOuRjquic3GiaiaGInFSiaU8w2y2bjvZjgiaA3IEQuyibXTaeHQ/132","nickname":"10xiaohu","note":"","ucode":"CAB39DBB93E608","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":351227,"discussion_content":"å˜¿å˜¿å˜¿ï¼Œçœ‹ç®—æ³•å¯å¥½ä¹…äº†ï¼Œå¿˜äº†è¿™ä¸¤ä¸ªç®—æ³•çš„ç¨³å®šæ€§ï¼Œå®Œäº†å›å¤´å†å¤ä¹ å¤ä¹ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614181101,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1757797,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/d2/65/79d89c77.jpg","nickname":"å°ç™½ç™½ä¸ç™½","note":"","ucode":"270EC3A197A8D9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":348079,"discussion_content":"è¿˜æ˜¯æœ‰ç–‘é—®ï¼Œä¸¤ç§æ’åºç®—æ³•ä¸éƒ½æ˜¯æ¯”å¯¹å®Œæ‰€æœ‰çš„æ•°æ®å—ï¼Ÿ æ—¢ç„¶æ¯”å¯¹å®Œäº†ï¼Œé‚£ä¹ˆåº”è¯¥ä¸ä¼šé‡å¤å€¼æ’åºé”™ä¹±çš„å§ï¼ˆæ¯”å¦‚è®¾å®šä¸ºä¸¤ç§ç®—æ³• éƒ½è®¾å®šä¸º ifï¼ˆ>=ï¼‰elseï¼‰ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612422887,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1214347,"avatar":"https://static001.geekbang.org/account/avatar/00/12/87/8b/79c1203a.jpg","nickname":"æ‹‰ä¸Šæ¿è½¦ä¸Šé«˜é€Ÿ","note":"","ucode":"3F948501BED87D","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":334627,"discussion_content":"ä¹‹å‰éœ€æ±‚å¼€å‘æ—¶é‡åˆ°è¿™æ ·çš„é—®é¢˜ï¼Œæµ‹è¯•ä¸€ç›´è¯´æœ‰é—®é¢˜ï¼Œæˆ‘ä¸€ç›´åœ¨å¿½æ‚ æµ‹è¯•è¯´æ˜¯æ•°æ®çš„é—®é¢˜ã€‚ã€‚ã€‚\næ‰€ä»¥è¿™æ ·çœ‹æ¥ï¼Œå¦‚æœéœ€æ±‚å¼€å‘é‡åˆ°éœ€è¦æ’åºçš„ï¼Œæ˜¯ä¸æ˜¯ä¹Ÿåº”è¯¥ä»ä¸šåŠ¡ä¾§è€ƒè™‘å¦‚ä½•å®ç°èƒ½æ¶ˆé™¤è¿™ç§æ’åºä¸ç¨³å®šé€ æˆçš„å½±å“ã€‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607922075,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2037841,"avatar":"","nickname":"huan","note":"","ucode":"C98A40D3667336","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":297205,"discussion_content":"æ’åºç®—æ³•çš„ç¨³å®šæ€§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596807845,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":66880,"user_name":"æ¢¦åº·","can_delete":false,"product_type":"c1","uid":1069512,"ip_address":"","ucode":"8935F3C329C58E","user_header":"https://static001.geekbang.org/account/avatar/00/10/51/c8/83852d5a.jpg","comment_is_top":false,"comment_ctime":1550034579,"is_pvip":false,"replies":[{"id":"25702","content":"å¸®ä½ è´´ä¸‹ä½ è‡ªå·±çš„ç­”æ¡ˆå“ˆ https:&#47;&#47;mengkang.net&#47;1338.html","user_name":"ä½œè€…å›å¤","comment_id":66880,"uid":"1264162","ip_address":"","utype":1,"ctime":1551377787,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":3,"race_medal":0,"score":"96039315091","product_id":100020801,"comment_content":"ç¿»äº†ä¸‹è¯„è®ºï¼Œæ²¡äººé—®ä¼˜å…ˆé˜Ÿåˆ—æ’åºé‡Œçš„ row_size å’Œ rows_estimate æ˜¯å¦‚ä½•è®¡ç®—çš„ã€‚æƒ³äº†åŠå¤©æ²¡æƒ³æ˜ç™½ã€‚","like_count":22,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438957,"discussion_content":"å¸®ä½ è´´ä¸‹ä½ è‡ªå·±çš„ç­”æ¡ˆå“ˆ https://mengkang.net/1338.html","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551377787,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1168686,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d5/2e/7ace1d94.jpg","nickname":"wallacefw","note":"","ucode":"9EC56A542D9927","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":576206,"discussion_content":"è¿æ¥å·²ç»æ²¡æœ‰äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655350906,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":438957,"ip_address":""},"score":576206,"extra":""}]},{"author":{"id":1005713,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/58/91/3a2822f0.jpg","nickname":"trymorewang","note":"","ucode":"5804857F5B8B2E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":384655,"discussion_content":"çœŸé¡¶å•Š å“ˆå“ˆå“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626690447,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":52201,"user_name":"ç‹é£æ´‹","can_delete":false,"product_type":"c1","uid":1049345,"ip_address":"","ucode":"8FE8FE8C8CD4F1","user_header":"https://static001.geekbang.org/account/avatar/00/10/03/01/62b32acf.jpg","comment_is_top":false,"comment_ctime":1545350744,"is_pvip":false,"replies":[{"id":"19021","content":"è¦è¯´ç®—æ³•è¿˜æ˜¯éš”å£ç‹è€å¸ˆè®²çš„ä¸“ä¸šï¼Œè¿™é‡Œå’±ä»¬å°±åªè¿½æ±‚MySQL é‡Œé¢ç”¨åˆ°çš„ï¼Œèƒ½ç»™å¤§å®¶è®²æ˜ç™½å°±è¡Œäº†ğŸ˜„","user_name":"ä½œè€…å›å¤","comment_id":52201,"uid":"1264162","ip_address":"","utype":1,"ctime":1545364755,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":3,"race_medal":0,"score":"96034631256","product_id":100020801,"comment_content":"å½’å¹¶æ’åºï¼Œä¼˜å…ˆé˜Ÿåˆ—ï¼Œç®—æ³•æ— å¤„ä¸åœ¨ã€‚","like_count":22,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":433779,"discussion_content":"è¦è¯´ç®—æ³•è¿˜æ˜¯éš”å£ç‹è€å¸ˆè®²çš„ä¸“ä¸šï¼Œè¿™é‡Œå’±ä»¬å°±åªè¿½æ±‚MySQL é‡Œé¢ç”¨åˆ°çš„ï¼Œèƒ½ç»™å¤§å®¶è®²æ˜ç™½å°±è¡Œäº†ğŸ˜„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545364755,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1834181,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/fc/c5/ff8b770e.jpg","nickname":"BugBean","note":"","ucode":"B51232281AD9BC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":263074,"discussion_content":"ç®—æ³•è¿˜æ˜¯éš”å£è€ç‹ä¸“ä¸šå“ˆå“ˆ","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1589169461,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1314724,"avatar":"https://static001.geekbang.org/account/avatar/00/14/0f/a4/0b49469f.jpg","nickname":"æœ¨å­00","note":"","ucode":"8F78CA722EB29B","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":307176,"discussion_content":"è€ç‹ã€‚å“ˆå“ˆå“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600521974,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":52199,"user_name":"æ…§é‘«coming","can_delete":false,"product_type":"c1","uid":1324385,"ip_address":"","ucode":"7BAC9CA255630E","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLE4LYb3jrH63ZV98Zpc8DompwDgb1O3nffMoZCmiaibauRyEFv6NDNsST9RWxZExvMLMWb50zaanoQ/132","comment_is_top":false,"comment_ctime":1545350669,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"91739663885","product_id":100020801,"comment_content":"åˆåˆ°å‘¨äº”äº†ï¼Œå¼€å¿ƒğŸ˜œ","like_count":21},{"had_liked":false,"id":52964,"user_name":"freesia","can_delete":false,"product_type":"c1","uid":1207824,"ip_address":"","ucode":"FC37B0B796958E","user_header":"https://static001.geekbang.org/account/avatar/00/12/6e/10/05f19719.jpg","comment_is_top":false,"comment_ctime":1545559052,"is_pvip":false,"replies":[{"id":"19209","content":"å—¯å—¯ï¼ŒMySQL çš„ä»£ç å’Œä¸šåŠ¡ä»£ç éƒ½æ˜¯ä»£ç ğŸ˜„ é…åˆèµ·æ¥ç”¨","user_name":"ä½œè€…å›å¤","comment_id":52964,"uid":"1264162","ip_address":"","utype":1,"ctime":1545574399,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":2,"race_medal":0,"score":"74560003084","product_id":100020801,"comment_content":"ä»ä¸Šä¸€è®²åˆ°è¿™ä¸€è®²ï¼Œæˆ‘å‘ç°è€å¸ˆåœ¨å¤„ç†é—®é¢˜æ—¶ï¼Œæå‡ºçš„æ–¹æ³•å°±ä¸å†æ˜¯å•çº¯ä¾é MySQLè§£å†³ï¼Œå› ä¸ºå¯èƒ½ä¼šè€—è´¹å¾ˆå¤šèµ„æºï¼Œè€Œæ˜¯æŠŠé—®é¢˜åˆ†æ‹…ä¸€éƒ¨åˆ†åˆ°å®¢æˆ·ç«¯ï¼Œæ¯”å¦‚å®¢æˆ·ç«¯æ‹¿åˆ°æ•°æ®åå†æ’åºï¼Œæˆ–è€…å®¢æˆ·ç«¯äº§ç”Ÿéšæœºæ•°å†åˆ°MySQLä¸­å»æŸ¥è¯¢ã€‚","like_count":17,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":434006,"discussion_content":"å—¯å—¯ï¼ŒMySQL çš„ä»£ç å’Œä¸šåŠ¡ä»£ç éƒ½æ˜¯ä»£ç ğŸ˜„ é…åˆèµ·æ¥ç”¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545574399,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2369545,"avatar":"https://static001.geekbang.org/account/avatar/00/24/28/09/0ac42cff.jpg","nickname":"æ…•è‹","note":"","ucode":"7ED14D00429C21","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":336545,"discussion_content":"é˜”ä»¥é˜”ä»¥ï¼Œmysqlåªæ˜¯å­˜å‚¨æ•°æ®ç”¨çš„\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608623335,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":55163,"user_name":"Mr.Strive.Z.H.L","can_delete":false,"product_type":"c1","uid":1030198,"ip_address":"","ucode":"6D97E159E2EECD","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b8/36/542c96bf.jpg","comment_is_top":false,"comment_ctime":1546053668,"is_pvip":false,"replies":[{"id":"20038","content":"mysqlçš„æ‰§è¡Œè¿‡ç¨‹éƒ½æ˜¯ç”±æ‰§è¡Œå™¨æ¥è°ƒåº¦çš„<br><br>ä¸è®ºåˆ›å»ºmemoryä¸´æ—¶è¡¨è¿˜æ˜¯innodbä¸´æ—¶è¡¨ï¼Œéƒ½æ˜¯æ‰§è¡Œå™¨è°ƒç”¨å¼•æ“çš„åˆ›å»ºè¡¨æ¥å£å®ç°çš„<br><br>å†™æ•°æ®å’Œè¯»æ•°æ®ä¹Ÿæ˜¯<br><br>æ’åºè¿™ä¸ªæ“ä½œï¼Œæ˜¯åœ¨serverå±‚åšçš„","user_name":"ä½œè€…å›å¤","comment_id":55163,"uid":"1264162","ip_address":"","utype":1,"ctime":1546135206,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":1,"race_medal":0,"score":"70265530404","product_id":100020801,"comment_content":"è€å¸ˆä½ å¥½ï¼Œå›é¡¾è¿™ç¯‡çš„æ—¶å€™çªç„¶æœ‰ä¸ªç–‘æƒ‘ã€‚<br>æ‰§è¡Œå™¨åªæ˜¯è°ƒå¼•æ“æ¥å£è·å–ç»“æœï¼Œä½†æ˜¯æˆ‘è®¤ä¸ºorder byçš„æ’åºè¿‡ç¨‹åº”è¯¥æ˜¯åœ¨æ‰§è¡Œå™¨æ‰§è¡Œçš„å§ï¼Ÿå†…å­˜ä¸´æ—¶è¡¨ä½¿ç”¨çš„memoryå¼•æ“ï¼Œåº”è¯¥ä¹Ÿæ˜¯åœ¨serverç«¯ï¼Œè€Œç£ç›˜ä¸´æ—¶è¡¨åº”è¯¥æ˜¯innodbå†…éƒ¨ã€‚<br>æˆ‘è¿™ä¹ˆç†è§£å¯¹å—ï¼Ÿè¿˜æ˜¯è¯´æ•´ä¸ªæ’åºè¿‡ç¨‹å…¨éƒ¨éƒ½åœ¨innodbå†…éƒ¨æ‰§è¡Œï¼Ÿ<br>å¯¹æ­¤çªç„¶æœ‰ç‚¹ç–‘æƒ‘â€¦â€¦â€¦","like_count":16,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":434687,"discussion_content":"mysqlçš„æ‰§è¡Œè¿‡ç¨‹éƒ½æ˜¯ç”±æ‰§è¡Œå™¨æ¥è°ƒåº¦çš„\n\nä¸è®ºåˆ›å»ºmemoryä¸´æ—¶è¡¨è¿˜æ˜¯innodbä¸´æ—¶è¡¨ï¼Œéƒ½æ˜¯æ‰§è¡Œå™¨è°ƒç”¨å¼•æ“çš„åˆ›å»ºè¡¨æ¥å£å®ç°çš„\n\nå†™æ•°æ®å’Œè¯»æ•°æ®ä¹Ÿæ˜¯\n\næ’åºè¿™ä¸ªæ“ä½œï¼Œæ˜¯åœ¨serverå±‚åšçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1546135206,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":52486,"user_name":"æçš®çš®çš®çš®çš®","can_delete":false,"product_type":"c1","uid":1200281,"ip_address":"","ucode":"3BF1DEE4A12359","user_header":"https://static001.geekbang.org/account/avatar/00/12/50/99/44378317.jpg","comment_is_top":false,"comment_ctime":1545393719,"is_pvip":false,"replies":[{"id":"19100","content":"å¼€ä¸¤ä¸ªçª—å£ï¼ŒæŒ‰é¡ºåºæ‰§è¡Œå‘½ä»¤å“¦","user_name":"ä½œè€…å›å¤","comment_id":52486,"uid":"1264162","ip_address":"","utype":1,"ctime":1545396564,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":1,"race_medal":0,"score":"53085001271","product_id":100020801,"comment_content":"æˆ‘ç»å¸¸åœ¨æ–‡ä¸­çœ‹åˆ°å¤šä¸ªäº‹åŠ¡çš„æ‰§è¡Œæ—¶åºã€‚çº¿ä¸‹åšå®éªŒçš„æ—¶å€™ï¼Œæ˜¯æ€ä¹ˆä¿è¯èƒ½æŒ‰è¿™ä¸ªæ—¶åºæ‰§è¡Œå‘¢ï¼Ÿ","like_count":13,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":433893,"discussion_content":"å¼€ä¸¤ä¸ªçª—å£ï¼ŒæŒ‰é¡ºåºæ‰§è¡Œå‘½ä»¤å“¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545396564,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":66814,"user_name":"Sinyo","can_delete":false,"product_type":"c1","uid":1307297,"ip_address":"","ucode":"57B243E7AB86A5","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJAibnPX9jW8kqLcIfibjic8GbkQkEUYyFKJkc39hZhibVlNrqwTjdLozkqibI2IwACd5YzofYickNxFnZg/132","comment_is_top":false,"comment_ctime":1550024637,"is_pvip":false,"replies":[{"id":"23671","content":"æ²¡æœ‰å°‘0å“ˆ<br><br>å¥½é—®é¢˜<br><br>æœ€å°å †çš„ç»´æŠ¤ä»£ä»·æ¯”æ•°ç»„å¤§ï¼Œä¸åªæ˜¯14*1000å“¦","user_name":"ä½œè€…å›å¤","comment_id":66814,"uid":"1264162","ip_address":"","utype":1,"ctime":1550047676,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":2,"race_medal":0,"score":"40204730301","product_id":100020801,"comment_content":"ä½ å¯èƒ½ä¼šé—®ï¼Œè¿™é‡Œä¹Ÿç”¨åˆ°äº† limitï¼Œä¸ºä»€ä¹ˆæ²¡ç”¨ä¼˜å…ˆé˜Ÿåˆ—æ’åºç®—æ³•å‘¢ï¼ŸåŸå› æ˜¯ï¼Œè¿™æ¡ SQL è¯­å¥æ˜¯ limit 1000ï¼Œå¦‚æœä½¿ç”¨ä¼˜å…ˆé˜Ÿåˆ—ç®—æ³•çš„è¯ï¼Œéœ€è¦ç»´æŠ¤çš„å †çš„å¤§å°å°±æ˜¯ 1000 è¡Œçš„ (name,rowid)ï¼Œè¶…è¿‡äº†æˆ‘è®¾ç½®çš„ sort_buffer_size å¤§å°ï¼Œæ‰€ä»¥åªèƒ½ä½¿ç”¨å½’å¹¶æ’åºç®—æ³•ã€‚<br><br>è€å¸ˆï¼Œä¸Šé¢çš„limit 1000 ä¸æ˜¯æ‰14000ä¹ˆï¼Ÿ14000å°äº32768çš„è¿˜æ˜¯ä¼˜å…ˆé˜Ÿåˆ—æ’åºç®—æ³•æŠŠï¼Ÿè¿™é‡Œæ˜¯ä¸æ˜¯10000å°‘å†™äº†ä¸ª0å‘¢ï¼Ÿ","like_count":9,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438925,"discussion_content":"æ²¡æœ‰å°‘0å“ˆ\n\nå¥½é—®é¢˜\n\næœ€å°å †çš„ç»´æŠ¤ä»£ä»·æ¯”æ•°ç»„å¤§ï¼Œä¸åªæ˜¯14*1000å“¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1550047676,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1526355,"avatar":"https://static001.geekbang.org/account/avatar/00/17/4a/53/063f9d17.jpg","nickname":"moonfox","note":"","ucode":"902BFF40EFA9FA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298433,"discussion_content":"åˆšå¥½æœ‰åŒæ ·çš„é—®é¢˜è¦é—®ï¼Œå¤ªå¥½å•¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597297972,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":62268,"user_name":"èƒ¡æ¥šåš","can_delete":false,"product_type":"c1","uid":1120212,"ip_address":"","ucode":"225883EDF35BED","user_header":"https://static001.geekbang.org/account/avatar/00/11/17/d4/d7a4e6f5.jpg","comment_is_top":false,"comment_ctime":1547998840,"is_pvip":false,"replies":[{"id":"22033","content":"å‰ææ˜¯æœ‰limit å­å¥å“ˆ","user_name":"ä½œè€…å›å¤","comment_id":62268,"uid":"1264162","ip_address":"","utype":1,"ctime":1548040169,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":1,"race_medal":0,"score":"40202704504","product_id":100020801,"comment_content":"è€å¸ˆï¼Œåªè¦sort buffer è¶³å¤Ÿï¼Œå°±é‡‡ç”¨ä¼˜å…ˆé˜Ÿåˆ—æ’åºï¼Œè€Œä¸ç”¨ç®¡åˆ°åº•æ˜¯å…¨å­—æ®µæ’åºè¿˜æ˜¯rowidæ’åºï¼Œå¯¹å—ï¼Ÿ","like_count":9,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437152,"discussion_content":"å‰ææ˜¯æœ‰limit å­å¥å“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548040169,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":52468,"user_name":"æ— çœ ","can_delete":false,"product_type":"c1","uid":1123870,"ip_address":"","ucode":"FBFA936A884EAA","user_header":"https://static001.geekbang.org/account/avatar/00/11/26/1e/adc166df.jpg","comment_is_top":false,"comment_ctime":1545388142,"is_pvip":false,"replies":[{"id":"19103","content":"æŸ¥è¯¢éœ€è¦ä¸´æ—¶è¡¨ï¼Œæ¯”å¦‚æˆ‘ä»¬è¿™ä¸ªä¾‹å­é‡Œï¼Œéœ€è¦ä¸´æ—¶è¡¨æ¥æ”¾rand()ç»“æœ","user_name":"ä½œè€…å›å¤","comment_id":52468,"uid":"1264162","ip_address":"","utype":1,"ctime":1545397373,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":3,"race_medal":0,"score":"40200093806","product_id":100020801,"comment_content":"ä¸€ç›´æ¯”è¾ƒç–‘æƒ‘ä»€ä¹ˆæƒ…å†µä¸‹ä¼šäº§ç”Ÿä¸´æ—¶è¡¨Using temporaryï¼Œå¸Œæœ›è€å¸ˆæŒ‡ç‚¹ä¸‹","like_count":9,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":433888,"discussion_content":"æŸ¥è¯¢éœ€è¦ä¸´æ—¶è¡¨ï¼Œæ¯”å¦‚æˆ‘ä»¬è¿™ä¸ªä¾‹å­é‡Œï¼Œéœ€è¦ä¸´æ—¶è¡¨æ¥æ”¾rand()ç»“æœ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545397373,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1970443,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIx1V1QAxC4NHaxYZGyuibBN8lcURJWc5nrnO4yic1kxnDemYV2FJGialf47kYX9qtDnZZOfe1SJeLicg/132","nickname":"lleft","note":"","ucode":"D573EB509455AE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":373362,"discussion_content":"éœ€è¦å­˜æ”¾ä¸­é—´ç»“æœçš„å°±éœ€è¦ä¸´æ—¶è¡¨å§ï¼Œå†…å­˜ä¸´æ—¶è¡¨æ”¾ä¸ä¸‹å°±ç”¨ç£ç›˜ä¸´æ—¶è¡¨å­˜æ”¾ã€‚åœ¨è¿™é‡Œçš„ä¸´æ—¶æ–‡ä»¶æ˜¯sort bufferå­˜æ”¾ä¸ä¸‹éœ€è¦æ’åºçš„æ•°æ®äº†ï¼Œå°±éœ€è¦ç£ç›˜ä¸´æ—¶æ–‡ä»¶è¾…åŠ©æ’åº","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1620705977,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1285652,"avatar":"","nickname":"mycat","note":"","ucode":"6878BD32D042F2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":307865,"discussion_content":"å¦‚æœæ²¡æœ‰rand()å‡½æ•°ã€å¹¶ä¸”å‚ä¸æ’åºçš„æ•°æ®é‡æ¯”è¾ƒå¤§çš„æƒ…å†µä¸‹(å†…å­˜ä¸´æ—¶è¡¨å­˜ä¸ä¸‹çš„æ—¶å€™)ï¼Œæ˜¯ä¸æ˜¯å°±ä¸éœ€è¦ä¸´æ—¶è¡¨äº†ï¼Ÿ\nç›´æ¥ä½¿ç”¨ä¸´æ—¶æ–‡ä»¶å°±å¯ä»¥äº†ï¼Ÿ\nä¸´æ—¶è¡¨å’Œä¸´æ—¶æ–‡ä»¶ä¹‹é—´æ˜¯ä»€ä¹ˆå…³ç³»ï¼Ÿ\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600776444,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":53636,"user_name":"é«˜æ•","can_delete":false,"product_type":"c1","uid":1310312,"ip_address":"","ucode":"20F6CF75EC9AA4","user_header":"https://static001.geekbang.org/account/avatar/00/13/fe/68/e0bebd9a.jpg","comment_is_top":false,"comment_ctime":1545703048,"is_pvip":false,"replies":[{"id":"19495","content":"æ’åºå†…å­˜è®¾å¤§ç‚¹ğŸ˜„ ","user_name":"ä½œè€…å›å¤","comment_id":53636,"uid":"1264162","ip_address":"","utype":1,"ctime":1545715646,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":2,"race_medal":0,"score":"35905441416","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæ€æ ·è®©mysqlä½¿ç”¨ä¼˜å…ˆé˜Ÿåˆ—æ’åºæ³•è€Œä¸ä½¿ç”¨å½’å¹¶æ’åºç®—æ³•å‘¢ï¼Ÿ","like_count":8,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":434210,"discussion_content":"æ’åºå†…å­˜è®¾å¤§ç‚¹ğŸ˜„ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545715646,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2344609,"avatar":"https://static001.geekbang.org/account/avatar/00/23/c6/a1/3bdcde91.jpg","nickname":"å‘é™½èŠ±å¼€èŠ±å‘é™½ğŸŒ¸","note":"","ucode":"9FDD01BE0E42CD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":376408,"discussion_content":"æ’åºå†…å­˜æå¤§ç‚¹ï¼Œå¹¶ä¸”ä½¿ç”¨ limit é™åˆ¶ç»“æœæ•°é‡","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1622112026,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":65213,"user_name":"å¥‹æ–—å¿ƒ","can_delete":false,"product_type":"c1","uid":1247286,"ip_address":"","ucode":"06A195AB0B6570","user_header":"https://static001.geekbang.org/account/avatar/00/13/08/36/98be3d69.jpg","comment_is_top":false,"comment_ctime":1549113742,"is_pvip":false,"replies":[{"id":"23128","content":"ç¬¬ä¸€ä¸ª10000æ˜¯æ‰«æåŸè¡¨ï¼Œç¬¬äºŒä¸ª10000æ˜¯æ‰«æå†…å­˜è¡¨ï¼›<br><br>æ’åºè¿‡ç¨‹æœ¬èº«æ˜¯ä¸å¢åŠ æ‰«æè¡Œæ•°çš„<br><br>","user_name":"ä½œè€…å›å¤","comment_id":65213,"uid":"1264162","ip_address":"","utype":1,"ctime":1549156529,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":1,"race_medal":0,"score":"31613884814","product_id":100020801,"comment_content":"20000è¡Œæ˜¯æŒ‡ï¼šæ‰«æ10000è¡Œåˆ°å†…å­˜ä¸´æ—¶è¡¨ï¼Œè¿˜æœ‰10000è¡Œæ˜¯éšæœºæ’åºå—","like_count":7,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438362,"discussion_content":"ç¬¬ä¸€ä¸ª10000æ˜¯æ‰«æåŸè¡¨ï¼Œç¬¬äºŒä¸ª10000æ˜¯æ‰«æå†…å­˜è¡¨ï¼›\n\næ’åºè¿‡ç¨‹æœ¬èº«æ˜¯ä¸å¢åŠ æ‰«æè¡Œæ•°çš„\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1549156529,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":79568,"user_name":"big-new","can_delete":false,"product_type":"c1","uid":1343129,"ip_address":"","ucode":"5BFDEC5A641959","user_header":"https://static001.geekbang.org/account/avatar/00/14/7e/99/2d064061.jpg","comment_is_top":false,"comment_ctime":1553508528,"is_pvip":false,"discussion_count":5,"race_medal":0,"score":"27323312304","product_id":100020801,"comment_content":"æ‚¨å¥½ï¼Œè€å¸ˆï¼Ÿè¯·é—®å…¨å­—æ®µæ’åºã€rowidæ’åº  ä¸  ä¸´æ—¶æ–‡ä»¶ç®—æ³•ï¼ˆå½’å¹¶æ’åºç®—æ³•ï¼‰ã€ä¼˜å…ˆé˜Ÿåˆ—æ’åºç®—æ³•çš„  ä½œç”¨ç‚¹åˆ†åˆ«åœ¨å“ªé‡Œï¼Ÿèµ¶ç´§è¿™ä¸¤ç§æ¦‚å¿µåˆ†ä¸æ¸…æ¥šäº†ã€‚éº»çƒ¦å¸®å¿™è§£ç­”ä¸‹ç–‘æƒ‘~ï¼Œè°¢è°¢ï¼Ÿ","like_count":6,"discussions":[{"author":{"id":1022507,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqOpANMwDibLmj5IGJh6dTw300sZ1BHM5sG3sZv1A1rvCHOiblPD3jgFOiaMVVujtctWnQbVFoNPpRgw/132","nickname":"alioo","note":"","ucode":"F36A38C1F5FFAB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":46492,"discussion_content":"å½“sqlä¸­æœ‰order byè¦æ±‚æ’åºï¼Œè€Œæ­¤æ—¶æ²¡æœ‰åˆé€‚çš„ç´¢å¼•å¯ä»¥é¿å…æ’åºçš„è¯ï¼Œåˆ™åªèƒ½é€‰æ‹©ä¸€ç§æ’åºæ–¹å¼ï¼ˆè¦ä¹ˆå…¨å­—æ®µæ’åºï¼Œè¦ä¹ˆrowidæ’åºï¼‰ï¼Œå¦å¤–æ’åºæ—¶éœ€è¦ç©ºé—´æ¥æçš„ï¼ˆè¦ä¹ˆä½¿ç”¨å†…å­˜ä¸´æ—¶è¡¨ï¼Œè¦ä¹ˆä½¿ç”¨æ–‡ä»¶ä¸´æ—¶è¡¨ï¼‰ã€‚å½“sqlä¸­é™¤äº†æœ‰order by Xè¿˜æœ‰limit Yæ—¶ï¼Œè¯´æ˜æ’åºåçš„ç»“æœå–å‰Yå°±å¤Ÿäº†ï¼Œé‚£ä¹ˆåœ¨é€‰æ‹©æ’åºç®—æ³•ï¼ˆè¦ä¹ˆæ˜¯å½’å¹¶æ’åºï¼Œè¦ä¹ˆæ˜¯ä¼˜å…ˆé˜Ÿåˆ—ï¼‰ä¸Šä¼šé€‰æ‹©ä¼˜å…ˆé˜Ÿåˆ—ç®—æ³•","likes_number":7,"is_delete":false,"is_hidden":false,"ctime":1573175374,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1290245,"avatar":"https://static001.geekbang.org/account/avatar/00/13/b0/05/48e3f940.jpg","nickname":"æ— å¿ƒ","note":"","ucode":"2AD84413DB4A72","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1022507,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqOpANMwDibLmj5IGJh6dTw300sZ1BHM5sG3sZv1A1rvCHOiblPD3jgFOiaMVVujtctWnQbVFoNPpRgw/132","nickname":"alioo","note":"","ucode":"F36A38C1F5FFAB","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":115825,"discussion_content":"æœ‰ä¸ªç–‘é—®ï¼Œæ’åºä¸€å®šä¼šç”¨åˆ°ä¸´æ—¶è¡¨å—ï¼Ÿå› ä¸ºæˆ‘çœ‹Using temporaryå’ŒUsing filesortæ˜¯ä¸¤ä¸ªé€‰é¡¹ï¼Œæœ‰æ²¡æœ‰åªä½¿ç”¨ä¸´æ—¶æ–‡ä»¶æ¥å­˜æ”¾æ•°æ®ç»“æ„ï¼Œä¸åˆ›å»ºä¸´æ—¶è¡¨çš„æƒ…å†µï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578038231,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":46492,"ip_address":""},"score":115825,"extra":""},{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1290245,"avatar":"https://static001.geekbang.org/account/avatar/00/13/b0/05/48e3f940.jpg","nickname":"æ— å¿ƒ","note":"","ucode":"2AD84413DB4A72","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":159811,"discussion_content":"æ’åºä¸ä¸€å®šä¼šç”¨åˆ°ä¸´æ—¶è¡¨ï¼Œä¸Šé¢è¯´äº†ï¼Œå¦‚æœæ’åºæ—¶è¿˜éœ€è¦å¦å¤–çš„ç©ºé—´æ¥æçš„ï¼Œå°±éœ€è¦ä¸´æ—¶è¡¨äº†ã€‚å¦‚æœèƒ½ç”¨å…¨å­—æ®µæˆ–rowidæ’åºç®—æ³•æå®šçš„è¯ï¼Œé‚£å°±ä¸ç”¨ä¸´æ—¶è¡¨äº†ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1580735240,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":115825,"ip_address":""},"score":159811,"extra":""},{"author":{"id":2497728,"avatar":"https://static001.geekbang.org/account/avatar/00/26/1c/c0/b8ff566a.jpg","nickname":"æˆ‘æ˜¯å¤§æ©™å­132","note":"","ucode":"61660568CF07C9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1022507,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqOpANMwDibLmj5IGJh6dTw300sZ1BHM5sG3sZv1A1rvCHOiblPD3jgFOiaMVVujtctWnQbVFoNPpRgw/132","nickname":"alioo","note":"","ucode":"F36A38C1F5FFAB","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":560480,"discussion_content":"æ’åºçš„ç©ºé—´æ˜¯sortbufferï¼Œå†…å­˜/ç£ç›˜ä¸´æ—¶è¡¨æ˜¯å› ä¸ºrandï¼ˆï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649343398,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":46492,"ip_address":""},"score":560480,"extra":""}]},{"author":{"id":1285652,"avatar":"","nickname":"mycat","note":"","ucode":"6878BD32D042F2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":308065,"discussion_content":"å…¨å­—æ®µæ’åºã€rowidæ’åºè¿™äº›æ˜¯å±äºæ’åºç®—æ³•è¿˜æ˜¯å±äºæ’åºæ–¹å¼ï¼Ÿæˆ‘è®¤ä¸ºè¿™æ˜¯æ’åºæ–¹å¼ï¼Œä¸çŸ¥é“è¿™ä¸ªç†è§£å¯¹ä¸å¯¹ã€‚\n\nä¸´æ—¶æ–‡ä»¶(å½’å¹¶æ’åº)ã€ä¼˜å…ˆé˜Ÿåˆ—æ’åºè¿™ä¸¤ä¸ªåº”è¯¥æ˜¯å±äºæ’åºç®—æ³•å§ï¼Ÿ\n\nåœ¨æ’åºçš„æ—¶å€™ï¼Œæ˜¯å…ˆæŠŠæ•°æ®æ”¾å…¥sort bufferä¸­ï¼Œè¿˜æ˜¯æ˜¯å…ˆåˆ¤æ–­ä¸€ä¸‹å¾…æ’åºçš„æ•°æ®å¤§å°æ˜¯å¦è¶…è¿‡äº†sort bufferçš„é™åˆ¶ï¼Œç„¶åå†å†³å®šæ˜¯åœ¨sort bufferä¸­æ’åºè¿˜æ˜¯ä½¿ç”¨ä¸´æ—¶æ–‡ä»¶æ’åºï¼Ÿ\n\næ˜¯å¦éœ€è¦ä¸´æ—¶è¡¨è¿™ä¸ªåˆ¤æ–­ï¼Œæ˜¯åœ¨å“ªä¸ªé˜¶æ®µè¿›è¡Œåˆ¤æ–­çš„ï¼Ÿ\nç°åœ¨æ„Ÿè§‰æ•´ä¸ªæ’åºè¿‡ç¨‹å¥½ä¹±ã€‚æ²¡æœ‰ä¸€ä¸ªå®Œæ•´çš„è„‰ç»œã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1600834653,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":53063,"user_name":"æŸã€äºº","can_delete":false,"product_type":"c1","uid":1308784,"ip_address":"","ucode":"ADB42AA12A11C1","user_header":"https://static001.geekbang.org/account/avatar/00/13/f8/70/f3a33a14.jpg","comment_is_top":false,"comment_ctime":1545577356,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"27315381132","product_id":100020801,"comment_content":"ä»Šå¤©è¿™ä¸ªé—®é¢˜æˆ‘çš„ç†è§£è½¬æ¢æˆsqlæ˜¯:<br>mysql&gt; select count(*) into @C from t1;<br>set @Y = floor(@C * rand());<br>set @Y1 = floor(@C * rand());<br>set @Y2 = floor(@C * rand());<br>select LEAST(@Y,@Y1,@Y2) into @Y4;<br>select GREATEST(@Y,@Y1,@Y2) into @Y6;<br>select floor((@Y6+@Y4)&#47;2) into @Y5;<br>set @sql = concat(&quot;select id into @id from t1 limit &quot;, @Y4, &quot;,1&quot;);<br>set @sql1 = concat(&quot;select id into @id1 from t1 where id&gt;@id limit &quot;, @Y5-@Y4, &quot;,1&quot;);<br>set @sql2 = concat(&quot;select id into @id2 from t1 where id&gt;@id1 limit &quot;, @Y6-@Y5, &quot;,1&quot;);<br>prepare stmt from @sql;<br>prepare stmt1 from @sql1;<br>prepare stmt2 from @sql2;<br>execute stmt;<br>execute stmt1;<br>execute stmt2;<br>DEALLOCATE prepare stmt;<br>DEALLOCATE prepare stmt1;<br>DEALLOCATE prepare stmt2;<br>select * from t1 where id in (@id,@id1,@id2);<br>æ„Ÿè§‰mysqlä¸å¤ªé€‚åˆå¤„ç†éšæœºæ•°çš„é—®é¢˜,ç¨ç¨æœ‰ç‚¹å¤æ‚ã€‚<br>ä¸è¿‡è¿™ä¸¤èŠ‚è¯¾æ”¶è·å¾ˆå¤š,å¯¹order byæ’åºç†è§£åˆæ·±å…¥ä¸å°‘,åŸæ¥å †æ’åºæ˜¯æ”¾limit m,mè¡Œå¦‚æœæ¯”sort_bufferå ç”¨ç©ºé—´å°,åˆ™å…ˆæŠŠmè¡Œæ”¾è¿›æ•°æ®é›†é‡Œ,ç„¶ååœ¨æŠŠè¡¨é‡Œçš„æ•°æ®ä¸€è¡Œä¸€è¡Œå–å‡ºæ¥åšæ¯”è¾ƒã€‚å¾—å‡ºçš„ç»“æœ,åœ¨æ ¹æ®MRRå›è¡¨å–æ•°æ®ã€‚<br>è€å¸ˆ,æˆ‘æœ‰ä¸€ä¸ªé—®é¢˜:<br>å †æ’åº,å¦‚æœæ¯”è¾ƒçš„å€¼æ˜¯ç›¸ç­‰çš„æƒ…å†µä¸‹,ä¼šä¸ä¼šæ›¿æ¢åœ¨sort_bufferé‡Œï¼Ÿæˆ‘æ„Ÿè§‰æ˜¯ä¸ä¼š,å¦‚æœä¸ä¼šæ‰èƒ½è§£é‡Šå¾—é€šæ’åºå€¼ç›¸ç­‰,idä¸ç­‰çš„æƒ…å†µ,ä¸ç®¡æ˜¯å¤§é¡¶å †è¿˜æ˜¯å°é¡¶å †,å¾—åˆ°çš„ç»“æœé›†éƒ½æ˜¯idç›¸å¯¹æ›´å°çš„","like_count":6},{"had_liked":false,"id":52291,"user_name":"è€æ¨åŒå¿—","can_delete":false,"product_type":"c1","uid":1246199,"ip_address":"","ucode":"3F334F0CFD3DE6","user_header":"https://static001.geekbang.org/account/avatar/00/13/03/f7/3a493bec.jpg","comment_is_top":false,"comment_ctime":1545359401,"is_pvip":false,"replies":[{"id":"19013","content":"ä¸èƒ½ï¼Œéœ€è¦ä»å¤´å†æ¥","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1545362448,"ip_address":"","comment_id":52291,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23020195881","product_id":100020801,"comment_content":"å¯¹åº”order by è¿˜æœ‰ä¸ªç–‘é—®ï¼Œå¦‚æœ æˆ‘ç¬¬ä¸€æ¬¡æ‰§è¡Œ select * from a limit 0,100  ç´§æ¥ç€æ‰§è¡Œselect * from a limit 100,200 èƒ½ä½¿ç”¨ç¬¬ä¸€æ¬¡æ‰§è¡Œçš„ç»“æœå—ï¼Ÿå¦‚æœè¡¨æ²¡æœ‰å‘é€å˜åŒ–çš„æ—¶å€™å¯ä»¥å—","like_count":6,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":433823,"discussion_content":"ä¸èƒ½ï¼Œéœ€è¦ä»å¤´å†æ¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545362448,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":241424,"user_name":"moonfox","can_delete":false,"product_type":"c1","uid":1526355,"ip_address":"","ucode":"902BFF40EFA9FA","user_header":"https://static001.geekbang.org/account/avatar/00/17/4a/53/063f9d17.jpg","comment_is_top":false,"comment_ctime":1597290209,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"18777159393","product_id":100020801,"comment_content":"è¯·é—®ä¸‹ï¼Œæ—¢ç„¶å¯ä»¥æ”¾å…¥å†…å­˜çš„ä¸´æ—¶è¡¨ï¼Œä¸ºä»€ä¹ˆä¸ç›´æ¥åœ¨sort_bufferä¸­è¿›è¡Œå‘¢ï¼Ÿè¿˜æœ‰æˆ‘åœ¨æ…¢æŸ¥è¯¢æ—¥å¿—é‡Œï¼Œæ˜¾ç¤ºæ‰«æçš„è¡Œæ•°æ˜¯10003ï¼Œè€Œä¸æ˜¯20003","like_count":4,"discussions":[{"author":{"id":1441589,"avatar":"https://static001.geekbang.org/account/avatar/00/15/ff/35/b744c027.jpg","nickname":"æƒœæ˜”","note":"","ucode":"B3478E40B612FC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":308934,"discussion_content":"æˆ‘ä¹Ÿæœ‰åŒæ ·ç–‘æƒ‘","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1601126226,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":64782,"user_name":"é˜¿ç‹¸çˆ±JAVA","can_delete":false,"product_type":"c1","uid":1033566,"ip_address":"","ucode":"597971781B1500","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c5/5e/24cc5a72.jpg","comment_is_top":false,"comment_ctime":1548907286,"is_pvip":false,"replies":[{"id":"22935","content":"åŠ æ²¹æ…¢æ…¢æ¥å“ˆ~~ğŸ˜†","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1548922654,"ip_address":"","comment_id":64782,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18728776470","product_id":100020801,"comment_content":"æ„Ÿè§‰è€å¸ˆçš„æ€è·¯å¾ˆå®½å¹¿ï¼Œå°±åƒä¸€ä¸ªå¤§å®è—ï¼Œæ–¹æ¡ˆä¸€ä¸è¡Œè¿˜æœ‰æ–¹æ¡ˆäºŒï¼Œæ–¹æ¡ˆäºŒä¸è¡Œè¿˜æœ‰æ–¹æ¡ˆä¸‰ï¼Œå¹¶ä¸”æ¯ä¸ªæ–¹æ¡ˆéƒ½èƒ½ç»™å‡ºå…·ä½“çš„æ€§èƒ½æ¯”è¾ƒä¸è¯æ®ï¼Œè€Œè‡ªå·±è‡ªèƒ½é¡ºç€è€å¸ˆçš„æ€è·¯è¿˜èƒ½æ˜ç™½ï¼Œå¯æ˜¯ä¸€æ—¦æ‰©å±•å¼€æ¥ï¼Œä¾¿å¤§è„‘ä¸€ç‰‡ç©ºç™½","like_count":4,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438176,"discussion_content":"åŠ æ²¹æ…¢æ…¢æ¥å“ˆ~~ğŸ˜†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548922654,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":52419,"user_name":"é²¸é±¼","can_delete":false,"product_type":"c1","uid":1020655,"ip_address":"","ucode":"2231296F71166E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/92/ef/ba3f7260.jpg","comment_is_top":false,"comment_ctime":1545378970,"is_pvip":false,"replies":[{"id":"19108","content":"æŠŠinnodb_flush_at_trx_commitè®¾ç½®æˆ2ï¼Œsync_binlogè®¾ç½®æˆ1000çœ‹çœ‹","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1545398333,"ip_address":"","comment_id":52419,"utype":1}],"discussion_count":3,"race_medal":0,"score":"18725248154","product_id":100020801,"comment_content":"è¿è¡Œè€å¸ˆç»™çš„å­˜å‚¨è¿‡ç¨‹ç‰¹åˆ«æ…¢ï¼Œæ€ä¹ˆæ’æŸ¥åŸå› å‘¢ï¼Œmysqlç‰ˆæœ¬æ˜¯8.0.13","like_count":4,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":433868,"discussion_content":"æŠŠinnodb_flush_at_trx_commitè®¾ç½®æˆ2ï¼Œsync_binlogè®¾ç½®æˆ1000çœ‹çœ‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545398333,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1487346,"avatar":"https://static001.geekbang.org/account/avatar/00/16/b1/f2/3bcc1fad.jpg","nickname":"Caesar Yang","note":"","ucode":"359561CC3B04B3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":7036,"discussion_content":"ä¿®æ”¹å­˜å‚¨è¿‡ç¨‹  åœ¨å¾ªç¯ä¹‹å‰å¼€å¯äº‹åŠ¡  åœ¨å¾ªç¯ç»“æŸæäº¤äº‹åŠ¡  å°†å¤šäº‹åŠ¡æ”¹æˆå•ä¸ªäº‹åŠ¡  æ‰§è¡Œå°±ä¼šå¾ˆå¿«","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1567306128,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1640757,"avatar":"https://static001.geekbang.org/account/avatar/00/19/09/35/7d2ced23.jpg","nickname":"æ ·å„¿","note":"","ucode":"AB01047991559C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":71889,"discussion_content":"æˆ‘çš„æ˜¯8.0.15ï¼Œæ˜¯1ä¹ŸæŒºå¿«çš„ã€‚ã€‚ä¸çŸ¥é“ä¸ºä»€ä¹ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575463890,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":62011,"user_name":"æ°ä¹‹7","can_delete":false,"product_type":"c1","uid":1297232,"ip_address":"","ucode":"F7DA2E21085332","user_header":"https://static001.geekbang.org/account/avatar/00/13/cb/50/66d0bd7f.jpg","comment_is_top":false,"comment_ctime":1547880598,"is_pvip":false,"replies":[{"id":"21960","content":"æ˜¯çš„ï¼Œæ•°æ®ç»“æ„å’Œç®—æ³•åœ¨æ•°æ®åº“é‡Œé¢æ˜¯å¾ˆé‡è¦çš„ï¼Œå› ä¸ºç”¨æ•°æ®åº“çš„æ—¶å€™ï¼Œæˆ‘ä»¬æµ‹å®ŒåŠŸèƒ½ï¼Œä¸‹ä¸€æ­¥å°±æ˜¯æµ‹è¯•æ€§èƒ½ã€‚<br>æ€§èƒ½å¥½ä¸å¥½ï¼Œå…¨é ç®—æ³•æ”¯æ’‘^_^","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547894892,"ip_address":"","comment_id":62011,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14432782486","product_id":100020801,"comment_content":"é€šè¿‡è¿™ä¸€èŠ‚çš„é˜…è¯»ï¼Œè€å¸ˆè®²è¿°äº†ä¸€ä¸ªAPPé¡µé¢éšæœºä¸‰ä¸ªå•è¯çš„SQLæ’åºé—®é¢˜åŠèƒŒåçš„åŸç†ã€‚<br><br>åœ¨ä½¿ç”¨Order by rand()æ’åºçš„æ—¶å€™ï¼Œä½¿ç”¨çš„æ˜¯ä¸´æ—¶å†…å­˜è¡¨ï¼Œç”¨çš„æ˜¯Rowidçš„æ’åºæ–¹æ³•ã€‚å¦å¤–ä¸€ç§æ˜¯ç£ç›˜ä¸´æ—¶è¡¨ï¼Œç”¨çš„æ˜¯ä¼˜å…ˆæ’åºç®—æ³•ã€‚æœ€ååœ¨ä»‹ç»äº†éšæœºæ’åºç®—æ³•ã€‚<br><br>ç›®å‰ï¼Œæˆ‘æ²¡æœ‰å­¦è¿‡è®¡ç®—æœºæ•°æ®ç»“æ„ï¼Œåº”è¯¥å¯¹ä»Šå¤©è€å¸ˆè®²è¿°çš„ç®—æ³•ç»“æ„æœ‰äº›é™Œç”Ÿï¼Œä½†æˆ‘çŸ¥é“å¦‚æœéšæœºäº§ç”Ÿçš„æ•°æ‰§è¡Œå¾ˆæ…¢çš„è¯ï¼Œæ•°æ®åº“è®¾è®¡ç»“æ„åº”è¯¥å¯ä»¥è¿›è¡Œä¼˜åŒ–ï¼Œä¹Ÿå¯¹æ•°æ®åº“åŸç†å’Œæ•°æ®ç»“æ„èƒ½è”ç³»çš„å¦‚æ­¤ç´§å¯†äº§ç”Ÿçš„å¥½å¥‡ã€‚<br>","like_count":3,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437069,"discussion_content":"æ˜¯çš„ï¼Œæ•°æ®ç»“æ„å’Œç®—æ³•åœ¨æ•°æ®åº“é‡Œé¢æ˜¯å¾ˆé‡è¦çš„ï¼Œå› ä¸ºç”¨æ•°æ®åº“çš„æ—¶å€™ï¼Œæˆ‘ä»¬æµ‹å®ŒåŠŸèƒ½ï¼Œä¸‹ä¸€æ­¥å°±æ˜¯æµ‹è¯•æ€§èƒ½ã€‚\næ€§èƒ½å¥½ä¸å¥½ï¼Œå…¨é ç®—æ³•æ”¯æ’‘^_^","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547894892,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":325726,"user_name":"InfoQ_å°æ±¤","can_delete":false,"product_type":"c1","uid":1739070,"ip_address":"","ucode":"E4C30DB7A9B54C","user_header":"https://static001.geekbang.org/account/avatar/00/1a/89/3e/0dd8e96b.jpg","comment_is_top":false,"comment_ctime":1639107392,"is_pvip":false,"replies":[{"id":"118292","content":"æ‰§è¡Œ limit a,b çš„æ—¶å€™ï¼Œä¼šæŠŠa+bè¿™ä¹ˆå¤šæ•°æ®å…¨éƒ¨è¯»å‡ºæ¥ï¼Œç„¶åä¸¢æ‰å‰é¢aæ¡ï¼Œè¿”å›åé¢çš„bæ¡ï¼Œå› æ­¤aå¾ˆå¤§çš„æ—¶å€™ï¼Œæ€§èƒ½ä¼šå¾ˆå·®","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1264162","ctime":1639385060,"ip_address":"","comment_id":325726,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10229041984","product_id":100020801,"comment_content":"æœ‰ä¸ªé—®é¢˜æƒ³é—®ä¸‹è€å¸ˆ å°±æ˜¯æ¸¸æ ‡è·Ÿlimitåœ¨å¤§æ•°æ®é‡åˆ†é¡µçš„æ—¶å€™ æ€§èƒ½æ€ä¹ˆæ ·ï¼Ÿè€å¸ˆå¯ä»¥ç®€å•è¯´è¯´ä¹ˆ","like_count":2,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":538256,"discussion_content":"æ‰§è¡Œ limit a,b çš„æ—¶å€™ï¼Œä¼šæŠŠa+bè¿™ä¹ˆå¤šæ•°æ®å…¨éƒ¨è¯»å‡ºæ¥ï¼Œç„¶åä¸¢æ‰å‰é¢aæ¡ï¼Œè¿”å›åé¢çš„bæ¡ï¼Œå› æ­¤aå¾ˆå¤§çš„æ—¶å€™ï¼Œæ€§èƒ½ä¼šå¾ˆå·®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639385060,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":88941,"user_name":"daydaynobug","can_delete":false,"product_type":"c1","uid":1336773,"ip_address":"","ucode":"C6923405EB62BA","user_header":"https://static001.geekbang.org/account/avatar/00/14/65/c5/97003360.jpg","comment_is_top":false,"comment_ctime":1556030154,"is_pvip":false,"replies":[{"id":"32650","content":"éƒ½åœ¨å†…å­˜çš„è¯å°±ç”¨å¿«æ’<br><br>éœ€è¦ç”¨åˆ°æ–‡ä»¶çš„è¯ï¼Œæœ‰ç”¨åˆ°åˆå¹¶æ’åº","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1556850892,"ip_address":"","comment_id":88941,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10145964746","product_id":100020801,"comment_content":"è€å¸ˆï¼Œåœ¨sort_bufferä¸­æ’åºæ€»æ˜¯ä¼šä½¿ç”¨å¿«æ’å—ï¼Œè¿™ä¸ªè·Ÿå¾…æ’åºçš„æ•°æ®é‡æœ‰å…³ç³»å—ï¼Œä¼šä¸ä¼šä½¿ç”¨å…¶ä»–çš„æ’åºç®—æ³•å•Š","like_count":2,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":447955,"discussion_content":"éƒ½åœ¨å†…å­˜çš„è¯å°±ç”¨å¿«æ’\n\néœ€è¦ç”¨åˆ°æ–‡ä»¶çš„è¯ï¼Œæœ‰ç”¨åˆ°åˆå¹¶æ’åº","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1556850892,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":79286,"user_name":"J Sun","can_delete":false,"product_type":"c1","uid":1003877,"ip_address":"","ucode":"18873D0F4EFD8F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/51/65/35f711a1.jpg","comment_is_top":false,"comment_ctime":1553424663,"is_pvip":false,"replies":[{"id":"30022","content":"ä¸æ˜¯ï¼Œæ˜¯ç³»ç»Ÿçº¿ç¨‹é‡Œçš„ä¸´æ—¶å†…å­˜ï¼Œä¸æ˜¯ä¸´æ—¶è¡¨","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1554432710,"ip_address":"","comment_id":79286,"utype":1}],"discussion_count":2,"race_medal":0,"score":"10143359255","product_id":100020801,"comment_content":"sort buffer æ˜¯ä¸ªä»€ä¹ˆé¬¼ï¼Ÿæ˜¯ä¸´æ—¶è¡¨å—ï¼Ÿå¿˜è€å¸ˆè§£ç­”ä¸€ä¸‹ï¼","like_count":2,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":444430,"discussion_content":"ä¸æ˜¯ï¼Œæ˜¯ç³»ç»Ÿçº¿ç¨‹é‡Œçš„ä¸´æ—¶å†…å­˜ï¼Œä¸æ˜¯ä¸´æ—¶è¡¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554432710,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":159918,"discussion_content":"çœ‹çœ‹16ç« ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580739453,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":79272,"user_name":"Jesson","can_delete":false,"product_type":"c1","uid":1212313,"ip_address":"","ucode":"EBADA87D9E5AE6","user_header":"https://static001.geekbang.org/account/avatar/00/12/7f/99/6a92ff95.jpg","comment_is_top":false,"comment_ctime":1553421238,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"10143355830","product_id":100020801,"comment_content":"Y1ï¼Œ Y2ï¼Œ Y3 å¯èƒ½ç›¸åŒï¼","like_count":2,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":159825,"discussion_content":"æœºç‡å¾ˆå°ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580735883,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":64196,"user_name":"linqw","can_delete":false,"product_type":"c1","uid":1134138,"ip_address":"","ucode":"09DCFE98C54DD8","user_header":"https://static001.geekbang.org/account/avatar/00/11/4e/3a/86196508.jpg","comment_is_top":false,"comment_ctime":1548692698,"is_pvip":false,"replies":[{"id":"22959","content":"2. åé¢æœ‰ä¸€ç¯‡ä¸“é—¨è®²ä¸´æ—¶è¡¨çš„å“ˆ<br>3. 6ä¸ªå­—èŠ‚å±äºä¸­è§„ä¸­çŸ©ï¼Œæ€»æ˜¯è¦é€‰ä¸€ä¸ªé•¿åº¦ï¼Œmaxå’Œminï¼Œé»˜è®¤æ˜¯ä¼šèµ°ç´¢å¼•çš„<br>4. è¿™ä¸ªå°±æ˜¯rowidæ’åºå’Œå…¨å­—æ®µæ’åºçš„åŒºåˆ«ã€‚éƒ½æœ‰å¯èƒ½ä¼šé€‰çš„ï¼Œçœ‹å•è¡Œå¤§å°<br>5. çœ‹åˆ°ç°è±¡å¸¦ç€é—®é¢˜gdb æ•ˆæœä¸é”™ï¼ˆå°±æ˜¯æ¯”è¾ƒæ¯ç‡¥ï¼‰","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1548941212,"ip_address":"","comment_id":64196,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10138627290","product_id":100020801,"comment_content":"çœ‹äº†ä¸¤ç¯‡çš„æ’åºï¼Œæƒ³å¤§è‡´å†™ä¸‹è‡ªå·±çš„ç†è§£ï¼Œè€å¸ˆå¸®å¿™çœ‹ä¸‹å“¦<br>1ã€order byå†…éƒ¨ä¼šä½¿ç”¨å½’å¹¶æ’åºï¼Œæ ¹æ®sort buffer sizeå†³å®šæ˜¯å¦éœ€è¦ä½¿ç”¨å¤–éƒ¨ï¼ˆç£ç›˜ï¼‰æ’åºï¼Œæ ¹æ®max_length_for_sort_dataå†³å®šä½¿ç”¨å…¨å­—æ®µæ’åºè¿˜æ˜¯rowidæ’åºï¼Œä¸åŒç‚¹æ˜¯rowidæ’åºï¼Œåªä½¿ç”¨æ’åºå­—æ®µå’Œä¸»é”®ï¼Œä¼šåœ¨åŸæœ‰çš„åŸºç¡€ä¸Šï¼Œå¤šè¿›è¡Œå›è¡¨æŸ¥è¯¢ï¼Œå¤šäº†ç£ç›˜æ“ä½œï¼Œä¸ºæ­¤å¯ä»¥ä½¿ç”¨å¤åˆæŸ¥è¯¢ï¼Œè¿™æ ·ä»ç´¢å¼•ä¸­æŸ¥è¯¢å‡ºæ¥çš„æ•°æ®ï¼Œå°±æ˜¯æœ‰åºçš„ï¼Œå¯ä»¥ç›´æ¥è¿›è¡Œå›è¡¨ï¼Œè¿”å›resultï¼Œä¹Ÿå¯ä»¥è€ƒè™‘æ˜¯å¦ä½¿ç”¨è¦†ç›–ç´¢å¼•ï¼Œç›´æ¥è¿”å›å€¼ï¼Œå¦‚æœorder byåé¢åŠ ä¸Šlimit numï¼Œnumæ˜¯å°å€¼ï¼Œåœ¨5.6ä»¥ä¸Šä¼šä½¿ç”¨ä¼˜å…ˆé˜Ÿåˆ—è¿›è¡Œæ’åºã€‚<br>2ã€éšæœºæ’åºï¼Œç”±äºéšæœºæ’åºä¼šä½¿ç”¨ä¸´æ—¶è¡¨ï¼Œæ ¹æ®tmp_table_sizeæ¥åˆ¤æ–­ä¸´æ—¶è¡¨æ˜¯å¦æ˜¯å†…å­˜ä¸´æ—¶è¡¨ï¼Œå¦‚æœä½¿ç”¨çš„æ˜¯å†…å­˜ä¸´æ—¶è¡¨ï¼Œä½¿ç”¨memoryå¼•æ“ï¼Œç”±äºå…¶memoryä¸æ˜¯é‡‡ç”¨b+æ ‘ç»“æ„ï¼Œé‡‡ç”¨æœ‰åºé›†åˆä¹ˆï¼Ÿå†…éƒ¨ä¼šå°†å…¶è¦æŸ¥è¯¢å‡ºæ¥çš„å€¼ï¼Œæ¢ç®—å…¶ç±»ä¼¼æ•°ç»„çš„ä¸‹æ ‡å’Œæ’åºçš„å­—æ®µï¼Œå­˜æ”¾åœ¨sort_bufferä¸­ï¼Ÿå¥½å¥‡ä¸€ç‚¹å¦‚æœè¦æŸ¥è¯¢å‡ºæ¥çš„å­—æ®µæ˜¯ä¸å•å•æ˜¯wordï¼Œè€Œæ˜¯æ›´å¤šçš„å­—æ®µï¼Œå†…éƒ¨ä¹Ÿä¼šè®¡ç®—å‡ºç±»ä¼¼æ•°ç»„çš„ä¸‹æ ‡ä¹ˆï¼Ÿå†…éƒ¨é‡‡ç”¨çš„æ˜¯hashä¹ˆï¼Ÿè¿˜æ˜¯å…¶ä»–ç®—æ³•ï¼Œå­˜æ”¾åœ¨sort bufferä¸­åï¼Œä¼šå’Œ1ç‚¹ä¸€æ ·ï¼Œæ ¹æ®å…¶sort buffer sizeå’Œmax lengthè¿›è¡Œå†³å®šï¼Œå¦‚æœä½¿ç”¨çš„ä¸´æ—¶è¡¨æ˜¯ç£ç›˜ï¼Œé»˜è®¤innodbï¼Œä¸ºæ­¤ä¸´æ—¶è¡¨ä¼šå­˜æ”¾rowidï¼Œwordï¼Œrandomï¼Ÿå†æ ¹æ®sort buffer sizeæ¥å†³å®šæ˜¯ä½¿ç”¨rowidè¿˜æ˜¯å…¨å­—æ®µæ’åºã€‚<br>3ã€æœ‰ç‚¹ä¸å¤ªç†è§£rowidé»˜è®¤6ä¸ªå­—èŠ‚ï¼Œæ˜¯ä¸ºäº†é˜²æ­¢è¡¨è¿‡å¤§ä¹ˆï¼Ÿè¿˜æœ‰max(ä¸»é”®)å’Œminï¼Œä¸ä¼šèµ°ç´¢å¼•ï¼Œå†…éƒ¨é€»è¾‘æ˜¯ï¼Ÿ<br>4ã€å¯¹ç¬¬16ç« æ–‡ç« è¯¾åé—®é¢˜ç­”æ¡ˆçš„ç–‘é—®ï¼Œæˆ‘ä»¬åˆ†å¼€å–ï¼Œåœ¨å½’å¹¶æ’åºï¼Œæœ¬æ¥æ˜¯mysqlè¦æ˜¯å†…éƒ¨sort buffer sizeå¤Ÿå¤§ï¼Œä¹Ÿæ˜¯ä½¿ç”¨å½’å¹¶æ’åºï¼Œæˆ‘ä»¬å†å–å‡ºæ•°æ®å†ç”¨å¤–éƒ¨æ’åºæ˜¯ä¸ºäº†é˜²æ­¢sort buffer sizeä¸å¤Ÿçš„ç£ç›˜æ’åºä¹ˆï¼Ÿæ„Ÿè§‰cityå’Œnameå­—æ®µå®é™…çš„å­—æ®µé•¿åº¦åº”è¯¥ä¹Ÿä¸ä¼šå¾ˆå¤§ï¼Œæ˜¯å¦å¯ä»¥è€ƒè™‘åœ¨ç»´æŠ¤ä¸€ä¸ªï¼ˆnameï¼Œcityï¼‰çš„å¤åˆç´¢å¼•ä¹ˆï¼Ÿ<br>5ã€è€å¸ˆï¼Œåœ¨çœ‹mysqlæºç æ˜¯æœ‰å•¥æ¯”è¾ƒå¥½çš„å»ºè®®ä¹ˆï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437902,"discussion_content":"2. åé¢æœ‰ä¸€ç¯‡ä¸“é—¨è®²ä¸´æ—¶è¡¨çš„å“ˆ\n3. 6ä¸ªå­—èŠ‚å±äºä¸­è§„ä¸­çŸ©ï¼Œæ€»æ˜¯è¦é€‰ä¸€ä¸ªé•¿åº¦ï¼Œmaxå’Œminï¼Œé»˜è®¤æ˜¯ä¼šèµ°ç´¢å¼•çš„\n4. è¿™ä¸ªå°±æ˜¯rowidæ’åºå’Œå…¨å­—æ®µæ’åºçš„åŒºåˆ«ã€‚éƒ½æœ‰å¯èƒ½ä¼šé€‰çš„ï¼Œçœ‹å•è¡Œå¤§å°\n5. çœ‹åˆ°ç°è±¡å¸¦ç€é—®é¢˜gdb æ•ˆæœä¸é”™ï¼ˆå°±æ˜¯æ¯”è¾ƒæ¯ç‡¥ï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548941212,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":54478,"user_name":"Mr.Strive.Z.H.L","can_delete":false,"product_type":"c1","uid":1030198,"ip_address":"","ucode":"6D97E159E2EECD","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b8/36/542c96bf.jpg","comment_is_top":false,"comment_ctime":1545879036,"is_pvip":false,"replies":[{"id":"19801","content":"å­æŸ¥è¯¢ä¸ä¸€å®šä¼šéœ€è¦ä¸´æ—¶è¡¨ï¼Œä½ è¦çœ‹explainçš„ç»“æœå“ˆ<br><br>å¦‚æœéœ€è¦ä¸´æ—¶è¡¨ï¼Œè¿˜è¦å†çœ‹ä¸´æ—¶è¡¨å¤§å°ï¼Œå°çš„ç”¨memoryå¼•æ“ï¼Œå¤§çš„ç”¨innodb ","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1545903906,"ip_address":"","comment_id":54478,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10135813628","product_id":100020801,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œè¿™ç¯‡çš„order by rand()ç”¨åˆ°äº†ä¸´æ—¶è¡¨ã€‚<br>é‚£ä¹ˆåµŒå¥—çš„sqlè¯­å¥ï¼š<br>select * from (select * from t1 where ...) t2 where .....<br>æ‹¬å·å†…éƒ¨æŸ¥è¯¢å‡ºçš„ç»“æœé›†æ˜¯ä¸æ˜¯ä¹Ÿä¼šä»¥ ä¸´æ—¶è¡¨çš„å½¢å¼ å­˜åœ¨ï¼Ÿ?å¦‚æœæ˜¯çš„è¯ï¼Œé‚£ä¹ˆè¿™ä¸ªä¸´æ—¶è¡¨æ˜¯ä¸æ˜¯ä¹Ÿå­˜å‚¨åœ¨innodbå†…éƒ¨å‘€ï¼Œç­‰å¾…äº‹åŠ¡ç»“æŸåå†æ¸…ç©ºï¼Ÿï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":434468,"discussion_content":"å­æŸ¥è¯¢ä¸ä¸€å®šä¼šéœ€è¦ä¸´æ—¶è¡¨ï¼Œä½ è¦çœ‹explainçš„ç»“æœå“ˆ\n\nå¦‚æœéœ€è¦ä¸´æ—¶è¡¨ï¼Œè¿˜è¦å†çœ‹ä¸´æ—¶è¡¨å¤§å°ï¼Œå°çš„ç”¨memoryå¼•æ“ï¼Œå¤§çš„ç”¨innodb ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545903906,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":52648,"user_name":"è·¯è¿‡","can_delete":false,"product_type":"c1","uid":1316401,"ip_address":"","ucode":"7152C19ED024CC","user_header":"https://static001.geekbang.org/account/avatar/00/14/16/31/ae8adf82.jpg","comment_is_top":false,"comment_ctime":1545466259,"is_pvip":false,"replies":[{"id":"19171","content":"ç¡®å®æ²¡åœ°æ–¹çœ‹ğŸ˜“","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1545489868,"ip_address":"","comment_id":52648,"utype":1}],"discussion_count":2,"race_medal":0,"score":"10135400851","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæˆ‘ä¸ºå¿«é€Ÿæ‰§è¡Œå­˜å‚¨è¿‡ç¨‹ã€‚æŠŠå‚æ•°ä½ç½®ä¸ºï¼š<br>innodb_flush_log_at_trx_commit=2<br>sync_binlog=0<br>æ‰§è¡Œé©¬ä¸Šå°±ç»“æŸäº†ã€‚å¦åˆ™è¦ç­‰å¾ˆä¹…ã€‚è¯·æ•™è€å¸ˆï¼Œä¸Šé¢ä¿®æ”¹åï¼Œæ•°æ®å’Œlogè¿˜æ²¡æœ‰çœŸæ­£åˆ·åˆ°ç£ç›˜ã€‚è¯·é—®æˆ‘åœ¨å“ªé‡Œå¯ä»¥çœ‹åˆ°ç›¸å…³çš„ä¿¡æ¯ã€‚<br>ä½¿ç”¨show engine innodb status\\G çœ‹åˆ°ï¼š<br>0 pending log flushes, 0 pending chkp writes<br>20197 log i&#47;o&#39;s done, 0.00 log i&#47;o&#39;s&#47;second<br>è°¢è°¢ï¼","like_count":2,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":433937,"discussion_content":"ç¡®å®æ²¡åœ°æ–¹çœ‹ğŸ˜“","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545489868,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1442290,"avatar":"https://static001.geekbang.org/account/avatar/00/16/01/f2/ad48e316.jpg","nickname":"é‚±æµ·æ¶›","note":"","ucode":"87285FC6CE4566","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6366,"discussion_content":"çœ‹OSçš„è„é¡µåˆ·ç›˜æƒ…å†µ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566870862,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":52450,"user_name":"é“¶å¤ª","can_delete":false,"product_type":"c1","uid":1051765,"ip_address":"","ucode":"B505D15F7CB839","user_header":"https://static001.geekbang.org/account/avatar/00/10/0c/75/e7c6c403.jpg","comment_is_top":false,"comment_ctime":1545384349,"is_pvip":false,"replies":[{"id":"19128","content":"ä½ ä¸€ä¸ªäº‹åŠ¡é‡Œé¢æ˜¯ä¸æ˜¯ä¸æ­¢ä¸€ä¸ªè¿™æ ·çš„update è¯­å¥?","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1545401702,"ip_address":"","comment_id":52450,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10135318941","product_id":100020801,"comment_content":"è¯·æ•™ä¸‹è€å¸ˆï¼š<br>è¡¨Aæœ‰skuå’Œwarehouseä¸¤ä¸ªå­—æ®µç»„æˆçš„å”¯ä¸€ç´¢å¼•,udx_sku_warehouseï¼Œé«˜å¹¶å‘ä¸‹å®¹æ˜“æ­»é”<br>æ‰§è¡Œçš„è¯­å¥ï¼šupdate A set quantity=quantity+1 where sku=xx and warehouse=xx<br>æŸ¥çœ‹æ­»é”çš„æ—¥å¿—ï¼šä¸¤ä¸ªäº‹åŠ¡éƒ½åœ¨ç­‰å¾…udx_sku_warehouseçš„Xé”ï¼Œä½†ä¸¤ä¸ªäº‹åŠ¡ä¿®æ”¹çš„å¹¶ä¸æ˜¯åŒä¸€æ¡è®°å½•ï¼Œä¸æ˜¯å¾ˆæ˜ç™½ï¼Œå¯ä»¥è®²è§£ä¸€ä¸‹å—ï¼Ÿå¤šè°¢<br>*** (1) TRANSACTION:<br>TRANSACTION 466841895, ACTIVE 0.021 sec starting index read<br>mysql tables in use 1, locked 1<br>LOCK WAIT 11 lock struct(s), heap size 2936, 9 row lock(s), undo log entries 11<br>LOCK BLOCKING MySQL thread id: 1927379 block 1895984<br>MySQL thread id 1895984, OS thread handle 0x2b2ffed85700, query id 783954740 10.27.8.222 oms updating<br>UPDATE oms_stock<br>    SET quantity = quantity + -1<br>    WHERE sku_id = 13978218638755841<br>      AND virtual_warehouse_id = 13867758969455616<br>*** (1) WAITING FOR THIS LOCK TO BE GRANTED:<br>RECORD LOCKS space id 297 page no 89 n bits 424 index `udx_sku_id_warehouse_id` of table `oms_biz`.`oms_stock` trx id 466841895 lock_mode X locks rec but not gap waiting<br>Record lock, heap no 18 PHYSICAL RECORD: n_fields 3; compact format; info bits 0<br><br>*** (2) TRANSACTION:<br>TRANSACTION 466841901, ACTIVE 0.015 sec starting index read<br>mysql tables in use 1, locked 1<br>11 lock struct(s), heap size 2936, 8 row lock(s), undo log entries 9<br>MySQL thread id 1927379, OS thread handle 0x2b2f97440700, query id 783954758 10.27.8.222 oms updating<br>UPDATE oms_stock<br>    SET quantity = quantity + -1<br>    WHERE sku_id = 1809040003028<br>      AND virtual_warehouse_id = 13867758969455616<br>*** (2) HOLDS THE LOCK(S):<br>RECORD LOCKS space id 297 page no 89 n bits 424 index `udx_sku_id_warehouse_id` of table `oms_biz`.`oms_stock` trx id 466841901 lock_mode X locks rec but not gap<br>Record lock, heap no 18 PHYSICAL RECORD: n_fields 3; compact format; info bits 0<br><br>*** (2) WAITING FOR THIS LOCK TO BE GRANTED:<br>RECORD LOCKS space id 297 page no 74 n bits 400 index `udx_sku_id_warehouse_id` of table `oms_biz`.`oms_stock` trx id 466841901 lock_mode X locks rec but not gap waiting<br>Record lock, heap no 12 PHYSICAL RECORD: n_fields 3; compact format; info bits 0","like_count":2,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":433881,"discussion_content":"ä½ ä¸€ä¸ªäº‹åŠ¡é‡Œé¢æ˜¯ä¸æ˜¯ä¸æ­¢ä¸€ä¸ªè¿™æ ·çš„update è¯­å¥?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545401702,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":52313,"user_name":"è‘£èˆª","can_delete":false,"product_type":"c1","uid":1231787,"ip_address":"","ucode":"9CA208FD26F849","user_header":"https://static001.geekbang.org/account/avatar/00/12/cb/ab/1aac53bf.jpg","comment_is_top":false,"comment_ctime":1545361557,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10135296149","product_id":100020801,"comment_content":"å †ç»“æ„ï¼Œå¤§é¡¶æ ‘ï¼Œå°é¡¶æ ‘ï¼ï¼ï¼","like_count":2},{"had_liked":false,"id":326431,"user_name":"å¤§å£åƒè‚‰å–é…’","can_delete":false,"product_type":"c1","uid":2132654,"ip_address":"","ucode":"E429EAD5262AC9","user_header":"https://static001.geekbang.org/account/avatar/00/20/8a/ae/2edc03e9.jpg","comment_is_top":false,"comment_ctime":1639529703,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5934496999","product_id":100020801,"comment_content":"æˆ‘å¯¹order byæ’åºæµç¨‹æœ‰ç‚¹ç‚¹ç–‘é—®â“<br>1ã€æˆ‘ä»¬æ‰€æœ‰wordè®°å½•éƒ½ä¼šåœ¨ä¸´æ—¶å†…å­˜è¡¨ç”Ÿæˆä¸€ä¸ªæ¦‚ç‡å€¼ï¼Œå­˜å‚¨åœ¨ä¸´æ—¶è¡¨Rå­—æ®µé‡Œé¢ï¼Œå¹¶åœ¨å†…å­˜ä¸´æ—¶è¡¨ä¸­æŒ‰ç…§Ræ’åºï¼Œé‚£ä¸ºä»€ä¹ˆè¿˜è¦åœ¨sort bufferä¸­åœ¨æ’åºå‘¢ï¼Œç›¸å½“äºæ’åºäº†ä¸¤æ¬¡ï¼Ÿ","like_count":1},{"had_liked":false,"id":298028,"user_name":"8.13.3.27.30","can_delete":false,"product_type":"c1","uid":1556358,"ip_address":"","ucode":"2DE3CE3E338BAB","user_header":"https://static001.geekbang.org/account/avatar/00/17/bf/86/c0cb35f0.jpg","comment_is_top":false,"comment_ctime":1623893520,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5918860816","product_id":100020801,"comment_content":"ä¸ŠæœŸçš„é—®é¢˜åˆ†2æ¬¡æŸ¥è¯¢çš„æ–¹æ¡ˆæœ‰ä¸ªç–‘é—®ï¼š<br><br>ä¸€æ¬¡æŸ¥è¯¢åªéœ€è¦ä¸€æ¬¡ç½‘ç»œå¼€é”€ã€äºŒæ¬¡æŸ¥è¯¢éœ€è¦2æ¬¡ç½‘ç»œå¼€é”€ï¼Œè¿™ä¸ªæ–¹æ¡ˆçœŸçš„ä¼šæ›´å¿«å—ï¼Ÿ","like_count":1},{"had_liked":false,"id":289344,"user_name":"Steven","can_delete":false,"product_type":"c1","uid":1253652,"ip_address":"","ucode":"3FE64459842015","user_header":"https://static001.geekbang.org/account/avatar/00/13/21/14/423a821f.jpg","comment_is_top":false,"comment_ctime":1618985101,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5913952397","product_id":100020801,"comment_content":"ã€ç£ç›˜ä¸´æ—¶è¡¨ã€‘éƒ¨åˆ†çš„ä¾‹å­ï¼Œæ€ä¹ˆçŸ¥é“æ˜¯ä½¿ç”¨äº†ã€å†…å­˜ä¸´æ—¶è¡¨ã€‘è¿˜æ˜¯ã€ç£ç›˜ä¸´æ—¶è¡¨ã€‘ï¼Ÿ","like_count":1},{"had_liked":false,"id":229631,"user_name":"å¼ ä¿­","can_delete":false,"product_type":"c1","uid":1194527,"ip_address":"","ucode":"6A94534F11C4BF","user_header":"https://static001.geekbang.org/account/avatar/00/12/3a/1f/5b8f0d71.jpg","comment_is_top":false,"comment_ctime":1593079058,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5888046354","product_id":100020801,"comment_content":"mysql8ã€‚0çš„æµ‹è¯•ç»“æœæ˜¯10003è¡Œäº†ã€‚","like_count":1},{"had_liked":false,"id":209130,"user_name":"æ¨","can_delete":false,"product_type":"c1","uid":1971269,"ip_address":"","ucode":"7EFEFE285975C6","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/oltLEqTrmHm2aJP99BK6tHu5h7hp4aj08wR5Wt6H31iadFduDAVvjYKmhQ2nvGbLV3lkVdiat2GRasgWXoJeTibUg/132","comment_is_top":false,"comment_ctime":1587514072,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5882481368","product_id":100020801,"comment_content":"å¤§å®¶éƒ½å¥½å‰å®³  æˆ‘ç°åœ¨éƒ½åªèƒ½ç†è§£ä½ ä»¬è¯´çš„   è¯„è®ºåŒºå¤§ç‰›ä¹Ÿå¥½å¤š","like_count":1},{"had_liked":false,"id":188376,"user_name":"spoofer","can_delete":false,"product_type":"c1","uid":1768852,"ip_address":"","ucode":"6723F64ACC3F27","user_header":"https://static001.geekbang.org/account/avatar/00/1a/fd/94/8704d2b0.jpg","comment_is_top":false,"comment_ctime":1584346166,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5879313462","product_id":100020801,"comment_content":"ç°å®åœºæ™¯ä¸‹ï¼Œè¿™ç§éœ€æ±‚çš„è§£å†³æ–¹å¼æœ‰å¾ˆå¤šç§è®¾è®¡ï¼Œè€Œä¸”ä½¿ç”¨æ•°æ®åº“æ¥åšè§£å†³æ–¹æ¡ˆåº”è¯¥ä¸æ˜¯æœ€ä¼˜è§£ã€‚ä½†ç”¨è¿™ä¸ªä¾‹å­æ¥åšæ’åºçš„å­¦ä¹ æ˜¯å¾ˆèµçš„","like_count":1},{"had_liked":false,"id":156954,"user_name":"èåœæ¡","can_delete":false,"product_type":"c1","uid":1692713,"ip_address":"","ucode":"4BC975BBFE50A7","user_header":"https://static001.geekbang.org/account/avatar/00/19/d4/29/5f52a82c.jpg","comment_is_top":false,"comment_ctime":1575000323,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"5869967619","product_id":100020801,"comment_content":"mysql 8.0 <br>select word from words order by rand() limit 3;<br>Query_time: 0.008170  Lock_time: 0.000158 Rows_sent: 3  Rows_examined: 10003<br>åªæ‰«æäº†10003è¡Œã€‚<br>è¯·é—®æ˜¯å¦8.0ç‰ˆæœ¬å¯¹å†…å­˜ä¸´æ—¶è¡¨åšäº†ä¼˜åŒ–ï¼Œä¹‹åsort_bufferå¯¹å†…å­˜ä¸´æ—¶è¡¨çš„æ‰«æä¸è®¡å…¥æ‰«æè¡Œæ•°","like_count":1,"discussions":[{"author":{"id":1284212,"avatar":"https://static001.geekbang.org/account/avatar/00/13/98/74/6edfe4c1.jpg","nickname":"icephobia","note":"","ucode":"CD383B35994331","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":132357,"discussion_content":"ä½ æ‰§è¡Œä¸€ä¸‹ SET max_length_for_sort_data = 16; ä½ çš„æ…¢æŸ¥è¯¢æ—¥å¿—æ’åºæ˜¯ç”¨äº†å…¨å­—æ®µæ’åºï¼Œæ‰€ä»¥æ˜¯10003ã€‚æ”¹ä¸‹å‚æ•°ä»¥åèµ°çš„æ˜¯rowidæ’åºå°±æ˜¯20003äº†ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1578900630,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1603078,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/zAZv4NyuS21Y1qk45j8JiaoEYdA5Zgc1PqpJsBokz5bZVmdkf6kNWvT4cUAAKAdH6TgN52DWZhiaH6wNFhw14nRg/132","nickname":"Geek_4e4ec2","note":"","ucode":"6DAD5EE4FFB195","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1284212,"avatar":"https://static001.geekbang.org/account/avatar/00/13/98/74/6edfe4c1.jpg","nickname":"icephobia","note":"","ucode":"CD383B35994331","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":536315,"discussion_content":"è¿™ä¸ªå‚æ•°åœ¨8.0.20åå·²ç»è¿‡æ—¶äº†ï¼Œè®¾ç½®ä¸ä¼šæœ‰ä»»ä½•æ•ˆæœ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638757229,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":132357,"ip_address":""},"score":536315,"extra":""}]},{"author":{"id":1526355,"avatar":"https://static001.geekbang.org/account/avatar/00/17/4a/53/063f9d17.jpg","nickname":"moonfox","note":"","ucode":"902BFF40EFA9FA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298421,"discussion_content":"æˆ‘çš„ä¹Ÿæ˜¯ï¼Œ10003è¡Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597295149,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":111552,"user_name":"æ®‹å¤©å™¬é­‚","can_delete":false,"product_type":"c1","uid":1506609,"ip_address":"","ucode":"A2AD8303A4518D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/q2HwchogzNiavKhIB4GfAxH6B88NhSoC7B7keVEUqiaP6JPokDUNJLYehocOyqYqrhA3iaxywyRXLYkYJjDUQESZw/132","comment_is_top":false,"comment_ctime":1562566091,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5857533387","product_id":100020801,"comment_content":"è€å¸ˆå¥½ï¼Œè¯·æ•™ä¸€ä¸‹ï¼Œorder by rand()çš„æµç¨‹åˆ†æä¸­ï¼Œæœ€ä»€ä¹ˆæ˜¯ä¸¤æ­¥æ’åºï¼Œæ„Ÿè§‰ç¬¬ä¸€æ­¥æ’åºæ„ä¹‰ä¸å¤§ï¼Œåªè¦æœ‰ç¬¬äºŒæ­¥å°±å¯ä»¥äº†ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":159904,"discussion_content":"å†ä»”ç»†ç¢ç£¨ä¸€ä¸‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580739260,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":53075,"user_name":"Sinyo","can_delete":false,"product_type":"c1","uid":1307297,"ip_address":"","ucode":"57B243E7AB86A5","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJAibnPX9jW8kqLcIfibjic8GbkQkEUYyFKJkc39hZhibVlNrqwTjdLozkqibI2IwACd5YzofYickNxFnZg/132","comment_is_top":false,"comment_ctime":1545579524,"is_pvip":false,"replies":[{"id":"19233","content":"åŸè¡¨çš„idå­—æ®µæœ¬æ¥å°±æ˜¯ä¸»é”®å“ˆ<br><br>ä½†æ˜¯ä¸´æ—¶è¡¨è¿˜æ˜¯éœ€è¦çš„ï¼Œå› ä¸ºéœ€è¦ä¸€ä¸ªè¡¨ï¼Œè¡¨é‡Œæœ‰ä¸ªå­—æ®µæ¥æ”¾éšæœºæ•°","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1545592030,"ip_address":"","comment_id":53075,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5840546820","product_id":100020801,"comment_content":"è€å¸ˆï¼Œå¦‚æœè¿˜æ˜¯ç”¨rand()æ’åºï¼Œä½†å›¾4 åŸè¡¨ä¸­çš„idå­—æ®µæ˜¯ä¸»é”®ï¼›<br>å†…å­˜ä¸´æ—¶è¡¨çš„Wå­—æ®µæ˜¯ä¸æ˜¯ä»£æ›¿äº†sort_bufferä¸­çš„POSå­—æ®µï¼Œä¸ä¼šç”¨åˆ°sort_bufferäº†å‘¢ï¼Ÿ<br>è¿˜æ˜¯åŠ äº†idä¸ºä¸»é”®å°±ä¸ä¼šç”¨åˆ°å†…å­˜ä¸´æ—¶è¡¨äº†å‘¢ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":434028,"discussion_content":"åŸè¡¨çš„idå­—æ®µæœ¬æ¥å°±æ˜¯ä¸»é”®å“ˆ\n\nä½†æ˜¯ä¸´æ—¶è¡¨è¿˜æ˜¯éœ€è¦çš„ï¼Œå› ä¸ºéœ€è¦ä¸€ä¸ªè¡¨ï¼Œè¡¨é‡Œæœ‰ä¸ªå­—æ®µæ¥æ”¾éšæœºæ•°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545592030,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":52823,"user_name":"ä¸äºŒ","can_delete":false,"product_type":"c1","uid":1140951,"ip_address":"","ucode":"1E1527C71FD9DB","user_header":"https://static001.geekbang.org/account/avatar/00/11/68/d7/714c3d89.jpg","comment_is_top":false,"comment_ctime":1545535721,"is_pvip":false,"replies":[{"id":"19197","content":"ä¸€ä¸ªå†…å­˜ä¸€ä¸ªç£ç›˜ä¸Š<br>æ²¡æœ‰ä¸€æ‘¸ä¸€æ ·å‘€ï¼Œè¦åŠ ä¸ªrand()å­—æ®µ","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1545538488,"ip_address":"","comment_id":52823,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5840503017","product_id":100020801,"comment_content":"sort_bufferå’Œä¸´æ—¶æ–‡ä»¶åŒºåˆ«æ˜¯å•¥ï¼Œä¸´æ—¶æ–‡ä»¶æ—¢ç„¶è·Ÿæ•°æ®è¡¨ä¸€æ¨¡ä¸€æ ·ï¼Œä¸ºå•¥è¿˜è¦ä¸´æ—¶æ–‡ä»¶","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":433989,"discussion_content":"ä¸€ä¸ªå†…å­˜ä¸€ä¸ªç£ç›˜ä¸Š\næ²¡æœ‰ä¸€æ‘¸ä¸€æ ·å‘€ï¼Œè¦åŠ ä¸ªrand()å­—æ®µ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545538488,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":52662,"user_name":"å‘æ¡æ©™å­ ã€‚","can_delete":false,"product_type":"c1","uid":1259218,"ip_address":"","ucode":"ED076F4534FFED","user_header":"https://static001.geekbang.org/account/avatar/00/13/36/d2/c7357723.jpg","comment_is_top":false,"comment_ctime":1545469346,"is_pvip":false,"replies":[{"id":"19164","content":"Limit 100è¿™ä¸ªåº”è¯¥æ¯”è¾ƒç¡®å®šæ˜¯æœ‰æ”¶ç›Šçš„ï¼Œåé¢ç¿»é¡µè¶Šæ¥è¶Šå¤§ä»¥åï¼Œå°±éœ€è¦çœ‹çœ‹äº†ï¼Œå¤šæŸ¥ä¸€æ¬¡å…¶å®å…³ç³»ä¸å¤§ï¼Œè¿”å›æ•°æ®é‡å¦‚æœå¤ªå¤§æ˜¯éœ€è¦è€ƒè™‘çš„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1545478556,"ip_address":"","comment_id":52662,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5840436642","product_id":100020801,"comment_content":"è¿™ç¯‡æ–‡ç« åˆ·æ–°äº†å¯¹ä¸Šç¯‡æ–‡ç« çš„è®¤çŸ¥ ï¼Œ åŸæ¥æ˜¯å¦ä½¿ç”¨å†…å­˜æ’åºè¿˜æ˜¯å¤–éƒ¨æ’åºä¸å•å•åªæ˜¯æ ¹æ® å†…å­˜å‚æ•°çš„å¤§å°æ¥å†³å®š ï¼Œ è¿˜ä¼šæ ¹æ®è¿”å›çš„æƒ…å†µæŒ‰ç…§é€‰æ‹©çš„ç®—æ³•æ¥å†³å®šå…·ä½“ä½¿ç”¨å“ªç§æ’åº ã€‚<br><br>å¦å¤–å¯¹ä¸Šä¸€ç¯‡çš„è§£ç­”æˆ‘åªæƒ³åˆ°ä¼šæ’åº ï¼Œ è€å¸ˆæ‰©å±•å¦‚ä½•ä»ä¸šåŠ¡ä¸Šå¤„ç†æ¥é¿å…æ’åºçš„æ€æƒ³ ï¼Œä¹Ÿè®©æˆ‘å­¦åˆ°å¾ˆå¤š ã€‚å¾ˆå¤šè´Ÿè´£çš„æˆ–è€…æ‰§è¡Œæ¯”è¾ƒæ…¢çš„sqlï¼Œå¯ä»¥é€šè¿‡ä¸šåŠ¡ä¸Šçš„é€»è¾‘è°ƒæ•´æ¥æ‹†è§£è¿™äº›sql ä½¿å…¶æ€§èƒ½æé«˜ ã€‚<br><br>ä½†æ˜¯è¿™é‡Œæœ‰ä¸ªå°ç–‘é—® ï¼š è™½ç„¶é€šè¿‡ä¸¤æ¬¡æŸ¥è¯¢è¿”å›ç»“æœåè¿›è¡Œå½’å¹¶æ’åºå¤„ç†å¯ä»¥é¿å…mysqlæ’åºå¸¦æ¥çš„æ€§èƒ½æŸè€— ã€‚ ä½†æ˜¯è¿™æ ·å¤„ç†ç”± ä¸€æ¬¡æŸ¥è¯¢è¯·æ±‚å˜æˆäº† ä¸¤æ¬¡æŸ¥è¯¢è¯·æ±‚ ã€‚å¤šä¸€æ¬¡è¯·æ±‚ä¼šå¤šå¸¦æ¥ä¸€äº›ç½‘ç»œioä¹‹ç±»çš„æ€§èƒ½æ¶ˆè€— ã€‚è¿™æ ·æ•´ä½“çœ‹æ¥æ˜¯å¦åè€Œæ›´ä¸åˆ’ç®—<br><br><br>å¦å¤–æ„Ÿè°¢ @æŸäºº çš„å›ç­” ï¼Œçœ‹äº†ä½ çš„å›ç­”ä¹Ÿå­¦ä¹ åˆ°äº†å¾ˆå¤š ğŸ™","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":433942,"discussion_content":"Limit 100è¿™ä¸ªåº”è¯¥æ¯”è¾ƒç¡®å®šæ˜¯æœ‰æ”¶ç›Šçš„ï¼Œåé¢ç¿»é¡µè¶Šæ¥è¶Šå¤§ä»¥åï¼Œå°±éœ€è¦çœ‹çœ‹äº†ï¼Œå¤šæŸ¥ä¸€æ¬¡å…¶å®å…³ç³»ä¸å¤§ï¼Œè¿”å›æ•°æ®é‡å¦‚æœå¤ªå¤§æ˜¯éœ€è¦è€ƒè™‘çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545478556,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":52635,"user_name":"ä¼¼æ°´æµå¹´","can_delete":false,"product_type":"c1","uid":1304443,"ip_address":"","ucode":"D114A8E273133C","user_header":"https://static001.geekbang.org/account/avatar/00/13/e7/7b/71da8283.jpg","comment_is_top":false,"comment_ctime":1545459658,"is_pvip":false,"replies":[{"id":"19161","content":"å—¯ï¼Œå½’å¹¶æ’åºå°±æ˜¯æŠŠä¸¤ä¸ªæœ‰åºçš„é›†åˆå˜æˆä¸€ä¸ªæœ‰åºé›†åˆã€‚<br><br>æ¯”å¦‚ï¼Œä½ å¯ä»¥æƒ³ä¸€ä¸‹ï¼Œä¸€ä¸ªå¥‡æ•°æ•°ç»„1ï¼Œ3ï¼Œ5â€¦99 ï¼Œå¦ä¸€ä¸ª2ï¼Œ4ï¼Œ6â€¦ 100ï¼›<br>æ€ä¹ˆæ ·åˆæˆä¸€ä¸ªæœ‰åºæ•°ç»„æœ€å¿«","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1545469701,"ip_address":"","comment_id":52635,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5840426954","product_id":100020801,"comment_content":"å¯¹äºä»€ä¹ˆæ˜¯å½’å¹¶æ’åºè¿˜æ˜¯ä¸æ˜ç™½ï¼Œè¿™ä¹Ÿç®—ä¸€ç§æ’åºå§ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":433929,"discussion_content":"å—¯ï¼Œå½’å¹¶æ’åºå°±æ˜¯æŠŠä¸¤ä¸ªæœ‰åºçš„é›†åˆå˜æˆä¸€ä¸ªæœ‰åºé›†åˆã€‚\n\næ¯”å¦‚ï¼Œä½ å¯ä»¥æƒ³ä¸€ä¸‹ï¼Œä¸€ä¸ªå¥‡æ•°æ•°ç»„1ï¼Œ3ï¼Œ5â€¦99 ï¼Œå¦ä¸€ä¸ª2ï¼Œ4ï¼Œ6â€¦ 100ï¼›\næ€ä¹ˆæ ·åˆæˆä¸€ä¸ªæœ‰åºæ•°ç»„æœ€å¿«","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545469701,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":52576,"user_name":"é£åŠ¨è‰","can_delete":false,"product_type":"c1","uid":1303051,"ip_address":"","ucode":"6ED975DC4DD0D0","user_header":"https://static001.geekbang.org/account/avatar/00/13/e2/0b/e3c8765a.jpg","comment_is_top":false,"comment_ctime":1545443125,"is_pvip":false,"replies":[{"id":"19157","content":"æ˜¯çš„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1545458845,"ip_address":"","comment_id":52576,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5840410421","product_id":100020801,"comment_content":"è€å¸ˆå¥½ï¼æ‚¨è¯´çš„åœ¨å»ºäºŒçº§ç´¢å¼•çš„è¿‡ç¨‹ä¸­ï¼Œæ˜¯æŠŠä¸»é”®å–å‡ºæ¥æ„é€ äºŒçº§ç´¢å¼•ï¼Œè€Œä¸”è¦è¯»å…¨è¡¨ï¼Œè¿™ä¸ªè¯»å…¨è¡¨æ„æ€æ˜¯ä¸æ˜¯ï¼Œè¯»äº†ä¸»é”®ï¼Œå°±æ„å‘³ç€ä¸»é”®çš„å¶å­èŠ‚ç‚¹ä¹Ÿä¸€èµ·è¯»å‡ºæ¥äº†ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":433910,"discussion_content":"æ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545458845,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":52259,"user_name":"å¾€äº‹éšé£ï¼Œé¡ºå…¶è‡ªç„¶","can_delete":false,"product_type":"c1","uid":1235692,"ip_address":"","ucode":"F266EC6B143E38","user_header":"https://static001.geekbang.org/account/avatar/00/12/da/ec/779c1a78.jpg","comment_is_top":false,"comment_ctime":1545355428,"is_pvip":false,"replies":[{"id":"18998","content":"å­—èŠ‚","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1545361481,"ip_address":"","comment_id":52259,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5840322724","product_id":100020801,"comment_content":"ä¸´æ—¶è¡¨è®¾ç½®å‚æ•°å•ä½æ˜¯kè¿˜æ˜¯m?","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":433809,"discussion_content":"å­—èŠ‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545361481,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":52217,"user_name":"james.h.fu","can_delete":false,"product_type":"c1","uid":1330945,"ip_address":"","ucode":"B5773B8DCB1F7A","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKib804LQiawZc7KHzerDF2B4zGvPByXKTVR1h6HibRlc8sQFAujIO3M02GicOg9Qia9ibBZlbmDyJcCKyQ/132","comment_is_top":false,"comment_ctime":1545352732,"is_pvip":false,"replies":[{"id":"19012","content":"è¿˜çœŸä¸æ˜¯ï¼Œå¦‚æœåªæœ‰è¿™ä¸ªéœ€æ±‚ï¼Œå•ç‹¬æ­ä¸€ä¸ªrediså°±å¤šäº†â€¦","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1545362405,"ip_address":"","comment_id":52217,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5840320028","product_id":100020801,"comment_content":"å—¯ï¼Œåº”è¯¥èŒè´£åˆ†ç¦»ï¼Œè®©redis,eså»åšè¿™ç±»ä¸šåŠ¡ã€‚","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":433787,"discussion_content":"è¿˜çœŸä¸æ˜¯ï¼Œå¦‚æœåªæœ‰è¿™ä¸ªéœ€æ±‚ï¼Œå•ç‹¬æ­ä¸€ä¸ªrediså°±å¤šäº†â€¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545362405,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":52202,"user_name":"æ³°æ ¼æ¨","can_delete":false,"product_type":"c1","uid":1182151,"ip_address":"","ucode":"DF23BD9D31B536","user_header":"https://static001.geekbang.org/account/avatar/00/12/09/c7/861b4a70.jpg","comment_is_top":false,"comment_ctime":1545351096,"is_pvip":false,"replies":[{"id":"19006","content":"å †æ’åºæ˜¯ä¸€ç§å«æ³•ï¼Œä»£ç é‡Œé¢å†™ä¼˜å…ˆé˜Ÿåˆ—æ’åºï¼Œæˆ‘è¿˜æ˜¯ç…§ç›´ç¿»è¯‘ğŸ˜„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1545362050,"ip_address":"","comment_id":52202,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5840318392","product_id":100020801,"comment_content":"ä¸€èˆ¬ä¸å«ä¼˜å…ˆé˜Ÿåˆ—æ’åºå§ï¼Œå«å †æ’åºå§ã€‚<br>countæ€»æ•°å¯ä»¥ç¼“å­˜ï¼Œè®¿é—®0ã€‚ç¨‹åºé€šè¿‡ä»£ç éšæœºä¸€ä¸ª0åˆ°æ€»æ•°-100çš„ä½ç½®è®°ä¸ºpï¼Œç„¶ålimit pï¼Œ100ã€‚åœ¨ä»100ä¸ªé‡Œéšæœºé€‰æ‹©3ä¸ªidï¼Œå›è¡¨æŸ¥æ•°æ®ã€‚<br>æ‰«æçš„è¡Œæ•°ä¸ºp+100+3ã€‚çœ‹3ä¸ªå­—ç¬¦éšæœºçš„ç¨‹åº¦ï¼Œ100å¯ä»¥è°ƒæ•´","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":433780,"discussion_content":"å †æ’åºæ˜¯ä¸€ç§å«æ³•ï¼Œä»£ç é‡Œé¢å†™ä¼˜å…ˆé˜Ÿåˆ—æ’åºï¼Œæˆ‘è¿˜æ˜¯ç…§ç›´ç¿»è¯‘ğŸ˜„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545362050,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":52196,"user_name":"å³°","can_delete":false,"product_type":"c1","uid":1056019,"ip_address":"","ucode":"C53CB64E8E7D19","user_header":"https://static001.geekbang.org/account/avatar/00/10/1d/13/31ea1b0b.jpg","comment_is_top":false,"comment_ctime":1545349758,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5840317054","product_id":100020801,"comment_content":"ç›´æ¥åœ¨è§£å†³æ–¹æ¡ˆä¸€çš„åŸºç¡€ä¸Šæ”¹æˆåªå–ç­‰äºidï¼ˆid=@xï¼‰çš„ç»“æœï¼Œå¦‚æœå–ä¸åˆ°å°±å†å–ç›´åˆ°å–åˆ°ä¸ºæ­¢ã€‚å½“ç„¶å¦‚æœè¦å–å¤šæ¡ï¼Œå°±è¦ä¸šåŠ¡ç«¯åšå»é‡ï¼Œé‡å¤çš„è¯å°±å†éšæœºå–ä¸€æ¬¡ã€‚è¿™ä¸ªæ— ç–‘é€‚åˆçš„åœºæ™¯æ˜¯idå°½å¯èƒ½æ²¡æœ‰å¤ªå¤§çš„ç©ºæ´ï¼Œlimitçš„æ•°æ®å°½å¯èƒ½å°‘ã€‚","like_count":1},{"had_liked":false,"id":355247,"user_name":"Geek_323a60","can_delete":false,"product_type":"c1","uid":2797976,"ip_address":"å››å·","ucode":"CDC276EC255411","user_header":"","comment_is_top":false,"comment_ctime":1661224039,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1661224039","product_id":100020801,"comment_content":"1. å†…å­˜ä¸´æ—¶è¡¨å’Œç£ç›˜ä¸´æ—¶è¡¨å­˜å‚¨çš„å†…å®¹æ˜¯ä¸€æ ·çš„å—ï¼Ÿä½¿ç”¨ç£ç›˜ä¸´æ—¶è¡¨çš„åœºæ™¯ä»…ä»…æ˜¯å†…å­˜æ”¾ä¸ä¸‹ä¸´æ—¶è¡¨è½¬è€Œæ”¾å…¥ç£ç›˜å—ï¼Ÿ<br>2. åœ¨è®²è§£å†…å­˜ä¸´æ—¶è¡¨æ—¶ä¸»è¦é’ˆå¯¹çš„æ˜¯  select word from words order by rand() limit 3; è¿›è¡Œåˆ†æçš„ã€‚æˆ‘æƒ³é—®ä¸€ä¸‹ select word from words order by word limit 3; æ‰§è¡Œæ—¶å†…å­˜ä¸´æ—¶è¡¨ä¸­çš„å­—æ®µæ˜¯ä»€ä¹ˆæ ·çš„å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":355242,"user_name":"Geek_323a60","can_delete":false,"product_type":"c1","uid":2797976,"ip_address":"å››å·","ucode":"CDC276EC255411","user_header":"","comment_is_top":false,"comment_ctime":1661221925,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1661221925","product_id":100020801,"comment_content":"ç£ç›˜ä¸´æ—¶è¡¨å­˜å‚¨çš„å†…å®¹åº”è¯¥å’Œå†…å­˜ä¸´æ—¶è¡¨ä¸€æ ·çš„å§ï¼Œåªä¸è¿‡æ˜¯å†…å­˜æ”¾ä¸ä¸‹è½¬è€Œæ”¾å…¥åˆ°ç£ç›˜ä¸­è€Œå·²ã€‚å¯ä»¥è¿™ä¹ˆç†è§£å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":355241,"user_name":"Geek_323a60","can_delete":false,"product_type":"c1","uid":2797976,"ip_address":"å››å·","ucode":"CDC276EC255411","user_header":"","comment_is_top":false,"comment_ctime":1661221869,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1661221869","product_id":100020801,"comment_content":"ç£ç›˜ä¸´æ—¶è¡¨å­˜å‚¨çš„å†…å®¹åº”è¯¥å’Œå†…å­˜ä¸´æ—¶è¡¨ä¸€æ ·çš„å§ï¼Œåªä¸è¿‡æ˜¯å†…å­˜æ”¾ä¸ä¸‹è½¬è€Œæ”¾å…¥åˆ°ç£ç›˜ä¸­è€Œå·²ã€‚å¯ä»¥è¿™ä¹ˆç†è§£å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":354873,"user_name":"é™ˆé™¶","can_delete":false,"product_type":"c1","uid":2786997,"ip_address":"ä¸Šæµ·","ucode":"B0B4A0A9FEC445","user_header":"https://static001.geekbang.org/account/avatar/00/2a/86/b5/6d91d231.jpg","comment_is_top":false,"comment_ctime":1660835060,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1660835060","product_id":100020801,"comment_content":"ç”¨çª—å£å‡½æ•°overï¼Œå°±å¯ä»¥ç”¨where row = Y or =R...ä»£æ›¿limitäº†ã€‚æ—¢ä¸éœ€è¦åŠ¨æ€sqlï¼Œä¹Ÿåªéœ€è¦éå†ä¸€éè€Œä¸æ˜¯3éã€‚","like_count":0},{"had_liked":false,"id":353728,"user_name":"å‹¿æ›´æ”¹ä»»ä½•ä¿¡æ¯","can_delete":false,"product_type":"c1","uid":2028955,"ip_address":"åŒ—äº¬","ucode":"B4949BEB8B2AFD","user_header":"","comment_is_top":false,"comment_ctime":1659701837,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"1659701837","product_id":100020801,"comment_content":"æ„Ÿè§‰æœ‰äº›é—®é¢˜çš„è§£å†³æ–¹æ¡ˆéå¸¸ä¸åˆ‡åˆå®é™…å•Šï¼Œæ¯”å¦‚è¿™ä¸ªé—®é¢˜ï¼šselect * from t where city in (â€œæ­å·â€,&quot; è‹å· &quot;) order by name limit 100;ä¸ºäº†è§£å†³ä¸æ’åºé—®é¢˜ï¼Œåˆ†åˆ«å†™æˆ2ä¸ªSQLå†å½’å¹¶æ’åºã€‚<br>åœ¨å®é™…åœºæ™¯ä¸­ï¼Œæ€ä¹ˆå¯èƒ½è¿™æ ·åšå•Šã€‚ã€‚ã€‚ã€‚å¸Œæœ›ä¸¾ä¾‹åˆç†äº›ï¼Œä¸è¦è„±ç¦»ç°å®ä½¿ç”¨ã€‚","like_count":0},{"had_liked":false,"id":352264,"user_name":"Edgar Huang","can_delete":false,"product_type":"c1","uid":2709243,"ip_address":"","ucode":"9369D45C0C5A00","user_header":"https://static001.geekbang.org/account/avatar/00/29/56/fb/3342e017.jpg","comment_is_top":false,"comment_ctime":1658487829,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1658487829","product_id":100020801,"comment_content":"è¯·é—®ä¸€ä¸‹ï¼Œæ‚¨ç”»å›¾éƒ½æ˜¯ç”¨çš„ä»€ä¹ˆè½¯ä»¶å‘€","like_count":0},{"had_liked":false,"id":343322,"user_name":"å¡å¡","can_delete":false,"product_type":"c1","uid":1611484,"ip_address":"","ucode":"F0D6471CA06A6C","user_header":"https://static001.geekbang.org/account/avatar/00/18/96/dc/58ccf3f3.jpg","comment_is_top":false,"comment_ctime":1650780360,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1650780360","product_id":100020801,"comment_content":"æ—è€å¸ˆï¼Œé—®ä½ ä¸ªé—®é¢˜ï¼Œå°±æ˜¯å¯é‡å¤åº¦éš”ç¦»çº§åˆ«å·²ç»è§£å†³äº†è„è¯»ã€ä¸å¯é‡å¤åº¦ã€å¹»è¯»é—®é¢˜ï¼Œä¸ºä»€ä¹ˆè¿˜ç”±ä¸²è¡ŒåŒ–è¿™ä¸ªéš”ç¦»çº§åˆ«ï¼Ÿæˆ–è€…è¯´ä¸²è¡ŒåŒ–éš”ç¦»çº§åˆ«çš„ä½¿ç”¨åœºæ™¯æœ‰å“ªäº›ï¼Ÿ","like_count":0},{"had_liked":false,"id":342553,"user_name":"äºšæ—","can_delete":false,"product_type":"c1","uid":1018972,"ip_address":"","ucode":"4A5A6D24314B79","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8c/5c/3f164f66.jpg","comment_is_top":false,"comment_ctime":1650339295,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1650339295","product_id":100020801,"comment_content":"MySQLå¥½åƒå·²ç»æ²¡è¿™ä¸ªé—®é¢˜ğŸ˜­","like_count":0},{"had_liked":false,"id":342549,"user_name":"äºšæ—","can_delete":false,"product_type":"c1","uid":1018972,"ip_address":"","ucode":"4A5A6D24314B79","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8c/5c/3f164f66.jpg","comment_is_top":false,"comment_ctime":1650336904,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1650336904","product_id":100020801,"comment_content":"å‡è®¾idæ˜¯è¿ç»­çš„ï¼Œå–å‡ºæœ€å¤§æœ€å°å€¼ï¼Œç„¶åï¼Œè®©åº”ç”¨ç¨‹åºéšæœºå‡ºä¸€ä¸ªidï¼Œå†å»æ•°æ®åº“å–idçš„æ•°æ®ï¼Œæ‰«æ3æ¬¡","like_count":0},{"had_liked":false,"id":342114,"user_name":"ä½•å›¾å›¾","can_delete":false,"product_type":"c1","uid":2940831,"ip_address":"","ucode":"5D2F19F4ADF2AA","user_header":"","comment_is_top":false,"comment_ctime":1650018184,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1650018184","product_id":100020801,"comment_content":"è‹å·æ­å·çš„é—®é¢˜ï¼Œåˆ†å¼€å„æŸ¥100çš„æ¡ä»¶æ˜¯åœ¨å‰200ä¸ªnameçš„æ’åºä¸­ï¼Œè‹å·æ­å·åˆšå¥½å„å 100æ‰å¯ä»¥å§ï¼Ÿæ¯”å¦‚è‹å·çš„å‰500åçš„nameçš„æ’åºéƒ½åœ¨æ­å·çš„å‰é¢ï¼Œåˆ†å¼€å„æŸ¥100è¿˜å¯¹å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":341876,"user_name":"Amy","can_delete":false,"product_type":"c1","uid":2251963,"ip_address":"","ucode":"B987A7FDC45497","user_header":"https://static001.geekbang.org/account/avatar/00/22/5c/bb/9aea8098.jpg","comment_is_top":false,"comment_ctime":1649897611,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1649897611","product_id":100020801,"comment_content":"è¿™ç§éœ€æ±‚ï¼Œæ˜¯ä¸æ˜¯ç”¨ESæ›´å¥½ä¸€ç‚¹ã€‚","like_count":0},{"had_liked":false,"id":336760,"user_name":"yinwenping","can_delete":false,"product_type":"c1","uid":1088594,"ip_address":"","ucode":"90310F95D8B72F","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83er6ADlY3IFt3Rs1aVDyrTO2ytQZDiciaXVKgxCnsqZJUQHzH6I0I6PYvdoiaI6rkm7OLOxHia7t1icDyBQ/132","comment_is_top":false,"comment_ctime":1646357659,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1646357659","product_id":100020801,"comment_content":"çœ‹åˆ°é—®é¢˜çš„ç¬¬ä¸€ç›´è§‰æ˜¯ï¼Œä»ä¸»é”®idçš„èŒƒå›´å†…éšæœºå–3ä¸ªï¼Œç„¶ååœ¨ç”¨ä¸»é”®idå»æŸ¥è¡¨ã€‚<br>ç¬¬äºŒç§æ–¹æ³•: é¦–é¡µçš„è®¿é—®é‡å¤§ï¼Œå¯¹äº10000ä¸ªå•è¯ï¼Œæ•°æ®ä¹Ÿæ²¡å¤šå°‘ï¼Œéƒ½ç¼“å­˜åˆ°redisï¼Œç„¶åä»ç¼“å­˜å–ä¹Ÿå¯ä»¥å•Šï¼Œæ¯éš”ä¸€æ®µæ—¶é—´æ›´æ–°ç¼“å­˜å°±è¡Œäº†ã€‚","like_count":0},{"had_liked":false,"id":336593,"user_name":"é²Â·æœ¬","can_delete":false,"product_type":"c1","uid":1209939,"ip_address":"","ucode":"F1DEB30C21B48E","user_header":"https://static001.geekbang.org/account/avatar/00/12/76/53/21d62a23.jpg","comment_is_top":false,"comment_ctime":1646230171,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1646230171","product_id":100020801,"comment_content":"ä¸ºä»€ä¹ˆä¸ç›´æ¥åœ¨å†…å­˜ä¸´æ—¶è¡¨æ’åºï¼Œè€Œè¦è½¬åˆ°sortbufferé‡Œå»å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":336091,"user_name":"ã€‚ã€‚","can_delete":false,"product_type":"c1","uid":2853618,"ip_address":"","ucode":"A52A6043D27D87","user_header":"https://static001.geekbang.org/account/avatar/00/2b/8a/f2/6c6f7886.jpg","comment_is_top":false,"comment_ctime":1645898155,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1645898155","product_id":100020801,"comment_content":"è€å¸ˆï¼Œåœ¨éšæœºç®—æ³•3ä¸­ï¼Œselect * from t limit @Y1ï¼Œ1ï¼›æ‰«æè¡Œæ•°åº”è¯¥æ˜¯ @Y+1 å¯¹å—ï¼Ÿä½†æ˜¯æˆ‘è‡ªå·±è¯•çš„æ—¶å€™ï¼Œå‘ç° select * from t limt 0,1ï¼Œå¹¶æ²¡æœ‰èµ°ç´¢å¼•ï¼Œè€Œæ˜¯è¿›è¡Œäº†å…¨éƒ¨æ‰«æï¼Œä¸æ˜ç™½ä¸ºä»€ä¹ˆã€‚","like_count":0},{"had_liked":false,"id":332208,"user_name":"Hunter_Dark","can_delete":false,"product_type":"c1","uid":1342279,"ip_address":"","ucode":"3A07CCBC250B69","user_header":"https://static001.geekbang.org/account/avatar/00/14/7b/47/96dad3ff.jpg","comment_is_top":false,"comment_ctime":1643096094,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1643096094","product_id":100020801,"comment_content":"ä¸Šä¸€æœŸçš„ç­”æ¡ˆå¯ä»¥ç”¨ï¼ˆname, cityï¼‰åšç´¢å¼•å—ï¼Ÿ è¿™æ ·ä¸æ˜¯å¯ä»¥åˆ©ç”¨ç´¢å¼•é€’æ¨å–å®Œ 100ä¸ªå°±ç»“æŸäº†ï¼Ÿ","like_count":0},{"had_liked":false,"id":329081,"user_name":"å»ºå¼º","can_delete":false,"product_type":"c1","uid":1397126,"ip_address":"","ucode":"62B03D0E0C64EC","user_header":"https://static001.geekbang.org/account/avatar/00/15/51/86/b5fd8dd8.jpg","comment_is_top":false,"comment_ctime":1641102753,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1641102753","product_id":100020801,"comment_content":"æ€è€ƒé¢˜ï¼š<br>æˆ‘çš„æ–¹æ¡ˆæ˜¯è¿™æ ·çš„ï¼Œå…ˆå–å‡ºY1,Y2,Y3æœ€å¤§çš„é‚£ä¸ªå˜é‡ï¼Œæ ¹æ®æœ€å¤§å€¼æ„é€ ä¸€ä¸ªä¸´æ—¶è¡¨ï¼Œä¸´æ—¶è¡¨ä¸­é‡æ–°è®¾ç½®ä¸€ä¸ªè‡ªå¢çš„ä¸´æ—¶IDï¼Œæ ¹æ®ä¸‰ä¸ªå˜é‡çš„æœ€å¤§å€¼ä»åŸè¡¨ä¸­å–å‡ºå¯¹åº”çš„è®°å½•æ•°æ”¾å…¥ä¸´æ—¶è¡¨ä¸­ï¼Œç„¶åå†ä»ä¸´æ—¶è¡¨ä¸­åˆ†åˆ«å–å‡ºID=Y1ï¼ŒY2ï¼ŒY3çš„è®°å½•ï¼Œè¿™æ ·çš„æœ€å¤§çš„æ‰«æè¡Œæ•°å°±æ˜¯MAX(Y1,Y2,Y3) + 3<br><br>å¯¹åº”çš„SQLè¯­å¥ï¼š<br><br># å‡è®¾@Mæ˜¯ä¸‰ä¸ªå˜é‡çš„æœ€å¤§å€¼<br>select *<br>from <br>(<br>    select (@x := @x + 1) t_id, t.* <br>    from words<br>    ,(select @x:=0) t<br>    limit 0,@M+1<br>) t<br>where t_id in (@Y1, @Y2, @Y3);<br>","like_count":0},{"had_liked":false,"id":325717,"user_name":"InfoQ_å°æ±¤","can_delete":false,"product_type":"c1","uid":1739070,"ip_address":"","ucode":"E4C30DB7A9B54C","user_header":"https://static001.geekbang.org/account/avatar/00/1a/89/3e/0dd8e96b.jpg","comment_is_top":false,"comment_ctime":1639105030,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1639105030","product_id":100020801,"comment_content":"è€å¸ˆ è¿™ç§éšæœºå‡ºç°ç›¸åŒæ•°å­—çš„æ¦‚ç‡æ€ä¹ˆå¤„ç†ï¼Ÿcount(*)ä¸€å®š rand()å‡½æ•°æœ‰å¯èƒ½éšæœºå‡ºä¸¤æ¬¡ä¸‰æ¬¡ä¸€æ ·çš„","like_count":0},{"had_liked":false,"id":319569,"user_name":"ä¸Šæµ·","can_delete":false,"product_type":"c1","uid":2678569,"ip_address":"","ucode":"6A4F9D80D25028","user_header":"https://static001.geekbang.org/account/avatar/00/28/df/29/3c956177.jpg","comment_is_top":false,"comment_ctime":1635852826,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1635852826","product_id":100020801,"comment_content":"ç›´æ¥ç”Ÿæˆä¸€ä¸ªåœ¨1ä¸row countä¹‹é—´çš„éšæœºæ•°xï¼Œç„¶åæŸ¥è¯¢æ¡ä»¶ä¸ºrowid=xæˆ–è€…å»ºä¸€ä¸ªè‡ªå¢ç´¢å¼•åˆ—cï¼Œä»¤c=xã€‚å¦‚æœéœ€è¦è¦å¤šè¡Œï¼Œå°±é‡å¤è¿™ä¸ªè¿‡ç¨‹ã€‚<br>è¯·é—®è¿™æ ·ä¼šä¸ä¼šæ›´å¥½å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":319568,"user_name":"ä¸Šæµ·","can_delete":false,"product_type":"c1","uid":2678569,"ip_address":"","ucode":"6A4F9D80D25028","user_header":"https://static001.geekbang.org/account/avatar/00/28/df/29/3c956177.jpg","comment_is_top":false,"comment_ctime":1635852818,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1635852818","product_id":100020801,"comment_content":"ç›´æ¥ç”Ÿæˆä¸€ä¸ªåœ¨1ä¸row countä¹‹é—´çš„éšæœºæ•°xï¼Œç„¶åæŸ¥è¯¢æ¡ä»¶ä¸ºrowid=xæˆ–è€…å»ºä¸€ä¸ªè‡ªå¢ç´¢å¼•åˆ—cï¼Œä»¤c=xã€‚å¦‚æœéœ€è¦è¦å¤šè¡Œï¼Œå°±é‡å¤è¿™ä¸ªè¿‡ç¨‹ã€‚<br>è¯·é—®è¿™æ ·ä¼šä¸ä¼šæ›´å¥½å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":317726,"user_name":"qiushye","can_delete":false,"product_type":"c1","uid":1322164,"ip_address":"","ucode":"D005A152F8BEDC","user_header":"","comment_is_top":false,"comment_ctime":1634904386,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1634904386","product_id":100020801,"comment_content":"<br>mysql&gt; select count(*) into @C from t;<br>set @Y1 = floor(@C * rand());<br>set @Y2 = floor(@C * rand());<br>set @Y3 = floor(@C * rand());<br>select * from t limit @Y1ï¼Œ1ï¼› &#47;&#47;åœ¨åº”ç”¨ä»£ç é‡Œé¢å–Y1ã€Y2ã€Y3å€¼ï¼Œæ‹¼å‡ºSQLåæ‰§è¡Œ<br>select * from t limit @Y2ï¼Œ1ï¼›<br>select * from t limit @Y3ï¼Œ1ï¼›<br><br>è¿™ä¸ªæ–¹æ³•æ‹¿ä¸‰ä¸ªéšæœºå•è¯æ—¶å¯èƒ½å‡ºç°Y1, Y2, Y3ä¸­æœ‰é‡å¤çš„éšæœºæ•°å§ï¼Œæœ€åå–å‡ºçš„å•è¯ä¹Ÿé‡å¤äº†ã€‚","like_count":0},{"had_liked":false,"id":313847,"user_name":"è¿½é£","can_delete":false,"product_type":"c1","uid":2644373,"ip_address":"","ucode":"46A2EC5C07AC4F","user_header":"","comment_is_top":false,"comment_ctime":1632710151,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1632710151","product_id":100020801,"comment_content":"è€å¸ˆ  8.0åæ˜¯ä¸æ˜¯å¯¹è¯¥æ’åºåšäº†ä¼˜åŒ–ã€‚æˆ‘çš„ç‰ˆæœ¬æ˜¯8.0.26 ï¼Œæˆ‘æ‰§è¡Œ <br>select word from words order by rand() limit 3;<br>è¯¥è¯­å¥ï¼Œåœ¨æ…¢æŸ¥è¯¢æ—¥å¿—ä¸­ï¼Œæ˜¾ç¤º æ‰«æè¡Œæ•°ä¸º10003<br># Query_time: 0.002946  Lock_time: 0.000144 Rows_sent: 3  Rows_examined: 10003<br>SET timestamp=1541402277;<br>select word from words order by rand() limit 3;","like_count":0},{"had_liked":false,"id":312183,"user_name":"Eternal","can_delete":false,"product_type":"c1","uid":1188023,"ip_address":"","ucode":"EA6FE7CC98F740","user_header":"https://static001.geekbang.org/account/avatar/00/12/20/b7/bdb3bcf0.jpg","comment_is_top":false,"comment_ctime":1631674993,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1631674993","product_id":100020801,"comment_content":"æœ¬æœŸçš„é—®é¢˜ï¼š<br>å¦‚æœå•è¯æ•°é‡æ˜¯å›ºå®šçš„ï¼Œå¯ä»¥å°†æ¯æ¡å•è¯idå­˜åˆ°ä¸€ä¸ªredisä¸­çš„setä¸­åˆ©ç”¨redisçš„å‡½æ•°éšæœºå–å‡º3ä¸ªIDï¼Œç„¶åæ‹¿åˆ°idåˆ°æ•°æ®åº“ä¸»é”®æŸ¥è¯¢","like_count":0},{"had_liked":false,"id":312182,"user_name":"Eternal","can_delete":false,"product_type":"c1","uid":1188023,"ip_address":"","ucode":"EA6FE7CC98F740","user_header":"https://static001.geekbang.org/account/avatar/00/12/20/b7/bdb3bcf0.jpg","comment_is_top":false,"comment_ctime":1631674889,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1631674889","product_id":100020801,"comment_content":"ä¸Šä¸€æœŸçš„é—®é¢˜ï¼šè¿™ä¸ªå’Œåˆ†åº“åˆ†è¡¨åçš„åˆ†é¡µæŸ¥è¯¢æ˜¯ä¸ªç±»ä¼¼é—®é¢˜ï¼Œéœ€è¦å…ˆæŸ¥è¯¢æ¯ä¸ªåˆ†ç‰‡åçš„ä¸€é¡µæ•°æ®ï¼Œç„¶åæ’åºå–ä¸€é¡µçš„æ•°æ®ï¼Œè¿™å«mergeåˆå¹¶æ•°æ®ï¼Œç”¨è€å¸ˆè¯´å¾—å½’å¹¶æ’åºå®ç°","like_count":0},{"had_liked":false,"id":306665,"user_name":"ç§€ç§€","can_delete":false,"product_type":"c1","uid":1145162,"ip_address":"","ucode":"9D4D327324570B","user_header":"https://static001.geekbang.org/account/avatar/00/11/79/4a/10348395.jpg","comment_is_top":false,"comment_ctime":1628662981,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1628662981","product_id":100020801,"comment_content":"éšæœºä¸€æ¬¡Y1ï¼Œ ç›´æ¥ limit @y1, 3ä¸é¦™å˜›ï¼Ÿ","like_count":0},{"had_liked":false,"id":304899,"user_name":"èµ´","can_delete":false,"product_type":"c1","uid":2675954,"ip_address":"","ucode":"D47B3179BE3950","user_header":"https://static001.geekbang.org/account/avatar/00/28/d4/f2/3c0bfa0e.jpg","comment_is_top":false,"comment_ctime":1627694151,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1627694151","product_id":100020801,"comment_content":"å‰é¢æœ‰åŒå­¦è¯´è®°å½•rowidï¼Œå‡å¦‚åˆ é™¤äº†ï¼Œrowidæ˜¯å¦å°±ä¸è¿ç»­äº†ã€‚é‚£å‡å¦‚æˆ‘ä»¬æ–°åŠ ä¸€ä¸ªå­—æ®µfrand(ç´¢å¼•),æ¯å†™å…¥ä¸€æ¡å°±æ’å…¥rand()å€¼ï¼Œåœ¨æ•°æ®é‡å¤§ç‚¹çš„æ—¶å€™ï¼Œä»–å°±è¡¨ç°å¾—æ¯”è¾ƒéšæœºäº†å§ï¼Œå³ä½¿ä¸­é—´æœ‰åˆ é™¤ç©ºæ´ï¼Œç„¶åé€šè¿‡è¿™åˆ—è¿›è¡Œè¯¾é¢˜é‡Œçš„éšæœºç®—æ³•1ã€‚","like_count":0},{"had_liked":false,"id":303647,"user_name":"æœ±åŒº","can_delete":false,"product_type":"c1","uid":2034512,"ip_address":"","ucode":"1CFC71F159422A","user_header":"https://static001.geekbang.org/account/avatar/00/1f/0b/50/211be6d5.jpg","comment_is_top":false,"comment_ctime":1626915607,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1626915607","product_id":100020801,"comment_content":"éšæœºå–å€¼ä¸åº”è¯¥éšæœºåœ¨å†…å­˜è¡¨è·å–3è¡Œè®°å½•ï¼Œä¸ºå•¥è¿˜è¦æ’åºï¼Ÿ","like_count":0},{"had_liked":false,"id":300913,"user_name":"å¼ ä¸‰ä¸°","can_delete":false,"product_type":"c1","uid":1155275,"ip_address":"","ucode":"3A6215A40B3B21","user_header":"https://static001.geekbang.org/account/avatar/00/11/a0/cb/aab3b3e7.jpg","comment_is_top":false,"comment_ctime":1625450884,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1625450884","product_id":100020801,"comment_content":"ä¸´æ—¶æ–‡ä»¶å’Œç£ç›˜ä¸´æ—¶è¡¨ ï¼Œæ˜¯ä¸€ä¸ªä¸œè¥¿å—ï¼Ÿæ–‡ä¸­æ€»æ˜¯æŠŠè¿™ä¸ªæ¦‚å¿µäº¤å‰ã€‚ã€‚ã€‚","like_count":0},{"had_liked":false,"id":300561,"user_name":"yezj","can_delete":false,"product_type":"c1","uid":1832266,"ip_address":"","ucode":"38BD97834AC8F8","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIIP4P45S9HTzVH2SAH7u9UoKcjibh3smlme8Ieh4921diaaRJYcRcBWwq7XiaCySXO9lopRpDtzp7yA/132","comment_is_top":false,"comment_ctime":1625218687,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1625218687","product_id":100020801,"comment_content":"è€å¸ˆå¯¹äºä¸Šä¸€è®²çš„ç­”æ¡ˆçš„ç¬¬ä¸‰é—®ï¼Œæ„Ÿè§‰è¿˜æ˜¯æœ‰é—®é¢˜å§ï¼Œå¦‚æœè‹å·åªæœ‰5åƒæ¡æ•°æ®ï¼Œæ­å·8åƒæ¡æ•°æ®ï¼Œé‚£ä¹ˆåŒºç¬¬101é¡µï¼ŒæŒ‰ç…§è€å¸ˆçš„ç­”æ¡ˆï¼Œæ˜¯æ²¡æœ‰æ•°æ®çš„ã€‚ä½†å®é™…ä¸Šæ˜¯æœ‰æ•°æ®çš„ã€‚è€å¸ˆçš„ç­”æ¡ˆæŸ¥ç¬¬ä¸€é¡µæ˜¯å¯ä»¥çš„ã€‚","like_count":0},{"had_liked":false,"id":294665,"user_name":"ç­‰é£æ¥","can_delete":false,"product_type":"c1","uid":1350677,"ip_address":"","ucode":"5B7FF74A51F534","user_header":"https://static001.geekbang.org/account/avatar/00/14/9c/15/719f1f44.jpg","comment_is_top":false,"comment_ctime":1622037691,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1622037691","product_id":100020801,"comment_content":"æœ‰ä¸ªç–‘é—®ï¼Œlimit 100ï¼Œ10 è¿™æ¡è¯­å¥æ˜¯ï¼Œ å­˜å‚¨å¼•æ“æ˜¯è¿”å›110è¡Œå‘¢è¿˜æ˜¯æ˜¯è¿”å›10è¡Œ","like_count":0},{"had_liked":false,"id":294568,"user_name":"maybe","can_delete":false,"product_type":"c1","uid":1640973,"ip_address":"","ucode":"2C0D1D26853DB3","user_header":"https://static001.geekbang.org/account/avatar/00/19/0a/0d/7bac5bcb.jpg","comment_is_top":false,"comment_ctime":1622001417,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1622001417","product_id":100020801,"comment_content":"MySqlé»˜è®¤ä¸€ä¸ªèŠ‚ç‚¹çš„é•¿åº¦ä¸º16Kï¼Œä¸€ä¸ªæ•´æ•°ï¼ˆbigintï¼‰å­—æ®µç´¢å¼•çš„é•¿åº¦ä¸º 8B,å¦å¤–æ¯ä¸ªç´¢å¼•è¿˜è·Ÿç€6Bçš„æŒ‡å‘å…¶å­æ ‘çš„æŒ‡é’ˆã€‚","like_count":0},{"had_liked":false,"id":284048,"user_name":"æ˜“ç¿”","can_delete":false,"product_type":"c1","uid":1304541,"ip_address":"","ucode":"8C63DB7379186C","user_header":"https://static001.geekbang.org/account/avatar/00/13/e7/dd/e68f9cf5.jpg","comment_is_top":false,"comment_ctime":1616049917,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1616049917","product_id":100020801,"comment_content":"è™½ç„¶systemctl start mysqld æ²¡å¯åŠ¨æˆåŠŸã€‚<br>ä½¿ç”¨ &#47;usr&#47;sbin&#47;mysqld --daemonize å´å¯ä»¥æˆåŠŸã€‚<br><br>[root@db1 log]# &#47;usr&#47;sbin&#47;mysqld --daemonize <br>[root@db1 log]# mysql -uroot -p<br>Enter password: <br>Welcome to the MySQL monitor.  Commands end with ; or \\g.<br>Your MySQL connection id is 3<br>Server version: 5.7.33-log MySQL Community Server (GPL)<br><br>Copyright (c) 2000, 2021, Oracle and&#47;or its affiliates.<br><br>Oracle is a registered trademark of Oracle Corporation and&#47;or its<br>affiliates. Other names may be trademarks of their respective<br>owners.<br><br>Type &#39;help;&#39; or &#39;\\h&#39; for help. Type &#39;\\c&#39; to clear the current input statement.<br><br>[root@localhost][(none)]&gt; <br><br><br><br><br><br>å¸Œæœ›æ‚¨èƒ½çœ‹åˆ°ï¼ŒæŒ‡ç‚¹ä¸€ä¸‹ã€‚è¿™ä¸ªåœ¨æ™®é€šçš„è¿ç»´å±‚é¢ä¸Šè¿˜çœŸçš„ä¸å¥½çœ‹äº†ã€‚é—®äº†å‡ åä¸ªDBAéƒ½æ— ä¸€ä¾‹å¤–è¯´æ˜¯æƒé™é—®é¢˜ã€‚æœ€å¤šåªèƒ½2000å­—ç¬¦ã€‚åˆ†äº†å¥½å‡ ä¸ªè¯„è®ºäº†ã€‚ã€‚æ²¡æœ‰æ’ç‰ˆï¼Œå¦‚æœæ‚¨è¦çœ‹äº†ã€‚å®åœ¨éš¾ä¸ºäº†ã€‚ã€‚æ„Ÿæ¿€ä¸å°½ï¼ï¼ï¼","like_count":0},{"had_liked":false,"id":284047,"user_name":"æ˜“ç¿”","can_delete":false,"product_type":"c1","uid":1304541,"ip_address":"","ucode":"8C63DB7379186C","user_header":"https://static001.geekbang.org/account/avatar/00/13/e7/dd/e68f9cf5.jpg","comment_is_top":false,"comment_ctime":1616049875,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1616049875","product_id":100020801,"comment_content":"ä½¿ç”¨<br><br>[root@db1 ~]# systemctl status mysqld.service<br>â— mysqld.service - MySQL Server<br>   Loaded: loaded (&#47;usr&#47;lib&#47;systemd&#47;system&#47;mysqld.service; enabled; vendor preset: disabled)<br>   Active: failed (Result: exit-code) since å›› 2021-03-18 14:35:21 CST; 6s ago<br>     Docs: man:mysqld(8)<br>           http:&#47;&#47;dev.mysql.com&#47;doc&#47;refman&#47;en&#47;using-systemd.html<br>  Process: 17314 ExecStart=&#47;usr&#47;sbin&#47;mysqld --daemonize (code=exited, status=1&#47;FAILURE)<br><br>3æœˆ 18 14:35:21 db1 systemd[1]: Starting MySQL Server...<br>3æœˆ 18 14:35:21 db1 mysqld[17314]: 2021-03-18T06:35:21.070260Z 0 [Warning] Changed limits: max_open_files: 1024 (requested 5000)<br>3æœˆ 18 14:35:21 db1 mysqld[17314]: 2021-03-18T06:35:21.235977Z 0 [Warning] Can&#39;t create test file &#47;data&#47;mysql&#47;mysqldata&#47;mydata&#47;db1.lower-test<br>3æœˆ 18 14:35:21 db1 systemd[1]: mysqld.service: control process exited, code=exited status=1<br>3æœˆ 18 14:35:21 db1 systemd[1]: Failed to start MySQL Server.<br>3æœˆ 18 14:35:21 db1 systemd[1]: Unit mysqld.service entered failed state.<br>3æœˆ 18 14:35:21 db1 systemd[1]: mysqld.service failed.<br><br>å…¶ä¸­&#47;usr&#47;lib&#47;systemd&#47;system&#47;mysqld.service çš„å†…å®¹å¦‚ä¸‹ã€‚ï¼ˆæˆ‘åˆ å‡äº†ä¸€ä¸‹ï¼‰<br><br>[root@db1 log]# cat &#47;usr&#47;lib&#47;systemd&#47;system&#47;mysqld.service | sed s&#47;^&quot; &quot;*&#47;&#47;g |sed &#47;^$&#47;d |sed &#47;^#&#47;d<br>[Unit]<br>Description=MySQL Server<br>Documentation=man:mysqld(8)<br>Documentation=http:&#47;&#47;dev.mysql.com&#47;doc&#47;refman&#47;en&#47;using-systemd.html<br>After=network.target<br>After=syslog.target<br>[Install]<br>[Service]<br>User=mysql<br>Group=mysql<br>Type=forking<br>ExecStart=&#47;usr&#47;sbin&#47;mysqld --daemonize<br><br>error.log æƒé™æ²¡æœ‰é—®é¢˜ã€‚ç”±äºé”™è¯¯æ—¥å¿—æ²¡æœ‰æ‰“å¼€ï¼Œé”™è¯¯æ—¥å¿—é‡Œé¢æ²¡æœ‰ä»»ä½•å†…å®¹ã€‚<br>[root@db1 log]# pwd <br>&#47;data&#47;mysql&#47;mysqldata&#47;log<br>[root@db1 log]# ll<br>æ€»ç”¨é‡ 4<br>-rw-r-----. 1 mysql mysql    0 3æœˆ  18 14:41 error.log<br>-rw-r-----. 1 mysql mysql 1305 3æœˆ  18 14:10 slow-query.log<br>[root@db1 log]# <br><br>","like_count":0},{"had_liked":false,"id":284046,"user_name":"æ˜“ç¿”","can_delete":false,"product_type":"c1","uid":1304541,"ip_address":"","ucode":"8C63DB7379186C","user_header":"https://static001.geekbang.org/account/avatar/00/13/e7/dd/e68f9cf5.jpg","comment_is_top":false,"comment_ctime":1616049861,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1616049861","product_id":100020801,"comment_content":"ä½¿ç”¨journalctl -xe<br><br>-- Unit mysqld.service has begun starting up.<br>3æœˆ 18 14:34:17 db1 mysqld[17301]: 2021-03-18T06:34:17.745329Z 0 [Warning] Changed limits: max_open_files: 1024 (requested 5000)<br>3æœˆ 18 14:34:17 db1 mysqld[17301]: 2021-03-18T06:34:17.924877Z 0 [Warning] Can&#39;t create test file &#47;data&#47;mysql&#47;mysqldata&#47;mydata&#47;db1.lower-test<br>3æœˆ 18 14:34:17 db1 mysqld[17301]: 2021-03-18T06:34:17.924962Z 0 [Note] &#47;usr&#47;sbin&#47;mysqld (mysqld 5.7.33-log) starting as process 17303 ...<br>3æœˆ 18 14:34:17 db1 mysqld[17301]: 2021-03-18T06:34:17.927283Z 0 [Warning] Can&#39;t create test file &#47;data&#47;mysql&#47;mysqldata&#47;mydata&#47;db1.lower-test<br>3æœˆ 18 14:34:17 db1 mysqld[17301]: 2021-03-18T06:34:17.927327Z 0 [Warning] Can&#39;t create test file &#47;data&#47;mysql&#47;mysqldata&#47;mydata&#47;db1.lower-test<br>3æœˆ 18 14:34:17 db1 mysqld[17301]: 2021-03-18T06:34:17.928908Z 0 [ERROR] Could not open file &#39;&#47;data&#47;mysql&#47;mysqldata&#47;log&#47;error.log&#39; for error logging: Permission denied<br>3æœˆ 18 14:34:17 db1 mysqld[17301]: 2021-03-18T06:34:17.928957Z 0 [ERROR] Aborting<br>3æœˆ 18 14:34:17 db1 mysqld[17301]: 2021-03-18T06:34:17.929392Z 0 [Note] Binlog end<br>3æœˆ 18 14:34:17 db1 mysqld[17301]: Initialization of mysqld failed: 0<br>3æœˆ 18 14:34:17 db1 mysqld[17301]: 2021-03-18T06:34:17.929481Z 0 [Note] &#47;usr&#47;sbin&#47;mysqld: Shutdown complete<br>3æœˆ 18 14:34:17 db1 systemd[1]: mysqld.service: control process exited, code=exited status=1<br>3æœˆ 18 14:34:17 db1 systemd[1]: Failed to start MySQL Server.<br>-- Subject: Unit mysqld.service has failed<br>-- Defined-By: systemd<br>-- Support: http:&#47;&#47;lists.freedesktop.org&#47;mailman&#47;listinfo&#47;systemd-devel<br>-- <br>-- Unit mysqld.service has failed.<br>-- <br>-- The result is failed.<br>3æœˆ 18 14:34:17 db1 systemd[1]: Unit mysqld.service entered failed state.<br>3æœˆ 18 14:34:17 db1 systemd[1]: mysqld.service failed.<br>3æœˆ 18 14:34:17 db1 polkitd[716]: Unregistered Authentication Agent for unix-process:17295:51674709 (system bus name :1.405, object path &#47;org&#47;freedesktop&#47;PolicyKit1&#47;AuthenticationAg<br><br>","like_count":0},{"had_liked":false,"id":284045,"user_name":"æ˜“ç¿”","can_delete":false,"product_type":"c1","uid":1304541,"ip_address":"","ucode":"8C63DB7379186C","user_header":"https://static001.geekbang.org/account/avatar/00/13/e7/dd/e68f9cf5.jpg","comment_is_top":false,"comment_ctime":1616049846,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1616049846","product_id":100020801,"comment_content":"æ—è€å¸ˆï¼Œä½ çš„ä¸“æ æˆ‘çœ‹äº†å‡ éäº†ã€‚ç»å¸¸æ¥æ¸©æ•…ä¸€ä¸‹ã€‚è¿™ä¸¤å¤©åœ¨centos7ä¸Šç”¨rpmå®‰è£…5.7.33çš„æ—¶å€™é‡åˆ°ä¸€ä¸ªé—®é¢˜ã€‚å€’è…¾äº†ä¸€å¤©å¤šäº†ï¼Œè¿˜æ²¡æœ‰æ‰¾åˆ°é—®é¢˜æ‰€åœ¨ï¼Œé—®äº†å¾ˆå¤šDBAï¼Œæ€è·¯éƒ½å·®ä¸å¤šï¼Œç»“æœéƒ½è§£å†³ä¸äº†ã€‚æœ‰äººè¯´ç¼–è¯‘å®‰è£…è·³è¿‡è¿™ä¸ªé”™ã€‚å¯æˆ‘è¿˜æ˜¯æƒ³çŸ¥é“åˆ°åº•ä»€ä¹ˆåŸå› ã€‚ã€‚å¸Œæœ›æ‚¨èƒ½çœ‹åˆ°ï¼ŒæŒ‡ç‚¹ä¸€ä¸‹ã€‚<br>ç”±äºä¸èƒ½æˆªå›¾ã€‚åªèƒ½å¤åˆ¶æè¿°ä¿¡æ¯äº†ã€‚<br>=====<br>æˆ‘ä½¿ç”¨ systemctl start mysqld æŠ¥é”™å¦‚ä¸‹ã€‚<br>[root@db1 ~]# systemctl start mysqld<br><br>Job for mysqld.service failed because the control process exited with error code. See &quot;systemctl status mysqld.service&quot; and &quot;journalctl -xe&quot; for details.<br><br>","like_count":0,"discussions":[{"author":{"id":1462026,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIY8d8yb0o6a5fyBSlk2HHOjk0vrYCnfaeybAVbQrLibexQWIGliam8cuwVlCfdRhfeZE20iaVWXXqVw/132","nickname":"Geek_c89ab3","note":"","ucode":"E3C8A8CF267079","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":387601,"discussion_content":"çœ‹mysql é”™è¯¯æ—¥å¿—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628297463,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":277955,"user_name":"å‰æ³•å¸ˆ","can_delete":false,"product_type":"c1","uid":2232546,"ip_address":"","ucode":"F1E3F4F526CA13","user_header":"https://static001.geekbang.org/account/avatar/00/22/10/e2/35f2fc23.jpg","comment_is_top":false,"comment_ctime":1612682453,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1612682453","product_id":100020801,"comment_content":"æœ€è¿‘ç”¨Nodejså†™äº†ä¸ªæ•°æ®åº“ï¼Œæƒ³éšæœºåå‡ºå†·ç¬‘è¯ï¼Œä¹Ÿé‡åˆ°äº†è¿™ä¸ªé—®é¢˜ï¼Œå¦‚æœä¸€æ¬¡è¿”å›å…¨éƒ¨çš„æ•°æ®ï¼Œç½‘ç»œä¼ è¾“çš„æ—¶å€™JSON.parseè€å¤±è´¥ï¼Œæˆ‘å°±æƒ³åªè¿”å›éœ€è¦çš„æ•°æ®å°±è¡Œäº†ã€‚<br><br>æˆ‘çš„æ•°æ®åº“SQLè§£æå™¨æ˜¯ç”¨çš„ç¬¬ä¸‰æ–¹æ¨¡å—ï¼Œä¸æ”¯æŒrand()è¿™ç§ï¼Œæ‰€ä»¥æˆ‘ä¹Ÿæ˜¯å…ˆselect count(*) ç„¶åå»æ‹¿å…·ä½“çš„å“ªå‡ è¡Œçš„ï¼Œæ­£å¥½å°±æ˜¯è€å¸ˆè¯´çš„è¿™ä¸ªæ–¹æ³•","like_count":0},{"had_liked":false,"id":274140,"user_name":"å¦ææ³°æ¥","can_delete":false,"product_type":"c1","uid":1439355,"ip_address":"","ucode":"C249173266251A","user_header":"https://static001.geekbang.org/account/avatar/00/15/f6/7b/b6abcbbe.jpg","comment_is_top":false,"comment_ctime":1610871157,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1610871157","product_id":100020801,"comment_content":"ä¸Šé¢æåˆ°çš„ç®—æ³•æˆ‘è¯•äº†ä¸€ä¸‹<br>ä¸€ä¸ªç™¾ä¸‡æ¡è®°å½•çš„è¡¨<br>ç®—æ³• 1<br>select * from t where id &gt;= @X limit 1;<br>å¦‚æœ@X  å€¼å¾ˆå° é‚£ä¹ˆexplain çœ‹äº†æ‰«æè¡Œæ•°50ä¸‡  ä½†æ˜¯æŸ¥è¯¢é€Ÿåº¦å¾ˆå¿«ï¼ˆ0.006sï¼‰<br><br>ç®—æ³•ä¸‰<br>select * from t limit @Y1ï¼Œ1ï¼›<br>å¦‚æœ@Yçš„å€¼å¾ˆé«˜(å°±æ˜¯å…¨è¡¨æ‰«æäº†)  æŸ¥è¯¢å°±éœ€è¦0.5ç§’äº†","like_count":0},{"had_liked":false,"id":268436,"user_name":"ä¸‹ä¸ªç›®æ ‡45k","can_delete":false,"product_type":"c1","uid":1066508,"ip_address":"","ucode":"193BA8C3AA9A61","user_header":"https://static001.geekbang.org/account/avatar/00/10/46/0c/773ba2f3.jpg","comment_is_top":false,"comment_ctime":1608194165,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1608194165","product_id":100020801,"comment_content":"æˆ‘æ¥å®ç°è¿™ä¸ªéœ€æ±‚çš„è¯,ä¸¤ç§æƒ…å†µ<br>1. å¦‚æœidæ˜¯è‡ªå¢<br>æ‰¾åˆ°æœ€å¤§çš„idå€¼ ,åœ¨(minId,maxId) ç›´æ¥ä¸šåŠ¡ä»£ç randomä¸‰ä¸ªå‡ºæ¥ ,æŸ¥è¯¢å•è¯æ—¶å¥—ä¸Šç¼“å­˜ <br><br>2.å¦‚æœidæ˜¯æ—¶åºé€’å¢<br>å®šæ—¶æŸ¥è¯¢ä¸€æ‰¹å•è¯,æ¯”å¦‚1000ä¸ªæ”¾å…¥ç¼“å­˜,æ¯”å¦‚redis ,åˆ©ç”¨SRANDMEMBER å‘½ä»¤éšæœºè¿”å›ä¸‰ä¸ª","like_count":0},{"had_liked":false,"id":267066,"user_name":"é™ˆæ¾Plus","can_delete":false,"product_type":"c1","uid":1264707,"ip_address":"","ucode":"0074BDECFA3D1D","user_header":"https://static001.geekbang.org/account/avatar/00/13/4c/43/150c70c2.jpg","comment_is_top":false,"comment_ctime":1607586741,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1607586741","product_id":100020801,"comment_content":"è€å¸ˆå¥½ï¼Œè¯·æ•™ä¸ªä¸šåŠ¡é—®é¢˜ã€‚æˆ‘ä»¬ç³»ç»Ÿä¹Ÿæœ‰ç±»ä¼¼çš„æ ¹æ®ç”¨æˆ·å…´è¶£çˆ±å¥½éšæœºæ˜¾ç¤ºæ–‡ç« çš„éœ€æ±‚ï¼ŒåŒæ—¶æ¶‰åŠåˆ°åˆ†é¡µã€‚ç¬¬ä¸€æ¬¡éšæœºå–20æ¡ï¼Œç”¨æˆ·ä¸‹æ‹‰åˆ·æ–°å†éšæœºè¿”å›20æ¡ä¸ä¹‹å‰ä¸åŒçš„æ–‡ç« ï¼Œè¯·é—®è¿™ç§éœ€æ±‚åº”è¯¥æ€ä¹ˆè®¾è®¡æ¯”è¾ƒåˆç†å‘¢ã€‚æ–‡ç« æ€»æ•° 1W+ï¼Œæ¯ç¯‡æ–‡ç« è¾ƒå¤§ï¼Œæœ‰textå­—æ®µã€‚","like_count":0},{"had_liked":false,"id":265363,"user_name":"Wangyf","can_delete":false,"product_type":"c1","uid":2226219,"ip_address":"","ucode":"349068A07CB1D4","user_header":"https://static001.geekbang.org/account/avatar/00/21/f8/2b/339660f1.jpg","comment_is_top":false,"comment_ctime":1606878006,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1606878006","product_id":100020801,"comment_content":"æˆ‘å†™è¿™ç•™è¨€çš„æ—¶å€™è¿˜æ²¡æœ‰çœ‹åˆ«äººçš„ï¼Œæˆ‘æƒ³çš„æ˜¯ï¼Œæä¸€ä¸ªç”Ÿè¯æœ¬å‡ºæ¥ã€‚æ˜¾ç¤ºçš„é‚£ 3 ä¸ªå•è¯ï¼Œå°±ä»è¿™ç”Ÿè¯æœ¬é‡ŒæŒ‘ã€‚ç”Ÿè¯æœ¬å¯ä»¥æ”¾åœ¨ç”¨æˆ·æ‰‹æœºä¸Šï¼Œè€Œä¸”è¦æ‰«æçš„æ•°é‡ï¼Œä¹Ÿä¼šå°‘å¾ˆå¤šå¾ˆå¤šã€‚å ç”¨çš„æ‰‹æœºå­˜å‚¨ï¼Œå‡ ä¹å¯ä»¥å¿½ç•¥ä¸è®¡","like_count":0},{"had_liked":false,"id":262628,"user_name":"ç„çœŸ","can_delete":false,"product_type":"c1","uid":2237677,"ip_address":"","ucode":"D21A7096AFB816","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLg04lnicnUNWVmohBVoWiaKPpuYu8j0CHVIjjurfO3YcJqicHZBMYFqjoEpiaa3jrNmRzyzXiaPPt29cA/132","comment_is_top":false,"comment_ctime":1605785760,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1605785760","product_id":100020801,"comment_content":"select id,è‡ªå¢åºå·  into  ä¸´æ—¶è¡¨ï¼Œåœ¨è‡ªå¢åºå·ä¸Šé¢å»ºç«‹ç´¢å¼•ï¼Œç”¨ç®—æ³•2å–å‡ºä¸‰ä¸ªéšæœºåºå·ï¼Œå†å–å‡ºå¯¹åº”çš„ä¸»é”®idï¼Œå†èµ°ä¸»é”®æŸ¥è¯¢å‘¢ã€‚","like_count":0},{"had_liked":false,"id":250854,"user_name":"å¢é‡‘æ°¸","can_delete":false,"product_type":"c1","uid":1027889,"ip_address":"","ucode":"00A20E6E6AD35B","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIxSrpEI7VGZK4x7L67bYr6N0RqqcaGHFxcCsSUXVRLZ09CYrJtFq5K8UBUs760BJkM76CjfshYiag/132","comment_is_top":false,"comment_ctime":1601261661,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1601261661","product_id":100020801,"comment_content":"å•ç‹¬æŸ¥è¯¢ä¸»é”®ç”ŸæˆåŒ…å«è‡ªå¢å­—æ®µ+ä¸»é”®çš„ä¸´æ—¶è¡¨ï¼Œéšæœºå–å‡º3ä¸ªè‡ªå¢å­—æ®µï¼ˆå·²ç»è¿ç»­ï¼‰å¯¹åº”çš„å€¼ï¼ˆå³ä¸»é”®ï¼‰ï¼Œå†æ ¹æ®ä¸»é”®åæŸ¥ç»“æœï¼Œè¿™æ ·æ€§èƒ½å¦‚ä½•ï¼Ÿ","like_count":0},{"had_liked":false,"id":250459,"user_name":"æƒœæ˜”","can_delete":false,"product_type":"c1","uid":1441589,"ip_address":"","ucode":"B3478E40B612FC","user_header":"https://static001.geekbang.org/account/avatar/00/15/ff/35/b744c027.jpg","comment_is_top":false,"comment_ctime":1601090488,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1601090488","product_id":100020801,"comment_content":"æƒ³é—®ä¸´æ—¶è¡¨æ˜¯åœ¨serverå±‚å—","like_count":0,"discussions":[{"author":{"id":1066508,"avatar":"https://static001.geekbang.org/account/avatar/00/10/46/0c/773ba2f3.jpg","nickname":"ä¸‹ä¸ªç›®æ ‡45k","note":"","ucode":"193BA8C3AA9A61","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":335438,"discussion_content":"æåˆ°äº†memoryå¼•æ“,åº”è¯¥æ˜¯åœ¨å­˜å‚¨å±‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608194417,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":248818,"user_name":"å¤§ç©ºç¿¼","can_delete":false,"product_type":"c1","uid":1523795,"ip_address":"","ucode":"B56CB3F3B1B407","user_header":"","comment_is_top":false,"comment_ctime":1600322846,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1600322846","product_id":100020801,"comment_content":"select * from t where city in (â€œæ­å·â€,&quot; è‹å· &quot;) order by name limit 100; è¿™æ’åºæ²¡æœ‰ç”¨åˆ°ç´¢å¼•ï¼Œä½†æ˜¯æŸ¥è¯¢æ¡ä»¶ç”¨åˆ°äº†å§ï¼Ÿ","like_count":0},{"had_liked":false,"id":246725,"user_name":"Magic","can_delete":false,"product_type":"c1","uid":1272047,"ip_address":"","ucode":"FD9CEDAA419EB0","user_header":"https://static001.geekbang.org/account/avatar/00/13/68/ef/6264ca3d.jpg","comment_is_top":false,"comment_ctime":1599465212,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1599465212","product_id":100020801,"comment_content":"è¯¾åé¢˜ï¼š<br>å°†è®¡ç®—å¾—åˆ°çš„Y1ï¼ŒY2ï¼ŒY3æŒ‰ä»å°åˆ°å¤§æ’åºï¼Œç„¶å<br>select id1 from t limit Y1,1;<br>select id2 from t where id&gt;id1 limit Y2-Y1,1<br>select * from t where id&gt;id2 limit Y3-Y2,1","like_count":0},{"had_liked":false,"id":244561,"user_name":"ç‘å“²","can_delete":false,"product_type":"c1","uid":1502093,"ip_address":"","ucode":"9F170728A055AD","user_header":"https://static001.geekbang.org/account/avatar/00/16/eb/8d/8ee78d3d.jpg","comment_is_top":false,"comment_ctime":1598581443,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1598581443","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæ²¡æœ‰æŸ¥åˆ°mysql rowidä¸ºä»€ä¹ˆæ˜¯6å­—èŠ‚çš„ï¼ŒæŸ¥åˆ°äº†oracleçš„ï¼Œoracle 7ä»¥å‰ï¼Œrowidæ˜¯å­˜å‚¨äº† 10ä½çš„æ–‡ä»¶å·ï¼Œ22ä½çš„å—å·ï¼Œ16ä½çš„è¡Œå·ï¼Œ6ä¸ªå­—èŠ‚ï¼ŒMySQLä¹Ÿæ˜¯è¿™æ ·æ‰€ä»¥rowidæ˜¯6ä¸ªå­—èŠ‚å—","like_count":0},{"had_liked":false,"id":243320,"user_name":"è€ƒæ‹‰å‡ºå±±","can_delete":false,"product_type":"c1","uid":1303954,"ip_address":"","ucode":"917E35FD7B2D06","user_header":"https://wx.qlogo.cn/mmopen/vi_32/1mOvT5fApeicXppMP3zADG6XIPicNt5D9dL6y46SF5UUcH0hicG21LM6xSgHJj5oAdzCyeGtLZYHYmlvaFwecrGOA/132","comment_is_top":false,"comment_ctime":1598059017,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1598059017","product_id":100020801,"comment_content":"çœ‹äº†è¿™ä¹ˆå¤šç¯‡ç« ï¼Œåˆçœ‹åˆ°èµç¾ã€‚æ¯æ¬¡æˆ‘éƒ½æ€€ç–‘æ˜¯è‡ªå·±æ°´å¹³ç†è§£èƒ½åŠ›æœ‰é—®é¢˜ï¼Œè™½ç„¶æ°´å¹³ç¡®å®ä¸æ€ä¹ˆæ ·ã€‚ä½†æ˜¯æˆ‘æƒ³è¯´ï¼Œå¾ˆå¤šå†…å®¹éƒ½æ²¡æœ‰è®²æ¸…æ¥šï¼Œå‰åé€»è¾‘ï¼Œæ­£åæ¨å¯¼é€»è¾‘ï¼Œç•™è¨€åè€Œæˆäº†ç‚¹ç›ã€‚è¯´è¿™ä¸ªæ›´å¤šä¸æ˜¯ä¸ºäº†æŠ±æ€¨ï¼Œè€Œæ˜¯ç»™åé¢çœ‹çš„äººæç¤ºã€‚","like_count":0},{"had_liked":false,"id":241594,"user_name":"Racoon","can_delete":false,"product_type":"c1","uid":1040047,"ip_address":"","ucode":"20D9DBDDEB3B1E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/de/af/9379c7bd.jpg","comment_is_top":false,"comment_ctime":1597366876,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1597366876","product_id":100020801,"comment_content":"åœ¨ä¸´æ—¶è¡¨ä¸ŠæŒ‰ç…§Rå­—æ®µæ’åºï¼Œç„¶åæŠŠæ•°æ®ä»ä¸´æ—¶è¡¨è¯»å–å­˜åˆ°sort_bufferï¼Œä¸ºä»€ä¹ˆå­˜sort_bufferä¸æ˜¯æœ‰åºçš„ï¼Œsort_bufferä¸ºä»€ä¹ˆè¿˜è¦å†è¿›è¡Œæ’åºå‘¢","like_count":0},{"had_liked":false,"id":234616,"user_name":"å°èƒ½","can_delete":false,"product_type":"c1","uid":2063014,"ip_address":"","ucode":"39EAAC8443B83C","user_header":"https://static001.geekbang.org/account/avatar/00/1f/7a/a6/e37fbbd8.jpg","comment_is_top":false,"comment_ctime":1594734487,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1594734487","product_id":100020801,"comment_content":"è€å¸ˆï¼Œå¯¹äºéšæœºæŠ½æ ·ï¼Œä¸ºä»€ä¹ˆä¸ç”¨è“„æ°´æŠ½æ ·ç®—æ³•ï¼Ÿè¿™æ ·O(n)å°±å®Œäº‹äº†","like_count":0},{"had_liked":false,"id":232146,"user_name":"å†¬ä»”","can_delete":false,"product_type":"c1","uid":1326683,"ip_address":"","ucode":"AD355D9814F7AD","user_header":"https://static001.geekbang.org/account/avatar/00/14/3e/5b/260507c5.jpg","comment_is_top":false,"comment_ctime":1593871184,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1593871184","product_id":100020801,"comment_content":"è€å¸ˆè¯·é—®ï¼Œå¯¹äºæœ¬æ–‡çš„éšæœºå–ä¸‰ä¸ªwordçš„é—®é¢˜ã€‚MySQLä¸ºä»€ä¹ˆä¸ç›´æ¥ä½¿ç”¨å…¨å­—æ®µæ’åºï¼ˆR, wï¼‰ï¼Œå³ä¸€æ¬¡è¯»å‡ºæ¯è¡Œçš„wordï¼Œç„¶åè®¡ç®—ä¸€ä¸ªéšæœºå€¼Rï¼Œå‡ºå…¥sort_bufferï¼Ÿè€Œæ˜¯ç”¨ä¸´æ—¶è¡¨å­˜äº†ï¼ˆRï¼Œwï¼‰ï¼Œåˆç”¨buffer_sortå­˜äº†ï¼ˆRï¼Œposï¼‰ã€‚è¿™æ ·Rå°±ä¼šé‡å¤å ç”¨ä¸€æ¬¡å­˜å‚¨ç©ºé—´ï¼ˆå†…å­˜æˆ–ç£ç›˜ï¼‰ï¼Œæ„Ÿå—ä¸Šä¼¼ä¹æ›´åŠ å ç”¨å†…å­˜ã€‚è€Œä¸”sort_bufferæ’åºå®Œåï¼Œè¿˜è¦æ ¹æ®poså»ä¸´æ—¶è¡¨æœwï¼Œæ„Ÿè§‰ä¹Ÿæœ‰ç‚¹æ²¡å¿…è¦å§ï¼Ÿ","like_count":0},{"had_liked":false,"id":229005,"user_name":"æ™¯æ¢¦å›­","can_delete":false,"product_type":"c1","uid":1620479,"ip_address":"","ucode":"0A17708457ACB2","user_header":"https://static001.geekbang.org/account/avatar/00/18/b9/ff/ea6c2e86.jpg","comment_is_top":false,"comment_ctime":1592878829,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1592878829","product_id":100020801,"comment_content":"è€å¸ˆï¼Œè¯·é—®ä¸ºä»€ä¹ˆ select count(*) from words; æ…¢æŸ¥è¯¢ç»™çš„ Rows_examined=0 å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":216738,"user_name":"Wings","can_delete":false,"product_type":"c1","uid":1215464,"ip_address":"","ucode":"047167807048EC","user_header":"https://static001.geekbang.org/account/avatar/00/12/8b/e8/7f09a744.jpg","comment_is_top":false,"comment_ctime":1589334540,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1589334540","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæ˜¯ä¸æ˜¯limitä¸­ä¸æ”¯æŒæ‹¿å˜é‡ï¼ŸæŠ¥é”™å¦‚ä¸‹ï¼š You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near &#39;@Y1,1&#39; at line 1","like_count":0},{"had_liked":false,"id":209043,"user_name":"Sparrow","can_delete":false,"product_type":"c1","uid":1693667,"ip_address":"","ucode":"88D3F3920C68BC","user_header":"https://static001.geekbang.org/account/avatar/00/19/d7/e3/e6cf6352.jpg","comment_is_top":false,"comment_ctime":1587482261,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1587482261","product_id":100020801,"comment_content":"æˆ‘ä»¬ä»¥å‰æ˜¯ç»™è¡¨åŠ ä¸ªèŒƒå›´0-1çš„éšæœºæ•°å­—æ®µrnï¼Œå¹¶åŠ ç´¢å¼•ã€‚<br>æŸ¥è¯¢çš„æ—¶å€™å…ˆéšæœºç”Ÿæˆä¸€ä¸ª0-1çš„éšæœºæ•°rï¼Œå†å–å¤§äºæˆ–å°äºè¿™ä¸ªæ•°çš„ç¬¬ä¸€ä¸ªæ•°<br>select*from t where rn&gt;r limit 1;","like_count":0},{"had_liked":false,"id":206651,"user_name":"é²ç­å¤§å¸ˆ","can_delete":false,"product_type":"c1","uid":1179156,"ip_address":"","ucode":"4F9615DF87B031","user_header":"https://static001.geekbang.org/account/avatar/00/11/fe/14/f1532dec.jpg","comment_is_top":false,"comment_ctime":1586913759,"is_pvip":false,"replies":[{"id":"77237","content":"åŠŸèƒ½ä¸Šæ˜¯å…è®¸çš„<br>æ€§èƒ½ä¸Šçš„æ”¶ç›Šæ˜¯è¦çœ‹ä¸šåŠ¡å“ˆ","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1586941106,"ip_address":"","comment_id":206651,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1586913759","product_id":100020801,"comment_content":"å¯ä»¥åˆ›å»ºä¸‰ä¸ªå­—æ®µä»¥ä¸Šçš„è”åˆç´¢å¼•å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":491854,"discussion_content":"åŠŸèƒ½ä¸Šæ˜¯å…è®¸çš„\næ€§èƒ½ä¸Šçš„æ”¶ç›Šæ˜¯è¦çœ‹ä¸šåŠ¡å“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586941106,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1179156,"avatar":"https://static001.geekbang.org/account/avatar/00/11/fe/14/f1532dec.jpg","nickname":"é²ç­å¤§å¸ˆ","note":"","ucode":"4F9615DF87B031","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":234218,"discussion_content":"æˆ‘ç†è§£è”åˆç´¢å¼•çš„å­—æ®µè¶Šå¤šï¼Œæ’å…¥å’Œæ›´æ–°çš„æ€§èƒ½å°±è¶Šå·®ï¼Œå› ä¸ºè¦æ¶‰åŠåˆ°æ•°æ®é¡µçš„åˆå¹¶å’Œåˆ†è£‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586960990,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":206421,"user_name":"åˆéŸ³æœªæ¥","can_delete":false,"product_type":"c1","uid":1274518,"ip_address":"","ucode":"3AE23DBC649B97","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erKFNFAQl3ibwlic54a5SQYAMhQYeVtMnSmMahZZjyqG2d66whxbEE3I3IyD07pSmte5DSibr71m6A9g/132","comment_is_top":false,"comment_ctime":1586858495,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1586858495","product_id":100020801,"comment_content":"æ—è€å¸ˆä½ å¥½ï¼Œçœ‹æ‚¨çš„æ–‡ç« æœ‰æ®µæ—¶é—´äº†ï¼Œæœ€è¿‘ä¸¤å¤©ç¢°åˆ°ä¸€ä¸ªæ£˜æ‰‹é—®é¢˜ï¼Œè¿˜è¯·è€å¸ˆç»™ä¸€ä¸ªè§£å†³æ€è·¯ï¼Œ<br>æˆ‘ä»¬çš„CPUä½¿ç”¨ç‡åœ¨1åˆ†é’Ÿä¹‹å†…ï¼Œä»20%å¢åŠ åˆ°100%ï¼ŒTCPè¿æ¥æ•°åŒæ­¥ä¸Šå‡ï¼Œç„¶è€Œæˆ‘ä»¬çš„ä¸šåŠ¡è¯·æ±‚å¹¶æ²¡æœ‰å¢åŠ ï¼ŒæŸ¥çœ‹æ…¢æ—¥å¿—ï¼š<br>select `id`,<br>       `class_id`,<br>       `tmall`,<br>       `buss_name`,<br>       `goods_id` as `taobao_id`,<br>       `url_shop` as `prourl`,<br>       `thumb` as `pic`,<br>       `youhuiquan_link` as `couponLink`,<br>       `price_shoujia` as `shoujia`,<br>       `price_juanhou` as `juanhou`,<br>       `youhuiquan_price` as `quan_fee`,<br>       `sales`,<br>       `video_url`,<br>       `commission_rate`,<br>       `nick`,<br>       `youhuiquan_num_shengyu`,<br>       `youhuiquan_time_guoqi`,<br>       `deposit` as `presale_deposit`,<br>       `youhuiquan_quan_condition`,<br>       `deposit_deduct` as `presale_reduction`<br>  from `fl_taoke_product`<br> where `is_show`= 1<br>   and `online_time`&lt;= 1586700873<br> order by `is_recommend` desc,<br>         `tmall` desc,<br>         `sales` desc,<br>         `id` desc<br> limit 19 offset 0<br><br>è¿™æ¡sqlæ‰§è¡Œæ¯”è¾ƒæ…¢ï¼Œè€Œä¸”æ’åºæ²¡æœ‰ç”¨åˆ°ç´¢å¼•ï¼Œä»¥ä¸ºæ‰¾åˆ°é—®é¢˜æ‰€åœ¨äº†ï¼Œä½†æ˜¯è¿™ä¸ªSQLå¹³æ—¶ä¸ä¼šé€ æˆCPUç“¶é¢ˆï¼Œæ’æŸ¥åˆ°è¿™å°±æ²¡äº†æ€è·¯ï¼Œå¸Œæœ›è€å¸ˆæä¾›ä¸€ä¸ªæ€è·¯ï¼Œåœ¨çº¿ç­‰","like_count":0,"discussions":[{"author":{"id":1274518,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erKFNFAQl3ibwlic54a5SQYAMhQYeVtMnSmMahZZjyqG2d66whxbEE3I3IyD07pSmte5DSibr71m6A9g/132","nickname":"åˆéŸ³æœªæ¥","note":"","ucode":"3AE23DBC649B97","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":232220,"discussion_content":"å¦å¤–å‘ç°mysqlé”™è¯¯æ—¥å¿—\n\n2020-04-12 23:05:07 50993 [Warning] Sort aborted, host: 172.20.134.27, user: tkjidi_newapi, thread: 2200192, query: select `id`, `class_id`, `tmall`, `buss_name`, `goods_id` as `taobao_id`, `url_shop`\nas `prourl`, `thumb` as `pic`, `youhuiquan_link` as `couponLink`, `price_shoujia` as `shoujia`, `price_juanhou` as `juanhou`, `youhuiquan_price` as `quan_fee`, `sales`, `video_url`, `commission_rate`\n, `nick`, `youhuiquan_num_shengyu`, `youhuiquan_time_guoqi`, `deposit` as `presale_deposit`, `youhuiquan_quan_condition`, `deposit_deduct` as `presale_reduction` from `fl_taoke_product` where `is_show\n` = 1 and `online_time` <= 1586703893 order by `is_recommend` desc, `tmall` desc, `sales` desc, `id` desc limit 19 offset 0\n\n\n\t\n2020-04-12 22:15:30 50993 [Note] Multi-threaded slave statistics for channel &#39;&#39;: seconds elapsed = 120; events assigned = 467867649; worker queues filled over overrun level = 0; waited due a Worker qu\neue full = 0; waited due the total size = 0; slept when Workers occupied = 0\n\n2020-04-12 22:16:44 50993 [Warning] TCP send or receive package error : did not call getsockopt to obtain error message.\n\n\n2020-04-12 22:20:17 50993 [Warning] TCP send or receive package error : TCP Write Error, Errno: 32, Error message: Broken pipe, Remote IP: 172.20.134.41, tcp blocked: no, package size: -1, socket(tcpi\n_total_retrans: 0, tcpi_reordering: 3, tcpi_rcv_space: 87380, tcpi_snd_ssthresh: 2147483647, tcpi_snd_cwnd: 10, tcpi_rtt: 2125, tcpi_rttvar: 750)\n\n\nç»™ä¸ªæ€è·¯å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586861604,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":205932,"user_name":"TIAN","can_delete":false,"product_type":"c1","uid":1276795,"ip_address":"","ucode":"CCCF80602C1753","user_header":"https://static001.geekbang.org/account/avatar/00/13/7b/7b/5b39b47b.jpg","comment_is_top":false,"comment_ctime":1586759519,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1586759519","product_id":100020801,"comment_content":"è¯·é—®è€å¸ˆæˆ–è€…å…¶ä»–åŒå­¦ï¼Œå½’å¹¶æ’åºçš„è¯­å¥åº”è¯¥æ€ä¹ˆå†™ï¼Œä¹Ÿå°±æ˜¯è¯´åˆ†åˆ«æŸ¥å‡ºèµ°ç´¢å¼•çš„ä¸¤ä¸ªæ’åºä¹‹åï¼Œæ€ä¹ˆåˆå¹¶åˆ°ä¸€èµ·ï¼Ÿè°¢è°¢","like_count":0},{"had_liked":false,"id":201178,"user_name":"äº²æ–¤å¼“è™½ğŸ˜ˆ","can_delete":false,"product_type":"c1","uid":1412163,"ip_address":"","ucode":"575893ECF0B7AA","user_header":"https://static001.geekbang.org/account/avatar/00/15/8c/43/af33659f.jpg","comment_is_top":false,"comment_ctime":1585728368,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585728368","product_id":100020801,"comment_content":"è¯¾åæ€è€ƒé¢˜:<br>ä¼˜åŒ–è¡Œæ•°,å­˜å‚¨å•è¯çš„è¡¨å¯ä»¥ç”¨MyISAMå¼•æ“,å› ä¸ºè¡¨çš„ç»´æŠ¤æˆæœ¬è‚¯å®šå¾ˆä½,ä¸»è¦ä¹Ÿæ˜¯å·²è¯»ä¸ºä¸»,æ‰€ä»¥ç”¨MyISAMå¼•æ“å³å¯.è€Œä¸”åœ¨è€å¸ˆçš„14è®²https:&#47;&#47;time.geekbang.org&#47;column&#47;article&#47;72775 ä¹Ÿè¯´count(*)å¯¹äºMyISAMå¼•æ“æ˜¯ç›´æ¥å­˜å‚¨åœ¨ç¡¬ç›˜ä¸Šçš„,è¯»å–æ•ˆç‡å¾ˆé«˜ä¸ç”¨åœ¨æ‰«æå…¨è¡¨.Cçš„æ‰«æè¡Œæ•°å¯ä»¥ç­‰äº0<br><br>ç£ç›˜ä¸´æ—¶è¡¨çš„ä¼˜å…ˆçº§é˜Ÿåˆ—æ’åº,æˆ‘ç†è§£å°±æ˜¯ä¸€ä¸ªå †åŒ–è¿‡ç¨‹,æ„å»ºå¤§é¡¶å †.ç„¶åæ‹¿å †é¡¶çš„ä¸‰è¡Œè¿”å›","like_count":0},{"had_liked":false,"id":197520,"user_name":"Ryan","can_delete":false,"product_type":"c1","uid":1667987,"ip_address":"","ucode":"95BBBEE5B23878","user_header":"https://static001.geekbang.org/account/avatar/00/19/73/93/0a3a1e5b.jpg","comment_is_top":false,"comment_ctime":1585383469,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585383469","product_id":100020801,"comment_content":"çœŸçš„æœ‰éšæœºå–æ•°çš„éœ€æ±‚çš„è¯ï¼Œä¸€èˆ¬ä¹Ÿä¸ä¼šç›´æ¥ä¸¢ç»™æ•°æ®åº“æ¥å®ç°ï¼Œå¦‚æœæ•°æ®é‡ä¸æ˜¯ç‰¹åˆ«å¤§çš„è¯ï¼Œå®Œå…¨å¯ä»¥æŠŠæ•°æ®åšä¸ªç¼“å­˜ï¼Œç„¶åéšæœºä»ä¸­å–å‡ºæƒ³è¦çš„æ•°æ®","like_count":0},{"had_liked":false,"id":197518,"user_name":"Ryan","can_delete":false,"product_type":"c1","uid":1667987,"ip_address":"","ucode":"95BBBEE5B23878","user_header":"https://static001.geekbang.org/account/avatar/00/19/73/93/0a3a1e5b.jpg","comment_is_top":false,"comment_ctime":1585383346,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585383346","product_id":100020801,"comment_content":"å®é™…å·¥ä½œä¸­ï¼Œä¸å¯èƒ½æŠŠæ‰€æœ‰çš„é—®é¢˜å…¨éƒ¨ä¸¢ç»™æ•°æ®åº“ ï¼Œä¸šåŠ¡å±‚é¢è¦å¤„ç†å¤§éƒ¨åˆ†çš„é€»è¾‘","like_count":0},{"had_liked":false,"id":191045,"user_name":"starj","can_delete":false,"product_type":"c1","uid":1108791,"ip_address":"","ucode":"3546E42F1340B2","user_header":"https://static001.geekbang.org/account/avatar/00/10/eb/37/a2f4c9f8.jpg","comment_is_top":false,"comment_ctime":1584719713,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1584719713","product_id":100020801,"comment_content":"éœ€è¦å¥½å¥½æ¶ˆåŒ–ä¸‹","like_count":0},{"had_liked":false,"id":190803,"user_name":"çº¸é£æœº","can_delete":false,"product_type":"c1","uid":1108954,"ip_address":"","ucode":"E83EB9A453ACE2","user_header":"https://static001.geekbang.org/account/avatar/00/10/eb/da/09feef5a.jpg","comment_is_top":false,"comment_ctime":1584693298,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584693298","product_id":100020801,"comment_content":"ä½¿ç”¨ä¼˜å…ˆé˜Ÿåˆ—ç®—æ³•çš„æ‰«æè¡Œæ•°æ€ä¹ˆè®¡ç®—ï¼Ÿ","like_count":0},{"had_liked":false,"id":190784,"user_name":"çº¸é£æœº","can_delete":false,"product_type":"c1","uid":1108954,"ip_address":"","ucode":"E83EB9A453ACE2","user_header":"https://static001.geekbang.org/account/avatar/00/10/eb/da/09feef5a.jpg","comment_is_top":false,"comment_ctime":1584692167,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584692167","product_id":100020801,"comment_content":"ä¸ºä»€ä¹ˆä½¿ç”¨ä¼˜å…ˆé˜Ÿåˆ—ç®—æ³•çš„æ‰«æè¡Œæ•°æ˜¯10000å‘¢ï¼Ÿ ä»åŸè¡¨æ‹¿å‡ºæ•°æ®æ”¾åˆ°ä¸´æ—¶è¡¨æ˜¯10000ï¼Œåé¢ä»ä¸´æ—¶è¡¨æ‹¿æ•°æ®æ”¾åˆ°sort_bufferä¸­æ²¡æœ‰è®¡ç®—è¡Œæ•°å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":185602,"user_name":"ä¹”ä¸¹","can_delete":false,"product_type":"c1","uid":1217413,"ip_address":"","ucode":"D832A9F97A0C7E","user_header":"https://static001.geekbang.org/account/avatar/00/12/93/85/f5d9474c.jpg","comment_is_top":false,"comment_ctime":1583642185,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1583642185","product_id":100020801,"comment_content":"å¯¹äºé—®é¢˜ä¼˜åŒ–C+(Y1+1)+(Y2+1)+(Y3+1)çš„æ–¹æ³•ï¼Œåœ¨éå†è¡¨çš„æ—¶å€™ï¼Œä¸€æ¬¡æ€§å°†Y1+1, Y2+1, Y3+1éƒ½å–å‡ºæ¥ã€‚å‡å°‘éå†çš„æ¬¡æ•°ã€‚<br>","like_count":0},{"had_liked":false,"id":184463,"user_name":"å¼ sir","can_delete":false,"product_type":"c1","uid":1209431,"ip_address":"","ucode":"52958DF6705208","user_header":"https://static001.geekbang.org/account/avatar/00/12/74/57/7b828263.jpg","comment_is_top":false,"comment_ctime":1583321936,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1583321936","product_id":100020801,"comment_content":"å¯¹äºsort_bufferçš„ç†è§£ï¼Œæˆ‘æ„Ÿè§‰æ˜¯è¿™æ ·çš„ï¼Œå¦‚æœå…¨å­—æ®µæ’åºæ”¾ä¸ä¸‹ï¼Œå°±ä½¿ç”¨rowIdæ’åºï¼Œå¦‚æœrowId+æ’åºå­—æ®µä¹Ÿæ”¾ä¸ä¸‹çš„è¯ï¼Œåˆ™ä¼˜åŒ–å™¨ä¼šè€ƒè™‘ä¼˜å…ˆé˜Ÿåˆ—æ’åºï¼Œä¼˜å…ˆé˜Ÿåˆ—æ’åºçš„å†…å­˜å¦‚æœå¤§äºsort_bufferçš„è¯ï¼Œåˆ™ä½¿ç”¨ç£ç›˜ä¸´æ—¶æ–‡ä»¶ï¼Œè¿™æ ·ç†è§£å¯¹å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":181462,"user_name":"æœ¨å¾—æ„Ÿæƒ…çš„ç¼–ç æœºå™¨","can_delete":false,"product_type":"c1","uid":1810051,"ip_address":"","ucode":"9C6CD47ADCB8E6","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK0uyg1IicbEhLwsgM2A2ROoyVdWdmUqZfQfs6G67w9m3hdRNBMOQJatQoACj3qNGgj2KVIgricaYiaQ/132","comment_is_top":false,"comment_ctime":1582545648,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1582545648","product_id":100020801,"comment_content":"è€å¸ˆæœ€åçš„éšæœº3ä¸ªå•è¯çš„ç¨‹åºå¯èƒ½ä¼šå‡ºç°ç›¸åŒå€¼ï¼Œå¯ä»¥æ”¹è¿›æˆæŠŠæ€»è¡Œæ•°åˆ†æˆ3ä»½ï¼Œæ¯”å¦‚10000è¡Œï¼Œå°±åˆ†æˆ [0-3333]ï¼Œ[3334-6666], [6667-9999]ï¼Œç„¶åæ¯ä¸€ä»½å–ä¸€ä¸ªéšæœºæ•°ï¼Œè¿™æ ·Y1, Y2, Y3å°±ä¸ä¼šé‡å¤äº†ã€‚","like_count":0},{"had_liked":false,"id":179498,"user_name":"é£ç«æµè‹","can_delete":false,"product_type":"c1","uid":1286444,"ip_address":"","ucode":"FD9948121EC3DD","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTImeO3D5b56uwnS9OqzsuhNiciaA3ekC49lNt7NaGoTZ3U7tfLKRLR3V0F7k8hEJQZ4mQD7hfGwWiceQ/132","comment_is_top":false,"comment_ctime":1582016227,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1582016227","product_id":100020801,"comment_content":"EXPLAIN SELECT * FROM product ORDER by rand(); <br>è¿™ä¸ªæŸ¥è¯¢è¯­å¥Using temporary; Using filesortæ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯å½“æŠŠselect *æ¢æˆselect idæ—¶ï¼Œå‘ç°extraä¿¡æ¯ä¸­å¤šäº†ä¸€ä¸ªUsing Indexï¼Œmysqlé€‰äº†ä¸€ä¸ªåŸºæ•°æœ€å°çš„ç´¢å¼•ã€‚è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":175795,"user_name":"ç‹ç››æ­¦","can_delete":false,"product_type":"c1","uid":1182516,"ip_address":"","ucode":"DE7EF246D3DCE8","user_header":"https://static001.geekbang.org/account/avatar/00/12/0b/34/f41d73a4.jpg","comment_is_top":false,"comment_ctime":1580828516,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1580828516","product_id":100020801,"comment_content":"innodb_sort_buffer_sizeå’Œsort_buffer_size è¿™ä¸¤ä¸ªå‚æ•°çš„åŒºåˆ«æ˜¯ï¼Ÿ","like_count":0},{"had_liked":false,"id":171023,"user_name":"ipromiseu","can_delete":false,"product_type":"c1","uid":1159317,"ip_address":"","ucode":"775E2CC0E7CA69","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erbUHD8KH3mYz39QuHj5BXB06VqCus5WR4oHfNuSYdPVLno3Tq61yhMiaugxpMicKibDFQ4KwX7icoDWQ/132","comment_is_top":false,"comment_ctime":1578824408,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1578824408","product_id":100020801,"comment_content":"limit Y,1 ä¼šæœ‰æ·±ç¿»é¡µé—®é¢˜ï¼Œå¯ä»¥æ”¹æˆ where id &gt; Y ,limit 1ã€‚è¿™ä¸ªå¯¹ä¸å¯¹","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":159843,"discussion_content":"çœ‹ä½ order byçš„å­—æ®µæ˜¯ä¸æ˜¯ä¹Ÿä¾æ—§æ˜¯é€’å¢çš„ã€‚å¦åˆ™è¿™ä¸ªä¸ä¸€å®šå¯¹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580736441,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":167504,"user_name":"æ¹¯å°¼é™³","can_delete":false,"product_type":"c1","uid":1607276,"ip_address":"","ucode":"7C787DB9FBCA37","user_header":"https://static001.geekbang.org/account/avatar/00/18/86/6c/b4f41f88.jpg","comment_is_top":false,"comment_ctime":1577845870,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1577845870","product_id":100020801,"comment_content":"åœ¨IDæ˜¯è¿ç»­çš„æƒ…å†µä¸‹ï¼Œåœ¨ä¸šåŠ¡å±‚ä»£ç åšéšæœºé€‰æ‹©ç®—æ³•ï¼Œé€‰å‡ºä¸‰ä¸ªæ•°ï¼Œç„¶åç›´æ¥select * from t where id=xx.","like_count":0},{"had_liked":false,"id":165270,"user_name":"æ ‹èƒ½","can_delete":false,"product_type":"c1","uid":1006849,"ip_address":"","ucode":"8BD9C939D3E8E1","user_header":"https://static001.geekbang.org/account/avatar/00/0f/5d/01/9cd84003.jpg","comment_is_top":false,"comment_ctime":1577191152,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1577191152","product_id":100020801,"comment_content":"æ²¡å¤ªçœ‹æ˜ç™½ï¼šâ€œselect * from t where city=&quot;æ­å·&quot; order by name limit 10000,100; â€ ä¸ºä»€ä¹ˆè¦æ”¹æˆ â€œ<br>select * from t where city=&quot;æ­å·&quot; order by name limit 10100; â€ ï¼Ÿæˆ‘ç†è§£ç¬¬ä¸€æ¡æ—¢ç„¶æ˜¯10000,100ï¼Œé‚£sort_bufferæ˜¯å¦è‡ªç„¶å°±å¯ä»¥è§£ææˆå¯¹10100è¿›è¡Œäº†æ’åºï¼Œç„¶åå†è¿”å›æœ€åçš„100æ¡æ•°æ®ï¼Ÿè€Œç¬¬äºŒæ¡å…¶å®è¿˜æ˜¯è¦å°†10100æ¡æ•°æ®æ‹¿åˆ°sort_bufferä¸­è¿›è¡Œæ’åºçš„ï¼Œæˆ‘æ˜¯æ²¡çœ‹å‡ºæ¥ç¬¬äºŒæ¡æœ‰å•¥ç‰¹åˆ«æŒ‡å‡ºï¼Ÿåæ­£éƒ½æ˜¯åœ¨ä¸´æ—¶æ–‡ä»¶ä¸­è¿›è¡Œæ’åº","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":159873,"discussion_content":"å¹¶ä¸æ˜¯å•Šï¼Œå› ä¸ºæ­å·ã€è‹å·åŠ èµ·æ¥å¯èƒ½8ä¸‡è¡Œï¼Œç„¶å8ä¸‡è¡Œå†æ’åºï¼Œè¿‡10000è¡Œï¼Œç„¶åå–100ã€‚å¦‚æœé‡‡ç”¨è¿™ç§æ–¹å¼ï¼Œä¹Ÿå°±æœ€å¤šå–20200è¡Œï¼Œç„¶åæ’åºå†è·¨10000è¡Œï¼Œå–100è¡Œã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580738102,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":162760,"user_name":"å’©å’©å’©","can_delete":false,"product_type":"c1","uid":1237849,"ip_address":"","ucode":"9DEC7D5D52D972","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/6a8fRQFxX5VXOpRKyYibsemKwDMexMxkzZOBquPo6T4HOcYicBiaTcqibDoTIhZSjVjF3nKXTEGDYOGPt2xqqwiawjg/132","comment_is_top":false,"comment_ctime":1576585437,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1576585437","product_id":100020801,"comment_content":"sort_buffer_sizeå’Œtmp_table_sizeçš„åŒºåˆ«æœ‰ç‚¹æ‡µ.ä»€ä¹ˆæ—¶å€™ä¼šä½¿ç”¨ä¸´æ—¶æ–‡ä»¶,ä»€ä¹ˆæ˜¯æ—¶å€™ä¼šä½¿ç”¨ä¸´æ—¶è¡¨?<br>æˆ‘çš„ç†è§£æ˜¯ä¸€èˆ¬æ’åºè¿‡ç¨‹ä¸­,sort_buffer_sizeæ¯”æ•°æ®é‡ä½åˆ™ä¼šä½¿ç”¨ä¸´æ—¶æ–‡ä»¶è¾…åŠ©æ’åº,è€Œä¸´æ—¶è¡¨åˆ™æ˜¯éœ€è¦å…¶å®ƒå­—æ®µè¾…åŠ©æ’åºæ—¶ä½¿ç”¨,ä½†æ˜¯éœ€è¦å…¶å®ƒå­—æ®µå…¶å®ä¹Ÿå¯ä»¥åœ¨sort_bufferåŠ ä¸€ä¸ªå­—æ®µå®Œæˆå‘€.ä¸çŸ¥é“å¯¹ä¸å¯¹,è€å¸ˆæŒ‡ç‚¹ä¸€ä¸‹","like_count":0},{"had_liked":false,"id":160413,"user_name":"é‡è§","can_delete":false,"product_type":"c1","uid":1624590,"ip_address":"","ucode":"FAF53CD4C28494","user_header":"https://static001.geekbang.org/account/avatar/00/18/ca/0e/5009c5ff.jpg","comment_is_top":false,"comment_ctime":1575947206,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1575947206","product_id":100020801,"comment_content":"è¿™ç§é—®é¢˜æˆ‘ä¼šåœ¨ä¸šåŠ¡ä»£ç é‡Œè·å–æ€»è¡Œæ•°ä¹‹åï¼Œç›´æ¥éšæœºå‡ºä¸‰ä¸ªidå€¼ï¼Œç„¶åç”¨idå»æ•°æ®åº“åŒ¹é…å–å€¼äº†ã€‚<br><br>éšæœºè¿™ç§äº‹å„¿ï¼Œæœ€å¥½äº¤ç»™ä¸šåŠ¡ä»£ç æ¥åšã€‚<br><br>æ•°æ®åº“æœ€å–œæ¬¢ç»™ä»–ä¸ªä¸»é”®IDï¼Œè·å–å€¼äº†ã€‚ç®€å•åˆå¿«é€Ÿã€‚","like_count":0,"discussions":[{"author":{"id":1667987,"avatar":"https://static001.geekbang.org/account/avatar/00/19/73/93/0a3a1e5b.jpg","nickname":"Ryan","note":"","ucode":"95BBBEE5B23878","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":215800,"discussion_content":"å‡å¦‚ä½ éšæœºç®—å‡ºæ¥çš„idåœ¨æ•°æ®åº“è¢«åˆ é™¤äº†å‘¢ï¼Ÿä½ ä¸èƒ½ä¸€ç›´é‡å¤ç®—å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585384338,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":160202,"user_name":"Simple life","can_delete":false,"product_type":"c1","uid":1571460,"ip_address":"","ucode":"1902D7F72FB43F","user_header":"https://static001.geekbang.org/account/avatar/00/17/fa/84/f01d203a.jpg","comment_is_top":false,"comment_ctime":1575890667,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1575890667","product_id":100020801,"comment_content":"çœ‹äº†è€å¸ˆå¯¹äºæœ€åä¸ŠæœŸé—®é¢˜çš„è§£ç­”ï¼Œæœ‰ä¸ªç–‘æƒ‘ï¼Œè™½ç„¶æ–¹æ¡ˆå‡å°‘äº†æ•°æ®åº“çš„æ“ä½œæ—¶é—´ï¼Œä½†æ˜¯å´å¢åŠ äº†IOæ—¶é—´ï¼Œä¼šä¸ä¼šå¾—ä¸å¿å¤±ï¼Œæ¯•ç«Ÿè¿œç¨‹è®¿é—®çš„è€—æ—¶æ˜¯æ¯”è¾ƒå¤§çš„","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":159877,"discussion_content":"è¿™ä¸ªå°±çœ‹æ•°æ®é‡ï¼Œåšå„æ–¹é¢æƒè¡¡ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580738197,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157844,"user_name":"Geek_3004e0","can_delete":false,"product_type":"c1","uid":1732823,"ip_address":"","ucode":"441D39BDC39E4A","user_header":"https://static001.geekbang.org/account/avatar/00/1a/70/d7/d1049bae.jpg","comment_is_top":false,"comment_ctime":1575269293,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575269293","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæƒ³é—®ä¸‹ï¼Œå¯¹äºwordsè¡¨åšæ’åºæŸ¥è¯¢select word from words order by word limit 3ï¼Œå‘ç°æ…¢æŸ¥è¯¢ä¸­çš„æ—¥å¿—è®°å½• Rows_examined: 10003ï¼Œè€ŒæŸ¥è¯¢å‰åæ¯”è¾ƒ performance_schema.session_status where variable_name = &#39;Innodb_rows_read&#39; çš„å·®å€¼æ˜¯1000ï¼Œ max_length_for_sort_data å‚æ•°æ˜¯4096ï¼Œsort_buffer_sizeæ˜¯262144ã€‚ä¸ºä»€ä¹ˆæ…¢æŸ¥è¯¢çš„rows_examinedä¼šå¤š3æ¡è®°å½•å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":157618,"user_name":"looper","can_delete":false,"product_type":"c1","uid":1238396,"ip_address":"","ucode":"DA4BCE83836C04","user_header":"https://static001.geekbang.org/account/avatar/00/12/e5/7c/2a5a418b.jpg","comment_is_top":false,"comment_ctime":1575213530,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575213530","product_id":100020801,"comment_content":"è¯¾åé¢˜ï¼šä¸ä½¿ç”¨å‡å°‘æ‰«æè®°å½•æ•°ï¼Œå¯ä»¥é€šè¿‡ä¼˜åŒ–äº†limitï¼Œä½¿ç”¨id+1çš„æ–¹å¼","like_count":0},{"had_liked":false,"id":152929,"user_name":"é•¿æœŸè§„åˆ’","can_delete":false,"product_type":"c1","uid":1019332,"ip_address":"","ucode":"5EF65E9115834B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8d/c4/6f97daea.jpg","comment_is_top":false,"comment_ctime":1574125217,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1574125217","product_id":100020801,"comment_content":"æ¯ä¸ªå•è¯10ä¸ªå­—èŠ‚çš„è¯ï¼Œ10000ä¸ªå•æ˜¯100,000å­—èŠ‚ï¼Œå³100Kä¸åˆ°ï¼Œå¯ä»¥ç”¨redisç¼“å­˜çš„åˆ—è¡¨ï¼Œæ¯æ¬¡éšæœºé€‰ä¸‹æ ‡å–ä¸‰ä¸ªï¼Œç”¨lindex","like_count":0},{"had_liked":false,"id":152830,"user_name":"é•¿æœŸè§„åˆ’","can_delete":false,"product_type":"c1","uid":1019332,"ip_address":"","ucode":"5EF65E9115834B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8d/c4/6f97daea.jpg","comment_is_top":false,"comment_ctime":1574085124,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1574085124","product_id":100020801,"comment_content":"è€å¸ˆï¼Œåœ¨å›¾4ä¸­ä¼šç”¨åˆ°å †æ’åºå—ï¼Ÿæˆ‘ç†è§£åº”è¯¥ä¹Ÿä¼šå§ï¼Œå¯¹äºtop Ké—®é¢˜ï¼Œå †æ’åºæ—¶é—´å¤æ‚åº¦æ›´å°","like_count":0},{"had_liked":false,"id":134467,"user_name":"ä¸ä¸å†é™©è®°","can_delete":false,"product_type":"c1","uid":1661704,"ip_address":"","ucode":"A43829E454C067","user_header":"https://static001.geekbang.org/account/avatar/00/19/5b/08/b0b0db05.jpg","comment_is_top":false,"comment_ctime":1568852653,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1568852653","product_id":100020801,"comment_content":"å†è¡¥ä¸€å¥ï¼Œå…¸å‹çš„key  val  ç»“æ„  ä¸ºå•¥ä¸ç”¨nosql æ¥å¤„ç†ã€‚","like_count":0},{"had_liked":false,"id":134465,"user_name":"ä¸ä¸å†é™©è®°","can_delete":false,"product_type":"c1","uid":1661704,"ip_address":"","ucode":"A43829E454C067","user_header":"https://static001.geekbang.org/account/avatar/00/19/5b/08/b0b0db05.jpg","comment_is_top":false,"comment_ctime":1568852573,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1568852573","product_id":100020801,"comment_content":"ç¬¬ä¸€ååº”ï¼Œå•è¯è¡¨å¤§å°å›ºå®šï¼Œæ‰€ä»¥æˆ‘å°±ç›´æ¥<br>éšæœºç”Ÿäº§ä¸‰ä¸ªéšæœºæ•°<br>where  id  inï¼ˆxxx,yyy,zxzï¼‰<br>ç„¶åå†æ¥ç€å¬ã€‚ã€‚ã€‚","like_count":0,"discussions":[{"author":{"id":1667987,"avatar":"https://static001.geekbang.org/account/avatar/00/19/73/93/0a3a1e5b.jpg","nickname":"Ryan","note":"","ucode":"95BBBEE5B23878","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":215801,"discussion_content":"å¦‚æœéšæœºäº§ç”Ÿçš„idè®°å½•è¢«åˆ é™¤äº†ï¼Œåç»­æ€æ ·å¤„ç†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585384411,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":125046,"user_name":"å°ç½—å¸Œå†€","can_delete":false,"product_type":"c1","uid":1311995,"ip_address":"","ucode":"88416458FF0041","user_header":"https://static001.geekbang.org/account/avatar/00/14/04/fb/40f298bb.jpg","comment_is_top":false,"comment_ctime":1566051707,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1566051707","product_id":100020801,"comment_content":"1ã€æŸ¥è¯¢å½“å‰æœ€å¤§çš„è‡ªå¢id:select id from t order by id limit 1;<br>2ã€è·å–ä¸€ä¸ª0åˆ°æœ€å¤§è‡ªå¢idä¹‹é—´ä¸€ä¸ªæ•°ï¼š0-n<br>3ã€æŸ¥è¯¢å°äºéšæœºå€¼ç¬¬ä¸€æ¡ï¼Œæœ‰åˆ™ç»“æŸï¼šselect id from t order by id where id &lt;@id limit 1;<br>4ã€è‹¥æ­¥éª¤ä¸‰ä¸ºæŸ¥åˆ°ï¼Œåˆ™æŸ¥è¯¢å¤§äºæˆ–ç­‰äºéšæœºå€¼çš„ç¬¬ä¸€æ¡:select id from t order by id where id &gt;=@id limit 1;<br>æ€»ä½“æè¿°è¡Œæ•°ï¼šc+(2|3ï¼‰ï¼Œä½†æŸ¥è¯¢æ¬¡æ•°æœ€åéœ€3æ¬¡","like_count":0},{"had_liked":false,"id":124881,"user_name":"æˆ‘å®¶é—¨å‰æœ‰åªçŒª","can_delete":false,"product_type":"c1","uid":1488035,"ip_address":"","ucode":"F8CF618CF4681E","user_header":"https://static001.geekbang.org/account/avatar/00/16/b4/a3/a159ca86.jpg","comment_is_top":false,"comment_ctime":1566007505,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1566007505","product_id":100020801,"comment_content":"æœ‰ç‚¹ä¸ç†è§£ ï¼Œä¸ºä»€ä¹ˆåœ¨æ’åºä¹‹å‰ä¼šç”¨åˆ°ä¸´æ—¶è¡¨ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1652836,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epKJlW7sqts2ZbPuhMbseTAdvHWnrc4ficAeSZyKibkvn6qyxflPrkKKU3mH6XCNmYvDg11tB6y0pxg/132","nickname":"pc","note":"","ucode":"1AD538B9A900B6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":100433,"discussion_content":"ä¸ºäº†æœ‰éšæœºæ•°å­—æ®µR","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577259804,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":124836,"user_name":"æ—è‚¯","can_delete":false,"product_type":"c1","uid":1008582,"ip_address":"","ucode":"D2C97220230DE5","user_header":"https://static001.geekbang.org/account/avatar/00/0f/63/c6/d6ea3df3.jpg","comment_is_top":false,"comment_ctime":1566004608,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1566004608","product_id":100020801,"comment_content":"å¦‚æœå•è¯è¡¨çš„idæ˜¯è‡ªå¢çš„ï¼Œé‚£ä¹ˆæ¯æ¬¡åœ¨æœåŠ¡ç«¯å…ˆæ‹¿åˆ°minid maxidç„¶åéšæœºç®—å‡ºä¸‰ä¸ªidæ ¹æ®idå»åº“é‡Œå–å°±è¡Œäº†","like_count":0,"discussions":[{"author":{"id":1261674,"avatar":"https://static001.geekbang.org/account/avatar/00/13/40/6a/ab1cf396.jpg","nickname":"å°å…µ","note":"","ucode":"AA3BA727C25179","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5170,"discussion_content":"å¦‚æœæœ‰ç©ºæ´å°±ä¸è¡Œäº†","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1566027066,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":119116,"user_name":"é’±","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1564523540,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1564523540","product_id":100020801,"comment_content":"è¯¾å‰æ€è€ƒ<br>1ï¼šå¦‚ä½•æ­£ç¡®æ˜¾ç¤ºéšæœºæ¶ˆæ¯ï¼Ÿ<br>éšæœºæ¶ˆæ¯æ˜¯å•¥ï¼Ÿæ¶ˆæ¯æ˜¯å•¥ï¼Ÿåæ¥çœ‹è¿‡æ–‡ç« å‘ç°ï¼Œæ¶ˆæ¯å°±æ˜¯æ•°æ®åº“è¡¨ä¸­çš„è¡Œæ•°æ®ï¼Œéšæœºæ¶ˆæ¯å°±æ˜¯éšæœºçš„ä¸€è¡Œæ•°æ®ã€‚é‚£éšæœºå–ä¸€æ¡ä¸å°±è¡Œå•¦ï¼æ©ï¼Œå…³é”®æ€ä¹ˆéšæœºå–ï¼Ÿå¦‚æœä¸»é”®è‡ªå¢ä¸”è¿ç»­ï¼Œåˆ™æ¯”è¾ƒç®€å•ã€‚è‹¥ä¸»é”®è‡ªå¢ä½†ä¸è¿ç»­ï¼Œé‚£å°±ç»´æŠ¤ä¸€ä¸ªè‡ªå¢ä¸”è¿ç»­çš„å­—æ®µï¼ŒæŒ‰å“ªä¸ªå­—æ®µéšæœºå–ï¼Œå¯ä»¥åœ¨è¡¨ä¸­ç»´æŠ¤ï¼Œä¹Ÿå¯ä»¥åœ¨å†…å­˜ä¸­æ˜ å°„ã€‚<br>è¯¾åæ€è€ƒ<br>æ„Ÿè§‰è€å¸ˆçš„ä¼˜åŒ–æ€è·¯ï¼Œå’Œæˆ‘çš„è¯¾å‰æ€è€ƒç±»ä¼¼ï¼Œå½“ç„¶æœ‰äº›ç²¾å·§çš„æ–¹æ³•æˆ‘æ˜¯æ²¡æƒ³åˆ°çš„ã€‚","like_count":0},{"had_liked":false,"id":118143,"user_name":"å•Šå•Šå•Šå“¦å“¦","can_delete":false,"product_type":"c1","uid":1309877,"ip_address":"","ucode":"68C7153ECAAC57","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/RNO4yZyBvic914hewmNNE8iblYDcfv5yGHZ9OnKuCuZXNmGR0F5qV3icKLT2xpMt66GyEpicZVvrmz8A6TIqt92MQg/132","comment_is_top":false,"comment_ctime":1564279174,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1564279174","product_id":100020801,"comment_content":"è€å¸ˆ æ’åºé€‰æ‹©æ˜¯ã€‚ å¦‚æœå†…å­˜å¤Ÿæ”¾å…¨éƒ¨æ•°æ® å°±å¿«é€Ÿæ’åºç®—æ³•ï¼Œå¦‚æœå†…å­˜ä¸å¤Ÿä½†æ ¹æ®limitçš„æ•°é‡å¦‚æœå†…å­˜å¤Ÿæ”¾å°±ä¼˜å…ˆé˜Ÿåˆ—æ’åºã€‚å¦è€…å°±å½’å¹¶æ’åºæ³•å—","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":159896,"discussion_content":"æ˜¯çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580738838,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117111,"user_name":"ç‹æ–¯æ‹‰","can_delete":false,"product_type":"c1","uid":1593957,"ip_address":"","ucode":"D00DD3CE432189","user_header":"https://static001.geekbang.org/account/avatar/00/18/52/65/320eccb3.jpg","comment_is_top":false,"comment_ctime":1563970648,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1563970648","product_id":100020801,"comment_content":"è€å¸ˆæœ‰ä¸ªé—®é¢˜æˆ‘ä¸ç†è§£ã€‚<br>ä»Šå¤©è¯¾ç¨‹çš„2ä¸ªä¾‹å­ï¼Œç¬¬ä¸€ä¸ªè¦å»æ•´ä¸ªè¡¨æ’åºï¼Œç¬¬äºŒä¸ªå°±åªéœ€è¦ä¼˜å…ˆé˜Ÿåˆ—ã€‚ä¸ºä»€ä¹ˆç¬¬ä¸€ä¸ªä¾‹å­ä¸ç”¨é˜Ÿåˆ—ä¼˜å…ˆæ’åºå‘¢ï¼Œæˆ‘ç†è§£åªéœ€è¦æ’3ä¸ªï¼Œå¦å¤–9997ä¸ªæ ¹æœ¬ä¸éœ€è¦å‘¢ã€‚ã€‚æ±‚è§£ç­”","like_count":0,"discussions":[{"author":{"id":1526355,"avatar":"https://static001.geekbang.org/account/avatar/00/17/4a/53/063f9d17.jpg","nickname":"moonfox","note":"","ucode":"902BFF40EFA9FA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298468,"discussion_content":"ä½ æ“ä½œä¸€ä¸‹å°± èƒ½çœ‹å‡ºæ¥ï¼Œç¬¬ä¸€ä¸ªå…¶å®ä¹Ÿç”¨äº† ä¼˜å…ˆæ’åºå‘¢ï¼Œä½†è¦å¾—åˆ°æœ€å°çš„3ä¸ªï¼Œè¿˜æ˜¯è¦å’Œå¦å¤–9777ä¸ªè¿›è¡Œæ¯”è¾ƒæ‰å¯ä»¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597305500,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":159901,"discussion_content":"å› ä¸ºtmp_table_sizeå˜æˆäº†1024ï¼Œè¿‡æ¸¡åˆ°äº†ç£ç›˜ä¸´æ—¶è¡¨ï¼Œæ­¤æ—¶å¯ä»¥é‡‡ç”¨ä¼˜å…ˆé˜Ÿåˆ—æ’åºã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580739224,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":114661,"user_name":"Robert","can_delete":false,"product_type":"c1","uid":1304095,"ip_address":"","ucode":"BC46EBC8B45E5A","user_header":"https://static001.geekbang.org/account/avatar/00/13/e6/1f/1dca76e5.jpg","comment_is_top":false,"comment_ctime":1563358795,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1563358795","product_id":100020801,"comment_content":"è€å¸ˆï¼Œè¯·æ•™æ‚¨ä¸€ä¸ªé—®é¢˜ã€‚è¡¨aï¼Œæœ‰ä¸‰ä¸ªå­—æ®µï¼Œidï¼Œnameï¼Œageã€‚idä¸ºä¸»é”®ï¼Œnameä¸ºäºŒçº§ç´¢å¼•ã€‚<br>è¡¨çš„æ•°æ®æœ‰(1,&#39;aa&#39;,12),(2,&#39;aa&#39;,23),(3,&#39;aa&#39;,32),(4,&#39;cc&#39;,33),(5,&#39;dd&#39;,24),....ï¼Œå‡è®¾ä¸€ä¸ªé¡µåªèƒ½æ”¾ä¸¤æ¡æ•°æ®ï¼Œå³id=1å’Œid=3ä¸å†åŒä¸€ä¸ªæ•°æ®é¡µã€‚<br>select * from a where name = â€˜aaâ€™ï¼›æˆ‘è¿™æ¡è¯­å¥å¦‚æœèµ°äº†nameçš„ç´¢å¼•ï¼Œç„¶åä¸€æ¡æ¡å›è¡¨ã€‚<br>é—®é¢˜æ˜¯ï¼šç¬¬ä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„ï¼Œæ‰¾åˆ°id=1å›è¡¨ï¼Œæ˜¯å°†id=1æ‰€åœ¨çš„æ•°æ®é¡µåˆ·åˆ°å†…å­˜ä¸­ï¼Œè¿˜æ˜¯ä»…ä»…æŠŠid=1è¿™ä¸€è¡Œåˆ·åˆ°å†…å­˜å‘¢ï¼Ÿæˆ‘çœ‹è€å¸ˆä¸€ç›´è¯´çš„æ˜¯å°†è¿™ä¸€è¡Œåˆ·åˆ°å†…å­˜ï¼Œä½†æ˜¯å†…å­˜åˆ·æ–°åˆ°ç£ç›˜æ˜¯ä»¥é¡µçš„æ–¹å¼å¾€ä¸‹åˆ·ï¼Œå¹¶ä¸”è¦†ç›–ã€‚<br>é—®é¢˜äºŒï¼šå¦‚æœå›è¡¨çš„æ•°æ®åˆ·åˆ°å†…å­˜æ˜¯ä»¥å•è¡Œæ¥çš„è¯ï¼Œæ€æ ·ä¿è¯æ•°æ®åœ¨è¿™ä¸ªé¡µä¸­çš„ä½ç½®ä»¥åŠå…¶ä»–ä¿¡æ¯ä¸å˜å‘¢ï¼Ÿæ€æ ·ä¿è¯æ•°æ®é¡µä»å†…å­˜åˆ·ç›˜çš„æ—¶å€™ï¼Œè¿™ä¸ªæ•°æ®é¡µå¯ä»¥ç›´æ¥è¦†ç›–å‘¢ï¼Ÿ<br>é—®é¢˜ä¸‰ï¼šå¦‚æœå›è¡¨åˆ·åˆ°å†…å­˜çš„æ˜¯åˆ·çš„æ»¡è¶³æ¡ä»¶çš„æ•°æ®é¡µï¼Œé‚£å½“id=2å›è¡¨çš„æ—¶å€™ï¼Œå‘ç°id=1å·²ç»åˆ·è¿‡ä¸€æ¬¡åˆ°å†…å­˜é‡Œäº†ï¼Œè¿™ä¸ªé¡µæ˜¯ä¸æ˜¯å°±ä¸ä¼šå†å¾€ä¸Šåˆ·äº†å‘¢ï¼Ÿè¿™ä¸ªä¿¡æ¯è®°å½•åœ¨å“ªé‡Œå‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1135593,"avatar":"https://static001.geekbang.org/account/avatar/00/11/53/e9/f244988e.jpg","nickname":"NIRVANA","note":"","ucode":"F3A979679AA44E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":291622,"discussion_content":"mysqléƒ½æ˜¯æŒ‰é¡µæ¥è¯»çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594890444,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":113545,"user_name":"yhui","can_delete":false,"product_type":"c1","uid":1512714,"ip_address":"","ucode":"1AAAF47E41FFB8","user_header":"https://static001.geekbang.org/account/avatar/00/17/15/0a/c450e565.jpg","comment_is_top":false,"comment_ctime":1563074775,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1563074775","product_id":100020801,"comment_content":"è¿™ä¸ªé—®é¢˜æœ€ä¼˜çš„è§£å†³è¿˜æ˜¯æŠŠéšæœºåœ¨åº”ç”¨ç¨‹åºé‡Œå¤„ç†ï¼Œç„¶åç»„åˆsqlæŸ¥è¯¢å³å¯","like_count":0},{"had_liked":false,"id":100361,"user_name":"Longerian","can_delete":false,"product_type":"c1","uid":1032464,"ip_address":"","ucode":"0B74EE70D09A2A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c1/10/28d5a686.jpg","comment_is_top":false,"comment_ctime":1559537209,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1559537209","product_id":100020801,"comment_content":"æœ‰æ²¡æœ‰è¯¾ç¨‹æºç æ•´ç†å‡ºæ¥ï¼Œè¿™æ ·å¤§å®¶å¯ä»¥å¯¹ç€å‚è€ƒ å­¦ä¹ ä¸‹","like_count":0},{"had_liked":false,"id":95709,"user_name":"å†¥ç‹æ˜Ÿ","can_delete":false,"product_type":"c1","uid":1311603,"ip_address":"","ucode":"CA43C381A69736","user_header":"https://static001.geekbang.org/account/avatar/00/14/03/73/38397da1.jpg","comment_is_top":false,"comment_ctime":1558146443,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"1558146443","product_id":100020801,"comment_content":"è¿™é‡Œæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œåœ¨ä½¿ç”¨order by rand()è¿›è¡Œéšæœºæ•°æ®é€‰æ‹©çš„æ—¶å€™ï¼Œä¸ºä»€ä¹ˆè¦ä½¿ç”¨å†…å­˜ä¸´æ—¶è¡¨å‘¢ï¼Œä¸ºä»€ä¹ˆä¸ç›´æ¥ä½¿ç”¨sort_bufferè¿›è¡Œæ’åºï¼Ÿå¦å¤–ï¼Œåœ¨è¿™ä¸ªæ–¹å¼ä¸­ï¼Œä¸ºä»€ä¹ˆè¦è¿›è¡Œä¸¤æ¬¡æ’åºï¼Œåœ¨å†…å­˜ä¸´æ—¶è¡¨å’Œsort_bufferä¹‹ä¸­è¿›è¡Œäº†ä¸¤æ¬¡æ’åºï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1526355,"avatar":"https://static001.geekbang.org/account/avatar/00/17/4a/53/063f9d17.jpg","nickname":"moonfox","note":"","ucode":"902BFF40EFA9FA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298424,"discussion_content":"æˆ‘ä¹Ÿè§‰å¾—å¦‚æœå†…å­˜è¡¨å¯ä»¥æ”¾ä¸‹æ‰€æœ‰æ•°æ®ï¼Œsort_bufferä¹Ÿå¯ä»¥ï¼Œå°±æ²¡å¿…è¦ä½¿ç”¨å†…å­˜è¡¨äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597296440,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":159908,"discussion_content":"å› ä¸ºæœ‰éšæœºå•Šï¼Œä¸èƒ½æŠŠè¿™ä¸ªå› ç´ ä¸¢æ‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580739318,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1526355,"avatar":"https://static001.geekbang.org/account/avatar/00/17/4a/53/063f9d17.jpg","nickname":"moonfox","note":"","ucode":"902BFF40EFA9FA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298425,"discussion_content":"éšæœºå­—æ®µå¯ä»¥ç›´æ¥ç”Ÿæˆåœ¨sort _buffer é‡Œï¼Œç„¶åç›´æ¥å¯¹sort_buffer è¿›è¡Œæ’åºå°±å¯ä»¥äº†å‘€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597296575,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":159908,"ip_address":""},"score":298425,"extra":""}]}]},{"had_liked":false,"id":91972,"user_name":"MrVito","can_delete":false,"product_type":"c1","uid":1252169,"ip_address":"","ucode":"716FF6F8871706","user_header":"https://static001.geekbang.org/account/avatar/00/13/1b/49/ddefc656.jpg","comment_is_top":false,"comment_ctime":1557146456,"is_pvip":false,"replies":[{"id":"32859","content":"ç¨³ä½~~<br><br>å…ˆæè¿‡ä¸€ç¯‡ä¹Ÿæ˜¯å¯ä»¥çš„ğŸ˜†<br>","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1557155129,"ip_address":"","comment_id":91972,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1557146456","product_id":100020801,"comment_content":"å¥½å§ï¼Œåˆ°äº†è¿™ä¸€è¯¾ï¼Œæˆ‘å½»åº•å´©æºƒï¼","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449099,"discussion_content":"ç¨³ä½~~\n\nå…ˆæè¿‡ä¸€ç¯‡ä¹Ÿæ˜¯å¯ä»¥çš„ğŸ˜†\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1557155129,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":89250,"user_name":"kissrain","can_delete":false,"product_type":"c1","uid":1120583,"ip_address":"","ucode":"2177C53E3B2DCC","user_header":"https://static001.geekbang.org/account/avatar/00/11/19/47/b27f1314.jpg","comment_is_top":false,"comment_ctime":1556117037,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1556117037","product_id":100020801,"comment_content":"è¯·æ•™ä¸€ä¸‹è€å¸ˆï¼Œå†…å­˜ä¸´æ—¶è¡¨å’Œsort_bufferçš„ä¸åŒç‚¹åœ¨å“ªå‘¢ï¼Ÿæ—¢ç„¶sort_bufferå¯ä»¥ç”¨æ¥è¿›è¡Œæ’åºï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆè¿˜éœ€è¦å†…å­˜ä¸´æ—¶è¡¨ï¼Œè¿˜æœ‰ä»€ä¹ˆæ—¶å€™ä¼šç”¨åˆ°å†…å­˜ä¸´æ—¶è¡¨å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":159911,"discussion_content":"å¦‚æœsort_bufferéœ€è¦é¢å¤–çš„å†…å­˜æ¥åšä¸ºå¤„ç†æ’åºçš„å‰ææ¡ä»¶å‘¢ï¼Œé‚£å†…å­˜ä¸´æ—¶è¡¨å°±æœ‰ç”¨äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580739377,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":81475,"user_name":"Joey","can_delete":false,"product_type":"c1","uid":1322859,"ip_address":"","ucode":"AEC682E1A31AD9","user_header":"https://static001.geekbang.org/account/avatar/00/14/2f/6b/ea6aabac.jpg","comment_is_top":false,"comment_ctime":1553922255,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1553922255","product_id":100020801,"comment_content":"(city,name) æœ‰è”åˆç´¢å¼•ï¼Œin ä¹Ÿæ˜¯ä¼šèµ°ç´¢å¼•çš„å§ï¼Œç”¨mysql 5.7æµ‹è¯•ä¸‹æ¥ä¼šèµ°ç´¢å¼•<br>","like_count":0},{"had_liked":false,"id":79861,"user_name":"é“","can_delete":false,"product_type":"c1","uid":1324160,"ip_address":"","ucode":"851A0AD751D317","user_header":"https://static001.geekbang.org/account/avatar/00/14/34/80/30e9ae41.jpg","comment_is_top":false,"comment_ctime":1553565268,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1553565268","product_id":100020801,"comment_content":"å†…å­˜ä¸´æ—¶è¡¨åªæœ‰éšæœºæ•°å’Œå•è¯è¿™ä¸¤ä¸ªå­—æ®µï¼Œå¹¶æ²¡æœ‰è®°å½•ä½ç½®ä¿¡æ¯ï¼Œsortbufferæ˜¯å¦‚ä½•ä»å†…å­˜è¡¨è·å–ä½ç½®ä¿¡æ¯çš„å‘¢","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":159915,"discussion_content":"å†…å­˜ä¸´æ—¶è¡¨ä¸­æœ‰rowid","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580739414,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1135593,"avatar":"https://static001.geekbang.org/account/avatar/00/11/53/e9/f244988e.jpg","nickname":"NIRVANA","note":"","ucode":"F3A979679AA44E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":291623,"discussion_content":"çœ‹è€å¸ˆçš„å†…å®¹æ˜¯è¯´å¾—ä½ç½®ä¿¡æ¯ï¼Œå…¶å®ç›¸å½“äºæ˜¯æ•°ç»„çš„ä¸‹æ ‡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594890834,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":159915,"ip_address":""},"score":291623,"extra":""}]}]},{"had_liked":false,"id":79599,"user_name":"big-new","can_delete":false,"product_type":"c1","uid":1343129,"ip_address":"","ucode":"5BFDEC5A641959","user_header":"https://static001.geekbang.org/account/avatar/00/14/7e/99/2d064061.jpg","comment_is_top":false,"comment_ctime":1553511084,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1553511084","product_id":100020801,"comment_content":"å½“max_length_for_sort_data è¿™ä¸ªå€¼è¶³å¤Ÿå¤§æ—¶æ¯”å¦‚1024ï¼Œ<br>1ã€å½“ç¬¬16ç« çš„order by name limit 3çš„æƒ…å†µæ—¶ï¼Œé»˜è®¤ä¼šèµ°å…¨å­—æ®µæ’åºï¼Ÿ<br>2ã€order by randï¼ˆï¼‰æƒ…å†µæ—¶ ä¹Ÿæ˜¯ä¼šç›´æ¥èµ°rowidæ’åºï¼Œä¸ä¼šèµ°å…¨å­—æ®µæ’åºå—ï¼Ÿ<br>3ã€å½“max_length_for_sort_dataè¶³å¤Ÿå¤§ï¼ˆ1024ï¼‰ï¼Œä½†tmp_table_sizeå€¼ç‰¹åˆ«ç‰¹åˆ«å°æ—¶ï¼Œä¼šèµ°å“ªä¸ªæ’åºï¼Ÿ<br>æ€è·¯ä¼˜ç‚¹ä¸æ¸…æ¥šï¼Œéº»çƒ¦å¸®å¿™ç†ç†æ€è·¯ï¼Ÿ<br><br>","like_count":0},{"had_liked":false,"id":79050,"user_name":"é»„æ˜æ©","can_delete":false,"product_type":"c1","uid":1119409,"ip_address":"","ucode":"EF75C8BFA14D17","user_header":"https://static001.geekbang.org/account/avatar/00/11/14/b1/7d974f0a.jpg","comment_is_top":false,"comment_ctime":1553332495,"is_pvip":false,"replies":[{"id":"28796","content":"å—¯ è®¨è®ºçš„å‰æè¿˜æ˜¯innodbè¡¨","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1553339630,"ip_address":"","comment_id":79050,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1553332495","product_id":100020801,"comment_content":"æ€»æ‰«æè¡Œæ•°æ˜¯ C+(Y1+1)+(Y2+1)+(Y3+1)ï¼Œä¼˜åŒ–æ€è·¯ï¼Œä¸€èˆ¬è¿™æ ·çš„è¡¨éƒ½æ˜¯é™æ€çš„å§ï¼Œå¯ä»¥è€ƒè™‘MyIsamå¼•æ“ï¼ŒCå°±å˜å¸¸æ•°æ—¶é—´äº†ã€‚è‡³äºY1,Y3,Y3æœ‰åŒå­¦æåˆ°äº†ï¼Œç®—Y1ï¼Œå…¶ä»–ä¸¤ä¸ª<br>ç”¨ç›¸å¯¹éšæœºåšä¼˜åŒ–","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":444339,"discussion_content":"å—¯ è®¨è®ºçš„å‰æè¿˜æ˜¯innodbè¡¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553339630,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":78872,"user_name":"null","can_delete":false,"product_type":"c1","uid":1024294,"ip_address":"","ucode":"F9039EFED6B55D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaELZPnUAiajaR5C25EDLWeJURggyiaOP5GGPe2qlwpQcm5e3ybib8OsP4tvddFDLVRSNNGL5I3SFPJHsA/132","comment_is_top":false,"comment_ctime":1553265199,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1553265199","product_id":100020801,"comment_content":"è¯¾åæ€è€ƒï¼š<br>å‡è®¾ Y1 &lt;= Y2 &lt;= Y3(0&lt;=Y&lt;=10000)<br>å– limit Y1, Y3-Y1<br>ç¨‹åºå–åˆ—è¡¨çš„é¦–ï¼Œå°¾ï¼Œå†æ ¹æ® Y2 ä¸ Y1 çš„åç§»é‡å– Y2ã€‚<br>æ‰«æäº† C+Y3 è¡Œã€‚<br>ç¼ºç‚¹ï¼šå¦‚æœY1=0ï¼ŒY3=10000ï¼Œå°±å…¨è¡¨è¿”å›äº†ã€‚","like_count":0},{"had_liked":false,"id":77724,"user_name":"æ€è€ƒç‰¹ï½","can_delete":false,"product_type":"c1","uid":1301824,"ip_address":"","ucode":"B9B4E64962BAD2","user_header":"https://static001.geekbang.org/account/avatar/00/13/dd/40/a185dfcb.jpg","comment_is_top":false,"comment_ctime":1552987106,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552987106","product_id":100020801,"comment_content":"select * from a;  --500æ¡è®°å½•<br><br><br>SELECT DISTINCT<br>\tuuid() id,<br>\tname ,<br>\tnow(3) time<br>FROM<br>\ta<br>\t<br>--50æ¡è®°å½•<br><br>nameå”¯ä¸€è¡Œæ•°åªæœ‰50æ¡ï¼Œæ„Ÿè§‰è¿™æ¡sqlçš„æ‰§è¡Œæ˜¯å…ˆdintinct nameï¼Œç„¶åå†äº§ç”Ÿuuid()ï¼Œç»„åˆæˆç»“æœè¿”å›<br><br>ä¸è€å¸ˆè¿™æ˜¯æˆ‘æœ€è¿‘å‘ç°ä¸€ä¸ªé—®é¢˜ï¼Œæ‰§è¡Œè®¡åˆ’çœ‹ä¸å‡ºä»€ä¹ˆè¿‡ç¨‹ï¼Œå¯å¦è§£é‡Šä¸‹æ‰§è¡Œè¿‡ç¨‹ï¼Ÿ","like_count":0},{"had_liked":false,"id":72681,"user_name":"æ›¼å·´","can_delete":false,"product_type":"c1","uid":1185400,"ip_address":"","ucode":"794BACF765E2A8","user_header":"https://static001.geekbang.org/account/avatar/00/12/16/78/3f4a2104.jpg","comment_is_top":false,"comment_ctime":1551692009,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"1551692009","product_id":100020801,"comment_content":"ä¼˜å…ˆé˜Ÿåˆ—æ’åºä¸å®ç”¨ä¸´æ—¶è¡¨ï¼Œè€Œä¸”æ‰«æè¡Œæ•°æ¯”ä½¿ç”¨ä¸´æ—¶è¡¨çš„æ–¹æ³•è¦å°‘ï¼Œé‚£ä¸ºä»€ä¹ˆå¯¹äºlimitå€¼æ¯”è¾ƒå°çš„order byè¯­å¥è¿˜è¦ä½¿ç”¨ä¸´æ—¶è¡¨çš„æ–¹æ³•","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":159926,"discussion_content":"çœ‹tmp_table_sizeçš„å€¼ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580739659,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":71503,"user_name":"Magic","can_delete":false,"product_type":"c1","uid":1272047,"ip_address":"","ucode":"FD9CEDAA419EB0","user_header":"https://static001.geekbang.org/account/avatar/00/13/68/ef/6264ca3d.jpg","comment_is_top":false,"comment_ctime":1551359094,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1551359094","product_id":100020801,"comment_content":"å›ç­”ä¸€ä¸‹ä»Šæ—¥è¯¾åé¢˜ï¼šåˆ©ç”¨éšæœºå‡½æ•°rand()å¾—åˆ°Xï¼ŒYï¼ŒZåï¼Œå–Xï¼ŒYï¼ŒZçš„æœ€å¤§å€¼ï¼Œå‡è®¾æ˜¯Xï¼Œç„¶åselect word from words limit X,1å¾—åˆ°ç¬¬ä¸€ä¸ªéšæœºå€¼ï¼Œåˆ©ç”¨è¯»ç¼“å­˜ï¼Œåé¢æ‰§è¡Œselect word from words limit Y&#47;Z ,1æ—¶ç›´æ¥åˆ°ç¼“å­˜ä¸­æŸ¥åˆ°wordï¼Œä¸éœ€è¦è¿‡å¼•æ“äº†ï¼Œå› æ­¤æ€»çš„æ‰«æè¡Œæ•°å°±æ˜¯C+X+1äº†<br>","like_count":0},{"had_liked":false,"id":69606,"user_name":"å½’å¿ƒ","can_delete":false,"product_type":"c1","uid":1036567,"ip_address":"","ucode":"985E3188A9F6FE","user_header":"https://static001.geekbang.org/account/avatar/00/0f/d1/17/356cc426.jpg","comment_is_top":false,"comment_ctime":1550796775,"is_pvip":false,"replies":[{"id":"24694","content":"ä½ è¯´å¾—å¯¹ï¼Œè¿™é‡Œç¬”è¯¯çš„ï¼Œåº”è¯¥æ˜¯â€œè¶Šå°è¶Šå¥½â€ï¼Œå‘èµ·å‹˜è¯¯äº†","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1550798819,"ip_address":"","comment_id":69606,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1550796775","product_id":100020801,"comment_content":"æ–‡ç« ä¸­æåˆ°åœ¨å†…å­˜ä¸´æ—¶è¡¨ä¸­ä½¿ç”¨çš„æ˜¯rowidæ’åºï¼Œè€ƒè™‘å› ç´ é™¤äº†æ•°æ®åœ¨å†…å­˜ä¸­ä¸å¤šè®¿é—®ç£ç›˜å¤–ï¼Œä¼˜åŒ–å™¨ä¼šä¼˜å…ˆè€ƒè™‘æ’åºçš„è¡Œæ•°ã€‚æˆ‘çš„ç–‘é—®æ˜¯æ’åºçš„è¡Œæ•°å¯¹äºå…¨å­—æ®µæ’åºå’Œrowidæ’åºä¸æ˜¯éƒ½ä¸€æ ·å—ï¼Ÿæœ›è€å¸ˆè§£ç­”ï¼Œè°¢è°¢ã€‚","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":440183,"discussion_content":"ä½ è¯´å¾—å¯¹ï¼Œè¿™é‡Œç¬”è¯¯çš„ï¼Œåº”è¯¥æ˜¯â€œè¶Šå°è¶Šå¥½â€ï¼Œå‘èµ·å‹˜è¯¯äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1550798819,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":69122,"user_name":"ç½—å°å–‡å­","can_delete":false,"product_type":"c1","uid":1351630,"ip_address":"","ucode":"964BB2B8B68C7D","user_header":"https://static001.geekbang.org/account/avatar/00/14/9f/ce/58c35565.jpg","comment_is_top":false,"comment_ctime":1550665794,"is_pvip":false,"replies":[{"id":"24557","content":"ä½ è¿™é‡Œæ˜¯å‡è®¾å¦‚æœæ²¡æœ‰åˆ é™¤ï¼Œè‡ªå¢ä¸»é”®å°±æ˜¯è¿ç»­çš„ï¼Œå¯ä»¥çœ‹ä¸‹ã€Š39 | è‡ªå¢ä¸»é”®ä¸ºä»€ä¹ˆä¸æ˜¯è¿ç»­çš„ï¼Ÿã€‹ğŸ˜†","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1550679547,"ip_address":"","comment_id":69122,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1550665794","product_id":100020801,"comment_content":"æ€»è§‰å¾—åœ¨mysqlè¯­å¥ä¸Šåšè¿ç®—ä¼šè€—æ—¶å¾ˆå¤šï¼Œå¦‚æœè¿™ä¸ªè¡¨åœ¨ä¸åˆ é™¤æ•°æ®çš„æƒ…å†µä¸‹ï¼Œæˆ‘æ‹¿åˆ°idçš„æœ€å¤§å€¼å’Œæœ€å°å€¼ï¼Œç„¶åä»è¿™ä¸ªæ•°å€¼åŒºé—´éšæœºå–ä¸‰ä¸ªæ•°ï¼ˆæ¯”å¦‚ç”¨PHPå†™ï¼‰ï¼Œå†ä»è¡¨ä¸­æ ¹æ®è¿™ä¸‰ä¸ªidè·å–nameå€¼æ˜¯ä¸æ˜¯ä¹Ÿå¯ä»¥","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":439962,"discussion_content":"ä½ è¿™é‡Œæ˜¯å‡è®¾å¦‚æœæ²¡æœ‰åˆ é™¤ï¼Œè‡ªå¢ä¸»é”®å°±æ˜¯è¿ç»­çš„ï¼Œå¯ä»¥çœ‹ä¸‹ã€Š39 | è‡ªå¢ä¸»é”®ä¸ºä»€ä¹ˆä¸æ˜¯è¿ç»­çš„ï¼Ÿã€‹ğŸ˜†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1550679547,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":53784,"user_name":"æå®¢ç«¥","can_delete":false,"product_type":"c1","uid":1250397,"ip_address":"","ucode":"D92EA8CA293B93","user_header":"https://static001.geekbang.org/account/avatar/00/13/14/5d/f4d789cc.jpg","comment_is_top":false,"comment_ctime":1545724568,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1545724568","product_id":100020801,"comment_content":"ä¸ŠæœŸé—®é¢˜ï¼Œè™½ç„¶æƒ³åˆ°å½’å¹¶æ’åºï¼Œä½†æ˜¯æ²¡è§‰å¾—ä¼šæ‰‹åŠ¨é‡æ–°æ’åºï¼Œä»¥ä¸ºä¼šæœ‰åŠæ³•ä»sqlä¸‹æ‰‹ï¼Œå“ˆå“ˆã€‚<br>å¯¹å½’å¹¶æ’åºï¼Œæˆ‘è®¤ä¸ºå¯ä»¥select * from table limit 100 offset 10000ï¼Œå†è®¡ç®—ï¼Œé€Ÿåº¦æ›´å¿«ã€‚","like_count":0},{"had_liked":false,"id":53265,"user_name":"éƒ­æ±Ÿä¼Ÿ","can_delete":false,"product_type":"c1","uid":1313994,"ip_address":"","ucode":"613D638619B5A2","user_header":"https://static001.geekbang.org/account/avatar/00/14/0c/ca/6173350b.jpg","comment_is_top":false,"comment_ctime":1545620735,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1545620735","product_id":100020801,"comment_content":"å¼€å‘ä¸Šå°†å–ä¸‰æ¬¡éšæœºå€¼å˜æˆå–ä¸€æ¬¡éšæœºå€¼ï¼š<br>æ¯”å¦‚åœ¨ç®—æ³•3ä¸Šæ±‚å‡ºY æ­¤æ—¶æ‰«æçš„è¡Œæ•°ä¸ºC+Y+3<br>ç„¶åselect * from t limit @Y ,3<br>å¦‚æœyå€¼éå¸¸å¤§ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ä¸‹é¢æ–¹æ³•ï¼Œæ­¤æ—¶æ‰«æè¡Œæ•°æ˜¯C+(C-y)+3ï¼š<br>select * from t order by id desc  limit C-@Y,3<br>å¦å¤–è€ƒè™‘åˆ°è¿™ç§å•è¯è¡¨çš„æ•°é‡ä¸ä¸€å®šå¾ˆå¤šï¼ˆæŒ‰ç…§ç”¨æˆ·çº§åˆ«è®¾ç½®å•è¯è¡¨ï¼‰ï¼Œå•ä¸ªå•è¯è¡¨ä¸ä¼šå¾ˆå¤§ï¼ˆå•è¯æ•°é‡æœ‰é™å¹¶ä¸”å¯ä»¥è®¾ç½®ï¼‰å–å•è¯åŠŸèƒ½å¯¹ç”¨æˆ·ä½“éªŒéå¸¸é‡è¦ï¼Œå¦‚æœå¹¶å‘å¾ˆå¤§ï¼Œå¯ä»¥è€ƒè™‘åœ¨ç³»ç»Ÿå¯åŠ¨æ—¶åœ¨å†…å­˜ä¸­ä¸ºæ¯ä¸ªå•è¯è¡¨å»ºç«‹è¡Œå·â€”IDæ˜ å°„è¡¨ï¼Œè¿™æ ·éšå³ç®—å‡ºå–ç¬¬Yè¡Œæ•°æ®ï¼Œå¾—åˆ°å¯¹åº”è¡Œçš„idï¼Œç›´æ¥ç”¨idä»æ•°æ®åº“è·å–éœ€è¦çš„æ•°æ®,rediså¯ä»¥å¾ˆå®¹æ˜“å®ç°è¿™ç§åšæ³•","like_count":0},{"had_liked":false,"id":52991,"user_name":"dzkk","can_delete":false,"product_type":"c1","uid":1301932,"ip_address":"","ucode":"A81EFDB1D43C0D","user_header":"https://static001.geekbang.org/account/avatar/00/13/dd/ac/f40bbd15.jpg","comment_is_top":false,"comment_ctime":1545565711,"is_pvip":false,"replies":[{"id":"19206","content":"åˆ é™¤ä¸ä¼šå˜åŒ–ï¼Œå¢åŠ ä¸€èˆ¬ä¼šå˜ï¼Œé™¤éæ˜¯åˆšå¥½ä¹‹å‰æœ‰æ¯”è¾ƒå¤šçš„ç©ºé—²ç©ºé—´ï¼Œæ–°ç´¢å¼•éœ€è¦çš„ç£ç›˜éƒ½æ˜¯ç”¨çš„ç©ºé—²ç©ºé—´ã€‚<br><br>ä½ çœ‹ä¸€ä¸‹ä¸“æ çš„ã€Šæ•°æ®åˆ äº†ä¸€åŠï¼Œâ€¦ã€‹è¿™ç¯‡","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1545572499,"ip_address":"","comment_id":52991,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1545565711","product_id":100020801,"comment_content":"è€å¸ˆå¥½ï¼Œè¯·æ•™ä¸ªé—®é¢˜ï¼Œinnodbå¼•æ“å¢åŠ æˆ–è€…åˆ é™¤ç´¢å¼•åï¼Œæ•°æ®æ–‡ä»¶å¤§å°å¹¶æ— å˜åŒ–ï¼Œé‡å»ºè¡¨åæ–‡ä»¶å¤§å°æ‰ä¼šå˜åŒ–ï¼Œè¯·é—®è¿™æ˜¯æ€ä¹ˆå›äº‹ï¼Œèƒ½å¦å¸®åˆ†æä¸€ä¸‹ï¼Œè°¢è°¢ã€‚","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":434011,"discussion_content":"åˆ é™¤ä¸ä¼šå˜åŒ–ï¼Œå¢åŠ ä¸€èˆ¬ä¼šå˜ï¼Œé™¤éæ˜¯åˆšå¥½ä¹‹å‰æœ‰æ¯”è¾ƒå¤šçš„ç©ºé—²ç©ºé—´ï¼Œæ–°ç´¢å¼•éœ€è¦çš„ç£ç›˜éƒ½æ˜¯ç”¨çš„ç©ºé—²ç©ºé—´ã€‚\n\nä½ çœ‹ä¸€ä¸‹ä¸“æ çš„ã€Šæ•°æ®åˆ äº†ä¸€åŠï¼Œâ€¦ã€‹è¿™ç¯‡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545572499,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":52888,"user_name":"Chris","can_delete":false,"product_type":"c1","uid":1132777,"ip_address":"","ucode":"82056BBE2E4488","user_header":"https://static001.geekbang.org/account/avatar/00/11/48/e9/f7dba760.jpg","comment_is_top":false,"comment_ctime":1545547657,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1545547657","product_id":100020801,"comment_content":"æ˜¨å¤©é‡åˆ°ä¸€ä¸ªè¯¡å¼‚çš„é—®é¢˜ï¼›çŒœæµ‹æ˜¯mysqlåœ¨åšDDLçš„æ—¶å€™å´©æºƒï¼Œå¯¼è‡´è¡¨æ–‡ä»¶æŸåï¼›<br>[ERROR] InnoDB: The file &#39;.&#47;stt_member&#47;t_member_base_info_542.ibd&#39; already exists though the corresponding table did not exist in the InnoDB dat<br>a dictionary. Have you moved InnoDB .ibd files around without using the SQL commands DISCARD TABLESPACE and IMPORT TABLESPACE, or did mysqld crash in the middle of CREATE TABLE? You<br> can resolve the problem by removing the file &#39;.&#47;stt_member&#47;t_member_base_info_542.ibd&#39; under the &#39;datadir&#39; of MySQL.<br>ä»æ–‡ä»¶ä¸Šè§‚å¯Ÿï¼Œå‘ç°è¯¥è¡¨åªæœ‰ä¸€ä¸ªibdæ–‡ä»¶ï¼Œç¼ºå°‘frmæ–‡ä»¶ï¼Œ<br>1.é¦–å…ˆå°è¯•å¤åˆ¶ä¸€ä¸ªfrmï¼Œç„¶åæ‰§è¡Œdrop table base_info_542,æ‰§è¡ŒæˆåŠŸï¼Œä½†è¿˜æ˜¯æ— æ³•é‡å»ºè¯¥è¡¨ï¼Œæç¤ºå·²ç»å­˜åœ¨ï¼Œä½†é€šè¿‡å„ç§æ–¹å¼å‡æ— æ³•æŸ¥çœ‹åˆ°è¯¥è¡¨ï¼›<br>2.ç„¶åå°è¯•å°†æ•´ä¸ªåº“åˆ é™¤ï¼Œç„¶åå¯¼å…¥è¯¥åº“ï¼Œå‘ç°è¯¥è¡¨ä»ç„¶æ— æ³•åˆ›å»ºï¼›é‡å¯å®ä¾‹åï¼ŒæŠ¥å¦‚ä¸‹é”™ï¼š<br>[Warning] InnoDB: Tablespace &#39;stt_member&#47;t_member_base_info_542&#39; exists in the cache with id 40297 != 61817<br>3.æœ€åå°è¯•å°†redoæ—¥å¿—ç§»èµ°åé‡å¯å®ä¾‹ï¼Œè¿ç§»å›æ¥å†é‡å¯ï¼Œè¯¥è¡¨æ‰èƒ½åˆ›å»ºæˆåŠŸï¼›å› æ­¤æ€€ç–‘æ˜¯redoæ—¥å¿—ä¸­åŒ…å«è¯¥è¡¨æ‰§è¡Œalter tableçš„æ“ä½œï¼Œç»“æœæ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå®ä¾‹å´©æºƒï¼Œå¯¼è‡´è¯¥è¡¨æ–‡ä»¶æŸåï¼›ç„¶åæ¯æ¬¡é‡å¯ï¼Œmysqléƒ½ä¼šè¿›è¡Œå´©æºƒæ¢å¤ï¼Œå¯¼è‡´æ¯æ¬¡é‡å¯åè¯¥è¡¨éƒ½ä¸æ­£å¸¸ï¼›åè€Œæ˜¯è¿ç§»èµ°redoæ—¥å¿—åï¼Œå†é‡å¯åæ‰æ¢å¤æ­£å¸¸ï¼Œåº”è¯¥æ˜¯æ•°æ®æ–‡ä»¶çš„lsnå·²ç»å¤§äºäº†redoçš„lsnï¼Œæ‰€ä»¥æ‰ä¸ä¼šå°è¯•è¿›è¡Œæ¢å¤ã€‚<br>ä»¥ä¸Šå¾ˆå¤šéƒ½æ˜¯çŒœæµ‹ï¼Œè¿™é‡Œæ¯”è¾ƒç–‘æƒ‘çš„æ˜¯ï¼Œ<br>1.è¡¨ç»“æ„ä¿¡æ¯ä¸€èˆ¬ä¼šä¿ç•™å‡ åˆ†ï¼Œä¸ºä»€ä¹ˆæŸ¥çœ‹ç‰©ç†æ–‡ä»¶å·²ç»ä¸å­˜åœ¨äº†ï¼Œè¿˜ä¼šæŠ¥è¡¨æ–‡ä»¶å·²ç»å­˜åœ¨ï¼Œè€Œä¸”åˆ é™¤è¡¨åï¼Œä¾ç„¶æ— æ³•é‡å»ºï¼›å³ä½¿æ•´ä¸ªåº“éƒ½åˆ é™¤ï¼Œåˆ é™¤çš„æ—¶å€™ä¹Ÿå‘ç°æç¤ºè¯´RROR 1010 (HY000): Error dropping database (can&#39;t rmdir &#39;.&#47;stt_member&#39;, errno: 39);<br>2.mysqlé€šè¿‡redoæ—¥å¿—åšå´©æºƒæ¢å¤æ—¶ï¼Œå¯¹DDLè¯­å¥çš„æ¢å¤æ­¥éª¤æœ‰ä»€ä¹ˆç‰¹æ®Šä¹‹å¤„ä¹ˆï¼›<br>3.é‡åˆ°è¿™ç§æƒ…å†µï¼Œé™¤äº†åˆ é™¤redoæ—¥å¿—ï¼Œç„¶åé‡å¯å®ä¾‹ï¼Œè¿˜æœ‰æ›´å¥½çš„æ–¹æ³•ä¹ˆï¼Œå› ä¸ºåªæ˜¯ä¸€ä¸ªè¡¨æŸåäº†ï¼Œä½†å°è¯•å„ç§æ–¹æ³•ä¹Ÿæ— æ³•åˆ é™¤ï¼Œæ— æ³•é‡å»ºï¼Œé€šè¿‡åˆ é™¤æ•´ä¸ªå®ä¾‹çš„redoæ—¥å¿—çš„æ–¹å¼æ¢å¤ï¼Œä»£ä»·æœ‰ç‚¹é«˜ï¼›<br>è¿™ä¸ªé—®é¢˜å›°æ‰°äº†è›®ä¹…ï¼Œå¯èƒ½å­¦è‰ºä¸ç²¾ï¼Œæœ‰äº›åœ°æ–¹æ„Ÿè§‰æœ‰ç‚¹ä¸å¥½ç†è§£ğŸ˜„","like_count":0},{"had_liked":false,"id":52740,"user_name":"é•¿æ°","can_delete":false,"product_type":"c1","uid":1312212,"ip_address":"","ucode":"DD52C9494005F7","user_header":"https://static001.geekbang.org/account/avatar/00/14/05/d4/e06bf86d.jpg","comment_is_top":false,"comment_ctime":1545492703,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1545492703","product_id":100020801,"comment_content":"å¯¹yæ’åºï¼Œå‡å¦‚y1æœ€å°ï¼Œy3æœ€å¤§ï¼Œå¯ä»¥limit y1,ï¼ˆy3+1-y1ï¼‰ï¼Œå–å‡ºç»“æœåï¼Œæ ¹æ®y1,y2,y3çš„å·®å€¼ï¼Œä»ç»“æœé›†ä¸­æ‰¾åˆ°y1+1,y2+1,y3+1","like_count":0},{"had_liked":false,"id":52739,"user_name":"Scott","can_delete":false,"product_type":"c1","uid":1014800,"ip_address":"","ucode":"7E57FDCB5E5D49","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7c/10/165cb374.jpg","comment_is_top":false,"comment_ctime":1545492183,"is_pvip":false,"replies":[{"id":"19174","content":"è¿™ä¸€è®²ç¡®å®æ¯”è¾ƒéš¾ï¼Œå¦‚æœç›®å‰çœ‹æ¯”è¾ƒåƒåŠ›ï¼Œå¯ä»¥ç›´æ¥è·³åˆ°ç»“è®ºéƒ¨åˆ†å’Œæœ€åçš„æ–¹æ¡ˆè®¨è®ºéƒ¨åˆ†","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1545509796,"ip_address":"","comment_id":52739,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1545492183","product_id":100020801,"comment_content":"è¯´å®è¯ï¼Œå¯¹äºåº”ç”¨å¼€å‘äººå‘˜æ¥è®²ï¼Œè¿™ä¸ªçœ‹å¾—ä¸æ˜¯ä¸€èˆ¬çš„åƒåŠ›ï¼Œå¦‚æœè¦å¹³æ»‘éš¾åº¦ï¼Œæˆ‘å¯ä»¥å»çœ‹ä»€ä¹ˆä¹¦æˆ–è€…èµ„æ–™ã€‚","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":433966,"discussion_content":"è¿™ä¸€è®²ç¡®å®æ¯”è¾ƒéš¾ï¼Œå¦‚æœç›®å‰çœ‹æ¯”è¾ƒåƒåŠ›ï¼Œå¯ä»¥ç›´æ¥è·³åˆ°ç»“è®ºéƒ¨åˆ†å’Œæœ€åçš„æ–¹æ¡ˆè®¨è®ºéƒ¨åˆ†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545509796,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":52701,"user_name":"ä¿¡ä¿¡","can_delete":false,"product_type":"c1","uid":1303865,"ip_address":"","ucode":"8DF0EC045579FD","user_header":"https://static001.geekbang.org/account/avatar/00/13/e5/39/951f89c8.jpg","comment_is_top":false,"comment_ctime":1545480958,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1545480958","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæ‚¨å¥½ï¼Œæ‚¨åœ¨ä¸Šç¯‡æ–‡ç« ä¸­å›¾2ä¸‹çš„ç¬¬å…­ç‚¹æåˆ°â€œå¯¹ sort_buffer ä¸­çš„æ•°æ®æŒ‰ç…§å­—æ®µ name åšå¿«é€Ÿæ’åºâ€ï¼›æœ¬ç¯‡æ–‡ç« è¯´MYSQL5.6ä¹‹åå¼•å…¥ä¼˜å…ˆé˜Ÿåˆ—æ’åºçš„ã€‚é‚£æˆ‘å¯ä»¥ç†è§£ä¸ºï¼Œå½“ä¸éœ€è¦ä¸´æ—¶æ–‡ä»¶æ—¶ï¼ŒMYSQL5.6ä¹‹å‰ï¼Œsort_buffer ä¸­çš„æ•°æ®é‡‡ç”¨å¿«é€Ÿæ’åºï¼›MYSQL5.6ä¹‹åï¼Œsort_buffer ä¸­çš„æ•°æ®é‡‡ç”¨ä¼˜å…ˆé˜Ÿåˆ—æ’åºå—ï¼Ÿ","like_count":0},{"had_liked":false,"id":52561,"user_name":"å¤©ç‹","can_delete":false,"product_type":"c1","uid":1239337,"ip_address":"","ucode":"C074B2F9A5F007","user_header":"https://static001.geekbang.org/account/avatar/00/12/e9/29/629d9bb0.jpg","comment_is_top":false,"comment_ctime":1545438405,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1545438405","product_id":100020801,"comment_content":"ä¸´æ—¶è¡¨æ’åºï¼Œ1ä¸´æ—¶è¡¨æœ‰å†…å­˜ä¸´æ—¶è¡¨å’Œç£ç›˜ä¸´æ—¶è¡¨ï¼Œé»˜è®¤å†…å­˜ä¸´æ—¶è¡¨é…ç½®å¤§å°16Mï¼Œè¶…è¿‡äº†å°±ç”¨ç¡¬ç›˜ä¸´æ—¶è¡¨ã€‚extroé‡Œé¢æœ‰using temporaryå’Œusing filesortè¡¨ç¤ºä½¿ç”¨ä¸´æ—¶è¡¨ï¼Œå¯¹ä¸´æ—¶è¡¨æ’åºã€‚2 ä¸´æ—¶è¡¨æ’åºè¿‡ç¨‹ï¼ŒæŠŠä¸´æ—¶è¡¨è¯»åˆ°å†…å­˜ä¸­ï¼Œä¼˜å…ˆä½¿ç”¨rowidæ’åºï¼Œå°†rowidå’Œæ’åºå­—æ®µæ”¾åˆ°sort_bufferé‡Œé¢ï¼Œä¼˜å…ˆçº§é˜Ÿåˆ—æ’åºï¼Œlimitå–å‰å‡ è¡Œï¼Œæ‹¿ç€rowidå»ä¸´æ—¶è¡¨æ‰¾å¯¹åº”çš„æ•°æ®ã€‚3sort_bufferæ’åºï¼Œlimitæ¡æ•°æ¯”è¾ƒå°‘ï¼Œç»´æŠ¤ä¸€ä¸ªå †ï¼Œä¼˜å…ˆçº§å¯¹åˆ—æ’åºã€‚å¦‚æœlimitæ¡æ•°å¤šç”¨å¿«æ’ï¼Œå¦‚æœè¶…è¿‡äº†sort_buffer_sizeï¼Œç”¨å½’å¹¶æ’åºã€‚","like_count":0},{"had_liked":false,"id":52524,"user_name":"é“¶å¤ª","can_delete":false,"product_type":"c1","uid":1051765,"ip_address":"","ucode":"B505D15F7CB839","user_header":"https://static001.geekbang.org/account/avatar/00/10/0c/75/e7c6c403.jpg","comment_is_top":false,"comment_ctime":1545405013,"is_pvip":false,"replies":[{"id":"19151","content":"ç°åœ¨æå®¢æ—¶é—´ç³»ç»Ÿè¿˜ä¸æ”¯æŒâ€¦<br><br>ä»ä½ è¿™ä¸ªæ­»é”ä¿¡æ¯çœ‹å°±æ˜¯è¿™æ ·çš„ï¼Œ<br><br>è¦æ§åˆ¶äº‹åŠ¡ä¸­çš„é¡ºåº","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1545410466,"ip_address":"","comment_id":52524,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1545405013","product_id":100020801,"comment_content":"æ˜¯æœ‰å…¶ä»–è¯­å¥ï¼ŒåŒ…æ‹¬è¿™ä¸ªè¡¨çš„å…¶ä»–updateå’Œå…¶ä»–è¡¨çš„insertå’Œupdateã€‚çŒœæƒ³å¯èƒ½æ˜¯ä¸¤ä¸ªäº‹åŠ¡æœ‰ç›¸åŒçš„è®°å½•éœ€è¦æ›´æ–°ï¼Œäº’ç›¸æŒæœ‰äº†ä¸åŒè®°å½•çš„å”¯ä¸€ç´¢å¼•xé”ã€‚<br>ç›®å‰æ˜¯æ”¹ä¸ºäº†ç°æŸ¥å‡ºæ¥é€šè¿‡ä¸»é”®å»æ›´æ–°ï¼Œä½†æ„Ÿè§‰ä¸èƒ½è§£å†³è¿™ä¸ªé—®é¢˜ã€‚<br>æ¯”å¦‚äº‹åŠ¡1æ›´æ–°ABï¼Œäº‹åŠ¡2æ›´æ–°BAï¼Œé‚£ä¹ˆè¿˜æ˜¯å¯èƒ½äº‹åŠ¡1æŒæœ‰Açš„è¡Œé”ç­‰å¾…Bçš„è¡Œé”ï¼Œäº‹åŠ¡2ç›¸åã€‚ä¸çŸ¥æ˜¯å¦æ­£ç¡®ï¼Œè¯·è€å¸ˆæŒ‡æ­£ã€‚<br>å¦å¤–è¿™ä¸ªæ€ä¹ˆåœ¨åŸç•™è¨€å›å¤å•Šï¼ŸğŸ˜‚","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":433900,"discussion_content":"ç°åœ¨æå®¢æ—¶é—´ç³»ç»Ÿè¿˜ä¸æ”¯æŒâ€¦\n\nä»ä½ è¿™ä¸ªæ­»é”ä¿¡æ¯çœ‹å°±æ˜¯è¿™æ ·çš„ï¼Œ\n\nè¦æ§åˆ¶äº‹åŠ¡ä¸­çš„é¡ºåº","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545410466,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":52523,"user_name":"Against all odds","can_delete":false,"product_type":"c1","uid":1177919,"ip_address":"","ucode":"9A5F78691CE912","user_header":"https://static001.geekbang.org/account/avatar/00/11/f9/3f/9b8c205b.jpg","comment_is_top":false,"comment_ctime":1545404716,"is_pvip":false,"replies":[{"id":"19153","content":"å¥½å§ï¼Œè¿™æ˜¯æ”¹é¢˜ç›®ğŸ˜“","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1545412801,"ip_address":"","comment_id":52523,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1545404716","product_id":100020801,"comment_content":"ä¸ªäººè§‰å¾—éšæœºå–Næ¡å’Œéšæœºå–1æ¡æ˜¯ä¸€æ ·çš„ï¼Œå¯ä»¥ç›´æ¥ç›´æ¥å†™æˆlimit @Y,N;ä¸šåŠ¡é€»è¾‘ä¸Šåº”è¯¥æ²¡ä»€ä¹ˆåŒºåˆ«","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":433899,"discussion_content":"å¥½å§ï¼Œè¿™æ˜¯æ”¹é¢˜ç›®ğŸ˜“","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545412801,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":159940,"discussion_content":"è¿ç€å–Næ¡ä¹Ÿç®—æ˜¯éšæœºï¼Œå› ä¸ºYæ˜¯ä¸åŒçš„å˜›ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580740047,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":52518,"user_name":"Ryoma","can_delete":false,"product_type":"c1","uid":1130590,"ip_address":"","ucode":"7F692369239692","user_header":"https://static001.geekbang.org/account/avatar/00/11/40/5e/b8fada94.jpg","comment_is_top":false,"comment_ctime":1545403945,"is_pvip":true,"discussion_count":0,"race_medal":2,"score":"1545403945","product_id":100020801,"comment_content":"å…³äºè”åˆç´¢å¼•å†è¿½é—®ä¸€ä¸ªé—®é¢˜ï¼ˆåŸºäºä¸¤ä¸ªå­—æ®µç®€å•æ‹¼æ¥çš„å‰æï¼‰ï¼š<br>åœ¨ä¸€ä¸ªè¡¨ä¸­ä½¿ç”¨è”åˆå”¯ä¸€ç´¢å¼• col0 åŠ col1ï¼Œæœ‰å¦‚ä¸‹ä¸¤è¡Œæ•°æ®ï¼š<br>col0       col1<br>1            11<br>11           1<br><br>æ‹¼æ¥åçš„æ•°æ®éƒ½æ˜¯111ï¼Œä¸ç¬¦åˆè”åˆå”¯ä¸€ç´¢å¼•çš„è¦æ±‚ï¼Œæ‰€ä»¥è‚¯å®šä¸æ˜¯ç®€å•æ‹¼æ¥çš„ï¼ŒMySQLåº•å±‚åšäº†ä»€ä¹ˆå¤„ç†å‘¢","like_count":0},{"had_liked":false,"id":52481,"user_name":"å”åä¹‹","can_delete":false,"product_type":"c1","uid":1004394,"ip_address":"","ucode":"F472C71E043E03","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/JKKWS6TzhncvAA0p0NDiaATPIvMicSM76vNAg9IG1ibibcJYPAiaicYjZfq4gAV8GRtcTpOibfRD8vzqHBtL0ibmhwQsbg/132","comment_is_top":false,"comment_ctime":1545390960,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1545390960","product_id":100020801,"comment_content":"1ï¼šæ—¢ç„¶æ˜¯é¦–é¡µè¯´æ˜æ˜¯çƒ­ç‚¹æ•°æ®é¦–å…ˆè€ƒè™‘æ˜¯å¦åº”è¯¥ç”¨NoSqlç¼“å­˜ï¼›<br>2ï¼šå•ç‹¬ç”¨å­—æ®µä¸€ä¸ªå­—æ®µåšé€’å¢æ“ä½œï¼Œéšæœºä¸‰ä¸ªæ•°ä¸ºé€’å¢èŒƒå›´å†…çš„æŸ¥ï¼›","like_count":0},{"had_liked":false,"id":52428,"user_name":"å¤œç©ºä¸­æœ€äº®çš„æ˜Ÿ","can_delete":false,"product_type":"c1","uid":1267566,"ip_address":"","ucode":"ADC3E7B6789955","user_header":"https://static001.geekbang.org/account/avatar/00/13/57/6e/b6795c44.jpg","comment_is_top":false,"comment_ctime":1545380369,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1545380369","product_id":100020801,"comment_content":"å®šäº†ä¸“æ  è·Ÿç€å­¦äº†è¿™äº›å¤©ï¼Œè®¡åˆ’19 å¹´çœ‹çš„ç¬¬ä¸€æœ¬ å°±æ˜¯ ã€Šé«˜æ€§èƒ½mysqlã€‹æœ‰äº†è€å¸ˆçš„ä¸“æ åšåŸºç¡€ å°±ä¸æ€•äº†","like_count":0},{"had_liked":false,"id":52422,"user_name":"é£åŠ¨è‰","can_delete":false,"product_type":"c1","uid":1303051,"ip_address":"","ucode":"6ED975DC4DD0D0","user_header":"https://static001.geekbang.org/account/avatar/00/13/e2/0b/e3c8765a.jpg","comment_is_top":false,"comment_ctime":1545379879,"is_pvip":false,"replies":[{"id":"19126","content":"â€œæ•´ä¸ªè¡¨AæŒ‰ç…§å­—æ®µBåˆ†ç»„æ’åºâ€ï¼Œå¹¶æ²¡æœ‰å“¦ã€‚Båªéœ€è¦æŠŠè¡¨çš„ä¸»é”®å–å‡ºæ¥æ„é€ ç´¢å¼•å°±å¯ä»¥ï¼ŒAè¡¨åŸæ¥çš„ä¸»é”®ç´¢å¼•æ ‘æ˜¯ä¸éœ€è¦åŠ¨çš„<br><br>è¦è¯»å…¨è¡¨ã€‚<br><br><br>ç¬¬äºŒä¸ªé—®é¢˜ï¼Œä¼šå˜å¤§ï¼Œæ–°ç´¢å¼•å äº†é¢å¤–ç©ºé—´çš„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1545401253,"ip_address":"","comment_id":52422,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1545379879","product_id":100020801,"comment_content":"ä¸å¥‡è€å¸ˆï¼Œå¥½ï¼<br>      ä¸€ç›´é»˜é»˜çœ‹ï¼Œä»Šå¤©å¯¹ç´¢å¼•æ–¹é¢æœ‰ä¸€äº›ç–‘é—®ï¼š<br>1.è™½ç„¶æˆ‘ç†è§£äº†äºŒçº§ç´¢å¼•çš„å¶å­ä¾¿æ˜¯ä¸»é”®ç´¢å¼•çš„å€¼ï¼Œä¸»é”®ç´¢å¼•çš„å¶å­ä¾¿æ˜¯å…·ä½“æ•°æ®ã€‚é—®é¢˜æ¥äº†ï¼Œç´¢å¼•åœ¨ç‰©ç†å±‚é¢ï¼Œæ˜¯å’Œæ•°æ®ç»‘å®šåœ¨ä¸€èµ·çš„ï¼Œæ˜¯ä¸æ˜¯æˆ‘åœ¨Aè¡¨çš„Bå­—æ®µåˆ›å»ºä¸€ä¸ªäºŒçº§ç´¢å¼•å«indexBï¼Œå°±æ„å‘³ç€æ•´ä¸ªAè¡¨å°±æŒ‰ç…§Bå­—æ®µåšäº†ä¸€æ¬¡æ•°æ®æ ¼å¼åŒ–çš„åˆ†ç»„å¹¶æ’åºã€‚åšè¿™ä¸ªæ“ä½œçš„è¿‡ç¨‹ï¼Œæ˜¯å¦æ˜¯è¯»å…¨è¡¨å‘¢ï¼Ÿå¦å¤–åœ¨åˆ›å»ºç´¢å¼•ç»“æŸåï¼ŒåŸå…ˆæ²¡æœ‰äºŒçº§ç´¢å¼•çš„Aè¡¨åœ¨æ²¡æœ‰ç¬¬ä¸‰æ–¹å› ç´ ï¼ˆæ¯”å¦‚ç¢ç‰‡æ•´ç†ï¼‰çš„å¹²æ‰°ä¸‹ï¼Œæ˜¯å¦ç†è®ºè¡¨ä¼šå˜å¤§ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":433870,"discussion_content":"â€œæ•´ä¸ªè¡¨AæŒ‰ç…§å­—æ®µBåˆ†ç»„æ’åºâ€ï¼Œå¹¶æ²¡æœ‰å“¦ã€‚Båªéœ€è¦æŠŠè¡¨çš„ä¸»é”®å–å‡ºæ¥æ„é€ ç´¢å¼•å°±å¯ä»¥ï¼ŒAè¡¨åŸæ¥çš„ä¸»é”®ç´¢å¼•æ ‘æ˜¯ä¸éœ€è¦åŠ¨çš„\n\nè¦è¯»å…¨è¡¨ã€‚\n\n\nç¬¬äºŒä¸ªé—®é¢˜ï¼Œä¼šå˜å¤§ï¼Œæ–°ç´¢å¼•å äº†é¢å¤–ç©ºé—´çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545401253,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":52400,"user_name":"aeli","can_delete":false,"product_type":"c1","uid":1143750,"ip_address":"","ucode":"E8BA0D5B99FE08","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKBeLeMAng7hIAuuPVe5wn1kzXVVFgvkIbqzoj0vnj2G88YUmqVeL3rmSdaERbe1yRrA4qBL5GXUg/132","comment_is_top":false,"comment_ctime":1545375651,"is_pvip":false,"replies":[{"id":"19064","content":"é¢ä½ è¿™ä¸ªæ”¹äº†éœ€æ±‚ï¼Œä¸æ˜¯éšæœºï¼Œè€Œæ˜¯é¡ºåºğŸ˜„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1545380075,"ip_address":"","comment_id":52400,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1545375651","product_id":100020801,"comment_content":"æˆ‘è€ƒè™‘çš„æ–¹æ³•æ˜¯äº§å“ä¸Šçš„ï¼Œç‰¹åˆ«è¿™ç§éšæœºéœ€æ±‚è¦æ±‚ä¸èƒ½é‡å¤å‡ºç°ä¸Šæ¬¡ç”¨æˆ·æµè§ˆè¿‡çš„å•è¯æ—¶ã€‚<br>æˆ‘ä¼šé‡‡ç”¨ç”Ÿæˆä¸€ä¸ªå•è¯çš„ä¹±åºè¡¨ï¼Œæ¯”å¦‚3kå•è¯ï¼Œæˆ‘ä¼šç”Ÿæˆ3000*3000è¡Œï¼Œå•è¯idï¼Œéšæœºtypeï¼Œçš„æ–°è¡¨ã€‚ç„¶åç”¨æˆ·hashæˆ–éšæœºæŒ‡å®šä¸€ä¸ªtypeç±»å‹ï¼Œé€‰æ‹©ä¸€ä¸ªéšæœºé¡ºåºåï¼Œä¾åºæ˜¾ç¤ºè¿™3000ä¸ªå•è¯ï¼Œè¿™æ ·ç”¨æˆ·åªéœ€è¦è®°å½•ä¸Šæ¬¡æ˜¾ç¤ºçš„å•è¯åºåˆ—æ¸¸æ ‡ï¼Œç„¶åå–å¤§äºè¿™ä¸ªidçš„3ä¸ªå€¼å°±è¡Œã€‚","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":433859,"discussion_content":"é¢ä½ è¿™ä¸ªæ”¹äº†éœ€æ±‚ï¼Œä¸æ˜¯éšæœºï¼Œè€Œæ˜¯é¡ºåºğŸ˜„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545380075,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":52397,"user_name":"å¸ƒè¡£éª‡å®¢","can_delete":false,"product_type":"c1","uid":1256280,"ip_address":"","ucode":"5226B0F67090D1","user_header":"https://static001.geekbang.org/account/avatar/00/13/2b/58/11c05ccb.jpg","comment_is_top":false,"comment_ctime":1545375298,"is_pvip":false,"replies":[{"id":"19065","content":"é¢ï¼Œè¿™ä¸ªæ˜¯æ•°æ®ç»“æ„çš„â€œå †â€å“ˆ<br>ä¸´æ—¶è¡¨æŸ¥å®Œå°±åˆ é™¤ï¼Œè·ŸGCä¸å¤ªä¸€æ ·<br>å†…å­˜å’Œç¼“å­˜æ˜¯å•¥åŒºåˆ«ï¼Ÿæ˜¯åœ¨å†…å­˜ä¸­ï¼Œå¦‚æœå†…å­˜ä¸å¤Ÿå°±ç£ç›˜","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1545380146,"ip_address":"","comment_id":52397,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1545375298","product_id":100020801,"comment_content":"è€å¸ˆå¥½ï¼Œè¿™é‡Œçš„å †å’Œjvmä¸­çš„å †æœ‰ä»€ä¹ˆåŒºåˆ«å’Œè”ç³»å‘¢ï¼Ÿè¿˜æœ‰ä¸´æ—¶è¡¨(ç”Ÿå‘½å‘¨æœŸ)ç”Ÿå­˜å’Œé”€æ¯çš„è¿‡ç¨‹åˆæ˜¯æ€ä¹ˆæ ·çš„å‘¢ï¼Ÿæ˜¯æœ‰ç±»ä¼¼jvmä¸­çš„GCæ¥å¤„ç†å—ï¼Ÿè¿˜æœ‰ä¸´æ—¶è¡¨æ˜¯åœ¨ç¼“å­˜ä¸­ï¼Ÿè¿˜æ˜¯åœ¨å†…å­˜ä¸­çš„å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":433858,"discussion_content":"é¢ï¼Œè¿™ä¸ªæ˜¯æ•°æ®ç»“æ„çš„â€œå †â€å“ˆ\nä¸´æ—¶è¡¨æŸ¥å®Œå°±åˆ é™¤ï¼Œè·ŸGCä¸å¤ªä¸€æ ·\nå†…å­˜å’Œç¼“å­˜æ˜¯å•¥åŒºåˆ«ï¼Ÿæ˜¯åœ¨å†…å­˜ä¸­ï¼Œå¦‚æœå†…å­˜ä¸å¤Ÿå°±ç£ç›˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545380146,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":52396,"user_name":"ä¸€å—è·‘è·‘","can_delete":false,"product_type":"c1","uid":1177796,"ip_address":"","ucode":"576EC5A37721FD","user_header":"https://static001.geekbang.org/account/avatar/00/11/f8/c4/c7f665df.jpg","comment_is_top":false,"comment_ctime":1545375174,"is_pvip":false,"replies":[{"id":"19066","content":"ä½ è¯´çš„æ˜¯å“ªä¸ªè¿‡ç¨‹ï¼Œå†…å­˜é‡Œè¿˜æ˜¯ç£ç›˜é‡Œâ€¦","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1545380181,"ip_address":"","comment_id":52396,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1545375174","product_id":100020801,"comment_content":"è€å¸ˆï¼Œåœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæ’åºè¿‡ç¨‹ä¸­ pos ä½ç½®ä¿¡æ¯å­˜çš„æ˜¯ä¸»é”® id å§ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":433857,"discussion_content":"ä½ è¯´çš„æ˜¯å“ªä¸ªè¿‡ç¨‹ï¼Œå†…å­˜é‡Œè¿˜æ˜¯ç£ç›˜é‡Œâ€¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545380181,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":159946,"discussion_content":"posä½ç½®å­˜çš„æ˜¯row id","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580740145,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":52383,"user_name":"å´äºšæ¥ ","can_delete":false,"product_type":"c1","uid":1285800,"ip_address":"","ucode":"9582C4086FD13E","user_header":"https://static001.geekbang.org/account/avatar/00/13/9e/a8/09106237.jpg","comment_is_top":false,"comment_ctime":1545373006,"is_pvip":false,"replies":[{"id":"19067","content":"æˆ‘ä»¬æ–¹æ³•1å°±æ˜¯è¿™ä¹ˆåšçš„ğŸ˜„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1545380222,"ip_address":"","comment_id":52383,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1545373006","product_id":100020801,"comment_content":"å…¶å®å¾ˆç®€å•çš„ï¼Œæ‰¾å‡ºæœ€å¤§id å’Œ æœ€å°idï¼Œç„¶ååº”ç”¨ç«¯æ±‚å‡ºä¸‰ä¸ªéšæœºçš„idï¼Œç„¶åç›´æ¥select word from table where id &gt;= idï¼Œè¿™æ ·å°±è¡Œäº†ï¼Œä¸»è¦æ˜¯è¿™ä¸ªæ¡ä»¶è½¬æ¢æˆ&gt;= ï¼Œè¿™æ ·å°±ä¸æ€•ç©ºæ´é—®é¢˜äº†ï¼Œåªæ˜¯å¯èƒ½ä¸æ˜¯ç‰¹åˆ«éšæœºï¼Œä¼šæœ‰ä¸€äº›å•è¯æ‹¿åˆ°çš„æ¦‚ç‡è¾ƒå¤§ä¸€äº›äº†ã€‚","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":433854,"discussion_content":"æˆ‘ä»¬æ–¹æ³•1å°±æ˜¯è¿™ä¹ˆåšçš„ğŸ˜„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545380222,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":52370,"user_name":"æ»”æ»”","can_delete":false,"product_type":"c1","uid":1303342,"ip_address":"","ucode":"6968B5771AF79D","user_header":"https://static001.geekbang.org/account/avatar/00/13/e3/2e/77ad18f4.jpg","comment_is_top":false,"comment_ctime":1545370212,"is_pvip":false,"replies":[{"id":"19031","content":"ä¸ä¼šï¼Œupdateç›´æ¥æ‹¿X","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1545372084,"ip_address":"","comment_id":52370,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1545370212","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæƒ³è¯·æ•™ä¸€ä¸ªé—®é¢˜:åœ¨RRéš”ç¦»çº§åˆ«ä¸‹ï¼Œè¡¨aæœ‰id,nameä¸¤åˆ—ï¼Œåªæœ‰idä¸€ä¸ªèšç°‡ç´¢å¼•ï¼Œnameåˆ—æ²¡æœ‰ç´¢å¼•ï¼Œä¸¤è¾¹åŒæ—¶æ‰§è¡Œupdate a set name = &#39;aaa&#39; where id = 1,ä¼šä¸ä¼šå‡ºç°è¿™ç§æƒ…å†µï¼Œupdateæ˜¯å…ˆè·å¾—Sé”ï¼Œå†è·å¾—Xé”ï¼Œä¸¤ä¸ªå¹¶å‘äº‹åŠ¡ç¢°å·§åŒæ—¶è·å¾—äº†è¿™æ¡è®°å½•çš„Sé”ï¼ŒåŒæ—¶å»æ±‚Xé”ï¼Œå‘ç”Ÿæ­»é”å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":433849,"discussion_content":"ä¸ä¼šï¼Œupdateç›´æ¥æ‹¿X","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545372084,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":52362,"user_name":"undifined","can_delete":false,"product_type":"c1","uid":1068920,"ip_address":"","ucode":"449CB4CD2DC089","user_header":"https://static001.geekbang.org/account/avatar/00/10/4f/78/c3d8ecb0.jpg","comment_is_top":false,"comment_ctime":1545367855,"is_pvip":false,"replies":[{"id":"19033","content":"å¦‚æœä¿è¯æ²¡ç©ºæ´ï¼Œä¸ç”¨æ‰«æå…¨éƒ¨æ¥å¾—åˆ°Cï¼Œå¯ä»¥é€šè¿‡max() min()ç›¸å‡å¾—åˆ°CğŸ˜„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1545372288,"ip_address":"","comment_id":52362,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1545367855","product_id":100020801,"comment_content":"æˆ‘è®¾è®¡è¿™ä¸ªåŠŸèƒ½çš„æ€è·¯æ˜¯åœ¨ä¸šåŠ¡ä»£ç é‡Œå…ˆè¯»å–word è¡¨é‡Œçš„æœ€å¤§å’Œæœ€å° IDï¼Œç„¶åéšæœºç”Ÿæˆä¸‰ä¸ªæ•´æ•°å½“åšID è¿›è¡ŒæŸ¥è¯¢ï¼Œè¿™æ ·å°±å¯ä»¥é¿å…åœ¨æ•°æ®åº“æ’åºï¼Œåªéœ€è¦è®¿é—®ä¸¤æ¬¡æ•°æ®åº“ï¼›æˆ–è€…å†™ä¸€ä¸ªå­˜å‚¨è¿‡ç¨‹å®ç°è¿™ä¸ªé€»è¾‘ï¼Œåªéœ€è¦ä¸€æ¬¡è®¿é—®ï¼›è€å¸ˆæ‚¨è§‰å¾—è¿™æ ·åˆç†å—<br>-----------<br>æ˜¯ä¸æ˜¯å°±æ˜¯æˆ‘ä»¬çš„æ–¹æ³•ä¸€çš„æ€è·¯ï¼Ÿ<br>-----------<br>æ˜¯åŒæ ·çš„æ€è·¯<br>è¡¥å……ä¸€ä¸‹å°±æ˜¯ åœ¨ä¸šåŠ¡ä»£ç ä¸­åšå…ˆæ‰«ææ€»è¡Œæ•°Cï¼Œæ ¹æ® C ç”Ÿæˆä¸‰ä¸ªéšæœºæ•°ä½œä¸ºä¸»é”®è¿›è¡ŒæŸ¥è¯¢ï¼Œæ‰«æè¡Œæ•°ä¸º C + 3ï¼›å½“ç„¶è¿™ç§æ–¹æ³•åº”è¯¥ä¿è¯ä¸»é”® ID æ²¡æœ‰ç©ºæ´","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":433845,"discussion_content":"å¦‚æœä¿è¯æ²¡ç©ºæ´ï¼Œä¸ç”¨æ‰«æå…¨éƒ¨æ¥å¾—åˆ°Cï¼Œå¯ä»¥é€šè¿‡max() min()ç›¸å‡å¾—åˆ°CğŸ˜„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545372288,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":52327,"user_name":"Victor","can_delete":false,"product_type":"c1","uid":1003903,"ip_address":"","ucode":"801413B2B5C7B5","user_header":"https://static001.geekbang.org/account/avatar/00/0f/51/7f/c74e3543.jpg","comment_is_top":false,"comment_ctime":1545362995,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1545362995","product_id":100020801,"comment_content":"ç®—æ³•3ä¸­ï¼ŒY1, Y2, Y3 è¿™ä¸‰ä¸ªç”Ÿæˆçš„éšæœºæ•°ï¼Œå‡å¦‚æœ‰é‡å¤çš„è¯ï¼Œä¼šä¸æ»¡è¶³ä¸šåŠ¡çš„è¦æ±‚ã€‚<br>æ‰€ä»¥è¿™é‡Œçš„å–ä¸‰æ¬¡SQLè¯­å¥çš„æ‹¼æ¥ï¼Œæœ€å¥½åšåœ¨ä¸šåŠ¡ç«¯ï¼Œæ¯æ¬¡å–å›çš„ç»“æœæ”¾åœ¨ set ä¸­ï¼ŒçŸ¥é“ä¸‰æ¡ä¸åŒçš„å•æ¬¡è®°å½•ã€‚","like_count":0},{"had_liked":false,"id":52309,"user_name":"rabbitlog","can_delete":false,"product_type":"c1","uid":1002916,"ip_address":"","ucode":"6771E633362807","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4d/a4/78ccca46.jpg","comment_is_top":false,"comment_ctime":1545360810,"is_pvip":false,"replies":[{"id":"19018","content":"è¿™ä¸¤ä¸ªéƒ½æ˜¯ä¸é”™çš„æ€è·¯<br><br>1çš„è¯åœ¨æ•°æ®é‡ä¸å¤§çš„æ—¶å€™æ•ˆæœè¿˜æ˜¯ä¸é”™çš„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1545364494,"ip_address":"","comment_id":52309,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1545360810","product_id":100020801,"comment_content":"æœ‰ä¸¤ä¸ªæ€è·¯ï¼š<br>1. æŠŠä¸»é”®id å…¨éƒ¨æŸ¥è¯¢å‡ºæ¥ï¼Œç„¶ååœ¨åº”ç”¨å±‚ç›´æ¥ rand å‡ºæ¥å¯¹åº”çš„ idï¼Œæœ€åç›´æ¥æŸ¥è¯¢å¯¹åº”çš„ id å°±å¥½ã€‚<br>2. å¯ä»¥æŠŠé—®é¢˜å¤„ç†ä¸€ä¸‹ï¼Œä¸è¿½æ±‚å®Œå¤‡çš„æ–¹æ¡ˆï¼Œæ¯”å¦‚ï¼Œ<br>C = count(*) from t<br>start = rand(1, C);<br>select id from t order by id asc limit  start, 100<br>ç„¶åä» 100 ä¸ªéšæœºé€‰æ‹© 3 ä¸ªã€‚ <br>è¿™æ˜¯ä¸€ä¸ªä¼ªéšæœºçš„ç®—æ³•ï¼Œä½†æ˜¯å¯¹äºåº”ç”¨æ¥è¯´å¯ä»¥æ»¡è¶³äº†ã€‚","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":433828,"discussion_content":"è¿™ä¸¤ä¸ªéƒ½æ˜¯ä¸é”™çš„æ€è·¯\n\n1çš„è¯åœ¨æ•°æ®é‡ä¸å¤§çš„æ—¶å€™æ•ˆæœè¿˜æ˜¯ä¸é”™çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545364494,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":52244,"user_name":"undifined","can_delete":false,"product_type":"c1","uid":1068920,"ip_address":"","ucode":"449CB4CD2DC089","user_header":"https://static001.geekbang.org/account/avatar/00/10/4f/78/c3d8ecb0.jpg","comment_is_top":false,"comment_ctime":1545354031,"is_pvip":false,"replies":[{"id":"19000","content":"ä¸æ˜¯ç®€å•è½¬ç§»ï¼Œåœ¨å®¢æˆ·ç«¯ä¸éœ€è¦æ²¡æ’åºï¼›<br>å—¯ï¼Œåé¢ä½ å‡ ä¸ªæè¿°éƒ½å¯¹<br>","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1545361631,"ip_address":"","comment_id":52244,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1545354031","product_id":100020801,"comment_content":"è€å¸ˆï¼Œä¸ŠèŠ‚è¯¾åé¢˜çš„ç­”æ¡ˆï¼Œä»æ“ä½œæ¥çœ‹å…¶å®æ˜¯æŠŠæ’åºçš„å‹åŠ›è½¬ç§»åˆ°äº†å®¢æˆ·ç«¯ï¼Œå¦‚æœç”¨æ•°æ®åº“æ’åºåè€Œç®€å•ï¼›å¦‚æœæˆ‘æŠŠç´¢å¼•æ”¹ä¸º name_cityï¼Œè¿™æ ·æ˜¯ä¸æ˜¯å¯ä»¥é¿å…æ’åºï¼Œä½†æ˜¯è¿™æ ·æœ‰å¯èƒ½ä¼šæ‰«ææ‰€æœ‰çš„æ•°æ®ï¼›å¦‚æœè€ƒè™‘æ’åºï¼Œé‚£ä¹ˆ city_name æ˜¯ä¸æ˜¯æ›´å¥½çš„é€‰æ‹©ï¼›å¦‚æœæœ‰å¾ˆå¤šä¸ªåŸå¸‚ä¸€èµ·æ’åºï¼Œé‚£ä¹ˆ name_city æ˜¯ä¸æ˜¯æ›´å¥½ä¸€äº›","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":433802,"discussion_content":"ä¸æ˜¯ç®€å•è½¬ç§»ï¼Œåœ¨å®¢æˆ·ç«¯ä¸éœ€è¦æ²¡æ’åºï¼›\nå—¯ï¼Œåé¢ä½ å‡ ä¸ªæè¿°éƒ½å¯¹\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545361631,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":52236,"user_name":"å°æ–°","can_delete":false,"product_type":"c1","uid":1246916,"ip_address":"","ucode":"A5A6F142D7BC44","user_header":"https://static001.geekbang.org/account/avatar/00/13/06/c4/11c9aa38.jpg","comment_is_top":false,"comment_ctime":1545353757,"is_pvip":false,"replies":[{"id":"19004","content":"å—¯ï¼Œè€ƒè™‘ä¸‹è¿™ä¸ªè¡¨æš´æ¶¨çš„æƒ…å†µï¼ˆå½“ç„¶å•è¯æ˜¯æ¶¨ä¸åˆ°å“ªå»ï¼Œå¦‚æœæ˜¯åˆ«çš„ä¸šåŠ¡å°±è¦å°å¿ƒï¼‰","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1545361752,"ip_address":"","comment_id":52236,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1545353757","product_id":100020801,"comment_content":"æˆ‘è§‰å¾—è¿™ç§éœ€æ±‚ç”¨rediså®ç°æ¯”è¾ƒå¥½å§(ä¸ªäººç†è§£)ï¼Œæˆ‘æŸ¥è¯¢å‡ºè¿™ä¸ªç”¨æˆ·çš„å•è¯æ”¾å…¥redisä¸­ï¼Œç„¶åæ¯æ¬¡å¢åŠ æˆ–å‡å°‘å°±æ›´æ–°redisï¼Œç„¶åç›´æ¥å†redisä¸­éšæœºè¿”å›è¿™ä¸‰ä¸ªå•è¯ï¼Œæˆ‘è§‰å¾—è¿™æ ·ä¹Ÿå¯ä»¥","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":433797,"discussion_content":"å—¯ï¼Œè€ƒè™‘ä¸‹è¿™ä¸ªè¡¨æš´æ¶¨çš„æƒ…å†µï¼ˆå½“ç„¶å•è¯æ˜¯æ¶¨ä¸åˆ°å“ªå»ï¼Œå¦‚æœæ˜¯åˆ«çš„ä¸šåŠ¡å°±è¦å°å¿ƒï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545361752,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":52221,"user_name":"undifined","can_delete":false,"product_type":"c1","uid":1068920,"ip_address":"","ucode":"449CB4CD2DC089","user_header":"https://static001.geekbang.org/account/avatar/00/10/4f/78/c3d8ecb0.jpg","comment_is_top":false,"comment_ctime":1545352989,"is_pvip":false,"replies":[{"id":"19005","content":"æ˜¯ä¸æ˜¯å°±æ˜¯æˆ‘ä»¬çš„æ–¹æ³•ä¸€çš„æ€è·¯ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1545361790,"ip_address":"","comment_id":52221,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1545352989","product_id":100020801,"comment_content":"æˆ‘è®¾è®¡è¿™ä¸ªåŠŸèƒ½çš„æ€è·¯æ˜¯åœ¨ä¸šåŠ¡ä»£ç é‡Œå…ˆè¯»å–word è¡¨é‡Œçš„æœ€å¤§å’Œæœ€å° IDï¼Œç„¶åéšæœºç”Ÿæˆä¸‰ä¸ªæ•´æ•°å½“åšID è¿›è¡ŒæŸ¥è¯¢ï¼Œè¿™æ ·å°±å¯ä»¥é¿å…åœ¨æ•°æ®åº“æ’åºï¼Œåªéœ€è¦è®¿é—®ä¸¤æ¬¡æ•°æ®åº“ï¼›æˆ–è€…å†™ä¸€ä¸ªå­˜å‚¨è¿‡ç¨‹å®ç°è¿™ä¸ªé€»è¾‘ï¼Œåªéœ€è¦ä¸€æ¬¡è®¿é—®ï¼›è€å¸ˆæ‚¨è§‰å¾—è¿™æ ·åˆç†å—","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":433789,"discussion_content":"æ˜¯ä¸æ˜¯å°±æ˜¯æˆ‘ä»¬çš„æ–¹æ³•ä¸€çš„æ€è·¯ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545361790,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}