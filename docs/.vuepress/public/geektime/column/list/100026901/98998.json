{"id":98998,"title":"12 | é¢å‘å¯¹è±¡ï¼ˆä¸‹ï¼‰ï¼šå¦‚ä½•å®ç°ä¸€ä¸ªæœç´¢å¼•æ“ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯æ™¯éœ„ã€‚è¿™èŠ‚è¯¾ï¼Œæˆ‘ä»¬æ¥å®ç°ä¸€ä¸ª Python çš„æœç´¢å¼•æ“ï¼ˆsearch engineï¼‰ã€‚</p><p>æ‰¿æ¥ä¸Šæ–‡ï¼Œä»Šå¤©è¿™èŠ‚è¯¾çš„ä¸»è¦ç›®çš„æ˜¯ï¼Œå¸¦ä½ æ¨¡æ‹Ÿæ•æ·å¼€å‘è¿‡ç¨‹ä¸­çš„è¿­ä»£å¼€å‘æµç¨‹ï¼Œå·©å›ºé¢å‘å¯¹è±¡çš„ç¨‹åºè®¾è®¡æ€æƒ³ã€‚</p><p>æˆ‘ä»¬å°†ä»æœ€ç®€å•æœ€ç›´æ¥çš„æœç´¢åšèµ·ï¼Œä¸€æ­¥æ­¥ä¼˜åŒ–ï¼Œè¿™å…¶ä¸­ï¼Œæˆ‘ä¸ä¼šæ¶‰åŠåˆ°è¿‡å¤šçš„è¶…çº²ç®—æ³•ï¼Œä½†ä¸å¯é¿å…ä¼šä»‹ç»ä¸€äº›ç°ä»£æœç´¢å¼•æ“ä¸­çš„åŸºç¡€æ¦‚å¿µï¼Œä¾‹å¦‚è¯­æ–™ï¼ˆcorpusï¼‰ã€å€’åºç´¢å¼•ï¼ˆinverted indexï¼‰ç­‰ã€‚</p><p>å¦‚æœä½ å¯¹è¿™æ–¹é¢æœ¬èº«æœ‰äº›äº†è§£ï¼Œè‡ªç„¶å¯ä»¥è½»æ¾ç†è§£ï¼›å³ä½¿ä½ ä¹‹å‰å®Œå…¨æ²¡æ¥è§¦è¿‡æœç´¢å¼•æ“ï¼Œä¹Ÿä¸ç”¨è¿‡åˆ†æ‹…å¿ƒï¼Œæˆ‘ä¼šåŠ›æ±‚ç®€æ´æ¸…æ™°ï¼Œé™ä½å­¦ä¹ éš¾åº¦ã€‚åŒæ—¶ï¼Œæˆ‘å¸Œæœ›ä½ æŠŠæ›´å¤šçš„ç²¾åŠ›æ”¾åœ¨é¢å‘å¯¹è±¡çš„å»ºæ¨¡æ€è·¯ä¸Šã€‚</p><h2>â€œé«˜å¤§ä¸Šâ€çš„æœç´¢å¼•æ“</h2><p>å¼•æ“ä¸€è¯å°¤å¦‚å…¶åï¼Œå¬èµ·æ¥éå¸¸é…·ç‚«ã€‚æœç´¢å¼•æ“ï¼Œåˆ™æ˜¯æ–°ä¸–çºªåˆæœŸäº’è”ç½‘å‘å±•æœ€é‡è¦çš„å…¥å£ä¹‹ä¸€ï¼Œä¾æ‰˜æœç´¢å¼•æ“ï¼Œä¸­å›½å’Œç¾å›½åˆ†åˆ«è¯ç”Ÿäº†ç™¾åº¦ã€è°·æ­Œç­‰å·¨å‹å…¬å¸ã€‚</p><p>æœç´¢å¼•æ“æå¤§åœ°æ–¹ä¾¿äº†äº’è”ç½‘ç”Ÿæ´»ï¼Œä¹Ÿæˆä¸ºä¸Šç½‘å¿…ä¸å¯å°‘çš„åˆšéœ€å·¥å…·ã€‚ä¾æ‰˜æœç´¢å¼•æ“å‘å±•èµ·æ¥çš„äº’è”ç½‘å¹¿å‘Šï¼Œåˆ™æˆäº†ç¡…è°·å’Œä¸­å›½å·¨å¤´çš„æ ¸å¿ƒå•†ä¸šæ¨¡å¼ï¼›è€Œæœç´¢æœ¬èº«ï¼Œä¹Ÿåœ¨æŒç»­è¿›æ­¥ç€ï¼Œ Facebook å’Œå¾®ä¿¡ä¹Ÿä¸€ç›´æœ‰æ„å‘åœ¨è‡ªå®¶ç¤¾äº¤äº§å“æ¶è®¾æœç´¢å¹³å°ã€‚</p><p>å…³äºæœç´¢å¼•æ“çš„ä»·å€¼æˆ‘ä¸å¿…å¤šè¯´äº†ï¼Œä»Šå¤©æˆ‘ä»¬ä¸»è¦æ¥çœ‹ä¸€ä¸‹æœç´¢å¼•æ“çš„æ ¸å¿ƒæ„æˆã€‚</p><!-- [[[read_end]]] --><p>å¬Googleçš„æœ‹å‹è¯´ï¼Œä»–ä»¬å…¥èŒåŸ¹è®­çš„æ—¶å€™ï¼Œæœ‰ä¸€é—¨è¯¾ç¨‹å«åš The life of a queryï¼Œå†…å®¹æ˜¯è®²ç”¨æˆ·åœ¨æµè§ˆå™¨ä¸­é”®å…¥ä¸€ä¸²æ–‡å­—ï¼ŒæŒ‰ä¸‹å›è½¦åå‘ç”Ÿäº†ä»€ä¹ˆã€‚ä»Šå¤©æˆ‘ä¹ŸæŒ‰ç…§è¿™ä¸ªæ€è·¯ï¼Œæ¥ç®€å•ä»‹ç»ä¸‹ã€‚</p><p>æˆ‘ä»¬çŸ¥é“ï¼Œ<strong>ä¸€ä¸ªæœç´¢å¼•æ“ç”±æœç´¢å™¨ã€ç´¢å¼•å™¨ã€æ£€ç´¢å™¨å’Œç”¨æˆ·æ¥å£å››ä¸ªéƒ¨åˆ†ç»„æˆ</strong>ã€‚</p><p>æœç´¢å™¨ï¼Œé€šä¿—æ¥è®²å°±æ˜¯æˆ‘ä»¬å¸¸æåˆ°çš„çˆ¬è™«ï¼ˆscrawlerï¼‰ï¼Œå®ƒèƒ½åœ¨äº’è”ç½‘ä¸Šå¤§é‡çˆ¬å–å„ç±»ç½‘ç«™çš„å†…å®¹ï¼Œé€ç»™ç´¢å¼•å™¨ã€‚ç´¢å¼•å™¨æ‹¿åˆ°ç½‘é¡µå’Œå†…å®¹åï¼Œä¼šå¯¹å†…å®¹è¿›è¡Œå¤„ç†ï¼Œå½¢æˆç´¢å¼•ï¼ˆindexï¼‰ï¼Œå­˜å‚¨äºå†…éƒ¨çš„æ•°æ®åº“ç­‰å¾…æ£€ç´¢ã€‚</p><p>æœ€åçš„ç”¨æˆ·æ¥å£å¾ˆå¥½ç†è§£ï¼Œæ˜¯æŒ‡ç½‘é¡µå’Œ App å‰ç«¯ç•Œé¢ï¼Œä¾‹å¦‚ç™¾åº¦å’Œè°·æ­Œçš„æœç´¢é¡µé¢ã€‚ç”¨æˆ·é€šè¿‡ç”¨æˆ·æ¥å£ï¼Œå‘æœç´¢å¼•æ“å‘å‡ºè¯¢é—®ï¼ˆqueryï¼‰ï¼Œè¯¢é—®è§£æåé€è¾¾æ£€ç´¢å™¨ï¼›æ£€ç´¢å™¨é«˜æ•ˆæ£€ç´¢åï¼Œå†å°†ç»“æœè¿”å›ç»™ç”¨æˆ·ã€‚</p><p>çˆ¬è™«çŸ¥è¯†ä¸æ˜¯æˆ‘ä»¬ä»Šå¤©å­¦ä¹ çš„é‡ç‚¹ï¼Œè¿™é‡Œæˆ‘å°±ä¸åšæ·±å…¥ä»‹ç»äº†ã€‚æˆ‘ä»¬å‡è®¾æœç´¢æ ·æœ¬å­˜åœ¨äºæœ¬åœ°ç£ç›˜ä¸Šã€‚</p><p>ä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘ä»¬åªæä¾›äº”ä¸ªæ–‡ä»¶çš„æ£€ç´¢ï¼Œå†…å®¹æˆ‘æ”¾åœ¨äº†ä¸‹é¢è¿™æ®µä»£ç ä¸­ï¼š</p><pre><code># 1.txt\nI have a dream that my four little children will one day live in a nation where they will not be judged by the color of their skin but by the content of their character. I have a dream today.\n\n# 2.txt\nI have a dream that one day down in Alabama, with its vicious racists, . . . one day right there in Alabama little black boys and black girls will be able to join hands with little white boys and white girls as sisters and brothers. I have a dream today.\n\n# 3.txt\nI have a dream that one day every valley shall be exalted, every hill and mountain shall be made low, the rough places will be made plain, and the crooked places will be made straight, and the glory of the Lord shall be revealed, and all flesh shall see it together.\n\n# 4.txt\nThis is our hope. . . With this faith we will be able to hew out of the mountain of despair a stone of hope. With this faith we will be able to transform the jangling discords of our nation into a beautiful symphony of brotherhood. With this faith we will be able to work together, to pray together, to struggle together, to go to jail together, to stand up for freedom together, knowing that we will be free one day. . . .\n\n# 5.txt\nAnd when this happens, and when we allow freedom ring, when we let it ring from every village and every hamlet, from every state and every city, we will be able to speed up that day when all of God's children, black men and white men, Jews and Gentiles, Protestants and Catholics, will be able to join hands and sing in the words of the old Negro spiritual: &quot;Free at last! Free at last! Thank God Almighty, we are free at last!&quot;\n</code></pre><p>æˆ‘ä»¬å…ˆæ¥å®šä¹‰ SearchEngineBase åŸºç±»ã€‚è¿™é‡Œæˆ‘å…ˆç»™å‡ºäº†å…·ä½“çš„ä»£ç ï¼Œä½ ä¸å¿…ç€æ€¥æ“ä½œï¼Œè¿˜æ˜¯é‚£å¥è¯ï¼Œè·Ÿç€èŠ‚å¥æ…¢æ…¢å­¦ï¼Œå†éš¾çš„ä¸œè¥¿ä¹Ÿå¯ä»¥å•ƒå¾—ä¸‹æ¥ã€‚</p><pre><code>class SearchEngineBase(object):\n    def __init__(self):\n        pass\n\n    def add_corpus(self, file_path):\n        with open(file_path, 'r') as fin:\n            text = fin.read()\n        self.process_corpus(file_path, text)\n\n    def process_corpus(self, id, text):\n        raise Exception('process_corpus not implemented.')\n\n    def search(self, query):\n        raise Exception('search not implemented.')\n\ndef main(search_engine):\n    for file_path in ['1.txt', '2.txt', '3.txt', '4.txt', '5.txt']:\n        search_engine.add_corpus(file_path)\n\n    while True:\n        query = input()\n        results = search_engine.search(query)\n        print('found {} result(s):'.format(len(results)))\n        for result in results:\n            print(result)\n</code></pre><p>SearchEngineBase å¯ä»¥è¢«ç»§æ‰¿ï¼Œç»§æ‰¿çš„ç±»åˆ†åˆ«ä»£è¡¨ä¸åŒçš„ç®—æ³•å¼•æ“ã€‚æ¯ä¸€ä¸ªå¼•æ“éƒ½åº”è¯¥å®ç° process_corpus()å’Œsearch()ä¸¤ä¸ªå‡½æ•°ï¼Œå¯¹åº”æˆ‘ä»¬åˆšåˆšæåˆ°çš„ç´¢å¼•å™¨å’Œæ£€ç´¢å™¨ã€‚main()å‡½æ•°æä¾›æœç´¢å™¨å’Œç”¨æˆ·æ¥å£ï¼Œäºæ˜¯ä¸€ä¸ªç®€å•çš„åŒ…è£…ç•Œé¢å°±æœ‰äº†ã€‚</p><p>å…·ä½“æ¥çœ‹è¿™æ®µä»£ç ï¼Œå…¶ä¸­ï¼Œ</p><ul>\n<li>add_corpus() å‡½æ•°è´Ÿè´£è¯»å–æ–‡ä»¶å†…å®¹ï¼Œå°†æ–‡ä»¶è·¯å¾„ä½œä¸º IDï¼Œè¿åŒå†…å®¹ä¸€èµ·é€åˆ° process_corpus ä¸­ã€‚</li>\n<li>process_corpus  éœ€è¦å¯¹å†…å®¹è¿›è¡Œå¤„ç†ï¼Œç„¶åæ–‡ä»¶è·¯å¾„ä¸º ID  ï¼Œå°†å¤„ç†åçš„å†…å®¹å­˜ä¸‹æ¥ã€‚å¤„ç†åçš„å†…å®¹ï¼Œå°±å«åšç´¢å¼•ï¼ˆindexï¼‰ã€‚</li>\n<li>search  åˆ™ç»™å®šä¸€ä¸ªè¯¢é—®ï¼Œå¤„ç†è¯¢é—®ï¼Œå†é€šè¿‡ç´¢å¼•æ£€ç´¢ï¼Œç„¶åè¿”å›ã€‚</li>\n</ul><p>å¥½ï¼Œç†è§£è¿™äº›æ¦‚å¿µåï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å®ç°ä¸€ä¸ªæœ€åŸºæœ¬çš„å¯ä»¥å·¥ä½œçš„æœç´¢å¼•æ“ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><pre><code>class SimpleEngine(SearchEngineBase):\n    def __init__(self):\n        super(SimpleEngine, self).__init__()\n        self.__id_to_texts = {}\n\n    def process_corpus(self, id, text):\n        self.__id_to_texts[id] = text\n\n    def search(self, query):\n        results = []\n        for id, text in self.__id_to_texts.items():\n            if query in text:\n                results.append(id)\n        return results\n\nsearch_engine = SimpleEngine()\nmain(search_engine)\n\n\n########## è¾“å‡º ##########\n\n\nsimple\nfound 0 result(s):\nlittle\nfound 2 result(s):\n1.txt\n2.txt\n</code></pre><p>ä½ å¯èƒ½å¾ˆæƒŠè®¶ï¼Œåªéœ€è¦çŸ­çŸ­åæ¥è¡Œä»£ç å±…ç„¶å°±å¯ä»¥äº†å—ï¼Ÿ</p><p>æ²¡é”™ï¼Œæ­£æ˜¯å¦‚æ­¤ï¼Œè¿™æ®µä»£ç æˆ‘ä»¬æ‹†å¼€æ¥çœ‹ä¸€ä¸‹ï¼š</p><p>SimpleEngine å®ç°äº†ä¸€ä¸ªç»§æ‰¿ SearchEngineBase çš„å­ç±»ï¼Œç»§æ‰¿å¹¶å®ç°äº† process_corpus å’Œ search æ¥å£ï¼ŒåŒæ—¶ï¼Œä¹Ÿé¡ºæ‰‹ç»§æ‰¿äº† add_corpus å‡½æ•°ï¼ˆå½“ç„¶ä½ æƒ³é‡å†™ä¹Ÿæ˜¯å¯è¡Œçš„ï¼‰ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥åœ¨ main() å‡½æ•°ä¸­ç›´æ¥è°ƒå–ã€‚</p><p>åœ¨æˆ‘ä»¬æ–°çš„æ„é€ å‡½æ•°ä¸­ï¼Œ<code>self.__id_to_texts = {}</code> åˆå§‹åŒ–äº†è‡ªå·±çš„ç§æœ‰å˜é‡ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªç”¨æ¥å­˜å‚¨æ–‡ä»¶ååˆ°æ–‡ä»¶å†…å®¹çš„å­—å…¸ã€‚</p><p>process_corpus() å‡½æ•°åˆ™éå¸¸ç›´ç™½åœ°å°†æ–‡ä»¶å†…å®¹æ’å…¥åˆ°å­—å…¸ä¸­ã€‚è¿™é‡Œæ³¨æ„ï¼ŒID éœ€è¦æ˜¯å”¯ä¸€çš„ï¼Œä¸ç„¶ç›¸åŒIDçš„æ–°å†…å®¹ä¼šè¦†ç›–æ‰æ—§çš„å†…å®¹ã€‚</p><p>search ç›´æ¥æšä¸¾å­—å…¸ï¼Œä»ä¸­æ‰¾åˆ°è¦æœç´¢çš„å­—ç¬¦ä¸²ã€‚å¦‚æœèƒ½å¤Ÿæ‰¾åˆ°ï¼Œåˆ™å°† ID æ”¾åˆ°ç»“æœåˆ—è¡¨ä¸­ï¼Œæœ€åè¿”å›ã€‚</p><p>ä½ çœ‹ï¼Œæ˜¯ä¸æ˜¯éå¸¸ç®€å•å‘¢ï¼Ÿè¿™ä¸ªè¿‡ç¨‹å§‹ç»ˆè´¯ç©¿ç€é¢å‘å¯¹è±¡çš„æ€æƒ³ï¼Œè¿™é‡Œæˆ‘ä¸ºä½ æ¢³ç†æˆäº†å‡ ä¸ªé—®é¢˜ï¼Œä½ å¯ä»¥è‡ªå·±æ€è€ƒä¸€ä¸‹ï¼Œå½“æˆæ˜¯ä¸€ä¸ªå°å¤ä¹ ã€‚</p><ul>\n<li>ç°åœ¨ä½ å¯¹çˆ¶ç±»å­ç±»çš„æ„é€ å‡½æ•°è°ƒç”¨é¡ºåºå’Œæ–¹æ³•åº”è¯¥æ›´æ¸…æ¥šäº†å§ï¼Ÿ</li>\n<li>ç»§æ‰¿çš„æ—¶å€™ï¼Œå‡½æ•°æ˜¯å¦‚ä½•é‡å†™çš„ï¼Ÿ</li>\n<li>åŸºç±»æ˜¯å¦‚ä½•å……å½“æ¥å£ä½œç”¨çš„ï¼ˆä½ å¯ä»¥è‡ªè¡Œåˆ æ‰å­ç±»ä¸­çš„é‡å†™å‡½æ•°ï¼ŒæŠ‘æˆ–æ˜¯ä¿®æ”¹ä¸€ä¸‹å‡½æ•°çš„å‚æ•°ï¼Œçœ‹ä¸€ä¸‹ä¼šæŠ¥ä»€ä¹ˆé”™ï¼‰ï¼Ÿ</li>\n<li>æ–¹æ³•å’Œå˜é‡ä¹‹é—´åˆå¦‚ä½•è¡”æ¥èµ·æ¥çš„å‘¢ï¼Ÿ</li>\n</ul><p>å¥½çš„ï¼Œæˆ‘ä»¬é‡æ–°å›åˆ°æœç´¢å¼•æ“è¿™ä¸ªè¯é¢˜ã€‚</p><p>ç›¸ä¿¡ä½ ä¹Ÿèƒ½çœ‹å¾—å‡ºæ¥ï¼Œè¿™ç§å®ç°æ–¹å¼ç®€å•ï¼Œä½†æ˜¾ç„¶æ˜¯ä¸€ç§å¾ˆä½æ•ˆçš„æ–¹å¼ï¼šæ¯æ¬¡ç´¢å¼•åéœ€è¦å ç”¨å¤§é‡ç©ºé—´ï¼Œå› ä¸ºç´¢å¼•å‡½æ•°å¹¶æ²¡æœ‰åšä»»ä½•äº‹æƒ…ï¼›æ¯æ¬¡æ£€ç´¢éœ€è¦å ç”¨å¤§é‡æ—¶é—´ï¼Œå› ä¸ºæ‰€æœ‰ç´¢å¼•åº“çš„æ–‡ä»¶éƒ½è¦è¢«é‡æ–°æœç´¢ä¸€éã€‚å¦‚æœæŠŠè¯­æ–™çš„ä¿¡æ¯é‡è§†ä¸º nï¼Œé‚£ä¹ˆè¿™é‡Œçš„æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦éƒ½åº”è¯¥æ˜¯ O(n) çº§åˆ«çš„ã€‚</p><p>è€Œä¸”ï¼Œè¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼šè¿™é‡Œçš„ query åªèƒ½æ˜¯ä¸€ä¸ªè¯ï¼Œæˆ–è€…æ˜¯è¿èµ·æ¥çš„å‡ ä¸ªè¯ã€‚å¦‚æœä½ æƒ³è¦æœç´¢å¤šä¸ªè¯ï¼Œå®ƒä»¬åˆåˆ†æ•£åœ¨æ–‡ç« çš„ä¸åŒä½ç½®ï¼Œæˆ‘ä»¬çš„ç®€å•å¼•æ“å°±æ— èƒ½ä¸ºåŠ›äº†ã€‚</p><p>è¿™æ—¶åº”è¯¥æ€ä¹ˆä¼˜åŒ–å‘¢ï¼Ÿ</p><p>æœ€ç›´æ¥çš„ä¸€ä¸ªæƒ³æ³•ï¼Œå°±æ˜¯æŠŠè¯­æ–™åˆ†è¯ï¼Œçœ‹æˆä¸€ä¸ªä¸ªçš„è¯æ±‡ï¼Œè¿™æ ·å°±åªéœ€è¦å¯¹æ¯ç¯‡æ–‡ç« å­˜å‚¨å®ƒæ‰€æœ‰è¯æ±‡çš„ set å³å¯ã€‚æ ¹æ®é½å¤«å®šå¾‹ï¼ˆZipfâ€™s lawï¼Œ<a href=\"https://en.wikipedia.org/wiki/Zipf%27s_law\">https://en.wikipedia.org/wiki/Zipf%27s_law</a>ï¼‰ï¼Œåœ¨è‡ªç„¶è¯­è¨€çš„è¯­æ–™åº“é‡Œï¼Œä¸€ä¸ªå•è¯å‡ºç°çš„é¢‘ç‡ä¸å®ƒåœ¨é¢‘ç‡è¡¨é‡Œçš„æ’åæˆåæ¯”ï¼Œå‘ˆç°å¹‚å¾‹åˆ†å¸ƒã€‚å› æ­¤ï¼Œè¯­æ–™åˆ†è¯çš„åšæ³•å¯ä»¥å¤§å¤§æå‡æˆ‘ä»¬çš„å­˜å‚¨å’Œæœç´¢æ•ˆç‡ã€‚</p><p>é‚£å…·ä½“è¯¥å¦‚ä½•å®ç°å‘¢ï¼Ÿ</p><h2>Bag of Words å’Œ Inverted Index</h2><p>æˆ‘ä»¬å…ˆæ¥å®ç°ä¸€ä¸ªåå« Bag of Words çš„æœç´¢æ¨¡å‹ã€‚è¯·çœ‹ä¸‹é¢çš„ä»£ç ï¼š</p><pre><code>import re\n\nclass BOWEngine(SearchEngineBase):\n    def __init__(self):\n        super(BOWEngine, self).__init__()\n        self.__id_to_words = {}\n\n    def process_corpus(self, id, text):\n        self.__id_to_words[id] = self.parse_text_to_words(text)\n\n    def search(self, query):\n        query_words = self.parse_text_to_words(query)\n        results = []\n        for id, words in self.__id_to_words.items():\n            if self.query_match(query_words, words):\n                results.append(id)\n        return results\n    \n    @staticmethod\n    def query_match(query_words, words):\n        for query_word in query_words:\n            if query_word not in words:\n                return False\n        return True\n\n    @staticmethod\n    def parse_text_to_words(text):\n        # ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼å»é™¤æ ‡ç‚¹ç¬¦å·å’Œæ¢è¡Œç¬¦\n        text = re.sub(r'[^\\w ]', ' ', text)\n        # è½¬ä¸ºå°å†™\n        text = text.lower()\n        # ç”Ÿæˆæ‰€æœ‰å•è¯çš„åˆ—è¡¨\n        word_list = text.split(' ')\n        # å»é™¤ç©ºç™½å•è¯\n        word_list = filter(None, word_list)\n        # è¿”å›å•è¯çš„ set\n        return set(word_list)\n\nsearch_engine = BOWEngine()\nmain(search_engine)\n\n\n########## è¾“å‡º ##########\n\n\ni have a dream\nfound 3 result(s):\n1.txt\n2.txt\n3.txt\nfreedom children\nfound 1 result(s):\n5.txt\n</code></pre><p>ä½ åº”è¯¥å‘ç°ï¼Œä»£ç å¼€å§‹å˜å¾—ç¨å¾®å¤æ‚äº›äº†ã€‚</p><p>è¿™é‡Œæˆ‘ä»¬å…ˆæ¥ç†è§£ä¸€ä¸ªæ¦‚å¿µï¼ŒBOW Modelï¼Œå³ <a href=\"https://en.wikipedia.org/wiki/Bag-of-words_model\">Bag of Words Model</a>ï¼Œä¸­æ–‡å«åšè¯è¢‹æ¨¡å‹ã€‚è¿™æ˜¯ NLP é¢†åŸŸæœ€å¸¸è§æœ€ç®€å•çš„æ¨¡å‹ä¹‹ä¸€ã€‚</p><p>å‡è®¾ä¸€ä¸ªæ–‡æœ¬ï¼Œä¸è€ƒè™‘è¯­æ³•ã€å¥æ³•ã€æ®µè½ï¼Œä¹Ÿä¸è€ƒè™‘è¯æ±‡å‡ºç°çš„é¡ºåºï¼Œåªå°†è¿™ä¸ªæ–‡æœ¬çœ‹æˆè¿™äº›è¯æ±‡çš„é›†åˆã€‚äºæ˜¯ç›¸åº”çš„ï¼Œæˆ‘ä»¬æŠŠ id_to_texts æ›¿æ¢æˆ id_to_wordsï¼Œè¿™æ ·å°±åªéœ€è¦å­˜è¿™äº›å•è¯ï¼Œè€Œä¸æ˜¯å…¨éƒ¨æ–‡ç« ï¼Œä¹Ÿä¸éœ€è¦è€ƒè™‘é¡ºåºã€‚</p><p>å…¶ä¸­ï¼Œprocess_corpus() å‡½æ•°è°ƒç”¨ç±»é™æ€å‡½æ•° parse_text_to_wordsï¼Œå°†æ–‡ç« æ‰“ç¢å½¢æˆè¯è¢‹ï¼Œæ”¾å…¥ set ä¹‹åå†æ”¾åˆ°å­—å…¸ä¸­ã€‚</p><p>search() å‡½æ•°åˆ™ç¨å¾®å¤æ‚ä¸€äº›ã€‚è¿™é‡Œæˆ‘ä»¬å‡è®¾ï¼Œæƒ³å¾—åˆ°çš„ç»“æœï¼Œæ˜¯æ‰€æœ‰çš„æœç´¢å…³é”®è¯éƒ½è¦å‡ºç°åœ¨åŒä¸€ç¯‡æ–‡ç« ä¸­ã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬éœ€è¦åŒæ ·æ‰“ç¢ query å¾—åˆ°ä¸€ä¸ª setï¼Œç„¶åæŠŠ set ä¸­çš„æ¯ä¸€ä¸ªè¯ï¼Œå’Œæˆ‘ä»¬çš„ç´¢å¼•ä¸­æ¯ä¸€ç¯‡æ–‡ç« è¿›è¡Œæ ¸å¯¹ï¼Œçœ‹ä¸€ä¸‹è¦æ‰¾çš„è¯æ˜¯å¦åœ¨å…¶ä¸­ã€‚è€Œè¿™ä¸ªè¿‡ç¨‹ç”±é™æ€å‡½æ•° query_match è´Ÿè´£ã€‚</p><p>ä½ å¯ä»¥å›é¡¾ä¸€ä¸‹ä¸ŠèŠ‚è¯¾å­¦åˆ°çš„é™æ€å‡½æ•°ï¼Œæˆ‘ä»¬çœ‹åˆ°ï¼Œè¿™ä¸¤ä¸ªå‡½æ•°éƒ½æ˜¯æ²¡æœ‰çŠ¶æ€çš„ï¼Œå®ƒä»¬ä¸æ¶‰åŠå¯¹è±¡çš„ç§æœ‰å˜é‡ï¼ˆæ²¡æœ‰ self ä½œä¸ºå‚æ•°ï¼‰ï¼Œç›¸åŒçš„è¾“å…¥èƒ½å¤Ÿå¾—åˆ°å®Œå…¨ç›¸åŒçš„è¾“å‡ºç»“æœã€‚å› æ­¤è®¾ç½®ä¸ºé™æ€ï¼Œå¯ä»¥æ–¹ä¾¿å…¶ä»–çš„ç±»æ¥ä½¿ç”¨ã€‚</p><p>å¯æ˜¯ï¼Œå³ä½¿è¿™æ ·åšï¼Œæ¯æ¬¡æŸ¥è¯¢æ—¶ä¾ç„¶éœ€è¦éå†æ‰€æœ‰IDï¼Œè™½ç„¶æ¯”èµ· Simple æ¨¡å‹å·²ç»èŠ‚çº¦äº†å¤§é‡æ—¶é—´ï¼Œä½†æ˜¯äº’è”ç½‘ä¸Šæœ‰ä¸Šäº¿ä¸ªé¡µé¢ï¼Œæ¯æ¬¡éƒ½å…¨éƒ¨éå†çš„ä»£ä»·è¿˜æ˜¯å¤ªå¤§äº†ã€‚åˆ°è¿™æ—¶ï¼Œåˆè¯¥å¦‚ä½•ä¼˜åŒ–å‘¢ï¼Ÿ</p><p>ä½ å¯èƒ½æƒ³åˆ°äº†ï¼Œæˆ‘ä»¬æ¯æ¬¡æŸ¥è¯¢çš„ query çš„å•è¯é‡ä¸ä¼šå¾ˆå¤šï¼Œä¸€èˆ¬ä¹Ÿå°±å‡ ä¸ªã€æœ€å¤šåå‡ ä¸ªçš„æ ·å­ã€‚é‚£å¯ä¸å¯ä»¥ä»è¿™é‡Œä¸‹æ‰‹å‘¢ï¼Ÿ</p><p>å†æœ‰ï¼Œè¯è¢‹æ¨¡å‹å¹¶ä¸è€ƒè™‘å•è¯é—´çš„é¡ºåºï¼Œä½†æœ‰äº›äººå¸Œæœ›å•è¯æŒ‰é¡ºåºå‡ºç°ï¼Œæˆ–è€…å¸Œæœ›æœç´¢çš„å•è¯åœ¨æ–‡ä¸­ç¦»å¾—è¿‘ä¸€äº›ï¼Œè¿™ç§æƒ…å†µä¸‹è¯è¢‹æ¨¡å‹ç°ä»»å°±æ— èƒ½ä¸ºåŠ›äº†ã€‚</p><p>é’ˆå¯¹è¿™ä¸¤ç‚¹ï¼Œæˆ‘ä»¬è¿˜èƒ½åšå¾—æ›´å¥½å—ï¼Ÿæ˜¾ç„¶æ˜¯å¯ä»¥çš„ï¼Œè¯·çœ‹æ¥ä¸‹æ¥çš„è¿™æ®µä»£ç ã€‚</p><pre><code>import re\n\nclass BOWInvertedIndexEngine(SearchEngineBase):\n    def __init__(self):\n        super(BOWInvertedIndexEngine, self).__init__()\n        self.inverted_index = {}\n\n    def process_corpus(self, id, text):\n        words = self.parse_text_to_words(text)\n        for word in words:\n            if word not in self.inverted_index:\n                self.inverted_index[word] = []\n            self.inverted_index[word].append(id)\n\n    def search(self, query):\n        query_words = list(self.parse_text_to_words(query))\n        query_words_index = list()\n        for query_word in query_words:\n            query_words_index.append(0)\n        \n        # å¦‚æœæŸä¸€ä¸ªæŸ¥è¯¢å•è¯çš„å€’åºç´¢å¼•ä¸ºç©ºï¼Œæˆ‘ä»¬å°±ç«‹åˆ»è¿”å›\n        for query_word in query_words:\n            if query_word not in self.inverted_index:\n                return []\n        \n        result = []\n        while True:\n            \n            # é¦–å…ˆï¼Œè·å¾—å½“å‰çŠ¶æ€ä¸‹æ‰€æœ‰å€’åºç´¢å¼•çš„ index\n            current_ids = []\n            \n            for idx, query_word in enumerate(query_words):\n                current_index = query_words_index[idx]\n                current_inverted_list = self.inverted_index[query_word]\n                \n                # å·²ç»éå†åˆ°äº†æŸä¸€ä¸ªå€’åºç´¢å¼•çš„æœ«å°¾ï¼Œç»“æŸ search\n                if current_index &gt;= len(current_inverted_list):\n                    return result\n\n                current_ids.append(current_inverted_list[current_index])\n\n            # ç„¶åï¼Œå¦‚æœ current_ids çš„æ‰€æœ‰å…ƒç´ éƒ½ä¸€æ ·ï¼Œé‚£ä¹ˆè¡¨æ˜è¿™ä¸ªå•è¯åœ¨è¿™ä¸ªå…ƒç´ å¯¹åº”çš„æ–‡æ¡£ä¸­éƒ½å‡ºç°äº†\n            if all(x == current_ids[0] for x in current_ids):\n                result.append(current_ids[0])\n                query_words_index = [x + 1 for x in query_words_index]\n                continue\n            \n            # å¦‚æœä¸æ˜¯ï¼Œæˆ‘ä»¬å°±æŠŠæœ€å°çš„å…ƒç´ åŠ ä¸€\n            min_val = min(current_ids)\n            min_val_pos = current_ids.index(min_val)\n            query_words_index[min_val_pos] += 1\n\n    @staticmethod\n    def parse_text_to_words(text):\n        # ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼å»é™¤æ ‡ç‚¹ç¬¦å·å’Œæ¢è¡Œç¬¦\n        text = re.sub(r'[^\\w ]', ' ', text)\n        # è½¬ä¸ºå°å†™\n        text = text.lower()\n        # ç”Ÿæˆæ‰€æœ‰å•è¯çš„åˆ—è¡¨\n        word_list = text.split(' ')\n        # å»é™¤ç©ºç™½å•è¯\n        word_list = filter(None, word_list)\n        # è¿”å›å•è¯çš„ set\n        return set(word_list)\n\nsearch_engine = BOWInvertedIndexEngine()\nmain(search_engine)\n\n\n########## è¾“å‡º ##########\n\n\nlittle\nfound 2 result(s):\n1.txt\n2.txt\nlittle vicious\nfound 1 result(s):\n2.txt\n</code></pre><p>é¦–å…ˆæˆ‘è¦å¼ºè°ƒä¸€ä¸‹ï¼Œ<strong>è¿™æ¬¡çš„ç®—æ³•å¹¶ä¸éœ€è¦ä½ å®Œå…¨ç†è§£</strong>ï¼Œè¿™é‡Œçš„å®ç°æœ‰ä¸€äº›è¶…å‡ºäº†æœ¬ç« çŸ¥è¯†ç‚¹ã€‚ä½†å¸Œæœ›ä½ ä¸è¦å› æ­¤é€€ç¼©ï¼Œè¿™ä¸ªä¾‹å­ä¼šå‘Šè¯‰ä½ ï¼Œé¢å‘å¯¹è±¡ç¼–ç¨‹æ˜¯å¦‚ä½•æŠŠç®—æ³•å¤æ‚æ€§éš”ç¦»å¼€æ¥ï¼Œè€Œä¿ç•™æ¥å£å’Œå…¶ä»–çš„ä»£ç ä¸å˜ã€‚</p><p>æˆ‘ä»¬æ¥ç€æ¥çœ‹è¿™æ®µä»£ç ã€‚ä½ å¯ä»¥çœ‹åˆ°ï¼Œæ–°æ¨¡å‹ç»§ç»­ä½¿ç”¨ä¹‹å‰çš„æ¥å£ï¼Œä»ç„¶åªåœ¨ <code>__init__()</code>ã€<code>process_corpus()</code>å’Œ<code>search()</code>ä¸‰ä¸ªå‡½æ•°è¿›è¡Œä¿®æ”¹ã€‚</p><p>è¿™å…¶å®ä¹Ÿæ˜¯å¤§å…¬å¸é‡Œå›¢é˜Ÿåä½œçš„ä¸€ç§æ–¹å¼ï¼Œ<strong>åœ¨åˆç†çš„åˆ†å±‚è®¾è®¡åï¼Œæ¯ä¸€å±‚çš„é€»è¾‘åªéœ€è¦å¤„ç†å¥½åˆ†å†…çš„äº‹æƒ…å³å¯</strong>ã€‚åœ¨è¿­ä»£å‡çº§æˆ‘ä»¬çš„æœç´¢å¼•æ“å†…æ ¸æ—¶ï¼Œ main å‡½æ•°ã€ç”¨æˆ·æ¥å£æ²¡æœ‰ä»»ä½•æ”¹å˜ã€‚å½“ç„¶ï¼Œå¦‚æœå…¬å¸æ‹›äº†æ–°çš„å‰ç«¯å·¥ç¨‹å¸ˆï¼Œè¦å¯¹ç”¨æˆ·æ¥å£éƒ¨åˆ†è¿›è¡Œä¿®æ”¹ï¼Œæ–°äººä¹Ÿä¸éœ€è¦è¿‡åˆ†æ‹…å¿ƒåå°çš„äº‹æƒ…ï¼Œåªè¦åšå¥½æ•°æ®äº¤äº’å°±å¯ä»¥äº†ã€‚</p><p>ç»§ç»­çœ‹ä»£ç ï¼Œä½ å¯èƒ½æ³¨æ„åˆ°äº†å¼€å¤´çš„Inverted Indexã€‚Inverted Index Modelï¼Œå³å€’åºç´¢å¼•ï¼Œæ˜¯éå¸¸æœ‰åçš„æœç´¢å¼•æ“æ–¹æ³•ï¼Œæ¥ä¸‹æ¥æˆ‘ç®€å•ä»‹ç»ä¸€ä¸‹ã€‚</p><p>å€’åºç´¢å¼•ï¼Œä¸€å¦‚å…¶åï¼Œä¹Ÿå°±æ˜¯è¯´è¿™æ¬¡åè¿‡æ¥ï¼Œæˆ‘ä»¬ä¿ç•™çš„æ˜¯ word -&gt; id çš„å­—å…¸ã€‚äºæ˜¯æƒ…å†µå°±è±ç„¶å¼€æœ—äº†ï¼Œåœ¨ search æ—¶ï¼Œæˆ‘ä»¬åªéœ€è¦æŠŠæƒ³è¦çš„ query_word çš„å‡ ä¸ªå€’åºç´¢å¼•å•ç‹¬æ‹å‡ºæ¥ï¼Œç„¶åä»è¿™å‡ ä¸ªåˆ—è¡¨ä¸­æ‰¾å…±æœ‰çš„å…ƒç´ ï¼Œé‚£äº›å…±æœ‰çš„å…ƒç´ ï¼Œå³ IDï¼Œå°±æ˜¯æˆ‘ä»¬æƒ³è¦çš„æŸ¥è¯¢ç»“æœã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°±é¿å…äº†å°†æ‰€æœ‰çš„ index è¿‡ä¸€éçš„å°´å°¬ã€‚</p><p>process_corpus å»ºç«‹å€’åºç´¢å¼•ã€‚æ³¨æ„ï¼Œè¿™é‡Œçš„ä»£ç éƒ½æ˜¯éå¸¸ç²¾ç®€çš„ã€‚åœ¨å·¥ä¸šç•Œé¢†åŸŸï¼Œéœ€è¦ä¸€ä¸ª unique ID ç”Ÿæˆå™¨ï¼Œæ¥å¯¹æ¯ä¸€ç¯‡æ–‡ç« æ ‡è®°ä¸Šä¸åŒçš„ IDï¼Œå€’åºç´¢å¼•ä¹Ÿåº”è¯¥æŒ‰ç…§è¿™ä¸ª unique_id æ¥è¿›è¡Œæ’åºã€‚</p><p>è‡³äºsearch() å‡½æ•°ï¼Œä½ å¤§æ¦‚äº†è§£å®ƒåšçš„äº‹æƒ…å³å¯ã€‚å®ƒä¼šæ ¹æ® query_words æ‹¿åˆ°æ‰€æœ‰çš„å€’åºç´¢å¼•ï¼Œå¦‚æœæ‹¿ä¸åˆ°ï¼Œå°±è¡¨ç¤ºæœ‰çš„ query word ä¸å­˜åœ¨äºä»»ä½•æ–‡ç« ä¸­ï¼Œç›´æ¥è¿”å›ç©ºï¼›æ‹¿åˆ°ä¹‹åï¼Œè¿è¡Œä¸€ä¸ªâ€œåˆå¹¶Kä¸ªæœ‰åºæ•°ç»„â€çš„ç®—æ³•ï¼Œä»ä¸­æ‹¿åˆ°æˆ‘ä»¬æƒ³è¦çš„ IDï¼Œå¹¶è¿”å›ã€‚</p><blockquote>\n<p>æ³¨æ„ï¼Œè¿™é‡Œç”¨åˆ°çš„ç®—æ³•å¹¶ä¸æ˜¯æœ€ä¼˜çš„ï¼Œæœ€ä¼˜çš„å†™æ³•éœ€è¦ç”¨æœ€å°å †æ¥å­˜å‚¨ indexã€‚è¿™æ˜¯ä¸€é“æœ‰åçš„ leetcode hard é¢˜ï¼Œæœ‰å…´è¶£è¯·å‚è€ƒï¼š<a href=\"https://blog.csdn.net/qqxx6661/article/details/77814794\">https://blog.csdn.net/qqxx6661/article/details/77814794</a>ï¼‰</p>\n</blockquote><p>éå†çš„é—®é¢˜è§£å†³äº†ï¼Œé‚£ç¬¬äºŒä¸ªé—®é¢˜ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦å®ç°æœç´¢å•è¯æŒ‰é¡ºåºå‡ºç°ï¼Œæˆ–è€…å¸Œæœ›æœç´¢çš„å•è¯åœ¨æ–‡ä¸­ç¦»å¾—è¿‘ä¸€äº›å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬éœ€è¦åœ¨ Inverted Index ä¸Šï¼Œå¯¹äºæ¯ç¯‡æ–‡ç« ä¹Ÿä¿ç•™å•è¯çš„ä½ç½®ä¿¡æ¯ï¼Œè¿™æ ·ä¸€æ¥ï¼Œåœ¨åˆå¹¶æ“ä½œçš„æ—¶å€™å¤„ç†ä¸€ä¸‹å°±å¯ä»¥äº†ã€‚</p><p>å€’åºç´¢å¼•æˆ‘å°±ä»‹ç»åˆ°è¿™é‡Œäº†ï¼Œå¦‚æœä½ æ„Ÿå…´è¶£å¯ä»¥è‡ªè¡ŒæŸ¥é˜…èµ„æ–™ã€‚è¿˜æ˜¯é‚£å¥è¯ï¼Œæˆ‘ä»¬çš„é‡ç‚¹æ˜¯é¢å‘å¯¹è±¡çš„æŠ½è±¡ï¼Œåˆ«å¿˜äº†ä½“ä¼šè¿™ä¸€æ€æƒ³ã€‚</p><h2>LRU å’Œå¤šé‡ç»§æ‰¿</h2><p>åˆ°è¿™ä¸€æ­¥ï¼Œç»ˆäºï¼Œä½ çš„æœç´¢å¼•æ“ä¸Šçº¿äº†ï¼Œæœ‰äº†è¶Šæ¥è¶Šå¤šçš„è®¿é—®é‡ï¼ˆQPSï¼‰ã€‚æ¬£å–œéª„å‚²çš„åŒæ—¶ï¼Œä½ å´å‘ç°æœåŠ¡å™¨æœ‰äº›â€œä¸å ªé‡è´Ÿâ€äº†ã€‚ç»è¿‡ä¸€æ®µæ—¶é—´çš„è°ƒç ”ï¼Œä½ å‘ç°å¤§é‡é‡å¤æ€§æœç´¢å æ®äº† 90% ä»¥ä¸Šçš„æµé‡ï¼Œäºæ˜¯ï¼Œä½ æƒ³åˆ°äº†ä¸€ä¸ªå¤§æ€å™¨â€”â€”ç»™æœç´¢å¼•æ“åŠ ä¸€ä¸ªç¼“å­˜ã€‚</p><p>æ‰€ä»¥ï¼Œæœ€åè¿™éƒ¨åˆ†ï¼Œæˆ‘å°±æ¥è®²è®²ç¼“å­˜å’Œå¤šé‡ç»§æ‰¿çš„å†…å®¹ã€‚</p><pre><code>import pylru\n\nclass LRUCache(object):\n    def __init__(self, size=32):\n        self.cache = pylru.lrucache(size)\n    \n    def has(self, key):\n        return key in self.cache\n    \n    def get(self, key):\n        return self.cache[key]\n    \n    def set(self, key, value):\n        self.cache[key] = value\n\nclass BOWInvertedIndexEngineWithCache(BOWInvertedIndexEngine, LRUCache):\n    def __init__(self):\n        super(BOWInvertedIndexEngineWithCache, self).__init__()\n        LRUCache.__init__(self)\n    \n    def search(self, query):\n        if self.has(query):\n            print('cache hit!')\n            return self.get(query)\n        \n        result = super(BOWInvertedIndexEngineWithCache, self).search(query)\n        self.set(query, result)\n        \n        return result\n\nsearch_engine = BOWInvertedIndexEngineWithCache()\nmain(search_engine)\n\n\n########## è¾“å‡º ##########\n\n\nlittle\nfound 2 result(s):\n1.txt\n2.txt\nlittle\ncache hit!\nfound 2 result(s):\n1.txt\n2.txt\n</code></pre><p>å®ƒçš„ä»£ç å¾ˆç®€å•ï¼ŒLRUCache å®šä¹‰äº†ä¸€ä¸ªç¼“å­˜ç±»ï¼Œä½ å¯ä»¥é€šè¿‡ç»§æ‰¿è¿™ä¸ªç±»æ¥è°ƒç”¨å…¶æ–¹æ³•ã€‚LRU ç¼“å­˜æ˜¯ä¸€ç§å¾ˆç»å…¸çš„ç¼“å­˜ï¼ˆåŒæ—¶ï¼ŒLRUçš„å®ç°ä¹Ÿæ˜¯ç¡…è°·å¤§å‚å¸¸è€ƒçš„ç®—æ³•é¢è¯•é¢˜ï¼Œè¿™é‡Œä¸ºäº†ç®€å•ï¼Œæˆ‘ç›´æ¥ä½¿ç”¨ pylru è¿™ä¸ªåŒ…ï¼‰ï¼Œå®ƒç¬¦åˆè‡ªç„¶ç•Œçš„å±€éƒ¨æ€§åŸç†ï¼Œå¯ä»¥ä¿ç•™æœ€è¿‘ä½¿ç”¨è¿‡çš„å¯¹è±¡ï¼Œè€Œé€æ¸æ·˜æ±°æ‰å¾ˆä¹…æ²¡æœ‰è¢«ç”¨è¿‡çš„å¯¹è±¡ã€‚</p><p>å› æ­¤ï¼Œè¿™é‡Œçš„ç¼“å­˜ä½¿ç”¨èµ·æ¥ä¹Ÿå¾ˆç®€å•ï¼Œè°ƒç”¨ has() å‡½æ•°åˆ¤æ–­æ˜¯å¦åœ¨ç¼“å­˜ä¸­ï¼Œå¦‚æœåœ¨ï¼Œè°ƒç”¨ get å‡½æ•°ç›´æ¥è¿”å›ç»“æœï¼›å¦‚æœä¸åœ¨ï¼Œé€å…¥åå°è®¡ç®—ç»“æœï¼Œç„¶åå†å¡å…¥ç¼“å­˜ã€‚</p><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒBOWInvertedIndexEngineWithCache ç±»ï¼Œå¤šé‡ç»§æ‰¿äº†ä¸¤ä¸ªç±»ã€‚é¦–å…ˆï¼Œä½ éœ€è¦æ³¨æ„çš„æ˜¯æ„é€ å‡½æ•°ï¼ˆä¸ŠèŠ‚è¯¾çš„æ€è€ƒé¢˜ï¼Œä½ æ€è€ƒäº†å—ï¼Ÿï¼‰ã€‚å¤šé‡ç»§æ‰¿æœ‰ä¸¤ç§åˆå§‹åŒ–æ–¹æ³•ï¼Œæˆ‘ä»¬åˆ†åˆ«æ¥çœ‹ä¸€ä¸‹ã€‚</p><p>ç¬¬ä¸€ç§æ–¹æ³•ï¼Œç”¨ä¸‹é¢è¿™è¡Œä»£ç ï¼Œç›´æ¥åˆå§‹åŒ–è¯¥ç±»çš„ç¬¬ä¸€ä¸ªçˆ¶ç±»ï¼š</p><pre><code>super(BOWInvertedIndexEngineWithCache, self).__init__()\n</code></pre><p>ä¸è¿‡ä½¿ç”¨è¿™ç§æ–¹æ³•æ—¶ï¼Œè¦æ±‚ç»§æ‰¿é“¾çš„æœ€é¡¶å±‚çˆ¶ç±»å¿…é¡»è¦ç»§æ‰¿ objectã€‚</p><p>ç¬¬äºŒç§æ–¹æ³•ï¼Œå¯¹äºå¤šé‡ç»§æ‰¿ï¼Œå¦‚æœæœ‰å¤šä¸ªæ„é€ å‡½æ•°éœ€è¦è°ƒç”¨ï¼Œ æˆ‘ä»¬å¿…é¡»ç”¨ä¼ ç»Ÿçš„æ–¹æ³•<code>LRUCache.__init__(self)</code> ã€‚</p><p>å…¶æ¬¡ï¼Œä½ åº”è¯¥æ³¨æ„ï¼Œsearch() å‡½æ•°è¢«å­ç±» BOWInvertedIndexEngineWithCache å†æ¬¡é‡è½½ï¼Œä½†æ˜¯æˆ‘è¿˜éœ€è¦è°ƒç”¨ BOWInvertedIndexEngine çš„ search() å‡½æ•°ï¼Œè¿™æ—¶è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿè¯·çœ‹ä¸‹é¢è¿™è¡Œä»£ç ï¼š</p><pre><code>super(BOWInvertedIndexEngineWithCache, self).search(query)\n</code></pre><p>æˆ‘ä»¬å¯ä»¥å¼ºè¡Œè°ƒç”¨è¢«è¦†ç›–çš„çˆ¶ç±»çš„å‡½æ•°ã€‚</p><p>è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬å°±ç®€æ´åœ°å®ç°äº†ç¼“å­˜ï¼Œè€Œä¸”è¿˜æ˜¯åœ¨ä¸å½±å“ BOWInvertedIndexEngine ä»£ç çš„æƒ…å†µä¸‹ã€‚è¿™éƒ¨åˆ†å†…å®¹å¸Œæœ›ä½ å¤šè¯»å‡ éï¼Œè‡ªå·±æ£æ‘©æ¸…æ¥šï¼Œé€šè¿‡è¿™ä¸ªä¾‹å­å¤šå¤šä½“ä¼šç»§æ‰¿çš„ä¼˜åŠ¿ã€‚</p><h2>æ€»ç»“</h2><p>ä»Šå¤©è¿™èŠ‚è¯¾æ˜¯é¢å‘å¯¹è±¡çš„å®æˆ˜åº”ç”¨ï¼Œç›¸æ¯”èµ·å‰é¢çš„ç†è®ºçŸ¥è¯†ï¼Œå†…å®¹å…¶å®ä¸é‚£ä¹ˆå‹å¥½ã€‚ä¸è¿‡ï¼Œè‹¥ä½ èƒ½é™ä¸‹å¿ƒæ¥ï¼Œä»”ç»†å­¦ä¹ ï¼Œç†æ¸…æ¥šæ•´ä¸ªè¿‡ç¨‹çš„è¦ç‚¹ï¼Œå¯¹ä½ ç†è§£é¢å‘å¯¹è±¡å¿…å°†æœ‰æ‰€è£¨ç›Šã€‚æ¯”å¦‚ï¼Œä½ å¯ä»¥æ ¹æ®ä¸‹é¢ä¸¤ä¸ªé—®é¢˜ï¼Œæ¥æ£€éªŒä»Šå¤©è¿™èŠ‚è¯¾çš„æ”¶è·ã€‚</p><ul>\n<li>ä½ èƒ½æŠŠè¿™èŠ‚è¯¾æ‰€æœ‰çš„ç±»çš„å±æ€§å’Œå‡½æ•°æŠ½å–å‡ºæ¥ï¼Œè‡ªå·±åœ¨çº¸ä¸Šç”»ä¸€éç»§æ‰¿å…³ç³»å—ï¼Ÿ</li>\n<li>è¿­ä»£å¼€å‘æµç¨‹æ˜¯æ€æ ·çš„ï¼Ÿ</li>\n</ul><p>å…¶å®äºæˆ‘è€Œè¨€ï¼Œé€šè¿‡æ„é€ æœç´¢å¼•æ“è¿™ä¹ˆä¸€ä¸ªä¾‹å­æ¥è®²é¢å‘å¯¹è±¡ï¼Œä¹Ÿæ˜¯é¢‡è´¹äº†ä¸€ç•ªåŠŸå¤«ã€‚è¿™å…¶ä¸­è™½ç„¶æ¶‰åŠä¸€äº›æœç´¢å¼•æ“çš„ä¸“ä¸šçŸ¥è¯†å’Œç®—æ³•ï¼Œä½†ç¯‡å¹…æœ‰é™ï¼Œä¹Ÿåªèƒ½ç®—æ˜¯æŠ›ç –å¼•ç‰ï¼Œä½ è‹¥æœ‰æ‰€æ”¶è·ï¼Œæˆ‘ä¾¿æ¬£ç„¶æ»¡è¶³ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>æœ€åç»™ä½ ç•™ä¸€é“æ€è€ƒé¢˜ã€‚ç§æœ‰å˜é‡èƒ½è¢«ç»§æ‰¿å—ï¼Ÿå¦‚æœä¸èƒ½ï¼Œä½ æƒ³ç»§æ‰¿åº”è¯¥æ€ä¹ˆå»åšå‘¢ï¼Ÿæ¬¢è¿ç•™è¨€ä¸æˆ‘åˆ†äº«ã€è®¨è®ºï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«ç»™ä½ çš„åŒäº‹ã€æœ‹å‹ï¼Œä¸€èµ·äº¤æµä¸è¿›æ­¥ã€‚</p>","neighbors":{"left":{"article_title":"11 | é¢å‘å¯¹è±¡ï¼ˆä¸Šï¼‰ï¼šä»ç”Ÿæ´»ä¸­çš„ç±»æ¯”è¯´èµ·","id":98658},"right":{"article_title":"13 | æ­å»ºç§¯æœ¨ï¼šPython æ¨¡å—åŒ–","id":99275}},"comments":[{"had_liked":false,"id":101890,"user_name":"Jingxiao","can_delete":false,"product_type":"c1","uid":1259521,"ip_address":"","ucode":"EB966BB87132F6","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJJOlibibPFEWOib8ib7RtfAtxND5FUqCxxoeTuLAbBI9ic23xuwdXT4IyiaWq3Fic9RgEAYI0lBTbEp2rcg/132","comment_is_top":true,"comment_ctime":1560031499,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"9.2233721500839997e+18","product_id":100026901,"comment_content":"æ€è€ƒé¢˜ç­”æ¡ˆï¼š<br>John Si çš„è¯„è®ºè¯´çš„å¾ˆå¯¹ï¼Œå¦‚æœæƒ³è¦å¼ºè¡Œè®¿é—®çˆ¶ç±»çš„ç§æœ‰ç±»å‹ï¼Œåšæ³•æ˜¯ self._ParentClass__varï¼Œè¿™æ˜¯éå¸¸ä¸æ¨èçš„ hacky methodã€‚ä»¥ä¸‹æ˜¯ç¤ºèŒƒä»£ç ï¼š<br>class A:<br>    __a = 1<br><br>class B(A):<br>    pass<br><br>b = B()<br>print(b._A__a)","like_count":26,"discussions":[{"author":{"id":1650748,"avatar":"https://static001.geekbang.org/account/avatar/00/19/30/3c/0668d6ae.jpg","nickname":"ç›˜èƒ§","note":"","ucode":"5386CC4C92ECC2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":293863,"discussion_content":"å¤§å®¶éƒ½æ˜¯æˆå¹´äººï¼Œå®é™…ä¸Šå“ªæœ‰å•¥ç§æœ‰å˜é‡å¯¹å§","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1595690541,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1524904,"avatar":"https://static001.geekbang.org/account/avatar/00/17/44/a8/0ce75c8c.jpg","nickname":"Skrpy","note":"","ucode":"BB6CB4E9AA1712","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":378469,"discussion_content":"å“ˆå“ˆå“ˆï¼Œå¤ªå·äº†ï¼Œä¸hackyä¸€ç‚¹éƒ½ä¸å¤Ÿçªå‡ºğŸ˜„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623237955,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1919541,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/4a/35/66caeed9.jpg","nickname":"å®Œç¾åšæŒ","note":"","ucode":"AE0261D8DDEF64","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":309916,"discussion_content":"ä¸ºä»€ä¹ˆä¸æ¨èä½¿ç”¨è¿™ç§æ‰€è°“çš„hacky methodï¼Œè¿˜æœ‰ä¸ºä»€ä¹ˆå«ä»–æ˜¯hacky methodï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1601514852,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":100892,"user_name":"ç›Šè¾¾","can_delete":false,"product_type":"c1","uid":1229123,"ip_address":"","ucode":"AFE48F453851B2","user_header":"https://static001.geekbang.org/account/avatar/00/12/c1/43/50c4cd22.jpg","comment_is_top":false,"comment_ctime":1559665120,"is_pvip":false,"discussion_count":8,"race_medal":0,"score":"315092277728","product_id":100026901,"comment_content":"çœ‹ä¸æ‡‚ä¸ç¡è§‰","like_count":73,"discussions":[{"author":{"id":1988192,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/56/60/3dd85c9f.jpg","nickname":"å†»å’š","note":"","ucode":"28DC03716D5C3C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":283374,"discussion_content":"å¯¹äºBOWçš„éš¾ç‚¹ï¼Œå…¶å®è®¤çœŸæƒ³ä¸€ä¸‹ç”»é¢å°±èƒ½ç†è§£ï¼š\næ¯”å¦‚è¾“å…¥ â€œword_1 word_2â€œ : è¿™ä¸¤ä¸ªè¯åœ¨ç¬¬ä¸€æ¬¡forå¾ªç¯ï¼Œéƒ½èƒ½åœ¨1.txtä¸­æ‰¾åˆ°ï¼Œæ‰€ä»¥current_ids ä¸­æœ‰æœ‰ä¸¤ä¸ª1.txt -> (1.txt, 1.txt)ï¼Œç›´æ¥åŠ å…¥resultï¼Œå› ä¸ºä»–ä»¬éƒ½å­˜åœ¨äºåŒä¸€ä¸ªæ–‡æ¡£ã€‚\nï¼ˆä¸‹é¢æˆ‘ä»¬éœ€è¦åˆ¤æ–­è¿™ä¸¤ä¸ªè¯æ˜¯å¦ç»§ç»­å­˜åœ¨ä¸å…¶ä»–å‰©ä½™æ–‡æ¡£ï¼‰\næˆ‘ä»¬å…ˆå°†query_words_indexæ¯ä¸ªå…ƒç´ +1ï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬ä¸å†è€ƒè™‘1.txtäº†ï¼Œè€Œæ˜¯è€ƒè™‘2.txtï¼Œ3.txtç­‰ç­‰å‰©ä½™æ–‡æ¡£ã€‚\nå¦‚æœ word_1 é€šè¿‡æŸ¥æ‰¾å‘ç°å­˜åœ¨2.txtä¸­ï¼Œä½†æ˜¯word_2å­˜åœ¨3.txtï¼Œcurrent_ids ä¸­çš„å…ƒç´ éƒ½ä¸åŒ -> (2.txt, 3.txt )ã€‚æ‰€ä»¥æˆ‘ä»¬è¿›è¡Œâ€œ# å¦‚æœä¸æ˜¯ï¼Œæˆ‘ä»¬å°±æŠŠæœ€å°çš„å…ƒç´ åŠ ä¸€â€æ³¨é‡Šåçš„ä»£ç ï¼Œå…¶ä¸­min(2.txt, 3.txt) = 2.txtï¼Œ æˆ‘ä»¬æŠŠæœ€å°çš„txtåºå·+1ï¼Œå°±ä»£è¡¨æˆ‘ä»¬ä¸è€ƒè™‘2.txtï¼Œç›´æ¥è®©word_1åˆ°3.txtä¸­æŸ¥æ‰¾å¦‚æœå­˜åœ¨çš„è¯ã€‚\nè¿”å›çš„åˆ¤æ–­æ¡ä»¶å°±æ˜¯txtåºå·+1è¿‡åçš„å¤§å°å·²ç»å¤§äºè¿™ä¸ªå•è¯å­˜åœ¨çš„æ–‡æ¡£æ•°é‡äº†ï¼Œç›´æ¥è¿”å›resultã€‚\n","likes_number":7,"is_delete":false,"is_hidden":false,"ctime":1592248938,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1694202,"avatar":"https://static001.geekbang.org/account/avatar/00/19/d9/fa/e94bc037.jpg","nickname":"Geek_sylvester","note":"","ucode":"84669E65EA928E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":34414,"discussion_content":"æ˜¨æ™šåä¸€ç‚¹ç¿»åˆ°ä½ çš„è¯„è®ºï¼Œç„¶åæˆ‘å››ç‚¹æ‰ç¡çš„è§‰","likes_number":6,"is_delete":false,"is_hidden":false,"ctime":1571197489,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1742549,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/96/d5/23fecf33.jpg","nickname":"Hy","note":"","ucode":"F912E8A8D97591","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":271269,"discussion_content":"æœ‹å‹ä½ å¥½ï¼Œè¯·é—®ç¡äº†å—ï¼Œè¶…è¿‡72å°æ—¶çœ‹ä¸æ‡‚å°±ç¡å§ï¼Œå¥åº·ç¬¬ä¸€","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1590112318,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1523071,"avatar":"https://static001.geekbang.org/account/avatar/00/17/3d/7f/6256435b.jpg","nickname":"è§£æ™“ä¸œ","note":"","ucode":"0ECB8F444E8C50","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":560249,"discussion_content":"ç¡äº†å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649237776,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2628251,"avatar":"https://static001.geekbang.org/account/avatar/00/28/1a/9b/aa3b16f5.jpg","nickname":"æµ·æ£ ","note":"","ucode":"9416069D151314","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":540548,"discussion_content":"éº»äº†ã€‚ã€‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640079463,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1033169,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c3/d1/bdf895bf.jpg","nickname":"penng","note":"","ucode":"6087CFCB0AC434","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":537288,"discussion_content":"å·²ç»æ”¾å¼ƒã€‚ã€‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639020122,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1440141,"avatar":"https://static001.geekbang.org/account/avatar/00/15/f9/8d/751607fc.jpg","nickname":"rhyme","note":"","ucode":"F103E5B61B6D84","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":41671,"discussion_content":"ä»Šå¤©çœ‹ä¸æ‡‚æ˜å¤©ç»§ç»­","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572485980,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1488020,"avatar":"https://static001.geekbang.org/account/avatar/00/16/b4/94/2796de72.jpg","nickname":"è¿½é£ç­çš„äºº","note":"","ucode":"2993D60F94C396","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":38303,"discussion_content":"çœ‹ä¸æ‡‚ ã€‚ã€‚ã€‚ç¡è§‰ğŸ’¤","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571757723,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":101155,"user_name":"WingÂ·ä¸‰é‡‘","can_delete":false,"product_type":"c1","uid":1341402,"ip_address":"","ucode":"6B9F5822C3717F","user_header":"https://static001.geekbang.org/account/avatar/00/14/77/da/54c663f3.jpg","comment_is_top":false,"comment_ctime":1559728641,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"272142668289","product_id":100026901,"comment_content":"æ€è€ƒé¢˜ï¼šå­ç±»ç»§æ‰¿çˆ¶ç±»ç§æœ‰å˜é‡çš„æ–¹æ³•<br>- é€šè¿‡å®šä¹‰ get&#47;set å‡½æ•°æ¥é—´æ¥æ“ä½œç§æœ‰å˜é‡<br>- é€šè¿‡ å®ä¾‹å._çˆ¶ç±»å__ç§æœ‰å˜é‡å æ¥ç›´æ¥è°ƒç”¨ï¼Œæ‰€ä»¥äº‹å®ä¸Š python å¹¶ä¸ç›´æ¥ç§æœ‰å˜é‡<br><br># ä¸»è¦çŸ¥è¯†ç‚¹<br><br>- æœç´¢å¼•æ“çš„å››ä¸ªç»„æˆéƒ¨åˆ†<br>- è¿­ä»£å¼€å‘çš„æµç¨‹<br>- ç±»çš„ç»§æ‰¿ä¸çˆ¶ç±»å‡½æ•°çš„å¼ºè¡Œè°ƒç”¨<br>- è¯è¢‹æ¨¡å‹ + é€†åºç´¢å¼• + åˆå¹¶æœ‰åºæ•°ç»„ = ä¼˜åŒ–æ£€ç´¢é€Ÿåº¦ + è€ƒè™‘å•è¯é¡ºåºä¸é—´éš”<br>- pylru çš„åŸºæœ¬ç”¨æ³•<br>- å¤šé‡ç»§æ‰¿çš„åˆå§‹åŒ–è§„åˆ™<br><br># æœç´¢å¼•æ“<br><br>- æœç´¢å™¨ï¼šç›¸å½“äºçˆ¬è™«<br>- ç´¢å¼•å™¨ï¼šä¸ºæ¯ä¸ªæ–‡ä»¶&#47;ç½‘é¡µå»ºç«‹å”¯ä¸€çš„ç´¢å¼•<br>- æ£€ç´¢å™¨ï¼šé«˜æ•ˆåœ°æ£€ç´¢å¹¶è¿”å›åŒ¹é…çš„æ–‡ä»¶&#47;ç½‘é¡µ<br>- ç”¨æˆ·æ¥å£ï¼šè¾“å…¥æ¡†å’Œç»“æœè¿”å›ç•Œé¢<br><br># è¿­ä»£å¼€å‘çš„æµç¨‹<br><br>- æ„å»ºä¸€ä¸ªé€šç”¨çš„åŸºæœ¬æ¡†æ¶<br>- ä»æœ€ç®€å•çš„æƒ…å†µè€ƒè™‘èµ·ï¼Œæ­å»ºä¸€ä¸ªèƒ½è¿è¡Œçš„æç®€ç‰ˆæœ¬<br>- æŒ‰ç…§å®é™…éœ€è¦ä¸æ–­å¯¹å…·ä½“çš„å®ç°è¿‡ç¨‹è¿›è¡Œä¼˜åŒ–ï¼šå¦‚åœ¨æœ¬è®²çš„ä¾‹å­ä¸­ï¼Œå…ˆè€ƒè™‘äº†å•ä¸ªæœç´¢è¯ + å°æœç´¢é‡çš„æƒ…å†µï¼Œæ„å»ºäº† ver 1ï¼›ç„¶åè€ƒè™‘äº†å¤šä¸ªæœç´¢è¯ï¼Œæ„å»ºäº†è¯è¢‹çš„ ver 2ï¼›å†è€ƒè™‘äº†å¤§æœç´¢é‡ï¼Œæ„å»ºäº†è¯è¢‹ + é€†åºç´¢å¼•çš„ ver 3ï¼ˆæäº† æœç´¢è¯æ’åºä¸é—´éš” æƒ…å†µä¸‹çš„å¤„ç†æ€è·¯ï¼‰ï¼›æœ€åè€ƒè™‘äº†è´Ÿè½½ä¸é‡å¤æ€§æœç´¢é—®é¢˜ï¼Œæ„å»ºäº†ä½¿ç”¨ LRU ç¼“å­˜ç­–ç•¥çš„ ver 4<br>- å¦‚æœå›è¿‡å¤´æ¥çœ‹æœ€åˆçš„æ¡†æ¶ï¼Œè¿˜èƒ½å‘ç° add_corpus çš„æ–¹æ³•å¹¶ä¸é€‚ç”¨äºæ–‡ä»¶è¾ƒå¤§çš„æƒ…å†µï¼Œç»“åˆå‰é¢ç¬¬å…­è®²çš„å†…å®¹å¯ä»¥åšäº›æ”¹è¿›ï¼›ä»¥åŠ main å‡½æ•°ç›´æ¥ç”¨äº† for å¾ªç¯æ¥æ‰¾æ‰€æœ‰çš„æ–‡ä»¶ï¼Œå®é™…ä½¿ç”¨æ—¶ç”¨çš„æ˜¯è¯¸å¦‚ os.walk çš„æ–¹æ³•","like_count":63,"discussions":[{"author":{"id":1546115,"avatar":"https://static001.geekbang.org/account/avatar/00/17/97/83/a9559709.jpg","nickname":"LHJ_Stan","note":"","ucode":"27364BE7ED795E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":269922,"discussion_content":"èµèµèµ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589963012,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":101537,"user_name":"îŒ®","can_delete":false,"product_type":"c1","uid":1322330,"ip_address":"","ucode":"FA2983C5AD320C","user_header":"https://static001.geekbang.org/account/avatar/00/14/2d/5a/cc637589.jpg","comment_is_top":false,"comment_ctime":1559865294,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"207718295502","product_id":100026901,"comment_content":"è¿™ç¯‡æ–‡ç« å°±å€¼å›ç¥¨ä»·äº†ã€‚","like_count":49,"discussions":[{"author":{"id":1501818,"avatar":"https://static001.geekbang.org/account/avatar/00/16/ea/7a/d857723d.jpg","nickname":"Vfeelit","note":"","ucode":"F3FF2B069F347F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":341343,"discussion_content":"å€¼ä¸ªxå•Š  æœ€æ°´çš„ä¸€é—¨è¯¾ç¨‹ æ²¡æœ‰ä¹‹ä¸€ èƒ½ä¸èƒ½é€€ç¥¨ èƒ½ä¸èƒ½è½¬å–ï¼Œå»ºè®®å¼€é€šäºŒæ‰‹è½¬å–  æˆ‘ç¬¬ä¸€æ—¶é—´å‡ºæ‰ åƒåœ¾","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610380691,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":101761,"user_name":"å°ä¾ é¾™æ—‹é£","can_delete":false,"product_type":"c1","uid":1126441,"ip_address":"","ucode":"073F3924A99835","user_header":"https://static001.geekbang.org/account/avatar/00/11/30/29/d6816ebf.jpg","comment_is_top":false,"comment_ctime":1559963661,"is_pvip":false,"replies":[{"id":"36710","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"é«˜å±±æµæ°´","uid":"1513504","ctime":1560030906,"ip_address":"","comment_id":101761,"utype":1}],"discussion_count":2,"race_medal":0,"score":"181948590093","product_id":100026901,"comment_content":"å’Œé¢å‘å¯¹è±¡æ— å…³çš„å…³é”®è¯æ•´ç†ï¼š<br>1.ä¸€ä¸ªæœç´¢å¼•æ“ç”±æœç´¢å™¨ã€ç´¢å¼•å™¨ã€æ£€ç´¢å™¨å’Œç”¨æˆ·æ¥å£å››ä¸ªéƒ¨åˆ†ç»„æˆã€‚<br>2.Bag of Words Modelï¼Œè¯è¢‹æ¨¡å‹ã€‚<br>3.Inverted Index Modelï¼Œå€’åºç´¢å¼•ã€‚<br>4.è¯­æ–™corpusåˆ†è¯ï¼Œé½å¤«å®šå¾‹ã€‚<br>5.åˆå¹¶ K ä¸ªæœ‰åºæ•°ç»„ã€‚<br>6.LRUç¼“å­˜ã€‚<br>éš¾ç‚¹æ¶ˆåŒ–ï¼š4ï¼Œ5ï¼Œ6<br>æ€è€ƒé¢˜ï¼š<br>Pythonå¹¶æ²¡æœ‰çœŸæ­£çš„ç§æœ‰åŒ–æ”¯æŒï¼Œä½†å¯ç”¨ä¸‹åˆ’çº¿å¾—åˆ°ä¼ªç§æœ‰ï¼š<br>ï¼ˆ1ï¼‰_xxx      &quot;å•ä¸‹åˆ’çº¿ &quot; å¼€å§‹çš„æˆå‘˜å˜é‡å«åšä¿æŠ¤å˜é‡ï¼Œæ„æ€æ˜¯åªæœ‰ç±»å¯¹è±¡å’Œå­ç±»å¯¹è±¡è‡ªå·±èƒ½è®¿é—®åˆ°è¿™äº›å˜é‡ï¼Œéœ€é€šè¿‡ç±»æä¾›çš„æ¥å£è¿›è¡Œè®¿é—®ï¼›<br>ï¼ˆ2ï¼‰__xxx    ç±»ä¸­çš„ç§æœ‰å˜é‡&#47;æ–¹æ³•åï¼Œåªæœ‰ç±»å¯¹è±¡è‡ªå·±èƒ½è®¿é—®ï¼Œè¿å­ç±»å¯¹è±¡ä¹Ÿä¸èƒ½è®¿é—®åˆ°è¿™ä¸ªæ•°æ®ã€‚<br>ï¼ˆ3ï¼‰__xxx__ é­”æ³•å‡½æ•°ï¼Œå‰åå‡æœ‰ä¸€ä¸ªâ€œåŒä¸‹åˆ’çº¿â€ ä»£è¡¨pythoné‡Œç‰¹æ®Šæ–¹æ³•ä¸“ç”¨çš„æ ‡è¯†ï¼Œå¦‚ __init__() ä»£è¡¨ç±»çš„æ„é€ å‡½æ•°ã€‚","like_count":42,"discussions":[{"author":{"id":1513504,"avatar":"https://static001.geekbang.org/account/avatar/00/17/18/20/75ea3b20.jpg","nickname":"é«˜å±±æµæ°´","note":"","ucode":"71E513B5937481","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":453105,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560030906,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1268778,"avatar":"","nickname":"sky","note":"","ucode":"6D31488C0DAFCC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":88,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561088309,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":104572,"user_name":"é£å±…ä½çš„è¡—","can_delete":false,"product_type":"c1","uid":1542673,"ip_address":"","ucode":"0075A7FB66F797","user_header":"https://static001.geekbang.org/account/avatar/00/17/8a/11/8e9fc7e7.jpg","comment_is_top":false,"comment_ctime":1560777665,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"83165156289","product_id":100026901,"comment_content":"Python3.x å’Œ Python2.x çš„ä¸€ä¸ªåŒºåˆ«æ˜¯: Python 3 å¯ä»¥ä½¿ç”¨ç›´æ¥ä½¿ç”¨ super().xxx ä»£æ›¿ super(Class, self).xxx","like_count":19,"discussions":[{"author":{"id":1144834,"avatar":"https://static001.geekbang.org/account/avatar/00/11/78/02/eeb3ce7f.jpg","nickname":"Littleä½•","note":"","ucode":"0CC4D21D61EAD6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":218334,"discussion_content":"ä¼˜ç§€ã€‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585649202,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":202247,"user_name":"shiziwen","can_delete":false,"product_type":"c1","uid":1016917,"ip_address":"","ucode":"ADADC770D82D66","user_header":"https://static001.geekbang.org/account/avatar/00/0f/84/55/1e40bd61.jpg","comment_is_top":false,"comment_ctime":1585932472,"is_pvip":false,"replies":[{"id":"75931","content":"super().__init__() åªèƒ½è°ƒç”¨ç¬¬ä¸€ä¸ªçˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œä½†å¯¹äºå¤šé‡ç»§æ‰¿ï¼Œå¦‚æœä½ æƒ³è°ƒç”¨å…¶ä»–çˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œåˆ™å¿…é¡»æŒ‡å®šã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"é«˜å±±æµæ°´","uid":"1513504","ctime":1586150304,"ip_address":"","comment_id":202247,"utype":1}],"discussion_count":5,"race_medal":0,"score":"70305409208","product_id":100026901,"comment_content":"ç¬¬äºŒç§æ–¹æ³•ï¼Œå¯¹äºå¤šé‡ç»§æ‰¿ï¼Œå¦‚æœæœ‰å¤šä¸ªæ„é€ å‡½æ•°éœ€è¦è°ƒç”¨ï¼Œ æˆ‘ä»¬å¿…é¡»ç”¨ä¼ ç»Ÿçš„æ–¹æ³•LRUCache.__init__(self) ã€‚<br><br>è¿™é‡Œçš„ä¸¤å¥è¯æ²¡æœ‰å¾ˆæ˜ç™½ï¼ŒLRUCacheä¸ºä»€ä¹ˆå¿…é¡»ä½¿ç”¨ç¬¬äºŒç§æ–¹æ³•ï¼Ÿ<br><br><br>","like_count":16,"discussions":[{"author":{"id":1513504,"avatar":"https://static001.geekbang.org/account/avatar/00/17/18/20/75ea3b20.jpg","nickname":"é«˜å±±æµæ°´","note":"","ucode":"71E513B5937481","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490539,"discussion_content":"super().__init__() åªèƒ½è°ƒç”¨ç¬¬ä¸€ä¸ªçˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œä½†å¯¹äºå¤šé‡ç»§æ‰¿ï¼Œå¦‚æœä½ æƒ³è°ƒç”¨å…¶ä»–çˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œåˆ™å¿…é¡»æŒ‡å®šã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1586150304,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1191529,"avatar":"","nickname":"karofsky","note":"","ucode":"4AFBEDE22F9652","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":331577,"discussion_content":"æˆ‘çš„ç†è§£ï¼šä¸ŠèŠ‚è¯¾æ˜¯é’»çŸ³ç»§æ‰¿ï¼ŒBCçš„çˆ¶äº²éƒ½æ˜¯Aï¼Œä½†æ˜¯è¿™ä¸ªé‡Œé¢çš„BOWInvertedIndexEngineWithCacheåˆ†åˆ«ç»§æ‰¿è‡ªSearchEngineBaseå’ŒLRUCacheï¼Œåªè¦åœ¨SearchEngineBaseçš„åˆå§‹åŒ–å‡½æ•°é‡Œé¢ä¹ŸåŠ ä¸Šsuper().__init()__å°±å¯ä»¥é¡ºç€ç»§æ‰¿é“¾æ‰¾åˆ°LRUCacheäº†ï¼Œä¹Ÿå°±çœå»äº†å•ç‹¬åˆå§‹åŒ–LRUCacheçš„é‚£è¡Œ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1606904459,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1206365,"avatar":"https://static001.geekbang.org/account/avatar/00/12/68/5d/1ccee378.jpg","nickname":"èŒ«å†œ","note":"","ucode":"71F7143644C9CB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":319322,"discussion_content":"æˆ‘python3.7æµ‹è¯•çš„ super().__init() æ˜¯ä¼šè°ƒå¤šä¸ªçˆ¶ç±»çš„åˆå§‹åŒ–æ–¹æ³•çš„å‘€ï¼Œæ˜¯ç‰ˆæœ¬é—®é¢˜ï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1603983955,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2330232,"avatar":"https://static001.geekbang.org/account/avatar/00/23/8e/78/e64fc5c5.jpg","nickname":"Zhou Gong","note":"","ucode":"4A1C587FF8BDBC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1206365,"avatar":"https://static001.geekbang.org/account/avatar/00/12/68/5d/1ccee378.jpg","nickname":"èŒ«å†œ","note":"","ucode":"71F7143644C9CB","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":327688,"discussion_content":"æˆ‘åˆ™æ˜¯è¿™ä¹ˆè®¤ä¸ºçš„ï¼Œä¸Šä¸€èŠ‚è¯¾ç¨‹é‡Œé¢çš„æ€è€ƒé¢˜å°±æ˜¯é€šè¿‡super()æ¥è°ƒç”¨å¤šä¸ªçˆ¶ç±»çš„åˆå§‹åŒ–æ–¹æ³•ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605915028,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":319322,"ip_address":""},"score":327688,"extra":""}]},{"author":{"id":1016917,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/84/55/1e40bd61.jpg","nickname":"shiziwen","note":"","ucode":"ADADC770D82D66","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":223252,"discussion_content":"å¤šè°¢ï¼Œç°åœ¨å½»åº•æ˜ç™½äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586193375,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":130959,"user_name":"chuan_chen","can_delete":false,"product_type":"c1","uid":1198311,"ip_address":"","ucode":"D76D2B17F69ADD","user_header":"https://static001.geekbang.org/account/avatar/00/12/48/e7/da93cbec.jpg","comment_is_top":false,"comment_ctime":1567584041,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"61697126185","product_id":100026901,"comment_content":"æ„Ÿè§‰è¿™ç¯‡å¥½éš¾ã€‚ã€‚ã€‚","like_count":14},{"had_liked":false,"id":101080,"user_name":"John Si","can_delete":false,"product_type":"c1","uid":1526611,"ip_address":"","ucode":"705B90724A4BD4","user_header":"https://static001.geekbang.org/account/avatar/00/17/4b/53/67c08006.jpg","comment_is_top":false,"comment_ctime":1559711033,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"40214416697","product_id":100026901,"comment_content":"å…³äºæ€è€ƒé¢˜,å­ç±»ä¸èƒ½ç»§æ‰¿çˆ¶ç±»ç§æœ‰å±æ€§ï¼Œåªå¯é€è¿‡self._Parent__varnameå»è¯»å–è¯¥ç§æœ‰å±æ€§çš„å€¼ï¼Œæˆ–åœ¨çˆ¶ç±»åˆ›å»ºæ–¹æ³•è¿”å›ç§æœ‰å±æ€§çš„å€¼ï¼Œç„¶åå­ç±»è°ƒç”¨çˆ¶ç±»æ–¹æ³•å»å–å¾—è¯¥ç§æœ‰å±æ€§çš„å€¼<br><br>class Animal():<br>    <br>    def __init__(self, sex, height, weight):<br>        self.__sex = sex<br>        self.height = height<br>        self.weight = weight<br>        <br>    def say_hello(self):<br>        raise &#39;say hello not implemented&#39;<br>        <br>    def get_sex(self):<br>        print(&#39;Achieve sex information for parent method: {}&#39;.format(self.__sex))<br>        <br>class Person(Animal):<br>    <br>    def __init__(self,name,age):<br>        super().__init__(&#39;M&#39;,172,70)<br>        self.name = name<br>        self.age = age<br>        <br>    def say_hello(self):<br>        print(&#39;Hello, {}, age: {}, weight:{}&#39;.format(self.name, self.age, self.weight))<br>        print(&#39;Sex: {}&#39;.format(self._Animal__sex))<br>        <br><br>john = Person(&#39;John&#39;,35)<br>john.say_hello()<br>john.get_sex()<br><br>========================<br>Hello, John, age: 35, weight:70<br>Sex: M<br>Achieve sex information for parent method: M<br><br>","like_count":9},{"had_liked":false,"id":120438,"user_name":"zhuanghua","can_delete":false,"product_type":"c1","uid":1607006,"ip_address":"","ucode":"9C27B5539AC0B9","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/rsQcAfBYSwPWRNTSv0ax21faoBic53FxKiaEEbx6CibuXlzL4g6nzEftdMFjWUGNf17RwwOHso8YoiaE5Fg1GNtmbg/132","comment_is_top":false,"comment_ctime":1564895232,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"35924633600","product_id":100026901,"comment_content":"Python 3 ä¸­ç»§æ‰¿å†™æ³• super().__init__()<br>Python 2 ä¸­ç»§æ‰¿å†™æ³• super(å­ç±»å, self).__init__()ï¼Œä¸”åœ¨çˆ¶ç±»å®šä¹‰æ—¶è¦åœ¨æ‹¬å·å†…æŒ‡å®š objectã€‚","like_count":8},{"had_liked":false,"id":101121,"user_name":"æˆ‘æ˜¯ä¼ å¥‡","can_delete":false,"product_type":"c1","uid":1357543,"ip_address":"","ucode":"0019CECC4B701B","user_header":"https://static001.geekbang.org/account/avatar/00/14/b6/e7/460a6870.jpg","comment_is_top":false,"comment_ctime":1559721278,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"31624492350","product_id":100026901,"comment_content":"å›¾ä¸é”™","like_count":7,"discussions":[{"author":{"id":1087877,"avatar":"https://static001.geekbang.org/account/avatar/00/10/99/85/12a7cc69.jpg","nickname":"Linsto","note":"","ucode":"AE3797AB0521DE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":363715,"discussion_content":": ) * N","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617268461,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":192916,"user_name":"å¤´åƒæˆ‘è€å©†","can_delete":false,"product_type":"c1","uid":1248397,"ip_address":"","ucode":"251F60D969AB23","user_header":"https://static001.geekbang.org/account/avatar/00/13/0c/8d/5293d44d.jpg","comment_is_top":false,"comment_ctime":1584878799,"is_pvip":false,"replies":[{"id":"75938","content":"äº‹å®ä¸Šï¼Œä½ çš„ä¾‹å­ï¼ˆè±å½¢ç»§æ‰¿ï¼‰ä¸­ç¡®å®ä¼šå‡ºç°è¿™ä¸ªé—®é¢˜ï¼Œä½†æ˜¯å¦‚æœä½ å†è¯»ä»”ç»†ä¸€äº›ï¼Œæˆ‘çš„ä»£ç ç­‰ä»·äºï¼š<br><br>class A():<br>    def __init__(self):<br>        print(&#39;enter A&#39;)<br>        print(&#39;leave A&#39;)<br><br>class B(A):<br>    def __init__(self):<br>        print(&#39;enter B&#39;)<br>        super().__init__()<br>        print(&#39;leave B&#39;)<br><br>class C():<br>    def __init__(self):<br>        print(&#39;enter C&#39;)<br>        # super().__init__()<br>        print(&#39;leave C&#39;)<br><br>class D(B, C):<br>    def __init__(self):<br>        print(&#39;enter D&#39;)<br>        super(D, self).__init__()<br>        C.__init__(self)<br>        print(&#39;leave D&#39;)<br><br>D()<br><br>è¾“å‡ºï¼š<br>enter D<br>enter B<br>enter A<br>leave A<br>leave B<br>enter C<br>leave C<br>leave D<br><br>ä¸ä¼šå‡ºç°é‡å¤ init","user_name":"ä½œè€…å›å¤","user_name_real":"é«˜å±±æµæ°´","uid":"1513504","ctime":1586151406,"ip_address":"","comment_id":192916,"utype":1}],"discussion_count":3,"race_medal":0,"score":"27354682575","product_id":100026901,"comment_content":"class BOWInvertedIndexEngineWithCache(BOWInvertedIndexEngine, LRUCache): <br>                  def __init__(self): <br>                       super(BOWInvertedIndexEngineWithCache, self).__init__() <br>                       LRUCache.__init__(self)<br>è€å¸ˆï¼Œè¿™é‡Œè¿™2ç§è°ƒç”¨çˆ¶ç±»æ„é€ æ–¹æ³•ä¸åº”è¯¥æ˜¯äºŒé€‰ä¸€å—ï¼Œå¦‚æœè¿™æ ·å†™çš„è¯LRUCacheçš„æ„é€ æ–¹æ³•ä¼šè¢«è°ƒç”¨2æ¬¡<br>class A():<br>    def __init__(self):<br>        print(&#39;enter A&#39;)<br>        print(&#39;leave A&#39;)<br><br>class B(A):<br>    def __init__(self):<br>        print(&#39;enter B&#39;)<br>        super().__init__()<br>        print(&#39;leave B&#39;)<br><br>class C(A):<br>    def __init__(self):<br>        print(&#39;enter C&#39;)<br>        super().__init__()<br>        print(&#39;leave C&#39;)<br><br>class D(B, C):<br>    def __init__(self):<br>        print(&#39;enter D&#39;)<br>        super(D,self).__init__()<br>        C.__init__(self)<br>        print(&#39;leave D&#39;)<br><br>D()<br>è¾“å‡ºç»“æœï¼š<br>enter D<br>enter B<br>enter C<br>enter A<br>leave A<br>leave C<br>leave B<br>enter C<br>enter A<br>leave A<br>leave C<br>leave D","like_count":6,"discussions":[{"author":{"id":1513504,"avatar":"https://static001.geekbang.org/account/avatar/00/17/18/20/75ea3b20.jpg","nickname":"é«˜å±±æµæ°´","note":"","ucode":"71E513B5937481","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488481,"discussion_content":"äº‹å®ä¸Šï¼Œä½ çš„ä¾‹å­ï¼ˆè±å½¢ç»§æ‰¿ï¼‰ä¸­ç¡®å®ä¼šå‡ºç°è¿™ä¸ªé—®é¢˜ï¼Œä½†æ˜¯å¦‚æœä½ å†è¯»ä»”ç»†ä¸€äº›ï¼Œæˆ‘çš„ä»£ç ç­‰ä»·äºï¼š\n\nclass A():\n    def __init__(self):\n        print(&amp;#39;enter A&amp;#39;)\n        print(&amp;#39;leave A&amp;#39;)\n\nclass B(A):\n    def __init__(self):\n        print(&amp;#39;enter B&amp;#39;)\n        super().__init__()\n        print(&amp;#39;leave B&amp;#39;)\n\nclass C():\n    def __init__(self):\n        print(&amp;#39;enter C&amp;#39;)\n        # super().__init__()\n        print(&amp;#39;leave C&amp;#39;)\n\nclass D(B, C):\n    def __init__(self):\n        print(&amp;#39;enter D&amp;#39;)\n        super(D, self).__init__()\n        C.__init__(self)\n        print(&amp;#39;leave D&amp;#39;)\n\nD()\n\nè¾“å‡ºï¼š\nenter D\nenter B\nenter A\nleave A\nleave B\nenter C\nleave C\nleave D\n\nä¸ä¼šå‡ºç°é‡å¤ init","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586151406,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1922661,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/56/65/fa4437d7.jpg","nickname":"Wonderfulpeng","note":"","ucode":"1BA9AB30B52159","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":374537,"discussion_content":"è€å¸ˆçš„è§£ç­”æ˜¯æ­£ç¡®çš„ å› ä¸ºè¿™é‡Œç»™å‡ºçš„æ˜¯è±å½¢çš„ç»§æ‰¿ è€Œå®é™…è¿™é‡Œçš„lruæˆ–è€…æ˜¯è€å¸ˆç»™ä½ é‡æ–°æ‰“çš„Cè¿™ä¸ªç±»å¹¶æ²¡æœ‰å’ŒBæ„æˆè±å½¢ç»§æ‰¿ï¼Œå› æ­¤å¿…é¡»å•ç‹¬è°ƒç”¨Cè¿™ä¸ªç±»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621238118,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1016917,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/84/55/1e40bd61.jpg","nickname":"shiziwen","note":"","ucode":"ADADC770D82D66","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":220957,"discussion_content":"ä¸çŸ¥é“è€å¸ˆæ˜¯ä¸æ˜¯ä¸ç»å¸¸çœ‹è¯„è®ºï¼Œæˆ‘è¿™é‡Œä¹Ÿä¸æ˜¯å¾ˆæ˜ç™½ï¼Œä¸ºä»€ä¹ˆâ€œç¬¬äºŒç§æ–¹æ³•ï¼Œå¯¹äºå¤šé‡ç»§æ‰¿ï¼Œå¦‚æœæœ‰å¤šä¸ªæ„é€ å‡½æ•°éœ€è¦è°ƒç”¨ï¼Œ æˆ‘ä»¬å¿…é¡»ç”¨ä¼ ç»Ÿçš„æ–¹æ³•LRUCache.__init__(self) ã€‚â€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585932617,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":212647,"user_name":"åŠæ™‚è¡Œæ¨‚","can_delete":false,"product_type":"c1","uid":1895499,"ip_address":"","ucode":"2FD0E0BB8327DE","user_header":"https://static001.geekbang.org/account/avatar/00/1c/ec/4b/442dd5f1.jpg","comment_is_top":false,"comment_ctime":1588169551,"is_pvip":false,"replies":[{"id":"79956","content":"å“ˆå“ˆè°¢è°¢æ”¯æŒ","user_name":"ä½œè€…å›å¤","user_name_real":"Jingxiao","uid":"1259521","ctime":1589179168,"ip_address":"","comment_id":212647,"utype":1}],"discussion_count":2,"race_medal":0,"score":"23063006031","product_id":100026901,"comment_content":"çœ‹åˆ°è¿™ï¼Œæˆ‘å‘ç°æˆ‘äº”åå…ƒä¹°çš„è¯¾ç¨‹ç®€ç›´è¡€èµšï¼ï¼ï¼çœ‹æ¡è¯„è®ºè¯´çœ‹ä¸æ‡‚ä¸ç¡è§‰ï¼Œå»ºè®®ä½ å–„è‰¯åˆ é™¤ï¼Œæˆ‘ç›´æ¥è¢«ä½ æçš„ç¡è¡£å…¨æ— ï¼Œæ„Ÿè§‰èƒ½æˆ˜åˆ°å¤©äº®","like_count":5,"discussions":[{"author":{"id":1259521,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJJOlibibPFEWOib8ib7RtfAtxND5FUqCxxoeTuLAbBI9ic23xuwdXT4IyiaWq3Fic9RgEAYI0lBTbEp2rcg/132","nickname":"Jingxiao","note":"","ucode":"EB966BB87132F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":493573,"discussion_content":"å“ˆå“ˆè°¢è°¢æ”¯æŒ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589179168,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1922298,"avatar":"","nickname":"patience","note":"","ucode":"46BEA083F550A8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":281577,"discussion_content":"çœ‹åˆ°æœ€ååå‘ç´¢å¼•çš„searchæ–¹æ³•ï¼Œå°±çœ‹ä¸æ‡‚äº†ï¼Œä¸€ç‚¹æ‹›æ²¡æœ‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591768938,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":101063,"user_name":"Danpier","can_delete":false,"product_type":"c1","uid":1463474,"ip_address":"","ucode":"11E208FDE34961","user_header":"https://static001.geekbang.org/account/avatar/00/16/54/b2/5ea0b709.jpg","comment_is_top":false,"comment_ctime":1559707885,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"23034544365","product_id":100026901,"comment_content":"BOWInvertedIndexEngine searchå‡½æ•°ååŠéƒ¨åˆ†å°‘äº†ç¼©è¿›ï¼Œç¬¬40è¡Œå¼€å§‹","like_count":5,"discussions":[{"author":{"id":1117023,"avatar":"https://static001.geekbang.org/account/avatar/00/11/0b/5f/2cc4060c.jpg","nickname":"å­è±ªsirius","note":"","ucode":"E8D08D2D33E785","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":19165,"discussion_content":"æ˜¯è¿™æ ·å•Šï¼Œæ€ªä¸å¾—è¿™æ®µæœ‰é—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569145453,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":119980,"user_name":"ä¸€åªçœ¼çœ‹ä¸–ç•Œ","can_delete":false,"product_type":"c1","uid":1590236,"ip_address":"","ucode":"D221841AE5103F","user_header":"https://static001.geekbang.org/account/avatar/00/18/43/dc/4f70c936.jpg","comment_is_top":false,"comment_ctime":1564743440,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"18744612624","product_id":100026901,"comment_content":"        query_list = []<br>        for word in query_words:<br>            if word in self.inverted_index:<br>                query_list.append(self.inverted_index[word])<br>        # å–é›†åˆçš„äº¤é›†<br>        result = set(reduce(lambda x, y: set(x) &amp; set(y), query_list))<br>        return result<br>ç”¨äº¤é›†ä¼šçœå»Nè¡Œä»£ç çš„åˆ¤æ–­","like_count":4,"discussions":[{"author":{"id":2027617,"avatar":"","nickname":"Geek_e2c610","note":"","ucode":"A4E4FF065EB966","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":280299,"discussion_content":"èƒ½æƒ³åˆ°reduceæ±‚é›†åˆçš„äº¤æˆ‘æœäº†you","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591523760,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":101297,"user_name":"é™†æ´‹","can_delete":false,"product_type":"c1","uid":1078556,"ip_address":"","ucode":"F5D82385EAD25C","user_header":"https://static001.geekbang.org/account/avatar/00/10/75/1c/0238b794.jpg","comment_is_top":false,"comment_ctime":1559779817,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"18739649001","product_id":100026901,"comment_content":"æ˜¯searchï¼ˆï¼‰åˆè¢«é‡è½½äº†ï¼Œä¸æ˜¯queryï¼ˆï¼‰","like_count":4},{"had_liked":false,"id":101061,"user_name":"tux","can_delete":false,"product_type":"c1","uid":1477811,"ip_address":"","ucode":"BB7202009FC885","user_header":"https://static001.geekbang.org/account/avatar/00/16/8c/b3/a74a7125.jpg","comment_is_top":false,"comment_ctime":1559707152,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"18739576336","product_id":100026901,"comment_content":"è¿è¡Œæ–‡ä¸­ä»£ç ï¼Œå§‹ç»ˆåœ¨è¿è¡ŒçŠ¶æ€!<br><br>ä¿®æ”¹äº†ä¸€å¤„ï¼š<br>class SearchEngineBase(object):<br>\t...<br>    def add_corpus(self, file_path):<br>        with open(&#39;æ–‡ä»¶çš„ç›®å½•&#39; + file_path, &#39;r&#39;) as fin:  #ä¿®æ”¹äº†æ­¤å¤„<br>            text = fin.read()<br>            print(&#39;text:&#39;, text)   #èƒ½æ‰“å°å‡ºå†…å®¹<br>\t\t\t<br>\t\t\t<br>ä¸ä¿®æ”¹ä»£ç ï¼ŒæŠ¥FileNotFoundErrorã€‚å»æŸ¥èµ„æ–™ï¼Œåº”è¯¥ç”¨å…¨è·¯å¾„ã€‚ æ€»æœ‰ä¸ªæƒ³å…ˆçœ‹åˆ°åé¦ˆç»“æœçš„ å¼ºè¿«ç—‡ã€‚","like_count":4,"discussions":[{"author":{"id":1591293,"avatar":"https://static001.geekbang.org/account/avatar/00/18/47/fd/895f0c27.jpg","nickname":"Cy23","note":"","ucode":"8DC561C5151758","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":288203,"discussion_content":"çŸ¥é“äº†ï¼Œç­‰å¾…ä½ è¾“å…¥æŸ¥è¯¢å†…å®¹å‘¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593676377,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":105603,"user_name":"é—²äºº","can_delete":false,"product_type":"c1","uid":1546492,"ip_address":"","ucode":"F04C0463C6BB5F","user_header":"https://static001.geekbang.org/account/avatar/00/17/98/fc/b1d22b7e.jpg","comment_is_top":false,"comment_ctime":1561039851,"is_pvip":false,"discussion_count":5,"race_medal":0,"score":"14445941739","product_id":100026901,"comment_content":"BOWInvertedIndexEngineç±»çš„searchå‡½æ•°ä¸­ï¼š<br>query_words_index = list()<br>for query_word in query_words:<br>    query_words_index.append(0)<br>è¿™ä¸€æ®µæ²¡çœ‹æ˜ç™½ï¼š<br>query_words_indexæ˜¯ä¸€ä¸ªå…¨ä¸º0çš„åˆ—è¡¨ï¼Ÿ<br>æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1446375,"avatar":"https://static001.geekbang.org/account/avatar/00/16/11/e7/044a9a6c.jpg","nickname":"bookå°¾æ±","note":"","ucode":"AE2B8DFC643ACC","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":38947,"discussion_content":"æ˜¯è¿™æ ·çš„ï¼Œè¿™ä¸ªå°±æ˜¯ä½œè€…æé«˜çš„åˆå¹¶nä¸ªæœ‰åºæ•°ç»„ï¼Œæ¯ä¸ªquery_wordå¯¹åº”ä¸€ä¸ªæ–‡ä»¶åçš„åˆ—è¡¨ï¼Œquery_word_indexé‡Œé¢å­˜çš„å°±æ˜¯æ¯ä¸ªquert_wordå½“å‰åˆ—è¡¨çš„ç´¢å¼•ï¼Œåˆå§‹å€¼éƒ½ä¸º0ï¼Œå…ˆæŠŠæ‰€æœ‰åˆ—è¡¨çš„ç´¢å¼•ä¸º0æ–‡ä»¶åå–å‡ºæ”¾åˆ°ä¸€ä¸ªåˆ—è¡¨é‡Œï¼Œå¦‚æœæ–‡ä»¶åä¸€è‡´å°±æ”¾åˆ°ç»“æœçš„åˆ—è¡¨é‡Œï¼Œå¦åˆ™æ‰¾å‡ºæœ€å°çš„æ–‡ä»¶åï¼Œæ‰¾å‡ºå…¶åœ¨åˆ—è¡¨çš„ç´¢å¼•å³ç¬¬å‡ ä¸ªquery_wordï¼Œç„¶åå°†å®ƒçš„query_word_index + 1,ä¸‹æ¬¡å°±å–å‡ºå®ƒçš„ç´¢å¼•ä¸º1çš„æ–‡ä»¶åæ¥å’Œå…¶query_wordæ‰€å¯¹åº”æ–‡ä»¶ååˆ—è¡¨çš„ç´¢å¼•ä¸º0çš„æ–‡ä»¶åæ¯”è¾ƒ","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1571852300,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1072619,"avatar":"https://static001.geekbang.org/account/avatar/00/10/5d/eb/4b8d754a.jpg","nickname":"å®‰ä»”","note":"","ucode":"820264F1FD98A7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1446375,"avatar":"https://static001.geekbang.org/account/avatar/00/16/11/e7/044a9a6c.jpg","nickname":"bookå°¾æ±","note":"","ucode":"AE2B8DFC643ACC","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":215390,"discussion_content":"å¥½æ‹—å£ï¼Œä¾ç„¶æ²¡æ‡‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585320499,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":38947,"ip_address":""},"score":215390,"extra":""}]},{"author":{"id":1546492,"avatar":"https://static001.geekbang.org/account/avatar/00/17/98/fc/b1d22b7e.jpg","nickname":"é—²äºº","note":"","ucode":"F04C0463C6BB5F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":130,"discussion_content":"æˆ‘å¥½åƒæœ‰ç‚¹æ˜ç™½äº†ï¼Œå¦‚æœæˆ‘è¦æœç´¢ä¸¤ä¸ªå•è¯ï¼Œæ¯”å¦‚little dreamï¼Œé‚£ä¹ˆquery_words_indexå°±åº”è¯¥æ˜¯[0, 0]ï¼Œå€’åºç´¢å¼•ä¸­åº”è¯¥æ˜¯è¿™æ ·çš„{&#34;little&#34;: [1.txt, 2.txt], &#34;dream&#34;: [1.txt, 2.txt, 3.txt]}ï¼Œæ‰€ä»¥ï¼Œquery_words_index[idx]è¡¨ç¤ºçš„æ„æ€æ˜¯ï¼Œå½“idx=0çš„æ—¶å€™ï¼Œè¡¨ç¤ºlittleå¯¹åº”çš„1.txtï¼Œå½“idx=1çš„æ—¶å€™ï¼Œè¡¨ç¤ºdreamå¯¹åº”çš„1.txtã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1561130738,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2073526,"avatar":"","nickname":"ç¬‘ç¬‘521","note":"","ucode":"74567804FCE7EE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":295464,"discussion_content":"ç¬¬ä¸€ååº”å’Œç¬¬äºŒååº”éƒ½æ˜¯æ˜¯ä¸æ˜¯å†™é”™äº†ã€‚ã€‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596200638,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1268778,"avatar":"","nickname":"sky","note":"","ucode":"6D31488C0DAFCC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":87,"discussion_content":"æˆ‘ä¹Ÿè§‰å¾—è¿™æ®µæœ‰é—®é¢˜ï¼Œ ä¸æ˜ç™½å€’åºç´¢å¼•ã€‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561088215,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":100900,"user_name":"farFlight","can_delete":false,"product_type":"c1","uid":1245211,"ip_address":"","ucode":"B0872D3ECBEC38","user_header":"https://wx.qlogo.cn/mmopen/vi_32/DYAIOgq83epbRibsic15KXfGEN3SSjnLhXGyhK2Uyrj5ibBJsKAjicNqtafDaQOLH4xpSJRZD1vmibFPJER1ySmwP9A/132","comment_is_top":false,"comment_ctime":1559674752,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14444576640","product_id":100026901,"comment_content":"æŒ‰ç…§æˆ‘ä¹‹å‰çš„ç†è§£ï¼ŒPythonæ˜¯æ²¡æœ‰ä¸¥æ ¼çš„privateå˜é‡çš„ã€‚å­ç±»ç¡®å®æ— æ³•ç›´æ¥è®¿é—®çˆ¶ç±»&quot;self.__var&quot;å˜é‡ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡&quot;self._Superclass__var&quot;è®¿é—®ã€‚è¦æƒ³æ¯”è¾ƒå¥½åœ°è®¿é—®æˆ–è€…ä¿®æ”¹è¿™äº›å˜é‡ï¼Œå¯ä»¥åƒJAVAä¸€æ ·å†™getterå’Œsetterå§ï¼Ÿ<br>å¦å¤–æˆ‘æœ‰ä¸¤ä¸ªé—®é¢˜ï¼š<br>1. ä¸€äº›æ‰‹å†Œä¸­è¯´pythonçš„å¤šé‡ç»§æ‰¿éå¸¸æ··ä¹±ä¸å¯é ï¼Œå°¤å…¶æ¶‰åŠå¾ˆå¤šé‡è½½çš„æ—¶å€™ï¼Œå› æ­¤éœ€è¦é¿å…ï¼Œæˆ–è€…é‡‡ç”¨compositionçš„æ–¹å¼ã€‚å®é™…å·¥ç¨‹ä¸­æ˜¯å¦ä¼šæœ‰è¿™æ ·çš„è€ƒè™‘å‘¢ï¼Ÿ<br>2. ä»¥æœç´¢å¼•æ“ä¸ºä¾‹ï¼Œå¦‚ä½•è§„åˆ’å„ä¸ªç±»ä»¥åŠå‡½æ•°çš„åŠŸèƒ½ï¼Œæ˜¯å¦æ˜¯ è®¾è®¡æ¨¡å¼ æ–¹é¢çš„çŸ¥è¯†å‘¢ï¼Ÿ","like_count":3},{"had_liked":false,"id":151521,"user_name":"quanxyun","can_delete":false,"product_type":"c1","uid":1044206,"ip_address":"","ucode":"EAC58374105C8C","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ee/ee/1cd89270.jpg","comment_is_top":false,"comment_ctime":1573735799,"is_pvip":false,"replies":[{"id":"63100","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"é«˜å±±æµæ°´","uid":"1513504","ctime":1577251508,"ip_address":"","comment_id":151521,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10163670391","product_id":100026901,"comment_content":"Pythonå¹¶æ²¡æœ‰çœŸæ­£çš„ç§æœ‰åŒ–æ”¯æŒï¼Œä½†å¯ç”¨ä¸‹åˆ’çº¿å¾—åˆ°ä¼ªç§æœ‰ï¼š<br>ï¼ˆ1ï¼‰_xxx &quot;å•ä¸‹åˆ’çº¿ &quot; å¼€å§‹çš„æˆå‘˜å˜é‡å«åšä¿æŠ¤å˜é‡ï¼Œæ„æ€æ˜¯åªæœ‰ç±»å¯¹è±¡å’Œå­ç±»å¯¹è±¡è‡ªå·±èƒ½è®¿é—®åˆ°è¿™äº›å˜é‡ï¼Œéœ€é€šè¿‡ç±»æä¾›çš„æ¥å£è¿›è¡Œè®¿é—®ï¼›<br>ï¼ˆ2ï¼‰__xxx ç±»ä¸­çš„ç§æœ‰å˜é‡&#47;æ–¹æ³•åï¼Œåªæœ‰ç±»å¯¹è±¡è‡ªå·±èƒ½è®¿é—®ï¼Œè¿å­ç±»å¯¹è±¡ä¹Ÿä¸èƒ½è®¿é—®åˆ°è¿™ä¸ªæ•°æ®ã€‚<br>ï¼ˆ3ï¼‰__xxx__ é­”æ³•å‡½æ•°ï¼Œå‰åå‡æœ‰ä¸€ä¸ªâ€œåŒä¸‹åˆ’çº¿â€ ä»£è¡¨pythoné‡Œç‰¹æ®Šæ–¹æ³•ä¸“ç”¨çš„æ ‡è¯†ï¼Œå¦‚ __init__() ä»£è¡¨ç±»çš„æ„é€ å‡½æ•°ã€‚","like_count":2,"discussions":[{"author":{"id":1513504,"avatar":"https://static001.geekbang.org/account/avatar/00/17/18/20/75ea3b20.jpg","nickname":"é«˜å±±æµæ°´","note":"","ucode":"71E513B5937481","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":474513,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577251508,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":141737,"user_name":"old Z","can_delete":false,"product_type":"c1","uid":1694776,"ip_address":"","ucode":"BEE1423C265A97","user_header":"https://static001.geekbang.org/account/avatar/00/19/dc/38/719040a4.jpg","comment_is_top":false,"comment_ctime":1571216395,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10161150987","product_id":100026901,"comment_content":"å¼€å§‹ä¹Ÿçœ‹ä¸å¤ªæ‡‚forå¾ªç¯åé¢çš„æ“ä½œï¼Œæœ€åè°ƒè¯•äº†ä¸€æ®µæ—¶é—´å‘ç°while trueä¸­çš„forå¾ªç¯åšäº†å¾ˆå¤šæ¬¡ï¼Œè¿™ä¸ªæ¬¡æ•°æ ¹æ®ç”¨æˆ·è¾“å…¥æ¥å®šï¼Œåšè¿™ä¹ˆå¤šå¾ªç¯ä½æ„Ÿè§‰åªæ˜¯ä¸ºäº†å¾—åˆ°æœç´¢ç»“æœçš„ä¸ªæ•°å’Œlistï¼Œè‡ªæˆ‘æ„Ÿè§‰ä¸æ˜¯å¾ˆåˆ©äºç†è§£ï¼Œè€Œä¸”å¾ªç¯æ¬¡æ•°è¿‡å¤šï¼Œå¦‚æœç”¨æˆ·è¾“å…¥è¿‡å¤šï¼ŒåŠ¿å¿…ä¼šé€ æˆæ—¶é—´çš„å·¨å¤§æ¶ˆè€—ã€‚æ‰€ä»¥æˆ‘æ ¹æ®è‡ªå·±çš„æƒ³æ³•ï¼Œåªé€šè¿‡ä¸€æ¬¡forå¾ªç¯ï¼Œä»£ç å¦‚ä¸‹ï¼š<br>class OLDZBOWInvertedIndexEngine(SearchEngineBase):<br>    def __init__(self):<br>        super(OLDZBOWInvertedIndexEngine, self).__init__()<br>        self.inverted_index = {}<br><br>    def process_corpus(self, id, text):<br>        # set<br>        words = self.parse_text_to_words(text)<br>        for word in words:<br>            if word not in self.inverted_index:<br>                self.inverted_index[word] = []<br>            self.inverted_index[word].append(id)<br><br>    def search(self, query):<br><br>        query_words = list(self.parse_text_to_words(query))<br>        query_words_index = list()<br>        for query_word in query_words:<br>            query_words_index.append(0)<br>        for query_word in query_words:<br>            if query_word not in self.inverted_index:<br>                return []<br>        while True:<br>            input_inverted_list=[]<br>            for idx, query_word in enumerate(query_words):<br><br>                current_inverted_list = self.inverted_index[query_word]<br>                input_inverted_list.append(current_inverted_list)<br><br>            result=self.l_output_same(input_inverted_list)<br>            return result<br><br>    # å¯¹Lä¸­çš„å…ƒç´ è¿›è¡Œè®¡æ•°ï¼Œå°†æœ€å¤šçš„å…ƒç´ è¾“å‡º<br>    @staticmethod<br>    def l_output_same(L):<br>        L_ALL = []<br>        L_SAME = []<br>        for l in L:<br>            L_ALL += l<br>        count_dict = Counter(L_ALL)<br>        count_dict_sort = sorted(count_dict.items(), key=lambda x: x[1], reverse=True)<br>        max_count = count_dict_sort[0][1]<br>        for id, count in count_dict_sort:<br>            if count == max_count:<br>                L_SAME.append(id)<br>        return L_SAME<br><br>å…·ä½“æ—¶é—´å’Œè€å¸ˆçš„ç›¸æ¯”æˆ‘æ²¡æœ‰æµ‹è¯•ï¼Œåªæ˜¯è§‰å¾—æˆ‘è¿™ä¸ªæ–¹æ³•å¯èƒ½æ›´åˆ©äºæ–°æ‰‹ç†è§£å§ï¼Œæœ‰ä¸å¯¹çš„åœ°æ–¹æ¬¢è¿æŒ‡å‡ºï¼Œä»£ç ä¸­çœç•¥äº†parse_text_to_words(text)è¿™ä¸ªå‡½æ•°ï¼Œå› ä¸ºå­—æ•°å¤ªå¤šå‘ä¸äº†è¯„è®ºï¼Œéœ€è¦çš„è‡ªå·±åŠ ä¸Šæµ‹è¯•","like_count":2},{"had_liked":false,"id":137768,"user_name":"è‡ªç”±æ°‘","can_delete":false,"product_type":"c1","uid":1346236,"ip_address":"","ucode":"435C67531697F1","user_header":"https://static001.geekbang.org/account/avatar/00/14/8a/bc/cb39ed38.jpg","comment_is_top":false,"comment_ctime":1569840679,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10159775271","product_id":100026901,"comment_content":"å°ç»“:<br>â‘ ç”¨superå‡½æ•°ï¼Œå…ˆè¿è¡Œçˆ¶ç±»æ„é€ å‡½æ•°ï¼Œå†è¿è¡Œå­ç±»çš„æ„é€ å‡½æ•°ã€‚<br>â‘¡é›†æˆçš„æ—¶å€™ï¼Œçˆ¶ç±»é‡ŒæŠ›å‡ºå¼‚å¸¸ï¼Œå¦‚æœå­ç±»ä¸å®ç°ï¼Œå°±ä¼šå‡ºç°å¼‚å¸¸ã€‚<br>â‘¢å­ç±»å®ç°çˆ¶ç±»çš„å‡½æ•°éœ€æŒ‰åŒæ ·çš„å‡½æ•°åå’Œå‚æ•°åˆ—è¡¨æ¥å®ç°ã€‚<br>â‘£å˜é‡åœ¨æ„é€ å‡½æ•°ä¸­å£°æ˜ï¼Œå…¶å®ƒæ–¹æ³•å¯ä»¥ä½¿ç”¨ã€‚å˜é‡å®šä¹‰ä¸ºç§æœ‰çš„(__å˜é‡å)åˆ™éæˆå‘˜æ–¹æ³•ä¸èƒ½è®¿é—®ã€‚<br>é™æ€å‡½æ•°æ²¡æœ‰çŠ¶æ€ï¼Œä¸æ¶‰åŠå¯¹è±¡çš„ç§æœ‰å˜é‡ï¼Œç›¸åŒçš„è¾“å…¥èƒ½å¾—åˆ°å®Œå…¨ç›¸åŒçš„è¾“å‡ºç»“æœã€‚é™æ€çš„ï¼Œæ–¹ä¾¿å…¶ä»–çš„ç±»æ¥ä½¿ç”¨ã€‚<br>åœ¨åˆç†åˆ†å±‚è®¾è®¡åï¼Œæ¯ä¸€å±‚çš„é€»è¾‘åªéœ€è¦å¤„ç†å¥½ä»½å†…çš„äº‹æƒ…å³å¯ã€‚<br>è¿­ä»£å¼€å‘çš„æµç¨‹ï¼Œå…ˆå®šä¹‰åŸºç±»ï¼Œè§„åˆ’å¥½æ¥å£ï¼Œåœ¨æ ¹æ®éœ€è¦è¿›ä¸€æ­¥å®Œå–„ï¼Œé€šè¿‡ç»§æ‰¿åŸºç±»æ·»åŠ åŠŸèƒ½æˆ–ä¿®æ”¹è®¾è®¡ã€‚è¿™ä¸ªæ—¶å€™å°±ä¸ç”¨ä¿®æ”¹è°ƒç”¨è¯¥åŠŸèƒ½çš„ä»£ç äº†ã€‚<br>æ€è€ƒé¢˜:ç§æœ‰å˜é‡ä¸èƒ½è¢«ç»§æ‰¿ï¼Œè¦ç»§æ‰¿å¯ä»¥å®šä¹‰ä¸ºé™æ€å˜é‡ã€‚<br>ç±»çš„ç»§æ‰¿å…³ç³»è§githubä¸»é¡µé‡Œçš„å›¾ç‰‡æ–‡ä»¶<br>è¯¾ç¨‹çš„ç»ƒä¹ ä»£ç : https:&#47;&#47;github.com&#47;zwdnet&#47;PythonPractice","like_count":2},{"had_liked":false,"id":101123,"user_name":"æµ·ç”Ÿ","can_delete":false,"product_type":"c1","uid":1119247,"ip_address":"","ucode":"27E459D96E9E55","user_header":"https://static001.geekbang.org/account/avatar/00/11/14/0f/91f0194d.jpg","comment_is_top":false,"comment_ctime":1559721998,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10149656590","product_id":100026901,"comment_content":"å¯ä¸å¯ä»¥è®²è§£ä¸€äº›å¼€æºçš„æ¡†æ¶ä»€ä¹ˆçš„ï¼Œpython è¿™è¾¹æ·±åº¦å­¦ä¹ æ¡†æ¶å¾ˆå¤šã€‚è¿™äº›æ¡†æ¶çš„ä»£ç å¾ˆä¼˜ç§€ï¼Œä¹Ÿæ˜¯è¯­è¨€çš„æ ¸å¿ƒæŠ€æœ¯è¿ç”¨æœ€å¤šçš„åœ°æ–¹ã€‚","like_count":2},{"had_liked":false,"id":322204,"user_name":"å¤§æµ·","can_delete":false,"product_type":"c1","uid":1519491,"ip_address":"","ucode":"4F835D75186356","user_header":"https://static001.geekbang.org/account/avatar/00/17/2f/83/81e146e4.jpg","comment_is_top":false,"comment_ctime":1637234772,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5932202068","product_id":100026901,"comment_content":"å€’æ’ç´¢å¼•çš„è¿™æ®µæŸ¥æ‰¾é€»è¾‘å¼€å§‹æ²¡çœ‹æ‡‚ï¼Œè‡ªå·±ç”¨æ³¨é‡Šæ¨¡æ‹Ÿè¿‡äº†ä¸€éæ€è·¯ï¼Œçœ‹æ‡‚äº†ï¼<br><br>        result = []<br>        while True:<br>            current_ids = []<br>            # æŸ¥è¯¢è¯ç¤ºä¾‹ï¼š &#39;hello&#39;,&#39;world&#39;<br>            # å€’æ’ç´¢å¼•å†…å®¹ç¤ºä¾‹{&#39;hello&#39;:[&#39;1.txt&#39;,&#39;2.txt&#39;,&#39;4.txt&#39;,&#39;6.txt&#39;,&#39;7.txt&#39;] , &#39;world&#39;:[&#39;3.txt&#39;,&#39;4.txt&#39;,&#39;5.txt&#39;]}<br>            for idx, query_word in enumerate(query_words): # 2ä¸ªæŸ¥è¯¢è¯ï¼Œå› æ­¤ä¸‹æ–¹çš„å¾ªç¯ä½“ä¸­æ³¨é‡Šä¸¤æ¬¡å€¼ç”¨é€—å·åˆ†éš”<br>                # idx: 0,1<br>                # query_word: &#39;hello&#39;,&#39;world&#39;<br>                current_index = query_words_index[idx]  # current_index: 0,0 =&gt; 1,0 =&gt; 2,0 =&gt; 2,1 =&gt; 3,2 =&gt; 3,3<br>                current_inverted_list = self.inverted_index[query_word]<br>                # hello: [&#39;1.txt&#39;,&#39;2.txt&#39;,&#39;4.txt&#39;,&#39;6.txt&#39;,&#39;7.txt&#39;]<br>                # world: [&#39;3.txt&#39;,&#39;4.txt&#39;,&#39;5.txt&#39;]<br><br>                # å·²ç»éå†åˆ°äº†æŸä¸€ä¸ªå€’åºç´¢å¼•çš„æœ«å°¾ï¼Œç»“æŸ search<br>                if current_index &gt;= len(current_inverted_list):  # condition: F,F =&gt; F,F =&gt; F,F =&gt; F,F =&gt; F,F =&gt;F,T<br>                    return result                                # T:return [&#39;4.txt&#39;] è¿™é‡Œç¨‹åºè¿”å›å¹¶ç»“æŸ<br><br>                current_ids.append(current_inverted_list[current_index])<br>                # current_ids: 1.txt,3.txt =&gt; 2.txt,3.txt =&gt; 4.txt,3.txt =&gt; 4.txt,4.txt =&gt; 6.txt,5.txt<br><br>            # ç„¶åï¼Œå¦‚æœ current_ids çš„æ‰€æœ‰å…ƒç´ éƒ½ä¸€æ ·ï¼Œé‚£ä¹ˆè¡¨æ˜è¿™ä¸ªå•è¯åœ¨è¿™ä¸ªå…ƒç´ å¯¹åº”çš„æ–‡æ¡£ä¸­éƒ½å‡ºç°äº†<br>            if all(x == current_ids[0] for x in current_ids):     # condition: F =&gt; F =&gt; F =&gt; T &gt; F<br>                result.append(current_ids[0])<br>                query_words_index = [x + 1 for x in query_words_index]  # T:3,2<br>                continue<br>            <br>            # å¦‚æœä¸æ˜¯ï¼Œæˆ‘ä»¬å°±æŠŠæœ€å°çš„å…ƒç´ åŠ ä¸€<br>            min_val = min(current_ids)                  # min_val: 1.txt =&gt; 2.txt =&gt; 3.txt =&gt; T =&gt; 5.txt<br>            min_val_pos = current_ids.index(min_val)    # min_val_pos: 0 =&gt; 0 =&gt; 1 =&gt; T =&gt; 1<br>            query_words_index[min_val_pos] += 1         # query_words_index: 1,0 =&gt; 2,0 =&gt; 2,1 =&gt; T =&gt; 3,3<br><br>","like_count":1},{"had_liked":false,"id":315799,"user_name":"rså‹¿å¿˜åˆå¿ƒ","can_delete":false,"product_type":"c1","uid":1519200,"ip_address":"","ucode":"557D1ECD757195","user_header":"https://static001.geekbang.org/account/avatar/00/17/2e/60/4fa1f3bd.jpg","comment_is_top":false,"comment_ctime":1634004055,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5928971351","product_id":100026901,"comment_content":"Pythonï¼šç±»çš„ç»§æ‰¿ï¼Œè°ƒç”¨çˆ¶ç±»çš„å±æ€§å’Œæ–¹æ³•åŸºç¡€è¯¦è§£ï¼Œå¯ä»¥å‚è€ƒï¼šhttps:&#47;&#47;blog.csdn.net&#47;yilulvxing&#47;article&#47;details&#47;85374142","like_count":1},{"had_liked":false,"id":309207,"user_name":"Geek_f6bfca","can_delete":false,"product_type":"c1","uid":1664242,"ip_address":"","ucode":"94C85F1FC21ABB","user_header":"","comment_is_top":false,"comment_ctime":1629985651,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5924952947","product_id":100026901,"comment_content":"# ä¸€.çˆ¶ç±»<br>class SearchEngineBase(object):# çˆ¶ç±»<br>    def __init__(self):# æ„é€ å‡½æ•°ï¼Œä¼ é€’å‚æ•°<br>        pass<br><br>    # ä»¥ä¸‹æ˜¯éœ€è¦å®ç°çš„æ–¹æ³•<br>    # 1.è¯»å–æ–‡ä»¶å†…å®¹<br>    def add_corpus(self, file_path):<br>        with open(file_path,&#39;r&#39;,encoding=&#39;utf-8&#39;) as file:<br>            context = file.read()<br>        self.process_corpus(file_path, context) # è°ƒç”¨ç±»å†…éƒ¨çš„æ–¹æ³• process_corpus<br><br>    # 2.å¤„ç†æ–‡ä»¶å†…å®¹<br>    # å¦‚æœçˆ¶ç±»å®ä¾‹åŒ–åè°ƒç”¨ process_corpus æ–¹æ³•åˆ™ä¼šæŠ¥é”™ï¼Œè¯¥å¤„ç†æ–¹å¼å¼ºåˆ¶è¦æ±‚å­ç±»é‡å†™çˆ¶ç±»å‡½æ•°æ¥è¦†ç›–çˆ¶ç±»åŸæœ‰å‡½æ•°,æ‰€ä»¥è¿™é‡Œä»€ä¹ˆåŠŸèƒ½éƒ½æ²¡æœ‰<br>    # id ç­‰åŒäº file_path<br>    def process_corpus(self, id, text):<br>        raise Exception(&#39;process corpus not implement&#39;)<br><br>    # 3.è¾“å…¥éœ€è¦æ£€ç´¢çš„å•è¯<br>    def search(self, query):<br>        raise Exception(&#39;search corpus not implement&#39;)<br><br># äºŒ.å­ç±»<br>class SimpleSearchEngine(SearchEngineBase):<br>    def __init__(self):<br>        super().__init__() # å¯¹ç»§æ‰¿è‡ªçˆ¶ç±»çš„å±æ€§åˆå§‹åŒ–<br>        self.__id_to_text = {} # å¢åŠ åˆå§‹åŒ–å˜é‡ï¼Œè®¾å®šä¸ºç©ºå­—å…¸ï¼Œç”¨æ¥å‚¨å­˜æ–‡ä»¶åœ°å€ã€å†…å®¹<br><br>    # çˆ¶ç±»ä¸­è¯¥æ–¹æ³•æ˜¯ä¸ªç©ºï¼Œåªèƒ½åœ¨å®ä¾‹åŒ–åæŠ¥é”™ï¼Œæ‰€ä»¥æˆ‘åœ¨å­ç±»ä¸­é‡å†™è¯¥æ–¹æ³•ï¼Œä»¥å®ç°çœŸæ­£çš„ç›®çš„<br>    def process_corpus(self, id, text):<br>        self.__id_to_text[id] = text<br><br>    def search(self, query):<br>        results = []<br>        for id, text in self.__id_to_text.items():<br>            if query in text:<br>                results.append(id)<br><br>        return results<br><br># ä¸‰.ä¸»å‡½æ•°<br># search_engine å®ä¾‹<br>def main():<br>    search_engine = SimpleSearchEngine()<br>    for file_path in [&#39;1.txt&#39;, &#39;2.txt&#39;, &#39;3.txt&#39;, &#39;4.txt&#39;, &#39;5.txt&#39;]:<br>        search_engine.add_corpus(file_path)<br><br>    while True:<br>        query = input(f&#39;Input your wordï¼š&#39;)<br>        results = search_engine.search(query)<br>        print(f&#39;found {len(results)} results.&#39;)<br>        for result in results:<br>            print(result)<br><br><br># search_engine = SimpleSearchEngine()<br>main()<br><br>","like_count":1},{"had_liked":false,"id":196885,"user_name":"å®‰ä»”","can_delete":false,"product_type":"c1","uid":1072619,"ip_address":"","ucode":"820264F1FD98A7","user_header":"https://static001.geekbang.org/account/avatar/00/10/5d/eb/4b8d754a.jpg","comment_is_top":false,"comment_ctime":1585321022,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5880288318","product_id":100026901,"comment_content":"è€å¸ˆèƒ½ä¸èƒ½æŠŠ BOWInvertedIndexEngine é‡Œé¢çš„ç®—æ³•é€»è¾‘è®²æ¸…æ¥šå‘€ï¼Œè¿™æ ·ä¼šé€¼æ­»ä¸€äº›å¼ºè¿«ç—‡çš„ï¼Œè™½ç„¶æ‚¨è¯´ä¸éœ€è¦æ¸…æ¥šè¿™å…¶ä¸­çš„ç®—æ³•ç»†èŠ‚","like_count":1},{"had_liked":false,"id":126925,"user_name":"ğŸ‡¨ğŸ‡³","can_delete":false,"product_type":"c1","uid":1306115,"ip_address":"","ucode":"D6C5E9CA44D082","user_header":"https://static001.geekbang.org/account/avatar/00/13/ee/03/09926387.jpg","comment_is_top":false,"comment_ctime":1566522025,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5861489321","product_id":100026901,"comment_content":"æ‚¨å¥½ï¼Œè¯·é—®ç»§æ‰¿objectå’Œä¸ç»§æ‰¿ç”¨æ³•åŒºåˆ«æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæ¦‚å¿µä¸Šè¿˜æ˜¯æœ‰ç‚¹æ¨¡ç³Š","like_count":1},{"had_liked":false,"id":120683,"user_name":"å»ºå¼º","can_delete":false,"product_type":"c1","uid":1397126,"ip_address":"","ucode":"62B03D0E0C64EC","user_header":"https://static001.geekbang.org/account/avatar/00/15/51/86/b5fd8dd8.jpg","comment_is_top":false,"comment_ctime":1564973216,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5859940512","product_id":100026901,"comment_content":"æ€è€ƒé¢˜ï¼šçˆ¶ç±»çš„ç§æœ‰å˜é‡ä¸èƒ½ç›´æ¥è¢«å­ç±»ç»§æ‰¿ï¼Œå¯ä»¥åœ¨çˆ¶ç±»ä¸­å®šä¹‰ä¸€ä¸ªè®¿é—®ç§æœ‰å˜é‡çš„æ–¹æ³•ï¼Œç„¶åè®©å­ç±»æ¥ç»§æ‰¿è¯¥æ–¹æ³•ï¼Œè¿™æ ·å°±å¯ä»¥é—´æ¥åœ°è®¿é—®çˆ¶ç±»çš„ç§æœ‰å˜é‡äº†ã€‚æµ‹è¯•ç¨‹åºå¦‚ä¸‹ï¼š<br>#ç§æœ‰å˜é‡ç»§æ‰¿æµ‹è¯•<br><br>class A:<br>    def __init__(self):<br>        self.__a1 =&#39;This is a1&#39;<br>        self.b1 = &#39;This is b1&#39;<br><br>    def getPrivate(self):<br>        return self.__a1<br><br>class B(A):<br>    def __init__(self):<br>        super().__init__()<br>        #print(self.__a1) ä¸èƒ½ç›´æ¥è®¿é—®çˆ¶ç±»çš„ç§æœ‰å˜é‡<br>        print(self.getPrivate()) #é€šè¿‡ç»§ç»­çˆ¶ç±»çš„æ–¹æ³•æ¥é—´æ¥è®¿é—®çˆ¶ç±»çš„ç§æœ‰å˜é‡<br>        print(self.b1)<br><br>b = B()<br>","like_count":1},{"had_liked":false,"id":118655,"user_name":"æ±Ÿå—çš®é©å‚ç ”å‘ä¸­å¿ƒä¿å®‰é˜Ÿé•¿","can_delete":false,"product_type":"c1","uid":1099584,"ip_address":"","ucode":"231419643A5CC5","user_header":"https://static001.geekbang.org/account/avatar/00/10/c7/40/66a203cd.jpg","comment_is_top":false,"comment_ctime":1564407620,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5859374916","product_id":100026901,"comment_content":"å­¦äº†ä¸¤å¹´pythonï¼Œçœ‹è¿‡è§†é¢‘è¯¾ç¨‹ï¼Œä¹¦ç±ï¼Œè¯­æ³•ä»€ä¹ˆçš„å¯ä»¥è¯´æ˜¯æ»šç“œçƒ‚ç†Ÿäº†ï¼Œä½†æ˜¯çœ‹äº†è€å¸ˆä»Šå¤©è¿™èŠ‚è¯¾ï¼Œæ‰çŸ¥é“ä»€ä¹ˆå«å­¦è€Œä¸æ€åˆ™ç½”ã€‚","like_count":1},{"had_liked":false,"id":105581,"user_name":"WANG","can_delete":false,"product_type":"c1","uid":1014839,"ip_address":"","ucode":"40795CDD7734F8","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7c/37/a747c9f2.jpg","comment_is_top":false,"comment_ctime":1561035709,"is_pvip":true,"discussion_count":4,"race_medal":0,"score":"5856003005","product_id":100026901,"comment_content":"è€å¸ˆï¼Œæ‚¨å¥½ï¼Œæœ‰ä¸ªç–‘é—®ï¼Œæ‚¨åœ¨è®² BOW Modelæ—¶ï¼Œ<br>class BOWInvertedIndexEngine(SearchEngineBase):<br>\tdef __init__(self):<br>        super(BOWInvertedIndexEngine, self).__init__()<br>        self.inverted_index = {}<br><br><br>    def search(self, query):<br>        query_words = list(self.parse_text_to_words(query))<br>        query_words_index = list()<br>        for query_word in query_words:<br>            query_words_index.append(0)<br><br><br> query_words_index.append(0) ä¸ºå•¥è¦æ·»åŠ  0,  åº”è¯¥æ˜¯ query_word å§?","like_count":1,"discussions":[{"author":{"id":1519491,"avatar":"https://static001.geekbang.org/account/avatar/00/17/2f/83/81e146e4.jpg","nickname":"å¤§æµ·","note":"","ucode":"4F835D75186356","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":531116,"discussion_content":"å°±æ˜¯å®šä¹‰æ¯ä¸ªæŸ¥è¯¢å…³é”®è¯åœ¨å€’æ’ç´¢å¼•ä¸­å„è‡ªçš„æŸ¥æ‰¾ç´¢å¼•å€¼ï¼Œåˆå§‹ä¸º0ï¼Œæ¢ä¸€ç§å†™æ³•æ›´å¥½æ‡‚\n        query_words_index = [0 for i in range(len(query_words))]\n        #query_words_index = list()\n        #for query_word in query_words:\n        #    query_words_index.append(0)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637235139,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1268778,"avatar":"","nickname":"sky","note":"","ucode":"6D31488C0DAFCC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":85,"discussion_content":"         for query_word in query_words:\n            query_words_index.append(query_word)    # -> è¿™ä¸ªæ”¹æˆquery_word ä¹Ÿä¸å¯¹ï¼Œ åº”è¯¥æ˜¯0 , æ·»åŠ ç´¢å¼•ï¼Œä»0 å¼€å§‹ã€‚ã€‚ã€‚ã€‚\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561088069,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1268778,"avatar":"","nickname":"sky","note":"","ucode":"6D31488C0DAFCC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":83,"discussion_content":"å€’åºç´¢å¼• å¥½åƒæ˜¯æœ‰é—®é¢˜ï¼Œä½†æ˜¯åˆæ‰¾ä¸åˆ°é—®é¢˜æ‰€åœ¨ã€‚ã€‚ã€‚\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561087919,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1014839,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7c/37/a747c9f2.jpg","nickname":"WANG","note":"","ucode":"40795CDD7734F8","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1268778,"avatar":"","nickname":"sky","note":"","ucode":"6D31488C0DAFCC","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":97,"discussion_content":"æˆ‘é€šè¿‡æ‰“æ–­ç‚¹è°ƒè¯•æ˜ç™½äº†ï¼Œé‚£ä¸ªç¡®å®æ²¡å†™é”™ï¼Œå°±æ˜¯0ï¼Œä½ æ‰“æ–­ç‚¹è¯•è¯•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561097569,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":83,"ip_address":""},"score":97,"extra":""}]}]},{"had_liked":false,"id":101153,"user_name":"ç¨‹åºå‘˜äººç”Ÿ","can_delete":false,"product_type":"c1","uid":1113668,"ip_address":"","ucode":"C5C5073D89AAA2","user_header":"https://static001.geekbang.org/account/avatar/00/10/fe/44/3e3040ac.jpg","comment_is_top":false,"comment_ctime":1559728076,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5854695372","product_id":100026901,"comment_content":"ä»Šå¤©å†…å®¹æœ‰ç‚¹å¤šã€‚å¯¹äºè¯¾åç•™é¢˜ï¼Œåœ¨æ²¡æœ‰å†™ä»£ç æµ‹è¯•æ—¶å€™ï¼Œè§‰å¾—æ˜¯ä¸èƒ½ç»§æ‰¿çš„ã€‚<br>ä½†æ˜¯åœ¨å†™äº†ä»¥ä¸‹ä»£ç åï¼Œå¥½åƒç§æœ‰å˜é‡æ˜¯å¯ä»¥ç»§æ‰¿çš„ï¼Œä»£ç å¦‚ä¸‹ï¼Œè¯·è€å¸ˆæŒ‡ç‚¹<br>class A():<br><br>    _privateVar = &quot;privateVariable&quot;<br><br>    def getPrivateVar(self):<br>        return self._privateVar<br><br>class B(A):<br>    def printVar(self):<br>        print(self._privateVar)<br>        print(self.getPrivateVar())<br>        self._privateVar = &quot;modify&quot;<br>        print(self._privateVar)<br><br>b = B()<br><br>b.printVar()<br><br>è¿è¡Œç»“æœï¼š<br>privateVariable<br>privateVariable<br>modify","like_count":1,"discussions":[{"author":{"id":2027617,"avatar":"","nickname":"Geek_e2c610","note":"","ucode":"A4E4FF065EB966","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":280294,"discussion_content":"ä½ å°‘æ‰“äº†ä¸€ä¸ªä¸‹åˆ’çº¿","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591523296,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":101097,"user_name":"tux","can_delete":false,"product_type":"c1","uid":1477811,"ip_address":"","ucode":"BB7202009FC885","user_header":"https://static001.geekbang.org/account/avatar/00/16/8c/b3/a74a7125.jpg","comment_is_top":false,"comment_ctime":1559716910,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5854684206","product_id":100026901,"comment_content":"è¿è¡Œæ–‡ä¸­ä»£ç ï¼Œå§‹ç»ˆåœ¨è¿è¡ŒçŠ¶æ€ --&gt; å› ä¸ºï¼šquery = input() éœ€è¦è¾“å…¥å†…å®¹ã€‚ è¿™ä¸ªè‡ªå·±è®©è‡ªå·±å¾ˆå°´å°¬å‘€<br>def main(search_engine):<br>\t...<br>    while True:<br>        query = input()<br>\t\t\t","like_count":1},{"had_liked":false,"id":357698,"user_name":"Geek_216fd5","can_delete":false,"product_type":"c1","uid":1602049,"ip_address":"åŒ—äº¬","ucode":"EA6804E9E974B3","user_header":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLb5UK2u6RyS48ia8H2lUSlUyQEaBiclDlqpbQUWqTWeuf3Djl3ruHRN3U37GXYuWAfAW5d1xkm6F7w/132","comment_is_top":false,"comment_ctime":1663572601,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1663572601","product_id":100026901,"comment_content":"çœ‹äº†ä¸€ä¸ªç¤¼æ‹œï¼Œç»ˆäºçœ‹æ‡‚äº†ã€‚<br>å…¶ä»–éƒ¨åˆ†ä»£ç è¿˜æ¯”è¾ƒç®€å•ï¼Œæœ€éš¾æ‡‚çš„æ˜¯ä¸‹é¢è¿™æ®µï¼š<br>while True: <br># é¦–å…ˆï¼Œè·å¾—å½“å‰çŠ¶æ€ä¸‹æ‰€æœ‰å€’åºç´¢å¼•çš„ index current_ids = [] for idx, query_word in enumerate(query_words): current_index = query_words_index[idx] current_inverted_list = self.inverted_index[query_word] # å·²ç»éå†åˆ°äº†æŸä¸€ä¸ªå€’åºç´¢å¼•çš„æœ«å°¾ï¼Œç»“æŸ search if current_index &gt;= len(current_inverted_list): return result current_ids.append(current_inverted_list[current_index]) # ç„¶åï¼Œå¦‚æœ current_ids çš„æ‰€æœ‰å…ƒç´ éƒ½ä¸€æ ·ï¼Œé‚£ä¹ˆè¡¨æ˜è¿™ä¸ªå•è¯åœ¨è¿™ä¸ªå…ƒç´ å¯¹åº”çš„æ–‡æ¡£ä¸­éƒ½å‡ºç°äº† if all(x == current_ids[0] for x in current_ids): result.append(current_ids[0]) query_words_index = [x + 1 for x in query_words_index] continue # å¦‚æœä¸æ˜¯ï¼Œæˆ‘ä»¬å°±æŠŠæœ€å°çš„å…ƒç´ åŠ ä¸€ min_val = min(current_ids) min_val_pos = current_ids.index(min_val) query_words_index[min_val_pos] += 1<br>è¿™æ®µä¸»è¦æ˜¯å®ç°å¦‚ä¸‹åŠŸèƒ½ï¼š<br>self.inverted_index æ˜¯å€’åºç´¢å¼•é›†åˆï¼Œå³ <br>self.inverted_index={<br>    &quot;little&quot;: [&#39;1.txt&#39;, &#39;2.txt&#39;]<br>    &quot;ring&quot;:[&#39;5.txt&#39;]<br>    ....<br>}<br>å½“ç”¨æˆ·åœ¨ç»ˆç«¯è¾“å…¥æ£€ç´¢è¯ little,ring æ—¶ï¼Œç¨‹åºå°±ä¼šæ ¹æ®è¿™ä¸ªæ£€ç´¢è¯å¾—åˆ°å¾—åˆ° [&#39;1.txt&#39;, &#39;2.txt&#39;]å’Œ[&#39;5.txt&#39;]è¿™ä¸¤ä¸ª listï¼Œæœ€åå°†è¿™ä¸¤ä¸ª list æ±‚äº¤é›†ï¼ˆä¸çŸ¥åˆ—è¡¨æ˜¯å¦æœ‰äº¤é›†æ¦‚å¿µï¼Œ^_^ï¼‰ï¼Œå¹¶å°†ç»“æœè¿”å›ã€‚ä¸Šè¿°æ•´ä¸ª while å¾ªç¯ä½“éƒ½æ˜¯åœ¨æ±‚â€œäº¤é›†â€çš„è¿‡ç¨‹ã€‚æ ¸å¿ƒå°±æ˜¯é‚£ä¸ª current_ids å˜é‡åã€‚å…·ä½“å¦‚ä¸‹ï¼š<br>1. è·å–æ£€ç´¢è¯ç­”æ¡ˆï¼Œå¦‚ little --&gt; [&#39;1.txt&#39;, &#39;2.txt&#39;], ring--&gt;[&#39;5.txt&#39;]<br>2. åˆ›å»ºä¸€ä¸ªâ€œæŒ‡é’ˆâ€åŠŸèƒ½çš„ listï¼šquery_words_index[a,b],è¿™ä¸ª list é‡Œçš„æ¯ä¸ªå…ƒç´ å¯¹åº”çš„ list çš„ç´¢å¼•å€¼ã€‚è¿™ä¹ˆè¯´å¯èƒ½æ‹—å£ï¼Œç®€å•çš„è¯´å°±æ˜¯ query_words_index[a=0] --&gt; little_answer[0]<br>    query_words_index[a=1] --&gt; little_answer[1]<br>    query_words_index[b=0] --&gt; ring_answer[0]<br>3. æ¯æ¬¡ä»æ¯ä¸ª query_word_anwser é‡Œå–å‡ºä¸€ä¸ªå…ƒç´ ï¼Œç»„æˆ current_idsã€‚æ¯”å¦‚<br>[little --&gt;&quot;1.txt&quot;, ring--&gt;&quot;5.txt&quot;]ï¼Œå¦‚æœè¿™äº›å…ƒç´ å…¨éƒ¨ç›¸åŒï¼Œæ¯”å¦‚éƒ½æ˜¯â€˜1.txtâ€™ï¼Œåˆ™â€˜1.txtâ€™å°±æ˜¯äº¤é›†çš„æˆå‘˜ã€‚<br>4. é€šè¿‡ä¸€ééçš„å¾ªç¯æ‰¾åˆ°å…¨éƒ¨äº¤é›†çš„æˆå‘˜ç»„æˆäº¤é›†è¿”å›å³å¯<br><br>ç°åœ¨æœ‰ä¸€ä¸ªç–‘é—®ï¼šè¿™ç§å¾—åˆ°äº¤é›†çš„æ–¹æ³•æ˜¯å¦æ˜¯æŸç§ç®—æ³• ï¼Ÿè¯·å„ä½å¤§ç¥æŒ‡ç‚¹ã€‚<br><br>","like_count":0},{"had_liked":false,"id":343345,"user_name":"Geek_145846","can_delete":false,"product_type":"c1","uid":2530478,"ip_address":"","ucode":"1DA77D13A8F19E","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoAlkIjytYG8MqOtDf7n7pF3rXJnoMNL9ebRXluPvGh2e2A9TxyMoQxPyYQ1dInAFIeltwo8zuvhg/132","comment_is_top":false,"comment_ctime":1650791599,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1650791599","product_id":100026901,"comment_content":"ä¸ºä»€ä¹ˆ<br>self.parse_text_to_words(text)<br><br>å‰é¢æœ‰ä¸ªself","like_count":0},{"had_liked":false,"id":340306,"user_name":"ä¸‰å¹´äºŒç­é‚±å°ä¸œ","can_delete":false,"product_type":"c1","uid":2922136,"ip_address":"","ucode":"909B49C63C8EC6","user_header":"https://static001.geekbang.org/account/avatar/00/2c/96/98/89b96cda.jpg","comment_is_top":false,"comment_ctime":1648733080,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1648733080","product_id":100026901,"comment_content":"è€å¸ˆï¼Œè¯·é—®é™æ€å‡½æ•°æ²¡æœ‰çŠ¶æ€æ˜¯åšä½•è§£ï¼Ÿ","like_count":0},{"had_liked":false,"id":325250,"user_name":"å“‡å¡","can_delete":false,"product_type":"c1","uid":2639609,"ip_address":"","ucode":"C7340DD79BF02E","user_header":"","comment_is_top":false,"comment_ctime":1638878854,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1638878854","product_id":100026901,"comment_content":"è€å¸ˆå¥½ æˆ‘æŠŠå­ç±»ä¸­printè¯­å¥æ”¾åœ¨äº†æ˜¾å¼è°ƒç”¨çˆ¶ç±»æ„é€ æ–¹æ³•åé¢ï¼Œæ‰§è¡Œæ‰“å°çš„é¡ºåºæ˜¯çˆ¶-&gt;å­ï¼Œè¿™æ ·æˆ‘å°±ç†è§£æˆï¼šçˆ¶ç±»çš„æ„é€ å‡½æ•°  -&gt; å­ç±»çš„æ„é€ å‡½æ•°ï¼Œæ•ˆæœå’Œæ–‡ç« ä¸ä¸€æ ·ï¼Œæˆ‘è¿™ç‚¹æ²¡ç†è§£å¾ˆç–‘æƒ‘ã€‚å¸Œæœ›è€å¸ˆè§£ç­”ä¸€ä¸‹ï¼<br>","like_count":0},{"had_liked":false,"id":308911,"user_name":"è‹è‹","can_delete":false,"product_type":"c1","uid":1136433,"ip_address":"","ucode":"5FFD7F3B0F7F7A","user_header":"https://static001.geekbang.org/account/avatar/00/11/57/31/da42b783.jpg","comment_is_top":false,"comment_ctime":1629858468,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1629858468","product_id":100026901,"comment_content":"result = super(BOWInvertedIndexEngineWithCache, self).search(query)<br><br>è¿™å¥ä»£ç ï¼Œ æ˜¯å¦å¯ä»¥æ”¹ä¸º BOWInvertedIndexEngine.search(query)","like_count":0},{"had_liked":false,"id":308898,"user_name":"JabariH","can_delete":false,"product_type":"c1","uid":1983181,"ip_address":"","ucode":"F7CC3390CDB6AA","user_header":"https://static001.geekbang.org/account/avatar/00/1e/42/cd/09b568fc.jpg","comment_is_top":false,"comment_ctime":1629855366,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1629855366","product_id":100026901,"comment_content":"è®²çš„å¤ªæ£’äº†ï¼","like_count":0},{"had_liked":false,"id":299655,"user_name":"Aaron","can_delete":false,"product_type":"c1","uid":2317044,"ip_address":"","ucode":"232FB93BDC5C93","user_header":"https://static001.geekbang.org/account/avatar/00/23/5a/f4/077903da.jpg","comment_is_top":false,"comment_ctime":1624784135,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1624784135","product_id":100026901,"comment_content":"    def search(self, query):<br>        query_words = list(self.parse_text_to_words(query))<br>        query_words_index = list()<br><br> <br>        # å®é™…ä¸Šæ˜¯æŸ¥æ‰¾æ‰€æœ‰å•è¯çš„ä¸€ä¸ªå­˜åœ¨æ–‡ä»¶ï¼Œç›´æ¥ä½¿ç”¨setå³å¯å®Œæˆé€»è¾‘<br>        # è·å–äº¤é›†å³å¯<br>        results = set()<br>        for idx, query_word in enumerate(query_words):<br>            # è·å–æ¯ä¸€ä¸ªå•è¯çš„å­˜åœ¨é€»è¾‘<br>            if idx == 0:<br>                results = set(self.inverted_index[query_word])<br>            results = results.intersection(self.inverted_index[query_word])<br>        return results<br>è¿™é‡Œå»ºè®®ä½œè€…å¯ä»¥æ›´æ–°ä¸€ä¸‹ä»£ç ~<br>","like_count":0},{"had_liked":false,"id":283451,"user_name":"å¥¥å¡å§†å‰ƒåˆ€","can_delete":false,"product_type":"c1","uid":1143983,"ip_address":"","ucode":"BF71372CA50EDC","user_header":"https://static001.geekbang.org/account/avatar/00/11/74/af/6f39dcf8.jpg","comment_is_top":false,"comment_ctime":1615788144,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1615788144","product_id":100026901,"comment_content":"è¿™ç¯‡å…³äºæœç´¢å¼•æ“çš„è®²è§£ç¡®å®ä¸é”™ï¼ŒåŠ›æŒºï¼ï¼  æ­¤å¤–ï¼Œå…³äºPyhonç»§æ‰¿ã€è°ƒç”¨çˆ¶ç±»çš„å±æ€§å’Œæ–¹æ³•ï¼Œå¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« ï¼Œæ¡ˆä¾‹å†™çš„ä¹Ÿä¸é”™ï¼Œï¼šhttps:&#47;&#47;blog.csdn.net&#47;yilulvxing&#47;article&#47;details&#47;85374142","like_count":0},{"had_liked":false,"id":278496,"user_name":"jacke","can_delete":false,"product_type":"c1","uid":1161209,"ip_address":"","ucode":"05F355E1FF88C5","user_header":"https://static001.geekbang.org/account/avatar/00/11/b7/f9/a8f26b10.jpg","comment_is_top":false,"comment_ctime":1612975256,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1612975256","product_id":100026901,"comment_content":"æ„Ÿè§‰å’Œmerge k sorted list å…³ç³»ä¸å¤§,åº”è¯¥æ˜¯æ‰¾å‡º sorted list é‡Œé¢çš„çš„äº¤é›†ï¼Ÿ","like_count":0},{"had_liked":false,"id":275914,"user_name":"æ±Ÿç‰ç¯","can_delete":false,"product_type":"c1","uid":1962641,"ip_address":"","ucode":"963034E086145E","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqlowuQ39YeoQDkVr4ial0BtxzyX3FzsuFq8KHqpmWgCgKs8OjotlZwfRgL2ccKricT6n7ZEUWuCxtw/132","comment_is_top":false,"comment_ctime":1611717319,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1611717319","product_id":100026901,"comment_content":"ä¸¾æ‰‹ï¼šä¸ºå•¥éƒ½èƒ½çœ‹æ‡‚ï¼Œè‡ªå·±åŠ¨æ‰‹å†™ä¸å‡ºæ¥å‘¢ï¼","like_count":0},{"had_liked":false,"id":267775,"user_name":"æ–¹ç£Šï¼ˆèƒ–å¤§æµ·ï¼‰","can_delete":false,"product_type":"c1","uid":1044333,"ip_address":"","ucode":"C8E2ABC0A04460","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ef/6d/978bab34.jpg","comment_is_top":false,"comment_ctime":1607924897,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1607924897","product_id":100026901,"comment_content":"è€å¸ˆï¼Œè¿™ä¸ªç®—æ³•æœ‰ä¸ªbugï¼Œå¦‚æœåŠ è½½çš„æ–‡ä»¶ä¸æ˜¯ä»1-5çš„æ’åºåŠ è½½è¿›å»ï¼Œä¾‹å¦‚æŒ‰23451è¿™æ ·çš„é¡ºåºåŠ è½½ã€‚å¯èƒ½å¯¼è‡´æ‰¾åˆ°çš„ç´¢å¼•ç¼ºå¤±ï¼Œå› ä¸ºæˆ‘ä»¬è¿™è¾¹ç”¨äº†å–æœ€å°çš„ç´¢å¼•å†…å®¹çš„ç´¢å¼•+1å»åˆ¤æ–­æ˜¯å¦è¶…è¿‡äº†æ•°ç»„ç•Œé™ï¼Œæ‰€ä»¥æˆ‘å»ºè®®åœ¨æ–‡ä»¶åŠ è½½çš„æ—¶å€™å†å¢åŠ æ–‡ä»¶åé¡ºåºè°ƒæ•´çš„é€»è¾‘ï¼Œè¿™ä¸ªbugå°±å¯ä»¥è§£å†³ã€‚<br>def main(search_engine):<br>    # æœç´¢å™¨æ¨¡æ‹Ÿ<br>    file_paths = [<br>        &#39;&#47;Users&#47;pangdahai&#47;Downloads&#47;2.txt&#39;,<br>        &#39;&#47;Users&#47;pangdahai&#47;Downloads&#47;3.txt&#39;,<br>        &#39;&#47;Users&#47;pangdahai&#47;Downloads&#47;4.txt&#39;,<br>        &#39;&#47;Users&#47;pangdahai&#47;Downloads&#47;5.txt&#39;,<br>        &#39;&#47;Users&#47;pangdahai&#47;Downloads&#47;1.txt&#39;<br>    ]<br>    # ä¸ºäº†é˜²æ­¢åç»­ç´¢å¼•å»ºç«‹ä¸æ˜¯æŒ‰é¡ºåºå®Œæˆ<br>    file_paths = sorted(file_paths, reverse=False)<br>    <br>    for file_path in file_paths:<br>        search_engine.add_corpus(file_path)","like_count":0},{"had_liked":false,"id":262233,"user_name":"ç»¿ç®­ä¾ ","can_delete":false,"product_type":"c1","uid":1528536,"ip_address":"","ucode":"B994F558A98E29","user_header":"https://static001.geekbang.org/account/avatar/00/17/52/d8/123a4981.jpg","comment_is_top":false,"comment_ctime":1605669576,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1605669576","product_id":100026901,"comment_content":"BOWInvertedIndexEngine  searchæ–¹æ³•æ‹äº†åŠä¸ªå¤šå°æ—¶ï¼Œç»ˆäºæ˜ç™½äº†ï¼Œæ™ºå•†ç¨ï¼ï¼ï¼","like_count":0,"discussions":[{"author":{"id":2369413,"avatar":"https://static001.geekbang.org/account/avatar/00/24/27/85/ddeeaf30.jpg","nickname":"dived","note":"","ucode":"141916A3BAF5A1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":374096,"discussion_content":"ç¾¡æ…•å¹´è½»äºº åŠå°æ—¶å°±å¯ä»¥çœ‹æ‡‚äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621000461,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":261563,"user_name":"æ˜Ÿæ˜Ÿåœ¨çº¿","can_delete":false,"product_type":"c1","uid":1527721,"ip_address":"","ucode":"C2EE7A8CB54E20","user_header":"https://static001.geekbang.org/account/avatar/00/17/4f/a9/0279cee8.jpg","comment_is_top":false,"comment_ctime":1605422628,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1605422628","product_id":100026901,"comment_content":"æœ‰ä¸€ä¸ªé—®é¢˜ï¼ŒPython3å½“ä¸­æ˜¯å¯ä»¥ä½¿ç”¨super(). __init__()ï¼Œæ¥è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°ã€‚å¦‚æœæ˜¯å•ç»§æ‰¿å¾ˆå¥½ç†è§£ï¼Œä½†æ˜¯å¤šé‡ç»§æ‰¿ç”¨è¿™ç§æ–¹å¼æ˜¯è°ƒç”¨äº†å“ªä¸ªçˆ¶ç±»çš„å‘¢ã€‚è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå¤šé‡ç»§æ‰¿çš„è°ƒç”¨é¡ºåºï¼Œå¦‚æœä¸¤ä¸ªçˆ¶ç±»ä¸­æœ‰åŒåå‡½æ•°ï¼Œå­ç±»ä¸­self. xxx()è°ƒç”¨çš„æ˜¯å“ªä¸€ä¸ªçˆ¶ç±»çš„ï¼Ÿ","like_count":0},{"had_liked":false,"id":242797,"user_name":"raito4","can_delete":false,"product_type":"c1","uid":1714189,"ip_address":"","ucode":"7F307F9988D4A8","user_header":"https://static001.geekbang.org/account/avatar/00/1a/28/0d/9d10e756.jpg","comment_is_top":false,"comment_ctime":1597844652,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1597844652","product_id":100026901,"comment_content":"å—ç›ŠåŒªæµ…","like_count":0},{"had_liked":false,"id":226159,"user_name":"daowuli_chihai","can_delete":false,"product_type":"c1","uid":2017371,"ip_address":"","ucode":"13E5DD278D8E95","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIiaeebUYxl7e1b8DhQGz7v6uibGcytfL8iaTke1S6NwSVxicOy5iaLGbRn2aZtxZy8vVnF6j3fjtxDEbQ/132","comment_is_top":false,"comment_ctime":1591965920,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1591965920","product_id":100026901,"comment_content":"ç™¾åº¦æœåˆ° esc æˆ–  enter åˆ‡æ¢ jupyter notebook æ¨¡å¼<br>å¹³å°ä¸ç†Ÿæ‚‰ï¼Œä¸å°å¿ƒåˆ‡æ¢åˆ°å‘½ä»¤æ¨¡å¼ï¼Œè¿è¡Œä»£ç  çœ‹åˆ°ã€*ã€‘, æµªè´¹ä¸å°‘æ—¶é—´","like_count":0},{"had_liked":false,"id":205916,"user_name":"äººä¸è·¯","can_delete":false,"product_type":"c1","uid":1618121,"ip_address":"","ucode":"CB59BFE36BF34A","user_header":"https://static001.geekbang.org/account/avatar/00/18/b0/c9/dfdc4ed8.jpg","comment_is_top":false,"comment_ctime":1586756422,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1586756422","product_id":100026901,"comment_content":"æ™¯è€å¸ˆå¥½ï¼Œè¯·æ•™æ‚¨ä¸€ä¸ªé—®é¢˜ï¼Œå…·ä½“çš„ï¼Œåœ¨æ‚¨ç»™å‡ºçš„ç¬¬ä¸€ä¸ªä¾‹ç¨‹ä¸­ï¼Œå­ç±»è°ƒç”¨çˆ¶ç±»çš„åˆå§‹åŒ–æ—¶ä½¿ç”¨äº†&quot;super(SimpleEngine, self).__init__()&quot;è¿™æ ·çš„å†™æ³•ï¼Œæˆ‘è‡ªå·±å°è¯•äº†â€œsuper().__init__()â€çš„å†™æ³•ï¼Œåœ¨æ‚¨çš„ä¾‹ç¨‹ä¸­æ•ˆæœæ˜¯ä¸€è‡´çš„ã€‚è¯·é—®ä»¥ä¸Šä¸¤è€…åœ¨ä»»ä½•æƒ…å†µéƒ½æ˜¯ç­‰ä»·çš„å—ï¼Œå³å¯ä»¥ä¸ç”¨å†™superçš„å‚æ•°ï¼Ÿå¦å¤–ï¼Œçˆ¶ç±»çš„__init__()åªæœ‰ä¸€ä¸ªå‚æ•°selfï¼Œä¸ºä½•èƒ½superèƒ½å¤Ÿä¼ &quot;SimpleEngine, self&quot;ä¸¤ä¸ªå‚æ•°è¿‡å»ï¼Ÿæœ›æŠ½ç©ºè§£ç­”ä¸€ä¸‹ï¼Œè°¢è°¢ï¼","like_count":0,"discussions":[{"author":{"id":1018685,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8b/3d/0c3a2fd4.jpg","nickname":"å¶å°”å¤æ´»ä¸‹","note":"","ucode":"18B1D525CD50D3","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":295736,"discussion_content":"python2å’Œ3çš„ä¸åŒè¯­æ³• æ•ˆæœä¸€æ ·","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596323686,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":197661,"user_name":"å¾æ—­","can_delete":false,"product_type":"c1","uid":1814806,"ip_address":"","ucode":"1D3091D15373E5","user_header":"https://static001.geekbang.org/account/avatar/00/1b/b1/16/dd11930c.jpg","comment_is_top":false,"comment_ctime":1585390220,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585390220","product_id":100026901,"comment_content":"å°å°æœç´¢å¼•æ“ä¸ç®€å•","like_count":0},{"had_liked":false,"id":195442,"user_name":"panâ€†xiâ€†er","can_delete":false,"product_type":"c1","uid":1564961,"ip_address":"","ucode":"15D3FB11F3A77C","user_header":"https://static001.geekbang.org/account/avatar/00/17/e1/21/63472854.jpg","comment_is_top":false,"comment_ctime":1585188291,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585188291","product_id":100026901,"comment_content":"ä¸ºä»€ä¹ˆæˆ‘è¯•äº†not inåé¢ä¸ç®¡æ˜¯å­—å…¸è¿˜æ˜¯é›†åˆéƒ½å¾—ç›¸ç­‰æ‰å¯ä»¥ï¼Œåªæœ‰æ˜¯å­—ç¬¦ä¸²çš„æ‰å¯ä»¥ï¼Œæ‰€ä»¥è¿™äº›ä»£ç éƒ½éœ€è¦è½¬æ¢ä¸‹æ‰èƒ½æ­£ç¡®è¿è¡Œå§ï¼Ÿ","like_count":0},{"had_liked":false,"id":151626,"user_name":"Paul Shan","can_delete":false,"product_type":"c1","uid":1593140,"ip_address":"","ucode":"32D99989028284","user_header":"","comment_is_top":false,"comment_ctime":1573764353,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1573764353","product_id":100026901,"comment_content":"åªçœ‹æ‡‚äº†é¢å‘å¯¹è±¡çš„å†…å®¹ï¼š<br>å®šä¹‰å¥½æ¥å£ï¼Œåœ¨å®è·µä¸­ä¸æ–­è¿­ä»£å®ç°ä»¥æ»¡è¶³ç°å®çš„åŠŸèƒ½ã€‚æ¥å£çš„ç¨³å®šæ€§æ˜¯ç»™è°ƒç”¨è€…ä»¥è‰¯å¥½ç•Œé¢ã€‚å®ç°çš„ä¸æ–­è¿­ä»£æ˜¯ä¸ºäº†æ»¡è¶³ä¸æ–­å˜åŒ–çš„éœ€æ±‚ã€‚è¿™ç§è®¾è®¡å…¼é¡¾äº†ç¨³å®šå’Œçµæ´»ï¼Œæ˜¯éå¸¸å¥½çš„trade offã€‚ä½†åœ¨å®è·µä¸­æŠŠæ¡æ¥å£çš„ç²’åº¦è¿‘ä¹è‰ºæœ¯ï¼Œç°å®ä¸­å¤§é‡ä»£ç ä¸æ˜¯ç¼ºä¹è‰¯å¥½çš„æŠ½è±¡ï¼Œå°±æ˜¯è¿‡åº¦å®šä¹‰äº†ä¸€å †æ²¡ç”¨çš„æ¥å£ï¼Œæˆ–è€…å…¼è€Œæœ‰ä¹‹ã€‚","like_count":0},{"had_liked":false,"id":150520,"user_name":"hotdog5225","can_delete":false,"product_type":"c1","uid":1632462,"ip_address":"","ucode":"3FC53FEDBEE34A","user_header":"https://static001.geekbang.org/account/avatar/00/18/e8/ce/b5576a7f.jpg","comment_is_top":false,"comment_ctime":1573549073,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1573549073","product_id":100026901,"comment_content":"è·å–queryæ‹‰é“¾çš„ä½¿ç”¨å‰å‡ èŠ‚è¯¾è®²çš„çŸ¥è¯†æ˜¯ä¸æ˜¯å¯ä»¥è¿™ä¹ˆå†™?<br>result_set = reduce(lambda x, y: x &amp; y , [set(self.inverted_index[query]) for query in query_words])<br>return list(result_set)<br>è¿™æ ·æ›´å¥½ç†è§£ä¸€äº›ï¼Ÿ","like_count":0},{"had_liked":false,"id":143701,"user_name":"è¿½é£ç­çš„äºº","can_delete":false,"product_type":"c1","uid":1488020,"ip_address":"","ucode":"2993D60F94C396","user_header":"https://static001.geekbang.org/account/avatar/00/16/b4/94/2796de72.jpg","comment_is_top":false,"comment_ctime":1571758277,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1571758277","product_id":100026901,"comment_content":"ä¸èƒ½ç»§æ‰¿çˆ¶ç±»ç§æœ‰å±æ€§","like_count":0},{"had_liked":false,"id":142095,"user_name":"Freshman","can_delete":false,"product_type":"c1","uid":1662439,"ip_address":"","ucode":"5F4709AF68795C","user_header":"https://static001.geekbang.org/account/avatar/00/19/5d/e7/c72fb013.jpg","comment_is_top":false,"comment_ctime":1571293910,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1571293910","product_id":100026901,"comment_content":"å°é¢å¥½è¯„","like_count":0},{"had_liked":false,"id":141569,"user_name":"Geek_sylvester","can_delete":false,"product_type":"c1","uid":1694202,"ip_address":"","ucode":"84669E65EA928E","user_header":"https://static001.geekbang.org/account/avatar/00/19/d9/fa/e94bc037.jpg","comment_is_top":false,"comment_ctime":1571192686,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1571192686","product_id":100026901,"comment_content":"ä¸ºä»€ä¹ˆåŒæ ·çš„ä»£ç ï¼Œæˆ‘çš„æœç´¢åªä¼šæŠŠ1.txtåŠ å…¥è¯­æ–™åº“ä¸­ï¼Œæœç´¢ä¸åˆ°2.txtå’Œå…¶ä»–çš„å†…å®¹","like_count":0,"discussions":[{"author":{"id":1297523,"avatar":"https://static001.geekbang.org/account/avatar/00/13/cc/73/9c41a7ee.jpg","nickname":"é›·è’™å¾·å¼ ","note":"","ucode":"0104F5818EA7F3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":229533,"discussion_content":"æˆ‘ä¹Ÿé‡åˆ°ä¸€æ ·çš„é—®é¢˜ï¼Œæˆ‘æ˜¯æŠŠæ‰€æœ‰çš„å®ä¾‹ä»£ç éƒ½åŠ å…¥äº†ä¸€ä¸ªpythonæ–‡ä»¶ä¸­","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586662427,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":140310,"user_name":"mashagua","can_delete":false,"product_type":"c1","uid":1058332,"ip_address":"","ucode":"E32265BA93B6AE","user_header":"https://static001.geekbang.org/account/avatar/00/10/26/1c/2fed04cb.jpg","comment_is_top":false,"comment_ctime":1570874525,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1570874525","product_id":100026901,"comment_content":"ä½ å¥½ï¼Œè€å¸ˆï¼Œè¿™ç§ super(BOWEngine, self).__init___è°ƒç”¨è‡ªèº«çš„æ˜¯ä»€ä¹ˆæ„æ€ï¼Œèƒ½å¸®å¿™è§£é‡Šä¸€ä¸‹å—","like_count":0},{"had_liked":false,"id":140303,"user_name":"mashagua","can_delete":false,"product_type":"c1","uid":1058332,"ip_address":"","ucode":"E32265BA93B6AE","user_header":"https://static001.geekbang.org/account/avatar/00/10/26/1c/2fed04cb.jpg","comment_is_top":false,"comment_ctime":1570873915,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1570873915","product_id":100026901,"comment_content":"è¿™é‡Œé¢çš„ç»§æ‰¿æ¯æ¬¡éƒ½æ˜¯å…ˆç»§æ‰¿è‡ªèº«çš„__init__å‡½æ•°æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ","like_count":0},{"had_liked":false,"id":118742,"user_name":"Geek_869754","can_delete":false,"product_type":"c1","uid":1508236,"ip_address":"","ucode":"A9E86C84F07CEF","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/7dnQChbGicibNMEC9pdCh1TdZPTSXibfculxHTjfBWEibKHfl5VpiaibfE4TC1kEhkV5GibUnweQ56pVLLkNNoDedbLDQ/132","comment_is_top":false,"comment_ctime":1564444740,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1564444740","product_id":100026901,"comment_content":"è¯·é—®è€å¸ˆçš„githubé“¾æ¥æ˜¯å¤šå°‘ï¼Ÿ","like_count":0},{"had_liked":false,"id":111807,"user_name":"é£è‰º","can_delete":false,"product_type":"c1","uid":1542985,"ip_address":"","ucode":"6C75B3164888DC","user_header":"https://static001.geekbang.org/account/avatar/00/17/8b/49/ada4fa04.jpg","comment_is_top":false,"comment_ctime":1562606799,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1562606799","product_id":100026901,"comment_content":"BOWInvertedIndexEngineç±»çš„searchå‡½æ•°ä¸­ï¼š<br>query_words_index = list()<br>for query_word in query_words:<br>query_words_index.append(0)<br>è¿™ä¸€æ®µæ²¡çœ‹æ˜ç™½ï¼š<br>query_words_indexæ˜¯ä¸€ä¸ªå…¨ä¸º0çš„åˆ—è¡¨ï¼Ÿ<br>æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1519491,"avatar":"https://static001.geekbang.org/account/avatar/00/17/2f/83/81e146e4.jpg","nickname":"å¤§æµ·","note":"","ucode":"4F835D75186356","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":531119,"discussion_content":"å°±æ˜¯å®šä¹‰æ¯ä¸ªæŸ¥è¯¢å…³é”®è¯åœ¨å€’æ’ç´¢å¼•ä¸­å„è‡ªçš„æŸ¥æ‰¾ç´¢å¼•å€¼ï¼Œåˆå§‹ä¸º0ï¼Œæ¢ä¸€ç§å†™æ³•æ›´å¥½æ‡‚\n        query_words_index = [0 for i in range(len(query_words))]\n        #query_words_index = list()\n        #for query_word in query_words:\n        # query_words_index.append(0)\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637235596,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":109832,"user_name":"æˆ‘å¿ƒé£æ‰¬","can_delete":false,"product_type":"c1","uid":1149164,"ip_address":"","ucode":"E41155122C9A1F","user_header":"https://static001.geekbang.org/account/avatar/00/11/88/ec/1460179b.jpg","comment_is_top":false,"comment_ctime":1562118376,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1562118376","product_id":100026901,"comment_content":"è¯·é—® super(BOWEngine, self).__init_...<br>æå®¢æ—¶é—´ç‰ˆæƒæ‰€æœ‰: https:&#47;&#47;time.geekbang.org&#47;column&#47;article&#47;98998<br>çˆ¶ç±»ä¸­çš„__init__æ˜¯passçš„ä¸ºä»€ä¹ˆè¿™é‡Œè¿˜éœ€è¦è°ƒç”¨ä¸€æ¬¡ï¼Œå­ç±»å¿…é¡»è°ƒç”¨ä¸€ä¸‹çˆ¶ç±»çš„initå—","like_count":0},{"had_liked":false,"id":107083,"user_name":"å“é›¨","can_delete":false,"product_type":"c1","uid":1581705,"ip_address":"","ucode":"C5FB3A3BC68F92","user_header":"https://static001.geekbang.org/account/avatar/00/18/22/89/73397ccb.jpg","comment_is_top":false,"comment_ctime":1561456055,"is_pvip":false,"replies":[{"id":"48240","content":"å—¯å—¯","user_name":"ä½œè€…å›å¤","user_name_real":"Jingxiao","uid":"1259521","ctime":1567141559,"ip_address":"","comment_id":107083,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561456055","product_id":100026901,"comment_content":"ç§æœ‰å±æ€§ä¸å¯ä»¥è¢«ç»§æ‰¿ï¼Œä½†æ˜¯å¯ä»¥åˆ›å»ºä¸€ä¸ªæ™®é€šçš„æ–¹æ³•ï¼Œåœ¨æ–¹æ³•ä¸­æ“ä½œç§æœ‰å±æ€§ã€‚å› ä¸ºæ™®é€šçš„æ–¹æ³•æ˜¯å¯ä»¥æ“ä½œçš„ã€‚","like_count":0,"discussions":[{"author":{"id":1259521,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJJOlibibPFEWOib8ib7RtfAtxND5FUqCxxoeTuLAbBI9ic23xuwdXT4IyiaWq3Fic9RgEAYI0lBTbEp2rcg/132","nickname":"Jingxiao","note":"","ucode":"EB966BB87132F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455359,"discussion_content":"å—¯å—¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567141559,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":105951,"user_name":"Ben","can_delete":false,"product_type":"c1","uid":1252353,"ip_address":"","ucode":"70351D4FAE47F7","user_header":"https://static001.geekbang.org/account/avatar/00/13/1c/01/5aaaf5b6.jpg","comment_is_top":false,"comment_ctime":1561111183,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561111183","product_id":100026901,"comment_content":"å±•ç¤ºçš„ä¼˜åŒ–è¿‡ç¨‹éå¸¸èµ, åªæ˜¯åœ¨å€’åºç´¢å¼•, å¦‚æœæ²¡æœ‰æ·»åŠ å¯¹å•è¯é¡ºåºçš„è€ƒè™‘, ç›´æ¥ç”¨é›†åˆä¼šæ›´å¥½äº›å§<br><br>class BOWIIEngine(SearchEngineBase):<br>    &#39;&#39;&#39;<br>    Bag of Words Inverted Index<br>    å•è¯æŒ‰é¡ºåºå‡ºç°ï¼Œæˆ–è€…å¸Œæœ›æœç´¢çš„å•è¯åœ¨æ–‡ä¸­ç¦»å¾—è¿‘ä¸€äº›<br>    &#39;&#39;&#39;<br><br>    def __init__(self):<br>        super().__init__()<br>        self.inverted_index = {}<br><br>    def process_corpus(self, id, text):<br>        words = self.parse_text_to_words(text)<br>        for w in words:<br>            if w not in self.inverted_index:<br>                self.inverted_index[w] = set()<br>            self.inverted_index[w].add(id)<br><br>    def search(self, query):<br>        qws = list(self.parse_text_to_words(query))<br>        for qw in qws:<br>            if qw not in self.inverted_index:<br>                return []<br>        results = []<br>        for qw in qws:<br>            results.append(self.inverted_index[qw])<br><br>        return reduce(lambda x, y: x.intersection(y), results)<br><br>    @staticmethod<br>    def parse_text_to_words(text):<br>        text = re.sub(r&#39;[^\\w]&#39;, &#39; &#39;, text)<br>        text = text.lower()<br>        words = text.split(&#39; &#39;)<br>        words = filter(None, words)<br>        return set(words)<br>","like_count":0},{"had_liked":false,"id":105573,"user_name":"Monroe  He","can_delete":false,"product_type":"c1","uid":1348219,"ip_address":"","ucode":"D04ECB2EF2E0DA","user_header":"https://static001.geekbang.org/account/avatar/00/14/92/7b/8c7e3e61.jpg","comment_is_top":false,"comment_ctime":1561033788,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561033788","product_id":100026901,"comment_content":"æ€è€ƒé¢˜ï¼šç§æœ‰å˜é‡ä¸èƒ½è¢«ç»§æ‰¿<br>å¯ä»¥é€šè¿‡è°ƒç”¨ç»§æ‰¿çš„çˆ¶ç±»çš„å…±æœ‰æ–¹æ³•ï¼Œé—´æ¥çš„è®¿é—®çˆ¶ç±»çš„ç§æœ‰æ–¹æ³•ã€å±æ€§","like_count":0},{"had_liked":false,"id":105454,"user_name":"taoist","can_delete":false,"product_type":"c1","uid":1195004,"ip_address":"","ucode":"D70AFE25CD8F10","user_header":"https://static001.geekbang.org/account/avatar/00/12/3b/fc/04a75cd0.jpg","comment_is_top":false,"comment_ctime":1561003683,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1561003683","product_id":100026901,"comment_content":"python3 åœ¨functools æ¨¡å—é‡Œ å¼•å…¥äº†è£…é¥°å™¨ lru_cache<br>å¯ä»¥ç›´æ¥ å¯¼å…¥å¹¶ä½¿ç”¨<br>from functools import lru_cache<br><br> @lru_cache()<br> def search(self, query):<br>    pass","like_count":0},{"had_liked":false,"id":104792,"user_name":"Aspirin","can_delete":false,"product_type":"c1","uid":1141751,"ip_address":"","ucode":"858B551CF0C2F4","user_header":"https://static001.geekbang.org/account/avatar/00/11/6b/f7/3a3b82c2.jpg","comment_is_top":false,"comment_ctime":1560839073,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1560839073","product_id":100026901,"comment_content":"æ„Ÿè°¢ä½œè€…ï¼Œè¿™ä¸€èŠ‚è´¨é‡å¾ˆé«˜ï¼Œä¸ä»…è®²è§£äº†é¢å‘å¯¹è±¡ç¼–ç¨‹åŸºæœ¬çŸ¥è¯†ï¼Œæ›´æ˜¯é€šè¿‡å®è·µå±•ç¤ºäº†å¦‚ä½•åº”ç”¨è¿™äº›æ€æƒ³ï¼Œæ›´å¯å–œçš„æ˜¯é™„å¸¦ç§‘æ™®äº†åŸºæœ¬çš„æœç´¢å¼•æ“ç†è®ºå’Œå®ç°åŸç†ã€‚","like_count":0},{"had_liked":false,"id":103965,"user_name":"è¨±æ•²æ•²","can_delete":false,"product_type":"c1","uid":1046681,"ip_address":"","ucode":"6486466820E7BF","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f8/99/8e760987.jpg","comment_is_top":false,"comment_ctime":1560575337,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1560575337","product_id":100026901,"comment_content":"è€å¸ˆä½ å¥½ï¼Œé‡åˆ°ä¸€ä¸ªç®€å•çš„é—®é¢˜ï¼Œå°±æ˜¯æˆ‘ç…§ç€æ•²ä»£ç ï¼Œ1.txt é‚£äº›æ”¾åœ¨å’Œmainï¼ˆï¼‰æ‰€åœ¨çš„.pyæ–‡ä»¶åŒçº§ç›®å½•ï¼Œç„¶åè¿è¡Œä»£ç ï¼ŒæŠ¥é”™ã€‚ F:\\project\\Advanced_python\\py3_interpreter\\Scripts\\python.exe F:&#47;project&#47;Advanced_python&#47;searchEngine&#47;SearchEngineBase.py<br>Traceback (most recent call last):<br>  File &quot;F:&#47;project&#47;Advanced_python&#47;searchEngine&#47;SearchEngineBase.py&quot;, line 74, in &lt;module&gt;<br>    main(search_engine)<br>  File &quot;F:&#47;project&#47;Advanced_python&#47;searchEngine&#47;SearchEngineBase.py&quot;, line 46, in main<br>    searchEngine.add_corpus(file_path)<br>  File &quot;F:&#47;project&#47;Advanced_python&#47;searchEngine&#47;SearchEngineBase.py&quot;, line 33, in add_corpus<br>    with open(file_path, &#39;r&#39;) as fin:<br>FileNotFoundError: [Errno 2] No such file or directory: &#39;1.txt&#39;<br><br>Process finished with exit code 1  è¿™æ˜¯ä»€ä¹ˆåŸå› å‘¢","like_count":0},{"had_liked":false,"id":102619,"user_name":"è¨±æ•²æ•²","can_delete":false,"product_type":"c1","uid":1046681,"ip_address":"","ucode":"6486466820E7BF","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f8/99/8e760987.jpg","comment_is_top":false,"comment_ctime":1560265194,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1560265194","product_id":100026901,"comment_content":"å“‡ è¿™ä¹ˆç²¾å½©  å‘¨æœ«æ‰“ç®—æ‰‹æ•²ä¸€éä»£ç ï¼Œå†çœ‹å‡ éï¼Œï¼Œï¼›ã€‚å­¦è¿‡ä¸€ç‚¹NLP çŸ¥è¯†ï¼Œæ„Ÿè§‰åé¢å¯ä»¥åšç‚¹ä»€ä¹ˆå‡ºæ¥å•Šï¼ŒæœŸå¾…è€å¸ˆçš„å®æˆ˜éƒ¨åˆ†ã€‚","like_count":0},{"had_liked":false,"id":102014,"user_name":"yshan","can_delete":false,"product_type":"c1","uid":1136788,"ip_address":"","ucode":"A2ECDCDA52B8EE","user_header":"https://static001.geekbang.org/account/avatar/00/11/58/94/c8bc2b59.jpg","comment_is_top":false,"comment_ctime":1560100682,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1560100682","product_id":100026901,"comment_content":"éœ€è¦å¤šçœ‹çœ‹å‡ éï¼Œæ…¢æ…¢ç†è§£","like_count":0},{"had_liked":false,"id":102013,"user_name":"å¯ä¹æ³¡æ¸æ","can_delete":false,"product_type":"c1","uid":1308516,"ip_address":"","ucode":"C709B781DF0456","user_header":"https://static001.geekbang.org/account/avatar/00/13/f7/64/03d8154f.jpg","comment_is_top":false,"comment_ctime":1560100403,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1560100403","product_id":100026901,"comment_content":"æˆ‘å°±æ˜¯é‚£ä¸ªæƒ³çœ‹åé¦ˆç»“æœäº†ã€‚ã€‚ã€‚æœç„¶æŠ¥äº†FileNotFoundError: [Errno 2] No such file or directory: &#39;1.txt&#39;é”™è¯¯ã€‚ã€‚ã€‚è€å¸ˆç¬¬ä¸€ä¸ªæœç´¢å¼•æ“å°±è¿›è¡Œä¸ä¸‹å»äº†ã€‚ã€‚","like_count":0,"discussions":[{"author":{"id":1581705,"avatar":"https://static001.geekbang.org/account/avatar/00/18/22/89/73397ccb.jpg","nickname":"å“é›¨","note":"","ucode":"C5FB3A3BC68F92","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":340,"discussion_content":"ä½ å…ˆæŠŠ5ä¸ªæ–‡ä»¶å»ºå¥½å†è¿è¡Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561456553,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":101954,"user_name":"æ˜¥ä¹‹ç»¿é‡","can_delete":false,"product_type":"c1","uid":1057216,"ip_address":"","ucode":"296003F7D2B086","user_header":"https://static001.geekbang.org/account/avatar/00/10/21/c0/38816c31.jpg","comment_is_top":false,"comment_ctime":1560071568,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"1560071568","product_id":100026901,"comment_content":"ç§æœ‰å˜é‡ä¸èƒ½è®¿é—®å§ï¼Œå¯ä»¥é€šè¿‡çˆ¶ç±»çš„æ–¹æ³•å»è®¿é—®ã€‚","like_count":0},{"had_liked":false,"id":101762,"user_name":"Claywoow","can_delete":false,"product_type":"c1","uid":1524797,"ip_address":"","ucode":"1F1C70BCE33536","user_header":"https://static001.geekbang.org/account/avatar/00/17/44/3d/35d6670d.jpg","comment_is_top":false,"comment_ctime":1559963848,"is_pvip":false,"replies":[{"id":"36709","content":"metaclass ä½œä¸ºç‹¬ç«‹çš„ä¸€ç« ä¼šå‡ºç°åœ¨è¿›é˜¶è¯¾ç¨‹ä¸­ï¼Œæ•¬è¯·æœŸå¾…","user_name":"ä½œè€…å›å¤","user_name_real":"é«˜å±±æµæ°´","uid":"1513504","ctime":1560030882,"ip_address":"","comment_id":101762,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1559963848","product_id":100026901,"comment_content":"è€å¸ˆå¯ä»¥æ‹“å±•ä¸€ä¸‹å…ƒç±»å—ï¼Œå®ƒæ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­ä¸€ä¸ªé‡è¦çš„ç±»å‹å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1513504,"avatar":"https://static001.geekbang.org/account/avatar/00/17/18/20/75ea3b20.jpg","nickname":"é«˜å±±æµæ°´","note":"","ucode":"71E513B5937481","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":453106,"discussion_content":"metaclass ä½œä¸ºç‹¬ç«‹çš„ä¸€ç« ä¼šå‡ºç°åœ¨è¿›é˜¶è¯¾ç¨‹ä¸­ï¼Œæ•¬è¯·æœŸå¾…","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560030882,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":101644,"user_name":"æœ±å°è±ª","can_delete":false,"product_type":"c1","uid":1311234,"ip_address":"","ucode":"9177EF1DDFF346","user_header":"https://static001.geekbang.org/account/avatar/00/14/02/02/1080b30c.jpg","comment_is_top":false,"comment_ctime":1559898676,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1559898676","product_id":100026901,"comment_content":"ç¡®å®å¾—çœ‹ç¬¬äºŒéï¼Œä¹¦è¯»ç™¾éå…¶ä¹‰è‡ªè§","like_count":0},{"had_liked":false,"id":101599,"user_name":"lipan","can_delete":false,"product_type":"c1","uid":1347460,"ip_address":"","ucode":"76E2CEEE454017","user_header":"https://static001.geekbang.org/account/avatar/00/14/8f/84/2c2d8c47.jpg","comment_is_top":false,"comment_ctime":1559878925,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1559878925","product_id":100026901,"comment_content":"æ—¢èƒ½é€šè¿‡æœç´¢å¼•æ“çš„ä¾‹å­å­¦ä¹ Pyhtonçš„ç»§æ‰¿æ–¹æ³•ï¼Œä¹Ÿèƒ½çœ‹åˆ°ä»¤äººèµå¿ƒæ‚¦ç›®çš„å›¾ç‰‡ï¼Œæˆ‘è›®å–œæ¬¢çš„","like_count":0},{"had_liked":false,"id":101359,"user_name":"KaitoShy","can_delete":false,"product_type":"c1","uid":1038415,"ip_address":"","ucode":"E2E2E9BD3F5048","user_header":"https://static001.geekbang.org/account/avatar/00/0f/d8/4f/65abc6f0.jpg","comment_is_top":false,"comment_ctime":1559788241,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1559788241","product_id":100026901,"comment_content":"class A(object):<br>    def __init__(self):<br>        self.__a_private_param = &#39;æˆ‘æ˜¯çˆ¶ç±»ç§æœ‰å˜é‡&#39;<br>        self.a_param = &#39;æˆ‘æ˜¯çˆ¶ç±»å˜é‡&#39;<br><br>    def getPrivateParam(self):<br>        return self.__a_private_param<br><br>class B(A):<br>    def __init__(self):<br>        super(B, self).__init__()<br>        # B.private_param = self.__a_private_param ä¸èƒ½ç»§æ‰¿ï¼Œæ ‡å¿—a<br>        B.param = self.a_param<br><br>    def getPrivateParam(self):<br>        return super(B, self).getPrivateParam()<br><br>obj_a = A()<br>print(obj_a.getPrivateParam())<br>obj_b = B()<br>print(obj_b.param)<br>print(obj_b.getPrivateParam())<br>=======<br>æˆ‘æ˜¯çˆ¶ç±»ç§æœ‰å˜é‡<br>æˆ‘æ˜¯çˆ¶ç±»å˜é‡<br>æˆ‘æ˜¯çˆ¶ç±»ç§æœ‰å˜é‡<br>è¿è¡Œæ ‡å¿—aæ—¶å‡ºé”™ï¼Œè€Œæ³¨é‡Šæ‰ä¾¿èƒ½æ­£å¸¸è¿è¡Œã€‚è¯´æ˜ç§æœ‰ç±»ä¸èƒ½ç›´æ¥ç»§æ‰¿ã€‚","like_count":0},{"had_liked":false,"id":101101,"user_name":"KaitoShy","can_delete":false,"product_type":"c1","uid":1038415,"ip_address":"","ucode":"E2E2E9BD3F5048","user_header":"https://static001.geekbang.org/account/avatar/00/0f/d8/4f/65abc6f0.jpg","comment_is_top":false,"comment_ctime":1559717901,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1559717901","product_id":100026901,"comment_content":"â€œé›†æˆçš„æ—¶å€™ï¼Œå‡½æ•°æ˜¯å¦‚ä½•é‡å†™çš„ï¼Ÿâ€ æ˜¯ä¸æ˜¯ç»§æ‰¿å†™æˆäº†é›†æˆäº†ï¼Ÿ","like_count":0},{"had_liked":false,"id":101071,"user_name":"SCAR","can_delete":false,"product_type":"c1","uid":1031209,"ip_address":"","ucode":"38C0927FA3C5FC","user_header":"https://static001.geekbang.org/account/avatar/00/0f/bc/29/022905e6.jpg","comment_is_top":false,"comment_ctime":1559709058,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1559709058","product_id":100026901,"comment_content":"æ€è€ƒé¢˜ï¼š<br>æœ¬è´¨ä¸Šæ¥è®²æ˜¯çˆ¶ç±»çš„ç§æœ‰å±æ€§æ˜¯å¯ä»¥ç»§æ‰¿çš„ï¼Œå› ä¸ºpythonçš„ç§æœ‰åªæ˜¯ä¼ªç§æœ‰ï¼Œåªæ˜¯ç”¨äº†â€œæ”¹åæœºåˆ¶â€è€Œå·²ï¼Œä½ ç”¨self.__varå»è®¿é—®å½“ç„¶æ˜¯ä¼šæŠ¥é”™æ— æ­¤å±æ€§ï¼Œå¦‚æœä½ ç”¨æ”¹åæœºåˆ¶çš„åŸåˆ™åœ¨åŸæ¥å±æ€§å‰é¢åŠ ä¸Šä¸€ä¸ªä¸‹åˆ’çº¿åŠ çˆ¶ç±»åæ˜¯å¯ä»¥è®¿é—®çš„åˆ°çš„ã€‚çœ‹ä¾‹å­ï¼š<br>class A:<br>    __name = &#39;scar&#39;<br>    def __init__(self,city):<br>        self.city=city<br>        self.__password=&#39;xxxxxx&#39;<br>    def change_password(self,password):<br>        self.__password = password<br>        <br>class AA(A):<br>    pass<br><br>s=AA(&#39;hangzhou&#39;)<br><br>print(s.__dict__)<br>{&#39;city&#39;: &#39;hangzhou&#39;, &#39;_A__password&#39;: &#39;xxxxxx&#39;}<br><br>s.change_password(&#39;333333&#39;)<br>print(s._A__password)<br>&#39;333333&#39;<br><br>å½“ç„¶pythonè¿™ä¸ªç§æœ‰å±æ€§çš„æ”¹åæœºåˆ¶æ˜¯ä¿æŠ¤è£…ç½®ï¼Œæ„å‘³ç€å¤šäº†å±‚ä¿æŠ¤ï¼Œä¸è¦å°è¯•ç›´æ¥å»è¯»å–ç§æœ‰å±æ€§æ˜¯pythonç¨‹åºå‘˜å¥½çš„è¡Œä¸ºè§„èŒƒã€‚å¦‚æœè¦å»è®¿é—®åˆ™é€šè¿‡çˆ¶ç±»çš„å…¬ç”¨æ–¹æ³•çš„æ¥å£å»è®¿é—®ã€‚","like_count":0},{"had_liked":false,"id":101053,"user_name":"lllong33","can_delete":false,"product_type":"c1","uid":1528751,"ip_address":"","ucode":"5D012385994C3D","user_header":"https://static001.geekbang.org/account/avatar/00/17/53/af/e5bf5d08.jpg","comment_is_top":false,"comment_ctime":1559706550,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1559706550","product_id":100026901,"comment_content":"æ”¶è—ï¼Œå€¼å¾—åå¤é˜…è¯»ã€‚<br>é—®é¢˜è§£ç­”ï¼šç§æœ‰å˜é‡å’Œæ–¹æ³•å¯ä»¥é€šè¿‡ obj._className__field è®¿é—®ã€‚<br>ç»§æ‰¿å¯ä»¥é€šè¿‡<br>```python<br>é€šè¿‡è®¿é—®å…¬æœ‰æ–¹æ³•ï¼ˆä»çˆ¶ç±»ç»§æ‰¿ï¼‰æ¥è®¿é—®çˆ¶ç±»ç§æœ‰å±æ€§æ—¶å´å½¢æˆäº†ï¼Œå­ç±»å¯ä»¥ç»§æ‰¿çˆ¶ç±»ç§æœ‰å±æ€§ã€‚<br># encoding = utf-8<br><br>class Person(object):<br><br>    def __init__(self, name, age):<br>        self.name = name<br>        self.__age = age        # å®šä¹‰ç§æœ‰å˜é‡ __age<br>        print(self.__age)       # åˆ›å»ºå­ç±»å¯¹è±¡æ—¶ï¼Œ__ageä»è¢«èµ‹å€¼<br><br>    def get___age(self):         # å®šä¹‰è·å– __age çš„å…¬æœ‰æ–¹æ³•<br>        return self.__age<br><br>    def set___age(self, age):    # å®šä¹‰è®¾ç½® __age çš„å…±æœ‰æ–¹æ³•<br>        self.__age = age<br><br><br>class Student(Person):<br><br>    pass                        # Studentæ²¡æœ‰æ˜¾å¼å®šä¹‰ä»»ä½•å±æ€§å’Œæ–¹æ³•<br><br><br>tom = Student(&quot;tom&quot;, 18)<br>print(&quot;tomå¹´é¾„ï¼š&quot; + str(tom.get___age()))<br>tom.set___age(20)<br>print(&quot;tomå¹´é¾„ï¼š&quot; + str(tom.get___age()))<br>```","like_count":0},{"had_liked":false,"id":101040,"user_name":"GentleCP","can_delete":false,"product_type":"c1","uid":1525440,"ip_address":"","ucode":"BB1EE3720D44F0","user_header":"https://static001.geekbang.org/account/avatar/00/17/46/c0/01292b08.jpg","comment_is_top":false,"comment_ctime":1559704538,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1559704538","product_id":100026901,"comment_content":"ç§æœ‰å˜é‡åªèƒ½è¢«è¯¥ç±»çš„å‡½æ•°è°ƒç”¨ï¼Œä¸èƒ½è¢«å­ç±»ç»§æ‰¿ï¼Œå­ç±»å¦‚æœæƒ³è®¿é—®ç§æœ‰å˜é‡éœ€åœ¨çˆ¶ç±»è®¾å®šä¸€ä¸ªæ–¹æ³•ç”¨äºè¿”å›ç§æœ‰å˜é‡ç±»ä¼¼äºgetã€‚å¦‚æœå˜é‡åªæƒ³è¢«ç±»æœ¬èº«å’Œå­ç±»è®¿é—®å¯ä»¥å®šä¹‰ä¿æŠ¤å˜é‡ï¼ˆä»¥å•ä¸‹åˆ’çº¿å¼€å¤´ï¼‰","like_count":0},{"had_liked":false,"id":101038,"user_name":"å´å°æ™º","can_delete":false,"product_type":"c1","uid":1310798,"ip_address":"","ucode":"C7C9F58B5C9F7B","user_header":"https://static001.geekbang.org/account/avatar/00/14/00/4e/be2b206b.jpg","comment_is_top":false,"comment_ctime":1559704221,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1559704221","product_id":100026901,"comment_content":"è¿™ä¸ªå¤ªæ£’äº†ï¼Œå¦‚æœèƒ½ç»“åˆè®¾è®¡æ¨¡å¼è®²ä¸€è®²ï¼Œå°±æ›´å¥½äº†","like_count":0},{"had_liked":false,"id":101012,"user_name":"å¤œè·¯ç ´æ™“","can_delete":false,"product_type":"c1","uid":1353577,"ip_address":"","ucode":"9B875F94B759B9","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/3hZfficKPGCq2kjFBu9SgaMjibJTEl7iaW1ta6pZNyiaWP8XEsNpunlnsiaOtBpWTXfT5BvRP3qNByml6p9rtBvqewg/132","comment_is_top":false,"comment_ctime":1559700696,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1559700696","product_id":100026901,"comment_content":"å¤§åœ°æ¯äº²åœ¨å¿½æ‚ ç€ä½ ï¼<br>ç»“åˆä¸Šç¯‡å¤šçœ‹å‡ éã€‚ä»£ç æ˜¯å…¶æ¬¡çš„ï¼Œæ„Ÿè§‰æ›´é‡è¦çš„æ˜¯æ€è·¯ã€‚","like_count":0},{"had_liked":false,"id":100999,"user_name":"Adam","can_delete":false,"product_type":"c1","uid":1305633,"ip_address":"","ucode":"338BA720880E4F","user_header":"https://static001.geekbang.org/account/avatar/00/13/ec/21/b0fe1bfd.jpg","comment_is_top":false,"comment_ctime":1559699297,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1559699297","product_id":100026901,"comment_content":"ESä¸­ç´¢å¼•ä¹Ÿæ˜¯å€’æ’å®ç°çš„ï¼Œ","like_count":0},{"had_liked":false,"id":100984,"user_name":"îŒ®","can_delete":false,"product_type":"c1","uid":1322330,"ip_address":"","ucode":"FA2983C5AD320C","user_header":"https://static001.geekbang.org/account/avatar/00/14/2d/5a/cc637589.jpg","comment_is_top":false,"comment_ctime":1559698018,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1559698018","product_id":100026901,"comment_content":"çœ‹åˆ°è¿™ç« æƒŠå–œäº†ï¼Œä¸‹ç­äº†æ…¢æ…¢çœ‹ã€‚ğŸ˜Š","like_count":0},{"had_liked":false,"id":100972,"user_name":"leixin","can_delete":false,"product_type":"c1","uid":1318291,"ip_address":"","ucode":"9885DF5FB2E136","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/szNEybCR1Al4p6eDyT8atNjen7ZY9cBJSXOQl1EnrTM2efiaHlPtL7X44JeibXs9qEFLWv6HJWBwq5tVlNahGDGQ/132","comment_is_top":false,"comment_ctime":1559697333,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1559697333","product_id":100026901,"comment_content":"æ¥ä¸‰æ¥¼:ä¸ªäººç†è§£ï¼Œå¤šç»§æ‰¿ä¸å†è¢«å¤šç»§æ‰¿å°±é—®é¢˜ä¸å¤§ï¼Œå¦å¤–å¤šç»§æ‰¿æœ€å¥½ä¸å†™ç›¸åŒåç§°çš„å±æ€§å’Œæ–¹æ³•ã€‚å†™æ··å…¥åç§°è¦è§„èŒƒæ˜äº†ï¼Œç”¨æ§åˆ¶å¥½çš„æ··å…¥è¿˜æ˜¯å¯ä»¥ç”¨çš„ã€‚","like_count":0},{"had_liked":false,"id":100911,"user_name":"éšé£ã®","can_delete":false,"product_type":"c1","uid":1307306,"ip_address":"","ucode":"50C25386889CC9","user_header":"https://static001.geekbang.org/account/avatar/00/13/f2/aa/47f2e37d.jpg","comment_is_top":false,"comment_ctime":1559688332,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1559688332","product_id":100026901,"comment_content":"çˆ¶ç±»çš„ç§æœ‰å±æ€§ä¸èƒ½è¢«å­ç±»ç»§æ‰¿ï¼Œä½†å¯ä»¥åœ¨å­ç±»ç»§æ‰¿çˆ¶ç±»çš„å…¬æœ‰æ–¹æ³•ä¸­è°ƒç”¨çˆ¶ç±»çš„ç§æœ‰å±æ€§","like_count":0}]}