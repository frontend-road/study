{"id":127601,"title":"26 | å¦‚ä½•åœ¨Dartå±‚å…¼å®¹Android/iOSå¹³å°ç‰¹å®šå®ç°ï¼Ÿï¼ˆä¸€ï¼‰","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯é™ˆèˆªã€‚</p><p>åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä¸ä½ ä»‹ç»äº†åœ¨Flutterä¸­å®ç°æ•°æ®æŒä¹…åŒ–çš„ä¸‰ç§æ–¹å¼ï¼Œå³æ–‡ä»¶ã€SharedPreferencesä¸æ•°æ®åº“ã€‚</p><p>å…¶ä¸­ï¼Œæ–‡ä»¶é€‚ç”¨äºå­—ç¬¦ä¸²æˆ–è€…äºŒè¿›åˆ¶æµçš„æ•°æ®æŒä¹…åŒ–ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®è®¿é—®é¢‘æ¬¡ï¼Œå†³å®šå°†å®ƒå­˜åœ¨ä¸´æ—¶ç›®å½•æˆ–æ˜¯æ–‡æ¡£ç›®å½•ã€‚è€ŒSharedPreferencesåˆ™é€‚ç”¨äºå­˜å‚¨å°å‹é”®å€¼å¯¹ä¿¡æ¯ï¼Œå¯ä»¥åº”å¯¹ä¸€äº›è½»é‡é…ç½®ç¼“å­˜çš„åœºæ™¯ã€‚æ•°æ®åº“åˆ™é€‚ç”¨äºé¢‘ç¹å˜åŒ–çš„ã€ç»“æ„åŒ–çš„å¯¹è±¡å­˜å–ï¼Œå¯ä»¥è½»æ¾åº”å¯¹æ•°æ®çš„å¢åˆ æ”¹æŸ¥ã€‚</p><p>ä¾æ‰˜äºä¸Skiaçš„æ·±åº¦å®šåˆ¶åŠä¼˜åŒ–ï¼ŒFlutterç»™æˆ‘ä»¬æä¾›äº†å¾ˆå¤šå…³äºæ¸²æŸ“çš„æ§åˆ¶å’Œæ”¯æŒï¼Œèƒ½å¤Ÿå®ç°ç»å¯¹çš„è·¨å¹³å°åº”ç”¨å±‚æ¸²æŸ“ä¸€è‡´æ€§ã€‚ä½†å¯¹äºä¸€ä¸ªåº”ç”¨è€Œè¨€ï¼Œé™¤äº†åº”ç”¨å±‚è§†è§‰æ˜¾ç¤ºå’Œå¯¹åº”çš„äº¤äº’é€»è¾‘å¤„ç†ä¹‹å¤–ï¼Œæœ‰æ—¶è¿˜éœ€è¦åŸç”Ÿæ“ä½œç³»ç»Ÿï¼ˆAndroidã€iOSï¼‰æä¾›çš„åº•å±‚èƒ½åŠ›æ”¯æŒã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬å‰é¢æåˆ°çš„æ•°æ®æŒä¹…åŒ–ï¼Œä»¥åŠæ¨é€ã€æ‘„åƒå¤´ç¡¬ä»¶è°ƒç”¨ç­‰ã€‚</p><p>ç”±äºFlutteråªæ¥ç®¡äº†åº”ç”¨æ¸²æŸ“å±‚ï¼Œå› æ­¤è¿™äº›ç³»ç»Ÿåº•å±‚èƒ½åŠ›æ˜¯æ— æ³•åœ¨Flutteræ¡†æ¶å†…æä¾›æ”¯æŒçš„ï¼›è€Œå¦ä¸€æ–¹é¢ï¼ŒFlutterè¿˜æ˜¯ä¸€ä¸ªç›¸å¯¹å¹´è½»çš„ç”Ÿæ€ï¼Œå› æ­¤åŸç”Ÿå¼€å‘ä¸­ä¸€äº›ç›¸å¯¹æˆç†Ÿçš„Javaã€C++æˆ–Objective-Cä»£ç åº“ï¼Œæ¯”å¦‚å›¾ç‰‡å¤„ç†ã€éŸ³è§†é¢‘ç¼–è§£ç ç­‰ï¼Œå¯èƒ½åœ¨Flutterä¸­è¿˜æ²¡æœ‰ç›¸å…³å®ç°ã€‚</p><!-- [[[read_end]]] --><p>å› æ­¤ï¼Œä¸ºäº†è§£å†³è°ƒç”¨åŸç”Ÿç³»ç»Ÿåº•å±‚èƒ½åŠ›ä»¥åŠç›¸å…³ä»£ç åº“å¤ç”¨é—®é¢˜ï¼ŒFlutterä¸ºå¼€å‘è€…æä¾›äº†ä¸€ä¸ªè½»é‡çº§çš„è§£å†³æ–¹æ¡ˆï¼Œå³é€»è¾‘å±‚çš„æ–¹æ³•é€šé“ï¼ˆMethod Channelï¼‰æœºåˆ¶ã€‚åŸºäºæ–¹æ³•é€šé“ï¼Œæˆ‘ä»¬å¯ä»¥å°†åŸç”Ÿä»£ç æ‰€æ‹¥æœ‰çš„èƒ½åŠ›ï¼Œä»¥æ¥å£å½¢å¼æš´éœ²ç»™Dartï¼Œä»è€Œå®ç°Dartä»£ç ä¸åŸç”Ÿä»£ç çš„äº¤äº’ï¼Œå°±åƒè°ƒç”¨äº†ä¸€ä¸ªæ™®é€šçš„Dart APIä¸€æ ·ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘å°±ä¸ä½ è¯¦ç»†è®²è¿°Flutterçš„æ–¹æ³•é€šé“æœºåˆ¶å§ã€‚</p><h2>æ–¹æ³•é€šé“</h2><p>Flutterä½œä¸ºä¸€ä¸ªè·¨å¹³å°æ¡†æ¶ï¼Œæä¾›äº†ä¸€å¥—æ ‡å‡†åŒ–çš„è§£å†³æ–¹æ¡ˆï¼Œä¸ºå¼€å‘è€…å±è”½äº†æ“ä½œç³»ç»Ÿçš„å·®å¼‚ã€‚ä½†ï¼ŒFlutteræ¯•ç«Ÿä¸æ˜¯æ“ä½œç³»ç»Ÿï¼Œå› æ­¤åœ¨æŸäº›ç‰¹å®šåœºæ™¯ä¸‹ï¼ˆæ¯”å¦‚æ¨é€ã€è“ç‰™ã€æ‘„åƒå¤´ç¡¬ä»¶è°ƒç”¨æ—¶ï¼‰ï¼Œä¹Ÿéœ€è¦å…·å¤‡ç›´æ¥è®¿é—®ç³»ç»Ÿåº•å±‚åŸç”Ÿä»£ç çš„èƒ½åŠ›ã€‚ä¸ºæ­¤ï¼ŒFlutteræä¾›äº†ä¸€å¥—çµæ´»è€Œè½»é‡çº§çš„æœºåˆ¶æ¥å®ç°Dartå’ŒåŸç”Ÿä»£ç ä¹‹é—´çš„é€šä¿¡ï¼Œå³æ–¹æ³•è°ƒç”¨çš„æ¶ˆæ¯ä¼ é€’æœºåˆ¶ï¼Œè€Œæ–¹æ³•é€šé“åˆ™æ˜¯ç”¨æ¥ä¼ é€’é€šä¿¡æ¶ˆæ¯çš„ä¿¡é“ã€‚</p><p>ä¸€æ¬¡å…¸å‹çš„æ–¹æ³•è°ƒç”¨è¿‡ç¨‹ç±»ä¼¼ç½‘ç»œè°ƒç”¨ï¼Œç”±ä½œä¸ºå®¢æˆ·ç«¯çš„Flutterï¼Œé€šè¿‡æ–¹æ³•é€šé“å‘ä½œä¸ºæœåŠ¡ç«¯çš„åŸç”Ÿä»£ç å®¿ä¸»å‘é€æ–¹æ³•è°ƒç”¨è¯·æ±‚ï¼ŒåŸç”Ÿä»£ç å®¿ä¸»åœ¨ç›‘å¬åˆ°æ–¹æ³•è°ƒç”¨çš„æ¶ˆæ¯åï¼Œè°ƒç”¨å¹³å°ç›¸å…³çš„APIæ¥å¤„ç†Flutterå‘èµ·çš„è¯·æ±‚ï¼Œæœ€åå°†å¤„ç†å®Œæ¯•çš„ç»“æœé€šè¿‡æ–¹æ³•é€šé“å›å‘è‡³Flutterã€‚è°ƒç”¨è¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/a8/9c/a8a5cec456e66323e045318d7c5f4d9c.png?wh=1020*784\" alt=\"\"></p><center><span class=\"reference\">å›¾1 æ–¹æ³•é€šé“ç¤ºæ„å›¾</span></center><p>ä»ä¸Šå›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼Œæ–¹æ³•è°ƒç”¨è¯·æ±‚çš„å¤„ç†å’Œå“åº”ï¼Œåœ¨Androidä¸­æ˜¯é€šè¿‡FlutterViewï¼Œè€Œåœ¨iOSä¸­åˆ™æ˜¯é€šè¿‡FlutterViewControllerè¿›è¡Œæ³¨å†Œçš„ã€‚FlutterViewä¸FlutterViewControllerä¸ºFlutteråº”ç”¨æä¾›äº†ä¸€ä¸ªç”»æ¿ï¼Œä½¿å¾—æ„å»ºäºSkiaä¹‹ä¸Šçš„Flutteré€šè¿‡ç»˜åˆ¶å³å¯å®ç°æ•´ä¸ªåº”ç”¨æ‰€éœ€çš„è§†è§‰æ•ˆæœã€‚å› æ­¤ï¼Œå®ƒä»¬ä¸ä»…æ˜¯Flutteråº”ç”¨çš„å®¹å™¨ï¼ŒåŒæ—¶ä¹Ÿæ˜¯Flutteråº”ç”¨çš„å…¥å£ï¼Œè‡ªç„¶ä¹Ÿæ˜¯æ³¨å†Œæ–¹æ³•è°ƒç”¨è¯·æ±‚æœ€åˆé€‚çš„åœ°æ–¹ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨æ–¹æ³•é€šé“å®ç°ä¸åŸç”Ÿä»£ç çš„äº¤äº’ã€‚</p><h2>æ–¹æ³•é€šé“ä½¿ç”¨ç¤ºä¾‹</h2><p>åœ¨å®é™…ä¸šåŠ¡ä¸­ï¼Œæç¤ºç”¨æˆ·è·³è½¬åˆ°åº”ç”¨å¸‚åœºï¼ˆiOSä¸ºApp Storeã€Androidåˆ™ä¸ºå„ç±»æ‰‹æœºåº”ç”¨å¸‚åœºï¼‰å»è¯„åˆ†æ˜¯ä¸€ä¸ªé«˜é¢‘éœ€æ±‚ï¼Œè€ƒè™‘åˆ°Flutterå¹¶æœªæä¾›è¿™æ ·çš„æ¥å£ï¼Œè€Œè·³è½¬æ–¹å¼åœ¨Androidå’ŒiOSä¸Šå„ä¸ç›¸åŒï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦åˆ†åˆ«åœ¨Androidå’ŒiOSä¸Šå®ç°è¿™æ ·çš„åŠŸèƒ½ï¼Œå¹¶æš´éœ²ç»™Dartç›¸å…³çš„æ¥å£ã€‚</p><p>æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ä½œä¸ºå®¢æˆ·ç«¯çš„Flutterï¼Œæ€æ ·å®ç°ä¸€æ¬¡æ–¹æ³•è°ƒç”¨è¯·æ±‚ã€‚</p><h3>Flutterå¦‚ä½•å®ç°ä¸€æ¬¡æ–¹æ³•è°ƒç”¨è¯·æ±‚ï¼Ÿ</h3><p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ç¡®å®šä¸€ä¸ªå”¯ä¸€çš„å­—ç¬¦ä¸²æ ‡è¯†ç¬¦ï¼Œæ¥æ„é€ ä¸€ä¸ªå‘½åé€šé“ï¼›ç„¶åï¼Œåœ¨è¿™ä¸ªé€šé“ä¹‹ä¸Šï¼ŒFlutteré€šè¿‡æŒ‡å®šæ–¹æ³•åâ€œopenAppMarketâ€æ¥å‘èµ·ä¸€æ¬¡æ–¹æ³•è°ƒç”¨è¯·æ±‚ã€‚</p><p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™å’Œæˆ‘ä»¬å¹³æ—¶è°ƒç”¨ä¸€ä¸ªDartå¯¹è±¡çš„æ–¹æ³•å®Œå…¨ä¸€æ ·ã€‚å› ä¸ºæ–¹æ³•è°ƒç”¨è¿‡ç¨‹æ˜¯å¼‚æ­¥çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä½¿ç”¨éé˜»å¡ï¼ˆæˆ–è€…æ³¨å†Œå›è°ƒï¼‰æ¥ç­‰å¾…åŸç”Ÿä»£ç ç»™äºˆå“åº”ã€‚</p><pre><code>//å£°æ˜MethodChannel\nconst platform = MethodChannel('samples.chenhang/utils');\n\n//å¤„ç†æŒ‰é’®ç‚¹å‡»\nhandleButtonClick() async{\n  int result;\n  //å¼‚å¸¸æ•è·\n  try {\n    //å¼‚æ­¥ç­‰å¾…æ–¹æ³•é€šé“çš„è°ƒç”¨ç»“æœ\n    result = await platform.invokeMethod('openAppMarket');\n  }\n  catch (e) {\n    result = -1;\n  }\n  print(&quot;Resultï¼š$result&quot;);\n}\n</code></pre><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸ç½‘ç»œè°ƒç”¨ç±»ä¼¼ï¼Œæ–¹æ³•è°ƒç”¨è¯·æ±‚æœ‰å¯èƒ½ä¼šå¤±è´¥ï¼ˆæ¯”å¦‚ï¼ŒFlutterå‘èµ·äº†åŸç”Ÿä»£ç ä¸æ”¯æŒçš„APIè°ƒç”¨ï¼Œæˆ–æ˜¯è°ƒç”¨è¿‡ç¨‹å‡ºé”™ç­‰ï¼‰ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦æŠŠå‘èµ·æ–¹æ³•è°ƒç”¨è¯·æ±‚çš„è¯­å¥ç”¨try-catchåŒ…è£…èµ·æ¥ã€‚</p><p>è°ƒç”¨æ–¹çš„å®ç°æå®šäº†ï¼Œæ¥ä¸‹æ¥å°±éœ€è¦åœ¨åŸç”Ÿä»£ç å®¿ä¸»ä¸­å®Œæˆæ–¹æ³•è°ƒç”¨çš„å“åº”å®ç°äº†ã€‚ç”±äºæˆ‘ä»¬éœ€è¦é€‚é…Androidå’ŒiOSä¸¤ä¸ªå¹³å°ï¼Œæ‰€ä»¥æˆ‘ä»¬åˆ†åˆ«éœ€è¦åœ¨ä¸¤ä¸ªå¹³å°ä¸Šå®Œæˆå¯¹åº”çš„æ¥å£å®ç°ã€‚</p><h3>åœ¨åŸç”Ÿä»£ç ä¸­å®Œæˆæ–¹æ³•è°ƒç”¨çš„å“åº”</h3><p>é¦–å…ˆï¼Œ<strong>æˆ‘ä»¬æ¥çœ‹çœ‹Androidç«¯çš„å®ç°æ–¹å¼</strong>ã€‚åœ¨ä¸Šä¸€å°ç»“æœ€åæˆ‘æåˆ°ï¼Œåœ¨Androidå¹³å°ï¼Œæ–¹æ³•è°ƒç”¨çš„å¤„ç†å’Œå“åº”æ˜¯åœ¨Flutteråº”ç”¨çš„å…¥å£ï¼Œä¹Ÿå°±æ˜¯åœ¨MainActivityä¸­çš„FlutterViewé‡Œå®ç°çš„ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦æ‰“å¼€Flutterçš„Androidå®¿ä¸»Appï¼Œæ‰¾åˆ°MainActivity.javaæ–‡ä»¶ï¼Œå¹¶åœ¨å…¶ä¸­æ·»åŠ ç›¸å…³çš„é€»è¾‘ã€‚</p><p>è°ƒç”¨æ–¹ä¸å“åº”æ–¹éƒ½æ˜¯é€šè¿‡å‘½åé€šé“è¿›è¡Œä¿¡æ¯äº¤äº’çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨onCreateæ–¹æ³•ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªä¸è°ƒç”¨æ–¹Flutteræ‰€ä½¿ç”¨çš„é€šé“åç§°ä¸€æ ·çš„MethodChannelï¼Œå¹¶åœ¨å…¶ä¸­è®¾ç½®æ–¹æ³•å¤„ç†å›è°ƒï¼Œå“åº”openAppMarketæ–¹æ³•ï¼Œæ‰“å¼€åº”ç”¨å¸‚åœºçš„Intentã€‚åŒæ ·åœ°ï¼Œè€ƒè™‘åˆ°æ‰“å¼€åº”ç”¨å¸‚åœºçš„è¿‡ç¨‹å¯èƒ½ä¼šå‡ºé”™ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦å¢åŠ try-catchæ¥æ•è·å¯èƒ½çš„å¼‚å¸¸ï¼š</p><pre><code>protected void onCreate(Bundle savedInstanceState) {\n  ...\n  //åˆ›å»ºä¸è°ƒç”¨æ–¹æ ‡è¯†ç¬¦ä¸€æ ·çš„æ–¹æ³•é€šé“\n  new MethodChannel(getFlutterView(), &quot;samples.chenhang/utils&quot;).setMethodCallHandler(\n   //è®¾ç½®æ–¹æ³•å¤„ç†å›è°ƒ\n    new MethodCallHandler() {\n      //å“åº”æ–¹æ³•è¯·æ±‚\n      @Override\n      public void onMethodCall(MethodCall call, Result result) {\n        //åˆ¤æ–­æ–¹æ³•åæ˜¯å¦æ”¯æŒ\n        if(call.method.equals(&quot;openAppMarket&quot;)) {\n          try {\n            //åº”ç”¨å¸‚åœºURI\n            Uri uri = Uri.parse(&quot;market://details?id=com.hangchen.example.flutter_module_page.host&quot;);\n            Intent intent = new Intent(Intent.ACTION_VIEW, uri);\n            intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\n            //æ‰“å¼€åº”ç”¨å¸‚åœº\n            activity.startActivity(intent);\n            //è¿”å›å¤„ç†ç»“æœ\n            result.success(0);\n          } catch (Exception e) {\n            //æ‰“å¼€åº”ç”¨å¸‚åœºå‡ºç°å¼‚å¸¸\n            result.error(&quot;UNAVAILABLE&quot;, &quot;æ²¡æœ‰å®‰è£…åº”ç”¨å¸‚åœº&quot;, null);\n          }\n        }else {\n          //æ–¹æ³•åæš‚ä¸æ”¯æŒ \n          result.notImplemented();\n        }\n      }\n    });\n}\n</code></pre><p>ç°åœ¨ï¼Œæ–¹æ³•è°ƒç”¨å“åº”çš„Androidéƒ¨åˆ†å·²ç»æå®šï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹<strong>iOSç«¯çš„æ–¹æ³•è°ƒç”¨å“åº”å¦‚ä½•å®ç°ã€‚</strong></p><p>åœ¨iOSå¹³å°ï¼Œæ–¹æ³•è°ƒç”¨çš„å¤„ç†å’Œå“åº”æ˜¯åœ¨Flutteråº”ç”¨çš„å…¥å£ï¼Œä¹Ÿå°±æ˜¯åœ¨Applegateä¸­çš„rootViewControllerï¼ˆå³FlutterViewControllerï¼‰é‡Œå®ç°çš„ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦æ‰“å¼€Flutterçš„iOSå®¿ä¸»Appï¼Œæ‰¾åˆ°AppDelegate.mæ–‡ä»¶ï¼Œå¹¶æ·»åŠ ç›¸å…³é€»è¾‘ã€‚</p><p>ä¸Androidæ³¨å†Œæ–¹æ³•è°ƒç”¨å“åº”ç±»ä¼¼ï¼Œæˆ‘ä»¬éœ€è¦åœ¨didFinishLaunchingWithOptions:æ–¹æ³•ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªä¸è°ƒç”¨æ–¹Flutteræ‰€ä½¿ç”¨çš„é€šé“åç§°ä¸€æ ·çš„MethodChannelï¼Œå¹¶åœ¨å…¶ä¸­è®¾ç½®æ–¹æ³•å¤„ç†å›è°ƒï¼Œå“åº”openAppMarketæ–¹æ³•ï¼Œé€šè¿‡URLæ‰“å¼€åº”ç”¨å¸‚åœºï¼š</p><pre><code>- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {\n  //åˆ›å»ºå‘½åæ–¹æ³•é€šé“\n  FlutterMethodChannel* channel = [FlutterMethodChannel methodChannelWithName:@&quot;samples.chenhang/utils&quot; binaryMessenger:(FlutterViewController *)self.window.rootViewController];\n  //å¾€æ–¹æ³•é€šé“æ³¨å†Œæ–¹æ³•è°ƒç”¨å¤„ç†å›è°ƒ\n  [channel setMethodCallHandler:^(FlutterMethodCall* call, FlutterResult result) {\n    //æ–¹æ³•åç§°ä¸€è‡´\n    if ([@&quot;openAppMarket&quot; isEqualToString:call.method]) {\n      //æ‰“å¼€App Store(æœ¬ä¾‹æ‰“å¼€å¾®ä¿¡çš„URL)\n      [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@&quot;itms-apps://itunes.apple.com/xy/app/foo/id414478124&quot;]];\n      //è¿”å›æ–¹æ³•å¤„ç†ç»“æœ\n      result(@0);\n    } else {\n      //æ‰¾ä¸åˆ°è¢«è°ƒç”¨çš„æ–¹æ³•\n      result(FlutterMethodNotImplemented);\n    }\n  }];\n  ...\n}\n</code></pre><p>è¿™æ ·ï¼ŒiOSç«¯çš„æ–¹æ³•è°ƒç”¨å“åº”ä¹Ÿå·²ç»å®ç°äº†ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨Flutteråº”ç”¨é‡Œï¼Œé€šè¿‡è°ƒç”¨openAppMarketæ–¹æ³•ï¼Œå®ç°æ‰“å¼€ä¸åŒæ“ä½œç³»ç»Ÿæä¾›çš„åº”ç”¨å¸‚åœºåŠŸèƒ½äº†ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨åŸç”Ÿä»£ç å¤„ç†å®Œæ¯•åå°†å¤„ç†ç»“æœè¿”å›ç»™Flutteræ—¶ï¼Œ<strong>æˆ‘ä»¬åœ¨Dartã€Androidå’ŒiOSåˆ†åˆ«ç”¨äº†ä¸‰ç§æ•°æ®ç±»å‹</strong>ï¼šAndroidç«¯è¿”å›çš„æ˜¯java.lang.Integerã€iOSç«¯è¿”å›çš„æ˜¯NSNumberã€Dartç«¯æ¥æ”¶åˆ°è¿”å›ç»“æœæ—¶åˆå˜æˆäº†intç±»å‹ã€‚è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p><p>è¿™æ˜¯å› ä¸ºåœ¨ä½¿ç”¨æ–¹æ³•é€šé“è¿›è¡Œæ–¹æ³•è°ƒç”¨æ—¶ï¼Œç”±äºæ¶‰åŠåˆ°è·¨ç³»ç»Ÿæ•°æ®äº¤äº’ï¼ŒFlutterä¼šä½¿ç”¨StandardMessageCodecå¯¹é€šé“ä¸­ä¼ è¾“çš„ä¿¡æ¯è¿›è¡Œç±»ä¼¼JSONçš„äºŒè¿›åˆ¶åºåˆ—åŒ–ï¼Œä»¥æ ‡å‡†åŒ–æ•°æ®ä¼ è¾“è¡Œä¸ºã€‚è¿™æ ·åœ¨æˆ‘ä»¬å‘é€æˆ–è€…æ¥æ”¶æ•°æ®æ—¶ï¼Œè¿™äº›æ•°æ®å°±ä¼šæ ¹æ®å„è‡ªç³»ç»Ÿé¢„å®šçš„è§„åˆ™è‡ªåŠ¨è¿›è¡Œåºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚çœ‹åˆ°è¿™é‡Œï¼Œä½ æ˜¯ä¸æ˜¯å¯¹è¿™æ ·ç±»ä¼¼ç½‘ç»œè°ƒç”¨çš„æ–¹æ³•é€šé“æŠ€æœ¯æœ‰äº†æ›´æ·±åˆ»çš„å°è±¡å‘¢ã€‚â€‹</p><p>å¯¹äºä¸Šé¢æåˆ°çš„ä¾‹å­ï¼Œç±»å‹ä¸ºjava.lang.Integeræˆ–NSNumberçš„è¿”å›å€¼ï¼Œå…ˆæ˜¯è¢«åºåˆ—åŒ–æˆäº†ä¸€æ®µäºŒè¿›åˆ¶æ ¼å¼çš„æ•°æ®åœ¨é€šé“ä¸­ä¼ è¾“ï¼Œç„¶åå½“è¯¥æ•°æ®ä¼ é€’åˆ°Flutteråï¼Œåˆè¢«ååºåˆ—åŒ–æˆäº†Dartè¯­è¨€ä¸­çš„intç±»å‹çš„æ•°æ®ã€‚</p><p>å…³äºAndroidã€iOSå’ŒDartå¹³å°é—´çš„å¸¸è§æ•°æ®ç±»å‹è½¬æ¢ï¼Œæˆ‘æ€»ç»“æˆäº†ä¸‹é¢ä¸€å¼ è¡¨æ ¼ï¼Œå¸®åŠ©ä½ ç†è§£ä¸è®°å¿†ã€‚ä½ åªè¦è®°ä½ï¼Œåƒnullã€å¸ƒå°”ã€æ•´å‹ã€å­—ç¬¦ä¸²ã€æ•°ç»„å’Œå­—å…¸è¿™äº›åŸºæœ¬ç±»å‹ï¼Œæ˜¯å¯ä»¥åœ¨å„ä¸ªå¹³å°ä¹‹é—´ä»¥å¹³å°å®šä¹‰çš„è§„åˆ™å»æ··ç”¨çš„ï¼Œå°±å¯ä»¥äº†ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/c6/e7/c6f1148978fabe62e4089d7877ecb1e7.png?wh=931*420\" alt=\"\"></p><center><span class=\"reference\">å›¾2 Androidã€iOSå’ŒDartå¹³å°é—´çš„å¸¸è§æ•°æ®ç±»å‹è½¬æ¢</span></center><h2>æ€»ç»“</h2><p>å¥½äº†ï¼Œä»Šå¤©çš„åˆ†äº«å°±åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬æ¥æ€»ç»“ä¸€ä¸‹ä¸»è¦å†…å®¹å§ã€‚</p><p>æ–¹æ³•é€šé“è§£å†³äº†é€»è¾‘å±‚çš„åŸç”Ÿèƒ½åŠ›å¤ç”¨é—®é¢˜ï¼Œä½¿å¾—Flutterèƒ½å¤Ÿé€šè¿‡è½»é‡çº§çš„å¼‚æ­¥æ–¹æ³•è°ƒç”¨ï¼Œå®ç°ä¸åŸç”Ÿä»£ç çš„äº¤äº’ã€‚ä¸€æ¬¡å…¸å‹çš„è°ƒç”¨è¿‡ç¨‹ç”±Flutterå‘èµ·æ–¹æ³•è°ƒç”¨è¯·æ±‚å¼€å§‹ï¼Œè¯·æ±‚ç»ç”±å”¯ä¸€æ ‡è¯†ç¬¦æŒ‡å®šçš„æ–¹æ³•é€šé“åˆ°è¾¾åŸç”Ÿä»£ç å®¿ä¸»ï¼Œè€ŒåŸç”Ÿä»£ç å®¿ä¸»åˆ™é€šè¿‡æ³¨å†Œå¯¹åº”æ–¹æ³•å®ç°ã€å“åº”å¹¶å¤„ç†è°ƒç”¨è¯·æ±‚ï¼Œæœ€åå°†æ‰§è¡Œç»“æœé€šè¿‡æ¶ˆæ¯é€šé“ï¼Œå›ä¼ è‡³Flutterã€‚</p><p>â€‹éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ–¹æ³•é€šé“æ˜¯éçº¿ç¨‹å®‰å…¨çš„ã€‚è¿™æ„å‘³ç€åŸç”Ÿä»£ç ä¸Flutterä¹‹é—´æ‰€æœ‰æ¥å£è°ƒç”¨å¿…é¡»å‘ç”Ÿåœ¨ä¸»çº¿ç¨‹ã€‚Flutteræ˜¯å•çº¿ç¨‹æ¨¡å‹ï¼Œå› æ­¤è‡ªç„¶å¯ä»¥ç¡®ä¿æ–¹æ³•è°ƒç”¨è¯·æ±‚æ˜¯å‘ç”Ÿåœ¨ä¸»çº¿ç¨‹ï¼ˆIsolateï¼‰çš„ï¼›è€ŒåŸç”Ÿä»£ç åœ¨å¤„ç†æ–¹æ³•è°ƒç”¨è¯·æ±‚æ—¶ï¼Œå¦‚æœæ¶‰åŠåˆ°å¼‚æ­¥æˆ–éä¸»çº¿ç¨‹åˆ‡æ¢ï¼Œéœ€è¦ç¡®ä¿å›è°ƒè¿‡ç¨‹æ˜¯åœ¨åŸç”Ÿç³»ç»Ÿçš„UIçº¿ç¨‹ï¼ˆä¹Ÿå°±æ˜¯Androidå’ŒiOSçš„ä¸»çº¿ç¨‹ï¼‰ä¸­æ‰§è¡Œçš„ï¼Œå¦åˆ™åº”ç”¨å¯èƒ½ä¼šå‡ºç°å¥‡æ€ªçš„Bugï¼Œç”šè‡³æ˜¯Crashã€‚</p><p>æˆ‘æŠŠä»Šå¤©åˆ†äº«æ‰€æ¶‰åŠåˆ°çš„çŸ¥è¯†ç‚¹æ‰“åŒ…åˆ°äº†<a href=\"https://github.com/cyndibaby905/26_native_method\">GitHub</a>ä¸­ï¼Œä½ å¯ä»¥ä¸‹è½½ä¸‹æ¥ï¼Œåå¤è¿è¡Œå‡ æ¬¡ï¼ŒåŠ æ·±ç†è§£ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>æœ€åï¼Œæˆ‘ç»™ä½ ç•™ä¸‹ä¸€é“æ€è€ƒé¢˜å§ã€‚</p><p>è¯·æ‰©å±•æ–¹æ³•é€šé“ç¤ºä¾‹ï¼Œè®©openAppMarketæ”¯æŒä¼ å…¥AppIDå’ŒåŒ…åï¼Œä½¿å¾—æˆ‘ä»¬å¯ä»¥è·³è½¬åˆ°ä»»æ„ä¸€ä¸ªAppçš„åº”ç”¨å¸‚åœºã€‚</p><p>æ¬¢è¿ä½ åœ¨è¯„è®ºåŒºç»™æˆ‘ç•™è¨€åˆ†äº«ä½ çš„è§‚ç‚¹ï¼Œæˆ‘ä¼šåœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­ç­‰å¾…ä½ ï¼æ„Ÿè°¢ä½ çš„æ”¶å¬ï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ä¸€èµ·é˜…è¯»ã€‚</p><p></p>","neighbors":{"left":{"article_title":"25 | æœ¬åœ°å­˜å‚¨ä¸æ•°æ®åº“çš„ä½¿ç”¨å’Œä¼˜åŒ–","id":126460},"right":{"article_title":"27 | å¦‚ä½•åœ¨Dartå±‚å…¼å®¹Android/iOSå¹³å°ç‰¹å®šå®ç°ï¼Ÿï¼ˆäºŒï¼‰","id":128510}},"comments":[{"had_liked":false,"id":140661,"user_name":"å’Œå°èƒ–","can_delete":false,"product_type":"c1","uid":1180727,"ip_address":"","ucode":"406BD7AB987EBF","user_header":"https://static001.geekbang.org/account/avatar/00/12/04/37/aa04f997.jpg","comment_is_top":false,"comment_ctime":1571023382,"is_pvip":false,"replies":[{"id":"56185","content":"å‰å®³ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"åœŸè±†ç›’å­","uid":"1088582","ctime":1572320747,"ip_address":"","comment_id":140661,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14455925270","product_id":100031001,"comment_content":"æ€è€ƒé¢˜ï¼š<br>flutter ç«¯ï¼š<br>&#47;&#47; å¤„ç†æŒ‰é’®ç‚¹å‡»<br>handleButtonClick() async {<br>  int result;<br>  &#47;&#47; å¼‚å¸¸æ•è·<br>  try {<br>    &#47;&#47; å¼‚æ­¥ç­‰å¾…æ–¹æ³•é€šé“çš„è°ƒç”¨ç»“æœ<br>    result = await platform.invokeMethod(&#39;openAppMarket&#39;, &lt;String, dynamic&gt;{<br>      &#39;appId&#39;: &quot;com.xxx.xxx&quot;,<br>      &#39;packageName&#39;: &quot;xxx.com.xxx&quot;,<br>    });<br>  } catch (e) {<br>    result = -1;<br>  }<br>  print(&quot;Resultï¼š$result&quot;);<br>}<br><br>Android ç«¯ï¼š<br>if (call.method == &quot;openAppMarket&quot;) {<br>                    if (call.hasArgument(&quot;appId&quot;)) {<br>                        &#47;&#47;è·å– appId<br>                        call.argument&lt;String&gt;(&quot;appId&quot;)<br>                    }<br>                    if (call.hasArgument(&quot;packageName&quot;)) {<br>                        &#47;&#47;è·å–åŒ…å<br>                        call.argument&lt;String&gt;(&quot;packageName&quot;)<br>                    }<br>                }","like_count":3,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"åœŸè±†ç›’å­","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470499,"discussion_content":"å‰å®³ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572320747,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":128426,"user_name":"çŸ®ä¸ªå­å…ˆç”ŸğŸ˜","can_delete":false,"product_type":"c1","uid":1147205,"ip_address":"","ucode":"2242A457B0E10D","user_header":"https://static001.geekbang.org/account/avatar/00/11/81/45/9aa91b75.jpg","comment_is_top":false,"comment_ctime":1566878441,"is_pvip":false,"replies":[{"id":"47619","content":"èµï¼Œæ–¹æ³•é€šé“æ˜¯åŒå‘çš„ï¼Œæ—¢æ”¯æŒDartè°ƒNativeï¼Œä¹Ÿæ”¯æŒNativeè°ƒDartã€‚ç¬¬31èŠ‚ä¼šè®²å…·ä½“çš„å®è·µ","user_name":"ä½œè€…å›å¤","user_name_real":"åœŸè±†ç›’å­","uid":"1088582","ctime":1566887092,"ip_address":"","comment_id":128426,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14451780329","product_id":100031001,"comment_content":"çœ‹äº†ä¸‹Flutteræä¾›çš„api,åŠ¨æ‰‹å®ç°äº†ä¸‹,nativeè°ƒflutterçš„æ–¹æ³•<br>Future&lt;String&gt; nativeCallFlutter(int a) async {<br>  print(&#39;success $a&#39;);<br>  return &#39;success&#39;;<br>}<br><br>platform.setMethodCallHandler((MethodCall call) async {<br>    if (call.method == &#39;nativeCallFlutter&#39;) {<br>     return await nativeCallFlutter(call.arguments);<br>    }<br>    return &#39;none&#39;;<br>  });<br><br>åœ¨iOSç«¯è°ƒç”¨:<br>[channel invokeMethod:@&quot;nativeCallFlutter&quot; arguments:@1 result:^(id  _Nullable result) {<br>        NSLog(@&quot;result = %@&quot;,result);<br>    }];","like_count":3,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"åœŸè±†ç›’å­","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464942,"discussion_content":"èµï¼Œæ–¹æ³•é€šé“æ˜¯åŒå‘çš„ï¼Œæ—¢æ”¯æŒDartè°ƒNativeï¼Œä¹Ÿæ”¯æŒNativeè°ƒDartã€‚ç¬¬31èŠ‚ä¼šè®²å…·ä½“çš„å®è·µ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566887092,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":210347,"user_name":"å¼ è®­åš-forrest","can_delete":false,"product_type":"c1","uid":1331072,"ip_address":"","ucode":"9A50F9BD3FFDE1","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLIdTsqPhlVH3TFElzic8422uBDelRjYiaktCJRmIRpLrgBBfBKnSO9PlbHibnHAc9cQEmLHes3fayEw/132","comment_is_top":false,"comment_ctime":1587725173,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5882692469","product_id":100031001,"comment_content":"result.success(0); è¿™ä¸ªæ¢äº† ç°åœ¨å‚æ•°è¦æ˜¯mapäº†","like_count":1},{"had_liked":false,"id":160578,"user_name":"å¯‚å¯ä¸ç‚¹çƒŸ","can_delete":false,"product_type":"c1","uid":1254832,"ip_address":"","ucode":"14050212660218","user_header":"https://static001.geekbang.org/account/avatar/00/13/25/b0/2736225b.jpg","comment_is_top":false,"comment_ctime":1575978876,"is_pvip":false,"replies":[{"id":"63381","content":"çœ‹æ€ä¹ˆç†è§£ï¼Œå¦‚æœä½ ç†è§£èƒ½æ“ä½œUIçš„çº¿ç¨‹å°±æ˜¯UIçº¿ç¨‹ï¼Œé‚£UIçº¿ç¨‹ç¡®å®ä¸ä¸€å®šæ˜¯ä¸»çº¿ç¨‹<br>","user_name":"ä½œè€…å›å¤","user_name_real":"åœŸè±†ç›’å­","uid":"1088582","ctime":1577436293,"ip_address":"","comment_id":160578,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5870946172","product_id":100031001,"comment_content":"è€ŒåŸç”Ÿä»£ç åœ¨å¤„ç†æ–¹æ³•è°ƒç”¨è¯·æ±‚æ—¶ï¼Œå¦‚æœæ¶‰åŠåˆ°å¼‚æ­¥æˆ–éä¸»çº¿ç¨‹åˆ‡æ¢ï¼Œéœ€è¦ç¡®ä¿å›è°ƒè¿‡ç¨‹æ˜¯åœ¨åŸç”Ÿç³»ç»Ÿçš„ UI çº¿ç¨‹ï¼ˆä¹Ÿå°±æ˜¯ Android å’Œ iOS çš„ä¸»çº¿ç¨‹ï¼‰ã€‚åœ¨Androidä¸­UIç°çº¿ç¨‹ä¸ä¸€å®šæ˜¯ä¸»çº¿ç¨‹ã€‚","like_count":1,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"åœŸè±†ç›’å­","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477419,"discussion_content":"çœ‹æ€ä¹ˆç†è§£ï¼Œå¦‚æœä½ ç†è§£èƒ½æ“ä½œUIçš„çº¿ç¨‹å°±æ˜¯UIçº¿ç¨‹ï¼Œé‚£UIçº¿ç¨‹ç¡®å®ä¸ä¸€å®šæ˜¯ä¸»çº¿ç¨‹\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577436293,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":128194,"user_name":"yuhao0x0628","can_delete":false,"product_type":"c1","uid":1332463,"ip_address":"","ucode":"BFD472974828A5","user_header":"https://static001.geekbang.org/account/avatar/00/14/54/ef/3cdfd916.jpg","comment_is_top":false,"comment_ctime":1566861358,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5861828654","product_id":100031001,"comment_content":"èª¿ç”¨åŸç”Ÿèƒ½åŠ›ä½¿å¾— flutter å¦‚è™æ·»ç¿¼ï¼Œä¸¦ä¸æ˜¯è¦å®Œå…¨å–ä»£åŸç”Ÿé–‹ç™¼ï¼Œè€Œæ˜¯æ¡å–å…±ç”Ÿå…±å­˜çš„æ¦‚å¿µã€‚åˆ©ç”¨åŸç”Ÿé¾å¤§çš„ç”Ÿæ…‹ç³»ï¼Œç¬¬ä¸‰æ–¹é–‹æºçµ„ä»¶ï¼Œç‚ºåˆç”Ÿçš„ flutter æä¾›äº†æ“´å……ï¼ŒåŸç”Ÿèª¿ç”¨çš„åŠŸèƒ½ã€‚ä½¿å¾—å¾ˆå¤šåŸç”Ÿé–‹æºçµ„ä»¶çš„è§£æ±ºæ–¹æ¡ˆå¯ä»¥å¾ˆå¥½çš„å¼•å…¥ flutterï¼Œé€™æ˜¯å–œæ­¡ flutter çš„å…¶ä¸­ä¸€å€‹åŸå› ã€‚","like_count":1},{"had_liked":false,"id":357871,"user_name":"Barry","can_delete":false,"product_type":"c1","uid":1134793,"ip_address":"å¹¿ä¸œ","ucode":"1715EC3977A1D5","user_header":"https://static001.geekbang.org/account/avatar/00/11/50/c9/1bec2c98.jpg","comment_is_top":false,"comment_ctime":1663723109,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1663723109","product_id":100031001,"comment_content":"å¯¹æ¯”åŸç”Ÿï¼Œä½¿ç”¨æ–¹æ³•é€šé“æ€§èƒ½æ€ä¹ˆæ ·ï¼Œæ˜¯å¦å¯èƒ½æœ‰æ˜æ˜¾çš„æ€§èƒ½æŠ˜æŸ","like_count":0},{"had_liked":false,"id":298100,"user_name":"å´å¼€","can_delete":false,"product_type":"c1","uid":1481849,"ip_address":"","ucode":"0A55B7A90A1D0F","user_header":"","comment_is_top":false,"comment_ctime":1623913147,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1623913147","product_id":100031001,"comment_content":"æ–‡ç« æ¼äº†ç‚¹ä¸œè¥¿ï¼ŒFlutterStreamHandlerè¿™ä¸ªç›‘å¬ï¼Œå½“åŸç”Ÿç»è¿‡æŸé¡¹äº‹ä»¶åï¼Œå›è°ƒç»™flutter","like_count":0},{"had_liked":false,"id":241001,"user_name":"å®‰è¿ªå¯†æ©","can_delete":false,"product_type":"c1","uid":1331611,"ip_address":"","ucode":"A6F3F67CF8E6F8","user_header":"https://static001.geekbang.org/account/avatar/00/14/51/9b/ccea47d9.jpg","comment_is_top":false,"comment_ctime":1597146637,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"1597146637","product_id":100031001,"comment_content":"è€å¸ˆï¼Œè¯·é—®æˆ‘çš„é¡¹ç›®androidç¼–è¯‘åçš„è¯­è¨€æ˜¯kotlinï¼Œè€Œä¸æ˜¯javaï¼Œä½†æ˜¯æˆ‘ä»¬è¦æ¥å…¥çš„ç¬¬ä¸‰æ–¹æ˜¯javaï¼Œæ€ä¹ˆèƒ½æ›´æ”¹flutterç¼–è¯‘åçš„androidé¡¹ç›®è¯­è¨€å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1653754,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3b/fa/2cebefff.jpg","nickname":"æ›¾å®¶äºŒå¥³å©¿","note":"","ucode":"99B7FFD1C71E47","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":323320,"discussion_content":"kotlinæ”¯æŒè°ƒç”¨java","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604916503,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1215387,"avatar":"","nickname":"lala","note":"","ucode":"61798D0911ECBA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298316,"discussion_content":"æ–°å»ºæ—¶å–æ¶ˆå‹¾é€‰kotlinå’Œswiftå³å¯ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597244221,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1331611,"avatar":"https://static001.geekbang.org/account/avatar/00/14/51/9b/ccea47d9.jpg","nickname":"å®‰è¿ªå¯†æ©","note":"","ucode":"A6F3F67CF8E6F8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1215387,"avatar":"","nickname":"lala","note":"","ucode":"61798D0911ECBA","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298883,"discussion_content":"è¯·é—®å·²ç»å»ºå¥½çš„é¡¹ç›®èƒ½æ”¹å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597460892,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":298316,"ip_address":""},"score":298883,"extra":""}]}]},{"had_liked":false,"id":178096,"user_name":"æ»¡å¤§å¤§","can_delete":false,"product_type":"c1","uid":1170022,"ip_address":"","ucode":"06DE739A6CE9EF","user_header":"https://static001.geekbang.org/account/avatar/00/11/da/66/5858322e.jpg","comment_is_top":false,"comment_ctime":1581585841,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"1581585841","product_id":100031001,"comment_content":"getFlutterView()è¿™ä¸ªæ–¹æ³•æ‰¾ä¸åˆ°ï¼Œè€å¸ˆè¿™æ˜¯å•¥åŸå› å•Š","like_count":0,"discussions":[{"author":{"id":1331072,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLIdTsqPhlVH3TFElzic8422uBDelRjYiaktCJRmIRpLrgBBfBKnSO9PlbHibnHAc9cQEmLHes3fayEw/132","nickname":"å¼ è®­åš-forrest","note":"","ucode":"9A50F9BD3FFDE1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":249867,"discussion_content":"flutterEngine?.dartExecutor?.binaryMessenger ä»£æ›¿","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1587968627,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":170654,"user_name":"ç¥å·…å·…","can_delete":false,"product_type":"c1","uid":1455861,"ip_address":"","ucode":"8A5929FC940134","user_header":"https://static001.geekbang.org/account/avatar/00/16/36/f5/a10bfe05.jpg","comment_is_top":false,"comment_ctime":1578653446,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1578653446","product_id":100031001,"comment_content":"è¯·é—®æœ€æ–°çš„1.12ï¼Œæ–°å»ºflutterviewcontrolleræ˜¯ä¸æ˜¯ä¸ä¼šæ–°å»ºengineäº†ï¼Œè€Œæ˜¯å¯ä»¥å¤ç”¨åˆå§‹åŒ–åˆ›å»ºçš„engine","like_count":0},{"had_liked":false,"id":147032,"user_name":"èœå¤´","can_delete":false,"product_type":"c1","uid":1456964,"ip_address":"","ucode":"C5E95519F9EA21","user_header":"https://static001.geekbang.org/account/avatar/00/16/3b/44/dd534c9b.jpg","comment_is_top":false,"comment_ctime":1572769124,"is_pvip":false,"replies":[{"id":"57147","content":"è¿™ç§å»ºè®®åªåœ¨åŸç”Ÿå®ç°ç•Œé¢ï¼Œflutteræ¥å—æœ€åé€‰æ‹©çš„å›¾ç‰‡åœ°å€","user_name":"ä½œè€…å›å¤","user_name_real":"åœŸè±†ç›’å­","uid":"1088582","ctime":1573010944,"ip_address":"","comment_id":147032,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1572769124","product_id":100031001,"comment_content":"å¦‚æœæ˜¯è·å–ç³»ç»Ÿç›¸å†Œç›´æ¥è·å– å›¾ç‰‡å¯¹è±¡<br>Dart æ”¯æŒå„ä¸ªå¹³å°çš„ image å¯¹è±¡ç±»å‹å—","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"åœŸè±†ç›’å­","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":473104,"discussion_content":"è¿™ç§å»ºè®®åªåœ¨åŸç”Ÿå®ç°ç•Œé¢ï¼Œflutteræ¥å—æœ€åé€‰æ‹©çš„å›¾ç‰‡åœ°å€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573010944,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":135975,"user_name":"è¾‰å“¥","can_delete":false,"product_type":"c1","uid":1236983,"ip_address":"","ucode":"21A65F4EE6CD04","user_header":"","comment_is_top":false,"comment_ctime":1569319008,"is_pvip":false,"replies":[{"id":"52450","content":"ä¸ç‰¹æ®Šå¤„ç†çš„è¯ï¼Œæ˜¯ä¸€ä¸ªè¿›ç¨‹","user_name":"ä½œè€…å›å¤","user_name_real":"åœŸè±†ç›’å­","uid":"1088582","ctime":1569501234,"ip_address":"","comment_id":135975,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1569319008","product_id":100031001,"comment_content":"é—®ä¸€ä¸‹,Flutterå’ŒåŸç”Ÿåº”ç”¨åº”è¯¥ä¸å¤„äºåŒä¸€ä¸ªè¿›ç¨‹å§","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"åœŸè±†ç›’å­","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468410,"discussion_content":"ä¸ç‰¹æ®Šå¤„ç†çš„è¯ï¼Œæ˜¯ä¸€ä¸ªè¿›ç¨‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569501234,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":132616,"user_name":"æ±Ÿå®å½­äºæ™","can_delete":false,"product_type":"c1","uid":1587442,"ip_address":"","ucode":"248C7BB01921F3","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epxMjZcn8LFy6PIT7uGzUOHTCZosTwh39jBKlyW3Ffzyscm14PQGh3QZ1GrEGF4UWxwKZrAib8AXCA/132","comment_is_top":false,"comment_ctime":1568173249,"is_pvip":false,"replies":[{"id":"52418","content":"è¿™ä¸ªæ¥å£çš„æ˜“ç”¨æ€§è²Œä¼¼ä¸å¤ªåˆç†å•Šï¼Œè°ƒç”¨æ–¹å’ŒåŸç”Ÿä»£ç å®¿ä¸»å¯¹äºå‚æ•°çš„å¤„ç†éƒ½æ¯”è¾ƒåˆ«æ‰­","user_name":"ä½œè€…å›å¤","user_name_real":"åœŸè±†ç›’å­","uid":"1088582","ctime":1569497404,"ip_address":"","comment_id":132616,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1568173249","product_id":100031001,"comment_content":"&#47;&#47; å£°æ˜ MethodChannel<br>const platform = MethodChannel(&#39;samples.chenhang&#47;utils&#39;);<br><br>&#47;&#47; å¤„ç†æŒ‰é’®ç‚¹å‡»<br>handleButtonClick(Map paramDic) async{<br>  int result;<br>  &#47;&#47; å¼‚å¸¸æ•è·<br>  try {<br>    &#47;&#47; å¼‚æ­¥ç­‰å¾…æ–¹æ³•é€šé“çš„è°ƒç”¨ç»“æœ,Map ä¸­æ’å…¥appidå’ŒåŒ…åï¼Œè·³è½¬é“¾æ¥ç­‰ä¿¡æ¯<br>    result = await platform.invokeMethod(&#39;openAppMarket&#39;, [paramDic]);<br>  }<br>  catch (e) {<br>    result = -1;<br>  }<br>  print(&quot;Resultï¼š$result&quot;);<br>}<br>","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"åœŸè±†ç›’å­","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467039,"discussion_content":"è¿™ä¸ªæ¥å£çš„æ˜“ç”¨æ€§è²Œä¼¼ä¸å¤ªåˆç†å•Šï¼Œè°ƒç”¨æ–¹å’ŒåŸç”Ÿä»£ç å®¿ä¸»å¯¹äºå‚æ•°çš„å¤„ç†éƒ½æ¯”è¾ƒåˆ«æ‰­","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569497404,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":129366,"user_name":"å°æ°´æ»´","can_delete":false,"product_type":"c1","uid":1411555,"ip_address":"","ucode":"559FAF5F117BB5","user_header":"https://static001.geekbang.org/account/avatar/00/15/89/e3/aa57d3b2.jpg","comment_is_top":false,"comment_ctime":1567097952,"is_pvip":false,"replies":[{"id":"48960","content":"æ¯å¯åŠ¨ä¸€ä¸ª FlutterVCå®ä¾‹ï¼Œå°±ä¼šåˆ›å»ºä¸€å¥—æ–°çš„æ¸²æŸ“æœºåˆ¶ï¼Œå³ Flutter Engineï¼Œä»¥åŠåº•å±‚çš„ Isolateã€‚è¿™äº›å®ä¾‹ä¹‹é—´çš„å†…å­˜æ˜¯ä¸äº’ç›¸å…±äº«çš„ï¼Œç³»ç»Ÿèµ„æºæ¶ˆè€—æ¯”è¾ƒå¤§","user_name":"ä½œè€…å›å¤","user_name_real":"åœŸè±†ç›’å­","uid":"1088582","ctime":1567527856,"ip_address":"","comment_id":129366,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1567097952","product_id":100031001,"comment_content":"iOSç³»ç»Ÿåˆ›å»ºå¤šä»½FlutterViewControllerä¼šæœ‰ä»€ä¹ˆé—®é¢˜å—","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"åœŸè±†ç›’å­","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465423,"discussion_content":"æ¯å¯åŠ¨ä¸€ä¸ª FlutterVCå®ä¾‹ï¼Œå°±ä¼šåˆ›å»ºä¸€å¥—æ–°çš„æ¸²æŸ“æœºåˆ¶ï¼Œå³ Flutter Engineï¼Œä»¥åŠåº•å±‚çš„ Isolateã€‚è¿™äº›å®ä¾‹ä¹‹é—´çš„å†…å­˜æ˜¯ä¸äº’ç›¸å…±äº«çš„ï¼Œç³»ç»Ÿèµ„æºæ¶ˆè€—æ¯”è¾ƒå¤§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567527856,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":129089,"user_name":"ptlCoder","can_delete":false,"product_type":"c1","uid":1029656,"ip_address":"","ucode":"B7CF1C4A5970B9","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b6/18/ede273fe.jpg","comment_is_top":false,"comment_ctime":1567040917,"is_pvip":false,"replies":[{"id":"48069","content":"1.æ²¡è¦æ±‚ï¼Œä¸»è¦Dartå±‚ä¸åŸç”Ÿå®¿ä¸»å±‚ä¿æŒä¸€è‡´å°±å¯ä»¥ï¼›<br>2.å¯¹","user_name":"ä½œè€…å›å¤","user_name_real":"åœŸè±†ç›’å­","uid":"1088582","ctime":1567058205,"ip_address":"","comment_id":129089,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1567040917","product_id":100031001,"comment_content":"methodChannelWithName:@&quot;samples.chenhang&#47;utils&quot; <br>è¿™ä¸ªé€šé“åç§°æœ‰ä»€ä¹ˆè¦æ±‚å˜›ï¼Ÿè¿˜æ˜¯è¯´è§åçŸ¥æ„å°±å¥½ï¼Ÿ<br>å¦å¤–ï¼Œå¦‚æœflutterå¾ˆå¤šåœ°æ–¹éƒ½ç”¨åˆ°äº†åŸç”Ÿç³»ç»Ÿæ–¹æ³•ï¼Œå²‚ä¸æ˜¯åœ¨iOSæˆ–å®‰å“flutterå…¥å£é‚£åšå¾ˆå¤šä¸ªåˆ¤æ–­ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"åœŸè±†ç›’å­","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465269,"discussion_content":"1.æ²¡è¦æ±‚ï¼Œä¸»è¦Dartå±‚ä¸åŸç”Ÿå®¿ä¸»å±‚ä¿æŒä¸€è‡´å°±å¯ä»¥ï¼›\n2.å¯¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567058205,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":128428,"user_name":"è®¸ç«¥ç«¥","can_delete":false,"product_type":"c1","uid":1003005,"ip_address":"","ucode":"4B799C0C6BC678","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4d/fd/0aa0e39f.jpg","comment_is_top":false,"comment_ctime":1566878500,"is_pvip":false,"replies":[{"id":"47618","content":"èµ","user_name":"ä½œè€…å›å¤","user_name_real":"åœŸè±†ç›’å­","uid":"1088582","ctime":1566886950,"ip_address":"","comment_id":128428,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1566878500","product_id":100031001,"comment_content":"dartå±‚é€šè¿‡platform.invokeMethod ç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥åŠ¨æ€å‚æ•°<br>nativeå±‚å¯ä»¥é€šè¿‡call.argumentæ‹¿åˆ°å‚æ•°","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"åœŸè±†ç›’å­","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464943,"discussion_content":"èµ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566886950,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":128352,"user_name":"å®‡","can_delete":false,"product_type":"c1","uid":1331553,"ip_address":"","ucode":"41CAD68B5474A2","user_header":"https://static001.geekbang.org/account/avatar/00/14/51/61/9c5beba4.jpg","comment_is_top":false,"comment_ctime":1566873467,"is_pvip":false,"replies":[{"id":"47620","content":"èµ","user_name":"ä½œè€…å›å¤","user_name_real":"åœŸè±†ç›’å­","uid":"1088582","ctime":1566887172,"ip_address":"","comment_id":128352,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1566873467","product_id":100031001,"comment_content":"dartå±‚ï¼š<br>platform.invokeMethod(&#39;openAppStore&#39;, {&quot;appId&quot;: &quot;com.tencent.mm&quot;});<br><br>nativeå±‚ï¼š<br>String appId = call.argument(&quot;appId&quot;);<br>                            try {<br>                                Uri uri = Uri.parse(&quot;market:&#47;&#47;details?id=&quot; + appId);<br>                                Intent intent = new Intent(Intent.ACTION_VIEW, uri);<br>                                intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);<br>                                startActivity(intent);<br>                            } catch (Exception e) {<br>                                result.error(&quot;UNAVAILABLE&quot;, &quot;æ²¡æœ‰å®‰è£…åº”ç”¨å¸‚åœº&quot;, null);<br>                            }","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"åœŸè±†ç›’å­","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464914,"discussion_content":"èµ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566887172,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}