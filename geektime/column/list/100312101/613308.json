{"id":613308,"title":"04ï½œæ³›åŒ–è°ƒç”¨ï¼šä¸‰æ­¥æ•™ä½ æ­å»ºé€šç”¨çš„æ³›åŒ–è°ƒç”¨æ¡†æ¶","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯ä½•è¾‰ã€‚æˆ‘ä»¬ç»§ç»­æ¢ç´¢Dubboæ¡†æ¶çš„ç¬¬ä¸‰é“ç‰¹è‰²é£å‘³ï¼Œæ³›åŒ–è°ƒç”¨ã€‚</p><p>æåˆ°è°ƒç”¨ï¼Œæˆ‘æƒ³ä½ è‚¯å®šä¸é™Œç”Ÿï¼Œå‰é¢æˆ‘ä»¬ä¹Ÿå­¦ä¹ è¿‡åŒæ­¥è°ƒç”¨ã€å¼‚æ­¥è°ƒç”¨ï¼Œæ ¸å¿ƒæ˜¯ä¸ºäº†è§£å†³æ•°æ®ç«¯åˆ°ç«¯ä¼ è¾“çš„è°ƒç”¨é—®é¢˜ã€‚é‚£ä»Šå¤©è¦å­¦ä¹ çš„æ–°å‹è°ƒç”¨æŠ€èƒ½â€”â€”æ³›åŒ–è°ƒç”¨åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿåˆèƒ½è§£å†³å“ªäº›å®é™…é—®é¢˜å‘¢ï¼Ÿè¯ä¸å¤šè¯´ï¼Œæˆ‘ä»¬é©¬ä¸Šå¼€å§‹ã€‚</p><p>æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œé¡µé¢ä¸åå°çš„äº¤äº’è°ƒç”¨æµç¨‹ä¸€èˆ¬æ˜¯ï¼Œé¡µé¢å‘èµ·HTTPè¯·æ±‚ï¼Œé¦–å…ˆåˆ°è¾¾WebæœåŠ¡å™¨ï¼Œç„¶åç”±WebæœåŠ¡å™¨å‘åç«¯å„ç³»ç»Ÿå‘èµ·è°ƒç”¨ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/8f/3a/8ffdeecf6aa6d402cd629cc7391a843a.jpg?wh=1920x823\" alt=\"å›¾ç‰‡\"></p><p>å‡è®¾è¿™æ˜¯ä¸€æ¬¡æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯çš„è¯·æ±‚ï¼Œæ ¸å¿ƒé€»è¾‘å®Œå…¨åœ¨åç«¯ç³»ç»Ÿï¼Œä½ ä¸€èˆ¬åœ¨WebæœåŠ¡å™¨ä¼šæ€ä¹ˆå†™å‘¢ï¼Ÿ</p><p>è¿™ä¸ªç®€å•ï¼Œä½ è‡ªä¿¡ç§€å‡ºäº†ä»£ç ï¼š</p><pre><code class=\"language-java\">@RestController\npublic class UserController {\n    // å“åº”ç ä¸ºæˆåŠŸæ—¶çš„å€¼\n    public static final String SUCC = \"000000\";\n    \n    // å®šä¹‰è®¿é—®ä¸‹æ¸¸æŸ¥è¯¢ç”¨æˆ·æœåŠ¡çš„å­—æ®µ\n    @DubboReference\n    private UserQueryFacade userQueryFacade;\n    \n    // å®šä¹‰URLåœ°å€\n    @PostMapping(\"/queryUserInfo\")\n    public String queryUserInfo(@RequestBody QueryUserInfoReq req){\n        // å°†å…¥å‚çš„reqè½¬ä¸ºä¸‹æ¸¸æ–¹æ³•çš„å…¥å‚å¯¹è±¡ï¼Œå¹¶å‘èµ·è¿œç¨‹è°ƒç”¨\n        QueryUserInfoResp resp = \n                userQueryFacade.queryUserInfo(convertReq(req));\n        \n        // åˆ¤æ–­å“åº”å¯¹è±¡çš„å“åº”ç ï¼Œä¸æ˜¯æˆåŠŸçš„è¯ï¼Œåˆ™ç»„è£…å¤±è´¥å“åº”\n        if(!SUCC.equals(resp.getRespCode())){\n            return RespUtils.fail(resp);\n        }\n        \n        // å¦‚æœå“åº”ç ä¸ºæˆåŠŸçš„è¯ï¼Œåˆ™ç»„è£…æˆåŠŸå“åº”\n        return RespUtils.ok(resp);\n    }\n}\n</code></pre><!-- [[[read_end]]] --><p>åœ¨ UserController æ§åˆ¶å™¨ä¸­ï¼Œå®šä¹‰äº†ä¸€ä¸ªæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯çš„URLåœ°å€ï¼Œæ¥ç€åœ¨ queryUserInfo æ–¹æ³•ä¸­ï¼Œå°† HTTPçš„è¯·æ±‚å‚æ•°å¯¹è±¡è½¬æ¢ä¸ºä¸‹æ¸¸æ¥å£çš„å…¥å‚å¯¹è±¡ï¼Œç„¶åè°ƒç”¨ä¸‹æ¸¸æ¥å£å‘èµ·è¿œç¨‹è°ƒç”¨ï¼Œæœ€åé’ˆå¯¹å“åº”ç åšåˆ¤æ–­ï¼Œå¹¶åŒ…è£…ä¸‹æ¸¸å¯¹è±¡è¿”å›ç»™å‰ç«¯ã€‚</p><p>ä»£ç é€»è¾‘éå¸¸ç®€å•ï¼Œè¿™æ ·çš„æŸ¥è¯¢ç”¨æˆ·è¯·æ±‚åœ¨æ—¥å¸¸å¼€å‘ä¸­æˆ‘ä»¬ä¹Ÿå†™è¿‡ä¸å°‘äº†ï¼Œé‚£å¯¹äºè¿™æ ·çš„åŠŸèƒ½ï¼Œä½ èƒ½æ€»ç»“å‡ºå¼€å‘æµç¨‹æ­¥éª¤ä¹ˆï¼Ÿ</p><p>ç»™ä¸ªå°æç¤ºï¼Œå¯ä»¥åˆ†æä¸€ä¸‹ queryUserInfo çš„å®ç°ä½“é€»è¾‘ï¼Œå¦‚æœä¸ç¡®å®šä¹Ÿå¯ä»¥è¯•ç€å†å†™å‡ ä¸ªç±»ä¼¼çš„åŠŸèƒ½ï¼Œå°±èƒ½å¾ˆé¡ºåˆ©åœ°æ€»ç»“å‡ºæ¥äº†ã€‚</p><p>å¼€å‘æµç¨‹æ­¥éª¤å°±æ˜¯ï¼š</p><ol>\n<li>å®šä¹‰&nbsp;URL&nbsp;åœ°å€ç»™å‰ç«¯</li>\n<li>æ–°å»º&nbsp;Controller&nbsp;æ§åˆ¶å™¨</li>\n<li>æ–°å¢ä¸€ä¸ªæ–¹æ³•</li>\n<li>æ–¹æ³•ä¸Šæ·»åŠ å¤„ç†è¯·æ±‚çš„æ³¨è§£</li>\n<li>å®šä¹‰è®¿é—®ä¸‹æ¸¸æœåŠ¡çš„å˜é‡</li>\n<li>å‘èµ·è¿œç¨‹è°ƒç”¨</li>\n<li>åˆ¤æ–­å“åº”æˆåŠŸæˆ–è€…å¤±è´¥</li>\n<li>å°†ç»“æœåŒ…è£…åä¼ ç»™å‰ç«¯</li>\n</ol><p>åœ¨æ€»ç»“å¼€å‘æ­¥éª¤çš„åŒæ—¶ï¼Œä¸çŸ¥é“ä½ æœ‰æ²¡æœ‰å‘ç°ä¸€æ¡æƒŠäººçš„è§„å¾‹ï¼šqueryUserInfo åœ¨ UserController ä¸­æ²¡æœ‰å®è´¨æ€§çš„ä¸šåŠ¡é€»è¾‘ã€‚WebæœåŠ¡å™¨åªæ˜¯ç¼–å†™ä»£ç æŠŠæ•°æ®åšäº†ä¸‹åŒ…è£…ï¼Œç„¶åç»™åˆ°ä¸‹æ¸¸ç³»ç»Ÿï¼Œç­‰æ”¶åˆ°ä¸‹æ¸¸ç³»ç»Ÿè¿”å›çš„å†…å®¹åï¼Œå•¥ä¹Ÿä¸åšç›´æ¥è¿”å›ç»™å‰ç«¯ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œ<strong>WebæœåŠ¡å™¨å…¶å®æ˜¯åœ¨åšä¸€äº›é€ä¼ æ€§è´¨çš„äº‹æƒ…ã€‚</strong></p><p>è€Œä¸”è¿™é‡Œæˆ‘ä»¬åªæ˜¯å†™äº†ä¸€ä¸ªæ¥å£ï¼Œå¦‚æœç°åœ¨æœ‰åå‡ ä¸ªçš„è¿è¥é¡µé¢ï¼Œå¤§çº¦äº”åä¸ªè¯·æ±‚æ¥å£ï¼Œæ¯ä¸ªè¯·æ±‚çš„æ ¸å¿ƒé€»è¾‘éƒ½åœ¨åç«¯ç³»ç»Ÿï¼Œä½ é¢„ä¼°ä¸€ä¸‹ï¼Œåœ¨WebæœåŠ¡å™¨ä¸­å†™Javaä»£ç å¤§æ¦‚è¦å†™å¤šä¹…ï¼Ÿ</p><p>è¿™æ ·çš„éœ€æ±‚é‡ï¼Œæˆ‘ä»¬ææŒ‡ä¸€ç®—ï¼Œæ¯ä¸ªæ¥å£å‡è®¾ç¼–ç åŠ è‡ªæµ‹éœ€è¦2å°æ—¶ï¼Œ50ä¸ªæ¥å£æŒ‰10å°æ—¶ä¸€å¤©æ¥ç®—ï¼Œ10å¤©æ‰èƒ½å†™å®Œï¼Œå‰ææ˜¯ä¸‹æ¸¸ç³»ç»Ÿéƒ½æŠŠæ¥å£æä¾›å¥½ï¼Œå¦‚æœä¸‹æ¸¸æ²¡æœ‰æŒ‰æ—¶æä¾›æ¥å£ï¼Œè€—æ—¶æƒ³æƒ³éƒ½å¤´çš®å‘éº»ï¼Œè¿™å¼€å‘æ•ˆç‡å±å®æœ‰ç‚¹ä½ä¸‹äº†ã€‚</p><p>é‚£å¯¹äºé€ä¼ æ€§è´¨çš„WebæœåŠ¡å™¨å¼€å‘ï¼Œæœ‰æ²¡æœ‰æ›´å¥½çš„æ–¹å¼æ¥ææ•ˆå‘¢ï¼Ÿ</p><h3>åå°„è°ƒç”¨</h3><p>ä½ å¯èƒ½ä¼šè¯´è¿™è¿˜ä¸ç®€å•ï¼Œå¯ä»¥æŠŠä¸€äº›ç›¸ä¼¼çš„ä»£ç ç”¨ä¸€ä¸ªå°æ–¹æ³•åŒ…è£…èµ·æ¥ï¼Œå‡å°‘ä»£ç ä¿®æ”¹é‡ã€‚é‚£è¯¥å‡å°‘å“ªäº›ä»£ç å‘¢ï¼Ÿ</p><p>ä¹ä¸€çœ‹ä½ å¯èƒ½æ²¡æœ‰æ€è·¯ï¼Œé‚£æˆ‘ä»¬æ¢ä¸ªé—®é¢˜ï¼šå¦‚æœè¦å†™ä¸€ä¸ªç±»ä¼¼åŠŸèƒ½ï¼Œä½ ä¼šæ€ä¹ˆå†™å‘¢ï¼Œè¦æ”¹åŠ¨å“ªäº›ä½ç½®ï¼Ÿ</p><p>ç°åœ¨ä½ ä¸€å®šå¾ˆæœ‰æŠŠæ¡äº†å§ï¼Œæ˜¯æ—¶å€™è®©CVå¤§æ³•å‘æŒ¥å¨åŠ›äº†ï¼Œæ—¥å¸¸é¢å¯¹éœ€æ±‚ï¼Œåœ¨æ•´ä½“æµç¨‹ä¸­æ¯ä¸€æ­¥éƒ½èœ»èœ“ç‚¹æ°´åœ°æ”¹ä¸€ç‚¹ç‚¹ï¼Œä¸‰ä¸‹äº”é™¤äºŒå°±æŠŠä»£ç æ”¹å®Œäº†ã€‚é‚£æˆ‘ä»¬ç»“åˆåˆšæ‰æ€»ç»“çš„å¼€å‘æµç¨‹8å¤§æ­¥ï¼Œçœ‹çœ‹æ”¹åŠ¨ç‚¹éƒ½æœ‰å“ªäº›ï¼š</p><ul>\n<li>æµç¨‹1ï¼ˆå®šä¹‰&nbsp;URL&nbsp;åœ°å€ç»™å‰ç«¯ï¼‰ï¼Œå°† /queryUserInfoé‡æ–°å®šä¹‰ä¸ºä¸€ä¸ªæ–°è·¯å¾„ã€‚</li>\n<li>æµç¨‹2ï¼ˆæ–°å»º&nbsp;Controller&nbsp;æ§åˆ¶å™¨ï¼‰ï¼Œå°† UserQueryFacade userQueryFacade å­—æ®µå®šä¹‰ä¸ºæ–°çš„æ¥å£å­—æ®µã€‚</li>\n<li>æµç¨‹3ï¼ˆæ–°å¢ä¸€ä¸ªæ–¹æ³•ï¼‰ï¼Œå°† queryUserInfo æ–¹æ³•åæ”¹æˆäº†æ–°çš„æ–¹æ³•åã€‚</li>\n<li>æµç¨‹6ï¼ˆå‘èµ·è¿œç¨‹è°ƒç”¨ï¼‰ï¼Œä¿®æ”¹äº† convertReq æ–¹æ³•ä¸­çš„å­—æ®µæ˜ å°„é€»è¾‘ï¼Œå¹¶ä¿®æ”¹äº† userQueryFacade.queryUserInfo è°ƒç”¨å½¢å¼ä¸ºæ–°çš„æ¥å£è°ƒç”¨ã€‚</li>\n</ul><p>æ¥æŒ¨ä¸ªåˆ†æå“ªäº›æ”¹åŠ¨æ˜¯å¯ä»¥æç‚¼çš„ã€‚</p><ul>\n<li>æ”¹åŠ¨ç‚¹ä¸€ï¼šæ¯æ¬¡æ–°åŠ åŠŸèƒ½éƒ½æ–°å¢äº†ä¸€ä¸ªControlleræ§åˆ¶å™¨ï¼Œå¯ä»¥çœå»å—ï¼Ÿ</li>\n</ul><p>ä»”ç»†æƒ³æƒ³ï¼Œå…¶å®ï¼Œä¹Ÿå¯ä»¥ä¸æ–°å¢ã€‚</p><p>æ—¢ç„¶å¯ä»¥ä¸æ–°å¢çš„è¯ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬åˆæ¯æ¬¡éƒ½æ–°å¢å‘¢ï¼Ÿå¾ˆå¤šäººçš„ç¬¬ä¸€æƒ³æ³•æ˜¯åˆ«äººéƒ½æ˜¯è¿™ä¹ˆæ–°å¢çš„ï¼Œé‚£æˆ‘ä»¬ä¹Ÿå°±ä¾è‘«èŠ¦ç”»ç“¢æ–°å¢äº†ã€‚</p><p>é‚£ä¸ºä»€ä¹ˆå¤§å®¶éƒ½ä¼šæ–°å¢å‘¢ï¼Œæ˜¯ä¸ºäº†å’Œå…¶ä»–ç±»ä¸ä¸€æ ·ä¹ˆï¼Ÿæ²¡é”™ï¼Œç›¸ä¿¡ä½ ä¹Ÿæ„è¯†åˆ°äº†ï¼Œä¸€èˆ¬ä¹‹æ‰€ä»¥æ–°å¢æ§åˆ¶å™¨ï¼Œä¸»è¦æ˜¯åœ¨åšä»£ç å½’ç±»ã€åŠŸèƒ½å½’ç±»è€Œå·²ï¼Œæ˜“äºç†è§£å’Œç»´æŠ¤ã€‚</p><ul>\n<li>æ”¹åŠ¨ç‚¹äºŒï¼šuserQueryFacade å­—æ®µçš„å®šä¹‰ï¼Œå¯ä»¥çœå»ä¹ˆï¼Ÿ</li>\n</ul><p>å­—æ®µçš„å®šä¹‰ï¼Œå¦‚æœçœå»ï¼Œå°±å¾—å»Springå®¹å™¨ä¸­æ‹¿ï¼Œè¿™å€’æ˜¯å°äº‹ï¼Œä½†çœå»å @DubboReference æ³¨è§£å°±ä¸å¥½åšäº†ï¼Œè¿™ä¸ªæš‚æ—¶ä¸èƒ½çœã€‚</p><ul>\n<li>æ”¹åŠ¨ç‚¹ä¸‰ï¼š/queryUserInfo è¿™ä¸ªè·¯å¾„å¯ä»¥çœä¹ˆï¼Ÿ</li>\n</ul><p>è¿™ä¸ªé—®é¢˜ä½ è‚¯å®šå¾ˆè‡ªä¿¡ï¼Œæ²¡æ³•çœï¼Œçœäº†çš„è¯ç”¨æˆ·éƒ½ä¸çŸ¥é“è¯·æ±‚ä»€ä¹ˆè·¯å¾„äº†ï¼Œå¾—ä¿ç•™ã€‚</p><p>ç¬¬å››æ­¥æœ‰2ä¸ªæ”¹åŠ¨ç‚¹ï¼Œæˆ‘ä»¬å…ˆçœ‹ç¬¬ä¸€ä¸ªã€‚</p><ul>\n<li>æ”¹åŠ¨ç‚¹å››ï¼šconvertReq è¿™ä¸ªæ–¹æ³•çš„é€»è¾‘å¯ä»¥çœä¹ˆï¼Ÿ</li>\n</ul><p>convertReq æ–¹æ³•å°±æ˜¯ä¸ªè½¬æ¢å…¥å‚å­—æ®µä¸ºä¸‹æ¸¸å…¥å‚å­—æ®µçš„æ˜ å°„å…³ç³»ï¼Œæ‰€ä»¥å¯ä»¥çœï¼Œä½†æ˜¯å‰ææ˜¯å…¥å‚å­—æ®µå’Œä¸‹æ¸¸å­—æ®µå¾—ä¸€æ ·ï¼Œè¿™æ ·å°±èƒ½ç®€å•ç²—æš´åœ°å…ˆå°† req åºåˆ—åŒ–ä¸º Stringï¼Œå†å°† String ååºåˆ—åŒ–ä¸ºä¸‹æ¸¸å…¥å‚å¯¹è±¡ã€‚</p><p>å¥½å†çœ‹ç¬¬äºŒä¸ªã€‚</p><ul>\n<li>æ”¹åŠ¨ç‚¹äº”ï¼šuserQueryFacade.queryUserInfo è¿™ä¸ªè°ƒç”¨å¯ä»¥çœä¹ˆï¼Ÿ</li>\n</ul><p>è¿™å¾—ç»“åˆæ”¹åŠ¨ç‚¹äºŒï¼Œå› ä¸º userQueryFacade å­—æ®µå®šä¹‰ä¸èƒ½çœå»ï¼Œæƒ³è¦é€»è¾‘é€šç”¨ï¼Œæˆ‘ä»¬é¡¶å¤šå¯ä»¥æŠŠ userQueryFacade å¯¹è±¡å’Œ queryUserInfo ä¼ åˆ°å…¬ç”¨æ–¹æ³•é‡Œå»ã€‚<strong>é‚£æœ‰äº†å¯¹è±¡å’Œæ–¹æ³•åï¼Œæ€ä¹ˆè°ƒç”¨åˆ°å¯¹è±¡çš„æ–¹æ³•ä¸Šå‘¢ï¼Ÿ</strong></p><p>è¿™ä¸æ˜¯æ­£å¸¸çš„è°ƒç”¨æ–¹å¼ï¼Œè”æƒ³ä¸‹å·²å­¦çš„ Java åŸºç¡€çŸ¥è¯†ï¼Œçœ‹çœ‹å“ªä¸ªçŸ¥è¯†ç‚¹å¯ä»¥åœ¨çŸ¥é“å¯¹è±¡å’Œæ–¹æ³•åçš„æ—¶å€™å‘èµ·è°ƒç”¨çš„ã€‚æ²¡é”™å°±æ˜¯â€œåå°„â€ï¼Œåå°„çš„æ—¶å€™è®°å¾—è®¾ç½® setAccessible(true)ï¼Œä»¥é¿å…æ— è®¿é—®æƒé™ã€‚</p><p>å¥½ï¼Œæˆ‘ä»¬å°ç»“ä¸€ä¸‹å“ªäº›ä»£ç æ˜¯å¯ä»¥çœçš„ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/1c/dc/1c9bc13e9fdde8889254589a680ef3dc.jpg?wh=1920x823\" alt=\"å›¾ç‰‡\"></p><p>å¤§è‡´æœ‰ä¸‰å—ï¼ŒèŠ‚çœæ§åˆ¶å™¨çš„åˆ›å»ºã€convertReqè½¬æ¢é€»è¾‘é€šç”¨åŒ–å¤„ç†ã€userQueryFacade.queryUserInfoè°ƒç”¨æ–¹å¼ã€‚</p><p>ä¿®æ”¹åçš„ä»£ç å°±æ˜¯è¿™ä¸ªæ ·å­ï¼š</p><pre><code class=\"language-java\">@RestController\npublic class UserController {\n    // å“åº”ç ä¸ºæˆåŠŸæ—¶çš„å€¼\n    public static final String SUCC = \"000000\";\n    \n    // å®šä¹‰è®¿é—®ä¸‹æ¸¸æŸ¥è¯¢ç”¨æˆ·æœåŠ¡çš„å­—æ®µ\n    @DubboReference\n    private UserQueryFacade userQueryFacade;\n    \n    // å®šä¹‰URLåœ°å€\n    @PostMapping(\"/queryUserInfo\")\n    public String queryUserInfo(@RequestBody QueryUserInfoReq req){\n        // è°ƒç”¨å…¬å…±æ–¹æ³•\n        return commonInvoke(userQueryFacade, \"queryUserInfo\", req);\n    }\n    \n    /**\n     * &lt;h2&gt;æ¨¡æ‹Ÿå…¬å…±çš„è¿œç¨‹è°ƒç”¨æ–¹æ³•.&lt;/h2&gt;\n     *\n     * @param reqObjï¼šä¸‹æ¸¸çš„æ¥å£çš„å®ä¾‹å¯¹è±¡ï¼Œå³é€šè¿‡ @DubboReference å¾—åˆ°çš„å¯¹è±¡ã€‚\n     * @param mtdNameï¼šä¸‹æ¸¸æ¥å£çš„æ–¹æ³•åã€‚\n     * @param reqParamsï¼šéœ€è¦è¯·æ±‚åˆ°ä¸‹æ¸¸çš„æ•°æ®ã€‚\n     * @return ç›´æ¥ç»“æœæ•°æ®ã€‚\n     * @throws InvocationTargetException\n     * @throws IllegalAccessException\n     */\n    public static String commonInvoke(Object reqObj, String mtdName, Object reqParams) throws InvocationTargetException, IllegalAccessException {\n        // é€šè¿‡åå°„æ‰¾åˆ° reqObj(ä¾‹ï¼šuserQueryFacade) ä¸­çš„ mtdName(ä¾‹ï¼šqueryUserInfo) æ–¹æ³•\n        Method reqMethod = ReflectionUtils.findMethod(reqObj.getClass(), mtdName);\n        // å¹¶è®¾ç½®æŸ¥æ‰¾å‡ºæ¥çš„æ–¹æ³•å¯è¢«è®¿é—®\n        ReflectionUtils.makeAccessible(reqMethod);\n        \n        // é€šè¿‡åºåˆ—åŒ–å·¥å…·å°† reqParams åºåˆ—åŒ–ä¸ºå­—ç¬¦ä¸²æ ¼å¼\n        String reqParamsStr = JSON.toJSONString(reqParams);\n        // ç„¶åå†å°† reqParamsStr ååºåˆ—åŒ–ä¸ºä¸‹æ¸¸å¯¹è±¡æ ¼å¼ï¼Œå¹¶åå°„è°ƒç”¨ invoke æ–¹æ³•\n        Object resp =  reqMethod.invoke(reqObj, JSON.parseObject(reqParamsStr, reqMethod.getParameterTypes()[0]));\n        \n        // åˆ¤æ–­å“åº”å¯¹è±¡çš„å“åº”ç ï¼Œä¸æ˜¯æˆåŠŸçš„è¯ï¼Œåˆ™ç»„è£…å¤±è´¥å“åº”\n        if(resp == null || !SUCC.equals(OgnlUtils.getValue(resp, \"respCode\"))){\n            return RespUtils.fail(resp);\n        }\n        // å¦‚æœå“åº”ç ä¸ºæˆåŠŸçš„è¯ï¼Œåˆ™ç»„è£…æˆåŠŸå“åº”\n        return RespUtils.ok(resp);\n    }\n}\n</code></pre><p>ä»£ç å¤§å¤§æ”¹å–„äº† queryUserInfo çš„å®ç°é€»è¾‘ï¼Œå¹¶ä¸”æç‚¼å‡ºäº†ä¸€ä¸ª commonInvoke é€šç”¨çš„æ–¹æ³•ï¼Œå…¶ä¸­ä¸»è¦åšäº†4ä»¶äº‹æƒ…ï¼š</p><ul>\n<li>é€šè¿‡åå°„åŠŸèƒ½æ‰¾åˆ°ä¸‹æ¸¸æ¥å£çš„ method å¯¹è±¡ï¼›</li>\n<li>é€šè¿‡å…ˆåºåˆ—åŒ–ï¼Œå†ååºåˆ—åŒ–ï¼Œå°†HTTPå…¥å‚è½¬ä¸ºä¸‹æ¸¸æ¥å£å…¥å‚å¯¹è±¡ï¼›</li>\n<li>é€šè¿‡ method.invoke åå°„å‘èµ·çœŸæ­£çš„è¿œç¨‹è°ƒç”¨ï¼Œå¹¶æ‹¿åˆ°å“åº”å¯¹è±¡ï¼›</li>\n<li>é€šè¿‡ Ognl è¡¨è¾¾å¼è¯­è¨€ä»å“åº”å¯¹è±¡å–å‡º respCode å“åº”ç åšåˆ¤æ–­ï¼Œå¹¶åšæœ€ç»ˆè¿”å›ã€‚</li>\n</ul><p>è¿™æ ·ç²¾ç®€åï¼Œæˆ‘ä»¬å‘ç° queryUserInfo çš„å®ç°é€»è¾‘ç¡®å®ç®€å•å¤šäº†ï¼ŒèŠ‚çœä»£ç çš„åŒæ—¶ï¼Œè¿˜æç‚¼äº†å…¬å…±æ–¹æ³•ï¼Œçš„ç¡®å¯ä»¥èŠ‚çœä¸å°‘å¼€å‘å·¥ä½œé‡ã€‚</p><p>å¯æ˜¯ï¼ŒqueryUserInfo çš„å†…éƒ¨é€»è¾‘æ˜¯ç²¾ç®€äº†ï¼Œä»ç„¶å¾—å®šä¹‰å¥½å¤š queryUserInfo è¿™æ ·çš„æ–¹æ³•ã€è¯·æ±‚URLåœ°å€ã€ä¸‹æ¸¸æ¥å£å­—æ®µï¼Œè¿™äº›æ˜¯å¦ä¹Ÿèƒ½çœç•¥å‘¢ï¼Ÿ</p><p>å•çº¯é ç°æœ‰çš„åå°„è°ƒç”¨æ–¹å¼æ— æ³•è¿›ä¸€æ­¥ç²¾ç®€äº†ï¼Œæˆ‘ä»¬éœ€è¦è€ƒè™‘å®šåˆ¶ä¸€ç§æ›´æ–°å‹çš„è°ƒç”¨æ–¹å¼ã€‚</p><h3>æ³›åŒ–è°ƒç”¨</h3><p>å¦‚ä½•åˆ›å»ºä¸€ç§æ–°å‹è°ƒç”¨å‘¢ï¼Ÿè¿™ä¸ªæ–¹å‘è¯´èµ·æ¥ç®€å•ï¼Œåšèµ·æ¥è¿˜æ˜¯æ¯”è¾ƒå›°éš¾çš„ï¼Œä½†ä½œä¸ºæœªæ¥æŠ€æœ¯ç²¾è‹±çš„ä½ ï¼Œæ€è€ƒä¸ä¸æ€è€ƒæ˜¯ä¸¤ç äº‹ï¼Œæ€è€ƒäº†ä¹Ÿè®¸ä¼šæœ‰æ„æƒ³ä¸åˆ°çš„æ–°å‘ç°ï¼Œä¸æ€è€ƒå°±æ˜¯åŸåœ°è¸æ­¥äº†ã€‚è™½ç„¶åˆ›å»ºä¸€ç§æ–°å‹è°ƒç”¨æš‚æ—¶æ²¡æœ‰ä»€ä¹ˆå¤´ç»ªï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜æ˜¯å¯ä»¥å…ˆè§£å†³çœ¼å‰çš„ä¸€äº›é—®é¢˜ã€‚</p><p>å‰é¢ä¹Ÿæåˆ°éœ€è¦å®šä¹‰å¥½å¤šè¯·æ±‚URLåœ°å€ï¼Œ<strong>é‚£URLåœ°å€èƒ½ä¸èƒ½ç²¾ç®€å‘¢ï¼Ÿ</strong>è¿™å¯èƒ½æ˜¯æ–°çªç ´å£ã€‚</p><p>æƒ³ç²¾ç®€URLåœ°å€ï¼Œé¦–å…ˆè¦ç†è§£ä¸ºä»€ä¹ˆè¦åœ¨Controlleré‡Œé¢è®¾ç½®URLè¿™ä¸ªä¸œè¥¿ï¼Ÿåœ¨Controlleré‡Œé¢è®¾ç½®URLå°±æ˜¯ä¸ºäº†èƒ½è®©å‰ç«¯è°ƒç”¨åˆ°ã€‚</p><p>å…¶æ¬¡ï¼ŒURLä¸€èˆ¬å†™åœ¨åƒ@PostMappingã€@GetMapping è¿™æ ·çš„æ³¨è§£ä¸­ï¼Œé‚£URLæ˜¯æ€ä¹ˆè¢«è®¿é—®é€šçš„å‘¢ï¼Ÿ</p><p>è€ƒè™‘åˆ°@PostMappingã€@GetMapping æ˜¯ Spring ä½“ç³»ä¸­çš„ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ Spring æ¡†æ¶ä¸­å°è¯•æ‰¾ç­”æ¡ˆï¼Œçœ‹å®˜æ–¹æ–‡æ¡£ä¸­URLçš„å®šä¹‰è§„åˆ™ï¼Œæœä¸å…¶ç„¶ï¼Œåœ¨ <a href=\"https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc-ann-requestmapping-uri-templates\">Spring Web MVC -&gt; Annotated Controllers -&gt; URI patterns</a> è·¯å¾„ä¸‹æˆ‘ä»¬æ‰¾åˆ°äº†è§£é‡Šã€‚</p><p>æ ¸å¿ƒå°±æ˜¯ RequestMappingHandlerMapping çš„&nbsp;initHandlerMethods æ–¹æ³•é‡Œé¢çš„URLæ³¨å†Œå™¨ï¼Œè¯·æ±‚é“¾æ¥è¢«URLæ³¨å†Œå™¨åŒ¹é…æˆåŠŸäº†ï¼Œå°±å¯ä»¥è¢«è®¿é—®é€šã€‚</p><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç±»ä¼¼è¿™ç§ <code>/projects/{project}/versions</code> å ä½ç¬¦å½¢å¼çš„URLï¼Œåˆ©ç”¨ RequestMappingHandlerMapping ä¸­çš„URLæ³¨å†Œå™¨å»åŒ¹é…ã€‚å¦‚æœå¯ä»¥<strong>æŠŠä¸€äº›å˜åŒ–çš„å› å­æ”¾åˆ°URLå ä½ç¬¦ä¸­ï¼Œç²¾ç®€URLçš„æ¦‚ç‡å°±éå¸¸å¤§äº†</strong>ã€‚</p><p>å¥½æ€è·¯æœ‰äº†ï¼Œæˆ‘ä»¬å†å›çœ‹ commonInvoke è¿™ä¸ªæ ¸å¿ƒæ–¹æ³•çœ‹çœ‹å¦‚ä½•ä¿®æ”¹ï¼š</p><pre><code class=\"language-java\">/**\n * &lt;h2&gt;æ¨¡æ‹Ÿå…¬å…±çš„è¿œç¨‹è°ƒç”¨æ–¹æ³•.&lt;/h2&gt;\n *\n * @param reqObjï¼šä¸‹æ¸¸çš„æ¥å£çš„å®ä¾‹å¯¹è±¡ï¼Œå³é€šè¿‡ @DubboReference å¾—åˆ°çš„å¯¹è±¡ã€‚\n * @param mtdNameï¼šä¸‹æ¸¸æ¥å£çš„æ–¹æ³•åã€‚\n * @param reqParamsï¼šéœ€è¦è¯·æ±‚åˆ°ä¸‹æ¸¸çš„æ•°æ®ã€‚\n * @return ç›´æ¥ç»“æœæ•°æ®ã€‚\n * @throws InvocationTargetException\n * @throws IllegalAccessException\n */\npublic static String commonInvoke(Object reqObj, \n                                  String mtdName, \n                                  Object reqParams) throws InvocationTargetException, IllegalAccessException {                               \n}\n</code></pre><p>è¿™ä¸ªæ–¹æ³•æœ‰3ä¸ªå‚æ•°æ˜¯å˜åŒ–çš„ï¼š</p><ul>\n<li>reqObjï¼Œä¸‹æ¸¸æ¥å£å¯¹è±¡ï¼Œå¦‚æœèƒ½æƒ³åŠæ³•å¤„ç†æ‰ @DubboReference ä¿®é¥°æ¥å£çš„åŠŸèƒ½ï¼Œè¿™ä¸ªä¼°è®¡ä¹Ÿå¯ä»¥çœç•¥æ‰ï¼Œä½†é¦–å…ˆå¾—æ‹¿åˆ°å¯¹è±¡ï¼Œè€Œè¦æ‹¿åˆ°å¯¹è±¡å°±å¾—å…ˆçŸ¥é“æ˜¯å“ªä¸ªç±»ã€‚æ‰€ä»¥å¯¹è±¡çš„å…¨ç±»åå¯ä»¥è€ƒè™‘æ”¾åˆ°URLè·¯å¾„ä¸Šä½œä¸ºå˜é‡ã€‚</li>\n<li>mtdNameï¼Œä¸‹æ¸¸æ¥å£çš„æ–¹æ³•åï¼Œå¯ä»¥è€ƒè™‘æ”¾åˆ°URLè·¯å¾„ä¸Šä½œä¸ºå˜é‡ã€‚</li>\n<li>reqParamsï¼Œè¯·æ±‚ä¸šåŠ¡å‚æ•°ï¼ŒæŒ‰ç…§å¯¹è±¡æ¥æ”¶çš„è¯å¾—å®šä¹‰å¾ˆå¤šå¯¹è±¡å’Œå­—æ®µï¼Œå¦‚æœæŒ‰ç…§Stringæ¥æ”¶çš„è¯è²Œä¼¼å¯è¡Œã€‚</li>\n</ul><p>æˆ‘ä»¬å…ˆå°è¯•ä¿®æ”¹ä¸€ä¸‹ï¼š</p><pre><code class=\"language-java\">@RestController\npublic class CommonController {\n    // å“åº”ç ä¸ºæˆåŠŸæ—¶çš„å€¼\n    public static final String SUCC = \"000000\";\n    \n    // å®šä¹‰URLåœ°å€\n    @PostMapping(\"/gateway/{className}/{mtdName}/request\")\n    public String commonRequest(@PathVariable String className,\n                                @PathVariable String mtdName,\n                                @RequestBody String reqBody){\n        // å°†å…¥å‚çš„reqè½¬ä¸ºä¸‹æ¸¸æ–¹æ³•çš„å…¥å‚å¯¹è±¡ï¼Œå¹¶å‘èµ·è¿œç¨‹è°ƒç”¨\n        return commonInvoke(className, mtdName, reqBody);\n    }\n    \n    /**\n     * &lt;h2&gt;æ¨¡æ‹Ÿå…¬å…±çš„è¿œç¨‹è°ƒç”¨æ–¹æ³•.&lt;/h2&gt;\n     *\n     * @param classNameï¼šä¸‹æ¸¸çš„æ¥å£å½’å±æ–¹æ³•çš„å…¨ç±»åã€‚\n     * @param mtdNameï¼šä¸‹æ¸¸æ¥å£çš„æ–¹æ³•åã€‚\n     * @param reqParamsStrï¼šéœ€è¦è¯·æ±‚åˆ°ä¸‹æ¸¸çš„æ•°æ®ã€‚\n     * @return ç›´æ¥è¿”å›ä¸‹æ¸¸çš„æ•´ä¸ªå¯¹è±¡ã€‚\n     * @throws InvocationTargetException\n     * @throws IllegalAccessException\n     */\n    public static String commonInvoke(String className, \n                                      String mtdName, \n                                      String reqParamsStr) throws InvocationTargetException, IllegalAccessException, ClassNotFoundException {\n        // è¯•å›¾ä»ç±»åŠ è½½å™¨ä¸­é€šè¿‡ç±»åè·å–ç±»ä¿¡æ¯å¯¹è±¡\n        Class&lt;?&gt; clz = CommonController.class.getClassLoader().loadClass(className);\n        // ç„¶åè¯•å›¾é€šè¿‡ç±»ä¿¡æ¯å¯¹è±¡æƒ³åŠæ³•è·å–åˆ°è¯¥ç±»å¯¹åº”çš„å®ä¾‹å¯¹è±¡\n        Object reqObj = tryFindBean(clz.getClass());\n        \n        // é€šè¿‡åå°„æ‰¾åˆ° reqObj(ä¾‹ï¼šuserQueryFacade) ä¸­çš„ mtdName(ä¾‹ï¼šqueryUserInfo) æ–¹æ³•\n        Method reqMethod = ReflectionUtils.findMethod(clz, mtdName);\n        // å¹¶è®¾ç½®æŸ¥æ‰¾å‡ºæ¥çš„æ–¹æ³•å¯è¢«è®¿é—®\n        ReflectionUtils.makeAccessible(reqMethod);\n        \n        // å°† reqParamsStr ååºåˆ—åŒ–ä¸ºä¸‹æ¸¸å¯¹è±¡æ ¼å¼ï¼Œå¹¶åå°„è°ƒç”¨ invoke æ–¹æ³•\n        Object resp =  reqMethod.invoke(reqObj, JSON.parseObject(reqParamsStr, reqMethod.getParameterTypes()[0]));\n        \n        // åˆ¤æ–­å“åº”å¯¹è±¡çš„å“åº”ç ï¼Œä¸æ˜¯æˆåŠŸçš„è¯ï¼Œåˆ™ç»„è£…å¤±è´¥å“åº”\n        if(!SUCC.equals(OgnlUtils.getValue(resp, \"respCode\"))){\n            return RespUtils.fail(resp);\n        }\n        // å¦‚æœå“åº”ç ä¸ºæˆåŠŸçš„è¯ï¼Œåˆ™ç»„è£…æˆåŠŸå“åº”\n        return RespUtils.ok(resp);\n    }\n}\n</code></pre><p>å› ä¸ºå¯ä»¥é€šè¿‡å ä½ç¬¦æ¥ç²¾ç®€URLï¼Œæˆ‘ä»¬å¯¹ä»£ç åšäº†4ä¸ªè°ƒæ•´ï¼š</p><ul>\n<li>é‡æ–°å®šä¹‰äº†ä¸€ä¸ªå…¬ç”¨æ§åˆ¶å™¨ CommonControllerï¼›</li>\n<li>å®šä¹‰äº†ç»Ÿä¸€çš„URLè·¯å¾„ <code>/gateway/{className}/{mtdName}/request</code>ï¼Œå°† classNameã€mtdName åšæˆè¯·æ±‚è·¯å¾„çš„å ä½ç¬¦ï¼›</li>\n<li>ä¿®æ”¹äº†è¯·æ±‚ä¸šåŠ¡å‚æ•°çš„æ ¼å¼å®šä¹‰ï¼Œç”±å¯¹è±¡è½¬ä¸ºStringï¼›</li>\n<li>commonInvoke æ ¸å¿ƒå®ç°é€»è¾‘ä¸­ï¼Œåˆ©ç”¨ç±»åŠ è½½å™¨æ‰¾åˆ° className å¯¹åº”çš„ç±»ä¿¡æ¯ï¼Œç„¶åæƒ³åŠæ³•æ‰¾åˆ° className å¯¹åº”çš„å®ä¾‹å¯¹è±¡ã€‚</li>\n</ul><p>ä½†è¿™æ®µä»£ç æœ‰ä¸€ä¸ªé‡è¦çš„æ ¸å¿ƒé€»è¾‘è¿˜æ²¡è§£å†³ï¼Œ<strong>tryFindBeanï¼Œæˆ‘ä»¬è¯¥é€šè¿‡ä»€ä¹ˆæ ·çš„åŠæ³•æ‹¿åˆ°ä¸‹æ¸¸æ¥å£çš„å®ä¾‹å¯¹è±¡å‘¢ï¼Ÿæˆ–è€…è¯´ï¼Œè¯¥æ€ä¹ˆä»¿ç…§ @DubboReference æ³¨è§£ï¼Œæ‹¿åˆ°ä¸‹æ¸¸æ¥å£çš„å®ä¾‹å¯¹è±¡å‘¢ï¼Ÿ</strong></p><p>è™½ç„¶ä¸çŸ¥é“ @DubboReference æ³¨è§£æ˜¯æ€ä¹ˆåšåˆ°çš„ï¼Œä½†æ˜¯æˆ‘ä»¬èµ·ç èƒ½æ˜ç™½ä¸€ç‚¹ï¼Œåªè¦é€šè¿‡ @DubboReference ä¿®é¥°çš„å­—æ®µå°±èƒ½æ‹¿åˆ°å®ä¾‹å¯¹è±¡ï¼Œé‚£æ¥ä¸‹æ¥å°±æ˜¯éœ€è¦ä¸€ç‚¹è€å¿ƒçš„ç¯èŠ‚äº†ï¼Œé¡ºç€ @DubboReference æ³¨è§£çš„æ ¸å¿ƒå®ç°é€»è¾‘æ¢ç´¢ä¸€ä¸‹æºç ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/e8/ff/e88f53ba25bb35dfa02c1a38b87158ff.jpg?wh=1920x1764\" alt=\"å›¾ç‰‡\"></p><p>æœ€ç»ˆï¼Œæˆ‘ä»¬ä¼šå‘ç°æ˜¯é€šè¿‡ ReferenceConfig#get æ–¹æ³•åˆ›å»ºäº†ä»£ç†å¯¹è±¡ã€‚ä½ ä¹Ÿå¯ä»¥å‚è€ƒæˆ‘å½•åˆ¶çš„è¿™æ®µè§†é¢‘ï¼Œæ¢å¯»ç­”æ¡ˆï¼š</p><p><video poster=\"https://media001.geekbang.org/c957f5cc9a904e85ac12a8fbdd57ffd3/snapshots/fd8900ad6ba34a548450d1e6fcd1fd20-00005.jpg\" preload=\"none\" controls=\"\"><source src=\"https://media001.geekbang.org/customerTrans/7e27d07d27d407ebcc195a0e78395f55/5293a2ce-1850e8bb8a6-0000-0000-01d-dbacd.mp4\" type=\"video/mp4\"><source src=\" https://media001.geekbang.org/e5cf80ffb7cb4d479f75490113cfd5c3/7c730c6c85f14495b171ffa58dcc20a9-5a91e3098c0829ddc4e8b5c2581e4e14-sd.m3u8\" type=\"application/x-mpegURL\"></video></p><p>è¿™å¥ä»£ç ä¸å°±æ˜¯æˆ‘ä»¬å¹³å¸¸å†™Javaä»£ç æ‹¿åˆ°ä¸‹æ¸¸æ¥å£ä»£ç†å¯¹è±¡çš„æ–¹å¼ä¹ˆã€‚åŸæ¥æ ¸å¿ƒçš„è§£å†³æ–¹æ¡ˆå°±åœ¨çœ¼å‰ï¼Œä¸€ä¸ªä¸èµ·çœ¼çš„ @DubboReference æ³¨è§£çš„æ ¸å¿ƒå®ç°é€»è¾‘ï¼Œå°±æ˜¯æˆ‘ä»¬æœ€æ™®é€šçš„æ‹¿åˆ°æ¥å£ä»£ç†å¯¹è±¡çš„é€»è¾‘ã€‚</p><p>é‚£æ¥ä¸‹æ¥ï¼Œä½ çŸ¥é“è¯¥æ€ä¹ˆç»§ç»­æ”¹é€ äº†ä¹ˆï¼Ÿ</p><h2>ç¼–ç å®ç°</h2><p>ç»è¿‡ä¸€ç•ªæºç æ¢ç´¢åï¼Œæœ€éš¾è§£å†³çš„ tryFindBean é€»è¾‘ä¹Ÿæœ‰äº†å¤´ç»ªã€‚æˆ‘ä»¬æ‰¾åˆ°äº† ReferenceConfig è¿™ä¸ªæ ¸å¿ƒç±»ï¼Œæ¥ä¸‹æ¥è¦åšçš„å°±æ˜¯æ‹¿åˆ° referenceConfig#get è¿”å›çš„æ³›åŒ–å¯¹è±¡GenericServiceï¼Œç„¶åè°ƒç”¨ GenericService#$invoke æ–¹æ³•è¿›è¡Œè¿œç¨‹è°ƒç”¨ã€‚</p><p>çœ‹ä¸‹GenericService#$invoke æ–¹æ³•çš„å®šä¹‰ï¼š</p><pre><code class=\"language-java\">public interface GenericService {\n    /**\n     * Generic invocation\n     *\n     * @param method         Method name, e.g. findPerson. If there are overridden methods, parameter info is\n     *                       required, e.g. findPerson(java.lang.String)\n     * @param parameterTypes Parameter types\n     * @param args           Arguments\n     * @return invocation return value\n     * @throws GenericException potential exception thrown from the invocation\n     */\n    Object $invoke(String method, String[] parameterTypes, Object[] args) throws GenericException;\n}\n</code></pre><p>å¯ä»¥ä»æºç ä¸­çœ‹åˆ°ï¼ŒGenericService#$invoke æ–¹æ³•é™¤äº†éœ€è¦ä¸‹æ¸¸æ¥å£æ–¹æ³•åã€ä¸‹æ¸¸è¯·æ±‚å‚æ•°å¤–ï¼Œè¿˜éœ€è¦ä¸€ä¸ªä¸‹æ¸¸çš„æ–¹æ³•å…¥å‚ç±»åã€‚</p><p>æ—¢ç„¶ $invoke æ–¹æ³•è¿™ä¹ˆå®šä¹‰äº†ï¼Œé‚£æˆ‘ä»¬å¯ä»¥æŠŠæ–¹æ³•å…¥å‚çš„ç±»åä¹Ÿå®šä¹‰ä¸ºå˜é‡ã€‚è™½ç„¶æºç è¿™é‡Œæ˜¯æ¥æ”¶ä¸€ä¸ªæ•°ç»„ï¼Œä½†åªä¼ ä¸€ä¸ªä¸€èˆ¬ä¹Ÿèƒ½è§£å†³ç»å¤§éƒ¨åˆ†é—®é¢˜ï¼Œæ‰€ä»¥è¿™é‡Œï¼Œæˆ‘ä»¬å°±å…ˆæŒ‰ç…§åªæœ‰ä¸€ä¸ªæ–¹æ³•å…¥å‚ç±»åæ¥å®šä¹‰URLæ¥å£ã€‚</p><p>æŒ‰æ€è·¯æ¥è°ƒæ•´ä»£ç ï¼š</p><pre><code class=\"language-java\">@RestController\npublic class CommonController {\n    // å“åº”ç ä¸ºæˆåŠŸæ—¶çš„å€¼\n    public static final String SUCC = \"000000\";\n    \n    // å®šä¹‰URLåœ°å€\n    @PostMapping(\"/gateway/{className}/{mtdName}/{parameterTypeName}/request\")\n    public String commonRequest(@PathVariable String className,\n                                @PathVariable String mtdName,\n                                @PathVariable String parameterTypeName,\n                                @RequestBody String reqBody){\n        // å°†å…¥å‚çš„reqè½¬ä¸ºä¸‹æ¸¸æ–¹æ³•çš„å…¥å‚å¯¹è±¡ï¼Œå¹¶å‘èµ·è¿œç¨‹è°ƒç”¨\n        return commonInvoke(className, parameterTypeName, mtdName, reqBody);\n    }\n    \n    /**\n     * &lt;h2&gt;æ¨¡æ‹Ÿå…¬å…±çš„è¿œç¨‹è°ƒç”¨æ–¹æ³•.&lt;/h2&gt;\n     *\n     * @param classNameï¼šä¸‹æ¸¸çš„æ¥å£å½’å±æ–¹æ³•çš„å…¨ç±»åã€‚\n     * @param mtdNameï¼šä¸‹æ¸¸æ¥å£çš„æ–¹æ³•åã€‚\n     * @param parameterTypeNameï¼šä¸‹æ¸¸æ¥å£çš„æ–¹æ³•å…¥å‚çš„å…¨ç±»åã€‚\n     * @param reqParamsStrï¼šéœ€è¦è¯·æ±‚åˆ°ä¸‹æ¸¸çš„æ•°æ®ã€‚\n     * @return ç›´æ¥è¿”å›ä¸‹æ¸¸çš„æ•´ä¸ªå¯¹è±¡ã€‚\n     * @throws InvocationTargetException\n     * @throws IllegalAccessException\n     */\n    public static String commonInvoke(String className,\n                                      String mtdName,\n                                      String parameterTypeName,\n                                      String reqParamsStr) {\n        // ç„¶åè¯•å›¾é€šè¿‡ç±»ä¿¡æ¯å¯¹è±¡æƒ³åŠæ³•è·å–åˆ°è¯¥ç±»å¯¹åº”çš„å®ä¾‹å¯¹è±¡\n        ReferenceConfig&lt;GenericService&gt; referenceConfig = createReferenceConfig(className);\n        \n        // è¿œç¨‹è°ƒç”¨\n        GenericService genericService = referenceConfig.get();\n        Object resp = genericService.$invoke(\n                mtdName,\n                new String[]{parameterTypeName},\n                new Object[]{JSON.parseObject(reqParamsStr, Map.class)});\n        \n        // åˆ¤æ–­å“åº”å¯¹è±¡çš„å“åº”ç ï¼Œä¸æ˜¯æˆåŠŸçš„è¯ï¼Œåˆ™ç»„è£…å¤±è´¥å“åº”\n        if(!SUCC.equals(OgnlUtils.getValue(resp, \"respCode\"))){\n            return RespUtils.fail(resp);\n        }\n        \n        // å¦‚æœå“åº”ç ä¸ºæˆåŠŸçš„è¯ï¼Œåˆ™ç»„è£…æˆåŠŸå“åº”\n        return RespUtils.ok(resp);\n    }\n    \n    private static ReferenceConfig&lt;GenericService&gt; createReferenceConfig(String className) {\n        DubboBootstrap dubboBootstrap = DubboBootstrap.getInstance();\n        \n        // è®¾ç½®åº”ç”¨æœåŠ¡åç§°\n        ApplicationConfig applicationConfig = new ApplicationConfig();\n        applicationConfig.setName(dubboBootstrap.getApplicationModel().getApplicationName());\n        \n        // è®¾ç½®æ³¨å†Œä¸­å¿ƒçš„åœ°å€\n        String address = dubboBootstrap.getConfigManager().getRegistries().iterator().next().getAddress();\n        RegistryConfig registryConfig = new RegistryConfig(address);\n        ReferenceConfig&lt;GenericService&gt; referenceConfig = new ReferenceConfig&lt;&gt;();\n        referenceConfig.setApplication(applicationConfig);\n        referenceConfig.setRegistry(registryConfig);\n        referenceConfig.setInterface(className);\n        \n        // è®¾ç½®æ³›åŒ–è°ƒç”¨å½¢å¼\n        referenceConfig.setGeneric(\"true\");\n        // è®¾ç½®é»˜è®¤è¶…æ—¶æ—¶é—´5ç§’\n        referenceConfig.setTimeout(5 * 1000);\n        return referenceConfig;\n    }\n}\n</code></pre><p>ä»£ç ä¸­ä¸»è¦è§£å†³äº†æ€ä¹ˆæ‰¾åˆ°æ¥å£ä»£ç†å¯¹è±¡çš„æ ¸å¿ƒé€»è¾‘é—®é¢˜ï¼Œå…³é”®æ­¥éª¤æ˜¯ï¼š</p><ul>\n<li>URLåœ°å€å¢åŠ äº†ä¸€ä¸ªæ–¹æ³•å‚æ•°ç±»åçš„ç»´åº¦ï¼Œæ„å‘³ç€é€šè¿‡ç±»åã€æ–¹æ³•åã€æ–¹æ³•å‚æ•°ç±»åå¯ä»¥è®¿é—®åå°çš„æä¾›è€…ï¼›</li>\n<li>é€šè¿‡æ¥å£ç±»åæ¥åˆ›å»º ReferenceConfig å¯¹è±¡ï¼Œå¹¶è®¾ç½® generic = true çš„æ ¸å¿ƒå±æ€§ï¼›</li>\n<li>é€šè¿‡ referenceConfig.get æ–¹æ³•å¾—åˆ° genericService æ³›åŒ–å¯¹è±¡ï¼›</li>\n<li>å°†æ–¹æ³•åã€æ–¹æ³•å‚æ•°ç±»åã€ä¸šåŠ¡è¯·æ±‚å‚æ•°ä¼ å…¥æ³›åŒ–å¯¹è±¡çš„ $invoke æ–¹æ³•ä¸­è¿›è¡Œè¿œç¨‹Dubboè°ƒç”¨ï¼Œå¹¶è¿”å›å“åº”å¯¹è±¡ï¼›</li>\n<li>é€šè¿‡ Ognl è¡¨è¾¾å¼è¯­è¨€ä»å“åº”å¯¹è±¡å–å‡º respCode å“åº”ç åˆ¤æ–­å¹¶åšæœ€ç»ˆè¿”å›ã€‚</li>\n</ul><p>åˆ°è¿™é‡Œæˆ‘ä»¬ä»Šå¤©çš„å­¦ä¹ ä»»åŠ¡å°±å¤§åŠŸå‘Šæˆäº†ï¼ŒæŠŠæ¯ç‡¥æ— å‘³çš„ä»£ç ç”¨æ³›åŒ–è°ƒç”¨å½¢å¼æ”¹å–„äº†ä¸€ç•ªï¼Œå‘èµ·çš„è¯·æ±‚ï¼Œå…ˆç»è¿‡â€œæ³›åŒ–è°ƒç”¨â€ï¼Œç„¶åè°ƒå¾€å„ä¸ªæä¾›æ–¹ç³»ç»Ÿï¼Œè¿™æ ·å‘èµ·çš„è¯·æ±‚æ ¹æœ¬ä¸éœ€è¦æ„ŸçŸ¥æä¾›æ–¹çš„å­˜åœ¨ï¼Œåªéœ€è¦æŒ‰ç…§æ—¢å®šçš„â€œæ³›åŒ–è°ƒç”¨â€å½¢å¼å‘èµ·è°ƒç”¨å°±å¯ä»¥äº†ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/61/be/619dd16a9590a59efd0c2bbabb0b60be.jpg?wh=1920x823\" alt=\"å›¾ç‰‡\"></p><p>é€šä¿—åœ°è®²ï¼Œæ³›åŒ–å¯ä»¥ç†è§£ä¸ºé‡‡ç”¨ä¸€ç§ç»Ÿä¸€çš„æ–¹å¼æ¥å‘èµ·å¯¹ä»»ä½•æœåŠ¡æ–¹æ³•çš„è°ƒç”¨ï¼Œè‡³å°‘æˆ‘ä»¬çŸ¥é“æ˜¯ä¸€ç§æ¥å£è°ƒç”¨çš„æ–¹å¼ï¼Œåªæ˜¯è¿™ç§æ–¹å¼æœ‰ä¸€ä¸ªæ¯”è¾ƒç‹¬ç‰¹çš„åå­—è€Œå·²ã€‚</p><h2>æ³›åŒ–è°ƒç”¨çš„åº”ç”¨</h2><p>å­¦ä¹ äº†æ³›åŒ–è°ƒç”¨ï¼Œæƒ³å¿…ä½ å·²ç»å¯ä»¥å¾ˆå¨´ç†Ÿåœ°å°è£…è‡ªå·±çš„é€šç”¨ç½‘å…³äº†ï¼Œåœ¨æˆ‘ä»¬æ—¥å¸¸å¼€å‘ä¸­ï¼Œå“ªäº›åº”ç”¨åœºæ™¯å¯ä»¥è€ƒè™‘æ³›åŒ–è°ƒç”¨å‘¢ï¼Ÿ</p><p>ç¬¬ä¸€ï¼Œé€ä¼ å¼è°ƒç”¨ï¼Œå‘èµ·æ–¹åªæ˜¯æƒ³è°ƒç”¨æä¾›è€…æ‹¿åˆ°ç»“æœï¼Œæ²¡æœ‰è¿‡å¤šçš„ä¸šåŠ¡é€»è¾‘è¯‰æ±‚ï¼Œå³ä½¿æœ‰ï¼Œä¹Ÿæ˜¯æ‹¿åˆ°ç»“æœåå†ç»§ç»­åšåˆ†å‘å¤„ç†ã€‚</p><p>ç¬¬äºŒï¼Œä»£ç†æœåŠ¡ï¼Œæ‰€æœ‰çš„è¯·æ±‚éƒ½ä¼šç»è¿‡ä»£ç†æœåŠ¡å™¨ï¼Œè€Œä»£ç†æœåŠ¡å™¨ä¸ä¼šæ„ŸçŸ¥ä»»ä½•ä¸šåŠ¡é€»è¾‘ï¼Œåªæ˜¯ä¸€ä¸ªé€šé“ï¼Œæ¥æ”¶æ•°æ®-&gt;å‘èµ·è°ƒç”¨-&gt;è¿”å›ç»“æœï¼Œè°ƒç”¨æµç¨‹éå¸¸ç®€å•çº¯ç²¹ã€‚</p><p>ç¬¬ä¸‰ï¼Œå‰ç«¯ç½‘å…³ï¼Œæœ‰äº›å†…ç½‘ç¯å¢ƒçš„è¿è¥é¡µé¢ï¼Œå¯¹URLçš„æ ¼å¼æ²¡æœ‰é‚£ä¹ˆä¸¥æ ¼çš„è®²ç©¶ï¼Œé¡µé¢çš„åŠŸèƒ½éƒ½æ˜¯å’Œåç«¯æœåŠ¡ä¸€å¯¹ä¸€çš„æ“ä½œï¼Œéå¸¸ç®€å•ç›´æ¥ã€‚</p><h2>æ€»ç»“</h2><p>ä»Šå¤©ï¼Œæˆ‘ä»¬ä»WebæœåŠ¡å™¨ä¸€æ®µå¸¸è§çš„ä»£ç è°ƒç”¨å¼€å§‹ï¼Œç”¨åå°„è°ƒç”¨å’Œæ³›åŒ–è°ƒç”¨ä¸¤ç§è°ƒç”¨æ–¹æ¡ˆåšäº†ä¸åŒå°è¯•ï¼Œæ ¸å¿ƒä»ç„¶æ˜¯å¸Œæœ›ç®€åŒ–å¼€å‘äººå‘˜ä»£ç ç¼–å†™ï¼Œæå‡åŠŸèƒ½é€šç”¨æ€§ã€‚</p><p>åå°„è°ƒç”¨æ–¹æ¡ˆï¼Œåªéœ€è¦é€šè¿‡æ¥å£å¯¹è±¡ã€æ–¹æ³•åã€å…¥å‚å¯¹è±¡å°±å¯ä»¥å®Œæˆè¿œç¨‹è°ƒç”¨ï¼Œä½†ä»ç„¶æ— æ³•è§„é¿å¤šä¸ªURLã€å¤šä¸ªæ§åˆ¶å™¨æ–¹æ³•ã€å¤šä¸ªä¸‹æ¸¸æ¥å£å­—æ®µç­‰çš„å®šä¹‰ã€‚</p><p>æ¥ç€åœ¨Springå®˜æ–¹æ–‡æ¡£çš„æŒ‡å¯¼ä¸‹ï¼Œæˆ‘ä»¬æ ¹æ®å ä½ç¬¦çš„æ¦‚å¿µï¼Œé‡æ–°è®¾è®¡URLæ ¼å¼ï¼ŒæŠŠè°ƒç”¨ä¸‹æ¸¸çš„æ¥å£ç±»åã€æ–¹æ³•ååˆ©ç”¨å ä½ç¬¦çš„æ–¹å¼å®šä¹‰åˆ°URLä¸­ã€‚ä½†ç®€åŒ–URLåï¼Œåˆé‡åˆ°äº†å¦‚ä½•è·å–ä¸‹æ¸¸æ¥å£å¯¹è±¡çš„éš¾é¢˜ï¼Œæˆ‘ä»¬ä» @DubboReference çš„å®ç°é€»è¾‘ä¸­æŒ–å‡ºäº† ReferenceConfig æ ¸å¿ƒå…³é”®ç±»ã€‚</p><p>æœ€åé€šè¿‡æ³›åŒ–è°ƒç”¨ï¼Œæç‚¼å‡ºé€šè¿‡æ¥å£ç±»åã€æ¥å£æ–¹æ³•åã€æ¥å£æ–¹æ³•å‚æ•°ç±»åã€ä¸šåŠ¡è¯·æ±‚å‚æ•°å››ä¸ªç»´åº¦å®Œæˆäº†æœ€ç»ˆæ–¹æ¡ˆè½åœ°ã€‚</p><p>è¿™é‡Œä¹Ÿæ€»ç»“ä¸€ä¸‹æ³›åŒ–è°ƒç”¨çš„ä¸‰éƒ¨æ›²ï¼š</p><ul>\n<li>æ¥å£ç±»åã€æ¥å£æ–¹æ³•åã€æ¥å£æ–¹æ³•å‚æ•°ç±»åã€ä¸šåŠ¡è¯·æ±‚å‚æ•°ï¼Œå››ä¸ªç»´åº¦çš„æ•°æ®ä¸èƒ½å°‘ã€‚</li>\n<li>æ ¹æ®æ¥å£ç±»ååˆ›å»º ReferenceConfig å¯¹è±¡ï¼Œè®¾ç½® generic = true å±æ€§ï¼Œè°ƒç”¨ referenceConfig.get æ‹¿åˆ° genericService æ³›åŒ–å¯¹è±¡ã€‚</li>\n<li>ä¼ å…¥æ¥å£æ–¹æ³•åã€æ¥å£æ–¹æ³•å‚æ•°ç±»åã€ä¸šåŠ¡è¯·æ±‚å‚æ•°ï¼Œè°ƒç”¨ genericService.$invoke æ–¹æ³•æ‹¿åˆ°å“åº”å¯¹è±¡ï¼Œå¹¶é€šè¿‡ Ognl è¡¨è¾¾å¼è¯­è¨€åˆ¤æ–­å“åº”æˆåŠŸæˆ–å¤±è´¥ï¼Œç„¶åå®Œæˆæ•°æ®æœ€ç»ˆè¿”å›ã€‚</li>\n</ul><p>æ³›åŒ–è°ƒç”¨çš„åº”ç”¨åœºæ™¯ä¸»è¦æœ‰3ç±»ï¼Œé€ä¼ å¼è°ƒç”¨ã€ä»£ç†æœåŠ¡ã€å‰ç«¯ç½‘å…³ã€‚</p><h3>æ€è€ƒé¢˜</h3><p>ä½ å·²ç»å­¦ä¼šäº†ä½¿ç”¨æ³›åŒ–è°ƒç”¨ï¼Œå¹¶ä¸”ä¹ŸæŒæ¡äº†æ³›åŒ–è°ƒç”¨çš„ä¸‰éƒ¨æ›²ï¼ŒåŸºæœ¬ä¸Šå¯ä»¥åˆ©ç”¨ CommonController çš„ä»£ç è°ƒç”¨æµç¨‹æ¥è®¾è®¡ä¸€å¥—å±äºè‡ªå·±çš„é€šç”¨å‹ç½‘å…³äº†ï¼Œä½ è§‰å¾— CommonController è¿™æ®µä»£ç è¿˜æœ‰å“ªäº›åœ°æ–¹å¯ä»¥æ”¹å–„å—ï¼Ÿ</p><p>æ¬¢è¿ç•™è¨€å‚ä¸è®¨è®ºï¼Œå¦‚æœæœ‰æ”¶è·ä¹Ÿæ¬¢è¿åˆ†äº«ç»™èº«è¾¹çš„æœ‹å‹ï¼Œè¯´ä¸å®šå°±å¸®ä»–è§£å†³äº†ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬ä¸‹ä¸€è®²è§ã€‚</p><h3>03æ€è€ƒé¢˜å‚è€ƒ</h3><p>ä¸Šä¸€æœŸçš„é—®é¢˜æ˜¯ç ”è¯»RpcContextç±»ï¼Œè¯´è¯´ SERVER_LOCALã€CLIENT_ATTACHMENTã€SERVER_ATTACHMENTã€SERVICE_CONTEXT è¿™å‡ ä¸ªå±æ€§çš„ç”Ÿå‘½å‘¨æœŸã€‚</p><p>SERVER_LOCAL ä½œç”¨äº Provider ä¾§ï¼Œåœ¨ org.apache.dubbo.rpc.RpcContext.RestoreContext#restore ä¸­è¢«è®¾ç½®è¿›å»ï¼Œå³åœ¨çº¿ç¨‹åˆ‡æ¢å°†çˆ¶çº¿ç¨‹çš„ä¿¡æ¯æ‹·è´è‡³å­çº¿ç¨‹æ—¶è¢«è°ƒç”¨ï¼Œç„¶è€Œå´åˆåœ¨ Provider è½¬ä¸º Consumer è§’è‰²æ—¶è¢«æ¸…é™¤æ•°æ®ã€‚</p><p>CLIENT_ATTACHMENT åœ¨æºç ä¸­æ˜¯è¿™ä¹ˆæè¿°çš„ï¼š</p><pre><code class=\"language-markdown\">ClientAttachment is using to pass attachments to next hop as a consumer. ( A --&gt; B , in A side)\n</code></pre><p>CLIENT_ATTACHMENT ç”¨äºå°†é™„å±ä¿¡æ¯ä½œä¸º Consumer ä¼ é€’åˆ°ä¸‹ä¸€è·³ Providerï¼Œåœ¨ Provider å’Œ Consumer çš„ Filter ä¸­çš„ org.apache.dubbo.rpc.BaseFilter.Listener#onResponseã€org.apache.dubbo.rpc.BaseFilter.Listener#onError æ–¹æ³•éƒ½ä¼šè¢«æ¸…é™¤æ•°æ®ã€‚<br>\nSERVER_ATTACHMENT åœ¨æºç ä¸­æ˜¯è¿™ä¹ˆæè¿°çš„ï¼š</p><pre><code class=\"language-markdown\">ServerAttachment is using to fetch attachments from previous hop as a provider. ( A --&gt; B , in B side)\n</code></pre><p>SERVER_ATTACHMENT ä½œä¸º Provider ä¾§ç”¨äºæ¥æ”¶ä¸Šä¸€è·³ Consumer çš„å‘æ¥é™„å±ä¿¡æ¯ï¼Œåœ¨ Provider å’Œ Consumer çš„ Filter ä¸­çš„ org.apache.dubbo.rpc.BaseFilter.Listener#onResponseã€org.apache.dubbo.rpc.BaseFilter.Listener#onError æ–¹æ³•éƒ½ä¼šè¢«æ¸…é™¤æ•°æ®ã€‚<br>\nSERVICE_CONTEXT åœ¨æºç ä¸­æ˜¯è¿™ä¹ˆæè¿°çš„ï¼š</p><pre><code class=\"language-markdown\">ServerContext is using to return some attachments back to client as a provider. ( A &lt;-- B , in B side)\n</code></pre><p>SERVICE_CONTEXT ç”¨äºå°†é™„å±ä¿¡æ¯ä½œä¸º Provider è¿”å›ç»™ Consumerï¼Œåœ¨ Provider ä¾§çš„ org.apache.dubbo.rpc.filter.ContextFilter#onResponseã€org.apache.dubbo.rpc.filter.ContextFilter#onError æ–¹æ³•éƒ½ä¼šè¢«æ¸…é™¤æ•°æ®ã€‚</p>","comments":[{"had_liked":false,"id":365057,"user_name":"ç†Šæ‚Ÿç©ºçš„å‡¶","can_delete":false,"product_type":"c1","uid":1933459,"ip_address":"å¹¿ä¸œ","ucode":"5FA9498BDA92C0","user_header":"https://static001.geekbang.org/account/avatar/00/1d/80/93/dde3d5f0.jpg","comment_is_top":false,"comment_ctime":1672044181,"is_pvip":false,"replies":[{"id":132928,"content":"ä½ å¥½ï¼Œç†Šæ‚Ÿç©ºçš„å‡¶ï¼šè®¤çœŸå­¦ï¼Œè‚¯å®šæ²¡é—®é¢˜çš„ï¼Œè¿™é—¨è¯¾ç¨‹æ˜¯å¤šå¹´æ¥ç©è½¬Dubboçš„ç»“æ™¶ï¼Œå¸Œæœ›å¯ä»¥ç»™ä½ å¸¦æ¥ç›Šå¤„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1364525,"ctime":1672051545,"ip_address":"å¹¿ä¸œ","comment_id":365057,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100312101,"comment_content":"è€å¸ˆè®²çš„å¾ˆè®¤çœŸï¼Œå›¾æ–‡ç»“åˆã€è¿˜é…åˆäº†è§†é¢‘ï¼Œå¸Œæœ›è€å¸ˆèƒ½æŠŠæˆ‘é¢†è¿›dubboçš„å¤§é—¨ã€‚å­¦ä¹ dubboæºç ï¼Œçœ‹æ¥ç¦»ä¸å¼€springçš„ä¸€äº›åŸºç¡€","like_count":3,"discussions":[{"author":{"id":1364525,"avatar":"https://static001.geekbang.org/account/avatar/00/14/d2/2d/d303cfe0.jpg","nickname":"HMILYYLIMH","note":"","ucode":"9355AB4A1A1B97","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":597593,"discussion_content":"ä½ å¥½ï¼Œç†Šæ‚Ÿç©ºçš„å‡¶ï¼šè®¤çœŸå­¦ï¼Œè‚¯å®šæ²¡é—®é¢˜çš„ï¼Œè¿™é—¨è¯¾ç¨‹æ˜¯å¤šå¹´æ¥ç©è½¬Dubboçš„ç»“æ™¶ï¼Œå¸Œæœ›å¯ä»¥ç»™ä½ å¸¦æ¥ç›Šå¤„ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1672051545,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":369736,"user_name":"public","can_delete":false,"product_type":"c1","uid":2768731,"ip_address":"å¹¿ä¸œ","ucode":"EF597BADCC526B","user_header":"","comment_is_top":false,"comment_ctime":1677852765,"is_pvip":true,"replies":[{"id":134832,"content":"ä½ å¥½ï¼Œç‹åº”å‘ï¼šæˆ‘ä¸Šé¢çš„ä¾‹å­ï¼Œbody å…¥å‚å°±æ˜¯ä¸€ä¸ª String å­—ç¬¦ä¸²å‘¢ï¼Œè‡³äºè¿™ä¸ªå­—ç¬¦ä¸²æ˜¯ä¸€ä¸ªç±»ä¼¼ &quot;12345&quot; è¿˜æ˜¯ {&quot;abc&quot;:&quot;12345&quot;} å½¢å¼çš„ json å­—ç¬¦ä¸²ï¼Œæˆ‘æ²¡æœ‰å®šæ­»å‘€ï¼Œä¸»è¦çœ‹æœåŠ¡ç«¯æ€ä¹ˆè§£æè¿™ä¸ª body å­—ç¬¦ä¸²è€Œå·²ï½","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1364525,"ctime":1678115872,"ip_address":"å¹¿ä¸œ","comment_id":369736,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100312101,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œç”Ÿäº§ä¸­å„ç§æ¥å£ä¸°å¯Œå¤šæ ·ï¼Œæˆ‘è§‰å¾—ä½œä¸ºç½‘å…³ä½ ä¸èƒ½å¼ºåˆ¶è¦æ±‚æ¥å£æä¾›è€…çš„å…¥å‚åªæœ‰ä¸€ä¸ªå‚æ•°å“‡ï¼Œåœ¨ä½ ä¸Šé¢çš„ä¾‹å­é‡Œæœ‰æ²¡æœ‰ä¼˜é›…çš„æ–¹å¼èƒ½å®ç°å‘¢","like_count":1,"discussions":[{"author":{"id":1364525,"avatar":"https://static001.geekbang.org/account/avatar/00/14/d2/2d/d303cfe0.jpg","nickname":"HMILYYLIMH","note":"","ucode":"9355AB4A1A1B97","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":607777,"discussion_content":"ä½ å¥½ï¼Œç‹åº”å‘ï¼šæˆ‘ä¸Šé¢çš„ä¾‹å­ï¼Œbody å…¥å‚å°±æ˜¯ä¸€ä¸ª String å­—ç¬¦ä¸²å‘¢ï¼Œè‡³äºè¿™ä¸ªå­—ç¬¦ä¸²æ˜¯ä¸€ä¸ªç±»ä¼¼ &#34;12345&#34; è¿˜æ˜¯ {&#34;abc&#34;:&#34;12345&#34;} å½¢å¼çš„ json å­—ç¬¦ä¸²ï¼Œæˆ‘æ²¡æœ‰å®šæ­»å‘€ï¼Œä¸»è¦çœ‹æœåŠ¡ç«¯æ€ä¹ˆè§£æè¿™ä¸ª body å­—ç¬¦ä¸²è€Œå·²ï½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1678115872,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":368202,"user_name":"Geek_5a425f","can_delete":false,"product_type":"c1","uid":3523198,"ip_address":"åŒ—äº¬","ucode":"B1EB3CA5030AF9","user_header":"","comment_is_top":false,"comment_ctime":1676001870,"is_pvip":false,"replies":[{"id":134075,"content":"ä½ å¥½ï¼ŒGeek_5a425fï¼šæ˜¯çš„ï¼Œä½ è¯´çš„éå¸¸æ­£ç¡®ã€‚ReferenceConfigå®ä¾‹å¾ˆé‡ï¼Œç¡®å®éœ€è¦ç¼“å­˜å¤„ç†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1364525,"ctime":1676020907,"ip_address":"å¹¿ä¸œ","comment_id":368202,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100312101,"comment_content":"æ€è€ƒé¢˜ï¼š\nå·¥ä½œæ—¶å€™å®è·µè¿‡Dubbo çš„æ³›åŒ–è°ƒç”¨ï¼Œå¯¹äºReferenceConfigæ¥è¯´æ˜¯å¯ä»¥è¿›è¡Œç¼“å­˜çš„ï¼ˆReferenceConfigå®ä¾‹å¾ˆé‡ï¼‰ã€‚\næ„Ÿå…´è¶£å¯ä»¥çœ‹ä¸‹å®˜æ–¹æ–‡æ¡£ï¼šhttps:&#47;&#47;cn.dubbo.apache.org&#47;zh-cn&#47;docs&#47;advanced&#47;reference-config-cache&#47;","like_count":1,"discussions":[{"author":{"id":1364525,"avatar":"https://static001.geekbang.org/account/avatar/00/14/d2/2d/d303cfe0.jpg","nickname":"HMILYYLIMH","note":"","ucode":"9355AB4A1A1B97","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":603230,"discussion_content":"ä½ å¥½ï¼ŒGeek_5a425fï¼šæ˜¯çš„ï¼Œä½ è¯´çš„éå¸¸æ­£ç¡®ã€‚ReferenceConfigå®ä¾‹å¾ˆé‡ï¼Œç¡®å®éœ€è¦ç¼“å­˜å¤„ç†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1676020907,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":367417,"user_name":"å¼ ç”³å‚²","can_delete":false,"product_type":"c1","uid":1182372,"ip_address":"åŒ—äº¬","ucode":"22D46BC529BA8A","user_header":"https://static001.geekbang.org/account/avatar/00/12/0a/a4/828a431f.jpg","comment_is_top":false,"comment_ctime":1675223437,"is_pvip":false,"replies":[{"id":133844,"content":"ä½ å¥½ï¼Œå¼ ç”³å‚²ï¼šæ„Ÿè°¢çœŸè¯šçš„è‚¯å®šèµèµï¼Œå¯¹ä½ æœ‰å¸®åŠ©ï¼Œæˆ‘å°±éå¸¸å¼€å¿ƒå•¦ğŸ˜„","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1364525,"ctime":1675305317,"ip_address":"å¹¿ä¸œ","comment_id":367417,"utype":1}],"discussion_count":1,"race_medal":2,"score":2,"product_id":100312101,"comment_content":"è€å¸ˆçš„è¯¾ç¨‹ä¸€æ­¥æ­¥æ¨å¯¼ä¸‹æ¥ï¼Œæ€è·¯éå¸¸æ¸…æ™°~","like_count":1,"discussions":[{"author":{"id":1364525,"avatar":"https://static001.geekbang.org/account/avatar/00/14/d2/2d/d303cfe0.jpg","nickname":"HMILYYLIMH","note":"","ucode":"9355AB4A1A1B97","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":601574,"discussion_content":"ä½ å¥½ï¼Œå¼ ç”³å‚²ï¼šæ„Ÿè°¢çœŸè¯šçš„è‚¯å®šèµèµï¼Œå¯¹ä½ æœ‰å¸®åŠ©ï¼Œæˆ‘å°±éå¸¸å¼€å¿ƒå•¦ğŸ˜„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1675305317,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":366251,"user_name":"Geek_895efd","can_delete":false,"product_type":"c1","uid":1567905,"ip_address":"æµ™æ±Ÿ","ucode":"F72CF7D056C572","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTL2N4mhzsvvUG8Wew1uvTHs531fsW5LfgWkv4782VtwRuMf0qicRPxWtKgIzxyFSNVKJ09FN5vcVjg/132","comment_is_top":false,"comment_ctime":1673510105,"is_pvip":false,"replies":[{"id":133481,"content":"ä½ å¥½ï¼ŒGeek_895efdï¼šå¯ä»¥çœ‹å®˜ç½‘å­¦ä¹ çš„ï¼Œä¹Ÿå¯ä»¥å»åˆ·åˆ·Dubboè§†é¢‘å¿«é€Ÿè„‘æµ·è¿‡ä¸€æŠŠç•™ä¸ªå°è±¡ï¼Œç„¶åå†æ¥ç»†å­¦ä¸€ä¸‹ã€‚ä¸»è¦çœ‹ä½ è‡ªå·±ä¹ æƒ¯å“ªç§å­¦ä¹ æ–¹å¼ï½","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1364525,"ctime":1673581591,"ip_address":"å¹¿ä¸œ","comment_id":366251,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100312101,"comment_content":"å‰é¢çš„å­¦ä¹ è¿˜é¡ºåˆ©ï¼Œè¿™ä¸€èŠ‚å°±æ„Ÿè§‰æœ‰ç‚¹åƒåŠ›äº†ï¼Œè‡ªå·±äº†è§£å’Œä½¿ç”¨dubboæœ‰é™ï¼ŒåŸºç¡€ä¸ç‰¢ã€‚è¯·é—®è€å¸ˆï¼ŒdubboåŸºç¡€çš„å­¦ä¹ ç›´æ¥çœ‹å®˜æ–¹æ–‡æ¡£å—","like_count":1,"discussions":[{"author":{"id":1364525,"avatar":"https://static001.geekbang.org/account/avatar/00/14/d2/2d/d303cfe0.jpg","nickname":"HMILYYLIMH","note":"","ucode":"9355AB4A1A1B97","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":599552,"discussion_content":"ä½ å¥½ï¼ŒGeek_895efdï¼šå¯ä»¥çœ‹å®˜ç½‘å­¦ä¹ çš„ï¼Œä¹Ÿå¯ä»¥å»åˆ·åˆ·Dubboè§†é¢‘å¿«é€Ÿè„‘æµ·è¿‡ä¸€æŠŠç•™ä¸ªå°è±¡ï¼Œç„¶åå†æ¥ç»†å­¦ä¸€ä¸‹ã€‚ä¸»è¦çœ‹ä½ è‡ªå·±ä¹ æƒ¯å“ªç§å­¦ä¹ æ–¹å¼ï½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1673581591,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":380786,"user_name":"Z_Z","can_delete":false,"product_type":"c1","uid":2058852,"ip_address":"å¹¿ä¸œ","ucode":"654BE3F3C7DBA4","user_header":"https://static001.geekbang.org/account/avatar/00/1f/6a/64/3d4fccf8.jpg","comment_is_top":false,"comment_ctime":1694153174,"is_pvip":false,"replies":[{"id":138651,"content":"ä½ å¥½ï¼ŒZ_Zï¼šä½ è¯´æ³›åŒ–æ˜¯åå°„ä¹ˆï¼Ÿå®è´¨ä¸æ˜¯çš„ï¼Œç”Ÿæˆäº†ä»£ç†å¯¹åº”å“¦","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1364525,"ctime":1694236105,"ip_address":"æ¹–å—","comment_id":380786,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100312101,"comment_content":"åå°„åšæ¥å£ï¼Œé«˜å¹¶å‘ä¸‹æ€§èƒ½ä¼šå¾ˆå·®å§","like_count":0,"discussions":[{"author":{"id":1364525,"avatar":"https://static001.geekbang.org/account/avatar/00/14/d2/2d/d303cfe0.jpg","nickname":"HMILYYLIMH","note":"","ucode":"9355AB4A1A1B97","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":627524,"discussion_content":"ä½ å¥½ï¼ŒZ_Zï¼šä½ è¯´æ³›åŒ–æ˜¯åå°„ä¹ˆï¼Ÿå®è´¨ä¸æ˜¯çš„ï¼Œç”Ÿæˆäº†ä»£ç†å¯¹åº”å“¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1694236106,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ¹–å—","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":373889,"user_name":"å¢¨","can_delete":false,"product_type":"c1","uid":3225870,"ip_address":"æµ™æ±Ÿ","ucode":"F453C0B6A4A41F","user_header":"https://static001.geekbang.org/account/avatar/00/31/39/0e/cbf33210.jpg","comment_is_top":false,"comment_ctime":1683293050,"is_pvip":false,"replies":[{"id":137073,"content":"ä½ å¥½ï¼Œå¢¨ï¼šå›ç­”çš„æŒºå¥½çš„ï¼Œèµï½","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1364525,"ctime":1685617802,"ip_address":"å¹¿ä¸œ","comment_id":373889,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100312101,"comment_content":"æ€è€ƒé¢˜ï¼šcontroller è°ƒç”¨dubbo rpcæ–¹æ³•æ—¶æ˜¯æœ‰å¾ˆå¤šç‰¹æ€§é…ç½®çš„ï¼Œæ¯”å¦‚timeoutã€retriesçš„ï¼Œå¯ä»¥ä½œä¸ºcontroller urlæä¾›é…ç½®ç»™ä¸šåŠ¡ä½¿ç”¨","like_count":0,"discussions":[{"author":{"id":1364525,"avatar":"https://static001.geekbang.org/account/avatar/00/14/d2/2d/d303cfe0.jpg","nickname":"HMILYYLIMH","note":"","ucode":"9355AB4A1A1B97","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":619924,"discussion_content":"ä½ å¥½ï¼Œå¢¨ï¼šå›ç­”çš„æŒºå¥½çš„ï¼Œèµï½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1685617802,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":368108,"user_name":"èˆŸå˜¿å‘€","can_delete":false,"product_type":"c1","uid":1399933,"ip_address":"æµ™æ±Ÿ","ucode":"B83445E3F3D990","user_header":"https://static001.geekbang.org/account/avatar/00/15/5c/7d/9e39c86d.jpg","comment_is_top":false,"comment_ctime":1675910809,"is_pvip":false,"replies":[{"id":134072,"content":"ä½ å¥½ï¼ŒèˆŸå˜¿å‘€ï¼šæ³›åŒ–è°ƒç”¨å°±æ˜¯ä»æ³¨å†Œä¸­å¿ƒæ‹¿åˆ°æä¾›æ–¹çš„IPåˆ—è¡¨ï¼Œç„¶åè´Ÿè½½å‡è¡¡å‘èµ·ç½‘ç»œRPCè°ƒç”¨ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1364525,"ctime":1676018297,"ip_address":"å¹¿ä¸œ","comment_id":368108,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100312101,"comment_content":"æœ‰ä¸ªé—®é¢˜ï¼Œè¿™é‡Œèµ°æ³›åŒ–è°ƒç”¨æ˜¯èµ°ç½‘ç»œçš„rpcè¿˜æ˜¯æœ¬åœ°è°ƒç”¨","like_count":0,"discussions":[{"author":{"id":1364525,"avatar":"https://static001.geekbang.org/account/avatar/00/14/d2/2d/d303cfe0.jpg","nickname":"HMILYYLIMH","note":"","ucode":"9355AB4A1A1B97","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":603224,"discussion_content":"ä½ å¥½ï¼ŒèˆŸå˜¿å‘€ï¼šæ³›åŒ–è°ƒç”¨å°±æ˜¯ä»æ³¨å†Œä¸­å¿ƒæ‹¿åˆ°æä¾›æ–¹çš„IPåˆ—è¡¨ï¼Œç„¶åè´Ÿè½½å‡è¡¡å‘èµ·ç½‘ç»œRPCè°ƒç”¨ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1676018297,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":3523198,"avatar":"","nickname":"Geek_5a425f","note":"","ucode":"B1EB3CA5030AF9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":603174,"discussion_content":"èµ°ç½‘ç»œ RPCï¼Œåªæ˜¯æŠŠä¹‹å‰è°ƒç”¨æä¾›æ–¹Dubboæ¥å£éœ€è¦çš„é‚£äº›å†…å®¹ï¼ˆè°ƒå“ªä¸ªç±»ã€å“ªä¸ªæ–¹æ³•ï¼Œå‚æ•°ç±»å‹ã€å‚æ•°å†…å®¹ï¼‰ï¼Œé€šè¿‡å‚æ•°ä¼ é€’è¿‡å»ï¼Œè€Œä¸æ˜¯åƒä¹‹å‰XXFacade.xxMethodd(req)è¿™ç§æ–¹å¼ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1676002202,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":366572,"user_name":"é˜¿æ˜•","can_delete":false,"product_type":"c1","uid":1012906,"ip_address":"æµ™æ±Ÿ","ucode":"F3AD093B68E074","user_header":"https://static001.geekbang.org/account/avatar/00/0f/74/aa/178a6797.jpg","comment_is_top":false,"comment_ctime":1673937815,"is_pvip":false,"replies":[{"id":133572,"content":"ä½ å¥½ï¼Œé˜¿æ˜•ï¼šæ–‡ç¨¿é‡Œå®ç°çš„æ–¹æ¡ˆæ˜¯åœ¨æ¶ˆè´¹æ–¹è¿˜æœªä¸æä¾›æ–¹å‘ç”Ÿäº¤äº’æ—¶å°±éœ€è¦çŸ¥é“æ–¹æ³•å…¥å‚ç±»åï¼Œè¿™ç§æå‰æ„ŸçŸ¥æ–¹æ³•å…¥å‚ç±»åæ˜¯ä¸éœ€è¦ä»£ç ä»£ä»·çš„ã€‚\n\nè€Œä½ æ‰€è¯´çš„éœ€è¦ä»dubboæ¥å£å®šä¹‰ä¸­è·å–ï¼Œä¹Ÿä¸æ˜¯ä¸å¯ä»¥ï¼Œä½†æ˜¯å¾—åˆ¶å®šè§„èŒƒï¼Œä¸€ä¸ªæ¥å£ä¸­çš„æ–¹æ³•ä¸èƒ½è¢«é‡è½½ï¼Œè¿™æ ·çš„è¯ï¼Œå¯ä»¥è€ƒè™‘åœ¨æä¾›æ–¹è¿›è¡Œä¸€å®šçš„æ‹¦æˆªæ ¹æ®â€œæ¥å£ç±»å+æ–¹æ³•åâ€æ‰¾åˆ°å¯¹åº”çš„æä¾›æ–¹ invoker å¯¹è±¡è¿›è¡Œè°ƒç”¨ï¼Œä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œåªæ˜¯éœ€è¦ä»£ç æ”¹é€ è€Œå·²ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1364525,"ctime":1673958977,"ip_address":"æ¹–å—","comment_id":366572,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100312101,"comment_content":"æ€è€ƒé¢˜ï¼Œä»å†…éƒ¨æµ‹è¯•ç½‘å…³çš„ä½¿ç”¨è§’åº¦è€ƒè™‘ï¼ŒparameterTypeNameå‚æ•°ç•¥æ˜¾ç¹çï¼Œæ˜¯å¦èƒ½ä»dubboçš„æ¥å£å®šä¹‰ä¸­è·å–å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1364525,"avatar":"https://static001.geekbang.org/account/avatar/00/14/d2/2d/d303cfe0.jpg","nickname":"HMILYYLIMH","note":"","ucode":"9355AB4A1A1B97","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":600049,"discussion_content":"ä½ å¥½ï¼Œé˜¿æ˜•ï¼šæ–‡ç¨¿é‡Œå®ç°çš„æ–¹æ¡ˆæ˜¯åœ¨æ¶ˆè´¹æ–¹è¿˜æœªä¸æä¾›æ–¹å‘ç”Ÿäº¤äº’æ—¶å°±éœ€è¦çŸ¥é“æ–¹æ³•å…¥å‚ç±»åï¼Œè¿™ç§æå‰æ„ŸçŸ¥æ–¹æ³•å…¥å‚ç±»åæ˜¯ä¸éœ€è¦ä»£ç ä»£ä»·çš„ã€‚\n\nè€Œä½ æ‰€è¯´çš„éœ€è¦ä»dubboæ¥å£å®šä¹‰ä¸­è·å–ï¼Œä¹Ÿä¸æ˜¯ä¸å¯ä»¥ï¼Œä½†æ˜¯å¾—åˆ¶å®šè§„èŒƒï¼Œä¸€ä¸ªæ¥å£ä¸­çš„æ–¹æ³•ä¸èƒ½è¢«é‡è½½ï¼Œè¿™æ ·çš„è¯ï¼Œå¯ä»¥è€ƒè™‘åœ¨æä¾›æ–¹è¿›è¡Œä¸€å®šçš„æ‹¦æˆªæ ¹æ®â€œæ¥å£ç±»å+æ–¹æ³•åâ€æ‰¾åˆ°å¯¹åº”çš„æä¾›æ–¹ invoker å¯¹è±¡è¿›è¡Œè°ƒç”¨ï¼Œä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œåªæ˜¯éœ€è¦ä»£ç æ”¹é€ è€Œå·²ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1673958978,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ¹–å—","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":366044,"user_name":"æ¢¦æƒ³æ³¨å®šä¸¶å­¤ç‹¬","can_delete":false,"product_type":"c1","uid":1222688,"ip_address":"å¹¿ä¸œ","ucode":"0E51E368DE53F2","user_header":"https://static001.geekbang.org/account/avatar/00/12/a8/20/6798446a.jpg","comment_is_top":false,"comment_ctime":1673341777,"is_pvip":false,"replies":[{"id":133365,"content":"ä½ å¥½ï¼Œæ¢¦æƒ³æ³¨å®šä¸¶å­¤ç‹¬ï¼šæ˜¯å¯ä»¥ä½œä¸ºæ„å»ºä¸­å°çš„åšå®åŸºç¡€çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1364525,"ctime":1673352973,"ip_address":"å¹¿ä¸œ","comment_id":366044,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100312101,"comment_content":"æ³›åŒ–è°ƒç”¨æ˜¯ä¸ºäº†åç»­ä¸­å°æ­å»ºæ‰“åŸºç¡€å—","like_count":0,"discussions":[{"author":{"id":1364525,"avatar":"https://static001.geekbang.org/account/avatar/00/14/d2/2d/d303cfe0.jpg","nickname":"HMILYYLIMH","note":"","ucode":"9355AB4A1A1B97","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":599146,"discussion_content":"ä½ å¥½ï¼Œæ¢¦æƒ³æ³¨å®šä¸¶å­¤ç‹¬ï¼šæ˜¯å¯ä»¥ä½œä¸ºæ„å»ºä¸­å°çš„åšå®åŸºç¡€çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1673352973,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":365999,"user_name":"æ–¯ç“¦è¾›æ­¦Roy","can_delete":false,"product_type":"c1","uid":2087578,"ip_address":"å¹¿ä¸œ","ucode":"0A6AE232481B86","user_header":"https://static001.geekbang.org/account/avatar/00/1f/da/9a/ed524797.jpg","comment_is_top":false,"comment_ctime":1673294557,"is_pvip":false,"replies":[{"id":133337,"content":"ä½ å¥½ï¼Œæ–¯ç“¦è¾›æ­¦Royï¼šæ ·ä¾‹ä»£ç å·¥ç¨‹ä¸­çš„ dubbo-15-generic-json-consumer æ˜¯ä¸€ä¸ªç®€å•çš„æ³›åŒ–è°ƒç”¨ä¾‹å­ï¼Œä½ å¯ä»¥å‚è€ƒå­¦ä¹ ä¸‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1364525,"ctime":1673325343,"ip_address":"å¹¿ä¸œ","comment_id":365999,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100312101,"comment_content":"èƒ½æä¾›ä¸€ä¸ªCommonControllerçš„æ¥å£è°ƒç”¨demoä¹ˆ","like_count":0,"discussions":[{"author":{"id":1364525,"avatar":"https://static001.geekbang.org/account/avatar/00/14/d2/2d/d303cfe0.jpg","nickname":"HMILYYLIMH","note":"","ucode":"9355AB4A1A1B97","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":599080,"discussion_content":"ä½ å¥½ï¼Œæ–¯ç“¦è¾›æ­¦Royï¼šæ ·ä¾‹ä»£ç å·¥ç¨‹ä¸­çš„ dubbo-15-generic-json-consumer æ˜¯ä¸€ä¸ªç®€å•çš„æ³›åŒ–è°ƒç”¨ä¾‹å­ï¼Œä½ å¯ä»¥å‚è€ƒå­¦ä¹ ä¸‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1673325343,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":365605,"user_name":"å¼ æ´‹","can_delete":false,"product_type":"c1","uid":1182914,"ip_address":"å¹¿ä¸œ","ucode":"549BE5DEEF8417","user_header":"https://static001.geekbang.org/account/avatar/00/12/0c/c2/bad34a50.jpg","comment_is_top":false,"comment_ctime":1672820537,"is_pvip":false,"replies":[{"id":133171,"content":"ä½ å¥½ï¼Œå¼ æ´‹ï¼šä½ çš„ç›´è§‰æ˜¯å¯¹çš„ï¼Œå°æ‰“å°é—¹å¯ä»¥è¿™ä¹ˆç©ï¼Œè‹¥æ­£å¼æ”¾åˆ°å¯¹å…¬äº§çº¿ç©çš„è¯ï¼Œæœ€å¥½æ˜ å°„ä¸€ä¸‹ã€‚æˆ‘ä¹Ÿåœ¨â€œ05 ç‚¹ç‚¹ç›´è¿â€ä¸­è¿›è¡Œçš„ç›¸åº”çš„è§£ç­”ï¼Œæœ‰å…´è¶£å¯ä»¥å»çœ‹çœ‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1364525,"ctime":1672831314,"ip_address":"å¹¿ä¸œ","comment_id":365605,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100312101,"comment_content":"ä½œä¸ºä¸€ä¸ªç½‘å…³çš„è¯ï¼Œä¸ªäººæ€»æ˜¯è§‰å¾—å°†ç±»åï¼Œæ–¹æ³•åä½œä¸ºè¯·æ±‚å‚æ•°ä¼ é€’è¿‡æ¥æœ‰ç‚¹å¥‡æ€ªï¼Œå¯ä¸å¯ä»¥åšä¸€ä¸ªè·¯å¾„æ˜ å°„ï¼Œé€šè¿‡è®¿é—®çš„è·¯å¾„æ‰¾åˆ°å¯¹åº”çš„ç±»å’Œè¦è°ƒç”¨çš„æ–¹æ³•æ¥è¿›è¡Œå¤„ç†ã€‚","like_count":0,"discussions":[{"author":{"id":1364525,"avatar":"https://static001.geekbang.org/account/avatar/00/14/d2/2d/d303cfe0.jpg","nickname":"HMILYYLIMH","note":"","ucode":"9355AB4A1A1B97","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":598451,"discussion_content":"ä½ å¥½ï¼Œå¼ æ´‹ï¼šä½ çš„ç›´è§‰æ˜¯å¯¹çš„ï¼Œå°æ‰“å°é—¹å¯ä»¥è¿™ä¹ˆç©ï¼Œè‹¥æ­£å¼æ”¾åˆ°å¯¹å…¬äº§çº¿ç©çš„è¯ï¼Œæœ€å¥½æ˜ å°„ä¸€ä¸‹ã€‚æˆ‘ä¹Ÿåœ¨â€œ05 ç‚¹ç‚¹ç›´è¿â€ä¸­è¿›è¡Œçš„ç›¸åº”çš„è§£ç­”ï¼Œæœ‰å…´è¶£å¯ä»¥å»çœ‹çœ‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1672831314,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":365130,"user_name":"ä¸‡é‡Œæ™´ç©º","can_delete":false,"product_type":"c1","uid":1102030,"ip_address":"å¹¿ä¸œ","ucode":"D189F67E82BAB4","user_header":"https://static001.geekbang.org/account/avatar/00/10/d0/ce/42018f4f.jpg","comment_is_top":false,"comment_ctime":1672136249,"is_pvip":false,"replies":[{"id":132967,"content":"ä½ å¥½ï¼Œä¸‡é‡Œæ™´ç©ºï¼šè¿™ä¸ªæ˜¯éœ€è¦æœ‰ä¸€ç‚¹ Dubbo çš„åŸºç¡€çŸ¥è¯†çš„ï¼Œä¸è¿‡ä¹Ÿæ²¡å…³ç³»ä½ å¯ä»¥çœ‹çœ‹ã€https:&#47;&#47;gitee.com&#47;ylimhhmily&#47;GeekDubbo3Tutorialã€‘ä»£ç ä¸­çš„ã€dubbo-15-generic-bean-consumerã€dubbo-15-generic-byte-consumerã€dubbo-15-generic-json-consumerã€‘ä¸‰ä¸ªå…³äº ReferenceConfig çš„ä½¿ç”¨æ¡ˆä¾‹ï¼Œå¸Œæœ›ä¼šå¯¹ä½ æœ‰ä¸€å®šçš„å¸®åŠ©ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1364525,"ctime":1672193103,"ip_address":"å¹¿ä¸œ","comment_id":365130,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100312101,"comment_content":"ä»@DubboReferenceå®ç°é€»è¾‘å¼•ç”³å‡ºæ³›åŒ–è°ƒç”¨ï¼Œè¿˜æ˜¯ä¸æ˜ç™½æ€ä¹ˆçŸ¥é“è¦ç”¨å“ªä¸ªç±»çš„å“ªä¸ªæ–¹æ³•æ¥å®ç°ï¼Ÿå¦‚ç”¨ReferenceConfigç­‰","like_count":0,"discussions":[{"author":{"id":1364525,"avatar":"https://static001.geekbang.org/account/avatar/00/14/d2/2d/d303cfe0.jpg","nickname":"HMILYYLIMH","note":"","ucode":"9355AB4A1A1B97","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":597715,"discussion_content":"ä½ å¥½ï¼Œä¸‡é‡Œæ™´ç©ºï¼šè¿™ä¸ªæ˜¯éœ€è¦æœ‰ä¸€ç‚¹ Dubbo çš„åŸºç¡€çŸ¥è¯†çš„ï¼Œä¸è¿‡ä¹Ÿæ²¡å…³ç³»ä½ å¯ä»¥çœ‹çœ‹ã€https://gitee.com/ylimhhmily/GeekDubbo3Tutorialã€‘ä»£ç ä¸­çš„ã€dubbo-15-generic-bean-consumerã€dubbo-15-generic-byte-consumerã€dubbo-15-generic-json-consumerã€‘ä¸‰ä¸ªå…³äº ReferenceConfig çš„ä½¿ç”¨æ¡ˆä¾‹ï¼Œå¸Œæœ›ä¼šå¯¹ä½ æœ‰ä¸€å®šçš„å¸®åŠ©ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1672193103,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1102030,"avatar":"https://static001.geekbang.org/account/avatar/00/10/d0/ce/42018f4f.jpg","nickname":"ä¸‡é‡Œæ™´ç©º","note":"","ucode":"D189F67E82BAB4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1364525,"avatar":"https://static001.geekbang.org/account/avatar/00/14/d2/2d/d303cfe0.jpg","nickname":"HMILYYLIMH","note":"","ucode":"9355AB4A1A1B97","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":598612,"discussion_content":"å—¯å—¯ï¼Œå¥½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1672961343,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":597715,"ip_address":"æ¹–åŒ—","group_id":0},"score":598612,"extra":""}]}]},{"had_liked":false,"id":365117,"user_name":"è‚–ç«‹æ™º","can_delete":false,"product_type":"c1","uid":2277773,"ip_address":"å¹¿ä¸œ","ucode":"9DAF54CB38DB72","user_header":"","comment_is_top":false,"comment_ctime":1672126812,"is_pvip":false,"replies":[{"id":132954,"content":"\nä½ å¥½ï¼Œè‚–ç«‹æ™ºï¼šä½ çš„ç¬¬1ç‚¹è€ƒè™‘çš„éå¸¸æœ‰äº®ç‚¹ã€‚\n\né’ˆå¯¹ç¬¬1ç‚¹ï¼Œå¯ä»¥è€ƒè™‘é‡‡ç”¨ SimpleReferenceCache#getCache ç›¸å…³çš„æ–¹æ³•ç¼“å­˜å¼•ç”¨å®ä¾‹å¯¹è±¡ã€‚\n\né’ˆå¯¹ç¬¬2ç‚¹ï¼Œè¿™æ˜¯ä¸€ç§å¼‚æ­¥æ–¹å¼çš„ç‰¹æ€§æ”¯æŒï¼Œæœ‰å½“ç„¶æ›´å¥½ï¼Œæ²¡æœ‰çš„è¯å¤§å¤šæ•°åœºæ™¯ä¹Ÿèƒ½å¤Ÿæ”¯æŒï¼Œä¹Ÿè¿˜å¥½ã€‚\n","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1364525,"ctime":1672188492,"ip_address":"å¹¿ä¸œ","comment_id":365117,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100312101,"comment_content":"æ€è€ƒé¢˜ï¼š\n1ã€å°†å¯¹åº”referenceConfigå’ŒreferenceConfig.get()æœåŠ¡ï¼Œåˆ›å»ºæˆåŠŸåç¼“å­˜èµ·æ¥ï¼Œä¸ç”¨é‡å¤åˆ›å»ºã€‚\n2ã€å°†æ¥å£æ”¹æˆå¼‚æ­¥","like_count":0,"discussions":[{"author":{"id":1364525,"avatar":"https://static001.geekbang.org/account/avatar/00/14/d2/2d/d303cfe0.jpg","nickname":"HMILYYLIMH","note":"","ucode":"9355AB4A1A1B97","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":597696,"discussion_content":"\nä½ å¥½ï¼Œè‚–ç«‹æ™ºï¼šä½ çš„ç¬¬1ç‚¹è€ƒè™‘çš„éå¸¸æœ‰äº®ç‚¹ã€‚\n\né’ˆå¯¹ç¬¬1ç‚¹ï¼Œå¯ä»¥è€ƒè™‘é‡‡ç”¨ SimpleReferenceCache#getCache ç›¸å…³çš„æ–¹æ³•ç¼“å­˜å¼•ç”¨å®ä¾‹å¯¹è±¡ã€‚\n\né’ˆå¯¹ç¬¬2ç‚¹ï¼Œè¿™æ˜¯ä¸€ç§å¼‚æ­¥æ–¹å¼çš„ç‰¹æ€§æ”¯æŒï¼Œæœ‰å½“ç„¶æ›´å¥½ï¼Œæ²¡æœ‰çš„è¯å¤§å¤šæ•°åœºæ™¯ä¹Ÿèƒ½å¤Ÿæ”¯æŒï¼Œä¹Ÿè¿˜å¥½ã€‚\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1672188492,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}