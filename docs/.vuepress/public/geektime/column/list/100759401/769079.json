{"id":769079,"title":"05ï½œæ•°æ®ç»“æ„ï¼ˆä¸‹ï¼‰ï¼šå¦‚ä½•è®¾è®¡é¡µé¢ä¸šåŠ¡é—®é¢˜ç›¸å…³çš„æ•°æ®ç»“æ„ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯ä¸‰æ¡¥ã€‚</p><p>ä¸ŠèŠ‚è¯¾ï¼Œæˆ‘ä»¬é‡ç‚¹å­¦ä¹ äº†å¦‚ä½•æ ¹æ®æœ€å°‘å­—æ®µçš„åŸåˆ™è®¾è®¡é“¾è·¯æ—¥å¿—æ ¼å¼çš„17ä¸ªé€šç”¨å­—æ®µã€‚</p><p>ç„¶è€Œï¼Œè¿™äº›å­—æ®µå¹¶ä¸åŒ…å«é—®é¢˜ä¿¡æ¯ã€‚å‡å¦‚æˆ‘ä»¬å¸Œæœ›æå‰å‘ç°é—®é¢˜ï¼Œåˆè¯¥æ€ä¹ˆæŠŠé—®é¢˜æ¶‰åŠçš„ä¿¡æ¯æå‰å­˜å‚¨åœ¨é“¾è·¯æ—¥å¿—é‡Œé¢å‘¢ï¼Ÿè¿™èŠ‚è¯¾ï¼Œæˆ‘ä»¬ä¸€èµ·è®¾è®¡è®°å½•é—®é¢˜çš„å­—æ®µæ–¹æ¡ˆã€‚</p><p>æˆ‘ä»ä»£ç ç»´åº¦æŠŠæ—¥å¿—åˆ†æˆäº†å¼‚å¸¸ä¿¡æ¯ã€æ€§èƒ½æ•°æ®ã€æ“ä½œè¡Œä¸ºä¸‰å¥—æ•°æ®æ¨¡å‹ï¼Œå¦‚ä¸‹å›¾ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/57/c5/578ec22acd0e6cf169ff2a1b827502c5.png?wh=5224x3916\" alt=\"å›¾ç‰‡\"></p><p>åŸºäºè¿™ä¸‰å¥—æ•°æ®æ¨¡å‹ï¼Œæˆ‘ä»¬åˆ†åˆ«ç”¨dataå­—æ®µè®°å½•å¼‚å¸¸ä¿¡æ¯ã€perfå­—æ®µè®°å½•é¡µé¢æ€§èƒ½ä¿¡æ¯ä»¥åŠbreadcrumbså­—æ®µè®°å½•ç”¨æˆ·æ“ä½œè¡Œä¸ºã€‚å‚è€ƒä»£ç å¦‚ä¸‹ã€‚</p><pre><code class=\"language-typescript\">// å®Œæ•´çš„å…¨é“¾è·¯æ—¥å¿—\ntype TraceData = BaseTraceInfo &amp; {\n  // è®°å½•é”™è¯¯ä¿¡æ¯\n  data?: TraceTypeData\n  // è®°å½•æ“ä½œè¡Œä¸º\n  breadcrumbs?: TraceBreadcrumbs\n  // è®°å½•æ€§èƒ½ä¿¡æ¯\n  perf?: TracePerf[]\n}\n</code></pre><p>å…³äºè¿™ä¸‰ä¸ªå­—æ®µçš„ç”¨æ³•ï¼Œæˆ‘ä¼šåœ¨æœ¬èŠ‚è¯¾çš„æœ€åè·Ÿå¤§å®¶æ¢è®¨ã€‚æˆ‘ä»¬å…ˆä»å¼‚å¸¸ä¿¡æ¯ç±»å‹è¯´èµ·ã€‚</p><h2>å¼‚å¸¸ä¿¡æ¯ç±»å‹</h2><p>è™½ç„¶å‰ç«¯å¼‚å¸¸æƒ…å†µæœ‰å¾ˆå¤šï¼Œä½†æ€»ç»“ä¸‹æ¥ï¼Œå®é™…ä¸»è¦å°±æ˜¯6ç§æƒ…å†µã€‚</p><ol>\n<li>ä»£ç å¼‚å¸¸ã€‚ä¸ä»…åŒ…æ‹¬è„šæœ¬å¤±è´¥ï¼Œè¿˜åº”è¯¥åŒ…å«trycatchä¸­çš„catchå¼‚å¸¸ã€‚</li>\n<li>Promiseå¼‚å¸¸ã€‚è¿™ä¸»è¦æ˜¯ç”±å¼‚æ­¥ä»£ç å¼•èµ·çš„é€»è¾‘é—®é¢˜ã€‚</li>\n<li>ç½‘ç»œè¯·æ±‚ã€‚é€šå¸¸æ¥è¯´ï¼Œå‘èµ·httpè¯·æ±‚éƒ½æ— æ³•ä¿è¯100%çš„æˆåŠŸç‡ã€‚</li>\n<li>èµ„æºå¼‚å¸¸ä¿¡æ¯ã€‚å’Œç½‘ç»œè¯·æ±‚åŒç†ï¼Œä½†è¿™é‡Œçš„é‡ç‚¹åœ¨äºç›‘æ§å›¾ç‰‡å’Œä¸€äº›å¤–éƒ¨èµ„æºçš„è¯·æ±‚çŠ¶æ€ã€‚</li>\n<li>PV/UVæ—¥å¿—ã€‚ç”¨äºè®°å½•ç”¨æˆ·è®¿é—®çš„æ¬¡æ•°å’Œé¢‘ç‡ï¼Œå®ƒä¹Ÿæ˜¯å”¯ä¸€çš„éå¼‚å¸¸æ—¥å¿—ã€‚</li>\n<li>è‡ªå®šä¹‰æ—¥å¿—ã€‚ç›®çš„æ˜¯åœ¨ä¸€äº›ç‰¹æ®Šåœºæ™¯ä¸‹è®°å½•æ—¥å¿—ï¼Œä»¥ä¾¿å¿«é€Ÿå®šä½é—®é¢˜ã€‚</li>\n</ol><!-- [[[read_end]]] --><p>æˆ‘ä»¬ä»ç„¶ä»¥æœ€å°‘å­—æ®µä¸ºåŸåˆ™ï¼Œé€šè¿‡æŠ½è±¡åŒ–çš„æ–¹æ³•ï¼Œå°†é€šç”¨æ•°æ®å­—æ®µå’Œç‰¹æ®Šå­—æ®µç»„åˆï¼Œè®¾è®¡è¿™6ç§åœºæ™¯ã€‚</p><p>æœ€åå¾—å‡ºä¸‹é¢çš„å­—æ®µè®¾è®¡å›¾ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/13/86/13da897e409fa58031fa12aa3eyy2f86.png?wh=5224x2756\" alt=\"å›¾ç‰‡\"></p><h3>é€šç”¨æ•°æ®å­—æ®µ</h3><p>è¦æˆä¸ºä¸€ååˆæ ¼çš„å‰ç«¯å·¥ç¨‹å¸ˆï¼Œå…¶ä¸­ä¸€é¡¹é‡è¦çš„èƒ½åŠ›æ˜¯æŠ½è±¡æ€ç»´ã€‚å¯¹äºå¼‚å¸¸ä¿¡æ¯ï¼Œæˆ‘ä»¬éœ€è¦è¿›è¡ŒæŠ½è±¡åŒ–å¤„ç†ã€‚æ•°æ®çš„æŠ½è±¡åŒ–é€šå¸¸åŒ…æ‹¬ä¸€äº›æœ€å¸¸è§ä¸”æœ€å…³é”®çš„å­—æ®µå±æ€§ï¼Œå¦‚æ ‡è¯†ã€åç§°ã€ä¿¡æ¯ã€æ—¶é—´ã€‚</p><p>è¿˜æ˜¯éµå¾ªæœ€å°‘å­—æ®µè®¾è®¡åŸåˆ™ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹å·²ç»è®¾è®¡å¥½çš„æŠ½è±¡ç»“æ„ä»£ç ã€‚</p><pre><code class=\"language-typescript\">type TraceBaseData = {\n&nbsp; // id\n&nbsp; dataId: number\n&nbsp; // æ—¥å¿—ä¿¡æ¯åç§°\n&nbsp; name: string\n&nbsp; // é—®é¢˜çº§åˆ«\n&nbsp; level: TraceDataSeverity\n&nbsp; // å¼‚å¸¸ä¿¡æ¯\n&nbsp; message: string\n&nbsp; // å‘ç”Ÿæ—¶é—´\n&nbsp; time: number\n&nbsp; // é—®é¢˜ç±»å‹\n&nbsp; type: TraceDataTypes\n}\n</code></pre><p>ç»è¿‡æœ€å°‘å­—æ®µåŸåˆ™çš„è®¾è®¡ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æœ‰6ä¸ªå­—æ®µã€‚å…ˆè¯´å…¶ä¸­çš„4ä¸ªï¼ŒdataIdã€nameã€messageä»¥åŠtimeã€‚</p><ul>\n<li>dataIdã€‚è¿™ä¸ªå­—æ®µä¸æ˜¯æŒ‡å”¯ä¸€é”®å€¼ï¼Œè€Œæ˜¯å¯¹å¼‚å¸¸ä¿¡æ¯è¿›è¡Œå“ˆå¸Œåå¾—å‡ºçš„å­—ç¬¦ä¸²ã€‚å¦‚æœæœ‰å¤§é‡ç›¸åŒå­—ç¬¦ä¸²ï¼Œé‚£å°±è¯´æ˜å­˜åœ¨é€šç”¨å¼‚å¸¸é—®é¢˜ã€‚</li>\n<li>nameã€‚è¿™æ˜¯ä¸ºå¼‚å¸¸æ—¥å¿—æä¾›çš„ä¸€ä¸ªåç§°å­—æ®µã€‚</li>\n<li>messageã€‚è¿™ä¸ªå­—æ®µçš„æ ¸å¿ƒä½œç”¨æ˜¯è®°å½•å¼‚å¸¸ä¿¡æ¯çš„è¯¦æƒ…æˆ–è€…æè¿°ã€‚</li>\n<li>timeã€‚é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯æ—¶é—´ã€‚æŒ‡äº‹ä»¶è§¦å‘çš„æ—¶åˆ»ã€‚</li>\n</ul><p>è¿™4ä¸ªå­—æ®µæ¯”è¾ƒå¥½ç†è§£ï¼Œæˆ‘ç€é‡è¯´å¦å¤–ä¸¤ä¸ªï¼Œ<strong>é—®é¢˜çº§åˆ«levelä»¥åŠé—®é¢˜ç±»å‹typeã€‚</strong></p><p><strong>é—®é¢˜çº§åˆ«</strong>å®šä¹‰çš„æ˜¯ä¸€æ¡å¼‚å¸¸æ—¥å¿—çš„ä¸¥é‡ç¨‹åº¦ã€‚æ¯”å¦‚ï¼Œåœ¨å‰ç«¯ä»£ç è¯·æ±‚æ¥å£åï¼Œå¦‚æœç»“æœè¿”å›çš„çŠ¶æ€ç ä¸º400æˆ–500ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¯¥é—®é¢˜çº§åˆ«å®šä¹‰ä¸ºé«˜å±æˆ–æå…¶ä¸¥é‡ï¼Œå¦‚æœé¢‘ç¹å‡ºç°è¿™ç§ç»“æœï¼Œé‚£å°±è¯´æ˜ç”¨æˆ·å·²ç»æ— æ³•ä½¿ç”¨åŠŸèƒ½ï¼Œä½†æˆ‘ä»¬å¯ä»¥åœ¨å‰ç«¯é“¾è·¯é‡Œæå‰å‘ç°ã€‚</p><p>å¯èƒ½æœ‰åŒå­¦ä¼šæƒ³äº†ï¼Œä¸Šä¸€èŠ‚ä¹Ÿæœ‰æåˆ°levelå­—æ®µäº†ï¼Œé‚£è¿™é‡Œçš„é—®é¢˜çº§åˆ«levelå’Œå®ƒæœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿå®é™…ä¸Šï¼Œè¿™ä¸¤è€…æ˜¯ä¸åŒç»´åº¦çš„çº§åˆ«ã€‚åŸºç¡€æ•°æ®çš„levelæ˜¯ä»¥æ—¥å¿—å®Œæ•´ç»´åº¦åˆ’åˆ†çš„çº§åˆ«ï¼Œè€Œè¿™é‡Œçš„levelæ˜¯ä»¥é—®é¢˜ç»´åº¦åˆ’åˆ†çš„çº§åˆ«ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ç›‘æ§ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è®¾ç½®ä¸¤ä¸ªlevelç»´åº¦çº§åˆ«é€‰æ‹©æ€§åœ°ç›‘æ§ã€‚</p><p>ä¸ºäº†å°½å¯èƒ½è¦†ç›–æ›´å¤šçš„é—®é¢˜çº§åˆ«ï¼Œæˆ‘ä»¬ç»™levelå­—æ®µå®šä¹‰äº†8ç§çº§åˆ«ï¼Œä¹Ÿå°±æ˜¯TraceDataSeverityæšä¸¾ç±»å‹ä»£ç ã€‚</p><pre><code class=\"language-typescript\">declare enum TraceDataSeverity {\n&nbsp; // å…¶ä»–\n&nbsp; Else = 'else',\n&nbsp; // é”™è¯¯çº§åˆ«\n&nbsp; Error = 'error',\n&nbsp; // å‘Šè­¦çº§åˆ«\n&nbsp; Warning = 'warning',\n&nbsp; // æ—¥å¿—çº§åˆ«\n&nbsp; Info = 'info',\n&nbsp; // è°ƒè¯•çº§åˆ«\n&nbsp; Debug = 'debug',\n&nbsp; // ä½å±çº§åˆ«\n&nbsp; Low = 'low',\n&nbsp; // æ™®é€šçº§åˆ«\n&nbsp; Normal = 'normal',\n&nbsp; // é«˜å±çº§åˆ«\n&nbsp; High = 'high',\n&nbsp; // æå…¶ä¸¥é‡\n&nbsp; Critical = 'critical'\n}\n</code></pre><p>ç‰¹åˆ«å¼ºè°ƒçš„æ˜¯ï¼ŒHighå’ŒCriticalå±äºæœ€é«˜çº§åˆ«ã€‚å‡ºç°è¿™ç±»æ—¥å¿—çš„æ—¶å€™ï¼Œå‰ç«¯åŒå­¦éœ€è¦ç«‹å³å…³æ³¨ï¼Œå¹¶ä¸”åˆ†ææ˜¯å¦å­˜åœ¨çº¿ä¸Šæ•…éšœã€‚</p><p>å†è¯´è¯´å¦ä¸€ä¸ªå­—æ®µ<strong>typeï¼Œå®ƒæè¿°çš„æ˜¯é”™è¯¯æ—¥å¿—ç±»å‹</strong>ã€‚è¿™ä¸ªç±»å‹é‡Œæˆ‘ä¸€å…±å®šä¹‰äº†10ç§æšä¸¾å€¼ã€‚</p><p>å…¶ä¸­ï¼Œ6ç§æšä¸¾å€¼åˆ†åˆ«å¯¹åº”çš„æ˜¯å‰ç«¯è„šæœ¬ç±»å‹JAVASCRIPTã€è¯·æ±‚ç±»å‹HTTPã€èµ„æºRESOURCEã€è·¯ç”±ROUTEã€æ€§èƒ½PERFã€è°ƒè¯•LOGã€‚</p><p>å…¶ä¸­ï¼ŒPromiseæ˜¯æˆ‘ä»¬ç»å¸¸ç”¨æ¥å®ç°å¤§é‡çš„ä¸šåŠ¡é€»è¾‘çš„ã€‚è€ŒåŸºäºå¼‚æ­¥çš„ç‰¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ•è·å¼‚å¸¸çš„æ—¶å€™ä½¿ç”¨PROMISEã€‚UNKNOWåˆ™ç”¨äºä¸€äº›æœªçŸ¥å¼‚å¸¸çš„æ•è·ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜é¢å¤–å®šä¹‰äº†ä¸¤ä¸ªæšä¸¾å€¼Vueå’ŒReactï¼Œæ–¹ä¾¿å‰ç«¯ç»„ä»¶ä»£ç åœ¨å¼‚å¸¸æ—¶æ ‡è®°å¯¹åº”çš„æŠ€æœ¯æ ˆã€‚</p><p>æœ€åï¼Œæˆ‘ä»¬ä½¿ç”¨TraceDataTypesæšä¸¾åå­—å®šä¹‰ç±»å‹ã€‚å‚è€ƒå¦‚ä¸‹ä»£ç ã€‚</p><pre><code class=\"language-typescript\">declare enum TraceDataTypes {\n&nbsp; UNKNOWN = 'UNKNOWN',\n&nbsp; JAVASCRIPT = 'JAVASCRIPT',\n&nbsp; LOG = 'LOG',\n&nbsp; HTTP = 'HTTP',\n&nbsp; VUE = 'VUE',\n&nbsp; REACT = 'REACT',\n&nbsp; RESOURCE = 'RESOURCE',\n&nbsp; PROMISE = 'PROMISE',\n&nbsp; ROUTE = 'ROUTE',\n&nbsp; PERF = 'PERF'\n}\n</code></pre><h3>ä»£ç å¼‚å¸¸ç±»å‹</h3><p>æœ‰äº†é€šç”¨çš„æŠ½è±¡æ•°æ®æ¨¡å‹åï¼Œå†å®šä¹‰ä¸Šå±‚æ•°æ®æ¨¡å‹ã€‚å…ˆæ¥çœ‹çœ‹ä»£ç å¼‚å¸¸ç±»å‹ã€‚</p><p>å’±ä»¬éƒ½çŸ¥é“ï¼Œå½“å‰ç«¯ä»£ç å¼‚å¸¸æŠ¥é”™æ—¶ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œæ§åˆ¶å°ä¹Ÿä¼šè¾“å‡ºå †æ ˆä¿¡æ¯ã€‚å †æ ˆä¿¡æ¯æ˜¯æˆ‘ä»¬å‰ç«¯åŒå­¦åˆ†æä»£ç ä½ç½®ã€å¿«é€Ÿå‘ç°é—®é¢˜çš„ä¸»è¦ä¿¡æ¯æ¥æºã€‚æ‰€ä»¥ï¼Œä»£ç å¼‚å¸¸ç±»å‹è¿˜éœ€è¦æ‰©å±•ä¸€ä¸ªè®°å½•å †æ ˆä¿¡æ¯çš„å­—æ®µï¼Œstackã€‚</p><p>å¥½äº†ï¼Œç°åœ¨æˆ‘ä»¬å¾—åˆ°äº†è·å–ä»£ç å¼‚å¸¸ä¿¡æ¯çš„ä»£ç ã€‚</p><pre><code class=\"language-typescript\">// ä»£ç å¼‚å¸¸é”™è¯¯ä¿¡æ¯\ntype TractDataCodeError = TraceBaseData &amp; {\n&nbsp; stack: []\n}\n</code></pre><h3>ç½‘ç»œè¯·æ±‚ç±»å‹</h3><p>ç½‘ç»œè¯·æ±‚ç±»å‹çš„ä½œç”¨æ˜¯è¿½è¸ªå‰ç«¯å‘åç«¯æ¥å£å‘èµ·è¯·æ±‚çš„çŠ¶æ€ã€‚ç›¸å¯¹äºè„šæœ¬é”™è¯¯ç±»å‹ï¼Œå®ƒéœ€è¦æ›´å¤šæ‰©å±•å­—æ®µï¼Œä½†è€ƒè™‘åˆ°æœ€å°‘å­—æ®µåŸåˆ™ï¼Œæˆ‘ä»¬ä»…è®¾è®¡å‡ºå¿…è¦çš„6ä¸ªå­—æ®µå°±å¯ä»¥äº†ï¼ŒåŒ…æ‹¬æ¥å£åœ°å€ã€è¯·æ±‚æ–¹æ³•ã€è¯·æ±‚å‚æ•°ã€å“åº”çŠ¶æ€ã€æ‰§è¡Œè€—æ—¶ã€è„šæœ¬è¯·æ±‚ç±»å‹ã€‚</p><p>æœ€ç»ˆï¼Œæˆ‘ä»¬å¾—åˆ°ç½‘ç»œè¯·æ±‚ç±»å‹çš„ä»£ç ã€‚</p><pre><code class=\"language-typescript\">// è¯·æ±‚ç±»ä¿¡æ¯\ntype TraceDataFetch = TraceBaseData &amp; {\n&nbsp; // æ‰§è¡Œæ—¶é—´ï¼Œç”¨äºç»Ÿè®¡è€—æ—¶\n&nbsp; elapsedTime: number\n&nbsp; // è¯·æ±‚æ–¹æ³•\n&nbsp; method: 'POST' | 'GET'\n&nbsp; // è¯·æ±‚ç±»å‹\n&nbsp; httpType: 'fetch' | 'xhr'\n&nbsp; // è¯·æ±‚åœ°å€\n&nbsp; url: string\n&nbsp; // è¯·æ±‚å‚æ•°\n&nbsp; body: string\n&nbsp; // å“åº”çŠ¶æ€\n&nbsp; status: number\n}\n</code></pre><h3>å…¶ä½™ç±»å‹å­—æ®µï¼ˆPromiseã€èµ„æºã€è‡ªå®šä¹‰ã€PV/UVï¼‰</h3><p>å‰©ä½™çš„å…¶å®ƒæ•°æ®ç±»å‹ï¼ŒåŒ…æ‹¬Promiseç±»å‹ã€èµ„æºç±»å‹ä»¥åŠè‡ªå®šä¹‰æ—¥å¿—ç±»å‹ã€‚</p><p>ç”±äºå…¬å…±å­—æ®µå·²ç»æ»¡è¶³å…¨é“¾è·¯æ¦‚å¿µçš„èƒ½åŠ›ï¼Œæ‰€ä»¥ï¼ŒåŸºäºæœ€å°‘å­—æ®µåŸåˆ™ï¼Œå¯¹äºPromiseå’ŒResourceï¼Œæˆ‘ä¸ä¼šå†æ‰©å±•è¿‡å¤šçš„å­—æ®µã€‚</p><p>è‡³äºè‡ªå®šä¹‰æ—¥å¿—ç±»å‹ï¼Œæˆ‘ä¼šå¢åŠ ä¸€ä¸ªtagå­—æ®µä½œä¸ºå¯¹ä¸Šå±‚ä¸šåŠ¡å†…å®¹çš„è¡¥å……ï¼Œæ—¢å¯ä»¥å½“æˆæ ‡ç­¾ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥å½“ä½œä¸€æ®µéœ€è¦æ ‡è®°çš„å­—ç¬¦ä¸²ã€‚è¿˜æœ‰PV/UVç»Ÿè®¡ç±»æ—¥å¿—ï¼Œä¹Ÿåªè¡¥å……ä¸€ä¸ªç”¨äºSPAçš„é™æ€è·¯ç”±å­—æ®µï¼Œè®°å½•ç”¨æˆ·å½“å‰æ‰€åœ¨çš„é¡µé¢ã€‚</p><p>è¿™äº›ç±»å‹å­—æ®µçš„è®¾è®¡ï¼Œæˆ‘ä»¬éƒ½ä¼šå®šä¹‰æ–°çš„å‘½åä½œä¸ºç±»å‹åç§°ï¼Œä¹‹ååœ¨ä»£ç ä¸­å®šä¹‰æ•°æ®å˜é‡çš„æ—¶å€™ä¹Ÿä¼šæ›´æ–¹ä¾¿ã€‚</p><p>å‚è€ƒä»£ç å¦‚ä¸‹ã€‚</p><pre><code class=\"language-typescript\">// Promiseç±»å‹\ntype TraceDataPromise = TraceBaseData\n\n// èµ„æºç±»å‹\ntype TraceDataResource = TraceBaseData\n\n// æ™®é€šæ—¥å¿—\ntype TraceDataLog = TraceBaseData &amp; {\n&nbsp; tag: string\n}\n\n// PV/UV\ntype TraceDataPageView = TraceBaseData &amp; {\n&nbsp; route: string\n}\n</code></pre><p>å½“ç„¶ï¼Œåœ¨çœŸå®é¡¹ç›®ä¸­ï¼Œå¦‚æœæœ‰éå¸¸é‡è¦çš„å­—æ®µèƒ½ååŠ©å®šä½é—®é¢˜ï¼Œä¹Ÿæ˜¯å¯ä»¥æ‰©å±•çš„ã€‚è®°å¾—ä¸è¦ç›²ç›®å¢åŠ ã€è¿‡åº¦å¢åŠ å°±å¥½ã€‚</p><h2>ç½‘é¡µæŒ‡æ ‡ç±»å‹</h2><p>å­¦ä¹ å®Œå¼‚å¸¸ä¿¡æ¯ç±»å‹çš„å®šä¹‰åï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥å­¦ä¹ ä¸‹å¦‚ä½•è®°å½•é¡µé¢æ€§èƒ½æ•°æ®ã€‚</p><p>ç›¸ä¿¡å¾ˆå¤šå‰ç«¯åŒå­¦å¬åˆ°æ”¶é›†é¡µé¢æ€§èƒ½æ•°æ®ï¼Œå°±ä¼šè”æƒ³åˆ°Performanceå¯¹è±¡ã€‚ä¸è¿‡æˆ‘å¹¶ä¸æ¨èä½¿ç”¨Performanceï¼Œè¿™é‡Œæˆ‘ä¼šä½¿ç”¨WebVitalsæ¥è¯„ä¼°é¡µé¢æ€§èƒ½ã€‚å…³äºä¸ºä½•é€‰æ‹©WebVitalsï¼Œæˆ‘ä¼šåœ¨åé¢çš„å°è¯¾ä¸­è¯¦ç»†è®²è§£ã€‚</p><p>ç”±äºæˆ‘ä»¬ç”¨åˆ°WebVitalsç½‘é¡µæŒ‡æ ‡ï¼Œè®¾è®¡å­—æ®µçš„æ—¶å€™å°±éœ€è¦å‚è€ƒWebVitalsæä¾›çš„èƒ½åŠ›ï¼Œä¾‹å¦‚æŒ‡æ ‡å€¼ã€æŒ‡æ ‡è¡¡é‡ç­‰å­—æ®µã€‚æœ€åæˆ‘ä»¬è®¾è®¡äº†å‡º6ä¸ªæŒ‡æ ‡ã€12ä¸ªå±æ€§å€¼çš„æ•°æ®æ¨¡å‹ï¼Œå‚è€ƒå¦‚ä¸‹ä»£ç ã€‚</p><pre><code class=\"language-typescript\">// webVitalsæ€§èƒ½æ”¶é›†ä¿¡æ¯å¯¹è±¡\ntype TracePerf = {\n  id: string\n  LCP?: number\n  LCPRating?: TracePerfRating\n  FID?: number\n  FIDRating?: TracePerfRating\n  FCP?: number\n  FCPRating?: TracePerfRating\n  TTFB?: number\n  TTFBRating?: TracePerfRating\n  CLS?: number\n  CLSRating?: TracePerfRating\n  INP?: number\n  INPRating?: TracePerfRating\n}\n</code></pre><p>è®¾è®¡12ä¸ªæŒ‡æ ‡å±æ€§çš„ç›®çš„ï¼Œæ˜¯ä¸ºäº†æ›´æ¸…æ™°åœ°çŸ¥é“æ¯ä¸ªæŒ‡æ ‡å€¼çš„å®é™…æƒ…å†µï¼Œä¸ç”¨åšäºŒæ¬¡å¤„ç†ï¼Œå°±èƒ½ç›´æ¥åœ¨ç›‘æ§å’Œé€šçŸ¥ä¸Šä½¿ç”¨ã€‚</p><p>å¦å¤–ï¼Œç”±äºè¿™6ä¸ªç½‘é¡µæŒ‡æ ‡çš„è®¡ç®—æ—¶æœºå­˜åœ¨å·®å¼‚ï¼Œä¸å¯èƒ½åœ¨åŒä¸€æ—¶åˆ»è·å–ï¼Œæ‰€ä»¥æˆ‘æŠŠ12ä¸ªæŒ‡æ ‡å±æ€§å®šä¹‰ä¸ºéå¿…é€‰é¡¹å±æ€§ã€‚</p><h2>æ“ä½œè¡Œä¸ºç±»å‹</h2><p>æœ€åæˆ‘ä»¬æ¢è®¨ä¸€ä¸‹ç”¨æˆ·çš„æ“ä½œè¡Œä¸ºç±»å‹ã€‚åœ¨çœŸå®é¡¹ç›®ä¸­ï¼Œè¡Œä¸ºæ•°æ®çš„è®°å½•é€šå¸¸éƒ½æ˜¯è‡ªåŠ¨åŒ–çš„ï¼Œæ¯”å¦‚ç”¨æˆ·ç‚¹å‡»ä¸€æ¬¡æŒ‰é’®ï¼Œç¨‹åºå°±ä¼šè‡ªåŠ¨è¯†åˆ«ç”¨æˆ·çš„ç‚¹å‡»æ“ä½œï¼ŒæŠŠç›¸åº”çš„è¡Œä¸ºæ•°æ®è®°å½•ä¸‹æ¥ã€‚</p><p>å…ˆæ¥çœ‹ä¸‹å¦‚ä½•å®šä¹‰æ“ä½œè¡Œä¸ºçš„ç±»å‹ã€‚ä¸€å…±æœ‰5ä¸ªå±æ€§å­—æ®µï¼Œå‚è€ƒä»£ç å¦‚ä¸‹ã€‚</p><pre><code class=\"language-typescript\">// åŸºç±»è¡Œä¸ºæ—¥å¿—ç±»å‹\ntype TraceBaseAction = {\n  // åŠ¨ä½œåç§°\n  name: string\n  // åŠ¨ä½œå‚æ•°\n  level: TraceDataSeverity\n  // åŠ¨ä½œæ—¶é—´\n  time: string\n  // æ—¥å¿—ç±»å‹\n  type: BreadcrumbTypes\n  // è¡Œä¸ºåˆ†ç±»\n  category: BreadcrumbsCategorys\n}\n\n// è¡Œä¸ºæ—¥å¿—\ntype TraceAction = TraceBaseAction &amp; {\n  // è¡Œä¸ºåŠ¨ä½œç›¸å…³çš„ä¿¡æ¯ï¼Œå¯ä»¥æ˜¯DOMï¼Œå¯ä»¥æ˜¯é”™è¯¯ä¿¡æ¯ï¼Œå¯ä»¥æ˜¯è‡ªå®šä¹‰ä¿¡æ¯\n  message?: string\n  // è¯·æ±‚å‚æ•°\n  request?: any\n  // è¯·æ±‚ç»“æœå†…å®¹\n  response?: any\n  // é”™è¯¯å †æ ˆä¿¡æ¯\n  stack?: string\n}\n</code></pre><p>å…¶ä¸­levelå­—æ®µè·ŸTraceBaseDataç±»å‹çš„levelå­—æ®µä¸€æ ·ï¼Œå› ä¸ºå®ƒä»¬éƒ½æ˜¯å®šä¹‰é—®é¢˜ä¸¥é‡æ€§çš„ï¼Œè€Œä¸”ä¸¤ä¸ªå­—æ®µæ˜¯åŒæ­¥çš„ã€‚</p><p>å¦å¤–ï¼Œtypeå’Œcategoryçœ‹ç€å¾ˆåƒï¼Œå®é™…ä¸Šæ˜¯æœ‰åŒºåˆ«çš„ã€‚</p><p>typeå­—æ®µå®šä¹‰äº†TraceBreadcrumbTypesæšä¸¾ç±»å‹ï¼Œå®ƒå’ŒTraceDataTypesæšä¸¾ç±»å‹å¾ˆæ¥è¿‘ï¼Œä½†ä¸å®Œå…¨ç›¸åŒï¼Œæ¯”å¦‚TraceDataTypesæšä¸¾åˆ™åŒ…å«æœ‰PERFå€¼å’ŒLOGå€¼ï¼Œè€Œcategoryå­—æ®µä¸»è¦å®šä¹‰è¡Œä¸ºæ—¥å¿—çš„ç±»åˆ«ï¼Œæ¯”å¦‚ç”¨æˆ·ç‚¹å‡»ã€è¯·æ±‚ã€æ—¥å¿—è¾“å‡ºã€ç»„ä»¶ç”Ÿå‘½å‘¨æœŸç­‰ã€‚</p><p>æ‰€ä»¥ï¼Œtypeçš„å®šä½æ˜¯å¼‚å¸¸ä¿¡æ¯çš„ç±»åˆ«ï¼Œcategoryåˆ™æ˜¯è¡Œä¸ºæ—¥å¿—ç±»åˆ«ï¼Œä¸¤è€…æ˜¯ä¸ç›¸åŒçš„ã€‚</p><p>è¿™ä¸¤ä¸ªæšä¸¾ç±»å‹çš„ä»£ç å®šä¹‰å¦‚ä¸‹ã€‚</p><pre><code class=\"language-typescript\">declare enum BreadcrumbsCategorys {\n&nbsp; Http = 'http',\n&nbsp; User = 'user',\n&nbsp; Debug = 'debug',\n&nbsp; Exception = 'exception',\n&nbsp; Lifecycle = 'lifecycle'\n}\n\ndeclare enum BreadcrumbTypes {\n&nbsp; ROUTE = 'Route',\n&nbsp; CLICK = 'UI.Click',\n&nbsp; CONSOLE = 'Console',\n&nbsp; FETCH = 'Fetch',\n&nbsp; UNHANDLEDREJECTION = 'Unhandledrejection',\n&nbsp; RESOURCE = 'Resource',\n&nbsp; CODE_ERROR = 'Code Error',\n&nbsp; CUSTOMER = 'Customer'\n}\n</code></pre><h2>æ•´åˆä¸€ä»½å®Œæ•´çš„é“¾è·¯æ—¥å¿—</h2><p>è‡³æ­¤ï¼Œæˆ‘ä»¬æ¢è®¨å®Œäº†æœ€å¸¸è§çš„å¼‚å¸¸ä¿¡æ¯æ•°æ®ç±»å‹ã€‚é‚£æˆ‘ä»¬åº”è¯¥å¦‚ä½•æŠŠè¿™èŠ‚è¯¾è®°å½•çš„é—®é¢˜ä¿¡æ¯å’Œä¸ŠèŠ‚è¯¾çš„åŸºç¡€æ•°æ®ç»“æ„æ•´åˆåœ¨ä¸€èµ·ï¼Œå½¢æˆä¸€ä»½å®Œæ•´çš„é“¾è·¯æ—¥å¿—å‘¢ï¼Ÿ</p><p>é¦–å…ˆï¼Œä¸ºäº†ç¡®ä¿ä¸¤è€…ä¹‹é—´çš„å­—æ®µå‘½åä¸é‡å¤ï¼Œæˆ‘çš„æ–¹æ¡ˆæ˜¯æ–°å¢dataå­—æ®µæ¥è®°å½•æ—¥å¿—ï¼Œè®©è®°å½•é—®é¢˜ä¿¡æ¯å’ŒåŸºç¡€æ•°æ®å­—æ®µä¸åœ¨åŒä¸€å±‚çº§ï¼Œå‚è€ƒå‰é¢çš„TraceDataç±»å‹ä»£ç å®šä¹‰ã€‚</p><p>å…¶æ¬¡ï¼Œç”±äºæ€§èƒ½æ•°æ®æ˜¯é€šè¿‡å¯¹è±¡çš„æ–¹å¼å­˜å‚¨æ¯ä¸ªç½‘é¡µæŒ‡æ ‡çš„ï¼Œå®ƒä¸æ˜¯ä¸€ç§å¼‚å¸¸æˆ–é”™è¯¯ä¿¡æ¯ï¼Œå› æ­¤ä¹Ÿè¦æ–°å¢perfå­—æ®µã€‚</p><p>æœ€åï¼Œç”¨æˆ·è¡Œä¸ºç±»å‹ã€‚å®ƒå’Œè®°å½•é—®é¢˜ä¿¡æ¯ã€æ€§èƒ½æ•°æ®ä¸åŒï¼Œæ˜¯è´¯ç©¿ç”¨æˆ·æ•´ä¸ªè¡Œä¸ºè¿‡ç¨‹çš„ä¸€ä¸ªå¿«ç…§ã€‚æ‰€ä»¥æˆ‘ä»¬ä¹Ÿæ‰©å±•ä¸€ä¸ªå­—æ®µbreadcrumbsè®°å½•è¡Œä¸ºä¿¡æ¯ã€‚</p><p>æœ€ç»ˆï¼Œä¸€ä»½å®Œæ•´çš„é“¾è·¯æ—¥å¿—ç±»å‹å°±å®šä¹‰å®Œæ¯•ï¼Œæˆ‘ä»¬ç”¨TraceDataå‘½åï¼Œä»£ç å‚è€ƒå¦‚ä¸‹ã€‚</p><pre><code class=\"language-typescript\">// ä¸€ä»½é”™è¯¯ä¿¡æ¯çš„ç±»å‹é›†åˆ\ntype TraceTypeData = TraceDataFetch | TractDataCodeError | TraceDataPromise | TraceDataResource | TraceDataLog | TraceDataPageView\n\n// æ“ä½œè¡Œä¸ºæ—¥å¿—\ntype TraceBreadcrumbs = TraceAction[]\n\n// å®Œæ•´çš„å…¨é“¾è·¯æ—¥å¿—\ntype TraceData = BaseTraceInfo &amp; {\n  // è®°å½•é”™è¯¯ä¿¡æ¯\n  data?: TraceTypeData\n  // è®°å½•æ“ä½œè¡Œä¸º\n  breadcrumbs?: TraceBreadcrumbs\n  // è®°å½•æ€§èƒ½ä¿¡æ¯\n  perf?: TracePerf[]\n}\n</code></pre><p>è¿™é‡Œæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œä¸ºä»€ä¹ˆdataã€breadcrumbsä»¥åŠperféƒ½æ˜¯éå¿…è¦å­—æ®µå‘¢ï¼Ÿ</p><p>ä½ çœ‹ï¼Œå¦‚æœå½“å‰æ—¥å¿—æ˜¯è®°å½•æ€§èƒ½çš„ï¼Œé‚£ä¹ˆdataå’Œbreadcrumbså…¶å®å°±æ²¡å¿…è¦æ”¶é›†äº†ï¼Œå¯¹ä¸å¯¹ï¼ŸåŒæ ·çš„ï¼Œåœ¨æ­£å¸¸æƒ…å†µä¸‹ï¼Œå¦‚æœæœ‰å¼‚å¸¸æ—¥å¿—ï¼Œperfå­—æ®µä¹Ÿæ²¡å¿…è¦è®°å½•ï¼Œå› ä¸ºå…³è”æ„ä¹‰ä¸å¤§ã€‚åŒæ—¶ï¼Œæœ‰äº†breadcrumbsçš„è®¾è®¡ï¼Œæ—¥å¿—é‡ä¼šéå¸¸åºå¤§ï¼Œè€Œä»å®é™…æƒ…å†µæ¥çœ‹ï¼Œåªæœ‰éœ€è¦å®šä½é—®é¢˜çš„æ—¶å€™ï¼Œæˆ‘ä»¬æ‰éœ€è¦ç”¨æˆ·çš„ä¸Šä¸‹æ–‡æ“ä½œä¿¡æ¯ã€‚æ‰€ä»¥ï¼Œbreadcrumbså­—æ®µå¯ä»¥æ ¹æ®å®é™…æƒ…å†µæ¥è®¾å®šæ˜¯å¦éœ€è¦ä¸ŠæŠ¥åˆ°æœåŠ¡å™¨ç«¯ã€‚</p><p>å¥½äº†ï¼Œç°åœ¨æˆ‘ä»¬ä»¥æå®¢æ—¶é—´ç§»åŠ¨ç«¯H5è¯·æ±‚ä¸€ä¸ªæ¥å£ä½œä¸ºä¾‹å­ï¼Œå†™ä¸€ä»½è¯·æ±‚æ­£å¸¸çŠ¶æ€çš„å®Œæ•´æ—¥å¿—ã€‚</p><pre><code class=\"language-json\">// trace data json\n{\n&nbsp; \"traceId\": \"0bdf6c8e-25c8-427d-847a-9950318a2e14\",\n&nbsp; \"level\": \"warn\",\n&nbsp; \"type\": \"Action\",\n&nbsp; \"ua\": \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/124.0.0.0 Safari/537.36\",\n&nbsp; \"bt\": \"mobile\",\n&nbsp; \"fpId\": \"c77a37f4\",\n&nbsp; \"uid\": 1002,\n&nbsp; \"appId\": \"geekbang-h5\",\n&nbsp; \"clientType\": \"browser\",\n&nbsp; \"pid\": \"088c8a92-5a24-4144-9c37-310848c397e1\",\n&nbsp; \"url\": \"https://time.geekbang.org/\",\n&nbsp; \"createdAt\": \"2024-03-13T15:35:30.292Z\",\n&nbsp; \"updatedAt\": \"2024-03-13T15:35:30.292Z\",\n&nbsp; \"data\": {\n&nbsp; &nbsp; \"dataId\": 2384780,\n&nbsp; &nbsp; \"name\": \"fetch-api\",\n&nbsp; &nbsp; \"level\": \"info\",\n&nbsp; &nbsp; \"message\": \"success\",\n&nbsp; &nbsp; \"time\": 1710345961943,\n&nbsp; &nbsp; \"type\": \"HTTP\",\n&nbsp; &nbsp; \"elapsedTime\": 166.34,\n&nbsp; &nbsp; \"method\": \"POST\",\n&nbsp; &nbsp; \"httpType\": \"fetch\",\n&nbsp; &nbsp; \"url\": \"https://time.geekbang.org/serv/v3/product/infos\",\n&nbsp; &nbsp; \"body\": \"{\\\"ids\\\":[100035801,100002401,100024001,100007001,100003901,100029601,100027801,100034101,100042501,100023701]}\",\n&nbsp; &nbsp; \"status\": 0\n&nbsp; },\n&nbsp; \"breadcrumbs\": [\n&nbsp; &nbsp; {\n&nbsp; &nbsp; &nbsp; \"name\": \"fetch-api\",\n&nbsp; &nbsp; &nbsp; \"level\": \"info\",\n&nbsp; &nbsp; &nbsp; \"time\": \"string\",\n&nbsp; &nbsp; &nbsp; \"type\": \"Fetch\",\n&nbsp; &nbsp; &nbsp; \"category\": \"hhtp\"\n&nbsp; &nbsp; }\n&nbsp; ]\n}\n\n</code></pre><p>è¿™ä»½ä»£ç ç›¸å½“äºæ‹†è§£äº†ä¸€ä»½å®Œæ•´é“¾è·¯æ—¥å¿—ã€‚å°†é€šç”¨åŸºç¡€æ•°æ®ç»“æ„ã€å¼‚å¸¸ä¿¡æ¯ç±»å‹ã€æ“ä½œè¡Œä¸ºç±»å‹ã€æ€§èƒ½æ•°æ®ç±»å‹ç»“åˆï¼Œæˆ‘ä»¬å¯ä»¥æ•´ç†æˆä¸€å¥—å¦‚ä¸‹çš„é“¾è·¯æ—¥å¿—å…³ç³»å›¾ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/b4/cd/b4a5f3c2397664485c4711215f20d7cd.jpg?wh=4233x2612\" alt=\"\"></p><h2>æ€»ç»“</h2><p>è¿™èŠ‚è¯¾ï¼Œæˆ‘ä»¬è¿›ä¸€æ­¥æ¢è®¨äº†å‰ç«¯å…¨é“¾è·¯æ—¥å¿—ä¸­è®°å½•é—®é¢˜å­—æ®µçš„è®¾è®¡ã€‚</p><p>éœ€è¦å¼ºè°ƒçš„æ˜¯ï¼Œæˆ‘ä»¬ä»ç„¶æ˜¯ä»¥æœ€å°‘å­—æ®µä¸ºåŸåˆ™å»è®¾è®¡çš„ã€‚ä»è®°å½•é—®é¢˜çš„ç»´åº¦è€ƒè™‘ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠä¼—å¤šçš„ä¿¡æ¯å­—æ®µåˆ†æˆä¸‰å¤§ç±»ï¼Œå¼‚å¸¸ä¿¡æ¯ç±»ã€ç½‘é¡µæŒ‡æ ‡ç±»å’Œæ“ä½œè¡Œä¸ºç±»ã€‚</p><p>å¼‚å¸¸ä¿¡æ¯ç±»å‹çš„ä¸»è¦ä½œç”¨æ˜¯åœ¨ç¨‹åºä»£ç å¼‚å¸¸çš„æ—¶å€™ï¼ŒæŠŠå¼‚å¸¸å †æ ˆä¿¡æ¯è®°å½•ä¸‹æ¥ï¼Œç„¶åæä¾›ç»™å‰ç«¯åŒå­¦åšåˆ†æã€‚å…¶ä¸­ï¼Œ<strong>ä»£ç å¼‚å¸¸</strong>å’Œ<strong>ç½‘ç»œè¯·æ±‚</strong>æ˜¯æˆ‘ä»¬æœ€å¸¸è§ä¹Ÿæ˜¯æœ€é‡è¦çš„ä¸¤ç§åœºæ™¯ï¼Œæ˜¯å½±å“ç”¨æˆ·ä½“éªŒçš„æ ¸å¿ƒé—®é¢˜ï¼Œéœ€è¦ç‰¹åˆ«é‡è§†ã€‚</p><p>ç½‘é¡µæŒ‡æ ‡ç±»å‹ï¼Œæ˜¯åŸºäºWebVitalsçš„ç†è®ºè®¾è®¡å‡ºçš„6ä¸ªæ ¸å¿ƒæŒ‡æ ‡ï¼Œç”±äºè€ƒè™‘åˆ°æ¯ä¸ªé¡µé¢æŒ‡æ ‡çš„è·å–å¹¶ä¸åŒæ­¥ï¼Œæ‰€ä»¥ï¼Œæå‰å®šä¹‰12ä¸ªå­—æ®µå±æ€§æ›´åˆé€‚ã€‚</p><p>é™¤äº†è®°å½•å¼‚å¸¸å’Œæ€§èƒ½ï¼Œç”¨æˆ·çš„æ“ä½œè¡Œä¸ºä¹Ÿéå¸¸é‡è¦ã€‚æˆ‘ä»¬åŸºäºæœ€å°‘åŸåˆ™å’Œè¡Œä¸ºç‰¹æ€§ï¼Œè®¾è®¡å‡ºäº†6ä¸ªå­—æ®µï¼Œä»¥ä¿è¯èƒ½å¤Ÿè¿˜åŸå‡ºç”¨æˆ·äº¤äº’çš„ä¸€ä¸ªå¿«ç…§ï¼Œå¸®åŠ©æˆ‘ä»¬å¿«é€Ÿäº†è§£ç”¨æˆ·çš„çœŸå®æƒ…å†µã€‚</p><h2>æ€è€ƒé¢˜</h2><p>æ­¤åˆ»ï¼Œæˆ‘å¸Œæœ›ä½ èƒ½å¯¹è‡ªå·±çš„å‰ç«¯é¡¹ç›®ç»éªŒè¿›è¡Œä¸€äº›åæ€ã€‚åœ¨ä½ æ‰€å‚ä¸çš„å‰ç«¯é¡¹ç›®ä¸­ï¼Œæœ€å¸¸é‡åˆ°åˆ°çš„çº¿ä¸Šé—®é¢˜æ˜¯å…³äºå“ªä¸€ç±»ä¸šåŠ¡çš„ï¼Ÿåœ¨æ²¡æœ‰é“¾è·¯æ—¥å¿—å’Œç›‘æ§çš„æƒ…å†µä¸‹ï¼Œä½ åˆæ˜¯å¦‚ä½•é€šè¿‡åŸ‹ç‚¹è§£å†³è¿™äº›é—®é¢˜çš„å‘¢ï¼Ÿ</p><p>æ¬¢è¿ä½ åœ¨ç•™è¨€åŒºå’Œæˆ‘äº¤æµã€‚å¦‚æœè§‰å¾—æœ‰æ‰€æ”¶è·ï¼Œä¹Ÿå¯ä»¥æŠŠè¯¾ç¨‹åˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ä¸€èµ·å­¦ä¹ ã€‚æˆ‘ä»¬ä¸‹èŠ‚è¯¾è§ï¼</p>","neighbors":{"left":{"article_title":"04ï½œæ•°æ®ç»“æ„ï¼ˆä¸Šï¼‰ï¼šå¦‚ä½•è®¾è®¡å…¨é“¾è·¯æ•°æ®æ¨¡å‹","id":767888},"right":{"article_title":"06ï½œæŒ‡çº¹IDï¼šå¦‚ä½•é€šè¿‡æŒ‡çº¹IDå…³è”å…¨é“¾è·¯æ—¥å¿—ï¼Ÿ","id":770290}},"comments":[{"had_liked":false,"id":392572,"user_name":"è‹æœæœ","can_delete":false,"product_type":"c1","uid":2852467,"ip_address":"åŒ—äº¬","ucode":"12A62ED032F345","user_header":"https://static001.geekbang.org/account/avatar/00/2b/86/73/5190bbde.jpg","comment_is_top":true,"comment_ctime":1721270662,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100759401,"comment_content":"05æºç ï¼š\nhttps:&#47;&#47;github.com&#47;sankyutang&#47;fontend-trace-geekbang-course&#47;blob&#47;main&#47;trace-sdk&#47;src&#47;typings&#47;typing.d.ts\n\nå®Œæ•´ä»£ç å…¥å£ï¼š\nhttps:&#47;&#47;github.com&#47;sankyutang&#47;fontend-trace-geekbang-course","like_count":0},{"had_liked":false,"id":394262,"user_name":"Aaaaaaaaaaayou","can_delete":false,"product_type":"c1","uid":1073601,"ip_address":"å¹¿ä¸œ","ucode":"67BA315B87587D","user_header":"https://static001.geekbang.org/account/avatar/00/10/61/c1/93031a2a.jpg","comment_is_top":false,"comment_ctime":1726279357,"is_pvip":false,"replies":[{"id":143139,"content":"æ˜¯çš„ã€‚æœ€æ—©æœŸæˆ‘ä¹Ÿç®—æ˜¯æ·±åº¦ä½¿ç”¨è¿‡Sentryï¼Œè€Œä¸”è¿˜æ˜¯å®ç°è¿‡é‡Œé¢çš„æ’ä»¶ã€‚\nä½†æ˜¯ï¼ŒSentryçš„å…¥é—¨é—¨æ§›å¤ªé«˜ï¼Œå¹¶éä¸­å°å›¢é˜Ÿèƒ½å¤ŸæŠŠæ¡åˆ°é‚£ä¸ªå¤æ‚çš„ç³»ç»Ÿï¼Œåå°±æ¥å°±æ ¹æ®å›¢é˜Ÿçš„å®é™…ä¸šåŠ¡ï¼Œè®¾è®¡å‡ºé€‚åˆå›¢é˜Ÿçš„å°å‹å…¨é“¾è·¯ç›‘æ§ç³»ç»Ÿæµç¨‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1327155,"ctime":1726566077,"ip_address":"å¹¿ä¸œ","comment_id":394262,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100759401,"comment_content":"æ„Ÿè§‰è€å¸ˆçš„è®¾è®¡ä¸­æœ‰å¾ˆå¤š Sentry çš„å½±å­ï¼Œåƒ dataId å°±ç±»ä¼¼äº fingerprint","like_count":0,"discussions":[{"author":{"id":1327155,"avatar":"https://static001.geekbang.org/account/avatar/00/14/40/33/11e434ba.jpg","nickname":"ä¸‰æ©‹sankyu ğŸ©","note":"","ucode":"2129405EA8D3D7","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":651223,"discussion_content":"æ˜¯çš„ã€‚æœ€æ—©æœŸæˆ‘ä¹Ÿç®—æ˜¯æ·±åº¦ä½¿ç”¨è¿‡Sentryï¼Œè€Œä¸”è¿˜æ˜¯å®ç°è¿‡é‡Œé¢çš„æ’ä»¶ã€‚\nä½†æ˜¯ï¼ŒSentryçš„å…¥é—¨é—¨æ§›å¤ªé«˜ï¼Œå¹¶éä¸­å°å›¢é˜Ÿèƒ½å¤ŸæŠŠæ¡åˆ°é‚£ä¸ªå¤æ‚çš„ç³»ç»Ÿï¼Œåå°±æ¥å°±æ ¹æ®å›¢é˜Ÿçš„å®é™…ä¸šåŠ¡ï¼Œè®¾è®¡å‡ºé€‚åˆå›¢é˜Ÿçš„å°å‹å…¨é“¾è·¯ç›‘æ§ç³»ç»Ÿæµç¨‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1726566077,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":391956,"user_name":"æå®¶çš„é£","can_delete":false,"product_type":"c1","uid":1393166,"ip_address":"ç¦å»º","ucode":"B5BC1DCFC83322","user_header":"https://static001.geekbang.org/account/avatar/00/15/42/0e/00214714.jpg","comment_is_top":false,"comment_ctime":1719497559,"is_pvip":false,"replies":[{"id":142670,"content":"æœ‰çš„ï¼Œå·²å‘å¸ƒã€‚é“¾æ¥å¦‚ä¸‹ï¼š\nhttps:&#47;&#47;github.com&#47;sankyutang&#47;fontend-trace-geekbang-course","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1327155,"ctime":1721205927,"ip_address":"å¹¿ä¸œ","comment_id":391956,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100759401,"comment_content":"è¯¾ç¨‹æœ‰æºç é“¾æ¥å—","like_count":0,"discussions":[{"author":{"id":1327155,"avatar":"https://static001.geekbang.org/account/avatar/00/14/40/33/11e434ba.jpg","nickname":"ä¸‰æ©‹sankyu ğŸ©","note":"","ucode":"2129405EA8D3D7","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":648207,"discussion_content":"æœ‰çš„ï¼Œå·²å‘å¸ƒã€‚é“¾æ¥å¦‚ä¸‹ï¼š\nhttps://github.com/sankyutang/fontend-trace-geekbang-course","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1721205927,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":390813,"user_name":"Loogeek","can_delete":false,"product_type":"c1","uid":1168209,"ip_address":"å¹¿ä¸œ","ucode":"92C936F8293A4A","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Pqa4NmPZjgs2LQlTxL8c77icca8IIXVXR8BUU4ibcyvCOrlfHW9AplQSbmwhAkd2RtxugrZDeOheV4Fmaz7DJcVA/132","comment_is_top":false,"comment_ctime":1716368040,"is_pvip":false,"replies":[{"id":142682,"content":"å®Œæ•´ä»£ç å…¥å£ï¼šhttps:&#47;&#47;github.com&#47;sankyutang&#47;fontend-trace-geekbang-course ","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1327155,"ctime":1721351378,"ip_address":"å¹¿ä¸œ","comment_id":390813,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100759401,"comment_content":"è¯¾ç¨‹æœ‰æºç é“¾æ¥å—","like_count":0,"discussions":[{"author":{"id":1327155,"avatar":"https://static001.geekbang.org/account/avatar/00/14/40/33/11e434ba.jpg","nickname":"ä¸‰æ©‹sankyu ğŸ©","note":"","ucode":"2129405EA8D3D7","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":648294,"discussion_content":"å®Œæ•´ä»£ç å…¥å£ï¼šhttps://github.com/sankyutang/fontend-trace-geekbang-course ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1721351378,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":389931,"user_name":"Cloudy","can_delete":false,"product_type":"c1","uid":1073097,"ip_address":"å¹¿ä¸œ","ucode":"A3F9C52AF996AD","user_header":"https://static001.geekbang.org/account/avatar/00/10/5f/c9/07386777.jpg","comment_is_top":false,"comment_ctime":1713926667,"is_pvip":false,"replies":[{"id":142072,"content":"æ„Ÿè°¢æå‡ºé—®é¢˜ï¼ç¡®å®æ˜¯æœ‰è¯¯ã€‚ç»Ÿä¸€ä½¿ç”¨BaseTraceInfoï¼Œå‰ä¸€ç¯‡å·²æ›´æ­£","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1327155,"ctime":1715740659,"ip_address":"å¹¿ä¸œ","comment_id":389931,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100759401,"comment_content":"è¯·é—®æœ¬æ–‡ä¸­ä½¿ç”¨åˆ°çš„ç±»å‹ BaseTraceInfo æ˜¯åœ¨å“ªå„¿å®šä¹‰çš„ï¼Ÿçœ‹æœ€åçš„æ¡ˆä¾‹ï¼Œæ„Ÿè§‰æ˜¯å‰ä¸€ç¯‡æ–‡ç« ä¸­å®šä¹‰çš„ç±»å‹ BaseTraceData","like_count":0,"discussions":[{"author":{"id":1327155,"avatar":"https://static001.geekbang.org/account/avatar/00/14/40/33/11e434ba.jpg","nickname":"ä¸‰æ©‹sankyu ğŸ©","note":"","ucode":"2129405EA8D3D7","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":645058,"discussion_content":"æ„Ÿè°¢æå‡ºé—®é¢˜ï¼ç¡®å®æ˜¯æœ‰è¯¯ã€‚ç»Ÿä¸€ä½¿ç”¨BaseTraceInfoï¼Œå‰ä¸€ç¯‡å·²æ›´æ­£","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1715740659,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":389926,"user_name":"Sklei","can_delete":false,"product_type":"c1","uid":1232710,"ip_address":"å¹¿ä¸œ","ucode":"DC92F2EF4EFC3B","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eokcpAyNicN9WS20hxaOEhDoqIl0Hdo9SuMrzhYDRsr6hkGcrQyMOQYfKRBFFSwZpXwW7Fc2wnHOdA/132","comment_is_top":false,"comment_ctime":1713920254,"is_pvip":false,"replies":[{"id":142069,"content":"ç†è®ºä¸ŠPVæ˜¯è‡ªåŠ¨é‡‡é›†æ›´åˆé€‚ã€‚æ ¹æ®å®é™…æƒ…å†µåˆ¤æ–­å§ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1327155,"ctime":1715699701,"ip_address":"å¹¿ä¸œ","comment_id":389926,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100759401,"comment_content":"pvæ•°æ®æ˜¯è‡ªåŠ¨é‡‡é›†è¿˜æ˜¯éœ€è¦ç”¨æˆ·æ‰‹åŠ¨åŸ‹ç‚¹é‡‡é›†","like_count":0,"discussions":[{"author":{"id":1327155,"avatar":"https://static001.geekbang.org/account/avatar/00/14/40/33/11e434ba.jpg","nickname":"ä¸‰æ©‹sankyu ğŸ©","note":"","ucode":"2129405EA8D3D7","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":645020,"discussion_content":"ç†è®ºä¸ŠPVæ˜¯è‡ªåŠ¨é‡‡é›†æ›´åˆé€‚ã€‚æ ¹æ®å®é™…æƒ…å†µåˆ¤æ–­å§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1715699701,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]}]}