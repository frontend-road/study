{"id":294640,"title":"24 | æ›¿æ¢ç­–ç•¥ï¼šç¼“å­˜æ»¡äº†æ€ä¹ˆåŠï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯è’‹å¾·é’§ã€‚</p><p>Redisç¼“å­˜ä½¿ç”¨å†…å­˜æ¥ä¿å­˜æ•°æ®ï¼Œé¿å…ä¸šåŠ¡åº”ç”¨ä»åç«¯æ•°æ®åº“ä¸­è¯»å–æ•°æ®ï¼Œå¯ä»¥æå‡åº”ç”¨çš„å“åº”é€Ÿåº¦ã€‚é‚£ä¹ˆï¼Œå¦‚æœæˆ‘ä»¬æŠŠæ‰€æœ‰è¦è®¿é—®çš„æ•°æ®éƒ½æ”¾å…¥ç¼“å­˜ï¼Œæ˜¯ä¸æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„è®¾è®¡é€‰æ‹©å‘¢ï¼Ÿå…¶å®ï¼Œè¿™æ ·åšçš„æ€§ä»·æ¯”åè€Œä¸é«˜ã€‚</p><p>ä¸¾ä¸ªä¾‹å­å§ã€‚MySQLä¸­æœ‰1TBçš„æ•°æ®ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨RedisæŠŠè¿™1TBçš„æ•°æ®éƒ½ç¼“å­˜èµ·æ¥ï¼Œè™½ç„¶åº”ç”¨éƒ½èƒ½åœ¨å†…å­˜ä¸­è®¿é—®æ•°æ®äº†ï¼Œä½†æ˜¯ï¼Œè¿™æ ·é…ç½®å¹¶ä¸åˆç†ï¼Œå› ä¸ºæ€§ä»·æ¯”å¾ˆä½ã€‚ä¸€æ–¹é¢ï¼Œ1TBå†…å­˜çš„ä»·æ ¼å¤§çº¦æ˜¯3.5ä¸‡å…ƒï¼Œè€Œ1TBç£ç›˜çš„ä»·æ ¼å¤§çº¦æ˜¯1000å…ƒã€‚å¦ä¸€æ–¹é¢ï¼Œæ•°æ®è®¿é—®éƒ½æ˜¯æœ‰å±€éƒ¨æ€§çš„ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬é€šå¸¸æ‰€è¯´çš„â€œå…«äºŒåŸç†â€ï¼Œ80%çš„è¯·æ±‚å®é™…åªè®¿é—®äº†20%çš„æ•°æ®ã€‚æ‰€ä»¥ï¼Œç”¨1TBçš„å†…å­˜åšç¼“å­˜ï¼Œå¹¶æ²¡æœ‰å¿…è¦ã€‚</p><p>ä¸ºäº†ä¿è¯è¾ƒé«˜çš„æ€§ä»·æ¯”ï¼Œç¼“å­˜çš„ç©ºé—´å®¹é‡å¿…ç„¶è¦å°äºåç«¯æ•°æ®åº“çš„æ•°æ®æ€»é‡ã€‚ä¸è¿‡ï¼Œå†…å­˜å¤§å°æ¯•ç«Ÿæœ‰é™ï¼Œéšç€è¦ç¼“å­˜çš„æ•°æ®é‡è¶Šæ¥è¶Šå¤§ï¼Œæœ‰é™çš„ç¼“å­˜ç©ºé—´ä¸å¯é¿å…åœ°ä¼šè¢«å†™æ»¡ã€‚æ­¤æ—¶ï¼Œè¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ</p><p>è§£å†³è¿™ä¸ªé—®é¢˜å°±æ¶‰åŠåˆ°ç¼“å­˜ç³»ç»Ÿçš„ä¸€ä¸ªé‡è¦æœºåˆ¶ï¼Œå³<strong>ç¼“å­˜æ•°æ®çš„æ·˜æ±°æœºåˆ¶</strong>ã€‚ç®€å•æ¥è¯´ï¼Œæ•°æ®æ·˜æ±°æœºåˆ¶åŒ…æ‹¬ä¸¤æ­¥ï¼šç¬¬ä¸€ï¼Œæ ¹æ®ä¸€å®šçš„ç­–ç•¥ï¼Œç­›é€‰å‡ºå¯¹åº”ç”¨è®¿é—®æ¥è¯´â€œä¸é‡è¦â€çš„æ•°æ®ï¼›ç¬¬äºŒï¼Œå°†è¿™äº›æ•°æ®ä»ç¼“å­˜ä¸­åˆ é™¤ï¼Œä¸ºæ–°æ¥çš„æ•°æ®è…¾å‡ºç©ºé—´ï¼Œ</p><p>è¿™èŠ‚è¯¾ä¸Šï¼Œæˆ‘å°±æ¥å’Œä½ èŠèŠç¼“å­˜æ»¡äº†ä¹‹åçš„æ•°æ®æ·˜æ±°æœºåˆ¶ã€‚é€šå¸¸ï¼Œæˆ‘ä»¬ä¹ŸæŠŠå®ƒå«ä½œç¼“å­˜æ›¿æ¢æœºåˆ¶ï¼ŒåŒæ—¶è¿˜ä¼šè®²åˆ°ä¸€ç³»åˆ—é€‰æ‹©æ·˜æ±°æ•°æ®çš„å…·ä½“ç­–ç•¥ã€‚äº†è§£äº†æ•°æ®æ·˜æ±°æœºåˆ¶å’Œç›¸åº”ç­–ç•¥ï¼Œæˆ‘ä»¬æ‰å¯ä»¥é€‰æ‹©åˆç†çš„Redisé…ç½®ï¼Œæé«˜ç¼“å­˜å‘½ä¸­ç‡ï¼Œæå‡åº”ç”¨çš„è®¿é—®æ€§èƒ½ã€‚</p><!-- [[[read_end]]] --><p>ä¸è¿‡ï¼Œåœ¨å­¦ä¹ æ·˜æ±°ç­–ç•¥ä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆè¦çŸ¥é“è®¾ç½®ç¼“å­˜å®¹é‡çš„ä¾æ®å’Œæ–¹æ³•ã€‚æ¯•ç«Ÿï¼Œåœ¨å®é™…ä½¿ç”¨ç¼“å­˜æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å†³å®šç”¨å¤šå¤§çš„ç©ºé—´æ¥ç¼“å­˜æ•°æ®ã€‚</p><h2>è®¾ç½®å¤šå¤§çš„ç¼“å­˜å®¹é‡åˆé€‚ï¼Ÿ</h2><p>ç¼“å­˜å®¹é‡è®¾ç½®å¾—æ˜¯å¦åˆç†ï¼Œä¼šç›´æ¥å½±å“åˆ°ä½¿ç”¨ç¼“å­˜çš„æ€§ä»·æ¯”ã€‚æˆ‘ä»¬é€šå¸¸å¸Œæœ›ä»¥æœ€å°çš„ä»£ä»·å»è·å¾—æœ€å¤§çš„æ”¶ç›Šï¼Œæ‰€ä»¥ï¼ŒæŠŠæ˜‚è´µçš„å†…å­˜èµ„æºç”¨åœ¨å…³é”®åœ°æ–¹å°±éå¸¸é‡è¦äº†ã€‚</p><p>å°±åƒæˆ‘åˆšæ‰è¯´çš„ï¼Œå®é™…åº”ç”¨ä¸­çš„æ•°æ®è®¿é—®æ˜¯å…·æœ‰å±€éƒ¨æ€§çš„ã€‚ä¸‹é¢æœ‰ä¸€å¼ å›¾ï¼Œå›¾é‡Œæœ‰çº¢ã€è“ä¸¤æ¡çº¿ï¼Œæ˜¾ç¤ºäº†ä¸åŒæ¯”ä¾‹æ•°æ®è´¡çŒ®çš„è®¿é—®é‡æƒ…å†µã€‚è“çº¿ä»£è¡¨äº†â€œå…«äºŒåŸç†â€è¡¨ç¤ºçš„æ•°æ®å±€éƒ¨æ€§ï¼Œè€Œçº¢çº¿åˆ™è¡¨ç¤ºåœ¨å½“å‰åº”ç”¨è´Ÿè½½ä¸‹ï¼Œæ•°æ®å±€éƒ¨æ€§çš„å˜åŒ–ã€‚</p><p>æˆ‘ä»¬å…ˆçœ‹çœ‹è“çº¿ã€‚å®ƒè¡¨ç¤ºçš„å°±æ˜¯â€œå…«äºŒåŸç†â€ï¼Œæœ‰20%çš„æ•°æ®è´¡çŒ®äº†80%çš„è®¿é—®äº†ï¼Œè€Œå‰©ä½™çš„æ•°æ®è™½ç„¶ä½“é‡å¾ˆå¤§ï¼Œä½†åªè´¡çŒ®äº†20%çš„è®¿é—®é‡ã€‚è¿™80%çš„æ•°æ®åœ¨è®¿é—®é‡ä¸Šå°±å½¢æˆäº†ä¸€æ¡é•¿é•¿çš„å°¾å·´ï¼Œæˆ‘ä»¬ä¹Ÿç§°ä¸ºâ€œé•¿å°¾æ•ˆåº”â€ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/98/e4/986ed247a4353524f387f0bbf76586e4.jpg?wh=2639*2081\" alt=\"\"></p><p>æ‰€ä»¥ï¼Œå¦‚æœæŒ‰ç…§â€œå…«äºŒåŸç†â€æ¥è®¾ç½®ç¼“å­˜ç©ºé—´å®¹é‡ï¼Œä¹Ÿå°±æ˜¯æŠŠç¼“å­˜ç©ºé—´å®¹é‡è®¾ç½®ä¸ºæ€»æ•°æ®é‡çš„20%çš„è¯ï¼Œå°±æœ‰å¯èƒ½æ‹¦æˆªåˆ°80%çš„è®¿é—®ã€‚</p><p>ä¸ºä»€ä¹ˆè¯´æ˜¯â€œæœ‰å¯èƒ½â€å‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºï¼Œâ€œå…«äºŒåŸç†â€æ˜¯å¯¹å¤§é‡å®é™…åº”ç”¨çš„æ•°æ®è®¿é—®æƒ…å†µåšäº†ç»Ÿè®¡åï¼Œå¾—å‡ºçš„ä¸€ä¸ªç»Ÿè®¡å­¦æ„ä¹‰ä¸Šçš„æ•°æ®é‡å’Œè®¿é—®é‡çš„æ¯”ä¾‹ã€‚å…·ä½“åˆ°æŸä¸€ä¸ªåº”ç”¨æ¥è¯´ï¼Œæ•°æ®è®¿é—®çš„è§„å¾‹ä¼šå’Œå…·ä½“çš„ä¸šåŠ¡åœºæ™¯æœ‰å…³ã€‚å¯¹äºæœ€å¸¸è¢«è®¿é—®çš„20%çš„æ•°æ®æ¥è¯´ï¼Œå®ƒä»¬è´¡çŒ®çš„è®¿é—®é‡ï¼Œæ—¢æœ‰å¯èƒ½è¶…è¿‡80%ï¼Œä¹Ÿæœ‰å¯èƒ½ä¸åˆ°80%ã€‚</p><p>æˆ‘ä»¬å†é€šè¿‡ä¸€ä¸ªç”µå•†å•†å“çš„åœºæ™¯ï¼Œæ¥è¯´æ˜ä¸‹â€œæœ‰å¯èƒ½â€è¿™ä»¶äº‹å„¿ã€‚ä¸€æ–¹é¢ï¼Œåœ¨å•†å“ä¿ƒé”€æ—¶ï¼Œçƒ­é—¨å•†å“çš„ä¿¡æ¯å¯èƒ½åªå åˆ°æ€»å•†å“æ•°æ®ä¿¡æ¯é‡çš„5%ï¼Œè€Œè¿™äº›å•†å“ä¿¡æ¯æ‰¿è½½çš„å¯èƒ½æ˜¯è¶…è¿‡90%çš„è®¿é—®è¯·æ±‚ã€‚è¿™æ—¶ï¼Œæˆ‘ä»¬åªè¦ç¼“å­˜è¿™5%çš„æ•°æ®ï¼Œå°±èƒ½è·å¾—å¾ˆå¥½çš„æ€§èƒ½æ”¶ç›Šã€‚å¦ä¸€æ–¹é¢ï¼Œå¦‚æœä¸šåŠ¡åº”ç”¨è¦å¯¹æ‰€æœ‰å•†å“ä¿¡æ¯è¿›è¡ŒæŸ¥è¯¢ç»Ÿè®¡ï¼Œè¿™æ—¶å€™ï¼Œå³ä½¿æŒ‰ç…§â€œå…«äºŒåŸç†â€ç¼“å­˜äº†20%çš„å•†å“æ•°æ®ï¼Œä¹Ÿä¸èƒ½è·å¾—å¾ˆå¥½çš„è®¿é—®æ€§èƒ½ï¼Œå› ä¸º80%çš„æ•°æ®ä»ç„¶éœ€è¦ä»åç«¯æ•°æ®åº“ä¸­è·å–ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å†çœ‹çœ‹æ•°æ®è®¿é—®å±€éƒ¨æ€§ç¤ºæ„å›¾ä¸­çš„çº¢çº¿ã€‚è¿‘å¹´æ¥ï¼Œæœ‰äº›ç ”ç©¶äººå‘˜ä¸“é—¨å¯¹äº’è”ç½‘åº”ç”¨ï¼ˆä¾‹å¦‚è§†é¢‘æ’­æ”¾ç½‘ç«™ï¼‰ä¸­ï¼Œç”¨æˆ·è¯·æ±‚è®¿é—®å†…å®¹çš„åˆ†å¸ƒæƒ…å†µåšè¿‡åˆ†æï¼Œå¾—åˆ°äº†è¿™å¼ å›¾ä¸­çš„çº¢çº¿ã€‚</p><p>åœ¨è¿™æ¡çº¢çº¿ä¸Šï¼Œ80%çš„æ•°æ®è´¡çŒ®çš„è®¿é—®é‡ï¼Œè¶…è¿‡äº†ä¼ ç»Ÿçš„é•¿å°¾æ•ˆåº”ä¸­80%æ•°æ®èƒ½è´¡çŒ®çš„è®¿é—®é‡ã€‚åŸå› åœ¨äºï¼Œç”¨æˆ·çš„ä¸ªæ€§åŒ–éœ€æ±‚è¶Šæ¥è¶Šå¤šï¼Œåœ¨ä¸€ä¸ªä¸šåŠ¡åº”ç”¨ä¸­ï¼Œä¸åŒç”¨æˆ·è®¿é—®çš„å†…å®¹å¯èƒ½å·®åˆ«å¾ˆå¤§ï¼Œæ‰€ä»¥ï¼Œç”¨æˆ·è¯·æ±‚çš„æ•°æ®å’Œå®ƒä»¬è´¡çŒ®çš„è®¿é—®é‡æ¯”ä¾‹ï¼Œä¸å†å…·å¤‡é•¿å°¾æ•ˆåº”ä¸­çš„â€œå…«äºŒåŸç†â€åˆ†å¸ƒç‰¹å¾äº†ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ20%çš„æ•°æ®å¯èƒ½è´¡çŒ®ä¸äº†80%çš„è®¿é—®ï¼Œè€Œå‰©ä½™çš„80%æ•°æ®åè€Œè´¡çŒ®äº†æ›´å¤šçš„è®¿é—®é‡ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºé‡å°¾æ•ˆåº”ã€‚</p><p>æ­£æ˜¯å› ä¸º20%çš„æ•°æ®ä¸ä¸€å®šèƒ½è´¡çŒ®80%çš„è®¿é—®é‡ï¼Œæˆ‘ä»¬ä¸èƒ½ç®€å•åœ°æŒ‰ç…§â€œæ€»æ•°æ®é‡çš„20%â€æ¥è®¾ç½®ç¼“å­˜æœ€å¤§ç©ºé—´å®¹é‡ã€‚åœ¨å®è·µè¿‡ç¨‹ä¸­ï¼Œæˆ‘çœ‹åˆ°è¿‡çš„ç¼“å­˜å®¹é‡å æ€»æ•°æ®é‡çš„æ¯”ä¾‹ï¼Œä»5%åˆ°40%çš„éƒ½æœ‰ã€‚è¿™ä¸ªå®¹é‡è§„åˆ’ä¸èƒ½ä¸€æ¦‚è€Œè®ºï¼Œæ˜¯éœ€è¦ç»“åˆ<strong>åº”ç”¨æ•°æ®å®é™…è®¿é—®ç‰¹å¾</strong>å’Œ<strong>æˆæœ¬å¼€é”€</strong>æ¥ç»¼åˆè€ƒè™‘çš„ã€‚</p><p>è¿™å…¶å®ä¹Ÿæ˜¯æˆ‘ä¸€ç›´åœ¨å’Œä½ åˆ†äº«çš„ç»éªŒï¼Œç³»ç»Ÿçš„è®¾è®¡é€‰æ‹©æ˜¯ä¸€ä¸ªæƒè¡¡çš„è¿‡ç¨‹ï¼šå¤§å®¹é‡ç¼“å­˜æ˜¯èƒ½å¸¦æ¥æ€§èƒ½åŠ é€Ÿçš„æ”¶ç›Šï¼Œä½†æ˜¯æˆæœ¬ä¹Ÿä¼šæ›´é«˜ï¼Œè€Œå°å®¹é‡ç¼“å­˜ä¸ä¸€å®šå°±èµ·ä¸åˆ°åŠ é€Ÿè®¿é—®çš„æ•ˆæœã€‚ä¸€èˆ¬æ¥è¯´ï¼Œ<strong>æˆ‘ä¼šå»ºè®®æŠŠç¼“å­˜å®¹é‡è®¾ç½®ä¸ºæ€»æ•°æ®é‡çš„15%åˆ°30%ï¼Œå…¼é¡¾è®¿é—®æ€§èƒ½å’Œå†…å­˜ç©ºé—´å¼€é”€</strong>ã€‚</p><p>å¯¹äºRedisæ¥è¯´ï¼Œä¸€æ—¦ç¡®å®šäº†ç¼“å­˜æœ€å¤§å®¹é‡ï¼Œæ¯”å¦‚4GBï¼Œä½ å°±å¯ä»¥ä½¿ç”¨ä¸‹é¢è¿™ä¸ªå‘½ä»¤æ¥è®¾å®šç¼“å­˜çš„å¤§å°äº†ï¼š</p><pre><code>CONFIG SET maxmemory 4gb\n</code></pre><p>ä¸è¿‡ï¼Œ<strong>ç¼“å­˜è¢«å†™æ»¡æ˜¯ä¸å¯é¿å…çš„</strong>ã€‚å³ä½¿ä½ ç²¾æŒ‘ç»†é€‰ï¼Œç¡®å®šäº†ç¼“å­˜å®¹é‡ï¼Œè¿˜æ˜¯è¦é¢å¯¹ç¼“å­˜å†™æ»¡æ—¶çš„æ›¿æ¢æ“ä½œã€‚ç¼“å­˜æ›¿æ¢éœ€è¦è§£å†³ä¸¤ä¸ªé—®é¢˜ï¼šå†³å®šæ·˜æ±°å“ªäº›æ•°æ®ï¼Œå¦‚ä½•å¤„ç†é‚£äº›è¢«æ·˜æ±°çš„æ•°æ®ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±æ¥å­¦ä¹ ä¸‹ï¼ŒRedisä¸­çš„æ•°æ®æ·˜æ±°ç­–ç•¥ã€‚</p><h2>Redisç¼“å­˜æœ‰å“ªäº›æ·˜æ±°ç­–ç•¥ï¼Ÿ</h2><p>Redis 4.0ä¹‹å‰ä¸€å…±å®ç°äº†6ç§å†…å­˜æ·˜æ±°ç­–ç•¥ï¼Œåœ¨4.0ä¹‹åï¼Œåˆå¢åŠ äº†2ç§ç­–ç•¥ã€‚æˆ‘ä»¬å¯ä»¥æŒ‰ç…§æ˜¯å¦ä¼šè¿›è¡Œæ•°æ®æ·˜æ±°æŠŠå®ƒä»¬åˆ†æˆä¸¤ç±»ï¼š</p><ul>\n<li>ä¸è¿›è¡Œæ•°æ®æ·˜æ±°çš„ç­–ç•¥ï¼Œåªæœ‰noevictionè¿™ä¸€ç§ã€‚</li>\n<li>ä¼šè¿›è¡Œæ·˜æ±°çš„7ç§å…¶ä»–ç­–ç•¥ã€‚</li>\n</ul><p>ä¼šè¿›è¡Œæ·˜æ±°çš„7ç§ç­–ç•¥ï¼Œæˆ‘ä»¬å¯ä»¥å†è¿›ä¸€æ­¥æ ¹æ®æ·˜æ±°å€™é€‰æ•°æ®é›†çš„èŒƒå›´æŠŠå®ƒä»¬åˆ†æˆä¸¤ç±»ï¼š</p><ul>\n<li>åœ¨è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„æ•°æ®ä¸­è¿›è¡Œæ·˜æ±°ï¼ŒåŒ…æ‹¬volatile-randomã€volatile-ttlã€volatile-lruã€volatile-lfuï¼ˆRedis  4.0åæ–°å¢ï¼‰å››ç§ã€‚</li>\n<li>åœ¨æ‰€æœ‰æ•°æ®èŒƒå›´å†…è¿›è¡Œæ·˜æ±°ï¼ŒåŒ…æ‹¬allkeys-lruã€allkeys-randomã€allkeys-lfuï¼ˆRedis 4.0åæ–°å¢ï¼‰ä¸‰ç§ã€‚</li>\n</ul><p>æˆ‘æŠŠè¿™8ç§ç­–ç•¥çš„åˆ†ç±»ï¼Œç”»åˆ°äº†ä¸€å¼ å›¾é‡Œï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/04/f6/04bdd13b760016ec3b30f4b02e133df6.jpg?wh=1757*765\" alt=\"\"></p><p>ä¸‹é¢æˆ‘å°±æ¥å…·ä½“è§£é‡Šä¸‹å„ä¸ªç­–ç•¥ã€‚</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒRedisåœ¨ä½¿ç”¨çš„å†…å­˜ç©ºé—´è¶…è¿‡maxmemoryå€¼æ—¶ï¼Œå¹¶ä¸ä¼šæ·˜æ±°æ•°æ®ï¼Œä¹Ÿå°±æ˜¯è®¾å®šçš„<strong>noevictionç­–ç•¥</strong>ã€‚å¯¹åº”åˆ°Redisç¼“å­˜ï¼Œä¹Ÿå°±æ˜¯æŒ‡ï¼Œä¸€æ—¦ç¼“å­˜è¢«å†™æ»¡äº†ï¼Œå†æœ‰å†™è¯·æ±‚æ¥æ—¶ï¼ŒRedisä¸å†æä¾›æœåŠ¡ï¼Œè€Œæ˜¯ç›´æ¥è¿”å›é”™è¯¯ã€‚Redisç”¨ä½œç¼“å­˜æ—¶ï¼Œå®é™…çš„æ•°æ®é›†é€šå¸¸éƒ½æ˜¯å¤§äºç¼“å­˜å®¹é‡çš„ï¼Œæ€»ä¼šæœ‰æ–°çš„æ•°æ®è¦å†™å…¥ç¼“å­˜ï¼Œè¿™ä¸ªç­–ç•¥æœ¬èº«ä¸æ·˜æ±°æ•°æ®ï¼Œä¹Ÿå°±ä¸ä¼šè…¾å‡ºæ–°çš„ç¼“å­˜ç©ºé—´ï¼Œæˆ‘ä»¬ä¸æŠŠå®ƒç”¨åœ¨Redisç¼“å­˜ä¸­ã€‚</p><p>æˆ‘ä»¬å†åˆ†æä¸‹volatile-randomã€volatile-ttlã€volatile-lruå’Œvolatile-lfuè¿™å››ç§æ·˜æ±°ç­–ç•¥ã€‚å®ƒä»¬ç­›é€‰çš„å€™é€‰æ•°æ®èŒƒå›´ï¼Œè¢«é™åˆ¶åœ¨å·²ç»è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„é”®å€¼å¯¹ä¸Šã€‚ä¹Ÿæ­£å› ä¸ºæ­¤ï¼Œå³ä½¿ç¼“å­˜æ²¡æœ‰å†™æ»¡ï¼Œè¿™äº›æ•°æ®å¦‚æœè¿‡æœŸäº†ï¼Œä¹Ÿä¼šè¢«åˆ é™¤ã€‚</p><p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬ä½¿ç”¨EXPIREå‘½ä»¤å¯¹ä¸€æ‰¹é”®å€¼å¯¹è®¾ç½®äº†è¿‡æœŸæ—¶é—´åï¼Œæ— è®ºæ˜¯è¿™äº›é”®å€¼å¯¹çš„è¿‡æœŸæ—¶é—´æ˜¯å¿«åˆ°äº†ï¼Œè¿˜æ˜¯Redisçš„å†…å­˜ä½¿ç”¨é‡è¾¾åˆ°äº†maxmemoryé˜ˆå€¼ï¼ŒRediséƒ½ä¼šè¿›ä¸€æ­¥æŒ‰ç…§volatile-ttlã€volatile-randomã€volatile-lruã€volatile-lfuè¿™å››ç§ç­–ç•¥çš„å…·ä½“ç­›é€‰è§„åˆ™è¿›è¡Œæ·˜æ±°ã€‚</p><ul>\n<li>volatile-ttlåœ¨ç­›é€‰æ—¶ï¼Œä¼šé’ˆå¯¹è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„é”®å€¼å¯¹ï¼Œæ ¹æ®è¿‡æœŸæ—¶é—´çš„å…ˆåè¿›è¡Œåˆ é™¤ï¼Œè¶Šæ—©è¿‡æœŸçš„è¶Šå…ˆè¢«åˆ é™¤ã€‚</li>\n<li>volatile-randomå°±åƒå®ƒçš„åç§°ä¸€æ ·ï¼Œåœ¨è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„é”®å€¼å¯¹ä¸­ï¼Œè¿›è¡Œéšæœºåˆ é™¤ã€‚</li>\n<li>volatile-lruä¼šä½¿ç”¨LRUç®—æ³•ç­›é€‰è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„é”®å€¼å¯¹ã€‚</li>\n<li>volatile-lfuä¼šä½¿ç”¨LFUç®—æ³•é€‰æ‹©è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„é”®å€¼å¯¹ã€‚</li>\n</ul><p>å¯ä»¥çœ‹åˆ°ï¼Œvolatile-ttlå’Œvolatile-randomç­›é€‰è§„åˆ™æ¯”è¾ƒç®€å•ï¼Œè€Œvolatile-lruå› ä¸ºæ¶‰åŠäº†LRUç®—æ³•ï¼Œæ‰€ä»¥æˆ‘ä¼šåœ¨åˆ†æallkeys-lruç­–ç•¥æ—¶å†è¯¦ç»†è§£é‡Šã€‚volatile-lfuä½¿ç”¨äº†LFUç®—æ³•ï¼Œæˆ‘ä¼šåœ¨ç¬¬27è®²ä¸­å…·ä½“è§£é‡Šï¼Œç°åœ¨ä½ åªéœ€è¦çŸ¥é“ï¼Œå®ƒæ˜¯åœ¨LRUç®—æ³•çš„åŸºç¡€ä¸Šï¼ŒåŒæ—¶è€ƒè™‘äº†æ•°æ®çš„è®¿é—®æ—¶æ•ˆæ€§å’Œæ•°æ®çš„è®¿é—®æ¬¡æ•°ï¼Œå¯ä»¥çœ‹ä½œæ˜¯å¯¹æ·˜æ±°ç­–ç•¥çš„ä¼˜åŒ–ã€‚</p><p>ç›¸å¯¹äºvolatile-ttlã€volatile-randomã€volatile-lruã€volatile-lfuè¿™å››ç§ç­–ç•¥æ·˜æ±°çš„æ˜¯è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„æ•°æ®ï¼Œallkeys-lruã€allkeys-randomã€allkeys-lfuè¿™ä¸‰ç§æ·˜æ±°ç­–ç•¥çš„å¤‡é€‰æ·˜æ±°æ•°æ®èŒƒå›´ï¼Œå°±æ‰©å¤§åˆ°äº†æ‰€æœ‰é”®å€¼å¯¹ï¼Œæ— è®ºè¿™äº›é”®å€¼å¯¹æ˜¯å¦è®¾ç½®äº†è¿‡æœŸæ—¶é—´ã€‚å®ƒä»¬ç­›é€‰æ•°æ®è¿›è¡Œæ·˜æ±°çš„è§„åˆ™æ˜¯ï¼š</p><ul>\n<li>allkeys-randomç­–ç•¥ï¼Œä»æ‰€æœ‰é”®å€¼å¯¹ä¸­éšæœºé€‰æ‹©å¹¶åˆ é™¤æ•°æ®ï¼›</li>\n<li>allkeys-lruç­–ç•¥ï¼Œä½¿ç”¨LRUç®—æ³•åœ¨æ‰€æœ‰æ•°æ®ä¸­è¿›è¡Œç­›é€‰ã€‚</li>\n<li>allkeys-lfuç­–ç•¥ï¼Œä½¿ç”¨LFUç®—æ³•åœ¨æ‰€æœ‰æ•°æ®ä¸­è¿›è¡Œç­›é€‰ã€‚</li>\n</ul><p>è¿™ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä¸€ä¸ªé”®å€¼å¯¹è¢«åˆ é™¤ç­–ç•¥é€‰ä¸­äº†ï¼Œå³ä½¿å®ƒçš„è¿‡æœŸæ—¶é—´è¿˜æ²¡åˆ°ï¼Œä¹Ÿéœ€è¦è¢«åˆ é™¤ã€‚å½“ç„¶ï¼Œå¦‚æœå®ƒçš„è¿‡æœŸæ—¶é—´åˆ°äº†ä½†æœªè¢«ç­–ç•¥é€‰ä¸­ï¼ŒåŒæ ·ä¹Ÿä¼šè¢«åˆ é™¤ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±çœ‹çœ‹volatile-lruå’Œallkeys-lruç­–ç•¥éƒ½ç”¨åˆ°çš„LRUç®—æ³•å§ã€‚LRUç®—æ³•å·¥ä½œæœºåˆ¶å¹¶ä¸å¤æ‚ï¼Œæˆ‘ä»¬ä¸€èµ·å­¦ä¹ ä¸‹ã€‚</p><p>LRUç®—æ³•çš„å…¨ç§°æ˜¯Least Recently Usedï¼Œä»åå­—ä¸Šå°±å¯ä»¥çœ‹å‡ºï¼Œè¿™æ˜¯æŒ‰ç…§æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„åŸåˆ™æ¥ç­›é€‰æ•°æ®ï¼Œæœ€ä¸å¸¸ç”¨çš„æ•°æ®ä¼šè¢«ç­›é€‰å‡ºæ¥ï¼Œè€Œæœ€è¿‘é¢‘ç¹ä½¿ç”¨çš„æ•°æ®ä¼šç•™åœ¨ç¼“å­˜ä¸­ã€‚</p><p>é‚£å…·ä½“æ˜¯æ€ä¹ˆç­›é€‰çš„å‘¢ï¼ŸLRUä¼šæŠŠæ‰€æœ‰çš„æ•°æ®ç»„ç»‡æˆä¸€ä¸ªé“¾è¡¨ï¼Œé“¾è¡¨çš„å¤´å’Œå°¾åˆ†åˆ«è¡¨ç¤ºMRUç«¯å’ŒLRUç«¯ï¼Œåˆ†åˆ«ä»£è¡¨æœ€è¿‘æœ€å¸¸ä½¿ç”¨çš„æ•°æ®å’Œæœ€è¿‘æœ€ä¸å¸¸ç”¨çš„æ•°æ®ã€‚æˆ‘ä»¬çœ‹ä¸€ä¸ªä¾‹å­ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/02/y5/0201f85c84203300ae4085c60e955yy5.jpg?wh=1702*1678\" alt=\"\"></p><p>æˆ‘ä»¬ç°åœ¨æœ‰æ•°æ®6ã€3ã€9ã€20ã€5ã€‚å¦‚æœæ•°æ®20å’Œ3è¢«å…ˆåè®¿é—®ï¼Œå®ƒä»¬éƒ½ä¼šä»ç°æœ‰çš„é“¾è¡¨ä½ç½®ç§»åˆ°MRUç«¯ï¼Œè€Œé“¾è¡¨ä¸­åœ¨å®ƒä»¬ä¹‹å‰çš„æ•°æ®åˆ™ç›¸åº”åœ°å¾€åç§»ä¸€ä½ã€‚å› ä¸ºï¼ŒLRUç®—æ³•é€‰æ‹©åˆ é™¤æ•°æ®æ—¶ï¼Œéƒ½æ˜¯ä»LRUç«¯å¼€å§‹ï¼Œæ‰€ä»¥æŠŠåˆšåˆšè¢«è®¿é—®çš„æ•°æ®ç§»åˆ°MRUç«¯ï¼Œå°±å¯ä»¥è®©å®ƒä»¬å°½å¯èƒ½åœ°ç•™åœ¨ç¼“å­˜ä¸­ã€‚</p><p>å¦‚æœæœ‰ä¸€ä¸ªæ–°æ•°æ®15è¦è¢«å†™å…¥ç¼“å­˜ï¼Œä½†æ­¤æ—¶å·²ç»æ²¡æœ‰ç¼“å­˜ç©ºé—´äº†ï¼Œä¹Ÿå°±æ˜¯é“¾è¡¨æ²¡æœ‰ç©ºä½™ä½ç½®äº†ï¼Œé‚£ä¹ˆï¼ŒLRUç®—æ³•åšä¸¤ä»¶äº‹ï¼š</p><ol>\n<li>æ•°æ®15æ˜¯åˆšè¢«è®¿é—®çš„ï¼Œæ‰€ä»¥å®ƒä¼šè¢«æ”¾åˆ°MRUç«¯ï¼›</li>\n<li>ç®—æ³•æŠŠLRUç«¯çš„æ•°æ®5ä»ç¼“å­˜ä¸­åˆ é™¤ï¼Œç›¸åº”çš„é“¾è¡¨ä¸­å°±æ²¡æœ‰æ•°æ®5çš„è®°å½•äº†ã€‚</li>\n</ol><p>å…¶å®ï¼ŒLRUç®—æ³•èƒŒåçš„æƒ³æ³•éå¸¸æœ´ç´ ï¼šå®ƒè®¤ä¸ºåˆšåˆšè¢«è®¿é—®çš„æ•°æ®ï¼Œè‚¯å®šè¿˜ä¼šè¢«å†æ¬¡è®¿é—®ï¼Œæ‰€ä»¥å°±æŠŠå®ƒæ”¾åœ¨MRUç«¯ï¼›é•¿ä¹…ä¸è®¿é—®çš„æ•°æ®ï¼Œè‚¯å®šå°±ä¸ä¼šå†è¢«è®¿é—®äº†ï¼Œæ‰€ä»¥å°±è®©å®ƒé€æ¸åç§»åˆ°LRUç«¯ï¼Œåœ¨ç¼“å­˜æ»¡æ—¶ï¼Œå°±ä¼˜å…ˆåˆ é™¤å®ƒã€‚</p><p>ä¸è¿‡ï¼ŒLRUç®—æ³•åœ¨å®é™…å®ç°æ—¶ï¼Œéœ€è¦ç”¨é“¾è¡¨ç®¡ç†æ‰€æœ‰çš„ç¼“å­˜æ•°æ®ï¼Œè¿™ä¼š<strong>å¸¦æ¥é¢å¤–çš„ç©ºé—´å¼€é”€</strong>ã€‚è€Œä¸”ï¼Œå½“æœ‰æ•°æ®è¢«è®¿é—®æ—¶ï¼Œéœ€è¦åœ¨é“¾è¡¨ä¸ŠæŠŠè¯¥æ•°æ®ç§»åŠ¨åˆ°MRUç«¯ï¼Œå¦‚æœæœ‰å¤§é‡æ•°æ®è¢«è®¿é—®ï¼Œå°±ä¼šå¸¦æ¥å¾ˆå¤šé“¾è¡¨ç§»åŠ¨æ“ä½œï¼Œä¼šå¾ˆè€—æ—¶ï¼Œè¿›è€Œä¼šé™ä½Redisç¼“å­˜æ€§èƒ½ã€‚</p><p>æ‰€ä»¥ï¼Œåœ¨Redisä¸­ï¼ŒLRUç®—æ³•è¢«åšäº†ç®€åŒ–ï¼Œä»¥å‡è½»æ•°æ®æ·˜æ±°å¯¹ç¼“å­˜æ€§èƒ½çš„å½±å“ã€‚å…·ä½“æ¥è¯´ï¼ŒRedisé»˜è®¤ä¼šè®°å½•æ¯ä¸ªæ•°æ®çš„æœ€è¿‘ä¸€æ¬¡è®¿é—®çš„æ—¶é—´æˆ³ï¼ˆç”±é”®å€¼å¯¹æ•°æ®ç»“æ„RedisObjectä¸­çš„lruå­—æ®µè®°å½•ï¼‰ã€‚ç„¶åï¼ŒRedisåœ¨å†³å®šæ·˜æ±°çš„æ•°æ®æ—¶ï¼Œç¬¬ä¸€æ¬¡ä¼šéšæœºé€‰å‡ºNä¸ªæ•°æ®ï¼ŒæŠŠå®ƒä»¬ä½œä¸ºä¸€ä¸ªå€™é€‰é›†åˆã€‚æ¥ä¸‹æ¥ï¼ŒRedisä¼šæ¯”è¾ƒè¿™Nä¸ªæ•°æ®çš„lruå­—æ®µï¼ŒæŠŠlruå­—æ®µå€¼æœ€å°çš„æ•°æ®ä»ç¼“å­˜ä¸­æ·˜æ±°å‡ºå»ã€‚</p><p>Redisæä¾›äº†ä¸€ä¸ªé…ç½®å‚æ•°maxmemory-samplesï¼Œè¿™ä¸ªå‚æ•°å°±æ˜¯Redisé€‰å‡ºçš„æ•°æ®ä¸ªæ•°Nã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œå¯ä»¥è®©Redisé€‰å‡º100ä¸ªæ•°æ®ä½œä¸ºå€™é€‰æ•°æ®é›†ï¼š</p><pre><code>CONFIG SET maxmemory-samples 100\n</code></pre><p>å½“éœ€è¦å†æ¬¡æ·˜æ±°æ•°æ®æ—¶ï¼ŒRediséœ€è¦æŒ‘é€‰æ•°æ®è¿›å…¥ç¬¬ä¸€æ¬¡æ·˜æ±°æ—¶åˆ›å»ºçš„å€™é€‰é›†åˆã€‚è¿™å„¿çš„æŒ‘é€‰æ ‡å‡†æ˜¯ï¼š<strong>èƒ½è¿›å…¥å€™é€‰é›†åˆçš„æ•°æ®çš„lruå­—æ®µå€¼å¿…é¡»å°äºå€™é€‰é›†åˆä¸­æœ€å°çš„lruå€¼</strong>ã€‚å½“æœ‰æ–°æ•°æ®è¿›å…¥å€™é€‰æ•°æ®é›†åï¼Œå¦‚æœå€™é€‰æ•°æ®é›†ä¸­çš„æ•°æ®ä¸ªæ•°è¾¾åˆ°äº†maxmemory-samplesï¼ŒRediså°±æŠŠå€™é€‰æ•°æ®é›†ä¸­lruå­—æ®µå€¼æœ€å°çš„æ•°æ®æ·˜æ±°å‡ºå»ã€‚</p><p>è¿™æ ·ä¸€æ¥ï¼ŒRedisç¼“å­˜ä¸ç”¨ä¸ºæ‰€æœ‰çš„æ•°æ®ç»´æŠ¤ä¸€ä¸ªå¤§é“¾è¡¨ï¼Œä¹Ÿä¸ç”¨åœ¨æ¯æ¬¡æ•°æ®è®¿é—®æ—¶éƒ½ç§»åŠ¨é“¾è¡¨é¡¹ï¼Œæå‡äº†ç¼“å­˜çš„æ€§èƒ½ã€‚</p><p>å¥½äº†ï¼Œåˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å°±å­¦å®Œäº†é™¤äº†ä½¿ç”¨LFUç®—æ³•ä»¥å¤–çš„5ç§ç¼“å­˜æ·˜æ±°ç­–ç•¥ï¼Œæˆ‘å†ç»™ä½ ä¸‰ä¸ªä½¿ç”¨å»ºè®®ã€‚</p><ul>\n<li><strong>ä¼˜å…ˆä½¿ç”¨allkeys-lruç­–ç•¥</strong>ã€‚è¿™æ ·ï¼Œå¯ä»¥å……åˆ†åˆ©ç”¨LRUè¿™ä¸€ç»å…¸ç¼“å­˜ç®—æ³•çš„ä¼˜åŠ¿ï¼ŒæŠŠæœ€è¿‘æœ€å¸¸è®¿é—®çš„æ•°æ®ç•™åœ¨ç¼“å­˜ä¸­ï¼Œæå‡åº”ç”¨çš„è®¿é—®æ€§èƒ½ã€‚å¦‚æœä½ çš„ä¸šåŠ¡æ•°æ®ä¸­æœ‰æ˜æ˜¾çš„å†·çƒ­æ•°æ®åŒºåˆ†ï¼Œæˆ‘å»ºè®®ä½ ä½¿ç”¨allkeys-lruç­–ç•¥ã€‚</li>\n<li>å¦‚æœä¸šåŠ¡åº”ç”¨ä¸­çš„æ•°æ®è®¿é—®é¢‘ç‡ç›¸å·®ä¸å¤§ï¼Œæ²¡æœ‰æ˜æ˜¾çš„å†·çƒ­æ•°æ®åŒºåˆ†ï¼Œå»ºè®®ä½¿ç”¨allkeys-randomç­–ç•¥ï¼Œéšæœºé€‰æ‹©æ·˜æ±°çš„æ•°æ®å°±è¡Œã€‚</li>\n<li><strong>å¦‚æœä½ çš„ä¸šåŠ¡ä¸­æœ‰ç½®é¡¶çš„éœ€æ±‚</strong>ï¼Œæ¯”å¦‚ç½®é¡¶æ–°é—»ã€ç½®é¡¶è§†é¢‘ï¼Œé‚£ä¹ˆï¼Œå¯ä»¥ä½¿ç”¨volatile-lruç­–ç•¥ï¼ŒåŒæ—¶ä¸ç»™è¿™äº›ç½®é¡¶æ•°æ®è®¾ç½®è¿‡æœŸæ—¶é—´ã€‚è¿™æ ·ä¸€æ¥ï¼Œè¿™äº›éœ€è¦ç½®é¡¶çš„æ•°æ®ä¸€ç›´ä¸ä¼šè¢«åˆ é™¤ï¼Œè€Œå…¶ä»–æ•°æ®ä¼šåœ¨è¿‡æœŸæ—¶æ ¹æ®LRUè§„åˆ™è¿›è¡Œç­›é€‰ã€‚</li>\n</ul><p>ä¸€æ—¦è¢«æ·˜æ±°çš„æ•°æ®è¢«é€‰å®šåï¼ŒRedisæ€ä¹ˆå¤„ç†è¿™äº›æ•°æ®å‘¢ï¼Ÿè¿™å°±è¦è¯´åˆ°ç¼“å­˜æ›¿æ¢æ—¶çš„å…·ä½“æ“ä½œäº†ã€‚</p><h2>å¦‚ä½•å¤„ç†è¢«æ·˜æ±°çš„æ•°æ®ï¼Ÿ</h2><p>ä¸€èˆ¬æ¥è¯´ï¼Œä¸€æ—¦è¢«æ·˜æ±°çš„æ•°æ®é€‰å®šåï¼Œå¦‚æœè¿™ä¸ªæ•°æ®æ˜¯å¹²å‡€æ•°æ®ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ç›´æ¥åˆ é™¤ï¼›å¦‚æœè¿™ä¸ªæ•°æ®æ˜¯è„æ•°æ®ï¼Œæˆ‘ä»¬éœ€è¦æŠŠå®ƒå†™å›æ•°æ®åº“ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/95/5e/953e48912yy9515abf9db588d447cc5e.jpg?wh=2024*1154\" alt=\"\"></p><p>é‚£æ€ä¹ˆåˆ¤æ–­ä¸€ä¸ªæ•°æ®åˆ°åº•æ˜¯å¹²å‡€çš„è¿˜æ˜¯è„çš„å‘¢ï¼Ÿ</p><p>å¹²å‡€æ•°æ®å’Œè„æ•°æ®çš„åŒºåˆ«å°±åœ¨äºï¼Œå’Œæœ€åˆä»åç«¯æ•°æ®åº“é‡Œè¯»å–æ—¶çš„å€¼ç›¸æ¯”ï¼Œæœ‰æ²¡æœ‰è¢«ä¿®æ”¹è¿‡ã€‚å¹²å‡€æ•°æ®ä¸€ç›´æ²¡æœ‰è¢«ä¿®æ”¹ï¼Œæ‰€ä»¥åç«¯æ•°æ®åº“é‡Œçš„æ•°æ®ä¹Ÿæ˜¯æœ€æ–°å€¼ã€‚åœ¨æ›¿æ¢æ—¶ï¼Œå®ƒå¯ä»¥è¢«ç›´æ¥åˆ é™¤ã€‚</p><p>è€Œè„æ•°æ®å°±æ˜¯æ›¾ç»è¢«ä¿®æ”¹è¿‡çš„ï¼Œå·²ç»å’Œåç«¯æ•°æ®åº“ä¸­ä¿å­˜çš„æ•°æ®ä¸ä¸€è‡´äº†ã€‚æ­¤æ—¶ï¼Œå¦‚æœä¸æŠŠè„æ•°æ®å†™å›åˆ°æ•°æ®åº“ä¸­ï¼Œè¿™ä¸ªæ•°æ®çš„æœ€æ–°å€¼å°±ä¸¢å¤±äº†ï¼Œå°±ä¼šå½±å“åº”ç”¨çš„æ­£å¸¸ä½¿ç”¨ã€‚</p><p>è¿™ä¹ˆä¸€æ¥ï¼Œç¼“å­˜æ›¿æ¢æ—¢è…¾å‡ºäº†ç¼“å­˜ç©ºé—´ï¼Œç”¨æ¥ç¼“å­˜æ–°çš„æ•°æ®ï¼ŒåŒæ—¶ï¼Œå°†è„æ•°æ®å†™å›æ•°æ®åº“ï¼Œä¹Ÿä¿è¯äº†æœ€æ–°æ•°æ®ä¸ä¼šä¸¢å¤±ã€‚</p><p>ä¸è¿‡ï¼Œå¯¹äºRedisæ¥è¯´ï¼Œå®ƒå†³å®šäº†è¢«æ·˜æ±°çš„æ•°æ®åï¼Œä¼šæŠŠå®ƒä»¬åˆ é™¤ã€‚å³ä½¿æ·˜æ±°çš„æ•°æ®æ˜¯è„æ•°æ®ï¼ŒRedisä¹Ÿä¸ä¼šæŠŠå®ƒä»¬å†™å›æ•°æ®åº“ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨Redisç¼“å­˜æ—¶ï¼Œå¦‚æœæ•°æ®è¢«ä¿®æ”¹äº†ï¼Œéœ€è¦åœ¨æ•°æ®ä¿®æ”¹æ—¶å°±å°†å®ƒå†™å›æ•°æ®åº“ã€‚å¦åˆ™ï¼Œè¿™ä¸ªè„æ•°æ®è¢«æ·˜æ±°æ—¶ï¼Œä¼šè¢«Redisåˆ é™¤ï¼Œè€Œæ•°æ®åº“é‡Œä¹Ÿæ²¡æœ‰æœ€æ–°çš„æ•°æ®äº†ã€‚</p><h2>å°ç»“</h2><p>åœ¨è¿™èŠ‚è¯¾ä¸Šï¼Œæˆ‘å›´ç»•ç€â€œç¼“å­˜æ»¡äº†è¯¥æ€ä¹ˆåŠâ€è¿™ä¸€é—®é¢˜ï¼Œå‘ä½ ä»‹ç»äº†ç¼“å­˜æ›¿æ¢æ—¶çš„æ•°æ®æ·˜æ±°ç­–ç•¥ï¼Œä»¥åŠè¢«æ·˜æ±°æ•°æ®çš„å¤„ç†æ–¹æ³•ã€‚</p><p>Redis 4.0ç‰ˆæœ¬ä»¥åä¸€å…±æä¾›äº†8ç§æ•°æ®æ·˜æ±°ç­–ç•¥ï¼Œä»æ·˜æ±°æ•°æ®çš„å€™é€‰é›†èŒƒå›´æ¥çœ‹ï¼Œæˆ‘ä»¬æœ‰ä¸¤ç§å€™é€‰èŒƒå›´ï¼šä¸€ç§æ˜¯æ‰€æœ‰æ•°æ®éƒ½æ˜¯å€™é€‰é›†ï¼Œä¸€ç§æ˜¯è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„æ•°æ®æ˜¯å€™é€‰é›†ã€‚å¦å¤–ï¼Œæ— è®ºæ˜¯é¢å‘å“ªç§å€™é€‰æ•°æ®é›†è¿›è¡Œæ·˜æ±°æ•°æ®é€‰æ‹©ï¼Œæˆ‘ä»¬éƒ½æœ‰ä¸‰ç§ç­–ç•¥ï¼Œåˆ†åˆ«æ˜¯éšæœºé€‰æ‹©ï¼Œæ ¹æ®LRUç®—æ³•é€‰æ‹©ï¼Œä»¥åŠæ ¹æ®LFUç®—æ³•é€‰æ‹©ã€‚å½“ç„¶ï¼Œå½“é¢å‘è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„æ•°æ®é›†é€‰æ‹©æ·˜æ±°æ•°æ®æ—¶ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æ ¹æ®æ•°æ®ç¦»è¿‡æœŸæ—¶é—´çš„è¿œè¿‘æ¥å†³å®šã€‚</p><p>ä¸€èˆ¬æ¥è¯´ï¼Œç¼“å­˜ç³»ç»Ÿå¯¹äºé€‰å®šçš„è¢«æ·˜æ±°æ•°æ®ï¼Œä¼šæ ¹æ®å…¶æ˜¯å¹²å‡€æ•°æ®è¿˜æ˜¯è„æ•°æ®ï¼Œé€‰æ‹©ç›´æ¥åˆ é™¤è¿˜æ˜¯å†™å›æ•°æ®åº“ã€‚ä½†æ˜¯ï¼Œåœ¨Redisä¸­ï¼Œè¢«æ·˜æ±°æ•°æ®æ— è®ºå¹²å‡€ä¸å¦éƒ½ä¼šè¢«åˆ é™¤ï¼Œæ‰€ä»¥ï¼Œè¿™æ˜¯æˆ‘ä»¬åœ¨ä½¿ç”¨Redisç¼“å­˜æ—¶è¦ç‰¹åˆ«æ³¨æ„çš„ï¼šå½“æ•°æ®ä¿®æ”¹æˆä¸ºè„æ•°æ®æ—¶ï¼Œéœ€è¦åœ¨æ•°æ®åº“ä¸­ä¹ŸæŠŠæ•°æ®ä¿®æ”¹è¿‡æ¥ã€‚</p><p>é€‰æ‹©å“ªç§ç¼“å­˜ç­–ç•¥æ˜¯å€¼å¾—æˆ‘ä»¬å¤šåŠ ç¢ç£¨çš„ï¼Œå®ƒåœ¨ç­›é€‰æ•°æ®æ–¹é¢æ˜¯å¦èƒ½ç­›é€‰å‡ºå¯èƒ½è¢«å†æ¬¡è®¿é—®çš„æ•°æ®ï¼Œç›´æ¥å†³å®šäº†ç¼“å­˜æ•ˆç‡çš„é«˜ä¸ä½ã€‚</p><p>å¾ˆç®€å•çš„ä¸€ä¸ªå¯¹æ¯”ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨éšæœºç­–ç•¥ï¼Œåˆšç­›é€‰å‡ºæ¥çš„è¦è¢«åˆ é™¤çš„æ•°æ®å¯èƒ½æ­£å¥½åˆè¢«è®¿é—®äº†ï¼Œæ­¤æ—¶åº”ç”¨å°±åªèƒ½èŠ±è´¹å‡ æ¯«ç§’ä»æ•°æ®åº“ä¸­è¯»å–æ•°æ®äº†ã€‚è€Œå¦‚æœä½¿ç”¨LRUç­–ç•¥ï¼Œè¢«ç­›é€‰å‡ºæ¥çš„æ•°æ®å¾€å¾€æ˜¯ç»è¿‡æ—¶é—´éªŒè¯äº†ï¼Œå¦‚æœåœ¨ä¸€æ®µæ—¶é—´å†…ä¸€ç›´æ²¡æœ‰è®¿é—®ï¼Œæœ¬èº«è¢«å†æ¬¡è®¿é—®çš„æ¦‚ç‡ä¹Ÿå¾ˆä½äº†ã€‚</p><p>æ‰€ä»¥ï¼Œæˆ‘ç»™ä½ çš„å»ºè®®æ˜¯ï¼Œå…ˆæ ¹æ®æ˜¯å¦æœ‰å§‹ç»ˆä¼šè¢«é¢‘ç¹è®¿é—®çš„æ•°æ®ï¼ˆä¾‹å¦‚ç½®é¡¶æ¶ˆæ¯ï¼‰ï¼Œæ¥é€‰æ‹©æ·˜æ±°æ•°æ®çš„å€™é€‰é›†ï¼Œä¹Ÿå°±æ˜¯å†³å®šæ˜¯é’ˆå¯¹æ‰€æœ‰æ•°æ®è¿›è¡Œæ·˜æ±°ï¼Œè¿˜æ˜¯é’ˆå¯¹è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„æ•°æ®è¿›è¡Œæ·˜æ±°ã€‚å€™é€‰æ•°æ®é›†èŒƒå›´é€‰å®šåï¼Œå»ºè®®ä¼˜å…ˆä½¿ç”¨LRUç®—æ³•ï¼Œä¹Ÿå°±æ˜¯ï¼Œallkeys-lruæˆ–volatile-lruç­–ç•¥ã€‚</p><p>å½“ç„¶ï¼Œè®¾ç½®ç¼“å­˜å®¹é‡çš„å¤§å°ä¹Ÿå¾ˆé‡è¦ï¼Œæˆ‘çš„å»ºè®®æ˜¯ï¼šç»“åˆå®é™…åº”ç”¨çš„æ•°æ®æ€»é‡ã€çƒ­æ•°æ®çš„ä½“é‡ï¼Œä»¥åŠæˆæœ¬é¢„ç®—ï¼ŒæŠŠç¼“å­˜ç©ºé—´å¤§å°è®¾ç½®åœ¨æ€»æ•°æ®é‡çš„15%åˆ°30%è¿™ä¸ªåŒºé—´å°±å¯ä»¥ã€‚</p><h2>æ¯è¯¾ä¸€é—®</h2><p>æŒ‰ç…§æƒ¯ä¾‹ï¼Œæˆ‘ç»™ä½ æä¸€ä¸ªå°é—®é¢˜ã€‚è¿™èŠ‚è¯¾ï¼Œæˆ‘å‘ä½ ä»‹ç»äº†Redisç¼“å­˜åœ¨åº”å¯¹è„æ•°æ®æ—¶ï¼Œéœ€è¦åœ¨æ•°æ®ä¿®æ”¹çš„åŒæ—¶ï¼Œä¹ŸæŠŠå®ƒå†™å›æ•°æ®åº“ï¼Œé’ˆå¯¹æˆ‘ä»¬ä¸ŠèŠ‚è¯¾ä»‹ç»çš„ç¼“å­˜è¯»å†™æ¨¡å¼ï¼šåªè¯»ç¼“å­˜ï¼Œä»¥åŠè¯»å†™ç¼“å­˜ä¸­çš„ä¸¤ç§å†™å›ç­–ç•¥ï¼Œè¯·ä½ æ€è€ƒä¸‹ï¼ŒRedisç¼“å­˜å¯¹åº”å“ªä¸€ç§æˆ–å“ªå‡ ç§æ¨¡å¼ï¼Ÿ</p><p>æ¬¢è¿åœ¨ç•™è¨€åŒºå†™ä¸‹ä½ çš„æ€è€ƒå’Œç­”æ¡ˆï¼Œæˆ‘ä»¬ä¸€èµ·äº¤æµè®¨è®ºã€‚å¦‚æœä½ è§‰å¾—ä»Šå¤©çš„å†…å®¹å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼Œä¹Ÿæ¬¢è¿ä½ åˆ†äº«ç»™ä½ çš„æœ‹å‹æˆ–/åŒäº‹ã€‚æˆ‘ä»¬ä¸‹èŠ‚è¯¾è§ã€‚</p>","comments":[{"had_liked":false,"id":252682,"user_name":"Kaito","can_delete":false,"product_type":"c1","uid":1020042,"ip_address":"","ucode":"79775FA35A95F2","user_header":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","comment_is_top":false,"comment_ctime":1602432211,"is_pvip":true,"discussion_count":34,"race_medal":0,"score":"1066754321619","product_id":100056701,"comment_content":"Redisåœ¨ç”¨ä½œç¼“å­˜æ—¶ï¼Œä½¿ç”¨åªè¯»ç¼“å­˜æˆ–è¯»å†™ç¼“å­˜çš„å“ªç§æ¨¡å¼ï¼Ÿ<br><br>1ã€åªè¯»ç¼“å­˜æ¨¡å¼ï¼šæ¯æ¬¡ä¿®æ”¹ç›´æ¥å†™å…¥åç«¯æ•°æ®åº“ï¼Œå¦‚æœRedisç¼“å­˜ä¸å‘½ä¸­ï¼Œåˆ™ä»€ä¹ˆéƒ½ä¸ç”¨æ“ä½œï¼Œå¦‚æœRedisç¼“å­˜å‘½ä¸­ï¼Œåˆ™åˆ é™¤ç¼“å­˜ä¸­çš„æ•°æ®ï¼Œå¾…ä¸‹æ¬¡è¯»å–æ—¶ä»åç«¯æ•°æ®åº“ä¸­åŠ è½½æœ€æ–°å€¼åˆ°ç¼“å­˜ä¸­ã€‚<br><br>2ã€è¯»å†™ç¼“å­˜æ¨¡å¼+åŒæ­¥ç›´å†™ç­–ç•¥ï¼šç”±äºRedisåœ¨æ·˜æ±°æ•°æ®æ—¶ï¼Œç›´æ¥åœ¨å†…éƒ¨åˆ é™¤é”®å€¼å¯¹ï¼Œå¤–éƒ¨æ— æ³•ä»‹å…¥å¤„ç†è„æ•°æ®å†™å›æ•°æ®åº“ï¼Œæ‰€ä»¥ä½¿ç”¨Redisä½œè¯»å†™ç¼“å­˜æ—¶ï¼Œåªèƒ½é‡‡ç”¨åŒæ­¥ç›´å†™ç­–ç•¥ï¼Œä¿®æ”¹ç¼“å­˜çš„åŒæ—¶ä¹Ÿè¦å†™å…¥åˆ°åç«¯æ•°æ®åº“ä¸­ï¼Œä»è€Œä¿è¯ä¿®æ”¹æ“ä½œä¸è¢«ä¸¢å¤±ã€‚ä½†è¿™ç§æ–¹æ¡ˆåœ¨å¹¶å‘åœºæ™¯ä¸‹ä¼šå¯¼è‡´æ•°æ®åº“å’Œç¼“å­˜çš„ä¸ä¸€è‡´ï¼Œéœ€è¦åœ¨ç‰¹å®šä¸šåŠ¡åœºæ™¯ä¸‹æˆ–è€…é…åˆåˆ†å¸ƒå¼é”ä½¿ç”¨ã€‚<br><br>å½“ä¸€ä¸ªç³»ç»Ÿå¼•å…¥ç¼“å­˜æ—¶ï¼Œéœ€è¦é¢ä¸´æœ€å¤§çš„é—®é¢˜å°±æ˜¯ï¼Œå¦‚ä½•ä¿è¯ç¼“å­˜å’Œåç«¯æ•°æ®åº“çš„ä¸€è‡´æ€§é—®é¢˜ï¼Œæœ€å¸¸è§çš„3ä¸ªè§£å†³æ–¹æ¡ˆåˆ†åˆ«æ˜¯Cache Asideã€Read&#47;Write Throughtå’ŒWrite Backç¼“å­˜æ›´æ–°ç­–ç•¥ã€‚<br><br>1ã€Cache Asideç­–ç•¥ï¼šå°±æ˜¯æ–‡ç« æ‰€è®²çš„åªè¯»ç¼“å­˜æ¨¡å¼ã€‚è¯»æ“ä½œå‘½ä¸­ç¼“å­˜ç›´æ¥è¿”å›ï¼Œå¦åˆ™ä»åç«¯æ•°æ®åº“åŠ è½½åˆ°ç¼“å­˜å†è¿”å›ã€‚å†™æ“ä½œç›´æ¥æ›´æ–°æ•°æ®åº“ï¼Œç„¶ååˆ é™¤ç¼“å­˜ã€‚è¿™ç§ç­–ç•¥çš„ä¼˜ç‚¹æ˜¯ä¸€åˆ‡ä»¥åç«¯æ•°æ®åº“ä¸ºå‡†ï¼Œå¯ä»¥ä¿è¯ç¼“å­˜å’Œæ•°æ®åº“çš„ä¸€è‡´æ€§ã€‚ç¼ºç‚¹æ˜¯å†™æ“ä½œä¼šè®©ç¼“å­˜å¤±æ•ˆï¼Œå†æ¬¡è¯»å–æ—¶éœ€è¦ä»æ•°æ®åº“ä¸­åŠ è½½ã€‚è¿™ç§ç­–ç•¥æ˜¯æˆ‘ä»¬åœ¨å¼€å‘è½¯ä»¶æ—¶æœ€å¸¸ç”¨çš„ï¼Œåœ¨ä½¿ç”¨Memcachedæˆ–Redisæ—¶ä¸€èˆ¬éƒ½é‡‡ç”¨è¿™ç§æ–¹æ¡ˆã€‚<br><br>2ã€Read&#47;Write Throughtç­–ç•¥ï¼šåº”ç”¨å±‚è¯»å†™åªéœ€è¦æ“ä½œç¼“å­˜ï¼Œä¸éœ€è¦å…³å¿ƒåç«¯æ•°æ®åº“ã€‚åº”ç”¨å±‚åœ¨æ“ä½œç¼“å­˜æ—¶ï¼Œç¼“å­˜å±‚ä¼šè‡ªåŠ¨ä»æ•°æ®åº“ä¸­åŠ è½½æˆ–å†™å›åˆ°æ•°æ®åº“ä¸­ï¼Œè¿™ç§ç­–ç•¥çš„ä¼˜ç‚¹æ˜¯ï¼Œå¯¹äºåº”ç”¨å±‚çš„ä½¿ç”¨éå¸¸å‹å¥½ï¼Œåªéœ€è¦æ“ä½œç¼“å­˜å³å¯ï¼Œç¼ºç‚¹æ˜¯éœ€è¦ç¼“å­˜å±‚æ”¯æŒå’Œåç«¯æ•°æ®åº“çš„è”åŠ¨ã€‚<br><br>3ã€Write Backç­–ç•¥ï¼šç±»ä¼¼äºæ–‡ç« æ‰€è®²çš„è¯»å†™ç¼“å­˜æ¨¡å¼+å¼‚æ­¥å†™å›ç­–ç•¥ã€‚å†™æ“ä½œåªå†™ç¼“å­˜ï¼Œæ¯”è¾ƒç®€å•ã€‚è€Œè¯»æ“ä½œå¦‚æœå‘½ä¸­ç¼“å­˜åˆ™ç›´æ¥è¿”å›ï¼Œå¦åˆ™éœ€è¦ä»æ•°æ®åº“ä¸­åŠ è½½åˆ°ç¼“å­˜ä¸­ï¼Œåœ¨åŠ è½½ä¹‹å‰ï¼Œå¦‚æœç¼“å­˜å·²æ»¡ï¼Œåˆ™å…ˆæŠŠéœ€è¦æ·˜æ±°çš„ç¼“å­˜æ•°æ®å†™å›åˆ°åç«¯æ•°æ®åº“ä¸­ï¼Œå†æŠŠå¯¹åº”çš„æ•°æ®æ”¾å…¥åˆ°ç¼“å­˜ä¸­ã€‚è¿™ç§ç­–ç•¥çš„ä¼˜ç‚¹æ˜¯ï¼Œå†™æ“ä½œé£å¿«ï¼ˆåªå†™ç¼“å­˜ï¼‰ï¼Œç¼ºç‚¹æ˜¯å¦‚æœæ•°æ®è¿˜æœªæ¥å¾—åŠå†™å…¥åç«¯æ•°æ®åº“ï¼Œç³»ç»Ÿå‘ç”Ÿå¼‚å¸¸ä¼šå¯¼è‡´ç¼“å­˜å’Œæ•°æ®åº“çš„ä¸ä¸€è‡´ã€‚è¿™ç§ç­–ç•¥ç»å¸¸ä½¿ç”¨åœ¨æ“ä½œç³»ç»ŸPage Cacheä¸­ï¼Œæˆ–è€…åº”å¯¹å¤§é‡å†™æ“ä½œçš„æ•°æ®åº“å¼•æ“ä¸­ã€‚<br><br>é™¤äº†ä»¥ä¸Šæåˆ°çš„ç¼“å­˜å’Œæ•°æ®åº“çš„æ›´æ–°ç­–ç•¥ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªé—®é¢˜å°±æ˜¯æ“ä½œç¼“å­˜æˆ–æ•°æ®åº“å‘ç”Ÿå¼‚å¸¸æ—¶å¦‚ä½•å¤„ç†ï¼Ÿä¾‹å¦‚ç¼“å­˜æ“ä½œæˆåŠŸï¼Œæ•°æ®åº“æ“ä½œå¤±è´¥ï¼Œæˆ–è€…åè¿‡æ¥ï¼Œè¿˜æ˜¯æœ‰å¯èƒ½ä¼šäº§ç”Ÿä¸ä¸€è‡´çš„æƒ…å†µã€‚<br><br>æ¯”è¾ƒç®€å•çš„è§£å†³æ–¹æ¡ˆæ˜¯ï¼Œæ ¹æ®ä¸šåŠ¡è®¾è®¡å¥½æ›´æ–°ç¼“å­˜å’Œæ•°æ®åº“çš„å…ˆåé¡ºåºæ¥é™ä½å½±å“ï¼Œæˆ–è€…ç»™ç¼“å­˜è®¾ç½®è¾ƒçŸ­çš„æœ‰æ•ˆæœŸæ¥é™ä½ä¸ä¸€è‡´çš„æ—¶é—´ã€‚å¦‚æœéœ€è¦ä¸¥æ ¼ä¿è¯ç¼“å­˜å’Œæ•°æ®åº“çš„ä¸€è‡´æ€§ï¼Œå³ä¿è¯ä¸¤è€…æ“ä½œçš„åŸå­æ€§ï¼Œè¿™å°±æ¶‰åŠåˆ°åˆ†å¸ƒå¼äº‹åŠ¡é—®é¢˜äº†ï¼Œå¸¸è§çš„è§£å†³æ–¹æ¡ˆå°±æ˜¯æˆ‘ä»¬ç»å¸¸å¬åˆ°çš„ä¸¤é˜¶æ®µæäº¤ï¼ˆ2PCï¼‰ã€ä¸‰é˜¶æ®µæäº¤ï¼ˆ3PCï¼‰ã€TCCã€æ¶ˆæ¯é˜Ÿåˆ—ç­‰æ–¹å¼æ¥ä¿è¯äº†ï¼Œæ–¹æ¡ˆä¹Ÿä¼šæ¯”è¾ƒå¤æ‚ï¼Œä¸€èˆ¬ç”¨åœ¨å¯¹äºä¸€è‡´æ€§è¦æ±‚è¾ƒé«˜çš„ä¸šåŠ¡åœºæ™¯ä¸­ã€‚","like_count":249,"discussions":[{"author":{"id":2172420,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/r2nR7Zkl5RP7LobsNKJ6wmmtyXrh4alNSAOldx1y1PSeFB1J2I14HE4I0BCgicPhubIOibPZAENzEpHEWTFjMNqg/132","nickname":"è‘£è‘£","note":"","ucode":"C222E275545158","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":325583,"discussion_content":"è¯»å†™ç¼“å­˜æ¨¡å¼+å¼‚æ­¥å†™å›ç­–ç•¥æœ‰ç‚¹ç±»ä¼¼äºmysqlçš„change buffer","likes_number":6,"is_delete":false,"is_hidden":false,"ctime":1605357724,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1966533,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/01/c5/b48d25da.jpg","nickname":"cake","note":"","ucode":"55A7FC6CC1204C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2172420,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/r2nR7Zkl5RP7LobsNKJ6wmmtyXrh4alNSAOldx1y1PSeFB1J2I14HE4I0BCgicPhubIOibPZAENzEpHEWTFjMNqg/132","nickname":"è‘£è‘£","note":"","ucode":"C222E275545158","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":388612,"discussion_content":"æœ‰å…³ç³»å—ï¼Ÿéš¾é“æœ€è´´åˆ‡çš„ä¸æ˜¯ cacheå†™å›ç­–ç•¥å˜›ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628847710,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":325583,"ip_address":""},"score":388612,"extra":""}]},{"author":{"id":1073125,"avatar":"https://static001.geekbang.org/account/avatar/00/10/5f/e5/54325854.jpg","nickname":"èŒƒé—²","note":"","ucode":"F21FD7DF6BA53C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":314447,"discussion_content":"Cache Sideç®—æ˜¯ç”¨çš„æœ€å¤šçš„äº†ã€‚ä¸šåŠ¡é€»è¾‘å¯ä»¥ç›´æ¥å®ç°ï¼Œå…¶ä»–çš„éœ€è¦é­”æ”¹ç¼“å­˜ç³»ç»Ÿæˆ–è€…æ›´æ”¹è®¾è®¡æ–¹æ¡ˆï¼Œå¼•å…¥æ›´é«˜çš„å¤æ‚åº¦ã€‚","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1603157676,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1284672,"avatar":"https://static001.geekbang.org/account/avatar/00/13/9a/40/b746dc09.jpg","nickname":"twogozi","note":"","ucode":"C272B0745EF514","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":389736,"discussion_content":"å¦‚æœæŠŠæ“ä½œæ•°æ®åº“å’Œç¼“å­˜æ”¾åœ¨ä¸€ä¸ªæ•°æ®åº“äº‹åŠ¡ä¸­ï¼Œæ“ä½œæ•°æ®åº“æˆåŠŸï¼Œæ“ä½œç¼“å­˜å¤±è´¥æ—¶ï¼Œæ•°æ®åº“äº‹åŠ¡å›æ»šä¸ä¹Ÿå¯ä»¥ä¿è¯æ•°æ®ä¸€è‡´æ€§å—ï¼Ÿ","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1629419037,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":4,"child_discussions":[{"author":{"id":1675882,"avatar":"https://static001.geekbang.org/account/avatar/00/19/92/6a/dd37a054.jpg","nickname":"å¼ y .","note":"","ucode":"85918469492F4C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1284672,"avatar":"https://static001.geekbang.org/account/avatar/00/13/9a/40/b746dc09.jpg","nickname":"twogozi","note":"","ucode":"C272B0745EF514","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":411451,"discussion_content":"+1","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635932770,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":389736,"ip_address":""},"score":411451,"extra":""},{"author":{"id":1054201,"avatar":"https://static001.geekbang.org/account/avatar/00/10/15/f9/0b14785a.jpg","nickname":"ä¸‰ä¸‰","note":"","ucode":"4A76933C29BDA1","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1284672,"avatar":"https://static001.geekbang.org/account/avatar/00/13/9a/40/b746dc09.jpg","nickname":"twogozi","note":"","ucode":"C272B0745EF514","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":550599,"discussion_content":"ç¼“å­˜å†™æˆåŠŸåç½‘ç»œè¶…æ—¶æ•°æ®åº“äº‹åŠ¡å›æ»šäº†å‘¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644634536,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":389736,"ip_address":""},"score":550599,"extra":""},{"author":{"id":1295418,"avatar":"https://static001.geekbang.org/account/avatar/00/13/c4/3a/cf0715e2.jpg","nickname":"è¶…ğŸ‘€","note":"","ucode":"0E76CA7EE00D9F","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1284672,"avatar":"https://static001.geekbang.org/account/avatar/00/13/9a/40/b746dc09.jpg","nickname":"twogozi","note":"","ucode":"C272B0745EF514","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":570632,"discussion_content":"å¦‚æœç¼“å­˜æ›´æ–°100ms, æ•°æ®åº“ä¼šå¤¯ä½, æŠ±å›¢ä¸€èµ·æŒ‚æ‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651841414,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":389736,"ip_address":""},"score":570632,"extra":""}]},{"author":{"id":1344535,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqOn7k48KXia5rf0eXpzv2EGtqGibz3eNb8QnL8X72uia0g1rBwzXef4dV2JEdz3r4bu9GC1FLIeic4UA/132","nickname":"Lee","note":"","ucode":"6B8D59A0B1A1A9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":545825,"discussion_content":"Cache Asideç­–ç•¥ï¼Œå¯¹äºå¹¶å‘åœºæ™¯ï¼Œç¬¬ä¸€ä¸ªå‘½ä¸­çš„å†™è¯·æ±‚ä¼šä¿®æ”¹ç¼“å­˜ï¼Œä½†æ˜¯ä¿®æ”¹å‰ï¼Œå…¶ä»–è¯»è¯·æ±‚è¯»åˆ°çš„è¿˜æ˜¯æ—§å€¼ï¼Œæ˜¯å§ï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1642060904,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1194858,"avatar":"https://static001.geekbang.org/account/avatar/00/12/3b/6a/80d9c545.jpg","nickname":"RD","note":"","ucode":"E3947B6E1681AD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1344535,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqOn7k48KXia5rf0eXpzv2EGtqGibz3eNb8QnL8X72uia0g1rBwzXef4dV2JEdz3r4bu9GC1FLIeic4UA/132","nickname":"Lee","note":"","ucode":"6B8D59A0B1A1A9","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":589512,"discussion_content":"ä½ å¯ä»¥è¿™æ ·æƒ³ï¼Œä¿®æ”¹å‰ï¼Œä¸å°±æ˜¯è¿˜æ²¡æ”¹ï¼Œè¿˜æ²¡æ”¹ä¸å°±ç­‰äºç¼“å­˜å€¼æ˜¯æ–°çš„å“ˆå“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1665054848,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":545825,"ip_address":"åŒ—äº¬"},"score":589512,"extra":""}]},{"author":{"id":1238707,"avatar":"https://static001.geekbang.org/account/avatar/00/12/e6/b3/a3ae518f.jpg","nickname":"åˆ«çœ‹æˆ‘","note":"","ucode":"8F6F014DEB4F7D","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":311690,"discussion_content":"å—ç›ŠåŒªæµ…ğŸ‘","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1602463297,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":3190922,"avatar":"","nickname":"Geek_590385","note":"","ucode":"BE5BDD9180FA0E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":591112,"discussion_content":"ç‰›ç‰›","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1666281253,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æ±Ÿè¥¿"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1194858,"avatar":"https://static001.geekbang.org/account/avatar/00/12/3b/6a/80d9c545.jpg","nickname":"RD","note":"","ucode":"E3947B6E1681AD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":589513,"discussion_content":"è¯è¯´ï¼Œè¯»å†™ç›´å†™çš„æƒ…å†µä¸‹ï¼Œä¸ºäº†ä¿è¯å¹¶å‘ä¸‹çš„éš”ç¦»æ€§ï¼Œä½¿ç”¨åˆ†å¸ƒå¼é”ã€‚ä¸ºäº†ä¿è¯åŸå­æ€§ï¼Œéœ€è¦åŠ åˆ†å¸ƒå¼äº‹åŠ¡ã€‚è¿™ä¸ªæ€§èƒ½æ˜¯ä¸æ˜¯æ€¥å‰§ä¸‹é™å•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1665054985,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2984369,"avatar":"https://static001.geekbang.org/account/avatar/00/2d/89/b1/6444e86b.jpg","nickname":"JLOMG","note":"","ucode":"17EB1366167299","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585032,"discussion_content":"åªè¯»æ¨¡å¼å’Œè¯»å†™æ¨¡å¼ï¼Œæ˜¯redisè‡ªå¸¦çš„åŠŸèƒ½æ¨¡å—è¿˜æ˜¯éœ€è¦å¼€å‘è‡ªå·±å®ç°çš„é€»è¾‘å°è£…å‘¢ï¼Ÿçœ‹æ–‡ç« åƒæ˜¯è‡ªå·±é…ç½®å³å¯ï¼Œæ€ä¹ˆé…ç½®ä¹Ÿæ²¡æœ‰å•Š\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661303060,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æµ™æ±Ÿ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1415619,"avatar":"https://static001.geekbang.org/account/avatar/00/15/99/c3/e4f408d4.jpg","nickname":"é™Œå…®","note":"","ucode":"00CE47CAECD5CD","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":553603,"discussion_content":"mark!","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645975987,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1640978,"avatar":"https://static001.geekbang.org/account/avatar/00/19/0a/12/f8b988b8.jpg","nickname":"Kyle(","note":"","ucode":"0C14C4C086CAA9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":374974,"discussion_content":"Hi Kaito\nè¯·æ•™ä¸€ä¸ªé—®é¢˜\nè¯·é—®å¼‚æ­¥å†™å›çš„è¿™ä¸ªç¼“å­˜å·²æ»¡æ€ä¹ˆåˆ¤æ–­ï¼Ÿç¼“å­˜æ»¡äº†ä¸å°±å·²ç»æ‰§è¡Œæ¸…é™¤å·¥ä½œäº†å—ï¼Ÿè¿™æ—¶å€™å¦‚ä½•å†™å›å‘¢ï¼Ÿè¿˜æ˜¯è¯´äº‹å…ˆå®šä¸€ä¸ªé˜ˆå€¼ï¼Ÿæ¯æ¬¡å»åŠ è½½çš„æ—¶å€™çœ‹ä¸‹è¶…è¿‡é˜ˆå€¼æ²¡æœ‰ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621426037,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1722506,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJGLmN0Fooy93ia0cwWdvkr3AxciaLiapQSlYd77C6Wy6jcMuzMZKVk4dA70t8QYJmx9PF3NubicjJWuw/132","nickname":"Fisherman","note":"","ucode":"0BB07359C44FC6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":367155,"discussion_content":"æ˜¯ write though è€Œä¸æ˜¯ write thought","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618279776,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1024294,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaELZPnUAiajaR5C25EDLWeJURggyiaOP5GGPe2qlwpQcm5e3ybib8OsP4tvddFDLVRSNNGL5I3SFPJHsA/132","nickname":"null","note":"","ucode":"F9039EFED6B55D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1722506,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJGLmN0Fooy93ia0cwWdvkr3AxciaLiapQSlYd77C6Wy6jcMuzMZKVk4dA70t8QYJmx9PF3NubicjJWuw/132","nickname":"Fisherman","note":"","ucode":"0BB07359C44FC6","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":376590,"discussion_content":"ç›´å†™ï¼Œæ˜¯ä¸æ˜¯è€å¸ˆæ–‡ç« æåˆ°çš„ï¼šè¯»å†™ç¼“å­˜+åŒæ­¥å†™ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622203315,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":367155,"ip_address":""},"score":376590,"extra":""}]},{"author":{"id":1566642,"avatar":"https://static001.geekbang.org/account/avatar/00/17/e7/b2/4cb8356a.jpg","nickname":"å°ç”²é±¼","note":"","ucode":"DDF8A3A4976681","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":352275,"discussion_content":"æˆ‘æ„Ÿè§‰å¦‚æœè¦ä¿è¯æ•°æ®ä¸€è‡´æ€§çš„è¯ï¼Œå¯ä»¥è€ƒè™‘å¼•å…¥MQï¼Œæ›´æ–°ç¼“å­˜åï¼Œå¯ä»¥å‘MQï¼Œä¸‹æ¸¸å»æ¥æ”¶ï¼Œä¿®æ”¹æ•°æ®åº“ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614670927,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":4,"child_discussions":[{"author":{"id":2340338,"avatar":"https://static001.geekbang.org/account/avatar/00/23/b5/f2/58afc1d4.jpg","nickname":"åˆ˜å°è¾‰","note":"","ucode":"E1D77D8B56F3A5","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1566642,"avatar":"https://static001.geekbang.org/account/avatar/00/17/e7/b2/4cb8356a.jpg","nickname":"å°ç”²é±¼","note":"","ucode":"DDF8A3A4976681","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":368567,"discussion_content":"å¤šä¸ªçº¿ç¨‹æ›´æ–°äº†åŒä¸€æ¡æ•°æ®ã€éƒ½å‘é€åˆ°MQã€æ— æ³•ä¿è¯é¡ºåºã€ä¹Ÿä¼šä¸ä¸€è‡´ã€‚ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618752918,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":352275,"ip_address":""},"score":368567,"extra":""},{"author":{"id":2526420,"avatar":"https://static001.geekbang.org/account/avatar/00/26/8c/d4/c228fe2c.jpg","nickname":"é«˜æ¬§å¶å°¼å…¹","note":"","ucode":"1974C9151DBFB7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2340338,"avatar":"https://static001.geekbang.org/account/avatar/00/23/b5/f2/58afc1d4.jpg","nickname":"åˆ˜å°è¾‰","note":"","ucode":"E1D77D8B56F3A5","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":379561,"discussion_content":"åŠ æ—¶é—´æˆ³ï¼Œç±»ä¼¼tcpçš„è§£å†³æ–¹æ¡ˆåº”è¯¥èƒ½ä¿åº","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1623981793,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":368567,"ip_address":""},"score":379561,"extra":""},{"author":{"id":1592279,"avatar":"https://static001.geekbang.org/account/avatar/00/18/4b/d7/f46c6dfd.jpg","nickname":"William Ning","note":"","ucode":"4DB8D05E69E5F3","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":2526420,"avatar":"https://static001.geekbang.org/account/avatar/00/26/8c/d4/c228fe2c.jpg","nickname":"é«˜æ¬§å¶å°¼å…¹","note":"","ucode":"1974C9151DBFB7","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":586399,"discussion_content":"è¿˜æœ‰æ—¶é’Ÿé—®é¢˜ï¼Œå¦‚æœå‘ç”Ÿè·³è·ƒï¼Œè¿˜æ˜¯ä¼šå­˜åœ¨é—®é¢˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662184418,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":379561,"ip_address":"æµ™æ±Ÿ"},"score":586399,"extra":""}]},{"author":{"id":2109120,"avatar":"","nickname":"Geek_c12f80","note":"","ucode":"D5ADE29F16866B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":325661,"discussion_content":"volatile-ttlæ·˜æ±°ç­–ç•¥ï¼Œæ˜¯åªè¦ç­›é€‰å‡ºè¿‡æœŸçš„æ•°æ®æ·˜æ±°å°±è¡Œäº†å—ï¼Ÿè¿˜æ˜¯éœ€è¦æ ¹æ®è¿‡æœŸæ—¶é—´æ’åºï¼Œè¿‡æœŸæ—¶é—´æœ€ä¹…çš„æ·˜æ±°æ‰ï¼Ÿå¦‚æœæ’åºï¼Œä¹Ÿæ˜¯ç±»ä¼¼lruéšæœºé€‰æ‹©å€™é€‰é›†èŒƒå›´å†…æ’åºå—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605399558,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1336009,"avatar":"https://static001.geekbang.org/account/avatar/00/14/62/c9/7da27891.jpg","nickname":"DKSky","note":"","ucode":"69371A81033949","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":312992,"discussion_content":"Hi Kaito\nè¯·æ•™ä¸€ä¸ªé—®é¢˜ï¼Œï¼ˆè¯»å†™ç¼“å­˜æ¨¡å¼+åŒæ­¥ç›´å†™ç­–ç•¥ï¼Œè¿™ç§æ–¹æ¡ˆåœ¨å¹¶å‘åœºæ™¯ä¸‹ä¼šå¯¼è‡´æ•°æ®åº“å’Œç¼“å­˜çš„ä¸ä¸€è‡´ï¼‰è¿™ç§åœºæ™¯å¯ä»¥ä¸¾ä¸ªä¾‹å­å—?æˆ‘æ²¡å¤ªæƒ³æ˜ç™½æ˜¯æ€ä¹ˆå‡ºç°çš„ä¸ä¸€è‡´ã€‚è°¢è°¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602904125,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1336009,"avatar":"https://static001.geekbang.org/account/avatar/00/14/62/c9/7da27891.jpg","nickname":"DKSky","note":"","ucode":"69371A81033949","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":313008,"discussion_content":"çœ‹ä¸‹ä¸€ç¯‡æˆ‘çš„ç•™è¨€ï¼Œæœ‰è¯¦ç»†å†™åˆ°ã€‚","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1602908391,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":312992,"ip_address":""},"score":313008,"extra":""},{"author":{"id":1640978,"avatar":"https://static001.geekbang.org/account/avatar/00/19/0a/12/f8b988b8.jpg","nickname":"Kyle(","note":"","ucode":"0C14C4C086CAA9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":374936,"discussion_content":"å¥½å®¶ä¼™ï¼Œè®©æˆ‘æä¸æ¸…è°æ˜¯ä¸“æ ä½œè€…äº†ï¼Œç»™ä½ ç‚¹èµå“ˆå“ˆï¼","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1621415933,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":313008,"ip_address":""},"score":374936,"extra":""}]},{"author":{"id":1324307,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoU91kd8RZO5hg2w9cpnL4yTcfemDFJH3GfiaNRgOe7nQyQF7xBDc5Yq2Aue5KuHaEGOCMM9RUkUpQ/132","nickname":"ä¸Šç¥æ¢µä¿®","note":"","ucode":"77A5BED0911A87","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":312785,"discussion_content":"è¯·æ•™ä¸ªé—®é¢˜ï¼šå¦‚æœè®¾ç½®è¿‡æœŸæ·˜æ±°æœºåˆ¶ï¼ˆå¦‚ volital-lruï¼‰ å¦‚æœrediså†…å­˜è¾¾åˆ°maxmemory   æ·˜æ±°çš„å€™é€‰æ•°æ® ä¼šåŒ…å«æœªè¿‡æœŸçš„æ•°æ®å—ï¼Ÿ å¦‚æœæ²¡æœ‰è¿‡æœŸæ•°æ® æ˜¯ç›´æ¥oomå—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602817553,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":6,"child_discussions":[{"author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1324307,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoU91kd8RZO5hg2w9cpnL4yTcfemDFJH3GfiaNRgOe7nQyQF7xBDc5Yq2Aue5KuHaEGOCMM9RUkUpQ/132","nickname":"ä¸Šç¥æ¢µä¿®","note":"","ucode":"77A5BED0911A87","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":312810,"discussion_content":"1ã€ä¸ä¼šã€‚2ã€Redisä¼šè¿”å›æ‹’ç»å†™å…¥é”™è¯¯ï¼Œä¸ä¼šOOMã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1602823969,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":312785,"ip_address":""},"score":312810,"extra":""},{"author":{"id":1324307,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoU91kd8RZO5hg2w9cpnL4yTcfemDFJH3GfiaNRgOe7nQyQF7xBDc5Yq2Aue5KuHaEGOCMM9RUkUpQ/132","nickname":"ä¸Šç¥æ¢µä¿®","note":"","ucode":"77A5BED0911A87","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":313493,"discussion_content":"æ„Ÿè°¢\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603068511,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":312810,"ip_address":""},"score":313493,"extra":""},{"author":{"id":2109120,"avatar":"","nickname":"Geek_c12f80","note":"","ucode":"D5ADE29F16866B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1324307,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoU91kd8RZO5hg2w9cpnL4yTcfemDFJH3GfiaNRgOe7nQyQF7xBDc5Yq2Aue5KuHaEGOCMM9RUkUpQ/132","nickname":"ä¸Šç¥æ¢µä¿®","note":"","ucode":"77A5BED0911A87","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":325660,"discussion_content":"è¿™ä¸ªé—®é¢˜ï¼Œè€å¸ˆå›ç­”ï¼Œå†…å­˜ä¸å¤Ÿï¼Œvolatileä¹Ÿå¯èƒ½æ·˜æ±°æœªè¿‡æœŸæ•°æ®ï¼Œåˆ°åº•å“ªä¸ªå¯¹å‘¢","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1605399483,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":312785,"ip_address":""},"score":325660,"extra":""}]}]},{"had_liked":false,"id":259005,"user_name":"Mr.èœœ","can_delete":false,"product_type":"c1","uid":1035257,"ip_address":"","ucode":"C911B81198B3F5","user_header":"https://static001.geekbang.org/account/avatar/00/0f/cb/f9/75d08ccf.jpg","comment_is_top":false,"comment_ctime":1604594902,"is_pvip":false,"replies":[{"id":"98019","content":"è°¢è°¢æŒ‡å‡ºç‰ˆæœ¬ä¸Šçš„å·®åˆ«ï¼Œèµä»”ç»†è®¤çœŸï¼","user_name":"ä½œè€…å›å¤","comment_id":259005,"uid":"1609687","ip_address":"","utype":1,"ctime":1609081987,"user_name_real":"è’‹å¾·é’§"}],"discussion_count":1,"race_medal":0,"score":"555655376086","product_id":100056701,"comment_content":"æˆ‘å‘ç°ä¸€ä¸ªé—®é¢˜ï¼Œåœ¨æ·˜æ±°ç­–ç•¥ä¸Šï¼Œæˆ‘çš„è®°å¿†ä¸­ï¼Œä»–ä¸€ç›´æ˜¯é»˜è®¤volatile-lruï¼Œè€Œä¸”åœ¨ç™¾åº¦ä¸Šæœç´¢ï¼Œå¤§å¤šæ•°ä¹Ÿéƒ½æ˜¯é»˜è®¤volatile-lruã€‚è€Œæˆ‘åœ¨å‰å‡ å‘¨ä¹Ÿçœ‹åˆ°ä¸ä½ æœ‰ç›¸åŒçš„è¯´æ³•ï¼Œé»˜è®¤æ˜¯noevictionï¼Œæ‰€ä»¥æˆ‘æŸ¥çœ‹äº†å¤šä¸ªç‰ˆæœ¬çš„é…ç½®æ–‡ä»¶ï¼Œä»ä¸­äº†è§£åˆ°ï¼Œåœ¨redis3.0ä¹‹å‰ï¼Œé»˜è®¤æ˜¯volatile-lruï¼›åœ¨redis3.0ä¹‹åï¼ˆåŒ…æ‹¬3.0ï¼‰ï¼Œé»˜è®¤æ·˜æ±°ç­–ç•¥åˆ™æ˜¯noevictionã€‚æ‰€ä»¥è¿™ä¸ªåœ°æ–¹éœ€è¦å¼ºè°ƒä¸€ä¸‹ã€‚","like_count":130,"discussions":[{"author":{"id":1609687,"avatar":"https://static001.geekbang.org/account/avatar/00/18/8f/d7/fb60129d.jpg","nickname":"è’‹å¾·é’§","note":"","ucode":"833985C2C37C0A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":508809,"discussion_content":"è°¢è°¢æŒ‡å‡ºç‰ˆæœ¬ä¸Šçš„å·®åˆ«ï¼Œèµä»”ç»†è®¤çœŸï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609081987,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":252917,"user_name":"humor","can_delete":false,"product_type":"c1","uid":1181867,"ip_address":"","ucode":"9B48C4C7BEC92C","user_header":"https://static001.geekbang.org/account/avatar/00/12/08/ab/caec7bca.jpg","comment_is_top":false,"comment_ctime":1602514227,"is_pvip":false,"replies":[{"id":"92425","content":"åœ¨å®é™…è¿è¡Œæ—¶ï¼Œæ¯æ¬¡å¾€å€™é€‰é›†ä¸­æ’å…¥çš„æ•°æ®å¯èƒ½ä¸æ­¢ä¸€ä¸ªï¼Œè€Œåœ¨æ·˜æ±°æ•°æ®æ—¶ï¼Œä¹Ÿæ˜¯ä¼šæ ¹æ®ä½¿ç”¨å†…å­˜é‡è¶…è¿‡maxmemoryçš„æƒ…å†µï¼Œæ¥å†³å®šè¦æ·˜æ±°çš„æ•°æ®é‡ï¼Œæ‰€ä»¥å¯èƒ½ä¹Ÿä¸æ­¢ä¸€ä¸ªæ•°æ®è¢«æ·˜æ±°ã€‚å€™é€‰é›†çš„ä½œç”¨æ˜¯å…ˆæŠŠç¬¦åˆæ¡ä»¶ï¼ˆlruå€¼å°ï¼‰çš„æ•°æ®å‡†å¤‡å¥½ã€‚å€™é€‰é›†æœ¬èº«æ˜¯ä¼šæŒ‰ç…§lruå€¼å¤§å°æ’åºçš„ï¼Œç­‰å¾…è¦æ·˜æ±°æ—¶ï¼Œä¼šæ ¹æ®è¦æ·˜æ±°çš„é‡ï¼Œä»å€™é€‰é›†ä¸­æ·˜æ±°æ•°æ®ã€‚æ‰€ä»¥ï¼Œå¹¶ä¸æ˜¯åˆšè¿›å…¥å€™é€‰é›†å°±ç«‹é©¬å°±æ·˜æ±°äº†ã€‚å‡†å¤‡å€™é€‰é›†å’Œæ·˜æ±°æ•°æ®å®é™…æ˜¯ä¸¤ä¸ªè§£è€¦çš„é€»è¾‘æ“ä½œã€‚","user_name":"ä½œè€…å›å¤","comment_id":252917,"uid":"1609687","ip_address":"","utype":1,"ctime":1602553809,"user_name_real":"è’‹å¾·é’§"}],"discussion_count":7,"race_medal":0,"score":"173401206067","product_id":100056701,"comment_content":"èƒ½è¿›å…¥å€™é€‰é›†åˆçš„æ•°æ®çš„ lru å­—æ®µå€¼å¿…é¡»å°äºå€™é€‰é›†åˆä¸­æœ€å°çš„ lru å€¼ã€‚<br>æ„Ÿè§‰è¿™å¥è¯æœ‰é—®é¢˜ï¼Œå¦‚æœèƒ½è¿›å…¥å€™é€‰é›†åˆçš„æ•°æ®çš„lruå­—æ®µå€¼éƒ½å°äºå€™é€‰é›†åˆä¸­çš„æœ€å°çš„lruå€¼çš„è¯ï¼Œæ¯æ¬¡æ·˜æ±°çš„è‚¯å®šæ˜¯åˆšè¿›å…¥å€™é€‰é›†åˆçš„è¿™æ¡æ•°æ®å•Šï¼Œè¿™æ ·è¿™æ¡è¢«é€‰æ‹©è¿›è¡Œå€™é€‰é›†åˆçš„æ•°æ®å°±æ²¡æœ‰å¿…è¦å†è¿›å…¥å€™é€‰é›†åˆäº†å•Šï¼Œç›´æ¥åˆ é™¤å°±å¯ä»¥äº†å§","like_count":41,"discussions":[{"author":{"id":1016575,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/82/ff/00e7614e.jpg","nickname":"robyy","note":"","ucode":"773337C9942A7F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":350587,"discussion_content":"ç¬¬ä¸€æ‰¹å…¥é€‰å€™é€‰é›†ï¼š5ï¼Œ6ï¼Œ7ï¼Œ8ï¼Œæ·˜æ±°5å‰©ä¸‹6ï¼Œ7ï¼Œ8ï¼Œç¬¬äºŒæ¬¡å…¥é€‰æ–°å¢1ï¼Œ2ï¼Œ3ï¼ˆ1ï¼Œ2ï¼Œ3ï¼Œ6ï¼Œ7ï¼Œ8ï¼‰ï¼Œä½†å¯èƒ½è¦æ·˜æ±°1ä¸ªæˆ–4ä¸ªï¼Œå…¥é€‰å’Œéœ€è¦æ·˜æ±°çš„ä¸ªæ•°ä¸æ˜¯å¿…é¡»ä¸€æ ·çš„","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1613927262,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1609687,"avatar":"https://static001.geekbang.org/account/avatar/00/18/8f/d7/fb60129d.jpg","nickname":"è’‹å¾·é’§","note":"","ucode":"833985C2C37C0A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":506915,"discussion_content":"åœ¨å®é™…è¿è¡Œæ—¶ï¼Œæ¯æ¬¡å¾€å€™é€‰é›†ä¸­æ’å…¥çš„æ•°æ®å¯èƒ½ä¸æ­¢ä¸€ä¸ªï¼Œè€Œåœ¨æ·˜æ±°æ•°æ®æ—¶ï¼Œä¹Ÿæ˜¯ä¼šæ ¹æ®ä½¿ç”¨å†…å­˜é‡è¶…è¿‡maxmemoryçš„æƒ…å†µï¼Œæ¥å†³å®šè¦æ·˜æ±°çš„æ•°æ®é‡ï¼Œæ‰€ä»¥å¯èƒ½ä¹Ÿä¸æ­¢ä¸€ä¸ªæ•°æ®è¢«æ·˜æ±°ã€‚å€™é€‰é›†çš„ä½œç”¨æ˜¯å…ˆæŠŠç¬¦åˆæ¡ä»¶ï¼ˆlruå€¼å°ï¼‰çš„æ•°æ®å‡†å¤‡å¥½ã€‚å€™é€‰é›†æœ¬èº«æ˜¯ä¼šæŒ‰ç…§lruå€¼å¤§å°æ’åºçš„ï¼Œç­‰å¾…è¦æ·˜æ±°æ—¶ï¼Œä¼šæ ¹æ®è¦æ·˜æ±°çš„é‡ï¼Œä»å€™é€‰é›†ä¸­æ·˜æ±°æ•°æ®ã€‚æ‰€ä»¥ï¼Œå¹¶ä¸æ˜¯åˆšè¿›å…¥å€™é€‰é›†å°±ç«‹é©¬å°±æ·˜æ±°äº†ã€‚å‡†å¤‡å€™é€‰é›†å’Œæ·˜æ±°æ•°æ®å®é™…æ˜¯ä¸¤ä¸ªè§£è€¦çš„é€»è¾‘æ“ä½œã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1602553809,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1464234,"avatar":"https://static001.geekbang.org/account/avatar/00/16/57/aa/2e4f996f.jpg","nickname":"Stanleyzhu","note":"","ucode":"6846FBBEF2C933","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":560525,"discussion_content":"æ—¶é—´æˆ³ä¸ºåˆ¤æ–­æ¡ä»¶çš„è¯ã€‚è¶Šåé¢ä¿®æ”¹å¾—æ•°æ®å€¼å°±è¶Šå¤§ã€‚é‚£ä¹ˆé—®é¢˜æ¥äº†ã€‚å‡å¦‚åˆšå¼€å§‹æ‰€è°“çš„æ—¶é—´æˆ³ä¸ºï¼ˆ1-10ï¼‰ï¼Œéšæœºé€‰æ‹©ï¼ˆ3  5  7ï¼‰è¿›å»å€™é€‰é›†åˆï¼Œé›†åˆæœ€å¤§ä¸ªæ•°ä¸º3.\nç¬¬ä¸€æ¬¡åˆ é™¤æœ€å°çš„3ï¼Œå‰©ä¸‹ï¼ˆ5  7ï¼‰\nç¬¬äºŒæ¬¡è¿›å»å€™é€‰é›†åˆï¼ˆ1  2  4 5  7ï¼‰ï¼Œåˆ é™¤1 2 4å‰©ä¸‹ï¼ˆ5 7ï¼‰\n\nè¿™é‡ŒæŒ‰ç…§è§„åˆ™ï¼ˆå°äºæœ€å°lruçš„æ‰èƒ½è¿›å€™é€‰é›†åˆï¼‰ï¼Œé‚£ä¹ˆåé¢å°±æ²¡æœ‰æ•°æ®èƒ½è¿›é›†åˆäº†ï¼Œå› ä¸ºæ–°çš„æ•°æ®æ—¶é—´æˆ³éƒ½æ¯”ç¬¬ä¸€æ¬¡å…¨éƒ¨é›†åˆæœ€å¤§çš„10è¿˜å¤§ã€‚é‚£è¿™ä¸ªè§„åˆ™æ˜¯ä¸ç”Ÿæ•ˆäº†ï¼Ÿ\n\næ˜¯æˆ‘ç†è§£æœ‰é—®é¢˜è¿˜æ˜¯è®²çš„è¿™ä¸ªç‚¹ä¸å¯¹ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649380729,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2115387,"avatar":"https://static001.geekbang.org/account/avatar/00/20/47/3b/70198ceb.jpg","nickname":"Aibo","note":"","ucode":"2CE3E77BD2D014","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":550799,"discussion_content":"ä¸»è¦ä¸æ˜¯èŠ‚çœæ—¶é—´ï¼Œä½¿ç”¨é›†åˆç­›é€‰çš„æ–¹å¼å…¶å®å°±æ˜¯ç”¨æ—¶é—´æ¢ç©ºé—´","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644734940,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2026838,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/ed/56/4ab914f7.jpg","nickname":"å¹»","note":"","ucode":"E10667B64E097F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":548251,"discussion_content":"æˆ‘ä¹Ÿè¡¨ç¤ºç–‘æƒ‘ï¼ŒåŸæ¥æˆ‘ä¸æ˜¯ä¸€ä¸ªäºº","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643100379,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2041396,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/26/34/891dd45b.jpg","nickname":"å®™æ–¯","note":"","ucode":"80DF36BAD298AD","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":341620,"discussion_content":"æˆ‘ä¹Ÿæœ‰äº›ç–‘æƒ‘ï¼ŒæŒ‰ç…§è¿™ä¹ˆç†è§£é‚£æ·˜æ±°çš„è‚¯å®šæ˜¯åˆšé€‰è¿›å€™é€‰é›†åˆä¸­çš„å…ƒç´ ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610463200,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2110772,"avatar":"","nickname":"dfuru","note":"","ucode":"0222FADA093D95","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":318150,"discussion_content":"åœ¨å€™é€‰æ•°æ®é›†ä¸­çš„é“¾è¡¨ä¸­æ·˜æ±°ï¼Œè™½ç„¶é“¾è¡¨çŸ­äº†ï¼Œä»ç„¶åªæœ‰ä¸€ä¸ªé“¾è¡¨ã€‚é«˜å¹¶å‘æ—¶ï¼Œå¯¹é“¾è¡¨åŠ é”ï¼Œä»ç„¶å½±å“æ€§èƒ½å§ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603666092,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":252740,"user_name":"ä¸æ­£ç»ã€ç»…å£«","can_delete":false,"product_type":"c1","uid":1348004,"ip_address":"","ucode":"564A664338A4DF","user_header":"https://static001.geekbang.org/account/avatar/00/14/91/a4/a4af0d30.jpg","comment_is_top":false,"comment_ctime":1602472452,"is_pvip":false,"replies":[{"id":"92416","content":"æ˜¯æœ‰è¿™ç§å¯èƒ½çš„ï¼Œç¬¬ä¸€æ¬¡è¿›å…¥å€™é€‰é›†åˆçš„æ•°æ®æ˜¯éšæœºé€‰å–çš„ï¼Œæ•°æ®çš„lruå€¼å¯èƒ½å¤§å¯èƒ½å°ã€‚ç¬¬äºŒæ¬¡åŠåç»­å†è¿›å…¥å€™é€‰é›†çš„æ•°æ®çš„lruå€¼éœ€è¦å°äºå€™é€‰é›†ä¸­çš„æœ€å°lruå€¼ã€‚<br><br>åŒæ—¶ï¼Œå€™é€‰é›†çš„å®ç°æ˜¯ä¸€ä¸ªé“¾è¡¨ï¼Œæ•°æ®æ˜¯æŒ‰ç…§lruå€¼æ’åºçš„ï¼Œé“¾è¡¨å¤´æ˜¯lruå€¼æœ€å¤§çš„ï¼Œé“¾è¡¨å°¾æ˜¯lruå€¼æœ€å°çš„ã€‚å½“ç¬¬äºŒæ¬¡åŠåç»­è¿›å…¥å€™é€‰é›†çš„æ•°æ®lruæ›´å°ï¼Œä½†æ˜¯å€™é€‰é›†ä¸­å·²ç»æ²¡æœ‰ç©ºä½ç½®æ—¶ï¼Œå€™é€‰é›†é“¾è¡¨å¤´çš„æ•°æ®ä¼šè¢«ç§»å‡ºå€™é€‰é›†ï¼ŒæŠŠä½ç½®ç©ºå‡ºæ¥ï¼Œç»™æ–°è¿›å…¥çš„æ•°æ®ã€‚è¿™æ ·çš„è¯ï¼Œè¿™ä¸ªè¢«ç§»å‡ºçš„æ•°æ®å°±ä¸ä¼šä½œä¸ºè¢«æ·˜æ±°çš„å€™é€‰æ•°æ®äº†ã€‚","user_name":"ä½œè€…å›å¤","comment_id":252740,"uid":"1609687","ip_address":"","utype":1,"ctime":1602545719,"user_name_real":"è’‹å¾·é’§"}],"discussion_count":4,"race_medal":0,"score":"83206851076","product_id":100056701,"comment_content":"èƒ½è¿›å…¥å€™é€‰é›†åˆçš„æ•°æ®çš„ lru å­—æ®µå€¼å¿…é¡»å°äºå€™é€‰é›†åˆä¸­æœ€å°çš„ lru å€¼ã€‚<br>è¿™é‡Œæœ‰ä¸ªç–‘é—®ï¼Œè¯·æ•™è€å¸ˆï¼Œè¿™æ ·ç¬¬äºŒæ¬¡åŠåç»­è¿›å…¥çš„å¤‡é€‰æ·˜æ±°é›†åˆä¸­çš„æ•°æ®lruéƒ½å°äºç¬¬ä¸€æ¬¡çš„ï¼Œæ·˜æ±°çš„ä¹Ÿæ˜¯lruæœ€å°çš„ï¼Œé‚£ç¬¬ä¸€æ¬¡è¿›å…¥æ·˜æ±°é›†åˆçš„æ•°æ®è¿™æ ·ä¸å°±ä¸ä¼šè¢«é€‰ä¸­æ·˜æ±°äº†å‘¢","like_count":20,"discussions":[{"author":{"id":1609687,"avatar":"https://static001.geekbang.org/account/avatar/00/18/8f/d7/fb60129d.jpg","nickname":"è’‹å¾·é’§","note":"","ucode":"833985C2C37C0A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":506857,"discussion_content":"æ˜¯æœ‰è¿™ç§å¯èƒ½çš„ï¼Œç¬¬ä¸€æ¬¡è¿›å…¥å€™é€‰é›†åˆçš„æ•°æ®æ˜¯éšæœºé€‰å–çš„ï¼Œæ•°æ®çš„lruå€¼å¯èƒ½å¤§å¯èƒ½å°ã€‚ç¬¬äºŒæ¬¡åŠåç»­å†è¿›å…¥å€™é€‰é›†çš„æ•°æ®çš„lruå€¼éœ€è¦å°äºå€™é€‰é›†ä¸­çš„æœ€å°lruå€¼ã€‚\n\nåŒæ—¶ï¼Œå€™é€‰é›†çš„å®ç°æ˜¯ä¸€ä¸ªé“¾è¡¨ï¼Œæ•°æ®æ˜¯æŒ‰ç…§lruå€¼æ’åºçš„ï¼Œé“¾è¡¨å¤´æ˜¯lruå€¼æœ€å¤§çš„ï¼Œé“¾è¡¨å°¾æ˜¯lruå€¼æœ€å°çš„ã€‚å½“ç¬¬äºŒæ¬¡åŠåç»­è¿›å…¥å€™é€‰é›†çš„æ•°æ®lruæ›´å°ï¼Œä½†æ˜¯å€™é€‰é›†ä¸­å·²ç»æ²¡æœ‰ç©ºä½ç½®æ—¶ï¼Œå€™é€‰é›†é“¾è¡¨å¤´çš„æ•°æ®ä¼šè¢«ç§»å‡ºå€™é€‰é›†ï¼ŒæŠŠä½ç½®ç©ºå‡ºæ¥ï¼Œç»™æ–°è¿›å…¥çš„æ•°æ®ã€‚è¿™æ ·çš„è¯ï¼Œè¿™ä¸ªè¢«ç§»å‡ºçš„æ•°æ®å°±ä¸ä¼šä½œä¸ºè¢«æ·˜æ±°çš„å€™é€‰æ•°æ®äº†ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1602545719,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2548016,"avatar":"https://static001.geekbang.org/account/avatar/00/26/e1/30/56151c95.jpg","nickname":"å¾å¤§é›·","note":"","ucode":"4D6F0D4C58CE93","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":1609687,"avatar":"https://static001.geekbang.org/account/avatar/00/18/8f/d7/fb60129d.jpg","nickname":"è’‹å¾·é’§","note":"","ucode":"833985C2C37C0A","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":576951,"discussion_content":"è€å¸ˆï¼Œæˆ‘æœ‰ä¸ªç–‘é—®æˆ‘çœ‹æºç æ˜¯å€™é€‰é›†åˆæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œè€Œæ¯æ¬¡éƒ½ä¼šé€‰æ‹©maxmemory_samplesæ•°é‡çš„æ•°æ®ï¼Œç„¶åæ ¹æ®æ˜¯å¦æ—¶é—´æœ€å°æ’å…¥å€™é€‰é›†åˆæ•°ç»„ä¸­ï¼Œæ„Ÿè§‰è·Ÿè€å¸ˆè¯´çš„å€™é€‰é›†åˆæ˜¯é“¾è¡¨ä¸å¤ªä¸€æ ·","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655862922,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":506857,"ip_address":""},"score":576951,"extra":""}]},{"author":{"id":1035064,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/cb/38/4c9cfdf4.jpg","nickname":"è°¢å°è·¯","note":"","ucode":"C9FE2EB10DC105","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":311838,"discussion_content":"Nä¸ªå€¼æ˜¯éšæœºé€‰çš„ã€‚ä¸‹æ¬¡è§¦å‘æ·˜æ±°çš„æ—¶å€™ï¼Œæ•°æ®ä¸ä¸€å®šæ˜¯è¿™äº›ï¼Œåœ¨æ–°çš„é›†åˆé‡Œå°±æœ‰å¯èƒ½æ·˜æ±°æ‰","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1602499905,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1623409,"avatar":"https://static001.geekbang.org/account/avatar/00/18/c5/71/f7c43b49.jpg","nickname":"é£å‘åŒ—å¹","note":"","ucode":"2FD0BC5159E1C1","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":311973,"discussion_content":"æ·˜æ±°LRUæœ€å°çš„ï¼Œæ¯æ¬¡åªèƒ½æ·˜æ±°ä¸€ä¸ªæ•°æ®å—ï¼Ÿç¬¬äºŒæ¬¡åŠåç»­å†è¿›å…¥å€™é€‰é›†çš„è§¦å‘æ¡ä»¶ï¼Œæ˜¯æœ‰æ–°æ•°æ®æ’å…¥å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602554046,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":266336,"user_name":"æœ‰ç”Ÿä¹‹å¹´","can_delete":false,"product_type":"c1","uid":1020719,"ip_address":"","ucode":"B713335DE9D37F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/93/2f/1e193dcc.jpg","comment_is_top":false,"comment_ctime":1607304892,"is_pvip":false,"replies":[{"id":"97658","content":"å› ä¸ºallkeysæ˜¯åœ¨æ‰€æœ‰çš„é”®å€¼å¯¹ä¸­è¿›è¡Œç­›é€‰æ·˜æ±°ï¼Œæ‰€ä»¥ï¼Œå¦‚æœredisåšå­˜å‚¨ï¼Œç›¸åº”çš„æ•°æ®åº”è¯¥æ˜¯ä¸å¸Œæœ›è¢«æ·˜æ±°çš„ï¼ˆé™¤éåº”ç”¨è‡ªå·±åˆ é™¤ï¼‰ï¼Œæ­¤æ—¶ç”¨allkeyså°±ä¸åˆé€‚äº†ã€‚<br><br>ä¸€èˆ¬ä¸å»ºè®®ä¸€ä¸ªRediså®ä¾‹åŒæ—¶åšç¼“å­˜å’Œåšå­˜å‚¨ï¼Œå¯ä»¥åˆ†å¼€ç”¨ä¸åŒå®ä¾‹ã€‚","user_name":"ä½œè€…å›å¤","comment_id":266336,"uid":"1609687","ip_address":"","utype":1,"ctime":1608597304,"user_name_real":"è’‹å¾·é’§"}],"discussion_count":1,"race_medal":0,"score":"66031814332","product_id":100056701,"comment_content":"è€å¸ˆï¼Œæ‚¨å¥½ï¼Œå¦‚æœredisæ—¢åšç¼“å­˜ï¼Œåˆä½œå­˜å‚¨ä½¿ç”¨ï¼Œæ˜¯ä¸æ˜¯å°±ä¸èƒ½è®¾ç½®allkeysç›¸å…³çš„é…ç½®äº†","like_count":15,"discussions":[{"author":{"id":1609687,"avatar":"https://static001.geekbang.org/account/avatar/00/18/8f/d7/fb60129d.jpg","nickname":"è’‹å¾·é’§","note":"","ucode":"833985C2C37C0A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":511216,"discussion_content":"å› ä¸ºallkeysæ˜¯åœ¨æ‰€æœ‰çš„é”®å€¼å¯¹ä¸­è¿›è¡Œç­›é€‰æ·˜æ±°ï¼Œæ‰€ä»¥ï¼Œå¦‚æœredisåšå­˜å‚¨ï¼Œç›¸åº”çš„æ•°æ®åº”è¯¥æ˜¯ä¸å¸Œæœ›è¢«æ·˜æ±°çš„ï¼ˆé™¤éåº”ç”¨è‡ªå·±åˆ é™¤ï¼‰ï¼Œæ­¤æ—¶ç”¨allkeyså°±ä¸åˆé€‚äº†ã€‚\n\nä¸€èˆ¬ä¸å»ºè®®ä¸€ä¸ªRediså®ä¾‹åŒæ—¶åšç¼“å­˜å’Œåšå­˜å‚¨ï¼Œå¯ä»¥åˆ†å¼€ç”¨ä¸åŒå®ä¾‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608597304,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":264454,"user_name":"å¥½å¥½å­¦ä¹ ","can_delete":false,"product_type":"c1","uid":1762191,"ip_address":"","ucode":"9D44D9530D9A1D","user_header":"https://static001.geekbang.org/account/avatar/00/1a/e3/8f/77b5a753.jpg","comment_is_top":false,"comment_ctime":1606470051,"is_pvip":false,"replies":[{"id":"97917","content":"ä½¿ç”¨volatile-lruç­–ç•¥çš„åŒæ—¶ç»™ç½®é¡¶æ•°æ®ä¸è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œå°±æ˜¯ä¸ºäº†æŠŠç½®é¡¶æ•°æ®å’Œéç½®é¡¶æ•°æ®åŒºåˆ†å¼€æ¥ã€‚å¯¹ç½®é¡¶æ•°æ®ä¸è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œå°±ä¸ä¼šè¢«volatile-lruæ·˜æ±°ï¼Œå¯ä»¥ä¸€ç›´ç½®é¡¶ã€‚è€Œå…¶ä»–éç½®é¡¶æ•°æ®å¯ä»¥æ­£å¸¸è¢«volatile-lruæ·˜æ±°æ‰ã€‚<br><br>å¦‚æœç”¨allkeysçš„ç­–ç•¥ï¼Œå°±æ— æ³•åŒºåˆ†ç½®é¡¶å’Œéç½®é¡¶æ•°æ®äº†ï¼Œéƒ½æ˜¯ç”¨ç»Ÿä¸€çš„ç­–ç•¥äº†ã€‚","user_name":"ä½œè€…å›å¤","comment_id":264454,"uid":"1609687","ip_address":"","utype":1,"ctime":1608993151,"user_name_real":"è’‹å¾·é’§"}],"discussion_count":1,"race_medal":0,"score":"57441044899","product_id":100056701,"comment_content":"è€å¸ˆå¥½, è¿™é‡Œæ˜¯ä¸æ˜¯æœ‰äº›çŸ›ç›¾å‘¢?<br><br>æ–‡ä¸­è¯´&quot;å¦‚æœä¸šåŠ¡ä¸­æœ‰ç½®é¡¶çš„éœ€æ±‚ï¼Œæ¯”å¦‚ç½®é¡¶æ–°é—»ã€ç½®é¡¶è§†é¢‘ï¼Œå¯ä»¥ä½¿ç”¨ volatile-lru ç­–ç•¥ï¼ŒåŒæ—¶ä¸ç»™è¿™äº›ç½®é¡¶æ•°æ®è®¾ç½®è¿‡æœŸæ—¶é—´ã€‚&quot;<br><br> volatile-lru  ä¸æ˜¯åªé’ˆå¯¹è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„keyæ‰ä¼šç”Ÿæ•ˆå—? è¿™é‡Œåˆè¯´ä¸ç»™è¿™äº›æ•°æ®è®¾ç½®è¿‡æœŸæ—¶é—´.. ","like_count":13,"discussions":[{"author":{"id":1609687,"avatar":"https://static001.geekbang.org/account/avatar/00/18/8f/d7/fb60129d.jpg","nickname":"è’‹å¾·é’§","note":"","ucode":"833985C2C37C0A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":510570,"discussion_content":"ä½¿ç”¨volatile-lruç­–ç•¥çš„åŒæ—¶ç»™ç½®é¡¶æ•°æ®ä¸è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œå°±æ˜¯ä¸ºäº†æŠŠç½®é¡¶æ•°æ®å’Œéç½®é¡¶æ•°æ®åŒºåˆ†å¼€æ¥ã€‚å¯¹ç½®é¡¶æ•°æ®ä¸è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œå°±ä¸ä¼šè¢«volatile-lruæ·˜æ±°ï¼Œå¯ä»¥ä¸€ç›´ç½®é¡¶ã€‚è€Œå…¶ä»–éç½®é¡¶æ•°æ®å¯ä»¥æ­£å¸¸è¢«volatile-lruæ·˜æ±°æ‰ã€‚\n\nå¦‚æœç”¨allkeysçš„ç­–ç•¥ï¼Œå°±æ— æ³•åŒºåˆ†ç½®é¡¶å’Œéç½®é¡¶æ•°æ®äº†ï¼Œéƒ½æ˜¯ç”¨ç»Ÿä¸€çš„ç­–ç•¥äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608993151,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":258122,"user_name":"æ²ˆå¯…","can_delete":false,"product_type":"c1","uid":1321582,"ip_address":"","ucode":"03ACA766AC6FD5","user_header":"https://static001.geekbang.org/account/avatar/00/14/2a/6e/fb980b6b.jpg","comment_is_top":false,"comment_ctime":1604305857,"is_pvip":false,"replies":[{"id":"94185","content":"æœ‰å¯èƒ½ä¼šè¢«åˆ é™¤çš„ã€‚<br><br>volatile-*ç­–ç•¥æ˜¯ä»è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„keyä¸­è¿›è¡Œæ·˜æ±°ï¼Œå¦‚æœå†…å­˜ä¸å¤Ÿäº†ï¼Œå³ä½¿keyçš„è¿‡æœŸæ—¶é—´è¿˜æœªåˆ°ï¼Œä¹Ÿå¯èƒ½æŒ‰ç…§ç­–ç•¥è¢«é€‰å‡ºæ¥æ·˜æ±°æ‰ã€‚","user_name":"ä½œè€…å›å¤","comment_id":258122,"uid":"1609687","ip_address":"","utype":1,"ctime":1604561715,"user_name_real":"è’‹å¾·é’§"}],"discussion_count":9,"race_medal":0,"score":"40259011521","product_id":100056701,"comment_content":"volatile-å¼€å¤´çš„ç­–ç•¥ ï¼Œå¦‚æœä¸€ä¸ªkeyè¿˜æœªè¿‡æœŸï¼Œæœ‰å¯èƒ½è¢«åˆ é™¤å—ï¼Ÿ","like_count":10,"discussions":[{"author":{"id":1609687,"avatar":"https://static001.geekbang.org/account/avatar/00/18/8f/d7/fb60129d.jpg","nickname":"è’‹å¾·é’§","note":"","ucode":"833985C2C37C0A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":508558,"discussion_content":"æœ‰å¯èƒ½ä¼šè¢«åˆ é™¤çš„ã€‚\n\nvolatile-*ç­–ç•¥æ˜¯ä»è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„keyä¸­è¿›è¡Œæ·˜æ±°ï¼Œå¦‚æœå†…å­˜ä¸å¤Ÿäº†ï¼Œå³ä½¿keyçš„è¿‡æœŸæ—¶é—´è¿˜æœªåˆ°ï¼Œä¹Ÿå¯èƒ½æŒ‰ç…§ç­–ç•¥è¢«é€‰å‡ºæ¥æ·˜æ±°æ‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604561715,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2308075,"avatar":"","nickname":"Geek_89e362","note":"","ucode":"E596C2CFE1CFAF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":348344,"discussion_content":"with any of the above policies, Redis will return an error on write  operations, when there are no suitable keys for eviction.  å¦‚æœä¸å­˜åœ¨ç¬¦åˆæ¡ä»¶çš„key å°±ä¼šæŠ¥é”™","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1612518499,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1780797,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/2c/3d/0bd58aa4.jpg","nickname":"Em","note":"","ucode":"32012A5C603C8A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2308075,"avatar":"","nickname":"Geek_89e362","note":"","ucode":"E596C2CFE1CFAF","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":577812,"discussion_content":"è¿”å›å†™å¤±è´¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656347599,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":348344,"ip_address":""},"score":577812,"extra":""}]},{"author":{"id":2109120,"avatar":"","nickname":"Geek_c12f80","note":"","ucode":"D5ADE29F16866B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":325659,"discussion_content":"è¿™ä¸ªé—®é¢˜ï¼Œè¯¾ä»£è¡¨Kaitoå›å¤è¯´ï¼Œå°±ç®—å†…å­˜ä¸å¤Ÿï¼Œæœªè¿‡æœŸæ•°æ®ä¹Ÿä¸ä¼šæ·˜æ±°ï¼Œä¼šæŠ›å‡ºoomï¼Œåˆ°åº•å“ªä¸ªæ˜¯å¯¹çš„ï¼Ÿï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605399270,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":2109120,"avatar":"","nickname":"Geek_c12f80","note":"","ucode":"D5ADE29F16866B","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":374801,"discussion_content":"è€å“¥ï¼Œæˆ‘å•¥æ—¶è¿™ä¹ˆè¯´è¿‡ï¼Œä½ åˆ«å‘æˆ‘ã€‚ã€‚","likes_number":6,"is_delete":false,"is_hidden":false,"ctime":1621351912,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":325659,"ip_address":""},"score":374801,"extra":""},{"author":{"id":2870609,"avatar":"","nickname":"Geek_81fd93","note":"","ucode":"010A1ACF8E7F40","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":541021,"discussion_content":"å“ˆå“ˆå“ˆå“ˆå“ˆå“ˆ","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1640233963,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":374801,"ip_address":""},"score":541021,"extra":""},{"author":{"id":1780797,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/2c/3d/0bd58aa4.jpg","nickname":"Em","note":"","ucode":"32012A5C603C8A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2109120,"avatar":"","nickname":"Geek_c12f80","note":"","ucode":"D5ADE29F16866B","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":577811,"discussion_content":"äººå®¶æ²¡è¯´oom, è¯´çš„æ˜¯ä¼šæ‹’ç»è®¿é—®, ä¼ è¯ä¹Ÿä¸ä¼ ä¸ªå…¨çš„?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656347562,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":325659,"ip_address":""},"score":577811,"extra":""}]},{"author":{"id":2109120,"avatar":"","nickname":"Geek_c12f80","note":"","ucode":"D5ADE29F16866B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":325654,"discussion_content":"å†è¿›ä¸€æ­¥ç¡®è®¤ä¸‹ï¼Œå¦‚æœå†…å­˜ä½¿ç”¨æ²¡æœ‰è¾¾åˆ°maxmemoryï¼Œvolatileå¼€å¤´çš„æ·˜æ±°ç­–ç•¥æ˜¯ä¸ä¼šæ·˜æ±°æœªè¿‡æœŸæ•°æ®å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605398578,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":2109120,"avatar":"","nickname":"Geek_c12f80","note":"","ucode":"D5ADE29F16866B","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":374802,"discussion_content":"æ²¡è¶…è¿‡maxmemoryï¼Œè‚¯å®šä¸æ·˜æ±°å•Šã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621351934,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":325654,"ip_address":""},"score":374802,"extra":""}]}]},{"had_liked":false,"id":252713,"user_name":"yeek","can_delete":false,"product_type":"c1","uid":1020629,"ip_address":"","ucode":"A1C71023113CB9","user_header":"https://static001.geekbang.org/account/avatar/00/0f/92/d5/699384a0.jpg","comment_is_top":false,"comment_ctime":1602464190,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"27372267966","product_id":100056701,"comment_content":"è®°å½•å‡ ä¸ªé—®é¢˜ï¼š<br><br>1. æ·˜æ±°å¯¹å½“å‰è¯·æ±‚çš„å»¶è¿Ÿé—®é¢˜ï¼›<br>2. æ·˜æ±°æ•°æ®çš„ä¸Šé™æ˜¯å¤šå°‘ï¼Ÿä»…æ»¡è¶³å½“å‰setæ‰€éœ€çš„å†…å­˜ç©ºé—´ä¹ˆï¼Ÿ<br>3. å¦‚æœéšæœºå¤šæ¬¡ä¾ç„¶ä¸å­˜åœ¨æ¯”å€™é€‰é˜Ÿåˆ—ä¸­æœ€å°lruè¿˜å°çš„æ•°æ®ï¼Œä¸”å†…å­˜ç©ºé—´è¿˜éœ€è¦ç»§ç»­é‡Šæ”¾ï¼Œæ˜¯å¦æœ‰æ‰§è¡Œæ—¶é—´ä¸Šé™ï¼Ÿ","like_count":6},{"had_liked":false,"id":253202,"user_name":"Watson","can_delete":false,"product_type":"c1","uid":1113122,"ip_address":"","ucode":"85299D36007161","user_header":"https://static001.geekbang.org/account/avatar/00/10/fc/22/4b84b7d7.jpg","comment_is_top":false,"comment_ctime":1602648728,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"14487550616","product_id":100056701,"comment_content":"åŸæ–‡ï¼šå¦‚æœå€™é€‰æ•°æ®é›†ä¸­çš„æ•°æ®ä¸ªæ•°è¾¾åˆ°äº† maxmemory-samplesï¼ŒRedis å°±æŠŠå€™é€‰æ•°æ®é›†ä¸­ lru å­—æ®µå€¼æœ€å°çš„æ•°æ®æ·˜æ±°å‡ºå»ã€‚<br><br>è¯·æ•™è€å¸ˆï¼Œæ˜¯å¦å­˜åœ¨maxmemory-samples æ²¡è¾¾åˆ°ä¸ªæ•°ï¼Œä½†æ˜¯rediså†…å­˜æ»¡äº†çš„æƒ…å†µï¼Œå¦‚æœå­˜åœ¨è¿™ç§æƒ…å†µï¼Œredisæ·˜æ±°æœºåˆ¶æ²¡æœ‰å¯åŠ¨çš„æ—¶å€™ï¼Œrediså†…å­˜æ»¡äº†ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆç¥å¥‡ä¹‹æ—…å‘¢ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":2136414,"avatar":"https://static001.geekbang.org/account/avatar/00/20/99/5e/33481a74.jpg","nickname":"Lemon","note":"","ucode":"E52BB361B69825","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":312870,"discussion_content":"åŒé—®ï¼Œä½†ä¹Ÿæƒ³å†é—®ä¸€ä¸‹ï¼šå¦‚æœéšæœºå€™é€‰çš„æ•°æ®éƒ½æ˜¯æœ€æ—§çš„æ•°æ®ï¼ˆlruå€¼éƒ½å¾ˆå°ï¼‰ï¼Œé‚£ä¹ˆæ˜¯ä¸æ˜¯æ„å‘³ç€åç»­â€œå€™é€‰é›†åˆâ€å·²ç»æ— æ³•æ·»åŠ å†…å®¹äº†ï¼Ÿå› ä¸ºæ­¤æ—¶â€œå€™é€‰é›†åˆâ€ä¸­çš„lruå€¼éƒ½å¾ˆå°ï¼Œæ²¡åŠæ³•å‡‘åˆ° maxmemory-samples çš„ä¸ªæ•°ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1602839708,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1365206,"avatar":"https://static001.geekbang.org/account/avatar/00/14/d4/d6/1d4543ac.jpg","nickname":"äº‘æµ·","note":"","ucode":"0C6CA0BE58EA21","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2136414,"avatar":"https://static001.geekbang.org/account/avatar/00/20/99/5e/33481a74.jpg","nickname":"Lemon","note":"","ucode":"E52BB361B69825","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":330668,"discussion_content":"æ–‡ç« çš„è¡¨è¿°åº”è¯¥æ˜¯æœ‰æ­§ä¹‰çš„ï¼Œæˆ‘çœ‹äº†æºç ï¼Œæè¿°çš„æ˜¯éšæœºæŠ½æ ·é€‰å‡ºã€æœ€å¤šNä¸ªæ•°æ®ã€‘ï¼Œåªè¦æ•°æ®æ¯”ã€å¾…æ·˜æ±°æ•°æ®æ±  evictionPoolEntryã€‘ä¸­çš„ã€ä»»æ„ä¸€æ¡ã€‘æ•°æ®çš„ lru å°ï¼Œåˆ™å°†è¯¥æ•°æ®å¡«å……è‡³ ã€å¾…æ·˜æ±°æ•°æ®æ± ã€‘ï¼›Keys with idle time smaller than one of the current keys are added.  å¯ä»¥æŸ¥çœ‹è¿™ç¯‡æ–‡ç« ï¼šhttps://zxiaofan.blog.csdn.net/article/details/110357096","likes_number":9,"is_delete":false,"is_hidden":false,"ctime":1606663676,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":312870,"ip_address":""},"score":330668,"extra":""},{"author":{"id":2314790,"avatar":"","nickname":"Geek_9a62f5","note":"","ucode":"F1D5410CE20FE8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1365206,"avatar":"https://static001.geekbang.org/account/avatar/00/14/d4/d6/1d4543ac.jpg","nickname":"äº‘æµ·","note":"","ucode":"0C6CA0BE58EA21","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":374799,"discussion_content":"æˆ‘çœ‹è¿‡äº†è¿™ç¯‡æ–‡ç« ï¼Œä½†ä»ç„¶å­˜åœ¨ä¸€ä¸ªç–‘é—®ã€‚\nå½“redisçš„å†…å­˜ä¸­æ²¡æœ‰æ¯”ã€å¾…æ·˜æ±°æ•°æ®æ± ã€‘ä¸­çš„æ•°æ®çš„lruå°çš„æ•°æ®æ—¶rediså¦‚ä½•å¤„ç†ï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1621350418,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":330668,"ip_address":""},"score":374799,"extra":""}]}]},{"had_liked":false,"id":289199,"user_name":"å­¦è€Œä¸æ€åˆ™ç½”","can_delete":false,"product_type":"c1","uid":1091673,"ip_address":"","ucode":"3EAF4C37386F0E","user_header":"https://static001.geekbang.org/account/avatar/00/10/a8/59/e5a7762e.jpg","comment_is_top":false,"comment_ctime":1618913511,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"10208848103","product_id":100056701,"comment_content":"ç¼“å­˜æ·˜æ±°è¿™é‡Œæœ‰ä¸ªç–‘é—®ï¼Œåšåˆ†å¸ƒå¼é”çš„lock_keyä¸€èˆ¬éƒ½ä¼šå¸¦ä¸Šexpireï¼Œè¿™ä¸ªæ—¶å€™lock_keyå¦‚æœè¢«æ·˜æ±°äº†ä¸æ˜¯ä¼šå¯¼è‡´é”å¤±æ•ˆå—ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1014665,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7b/89/34f2cbcc.jpg","nickname":"æ¨å®‡","note":"","ucode":"EB74DF6E269F03","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":388314,"discussion_content":"è¿™æ˜¯åˆ°äº†å±æ€¥æ—¶åˆ»å§ï¼Œåªèƒ½ä¸¢è½¦ä¿å¸…","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628691899,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":252794,"user_name":"å°å–µå–µ","can_delete":false,"product_type":"c1","uid":1062444,"ip_address":"","ucode":"FDBBB2A59DB8B6","user_header":"https://static001.geekbang.org/account/avatar/00/10/36/2c/8bd4be3a.jpg","comment_is_top":false,"comment_ctime":1602489416,"is_pvip":false,"discussion_count":4,"race_medal":0,"score":"10192424008","product_id":100056701,"comment_content":"è¯·æ•™ä¸‹è€å¸ˆï¼š<br>1ã€volatile-ttlè¿™ä¸ªå…¨ç§°æ˜¯å•¥ï¼Ÿ<br>2ã€å¹²å‡€æ•°æ®æ˜¯ç¼“å­˜é‡Œé¢çš„æ•°æ®å’Œæ•°æ®åº“é‡Œé¢æ˜¯ä¸€è‡´çš„ï¼Œæ—¢ç„¶ä¸€è‡´ï¼Œä¸ºä»€ä¹ˆè¦åˆ é™¤å‘¢ï¼Ÿ<br>3ã€è„æ•°æ®ä¸ºä»€ä¹ˆè¦å†™å›åˆ°æ•°æ®åº“å‘¢ï¼Ÿéš¾é“æ˜¯å…ˆæ›´æ–°cacheï¼Œç„¶åå»æ›´æ–°æ•°æ®åº“å—ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1035064,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/cb/38/4c9cfdf4.jpg","nickname":"è°¢å°è·¯","note":"","ucode":"C9FE2EB10DC105","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":311836,"discussion_content":"1. ttl å‘½ä»¤è¡¨ç¤ºç”Ÿæˆæ—¶é—´ï¼Œå¯¹è®¾ç½®è¿‡æœŸæ—¶é—´çš„ key çš„æ“ä½œï¼Œæ‰€ä»¥ volatile-ttl ç­–ç•¥è¡¨ç¤ºå°±æ˜¯æ ¹æ®è¿‡æœŸæ—¶é—´ç­–ç•¥è¿›è¡Œæ·˜æ±°ã€‚\n\n2. è¿™ä¸ªåˆ é™¤çš„å‰ææ˜¯è¿™ä¸ªæ•°æ®éœ€è¦è¢«æ·˜æ±°äº†ï¼Œredis å†…å­˜æ”¾ä¸ä¸‹äº†ï¼Œåˆ é™¤æ‰\n\n3. redis ç”¨ä½œç¼“å­˜ï¼Œæœ€éœ€è¦è§£å†³çš„é—®é¢˜æ˜¯ redis å’Œ æ•°æ®åº“ä¸­æ•°æ®ä¸€è‡´æ€§çš„é—®é¢˜ï¼Œè„æ•°æ®ï¼Œä¹Ÿå°±ä¸ä¸€è‡´ã€‚ç¼“å­˜åˆåˆ†åªè¯»ç¼“å­˜å’Œè¯»å†™ç¼“å­˜ã€‚è¯»å†™ç¼“å­˜æ—¶å…ˆè¯» redisï¼Œå‘ç°æ²¡æœ‰ï¼Œé‚£å°±æ“ä½œæ•°æ®åº“ï¼Œå†æŠŠæ•°æ®åº“ä¸­æŸ¥è¯¢åˆ°çš„æ•°æ®å†™å…¥ redisï¼Œä¸‹æ¬¡æ“ä½œå°±ç›´æ¥æ›´æ–° redisã€‚åŒæ—¶å†™å…¥æ•°æ®åº“ï¼Œä¿è¯æ•°æ®ä¸€è‡´ã€‚æ›´æ–° redis å’Œ æ“ä½œæ•°æ®ä¸æ˜¯åŸå­çš„åŠ¨ä½œï¼Œæœ‰å¯èƒ½æ“ä½œ redis ç»“æŸäº†ï¼Œä½†æ“ä½œæ•°æ®æ²¡å†™å…¥æˆåŠŸï¼Œé‚£å°±æœ‰è„æ•°æ®ï¼Œç°åœ¨æ·˜æ±°ç­–ç•¥è¦åˆ é™¤è¿™ä¸ªæ•°æ®ï¼Œå¯ä¸å¾—ç¡®ä¿å†™å…¥æ•°æ®åº“ï¼Œç»´æŠ¤ä¸€è‡´æ€§å˜›ã€‚\n","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1602498944,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1388092,"avatar":"https://static001.geekbang.org/account/avatar/00/15/2e/3c/eae43616.jpg","nickname":"sid","note":"","ucode":"3D1F9169A19D29","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":312250,"discussion_content":"ttl = time to live","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1602640746,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1116608,"avatar":"https://static001.geekbang.org/account/avatar/00/11/09/c0/3119a4f6.jpg","nickname":"é»„æ ‹","note":"","ucode":"6BB8EC43EB87A9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":311829,"discussion_content":"è„æ•°æ®æ€ä¹ˆå›å†™æ•°æ®åº“?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602496079,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1675882,"avatar":"https://static001.geekbang.org/account/avatar/00/19/92/6a/dd37a054.jpg","nickname":"å¼ y .","note":"","ucode":"85918469492F4C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1116608,"avatar":"https://static001.geekbang.org/account/avatar/00/11/09/c0/3119a4f6.jpg","nickname":"é»„æ ‹","note":"","ucode":"6BB8EC43EB87A9","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":411464,"discussion_content":"Rediså®ç°ä¸äº†ï¼Œå¼‚æ­¥å†™å›ç­–ç•¥Redisæ ¹æœ¬å®ç°ä¸äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635933742,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":311829,"ip_address":""},"score":411464,"extra":""}]}]},{"had_liked":false,"id":327596,"user_name":"æ ‘å¿ƒ","can_delete":false,"product_type":"c1","uid":1589523,"ip_address":"","ucode":"6C329F0FF798B9","user_header":"https://static001.geekbang.org/account/avatar/00/18/41/13/ab14ad25.jpg","comment_is_top":false,"comment_ctime":1640184850,"is_pvip":true,"discussion_count":0,"race_medal":1,"score":"5935152146","product_id":100056701,"comment_content":"<br>ç¼“å­˜å‰ä¸¤èŠ‚è¯¾ç¬¬23å’Œ24èŠ‚æ¯”è¾ƒç®€å•ï¼Œåªè¦è®¤çœŸè¯»å°±èƒ½ç†è§£ã€‚å°±æ˜¯æ¦‚å¿µæ¯”è¾ƒå¤šï¼Œåˆå­¦ä¼šè§‰å¾—æœ‰ç‚¹ç»•ã€‚<br>rediså¯ä»¥æ”¯æŒåªè¯»ç¼“å­˜å’Œè¯»å†™ç¼“å­˜ã€‚ä½œä¸ºè¯»å†™ç¼“å­˜æ—¶ï¼Œåªèƒ½æ”¯æŒåŒæ­¥ç›´å†™ç­–ç•¥ï¼ˆå¦‚æœè¦æ”¯æŒå¼‚æ­¥å†™å›éœ€è¦ä¿®æ”¹redisï¼‰ã€‚<br>å“ªç§æ¨¡å¼å–å†³äºåº”ç”¨æ–¹çš„è®¾è®¡ã€‚","like_count":1},{"had_liked":false,"id":307204,"user_name":"å®™æ–¯","can_delete":false,"product_type":"c1","uid":2041396,"ip_address":"","ucode":"80DF36BAD298AD","user_header":"https://static001.geekbang.org/account/avatar/00/1f/26/34/891dd45b.jpg","comment_is_top":false,"comment_ctime":1628933554,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5923900850","product_id":100056701,"comment_content":"redis lruåœ¨æ•°æ®æ·˜æ±°æ—¶å­˜åœ¨æ¯æ¬¡éƒ½ä¼šé€‰æ‹©æ—¶é—´æˆ³æœ€å°çš„å…ƒç´ æ”¾åœ¨å¾…æ·˜æ±°é›†åˆä¸­ï¼Œè¿™ä¸ªæ¯”è¾ƒæ„Ÿè§‰æŒºè€—æ—¶ï¼Œä¸ºä»€ä¹ˆè¿˜é‡‡ç”¨è¿™ç§æ–¹å¼å‘¢ï¼Ÿ","like_count":1},{"had_liked":false,"id":288535,"user_name":"è€Œç«‹æ–‹","can_delete":false,"product_type":"c1","uid":1087258,"ip_address":"","ucode":"5FED6E9E148195","user_header":"https://static001.geekbang.org/account/avatar/00/10/97/1a/389eab84.jpg","comment_is_top":false,"comment_ctime":1618533145,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5913500441","product_id":100056701,"comment_content":"æœ‰å‡ ä¸ªé—®é¢˜è®°å½•ä¸€ä¸‹:<br>0ï¼Œé‡å°¾æ²¡å’‹ç†è§£<br>1ï¼Œç¬¬ä¸€æ¬¡éšæœºæ˜¯ä¸ºäº†èŠ‚çœæ—¶é—´ï¼Œä¹Ÿæ˜¯æŒ‰éœ€æ·˜æ±°lruæœ€å°çš„æ•°æ®<br>2ï¼Œ100ä¸ªæ•°æ®lruæ˜¯ä¼šå˜åŒ–çš„ï¼Œè€Œä¸”æ¯æ¬¡è¿›å…¥åˆ°è¿™100ä¸ªæ•°ä¸­çš„æ•°æ®ä¹Ÿéƒ½æ˜¯lruè¾ƒå°çš„ï¼Œè€Œä¸æ˜¯æœ€å°çš„ï¼Œè¿™æ ·çš„è¯lruçš„æœ€è¿‘æœ€å°‘æœªä½¿ç”¨æ˜¯ä¸æ˜¯ä¹Ÿå¯ä»¥ç†è§£ä¸ºæ˜¯ç›¸å¯¹æ„ä¹‰ä¸Šçš„lruäº†<br>3ï¼Œæ¯æ¬¡è¾ƒå°lruæ•°æ®è¿›å»100ä¸ªæ•°ï¼Œå¦‚æœ100ä¸ªæ•°å·²ç»æ»¡äº†ï¼Œé‚£å†è¿›å»å°±ç›´æ¥è¢«æ·˜æ±°ï¼Œè¿›ä¸è¿›è¿˜æœ‰å•¥æ„ä¹‰ï¼Ÿ","like_count":1},{"had_liked":false,"id":356611,"user_name":"Geek_c4e8a7","can_delete":false,"product_type":"c1","uid":2718664,"ip_address":"å¹¿ä¸œ","ucode":"B8B7F6C3D77360","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/BD5O3DV5ZDuL8tGIVicPB99tLjE1MyKoudWjI0OGhUCTPYQ4KWpgC7BmbFwBJ7lK8nMaSicWDbtUYBBsfLpZwXjQ/132","comment_is_top":false,"comment_ctime":1662449271,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1662449271","product_id":100056701,"comment_content":"ä¹‹å‰é¢è¯•åªçŸ¥é“7ç§å†…å­˜æ·˜æ±°ç­–ç•¥ ä½†ä¸çŸ¥é“æ€ä¹ˆç”¨ å—æ•™äº†","like_count":0},{"had_liked":false,"id":355105,"user_name":"è´ºå­","can_delete":false,"product_type":"c1","uid":2076283,"ip_address":"åŒ—äº¬","ucode":"A64DC9D9CF7CCD","user_header":"https://static001.geekbang.org/account/avatar/00/1f/ae/7b/47200692.jpg","comment_is_top":false,"comment_ctime":1661084026,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1661084026","product_id":100056701,"comment_content":"è€å¸ˆå¥½ï¼Œredisçš„lruç®—æ³•ç»è¿‡ä¼˜åŒ–åï¼Œæ˜¯ä¸æ˜¯ä¼šå¯¼è‡´ä¸å‡†ç¡®å§ï¼Œå› ä¸ºç¬¬ä¸€æ¬¡æ˜¯éšæœºé€‰æ‹©nä¸ªkeyï¼Œæ‰€ä»¥å¯èƒ½ä¼šç¬¬ä¸€æ¬¡é€‰æ‹©çš„ä¸åˆé€‚ï¼Œå¯¼è‡´åé¢é€‰æ‹©çš„ä¹Ÿä¸åˆé€‚ï¼Œä½†æ˜¯å¥½åƒå®ä¾‹è¿è¡Œä¸€æ®µæ—¶é—´å°±ä¼šè¶Šæ¥è¶Šå‡†ç¡®ï¼Œå¯¹å§ï¼Ÿï¼Œå†ä¸€ä¸ªé—®é¢˜å¦‚æœæ˜¯volit-lruçš„è¯ï¼Œé‚£ä¹ˆä»–æ˜¯ä¸€å¼€å§‹å°±ç»´æŠ¤ä¸€ä¸ªé›†åˆï¼Ÿè¿˜æ˜¯å½“ç¬¬ä¸€æ¬¡éœ€è¦æ·˜æ±°æ•°æ®çš„æ—¶å€™æ‰å¼€å§‹ç»´æŠ¤è¿™ä¸ªé›†åˆå‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":353569,"user_name":"Jackson","can_delete":false,"product_type":"c1","uid":2739544,"ip_address":"å¹¿ä¸œ","ucode":"0012FFEA2B4620","user_header":"https://static001.geekbang.org/account/avatar/00/29/cd/58/06a8ce36.jpg","comment_is_top":false,"comment_ctime":1659575916,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"1659575916","product_id":100056701,"comment_content":"LFUå‘¢è€å¸ˆ","like_count":0,"discussions":[{"author":{"id":1225224,"avatar":"https://static001.geekbang.org/account/avatar/00/12/b2/08/92f42622.jpg","nickname":"å°”å†¬æ©™","note":"","ucode":"0B013A49BC18DA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":584982,"discussion_content":"åé¢ä¼šè®²","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661255796,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æ¹–å—"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":350616,"user_name":"å¡å°”","can_delete":false,"product_type":"c1","uid":2887573,"ip_address":"","ucode":"B3F5506B938986","user_header":"https://static001.geekbang.org/account/avatar/00/2c/0f/95/275d534e.jpg","comment_is_top":false,"comment_ctime":1657046412,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1657046412","product_id":100056701,"comment_content":"æˆ‘æœ‰ä¸ªé—®é¢˜ï¼Œå‰é¢æœ‰è®²åˆ°ï¼Œredisä½¿ç”¨å†…å­˜è¿‡å¤šï¼Œä¼šå¯¼è‡´ç³»ç»Ÿè§¦å‘swapæœºåˆ¶ã€‚é‚£è¿™ä¸ªrediså†…å­˜æ·˜æ±°æ˜¯ä¼šåŒæ­¥å‘ç”Ÿçš„å—<br>","like_count":0},{"had_liked":false,"id":329850,"user_name":"EveryDayIsNew","can_delete":false,"product_type":"c1","uid":1316926,"ip_address":"","ucode":"776B81EF6830FA","user_header":"https://static001.geekbang.org/account/avatar/00/14/18/3e/f8632713.jpg","comment_is_top":false,"comment_ctime":1641594906,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1641594906","product_id":100056701,"comment_content":"è€å¸ˆå¥½ï¼Œé—®ä¸‹1.è¿™ä¸ªå†…å­˜æ»¡äº†ï¼Œ6.0ç‰ˆæœ¬ï¼Œä¸é‡‡ç”¨é»˜è®¤ä¸æ·˜æ±°ç­–ç•¥çš„è¯ï¼Œæ˜¯å¦éœ€è¦è®¾ç½®ä¸Šé¢çš„å…¶ä»–ä¸ƒç§ç­–ç•¥ï¼Œæœ‰ä»€ä¹ˆæœ€ä½³å®è·µå—ï¼Ÿ 2.è¿™ä¸ªå†…å­˜æ»¡äº†ï¼Œå¼€å¯æ·˜æ±°ç­–ç•¥çš„è¯ï¼Œè¿™ä¸ªæ·˜æ±°æ•ˆç‡å¦‚ä½•å‘¢ï¼Œè·Ÿé»˜è®¤çš„æƒ°æ€§åˆ é™¤å’Œå®šæ—¶æ·˜æ±°å…³ç³»æ˜¯ä»€ä¹ˆå‘¢","like_count":0},{"had_liked":false,"id":307787,"user_name":"Heaven","can_delete":false,"product_type":"c1","uid":1694207,"ip_address":"","ucode":"FA33FBCC66C911","user_header":"https://static001.geekbang.org/account/avatar/00/19/d9/ff/b23018a6.jpg","comment_is_top":false,"comment_ctime":1629255952,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1629255952","product_id":100056701,"comment_content":"æ˜¯åªè¯»ç¼“å­˜è¿˜æ˜¯è¯»å†™ç¼“å­˜å–å†³äºå®é™…åº”ç”¨ä¸­çš„ä½¿ç”¨æ–¹å¼,æ²¡æœ‰ä»€ä¹ˆå›ºå®šä¹‹è¯´","like_count":0},{"had_liked":false,"id":302057,"user_name":"æ¢¦ç¼˜","can_delete":false,"product_type":"c1","uid":1433672,"ip_address":"","ucode":"318FD8C01023F7","user_header":"https://static001.geekbang.org/account/avatar/00/15/e0/48/81d420d4.jpg","comment_is_top":false,"comment_ctime":1626057676,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1626057676","product_id":100056701,"comment_content":"åœ¨è¯»å†™ç¼“å­˜-å¼‚æ­¥å†™å›ç­–ç•¥ä¸­ï¼Œå¦‚ä½•æ£€æµ‹åˆ°æ•°æ®è¦è¢«åˆ é™¤çš„æ—¶æœºå»æ‰§è¡Œå†™å›åç«¯æ•°æ®åº“å‘¢ï¼Ÿï¼Ÿ","like_count":0},{"had_liked":false,"id":299895,"user_name":"Just Do IT","can_delete":false,"product_type":"c1","uid":1192724,"ip_address":"","ucode":"1EAD92510FA7BE","user_header":"https://static001.geekbang.org/account/avatar/00/12/33/14/78104f1f.jpg","comment_is_top":false,"comment_ctime":1624895748,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1624895748","product_id":100056701,"comment_content":"æ„Ÿè§‰è¿™å¥è¯æœ‰é—®é¢˜ï¼Œå¦‚æœæ˜¯è¿™æ ·å¾ˆå®¹æ˜“å‡ºç°æç«¯æƒ…å†µï¼Œæ¯”å¦‚éšæœºé€‰å‡ºNä¸ªæ•°æ®ï¼Œlruæ˜¯æ‰€æœ‰æ•°æ®ä¸­æœ€å°çš„nä¸ªæ•°æ®ï¼Œè¿™æ ·çš„è¯ï¼Œåœ¨è¿›è¡Œç¬¬äºŒæ¬¡é€‰æ‹©çš„æ—¶å€™ï¼Œredisçš„æ•°æ®çš„lruéƒ½æ¯”ç¬¬ä¸€æ¬¡é€‰å‡ºçš„æ•°æ®å¤§ï¼Œä¹Ÿå°±æ˜¯æ— æ³•è¿›å…¥å€™é€‰é›†åˆï¼Œåªæœ‰ç­‰ç¬¬ä¸€æ¬¡åé™¢é›†åˆå…¨éƒ¨æ·˜æ±°äº†æ‰è¡Œï¼<br><br><br>Redis åœ¨å†³å®šæ·˜æ±°çš„æ•°æ®æ—¶ï¼Œç¬¬ä¸€æ¬¡ä¼šéšæœºé€‰å‡º N ä¸ªæ•°æ®ï¼ŒæŠŠå®ƒä»¬ä½œä¸ºä¸€ä¸ªå€™é€‰é›†åˆã€‚æ¥ä¸‹æ¥ï¼ŒRedis ä¼šæ¯”è¾ƒè¿™ N ä¸ªæ•°æ®çš„ lru å­—æ®µï¼ŒæŠŠ lru å­—æ®µå€¼æœ€å°çš„æ•°æ®ä»ç¼“å­˜ä¸­æ·˜æ±°å‡ºå»ã€‚","like_count":0},{"had_liked":false,"id":295926,"user_name":"æ‚Ÿç©ºèŠæ¶æ„","can_delete":false,"product_type":"c1","uid":1123163,"ip_address":"","ucode":"C2F482A0CF8AF1","user_header":"https://static001.geekbang.org/account/avatar/00/11/23/5b/983408b9.jpg","comment_is_top":false,"comment_ctime":1622646639,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1622646639","product_id":100056701,"comment_content":"çœ‹åˆ°è¿™é‡Œï¼šæ¯”å¦‚ç½®é¡¶æ–°é—»ã€ç½®é¡¶è§†é¢‘ï¼Œé‚£ä¹ˆï¼Œå¯ä»¥ä½¿ç”¨ volatile-lru ç­–ç•¥ï¼ŒåŒæ—¶ä¸ç»™è¿™äº›ç½®é¡¶æ•°æ®è®¾ç½®è¿‡æœŸæ—¶é—´ã€‚<br>æˆ‘ä¹Ÿæœ‰è¿™ä¸ªç–‘æƒ‘ï¼Œè¯„è®ºåŒºè¿›è¡Œäº†è§£ç­”ï¼šå¯¹ç½®é¡¶æ•°æ®ä¸è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œå°±ä¸ä¼šè¢«volatile-lruæ·˜æ±°ï¼Œå¯ä»¥ä¸€ç›´ç½®é¡¶ã€‚è€Œå…¶ä»–éç½®é¡¶æ•°æ®å¯ä»¥æ­£å¸¸è¢«volatile-lruæ·˜æ±°æ‰ã€‚","like_count":0},{"had_liked":false,"id":293511,"user_name":"Geek_263062","can_delete":false,"product_type":"c1","uid":1295599,"ip_address":"","ucode":"B6721FA1309F0F","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epW36dbuLUOFlqDqjIte11mtWWRxG8npdDLnDYtcWhFUxd56LcFhaobcIs5GC34RcnvS5Vy9Lv2JA/132","comment_is_top":false,"comment_ctime":1621414006,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1621414006","product_id":100056701,"comment_content":"â€œå¦‚æœä¸€ä¸ªé”®å€¼å¯¹è¢«åˆ é™¤ç­–ç•¥é€‰ä¸­äº†ï¼Œå³ä½¿å®ƒçš„è¿‡æœŸæ—¶é—´è¿˜æ²¡åˆ°ï¼Œä¹Ÿéœ€è¦è¢«åˆ é™¤ã€‚å½“ç„¶ï¼Œå¦‚æœå®ƒçš„è¿‡æœŸæ—¶é—´åˆ°äº†ä½†æœªè¢«ç­–ç•¥é€‰ä¸­ï¼ŒåŒæ ·ä¹Ÿä¼šè¢«åˆ é™¤ã€‚â€ååŠå¥ï¼Œæ˜¯é™¤äº†noevictionä¸è®ºé€‰æ‹©å“ªç§åˆ é™¤ç­–ç•¥ï¼Œè¿‡æœŸå¥éƒ½ä¼šè¢«åˆ é™¤å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":293361,"user_name":"Geek_9a62f5","can_delete":false,"product_type":"c1","uid":2314790,"ip_address":"","ucode":"F1D5410CE20FE8","user_header":"","comment_is_top":false,"comment_ctime":1621350664,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1621350664","product_id":100056701,"comment_content":"è€å¸ˆï¼Œåœ¨è®¾ç½®ä¸ºLRUçš„æ·˜æ±°ç­–ç•¥æ—¶ï¼Œå½“rediså†…å­˜ä¸­æ²¡æœ‰æ¯”ã€å¾…æ·˜æ±°æ•°æ®æ± ã€‘ä¸­çš„æ•°æ®çš„lruå°æ—¶ï¼Œrediså¦‚ä½•æ·˜æ±°æ•°æ®å‘¢ï¼Ÿ<br>æ˜¯å¦ä¼šç›´æ¥æ·˜æ±°æœ€å°çš„æ•°æ®ï¼ŒçŸ¥é“å°†ã€å¾…æ·˜æ±°æ•°æ®æ± ã€‘ä¸­çš„æ•°æ®å…¨éƒ¨æ·˜æ±°ï¼Œç„¶åé‡æ–°éšæœºé€‰æ‹©&lt;=maxmemory-samplesçš„æ•°æ®æ•°æ®æ”¾å…¥ã€å¾…æ·˜æ±°æ•°æ®æ± ã€‘è¿›è¡Œæ–°ä¸€è½®LRUçš„æ“ä½œï¼Ÿ","like_count":0},{"had_liked":false,"id":293244,"user_name":"é˜¿æ°´","can_delete":false,"product_type":"c1","uid":2598202,"ip_address":"","ucode":"C73D28EF3F33EB","user_header":"","comment_is_top":false,"comment_ctime":1621303259,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1621303259","product_id":100056701,"comment_content":"åœ¨è®¾ç½®æœ€å¤§ç¼“å­˜ç©ºé—´çš„æ—¶å€™,ä½¿ç”¨CONFIG SET maxmemory 4gb è®¾ç½®æœ€å¤§ç¼“å­˜ç©ºé—´æ˜¯4gbï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªç–‘é—®ï¼Œåœ¨è®¾ç½®æœ€å¤§ç¼“å­˜ç©ºé—´çš„æ—¶å€™ï¼Œæˆ‘æ˜¯æ€ä¹ˆçŸ¥é“æœ€å¤§ç¼“å­˜ç©ºé—´æœ€å¤§å¯ä»¥è®¾ç½®æˆå¤šå¤§å‘¢ï¼Ÿä¾‹å¦‚:CONFIG SET maxmemory 20gbæˆ–è€…100gbå‘¢ è¿™æ ·çš„è®¾ç½®æ˜¯ä¸æ˜¯å°±æ²¡æœ‰æ„ä¹‰äº†ï¼›æˆ‘æ€ä¹ˆæŸ¥çœ‹æˆ‘å¯ä»¥è®¾ç½®çš„æœ€å¤§ç¼“å­˜ç©ºé—´","like_count":0},{"had_liked":false,"id":291644,"user_name":"æœºæ™ºçš„å°ä¿Šä¿Š","can_delete":false,"product_type":"c1","uid":1342429,"ip_address":"","ucode":"16DFBC3A9E60AD","user_header":"https://static001.geekbang.org/account/avatar/00/14/7b/dd/f33a0855.jpg","comment_is_top":false,"comment_ctime":1620397386,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1620397386","product_id":100056701,"comment_content":"LRUæ˜¯æœ€è¿‘æœ€ä¹…æœªä½¿ç”¨ç®—æ³•å§","like_count":0},{"had_liked":false,"id":290335,"user_name":"åƒé¥­ç¡è§‰æ‰“é…±æ²¹","can_delete":false,"product_type":"c1","uid":1071668,"ip_address":"","ucode":"95EC98C2B5045B","user_header":"https://static001.geekbang.org/account/avatar/00/10/5a/34/4cbadca6.jpg","comment_is_top":false,"comment_ctime":1619507930,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1619507930","product_id":100056701,"comment_content":"volatile-lfu ä½¿ç”¨äº† LFU ç®—æ³•ï¼Œæˆ‘ä¼šåœ¨ç¬¬ 27 è®²ä¸­å…·ä½“è§£é‡Šï¼Œç°åœ¨ä½ åªéœ€è¦çŸ¥é“ï¼Œå®ƒæ˜¯åœ¨ LRU ç®—æ³•çš„åŸºç¡€ä¸Šï¼ŒåŒæ—¶è€ƒè™‘äº†æ•°æ®çš„è®¿é—®æ—¶æ•ˆæ€§å’Œæ•°æ®çš„è®¿é—®æ¬¡æ•°ï¼Œå¯ä»¥çœ‹ä½œæ˜¯å¯¹æ·˜æ±°ç­–ç•¥çš„ä¼˜åŒ–ã€‚<br>----LFUæ˜¯åœ¨LRUçš„åŸºç¡€ä¸Šå¯¹æ·˜æ±°ç­–ç•¥çš„ä¼˜åŒ–ï¼Ÿè¿™ä¸ªæ²¡è¯´åä¹ˆï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1014665,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7b/89/34f2cbcc.jpg","nickname":"æ¨å®‡","note":"","ucode":"EB74DF6E269F03","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":388313,"discussion_content":"æ²¡è¯´åã€‚LRUå¯èƒ½å¯¼è‡´è¿™ç§æƒ…å†µï¼šä¸€åå­¦ç”Ÿæœ€è¿‘ä¸€æ¬¡è€ƒäº†100åˆ†ï¼ˆä¹‹å‰éƒ½æ˜¯80åˆ†ï¼‰ï¼Œç»“æœæŠŠæœ¬æ¬¡è€ƒäº†99åˆ†ä½†ä¹‹å‰éƒ½æ˜¯100åˆ†çš„å­¦ç”Ÿæ·˜æ±°äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628691806,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":290301,"user_name":"æ²¹èœèŠ±","can_delete":false,"product_type":"c1","uid":1238478,"ip_address":"","ucode":"E9901BBD9952B7","user_header":"https://static001.geekbang.org/account/avatar/00/12/e5/ce/2978a69a.jpg","comment_is_top":false,"comment_ctime":1619491576,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"1619491576","product_id":100056701,"comment_content":"ç¼“å­˜æ»¡äº†ï¼Œè¿›è¡Œç­–ç•¥åˆ é™¤çš„æ—¶å€™ï¼Œä¼šä¸ä¼šå½±å“redisçš„æ€§èƒ½å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1296255,"avatar":"https://static001.geekbang.org/account/avatar/00/13/c7/7f/5d975908.jpg","nickname":"æ¨","note":"","ucode":"B434931741D0CE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":534827,"discussion_content":"æœ‰å¯èƒ½çš„ï¼Œå¦‚æœæœ‰å¤§é‡æ•°æ®åŒä¸€æ—¶é—´è¿‡æœŸä¼šé˜»å¡ä¸»çº¿ç¨‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638283872,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":285641,"user_name":"escray","can_delete":false,"product_type":"c1","uid":1020525,"ip_address":"","ucode":"1F4204930E47C4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/92/6d/becd841a.jpg","comment_is_top":false,"comment_ctime":1616935818,"is_pvip":true,"discussion_count":0,"race_medal":2,"score":"1616935818","product_id":100056701,"comment_content":"å¤§æ¦‚ 20 å¹´å‰ï¼Œæœ‰è€å¸ˆè¯´ä»¥åçš„è®¡ç®—æœºå†…å­˜ä¼šè¶…è¿‡ 1 GBï¼Œæ¸¸æˆå¯ä»¥å®Œå…¨åœ¨å†…å­˜ä¸­è¿è¡Œï¼Œç¾å¥½çš„æœªæ¥ã€‚ç°åœ¨æ‰‹æœºçš„å†…å­˜å·²ç»è¶…è¿‡ 8 GB äº†ï¼Œä½†æ˜¯æ¸¸æˆå’Œåº”ç”¨ä¹Ÿè†¨èƒ€äº†ã€‚<br><br>å¦‚æœä¸å·®é’±ï¼Œå½“ç„¶æ˜¯å¤§é‡é‡‡ç”¨ SSD åŠ å†…å­˜ã€‚<br><br>è€ƒè™‘æ€§ä»·æ¯”ï¼Œæ ¹æ®ä¸šåŠ¡éœ€è¦ï¼Œç»“åˆâ€œäºŒå…«åŸåˆ™â€å’Œâ€œé‡å°¾åŸåˆ™â€ï¼Œç¼“å­˜è®¾ç½®ä¸ºæ€»æ•°æ®é‡çš„ 15% åˆ° 30%ã€‚<br><br>æ›¿æ¢ç­–ç•¥è®²çš„æ¯”è¾ƒç®€å•ï¼Œåªæ¦‚è¿°äº† LRU ç®—æ³•ï¼ŒLFU åº”è¯¥æ˜¯ Latest Frequent Used ï¼ŸæœŸå¾…è¯¾ä»£è¡¨ç»™ç§‘æ™®ä¸€ä¸‹ã€‚<br><br>å¦å¤–ï¼ŒRedis å…¶å®ä¸ç®¡è„æ•°æ®å†™å›æ•°æ®åº“çš„äº‹æƒ…ã€‚<br><br>æ›¿æ¢ç­–ç•¥çš„é€‰æ‹©ä¸€èˆ¬æ¥è¯´æ˜¯ volatile-lruã€allkeys-lruã€allkeys-randomï¼Œå‰ä¸¤ä¸ªæ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä½†ç¬¬ä¸‰ä¸ªä¸ºä»€ä¹ˆä¸æ˜¯ volatile-randomï¼Ÿ<br><br>å¯¹äºè¯¾åé¢˜ï¼ŒRedis ç¼“å­˜å¯¹åº” åªè¯»ç¼“å­˜ æ¨¡å¼ã€‚<br><br>çœ‹äº†è¯¾åè€å¸ˆçš„å›å¤ï¼Œæ‰æ³¨æ„åˆ°ç½®é¡¶æ•°æ®çš„ volatile-lru ç­–ç•¥ + ä¸è®¾ç½®è¿‡æœŸæ—¶é—´çš„å·§å¦™ç”¨æ³•ã€‚<br><br>ä¹‹å‰å¥½åƒæåˆ°ï¼Œæœ€å¥½æ˜¯ç»™æ‰€æœ‰çš„ç¼“å­˜æ•°æ®éƒ½è®¾ç½®è¿‡æœŸæ—¶é—´ã€‚","like_count":0},{"had_liked":false,"id":284818,"user_name":"å®ˆæœ›è€…","can_delete":false,"product_type":"c1","uid":1623487,"ip_address":"","ucode":"DEE375A5F2D57A","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/sPORo6cN3GSVxjHj9nqSAPn7KG4wtSTqNUommjNndpf8qd7bHKHquuldXZfxD5nF1ldy4LeoAQNwSsOgcmWG9w/132","comment_is_top":false,"comment_ctime":1616485904,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1616485904","product_id":100056701,"comment_content":"è¿™èŠ‚è¯¾çš„å†…å®¹ä¸ç¬¬20è¯¾è¯´çš„ç©ºé—´ç¢ç‰‡è‡ªåŠ¨æ¸…ç†å¥½åƒéƒ½å¯ä»¥ç¼“è§£å†…å­˜ç©ºé—´æ»¡çš„é—®é¢˜å§?é™¤äº†è¿™ä¸¤ä¸ªæˆ‘è¿˜èƒ½æƒ³åˆ°çš„æœ‰: åˆ é™¤keyç©ºé—´é‡Šæ”¾ï¼Œè¿‡æœŸkeyåˆ é™¤ï¼Œå¥½åƒè¿˜æœ‰swapæœºåˆ¶ã€‚è¿™äº›æœºåˆ¶å’Œç­–ç•¥ä¹‹é—´çš„è”ç³»æ˜¯æ€æ ·çš„å‘¢?","like_count":0},{"had_liked":false,"id":284285,"user_name":"èŠ‹å¤´","can_delete":false,"product_type":"c1","uid":1227492,"ip_address":"","ucode":"A9C875548E4EE5","user_header":"https://static001.geekbang.org/account/avatar/00/12/ba/e4/6df89add.jpg","comment_is_top":false,"comment_ctime":1616150033,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1616150033","product_id":100056701,"comment_content":"æ€»ç»“ä¸€ä¸‹ï¼šæœ€æ–°ç‰ˆæœ¬æœ‰å…«ç§ç¼“å­˜æ·˜æ±°ç­–ç•¥ï¼Œ<br>volatile-lruã€volatile-random volatile-flu volatile-ttl <br>allkeys-lru allkeys-random all keys-fly<br>è¿˜æœ‰ä¸€ç§æ˜¯ä¸æ·˜æ±°<br><br><br>","like_count":0},{"had_liked":false,"id":282427,"user_name":"Vivian","can_delete":false,"product_type":"c1","uid":2366473,"ip_address":"","ucode":"1901ACEA677BA7","user_header":"https://static001.geekbang.org/account/avatar/00/24/1c/09/bc1a01cc.jpg","comment_is_top":false,"comment_ctime":1615249876,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1615249876","product_id":100056701,"comment_content":"è¢«æ·˜æ±°çš„æ•°æ®æ˜¯æŒ‡ä»å†…å­˜ä¸­åˆ é™¤ä¹ˆï¼Ÿä½†æ˜¯ç£ç›˜é‡Œçš„æ–‡ä»¶è¿˜å­˜åœ¨ï¼Œè¿˜æ˜¯çœŸçš„å°±åˆ é™¤äº†ï¼Œæ²¡æœ‰äº†è¿™ä¸ªæ•°æ®ã€‚","like_count":0},{"had_liked":false,"id":261528,"user_name":"Geek_c12f80","can_delete":false,"product_type":"c1","uid":2109120,"ip_address":"","ucode":"D5ADE29F16866B","user_header":"","comment_is_top":false,"comment_ctime":1605399061,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1605399061","product_id":100056701,"comment_content":"å†è¿›ä¸€æ­¥ç¡®è®¤ä¸‹ï¼Œå¦‚æœå†…å­˜ä½¿ç”¨æ²¡æœ‰è¾¾åˆ°maxmemoryï¼Œvolatileå¼€å¤´çš„æ·˜æ±°ç­–ç•¥ä¼šæ·˜æ±°æœªè¿‡æœŸæ•°æ®å—ï¼Ÿ<br>volatile-ttlæ·˜æ±°ç­–ç•¥ï¼Œæ˜¯åªè¦ç­›é€‰å‡ºè¿‡æœŸçš„æ•°æ®æ·˜æ±°å°±è¡Œäº†å—ï¼Ÿè¿˜æ˜¯éœ€è¦æ ¹æ®è¿‡æœŸæ—¶é—´æ’åºï¼Œè¿‡æœŸæ—¶é—´æœ€ä¹…çš„æ·˜æ±°æ‰ï¼Ÿå¦‚æœæ’åºï¼Œä¹Ÿæ˜¯ç±»ä¼¼lruéšæœºé€‰æ‹©å€™é€‰é›†èŒƒå›´å†…æ’åºå—ï¼Ÿ","like_count":0},{"had_liked":false,"id":257303,"user_name":"Geek_c12f80","can_delete":false,"product_type":"c1","uid":2109120,"ip_address":"","ucode":"D5ADE29F16866B","user_header":"","comment_is_top":false,"comment_ctime":1603934039,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"1603934039","product_id":100056701,"comment_content":"å¦‚æœé‡‡ç”¨volatileçš„æ·˜æ±°ç­–ç•¥ï¼Œè®¾ç½®äº†è¿‡æœŸæ—¶é—´ï¼Œä½†æ˜¯æ²¡æœ‰åˆ°è¿‡æœŸæ—¶é—´çš„æ•°æ®ï¼Œä¼šè¢«æ·˜æ±°å—ï¼Ÿï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1675882,"avatar":"https://static001.geekbang.org/account/avatar/00/19/92/6a/dd37a054.jpg","nickname":"å¼ y .","note":"","ucode":"85918469492F4C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":411465,"discussion_content":"ä¸ä¼š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635933861,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1840097,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEJq1QledRhFicNMRYDJ1ibCveUqlrtIYhDCvAicOmmnia3GPrjjepDZhibXMJ0iabTsibVC2KMZtoIG4A9icg/132","nickname":"xuwen_chen","note":"","ucode":"03C766DEA69DF1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":376050,"discussion_content":"ä¼šçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621942238,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1035257,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/cb/f9/75d08ccf.jpg","nickname":"Mr.èœœ","note":"","ucode":"C911B81198B3F5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":321608,"discussion_content":"æ²¡æœ‰è®¾ç½®è¿‡æœŸæ—¶é—´çš„æ•°æ®ï¼Œä¸ä¼šæ·˜æ±°ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604594659,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":254607,"user_name":"èŒƒé—²","can_delete":false,"product_type":"c1","uid":1073125,"ip_address":"","ucode":"F21FD7DF6BA53C","user_header":"https://static001.geekbang.org/account/avatar/00/10/5f/e5/54325854.jpg","comment_is_top":false,"comment_ctime":1603157560,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1603157560","product_id":100056701,"comment_content":"1.ç»å¸¸ç”¨çš„å†™æ³•å°±æ˜¯æ—è·¯ç¼“å­˜ã€‚redisæœ‰ç›´æ¥è¿”å›ï¼Œredisæ— è¯·æ±‚æ•°æ®åº“ï¼Œç„¶åå†å†™å›redis","like_count":0},{"had_liked":false,"id":253688,"user_name":"Geek_6d8c98","can_delete":false,"product_type":"c1","uid":2193932,"ip_address":"","ucode":"9CCDA0F83C066B","user_header":"","comment_is_top":false,"comment_ctime":1602833144,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1602833144","product_id":100056701,"comment_content":"è€å¸ˆï¼Œè§¦å‘æ·˜æ±°ç­–ç•¥åï¼Œredisæ¯æ¬¡ä¼šæ·˜æ±°å‡ ä¸ªkeyå‘¢ã€‚ä¼šä¸ä¼šä¸€ç›´æœ‰æ•°æ®æ’å…¥å°±ä¸€ç›´è§¦å‘æ·˜æ±°ç­–ç•¥å•Šï¼Ÿ","like_count":0},{"had_liked":false,"id":253166,"user_name":"å°æ°˜","can_delete":false,"product_type":"c1","uid":1622109,"ip_address":"","ucode":"DA55B9A02D9EE0","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erPMtAfnQdpx1yOZQ2ic7icqUs3tvibEjUXQMUXKiaakyuIho6k6vmdl46nrdWjXIjPIRg9Pmco00tR5w/132","comment_is_top":false,"comment_ctime":1602639949,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1602639949","product_id":100056701,"comment_content":"è¯¾åæ€è€ƒé¢˜ï¼šRedisç¼“å­˜å¯¹åº”åªè¯»ç¼“å­˜å’Œè¯»å†™ç¼“å­˜çš„åŒæ­¥ç›´å†™ã€‚","like_count":0},{"had_liked":false,"id":253000,"user_name":"å¶å­ã€‚","can_delete":false,"product_type":"c1","uid":1393004,"ip_address":"","ucode":"3EF2CC36F0D09A","user_header":"https://static001.geekbang.org/account/avatar/00/15/41/6c/687c5dfb.jpg","comment_is_top":false,"comment_ctime":1602558566,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1602558566","product_id":100056701,"comment_content":"è€å¸ˆèƒ½å¸®æˆ‘çœ‹çœ‹è¿™ä¸ªé—®é¢˜å—<br>æ•°æ®æ·˜æ±°æ˜¯ä¸ºäº†é˜²æ­¢æ“ä½œç³»ç»Ÿswapå—ï¼Ÿæˆ‘ç†è§£å°±åƒæ˜¯JVMçš„-XMXè®¾ç½®äº†maxmemoryä¹‹åæ˜¯ä¸æ˜¯å°±ä¸ä¼šå‘ç”Ÿswapäº†ï¼Ÿå› ä¸ºswapä¹‹å‰è¯´æ˜¯å‘ç”Ÿåœ¨åˆ†é…å†…å­˜å°äºå®é™…ä½¿ç”¨å†…å­˜ï¼Œè€Œè®¾ç½®äº†maxmemoryä¹‹åï¼Œå½“å‡ºç°å†…å­˜ä¸è¶³å°±å‘ç”Ÿäº†æ·˜æ±°äº†ï¼Œä¹Ÿå°±ä¸ä¼šå‘ç”Ÿswapäº†ï¼Ÿ<br>","like_count":0,"discussions":[{"author":{"id":1296255,"avatar":"https://static001.geekbang.org/account/avatar/00/13/c7/7f/5d975908.jpg","nickname":"æ¨","note":"","ucode":"B434931741D0CE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":534829,"discussion_content":"å¦‚æœè®¾ç½®äº†å†…å­˜é™åˆ¶ä¸ä¼šswapï¼Œç›´æ¥çˆ†oomäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638284041,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1022411,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/99/cb/8964faab.jpg","nickname":"-åªæ˜¯å°å°é…è§’_","note":"","ucode":"EFC1CD54A23F39","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":349156,"discussion_content":"ä¸ªäººç†è§£ï¼šswapæ˜¯æ“ä½œç³»ç»Ÿçš„äº‹æƒ…ï¼Œå¦‚æœRedisæœåŠ¡å™¨ä¸ŠåŒæ—¶è¿è¡Œäº†å…¶ä»–æœåŠ¡ï¼Œå¹¶ä¸”å ç”¨å¤§é‡å†…å­˜ï¼Œæ“ä½œç³»ç»Ÿåœ¨swapæ—¶ï¼Œå¯èƒ½ä¼šæŠŠRedisçš„å†…å­˜é¡µå†™å…¥åˆ°è™šæ‹Ÿå†…å­˜ä¸­","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612938656,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":252939,"user_name":"xueyuan","can_delete":false,"product_type":"c1","uid":1128121,"ip_address":"","ucode":"3DE20A723EBAFE","user_header":"https://static001.geekbang.org/account/avatar/00/11/36/b9/3b28f67c.jpg","comment_is_top":false,"comment_ctime":1602520184,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1602520184","product_id":100056701,"comment_content":"è¯»å†™æ¨¡å¼çš„å¼‚æ­¥å›å†™éœ€è¦æ‰€æœ‰å†™è¯·æ±‚éƒ½å…ˆåœ¨ç¼“å­˜ä¸­å¤„ç†ã€‚ç­‰åˆ°è¿™äº›å¢æ”¹çš„æ•°æ®è¦è¢«ä»ç¼“å­˜ä¸­æ·˜æ±°å‡ºæ¥æ—¶ï¼Œç¼“å­˜å°†å®ƒä»¬å†™å›åç«¯æ•°æ®åº“;è¿™ä¸ªredisåšä¸åˆ°ã€‚<br><br>rediså¯ä»¥æ”¯æŒè¯»å†™æ¨¡å¼çš„åŒæ­¥å›å†™å’Œåªè¯»æ¨¡å¼","like_count":0}]}