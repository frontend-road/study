{"id":189458,"title":"06 | 字符串：彻底被你忽略的 printf 的高级用法","content":"<p>你好，我是胡光，咱们又见面了，之前我们学习了基础数据类型，还有 scanf 函数和  printf  函数，这些知识都是单独的出现在我们之前的文章中的。今天呢，我将把它们组合在一起，给你展现一片新天地，你会掌握一种数据处理技巧，本质上是在上述几种数据类型之间做转换，从而使你对 scanf 函数和 printf 函数的理解更加深刻。</p><p>今天呢，我将给你介绍一种特殊的数组：字符数组，一种用来存储字符串信息的数组。来，跟我一起看看到底是怎么回事吧！</p><h2>今日任务</h2><p>首先，先让我们来看一下今天的任务。你还记得 printf 函数如何输出浮点型吧，那下面请你回忆一下，printf 函数在输出浮点型数据的时候，如何保留位数呢？下面的代码，演示了如何保留小数点后两位：</p><pre><code>printf(&quot;%.2lf&quot;, 3.1415926);\n</code></pre><p>%lf 是 double 双精度浮点型输出的格式占位符，当我们想要保留小数点后两位的时候，只需要在 % 和 lf 中间加上 .2 即可，2 写在 .(点) 的后面代表小数点后 2 位。</p><p>有了上面这个基础，现在我让你保留小数点后 2 位、3 位、4 位。对你来说肯定都不是什么难题了。先不要高兴太早，今天我们的任务是，实现一个能够保留小数点后 n 位的程序，这里的 n 是我们程序读入的一个变量。</p><p>例如，面对如下输入：</p><!-- [[[read_end]]] --><pre><code>3.1415926 2\n3.14\n</code></pre><p>第1行有两个数字 3.1415926 和 2，第一个浮点数代表要进行保留位数输出的浮点值，第二个整型代表具体要保留 2 位小数，你的程序应该能够正确的输出 3.14。那么类似的，当程序输入 3.1415926 和 3 的时候，你的程序应该输出 3.142。</p><p>面对这样一个任务，你想怎样进行实现呢？下面就给你一个设计不太优美的程序示例：</p><pre><code>#include &lt;stdio.h&gt;\nint main() {\n    double num;\n    int n;\n    scanf(&quot;%lf%d&quot;, &amp;num, &amp;n);\n    switch (n) {\n        case 1: printf(&quot;%.1lf\\n&quot;, num); break;\n        case 2: printf(&quot;%.2lf\\n&quot;, num); break;\n        case 3: printf(&quot;%.3lf\\n&quot;, num); break;\n        case 4: printf(&quot;%.4lf\\n&quot;, num); break;\n        case 5: printf(&quot;%.5lf\\n&quot;, num); break;\n    }\n    return 0;\n}\n</code></pre><p>你会看到，在这段程序中，使用 switch…case 结构将 n 等于 1、2、3、4、5 时候所对应的程序输出行为都罗列了出来，看似好像解决了问题，可实际不然。当 n 等于 6、7、8、9、10 怎么办呢？就让我们通过今天的学习，来尝试解决这个问题吧。</p><h2>必知必会，查缺补漏</h2><p>你先来好好看看上面给出的那个设计的很丑的示例代码，case结构中的 5 行代码，除了 printf 中的格式控制字符串不同以外，其余代码均相同，是不是稍稍感觉这里有些可操作的空间呢？</p><h4>1.值和变量</h4><p>在继续往下讲之前，我们先来重新认识一下两个概念，就是“变量”和“值”的概念。“变量”你肯定不陌生，之前的课程中我们一直在说，例如：整型变量，浮点型变量。</p><p>所谓整型变量，就是存储整型的变量。这么解释呢，好像又啥都没说，可这句话本来就带有不说自明的效果。根据名字理解，就是可以变化的量，就像我在代码中定义了一个整型变量 a，然后通过读入给 a 赋值，我问你，a 等于多少，你只能回答不知道，因为这个a 变量的值是可以变化的。</p><p>看完了变量这个概念以后，那什么又是“值”呢，也很简单，就是存储在变量中的内容，就是值。整型变量存储整型值，浮点型变量存储浮点型值。比如说，数字 3 就是整型值，如果我们为了后续计算想存储这个整型值，就需要放到一个整型变量中。</p><p>所以总得来说，具体结果就是值，明确知道等于多少的就是值。存储这些值的地方，就是变量，就是在程序中用来指代某片存储空间的名称，值就是存储空间里面的具体内容。如下图所示：<br>\n<img src=\"https://static001.geekbang.org/resource/image/b3/28/b3b9f7c50459f54386c0ec08bc1e7428.jpg?wh=2791*2254\" alt=\"\" title=\"图1:变量和值\"></p><h4>2. 字符串和字符数组</h4><p>为什么要明确什么是“值”什么是“变量”呢，因为我想让这两个概念在你的脑子中产生具象化的效果，一说到“值”，你就知道，是存储在“变量”中的内容，某一种类型的值，存储在某一种类型的变量中。</p><p>下面将要讲解的这两个概念，就是“值”和“变量”概念的衍生品，它们是“字符串”与“字符数组”。</p><p>“字符串”就是“值”，而“字符数组”就是存储字符串数据的空间，类比于“变量”的概念。如果说1、2、3、4、5这种整型“值”，你可能很容易理解，因为在你之前的学习中就接触过。那么什么是字符串值呢?先看一下字符串值的形式：<br>\n<img src=\"https://static001.geekbang.org/resource/image/16/ca/160d3bd153ce0022754f14a04393aaca.jpg?wh=3794*1401\" alt=\"\" title=\"图2：字符串数据示意图\"></p><p>如上图所示，是一个 “hello world” 内容的字符串数据，字符串数据被一对双引号包裹，中间是字符串内容。像我们看到的上面字符串内容中的 h 啊，e 啊，l 啊，这些就是所谓的“字符”，那么多个字符写成一串，故名“字符串”。为了加以区分，字符内容是用单引号，字符串内容是用双引号。</p><p>之前我们学过，一个字符占一个字节的空间，那么这个 “hello world” 字符串内容占多少个存储空间呢？hello 有五个字符，world 有五个字符，是 10 个字符么？不对。别忘了中间还有一个空格字符呢，虽然不可见，可你看得出来它对内容的影响。</p><p>那么加在一起一共是 11 个字符么？也不对，这个字符串数据中，还有一个彻底看不见影响，可对于底层来说很重要的字符，我们管它称作“杠零字符”，写作 \\0。每次读这个，都让我想起健身房里面的杠铃。</p><p>那么这段字符串实际在内存中存储的结果，应该如图中所示：<br>\n<img src=\"https://static001.geekbang.org/resource/image/2a/df/2a0f2862b86dd81eb65fe7893157f5df.jpg?wh=4698*1089\" alt=\"\" title=\"图3：字符串存储示意图\"></p><p>你可以看到，“hello world” 字符串中的每一个字符会占用一个字节存储单元，结尾还有一个 \\0 字符，这个 \\0 字符是标记字符串结束的。也就是，我们的程序在看到这个字符串的时候，会从第一个字符开始，直到碰到 \\0 字符为止，这中间的内容就是字符串的内容。</p><p>这里我们要强调两个概念“字符串长度”和“字符串占用空间”，这是两个相似但不同的概念。字符串长度，就是字符串内容所占字节数量，例如示意图中“hello world”这个字符串内容，长度是 11。</p><p>而如果要说这个字符串所占用的空间大小，那就别忘了，还有一个 \\0 字符需要额外占用 1 位呢。所以如果说到“字符串占用空间”是多少的话，应该是12，它要比“字符串长度”多 1，多出来的这个1，就是用来存放 \\0 字符的。</p><p>看完了字符串的基本概念以后，字符数组的概念就容易理解得多了，就是用来存放字符串的变量空间。从名字上面看的话，字符数组本质上是个数组，但这个数组的每一个元素类型不再是我们之前说到的整数类型，而是变成了字符型，也就是之前所提到的 char 类型。</p><p>那么如果想要存储示意图中的字符串，我们需要定义一个多大的数组呢？你稍加思索，就应该知道，最少要定义一个长度为 12 的数组。</p><pre><code>char str[12] = &quot;hello world&quot;;\nprintf(&quot;%s&quot;, str);\n</code></pre><p>就如上面这段代码所示，定义了一个长度为 12 的字符数组，然后将字符串 “hello world” 存储到这个空间中。注意，这种给字符数组赋值的方法，只能出现在字符数组定义时这样使用，非定义语句中，不能这样给字符数组赋值，会得到一个编译器给的错误提示。然后在第2行代码中，我们通过 printf 函数，输出字符数组中的信息，其中 %s 是字符串数据的格式占位符。最终你会在你的电脑上得到一行 hello world 的输出。</p><h4>3. 字符串操作的利器</h4><p>明确了什么是“字符串”和“字符数组”以后，下面来让我们看看如何操作字符串信息。说到操作，你来回忆一下整型数据支持的操作都有什么？能想到的最简单的是不是就是：加、减、乘、除和取余运算。</p><p>所谓操作，更准确地说是“运算”，就是使用现有值，产生新值的一个过程。上面我们明确了字符串数据就是一种值，那么这种值又支持哪些操作呢？</p><p>很多资料上面会讲解一些函数方法，例如：求字符串长度的 strlen 函数，拷贝字符串的 strcpy 函数，比较字符串的 strcmp 函数，连接两个字符串的 strcat 函数。因为这些函数方法较为简单，我打算把这些函数方法的学习作为你的自学作业，请你自学 string.h 头文件中的相关函数使用。</p><p>除此之外，今天我打算给你介绍两个更加灵活且强大的字符串操作函数：<strong>sscanf函数</strong>和 <strong>sprintf 函数</strong>。</p><p>从名字上面来看，除了名称前面加了一个 s 以外，剩下的部分，就是 scanf 和 printf，前面这个 s 其实指代的是 string，也就是字符串。正常来说，与 scanf 和 printf 进行信息交互的场所就是你运行 C 语言程序时候所看到的那个黑色框框，而与 sscanf 和 sprintf 进行信息交互的场所则是字符数组。你读这句话可能有点懵，听我继续往下讲。</p><p>下面让我们看一个 sscanf 的简单例子：</p><pre><code>char str[20] = &quot;123.45&quot;;\ndouble num;\nsscanf(str, &quot;%lf&quot;, &amp;num);\n</code></pre><p>在这个例子中，第1行是一个字符数组 str，其中的字符串信息是 “123.45”，第2行定义了一个浮点型的变量，第3行代码是重点，它使用 sscanf 从 str 所存储的字符串中读入一个浮点型数据，然后赋值给 num 变量，这里比传统的 scanf 函数多了一个参数，这个参数代表读取数据的字符串信息。</p><p>上面例子中展示了<strong>如何将一个字符串转换成一个浮点型数据</strong>，即把原始字符串的“123.45”转换成了浮点型数据“123.45”。那么你也可以自行设想将字符串转换成整型数据等等。其实 sscanf 就是提供了一种将字符串信息转换成其他信息的方式。</p><p>看完 sscanf 以后，下面看 sprintf 就简单多了，sprintf 也是比传统的 printf 函数多了一个参数，请看下面的这个使用 sprintf 输出 “hello world” 字符串的例子：</p><pre><code>char str[100];\nsprintf(str, &quot;hello world&quot;);\nprintf(&quot;%s&quot;, str);\n</code></pre><p>例子代码中分成3行，第1行定义了一个字符数组 str，第2行调用 sprintf 函数，相比于 printf 函数，多了第一项的参数，代表将原本输出到标准输出流中的内容，输出到 str 数组中。所谓标准输出流是一种专业的叫法，现在你可以简单的认为，就是你所认识的那个黑框框。</p><p>在这个例子中，也就是将 “hello world” 字符串，输出到了 str 字符数组中，也就是完成了一个字符数组赋值的过程。最后一行，使用 printf 函数，打印 str 数组的值，你会在屏幕上看到 “hello world” 字符串。</p><p>通过上面这个例子，你可以清楚的看到，sprintf 函数就是将原本 printf 函数输出的内容，输出到一个字符数组中存储起来，以方便在程序中的后续操作和使用。</p><p>sscanf 函数与sprintf 函数对比着看的话，如果说 sscanf 是将字符串转换成整型、浮点型等其他类型的方法，那么 sprintf 就是将其他类型转换成字符串类型的方法。</p><h2>一起动手，搞事情</h2><p>今天的动手实践环节呢，我给你准备了两道特别有意思的题目，一起来看看吧。</p><h4>思考题（1）：体验利器</h4><blockquote>\n<p>刚刚在上面，介绍了 sprintf 和 sscanf 两个字符串处理的利器工具，那么就请使用 sprintf 函数实现 strlen、strcpy、strcat 函数的功能，注意哦，只允许使用 sprintf 函数，模仿如上三个函数的功能。</p>\n</blockquote><h4>思考题（2）：优美的遍历技巧</h4><blockquote>\n<p>介绍完了字符串的相关知识以后，请思考如下问题，如何在不计算字符串长度的情况下，遍历字符串的每一位呢？<br>\n程序设计要求是，读入一个字符串，然后在不计算字符串长度的情况下，输出字符串中的每一个字符，每个字符占一行。其中所谓计算字符串长度的方法，包括但不限于 strlen，sprintf，先行 for 循环遍历统计等。</p>\n</blockquote><h2>实现保留任意小数</h2><p>最后，让我们回到今天的任务，实现保留任意位小数输出的功能。请你注意观察，printf 函数的第一个参数，究竟是个什么？你会恍然大悟，printf 函数的第一个参数不就是个字符串，既然是字符串信息，那我只需要在 printf 语言前，拼接合适的字符串信息传给 printf 函数即可。</p><p>例如，要求保留 1 位小数的时候，我就拼接出来 “%.1lf” 字符串信息，要求保留 2 位小数的时候，就拼接处理出 “%.2lf”字符串信息即可。</p><p>下面是我给出的示例程序，你可以作为参考：</p><pre><code>#include &lt;stdio.h&gt;\nint main() {\n    double num;\n    int n;\n    char str[100];\n    scanf(&quot;%lf%d&quot;, &amp;num, &amp;n);\n    sprintf(str, &quot;%%.%dlf\\n&quot;, n); // %% 代表输出一个 %\n    printf(str, num);\n    return 0;\n}\n</code></pre><p>程序主函数的第3～5行，分别定义了一个浮点型变量 num，一个整型变量 n 和 一个字符数组 str。接下来我们就要依据 n 的信息，利用 sprintf 函数把构造出来的格式控制字符串信息输出到 str 字符数组中。</p><p>这里需要注意的是第7行的两个百分号 （%%），它代表输出的时候，输出一个百分号，这是为了与格式占位符的 % 相兼容。试想一下，如果不这样规定，当你格式控制字符串是 “%d” 的时候，就会出现歧义，一方面可以解释成为是输出一个 % 和一个 d 字符，另一方面可以代表十进制整型的格式占位符。</p><p>以防出现这种歧义，当我们想输出一个百分号的时候，需要在格式控制字符串里面，打上两个百分号，以示区分。</p><p>最后我们把字符数组 str 当成原来的格式控制字符串传给 printf 函数，这样，就将文章开始时，代码中的 printf 函数的第一个参数，从定值字符串信息，替换成了变量字符数组 str 中所存储的信息。通过今天这个任务，你应该可以看到，拥有变量的程序，会使得我们的程序更具一般性和通用性。</p><p>其实变量代表了问题中可以被抽象化出来的量，就像以前，我们刻板的认为 printf 的第一个参数只能是一个显示的字符串信息，通过今天的学习，我们才彻底明白，printf 第一个参数，无非就是需要一个字符串的值，所以我们不仅仅可以传递给 printf 函数一个字符串的值，更可以传递给它一个字符数组，这样会使得整个程序功能更加灵活。</p><h2>课程小结</h2><p>通过今天对于字符串内容的学习，我们更加明确了“值”和“变量”的概念，这个概念，在后面学习指针相关知识的时候是非常重要的，所以你可千万不要忽视了今天我们花大量篇幅解释的这两个看似显然的概念。记住“值”和“变量”是两个概念，“变量”是存储“值”的地方。</p><p>最后，我希望你通过今天的学习，能够记住如下两点：</p><ol>\n<li>字符串信息可以存储在字符数组中，字符数组就是“变量”的概念，字符串就是“值”的概念</li>\n<li>sscanf 和 sprintf 函数，本质上在做的是以字符串为中间值，做各种数据类型之间的转换。</li>\n</ol><p>好了，踏实地消化吸收今天的内容吧，我是胡光，我们下节课，见指针。</p>","neighbors":{"left":{"article_title":"05 | 数组：一秒钟，定义 1000 个变量","id":188612},"right":{"article_title":"做好闭环（一）：不看答案可能就白学了","id":190609}},"comments":[{"had_liked":false,"id":174474,"user_name":"1900","can_delete":false,"product_type":"c1","uid":1105774,"ip_address":"","ucode":"320D65D14817D3","user_header":"https://static001.geekbang.org/account/avatar/00/10/df/6e/267bd6ee.jpg","comment_is_top":false,"comment_ctime":1580224819,"is_pvip":true,"replies":[{"id":"67813","content":"对的！","user_name":"作者回复","user_name_real":"胡炜燚","uid":"1374625","ctime":1580264486,"ip_address":"","comment_id":174474,"utype":1}],"discussion_count":1,"race_medal":0,"score":"44529897779","product_id":100043901,"comment_content":"其实还可以这样理解：<br>scanf做的是从控制台console取数据，存入相应的变量中，sscanf就是从字符串（C语言没有字符串类型，故这里的字符串其实就是字符数组）中取数据，存入相应的变量中；<br>同理，printf做的是将变量中的数据输出到控制台console，sprintf就是将变量中的数据输出到字符串中。<br><br>综上，只需要将scanf和printf中提到的控制台换成字符串，然后对应sscanf和sprintf，这样就好理解了。","like_count":11,"discussions":[{"author":{"id":1374625,"avatar":"https://static001.geekbang.org/account/avatar/00/14/f9/a1/ac36884c.jpg","nickname":"胡光","note":"","ucode":"601F29A45FC1E5","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":482414,"discussion_content":"对的！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580264486,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":172683,"user_name":"Makihao","can_delete":false,"product_type":"c1","uid":1145401,"ip_address":"","ucode":"09855B306351BF","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIlrUcod3kHAmgVx8xyKbEoyzKSxcyeD95dNYNqlRyxZHOB5uYYiakTyRiaeDYjtzR11xkLcbgq8Puw/132","comment_is_top":false,"comment_ctime":1579251136,"is_pvip":false,"replies":[{"id":"66982","content":"后面的文章会集中答疑，别着急，动手搞事情不会做的话，就往后看看。以及先学习一些其他知识，记住，采用螺旋式上升的学习方法。","user_name":"作者回复","user_name_real":"胡炜燚","uid":"1374625","ctime":1579252224,"ip_address":"","comment_id":172683,"utype":1}],"discussion_count":2,"race_medal":0,"score":"10169185728","product_id":100043901,"comment_content":"老师，你好   我是还不知道学习什么语言的时候看到你这篇文章，我是小白，有些部分感觉看的还不是太懂，比如课程里的“一起动手，搞事情”这一栏，能否在每次更新的一栏分享上一期你的思路代码，不然没有参考  感觉不懂越来越多    感谢老师","like_count":2,"discussions":[{"author":{"id":1374625,"avatar":"https://static001.geekbang.org/account/avatar/00/14/f9/a1/ac36884c.jpg","nickname":"胡光","note":"","ucode":"601F29A45FC1E5","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481818,"discussion_content":"后面的文章会集中答疑，别着急，动手搞事情不会做的话，就往后看看。以及先学习一些其他知识，记住，采用螺旋式上升的学习方法。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579252224,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1145401,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIlrUcod3kHAmgVx8xyKbEoyzKSxcyeD95dNYNqlRyxZHOB5uYYiakTyRiaeDYjtzR11xkLcbgq8Puw/132","nickname":"Makihao","note":"","ucode":"09855B306351BF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":138564,"discussion_content":"感谢老师指点","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579253085,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":172629,"user_name":"Jinlee","can_delete":false,"product_type":"c1","uid":1644723,"ip_address":"","ucode":"8EDA9B0C5184EA","user_header":"https://static001.geekbang.org/account/avatar/00/19/18/b3/848ffa10.jpg","comment_is_top":false,"comment_ctime":1579238429,"is_pvip":false,"replies":[{"id":"66945","content":"今晚会发布题解，可以关注一下。","user_name":"作者回复","user_name_real":"胡炜燚","uid":"1374625","ctime":1579243666,"ip_address":"","comment_id":172629,"utype":1}],"discussion_count":2,"race_medal":0,"score":"10169173021","product_id":100043901,"comment_content":"思考题（1）实现了，了解到原来sprintf返回的就是字符串的长度，思考题（2）没有想到，老师能指点一下迷津吗？","like_count":2,"discussions":[{"author":{"id":1374625,"avatar":"https://static001.geekbang.org/account/avatar/00/14/f9/a1/ac36884c.jpg","nickname":"胡光","note":"","ucode":"601F29A45FC1E5","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481796,"discussion_content":"今晚会发布题解，可以关注一下。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579243666,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1644723,"avatar":"https://static001.geekbang.org/account/avatar/00/19/18/b3/848ffa10.jpg","nickname":"Jinlee","note":"","ucode":"8EDA9B0C5184EA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":138474,"discussion_content":"好的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579245884,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":172484,"user_name":"学写代码的猪","can_delete":false,"product_type":"c1","uid":1064616,"ip_address":"","ucode":"4EBA2329450B53","user_header":"https://static001.geekbang.org/account/avatar/00/10/3e/a8/66088c47.jpg","comment_is_top":false,"comment_ctime":1579187891,"is_pvip":true,"replies":[{"id":"66897","content":"d(^_^o)","user_name":"作者回复","user_name_real":"胡炜燚","uid":"1374625","ctime":1579224535,"ip_address":"","comment_id":172484,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10169122483","product_id":100043901,"comment_content":"sscanf 和 sprintf 函数，本质上在做的是以字符串为中间值，做各种数据类型之间的转换。自学c语言的时候，还真没怎么重视。","like_count":2,"discussions":[{"author":{"id":1374625,"avatar":"https://static001.geekbang.org/account/avatar/00/14/f9/a1/ac36884c.jpg","nickname":"胡光","note":"","ucode":"601F29A45FC1E5","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481754,"discussion_content":"d(^_^o)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579224535,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":217800,"user_name":"罗耀龙@坐忘","can_delete":false,"product_type":"c1","uid":1917663,"ip_address":"","ucode":"3CEA258DE7F3C7","user_header":"https://static001.geekbang.org/account/avatar/00/1d/42/df/a034455d.jpg","comment_is_top":false,"comment_ctime":1589615763,"is_pvip":true,"replies":[{"id":"83539","content":"d(^_^o) 很棒！","user_name":"作者回复","user_name_real":"胡炜燚","uid":"1374625","ctime":1592214971,"ip_address":"","comment_id":217800,"utype":1}],"discussion_count":1,"race_medal":5,"score":"5884583059","product_id":100043901,"comment_content":"茶艺师学编程<br><br>作业又是卡了好几天。在这里说说我踩的坑（主要都是在思考题二）。<br><br>1、我一直在想字符串的定位输出。比如printf（&quot;%s&quot;,a[i]），但这是不行的，printf输出就只能是整个字符串a；<br><br>2、我看见浮点数能“%.nlf”定位数输出，妄想字符也能这样，但实际这个仅仅是按照规定的位数输出······是我想多了；<br><br>3、我也试过模仿文章中的例子把“字符+\\n”整合进新的字符串里输出，但也办不到；<br><br>交作业：<br><br>第一部分：<br><br>&#47;*strlen*&#47;<br>#include &lt;stdio.h&gt;<br>#include &lt;string.h&gt;<br><br>int main(){<br>    char b[]=&quot;I love you&quot;;<br>    char a[30];<br>    printf(&quot;要计算的字符串内容为：%s\\n&quot;,b);<br>    sprintf(a,&quot;%d&quot;,sizeof(b)-1);<br>    printf(&quot;字符串的长度为：%s\\n&quot;,a);<br>    return 0;<br>}<br><br><br>&#47;*stycpy*&#47;<br>#include &lt;stdio.h&gt;<br>#include &lt;string.h&gt;<br>#include &lt;stdlib.h&gt;<br><br>int main(){<br><br>char a[100]=&quot;I love you&quot;;<br>char b[]=&quot;1234567890&quot;;<br>printf(&quot;a原来的内容:%s\\n&quot;,a);<br>printf(&quot;b原来的内容:%s\\n&quot;,b);<br>system(&quot;pause&quot;);<br>sprintf(a,&quot;%s&quot;,b);<br>printf(&quot;复制后a的内容：%s\\n&quot;,a);<br>printf(&quot;复制后b的内容：%s\\n&quot;,b);<br>return 0;<br>}<br><br><br>&#47;*strcat*&#47;<br>#include &lt;stdio.h&gt;<br>#include &lt;string.h&gt;<br>#include &lt;stdlib.h&gt;<br><br>int main(){<br>    char a[]=&quot;123&quot;;<br>    char b[]=&quot;456789&quot;;<br>    char c[100];<br>    printf(&quot;a原来的内容:%s\\n&quot;,a);<br>    printf(&quot;b原来的内容:%s\\n&quot;,b);<br>    system(&quot;pause&quot;);<br>    sprintf(c,&quot;%s%s&quot;,a,b);<br>    printf(&quot;处理后a的内容：%s\\n&quot;,c);<br>    printf(&quot;处理后b的内容：%s\\n&quot;,b);<br>    return 0;<br>}<br><br>第二部分：<br><br>&#47;*思考题（2）：优美的遍历技巧介绍完了字符串的相关知识以后，请思考如下问题，如何在不计算字符串长度的情况下，遍历字符串的每一位呢？<br>程序设计要求是，读入一个字符串，然后在不计算字符串长度的情况下，输出字符串中的每一个字符，每个字符占一行。<br>其中所谓计算字符串长度的方法，包括但不限于 strlen，sprintf，先行 for 循环遍历统计等。*&#47;<br><br>#include &lt;stdio.h&gt;<br>#include &lt;string.h&gt;<br><br>int main(){<br>    char b;<br>    printf(&quot;请输入要装逼的字符串\\n&quot;);<br>    do{ &#47;&#47;do while循环，遍历到输入的字符串结尾“\\n”<br>    b=getchar(); &#47;&#47;字符读入不只有scanf。<br>    putchar(b); &#47;&#47;字符输出也不只有printf。<br>    printf(&quot;\\n&quot;);<br>    }while(b!=&#39;\\n&#39;);&#47;&#47;字符对应的引号为&#39;&#39;，而不是&quot;&quot;<br>    return 0;<br>}","like_count":1,"discussions":[{"author":{"id":1374625,"avatar":"https://static001.geekbang.org/account/avatar/00/14/f9/a1/ac36884c.jpg","nickname":"胡光","note":"","ucode":"601F29A45FC1E5","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":495264,"discussion_content":"d(^_^o) 很棒！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592214971,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":172737,"user_name":"Jinlee","can_delete":false,"product_type":"c1","uid":1644723,"ip_address":"","ucode":"8EDA9B0C5184EA","user_header":"https://static001.geekbang.org/account/avatar/00/19/18/b3/848ffa10.jpg","comment_is_top":false,"comment_ctime":1579269017,"is_pvip":false,"replies":[{"id":"67031","content":"你其中两个问题，第一i没有初始化0，第二循环内部，i没有自增，一直是同一个值。","user_name":"作者回复","user_name_real":"胡炜燚","uid":"1374625","ctime":1579317138,"ip_address":"","comment_id":172737,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5874236313","product_id":100043901,"comment_content":"老师，思考题（2）我想了下，代码如下，但是并没有输出单个字符，麻烦老师有时间也帮忙看下。（也是零基础，可能会有比较多的问题麻烦老师）<br>int main(){<br>\tchar str[100]; <br>\tint i;<br>\tsprintf(str, &quot;%s&quot;, &quot;I love China.&quot;);<br>\tprintf(&quot;%s&quot;, str);<br>\twhile (str[i] != &#39;\\0&#39;) printf(&quot;%s\\n&quot;, str[i]);<br>\treturn 0;\t<br>}","like_count":1,"discussions":[{"author":{"id":1374625,"avatar":"https://static001.geekbang.org/account/avatar/00/14/f9/a1/ac36884c.jpg","nickname":"胡光","note":"","ucode":"601F29A45FC1E5","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481838,"discussion_content":"你其中两个问题，第一i没有初始化0，第二循环内部，i没有自增，一直是同一个值。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579317138,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":172707,"user_name":"一日","can_delete":false,"product_type":"c1","uid":1481316,"ip_address":"","ucode":"7A9EFF0BCE2674","user_header":"https://static001.geekbang.org/account/avatar/00/16/9a/64/63fd724b.jpg","comment_is_top":false,"comment_ctime":1579257278,"is_pvip":true,"replies":[{"id":"67014","content":"第一个，有个问题，仔细想想，sprintf返回值到底是什么？是字符串占用的空间么？<br>第二个也有个问题，如何判断还有字符？","user_name":"作者回复","user_name_real":"胡炜燚","uid":"1374625","ctime":1579265239,"ip_address":"","comment_id":172707,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5874224574","product_id":100043901,"comment_content":"思考题目：sprintf的返回值为字符串占用空间的长度，减去1就是strlen(仅限英文字符)。<br>遍历的话，就用while循环，判断获取到的某个字符是否有字符，没有就退出循环","like_count":1,"discussions":[{"author":{"id":1374625,"avatar":"https://static001.geekbang.org/account/avatar/00/14/f9/a1/ac36884c.jpg","nickname":"胡光","note":"","ucode":"601F29A45FC1E5","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481827,"discussion_content":"第一个，有个问题，仔细想想，sprintf返回值到底是什么？是字符串占用的空间么？\n第二个也有个问题，如何判断还有字符？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579265239,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1481316,"avatar":"https://static001.geekbang.org/account/avatar/00/16/9a/64/63fd724b.jpg","nickname":"一日","note":"","ucode":"7A9EFF0BCE2674","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":138784,"discussion_content":"1. 字符串内容的长度加上\\0\n2. while (str[i])","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579265683,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":172269,"user_name":"徐洲更","can_delete":false,"product_type":"c1","uid":1314643,"ip_address":"","ucode":"F8A323CB732D05","user_header":"https://static001.geekbang.org/account/avatar/00/14/0f/53/92a50f01.jpg","comment_is_top":false,"comment_ctime":1579143140,"is_pvip":true,"replies":[{"id":"67884","content":"不错，作业完成的很不错，不过要是能在主函数中加入一个 return 0; 就更完美了。","user_name":"作者回复","user_name_real":"胡炜燚","uid":"1374625","ctime":1580315001,"ip_address":"","comment_id":172269,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5874110436","product_id":100043901,"comment_content":"今天的作业（不包括思考题)： https:&#47;&#47;github.com&#47;xuzhougeng&#47;learn-c-in-JKSJ&#47;blob&#47;master&#47;jksj-06-sprintf-sscanf.c<br><br>&#47;* 知识点:<br> * 1. 格式输入中, 为了表示一个%, 需要用%%<br> * 2. sprintf: 将原本输出到屏幕的内容，保存到变量中<br> * 3. sscanf: 将原本从屏幕接受的字符串输入，从字符串数组中读取<br> * 4. 字符串数组需要以&#39;\\0&#39;表示字符串的结束<br> *&#47;<br>收获: printf, scanf家族原来那么强大。不仅仅可以从屏幕中读取&#47;输出信息，其实还可以对字符串数组中, 文件进行读取和写入","like_count":1,"discussions":[{"author":{"id":1374625,"avatar":"https://static001.geekbang.org/account/avatar/00/14/f9/a1/ac36884c.jpg","nickname":"胡光","note":"","ucode":"601F29A45FC1E5","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481682,"discussion_content":"不错，作业完成的很不错，不过要是能在主函数中加入一个 return 0; 就更完美了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580315001,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1000473,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/44/19/17fadc62.jpg","nickname":"郭蕾","note":"","ucode":"34F4C07D1C5FE8","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":139875,"discussion_content":"厉害","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579325180,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":352756,"user_name":"何雨檀🌀Mike@Fighting","can_delete":false,"product_type":"c1","uid":1720286,"ip_address":"","ucode":"ABC200B11EF40E","user_header":"https://static001.geekbang.org/account/avatar/00/1a/3f/de/2a0b7758.jpg","comment_is_top":false,"comment_ctime":1658913931,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1658913931","product_id":100043901,"comment_content":"#include &lt;stdio.h&gt;<br><br>int main(){<br>        char str[12] = &quot;hello world&quot;;<br>        printf(&quot;%s\\n&quot;, str);<br><br>        for(int i=0;i&lt;=11;i++)  printf(&quot;%s\\n&quot;,&amp;str[i]);<br><br>        return 0;<br>}<br><br><br>本想输出字符数组的每一个字符，为啥是这样滴呢，胡老师~<br><br>[root@Django ~]# .&#47;a.out<br>hello world<br>hello world<br>ello world<br>llo world<br>lo world<br>o world<br> world<br>world<br>orld<br>rld<br>ld<br>d<br>","like_count":0},{"had_liked":false,"id":343116,"user_name":"注意力$","can_delete":false,"product_type":"c1","uid":1142316,"ip_address":"","ucode":"7FB3399A1EAB72","user_header":"https://static001.geekbang.org/account/avatar/00/11/6e/2c/e2f3cfc0.jpg","comment_is_top":false,"comment_ctime":1650638386,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1650638386","product_id":100043901,"comment_content":"#include &lt;stdio.h&gt;<br>int main() {<br>    double num;<br>    int n;<br>    char str[100];<br>    scanf(&quot;%lf%d&quot;, &amp;num);<br>    sprintf(str, &quot;%%.%d2lf\\n&quot;, n); &#47;&#47; %% 代表输出一个 %<br>    printf(str, num);<br>    return 0;<br>}<br>老师这段代码会自动输出，控制小数点的位数是在哪行实现？scanf还是sprintf","like_count":0,"discussions":[{"author":{"id":1546026,"avatar":"https://static001.geekbang.org/account/avatar/00/17/97/2a/84f3ee46.jpg","nickname":"郑小菜","note":"","ucode":"B350EC4E18BFA3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":574746,"discussion_content":"有俩小问题：\n1、scanf(&#34;%lf%d&#34;, &amp;num); 这一行少了个接收的变量 &amp;n\n2、sprintf(str, &#34;%%.%d2lf\\n&#34;, n);   这一行，里边多了个2，再拼接n的话 保留的就是 n2 位了。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1654312368,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":325096,"user_name":"浪里淘沙的小法师","can_delete":false,"product_type":"c1","uid":2441110,"ip_address":"","ucode":"93D5AEFC0E2436","user_header":"https://static001.geekbang.org/account/avatar/00/25/3f/96/ce0b9678.jpg","comment_is_top":false,"comment_ctime":1638807158,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1638807158","product_id":100043901,"comment_content":"实践出真知呐，看懂是一回事，实操又是一回事～<br>思考题1的实现如下：<br>#include &lt;stdio.h&gt;<br>#include &lt;string.h&gt;<br>int main() {<br>  char str[100], str2[100];<br>  printf(&quot;请输入两个字符串，以空格分隔：&quot;);<br>  scanf(&quot;%s%s&quot;, str, str2);<br>  &#47;&#47; 实现 strlen，其返回值是字符串长度<br>  int n = sprintf(str, &quot;%s&quot;, str);<br>  printf(&quot;实现strlen：str的长度为%d\\n&quot;, n);<br>  &#47;&#47; 实现 strcpy，将 str2 中的内容复制到 str 的空间中<br>  sprintf(str, &quot;%s&quot;, str2);<br>  printf(&quot;实现strcpy：%s\\t%s\\n&quot;, str, str2);<br>  &#47;&#47; 实现 strcat，将 str2 的内容追加到 str 后面<br>  sprintf(str, &quot;%s%s&quot;, str, str2);<br>  printf(&quot;实现strcat：%s\\t%s\\n&quot;, str, str2);<br>  return 0;<br>}<br><br>思考题2的实现如下：<br>&#47;&#47; 优美的遍历字符串<br>#include &lt;stdio.h&gt;<br>int main() {<br>  printf(&quot;请输入字符串：&quot;);<br>  char str[100];<br>  scanf(&quot;%s&quot;, str);<br>  int i = 0;<br>  while (str[i] != &#39;\\0&#39;) {<br>    printf(&quot;%c\\n&quot;, str[i]);<br>    i++;<br>  };<br>  printf(&quot;\\n&quot;);<br>  return 0;<br>}","like_count":0},{"had_liked":false,"id":317474,"user_name":"沙","can_delete":false,"product_type":"c1","uid":2641625,"ip_address":"","ucode":"E8749E3999CBE6","user_header":"https://static001.geekbang.org/account/avatar/00/28/4e/d9/426c5bc0.jpg","comment_is_top":false,"comment_ctime":1634807446,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1634807446","product_id":100043901,"comment_content":"思考题2：遍历字符串组<br>#include&lt;stdio.h&gt;<br>#include&lt;stdlib.h&gt;<br>#include&lt;string.h&gt;<br>int main( ) {<br> <br>   char a[100];<br>   int i,j;<br>   printf(&quot;请输入字符串:&quot;);<br>   gets(a);<br>   j=strlen(a);<br>   for (i=0;i&lt;=j;i++)<br>   {<br>   \t\tprintf(&quot;%c\\n&quot;,a[i]);<br>   }<br>   return 0;<br>}","like_count":0},{"had_liked":false,"id":283431,"user_name":"云峰","can_delete":false,"product_type":"c1","uid":2338175,"ip_address":"","ucode":"CE1498C4C4F9A1","user_header":"https://static001.geekbang.org/account/avatar/00/23/ad/7f/24dc8415.jpg","comment_is_top":false,"comment_ctime":1615780596,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1615780596","product_id":100043901,"comment_content":"int main(){<br>\tchar a[100];<br>\tscanf(&quot;%s&quot;, a);<br>\tint i = 0;<br>\twhile(a[i] !=0)<br>\t\tprintf(&quot;%c\\n&quot;,a[i++]);<br>return 0;<br>}","like_count":0},{"had_liked":false,"id":278770,"user_name":"peterkalven","can_delete":false,"product_type":"c1","uid":1274118,"ip_address":"","ucode":"74AF1D2A01E563","user_header":"https://static001.geekbang.org/account/avatar/00/13/71/06/e17159a9.jpg","comment_is_top":false,"comment_ctime":1613310917,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1613310917","product_id":100043901,"comment_content":"思考题（1）: sprintf 函数实现 strlen、strcpy、strcat 函数的功能<br>1 strcat<br>#include &lt;stdio.h&gt;<br>int main(){<br>        char str1[100];<br>        char str2[100];<br>        char str[200];<br>        printf(&quot;input the str1: &quot;);<br>        scanf(&quot;%s&quot;,str1);<br>        printf(&quot;input the str2: &quot;);<br>        scanf(&quot;%s&quot;,str2);<br>        sprintf(str,&quot;%s%s&quot;,str1,str2);<br>        printf(&quot;the str is : %s\\n&quot;,str);<br>        return 0;<br>}<br>2 strcpy<br>#include &lt;stdio.h&gt;<br>int main(){<br>        char str1[100];<br>        char str2[100];<br>        printf(&quot;input the str1 : &quot;);<br>        scanf(&quot;%s&quot;,str1);<br>        printf(&quot;copy str1 to str2 . \\n&quot;);<br>        sprintf(str2,str1);<br>        printf(&quot;the str2 is : %s\\n&quot;,str2);<br>        return 0;<br>}<br>3 strlen<br>#include &lt;stdio.h&gt;<br>int main(){<br>        int n;<br>        char str1[100];<br>        char str2[100];<br>        scanf(&quot;%s&quot;,str1);<br>        printf(&quot;the str1 is : %s\\n&quot;,str1);<br>        n = sprintf(str2,str1);<br>        printf(&quot;the str2 is : %s\\n&quot;,str2);<br>        printf(&quot;the len of str2 is : %d\\n&quot;,n);<br>        return 0;<br>}<br><br>思考题（2）：优美的遍历技巧<br>#include &lt;stdio.h&gt;<br>int main(){<br>        char str[100];<br>        int n;<br>        scanf(&quot;%s&quot;,str);<br>        printf(&quot;the input string is : %s\\n&quot;,str);<br>        for(n=0;n&lt;100;n++){<br>                if(str[n] != &#39;\\0&#39;){<br>                        printf(&quot;%c\\n&quot;,str[n]);<br>                }else{<br>                        break;<br>                }<br>        }<br>        return 0;<br>}<br>","like_count":0},{"had_liked":false,"id":246018,"user_name":"Geek_bcffeb","can_delete":false,"product_type":"c1","uid":2031914,"ip_address":"","ucode":"9AED847F90391C","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Es78ParAxh5fkAVd1Cm9cvehF0rxMEKLbcAiaMBJQVxA4t0EJVWMxrjdicBe8ib5hJicerrKpokicmkLyj0qefC6M3w/132","comment_is_top":false,"comment_ctime":1599134838,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1599134838","product_id":100043901,"comment_content":"思考题1：只实现了strcpy<br>#include&lt;stdio.h&gt;<br>#include&lt;string.h&gt;<br>&#47;*<br>使用sprintf函数实现strlen、strcpy、strcat函数的功能<br>\t1.strlen:size_t strlen(const char *str) 计算字符串 str 的长度，直到空结束字符，但不包括空结束字符<br>\t2.strcpy:char *strcpy(char *dest, const char *src) 把 src 所指向的字符串复制到 dest<br>\t3.strcat:char *strcat(char *dest, const char *src) 把 src 所指向的字符串追加到 dest 所指向的字符串的结尾<br>*&#47;<br>int main()<br>{<br>\tchar src[] = &quot;C is interesting,Right?&quot;;<br>\tchar dest[100];<br>\t&#47;*sprintf实现strcpy功能*&#47;<br>\tsprintf(dest, src);<br>\tprintf(&quot;%s&quot;, dest);<br>\treturn 0;<br>}<br><br>思考题2：<br>#include&lt;stdio.h&gt;<br>&#47;*<br>在不计算字符串长度的情况下，遍历字符串的每一位：<br>要求：<br>\t1.读入一个字符串<br>\t2.输出字符串的每一个字符，每个字符占一行。<br>*&#47;<br>int main()<br>{<br>\tchar str[100];<br>\tint i = 0;<br>\tscanf(&quot;%s&quot;, str);<br>\twhile (1)<br>\t{<br>\t\tif (str[i] == &#39;\\0&#39;)<br>\t\t{<br>\t\t\tbreak;<br>\t\t}<br>\t\tprintf(&quot;%c\\n&quot;, str[i]);<br>\t\ti++;<br>\t}<br>\treturn 0;<br>}","like_count":0},{"had_liked":false,"id":221923,"user_name":"Zz","can_delete":false,"product_type":"c1","uid":2017765,"ip_address":"","ucode":"C5CB9E57CABFA5","user_header":"https://static001.geekbang.org/account/avatar/00/1e/c9/e5/ba4e6de7.jpg","comment_is_top":false,"comment_ctime":1590634624,"is_pvip":false,"replies":[{"id":"83517","content":"返回字符串长度的方法是正确的。","user_name":"作者回复","user_name_real":"胡炜燚","uid":"1374625","ctime":1592213546,"ip_address":"","comment_id":221923,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1590634624","product_id":100043901,"comment_content":"&#47;&#47;思考题（2）<br><br>#include &lt;stdio.h&gt;<br><br>int main()<br>{<br>char two[80] = {&quot;hellow world&quot;};<br>&#47;&#47;char one[80];<br>&#47;&#47;int i=sprintf(one, &quot;%s&quot;,two);&#47;&#47;返回字符串长度<br>\tfor(int j=0;j&lt;strlen(two);j++)<br>\t{<br>\t\tprintf(&quot;%c\\n&quot;,two[j]);<br><br>\t}<br><br>   return 0;<br>}","like_count":0,"discussions":[{"author":{"id":1374625,"avatar":"https://static001.geekbang.org/account/avatar/00/14/f9/a1/ac36884c.jpg","nickname":"胡光","note":"","ucode":"601F29A45FC1E5","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496613,"discussion_content":"返回字符串长度的方法是正确的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592213546,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":221910,"user_name":"Zz","can_delete":false,"product_type":"c1","uid":2017765,"ip_address":"","ucode":"C5CB9E57CABFA5","user_header":"https://static001.geekbang.org/account/avatar/00/1e/c9/e5/ba4e6de7.jpg","comment_is_top":false,"comment_ctime":1590632173,"is_pvip":false,"replies":[{"id":"83518","content":"连接字符串的方法是正确的","user_name":"作者回复","user_name_real":"胡炜燚","uid":"1374625","ctime":1592213572,"ip_address":"","comment_id":221910,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1590632173","product_id":100043901,"comment_content":"#include &lt;stdio.h&gt;<br><br>int main()<br>{<br>\tchar str[100];<br> \tint temp=sprintf(str,&quot;%s%s&quot;,&quot;1234&quot;,&quot;5678&quot;);<br>\tprintf(&quot;%s\\n&quot;,str);&#47;&#47;strcpy,strcat<br>    printf(&quot;%d&quot;,temp);&#47;&#47;strlen<br>   return 0;<br>}","like_count":0,"discussions":[{"author":{"id":1374625,"avatar":"https://static001.geekbang.org/account/avatar/00/14/f9/a1/ac36884c.jpg","nickname":"胡光","note":"","ucode":"601F29A45FC1E5","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496609,"discussion_content":"连接字符串的方法是正确的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592213572,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":201832,"user_name":"1043","can_delete":false,"product_type":"c1","uid":1485365,"ip_address":"","ucode":"AAA69CC175AEE3","user_header":"https://static001.geekbang.org/account/avatar/00/16/aa/35/1a4884f9.jpg","comment_is_top":false,"comment_ctime":1585842555,"is_pvip":false,"replies":[{"id":"75485","content":"就这一项作用理解到位，就很不得了了。(｡ì _ í｡)","user_name":"作者回复","user_name_real":"胡炜燚","uid":"1374625","ctime":1585878431,"ip_address":"","comment_id":201832,"utype":1}],"discussion_count":1,"race_medal":1,"score":"1585842555","product_id":100043901,"comment_content":"变量就是专门装着值的容器吗？它还能干点别的不？","like_count":0,"discussions":[{"author":{"id":1374625,"avatar":"https://static001.geekbang.org/account/avatar/00/14/f9/a1/ac36884c.jpg","nickname":"胡光","note":"","ucode":"601F29A45FC1E5","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490432,"discussion_content":"就这一项作用理解到位，就很不得了了。(｡ì _ í｡)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585878431,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":201824,"user_name":"1043","can_delete":false,"product_type":"c1","uid":1485365,"ip_address":"","ucode":"AAA69CC175AEE3","user_header":"https://static001.geekbang.org/account/avatar/00/16/aa/35/1a4884f9.jpg","comment_is_top":false,"comment_ctime":1585841470,"is_pvip":false,"replies":[{"id":"75486","content":"函数的话，相当于被封装的一个可以复用的逻辑过程。字符串长度，是不计算隐藏字符\\0的，字符串大小是需要算上这一位的隐藏字符的，这个字符的作用是标记字符串结尾。更多的基础知识，可以配合我推荐的入门参考书一起看看。","user_name":"作者回复","user_name_real":"胡炜燚","uid":"1374625","ctime":1585880804,"ip_address":"","comment_id":201824,"utype":1}],"discussion_count":1,"race_medal":1,"score":"1585841470","product_id":100043901,"comment_content":"函数是指的整个一连串的固定型指令吗？字符串占用的长度和大小区别在哪呢？字符串和变量还有函数之间的关系是如何协调互认的呢？<br>今天的课感觉每个单独的概念都能听懂，但是组合到一起就不懂，还特别晕。","like_count":0,"discussions":[{"author":{"id":1374625,"avatar":"https://static001.geekbang.org/account/avatar/00/14/f9/a1/ac36884c.jpg","nickname":"胡光","note":"","ucode":"601F29A45FC1E5","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490429,"discussion_content":"函数的话，相当于被封装的一个可以复用的逻辑过程。字符串长度，是不计算隐藏字符\\0的，字符串大小是需要算上这一位的隐藏字符的，这个字符的作用是标记字符串结尾。更多的基础知识，可以配合我推荐的入门参考书一起看看。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585880804,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":181036,"user_name":"宋jia wen","can_delete":false,"product_type":"c1","uid":1346058,"ip_address":"","ucode":"9DB9BB7892B409","user_header":"https://static001.geekbang.org/account/avatar/00/14/8a/0a/29171291.jpg","comment_is_top":false,"comment_ctime":1582463777,"is_pvip":false,"replies":[{"id":"70384","content":"你把1987这个数字，放到了 num[0] 这个位置啊。<br>所以，第一种情况下:<br>num[0] = 1987, num[1] = 1<br><br>第二种情况下：<br>num[0] = 1987, num[1] = 0","user_name":"作者回复","user_name_real":"胡炜燚","uid":"1374625","ctime":1582621323,"ip_address":"","comment_id":181036,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1582463777","product_id":100043901,"comment_content":"int main() {<br>\tchar str[100] = &quot;1987&quot;;<br>\tint num[100] ={1,1};<br>\tsscanf(str,&quot;%d&quot;,&amp;num);<br>\tfor(int i = 0;i &lt; 10;i++) {<br>\t\tprintf(&quot;%d&quot;,num[i]);<br>\t}<br>}<br>老师这个编程结果是19871  然后我把num[100] = {1}; 结果就变成1987；这是为什么？","like_count":0,"discussions":[{"author":{"id":1374625,"avatar":"https://static001.geekbang.org/account/avatar/00/14/f9/a1/ac36884c.jpg","nickname":"胡光","note":"","ucode":"601F29A45FC1E5","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484895,"discussion_content":"你把1987这个数字，放到了 num[0] 这个位置啊。\n所以，第一种情况下:\nnum[0] = 1987, num[1] = 1\n\n第二种情况下：\nnum[0] = 1987, num[1] = 0","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582621323,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":176886,"user_name":"月泉","can_delete":false,"product_type":"c1","uid":1800408,"ip_address":"","ucode":"0A5CE4CF770C25","user_header":"https://static001.geekbang.org/account/avatar/00/1b/78/d8/c00575ae.jpg","comment_is_top":false,"comment_ctime":1581215637,"is_pvip":false,"replies":[{"id":"68671","content":"d(^_^o)","user_name":"作者回复","user_name_real":"胡炜燚","uid":"1374625","ctime":1581240120,"ip_address":"","comment_id":176886,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1581215637","product_id":100043901,"comment_content":"我也是第一次用到sscanf()和sprintf()，很赞👍","like_count":0,"discussions":[{"author":{"id":1374625,"avatar":"https://static001.geekbang.org/account/avatar/00/14/f9/a1/ac36884c.jpg","nickname":"胡光","note":"","ucode":"601F29A45FC1E5","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":483235,"discussion_content":"d(^_^o)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581240120,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":176348,"user_name":"信念","can_delete":false,"product_type":"c1","uid":1673076,"ip_address":"","ucode":"3D32CA6E096CF8","user_header":"https://static001.geekbang.org/account/avatar/00/19/87/74/68c35700.jpg","comment_is_top":false,"comment_ctime":1581040250,"is_pvip":false,"replies":[{"id":"68488","content":"12，占用空间12，也就是说需要在存储空间中占12个存储单元。","user_name":"作者回复","user_name_real":"胡炜燚","uid":"1374625","ctime":1581060823,"ip_address":"","comment_id":176348,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1581040250","product_id":100043901,"comment_content":"不是说“hello world”这个字符串内容，长度是 11；“字符串占用空间”应该是 12。那为什么至少要定义长度为12的数组呢？不应该是11吗？<br><br>char str[12] = &quot;hello world&quot;;<br>printf(&quot;%s&quot;, str);","like_count":0,"discussions":[{"author":{"id":1374625,"avatar":"https://static001.geekbang.org/account/avatar/00/14/f9/a1/ac36884c.jpg","nickname":"胡光","note":"","ucode":"601F29A45FC1E5","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":483085,"discussion_content":"12，占用空间12，也就是说需要在存储空间中占12个存储单元。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581060823,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1673076,"avatar":"https://static001.geekbang.org/account/avatar/00/19/87/74/68c35700.jpg","nickname":"信念","note":"","ucode":"3D32CA6E096CF8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":163314,"discussion_content":"好的，谢谢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581069332,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":174638,"user_name":"不便明言","can_delete":false,"product_type":"c1","uid":1800640,"ip_address":"","ucode":"745571262B75B0","user_header":"https://static001.geekbang.org/account/avatar/00/1b/79/c0/4c35b6ab.jpg","comment_is_top":false,"comment_ctime":1580305404,"is_pvip":false,"replies":[{"id":"67895","content":"不对啊，你c那个字符数组怎么才1位呢？1位的字符数组，只能存字符串的结束符啊。","user_name":"作者回复","user_name_real":"胡炜燚","uid":"1374625","ctime":1580347427,"ip_address":"","comment_id":174638,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1580305404","product_id":100043901,"comment_content":"老师，思考题1如下对吗？<br>#include&lt;stdio.h&gt;<br>void main()<br>{<br>\tchar c[1];<br>\tint s=0;<br>\tprintf(&quot;请输入一串字符：\\n&quot;);<br>\tscanf(&quot;%s&quot;,&amp;c);<br>\ts=sprintf(c,&quot;%s&quot;,c);<br>\tprintf(&quot;%d\\n&quot;,s);<br>\t<br>\tsystem(&quot;pause&quot;);<br>\treturn 0;<br>}","like_count":0,"discussions":[{"author":{"id":1374625,"avatar":"https://static001.geekbang.org/account/avatar/00/14/f9/a1/ac36884c.jpg","nickname":"胡光","note":"","ucode":"601F29A45FC1E5","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":482468,"discussion_content":"不对啊，你c那个字符数组怎么才1位呢？1位的字符数组，只能存字符串的结束符啊。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580347427,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1800640,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/79/c0/4c35b6ab.jpg","nickname":"不便明言","note":"","ucode":"745571262B75B0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":156329,"discussion_content":"啊，那我输入100个字符进去他也计数了100呢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580352294,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":173605,"user_name":"潮汐","can_delete":false,"product_type":"c1","uid":1042208,"ip_address":"","ucode":"F5E4F6DF9CEA9E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/e7/20/70a95f94.jpg","comment_is_top":false,"comment_ctime":1579613269,"is_pvip":false,"replies":[{"id":"67379","content":"也给你坚持学习的精神点赞👍","user_name":"作者回复","user_name_real":"胡炜燚","uid":"1374625","ctime":1579705665,"ip_address":"","comment_id":173605,"utype":1}],"discussion_count":1,"race_medal":1,"score":"1579613269","product_id":100043901,"comment_content":"用\\0判断字符数组是否到达尾部作终止条件，while循环，思考题1和2一下就可以通用相同思路。看到上面Lee0的代码一下子想通！<br>看了评论说到sprintf返回值就是操作的字符串的长度的话，就可以更直接模拟strlen了。回去实验一下。<br>给老师的课程点赞。学到了很多基础的知识。","like_count":0,"discussions":[{"author":{"id":1374625,"avatar":"https://static001.geekbang.org/account/avatar/00/14/f9/a1/ac36884c.jpg","nickname":"胡光","note":"","ucode":"601F29A45FC1E5","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":482131,"discussion_content":"也给你坚持学习的精神点赞👍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579705665,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":172731,"user_name":"信念","can_delete":false,"product_type":"c1","uid":1673076,"ip_address":"","ucode":"3D32CA6E096CF8","user_header":"https://static001.geekbang.org/account/avatar/00/19/87/74/68c35700.jpg","comment_is_top":false,"comment_ctime":1579267025,"is_pvip":false,"replies":[{"id":"67030","content":"这个就要讲到浮点数的IEEE的标准表示法了。你可以先简单的理解成，任何数据底层都是二进制表示的，而有些数字没办法用二进制精确表示。例如0.4","user_name":"作者回复","user_name_real":"胡炜燚","uid":"1374625","ctime":1579317071,"ip_address":"","comment_id":172731,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1579267025","product_id":100043901,"comment_content":"3.14159260000000006840537025709636509418487548828125000000000000000000000000000000<br>这是当我将3.1415926 2保留80位小数点的结果，这是一个比较出人意料的结果，不过我觉得暂时也还没必要去了解它为什么是这样，因为我现在也有和上面的同胞一样的感觉，感觉思考题不会做，不过，我也愿意采纳胡老师的建议先学一些其他知识，回头再看看它，说不定我就会了，就理解了","like_count":0,"discussions":[{"author":{"id":1374625,"avatar":"https://static001.geekbang.org/account/avatar/00/14/f9/a1/ac36884c.jpg","nickname":"胡光","note":"","ucode":"601F29A45FC1E5","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481837,"discussion_content":"这个就要讲到浮点数的IEEE的标准表示法了。你可以先简单的理解成，任何数据底层都是二进制表示的，而有些数字没办法用二进制精确表示。例如0.4","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579317071,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1673076,"avatar":"https://static001.geekbang.org/account/avatar/00/19/87/74/68c35700.jpg","nickname":"信念","note":"","ucode":"3D32CA6E096CF8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":139779,"discussion_content":"好的，感谢胡老师","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579317386,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}