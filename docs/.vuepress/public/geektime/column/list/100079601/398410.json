{"id":398410,"title":"25 | è®¤è¯æœºåˆ¶ï¼šåº”ç”¨ç¨‹åºå¦‚ä½•è¿›è¡Œè®¿é—®è®¤è¯ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯å­”ä»¤é£ï¼Œä»Šå¤©æˆ‘ä»¬æ¥èŠèŠå¦‚ä½•è¿›è¡Œè®¿é—®è®¤è¯ã€‚</p><p>ä¿è¯åº”ç”¨çš„å®‰å…¨æ˜¯è½¯ä»¶å¼€å‘çš„æœ€åŸºæœ¬è¦æ±‚ï¼Œæˆ‘ä»¬æœ‰å¤šç§é€”å¾„æ¥ä¿éšœåº”ç”¨çš„å®‰å…¨ï¼Œä¾‹å¦‚ç½‘ç»œéš”ç¦»ã€è®¾ç½®é˜²ç«å¢™ã€è®¾ç½®IPé»‘ç™½åå•ç­‰ã€‚ä¸è¿‡åœ¨æˆ‘çœ‹æ¥ï¼Œè¿™äº›æ›´å¤šæ˜¯ä»è¿ç»´è§’åº¦æ¥è§£å†³åº”ç”¨çš„å®‰å…¨é—®é¢˜ã€‚ä½œä¸ºå¼€å‘è€…ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä»è½¯ä»¶å±‚é¢æ¥ä¿è¯åº”ç”¨çš„å®‰å…¨ï¼Œè¿™å¯ä»¥é€šè¿‡è®¤è¯æ¥å®ç°ã€‚</p><p>è¿™ä¸€è®²ï¼Œæˆ‘ä»¥HTTPæœåŠ¡ä¸ºä¾‹ï¼Œæ¥ç»™ä½ ä»‹ç»ä¸‹å½“å‰å¸¸è§çš„å››ç§è®¤è¯æ–¹æ³•ï¼šBasicã€Digestã€OAuthã€Bearerã€‚è¿˜æœ‰å¾ˆå¤šåŸºäºè¿™å››ç§æ–¹æ³•çš„å˜ç§ï¼Œè¿™é‡Œå°±ä¸å†ä»‹ç»äº†ã€‚</p><p>IAMé¡¹ç›®ä½¿ç”¨äº†Basicã€Bearerä¸¤ç§è®¤è¯æ–¹æ³•ã€‚è¿™ä¸€è®²ï¼Œæˆ‘å…ˆæ¥ä»‹ç»ä¸‹è¿™å››ç§è®¤è¯æ–¹æ³•ï¼Œä¸‹ä¸€è®²ï¼Œæˆ‘ä¼šç»™ä½ ä»‹ç»ä¸‹IAMé¡¹ç›®æ˜¯å¦‚ä½•è®¾è®¡å’Œå®ç°è®¿é—®è®¤è¯åŠŸèƒ½çš„ã€‚</p><h2>è®¤è¯å’Œæˆæƒæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h2><p>åœ¨ä»‹ç»å››ç§åŸºæœ¬çš„è®¤è¯æ–¹æ³•ä¹‹å‰ï¼Œæˆ‘æƒ³å…ˆå¸¦ä½ åŒºåˆ†ä¸‹è®¤è¯å’Œæˆæƒï¼Œè¿™æ˜¯å¾ˆå¤šå¼€å‘è€…éƒ½å®¹æ˜“ææ··çš„ä¸¤ä¸ªæ¦‚å¿µã€‚</p><ul>\n<li><strong>è®¤è¯ï¼ˆAuthenticationï¼Œè‹±æ–‡ç¼©å†™authnï¼‰</strong>ï¼šç”¨æ¥éªŒè¯æŸä¸ªç”¨æˆ·æ˜¯å¦å…·æœ‰è®¿é—®ç³»ç»Ÿçš„æƒé™ã€‚å¦‚æœè®¤è¯é€šè¿‡ï¼Œè¯¥ç”¨æˆ·å°±å¯ä»¥è®¿é—®ç³»ç»Ÿï¼Œä»è€Œåˆ›å»ºã€ä¿®æ”¹ã€åˆ é™¤ã€æŸ¥è¯¢å¹³å°æ”¯æŒçš„èµ„æºã€‚</li>\n<li><strong>æˆæƒï¼ˆAuthorizationï¼Œè‹±æ–‡ç¼©å†™authzï¼‰</strong>ï¼šç”¨æ¥éªŒè¯æŸä¸ªç”¨æˆ·æ˜¯å¦å…·æœ‰è®¿é—®æŸä¸ªèµ„æºçš„æƒé™ï¼Œå¦‚æœæˆæƒé€šè¿‡ï¼Œè¯¥ç”¨æˆ·å°±èƒ½å¯¹èµ„æºåšå¢åˆ æ”¹æŸ¥ç­‰æ“ä½œã€‚</li>\n</ul><!-- [[[read_end]]] --><p>è¿™é‡Œï¼Œæˆ‘é€šè¿‡ä¸‹é¢çš„å›¾ç‰‡ï¼Œæ¥è®©ä½ æ˜ç™½äºŒè€…çš„åŒºåˆ«ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/8b/96/8b63cc7a624dbdb32b37898180a37596.jpg?wh=2248x1747\" alt=\"\"></p><p>å›¾ä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªä»“åº“ç³»ç»Ÿï¼Œç”¨æˆ· jamesã€colinã€aaronåˆ†åˆ«åˆ›å»ºäº†Product-Aã€Product-Bã€Product-Cã€‚ç°åœ¨ç”¨æˆ·coliné€šè¿‡ç”¨æˆ·åå’Œå¯†ç ï¼ˆè®¤è¯ï¼‰æˆåŠŸç™»é™†åˆ°ä»“åº“ç³»ç»Ÿä¸­ï¼Œä½†ä»–å°è¯•è®¿é—®Product-Aã€Product-Cå¤±è´¥ï¼Œå› ä¸ºè¿™ä¸¤ä¸ªäº§å“ä¸å±äºä»–ï¼ˆæˆæƒå¤±è´¥ï¼‰ï¼Œä½†ä»–å¯ä»¥æˆåŠŸè®¿é—®è‡ªå·±åˆ›å»ºçš„èµ„æºProduct-Bï¼ˆæˆæƒæˆåŠŸï¼‰ã€‚ç”±æ­¤å¯è§ï¼š<strong>è®¤è¯è¯æ˜äº†ä½ æ˜¯è°ï¼Œæˆæƒå†³å®šäº†ä½ èƒ½åšä»€ä¹ˆã€‚</strong></p><p>ä¸Šé¢ï¼Œæˆ‘ä»¬ä»‹ç»äº†è®¤è¯å’Œæˆæƒçš„åŒºåˆ«ã€‚é‚£ä¹ˆæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±å›åˆ°è¿™ä¸€è®²çš„é‡å¿ƒï¼šåº”ç”¨ç¨‹åºå¦‚ä½•è¿›è¡Œè®¿é—®è®¤è¯ã€‚</p><h2>å››ç§åŸºæœ¬çš„è®¤è¯æ–¹å¼</h2><p>å¸¸è§çš„è®¤è¯æ–¹å¼æœ‰å››ç§ï¼Œåˆ†åˆ«æ˜¯ Basicã€Digestã€OAuth å’Œ Bearerã€‚å…ˆæ¥çœ‹ä¸‹Basicè®¤è¯ã€‚</p><h3>Basic</h3><p>Basicè®¤è¯ï¼ˆåŸºç¡€è®¤è¯ï¼‰ï¼Œæ˜¯æœ€ç®€å•çš„è®¤è¯æ–¹å¼ã€‚å®ƒç®€å•åœ°å°†<code>ç”¨æˆ·å:å¯†ç </code>è¿›è¡Œbase64ç¼–ç åï¼Œæ”¾åˆ°HTTP Authorization Headerä¸­ã€‚HTTPè¯·æ±‚åˆ°è¾¾åç«¯æœåŠ¡åï¼Œåç«¯æœåŠ¡ä¼šè§£æå‡ºAuthorization Headerä¸­çš„base64å­—ç¬¦ä¸²ï¼Œè§£ç è·å–ç”¨æˆ·åå’Œå¯†ç ï¼Œå¹¶å°†ç”¨æˆ·åå’Œå¯†ç è·Ÿæ•°æ®åº“ä¸­è®°å½•çš„å€¼è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœåŒ¹é…åˆ™è®¤è¯é€šè¿‡ã€‚ä¾‹å¦‚ï¼š</p><pre><code>$ basic=`echo -n 'admin:Admin@2021'|base64`\n$ curl -XPOST -H&quot;Authorization: Basic ${basic}&quot; http://127.0.0.1:8080/login\n</code></pre><p>é€šè¿‡base64ç¼–ç ï¼Œå¯ä»¥å°†å¯†ç ä»¥éæ˜æ–‡çš„æ–¹å¼ä¼ è¾“ï¼Œå¢åŠ ä¸€å®šçš„å®‰å…¨æ€§ã€‚ä½†æ˜¯ï¼Œbase64ä¸æ˜¯åŠ å¯†æŠ€æœ¯ï¼Œå…¥ä¾µè€…ä»ç„¶å¯ä»¥æˆªè·base64å­—ç¬¦ä¸²ï¼Œå¹¶åç¼–ç è·å–ç”¨æˆ·åå’Œå¯†ç ã€‚å¦å¤–ï¼Œå³ä½¿Basicè®¤è¯ä¸­å¯†ç è¢«åŠ å¯†ï¼Œå…¥ä¾µè€…ä»å¯é€šè¿‡åŠ å¯†åçš„ç”¨æˆ·åå’Œå¯†ç è¿›è¡Œé‡æ”¾æ”»å‡»ã€‚</p><p>æ‰€ä»¥ï¼ŒBasicè®¤è¯è™½ç„¶ç®€å•ï¼Œä½†æä¸å®‰å…¨ã€‚ä½¿ç”¨Basicè®¤è¯çš„å”¯ä¸€æ–¹å¼å°±æ˜¯å°†å®ƒå’ŒSSLé…åˆä½¿ç”¨ï¼Œæ¥ç¡®ä¿æ•´ä¸ªè®¤è¯è¿‡ç¨‹æ˜¯å®‰å…¨çš„ã€‚</p><p>IAMé¡¹ç›®ä¸­ï¼Œä¸ºäº†æ”¯æŒå‰ç«¯é€šè¿‡ç”¨æˆ·åå’Œå¯†ç ç™»å½•ï¼Œä»ç„¶ä½¿ç”¨äº†Basicè®¤è¯ï¼Œä½†å‰åç«¯ä½¿ç”¨HTTPSæ¥é€šä¿¡ï¼Œä¿è¯äº†è®¤è¯çš„å®‰å…¨æ€§ã€‚</p><p>è¿™é‡Œéœ€è¦æ³¨æ„ï¼Œåœ¨è®¾è®¡ç³»ç»Ÿæ—¶ï¼Œè¦éµå¾ªä¸€ä¸ªé€šç”¨çš„åŸåˆ™ï¼š<strong>ä¸è¦åœ¨è¯·æ±‚å‚æ•°ä¸­ä½¿ç”¨æ˜æ–‡å¯†ç ï¼Œä¹Ÿä¸è¦åœ¨ä»»ä½•å­˜å‚¨ä¸­ä¿å­˜æ˜æ–‡å¯†ç ã€‚</strong></p><h3>Digest</h3><p>Digestè®¤è¯ï¼ˆæ‘˜è¦è®¤è¯ï¼‰ï¼Œæ˜¯å¦ä¸€ç§ HTTP è®¤è¯åè®®ï¼Œå®ƒä¸åŸºæœ¬è®¤è¯å…¼å®¹ï¼Œä½†ä¿®å¤äº†åŸºæœ¬è®¤è¯çš„ä¸¥é‡ç¼ºé™·ã€‚Digestå…·æœ‰å¦‚ä¸‹ç‰¹ç‚¹ï¼š</p><ul>\n<li>ç»ä¸ä¼šç”¨æ˜æ–‡æ–¹å¼åœ¨ç½‘ç»œä¸Šå‘é€å¯†ç ã€‚</li>\n<li>å¯ä»¥æœ‰æ•ˆé˜²æ­¢æ¶æ„ç”¨æˆ·è¿›è¡Œé‡æ”¾æ”»å‡»ã€‚</li>\n<li>å¯ä»¥æœ‰é€‰æ‹©åœ°é˜²æ­¢å¯¹æŠ¥æ–‡å†…å®¹çš„ç¯¡æ”¹ã€‚</li>\n</ul><p>æ‘˜è¦è®¤è¯çš„è¿‡ç¨‹è§ä¸‹å›¾ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/c6/b5/c693394977b4f91ae14b8c06f69056b5.jpg?wh=2248x1872\" alt=\"\"></p><p>åœ¨ä¸Šå›¾ä¸­ï¼Œå®Œæˆæ‘˜è¦è®¤è¯éœ€è¦ä¸‹é¢è¿™å››æ­¥ï¼š</p><ol>\n<li>å®¢æˆ·ç«¯è¯·æ±‚æœåŠ¡ç«¯çš„èµ„æºã€‚</li>\n<li>åœ¨å®¢æˆ·ç«¯èƒ½å¤Ÿè¯æ˜å®ƒçŸ¥é“å¯†ç ä»è€Œç¡®è®¤å…¶èº«ä»½ä¹‹å‰ï¼ŒæœåŠ¡ç«¯è®¤è¯å¤±è´¥ï¼Œè¿”å›<code>401 Unauthorized</code>ï¼Œå¹¶è¿”å›<code>WWW-Authenticate</code>å¤´ï¼Œé‡Œé¢åŒ…å«è®¤è¯éœ€è¦çš„ä¿¡æ¯ã€‚</li>\n<li>å®¢æˆ·ç«¯æ ¹æ®<code>WWW-Authenticate</code>å¤´ä¸­çš„ä¿¡æ¯ï¼Œé€‰æ‹©åŠ å¯†ç®—æ³•ï¼Œå¹¶ä½¿ç”¨å¯†ç éšæœºæ•°nonceï¼Œè®¡ç®—å‡ºå¯†ç æ‘˜è¦responseï¼Œå¹¶å†æ¬¡è¯·æ±‚æœåŠ¡ç«¯ã€‚</li>\n<li>æœåŠ¡å™¨å°†å®¢æˆ·ç«¯æä¾›çš„å¯†ç æ‘˜è¦ä¸æœåŠ¡å™¨å†…éƒ¨è®¡ç®—å‡ºçš„æ‘˜è¦è¿›è¡Œå¯¹æ¯”ã€‚å¦‚æœåŒ¹é…ï¼Œå°±è¯´æ˜å®¢æˆ·ç«¯çŸ¥é“å¯†ç ï¼Œè®¤è¯é€šè¿‡ï¼Œå¹¶è¿”å›ä¸€äº›ä¸æˆæƒä¼šè¯ç›¸å…³çš„é™„åŠ ä¿¡æ¯ï¼Œæ”¾åœ¨Authorization-Infoä¸­ã€‚</li>\n</ol><p><code>WWW-Authenticate</code>å¤´ä¸­åŒ…å«çš„ä¿¡æ¯è§ä¸‹è¡¨ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/59/9e/593e48602465b84165678bdc98467d9e.jpg?wh=2248x1755\" alt=\"\"></p><p>è™½ç„¶ä½¿ç”¨æ‘˜è¦å¯ä»¥é¿å…å¯†ç ä»¥æ˜æ–‡æ–¹å¼å‘é€ï¼Œä¸€å®šç¨‹åº¦ä¸Šä¿æŠ¤äº†å¯†ç çš„å®‰å…¨æ€§ï¼Œä½†æ˜¯ä»…ä»…éšè—å¯†ç å¹¶ä¸èƒ½ä¿è¯è¯·æ±‚æ˜¯å®‰å…¨çš„ã€‚å› ä¸ºè¯·æ±‚ï¼ˆåŒ…æ‹¬å¯†ç æ‘˜è¦ï¼‰ä»ç„¶å¯ä»¥è¢«æˆªè·ï¼Œè¿™æ ·å°±å¯ä»¥é‡æ”¾ç»™æœåŠ¡å™¨ï¼Œå¸¦æ¥å®‰å…¨é—®é¢˜ã€‚</p><p>ä¸ºäº†é˜²æ­¢é‡æ”¾æ”»å‡»ï¼ŒæœåŠ¡å™¨å‘å®¢æˆ·ç«¯å‘é€äº†å¯†ç éšæœºæ•°nonceï¼Œnonceæ¯æ¬¡è¯·æ±‚éƒ½ä¼šå˜åŒ–ã€‚å®¢æˆ·ç«¯ä¼šæ ¹æ®nonceç”Ÿæˆå¯†ç æ‘˜è¦ï¼Œè¿™ç§æ–¹å¼ï¼Œå¯ä»¥ä½¿æ‘˜è¦éšç€éšæœºæ•°çš„å˜åŒ–è€Œå˜åŒ–ã€‚æœåŠ¡ç«¯æ”¶åˆ°çš„å¯†ç æ‘˜è¦åªå¯¹ç‰¹å®šçš„éšæœºæ•°æœ‰æ•ˆï¼Œè€Œæ²¡æœ‰å¯†ç çš„è¯ï¼Œæ”»å‡»è€…å°±æ— æ³•è®¡ç®—å‡ºæ­£ç¡®çš„æ‘˜è¦ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥é˜²æ­¢é‡æ”¾æ”»å‡»ã€‚</p><p>æ‘˜è¦è®¤è¯å¯ä»¥ä¿æŠ¤å¯†ç ï¼Œæ¯”åŸºæœ¬è®¤è¯å®‰å…¨å¾ˆå¤šã€‚ä½†æ‘˜è¦è®¤è¯å¹¶ä¸èƒ½ä¿æŠ¤å†…å®¹ï¼Œæ‰€ä»¥ä»ç„¶è¦ä¸HTTPSé…åˆä½¿ç”¨ï¼Œæ¥ç¡®ä¿é€šä¿¡çš„å®‰å…¨ã€‚</p><h3>OAuth</h3><p>OAuthï¼ˆå¼€æ”¾æˆæƒï¼‰æ˜¯ä¸€ä¸ªå¼€æ”¾çš„æˆæƒæ ‡å‡†ï¼Œå…è®¸ç”¨æˆ·è®©ç¬¬ä¸‰æ–¹åº”ç”¨è®¿é—®è¯¥ç”¨æˆ·åœ¨æŸä¸€WebæœåŠ¡ä¸Šå­˜å‚¨çš„ç§å¯†èµ„æºï¼ˆä¾‹å¦‚ç…§ç‰‡ã€è§†é¢‘ã€éŸ³é¢‘ç­‰ï¼‰ï¼Œè€Œæ— éœ€å°†ç”¨æˆ·åå’Œå¯†ç æä¾›ç»™ç¬¬ä¸‰æ–¹åº”ç”¨ã€‚OAuthç›®å‰çš„ç‰ˆæœ¬æ˜¯2.0ç‰ˆã€‚</p><p>OAuth2.0ä¸€å…±åˆ†ä¸ºå››ç§æˆæƒæ–¹å¼ï¼Œåˆ†åˆ«ä¸ºå¯†ç å¼ã€éšè—å¼ã€å‡­å€Ÿå¼å’Œæˆæƒç æ¨¡å¼ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±å…·ä½“ä»‹ç»ä¸‹æ¯ä¸€ç§æˆæƒæ–¹å¼ã€‚</p><p><strong>ç¬¬ä¸€ç§ï¼Œå¯†ç å¼ã€‚</strong>å¯†ç å¼çš„æˆæƒæ–¹å¼ï¼Œå°±æ˜¯ç”¨æˆ·æŠŠç”¨æˆ·åå’Œå¯†ç ç›´æ¥å‘Šè¯‰ç»™ç¬¬ä¸‰æ–¹åº”ç”¨ï¼Œç„¶åç¬¬ä¸‰æ–¹åº”ç”¨ä½¿ç”¨ç”¨æˆ·åå’Œå¯†ç æ¢å–ä»¤ç‰Œã€‚æ‰€ä»¥ï¼Œä½¿ç”¨æ­¤æˆæƒæ–¹å¼çš„å‰ææ˜¯æ— æ³•é‡‡ç”¨å…¶ä»–æˆæƒæ–¹å¼ï¼Œå¹¶ä¸”ç”¨æˆ·é«˜åº¦ä¿¡ä»»æŸåº”ç”¨ã€‚</p><p>è®¤è¯æµç¨‹å¦‚ä¸‹ï¼š</p><ol>\n<li>ç½‘ç«™Aå‘ç”¨æˆ·å‘å‡ºè·å–ç”¨æˆ·åå’Œå¯†ç çš„è¯·æ±‚ï¼›</li>\n<li>ç”¨æˆ·åŒæ„åï¼Œç½‘ç«™Aå‡­å€Ÿç”¨æˆ·åå’Œå¯†ç å‘ç½‘ç«™Bæ¢å–ä»¤ç‰Œï¼›</li>\n<li>ç½‘ç«™BéªŒè¯ç”¨æˆ·èº«ä»½åï¼Œç»™å‡ºç½‘ç«™Aä»¤ç‰Œï¼Œç½‘ç«™Aå‡­å€Ÿä»¤ç‰Œå¯ä»¥è®¿é—®ç½‘ç«™Bå¯¹åº”æƒé™çš„èµ„æºã€‚</li>\n</ol><p><strong>ç¬¬äºŒç§ï¼Œéšè—å¼ã€‚</strong>è¿™ç§æ–¹å¼é€‚ç”¨äºå‰ç«¯åº”ç”¨ã€‚è®¤è¯æµç¨‹å¦‚ä¸‹ï¼š</p><ol>\n<li>Aç½‘ç«™æä¾›ä¸€ä¸ªè·³è½¬åˆ°Bç½‘ç«™çš„é“¾æ¥ï¼Œç”¨æˆ·ç‚¹å‡»åè·³è½¬è‡³Bç½‘ç«™ï¼Œå¹¶å‘ç”¨æˆ·è¯·æ±‚æˆæƒï¼›</li>\n<li>ç”¨æˆ·ç™»å½•Bç½‘ç«™ï¼ŒåŒæ„æˆæƒåï¼Œè·³è½¬å›Aç½‘ç«™æŒ‡å®šçš„é‡å®šå‘redirect_urlåœ°å€ï¼Œå¹¶æºå¸¦Bç½‘ç«™è¿”å›çš„ä»¤ç‰Œï¼Œç”¨æˆ·åœ¨Bç½‘ç«™çš„æ•°æ®ç»™Aç½‘ç«™ä½¿ç”¨ã€‚</li>\n</ol><p>è¿™ä¸ªæˆæƒæ–¹å¼å­˜åœ¨ç€â€œä¸­é—´äººæ”»å‡»â€çš„é£é™©ï¼Œå› æ­¤åªèƒ½ç”¨äºä¸€äº›å®‰å…¨æ€§è¦æ±‚ä¸é«˜çš„åœºæ™¯ï¼Œå¹¶ä¸”ä»¤ç‰Œçš„æœ‰æ•ˆæ—¶é—´è¦éå¸¸çŸ­ã€‚</p><p><strong>ç¬¬ä¸‰ç§ï¼Œå‡­å€Ÿå¼ã€‚</strong>è¿™ç§æ–¹å¼æ˜¯åœ¨å‘½ä»¤è¡Œä¸­è¯·æ±‚æˆæƒï¼Œé€‚ç”¨äºæ²¡æœ‰å‰ç«¯çš„å‘½ä»¤è¡Œåº”ç”¨ã€‚è®¤è¯æµç¨‹å¦‚ä¸‹ï¼š</p><ol>\n<li>åº”ç”¨Aåœ¨å‘½ä»¤è¡Œå‘åº”ç”¨Bè¯·æ±‚æˆæƒï¼Œæ­¤æ—¶åº”ç”¨Aéœ€è¦æºå¸¦åº”ç”¨Bæå‰é¢å‘çš„secretIDå’ŒsecretKeyï¼Œå…¶ä¸­secretKeyå‡ºäºå®‰å…¨æ€§è€ƒè™‘ï¼Œéœ€åœ¨åç«¯å‘é€ï¼›</li>\n<li>åº”ç”¨Bæ¥æ”¶åˆ°secretIDå’ŒsecretKeyï¼Œå¹¶è¿›è¡Œèº«ä»½éªŒè¯ï¼ŒéªŒè¯é€šè¿‡åè¿”å›ç»™åº”ç”¨Aä»¤ç‰Œã€‚</li>\n</ol><p><strong>ç¬¬å››ç§ï¼Œæˆæƒç æ¨¡å¼ã€‚</strong>è¿™ç§æ–¹å¼å°±æ˜¯ç¬¬ä¸‰æ–¹åº”ç”¨å…ˆæå‰ç”³è¯·ä¸€ä¸ªæˆæƒç ï¼Œç„¶åå†ä½¿ç”¨æˆæƒç æ¥è·å–ä»¤ç‰Œã€‚ç›¸å¯¹æ¥è¯´ï¼Œè¿™ç§æ–¹å¼å®‰å…¨æ€§æ›´é«˜ï¼Œå‰ç«¯ä¼ é€æˆæƒç ï¼Œåç«¯å­˜å‚¨ä»¤ç‰Œï¼Œä¸èµ„æºçš„é€šä¿¡éƒ½æ˜¯åœ¨åç«¯ï¼Œå¯ä»¥é¿å…ä»¤ç‰Œçš„æ³„éœ²å¯¼è‡´çš„å®‰å…¨é—®é¢˜ã€‚è®¤è¯æµç¨‹å¦‚ä¸‹ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/54/a6/547b6362aba9e9ce8b72b511afee94a6.jpg?wh=2248x1127\" alt=\"\"></p><ol>\n<li>Aç½‘ç«™æä¾›ä¸€ä¸ªè·³è½¬åˆ°Bç½‘ç«™çš„é“¾æ¥+redirect_urlï¼Œç”¨æˆ·ç‚¹å‡»åè·³è½¬è‡³Bç½‘ç«™ï¼›</li>\n<li>ç”¨æˆ·æºå¸¦å‘Bç½‘ç«™æå‰ç”³è¯·çš„client_idï¼Œå‘Bç½‘ç«™å‘èµ·èº«ä»½éªŒè¯è¯·æ±‚ï¼›</li>\n<li>ç”¨æˆ·ç™»å½•Bç½‘ç«™ï¼Œé€šè¿‡éªŒè¯ï¼ŒæˆäºˆAç½‘ç«™æƒé™ï¼Œæ­¤æ—¶ç½‘ç«™è·³è½¬å›redirect_urlï¼Œå…¶ä¸­ä¼šæœ‰Bç½‘ç«™é€šè¿‡éªŒè¯åçš„æˆæƒç é™„åœ¨è¯¥urlåï¼›</li>\n<li>ç½‘ç«™Aæºå¸¦æˆæƒç å‘ç½‘ç«™Bè¯·æ±‚ä»¤ç‰Œï¼Œç½‘ç«™BéªŒè¯æˆæƒç åï¼Œè¿”å›ä»¤ç‰Œå³access_tokenã€‚</li>\n</ol><h3>Bearer</h3><p>Bearerè®¤è¯ï¼Œä¹Ÿç§°ä¸ºä»¤ç‰Œè®¤è¯ï¼Œæ˜¯ä¸€ç§ HTTP èº«ä»½éªŒè¯æ–¹æ³•ã€‚Bearerè®¤è¯çš„æ ¸å¿ƒæ˜¯bearer tokenã€‚bearer tokenæ˜¯ä¸€ä¸ªåŠ å¯†å­—ç¬¦ä¸²ï¼Œé€šå¸¸ç”±æœåŠ¡ç«¯æ ¹æ®å¯†é’¥ç”Ÿæˆã€‚å®¢æˆ·ç«¯åœ¨è¯·æ±‚æœåŠ¡ç«¯æ—¶ï¼Œå¿…é¡»åœ¨è¯·æ±‚å¤´ä¸­åŒ…å«<code>Authorization: Bearer &lt;token&gt;</code>ã€‚æœåŠ¡ç«¯æ”¶åˆ°è¯·æ±‚åï¼Œè§£æå‡º <code>&lt;token&gt;</code> ï¼Œå¹¶æ ¡éªŒ <code>&lt;token&gt;</code> çš„åˆæ³•æ€§ï¼Œå¦‚æœæ ¡éªŒé€šè¿‡ï¼Œåˆ™è®¤è¯é€šè¿‡ã€‚è·ŸåŸºæœ¬è®¤è¯ä¸€æ ·ï¼ŒBearerè®¤è¯éœ€è¦é…åˆHTTPSä¸€èµ·ä½¿ç”¨ï¼Œæ¥ä¿è¯è®¤è¯å®‰å…¨æ€§ã€‚</p><p>å½“å‰æœ€æµè¡Œçš„tokenç¼–ç æ–¹å¼æ˜¯JSON Web Tokenï¼ˆJWTï¼ŒéŸ³åŒ jotï¼Œè¯¦è§ <a href=\"https://tools.ietf.org/html/rfc7519\">JWT RFC 7519</a>ï¼‰ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘é€šè¿‡è®²è§£JWTè®¤è¯æ¥å¸®åŠ©ä½ äº†è§£Bearerè®¤è¯çš„åŸç†ã€‚</p><h2>åŸºäºJWTçš„Tokenè®¤è¯æœºåˆ¶å®ç°</h2><p>åœ¨å…¸å‹ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œä¸ºäº†åŒºåˆ†ç”¨æˆ·å’Œä¿è¯å®‰å…¨ï¼Œå¿…é¡»å¯¹ API è¯·æ±‚è¿›è¡Œé‰´æƒï¼Œä½†æ˜¯ä¸èƒ½è¦æ±‚æ¯ä¸€ä¸ªè¯·æ±‚éƒ½è¿›è¡Œç™»å½•æ“ä½œã€‚åˆç†åšæ³•æ˜¯ï¼Œåœ¨ç¬¬ä¸€æ¬¡ç™»å½•ä¹‹åäº§ç”Ÿä¸€ä¸ªæœ‰ä¸€å®šæœ‰æ•ˆæœŸçš„ tokenï¼Œå¹¶å°†å®ƒå­˜å‚¨åœ¨æµè§ˆå™¨çš„ Cookie æˆ– LocalStorage ä¹‹ä¸­ã€‚ä¹‹åçš„è¯·æ±‚éƒ½æºå¸¦è¿™ä¸ª token ï¼Œè¯·æ±‚åˆ°è¾¾æœåŠ¡å™¨ç«¯åï¼ŒæœåŠ¡å™¨ç«¯ç”¨è¿™ä¸ª token å¯¹è¯·æ±‚è¿›è¡Œè®¤è¯ã€‚åœ¨ç¬¬ä¸€æ¬¡ç™»å½•ä¹‹åï¼ŒæœåŠ¡å™¨ä¼šå°†è¿™ä¸ª token ç”¨æ–‡ä»¶ã€æ•°æ®åº“æˆ–ç¼“å­˜æœåŠ¡å™¨ç­‰æ–¹æ³•å­˜ä¸‹æ¥ï¼Œç”¨äºä¹‹åè¯·æ±‚ä¸­çš„æ¯”å¯¹ã€‚</p><p>æˆ–è€…ä¹Ÿå¯ä»¥é‡‡ç”¨æ›´ç®€å•çš„æ–¹æ³•ï¼šç›´æ¥ç”¨å¯†é’¥æ¥ç­¾å‘Tokenã€‚è¿™æ ·ï¼Œå°±å¯ä»¥çœä¸‹é¢å¤–çš„å­˜å‚¨ï¼Œä¹Ÿå¯ä»¥å‡å°‘æ¯ä¸€æ¬¡è¯·æ±‚æ—¶å¯¹æ•°æ®åº“çš„æŸ¥è¯¢å‹åŠ›ã€‚è¿™ç§æ–¹æ³•åœ¨ä¸šç•Œå·²ç»æœ‰ä¸€ç§æ ‡å‡†çš„å®ç°æ–¹å¼ï¼Œå°±æ˜¯JWTã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘å°±æ¥å…·ä½“ä»‹ç»ä¸‹JWTã€‚</p><h3>JWTç®€ä»‹</h3><p>JWTæ˜¯Bearer Tokençš„ä¸€ä¸ªå…·ä½“å®ç°ï¼Œç”±JSONæ•°æ®æ ¼å¼ç»„æˆï¼Œé€šè¿‡HASHæ•£åˆ—ç®—æ³•ç”Ÿæˆä¸€ä¸ªå­—ç¬¦ä¸²ã€‚è¯¥å­—ç¬¦ä¸²å¯ä»¥ç”¨æ¥è¿›è¡Œæˆæƒå’Œä¿¡æ¯äº¤æ¢ã€‚</p><p>ä½¿ç”¨JWT Tokenè¿›è¡Œè®¤è¯æœ‰å¾ˆå¤šä¼˜ç‚¹ï¼Œæ¯”å¦‚è¯´æ— éœ€åœ¨æœåŠ¡ç«¯å­˜å‚¨ç”¨æˆ·æ•°æ®ï¼Œå¯ä»¥å‡è½»æœåŠ¡ç«¯å‹åŠ›ï¼›è€Œä¸”é‡‡ç”¨JSONæ•°æ®æ ¼å¼ï¼Œæ¯”è¾ƒæ˜“è¯»ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œä½¿ç”¨JWT Tokenè¿˜æœ‰è·¨è¯­è¨€ã€è½»é‡çº§ç­‰ä¼˜ç‚¹ã€‚</p><h3>JWTè®¤è¯æµç¨‹</h3><p>ä½¿ç”¨JWT Tokenè¿›è¡Œè®¤è¯çš„æµç¨‹å¦‚ä¸‹å›¾ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/48/01/480397e0a0e1503a350a082f44ec5901.jpg?wh=2248x1471\" alt=\"\"></p><p>å…·ä½“å¯ä»¥åˆ†ä¸ºå››æ­¥ï¼š</p><ol>\n<li>\n<p>å®¢æˆ·ç«¯ä½¿ç”¨ç”¨æˆ·åå’Œå¯†ç è¯·æ±‚ç™»å½•ã€‚</p>\n</li>\n<li>\n<p>æœåŠ¡ç«¯æ”¶åˆ°è¯·æ±‚åï¼Œä¼šå»éªŒè¯ç”¨æˆ·åå’Œå¯†ç ã€‚å¦‚æœç”¨æˆ·åå’Œå¯†ç è·Ÿæ•°æ®åº“è®°å½•ä¸ä¸€è‡´ï¼Œåˆ™éªŒè¯å¤±è´¥ï¼›å¦‚æœä¸€è‡´åˆ™éªŒè¯é€šè¿‡ï¼ŒæœåŠ¡ç«¯ä¼šç­¾å‘ä¸€ä¸ªTokenè¿”å›ç»™å®¢æˆ·ç«¯ã€‚</p>\n</li>\n<li>\n<p>å®¢æˆ·ç«¯æ”¶åˆ°è¯·æ±‚åä¼šå°†Tokenç¼“å­˜èµ·æ¥ï¼Œæ¯”å¦‚æ”¾åœ¨æµè§ˆå™¨Cookieä¸­æˆ–è€…LocalStorageä¸­ï¼Œä¹‹åæ¯æ¬¡è¯·æ±‚éƒ½ä¼šæºå¸¦è¯¥Tokenã€‚</p>\n</li>\n<li>\n<p>æœåŠ¡ç«¯æ”¶åˆ°è¯·æ±‚åï¼Œä¼šéªŒè¯è¯·æ±‚ä¸­çš„Tokenï¼ŒéªŒè¯é€šè¿‡åˆ™è¿›è¡Œä¸šåŠ¡é€»è¾‘å¤„ç†ï¼Œå¤„ç†å®Œåè¿”å›å¤„ç†åçš„ç»“æœã€‚</p>\n</li>\n</ol><h3>JWTæ ¼å¼</h3><p>JWTç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼Œåˆ†åˆ«æ˜¯Headerã€Payload å’Œ Signatureï¼Œå®ƒä»¬ä¹‹é—´ç”¨åœ†ç‚¹<code>.</code>è¿æ¥ï¼Œä¾‹å¦‚ï¼š</p><pre><code>eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJpYW0uYXBpLm1hcm1vdGVkdS5jb20iLCJleHAiOjE2NDI4NTY2MzcsImlkZW50aXR5IjoiYWRtaW4iLCJpc3MiOiJpYW0tYXBpc2VydmVyIiwib3JpZ19pYXQiOjE2MzUwODA2MzcsInN1YiI6ImFkbWluIn0.Shw27RKENE_2MVBq7-c8OmgYdF92UmdwS8xE-Fts2FM\n</code></pre><p>JWTä¸­ï¼Œæ¯éƒ¨åˆ†åŒ…å«çš„ä¿¡æ¯è§ä¸‹å›¾ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/0c/08/0c6657bc2d0fd2a98737660c7c373e08.jpg?wh=2248x1732\" alt=\"\"></p><p>ä¸‹é¢æˆ‘æ¥å…·ä½“ä»‹ç»ä¸‹è¿™ä¸‰éƒ¨åˆ†ï¼Œä»¥åŠå®ƒä»¬åŒ…å«çš„ä¿¡æ¯ã€‚</p><ol>\n<li>Header</li>\n</ol><p>JWT Tokençš„Headerä¸­ï¼ŒåŒ…å«ä¸¤éƒ¨åˆ†ä¿¡æ¯ï¼šä¸€æ˜¯Tokençš„ç±»å‹ï¼ŒäºŒæ˜¯Tokenæ‰€ä½¿ç”¨çš„åŠ å¯†ç®—æ³•ã€‚</p><p>ä¾‹å¦‚ï¼š</p><pre><code>{\n  &quot;typ&quot;: &quot;JWT&quot;,\n  &quot;alg&quot;: &quot;HS256&quot;\n}\n</code></pre><p>å‚æ•°è¯´æ˜ï¼š</p><ul>\n<li>typï¼šè¯´æ˜Tokenç±»å‹æ˜¯JWTã€‚</li>\n<li>algï¼šè¯´æ˜Tokençš„åŠ å¯†ç®—æ³•ï¼Œè¿™é‡Œæ˜¯HS256ï¼ˆalgç®—æ³•å¯ä»¥æœ‰å¤šç§ï¼‰ã€‚</li>\n</ul><p>è¿™é‡Œï¼Œæˆ‘ä»¬å°†Headerè¿›è¡Œbase64ç¼–ç ï¼š</p><pre><code>$ echo -n '{&quot;typ&quot;:&quot;JWT&quot;,&quot;alg&quot;:&quot;HS256&quot;}'|base64\neyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9\n</code></pre><p>åœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œå¯èƒ½è¿˜ä¼šæœ‰kidé€‰é¡¹ï¼Œç”¨æ¥æ ‡è¯†ä¸€ä¸ªå¯†é’¥IDï¼Œä¾‹å¦‚ï¼š</p><pre><code>{\n    &quot;alg&quot;: &quot;HS256&quot;,\n    &quot;kid&quot;: &quot;XhbY3aCrfjdYcP1OFJRu9xcno8JzSbUIvGE2&quot;,\n    &quot;typ&quot;: &quot;JWT&quot;\n}\n</code></pre><ol start=\"2\">\n<li>Payloadï¼ˆè½½è·ï¼‰</li>\n</ol><p>Payloadä¸­æºå¸¦Tokençš„å…·ä½“å†…å®¹ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼šJWTæ ‡å‡†ä¸­æ³¨å†Œçš„å£°æ˜ï¼ˆå¯é€‰ï¼‰ã€å…¬å…±çš„å£°æ˜ã€ç§æœ‰çš„å£°æ˜ã€‚ä¸‹é¢æ¥åˆ†åˆ«çœ‹ä¸‹ã€‚</p><p><strong>JWTæ ‡å‡†ä¸­æ³¨å†Œçš„å£°æ˜éƒ¨åˆ†ï¼Œæœ‰ä»¥ä¸‹æ ‡å‡†å­—æ®µ</strong>ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/c2/e3/c271d01d41dc7f4a45a9f2e8892057e3.png?wh=2248x2077\" alt=\"\"></p><p>æœ¬ä¾‹ä¸­çš„payloadå†…å®¹ä¸ºï¼š</p><pre><code>{\n  &quot;aud&quot;: &quot;iam.authz.marmotedu.com&quot;,\n  &quot;exp&quot;: 1604158987,\n  &quot;iat&quot;: 1604151787,\n  &quot;iss&quot;: &quot;iamctl&quot;,\n  &quot;nbf&quot;: 1604151787\n}\n</code></pre><p>è¿™é‡Œï¼Œæˆ‘ä»¬å°†Payload è¿›è¡Œbase64ç¼–ç ï¼š</p><pre><code>$ echo -n '{&quot;aud&quot;:&quot;iam.authz.marmotedu.com&quot;,&quot;exp&quot;:1604158987,&quot;iat&quot;:1604151787,&quot;iss&quot;:&quot;iamctl&quot;,&quot;nbf&quot;:1604151787}'|base64\neyJhdWQiOiJpYW0uYXV0aHoubWFybW90ZWR1LmNvbSIsImV4cCI6MTYwNDE1ODk4NywiaWF0Ijox\nNjA0MTUxNzg3LCJpc3MiOiJpYW1jdGwiLCJuYmYiOjE2MDQxNTE3ODd9\n</code></pre><p>é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰å…¬å…±çš„å£°æ˜å’Œç§æœ‰çš„å£°æ˜ã€‚å…¬å…±çš„å£°æ˜å¯ä»¥æ·»åŠ ä»»ä½•çš„éœ€è¦çš„ä¿¡æ¯ï¼Œä¸€èˆ¬æ·»åŠ ç”¨æˆ·çš„ç›¸å…³ä¿¡æ¯æˆ–å…¶ä»–ä¸šåŠ¡éœ€è¦çš„ä¿¡æ¯ï¼Œæ³¨æ„ä¸è¦æ·»åŠ æ•æ„Ÿä¿¡æ¯ï¼›ç§æœ‰å£°æ˜æ˜¯å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯æ‰€å…±åŒå®šä¹‰çš„å£°æ˜ï¼Œå› ä¸ºbase64æ˜¯å¯¹ç§°è§£å¯†çš„ï¼Œæ‰€ä»¥ä¸€èˆ¬ä¸å»ºè®®å­˜æ”¾æ•æ„Ÿä¿¡æ¯ã€‚</p><ol start=\"3\">\n<li>Signatureï¼ˆç­¾åï¼‰</li>\n</ol><p>Signatureæ˜¯Tokençš„ç­¾åéƒ¨åˆ†ï¼Œé€šè¿‡å¦‚ä¸‹æ–¹å¼ç”Ÿæˆï¼šå°†Headerå’ŒPayloadåˆ†åˆ«base64ç¼–ç åï¼Œç”¨ <code>.</code> è¿æ¥ã€‚ç„¶åå†ä½¿ç”¨Headerä¸­å£°æ˜çš„åŠ å¯†æ–¹å¼ï¼Œåˆ©ç”¨secretKeyå¯¹è¿æ¥åçš„å­—ç¬¦ä¸²è¿›è¡ŒåŠ å¯†ï¼ŒåŠ å¯†åçš„å­—ç¬¦ä¸²å³ä¸ºæœ€ç»ˆçš„Signatureã€‚</p><p>secretKeyæ˜¯å¯†é’¥ï¼Œä¿å­˜åœ¨æœåŠ¡å™¨ä¸­ï¼Œä¸€èˆ¬é€šè¿‡é…ç½®æ–‡ä»¶æ¥ä¿å­˜ï¼Œä¾‹å¦‚ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/b1/d3/b183d2695c01cd863f782edf0a6d12d3.png?wh=1024x256\" alt=\"\"></p><p>è¿™é‡Œè¦æ³¨æ„ï¼Œ<strong>å¯†é’¥ä¸€å®šä¸èƒ½æ³„éœ²ã€‚å¯†é’¥æ³„éœ²åï¼Œå…¥ä¾µè€…å¯ä»¥ä½¿ç”¨è¯¥å¯†é’¥æ¥ç­¾å‘JWT Tokenï¼Œä»è€Œå…¥ä¾µç³»ç»Ÿ</strong>ã€‚</p><p>æœ€åç”Ÿæˆçš„Tokenå¦‚ä¸‹ï¼š</p><pre><code>eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJpYW0uYXV0aHoubWFybW90ZWR1LmNvbSIsImV4cCI6MTYwNDE1ODk4NywiaWF0IjoxNjA0MTUxNzg3LCJpc3MiOiJpYW1jdGwiLCJuYmYiOjE2MDQxNTE3ODd9.LjxrK9DuAwAzUD8-9v43NzWBN7HXsSLfebw92DKd1JQ\n</code></pre><p>ç­¾ååæœåŠ¡ç«¯ä¼šè¿”å›ç”Ÿæˆçš„ Tokenï¼Œå®¢æˆ·ç«¯ä¸‹æ¬¡è¯·æ±‚ä¼šæºå¸¦è¯¥ Tokenã€‚æœåŠ¡ç«¯æ”¶åˆ° Token åä¼šè§£æå‡º header.payloadï¼Œç„¶åç”¨ç›¸åŒçš„åŠ å¯†ç®—æ³•å’Œå¯†é’¥å¯¹ header.payload å†è¿›è¡Œä¸€æ¬¡åŠ å¯†ï¼Œå¾—åˆ° Signatureã€‚å¹¶ä¸”ï¼Œå¯¹æ¯”åŠ å¯†åçš„ Signature å’Œæ”¶åˆ°çš„ Signature æ˜¯å¦ç›¸åŒï¼Œå¦‚æœç›¸åŒåˆ™éªŒè¯é€šè¿‡ï¼Œä¸ç›¸åŒåˆ™è¿”å› <code>HTTP 401 Unauthorized</code> çš„é”™è¯¯ã€‚</p><p>æœ€åï¼Œå…³äºJWTçš„ä½¿ç”¨ï¼Œæˆ‘è¿˜æœ‰ä¸¤ç‚¹å»ºè®®ï¼š</p><ul>\n<li>ä¸è¦å­˜æ”¾æ•æ„Ÿä¿¡æ¯åœ¨Tokené‡Œï¼›</li>\n<li>Payloadä¸­çš„expå€¼ä¸è¦è®¾ç½®å¾—å¤ªå¤§ï¼Œä¸€èˆ¬å¼€å‘ç‰ˆæœ¬ 7 å¤©ï¼Œçº¿ä¸Šç‰ˆæœ¬ 2 å°æ—¶ã€‚å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥æ ¹æ®éœ€è¦è‡ªè¡Œè®¾ç½®ã€‚</li>\n</ul><h2>æ€»ç»“</h2><p>åœ¨å¼€å‘Goåº”ç”¨æ—¶ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡è®¤è¯æ¥ä¿éšœåº”ç”¨çš„å®‰å…¨ã€‚è®¤è¯ï¼Œç”¨æ¥éªŒè¯æŸä¸ªç”¨æˆ·æ˜¯å¦å…·æœ‰è®¿é—®ç³»ç»Ÿçš„æƒé™ï¼Œå¦‚æœè®¤è¯é€šè¿‡ï¼Œè¯¥ç”¨æˆ·å°±å¯ä»¥è®¿é—®ç³»ç»Ÿï¼Œä»è€Œåˆ›å»ºã€ä¿®æ”¹ã€åˆ é™¤ã€æŸ¥è¯¢å¹³å°æ”¯æŒçš„èµ„æºã€‚ä¸šç•Œç›®å‰æœ‰å››ç§å¸¸ç”¨çš„è®¤è¯æ–¹å¼ï¼šBasicã€Digestã€OAuthã€Bearerã€‚å…¶ä¸­Basicå’ŒBearerç”¨å¾—æœ€å¤šã€‚</p><p>Basicè®¤è¯é€šè¿‡ç”¨æˆ·åå’Œå¯†ç æ¥è¿›è¡Œè®¤è¯ï¼Œä¸»è¦ç”¨åœ¨ç”¨æˆ·ç™»å½•åœºæ™¯ï¼›Bearerè®¤è¯é€šè¿‡Tokenæ¥è¿›è¡Œè®¤è¯ï¼Œé€šå¸¸ç”¨åœ¨APIè°ƒç”¨åœºæ™¯ã€‚ä¸ç®¡æ˜¯Basicè®¤è¯è¿˜æ˜¯Bearerè®¤è¯ï¼Œéƒ½éœ€è¦ç»“åˆHTTPSæ¥ä½¿ç”¨ï¼Œæ¥æœ€å¤§ç¨‹åº¦åœ°ä¿è¯è¯·æ±‚çš„å®‰å…¨æ€§ã€‚</p><p>Basicè®¤è¯ç®€å•æ˜“æ‡‚ï¼Œä½†æ˜¯Bearerè®¤è¯æœ‰ä¸€å®šçš„å¤æ‚åº¦ï¼Œæ‰€ä»¥è¿™ä¸€è®²çš„ååŠéƒ¨åˆ†é€šè¿‡JWT Tokenï¼Œè®²è§£äº†Bearer Tokenè®¤è¯çš„åŸç†ã€‚</p><p>JWT Tokenæ˜¯Bearerè®¤è¯çš„ä¸€ç§æ¯”è¾ƒå¥½çš„å®ç°ï¼Œä¸»è¦åŒ…å«äº†3ä¸ªéƒ¨åˆ†ï¼š</p><ul>\n<li>Headerï¼šåŒ…å«äº†Tokençš„ç±»å‹ã€Tokenä½¿ç”¨çš„åŠ å¯†ç®—æ³•ã€‚åœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œä½ è¿˜å¯ä»¥æ·»åŠ kidå­—æ®µï¼Œç”¨æ¥æ ‡è¯†ä¸€ä¸ªå¯†é’¥IDã€‚</li>\n<li>Payloadï¼šPayloadä¸­æºå¸¦Tokençš„å…·ä½“å†…å®¹ï¼Œç”±JWTæ ‡å‡†ä¸­æ³¨å†Œçš„å£°æ˜ã€å…¬å…±çš„å£°æ˜å’Œç§æœ‰çš„å£°æ˜ä¸‰éƒ¨åˆ†ç»„æˆã€‚</li>\n<li>Signatureï¼šSignatureæ˜¯Tokençš„ç­¾åéƒ¨åˆ†ï¼Œç¨‹åºé€šè¿‡éªŒè¯Signatureæ˜¯å¦åˆæ³•ï¼Œæ¥å†³å®šè®¤è¯æ˜¯å¦é€šè¿‡ã€‚</li>\n</ul><h2>è¯¾åç»ƒä¹ </h2><ol>\n<li>æ€è€ƒä¸‹ï¼šä½¿ç”¨JWTä½œä¸ºç™»å½•å‡­è¯ï¼Œå¦‚ä½•è§£å†³tokenæ³¨é”€é—®é¢˜ï¼Ÿ</li>\n<li>æ€è€ƒä¸‹ï¼šTokenæ˜¯å­˜æ”¾åœ¨LocalStorageä¸­å¥½ï¼Œè¿˜æ˜¯å­˜æ”¾åœ¨Cookieä¸­å¥½ï¼Ÿ</li>\n</ol><p>æ¬¢è¿ä½ åœ¨ç•™è¨€åŒºä¸æˆ‘äº¤æµè®¨è®ºï¼Œæˆ‘ä»¬ä¸‹ä¸€è®²è§ã€‚</p>","neighbors":{"left":{"article_title":"24 | Web æœåŠ¡ï¼šWeb æœåŠ¡æ ¸å¿ƒåŠŸèƒ½æœ‰å“ªäº›ï¼Œå¦‚ä½•å®ç°ï¼Ÿ","id":397475},"right":{"article_title":"26 | IAMé¡¹ç›®æ˜¯å¦‚ä½•è®¾è®¡å’Œå®ç°è®¿é—®è®¤è¯åŠŸèƒ½çš„ï¼Ÿ","id":399307}},"comments":[{"had_liked":false,"id":303642,"user_name":"pedro","can_delete":false,"product_type":"c1","uid":1200704,"ip_address":"","ucode":"F40C839DDFD599","user_header":"https://static001.geekbang.org/account/avatar/00/12/52/40/e57a736e.jpg","comment_is_top":false,"comment_ctime":1626912335,"is_pvip":false,"replies":[{"id":"110233","content":"æ»¡åˆ†ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"CK1.0","uid":"1167883","ctime":1627600022,"ip_address":"","comment_id":303642,"utype":1}],"discussion_count":6,"race_medal":0,"score":"53166519887","product_id":100079601,"comment_content":"é—®é¢˜1ï¼šJWTä¸­å¯æ–°å¢ä¸€ä¸ª valid å­—æ®µç”¨äºè¡¨ç¤º token æ˜¯å¦æœ‰æ•ˆï¼Œæ³¨é”€ååˆ™æ— æ•ˆã€‚<br>é—®é¢˜2ï¼štokenè¿˜æ˜¯å­˜å‚¨åœ¨cookieä¸­æ¯”è¾ƒå¥½ï¼Œå¯ç”±æœåŠ¡ç«¯ä¿å­˜ï¼Œlocalstorageåœ¨çº¯å‰ç«¯ï¼Œä¸­å¾ˆå®¹æ˜“æ³„éœ²ã€‚","like_count":12,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"å­”ä»¤é£","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":523772,"discussion_content":"æ»¡åˆ†ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627600022,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1074734,"avatar":"https://static001.geekbang.org/account/avatar/00/10/66/2e/527b73c9.jpg","nickname":"éª‘ç€ğŸš€çœ‹é“¶æ²³","note":"","ucode":"8706A99A89F0CE","race_medal":1,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":548260,"discussion_content":"å¦‚æœä¸¥æ ¼æ¥è¯´cookie å’Œ localStorage éƒ½ä¼šè§¦è¾¾åˆ°å‰ç«¯ï¼Œéƒ½æœ‰å¯èƒ½è¢«æˆªè·ï¼Œå®‰å…¨å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643103624,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1193874,"avatar":"https://static001.geekbang.org/account/avatar/00/12/37/92/961ba560.jpg","nickname":"æˆäººä»¥ğŸŸï¼Œä¸å¦‚æˆäººä»¥æ¸”","note":"","ucode":"BD53829E924B66","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":404866,"discussion_content":"ã€Œtokenè¿˜æ˜¯å­˜å‚¨åœ¨cookieä¸­æ¯”è¾ƒå¥½ï¼Œå¯ç”±æœåŠ¡ç«¯ä¿å­˜ã€ï¼Œâ€œå¯ç”±æœåŠ¡ç«¯ä¿å­˜â€æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634440852,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1119323,"avatar":"https://static001.geekbang.org/account/avatar/00/11/14/5b/a1656a72.jpg","nickname":"æ½˜è¾¾","note":"","ucode":"90F60F47063956","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":396301,"discussion_content":"æ³„éœ²è·Ÿå­˜åœ¨cookieå’Œlocalstorgaeä¸­æ²¡å…³ç³»ï¼Œç›¸åè¯·æ±‚è¢«æ‹¦æˆªåè€Œcookieä¸­æ›´å®¹æ˜“æ³„éœ²ï¼ŒæœåŠ¡å™¨ç«¯ä¿å­˜è¯´æ³•ä¹Ÿä¸å‡†ç¡®ï¼Œä»…ä»…æ˜¯æœåŠ¡å™¨ç«¯å¯ä»¥æ“ä½œï¼Œå¯¹åŒæ–¹æ–¹ä¾¿äº†ä¸€äº›ï¼Œä½†æ˜¯å¯¹äºä¸€äº›APPç«¯çš„apiï¼Œéƒ½æ˜¯ä¸€äº›æ— çŠ¶æ€çš„httpè¯·æ±‚ï¼Œæ“ä½œcookieå¯èƒ½å°±æ²¡æ„ä¹‰äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632409138,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1155645,"avatar":"https://static001.geekbang.org/account/avatar/00/11/a2/3d/a591788b.jpg","nickname":"å¢¨è¿¹","note":"","ucode":"04827A042E74E5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":386969,"discussion_content":"è¿™ä¸ªé—®é¢˜ï¼Œé¢è¯•è¢«é—®åˆ°ï¼Œç­”ä¸ä¸Šæ¥ï¼Œä½†è¿˜æ˜¯æ‹¿åˆ°22kofferã€‚å“ˆå“ˆå“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627914641,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1351076,"avatar":"https://static001.geekbang.org/account/avatar/00/14/9d/a4/e481ae48.jpg","nickname":"lesserror","note":"","ucode":"25A54D1165FCF6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1155645,"avatar":"https://static001.geekbang.org/account/avatar/00/11/a2/3d/a591788b.jpg","nickname":"å¢¨è¿¹","note":"","ucode":"04827A042E74E5","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":405438,"discussion_content":"æœ‹å‹åœ¨å“ªä¸ªå‚ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634566429,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":386969,"ip_address":""},"score":405438,"extra":""}]}]},{"had_liked":false,"id":307175,"user_name":"Geek_b52974","can_delete":false,"product_type":"c1","uid":1298252,"ip_address":"","ucode":"59884399646620","user_header":"","comment_is_top":false,"comment_ctime":1628922699,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"23103759179","product_id":100079601,"comment_content":"è¿™è¾¹æ³¨é”€åº”è¯¥åŒ…å« client çš„ä¸»åŠ¨æ³¨é”€<br>æˆ–æ˜¯ server çš„å¼ºåˆ¶æ³¨é”€<br>client ç«¯ä¸å¯ä¿¡ä»»ï¼Œæ²¡åŠæ³•å¼ºåˆ¶ä»–æ³¨é”€<br>æ‰€ä»¥åœ¨ JWT åŠ å…¥ä¸€ä¸ª valid çš„å­—æ®µåªé€‚åˆä¹–ä¹–å¬è¯çš„clientã€‚æ‰€ä»¥çœŸçš„è¦æ³¨é”€å°±å¯ä»¥ç”¨çš„å‰é¢è¯´çš„åœ¨jwt header åŠ å…¥ secret ID ï¼Œå½“æ³¨é”€æ™‚åœ¨ server çºªå½•æ­¤IDä¸ºæ— æ•ˆï¼Œä½†æ˜¯è¿™æ ·ä¼šå¢åŠ server è´Ÿæ‹…ï¼Œæ‰€ä»¥ä¸åº”è¯¥å°† jwt çš„æœ‰æ•ˆæœŸè®¾ç½®å¤ªé•¿ï¼Œé˜²æ­¢éœ€è¦å¤§é‡æŸ¥è¯¢è¢«æ³¨é”€çš„ID ","like_count":5},{"had_liked":false,"id":303745,"user_name":"å¦‚æ¥ç¥æŒ","can_delete":false,"product_type":"c1","uid":1033096,"ip_address":"","ucode":"45E20FF935BD2F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c3/88/d16816a8.jpg","comment_is_top":false,"comment_ctime":1626959422,"is_pvip":false,"replies":[{"id":"109977","content":"è€å“¥å›ç­”çš„å¾ˆèµã€‚ä¸»è¦æ˜¯åˆ é™¤tokenåœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„ç¼“å­˜","user_name":"ä½œè€…å›å¤","user_name_real":"CK1.0","uid":"1167883","ctime":1627030618,"ip_address":"","comment_id":303745,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23101795902","product_id":100079601,"comment_content":"æ–¹æ¡ˆæŒºå¤šï¼Œå¦‚ä¸‹:<br>1ã€æœ€ç®€å•çš„ï¼Œå®¢æˆ·ç«¯ç›´æ¥åˆ é™¤tokenï¼Œä½†æœ‰å¼Šç«¯<br>2ã€tokenè®¡å…¥æ•°æ®åº“ï¼Œç™»å½•åå¯¹æ¯”ï¼Œæ³¨é”€æ—¶åˆ é™¤<br>3ã€æ³¨é”€åè®°å½•åˆ°é»‘åå•ï¼Œä¸‹æ¬¡ç™»å½•åæ¸…æ¥šé»‘åå•<br>4ã€ç›´æ¥è®°åˆ°Redisï¼Œæ³¨é”€ååˆ é™¤ï¼Œç™»å½•åå­˜å…¥ï¼Œç±»ä¼¼æ•°æ®åº“<br>â€¦â€¦","like_count":5,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"å­”ä»¤é£","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":523807,"discussion_content":"è€å“¥å›ç­”çš„å¾ˆèµã€‚ä¸»è¦æ˜¯åˆ é™¤tokenåœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„ç¼“å­˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627030618,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":303654,"user_name":"8.13.3.27.30","can_delete":false,"product_type":"c1","uid":1556358,"ip_address":"","ucode":"2DE3CE3E338BAB","user_header":"https://static001.geekbang.org/account/avatar/00/17/bf/86/c0cb35f0.jpg","comment_is_top":false,"comment_ctime":1626917750,"is_pvip":false,"replies":[{"id":"110232","content":"å…¶å®éƒ½å±äº","user_name":"ä½œè€…å›å¤","user_name_real":"CK1.0","uid":"1167883","ctime":1627600000,"ip_address":"","comment_id":303654,"utype":1}],"discussion_count":3,"race_medal":0,"score":"18806786934","product_id":100079601,"comment_content":"æ ¹æ®æ–‡ä¸­è®¤è¯å’Œæˆæƒçš„è§£é‡Šã€æˆ‘ç†è§£Oauthåº”è¯¥å±äºæˆæƒï¼Ÿè€Œä¸æ˜¯è®¤è¯","like_count":4,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"å­”ä»¤é£","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":523777,"discussion_content":"å…¶å®éƒ½å±äº","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627600000,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1254273,"avatar":"https://static001.geekbang.org/account/avatar/00/13/23/81/6be4d122.jpg","nickname":"MinFrog","note":"","ucode":"AC9978B0087D4E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":564385,"discussion_content":"rfc6749å†™çš„å¾ˆæ˜ç¡®äº†ï¼Œ authrozation framework","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650243059,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1105161,"avatar":"https://static001.geekbang.org/account/avatar/00/10/dd/09/feca820a.jpg","nickname":"helloworld","note":"","ucode":"1EECCA0F43E278","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":385707,"discussion_content":"æ˜¯è®¤è¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627219799,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":316615,"user_name":"æˆäººä»¥ğŸŸï¼Œä¸å¦‚æˆäººä»¥æ¸”","can_delete":false,"product_type":"c1","uid":1193874,"ip_address":"","ucode":"BD53829E924B66","user_header":"https://static001.geekbang.org/account/avatar/00/12/37/92/961ba560.jpg","comment_is_top":false,"comment_ctime":1634453957,"is_pvip":true,"replies":[{"id":"114919","content":"è¯´çš„å¯¹ï¼Œæˆ‘æ‰¾ç¼–è¾‘æ”¹æ­£ä¸‹ã€‚æ„Ÿè°¢æ„Ÿè°¢ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"å­”ä»¤é£","uid":"1167883","ctime":1634737402,"ip_address":"","comment_id":316615,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14519355845","product_id":100079601,"comment_content":"ã€JWT ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼Œåˆ†åˆ«æ˜¯ Headerã€Payload å’Œ Signatureï¼Œå®ƒä»¬ä¹‹é—´ç”¨åœ†ç‚¹.è¿æ¥ï¼Œå¹¶ä½¿ç”¨ Base64 ç¼–ç ï¼Œä¾‹å¦‚ï¼šJhdWQiOiJpYW0uYXV0aHoubWFybW90ZWR1LmNvbSIsImV4cCI6MTYwNDE1ODk4NywiaWF0IjoxNjA0MTUxNzg3LCJpc3MiOiJpYW1jdGwiLCJuYmYiOjE2MDQxNTE3ODd9.d_2gj3vyEUlMq1b9A0tJoKdLvMInAEfQmdK7XZkB980ã€‘ è¿™éƒ¨åˆ†ä¸¾çš„ä¾‹å­ä¸æ˜¯ä¸€ä¸ª tokenï¼Œtoken åˆ†ä¸ºçš„ 3 ä¸ªéƒ¨åˆ†ç”¨ . è¿æ¥èµ·æ¥çš„ã€‚","like_count":3,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"å­”ä»¤é£","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":528435,"discussion_content":"è¯´çš„å¯¹ï¼Œæˆ‘æ‰¾ç¼–è¾‘æ”¹æ­£ä¸‹ã€‚æ„Ÿè°¢æ„Ÿè°¢ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634737402,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":304800,"user_name":"å®™æ–¯","can_delete":false,"product_type":"c1","uid":2041396,"ip_address":"","ucode":"80DF36BAD298AD","user_header":"https://static001.geekbang.org/account/avatar/00/1f/26/34/891dd45b.jpg","comment_is_top":false,"comment_ctime":1627621574,"is_pvip":true,"replies":[{"id":"110267","content":"æ„Ÿè°¢åé¦ˆï¼Œæˆ‘ä»¬æ›´æ–°ä¸‹","user_name":"ä½œè€…å›å¤","user_name_real":"CK1.0","uid":"1167883","ctime":1627685620,"ip_address":"","comment_id":304800,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10217556166","product_id":100079601,"comment_content":"digestè®¤è¯ä¸­ï¼Œâ€œWWW-Authenticationå¤´ä¸­åŒ…å«çš„ä¿¡æ¯è§ä¸‹è¡¨ï¼šâ€ï¼Œè¿™é‡Œçš„ä¸‹è¡¨ï¼Œåº”è¯¥æ²¡æœ‰passwordå§ï¼Œå¦åˆ™å¯†ç è¢«æ³„éœ²äº†","like_count":2,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"å­”ä»¤é£","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":524170,"discussion_content":"æ„Ÿè°¢åé¦ˆï¼Œæˆ‘ä»¬æ›´æ–°ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627685620,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":303987,"user_name":"kitten","can_delete":false,"product_type":"c1","uid":1027789,"ip_address":"","ucode":"E451DE087CB7CE","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ae/cd/3bffed26.jpg","comment_is_top":false,"comment_ctime":1627153405,"is_pvip":true,"replies":[{"id":"110033","content":"jwtå¯ä»¥èŠ‚çº¦æœåŠ¡ç«¯èµ„æºï¼Œä½†è¿™ä¸æ˜¯ç”¨jwtçš„å”¯ä¸€ç›®çš„ã€‚<br><br>æœåŠ¡ç«¯ä¸ä¼šç›´æ¥ç¼“å­˜tokenã€‚<br><br>ç”¨UUIDåšå‡­è¯æœ‰å¾ˆå¤šé—®é¢˜ï¼š<br>1. æ²¡æœ‰è¿‡æœŸæ—¶é—´<br>2. UUIDä¸åŒ…å«ç”¨æˆ·ä¿¡æ¯<br>3. UUIDå¯ä»¥ä¼ªé€ ï¼ŒTokenæœ‰åŠ å¯†ç®—æ³•åŠ å¯†ä¸€äº›ä¿¡æ¯ï¼Œæ›´éš¾ä¼ªé€ <br>","user_name":"ä½œè€…å›å¤","user_name_real":"CK1.0","uid":"1167883","ctime":1627256267,"ip_address":"","comment_id":303987,"utype":1}],"discussion_count":2,"race_medal":0,"score":"10217087997","product_id":100079601,"comment_content":"ç”¨jwtå°±æ˜¯ä¸ºäº†èŠ‚çº¦æœåŠ¡ç«¯ç¼“å­˜ã€‚jwt tokenä¸€æ—¦é¢å‘äº†ï¼Œåœ¨æœ‰æ•ˆæœŸå†…æ— æ³•æ³¨é”€ã€‚å¦‚æœåœ¨æœåŠ¡ç«¯å­˜äº†è¿™ä¸ªjwtçš„ç¼“å­˜ï¼Œå¤§å¯ä¸å¿…ä½¿ç”¨jwtï¼Œéšæœºç”Ÿæˆä¸€ä¸ªuuidç»™å®¢æˆ·æ®µå°±å¯ä»¥åšç™»å½•å‡­è¯äº†ã€‚æ‰€ä»¥ä¸çŸ¥é“è€å¸ˆå‡ºè¿™ä¸ªé¢˜ç›®çš„ç›®çš„æ˜¯ä»€ä¹ˆğŸ¤”ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"å­”ä»¤é£","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":523895,"discussion_content":"jwtå¯ä»¥èŠ‚çº¦æœåŠ¡ç«¯èµ„æºï¼Œä½†è¿™ä¸æ˜¯ç”¨jwtçš„å”¯ä¸€ç›®çš„ã€‚\n\næœåŠ¡ç«¯ä¸ä¼šç›´æ¥ç¼“å­˜tokenã€‚\n\nç”¨UUIDåšå‡­è¯æœ‰å¾ˆå¤šé—®é¢˜ï¼š\n1. æ²¡æœ‰è¿‡æœŸæ—¶é—´\n2. UUIDä¸åŒ…å«ç”¨æˆ·ä¿¡æ¯\n3. UUIDå¯ä»¥ä¼ªé€ ï¼ŒTokenæœ‰åŠ å¯†ç®—æ³•åŠ å¯†ä¸€äº›ä¿¡æ¯ï¼Œæ›´éš¾ä¼ªé€ \n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627256267,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2654999,"avatar":"https://static001.geekbang.org/account/avatar/00/28/83/17/df99b53d.jpg","nickname":"éšé£è€Œè¿‡","note":"","ucode":"FFD17BAA3B2312","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":392145,"discussion_content":"jwtä¸åªé™äºæ­¤ã€‚jwtæ˜¯æ— çŠ¶æ€ï¼Œæ˜¯ç°åœ¨å¤šç«¯è¯·æ±‚èµ„æºè®¤è¯å’Œæˆæƒçš„è§£å†³æ–¹æ¡ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630855338,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":324014,"user_name":"æ¨ä¸","can_delete":false,"product_type":"c1","uid":1008597,"ip_address":"","ucode":"D469B0BCA86587","user_header":"https://static001.geekbang.org/account/avatar/00/0f/63/d5/a300899a.jpg","comment_is_top":false,"comment_ctime":1638258061,"is_pvip":false,"replies":[{"id":"117664","content":"é—®é¢˜1ï¼šå®¢æˆ·ç«¯åˆ é™¤tokenï¼Œå°±æ²¡æ³•è®¿é—®äº†ã€‚æ‰€ä»¥ï¼ŒæœåŠ¡ç«¯å…¶å®ä¸ç”¨åŠ é»‘åå•","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1167883","ctime":1638360778,"ip_address":"","comment_id":324014,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5933225357","product_id":100079601,"comment_content":"é—®é¢˜1ï¼šæƒ³å®Œå…¨æ³¨é”€ï¼Œåªèƒ½æ³¨é”€æ—¶åœ¨æœåŠ¡ç«¯åŠ tokené»‘åå•ã€‚å®¢æˆ·ç«¯åˆ é™¤tokenå¹¶ä¸èƒ½ä½¿è¯¥tokenåœ¨æœåŠ¡ç«¯å¤±æ•ˆ<br>é—®é¢˜2ï¼šjwtçš„ä¼˜åŠ¿ä¹‹ä¸€å°±æ˜¯æ— çŠ¶æ€ï¼Œå› æ­¤æˆ‘è®¤ä¸ºlocalstorageæ¯”cookieæ›´å¥½ä¸€ç‚¹","like_count":1,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"å­”ä»¤é£","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":535135,"discussion_content":"é—®é¢˜1ï¼šå®¢æˆ·ç«¯åˆ é™¤tokenï¼Œå°±æ²¡æ³•è®¿é—®äº†ã€‚æ‰€ä»¥ï¼ŒæœåŠ¡ç«¯å…¶å®ä¸ç”¨åŠ é»‘åå•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638360778,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":316588,"user_name":"æˆäººä»¥ğŸŸï¼Œä¸å¦‚æˆäººä»¥æ¸”","can_delete":false,"product_type":"c1","uid":1193874,"ip_address":"","ucode":"BD53829E924B66","user_header":"https://static001.geekbang.org/account/avatar/00/12/37/92/961ba560.jpg","comment_is_top":false,"comment_ctime":1634437569,"is_pvip":true,"replies":[{"id":"114921","content":"æ„Ÿè°¢åé¦ˆï¼Œæˆ‘ä¿®æ”¹ä¸‹","user_name":"ä½œè€…å›å¤","user_name_real":"å­”ä»¤é£","uid":"1167883","ctime":1634737455,"ip_address":"","comment_id":316588,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5929404865","product_id":100079601,"comment_content":"ç”¨æˆ· colin é€šè¿‡ç”¨æˆ·åå’Œå¯†ç ï¼ˆè®¤è¯ï¼‰æˆåŠŸã€ç™»é™†ã€‘åˆ°ä»“åº“ç³»ç»Ÿï¼Œå¯ä¿®æ”¹ä¸ºï¼šç™»å½•","like_count":1,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"å­”ä»¤é£","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":528423,"discussion_content":"æ„Ÿè°¢åé¦ˆï¼Œæˆ‘ä¿®æ”¹ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634737455,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":307121,"user_name":"Sch0ng","can_delete":false,"product_type":"c1","uid":1145554,"ip_address":"","ucode":"73F6113931B1AC","user_header":"https://static001.geekbang.org/account/avatar/00/11/7a/d2/4ba67c0c.jpg","comment_is_top":false,"comment_ctime":1628871027,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5923838323","product_id":100079601,"comment_content":"è®¤è¯ç¡®è®¤ä½ æ˜¯è°ï¼Œæˆæƒå†³å®šä½ èƒ½åšä»€ä¹ˆã€‚<br>ä¸€æ–‡ç³»ç»Ÿä»‹ç»Basic&#47;Digest&#47;OAuth&#47;Bearerå››ç§è®¤è¯æ–¹å¼ï¼Œä¾¿äºå¯¹æ¯”è¾¨æç†è§£ã€‚<br>è®¤è¯å’Œæˆæƒæ˜¯ä¸ºäº†é˜²èŒƒå…¥ä¾µå’Œè¶Šæƒï¼Œä¿éšœå®‰å…¨ã€‚","like_count":1},{"had_liked":false,"id":303738,"user_name":"lark","can_delete":false,"product_type":"c1","uid":1256391,"ip_address":"","ucode":"C4C81443B4AD2F","user_header":"https://static001.geekbang.org/account/avatar/00/13/2b/c7/518cada0.jpg","comment_is_top":false,"comment_ctime":1626950302,"is_pvip":false,"replies":[{"id":"109978","content":"åˆ é™¤å®¢æˆ·ç«¯çš„ç¼“å­˜å°±å¯ä»¥äº†","user_name":"ä½œè€…å›å¤","user_name_real":"CK1.0","uid":"1167883","ctime":1627030757,"ip_address":"","comment_id":303738,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5921917598","product_id":100079601,"comment_content":"åœ¨jwtçš„payloadé‡ŒåŠ ä¸€ä¸ªéšæœºæ•°å­—æ®µï¼Œè¿‡æœŸæˆ–è€…å¤±æ•ˆå°±é‡æ–°ç”Ÿæˆä¸€ä¸ªéšæœºæ•°ã€‚","like_count":1,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"å­”ä»¤é£","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":523801,"discussion_content":"åˆ é™¤å®¢æˆ·ç«¯çš„ç¼“å­˜å°±å¯ä»¥äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627030757,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2654999,"avatar":"https://static001.geekbang.org/account/avatar/00/28/83/17/df99b53d.jpg","nickname":"éšé£è€Œè¿‡","note":"","ucode":"FFD17BAA3B2312","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":392146,"discussion_content":"ä¸¤ç«¯éƒ½å¯ä»¥åˆ ï¼Œå®¢æˆ·ç«¯åˆ é™¤äº†é‡æ–°ç”Ÿæˆä¸€ä¸ªè¦†ç›–ï¼ŒæœåŠ¡ç«¯åˆ é™¤äº†å®¢æˆ·ç«¯ä¿ç•™çš„ä¹Ÿæ˜¯æ— æ•ˆçš„ï¼Œä¹Ÿä¼šé‡æ–°ç”Ÿæˆä¸€ä¸ªtoken","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630855423,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":358162,"user_name":"Geek_521f9b","can_delete":false,"product_type":"c1","uid":3185372,"ip_address":"åŒ—äº¬","ucode":"0F187DDC06C4A3","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLDVXsv6JOOf3ib2Gjv234UcSgt1FgQibpaZojxyAbCiaXNPuxWKYYu1gJWvplygvh8rALRpdzjeOibkA/132","comment_is_top":false,"comment_ctime":1663984698,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1663984698","product_id":100079601,"comment_content":"èŒæ–°é—®ä¸€ä¸‹ï¼Œè¿™äº›è®¤è¯æ–¹å¼æ˜¯ä¸è€ƒè™‘è¢«æŠ“åŒ…çš„æƒ…å†µå—ï¼Œå»ºç«‹åœ¨httpsä¹‹ä¸Šï¼Œé‚£h264åŠ å¯†æ˜¯ä¸ºäº†ä»€ä¹ˆï¼Œç›´æ¥ç”¨base64ä¸è¡Œå—","like_count":1},{"had_liked":false,"id":349861,"user_name":"Geek_6bdb4e","can_delete":false,"product_type":"c1","uid":2720810,"ip_address":"","ucode":"2953D400AA5385","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/xfclWEPQ7szTZnKqnX9icSbgDWV0VAib3Cyo8Vg0OG3Usby88ic7ZgO2ho5lj0icOWI4JeJ70zUBiaTW1xh1UCFRPqA/132","comment_is_top":false,"comment_ctime":1656388773,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1656388773","product_id":100079601,"comment_content":"æƒ³é—®ä¸€ä¸ªå¯èƒ½ä½çº§çš„é—®é¢˜ï¼ŒLocalStorageæ˜¯å•¥æ„æ€","like_count":0},{"had_liked":false,"id":349840,"user_name":"The brain is a good thing","can_delete":false,"product_type":"c1","uid":1710489,"ip_address":"","ucode":"7CE2C85BC5C092","user_header":"https://static001.geekbang.org/account/avatar/00/1a/19/99/ba3719e1.jpg","comment_is_top":false,"comment_ctime":1656378824,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1656378824","product_id":100079601,"comment_content":"jwtç»­ç­¾æ€ä¹ˆåšä¼šæ¯”è¾ƒå¥½å‘¢ï¼ŒæœåŠ¡ç«¯æ˜¯ä¸æ˜¯è¦å¯¹tokençš„æœ‰æ•ˆæœŸåšä¸€ä¸ªä¸´ç•Œç‚¹åˆ¤æ–­ï¼Ÿæ¯”å¦‚è®¾ç½®2å°æ—¶ï¼Œè¿˜æœ‰5åˆ†é’Ÿå°±è¦è¿‡æœŸï¼Œå°±ä¼šé‡æ–°ç”Ÿæˆæ–°çš„tokenï¼Ÿ ä½†è¿™æ ·åˆä¼šæœ‰ä¸ªé—®é¢˜ï¼Œå®¢æˆ·ç«¯ è¶…è¿‡5åˆ†é’Ÿæ²¡æœ‰æ“ä½œå°±ä¼šå¯¼è‡´tokenå¤±æ•ˆã€‚å¹¶ä¸” clientæ€ä¹ˆæ„ŸçŸ¥ æ˜¯å¦åº”è¯¥é‡æ–°åˆ·æ–°tokenå‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":346477,"user_name":"Geek_f23c82","can_delete":false,"product_type":"c1","uid":2725008,"ip_address":"","ucode":"40BABEF7078F37","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIW5xLKMIwlibBXdP5sGVqhXAGuLYk7XFBrhzkFytlKicjNpSHIKXQclDUlSbD9s2HDuOiaBXslCqVbg/132","comment_is_top":false,"comment_ctime":1653188736,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1653188736","product_id":100079601,"comment_content":"Digestè®¤è¯çš„æµç¨‹ä¸­ï¼Œå®¢æˆ·ç«¯è¿”å›çš„Headeråº”è¯¥æ˜¯â€œAuthorizationâ€ï¼Œè€Œä¸æ˜¯â€œWWW-Authenticateâ€ã€‚","like_count":0},{"had_liked":false,"id":337454,"user_name":"å²åŠªæ¯”","can_delete":false,"product_type":"c1","uid":1922171,"ip_address":"","ucode":"20D1EC05778BC6","user_header":"https://static001.geekbang.org/account/avatar/00/1d/54/7b/780c04ff.jpg","comment_is_top":false,"comment_ctime":1646833383,"is_pvip":false,"replies":[{"id":"123425","content":"ä¸æ˜¯åŒ…å«ä¸è¢«åŒ…å«çš„å…³ç³»ã€‚è®¤è¯æµç¨‹éƒ½ä¸ä¸€æ ·","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1167883","ctime":1647037880,"ip_address":"","comment_id":337454,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1646833383","product_id":100079601,"comment_content":"Oauthçš„å¯†ç è®¤è¯æ–¹å¼å’Œbearerè®¤è¯æ–¹å¼æ˜¯å•¥å…³ç³»ï¼Œæ„Ÿè§‰ç¬¬ä¸€ç§åŒ…å«äº†ç¬¬äºŒç§å•Šï¼Œæœ€åéƒ½ç”¨åˆ°tokenå»åšè®¤è¯","like_count":0,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"å­”ä»¤é£","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":555685,"discussion_content":"ä¸æ˜¯åŒ…å«ä¸è¢«åŒ…å«çš„å…³ç³»ã€‚è®¤è¯æµç¨‹éƒ½ä¸ä¸€æ ·","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647037880,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":323584,"user_name":"yandongxiao","can_delete":false,"product_type":"c1","uid":1017700,"ip_address":"","ucode":"D397F4DB0109C8","user_header":"https://static001.geekbang.org/account/avatar/00/0f/87/64/3882d90d.jpg","comment_is_top":false,"comment_ctime":1638001769,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1638001769","product_id":100079601,"comment_content":"æ€»ç»“ï¼š<br>1. è®¤è¯çš„å››ç§æ–¹å¼ï¼šBasicè®¤è¯ã€Digestè®¤è¯ã€OAuthè®¤è¯ã€Bearerè®¤è¯ã€‚<br>2. Basicè®¤è¯ç›´æ¥ä¼ é€’ç”¨æˆ·åå’Œå¯†ç <br>3. Digestè®¤è¯æ„Ÿè§‰æ¯”è¾ƒéº»çƒ¦ï¼Œæœ‰ä¸€åŠçš„é€šä¿¡éƒ½æ˜¯æ— æ•ˆçš„ã€‚<br>4. OAuthè®¤è¯è§£å†³çš„æ˜¯ï¼Œç½‘ç«™Aå¦‚ä½•åœ¨ä¸è·å–ç”¨æˆ·å¯†ç çš„æƒ…å†µä¸‹ï¼Œå®‰å…¨åœ°è·å–ä»–åœ¨Bç½‘ç«™ä¸Šçš„èµ„æºã€‚å‡­å€Ÿå¼æ¯”è¾ƒå®‰å…¨ï¼Œå‰ç«¯ä¼ é€’çš„æ˜¯æˆæƒç ï¼›åç«¯é€šè¿‡Tokenæ¥å­˜å–èµ„æºã€‚<br>5. Bearer è®¤è¯ï¼Œè¦è§£å†³çš„æ˜¯è®¤è¯é€šè¿‡åï¼Œç»™æœåŠ¡ç«¯ç»™å®¢æˆ·ç«¯é¢å‘ä¸€ä¸ªTokenï¼Œæ¥ä¸‹æ¥çš„è¯·æ±‚ï¼Œå®¢æˆ·ç«¯åªéœ€è¦æºå¸¦Tokenå³å¯ã€‚<br>6. JWT æ˜¯ä¸€ç§å®ç°Bearerè®¤è¯çš„æŠ€æœ¯ï¼ŒæœåŠ¡ç«¯æ— éœ€å­˜å‚¨è¯¥Tokenã€‚","like_count":0},{"had_liked":false,"id":318656,"user_name":"yss","can_delete":false,"product_type":"c1","uid":1922488,"ip_address":"","ucode":"793E8448355F3F","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJkOj8VUxLjDKp6jRWJrABnnsg7U1sMSkM8FO6ULPwrqNpicZvTQ7kwctmu38iaJYHybXrmbusd8trg/132","comment_is_top":false,"comment_ctime":1635384062,"is_pvip":false,"replies":[{"id":"115980","content":"é—®é¢˜1ï¼šåˆ é™¤æ—¶å¯¹çš„ï¼Œä¸ç”¨åŠ é»‘åå•ã€‚<br>é—®é¢˜2ï¼šæ ¹æ®ä¸šåŠ¡åœºæ™¯é€‰æ‹©ï¼Œä½ è¯´çš„æ²¡æ¯›ç—…ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å­”ä»¤é£","uid":"1167883","ctime":1636005304,"ip_address":"","comment_id":318656,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1635384062","product_id":100079601,"comment_content":"é—®é¢˜1ï¼šæ³¨é”€ç›´æ¥åœ¨clientç«¯åˆ é™¤ï¼ŒåŒæ—¶åœ¨æœåŠ¡ç«¯åŠ å…¥é»‘åå•<br>é—®é¢˜2ï¼šæˆ‘ä»¬ä¸šåŠ¡è¦æ±‚æ¯æ¬¡è®¿é—®ç³»ç»Ÿéƒ½éœ€è¦å…ˆè¿›è¡Œä¸€æ¬¡ç™»é™†æ“ä½œï¼Œå› æ­¤æˆ‘ä»¬çš„Tokenæ˜¯ä»¥å†…éƒ¨å˜é‡å­˜å‚¨åœ¨åŒ¿åå˜é‡ä¸­ï¼Œè®¿é—®APIæ—¶ç›´æ¥é™„åœ¨headä¸­å‘é€ï¼Œå­˜æ”¾localstorageå’Œcookieä¸­éƒ½å®¹æ˜“è¢«ç›´æ¥æ‹¿å–ï¼ŒåŒæ—¶ä¹Ÿèƒ½ä¿è¯åœ¨æ¯æ¬¡å¿…é¡»ç™»é™†ã€‚","like_count":0,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"å­”ä»¤é£","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529330,"discussion_content":"é—®é¢˜1ï¼šåˆ é™¤æ—¶å¯¹çš„ï¼Œä¸ç”¨åŠ é»‘åå•ã€‚\né—®é¢˜2ï¼šæ ¹æ®ä¸šåŠ¡åœºæ™¯é€‰æ‹©ï¼Œä½ è¯´çš„æ²¡æ¯›ç—…ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636005304,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":311368,"user_name":"æˆäººä»¥ğŸŸï¼Œä¸å¦‚æˆäººä»¥æ¸”","can_delete":false,"product_type":"c1","uid":1193874,"ip_address":"","ucode":"BD53829E924B66","user_header":"https://static001.geekbang.org/account/avatar/00/12/37/92/961ba560.jpg","comment_is_top":false,"comment_ctime":1631189879,"is_pvip":true,"replies":[{"id":"113693","content":"tokenä¸ç”¨å­˜èµ·æ¥ã€‚ä½¿ç”¨æœåŠ¡ç«¯ä¿å­˜çš„å¯†é’¥åå‘åŠ å¯†ï¼ŒåŠ å¯†åçš„å€¼è·Ÿtokenä¸­å‰ä¸¤æ®µçš„å€¼ä¸€è‡´è¯´æ˜tokenæ˜¯ç»è¿‡åˆæ³•çš„ï¼Œè®¤è¯é€šè¿‡ã€‚<br><br>ä½ è¯´çš„æ˜¯å¯†é’¥å§ï¼Œå¯†é’¥éœ€è¦ä¿å­˜ï¼Œä»è¿™ç‚¹æ¥çœ‹å’Œå¯†ç æ˜¯ä¸€æ ·çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"CK1.0","uid":"1167883","ctime":1632760450,"ip_address":"","comment_id":311368,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1631189879","product_id":100079601,"comment_content":"è¿™ä¸ªåœ°æ–¹ä¸ç†è§£ï¼Œæœ‰è¿™æ ·çš„ç–‘é—®ï¼šJWT æ˜¯å¦‚ä½•çœä¸‹é¢å¤–çš„å­˜å‚¨ï¼Œå‡å°‘æ¯ä¸€æ¬¡è¯·æ±‚æ—¶å¯¹æ•°æ®åº“çš„æŸ¥è¯¢å‹åŠ›ï¼Ÿæ¯•ç«Ÿ token ä¹Ÿæ˜¯éœ€è¦å­˜èµ·æ¥çš„ã€‚","like_count":0,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"å­”ä»¤é£","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526571,"discussion_content":"tokenä¸ç”¨å­˜èµ·æ¥ã€‚ä½¿ç”¨æœåŠ¡ç«¯ä¿å­˜çš„å¯†é’¥åå‘åŠ å¯†ï¼ŒåŠ å¯†åçš„å€¼è·Ÿtokenä¸­å‰ä¸¤æ®µçš„å€¼ä¸€è‡´è¯´æ˜tokenæ˜¯ç»è¿‡åˆæ³•çš„ï¼Œè®¤è¯é€šè¿‡ã€‚\n\nä½ è¯´çš„æ˜¯å¯†é’¥å§ï¼Œå¯†é’¥éœ€è¦ä¿å­˜ï¼Œä»è¿™ç‚¹æ¥çœ‹å’Œå¯†ç æ˜¯ä¸€æ ·çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632760450,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":308870,"user_name":"ppd0705","can_delete":false,"product_type":"c1","uid":1155646,"ip_address":"","ucode":"EB63D4E3FD1E9A","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKotsBr2icbYNYlRSlicGUD1H7lulSTQUAiclsEz9gnG5kCW9qeDwdYtlRMXic3V6sj9UrfKLPJnQojag/132","comment_is_top":false,"comment_ctime":1629850611,"is_pvip":false,"replies":[{"id":"112020","content":"ä¸ç”¨çŸ¥é“æ˜æ–‡å¯†ç çš„ã€‚åªéœ€è¦çŸ¥é“ä¸€éƒ¨åˆ†","user_name":"ä½œè€…å›å¤","user_name_real":"CK1.0","uid":"1167883","ctime":1630113120,"ip_address":"","comment_id":308870,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1629850611","product_id":100079601,"comment_content":"è¯·é—®Digestè®¤è¯å¦‚æœæœåŠ¡ç«¯å­˜çš„æ˜¯password_hash,è¿˜å¯ä»¥éªŒè¯å®¢æˆ·ç«¯çš„æ‘˜è¦å—ï¼Ÿæˆ‘ç†è§£æœåŠ¡ç«¯å¾—èƒ½çŸ¥é“æ˜æ–‡å¯†ç æ‰è¡Œ","like_count":0,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"å­”ä»¤é£","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":525652,"discussion_content":"ä¸ç”¨çŸ¥é“æ˜æ–‡å¯†ç çš„ã€‚åªéœ€è¦çŸ¥é“ä¸€éƒ¨åˆ†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630113120,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":304070,"user_name":"helloworld","can_delete":false,"product_type":"c1","uid":1105161,"ip_address":"","ucode":"1EECCA0F43E278","user_header":"https://static001.geekbang.org/account/avatar/00/10/dd/09/feca820a.jpg","comment_is_top":false,"comment_ctime":1627220032,"is_pvip":false,"replies":[{"id":"110139","content":"è¿™é‡Œå†™åäº†ï¼Œæˆ‘çº æ­£ä¸‹ã€‚çº¿ä¸Šç‰ˆä¸€èˆ¬æ˜¯2hï¼Œå¼€å‘ç‰ˆéšæ„ã€‚2hä¹Ÿéœ€è¦ä½ æ ¹æ®å®é™…éœ€è¦è¯„ä¼°å“ˆï¼Œå¦‚æœä½ æ²¡ä»»ä½•éœ€æ±‚å¯ä»¥å…ˆè®¾ç½®ä¸º2h","user_name":"ä½œè€…å›å¤","user_name_real":"CK1.0","uid":"1167883","ctime":1627381930,"ip_address":"","comment_id":304070,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1627220032","product_id":100079601,"comment_content":"â€œPayload ä¸­çš„ exp å€¼ä¸è¦è®¾ç½®çš„å¤ªå¤§ï¼Œä¸€èˆ¬å¼€å‘ç‰ˆæœ¬ 2 å°æ—¶ï¼Œä¸Šçº¿ç‰ˆæœ¬ 7 å¤©â€ï¼Œå¼€å‘ç‰ˆæœ¬ä¸ºä»€ä¹ˆæ¯”ä¸Šçº¿ç‰ˆæœ¬å°‘è¿™ä¹ˆå¤šï¼ŒåŸºäºä»€ä¹ˆè€ƒè™‘çš„å‘¢","like_count":0,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"å­”ä»¤é£","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":523922,"discussion_content":"è¿™é‡Œå†™åäº†ï¼Œæˆ‘çº æ­£ä¸‹ã€‚çº¿ä¸Šç‰ˆä¸€èˆ¬æ˜¯2hï¼Œå¼€å‘ç‰ˆéšæ„ã€‚2hä¹Ÿéœ€è¦ä½ æ ¹æ®å®é™…éœ€è¦è¯„ä¼°å“ˆï¼Œå¦‚æœä½ æ²¡ä»»ä½•éœ€æ±‚å¯ä»¥å…ˆè®¾ç½®ä¸º2h","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627381930,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}