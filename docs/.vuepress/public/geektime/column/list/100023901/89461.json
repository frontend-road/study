{"id":89461,"title":"19 | CountDownLatchå’ŒCyclicBarrierï¼šå¦‚ä½•è®©å¤šçº¿ç¨‹æ­¥è°ƒä¸€è‡´ï¼Ÿ","content":"<p>å‰å‡ å¤©è€æ¿çªç„¶åŒ†åŒ†å¿™å¿™è¿‡æ¥ï¼Œè¯´å¯¹è´¦ç³»ç»Ÿæœ€è¿‘è¶Šæ¥è¶Šæ…¢äº†ï¼Œèƒ½ä¸èƒ½å¿«é€Ÿä¼˜åŒ–ä¸€ä¸‹ã€‚æˆ‘äº†è§£äº†å¯¹è´¦ç³»ç»Ÿçš„ä¸šåŠ¡åï¼Œå‘ç°è¿˜æ˜¯æŒºç®€å•çš„ï¼Œç”¨æˆ·é€šè¿‡åœ¨çº¿å•†åŸä¸‹å•ï¼Œä¼šç”Ÿæˆç”µå­è®¢å•ï¼Œä¿å­˜åœ¨è®¢å•åº“ï¼›ä¹‹åç‰©æµä¼šç”Ÿæˆæ´¾é€å•ç»™ç”¨æˆ·å‘è´§ï¼Œæ´¾é€å•ä¿å­˜åœ¨æ´¾é€å•åº“ã€‚ä¸ºäº†é˜²æ­¢æ¼æ´¾é€æˆ–è€…é‡å¤æ´¾é€ï¼Œå¯¹è´¦ç³»ç»Ÿæ¯å¤©è¿˜ä¼šæ ¡éªŒæ˜¯å¦å­˜åœ¨å¼‚å¸¸è®¢å•ã€‚</p><p>å¯¹è´¦ç³»ç»Ÿçš„å¤„ç†é€»è¾‘å¾ˆç®€å•ï¼Œä½ å¯ä»¥å‚è€ƒä¸‹é¢çš„å¯¹è´¦ç³»ç»Ÿæµç¨‹å›¾ã€‚ç›®å‰å¯¹è´¦ç³»ç»Ÿçš„å¤„ç†é€»è¾‘æ˜¯é¦–å…ˆæŸ¥è¯¢è®¢å•ï¼Œç„¶åæŸ¥è¯¢æ´¾é€å•ï¼Œä¹‹åå¯¹æ¯”è®¢å•å’Œæ´¾é€å•ï¼Œå°†å·®å¼‚å†™å…¥å·®å¼‚åº“ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/06/fe/068418bdc371b8a1b4b740428a3b3ffe.png?wh=1142*626\" alt=\"\"></p><center><span class=\"reference\">å¯¹è´¦ç³»ç»Ÿæµç¨‹å›¾</span></center><p>å¯¹è´¦ç³»ç»Ÿçš„ä»£ç æŠ½è±¡ä¹‹åï¼Œä¹Ÿå¾ˆç®€å•ï¼Œæ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼Œå°±æ˜¯åœ¨ä¸€ä¸ªå•çº¿ç¨‹é‡Œé¢å¾ªç¯æŸ¥è¯¢è®¢å•ã€æ´¾é€å•ï¼Œç„¶åæ‰§è¡Œå¯¹è´¦ï¼Œæœ€åå°†å†™å…¥å·®å¼‚åº“ã€‚</p><pre><code>while(å­˜åœ¨æœªå¯¹è´¦è®¢å•){\n  // æŸ¥è¯¢æœªå¯¹è´¦è®¢å•\n  pos = getPOrders();\n  // æŸ¥è¯¢æ´¾é€å•\n  dos = getDOrders();\n  // æ‰§è¡Œå¯¹è´¦æ“ä½œ\n  diff = check(pos, dos);\n  // å·®å¼‚å†™å…¥å·®å¼‚åº“\n  save(diff);\n} \n</code></pre><h2>åˆ©ç”¨å¹¶è¡Œä¼˜åŒ–å¯¹è´¦ç³»ç»Ÿ</h2><p>è€æ¿è¦æˆ‘ä¼˜åŒ–æ€§èƒ½ï¼Œé‚£æˆ‘å°±é¦–å…ˆè¦æ‰¾åˆ°è¿™ä¸ªå¯¹è´¦ç³»ç»Ÿçš„ç“¶é¢ˆæ‰€åœ¨ã€‚</p><p>ç›®å‰çš„å¯¹è´¦ç³»ç»Ÿï¼Œç”±äºè®¢å•é‡å’Œæ´¾é€å•é‡å·¨å¤§ï¼Œæ‰€ä»¥æŸ¥è¯¢æœªå¯¹è´¦è®¢å•getPOrders()å’ŒæŸ¥è¯¢æ´¾é€å•getDOrders()ç›¸å¯¹è¾ƒæ…¢ï¼Œé‚£æœ‰æ²¡æœ‰åŠæ³•å¿«é€Ÿä¼˜åŒ–ä¸€ä¸‹å‘¢ï¼Ÿç›®å‰å¯¹è´¦ç³»ç»Ÿæ˜¯å•çº¿ç¨‹æ‰§è¡Œçš„ï¼Œå›¾å½¢åŒ–åæ˜¯ä¸‹å›¾è¿™ä¸ªæ ·å­ã€‚å¯¹äºä¸²è¡ŒåŒ–çš„ç³»ç»Ÿï¼Œä¼˜åŒ–æ€§èƒ½é¦–å…ˆæƒ³åˆ°çš„æ˜¯èƒ½å¦<strong>åˆ©ç”¨å¤šçº¿ç¨‹å¹¶è¡Œå¤„ç†</strong>ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/cd/a5/cd997c259e4165c046e79e766abfe2a5.png?wh=1142*507\" alt=\"\"></p><center><span class=\"reference\">å¯¹è´¦ç³»ç»Ÿå•çº¿ç¨‹æ‰§è¡Œç¤ºæ„å›¾</span></center><p>æ‰€ä»¥ï¼Œè¿™é‡Œä½ åº”è¯¥èƒ½å¤Ÿçœ‹å‡ºæ¥è¿™ä¸ªå¯¹è´¦ç³»ç»Ÿé‡Œçš„ç“¶é¢ˆï¼šæŸ¥è¯¢æœªå¯¹è´¦è®¢å•getPOrders()å’ŒæŸ¥è¯¢æ´¾é€å•getDOrders()æ˜¯å¦å¯ä»¥å¹¶è¡Œå¤„ç†å‘¢ï¼Ÿæ˜¾ç„¶æ˜¯å¯ä»¥çš„ï¼Œå› ä¸ºè¿™ä¸¤ä¸ªæ“ä½œå¹¶æ²¡æœ‰å…ˆåé¡ºåºçš„ä¾èµ–ã€‚è¿™ä¸¤ä¸ªæœ€è€—æ—¶çš„æ“ä½œå¹¶è¡Œä¹‹åï¼Œæ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚å¯¹æ¯”ä¸€ä¸‹å•çº¿ç¨‹çš„æ‰§è¡Œç¤ºæ„å›¾ï¼Œä½ ä¼šå‘ç°åŒç­‰æ—¶é—´é‡Œï¼Œå¹¶è¡Œæ‰§è¡Œçš„ååé‡è¿‘ä¹å•çº¿ç¨‹çš„2å€ï¼Œä¼˜åŒ–æ•ˆæœè¿˜æ˜¯ç›¸å¯¹æ˜æ˜¾çš„ã€‚</p><!-- [[[read_end]]] --><p><img src=\"https://static001.geekbang.org/resource/image/a5/3b/a563c39ece918578ad2ff33ab5f3743b.png?wh=1142*567\" alt=\"\"></p><center><span class=\"reference\">å¯¹è´¦ç³»ç»Ÿå¹¶è¡Œæ‰§è¡Œç¤ºæ„å›¾</span></center><p>æ€è·¯æœ‰äº†ï¼Œä¸‹é¢æˆ‘ä»¬å†æ¥çœ‹çœ‹å¦‚ä½•ç”¨ä»£ç å®ç°ã€‚åœ¨ä¸‹é¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸¤ä¸ªçº¿ç¨‹T1å’ŒT2ï¼Œå¹¶è¡Œæ‰§è¡ŒæŸ¥è¯¢æœªå¯¹è´¦è®¢å•getPOrders()å’ŒæŸ¥è¯¢æ´¾é€å•getDOrders()è¿™ä¸¤ä¸ªæ“ä½œã€‚åœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œå¯¹è´¦æ“ä½œcheck()å’Œå·®å¼‚å†™å…¥save()ä¸¤ä¸ªæ“ä½œã€‚ä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯ï¼šä¸»çº¿ç¨‹éœ€è¦ç­‰å¾…çº¿ç¨‹T1å’ŒT2æ‰§è¡Œå®Œæ‰èƒ½æ‰§è¡Œcheck()å’Œsave()è¿™ä¸¤ä¸ªæ“ä½œï¼Œä¸ºæ­¤æˆ‘ä»¬é€šè¿‡è°ƒç”¨T1.join()å’ŒT2.join()æ¥å®ç°ç­‰å¾…ï¼Œå½“T1å’ŒT2çº¿ç¨‹é€€å‡ºæ—¶ï¼Œè°ƒç”¨T1.join()å’ŒT2.join()çš„ä¸»çº¿ç¨‹å°±ä¼šä»é˜»å¡æ€è¢«å”¤é†’ï¼Œä»è€Œæ‰§è¡Œä¹‹åçš„check()å’Œsave()ã€‚</p><pre><code>while(å­˜åœ¨æœªå¯¹è´¦è®¢å•){\n  // æŸ¥è¯¢æœªå¯¹è´¦è®¢å•\n  Thread T1 = new Thread(()-&gt;{\n    pos = getPOrders();\n  });\n  T1.start();\n  // æŸ¥è¯¢æ´¾é€å•\n  Thread T2 = new Thread(()-&gt;{\n    dos = getDOrders();\n  });\n  T2.start();\n  // ç­‰å¾…T1ã€T2ç»“æŸ\n  T1.join();\n  T2.join();\n  // æ‰§è¡Œå¯¹è´¦æ“ä½œ\n  diff = check(pos, dos);\n  // å·®å¼‚å†™å…¥å·®å¼‚åº“\n  save(diff);\n} \n</code></pre><h2>ç”¨CountDownLatchå®ç°çº¿ç¨‹ç­‰å¾…</h2><p>ç»è¿‡ä¸Šé¢çš„ä¼˜åŒ–ä¹‹åï¼ŒåŸºæœ¬ä¸Šå¯ä»¥è·Ÿè€æ¿æ±‡æŠ¥æ”¶å·¥äº†ï¼Œä½†è¿˜æ˜¯æœ‰ç‚¹ç¾ä¸­ä¸è¶³ï¼Œç›¸ä¿¡ä½ ä¹Ÿå‘ç°äº†ï¼Œwhileå¾ªç¯é‡Œé¢æ¯æ¬¡éƒ½ä¼šåˆ›å»ºæ–°çš„çº¿ç¨‹ï¼Œè€Œåˆ›å»ºçº¿ç¨‹å¯æ˜¯ä¸ªè€—æ—¶çš„æ“ä½œã€‚æ‰€ä»¥æœ€å¥½æ˜¯åˆ›å»ºå‡ºæ¥çš„çº¿ç¨‹èƒ½å¤Ÿå¾ªç¯åˆ©ç”¨ï¼Œä¼°è®¡è¿™æ—¶ä½ å·²ç»æƒ³åˆ°çº¿ç¨‹æ± äº†ï¼Œæ˜¯çš„ï¼Œçº¿ç¨‹æ± å°±èƒ½è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><p>è€Œä¸‹é¢çš„ä»£ç å°±æ˜¯ç”¨çº¿ç¨‹æ± ä¼˜åŒ–åçš„ï¼šæˆ‘ä»¬é¦–å…ˆåˆ›å»ºäº†ä¸€ä¸ªå›ºå®šå¤§å°ä¸º2çš„çº¿ç¨‹æ± ï¼Œä¹‹ååœ¨whileå¾ªç¯é‡Œé‡å¤åˆ©ç”¨ã€‚ä¸€åˆ‡çœ‹ä¸Šå»éƒ½å¾ˆé¡ºåˆ©ï¼Œä½†æ˜¯æœ‰ä¸ªé—®é¢˜å¥½åƒæ— è§£äº†ï¼Œé‚£å°±æ˜¯ä¸»çº¿ç¨‹å¦‚ä½•çŸ¥é“getPOrders()å’ŒgetDOrders()è¿™ä¸¤ä¸ªæ“ä½œä»€ä¹ˆæ—¶å€™æ‰§è¡Œå®Œã€‚å‰é¢ä¸»çº¿ç¨‹é€šè¿‡è°ƒç”¨çº¿ç¨‹T1å’ŒT2çš„join()æ–¹æ³•æ¥ç­‰å¾…çº¿ç¨‹T1å’ŒT2é€€å‡ºï¼Œä½†æ˜¯åœ¨çº¿ç¨‹æ± çš„æ–¹æ¡ˆé‡Œï¼Œçº¿ç¨‹æ ¹æœ¬å°±ä¸ä¼šé€€å‡ºï¼Œæ‰€ä»¥join()æ–¹æ³•å·²ç»å¤±æ•ˆäº†ã€‚</p><pre><code>// åˆ›å»º2ä¸ªçº¿ç¨‹çš„çº¿ç¨‹æ± \nExecutor executor = \n  Executors.newFixedThreadPool(2);\nwhile(å­˜åœ¨æœªå¯¹è´¦è®¢å•){\n  // æŸ¥è¯¢æœªå¯¹è´¦è®¢å•\n  executor.execute(()-&gt; {\n    pos = getPOrders();\n  });\n  // æŸ¥è¯¢æ´¾é€å•\n  executor.execute(()-&gt; {\n    dos = getDOrders();\n  });\n  \n  /* ï¼Ÿï¼Ÿå¦‚ä½•å®ç°ç­‰å¾…ï¼Ÿï¼Ÿ*/\n  \n  // æ‰§è¡Œå¯¹è´¦æ“ä½œ\n  diff = check(pos, dos);\n  // å·®å¼‚å†™å…¥å·®å¼‚åº“\n  save(diff);\n}   \n</code></pre><p>é‚£å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿä½ å¯ä»¥å¼€åŠ¨è„‘ç­‹æƒ³å‡ºå¾ˆå¤šåŠæ³•ï¼Œæœ€ç›´æ¥çš„åŠæ³•æ˜¯å¼„ä¸€ä¸ªè®¡æ•°å™¨ï¼Œåˆå§‹å€¼è®¾ç½®æˆ2ï¼Œå½“æ‰§è¡Œå®Œ<code>pos = getPOrders();</code>è¿™ä¸ªæ“ä½œä¹‹åå°†è®¡æ•°å™¨å‡1ï¼Œæ‰§è¡Œå®Œ<code>dos = getDOrders();</code>ä¹‹åä¹Ÿå°†è®¡æ•°å™¨å‡1ï¼Œåœ¨ä¸»çº¿ç¨‹é‡Œï¼Œç­‰å¾…è®¡æ•°å™¨ç­‰äº0ï¼›å½“è®¡æ•°å™¨ç­‰äº0æ—¶ï¼Œè¯´æ˜è¿™ä¸¤ä¸ªæŸ¥è¯¢æ“ä½œæ‰§è¡Œå®Œäº†ã€‚ç­‰å¾…è®¡æ•°å™¨ç­‰äº0å…¶å®å°±æ˜¯ä¸€ä¸ªæ¡ä»¶å˜é‡ï¼Œç”¨ç®¡ç¨‹å®ç°èµ·æ¥ä¹Ÿå¾ˆç®€å•ã€‚</p><p>ä¸è¿‡æˆ‘å¹¶ä¸å»ºè®®ä½ åœ¨å®é™…é¡¹ç›®ä¸­å»å®ç°ä¸Šé¢çš„æ–¹æ¡ˆï¼Œå› ä¸ºJavaå¹¶å‘åŒ…é‡Œå·²ç»æä¾›äº†å®ç°ç±»ä¼¼åŠŸèƒ½çš„å·¥å…·ç±»ï¼š<strong>CountDownLatch</strong>ï¼Œæˆ‘ä»¬ç›´æ¥ä½¿ç”¨å°±å¯ä»¥äº†ã€‚ä¸‹é¢çš„ä»£ç ç¤ºä¾‹ä¸­ï¼Œåœ¨whileå¾ªç¯é‡Œé¢ï¼Œæˆ‘ä»¬é¦–å…ˆåˆ›å»ºäº†ä¸€ä¸ªCountDownLatchï¼Œè®¡æ•°å™¨çš„åˆå§‹å€¼ç­‰äº2ï¼Œä¹‹ååœ¨<code>pos = getPOrders();</code>å’Œ<code>dos = getDOrders();</code>ä¸¤æ¡è¯­å¥çš„åé¢å¯¹è®¡æ•°å™¨æ‰§è¡Œå‡1æ“ä½œï¼Œè¿™ä¸ªå¯¹è®¡æ•°å™¨å‡1çš„æ“ä½œæ˜¯é€šè¿‡è°ƒç”¨ <code>latch.countDown();</code> æ¥å®ç°çš„ã€‚åœ¨ä¸»çº¿ç¨‹ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡è°ƒç”¨ <code>latch.await()</code> æ¥å®ç°å¯¹è®¡æ•°å™¨ç­‰äº0çš„ç­‰å¾…ã€‚</p><pre><code>// åˆ›å»º2ä¸ªçº¿ç¨‹çš„çº¿ç¨‹æ± \nExecutor executor = \n  Executors.newFixedThreadPool(2);\nwhile(å­˜åœ¨æœªå¯¹è´¦è®¢å•){\n  // è®¡æ•°å™¨åˆå§‹åŒ–ä¸º2\n  CountDownLatch latch = \n    new CountDownLatch(2);\n  // æŸ¥è¯¢æœªå¯¹è´¦è®¢å•\n  executor.execute(()-&gt; {\n    pos = getPOrders();\n    latch.countDown();\n  });\n  // æŸ¥è¯¢æ´¾é€å•\n  executor.execute(()-&gt; {\n    dos = getDOrders();\n    latch.countDown();\n  });\n  \n  // ç­‰å¾…ä¸¤ä¸ªæŸ¥è¯¢æ“ä½œç»“æŸ\n  latch.await();\n  \n  // æ‰§è¡Œå¯¹è´¦æ“ä½œ\n  diff = check(pos, dos);\n  // å·®å¼‚å†™å…¥å·®å¼‚åº“\n  save(diff);\n}\n</code></pre><h2>è¿›ä¸€æ­¥ä¼˜åŒ–æ€§èƒ½</h2><p>ç»è¿‡ä¸Šé¢çš„é‡é‡ä¼˜åŒ–ä¹‹åï¼Œé•¿å‡ºä¸€å£æ°”ï¼Œç»ˆäºå¯ä»¥äº¤ä»˜äº†ã€‚ä¸è¿‡åœ¨äº¤ä»˜ä¹‹å‰è¿˜éœ€è¦å†æ¬¡å®¡è§†ä¸€ç•ªï¼Œçœ‹çœ‹è¿˜æœ‰æ²¡æœ‰ä¼˜åŒ–çš„ä½™åœ°ï¼Œä»”ç»†çœ‹è¿˜æ˜¯æœ‰çš„ã€‚</p><p>å‰é¢æˆ‘ä»¬å°†getPOrders()å’ŒgetDOrders()è¿™ä¸¤ä¸ªæŸ¥è¯¢æ“ä½œå¹¶è¡Œäº†ï¼Œä½†è¿™ä¸¤ä¸ªæŸ¥è¯¢æ“ä½œå’Œå¯¹è´¦æ“ä½œcheck()ã€save()ä¹‹é—´è¿˜æ˜¯ä¸²è¡Œçš„ã€‚å¾ˆæ˜¾ç„¶ï¼Œè¿™ä¸¤ä¸ªæŸ¥è¯¢æ“ä½œå’Œå¯¹è´¦æ“ä½œä¹Ÿæ˜¯å¯ä»¥å¹¶è¡Œçš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨æ‰§è¡Œå¯¹è´¦æ“ä½œçš„æ—¶å€™ï¼Œå¯ä»¥åŒæ—¶å»æ‰§è¡Œä¸‹ä¸€è½®çš„æŸ¥è¯¢æ“ä½œï¼Œè¿™ä¸ªè¿‡ç¨‹å¯ä»¥å½¢è±¡åŒ–åœ°è¡¨è¿°ä¸ºä¸‹é¢è¿™å¹…ç¤ºæ„å›¾ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/e6/8b/e663d90f49d9666e618ac1370ccca58b.png?wh=1142*624\" alt=\"\"></p><center><span class=\"reference\">å®Œå…¨å¹¶è¡Œæ‰§è¡Œç¤ºæ„å›¾</span></center><p>é‚£æ¥ä¸‹æ¥æˆ‘ä»¬å†æ¥æ€è€ƒä¸€ä¸‹å¦‚ä½•å®ç°è¿™æ­¥ä¼˜åŒ–ï¼Œä¸¤æ¬¡æŸ¥è¯¢æ“ä½œèƒ½å¤Ÿå’Œå¯¹è´¦æ“ä½œå¹¶è¡Œï¼Œå¯¹è´¦æ“ä½œè¿˜ä¾èµ–æŸ¥è¯¢æ“ä½œçš„ç»“æœï¼Œè¿™æ˜æ˜¾æœ‰ç‚¹ç”Ÿäº§è€…-æ¶ˆè´¹è€…çš„æ„æ€ï¼Œä¸¤æ¬¡æŸ¥è¯¢æ“ä½œæ˜¯ç”Ÿäº§è€…ï¼Œå¯¹è´¦æ“ä½œæ˜¯æ¶ˆè´¹è€…ã€‚æ—¢ç„¶æ˜¯ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å‹ï¼Œé‚£å°±éœ€è¦æœ‰ä¸ªé˜Ÿåˆ—ï¼Œæ¥ä¿å­˜ç”Ÿäº§è€…ç”Ÿäº§çš„æ•°æ®ï¼Œè€Œæ¶ˆè´¹è€…åˆ™ä»è¿™ä¸ªé˜Ÿåˆ—æ¶ˆè´¹æ•°æ®ã€‚</p><p>ä¸è¿‡é’ˆå¯¹å¯¹è´¦è¿™ä¸ªé¡¹ç›®ï¼Œæˆ‘è®¾è®¡äº†ä¸¤ä¸ªé˜Ÿåˆ—ï¼Œå¹¶ä¸”ä¸¤ä¸ªé˜Ÿåˆ—çš„å…ƒç´ ä¹‹é—´è¿˜æœ‰å¯¹åº”å…³ç³»ã€‚å…·ä½“å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œè®¢å•æŸ¥è¯¢æ“ä½œå°†è®¢å•æŸ¥è¯¢ç»“æœæ’å…¥è®¢å•é˜Ÿåˆ—ï¼Œæ´¾é€å•æŸ¥è¯¢æ“ä½œå°†æ´¾é€å•æ’å…¥æ´¾é€å•é˜Ÿåˆ—ï¼Œè¿™ä¸¤ä¸ªé˜Ÿåˆ—çš„å…ƒç´ ä¹‹é—´æ˜¯æœ‰ä¸€ä¸€å¯¹åº”çš„å…³ç³»çš„ã€‚ä¸¤ä¸ªé˜Ÿåˆ—çš„å¥½å¤„æ˜¯ï¼Œå¯¹è´¦æ“ä½œå¯ä»¥æ¯æ¬¡ä»è®¢å•é˜Ÿåˆ—å‡ºä¸€ä¸ªå…ƒç´ ï¼Œä»æ´¾é€å•é˜Ÿåˆ—å‡ºä¸€ä¸ªå…ƒç´ ï¼Œç„¶åå¯¹è¿™ä¸¤ä¸ªå…ƒç´ æ‰§è¡Œå¯¹è´¦æ“ä½œï¼Œè¿™æ ·æ•°æ®ä¸€å®šä¸ä¼šä¹±æ‰ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/22/da/22e8ba1c04a3bc2605b98376ed6832da.png?wh=1142*453\" alt=\"\"></p><center><span class=\"reference\">åŒé˜Ÿåˆ—ç¤ºæ„å›¾</span></center><p>ä¸‹é¢å†æ¥çœ‹å¦‚ä½•ç”¨åŒé˜Ÿåˆ—æ¥å®ç°å®Œå…¨çš„å¹¶è¡Œã€‚ä¸€ä¸ªæœ€ç›´æ¥çš„æƒ³æ³•æ˜¯ï¼šä¸€ä¸ªçº¿ç¨‹T1æ‰§è¡Œè®¢å•çš„æŸ¥è¯¢å·¥ä½œï¼Œä¸€ä¸ªçº¿ç¨‹T2æ‰§è¡Œæ´¾é€å•çš„æŸ¥è¯¢å·¥ä½œï¼Œå½“çº¿ç¨‹T1å’ŒT2éƒ½å„è‡ªç”Ÿäº§å®Œ1æ¡æ•°æ®çš„æ—¶å€™ï¼Œé€šçŸ¥çº¿ç¨‹T3æ‰§è¡Œå¯¹è´¦æ“ä½œã€‚è¿™ä¸ªæƒ³æ³•è™½çœ‹ä¸Šå»ç®€å•ï¼Œä½†å…¶å®è¿˜éšè—ç€ä¸€ä¸ªæ¡ä»¶ï¼Œé‚£å°±æ˜¯çº¿ç¨‹T1å’Œçº¿ç¨‹T2çš„å·¥ä½œè¦æ­¥è°ƒä¸€è‡´ï¼Œä¸èƒ½ä¸€ä¸ªè·‘å¾—å¤ªå¿«ï¼Œä¸€ä¸ªè·‘å¾—å¤ªæ…¢ï¼Œåªæœ‰è¿™æ ·æ‰èƒ½åšåˆ°å„è‡ªç”Ÿäº§å®Œ1æ¡æ•°æ®çš„æ—¶å€™ï¼Œé€šçŸ¥çº¿ç¨‹T3ã€‚</p><p>ä¸‹é¢è¿™å¹…å›¾å½¢è±¡åœ°æè¿°äº†ä¸Šé¢çš„æ„å›¾ï¼šçº¿ç¨‹T1å’Œçº¿ç¨‹T2åªæœ‰éƒ½ç”Ÿäº§å®Œ1æ¡æ•°æ®çš„æ—¶å€™ï¼Œæ‰èƒ½ä¸€èµ·å‘ä¸‹æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œçº¿ç¨‹T1å’Œçº¿ç¨‹T2è¦äº’ç›¸ç­‰å¾…ï¼Œæ­¥è°ƒè¦ä¸€è‡´ï¼›åŒæ—¶å½“çº¿ç¨‹T1å’ŒT2éƒ½ç”Ÿäº§å®Œä¸€æ¡æ•°æ®çš„æ—¶å€™ï¼Œè¿˜è¦èƒ½å¤Ÿé€šçŸ¥çº¿ç¨‹T3æ‰§è¡Œå¯¹è´¦æ“ä½œã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/65/ad/6593a10a393d9310a8f864730f7426ad.png?wh=1142*569\" alt=\"\"></p><center><span class=\"reference\">åŒæ­¥æ‰§è¡Œç¤ºæ„å›¾</span></center><h2>ç”¨CyclicBarrierå®ç°çº¿ç¨‹åŒæ­¥</h2><p>ä¸‹é¢æˆ‘ä»¬å°±æ¥å®ç°ä¸Šé¢æåˆ°çš„æ–¹æ¡ˆã€‚è¿™ä¸ªæ–¹æ¡ˆçš„éš¾ç‚¹æœ‰ä¸¤ä¸ªï¼šä¸€ä¸ªæ˜¯çº¿ç¨‹T1å’ŒT2è¦åšåˆ°æ­¥è°ƒä¸€è‡´ï¼Œå¦ä¸€ä¸ªæ˜¯è¦èƒ½å¤Ÿé€šçŸ¥åˆ°çº¿ç¨‹T3ã€‚</p><p>ä½ ä¾ç„¶å¯ä»¥åˆ©ç”¨ä¸€ä¸ªè®¡æ•°å™¨æ¥è§£å†³è¿™ä¸¤ä¸ªéš¾ç‚¹ï¼Œè®¡æ•°å™¨åˆå§‹åŒ–ä¸º2ï¼Œçº¿ç¨‹T1å’ŒT2ç”Ÿäº§å®Œä¸€æ¡æ•°æ®éƒ½å°†è®¡æ•°å™¨å‡1ï¼Œå¦‚æœè®¡æ•°å™¨å¤§äº0åˆ™çº¿ç¨‹T1æˆ–è€…T2ç­‰å¾…ã€‚å¦‚æœè®¡æ•°å™¨ç­‰äº0ï¼Œåˆ™é€šçŸ¥çº¿ç¨‹T3ï¼Œå¹¶å”¤é†’ç­‰å¾…çš„çº¿ç¨‹T1æˆ–è€…T2ï¼Œä¸æ­¤åŒæ—¶ï¼Œå°†è®¡æ•°å™¨é‡ç½®ä¸º2ï¼Œè¿™æ ·çº¿ç¨‹T1å’Œçº¿ç¨‹T2ç”Ÿäº§ä¸‹ä¸€æ¡æ•°æ®çš„æ—¶å€™å°±å¯ä»¥ç»§ç»­ä½¿ç”¨è¿™ä¸ªè®¡æ•°å™¨äº†ã€‚</p><p>åŒæ ·ï¼Œè¿˜æ˜¯å»ºè®®ä½ ä¸è¦åœ¨å®é™…é¡¹ç›®ä¸­è¿™ä¹ˆåšï¼Œå› ä¸ºJavaå¹¶å‘åŒ…é‡Œä¹Ÿå·²ç»æä¾›äº†ç›¸å…³çš„å·¥å…·ç±»ï¼š<strong>CyclicBarrier</strong>ã€‚åœ¨ä¸‹é¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆåˆ›å»ºäº†ä¸€ä¸ªè®¡æ•°å™¨åˆå§‹å€¼ä¸º2çš„CyclicBarrierï¼Œä½ éœ€è¦æ³¨æ„çš„æ˜¯åˆ›å»ºCyclicBarrierçš„æ—¶å€™ï¼Œæˆ‘ä»¬è¿˜ä¼ å…¥äº†ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œå½“è®¡æ•°å™¨å‡åˆ°0çš„æ—¶å€™ï¼Œä¼šè°ƒç”¨è¿™ä¸ªå›è°ƒå‡½æ•°ã€‚</p><p>çº¿ç¨‹T1è´Ÿè´£æŸ¥è¯¢è®¢å•ï¼Œå½“æŸ¥å‡ºä¸€æ¡æ—¶ï¼Œè°ƒç”¨ <code>barrier.await()</code> æ¥å°†è®¡æ•°å™¨å‡1ï¼ŒåŒæ—¶ç­‰å¾…è®¡æ•°å™¨å˜æˆ0ï¼›çº¿ç¨‹T2è´Ÿè´£æŸ¥è¯¢æ´¾é€å•ï¼Œå½“æŸ¥å‡ºä¸€æ¡æ—¶ï¼Œä¹Ÿè°ƒç”¨ <code>barrier.await()</code> æ¥å°†è®¡æ•°å™¨å‡1ï¼ŒåŒæ—¶ç­‰å¾…è®¡æ•°å™¨å˜æˆ0ï¼›å½“T1å’ŒT2éƒ½è°ƒç”¨ <code>barrier.await()</code> çš„æ—¶å€™ï¼Œè®¡æ•°å™¨ä¼šå‡åˆ°0ï¼Œæ­¤æ—¶T1å’ŒT2å°±å¯ä»¥æ‰§è¡Œä¸‹ä¸€æ¡è¯­å¥äº†ï¼ŒåŒæ—¶ä¼šè°ƒç”¨barrierçš„å›è°ƒå‡½æ•°æ¥æ‰§è¡Œå¯¹è´¦æ“ä½œã€‚</p><p>éå¸¸å€¼å¾—ä¸€æçš„æ˜¯ï¼ŒCyclicBarrierçš„è®¡æ•°å™¨æœ‰è‡ªåŠ¨é‡ç½®çš„åŠŸèƒ½ï¼Œå½“å‡åˆ°0çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨é‡ç½®ä½ è®¾ç½®çš„åˆå§‹å€¼ã€‚è¿™ä¸ªåŠŸèƒ½ç”¨èµ·æ¥å®åœ¨æ˜¯å¤ªæ–¹ä¾¿äº†ã€‚</p><pre><code>// è®¢å•é˜Ÿåˆ—\nVector&lt;P&gt; pos;\n// æ´¾é€å•é˜Ÿåˆ—\nVector&lt;D&gt; dos;\n// æ‰§è¡Œå›è°ƒçš„çº¿ç¨‹æ±  \nExecutor executor = \n  Executors.newFixedThreadPool(1);\nfinal CyclicBarrier barrier =\n  new CyclicBarrier(2, ()-&gt;{\n    executor.execute(()-&gt;check());\n  });\n  \nvoid check(){\n  P p = pos.remove(0);\n  D d = dos.remove(0);\n  // æ‰§è¡Œå¯¹è´¦æ“ä½œ\n  diff = check(p, d);\n  // å·®å¼‚å†™å…¥å·®å¼‚åº“\n  save(diff);\n}\n  \nvoid checkAll(){\n  // å¾ªç¯æŸ¥è¯¢è®¢å•åº“\n  Thread T1 = new Thread(()-&gt;{\n    while(å­˜åœ¨æœªå¯¹è´¦è®¢å•){\n      // æŸ¥è¯¢è®¢å•åº“\n      pos.add(getPOrders());\n      // ç­‰å¾…\n      barrier.await();\n    }\n  });\n  T1.start();  \n  // å¾ªç¯æŸ¥è¯¢è¿å•åº“\n  Thread T2 = new Thread(()-&gt;{\n    while(å­˜åœ¨æœªå¯¹è´¦è®¢å•){\n      // æŸ¥è¯¢è¿å•åº“\n      dos.add(getDOrders());\n      // ç­‰å¾…\n      barrier.await();\n    }\n  });\n  T2.start();\n}\n</code></pre><h2>æ€»ç»“</h2><p>CountDownLatchå’ŒCyclicBarrieræ˜¯Javaå¹¶å‘åŒ…æä¾›çš„ä¸¤ä¸ªéå¸¸æ˜“ç”¨çš„çº¿ç¨‹åŒæ­¥å·¥å…·ç±»ï¼Œè¿™ä¸¤ä¸ªå·¥å…·ç±»ç”¨æ³•çš„åŒºåˆ«åœ¨è¿™é‡Œè¿˜æ˜¯æœ‰å¿…è¦å†å¼ºè°ƒä¸€ä¸‹ï¼š<strong>CountDownLatchä¸»è¦ç”¨æ¥è§£å†³ä¸€ä¸ªçº¿ç¨‹ç­‰å¾…å¤šä¸ªçº¿ç¨‹çš„åœºæ™¯</strong>ï¼Œå¯ä»¥ç±»æ¯”æ—…æ¸¸å›¢å›¢é•¿è¦ç­‰å¾…æ‰€æœ‰çš„æ¸¸å®¢åˆ°é½æ‰èƒ½å»ä¸‹ä¸€ä¸ªæ™¯ç‚¹ï¼›è€Œ<strong>CyclicBarrieræ˜¯ä¸€ç»„çº¿ç¨‹ä¹‹é—´äº’ç›¸ç­‰å¾…</strong>ï¼Œæ›´åƒæ˜¯å‡ ä¸ªé©´å‹ä¹‹é—´ä¸ç¦»ä¸å¼ƒã€‚é™¤æ­¤ä¹‹å¤–CountDownLatchçš„è®¡æ•°å™¨æ˜¯ä¸èƒ½å¾ªç¯åˆ©ç”¨çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸€æ—¦è®¡æ•°å™¨å‡åˆ°0ï¼Œå†æœ‰çº¿ç¨‹è°ƒç”¨await()ï¼Œè¯¥çº¿ç¨‹ä¼šç›´æ¥é€šè¿‡ã€‚ä½†<strong>CyclicBarrierçš„è®¡æ•°å™¨æ˜¯å¯ä»¥å¾ªç¯åˆ©ç”¨çš„</strong>ï¼Œè€Œä¸”å…·å¤‡è‡ªåŠ¨é‡ç½®çš„åŠŸèƒ½ï¼Œä¸€æ—¦è®¡æ•°å™¨å‡åˆ°0ä¼šè‡ªåŠ¨é‡ç½®åˆ°ä½ è®¾ç½®çš„åˆå§‹å€¼ã€‚é™¤æ­¤ä¹‹å¤–ï¼ŒCyclicBarrierè¿˜å¯ä»¥è®¾ç½®å›è°ƒå‡½æ•°ï¼Œå¯ä»¥è¯´æ˜¯åŠŸèƒ½ä¸°å¯Œã€‚</p><p>æœ¬ç« çš„ç¤ºä¾‹ä»£ç ä¸­æœ‰ä¸¤å¤„ç”¨åˆ°äº†çº¿ç¨‹æ± ï¼Œä½ ç°åœ¨åªéœ€è¦å¤§æ¦‚äº†è§£å³å¯ï¼Œå› ä¸ºçº¿ç¨‹æ± ç›¸å…³çš„çŸ¥è¯†å’±ä»¬ä¸“æ åé¢è¿˜ä¼šæœ‰è¯¦ç»†ä»‹ç»ã€‚å¦å¤–ï¼Œçº¿ç¨‹æ± æä¾›äº†Futureç‰¹æ€§ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åˆ©ç”¨Futureç‰¹æ€§æ¥å®ç°çº¿ç¨‹ä¹‹é—´çš„ç­‰å¾…ï¼Œè¿™ä¸ªåé¢æˆ‘ä»¬ä¹Ÿä¼šè¯¦ç»†ä»‹ç»ã€‚</p><h2>è¯¾åæ€è€ƒ</h2><p>æœ¬ç« æœ€åçš„ç¤ºä¾‹ä»£ç ä¸­ï¼ŒCyclicBarrierçš„å›è°ƒå‡½æ•°æˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ªå›ºå®šå¤§å°çš„çº¿ç¨‹æ± ï¼Œä½ è§‰å¾—æ˜¯å¦æœ‰å¿…è¦å‘¢ï¼Ÿ</p><p>æ¬¢è¿åœ¨ç•™è¨€åŒºä¸æˆ‘åˆ†äº«ä½ çš„æƒ³æ³•ï¼Œä¹Ÿæ¬¢è¿ä½ åœ¨ç•™è¨€åŒºè®°å½•ä½ çš„æ€è€ƒè¿‡ç¨‹ã€‚æ„Ÿè°¢é˜…è¯»ï¼Œå¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©çš„è¯ï¼Œä¹Ÿæ¬¢è¿æŠŠå®ƒåˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ã€‚</p><p></p>","comments":[{"had_liked":false,"id":84859,"user_name":"æ¢ç´¢æ— æ­¢å¢ƒ","can_delete":false,"product_type":"c1","uid":1044178,"ip_address":"","ucode":"91D2A9907DFA79","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ee/d2/7024431c.jpg","comment_is_top":false,"comment_ctime":1554939974,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1036642058310","product_id":100023901,"comment_content":"ä»Šå¤©çš„æ–‡ç« å¾ˆç²¾å½©ï¼Œæœ‰æ¡ˆä¾‹æœ‰é€’è¿›ï¼Œä¸€æ°”å‘µæˆï¼è®¾ç½®çº¿ç¨‹æ± ä¸ºå•ä¸ªçº¿ç¨‹å¯ä»¥ä¿è¯å¯¹è´¦çš„æ“ä½œæŒ‰é¡ºåºæ‰§è¡Œ","like_count":242,"discussions":[{"author":{"id":1134574,"avatar":"https://static001.geekbang.org/account/avatar/00/11/4f/ee/bd08cfab.jpg","nickname":"ä¸€é­„","note":"","ucode":"71541125D4AA5A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":385875,"discussion_content":"çœ‹å®Œä¸ä»…å­¦ä¹ äº† CountDownLatchã€CyclicBarrierï¼ŒåŒæ—¶è¿˜å­¦ä¹ äº†è€å¸ˆæ€è€ƒé—®é¢˜çš„æ¸…æ™°é€’è¿›æ–¹å¼ã€‚","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1627309253,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":97035,"user_name":"å¼ ç”³å‚²","can_delete":false,"product_type":"c1","uid":1182372,"ip_address":"","ucode":"22D46BC529BA8A","user_header":"https://static001.geekbang.org/account/avatar/00/12/0a/a4/828a431f.jpg","comment_is_top":false,"comment_ctime":1558575132,"is_pvip":true,"replies":[{"id":"34747","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","comment_id":97035,"uid":"1269969","ip_address":"","utype":1,"ctime":1558616437,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":12,"race_medal":2,"score":"1002285955100","product_id":100023901,"comment_content":"æˆ‘è§‰å¾—è€å¸ˆçš„é—®é¢˜å…¶å®æ˜¯ä¸¤ä¸ª:<br>1.ä¸ºå•¥è¦ç”¨çº¿ç¨‹æ± ï¼Œè€Œä¸æ˜¯åœ¨å›è°ƒå‡½æ•°ä¸­ç›´æ¥è°ƒç”¨ï¼Ÿ<br>2.çº¿ç¨‹æ± ä¸ºå•¥ä½¿ç”¨å•çº¿ç¨‹çš„ï¼Ÿ<br><br>æˆ‘çš„è€ƒè™‘:<br>1.ä½¿ç”¨çº¿ç¨‹æ± æ˜¯ä¸ºäº†å¼‚æ­¥æ“ä½œï¼Œå¦åˆ™å›æ‰å‡½æ•°æ˜¯åŒæ­¥è°ƒç”¨çš„ï¼Œä¹Ÿå°±æ˜¯æœ¬æ¬¡å¯¹è´¦æ“ä½œæ‰§è¡Œå®Œæ‰èƒ½è¿›è¡Œä¸‹ä¸€è½®çš„æ£€æŸ¥ã€‚<br>2.çº¿ç¨‹æ•°é‡å›ºå®šä¸º1ï¼Œé˜²æ­¢äº†å¤šçº¿ç¨‹å¹¶å‘å¯¼è‡´çš„æ•°æ®ä¸ä¸€è‡´ï¼Œå› ä¸ºè®¢å•å’Œæ´¾é€å•æ˜¯ä¸¤ä¸ªé˜Ÿåˆ—ï¼Œåªæœ‰å•çº¿ç¨‹å»ä¸¤ä¸ªé˜Ÿåˆ—ä¸­å–æ¶ˆæ¯æ‰ä¸ä¼šå‡ºç°æ¶ˆæ¯ä¸åŒ¹é…çš„é—®é¢˜ã€‚","like_count":233,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451104,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558616437,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1512642,"avatar":"https://static001.geekbang.org/account/avatar/00/17/14/c2/46ebe3a0.jpg","nickname":"ä¾§è€³å€¾å¬","note":"","ucode":"5BF2A2440B54F0","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":241947,"discussion_content":"è¡¥å……ä¸€å¥ï¼Œçº¿ç¨‹æ± ä¸º1æ˜¯ä¸ºäº†ä¿è¯checkçš„åŸå­æ€§ï¼Œæ›´æ·±å±‚é¢æ˜¯å½“çº¿ç¨‹æ± ä¸ºç©ºçš„æ—¶å€™ï¼Œä»çº¿ç¨‹æ± å–çº¿ç¨‹çš„åŠ¨ä½œä¼šç­‰å¾…ï¼Œå®ç°äº†ä»»åŠ¡çš„æ’é˜Ÿ","likes_number":7,"is_delete":false,"is_hidden":false,"ctime":1587451538,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1494622,"avatar":"https://static001.geekbang.org/account/avatar/00/16/ce/5e/b103d538.jpg","nickname":"å¤§æ˜çŒ©","note":"","ucode":"61D330B42AE3C4","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":397475,"discussion_content":"è€ƒè™‘çš„ç¬¬ä¸€ç‚¹ä¸å¯¹å§ï¼Œä½¿ç”¨çº¿ç¨‹æ± ä¸æ˜¯ä¸ºäº†é¿å…åå¤åˆ›å»ºå¯¹è´¦çº¿ç¨‹å—ï¼Œæˆ‘éªŒè¯äº†ä¸€ä¸‹ï¼Œç¡®å®æ˜¯çº¿ç¨‹æ± çš„é‚£ä¸€ä¸ªçº¿ç¨‹æ¥å›æ‰§è¡Œæ‰€æœ‰çš„å¯¹è´¦ï¼Œè¿™æ ·çš„è¯å°±æ˜¯ä¸ºäº†é¿å…åˆ›å»ºçº¿ç¨‹çš„å¼€é”€äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632626277,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1035999,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/ce/df/3e24aa5b.jpg","nickname":"åƒåˆ°140","note":"","ucode":"1862A57AB4C173","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":342409,"discussion_content":"ç§€\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610676287,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1135604,"avatar":"https://static001.geekbang.org/account/avatar/00/11/53/f4/e277325d.jpg","nickname":"bin.chen","note":"","ucode":"5BA49358AB8A1A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":275519,"discussion_content":"ä½†æ˜¯è¿™æ ·ä¼šé€ æˆç”Ÿäº§è¿‡å‰©çš„æƒ…å†µ--è¿˜èƒ½åœ¨ç»§ç»­ä¼˜åŒ–","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590723346,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1447904,"avatar":"https://static001.geekbang.org/account/avatar/00/16/17/e0/018a06cd.jpg","nickname":"RedHair","note":"","ucode":"9E68A6BC7C178E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1135604,"avatar":"https://static001.geekbang.org/account/avatar/00/11/53/f4/e277325d.jpg","nickname":"bin.chen","note":"","ucode":"5BA49358AB8A1A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":278885,"discussion_content":"æœŸå¾…ä½ åæœŸå­¦ä¹ å¾—æ›´æ£’ä¹‹åï¼Œæ¥è¡¥ä¸Šä½ çš„ä¼˜åŒ–æ–¹æ¡ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591251597,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":275519,"ip_address":""},"score":278885,"extra":""}]},{"author":{"id":1098600,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c3/68/63fabc34.jpg","nickname":"æµæ°“å…”","note":"","ucode":"1A6AC1177BC17E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":219117,"discussion_content":"è¿™ä¸ªå›è°ƒå‡½æ•°ä¸å¯ä»¥ä¼ é€’å‚æ•°ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585736459,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1297299,"avatar":"https://static001.geekbang.org/account/avatar/00/13/cb/93/61e0a8c9.jpg","nickname":"ChoviWu","note":"","ucode":"C4B598A8FA2BFD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":196319,"discussion_content":"ğŸ‘ğŸ»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583334999,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1400824,"avatar":"https://static001.geekbang.org/account/avatar/00/15/5f/f8/65b36d40.jpg","nickname":"è‹å­æ³›èˆŸ","note":"","ucode":"72D7EC471196CF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":184145,"discussion_content":"ğŸ‰‘ï¸","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582548113,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1566569,"avatar":"https://static001.geekbang.org/account/avatar/00/17/e7/69/0c426b52.jpg","nickname":"åˆ˜æ˜“å®","note":"","ucode":"EE337683D08B9A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":64619,"discussion_content":"å‰å®³å‰å®³","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574951787,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1225224,"avatar":"https://static001.geekbang.org/account/avatar/00/12/b2/08/92f42622.jpg","nickname":"å°”å†¬æ©™","note":"","ucode":"0B013A49BC18DA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":16540,"discussion_content":"å¤ªå¼ºäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568899367,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1111870,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK2Az5uTh9ZGVA7yQCj1BXtXuicPRkvJicA97AoN9xX3bnPcUYglTMXJeZeoVbPQeJA7ICvQhR3KQ0w/132","nickname":"æ—¥ä¸è½å¸å›½","note":"","ucode":"6A11ABBD8AC438","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6476,"discussion_content":"å­¦ä¹ å­¦ä¹ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566916457,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":85384,"user_name":"J.M.Liu","can_delete":false,"product_type":"c1","uid":1200037,"ip_address":"","ucode":"B2CB84B8E923A6","user_header":"https://static001.geekbang.org/account/avatar/00/12/4f/a5/71358d7b.jpg","comment_is_top":false,"comment_ctime":1555049914,"is_pvip":false,"replies":[{"id":"30800","content":"å¥½é—®é¢˜ï¼ŒCyclicBarrierçš„å›è°ƒå‡½æ•°æ‰§è¡Œåœ¨ä¸€ä¸ªå›åˆé‡Œæœ€åæ‰§è¡Œawait()çš„çº¿ç¨‹ä¸Šï¼Œè€Œä¸”åŒæ­¥è°ƒç”¨å›è°ƒå‡½æ•°check()ï¼Œè°ƒç”¨å®Œcheckä¹‹åï¼Œæ‰ä¼šå¼€å§‹ç¬¬äºŒå›åˆã€‚æ‰€ä»¥checkå¦‚æœä¸å¦å¼€ä¸€çº¿ç¨‹å¼‚æ­¥æ‰§è¡Œï¼Œå°±èµ·ä¸åˆ°æ€§èƒ½ä¼˜åŒ–çš„ä½œç”¨äº†ã€‚","user_name":"ä½œè€…å›å¤","comment_id":85384,"uid":"1269969","ip_address":"","utype":1,"ctime":1555170669,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":7,"race_medal":0,"score":"727404522938","product_id":100023901,"comment_content":"è€å¸ˆï¼ŒCyclicBarrierçš„å›è°ƒå‡½æ•°åœ¨å“ªä¸ªçº¿ç¨‹æ‰§è¡Œå•Šï¼Ÿä¸»çº¿ç¨‹å—ï¼Ÿæ¯”å¦‚è¿™é‡Œçš„æœ€åä¸€æ®µä»£ç ä¸­ï¼Œå¾ªç¯ä¼šåœ¨å›è°ƒçš„æ—¶å€™é˜»å¡å—ï¼Ÿ<br>å¦‚æœæ˜¯è¿™æ ·çš„è¯ï¼Œé‚£checkå‡½æ•°å²‚ä¸æ˜¯å¯ä»¥ç›´æ¥ä½œä¸ºå›è°ƒå‡½æ•°äº†å‘€ï¼Œå¹¶ä¸éœ€è¦çº¿ç¨‹æ± äº†å•Š","like_count":169,"discussions":[{"author":{"id":1554995,"avatar":"https://static001.geekbang.org/account/avatar/00/17/ba/33/2d83d174.jpg","nickname":"æ—¶å…‰å®ˆæŠ¤è€…-åŸºå…°","note":"","ucode":"F0B0887B1979D2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":366067,"discussion_content":"CyclicBarrieræ„é€ å‡½æ•°æœ€åä¸€å¥performed by the last thread entering the barrier. ç”±æœ€åä¸€ä¸ªè¿›å…¥æ …æ çš„çº¿ç¨‹æ‰§è¡Œã€‚\n\nCreates a new {@code CyclicBarrier} that will trip when the\ngiven number of parties (threads) are waiting upon it, and which\nwill execute the given barrier action when the barrier is tripped,\nperformed by the last thread entering the barrier.","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1617953257,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446650,"discussion_content":"å¥½é—®é¢˜ï¼ŒCyclicBarrierçš„å›è°ƒå‡½æ•°æ‰§è¡Œåœ¨ä¸€ä¸ªå›åˆé‡Œæœ€åæ‰§è¡Œawait()çš„çº¿ç¨‹ä¸Šï¼Œè€Œä¸”åŒæ­¥è°ƒç”¨å›è°ƒå‡½æ•°check()ï¼Œè°ƒç”¨å®Œcheckä¹‹åï¼Œæ‰ä¼šå¼€å§‹ç¬¬äºŒå›åˆã€‚æ‰€ä»¥checkå¦‚æœä¸å¦å¼€ä¸€çº¿ç¨‹å¼‚æ­¥æ‰§è¡Œï¼Œå°±èµ·ä¸åˆ°æ€§èƒ½ä¼˜åŒ–çš„ä½œç”¨äº†ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1555170669,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1346215,"avatar":"https://static001.geekbang.org/account/avatar/00/14/8a/a7/674c1864.jpg","nickname":"William","note":"","ucode":"55F5D9DEE485B1","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":386928,"discussion_content":"mark:\nä½¿ç”¨çº¿ç¨‹æ± çš„ä½œç”¨ï¼šåœ¨æœ¬æ¬¡å›è°ƒæ–¹æ³•ï¼ˆå¯¹è´¦ï¼‰æ‰§è¡Œçš„æ—¶å€™ï¼Œ å³å¯å¼€å§‹ä¸‹ä¸€æ¬¡çš„æŸ¥è¯¢æ“ä½œäº†ã€‚\nå¦‚æœä¸ä½¿ç”¨çš„è¯ï¼Œé‚£ä¹ˆéœ€è¦ç­‰å¾…æœ¬æ¬¡å¯¹è´¦æ‰§è¡Œå®Œæ¯•ï¼Œ æ‰èƒ½ç»§ç»­æŸ¥è¯¢æ“ä½œã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1627896208,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1133545,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJQyCFqdkJB97EXF7VVO1n0nRZUmxfWwDicJMmupDdDia7VnPkLSJicFyEe28eUtZamH9uprtBJ4Ojjw/132","nickname":"qhj","note":"","ucode":"A9A9370BB2EE0E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":303740,"discussion_content":"å¦‚æœä¸å¼€å¦ä¸€çº¿ç¨‹å¼‚æ­¥æ‰§è¡Œçš„è¯ï¼Œå½“å›è°ƒå‡½æ•°åœ¨çº¿ç¨‹T1ä¸Šæ‰§è¡Œæ—¶ï¼Œé‚£ä¹ˆçº¿ç¨‹T2æ˜¯è¢«é˜»å¡å—","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1599366940,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2308075,"avatar":"","nickname":"Geek_89e362","note":"","ucode":"E596C2CFE1CFAF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1133545,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJQyCFqdkJB97EXF7VVO1n0nRZUmxfWwDicJMmupDdDia7VnPkLSJicFyEe28eUtZamH9uprtBJ4Ojjw/132","nickname":"qhj","note":"","ucode":"A9A9370BB2EE0E","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":327202,"discussion_content":"ä¼šé˜»å¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605767261,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":303740,"ip_address":""},"score":327202,"extra":""}]},{"author":{"id":3067096,"avatar":"https://static001.geekbang.org/account/avatar/00/2e/cc/d8/6cdd4b15.jpg","nickname":"ä¸€å¦‚å¾€å¸¸i","note":"","ucode":"C9A5AEA38B3E97","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":586603,"discussion_content":"ä½œè€…ç‰›é€¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662370601,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æ¹–å—"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2924187,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/SluScDGqnhBNwmOQ774QEzuXiazk8Ab7ng8xCT81gunl9Hls9oibwB4AibCDxDtZwTe4mEib5QiaLXUqMv8iceXicXSYg/132","nickname":"Geek_080ce7","note":"","ucode":"C74D97C84983B9","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":577341,"discussion_content":"æ‰€ä»¥å°±æ˜¯4ä¸ªçº¿ç¨‹æ˜¯å§  ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656041844,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":84886,"user_name":"undifined","can_delete":false,"product_type":"c1","uid":1068920,"ip_address":"","ucode":"449CB4CD2DC089","user_header":"https://static001.geekbang.org/account/avatar/00/10/4f/78/c3d8ecb0.jpg","comment_is_top":false,"comment_ctime":1554943230,"is_pvip":false,"replies":[{"id":"30489","content":"å¯¹ï¼ŒğŸ‘ğŸ‘ğŸ‘<br>","user_name":"ä½œè€…å›å¤","comment_id":84886,"uid":"1269969","ip_address":"","utype":1,"ctime":1554945342,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":4,"race_medal":0,"score":"336562392318","product_id":100023901,"comment_content":"çº¿ç¨‹æ± å¤§å°ä¸º1æ˜¯å¿…è¦çš„ï¼Œå¦‚æœè®¾ç½®ä¸ºå¤šä¸ªï¼Œæœ‰å¯èƒ½ä¼šä¸¤ä¸ªçº¿ç¨‹ A å’Œ B åŒæ—¶æŸ¥è¯¢ï¼ŒA çš„è®¢å•å…ˆè¿”å›ï¼ŒB çš„æ´¾é€å•å…ˆè¿”å›ï¼Œé€ æˆé˜Ÿåˆ—ä¸­çš„æ•°æ®ä¸åŒ¹é…ï¼›æ‰€ä»¥1ä¸ªçº¿ç¨‹å®ç°ç”Ÿäº§æ•°æ®ä¸²è¡Œæ‰§è¡Œï¼Œä¿è¯æ•°æ®å®‰å…¨<br><br>å¦‚æœç”¨Future çš„è¯å¯ä»¥æ›´æ–¹ä¾¿ä¸€äº›ï¼š<br><br>        CompletableFuture&lt;List&gt; pOrderFuture = CompletableFuture.supplyAsync(this::getPOrders);<br>        CompletableFuture&lt;List&gt; dOrderFuture = CompletableFuture.supplyAsync(this::getDOrders);<br>        pOrderFuture.thenCombine(dOrderFuture, this::check)<br>                    .thenAccept(this::save);<br><br>è€å¸ˆè¿™æ ·ç†è§£å¯¹å—ï¼Œè°¢è°¢è€å¸ˆ<br>","like_count":78,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446487,"discussion_content":"å¯¹ï¼ŒğŸ‘ğŸ‘ğŸ‘\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554945342,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1937062,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/8e/a6/c3286b61.jpg","nickname":"Javaå’å¢™å·¥ç¨‹å¸ˆ","note":"","ucode":"E76AE44A9C76AE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":296432,"discussion_content":"ä¸ä¼šé€ æˆé˜Ÿåˆ—ä¸­çš„æ•°æ®ä¸åŒ¹é…å§ï¼Œåº”è¯¥æ˜¯ä¿è¯checkçš„é¡ºåºæ€§å’ŒåŸå­æ€§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596541412,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1367048,"avatar":"https://static001.geekbang.org/account/avatar/00/14/dc/08/64f5ab52.jpg","nickname":"é™ˆæ–Œ","note":"","ucode":"B639AB5F6AA03D","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1937062,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/8e/a6/c3286b61.jpg","nickname":"Javaå’å¢™å·¥ç¨‹å¸ˆ","note":"","ucode":"E76AE44A9C76AE","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":346904,"discussion_content":"ä¼šçš„ï¼Œç†ç”±å¦‚ä¸‹ï¼š\n     çº¿ç¨‹Aå…ˆæ‰§è¡Œåˆ°P p = pos.remove(0); è¿˜æœªæ‰§è¡Œ D d = dos.remove(0); ç„¶åAè¢«å‰¥å¤ºäº†CPUä½¿ç”¨æƒã€‚\n     è€Œçº¿ç¨‹Bæ‰§è¡Œäº† P p = pos.remove(0); å’ŒD  d = dos.remove(0); \n     æ­¤æ—¶å°±ä¼šæœ‰é—®é¢˜ï¼ŒBæŠŠåŸæ¥å±äºAçš„dæ‹¿èµ°äº†ã€‚Aä¹Ÿåªèƒ½æ‹¿åˆ°å±äºBçš„däº†ã€‚ ","likes_number":13,"is_delete":false,"is_hidden":false,"ctime":1612095722,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":296432,"ip_address":""},"score":346904,"extra":""},{"author":{"id":1109640,"avatar":"https://static001.geekbang.org/account/avatar/00/10/ee/88/a890b41e.jpg","nickname":"chris","note":"","ucode":"6663E3E09457E3","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1367048,"avatar":"https://static001.geekbang.org/account/avatar/00/14/dc/08/64f5ab52.jpg","nickname":"é™ˆæ–Œ","note":"","ucode":"B639AB5F6AA03D","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":570698,"discussion_content":"è§£é‡Šå¾—é€šé€ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651884057,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":346904,"ip_address":""},"score":570698,"extra":""}]}]},{"had_liked":false,"id":85656,"user_name":"æ›¾è½¼éºŸ","can_delete":false,"product_type":"c1","uid":1451391,"ip_address":"","ucode":"D418371AC11270","user_header":"https://static001.geekbang.org/account/avatar/00/16/25/7f/473d5a77.jpg","comment_is_top":false,"comment_ctime":1555163539,"is_pvip":false,"replies":[{"id":"30793","content":"å¥½å»ºè®®ï¼Œæ‰€æœ‰çš„é˜»å¡æ“ä½œï¼Œéƒ½éœ€è¦è®¾ç½®è¶…æ—¶æ—¶é—´ï¼Œè¿™æ˜¯ä¸ªå¾ˆå¥½çš„ä¹ æƒ¯ã€‚","user_name":"ä½œè€…å›å¤","comment_id":85656,"uid":"1269969","ip_address":"","utype":1,"ctime":1555169526,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":3,"race_medal":0,"score":"267843135891","product_id":100023901,"comment_content":"è€å¸ˆæ¨èæ‚¨ä½¿ç”¨ThreadPoolExecutorå»å®ç°çº¿ç¨‹æ± ï¼Œå¹¶ä¸”å®ç°é‡Œé¢çš„RejectedExecutionHandlerå’ŒThreadFactoryï¼Œè¿™æ ·å¯ä»¥æ–¹ä¾¿å½“è°ƒç”¨è®¢å•æŸ¥è¯¢å’Œæ´¾é€å•æŸ¥è¯¢çš„æ—¶å€™å‡ºç°full gcçš„æ—¶å€™ dumpæ–‡ä»¶ å¯ä»¥å¿«é€Ÿå®šä½å‡ºç°é—®é¢˜çš„çº¿ç¨‹æ˜¯å“ªä¸ªä¸šåŠ¡çº¿ç¨‹ï¼Œå¦‚æœæ˜¯CountDownLatchï¼Œå»ºè®®è®¾ç½®è¶…æ—¶æ—¶é—´ï¼Œé¿å…ç”±äºä¸šåŠ¡æ­»é”æ²¡æœ‰è°ƒç”¨countDown()å¯¼è‡´ç°çº¿ç¨‹ç¡æ­»çš„æƒ…å†µ","like_count":62,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446753,"discussion_content":"å¥½å»ºè®®ï¼Œæ‰€æœ‰çš„é˜»å¡æ“ä½œï¼Œéƒ½éœ€è¦è®¾ç½®è¶…æ—¶æ—¶é—´ï¼Œè¿™æ˜¯ä¸ªå¾ˆå¥½çš„ä¹ æƒ¯ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555169526,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1686903,"avatar":"https://static001.geekbang.org/account/avatar/00/19/bd/77/72676290.jpg","nickname":"cd","note":"","ucode":"AE95F4288A7978","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":270945,"discussion_content":"çœ‹ä¸å¤ªæ‡‚ä½ çš„æ„æ€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590070376,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1451391,"avatar":"https://static001.geekbang.org/account/avatar/00/16/25/7f/473d5a77.jpg","nickname":"æ›¾è½¼éºŸ","note":"","ucode":"D418371AC11270","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1686903,"avatar":"https://static001.geekbang.org/account/avatar/00/19/bd/77/72676290.jpg","nickname":"cd","note":"","ucode":"AE95F4288A7978","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":327287,"discussion_content":"çº¿ç¨‹å°½é‡è‡ªå·±æŒ‡å®šä¸€ä¸ªåå­—ï¼Œä¸ç„¶é»˜è®¤çš„åå­—åœ¨æŸ¥è¯¢çº¿ç¨‹å †æ ˆçš„æ—¶å€™ä¸å¥½ç†è§£ï¼Œå…¶æ¬¡æ˜¯çº¿ç¨‹æ± ä»»åŠ¡é˜Ÿåˆ—éœ€è¦ä½¿ç”¨æœ‰ç•Œçš„","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1605784240,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":270945,"ip_address":""},"score":327287,"extra":""}]}]},{"had_liked":false,"id":85044,"user_name":"ç©ºçŸ¥","can_delete":false,"product_type":"c1","uid":1013283,"ip_address":"","ucode":"C448E98238DD36","user_header":"https://static001.geekbang.org/account/avatar/00/0f/76/23/31e5e984.jpg","comment_is_top":false,"comment_ctime":1554965747,"is_pvip":false,"replies":[{"id":"30512","content":"æ‰€ä»¥æ‰éœ€è¦çº¿ç¨‹æ± æ¥å¼‚æ­¥æ‰§è¡Œå›è°ƒå‡½æ•°ï¼Œä½ ä¸€ä¸å°å¿ƒæŠŠç­”æ¡ˆæ‰¾åˆ°äº†ğŸ˜‚","user_name":"ä½œè€…å›å¤","comment_id":85044,"uid":"1269969","ip_address":"","utype":1,"ctime":1554984459,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":7,"race_medal":0,"score":"263547970803","product_id":100023901,"comment_content":"è€å¸ˆ,å…³äºCyclicBarrierå›è°ƒå‡½æ•°,è¯·æ•™ä¸‹<br>è‡ªå·±å†™äº†ä¸ª CyclicBarrierçš„ä¾‹å­,å›è°ƒå‡½æ•°æ€»æ˜¯åœ¨è®¡æ•°å™¨å½’0æ—¶å€™æ‰§è¡Œ,ä½†æ˜¯çº¿ç¨‹T1 T2è¦ç­‰å›è°ƒå‡½æ•°æ‰§è¡Œç»“æŸä¹‹åæ‰ä¼šå†æ¬¡æ‰§è¡Œ...çœ‹äº†ä¸‹CyclicBarrier çš„æºç ,å½“å†…éƒ¨è®¡æ•°å™¨ index == 0æ—¶å€™, <br><br>final Runnable command = barrierCommand;<br>                    <br>if (command != null)<br>                        <br>\tcommand.run();<br>æ²¡æœ‰å¼€å¯å­çº¿ç¨‹å§.ä¹Ÿå°±æ˜¯è¯´ å¯¹è´¦è¿˜æ˜¯åŒæ­¥æ‰§è¡Œçš„,ç»“æŸä¹‹åæ‰æ˜¯ä¸‹ä¸€æ¬¡çš„æŸ¥è¯¢","like_count":61,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446539,"discussion_content":"æ‰€ä»¥æ‰éœ€è¦çº¿ç¨‹æ± æ¥å¼‚æ­¥æ‰§è¡Œå›è°ƒå‡½æ•°ï¼Œä½ ä¸€ä¸å°å¿ƒæŠŠç­”æ¡ˆæ‰¾åˆ°äº†ğŸ˜‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554984459,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1644104,"avatar":"https://static001.geekbang.org/account/avatar/00/19/16/48/09493874.jpg","nickname":"èŒ¶æ²¡å–å®Œ","note":"","ucode":"D72D88C42A1258","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":351970,"discussion_content":"æœ€åä¸€ä¸ªåˆ°è¾¾barrierçš„çº¿ç¨‹æ¥åŒæ­¥æ‰§è¡Œå›è°ƒå‡½æ•°","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1614532351,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2963434,"avatar":"","nickname":"Geek_94fa0e","note":"","ucode":"15BC7D4E130E80","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1644104,"avatar":"https://static001.geekbang.org/account/avatar/00/19/16/48/09493874.jpg","nickname":"èŒ¶æ²¡å–å®Œ","note":"","ucode":"D72D88C42A1258","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":561051,"discussion_content":"//å›è°ƒå‡½æ•°å†…å®¹æ˜¯ å¼‚æ­¥èµ·ä¸€ä¸ªçº¿ç¨‹æ±  æ¥æ‰§è¡Œä»»åŠ¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649518596,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":351970,"ip_address":""},"score":561051,"extra":""}]},{"author":{"id":1306315,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ee/cb/4bd24e0f.jpg","nickname":"å®˜äºº","note":"","ucode":"ECEF55B08E252B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":537353,"discussion_content":"è¿™ä¸ªæ¯”è¾ƒæœ‰æ„æ€ æ˜¯ç›´æ¥è°ƒç”¨Runnableçš„runæ–¹æ³• è€Œä¸æ˜¯é€šè¿‡Thread.startæ–¹æ³• çœ‹è§Runnableä»¥ä¸ºæ˜¯åœ¨å›è°ƒå¼€å¯ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œ å½“æ—¶è¿˜çº³é—·å‘¢ ä¸ºå•¥è¿˜è¦åœ¨å›è°ƒé‡Œé¢åœ¨æ”¾ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œ çœ‹å®Œä»£ç ä¸€è„¸æ‡µé€¼ ç›´æ¥æ‰ç”¨run()","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1639041172,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1323652,"avatar":"","nickname":"sibyl","note":"","ucode":"0D142011860D69","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":290217,"discussion_content":"mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594379393,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1018354,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/89/f2/abb7bfe3.jpg","nickname":"èªèª","note":"","ucode":"CD6DFE3A15F003","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":254146,"discussion_content":"ç‰›é€¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588297968,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1297299,"avatar":"https://static001.geekbang.org/account/avatar/00/13/cb/93/61e0a8c9.jpg","nickname":"ChoviWu","note":"","ucode":"C4B598A8FA2BFD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":196338,"discussion_content":"ä»æºç è§’åº¦æ¥æ‰¾ç­”æ¡ˆï¼Œå‰å®³","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583335284,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":84838,"user_name":"è¥¿è¥¿å¼—ä¸å¡å¤«å¡","can_delete":false,"product_type":"c1","uid":1001710,"ip_address":"","ucode":"B4C27B8335B76A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/48/ee/872ad07e.jpg","comment_is_top":false,"comment_ctime":1554917676,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"134698903852","product_id":100023901,"comment_content":"å›è°ƒä¸­çš„çº¿ç¨‹æ± ç”¨å•çº¿ç¨‹æ˜¯ä¸ºäº†ç¡®ä¿ä»ä¸¤ä¸ªé˜Ÿåˆ—å–æ•°æ—¶å¯ä»¥ä¸€å¯¹ä¸€è·å–ï¼Œé¿å…é”™ä¹±ã€‚æ¯”å¦‚è¯´ï¼Œå¦‚æœæœ‰ä¸¤ä¸ªçº¿ç¨‹ï¼Œåˆ™å¯èƒ½å‡ºç°çº¿ç¨‹1è·å–PO1ï¼Œçº¿ç¨‹è·å–PO2å’ŒDO1ï¼Œçº¿ç¨‹è·å–DO2çš„ä¹±åºã€‚<br><br>å…¶å®çº¿ç¨‹æ± æ”¹æˆå¤šçº¿ç¨‹ä¹Ÿå¯ä»¥ï¼Œè¦æŠŠä¸¤ä¸ªremove(0)æ”¾åˆ°ä¸€ä¸ªåŒæ­¥å—ä¸­","like_count":31,"discussions":[{"author":{"id":2963434,"avatar":"","nickname":"Geek_94fa0e","note":"","ucode":"15BC7D4E130E80","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":561052,"discussion_content":"yes","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649518690,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":84928,"user_name":"æ³¢æ³¢","can_delete":false,"product_type":"c1","uid":1155827,"ip_address":"","ucode":"4344D9F4486D42","user_header":"https://static001.geekbang.org/account/avatar/00/11/a2/f3/aa504fa6.jpg","comment_is_top":false,"comment_ctime":1554946204,"is_pvip":false,"replies":[{"id":"30621","content":"æœ‰è¿™ç§å¯èƒ½ï¼Œè¿˜èƒ½oom<br>","user_name":"ä½œè€…å›å¤","comment_id":84928,"uid":"1269969","ip_address":"","utype":1,"ctime":1555067865,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":7,"race_medal":0,"score":"108929128604","product_id":100023901,"comment_content":"æ€è€ƒé¢˜ä¸­ï¼Œå¦‚æœç”Ÿäº§è€…æ¯”è¾ƒå¿«ï¼Œæ¶ˆè´¹è€…æ¯”è¾ƒæ…¢ï¼Œç”Ÿäº§è€…é€šçŸ¥çš„æ—¶å€™ï¼Œæ¶ˆè´¹è€…è¿˜åœ¨å¯¹è´¦ï¼Œè¿™ä¸ªæ—¶å€™ä¼šæ€ä¹ˆå¤„ç†ï¼Ÿä¼šä¸ä¼šå¯¼è‡´æ¶ˆè´¹è€…é”™å¤±é€šçŸ¥ï¼Œå¯¼è‡´é˜Ÿåˆ—æ»¡äº†ï¼Œä½†æ˜¯æ¶ˆè´¹è€…å´æ²¡æœ‰æ”¶åˆ°é€šçŸ¥ã€‚","like_count":25,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446499,"discussion_content":"æœ‰è¿™ç§å¯èƒ½ï¼Œè¿˜èƒ½oom\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555067865,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1131027,"avatar":"https://static001.geekbang.org/account/avatar/00/11/42/13/860e176a.jpg","nickname":"å¤–å›½è‚‰å¤¹é¦","note":"","ucode":"00BADDCFEA92B8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":337764,"discussion_content":"æ‰€ä»¥è¿™æ—¶å€™å›è°ƒå‡½æ•°ä¸­åº”è¯¥åªæŠŠæ•°æ®åˆ†åˆ«å–å‡ºæ¥ï¼Œç„¶ååˆ†å‘ç»™å…¶ä»–çº¿ç¨‹å¤„ç†ã€‚è€Œä¸æ˜¯å–å®Œåè¿˜åœ¨æœ¬çº¿ç¨‹å¤„ç†ã€‚\nä¹Ÿå°±æ˜¯æŠŠå–æ•°å’Œå¤„ç†ï¼Œä¸¤æ­¥åˆ†å¼€ã€‚","likes_number":6,"is_delete":false,"is_hidden":false,"ctime":1609071882,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1139128,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEJh4fE4WryeIpjKCYB7TuWS2IEFV0paiaZt3hSh8jrPZRD8cvalPWndTv1VbdDiaEKibY0IgGGPEMbCw/132","nickname":"åˆ˜èªä¸º","note":"","ucode":"8DFDCA7B37D04E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1131027,"avatar":"https://static001.geekbang.org/account/avatar/00/11/42/13/860e176a.jpg","nickname":"å¤–å›½è‚‰å¤¹é¦","note":"","ucode":"00BADDCFEA92B8","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":387039,"discussion_content":"mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627958161,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":337764,"ip_address":""},"score":387039,"extra":""}]},{"author":{"id":1112124,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f8/3c/29d8afd7.jpg","nickname":"@","note":"","ucode":"9FB1632E6C98E4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":286249,"discussion_content":"æ‰€ä»¥ï¼Œå¤šçº¿ç¨‹çš„æ¶ˆè´¹æ˜¯å¯ä»¥çš„ï¼Œä½†éœ€è¦æ³¨æ„è·å–ä¸¤ä¸ªé˜Ÿåˆ—çš„æ•°æ®å’Œç§»é™¤é¦–éƒ¨æ•°æ®éœ€è¦åŒæ­¥","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1593094241,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1252400,"avatar":"https://static001.geekbang.org/account/avatar/00/13/1c/30/7b1f17c2.jpg","nickname":"_kejin","note":"","ucode":"4183B9AB435C8B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3680,"discussion_content":"è¿˜æœ‰ä¸€ç§å¯èƒ½ï¼Œç¬¬ä¸€æ¬¡æ¶ˆè´¹è€…æ‰§è¡Œé€Ÿåº¦å¾ˆå¿«ï¼Œè€Œçº¿ç¨‹aå’Œbä¸¤ä¸ªç”Ÿäº§è€…çº¿ç¨‹é€Ÿåº¦ä¸ä¸€è‡´ï¼Œå¯¼è‡´æ¶ˆè´¹è€…å¯¹å¸å‡ºç°å¾ˆå¤šå·®é”™é˜Ÿåˆ—ï¼Œå› ä¸ºåªæœ‰ä¸€åŠçš„æ•°æ®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564706396,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1564179,"avatar":"https://static001.geekbang.org/account/avatar/00/17/de/13/af1324a0.jpg","nickname":"Lee","note":"","ucode":"E36B56BCC3B0D0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1252400,"avatar":"https://static001.geekbang.org/account/avatar/00/13/1c/30/7b1f17c2.jpg","nickname":"_kejin","note":"","ucode":"4183B9AB435C8B","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3701,"discussion_content":"ä¸ä¼šå‘€ï¼Œç”Ÿäº§è€…çš„2ä¸ªçº¿ç¨‹éƒ½ä¼šè°ƒç”¨await()æ–¹æ³•ï¼Œåªæœ‰è®¡æ•°å™¨éƒ½å‡ä¸º0äº†æ¶ˆè´¹è€…çº¿ç¨‹æ‰ä¼šæ‰§è¡Œ","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1564723032,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":3680,"ip_address":""},"score":3701,"extra":""},{"author":{"id":1687656,"avatar":"https://static001.geekbang.org/account/avatar/00/19/c0/68/314e8306.jpg","nickname":"å¨å…ˆæ£®","note":"","ucode":"5F445C6832274B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1252400,"avatar":"https://static001.geekbang.org/account/avatar/00/13/1c/30/7b1f17c2.jpg","nickname":"_kejin","note":"","ucode":"4183B9AB435C8B","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":363915,"discussion_content":"è¿™ç§æƒ…å†µä¸ä¼šå‡ºç°çš„ï¼Œa,bæ¶ˆè´¹è€…çº¿ç¨‹è¿”å›çš„æ—¶é—´æ˜¯ä»¥abä¸­æœ€æ…¢çš„ä¸€æ¡ä¸ºå‡†çš„ã€‚å¿«çš„ä¼šç­‰æ…¢çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617325741,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":3680,"ip_address":""},"score":363915,"extra":""}]}]},{"had_liked":false,"id":84880,"user_name":"nanquanmama","can_delete":false,"product_type":"c1","uid":1023100,"ip_address":"","ucode":"799C2E0F841FB0","user_header":"https://static001.geekbang.org/account/avatar/00/0f/9c/7c/408c2a0b.jpg","comment_is_top":false,"comment_ctime":1554942775,"is_pvip":false,"replies":[{"id":"30492","content":"æ”¾åˆ°ä¸åŒçš„ç±»é‡Œï¼Œè¿™æ–¹é¢ä¼ ç»Ÿçš„é¢å‘å¯¹è±¡å¯ä»¥è§£å†³ï¼Œlambdaä¹Ÿèƒ½è§£å†³ï¼Œè¿™ä¸ªæ¨¡å—çš„æœ€åå‡ ç« èƒ½è§£å†³ä½ è¯´çš„è¿™ä¸ªé—®é¢˜ï¼Œä½†æ˜¯æ›´å¤æ‚çš„åœºæ™¯è¿˜å¾—è‡ªå·±è®¾è®¡<br>","user_name":"ä½œè€…å›å¤","comment_id":84880,"uid":"1269969","ip_address":"","utype":1,"ctime":1554945772,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":1,"race_medal":0,"score":"78864354103","product_id":100023901,"comment_content":"æœ€åçš„é‚£ä¸ªä¾‹å­ï¼Œä¸šåŠ¡é€»è¾‘çš„éƒ¨åˆ†å·²ç»å˜å¾—å¾ˆä¸ç›´è§‚ï¼Œå¹¶å‘æ§åˆ¶çš„é€»è¾‘æ©ç›–ä½äº†ä¸šåŠ¡é€»è¾‘ã€‚è¯·é—®ä¸€ä¸‹è€å¸ˆï¼Œå®é™…é¡¹ç›®å¼€å‘ä¸­ï¼Œå¹¶å‘æ§åˆ¶é€»è¾‘å¦‚ä½•åšï¼Œæ‰èƒ½å’Œä¸šåŠ¡é€»è¾‘åˆ†ç¦»å‡ºæ¥ï¼Ÿ","like_count":18,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446484,"discussion_content":"æ”¾åˆ°ä¸åŒçš„ç±»é‡Œï¼Œè¿™æ–¹é¢ä¼ ç»Ÿçš„é¢å‘å¯¹è±¡å¯ä»¥è§£å†³ï¼Œlambdaä¹Ÿèƒ½è§£å†³ï¼Œè¿™ä¸ªæ¨¡å—çš„æœ€åå‡ ç« èƒ½è§£å†³ä½ è¯´çš„è¿™ä¸ªé—®é¢˜ï¼Œä½†æ˜¯æ›´å¤æ‚çš„åœºæ™¯è¿˜å¾—è‡ªå·±è®¾è®¡\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554945772,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":85447,"user_name":"... ...","can_delete":false,"product_type":"c1","uid":1312354,"ip_address":"","ucode":"E214CAA6349A60","user_header":"https://static001.geekbang.org/account/avatar/00/14/06/62/898449d3.jpg","comment_is_top":false,"comment_ctime":1555061418,"is_pvip":false,"replies":[{"id":"30619","content":"ä¼š<br>","user_name":"ä½œè€…å›å¤","comment_id":85447,"uid":"1269969","ip_address":"","utype":1,"ctime":1555065403,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":3,"race_medal":0,"score":"74569505450","product_id":100023901,"comment_content":"è¿½é—®ï¼šå¦‚æœçº¿ç¨‹æ± æ˜¯å•çº¿ç¨‹çš„è¯ã€‚é‚£å‡å¦‚ç”Ÿäº§è€…é€Ÿåº¦å¿«è¿checkå‡½æ•°æ‰§è¡Œæ—¶é—´ã€‚é‚£æ˜¯ä¸æ˜¯å°±ä¼šå‡ºç°å µå¡æƒ…å†µäº†ã€‚ä¹…è€Œä¹…ä¹‹ï¼Œæ˜¯ä¸æ˜¯ä¼šå‡ºç°é˜Ÿåˆ—å†…å­˜æº¢å‡º","like_count":17,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446670,"discussion_content":"ä¼š\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555065403,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1464183,"avatar":"https://static001.geekbang.org/account/avatar/00/16/57/77/ad6b2b8b.jpg","nickname":"æ¡ƒèŠ±æ²³é€†æµè€Œä¸Š","note":"","ucode":"A88A60296743CF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301165,"discussion_content":"æ„Ÿè§‰å¯¹äºæ­¤æ¡ˆä¾‹ï¼Œå¯ä»…éœ€è¦åœ¨æ¶ˆæ¯é˜Ÿåˆ—ä¸­é¢„å…ˆä¿ç•™å‡ ä¸ªæ¶ˆæ¯å³å¯ï¼Œæ¯”å¦‚å¯åœ¨ T1 T2 çº¿ç¨‹æ·»åŠ åˆ¤æ–­ï¼Œå¦‚æœé˜Ÿåˆ—é•¿åº¦å¤§äº4ï¼Œé‚£ä¹ˆå¯ä»¥çº¿ç¨‹sleepç­‰å¾…","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598430631,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1537341,"avatar":"https://static001.geekbang.org/account/avatar/00/17/75/3d/71ad2330.jpg","nickname":"åœ¨è·¯ä¸Š","note":"","ucode":"C68778C04D61DF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":285775,"discussion_content":"æ…ç”¨æ— ç•Œé˜Ÿåˆ—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592928435,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":103621,"user_name":"Adam","can_delete":false,"product_type":"c1","uid":1517838,"ip_address":"","ucode":"965DCD693E752B","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK36t2flfxhzKygfLfdIHbK99M9D9w3v3bwAHUibJSFAs1ibswf7hbhkqL321k5SUjfiaWkkHeRBlibNA/132","comment_is_top":false,"comment_ctime":1560478180,"is_pvip":false,"replies":[{"id":"37542","content":"æ–¹æ¡ˆä¸ŠåŸºæœ¬éƒ½æ˜¯é™æµ","user_name":"ä½œè€…å›å¤","comment_id":103621,"uid":"1269969","ip_address":"","utype":1,"ctime":1560511912,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":1,"race_medal":0,"score":"61690020324","product_id":100023901,"comment_content":"å¦‚æœç”Ÿäº§è€…æ¯”è¾ƒå¿«ï¼Œæ¶ˆè´¹è€…checkè¿˜æ²¡å¯¹è´¦å®Œ ä¼šä¸ä¼šç…§æˆ é˜Ÿåˆ—è¶Šæ¥è¶Šå¤š æœ€åå†…å­˜æº¢å‡ºäº† ï¼Œæœ‰æ²¡æœ‰ä»€ä¹ˆå¥½çš„æ–¹æ¡ˆè§£å†³å‘¢ï¼Ÿ","like_count":14,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":453943,"discussion_content":"æ–¹æ¡ˆä¸ŠåŸºæœ¬éƒ½æ˜¯é™æµ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560511912,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":90924,"user_name":"xuery","can_delete":false,"product_type":"c1","uid":1027584,"ip_address":"","ucode":"F461B61BE06131","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ae/00/025f37e7.jpg","comment_is_top":false,"comment_ctime":1556725619,"is_pvip":true,"replies":[{"id":"32614","content":"å¤šä¸ªçº¿ç¨‹æœ‰è¿™ä¸ªå¯èƒ½ï¼Œæ‰€ä»¥çº¿ç¨‹æ± ç”¨çš„æ˜¯å•çº¿ç¨‹çš„","user_name":"ä½œè€…å›å¤","comment_id":90924,"uid":"1269969","ip_address":"","utype":1,"ctime":1556756488,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":2,"race_medal":0,"score":"57391300467","product_id":100023901,"comment_content":"æœ‰ï¼Œå¦‚æœä¸ºçº¿ç¨‹æ± æœ‰å¤šä¸ªçº¿ç¨‹ï¼Œåˆ™ç”±äºcheck()å‡½æ•°é‡Œé¢çš„ä¸¤ä¸ªremoveå¹¶ä¸æ˜¯åŸå­æ“ä½œï¼Œå¯èƒ½å¯¼è‡´æ¶ˆè´¹é”™ä¹±ã€‚å‡è®¾è®¢å•é˜Ÿåˆ—ä¸­æœ‰P1ï¼ŒP2ï¼›æ´¾é€é˜Ÿåˆ—ä¸­æœ‰D1,D2ï¼›ä¸¤ä¸ªçº¿ç¨‹T1,T2åŒæ—¶æ‰§è¡Œcheckï¼Œå¯èƒ½å‡ºç°T1æ¶ˆè´¹åˆ°P1,D2ï¼ŒT2æ¶ˆè´¹åˆ°P2ï¼ŒD1ï¼Œå°±æ˜¯T1å…ˆæ‰§è¡Œpos.remove(0), è€ŒåT2æ‰§è¡Œpos.remove(0);dos.remov(0);ç„¶åT1æ‰æ‰§è¡Œdos.remove(0)çš„åœºæ™¯","like_count":13,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":448726,"discussion_content":"å¤šä¸ªçº¿ç¨‹æœ‰è¿™ä¸ªå¯èƒ½ï¼Œæ‰€ä»¥çº¿ç¨‹æ± ç”¨çš„æ˜¯å•çº¿ç¨‹çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1556756488,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1015754,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7f/ca/ea85bfdd.jpg","nickname":"helloworld","note":"","ucode":"00DF2FEC58D2E6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4183,"discussion_content":"è™½ç„¶å®éªŒä¸å¥½åšï¼Œä½†æ˜¯ä»ç†è®ºä¸Šæ¥çœ‹å¦‚æœä¸æ˜¯å•ä¸ªçº¿ç¨‹æ± çš„è¯ä¼šå­˜åœ¨è¿™ç§é—®é¢˜","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1565193586,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":85085,"user_name":"æœ¨å¶äººKing","can_delete":false,"product_type":"c1","uid":1028805,"ip_address":"","ucode":"0BDCA51E6F0B76","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b2/c5/6ae0be56.jpg","comment_is_top":false,"comment_ctime":1554975087,"is_pvip":false,"replies":[{"id":"30505","content":"åæ­£ä¹Ÿä¸ä¼šåå¤åˆ›å»ºï¼Œç”¨ä¸ç”¨éƒ½æ²¡å…³ç³»<br>","user_name":"ä½œè€…å›å¤","comment_id":85085,"uid":"1269969","ip_address":"","utype":1,"ctime":1554983861,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":1,"race_medal":0,"score":"57389549935","product_id":100023901,"comment_content":"è€å¸ˆï¼Œæœ€åcheckAllï¼ˆï¼‰ è¿™é‡Œä¸ºä»€ä¹ˆnew äº†ä¸¤ä¸ªThread  è€Œä¸æ˜¯ä½¿ç”¨çº¿ç¨‹æ± <br><br><br>","like_count":13,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446553,"discussion_content":"åæ­£ä¹Ÿä¸ä¼šåå¤åˆ›å»ºï¼Œç”¨ä¸ç”¨éƒ½æ²¡å…³ç³»\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554983861,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":84998,"user_name":"iron_man","can_delete":false,"product_type":"c1","uid":1099883,"ip_address":"","ucode":"C0053A59442910","user_header":"https://static001.geekbang.org/account/avatar/00/10/c8/6b/0f3876ef.jpg","comment_is_top":false,"comment_ctime":1554953964,"is_pvip":false,"replies":[{"id":"30846","content":"å›è°ƒå‡½æ•°æ‰§è¡Œå®Œä¹‹åæ‰ä¼šå”¤é†’ç­‰å¾…çš„çº¿ç¨‹ã€‚","user_name":"ä½œè€…å›å¤","comment_id":84998,"uid":"1269969","ip_address":"","utype":1,"ctime":1555241675,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":2,"race_medal":0,"score":"57389528812","product_id":100023901,"comment_content":"ç‹è€å¸ˆï¼Œcyclicbarrierï¼Œå…·ä½“æ˜¯åœ¨ä»€ä¹ˆæ—¶å€™æ¸…é›¶è®¡æ•°å™¨å‘¢ï¼Ÿæ˜¯åœ¨æ‰€æœ‰çº¿ç¨‹awaitè¿”å›åè¿˜æ˜¯åœ¨å›è°ƒå‡½æ•°è°ƒç”¨åï¼Ÿawaitå’Œå›æ‰å‡½æ•°çš„è°ƒç”¨é¡ºåºæ˜¯æ€æ ·çš„","like_count":13,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446525,"discussion_content":"å›è°ƒå‡½æ•°æ‰§è¡Œå®Œä¹‹åæ‰ä¼šå”¤é†’ç­‰å¾…çš„çº¿ç¨‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555241675,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1554995,"avatar":"https://static001.geekbang.org/account/avatar/00/17/ba/33/2d83d174.jpg","nickname":"æ—¶å…‰å®ˆæŠ¤è€…-åŸºå…°","note":"","ucode":"F0B0887B1979D2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":366089,"discussion_content":"åº”è¯¥æ˜¯å…ˆæ¸…é›¶ï¼Œå†æ‰§è¡Œå›è°ƒï¼Œæœ€åå”¤é†’","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617957577,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":85174,"user_name":"ç‹ç››æ­¦","can_delete":false,"product_type":"c1","uid":1182516,"ip_address":"","ucode":"DE7EF246D3DCE8","user_header":"https://static001.geekbang.org/account/avatar/00/12/0b/34/f41d73a4.jpg","comment_is_top":false,"comment_ctime":1554994382,"is_pvip":false,"replies":[{"id":"30589","content":"ä¸€æ¬¡å¤šå–å‡ ä¸ªç„¶åæ‰¹é‡æ‰§è¡Œï¼Œè¿™ä¸ªåŠæ³•éå¸¸å®ç”¨ï¼","user_name":"ä½œè€…å›å¤","comment_id":85174,"uid":"1269969","ip_address":"","utype":1,"ctime":1554998986,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":1,"race_medal":0,"score":"53094601934","product_id":100023901,"comment_content":"undefindåŒå­¦çš„æ„æ€å·®ä¸å¤šå¯¹ã€‚                         åªæœ‰ä¸€ä¸ªçº¿ç¨‹çš„çº¿ç¨‹æ± ï¼Œæ˜¯å› ä¸ºï¼Œè®¢å•é˜Ÿåˆ—å’Œæ´¾å•é˜Ÿåˆ—è¯»å–æ•°æ®å­˜åœ¨ç«æ€æ¡ä»¶ã€‚ å¦‚æœè¦å¼€å¤šä¸ªçº¿ç¨‹ï¼Œåˆ™éœ€è¦ä¸€ä¸ªlockè¿›è¡ŒåŒæ­¥é‚£ä¸¤ä¸ªremoveæ–¹æ³•ã€‚    ä¸ªäººæ¨èçš„æ€è·¯æ˜¯ï¼Œå¦‚æœç”Ÿäº§è€…é€Ÿåº¦æ¯”æ¶ˆè´¹è€…å¿«çš„æƒ…å†µä¸‹ï¼Œæ”¾å…¥ä¸€ä¸ªåŒå‘çš„é˜»å¡é˜Ÿåˆ—å°¾éƒ¨ï¼Œæ¯æ¬¡ä»åŒå‘é˜Ÿåˆ—å¤´éƒ¨å–ä¸¤ä¸ªå¯¹è±¡ï¼Œæ ¹æ®å¯¹è±¡å±æ€§æ¥åŒºåˆ«è®¢å•ç±»å‹ï¼Œä¹Ÿèƒ½å¼€å¤šä¸ªçº¿ç¨‹è¿›è¡Œcheckæ“ä½œã€‚  ä½†æœ¬æ–‡ä¸šåŠ¡é‡Œchecké€Ÿåº¦å¾ˆå¿«ï¼Œæ‰€ä»¥è¿™ä¸ªåœºæ™¯åªéœ€è¦å¼€1ä¸ªçº¿ç¨‹çš„çº¿ç¨‹æ± æ˜¯åˆç†çš„ã€‚","like_count":12,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446582,"discussion_content":"ä¸€æ¬¡å¤šå–å‡ ä¸ªç„¶åæ‰¹é‡æ‰§è¡Œï¼Œè¿™ä¸ªåŠæ³•éå¸¸å®ç”¨ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554998986,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":87234,"user_name":"aguan(^ï½¥ï½ªï½¥^)","can_delete":false,"product_type":"c1","uid":1107177,"ip_address":"","ucode":"04833EF2D18E1A","user_header":"https://static001.geekbang.org/account/avatar/00/10/e4/e9/0dd3829f.jpg","comment_is_top":false,"comment_ctime":1555551596,"is_pvip":false,"replies":[{"id":"31552","content":"ä¸€ä¸€æ˜¯ä¸€ç»„å’Œä¸€ç»„ç­‰ä»·ï¼Œcheckçš„æ—¶å€™ä¹Ÿæ˜¯æ‰¹é‡æ“ä½œã€‚æ²¡æœ‰å°±å°±æ”¾ä¸€ä¸ªç©ºå¯¹è±¡åšå ä½å°±å¯ä»¥äº†<br>","user_name":"ä½œè€…å›å¤","comment_id":87234,"uid":"1269969","ip_address":"","utype":1,"ctime":1555676028,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":2,"race_medal":0,"score":"48800191852","product_id":100023901,"comment_content":"è€å¸ˆï¼Œé—®ä¸€ä¸ªä¸šåŠ¡é€»è¾‘çš„é—®é¢˜ï¼Œåœ¨ä»ä¸¤ä¸ªé˜Ÿåˆ—ä¸­åˆ†åˆ«å–è®¢å•å’Œæ´¾é€å•çš„åšæ¯”è¾ƒçš„æ—¶å€™ï¼Œæ€ä¹ˆä¿è¯è¿™è®¢å•å’Œæ´¾é€å•æ˜¯ä¸€ä¸€å¯¹åº”çš„å…³ç³»å‘¢ï¼Ÿå¦‚æœæ´¾é€å•æœ‰æ¼å•ï¼Œé‚£å¦‚ä½•å¯¹è´¦æ¯”è¾ƒå–ç»“æœæ—¶çš„æ•°æ®æ˜¯ä¸€ä¸€å¯¹åº”å…³ç³»ï¼Ÿ","like_count":11,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":447359,"discussion_content":"ä¸€ä¸€æ˜¯ä¸€ç»„å’Œä¸€ç»„ç­‰ä»·ï¼Œcheckçš„æ—¶å€™ä¹Ÿæ˜¯æ‰¹é‡æ“ä½œã€‚æ²¡æœ‰å°±å°±æ”¾ä¸€ä¸ªç©ºå¯¹è±¡åšå ä½å°±å¯ä»¥äº†\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555676028,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1670763,"avatar":"https://static001.geekbang.org/account/avatar/00/19/7e/6b/36fc4516.jpg","nickname":"FIRE","note":"","ucode":"85861D990FB3AB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":294673,"discussion_content":"æˆ‘ä¹Ÿæ˜¯è¿™ä¸ªç–‘é—®,ç»ˆäºçœ‹åˆ°æœ‰äººé—®äº†,æ‰¹é‡æ“ä½œå¯ä»¥ä¸ç”¨é¢‘ç¹æŸ¥åº“,æ•ˆç‡é«˜.å¦‚æœè®¢å•è¡¨å’Œæ´¾é€è¡¨æŸ¥è¯¢çš„å¤§éƒ¨åˆ†ä¸ä¸€è‡´å°±ä¸èƒ½å¯¹è´¦äº†å§?åªèƒ½æ‹¿è®¢å•å·å»æŸ¥æ´¾é€è¡¨.æˆ‘ä¹‹å‰åšè¿‡æ”¯ä»˜çš„å¯¹è´¦,å› ä¸ºæ˜¯å®æ—¶çš„,æ‰€ä»¥æŒ‰å¤©æŸ¥è¯¢å°±èƒ½ä½¿ä¸¤è¾¹çš„æ•°æ®åŸºæœ¬ä¸€è‡´.","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595953289,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":136214,"user_name":"ç‹è¹","can_delete":false,"product_type":"c1","uid":1203920,"ip_address":"","ucode":"0A6F91068A13E8","user_header":"https://static001.geekbang.org/account/avatar/00/12/5e/d0/e676ac19.jpg","comment_is_top":false,"comment_ctime":1569386340,"is_pvip":false,"replies":[{"id":"52329","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","comment_id":136214,"uid":"1269969","ip_address":"","utype":1,"ctime":1569464487,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":1,"race_medal":0,"score":"44519059300","product_id":100023901,"comment_content":"1.å›è°ƒå¤„ç†äº¤ç»™æ–°å¼€è¾Ÿçš„çº¿ç¨‹æ‰§è¡Œï¼Œè®©å½“å‰å¤„ç†ç»§ç»­è¿›è¡Œï¼Œæ— éœ€ç­‰å¾…<br>2.ä½¿ç”¨çº¿ç¨‹æ± è§£å†³æ–°å¼€è¾Ÿçº¿ç¨‹åˆ›å»ºå’Œé”€æ¯çš„å¼€é”€é—®é¢˜<br>3.å•çº¿ç¨‹ä½¿å¾—ä¸¤ä¸ªé˜Ÿåˆ—çš„å‡ºé˜Ÿæ— éœ€åŒæ­¥","like_count":10,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468510,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569464487,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":85025,"user_name":"æœˆé©¬ç©¿å…³","can_delete":false,"product_type":"c1","uid":1338088,"ip_address":"","ucode":"2CE20CA1EB827D","user_header":"https://static001.geekbang.org/account/avatar/00/14/6a/e8/4bb87c34.jpg","comment_is_top":false,"comment_ctime":1554960279,"is_pvip":false,"replies":[{"id":"30514","content":"ğŸ‘<br>","user_name":"ä½œè€…å›å¤","comment_id":85025,"uid":"1269969","ip_address":"","utype":1,"ctime":1554984539,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":1,"race_medal":0,"score":"44504633239","product_id":100023901,"comment_content":"æ„Ÿè°¢è€å¸ˆï¼Œä¸€ç›´ä¸å¤ªæ˜ç™½ä»€ä¹ˆæ—¶å€™ç”¨CyclicBarrierï¼Œä»Šå¤©çœ‹åˆ°æ¡ˆä¾‹äº†ï¼Œåˆšçœ‹åˆ°joiné‚£æ®µæˆ‘æƒ³åˆ°äº†CompletableFuture<br><br>","like_count":10,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446534,"discussion_content":"ğŸ‘\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554984539,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":96262,"user_name":"null","can_delete":false,"product_type":"c1","uid":1024294,"ip_address":"","ucode":"F9039EFED6B55D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaELZPnUAiajaR5C25EDLWeJURggyiaOP5GGPe2qlwpQcm5e3ybib8OsP4tvddFDLVRSNNGL5I3SFPJHsA/132","comment_is_top":false,"comment_ctime":1558368705,"is_pvip":false,"replies":[{"id":"34570","content":"æŸ¥è¯¢æ•°æ®åº“ä¸€å®šæ˜¯æ‰¹é‡æŸ¥è¯¢çš„ï¼Œå…ˆæŠŠè®¢å•çš„idæŸ¥å‡ºæ¥ï¼Œç„¶åç”¨è¿™äº›idå°±èƒ½å¹¶è¡ŒæŸ¥äº†ï¼Œcyclicbarrierèƒ½å¾ªç¯åˆ©ç”¨ï¼Œç”¨èµ·æ¥æ›´ç®€å•ï¼Œä½ å¯ä»¥ç”¨countdownlatchå®ç°ä¸€ä¸‹ï¼Œå°±çŸ¥é“ä»–ä»¬çš„åŒºåˆ«äº†","user_name":"ä½œè€…å›å¤","comment_id":96262,"uid":"1269969","ip_address":"","utype":1,"ctime":1558448784,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":1,"race_medal":0,"score":"31623139777","product_id":100023901,"comment_content":"è€å¸ˆï¼Œæ‚¨å¥½ï¼æˆ‘æœ‰å‡ ä¸ªç–‘é—®ï¼š<br><br>1. æ–‡ç« é‡Œæåˆ°ï¼šè·å–è®¢å• getPOrders() å’Œè·å–æ´¾é€è®¢ getDOrders() æ˜¯ç›¸äº’ç‹¬ç«‹ã€äº’ä¸ä¾èµ–çš„ã€‚<br>æˆ‘ä»¬çš„è®¢å•ç³»ç»Ÿé€šè¿‡ MQ ä¸æ´¾é€ç³»ç»Ÿè¿›è¡Œæ•°æ®äº¤äº’ï¼Œå¹¶ä¸”ä¸€ä¸ªè®¢å•æœ‰å¯èƒ½ç”Ÿæˆå¤šä¸ªæ´¾é€å•ï¼ˆä»“åº“ä¸åŒï¼Œæ‹†å•ï¼‰ï¼Œæƒ³äº†å¥½ä¹…ï¼Œä¹Ÿæ²¡æƒ³åˆ°æ¯”è¾ƒå¥½çš„æ–¹å¼å®ç°è®¢å•å’Œæ´¾é€å•çš„æŸ¥è¯¢æ“ä½œå¯ä»¥å¹¶è¡Œå¤„ç†ã€‚<br>å¦‚æœæ¯æ¬¡åªç­›é€‰è¿‡å»ä¸€ä¸ªå°æ—¶æœªå¯¹è´¦çš„è®¢å•ï¼Œå’Œè¿‡å»ä¸€å°æ—¶çš„æ´¾é€å•ï¼Œå½“å­˜åœ¨æ¼ç”Ÿæˆæ´¾é€å•æ—¶ï¼Œç³»ç»Ÿå‘ç°ä¸äº†ï¼ˆä¸çŸ¥é“æ˜¯æ¼ç”Ÿæˆæ´¾é€å•ï¼Œè¿˜æ˜¯ MQ æ²¡æ¶ˆè´¹ï¼‰ã€‚<br><br>2. æ–‡ç« ç¬¬äºŒç§æ–¹æ¡ˆï¼Œçº¿ç¨‹æ± å¤šç”Ÿæˆä¸€ä¸ªçº¿ç¨‹ï¼Œä¸“é—¨ç”¨æ¥å¤„ç† ( check &amp; save )ï¼Œä¹Ÿèƒ½å¤Ÿå®ç°æŸ¥è¯¢å’Œå¯¹è´¦å¹¶è¡Œå¤„ç†ã€‚å› æ­¤ä¸å¤ªèƒ½ç†è§£â€œä¸€ä¸ªçº¿ç¨‹ç­‰å¾…å¤šä¸ªçº¿ç¨‹â€å’Œâ€œä¸€ç»„çº¿ç¨‹ä¹‹é—´çš„ç›¸äº’ç­‰å¾…â€çš„åŒºåˆ«ã€‚æ„Ÿè§‰ CountDownLatch å’Œ CyclicBarrier éƒ½æ˜¯ (check &amp; save) çº¿ç¨‹åœ¨ç­‰å¾… getPOrders å’Œ getDOrders çº¿ç¨‹ã€‚<br><br>3.æ–‡ç« æœ€åä¸€ç§æ–¹æ¡ˆï¼Œæ¯æ¬¡åªæŸ¥è¯¢ä¸€æ¡æ”¹æˆä¸€æ¬¡æŸ¥å¤šæ¡ï¼Œè¿™æ ·å¯ä»¥å‡å°‘æŸ¥è¯¢çš„æ¬¡æ•°ã€‚check çš„æ—¶å€™ï¼Œä¹Ÿæ‰¹é‡å¤„ç†ï¼Œååé‡æ˜¯ä¸æ˜¯ä¼šå¥½ä¸€ç‚¹å–ã€‚<br><br>è°¢è°¢è€å¸ˆï¼ï¼","like_count":7,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":450800,"discussion_content":"æŸ¥è¯¢æ•°æ®åº“ä¸€å®šæ˜¯æ‰¹é‡æŸ¥è¯¢çš„ï¼Œå…ˆæŠŠè®¢å•çš„idæŸ¥å‡ºæ¥ï¼Œç„¶åç”¨è¿™äº›idå°±èƒ½å¹¶è¡ŒæŸ¥äº†ï¼Œcyclicbarrierèƒ½å¾ªç¯åˆ©ç”¨ï¼Œç”¨èµ·æ¥æ›´ç®€å•ï¼Œä½ å¯ä»¥ç”¨countdownlatchå®ç°ä¸€ä¸‹ï¼Œå°±çŸ¥é“ä»–ä»¬çš„åŒºåˆ«äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558448784,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":84999,"user_name":"crazypokerk","can_delete":false,"product_type":"c1","uid":1158383,"ip_address":"","ucode":"9AAD5D9726E503","user_header":"https://static001.geekbang.org/account/avatar/00/11/ac/ef/494f56c3.jpg","comment_is_top":false,"comment_ctime":1554954170,"is_pvip":false,"replies":[{"id":"30596","content":"æ˜¯çš„","user_name":"ä½œè€…å›å¤","comment_id":84999,"uid":"1269969","ip_address":"","utype":1,"ctime":1554999469,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":1,"race_medal":0,"score":"31619725242","product_id":100023901,"comment_content":"è¯·æ•™ä¸€ä¸‹è€å¸ˆï¼Œä¸Šé¢è¯´çš„å°†CyclicBarrierè®¡æ•°å™¨åˆå§‹å€¼è®¾ä¸º2ï¼Œå‡å¦‚å½“T1å…ˆæ‰§è¡Œå®Œï¼Œç„¶åæ‰§è¡Œawaitæ—¶å‡1ï¼Œæ­¤æ—¶è®¡æ•°å™¨ä¸º1å¤§äº0ï¼Œç­‰å¾…ï¼Œç„¶åT2æ‰§è¡Œawaitæ—¶å†å‡1ï¼Œæ­¤æ—¶è®¡æ•°å™¨ä¸º0ï¼Œåˆ™å”¤é†’T3æ‰§è¡Œï¼Œä¸æ­¤åŒæ—¶ï¼Œå°†è®¡æ•°å™¨é‡ç½®ä¸º2ï¼ŒT1ã€T2ç»§ç»­å¼€å§‹æ‰§è¡Œï¼Œä»¥æ­¤å¾ªç¯å¾€å¤ï¼Œå¯ä»¥è¿™æ ·ç†è§£å—ï¼Ÿ","like_count":7,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446526,"discussion_content":"æ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554999469,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117408,"user_name":"Asanz","can_delete":false,"product_type":"c1","uid":1005200,"ip_address":"","ucode":"430AB7ED59EE3F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/56/90/be01bb8d.jpg","comment_is_top":false,"comment_ctime":1564042210,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"27333845986","product_id":100023901,"comment_content":"æœ€åçš„ä»£ç æ®µçœ‹äº†å¥½å‡ éå¹¶æ²¡æœ‰å‘ç°checkAll()æ–¹æ³•è¢«è°ƒç”¨å•ŠğŸ˜‚","like_count":6},{"had_liked":false,"id":84831,"user_name":"Darren","can_delete":false,"product_type":"c1","uid":1254968,"ip_address":"","ucode":"CCD2B2C492BE9A","user_header":"https://static001.geekbang.org/account/avatar/00/13/26/38/ef063dc2.jpg","comment_is_top":false,"comment_ctime":1554914142,"is_pvip":true,"replies":[{"id":"30622","content":"ğŸ‘<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1555068063,"ip_address":"","comment_id":84831,"utype":1}],"discussion_count":1,"race_medal":0,"score":"27324717918","product_id":100023901,"comment_content":"è€Œä¸”å…¶å®å¯ä»¥ç›´æ¥singleçº¿ç¨‹æ± çš„ï¼Œä½†æ˜¯æœ€å¥½ä¸è¦Executorsæä¾›çš„çº¿ç¨‹æ± ï¼Œéƒ½æœ‰å¼Šç«¯ï¼Œæœ€å¥½è‡ªå®šä¹‰çº¿ç¨‹æ± ","like_count":6,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446463,"discussion_content":"ğŸ‘\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555068063,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":96983,"user_name":"å—åŒ—å°‘å¿","can_delete":false,"product_type":"c1","uid":1018958,"ip_address":"","ucode":"DFCC59F2BBD8CE","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8c/4e/b81969fa.jpg","comment_is_top":false,"comment_ctime":1558569813,"is_pvip":false,"replies":[{"id":"34749","content":"å¯ä»¥ï¼Œå¤§éƒ¨åˆ†åœºæ™¯éƒ½æ˜¯ä½ è¯´çš„è¿™ç§","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1558616841,"ip_address":"","comment_id":96983,"utype":1}],"discussion_count":2,"race_medal":0,"score":"23033406293","product_id":100023901,"comment_content":"CountDownLatchå¯ä»¥ç†è§£æˆä¸»çº¿ç¨‹ç­‰å¾…å…¶ä»–çº¿ç¨‹å—","like_count":5,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451089,"discussion_content":"å¯ä»¥ï¼Œå¤§éƒ¨åˆ†åœºæ™¯éƒ½æ˜¯ä½ è¯´çš„è¿™ç§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558616841,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1098504,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c3/08/28c327d0.jpg","nickname":"å†°æ²³æ—¶ä»£","note":"","ucode":"F4375FB7CE4FD4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":293186,"discussion_content":"ä¸ªäººç†è§£ï¼šå¤§å¤šæ•°æƒ…å†µä¸‹æˆ‘ä»¬åœ¨Tomcatç­‰å®¹å™¨çš„çº¿ç¨‹æ± ä¸­ï¼Œå½“å‰çš„ä¸»çº¿ç¨‹æ˜¯Tomcatçº¿ç¨‹æ± çš„ä¸€æ¡çº¿ç¨‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595471529,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":84927,"user_name":"ITå°ç™½","can_delete":false,"product_type":"c1","uid":1442053,"ip_address":"","ucode":"CD51B309AE4D29","user_header":"https://static001.geekbang.org/account/avatar/00/16/01/05/6435d2ef.jpg","comment_is_top":false,"comment_ctime":1554946167,"is_pvip":false,"replies":[{"id":"30518","content":"ç“¶é¢ˆåœ¨æ•°æ®åº“ï¼Œåªè¦èƒ½è®©æ•°æ®åº“æ€§èƒ½å‘æŒ¥å‡ºæ¥åŸºæœ¬å°±æ˜¯æœ€ä¼˜æ–¹æ¡ˆäº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1554985382,"ip_address":"","comment_id":84927,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23029782647","product_id":100023901,"comment_content":"è¿™ä¸ªç¤ºä¾‹ç¡®å®å°†è¿™ä¸¤ä¸ªå·¥å…·ç±»çš„ä½¿ç”¨è®²æ¸…æ¥šäº†ï¼Œä½†æ˜¯å¯¹äºè¿™ä¸ªå…·ä½“ä¸šåŠ¡è¿™ä¹ˆæ”¹é€ æ˜¯ä¸åˆç†çš„ã€‚å› ä¸ºæ•´ä¸ªå¯¹è´¦è¿‡ç¨‹é‡Œçš„æ‰€æœ‰æ“ä½œå¿…é¡»æ˜¯åŸå­çš„ï¼Œè¿™ä¹ˆæ‹†åˆ†åˆ°å¤šä¸ªçº¿ç¨‹é‡Œæ‰§è¡Œï¼Œè¿™ä¸ªåŸå­æ€§çš„ä¿è¯ç›¸å¯¹æ¥è¯´æ¯”è¾ƒå¤æ‚ï¼Œç¤ºä¾‹ä¸­ä¹Ÿæ²¡æœ‰è€ƒè™‘ã€‚æˆ‘è§‰å¾—è¿™é‡Œçš„æ€§èƒ½ä¼˜åŒ–å¯ä»¥å¾ˆç®€å•ï¼Œæ¯”å¦‚ï¼šæä¸€ç»„çº¿ç¨‹ï¼Œå°†æ‰€æœ‰è®¢å•å¹³å‡åˆ†æ‘Šåˆ°è¿™ä¸€ç»„çº¿ç¨‹ä¸Šï¼Œæ‰€æœ‰çº¿ç¨‹å¹¶è¡Œå¯¹è´¦ï¼Œæ¯ä¸ªçº¿ç¨‹åšçš„æ´»éƒ½ä¸€æ ·ï½ æ³¨æ„æ¯ä¸ªçº¿ç¨‹ç»´æŠ¤ç‹¬ç«‹çš„æ•°æ®åº“è¿æ¥ï½","like_count":5,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446498,"discussion_content":"ç“¶é¢ˆåœ¨æ•°æ®åº“ï¼Œåªè¦èƒ½è®©æ•°æ®åº“æ€§èƒ½å‘æŒ¥å‡ºæ¥åŸºæœ¬å°±æ˜¯æœ€ä¼˜æ–¹æ¡ˆäº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554985382,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":158675,"user_name":"Ron","can_delete":false,"product_type":"c1","uid":1159044,"ip_address":"","ucode":"EE78756918FA0A","user_header":"https://static001.geekbang.org/account/avatar/00/11/af/84/c65b43fb.jpg","comment_is_top":false,"comment_ctime":1575430968,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"14460332856","product_id":100023901,"comment_content":"checkAllæ–¹æ³•æ‰§è¡Œå¼€å§‹åï¼Œ<br>T1çº¿ç¨‹å¼€å§‹ï¼ŒæŸ¥è¯¢åˆ°æ»¡è¶³æ¡ä»¶çš„æ•°æ®ï¼Œposç´¯åŠ 1ï¼Œç„¶åè¿›å…¥ç­‰å¾…ï¼Œè¿™æ—¶å€™è®¡æ•°å™¨ä»2å‡åˆ°1ï¼ŒT2å¼€å§‹æ‰§è¡Œ<br>T2çº¿ç¨‹å¼€å§‹ï¼ŒæŸ¥è¯¢åˆ°æ»¡è¶³æ¡ä»¶çš„æ•°æ®ï¼Œdosç´¯åŠ 1ï¼Œç„¶åè¿›å…¥ç­‰å¾…ï¼Œè¿™æ—¶å€™è®¡æ•°å™¨ä»1å‡åˆ°0ï¼Œæ»¡è¶³å›è°ƒå‡½æ•°è§¦å‘æ¡ä»¶ï¼Œå¼€å§‹æ‰§è¡Œcheckæ–¹æ³•<br>å®é™…ä¸Šï¼Œæ— è®ºï¼Œposè¿˜æ˜¯dos æœ€å¤šåªä¼šåŒ…å«ä¸€æ¡æ•°æ®<br>åœ¨å›è°ƒå‡½æ•°é‡Œå¦‚æœæ²¡æœ‰è®¾å®šçº¿ç¨‹æ± æ•°é‡ä¸º1ï¼Œå°±ä¼šå¯¼è‡´å¤šçº¿ç¨‹æ‰§è¡Œcheckæ–¹æ³•ï¼Œä½¿å¾—æ‰§è¡Œç»“æœä¼šè¶…å‡ºé¢„æœŸ<br>æ•…éœ€è¦é™å®šçº¿ç¨‹æ± æ•°é‡ä¸º1ï¼Œä¿è¯å½“å‰æ—¶é—´æœ‰ä¸”åªæœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œcheckæ–¹æ³•ã€‚","like_count":3},{"had_liked":false,"id":123243,"user_name":"Geek_446679","can_delete":false,"product_type":"c1","uid":1594164,"ip_address":"","ucode":"63076108F267E7","user_header":"","comment_is_top":false,"comment_ctime":1565652278,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"14450554166","product_id":100023901,"comment_content":"ä½ å¥½ï¼Œæœ€åä¸€ä¸ªä¾‹å­æ€ä¹ˆä¿è¯ä¸€ä¸ªPä¸€ä¸ªDï¼Œæˆå¯¹æ‹¿åˆ°ç»“æœï¼Œå³countå‡åˆ°0æ—¶ï¼Œä¸æ˜¯æ‹¿åˆ°äº†ä¸¤ä¸ªPï¼Œå¯¼è‡´checkçš„æ—¶å€™ï¼Œä¸€ä¸ªé˜Ÿåˆ—ä¸ºç©ºï¼Œä¸€ä¸ªé˜Ÿåˆ—æœ‰ä¸¤ä¸ªã€‚","like_count":3,"discussions":[{"author":{"id":1445156,"avatar":"https://static001.geekbang.org/account/avatar/00/16/0d/24/b07de4f2.jpg","nickname":"WhoAmI","note":"","ucode":"58588E643EB842","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":296651,"discussion_content":"1.é˜»å¡å½“å‰çº¿ç¨‹ 2.remove(0) è¿™ä¸¤ä¸ªå°±ä¿è¯äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596614033,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":84910,"user_name":"å†²é¸­","can_delete":false,"product_type":"c1","uid":1115945,"ip_address":"","ucode":"0EF69B02188A73","user_header":"https://static001.geekbang.org/account/avatar/00/11/07/29/e5537b9e.jpg","comment_is_top":false,"comment_ctime":1554944793,"is_pvip":false,"replies":[{"id":"30662","content":"ä¸ä¼šï¼Œå¦‚æœè®¡æ•°å™¨ï¼1ï¼Œè°ƒç”¨awaitçš„çº¿ç¨‹å°±é˜»å¡äº†","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1555118607,"ip_address":"","comment_id":84910,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14439846681","product_id":100023901,"comment_content":"ä¼šå‡ºç°è®¡æ•°å™¨è¢«åŒä¸€ä¸ªçº¿ç¨‹å‡åˆ°0çš„æƒ…å†µå—ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446493,"discussion_content":"ä¸ä¼šï¼Œå¦‚æœè®¡æ•°å™¨ï¼1ï¼Œè°ƒç”¨awaitçš„çº¿ç¨‹å°±é˜»å¡äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555118607,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":84856,"user_name":"é‚‹é¢çš„æµæµªå‰‘å®¢","can_delete":false,"product_type":"c1","uid":1260881,"ip_address":"","ucode":"32AF6F9070506D","user_header":"https://static001.geekbang.org/account/avatar/00/13/3d/51/9723276c.jpg","comment_is_top":false,"comment_ctime":1554938539,"is_pvip":false,"replies":[{"id":"31317","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1555511672,"ip_address":"","comment_id":84856,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14439840427","product_id":100023901,"comment_content":"ä½¿ç”¨äº†å›ºå®šå¤§å°ä¸º1çš„çº¿ç¨‹æ± ï¼Œcheckæ–¹æ³•æ˜¯éçº¿ç¨‹å®‰å…¨çš„ï¼Œè®©å®ƒä¸²è¡Œæ‰§è¡Œ","like_count":3,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446471,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555511672,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":84828,"user_name":"Darren","can_delete":false,"product_type":"c1","uid":1254968,"ip_address":"","ucode":"CCD2B2C492BE9A","user_header":"https://static001.geekbang.org/account/avatar/00/13/26/38/ef063dc2.jpg","comment_is_top":false,"comment_ctime":1554913784,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"14439815672","product_id":100023901,"comment_content":"æœ‰ä¸€å®šçš„å¿…è¦ï¼Œå› ä¸ºCyclicBarrieræ˜¯å¯ä»¥é‡åˆ¶çš„ï¼Œæ‰€ä»¥å¦‚æœä¸ç”¨çº¿ç¨‹æ± çš„è¯ï¼Œæ¯æ¬¡éƒ½éœ€è¦æ–°å»ºçº¿ç¨‹ï¼Œæµªè´¹èµ„æºã€‚ä¹Ÿä¸çŸ¥é“å¯¹ä¸å¯¹ï¼Œè¯·å¤§ä½¬æŒ‡ç‚¹","like_count":3},{"had_liked":false,"id":129938,"user_name":"ç‹äºšå¨‡","can_delete":false,"product_type":"c1","uid":1447156,"ip_address":"","ucode":"16E5314E2205E8","user_header":"https://static001.geekbang.org/account/avatar/00/16/14/f4/53c0c002.jpg","comment_is_top":false,"comment_ctime":1567330179,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"10157264771","product_id":100023901,"comment_content":"æ–‡ä¸­å¯¹cyclicbarrierçš„è¡¨è¿°æœ‰äº›é—®é¢˜ï¼Œå®ƒå’Œcountdownlatchæœ‰ä¸€ä¸ªæœ€å¤§çš„åŒºåˆ«æ˜¯å®ƒæ˜¯åŠ è®¡æ•°çš„ï¼ŒåŠ åˆ°æŒ‡å®šå€¼ä¼šé‡ç½®ä¸ºé›¶ï¼Œä¸æ˜¯å‡åˆ°é›¶é‡ç½®ä¸ºæŒ‡å®šå€¼","like_count":2,"discussions":[{"author":{"id":1466840,"avatar":"https://static001.geekbang.org/account/avatar/00/16/61/d8/3bc19bff.jpg","nickname":"æ‹åœ¨é‚£æ—¶","note":"","ucode":"7F026B4B708C7D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":285560,"discussion_content":"è€å¸ˆè®²çš„æ˜¯å¯¹çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592880723,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":85566,"user_name":"å¤´æ™•çš„å°éªšå¹´","can_delete":false,"product_type":"c1","uid":1234200,"ip_address":"","ucode":"EDA4B89BAA33F1","user_header":"https://static001.geekbang.org/account/avatar/00/12/d5/18/7f3b1af2.jpg","comment_is_top":false,"comment_ctime":1555125079,"is_pvip":false,"replies":[{"id":"30764","content":"æ‰€ä»¥checkæ–¹æ³•çš„æ‰§è¡Œæ˜¯é€šè¿‡çº¿ç¨‹æ± å¼‚æ­¥æ‰§è¡Œçš„ï¼Œå¦‚æœåŒæ­¥æ‰§è¡Œï¼Œå°±æ²¡æœ‰æ•ˆæœï¼Œè¯¾åæ€è€ƒé¢˜å°±æ¶‰åŠåˆ°è¿™ä¸€ç‚¹","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1555166749,"ip_address":"","comment_id":85566,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10145059671","product_id":100023901,"comment_content":"æŸ¥è¯¢è®¢å•åº“å’ŒæŸ¥è¯¢è¿å•åº“ä¼šä½¿è®¢å•é˜Ÿåˆ—å’Œæ´¾é€å•é˜Ÿåˆ—å„å¤šä¸€ä¸ªæ•°æ®ï¼Œä¹Ÿä¼šæŠŠCyclicBarrierè®¡æ•°å™¨çš„å€¼å˜ä¸º0ï¼Œç„¶åè§¦å‘çº¿ç¨‹æ± é‡Œçš„checkæ–¹æ³•ï¼Œæ‰§è¡Œå¯¹è´¦æ“ä½œï¼Œcheckæ–¹æ³•æ˜¯æ¶ˆè´¹è€…ï¼Œä¼šæ¶ˆè´¹ä¸€ä¸ªæ•°æ®ã€‚æ˜¯ä¸æ˜¯checkæ–¹æ³•æ‰§è¡Œå®Œåï¼Œçº¿ç¨‹æ‰èƒ½ç»§ç»­æŸ¥è¯¢è®¢å•åº“å’Œè¿å•åº“ï¼Œè®©ç”Ÿäº§è€…ç”Ÿäº§æ•°æ®ï¼Ÿå¦‚æœæ˜¯è¿™æ ·çš„è¯ï¼Œè®¢å•é˜Ÿåˆ—å’Œæ´¾é€å•é˜Ÿåˆ—ä¸æ˜¯æœ€å¤šåªèƒ½å„æœ‰ä¸€ä¸ªæ•°æ®å—ï¼Ÿè¿™æ ·çš„è¯ï¼Œèƒ½è¾¾åˆ°ä¼˜åŒ–æ€§èƒ½çš„ç›®çš„å—ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446717,"discussion_content":"æ‰€ä»¥checkæ–¹æ³•çš„æ‰§è¡Œæ˜¯é€šè¿‡çº¿ç¨‹æ± å¼‚æ­¥æ‰§è¡Œçš„ï¼Œå¦‚æœåŒæ­¥æ‰§è¡Œï¼Œå°±æ²¡æœ‰æ•ˆæœï¼Œè¯¾åæ€è€ƒé¢˜å°±æ¶‰åŠåˆ°è¿™ä¸€ç‚¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555166749,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":84844,"user_name":"å¼ ä¸‰","can_delete":false,"product_type":"c1","uid":1004092,"ip_address":"","ucode":"1155528FAE1546","user_header":"https://static001.geekbang.org/account/avatar/00/0f/52/3c/d6fcb93a.jpg","comment_is_top":false,"comment_ctime":1554933987,"is_pvip":false,"replies":[{"id":"30481","content":"æ˜¯çš„<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1554943423,"ip_address":"","comment_id":84844,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10144868579","product_id":100023901,"comment_content":"CyclicBarrieré‚£æ®µä»£ç åªè¦è°ƒç”¨ä¸€æ¬¡checkAllï¼ˆï¼‰æ–¹æ³•å°±ä¼šä¸€ç›´æ‰§è¡Œäº†å§ï¼Ÿé‡Œè¾¹çš„æ¯æ¬¡å¾ªç¯éƒ½ä¼šåœ¨è®¡æ•°å™¨ç­‰äº0çš„æ—¶å€™è‡ªåŠ¨å›è°ƒcheckï¼ˆï¼‰æ–¹æ³•å¯¹è´¦ï¼Œç„¶åä¸¤ä¸ªçº¿ç¨‹åˆ†åˆ«è¿›è¡Œä¸‹ä¸€æ¬¡å¾ªç¯ã€‚","like_count":2,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446467,"discussion_content":"æ˜¯çš„\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554943423,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":84843,"user_name":"magict4","can_delete":false,"product_type":"c1","uid":1043789,"ip_address":"","ucode":"CB6F063D881AAC","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ed/4d/1d1a1a00.jpg","comment_is_top":false,"comment_ctime":1554933089,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10144867681","product_id":100023901,"comment_content":"&gt; å¦å¤–ï¼Œçº¿ç¨‹æ± æä¾›äº† Future ç‰¹æ€§ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åˆ©ç”¨ Fu...<br><br>æŒºæœŸå¾…è€å¸ˆå¯ä»¥è®²è®²ä»€ä¹ˆæ—¶å€™ç”¨ Future.get()ï¼Œä»€ä¹ˆæ—¶å€™ç”¨ CountDownLatch æ¥ç­‰å¾…çº¿ç¨‹å®Œæˆã€‚","like_count":2},{"had_liked":false,"id":287248,"user_name":"xiong","can_delete":false,"product_type":"c1","uid":1099375,"ip_address":"","ucode":"C1BFD9EF96372F","user_header":"https://static001.geekbang.org/account/avatar/00/10/c6/6f/ac3003fa.jpg","comment_is_top":false,"comment_ctime":1617855114,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5912822410","product_id":100023901,"comment_content":"ä»…ä»…è®²äº†ä¸‹ä¸¤ä¸ªç±»çš„ä½¿ç”¨æ„ä¹‰ä½•åœ¨ï¼Ÿ","like_count":1},{"had_liked":false,"id":286969,"user_name":"xiong","can_delete":false,"product_type":"c1","uid":1099375,"ip_address":"","ucode":"C1BFD9EF96372F","user_header":"https://static001.geekbang.org/account/avatar/00/10/c6/6f/ac3003fa.jpg","comment_is_top":false,"comment_ctime":1617709564,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5912676860","product_id":100023901,"comment_content":"è€å¸ˆè®²äº†è¿™ä¹ˆå¤šçš„å¹¶å‘å·¥å…·ç±»ï¼Œä½†åº•å±‚ä¾èµ–çš„AbstractQueuedSynchronizer ä¸è®²ä¸€ä¸‹å—","like_count":1},{"had_liked":false,"id":163249,"user_name":"Monday","can_delete":false,"product_type":"c1","uid":1250907,"ip_address":"","ucode":"77B9BACC783598","user_header":"https://static001.geekbang.org/account/avatar/00/13/16/5b/83a35681.jpg","comment_is_top":false,"comment_ctime":1576675704,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5871643000","product_id":100023901,"comment_content":"å¾ˆå¥½å¥‡ï¼Œè®¢å•å’Œæ´¾é€å•ä¹‹é—´æ²¡æœ‰å¯¹åº”å…³ç³»å—ï¼Ÿè¿˜æ˜¯åœ¨æ¯æ¬¡æŸ¥è®¢å•å’Œæ´¾é€å•ä¹‹å‰éƒ½ä¼šä¼ å…¥ä¸€ä¸ªå”¯ä¸€æ ‡è¯†ï¼Ÿ<br>","like_count":1,"discussions":[{"author":{"id":1250907,"avatar":"https://static001.geekbang.org/account/avatar/00/13/16/5b/83a35681.jpg","nickname":"Monday","note":"","ucode":"77B9BACC783598","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":87650,"discussion_content":"æˆ‘çœ‹å·®äº†ï¼Œç¡®å®æ˜¯å…ˆæœ‰å”¯ä¸€æ ‡è¯†å†åˆ†åˆ«æŸ¥è¯¢è®¢å•å’Œæ´¾é€å•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576676333,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":142857,"user_name":"å¼ ä¸‰ä¸°","can_delete":false,"product_type":"c1","uid":1155275,"ip_address":"","ucode":"3A6215A40B3B21","user_header":"https://static001.geekbang.org/account/avatar/00/11/a0/cb/aab3b3e7.jpg","comment_is_top":false,"comment_ctime":1571563820,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5866531116","product_id":100023901,"comment_content":"æ„Ÿè§‰è¿™ä¸¤ä¸ªæœ€å¤§çš„åŒºåˆ«å°±æ˜¯æ …æ å¯ä»¥æ”¯æŒé€šçŸ¥(è¿™ä¸ªé€šçŸ¥å’Œæœ€åä¸€ä¸ªawaitçš„çº¿ç¨‹ä¿æŒåŒæ­¥)ï¼Œå¹¶ä¸”æ”¯æŒé‡ç½®(è¿™ä¸ªé‡ç½®æ˜¯æ‰§è¡Œå®Œé€šçŸ¥ä¹‹åç«‹åˆ»é‡ç½®ï¼Œå”¤é†’ä¹‹å‰ç­‰å¾…çš„çº¿ç¨‹)ï¼Œæœ€é‡è¦çš„æ˜¯ï¼Œçº¿ç¨‹ä¹‹é—´å¯ä»¥ç›¸äº’ç­‰å¾…ï¼Œå¦‚æœç”¨countdownlatchï¼Œæ˜¯ä¸ä¼šç›¸äº’ç­‰å¾…çš„ï¼Œæœ‰å¯èƒ½ç¬¬ä¸€ä¸ªçº¿ç¨‹å°±æŠŠè®¡æ•°å™¨å‡æˆ0äº†ï¼Œæ‰€ä»¥çº¿ç¨‹ä¹‹é—´çš„æ­¥è°ƒä¸ä¸€è‡´äº†ã€‚","like_count":1},{"had_liked":false,"id":132861,"user_name":"Geek_bbbda3","can_delete":false,"product_type":"c1","uid":1504651,"ip_address":"","ucode":"737394CE472C21","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKNDKOCoZvCqoYVM1t97Q77QPLmRBGvOLYzFsh8073RicycoIuwGrIsCXpAFEyVBOxcyE3Ih1mr6Vw/132","comment_is_top":false,"comment_ctime":1568254357,"is_pvip":false,"replies":[{"id":"50907","content":"å¯ä»¥åœ¨å›è°ƒä¸­å…ˆæ‰§è¡Œremoveï¼Œæ²¡æœ‰å¿…è¦è®¾ç½®å¤šä¸ªçº¿ç¨‹","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1568272642,"ip_address":"","comment_id":132861,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5863221653","product_id":100023901,"comment_content":"è€å¸ˆï¼Œåœ¨å›è°ƒä¸­å…ˆæ‰§è¡Œremoveï¼Œåœ¨ä¸¢ç»™çº¿ç¨‹æ± æ‰§è¡Œå¯¹è´¦ï¼Œè¯¥çº¿ç¨‹æ± è®¾ç½®å¤šä¸ªçº¿ç¨‹ï¼Œæ˜¯å¦å¯ä»¥ï¼Ÿ<br>    Executor executor = Executors.newFixedThreadPool(10); <br>    final CyclicBarrier barrier =<br>            new CyclicBarrier(2, () -&gt; {<br>                P p = pos.remove(0);<br>                D d = dos.remove(0);<br>                executor.execute(() -&gt; check(p, d));<br>            });","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467150,"discussion_content":"å¯ä»¥åœ¨å›è°ƒä¸­å…ˆæ‰§è¡Œremoveï¼Œæ²¡æœ‰å¿…è¦è®¾ç½®å¤šä¸ªçº¿ç¨‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568272642,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1504651,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKNDKOCoZvCqoYVM1t97Q77QPLmRBGvOLYzFsh8073RicycoIuwGrIsCXpAFEyVBOxcyE3Ih1mr6Vw/132","nickname":"Geek_bbbda3","note":"","ucode":"737394CE472C21","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":296972,"discussion_content":"è®¾ç½®å¤šä¸ªçº¿ç¨‹è¿˜æ˜¯æœ‰æ•ˆæœçš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596719749,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":129548,"user_name":"å…¨æ‘çš„å¸Œæœ›","can_delete":false,"product_type":"c1","uid":1590482,"ip_address":"","ucode":"91B456FEFF85B5","user_header":"https://static001.geekbang.org/account/avatar/00/18/44/d2/a36c09bd.jpg","comment_is_top":false,"comment_ctime":1567152691,"is_pvip":true,"replies":[{"id":"48665","content":"ä½ è¯´çš„è¿™ç§æƒ…å†µï¼Œt1çš„barrier.awaitç¬¬ä¸€æ¬¡å°±é˜»å¡äº†ï¼Œä¸ä¼šè°ƒç”¨ä¸¤æ¬¡","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1567469694,"ip_address":"","comment_id":129548,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5862119987","product_id":100023901,"comment_content":"å¦‚æœçº¿ç¨‹t2åœ¨æŸ¥è¯¢è¿å•åº“çš„æ—¶å€™æ‰§è¡Œå¾ˆæ…¢ï¼Œåœ¨æ²¡æœ‰è°ƒç”¨t2æ–¹æ³•çš„barrier.await()æ—¶ï¼Œè€Œt1çš„whileå¾ªç¯æŸ¥è¯¢äº†ä¸¤æ¬¡è®¢å•åº“è°ƒç”¨äº†ä¸¤æ¬¡barrier.await()çš„æƒ…å†µæ—¶ï¼Œæ˜¯ä¸æ˜¯ä¹Ÿä¼šæ‰§è¡Œcheckæ–¹æ³•","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465537,"discussion_content":"ä½ è¯´çš„è¿™ç§æƒ…å†µï¼Œt1çš„barrier.awaitç¬¬ä¸€æ¬¡å°±é˜»å¡äº†ï¼Œä¸ä¼šè°ƒç”¨ä¸¤æ¬¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567469694,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":129227,"user_name":"îˆ± è‡£é¦Ÿé£æ‰¬îˆ°","can_delete":false,"product_type":"c1","uid":1116188,"ip_address":"","ucode":"F2F882B7678055","user_header":"https://static001.geekbang.org/account/avatar/00/11/08/1c/ef15e661.jpg","comment_is_top":false,"comment_ctime":1567065930,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5862033226","product_id":100023901,"comment_content":"æ„Ÿè§‰CyclicBarrierä¸»è¦å°±æ˜¯é å°†å›è°ƒå‡½æ•°è®¾è®¡ä¸ºå¼‚æ­¥çš„æ‰åšåˆ°å®Œå…¨å¼‚æ­¥äº†ï¼Œå¦åˆ™æ•ˆæœåŸºæœ¬è·ŸCountDownLatchæ²¡å•¥åŒºåˆ«","like_count":1},{"had_liked":false,"id":115006,"user_name":"é›ªæµª","can_delete":false,"product_type":"c1","uid":1541538,"ip_address":"","ucode":"CB33F2F8418557","user_header":"https://static001.geekbang.org/account/avatar/00/17/85/a2/dbeeb6c4.jpg","comment_is_top":false,"comment_ctime":1563450795,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5858418091","product_id":100023901,"comment_content":"è¿˜æœ‰ä¸€ç‚¹å·®å¼‚æ²¡è®²åˆ° å¯¹äºcountDownLatch æ¯ä¸ªå­çº¿ç¨‹ æ‰§è¡ŒcountDown()æ–¹æ³•ä¹‹åï¼Œè¿˜ä¼šç»§ç»­å¾€ä¸‹æ‰§è¡Œ,countDown()æ–¹æ³•çš„ä½œç”¨åªæ˜¯å‘Šè¯‰ä¸»çº¿ç¨‹ï¼Œéœ€è¦æ‰§è¡Œçš„ä»»åŠ¡å·²ç»æ‰§è¡Œå®Œæˆã€‚è€ŒCyclicBarrierå°±ä¸åŒäº†ï¼Œå­çº¿ç¨‹æ‰§è¡Œawait()æ–¹æ³•åï¼Œä¸ä¼šå†ç»§ç»­æ‰§è¡Œï¼Œç›´åˆ°æ‰€æœ‰å­çº¿ç¨‹æ‰§è¡Œå®Œ æ‰“å¼€å±éšœï¼Œå­çº¿ç¨‹æ‰ä¼šç»§ç»­æ‰§è¡Œ","like_count":1},{"had_liked":false,"id":99935,"user_name":"ç›å¤šå¿…å¤±","can_delete":false,"product_type":"c1","uid":1218415,"ip_address":"","ucode":"B9DBB12E0D1D74","user_header":"https://static001.geekbang.org/account/avatar/00/12/97/6f/4cd459f2.jpg","comment_is_top":false,"comment_ctime":1559361180,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5854328476","product_id":100023901,"comment_content":"è€å¸ˆï¼Œç°å®åœºæ™¯ä¼šä¸ä¼šæœ‰æ¯”å¦‚è®¢å•åˆ°äº†1 2 3 4 5 6 7 8 9 10 è€Œå¯¹è´¦å•ç”±äº2ä¸¢å¤±äº† å°±æ˜¯ 1 3 4 5 â€¦â€¦10 ç”±äºcheckæ˜¯ä¸€æ¡æ¡çš„å¯¹æ¯”ï¼Œé‚£æ ·ç”±äºä¸¢å¤±ä¸€æ¡åé€ æˆåé¢çš„è®°å½•å…¨éƒ¨éƒ½é”™äº†å•Šï¼Œè¿™ç§æ€ä¹ˆå¤„ç†ï¼Ÿè°¢è°¢","like_count":1,"discussions":[{"author":{"id":1596283,"avatar":"https://static001.geekbang.org/account/avatar/00/18/5b/7b/5bfd35eb.jpg","nickname":"Geek_db7d4d","note":"","ucode":"6A359E4E1E33F6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":1672,"discussion_content":"å¯¹äºæ•´ä¸ªå¯¹æ¯”è®¢å•å’Œæ´¾é€å•çš„åœºæ™¯æ€ä¹ˆå¯¹åº”çš„ï¼Œå®Œå…¨ä¸ç†è§£","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562807984,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":90088,"user_name":"Vincent","can_delete":false,"product_type":"c1","uid":1135159,"ip_address":"","ucode":"CD8B84A57A6A0C","user_header":"https://static001.geekbang.org/account/avatar/00/11/52/37/13b4c8aa.jpg","comment_is_top":false,"comment_ctime":1556412898,"is_pvip":false,"replies":[{"id":"32298","content":"ä¸¤ä¸ªé˜Ÿåˆ—å…¥çš„æ­¥è°ƒå’Œå‡ºçš„æ­¥è°ƒæ˜¯ä¸€è‡´çš„","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1556427172,"ip_address":"","comment_id":90088,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5851380194","product_id":100023901,"comment_content":"ä½ å¥½ï¼Œæˆ‘æƒ³é—®ä¸‹ä½ æ€ä¹ˆä¿è¯åŒé˜Ÿåˆ—å…ƒç´ ä¹‹é—´çš„ä¸€ä¸€å¯¹åº”å…³ç³»ï¼Œä½ è¿™ä¸ªæ˜¯ä¸¤ä¸ªä¸åŒçš„æŸ¥è¯¢","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":448384,"discussion_content":"ä¸¤ä¸ªé˜Ÿåˆ—å…¥çš„æ­¥è°ƒå’Œå‡ºçš„æ­¥è°ƒæ˜¯ä¸€è‡´çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1556427172,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":89144,"user_name":"ä½‘å„¿","can_delete":false,"product_type":"c1","uid":1226196,"ip_address":"","ucode":"0629888E7A5E16","user_header":"https://static001.geekbang.org/account/avatar/00/12/b5/d4/3bd5b77b.jpg","comment_is_top":false,"comment_ctime":1556090788,"is_pvip":false,"replies":[{"id":"31944","content":"ğŸ‘ğŸ‘<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1556112696,"ip_address":"","comment_id":89144,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5851058084","product_id":100023901,"comment_content":"çœ‹äº†æºç ï¼Œå†ç»“åˆæœ¬ç¯‡æ–‡ç« ï¼Œå¯¹CyclicBarrierçš„ç†è§£æ›´åŠ æ·±åˆ»äº†ã€‚<br>å›è°ƒå‡½æ•°è°ƒç”¨çš„æ—¶æœºä¸ºæœ€ç»ˆä½¿è®¡æ•°å™¨ä¸º0çš„çº¿ç¨‹ï¼Œç„¶åå†å”¤é†’æ‰€æœ‰é˜»å¡çš„çº¿ç¨‹ï¼Œï¼ˆè§nextGeneration()ï¼‰<br>private int dowait(boolean timed, long nanos)<br>        throws InterruptedException, BrokenBarrierException,<br>               TimeoutException {<br>        final ReentrantLock lock = this.lock;<br>        lock.lock();<br>        try {<br>\t\t\t.........çœç•¥<br>            int index = --count;<br>            if (index == 0) {  &#47;&#47; tripped<br>                boolean ranAction = false;<br>                try {<br>                    final Runnable command = barrierCommand;<br>                    if (command != null)<br>                        command.run();<br>                    ranAction = true;<br>                    nextGeneration();&#47;&#47; å”¤é†’æ‰€æœ‰é˜»å¡çš„çº¿ç¨‹ï¼Œå¹¶è‡ªåŠ¨é‡ç½®count<br>                    return 0;<br>                } finally {<br>                    if (!ranAction)<br>                        breakBarrier();<br>                }<br>            }<br><br>            &#47;&#47; loop until tripped, broken, interrupted, or timed out<br>            for (;;) {<br>                try {<br>                    if (!timed)<br>                        trip.await();&#47;&#47;é˜»å¡çº¿ç¨‹<br>                    else if (nanos &gt; 0L)<br>                        nanos = trip.awaitNanos(nanos);<br>                } catch (InterruptedException ie) {<br>\t\t\t\t\t.....çœç•¥<br>            }<br>        } finally {<br>            lock.unlock();<br>        }<br>    }","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":448036,"discussion_content":"ğŸ‘ğŸ‘\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1556112696,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":86734,"user_name":"æ²¡çœ‹æ‡‚å•Š","can_delete":false,"product_type":"c1","uid":1366238,"ip_address":"","ucode":"5D0ADAE83288FC","user_header":"https://static001.geekbang.org/account/avatar/00/14/d8/de/6d18cc7a.jpg","comment_is_top":false,"comment_ctime":1555439284,"is_pvip":false,"replies":[{"id":"31308","content":"æœ‰å¯èƒ½t1æ‹¿åˆ°è®¢å•0ï¼Œæ´¾é€å•1ã€‚t2æ‹¿åˆ°è®¢å•1ï¼Œæ´¾é€å•0ï¼Œè¿™æ ·æ•°æ®å°±ä¹±äº†ã€‚å¤šä¸ªçº¿ç¨‹è®¿é—®ä¸¤ä¸ªå…±äº«å˜é‡ï¼Œä¼šæœ‰å¹¶å‘é—®é¢˜ã€‚<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1555510840,"ip_address":"","comment_id":86734,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5850406580","product_id":100023901,"comment_content":"å¦‚æœæœ€åçš„çº¿ç¨‹æ± æœ‰ä¸¤ä¸ªçº¿ç¨‹ï¼Œä¼šæœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿè€å¸ˆèƒ½ä¸¾ä¸ªä¾‹å­å—ï¼Ÿæƒ³äº†å¥½ä¹…æ²¡æƒ³å‡ºæ¥å•Šï¼Œæœ‰ç‚¹æŠ˜ç£¨äºº","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":447143,"discussion_content":"æœ‰å¯èƒ½t1æ‹¿åˆ°è®¢å•0ï¼Œæ´¾é€å•1ã€‚t2æ‹¿åˆ°è®¢å•1ï¼Œæ´¾é€å•0ï¼Œè¿™æ ·æ•°æ®å°±ä¹±äº†ã€‚å¤šä¸ªçº¿ç¨‹è®¿é—®ä¸¤ä¸ªå…±äº«å˜é‡ï¼Œä¼šæœ‰å¹¶å‘é—®é¢˜ã€‚\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555510840,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":85843,"user_name":"èš‚èšå†…æ¨+v","can_delete":false,"product_type":"c1","uid":1050508,"ip_address":"","ucode":"24B10AEE54B3FD","user_header":"https://static001.geekbang.org/account/avatar/00/10/07/8c/0d886dcc.jpg","comment_is_top":false,"comment_ctime":1555254671,"is_pvip":false,"replies":[{"id":"30893","content":"é‚£æˆ‘å¾—å…ˆè®²çº¿ç¨‹æ± ","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1555295474,"ip_address":"","comment_id":85843,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5850221967","product_id":100023901,"comment_content":"ä¸ºä»€ä¹ˆcycliyBarrier ä¸­ä¸ç”¨å¤§å°ä¸º3çš„çº¿ç¨‹æ± ","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446834,"discussion_content":"é‚£æˆ‘å¾—å…ˆè®²çº¿ç¨‹æ± ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555295474,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":85813,"user_name":"å§œå°ç™½","can_delete":false,"product_type":"c1","uid":1449131,"ip_address":"","ucode":"83B2D2A9FA295D","user_header":"https://static001.geekbang.org/account/avatar/00/16/1c/ab/23816951.jpg","comment_is_top":false,"comment_ctime":1555245429,"is_pvip":false,"replies":[{"id":"30856","content":"ç«ç„°é‡‘ç²¾ï¼ï¼ï¼å¤šè°¢å¤šè°¢ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1555247771,"ip_address":"","comment_id":85813,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5850212725","product_id":100023901,"comment_content":"è€å¸ˆï¼Œä½ çš„æœ€åä¸€ä¸ªä¾‹å­ä»£ç ä¸­ï¼ŒT1.start()ä¹‹å‰ï¼Œå¯¹äºT1çš„å®šä¹‰ï¼Œæ˜¯ä¸æ˜¯å°‘äº†ä¸€ä¸ª&quot;<br>)&quot;ï¼Œè¿˜æœ‰T2ä¹Ÿæ˜¯ã€‚","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446822,"discussion_content":"ç«ç„°é‡‘ç²¾ï¼ï¼ï¼å¤šè°¢å¤šè°¢ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555247771,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":85723,"user_name":"æ©˜å­ä¸é…¸","can_delete":false,"product_type":"c1","uid":1181036,"ip_address":"","ucode":"0CF042909D27C2","user_header":"https://static001.geekbang.org/account/avatar/00/12/05/6c/5166b0ea.jpg","comment_is_top":false,"comment_ctime":1555213385,"is_pvip":false,"replies":[{"id":"30843","content":"barrierActionæ˜¯åŒæ­¥æ‰§è¡Œï¼Œåªæœ‰æ‰§è¡Œå®Œæ‰ä¼šå¼€å¯ä¸‹ä¸€è½®ã€‚ æ‰€ä»¥ç”¨ä¸€ä¸ªå•çº¿ç¨‹çš„çº¿ç¨‹æ± ï¼Œæ—¢èƒ½è§£å†³åŒæ­¥çš„æ€§èƒ½é—®é¢˜ï¼Œä¹Ÿèƒ½è§£å†³æ•°æ®çš„ä¸€è‡´æ€§é—®é¢˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1555240781,"ip_address":"","comment_id":85723,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5850180681","product_id":100023901,"comment_content":"è€å¸ˆï¼Œbarrierçš„ barrierActionæ˜¯ä¸æ˜¯æœ€åä¸€ä¸ªçº¿ç¨‹è¿›å…¥åå°±ä¼šæ‰§è¡Œï¼Œå¦‚æœè¿™ä¸ªæ—¶å€™ä¹‹å‰è¿›å…¥çš„çº¿ç¨‹è¿˜æ²¡æœ‰æ‰§è¡Œå®Œçš„è¯ï¼Œåœ¨è¿™ä¸ªåº”ç”¨åœºæ™¯ä¸‹ï¼Œå¯¹è´¦æ˜¯ä¸æ˜¯æœ‰é—®é¢˜ã€‚","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446781,"discussion_content":"barrierActionæ˜¯åŒæ­¥æ‰§è¡Œï¼Œåªæœ‰æ‰§è¡Œå®Œæ‰ä¼šå¼€å¯ä¸‹ä¸€è½®ã€‚ æ‰€ä»¥ç”¨ä¸€ä¸ªå•çº¿ç¨‹çš„çº¿ç¨‹æ± ï¼Œæ—¢èƒ½è§£å†³åŒæ­¥çš„æ€§èƒ½é—®é¢˜ï¼Œä¹Ÿèƒ½è§£å†³æ•°æ®çš„ä¸€è‡´æ€§é—®é¢˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555240781,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":85443,"user_name":"... ...","can_delete":false,"product_type":"c1","uid":1312354,"ip_address":"","ucode":"E214CAA6349A60","user_header":"https://static001.geekbang.org/account/avatar/00/14/06/62/898449d3.jpg","comment_is_top":false,"comment_ctime":1555061149,"is_pvip":false,"replies":[{"id":"30799","content":"ä¸€ä¸ªçº¿ç¨‹æ˜¯å› ä¸ºcheckä¼šå¾ˆå¿«æ‰§è¡Œå®Œï¼Œæ‰€ä»¥æ²¡å¿…è¦æå¤šä¸ªçº¿ç¨‹ï¼Œå¤šä¸ªçº¿ç¨‹è¿˜éœ€è¦è€ƒè™‘æ•°æ®åŒæ­¥é—®é¢˜ã€‚<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1555170186,"ip_address":"","comment_id":85443,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5850028445","product_id":100023901,"comment_content":"æˆ‘è§‰å¾—æ²¡æœ‰è¿™ä¸ªå¿…è¦çš„ï¼Œçº¿ç¨‹æ± å¯ä»¥è®¾ç½®ä¸ºå¤šä¸ªçº¿ç¨‹çš„çº¿ç¨‹æ± ã€‚å› ä¸ºå½“barrierè®¡ç®—å™¨ç­‰äº0çš„æ—¶å€™æ‰ä¼šæ‰§è¡Œcheckå•Šã€‚æ‰§è¡Œcheckçš„ç¬é—´å°±ä¼šæ‰§è¡Œremoveæ“ä½œã€‚å½“æœ‰æ‰§è¡Œç¬¬2æ¬¡å›è°ƒçš„æ—¶å€™ï¼Œç¬¬ä¸€æ¬¡å›è°ƒå‡½æ•°çš„removeæ“ä½œç„¶åˆ°è¿˜æ²¡æ‰§è¡Œå®Œå—ï¼æ‰€ä»¥æˆ‘è§‰å¾—checkå‡½æ•°çš„åç»­å¦‚æœæ²¡æœ‰æ¶‰åŠåˆ°å…±äº«èµ„æºçš„æ“ä½œæƒ…å†µä¸‹ã€‚æ˜¯å¯ä»¥è®¾ç½®å¤šä¸ªçº¿ç¨‹çš„çº¿ç¨‹æ± çš„ã€‚è€å¸ˆï¼Œæˆ‘è¿™æ ·ç†è§£æœ‰é—®é¢˜å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446669,"discussion_content":"ä¸€ä¸ªçº¿ç¨‹æ˜¯å› ä¸ºcheckä¼šå¾ˆå¿«æ‰§è¡Œå®Œï¼Œæ‰€ä»¥æ²¡å¿…è¦æå¤šä¸ªçº¿ç¨‹ï¼Œå¤šä¸ªçº¿ç¨‹è¿˜éœ€è¦è€ƒè™‘æ•°æ®åŒæ­¥é—®é¢˜ã€‚\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555170186,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":85206,"user_name":"Geek_515b9e","can_delete":false,"product_type":"c1","uid":1335734,"ip_address":"","ucode":"2D041B7679A2AF","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/dlj3u0jzg1gmCSxZ6daxUhhjtjmgqIwdOyalaEXYDYyQxibOsQdTrKFPPRs2I2XCHoehNaYUPrIffia9ZnR9efqQ/132","comment_is_top":false,"comment_ctime":1555001244,"is_pvip":false,"replies":[{"id":"30845","content":"å¦‚æœå¼‚æ­¥æ‰§è¡Œå›è°ƒï¼ˆä¾‹å¦‚æˆ‘ä»¬ç”¨äº†çº¿ç¨‹æ± ï¼‰ï¼Œç”Ÿäº§è€…å°±ä¸ä¼šç­‰å¾…ã€‚å¦‚æœæ˜¯åŒæ­¥ï¼ˆä¸åˆ›å»ºæ–°çº¿ç¨‹ï¼‰å›è°ƒã€‚ç”Ÿäº§è€…ä¼šç­‰å¾…ï¼Œå› ä¸ºCyclicBarrierä¸ä¼šå¼€å¯ä¸‹ä¸€è½®","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1555241455,"ip_address":"","comment_id":85206,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5849968540","product_id":100023901,"comment_content":"è€å¸ˆ<br>æˆ‘æƒ³é—®ä¸€ä¸‹ï¼Œå¦‚æœCyclicBarrierçš„å›è°ƒæ‰§è¡Œæ¯”è¾ƒæ…¢ï¼Œä»–çš„ç”Ÿäº§è€…ä¼šç­‰å¾…å›è°ƒå˜›ï¼Œè¿˜æ˜¯ç”Ÿäº§è€…å­˜å•ä¸€ä¸ªé˜Ÿåˆ—é‡Œé¢ã€‚","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446593,"discussion_content":"å¦‚æœå¼‚æ­¥æ‰§è¡Œå›è°ƒï¼ˆä¾‹å¦‚æˆ‘ä»¬ç”¨äº†çº¿ç¨‹æ± ï¼‰ï¼Œç”Ÿäº§è€…å°±ä¸ä¼šç­‰å¾…ã€‚å¦‚æœæ˜¯åŒæ­¥ï¼ˆä¸åˆ›å»ºæ–°çº¿ç¨‹ï¼‰å›è°ƒã€‚ç”Ÿäº§è€…ä¼šç­‰å¾…ï¼Œå› ä¸ºCyclicBarrierä¸ä¼šå¼€å¯ä¸‹ä¸€è½®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555241455,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":85105,"user_name":"å¿ƒä¸­æ— å‰‘","can_delete":false,"product_type":"c1","uid":1479311,"ip_address":"","ucode":"85C27AC7523EE4","user_header":"https://static001.geekbang.org/account/avatar/00/16/92/8f/0378e325.jpg","comment_is_top":false,"comment_ctime":1554981421,"is_pvip":false,"replies":[{"id":"30520","content":"catchä½æ‰€æœ‰å¼‚å¸¸å†™æ—¥å¿—ï¼Œå›å¤´åˆ†æåŸå› ï¼Œå§”æ‰˜çº¿ç¨‹æ± ï¼Œçº¿ç¨‹æ‰§è¡Œçš„åŸºæœ¬éƒ½è¿™ä¸ªæ€è·¯","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1554987156,"ip_address":"","comment_id":85105,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5849948717","product_id":100023901,"comment_content":"ç‹è€å¸ˆï¼Œsave(diff)å‘ç”Ÿå¼‚å¸¸æ€ä¹ˆåŠï¼Œ","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446560,"discussion_content":"catchä½æ‰€æœ‰å¼‚å¸¸å†™æ—¥å¿—ï¼Œå›å¤´åˆ†æåŸå› ï¼Œå§”æ‰˜çº¿ç¨‹æ± ï¼Œçº¿ç¨‹æ‰§è¡Œçš„åŸºæœ¬éƒ½è¿™ä¸ªæ€è·¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554987156,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":85056,"user_name":"é€€è€Œç»“ç½‘","can_delete":false,"product_type":"c1","uid":1126394,"ip_address":"","ucode":"48C99264CC3A5C","user_header":"https://static001.geekbang.org/account/avatar/00/11/2f/fa/191049df.jpg","comment_is_top":false,"comment_ctime":1554968587,"is_pvip":false,"replies":[{"id":"30591","content":"éƒ½æ˜¯æ‰¹é‡æŸ¥è¯¢æ•°æ®åº“çš„","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1554999120,"ip_address":"","comment_id":85056,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5849935883","product_id":100023901,"comment_content":"è€å¸ˆå’Œå„ä½åŒå­¦ï¼Œè¯·é—®whileåé¢é‚£ä¸ªï¼ˆå­˜åœ¨æœªå¯¹è´¦è®¢å•ï¼‰æ˜¯æ€ä¹ˆå»åˆ¤æ–­ï¼Ÿæ¯ä¸€æ¬¡éƒ½å»æŸ¥åº“çš„è¯æ˜¯ä¸æ˜¯æ€§èƒ½ä¹Ÿæœ‰é—®é¢˜ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446543,"discussion_content":"éƒ½æ˜¯æ‰¹é‡æŸ¥è¯¢æ•°æ®åº“çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554999120,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1670763,"avatar":"https://static001.geekbang.org/account/avatar/00/19/7e/6b/36fc4516.jpg","nickname":"FIRE","note":"","ucode":"85861D990FB3AB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":294682,"discussion_content":"æˆ‘è·Ÿä½ çš„ç–‘é—®ä¹Ÿä¸€æ ·,æˆ‘å†™äº†ä¸ªè‡ªå¢çš„,æ‰€ä»¥æœ€åæ˜¯å§vectoréƒ½åŠ æ»¡äº†......","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595954018,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":85015,"user_name":"éƒ‘æ™¨Cc","can_delete":false,"product_type":"c1","uid":1324942,"ip_address":"","ucode":"57146E444D6329","user_header":"https://static001.geekbang.org/account/avatar/00/14/37/8e/cf0b4575.jpg","comment_is_top":false,"comment_ctime":1554956587,"is_pvip":false,"replies":[{"id":"30595","content":"èƒ½åšæŒçš„ç°åœ¨ä¹Ÿä¸æ˜“ï¼Œäº’ç‚¹äº’ç‚¹","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1554999443,"ip_address":"","comment_id":85015,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5849923883","product_id":100023901,"comment_content":"countdownlatch å’Œcyclicbarrier ä¹‹å‰å°±äº†è§£è¿‡ ä¸è¿‡ç†è§£çš„ä¸æ·±å…¥ è€å¸ˆä»Šå¤©çš„è®²è§£æ¡ˆä¾‹ä¸ªä½¿ç”¨çš„ç±»æ¯”å¾ˆç²¾å½© è®©æˆ‘æœ‰ä¸€ç§é†é†çŒé¡¶çš„æ„Ÿè§‰ ç»™è€å¸ˆç‚¹ä¸ªèµ","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446530,"discussion_content":"èƒ½åšæŒçš„ç°åœ¨ä¹Ÿä¸æ˜“ï¼Œäº’ç‚¹äº’ç‚¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554999443,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":84958,"user_name":"å½±å­ä¼ è¯´","can_delete":false,"product_type":"c1","uid":1031636,"ip_address":"","ucode":"371B72BB5CCB5E","user_header":"","comment_is_top":false,"comment_ctime":1554949523,"is_pvip":false,"replies":[{"id":"30516","content":"è§¦ç±»æ—é€šäº†ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1554984922,"ip_address":"","comment_id":84958,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5849916819","product_id":100023901,"comment_content":"è€å¸ˆè®²çš„è¿™ä¸ªè·Ÿcpuæµæ°´çº¿æ€æƒ³å¾ˆç›¸ä¼¼å•Š","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446509,"discussion_content":"è§¦ç±»æ—é€šäº†ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554984922,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":84901,"user_name":"WL","can_delete":false,"product_type":"c1","uid":1173771,"ip_address":"","ucode":"6277DCD776B87E","user_header":"https://static001.geekbang.org/account/avatar/00/11/e9/0b/1171ac71.jpg","comment_is_top":false,"comment_ctime":1554944165,"is_pvip":false,"replies":[{"id":"30488","content":"æ‰¾bug,é‡æ–°æ¥è¿‡ğŸ˜‚<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1554945213,"ip_address":"","comment_id":84901,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5849911461","product_id":100023901,"comment_content":"æƒ³é—®ä¸€ä¸‹è€å¸ˆå¦‚æœåœ¨CyclicBarrierçš„ä¾‹å­ä¸­, checkAll()æ–¹æ³•æŠ›å‡ºå¼‚å¸¸äº†æ€ä¹ˆåŠ?","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446492,"discussion_content":"æ‰¾bug,é‡æ–°æ¥è¿‡ğŸ˜‚\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554945213,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":84855,"user_name":"CRT","can_delete":false,"product_type":"c1","uid":1442864,"ip_address":"","ucode":"59F5C8C0674ADC","user_header":"https://static001.geekbang.org/account/avatar/00/16/04/30/7f2cb8e3.jpg","comment_is_top":false,"comment_ctime":1554938455,"is_pvip":false,"replies":[{"id":"31828","content":"æˆ‘ä¹Ÿè¿™ä¹ˆè€ƒè™‘çš„<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1556029517,"ip_address":"","comment_id":84855,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5849905751","product_id":100023901,"comment_content":"å…³äºæ€è€ƒé¢˜ã€‚ç”±ä¸Šå›¾çœ‹åˆ°checkæ“ä½œè€—æ—¶æ¯”è¾ƒå°‘çš„ï¼Œæ‰€ä»¥ç†è®ºä¸Šå•çº¿ç¨‹å¯ä»¥å®Œæˆä»»åŠ¡ï¼Œä¸ä¼šé€ æˆé˜Ÿåˆ—é˜»å¡ï¼Œè®¾ç½®çº¿ç¨‹æ± ä¸º1å³å¯ï¼ŒåŒæ—¶ä¹Ÿé˜²æ­¢å‡ºç°å¤šçº¿ç¨‹è°ƒç”¨checkã€‚","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446470,"discussion_content":"æˆ‘ä¹Ÿè¿™ä¹ˆè€ƒè™‘çš„\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1556029517,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":360011,"user_name":"æ¢…å­é»„æ—¶é›¨","can_delete":false,"product_type":"c1","uid":1015938,"ip_address":"ä¸Šæµ·","ucode":"9F788D09C2E9E7","user_header":"https://static001.geekbang.org/account/avatar/00/0f/80/82/3c21b30c.jpg","comment_is_top":false,"comment_ctime":1666137032,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1666137032","product_id":100023901,"comment_content":"å­¦ä¹ äº†ã€‚","like_count":0},{"had_liked":false,"id":356411,"user_name":"å°æ™¨","can_delete":false,"product_type":"c1","uid":1477754,"ip_address":"æ±Ÿè‹","ucode":"C95BC5211A5741","user_header":"https://static001.geekbang.org/account/avatar/00/16/8c/7a/5ee20222.jpg","comment_is_top":false,"comment_ctime":1662282350,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1662282350","product_id":100023901,"comment_content":" ä¸‹é¢è¿™ä»£ç ï¼Œæˆ‘åŸæ„æ˜¯t1å’Œt2äº¤æ›¿æ‰“å°ï¼Œä½†ä»–ä¸ºä»€ä¹ˆä¼šè¿ç»­æ‰“å°ä¿©æ¬¡t1æˆ–t2ï¼Ÿ<br> public static void main(String[] args) throws ExecutionException, InterruptedException {<br>        CyclicBarrier cyclicBarrier = new CyclicBarrier(2);<br>        new Thread(() -&gt; {<br>            while (true) {<br>                    System.out.println(&quot;t1&quot;);<br>                    cyclicBarrier.await();<br>            }<br>        }, &quot;t1&quot;).start();<br><br><br>        new Thread(() -&gt; {<br>            while (true) {<br>                   System.out.println(&quot;t2&quot;);<br>                    cyclicBarrier.await();<br>            }<br>        }, &quot;t2&quot;).start();<br><br>        Thread.sleep(10000);<br>    }","like_count":0},{"had_liked":false,"id":353815,"user_name":"killeroppo","can_delete":false,"product_type":"c1","uid":1815768,"ip_address":"å¹¿ä¸œ","ucode":"C167BA07268273","user_header":"https://static001.geekbang.org/account/avatar/00/1b/b4/d8/67a31275.jpg","comment_is_top":false,"comment_ctime":1659837371,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1659837371","product_id":100023901,"comment_content":"è€å¸ˆ æœ€åä¸€ç‰ˆçš„whileå¾ªç¯é‡Œæ˜¯ä¸æ˜¯ä¹Ÿå¯ä»¥æ”¹æˆçº¿ç¨‹æ± ï¼Ÿå¢åŠ çº¿ç¨‹å¤ç”¨","like_count":0},{"had_liked":false,"id":348062,"user_name":"HooYa","can_delete":false,"product_type":"c1","uid":1640517,"ip_address":"","ucode":"43F3577E7D939A","user_header":"https://static001.geekbang.org/account/avatar/00/19/08/45/62ff43de.jpg","comment_is_top":false,"comment_ctime":1654697581,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1654697581","product_id":100023901,"comment_content":"æœ‰å¿…è¦ä¸º1 å› ä¸ºå¦‚æœå¤šä¸ª å¹¶ä¸”ä¸åŠ é”çš„è¯ï¼Œä¼šæœ‰åŸå­æ€§é—®é¢˜ã€‚å‡å¦‚æœ‰ä¸¤ä¸ª t1 t2ã€‚t1 pos.remove ä¹‹åè¢«ä¸­æ–­ã€‚t2 æ‰§è¡Œäº†pos.remove å’Œ dos. remove å°±ä¼šæ•°æ®æ²¡æœ‰å¯¹é½ã€‚","like_count":0},{"had_liked":false,"id":347029,"user_name":"sili0816","can_delete":false,"product_type":"c1","uid":2338682,"ip_address":"","ucode":"BBFC03F0D033AE","user_header":"https://static001.geekbang.org/account/avatar/00/23/af/7a/753f3e1d.jpg","comment_is_top":false,"comment_ctime":1653634408,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1653634408","product_id":100023901,"comment_content":"ç”¨synchronized wait notify èƒ½ä¸èƒ½å®ç°åŒæ ·çš„æ•ˆæœå‘¢ï¼Œä»–ä»¬å’ŒCountDownLatch åŒºåˆ«æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":346581,"user_name":"è‘£æ˜Œå¼º","can_delete":false,"product_type":"c1","uid":1213322,"ip_address":"","ucode":"0803D7E3ABD3FD","user_header":"https://static001.geekbang.org/account/avatar/00/12/83/8a/7c7df3b3.jpg","comment_is_top":false,"comment_ctime":1653261448,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1653261448","product_id":100023901,"comment_content":"1ã€æœ€åä¾‹å­ä»£ç çš„check æ–¹æ³•ä¸­ï¼Œä»è®¢å•åº“å’Œæ´¾å•åº“ä¸¤ä¸ªé˜Ÿåˆ—ä¸­å–æ•°æ®åŠ ä¸Š  sychronized åŒæ­¥ï¼Œçº¿ç¨‹æ± æ˜¯ä¸æ˜¯å¯ä»¥ä¸åªä¸€ä¸ªäº† ï¼Ÿ<br>2ã€ä¸¤ä¸ªçº¿ç¨‹åˆ†åˆ«æŸ¥è®¢å•åº“å’Œæ´¾å•åº“ï¼Œä¸šåŠ¡ä¸Šéœ€è¦æŸ¥åŒä¸€æ‰¹è®¢å• id æ‰è¡Œï¼Œå¾ˆéš¾ç‹¬ç«‹æŸ¥ï¼Œæœ‰å•¥å¥½æ€è·¯ ï¼Ÿ","like_count":0},{"had_liked":false,"id":345845,"user_name":"å­¦ä¹ å­¦ä¸ªå±","can_delete":false,"product_type":"c1","uid":1049017,"ip_address":"","ucode":"DF2D61E6FB2FCE","user_header":"https://static001.geekbang.org/account/avatar/00/10/01/b9/73435279.jpg","comment_is_top":false,"comment_ctime":1652627678,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1652627678","product_id":100023901,"comment_content":"å…¶å®ä¹Ÿå¯ä»¥ä¸é€‚ç”¨ CyclicBarrier ä½¿ç”¨å¼‚æ­¥ç¼–ç¨‹ CompletableFuture","like_count":0},{"had_liked":false,"id":345843,"user_name":"å­¦ä¹ å­¦ä¸ªå±","can_delete":false,"product_type":"c1","uid":1049017,"ip_address":"","ucode":"DF2D61E6FB2FCE","user_header":"https://static001.geekbang.org/account/avatar/00/10/01/b9/73435279.jpg","comment_is_top":false,"comment_ctime":1652627542,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1652627542","product_id":100023901,"comment_content":"è¿˜æ˜¯æœ‰å¿…è¦çš„ï¼Œå¤„ç†å®Œåï¼Œé€šçŸ¥å¼‚æ­¥æ“ä½œï¼Œå¯ä»¥æé«˜å¤„ç†çš„ååé‡ã€‚","like_count":0},{"had_liked":false,"id":342598,"user_name":"Curiosity","can_delete":false,"product_type":"c1","uid":1879290,"ip_address":"","ucode":"A6732CAE6CBE8E","user_header":"https://static001.geekbang.org/account/avatar/00/1c/ac/fa/a32099e7.jpg","comment_is_top":false,"comment_ctime":1650359581,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1650359581","product_id":100023901,"comment_content":"è¿™æ ·è§£å†³å¤šçº¿ç¨‹æ¶ˆè´¹å¯ä»¥å—   <br>private final Executor executorSave = Executors.newFixedThreadPool(10);<br>    public  void check() {<br>        P p = pos.remove(0);<br>      D d = dos.remove(0);<br>        executorSave.execute(()-&gt;{<br>        &#47;&#47; æ‰§è¡Œå¯¹è´¦æ“ä½œ<br>  diff = check(p, d);<br>  &#47;&#47; å·®å¼‚å†™å…¥å·®å¼‚åº“<br>  save(diff);<br>        });<br><br><br>    }<br>","like_count":0},{"had_liked":false,"id":342594,"user_name":"Curiosity","can_delete":false,"product_type":"c1","uid":1879290,"ip_address":"","ucode":"A6732CAE6CBE8E","user_header":"https://static001.geekbang.org/account/avatar/00/1c/ac/fa/a32099e7.jpg","comment_is_top":false,"comment_ctime":1650359223,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1650359223","product_id":100023901,"comment_content":"æé—®ï¼šCyclicBarrieræ–¹æ¡ˆï¼Œcheckä¸­æ‰§è¡Œçš„ removeæ“ä½œï¼Œä¸ t1ï¼Œt2çš„ç”Ÿäº§æ“ä½œæ˜¯å¦å­˜åœ¨é—®é¢˜<br>åŠ å…¥ checkæ“ä½œæ‰§è¡Œpos.remove(0) çš„æ—¶å€™ t2 æ­¤æ—¶æ‰§è¡Œ dos.add(getDOrders()); æ˜¯æ²¡æœ‰é—®é¢˜çš„å§ï¼Œè¿™æ—¶å€™æ•°æ®è¿˜æ˜¯ä¸€ä¸€å¯¹åº”çš„ä¹ˆ","like_count":0},{"had_liked":false,"id":340977,"user_name":"é”®ç›˜ä¸Šçš„é­”æœ¯","can_delete":false,"product_type":"c1","uid":2697700,"ip_address":"","ucode":"A731D721FB8D3A","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/LFJZ4x47rvShGhsePLIxc8EzdlBxAmVAIjJ2FQZ4NEpo8E4JCZQEOb2NIfOuiaQLL6Otkt7W3Rmu6Tv3AkgYdRA/132","comment_is_top":false,"comment_ctime":1649251732,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1649251732","product_id":100023901,"comment_content":"è€å¸ˆï¼Œé—®ä¸ªä¸šåŠ¡é€»è¾‘ç›¸å…³çš„é—®é¢˜ï¼Œ CyclicBarrierè¿™ä¸ªä¾‹å­é‡ŒgetPOrders()å’ŒgetDOrders()è¿”å›çš„æ˜¯å•ä¸ªå¯¹è±¡ï¼Ÿ ä¹‹å‰çš„ä¾‹å­è¿™ä¸¤ä¸ªæ–¹æ³•è¿”å›çš„éƒ½æ˜¯Listï¼Ÿ è¿™åœ°æ–¹çœ‹çš„æœ‰ç‚¹æ€ª","like_count":0},{"had_liked":false,"id":316223,"user_name":"å¢","can_delete":false,"product_type":"c1","uid":1542037,"ip_address":"","ucode":"B6A9F41AEE348C","user_header":"https://static001.geekbang.org/account/avatar/00/17/87/95/cba0a896.jpg","comment_is_top":false,"comment_ctime":1634206085,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1634206085","product_id":100023901,"comment_content":"è¿™ä¸ªæ¡ˆä¾‹å®åœ¨å¤ªæ£’äº†ï¼Œå¾ˆé€šä¿—æ˜“æ‡‚","like_count":0},{"had_liked":false,"id":306388,"user_name":"studyçš„ç¨‹åºå‘˜","can_delete":false,"product_type":"c1","uid":1023101,"ip_address":"","ucode":"E5AE9037D24429","user_header":"https://static001.geekbang.org/account/avatar/00/0f/9c/7d/774e07f9.jpg","comment_is_top":false,"comment_ctime":1628522090,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1628522090","product_id":100023901,"comment_content":"RejectedExecutionHandler defaultHandler =  new AbortPolicy();<br>é»˜è®¤æ‹’ç»ç­–ç•¥ä¸¢å¼ƒï¼Œç”Ÿäº§è€…é€Ÿåº¦è¿œå¤§äºæ¶ˆè´¹è€…ä¼šå¯¼è‡´ä»»åŠ¡ä¸¢å¼ƒï¼Œè™½ç„¶ä¸¤ä¸ªvectorä¸­æ•°æ®ä¸ä¸¢ï¼Œä½†æ˜¯checkä¼šå‡å°‘","like_count":0},{"had_liked":false,"id":297826,"user_name":"ç‹æˆî”“","can_delete":false,"product_type":"c1","uid":1441460,"ip_address":"","ucode":"29765BBCD3B8B2","user_header":"https://static001.geekbang.org/account/avatar/00/15/fe/b4/6902ac00.jpg","comment_is_top":false,"comment_ctime":1623806348,"is_pvip":false,"replies":[{"id":"108800","content":"ç”¨å•çº¿ç¨‹æ˜¯ä¸ºäº†é¿å…å¹¶å‘é—®é¢˜ï¼Œè€Œä¸”å•çº¿ç¨‹ä¹Ÿå¤Ÿäº†ã€‚å½“ç„¶äº†ï¼Œå¾ˆå¤šæ–¹æ¡ˆéƒ½èƒ½è§£å†³è¿™é‡Œçš„å¹¶å‘é—®é¢˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1624967487,"ip_address":"","comment_id":297826,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1623806348","product_id":100023901,"comment_content":"è€å¸ˆï¼Œæˆ‘è¯´ä¸‹æˆ‘çš„çœ‹æ³•<br>1.é¦–å…ˆï¼Œä¸ºäº†é˜²æ­¢çº¿ç¨‹é˜»å¡ï¼Œæ‰€ä»¥ä½¿ç”¨å¦å¤–çš„çº¿ç¨‹æ¥æ‰§è¡Œcheckæ“ä½œ<br>2.å…¶æ¬¡ï¼Œçº¿ç¨‹æ± ä¸­å•çº¿ç¨‹çš„ç›®çš„ï¼Œå…¶å®å°±æ˜¯ä¸ºäº†ä¿è¯ä¸¤ä¸ªé˜Ÿåˆ—çš„remove(0)æ˜¯åŸå­çš„ï¼ˆä¸çŸ¥é“è¿™ä¹ˆè¡¨è¿°å¯¹ä¸å¯¹å•Šï¼‰ï¼Œå¤šä¸ªçº¿ç¨‹ä¼šåœ¨ä¸¤ä¸ªremoveï¼ˆ0ï¼‰ä¹‹é—´å‘ç”Ÿçº¿ç¨‹åˆ‡æ¢ï¼Œå¯¼è‡´checkçš„ä¸¤ä¸ªå¯¹è±¡å…¶å®ä¸æ˜¯ä¸€ä¸ªè®¢å•çš„æƒ…å†µ<br>3.å…¶å®ï¼Œæˆ‘è®¤ä¸ºå¯ä»¥ä½¿ç”¨çº¿ç¨‹æ± åŒ…å«å¤šä¸ªçº¿ç¨‹çš„åŠæ³•ï¼Œåªè¦æŠŠä¸¤ä¸ªremoveï¼ˆ0ï¼‰æ“ä½œå•ç‹¬å°è£…ä¸€ä¸ªæ–¹æ³•ï¼Œå¹¶ä¸”ç”¨é”ä¿è¯åŸå­æ€§å³å¯ã€‚è¿™æ ·çš„å¥½å¤„æ˜¯å³ä½¿checkæ–¹æ³•æ…¢ï¼Œåªè¦çº¿ç¨‹æ± ä¸­çº¿ç¨‹æ•´ä½“å¤„ç†checkçš„é€Ÿåº¦èƒ½èµ¶ä¸Šaddçš„é€Ÿåº¦ï¼Œä¹Ÿå¯ä»¥ä¿è¯ç³»ç»Ÿä¸ä¼šå‡ºå¤§é—®é¢˜ï¼Œå‡å°‘å‡ºç°oomçš„å‡ ç‡<br><br>ä¸çŸ¥é“è¿™æ ·ç†è§£å¯¹ä¸å¯¹ï¼Œå¸Œæœ›è€å¸ˆæŒ‡å¯¼ä¸€ä¸‹","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":521942,"discussion_content":"ç”¨å•çº¿ç¨‹æ˜¯ä¸ºäº†é¿å…å¹¶å‘é—®é¢˜ï¼Œè€Œä¸”å•çº¿ç¨‹ä¹Ÿå¤Ÿäº†ã€‚å½“ç„¶äº†ï¼Œå¾ˆå¤šæ–¹æ¡ˆéƒ½èƒ½è§£å†³è¿™é‡Œçš„å¹¶å‘é—®é¢˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1624967487,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1023101,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/9c/7d/774e07f9.jpg","nickname":"studyçš„ç¨‹åºå‘˜","note":"","ucode":"E5AE9037D24429","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":387997,"discussion_content":"å¦‚æœç”Ÿäº§é€Ÿåº¦è¿œå¤§äºæ¶ˆè´¹é€Ÿåº¦ï¼Œä½ è¿™æ›´å®¹æ˜“oomï¼Œå› ä¸ºé¢å¤–å¤šäº†å¾ˆå¤šblockçš„çº¿ç¨‹ã€‚ã€‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628522303,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":297167,"user_name":"å®‹æŸ¯ä»°","can_delete":false,"product_type":"c1","uid":1422296,"ip_address":"","ucode":"50FB61E3E9DAF8","user_header":"https://static001.geekbang.org/account/avatar/00/15/b3/d8/c56e0f0b.jpg","comment_is_top":false,"comment_ctime":1623337418,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1623337418","product_id":100023901,"comment_content":"CyclicBarrierçš„å›è°ƒå‡½æ•°é‡Œèµ·çº¿ç¨‹åº”è¯¥æ˜¯æœ‰å‘çš„å§ï¼Œè¿™æ—¶å€™ä¸‹ä¸€è½®ç›´æ¥å¼€å§‹äº†ï¼Œå¾€å…¶ä¸­ä¸€ä¸ªé˜Ÿåˆ—åŠ å…¥å…ƒç´ ï¼Œå›è°ƒçº¿ç¨‹å°±æœ‰å¯èƒ½ä»ä¸¤ä¸ªé˜Ÿåˆ—æ‹¿åˆ°ä¸å¯¹åº”çš„å…ƒç´ äº†å˜›ï¼Ÿ","like_count":0},{"had_liked":false,"id":296742,"user_name":"Niverkk","can_delete":false,"product_type":"c1","uid":2179875,"ip_address":"","ucode":"F9220C10107E44","user_header":"https://static001.geekbang.org/account/avatar/00/21/43/23/d98fb8f7.jpg","comment_is_top":false,"comment_ctime":1623141047,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1623141047","product_id":100023901,"comment_content":"if (index == 0) {  &#47;&#47; tripped<br>    boolean ranAction = false;<br>    try {<br>        final Runnable command = barrierCommand;<br>        if (command != null)<br>            command.run();<br>        ranAction = true;<br>        nextGeneration();<br>        return 0;<br>    } finally {<br>        if (!ranAction)<br>            breakBarrier();<br>    }<br>}<br><br>æ ¹æ®æºç å¯çŸ¥ï¼Œä½¿ç”¨æœ€åä¸€ä¸ªçº¿ç¨‹åŒæ­¥è°ƒç”¨Runnableçš„runæ–¹æ³•ï¼Œä¼šé˜»å¡ä¸‹æ¬¡çš„æŸ¥è¯¢","like_count":0},{"had_liked":false,"id":290359,"user_name":"å¤•é˜³æ­¦å£«","can_delete":false,"product_type":"c1","uid":1480522,"ip_address":"","ucode":"DDCF11F69CDAB5","user_header":"https://static001.geekbang.org/account/avatar/00/16/97/4a/0da51831.jpg","comment_is_top":false,"comment_ctime":1619514393,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1619514393","product_id":100023901,"comment_content":"ç…§ç€å†™ä¸ªdemoéªŒè¯ä¸€ä¸‹<br>public class ProductConsumer {<br>    private int x = 0;<br>    private int y = 0;<br>    public void addX() {<br>        System.out.println(&quot;xçš„å€¼ï¼š&quot; + x);<br>        x++;<br>    }<br>    public void addY() {<br>        System.out.println(&quot;yçš„å€¼ï¼š&quot; + y);<br>        y++;<br>    }<br><br>    public int getResult() {<br>        System.out.println(&quot;å¾—åˆ°æœ€ç»ˆç»“æœï¼šx=&quot; + x + &quot;ï¼Œy=&quot; + y);<br>        return 0;<br>    }<br><br><br>    public static void main(String[] args) {<br>        ProductConsumer productConsumer = new ProductConsumer();<br>        ExecutorService executorService = Executors.newFixedThreadPool(1);<br>        CyclicBarrier barrier = new CyclicBarrier(2, () -&gt; {<br>            executorService.execute(() -&gt; {<br>                productConsumer.getResult();<br>            });<br>        });<br>        Thread t1 = new Thread(() -&gt; {<br>            for (int i = 0; i &lt; 1000; i++) {<br>                try {<br>                    productConsumer.addX();<br>                    barrier.await();<br>                } catch (InterruptedException e) {<br>                    e.printStackTrace();<br>                } catch (BrokenBarrierException e) {<br>                    e.printStackTrace();<br>                }<br>            }<br>        });<br>        Thread t2 = new Thread(() -&gt; {<br>            for (int i = 0; i &lt; 1000; i++) {<br>                try {<br>                    productConsumer.addY();<br>                    barrier.await();<br>                } catch (InterruptedException e) {<br>                    e.printStackTrace();<br>                } catch (BrokenBarrierException e) {<br>                    e.printStackTrace();<br>                }<br>            }<br>        });<br>        t1.start();<br>        t2.start();<br>    }<br>}<br><br>è¾“å‡ºç»“æœï¼š<br>xçš„å€¼ï¼š0<br>yçš„å€¼ï¼š0<br>yçš„å€¼ï¼š1<br>å¾—åˆ°æœ€ç»ˆç»“æœï¼šx=1ï¼Œy=2<br>xçš„å€¼ï¼š1<br>xçš„å€¼ï¼š2<br>ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚<br>å¾—åˆ°æœ€ç»ˆç»“æœï¼šx=992ï¼Œy=992<br>xçš„å€¼ï¼š992<br>xçš„å€¼ï¼š993<br>yçš„å€¼ï¼š993<br>å¾—åˆ°æœ€ç»ˆç»“æœï¼šx=994ï¼Œy=993<br>xçš„å€¼ï¼š994<br>yçš„å€¼ï¼š994<br>å¾—åˆ°æœ€ç»ˆç»“æœï¼šx=994ï¼Œy=994<br>xçš„å€¼ï¼š995<br>yçš„å€¼ï¼š995<br>å¾—åˆ°æœ€ç»ˆç»“æœï¼šx=995ï¼Œy=995<br>xçš„å€¼ï¼š996<br>yçš„å€¼ï¼š996<br>å¾—åˆ°æœ€ç»ˆç»“æœï¼šx=996ï¼Œy=996<br>xçš„å€¼ï¼š997<br>yçš„å€¼ï¼š997<br>å¾—åˆ°æœ€ç»ˆç»“æœï¼šx=997ï¼Œy=997<br>xçš„å€¼ï¼š998<br>yçš„å€¼ï¼š998<br>å¾—åˆ°æœ€ç»ˆç»“æœï¼šx=998ï¼Œy=998<br>å¾—åˆ°æœ€ç»ˆç»“æœï¼šx=999ï¼Œy=999<br>xçš„å€¼ï¼š999<br>yçš„å€¼ï¼š999<br>å¾—åˆ°æœ€ç»ˆç»“æœï¼šx=1000ï¼Œy=1000<br>ä»æ‰§è¡Œç»“æœçœ‹ï¼Œæ˜¯åŒæ­¥çš„ã€‚","like_count":0},{"had_liked":false,"id":290062,"user_name":"å­¤å‚²çš„è™ç‹","can_delete":false,"product_type":"c1","uid":2536451,"ip_address":"","ucode":"FE9B90D6EEBAFB","user_header":"https://static001.geekbang.org/account/avatar/00/26/b4/03/677fd301.jpg","comment_is_top":false,"comment_ctime":1619342926,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1619342926","product_id":100023901,"comment_content":"ç²¾å½©ï¼Œå®ä¹ é¡¹ç›®ä¹Ÿæœ‰ä¸€ä¸ªå¾ˆç›¸ä¼¼çš„è½åº“åœºæ™¯ï¼Œåƒåœ¾é¡¹ç›®ä¸€ä¸‹å­å°±èƒ½åŒ…è£…äº†å‘€ï¼Œå¤ªçˆ½äº†","like_count":0},{"had_liked":false,"id":287461,"user_name":"æ—¶å…‰å®ˆæŠ¤è€…-åŸºå…°","can_delete":false,"product_type":"c1","uid":1554995,"ip_address":"","ucode":"F0B0887B1979D2","user_header":"https://static001.geekbang.org/account/avatar/00/17/ba/33/2d83d174.jpg","comment_is_top":false,"comment_ctime":1617959845,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1617959845","product_id":100023901,"comment_content":"è€å¸ˆå›å¤ä¸‹ï¼š<br>æˆ‘çœ‹æœ€åä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œå®Œ --countï¼Œå›è°ƒå‡½æ•°åï¼Œæ‰§è¡ŒnextGenerationï¼ŒnextGenerationé‡Œä¼šå»æ‰§è¡Œtrip.signalAll()ï¼Œé‚£æ˜¯æœ€åä¸€ä¸ªçº¿ç¨‹å”¤é†’ä¹‹å‰ç­‰å¾…çš„çº¿ç¨‹å—ï¼Ÿ<br><br>æºç ï¼š<br>int index = --count;<br>            if (index == 0) {  &#47;&#47; tripped<br>                boolean ranAction = false;<br>                try {<br>                    final Runnable command = barrierCommand;<br>                    if (command != null)<br>                        command.run();<br>                    ranAction = true;<br>                    nextGeneration();<br>                    return 0;<br>                } finally {<br>                    if (!ranAction)<br>                        breakBarrier();<br>                }<br>            }","like_count":0},{"had_liked":false,"id":285770,"user_name":"Laughing","can_delete":false,"product_type":"c1","uid":1002134,"ip_address":"","ucode":"F68F1E000CA800","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4a/96/99466a06.jpg","comment_is_top":false,"comment_ctime":1617007224,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1617007224","product_id":100023901,"comment_content":"æœ‰å¿…è¦ï¼Œå¦‚æœæ¯æ¬¡éƒ½newéƒ½éœ€è¦å‘ç³»ç»Ÿè¿›è¡Œç”³è¯·èµ„æºï¼Œå¿…å®šæœ‰CPUçš„æ¶ˆè€—ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå¯æ§çš„çº¿ç¨‹æ± æ˜¯ç³»ç»Ÿå¯æ§çš„åŸºç¡€ã€‚","like_count":0},{"had_liked":false,"id":282474,"user_name":"Geek_aa23b7","can_delete":false,"product_type":"c1","uid":2461872,"ip_address":"","ucode":"DD89F30A04D5CC","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTL23Wicb0gO9RIXrRzpettuEYaSHLicA2LgRz3X7Npiagf1R4aB9bmePt1TY006z63ngKzhEONZvOsfw/132","comment_is_top":false,"comment_ctime":1615270771,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1615270771","product_id":100023901,"comment_content":"è€å¸ˆä½ å¥½ï¼Œå­¦ä¹ äº†æ‚¨çš„è¯¾ç¨‹è·ç›ŠåŒªæµ…ï¼Œé’ˆå¯¹è¯¾åæ€è€ƒæˆ‘æœ‰ä»¥ä¸‹è§è§£ï¼ŒCyclicBarrierä¾‹å­ä¼¼ä¹æ˜¯å­˜åœ¨é—®é¢˜çš„ï¼Œcheckæ–¹æ³•ç”¨å•çº¿ç¨‹çš„æ–¹å¼ä¿è¯ä¸²è¡Œï¼Œä½†æ˜¯checkæ–¹æ³•å’ŒT1ã€T2æ–¹æ³•æ˜¯ä»ç„¶æ˜¯å¹¶è¡Œçš„ï¼Œé‚£ä¸¤ä¸ªé˜Ÿåˆ—å°±å­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚è¦çœŸæ­£ä¿è¯çº¿ç¨‹å®‰å…¨å¯ä»¥æŠŠcheckæ–¹æ³•å¯¹é˜Ÿåˆ—çš„å¤„ç† p = pos.remove(0);<br>                D d = dos.remove(0); æ”¾åˆ°CyclicBarrierä¸­ã€‚è¿™æ ·å°±ä¿è¯äº†ä¸¤ä¸ªé˜Ÿåˆ—çš„çº¿ç¨‹å®‰å…¨ï¼ŒåŒæ—¶checkæ–¹æ³•ä¹Ÿä¸å­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜äº†ï¼Œçº¿ç¨‹æ± çš„çº¿ç¨‹æ•°é‡ä¹Ÿå°±å¯ä»¥æ ¹æ®çœŸå®æƒ…æ™¯åšè°ƒæ•´ã€‚final CyclicBarrier barrier =<br>            new CyclicBarrier(2, ()-&gt;{<br>                P p = pos.remove(0);<br>                D d = dos.remove(0);<br>                executor.execute(()-&gt;{<br>                    check(p,d);<br>                });<br>            });<br><br>    void check(p, d){<br>        &#47;&#47; æ‰§è¡Œå¯¹è´¦æ“ä½œ<br>        diff = check(p, d);<br>        &#47;&#47; å·®å¼‚å†™å…¥å·®å¼‚åº“<br>        save(diff);<br>    }","like_count":0},{"had_liked":false,"id":281588,"user_name":"ä¿ºèƒ½å­¦ä¸ªå•¥","can_delete":false,"product_type":"c1","uid":1026742,"ip_address":"","ucode":"30740C5B58774C","user_header":"https://static001.geekbang.org/account/avatar/00/0f/aa/b6/46a5bbf3.jpg","comment_is_top":false,"comment_ctime":1614820726,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1614820726","product_id":100023901,"comment_content":"å›ºå®šå¤§å°çº¿ç¨‹æ± åªæ˜¯é™åˆ¶äº†åˆ›å»ºçš„æœ€å¤šçº¿ç¨‹æ•°ï¼Œä½†é˜»å¡é˜Ÿåˆ—ä»æ˜¯æ— ç•Œçš„ï¼Œå¦‚æœç”Ÿäº§é€Ÿåº¦è¿œè¿œå¤§äºæ¶ˆè´¹é€Ÿåº¦ï¼Œä¾ç„¶ä¼šé€ æˆOOMï¼Œå¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰çš„çº¿ç¨‹æ± æ„é€ ä¸€ä¸ªæœ‰ç•Œçš„é˜»å¡é˜Ÿåˆ—","like_count":0},{"had_liked":false,"id":268650,"user_name":"å¼ æ´‹","can_delete":false,"product_type":"c1","uid":1182914,"ip_address":"","ucode":"549BE5DEEF8417","user_header":"https://static001.geekbang.org/account/avatar/00/12/0c/c2/bad34a50.jpg","comment_is_top":false,"comment_ctime":1608282646,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1608282646","product_id":100023901,"comment_content":"è€å¸ˆï¼Œæˆ‘éªŒè¯äº†ä¸€ä¸‹ CyclicBarrier çš„å›è°ƒå‡½æ•°ï¼Œç”¨çš„å…¶å®æ˜¯æ‰§è¡Œä»»åŠ¡æœ€åä¸€ä¸ªæŠ€æœ¯çš„çº¿ç¨‹æ¥æ‰§è¡Œçš„ï¼Œæ‰€ä»¥å†åŠ ä¸€ä¸ªçº¿ç¨‹æ± æ˜¯ä¸æ˜¯æ˜¾å¾—æ²¡æœ‰å¿…è¦äº†ã€‚","like_count":0},{"had_liked":false,"id":262562,"user_name":"Geek_89e362","can_delete":false,"product_type":"c1","uid":2308075,"ip_address":"","ucode":"E596C2CFE1CFAF","user_header":"","comment_is_top":false,"comment_ctime":1605769551,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1605769551","product_id":100023901,"comment_content":"ç›´æ¥æ”¹æˆå¤šçº¿ç¨‹åº”è¯¥æ˜¯ä¼šå‡ºç°çº¿ç¨‹å®‰å…¨é—®é¢˜çš„ï¼Œå› ä¸º checkæ–¹æ³•ä¸­çš„  P p = pos.remove(0);  D d = dos.remove(0); ä¸¤ä¸ªå­˜åœ¨ç«æ€æ¡ä»¶ã€‚æ”¹æˆå¤šçº¿ç¨‹åŠ ä¸ªé”åº”è¯¥å°±å¯ä»¥äº†ã€‚<br>æ¯”å¦‚ï¼š<br>Lock lock = new ReentrantLock(true);<br>void check(){ <br>     P p = null;<br>\t D d = null;<br>     lock.lock();<br>\t try{<br>\t   p = pos.remove(0); <br>\t   d = dos.remove(0); <br>\t }finally{<br>\t   lock.unlock();<br>\t }\t<br>\t &#47;&#47; æ‰§è¡Œå¯¹è´¦æ“ä½œ  <br>\t diff = check(p, d);  <br>\t &#47;&#47; å·®å¼‚å†™å…¥å·®å¼‚åº“  <br>\t save(diff);<br> }","like_count":0},{"had_liked":false,"id":251118,"user_name":"maybe","can_delete":false,"product_type":"c1","uid":1475528,"ip_address":"","ucode":"93D160F617E750","user_header":"https://static001.geekbang.org/account/avatar/00/16/83/c8/5ce842f6.jpg","comment_is_top":false,"comment_ctime":1601368092,"is_pvip":false,"discussion_count":0,"race_medal":4,"score":"1601368092","product_id":100023901,"comment_content":"æœ‰å¿…è¦ä½¿ç”¨çº¿ç¨‹æ± ï¼Œä¸€æ˜¯ä¿è¯æ¶ˆè´¹è€…æ˜¯å¼‚æ­¥è¿›è¡Œï¼ŒäºŒæ˜¯å•ä¸ªçº¿ç¨‹èƒ½ä¿è¯removeæ“ä½œæ—¶çº¿ç¨‹å®‰å…¨çš„","like_count":0},{"had_liked":false,"id":237857,"user_name":"å†ç»­å•¸å‚²","can_delete":false,"product_type":"c1","uid":1360184,"ip_address":"","ucode":"912987A17DCA92","user_header":"https://static001.geekbang.org/account/avatar/00/14/c1/38/e45bbb6b.jpg","comment_is_top":false,"comment_ctime":1595987457,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1595987457","product_id":100023901,"comment_content":"å¦‚æœæ˜¯ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å¼ï¼Œæ˜¯å¦å¯ä»¥è€ƒè™‘ä½¿ç”¨SingleThreadExecutorå‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":230691,"user_name":"å°ä¹™å“¥","can_delete":false,"product_type":"c1","uid":1063308,"ip_address":"","ucode":"C77E79BEA0C325","user_header":"https://static001.geekbang.org/account/avatar/00/10/39/8c/089525aa.jpg","comment_is_top":false,"comment_ctime":1593458831,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1593458831","product_id":100023901,"comment_content":"CyclicBarrierçš„ä¾‹å­æœ‰ä¸ªæœ€å¤§çš„é—®é¢˜æ˜¯ï¼Œç”Ÿäº§è€…å¦‚æœæœ‰ä¸€ä¸ªçº¿ç¨‹(æ¯”å¦‚ï¼ŒT1)å¼‚å¸¸å¯¼è‡´æ•°æ®æ²¡æœ‰å†™å…¥é˜Ÿåˆ—ï¼Œè€Œå¦ä¸€ä¸ªçº¿ç¨‹T2æ­£å¸¸å†™å…¥æ•°æ®åˆ°é˜Ÿåˆ—ã€‚ä¼šå¯¼è‡´æ¶ˆè´¹çº¿ç¨‹æ¶ˆè´¹æ•°æ®é”™åºã€‚","like_count":0},{"had_liked":false,"id":225400,"user_name":"å‘å“¥","can_delete":false,"product_type":"c1","uid":1281495,"ip_address":"","ucode":"E2BA6621422D08","user_header":"https://static001.geekbang.org/account/avatar/00/13/8d/d7/eeceb2d5.jpg","comment_is_top":false,"comment_ctime":1591750968,"is_pvip":false,"replies":[{"id":"83406","content":"T1å’ŒT2å¯ä»¥å¹¶è¡Œ","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1592125999,"ip_address":"","comment_id":225400,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1591750968","product_id":100023901,"comment_content":"è€å¸ˆï¼Œå‰é¢åœ¨è¿˜æ²¡ä½¿ç”¨çº¿ç¨‹æ± ä¼˜åŒ–çš„æ—¶å€™ï¼Œç”¨T1. join()ï¼ŒT2. join()è¿›è¡Œç­‰å¾…ï¼Œè¿™é‡Œæ˜¯ä¸æ˜¯æ²¡æœ‰å¹¶è¡Œçš„æ•ˆæœï¼Œæˆ‘çš„ç†è§£è¿˜æ˜¯å•çº¿ç¨‹æ‰§è¡Œçš„æ•ˆæœï¼Œä¸çŸ¥é“æˆ‘çš„ç†è§£å¯¹ä¸å¯¹ï¼Ÿéº»çƒ¦è€å¸ˆè§£ç­”ï¼Œè°¢è°¢","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497835,"discussion_content":"T1å’ŒT2å¯ä»¥å¹¶è¡Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592125999,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":223179,"user_name":"Î¾ï¼","can_delete":false,"product_type":"c1","uid":1636657,"ip_address":"","ucode":"F9797D21EBE10E","user_header":"https://static001.geekbang.org/account/avatar/00/18/f9/31/b75cc6d5.jpg","comment_is_top":false,"comment_ctime":1591016385,"is_pvip":false,"replies":[{"id":"112072","content":"æ²¡åŠæ³•ä¿è¯æ‰€æœ‰çº¿ç¨‹äº‹åŠ¡éƒ½å›æ»š","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1630132489,"ip_address":"","comment_id":223179,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1591016385","product_id":100023901,"comment_content":"è€å¸ˆï¼Œæ …æ å¯ä»¥ä½¿æ‰€æœ‰çº¿ç¨‹å…±äº«äº‹åŠ¡çŠ¶æ€ä¹ˆï¼Œæ€ä¹ˆä¿è¯ä¸€ä¸ªçº¿ç¨‹éœ€è¦å›æ»šçš„è¯æ‰€æœ‰çº¿ç¨‹çš„äº‹åŠ¡éƒ½å›æ»šå•Šï¼Œæ²¡æœ‰æ€è·¯å•Šâ€¦","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497043,"discussion_content":"æ²¡åŠæ³•ä¿è¯æ‰€æœ‰çº¿ç¨‹äº‹åŠ¡éƒ½å›æ»š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630132489,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":222006,"user_name":"M","can_delete":false,"product_type":"c1","uid":1810576,"ip_address":"","ucode":"06F26E1D62E9C9","user_header":"https://wx.qlogo.cn/mmopen/vi_32/eLNeJNaEkwGSK7xvtamMibVLMy2MpbIqX3iaEhT7JtSnTRMRTwZ2j4HX7WAapiashbiaBDVriaXKSP0Oeic6ZAEVEXag/132","comment_is_top":false,"comment_ctime":1590654951,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1590654951","product_id":100023901,"comment_content":"è€å¸ˆï¼Œæˆ‘ç”¨CyclicBarrieræ¨¡æ‹Ÿäº†ä¸‹ï¼Œwork3æ–¹æ³•ç­‰work1å’Œwork2æ‰§è¡Œå®Œä¹‹åå†å›è°ƒwork3ï¼Œä½†æ˜¯å‘ç°work3æ²¡æ‰§è¡Œï¼Œæ˜¯æ€ä¹ˆå›äº‹å‘€ï¼ŸCountDownLatchæ˜¯å¯ä»¥çš„<br><br>public class CyclicBarrierDemo {<br>    &#47;&#47;æ‰§è¡Œå›è°ƒçš„çº¿ç¨‹æ± <br>    private Executor executor = Executors.newFixedThreadPool(1);<br><br>    @Test<br>    public void test() {<br>        CyclicBarrier barrier = new CyclicBarrier(2, () -&gt; {<br>            executor.execute(() -&gt; {<br>                work3();<br>            });<br>        });<br><br>        new Thread(() -&gt; {<br>            work();<br>            try {<br>                &#47;&#47;ç­‰å¾…<br>                barrier.await();<br>            } catch (InterruptedException e) {<br>                e.printStackTrace();<br>            } catch (BrokenBarrierException e) {<br>                e.printStackTrace();<br>            }<br>        }).start();<br><br>        new Thread(() -&gt; {<br>            work2();<br>            try {<br>                &#47;&#47;ç­‰å¾…<br>                barrier.await();<br>            } catch (InterruptedException e) {<br>                e.printStackTrace();<br>            } catch (BrokenBarrierException e) {<br>                e.printStackTrace();<br>            }<br>        }).start();<br><br><br>    }<br><br><br>    public void work() {<br>        for (int i = 0; i &lt; 100; i++) {<br>            System.out.println(&quot;ä¹Œé¾Ÿè·‘äº†[&quot; + i + &quot;]ç±³&quot;);<br>        }<br>    }<br><br>    public void work2() {<br>        for (int i = 0; i &lt; 100; i++) {<br>            System.out.println(&quot;å…”å­è·‘äº†[&quot; + i + &quot;]ç±³&quot;);<br>        }<br>    }<br><br>    public void work3() {<br>        for (int i = 0; i &lt; 100; i++) {<br>            System.out.println(&quot;ä¸Šå¸è·‘äº†[&quot; + i + &quot;]ç±³&quot;);<br>        }<br>    }<br><br><br>}","like_count":0},{"had_liked":false,"id":217797,"user_name":"kimoti","can_delete":false,"product_type":"c1","uid":1897671,"ip_address":"","ucode":"0A78077408C2B1","user_header":"https://static001.geekbang.org/account/avatar/00/1c/f4/c7/037235c9.jpg","comment_is_top":false,"comment_ctime":1589615271,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1589615271","product_id":100023901,"comment_content":"è¯·æ•™è€å¸ˆå‡å¦‚è¿™ä¸ªå›è°ƒå‡½æ•°ä¸ç”¨çº¿ç¨‹æ± å»æ‰§è¡Œcheckæ–¹æ³•çš„è¯ï¼Œä¹Ÿå°±æ˜¯åŒæ­¥è°ƒç”¨checkæ–¹æ³•çš„è¯ï¼Œå¾ªç¯æŸ¥è¯¢è®¢å•åº“å’Œå¾ªç¯æŸ¥è¯¢è¿å•åº“çš„çº¿ç¨‹ä¼šè¢«é˜»å¡å—ï¼Ÿ<br><br>æˆ–è€…è¯´å‡å¦‚ä¸Šä¸€è½®çš„checkå‡½æ•°æœªæ‰§è¡Œå®Œæˆï¼Œè¿™ä¸€è½®çš„checkå‡½æ•°ä¼šç­‰ä¸Šä¸€è½®çš„checkå‡½æ•°æ‰§è¡Œå®Œæˆä¹‹åå†æ‰§è¡Œå—?","like_count":0},{"had_liked":false,"id":217780,"user_name":"kimoti","can_delete":false,"product_type":"c1","uid":1897671,"ip_address":"","ucode":"0A78077408C2B1","user_header":"https://static001.geekbang.org/account/avatar/00/1c/f4/c7/037235c9.jpg","comment_is_top":false,"comment_ctime":1589612131,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1589612131","product_id":100023901,"comment_content":"æ„Ÿè§‰è€å¸ˆè¿™ä¸ªå¯¹è´¦ç³»ç»Ÿè®¾è®¡çš„å¾ˆç²¾å¦™","like_count":0},{"had_liked":false,"id":211133,"user_name":"è§å—å±±","can_delete":false,"product_type":"c1","uid":1118111,"ip_address":"","ucode":"6A8BB82B7573CA","user_header":"https://static001.geekbang.org/account/avatar/00/11/0f/9f/f4b06bd5.jpg","comment_is_top":false,"comment_ctime":1587900183,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1587900183","product_id":100023901,"comment_content":"å•çº¿ç¨‹çš„çº¿ç¨‹æ± ä¿è¯äº†ckeckæ—¶èƒ½å¤Ÿé¿å…å¹¶å‘æ•°æ®å®‰å…¨ï¼ŒåŒæ—¶å°†åŒæ­¥è½¬æˆå¼‚æ­¥å¤„ç†ã€‚","like_count":0},{"had_liked":false,"id":206685,"user_name":"ä½ å­˜åœ¨ï½æˆ‘è„‘æµ·é‡Œ","can_delete":false,"product_type":"c1","uid":1786377,"ip_address":"","ucode":"3E06D047764062","user_header":"https://static001.geekbang.org/account/avatar/00/1b/42/09/8cfa5a76.jpg","comment_is_top":false,"comment_ctime":1586917138,"is_pvip":false,"replies":[{"id":"77815","content":"å¯ä»¥","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1587346580,"ip_address":"","comment_id":206685,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1586917138","product_id":100023901,"comment_content":"1.è¯·é—®æœ€åçš„ä»£ç ï¼ŒæŸ¥è¯¢è®¢å•åº“å’Œæ´¾å•åº“åœ¨whileé‡Œé¢æ¯æ¬¡åˆ›å»ºæ–°çš„çº¿ç¨‹ï¼Œè¿™é‡Œæ˜¯å¦å¯ä»¥ä¹Ÿç”¨çº¿ç¨‹æ± æ¥å¤ç”¨çº¿ç¨‹å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":491865,"discussion_content":"å¯ä»¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587346580,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":203373,"user_name":"Michael","can_delete":false,"product_type":"c1","uid":1274787,"ip_address":"","ucode":"C233DF1D224EC1","user_header":"https://static001.geekbang.org/account/avatar/00/13/73/a3/2b077607.jpg","comment_is_top":false,"comment_ctime":1586180770,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1586180770","product_id":100023901,"comment_content":"å®é™…ä½¿ç”¨ä¸­çº¿ç¨‹æ± å¦‚ä½•åˆ›å»ºï¼Ÿ<br> @Bean(&quot;feedExecutor&quot;)<br>    public Executor feedExecutor() {<br>        ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();<br>        executor.setCorePoolSize(8);<br>        executor.setMaxPoolSize(20);<br>        executor.setQueueCapacity(1000);<br>        executor.setKeepAliveSeconds(100);<br>        executor.setThreadNamePrefix(&quot;feed-executor-&quot;);<br>        executor.setRejectedExecutionHandler(new ThreadPoolExecutor.CallerRunsPolicy());<br>        return executor;<br>    }<br><br>ä½¿ç”¨è¿™ç§æ–¹æ³•åˆ›å»ºåï¼ŒCountDownLatchå’ŒAsyncå¦‚ä½•ç»“åˆä½¿ç”¨ï¼Ÿ","like_count":0},{"had_liked":false,"id":187297,"user_name":"å‡¯","can_delete":false,"product_type":"c1","uid":1670995,"ip_address":"","ucode":"BFEA3EE7393B80","user_header":"https://static001.geekbang.org/account/avatar/00/19/7f/53/a9ae31ce.jpg","comment_is_top":false,"comment_ctime":1584077478,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584077478","product_id":100023901,"comment_content":"æœ‰ä¸ªç–‘é—® å¯¹è´¦çš„æ—¶å€™ ä¸ºä»€ä¹ˆèƒ½ç¡®ä¿è®¢å•é‡Œé¢å–å¾—ä¸€æ¡ä¸æ´¾é€é‡Œé¢å–å¾—ä¸€æ¡æ˜¯å¯¹åº”çš„","like_count":0},{"had_liked":false,"id":166205,"user_name":"Cv","can_delete":false,"product_type":"c1","uid":1062797,"ip_address":"","ucode":"C77CE172B5AA28","user_header":"","comment_is_top":false,"comment_ctime":1577415496,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1577415496","product_id":100023901,"comment_content":"ä¸€ä¸ªæƒ³æ³•: å¦‚æœä¸ä½¿ç”¨2ä¸ªé˜Ÿåˆ—,è€Œæ˜¯å°è£…æˆä¸€ä¸ªé˜Ÿåˆ—çš„è¯, é‚£ä¹ˆcheckçš„çº¿ç¨‹æ± å¤§å°å°±å¯ä»¥æ‰©å¤§ä¸å¿…æ˜¯1ä¸ª, åœ¨getæ¯”checkå¿«çš„æƒ…å†µä¸‹, æ€§èƒ½å¯ä»¥è¿›ä¸€æ­¥æå‡","like_count":0},{"had_liked":false,"id":163445,"user_name":"ç‰¹é›·è¥¿çš®çš®","can_delete":false,"product_type":"c1","uid":1564539,"ip_address":"","ucode":"0BE139A55157F0","user_header":"https://static001.geekbang.org/account/avatar/00/17/df/7b/4ad93869.jpg","comment_is_top":false,"comment_ctime":1576722859,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1576722859","product_id":100023901,"comment_content":"ç›®å‰çœ‹è®²çš„æœ€å¥½çš„ä¸€ç¯‡ã€‚","like_count":0},{"had_liked":false,"id":160476,"user_name":"Wanderlust","can_delete":false,"product_type":"c1","uid":1014854,"ip_address":"","ucode":"F004489DC0E168","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7c/46/89b60401.jpg","comment_is_top":false,"comment_ctime":1575958637,"is_pvip":false,"replies":[{"id":"61363","content":"åŠ æ—¥å¿—åº”è¯¥å°±å¯ä»¥","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1576072523,"ip_address":"","comment_id":160476,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1575958637","product_id":100023901,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼è¿™ç¯‡æ–‡ç« å±‚å±‚é€’è¿›ï¼Œæ˜“äºç†è§£ï¼Œéå¸¸å–œæ¬¢ï¼æƒ³é—®ä¸‹å¦‚ä½•å†™æµ‹è¯•æ¥éªŒè¯ä»¥ä¸Šå‡ ä¸ªç‰ˆæœ¬çš„æ‰§è¡Œé¡ºåºæ­£å¦‚å›¾ç‰‡ä¸­æ‰€ç”»çš„ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477386,"discussion_content":"åŠ æ—¥å¿—åº”è¯¥å°±å¯ä»¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576072523,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":153433,"user_name":"æœ•çˆ±å¾å¦ƒ","can_delete":false,"product_type":"c1","uid":1733692,"ip_address":"","ucode":"B10EB69934F9E2","user_header":"https://static001.geekbang.org/account/avatar/00/1a/74/3c/da79d2a1.jpg","comment_is_top":false,"comment_ctime":1574235270,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1574235270","product_id":100023901,"comment_content":"èŒ…å¡é¡¿å¼€ï¼Œåœ¨åšæ‰‹å¤´çš„é¡¹ç›®çš„æ—¶å€™ï¼Œé€šå¸¸ä¸€ä¸ªHTTPè¯·æ±‚é‡Œä¼šæ‰§è¡Œå¤šä¸ªSQLè¯­å¥ï¼Œç„¶åå°†æŸ¥è¯¢ç»“æœè¿›è¡Œèµ‹å€¼æˆ–æ‹¼æ¥ï¼Œå¾€å¾€è¿™äº›SQLéƒ½æ˜¯ä¾èµ–ç¬¬ä¸€ä¸ªsqlæ‰§è¡Œç»“æœï¼Œè€Œåé¢çš„SQLå½¼æ­¤ä¹‹é—´æ²¡æœ‰ä¾èµ–å…³ç³»ï¼Œé‚£ä¹ˆå®Œå…¨å¯ä»¥å¤šçº¿ç¨‹è¿›è¡Œæ“ä½œï¼Œç„¶åç­‰æ‰€æœ‰çº¿ç¨‹æ‰§è¡Œå®Œæ¯•æˆ–æ˜¯å»é˜Ÿåˆ—ä¸­å»ç»“æœéƒ½å¯ä»¥å®ç°SQLæ‰§è¡Œå®Œæ¯•åçš„èµ‹å€¼å’Œæ‹¼æ¥çš„æ“ä½œã€‚<br>å†æ¥å›ç­”æ€è€ƒé¢˜ï¼Œå‡å¦‚ä¸æ˜¯1çº¿ç¨‹ï¼Œæ˜¯2ä¸ªçº¿ç¨‹ï¼Œé‚£ä¹ˆç¬¬ä¸€ä¸ªçº¿ç¨‹å…ˆè¿”å›è®¢å•ç»“æœï¼Œç¬¬äºŒä¸ªçº¿ç¨‹å…ˆè¿”å›çš„æ˜¯æ´¾é€çš„ç»“æœï¼Œç»“æœè¿™ä¸¤ä¸ªåŒ¹é…ä¸Šäº†ï¼Œç›´æ¥å¯¹è´¦ï¼Œè¿™æ ·æœ€ç»ˆç»“æœå°±é”™äº†","like_count":0},{"had_liked":false,"id":148131,"user_name":"Joker","can_delete":false,"product_type":"c1","uid":1156592,"ip_address":"","ucode":"126AF848001A1E","user_header":"https://static001.geekbang.org/account/avatar/00/11/a5/f0/8648c464.jpg","comment_is_top":false,"comment_ctime":1572945904,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1572945904","product_id":100023901,"comment_content":"å¦‚æœå¤šçº¿ç¨‹ï¼Œé˜Ÿåˆ—é‡Œé¢æœ‰ä¸¤ä¸ªæ•°æ®ï¼Œt1å…ˆæ‰§è¡Œï¼Œåˆ°äº†å–äº†åœ¨posé˜Ÿåˆ—removeï¼ˆ0ï¼‰ï¼Œç„¶ååˆ‡åˆ°t2ä¸€ä¸‹å­å°±posé˜Ÿåˆ—removeï¼ˆ0ï¼‰ï¼Œdosé˜Ÿåˆ—removeï¼ˆ0ï¼‰ï¼Œç„¶åå°±å‘ç”Ÿè®¢å•å’Œæ´¾é€å•æ˜¯ä¸¤ä¸ªæœ¬æ¥å°±ä¸åŒçš„ä¸¤ä¸ªæ•°æ®çš„æƒ…å†µäº†ã€‚<br>å› ä¸ºè¿™é‡Œæœ‰å¯èƒ½æŸ¥çš„é€Ÿåº¦æ¯”æ ¡å¯¹çš„é€Ÿåº¦è¿˜è¦å¿«ï¼Œæ‰€ä»¥ç”¨å¤šçº¿ç¨‹æœ‰å¯èƒ½å‡ºç°ä¸Šé¢è¿™ç§æƒ…å†µã€‚","like_count":0},{"had_liked":false,"id":146979,"user_name":"å¼ å¾·","can_delete":false,"product_type":"c1","uid":1101929,"ip_address":"","ucode":"31FE63E8725EFC","user_header":"https://static001.geekbang.org/account/avatar/00/10/d0/69/5dbdc245.jpg","comment_is_top":false,"comment_ctime":1572750607,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1572750607","product_id":100023901,"comment_content":"å†çœ‹è€å¸ˆçš„ä¸“æ   æ„Ÿè§‰æœ‰ä¸ä¸€æ ·çš„ä¸œè¥¿","like_count":0},{"had_liked":false,"id":144500,"user_name":"ty_young","can_delete":false,"product_type":"c1","uid":1284337,"ip_address":"","ucode":"EB1D5DB0AE7B33","user_header":"","comment_is_top":false,"comment_ctime":1571961034,"is_pvip":false,"replies":[{"id":"55721","content":"ğŸ˜„","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1571976107,"ip_address":"","comment_id":144500,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1571961034","product_id":100023901,"comment_content":"è®²å¾—å¥½ï¼Œåˆæ¥è¯»ä¸€éğŸ˜","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":471973,"discussion_content":"ğŸ˜„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571976107,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":136963,"user_name":"DFighting","can_delete":false,"product_type":"c1","uid":1233193,"ip_address":"","ucode":"F3BA2426FF8582","user_header":"https://static001.geekbang.org/account/avatar/00/12/d1/29/1b1234ed.jpg","comment_is_top":false,"comment_ctime":1569567417,"is_pvip":true,"replies":[{"id":"52708","content":"å¹¶å‘ä¹‹å¤–çš„è¦çœ‹å…·ä½“åœºæ™¯ï¼Œæˆ‘ä»¬å°±ä¸çº ç»“è¿™ä¸ªäº†ğŸ˜„","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1569667817,"ip_address":"","comment_id":136963,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1569567417","product_id":100023901,"comment_content":"æœ‰ä¸ªå¹¶å‘ä¹‹å¤–çš„é—®é¢˜ï¼Œè€å¸ˆå®ç°çš„æ—¶å€™æ˜¯å¦‚ä½•ä¿è¯è®¢å•é˜Ÿåˆ—å’Œæ´¾é€é˜Ÿåˆ—çš„æŒ‰åºä¸€ä¸€å¯¹åº”çš„ï¼Ÿæˆ‘ç†è§£çš„æ˜¯è¿™ä¸¤ä¸ªé˜Ÿåˆ—éƒ½æ˜¯å¹¶å‘æ— åºçš„ï¼Œè™½ç„¶ä»–ä»¬ä¹‹é—´å­˜åœ¨å¯¹åº”å…³ç³»ï¼Œä½†æ˜¯æ¯æ¬¡éƒ½å–é˜Ÿåˆ—å¤´å…ƒç´ å¹¶ä¿æŒä¸€ä¸€å¯¹åº”ï¼Œé‚£ä¸€ä¸ªè·‘å¾—å¿«ï¼Œä¸€ä¸ªè·‘å¾—æ…¢ï¼Œä¸æ˜¯éœ€è¦é˜»å¡å…¶ä¸­ä¸€ä¸ªç­‰å¾…å—ï¼Ÿæˆ‘è§‰å¾—å¯ä»¥ä½¿ç”¨hashçš„æ€è·¯æ¥å­˜å‚¨ä¸¤ä¸ªé˜Ÿåˆ—çš„å…ƒç´ ï¼Œæœ‰ä»€ä¹ˆä¸å¯¹çš„åœ°æ–¹ï¼Œè¿˜è¯·è€å¸ˆæŒ‡æ•™","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468882,"discussion_content":"å¹¶å‘ä¹‹å¤–çš„è¦çœ‹å…·ä½“åœºæ™¯ï¼Œæˆ‘ä»¬å°±ä¸çº ç»“è¿™ä¸ªäº†ğŸ˜„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569667817,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":136750,"user_name":"ç‹ä¼Ÿ","can_delete":false,"product_type":"c1","uid":1445561,"ip_address":"","ucode":"22D0188425E839","user_header":"https://static001.geekbang.org/account/avatar/00/16/0e/b9/7866f19d.jpg","comment_is_top":false,"comment_ctime":1569502293,"is_pvip":false,"replies":[{"id":"53616","content":"å»ºè®®å‡ºç°é—®é¢˜çš„æ—¶å€™dumpçº¿ç¨‹çœ‹çœ‹ï¼Œä¹Ÿå¯ä»¥dumpå†…å­˜ï¼Œè¿™æ ·æ›´å®¹æ˜“æ‰¾åˆ°é—®é¢˜","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1570581227,"ip_address":"","comment_id":136750,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1569502293","product_id":100023901,"comment_content":"è€å¸ˆä½ å¥½,æˆ‘è¿™è¾¹ä½¿ç”¨CountDownLatchç¢°åˆ°ä¸€ä¸ªé—®é¢˜,ä½¿ç”¨è®¡æ•°å™¨,æ¥ä¿è¯åŒæ­¥è®¢å•çš„çº¿ç¨‹æ‰§è¡Œå®Œæ¯•å,åœ¨æ‰§è¡Œåç»­é€»è¾‘,ä½†æ˜¯æœ‰çš„æ—¶å€™ä¼šé˜»å¡åœ¨await()æ–¹æ³•å¤„,å¯¼è‡´åç»­é€»è¾‘æ— æ³•è¿›è¡Œ,èƒ½å¸®å¿™åˆ†æä¸‹å§.ä»£ç å¦‚ä¸‹:<br>        &#47;&#47;åˆ›å»ºä¸€ä¸ªè®¡æ•°å™¨<br>        final CountDownLatch latch = new CountDownLatch(mataData.size());<br>        &#47;&#47;å¤„ç†å•ä¸ªè®¢å•<br>        for(final EbsOrdersDO ebsOrdersDO : mataData){<br>            executor.submit(new Runnable() {<br>                @Override<br>                public void run() {<br>                    try {<br>                        singleOrderProcess(merchantNum, ebsOrdersDO.getPlatformOrderId());<br>                        &#47;&#47;è®¢å•å¤„ç†æˆåŠŸæ•°+1<br>                        redisHandle.hincrement(progressKey,successKey,1);<br>                    } catch (Throwable e) {<br>                        LOG.error(&quot;&gt;&gt;è®¢å•ç¡®è®¤æ”¶è´§æ‰§è¡Œå¤±è´¥..orderId:&quot; + ebsOrdersDO.getPlatformOrderId() + e);<br>                        &#47;&#47;è®¢å•å¤„ç†å¤±è´¥æ•°+1<br>                        redisHandle.hincrement(progressKey,failKey,1);<br>                    }finally {<br>                        if(latch !=null){<br>                            latch.countDown();<br>                        }<br>                    }<br><br>                }<br>            });<br>        }<br>        &#47;&#47;å½“å‰çº¿ç¨‹æ± æ¶ˆè´¹å®Œäº†ï¼Œå†ç»§ç»­è·‘ï¼Œé¿å…é˜Ÿåˆ—å †ç§¯è¿‡å¤šå¯¼è‡´å†…å­˜æº¢å‡º,æ”¹ç”¨è®¡æ•°å™¨çš„æ–¹å¼åˆ¤æ–­ä»»åŠ¡æ˜¯å¦æ‰§è¡Œç»“æŸ<br>        try {<br>            latch.await();<br>            String completeKey =  MerchantConstants.SYNC_ORDER_KEY + merchantNum+&quot;:complete&quot;;","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468785,"discussion_content":"å»ºè®®å‡ºç°é—®é¢˜çš„æ—¶å€™dumpçº¿ç¨‹çœ‹çœ‹ï¼Œä¹Ÿå¯ä»¥dumpå†…å­˜ï¼Œè¿™æ ·æ›´å®¹æ˜“æ‰¾åˆ°é—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570581227,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":134536,"user_name":"é™æ°´æµæ·±","can_delete":false,"product_type":"c1","uid":1339724,"ip_address":"","ucode":"644F05EFBD2E7B","user_header":"https://static001.geekbang.org/account/avatar/00/14/71/4c/2cefec07.jpg","comment_is_top":false,"comment_ctime":1568861026,"is_pvip":false,"replies":[{"id":"51656","content":"é‚£å°±å†çœ‹ä¸€ä¼šå„¿ğŸ˜„","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1568896623,"ip_address":"","comment_id":134536,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1568861026","product_id":100023901,"comment_content":"è¿™ç¯‡æ–‡ç« ï¼ŒçœŸçš„çœ‹å¾—æˆ‘çˆ±ä¸é‡Šæ‰‹ã€‚å¤§èµã€‚","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467795,"discussion_content":"é‚£å°±å†çœ‹ä¸€ä¼šå„¿ğŸ˜„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568896623,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":130472,"user_name":"dpzain","can_delete":false,"product_type":"c1","uid":1510874,"ip_address":"","ucode":"AA069519176892","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTINb3EmV5q6ytNWclxke1OicbEAw4ZSmibSCrNGZPDCnAjsGDwG3jJQcuEwAcFRffBQouXFEaERQbfw/132","comment_is_top":false,"comment_ctime":1567471536,"is_pvip":false,"replies":[{"id":"48829","content":"é«˜å¯ç”¨å±äºåˆ†å¸ƒå¼è®¡ç®—çš„èŒƒç•´ï¼Œè¿™ä¸ªé—®é¢˜æœ‰ç‚¹å¼€é˜”","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1567500021,"ip_address":"","comment_id":130472,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1567471536","product_id":100023901,"comment_content":"ä½ å¥½  è€å¸ˆï¼Œå¦‚æœçœŸæ˜¯ä¸šåŠ¡ä»£ç   æ€ä¹ˆä¿è¯åŒé˜Ÿåˆ—çš„é«˜å¯ç”¨ç”¨å‘¢   æ€ä¹ˆå®¹é”™ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465970,"discussion_content":"é«˜å¯ç”¨å±äºåˆ†å¸ƒå¼è®¡ç®—çš„èŒƒç•´ï¼Œè¿™ä¸ªé—®é¢˜æœ‰ç‚¹å¼€é˜”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567500021,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":130311,"user_name":"é™æ°´æµæ·±","can_delete":false,"product_type":"c1","uid":1339724,"ip_address":"","ucode":"644F05EFBD2E7B","user_header":"https://static001.geekbang.org/account/avatar/00/14/71/4c/2cefec07.jpg","comment_is_top":false,"comment_ctime":1567422703,"is_pvip":false,"replies":[{"id":"48631","content":"ä½¿ç”¨ç®€å•","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1567426609,"ip_address":"","comment_id":130311,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1567422703","product_id":100023901,"comment_content":"è€å¸ˆæ€ä¹ˆé‚£ä¹ˆå–œæ¬¢ç”¨Vector?","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465899,"discussion_content":"ä½¿ç”¨ç®€å•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567426609,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":129168,"user_name":"é¹é£å¤©ä¸‹","can_delete":false,"product_type":"c1","uid":1101792,"ip_address":"","ucode":"EB9FFD9FE64A4C","user_header":"https://static001.geekbang.org/account/avatar/00/10/cf/e0/f6819d03.jpg","comment_is_top":false,"comment_ctime":1567054192,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1567054192","product_id":100023901,"comment_content":"ä¸ªäººæ„Ÿè§‰åˆ°ç”¨å•ä¸ªçº¿ç¨‹åªæ˜¯æˆ‘ä»¬ç†è®ºä¸Šé¿å…å¹¶å‘ï¼Œé’ˆå¯¹è¿™ä¸ªä¸šåŠ¡æ˜¯æ ¹æœ¬ä¸å­˜åœ¨çš„ï¼Œé¦–å…ˆä»–éœ€è¦è·å–åˆ°è®¢å•æ•°æ®å’Œè¿å•æ•°æ®è¿™æ˜¯å‰æï¼Œä»¥åå†checkï¼Œcheckç¬¬ä¸€æ­¥å°±æ˜¯removeæ‰€ä»¥éå¸¸ä¹‹å¿«ï¼Œå¹¶ä¸”åœ¨ä¸‹ä¸€æ¬¡checkçš„æ—¶å€™æ˜¯ç­‰å¾…è·å–è®¢å•å’Œè¿å•ä¹‹åï¼Œè¿™æ—¶é—´è¶³å¤Ÿè®©ä»–removeå®Œäº†ï¼Œæ‰€ä»¥è®¾ç½®å¤šçº¿ç¨‹æ²¡æœ‰é—®é¢˜","like_count":0},{"had_liked":false,"id":128326,"user_name":"æ¢ç´¢æ— æ­¢å¢ƒ","can_delete":false,"product_type":"c1","uid":1044178,"ip_address":"","ucode":"91D2A9907DFA79","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ee/d2/7024431c.jpg","comment_is_top":false,"comment_ctime":1566870942,"is_pvip":false,"replies":[{"id":"47603","content":"æ¯æ¬¡å¯¹è´¦éƒ½ï¼‹1å°±å¯ä»¥äº†ï¼Œè¿™ä¸ªæ•…äº‹ä¸ºçš„æ˜¯è¯´æ˜å¹¶å‘é—®é¢˜ï¼Œæ²¡å¿…è¦çº ç»“ä¸šåŠ¡","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1566881011,"ip_address":"","comment_id":128326,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1566870942","product_id":100023901,"comment_content":"è€å¸ˆä½ å¥½ï¼Œæ¡ˆä¾‹ä¸­çš„â€œå­˜åœ¨æœªå¯¹è´¦è®¢å•â€è¿™ä¸ªæ¡ä»¶æ€ä¹ˆå†™çš„ï¼Ÿæˆ‘çš„ç†è§£æ˜¯è®¢å•æœ‰ä¸€ä¸ªçŠ¶æ€å­—æ®µï¼Œå¦‚æœçŠ¶æ€å€¼ä¸º0ï¼Œè¡¨ç¤ºæœªå¯¹è´¦ï¼Œå¦‚æœæ˜¯è¿™æ ·ï¼Œé‚£ä¹ˆå®Œæˆå¯¹è´¦ä¹‹åï¼Œè¿˜éœ€è¦å»æ›´æ–°è¿™æ‰¹è®¢å•çš„çŠ¶æ€ï¼Œè€Œæ˜¯æ¯æ¬¡æŸ¥å‡ºæ¥çš„è®¢å•åº”è¯¥æ˜¯ä¸€ä¸ªé›†åˆï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä¸çŸ¥é“ç†è§£å¯¹ä¸å¯¹ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464897,"discussion_content":"æ¯æ¬¡å¯¹è´¦éƒ½ï¼‹1å°±å¯ä»¥äº†ï¼Œè¿™ä¸ªæ•…äº‹ä¸ºçš„æ˜¯è¯´æ˜å¹¶å‘é—®é¢˜ï¼Œæ²¡å¿…è¦çº ç»“ä¸šåŠ¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566881011,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":124980,"user_name":"ç»™å¿ƒæ¥å—å†°å—","can_delete":false,"product_type":"c1","uid":1063689,"ip_address":"","ucode":"7AFB56581782A2","user_header":"https://static001.geekbang.org/account/avatar/00/10/3b/09/2cf074a7.jpg","comment_is_top":false,"comment_ctime":1566032414,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1566032414","product_id":100023901,"comment_content":"æˆ‘çš„çœ‹æ³•æ˜¯ä¸€ä¸ªçº¿ç¨‹å¯ä»¥ç’ä½å¯¹è´¦æ“ä½œéœ€è¦çš„çº¿ç¨‹æ± ï¼Œå¦‚æœè®¾ç½®å¤šä¸ªæ˜¯å¦ä¼šæœ‰çº¿ç¨‹åˆ‡æ¢å’Œèµ„æºæµªè´¹çš„é—®é¢˜ï¼Œå¦‚æœä¸è®¾ç½®çš„è¯æ¯ä¸€æ¬¡çš„å¯¹è´¦æ“ä½œéƒ½è¦åˆ©ç”¨åŒ¿åå†…éƒ¨ç±»çš„æ–¹å¼åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ï¼Œé€ æˆçº¿ç¨‹é¢‘ç¹åˆ›å»ºã€é”€æ¯ï¼Œä½¿jvmé¢‘ç¹å‘æ“ä½œç³»ç»Ÿç”³è¯·ä¸€ä¸ªæœ¬åœ°çº¿ç¨‹ï¼Œé¢‘ç¹gc,ä¸çŸ¥é“æ˜¯å¦æ˜¯è¿™æ ·ï¼Œè¯·è€å¸ˆè®²è§£çº¿ç¨‹çš„åˆ›å»ºã€jvmã€gcæ˜¯ä¸ªä»€ä¹ˆè¿‡ç¨‹","like_count":0},{"had_liked":false,"id":124976,"user_name":"ç»™å¿ƒæ¥å—å†°å—","can_delete":false,"product_type":"c1","uid":1063689,"ip_address":"","ucode":"7AFB56581782A2","user_header":"https://static001.geekbang.org/account/avatar/00/10/3b/09/2cf074a7.jpg","comment_is_top":false,"comment_ctime":1566031395,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1566031395","product_id":100023901,"comment_content":"å…³äºçº¿ç¨‹æ± çš„è®¾ç½®ä¹‹å‰è€å¸ˆæœ‰è®²è¿‡è¦æ ¹æ®å…·ä½“çš„ä¸šåŠ¡ç±»å‹å’Œç¡¬ä»¶CPUçš„æ ¸æ•°è¿›è¡Œè®¾ç½®ï¼Œæ˜¯å¦å¯ä»¥ä»»åŠ¡çš„ä¸ªæ•°è®¾ç½®çº¿ç¨‹æ± çš„å¤§å°","like_count":0},{"had_liked":false,"id":121841,"user_name":"helloworld","can_delete":false,"product_type":"c1","uid":1015754,"ip_address":"","ucode":"00DF2FEC58D2E6","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7f/ca/ea85bfdd.jpg","comment_is_top":false,"comment_ctime":1565232132,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1565232132","product_id":100023901,"comment_content":"è€å¸ˆæˆ‘æ¨¡æ‹Ÿä½ çš„ç¨‹åºï¼Œå‘ç°è¿è¡Œçš„æ—¶å€™æœ‰BrokenBarrierExceptionï¼Œéº»çƒ¦è€å¸ˆè§£ç­”ä¸‹ï¼š<br>public class CyclicBarrierTest03 {<br><br><br>    public static void main(String[] args) {<br><br>        ExecutorService executor = Executors.newFixedThreadPool(1);<br><br>        final CyclicBarrier barrier = new CyclicBarrier(2, () -&gt; {<br>            check();<br>        });<br><br>        checkAll(barrier);<br><br>    }<br><br>    public static void check() {<br>        System.out.println(&quot;å¼€å§‹å¯¹è´¦ çº¿ç¨‹åç§°ä¸º&quot; + Thread.currentThread().getName());<br>    }<br><br>    public static void checkAll(CyclicBarrier barrier) {<br>        Thread t1 = new Thread(() -&gt; {<br>            while (true) {<br>                System.out.println(&quot;&lt;--------æŸ¥è¯¢è®¢å•åº“ çº¿ç¨‹åç§°ä¸º&quot; + Thread.currentThread().getName());<br>                try {<br>                    barrier.await();<br>                } catch (InterruptedException e) {<br>                    e.printStackTrace();<br>                } catch (BrokenBarrierException e) {<br>                    e.printStackTrace();<br>                }<br>            }<br><br>        });<br>        t1.start();<br><br>        Thread t2 = new Thread(() -&gt; {<br>            while (true) {<br>                System.out.println(&quot;--------&gt;æŸ¥è¯¢è¿å•åº“ çº¿ç¨‹åç§°ä¸º&quot; + Thread.currentThread().getName());<br>                try {<br>                    barrier.await();<br>                } catch (InterruptedException e) {<br>                    e.printStackTrace();<br>                } catch (BrokenBarrierException e) {<br>                    e.printStackTrace();<br>                }<br>            }<br>        });<br>        t2.start();<br>    }<br>}<br><br>è¿è¡Œå®Œæˆåä¼šæŠ›å‡ºBrokenBarrierExceptionå¼‚å¸¸ï¼barrieræ˜¯æ˜¯ä»€ä¹ˆè¢«brokenæ‰çš„ï¼Ÿï¼Ÿï¼Ÿï¼Ÿ","like_count":0},{"had_liked":false,"id":121149,"user_name":"ä¸€å †å´½å´½","can_delete":false,"product_type":"c1","uid":1141798,"ip_address":"","ucode":"CBA84542220B63","user_header":"https://static001.geekbang.org/account/avatar/00/11/6c/26/d09d6fc5.jpg","comment_is_top":false,"comment_ctime":1565065719,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1565065719","product_id":100023901,"comment_content":"åœ¨ä½¿ç”¨CountDownçš„åœºæ™¯ä¸‹ï¼Œå¦‚æœå…¶ä¸­ä¸€ä¸ªå­çº¿ç¨‹è¶…æ—¶ï¼Œé‚£ä¹ˆè¿™ä¸ªå­çº¿ç¨‹åœ¨ä»€ä¹ˆæ—¶å€™ä¼šé‡Šæ”¾æ‰ã€‚å¦‚æœï¼Œå­çº¿ç¨‹å‡ºç°è¶…æ—¶çš„æƒ…å†µæ¯”è¾ƒå¤šï¼Œé‚£ä¹ˆçº¿ç¨‹æ± å‡ºç°çº¿ç¨‹æ± æ»¡ï¼Œé‚£ä¹ˆè¿™ç§æƒ…å†µå¦‚ä½•å¤„ç†","like_count":0},{"had_liked":false,"id":119561,"user_name":"Shine","can_delete":false,"product_type":"c1","uid":1022568,"ip_address":"","ucode":"C8C617B87C63C7","user_header":"https://static001.geekbang.org/account/avatar/00/0f/9a/68/92caeed6.jpg","comment_is_top":false,"comment_ctime":1564626245,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1564626245","product_id":100023901,"comment_content":"çº¿ç¨‹æ± å°±ä¸€ä¸ªçº¿ç¨‹ï¼Œè®¢å•è·å–çº¿ç¨‹å’Œæ´¾é€å•è·å–çº¿ç¨‹æ²¡æ³•åšåˆ°å¼‚æ­¥æ‰§è¡Œäº†å§ï¼Ÿ","like_count":0},{"had_liked":false,"id":117476,"user_name":"SIGHOR","can_delete":false,"product_type":"c1","uid":1439360,"ip_address":"","ucode":"411F85A8FD3DE1","user_header":"https://static001.geekbang.org/account/avatar/00/15/f6/80/830de85d.jpg","comment_is_top":false,"comment_ctime":1564056098,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1564056098","product_id":100023901,"comment_content":"è®¾ç½®ä¸€ä¸ªçº¿ç¨‹æ˜¯ä¸ºäº†é˜²æ­¢barrier.await()åˆ†å‡ ä¸ªçº¿ç¨‹æ‰§è¡Œï¼Œæ¯”å¦‚t1 åbarrier1-1=1,t2 åbarrier2-1=1,é‚£ä¹ˆt1,t2å¯èƒ½éƒ½åœ¨ç­‰å¾…äº†","like_count":0},{"had_liked":false,"id":117274,"user_name":"çŸ¥æ˜“è¡Œéš¾","can_delete":false,"product_type":"c1","uid":1005731,"ip_address":"","ucode":"BEE371CF596708","user_header":"https://static001.geekbang.org/account/avatar/00/0f/58/a3/1b270564.jpg","comment_is_top":false,"comment_ctime":1564017892,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1564017892","product_id":100023901,"comment_content":"çœŸå‡ºç°è¿™ç§é—®é¢˜ï¼Œé¦–å…ˆæƒ³åˆ°çš„è‚¯å®šæ˜¯ä¼˜åŒ–æŸ¥è¯¢è¯­å¥ï¼Œè€Œä¸æ˜¯æé«˜å¹¶è¡Œåº¦","like_count":0},{"had_liked":false,"id":116776,"user_name":"allean","can_delete":false,"product_type":"c1","uid":1051470,"ip_address":"","ucode":"A0D2DB4F219EAA","user_header":"https://static001.geekbang.org/account/avatar/00/10/0b/4e/fd946cb2.jpg","comment_is_top":false,"comment_ctime":1563925376,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1563925376","product_id":100023901,"comment_content":"ç²¾å½©ï¼çœ‹çš„éå¸¸ç•…å¿«ï¼Œæ„Ÿè°¢~","like_count":0},{"had_liked":false,"id":115190,"user_name":"å›å›","can_delete":false,"product_type":"c1","uid":1054285,"ip_address":"","ucode":"E2FA7EEB2C936B","user_header":"https://static001.geekbang.org/account/avatar/00/10/16/4d/55e2eb36.jpg","comment_is_top":false,"comment_ctime":1563504668,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1563504668","product_id":100023901,"comment_content":"CountDownLatch å’Œ CyclicBarrier å¯ä»¥æ··ç”¨ä¹ˆ","like_count":0},{"had_liked":false,"id":113993,"user_name":"é£˜å‘€é£˜çš„å°å¶å­","can_delete":false,"product_type":"c1","uid":1398591,"ip_address":"","ucode":"D662116E38B212","user_header":"https://static001.geekbang.org/account/avatar/00/15/57/3f/0009a20f.jpg","comment_is_top":false,"comment_ctime":1563201086,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1563201086","product_id":100023901,"comment_content":"ä½¿ç”¨çº¿ç¨‹æ± æ˜¯å°†checkå¼‚æ­¥æ‰§è¡Œä¸å½±å“è®¢å•åº“å’Œäº‘å•åº“çš„æŸ¥è¯¢ï¼Œè®¾ç½®ä¸º1å°±ç›¸å½“äºåŒæ­¥ä¸‹çš„é”ï¼Œåæ¥çš„åªèƒ½åœ¨ç­‰å¾…é˜Ÿåˆ—ç­‰å¾…ï¼Œèƒ½é˜²æ­¢è®¢å•åº“æŸ¥è¯¢å¤ªå¿«è€Œcheckå¤ªæ…¢å¯¼è‡´æ•°æ®ä¸ä¸€è‡´ï¼Œä¾‹å¦‚ç¬¬ä¸€æ¬¡checkæ‰æ‰§è¡Œåˆ°P p = pos.remove(0);åæ¥çš„checkå·²ç»æ‰§è¡Œå®Œäº†ï¼Œå› æ­¤åæ¥çš„checkåè€Œå…ˆæ‰§è¡Œäº†D d = dos.remove(0);è€Œè¿™ä¸ªæ•°æ®ç†åº”æ˜¯ç¬¬ä¸€æ¬¡checkçš„ã€‚","like_count":0},{"had_liked":false,"id":110492,"user_name":"å¿ƒå¦‚æ­¢æ°´ã€","can_delete":false,"product_type":"c1","uid":1107126,"ip_address":"","ucode":"8D801DECDA88BA","user_header":"https://static001.geekbang.org/account/avatar/00/10/e4/b6/49b8a39d.jpg","comment_is_top":false,"comment_ctime":1562287755,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1562287755","product_id":100023901,"comment_content":"è¶…æ—¶æ—¶é—´æ˜¯ä¸æ˜¯ä¸€æ—¦è®¾ç½®äº†ï¼Œä¸‡ä¸€è¿˜æ²¡èµ°å®Œå²‚ä¸æ˜¯å‡ºç°è„æ•°æ®äº†ï¼Ÿ","like_count":0},{"had_liked":false,"id":110417,"user_name":"13761642169","can_delete":false,"product_type":"c1","uid":1232334,"ip_address":"","ucode":"68137695FC2120","user_header":"","comment_is_top":false,"comment_ctime":1562252261,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1562252261","product_id":100023901,"comment_content":"æ–‡ç« å¤ªç²¾å½©äº†","like_count":0},{"had_liked":false,"id":107677,"user_name":"é¾™è¡Œç§€","can_delete":false,"product_type":"c1","uid":1351066,"ip_address":"","ucode":"2DA088D199EA9D","user_header":"https://static001.geekbang.org/account/avatar/00/14/9d/9a/7f064a9f.jpg","comment_is_top":false,"comment_ctime":1561595920,"is_pvip":false,"replies":[{"id":"38938","content":"ä¼š","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1561596606,"ip_address":"","comment_id":107677,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561595920","product_id":100023901,"comment_content":"ä¸¾ä¾‹ä¸­<br>T1.join();<br>T2.join();<br>T1çš„joinä¸ä¼šé˜»å¡å½“å‰ä¸»çº¿ç¨‹å˜›ï¼Ÿ<br>","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455623,"discussion_content":"ä¼š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561596606,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":106013,"user_name":"ç‹è—æ˜","can_delete":false,"product_type":"c1","uid":1546333,"ip_address":"","ucode":"374D68B8D3FAFC","user_header":"https://static001.geekbang.org/account/avatar/00/17/98/5d/8e91b338.jpg","comment_is_top":false,"comment_ctime":1561127078,"is_pvip":false,"replies":[{"id":"38345","content":"åŠæ³•æœ‰å¾ˆå¤šï¼Œç›®æ ‡æ˜¯ä¸€è‡´çš„","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1561160897,"ip_address":"","comment_id":106013,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561127078","product_id":100023901,"comment_content":"æ„Ÿè§‰ä¹Ÿå¯ä»¥ç”¨ä¸¤ä¸ªé˜»å¡é˜Ÿåˆ—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454914,"discussion_content":"åŠæ³•æœ‰å¾ˆå¤šï¼Œç›®æ ‡æ˜¯ä¸€è‡´çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561160897,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":105720,"user_name":"æ‹›è´¢","can_delete":false,"product_type":"c1","uid":1249970,"ip_address":"","ucode":"8A6781148A9932","user_header":"https://static001.geekbang.org/account/avatar/00/13/12/b2/3fb9a4a1.jpg","comment_is_top":false,"comment_ctime":1561078531,"is_pvip":false,"replies":[{"id":"38281","content":"å¾—çœ‹åœºæ™¯","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1561092919,"ip_address":"","comment_id":105720,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561078531","product_id":100023901,"comment_content":"è€å¸ˆï¼Œè¿™äº›å¹¶å‘å®¹å™¨ï¼Œå’Œè¯»é”å†™é”ç›¸æ¯”è¾ƒèµ·æ¥ï¼Œå“ªä¸€ç§æ€§èƒ½æ›´å¥½å‘¢","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454785,"discussion_content":"å¾—çœ‹åœºæ™¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561092919,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":103618,"user_name":"Adam","can_delete":false,"product_type":"c1","uid":1517838,"ip_address":"","ucode":"965DCD693E752B","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK36t2flfxhzKygfLfdIHbK99M9D9w3v3bwAHUibJSFAs1ibswf7hbhkqL321k5SUjfiaWkkHeRBlibNA/132","comment_is_top":false,"comment_ctime":1560477804,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1560477804","product_id":100023901,"comment_content":"è®¾ç½®ä¸º1 åº”è¯¥æ˜¯ä¸ºäº†åœ¨checkä¸­ä¿è¯å•çº¿ç¨‹å»ä¸¤ä¸ªä¸åŒçš„é˜Ÿåˆ—å–æ•°æ®ä¿è¯æ•°æ®å®‰å…¨ ä¸ç„¶å¯èƒ½ä¼šå¯¼è‡´checkä¸¤ä¸ªé˜Ÿåˆ—çš„å–æ•°æ®ä¸ä¸€è‡´æœ‰é—®é¢˜","like_count":0},{"had_liked":false,"id":103148,"user_name":"ä½•å¦¨","can_delete":false,"product_type":"c1","uid":1385377,"ip_address":"","ucode":"EC3983BFF7992A","user_header":"https://static001.geekbang.org/account/avatar/00/15/23/a1/b08f3ee7.jpg","comment_is_top":false,"comment_ctime":1560387946,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1560387946","product_id":100023901,"comment_content":"æˆ‘æƒ³é—®æœ€åä¸€ä¸ªä»£ç ä¾‹å­åœ¨æŸ¥è¯¢çš„æ—¶å€™ä¸ºä»€ä¹ˆä¸ç”¨çº¿ç¨‹æ± äº†å‘¢","like_count":0},{"had_liked":false,"id":100003,"user_name":"é˜¿è¾‰","can_delete":false,"product_type":"c1","uid":1266788,"ip_address":"","ucode":"A7EF42A10E2599","user_header":"https://static001.geekbang.org/account/avatar/00/13/54/64/8f3d000a.jpg","comment_is_top":false,"comment_ctime":1559383878,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1559383878","product_id":100023901,"comment_content":"æŸ¥è¯¢è®¢å•ä¸æŸ¥è¯¢æ´¾é€å•åšä¸åˆ°å¹¶è¡Œå§","like_count":0},{"had_liked":false,"id":99903,"user_name":"seanğŸ‘¿","can_delete":false,"product_type":"c1","uid":1040670,"ip_address":"","ucode":"88BEBC620C0713","user_header":"https://static001.geekbang.org/account/avatar/00/0f/e1/1e/1327891b.jpg","comment_is_top":false,"comment_ctime":1559355948,"is_pvip":false,"replies":[{"id":"36137","content":"PPTğŸ˜‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1559542066,"ip_address":"","comment_id":99903,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1559355948","product_id":100023901,"comment_content":" é—®ä¸ªé¢˜å¤–çš„é—®é¢˜ï¼Œè€å¸ˆæ˜¯ç”¨ä»€ä¹ˆè½¯ä»¶æ¥ç”»ä»€ä¹ˆçš„å›¾çš„å‘¢","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":452315,"discussion_content":"PPTğŸ˜‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1559542066,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":99231,"user_name":"linsen","can_delete":false,"product_type":"c1","uid":1187010,"ip_address":"","ucode":"1DBBBA0988DB63","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/05Wiazxo0OS5w9KdJ4OQAe3ezwaCXNY4DGoE0noPFzXtUhOGejgGKFR6WmMxr0KcEGOSahnjbOwxPSib88h0E6zA/132","comment_is_top":false,"comment_ctime":1559179944,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1559179944","product_id":100023901,"comment_content":"ä¸ºä»€ä¹ˆå¤§å®¶éƒ½è¯´å¦‚æœçº¿ç¨‹æ± å¤§å°ä¸ä¸º1çš„è¯ä¼šå–åˆ°é”™ä¹±çš„æ•°æ®å‘¢ï¼Œæˆ‘çš„ç†è§£æ˜¯ç”±äºCyclicBarrierçš„æ§åˆ¶ï¼Œè¿™ä¸¤ä¸ªé˜Ÿåˆ—æ”¾å…¥å…ƒç´ çš„æ­¥è°ƒåº”è¯¥æ˜¯ä¸€è‡´çš„ï¼Œåªæœ‰ä¸¤ä¸ªé˜Ÿåˆ—éƒ½æ”¾å…¥äº†ä¸€ä¸ªå…ƒç´ ï¼Œæ‰ä¼šæ‰§è¡Œå›è°ƒå‡½æ•°ï¼Œåªæœ‰å›è°ƒå‡½æ•°æ‰§è¡Œå®Œæˆä¹‹åæ‰ä¼šå”¤é†’ä¸¤ä¸ªå¾€é˜Ÿåˆ—æ”¾å…¥å…ƒç´ çš„çº¿ç¨‹ï¼Œä¸ä¼šé€ æˆä¸€ä¸ªé˜Ÿåˆ—é‡Œé¢çš„å…ƒç´ å¤šæ”¾äº†ï¼Œä¸€ä¸ªé˜Ÿåˆ—é‡Œé¢çš„å…ƒç´ å°‘æ”¾çš„åœºæ™¯å•Šï¼Œæ±‚è§£ç­”","like_count":0},{"had_liked":false,"id":96651,"user_name":"Geek_e6f3ec","can_delete":false,"product_type":"c1","uid":1360738,"ip_address":"","ucode":"A0ACE49CD3F9BB","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eotuhVFN9phZnUxxXueAm8rDDibjIkj0L8W7VojYRpSeXwHtDSgLW3SdrNjMQy0AcOUuMmTAQSyO3g/132","comment_is_top":false,"comment_ctime":1558484459,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1558484459","product_id":100023901,"comment_content":"çœ‹äº†undifinedçš„è¯„è®ºæœ‰ä¸€ç‚¹ç†è§£ï¼Œ å¦‚æœè£…è¿”å›å•çš„æ˜¯queueé˜Ÿåˆ—çº¿ç¨‹æ± å¯ä»¥æœ‰å¤šä¸ªå—ï¼Ÿ","like_count":0},{"had_liked":false,"id":96098,"user_name":"å°å°å°‘å¹´","can_delete":false,"product_type":"c1","uid":1446717,"ip_address":"","ucode":"BCBEC92B9DFA85","user_header":"https://static001.geekbang.org/account/avatar/00/16/13/3d/63bab08c.jpg","comment_is_top":false,"comment_ctime":1558329824,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1558329824","product_id":100023901,"comment_content":"è¿™ç¯‡å†™çš„çœŸçš„å¥½","like_count":0},{"had_liked":false,"id":90119,"user_name":"æ­£ä¹‰æŸ”æƒ…æ°¸åœ¨","can_delete":false,"product_type":"c1","uid":1385762,"ip_address":"","ucode":"41BAA3827C8FF5","user_header":"https://static001.geekbang.org/account/avatar/00/15/25/22/80bb0990.jpg","comment_is_top":false,"comment_ctime":1556419462,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1556419462","product_id":100023901,"comment_content":"è¿™ç¯‡æ–‡ç« ä¸¾çš„äº‹ä¾‹ç‰¹åˆ«ç¬¦åˆå¼€å‘è¿‡ç¨‹ä¸­çš„è®¸å¤šåœºæ™¯.éå¸¸ç²¾å½©,å—æ•™äº†","like_count":0},{"had_liked":false,"id":87499,"user_name":"æ‚Ÿç©º","can_delete":false,"product_type":"c1","uid":1451125,"ip_address":"","ucode":"F9DFBA74B35B40","user_header":"https://static001.geekbang.org/account/avatar/00/16/24/75/808ac160.jpg","comment_is_top":false,"comment_ctime":1555628688,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1555628688","product_id":100023901,"comment_content":"æ¶ˆè´¹çš„é€Ÿåº¦ä¸ç”Ÿäº§çš„é€Ÿåº¦åŒ¹é…ã€‚<br>å¦‚æœè¿™ä¸ªå€¼è®¾ç½®æˆå›ºå®šçš„2ä¼šé€ æˆæ¶ˆè´¹è€…çº¿ç¨‹çš„æµªè´¹ã€‚<br>å¦‚æœæ˜¯ä¸€ä¸ªéå›ºå®šçš„çº¿ç¨‹æ± ï¼Œå®é™…ä¹Ÿåªæœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨è¿è¡Œ","like_count":0},{"had_liked":false,"id":87475,"user_name":"JGOS","can_delete":false,"product_type":"c1","uid":1237592,"ip_address":"","ucode":"46A905A169408F","user_header":"https://static001.geekbang.org/account/avatar/00/12/e2/58/2468a5e9.jpg","comment_is_top":false,"comment_ctime":1555603495,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1555603495","product_id":100023901,"comment_content":"è€å¸ˆè®²çš„çœŸçš„å¥½ï¼","like_count":0},{"had_liked":false,"id":85908,"user_name":"å¤šè¥„ä¸¸","can_delete":false,"product_type":"c1","uid":1074310,"ip_address":"","ucode":"1AA1497C5A293C","user_header":"https://static001.geekbang.org/account/avatar/00/10/64/86/f5a9403a.jpg","comment_is_top":false,"comment_ctime":1555290997,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1555290997","product_id":100023901,"comment_content":"æ—¥å¸¸æ‰“å¡ï¼ŒæœŸå¾…è€å¸ˆåç»­æ›´ç²¾å½©çš„è®²è§£ï¼","like_count":0},{"had_liked":false,"id":85454,"user_name":"Corner","can_delete":false,"product_type":"c1","uid":1446316,"ip_address":"","ucode":"7862D593172536","user_header":"https://static001.geekbang.org/account/avatar/00/16/11/ac/9cc5e692.jpg","comment_is_top":false,"comment_ctime":1555063317,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1555063317","product_id":100023901,"comment_content":"è®¢å•é˜Ÿåˆ—å’Œæ´¾é€å•é˜Ÿåˆ—å–å€¼é‚£é‡Œèƒ½å¦åŠ ä¸€ä¸ªé”å‘¢ï¼Ÿè¿™æ ·å°±å¯ä»¥ä¿è¯å¤šçº¿ç¨‹éœ€è¦æ“ä½œä¸¤ä¸ªé˜Ÿåˆ—çš„ä¸åŒæ­¥é—®é¢˜äº†ã€‚","like_count":0},{"had_liked":false,"id":85121,"user_name":"å…«æˆ’","can_delete":false,"product_type":"c1","uid":1113109,"ip_address":"","ucode":"15774D7D5F1E53","user_header":"https://static001.geekbang.org/account/avatar/00/10/fc/15/a1f83883.jpg","comment_is_top":false,"comment_ctime":1554984505,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554984505","product_id":100023901,"comment_content":"æˆ‘ä¸å¤ªèµåŒâ€œundifinedâ€åŒå­¦çš„è¯´æ³•ã€‚æ­¤å¤„çš„çº¿ç¨‹æ± æ˜¯ç”¨æ¥æ‰§è¡Œcheck()æ–¹æ³•ï¼Œå’Œè®¢å•ã€æ´¾é€å•çš„æŸ¥è¯¢æ²¡æœ‰å…³ç³»ï¼Œæ‰€ä»¥æˆ‘çš„è§‚ç‚¹æ˜¯å›ºå®šçº¿ç¨‹æ± æ²¡æœ‰å¿…è¦ã€‚","like_count":0},{"had_liked":false,"id":85083,"user_name":"é“","can_delete":false,"product_type":"c1","uid":1324160,"ip_address":"","ucode":"851A0AD751D317","user_header":"https://static001.geekbang.org/account/avatar/00/14/34/80/30e9ae41.jpg","comment_is_top":false,"comment_ctime":1554974841,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554974841","product_id":100023901,"comment_content":"å°±è¿™ä¸ªé¢˜ç›®è€Œè¨€ï¼Œæˆ‘è§‰å¾—éœ€è¦ä¸€ä¸ªå›ºå®šä¸ºä¸€çš„çº¿ç¨‹ã€‚å¯¹è´¦æ“ä½œæ˜¯é€šè¿‡å›è°ƒè¿›è¡Œçš„ã€‚è™½ç„¶ä»æ—¶é—´ä¸Šè®²ï¼Œå¯¹è´¦å›è°ƒè‚¯å®šæ˜¯æœ‰å…ˆåé¡ºåºï¼Œæ¯•ç«Ÿæ˜¯æŒ‰ç…§ä¸¤ä¸ªçº¿ç¨‹éƒ½æŸ¥å®Œæ•°æ®è¿™ä¸ªé¡ºåºè°ƒç”¨å›è°ƒå‡½æ•°ã€‚ä½†æ˜¯è¿™æ ·ï¼Œå›è°ƒé€»è¾‘å°±æ˜¯å¤šçº¿ç¨‹çš„ï¼Œæ²¡æœ‰é¡ºåºã€‚ä¸èƒ½æŒ‡æœ›ä¸šåŠ¡æ¥ä¿è¯å§ã€‚ã€‚ã€‚ã€‚ã€‚æˆ‘ä»¬è¦å‡å®šå›è°ƒè°ƒç”¨çš„æ—¶æœºä¸ç¡®å®š<br><br>æœ‰æƒ³è¿‡å¯¹å›è°ƒå‡½æ•°åŠ é”ï¼Œè¿™æ ·èƒ½ä¿è¯é¡ºåºã€‚åº”è¯¥ä¹Ÿå¯ä»¥","like_count":0},{"had_liked":false,"id":85052,"user_name":"Smile","can_delete":false,"product_type":"c1","uid":1125189,"ip_address":"","ucode":"0617032294DC43","user_header":"https://static001.geekbang.org/account/avatar/00/11/2b/45/e8f64725.jpg","comment_is_top":false,"comment_ctime":1554967692,"is_pvip":false,"replies":[{"id":"30507","content":"åªå…è®¸ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œcheckall","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1554984294,"ip_address":"","comment_id":85052,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1554967692","product_id":100023901,"comment_content":"æ–‡ç« å¾ˆç”ŸåŠ¨ï¼Œä½†æ˜¯æœ‰å‡ ä¸ªé—®é¢˜æƒ³è¯·æ•™ä¸€ä¸‹è€å¸ˆï¼Œéƒ½æ˜¯å¯¹äºæœ€åçš„æ¡ˆä¾‹ï¼š<br>1. å¦‚æœæœ‰ä¸¤ä¸ªçº¿ç¨‹éƒ½æ‰§è¡Œï¼Œcheckallæ–¹æ³•ï¼Œå‡å¦‚ä¸¤ä¸ªçº¿ç¨‹éƒ½æ‰§è¡Œå®Œäº†doOrder æ–¹æ³•ï¼Œè¿™æ ·è°ƒç”¨å›è°ƒå‡½æ•°ï¼Œå°±ä¼šå­˜åœ¨é˜Ÿåˆ—dosä¸­æ²¡æœ‰æ•°æ®çš„é—®é¢˜ï¼Œä¸çŸ¥é“ç†è§£æ˜¯å¦æ­£ç¡®ï¼Œè§£å†³æ–¹æ³•ï¼Œæ˜¯åœ¨ç±»ä¸­å®šä¹‰ä¸€ä¸ªç”±ä¸¤ä¸ªçº¿ç¨‹çš„å›ºå®šçº¿ç¨‹æ± ä»¥åŠå¯¹checkallæ–¹æ³•è¿›è¡ŒåŠ é”ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹è·å–åˆ°äº†çº¿ç¨‹æ± ä¹‹åï¼Œå¦å¤–ä¸€ä¸ªçº¿ç¨‹åªèƒ½ç­‰åˆ°é‡Šæ”¾åæ‰èƒ½ä½¿ç”¨ï¼Œè¿™æ ·ä¿è¯äº†ä¸¤ä¸ªé˜Ÿåˆ—ä¸­æ•°æ®çš„åŒæ­¥<br><br>å¯¹äºæ€è€ƒé¢˜ï¼Œæœ‰å¿…è¦çš„ï¼Œæ„Ÿè§‰å’Œæˆ‘å½¢å®¹çš„é—®é¢˜æ˜¯ä¸€æ ·çš„ï¼Œé€šè¿‡çº¿ç¨‹æ± æ¥çº¦æŸï¼Œåªæœ‰ä¸€ä¸ªçº¿ç¨‹æ¥æ‰§è¡Œå›è°ƒæ–¹æ³•ï¼Œä¸ä¼šå­˜åœ¨å¹¶å‘é—®é¢˜","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446541,"discussion_content":"åªå…è®¸ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œcheckall","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554984294,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":85027,"user_name":"å¼ å¤©å±¹","can_delete":false,"product_type":"c1","uid":1477612,"ip_address":"","ucode":"8BD6BD6DCF0F4F","user_header":"https://static001.geekbang.org/account/avatar/00/16/8b/ec/dc03f5ad.jpg","comment_is_top":false,"comment_ctime":1554962103,"is_pvip":false,"replies":[{"id":"30593","content":"AQSå¤ªåº•å±‚äº†ï¼Œäº†è§£å®ƒå¯¹äºåº”ç”¨æ¥è¯´åŸºæœ¬æ²¡å½±å“ï¼Œè¿™ä¸ªä¸“æ å®šä½è¿˜æ˜¯æ¯”è¾ƒåˆçº§çš„ã€‚ç°åœ¨å¸‚é¢ä¸Šæœ‰å¾ˆå¤šä¹¦ï¼Œéƒ½è®²çš„æŒºå¥½çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1554999358,"ip_address":"","comment_id":85027,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1554962103","product_id":100023901,"comment_content":"è€å¸ˆï¼Œæˆ‘çœ‹CyclicBarrieræºç æ¯”è¾ƒç®€å•ï¼Œå°±æ˜¯ä¸ªlock+condition<br>CountDownLatchå´æ˜¯å®ç°äº†AQSï¼Œåé¢ä¼šä¸“é—¨è®²ä¸€è®²AQSå—","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446535,"discussion_content":"AQSå¤ªåº•å±‚äº†ï¼Œäº†è§£å®ƒå¯¹äºåº”ç”¨æ¥è¯´åŸºæœ¬æ²¡å½±å“ï¼Œè¿™ä¸ªä¸“æ å®šä½è¿˜æ˜¯æ¯”è¾ƒåˆçº§çš„ã€‚ç°åœ¨å¸‚é¢ä¸Šæœ‰å¾ˆå¤šä¹¦ï¼Œéƒ½è®²çš„æŒºå¥½çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554999358,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":85026,"user_name":"ack","can_delete":false,"product_type":"c1","uid":1440912,"ip_address":"","ucode":"69CA1233EEA8E2","user_header":"https://static001.geekbang.org/account/avatar/00/15/fc/90/c9df0459.jpg","comment_is_top":false,"comment_ctime":1554960481,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554960481","product_id":100023901,"comment_content":"éœ€è¦ï¼Œä¸ç„¶å¤šçº¿ç¨‹å¹¶å‘è°ƒç”¨removeçš„è¯ï¼Œä¸èƒ½ä¿è¯ä¸€å¯¹ä¸€å–å‡ºæ•°æ®","like_count":0},{"had_liked":false,"id":85019,"user_name":"æ‹’ç»","can_delete":false,"product_type":"c1","uid":1335155,"ip_address":"","ucode":"CB0264C4D3FE17","user_header":"https://static001.geekbang.org/account/avatar/00/14/5f/73/bb3dc468.jpg","comment_is_top":false,"comment_ctime":1554958002,"is_pvip":false,"replies":[{"id":"30517","content":"ä¸ä¼šåå¤åˆ›å»ºï¼ŒåŒæ—¶ä¸ºäº†è®²èµ·æ¥æ–¹ä¾¿","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1554985148,"ip_address":"","comment_id":85019,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1554958002","product_id":100023901,"comment_content":"è€å¸ˆï¼Œä¸ºä»€ä¹ˆcheckAllï¼ˆï¼‰ä¸­çš„çº¿ç¨‹ä¸ä½¿ç”¨çº¿ç¨‹æ± å‘¢","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446532,"discussion_content":"ä¸ä¼šåå¤åˆ›å»ºï¼ŒåŒæ—¶ä¸ºäº†è®²èµ·æ¥æ–¹ä¾¿","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554985148,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":84971,"user_name":"Mr.Wood","can_delete":false,"product_type":"c1","uid":1482206,"ip_address":"","ucode":"348E13CFCEDC3D","user_header":"https://static001.geekbang.org/account/avatar/00/16/9d/de/1b946a63.jpg","comment_is_top":false,"comment_ctime":1554950461,"is_pvip":false,"replies":[{"id":"30515","content":"æ•ˆç‡è¿˜æ˜¯è¦çœ‹å¹¶è¡Œåº¦","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1554984766,"ip_address":"","comment_id":84971,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1554950461","product_id":100023901,"comment_content":"æˆ‘è§‰å¾—æ•ˆç‡è¿˜ä¸æ˜¯æœ€é«˜çš„ï¼Œä½¿ç”¨é˜»å¡é˜Ÿåˆ—çš„è¯ï¼Œåœ¨check()å¤„è¿›è¡Œå¹¶å‘å¤„ç†ï¼Œæ•ˆç‡åº”è¯¥å¯ä»¥æ›´é«˜ã€‚å½“ç„¶ï¼Œè¿™æ ·çš„è¯æ¯æ¬¡ä»2ä¸ªé˜Ÿåˆ—ä¸­å¼¹æ•°æ®å‡ºæ¥å¿…é¡»ä¿è¯åŒæ­¥æ“ä½œï¼Œå¹¶ä¸”åŒæ­¥å—ä¸­å¿…é¡»ä¿æŒæ£€æŸ¥2ä¸ªé˜Ÿåˆ—çš„å¤§å°æ˜¯å¦ä¸€è‡´ã€‚","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446513,"discussion_content":"æ•ˆç‡è¿˜æ˜¯è¦çœ‹å¹¶è¡Œåº¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554984766,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":84949,"user_name":"æ™“æ°","can_delete":false,"product_type":"c1","uid":1441546,"ip_address":"","ucode":"1174C88EEBF8A6","user_header":"https://static001.geekbang.org/account/avatar/00/15/ff/0a/12faa44e.jpg","comment_is_top":false,"comment_ctime":1554948779,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554948779","product_id":100023901,"comment_content":"æœ‰å¿…è¦ï¼Œå› ä¸ºçº¿ç¨‹T1ï¼ŒT2å’ŒT3å¿…é¡»ä¸€ä¸€å¯¹åº”ï¼Œæ‰èƒ½ä¿è¯é¡ºåºä¸ä¼šé”™ä¹±ï¼Œå¦‚æœä½¿ç”¨çš„ä¸æ˜¯å›ºå®šä¸€ä¸ªçº¿ç¨‹çš„çº¿ç¨‹æ± ï¼Œå¯èƒ½ä¼šå¯¼è‡´å¤šä¸ªçº¿ç¨‹ä¸€èµ·æ‰§è¡Œcheckæ–¹æ³•ï¼Œè¿™æ ·ä»é˜Ÿåˆ—é‡Œé¢å–å‡ºçš„è®¢å•å¯èƒ½ä¸æ˜¯ä¸€ä¸€å¯¹åº”çš„","like_count":0},{"had_liked":false,"id":84926,"user_name":"Lemon","can_delete":false,"product_type":"c1","uid":1155474,"ip_address":"","ucode":"FED3B7D2931152","user_header":"https://static001.geekbang.org/account/avatar/00/11/a1/92/ad27079c.jpg","comment_is_top":false,"comment_ctime":1554946154,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554946154","product_id":100023901,"comment_content":"ä»Šå¤©çš„åˆ†äº«æœ‰æ„æ€ğŸ‘<br>æœ‰æ„ä¹‰ï¼Œé¿å…é‡å¤åˆ›å»ºçº¿ç¨‹","like_count":0},{"had_liked":false,"id":84925,"user_name":"ç”„çš„çŒ›å£«","can_delete":false,"product_type":"c1","uid":1066343,"ip_address":"","ucode":"1BACE91A1F77FE","user_header":"https://static001.geekbang.org/account/avatar/00/10/45/67/d96a32a0.jpg","comment_is_top":false,"comment_ctime":1554945913,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554945913","product_id":100023901,"comment_content":"ä»Šå¤©è¯¾ç¨‹æ€è·¯æ¸…æ™°ï¼Œå®¹æ˜“ç†è§£æ¥å—ã€‚å€¼å¾—å­¦ä¹ è¿™ä¸ªè¯¾ç¨‹æ€è·¯","like_count":0},{"had_liked":false,"id":84918,"user_name":"å›å“¥èŠæŠ€æœ¯","can_delete":false,"product_type":"c1","uid":1325816,"ip_address":"","ucode":"2C9A22BCE4C79E","user_header":"https://static001.geekbang.org/account/avatar/00/14/3a/f8/c1a939e7.jpg","comment_is_top":false,"comment_ctime":1554945356,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554945356","product_id":100023901,"comment_content":"èµæˆè¥¿è¥¿å¼—ä¸å¡Â·çš„è§‚ç‚¹","like_count":0},{"had_liked":false,"id":84917,"user_name":"å‘¨æ²»æ…§","can_delete":false,"product_type":"c1","uid":1335293,"ip_address":"","ucode":"7D56C4E66BEE17","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKR3ibELhjgVicCNShZCBwvaDxibnzibggG4wUzVkS2mkDxUBZyIs87nDEdJ7PiahJBVoZcuhQ84RxAziag/132","comment_is_top":false,"comment_ctime":1554945341,"is_pvip":false,"replies":[{"id":"30847","content":"æºå¤´éƒ½æ˜¯è®¢å•ï¼Œæ´¾é€å•éƒ½æœ‰ä¸€ä¸ªå¤–é”®æ˜¯è®¢å•IDï¼Œéƒ½æ˜¯ç”¨è®¢å•IDæŸ¥ï¼Œæ‰€ä»¥ä¸å­˜åœ¨åŒä¸€åŒºé—´çš„é—®é¢˜","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1555241945,"ip_address":"","comment_id":84917,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1554945341","product_id":100023901,"comment_content":"è®¢å•é˜Ÿåˆ—å’Œæ´¾é€é˜Ÿåˆ—åœ¨æ¯”å¯¹æ•°æ®çš„è¿‡ç¨‹ä¸­å¯èƒ½æ˜¯134 1234è¿™æ ·å°±ä¸æ˜¯removeï¼ˆ0ï¼‰çš„æ“ä½œäº†ã€‚è¿˜æœ‰ä¸ªé—®é¢˜è¯·æ•™ä¸€ä¸‹è€å¸ˆï¼Œå½“æ¯å¤©éœ€è¦å¯¹è´¦çš„è®¢å•å’Œæ´¾é€é˜Ÿåˆ—æ•°æ®éƒ½è¾ƒå¤§çš„æ—¶å€™ï¼Œæ€ä¹ˆåˆé€‚çš„åˆ†æ‰¹é‡å–å‡ºidéƒ½åœ¨åŒä¸€ä¸ªåŒºé—´çš„æ•°æ®å»å¯¹è´¦ã€‚","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446494,"discussion_content":"æºå¤´éƒ½æ˜¯è®¢å•ï¼Œæ´¾é€å•éƒ½æœ‰ä¸€ä¸ªå¤–é”®æ˜¯è®¢å•IDï¼Œéƒ½æ˜¯ç”¨è®¢å•IDæŸ¥ï¼Œæ‰€ä»¥ä¸å­˜åœ¨åŒä¸€åŒºé—´çš„é—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555241945,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":84914,"user_name":"zhangtnty","can_delete":false,"product_type":"c1","uid":1180553,"ip_address":"","ucode":"3C9A14BD7CF432","user_header":"https://static001.geekbang.org/account/avatar/00/12/03/89/e1621a01.jpg","comment_is_top":false,"comment_ctime":1554945113,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554945113","product_id":100023901,"comment_content":"ç‹è€å¸ˆå¥½ï¼Œä»Šå¤©åˆ†äº«æœ‰å®é™…æ¡ˆä¾‹å’Œè§£å†³æ–¹æ³•æµç¨‹ï¼ŒæœŸå¾…ä»¥ååˆ†äº«éƒ½å¯ä»¥è§£å†³æ¡ˆä¾‹æ–¹å¼ã€‚<br>å¯¹äºé¢˜ä¸­çš„çº¿ç¨‹æ± 1è¿˜æ˜¯æœ‰å¿…è¦ã€‚å¦‚æœæ˜¯å¤šä¸ªçº¿ç¨‹æ± ï¼Œå¯èƒ½ä¼šå‡ºç°å‡ºé˜Ÿçš„ä¹±åºã€‚èƒ½è§£å†³å‡ºé˜Ÿä¹±åºï¼Œå°±å¾—é˜»å¡éƒ¨åˆ†çº¿ç¨‹ï¼Œæ•ˆç‡åº”è¯¥è¿˜æ˜¯åœ¨ä¼¯ä»²ä¹‹é—´ã€‚","like_count":0},{"had_liked":false,"id":84892,"user_name":"ä¸€é“é˜³å…‰","can_delete":false,"product_type":"c1","uid":1239557,"ip_address":"","ucode":"F35207CCCEC6E2","user_header":"https://static001.geekbang.org/account/avatar/00/12/ea/05/c0d8014d.jpg","comment_is_top":false,"comment_ctime":1554943416,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554943416","product_id":100023901,"comment_content":"æœ‰å¿…è¦ï¼Œé¿å…æ¶ˆè´¹è€…çº¿ç¨‹å¤šæ¬¡åˆ›å»ºï¼Œæ¶ˆè€—èµ„æºã€‚","like_count":0},{"had_liked":false,"id":84878,"user_name":"å¼ å¾·","can_delete":false,"product_type":"c1","uid":1101929,"ip_address":"","ucode":"31FE63E8725EFC","user_header":"https://static001.geekbang.org/account/avatar/00/10/d0/69/5dbdc245.jpg","comment_is_top":false,"comment_ctime":1554942706,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554942706","product_id":100023901,"comment_content":"æ„Ÿè§‰ä»Šå¤©çš„è¿™ä¸ªåœºæ™¯çœŸæ£’  æ„Ÿè§‰åˆå­¦åˆ°äº†å¥½å¤š  æ¯æ¬¡æˆ‘éƒ½æ˜¯å¬ä¸‰éå·¦å³æ‰èƒ½ç†è§£ğŸ˜Š","like_count":0},{"had_liked":false,"id":84877,"user_name":"WL","can_delete":false,"product_type":"c1","uid":1173771,"ip_address":"","ucode":"6277DCD776B87E","user_header":"https://static001.geekbang.org/account/avatar/00/11/e9/0b/1171ac71.jpg","comment_is_top":false,"comment_ctime":1554942694,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554942694","product_id":100023901,"comment_content":"æˆ‘æ„Ÿè§‰ç”¨CyclicBarrierç”¨ä¸€ä¸ªå›ºå®šå¤§å°çš„çº¿ç¨‹æ± å¥½åƒæ²¡å•¥ç”¨, ç›´æ¥ä¸»çº¿ç¨‹æ‰§è¡Œä¸€ä¸‹ä¸å°±å¯ä»¥äº†, å› ä¸ºä»è®¢å•è¡¨å’Œè¿å•è¡¨ä¸­å–å‡ºçš„æ•°æ®çš„æ“ä½œå·²ç»ç”¨å•ç‹¬çº¿ç¨‹å®ç°äº†.","like_count":0},{"had_liked":false,"id":84874,"user_name":"ç½—æ´²","can_delete":false,"product_type":"c1","uid":1263417,"ip_address":"","ucode":"68133E38A25C17","user_header":"https://static001.geekbang.org/account/avatar/00/13/47/39/0ce1aa62.jpg","comment_is_top":false,"comment_ctime":1554942451,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554942451","product_id":100023901,"comment_content":"æœ‰å¿…è¦é™åˆ¶åªæœ‰ä¸€ä¸ªçº¿ç¨‹çš„çº¿ç¨‹æ± ï¼Œä¸»è¦æ˜¯ä¸ºäº†å›è°ƒå‡½æ•°çš„çº¿ç¨‹å®‰å…¨ï¼Œå› ä¸ºå¯¹äºcheck æ–¹æ³•æœ¬èº«æ¥è¯´å¹¶ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œè™½ç„¶æœ‰vector æ¥ä¿è¯é˜Ÿåˆ—ä¸­çš„æ“ä½œæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä½†æ˜¯æœ‰å¯èƒ½é€ æˆä¸¤ä¸ªé˜Ÿåˆ—å–å‡ºæ•°æ®ä¸åŒæ­¥çš„æƒ…å†µï¼Œå¦‚æœç”¨äº†å•çº¿ç¨‹ä¸²è¡Œå¯ä»¥é¿å…è¿™ä¸ªé—®é¢˜ã€‚","like_count":0},{"had_liked":false,"id":84868,"user_name":"å¿ƒä¸­æ— å‰‘","can_delete":false,"product_type":"c1","uid":1479311,"ip_address":"","ucode":"85C27AC7523EE4","user_header":"https://static001.geekbang.org/account/avatar/00/16/92/8f/0378e325.jpg","comment_is_top":false,"comment_ctime":1554941870,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554941870","product_id":100023901,"comment_content":"æˆ‘åœ¨æƒ³ï¼Œå›è°ƒé‡‡ç”¨å›ºå®šçº¿ç¨‹æ± ï¼Œå¹¶ä¸”è®¾ç½®æ ¸å¿ƒæ•°æ˜¯1ã€‚åŸå› ä¹Ÿè®¸è·Ÿ save(diff) æœ‰å…³ï¼Œä¸ºäº†ä¿è¯æ•°æ®ä¸€è‡´æ€§ã€‚saveæ“ä½œå¤±è´¥åï¼Œäº‹åŠ¡å›æ»šå—ï¼Ÿ ä¸€æ¡çº¿ç¨‹ä¸€ä¸ªäº‹åŠ¡ï¼Œä¸ç„¶saveè¿™ä¸€æ­¥å¦‚æœå‘ç”Ÿå¼‚å¸¸ï¼Œæ€ä¹ˆä¿è¯åŸå­æ€§å‘¢","like_count":0},{"had_liked":false,"id":84849,"user_name":"æ¨æ˜¥é¹","can_delete":false,"product_type":"c1","uid":1172056,"ip_address":"","ucode":"518F38232F97B5","user_header":"https://static001.geekbang.org/account/avatar/00/11/e2/58/8c8897c8.jpg","comment_is_top":false,"comment_ctime":1554935342,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554935342","product_id":100023901,"comment_content":"ä¸ºä»€ä¹ˆæœ€åä¸€ç§æƒ…å†µçš„çº¿ç¨‹æ± çš„çº¿ç¨‹æ•°é‡æ˜¯1å‘¢ï¼Ÿ","like_count":0}]}