{"id":11651,"title":"ç¬¬33è®² | åå°æœåŠ¡å‡ºç°æ˜æ˜¾â€œå˜æ…¢â€ï¼Œè°ˆè°ˆä½ çš„è¯Šæ–­æ€è·¯ï¼Ÿ","content":"<p>åœ¨æ—¥å¸¸å·¥ä½œä¸­ï¼Œåº”ç”¨æˆ–è€…ç³»ç»Ÿå‡ºç°æ€§èƒ½é—®é¢˜å¾€å¾€æ˜¯ä¸å¯é¿å…çš„ï¼Œé™¤äº†åœ¨æœ‰ä¸€å®šè§„æ¨¡çš„ITä¼ä¸šæˆ–è€…ä¸“æ³¨äºç‰¹å®šæ€§èƒ½é¢†åŸŸçš„ä¼ä¸šï¼Œå¯èƒ½å¤§å¤šæ•°å·¥ç¨‹å¸ˆå¹¶ä¸ä¼šæˆä¸ºä¸“èŒçš„æ€§èƒ½å·¥ç¨‹å¸ˆï¼Œä½†æ˜¯æŒæ¡åŸºæœ¬çš„æ€§èƒ½çŸ¥è¯†å’ŒæŠ€èƒ½ï¼Œå¾€å¾€æ˜¯æ—¥å¸¸å·¥ä½œçš„éœ€è¦ï¼Œå¹¶ä¸”ä¹Ÿæ˜¯å·¥ç¨‹å¸ˆè¿›é˜¶çš„å¿…è¦æ¡ä»¶ä¹‹ä¸€ï¼Œèƒ½å¦å®šä½å’Œè§£å†³æ€§èƒ½é—®é¢˜ä¹Ÿæ˜¯å¯¹ä½ çŸ¥è¯†ã€æŠ€èƒ½å’Œèƒ½åŠ›çš„æ£€éªŒã€‚</p>\n<p>ä»Šå¤©æˆ‘è¦é—®ä½ çš„é—®é¢˜æ˜¯ï¼Œ<span class=\"orange\">åå°æœåŠ¡å‡ºç°æ˜æ˜¾â€œå˜æ…¢â€ï¼Œè°ˆè°ˆä½ çš„è¯Šæ–­æ€è·¯ï¼Ÿ</span></p>\n<h2>å…¸å‹å›ç­”</h2>\n<p>é¦–å…ˆï¼Œéœ€è¦å¯¹è¿™ä¸ªé—®é¢˜è¿›è¡Œæ›´åŠ æ¸…æ™°çš„å®šä¹‰:</p>\n<ul>\n<li>\n<p>æœåŠ¡æ˜¯çªç„¶å˜æ…¢è¿˜æ˜¯é•¿æ—¶é—´è¿è¡Œåè§‚å¯Ÿåˆ°å˜æ…¢ï¼Ÿç±»ä¼¼é—®é¢˜æ˜¯å¦é‡å¤å‡ºç°ï¼Ÿ</p>\n</li>\n<li>\n<p>â€œæ…¢â€çš„å®šä¹‰æ˜¯ä»€ä¹ˆï¼Œæˆ‘èƒ½å¤Ÿç†è§£æ˜¯ç³»ç»Ÿå¯¹å…¶ä»–æ–¹é¢çš„è¯·æ±‚çš„ååº”å»¶æ—¶å˜é•¿å—?</p>\n</li>\n</ul>\n<p>ç¬¬äºŒï¼Œç†æ¸…é—®é¢˜çš„ç—‡çŠ¶ï¼Œè¿™æ›´ä¾¿äºå®šä½å…·ä½“çš„åŸå› ï¼Œæœ‰ä»¥ä¸‹ä¸€äº›æ€è·¯ï¼š</p>\n<ul>\n<li>\n<p>é—®é¢˜å¯èƒ½æ¥è‡ªäºJavaæœåŠ¡è‡ªèº«ï¼Œä¹Ÿå¯èƒ½ä»…ä»…æ˜¯å—ç³»ç»Ÿé‡Œå…¶ä»–æœåŠ¡çš„å½±å“ã€‚åˆå§‹åˆ¤æ–­å¯ä»¥å…ˆç¡®è®¤æ˜¯å¦å‡ºç°äº†æ„å¤–çš„ç¨‹åºé”™è¯¯ï¼Œä¾‹å¦‚æ£€æŸ¥åº”ç”¨æœ¬èº«çš„é”™è¯¯æ—¥å¿—ã€‚<br />\nå¯¹äºåˆ†å¸ƒå¼ç³»ç»Ÿï¼Œå¾ˆå¤šå…¬å¸éƒ½ä¼šå®ç°æ›´åŠ ç³»ç»Ÿçš„æ—¥å¿—ã€æ€§èƒ½ç­‰ç›‘æ§ç³»ç»Ÿã€‚ä¸€äº›Javaè¯Šæ–­å·¥å…·ä¹Ÿå¯ä»¥ç”¨äºè¿™ä¸ªè¯Šæ–­ï¼Œä¾‹å¦‚é€šè¿‡JFRï¼ˆ<a href=\"https://docs.oracle.com/javacomponents/jmc-5-4/jfr-runtime-guide/about.htm#JFRUH173\">Java Flight Recorder</<!-- [[[read_end]]] -->a>ï¼‰ï¼Œç›‘æ§åº”ç”¨æ˜¯å¦å¤§é‡å‡ºç°äº†æŸç§ç±»å‹çš„å¼‚å¸¸ã€‚<br />\nå¦‚æœæœ‰ï¼Œé‚£ä¹ˆå¼‚å¸¸å¯èƒ½å°±æ˜¯ä¸ªçªç ´ç‚¹ã€‚<br />\nå¦‚æœæ²¡æœ‰ï¼Œå¯ä»¥å…ˆæ£€æŸ¥ç³»ç»Ÿçº§åˆ«çš„èµ„æºç­‰æƒ…å†µï¼Œç›‘æ§CPUã€å†…å­˜ç­‰èµ„æºæ˜¯å¦è¢«å…¶ä»–è¿›ç¨‹å¤§é‡å ç”¨ï¼Œå¹¶ä¸”è¿™ç§å ç”¨æ˜¯å¦ä¸ç¬¦åˆç³»ç»Ÿæ­£å¸¸è¿è¡ŒçŠ¶å†µã€‚</p>\n</li>\n<li>\n<p>ç›‘æ§JavaæœåŠ¡è‡ªèº«ï¼Œä¾‹å¦‚GCæ—¥å¿—é‡Œé¢æ˜¯å¦è§‚å¯Ÿåˆ°Full GCç­‰æ¶åŠ£æƒ…å†µå‡ºç°ï¼Œæˆ–è€…æ˜¯å¦Minor GCåœ¨å˜é•¿ç­‰ï¼›åˆ©ç”¨jstatç­‰å·¥å…·ï¼Œè·å–å†…å­˜ä½¿ç”¨çš„ç»Ÿè®¡ä¿¡æ¯ä¹Ÿæ˜¯ä¸ªå¸¸ç”¨æ‰‹æ®µï¼›åˆ©ç”¨jstackç­‰å·¥å…·æ£€æŸ¥æ˜¯å¦å‡ºç°æ­»é”ç­‰ã€‚</p>\n</li>\n<li>\n<p>å¦‚æœè¿˜ä¸èƒ½ç¡®å®šå…·ä½“é—®é¢˜ï¼Œå¯¹åº”ç”¨è¿›è¡ŒProfilingä¹Ÿæ˜¯ä¸ªåŠæ³•ï¼Œä½†å› ä¸ºå®ƒä¼šå¯¹ç³»ç»Ÿäº§ç”Ÿä¾µå…¥æ€§ï¼Œå¦‚æœä¸æ˜¯éå¸¸å¿…è¦ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹å¹¶ä¸å»ºè®®åœ¨ç”Ÿäº§ç³»ç»Ÿè¿›è¡Œã€‚</p>\n</li>\n<li>\n<p>å®šä½äº†ç¨‹åºé”™è¯¯æˆ–è€…JVMé…ç½®çš„é—®é¢˜åï¼Œå°±å¯ä»¥é‡‡å–ç›¸åº”çš„è¡¥æ•‘æªæ–½ï¼Œç„¶åéªŒè¯æ˜¯å¦è§£å†³ï¼Œå¦åˆ™è¿˜éœ€è¦é‡å¤ä¸Šé¢éƒ¨åˆ†è¿‡ç¨‹ã€‚</p>\n</li>\n</ul>\n<h2>è€ƒç‚¹åˆ†æ</h2>\n<p>ä»Šå¤©æˆ‘é€‰æ‹©çš„æ˜¯ä¸€ä¸ªå¸¸è§çš„å¹¶ä¸”æ¯”è¾ƒè´´è¿‘å®é™…åº”ç”¨çš„çš„æ€§èƒ½ç›¸å…³é—®é¢˜ï¼Œæˆ‘æä¾›çš„å›ç­”åŒ…æ‹¬ä¸¤éƒ¨åˆ†ã€‚</p>\n<ul>\n<li>\n<p>åœ¨æ­£é¢å›ç­”ä¹‹å‰ï¼Œå…ˆæ¢è®¨æ›´åŠ ç²¾ç¡®çš„é—®é¢˜å®šä¹‰æ˜¯ä»€ä¹ˆã€‚æœ‰æ—¶å€™é¢è¯•å®˜å¹¶æ²¡æœ‰è¡¨è¾¾æ¸…æ¥šï¼Œæœ‰å¿…è¦ç¡®è®¤è‡ªå·±çš„ç†è§£æ­£ç¡®ï¼Œç„¶åå†æ·±å…¥å›ç­”ã€‚</p>\n</li>\n<li>\n<p>ä»ç³»ç»Ÿã€åº”ç”¨çš„ä¸åŒè§’åº¦ã€ä¸åŒå±‚æ¬¡ï¼Œé€æ­¥å°†é—®é¢˜åŸŸå°½é‡ç¼©å°ï¼Œéš”ç¦»å‡ºçœŸå®åŸå› ã€‚å…·ä½“æ­¥éª¤æœªå¿…åƒç¯‡ä¸€å¾‹ï¼Œåœ¨å¤„ç†è¿‡è¾ƒå¤šè¿™ç§é—®é¢˜ä¹‹åï¼Œç»éªŒä¼šä»¤ä½ çš„ç›´è§‰åˆ†å¤–æ•æ„Ÿã€‚</p>\n</li>\n</ul>\n<p>å¤§å¤šæ•°å·¥ç¨‹å¸ˆä¹Ÿè®¸å¹¶æ²¡æœ‰å…¨é¢çš„æ€§èƒ½é—®é¢˜è¯Šæ–­æœºä¼šï¼Œå¦‚æœè¢«é—®åˆ°ä¹Ÿä¸å¿…è¿‡äºç´§å¼ ï¼Œä½ å¯ä»¥å‘é¢è¯•å®˜å±•ç¤ºè¯Šæ–­é—®é¢˜çš„æ€è€ƒæ–¹å¼ï¼Œå±•ç°è‡ªå·±çš„çŸ¥è¯†å’Œç»¼åˆè¿ç”¨çš„èƒ½åŠ›ã€‚æ¥è§¦åˆ°ä¸€ä¸ªé™Œç”Ÿçš„é—®é¢˜ï¼Œé€šè¿‡æ²Ÿé€šï¼Œèƒ½å¤Ÿæ¡ç†æ¸…æ™°åœ°å°†æ’æŸ¥æ–¹æ¡ˆé€æ­¥ç¡®å®šä¸‹æ¥ï¼Œä¹Ÿæ˜¯èƒ½åŠ›çš„ä½“ç°ã€‚</p>\n<p>é¢è¯•å®˜å¯èƒ½ä¼šé’ˆå¯¹æŸä¸ªè§’åº¦çš„è¯Šæ–­æ·±å…¥è¯¢é—®ï¼Œå…¼é¡¾å·¥ä½œå’Œé¢è¯•çš„éœ€æ±‚ï¼Œæˆ‘ä¼šé’ˆå¯¹ä¸‹é¢ä¸€äº›æ–¹é¢è¿›è¡Œä»‹ç»ã€‚ç›®çš„æ˜¯è®©ä½ å¯¹æ€§èƒ½åˆ†ææœ‰ä¸ªæ•´ä½“çš„å°è±¡ï¼Œåœ¨é‡åˆ°ç‰¹å®šé¢†åŸŸé—®é¢˜æ—¶ï¼Œå³ä½¿ä¸çŸ¥é“å…·ä½“ç»†èŠ‚çš„å·¥å…·å’Œæ‰‹æ®µï¼Œè‡³å°‘ä¹Ÿå¯ä»¥æ‰¾åˆ°æ¢ç´¢ã€æŸ¥è¯¢çš„æ–¹å‘ã€‚</p>\n<ul>\n<li>\n<p>æˆ‘å°†ä»‹ç»ä¸šç•Œå¸¸è§çš„æ€§èƒ½åˆ†ææ–¹æ³•è®ºã€‚</p>\n</li>\n<li>\n<p>ä»ç³»ç»Ÿåˆ†æåˆ°JVMã€åº”ç”¨æ€§èƒ½åˆ†æï¼ŒæŠŠæ¡æ•´ä½“æ€è·¯å’Œä¸»è¦å·¥å…·ã€‚å¯¹äºçº¿ç¨‹çŠ¶æ€ã€JVMå†…å­˜ä½¿ç”¨ç­‰å¾ˆå¤šæ–¹é¢ï¼Œæˆ‘åœ¨ä¸“æ å‰é¢å·²ç»é™†é™†ç»­ç»­ä»‹ç»äº†å¾ˆå¤šï¼Œä»Šå¤©è¿™ä¸€è®²ä¹Ÿå¯ä»¥çœ‹ä½œæ˜¯èšç„¦æ€§èƒ½è§’åº¦çš„ä¸€ä¸ªå°ç»“ã€‚</p>\n</li>\n</ul>\n<p>å¦‚æœä½ æœ‰å…´è¶£è¿›è¡Œç³»ç»Ÿæ€§çš„å­¦ä¹ ï¼Œæˆ‘å»ºè®®å‚è€ƒCharlie Huntç¼–æ’°çš„ã€ŠJava Performanceã€‹æˆ–è€…Scott Oaksçš„ã€ŠJava Performanceï¼šThe Definitive Guideã€‹ã€‚å¦å¤–ï¼Œå¦‚æœä¸å¸Œæœ›å‡ºç°ç†è§£åå·®ï¼Œæœ€å¥½æ˜¯é˜…è¯»è‹±æ–‡ç‰ˆã€‚</p>\n<h2>çŸ¥è¯†æ‰©å±•</h2>\n<p>é¦–å…ˆï¼Œæˆ‘ä»¬æ¥äº†è§£ä¸€ä¸‹ä¸šç•Œæœ€å¹¿æ³›çš„æ€§èƒ½åˆ†ææ–¹æ³•è®ºã€‚</p>\n<p>æ ¹æ®ç³»ç»Ÿæ¶æ„ä¸åŒï¼Œåˆ†å¸ƒå¼ç³»ç»Ÿå’Œå¤§å‹å•ä½“åº”ç”¨ä¹Ÿå­˜åœ¨ç€æ€è·¯çš„åŒºåˆ«ï¼Œä¾‹å¦‚ï¼Œåˆ†å¸ƒå¼ç³»ç»Ÿçš„æ€§èƒ½ç“¶é¢ˆå¯èƒ½æ›´åŠ é›†ä¸­ã€‚ä¼ ç»Ÿæ„ä¹‰ä¸Šçš„æ€§èƒ½è°ƒä¼˜å¤§å¤šæ˜¯é’ˆå¯¹å•ä½“åº”ç”¨çš„è°ƒä¼˜ï¼Œä¸“æ çš„ä¾§é‡ç‚¹ä¹Ÿæ˜¯å¦‚æ­¤ï¼ŒCharlie Huntæ›¾å°†å…¶æ–¹æ³•è®ºæ€»ç»“ä¸ºä¸¤ç±»ï¼š</p>\n<ul>\n<li>\n<p>è‡ªä¸Šè€Œä¸‹ã€‚ä»åº”ç”¨çš„é¡¶å±‚ï¼Œé€æ­¥æ·±å…¥åˆ°å…·ä½“çš„ä¸åŒæ¨¡å—ï¼Œæˆ–è€…æ›´è¿‘ä¸€æ­¥çš„æŠ€æœ¯ç»†èŠ‚å•å…ƒï¼Œæ‰¾åˆ°å¯èƒ½çš„é—®é¢˜å’Œè§£å†³åŠæ³•ã€‚è¿™æ˜¯æœ€å¸¸è§çš„æ€§èƒ½åˆ†ææ€è·¯ï¼Œä¹Ÿæ˜¯å¤§å¤šæ•°å·¥ç¨‹å¸ˆçš„é€‰æ‹©ã€‚</p>\n</li>\n<li>\n<p>è‡ªä¸‹è€Œä¸Šã€‚ä»ç±»ä¼¼CPUè¿™ç§ç¡¬ä»¶åº•å±‚ï¼Œåˆ¤æ–­ç±»ä¼¼<a href=\"https://en.wikipedia.org/wiki/CPU_cache#Cache_miss\">Cache-Miss</a>ä¹‹ç±»çš„é—®é¢˜å’Œè°ƒä¼˜æœºä¼šï¼Œå‡ºå‘ç‚¹æ˜¯æŒ‡ä»¤çº§åˆ«ä¼˜åŒ–ã€‚è¿™å¾€å¾€æ˜¯ä¸“ä¸šçš„æ€§èƒ½å·¥ç¨‹å¸ˆæ‰èƒ½æŒæ¡çš„æŠ€èƒ½ï¼Œå¹¶ä¸”éœ€è¦ä¸“ä¸šå·¥å…·é…åˆï¼Œå¤§å¤šæ•°æ˜¯ç§»æ¤åˆ°æ–°çš„å¹³å°ä¸Šï¼Œæˆ–éœ€è¦æä¾›æè‡´æ€§èƒ½æ—¶æ‰ä¼šè¿›è¡Œã€‚</p>\n</li>\n</ul>\n<p>ä¾‹å¦‚ï¼Œå°†å¤§æ•°æ®åº”ç”¨ç§»æ¤åˆ°SPARCä½“ç³»ç»“æ„çš„ç¡¬ä»¶ä¸Šï¼Œéœ€è¦å¯¹æ¯”å’Œå°½é‡é‡Šæ”¾æ€§èƒ½æ½œåŠ›ï¼Œä½†åˆå¸Œæœ›å°½é‡ä¸æ”¹æºä»£ç ã€‚</p>\n<p>æˆ‘æ‰€ç»™å‡ºçš„å›ç­”ï¼Œé¦–å…ˆæ˜¯è¯•å›¾æ’é™¤åŠŸèƒ½æ€§é”™è¯¯ï¼Œç„¶åå°±æ˜¯å…¸å‹çš„è‡ªä¸Šè€Œä¸‹åˆ†ææ€è·¯ã€‚</p>\n<p>ç¬¬äºŒï¼Œæˆ‘ä»¬ä¸€èµ·æ¥çœ‹çœ‹è‡ªä¸Šè€Œä¸‹åˆ†æä¸­ï¼Œå„ä¸ªé˜¶æ®µçš„å¸¸è§å·¥å…·å’Œæ€è·¯ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå…·ä½“çš„å·¥å…·åœ¨ä¸åŒçš„æ“ä½œç³»ç»Ÿä¸Šå¯èƒ½åŒºåˆ«éå¸¸å¤§ã€‚</p>\n<p><strong>ç³»ç»Ÿæ€§èƒ½åˆ†æ</strong>ä¸­ï¼ŒCPUã€å†…å­˜å’ŒIOæ˜¯ä¸»è¦å…³æ³¨é¡¹ã€‚</p>\n<p>å¯¹äºCPUï¼Œå¦‚æœæ˜¯å¸¸è§çš„Linuxï¼Œå¯ä»¥å…ˆç”¨topå‘½ä»¤æŸ¥çœ‹è´Ÿè½½çŠ¶å†µï¼Œä¸‹å›¾æ˜¯æˆ‘æˆªå–çš„ä¸€ä¸ªçŠ¶æ€ã€‚<br />\n<img src=\"https://static001.geekbang.org/resource/image/3b/01/3b927b63bec67f99e8dd72860a292601.png?wh=645*150\" alt=\"\" /></p>\n<p>å¯ä»¥çœ‹åˆ°ï¼Œå…¶å¹³å‡è´Ÿè½½ï¼ˆload averageï¼‰çš„ä¸‰ä¸ªå€¼ï¼ˆåˆ†åˆ«æ˜¯1åˆ†é’Ÿã€5åˆ†é’Ÿã€15åˆ†é’Ÿï¼‰éå¸¸ä½ï¼Œå¹¶ä¸”æš‚æ—¶çœ‹å¹¶æ²¡æœ‰å‡é«˜è¿¹è±¡ã€‚å¦‚æœè¿™äº›æ•°å€¼éå¸¸é«˜ï¼ˆä¾‹å¦‚ï¼Œè¶…è¿‡50%ã€60%ï¼‰ï¼Œå¹¶ä¸”çŸ­æœŸå¹³å‡å€¼é«˜äºé•¿æœŸå¹³å‡å€¼ï¼Œåˆ™è¡¨æ˜è´Ÿè½½å¾ˆé‡ï¼›å¦‚æœè¿˜æœ‰å‡é«˜çš„è¶‹åŠ¿ï¼Œé‚£ä¹ˆå°±è¦éå¸¸è­¦æƒ•äº†ã€‚</p>\n<p>è¿›ä¸€æ­¥çš„æ’æŸ¥æœ‰å¾ˆå¤šæ€è·¯ï¼Œä¾‹å¦‚ï¼Œæˆ‘åœ¨ä¸“æ ç¬¬18è®²æ›¾ç»é—®è¿‡ï¼Œæ€ä¹ˆæ‰¾åˆ°æœ€è€—è´¹CPUçš„Javaçº¿ç¨‹ï¼Œç®€è¦ä»‹ç»æ­¥éª¤ï¼š</p>\n<ul>\n<li>åˆ©ç”¨topå‘½ä»¤è·å–ç›¸åº”pidï¼Œâ€œ-Hâ€ä»£è¡¨threadæ¨¡å¼ï¼Œä½ å¯ä»¥é…åˆgrepå‘½ä»¤æ›´ç²¾å‡†å®šä½ã€‚</li>\n</ul>\n<pre><code>top â€“H\n</code></pre>\n<ul>\n<li>ç„¶åè½¬æ¢æˆä¸º16è¿›åˆ¶ã€‚</li>\n</ul>\n<pre><code>printf &quot;%x&quot; your_pid\n</code></pre>\n<ul>\n<li>æœ€ååˆ©ç”¨jstackè·å–çš„çº¿ç¨‹æ ˆï¼Œå¯¹æ¯”ç›¸åº”çš„IDå³å¯ã€‚</li>\n</ul>\n<p>å½“ç„¶ï¼Œè¿˜æœ‰æ›´åŠ é€šç”¨çš„è¯Šæ–­æ–¹å‘ï¼Œåˆ©ç”¨vmstatä¹‹ç±»ï¼ŒæŸ¥çœ‹ä¸Šä¸‹æ–‡åˆ‡æ¢çš„æ•°é‡ï¼Œæ¯”å¦‚ä¸‹é¢å°±æ˜¯æŒ‡å®šæ—¶é—´é—´éš”ä¸º1ï¼Œæ”¶é›†10æ¬¡ã€‚</p>\n<pre><code>vmstat -1 -10\n</code></pre>\n<p>è¾“å‡ºå¦‚ä¸‹ï¼š<br />\n<img src=\"https://static001.geekbang.org/resource/image/ab/a0/abd28cb4a771365211e1a01d628213a0.png?wh=657*162\" alt=\"\" /></p>\n<p>å¦‚æœæ¯ç§’ä¸Šä¸‹æ–‡ï¼ˆcsï¼Œ<a href=\"https://en.wikipedia.org/wiki/Context_switch\">context switch</a>ï¼‰åˆ‡æ¢å¾ˆé«˜ï¼Œå¹¶ä¸”æ¯”ç³»ç»Ÿä¸­æ–­é«˜å¾ˆå¤šï¼ˆinï¼Œsystem <a href=\"https://en.wikipedia.org/wiki/Interrupt\"></a> <a href=\"https://en.wikipedia.org/wiki/Interrupt\">interrupt</a>ï¼‰ï¼Œå°±è¡¨æ˜å¾ˆæœ‰å¯èƒ½æ˜¯å› ä¸ºä¸åˆç†çš„å¤šçº¿ç¨‹è°ƒåº¦æ‰€å¯¼è‡´ã€‚å½“ç„¶è¿˜éœ€è¦åˆ©ç”¨<a href=\"https://linux.die.net/man/1/pidstat\">pidstat</a>ç­‰æ‰‹æ®µï¼Œè¿›è¡Œæ›´åŠ å…·ä½“çš„å®šä½ï¼Œæˆ‘å°±ä¸å†è¿›ä¸€æ­¥å±•å¼€äº†ã€‚</p>\n<p>é™¤äº†CPUï¼Œå†…å­˜å’ŒIOæ˜¯é‡è¦çš„æ³¨æ„äº‹é¡¹ï¼Œæ¯”å¦‚ï¼š</p>\n<ul>\n<li>\n<p>åˆ©ç”¨freeä¹‹ç±»æŸ¥çœ‹å†…å­˜ä½¿ç”¨ã€‚</p>\n</li>\n<li>\n<p>æˆ–è€…ï¼Œè¿›ä¸€æ­¥åˆ¤æ–­swapä½¿ç”¨æƒ…å†µï¼Œtopå‘½ä»¤è¾“å‡ºä¸­Virtä½œä¸ºè™šæ‹Ÿå†…å­˜ä½¿ç”¨é‡ï¼Œå°±æ˜¯ç‰©ç†å†…å­˜ï¼ˆResï¼‰å’Œswapæ±‚å’Œï¼Œæ‰€ä»¥å¯ä»¥åæ¨swapä½¿ç”¨ã€‚æ˜¾ç„¶ï¼ŒJVMæ˜¯ä¸å¸Œæœ›å‘ç”Ÿå¤§é‡çš„swapä½¿ç”¨çš„ã€‚</p>\n</li>\n<li>\n<p>å¯¹äºIOé—®é¢˜ï¼Œæ—¢å¯èƒ½å‘ç”Ÿåœ¨ç£ç›˜IOï¼Œä¹Ÿå¯èƒ½æ˜¯ç½‘ç»œIOã€‚ä¾‹å¦‚ï¼Œåˆ©ç”¨iostatç­‰å‘½ä»¤æœ‰åŠ©äºåˆ¤æ–­ç£ç›˜çš„å¥åº·çŠ¶å†µã€‚æˆ‘æ›¾ç»å¸®åŠ©è¯Šæ–­è¿‡JavaæœåŠ¡éƒ¨ç½²åœ¨å›½å†…çš„æŸäº‘å‚å•†æœºå™¨ä¸Šï¼Œå…¶åŸå› å°±æ˜¯IOè¡¨ç°è¾ƒå·®ï¼Œæ‹–ç´¯äº†æ•´ä½“æ€§èƒ½ï¼Œè§£å†³åŠæ³•å°±æ˜¯ç”³è¯·æ›¿æ¢äº†æœºå™¨ã€‚</p>\n</li>\n</ul>\n<p>è®²åˆ°è¿™é‡Œï¼Œå¦‚æœä½ å¯¹ç³»ç»Ÿæ€§èƒ½éå¸¸æ„Ÿå…´è¶£ï¼Œæˆ‘å»ºè®®å‚è€ƒ<a href=\"http://www.brendangregg.com/linuxperf.html\">Brendan Gregg</a>æä¾›çš„å®Œæ•´å›¾è°±ï¼Œæˆ‘æ‰€ä»‹ç»çš„åªèƒ½ç®—æ˜¯ä¹ç‰›ä¸€æ¯›ã€‚ä½†æˆ‘è¿˜æ˜¯å»ºè®®å°½é‡ç»“åˆå®é™…éœ€æ±‚ï¼Œå…å¾—è¿·å¤±åœ¨å…¶ä¸­ã€‚<br />\n<img src=\"https://static001.geekbang.org/resource/image/93/40/93aa8c4516fd2266472ca4eab1b0cc40.png?wh=822*546\" alt=\"\" /></p>\n<p>å¯¹äº<strong>JVMå±‚é¢çš„æ€§èƒ½åˆ†æ</strong>ï¼Œæˆ‘ä»¬å·²ç»ä»‹ç»è¿‡éå¸¸å¤šäº†ï¼š</p>\n<ul>\n<li>\n<p>åˆ©ç”¨JMCã€JConsoleç­‰å·¥å…·è¿›è¡Œè¿è¡Œæ—¶ç›‘æ§ã€‚</p>\n</li>\n<li>\n<p>åˆ©ç”¨å„ç§å·¥å…·ï¼Œåœ¨è¿è¡Œæ—¶è¿›è¡Œå †è½¬å‚¨åˆ†æï¼Œæˆ–è€…è·å–å„ç§è§’åº¦çš„ç»Ÿè®¡æ•°æ®ï¼ˆå¦‚<a href=\"https://docs.oracle.com/javase/7/docs/technotes/tools/share/jstat.html\">jstat</a> -gcutilåˆ†æGCã€å†…å­˜åˆ†å¸¦ç­‰ï¼‰ã€‚</p>\n</li>\n<li>\n<p>GCæ—¥å¿—ç­‰æ‰‹æ®µï¼Œè¯Šæ–­Full GCã€Minor GCï¼Œæˆ–è€…å¼•ç”¨å †ç§¯ç­‰ã€‚</p>\n</li>\n</ul>\n<p>è¿™é‡Œå¹¶ä¸å­˜åœ¨æ”¾ä¹‹å››æµ·è€Œçš†å‡†çš„åŠæ³•ï¼Œå…·ä½“é—®é¢˜å¯èƒ½éå¸¸ä¸åŒï¼Œè¿˜è¦çœ‹ä½ æ˜¯å¦èƒ½å¦å……åˆ†åˆ©ç”¨è¿™äº›å·¥å…·ï¼Œä»ç§ç§è¿¹è±¡ä¹‹ä¸­ï¼Œé€æ­¥åˆ¤æ–­å‡ºé—®é¢˜æ‰€åœ¨ã€‚</p>\n<p>å¯¹äº<strong>åº”ç”¨</strong><a href=\"https://en.wikipedia.org/wiki/Profiling_(computer_programming)\"><strong>Profiling</strong></a>ï¼Œç®€å•æ¥è¯´å°±æ˜¯åˆ©ç”¨ä¸€äº›ä¾µå…¥æ€§çš„æ‰‹æ®µï¼Œæ”¶é›†ç¨‹åºè¿è¡Œæ—¶çš„ç»†èŠ‚ï¼Œä»¥å®šä½æ€§èƒ½é—®é¢˜ç“¶é¢ˆã€‚æ‰€è°“çš„ç»†èŠ‚ï¼Œå°±æ˜¯ä¾‹å¦‚å†…å­˜çš„ä½¿ç”¨æƒ…å†µã€æœ€é¢‘ç¹è°ƒç”¨çš„æ–¹æ³•æ˜¯ä»€ä¹ˆï¼Œæˆ–è€…ä¸Šä¸‹æ–‡åˆ‡æ¢çš„æƒ…å†µç­‰ã€‚</p>\n<p>æˆ‘åœ¨å‰é¢ç»™å‡ºçš„å…¸å‹å›ç­”é‡Œæåˆ°ï¼Œä¸€èˆ¬ä¸å»ºè®®ç”Ÿäº§ç³»ç»Ÿè¿›è¡ŒProfilingï¼Œå¤§å¤šæ•°æ˜¯åœ¨æ€§èƒ½æµ‹è¯•é˜¶æ®µè¿›è¡Œã€‚ä½†æ˜¯ï¼Œå½“ç”Ÿäº§ç³»ç»Ÿç¡®å®å­˜åœ¨è¿™ç§éœ€æ±‚æ—¶ï¼Œä¹Ÿä¸æ˜¯æ²¡æœ‰é€‰æ‹©ã€‚æˆ‘å»ºè®®ä½¿ç”¨JFRé…åˆ<a href=\"http://www.oracle.com/technetwork/java/javaseproducts/mission-control/java-mission-control-1998576.html\">JMC</a>æ¥åšProfilingï¼Œå› ä¸ºå®ƒæ˜¯ä»Hotspot JVMå†…éƒ¨æ”¶é›†åº•å±‚ä¿¡æ¯ï¼Œå¹¶ç»è¿‡äº†å¤§é‡ä¼˜åŒ–ï¼Œæ€§èƒ½å¼€é”€éå¸¸ä½ï¼Œé€šå¸¸æ˜¯ä½äº <strong>2%</strong> çš„ï¼›å¹¶ä¸”å¦‚æ­¤å¼ºå¤§çš„å·¥å…·ï¼Œä¹Ÿå·²ç»è¢«Oracleå¼€æºå‡ºæ¥ï¼</p>\n<p>æ‰€ä»¥ï¼ŒJFR/JMCå®Œå…¨å…·å¤‡äº†ç”Ÿäº§ç³»ç»ŸProfilingçš„èƒ½åŠ›ï¼Œç›®å‰ä¹Ÿç¡®å®åœ¨çœŸæ­£å¤§è§„æ¨¡éƒ¨ç½²çš„äº‘äº§å“ä¸Šä½¿ç”¨è¿‡ç›¸å…³æŠ€æœ¯ï¼Œå¿«é€Ÿåœ°å®šä½äº†é—®é¢˜ã€‚</p>\n<p>å®ƒçš„ä½¿ç”¨ä¹Ÿéå¸¸æ–¹ä¾¿ï¼Œä½ ä¸éœ€è¦é‡æ–°å¯åŠ¨ç³»ç»Ÿæˆ–è€…æå‰å¢åŠ é…ç½®ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥åœ¨è¿è¡Œæ—¶å¯åŠ¨JFRè®°å½•ï¼Œå¹¶å°†è¿™æ®µæ—¶é—´çš„ä¿¡æ¯å†™å…¥æ–‡ä»¶ï¼š</p>\n<pre><code>Jcmd &lt;pid&gt; JFR.start duration=120s filename=myrecording.jfr\n</code></pre>\n<p>ç„¶åï¼Œä½¿ç”¨JMCæ‰“å¼€â€œ.jfræ–‡ä»¶â€å°±å¯ä»¥è¿›è¡Œåˆ†æäº†ï¼Œæ–¹æ³•ã€å¼‚å¸¸ã€çº¿ç¨‹ã€IOç­‰åº”æœ‰å°½æœ‰ï¼Œå…¶åŠŸèƒ½éå¸¸å¼ºå¤§ã€‚å¦‚æœä½ æƒ³äº†è§£æ›´å¤šç»†èŠ‚ï¼Œå¯ä»¥å‚è€ƒç›¸å…³<a href=\"https://blog.takipi.com/oracle-java-mission-control-the-ultimate-guide/\">æŒ‡å—</a>ã€‚</p>\n<p>ä»Šå¤©æˆ‘ä»ä¸€ä¸ªå…¸å‹æ€§èƒ½é—®é¢˜å‡ºå‘ï¼Œä»ç—‡çŠ¶è¡¨ç°åˆ°å…·ä½“çš„ç³»ç»Ÿåˆ†æã€JVMåˆ†æï¼Œç³»ç»Ÿæ€§åœ°æ•´ç†äº†å¸¸è§æ€§èƒ½åˆ†æçš„æ€è·¯ï¼›å¹¶ä¸”åœ¨çŸ¥è¯†æ‰©å±•éƒ¨åˆ†ï¼Œä»æ–¹æ³•è®ºå’Œå®é™…æ“ä½œçš„è§’åº¦ï¼Œè®©ä½ å°†ç†è®ºå’Œå®é™…ç»“åˆï¼Œç›¸ä¿¡ä¸€å®šå¯ä»¥å¯¹ä½ æœ‰æ‰€å¸®åŠ©ã€‚</p>\n<h2>ä¸€è¯¾ä¸€ç»ƒ</h2>\n<p>å…³äºä»Šå¤©æˆ‘ä»¬è®¨è®ºçš„é¢˜ç›®ä½ åšåˆ°å¿ƒä¸­æœ‰æ•°äº†å—ï¼Ÿ ä»Šå¤©çš„æ€è€ƒé¢˜æ˜¯ï¼ŒProfilingå·¥å…·è·å–æ•°æ®çš„ä¸»è¦æ–¹å¼æœ‰å“ªäº›ï¼Ÿå„æœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹ã€‚</p>\n<p>è¯·ä½ åœ¨ç•™è¨€åŒºå†™å†™ä½ å¯¹è¿™ä¸ªé—®é¢˜çš„æ€è€ƒï¼Œæˆ‘ä¼šé€‰å‡ºç»è¿‡è®¤çœŸæ€è€ƒçš„ç•™è¨€ï¼Œé€ç»™ä½ ä¸€ä»½å­¦ä¹ å¥–åŠ±ç¤¼åˆ¸ï¼Œæ¬¢è¿ä½ ä¸æˆ‘ä¸€èµ·è®¨è®ºã€‚</p>\n<p>ä½ çš„æœ‹å‹æ˜¯ä¸æ˜¯ä¹Ÿåœ¨å‡†å¤‡é¢è¯•å‘¢ï¼Ÿä½ å¯ä»¥â€œè¯·æœ‹å‹è¯»â€ï¼ŒæŠŠä»Šå¤©çš„é¢˜ç›®åˆ†äº«ç»™å¥½å‹ï¼Œæˆ–è®¸ä½ èƒ½å¸®åˆ°ä»–ã€‚</p>\n<p></p>\n","comments":[{"had_liked":false,"id":19613,"user_name":"æ±Ÿå—ç™½è¡£Calvin","can_delete":false,"product_type":"c1","uid":1178188,"ip_address":"","ucode":"5B0E375C7C9DFD","user_header":"https://static001.geekbang.org/account/avatar/00/11/fa/4c/3484fe23.jpg","comment_is_top":false,"comment_ctime":1533908066,"is_pvip":false,"replies":[{"id":"6848","content":"ç™½è¡£å‡ºå“å¿…æ˜¯ç²¾å“","user_name":"ä½œè€…å›å¤","user_name_real":"æ¨æ™“å³°","uid":"1009360","ctime":1533993837,"ip_address":"","comment_id":19613,"utype":1}],"discussion_count":4,"race_medal":0,"score":"796102857826","product_id":100006701,"comment_content":"æ‰¾ç¹å¿™çº¿ç¨‹æ—¶ï¼Œtop -h , å†jstackï¼Œ å†æ¢ç®—tidæ¯”è¾ƒç´¯ï¼Œè€Œä¸”jstackä¼šé€ æˆåœé¡¿ã€‚æ¨èç”¨vjtoolsé‡Œçš„vjtop,  ä¸æ–­æ˜¾ç¤ºç¹å¿™çš„javajçº¿ç¨‹ï¼Œä¸é€ æˆåœé¡¿ã€‚","like_count":186,"discussions":[{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":421918,"discussion_content":"ç™½è¡£å‡ºå“å¿…æ˜¯ç²¾å“","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1533993837,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1597200,"avatar":"https://static001.geekbang.org/account/avatar/00/18/5f/10/ed332d5a.jpg","nickname":"warriorSL","note":"","ucode":"902DA345FD2623","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":353262,"discussion_content":"jstack å‘½ä»¤æ‰§è¡Œè¿‡ç¨‹ï¼Œæ˜¯è¿›è¡Œä¸€æ¬¡æ ˆå¿«ç…§çš„è¿‡ç¨‹ï¼Œä½†æ˜¯å¦‚æœåªæ˜¯grep æŸä¸ªçº¿ç¨‹ï¼Œæ˜¯ä¸æ˜¯ä¸ä¼šé€ æˆåœé¡¿","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615101928,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1243901,"avatar":"https://static001.geekbang.org/account/avatar/00/12/fa/fd/ec24cba7.jpg","nickname":"fcbçš„é±¼","note":"","ucode":"88667EBF09CEC0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2773,"discussion_content":"jstackä¸ºå•¥ä¼šé€ æˆåœé¡¿å‘¢ï¼Ÿä¹‹å‰çœ‹jstackåŸç†çš„æ—¶å€™æ²¡æœ‰çœ‹åˆ°è¿™éƒ¨åˆ†ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563930503,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1001145,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/46/b9/e6b4a431.jpg","nickname":"éƒ½æ˜¯å¼Ÿå¼Ÿ","note":"","ucode":"BEAFD64167FD23","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":1109,"discussion_content":"ç²¾å“","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562318552,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":17021,"user_name":"æ¨ä¸œyy","can_delete":false,"product_type":"c1","uid":1125212,"ip_address":"","ucode":"2355344A5D6C01","user_header":"https://static001.geekbang.org/account/avatar/00/11/2b/5c/a00fef79.jpg","comment_is_top":false,"comment_ctime":1532391853,"is_pvip":false,"replies":[{"id":"5960","content":"å¾ˆå®ç”¨","user_name":"ä½œè€…å›å¤","user_name_real":"æ¨æ™“å³°","uid":"1009360","ctime":1532446047,"ip_address":"","comment_id":17021,"utype":1}],"discussion_count":1,"race_medal":0,"score":"143266312621","product_id":100006701,"comment_content":"ç¡®å®ä¸é”™ï¼Œè¿˜æœ‰ä¸ªå‘½ä»¤ï¼Œsar,ä¸»è¦çœ‹iowaitçš„å€¼ï¼Œå¦‚æœå®ƒæ¯”è¾ƒé«˜ï¼Œä¹Ÿè¯´æ˜ç£ç›˜ioå†™å…¥æ…¢ï¼Œå½“æ—¶æˆ‘ä»¬çš„ç³»ç»Ÿæ˜¯è™šæ‹Ÿæœºï¼Œå’Œåˆ«çš„ä¸šåŠ¡å…±ç”¨ç‰©ç†æœºï¼Œæ‰€ä»¥å½“åˆ«äººå¹¶å‘å¤§ï¼Œä¹Ÿå½±å“äº†æˆ‘ä»¬ï¼Œæˆ‘ä»¬æœ‰åˆ‡é¢å†™æ—¥å¿—ï¼Œç³»ç»Ÿæ—¥å¿—å†™çš„æ¯”è¾ƒå¤šï¼Œå°±å‡ºç°æ•´ä¸ªæœåŠ¡æ…¢äº†ï¼Œåæ¥å‡å°‘ä¸å¿…è¦çš„æ—¥å¿—ï¼Œæ‰¾è¿ç»´æ¢æœºå™¨","like_count":34,"discussions":[{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":421009,"discussion_content":"å¾ˆå®ç”¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1532446047,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":17048,"user_name":"ç›¼ç›¼","can_delete":false,"product_type":"c1","uid":1173633,"ip_address":"","ucode":"D0E1E20FBF058E","user_header":"https://static001.geekbang.org/account/avatar/00/11/e8/81/0be4db59.jpg","comment_is_top":false,"comment_ctime":1532396718,"is_pvip":false,"replies":[{"id":"5958","content":"ä¸é”™çš„æ€»ç»“","user_name":"ä½œè€…å›å¤","user_name_real":"æ¨æ™“å³°","uid":"1009360","ctime":1532445803,"ip_address":"","comment_id":17048,"utype":1}],"discussion_count":1,"race_medal":0,"score":"117496513710","product_id":100006701,"comment_content":"profilingæ”¶é›†ç¨‹åºè¿è¡Œæ—¶ä¿¡æ¯çš„æ–¹å¼ä¸»è¦æœ‰ä»¥ä¸‹ä¸‰ç§ï¼š<br>äº‹ä»¶æ–¹æ³•ï¼šå¯¹äº Javaï¼Œå¯ä»¥é‡‡ç”¨ JVMTIï¼ˆJVM Tools Interfaceï¼‰API æ¥æ•æ‰è¯¸å¦‚æ–¹æ³•è°ƒç”¨ã€ç±»è½½å…¥ã€ç±»å¸è½½ã€è¿›å…¥ &#47; ç¦»å¼€çº¿ç¨‹ç­‰äº‹ä»¶ï¼Œç„¶ååŸºäºè¿™äº›äº‹ä»¶è¿›è¡Œç¨‹åºè¡Œä¸ºçš„åˆ†æã€‚<br>ç»Ÿè®¡æŠ½æ ·æ–¹æ³•ï¼ˆsamplingï¼‰: è¯¥æ–¹æ³•æ¯éš”ä¸€æ®µæ—¶é—´è°ƒç”¨ç³»ç»Ÿä¸­æ–­ï¼Œç„¶åæ”¶é›†å½“å‰çš„è°ƒç”¨æ ˆï¼ˆcall stackï¼‰ä¿¡æ¯ï¼Œè®°å½•è°ƒç”¨æ ˆä¸­å‡ºç°çš„å‡½æ•°åŠè¿™äº›å‡½æ•°çš„è°ƒç”¨ç»“æ„ï¼ŒåŸºäºè¿™äº›ä¿¡æ¯å¾—åˆ°å‡½æ•°çš„è°ƒç”¨å…³ç³»å›¾åŠæ¯ä¸ªå‡½æ•°çš„ CPU ä½¿ç”¨ä¿¡æ¯ã€‚ç”±äºè°ƒç”¨æ ˆçš„ä¿¡æ¯æ˜¯æ¯éš”ä¸€æ®µæ—¶é—´æ¥è·å–çš„ï¼Œå› æ­¤ä¸æ˜¯éå¸¸ç²¾ç¡®çš„ï¼Œä½†ç”±äºè¯¥æ–¹æ³•å¯¹ç›®æ ‡ç¨‹åºçš„å¹²æ¶‰æ¯”è¾ƒå°‘ï¼Œç›®æ ‡ç¨‹åºçš„è¿è¡Œé€Ÿåº¦å‡ ä¹ä¸å—å½±å“ã€‚<br>æ¤å…¥é™„åŠ æŒ‡ä»¤æ–¹æ³•ï¼ˆBCIï¼‰: è¯¥æ–¹æ³•åœ¨ç›®æ ‡ç¨‹åºä¸­æ’å…¥æŒ‡ä»¤ä»£ç ï¼Œè¿™äº›æŒ‡ä»¤ä»£ç å°†è®°å½• profiling æ‰€éœ€çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬è¿è¡Œæ—¶é—´ã€è®¡æ•°å™¨çš„å€¼ç­‰ï¼Œä»è€Œç»™å‡ºä¸€ä¸ªè¾ƒä¸ºç²¾ç¡®çš„å†…å­˜ä½¿ç”¨æƒ…å†µã€å‡½æ•°è°ƒç”¨å…³ç³»åŠå‡½æ•°çš„ CPU ä½¿ç”¨ä¿¡æ¯ã€‚è¯¥æ–¹æ³•å¯¹ç¨‹åºæ‰§è¡Œé€Ÿåº¦ä¼šæœ‰ä¸€å®šçš„å½±å“ï¼Œå› æ­¤ç»™å‡ºçš„ç¨‹åºæ‰§è¡Œæ—¶é—´æœ‰å¯èƒ½ä¸å‡†ç¡®ã€‚ä½†æ˜¯è¯¥æ–¹æ³•åœ¨ç»Ÿè®¡ç¨‹åºçš„è¿è¡Œè½¨è¿¹æ–¹é¢æœ‰ä¸€å®šçš„ä¼˜åŠ¿ã€‚","like_count":28,"discussions":[{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":421022,"discussion_content":"ä¸é”™çš„æ€»ç»“","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1532445803,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":16716,"user_name":"Yano","can_delete":false,"product_type":"c1","uid":1028394,"ip_address":"","ucode":"742EA1602E9A52","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b1/2a/c1432fff.jpg","comment_is_top":false,"comment_ctime":1532135168,"is_pvip":false,"replies":[{"id":"6055","content":"æ­å–œï¼Œå¾ˆé«˜å…´èƒ½ä½“ç°å‡ºä»·å€¼","user_name":"ä½œè€…å›å¤","user_name_real":"æ¨æ™“å³°","uid":"1009360","ctime":1532680759,"ip_address":"","comment_id":16716,"utype":1}],"discussion_count":4,"race_medal":0,"score":"100316382976","product_id":100006701,"comment_content":"ä¸€ç›´ä»¥æ¥çœ‹è€å¸ˆçš„ä¸“æ æ²¡æœ‰ç•™è¨€è¿‡ï¼Œä»Šå¤©ç‰¹æ„æ¥ç•™è¨€ã€‚æˆ‘çœ‹äº†13è®²ï¼ˆå½“æ—¶åªå‡ºåˆ°13è®²ï¼‰é¢è¯•å°±è½»æ¾é€šè¿‡äº†ï½è€å¸ˆæ¯ä¸€ç¯‡æ–‡ç« ï¼Œéƒ½è®©æˆ‘éå¸¸æ”¶ç›Šï¼Œèµä¸€ä¸ªï½ï¼","like_count":24,"discussions":[{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420907,"discussion_content":"æ­å–œï¼Œå¾ˆé«˜å…´èƒ½ä½“ç°å‡ºä»·å€¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1532680759,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1336475,"avatar":"https://static001.geekbang.org/account/avatar/00/14/64/9b/0b578b08.jpg","nickname":"J.Smile","note":"","ucode":"C4D98DFDBF7584","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":154053,"discussion_content":"é‚£è¯´æ˜ä½ è¿˜æ˜¯ä¸ªæ–°æ‰‹","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1580109741,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1344289,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLEYbNElGIxY6Le1rfiakWJecz8JIOp06Y9JQFR2YBn3T3gx3icI5CKxZNgxgqiaKbfVOicXquO3QBw9w/132","nickname":"july","note":"","ucode":"E081987929063A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1336475,"avatar":"https://static001.geekbang.org/account/avatar/00/14/64/9b/0b578b08.jpg","nickname":"J.Smile","note":"","ucode":"C4D98DFDBF7584","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":230712,"discussion_content":"å°±ä½ çš®ï¼Œçè¯´ä»€ä¹ˆå¤§å®è¯ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586765831,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":154053,"ip_address":""},"score":230712,"extra":""},{"author":{"id":1336475,"avatar":"https://static001.geekbang.org/account/avatar/00/14/64/9b/0b578b08.jpg","nickname":"J.Smile","note":"","ucode":"C4D98DFDBF7584","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1344289,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLEYbNElGIxY6Le1rfiakWJecz8JIOp06Y9JQFR2YBn3T3gx3icI5CKxZNgxgqiaKbfVOicXquO3QBw9w/132","nickname":"july","note":"","ucode":"E081987929063A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":230895,"discussion_content":"ğŸ˜‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586779504,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":230712,"ip_address":""},"score":230895,"extra":""}]}]},{"had_liked":false,"id":19662,"user_name":"clz1341521","can_delete":false,"product_type":"c1","uid":1179557,"ip_address":"","ucode":"3BDB4AB454C918","user_header":"https://static001.geekbang.org/account/avatar/00/11/ff/a5/eccc7653.jpg","comment_is_top":false,"comment_ctime":1533950922,"is_pvip":false,"replies":[{"id":"6854","content":"è°¢è°¢ï¼Œä»¥å‰æ²¡æœ‰è¿‡ï¼Œåˆšæ‰æŸ¥äº†ä¸€ä¸‹ï¼Œâ€œdstatå‘½ä»¤æ˜¯ä¸€ä¸ªç”¨æ¥æ›¿æ¢vmstatã€iostatã€netstatã€nfsstatå’Œifstatè¿™äº›å‘½ä»¤çš„å·¥å…·ï¼Œæ˜¯ä¸€ä¸ªå…¨èƒ½ç³»ç»Ÿä¿¡æ¯ç»Ÿè®¡å·¥å…·â€ å›å¤´è¯•ä¸€ä¸‹","user_name":"ä½œè€…å›å¤","user_name_real":"æ¨æ™“å³°","uid":"1009360","ctime":1533994019,"ip_address":"","comment_id":19662,"utype":1}],"discussion_count":1,"race_medal":0,"score":"96023231434","product_id":100006701,"comment_content":"dstatè¿™ä¸ªå‘½ä»¤ä¹Ÿå¾ˆæœ‰ç”¨","like_count":23,"discussions":[{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":421931,"discussion_content":"è°¢è°¢ï¼Œä»¥å‰æ²¡æœ‰è¿‡ï¼Œåˆšæ‰æŸ¥äº†ä¸€ä¸‹ï¼Œâ€œdstatå‘½ä»¤æ˜¯ä¸€ä¸ªç”¨æ¥æ›¿æ¢vmstatã€iostatã€netstatã€nfsstatå’Œifstatè¿™äº›å‘½ä»¤çš„å·¥å…·ï¼Œæ˜¯ä¸€ä¸ªå…¨èƒ½ç³»ç»Ÿä¿¡æ¯ç»Ÿè®¡å·¥å…·â€ å›å¤´è¯•ä¸€ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1533994019,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":20513,"user_name":"æœ‰ç¦","can_delete":false,"product_type":"c1","uid":1045377,"ip_address":"","ucode":"3DEAB5CEBE0F85","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f3/81/42e29d40.jpg","comment_is_top":false,"comment_ctime":1534501483,"is_pvip":false,"replies":[{"id":"7378","content":"ç¡®å®æ˜¯åˆ©å™¨","user_name":"ä½œè€…å›å¤","user_name_real":"æ¨æ™“å³°","uid":"1009360","ctime":1534858331,"ip_address":"","comment_id":20513,"utype":1}],"discussion_count":2,"race_medal":0,"score":"53074109035","product_id":100006701,"comment_content":"å–œæ¬¢ç”¨ç«ç„°å›¾æ¥è¾…åŠ©å®šä½","like_count":12,"discussions":[{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":422282,"discussion_content":"ç¡®å®æ˜¯åˆ©å™¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1534858331,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1241064,"avatar":"https://static001.geekbang.org/account/avatar/00/12/ef/e8/076a6f59.jpg","nickname":"å¼ ç¿€","note":"","ucode":"835A01424FDD5E","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":580434,"discussion_content":"è¯·é—®ç«ç„°å›¾å…·ä½“å¦‚ä½•ä½¿ç”¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658186679,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":182876,"user_name":"å¼ æ°¸å³°","can_delete":false,"product_type":"c1","uid":1106891,"ip_address":"","ucode":"209823D8151A3D","user_header":"https://static001.geekbang.org/account/avatar/00/10/e3/cb/d13986f7.jpg","comment_is_top":false,"comment_ctime":1582881312,"is_pvip":true,"discussion_count":2,"race_medal":0,"score":"40237586976","product_id":100006701,"comment_content":"æˆ‘éƒ½æ˜¯ä¸€è¾¹çœ‹æœåŠ¡å±‚ï¼Œä¸€è¾¹æ‰¾DBAï¼Œ80%éƒ½æ˜¯DBæ…¢SQLå¯¼è‡´æœåŠ¡æ…¢ï¼Œç»éªŒä¹‹è°ˆã€‚","like_count":9,"discussions":[{"author":{"id":1066508,"avatar":"https://static001.geekbang.org/account/avatar/00/10/46/0c/773ba2f3.jpg","nickname":"ä¸‹ä¸ªç›®æ ‡45k","note":"","ucode":"193BA8C3AA9A61","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":335869,"discussion_content":"çš„ç¡®æ˜¯è¿™æ · , ç»å¤§éƒ¨åˆ†éƒ½æ˜¯ç­‰io,é™¤éä»£ç ä¸­æœ‰å¾ªç¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608361222,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1002938,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/4d/ba/83e6dcbf.jpg","nickname":"skyline","note":"","ucode":"4E73F9049751F6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":321321,"discussion_content":"å“ˆå“ˆï¼Œé‚£äº›å¹´ä¸€èµ·è·³è¿‡å¤šæ¬¡çš„å‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604564482,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":87835,"user_name":"ç¡…è°·å±…å£«","can_delete":false,"product_type":"c1","uid":1018463,"ip_address":"","ucode":"BD3D3BA142F280","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8a/5f/c60d0ffe.jpg","comment_is_top":false,"comment_ctime":1555727364,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"31620498436","product_id":100006701,"comment_content":"é˜¿é‡Œçš„ arthas ä¸é”™ã€‚æ·˜å®ä¹Ÿæœ‰ä¸€ä¸ª profilerã€‚","like_count":7,"discussions":[{"author":{"id":1002938,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/4d/ba/83e6dcbf.jpg","nickname":"skyline","note":"","ucode":"4E73F9049751F6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":321323,"discussion_content":"arthasè¿˜æ˜¯æŒºå¥½ç”¨çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604564633,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":16724,"user_name":"ç”²éŸ­","can_delete":false,"product_type":"c1","uid":1052321,"ip_address":"","ucode":"2E998B8CB17F4E","user_header":"https://static001.geekbang.org/account/avatar/00/10/0e/a1/152a5de1.jpg","comment_is_top":false,"comment_ctime":1532137750,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"31596908822","product_id":100006701,"comment_content":"ç™¾åº¦æœç´¢ profilingæ˜¯ä»€ä¹ˆ","like_count":7},{"had_liked":false,"id":229847,"user_name":"é¢‡å¿’å¦¥","can_delete":false,"product_type":"c1","uid":1026448,"ip_address":"","ucode":"AA86AD1049BC2E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a9/90/0c5ed3d9.jpg","comment_is_top":false,"comment_ctime":1593161990,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"23067998470","product_id":100006701,"comment_content":"æˆ‘ä»¬åº”ç”¨è·‘åœ¨K8Sä¸Šï¼Œæˆ‘ä¸€èˆ¬æ˜¯çœ‹thread dumpå’Œgc log ã€‚thread dumpå¯ä»¥é€šè¿‡jstackæˆ–è€…spring boot actuatorå¯ä»¥å¾—åˆ°ï¼ˆæ¨èè¿™ä¸ªåŠæ³•ï¼‰ï¼Œç„¶åäº¤ç»™fastthread.ioåˆ†æã€‚gc log åˆ™åœ¨jvmå¯åŠ¨æ—¶å¢åŠ å‚æ•°ï¼Œç„¶åäº¤ç»™gceasy.io åˆ†æã€‚å†…å­˜æ³„éœ²åˆ™æ˜¯jvm å¯åŠ¨æ—¶å¢åŠ å‚æ•°ï¼Œå¦‚æœoomåˆ™heap dumpåˆ°æŸä¸ªç›®å½•ï¼Œè€Œè¿™ä¸ªç›®å½•ç”¨emptyDir å·æŒ‚è½½ã€‚","like_count":6},{"had_liked":false,"id":168753,"user_name":"ub8","can_delete":false,"product_type":"c1","uid":1481811,"ip_address":"","ucode":"0D937C3EAEB781","user_header":"https://static001.geekbang.org/account/avatar/00/16/9c/53/ade0afb0.jpg","comment_is_top":false,"comment_ctime":1578150267,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"14463052155","product_id":100006701,"comment_content":" Full GC ï¼ŒMinor GC é¢‘ç‡æ˜¯å¤šå°‘ç®—æ˜¯é¢‘ç¹å‘¢ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1184658,"avatar":"https://static001.geekbang.org/account/avatar/00/12/13/92/0b4c8e30.jpg","nickname":"é£ç¿”","note":"","ucode":"0641211EE9DA5C","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":534727,"discussion_content":"æˆ‘ä»¬ç³»ç»Ÿé‡Œå‘ç”Ÿfull gcä¼šå‘P1æŠ¥è­¦ï¼Œåº”è¯¥æ˜¯å°½é‡é¿å…fullgcå§ã€‚ã€‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638263479,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":21789,"user_name":"å¤§ç¥ä»™","can_delete":false,"product_type":"c1","uid":1151944,"ip_address":"","ucode":"8179D170A97936","user_header":"https://static001.geekbang.org/account/avatar/00/11/93/c8/9eb6c644.jpg","comment_is_top":false,"comment_ctime":1535335156,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14420237044","product_id":100006701,"comment_content":"è€å¸ˆï¼Œminor gcå˜é•¿çš„é€šå¸¸æƒ…å†µæœ‰å“ªäº›ï¼Œé™¤äº†youngé…ç½®å°ä»¥å¤–ï¼Œå’Œç³»ç»Ÿioæœ‰å…³ç³»ä¹ˆ","like_count":3},{"had_liked":false,"id":49397,"user_name":"james.h.fu","can_delete":false,"product_type":"c1","uid":1330945,"ip_address":"","ucode":"B5773B8DCB1F7A","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKib804LQiawZc7KHzerDF2B4zGvPByXKTVR1h6HibRlc8sQFAujIO3M02GicOg9Qia9ibBZlbmDyJcCKyQ/132","comment_is_top":false,"comment_ctime":1544680459,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5839647755","product_id":100006701,"comment_content":"è€å¸ˆï¼Œæˆ‘æ„Ÿè§‰å¾ˆéœ€è¦é«˜è´¨é‡çš„é¢å‘å¯¹è±¡åˆ†æå’Œè®¾è®¡ã€‚çœ‹ä»£ç çš„æ—¶å€™ï¼Œæ€»æ„Ÿè§‰æœ‰äº›åœ°æ–¹OOå†™ä¸å¥½ã€‚","like_count":1},{"had_liked":false,"id":16727,"user_name":"One day","can_delete":false,"product_type":"c1","uid":1126868,"ip_address":"","ucode":"F71F465ABB3A6A","user_header":"https://static001.geekbang.org/account/avatar/00/11/31/d4/3dcddc04.jpg","comment_is_top":false,"comment_ctime":1532139355,"is_pvip":false,"replies":[{"id":"6054","content":"æœ‰ï¼Œä»…ä»…èƒ½åšä¸ªæŠ›ç –å¼•ç‰ï¼ŒèŒƒå›´å¤ªå¤§ä¸“æ å°±ä¸ä¼¦ä¸ç±»äº†","user_name":"ä½œè€…å›å¤","user_name_real":"æ¨æ™“å³°","uid":"1009360","ctime":1532680695,"ip_address":"","comment_id":16727,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5827106651","product_id":100006701,"comment_content":"ä¹‹å‰çœ‹åˆ°ç›®å½•ä¸Šè¿˜æœ‰è®²springå’Œæ•°æ®åº“ç­‰ç­‰ï¼Œåé¢è¿˜ä¼šè®²å§ï¼","like_count":1,"discussions":[{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420911,"discussion_content":"æœ‰ï¼Œä»…ä»…èƒ½åšä¸ªæŠ›ç –å¼•ç‰ï¼ŒèŒƒå›´å¤ªå¤§ä¸“æ å°±ä¸ä¼¦ä¸ç±»äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1532680695,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":342234,"user_name":"David","can_delete":false,"product_type":"c1","uid":1021825,"ip_address":"","ucode":"22CBBC13FC97A9","user_header":"https://static001.geekbang.org/account/avatar/00/0f/97/81/e1eaf621.jpg","comment_is_top":false,"comment_ctime":1650118887,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"1650118887","product_id":100006701,"comment_content":"æ‰¾ç¹å¿™çº¿ç¨‹æ—¶ï¼Œtop -h , å†jstackï¼Œ å†æ¢ç®—tidæ¯”è¾ƒç´¯ï¼Œè€Œä¸”jstackä¼šé€ æˆåœé¡¿ã€‚æ¨èç”¨vjtoolsé‡Œçš„vjtop,  ä¸æ–­æ˜¾ç¤ºç¹å¿™çš„javajçº¿ç¨‹ï¼Œä¸é€ æˆåœé¡¿ã€‚","like_count":0,"discussions":[{"author":{"id":2238635,"avatar":"https://static001.geekbang.org/account/avatar/00/22/28/ab/b8905658.jpg","nickname":"AsYouWish99","note":"","ucode":"A5CE38DAD56115","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":577867,"discussion_content":"æ‰¾ç¹å¿™çº¿ç¨‹æ—¶ï¼Œtop -h , å†jstackï¼Œ å†æ¢ç®—tidæ¯”è¾ƒç´¯ï¼Œè€Œä¸”jstackä¼šé€ æˆåœé¡¿ã€‚æ¨èç”¨vjtoolsé‡Œçš„vjtop,  ä¸æ–­æ˜¾ç¤ºç¹å¿™çš„javajçº¿ç¨‹ï¼Œä¸é€ æˆåœé¡¿ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656398228,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":206118,"user_name":"é˜³æ˜¥é¢","can_delete":false,"product_type":"c1","uid":1693492,"ip_address":"","ucode":"27493CAD3D7EF3","user_header":"https://static001.geekbang.org/account/avatar/00/19/d7/34/b67c74b8.jpg","comment_is_top":false,"comment_ctime":1586789511,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"1586789511","product_id":100006701,"comment_content":"è€å¸ˆï¼Œè¯·é—®ä¸‹æœåŠ¡å™¨è´Ÿè½½é«˜ä½†cpuä½¿ç”¨ç‡ä½å¯èƒ½æ˜¯ä»€ä¹ˆåŸå› ","like_count":0,"discussions":[{"author":{"id":1014649,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7b/79/df384bdc.jpg","nickname":"ä¿®æ„¿ä¸‰ç§‹","note":"","ucode":"0AEE445D8DBFF4","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":292893,"discussion_content":"çœ‹çœ‹iowait","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1595380432,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2063962,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/7e/5a/da39f489.jpg","nickname":"Ethan New","note":"","ucode":"9CA2EF39E58030","race_medal":4,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":388243,"discussion_content":"åº”è¯¥æ˜¯IOçš„é—®é¢˜ï¼Œçœ‹çœ‹IOçš„æŒ‡æ ‡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628665660,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1718746,"avatar":"","nickname":"æ—æ–°æ½œ","note":"","ucode":"386EA326AD1009","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":356322,"discussion_content":"å¹¶å‘é«˜ï¼Œå­˜åœ¨é˜»å¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615561557,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}