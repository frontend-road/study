{"id":108643,"title":"23 | HTTPS是什么？SSL/TLS又是什么？","content":"<p>从今天开始，我们开始进入全新的“安全篇”，聊聊与安全相关的HTTPS、SSL、TLS。</p><p>在<a href=\"https://time.geekbang.org/column/article/103746\">第14讲</a>中，我曾经谈到过HTTP的一些缺点，其中的“无状态”在加入Cookie后得到了解决，而另两个缺点——“明文”和“不安全”仅凭HTTP自身是无力解决的，需要引入新的HTTPS协议。</p><h2>为什么要有HTTPS？</h2><p>简单的回答是“<strong>因为HTTP不安全</strong>”。</p><p>由于HTTP天生“明文”的特点，整个传输过程完全透明，任何人都能够在链路中截获、修改或者伪造请求/响应报文，数据不具有可信性。</p><p>比如，前几讲中说过的“代理服务”。它作为HTTP通信的中间人，在数据上下行的时候可以添加或删除部分头字段，也可以使用黑白名单过滤body里的关键字，甚至直接发送虚假的请求、响应，而浏览器和源服务器都没有办法判断报文的真伪。</p><p>这对于网络购物、网上银行、证券交易等需要高度信任的应用场景来说是非常致命的。如果没有基本的安全保护，使用互联网进行各种电子商务、电子政务就根本无从谈起。</p><p>对于安全性要求不那么高的新闻、视频、搜索等网站来说，由于互联网上的恶意用户、恶意代理越来越多，也很容易遭到“流量劫持”的攻击，在页面里强行嵌入广告，或者分流用户，导致各种利益损失。</p><!-- [[[read_end]]] --><p>对于你我这样的普通网民来说，HTTP不安全的隐患就更大了，上网的记录会被轻易截获，网站是否真实也无法验证，黑客可以伪装成银行网站，盗取真实姓名、密码、银行卡等敏感信息，威胁人身安全和财产安全。</p><p>总的来说，今天的互联网已经不再是早期的“田园牧歌”时代，而是进入了“黑暗森林”状态。上网的时候必须步步为营、处处小心，否则就会被不知道埋伏在哪里的黑客所“猎杀”。</p><h2>什么是安全？</h2><p>既然HTTP“不安全”，那什么样的通信过程才是安全的呢？</p><p>通常认为，<span class=\"orange\">如果通信过程具备了四个特性，就可以认为是“安全”的</span>，这四个特性是：<span class=\"orange\">机密性</span>、<span class=\"orange\">完整性</span>，<span class=\"orange\">身份认证</span>和<span class=\"orange\">不可否认</span>。</p><p><strong>机密性</strong>（Secrecy/Confidentiality）是指对数据的“保密”，只能由可信的人访问，对其他人是不可见的“秘密”，简单来说就是不能让不相关的人看到不该看的东西。</p><p>比如小明和小红私下聊天，但“隔墙有耳”，被小强在旁边的房间里全偷听到了，这就是没有机密性。我们之前一直用的Wireshark ，实际上也是利用了HTTP的这个特点，捕获了传输过程中的所有数据。</p><p><strong>完整性</strong>（Integrity，也叫一致性）是指数据在传输过程中没有被篡改，不多也不少，“完完整整”地保持着原状。</p><p>机密性虽然可以让数据成为“秘密”，但不能防止黑客对数据的修改，黑客可以替换数据，调整数据的顺序，或者增加、删除部分数据，破坏通信过程。</p><p>比如，小明给小红写了张纸条：“明天公园见”。小强把“公园”划掉，模仿小明的笔迹把这句话改成了“明天广场见”。小红收到后无法验证完整性，信以为真，第二天的约会就告吹了。</p><p><strong>身份认证</strong>（Authentication）是指确认对方的真实身份，也就是“证明你真的是你”，保证消息只能发送给可信的人。</p><p>如果通信时另一方是假冒的网站，那么数据再保密也没有用，黑客完全可以使用冒充的身份“套”出各种信息，加密和没加密一样。</p><p>比如，小明给小红写了封情书：“我喜欢你”，但不留心发给了小强。小强将错就错，假冒小红回复了一个“白日做梦”，小明不知道这其实是小强的话，误以为是小红的，后果可想而知。</p><p>第四个特性是<strong>不可否认</strong>（Non-repudiation/Undeniable），也叫不可抵赖，意思是不能否认已经发生过的行为，不能“说话不算数”“耍赖皮”。</p><p>使用前三个特性，可以解决安全通信的大部分问题，但如果缺了不可否认，那通信的事务真实性就得不到保证，有可能出现“老赖”。</p><p>比如，小明借了小红一千元，没写借条，第二天矢口否认，小红也确实拿不出借钱的证据，只能认倒霉。另一种情况是小明借钱后还了小红，但没写收条，小红于是不承认小明还钱的事，说根本没还，要小明再掏出一千元。</p><p>所以，只有同时具备了机密性、完整性、身份认证、不可否认这四个特性，通信双方的利益才能有保障，才能算得上是真正的安全。</p><h2>什么是HTTPS？</h2><p>说到这里，终于轮到今天的主角HTTPS出场了，它为HTTP增加了刚才所说的四大安全特性。</p><p>HTTPS其实是一个“非常简单”的协议，RFC文档很小，只有短短的7页，里面规定了<strong>新的协议名“https”，默认端口号443</strong>，至于其他的什么请求-应答模式、报文结构、请求方法、URI、头字段、连接管理等等都完全沿用HTTP，没有任何新的东西。</p><p>也就是说，除了协议名“http”和端口号80这两点不同，HTTPS协议在语法、语义上和HTTP完全一样，优缺点也“照单全收”（当然要除去“明文”和“不安全”）。</p><p>不信你可以用URI“<a href=\"https://www.chrono.com\">https://www.chrono.com</a>”访问之前08至21讲的所有示例，看看它的响应报文是否与HTTP一样。</p><pre><code>https://www.chrono.com\nhttps://www.chrono.com/11-1\nhttps://www.chrono.com/15-1?name=a.json\nhttps://www.chrono.com/16-1\n</code></pre><p><img src=\"https://static001.geekbang.org/resource/image/40/b0/40fbb989a9fd2217320ab287e80e1fb0.png?wh=1397*1001\" alt=\"\"></p><p>你肯定已经注意到了，在用HTTPS访问实验环境时Chrome会有不安全提示，必须点击“高级-继续前往”才能顺利显示页面。而且如果用Wireshark抓包，也会发现与HTTP不一样，不再是简单可见的明文，多了“Client Hello”“Server Hello”等新的数据包。</p><p>这就是HTTPS与HTTP最大的区别，它能够鉴别危险的网站，并且尽最大可能保证你的上网安全，防御黑客对信息的窃听、篡改或者“钓鱼”、伪造。</p><p>你可能要问了，既然没有新东西，HTTPS凭什么就能做到机密性、完整性这些安全特性呢？</p><p>秘密就在于HTTPS名字里的“S”，它把HTTP下层的传输协议由TCP/IP换成了SSL/TLS，由“<strong>HTTP over TCP/IP</strong>”变成了“<strong>HTTP over SSL/TLS</strong>”，让HTTP运行在了安全的SSL/TLS协议上（可参考第4讲和第5讲），收发报文不再使用Socket API，而是调用专门的安全接口。</p><p><img src=\"https://static001.geekbang.org/resource/image/50/a3/50d57e18813e18270747806d5d73f0a3.png?wh=2057*810\" alt=\"\"></p><p>所以说，HTTPS本身并没有什么“惊世骇俗”的本事，全是靠着后面的SSL/TLS“撑腰”。只要学会了SSL/TLS，HTTPS自然就“手到擒来”。</p><h2>SSL/TLS</h2><p>现在我们就来看看SSL/TLS，它到底是个什么来历。</p><p>SSL即安全套接层（Secure Sockets Layer），在OSI模型中处于第5层（会话层），由网景公司于1994年发明，有v2和v3两个版本，而v1因为有严重的缺陷从未公开过。</p><p>SSL发展到v3时已经证明了它自身是一个非常好的安全通信协议，于是互联网工程组IETF在1999年把它改名为TLS（传输层安全，Transport Layer Security），正式标准化，版本号从1.0重新算起，所以TLS1.0实际上就是SSLv3.1。</p><p>到今天TLS已经发展出了三个版本，分别是2006年的1.1、2008年的1.2和去年（2018）的1.3，每个新版本都紧跟密码学的发展和互联网的现状，持续强化安全和性能，已经成为了信息安全领域中的权威标准。</p><p>目前应用的最广泛的TLS是1.2，而之前的协议（TLS1.1/1.0、SSLv3/v2）都已经被认为是不安全的，各大浏览器即将在2020年左右停止支持，所以接下来的讲解都针对的是TLS1.2。</p><p>TLS由记录协议、握手协议、警告协议、变更密码规范协议、扩展协议等几个子协议组成，综合使用了对称加密、非对称加密、身份认证等许多密码学前沿技术。</p><p>浏览器和服务器在使用TLS建立连接时需要选择一组恰当的加密算法来实现安全通信，这些算法的组合被称为“密码套件”（cipher suite，也叫加密套件）。</p><p>你可以访问实验环境的URI“/23-1”，对TLS和密码套件有个感性的认识。</p><p><img src=\"https://static001.geekbang.org/resource/image/5e/24/5ead57e03f127ea8f244d715186adb24.png?wh=1300*1182\" alt=\"\"></p><p>你可以看到，实验环境使用的TLS是1.2，客户端和服务器都支持非常多的密码套件，而最后协商选定的是“ECDHE-RSA-AES256-GCM-SHA384”。</p><p>这么长的名字看着有点晕吧，不用怕，其实TLS的密码套件命名非常规范，格式很固定。基本的形式是“密钥交换算法+签名算法+对称加密算法+摘要算法”，比如刚才的密码套件的意思就是：</p><p>“握手时使用ECDHE算法进行密钥交换，用RSA签名和身份认证，握手后的通信使用AES对称算法，密钥长度256位，分组模式是GCM，摘要算法SHA384用于消息认证和产生随机数。”</p><h2>OpenSSL</h2><p>说到TLS，就不能不谈到OpenSSL，它是一个著名的开源密码学程序库和工具包，几乎支持所有公开的加密算法和协议，已经成为了事实上的标准，许多应用软件都会使用它作为底层库来实现TLS功能，包括常用的Web服务器Apache、Nginx等。</p><p>OpenSSL是从另一个开源库SSLeay发展出来的，曾经考虑命名为“OpenTLS”，但当时（1998年）TLS还未正式确立，而SSL早已广为人知，所以最终使用了“OpenSSL”的名字。</p><p>OpenSSL目前有三个主要的分支，1.0.2和1.1.0都将在今年（2019）年底不再维护，最新的长期支持版本是1.1.1，我们的实验环境使用的OpenSSL是“1.1.0j”。</p><p>由于OpenSSL是开源的，所以它还有一些代码分支，比如Google的BoringSSL、OpenBSD的LibreSSL，这些分支在OpenSSL的基础上删除了一些老旧代码，也增加了一些新特性，虽然背后有“大金主”，但离取代OpenSSL还差得很远。</p><h2>小结</h2><ol>\n<li><span class=\"orange\">因为HTTP是明文传输，所以不安全，容易被黑客窃听或篡改；</span></li>\n<li><span class=\"orange\">通信安全必须同时具备机密性、完整性、身份认证和不可否认这四个特性；</span></li>\n<li><span class=\"orange\">HTTPS的语法、语义仍然是HTTP，但把下层的协议由TCP/IP换成了SSL/TLS；</span></li>\n<li><span class=\"orange\">SSL/TLS是信息安全领域中的权威标准，采用多种先进的加密技术保证通信安全；</span></li>\n<li><span class=\"orange\">OpenSSL是著名的开源密码学工具包，是SSL/TLS的具体实现。</span></li>\n</ol><h2>课下作业</h2><ol>\n<li>你能说出HTTPS与HTTP有哪些区别吗？</li>\n<li>你知道有哪些方法能够实现机密性、完整性等安全特性呢？</li>\n</ol><p>欢迎你把自己的学习体会写在留言区，与我和其他同学一起讨论。如果你觉得有所收获，也欢迎把文章分享给你的朋友。</p><p><img src=\"https://static001.geekbang.org/resource/image/05/4a/052e28eaa90a37f21ae4052135750a4a.png?wh=1769*3198\" alt=\"unpreview\"></p><p></p>","comments":[{"had_liked":false,"id":115177,"user_name":"djfhchdh","can_delete":false,"product_type":"c1","uid":1484184,"ip_address":"","ucode":"E71D75328CE398","user_header":"https://static001.geekbang.org/account/avatar/00/16/a5/98/a65ff31a.jpg","comment_is_top":false,"comment_ctime":1563503855,"is_pvip":false,"replies":[{"id":"42062","content":"√","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1563507256,"ip_address":"","comment_id":115177,"utype":1}],"discussion_count":4,"race_medal":0,"score":"456830037231","product_id":100029001,"comment_content":"机密性由对称加密AES保证，完整性由SHA384摘要算法保证，身份认证和不可否认由RSA非对称加密保证","like_count":107,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459002,"discussion_content":"√","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563507256,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1311360,"avatar":"https://static001.geekbang.org/account/avatar/00/14/02/80/7e117d12.jpg","nickname":"zeng","note":"","ucode":"8CA706274DFA3B","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":382140,"discussion_content":"身份认证和不可否认是不是还与数字签名有关啊？通过CA来保证对方的身份是可信的","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1625448948,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1447741,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKq0oQVibKcmYJqmpqaNNQibVgia7EsEgW65LZJIpDZBMc7FyMcs7J1JmFCtp06pY8ibbcpW4ibRtG7Frg/132","nickname":"zhoufeng","note":"","ucode":"6F92F7866F9EB4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1311360,"avatar":"https://static001.geekbang.org/account/avatar/00/14/02/80/7e117d12.jpg","nickname":"zeng","note":"","ucode":"8CA706274DFA3B","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":582836,"discussion_content":"数字签名不就是RSA非对称加密算法么","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659692883,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":382140,"ip_address":"中国香港"},"score":582836,"extra":""}]},{"author":{"id":1165671,"avatar":"https://static001.geekbang.org/account/avatar/00/11/c9/67/0f74bf61.jpg","nickname":"昵称还没想好。","note":"","ucode":"21E6001F29951B","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":560570,"discussion_content":"CA发布证书上的数字签名(指纹+证书发布方私钥)用来解决不可否认的问题","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649393670,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117315,"user_name":"-W.LI-","can_delete":false,"product_type":"c1","uid":1210699,"ip_address":"","ucode":"3556786538664F","user_header":"https://static001.geekbang.org/account/avatar/00/12/79/4b/740f91ca.jpg","comment_is_top":false,"comment_ctime":1564022425,"is_pvip":false,"replies":[{"id":"42977","content":"本地证书是用来做双向认证的，服务器用客户端的证书来验证客户端的证书。<br><br>通常我们上网是单向认证，只验证服务器的身份，客户端（也就是用户）的身份不用证书验证。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1564034180,"ip_address":"","comment_id":117315,"utype":1}],"discussion_count":1,"race_medal":0,"score":"121823106713","product_id":100029001,"comment_content":"老师好!有个问题，之前调用第三方的支付走https协议都需要本地配置一个证书。为啥最近有个项目也是用的https协议(url里会放token)。直接和http一样调用就好了，不需要本地配置证书了呢？","like_count":29,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459912,"discussion_content":"本地证书是用来做双向认证的，服务器用客户端的证书来验证客户端的证书。\n\n通常我们上网是单向认证，只验证服务器的身份，客户端（也就是用户）的身份不用证书验证。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564034180,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":115407,"user_name":"David Mao","can_delete":false,"product_type":"c1","uid":1307248,"ip_address":"","ucode":"217112492D0955","user_header":"https://static001.geekbang.org/account/avatar/00/13/f2/70/8159901c.jpg","comment_is_top":false,"comment_ctime":1563581672,"is_pvip":true,"replies":[{"id":"42327","content":"如果网站是http而不是https，那么浏览器就会认为网站不安全，有风险。<br><br>如果证书内容不完善，或者被列入了黑名单，那么浏览器也可以提示用户有危险。<br><br>这些的关键都是证书，用证书里的信息，来验证网站的有效性、真实性。<br><br>因为证书用来证明网站的身份，就像身份证、学位证一样，如果随便颁发，那么它的可靠性就得不到保证，所以必须要由指定信任的专门机构来颁发，由ca来“背书”，保证证书和它关联的网站是安全可靠的。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1563757729,"ip_address":"","comment_id":115407,"utype":1}],"discussion_count":2,"race_medal":0,"score":"91757894888","product_id":100029001,"comment_content":"老师，请教一下，我们现在正在申请SSL证书，SSL证书有专门的机构颁发，文中老师提到HTTPS能够鉴别危险网站，防止黑客篡改，这些具体是怎么做到的呢？由专门机构颁发的原因是什么？谢谢老师。","like_count":22,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459093,"discussion_content":"如果网站是http而不是https，那么浏览器就会认为网站不安全，有风险。\n\n如果证书内容不完善，或者被列入了黑名单，那么浏览器也可以提示用户有危险。\n\n这些的关键都是证书，用证书里的信息，来验证网站的有效性、真实性。\n\n因为证书用来证明网站的身份，就像身份证、学位证一样，如果随便颁发，那么它的可靠性就得不到保证，所以必须要由指定信任的专门机构来颁发，由ca来“背书”，保证证书和它关联的网站是安全可靠的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563757729,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1500391,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e4/e7/31944ee7.jpg","nickname":"千军万马万马@","note":"","ucode":"0BDAD22123435A","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582076,"discussion_content":"骗子也有身份证啊","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659180725,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"陕西"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":115110,"user_name":"彩色的沙漠","can_delete":false,"product_type":"c1","uid":1116183,"ip_address":"","ucode":"19A0975A5E69EA","user_header":"https://static001.geekbang.org/account/avatar/00/11/08/17/e63e50f3.jpg","comment_is_top":false,"comment_ctime":1563497051,"is_pvip":true,"replies":[{"id":"42053","content":"√","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1563500865,"ip_address":"","comment_id":115110,"utype":1}],"discussion_count":1,"race_medal":0,"score":"48808137307","product_id":100029001,"comment_content":"1、HTTPS相对于HTTP具有机密性，完整性，身份认证和不可否认的特性,HTTPS是HTTP over SSL&#47;TLS,HTTP&gt; HTTP over TCP&#47;IP<br>2、实现机密性可以采用加密手段，接口签名实现完整性，数字签名用于身份认证","like_count":11,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458970,"discussion_content":"√","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563500865,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":171001,"user_name":"Danpier","can_delete":false,"product_type":"c1","uid":1463474,"ip_address":"","ucode":"11E208FDE34961","user_header":"https://static001.geekbang.org/account/avatar/00/16/54/b2/5ea0b709.jpg","comment_is_top":false,"comment_ctime":1578816888,"is_pvip":false,"replies":[{"id":"66338","content":"这个分层没有统一的定论，ssl&#47;tls在tcp&#47;ip里属于应用层，但不能准确对应到osi的某一层，因为它即有会话功能，又有加解密表示。<br><br>我们只要会用、理解就行，不要过于拘泥于学术。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1578877060,"ip_address":"","comment_id":171001,"utype":1}],"discussion_count":1,"race_medal":0,"score":"40233522552","product_id":100029001,"comment_content":"有个疑问，维基百科 OSI 模型图表把 SSL\\TLS 归到第6层（表示层），文中说 SSL 属于第5层（会话层），这里是不是写错了？ 附：<br>https:&#47;&#47;en.wikipedia.org&#47;wiki&#47;OSI_model#Layer_6:_Presentation_Layer","like_count":10,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481199,"discussion_content":"这个分层没有统一的定论，ssl/tls在tcp/ip里属于应用层，但不能准确对应到osi的某一层，因为它即有会话功能，又有加解密表示。\n\n我们只要会用、理解就行，不要过于拘泥于学术。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578877060,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":258476,"user_name":"纳兰容若","can_delete":false,"product_type":"c1","uid":1605876,"ip_address":"","ucode":"2E1EA2CDFDA1A9","user_header":"https://static001.geekbang.org/account/avatar/00/18/80/f4/564209ea.jpg","comment_is_top":false,"comment_ctime":1604454813,"is_pvip":true,"replies":[{"id":"94188","content":"OpenSSL的官网上对各个版本写的很清楚，最早它是由ssleay发展来的，所以就沿用了0.98的版本号，后来又有好几个系列，比如1.01、1.10等等，小版本号用字母表示。<br><br>目前OpenSSL准备跳过2.0，直接出3.0，我们用最新的1.11就好了，之前的版本都将不再维护。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1604573842,"ip_address":"","comment_id":258476,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23079291293","product_id":100029001,"comment_content":"老师您好<br>一直以来不太明白openssl的各版本，我看官网上还有2.0和3.0的，还有后面还有t、h、j字母跟在后面，这些大概有什么区别，正常使用不知道选择什么版本好，老师有什么建议么<br>感谢老师回复","like_count":6,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":508668,"discussion_content":"OpenSSL的官网上对各个版本写的很清楚，最早它是由ssleay发展来的，所以就沿用了0.98的版本号，后来又有好几个系列，比如1.01、1.10等等，小版本号用字母表示。\n\n目前OpenSSL准备跳过2.0，直接出3.0，我们用最新的1.11就好了，之前的版本都将不再维护。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604573842,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":149239,"user_name":"而立斋","can_delete":false,"product_type":"c1","uid":1087258,"ip_address":"","ucode":"5FED6E9E148195","user_header":"https://static001.geekbang.org/account/avatar/00/10/97/1a/389eab84.jpg","comment_is_top":false,"comment_ctime":1573177756,"is_pvip":false,"replies":[{"id":"57355","content":"<br>1.正确。<br><br>2.机密性主要用对称加密实现，非对称加密虽然也可以，但是效率太低，不实用。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1573180892,"ip_address":"","comment_id":149239,"utype":1}],"discussion_count":2,"race_medal":0,"score":"23048014236","product_id":100029001,"comment_content":"1、https与http协议相比，最重要的是增加安全性，这种安全性的实现主要是依赖于两个协议底层依赖的协议是不同的，https在传输的应用层与传输层协议之间增加了ssl&#47;tls,这就使得http在固有协议之上增加一层专用用于处理数据安全的工具。<br><br>2、机密性：数据使用非对称加密传输<br>完整性：数据用公钥加密，私钥解密，数据生成摘要算法，同步传输","like_count":6,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":473790,"discussion_content":"\n1.正确。\n\n2.机密性主要用对称加密实现，非对称加密虽然也可以，但是效率太低，不实用。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573180892,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1087258,"avatar":"https://static001.geekbang.org/account/avatar/00/10/97/1a/389eab84.jpg","nickname":"而立斋","note":"","ucode":"5FED6E9E148195","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":46561,"discussion_content":"专栏结束这么久了，老师还给回复，给老哥点赞。最近正在精读大作，早知道我就天天留言了。哈哈","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573181833,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":115834,"user_name":"何用","can_delete":false,"product_type":"c1","uid":1377393,"ip_address":"","ucode":"B0C6E8176AE6FD","user_header":"https://static001.geekbang.org/account/avatar/00/15/04/71/0b949a4c.jpg","comment_is_top":false,"comment_ctime":1563755899,"is_pvip":false,"replies":[{"id":"42342","content":"是的，可能有这个隐患，就跟des一样。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1563758890,"ip_address":"","comment_id":115834,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23038592379","product_id":100029001,"comment_content":"P-256 是 NIST（美国国家标准技术研究所）和 NSA（美国国家安全局）推荐使用的曲线。而密码学界不信任这两个机构，所以 P-256 是有可能被秘密破解但出于政治考虑而未公开？","like_count":6,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459306,"discussion_content":"是的，可能有这个隐患，就跟des一样。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563758890,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":300082,"user_name":"海绵薇薇","can_delete":false,"product_type":"c1","uid":1601296,"ip_address":"","ucode":"37C7CC2EB81909","user_header":"https://static001.geekbang.org/account/avatar/00/18/6f/10/bfbf81dc.jpg","comment_is_top":false,"comment_ctime":1624977717,"is_pvip":false,"replies":[{"id":"108829","content":"<br>1.https传输过程加密，但在两边是解密的，所以可以看到头字段，然后再走正常的判断处理流程。<br><br>2.如果cdn有证书和私钥，就可以解密数据，否则就只能做透明代理，在tcp层面转发。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1625034915,"ip_address":"","comment_id":300082,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18804846901","product_id":100029001,"comment_content":"老师好，我想问下，在HTTPS协议上传输的报文，是怎么被缓存的，因为传输的内容应该都是加密的，那么如何做到If-Match或者If-Modified-Since判断的呢？CDN可以解析加密过后的内容吗？","like_count":5,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":522636,"discussion_content":"\n1.https传输过程加密，但在两边是解密的，所以可以看到头字段，然后再走正常的判断处理流程。\n\n2.如果cdn有证书和私钥，就可以解密数据，否则就只能做透明代理，在tcp层面转发。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625034915,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":287746,"user_name":"zhangdroid","can_delete":false,"product_type":"c1","uid":1120940,"ip_address":"","ucode":"6254CEAEC274D3","user_header":"https://static001.geekbang.org/account/avatar/00/11/1a/ac/cec17283.jpg","comment_is_top":false,"comment_ctime":1618131015,"is_pvip":false,"replies":[{"id":"104498","content":"good。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1618143633,"ip_address":"","comment_id":287746,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18798000199","product_id":100029001,"comment_content":"HTTPS：即HTTP over SSL&#47;TLS，用来解决HTTP明文传输导致的不安全问题。流程大致为：<br>使用对称加密算法加解密报文，保证机密性；使用摘要算法保证数据完整性；使用证书CA来进行身份认证;而不可否认则由非对称加密算法来实现。由于非对称加密算法耗时比对称加密算法长，所以用非对称加密算法来加解密给报文加密的对称算法的秘钥：即使用公钥对对称加密算法秘钥进行加密，私钥用来相应地解密。","like_count":5,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518405,"discussion_content":"good。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618143633,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":160755,"user_name":"lesserror","can_delete":false,"product_type":"c1","uid":1351076,"ip_address":"","ucode":"25A54D1165FCF6","user_header":"https://static001.geekbang.org/account/avatar/00/14/9d/a4/e481ae48.jpg","comment_is_top":false,"comment_ctime":1576029443,"is_pvip":false,"replies":[{"id":"61324","content":"<br>1.如果网站的证书不可信（过期、失效、被废除、伪造），那么就可以说明网站是不安全的，而http不能对网站有任何的认证措施。<br><br>2.证书有dv、ov、ev三种，能从ca的层面证明网站的所有者。<br><br>3.当然，如果网站故意作恶，https也无法制止，它只能证明网站确实是如证书所声明的，不是假冒的。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1576035633,"ip_address":"","comment_id":160755,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18755898627","product_id":100029001,"comment_content":"老师，以下问题，麻烦解答：<br>1. 这就是 HTTPS 与 HTTP 最大的区别，它能够鉴别危险的网站?这个仅仅从浏览器弹出不安全的提示来说的嘛？或者说怎么个鉴别法？<br>2. 网站是否真实也无法验证。加了https的网站也有可能是钓鱼网站吧？也没法验证啊？","like_count":5,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477469,"discussion_content":"\n1.如果网站的证书不可信（过期、失效、被废除、伪造），那么就可以说明网站是不安全的，而http不能对网站有任何的认证措施。\n\n2.证书有dv、ov、ev三种，能从ca的层面证明网站的所有者。\n\n3.当然，如果网站故意作恶，https也无法制止，它只能证明网站确实是如证书所声明的，不是假冒的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576035633,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":135885,"user_name":"蒋润","can_delete":false,"product_type":"c1","uid":1169319,"ip_address":"","ucode":"07323D0648CC18","user_header":"https://static001.geekbang.org/account/avatar/00/11/d7/a7/2c979c01.jpg","comment_is_top":false,"comment_ctime":1569292571,"is_pvip":false,"replies":[{"id":"52142","content":"https传输的内容是加密的，所以抓包后看不到明文，是无法窜改数据的。<br><br>但xss属于内容攻击，报文本身是合法的，所以它不能防止。<br><br>https只能保证数据传输安全，但在链接的两端不能提供保护。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1569373431,"ip_address":"","comment_id":135885,"utype":1}],"discussion_count":2,"race_medal":0,"score":"18749161755","product_id":100029001,"comment_content":"老师你好  https能有效防止抓包然后篡改报文数据,防止xxs攻击吗","like_count":5,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468368,"discussion_content":"https传输的内容是加密的，所以抓包后看不到明文，是无法窜改数据的。\n\n但xss属于内容攻击，报文本身是合法的，所以它不能防止。\n\nhttps只能保证数据传输安全，但在链接的两端不能提供保护。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569373431,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1662987,"avatar":"https://static001.geekbang.org/account/avatar/00/19/60/0b/d7dddf19.jpg","nickname":"皮皮","note":"","ucode":"8C986AA546B44E","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":403934,"discussion_content":"是xss吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634192127,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":120644,"user_name":"业余草","can_delete":false,"product_type":"c1","uid":1126538,"ip_address":"","ucode":"99BDC1E629049D","user_header":"https://static001.geekbang.org/account/avatar/00/11/30/8a/b5ca7286.jpg","comment_is_top":false,"comment_ctime":1564966313,"is_pvip":false,"replies":[{"id":"44271","content":"什么错误，说出来看看。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1564968053,"ip_address":"","comment_id":120644,"utype":1}],"discussion_count":7,"race_medal":0,"score":"18744835497","product_id":100029001,"comment_content":"老师，我的个人网站：https:&#47;&#47;www.xttblog.com  在mac上的谷歌浏览器最新版中控制台总是会报一个错误，而我已经是https了，这个问题，空扰了我很久","like_count":4,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461416,"discussion_content":"什么错误，说出来看看。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1564968053,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1072015,"avatar":"https://static001.geekbang.org/account/avatar/00/10/5b/8f/4b0ab5db.jpg","nickname":"Middleware","note":"","ucode":"C0028293ECDD47","race_medal":1,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":118257,"discussion_content":"虽然你网站启用 https 协议。但是你的一些资源，比如 css,js, 或者其他地方有引入 http 的，就会出现这个了","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1578150712,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2549897,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/GeJFj6vZ5V5Piatibibiajiaxn9tf1beWHSrIPZzyn5t3Czm1lPUYWNkFIoh4Ol8gK07zH0k6LY94hcgZ2wosUGOKsg/132","nickname":"一亩三分地","note":"","ucode":"B0522ABBFFE2FE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583500,"discussion_content":"http, https 混用了，都改为https就好了，没找到那就....","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660146278,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"广东"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1000795,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/45/5b/df234e9c.jpg","nickname":"麦乐","note":"","ucode":"EDE3ECC1A88597","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4966,"discussion_content":"可能是内嵌的图片或者什么资源 我之前也碰到过 改改就好了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565861323,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1126538,"avatar":"https://static001.geekbang.org/account/avatar/00/11/30/8a/b5ca7286.jpg","nickname":"业余草","note":"","ucode":"99BDC1E629049D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3920,"discussion_content":"感谢老师的回复，具体错误：Mixed Content: The page at &#39;https://www.xttblog.com/&#39; was loaded over HTTPS, but requested an insecure resource &#39;http://www.xttblog.com/&#39;. This request has been blocked; the content must be served over HTTPS.我已经配置 https 了，url 地址栏里也是 https 请求","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1564982438,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1305388,"avatar":"https://static001.geekbang.org/account/avatar/00/13/eb/2c/ab72fda4.jpg","nickname":"Paper","note":"","ucode":"7EE26C2E892899","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":1126538,"avatar":"https://static001.geekbang.org/account/avatar/00/11/30/8a/b5ca7286.jpg","nickname":"业余草","note":"","ucode":"99BDC1E629049D","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4289,"discussion_content":"是页面上有其他资源访问了非https的网址吧","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565276662,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":3920,"ip_address":""},"score":4289,"extra":""},{"author":{"id":1126538,"avatar":"https://static001.geekbang.org/account/avatar/00/11/30/8a/b5ca7286.jpg","nickname":"业余草","note":"","ucode":"99BDC1E629049D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1305388,"avatar":"https://static001.geekbang.org/account/avatar/00/13/eb/2c/ab72fda4.jpg","nickname":"Paper","note":"","ucode":"7EE26C2E892899","race_medal":1,"user_type":1,"is_pvip":false},"discussion":{"id":4298,"discussion_content":"有可能，只是没找出来，我查了很久，没找到具体是哪的问题。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1565305121,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":4289,"ip_address":""},"score":4298,"extra":""}]}]},{"had_liked":false,"id":284128,"user_name":"懒人一枚","can_delete":false,"product_type":"c1","uid":1136398,"ip_address":"","ucode":"93A58A5E5467E9","user_header":"https://static001.geekbang.org/account/avatar/00/11/57/0e/5f0bb588.jpg","comment_is_top":false,"comment_ctime":1616072748,"is_pvip":false,"replies":[{"id":"103084","content":"这个问题跟浏览器实现有关，而与http协议就无关了，我个人对浏览器的工作原理不是很了解，只能说抱歉了。<br><br>其实对于http协议来说，浏览器就是一个普通的客户端，与wget、curl没有区别。而不认证书，那就是信任发生了问题，要么是过期失效，要么是上级证书有问题。<br><br>其他疑问可以看后面几讲，有不明白的随时问。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1616107697,"ip_address":"","comment_id":284128,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14500974636","product_id":100029001,"comment_content":"觉得大佬还可以再深入一些，比如浏览器是如何验证证书的，证书对浏览器对作用是什么，这个证书和我们平时接口调用使用的证书有什么区别呢，为什么有的网站有证书，浏览器却不认","like_count":4,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":517245,"discussion_content":"这个问题跟浏览器实现有关，而与http协议就无关了，我个人对浏览器的工作原理不是很了解，只能说抱歉了。\n\n其实对于http协议来说，浏览器就是一个普通的客户端，与wget、curl没有区别。而不认证书，那就是信任发生了问题，要么是过期失效，要么是上级证书有问题。\n\n其他疑问可以看后面几讲，有不明白的随时问。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616107697,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":277211,"user_name":"mini💝","can_delete":false,"product_type":"c1","uid":1079779,"ip_address":"","ucode":"3B6BA1B5177922","user_header":"https://static001.geekbang.org/account/avatar/00/10/79/e3/0ec0b681.jpg","comment_is_top":false,"comment_ctime":1612317069,"is_pvip":false,"replies":[{"id":"100590","content":"这个属于tcp&#47;ip层次的知识了，我简单说一下吧。<br><br>互联网上的机器都用ip地址来标记，但只有ip还不够，一台机器上会有很多不同的服务，为了区分，就要再加上端口，这样才能完整地标记一个网络服务。<br><br>比如有台主机的地址是10.1.1.1，它在端口22上开了ssh服务，21上开了ftp服务，80是http，443是https，这样客户端就可以用地址加上不同的端口去访问主机上的服务了。<br><br>http和https的默认端口都是国际标准化组织分配的，比如etcd就用了2379。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1612328335,"ip_address":"","comment_id":277211,"utype":1}],"discussion_count":2,"race_medal":0,"score":"14497218957","product_id":100029001,"comment_content":"请问老师 端口的作用是什么呢？为什么http和https的默认端口是不一样的","like_count":4,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":514963,"discussion_content":"这个属于tcp/ip层次的知识了，我简单说一下吧。\n\n互联网上的机器都用ip地址来标记，但只有ip还不够，一台机器上会有很多不同的服务，为了区分，就要再加上端口，这样才能完整地标记一个网络服务。\n\n比如有台主机的地址是10.1.1.1，它在端口22上开了ssh服务，21上开了ftp服务，80是http，443是https，这样客户端就可以用地址加上不同的端口去访问主机上的服务了。\n\nhttp和https的默认端口都是国际标准化组织分配的，比如etcd就用了2379。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612328335,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2542376,"avatar":"https://static001.geekbang.org/account/avatar/00/26/cb/28/21a8a29e.jpg","nickname":"夏天","note":"","ucode":"5F224DDAC94DFF","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":542325,"discussion_content":"IP 定位机器，port 定位进程","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1640707815,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":335640,"user_name":"cake","can_delete":false,"product_type":"c1","uid":1966533,"ip_address":"","ucode":"55A7FC6CC1204C","user_header":"https://static001.geekbang.org/account/avatar/00/1e/01/c5/b48d25da.jpg","comment_is_top":false,"comment_ctime":1645610261,"is_pvip":false,"replies":[{"id":"122631","content":"明文只是消息可见，而不安全的范围要更广一些，比如身份认证、防抵赖。","user_name":"作者回复","user_name_real":"编辑","uid":"1181974","ctime":1645617103,"ip_address":"","comment_id":335640,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10235544853","product_id":100029001,"comment_content":"“明文”和“不安全”仅凭 HTTP 自身是无力解决的，需要引入新的 HTTPS 协议  老师，请问下明文和不安全不是同一个东西么？为什么要分开说呢","like_count":3,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":552865,"discussion_content":"明文只是消息可见，而不安全的范围要更广一些，比如身份认证、防抵赖。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645617103,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":311007,"user_name":"爱编程的运维","can_delete":false,"product_type":"c1","uid":2535502,"ip_address":"","ucode":"696DBA399CCFA3","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/4faqHgQSawd4VzAtSv0IWDddm9NucYWibRpxejWPH5RUO310qv8pAFmc0rh0Qu6QiahlTutGZpia8VaqP2w6icybiag/132","comment_is_top":false,"comment_ctime":1631014412,"is_pvip":false,"replies":[{"id":"112725","content":"  我们通常所说的加密和密码学里的加密不是一个概念。<br><br>密码的正式名称应该叫password，存在数据库里实际上是做了摘要hash，比如md5、sha1，不是密码学里的用密钥算法加密。<br><br>而https里的加密是真正的密码学，里面有对称算法、非对称算法、摘要算法、证书等等，非常复杂。<br><br>可以再看后面的课程来加深理解。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1631063357,"ip_address":"","comment_id":311007,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10220949004","product_id":100029001,"comment_content":"像一般的web网站存储用户的密码，密码存在数据库表中都是加密后的，这个加密跟https中的加密有啥区别？","like_count":3,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526432,"discussion_content":"  我们通常所说的加密和密码学里的加密不是一个概念。\n\n密码的正式名称应该叫password，存在数据库里实际上是做了摘要hash，比如md5、sha1，不是密码学里的用密钥算法加密。\n\n而https里的加密是真正的密码学，里面有对称算法、非对称算法、摘要算法、证书等等，非常复杂。\n\n可以再看后面的课程来加深理解。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631063357,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":275228,"user_name":"fomy","can_delete":false,"product_type":"c1","uid":1125834,"ip_address":"","ucode":"CD87EA03B1F327","user_header":"https://static001.geekbang.org/account/avatar/00/11/2d/ca/02b0e397.jpg","comment_is_top":false,"comment_ctime":1611398602,"is_pvip":false,"replies":[{"id":"99927","content":"是的，但ca颁发证书有验证机制，钓鱼网站是无法伪装成官方网站的，因为它不拥有官方域名。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1611537038,"ip_address":"","comment_id":275228,"utype":1}],"discussion_count":2,"race_medal":0,"score":"10201333194","product_id":100029001,"comment_content":"如果每个人都可以生成一个证书，钓鱼网站也可以申请呀，不就没有什么安全性可言了吗？","like_count":3,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":514272,"discussion_content":"是的，但ca颁发证书有验证机制，钓鱼网站是无法伪装成官方网站的，因为它不拥有官方域名。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611537038,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1500391,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e4/e7/31944ee7.jpg","nickname":"千军万马万马@","note":"","ucode":"0BDAD22123435A","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582077,"discussion_content":"钓鱼性质的类似官方网站呢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659181096,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"北京"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":200337,"user_name":"钱","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1585573523,"is_pvip":false,"replies":[{"id":"74999","content":"加密算法设计出来就是要任何人都无法破解的，否则就是有后门。<br><br>这个是密码学的基本原则，必须有密钥才能解密，至于如何保管就是另外的事情。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1585617296,"ip_address":"","comment_id":200337,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10175508115","product_id":100029001,"comment_content":"1：你能说出 HTTPS 与 HTTP 有哪些区别吗？<br>       正如文中所言HTTPS比HTTP多了一个S，这个S代表安全，是基于SSL&#47;TSL实现的，SSL&#47;TSL是专门用于安全传输的，具体咋实现的比较复杂还没弄明白，主要就是各种加密算法的应用，后面继续看。<br><br>2：你知道有哪些方法能够实现机密性、完整性等安全特性呢？<br>这个问题不知如何回答，不会，看答案如下。<br>机密性由对称加密AES保证<br>安全性由SHA384摘要算法保证<br>身份认证由RSA非对称加密算法保证<br>不可否认由RSA非对称加密算法保证<br>符合以上四点的才算是安全的通信方式，实现安全性看样子很不容易啊！<br>这些加密算法，他的发明者是否比较容易破解呢？还是说加密之后即使是发明者也无能为力，那如果解密的东西丢啦咋弄？","like_count":3,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":489997,"discussion_content":"加密算法设计出来就是要任何人都无法破解的，否则就是有后门。\n\n这个是密码学的基本原则，必须有密钥才能解密，至于如何保管就是另外的事情。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585617296,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":115330,"user_name":"WL","can_delete":false,"product_type":"c1","uid":1173771,"ip_address":"","ucode":"6277DCD776B87E","user_header":"https://static001.geekbang.org/account/avatar/00/11/e9/0b/1171ac71.jpg","comment_is_top":false,"comment_ctime":1563534998,"is_pvip":false,"replies":[{"id":"42332","content":"应该在wireshark里看一下这些tcp包的端口、发送方向，应该不是https相关的包，可以过滤一下试试。<br><br>https必须在ssl&#47;tls握手之后才能发送http报文。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1563758223,"ip_address":"","comment_id":115330,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10153469590","product_id":100029001,"comment_content":"请问一下老师我这边用WireShark抓包，发现两个TLS请求和响应之间和两个HTTP请求和响应之间有很多个TCP的包，请问一下这些TCP的包是一个HTTP的响应没有发完后续一致在通过TCP包发HTTP响应的responseBody吗？ ","like_count":3,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459057,"discussion_content":"应该在wireshark里看一下这些tcp包的端口、发送方向，应该不是https相关的包，可以过滤一下试试。\n\nhttps必须在ssl/tls握手之后才能发送http报文。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563758223,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":115197,"user_name":"火车日记","can_delete":false,"product_type":"c1","uid":1480419,"ip_address":"","ucode":"62C57DFA6CDF74","user_header":"https://static001.geekbang.org/account/avatar/00/16/96/e3/dd40ec58.jpg","comment_is_top":false,"comment_ctime":1563506029,"is_pvip":false,"replies":[{"id":"42061","content":"√","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1563507244,"ip_address":"","comment_id":115197,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10153440621","product_id":100029001,"comment_content":"1 明文、不安全vs四个特性，端口80vs端口443，无加密解密流畅性vs一定的性能消耗 <br>2 对称加密算法保证机密性，散列值算法保证完成性和安全性","like_count":2,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459004,"discussion_content":"√","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563507244,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":278859,"user_name":"乘风破浪","can_delete":false,"product_type":"c1","uid":2406841,"ip_address":"","ucode":"937AF15F3FEBDC","user_header":"https://static001.geekbang.org/account/avatar/00/24/b9/b9/9e4d7aa4.jpg","comment_is_top":false,"comment_ctime":1613395698,"is_pvip":false,"replies":[{"id":"101376","content":"不知道秘钥也可以对密文做处理的，比如增删部分数据，而加密算法只是数学运算，不管数据是什么样都可以解密。缺少完整性验证，那么解密出来的就可能是错误的数据。<br><br>当然这里说的手法比较简单，真正的攻击是很复杂的，会做精心的设计。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1613518011,"ip_address":"","comment_id":278859,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5908362994","product_id":100029001,"comment_content":"机密性虽然可以让数据成为“秘密”，但不能防止黑客对数据的修改，黑客可以替换数据，调整数据的顺序，或者增加、删除部分数据，破坏通信过程。<br>一个疑问，黑客如果不知道加密的秘钥，他截获了数据，怎么篡改数据，又如何加密？接受者又如何解密？接受者还用原来的秘钥解不了。如果黑客能获得秘钥，他就可以随便改，完整性也就没法保证了。<br>感觉数据完整性变成了鸡生蛋，蛋生鸡的问题。","like_count":2,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":354092,"discussion_content":"AEAD已经包含了完整性校验，我们之前讨论的是最原始的算法情况","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615251059,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2406841,"avatar":"https://static001.geekbang.org/account/avatar/00/24/b9/b9/9e4d7aa4.jpg","nickname":"乘风破浪","note":"","ucode":"937AF15F3FEBDC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":350019,"discussion_content":"经过思考，感觉可能这样解释比较合理。\n因为没有完整性校验，服务器无法辨识消息是否被篡改，这种破解不是依靠破解出秘钥，而是通过大量尝试，并分析服务器的回应，有可能推测出明文。\n---现代的对称加密算法有AEAD（Authenticated Encryption with Associated Data）能力，如AES-256等，能防止用无效密码解密，但和上面的推测分析不是一码事，并不能阻止上述方式猜测明文，而只能引入摘要算法，保证消息的完整性。\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1613660270,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":115332,"user_name":"锦","can_delete":false,"product_type":"c1","uid":1468298,"ip_address":"","ucode":"CB0EB4B68C468B","user_header":"https://static001.geekbang.org/account/avatar/00/16/67/8a/babd74dc.jpg","comment_is_top":false,"comment_ctime":1563535723,"is_pvip":false,"replies":[{"id":"42328","content":"可以看一下https的协议栈，它的下面还是tcp&#47;ip。<br><br>拿OpenSSL来说，它提供了一系列的接口函数，比如SSL_read、SSL_write，加密后封装成tls记录，再交给tcp传输。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1563757980,"ip_address":"","comment_id":115332,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5858503019","product_id":100029001,"comment_content":"老师好，有几个问题请教下：“收发报文不再使用 Socket API，而是调用专门的安全接口。”这个安全接口是什么呢？另外SSL&#47;TLS运行在第五层，通讯不走下层TCP&#47;IP的话，怎么把消息发到交换机呢？","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459059,"discussion_content":"可以看一下https的协议栈，它的下面还是tcp/ip。\n\n拿OpenSSL来说，它提供了一系列的接口函数，比如SSL_read、SSL_write，加密后封装成tls记录，再交给tcp传输。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563757980,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":348142,"user_name":"Geek_21a73c","can_delete":false,"product_type":"c1","uid":3014444,"ip_address":"","ucode":"104A4AD89DA6BC","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q3auHgzwzM74658w9PQeTM4TcM14BzfpJnVLrsciaS26ibRwRbCE09ydI6UlZhFrJh7iaVLp2xxhBppVDKLyRRg9Q/132","comment_is_top":false,"comment_ctime":1654777809,"is_pvip":false,"replies":[{"id":"126934","content":"Windows环境比较复杂，可能是其他因素干扰了，可以尝试虚拟机或者docker环境。","user_name":"作者回复","user_name_real":"编辑","uid":"1181974","ctime":1655097759,"ip_address":"","comment_id":348142,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1654777809","product_id":100029001,"comment_content":"www.chrono.com 拒绝了我们的连接请求。这个问题怎么解决呢<br><br>C:\\Windows\\System32\\drivers\\etc\\hosts写入了127.0.0.1 activate.navicat.com<br>127.0.0.1 www.chrono.com<br>127.0.0.1 www.metroid.net<br>127.0.0.1 origin.io<br><br>打开了nginx.exe<br>","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":575767,"discussion_content":"Windows环境比较复杂，可能是其他因素干扰了，可以尝试虚拟机或者docker环境。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655097759,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":344186,"user_name":"泥鳅儿","can_delete":false,"product_type":"c1","uid":1323000,"ip_address":"","ucode":"26B47C8FC67615","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/ojfRyNRvy1x3Mia0nssz6CNPHrHXwPPmibvds1URgoHQuKXrGiaxrEbsT6sAvuK4N4AOicySh8S9iaWcOLjteOl6Kgg/132","comment_is_top":false,"comment_ctime":1651332285,"is_pvip":false,"replies":[{"id":"125713","content":"这里的不安全是指自定义证书没有ca认证，不能确认身份，加密算法还是会发挥作用的。<br><br>是否安全要看选择的算法。","user_name":"作者回复","user_name_real":"编辑","uid":"1181974","ctime":1651540013,"ip_address":"","comment_id":344186,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1651332285","product_id":100029001,"comment_content":"您好，老师，我用openssl 生成了一个自定义证书，用https访问网站提示是不安全的，我点击继续前往，传输的数据会加密吗，这种加密安全吗，容易被破解吗","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":569722,"discussion_content":"这里的不安全是指自定义证书没有ca认证，不能确认身份，加密算法还是会发挥作用的。\n\n是否安全要看选择的算法。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651540013,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":341787,"user_name":"Gpz","can_delete":false,"product_type":"c1","uid":1558395,"ip_address":"","ucode":"E7D947147CD888","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/TT9U2vBd5X8hibafqhhp9GCJibu26W5WCFtiaof2Whrljy8kLgOH94ZbGnyfaJZiaZib3U9UWgC8v2TJgWuK0JzSVww/132","comment_is_top":false,"comment_ctime":1649833484,"is_pvip":false,"replies":[{"id":"125017","content":"如果是在Windows等实机中可能环境会比较复杂，可以改用虚拟机，用tcpdump，在后面的补充文章里有用法说明。","user_name":"作者回复","user_name_real":"编辑","uid":"1181974","ctime":1650010256,"ip_address":"","comment_id":341787,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1649833484","product_id":100029001,"comment_content":"实验环境中，访问https对应的相关文件，wireShark没有任何抓包记录，这个要怎么处理呢？","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":563492,"discussion_content":"如果是在Windows等实机中可能环境会比较复杂，可以改用虚拟机，用tcpdump，在后面的补充文章里有用法说明。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650010256,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":336302,"user_name":"Alan He","can_delete":false,"product_type":"c1","uid":2033513,"ip_address":"","ucode":"A0780F4619D388","user_header":"https://static001.geekbang.org/account/avatar/00/1f/07/69/43cf2251.jpg","comment_is_top":false,"comment_ctime":1646058778,"is_pvip":false,"replies":[{"id":"122926","content":"这个可能就超出这个专栏的范围了，我也得及时更新自己的知识储备。","user_name":"作者回复","user_name_real":"编辑","uid":"1181974","ctime":1646115348,"ip_address":"","comment_id":336302,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1646058778","product_id":100029001,"comment_content":"如果能讲下MiTM及SSL Certificate Pining，则会更全面些。","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":553843,"discussion_content":"这个可能就超出这个专栏的范围了，我也得及时更新自己的知识储备。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646115349,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2033513,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/07/69/43cf2251.jpg","nickname":"Alan He","note":"","ucode":"A0780F4619D388","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":553844,"discussion_content":"理解 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646115432,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":553843,"ip_address":""},"score":553844,"extra":""}]}]},{"had_liked":false,"id":327691,"user_name":"忧天小鸡","can_delete":false,"product_type":"c1","uid":1073947,"ip_address":"","ucode":"A1412BDC108FD6","user_header":"https://static001.geekbang.org/account/avatar/00/10/63/1b/83ac7733.jpg","comment_is_top":false,"comment_ctime":1640239522,"is_pvip":false,"replies":[{"id":"119410","content":"看看后面的tls握手就会明白是怎么回事了。","user_name":"作者回复","user_name_real":"编辑","uid":"1181974","ctime":1640389943,"ip_address":"","comment_id":327691,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1640239522","product_id":100029001,"comment_content":"HTTP是在TLS协议之后发起的协议？<br>以前我一直理解成HTTP后发起TLS协议，我记得看到的文章也是这样的，我以前是错误的？","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":541458,"discussion_content":"看看后面的tls握手就会明白是怎么回事了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640389943,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":316279,"user_name":"ecanfly","can_delete":false,"product_type":"c1","uid":1011042,"ip_address":"","ucode":"D8F1D9C324E246","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6d/62/824e8aff.jpg","comment_is_top":false,"comment_ctime":1634257899,"is_pvip":false,"replies":[{"id":"114566","content":"<br>1.可以看后面讲tls握手过程，第三个随机数是生成主密钥的素材，需要混合三个随机数才能生成主密钥。<br><br>2.主密钥在客户端和服务器各自独立生成，不会交换，算法来保证两端生成的密钥的一致的。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1634264408,"ip_address":"","comment_id":316279,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1634257899","product_id":100029001,"comment_content":"最近学习了TLS生成会话密钥，有个问题一直让我很疑惑，也没有找到答案，希望老师可以答疑下：<br><br>1、客户端第三次生成随机数后，这个随机数就是会话密钥吗？还是说与前面的2个随机数一起生成一个密钥？<br>2、生成的密钥是直接传个服务端吗？还是说服务端拿着第三次生成的密钥，根据约定的算法自己生成会话密钥？","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":528338,"discussion_content":"\n1.可以看后面讲tls握手过程，第三个随机数是生成主密钥的素材，需要混合三个随机数才能生成主密钥。\n\n2.主密钥在客户端和服务器各自独立生成，不会交换，算法来保证两端生成的密钥的一致的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634264408,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":310018,"user_name":"silence","can_delete":false,"product_type":"c1","uid":1540936,"ip_address":"","ucode":"92689E713088CB","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/eHNmzejyQW9Ag5g3EELS1d9pTgJsvxC7CxSCxIFQqeFLXUDT52HWianQWzw14kaAT4P9UhTUSNficc9W5DlWZWJQ/132","comment_is_top":false,"comment_ctime":1630459056,"is_pvip":false,"replies":[{"id":"112336","content":"是先tcp握手建立tcp连接，然后再ssl握手建立ssl连接，可以看后面的协议解析。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1630472877,"ip_address":"","comment_id":310018,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1630459056","product_id":100029001,"comment_content":"老师请问建立了ssl连接，还需要建立tcp连接吗，还需要三次握手吗","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526101,"discussion_content":"是先tcp握手建立tcp连接，然后再ssl握手建立ssl连接，可以看后面的协议解析。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630472877,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":305606,"user_name":"Geek_e2fecb","can_delete":false,"product_type":"c1","uid":2724897,"ip_address":"","ucode":"AF27008753DC40","user_header":"","comment_is_top":false,"comment_ctime":1628068375,"is_pvip":false,"replies":[{"id":"110573","content":"可以看后面的tls握手讲解，先是tcp握手，然后是tls握手，不过这里面对rtt的解释不一样。<br><br>一般说tcp的rtt是1.5个，而tls握手要看使用的是rsa还是ecdhe，并且是只看七层的消息往返，可以自己数一下。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1628085573,"ip_address":"","comment_id":305606,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1628068375","product_id":100029001,"comment_content":"老师你好，HTTPS的话，一共又有多少个RTT呢？","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":524446,"discussion_content":"可以看后面的tls握手讲解，先是tcp握手，然后是tls握手，不过这里面对rtt的解释不一样。\n\n一般说tcp的rtt是1.5个，而tls握手要看使用的是rsa还是ecdhe，并且是只看七层的消息往返，可以自己数一下。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628085573,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":295481,"user_name":"Unknown element","can_delete":false,"product_type":"c1","uid":2028277,"ip_address":"","ucode":"34A129800D0238","user_header":"https://static001.geekbang.org/account/avatar/00/1e/f2/f5/b82f410d.jpg","comment_is_top":false,"comment_ctime":1622445193,"is_pvip":false,"replies":[{"id":"107332","content":"语义相同，但下层的传输协议换成了SSL&#47;TLS，看协议栈就清楚了。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1622509936,"ip_address":"","comment_id":295481,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1622445193","product_id":100029001,"comment_content":"老师问下HTTPS和HTTP&#47;1.1有什么关系吗","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":521095,"discussion_content":"语义相同，但下层的传输协议换成了SSL/TLS，看协议栈就清楚了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622509936,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":295361,"user_name":"Geek_liu","can_delete":false,"product_type":"c1","uid":1783983,"ip_address":"","ucode":"3E818A4C46D67A","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83er0mAxKX6eKqGqDbPibibIJx2hkrvZm9flKicuBdJn3qlicfpFVmUZtpqo2iaeIYGgknEyKwxQDia1jFyUw/132","comment_is_top":false,"comment_ctime":1622383852,"is_pvip":false,"replies":[{"id":"107208","content":"GitHub项目上的测试uri都可以用，如果遇到了问题可以在这里或者GitHub上提问。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1622429248,"ip_address":"","comment_id":295361,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1622383852","product_id":100029001,"comment_content":"老师你好，请问现在哪些实验环境用不了了吗","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":521047,"discussion_content":"GitHub项目上的测试uri都可以用，如果遇到了问题可以在这里或者GitHub上提问。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622429248,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2028811,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/f5/0b/73628618.jpg","nickname":"兔嘟嘟","note":"","ucode":"5A9042B4C7670C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":386187,"discussion_content":"都可以用","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627459054,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":292815,"user_name":"Krystal","can_delete":false,"product_type":"c1","uid":1441810,"ip_address":"","ucode":"A8986403DE927C","user_header":"https://static001.geekbang.org/account/avatar/00/16/00/12/7048984b.jpg","comment_is_top":false,"comment_ctime":1620989404,"is_pvip":true,"replies":[{"id":"106009","content":"改nginx的配置文件，用grep搜一下，找到相应的位置，改好后重启openresty。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1620996932,"ip_address":"","comment_id":292815,"utype":1}],"discussion_count":1,"race_medal":4,"score":"1620989404","product_id":100029001,"comment_content":"老师，如果我要修改443端口要怎么改呢？就是https端口映射为其他端口，如444","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":519967,"discussion_content":"改nginx的配置文件，用grep搜一下，找到相应的位置，改好后重启openresty。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620996932,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":287899,"user_name":"张欣","can_delete":false,"product_type":"c1","uid":2448960,"ip_address":"","ucode":"557C42848C77E6","user_header":"https://static001.geekbang.org/account/avatar/00/25/5e/40/dee7906c.jpg","comment_is_top":false,"comment_ctime":1618212667,"is_pvip":false,"replies":[{"id":"104544","content":"rsa&#47;dhe&#47;ecdhe的数学运算很慢，比对称加密差好几个数量级，所以不适用。<br><br>可以看后面的介绍，有实际对比的例子。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1618217402,"ip_address":"","comment_id":287899,"utype":1}],"discussion_count":0,"race_medal":0,"score":"1618212667","product_id":100029001,"comment_content":"老师，为什么说只使用非对称加密效率会低呢？","like_count":0},{"had_liked":false,"id":287897,"user_name":"张欣","can_delete":false,"product_type":"c1","uid":2448960,"ip_address":"","ucode":"557C42848C77E6","user_header":"https://static001.geekbang.org/account/avatar/00/25/5e/40/dee7906c.jpg","comment_is_top":false,"comment_ctime":1618212350,"is_pvip":false,"replies":[{"id":"104545","content":"可能RSA还是主流，毕竟是非对称的开山鼻祖，但用ecdsa签名的也有，浏览器也都支持。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1618217480,"ip_address":"","comment_id":287897,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1618212350","product_id":100029001,"comment_content":"老师，CA机构的证书认证一般是用的RSA算法做的签名认证么？","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518458,"discussion_content":"可能RSA还是主流，毕竟是非对称的开山鼻祖，但用ecdsa签名的也有，浏览器也都支持。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618217480,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":282421,"user_name":"小童","can_delete":false,"product_type":"c1","uid":1763395,"ip_address":"","ucode":"300444B520E79D","user_header":"https://static001.geekbang.org/account/avatar/00/1a/e8/43/f9c0faed.jpg","comment_is_top":false,"comment_ctime":1615248091,"is_pvip":false,"replies":[{"id":"102544","content":"great","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1615249798,"ip_address":"","comment_id":282421,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1615248091","product_id":100029001,"comment_content":"http 和 https 区别:<br><br>1. 下层协议不同，http是建立在TCP上, https是建立在TLS.<br><br>2. http是明文传输，https是加密通信。<br>3. Https还有鉴别网络安全功能。","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":516740,"discussion_content":"great","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615249798,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":265124,"user_name":"123","can_delete":false,"product_type":"c1","uid":2254642,"ip_address":"","ucode":"701F0C970CBE70","user_header":"https://static001.geekbang.org/account/avatar/00/22/67/32/efb8ca32.jpg","comment_is_top":false,"comment_ctime":1606786915,"is_pvip":false,"replies":[{"id":"96259","content":"<br>1.如果你理解了https协议和它的握手过程，那么这个问题就很容易回答，答案是yes。可以再看后面的握手过程解析。<br><br>2.ssl网关更专业，可以专门做安全工作，这样服务器就省心了，专注于业务，道理和反向代理是差不多的。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1606790857,"ip_address":"","comment_id":265124,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1606786915","product_id":100029001,"comment_content":"老师您好，有几个问题想要请教您。<br>1、请问是不是在普通的服务器端配置了ssl证书就可以实现单向的SSL安全通信了？客户端需要配置什么嘛？或者客户端是否需要安装相应的组件？<br>2、服务器部署SSL证书就可以实现ssl通道建立的过程，那为什么还需要ssl网关呢？是否可以这样理解，因为前者仅能负责自己服务的保护，后者可以同时实现对许多服务资源的保护（当然价格也更贵）。","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":510814,"discussion_content":"\n1.如果你理解了https协议和它的握手过程，那么这个问题就很容易回答，答案是yes。可以再看后面的握手过程解析。\n\n2.ssl网关更专业，可以专门做安全工作，这样服务器就省心了，专注于业务，道理和反向代理是差不多的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606790857,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":227799,"user_name":"Maske","can_delete":false,"product_type":"c1","uid":1696847,"ip_address":"","ucode":"A19BB41A47E852","user_header":"https://static001.geekbang.org/account/avatar/00/19/e4/4f/df6d810d.jpg","comment_is_top":false,"comment_ctime":1592483549,"is_pvip":true,"replies":[{"id":"84022","content":"good","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1592528539,"ip_address":"","comment_id":227799,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1592483549","product_id":100029001,"comment_content":"默认端口中，http为80 https为443 ；http为明文传输，https为加密传输；https需要用到SSL证书，http不用；http基于tcp&#47;ip,https在tcp&#47;ip之上新增了tls&#47;ssl层；","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":498785,"discussion_content":"good","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592528539,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":227690,"user_name":"潇潇雨歇","can_delete":false,"product_type":"c1","uid":1251429,"ip_address":"","ucode":"4BD52BF0F0A084","user_header":"https://static001.geekbang.org/account/avatar/00/13/18/65/35361f02.jpg","comment_is_top":false,"comment_ctime":1592455229,"is_pvip":false,"replies":[{"id":"83931","content":"学习进度过半了，继续努力。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1592465960,"ip_address":"","comment_id":227690,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1592455229","product_id":100029001,"comment_content":"1、默认端口不同，HTTP：over TCP&#47;IP，HTTPS：over SSL&#47;TLS<br>2、使用加密算法，密钥，证书认证等方法","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":498749,"discussion_content":"学习进度过半了，继续努力。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592465960,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1251429,"avatar":"https://static001.geekbang.org/account/avatar/00/13/18/65/35361f02.jpg","nickname":"潇潇雨歇","note":"","ucode":"4BD52BF0F0A084","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":284185,"discussion_content":"好的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592465992,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":223235,"user_name":"KaKaKa","can_delete":false,"product_type":"c1","uid":1480732,"ip_address":"","ucode":"07D1980A71F321","user_header":"https://static001.geekbang.org/account/avatar/00/16/98/1c/d7a1439e.jpg","comment_is_top":false,"comment_ctime":1591024977,"is_pvip":false,"replies":[{"id":"82262","content":"many thanks。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1591059692,"ip_address":"","comment_id":223235,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1591024977","product_id":100029001,"comment_content":"良心课程！良心老师！","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497067,"discussion_content":"many thanks。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591059692,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":171101,"user_name":"数禾极客","can_delete":false,"product_type":"c1","uid":1006508,"ip_address":"","ucode":"7C7D50C824DB86","user_header":"https://static001.geekbang.org/account/avatar/00/0f/5b/ac/1fadba55.jpg","comment_is_top":false,"comment_ctime":1578844967,"is_pvip":false,"replies":[{"id":"66335","content":"<br>往后看，后面都会讲，有不理解的再问。<br><br>","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1578876961,"ip_address":"","comment_id":171101,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1578844967","product_id":100029001,"comment_content":"老师您好！请问https和浏览器是怎么交互的 ，根证书又有什么关联 。浏览器获取服务https证书是根证书吗？","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481241,"discussion_content":"\n往后看，后面都会讲，有不理解的再问。\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578876961,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":170009,"user_name":"Wr","can_delete":false,"product_type":"c1","uid":1713790,"ip_address":"","ucode":"738B316AA2AD66","user_header":"https://static001.geekbang.org/account/avatar/00/1a/26/7e/823c083e.jpg","comment_is_top":false,"comment_ctime":1578491976,"is_pvip":false,"replies":[{"id":"65987","content":"<br>good。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1578530794,"ip_address":"","comment_id":170009,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1578491976","product_id":100029001,"comment_content":"1、https下层由“ TCP&#47;IP”变成了“ SSL&#47;TLS”，从而具备了机密性、完整性、身份认证、不可否认这四个特性<br>2、机密性由对称加密AES保证，完整性由SHA384摘要算法保证，身份认证和不可否认由RSA非对称加密保证（此处不了解，借鉴）","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480807,"discussion_content":"\ngood。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578530794,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":161086,"user_name":"sunözil","can_delete":false,"product_type":"c1","uid":1447909,"ip_address":"","ucode":"8C57787EF32ECE","user_header":"https://static001.geekbang.org/account/avatar/00/16/17/e5/4939b0c6.jpg","comment_is_top":false,"comment_ctime":1576116614,"is_pvip":false,"replies":[{"id":"61412","content":"GmSSL是OpenSSL的分支，但应用的并不广，nginx、Apache等项目并没有提供官方支持，可能需要比较多的自己开发改造了。<br><br>我觉得可以看一下它的官方文档，如何替换OpenSSL。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1576121654,"ip_address":"","comment_id":161086,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1576116614","product_id":100029001,"comment_content":"老师，目前项目使用了https，如何换成GmSSL呢？","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477593,"discussion_content":"GmSSL是OpenSSL的分支，但应用的并不广，nginx、Apache等项目并没有提供官方支持，可能需要比较多的自己开发改造了。\n\n我觉得可以看一下它的官方文档，如何替换OpenSSL。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576121654,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":136676,"user_name":"qiezitx","can_delete":false,"product_type":"c1","uid":1664274,"ip_address":"","ucode":"AEA470E33B4C19","user_header":"https://static001.geekbang.org/account/avatar/00/19/65/12/98fe9d80.jpg","comment_is_top":false,"comment_ctime":1569489863,"is_pvip":false,"replies":[{"id":"52499","content":"认真的学习态度！","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1569547889,"ip_address":"","comment_id":136676,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1569489863","product_id":100029001,"comment_content":"1、外面的：uri里的协议名和默认端口号不一样，里面的：HTTP是基于TCP&#47;IP，HTTPS是基于SSL&#47;TLS<br>2、目前的理解：机密性分信道机密和内容机密，分别对应密钥交换算法和加密算法；身份认证对应签名算法；完整性对应摘要算法；不可否认性能理解，但还没参透对应什么。<br>继续学习","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468749,"discussion_content":"认真的学习态度！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569547889,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":133844,"user_name":"肥low","can_delete":false,"product_type":"c1","uid":1043480,"ip_address":"","ucode":"A158AFAAB8C742","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ec/18/bf7254d3.jpg","comment_is_top":false,"comment_ctime":1568683015,"is_pvip":false,"replies":[{"id":"51369","content":"sha256保证的是完整性，不能实现机密性。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1568695702,"ip_address":"","comment_id":133844,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1568683015","product_id":100029001,"comment_content":"1. http是http over tcp&#47;ip，https是http over tls&#47;ssl over tcp&#47;ip，https比http在会话层多了tls&#47;ssl<br>2. 通过sha256摘要算法保证数据机密性、完整性，通过非对称加密算法实现身份认证，数据不可逆性","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467529,"discussion_content":"sha256保证的是完整性，不能实现机密性。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568695702,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1043480,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/ec/18/bf7254d3.jpg","nickname":"肥low","note":"","ucode":"A158AFAAB8C742","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":13742,"discussion_content":"多谢老师提点 确实错了 应该是aes对称加密算法保证机密性","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568696940,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":123079,"user_name":"J.D.Chi","can_delete":false,"product_type":"c1","uid":1035855,"ip_address":"","ucode":"34812AEF95C7AB","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ce/4f/3a89d29a.jpg","comment_is_top":false,"comment_ctime":1565602112,"is_pvip":false,"replies":[{"id":"45204","content":"SM系列算法是国产算法，但在国际上用的不多。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1565603867,"ip_address":"","comment_id":123079,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1565602112","product_id":100029001,"comment_content":"OpenSSL1.1.1 开始支持国密算法。","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462526,"discussion_content":"SM系列算法是国产算法，但在国际上用的不多。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565603867,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}