{"id":10098,"title":"第21讲 | 数据中心：我是开发商，自己拿地盖别墅","content":"<p>无论你是看新闻、下订单、看视频、下载文件，最终访问的目的地都在数据中心里面。我们前面学了这么多的网络协议和网络相关的知识，你是不是很好奇，数据中心究竟长啥样呢？</p><p>数据中心是一个大杂烩，几乎要用到前面学过的所有知识。</p><p>前面讲办公室网络的时候，我们知道办公室里面有很多台电脑。如果要访问外网，需要经过一个叫<strong>网关</strong>的东西，而网关往往是一个路由器。</p><p>数据中心里面也有一大堆的电脑，但是它和咱们办公室里面的笔记本或者台式机不一样。数据中心里面是服务器。服务器被放在一个个叫作<strong>机架</strong>（<strong>Rack</strong>）的架子上面。</p><p>数据中心的入口和出口也是路由器，由于在数据中心的边界，就像在一个国家的边境，称为<strong>边界路由器</strong>（<strong>Border Router</strong>）。为了高可用，边界路由器会有多个。</p><p>一般家里只会连接一个运营商的网络，而为了高可用，为了当一个运营商出问题的时候，还可以通过另外一个运营商来提供服务，所以数据中心的边界路由器会连接多个运营商网络。</p><p>既然是路由器，就需要跑路由协议，数据中心往往就是路由协议中的自治区域（AS）。数据中心里面的机器要想访问外面的网站，数据中心里面也是有对外提供服务的机器，都可以通过BGP协议，获取内外互通的路由信息。这就是我们常听到的<strong>多线BGP</strong>的概念。</p><!-- [[[read_end]]] --><p>如果数据中心非常简单，没几台机器，那就像家里或者宿舍一样，所有的服务器都直接连到路由器上就可以了。但是数据中心里面往往有非常多的机器，当塞满一机架的时候，需要有交换机将这些服务器连接起来，可以互相通信。</p><p>这些交换机往往是放在机架顶端的，所以经常称为<strong>TOR</strong>（<strong>Top Of</strong>  <strong>Rack</strong>）<strong>交换机</strong>。这一层的交换机常常称为<strong>接入层</strong>（<strong>Access Layer</strong>）。注意这个接入层和原来讲过的应用的接入层不是一个概念。</p><p><img src=\"https://static001.geekbang.org/resource/image/8f/f8/8fdfb8d4e1cd5a9a086f99b98a7555f8.jpg?wh=771*448\" alt=\"\"></p><p>当一个机架放不下的时候，就需要多个机架，还需要有交换机将多个机架连接在一起。这些交换机对性能的要求更高，带宽也更大。这些交换机称为<strong>汇聚层交换机</strong>（<strong>Aggregation Layer</strong>）。</p><p>数据中心里面的每一个连接都是需要考虑高可用的。这里首先要考虑的是，如果一台机器只有一个网卡，上面连着一个网线，接入到TOR交换机上。如果网卡坏了，或者不小心网线掉了，机器就上不去了。所以，需要至少两个网卡、两个网线插到TOR交换机上，但是两个网卡要工作得像一张网卡一样，这就是常说的<strong>网卡绑定</strong>（<strong>bond</strong>）。</p><p>这就需要服务器和交换机都支持一种协议<strong>LACP</strong>（<strong>Link Aggregation Control Protocol</strong>）。它们互相通信，将多个网卡聚合称为一个网卡，多个网线聚合成一个网线，在网线之间可以进行负载均衡，也可以为了高可用作准备。</p><p><img src=\"https://static001.geekbang.org/resource/image/84/94/84196dedd044cc135bfc28ede4687d94.jpg?wh=377*187\" alt=\"\"></p><p>网卡有了高可用保证，但交换机还有问题。如果一个机架只有一个交换机，它挂了，那整个机架都不能上网了。因而TOR交换机也需要高可用，同理接入层和汇聚层的连接也需要高可用性，也不能单线连着。</p><p>最传统的方法是，部署两个接入交换机、两个汇聚交换机。服务器和两个接入交换机都连接，接入交换机和两个汇聚都连接，当然这样会形成环，所以需要启用STP协议，去除环，但是这样两个汇聚就只能一主一备了。STP协议里我们学过，只有一条路会起作用。</p><p><img src=\"https://static001.geekbang.org/resource/image/11/50/116a168c0eb55fabd7786fca728bd850.jpg?wh=361*545\" alt=\"\"></p><p>交换机有一种技术叫作<strong>堆叠</strong>，所以另一种方法是，将多个交换机形成一个逻辑的交换机，服务器通过多根线分配连到多个接入层交换机上，而接入层交换机多根线分别连接到多个交换机上，并且通过堆叠的私有协议，形成<strong>双活</strong>的连接方式。</p><p><img src=\"https://static001.geekbang.org/resource/image/10/3a/10aa7eac3fd38dfc2a09d6475ff4d93a.jpg?wh=368*687\" alt=\"\"></p><p>由于对带宽要求更大，而且挂了影响也更大，所以两个堆叠可能就不够了，可以就会有更多的，比如四个堆叠为一个逻辑的交换机。</p><p>汇聚层将大量的计算节点相互连接在一起，形成一个集群。在这个集群里面，服务器之间通过二层互通，这个区域常称为一个<strong>POD</strong>（<strong>Point Of Delivery</strong>），有时候也称为一个<strong>可用区</strong>（<strong>Available Zon</strong>e）。</p><p>当节点数目再多的时候，一个可用区放不下，需要将多个可用区连在一起，连接多个可用区的交换机称为<strong>核心交换机</strong>。</p><p><img src=\"https://static001.geekbang.org/resource/image/08/13/080ce3bbe673de38e196b5b741a86313.jpg?wh=1288*782\" alt=\"\"></p><p>核心交换机吞吐量更大，高可用要求更高，肯定需要堆叠，但是往往仅仅堆叠，不足以满足吞吐量，因而还是需要部署多组核心交换机。核心和汇聚交换机之间为了高可用，也是全互连模式的。</p><p>这个时候还存在一个问题，出现环路怎么办？</p><p>一种方式是，不同的可用区在不同的二层网络，需要分配不同的网段。汇聚和核心之间通过三层网络互通的，二层都不在一个广播域里面，不会存在二层环路的问题。三层有环是没有问题的，只要通过路由协议选择最佳的路径就可以了。那为啥二层不能有环路，而三层可以呢？你可以回忆一下二层环路的情况。</p><p><img src=\"https://static001.geekbang.org/resource/image/be/yy/be86f9a94002cf8d849a229ce5993cyy.jpeg?wh=1920*1080\" alt=\"\"></p><p>如图，核心层和汇聚层之间通过内部的路由协议OSPF，找到最佳的路径进行访问，而且还可以通过ECMP等价路由，在多个路径之间进行负载均衡和高可用。</p><p>但是随着数据中心里面的机器越来越多，尤其是有了云计算、大数据，集群规模非常大，而且都要求在一个二层网络里面。这就需要二层互连从<strong>汇聚层</strong>上升为<strong>核心层</strong>，也即在核心以下，全部是二层互连，全部在一个广播域里面，这就是常说的<strong>大二层</strong>。</p><p><img src=\"https://static001.geekbang.org/resource/image/2a/2c/2aa3787c31c52defc7614c53f0a71d2c.jpg?wh=1259*784\" alt=\"\"></p><p>如果大二层横向流量不大，核心交换机数目不多，可以做堆叠，但是如果横向流量很大，仅仅堆叠满足不了，就需要部署多组核心交换机，而且要和汇聚层进行全互连。由于堆叠只解决一个核心交换机组内的无环问题，而组之间全互连，还需要其他机制进行解决。</p><p>如果是STP，那部署多组核心无法扩大横向流量的能力，因为还是只有一组起作用。</p><p>于是大二层就引入了<strong>TRILL</strong>（<strong>Transparent Interconnection of Lots of Link</strong>），即<strong>多链接透明互联协议</strong>。它的基本思想是，二层环有问题，三层环没有问题，那就把三层的路由能力模拟在二层实现。</p><p>运行TRILL协议的交换机称为<strong>RBridge</strong>，是<strong>具有路由转发特性的网桥设备</strong>，只不过这个路由是根据MAC地址来的，不是根据IP来的。</p><p>Rbridage之间通过<strong>链路状态协议</strong>运作。记得这个路由协议吗？通过它可以学习整个大二层的拓扑，知道访问哪个MAC应该从哪个网桥走；还可以计算最短的路径，也可以通过等价的路由进行负载均衡和高可用性。</p><p><img src=\"https://static001.geekbang.org/resource/image/b6/af/b6487347ebc5ec8f019e7ac82dd5d4af.jpeg?wh=1920*1080\" alt=\"\"></p><p>TRILL协议在原来的MAC头外面加上自己的头，以及外层的MAC头。TRILL头里面的Ingress RBridge，有点像IP头里面的源IP地址，Egress RBridge是目标IP地址，这两个地址是端到端的，在中间路由的时候，不会发生改变。而外层的MAC，可以有下一跳的Bridge，就像路由的下一跳，也是通过MAC地址来呈现的一样。</p><p>如图中所示的过程，有一个包要从主机A发送到主机B，中间要经过RBridge 1、RBridge 2、RBridge X等等，直到RBridge 3。在RBridge 2收到的包里面，分内外两层，内层就是传统的主机A和主机B的MAC地址以及内层的VLAN。</p><p>在外层首先加上一个TRILL头，里面描述这个包从RBridge 1进来的，要从RBridge 3出去，并且像三层的IP地址一样有跳数。然后再外面，目的MAC是RBridge 2，源MAC是RBridge 1，以及外层的VLAN。</p><p>当RBridge 2收到这个包之后，首先看MAC是否是自己的MAC，如果是，要看自己是不是Egress RBridge，也即是不是最后一跳；如果不是，查看跳数是不是大于0，然后通过类似路由查找的方式找到下一跳RBridge X，然后将包发出去。</p><p>RBridge 2发出去的包，内层的信息是不变的，外层的TRILL头里面。同样，描述这个包从RBridge 1进来的，要从RBridge 3出去，但是跳数要减1。外层的目标MAC变成RBridge X，源MAC变成RBridge 2。</p><p>如此一直转发，直到RBridge 3，将外层解出来，发送内层的包给主机B。</p><p>这个过程是不是和IP路由很像？</p><p>对于大二层的广播包，也需要通过分发树的技术来实现。我们知道STP是将一个有环的图，通过去掉边形成一棵树，而分发树是一个有环的图形成多棵树，不同的树有不同的VLAN，有的广播包从VLAN A广播，有的从VLAN B广播，实现负载均衡和高可用。</p><p><img src=\"https://static001.geekbang.org/resource/image/bf/f2/bfdd48216f55bdf674fd8638e61d4ff2.jpeg?wh=1920*1080\" alt=\"\"></p><p>核心交换机之外，就是边界路由器了。至此从服务器到数据中心边界的层次情况已经清楚了。</p><p>在核心交换上面，往往会挂一些安全设备，例如入侵检测、DDoS防护等等。这是整个数据中心的屏障，防止来自外来的攻击。核心交换机上往往还有负载均衡器，原理前面的章节已经说过了。</p><p>在有的数据中心里面，对于存储设备，还会有一个存储网络，用来连接SAN和NAS。但是对于新的云计算来讲，往往不使用传统的SAN和NAS，而使用部署在x86机器上的软件定义存储，这样存储也是服务器了，而且可以和计算节点融合在一个机架上，从而更加有效率，也就没有了单独的存储网络了。</p><p>于是整个数据中心的网络如下图所示。</p><p><img src=\"https://static001.geekbang.org/resource/image/dd/b3/dd39a95064b2132d78e3a2efb0723bb3.jpg?wh=4241*3321\" alt=\"\"></p><p>这是一个典型的三层网络结构。这里的三层不是指IP层，而是指接入层、汇聚层、核心层三层。这种模式非常有利于外部流量请求到内部应用。这个类型的流量，是从外到内或者从内到外，对应到上面那张图里，就是从上到下，从下到上，上北下南，所以称为<strong>南北流量</strong>。</p><p>但是随着云计算和大数据的发展，节点之间的交互越来越多，例如大数据计算经常要在不同的节点将数据拷贝来拷贝去，这样需要经过交换机，使得数据从左到右，从右到左，左西右东，所以称为<strong>东西流量</strong>。</p><p>为了解决东西流量的问题，演进出了<strong>叶脊网络</strong>（<strong>Spine/Leaf</strong>）。</p><ul>\n<li>\n<p><strong>叶子交换机</strong>（<strong>leaf</strong>），直接连接物理服务器。L2/L3网络的分界点在叶子交换机上，叶子交换机之上是三层网络。</p>\n</li>\n<li>\n<p><strong>脊交换机</strong>（<strong>spine switch</strong>），相当于核心交换机。叶脊之间通过ECMP动态选择多条路径。脊交换机现在只是为叶子交换机提供一个弹性的L3路由网络。南北流量可以不用直接从脊交换机发出，而是通过与leaf交换机并行的交换机，再接到边界路由器出去。</p>\n</li>\n</ul><p><img src=\"https://static001.geekbang.org/resource/image/99/92/99f86d113a629d81bb52786d80ca5c92.jpg?wh=891*825\" alt=\"\"></p><p>传统的三层网络架构是垂直的结构，而叶脊网络架构是扁平的结构，更易于水平扩展。</p><h2>小结</h2><p>好了，复杂的数据中心就讲到这里了。我们来总结一下，你需要记住这三个重点。</p><ul>\n<li>\n<p>数据中心分为三层。服务器连接到接入层，然后是汇聚层，再然后是核心层，最外面是边界路由器和安全设备。</p>\n</li>\n<li>\n<p>数据中心的所有链路都需要高可用性。服务器需要绑定网卡，交换机需要堆叠，三层设备可以通过等价路由，二层设备可以通过TRILL协议。</p>\n</li>\n<li>\n<p>随着云和大数据的发展，东西流量相对于南北流量越来越重要，因而演化为叶脊网络结构。</p>\n</li>\n</ul><p>最后，给你留两个思考题：</p><ol>\n<li>\n<p>对于数据中心来讲，高可用是非常重要的，每个设备都要考虑高可用，那跨机房的高可用，你知道应该怎么做吗？</p>\n</li>\n<li>\n<p>前面说的浏览新闻、购物、下载、看视频等行为，都是普通用户通过公网访问数据中心里面的资源。那IT管理员应该通过什么样的方式访问数据中心呢？</p>\n</li>\n</ol><p>我们的专栏更新到第21讲，不知你掌握得如何？每节课后我留的思考题，你都有没有认真思考，并在留言区写下答案呢？我会从<strong>已发布的文章中选出一批认真留言的同学</strong>，赠送<span class=\"orange\">学习奖励礼券</span>和我整理的<span class=\"orange\">独家网络协议知识图谱</span>。</p><p>欢迎你留言和我讨论。趣谈网络协议，我们下期见！</p>","comments":[{"had_liked":false,"id":14782,"user_name":"浪子恒心","can_delete":false,"product_type":"c1","uid":1008441,"ip_address":"","ucode":"2A5DCD25895E8F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/63/39/486faadf.jpg","comment_is_top":false,"comment_ctime":1530663482,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"534106608186","product_id":100007101,"comment_content":"这期的知识量好大，接触的少不太好理解呵","like_count":125},{"had_liked":false,"id":14835,"user_name":"朱显杰","can_delete":false,"product_type":"c1","uid":1072683,"ip_address":"","ucode":"F7B8258B941D9D","user_header":"https://static001.geekbang.org/account/avatar/00/10/5e/2b/df3983e2.jpg","comment_is_top":false,"comment_ctime":1530689167,"is_pvip":false,"replies":[{"id":"5056","content":"赞","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1530800007,"ip_address":"","comment_id":14835,"utype":1}],"discussion_count":1,"race_medal":0,"score":"319358269071","product_id":100007101,"comment_content":"运维人员通过vpn连入机房网络，再通过堡垒机访问服务器或网络设备","like_count":74,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420151,"discussion_content":"赞","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1530800007,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":15149,"user_name":"u","can_delete":false,"product_type":"c1","uid":1140276,"ip_address":"","ucode":"88FA7BA089807C","user_header":"https://static001.geekbang.org/account/avatar/00/11/66/34/0508d9e4.jpg","comment_is_top":false,"comment_ctime":1530932660,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"190509493684","product_id":100007101,"comment_content":"云计算技术部首席架构师👍🏻👍🏻👍🏻！","like_count":45},{"had_liked":false,"id":187553,"user_name":"李亮洲","can_delete":false,"product_type":"c1","uid":1281724,"ip_address":"","ucode":"018682E4117416","user_header":"https://static001.geekbang.org/account/avatar/00/13/8e/bc/79fc3e71.jpg","comment_is_top":false,"comment_ctime":1584156963,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"104663372067","product_id":100007101,"comment_content":"看了好几遍，并且在网络上查了其它资料，才搞清楚一点点，二层网络是指在链路层传输，三层网络是指在网络层传输。VM动态迁移需求（服务IP地址不变，服务不停，转移到其它服务器上，产生了大二层需求）产生了这些技术，堆叠（网络设备虚拟化+链路聚合技术构建的二层网络天然没有环路）只能连接1万到2万台服务器， TRILL（仿造第三层，通过在二层报文前插入额外的帧头，并且采用路由计算的方式控制整网数据的转发）","like_count":25},{"had_liked":false,"id":15526,"user_name":"泡泡","can_delete":false,"product_type":"c1","uid":1147399,"ip_address":"","ucode":"7F071EE06D7747","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKCmqW21Zguv8kPiayib4U42B3jLGk2Y4Leia0fQjnU0Lfgic8BwbdMIePiayDadFKzV9kSt3F8jRicZxxA/132","comment_is_top":false,"comment_ctime":1531269481,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"78840680809","product_id":100007101,"comment_content":"一：跨机房的高可用，应该就是异地灾备了。比如说数据库的dataguard和goldengate<br>二：运维人员先通过公网访问跳板机，然后在跳板机上以内网地址访问服务器","like_count":18},{"had_liked":false,"id":14832,"user_name":"nvtag","can_delete":false,"product_type":"c1","uid":1140246,"ip_address":"","ucode":"3EB49CBFB1EC4D","user_header":"https://static001.geekbang.org/account/avatar/00/11/66/16/dae6c10f.jpg","comment_is_top":false,"comment_ctime":1530687807,"is_pvip":false,"replies":[{"id":"5004","content":"后面越来越深入喽","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1530690458,"ip_address":"","comment_id":14832,"utype":1}],"discussion_count":2,"race_medal":0,"score":"61660229951","product_id":100007101,"comment_content":"这期的知识量有点太多了 看懵了。求救","like_count":14,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420150,"discussion_content":"后面越来越深入喽","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1530690458,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1394861,"avatar":"https://static001.geekbang.org/account/avatar/00/15/48/ad/8be724da.jpg","nickname":"陈泽坛","note":"","ucode":"C81B402868E9E2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2548,"discussion_content":"🙃  害怕","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563767558,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":15103,"user_name":"summer","can_delete":false,"product_type":"c1","uid":1103386,"ip_address":"","ucode":"A57684B7A90129","user_header":"https://static001.geekbang.org/account/avatar/00/10/d6/1a/532f8a66.jpg","comment_is_top":false,"comment_ctime":1530862369,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"44480535329","product_id":100007101,"comment_content":"引入叶脊网络的原因还是不好理解。为何说原有拓扑不能很好支持东西流量呢？","like_count":10,"discussions":[{"author":{"id":1131300,"avatar":"https://static001.geekbang.org/account/avatar/00/11/43/24/3f9f7c70.jpg","nickname":"zixuan","note":"","ucode":"C72920DD05B074","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":557195,"discussion_content":"更扁平","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647693129,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2875594,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/e0/ca/adfaa551.jpg","nickname":"孙新","note":"","ucode":"A80038A479B943","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":545897,"discussion_content":"因为原先的结构是垂直结构啊，如果虚拟机之间太多交互，需要走很多弯路，如果用了叶脊网络，很明显虚拟机之间的交互路径变短了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642076786,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":14856,"user_name":"bubble","can_delete":false,"product_type":"c1","uid":1008527,"ip_address":"","ucode":"E1046CC31341D9","user_header":"https://static001.geekbang.org/account/avatar/00/0f/63/8f/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1530706337,"is_pvip":true,"replies":[{"id":"5061","content":"可以回顾一下原来的知识，的确有点难","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1530842753,"ip_address":"","comment_id":14856,"utype":1}],"discussion_count":1,"race_medal":0,"score":"44480379297","product_id":100007101,"comment_content":"感觉跟以前的知识没办法串起来，理解费劲","like_count":10,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420152,"discussion_content":"可以回顾一下原来的知识，的确有点难","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1530842753,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":15031,"user_name":"戴劼 DAI JIE🤪","can_delete":false,"product_type":"c1","uid":1141215,"ip_address":"","ucode":"1993EA58CA7D83","user_header":"https://static001.geekbang.org/account/avatar/00/11/69/df/71563d52.jpg","comment_is_top":false,"comment_ctime":1530824314,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"40185529978","product_id":100007101,"comment_content":"五六年前在政府机房以及自己公司托管的机房都没见过用双网卡。自己在学生时代倒是尝试过用两张二手英特尔服务器网卡实现网速翻倍。","like_count":9,"discussions":[{"author":{"id":2032840,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/04/c8/3c7af100.jpg","nickname":"Javatar","note":"","ucode":"E216645CDF632C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":296930,"discussion_content":"别停，继续说下去","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1596706909,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":14780,"user_name":"行者","can_delete":false,"product_type":"c1","uid":1063734,"ip_address":"","ucode":"EA31201A7C5AE1","user_header":"https://static001.geekbang.org/account/avatar/00/10/3b/36/2d61e080.jpg","comment_is_top":false,"comment_ctime":1530663268,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"40185368932","product_id":100007101,"comment_content":"1. 跨机房的高可用，类似阿里服务的异地多活，服务部署在多个机房里，机房之间完全对等，一个机房出了问题，马上切换到另一个机房中。<br>2. IT管理员应该首先连接VPN，然后在访问数据中心内部服务，不能直接通过公网访问。","like_count":9,"discussions":[{"author":{"id":1412220,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEIaTvOKvUt4WnuSjkBp0tjd6O6vvVyw5fcib3UgZibE8tz2ICbTfkwbzs8MHNMJjV6W2mLjywLsvBibg/132","nickname":"火力全开","note":"","ucode":"8CE1733A2F618C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":51999,"discussion_content":"切换机房的方法是主备的方式， 有双活的方式吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573982212,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":163902,"user_name":"DFighting","can_delete":false,"product_type":"c1","uid":1233193,"ip_address":"","ucode":"F3BA2426FF8582","user_header":"https://static001.geekbang.org/account/avatar/00/12/d1/29/1b1234ed.jpg","comment_is_top":false,"comment_ctime":1576822620,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"31641593692","product_id":100007101,"comment_content":"一不小心发布了，失误失误<br>关于为什么2层不能有环而3层可以有环这个问题，结合评论区的大佬们的回答，我觉得可以这么理解<br>1、为什么不能有环，因为存在环就会有收敛速度慢和循环广播风暴的问题，2层直接连接底层服务器，也就是说是一个全互联的网络，环的存在肯定会大大影响收敛速度，且循环风暴可能会拖垮整个网络<br>2、为什么3层网络可以有环，因为我理解这里的3层网络和2层网络是分割开来的，3层网络收敛速度快，有环可以理解为多条等价路由。最关键的是，循环广播不会导致整个网络的瘫痪(如果我的假设有误，请大佬指点)<br>至于文章最后提到的叶脊网络，仔细看下文章之前介绍的垂直结构，互通和流量都是南北方向的，对于同层间的互联考虑的很少，特别是不同区的2层之间只能通过3层的汇聚交换机进行互联，也就是汇聚交换机既需要汇聚层内的流量，还需要处理层间的流量，这样网络的横向扩展就全系于此了(有点类似于单点，风险太大了)。而叶脊网络，将横向请求全部交给了叶子节点，这样就可以完全脱离单个区的限制，专心做汇聚(横向和南北)，也更容易针对叶子节点做高可用。<br>这怕是最多的一次评论了，期待后续课程的学习！！","like_count":7,"discussions":[{"author":{"id":1137046,"avatar":"https://static001.geekbang.org/account/avatar/00/11/59/96/11671504.jpg","nickname":"蔡箐菁","note":"","ucode":"550B54F2550718","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":374717,"discussion_content":"三层网络头部有 TTL","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621325231,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":15376,"user_name":"Summer___J","can_delete":false,"product_type":"c1","uid":1135471,"ip_address":"","ucode":"FF53E15E3FC267","user_header":"https://static001.geekbang.org/account/avatar/00/11/53/6f/6051e0f1.jpg","comment_is_top":false,"comment_ctime":1531147744,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"31595918816","product_id":100007101,"comment_content":"越听余额跟不上了……","like_count":8},{"had_liked":false,"id":270302,"user_name":"核桃","can_delete":false,"product_type":"c1","uid":1385204,"ip_address":"","ucode":"7AB05270CBCCCB","user_header":"https://static001.geekbang.org/account/avatar/00/15/22/f4/9fd6f8f0.jpg","comment_is_top":false,"comment_ctime":1609058472,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"27378862248","product_id":100007101,"comment_content":"这节课的内容对于不熟悉vlan的同学来说有点难了，这里需要了解一下vxlan技术，还有overlay网络一起了解可能会比较好","like_count":7},{"had_liked":false,"id":72960,"user_name":"caohuan","can_delete":false,"product_type":"c1","uid":1256428,"ip_address":"","ucode":"4B092E33F3DF1E","user_header":"https://static001.geekbang.org/account/avatar/00/13/2b/ec/af6d0b10.jpg","comment_is_top":false,"comment_ctime":1551763205,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"23026599685","product_id":100007101,"comment_content":"本篇所得：我们通过url访问服务器，服务器里的把相应的数据反馈给用户，数据存放在数据中心里，为了提高性能和效率，高可用是需要的，所以 运营提供商商需要有多家，服务器需要多张网口，多张网卡需要聚合形成一张网卡对外提供服务，防止一家运营商或者一个网卡有问题，用户不能访问服务器 。<br>多个机箱相连 形成汇聚层交换机，多路径可以有高可用和负载均衡的效果，多个可分区 用核心交换机连接。<br><br>1.数据中心分为三层，接入层 、汇聚层、核心层，最外面是边界路由和安全设备;<br>2.数据中心所有链路需要高可用，所以需要冗余和叠加，服务器需要绑定网卡 交换机需要堆叠，三层设备通过等价路由，二层设备通过TRILL提高 可用性;<br>3.随着大数据的发展，东西流量节点间的交互，比南北流量（服务器与节点的交互）更重要，所以有必要使用叶脊网络结构。<br><br>回答老师的问题：1.跨机房 高可用应该也 可以使用 单个设备的 多网卡的聚合，以及把单个高可用设备连接起来，形成跨机房的高可用性，看老师后面的正确的讲解;<br>2.IT管理员可以通过工具 比如软件后台 访问数据中心吧，期待后面章节的解释。","like_count":6},{"had_liked":false,"id":60675,"user_name":"佳楠","can_delete":false,"product_type":"c1","uid":1008809,"ip_address":"","ucode":"A1698AE91992AA","user_header":"https://static001.geekbang.org/account/avatar/00/0f/64/a9/27d63f2e.jpg","comment_is_top":false,"comment_ctime":1547528981,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"23022365461","product_id":100007101,"comment_content":"试着答一波：<br>Q: 那为啥二层不能有环路，而三层可以呢？<br>A: 技术上二层环路可以通过 STP 协议来破环，但是使用 stp 后，只有一个链路能起作用，对于高可用性来说，失去了互备的意义。  <br>三层可以通过路由协议 OSPF 找到最佳的路径进行访问，而且还可以通过 ECMP 等价路由，在多个路径之间进行负载均衡和高可用。  ","like_count":5,"discussions":[{"author":{"id":1120669,"avatar":"https://static001.geekbang.org/account/avatar/00/11/19/9d/9d5d9d86.jpg","nickname":"Charlie","note":"","ucode":"E248FC99E93916","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":43763,"discussion_content":"二层环路，广播循环学习，整网就挂了，而不是因为STP block链路\n","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1572905487,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":37348,"user_name":"扬～","can_delete":false,"product_type":"c1","uid":1208163,"ip_address":"","ucode":"6FA7D8FE188341","user_header":"https://static001.geekbang.org/account/avatar/00/12/6f/63/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1541553973,"is_pvip":false,"replies":[{"id":"13442","content":"特点就是全连接，没有瓶颈点","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1541596905,"ip_address":"","comment_id":37348,"utype":1}],"discussion_count":2,"race_medal":0,"score":"18721423157","product_id":100007101,"comment_content":"请问叶脊网络与普通的垂直结构有什么区别，文中好像没细说且图片看起来跟普通的结构就只是缺少了汇聚层。另外，利用网桥协议的网络中发送方如何事先就知道了我要到网桥3呢？IP层是因为有DNS服务存在，那么在链路层是什么保证的呢？","like_count":5,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":428301,"discussion_content":"特点就是全连接，没有瓶颈点","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1541596905,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1452167,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJcwXucibksEYRSYg6icjibzGa7efcMrCsGec2UwibjTd57icqDz0zzkEEOM2pXVju60dibzcnQKPfRkN9g/132","nickname":"Geek_93970d","note":"","ucode":"52AC308BEC7737","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":584178,"discussion_content":"是啊，利用网桥协议的网络中发送方如何事先就知道了我要到网桥3呢？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660663157,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"北京"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":252082,"user_name":"戴宇","can_delete":false,"product_type":"c1","uid":1185158,"ip_address":"","ucode":"66A56B2D742903","user_header":"https://static001.geekbang.org/account/avatar/00/12/15/86/cd97bf7e.jpg","comment_is_top":false,"comment_ctime":1602118842,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14487020730","product_id":100007101,"comment_content":"读了几遍，查了一些资料，感觉清晰了很多，讲的是一个数据中心的演变过程。<br><br>1. 服务器放在机架，同机架服务器通信引入交换机<br>2. 不同机架服务器连接引入汇聚交换机<br>3. 不同可用区服务器连接引入核心交换机<br>4. 为了服务器之间高效通信，而不是借鉴了第三层IP协议改造二层协议，引入链接透明互联协议。<br>5. 随着东西流量的重要新和流量浪费，去掉二层交换机，变成数据中心现在的叶脊网络<br>","like_count":3},{"had_liked":false,"id":193760,"user_name":"King-ZJ","can_delete":false,"product_type":"c1","uid":1915385,"ip_address":"","ucode":"7448A4BBB5A118","user_header":"https://static001.geekbang.org/account/avatar/00/1d/39/f9/b946719a.jpg","comment_is_top":false,"comment_ctime":1584958965,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14469860853","product_id":100007101,"comment_content":"数据中心的结构越来越扁平，更有利于集群的扩展。对于大二层所说的TRAILL技术，确实没有接触过，但听说过，主要也没用过。现在大二层差不多都是使用的VXLAN技术来实现，可以去探究一下技术的演进，多了解技术的变迁，也能更加明白技术的发展趋势。","like_count":3},{"had_liked":false,"id":188633,"user_name":"von","can_delete":false,"product_type":"c1","uid":1248289,"ip_address":"","ucode":"82C827800D3C23","user_header":"https://static001.geekbang.org/account/avatar/00/13/0c/21/c166f3cc.jpg","comment_is_top":false,"comment_ctime":1584376576,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14469278464","product_id":100007101,"comment_content":"啊哈，终于有节课听着很熟悉了，俺就是从事跨机房双活一体机的","like_count":3},{"had_liked":false,"id":95232,"user_name":"快乐就好","can_delete":false,"product_type":"c1","uid":1205376,"ip_address":"","ucode":"5F4806B050FA46","user_header":"https://static001.geekbang.org/account/avatar/00/12/64/80/61107e24.jpg","comment_is_top":false,"comment_ctime":1557993585,"is_pvip":false,"replies":[{"id":"34094","content":"同一个vlan不能mac冲突，要么放在不同的vlan里面","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1558067682,"ip_address":"","comment_id":95232,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14442895473","product_id":100007101,"comment_content":"老师好  我问一下  在数据中心混合网络（有电信、移动、联通）中，物理机这边做了bond，但是每个网络分别做了不同的bond别名，而且他们的mac地址是一样的，这种情况下，在交换机上就会一直提示，说有mac地址冲突问题，请问这种情况如何解决呢？","like_count":3,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":450378,"discussion_content":"同一个vlan不能mac冲突，要么放在不同的vlan里面","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558067682,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":14864,"user_name":"wahaha","can_delete":false,"product_type":"c1","uid":1051402,"ip_address":"","ucode":"E60166599CF31D","user_header":"https://static001.geekbang.org/account/avatar/00/10/0b/0a/fa152399.jpg","comment_is_top":false,"comment_ctime":1530710170,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14415612058","product_id":100007101,"comment_content":"答问题2：<br>如果服务器系统能正常运行，一般用VPN访问。<br>当服务器系统不能启动时，远程访问需要用IPKVM（KVM over IP）（不是那个虚拟化KVM，可以查Wikipedia的KVM switch词条）；还有一种方式是利用主板自带的远程管理功能。<br>有个面向普通用户的产品叫向日葵控控，是花生壳公司开发的，类似IPKVM，可以远程配置BIOS。","like_count":3},{"had_liked":false,"id":74868,"user_name":"shaohsiung","can_delete":false,"product_type":"c1","uid":1228842,"ip_address":"","ucode":"6CFBB5C3BB3156","user_header":"https://static001.geekbang.org/account/avatar/00/12/c0/2a/86ca523d.jpg","comment_is_top":false,"comment_ctime":1552307001,"is_pvip":false,"replies":[{"id":"50260","content":"云是部署在多个数据中心里面的。cdn在多个数据中心里面也部署了服务器，用于就近访问","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567828276,"ip_address":"","comment_id":74868,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10142241593","product_id":100007101,"comment_content":"不太理解cdn，数据中心和云计算这三个概念之间的区别和关系，作者可以说明下吗，谢谢了","like_count":2,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442715,"discussion_content":"云是部署在多个数据中心里面的。cdn在多个数据中心里面也部署了服务器，用于就近访问","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567828276,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":22174,"user_name":"Windshell","can_delete":false,"product_type":"c1","uid":1202986,"ip_address":"","ucode":"8F0F5BE418C8D8","user_header":"https://static001.geekbang.org/account/avatar/00/12/5b/2a/a6628985.jpg","comment_is_top":false,"comment_ctime":1535525839,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10125460431","product_id":100007101,"comment_content":"1 跨机房的需要进行专线互联，设置多活。例如两地三中心等，同城双活<br>2 管理员应该通过专门的堡垒机进行管理数据中心，在外网的时候需要用VPN接入，再连接堡垒机进行管理","like_count":2},{"had_liked":false,"id":17853,"user_name":"James","can_delete":false,"product_type":"c1","uid":1134861,"ip_address":"","ucode":"48B0F2A334D1C1","user_header":"https://static001.geekbang.org/account/avatar/00/11/51/0d/fc1652fe.jpg","comment_is_top":false,"comment_ctime":1532997517,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"10122932109","product_id":100007101,"comment_content":"对于不是专门做网络的开发者，看看就好，至少知道就好。<br>对于基础，无论是哪方面的开发者都得明白。","like_count":2,"discussions":[{"author":{"id":2806043,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLBFkSq1oiaEMRjtyyv4ZpCI0OuaSsqs04ODm0OkZF6QhsAh3SvqhxibS2n7PLAVZE3QRSn5Hic0DyXg/132","nickname":"ddh","note":"","ucode":"8E852375365F16","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":544451,"discussion_content":"确实听不太懂了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641527388,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":14828,"user_name":"caizz","can_delete":false,"product_type":"c1","uid":1142205,"ip_address":"","ucode":"7385E1AD26FB95","user_header":"https://static001.geekbang.org/account/avatar/00/11/6d/bd/2666ab9c.jpg","comment_is_top":false,"comment_ctime":1530685167,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10120619759","product_id":100007101,"comment_content":"讲的真好  本节内容很多都是没有接触过得","like_count":2},{"had_liked":false,"id":44220,"user_name":"vic","can_delete":false,"product_type":"c1","uid":1258236,"ip_address":"","ucode":"6C59A40DF9310A","user_header":"https://static001.geekbang.org/account/avatar/00/13/32/fc/5d901185.jpg","comment_is_top":false,"comment_ctime":1543387193,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5838354489","product_id":100007101,"comment_content":"在我看来叶脊交换机只是在核心交换机之上添加了一层交换机, 然后再接入边界路由器, 在图上看汇聚层的交换机互相之间是通过核心交换机来互联互通的<br>将最后一幅图的左边边界路由器这一块拉上去,跟上边的南北流量那张图并没有本质的区别<br>不知我的理解是否正确?","like_count":1},{"had_liked":false,"id":36291,"user_name":"Untitled","can_delete":false,"product_type":"c1","uid":1039464,"ip_address":"","ucode":"8DD6ABA3E81A2E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/dc/68/006ba72c.jpg","comment_is_top":false,"comment_ctime":1541032449,"is_pvip":false,"discussion_count":0,"race_medal":2,"score":"5835999745","product_id":100007101,"comment_content":"昨天第一次服务器上架，今天就听到这里有介绍，初始化服务器时，运维人员说要接通2根网线，一直疑惑为什么要连两根，现在懂了，听了很多协议，可惜都没机会实践","like_count":1},{"had_liked":false,"id":28795,"user_name":"朝闻道","can_delete":false,"product_type":"c1","uid":1203260,"ip_address":"","ucode":"F7F2120A660285","user_header":"","comment_is_top":false,"comment_ctime":1538146404,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5833113700","product_id":100007101,"comment_content":"能讲下clos架构吗？看了好多资料还是没理解它的具体含义，特别是网上的那个Facebook拓扑图，好恐怖","like_count":1,"discussions":[{"author":{"id":1313840,"avatar":"https://static001.geekbang.org/account/avatar/00/14/0c/30/bb4bfe9d.jpg","nickname":"lyonger","note":"","ucode":"E89A75DADEA2A1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":40013,"discussion_content":"https://www.zhihu.com/question/48343492\nhttps://engineering.fb.com/production-engineering/introducing-data-center-fabric-the-next-generation-facebook-data-center-network/","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1572059935,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":14801,"user_name":"羽毛","can_delete":false,"product_type":"c1","uid":1130940,"ip_address":"","ucode":"A99474C0E7D4AC","user_header":"https://static001.geekbang.org/account/avatar/00/11/41/bc/13de31c5.jpg","comment_is_top":false,"comment_ctime":1530669209,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5825636505","product_id":100007101,"comment_content":"看不懂了 需要多看几遍","like_count":1},{"had_liked":false,"id":340020,"user_name":"🔥Ant.Z","can_delete":false,"product_type":"c1","uid":1067402,"ip_address":"","ucode":"E2F898936D7BB6","user_header":"https://static001.geekbang.org/account/avatar/00/10/49/8a/42ae6a53.jpg","comment_is_top":false,"comment_ctime":1648541790,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1648541790","product_id":100007101,"comment_content":"有个疑问，如果使用了STP协议，那bound是不是就失效了？","like_count":0},{"had_liked":false,"id":321821,"user_name":"布拉姆","can_delete":false,"product_type":"c1","uid":1311125,"ip_address":"","ucode":"479FF27D73BCAD","user_header":"https://static001.geekbang.org/account/avatar/00/14/01/95/fd09e8a8.jpg","comment_is_top":false,"comment_ctime":1637054332,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1637054332","product_id":100007101,"comment_content":"虚拟化引入了虚拟机动态迁移技术, 迁移前后的mac和ip都不能变,因此要求网络支持大范围的二层域。从根本上改变了传统三层网络统治数据中心网络的局面。<br>传统二层出于功能划分和安全考虑将一个局域网划分为很多VLAN,不经过第三层转发无法互通(VLAN是二层内不通的虚拟局域网,需分配IP让上层转发),而每个VLAN内部出于可用性考虑又会冗余而不可避免形成环; 为了破环交换机一般都有STP破坏功能. STP由于其收敛、阻塞链路和设备等特点, 再加上转发性能、利用率、可靠性的考虑会把VLAN限制在100台机器以下. 因此传统二层无法做大.","like_count":0},{"had_liked":false,"id":320291,"user_name":"Geek_5e926f","can_delete":false,"product_type":"c1","uid":2134712,"ip_address":"","ucode":"9E7143F71BC676","user_header":"","comment_is_top":false,"comment_ctime":1636204162,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1636204162","product_id":100007101,"comment_content":"代查资料：vrrp vxlan istack ，BGP，集中式网关和分布式网关，sdn，sdwan，vxlan，bgp  evpn","like_count":1},{"had_liked":false,"id":307114,"user_name":"slark","can_delete":false,"product_type":"c1","uid":1143574,"ip_address":"","ucode":"7E8DE962AA23A7","user_header":"https://static001.geekbang.org/account/avatar/00/11/73/16/595b0342.jpg","comment_is_top":false,"comment_ctime":1628866751,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1628866751","product_id":100007101,"comment_content":"堆叠本身也存在一些弊端，堆叠设备多设备间可靠性风险也更大，如果发生脑裂问题定位困难，现在逐渐也做去堆叠","like_count":0},{"had_liked":false,"id":307036,"user_name":"旻言","can_delete":false,"product_type":"c1","uid":1018724,"ip_address":"","ucode":"563E6A83A50EC9","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8b/64/d8bf2f6f.jpg","comment_is_top":false,"comment_ctime":1628837273,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1628837273","product_id":100007101,"comment_content":"文章中说”但是随着数据中心里面的机器越来越多，尤其是有了云计算、大数据，集群规模非常大，而且都要求在一个二层网络里面。“，这里不太明白为什么要求在一个二层网络","like_count":0},{"had_liked":false,"id":299834,"user_name":"槐༄","can_delete":false,"product_type":"c1","uid":2629097,"ip_address":"","ucode":"09B12974569370","user_header":"https://static001.geekbang.org/account/avatar/00/28/1d/e9/96ffe88e.jpg","comment_is_top":false,"comment_ctime":1624878555,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1624878555","product_id":100007101,"comment_content":"百度和腾讯阿里，可不这么想","like_count":0},{"had_liked":false,"id":290509,"user_name":"哒哒哒","can_delete":false,"product_type":"c1","uid":1061803,"ip_address":"","ucode":"9378AD329F8AE0","user_header":"https://static001.geekbang.org/account/avatar/00/10/33/ab/d8ba4242.jpg","comment_is_top":false,"comment_ctime":1619596787,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1619596787","product_id":100007101,"comment_content":"这期了解到了好多的新知识，有些平时听说过，但不知道是什么，大多都是第一次听说。","like_count":0},{"had_liked":false,"id":277987,"user_name":"Wheat","can_delete":false,"product_type":"c1","uid":1260141,"ip_address":"","ucode":"7D99EA149B6DE8","user_header":"https://static001.geekbang.org/account/avatar/00/13/3a/6d/910b2445.jpg","comment_is_top":false,"comment_ctime":1612690319,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1612690319","product_id":100007101,"comment_content":"这节课知识量太大了，分两节课差不多","like_count":0},{"had_liked":false,"id":277918,"user_name":"金时","can_delete":false,"product_type":"c1","uid":1120428,"ip_address":"","ucode":"3491B2367A7238","user_header":"https://static001.geekbang.org/account/avatar/00/11/18/ac/4d68ba46.jpg","comment_is_top":false,"comment_ctime":1612668744,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1612668744","product_id":100007101,"comment_content":"老师讲的叶脊网络 的“南北流量可以不用直接从脊交换机发出，而是通过与 leaf 交换机并行的交换机，再接到边界路由器出去“ ，有点像openstack 里的DVR","like_count":0},{"had_liked":false,"id":260435,"user_name":"夕林语","can_delete":false,"product_type":"c1","uid":1264180,"ip_address":"","ucode":"B57681D0C73E1B","user_header":"https://static001.geekbang.org/account/avatar/00/13/4a/34/1faac99b.jpg","comment_is_top":false,"comment_ctime":1605004568,"is_pvip":false,"discussion_count":0,"race_medal":2,"score":"1605004568","product_id":100007101,"comment_content":"这期东西有点难懂，信息量比较大，我只知道跨机房通常卡专线","like_count":0},{"had_liked":false,"id":243165,"user_name":"郑祖煌","can_delete":false,"product_type":"c1","uid":1469608,"ip_address":"","ucode":"49A0D2E3279826","user_header":"https://static001.geekbang.org/account/avatar/00/16/6c/a8/1922a0f5.jpg","comment_is_top":false,"comment_ctime":1597979377,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1597979377","product_id":100007101,"comment_content":"上网搜了这个叶脊网络架构 感觉知识点好多。","like_count":0},{"had_liked":false,"id":237701,"user_name":"v_niur","can_delete":false,"product_type":"c1","uid":1977550,"ip_address":"","ucode":"E6547975BF3011","user_header":"https://static001.geekbang.org/account/avatar/00/1e/2c/ce/7c8c21d3.jpg","comment_is_top":false,"comment_ctime":1595929929,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1595929929","product_id":100007101,"comment_content":"请问老师： 主备架构，主的只是不稳定，备的也不会顶上去，这种问题怎样妥善解决，网络架构的设计存在多主的设计么？","like_count":0},{"had_liked":false,"id":231676,"user_name":"hello","can_delete":false,"product_type":"c1","uid":1510495,"ip_address":"","ucode":"C6FC61A90F202B","user_header":"https://static001.geekbang.org/account/avatar/00/17/0c/5f/4cbcbfb9.jpg","comment_is_top":false,"comment_ctime":1593746278,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1593746278","product_id":100007101,"comment_content":"这期的知识是易变的，也就是 数据中心的网络结构 会根据实际应用需要 而 变化。","like_count":0},{"had_liked":false,"id":230891,"user_name":"时光@1","can_delete":false,"product_type":"c1","uid":1585019,"ip_address":"","ucode":"0358732C5E80AE","user_header":"https://static001.geekbang.org/account/avatar/00/18/2f/7b/3f506234.jpg","comment_is_top":false,"comment_ctime":1593515460,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1593515460","product_id":100007101,"comment_content":"老师 太牛了！","like_count":0},{"had_liked":false,"id":216203,"user_name":"Heaven","can_delete":false,"product_type":"c1","uid":1694207,"ip_address":"","ucode":"FA33FBCC66C911","user_header":"https://static001.geekbang.org/account/avatar/00/19/d9/ff/b23018a6.jpg","comment_is_top":false,"comment_ctime":1589205191,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1589205191","product_id":100007101,"comment_content":"一个大二层,本身就是包含多个机房之间的设备,可以利用VLan将多个不同机房中的设备包裹在一起,形成一个网络<br>2.对于内部管理人员,可以使用跳板机或者堡垒机来进行访问吧","like_count":0},{"had_liked":false,"id":203415,"user_name":"KK","can_delete":false,"product_type":"c1","uid":1324863,"ip_address":"","ucode":"FFC31A3FE3A285","user_header":"https://static001.geekbang.org/account/avatar/00/14/37/3f/a9127a73.jpg","comment_is_top":false,"comment_ctime":1586186511,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"1586186511","product_id":100007101,"comment_content":"这个相对于计算机网络课程，说得完全不是一个层次的东西。但是，所以的高层建筑，都是依赖于底层智慧。","like_count":0},{"had_liked":false,"id":197015,"user_name":"Geek_f0bd6b","can_delete":false,"product_type":"c1","uid":1905495,"ip_address":"","ucode":"54C2BD14F77F72","user_header":"","comment_is_top":false,"comment_ctime":1585349591,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585349591","product_id":100007101,"comment_content":"一般服务器都支持双网卡做bond吗？","like_count":0},{"had_liked":false,"id":192754,"user_name":"Geek_5b11b8","can_delete":false,"product_type":"c1","uid":1131898,"ip_address":"","ucode":"B1BBA989A08D6B","user_header":"https://static001.geekbang.org/account/avatar/00/11/45/7a/3f8241ef.jpg","comment_is_top":false,"comment_ctime":1584871382,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584871382","product_id":100007101,"comment_content":"老师，可以讲讲收敛比这东西吗，这种树形的交换机架构顶层带宽一般得多大，才不容易出现瓶颈呀","like_count":0},{"had_liked":false,"id":183411,"user_name":"柳林缘","can_delete":false,"product_type":"c1","uid":1067158,"ip_address":"","ucode":"A9590D2EE4620E","user_header":"https://static001.geekbang.org/account/avatar/00/10/48/96/b79d013a.jpg","comment_is_top":false,"comment_ctime":1583034980,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1583034980","product_id":100007101,"comment_content":"个人思考，问题1：优化跨机房的链路设计，或者可以使用隧道VPN来实现类似一个内网的功效。问题2：IT管理员是通过VPN登录到内网一台机器，实现内网登陆管理。这和还在学校时，登录学校图书馆以及使用学校知网免费权利是一种做法。：）","like_count":0},{"had_liked":false,"id":173017,"user_name":"鸠摩·智","can_delete":false,"product_type":"c1","uid":1211909,"ip_address":"","ucode":"6CD93CD1DB6955","user_header":"https://static001.geekbang.org/account/avatar/00/12/7e/05/431d380f.jpg","comment_is_top":false,"comment_ctime":1579409666,"is_pvip":false,"discussion_count":1,"race_medal":5,"score":"1579409666","product_id":100007101,"comment_content":"老师，我有个疑问，望解答一下我的疑惑。在讲大二层之前，核心交换机和可用区为了避免环路，可用区需要使用独立的网段，而核心交换机和聚合交换机之间使用ospf寻找最佳路径，使用ecmp进行负载均衡和高可用。我的疑问是，核心和汇聚都是交换机，但是ospf和emcp是路由器之间使用的协议，这里我就无法想通了。","like_count":0,"discussions":[{"author":{"id":1959820,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKibWRTLrWvazQT5Oc35WZnLeayYYd0TqmaN4u0iciakwjul6UmqEiaQGwSE944TQZicNwpBNSeHtVshJQ/132","nickname":"曹世宏","note":"","ucode":"077D133BF3E760","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":249422,"discussion_content":"现在大多都是三层交换机，三层交换机可以当路由器使用。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1587918263,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":169924,"user_name":"Phoenix","can_delete":false,"product_type":"c1","uid":1005368,"ip_address":"","ucode":"C51BE4C948755B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/38/ba6a106f.jpg","comment_is_top":false,"comment_ctime":1578473927,"is_pvip":false,"replies":[{"id":"66289","content":"多看几遍就好了","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1578824659,"ip_address":"","comment_id":169924,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1578473927","product_id":100007101,"comment_content":"作为一个只接触过低并发的业务开发来说，这一期除了总结，其他内容都没怎么看懂 - -#","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480772,"discussion_content":"多看几遍就好了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578824659,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":163900,"user_name":"DFighting","can_delete":false,"product_type":"c1","uid":1233193,"ip_address":"","ucode":"F3BA2426FF8582","user_header":"https://static001.geekbang.org/account/avatar/00/12/d1/29/1b1234ed.jpg","comment_is_top":false,"comment_ctime":1576821780,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1576821780","product_id":100007101,"comment_content":"第一次需要花两遍才能理解文章内容，不得不说老师这门课满满都是干活，虽然很多知识可能都没机会落到实地去解决，但读懂了还是慢慢的收获。说说我学完的理解吧：","like_count":0},{"had_liked":false,"id":161746,"user_name":"土豆牛肉","can_delete":false,"product_type":"c1","uid":1029315,"ip_address":"","ucode":"7BC3F143966968","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b4/c3/ce3a18c6.jpg","comment_is_top":false,"comment_ctime":1576314348,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1576314348","product_id":100007101,"comment_content":"堆叠可以理解为交换机的水平扩展吗？","like_count":0,"discussions":[{"author":{"id":1452167,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJcwXucibksEYRSYg6icjibzGa7efcMrCsGec2UwibjTd57icqDz0zzkEEOM2pXVju60dibzcnQKPfRkN9g/132","nickname":"Geek_93970d","note":"","ucode":"52AC308BEC7737","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":584179,"discussion_content":"同问","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660663451,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"北京"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":154353,"user_name":"teddytyy","can_delete":false,"product_type":"c1","uid":1268738,"ip_address":"","ucode":"E1569D81A4154E","user_header":"https://static001.geekbang.org/account/avatar/00/13/5c/02/e7af1750.jpg","comment_is_top":false,"comment_ctime":1574413491,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1574413491","product_id":100007101,"comment_content":"开始有点听不懂了","like_count":0},{"had_liked":false,"id":147802,"user_name":"Charlie","can_delete":false,"product_type":"c1","uid":1120669,"ip_address":"","ucode":"E248FC99E93916","user_header":"https://static001.geekbang.org/account/avatar/00/11/19/9d/9d5d9d86.jpg","comment_is_top":false,"comment_ctime":1572905590,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1572905590","product_id":100007101,"comment_content":"trill 现在已经基本过时了吧，在生产中基本没人用，spine -leaf 值得仔细讲讲 BGP + EVPN ","like_count":0},{"had_liked":false,"id":131112,"user_name":"Maiza","can_delete":false,"product_type":"c1","uid":1007248,"ip_address":"","ucode":"D6911CDAC0D8C7","user_header":"https://static001.geekbang.org/account/avatar/00/0f/5e/90/5f79859b.jpg","comment_is_top":false,"comment_ctime":1567645404,"is_pvip":false,"replies":[{"id":"49326","content":"二层和三层的分界点变了","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567648493,"ip_address":"","comment_id":131112,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1567645404","product_id":100007101,"comment_content":"这篇文章我看了已经快 10遍了，希望能看懂 T_T<br>另外，核心交换机和大二层下面的图 一毛一样是不是贴错了，少一张架构图好亏啊 。。。","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466290,"discussion_content":"二层和三层的分界点变了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567648493,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":128382,"user_name":"新哥","can_delete":false,"product_type":"c1","uid":1510368,"ip_address":"","ucode":"D6E5DB6494AE1A","user_header":"https://wx.qlogo.cn/mmopen/vi_32/DYAIOgq83eo5FcvGCNgctPq46RxMExy3oZXkdZFqobX1QXNBbmTicvrZeuulWQLzvI4c36DQKLsbIGyANDyY0VA/132","comment_is_top":false,"comment_ctime":1566876633,"is_pvip":false,"replies":[{"id":"48764","content":"可以的","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567494636,"ip_address":"","comment_id":128382,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1566876633","product_id":100007101,"comment_content":"通过vpn连入机房网络，再通过跳板机访问服务器。","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464930,"discussion_content":"可以的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567494636,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":126216,"user_name":"君哥聊技术","can_delete":false,"product_type":"c1","uid":1325816,"ip_address":"","ucode":"2C9A22BCE4C79E","user_header":"https://static001.geekbang.org/account/avatar/00/14/3a/f8/c1a939e7.jpg","comment_is_top":false,"comment_ctime":1566350700,"is_pvip":false,"replies":[{"id":"46518","content":"加油","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1566354008,"ip_address":"","comment_id":126216,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1566350700","product_id":100007101,"comment_content":"好难，再看几遍","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463888,"discussion_content":"加油","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566354008,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":103285,"user_name":"杨陆伟","can_delete":false,"product_type":"c1","uid":1108457,"ip_address":"","ucode":"3BC968447406EB","user_header":"https://static001.geekbang.org/account/avatar/00/10/e9/e9/1f95e422.jpg","comment_is_top":false,"comment_ctime":1560409463,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1560409463","product_id":100007101,"comment_content":"这节知识量太大","like_count":0},{"had_liked":false,"id":95608,"user_name":"快乐就好","can_delete":false,"product_type":"c1","uid":1205376,"ip_address":"","ucode":"5F4806B050FA46","user_header":"https://static001.geekbang.org/account/avatar/00/12/64/80/61107e24.jpg","comment_is_top":false,"comment_ctime":1558099339,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1558099339","product_id":100007101,"comment_content":"如果说要用不同的vlan，那我这边需要虚拟一个网络了，因为比如说我两个网卡做bond6, 做了三个bond接口的别名对应到移动，电信，联通。那用不同的vlan，需要先在物理机上虚拟多个vlan并且绑定到对应的不同网络上那吗？","like_count":0},{"had_liked":false,"id":92663,"user_name":"送普选","can_delete":false,"product_type":"c1","uid":1220775,"ip_address":"","ucode":"AB2C98BB9C3A5D","user_header":"https://static001.geekbang.org/account/avatar/00/12/a0/a7/db7a7c50.jpg","comment_is_top":false,"comment_ctime":1557310562,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1557310562","product_id":100007101,"comment_content":"本期学习的很多新的网络知识，对正在进行的同城双活架构也有帮助，感谢刘老师","like_count":0},{"had_liked":false,"id":88214,"user_name":"献礼","can_delete":false,"product_type":"c1","uid":1027309,"ip_address":"","ucode":"A80A4730C0B34B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ac/ed/f379c523.jpg","comment_is_top":false,"comment_ctime":1555895103,"is_pvip":false,"replies":[{"id":"32054","content":"三层可以有环路，可以有多个路由到一个地方，等价路由","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1556197806,"ip_address":"","comment_id":88214,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1555895103","product_id":100007101,"comment_content":"二层三层都不能有环路。拓扑变化时，二层收敛慢（十秒级），三层收敛快（毫秒级），这才是用三层的原因。不过现在网络厂商有技术避免使用生成树，比如思科的VPC等","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":447769,"discussion_content":"三层可以有环路，可以有多个路由到一个地方，等价路由","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1556197806,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":85407,"user_name":"王司徒为你写诗","can_delete":false,"product_type":"c1","uid":1237243,"ip_address":"","ucode":"0B53F1D0118350","user_header":"https://static001.geekbang.org/account/avatar/00/12/e0/fb/1010e78e.jpg","comment_is_top":false,"comment_ctime":1555054594,"is_pvip":false,"replies":[{"id":"49705","content":"多看几遍","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567698128,"ip_address":"","comment_id":85407,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1555054594","product_id":100007101,"comment_content":"越来越迷糊了，感觉留言也越来越少了","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446662,"discussion_content":"多看几遍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567698128,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":83137,"user_name":"dao","can_delete":false,"product_type":"c1","uid":1087879,"ip_address":"","ucode":"4181FB270462CF","user_header":"https://static001.geekbang.org/account/avatar/00/10/99/87/98ebb20e.jpg","comment_is_top":false,"comment_ctime":1554434632,"is_pvip":true,"replies":[{"id":"49932","content":"不用纠结层，现在设备越来越牛了，有时候多层都可以","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567782290,"ip_address":"","comment_id":83137,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1554434632","product_id":100007101,"comment_content":"话说看到20章了，居然还搞不懂这些设备都在TCPIP协议的那一层，怎么办？","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445881,"discussion_content":"不用纠结层，现在设备越来越牛了，有时候多层都可以","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567782290,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":75583,"user_name":"江南皮革厂研发中心保安队长","can_delete":false,"product_type":"c1","uid":1099584,"ip_address":"","ucode":"231419643A5CC5","user_header":"https://static001.geekbang.org/account/avatar/00/10/c7/40/66a203cd.jpg","comment_is_top":false,"comment_ctime":1552438014,"is_pvip":false,"replies":[{"id":"50255","content":"是的","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567828154,"ip_address":"","comment_id":75583,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552438014","product_id":100007101,"comment_content":"请问那个数据中心网络图里的边界路由和出口路由是一个层级的路由角色吗？","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442953,"discussion_content":"是的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567828154,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":73445,"user_name":"jacy","can_delete":false,"product_type":"c1","uid":1103456,"ip_address":"","ucode":"0022A8759DDCE6","user_header":"https://static001.geekbang.org/account/avatar/00/10/d6/60/f21b2164.jpg","comment_is_top":false,"comment_ctime":1551885204,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"1551885204","product_id":100007101,"comment_content":"把其他章节学完了，再回来复习一下这章。看看会不会有新的收获","like_count":0},{"had_liked":false,"id":69039,"user_name":"Untitled","can_delete":false,"product_type":"c1","uid":1039464,"ip_address":"","ucode":"8DD6ABA3E81A2E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/dc/68/006ba72c.jpg","comment_is_top":false,"comment_ctime":1550650443,"is_pvip":false,"replies":[{"id":"50297","content":"谢谢啦","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567840288,"ip_address":"","comment_id":69039,"utype":1}],"discussion_count":1,"race_medal":2,"score":"1550650443","product_id":100007101,"comment_content":"Rbridage 之间通过链路状态协议运作 的RBridge写错了~","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":439927,"discussion_content":"谢谢啦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567840288,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":47869,"user_name":"Leon📷","can_delete":false,"product_type":"c1","uid":1219496,"ip_address":"","ucode":"B9BBD1EFAAE5A2","user_header":"https://static001.geekbang.org/account/avatar/00/12/9b/a8/6a391c66.jpg","comment_is_top":false,"comment_ctime":1544240720,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1544240720","product_id":100007101,"comment_content":"我理解的二层不能有环是容易引起广播风暴，三层是通过类似IP层的IP转发。可以通过路由功能隔离广播风暴，大二层模拟三层的功能，就是在局域网中模拟路由转发的功能，这样就可以避免广播风暴了","like_count":0},{"had_liked":false,"id":44223,"user_name":"静静聆听","can_delete":false,"product_type":"c1","uid":1263932,"ip_address":"","ucode":"0A8600CB928EFE","user_header":"https://static001.geekbang.org/account/avatar/00/13/49/3c/5d54c510.jpg","comment_is_top":false,"comment_ctime":1543388484,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543388484","product_id":100007101,"comment_content":"二层不能有环路，是因为会形成ARP广播","like_count":0},{"had_liked":false,"id":32076,"user_name":"limm","can_delete":false,"product_type":"c1","uid":1105196,"ip_address":"","ucode":"1AB9E2AC5E4196","user_header":"https://static001.geekbang.org/account/avatar/00/10/dd/2c/dbc33cf2.jpg","comment_is_top":false,"comment_ctime":1539405495,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1539405495","product_id":100007101,"comment_content":"知识量有点大，跟不上呀","like_count":0},{"had_liked":false,"id":31349,"user_name":"旭风","can_delete":false,"product_type":"c1","uid":1137835,"ip_address":"","ucode":"DC5D10308F8C0C","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/4AyMqvLia5xW0d1CxlPYoHJk2LQhaDzAialczCIuRKibiczWHkJIra0DpmtxREwibtPiajk3NhQVSicXMKxB0Oyb5GEsg/132","comment_is_top":false,"comment_ctime":1539155934,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1539155934","product_id":100007101,"comment_content":"到这期直接看蒙，前面起码还可以理解，这期太多知识量，希望老师可以讲得简单些","like_count":0},{"had_liked":false,"id":25445,"user_name":"😨老铁省瑞鑫","can_delete":false,"product_type":"c1","uid":1083978,"ip_address":"","ucode":"F611C79A0C3FE6","user_header":"https://static001.geekbang.org/account/avatar/00/10/8a/4a/1d89d613.jpg","comment_is_top":false,"comment_ctime":1537330840,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1537330840","product_id":100007101,"comment_content":"夸机房高可用需要做单元化，或者异地多活，解决异地容灾问题，或者同城灾备，多活两种形式，一种是冷备份，一种热备，冷备一般简单，但是风险高，热备需要切分流量和数据，数据同步延迟是个问题，跨机房之间只能走http取代rpc，改造成本大，但是更平滑切换","like_count":0},{"had_liked":false,"id":18591,"user_name":"spdia","can_delete":false,"product_type":"c1","uid":1014366,"ip_address":"","ucode":"9F23413389342B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7a/5e/9431165a.jpg","comment_is_top":false,"comment_ctime":1533474064,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1533474064","product_id":100007101,"comment_content":"多于异地多中心多活的业务确实不容易，要解决脑裂问题。可以借鉴拜占庭问题的解决方案，想办法选举一个中心，例如用paxos或者raft.","like_count":0},{"had_liked":false,"id":18499,"user_name":"小白","can_delete":false,"product_type":"c1","uid":1161972,"ip_address":"","ucode":"C9BB2ED2B7FB60","user_header":"https://static001.geekbang.org/account/avatar/00/11/ba/f4/0dda3069.jpg","comment_is_top":false,"comment_ctime":1533379383,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1533379383","product_id":100007101,"comment_content":"看不懂了","like_count":0},{"had_liked":false,"id":17502,"user_name":"叹息无门","can_delete":false,"product_type":"c1","uid":1131362,"ip_address":"","ucode":"3540A66F5F08EA","user_header":"https://static001.geekbang.org/account/avatar/00/11/43/62/cd7d8b3b.jpg","comment_is_top":false,"comment_ctime":1532690740,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1532690740","product_id":100007101,"comment_content":"1.跨机房高可用，简单说就是异地多活，不过有诸多挑战，比如数据同步问题。<br>2.管理员登录的话，一般是先VPN进到公司网络，然后登录堡垒机，再通过跳板机登录线上系统。","like_count":0},{"had_liked":false,"id":16984,"user_name":"阿木木","can_delete":false,"product_type":"c1","uid":1142778,"ip_address":"","ucode":"F3E79D3FC7F3A2","user_header":"https://static001.geekbang.org/account/avatar/00/11/6f/fa/9a2d729d.jpg","comment_is_top":false,"comment_ctime":1532352297,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1532352297","product_id":100007101,"comment_content":"开始看不懂了！","like_count":0},{"had_liked":false,"id":15969,"user_name":"阿木木","can_delete":false,"product_type":"c1","uid":1142778,"ip_address":"","ucode":"F3E79D3FC7F3A2","user_header":"https://static001.geekbang.org/account/avatar/00/11/6f/fa/9a2d729d.jpg","comment_is_top":false,"comment_ctime":1531700888,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1531700888","product_id":100007101,"comment_content":"开始晕了","like_count":0},{"had_liked":false,"id":15834,"user_name":"破晓","can_delete":false,"product_type":"c1","uid":1153316,"ip_address":"","ucode":"13C33DE0CFD43B","user_header":"https://static001.geekbang.org/account/avatar/00/11/99/24/e1cb609e.jpg","comment_is_top":false,"comment_ctime":1531544723,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1531544723","product_id":100007101,"comment_content":"作为非运维的研发，从来没接触过这期知识，真的要好好消化下。<br>问题2通过vpn连接堡垒机进行操作。","like_count":0},{"had_liked":false,"id":15758,"user_name":"李博越","can_delete":false,"product_type":"c1","uid":1027808,"ip_address":"","ucode":"E6CDA0CDC0BCE6","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ae/e0/3e636955.jpg","comment_is_top":false,"comment_ctime":1531456140,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1531456140","product_id":100007101,"comment_content":"非常不错，作为程序员搞云计算也接触过这些，但是都没有系统学习，今天涨姿势了","like_count":0},{"had_liked":false,"id":15133,"user_name":"渝南黔北","can_delete":false,"product_type":"c1","uid":1135323,"ip_address":"","ucode":"D989CCF528B55F","user_header":"https://static001.geekbang.org/account/avatar/00/11/52/db/0bf79614.jpg","comment_is_top":false,"comment_ctime":1530892254,"is_pvip":false,"replies":[{"id":"5116","content":"会的会的","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1530981874,"ip_address":"","comment_id":15133,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1530892254","product_id":100007101,"comment_content":"异地机房之间实现大二层，这是要讲vxlan 的节奏啊？","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420247,"discussion_content":"会的会的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1530981874,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":15068,"user_name":"云学","can_delete":false,"product_type":"c1","uid":1027233,"ip_address":"","ucode":"366AE90BA06356","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ac/a1/43d83698.jpg","comment_is_top":false,"comment_ctime":1530840670,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1530840670","product_id":100007101,"comment_content":"请问:  用户看到的公网IP是边界路由器的ip还是服务器的ip?","like_count":0},{"had_liked":false,"id":15030,"user_name":"初学者","can_delete":false,"product_type":"c1","uid":1042833,"ip_address":"","ucode":"9471A905D07CE1","user_header":"https://static001.geekbang.org/account/avatar/00/0f/e9/91/4219d305.jpg","comment_is_top":false,"comment_ctime":1530811581,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1530811581","product_id":100007101,"comment_content":"看的好过瘾","like_count":0},{"had_liked":false,"id":14974,"user_name":"晓.光","can_delete":false,"product_type":"c1","uid":1135328,"ip_address":"","ucode":"EC826AE4901235","user_header":"https://static001.geekbang.org/account/avatar/00/11/52/e0/ef42c4ce.jpg","comment_is_top":false,"comment_ctime":1530777943,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1530777943","product_id":100007101,"comment_content":"1.热备2.堡垒机内网访问？？","like_count":0},{"had_liked":false,"id":14964,"user_name":"徐良红","can_delete":false,"product_type":"c1","uid":1131408,"ip_address":"","ucode":"830C7007B104BC","user_header":"https://static001.geekbang.org/account/avatar/00/11/43/90/167a13fa.jpg","comment_is_top":false,"comment_ctime":1530767027,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1530767027","product_id":100007101,"comment_content":"问题1通过dns解析到不同机房数据中心来保障冗余<br>问题2运维人员应该是通过带外网管通道进行设备管理","like_count":0},{"had_liked":false,"id":14949,"user_name":"花花妹","can_delete":false,"product_type":"c1","uid":1132081,"ip_address":"","ucode":"9B0C1F7786B214","user_header":"https://static001.geekbang.org/account/avatar/00/11/46/31/0275413f.jpg","comment_is_top":false,"comment_ctime":1530757071,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1530757071","product_id":100007101,"comment_content":"数据中心高可用，首先需要通过高速专线连接不同的数据中心，大二层打通。<br>在应用层面，通过DNS将前端服务实例分布在不同的数据中心，后段应用做数据库实例的扩展和分离，以及不同数据中心间的数据库复制。<br>最终保证应用在不同数据中心间的多活部署。","like_count":0},{"had_liked":false,"id":14944,"user_name":"花花妹","can_delete":false,"product_type":"c1","uid":1132081,"ip_address":"","ucode":"9B0C1F7786B214","user_header":"https://static001.geekbang.org/account/avatar/00/11/46/31/0275413f.jpg","comment_is_top":false,"comment_ctime":1530755662,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1530755662","product_id":100007101,"comment_content":"请问下，如何去设计数据中心的网络收敛比？","like_count":0},{"had_liked":false,"id":14886,"user_name":"三水","can_delete":false,"product_type":"c1","uid":1017781,"ip_address":"","ucode":"11837CF38FD9BB","user_header":"https://static001.geekbang.org/account/avatar/00/0f/87/b5/dd0353f4.jpg","comment_is_top":false,"comment_ctime":1530745876,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1530745876","product_id":100007101,"comment_content":"stateless 的服务跨数据中心访问可以通过SLB或路由（应用访问路由，框架内的），statefulset的服务跨数据中心访问还是离不开之前讲的CAP理论。","like_count":0},{"had_liked":false,"id":14851,"user_name":"mgxian","can_delete":false,"product_type":"c1","uid":1014806,"ip_address":"","ucode":"7B7E77E6A83B87","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7c/16/4d1e5cc1.jpg","comment_is_top":false,"comment_ctime":1530704743,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1530704743","product_id":100007101,"comment_content":"跨机房 可以铺设专线 降低网络延迟 实现部分高可用<br><br>IT管理员通过VPN连接数据中心机房","like_count":0},{"had_liked":false,"id":14848,"user_name":"Hurt","can_delete":false,"product_type":"c1","uid":1050946,"ip_address":"","ucode":"DCE7428CCF08EF","user_header":"https://static001.geekbang.org/account/avatar/00/10/09/42/1f762b72.jpg","comment_is_top":false,"comment_ctime":1530703286,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1530703286","product_id":100007101,"comment_content":"感觉越来 越高深了 以前这些东西 都是可望不可及的 听老师一讲 明白了很多","like_count":0},{"had_liked":false,"id":14799,"user_name":"favorlm","can_delete":false,"product_type":"c1","uid":1120997,"ip_address":"","ucode":"CFD52127AA6E1D","user_header":"https://static001.geekbang.org/account/avatar/00/11/1a/e5/6899701e.jpg","comment_is_top":false,"comment_ctime":1530668874,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1530668874","product_id":100007101,"comment_content":"看起来需要好好学习。","like_count":0},{"had_liked":false,"id":14794,"user_name":"有铭","can_delete":false,"product_type":"c1","uid":1046302,"ip_address":"","ucode":"2C7CB36CA5C04C","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/3XbCueYYVWTiclv8T5tFpwiblOxLphvSZxL4ujMdqVMibZnOiaFK2C5nKRGv407iaAsrI0CDICYVQJtiaITzkjfjbvrQ/132","comment_is_top":false,"comment_ctime":1530667882,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1530667882","product_id":100007101,"comment_content":"这期知识量太大了，好多没见过，我第一次知道原来能双网卡绑定负载均衡","like_count":0},{"had_liked":false,"id":14789,"user_name":"feifei","can_delete":false,"product_type":"c1","uid":1105431,"ip_address":"","ucode":"B1F8AE3AD82C51","user_header":"https://static001.geekbang.org/account/avatar/00/10/de/17/75e2b624.jpg","comment_is_top":false,"comment_ctime":1530665139,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1530665139","product_id":100007101,"comment_content":"数据中心来讲，高可用是非常重要的，每个设备都要考虑高可用，那跨机房的高可用，你知道应该怎么做吗？<br><br>可以使用cnd或者dns进行负载均衡<br><br>前面说的浏览新闻、购物、下载、看视频等行为，都是普通用户通过公网访问数据中心里面的资源。那 IT 管理员应该通过什么样的方式访问数据中心呢？<br><br>现在的交换机可以通过网络交换机提供的web管理界面管理，那是针对单台设备。像数据中心，应该有专门的管理系统，来配置主机，和管理主机和交换机，这是我的一点理解，不知道现实的数据中心的样子，欢迎老师的指正，谢谢<br>","like_count":0},{"had_liked":false,"id":14787,"user_name":"进化论","can_delete":false,"product_type":"c1","uid":1124107,"ip_address":"","ucode":"2865A23392B9F9","user_header":"https://static001.geekbang.org/account/avatar/00/11/27/0b/12dee5ed.jpg","comment_is_top":false,"comment_ctime":1530664776,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1530664776","product_id":100007101,"comment_content":"我就占个沙发🛋️","like_count":0},{"had_liked":false,"id":14778,"user_name":"timgise","can_delete":false,"product_type":"c1","uid":1083979,"ip_address":"","ucode":"0F4567495A471F","user_header":"https://static001.geekbang.org/account/avatar/00/10/8a/4b/9863a07b.jpg","comment_is_top":false,"comment_ctime":1530663093,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1530663093","product_id":100007101,"comment_content":"晕了","like_count":0},{"had_liked":false,"id":14769,"user_name":"Jason","can_delete":false,"product_type":"c1","uid":1112202,"ip_address":"","ucode":"8CA4CB2745A427","user_header":"https://static001.geekbang.org/account/avatar/00/10/f8/8a/07cdeaf9.jpg","comment_is_top":false,"comment_ctime":1530661653,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1530661653","product_id":100007101,"comment_content":"老师，<br>你好！前面课程老师说交换器主要用于搭建局域网，路由器用于外网管理，也可以组建局域网。那作为一家微型公司，有一台服务器，几个笔记本，现在要搭建个局域网，笔记本可以访问服务器，可以上外网，但服务器不能上外网，怎么做到，谢谢！","like_count":0,"discussions":[{"author":{"id":1136684,"avatar":"https://static001.geekbang.org/account/avatar/00/11/58/2c/92c7ce3b.jpg","nickname":"易轻尘","note":"","ucode":"0D0CB9D6D45A70","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":86744,"discussion_content":"猜想可以对服务器配置单独的路由表，仅仅实现内网的路由","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576610370,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}