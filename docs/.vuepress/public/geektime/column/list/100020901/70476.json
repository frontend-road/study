{"id":70476,"title":"05 | åŸºç¡€ç¯‡ï¼šæŸä¸ªåº”ç”¨çš„CPUä½¿ç”¨ç‡å±…ç„¶è¾¾åˆ°100%ï¼Œæˆ‘è¯¥æ€ä¹ˆåŠï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯å€ªæœ‹é£ã€‚</p><p>é€šè¿‡å‰ä¸¤èŠ‚å¯¹å¹³å‡è´Ÿè½½å’Œ CPU ä¸Šä¸‹æ–‡åˆ‡æ¢çš„å­¦ä¹ ï¼Œæˆ‘ç›¸ä¿¡ä½ å¯¹ CPU çš„æ€§èƒ½å·²ç»æœ‰äº†åˆæ­¥äº†è§£ã€‚ä¸è¿‡æˆ‘è¿˜æ˜¯æƒ³é—®ä¸€ä¸‹ï¼Œåœ¨å­¦è¿™ä¸ªä¸“æ å‰ï¼Œä½ æœ€å¸¸ç”¨ä»€ä¹ˆæŒ‡æ ‡æ¥æè¿°ç³»ç»Ÿçš„ CPU æ€§èƒ½å‘¢ï¼Ÿæˆ‘æƒ³ä½ çš„ç­”æ¡ˆï¼Œå¯èƒ½ä¸æ˜¯å¹³å‡è´Ÿè½½ï¼Œä¹Ÿä¸æ˜¯ CPU ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œè€Œæ˜¯å¦ä¸€ä¸ªæ›´ç›´è§‚çš„æŒ‡æ ‡â€”â€” CPU ä½¿ç”¨ç‡ã€‚</p><p>æˆ‘ä»¬å‰é¢è¯´è¿‡ï¼ŒCPU ä½¿ç”¨ç‡æ˜¯å•ä½æ—¶é—´å†… CPU ä½¿ç”¨æƒ…å†µçš„ç»Ÿè®¡ï¼Œä»¥ç™¾åˆ†æ¯”çš„æ–¹å¼å±•ç¤ºã€‚é‚£ä¹ˆï¼Œä½œä¸ºæœ€å¸¸ç”¨ä¹Ÿæ˜¯æœ€ç†Ÿæ‚‰çš„ CPU æŒ‡æ ‡ï¼Œä½ èƒ½è¯´å‡º CPU ä½¿ç”¨ç‡åˆ°åº•æ˜¯æ€ä¹ˆç®—å‡ºæ¥çš„å—ï¼Ÿå†æœ‰ï¼Œè¯¸å¦‚ topã€ps ä¹‹ç±»çš„æ€§èƒ½å·¥å…·å±•ç¤ºçš„ %userã€%niceã€ %systemã€%iowait ã€%steal ç­‰ç­‰ï¼Œä½ åˆèƒ½å¼„æ¸…æ¥šå®ƒä»¬ä¹‹é—´çš„ä¸åŒå—ï¼Ÿ</p><p>ä»Šå¤©æˆ‘å°±å¸¦ä½ äº†è§£ CPU ä½¿ç”¨ç‡çš„å†…å®¹ï¼ŒåŒæ—¶ï¼Œæˆ‘ä¹Ÿä¼šä»¥æˆ‘ä»¬æœ€å¸¸ç”¨çš„åå‘ä»£ç†æœåŠ¡å™¨ Nginx ä¸ºä¾‹ï¼Œå¸¦ä½ åœ¨ä¸€æ­¥æ­¥æ“ä½œå’Œåˆ†æä¸­æ·±å…¥ç†è§£ã€‚</p><h2>CPU ä½¿ç”¨ç‡</h2><p>åœ¨ä¸Šä¸€æœŸæˆ‘æ›¾æåˆ°ï¼ŒLinux ä½œä¸ºä¸€ä¸ªå¤šä»»åŠ¡æ“ä½œç³»ç»Ÿï¼Œå°†æ¯ä¸ª CPU çš„æ—¶é—´åˆ’åˆ†ä¸ºå¾ˆçŸ­çš„æ—¶é—´ç‰‡ï¼Œå†é€šè¿‡è°ƒåº¦å™¨è½®æµåˆ†é…ç»™å„ä¸ªä»»åŠ¡ä½¿ç”¨ï¼Œå› æ­¤é€ æˆå¤šä»»åŠ¡åŒæ—¶è¿è¡Œçš„é”™è§‰ã€‚</p><p>ä¸ºäº†ç»´æŠ¤ CPU æ—¶é—´ï¼ŒLinux é€šè¿‡äº‹å…ˆå®šä¹‰çš„èŠ‚æ‹ç‡ï¼ˆå†…æ ¸ä¸­è¡¨ç¤ºä¸º HZï¼‰ï¼Œè§¦å‘æ—¶é—´ä¸­æ–­ï¼Œå¹¶ä½¿ç”¨å…¨å±€å˜é‡ Jiffies è®°å½•äº†å¼€æœºä»¥æ¥çš„èŠ‚æ‹æ•°ã€‚æ¯å‘ç”Ÿä¸€æ¬¡æ—¶é—´ä¸­æ–­ï¼ŒJiffies çš„å€¼å°±åŠ  1ã€‚</p><!-- [[[read_end]]] --><p>èŠ‚æ‹ç‡ HZ æ˜¯å†…æ ¸çš„å¯é…é€‰é¡¹ï¼Œå¯ä»¥è®¾ç½®ä¸º 100ã€250ã€1000 ç­‰ã€‚ä¸åŒçš„ç³»ç»Ÿå¯èƒ½è®¾ç½®ä¸åŒæ•°å€¼ï¼Œä½ å¯ä»¥é€šè¿‡æŸ¥è¯¢ /boot/config å†…æ ¸é€‰é¡¹æ¥æŸ¥çœ‹å®ƒçš„é…ç½®å€¼ã€‚æ¯”å¦‚åœ¨æˆ‘çš„ç³»ç»Ÿä¸­ï¼ŒèŠ‚æ‹ç‡è®¾ç½®æˆäº† 250ï¼Œä¹Ÿå°±æ˜¯æ¯ç§’é’Ÿè§¦å‘ 250 æ¬¡æ—¶é—´ä¸­æ–­ã€‚</p><pre><code>$ grep 'CONFIG_HZ=' /boot/config-$(uname -r)\nCONFIG_HZ=250\n</code></pre><p>åŒæ—¶ï¼Œæ­£å› ä¸ºèŠ‚æ‹ç‡ HZ æ˜¯å†…æ ¸é€‰é¡¹ï¼Œæ‰€ä»¥ç”¨æˆ·ç©ºé—´ç¨‹åºå¹¶ä¸èƒ½ç›´æ¥è®¿é—®ã€‚ä¸ºäº†æ–¹ä¾¿ç”¨æˆ·ç©ºé—´ç¨‹åºï¼Œå†…æ ¸è¿˜æä¾›äº†ä¸€ä¸ªç”¨æˆ·ç©ºé—´èŠ‚æ‹ç‡ USER_HZï¼Œå®ƒæ€»æ˜¯å›ºå®šä¸º 100ï¼Œä¹Ÿå°±æ˜¯1/100ç§’ã€‚è¿™æ ·ï¼Œç”¨æˆ·ç©ºé—´ç¨‹åºå¹¶ä¸éœ€è¦å…³å¿ƒå†…æ ¸ä¸­ HZ è¢«è®¾ç½®æˆäº†å¤šå°‘ï¼Œå› ä¸ºå®ƒçœ‹åˆ°çš„æ€»æ˜¯å›ºå®šå€¼ USER_HZã€‚</p><p>Linux é€šè¿‡ /proc è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿï¼Œå‘ç”¨æˆ·ç©ºé—´æä¾›äº†ç³»ç»Ÿå†…éƒ¨çŠ¶æ€çš„ä¿¡æ¯ï¼Œè€Œ /proc/stat æä¾›çš„å°±æ˜¯ç³»ç»Ÿçš„ CPU å’Œä»»åŠ¡ç»Ÿè®¡ä¿¡æ¯ã€‚æ¯”æ–¹è¯´ï¼Œå¦‚æœä½ åªå…³æ³¨ CPU çš„è¯ï¼Œå¯ä»¥æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š</p><pre><code># åªä¿ç•™å„ä¸ªCPUçš„æ•°æ®\n$ cat /proc/stat | grep ^cpu\ncpu  280580 7407 286084 172900810 83602 0 583 0 0 0\ncpu0 144745 4181 176701 86423902 52076 0 301 0 0 0\ncpu1 135834 3226 109383 86476907 31525 0 282 0 0 0\n</code></pre><p>è¿™é‡Œçš„è¾“å‡ºç»“æœæ˜¯ä¸€ä¸ªè¡¨æ ¼ã€‚å…¶ä¸­ï¼Œç¬¬ä¸€åˆ—è¡¨ç¤ºçš„æ˜¯ CPU ç¼–å·ï¼Œå¦‚cpu0ã€cpu1 ï¼Œè€Œç¬¬ä¸€è¡Œæ²¡æœ‰ç¼–å·çš„ cpu  ï¼Œè¡¨ç¤ºçš„æ˜¯æ‰€æœ‰ CPU çš„ç´¯åŠ ã€‚å…¶ä»–åˆ—åˆ™è¡¨ç¤ºä¸åŒåœºæ™¯ä¸‹ CPU çš„ç´¯åŠ èŠ‚æ‹æ•°ï¼Œå®ƒçš„å•ä½æ˜¯ USER_HZï¼Œä¹Ÿå°±æ˜¯ 10 msï¼ˆ1/100ç§’ï¼‰ï¼Œæ‰€ä»¥è¿™å…¶å®å°±æ˜¯ä¸åŒåœºæ™¯ä¸‹çš„ CPU æ—¶é—´ã€‚</p><p>å½“ç„¶ï¼Œè¿™é‡Œæ¯ä¸€åˆ—çš„é¡ºåºå¹¶ä¸éœ€è¦ä½ èƒŒä¸‹æ¥ã€‚ä½ åªè¦è®°ä½ï¼Œæœ‰éœ€è¦çš„æ—¶å€™ï¼ŒæŸ¥è¯¢  man proc  å°±å¯ä»¥ã€‚ä¸è¿‡ï¼Œä½ è¦æ¸…æ¥šman procæ–‡æ¡£é‡Œæ¯ä¸€åˆ—çš„æ¶µä¹‰ï¼Œå®ƒä»¬éƒ½æ˜¯CPUä½¿ç”¨ç‡ç›¸å…³çš„é‡è¦æŒ‡æ ‡ï¼Œä½ è¿˜ä¼šåœ¨å¾ˆå¤šå…¶ä»–çš„æ€§èƒ½å·¥å…·ä¸­çœ‹åˆ°å®ƒä»¬ã€‚ä¸‹é¢ï¼Œæˆ‘æ¥ä¾æ¬¡è§£è¯»ä¸€ä¸‹ã€‚</p><ul>\n<li>\n<p>userï¼ˆé€šå¸¸ç¼©å†™ä¸º usï¼‰ï¼Œä»£è¡¨ç”¨æˆ·æ€ CPU æ—¶é—´ã€‚æ³¨æ„ï¼Œå®ƒä¸åŒ…æ‹¬ä¸‹é¢çš„ nice æ—¶é—´ï¼Œä½†åŒ…æ‹¬äº† guest æ—¶é—´ã€‚</p>\n</li>\n<li>\n<p>niceï¼ˆé€šå¸¸ç¼©å†™ä¸º niï¼‰ï¼Œä»£è¡¨ä½ä¼˜å…ˆçº§ç”¨æˆ·æ€ CPU æ—¶é—´ï¼Œä¹Ÿå°±æ˜¯è¿›ç¨‹çš„ nice å€¼è¢«è°ƒæ•´ä¸º 1-19 ä¹‹é—´æ—¶çš„ CPU æ—¶é—´ã€‚è¿™é‡Œæ³¨æ„ï¼Œnice å¯å–å€¼èŒƒå›´æ˜¯ -20 åˆ° 19ï¼Œæ•°å€¼è¶Šå¤§ï¼Œä¼˜å…ˆçº§åè€Œè¶Šä½ã€‚</p>\n</li>\n<li>\n<p>systemï¼ˆé€šå¸¸ç¼©å†™ä¸ºsysï¼‰ï¼Œä»£è¡¨å†…æ ¸æ€ CPU æ—¶é—´ã€‚</p>\n</li>\n<li>\n<p>idleï¼ˆé€šå¸¸ç¼©å†™ä¸ºidï¼‰ï¼Œä»£è¡¨ç©ºé—²æ—¶é—´ã€‚æ³¨æ„ï¼Œå®ƒä¸åŒ…æ‹¬ç­‰å¾… I/O çš„æ—¶é—´ï¼ˆiowaitï¼‰ã€‚</p>\n</li>\n<li>\n<p>iowaitï¼ˆé€šå¸¸ç¼©å†™ä¸º waï¼‰ï¼Œä»£è¡¨ç­‰å¾… I/O çš„ CPU æ—¶é—´ã€‚</p>\n</li>\n<li>\n<p>irqï¼ˆé€šå¸¸ç¼©å†™ä¸º hiï¼‰ï¼Œä»£è¡¨å¤„ç†ç¡¬ä¸­æ–­çš„ CPU æ—¶é—´ã€‚</p>\n</li>\n<li>\n<p>softirqï¼ˆé€šå¸¸ç¼©å†™ä¸º siï¼‰ï¼Œä»£è¡¨å¤„ç†è½¯ä¸­æ–­çš„ CPU æ—¶é—´ã€‚</p>\n</li>\n<li>\n<p>stealï¼ˆé€šå¸¸ç¼©å†™ä¸º stï¼‰ï¼Œä»£è¡¨å½“ç³»ç»Ÿè¿è¡Œåœ¨è™šæ‹Ÿæœºä¸­çš„æ—¶å€™ï¼Œè¢«å…¶ä»–è™šæ‹Ÿæœºå ç”¨çš„ CPU æ—¶é—´ã€‚</p>\n</li>\n<li>\n<p>guestï¼ˆé€šå¸¸ç¼©å†™ä¸º guestï¼‰ï¼Œä»£è¡¨é€šè¿‡è™šæ‹ŸåŒ–è¿è¡Œå…¶ä»–æ“ä½œç³»ç»Ÿçš„æ—¶é—´ï¼Œä¹Ÿå°±æ˜¯è¿è¡Œè™šæ‹Ÿæœºçš„ CPU æ—¶é—´ã€‚</p>\n</li>\n<li>\n<p>guest_niceï¼ˆé€šå¸¸ç¼©å†™ä¸º gniceï¼‰ï¼Œä»£è¡¨ä»¥ä½ä¼˜å…ˆçº§è¿è¡Œè™šæ‹Ÿæœºçš„æ—¶é—´ã€‚</p>\n</li>\n</ul><p>è€Œæˆ‘ä»¬é€šå¸¸æ‰€è¯´çš„ <strong>CPU ä½¿ç”¨ç‡ï¼Œå°±æ˜¯é™¤äº†ç©ºé—²æ—¶é—´å¤–çš„å…¶ä»–æ—¶é—´å æ€» CPU æ—¶é—´çš„ç™¾åˆ†æ¯”</strong>ï¼Œç”¨å…¬å¼æ¥è¡¨ç¤ºå°±æ˜¯ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/3e/09/3edcc7f908c7c1ddba4bbcccc0277c09.png?wh=312*78\" alt=\"\"><br>\næ ¹æ®è¿™ä¸ªå…¬å¼ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä» /proc/stat ä¸­çš„æ•°æ®ï¼Œå¾ˆå®¹æ˜“åœ°è®¡ç®—å‡º CPU ä½¿ç”¨ç‡ã€‚å½“ç„¶ï¼Œä¹Ÿå¯ä»¥ç”¨æ¯ä¸€ä¸ªåœºæ™¯çš„CPUæ—¶é—´ï¼Œé™¤ä»¥æ€»çš„CPUæ—¶é—´ï¼Œè®¡ç®—å‡ºæ¯ä¸ªåœºæ™¯çš„CPUä½¿ç”¨ç‡ã€‚</p><p>ä¸è¿‡å…ˆä¸è¦ç€æ€¥è®¡ç®—ï¼Œä½ èƒ½è¯´å‡ºï¼Œç›´æ¥ç”¨ /proc/stat çš„æ•°æ®ï¼Œç®—çš„æ˜¯ä»€ä¹ˆæ—¶é—´æ®µçš„ CPU ä½¿ç”¨ç‡å—ï¼Ÿ</p><p>çœ‹åˆ°è¿™é‡Œï¼Œä½ åº”è¯¥æƒ³èµ·æ¥äº†ï¼Œè¿™æ˜¯å¼€æœºä»¥æ¥çš„èŠ‚æ‹æ•°ç´¯åŠ å€¼ï¼Œæ‰€ä»¥ç›´æ¥ç®—å‡ºæ¥çš„ï¼Œæ˜¯å¼€æœºä»¥æ¥çš„å¹³å‡ CPU ä½¿ç”¨ç‡ï¼Œä¸€èˆ¬æ²¡å•¥å‚è€ƒä»·å€¼ã€‚</p><p>äº‹å®ä¸Šï¼Œä¸ºäº†è®¡ç®— CPU ä½¿ç”¨ç‡ï¼Œæ€§èƒ½å·¥å…·ä¸€èˆ¬éƒ½ä¼šå–é—´éš”ä¸€æ®µæ—¶é—´ï¼ˆæ¯”å¦‚3ç§’ï¼‰çš„ä¸¤æ¬¡å€¼ï¼Œä½œå·®åï¼Œå†è®¡ç®—å‡ºè¿™æ®µæ—¶é—´å†…çš„å¹³å‡ CPU ä½¿ç”¨ç‡ï¼Œå³</p><p><img src=\"https://static001.geekbang.org/resource/image/84/5a/8408bb45922afb2db09629a9a7eb1d5a.png?wh=569*85\" alt=\"\"></p><p>è¿™ä¸ªå…¬å¼ï¼Œå°±æ˜¯æˆ‘ä»¬ç”¨å„ç§æ€§èƒ½å·¥å…·æ‰€çœ‹åˆ°çš„CPU ä½¿ç”¨ç‡çš„å®é™…è®¡ç®—æ–¹æ³•ã€‚</p><p>ç°åœ¨ï¼Œæˆ‘ä»¬çŸ¥é“äº†ç³»ç»Ÿ CPU ä½¿ç”¨ç‡çš„è®¡ç®—æ–¹æ³•ï¼Œé‚£è¿›ç¨‹çš„å‘¢ï¼Ÿè·Ÿç³»ç»Ÿçš„æŒ‡æ ‡ç±»ä¼¼ï¼ŒLinux ä¹Ÿç»™æ¯ä¸ªè¿›ç¨‹æä¾›äº†è¿è¡Œæƒ…å†µçš„ç»Ÿè®¡ä¿¡æ¯ï¼Œä¹Ÿå°±æ˜¯ /proc/[pid]/statã€‚ä¸è¿‡ï¼Œè¿™ä¸ªæ–‡ä»¶åŒ…å«çš„æ•°æ®å°±æ¯”è¾ƒä¸°å¯Œäº†ï¼Œæ€»å…±æœ‰ 52 åˆ—çš„æ•°æ®ã€‚</p><p>å½“ç„¶ï¼Œä¸ç”¨æ‹…å¿ƒï¼Œå› ä¸ºä½ å¹¶ä¸éœ€è¦æŒæ¡æ¯ä¸€åˆ—çš„å«ä¹‰ã€‚è¿˜æ˜¯é‚£å¥è¯ï¼Œéœ€è¦çš„æ—¶å€™ï¼ŒæŸ¥  man proc  å°±è¡Œã€‚</p><p>å›è¿‡å¤´æ¥çœ‹ï¼Œæ˜¯ä¸æ˜¯è¯´è¦æŸ¥çœ‹ CPU ä½¿ç”¨ç‡ï¼Œå°±å¿…é¡»å…ˆè¯»å– /proc/stat å’Œ /proc/[pid]/stat è¿™ä¸¤ä¸ªæ–‡ä»¶ï¼Œç„¶åå†æŒ‰ç…§ä¸Šé¢çš„å…¬å¼è®¡ç®—å‡ºæ¥å‘¢ï¼Ÿ</p><p>å½“ç„¶ä¸æ˜¯ï¼Œå„ç§å„æ ·çš„æ€§èƒ½åˆ†æå·¥å…·å·²ç»å¸®æˆ‘ä»¬è®¡ç®—å¥½äº†ã€‚ä¸è¿‡è¦æ³¨æ„çš„æ˜¯ï¼Œ<strong>æ€§èƒ½åˆ†æå·¥å…·ç»™å‡ºçš„éƒ½æ˜¯é—´éš”ä¸€æ®µæ—¶é—´çš„å¹³å‡ CPU ä½¿ç”¨ç‡ï¼Œæ‰€ä»¥è¦æ³¨æ„é—´éš”æ—¶é—´çš„è®¾ç½®</strong>ï¼Œç‰¹åˆ«æ˜¯ç”¨å¤šä¸ªå·¥å…·å¯¹æ¯”åˆ†ææ—¶ï¼Œä½ ä¸€å®šè¦ä¿è¯å®ƒä»¬ç”¨çš„æ˜¯ç›¸åŒçš„é—´éš”æ—¶é—´ã€‚</p><p>æ¯”å¦‚ï¼Œå¯¹æ¯”ä¸€ä¸‹ top å’Œ ps è¿™ä¸¤ä¸ªå·¥å…·æŠ¥å‘Šçš„ CPU ä½¿ç”¨ç‡ï¼Œé»˜è®¤çš„ç»“æœå¾ˆå¯èƒ½ä¸ä¸€æ ·ï¼Œå› ä¸º top é»˜è®¤ä½¿ç”¨ 3 ç§’æ—¶é—´é—´éš”ï¼Œè€Œ ps ä½¿ç”¨çš„å´æ˜¯è¿›ç¨‹çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸã€‚</p><h2>æ€ä¹ˆæŸ¥çœ‹ CPU ä½¿ç”¨ç‡</h2><p>çŸ¥é“äº† CPU ä½¿ç”¨ç‡çš„å«ä¹‰åï¼Œæˆ‘ä»¬å†æ¥çœ‹çœ‹è¦æ€ä¹ˆæŸ¥çœ‹ CPU ä½¿ç”¨ç‡ã€‚è¯´åˆ°æŸ¥çœ‹ CPU ä½¿ç”¨ç‡çš„å·¥å…·ï¼Œæˆ‘çŒœä½ ç¬¬ä¸€ååº”è‚¯å®šæ˜¯  top å’Œ psã€‚çš„ç¡®ï¼Œtop å’Œ ps æ˜¯æœ€å¸¸ç”¨çš„æ€§èƒ½åˆ†æå·¥å…·ï¼š</p><ul>\n<li>\n<p>top æ˜¾ç¤ºäº†ç³»ç»Ÿæ€»ä½“çš„ CPU å’Œå†…å­˜ä½¿ç”¨æƒ…å†µï¼Œä»¥åŠå„ä¸ªè¿›ç¨‹çš„èµ„æºä½¿ç”¨æƒ…å†µã€‚</p>\n</li>\n<li>\n<p>ps åˆ™åªæ˜¾ç¤ºäº†æ¯ä¸ªè¿›ç¨‹çš„èµ„æºä½¿ç”¨æƒ…å†µã€‚</p>\n</li>\n</ul><p>æ¯”å¦‚ï¼Œtop çš„è¾“å‡ºæ ¼å¼ä¸ºï¼š</p><pre><code># é»˜è®¤æ¯3ç§’åˆ·æ–°ä¸€æ¬¡\n$ top\ntop - 11:58:59 up 9 days, 22:47,  1 user,  load average: 0.03, 0.02, 0.00\nTasks: 123 total,   1 running,  72 sleeping,   0 stopped,   0 zombie\n%Cpu(s):  0.3 us,  0.3 sy,  0.0 ni, 99.3 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st\nKiB Mem :  8169348 total,  5606884 free,   334640 used,  2227824 buff/cache\nKiB Swap:        0 total,        0 free,        0 used.  7497908 avail Mem\n\n  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND\n    1 root      20   0   78088   9288   6696 S   0.0  0.1   0:16.83 systemd\n    2 root      20   0       0      0      0 S   0.0  0.0   0:00.05 kthreadd\n    4 root       0 -20       0      0      0 I   0.0  0.0   0:00.00 kworker/0:0H\n...\n</code></pre><p>è¿™ä¸ªè¾“å‡ºç»“æœä¸­ï¼Œç¬¬ä¸‰è¡Œ %Cpu å°±æ˜¯ç³»ç»Ÿçš„ CPU ä½¿ç”¨ç‡ï¼Œå…·ä½“æ¯ä¸€åˆ—çš„å«ä¹‰ä¸Šä¸€èŠ‚éƒ½è®²è¿‡ï¼Œåªæ˜¯æŠŠCPUæ—¶é—´å˜æ¢æˆäº†CPUä½¿ç”¨ç‡ï¼Œæˆ‘å°±ä¸å†é‡å¤è®²äº†ã€‚ä¸è¿‡éœ€è¦æ³¨æ„ï¼Œtop é»˜è®¤æ˜¾ç¤ºçš„æ˜¯æ‰€æœ‰ CPU çš„å¹³å‡å€¼ï¼Œè¿™ä¸ªæ—¶å€™ä½ åªéœ€è¦æŒ‰ä¸‹æ•°å­— 1 ï¼Œå°±å¯ä»¥åˆ‡æ¢åˆ°æ¯ä¸ª CPU çš„ä½¿ç”¨ç‡äº†ã€‚</p><p>ç»§ç»­å¾€ä¸‹çœ‹ï¼Œç©ºç™½è¡Œä¹‹åæ˜¯è¿›ç¨‹çš„å®æ—¶ä¿¡æ¯ï¼Œæ¯ä¸ªè¿›ç¨‹éƒ½æœ‰ä¸€ä¸ª %CPU åˆ—ï¼Œè¡¨ç¤ºè¿›ç¨‹çš„ CPU ä½¿ç”¨ç‡ã€‚å®ƒæ˜¯ç”¨æˆ·æ€å’Œå†…æ ¸æ€ CPU ä½¿ç”¨ç‡çš„æ€»å’Œï¼ŒåŒ…æ‹¬è¿›ç¨‹ç”¨æˆ·ç©ºé—´ä½¿ç”¨çš„ CPUã€é€šè¿‡ç³»ç»Ÿè°ƒç”¨æ‰§è¡Œçš„å†…æ ¸ç©ºé—´ CPU ã€ä»¥åŠåœ¨å°±ç»ªé˜Ÿåˆ—ç­‰å¾…è¿è¡Œçš„ CPUã€‚åœ¨è™šæ‹ŸåŒ–ç¯å¢ƒä¸­ï¼Œå®ƒè¿˜åŒ…æ‹¬äº†è¿è¡Œè™šæ‹Ÿæœºå ç”¨çš„ CPUã€‚</p><p>æ‰€ä»¥ï¼Œåˆ°è¿™é‡Œæˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œ top å¹¶æ²¡æœ‰ç»†åˆ†è¿›ç¨‹çš„ç”¨æˆ·æ€CPUå’Œå†…æ ¸æ€ CPUã€‚é‚£è¦æ€ä¹ˆæŸ¥çœ‹æ¯ä¸ªè¿›ç¨‹çš„è¯¦ç»†æƒ…å†µå‘¢ï¼Ÿä½ åº”è¯¥è¿˜è®°å¾—ä¸Šä¸€èŠ‚ç”¨åˆ°çš„  pidstat  å§ï¼Œå®ƒæ­£æ˜¯ä¸€ä¸ªä¸“é—¨åˆ†ææ¯ä¸ªè¿›ç¨‹ CPU ä½¿ç”¨æƒ…å†µçš„å·¥å…·ã€‚</p><p>æ¯”å¦‚ï¼Œä¸‹é¢çš„pidstatå‘½ä»¤ï¼Œå°±é—´éš”1ç§’å±•ç¤ºäº†è¿›ç¨‹çš„5ç»„CPUä½¿ç”¨ç‡ï¼ŒåŒ…æ‹¬ï¼š</p><ul>\n<li>\n<p>ç”¨æˆ·æ€CPUä½¿ç”¨ç‡ ï¼ˆ%usrï¼‰ï¼›</p>\n</li>\n<li>\n<p>å†…æ ¸æ€CPUä½¿ç”¨ç‡ï¼ˆ%systemï¼‰ï¼›</p>\n</li>\n<li>\n<p>è¿è¡Œè™šæ‹ŸæœºCPUä½¿ç”¨ç‡ï¼ˆ%guestï¼‰ï¼›</p>\n</li>\n<li>\n<p>ç­‰å¾… CPUä½¿ç”¨ç‡ï¼ˆ%waitï¼‰ï¼›</p>\n</li>\n<li>\n<p>ä»¥åŠæ€»çš„CPUä½¿ç”¨ç‡ï¼ˆ%CPUï¼‰ã€‚</p>\n</li>\n</ul><p>æœ€åçš„ Average éƒ¨åˆ†ï¼Œè¿˜è®¡ç®—äº† 5 ç»„æ•°æ®çš„å¹³å‡å€¼ã€‚</p><pre><code># æ¯éš”1ç§’è¾“å‡ºä¸€ç»„æ•°æ®ï¼Œå…±è¾“å‡º5ç»„\n$ pidstat 1 5\n15:56:02      UID       PID    %usr %system  %guest   %wait    %CPU   CPU  Command\n15:56:03        0     15006    0.00    0.99    0.00    0.00    0.99     1  dockerd\n\n...\n\nAverage:      UID       PID    %usr %system  %guest   %wait    %CPU   CPU  Command\nAverage:        0     15006    0.00    0.99    0.00    0.00    0.99     -  dockerd\n</code></pre><h2>CPU ä½¿ç”¨ç‡è¿‡é«˜æ€ä¹ˆåŠï¼Ÿ</h2><p>é€šè¿‡ topã€psã€pidstat ç­‰å·¥å…·ï¼Œä½ èƒ½å¤Ÿè½»æ¾æ‰¾åˆ° CPU ä½¿ç”¨ç‡è¾ƒé«˜ï¼ˆæ¯”å¦‚ 100% ï¼‰çš„è¿›ç¨‹ã€‚æ¥ä¸‹æ¥ï¼Œä½ å¯èƒ½åˆæƒ³çŸ¥é“ï¼Œå ç”¨ CPU çš„åˆ°åº•æ˜¯ä»£ç é‡Œçš„å“ªä¸ªå‡½æ•°å‘¢ï¼Ÿæ‰¾åˆ°å®ƒï¼Œä½ æ‰èƒ½æ›´é«˜æ•ˆã€æ›´é’ˆå¯¹æ€§åœ°è¿›è¡Œä¼˜åŒ–ã€‚</p><p>æˆ‘çŒœä½ ç¬¬ä¸€ä¸ªæƒ³åˆ°çš„ï¼Œåº”è¯¥æ˜¯ GDBï¼ˆThe GNU Project Debuggerï¼‰ï¼Œ è¿™ä¸ªåŠŸèƒ½å¼ºå¤§çš„ç¨‹åºè°ƒè¯•åˆ©å™¨ã€‚çš„ç¡®ï¼ŒGDB åœ¨è°ƒè¯•ç¨‹åºé”™è¯¯æ–¹é¢å¾ˆå¼ºå¤§ã€‚ä½†æ˜¯ï¼Œæˆ‘åˆè¦æ¥â€œæŒ‘åˆºâ€äº†ã€‚è¯·ä½ è®°ä½ï¼ŒGDB å¹¶ä¸é€‚åˆåœ¨æ€§èƒ½åˆ†æçš„æ—©æœŸåº”ç”¨ã€‚</p><p>ä¸ºä»€ä¹ˆå‘¢ï¼Ÿå› ä¸º GDB è°ƒè¯•ç¨‹åºçš„è¿‡ç¨‹ä¼šä¸­æ–­ç¨‹åºè¿è¡Œï¼Œè¿™åœ¨çº¿ä¸Šç¯å¢ƒå¾€å¾€æ˜¯ä¸å…è®¸çš„ã€‚æ‰€ä»¥ï¼ŒGDB åªé€‚åˆç”¨åœ¨æ€§èƒ½åˆ†æçš„åæœŸï¼Œå½“ä½ æ‰¾åˆ°äº†å‡ºé—®é¢˜çš„å¤§è‡´å‡½æ•°åï¼Œçº¿ä¸‹å†å€ŸåŠ©å®ƒæ¥è¿›ä¸€æ­¥è°ƒè¯•å‡½æ•°å†…éƒ¨çš„é—®é¢˜ã€‚</p><p>é‚£ä¹ˆå“ªç§å·¥å…·é€‚åˆåœ¨ç¬¬ä¸€æ—¶é—´åˆ†æè¿›ç¨‹çš„ CPU é—®é¢˜å‘¢ï¼Ÿæˆ‘çš„æ¨èæ˜¯ perfã€‚perf æ˜¯ Linux 2.6.31 ä»¥åå†…ç½®çš„æ€§èƒ½åˆ†æå·¥å…·ã€‚å®ƒä»¥æ€§èƒ½äº‹ä»¶é‡‡æ ·ä¸ºåŸºç¡€ï¼Œä¸ä»…å¯ä»¥åˆ†æç³»ç»Ÿçš„å„ç§äº‹ä»¶å’Œå†…æ ¸æ€§èƒ½ï¼Œè¿˜å¯ä»¥ç”¨æ¥åˆ†ææŒ‡å®šåº”ç”¨ç¨‹åºçš„æ€§èƒ½é—®é¢˜ã€‚</p><p>ä½¿ç”¨ perf åˆ†æ CPU æ€§èƒ½é—®é¢˜ï¼Œæˆ‘æ¥è¯´ä¸¤ç§æœ€å¸¸è§ã€ä¹Ÿæ˜¯æˆ‘æœ€å–œæ¬¢çš„ç”¨æ³•ã€‚</p><p>ç¬¬ä¸€ç§å¸¸è§ç”¨æ³•æ˜¯ perf topï¼Œç±»ä¼¼äº topï¼Œå®ƒèƒ½å¤Ÿå®æ—¶æ˜¾ç¤ºå ç”¨ CPU æ—¶é’Ÿæœ€å¤šçš„å‡½æ•°æˆ–è€…æŒ‡ä»¤ï¼Œå› æ­¤å¯ä»¥ç”¨æ¥æŸ¥æ‰¾çƒ­ç‚¹å‡½æ•°ï¼Œä½¿ç”¨ç•Œé¢å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>$ perf top\nSamples: 833  of event 'cpu-clock', Event count (approx.): 97742399\nOverhead  Shared Object       Symbol\n   7.28%  perf                [.] 0x00000000001f78a4\n   4.72%  [kernel]            [k] vsnprintf\n   4.32%  [kernel]            [k] module_get_kallsym\n   3.65%  [kernel]            [k] _raw_spin_unlock_irqrestore\n...\n</code></pre><p>è¾“å‡ºç»“æœä¸­ï¼Œç¬¬ä¸€è¡ŒåŒ…å«ä¸‰ä¸ªæ•°æ®ï¼Œåˆ†åˆ«æ˜¯é‡‡æ ·æ•°ï¼ˆSamplesï¼‰ã€äº‹ä»¶ç±»å‹ï¼ˆeventï¼‰å’Œäº‹ä»¶æ€»æ•°é‡ï¼ˆEvent countï¼‰ã€‚æ¯”å¦‚è¿™ä¸ªä¾‹å­ä¸­ï¼Œperf æ€»å…±é‡‡é›†äº† 833 ä¸ª CPU æ—¶é’Ÿäº‹ä»¶ï¼Œè€Œæ€»äº‹ä»¶æ•°åˆ™ä¸º 97742399ã€‚</p><p>å¦å¤–ï¼Œ<strong>é‡‡æ ·æ•°éœ€è¦æˆ‘ä»¬ç‰¹åˆ«æ³¨æ„</strong>ã€‚å¦‚æœé‡‡æ ·æ•°è¿‡å°‘ï¼ˆæ¯”å¦‚åªæœ‰åå‡ ä¸ªï¼‰ï¼Œé‚£ä¸‹é¢çš„æ’åºå’Œç™¾åˆ†æ¯”å°±æ²¡ä»€ä¹ˆå®é™…å‚è€ƒä»·å€¼äº†ã€‚</p><p>å†å¾€ä¸‹çœ‹æ˜¯ä¸€ä¸ªè¡¨æ ¼å¼æ ·çš„æ•°æ®ï¼Œæ¯ä¸€è¡ŒåŒ…å«å››åˆ—ï¼Œåˆ†åˆ«æ˜¯ï¼š</p><ul>\n<li>\n<p>ç¬¬ä¸€åˆ— Overhead ï¼Œæ˜¯è¯¥ç¬¦å·çš„æ€§èƒ½äº‹ä»¶åœ¨æ‰€æœ‰é‡‡æ ·ä¸­çš„æ¯”ä¾‹ï¼Œç”¨ç™¾åˆ†æ¯”æ¥è¡¨ç¤ºã€‚</p>\n</li>\n<li>\n<p>ç¬¬äºŒåˆ— Shared ï¼Œæ˜¯è¯¥å‡½æ•°æˆ–æŒ‡ä»¤æ‰€åœ¨çš„åŠ¨æ€å…±äº«å¯¹è±¡ï¼ˆDynamic Shared Objectï¼‰ï¼Œå¦‚å†…æ ¸ã€è¿›ç¨‹åã€åŠ¨æ€é“¾æ¥åº“åã€å†…æ ¸æ¨¡å—åç­‰ã€‚</p>\n</li>\n<li>\n<p>ç¬¬ä¸‰åˆ— Object ï¼Œæ˜¯åŠ¨æ€å…±äº«å¯¹è±¡çš„ç±»å‹ã€‚æ¯”å¦‚ [.] è¡¨ç¤ºç”¨æˆ·ç©ºé—´çš„å¯æ‰§è¡Œç¨‹åºã€æˆ–è€…åŠ¨æ€é“¾æ¥åº“ï¼Œè€Œ [k] åˆ™è¡¨ç¤ºå†…æ ¸ç©ºé—´ã€‚</p>\n</li>\n<li>\n<p>æœ€åä¸€åˆ— Symbol æ˜¯ç¬¦å·åï¼Œä¹Ÿå°±æ˜¯å‡½æ•°åã€‚å½“å‡½æ•°åæœªçŸ¥æ—¶ï¼Œç”¨åå…­è¿›åˆ¶çš„åœ°å€æ¥è¡¨ç¤ºã€‚</p>\n</li>\n</ul><p>è¿˜æ˜¯ä»¥ä¸Šé¢çš„è¾“å‡ºä¸ºä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå ç”¨ CPU æ—¶é’Ÿæœ€å¤šçš„æ˜¯ perf å·¥å…·è‡ªèº«ï¼Œä¸è¿‡å®ƒçš„æ¯”ä¾‹ä¹Ÿåªæœ‰ 7.28%ï¼Œè¯´æ˜ç³»ç»Ÿå¹¶æ²¡æœ‰ CPU æ€§èƒ½é—®é¢˜ã€‚ perf topçš„ä½¿ç”¨ä½ åº”è¯¥å¾ˆæ¸…æ¥šäº†å§ã€‚</p><p>æ¥ç€å†æ¥çœ‹ç¬¬äºŒç§å¸¸è§ç”¨æ³•ï¼Œä¹Ÿå°±æ˜¯ perf record å’Œ perf reportã€‚ perf top è™½ç„¶å®æ—¶å±•ç¤ºäº†ç³»ç»Ÿçš„æ€§èƒ½ä¿¡æ¯ï¼Œä½†å®ƒçš„ç¼ºç‚¹æ˜¯å¹¶ä¸ä¿å­˜æ•°æ®ï¼Œä¹Ÿå°±æ— æ³•ç”¨äºç¦»çº¿æˆ–è€…åç»­çš„åˆ†æã€‚è€Œ perf record åˆ™æä¾›äº†ä¿å­˜æ•°æ®çš„åŠŸèƒ½ï¼Œä¿å­˜åçš„æ•°æ®ï¼Œéœ€è¦ä½ ç”¨ perf report è§£æå±•ç¤ºã€‚</p><pre><code>$ perf record # æŒ‰Ctrl+Cç»ˆæ­¢é‡‡æ ·\n[ perf record: Woken up 1 times to write data ]\n[ perf record: Captured and wrote 0.452 MB perf.data (6093 samples) ]\n\n$ perf report # å±•ç¤ºç±»ä¼¼äºperf topçš„æŠ¥å‘Š\n</code></pre><p>åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œæˆ‘ä»¬è¿˜ç»å¸¸ä¸º perf top å’Œ perf record åŠ ä¸Š -g å‚æ•°ï¼Œå¼€å¯è°ƒç”¨å…³ç³»çš„é‡‡æ ·ï¼Œæ–¹ä¾¿æˆ‘ä»¬æ ¹æ®è°ƒç”¨é“¾æ¥åˆ†ææ€§èƒ½é—®é¢˜ã€‚</p><h2>æ¡ˆä¾‹</h2><p>ä¸‹é¢æˆ‘ä»¬å°±ä»¥ Nginx + PHP çš„ Web æœåŠ¡ä¸ºä¾‹ï¼Œæ¥çœ‹çœ‹å½“ä½ å‘ç° CPU ä½¿ç”¨ç‡è¿‡é«˜çš„é—®é¢˜åï¼Œè¦æ€ä¹ˆä½¿ç”¨ top ç­‰å·¥å…·æ‰¾å‡ºå¼‚å¸¸çš„è¿›ç¨‹ï¼Œåˆè¦æ€ä¹ˆåˆ©ç”¨ perf æ‰¾å‡ºå¼•å‘æ€§èƒ½é—®é¢˜çš„å‡½æ•°ã€‚</p><h3>ä½ çš„å‡†å¤‡</h3><p>ä»¥ä¸‹æ¡ˆä¾‹åŸºäº Ubuntu 18.04ï¼ŒåŒæ ·é€‚ç”¨äºå…¶ä»–çš„ Linux ç³»ç»Ÿã€‚æˆ‘ä½¿ç”¨çš„æ¡ˆä¾‹ç¯å¢ƒå¦‚ä¸‹æ‰€ç¤ºï¼š</p><ul>\n<li>\n<p>æœºå™¨é…ç½®ï¼š2 CPUï¼Œ8GB å†…å­˜</p>\n</li>\n<li>\n<p>é¢„å…ˆå®‰è£… dockerã€sysstatã€perfã€ab ç­‰å·¥å…·ï¼Œå¦‚ apt install docker.io sysstat linux-tools-common apache2-utils</p>\n</li>\n</ul><p>æˆ‘å…ˆç®€å•ä»‹ç»ä¸€ä¸‹è¿™æ¬¡æ–°ä½¿ç”¨çš„å·¥å…· abã€‚abï¼ˆapache benchï¼‰æ˜¯ä¸€ä¸ªå¸¸ç”¨çš„ HTTP æœåŠ¡æ€§èƒ½æµ‹è¯•å·¥å…·ï¼Œè¿™é‡Œç”¨æ¥æ¨¡æ‹Ÿ Ngnix çš„å®¢æˆ·ç«¯ã€‚ç”±äº Nginx å’Œ PHP çš„é…ç½®æ¯”è¾ƒéº»çƒ¦ï¼Œæˆ‘æŠŠå®ƒä»¬æ‰“åŒ…æˆäº†ä¸¤ä¸ª <a href=\"https://github.com/feiskyer/linux-perf-examples/tree/master/nginx-high-cpu\">Docker é•œåƒ</a>ï¼Œè¿™æ ·åªéœ€è¦è¿è¡Œä¸¤ä¸ªå®¹å™¨ï¼Œå°±å¯ä»¥å¾—åˆ°æ¨¡æ‹Ÿç¯å¢ƒã€‚</p><p>æ³¨æ„ï¼Œè¿™ä¸ªæ¡ˆä¾‹è¦ç”¨åˆ°ä¸¤å°è™šæ‹Ÿæœºï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/90/3d/90c30b4f555218f77241bfe2ac27723d.png?wh=408*258\" alt=\"\"></p><p>ä½ å¯ä»¥çœ‹åˆ°ï¼Œå…¶ä¸­ä¸€å°ç”¨ä½œ Web æœåŠ¡å™¨ï¼Œæ¥æ¨¡æ‹Ÿæ€§èƒ½é—®é¢˜ï¼›å¦ä¸€å°ç”¨ä½œ Web æœåŠ¡å™¨çš„å®¢æˆ·ç«¯ï¼Œæ¥ç»™ Web æœåŠ¡å¢åŠ å‹åŠ›è¯·æ±‚ã€‚ä½¿ç”¨ä¸¤å°è™šæ‹Ÿæœºæ˜¯ä¸ºäº†ç›¸äº’éš”ç¦»ï¼Œé¿å…â€œäº¤å‰æ„ŸæŸ“â€ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ‰“å¼€ä¸¤ä¸ªç»ˆç«¯ï¼Œåˆ†åˆ« SSH ç™»å½•åˆ°ä¸¤å°æœºå™¨ä¸Šï¼Œå¹¶å®‰è£…ä¸Šé¢æåˆ°çš„å·¥å…·ã€‚</p><p>è¿˜æ˜¯åŒæ ·çš„â€œé…æ–¹â€ã€‚ä¸‹é¢çš„æ‰€æœ‰å‘½ä»¤ï¼Œéƒ½é»˜è®¤å‡è®¾ä»¥ root ç”¨æˆ·è¿è¡Œï¼Œå¦‚æœä½ æ˜¯æ™®é€šç”¨æˆ·èº«ä»½ç™»é™†ç³»ç»Ÿï¼Œä¸€å®šè¦å…ˆè¿è¡Œ sudo su root å‘½ä»¤åˆ‡æ¢åˆ° root ç”¨æˆ·ã€‚åˆ°è¿™é‡Œï¼Œå‡†å¤‡å·¥ä½œå°±å®Œæˆäº†ã€‚</p><p>ä¸è¿‡ï¼Œæ“ä½œä¹‹å‰ï¼Œæˆ‘è¿˜æƒ³å†è¯´ä¸€ç‚¹ã€‚è¿™æ¬¡æ¡ˆä¾‹ä¸­ PHP åº”ç”¨çš„æ ¸å¿ƒé€»è¾‘æ¯”è¾ƒç®€å•ï¼Œå¤§éƒ¨åˆ†äººä¸€çœ¼å°±å¯ä»¥çœ‹å‡ºé—®é¢˜ï¼Œä½†ä½ è¦çŸ¥é“ï¼Œå®é™…ç”Ÿäº§ç¯å¢ƒä¸­çš„æºç å°±å¤æ‚å¤šäº†ã€‚</p><p>æ‰€ä»¥ï¼Œæˆ‘å¸Œæœ›ä½ åœ¨æŒ‰ç…§æ­¥éª¤æ“ä½œä¹‹å‰ï¼Œå…ˆä¸è¦æŸ¥çœ‹æºç ï¼ˆé¿å…å…ˆå…¥ä¸ºä¸»ï¼‰ï¼Œè€Œæ˜¯<strong>æŠŠå®ƒå½“æˆä¸€ä¸ªé»‘ç›’æ¥åˆ†æã€‚</strong>è¿™æ ·ï¼Œä½ å¯ä»¥æ›´å¥½åœ°ç†è§£æ•´ä¸ªè§£å†³æ€è·¯ï¼Œæ€ä¹ˆä»ç³»ç»Ÿçš„èµ„æºä½¿ç”¨é—®é¢˜å‡ºå‘ï¼Œåˆ†æå‡ºç“¶é¢ˆæ‰€åœ¨çš„åº”ç”¨ã€ä»¥åŠç“¶é¢ˆåœ¨åº”ç”¨ä¸­çš„å¤§æ¦‚ä½ç½®ã€‚</p><h3>æ“ä½œå’Œåˆ†æ</h3><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ­£å¼è¿›å…¥æ“ä½œç¯èŠ‚ã€‚</p><p>é¦–å…ˆï¼Œåœ¨ç¬¬ä¸€ä¸ªç»ˆç«¯æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤æ¥è¿è¡Œ Nginx å’Œ PHP åº”ç”¨ï¼š</p><pre><code>$ docker run --name nginx -p 10000:80 -itd feisky/nginx\n$ docker run --name phpfpm -itd --network container:nginx feisky/php-fpm\n</code></pre><p>ç„¶åï¼Œåœ¨ç¬¬äºŒä¸ªç»ˆç«¯ä½¿ç”¨ curl è®¿é—® http://[VM1çš„IP]:10000ï¼Œç¡®è®¤ Nginx å·²æ­£å¸¸å¯åŠ¨ã€‚ä½ åº”è¯¥å¯ä»¥çœ‹åˆ° It works! çš„å“åº”ã€‚</p><pre><code># 192.168.0.10æ˜¯ç¬¬ä¸€å°è™šæ‹Ÿæœºçš„IPåœ°å€\n$ curl http://192.168.0.10:10000/\nIt works!\n</code></pre><p>æ¥ç€ï¼Œæˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸‹è¿™ä¸ª Nginx æœåŠ¡çš„æ€§èƒ½ã€‚åœ¨ç¬¬äºŒä¸ªç»ˆç«¯è¿è¡Œä¸‹é¢çš„ ab å‘½ä»¤ï¼š</p><pre><code># å¹¶å‘10ä¸ªè¯·æ±‚æµ‹è¯•Nginxæ€§èƒ½ï¼Œæ€»å…±æµ‹è¯•100ä¸ªè¯·æ±‚\n$ ab -c 10 -n 100 http://192.168.0.10:10000/\nThis is ApacheBench, Version 2.3 &lt;$Revision: 1706008 $&gt;\nCopyright 1996 Adam Twiss, Zeus Technology Ltd, \n...\nRequests per second:    11.63 [#/sec] (mean)\nTime per request:       859.942 [ms] (mean)\n...\n</code></pre><p>ä»abçš„è¾“å‡ºç»“æœæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒNginxèƒ½æ‰¿å—çš„æ¯ç§’å¹³å‡è¯·æ±‚æ•°åªæœ‰ 11.63ã€‚ä½ ä¸€å®šåœ¨åæ§½ï¼Œè¿™ä¹Ÿå¤ªå·®äº†å§ã€‚é‚£åˆ°åº•æ˜¯å“ªé‡Œå‡ºäº†é—®é¢˜å‘¢ï¼Ÿæˆ‘ä»¬ç”¨ top å’Œ pidstat å†æ¥è§‚å¯Ÿä¸‹ã€‚</p><p>è¿™æ¬¡ï¼Œæˆ‘ä»¬åœ¨ç¬¬äºŒä¸ªç»ˆç«¯ï¼Œå°†æµ‹è¯•çš„è¯·æ±‚æ€»æ•°å¢åŠ åˆ° 10000ã€‚è¿™æ ·å½“ä½ åœ¨ç¬¬ä¸€ä¸ªç»ˆç«¯ä½¿ç”¨æ€§èƒ½åˆ†æå·¥å…·æ—¶ï¼Œ Nginx çš„å‹åŠ›è¿˜æ˜¯ç»§ç»­ã€‚</p><p>ç»§ç»­åœ¨ç¬¬äºŒä¸ªç»ˆç«¯ï¼Œè¿è¡Œ ab å‘½ä»¤ï¼š</p><pre><code>$ ab -c 10 -n 10000 http://192.168.0.10:10000/\n</code></pre><p>æ¥ç€ï¼Œå›åˆ°ç¬¬ä¸€ä¸ªç»ˆç«¯è¿è¡Œ top å‘½ä»¤ï¼Œå¹¶æŒ‰ä¸‹æ•°å­— 1 ï¼Œåˆ‡æ¢åˆ°æ¯ä¸ª CPU çš„ä½¿ç”¨ç‡ï¼š</p><pre><code>$ top\n...\n%Cpu0  : 98.7 us,  1.3 sy,  0.0 ni,  0.0 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st\n%Cpu1  : 99.3 us,  0.7 sy,  0.0 ni,  0.0 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st\n...\n  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND\n21514 daemon    20   0  336696  16384   8712 R  41.9  0.2   0:06.00 php-fpm\n21513 daemon    20   0  336696  13244   5572 R  40.2  0.2   0:06.08 php-fpm\n21515 daemon    20   0  336696  16384   8712 R  40.2  0.2   0:05.67 php-fpm\n21512 daemon    20   0  336696  13244   5572 R  39.9  0.2   0:05.87 php-fpm\n21516 daemon    20   0  336696  16384   8712 R  35.9  0.2   0:05.61 php-fpm\n</code></pre><p>è¿™é‡Œå¯ä»¥çœ‹åˆ°ï¼Œç³»ç»Ÿä¸­æœ‰å‡ ä¸ª php-fpm è¿›ç¨‹çš„ CPU ä½¿ç”¨ç‡åŠ èµ·æ¥æ¥è¿‘ 200%ï¼›è€Œæ¯ä¸ª CPU çš„ç”¨æˆ·ä½¿ç”¨ç‡ï¼ˆusï¼‰ä¹Ÿå·²ç»è¶…è¿‡äº† 98%ï¼Œæ¥è¿‘é¥±å’Œã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç¡®è®¤ï¼Œæ­£æ˜¯ç”¨æˆ·ç©ºé—´çš„ php-fpm è¿›ç¨‹ï¼Œå¯¼è‡´CPU ä½¿ç”¨ç‡éª¤å‡ã€‚</p><p>é‚£å†å¾€ä¸‹èµ°ï¼Œæ€ä¹ˆçŸ¥é“æ˜¯ php-fpm çš„å“ªä¸ªå‡½æ•°å¯¼è‡´äº† CPU ä½¿ç”¨ç‡å‡é«˜å‘¢ï¼Ÿæˆ‘ä»¬æ¥ç”¨ perf åˆ†æä¸€ä¸‹ã€‚åœ¨ç¬¬ä¸€ä¸ªç»ˆç«¯è¿è¡Œä¸‹é¢çš„perfå‘½ä»¤ï¼š</p><pre><code># -gå¼€å¯è°ƒç”¨å…³ç³»åˆ†æï¼Œ-pæŒ‡å®šphp-fpmçš„è¿›ç¨‹å·21515\n$ perf top -g -p 21515\n</code></pre><p>æŒ‰æ–¹å‘é”®åˆ‡æ¢åˆ° php-fpmï¼Œå†æŒ‰ä¸‹å›è½¦é”®å±•å¼€ php-fpm çš„è°ƒç”¨å…³ç³»ï¼Œä½ ä¼šå‘ç°ï¼Œè°ƒç”¨å…³ç³»æœ€ç»ˆåˆ°äº† sqrt å’Œ add_functionã€‚çœ‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦ä»è¿™ä¸¤ä¸ªå‡½æ•°å…¥æ‰‹äº†ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/6e/10/6e58d2f7b1ace94501b1833bab16f210.png?wh=1172*482\" alt=\"\"></p><p>æˆ‘ä»¬æ‹·è´å‡º <a href=\"https://github.com/feiskyer/linux-perf-examples/blob/master/nginx-high-cpu/app/index.php\">Nginx åº”ç”¨çš„æºç </a>ï¼Œçœ‹çœ‹æ˜¯ä¸æ˜¯è°ƒç”¨äº†è¿™ä¸¤ä¸ªå‡½æ•°ï¼š</p><pre><code># ä»å®¹å™¨phpfpmä¸­å°†PHPæºç æ‹·è´å‡ºæ¥\n$ docker cp phpfpm:/app .\n\n# ä½¿ç”¨grepæŸ¥æ‰¾å‡½æ•°è°ƒç”¨\n$ grep sqrt -r app/ #æ‰¾åˆ°äº†sqrtè°ƒç”¨\napp/index.php:  $x += sqrt($x);\n$ grep add_function -r app/ #æ²¡æ‰¾åˆ°add_functionè°ƒç”¨ï¼Œè¿™å…¶å®æ˜¯PHPå†…ç½®å‡½æ•°\n</code></pre><p>OKï¼ŒåŸæ¥åªæœ‰ sqrt å‡½æ•°åœ¨ app/index.php æ–‡ä»¶ä¸­è°ƒç”¨äº†ã€‚é‚£æœ€åä¸€æ­¥ï¼Œæˆ‘ä»¬å°±è¯¥çœ‹çœ‹è¿™ä¸ªæ–‡ä»¶çš„æºç äº†ï¼š</p><pre><code>$ cat app/index.php\n&lt;?php\n// test only.\n$x = 0.0001;\nfor ($i = 0; $i &lt;= 1000000; $i++) {\n  $x += sqrt($x);\n}\n\necho &quot;It works!&quot;\n</code></pre><p>å‘€ï¼Œæœ‰æ²¡æœ‰å‘ç°é—®é¢˜åœ¨å“ªé‡Œå‘¢ï¼Ÿæˆ‘æƒ³ä½ è¦ç¬‘è¯æˆ‘äº†ï¼Œå±…ç„¶çŠ¯äº†ä¸€ä¸ªè¿™ä¹ˆå‚»çš„é”™è¯¯ï¼Œæµ‹è¯•ä»£ç æ²¡åˆ å°±ç›´æ¥å‘å¸ƒåº”ç”¨äº†ã€‚ä¸ºäº†æ–¹ä¾¿ä½ éªŒè¯ä¼˜åŒ–åçš„æ•ˆæœï¼Œæˆ‘æŠŠä¿®å¤åçš„åº”ç”¨ä¹Ÿæ‰“åŒ…æˆäº†ä¸€ä¸ªDockeré•œåƒï¼Œä½ å¯ä»¥åœ¨ç¬¬ä¸€ä¸ªç»ˆç«¯ä¸­æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤æ¥è¿è¡Œå®ƒï¼š</p><pre><code># åœæ­¢åŸæ¥çš„åº”ç”¨\n$ docker rm -f nginx phpfpm\n# è¿è¡Œä¼˜åŒ–åçš„åº”ç”¨\n$ docker run --name nginx -p 10000:80 -itd feisky/nginx:cpu-fix\n$ docker run --name phpfpm -itd --network container:nginx feisky/php-fpm:cpu-fix\n</code></pre><p>æ¥ç€ï¼Œåˆ°ç¬¬äºŒä¸ªç»ˆç«¯æ¥éªŒè¯ä¸€ä¸‹ä¿®å¤åçš„æ•ˆæœã€‚é¦–å…ˆCtrl+Cåœæ­¢ä¹‹å‰çš„abå‘½ä»¤åï¼Œå†è¿è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š</p><pre><code>$ ab -c 10 -n 10000 http://10.240.0.5:10000/\n...\nComplete requests:Â  Â  Â  10000\nFailed requests:Â  Â  Â  Â  0\nTotal transferred:Â  Â  Â  1720000 bytes\nHTML transferred:Â  Â  Â  Â 90000 bytes\nRequests per second:Â  Â  2237.04 [#/sec] (mean)\nTime per request:Â  Â  Â  Â 4.470 [ms] (mean)\nTime per request:Â  Â  Â  Â 0.447 [ms] (mean, across all concurrent requests)\nTransfer rate:Â  Â  Â  Â  Â  375.75 [Kbytes/sec] received\n...\n</code></pre><p>ä»è¿™é‡Œä½ å¯ä»¥å‘ç°ï¼Œç°åœ¨æ¯ç§’çš„å¹³å‡è¯·æ±‚æ•°ï¼Œå·²ç»ä»åŸæ¥çš„11å˜æˆäº†2237ã€‚</p><p>ä½ çœ‹ï¼Œå°±æ˜¯è¿™ä¹ˆå¾ˆå‚»çš„ä¸€ä¸ªå°é—®é¢˜ï¼Œå´ä¼šæå¤§çš„å½±å“æ€§èƒ½ï¼Œå¹¶ä¸”æŸ¥æ‰¾èµ·æ¥ä¹Ÿå¹¶ä¸å®¹æ˜“å§ã€‚å½“ç„¶ï¼Œæ‰¾åˆ°é—®é¢˜åï¼Œè§£å†³æ–¹æ³•å°±ç®€å•å¤šäº†ï¼Œåˆ é™¤æµ‹è¯•ä»£ç å°±å¯ä»¥äº†ã€‚</p><h2>å°ç»“</h2><p>CPU ä½¿ç”¨ç‡æ˜¯æœ€ç›´è§‚å’Œæœ€å¸¸ç”¨çš„ç³»ç»Ÿæ€§èƒ½æŒ‡æ ‡ï¼Œæ›´æ˜¯æˆ‘ä»¬åœ¨æ’æŸ¥æ€§èƒ½é—®é¢˜æ—¶ï¼Œé€šå¸¸ä¼šå…³æ³¨çš„ç¬¬ä¸€ä¸ªæŒ‡æ ‡ã€‚æ‰€ä»¥æˆ‘ä»¬æ›´è¦ç†Ÿæ‚‰å®ƒçš„å«ä¹‰ï¼Œå°¤å…¶è¦å¼„æ¸…æ¥šç”¨æˆ·ï¼ˆ%userï¼‰ã€Niceï¼ˆ%niceï¼‰ã€ç³»ç»Ÿï¼ˆ%systemï¼‰ ã€ç­‰å¾… I/Oï¼ˆ%iowaitï¼‰ ã€ä¸­æ–­ï¼ˆ%irqï¼‰ä»¥åŠè½¯ä¸­æ–­ï¼ˆ%softirqï¼‰è¿™å‡ ç§ä¸åŒ CPU çš„ä½¿ç”¨ç‡ã€‚æ¯”å¦‚è¯´ï¼š</p><ul>\n<li>\n<p>ç”¨æˆ· CPU å’Œ Nice CPU é«˜ï¼Œè¯´æ˜ç”¨æˆ·æ€è¿›ç¨‹å ç”¨äº†è¾ƒå¤šçš„ CPUï¼Œæ‰€ä»¥åº”è¯¥ç€é‡æ’æŸ¥è¿›ç¨‹çš„æ€§èƒ½é—®é¢˜ã€‚</p>\n</li>\n<li>\n<p>ç³»ç»Ÿ CPU é«˜ï¼Œè¯´æ˜å†…æ ¸æ€å ç”¨äº†è¾ƒå¤šçš„ CPUï¼Œæ‰€ä»¥åº”è¯¥ç€é‡æ’æŸ¥å†…æ ¸çº¿ç¨‹æˆ–è€…ç³»ç»Ÿè°ƒç”¨çš„æ€§èƒ½é—®é¢˜ã€‚</p>\n</li>\n<li>\n<p>I/O ç­‰å¾… CPU é«˜ï¼Œè¯´æ˜ç­‰å¾… I/O çš„æ—¶é—´æ¯”è¾ƒé•¿ï¼Œæ‰€ä»¥åº”è¯¥ç€é‡æ’æŸ¥ç³»ç»Ÿå­˜å‚¨æ˜¯ä¸æ˜¯å‡ºç°äº† I/O é—®é¢˜ã€‚</p>\n</li>\n<li>\n<p>è½¯ä¸­æ–­å’Œç¡¬ä¸­æ–­é«˜ï¼Œè¯´æ˜è½¯ä¸­æ–­æˆ–ç¡¬ä¸­æ–­çš„å¤„ç†ç¨‹åºå ç”¨äº†è¾ƒå¤šçš„ CPUï¼Œæ‰€ä»¥åº”è¯¥ç€é‡æ’æŸ¥å†…æ ¸ä¸­çš„ä¸­æ–­æœåŠ¡ç¨‹åºã€‚</p>\n</li>\n</ul><p>ç¢°åˆ° CPU ä½¿ç”¨ç‡å‡é«˜çš„é—®é¢˜ï¼Œä½ å¯ä»¥å€ŸåŠ© topã€pidstat ç­‰å·¥å…·ï¼Œç¡®è®¤å¼•å‘ CPU æ€§èƒ½é—®é¢˜çš„æ¥æºï¼›å†ä½¿ç”¨ perf ç­‰å·¥å…·ï¼Œæ’æŸ¥å‡ºå¼•èµ·æ€§èƒ½é—®é¢˜çš„å…·ä½“å‡½æ•°ã€‚</p><h2>æ€è€ƒ</h2><p>æœ€åï¼Œæˆ‘æƒ³é‚€è¯·ä½ ä¸€èµ·æ¥èŠèŠï¼Œä½ æ‰€ç†è§£çš„ CPU ä½¿ç”¨ç‡ï¼Œä»¥åŠåœ¨å‘ç° CPU ä½¿ç”¨ç‡å‡é«˜æ—¶ï¼Œä½ åˆæ˜¯æ€ä¹ˆåˆ†æçš„å‘¢ï¼Ÿä½ å¯ä»¥ç»“åˆä»Šå¤©çš„å†…å®¹ï¼Œå’Œä½ è‡ªå·±çš„æ“ä½œè®°å½•ï¼Œæ¥æ€»ç»“æ€è·¯ã€‚</p><p>æ¬¢è¿åœ¨ç•™è¨€åŒºå’Œæˆ‘è®¨è®ºï¼Œä¹Ÿæ¬¢è¿æŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«ç»™ä½ çš„åŒäº‹ã€æœ‹å‹ã€‚æˆ‘ä»¬ä¸€èµ·åœ¨å®æˆ˜ä¸­æ¼”ç»ƒï¼Œåœ¨äº¤æµä¸­è¿›æ­¥ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/56/52/565d66d658ad23b2f4997551db153852.jpg?wh=1110*549\" alt=\"\"></p>","neighbors":{"left":{"article_title":"04 | åŸºç¡€ç¯‡ï¼šç»å¸¸è¯´çš„ CPU ä¸Šä¸‹æ–‡åˆ‡æ¢æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿï¼ˆä¸‹ï¼‰","id":70077},"right":{"article_title":"06 | æ¡ˆä¾‹ç¯‡ï¼šç³»ç»Ÿçš„ CPU ä½¿ç”¨ç‡å¾ˆé«˜ï¼Œä½†ä¸ºå•¥å´æ‰¾ä¸åˆ°é«˜ CPU çš„åº”ç”¨ï¼Ÿ","id":70822}},"comments":[{"had_liked":false,"id":46197,"user_name":"æ¯å¤©æ™’ç™½ç‰™","can_delete":false,"product_type":"c1","uid":1004698,"ip_address":"","ucode":"A1B102CD933DEA","user_header":"https://static001.geekbang.org/account/avatar/00/0f/54/9a/76c0af70.jpg","comment_is_top":false,"comment_ctime":1543883154,"is_pvip":false,"discussion_count":23,"race_medal":1,"score":"886307146130","product_id":100020901,"comment_content":"ã€D5è¡¥å¡ã€‘<br>æˆ‘çš„ç³»ç»Ÿæ˜¯centos7ï¼Œä¸Šæ¬¡å®æˆ˜ç”¨ perf top -g -p pidæ²¡æœ‰çœ‹åˆ°å‡½æ•°åç§°ï¼Œåªèƒ½çœ‹åˆ°ä¸€å †åå…­è¿›åˆ¶çš„ä¸œè¥¿ï¼Œç„¶åè€å¸ˆç»™äº†è§£å†³æ–¹æ³•ï¼Œæˆ‘è½¬è¿°ä¸‹ï¼š<br>åˆ†æï¼šå½“æ²¡æœ‰çœ‹åˆ°å‡½æ•°åç§°ï¼Œåªçœ‹åˆ°äº†åå…­è¿›åˆ¶ç¬¦å·ï¼Œä¸‹é¢æœ‰Failed to open &#47;usr&#47;lib&#47;x86_64-linux-gnu&#47;libxml2.so.2.9.4, continuing without symbols  è¿™è¯´æ˜perfæ— æ³•æ‰¾åˆ°å¾…åˆ†æè¿›ç¨‹æ‰€ä¾èµ–çš„åº“ã€‚è¿™é‡Œåªæ˜¾ç¤ºäº†ä¸€ä¸ªï¼Œä½†å…¶å®ä¾èµ–çš„åº“è¿˜æœ‰å¾ˆå¤šã€‚è¿™ä¸ªé—®é¢˜å…¶å®æ˜¯åœ¨åˆ†æDockerå®¹å™¨åº”ç”¨æ—¶ç»å¸¸ä¼šç¢°åˆ°çš„ä¸€ä¸ªé—®é¢˜ï¼Œå› ä¸ºå®¹å™¨åº”ç”¨æ‰€ä¾èµ–çš„åº“éƒ½åœ¨é•œåƒé‡Œé¢ã€‚<br><br>è€å¸ˆç»™äº†ä¸¤ä¸ªè§£å†³æ€è·¯ï¼š<br>ï¼ˆ1ï¼‰åœ¨å®¹å™¨å¤–é¢æ„å»ºç›¸åŒè·¯å¾„çš„ä¾èµ–åº“ã€‚è¿™ç§æ–¹æ³•ä¸æ¨èï¼Œä¸€æ˜¯å› ä¸ºæ‰¾å‡ºè¿™äº›ä¾èµ–æ¯”è¾ƒéº»çƒ¦ï¼Œæ›´é‡è¦çš„æ˜¯æ„å»ºè¿™äº›è·¯å¾„ä¼šæ±¡æŸ“è™šæ‹Ÿæœºçš„ç¯å¢ƒã€‚<br>ï¼ˆ2ï¼‰åœ¨å®¹å™¨å¤–é¢æŠŠåˆ†æçºªå½•ä¿å­˜ä¸‹æ¥ï¼Œåˆ°å®¹å™¨é‡Œé¢å†å»æŸ¥çœ‹ç»“æœï¼Œè¿™æ ·åº“å’Œç¬¦å·çš„è·¯å¾„å°±éƒ½æ˜¯å¯¹çš„äº†ã€‚<br><br>æ“ä½œï¼š<br>ï¼ˆ1ï¼‰åœ¨Centosç³»ç»Ÿä¸Šè¿è¡Œ perf record -g -p &lt;pid&gt;ï¼Œæ‰§è¡Œä¸€ä¼šå„¿ï¼ˆæ¯”å¦‚15ç§’ï¼‰æŒ‰ctrl+cåœæ­¢<br>ï¼ˆ2ï¼‰æŠŠç”Ÿæˆçš„ perf.dataï¼ˆè¿™ä¸ªæ–‡ä»¶ç”Ÿæˆåœ¨æ‰§è¡Œå‘½ä»¤çš„å½“å‰ç›®å½•ä¸‹ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥é€šè¿‡æŸ¥æ‰¾å®ƒçš„è·¯å¾„ find | grep perf.dataæˆ– find &#47; -name perf.dataï¼‰æ–‡ä»¶æ‹·è´åˆ°å®¹å™¨é‡Œé¢åˆ†æ:<br>docker cp perf.data phpfpm:&#47;tmp<br>docker exec -i -t phpfpm bash<br>$ cd &#47;tmp&#47;<br>$ apt-get update &amp;&amp; apt-get install -y linux-perf linux-tools procps<br>$ perf_4.9 report<br><br>æ³¨æ„ï¼šæœ€åè¿è¡Œçš„å·¥å…·åå­—æ˜¯å®¹å™¨å†…éƒ¨å®‰è£…çš„ç‰ˆæœ¬ perf_4.9ï¼Œè€Œä¸æ˜¯ perf å‘½ä»¤ï¼Œè¿™æ˜¯å› ä¸º perf ä¼šå»è·Ÿå†…æ ¸çš„ç‰ˆæœ¬è¿›è¡ŒåŒ¹é…ï¼Œä½†é•œåƒé‡Œé¢å®‰è£…çš„perfç‰ˆæœ¬æœ‰å¯èƒ½è·Ÿè™šæ‹Ÿæœºçš„å†…æ ¸ç‰ˆæœ¬ä¸ä¸€è‡´ã€‚<br>æ³¨æ„ï¼šä¸Šé¢çš„é—®é¢˜åªæ˜¯åœ¨centosç³»ç»Ÿä¸­æœ‰é—®é¢˜ï¼Œubuntuä¸Šæ²¡æœ‰è¿™ä¸ªé—®é¢˜","like_count":207,"discussions":[{"author":{"id":1169422,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d8/0e/1bf7f57a.jpg","nickname":"ğŸ‰æ™¶æ™¶ğŸ‰ğŸ˜„","note":"","ucode":"76B608C42E06A8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":409288,"discussion_content":"åªèƒ½æ˜¾ç¤ºexcute_exã€add_functionï¼Œå±•å¼€ä¹Ÿæ²¡æœ‰æ˜¾ç¤ºsqrtï¼Œæœ‰é‡åˆ°åŒæ ·é—®é¢˜çš„å—ï¼Ÿ","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1635409718,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1298046,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKZicicibGibtR5zAia782Ajc5I5BN3F3tjAdlibATIknHv67gbxeH21N7B6vbgwLjYb1miaLKhqicptB5ibYw/132","nickname":"é˜¿é£","note":"","ucode":"F8B1FC8521264D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":271323,"discussion_content":"ç„¶è€Œcentos7.5ä¸­çš„dockeræ— æ³•å®‰è£…linux-tools","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1590116397,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2348507,"avatar":"https://static001.geekbang.org/account/avatar/00/23/d5/db/f59b288b.jpg","nickname":"é¢å¯¹ç–¾é£å§","note":"","ucode":"FB87423BB7AEE7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1298046,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKZicicibGibtR5zAia782Ajc5I5BN3F3tjAdlibATIknHv67gbxeH21N7B6vbgwLjYb1miaLKhqicptB5ibYw/132","nickname":"é˜¿é£","note":"","ucode":"F8B1FC8521264D","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":331437,"discussion_content":"è€å“¥æœ€ç»ˆæ€ä¹ˆè§£å†³å¾—ã€‚æˆ‘ä¹Ÿé‡åˆ°äº†è¿™ä¸ªé—®é¢˜ï¼Œæ±‚è”ç³»æ–¹å¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606875329,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":271323,"ip_address":""},"score":331437,"extra":""}]},{"author":{"id":1226656,"avatar":"https://static001.geekbang.org/account/avatar/00/12/b7/a0/9ed1934c.jpg","nickname":"Carson","note":"","ucode":"694BBF6D3BB73F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":72594,"discussion_content":"dockeræ˜¯å…±äº«å†…æ ¸çš„ï¼Œæ€ä¹ˆä¼šå†…æ ¸ç‰ˆæœ¬ä¸ä¸€è‡´","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1575507333,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1284984,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKVqBf4Tkj2OtdziaIKlJJf6RVpZ8LmbPibg47Ba4wiaW5zXecpYYn5oKTrzhOJ6L5H2Yv7cqLSODiazA/132","nickname":"h1z3y3","note":"","ucode":"AD0B626CF56A9A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":387838,"discussion_content":"ä½•ä¸ç›´æ¥è¿›å…¥å®¹å™¨ç„¶åæ‰§è¡Œ `perf top`ï¼Œæ²¡å¿…è¦åœ¨å®¿ä¸»æœºå…ˆç”ŸæˆæŠ¥å‘Šå†æ‹·è´åˆ°å®¹å™¨ï¼›\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¦ä½¿ç”¨ perfï¼Œå¯åŠ¨ docker çš„æ—¶å€™å¢åŠ  `--privileged` å‚æ•°","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1628444796,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2445109,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/eqhTVsXo1lTsRfPCmHriabsibw2HQIny7qP2zRhfU46aicibzXzP1Dt8X6icSyZSPCTtIQIfrdBwqPwVKLsH2X8pN1w/132","nickname":"Geek_493455","note":"","ucode":"EA800B8154E616","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1284984,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKVqBf4Tkj2OtdziaIKlJJf6RVpZ8LmbPibg47Ba4wiaW5zXecpYYn5oKTrzhOJ6L5H2Yv7cqLSODiazA/132","nickname":"h1z3y3","note":"","ucode":"AD0B626CF56A9A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":389089,"discussion_content":"è¯•ä¸€ä¸‹å°±çŸ¥é“äº†ï¼Œå› ä¸ºperféœ€è¦æ”¶é›†/proc/ä¸‹çš„ä¿¡æ¯ï¼Œæ™®é€šè¿›ç¨‹æ²¡æœ‰æƒé™","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1629114584,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":387838,"ip_address":""},"score":389089,"extra":""}]},{"author":{"id":1565396,"avatar":"https://static001.geekbang.org/account/avatar/00/17/e2/d4/ef86ea64.jpg","nickname":"Front","note":"","ucode":"35593EA52F2EA6","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":302571,"discussion_content":"æˆ‘çš„ç¯å¢ƒæ˜¯ubuntu18.04ï¼Œperfæ˜¯5.4.44ï¼Œdockeré‡Œçš„perf_4.9æ˜¯æ— æ³•æ‰“å¼€è™šæ‹Ÿæœºç”Ÿæˆçš„perf.dataï¼Œå› ä¸ºç‰ˆæœ¬å¤ªä½ã€‚è¯·é—®è¿™ç§æƒ…å†µå¦‚ä½• å¤„ç†ï¼Ÿè°¢è°¢","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1598963700,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2593667,"avatar":"https://static001.geekbang.org/account/avatar/00/27/93/83/cb37c46e.jpg","nickname":"cshzet","note":"","ucode":"A343CCB6E5D519","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1565396,"avatar":"https://static001.geekbang.org/account/avatar/00/17/e2/d4/ef86ea64.jpg","nickname":"Front","note":"","ucode":"35593EA52F2EA6","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":567693,"discussion_content":"å¦‚ä½•è§£å†³ï¼Œè€å“¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650976853,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":302571,"ip_address":""},"score":567693,"extra":""}]},{"author":{"id":1298046,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKZicicibGibtR5zAia782Ajc5I5BN3F3tjAdlibATIknHv67gbxeH21N7B6vbgwLjYb1miaLKhqicptB5ibYw/132","nickname":"é˜¿é£","note":"","ucode":"F8B1FC8521264D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":271102,"discussion_content":"php dockeræ˜¯åŸºäºdebian çš„busterç‰ˆæœ¬ï¼Œé‰´äºå›½å†…ä½¿ç”¨å›½å¤–aptæºå«æ…¢ï¼Œæ‰€ä»¥å…ˆæ›´æ–°æºï¼ˆæ¸…åæºï¼šhttps://mirrors.tuna.tsinghua.edu.cn/help/debian/ï¼‰\nå‘½ä»¤å¦‚ä¸‹ï¼š\ncat << EOF > /etc/apt/sources.list\n# é»˜è®¤æ³¨é‡Šäº†æºç é•œåƒä»¥æé«˜ apt update é€Ÿåº¦ï¼Œå¦‚æœ‰éœ€è¦å¯è‡ªè¡Œå–æ¶ˆæ³¨é‡Š\ndeb https://mirrors.tuna.tsinghua.edu.cn/debian/ buster main contrib non-free\n# deb-src https://mirrors.tuna.tsinghua.edu.cn/debian/ buster main contrib non-free\ndeb https://mirrors.tuna.tsinghua.edu.cn/debian/ buster-updates main contrib non-free\n# deb-src https://mirrors.tuna.tsinghua.edu.cn/debian/ buster-updates main contrib non-free\ndeb https://mirrors.tuna.tsinghua.edu.cn/debian/ buster-backports main contrib non-free\n# deb-src https://mirrors.tuna.tsinghua.edu.cn/debian/ buster-backports main contrib non-free\ndeb https://mirrors.tuna.tsinghua.edu.cn/debian-security buster/updates main contrib non-free\n# deb-src https://mirrors.tuna.tsinghua.edu.cn/debian-security buster/updates main contrib non-free\nEOF\n","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1590076348,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1284474,"avatar":"https://static001.geekbang.org/account/avatar/00/13/99/7a/558666a5.jpg","nickname":"AceslupK","note":"","ucode":"048F84D019CBBB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":387249,"discussion_content":"éå¸¸æ„Ÿè°¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628072181,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1281585,"avatar":"https://static001.geekbang.org/account/avatar/00/13/8e/31/28972804.jpg","nickname":"é˜¿æµ·","note":"","ucode":"2589431F840C42","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375440,"discussion_content":"è€å“¥ï¼ŒæŒ‰ç…§ä½ çš„è¯´æ˜ï¼Œcentos7  ç¡®å®å¯ä»¥çœ‹åˆ°add_function, sqrtäº†ï¼Œå¤šè°¢å“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621656396,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1082187,"avatar":"https://static001.geekbang.org/account/avatar/00/10/83/4b/0e96fcae.jpg","nickname":"sky","note":"","ucode":"FC323371453C97","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1281585,"avatar":"https://static001.geekbang.org/account/avatar/00/13/8e/31/28972804.jpg","nickname":"é˜¿æµ·","note":"","ucode":"2589431F840C42","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":377806,"discussion_content":"æˆ‘è¿™æœ‰ add_function å°±æ˜¯ä¸æ˜¾ç¤º sqrt å•Šâ€¦  é†‰äº†","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1622873834,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":375440,"ip_address":""},"score":377806,"extra":""}]},{"author":{"id":1263977,"avatar":"https://static001.geekbang.org/account/avatar/00/13/49/69/c0fcf4e8.jpg","nickname":"def","note":"","ucode":"39BDBEA0560C13","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":362017,"discussion_content":"mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616826942,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1259323,"avatar":"https://static001.geekbang.org/account/avatar/00/13/37/3b/495e2ce6.jpg","nickname":"é™ˆæ–¯ä½³","note":"","ucode":"C236F874FC767A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":356158,"discussion_content":"æ„Ÿè°¢åˆ†äº«ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615542309,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2416022,"avatar":"https://static001.geekbang.org/account/avatar/00/24/dd/96/8677254c.jpg","nickname":"æ‰¿","note":"","ucode":"31E425788BA852","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":343611,"discussion_content":"æ„Ÿè°¢è¿™ä½è€å“¥ï¼Œå¥½äººä¸€ç”Ÿå¹³å®‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611111358,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1705468,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/05/fc/bceb3f2b.jpg","nickname":"å¼€å¿ƒå“¥","note":"","ucode":"D44C1F03B23C5A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":330107,"discussion_content":"centos å¾—æ•‘äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606532405,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1145779,"avatar":"https://static001.geekbang.org/account/avatar/00/11/7b/b3/194f7f90.jpg","nickname":"æ²¡ä¼çš„å­©å­å¾—ä½¿åŠ²å¥”è·‘","note":"","ucode":"D015B4EF12E536","race_medal":1,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":275483,"discussion_content":"è€å“¥ï¼Œä¸é”™ï¼Œä¸è¿‡dockerå®¹å™¨å†…æ ¸ï¼Œæˆ‘å°è±¡ä¸­æ˜¯å’Œç‰©ç†æœºæ˜¯ä¿æŒä¸€è‡´çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590720461,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1070101,"avatar":"https://static001.geekbang.org/account/avatar/00/10/54/15/38e479cc.jpg","nickname":"å˜é‡","note":"","ucode":"9E65BB381C6871","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":250729,"discussion_content":"è¯·é—®ä¸‹è€å¸ˆï¼Œçº¿ä¸Šç¯å¢ƒcentos7è¿è¡Œå®¹å™¨ï¼ŒcpuæŒç»­ä¸Šæ¶¨åˆ°è¾¾100%ï¼Œè¿™å—æœ‰æ²¡æœ‰åˆ†ææ€è·¯ï¼Œè°¢è°¢ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588037310,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1606177,"avatar":"","nickname":"ç¨‹åºå‘˜è€ä¸‡","note":"","ucode":"061269EFE23EC4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2910,"discussion_content":"æˆ‘åœ¨dockerå®¹å™¨å†…å®‰è£…äº†perfï¼Œç„¶åperf reportæ˜¾ç¤ºå‡ºæ¥çš„è¿˜æ˜¯16è¿›åˆ¶åœ°å€,ä¸çŸ¥é“å•¥åŸå› ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564033734,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1313331,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/0OaV2KicIgpZdNYqIyqcM1YWo4lxPnetXXf2zvibyicibXB4FcyT9P93QecHz2StqZu7vwLJIOSTPvuokLWXQsunEA/132","nickname":"ä¸€é¢—å¿ƒçš„æ€è€ƒ","note":"","ucode":"1F184F9BD8E2CD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1606177,"avatar":"","nickname":"ç¨‹åºå‘˜è€ä¸‡","note":"","ucode":"061269EFE23EC4","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":294600,"discussion_content":"æˆ‘çš„ä¹Ÿæ˜¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595939020,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":2910,"ip_address":""},"score":294600,"extra":""},{"author":{"id":1316682,"avatar":"https://static001.geekbang.org/account/avatar/00/14/17/4a/d8fd5563.jpg","nickname":"è®°å¿†","note":"","ucode":"503DBE662BF544","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1313331,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/0OaV2KicIgpZdNYqIyqcM1YWo4lxPnetXXf2zvibyicibXB4FcyT9P93QecHz2StqZu7vwLJIOSTPvuokLWXQsunEA/132","nickname":"ä¸€é¢—å¿ƒçš„æ€è€ƒ","note":"","ucode":"1F184F9BD8E2CD","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":312924,"discussion_content":"ç¼–è¯‘åŠ -gè¯•è¯•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602854609,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":294600,"ip_address":""},"score":312924,"extra":""},{"author":{"id":1394115,"avatar":"https://static001.geekbang.org/account/avatar/00/15/45/c3/051ffe83.jpg","nickname":"rubys_","note":"","ucode":"931AD02864126A","race_medal":5,"user_type":1,"is_pvip":true},"reply_author":{"id":1606177,"avatar":"","nickname":"ç¨‹åºå‘˜è€ä¸‡","note":"","ucode":"061269EFE23EC4","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":368817,"discussion_content":"æˆ‘çš„ä¹Ÿæ˜¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618838822,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":2910,"ip_address":""},"score":368817,"extra":""}]},{"author":{"id":1574062,"avatar":"https://static001.geekbang.org/account/avatar/00/18/04/ae/0118c132.jpg","nickname":"è¾‰æ™–","note":"","ucode":"E5EC033EE4952B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":258,"discussion_content":"æˆ‘è¿™æ ·æ“ä½œäº†ï¼Œè¿˜æ˜¯åªæ˜¾ç¤ºåå…­è¿›åˆ¶çš„ã€‚Cannot load tips.txt file, please install perfæ˜æ˜æ˜¯å®‰è£…çš„äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561364609,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":44993,"user_name":"Dç™½èœ","can_delete":false,"product_type":"c1","uid":1304391,"ip_address":"","ucode":"8DC343172AB781","user_header":"https://static001.geekbang.org/account/avatar/00/13/e7/47/d0715205.jpg","comment_is_top":false,"comment_ctime":1543538225,"is_pvip":false,"replies":[{"id":"16093","content":"ğŸ‘ è¯¾ä»£è¡¨çš„æ€»ç»“å¾ˆå…¨é¢","user_name":"ä½œè€…å›å¤","comment_id":44993,"uid":"1001282","ip_address":"","utype":1,"ctime":1543589020,"user_name_real":"å€ªæœ‹é£"}],"discussion_count":1,"race_medal":0,"score":"383795627569","product_id":100020901,"comment_content":"Day 5ï¼Œå¹²æ´»æ»¡æ»¡å•Šï¼Œè°¢è°¢è€å¸ˆå•Šã€‚<br>ä»Šå¤©æ€»ç»“å¦‚ä¸‹ï¼š<br>1ã€Linuxå¹¶å‘(ä»»åŠ¡å¹¶è¡Œ)çš„å®è´¨ï¼šLinux ä½œä¸ºä¸€ä¸ªå¤šä»»åŠ¡æ“ä½œç³»ç»Ÿï¼Œå°†æ¯ä¸ª CPU çš„æ—¶é—´åˆ’åˆ†ä¸ºå¾ˆçŸ­çš„æ—¶é—´ç‰‡ï¼Œå†é€šè¿‡è°ƒåº¦å™¨è½®æµåˆ†é…ç»™å„ä¸ªä»»åŠ¡ä½¿ç”¨<br>2ã€cpuçš„ç»´æŠ¤ï¼Œé€šè¿‡å®å…ˆå®šä¹‰çš„èŠ‚æ‹ç‡(å†…æ ¸ç”¨èµ«å…¹HZæ ‡ç¤º)è§¦å‘æ—¶é—´åˆ¤æ–­(å…¨å±€å˜é‡jiffiesè®°å½•)ã€‚<br>3ã€èŠ‚æ‹ç‡æ˜¯å†…æ ¸æ€è¿è¡Œï¼Œå±äºå†…æ ¸ç©ºé—´èŠ‚æ‹ç‡ï¼›ç”¨æˆ·ç©ºé—´èŠ‚æ‹ç‡( USER_HZ)æ˜¯ä¸€ä¸ªå›ºå®šè®¾ç½®<br>[root@dbayang ~]# grep &#39;CONFIG_HZ=&#39; &#47;boot&#47;config-$(uname -r)<br>CONFIG_HZ=1000<br>4ã€&#47;proc&#47;stat æä¾›çš„å°±æ˜¯ç³»ç»Ÿçš„ CPU å’Œä»»åŠ¡ç»Ÿè®¡ä¿¡æ¯ï¼› &#47;proc&#47;[pid]&#47;statå±•ç¤ºè¿›ç¨‹çš„CPUå’Œä»»åŠ¡ç»Ÿè®¡ä¿¡æ¯<br>5ã€cpuçš„ä½¿ç”¨ç‡={1-(idle_time&#47;total_cpu_time)}&#47;sample_time<br>6ã€æ€§èƒ½åˆ†æå·¥å…·ç»™å‡ºçš„éƒ½æ˜¯é—´éš”ä¸€æ®µæ—¶é—´çš„å¹³å‡ CPU ä½¿ç”¨ç‡ï¼Œæ‰€ä»¥è¦æ³¨æ„é—´éš”æ—¶é—´çš„è®¾ç½®ã€‚topé»˜è®¤ä¸º3sï¼Œpsä½¿ç”¨çš„æ˜¯è¿›ç¨‹è¿è¡Œæ—¶é—´ã€‚<br>7ã€topã€vmstatã€mpstatç­‰å‘½ä»¤ç§å…³äºcpuæ€§èƒ½ç›¸å…³æŒ‡æ ‡çš„å«ä¹‰<br>8ã€pidstatå‘½ä»¤å«ä¹‰<br>9ã€perf<br>       ä»¥å‰ç”¨åˆ°çš„ä¸€å †[n]traceåˆ†æå·¥å…·ï¼Œperfçš„ç›´è§‚æ˜“ç”¨ï¼Œè¿™æ˜¯ä»Šå¤©æœ€å¤§çš„æ”¶è·ï¼Œä½œä¸ºdbaå¯¹æ•°æ®åº“çš„åˆ†æä¹Ÿå¾ˆæœ‰çš„ï¼Œä¹ˆä¹ˆå“’ã€‚<br>perf topã€perf recordã€perf report<br>å¯¹è¿›ç¨‹è¿›è¡Œè·Ÿè¸ªåˆ†æå…¶è°ƒç”¨perf top -g -p &lt;mysqlpid&gt;<br>10ã€ä»Šå¤©ç”¨åˆ°æµ‹è¯•å·¥å…·ï¼šab","like_count":90,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430890,"discussion_content":"ğŸ‘ è¯¾ä»£è¡¨çš„æ€»ç»“å¾ˆå…¨é¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543589020,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":45218,"user_name":"zeroxus","can_delete":false,"product_type":"c1","uid":1058002,"ip_address":"","ucode":"9DBB3A81F01792","user_header":"https://static001.geekbang.org/account/avatar/00/10/24/d2/40353046.jpg","comment_is_top":false,"comment_ctime":1543561632,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"254946632096","product_id":100020901,"comment_content":"ã€D5ã€‘æ‰“å¡<br>å¹²è´§æ»¡æ»¡<br>ä½¿ç”¨Markdownæ•´ç†æˆäº†ç¬”è®°ï¼Œ é…åˆç›®å½•æŸ¥å›é¡¾ï¼Œä¼šæ–¹ä¾¿å¾ˆå¤š<br>https:&#47;&#47;www.zybuluo.com&#47;Gugoole&#47;note&#47;1354842","like_count":59},{"had_liked":false,"id":45138,"user_name":"ä¸çº¯æœ‰æœºç‰©","can_delete":false,"product_type":"c1","uid":1135358,"ip_address":"","ucode":"430C0C2873B591","user_header":"https://static001.geekbang.org/account/avatar/00/11/52/fe/df362d52.jpg","comment_is_top":false,"comment_ctime":1543549448,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"156162372104","product_id":100020901,"comment_content":"è€å¸ˆï¼Œæˆ‘çš„ä¹Ÿæ˜¯æ— æ³•å®šä½åˆ°å…·ä½“çš„å‡½æ•°ï¼Œéƒ½æ˜¯16è¿›åˆ¶æ˜¾ç¤ºçš„","like_count":37,"discussions":[{"author":{"id":2066801,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/W0VEO7Hxzd61mia6Ls2EpBmaZ0l9q7SFUAErbu4XKIjWLmlALr4ybpicDoI8SoXY8XJNKmk04Ep1ibTCuFvfCF8GQ/132","nickname":"Chen","note":"","ucode":"5D0F3DF807706E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":324656,"discussion_content":"åŒæƒ…å†µï¼Œè¯·é—®åŒå­¦æœ‰è§£å†³æ–¹æ³•äº†å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605148995,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1226968,"avatar":"https://static001.geekbang.org/account/avatar/00/12/b8/d8/f81b5604.jpg","nickname":"hcyycb","note":"","ucode":"77FF6CA41F9E66","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":2066801,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/W0VEO7Hxzd61mia6Ls2EpBmaZ0l9q7SFUAErbu4XKIjWLmlALr4ybpicDoI8SoXY8XJNKmk04Ep1ibTCuFvfCF8GQ/132","nickname":"Chen","note":"","ucode":"5D0F3DF807706E","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375081,"discussion_content":"CentOS 8 çš„è™šæ‹Ÿæœºåšè¿™ä¸ªå®éªŒï¼Œç”¨ record ä¹‹åçš„æ•°æ® reportï¼Œå¯ä»¥å®šä½åˆ°å‡½æ•°åäº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621476716,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":324656,"ip_address":""},"score":375081,"extra":""}]}]},{"had_liked":false,"id":45654,"user_name":"æ¨Šæµ·æ¶›","can_delete":false,"product_type":"c1","uid":1323249,"ip_address":"","ucode":"0B04D5985EE0E1","user_header":"https://static001.geekbang.org/account/avatar/00/14/30/f1/bf7fd8d2.jpg","comment_is_top":false,"comment_ctime":1543738685,"is_pvip":false,"replies":[{"id":"16316","content":"åªçœ‹åˆ°åœ°å€è€Œä¸æ˜¯å‡½æ•°åæ˜¯ç”±äºåº”ç”¨ç¨‹åºè¿è¡Œåœ¨å®¹å™¨ä¸­ï¼Œå®ƒçš„ä¾èµ–ä¹Ÿéƒ½åœ¨å®¹å™¨å†…éƒ¨ï¼Œæ•…è€Œperfæ— æ³•æ‰¾åˆ°PHPç¬¦å·è¡¨ã€‚ä¸€ä¸ªç®€å•çš„è§£å†³æ–¹æ³•æ˜¯ä½¿ç”¨perf recordç”Ÿæˆperf.dataæ‹·è´åˆ°å®¹å™¨å†…éƒ¨ perf reportã€‚","user_name":"ä½œè€…å›å¤","comment_id":45654,"uid":"1001282","ip_address":"","utype":1,"ctime":1543797209,"user_name_real":"å€ªæœ‹é£"}],"discussion_count":4,"race_medal":0,"score":"104622953789","product_id":100020901,"comment_content":"æ‰§è¡Œperf top -g -p  ï¼ˆphp-fpmè¿›ç¨‹å·ï¼‰ï¼Œå‘ç°ä¸äº†sqrtå‡½æ•°<br>","like_count":24,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431138,"discussion_content":"åªçœ‹åˆ°åœ°å€è€Œä¸æ˜¯å‡½æ•°åæ˜¯ç”±äºåº”ç”¨ç¨‹åºè¿è¡Œåœ¨å®¹å™¨ä¸­ï¼Œå®ƒçš„ä¾èµ–ä¹Ÿéƒ½åœ¨å®¹å™¨å†…éƒ¨ï¼Œæ•…è€Œperfæ— æ³•æ‰¾åˆ°PHPç¬¦å·è¡¨ã€‚ä¸€ä¸ªç®€å•çš„è§£å†³æ–¹æ³•æ˜¯ä½¿ç”¨perf recordç”Ÿæˆperf.dataæ‹·è´åˆ°å®¹å™¨å†…éƒ¨ perf reportã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543797209,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1606177,"avatar":"","nickname":"ç¨‹åºå‘˜è€ä¸‡","note":"","ucode":"061269EFE23EC4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2911,"discussion_content":"è€å¸ˆï¼Œæˆ‘æŠŠperf.dataæ‹·è´åˆ°å®¹å™¨ï¼Œç„¶åperf report,ç»“æœè¿˜æ˜¯å‘ç°ä¸äº†sqrtå‡½æ•°","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1564033900,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1237500,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI3jSpV7VvK6NaUH6X1LNYWGsQdFSTu4SwTZ0nQlSYGTOY2FrDCcMic9qFXnu2ZGR88hBlUQK28Whg/132","nickname":"å¤æœˆå¼“è™½1993","note":"","ucode":"86122CC701F02A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1606177,"avatar":"","nickname":"ç¨‹åºå‘˜è€ä¸‡","note":"","ucode":"061269EFE23EC4","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":408960,"discussion_content":"æˆ‘ä¹Ÿæ˜¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635346609,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":2911,"ip_address":""},"score":408960,"extra":""}]},{"author":{"id":1405256,"avatar":"https://static001.geekbang.org/account/avatar/00/15/71/48/44df7f4e.jpg","nickname":"å‡¯","note":"","ucode":"60DB11CF72C7B0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":305207,"discussion_content":"perf record  -g  ç”Ÿæˆperf.data","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599817427,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":44948,"user_name":"æ¯å¤©æ™’ç™½ç‰™","can_delete":false,"product_type":"c1","uid":1004698,"ip_address":"","ucode":"A1B102CD933DEA","user_header":"https://static001.geekbang.org/account/avatar/00/0f/54/9a/76c0af70.jpg","comment_is_top":false,"comment_ctime":1543533621,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"100327781429","product_id":100020901,"comment_content":"ã€day5ã€‘æ‰“å¡<br>æ—©æ™¨å…­ç‚¹åŠèµ·æ¥è·Ÿç€ä¸“æ åœ¨è™šæ‹Ÿæœºä¸Šæï¼Œè¿™ä¸ªæ¡ˆä¾‹èƒ½å®Œæ•´è·Ÿä¸‹æ¥ä¹Ÿæ˜¯ä¸å®¹æ˜“ï¼Œè¿˜éœ€è¦dockerï¼Œä¸ªäººè®¤ä¸ºï¼Œè¿™ç§å®æˆ˜çš„è¯¾ï¼Œä¸€å®šè¦ä¸Šæ‰‹ï¼Œå…‰çœ‹æ˜¯ä¸è¡Œçš„ã€‚æ„¿è‡ªå·±èƒ½åšæŒä¸‹å»ã€‚","like_count":23},{"had_liked":false,"id":45447,"user_name":"dexter","can_delete":false,"product_type":"c1","uid":1315252,"ip_address":"","ucode":"DD51207438FBD6","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEL5xnfuicbtRz4F87AAjZX6oCEjMtYiaIu4iaQichQmy0vEBA6Sumic1RDvUCeuBEqj6iatnt2kENbKYmuw/132","comment_is_top":false,"comment_ctime":1543644501,"is_pvip":false,"replies":[{"id":"16436","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","comment_id":45447,"uid":"1001282","ip_address":"","utype":1,"ctime":1543832538,"user_name_real":"å€ªæœ‹é£"}],"discussion_count":2,"race_medal":0,"score":"87442990421","product_id":100020901,"comment_content":"æ¯å¤©ä¸Šç­åœ°é“å¬ä¸€éï¼Œä¸‹ç­åœ°é“å¬ä¸€éï¼Œæ™šä¸Šåšå®éªŒ","like_count":20,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431042,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543832538,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1000439,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/43/f7/abb7bfe3.jpg","nickname":"åˆ˜å†²","note":"","ucode":"0C4F66921AE76C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":28631,"discussion_content":"ä¿ºä¹Ÿä¸€æ ·","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1570706977,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":45609,"user_name":"éƒ­æ±Ÿä¼Ÿ","can_delete":false,"product_type":"c1","uid":1313994,"ip_address":"","ucode":"613D638619B5A2","user_header":"https://static001.geekbang.org/account/avatar/00/14/0c/ca/6173350b.jpg","comment_is_top":false,"comment_ctime":1543721688,"is_pvip":false,"replies":[{"id":"16324","content":"å¾ˆè¯¦ç»†çš„åˆ†ææ­¥éª¤ï¼Œæ„Ÿè°¢åˆ†äº«ğŸ‘","user_name":"ä½œè€…å›å¤","comment_id":45609,"uid":"1001282","ip_address":"","utype":1,"ctime":1543797546,"user_name_real":"å€ªæœ‹é£"}],"discussion_count":2,"race_medal":0,"score":"61673263832","product_id":100020901,"comment_content":"ç”¨sysbenchæµ‹è¯•cpuæ€§èƒ½ï¼Œç„¶ååˆ©ç”¨perf æ‰¾åˆ°å…·ä½“å“ªä¸ªè¿›ç¨‹çš„å“ªä¸ªå‡½æ•°åœ¨æ¶ˆè€—CPU<br>gjw@gjw:&#47;etc&#47;apt$ sysbench --threads=1 --time=600 cpu run<br>sysbench 1.1.0 (using bundled LuaJIT 2.1.0-beta3)<br>Running the test with following options:<br>Number of threads: 1<br>Initializing random number generator from current time<br>Prime numbers limit: 10000<br>Initializing worker threads...<br>Threads started!<br>æŸ¥çœ‹sysbenchè¿›ç¨‹<br>ps -egjw@gjw:~$ ps -ef | grep sysbench<br>gjw      31921  1294 77 11:20 pts&#47;0    00:04:39 sysbench --threads=1 --time=600 cpu run<br>perf topè·å–è¿›ç¨‹ä¿¡æ¯ï¼š<br>sudo perf top -g -p 31921<br>Samples: 824  of event &#39;cycles:ppp&#39;, Event count (approx.): 618842235                                                                                                         <br>  Children      Self  Shared Object  Symbol                                                                                                                                   <br>+  100.00%   100.00%  sysbench       [.] cpu_execute_event<br>ç„¶ååœ¨sysbenchæºç ä¸­æŸ¥çœ‹cpu_execute_event å‡½æ•°ï¼š<br>gjw@gjw:~&#47;soft&#47;sysbench-master$ grep -r cpu_execute_event<br>Binary file src&#47;tests&#47;cpu&#47;libsbcpu.a matches<br>Binary file src&#47;tests&#47;cpu&#47;libsbcpu_a-sb_cpu.o matches<br>src&#47;tests&#47;cpu&#47;sb_cpu.c:static int cpu_execute_event(sb_event_t *, int);<br>src&#47;tests&#47;cpu&#47;sb_cpu.c:    .execute_event = cpu_execute_event,<br>src&#47;tests&#47;cpu&#47;sb_cpu.c:int cpu_execute_event(sb_event_t *r, int thread_id)<br>Binary file src&#47;sysbench matches<br>gjw@gjw:~&#47;soft&#47;sysbench-master$ vi src&#47;tests&#47;cpu&#47;sb_cpu.c <br> int cpu_execute_event(sb_event_t *r, int thread_id)<br>{<br>  unsigned long long c;<br>  unsigned long long l;<br>  double t;<br>  unsigned long long n=0;<br>  (void)thread_id; &#47;* unused *&#47;<br>  (void)r; &#47;* unused *&#47;<br>  &#47;* So far we&#39;re using very simple test prime number tests in 64bit *&#47;<br>  for(c=3; c &lt; max_prime; c++)<br>  {<br>    t = sqrt((double)c);<br>    for(l = 2; l &lt;= t; l++)<br>      if (c % l == 0)<br>        break;<br>    if (l &gt; t )<br>      n++;<br>  }<br>  return 0;<br>å¯ä»¥çœ‹åˆ°è¯¥å‡½æ•°åœ¨è®¡ç®—ç´ æ•°ï¼Œç”±æ­¤å®Œæˆäº†ä¸€ä¸ªcpuä½¿ç”¨ç‡å¾ˆé«˜çš„æ¡ˆä¾‹åˆ†æ","like_count":14,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431120,"discussion_content":"å¾ˆè¯¦ç»†çš„åˆ†ææ­¥éª¤ï¼Œæ„Ÿè°¢åˆ†äº«ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543797546,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1026608,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/30/acc91f01.jpg","nickname":"honnkyou","note":"","ucode":"FD5EC4120EE803","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":306445,"discussion_content":"perf top æ—¶sysbench çš„Symbol file è¦æ€ä¹ˆæŒ‡å®šçš„ï¼Ÿ\nsymbol file è¦æå‰å‡†å¤‡å¥½å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600269669,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":45363,"user_name":"ichen","can_delete":false,"product_type":"c1","uid":1156973,"ip_address":"","ucode":"2A931EBE9098D0","user_header":"https://static001.geekbang.org/account/avatar/00/11/a7/6d/19bff1f9.jpg","comment_is_top":false,"comment_ctime":1543612919,"is_pvip":false,"replies":[{"id":"16341","content":"æ„Ÿè°¢åˆ†äº«","user_name":"ä½œè€…å›å¤","comment_id":45363,"uid":"1001282","ip_address":"","utype":1,"ctime":1543799042,"user_name_real":"å€ªæœ‹é£"}],"discussion_count":2,"race_medal":0,"score":"61673155063","product_id":100020901,"comment_content":"å†…æ ¸å¦‚æœæ²¡æœ‰perf packageçš„è¯ï¼Œå¯ä»¥ä»gitä¸‹è½½æºç å®‰è£…<br>https:&#47;&#47;askubuntu.com&#47;questions&#47;50145&#47;how-to-install-perf-monitoring-tool&#47;306683<br><br>git clone https:&#47;&#47;git.kernel.org&#47;pub&#47;scm&#47;linux&#47;kernel&#47;git&#47;torvalds&#47;linux.git ï¼ˆå¤§çº¦2.5G å·¦å³ï¼‰<br>cd linux&#47;tools&#47;perf<br>make ï¼ˆå¯èƒ½ç¼ºflexï¼Œbisonç­‰ï¼Œéœ€è‡ªè¡Œå®‰è£…ï¼‰<br>cp perf &#47;usr&#47;bin<br>perf --version ","like_count":14,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430999,"discussion_content":"æ„Ÿè°¢åˆ†äº«","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543799042,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1101611,"avatar":"","nickname":"åº„ç”Ÿ â€¢ æ™“æ¢¦ â€¢ è´è¶","note":"","ucode":"9281045A5B3F5D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":536361,"discussion_content":"cloneçš„æ—¶å€™åŠ ä¸Š--depth=1ï¼Œæ²¡æœ‰commitsä¿¡æ¯ä¹‹åï¼Œcloneçš„æ•°æ®é‡å¤§å°200M\n\n","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1638768989,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":45012,"user_name":"espzest","can_delete":false,"product_type":"c1","uid":1094470,"ip_address":"","ucode":"64B1A7DEA19348","user_header":"https://static001.geekbang.org/account/avatar/00/10/b3/46/ec914238.jpg","comment_is_top":false,"comment_ctime":1543539405,"is_pvip":false,"discussion_count":4,"race_medal":0,"score":"57378114253","product_id":100020901,"comment_content":"iowaitæ‰€è€—è´¹çš„æ—¶é—´ï¼Œåº”è¯¥ä¸ç®—åˆ°cpuä½¿ç”¨ç‡é‡Œé¢å§ï¼Ÿ  å¦‚æœæ˜¯è¿™æ ·çš„è¯ï¼Œä¸Šé¢è®¡ç®—cpuä½¿ç”¨ç‡ é™¤å»idleä»¥å¤–çš„æ—¶é—´éƒ½ç®—ï¼Œæ˜¯ä¸æ˜¯æœ‰é—®é¢˜ï¼Ÿ","like_count":13,"discussions":[{"author":{"id":2608728,"avatar":"https://static001.geekbang.org/account/avatar/00/27/ce/58/71ed845f.jpg","nickname":"Dexter","note":"","ucode":"909CABC4AC4AC9","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":578825,"discussion_content":"iowaitå¯¹äºå•ä¸ªè¿›ç¨‹æ¥è¯´ï¼Œåº”è¯¥ä¸ç®—åœ¨CPUä½¿ç”¨ç‡é‡Œé¢å•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657030717,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2066801,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/W0VEO7Hxzd61mia6Ls2EpBmaZ0l9q7SFUAErbu4XKIjWLmlALr4ybpicDoI8SoXY8XJNKmk04Ep1ibTCuFvfCF8GQ/132","nickname":"Chen","note":"","ucode":"5D0F3DF807706E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":324655,"discussion_content":"æ²¡é—®é¢˜å‘€ï¼Œidleä¸åŒ…æ‹¬iowaitï¼Œæ‰€ä»¥ä¸Šé¢è®¡ç®—cpuä½¿ç”¨ç‡ é™¤å»idleä»¥å¤–çš„æ—¶é—´éƒ½ç®—æ˜¯æ²¡é—®é¢˜çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605148912,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1582813,"avatar":"https://static001.geekbang.org/account/avatar/00/18/26/dd/d58156b1.jpg","nickname":"ä¸€ç²’","note":"","ucode":"FB5F583CC6AE3C","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":315606,"discussion_content":"è¦ç®—åˆ°CPUä½¿ç”¨ç‡é‡Œçš„ï¼Œå› ä¸ºiowaitæ—¶CPUæ— æ³•è¢«å…¶ä»–è¿›ç¨‹ä½¿ç”¨çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603293129,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1244665,"avatar":"https://static001.geekbang.org/account/avatar/00/12/fd/f9/61bdb3f8.jpg","nickname":"æœªæ¥å°é¬¼","note":"","ucode":"A0ED87F78E6319","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1582813,"avatar":"https://static001.geekbang.org/account/avatar/00/18/26/dd/d58156b1.jpg","nickname":"ä¸€ç²’","note":"","ucode":"FB5F583CC6AE3C","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":585603,"discussion_content":"ä¸æ˜¯å§ï¼Œå“ªæ€•æ˜¯DçŠ¶æ€ï¼ŒCpuä¹Ÿæ˜¯å¯ä»¥è¢«è®©å‡ºæ¥çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661699950,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":315606,"ip_address":"æ±Ÿè‹"},"score":585603,"extra":""}]}]},{"had_liked":false,"id":236923,"user_name":"Jianwen Ji","can_delete":false,"product_type":"c1","uid":1027028,"ip_address":"","ucode":"20A8AC1AA8A8E9","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erHaczgBsEF7zqCj8Hlq2vtYh0M6Jj3pia66ZW0O4fFvNldbkHYX6d8B0fBHwicxAcMMRmcNzPrJLMA/132","comment_is_top":false,"comment_ctime":1595586491,"is_pvip":false,"discussion_count":5,"race_medal":0,"score":"53135194043","product_id":100020901,"comment_content":"å¦‚æœè™šæ‹Ÿæœºçš„ç³»ç»Ÿæ˜¯CentOSæˆ–RHEL, å¯èƒ½ä¼šæœ‰perf top -g -p pidæ²¡æœ‰çœ‹åˆ°å‡½æ•°åï¼Œåªèƒ½çœ‹åˆ°ä¸€å †16è¿›åˆ¶çš„é—®é¢˜ï¼Œè¿˜æœ‰ä¸€ç§workaroundã€‚åœ¨ docker run  feisky&#47;php-fpmçš„æ—¶å€™åŠ ä¸Š----privilegedï¼Œåœ¨php-fpmå†…éƒ¨ä½¿ç”¨perf topã€‚<br>å¤§ä½“æ­¥éª¤å¦‚ä¸‹ï¼š<br>1. docker run --privileged --name phpfpm -itd --network container:nginx feisky&#47;php-fpm<br>2.  docker exec -i -t phpfpm bash<br>     apt-get update &amp;&amp; apt-get install -y linux-perf linux-tools procps<br>3. topæŸ¥çœ‹cpuä½¿ç”¨ç‡é«˜çš„è¿›ç¨‹<br>4. perf_4.9 top -g -p &lt;pid&gt;<br>    ä½¿ç”¨è¿™ä¸ªå®¹å™¨å†…æœ€æ–°å®‰è£…çš„perf_4.9","like_count":12,"discussions":[{"author":{"id":1069269,"avatar":"https://static001.geekbang.org/account/avatar/00/10/50/d5/73334a95.jpg","nickname":"doos","note":"","ucode":"7C9AF67F90E65C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":578798,"discussion_content":"docker run --privileged --name phpfpm -itd --network container:nginx feisky/php-fpm restart=&#34;always&#34; /usr/sbin/init è¿™æ ·æ›´å…¨é¢è¿›å»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657021038,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2441324,"avatar":"https://static001.geekbang.org/account/avatar/00/25/40/6c/4c0060ab.jpg","nickname":"ä½ çŒœå¶ç³»è°","note":"","ucode":"86E204DDA35F41","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":563923,"discussion_content":"nbå…„å¼Ÿï¼ŒçœŸæ˜¯å¤ªæ„Ÿè°¢äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650112633,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2088083,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/dc/93/bdbc45cc.jpg","nickname":"LUO FAN","note":"","ucode":"538E81E6FC4015","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":363526,"discussion_content":"å‘ç°ç›´æ¥è¿è¡Œperfæ˜¯ä¸è¡Œçš„ï¼Œå¿…é¡»æŒ‡å®šç‰ˆæœ¬ï¼Œç›´æ¥è¿è¡Œperfä¼šæœ‰ä¸€ä¸ªæ£€æŸ¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617206188,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2411665,"avatar":"","nickname":"Geek_ea821e","note":"","ucode":"9C70C74393A184","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":357444,"discussion_content":"å¤ªæ„Ÿè°¢äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615806633,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1565396,"avatar":"https://static001.geekbang.org/account/avatar/00/17/e2/d4/ef86ea64.jpg","nickname":"Front","note":"","ucode":"35593EA52F2EA6","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":337865,"discussion_content":"åªæœ‰è¿™ä¸ªåŠæ³•æœ‰æ•ˆäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609109808,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":44936,"user_name":"é£æ¸…æ‰¬ç¬‘","can_delete":false,"product_type":"c1","uid":1028152,"ip_address":"","ucode":"C0494B7A97A628","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b0/38/076fa6c1.jpg","comment_is_top":false,"comment_ctime":1543511967,"is_pvip":false,"replies":[{"id":"16004","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","comment_id":44936,"uid":"1001282","ip_address":"","utype":1,"ctime":1543537338,"user_name_real":"å€ªæœ‹é£"}],"discussion_count":3,"race_medal":0,"score":"53083119519","product_id":100020901,"comment_content":"cpuä½¿ç”¨ç‡ï¼Œå°±æ˜¯cpuè¢«ä½¿ç”¨çš„æ¯”ä¾‹ï¼Œä¹Ÿå°±æ˜¯ç©ºé—²ä¹‹å¤–çš„ä½¿ç”¨æ¯”ä¾‹ã€‚<br><br>å¯¹æˆ‘æ¥è¯´ï¼Œå‘ç°cpuä½¿ç”¨ç‡é«˜åï¼Œå…ˆè·Ÿè€å¸ˆä¸€æ ·ç”¨perfæ¥æŠ“å–cpuæ¶ˆè€—æ ˆï¼Œå¾ˆå®¹æ˜“å‘ç°ç“¶é¢ˆã€‚<br><br>å¦å¤–ï¼Œæˆ‘ä¸€èˆ¬ç”¨mpstat -P ALL æ¥çœ‹å„ä¸ªcpuæ ¸å¿ƒçš„ä½¿ç”¨ç‡æƒ…å†µï¼Œå› ä¸ºtopä¹‹ç±»çš„çœ‹çš„æ˜¯ç³»ç»Ÿæ€»ä½¿ç”¨ç‡ï¼Œä¸ä¸€å®šèƒ½å‘ç°é—®é¢˜ï¼Œç‰¹åˆ«æ˜¯å¤šè¿›ç¨‹æˆ–è€…å¤šçº¿ç¨‹åº”ç”¨","like_count":13,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430865,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543537338,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1980201,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/37/29/b3af57a7.jpg","nickname":"å‡¯æ–‡å°çŒª","note":"","ucode":"36D8AD0229547F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":386938,"discussion_content":"æˆ‘é€šå¸¸æ˜¯é€šè¿‡top -c å†æŒ‰ä¸‹1çœ‹å„åˆ†ç‰‡CPU å’Œæ¥¼ä¸Šæ®Šé€”åŒå½’","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1627899733,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1523938,"avatar":"https://static001.geekbang.org/account/avatar/00/17/40/e2/c464a6f7.jpg","nickname":"å­™å¥•æ„","note":"","ucode":"A591F865950397","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":336084,"discussion_content":"ç”¨mpstat -P ALL æ¥çœ‹å„ä¸ªcpuæ ¸å¿ƒçš„ä½¿ç”¨ç‡æƒ…å†µåï¼Œç„¶åè¦æ€ä¹ˆå®šä½åˆ°å…·ä½“çš„å‡½æ•°å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608474237,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":49768,"user_name":"é¹","can_delete":false,"product_type":"c1","uid":1009228,"ip_address":"","ucode":"243E408E2094E1","user_header":"https://static001.geekbang.org/account/avatar/00/0f/66/4c/39a6829c.jpg","comment_is_top":false,"comment_ctime":1544767097,"is_pvip":false,"replies":[{"id":"17958","content":"è°¢è°¢åˆ†äº«ï¼ŒJavaä¸“å®¶å‘€ğŸ˜Š","user_name":"ä½œè€…å›å¤","comment_id":49768,"uid":"1001282","ip_address":"","utype":1,"ctime":1544781587,"user_name_real":"å€ªæœ‹é£"}],"discussion_count":3,"race_medal":0,"score":"44494440057","product_id":100020901,"comment_content":"å¤„ç†CPUé«˜çš„æµç¨‹å¦‚ä¸‹ï¼ˆå¤§æ•°æ®ï¼ŒåŸºæœ¬éƒ½æ˜¯jvmï¼‰ï¼š<br>       é€šè¿‡topæŸ¥çœ‹cpuä½¿ç”¨ç‡æ¯”è¾ƒé«˜çš„è¿›ç¨‹ pid<br>       top -H $pid é€ æˆcpuä½¿ç”¨ç‡çš„çº¿ç¨‹  tid (topç¬¬ä¸€åˆ—ï¼Œåˆ—æ˜è¿˜æ˜¯PID)<br>       printf 0x%x $tid  è·å¾—16è¿›åˆ¶çš„tid<br>       jstack $pid æŸ¥æ‰¾ nid=16è¿›åˆ¶tidï¼Œç›¸åº”çº¿ç¨‹çš„å°±æ‰¾åˆ°äº†<br><br>PSï¼šç°åœ¨å¤§å¤šæ˜¯docker ç¯å¢ƒï¼Œåœ¨å®¿ä¸»æœºæ— æ³•ç›´æ¥é€šè¿‡jstackè·å–åˆ°å®¹å™¨å†…çš„jvm çº¿ç¨‹ä¿¡æ¯ï¼Œå¯ä»¥è¿›å…¥å®¹å™¨å†jstack æˆ–è€…åœ¨å®¿ä¸»æœºä¸Šä½¿ç”¨jdk 10ï¼›å®¹å™¨å†…æ— æ³•ä½¿ç”¨jtack ä¹‹ç±»å‘½ä»¤ï¼Œé‚£ä¹ˆéœ€è¦æ·»åŠ å®¹å™¨å‚æ•° privileged<br>       ","like_count":10,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432766,"discussion_content":"è°¢è°¢åˆ†äº«ï¼ŒJavaä¸“å®¶å‘€ğŸ˜Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544781587,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2781511,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/71/47/41fa5ef9.jpg","nickname":"å®‰å†›","note":"","ucode":"D122671354A2F8","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":591566,"discussion_content":"æ¯ä¸ªå‘½ä»¤éƒ½æ²¡æ³•æ‰§è¡Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1666664503,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æµ™æ±Ÿ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1111985,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f7/b1/982ea185.jpg","nickname":"Frank","note":"","ucode":"9DADD72C193296","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":335549,"discussion_content":"æ„Ÿè°¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608217391,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":177688,"user_name":"Aaron niu","can_delete":false,"product_type":"c1","uid":1315335,"ip_address":"","ucode":"8CB10D7494DDAC","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epujZ0vpjYD4KiaCI400YdfFenDotavczNpxzQ1AZdEichAhdEXWOyoGIksnG5meRibRTwTEibdmcPo1Q/132","comment_is_top":false,"comment_ctime":1581474259,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"40236179923","product_id":100020901,"comment_content":"è¿›ç¨‹åœ¨å®¹å™¨ä¸­çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥æŠŠå®¹å™¨ç›®å½•æŒ‚è½½åˆ°å®¿ä¸»æœº<br><br># æŠŠä¸‹é¢çš„&lt;container-name&gt;æ”¹æˆä½ è¦è§‚å¯Ÿçš„å®¹å™¨åã€‚<br> <br>mkdir &#47;tmp&#47;foo<br>PID=$(docker inspect --format {{.State.Pid}} &lt;container-name&gt;)<br>bindfs &#47;proc&#47;$PID&#47;root &#47;tmp&#47;foo<br>perf report --symfs &#47;tmp&#47;foo<br> <br># ä½¿ç”¨å®Œæˆåä¸è¦å¿˜è®°è§£é™¤ç»‘å®š<br>umount &#47;tmp&#47;foo&#47;","like_count":9,"discussions":[{"author":{"id":1069269,"avatar":"https://static001.geekbang.org/account/avatar/00/10/50/d5/73334a95.jpg","nickname":"doos","note":"","ucode":"7C9AF67F90E65C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":578802,"discussion_content":"ç‰›é€¼å‹å¤§ä½¬","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657022843,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2432668,"avatar":"https://static001.geekbang.org/account/avatar/00/25/1e/9c/2336bcf2.jpg","nickname":"ä½ çš„ç›Šè¾¾","note":"","ucode":"7E3491E4E0909F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":383000,"discussion_content":"è¿™ä¸ª å¥½ç”¨å•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625819104,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":57617,"user_name":"çŒªå“¥å“¥","can_delete":false,"product_type":"c1","uid":1311362,"ip_address":"","ucode":"ACBB4556516D34","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLkhgYnYZBdhdwKnXQibey04cy9N9ria3DadH7iagoKukaWK1FJwjfCoh0He4p7b2icSYVzHH71l8ZXiaQ/132","comment_is_top":false,"comment_ctime":1546851935,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"31611623007","product_id":100020901,"comment_content":"è€å¸ˆä½ å¥½ æˆ‘å†™äº†ä¸€ä¸ªpythonæ­»å¾ªç¯ ä»£ç å¦‚ä¸‹ <br>def wangfang():<br>  while True:<br>    i =1<br>wangfang()<br>ä½¿ç”¨perf topå‘½ä»¤ æ— æ³•æŠ“å–åˆ°è¯¥å¾ªç¯çš„å‡½æ•°, è€å¸ˆèƒ½è§£é‡Šä¸€ä¸‹å—","like_count":7,"discussions":[{"author":{"id":1121758,"avatar":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","nickname":"aoe","note":"","ucode":"1C6201EDB4E954","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":311155,"discussion_content":"å› ä¸ºç¨‹åºå·²ç»æŒ‚äº†ï¼Œæ ˆæº¢å‡ºäº†","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1602238850,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1368319,"avatar":"","nickname":"æ­¦å¯»","note":"","ucode":"F40AB225139299","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1121758,"avatar":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","nickname":"aoe","note":"","ucode":"1C6201EDB4E954","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":335187,"discussion_content":"ä»–è¿™æ ¹æœ¬æ²¡æœ‰å‡½æ•°çš„é‡å¤å †æ ˆï¼Œä¸Šå“ªæº¢å‡ºï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1608112705,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":311155,"ip_address":""},"score":335187,"extra":""}]}]},{"had_liked":false,"id":45193,"user_name":"åŒ—æ–—ç‹¼","can_delete":false,"product_type":"c1","uid":1265801,"ip_address":"","ucode":"CC991CC004EB29","user_header":"https://static001.geekbang.org/account/avatar/00/13/50/89/a6259c76.jpg","comment_is_top":false,"comment_ctime":1543559300,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"27313363076","product_id":100020901,"comment_content":"è€å¸ˆï¼Œé—®ä¸ªé—®é¢˜ï¼Œæˆ‘æŒ‰æ‚¨çš„æ–‡æ¡£ï¼Œæˆ‘ä½¿ç”¨perf top -g -p è¿›ç¨‹ID æ€ä¹ˆæ— æ³•æŸ¥çœ‹php-fpmçš„è°ƒç”¨å…³ç³»ï¼Œå‡ºä¸æ¥å“ªä¸ªå‡½æ•°è¾ƒç”¨è¾ƒé«˜çš„CPUï¼Ÿ ä»¥ä¸‹æ˜¯æˆ‘çš„æ˜¾ç¤ºç»“æœï¼Œæ‚¨å¸®æˆ‘çœ‹çœ‹ä¸ºä»€ä¹ˆæ˜¾ç¤ºçš„æ˜¯0x7fd...<br>1ã€å¼€å§‹å‹åŠ›æµ‹è¯•<br>ab -c 10 -n 10000 http:&#47;&#47;bjdsj-test-11-58:10001<br><br>2ã€æŸ¥çœ‹è°ƒç”¨å…³ç³» perf top -g -p 39826<br>Samples: 80K of event &#39;cycles&#39;, Event count (approx.): 29700884257                                                       <br>+   93.02%     0.69%  php-fpm             [.] 0x00000000008c296e<br>   0x7fd84a21c96e                                                                                                          <br>   0x7fd84a21d323                                                                                                          <br>   0x7fd84a185f94                                                                                                          <br>   0x7fd84a0d66fc                                                                                                          <br>   0x7fd84a325642                                                                                                          <br>   0x7fd842a702e1                                                                                                          <br>   0x6cb6258d4c544155 <br>+   23.35%     0.38%  php-fpm             [.] 0x00000000008c4a7c<br>+    5.60%     5.60%  libm-2.24.so        [.] 0x000000000002127e<br>+    4.22%     0.00%  php-fpm             [.] 0x000000000098dd97<br>+    2.54%     2.54%  php-fpm             [.] 0x000000000094ede0<br>+    1.96%     1.96%  php-fpm             [.] 0x0000000000681b9d<br>+    1.58%     1.58%  php-fpm             [.] 0x0000000000815e70<br>+    1.52%     1.51%  php-fpm             [.] 0x000000000094eddc<br>+    1.48%     1.48%  php-fpm             [.] 0x00000000008cd729<br>+    1.32%     1.32%  php-fpm             [.] 0x00000000008c4ae5<br>+    1.21%     1.21%  php-fpm             [.] 0x000000000098dc03<br>+    1.04%     1.04%  php-fpm             [.] 0x0000000000681b99<br>Failed to open &#47;opt&#47;bitnami&#47;php&#47;lib&#47;php&#47;extensions&#47;opcache.so, continuing without symbols<br>","like_count":6,"discussions":[{"author":{"id":1069269,"avatar":"https://static001.geekbang.org/account/avatar/00/10/50/d5/73334a95.jpg","nickname":"doos","note":"","ucode":"7C9AF67F90E65C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":578803,"discussion_content":"ä¸æ˜¯å’Œä½ è¯´äº†å—ï¼Ÿéœ€è¦æŠŠç»“æœå¤åˆ¶åˆ°å®¹å™¨å†…éƒ¨å»æŸ¥çœ‹å‹\ndocker run --privileged --name phpfpm -itd --network container:nginx phpfpm restart=&#34;always&#34; /usr/sbin/init\nperf record -g -p 39826\ndocker cp perf.data phpfpm:/root\nyum install -y linux-perf linux-tools procps\nperf report\nè¿™æ ·å°±å¯ä»¥çœ‹åˆ°äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657023125,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2109846,"avatar":"https://static001.geekbang.org/account/avatar/00/20/31/96/deea4486.jpg","nickname":"è¦”äº–ç”´","note":"","ucode":"9D3BC4EDD2B773","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":545816,"discussion_content":" è€å¸ˆä¸ç®¡è¿™ä¸ªé—®é¢˜å—ï¼Ÿæ”¶äº†é’±ä¸ç®¡äº‹ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642058835,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":44996,"user_name":"åä¸‰","can_delete":false,"product_type":"c1","uid":1196791,"ip_address":"","ucode":"D3EFE8729DDE8A","user_header":"https://static001.geekbang.org/account/avatar/00/12/42/f7/9dce9a7b.jpg","comment_is_top":false,"comment_ctime":1543538654,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"27313342430","product_id":100020901,"comment_content":"ã€D6æ‰“å¡ã€<br>è¿˜æ²¡æœ‰æ“ä½œå®éªŒï¼Œçœ‹äº†å†…å®¹ï¼Œå…ˆå ä¸ªä½ç½®ã€‚","like_count":6},{"had_liked":false,"id":107861,"user_name":"å¤§å¤´","can_delete":false,"product_type":"c1","uid":1315367,"ip_address":"","ucode":"C1FB2C8A0FB0C0","user_header":"https://static001.geekbang.org/account/avatar/00/14/12/27/32746bbf.jpg","comment_is_top":false,"comment_ctime":1561625123,"is_pvip":true,"replies":[{"id":"39096","content":"è°¢è°¢åˆ†äº«ã€‚å…¶ä»–å‘è¡Œç‰ˆå®‰è£… Docker çš„æ­¥éª¤å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ https:&#47;&#47;docs.docker.com&#47;install&#47;","user_name":"ä½œè€…å›å¤","comment_id":107861,"uid":"1001282","ip_address":"","utype":1,"ctime":1561647613,"user_name_real":"å€ªæœ‹é£"}],"discussion_count":1,"race_medal":0,"score":"23036461603","product_id":100020901,"comment_content":"æ€»ç»“ä¸€ä¸‹dockerè¿è¡Œçš„æ­¥éª¤å§ï¼Œæˆ‘çš„æ˜¯Centosç³»ç»Ÿï¼š<br>1 å®‰è£…dockerï¼Œyum -y install docker-ioã€‚ç¡®ä¿ç³»ç»Ÿå†…æ ¸ä¸º3.10.0åŠä»¥ä¸Šã€‚ä½ç‰ˆæœ¬çš„éœ€è¦å‡çº§å†…æ ¸æˆ–è€…ä½¿ç”¨é«˜ç‰ˆæœ¬çš„CentOsç³»ç»Ÿ<br>2 å¯åŠ¨docker systemctl start docker.service<br>3 ä¸‹è½½è¯¾ä»¶ä¸Šæä¾›çš„æºç ï¼Œè¿›å…¥åˆ°æºç ç›®å½•ã€‚æ‰§è¡Œmake build   &amp;&amp; make run","like_count":5,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455712,"discussion_content":"è°¢è°¢åˆ†äº«ã€‚å…¶ä»–å‘è¡Œç‰ˆå®‰è£… Docker çš„æ­¥éª¤å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ https://docs.docker.com/install/","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561647613,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":65881,"user_name":"æ²™æ¼ é£æš´","can_delete":false,"product_type":"c1","uid":1284147,"ip_address":"","ucode":"9F5E421C82DAD6","user_header":"https://static001.geekbang.org/account/avatar/00/13/98/33/64e35e5a.jpg","comment_is_top":false,"comment_ctime":1549718267,"is_pvip":false,"replies":[{"id":"23687","content":"æŒ‰ç…§æ–‡ä¸­çš„æ­¥éª¤æ“ä½œå°±å¯ä»¥","user_name":"ä½œè€…å›å¤","comment_id":65881,"uid":"1001282","ip_address":"","utype":1,"ctime":1550065898,"user_name_real":"å€ªæœ‹é£"}],"discussion_count":3,"race_medal":0,"score":"23024554747","product_id":100020901,"comment_content":"è€å¸ˆï¼Œå¼±å¼±çš„è¯·æ•™ä¸‹æ€ä¹ˆç”¨dockerå®‰è£…æ‚¨é‚£ä¸ªnginxå’Œphpç¯å¢ƒå’Œç¨‹åºï¼Œæˆ‘ä»¥å‰æ²¡ç”¨è¿‡dockerï¼Œåˆšå­¦çš„ï¼Œè§è°…ã€‚","like_count":5,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438625,"discussion_content":"æŒ‰ç…§æ–‡ä¸­çš„æ­¥éª¤æ“ä½œå°±å¯ä»¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1550065898,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1865908,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/78/b4/af163d12.jpg","nickname":"é›¨å¤©çš„ä¸ƒæ¯«ç±³","note":"","ucode":"963BBAFE8EF97B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":302049,"discussion_content":"å¯ä»¥ç”¨ https://get.docker.com/ è¿™ä¸ªè„šæœ¬å¯ä»¥ä¸€é”®å®‰è£… docker ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598772388,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1334123,"avatar":"https://static001.geekbang.org/account/avatar/00/14/5b/6b/2ddbeab2.jpg","nickname":"allen","note":"","ucode":"67CD32ACB95013","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301597,"discussion_content":"æŒ‰ç…§æ­¥éª¤æ˜¯ä¸è¡Œçš„ æˆ‘çš„æ˜¯centos7æ ¹æœ¬å°±æŠ¥é”™","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598584659,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":45173,"user_name":"æˆ‘æ¥ä¹Ÿ","can_delete":false,"product_type":"c1","uid":1205253,"ip_address":"","ucode":"773D6104F56767","user_header":"https://static001.geekbang.org/account/avatar/00/12/64/05/6989dce6.jpg","comment_is_top":false,"comment_ctime":1543555663,"is_pvip":false,"replies":[{"id":"16087","content":"å¾ˆå¤šçº¿ä¸Šé—®é¢˜å…¶å®è·Ÿè¿™ä¸ªç±»ä¼¼ï¼Œç­‰åˆ°ä½ ç™»é™†æœåŠ¡å™¨çš„æ—¶å€™æ€§èƒ½é—®é¢˜å·²ç»ç»“æŸäº†ï¼Œè¿™æ ·åœ¨çº¿åˆ†æå°±çœ‹ä¸å‡ºå“ªé‡Œå¯¼è‡´çš„é—®é¢˜ï¼Œåªæœ‰ä»å¹³å‡è´Ÿè½½è¿™ç§ååº”å†å²çš„æŒ‡æ ‡çœ‹å‡ºä¸€äº›é—®é¢˜ã€‚<br><br>è¿™ç§æƒ…æ™¯ä¸‹ï¼Œå°±éœ€è¦ç›‘æ§ç³»ç»Ÿçš„é…åˆï¼Œè®°å½•ä¸‹å†å²çš„ç³»ç»Ÿå’Œè¿›ç¨‹çš„æ€§èƒ½æŒ‡æ ‡ã€‚å¹¶ä¸”ï¼Œè¿™ä¸ªcaseåªæœ‰load1é«˜ï¼Œæ‰€ä»¥ç›‘æ§çš„é—´éš”æ—¶é—´ä¹Ÿéœ€è¦æ¯”è¾ƒç²¾ç»†ã€‚","user_name":"ä½œè€…å›å¤","comment_id":45173,"uid":"1001282","ip_address":"","utype":1,"ctime":1543571185,"user_name_real":"å€ªæœ‹é£"}],"discussion_count":1,"race_medal":0,"score":"23018392143","product_id":100020901,"comment_content":"[D5æ‰“å¡]<br>ä»¥å‰åªä¼šç”¨topçœ‹CPUä½¿ç”¨ç‡ï¼Œå‘ç°å ç”¨é«˜çš„è¿›ç¨‹äº†å†é’ˆå¯¹æ€§çš„åˆ†æï¼Œæ¯”å¦‚cç¨‹åºå°±ç”¨profï¼Œå±€é™æ€§å¾ˆé«˜ï¼Œ<br>ä»Šå¤©äº†è§£åˆ°å¯ä»¥ç”¨perfï¼Œç›´æ¥çœ‹è¿›ç¨‹å†…å‡½æ•°è°ƒç”¨æ ˆå’Œå„å‡½æ•°çš„cpuä½¿ç”¨ç‡ã€‚<br>ä»¥å‰çœ‹åˆ°%sysè¿‡é«˜ï¼Œç³»ç»Ÿä¸­æ–­æ•°è¿‡é«˜çš„åˆ¤æ–­æ–¹æ³•æ›´æç¬‘ï¼ŒæŒ¨ä¸ªæ€å¯ç–‘è¿›ç¨‹ã€‚<br>ç°åœ¨ç›´æ¥ç”¨pidstatå°±æ˜¯äº†ã€‚<br>â€”â€”â€”â€”â€”â€”<br>æœ€è¿‘åœ¨æŸäº‘æœåŠ¡å™¨ä¸Šå°±é‡åˆ°äº†è¯¡å¼‚çš„äº‹æƒ…ï¼Œcpuç©ºé—²75%ï¼Œ%iowaitä¸åˆ°1ï¼Œç³»ç»Ÿä¸­æ–­æ•°ä¸€ç›´æ¯”è¾ƒç¨³å®šï¼Œvmstatä¸­çš„ræ­£åœ¨è¿è¡Œå’Œç­‰å¾…é˜Ÿåˆ—ä¹Ÿè¿˜æ­£å¸¸ï¼Œä½†æ˜¯ç³»ç»Ÿæ¯éš”1å°æ—¶23åˆ†ï¼Œè´Ÿè½½load1ï¼šå°±ä¼šä»å¹³å¸¸çš„0.2å‡é«˜åˆ°8ç”šè‡³æ˜¯12çš„æƒ…å†µã€‚å¥½åœ¨æ¯æ¬¡æŒç»­æ—¶é—´è¾ƒçŸ­ï¼Œçº¦2åˆ†é’Ÿï¼Œload5çš„å€¼è¿˜å¯ä»¥æ¥å—ã€‚<br>äº‰å–æœ€è¿‘èƒ½æŠŠåŸå› æŸ¥å‡ºæ¥ï¼Œæ—©ç‚¹æŠŠå­¦è´¹èµšå›æ¥ï¼Œå“ˆå“ˆğŸ˜„<br>â€”â€”â€”â€”â€”<br>è™½ç„¶ä¹‹å‰å­¦k8sä¸“æ æ—¶ubuntu 18.04 å’Œdockeréƒ½é…å¥½äº†ï¼Œä½†æ˜¯æœ€è¿‘æ‰‹ä¸Šäº‹æƒ…æœ‰ç‚¹å¤šï¼Œè¿˜æ˜¯å…ˆè§£å†³æ‰‹ä¸Šçš„äº‹æƒ…å§ã€‚è€å¸ˆè§è°…å“ˆã€‚","like_count":5,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430948,"discussion_content":"å¾ˆå¤šçº¿ä¸Šé—®é¢˜å…¶å®è·Ÿè¿™ä¸ªç±»ä¼¼ï¼Œç­‰åˆ°ä½ ç™»é™†æœåŠ¡å™¨çš„æ—¶å€™æ€§èƒ½é—®é¢˜å·²ç»ç»“æŸäº†ï¼Œè¿™æ ·åœ¨çº¿åˆ†æå°±çœ‹ä¸å‡ºå“ªé‡Œå¯¼è‡´çš„é—®é¢˜ï¼Œåªæœ‰ä»å¹³å‡è´Ÿè½½è¿™ç§ååº”å†å²çš„æŒ‡æ ‡çœ‹å‡ºä¸€äº›é—®é¢˜ã€‚\n\nè¿™ç§æƒ…æ™¯ä¸‹ï¼Œå°±éœ€è¦ç›‘æ§ç³»ç»Ÿçš„é…åˆï¼Œè®°å½•ä¸‹å†å²çš„ç³»ç»Ÿå’Œè¿›ç¨‹çš„æ€§èƒ½æŒ‡æ ‡ã€‚å¹¶ä¸”ï¼Œè¿™ä¸ªcaseåªæœ‰load1é«˜ï¼Œæ‰€ä»¥ç›‘æ§çš„é—´éš”æ—¶é—´ä¹Ÿéœ€è¦æ¯”è¾ƒç²¾ç»†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543571185,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":236637,"user_name":"J.Smile","can_delete":false,"product_type":"c1","uid":1336475,"ip_address":"","ucode":"C4D98DFDBF7584","user_header":"https://static001.geekbang.org/account/avatar/00/14/64/9b/0b578b08.jpg","comment_is_top":false,"comment_ctime":1595487044,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18775356228","product_id":100020901,"comment_content":"âœ¨TOPå‘½ä»¤è§£é‡Šï¼š<br>ç¬¬ä¸‰è¡Œcpuä½¿ç”¨ç‡è§£é‡Šï¼š<br>âˆš us: userï¼ˆé€šå¸¸ç¼©å†™ä¸º usï¼‰ï¼Œä»£è¡¨ç”¨æˆ·æ€ CPU æ—¶é—´ã€‚æ³¨æ„ï¼Œå®ƒä¸åŒ…æ‹¬ä¸‹é¢çš„ nice æ—¶é—´ï¼Œä½†åŒ…æ‹¬äº† guest æ—¶é—´ã€‚<br>âˆš ni: niceï¼ˆé€šå¸¸ç¼©å†™ä¸º niï¼‰ï¼Œä»£è¡¨ä½ä¼˜å…ˆçº§ç”¨æˆ·æ€ CPU æ—¶é—´ï¼Œä¹Ÿå°±æ˜¯è¿›ç¨‹çš„ nice å€¼è¢«è°ƒæ•´ä¸º 1-19 ä¹‹é—´æ—¶çš„ CPU æ—¶é—´ã€‚è¿™é‡Œæ³¨æ„ï¼Œnice å¯å–å€¼èŒƒå›´æ˜¯ -20 åˆ° 19ï¼Œæ•°å€¼è¶Šå¤§ï¼Œä¼˜å…ˆçº§åè€Œè¶Šä½ã€‚<br>âˆš sy: systemï¼ˆé€šå¸¸ç¼©å†™ä¸º sysï¼‰ï¼Œä»£è¡¨å†…æ ¸æ€ CPU æ—¶é—´ã€‚<br>âˆš di: idleï¼ˆé€šå¸¸ç¼©å†™ä¸º idï¼‰ï¼Œä»£è¡¨ç©ºé—²æ—¶é—´ã€‚æ³¨æ„ï¼Œå®ƒä¸åŒ…æ‹¬ç­‰å¾… I&#47;O çš„æ—¶é—´ï¼ˆiowaitï¼‰ã€‚<br>âˆš wa: iowaitï¼ˆé€šå¸¸ç¼©å†™ä¸º waï¼‰ï¼Œä»£è¡¨ç­‰å¾… I&#47;O çš„ CPU æ—¶é—´ã€‚<br>âˆš hi: irqï¼ˆé€šå¸¸ç¼©å†™ä¸º hiï¼‰ï¼Œä»£è¡¨å¤„ç†ç¡¬ä¸­æ–­çš„ CPU æ—¶é—´ã€‚<br>âˆš si: softirqï¼ˆé€šå¸¸ç¼©å†™ä¸º siï¼‰ï¼Œä»£è¡¨å¤„ç†è½¯ä¸­æ–­çš„ CPU æ—¶é—´ã€‚<br>âˆš st: stealï¼ˆé€šå¸¸ç¼©å†™ä¸º stï¼‰ï¼Œä»£è¡¨å½“ç³»ç»Ÿè¿è¡Œåœ¨è™šæ‹Ÿæœºä¸­çš„æ—¶å€™ï¼Œè¢«å…¶ä»–è™šæ‹Ÿæœºå ç”¨çš„ CPU æ—¶é—´ã€‚<br>âˆš guest: guestï¼ˆé€šå¸¸ç¼©å†™ä¸º guestï¼‰ï¼Œä»£è¡¨é€šè¿‡è™šæ‹ŸåŒ–è¿è¡Œå…¶ä»–æ“ä½œç³»ç»Ÿçš„æ—¶é—´ï¼Œä¹Ÿå°±æ˜¯è¿è¡Œè™šæ‹Ÿæœºçš„ CPU æ—¶é—´ã€‚<br>âˆš gnice: guest_niceï¼ˆé€šå¸¸ç¼©å†™ä¸º gniceï¼‰ï¼Œä»£è¡¨ä»¥ä½ä¼˜å…ˆçº§è¿è¡Œè™šæ‹Ÿæœºçš„æ—¶é—´ã€‚<br>âœ¨ top é»˜è®¤æ˜¾ç¤ºçš„æ˜¯æ‰€æœ‰ CPU çš„å¹³å‡å€¼ï¼Œè¿™ä¸ªæ—¶å€™ä½ åªéœ€è¦æŒ‰ä¸‹æ•°å­— 1 ï¼Œå°±å¯ä»¥åˆ‡æ¢åˆ°æ¯ä¸ª CPU çš„ä½¿ç”¨ç‡äº†ã€‚<br>âœ¨ topå‘½ä»¤æ‰€æœ‰è¿›ç¨‹çš„å®æ—¶ç»Ÿè®¡ä¿¡æ¯ï¼š<br>å…¶ä¸­çš„%CPUï¼Œè¡¨ç¤ºè¿›ç¨‹çš„ CPU ä½¿ç”¨ç‡ã€‚å®ƒæ˜¯ç”¨æˆ·æ€å’Œå†…æ ¸æ€ CPU ä½¿ç”¨ç‡çš„æ€»å’Œï¼ŒåŒ…æ‹¬ï¼š<br>â€» è¿›ç¨‹ç”¨æˆ·ç©ºé—´ä½¿ç”¨çš„CPU<br>â€» é€šè¿‡ç³»ç»Ÿè°ƒç”¨æ‰§è¡Œçš„å†…æ ¸ç©ºé—´CPU<br>â€» ä»¥åŠåœ¨å°±ç»ªé˜Ÿåˆ—ç­‰å¾…è¿è¡Œçš„CPU<br>â€» åœ¨è™šæ‹ŸåŒ–ç¯å¢ƒä¸­ï¼Œå®ƒè¿˜åŒ…æ‹¬äº†è¿è¡Œè™šæ‹Ÿæœºå ç”¨çš„CPU<br>âœ¨pidstatåˆ†æè¿›ç¨‹cpuè¯¦ç»†ä½¿ç”¨æƒ…å†µ<br>top å¹¶æ²¡æœ‰ç»†åˆ†è¿›ç¨‹çš„ç”¨æˆ·æ€ CPU å’Œå†…æ ¸æ€ CPUï¼Œä½¿ç”¨pidstatå¯ä»¥åˆ†ææ¯ä¸ªè¿›ç¨‹ CPU è¯¦ç»†ä½¿ç”¨æƒ…å†µã€‚<br>â€» ç”¨æˆ·æ€ CPU ä½¿ç”¨ç‡ ï¼ˆ%usrï¼‰ï¼›<br>â€» å†…æ ¸æ€ CPU ä½¿ç”¨ç‡ï¼ˆ%systemï¼‰ï¼›<br>â€» è¿è¡Œè™šæ‹Ÿæœº CPU ä½¿ç”¨ç‡ï¼ˆ%guestï¼‰ï¼›<br>â€» ç­‰å¾… CPU ä½¿ç”¨ç‡ï¼ˆ%waitï¼‰ï¼›<br>â€» ä»¥åŠæ€»çš„ CPU ä½¿ç”¨ç‡ï¼ˆ%CPUï¼‰<br>âœ¨å ç”¨ CPU çš„åˆ°åº•æ˜¯ä»£ç é‡Œçš„å“ªä¸ªå‡½æ•°<br>åŠæ³•ä¸€ï¼š GDB è°ƒè¯•ç¨‹åºçš„è¿‡ç¨‹ä¼šä¸­æ–­ç¨‹åºè¿è¡Œï¼Œè¿™åœ¨çº¿ä¸Šç¯å¢ƒå¾€å¾€æ˜¯ä¸å…è®¸çš„ã€‚<br>æ‰€ä»¥ï¼ŒGDB åªé€‚åˆç”¨åœ¨æ€§èƒ½åˆ†æçš„åæœŸï¼Œå½“ä½ æ‰¾åˆ°äº†å‡ºé—®é¢˜çš„å¤§è‡´å‡½æ•°åï¼Œçº¿ä¸‹å†å€ŸåŠ©å®ƒæ¥è¿›ä¸€æ­¥è°ƒè¯•å‡½æ•°å†…éƒ¨çš„é—®é¢˜ã€‚<br>åŠæ³•äºŒï¼šé€šè¿‡perfç¬¬ä¸€æ—¶é—´åˆ†æè¿›ç¨‹CPUé—®é¢˜ã€‚<br>perf æ˜¯ Linux2.6.31ä»¥åå†…ç½®çš„æ€§èƒ½åˆ†æå·¥å…·ã€‚å®ƒä»¥æ€§èƒ½äº‹ä»¶é‡‡æ ·ä¸ºåŸºç¡€ï¼Œä¸ä»…å¯ä»¥åˆ†æç³»ç»Ÿçš„å„ç§äº‹ä»¶å’Œå†…æ ¸æ€§èƒ½ï¼Œ<br>è¿˜å¯ä»¥ç”¨æ¥åˆ†ææŒ‡å®šåº”ç”¨ç¨‹åºçš„æ€§èƒ½é—®é¢˜ã€‚<br><br>â‘  ç¬¬ä¸€ç§å¸¸è§ç”¨æ³•æ˜¯ perf topï¼Œç±»ä¼¼äº topï¼Œå®ƒèƒ½å¤Ÿå®æ—¶æ˜¾ç¤ºå ç”¨ CPU æ—¶é’Ÿæœ€å¤šçš„å‡½æ•°æˆ–è€…æŒ‡ä»¤ï¼Œå› æ­¤å¯ä»¥ç”¨æ¥æŸ¥æ‰¾çƒ­ç‚¹å‡½æ•°ã€‚<br>* Samplesï¼šé‡‡æ ·æ•°<br>* eventï¼šäº‹ä»¶ç±»å‹<br>* Event countï¼šäº‹ä»¶æ€»æ•°é‡<br>è¡¨æ ¼è§£é‡Šï¼š<br>* ç¬¬ä¸€åˆ— Overhead ï¼Œæ˜¯è¯¥ç¬¦å·çš„æ€§èƒ½äº‹ä»¶åœ¨æ‰€æœ‰é‡‡æ ·ä¸­çš„æ¯”ä¾‹ï¼Œç”¨ç™¾åˆ†æ¯”æ¥è¡¨ç¤ºã€‚<br>* ç¬¬äºŒåˆ— Shared ï¼Œæ˜¯è¯¥å‡½æ•°æˆ–æŒ‡ä»¤æ‰€åœ¨çš„åŠ¨æ€å…±äº«å¯¹è±¡ï¼ˆDynamic Shared Objectï¼‰ï¼Œå¦‚å†…æ ¸ã€è¿›ç¨‹åã€åŠ¨æ€é“¾æ¥åº“åã€å†…æ ¸æ¨¡å—åç­‰ã€‚<br>* ç¬¬ä¸‰åˆ— Object ï¼Œæ˜¯åŠ¨æ€å…±äº«å¯¹è±¡çš„ç±»å‹ã€‚æ¯”å¦‚ [.] è¡¨ç¤ºç”¨æˆ·ç©ºé—´çš„å¯æ‰§è¡Œç¨‹åºã€æˆ–è€…åŠ¨æ€é“¾æ¥åº“ï¼Œè€Œ [k] åˆ™è¡¨ç¤ºå†…æ ¸ç©ºé—´ã€‚<br>* ç¬¬å››åˆ— Symbol æ˜¯ç¬¦å·åï¼Œä¹Ÿå°±æ˜¯å‡½æ•°åã€‚å½“å‡½æ•°åæœªçŸ¥æ—¶ï¼Œç”¨åå…­è¿›åˆ¶çš„åœ°å€æ¥è¡¨ç¤ºã€‚<br><br>perf top ç¼ºç‚¹ï¼š è™½ç„¶å®æ—¶å±•ç¤ºäº†ç³»ç»Ÿçš„æ€§èƒ½ä¿¡æ¯ï¼Œä½†å®ƒçš„ç¼ºç‚¹æ˜¯å¹¶ä¸ä¿å­˜æ•°æ®ï¼Œä¹Ÿå°±æ— æ³•ç”¨äºç¦»çº¿æˆ–è€…åç»­çš„åˆ†æ<br>â‘¡ ç¬¬äºŒç§ç”¨æ³•æ˜¯ï¼šperf record åˆ™æä¾›äº†ä¿å­˜æ•°æ®çš„åŠŸèƒ½ï¼Œä¿å­˜åçš„æ•°æ®ï¼Œéœ€è¦ä½ ç”¨ perf report è§£æå±•ç¤ºï¼Œperf recordæ‰§è¡Œåï¼Œå¯ä»¥åœ¨å½“å‰ç›®å½•ä¸‹ç”Ÿæˆï¼šperf.data<br>ç„¶åä½¿ç”¨perf reportç›´æ¥æ‰§è¡Œç”Ÿæˆè·Ÿperf topä¸€æ ·çš„æŠ¥å‘Šã€‚<br>â­•ï¸ perf topè°ƒç”¨å…³ç³»åˆ†æ<br>\t# -gå¼€å¯è°ƒç”¨å…³ç³»åˆ†æï¼Œ-pæŒ‡å®šphp-fpmçš„è¿›ç¨‹å·21515<br>\t$ perf top -g -p 21515<br>  å¯ä»¥æŸ¥çœ‹åˆ°è¿›ç¨‹ä¸­å…·ä½“çš„å‡½æ•°è°ƒç”¨å…³ç³»æ¥å¸®åŠ©æ’æŸ¥é—®é¢˜ã€‚<br>âœ¨ abå·¥å…·ä½¿ç”¨æ–¹å¼<br>abï¼ˆapache benchï¼‰æ˜¯ä¸€ä¸ªå¸¸ç”¨çš„ HTTP æœåŠ¡æ€§èƒ½æµ‹è¯•å·¥å…·<br># å¹¶å‘10ä¸ªè¯·æ±‚æµ‹è¯•Nginxæ€§èƒ½ï¼Œæ€»å…±æµ‹è¯•100ä¸ªè¯·æ±‚<br>$ ab -c 10 -n 100 http:&#47;&#47;localhost:10000&#47;","like_count":4},{"had_liked":false,"id":53099,"user_name":"jssfy","can_delete":false,"product_type":"c1","uid":1137238,"ip_address":"","ucode":"F16353CFE607B7","user_header":"https://static001.geekbang.org/account/avatar/00/11/5a/56/115c6433.jpg","comment_is_top":false,"comment_ctime":1545583501,"is_pvip":false,"replies":[{"id":"19450","content":"ä»€ä¹ˆé”™è¯¯ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1545696442,"ip_address":"","comment_id":53099,"utype":1}],"discussion_count":2,"race_medal":0,"score":"18725452685","product_id":100020901,"comment_content":"å®¹å™¨ä¸­å®‰è£…ä¸äº†linux-perfï¼Œéœ€è¦ä¿®æ”¹æºï¼Ÿ","like_count":4,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":434032,"discussion_content":"ä»€ä¹ˆé”™è¯¯ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545696442,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1069269,"avatar":"https://static001.geekbang.org/account/avatar/00/10/50/d5/73334a95.jpg","nickname":"doos","note":"","ucode":"7C9AF67F90E65C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":578804,"discussion_content":"yum install -y linux-perf linux-tools procps","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657023169,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":50044,"user_name":"æå˜‰é¹","can_delete":false,"product_type":"c1","uid":1022999,"ip_address":"","ucode":"730E44B3535DF9","user_header":"https://static001.geekbang.org/account/avatar/00/0f/9c/17/6ffd80f6.jpg","comment_is_top":false,"comment_ctime":1544848142,"is_pvip":false,"replies":[{"id":"18105","content":"ğŸ‘ è°¢è°¢åˆ†äº«å®‰è£…æ–¹æ³•","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1545004300,"ip_address":"","comment_id":50044,"utype":1}],"discussion_count":2,"race_medal":0,"score":"18724717326","product_id":100020901,"comment_content":"æˆ‘å®‰è£…çš„ubuntu 18.04 live serverç‰ˆæœ¬ï¼Œä½¿ç”¨å¦‚ä¸‹æŒ‡ä»¤å®‰è£…çš„perfï¼š<br>apt install linux-tools-generic","like_count":4,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432856,"discussion_content":"ğŸ‘ è°¢è°¢åˆ†äº«å®‰è£…æ–¹æ³•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545004300,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1609350,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/2rRMjRdMelicUoU5yXibENlYapdvPUCibOk8bGicyFoIW7IMxMqhicgelVphEmWFpMucVXjQjv5pdu6RgDkNiav0qUcw/132","nickname":"holly","note":"","ucode":"9D57569ED81CBA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":23472,"discussion_content":"æˆ‘æ˜¯ubuntu18.04 desktopï¼Œä½¿ç”¨perf topè¢«æç¤ºä½¿ç”¨apt install linux-tools-generic å’Œapt install linux-tools-generic guile","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569823842,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":46221,"user_name":"å°è™","can_delete":false,"product_type":"c1","uid":1033083,"ip_address":"","ucode":"31438B30CF7910","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/GkMk4gBlfZcljsY3Vqu7w8ZkxBfe8WTz1ySnPTJARKXF0FpCr3HqlicIHQlItib9m7iaxLESkmBNpoiaY81EUUzQrA/132","comment_is_top":false,"comment_ctime":1543886046,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18723755230","product_id":100020901,"comment_content":"ä¸ºä»€ä¹ˆiowaité«˜ä¼šå¯¼è‡´cpuä½¿ç”¨ç‡é«˜ï¼Œè¿˜æœ‰ä¾‹å­ä¸­å®šä½å‡½æ•°å…³ç³»é“¾é‚£é‡Œsqrté‚£é‡Œçœ‹åªæœ‰3.97%ï¼Œæ€ä¹ˆå°±ç¡®å®šæ˜¯è¿™ä¸ªå¼•èµ·çš„ã€‚","like_count":4},{"had_liked":false,"id":44937,"user_name":"æœ±æœˆä¿Š","can_delete":false,"product_type":"c1","uid":1017707,"ip_address":"","ucode":"4DA0728B862FBD","user_header":"https://static001.geekbang.org/account/avatar/00/0f/87/6b/0b6cd39a.jpg","comment_is_top":false,"comment_ctime":1543513561,"is_pvip":false,"replies":[{"id":"16003","content":"ä¼šè®²çš„ï¼Œä¸è¿‡è¿˜æ˜¯ä¾§é‡äºé€šç”¨çš„æ–¹æ³•ï¼Œè€Œä¸æ˜¯å…·ä½“æŸä¸ªç¼–ç¨‹è¯­è¨€","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1543537326,"ip_address":"","comment_id":44937,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18723382745","product_id":100020901,"comment_content":"å¯ä»¥å†è®²è®²å¦‚ä½•åˆ†æC++ç¨‹åºçƒ­ç‚¹å‡½æ•°ï¼Œå“ªäº›åœ°æ–¹å ç”¨å¤§é‡å†…å­˜ï¼Œå“ªäº›åœ°æ–¹å ç”¨å…¶ä»–èµ„æºï¼ŒæœŸå¾…å¤§ä½¬ã€‚","like_count":4,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430866,"discussion_content":"ä¼šè®²çš„ï¼Œä¸è¿‡è¿˜æ˜¯ä¾§é‡äºé€šç”¨çš„æ–¹æ³•ï¼Œè€Œä¸æ˜¯å…·ä½“æŸä¸ªç¼–ç¨‹è¯­è¨€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543537326,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":237694,"user_name":"éŸ¦ä¼¯","can_delete":false,"product_type":"c1","uid":1145172,"ip_address":"","ucode":"B9038579C44F55","user_header":"https://static001.geekbang.org/account/avatar/00/11/79/54/34273afa.jpg","comment_is_top":false,"comment_ctime":1595927994,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14480829882","product_id":100020901,"comment_content":"æˆ‘æ˜¯åœ¨dockerä¸­è¿è¡Œçš„ubuntu18.04ï¼Œå®‰è£…prefçš„æ—¶å€™å‡ºç°ï¼š<br><br>WARNING: perf not found for kernel 4.19.76<br><br>  You may need to install the following packages for this specific kernel:<br>    linux-tools-4.19.76-linuxkit<br>    linux-cloud-tools-4.19.76-linuxkit<br><br>  You may also want to install one of the following packages to keep up to date:<br>    linux-tools-linuxkit<br>    linux-cloud-tools-linuxkit<br><br>ç…§ç€æç¤ºä¹Ÿä¸€é€šinstallï¼Œç„¶åæ‰§è¡Œperfï¼Œä½†è¿˜æ˜¯ä¼šæŠ¥ä¸Šè¿°çš„é”™è¯¯ã€‚åˆä¸€é€šæœç´¢åï¼Œæ‰§è¡Œäº†<br>ln -s &#47;usr&#47;lib&#47;linux-tools&#47;4.15.0-112-generic&#47;perf  &#47;usr&#47;bin&#47;perf<br>å°±æ²¡é—®é¢˜äº†","like_count":3},{"had_liked":false,"id":85455,"user_name":"å¤§åç‹ç‹¸","can_delete":false,"product_type":"c1","uid":1325678,"ip_address":"","ucode":"5044F89A505C5B","user_header":"https://static001.geekbang.org/account/avatar/00/14/3a/6e/e39e90ca.jpg","comment_is_top":false,"comment_ctime":1555063464,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"14439965352","product_id":100020901,"comment_content":"æŒ‰ç…§æ­¥éª¤èµ°çš„ï¼Œperf -g -p ä¸‰ä¸ªè¿›ç¨‹éšä¾¿è¯•äº†ä¸€ä¸ªæ²¡æœ‰å†…å®¹å‡ºç°ã€‚ç”¨äº†perf record å’Œperf report ç»ˆäºå‡ºç°äº† å˜å˜ã€‚äºŒåˆ· åŠ¨æ‰‹è¿˜æ˜¯æœ‰ç”¨çš„ã€‚","like_count":3,"discussions":[{"author":{"id":2224641,"avatar":"https://static001.geekbang.org/account/avatar/00/21/f2/01/80521228.jpg","nickname":"éƒ‘æ–Œ","note":"","ucode":"E253447BAB1E23","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":312538,"discussion_content":"æˆ‘ç”¨top -pä¹Ÿæ²¡æœ‰çœ‹åˆ°æŒ‡å®šè¿›ç¨‹ï¼ŒçŸ¥é“æ˜¯ä»€ä¹ˆåŸå› å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602730761,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":45661,"user_name":"æ¸¡æ¸¡é¸Ÿ_linux","can_delete":false,"product_type":"c1","uid":1227772,"ip_address":"","ucode":"099BB11A3201D3","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ernR4NKI5tejJAV3HMTF3gszBBUAjkjLO2QYic2gx5dMGelFv4LWibib7CUGexmMcMp5HiaaibmOH3dyHg/132","comment_is_top":false,"comment_ctime":1543739855,"is_pvip":false,"replies":[{"id":"16310","content":"åªçœ‹åˆ°åœ°å€è€Œä¸æ˜¯å‡½æ•°åæ˜¯ç”±äºåº”ç”¨ç¨‹åºè¿è¡Œåœ¨å®¹å™¨ä¸­ï¼Œå®ƒçš„ä¾èµ–ä¹Ÿéƒ½åœ¨å®¹å™¨å†…éƒ¨ï¼Œæ•…è€Œperfæ— æ³•æ‰¾åˆ°PHPç¬¦å·è¡¨ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1543796927,"ip_address":"","comment_id":45661,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14428641743","product_id":100020901,"comment_content":"ä½¿ç”¨perf åªèƒ½åˆ†æåˆ°16è¿›åˆ¶çš„åœ°å€ï¼Œæ— æ³•æ˜¾ç¤ºå‡½æ•°åç§°","like_count":3,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431143,"discussion_content":"åªçœ‹åˆ°åœ°å€è€Œä¸æ˜¯å‡½æ•°åæ˜¯ç”±äºåº”ç”¨ç¨‹åºè¿è¡Œåœ¨å®¹å™¨ä¸­ï¼Œå®ƒçš„ä¾èµ–ä¹Ÿéƒ½åœ¨å®¹å™¨å†…éƒ¨ï¼Œæ•…è€Œperfæ— æ³•æ‰¾åˆ°PHPç¬¦å·è¡¨ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543796927,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":45236,"user_name":"LeonğŸ“·","can_delete":false,"product_type":"c1","uid":1219496,"ip_address":"","ucode":"B9BBD1EFAAE5A2","user_header":"https://static001.geekbang.org/account/avatar/00/12/9b/a8/6a391c66.jpg","comment_is_top":false,"comment_ctime":1543564530,"is_pvip":false,"replies":[{"id":"16084","content":"è°ƒç”¨å †æ ˆéœ€è¦æŒ‰ä¸Šä¸‹æ–¹å‘é”®å¯¼èˆªåˆ°æƒ³çœ‹çš„åœ°æ–¹ï¼Œå†æŒ‰å›è½¦é”®å±•å¼€","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1543570426,"ip_address":"","comment_id":45236,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14428466418","product_id":100020901,"comment_content":"è€å¸ˆï¼Œæˆ‘æ˜¯centos7ç³»ç»Ÿï¼Œæ‰§è¡Œäº†perf top -g -p pidï¼Œè¿›å»ä¹‹åï¼Œçœ‹ä¸åˆ°å‡½æ•°è°ƒç”¨å›¾ï¼Œè¿™æ˜¯ä¸ºå•¥<br>","like_count":3,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430963,"discussion_content":"è°ƒç”¨å †æ ˆéœ€è¦æŒ‰ä¸Šä¸‹æ–¹å‘é”®å¯¼èˆªåˆ°æƒ³çœ‹çš„åœ°æ–¹ï¼Œå†æŒ‰å›è½¦é”®å±•å¼€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543570426,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":248103,"user_name":"é¢“åºŸäººæ‰","can_delete":false,"product_type":"c1","uid":1984432,"ip_address":"","ucode":"DED839F68A822D","user_header":"https://static001.geekbang.org/account/avatar/00/1e/47/b0/f44aef75.jpg","comment_is_top":false,"comment_ctime":1600009947,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10189944539","product_id":100020901,"comment_content":"è¯·é—®dockeré•œåƒæ€ä¹ˆè£…ï¼Ÿæ²¡ç”¨è¿‡dockerï¼Œç®€å•è‡ªå­¦ådockerå®‰è£…å¥½äº†ï¼ˆå¹¶è®¾ç½®é˜¿é‡Œäº‘è¿›é¡¹ä»“åº“ï¼‰ï¼Œè£…å…¶ä»–çš„é•œåƒä¹Ÿä¼šï¼ˆä¾‹å¦‚ mysqlç­‰ï¼‰ï¼Œä½†æ˜¯è¯·é—®å¦‚ä½•å®‰è£…ä½ çš„nginxå’Œphpçš„é•œåƒåŒ…ï¼Ÿ","like_count":2},{"had_liked":false,"id":172252,"user_name":"sylvia","can_delete":false,"product_type":"c1","uid":1736904,"ip_address":"","ucode":"8D69698FA73392","user_header":"","comment_is_top":false,"comment_ctime":1579140318,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"10169074910","product_id":100020901,"comment_content":"ä¸ºä»€ä¹ˆæ‰§è¡Œè¿™ä¸ªå‘½ä»¤åï¼Œè¿”å›é‡‡æ ·æ•°æ®éƒ½ä¸ºç©ºã€‚pid6231æ˜¯å­˜åœ¨çš„ï¼Œä¸”cpuä½¿ç”¨ç‡å¾ˆé«˜ã€‚<br><br># pidstat -p 6231 3<br>10æ—¶03åˆ†44ç§’   UID       PID    %usr %system  %guest    %CPU   CPU  Command<br>10æ—¶03åˆ†47ç§’  1000      6231  100.00    2.33    0.00  100.00     3  gnome-shell<br><br># perf top -g -p 6231                                                                                                                                                             <br>Samples: 0  of event &#39;cycles:ppp&#39;, 4000 Hz, Event count (approx.): 0 lost: 0&#47;0 drop: 0&#47;0                                                                                                            <br>Children      Self","like_count":2,"discussions":[{"author":{"id":1785149,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3d/3d/66512c23.jpg","nickname":"ben","note":"","ucode":"7084248C8D962C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":206765,"discussion_content":"æˆ‘ä¹Ÿæ˜¯åŒæ ·çš„é—®é¢˜","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1584440170,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1069269,"avatar":"https://static001.geekbang.org/account/avatar/00/10/50/d5/73334a95.jpg","nickname":"doos","note":"","ucode":"7C9AF67F90E65C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":578805,"discussion_content":"ä½ æ˜¯ä¸æ˜¯ä¸æ˜¯æœ€å°åŒ–å®‰è£…çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657023473,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":94339,"user_name":"å¼ºå­","can_delete":false,"product_type":"c1","uid":1528598,"ip_address":"","ucode":"1002DA5D645FE5","user_header":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJF8NpRdF7fOetWvmBfOFvUfNkV7OoRnVdKoyTUBhOqCnibSyibGngGYEibn5QGMuXic66enqG9OS7jWA/132","comment_is_top":false,"comment_ctime":1557793427,"is_pvip":false,"replies":[{"id":"33779","content":"æ˜¯çš„ï¼Œåé¢è¿˜æœ‰æ›´å¤æ‚çš„æ¡ˆä¾‹","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1557835340,"ip_address":"","comment_id":94339,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10147728019","product_id":100020901,"comment_content":"å®é™…å·¥ç¨‹ç¯å¢ƒä¸­ï¼Œé—®é¢˜æ˜¯å¾ˆéšè”½å¤æ‚çš„","like_count":2,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":450025,"discussion_content":"æ˜¯çš„ï¼Œåé¢è¿˜æœ‰æ›´å¤æ‚çš„æ¡ˆä¾‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1557835340,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":54007,"user_name":"Blue_Eye","can_delete":false,"product_type":"c1","uid":1055764,"ip_address":"","ucode":"2FCF83951ABD7C","user_header":"https://static001.geekbang.org/account/avatar/00/10/1c/14/2388d9e4.jpg","comment_is_top":false,"comment_ctime":1545785686,"is_pvip":false,"replies":[{"id":"19724","content":"iowaitæ˜¯ä¸€ä¸ªCPUæŒ‡æ ‡ï¼Œå¹¶ä¸”æ˜¯ä¸ªä¸å¤ªå‡†ç¡®çš„æŒ‡æ ‡ï¼Œé€šå¸¸åªæ˜¯æ‹¿æ¥å‚è€ƒï¼Œè€Œä¸ä¼šç”¨ä½œåŸºå‡†åˆ¤æ–­ï¼šiowaité«˜ä¸ä»£è¡¨I&#47;Oè´Ÿè½½é‡ï¼Œiowaitä½ä¹Ÿä¸ä»£è¡¨å°±æ²¡æœ‰å¤§é‡çš„I&#47;O","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1545839946,"ip_address":"","comment_id":54007,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10135720278","product_id":100020901,"comment_content":"æˆ‘æœ‰ç‚¹å›°æƒ‘å…³äºå¹³å‡è´Ÿè½½å’ŒCPUä½¿ç”¨ç‡çš„å…³ç³»ï¼Œä¹‹å‰é‚£ç¯‡æ–‡ç« è¯´å¹³å‡è´Ÿè½½å’ŒCPUä½¿ç”¨ç‡ä¸æ˜¯ç›¸å…³è”çš„ï¼Œå¹³å‡è´Ÿè½½æ˜¯ä¸ä»…åŒ…æ‹¬äº†RunningçŠ¶æ€ï¼Œç­‰å¾…IOçš„DçŠ¶æ€çš„è¿›ç¨‹ä¹Ÿä¼šå½±å“å¹³å‡è´Ÿè½½ã€‚ä½†è¿™ç¯‡æ–‡ç« åˆè¯´CPUä½¿ç”¨ç‡é‡Œæœ‰ä¸ªiowaitï¼Œå¹¶ä¸”ç©ºé—²æ—¶é—´é‡Œæ˜¯ä¸åŒ…æ‹¬iowaitçš„æ—¶é—´çš„ã€‚è¿™ä¼¼ä¹æœ‰ç‚¹å‰åçŸ›ç›¾ï¼Ÿæ—¢ç„¶iowaitæ˜¯å±äºCPUä½¿ç”¨ç‡ï¼Œé‚£ä¸ºä»€ä¹ˆå‰ä¸€ç¯‡æ–‡ç« è¯´å¹³å‡è´Ÿè½½å’ŒCPUä½¿ç”¨ç‡ä¸ä¸€å®šæ˜¯å¯¹ç­‰çš„å‘¢ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":434323,"discussion_content":"iowaitæ˜¯ä¸€ä¸ªCPUæŒ‡æ ‡ï¼Œå¹¶ä¸”æ˜¯ä¸ªä¸å¤ªå‡†ç¡®çš„æŒ‡æ ‡ï¼Œé€šå¸¸åªæ˜¯æ‹¿æ¥å‚è€ƒï¼Œè€Œä¸ä¼šç”¨ä½œåŸºå‡†åˆ¤æ–­ï¼šiowaité«˜ä¸ä»£è¡¨I/Oè´Ÿè½½é‡ï¼Œiowaitä½ä¹Ÿä¸ä»£è¡¨å°±æ²¡æœ‰å¤§é‡çš„I/O","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545839946,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":49921,"user_name":"9527","can_delete":false,"product_type":"c1","uid":1032735,"ip_address":"","ucode":"04B51C09E3C7B8","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c2/1f/343f2dec.jpg","comment_is_top":false,"comment_ctime":1544789894,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10134724486","product_id":100020901,"comment_content":"è€å¸ˆå¥½ï¼ŒHZç­‰äº250ï¼Œæ˜¯è¯´ä¸€ç§’é’Ÿå•¥ä¹Ÿä¸åšï¼Œéƒ½ä¼šæœ‰250æ¬¡çš„è¿›ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢å—ï¼Ÿ","like_count":2},{"had_liked":false,"id":45621,"user_name":"æ¨Šæµ·æ¶›","can_delete":false,"product_type":"c1","uid":1323249,"ip_address":"","ucode":"0B04D5985EE0E1","user_header":"https://static001.geekbang.org/account/avatar/00/14/30/f1/bf7fd8d2.jpg","comment_is_top":false,"comment_ctime":1543726514,"is_pvip":false,"replies":[{"id":"16321","content":"manæ˜¯Linuxæœ€åŸºæœ¬çš„å‘½ä»¤","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1543797411,"ip_address":"","comment_id":45621,"utype":1}],"discussion_count":2,"race_medal":0,"score":"10133661106","product_id":100020901,"comment_content":"[Day6æ‰“å¡]<br>æ–‡ç« å‰é¢ï¼ˆæŸ¥è¯¢ man proc å°±å¯ä»¥ï¼‰ï¼Œæœ¨æœ‰è¿™ä¹ˆä¸ªå‘½ä»¤å§ï¼Ÿ<br>","like_count":2,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431123,"discussion_content":"manæ˜¯Linuxæœ€åŸºæœ¬çš„å‘½ä»¤","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543797411,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1069269,"avatar":"https://static001.geekbang.org/account/avatar/00/10/50/d5/73334a95.jpg","nickname":"doos","note":"","ucode":"7C9AF67F90E65C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":578807,"discussion_content":"docker run --privileged --name phpfpm -itd --network container:nginx phpfpm restart=&#34;always&#34; /usr/sbin/init\ndocker exec -it phpfpm\nyum install -y linux-perf linux-tools procps\nperf record -g -p 39826\ndocker cp perf.data phpfpm:/root\nperf report","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657023759,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":356212,"user_name":"Geek_4e79a6","can_delete":false,"product_type":"c1","uid":3171069,"ip_address":"ä¸Šæµ·","ucode":"615F7457F8CC8C","user_header":"","comment_is_top":false,"comment_ctime":1662044158,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5957011454","product_id":100020901,"comment_content":"åˆšå…¥èŒçš„å°ç™½ï¼Œè¦ç»™åŒå…¥èŒçš„åŒå­¦åˆ†äº«æŠ€æœ¯ï¼Œæ­£åœ¨å­¦ä¹ å€ªè€å¸ˆçš„æ–‡æ¡£ã€‚æˆ‘ä¹‹å‰ä¸€ç›´ä»¥ä¸ºï¼Œåªè¦ä½¿ç”¨perfï¼Œçœ‹ç¬¬ä¸€åˆ—overhead çº¢çš„ é»„çš„ï¼Œç¬¬ä¸€çœ¼çœ‹sqrtå æ¯”å¹¶ä¸é«˜ï¼Œæˆ‘ä¸‹æ„è¯†å°±æ’é™¤äº†ã€‚åŸæ¥ä¸èƒ½åªçœ‹é‚£äº›å æ¯”é«˜ï¼Œperfä¹‹å‰è¦å…ˆå®šç•Œï¼Œé€šè¿‡topæŸ¥çœ‹æ˜¯usrã€idleã€softã€hiã€sysã€wait...å“ªäº›cpuåˆ©ç”¨ç‡é«˜ï¼Œæ ¹æ®è¿™äº›åœ¨è¿›ä¸€æ­¥åˆ†æperf","like_count":1},{"had_liked":false,"id":214408,"user_name":"æ‰æ¾å£","can_delete":false,"product_type":"c1","uid":1080578,"ip_address":"","ucode":"ED904CE27CD3C4","user_header":"https://static001.geekbang.org/account/avatar/00/10/7d/02/4862f849.jpg","comment_is_top":false,"comment_ctime":1588742839,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5883710135","product_id":100020901,"comment_content":"è·‘å®¹å™¨çš„åº”ç”¨ï¼Œå¦‚æœé™åˆ¶äº†å®¹å™¨çš„CPUï¼Œå†…å­˜ã€‚è¿™æ ·å¦‚æœå®¹å™¨å†…ä½¿ç”¨äº†è¿‡å¤šçš„CPUï¼Œä¹Ÿä¼šå¯¼è‡´æ•´ä¸ªæœºå™¨çš„è´Ÿè½½å‡é«˜ï¼Œä½†æ˜¯çœ‹CPUä½¿ç”¨ç‡ä¸é«˜ã€‚","like_count":1},{"had_liked":false,"id":171968,"user_name":"InfoQ_d814060a8ee2","can_delete":false,"product_type":"c1","uid":1296300,"ip_address":"","ucode":"23293C0576134E","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIHiaJ01zhIap8sR06u1oYslPTluBh9kuHUOUo0QRic7QZuzvDYYqWnk6YV4aU7BpVoQJr96TBt9TyQ/132","comment_is_top":false,"comment_ctime":1579059169,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5874026465","product_id":100020901,"comment_content":"è¯·é—® cpu æ—¶é—´ä¸­çš„ guest æ˜¯ä»€ä¹ˆæ„æ€ï¼Œçœ‹è§£é‡Šæ˜¯æŒ‡çš„å½“å‰ç³»ç»Ÿè¿è¡Œåœ¨è™šæ‹Ÿæœºä¸­çš„æ—¶é—´å—ï¼Ÿ","like_count":1},{"had_liked":false,"id":139985,"user_name":"ZYecho","can_delete":false,"product_type":"c1","uid":1356589,"ip_address":"","ucode":"9D156DD30C581E","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLh73kPzAKhz7YxUribqF6QKFiahhVAbwpgVLSRicA68c6ZFA7vUBJY1ves3LVvibrypROyI7awv47eSA/132","comment_is_top":false,"comment_ctime":1570780694,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5865747990","product_id":100020901,"comment_content":"æƒ³é—®ä¸‹ pidstatä¸­ç­‰å¾… CPU ä½¿ç”¨ç‡ï¼ˆ%waitï¼‰ï¼›è¿™ä¸ªåŒ…æ‹¬ç­‰å¾…ioçš„æ—¶é—´ä¹ˆï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1260026,"avatar":"https://static001.geekbang.org/account/avatar/00/13/39/fa/a7edbc72.jpg","nickname":"å®‰æ’","note":"","ucode":"F78CFA9624CAEF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":169637,"discussion_content":"è¿™ä¸ªæ˜¯åœ¨ç­‰å¾…é˜Ÿåˆ—ä¸­ç­‰å¾…è¿è¡Œçš„æ—¶é—´ï¼Œé™¤äº†cpuèµ„æºå¾—ä¸åˆ°æ»¡è¶³ï¼Œå…¶ä»–èµ„æºéƒ½æ»¡è¶³ï¼Œæ˜¯å¤„äºå¯è¿è¡ŒçŠ¶æ€çš„ï¼Œåªæ˜¯å¾—ä¸åˆ°è¿è¡Œï¼Œè¿™å°±æ˜¯%waitã€‚è€Œiowaitæ˜¯å¤„äºé˜»å¡çŠ¶æ€ï¼Œç¡çœ äº†ã€‚æ‰€ä»¥%waitä¸åŒ…æ‹¬ç­‰å¾…ioçš„æ—¶é—´ã€‚%waitä¹Ÿä¸ä¼šç®—åœ¨cpuä½¿ç”¨ç‡ä¸­ï¼Œæ–‡ä¸­åº”è¯¥è¯´çš„æœ‰é”™è¯¯ã€‚","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1581638430,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":94773,"user_name":"ææ¨æ¬¢","can_delete":false,"product_type":"c1","uid":1529256,"ip_address":"","ucode":"94B304E99F8AB1","user_header":"https://static001.geekbang.org/account/avatar/00/17/55/a8/f91c8b21.jpg","comment_is_top":false,"comment_ctime":1557892799,"is_pvip":false,"replies":[{"id":"34173","content":"æœ‰å¥½å¤šç¬¦å·åç§°éƒ½æ²¡æ˜¾ç¤ºï¼Œæœ‰æ²¡æœ‰çœ‹åˆ°ç¼ºå°‘è°ƒè¯•ä¿¡æ¯çš„å‘Šè­¦ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1558095800,"ip_address":"","comment_id":94773,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5852860095","product_id":100020901,"comment_content":"æˆ‘å¹¶æ²¡æœ‰ä½¿ç”¨dockerå®¹å™¨ï¼Œç›´æ¥ç”¨è™šæ‹Ÿæœºåšè¯¾ç¨‹ï¼Œå¹¶æœªå‘ç°sqrtå‡½æ•°<br>Samples: 15K of event &#39;cpu-clock&#39;, Event count (approx.): 247945416, DSO: php-fpm<br>  Children      Self  Symbol                    <br>-    7.47%     7.31%  [.] add_function          <br>+    5.25%     5.22%  [.] 0x00000000002cb7a0 <br>-    4.89%     4.82%  [.] 0x00000000002fff50    <br>+    4.32%     4.25%  [.] 0x00000000002e7cf0    <br>+    4.16%     4.11%  [.] 0x00000000002ef9a0    <br>+    3.45%     3.44%  [.] 0x00000000002bf2f0    <br>+    3.24%     3.20%  [.] 0x00000000001dfdd3    <br>+    3.19%     3.15%  [.] 0x00000000002dd260    <br>+    3.05%     3.01%  [.] 0x00000000002fff52    <br>+    3.05%     3.04%  [.] 0x00000000002ef9a1    <br>-    3.04%     3.02%  [.] execute_ex            <br>+    3.01%     3.01%  [.] 0x00000000002cb7a2    <br>+    2.96%     2.90%  [.] 0x00000000002dd264    <br>+    2.83%     2.80%  [.] 0x00000000001dfd91    <br>+    2.68%     2.64%  [.] 0x00000000001dfd90    <br>+    2.56%     2.48%  [.] 0x00000000002f88d4    <br>-    2.47%     2.47%  [.] 0x00000000002f88d0    <br>+    2.42%     2.35%  [.] 0x00000000002e7cf1    <br>+    2.35%     2.35%  [.] 0x00000000002bf2f6    <br>+    1.91%     1.91%  [.] 0x00000000002e8eb7    <br>+    1.74%     1.71%  [.] 0x00000000002ef9ac    <br>+    1.71%     1.68%  [.] 0x00000000002dd26a    <br>+    1.35%     1.33%  [.] 0x00000000002e8e52    <br>+    1.16%     1.13%  [.] 0x00000000002cb7a8    <br>+    1.13%     1.13%  [.] 0x00000000002e8e72    <br>+    1.08%     1.08%  [.] 0x00000000002e8e59    <br>+    1.06%     1.06%  [.] 0x00000000002bf301    <br>+    1.03%     1.03%  [.] 0x00000000002e7cf2    <br>+    0.94%     0.94%  [.] 0x00000000002fff6e    <br>+    0.90%     0.84%  [.] 0x00000000001dfd92    <br>+    0.79%     0.70%  [.] 0x00000000002ef9c4    <br>     0.72%     0.72%  [.] 0x00000000002cb7ea    <br>+    0.68%     0.68%  [.] 0x00000000002fff53    <br>     0.59%     0.59%  [.] 0x00000000002fff6a    <br>     0.54%     0.54%  [.] 0x00000000001dfdcf    <br>+    0.54%     0.53%  [.] 0x00000000001dfdd7    <br>     0.45%     0.45%  [.] 0x00000000002dd27b            ","like_count":1,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":450201,"discussion_content":"æœ‰å¥½å¤šç¬¦å·åç§°éƒ½æ²¡æ˜¾ç¤ºï¼Œæœ‰æ²¡æœ‰çœ‹åˆ°ç¼ºå°‘è°ƒè¯•ä¿¡æ¯çš„å‘Šè­¦ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558095800,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":70447,"user_name":"L33K","can_delete":false,"product_type":"c1","uid":1046063,"ip_address":"","ucode":"2F8E105F44E347","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f6/2f/d3f1dae6.jpg","comment_is_top":false,"comment_ctime":1551100036,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5846067332","product_id":100020901,"comment_content":"mark","like_count":1},{"had_liked":false,"id":66945,"user_name":"å…ƒå¤©å¤«","can_delete":false,"product_type":"c1","uid":1315599,"ip_address":"","ucode":"A453A2EBA77780","user_header":"","comment_is_top":false,"comment_ctime":1550045895,"is_pvip":false,"replies":[{"id":"23706","content":"åŠ æ²¹","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1550068497,"ip_address":"","comment_id":66945,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5845013191","product_id":100020901,"comment_content":"è¡¥ä¸ªå¡ï¼Œä¹‹å‰æ–­äº†ï¼Œç°åœ¨ä»å¤´è¯¦ç»†å†æ¥ä¸€é","like_count":1,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438988,"discussion_content":"åŠ æ²¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1550068497,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":57979,"user_name":"ã€‚","can_delete":false,"product_type":"c1","uid":1066125,"ip_address":"","ucode":"25A734C4E3139F","user_header":"https://static001.geekbang.org/account/avatar/00/10/44/8d/02628db3.jpg","comment_is_top":false,"comment_ctime":1546955784,"is_pvip":false,"replies":[{"id":"20988","content":"ğŸ‘ ","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1547027524,"ip_address":"","comment_id":57979,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5841923080","product_id":100020901,"comment_content":"å­¦ä¹ å‰æ— æ‰€çŸ¥ï¼Œçœ‹ä¸€éï¼Œå†æ“ä½œä¸€éï¼Œå‘ç°äº†é—®é¢˜ï¼Œå¹¶åœ¨ç•™è¨€åŒºæ‰¾åˆ°äº†ç­”æ¡ˆï¼Œå¾ˆæ»¡è¶³","like_count":1,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435859,"discussion_content":"ğŸ‘ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547027524,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":55129,"user_name":"èŠ±å¼€è¶è‡ªæ¥","can_delete":false,"product_type":"c1","uid":1358144,"ip_address":"","ucode":"767D55E7A82975","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKibu8C3CeYGF6JCBribiaEPia5gibaQnj9icryPVwoF6ibosmdicXJIhBEUdn0aDwZQ32oTyJL86DgDswhAg/132","comment_is_top":false,"comment_ctime":1546049373,"is_pvip":false,"replies":[{"id":"20019","content":"æ˜¯çš„ï¼Œç¯‡å¹…é™åˆ¶ï¼Œä¸ä¼šåŒ…æ‹¬æ‰€æœ‰çš„ç»†èŠ‚ï¼Œæ›´æ·±å…¥çš„ç†è®ºçŸ¥è¯†è¿˜éœ€è¦ä¸“æ å¤–å†ä¸‹åŠŸå¤«å­¦ä¹ ","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1546075901,"ip_address":"","comment_id":55129,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5841016669","product_id":100020901,"comment_content":"D3æ‰“å¡ï¼Œ<br>çœ‹ç€éƒ½å·®ä¸å¤šæ‡‚ï¼Œä½†æ˜¯è¿˜æ˜¯å¤ªå¤šç»†èŠ‚ä¸æ‡‚ï¼Œæ€»çš„æ¥è¯´è¿˜æ˜¯è¦ç³»ç»Ÿçš„å›å¤´å†çœ‹çœ‹ç†è®º","like_count":1,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":434680,"discussion_content":"æ˜¯çš„ï¼Œç¯‡å¹…é™åˆ¶ï¼Œä¸ä¼šåŒ…æ‹¬æ‰€æœ‰çš„ç»†èŠ‚ï¼Œæ›´æ·±å…¥çš„ç†è®ºçŸ¥è¯†è¿˜éœ€è¦ä¸“æ å¤–å†ä¸‹åŠŸå¤«å­¦ä¹ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1546075901,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":47023,"user_name":"ä»²é¬¼","can_delete":false,"product_type":"c1","uid":1314692,"ip_address":"","ucode":"DB1CD7052D5BA6","user_header":"https://static001.geekbang.org/account/avatar/00/14/0f/84/d8e63885.jpg","comment_is_top":false,"comment_ctime":1544020426,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5838987722","product_id":100020901,"comment_content":"è€å¸ˆå¥½ï¼Œå…³äºperfæœ‰ä¸¤ä¸ªé—®é¢˜ï¼š<br>1. è¯·é—®perf topåŠ -gæ—¶ï¼Œå‰ä¸¤åˆ—childrenå’Œselfä¸¤ä¸ªæŒ‡æ ‡å„è¡¨ç¤ºä»€ä¹ˆå‘¢ï¼ŸæŒ‰Enteré”®å±•å¼€åçš„ç™¾åˆ†æ¯”åˆè¡¨ç¤ºä»€ä¹ˆï¼Ÿè‡ªå·±ç ”ç©¶manæ‰‹å†Œæ²¡ç†è§£ã€‚<br>2. å¦å¤–ï¼Œæˆ‘æ˜¯åšåˆ†å¸ƒå¼å­˜å‚¨çš„ï¼Œç”¨perfåšæ€§èƒ½åˆ†ææ—¶ï¼Œæ˜¯å¦éœ€è¦è€ƒè™‘perfæœ¬èº«å¯¹äºç¨‹åºæ€§èƒ½çš„å½±å“ï¼Ÿ","like_count":1},{"had_liked":false,"id":45969,"user_name":"æœ‰é“­","can_delete":false,"product_type":"c1","uid":1046302,"ip_address":"","ucode":"2C7CB36CA5C04C","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/3XbCueYYVWTiclv8T5tFpwiblOxLphvSZxL4ujMdqVMibZnOiaFK2C5nKRGv407iaAsrI0CDICYVQJtiaITzkjfjbvrQ/132","comment_is_top":false,"comment_ctime":1543826539,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5838793835","product_id":100020901,"comment_content":"perf top -g -p $PID<br>è¿™ä¸ªå‘½ä»¤ä½¿ç”¨åï¼ŒChildrené‚£ä¸€åˆ—æ˜¯ä»€ä¹ˆæ„æ€ï¼Œä¸ºå•¥å ç”¨ç‡æœ€é«˜çš„å’Œperf topå¯¹ä¸ä¸Šï¼Œæˆ‘çŒœæµ‹æ­¤æ—¶çš„CPUå ç”¨ç‡åº”è¯¥çœ‹æ—è¾¹çš„Selfï¼Ÿè€Œä¸”æ­¤æ—¶æ˜¯æŒ‰ç…§Childrenåˆ—æ’åºçš„ï¼Œèƒ½å¦åˆ‡æ¢åˆ°åˆ«çš„åˆ—æ’åºï¼Ÿ","like_count":1},{"had_liked":false,"id":45942,"user_name":"Ivan","can_delete":false,"product_type":"c1","uid":1316260,"ip_address":"","ucode":"3512512C0E7AAB","user_header":"https://static001.geekbang.org/account/avatar/00/14/15/a4/3744053e.jpg","comment_is_top":false,"comment_ctime":1543823394,"is_pvip":false,"replies":[{"id":"16415","content":"iowaitä¸ç®—åœ¨idleé‡Œé¢","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1543829918,"ip_address":"","comment_id":45942,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5838790690","product_id":100020901,"comment_content":"è¯·é—®iowait timeç®—åœ¨idle timeé‡Œé¢å—ï¼Ÿcpuçš„åˆ©ç”¨ç‡è®¡ç®—å…¬å¼ä¸­ç©ºé—²æ—¶é—´æŒ‡çš„æ˜¯idle timeï¼Œè¿˜æ˜¯idle+iowait timeã€‚","like_count":1,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431282,"discussion_content":"iowaitä¸ç®—åœ¨idleé‡Œé¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543829918,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1338108,"avatar":"https://static001.geekbang.org/account/avatar/00/14/6a/fc/09d2c6f7.jpg","nickname":"å‘¨å­ç„±","note":"","ucode":"952CA54619A2CE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":332146,"discussion_content":"è¿™é‡Œä½œè€…è¯´çš„ä¸å¯¹ iowaitæ˜¯idleçš„ä¸€ç§ï¼Œåœ¨linux2.5ä¹‹å‰çš„å†…æ ¸ä¸­åªæœ‰idle, åé¢æ‰æŠŠiowaitå•ç‹¬æ‹¿å‡ºæ¥ï¼Œä½†æ˜¯æœ¬è´¨æ²¡å˜ï¼Œéƒ½æ˜¯ç³»ç»Ÿç©ºé—²çš„ä¸€ç§ï¼Œidleè¡¨ç¤ºcpuæ²¡æ´»å¹²ï¼Œiowaitè¡¨ç¤ºcpuæœ‰æ´»å¹²ä½†æ˜¯æ²¡å¹²ï¼Œå› ä¸ºioè¿˜æ²¡å‡†å¤‡å¥½ã€‚cpuç¹å¿™çš„æ—¶å€™ä¸€èˆ¬ä¸ä¼šæœ‰iowait, iowaité«˜ä¹Ÿä¸èƒ½è¯´æ˜ç³»ç»Ÿä¸€å®šæœ‰é—®é¢˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607074659,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":45337,"user_name":"via","can_delete":false,"product_type":"c1","uid":1017696,"ip_address":"","ucode":"5A7E873D8D8FBE","user_header":"https://static001.geekbang.org/account/avatar/00/0f/87/60/fe8a31ea.jpg","comment_is_top":false,"comment_ctime":1543590821,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5838558117","product_id":100020901,"comment_content":"androidæ“ä½œç³»ç»Ÿæ˜¯å¦å¯ä»¥ç”¨ç±»ä¼¼çš„åŠæ³•æ’æŸ¥é—®é¢˜ï¼Ÿ","like_count":1},{"had_liked":false,"id":45280,"user_name":"Johnson","can_delete":false,"product_type":"c1","uid":1225037,"ip_address":"","ucode":"55B582953E49F3","user_header":"https://static001.geekbang.org/account/avatar/00/12/b1/4d/10c75b34.jpg","comment_is_top":false,"comment_ctime":1543575763,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5838543059","product_id":100020901,"comment_content":"ç¢°åˆ°ä¸€ä¸ªcpuåˆ©ç”¨ç‡å¾ˆä½ä½†æ˜¯loadéå¸¸é«˜çš„é—®é¢˜ï¼Œåˆ†ææ˜¯DçŠ¶æ€çš„è¿›ç¨‹å¾ˆå¤šï¼Œå¤§å¤šæ˜¯pså‘½ä»¤ï¼Œæœ‰æ²¡æœ‰æ€æ‰è¿™äº›å‘½ä»¤çš„åŠæ³•ï¼Ÿä¸èƒ½é‡å¯çš„","like_count":1,"discussions":[{"author":{"id":1479120,"avatar":"https://static001.geekbang.org/account/avatar/00/16/91/d0/35bc62b1.jpg","nickname":"æ— å’","note":"","ucode":"B9759B5646F3AB","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":586775,"discussion_content":"kill -9 [pid]","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662510685,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":45059,"user_name":"Geek_37593b","can_delete":false,"product_type":"c1","uid":1333821,"ip_address":"","ucode":"9C0CD7C30CA62C","user_header":"https://static001.geekbang.org/account/avatar/00/14/5a/3d/1a1754f2.jpg","comment_is_top":false,"comment_ctime":1543541925,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5838509221","product_id":100020901,"comment_content":"å¹²è´§æ»¡æ»¡ï¼Œéå¸¸å¥½","like_count":1},{"had_liked":false,"id":44945,"user_name":"Richie","can_delete":false,"product_type":"c1","uid":1111377,"ip_address":"","ucode":"1426E1B2E82A43","user_header":"https://static001.geekbang.org/account/avatar/00/10/f5/51/60e91438.jpg","comment_is_top":false,"comment_ctime":1543531589,"is_pvip":false,"replies":[{"id":"16000","content":"å¯ä»¥å…ˆç”¨æ–‡ä¸­çš„æ€è·¯è¯•è¯•ï¼Œå¯¹ä¸åŒçš„ç¼–ç¨‹è¯­è¨€å…¶å®è¿˜æœ‰æ›´ç»†åŒ–çš„åˆ†ææ–¹æ³•ï¼Œæˆ‘ä»¬è¿™é‡Œä¾§é‡äºä»ç³»ç»Ÿå±‚é¢ç€æ‰‹åˆ†æ","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1543537201,"ip_address":"","comment_id":44945,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5838498885","product_id":100020901,"comment_content":"è€å¸ˆï¼Œå¦‚æœæ˜¯é’ˆå¯¹tomcatè¿™ç§çº¿ç¨‹å‹çš„å¦‚ä½•æ‰¾é—®é¢˜","like_count":1,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430869,"discussion_content":"å¯ä»¥å…ˆç”¨æ–‡ä¸­çš„æ€è·¯è¯•è¯•ï¼Œå¯¹ä¸åŒçš„ç¼–ç¨‹è¯­è¨€å…¶å®è¿˜æœ‰æ›´ç»†åŒ–çš„åˆ†ææ–¹æ³•ï¼Œæˆ‘ä»¬è¿™é‡Œä¾§é‡äºä»ç³»ç»Ÿå±‚é¢ç€æ‰‹åˆ†æ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543537201,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":44943,"user_name":"Chenl07","can_delete":false,"product_type":"c1","uid":1089132,"ip_address":"","ucode":"0A0A086168A8F7","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/0FI2bUjegtznv7XPC9DB9RJaqiaMiamWkibibPOibuUC3DCvI7XMvBANr6sDjRNbc1jwPic9pIaFxrdaib88VqUJKXSTQ/132","comment_is_top":false,"comment_ctime":1543531512,"is_pvip":false,"replies":[{"id":"16001","content":"çœ‹å›¾ç‰‡é‡Œé¢ï¼Œæœ‰å„ä¸ªç¬¦å·çš„ç™¾åˆ†æ¯”","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1543537241,"ip_address":"","comment_id":44943,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5838498808","product_id":100020901,"comment_content":"è°¢è°¢è€å¸ˆçš„åˆ†äº«ï¼Œæ‚¨çš„ä¸“æ æ¯æ¬¡æ›´æ–°æˆ‘å°±ä¼šéƒ½æ˜¯åœ¨æ—©ä¸Š6ç‚¹å·¦å³å°±æ€¥ä¸å¯å¾…çš„è¦çœ‹äº†ã€‚<br>æœ‰ä¸ªç–‘é—®ï¼Œåœ¨æœ€åç¤ºä¾‹ä¸­ perf top -g -pçš„è¾“å‡ºï¼Œæ‚¨æ˜¯é€šè¿‡å“ªäº›æŒ‡æ ‡åˆ¤æ–­æ˜¯æœ‰sqrtå’Œadd functionçš„é—®é¢˜ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430868,"discussion_content":"çœ‹å›¾ç‰‡é‡Œé¢ï¼Œæœ‰å„ä¸ªç¬¦å·çš„ç™¾åˆ†æ¯”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543537241,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":359457,"user_name":"Geek_e2b0f9","can_delete":false,"product_type":"c1","uid":1602650,"ip_address":"åŒ—äº¬","ucode":"CAB31078DDB515","user_header":"","comment_is_top":false,"comment_ctime":1665554803,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1665554803","product_id":100020901,"comment_content":"å®é™…å·¥ä½œä¸­ä½¿ç”¨topå‘½ä»¤ è¿›ç¨‹çŠ¶æ€æ˜¯S ä½†æ˜¯%cpuå¾ˆé«˜ è¿™æ˜¯æ€ä¹ˆå›äº‹","like_count":0},{"had_liked":false,"id":358539,"user_name":"æ–Œå­","can_delete":false,"product_type":"c1","uid":1305393,"ip_address":"åŒ—äº¬","ucode":"602804C685CFAE","user_header":"https://static001.geekbang.org/account/avatar/00/13/eb/31/2768a6a1.jpg","comment_is_top":false,"comment_ctime":1664419054,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1664419054","product_id":100020901,"comment_content":"dockeré‡Œé¢å®‰è£…perfæŠ¥é”™å‘¢<br>root@9a5f323702a2:&#47;tmp# apt-get install -y linux-perf linux-tools procps<br>Reading package lists... Done<br>Building dependency tree       <br>Reading state information... Done<br>E: Unable to locate package linux-perf<br>E: Unable to locate package linux-tools<br>","like_count":0},{"had_liked":false,"id":356860,"user_name":"æˆä¸ºä¼˜ç§€çš„ç¨‹åºå‘˜","can_delete":false,"product_type":"c1","uid":2275516,"ip_address":"å¹¿ä¸œ","ucode":"6D9080A2B225AE","user_header":"https://static001.geekbang.org/account/avatar/00/22/b8/bc/d2d547c9.jpg","comment_is_top":false,"comment_ctime":1662647137,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1662647137","product_id":100020901,"comment_content":"WSL2 å®‰è£…perfæ–¹å¼ï¼šhttps:&#47;&#47;blog.csdn.net&#47;qq_20452055&#47;article&#47;details&#47;108300321","like_count":0},{"had_liked":false,"id":354261,"user_name":"æµå¹´ä¼¼æ°´","can_delete":false,"product_type":"c1","uid":1105816,"ip_address":"æ±Ÿè‹","ucode":"048D320AFB576A","user_header":"https://static001.geekbang.org/account/avatar/00/10/df/98/670d96c0.jpg","comment_is_top":false,"comment_ctime":1660224960,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"1660224960","product_id":100020901,"comment_content":"phpæ˜¯è„šæœ¬è¯­è¨€ï¼Œä¸ºä»€ä¹ˆèƒ½å¤Ÿåˆ†æåˆ°phpçš„è°ƒç”¨æ ˆ","like_count":0,"discussions":[{"author":{"id":1479120,"avatar":"https://static001.geekbang.org/account/avatar/00/16/91/d0/35bc62b1.jpg","nickname":"æ— å’","note":"","ucode":"B9759B5646F3AB","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":586776,"discussion_content":"æ‰€æœ‰ç¼–ç¨‹è¯­è¨€éƒ½æœ‰è°ƒç”¨æ ˆã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662510762,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":351269,"user_name":"Geek_f93234","can_delete":false,"product_type":"c1","uid":1769504,"ip_address":"","ucode":"1E5DC903A5429E","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJGXndj5N66z9BL1ic9GibZzWWgoVeWaWTL2XUnCYic7iba2kAEvN9WfjmlXELD5lqt8IJ1P023N5ZWicg/132","comment_is_top":false,"comment_ctime":1657665952,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"1657665952","product_id":100020901,"comment_content":"day5","like_count":0},{"had_liked":false,"id":347429,"user_name":"Geek_ç‰§é©¬äºº","can_delete":false,"product_type":"c1","uid":1844881,"ip_address":"","ucode":"F26A43AF9C5164","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoxLCjetepOZibacqBnhoibSlgGxAribic2AJPicVEic7M7DAFfuuJ7QvTXpiawO06tFdSpdnARibSVZ5R7Kg/132","comment_is_top":false,"comment_ctime":1654007470,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1654007470","product_id":100020901,"comment_content":"1.è¯¾ç¨‹æ²¡æœ‰è§†é¢‘å—ï¼Ÿ<br>2.è¯¾ç¨‹ä¸­dockeré•œåƒè®¿é—®éƒ½æ˜¯è¶…æ—¶ï¼Œæœ‰ä»€ä¹ˆå¥½çš„è§£å†³æ–¹æ¡ˆå—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1069269,"avatar":"https://static001.geekbang.org/account/avatar/00/10/50/d5/73334a95.jpg","nickname":"doos","note":"","ucode":"7C9AF67F90E65C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":578808,"discussion_content":"é‚£ä½ åˆ‡æ¢é•œåƒåŠ é€Ÿå™¨ä¸ºé˜¿é‡Œäº‘å°±å¿«äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657023991,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":342226,"user_name":"Peter","can_delete":false,"product_type":"c1","uid":2425556,"ip_address":"","ucode":"5E57A0FE948966","user_header":"https://static001.geekbang.org/account/avatar/00/25/02/d4/1e0bb504.jpg","comment_is_top":false,"comment_ctime":1650113240,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1650113240","product_id":100020901,"comment_content":"perf top -g -p 21515  è¿™ä¸ªè¿›ç¨‹çš„å¯æ‰§è¡Œç¨‹åºéœ€è¦åŠ -g å°±æ˜¯æœ‰ç¬¦å·è¡¨çš„ç¼–è¯‘çš„å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":342089,"user_name":"çˆ±ä¸½åŒ…Â°","can_delete":false,"product_type":"c1","uid":2535283,"ip_address":"","ucode":"125325E82EE6D2","user_header":"https://static001.geekbang.org/account/avatar/00/26/af/73/6bc60f7a.jpg","comment_is_top":false,"comment_ctime":1650011233,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1650011233","product_id":100020901,"comment_content":"centOS 7.3æ‰§è¡Œå‘½ä»¤perf reportæç¤º<br> Kernel address maps (&#47;proc&#47;{kallsyms,modules}) were restricted.   â”‚<br>â”‚                                                                  â”‚<br>â”‚Check &#47;proc&#47;sys&#47;kernel&#47;kptr_restrict before running &#39;perf record&#39;.â”‚<br>â”‚                                                                  â”‚<br>â”‚As no suitable kallsyms nor vmlinux was found, kernel samples     â”‚<br>â”‚can&#39;t be resolved.                                                â”‚<br>â”‚                                                                  â”‚<br>â”‚Samples in kernel modules can&#39;t be resolved as well.              â”‚<br>â”‚                                                                  â”‚<br>â”‚                                                                  â”‚<br>â”‚                                                                  â”‚<br>â”‚Press any key... ","like_count":0},{"had_liked":false,"id":340750,"user_name":"Geek_278a2c","can_delete":false,"product_type":"c1","uid":2379572,"ip_address":"","ucode":"7EC0366896F0E6","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/zWLzhGrHubcMJnNFz0s0akeMpefNBVy2jic3rxetxHIjy1icPjJBXFQc78AW10icVN47BLrWicHcSm9MOfG38J2kKw/132","comment_is_top":false,"comment_ctime":1649117896,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1649117896","product_id":100020901,"comment_content":"æ˜¯ä¸€ä¸ªè™šæ‹Ÿæœº2c8gï¼Œè¿˜æ˜¯ä¸¤ä¸ªè™šæ‹Ÿæœºæ¯ä¸ªéƒ½æ˜¯1c4gï¼Ÿ","like_count":0},{"had_liked":false,"id":333330,"user_name":"Geek_e34cf7","can_delete":false,"product_type":"c1","uid":2635949,"ip_address":"","ucode":"A8570339DA03D1","user_header":"","comment_is_top":false,"comment_ctime":1644291934,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1644291934","product_id":100020901,"comment_content":"dockeré•œåƒä¸ºä½•çš„é“¾æ¥ä¸ºä½•è¿›ä¸å»<br>","like_count":0},{"had_liked":false,"id":328713,"user_name":"å°åŒ—","can_delete":false,"product_type":"c1","uid":1282648,"ip_address":"","ucode":"3A23079E4AA92E","user_header":"https://static001.geekbang.org/account/avatar/00/13/92/58/b4f6365d.jpg","comment_is_top":false,"comment_ctime":1640851612,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1640851612","product_id":100020901,"comment_content":"k8s é‡Œé¢ perf top æ²¡æƒé™ï¼Œæç¤ºè¦ä¿®æ”¹ç¯å¢ƒå˜é‡ kernel.perf_event_paranoid= -1 ï¼Œä½†æ˜¯åœ¨å®¹å™¨é‡Œé¢ä¿®æ”¹ä¸äº†Â·Â·Â·Â·æœ‰å•¥åŠæ³•å—ï¼Ÿçº¿ä¸Šçš„é›†ç¾¤èŠ‚ç‚¹ï¼Œåº”è¯¥ä¸è®©æˆ‘æ”¹å®¿ä¸»æœºçš„Â·Â·Â·","like_count":0},{"had_liked":false,"id":328712,"user_name":"å°åŒ—","can_delete":false,"product_type":"c1","uid":1282648,"ip_address":"","ucode":"3A23079E4AA92E","user_header":"https://static001.geekbang.org/account/avatar/00/13/92/58/b4f6365d.jpg","comment_is_top":false,"comment_ctime":1640851539,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1640851539","product_id":100020901,"comment_content":"è€å¸ˆï¼Œæˆ‘ä»¬æœåŠ¡éƒ¨ç½²åœ¨ k8s é‡Œï¼Œä¸€å…±2ä¸ªpod, ç›®å‰å‡ºç°äº†2æ¬¡æœ‰ä¸€ä¸ªpod cpu æ¶¨åˆ° 100%ï¼Œä½†æ˜¯å¦å¤–ä¸€ä¸ªæ˜¯æ­£å¸¸çš„ï¼Œè€Œä¸”2ä¸ªpodæµé‡ä¹Ÿå·®ä¸å¤š, è¿™ç§æƒ…å†µä¼šæ˜¯ä»€ä¹ˆé—®é¢˜é€ æˆçš„å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":327359,"user_name":"Geek_70c53a","can_delete":false,"product_type":"c1","uid":2295078,"ip_address":"","ucode":"9BD4E96E3974D5","user_header":"","comment_is_top":false,"comment_ctime":1640081515,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1640081515","product_id":100020901,"comment_content":"ä½ ä»¬æ˜¯æ€ä¹ˆæŠŠgithubä¸­çš„é•œåƒï¼Œé€šè¿‡dockeræ‹‰å–åˆ°æœ¬åœ°çš„å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1069269,"avatar":"https://static001.geekbang.org/account/avatar/00/10/50/d5/73334a95.jpg","nickname":"doos","note":"","ucode":"7C9AF67F90E65C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":578809,"discussion_content":"docker pull é•œåƒåå­— æ‹‰å–ä¸‹æ¥çš„æˆ–è€…æ˜¯ä½ è‡ªå·±åˆ›å»ºä¸€ä¸ªå®¹å™¨æŠŠé‡Œé¢çš„å†…å®¹å¤åˆ¶è¿›è¡Œç¼–è¯‘ä¸€ä¸‹ä¹Ÿå¯ä»¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657024104,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":321945,"user_name":"gecko","can_delete":false,"product_type":"c1","uid":1198048,"ip_address":"","ucode":"2B7122536F1A0E","user_header":"https://static001.geekbang.org/account/avatar/00/12/47/e0/1ff26e99.jpg","comment_is_top":false,"comment_ctime":1637114451,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1637114451","product_id":100020901,"comment_content":"Ubuntu 20 å®‰è£…perf<br><br>------------<br>cat &#47;etc&#47;issue<br>Ubuntu 20.04.1 LTS \\n \\l<br><br>---------------<br>apt-get install  linux-tools-common -y<br><br>------------<br>perf top<br>---------------------------------<br>WARNING: perf not found for kernel 5.11.0-25<br><br>  You may need to install the following packages for this specific kernel:<br>    linux-tools-5.11.0-25-generic<br>    linux-cloud-tools-5.11.0-25-generic<br><br>  You may also want to install one of the following packages to keep up to date:<br>    linux-tools-generic<br>    linux-cloud-tools-generic<br><br>------------------------<br>root:~# uname  -r<br>5.11.0-25-generic<br><br>------------------------<br>apt-get install linux-tools-5.11.0-25-generic  linux-cloud-tools-5.11.0-25-generic -y<br><br>-------<br>","like_count":0},{"had_liked":false,"id":318730,"user_name":"ğŸ‰æ™¶æ™¶ğŸ‰ğŸ˜„","can_delete":false,"product_type":"c1","uid":1169422,"ip_address":"","ucode":"76B608C42E06A8","user_header":"https://static001.geekbang.org/account/avatar/00/11/d8/0e/1bf7f57a.jpg","comment_is_top":false,"comment_ctime":1635406068,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1635406068","product_id":100020901,"comment_content":"æŒ‰æ–¹å‘é”®åˆ‡æ¢åˆ° php-fpmï¼Œå†æŒ‰ä¸‹å›è½¦é”®å±•å¼€ php-fpm çš„è°ƒç”¨å…³ç³»   -----  æ–¹å‘é”®å¥½åƒé€‰ä¸äº†ï¼Œæ— æ³•å±•å¼€è°ƒç”¨å…³ç³»","like_count":0},{"had_liked":false,"id":318300,"user_name":"èŠ±å­ç¿","can_delete":false,"product_type":"c1","uid":1073674,"ip_address":"","ucode":"A687441DC6894F","user_header":"https://static001.geekbang.org/account/avatar/00/10/62/0a/26d00cb9.jpg","comment_is_top":false,"comment_ctime":1635236018,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1635236018","product_id":100020901,"comment_content":"è¯·é—®è¿™ä¸€å¥—æ€§èƒ½é—®é¢˜çš„è¿½è¸ªæµç¨‹å¯¹javaç¨‹åºæœ‰æ•ˆå—","like_count":0},{"had_liked":false,"id":317327,"user_name":"å¤æœˆå¼“è™½1993","can_delete":false,"product_type":"c1","uid":1237500,"ip_address":"","ucode":"86122CC701F02A","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI3jSpV7VvK6NaUH6X1LNYWGsQdFSTu4SwTZ0nQlSYGTOY2FrDCcMic9qFXnu2ZGR88hBlUQK28Whg/132","comment_is_top":false,"comment_ctime":1634741882,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1634741882","product_id":100020901,"comment_content":"curl http:&#47;&#47;192.168.0.10:10000&#47; åœ¨ç»ˆç«¯é‡Œä¸€ç›´æ²¡æœ‰ååº”ï¼Œä¹Ÿä¸æŠ¥é”™ã€‚è¿™æ˜¯ä»€ä¹ˆåŸå› å‘¢","like_count":0},{"had_liked":false,"id":316815,"user_name":"bocai","can_delete":false,"product_type":"c1","uid":2815342,"ip_address":"","ucode":"5598DE77416752","user_header":"https://static001.geekbang.org/account/avatar/00/2a/f5/6e/829cbbb8.jpg","comment_is_top":false,"comment_ctime":1634555912,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1634555912","product_id":100020901,"comment_content":"å¾ˆä¸“ä¸šï¼Œç‚¹èµã€‚","like_count":0},{"had_liked":false,"id":315394,"user_name":"æ¸…æ°´","can_delete":false,"product_type":"c1","uid":2559543,"ip_address":"","ucode":"D25F83AA62FD70","user_header":"","comment_is_top":false,"comment_ctime":1633876821,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1633876821","product_id":100020901,"comment_content":"æœ‰ç‚¹æ‡µï¼Œtopçš„%waå’Œpidstatçš„%waitæ˜¯ä¸€æ ·å—ï¼Ÿçœ‹æè¿°ï¼Œå‰è€…æ˜¯ç­‰é˜Ÿåˆ—ï¼Œåé¢æ˜¯ç­‰cpuï¼Œæ„Ÿè§‰æ˜¯ä¸ä¸€æ ·çš„ï¼Œè¿˜æœ‰mpstatçš„%iowatæ˜¯ç­‰å¾…ioæ—¶é—´ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1069269,"avatar":"https://static001.geekbang.org/account/avatar/00/10/50/d5/73334a95.jpg","nickname":"doos","note":"","ucode":"7C9AF67F90E65C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":578812,"discussion_content":"man top\nwa, IO-wait : time waiting for I/O completion.\n\nman vmstat\nwa: Time spent waiting for IO.  Prior to Linux 2.5.41, included in idle.\n\nman mpstat\n%iowait\n    Show the percentage of time that the CPU or CPUs were idle during which the system had an outstanding disk I/O request.\n\nman iostat\n%iowait\n    Show the percentage of time that the CPU or CPUs were idle during which the system had an outstanding disk I/O request.\n\nman sar\n %iowait\n    Percentage of time that the CPU or CPUs were idle during which the system had an outstanding disk I/O request.\n\nçœ‹çœ‹è¿™ä¸ª\n\nå¤§æ¦‚çš„æ„æ€æ˜¯iowaitå’Œidleéƒ½æ˜¯cpuç©ºé—²ç™¾åˆ†æ¯”ï¼ŒåŒºåˆ«å°±æ˜¯iowaitæ˜¯æœ‰ioçš„æ“ä½œä½†æ˜¯cpuæ˜¯ç©ºé—²çš„ï¼Œidleå°±æ˜¯ç³»ç»Ÿæ²¡æœ‰ä»»ä½•æ“ä½œçš„ç©ºé—²ç™¾åˆ†æ¯”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657024725,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":312866,"user_name":"å®å…¸","can_delete":false,"product_type":"c1","uid":2616028,"ip_address":"","ucode":"63953F36596C28","user_header":"https://static001.geekbang.org/account/avatar/00/27/ea/dc/aa699264.jpg","comment_is_top":false,"comment_ctime":1632067504,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1632067504","product_id":100020901,"comment_content":"åœ¨ä¸€å°è™šæ‹Ÿæœºæ‰§è¡Œ<br>docker run --name nginx -p 10000:80 -itd feisky&#47;nginx<br>docker run --name phpfpm -itd --network container:nginx feisky&#47;php-fpm<br><br>åœ¨å¦ä¸€ä¸ªè™šæ‹Ÿæœºçš„ç»ˆç«¯å‡ºç°ä»¥ä¸‹é—®é¢˜ï¼š<br>david@ubuntu:~$ curl http:&#47;&#47;192.168.221.132:10000&#47;<br>curl: (7) Failed to connect to 192.168.221.132 port 10000: Connection timed out<br><br>æŸ¥çœ‹å®¹å™¨çŠ¶æ€ï¼š<br>docker container ls<br>CONTAINER ID   IMAGE                COMMAND                  CREATED          STATUS          PORTS                   NAMES<br>0f82db2a0e99   feisky&#47;php-fpm:cpu   &quot;php-fpm -F --pid &#47;oâ€¦&quot;   12 minutes ago   Up 12 minutes                           phpfpm<br>611d823e64b3   feisky&#47;nginx:cpu     &quot;&#47;docker-entrypoint.â€¦&quot;   12 minutes ago   Up 12 minutes   0.0.0.0:10000-&gt;80&#47;tcp   nginx<br><br>æŸ¥çœ‹ç½‘ç»œçŠ¶æ€ï¼š<br># docker network ls<br>NETWORK ID     NAME            DRIVER    SCOPE<br>d0ad56eca35c   bridge          bridge    local<br>f9e2293668ba   cloud-lab-net   bridge    local<br>1861c1766290   host            host      local<br>b08ffa201a5c   none            null      local<br><br>è¯·é—®æ˜¯ä»€ä¹ˆåŸå› å¯¼è‡´çš„ï¼Ÿ","like_count":0},{"had_liked":false,"id":312523,"user_name":"é‚µå¸…","can_delete":false,"product_type":"c1","uid":1207488,"ip_address":"","ucode":"EB662C972CC248","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/gLC1Z8lYdWPHquZbJCf5FfIDgOJKiapygoyNrl4b5fkibyV2LBnCKV5BjRAYOhPGJxL425rIdSVnibTMEg012S9Pg/132","comment_is_top":false,"comment_ctime":1631848331,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1631848331","product_id":100020901,"comment_content":"å¦‚æœCONFIG_HZæ˜¯250ï¼Œé‚£ä¹ˆä½¿ç”¨vmstatçœ‹åˆ°çš„ä¸­æ–­åº”è¯¥è‡³å°‘æ˜¯250ï¼Œä½†ä¸ºä»€ä¹ˆæ²¡æœ‰é‚£ä¹ˆå¤§å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":303034,"user_name":"é˜¿é¼","can_delete":false,"product_type":"c1","uid":1042634,"ip_address":"","ucode":"EE763513563F50","user_header":"https://static001.geekbang.org/account/avatar/00/0f/e8/ca/2a7cc193.jpg","comment_is_top":false,"comment_ctime":1626531228,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1626531228","product_id":100020901,"comment_content":"è€å¸ˆï¼Œæˆ‘æƒ³perfä¸€ä¸‹ç›®æ ‡è¿›ç¨‹ï¼Œä½†æ˜¯æ€»æ˜¯æŠ¥é”™ ï¼Œå…¶ä»–è¿›ç¨‹å¯ä»¥æ­£å¸¸perfã€‚æˆ‘googleäº†ä¸€ä¸‹ï¼Œå¯èƒ½è¿›ç¨‹æ¯”è¾ƒé‡ï¼Œçº¿ç¨‹æ•°é‡å’Œå†…å­˜éƒ½æ¯”è¾ƒå¤§ï¼Œä½†æ²¡æœ‰è§£å†³æ–¹æ³•ã€‚è¯·é—®å¦‚ä½•perfæ¯”è¾ƒé‡çš„è¿›ç¨‹ï¼Ÿ","like_count":0},{"had_liked":false,"id":300019,"user_name":"Geek_8c2731","can_delete":false,"product_type":"c1","uid":1928194,"ip_address":"","ucode":"A87F938209D65A","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJkGGBK46EQpqE6zWCncMs14Jw95s191Y6pk3x3gQpNrvSc2YWoFEgUxmJWicibGp7XsFFKaZxuTSnA/132","comment_is_top":false,"comment_ctime":1624956843,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1624956843","product_id":100020901,"comment_content":"perfå·¥å…·åˆ†æçƒ­ç‚¹å‡½æ•°å¯¹pythonå’Œjavaæ”¯æŒå¥½åƒä¸æ˜¯å¤ªå‹å¥½å•Šã€‚éƒ½æ˜¯ç³»ç»Ÿè°ƒç”¨çš„å‡½æ•°ï¼Œæ²¡æœ‰ç”¨æˆ·å‡½æ•°","like_count":0},{"had_liked":false,"id":296018,"user_name":"Geek_79d7c1","can_delete":false,"product_type":"c1","uid":2644096,"ip_address":"","ucode":"809544988E5F09","user_header":"","comment_is_top":false,"comment_ctime":1622706717,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1622706717","product_id":100020901,"comment_content":"å¦‚æœæœ‰äººä½¿ç”¨abå‘½ä»¤é‡åˆ°äº†apr_socket_recv: Transport endpoint is not connected (107)é”™è¯¯ï¼Œæ˜¯å› ä¸ºå†…æ ¸ä¼šè®¤ä¸ºç³»ç»Ÿå—åˆ°äº†SYN floodæ”»å‡»ï¼Œä½¿ç”¨vim &#47;etc&#47;sysctl.conf å°†net.ipv4.tcp_syncookies = 0å³å¯","like_count":0},{"had_liked":false,"id":294814,"user_name":"beyonddream","can_delete":false,"product_type":"c1","uid":2634698,"ip_address":"","ucode":"164A5C373AAE92","user_header":"https://static001.geekbang.org/account/avatar/00/28/33/ca/74100c96.jpg","comment_is_top":false,"comment_ctime":1622099722,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1622099722","product_id":100020901,"comment_content":"è€å¸ˆ åœ¨æˆ‘çš„ç¯å¢ƒä¸Šæœ‰å¤šä¸ªCPUï¼Œ æœ‰å¤šä¸ªphp-fpmè¿›ç¨‹çš„å æœ‰ç‡éƒ½å¾ˆé«˜ï¼Œæ€ä¹ˆé€‰æ‹©æ˜¯å“ªä¸ªå‘¢ï¼Ÿ<br>è¿˜æœ‰<br>  Children      Self  Command          Shared Object             Symbol<br>+   97.75%     0.00%  php-fpm          [unknown]                 [k] 0x41fd89415541f689<br>+   97.75%     0.00%  php-fpm          libc-2.28.so              [.] __libc_start_main<br>+   97.65%     0.00%  php-fpm          php-fpm                   [.] 0x000055f079497697<br>+   97.65%     0.00%  php-fpm          php-fpm                   [.] php_execute_script<br>+   97.65%     0.00%  php-fpm          php-fpm                   [.] zend_execute_scripts<br>+   97.64%     0.00%  php-fpm          php-fpm                   [.] zend_execute<br>+   96.97%    52.52%  php-fpm          php-fpm                   [.] execute_ex<br>+   11.94%    11.30%  php-fpm          php-fpm                   [.] add_function<br>+   11.26%     0.00%  php-fpm          php-fpm                   [.] 0x000055f07944a405<br><br>å¾ˆå¤šsymbolçš„å æœ‰ç‡éƒ½å¾ˆé«˜æ€ä¹ˆç¡®å®šæ˜¯å“ªä¸ªlå‘¢ï¼Ÿ<br>","like_count":0},{"had_liked":false,"id":294001,"user_name":"Geek1173","can_delete":false,"product_type":"c1","uid":1732366,"ip_address":"","ucode":"865F0E493E7EDC","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEKkFvuiaEntOvrP5Pv2CSBiayjRULB7QdoaDeozRl4hhSbWSP9flNhHu1lPCwM1Yg22bGyEI5iaIS3icQ/132","comment_is_top":false,"comment_ctime":1621674403,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1621674403","product_id":100020901,"comment_content":"ç¢°åˆ° CPU ä½¿ç”¨ç‡å‡é«˜çš„é—®é¢˜ï¼Œä½ å¯ä»¥å€ŸåŠ© topã€pidstat ç­‰å·¥å…·ï¼Œç¡®è®¤å¼•å‘ CPU æ€§èƒ½é—®é¢˜çš„æ¥æºï¼›å†ä½¿ç”¨ perf ç­‰å·¥å…·ï¼Œæ’æŸ¥å‡ºå¼•èµ·æ€§èƒ½é—®é¢˜çš„å…·ä½“å‡½æ•°ã€‚","like_count":0},{"had_liked":false,"id":292306,"user_name":"ç–¯äºº","can_delete":false,"product_type":"c1","uid":1586002,"ip_address":"","ucode":"D1B28ED5FFE9A9","user_header":"https://static001.geekbang.org/account/avatar/00/18/33/52/77516e4c.jpg","comment_is_top":false,"comment_ctime":1620780031,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1620780031","product_id":100020901,"comment_content":"CPUä½¿ç”¨ç‡ ä¸»è¦è§‚å¯Ÿsyå’Œus å°±å¥½äº†å§","like_count":0},{"had_liked":false,"id":287754,"user_name":"æ¸…æ°´","can_delete":false,"product_type":"c1","uid":2559543,"ip_address":"","ucode":"D25F83AA62FD70","user_header":"","comment_is_top":false,"comment_ctime":1618133817,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1618133817","product_id":100020901,"comment_content":"perf top -g -p  pid è¿›å…¥çš„é¡µé¢ï¼Œé‡‡æ ·çš„æ˜¯è¿™ä¸ªpidä¸‹çš„æ‰€æœ‰çº¿ç¨‹ï¼Ÿ","like_count":0},{"had_liked":false,"id":286441,"user_name":"ç«¹å½±","can_delete":false,"product_type":"c1","uid":1211289,"ip_address":"","ucode":"182FC1A9ECBEF3","user_header":"https://static001.geekbang.org/account/avatar/00/12/7b/99/4f5857a8.jpg","comment_is_top":false,"comment_ctime":1617322621,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1617322621","product_id":100020901,"comment_content":"perfå‘½ä»¤é»˜è®¤å¥½åƒåœ¨&#47;usr&#47;binè·¯å¾„ä¸‹çš„å§ï¼Œrpm -qlçœ‹ä¸€ä¸‹kernel-toolå®‰è£…çš„perfå‘½ä»¤åœ¨å“ªï¼Œç”¨æ‰¾åˆ°çš„è¿™ä¸ªå‘½ä»¤","like_count":0},{"had_liked":false,"id":286066,"user_name":"è°¨å…®è°¨å…®","can_delete":false,"product_type":"c1","uid":1376885,"ip_address":"","ucode":"55712DD3852169","user_header":"https://static001.geekbang.org/account/avatar/00/15/02/75/2839c0bb.jpg","comment_is_top":false,"comment_ctime":1617149635,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1617149635","product_id":100020901,"comment_content":"top ç¡®å®šè¿›ç¨‹ perf topç¡®å®šå‡½æ•° è¿›ä¸€æ­¥å¯ä»¥åˆ†ææºç ï¼Œ ä½†æ˜¯åªé™äºæ˜¯è¿›ç¨‹å ç”¨å¯¼è‡´çš„é«˜è´Ÿè½½ï¼Œé«˜cpuåˆ©ç”¨ç‡","like_count":0},{"had_liked":false,"id":284553,"user_name":"å°æºå“¥","can_delete":false,"product_type":"c1","uid":1730754,"ip_address":"","ucode":"B5130CE20CF31D","user_header":"https://static001.geekbang.org/account/avatar/00/1a/68/c2/b112da90.jpg","comment_is_top":false,"comment_ctime":1616334127,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1616334127","product_id":100020901,"comment_content":"è€å¸ˆï¼Œ&#47;proc&#47;staté‡ŒuseråŒ…æ‹¬guestå’Œguest_niceå¾—æ—¶é—´å—","like_count":0},{"had_liked":false,"id":280870,"user_name":"geek","can_delete":false,"product_type":"c1","uid":2401422,"ip_address":"","ucode":"FF0845140D72A9","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/NyFOEueITjaGLpakMEuWAqVQjo1uDIXlpDdpCxXGfaWiaXzibLQ3WgOFCe8D9FvCmyjsGT7jDsLUbkt8jt2aVs9g/132","comment_is_top":false,"comment_ctime":1614432622,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1614432622","product_id":100020901,"comment_content":"è€å¸ˆï¼Œæˆ‘ç”¨çš„æ˜¯centosè™šæ‹Ÿæœºï¼Œå†™äº†ä¸€æ®µpythonä»£ç ç”¨æ¥æµ‹è¯•ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªå‡½æ•°testLoopï¼š<br>def testLoop():<br>    sum = 1<br>    while sum == 1:<br>        sum = 1<br>ä¸ºä»€ä¹ˆç”¨perf top -g -p xxxåˆ†æçš„ç¬¦å·æ²¡æœ‰testLoopå‘¢ï¼Ÿåªèƒ½çœ‹åˆ°_PyEval_EvalFrameDefault","like_count":0},{"had_liked":false,"id":272091,"user_name":"é²å®å®¾","can_delete":false,"product_type":"c1","uid":2067429,"ip_address":"","ucode":"36CA8ABC6C9A62","user_header":"https://static001.geekbang.org/account/avatar/00/1f/8b/e5/4912a91b.jpg","comment_is_top":false,"comment_ctime":1609931474,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1609931474","product_id":100020901,"comment_content":"è€å¸ˆï¼Œè¯·é—®åŠ å…¥CPUåˆ©ç”¨ç‡æ˜¯10%ï¼Œ30%ï¼Œ50%ï¼Œ70%ï¼Œ 100%ï¼Œæ€ä¹ˆè¯„ä¼°æ˜¯å¦åˆç†ï¼Œæˆ–è€…æœ‰æ€§èƒ½ç“¶é¢ˆï¼Ÿ","like_count":0},{"had_liked":false,"id":269360,"user_name":"wwf","can_delete":false,"product_type":"c1","uid":2233930,"ip_address":"","ucode":"78635E4B1E9C8A","user_header":"https://static001.geekbang.org/account/avatar/00/22/16/4a/05ff2b5c.jpg","comment_is_top":false,"comment_ctime":1608623522,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1608623522","product_id":100020901,"comment_content":"è½¯ä¸­æ–­å’Œç¡¬ä¸­æ–­è¿™å—æ€ä¹ˆæ’æŸ¥ è€å¸ˆæœ‰å®æˆ˜æ¡ˆä¾‹å—","like_count":0},{"had_liked":false,"id":263995,"user_name":"ä¼šé£çš„é±¼","can_delete":false,"product_type":"c1","uid":1567083,"ip_address":"","ucode":"82E83A7F2F9123","user_header":"https://static001.geekbang.org/account/avatar/00/17/e9/6b/a52282b8.jpg","comment_is_top":false,"comment_ctime":1606309415,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1606309415","product_id":100020901,"comment_content":"è€å¸ˆå¥½ï¼Œæˆ‘çš„æœåŠ¡å™¨å†…æ ¸ç©ºé—´çš„cpuä½¿ç”¨ç‡è¾¾åˆ°äº†100%ï¼Œé‡å¯äº†å‡ æ¬¡ä¾ç„¶æ²¡æœ‰è§£å†³ï¼Œç„¶åæˆ‘ç”¨topæŸ¥çœ‹ï¼Œæ²¡æœ‰å‘ç°cpuå ç”¨å¾ˆé«˜çš„è¿›ç¨‹ï¼Œç”¨execsnoopä¹Ÿæ²¡å‘ç°å¼‚å¸¸ï¼Œç„¶åç”¨pidstat -wæŸ¥çœ‹ï¼Œå‘ç°rcu_schedçš„ä¸Šä¸‹æ–‡åˆ‡æ¢å¾ˆé¢‘ç¹ï¼Œè€Œä¸”æ˜¯è‡ªæ„¿ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œç„¶åæˆ‘å†ç”¨perf top -g -p 9è¿½è¸ªï¼Œå‘ç°æœ‰å¾ˆå¤šç³»ç»Ÿè°ƒç”¨ï¼Œè¿™ç§æƒ…å†µæ€ä¹ˆè¿›ä¸€æ­¥è§£å†³å‘¢ï¼Ÿ å¯ä»¥åŠ æ‚¨å¾®ä¿¡è¿›ä¸€æ­¥æ±‚æ•™ä¸‹å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":255282,"user_name":"ä¸€ç²’","can_delete":false,"product_type":"c1","uid":1582813,"ip_address":"","ucode":"FB5F583CC6AE3C","user_header":"https://static001.geekbang.org/account/avatar/00/18/26/dd/d58156b1.jpg","comment_is_top":false,"comment_ctime":1603293347,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1603293347","product_id":100020901,"comment_content":"è¿™å‡ èŠ‚è¯¾çš„å†…å®¹éƒ½å’Œæ“ä½œç³»ç»ŸåŸç†å…³è”èµ·æ¥äº†ï¼Œå¯ä»¥ä½œä¸ºå­¦ä¹ æ“ä½œç³»ç»Ÿçš„å®è·µè¯¾","like_count":0},{"had_liked":false,"id":255263,"user_name":"ä¸€ç²’","can_delete":false,"product_type":"c1","uid":1582813,"ip_address":"","ucode":"FB5F583CC6AE3C","user_header":"https://static001.geekbang.org/account/avatar/00/18/26/dd/d58156b1.jpg","comment_is_top":false,"comment_ctime":1603291781,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1603291781","product_id":100020901,"comment_content":"è€å¸ˆï¼Œç”¨æˆ·ç©ºé—´çš„æ—¶é’Ÿé¢‘ç‡å°äºå†…æ ¸ç©ºé—´çš„ï¼Œæ˜¯å› ä¸ºä¸€èˆ¬ç”¨æˆ·ç©ºé—´çš„è¿›ç¨‹ä¼šå°äºåœ¨å†…æ ¸ç©ºé—´è¿è¡Œçš„è¿›ç¨‹å—","like_count":0},{"had_liked":false,"id":254403,"user_name":"14155084066","can_delete":false,"product_type":"c1","uid":2245375,"ip_address":"","ucode":"EF5BFE8773578C","user_header":"https://static001.geekbang.org/account/avatar/00/22/42/ff/2a067d5d.jpg","comment_is_top":false,"comment_ctime":1603111613,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1603111613","product_id":100020901,"comment_content":"perfå¾ˆå¥½","like_count":0},{"had_liked":false,"id":254265,"user_name":"äº‘éŸµ","can_delete":false,"product_type":"c1","uid":1025622,"ip_address":"","ucode":"3DE26DBAAAEDE6","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a6/56/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1603093833,"is_pvip":true,"discussion_count":0,"race_medal":1,"score":"1603093833","product_id":100020901,"comment_content":"è€å¸ˆï¼Œâ€œcurl http:&#47;&#47;192.168.0.10:10000&#47;â€ è¿™ä¸ªåœ°å€æ€ä¹ˆçœ‹","like_count":0},{"had_liked":false,"id":253498,"user_name":"Geek_f702be","can_delete":false,"product_type":"c1","uid":1143067,"ip_address":"","ucode":"8E3B5F393C4266","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epumnXjMLYzHkGFhAraIiaAMXpotuUR9PCexBWl25tRLFAvpzs03Hfse4Y1lyeWuryz6z80Fd8AXiaw/132","comment_is_top":false,"comment_ctime":1602754722,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1602754722","product_id":100020901,"comment_content":"æ‰“å¡<br>cpuä½¿ç”¨ç‡å«ä¹‰åŠä¸ªå­—æ®µå«ä¹‰<br>é€šè¿‡topã€pidstatç¡®å®šè¿›ç¨‹å¯¼è‡´cpué—®é¢˜åå¯ä»¥ç”¨perfå·¥å…·åˆ†æåº”ç”¨é‚£ä¸ªå‡½æ•°è°ƒç”¨å‡ºé—®é¢˜","like_count":0},{"had_liked":false,"id":253402,"user_name":"éƒ‘æ–Œ","can_delete":false,"product_type":"c1","uid":2224641,"ip_address":"","ucode":"E253447BAB1E23","user_header":"https://static001.geekbang.org/account/avatar/00/21/f2/01/80521228.jpg","comment_is_top":false,"comment_ctime":1602728171,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1602728171","product_id":100020901,"comment_content":"æˆ‘çš„ç³»ç»Ÿæ˜¯centosï¼Œä¸‹äº†æœ€æ–°ç‰ˆçš„prefï¼Œtopæ‰€æœ‰è¿›ç¨‹æ­£å¸¸ï¼Œä½†æƒ³topæŒ‡å®šè¿›ç¨‹ï¼ˆ-pï¼‰ä»€ä¹ˆä¹Ÿæ‰“å°ä¸å‡ºæ¥ã€‚ä¸çŸ¥é“æ€ä¹ˆå›äº‹","like_count":0},{"had_liked":false,"id":251137,"user_name":"Cathy","can_delete":false,"product_type":"c1","uid":1786203,"ip_address":"","ucode":"9C474FE2C70F38","user_header":"https://static001.geekbang.org/account/avatar/00/1b/41/5b/aa3ca816.jpg","comment_is_top":false,"comment_ctime":1601374662,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1601374662","product_id":100020901,"comment_content":"æˆ‘è¢«å¡åœ¨è¿™é‡Œï¼Œè¿›è¡Œä¸ä¸‹å»äº†ï¼Œä¸€ç›´æ²¡æœ‰runæˆåŠŸï¼Œ æç¤ºconnection reset by peer<br><br>$ docker run --name nginx -p 10000:80 -itd feisky&#47;nginx","like_count":0},{"had_liked":false,"id":246022,"user_name":"","can_delete":false,"product_type":"c1","uid":2155540,"ip_address":"","ucode":"","user_header":"","comment_is_top":false,"comment_ctime":1599136605,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1599136605","product_id":100020901,"comment_content":"åªçœ‹åˆ°åœ°å€è€Œä¸æ˜¯å‡½æ•°åæ˜¯ç”±äºåº”ç”¨ç¨‹åºè¿è¡Œåœ¨å®¹å™¨ä¸­ï¼Œå®ƒçš„ä¾èµ–ä¹Ÿéƒ½åœ¨å®¹å™¨å†…éƒ¨ï¼Œæ•…è€Œperfæ— æ³•æ‰¾åˆ°PHPç¬¦å·è¡¨ã€‚ä¸€ä¸ªç®€å•çš„è§£å†³æ–¹æ³•æ˜¯ä½¿ç”¨perf recordç”Ÿæˆperf.dataæ‹·è´åˆ°å®¹å™¨å†…éƒ¨ perf reportã€‚æ‹·è´åˆ°å®¹å™¨å“ªé‡Œï¼Ÿ perf reportåœ¨å®¹å™¨å¤–æ‰§è¡Œè¿˜æ˜¯å®¹å™¨å†…æ‰§è¡Œï¼Ÿ<br>","like_count":0},{"had_liked":false,"id":245371,"user_name":"Geek_a16bbc","can_delete":false,"product_type":"c1","uid":2008721,"ip_address":"","ucode":"6F12AFEF638413","user_header":"","comment_is_top":false,"comment_ctime":1598926422,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1598926422","product_id":100020901,"comment_content":"Time per request:       4.470 [ms] (mean)<br>Time per request:       0.447 [ms] (mean, across all concurrent requests)<br>é€™å…©è¡Œçš„å·®åˆ¥æ˜¯ä»€éº¼ï¼Ÿé›£é“ç¬¬ä¸€è¡Œä¸æ˜¯across all requests?","like_count":0},{"had_liked":false,"id":245335,"user_name":"Geek_a16bbc","can_delete":false,"product_type":"c1","uid":2008721,"ip_address":"","ucode":"6F12AFEF638413","user_header":"","comment_is_top":false,"comment_ctime":1598917594,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1598917594","product_id":100020901,"comment_content":"ç‚ºä»€éº¼USER_HZ 100ä¸æ˜¯CONFIG_HZ 250çš„å› æ•¸ï¼Ÿ","like_count":0},{"had_liked":false,"id":245327,"user_name":"Front","can_delete":false,"product_type":"c1","uid":1565396,"ip_address":"","ucode":"35593EA52F2EA6","user_header":"https://static001.geekbang.org/account/avatar/00/17/e2/d4/ef86ea64.jpg","comment_is_top":false,"comment_ctime":1598910103,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"1598910103","product_id":100020901,"comment_content":"æˆ‘çš„ç¯å¢ƒæ˜¯Ubuntu18.04.1ï¼Œå†…æ ¸æ˜¯5.4.0-42-genericï¼Œperfçš„ç‰ˆæœ¬æ˜¯5.4.44ï¼Œdockeré‡Œperfæ˜¯4.9ã€‚è¿™æ ·ï¼Œåœ¨è™šæ‹Ÿæœºé‡Œè¿è¡Œperf recordï¼Œå°†perf.dataæ‹·è´åˆ°dockeré‡Œåï¼Œæ‰§è¡Œperf_4.9ï¼Œå´æŠ±æ€¨dockeré‡Œçš„perfç‰ˆæœ¬ä½ã€‚è¯·é—®è€å¸ˆå¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜ï¼Ÿè°¢è°¢","like_count":0,"discussions":[{"author":{"id":1043297,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/eb/61/a9d4b514.jpg","nickname":"atom","note":"","ucode":"F32F980C5246BA","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":554269,"discussion_content":"å¯ä½¿ç”¨ buster-backports æºæ›´æ–°perfåˆ°5.10ç‰ˆæœ¬","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646293104,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":244587,"user_name":"Geek_392979","can_delete":false,"product_type":"c1","uid":2149562,"ip_address":"","ucode":"BE8A0B47CDF562","user_header":"","comment_is_top":false,"comment_ctime":1598586071,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1598586071","product_id":100020901,"comment_content":"è€å¸ˆï¼Œ ä¸ºä»€ä¹ˆCentos7ä¸‹é¢æ•²perf top -g -p $pidæ²¡æœ‰ä»»ä½•è¾“å‡ºï¼Œ åªæ•²perf topå°±æœ‰è¾“å‡ºï¼Ÿ","like_count":0},{"had_liked":false,"id":244566,"user_name":"allen","can_delete":false,"product_type":"c1","uid":1334123,"ip_address":"","ucode":"67CD32ACB95013","user_header":"https://static001.geekbang.org/account/avatar/00/14/5b/6b/2ddbeab2.jpg","comment_is_top":false,"comment_ctime":1598583027,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1598583027","product_id":100020901,"comment_content":"ä¸ºä»€ä¹ˆæˆ‘è¿è¡Œä½ çš„dockerç¯å¢ƒè€æ˜¯ä¸‹è½½ä¸ä¸‹æ¥ï¼Ÿä½ èƒ½å®Œæ•´å‘ä¸‹æ€ä¹ˆè¿è¡Œï¼Ÿæˆ‘è¯´çš„æ˜¯å®Œæ•´ï¼Œä»è£…äº†ä¸ªå¹²å‡€çš„è™šæ‹Ÿæœºå¼€å§‹ï¼Œæ€ä¹ˆæ“ä½œï¼Ÿå½“ç„¶æˆ‘èƒ½ä¸Šå¤–ç½‘çš„ï¼Œè°¢è°¢","like_count":0},{"had_liked":false,"id":242412,"user_name":"ç‹æ¢“ç‡•","can_delete":false,"product_type":"c1","uid":2070962,"ip_address":"","ucode":"817463C4659AFA","user_header":"https://static001.geekbang.org/account/avatar/00/1f/99/b2/1588d13a.jpg","comment_is_top":false,"comment_ctime":1597716567,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1597716567","product_id":100020901,"comment_content":"è€å¸ˆ æˆ‘ä¸€ç›´æœ‰ä¸ªå›°æƒ‘ï¼Œ æˆ‘ä»¬çº¿ä¸ŠæœåŠ¡ä¸€èˆ¬cpuåˆ©ç”¨ç‡è¶…è¿‡60% å°±æœ‰é£é™©äº†ï¼Œ cpuæ˜¯ä¸€ç§èµ„æºï¼ŒæŒ‰ç†è¯´ä¸åº”è¯¥è¶Šé«˜åˆ©ç”¨çš„çš„è¶Šå……åˆ†å—  cpu 100% ä¸æ˜¯åˆ©ç”¨çš„æœ€å¤šå—  æ¯”è¾ƒå°ç™½ å¸Œæœ›è€å¸ˆèƒ½å¸®å¿™è§£ç­”","like_count":0,"discussions":[{"author":{"id":1807386,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/94/1a/86859a14.jpg","nickname":"Mr.Liuî„‹","note":"","ucode":"04227F9508177B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":535424,"discussion_content":"ä»æˆæœ¬æ¥çœ‹,å½“ç„¶æ˜¯cpuåˆ©ç”¨ç‡è¶Šé«˜è¶Šå¥½, ä½†ä»ç”¨æˆ·ä½“éªŒæ¥è¯´, cpuä½¿ç”¨ç‡è¶Šä½è¶Šå¥½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638437458,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":240865,"user_name":"å°é’±é’±","can_delete":false,"product_type":"c1","uid":1762210,"ip_address":"","ucode":"E3C626261D6992","user_header":"https://static001.geekbang.org/account/avatar/00/1a/e3/a2/cd0fb064.jpg","comment_is_top":false,"comment_ctime":1597106383,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1597106383","product_id":100020901,"comment_content":"è€å¸ˆï¼Œè¯¾ç¨‹ä¸­æœ‰å¯¹çº¿ç¨‹çš„åˆ†æä¹ˆï¼Œå·¥ä½œä¸­ä¹Ÿæœ‰éƒ¨åˆ†å¤šçº¿ç¨‹é—®é¢˜å¯¼è‡´çš„æ€§èƒ½","like_count":0},{"had_liked":false,"id":238744,"user_name":"æ¬§é›„è™(Badguyï¼‰","can_delete":false,"product_type":"c1","uid":1573307,"ip_address":"","ucode":"D72B1CC455AA56","user_header":"https://static001.geekbang.org/account/avatar/00/18/01/bb/7d15d44a.jpg","comment_is_top":false,"comment_ctime":1596279547,"is_pvip":true,"replies":[{"id":"88794","content":"çœ‹èµ·æ¥æ˜¯perfå®‰è£…çš„æœ‰é—®é¢˜ï¼Œè¯·å‚è€ƒCPUç­”ç–‘ç¯‡","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1596978128,"ip_address":"","comment_id":238744,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1596279547","product_id":100020901,"comment_content":"è€å¸ˆæˆ‘è¿™è¾¹è£…äº†perfä½†ç”¨perf report perf.dataæ‰“ä¸å¼€æ–‡ä»¶ï¼ŒæŠ¥é”™Cannot load tips.txt file, please install perf!è¾›è‹¦è€å¸ˆå¸®å¿™çœ‹çœ‹","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":502840,"discussion_content":"çœ‹èµ·æ¥æ˜¯perfå®‰è£…çš„æœ‰é—®é¢˜ï¼Œè¯·å‚è€ƒCPUç­”ç–‘ç¯‡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596978128,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":237450,"user_name":"walle","can_delete":false,"product_type":"c1","uid":2084840,"ip_address":"","ucode":"16EF4222060701","user_header":"https://static001.geekbang.org/account/avatar/00/1f/cf/e8/53704fac.jpg","comment_is_top":false,"comment_ctime":1595834000,"is_pvip":false,"replies":[{"id":"88797","content":"ç”¨æ–‡ç« é‡Œé¢çš„æ­¥éª¤æ›´çœäº‹ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1596978501,"ip_address":"","comment_id":237450,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1595834000","product_id":100020901,"comment_content":"æˆ‘åˆ°åº•æ˜¯è¦ä¸‹è½½æä¾›é“¾æ¥çš„dockeråŒ…é‡Œé¢make runå¯åŠ¨dockerè¿˜æ˜¯è¦ç”¨æ–‡ç« é‡Œé¢å†™çš„è¿™ä¸ªå‘½ä»¤å¯åŠ¨dockerï¼Œå¦‚æœç”¨ä¸‹é¢è¿™ä¸ªå‘½ä»¤ä¸‹è½½å¯åŠ¨docker é€Ÿåº¦å¾ˆå¿« <br>$ docker run --name nginx -p 10000:80 -itd feisky&#47;nginx<br>$ docker run --name phpfpm -itd --network container:nginx feisky&#47;php-fpm","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":502424,"discussion_content":"ç”¨æ–‡ç« é‡Œé¢çš„æ­¥éª¤æ›´çœäº‹ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596978501,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":237165,"user_name":"sky","can_delete":false,"product_type":"c1","uid":1207056,"ip_address":"","ucode":"5CEF9A1806298D","user_header":"https://static001.geekbang.org/account/avatar/00/12/6b/10/22f93764.jpg","comment_is_top":false,"comment_ctime":1595695551,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1595695551","product_id":100020901,"comment_content":"å€ªè€å¸ˆä½ å¥½ï¼Œå…³äº ç­‰å¾…I&#47;Oçš„CPUä½¿ç”¨ç‡ä¸€ç›´æœ‰ä¸€ä¸ªç–‘é—®æ²¡å¼„æ‡‚<br>ç­‰å¾…I&#47;Oæ—¶å¦‚æœæœ‰å…¶å®ƒå°±ç»ªä»»åŠ¡ï¼Œåˆ™CPUä¼šæ‰§è¡Œå…¶å®ƒä»»åŠ¡ï¼Œå¦åˆ™æ‰§è¡Œidleä»»åŠ¡ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­ç­‰å¾…I&#47;Oè¿™ä¸ªåŠ¨ä½œçœ‹èµ·æ¥ä¼¼ä¹å’Œæ¶ˆè€—CPUæ—¶é—´æ²¡æœ‰å…³ç³»ï¼Œè¿™é‡Œæ€ä¹ˆç†è§£ç­‰å¾…I&#47;Oçš„CPUä½¿ç”¨ç‡äº†","like_count":0},{"had_liked":false,"id":236783,"user_name":"é…¸è¾£åœŸè±†ä¸","can_delete":false,"product_type":"c1","uid":1751234,"ip_address":"","ucode":"0E3E4AFB31E1E6","user_header":"https://static001.geekbang.org/account/avatar/00/1a/b8/c2/d1904d74.jpg","comment_is_top":false,"comment_ctime":1595549866,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1595549866","product_id":100020901,"comment_content":"å…ˆä½¿ç”¨top, pså‘½ä»¤æŸ¥çœ‹cpuä½¿ç”¨ç‡é«˜çš„è¿›ç¨‹ï¼Œç„¶åå†ä½¿ç”¨pidstatæŸ¥çœ‹æ˜¯å“ªç§cpuç±»å‹ä½¿ç”¨ç‡é«˜ï¼Œæœ€åä½¿ç”¨per topï¼Œæ¥æŸ¥çœ‹å…·ä½“å“ªä¸ªå‡½æ•°ä½¿ç”¨ç‡é«˜ï¼Œé’ˆå¯¹çº¿ä¸Šç¯å¢ƒï¼Œæœ€å¥½ä½¿ç”¨per recordså’Œper reportè¿›è¡Œçº¿ä¸Šé—®é¢˜çš„è®°å½•å’Œåç»­åˆ†æ","like_count":0},{"had_liked":false,"id":236144,"user_name":"Persevering","can_delete":false,"product_type":"c1","uid":1167965,"ip_address":"","ucode":"535BC0F93DCD79","user_header":"https://static001.geekbang.org/account/avatar/00/11/d2/5d/da1c2278.jpg","comment_is_top":false,"comment_ctime":1595328005,"is_pvip":false,"replies":[{"id":"87244","content":"æˆ‘æ²¡ç”¨è¿‡SUSEï¼Œä¸è¿‡çœ‹SUSEæ–‡æ¡£perfæ˜¯æ”¯æŒçš„<br>https:&#47;&#47;documentation.suse.com&#47;sles&#47;12-SP4&#47;html&#47;SLES-all&#47;cha-perf.html<br><br>ä½ åœ¨ç”¨çš„æ—¶å€™æŠ¥ä»€ä¹ˆé”™è¯¯ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1595342537,"ip_address":"","comment_id":236144,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1595328005","product_id":100020901,"comment_content":"åœ¨suse linuxæ— æ³•ä½¿ç”¨perf  record -g<br>è¯·æ•™ä¸‹è¯¥æ€ä¹ˆç”¨","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":501960,"discussion_content":"æˆ‘æ²¡ç”¨è¿‡SUSEï¼Œä¸è¿‡çœ‹SUSEæ–‡æ¡£perfæ˜¯æ”¯æŒçš„\nhttps://documentation.suse.com/sles/12-SP4/html/SLES-all/cha-perf.html\n\nä½ åœ¨ç”¨çš„æ—¶å€™æŠ¥ä»€ä¹ˆé”™è¯¯ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595342537,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":236143,"user_name":"Persevering","can_delete":false,"product_type":"c1","uid":1167965,"ip_address":"","ucode":"535BC0F93DCD79","user_header":"https://static001.geekbang.org/account/avatar/00/11/d2/5d/da1c2278.jpg","comment_is_top":false,"comment_ctime":1595327920,"is_pvip":false,"replies":[{"id":"87245","content":"æŠ¥ä»€ä¹ˆé”™è¯¯ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1595342546,"ip_address":"","comment_id":236143,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1595327920","product_id":100020901,"comment_content":"åœ¨SUSEä¸Šå®‰è£…äº†perfï¼Œä½¿ç”¨perfect record -g  æ— æ³•æ”¶é›†ä¿¡æ¯ï¼Œè·³åˆ°äº†å¸®åŠ©é¡µé¢","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":501959,"discussion_content":"æŠ¥ä»€ä¹ˆé”™è¯¯ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595342546,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":235180,"user_name":"åˆ€åˆ€","can_delete":false,"product_type":"c1","uid":1193232,"ip_address":"","ucode":"9C0FD56AA3950F","user_header":"https://static001.geekbang.org/account/avatar/00/12/35/10/f0e8fc14.jpg","comment_is_top":false,"comment_ctime":1594915306,"is_pvip":false,"replies":[{"id":"86944","content":"è¿™ä¸ªæˆ‘æ²¡æœ‰è¯•è¿‡ï¼Œä½ å®‰è£…ä¸€ä¸‹çœ‹çœ‹æ˜¯ä¸æ˜¯è§£å†³æ‰€æœ‰ä¾èµ–ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1594994913,"ip_address":"","comment_id":235180,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1594915306","product_id":100020901,"comment_content":"è€å¸ˆï¼Œè¿™å¥—å·¥å…·åœ¨åµŒå…¥å¼linuxç¯å¢ƒä¸‹èƒ½ç”¨å—ï¼Ÿå¦‚æœè¿›ç¨‹ï¼Œå’ŒåŠ¨æ€åº“éƒ½æ˜¯stripedè¿‡åçš„ï¼Œå¹¶ä¸”ç¼–çš„æ˜¯édebugç‰ˆæœ¬èƒ½ç”¨perfæ‰¾åˆ°å¯¹åº”å‡½æ•°å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":501626,"discussion_content":"è¿™ä¸ªæˆ‘æ²¡æœ‰è¯•è¿‡ï¼Œä½ å®‰è£…ä¸€ä¸‹çœ‹çœ‹æ˜¯ä¸æ˜¯è§£å†³æ‰€æœ‰ä¾èµ–ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594994913,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1193232,"avatar":"https://static001.geekbang.org/account/avatar/00/12/35/10/f0e8fc14.jpg","nickname":"åˆ€åˆ€","note":"","ucode":"9C0FD56AA3950F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":291908,"discussion_content":"è²Œä¼¼æ²¡æœ‰armç¯å¢ƒçš„å”‰ï¼Œè€å¸ˆä½ æœ‰çš„è¯å‘æˆ‘ä¸€ä¸ªå§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594996393,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":230545,"user_name":"ç”Ÿæ´»ä¸å¦‚è¯—","can_delete":false,"product_type":"c1","uid":1139515,"ip_address":"","ucode":"FD48EABEEC52B7","user_header":"https://static001.geekbang.org/account/avatar/00/11/63/3b/c5cd68ab.jpg","comment_is_top":false,"comment_ctime":1593414350,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1593414350","product_id":100020901,"comment_content":"å½“å‘ç°cpuä½¿ç”¨ç‡è¿‡é«˜çš„æ—¶å€™æ’æŸ¥æ€è·¯ï¼š<br>1. é¦–å…ˆé€šè¿‡topå‘½ä»¤æŒ‰ç…§cpuä½¿ç”¨ç‡æ’åºï¼ŒæŸ¥çœ‹cpuå ç”¨æœ€é«˜çš„è¿›ç¨‹ï¼Œç„¶åæŸ¥çœ‹æ¯ä¸ªcpuçš„ä½¿ç”¨ç‡ï¼Œå¯ä»¥çœ‹åˆ°æ˜¯ç”¨æˆ·ç©ºé—´ä½¿ç”¨ç‡é«˜è¿˜æ˜¯å†…æ ¸ç©ºé—´ä½¿ç”¨ç‡é«˜ï¼›<br>2. å¯ä»¥å†é€šè¿‡pidstatå‘½ä»¤æŸ¥çœ‹æŒ‡å®šè¿›ç¨‹çš„cpuä½¿ç”¨ç‡æ˜¯å†…æ ¸ç©ºé—´å ç”¨é«˜è¿˜æ˜¯ç”¨æˆ·ç©ºé—´å ç”¨é«˜ï¼›<br>3. é€šè¿‡perf topå‘½ä»¤åŠ ä¸Š-gå‚æ•°æ¥æŸ¥çœ‹è¿›ç¨‹çš„å‡½æ•°è°ƒç”¨å…³ç³»ï¼ŒæŸ¥çœ‹æ˜¯å› ä¸ºå“ªä¸ªå‡½æ•°å¯¼è‡´çš„cpuä½¿ç”¨ç‡è¿‡é«˜ï¼›<br>4. é€šè¿‡grepæŸ¥æ‰¾åŒ…å«æ­¤å‡½æ•°çš„æ–‡ä»¶ï¼Œæ¥æŸ¥çœ‹æºç æ’æŸ¥é—®é¢˜ï¼›<br>ä»¥ä¸Šæ˜¯è¿›ç¨‹cpuå ç”¨è¿‡é«˜çš„æ’æŸ¥æ€è·¯ã€‚","like_count":0},{"had_liked":false,"id":227106,"user_name":"Li~","can_delete":false,"product_type":"c1","uid":1870306,"ip_address":"","ucode":"5FBA30D0D7DA31","user_header":"https://static001.geekbang.org/account/avatar/00/1c/89/e2/4d314444.jpg","comment_is_top":false,"comment_ctime":1592288931,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1592288931","product_id":100020901,"comment_content":"è€å¸ˆï¼Œæˆ‘ç”¨çš„Ubuntu 18.04ï¼Œperf top -g -p pidæ—¶æ²¡æœ‰æ•°æ®æ˜¾ç¤ºï¼ˆé¡µé¢æ˜¾ç¤ºï¼šSamples: 0  of event &#39;cpu-clock&#39;, 4000 Hz, Event count (approx.): 0 lost: 0&#47;0 drop: 0&#47;0   Children      Self  ï¼‰ï¼›ä½†perf top -gæœ‰æ•°æ®æ˜¾ç¤ºï¼›è¿™ç§æƒ…å†µæ˜¯ä»€ä¹ˆåŸå› å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":226012,"user_name":"ç‹¬ä¸€æ— äºŒ","can_delete":false,"product_type":"c1","uid":1692320,"ip_address":"","ucode":"A7DE0EA2BD8FE3","user_header":"https://static001.geekbang.org/account/avatar/00/19/d2/a0/c8714628.jpg","comment_is_top":false,"comment_ctime":1591928680,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1591928680","product_id":100020901,"comment_content":"ab -c 10 -n 10000 http:&#47;&#47;10.240.0.5:10000&#47;","like_count":0},{"had_liked":false,"id":223536,"user_name":"jorin@zou","can_delete":false,"product_type":"c1","uid":1564869,"ip_address":"","ucode":"A8CEF7CCF33570","user_header":"https://static001.geekbang.org/account/avatar/00/17/e0/c5/c324a7de.jpg","comment_is_top":false,"comment_ctime":1591110460,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1591110460","product_id":100020901,"comment_content":"centos 7 , å†…æ ¸ç‰ˆæœ¬3.2.1 ,perf ä¹‹åï¼Œä»€ä¹ˆä¹Ÿçœ‹ä¸åˆ°ï¼Ÿ","like_count":0},{"had_liked":false,"id":223340,"user_name":"é£æ²‰è¡€","can_delete":false,"product_type":"c1","uid":2025780,"ip_address":"","ucode":"C3122210A5D79D","user_header":"https://static001.geekbang.org/account/avatar/00/1e/e9/34/2eb0c21a.jpg","comment_is_top":false,"comment_ctime":1591067343,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1591067343","product_id":100020901,"comment_content":"æˆ‘ç”¨perfåˆ†æç¨‹åºå¼•èµ·é—®é¢˜çš„å‡½æ•°ï¼Œæµ‹è¯•ç¨‹åºæ˜¯ç”¨goå†™çš„ï¼Œperf ä¸ä¼šæ˜¾ç¤ºå‡½æ•°åï¼Œè€Œæ˜¯ä¸€ä¸²æŒ‡é’ˆåœ°å€ï¼Œè¿™ä¸ªæ—¶å€™è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ0x0000000000041004","like_count":0},{"had_liked":false,"id":222324,"user_name":"é‚±è£è´¢","can_delete":false,"product_type":"c1","uid":1958681,"ip_address":"","ucode":"414D74823F8AA5","user_header":"https://static001.geekbang.org/account/avatar/00/1d/e3/19/7eba0a69.jpg","comment_is_top":false,"comment_ctime":1590748762,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1590748762","product_id":100020901,"comment_content":"java çš„è¯, ä¸€èˆ¬ç”¨jprofileåˆ†æï¼Œæˆ–è€…jstackã€‚perfè¿˜èƒ½ç›´è¾¾ç”¨æˆ·çš„æ–¹æ³•ï¼Œå¾ˆå‰å®³ï¼","like_count":0},{"had_liked":false,"id":220864,"user_name":"saidev","can_delete":false,"product_type":"c1","uid":1205899,"ip_address":"","ucode":"15EA36FC88FE64","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/ziaPmSdzT0olY0V4l1t7maKLT73FeNPaGqeAE3RuF4ibXW0kt5sqwZg65ENE9Jgdb5ayibEjsHSU4rVVPFogK9k1Q/132","comment_is_top":false,"comment_ctime":1590330704,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1590330704","product_id":100020901,"comment_content":"è€å¸ˆï¼Œä½ å¥½ï¼Œæˆ‘æœ‰ä¸ªç–‘é—®ï¼ŒCPUçš„åˆ©ç”¨ç‡åœ¨ç³»ç»Ÿå±‚é¢æ˜¯æ€ä¹ˆè®¡ç®—çš„ã€‚å¯¹äºé‚£äº›æ‹¥æœ‰è¶…çº¿ç¨‹èƒ½åŠ›çš„CPUï¼Œç³»ç»Ÿçš„CPUåˆ©ç”¨ç‡è·Ÿå®é™…çš„CPUè®¡ç®—èƒ½åŠ›æ˜¯ä¸æ˜¯ä¸ä¸€è‡´çš„ï¼Ÿæ¯”å¦‚æˆ‘çš„ç³»ç»Ÿæ˜¯åªæœ‰ä¸€é¢—æ”¯æŒå•æ ¸åŒçº¿ç¨‹çš„CPUï¼Œä¼šè¢«Linuxç³»ç»Ÿè¯†åˆ«ä¸ºä¸¤ä¸ªé€»è¾‘CPUã€‚é‚£ä¹ˆæ­¤æ—¶æˆ‘è¿è¡Œä¸€ä¸ªç¨‹åºå ç”¨äº†CPUåˆ©ç”¨ç‡ä¸º50%ï¼Œèƒ½åšæ¯ç§’1äº¿æ¬¡çš„è¿ç®—ï¼Œé‚£ä¹ˆå®é™…ä¸Šå‰©ä¸‹çš„50%çš„CPUåˆ©ç”¨ç‡æ˜¯ä¸æ˜¯æ— æ³•å†åšæ¯ç§’1äº¿æ¬¡çš„è¿ç®—äº†ï¼Ÿå› ä¸ºæˆ‘å¬è¯´è¶…çº¿ç¨‹çš„CPUä¹Ÿå°±æå‡äº†å¤§æ¦‚30%çš„æ€§èƒ½ã€‚æ‰€ä»¥è¿™ç§æƒ…å†µä¸‹ï¼ŒCPUçš„åˆ©ç”¨ç‡å’ŒCPUçš„è®¡ç®—èƒ½åŠ›ä¸æˆæ­£æ¯”çš„å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":218589,"user_name":"æ™®ç½—ç±³ä¿®æ–¯","can_delete":false,"product_type":"c1","uid":1394030,"ip_address":"","ucode":"DDA7DE4DE371FC","user_header":"https://static001.geekbang.org/account/avatar/00/15/45/6e/11cf22de.jpg","comment_is_top":false,"comment_ctime":1589823130,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1589823130","product_id":100020901,"comment_content":"å¤šä¸ªCPUçš„æœºå™¨çš„CPUä½¿ç”¨ç‡æ€ä¹ˆç®—å‘¢ï¼Œtopçš„æ—¶å€™%CPUè¿™CPUä½¿ç”¨ç‡æŒ‡æ ‡è¶…è¿‡äº†%100ï¼Œå¦‚æœæœ‰10ä¸ªCPUï¼ŒCPUä½¿ç”¨ç‡è¶…è¿‡100%å°äº%1000ä¹Ÿæ˜¯æ­£å¸¸çš„å—ï¼Œæ„ï¼Œæ²¡ç†è§£è¿™é‡Œ","like_count":0},{"had_liked":false,"id":216991,"user_name":"Yong","can_delete":false,"product_type":"c1","uid":1912653,"ip_address":"","ucode":"0ADA75C5C68619","user_header":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTL3OaibxsOia5ZET1iaBsPwDM6NS43lAUTdItqkwZ66fGaaXtjOQYL73IsvY0foscUZlkaZSQPPQNexA/132","comment_is_top":false,"comment_ctime":1589381901,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1589381901","product_id":100020901,"comment_content":"æ‰“å¡ï¼Œç”¨çš„centosè™šæ‹Ÿæœºï¼Œdockerå†…éƒ¨å®‰è£…perfå¤ªæ…¢ï¼ŒåŠ ä¹‹ä¹‹å‰æœ‰ä¸€äº›ä½¿ç”¨perfçš„ç»éªŒï¼Œå°±å€Ÿç”¨è€å¸ˆçš„ç»“æœå›¾åˆ†æäº†ï¼šD","like_count":0},{"had_liked":false,"id":216626,"user_name":"Yong","can_delete":false,"product_type":"c1","uid":1912653,"ip_address":"","ucode":"0ADA75C5C68619","user_header":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTL3OaibxsOia5ZET1iaBsPwDM6NS43lAUTdItqkwZ66fGaaXtjOQYL73IsvY0foscUZlkaZSQPPQNexA/132","comment_is_top":false,"comment_ctime":1589297498,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1589297498","product_id":100020901,"comment_content":"dockeré•œåƒåŠ é€Ÿ. cenos7<br>vim &#47;etc&#47;docker&#47;daemon.json  ä½¿ç”¨ç½‘æ˜“é•œåƒ{&quot;registry-mirrors&quot;:[&quot;https:&#47;&#47;hub-mirror.c.163.com&#47;&quot;]}<br>ä¿å­˜å<br>systemctl daemon-reload<br>service docker restart<br><br>","like_count":0},{"had_liked":false,"id":212287,"user_name":"ray","can_delete":false,"product_type":"c1","uid":1717235,"ip_address":"","ucode":"10962C711CBC11","user_header":"","comment_is_top":false,"comment_ctime":1588084279,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1588084279","product_id":100020901,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œè¯·é—®<br>1.  &#47;proc&#47;statçš„cpuæ—¶é—´å•ä½éƒ½ä½¿ç”¨USER_HZè®¡ç®—ï¼Œè€Œä¸ç”¨CONFIG_HZè®¡ç®—çš„åŸå› æ˜¯å› ä¸ºkernelå ç”¨çš„cpuæ—¶é—´ä¼šè¢«æ¢ç®—æˆUSER_HZå—ï¼Ÿ<br><br>2. å‡è®¾CPUçš„é¢‘ç‡æœ‰1G HZï¼ŒUSER_HZæ˜¯100ï¼Œä¹Ÿå°±æ˜¯è¯´CPUæ¯ç§’ä¸­å¯ä»¥åˆ†ç»™100ä¸ªprocessæˆ–threadï¼Œæ¯ä¸ªprocessæˆ–threadå¯ä»¥è·å¾—1G &#47; 100 = 10Mä¸ªcpu cycle(tick)ã€‚æ¢æˆå†…æ ¸æ€ä½¿ç”¨CPUæ—¶ï¼Œä¹Ÿæ˜¯æ¯”ç…§ä¸Šé¢çš„æ–¹æ³•è®¡ç®—ã€‚ä¸çŸ¥é“æˆ‘è¿™æ ·è¯´æ˜¯å¦æ­£ç¡®ï¼Ÿ<br><br>è°¢è°¢è€å¸ˆçš„è§£ç­”^^","like_count":0},{"had_liked":false,"id":210366,"user_name":"chai","can_delete":false,"product_type":"c1","uid":1202222,"ip_address":"","ucode":"C686EB1B1EBAB6","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ep66fdwo3ebSicKjf0iacAx4C2tZOthDDD4bSJqib1iauFBK6EoMSWUBp4UbbN2BQlib7mFR3hQD6MUwew/132","comment_is_top":false,"comment_ctime":1587730523,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1587730523","product_id":100020901,"comment_content":"ç”¨æˆ·ç©ºé—´èŠ‚æ‹ç‡ USER_HZ æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ","like_count":0},{"had_liked":false,"id":207319,"user_name":"dongqh","can_delete":false,"product_type":"c1","uid":1144676,"ip_address":"","ucode":"7ADB792BEAD812","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/ajNVdqHZLLDRvUR8zB7ibC76NicIRqhic4ATrXgXMRMpgMz8Uico3Iv1Dbch4XkWIhphP4UyibLTkjf1E6p0zKenTmQ/132","comment_is_top":false,"comment_ctime":1587047043,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1587047043","product_id":100020901,"comment_content":"è€å¸ˆï¼Œæ‚¨å¥½ï¼š<br>ç¢°åˆ°ä¸ªé—®é¢˜ï¼Œè¿è¡Œç¯å¢ƒä¸ºcentos6.6 x64ã€‚æŸè¿›ç¨‹å¤„ç†æ•°æ®ï¼Œæ­£å¸¸æµç¨‹æ•°æ®å¤„ç†å®Œæˆåä¼šå…¥redisï¼›<br>åœ¨è¿è¡Œä¸€æ®µæ—¶é—´åï¼ˆå¯èƒ½ä¼šå¤„ç†å‡ ä¸‡æ¡æ•°æ®ï¼Œå¯èƒ½è¿è¡Œå‡ å¤©æ—¶é—´ï¼Œè§¦å‘æ¡ä»¶ä¸ç¡®å®šï¼‰ï¼Œç¨‹åºæ— æ³•å°†æ•°æ®æˆåŠŸå­˜å…¥redisï¼Œé€šè¿‡æ—¥å¿—æ–‡ä»¶æŸ¥çœ‹ä¹Ÿæ²¡æœ‰æ—¥å¿—è¾“å‡ºï¼Œå·¥ä½œçº¿ç¨‹cpuä½¿ç”¨ç‡åœ¨50%å·¦å³ï¼Œå†…å­˜æ— å¼‚å¸¸ï¼Œå³ä½¿æ²¡æœ‰è¦å¤„ç†çš„æ•°æ®ä¼ å…¥ï¼Œcpuä½¿ç”¨ç‡ä¹Ÿæ²¡æœ‰ä¸‹é™ï¼Œé€šè¿‡redisçš„moniteræŸ¥çœ‹æ²¡æœ‰å…¥åº“æ“ä½œï¼Œæ‰€ä»¥åˆ¤æ–­é—®é¢˜åœ¨ç¨‹åºæœ¬èº«ï¼›æŸ¥çœ‹å †æ ˆä¿¡æ¯å¯ä»¥å®šä½åˆ°ç¨‹åºå†…å…·ä½“å‡½æ•°ï¼Œæœ€ç»ˆæ˜¯åœ¨å¯¹mapçš„æ“ä½œä¸Šï¼Œç”±äºä¸çŸ¥é“è§¦å‘æ¡ä»¶ï¼Œè¿˜æœ‰æ²¡æœ‰ä»€ä¹ˆå¥½çš„æ–¹æ³•å®šä½é—®é¢˜ï¼Ÿ","like_count":0},{"had_liked":false,"id":196632,"user_name":"å˜å˜£è„†","can_delete":false,"product_type":"c1","uid":1130967,"ip_address":"","ucode":"F645068B7DED3F","user_header":"https://static001.geekbang.org/account/avatar/00/11/41/d7/1dde1b9c.jpg","comment_is_top":false,"comment_ctime":1585298577,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585298577","product_id":100020901,"comment_content":"å€ªè€å¸ˆï¼Œæˆ‘è¿™è¾¹æœ‰ä¸¤å°åŒç­‰é…ç½®çš„linuxæœºå™¨ï¼Œä¸Šé¢éƒ¨ç½²äº†influxdbæ•°æ®åº“ï¼Œæœ‰ä¸€å°ipä¸º144çš„cpuä½¿ç”¨ç‡ä¸€ç›´æ¥è¿‘100%ï¼Œå¦ä¸€å°145çš„ä½¿ç”¨ç‡åªæœ‰ç™¾åˆ†ä¹‹åå‡ ï¼Œè€Œæ­£å¸¸çš„è¯ä¸¤å°éƒ½æ˜¯ç™¾åˆ†ä¹‹åå‡ ã€‚144è¿™å°å†…å­˜å’Œç£ç›˜éƒ½å¤Ÿç”¨ï¼Œé€šè¿‡ä½¿ç”¨å‰é¢å­¦çš„pidstatå’Œvmstatå‘½ä»¤å’Œ145è¿™å°åšæ¯”è¾ƒï¼Œå‘ç°ä¸­æ–­å’Œä¸Šä¸‹æ–‡åˆ‡æ¢æŒºå¤§çš„ï¼Œæˆ‘æ€€ç–‘æ˜¯144è¿™å°ä¸Šçš„influxdbæ•°æ®åº“ä¸­çš„æŸä¸ªæ•°æ®åº“è¢«åˆ«äººä¸æ­£å¸¸ä½¿ç”¨å¯¼è‡´ï¼Œåº”è¯¥æ€ä¹ˆå®šä½å…·ä½“å“ªä¸€ä¸ªæ•°æ®åº“å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":191736,"user_name":"201200986","can_delete":false,"product_type":"c1","uid":1900861,"ip_address":"","ucode":"6042C42D1C904E","user_header":"","comment_is_top":false,"comment_ctime":1584793383,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584793383","product_id":100020901,"comment_content":"userçš„åˆ©ç”¨ç‡åŒ…å«guestå—ï¼Ÿçœ‹mpstatå·¥å…·å¥½åƒä¸åŒ…å«å‘¢","like_count":0},{"had_liked":false,"id":191522,"user_name":"ç—å­èƒ¥","can_delete":false,"product_type":"c1","uid":1617678,"ip_address":"","ucode":"3701A981FFF083","user_header":"","comment_is_top":false,"comment_ctime":1584778757,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584778757","product_id":100020901,"comment_content":"è€å¸ˆ,æˆ‘æ˜¯è¦åœ¨ä¸¤å°è™šæ‹Ÿæœºä¸Šåˆ†åˆ« å®‰è£…docker ç„¶åå†åœ¨docker é‡Œé¢å®‰è£…Nginxå’ŒPHPå—ï¼Ÿ","like_count":0},{"had_liked":false,"id":187382,"user_name":"Kvicii.Y","can_delete":false,"product_type":"c1","uid":1442588,"ip_address":"","ucode":"446BFA633569EA","user_header":"https://static001.geekbang.org/account/avatar/00/16/03/1c/c9fe6738.jpg","comment_is_top":false,"comment_ctime":1584096505,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584096505","product_id":100020901,"comment_content":"1.ä¸ºä»€ä¹ˆæˆ‘çš„perf -g -p [pid]ä¹‹åè§‚å¯Ÿä¸åˆ°ä»»ä½•è®°å½•(cent os7)ï¼Ÿ<br>2.21515è¿™ä¸ªpidæ˜¯å¦‚ä½•ç¡®å®šçš„ï¼Ÿåå­—æ˜¯ä¸€æ ·çš„å•Š","like_count":0},{"had_liked":false,"id":187064,"user_name":"winter","can_delete":false,"product_type":"c1","uid":1589721,"ip_address":"","ucode":"9BA0A8AF148C86","user_header":"https://static001.geekbang.org/account/avatar/00/18/41/d9/1a89a8d0.jpg","comment_is_top":false,"comment_ctime":1584003816,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584003816","product_id":100020901,"comment_content":"è€å¸ˆï¼Œperf top -gä»¥åï¼Œè¯·é—®childrenå’Œselfçš„ç™¾åˆ†æ•°å…·ä½“æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿæˆ‘æŸ¥äº†ä¸€ä¸‹æ²¡ç†è§£","like_count":0},{"had_liked":false,"id":186742,"user_name":"ã€‚ã€‚ã€‚","can_delete":false,"product_type":"c1","uid":1803113,"ip_address":"","ucode":"F97D05D81A5803","user_header":"https://static001.geekbang.org/account/avatar/00/1b/83/69/a9201594.jpg","comment_is_top":false,"comment_ctime":1583916120,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1583916120","product_id":100020901,"comment_content":"è‡ªå·±é‡åˆ°äº†è¿™ç§é—®é¢˜è¿˜æ˜¯æŸæ‰‹æ— ç­–çš„æ„Ÿè§‰","like_count":0},{"had_liked":false,"id":185733,"user_name":"çš‡å®¶æ•‘æ˜Ÿ","can_delete":false,"product_type":"c1","uid":1326106,"ip_address":"","ucode":"89F1274A3835FE","user_header":"https://static001.geekbang.org/account/avatar/00/14/3c/1a/1806ef25.jpg","comment_is_top":false,"comment_ctime":1583672646,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1583672646","product_id":100020901,"comment_content":"æœ‰ä¸¤ä¸ªé—®é¢˜ï¼š<br>1 æ‰¾ä¸åˆ°add_functionè¿™ä¸ªå‡½æ•°ä»£ç ï¼Œä½†æ˜¯çœ‹perfè¾“å‡ºå´å‘ç°è¿™ä¸ªå‡½æ•°è°ƒç”¨æ¶ˆè€—cpuä¸sqrtå·®ä¸å¤šã€‚è¿™æ˜¯å•¥æƒ…å†µ<br>2 çœ‹perfè¾“å‡ºï¼Œsqrtå‰é¢æ˜¾ç¤º4.96%ï¼Œæ˜¯ä¸æ˜¯è¯´æ˜cpuèµ„æºåªæœ‰4.96%è¢«å®ƒå ç”¨äº†ï¼Ÿ execute_exå ç”¨äº†90%ï¼Œä½†æ˜¯å±•å¼€åæ‰€æœ‰å­é¡¹åŠ èµ·æ¥å ç”¨æ‰ä¸åˆ°50%ï¼Œæ˜¯ä¸æ˜¯è¯´æ˜å‰©ä¸‹40%æ˜¯è¿™ä¸ªå‡½æ•°è‡ªèº«æ¶ˆè€—","like_count":0},{"had_liked":false,"id":185126,"user_name":"Kai","can_delete":false,"product_type":"c1","uid":1132636,"ip_address":"","ucode":"375475599FE136","user_header":"https://static001.geekbang.org/account/avatar/00/11/48/5c/3e46e189.jpg","comment_is_top":false,"comment_ctime":1583490847,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1583490847","product_id":100020901,"comment_content":"è€å¸ˆï¼Œæœ€è¿‘æœåŠ¡å™¨å‡ºç°kdevtmpfsiäº†è¿™ä¸ªè¿›ç¨‹cpuå ç”¨100%ï¼Œä½¿ç”¨perf stop -g -p å´æŸ¥ä¸åˆ°çˆ¶è¿›ç¨‹æ€ä¹ˆå›äº‹ ","like_count":0},{"had_liked":false,"id":184069,"user_name":"æ¼«æ¸¸è€…","can_delete":false,"product_type":"c1","uid":1058856,"ip_address":"","ucode":"7402D9068413D5","user_header":"https://static001.geekbang.org/account/avatar/00/10/28/28/5ffdd123.jpg","comment_is_top":false,"comment_ctime":1583217661,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1583217661","product_id":100020901,"comment_content":"ç­‰å¾… CPU ä½¿ç”¨ç‡ï¼ˆ%waitï¼‰ï¼›å¬å¾—å¥½åˆ«æ‰­ï¼Œåœ¨ç­‰å¾…CPUï¼Œæ€ä¹ˆä¼šæœ‰ä½¿ç”¨ç‡å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":180982,"user_name":"å®‹èƒ–èƒ–","can_delete":false,"product_type":"c1","uid":1857496,"ip_address":"","ucode":"AA828F49CCEABA","user_header":"https://static001.geekbang.org/account/avatar/00/1c/57/d8/e9c8b923.jpg","comment_is_top":false,"comment_ctime":1582452809,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1582452809","product_id":100020901,"comment_content":"æ‰“å¡ï¼Œï¼Œ åªæœ‰ä¸€å°ç‰©ç†æœºè¯•éªŒæœºï¼Œä¸ä¼šç”¨dockerã€‚","like_count":0},{"had_liked":false,"id":179453,"user_name":"ç‹é‡‘åˆš","can_delete":false,"product_type":"c1","uid":1813219,"ip_address":"","ucode":"FD8D6D19310DC7","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eq3fQlPJzwQRfpg2AlCpaD1znKGeBDX8D4JrJ6KJhuzonicU7FLNelZYDFQzsclNEcdVGzCSUKls3w/132","comment_is_top":false,"comment_ctime":1582008118,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1582008118","product_id":100020901,"comment_content":"æ ¹æ®æ‚¨ç¬¬ä¸€æ¬¡docker çš„æ„å»ºï¼Œcurl åå¹¶ä¸æ˜¯It works! è€Œæ˜¯nginxçš„é»˜è®¤é¡µé¢ï¼›<br>åŒæ—¶abæµ‹è¯•åï¼šRequests per second:    2588.13 [#&#47;sec] (mean)<br>è¿™æ˜¯ä¸ºä½•ï¼Ÿ<br>CONTAINER ID  IMAGE                            COMMAND               CREATED         STATUS             PORTS                  NAMES<br>b975f1ec4b8c  docker.io&#47;feisky&#47;php-fpm:latest  php-fpm -F --pid ...  14 minutes ago  Up 14 minutes ago  0.0.0.0:10000-&gt;80&#47;tcp  phpfpm<br>8d22ed3fcfea  quay.io&#47;feisky&#47;nginx:latest      nginx -g daemon o...  20 minutes ago  Up 20 minutes ago  0.0.0.0:10000-&gt;80&#47;tcp  nginx","like_count":0},{"had_liked":false,"id":175546,"user_name":"å®‰æ’","can_delete":false,"product_type":"c1","uid":1260026,"ip_address":"","ucode":"F78CFA9624CAEF","user_header":"https://static001.geekbang.org/account/avatar/00/13/39/fa/a7edbc72.jpg","comment_is_top":false,"comment_ctime":1580741591,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1580741591","product_id":100020901,"comment_content":"è¿›ç¨‹çš„CPUä½¿ç”¨ç‡æ˜¯å¦åŒ…å«è¿›ç¨‹ç­‰å¾…è¿è¡Œçš„æ—¶é—´è¿™ä¸€å—æœ‰ç–‘é—®ï¼Ÿ å¯ä»¥ä½¿ç”¨å•æ ¸çš„cpuåšå®éªŒï¼Œè·‘ä¸¤ä¸ªcpu boundè¿›ç¨‹ï¼Œçœ‹çœ‹è¿™ä¸¤ä¸ªè¿›ç¨‹çš„ä½¿ç”¨ç‡ä¹‹å’Œæ˜¯å¦å¤§äº1ï¼Œå¦‚æœå¤§äº1ï¼Œè¯´æ˜åŒ…å«ç­‰å¾…è¿è¡Œçš„æ—¶é—´ï¼Œå¦åˆ™ä¸åŒ…å«ã€‚æœ‰äº›ç‰ˆæœ¬çš„pidstatè¾“å‡ºä¹Ÿæ²¡æœ‰%waitè¿™ä¸€é¡¹ï¼Œæ‰€ä»¥è¿™ä¸€å—å­˜ç–‘ã€‚","like_count":0,"discussions":[{"author":{"id":1260026,"avatar":"https://static001.geekbang.org/account/avatar/00/13/39/fa/a7edbc72.jpg","nickname":"å®‰æ’","note":"","ucode":"F78CFA9624CAEF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":169640,"discussion_content":"è¿›ç¨‹çš„cpuä½¿ç”¨ç‡æ˜¯ä¸åŒ…å«%waitæ—¶é—´çš„ã€‚æ–‡ä¸­æ„Ÿè§‰æœ‰è¯¯ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581638573,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":174960,"user_name":"å’¸é±¼ä¸æœæ±","can_delete":false,"product_type":"c1","uid":1283861,"ip_address":"","ucode":"F79383599ACB02","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoRyUPicEMqGsbsMicHPuvwM8nibfgK8Yt0AibAGUmnic7rLF4zUZ4dBj4ialYz54fOD6sURKwuJIWBNjhg/132","comment_is_top":false,"comment_ctime":1580478778,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1580478778","product_id":100020901,"comment_content":"ç¯å¢ƒï¼šcentos7<br>perf top -g -p &lt;pid&gt;<br>åªæ˜¾ç¤ºï¼š<br>Get:3 http:&#47;&#47;deb.debian.org&#47;debian buster-updates InRelease [49.3Samples: 0  of event &#39;cycles:ppp&#39;, 4000 Hz, Event count (approx.)Children      Self<br>é€šè¿‡perf record -g -p &lt;pid&gt; æ–‡ä»¶å¾ˆå¤§ï¼Œè¿™ä¸ªæŒ‡ä»¤ä¸€ç›´å¡ç€","like_count":0},{"had_liked":false,"id":174885,"user_name":"Lynch","can_delete":false,"product_type":"c1","uid":1799514,"ip_address":"","ucode":"6F6B3E8AD1FC2F","user_header":"https://static001.geekbang.org/account/avatar/00/1b/75/5a/66c17844.jpg","comment_is_top":false,"comment_ctime":1580447103,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1580447103","product_id":100020901,"comment_content":"ç¼–è¯‘dockeré•œåƒæ—¶å€™ï¼Œstressåœ°å€ä¸å¯ç”¨äº†ï¼Œå®Œæˆé•œåƒç¼–è¯‘å¤±è´¥","like_count":0},{"had_liked":false,"id":172070,"user_name":"å¹¸çŒ´å„¿(à¹‘Ã²á†ºÃ³à¹‘)","can_delete":false,"product_type":"c1","uid":1312709,"ip_address":"","ucode":"16294369690484","user_header":"https://static001.geekbang.org/account/avatar/00/14/07/c5/b91d88d2.jpg","comment_is_top":false,"comment_ctime":1579082164,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1579082164","product_id":100020901,"comment_content":"è€å¸ˆï¼Œè¯·é—®redhat 7.2 topæŸ¥çœ‹åˆ°vimè¿›ç¨‹å ç”¨CPUç™¾åˆ†ä¹‹ç™¾ã€‚è¿™ä¸ªæ˜¯ä»€ä¹ˆåŸå› å¯¼è‡´çš„å‘¢ï¼","like_count":0},{"had_liked":false,"id":171805,"user_name":"ç¬‘","can_delete":false,"product_type":"c1","uid":1741098,"ip_address":"","ucode":"689A435818403A","user_header":"https://static001.geekbang.org/account/avatar/00/1a/91/2a/c0fb21fa.jpg","comment_is_top":false,"comment_ctime":1579015469,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1579015469","product_id":100020901,"comment_content":"è¡¥æ‰“å¡ï¼ŒDay 4ï¼ŒåŸæ¥topç­‰å·¥å…·æŸ¥çœ‹åˆ°çš„CPUä½¿ç”¨ç‡æ˜¯ä¸€æ®µæ—¶é—´å†…çš„å¹³å‡CPUä½¿ç”¨ç‡ï¼Œæˆ‘è¿˜ä»¥ä¸ºæ˜¯å®æ—¶çš„ï¼Œå­¦åˆ°äº†ã€‚","like_count":0},{"had_liked":false,"id":171605,"user_name":"åˆ˜å‹æ·™","can_delete":false,"product_type":"c1","uid":1620058,"ip_address":"","ucode":"97F3A69A308313","user_header":"","comment_is_top":false,"comment_ctime":1578974150,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1578974150","product_id":100020901,"comment_content":"D5 æ‰“å¡","like_count":0},{"had_liked":false,"id":169346,"user_name":"æ¨é™†ä¼Ÿ","can_delete":false,"product_type":"c1","uid":1108457,"ip_address":"","ucode":"3BC968447406EB","user_header":"https://static001.geekbang.org/account/avatar/00/10/e9/e9/1f95e422.jpg","comment_is_top":false,"comment_ctime":1578319943,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1578319943","product_id":100020901,"comment_content":"è€å¸ˆå¥½ï¼Œjavaç”¨perfå¯ä»¥æ‰¾åˆ°è°ƒç”¨æ ˆå—ï¼Ÿå¦‚æœä¸å¯ä»¥ï¼Œç”¨å“ªä¸ªå·¥å…·å‘¢ï¼Ÿè°¢è°¢","like_count":0},{"had_liked":false,"id":166455,"user_name":"Geek_2445e7","can_delete":false,"product_type":"c1","uid":1767507,"ip_address":"","ucode":"27D9640068E609","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIa4tueCVnQKre4ibIMsJdicCCdFlWKDUeyKHrvaOhVibLCZ6yTia8GhoSfsDa4VGkGJzLaTiaQLxRxCnQ/132","comment_is_top":false,"comment_ctime":1577452183,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1577452183","product_id":100020901,"comment_content":"è€å¸ˆï¼Œæœ‰ä¸ªåœ°æ–¹ä¸å¤ªæ˜ç™½ã€‚ç¨‹åºä¸­æ˜¯æœ‰å¤§é‡çš„sqrtè®¡ç®—ï¼Œä½†æ˜¯ä¸ºä½•perf topä¸­çœ‹åˆ°çš„sqrtåªå äº†ä¸åˆ°ç™¾åˆ†4å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":162938,"user_name":"ç»¿ç®­ä¾ ","can_delete":false,"product_type":"c1","uid":1528536,"ip_address":"","ucode":"B994F558A98E29","user_header":"https://static001.geekbang.org/account/avatar/00/17/52/d8/123a4981.jpg","comment_is_top":false,"comment_ctime":1576632437,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1576632437","product_id":100020901,"comment_content":"è€å¸ˆï¼Œæ–‡ä¸­è¯´topé»˜è®¤ä½¿ç”¨3ç§’æ—¶é—´é—´éš”ï¼ŒæŸ¥çœ‹äº†manæ‰‹å†Œï¼Œæ²¡æ‰¾åˆ°ï¼Œåªæ˜¯æƒ³äº²è‡ªéªŒè¯è¿™äº›ä¸œè¥¿","like_count":0},{"had_liked":false,"id":155671,"user_name":"Christopher","can_delete":false,"product_type":"c1","uid":1757265,"ip_address":"","ucode":"1AC6035DFA4ECB","user_header":"https://static001.geekbang.org/account/avatar/00/1a/d0/51/f1c9ae2d.jpg","comment_is_top":false,"comment_ctime":1574735034,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1574735034","product_id":100020901,"comment_content":"day2","like_count":0},{"had_liked":false,"id":144307,"user_name":"Shane","can_delete":false,"product_type":"c1","uid":1291344,"ip_address":"","ucode":"322D0A883BAF16","user_header":"https://static001.geekbang.org/account/avatar/00/13/b4/50/c5dad2dc.jpg","comment_is_top":false,"comment_ctime":1571892691,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1571892691","product_id":100020901,"comment_content":"è€å¸ˆï¼Œä½ å¥½ã€‚<br><br>ä¹‹å‰æˆ‘åœ¨å¦å¤–ä¸€ç¯‡æ–‡ç« æé—®è¿‡ï¼Œâ€å‘ç°topä¸‹çš„è¿›ç¨‹çš„cpuä½¿ç”¨ç‡çš„æ€»å’Œæ˜æ˜¾ä¸ç­‰äºtopä¸­ç³»ç»Ÿæ€»ä½“çš„cpuä½¿ç”¨ç‡çš„æ€»å’Œâ€œ<br><br>æç¤ºè¯´åœ¨05ç¯‡ä¸­æœ‰ç­”æ¡ˆã€‚<br><br>ä»Šå¤©åˆé‡æ–°çœ‹äº†ä¸¤é05ç¯‡çš„å†…å®¹ã€‚è™½ç„¶æ²¡æœ‰ç‰¹æ„å¼ºè°ƒã€‚ä½†æ˜¯ï¼Œçš„å´åœ¨ä»‹ç»topä¸‹è¿›ç¨‹çš„cpuçš„è®¡ç®—æ—¶ï¼Œæåˆ°â€è¿›ç¨‹cpuåªæ˜¯åŒ…å«äº†ç”¨æˆ·æ€çš„cpuä½¿ç”¨ç‡å’Œå†…æ ¸æ€çš„cpuä½¿ç”¨ç‡â€œï¼Œå¹¶æ²¡æœ‰æåˆ°â€io wait cpuä½¿ç”¨ç‡â€œã€‚<br><br>é‚£ä¹ˆï¼Œæ˜¯ä¸æ˜¯è¿™ä¸ªåŸå› å¯¼è‡´çš„è¿›ç¨‹çš„cpuä½¿ç”¨ç‡æ€»å’Œä¸ç­‰äºæ€»ä½“çš„cpuä½¿ç”¨ç‡æ€»å’Œå‘¢ï¼Ÿ<br><br>å¦‚æœæ˜¯è¿™æ ·ï¼Œé‚£ä¹ˆæ˜¯ä¸æ˜¯å¿…é¡»é€šè¿‡pidstatæ¥æŸ¥çœ‹è¿›ç¨‹çš„io waitçš„cpuä½¿ç”¨ç‡æ‰æ˜¯å‡†ç¡®çš„å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":144087,"user_name":"é»„å±•å¿—","can_delete":false,"product_type":"c1","uid":1356083,"ip_address":"","ucode":"EBA342CD89072D","user_header":"https://static001.geekbang.org/account/avatar/00/14/b1/33/8993eae0.jpg","comment_is_top":false,"comment_ctime":1571842111,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1571842111","product_id":100020901,"comment_content":"æ˜ç™½äº†ï¼ŒåŸæ¥æ˜¯å…±äº«ç¬¬ä¸€å°å®¹å™¨çš„ç½‘ç»œå‘½åç©ºé—´","like_count":0},{"had_liked":false,"id":144082,"user_name":"é»„å±•å¿—","can_delete":false,"product_type":"c1","uid":1356083,"ip_address":"","ucode":"EBA342CD89072D","user_header":"https://static001.geekbang.org/account/avatar/00/14/b1/33/8993eae0.jpg","comment_is_top":false,"comment_ctime":1571841427,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1571841427","product_id":100020901,"comment_content":"å€ªè€å¸ˆï¼Œdocker run --name  phpfpm -itd --network container:nginx feisky&#47;php-fpm<br><br>è¿™æ¡å‘½ä»¤æœ‰è¯¯<br>åº”è¯¥æ˜¯å¤šäº†container:nginx","like_count":0},{"had_liked":false,"id":142215,"user_name":"Mark","can_delete":false,"product_type":"c1","uid":1350902,"ip_address":"","ucode":"D60E5269080BA9","user_header":"https://static001.geekbang.org/account/avatar/00/14/9c/f6/30dfdc9f.jpg","comment_is_top":false,"comment_ctime":1571313557,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1571313557","product_id":100020901,"comment_content":"æˆ‘åœ¨æ‰§è¡Œçš„æ—¶å€™ï¼Œphp-fpmçš„è¿›ç¨‹idä¸€ç›´åœ¨å˜ï¼Œå¤§å®¶æ˜¯æ€ä¹ˆå–çš„è¿›ç¨‹idï¼Ÿ","like_count":0},{"had_liked":false,"id":140019,"user_name":"å˜‰æœ¨","can_delete":false,"product_type":"c1","uid":1317999,"ip_address":"","ucode":"AF4877693782C0","user_header":"https://static001.geekbang.org/account/avatar/00/14/1c/6f/3ea2a599.jpg","comment_is_top":false,"comment_ctime":1570787413,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1570787413","product_id":100020901,"comment_content":"èƒ½ä¸èƒ½è¿™æ ·ç†è§£ï¼Œiowaitçš„CPUæ—¶é—´å®é™…ä¸Šæ˜¯è·Ÿå…¶ä»–CPUæ—¶é—´ï¼ˆusr&#47;sys...ï¼‰çš„é‡å ï¼Ÿ<br>ä¹Ÿå°±æ˜¯ç­‰å¾…ioè¿”å›ç»“æœçš„æ—¶å€™ï¼ŒCPUå»åšå…¶ä»–äº‹æƒ…äº†ï¼Œå¯èƒ½è¿è¡Œç”¨æˆ·æ€ç¨‹åºï¼Œä¹Ÿå¯èƒ½æ˜¯å†…æ ¸çš„å…¶ä»–å¤„ç†","like_count":0},{"had_liked":false,"id":132724,"user_name":"è°","can_delete":false,"product_type":"c1","uid":1517268,"ip_address":"","ucode":"F65760FDD31CEB","user_header":"https://static001.geekbang.org/account/avatar/00/17/26/d4/add17f35.jpg","comment_is_top":false,"comment_ctime":1568203866,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1568203866","product_id":100020901,"comment_content":"è€å¸ˆï¼Œè¯·é—®ä¸ºä»€ä¹ˆRHELå’Œcentosæ²¡æœ‰man proc å’Œman 5 procå‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":132274,"user_name":"Magic","can_delete":false,"product_type":"c1","uid":1272047,"ip_address":"","ucode":"FD9CEDAA419EB0","user_header":"https://static001.geekbang.org/account/avatar/00/13/68/ef/6264ca3d.jpg","comment_is_top":false,"comment_ctime":1568077506,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1568077506","product_id":100020901,"comment_content":"ç¥å€ªè€å¸ˆæ•™å¸ˆèŠ‚å¿«ä¹","like_count":0},{"had_liked":false,"id":129734,"user_name":"è€¿é•¿å­¦","can_delete":false,"product_type":"c1","uid":1309948,"ip_address":"","ucode":"C7A262812854D4","user_header":"https://static001.geekbang.org/account/avatar/00/13/fc/fc/1e235814.jpg","comment_is_top":false,"comment_ctime":1567233704,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1567233704","product_id":100020901,"comment_content":"è€å¸ˆï¼Œdockerå®¹å™¨ä¸èƒ½ç”¨äº†å—ï¼Ÿæ‰§è¡Œdockerç°åœ¨éƒ½ä¸è¡Œäº†","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":37769,"discussion_content":"ä»€ä¹ˆé”™è¯¯ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571665210,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":127164,"user_name":"GEEKBANG_9388667","can_delete":false,"product_type":"c1","uid":1267906,"ip_address":"","ucode":"FAF51FEFBB291A","user_header":"https://static001.geekbang.org/account/avatar/00/13/58/c2/51fa1f28.jpg","comment_is_top":false,"comment_ctime":1566572046,"is_pvip":false,"replies":[{"id":"47196","content":"$ docker run --name nginx -p 10000:80 -itd feisky&#47;nginx<br><br>-p é€‰é¡¹åŠ äº†å—ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1566742970,"ip_address":"","comment_id":127164,"utype":1}],"discussion_count":4,"race_medal":0,"score":"1566572046","product_id":100020901,"comment_content":"[root@localhost ~]# docker ps<br>CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS               NAMES<br>5bb4d6ecb7e9        feisky&#47;php-fpm      &quot;php-fpm -F --pid ...&quot;   About an hour ago   Up About an hour                        phpfpm<br>d6e178b65257        feisky&#47;nginx        &quot;nginx -g &#39;daemon ...&quot;   About an hour ago   Up About an hour                        nginx<br>å®¹å™¨éƒ½èµ·æ¥äº† å¯æ˜¯10000ç«¯å£å°±æ˜¯æ²¡æœ‰ç›‘å¬ï¼Œå¥½éš¾","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464349,"discussion_content":"$ docker run --name nginx -p 10000:80 -itd feisky/nginx\n\n-p é€‰é¡¹åŠ äº†å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566742970,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2070107,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLPcbudQOzUfwoHC4FpVwiaSAuYf0B2CvSLXm4RrTVhhsOibOJTbpvIFI6Zv72D9rQltM4h6icuJq5ibw/132","nickname":"æœæ—­æ›¦é£","note":"","ucode":"1756A0E27948F6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":296045,"discussion_content":"ä½ çš„ç¯å¢ƒæ˜¯ARMçš„è¿˜æ˜¯X86çš„ï¼Œå¦‚æœæ˜¯ARMçš„ï¼Œéœ€è¦ä¸‹è½½ARMç‰ˆæœ¬çš„é•œåƒ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596438418,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1800128,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/77/c0/22872965.jpg","nickname":"LindaWang","note":"","ucode":"45368868C3980B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":207450,"discussion_content":"åœ¨æ¬§æ‹‰OSä¸Šphp-fpmå®¹å™¨èµ·ä¸æ¥ï¼Œåœ¨Ubuntu 16.04ä¸Šå¯ä»¥ã€‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584497796,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1800128,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/77/c0/22872965.jpg","nickname":"LindaWang","note":"","ucode":"45368868C3980B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":207443,"discussion_content":"è€å¸ˆï¼Œä¸ºä»€ä¹ˆæˆ‘æ‰§è¡Œmake runæ—¶ï¼Œphpformè¿™ä¸ªå®¹å™¨æ‹‰ä¸èµ·æ¥å‘¢\nCONTAINER ID        IMAGE                COMMAND                  CREATED             STATUS                    PORTS                   NAMES\n2cdd705233a0        feisky/php-fpm:cpu   &#34;php-fpm -F --pid /oâ€¦&#34;   2 seconds ago       Exited (1) 1 second ago                           phpfpm\n6561eb279bd6        feisky/nginx:cpu     &#34;nginx -g &#39;daemon ofâ€¦&#34;   3 seconds ago       Up 2 seconds              0.0.0.0:10000->80/tcp   nginx\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584497362,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":124573,"user_name":"ã€‚ã€‚ã€‚","can_delete":false,"product_type":"c1","uid":1024042,"ip_address":"","ucode":"CE8B93E25E6830","user_header":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJOVrjicIjtZ2mMcLw2IUgj8J8vd63J0YbT75rxtnhJsh7h3sqsePpYacPkP4ZibZAGuZoUKciaUpXQw/132","comment_is_top":false,"comment_ctime":1565922636,"is_pvip":false,"replies":[{"id":"45963","content":"çœ‹èµ·æ¥æ˜¯å®‰è£…é”™è¯¯ï¼Ÿé‡æ–°å®‰è£…perfè¯•è¯•æ€ä¹ˆæ ·","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1566132647,"ip_address":"","comment_id":124573,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1565922636","product_id":100020901,"comment_content":"è€å¸ˆï¼Œæˆ‘ä½¿ç”¨perfå‘½ä»¤æ—¶æŠ¥äº†è¿™ä¸ªé”™ï¼š<br>&#47;usr&#47;sbin&#47;perf:line6: &#47;usr&#47;libexec&#47;perf.2.6.32-696.18.7.el6.x86_64:æ²¡æœ‰è¿™ä¸ªæ–‡ä»¶æˆ–ç›®å½•<br><br>","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463230,"discussion_content":"çœ‹èµ·æ¥æ˜¯å®‰è£…é”™è¯¯ï¼Ÿé‡æ–°å®‰è£…perfè¯•è¯•æ€ä¹ˆæ ·","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566132647,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":124249,"user_name":"æ‹‰æ™®æ‹‰æ–¯","can_delete":false,"product_type":"c1","uid":1044426,"ip_address":"","ucode":"47B0CC82892ABB","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ef/ca/da6ccfaa.jpg","comment_is_top":false,"comment_ctime":1565842173,"is_pvip":false,"replies":[{"id":"45969","content":"è¯·å‚è€ƒ14ç­”ç–‘ç¯‡","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1566133154,"ip_address":"","comment_id":124249,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1565842173","product_id":100020901,"comment_content":"perf top -g -p 21515<br><br>åªæ˜¯æ˜¾ç¤º16è¿›åˆ¶çš„å­—ç¬¦","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463082,"discussion_content":"è¯·å‚è€ƒ14ç­”ç–‘ç¯‡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566133154,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":119753,"user_name":"å°è‹","can_delete":false,"product_type":"c1","uid":1501618,"ip_address":"","ucode":"1A4776F948C6F5","user_header":"https://static001.geekbang.org/account/avatar/00/16/e9/b2/6a9203b5.jpg","comment_is_top":false,"comment_ctime":1564673269,"is_pvip":false,"replies":[{"id":"44402","content":"Javaç¨‹åºçš„åˆ†æè¯·å‚è€ƒç¬¬14ç¯‡çš„ç­”ç–‘","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1565015413,"ip_address":"","comment_id":119753,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1564673269","product_id":100020901,"comment_content":"è€å¸ˆæˆ‘å†™äº†ä¸€ä¸ªæµ‹è¯•ç¨‹åºjavaçš„ (cpuå¯†é›†å‹): å‘½ä»¤:top -g -p 27476<br>    while (true) {<br>         Math.pow(RandomUtils.nextInt(100), RandomUtils.nextInt(100));<br>     }<br>cpuå‡ä¸Šæ¥äº†ä½†æ˜¯å¹¶æ²¡æœ‰æ˜ç¡®çš„æ˜¾ç¤ºæ˜¯ç”±äºè®¡ç®—æ¬¡æ–¹ä¹Ÿå°±æ˜¯powæ–¹æ³•é€ æˆçš„<br>æ¥ä¸‹æ¥æˆ‘æ”¹å¦‚ä½•ç”¨ perf  å®šä½<br>+   67.60%     0.00%  perf-27476.map      [.] 0x00007f8de749930c                                                                                                                                           â–’<br>-   67.27%     0.90%  libjvm.so           [.] JVM_GetStackTraceElement                                                                                                                                     â–’<br>   - 11.07% JVM_GetStackTraceElement                                                                                                                                                                       â–’<br>      - 15.16% java_lang_Throwable::get_stack_trace_element                                                                                                                                                â–’<br>         - 23.20% java_lang_StackTraceElement::create                                                                                                                                                      â–’<br>            - 14.01% StringTable::intern                                                                                                                                                                   â–’<br>               + 9.21% StringTable::intern                                                                                                                                                                 â–’<br>                 3.22% UTF8::convert_to_unicode                                                                                                                                                            â–’<br>                 3.01% UTF8::unicode_length","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461055,"discussion_content":"Javaç¨‹åºçš„åˆ†æè¯·å‚è€ƒç¬¬14ç¯‡çš„ç­”ç–‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565015413,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117592,"user_name":"ä¹–ï¼Œæ‘¸æ‘¸å¤´","can_delete":false,"product_type":"c1","uid":1611745,"ip_address":"","ucode":"BD92741A11D3CD","user_header":"https://static001.geekbang.org/account/avatar/00/18/97/e1/0f4d90ff.jpg","comment_is_top":false,"comment_ctime":1564100205,"is_pvip":true,"replies":[{"id":"43475","content":"ç•™è¨€ä¸­æœ‰ä¸€äº›æ€è·¯ï¼Œå¯ä»¥å‚è€ƒã€‚ä¸“æ ç¬¬14ç¯‡ä¹Ÿä¸“é—¨ä»‹ç»äº†ä¸€äº›é€šç”¨çš„æ–¹æ³•","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1564410703,"ip_address":"","comment_id":117592,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1564100205","product_id":100020901,"comment_content":"æˆ‘è¿™é‡Œä¸æ˜¾ç¤ºå‡½æ•°å<br>-   91.97%     0.76%  php-fpm             [.] 0x00000000008c296e                                                         â–’<br>   - 49.94% 0x8c296e                                                                                                     â–’<br>      - 25.30% 0x8c4a7c                                                                                                  â–’<br>           6.50% 0x2127e                                                                                                 â–’<br>           2.23% 0x681b9d                                                                                                â–’<br>           0.98% 0x681b99                                                                                                â–’<br>      - 13.88% 0x98dea3                                                                                                  â–’<br>         - 5.42% 0x98dd97                                                                                                â–’<br>              1.35% 0x815e70                                                                                             â–’<br>        1.72% 0x94ede0                                                                                                   â–’<br>        1.67% 0x8cd729                                                                                                   â–’<br>+   25.36%     0.35%  php-fpm             [.] 0x00000000008c4a7c                                                         â–’<br>+    6.52%     6.50%  libm-2.24.so        [.] 0x000000000002127e                                                         â–’<br>+    6.42%     0.00%  [unknown","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460040,"discussion_content":"ç•™è¨€ä¸­æœ‰ä¸€äº›æ€è·¯ï¼Œå¯ä»¥å‚è€ƒã€‚ä¸“æ ç¬¬14ç¯‡ä¹Ÿä¸“é—¨ä»‹ç»äº†ä¸€äº›é€šç”¨çš„æ–¹æ³•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564410703,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117024,"user_name":"ç¨‹åºå‘˜è€ä¸‡","can_delete":false,"product_type":"c1","uid":1606177,"ip_address":"","ucode":"061269EFE23EC4","user_header":"","comment_is_top":false,"comment_ctime":1563956637,"is_pvip":false,"replies":[{"id":"43470","content":"ä¸€èˆ¬é€šè¿‡ç«¯å£æ˜ å°„","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1564410112,"ip_address":"","comment_id":117024,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1563956637","product_id":100020901,"comment_content":"è€å¸ˆï¼Œdockerçš„nginxå®¹å™¨ï¼Œæ€ä¹ˆèƒ½è¢«å¤–ç½‘è®¿é—®","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459784,"discussion_content":"ä¸€èˆ¬é€šè¿‡ç«¯å£æ˜ å°„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564410112,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1079846,"avatar":"https://static001.geekbang.org/account/avatar/00/10/7a/26/7e17def5.jpg","nickname":"é©¬å­”å¤šåœ¨ä¸‹é›¨","note":"","ucode":"58CDDDEF7A80BC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5038,"discussion_content":"æˆ‘ç”¨dockerèµ·æ¥åï¼Œçœ‹åˆ°ç«¯å£æ˜¯ç›‘å¬çš„ï¼Œå¯æ˜¯å¦ä¸€å°æœºå™¨è¿ä¸ä¸Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565888275,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":116043,"user_name":"ä¹–ï¼Œæ‘¸æ‘¸å¤´","can_delete":false,"product_type":"c1","uid":1611745,"ip_address":"","ucode":"BD92741A11D3CD","user_header":"https://static001.geekbang.org/account/avatar/00/18/97/e1/0f4d90ff.jpg","comment_is_top":false,"comment_ctime":1563778082,"is_pvip":true,"replies":[{"id":"42484","content":"man 5 proc (man man æŸ¥çœ‹mançš„ä½¿ç”¨æ–¹æ³•ï¼‰","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1563804933,"ip_address":"","comment_id":116043,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1563778082","product_id":100020901,"comment_content":"man proc å‡ºç°ä¸‹é¢çš„è¿™äº›ä¸œè¥¿ï¼Œå¹¶æ²¡æœ‰æ–‡ç« ä¸­æ‰€è¯´çš„<br>proc(n)                                   Tcl Built-In Commands                                  proc(n)<br><br>________________________________________________________________________________________________________<br><br>NAME<br>       proc - Create a Tcl procedure<br><br>SYNOPSIS<br>       proc name args body<br>_________________________________________________________________<br><br>DESCRIPTION<br>       The proc command creates a new Tcl procedure named name, replacing any existing command or proceâ€<br>       dure there may have be","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459364,"discussion_content":"man 5 proc (man man æŸ¥çœ‹mançš„ä½¿ç”¨æ–¹æ³•ï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563804933,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":115692,"user_name":"Apollo","can_delete":false,"product_type":"c1","uid":1183821,"ip_address":"","ucode":"3A0C79CCB21FD9","user_header":"https://static001.geekbang.org/account/avatar/00/12/10/4d/f548bc68.jpg","comment_is_top":false,"comment_ctime":1563699779,"is_pvip":false,"replies":[{"id":"42485","content":"ä¸æ˜¯çš„ï¼ŒCONFIG_HZ æ˜¯é…ç½®ç¡¬ä»¶ä¸­æ–­çš„","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1563805016,"ip_address":"","comment_id":115692,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1563699779","product_id":100020901,"comment_content":"æˆ‘æœ‰ä¸ªé—®é¢˜ï¼šUser_HZ=100 0.01s å°±ä¼šäº§ç”Ÿæ—¶é—´ä¸­æ–­ï¼Œè¿™ä¸ª0.01æ˜¯æ—¶é—´ç‰‡çš„æ—¶é—´ä¹ˆï¼Ÿå¦‚æœæ˜¯æ—¶é—´ç‰‡çš„æ—¶é—´å†…æ ¸çš„CONFIG_HZåˆæ€ä¹ˆè§£é‡Šå‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459234,"discussion_content":"ä¸æ˜¯çš„ï¼ŒCONFIG_HZ æ˜¯é…ç½®ç¡¬ä»¶ä¸­æ–­çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563805016,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":114286,"user_name":"å–œå“¥","can_delete":false,"product_type":"c1","uid":1266193,"ip_address":"","ucode":"47FD02C6CF9292","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/sOvjoV6STk6SYPHRqVOo7ExojUbc4NgJAd7pGnyQQfJYFS97pYg744PNibalzy6gqZEicoHS2g6ibzK0OLhP6l0TA/132","comment_is_top":false,"comment_ctime":1563266230,"is_pvip":true,"replies":[{"id":"41973","content":"è¿™æ˜¯å†…æ ¸ä¸­å°†åå…­è¿›åˆ¶çš„ç¬¦å·åœ°å€è½¬æ¢æˆç¬¦å·åç§°çš„æ¨¡å—ï¼Œé«˜æ˜¯æ­£å¸¸çš„ï¼Œå¯ä»¥å¿½ç•¥","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1563455761,"ip_address":"","comment_id":114286,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1563266230","product_id":100020901,"comment_content":"ä½ å¥½ è€å¸ˆé€šè¿‡perfæŸ¥çœ‹kernel.kallsymsé«˜è¾¾40%<br>å¦‚ä½•åˆ†æå‘¢","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458595,"discussion_content":"è¿™æ˜¯å†…æ ¸ä¸­å°†åå…­è¿›åˆ¶çš„ç¬¦å·åœ°å€è½¬æ¢æˆç¬¦å·åç§°çš„æ¨¡å—ï¼Œé«˜æ˜¯æ­£å¸¸çš„ï¼Œå¯ä»¥å¿½ç•¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563455761,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1266193,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/sOvjoV6STk6SYPHRqVOo7ExojUbc4NgJAd7pGnyQQfJYFS97pYg744PNibalzy6gqZEicoHS2g6ibzK0OLhP6l0TA/132","nickname":"å–œå“¥","note":"","ucode":"47FD02C6CF9292","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3323,"discussion_content":"è°¢è°¢è€å¸ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564395154,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":112056,"user_name":"å°‘ç›","can_delete":false,"product_type":"c1","uid":1305743,"ip_address":"","ucode":"BCC7E264B75702","user_header":"https://static001.geekbang.org/account/avatar/00/13/ec/8f/8299495a.jpg","comment_is_top":false,"comment_ctime":1562661530,"is_pvip":false,"replies":[{"id":"42005","content":"ä¸éœ€è¦é¢å¤–ä¸‹è½½ï¼Œå®‰è£…å¥½ Docker ä¹‹åï¼Œæ ¹æ®æ¡ˆä¾‹çš„æ­¥éª¤æ“ä½œå°±å¯ä»¥äº†","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1563459479,"ip_address":"","comment_id":112056,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1562661530","product_id":100020901,"comment_content":"è€å¸ˆï¼Œå‡†å¤‡å·¥ä½œè¿˜éº»çƒ¦ç»™è¯¦ç»†è®²è®²ï¼Œä¸çŸ¥é“æ€ä¹ˆé…ç½®å‘€<br>Nginx å’Œphpéœ€è¦ä¸‹è½½å—ï¼Œæ–‡ç¨¿ä¸­çš„Dockeré•œåƒæ€ä¹ˆä½¿ç”¨å‘¢","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":457553,"discussion_content":"ä¸éœ€è¦é¢å¤–ä¸‹è½½ï¼Œå®‰è£…å¥½ Docker ä¹‹åï¼Œæ ¹æ®æ¡ˆä¾‹çš„æ­¥éª¤æ“ä½œå°±å¯ä»¥äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563459479,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":112002,"user_name":"Geek_joanie","can_delete":false,"product_type":"c1","uid":1502199,"ip_address":"","ucode":"8539C6460823A0","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIpDaC5iar7IyKERaCAXlH4h7dusfTicSaUtmJWlh0Oh0VViamiclBogXwmkYI4Se72vlHIl2NPNj7kxQ/132","comment_is_top":false,"comment_ctime":1562652100,"is_pvip":false,"replies":[{"id":"41999","content":"å—¯å—¯ï¼Œæœ‰å…³ç³»ã€‚åªæœ‰ root æƒé™çš„æ–‡ä»¶æŒ‚è½½åˆ°å®¹å™¨å†…éƒ¨åä¼šæ— æ³•è®¿é—®ã€‚å®¹å™¨å¯åŠ¨è¿›ç¨‹çš„æ—¶å€™ä¸æ˜¯ç”¨çš„ root ç”¨æˆ·ï¼Œä½ å¯ä»¥ docker exec åˆ°å®¹å™¨å†…éƒ¨ç¡®è®¤ä¸€ä¸‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1563459020,"ip_address":"","comment_id":112002,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1562652100","product_id":100020901,"comment_content":"è€å¸ˆï¼Œæ‚¨å¥½ï¼Œå®¹å™¨è¿è¡Œä»¥åcurlå‘ç°æœ‰permission deniedçš„é—®é¢˜ï¼Œæ‰¾äº†ä¸€ä¸‹æ˜¯ app&#47;ç›®å½•ä¸‹é¢çš„phpæ–‡ä»¶é™¤rootéƒ½æ²¡æœ‰è¯»æƒé™é€ æˆçš„ï¼Œæ”¹è¿‡ä»¥åå¥½äº†ã€‚ä½†æƒé™æ€ä¹ˆä¼šæœ‰é—®é¢˜å‘¢ï¼Ÿå’Œè¿è¡Œdockerçš„ä¸»æœºé…ç½®ç›¸å…³å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":457537,"discussion_content":"å—¯å—¯ï¼Œæœ‰å…³ç³»ã€‚åªæœ‰ root æƒé™çš„æ–‡ä»¶æŒ‚è½½åˆ°å®¹å™¨å†…éƒ¨åä¼šæ— æ³•è®¿é—®ã€‚å®¹å™¨å¯åŠ¨è¿›ç¨‹çš„æ—¶å€™ä¸æ˜¯ç”¨çš„ root ç”¨æˆ·ï¼Œä½ å¯ä»¥ docker exec åˆ°å®¹å™¨å†…éƒ¨ç¡®è®¤ä¸€ä¸‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563459020,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":111154,"user_name":"æ˜€æºª","can_delete":false,"product_type":"c1","uid":1493286,"ip_address":"","ucode":"BFAF31542BC24A","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoCl6Nxf9oW9sDOoibA7p8lKf0jqjPeDszqI4e7iavicQHtbtyibHIhLibyXYAaT02l7GRQvM9BJUxh6yQ/132","comment_is_top":false,"comment_ctime":1562492178,"is_pvip":false,"replies":[{"id":"40434","content":"æ˜¯çš„ï¼Œè¯·å‚è€ƒç¬¬14ç¯‡å¦‚ä½•ç”¨perfå·¥å…·åˆ†æJavaç¨‹åº","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1562509278,"ip_address":"","comment_id":111154,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1562492178","product_id":100020901,"comment_content":"è€å¸ˆï¼Œé’ˆå¯¹Pythonç¨‹åºä½¿ç”¨perfå‘½ä»¤çœ‹ä¸åˆ°å…·ä½“çš„Pythonå‡½æ•°ï¼Œæˆ‘è¿™é‡Œè¯´çš„å‡½æ•°æ˜¯è‡ªå·±åœ¨Pythonæ–‡ä»¶ä¸­ä½¿ç”¨çš„å‡½æ•°ï¼Œè€Œå®ƒéƒ½æ˜¯æ˜¾ç¤ºç±»ä¼¼ PyDict_GetItem æˆ–è€… pyeval_evalframeex ä¹‹ç±»çš„ï¼Œè¿™äº›Pythonçš„libåº“ä¸­çš„æŸä¸ª.soæ–‡ä»¶ä¸­çš„å†…å®¹ã€‚æˆ‘è§‰å¾—é’ˆå¯¹è¿™ç§æƒ…å†µå»åˆ†æJAVAç¨‹åºå¥½åƒä¹Ÿæœ‰é—®é¢˜ã€‚","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":457253,"discussion_content":"æ˜¯çš„ï¼Œè¯·å‚è€ƒç¬¬14ç¯‡å¦‚ä½•ç”¨perfå·¥å…·åˆ†æJavaç¨‹åº","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562509278,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":110542,"user_name":"é˜¿æ–‡","can_delete":false,"product_type":"c1","uid":1106209,"ip_address":"","ucode":"BB4DB62141971F","user_header":"https://static001.geekbang.org/account/avatar/00/10/e1/21/5f0bf9a0.jpg","comment_is_top":false,"comment_ctime":1562291854,"is_pvip":false,"replies":[{"id":"40447","content":"è¿™æ˜¯docker runæŠ¥çš„é”™å—ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1562510502,"ip_address":"","comment_id":110542,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1562291854","product_id":100020901,"comment_content":"Failed to open &#47;usr&#47;lib&#47;x86_64-linux-gnu&#47;libxml2.so.2.9.4 é‡åˆ°è¿™ä¸ªæŠ¥é”™","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456933,"discussion_content":"è¿™æ˜¯docker runæŠ¥çš„é”™å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562510502,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":109814,"user_name":"å¢é‘«","can_delete":false,"product_type":"c1","uid":1104593,"ip_address":"","ucode":"FC2E07DEE50AE0","user_header":"https://static001.geekbang.org/account/avatar/00/10/da/d1/c7437ae8.jpg","comment_is_top":false,"comment_ctime":1562116764,"is_pvip":false,"replies":[{"id":"40100","content":"å—¯å—¯ï¼Œè°¢è°¢åˆ†äº«","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1562249842,"ip_address":"","comment_id":109814,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1562116764","product_id":100020901,"comment_content":"é‚£ä¸ªloadå‘¨æœŸæ€§é«˜ä½†æ˜¯cpuä½çš„ï¼Œå¯ä»¥çœ‹ä¸‹æ˜¯ä¸æ˜¯æœ‰cronbä»»åŠ¡å¯¼è‡´çš„å¤§é‡dçŠ¶æ€è¿›ç¨‹","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456585,"discussion_content":"å—¯å—¯ï¼Œè°¢è°¢åˆ†äº«","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562249842,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":106922,"user_name":"è¾‰æ™–","can_delete":false,"product_type":"c1","uid":1574062,"ip_address":"","ucode":"E5EC033EE4952B","user_header":"https://static001.geekbang.org/account/avatar/00/18/04/ae/0118c132.jpg","comment_is_top":false,"comment_ctime":1561425041,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561425041","product_id":100020901,"comment_content":"å°†perf.dataæ‹·è´åˆ°çš„å®¹å™¨å†…éƒ¨ï¼Œæ‰§è¡Œperf reportè¿˜æ˜¯æ˜¾ç¤ºåå…­è¿›åˆ¶çš„ã€‚<br>æœ€ä¸‹é¢ä¼šæç¤ºCannot load tips.txt file, please install perf","like_count":0},{"had_liked":false,"id":104243,"user_name":"Zack.æ±¤","can_delete":false,"product_type":"c1","uid":1565547,"ip_address":"","ucode":"5F20929B0CA25A","user_header":"https://static001.geekbang.org/account/avatar/00/17/e3/6b/01f6a8ca.jpg","comment_is_top":false,"comment_ctime":1560696757,"is_pvip":false,"replies":[{"id":"37818","content":"åŠ æ²¹ï¼Œæ‰‹æœºç½‘ç»œä¹Ÿå¯ä»¥","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1560764460,"ip_address":"","comment_id":104243,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1560696757","product_id":100020901,"comment_content":"æ‰“å¡ï¼Œè¿™ä¸¤å¤©æ¬å®¶ï¼ˆæ™’ç½‘ï¼‰äº†ï¼Œæƒ­æ„§","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454185,"discussion_content":"åŠ æ²¹ï¼Œæ‰‹æœºç½‘ç»œä¹Ÿå¯ä»¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560764460,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":104234,"user_name":"æå…‰ã€","can_delete":false,"product_type":"c1","uid":1032893,"ip_address":"","ucode":"9E84CF40D83332","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c2/bd/3f096b55.jpg","comment_is_top":false,"comment_ctime":1560693960,"is_pvip":false,"replies":[{"id":"37819","content":"å—¯å—¯","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1560764485,"ip_address":"","comment_id":104234,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1560693960","product_id":100020901,"comment_content":"perf top çœ‹å¾—ä¸æ˜¯å¾ˆç›´è§‚ï¼Œè¿˜æ˜¯ç”¨perf ç”Ÿæˆç«ç„°å›¾å¥½ä¸€äº›","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454182,"discussion_content":"å—¯å—¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560764485,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":103179,"user_name":"Butter Fly","can_delete":false,"product_type":"c1","uid":1564473,"ip_address":"","ucode":"D2B488B465FC3C","user_header":"https://static001.geekbang.org/account/avatar/00/17/df/39/6ead11bc.jpg","comment_is_top":false,"comment_ctime":1560391491,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1560391491","product_id":100020901,"comment_content":"æ‰“å¡","like_count":0},{"had_liked":false,"id":102705,"user_name":"zeech","can_delete":false,"product_type":"c1","uid":1484953,"ip_address":"","ucode":"BB4283A603ECEB","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/RzSnI5bpFSKdOsRPDhgeqvXR0SX96gqRXpcxtfibBp3EopeFC50cuAgBkua36cTGyMWiaEz5O1XzL5sOQ4F9cazA/132","comment_is_top":false,"comment_ctime":1560298418,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1560298418","product_id":100020901,"comment_content":"å¹²è´§æ»¡æ»¡å•Šã€‚æ€§èƒ½åˆ†æå·¥å…·ç»å¸¸ç”¨ï¼Œå¯æ˜¯æœ‰æ—¶å€™è¿˜çœŸä¸çŸ¥é“åˆ†æå‡ºæ¥çš„ç»“æœæ€ä¹ˆçœ‹ã€‚","like_count":0},{"had_liked":false,"id":102103,"user_name":"å°è¥¿å‡ ","can_delete":false,"product_type":"c1","uid":1286375,"ip_address":"","ucode":"ED1DDE17534508","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJjzTQ6HPGw2LWLiaiciaibfdMMlmxEwBkBjxOPxeYynZlBKCf6U1b0ezM9IZYibB6yKR7HpRuAOdtj29Q/132","comment_is_top":false,"comment_ctime":1560136863,"is_pvip":false,"replies":[{"id":"37091","content":"çœ‹é”™è¯¯æ¶ˆæ¯æ˜¯å†…æ ¸é€‰é¡¹æ²¡æœ‰å¼€ï¼Œéœ€è¦æŠŠå†…æ ¸é€‰é¡¹æ‰“å¼€ CONFIG_PERF_EVENTS=y","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1560259682,"ip_address":"","comment_id":102103,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1560136863","product_id":100020901,"comment_content":"è€å¸ˆ,æ‚¨å¥½,æ‰§è¡Œperf top -g -p javapid   å‡ºç°äº†ä¸‹é¢è¿™ä¸ªæŠ¥é”™. ç³»ç»Ÿæ˜¯CentOS6.9  <br>æ˜¯ä¸æ˜¯éœ€è¦é‡æ–°ç¼–è¯‘perf å·¥å…·å‘¢?  å…·ä½“è¦æ€ä¹ˆæ“ä½œå‘¢ ,è°¢è°¢ ~~<br><br><br><br>=====================================================================<br>The sys_perf_event_open() syscall returned with 3 (æ²¡æœ‰é‚£ä¸ªè¿›ç¨‹) for event (cpu-clock).<br>&#47;bin&#47;dmesg may provide additional information.<br>No CONFIG_PERF_EVENTS=y kernel support configured?<br><br><br>Press any key...<br><br><br><br>","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":453260,"discussion_content":"çœ‹é”™è¯¯æ¶ˆæ¯æ˜¯å†…æ ¸é€‰é¡¹æ²¡æœ‰å¼€ï¼Œéœ€è¦æŠŠå†…æ ¸é€‰é¡¹æ‰“å¼€ CONFIG_PERF_EVENTS=y","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560259682,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":100379,"user_name":"æ†¨çš®è‹","can_delete":false,"product_type":"c1","uid":1412429,"ip_address":"","ucode":"D0B4B7660DA766","user_header":"https://static001.geekbang.org/account/avatar/00/15/8d/4d/992070e8.jpg","comment_is_top":false,"comment_ctime":1559541976,"is_pvip":false,"replies":[{"id":"36191","content":"æ¯ç§’æ—¶é—´ä¸­æ–­æ•°","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1559563510,"ip_address":"","comment_id":100379,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1559541976","product_id":100020901,"comment_content":"CPU èŠ‚æ‹ç‡æ˜¯ä»€ä¹ˆæ¦‚å¿µï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":452525,"discussion_content":"æ¯ç§’æ—¶é—´ä¸­æ–­æ•°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1559563510,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":99295,"user_name":"Geek_joanie","can_delete":false,"product_type":"c1","uid":1502199,"ip_address":"","ucode":"8539C6460823A0","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIpDaC5iar7IyKERaCAXlH4h7dusfTicSaUtmJWlh0Oh0VViamiclBogXwmkYI4Se72vlHIl2NPNj7kxQ/132","comment_is_top":false,"comment_ctime":1559187422,"is_pvip":false,"replies":[{"id":"35813","content":"githubé‡Œé¢æ˜¯é•œåƒçš„æºç ï¼Œåˆ‡æ¢åˆ°ç›®å½•ä¸­æ‰§è¡Œmake build å°±å¯ä»¥æ„å»ºdockeré•œåƒ","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1559280253,"ip_address":"","comment_id":99295,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1559187422","product_id":100020901,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œæˆ‘cloneäº†æ‚¨çš„git repoæ€ä¹ˆæ²¡æœ‰æ‰¾åˆ°docker é•œåƒå‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":452050,"discussion_content":"githubé‡Œé¢æ˜¯é•œåƒçš„æºç ï¼Œåˆ‡æ¢åˆ°ç›®å½•ä¸­æ‰§è¡Œmake build å°±å¯ä»¥æ„å»ºdockeré•œåƒ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1559280253,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":97702,"user_name":"MGBIN","can_delete":false,"product_type":"c1","uid":1544152,"ip_address":"","ucode":"AFCDDB29BE89A8","user_header":"https://static001.geekbang.org/account/avatar/00/17/8f/d8/4c66b73b.jpg","comment_is_top":false,"comment_ctime":1558751480,"is_pvip":false,"replies":[{"id":"34965","content":"ä¸ºä»€ä¹ˆæŸ¥è¯¢è¯´ç”¨ä¸åˆ°å¾ˆå¤šè®¡ç®—ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1558793261,"ip_address":"","comment_id":97702,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1558751480","product_id":100020901,"comment_content":"è€å¸ˆèƒ½ä¸èƒ½è§£é‡Šä¸€ä¸‹ï¼Œmysqlçš„æ…¢æŸ¥è¯¢ä¸ºä»€ä¹ˆéƒ½ä¼šä¼´éšç€CPUçš„ä½¿ç”¨ç‡å¢é«˜ã€‚æŒ‰ç†è¯´æŸ¥è¯¢ç”¨ä¸åˆ°å¾ˆå¤šçš„é€»è¾‘è¿ç®—ã€‚æ‰€ä»¥å¯¼è‡´CPUå¢é«˜çš„æœ¬è´¨åŸå› æ˜¯ä»€ä¹ˆï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451378,"discussion_content":"ä¸ºä»€ä¹ˆæŸ¥è¯¢è¯´ç”¨ä¸åˆ°å¾ˆå¤šè®¡ç®—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558793261,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":95670,"user_name":"å°å‘¨","can_delete":false,"product_type":"c1","uid":1404839,"ip_address":"","ucode":"859210BD669B8C","user_header":"https://static001.geekbang.org/account/avatar/00/15/6f/a7/303c1a6b.jpg","comment_is_top":false,"comment_ctime":1558139841,"is_pvip":false,"replies":[{"id":"34568","content":"ä¸ä¼šå‘€ï¼Œè®¡ç®—çš„æ—¶å€™è‚¯å®šè¦å‰”é™¤é‡å¤éƒ¨åˆ†","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1558448193,"ip_address":"","comment_id":95670,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1558139841","product_id":100020901,"comment_content":"æœ‰ä¸ªç–‘é—®ï¼Œuserå·²ç»åŒ…å«äº†guestçš„æ—¶é—´ï¼Œé‚£ä¹ˆæ€»çš„CPUæ—¶é—´é‡Œé¢å²‚ä¸å¤šäº†ä¸€ä¸ªguestæ—¶é—´ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":450550,"discussion_content":"ä¸ä¼šå‘€ï¼Œè®¡ç®—çš„æ—¶å€™è‚¯å®šè¦å‰”é™¤é‡å¤éƒ¨åˆ†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558448193,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":94754,"user_name":"ææ¨æ¬¢","can_delete":false,"product_type":"c1","uid":1529256,"ip_address":"","ucode":"94B304E99F8AB1","user_header":"https://static001.geekbang.org/account/avatar/00/17/55/a8/f91c8b21.jpg","comment_is_top":false,"comment_ctime":1557889551,"is_pvip":false,"replies":[{"id":"34176","content":"è¯·å‚è€ƒ14ç­”ç–‘ç¯‡","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1558096031,"ip_address":"","comment_id":94754,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1557889551","product_id":100020901,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œæˆ‘æŒ‰ç…§è¯¾ç¨‹çš„æ–¹æ³•ï¼Œåœ¨ç”¨perf topæŸ¥æ‰¾php-fpmè¿›ç¨‹çš„å‡½æ•°æ—¶ï¼ŒæŸ¥çœ‹äº†php-fpmçš„æ‰€æœ‰PIDï¼Œå¹¶æ²¡æœ‰å‘ç°sqrtè¿™ä¸ªå‡½æ•°ï¼Œéƒ½æ˜¯16è¿›åˆ¶æ•°ï¼Œè¯·é—®æˆ‘å¯èƒ½å“ªé‡Œå‡ºé—®é¢˜äº†å‘¢ï¼Ÿæˆ‘ç”¨çš„æ˜¯centos7 ","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":450194,"discussion_content":"è¯·å‚è€ƒ14ç­”ç–‘ç¯‡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558096031,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":93940,"user_name":"Musisan","can_delete":false,"product_type":"c1","uid":1500498,"ip_address":"","ucode":"A9A9FE56AABEBA","user_header":"https://static001.geekbang.org/account/avatar/00/16/e5/52/35bc9c07.jpg","comment_is_top":false,"comment_ctime":1557673096,"is_pvip":false,"replies":[{"id":"33786","content":"é€‚ç”¨çš„ï¼Œåªæ˜¯ç”±äºJVMè¿˜éœ€è¦é¢å¤–é…ç½®ï¼Œå…·ä½“æ–¹æ³•è¯·å‚è€ƒ14ç­”ç–‘ç¯‡","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1557835804,"ip_address":"","comment_id":93940,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1557673096","product_id":100020901,"comment_content":"è€å¸ˆï¼Œæˆ‘æƒ³é—®ä¸‹è¿™ç§çš„å¯¹äºjavaç±»å‹çš„åº”ç”¨é€‚ç”¨åˆ†æå—ï¼Ÿå°±æ˜¯è¿è¡Œåœ¨jdkç¯å¢ƒä¸Šçš„javaä¼ä¸šç¨‹åºã€‚","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449837,"discussion_content":"é€‚ç”¨çš„ï¼Œåªæ˜¯ç”±äºJVMè¿˜éœ€è¦é¢å¤–é…ç½®ï¼Œå…·ä½“æ–¹æ³•è¯·å‚è€ƒ14ç­”ç–‘ç¯‡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1557835804,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":91552,"user_name":"å°å…”å­ä¹–ä¹–","can_delete":false,"product_type":"c1","uid":1134266,"ip_address":"","ucode":"E5CC0258CF8858","user_header":"https://static001.geekbang.org/account/avatar/00/11/4e/ba/580ec429.jpg","comment_is_top":false,"comment_ctime":1557053988,"is_pvip":false,"replies":[{"id":"33129","content":"å¯èƒ½è·Ÿ ipv6 æœ‰å…³ï¼Œä½ çš„æœºå™¨æ”¯æŒ ipv6 å—ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1557326859,"ip_address":"","comment_id":91552,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1557053988","product_id":100020901,"comment_content":"docker logs phpfpm<br>[05-May-2019 10:26:15] ERROR: failed to create new listening socket: socket(): Address family not supported by protocol (97)<br>[05-May-2019 10:26:15] ERROR: FPM initialization failed<br><br>è€å¸ˆï¼Œæˆ‘æŠŠnginx-high-cpuç›®å½•ä¸‹é¢æ‰€æœ‰çš„é…ç½®æ–‡ä»¶listençš„ç«¯å£å‰é¢åŠ äº†0.0.0.0ï¼Œå¯æ˜¯è¿˜ä¸€æ ·æŠ¥è¿™ä¸ªé”™å‘¢ï¼Œè¦æ€ä¹ˆè§£å†³å‘¢ï¼Ÿcentos6çš„ç³»ç»Ÿ","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":448943,"discussion_content":"å¯èƒ½è·Ÿ ipv6 æœ‰å…³ï¼Œä½ çš„æœºå™¨æ”¯æŒ ipv6 å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1557326859,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":91422,"user_name":"èŒè°¨ç†™","can_delete":false,"product_type":"c1","uid":1305680,"ip_address":"","ucode":"FEFA26F3BECB91","user_header":"https://static001.geekbang.org/account/avatar/00/13/ec/50/3868396c.jpg","comment_is_top":false,"comment_ctime":1557034509,"is_pvip":false,"replies":[{"id":"33130","content":"åœºæ™¯æ˜¯ä¸€æ ·çš„ï¼Œä½†è¿™ä¸¤è€…çš„å«ä¹‰ä¸å®Œå…¨ä¸€æ ·ï¼šå¹³å‡è´Ÿè½½ä¸­ååº”çš„å°±æ˜¯I&#47;Oå‹åŠ›ï¼Œè€ŒCPUä½¿ç”¨ç‡ä¸­ååº”çš„æ˜¯CPUå¤„äºç­‰å¾…I&#47;OçŠ¶æ€æ—¶çš„æ—¶é—´","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1557327167,"ip_address":"","comment_id":91422,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1557034509","product_id":100020901,"comment_content":"ç–‘æƒ‘ï¼š<br>æˆ‘è§‚å¯Ÿåˆ°åœ¨æœ¬èŠ‚[CPUä½¿ç”¨ç‡]ä¸­ï¼Œå…³äºCPUä½¿ç”¨ç‡çš„è®¡ç®—å…¬å¼æ˜¯è¿™æ ·çš„ï¼š<br>        CPU ä½¿ç”¨ç‡ = 1 - (ç©ºé—²æ—¶é—´ &#47; æ€»CPUæ—¶é—´)<br>å¹¶é™„å¸¦æ³¨è§£ï¼šCPUä½¿ç”¨ç‡ï¼Œå°±æ˜¯é™¤äº†ç©ºé—²æ—¶é—´å¤–çš„å…¶ä»–æ—¶é—´å æ€»CPUæ—¶é—´çš„ç™¾åˆ†æ¯”<br><br>åœ¨CPUä½¿ç”¨ç‡çš„è®¡ç®—ä¸­ï¼Œç”¨åˆ°çš„ç©ºé—²æ—¶é—´(idle)æ³¨è§£åŸè¯å¦‚ä¸‹ï¼š<br>* idle (é€šå¸¸ç¼©å†™ä¸ºid)ï¼Œä»£è¡¨ç©ºé—²æ—¶é—´ã€‚æ³¨æ„ï¼Œå®ƒä¸åŒ…æ‹¬ç­‰å¾…I&#47;Oçš„æ—¶é—´(iowait)<br><br>é‚£ä¹ˆæˆ‘å¯ä»¥ç†è§£ä¸ºï¼Œiowaitæ˜¯æœ‰ç®—åœ¨CPUä½¿ç”¨ç‡è®¡ç®—ä¸­çš„ï¼Œå³æ­¤å¤„çš„iowaitè¶Šå¤§ï¼ŒCPUä½¿ç”¨ç‡è¶Šé«˜ã€‚<br><br>ç°åœ¨æˆ‘ä»¬å›åˆ°ç¬¬ä¸€èŠ‚[å¹³å‡è´Ÿè½½]çœ‹ä¸€ä¸‹ç›¸å…³æè¿°ï¼š<br>å¹³å‡è´Ÿè½½æ—¶æŒ‡å•ä½æ—¶é—´å†…ï¼Œç³»ç»Ÿå¤„äºå¯è¿è¡ŒçŠ¶æ€å’Œä¸å¯ä¸­æ–­çŠ¶æ€çš„å¹³å‡è¿›ç¨‹æ•°ã€‚å…¶ä¸­ä¸å¯ä¸­æ–­çŠ¶æ€æŒ‡çš„æ˜¯å¤„äºå†…æ ¸æ€å…³é”®æµç¨‹ä¸­çš„è¿›ç¨‹ï¼Œæœ€å¸¸è§çš„æ˜¯ç­‰å¾…ç¡¬ä»¶è®¾å¤‡çš„I&#47;Oå“åº”ã€‚<br><br>[å¹³å‡è´Ÿè½½]è¿™ä¸€è¯¾çš„å°ç»“ä¸­åˆæåˆ°ï¼šå¹³å‡è´Ÿè½½é«˜å¹¶ä¸ä¸€å®šä»£è¡¨CPUä½¿ç”¨ç‡é«˜ï¼Œè¿˜æœ‰å¯èƒ½æ˜¯I&#47;Oæ›´ç¹å¿™äº†ï¼›å¯ä»¥çœ‹å‡ºæ­¤å¤„æ²¡æœ‰æŠŠI&#47;Oç­‰å¾…å½’å¹¶åˆ°CPUä½¿ç”¨ç‡çš„è®¡ç®—ä¸­ã€‚ä½†æ˜¯åœ¨[CPUä½¿ç”¨ç‡]è¿™ä¸€è¯¾ä¸­ï¼ŒåˆæŠŠI&#47;Oç­‰å¾…çš„æ—¶é—´è®¡ç®—åˆ°CPUä½¿ç”¨ç‡äº†ã€‚<br><br>é‚£ä¹ˆæˆ‘çš„é—®é¢˜æ˜¯ï¼Œåœ¨[å¹³å‡è´Ÿè½½]ä¸­çš„&quot;ç­‰å¾…ç¡¬ä»¶è®¾å¤‡çš„I&#47;Oå“åº”&quot; å’Œåœ¨[CPUä½¿ç”¨ç‡]ä¸­çš„â€œiowaitâ€ä¸¤è€…æ˜¯ä¸æ˜¯åŒä¸€ä¸ªæ¦‚å¿µï¼Ÿå¦‚æœæ˜¯çš„è¯ï¼Œé‚£ä¹ˆè¯·ä½œè€…æ£€æŸ¥ä¸€ä¸‹[å¹³å‡è´Ÿè½½]å’Œ[CPUä½¿ç”¨ç‡]è¿™ä¸¤èŠ‚è¯¾ï¼Œçœ‹çœ‹å…·ä½“æ˜¯å“ªå‡ºçš„æè¿°å‡ºç°äº†è°¬è¯¯ã€‚<br><br>å¸Œæœ›æˆ‘çš„è¡¨è¾¾èƒ½å¤Ÿè®©æ‚¨çŸ¥é“æˆ‘é‡åˆ°çš„å›°æƒ‘ï¼ŒæœŸå¾…æ‚¨çš„å›å¤~","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":448913,"discussion_content":"åœºæ™¯æ˜¯ä¸€æ ·çš„ï¼Œä½†è¿™ä¸¤è€…çš„å«ä¹‰ä¸å®Œå…¨ä¸€æ ·ï¼šå¹³å‡è´Ÿè½½ä¸­ååº”çš„å°±æ˜¯I/Oå‹åŠ›ï¼Œè€ŒCPUä½¿ç”¨ç‡ä¸­ååº”çš„æ˜¯CPUå¤„äºç­‰å¾…I/OçŠ¶æ€æ—¶çš„æ—¶é—´","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1557327167,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":89839,"user_name":"å¤§å®","can_delete":false,"product_type":"c1","uid":1321975,"ip_address":"","ucode":"FC1BCF0464B6D6","user_header":"https://static001.geekbang.org/account/avatar/00/14/2b/f7/f5ae026c.jpg","comment_is_top":false,"comment_ctime":1556280822,"is_pvip":false,"replies":[{"id":"32218","content":"æ£€æŸ¥ä¸‹ç³»ç»Ÿæ—¥å¿—ï¼Œä¸€èˆ¬éƒ½å¯ä»¥çœ‹åˆ°é‡å¯çš„åŸå› ","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1556370180,"ip_address":"","comment_id":89839,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1556280822","product_id":100020901,"comment_content":"ç”Ÿäº§ç¯å¢ƒï¼Œtomcatå¯åŠ¨çš„æ—¶å€™cpuå ç”¨ç‡æ¯”è¾ƒé«˜50%ï¼Œç„¶åè™šæ‹Ÿæœºå°±è‡ªåŠ¨é‡å¯äº†ï¼Œè€å¸ˆæˆ‘æƒ³é—®çš„æ˜¯ï¼Œlinuxï¼ˆcentos6.9ï¼‰æ˜¯ä¸æ˜¯æœ‰ä»€ä¹ˆæœºåˆ¶ ä¼šè§¦å‘è‡ªåŠ¨é‡å¯ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":448282,"discussion_content":"æ£€æŸ¥ä¸‹ç³»ç»Ÿæ—¥å¿—ï¼Œä¸€èˆ¬éƒ½å¯ä»¥çœ‹åˆ°é‡å¯çš„åŸå› ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1556370180,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":89424,"user_name":"æ¶›æ¶›","can_delete":false,"product_type":"c1","uid":1180810,"ip_address":"","ucode":"747C4B1F20A2D3","user_header":"https://static001.geekbang.org/account/avatar/00/12/04/8a/ff94bd60.jpg","comment_is_top":false,"comment_ctime":1556172265,"is_pvip":false,"replies":[{"id":"32223","content":"ğŸ‘è°¢è°¢åˆ†äº«","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1556370351,"ip_address":"","comment_id":89424,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1556172265","product_id":100020901,"comment_content":"æˆ‘æ˜¯åœ¨macä¸Šç”¨çš„ubuntuè™šæ‹Ÿæœºï¼Œå®‰è£…perfä¸ä»…ä½¿ç”¨äº†apt install linux-tools-genericï¼Œ<br>è¿˜æŒ‰ç…§ç³»ç»Ÿæç¤ºå®‰è£…äº†ç‰¹å®šç‰ˆæœ¬çš„apt install linux-tools-generic-xxxx","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":448126,"discussion_content":"ğŸ‘è°¢è°¢åˆ†äº«","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1556370351,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":88362,"user_name":"ä¸Šå–„è‹¥æ°´","can_delete":false,"product_type":"c1","uid":1122544,"ip_address":"","ucode":"42D2C732E3E6EF","user_header":"https://static001.geekbang.org/account/avatar/00/11/20/f0/84f3cbe0.jpg","comment_is_top":false,"comment_ctime":1555911168,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1555911168","product_id":100020901,"comment_content":"è€å¸ˆç»™æˆ‘ä»¬è®²äº†ä¸€ä¸ªå¦‚ä½•æŒ–æ˜&quot;è°ƒçš®&quot;ä»£ç çš„æ•…äº‹ã€‚å°†åŸç†çŸ¥è¯†å’Œå·¥å…·æŠ€èƒ½è‡ªç„¶çš„ä¸²è”èµ·æ¥äº†ã€‚æœ‰è¶£åˆæœ‰æ”¶è´§ï¼Œå¤šè°¢å¤šè°¢ï½","like_count":0},{"had_liked":false,"id":83197,"user_name":"Maxwell","can_delete":false,"product_type":"c1","uid":1086275,"ip_address":"","ucode":"720A00AD472616","user_header":"https://static001.geekbang.org/account/avatar/00/10/93/43/0e84492d.jpg","comment_is_top":false,"comment_ctime":1554457266,"is_pvip":false,"replies":[{"id":"30188","content":"è¿™æ˜¯php-fpmçš„é…ç½®ï¼Œabçš„å¹¶å‘æ•°å†å¤šï¼Œä¹Ÿä¸ä¼šå¢åŠ php-fpmé…ç½®çš„æœ€å¤§å·¥ä½œçº¿ç¨‹æ•°","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1554638570,"ip_address":"","comment_id":83197,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1554457266","product_id":100020901,"comment_content":"abçš„å¹¶å‘è¯·æ±‚æ˜¯10ä¸ªï¼Œä¸ºä»€ä¹ˆtopä¸­åªæœ‰5ä¸ªphp-fpmè¿›ç¨‹å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445914,"discussion_content":"è¿™æ˜¯php-fpmçš„é…ç½®ï¼Œabçš„å¹¶å‘æ•°å†å¤šï¼Œä¹Ÿä¸ä¼šå¢åŠ php-fpmé…ç½®çš„æœ€å¤§å·¥ä½œçº¿ç¨‹æ•°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554638570,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":81192,"user_name":"å¤§åç‹ç‹¸","can_delete":false,"product_type":"c1","uid":1325678,"ip_address":"","ucode":"5044F89A505C5B","user_header":"https://static001.geekbang.org/account/avatar/00/14/3a/6e/e39e90ca.jpg","comment_is_top":false,"comment_ctime":1553827877,"is_pvip":false,"replies":[{"id":"29587","content":"çœ‹çœ‹perfç•Œé¢ä¸­æœ‰æ²¡æœ‰è­¦å‘Šä¿¡æ¯ï¼Ÿåº”è¯¥ä¼šå‘Šè¯‰ä½ é‚£äº›ç¬¦å·æ‰¾ä¸åˆ°","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1554003476,"ip_address":"","comment_id":81192,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1553827877","product_id":100020901,"comment_content":"å¹¶æ²¡æœ‰å®‰è£…docker ç›´æ¥åœ¨vagrant ä¸­è¿è¡Œä¹Ÿæ˜¯åªèƒ½çœ‹åˆ°16è¿›åˆ¶çš„å‡½æ•°åã€‚ã€‚ã€‚","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445112,"discussion_content":"çœ‹çœ‹perfç•Œé¢ä¸­æœ‰æ²¡æœ‰è­¦å‘Šä¿¡æ¯ï¼Ÿåº”è¯¥ä¼šå‘Šè¯‰ä½ é‚£äº›ç¬¦å·æ‰¾ä¸åˆ°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554003476,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":80432,"user_name":"ä¸€æƒ³å†æƒ³N","can_delete":false,"product_type":"c1","uid":1003453,"ip_address":"","ucode":"EA22728C2A43F2","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4f/bd/6d825f68.jpg","comment_is_top":false,"comment_ctime":1553660498,"is_pvip":true,"replies":[{"id":"29331","content":"çœ‹çœ‹ç³»ç»Ÿæ—¥å¿—ï¼Œåº”è¯¥ä¼šæœ‰é‡å¯çš„åŸå› ","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1553697618,"ip_address":"","comment_id":80432,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1553660498","product_id":100020901,"comment_content":"ä¸ºå•¥æˆ‘åœ¨çº¿ä¸ŠæœåŠ¡å™¨æ‰§è¡Œ perf record å‘½ä»¤æœºç‡cpuå ç”¨ç‡é«˜çš„è¿›ç¨‹ï¼ŒæœåŠ¡å™¨å°±ä¼šè‡ªåŠ¨é‡å¯ï¼Œè¢«å‘äº†ä¸¤æ¬¡äº†ã€‚æˆ‘ä»¥ä¸ºæ˜¯æˆ‘æ“ä½œä¸å¯¹å‘¢ï¼Œç¢°åˆ°äº†ä¸¤æ¬¡ï¼Œå‘æ­»æˆ‘äº†ã€‚","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":444863,"discussion_content":"çœ‹çœ‹ç³»ç»Ÿæ—¥å¿—ï¼Œåº”è¯¥ä¼šæœ‰é‡å¯çš„åŸå› ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553697618,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":78623,"user_name":"å†°å‡Œ","can_delete":false,"product_type":"c1","uid":1394578,"ip_address":"","ucode":"5C9EADFEDBF4E5","user_header":"https://static001.geekbang.org/account/avatar/00/15/47/92/f6a832c3.jpg","comment_is_top":false,"comment_ctime":1553184540,"is_pvip":false,"replies":[{"id":"28753","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1553317319,"ip_address":"","comment_id":78623,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1553184540","product_id":100020901,"comment_content":"1. CPUä½¿ç”¨ç‡æ€ä¹ˆè®¡ç®—çš„ï¼Ÿ<br>          å‰é¢è®²è¿‡CPUä½¿ç”¨ç‡æ˜¯å•ä½æ—¶é—´å†…CPUä½¿ç”¨æƒ…å†µçš„ç»Ÿè®¡ï¼Œå¦‚æœæˆ‘ä»¬åªå…³æ³¨ç³»ç»Ÿçš„CPUå’Œä»»åŠ¡ç»Ÿè®¡ä¿¡æ¯ï¼Œå¯ä»¥é€šè¿‡ï¼proc&#47;statæ¥ç»Ÿè®¡ï¼Œä½†æ˜¯ååº”çš„æ˜¯å¼€æœºæ—¶é—´ä»¥æ¥å¹³å‡CPUä½¿ç”¨ç‡ï¼Œæ²¡æœ‰æ„ä¹‰<br>          CPUä½¿ç”¨ç‡å¸¸è§çš„é‡è¦æŒ‡æ ‡æœ‰ï¼š<br>          <br>userï¼ˆusï¼‰<br>ç”¨æˆ·æ€CPUçš„æ—¶é—´ï¼Œæ³¨æ„ä¸åŒ…æ‹¬niceæ—¶é—´<br>niceï¼ˆniï¼‰<br>ä½ä¼˜å…ˆçº§ç”¨æˆ·æ€CPUæ—¶é—´<br>systemï¼ˆsysï¼‰<br>å†…æ ¸æ€CPUæ—¶é—´<br>idleï¼ˆidï¼‰<br>ç©ºé—²æ—¶é—´ï¼Œä¸åŒ…æ‹¬ç­‰å¾…I&#47;Oçš„æ—¶é—´ï¼ˆiowaitï¼‰<br>iowaitï¼ˆwaï¼‰<br>ç­‰å¾…I&#47;Oçš„CPUæ—¶é—´<br>irqï¼ˆhiï¼‰<br>ç¡¬ä¸­æ–­çš„CPUæ—¶é—´<br>softirqï¼ˆsiï¼‰<br>å¤„ç†è½¯ä¸­æ–­çš„CPUæ—¶é—´<br>CPU ä½¿ç”¨ç‡ï¼Œå°±æ˜¯é™¤äº†ç©ºé—²æ—¶é—´å¤–çš„å…¶ä»–æ—¶é—´å æ€» CPU æ—¶é—´çš„ç™¾åˆ†æ¯”<br>CPUä½¿ç”¨ç‡ = 1 - ï¼ˆç©ºé—²æ—¶é—´ï¼‰ï¼ ï¼ˆæ€»CPUæ—¶é—´ï¼‰<br>ä½†æ˜¯å®æ—¶CPUä½¿ç”¨ç‡éƒ½æ˜¯é€šè¿‡ä»¥ä¸‹å…¬å¼è®¡ç®—çš„ï¼š<br>CPUä½¿ç”¨ç‡é«˜ = 1 - ã€ç©ºé—²æ—¶é—´(newï¼‰- ç©ºé—²æ—¶é—´ï¼ˆoldï¼‰ã€‘ï¼ã€æ€»CPUæ—¶é—´ï¼ˆnewï¼‰- æ€»CPUæ—¶é—´ï¼ˆoldï¼‰ã€‘<br><br>2. å¦‚ä½•æŸ¥çœ‹CPUä½¿ç”¨ç‡ <br>        top æ˜¾ç¤ºäº†ç³»ç»Ÿæ€»ä½“çš„ CPU å’Œå†…å­˜ä½¿ç”¨æƒ…å†µï¼Œä»¥åŠå„ä¸ªè¿›ç¨‹çš„èµ„æºä½¿ç”¨æƒ…å†µ<br>        Psåˆ™åªæ˜¾ç¤ºäº†æ¯ä¸ªè¿›ç¨‹çš„èµ„æºä½¿ç”¨æƒ…å†µ<br><br>3. CPUä½¿ç”¨ç‡è¿‡é«˜æ€ä¹ˆåŠï¼Ÿ<br>          æ–¹æ³•ä¸€ï¼šPerf topï¼Œå®ƒèƒ½å¤Ÿå®æ—¶æ˜¾ç¤ºå ç”¨ CPU æ—¶é’Ÿæœ€å¤šçš„å‡½æ•°æˆ–è€…æŒ‡ä»¤ï¼Œå› æ­¤å¯ä»¥æŸ¥æ‰¾çƒ­ç‚¹å‡½æ•°<br>       æ–¹æ³•äºŒï¼šperf record å’Œ perf reportã€‚å¯ç”¨äºç¦»çº¿åˆ†æ","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":444169,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553317319,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":77243,"user_name":"Jec","can_delete":false,"product_type":"c1","uid":1452205,"ip_address":"","ucode":"3E0C0C13292B03","user_header":"https://static001.geekbang.org/account/avatar/00/16/28/ad/9a2ab0cf.jpg","comment_is_top":false,"comment_ctime":1552895383,"is_pvip":false,"replies":[{"id":"28158","content":"ä¸€æ ·çš„æ€è·¯ï¼Œåªæ˜¯javaæœ‰JVMçš„å­˜åœ¨ï¼Œä»è¿›ç¨‹ä¸Šä¸èƒ½ç›´æ¥çœ‹åˆ°åº”ç”¨çš„å †æ ˆï¼Œæ‰€ä»¥è¦å…ˆå¯¼å‡ºç¬¦åˆè¡¨","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1552903187,"ip_address":"","comment_id":77243,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1552895383","product_id":100020901,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œå¯¹åº”javaç¨‹åºçš„cpué«˜ï¼Œæ€æ ·æ’æŸ¥é—®é¢˜å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443654,"discussion_content":"ä¸€æ ·çš„æ€è·¯ï¼Œåªæ˜¯javaæœ‰JVMçš„å­˜åœ¨ï¼Œä»è¿›ç¨‹ä¸Šä¸èƒ½ç›´æ¥çœ‹åˆ°åº”ç”¨çš„å †æ ˆï¼Œæ‰€ä»¥è¦å…ˆå¯¼å‡ºç¬¦åˆè¡¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552903187,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1111985,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f7/b1/982ea185.jpg","nickname":"Frank","note":"","ucode":"9DADD72C193296","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":335550,"discussion_content":"å…ˆå¯¼å‡ºç¬¦åˆè¡¨æ˜¯ä»€ä¹ˆæ„æ€å“¦ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608217546,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":74268,"user_name":"å°åå“¥","can_delete":false,"product_type":"c1","uid":1178380,"ip_address":"","ucode":"546EF8803E101F","user_header":"https://static001.geekbang.org/account/avatar/00/11/fb/0c/85d60820.jpg","comment_is_top":false,"comment_ctime":1552150850,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"1552150850","product_id":100020901,"comment_content":"å‘ç°æˆ‘å¯¹CPUä½¿ç”¨ç‡å®Œå…¨å¤„äºå°ç™½çš„çŠ¶æ€","like_count":0},{"had_liked":false,"id":73526,"user_name":"è¨«è‡³ç¦ä¸´","can_delete":false,"product_type":"c1","uid":1317820,"ip_address":"","ucode":"4192697D776B83","user_header":"https://static001.geekbang.org/account/avatar/00/14/1b/bc/893cb1bb.jpg","comment_is_top":false,"comment_ctime":1551920718,"is_pvip":false,"replies":[{"id":"27320","content":"é€å±‚å±•å¼€ï¼Œæ‰¾æ¯”ä¾‹æœ€é«˜çš„","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1552347924,"ip_address":"","comment_id":73526,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1551920718","product_id":100020901,"comment_content":"è€å¸ˆä½ å¥½ï¼Œéº»çƒ¦å…·ä½“è§£é‡Šä¸‹ä»¥ä¸‹ç»“è®ºçš„æ¨å¯¼è¿‡ç¨‹ï¼Œè°¢è°¢ï¼š<br><br>æŒ‰æ–¹å‘é”®åˆ‡æ¢åˆ° php-fpmï¼Œå†æŒ‰ä¸‹å›è½¦é”®å±•å¼€ php-fpm çš„è°ƒç”¨å…³ç³»ï¼Œä½ ä¼šå‘ç°ï¼Œè°ƒç”¨å…³ç³»æœ€ç»ˆåˆ°äº† sqrt å’Œ add_functionã€‚<br><br>ä¸ºä»€ä¹ˆä¸æ˜¯16è¿›åˆ¶é‚£äº›ï¼Œè€Œæ˜¯è¿™ä¸¤ä¸ªæ›´â€œå¥½â€çœ‹çš„ï¼Œè°¢è°¢","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442132,"discussion_content":"é€å±‚å±•å¼€ï¼Œæ‰¾æ¯”ä¾‹æœ€é«˜çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552347924,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":71990,"user_name":"Boy-struggle","can_delete":false,"product_type":"c1","uid":1402286,"ip_address":"","ucode":"94113E2837DC29","user_header":"https://static001.geekbang.org/account/avatar/00/15/65/ae/9727318e.jpg","comment_is_top":false,"comment_ctime":1551495353,"is_pvip":false,"replies":[{"id":"26323","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1551705352,"ip_address":"","comment_id":71990,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1551495353","product_id":100020901,"comment_content":"æ‰“å¡ï¼Œcpuä½¿ç”¨ç‡ä¹‹å‰ä¸€ç›´æ²¡æœ‰æ·±å…¥åˆ†æï¼Œæœ€å¤§æ”¶è·æ˜¯perf","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441420,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551705352,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":71157,"user_name":"é™ˆå¹³","can_delete":false,"product_type":"c1","uid":1247180,"ip_address":"","ucode":"8FFDE00E4BCDAB","user_header":"https://static001.geekbang.org/account/avatar/00/13/07/cc/6601c339.jpg","comment_is_top":false,"comment_ctime":1551275036,"is_pvip":false,"replies":[{"id":"25718","content":"çœ‹çœ‹perfç•Œé¢æœ€åä¸€è¡Œæœ‰ä»€ä¹ˆé”™è¯¯ä¿¡æ¯ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1551399778,"ip_address":"","comment_id":71157,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1551275036","product_id":100020901,"comment_content":"docker: net&#47;http: request canceled while waiting for connection (Client.Timeout exceeded while awaiting headers).<br><br><br>è¿™ä¸ªé—®é¢˜<br>#ä¸‹è½½åŠ é€Ÿå™¨<br>#curl -sSL https:&#47;&#47;get.daocloud.io&#47;daotools&#47;set_mirror.sh | sh -s http:&#47;&#47;abcd1234.m.daocloud.io<br>#é‡å¯docker<br>#systemctl restart docker<br><br><br>chen@p:~$ sudo perf top -g -p 13038<br>[sudo] chen çš„å¯†ç ï¼š<br><br>   PerfTop:       0 irqs&#47;sec  kernel: 0.0%  exact:  0.0% lost: 0&#47;0 drop: 0&#47;0 [4000Hz cycles:ppp],  (target_pid: 13038)<br>----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------<br><br>   PerfTop:       0 irqs&#47;sec  kernel: 0.0%  exact:  0.0% lost: 0&#47;0 drop: 0&#47;0 [4000Hz cycles:ppp],  (target_pid: 13038)<br>----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------<br><br>   PerfTop:       0 irqs&#47;sec  kernel: 0.0%  exact:  0.0% lost: 0&#47;0 drop: 0&#47;0 [4000Hz cycles:ppp],  (target_pid: 13038)<br>----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------<br><br>   PerfTop:       0 irqs&#47;sec  kernel: 0.0%  exact:  0.0% lost: 0&#47;0 drop: 0&#47;0 [4000Hz cycles:ppp],  (target_pid: 13038)<br>----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------<br><br>è¿™ä¸ªæ€ä¹ˆæ²¡æœ‰å‡½æ•°ï¼Œå°±è¾“å‡ºä¸Šé¢è¿™äº›ï¼Œæ˜¯ç‰ˆæœ¬ä¸å¯¹å—<br>chen@p:~$ perf --version<br>perf version 5.0.rc7.ge60b5f","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441018,"discussion_content":"çœ‹çœ‹perfç•Œé¢æœ€åä¸€è¡Œæœ‰ä»€ä¹ˆé”™è¯¯ä¿¡æ¯ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551399778,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":70496,"user_name":"é™ˆå¹³","can_delete":false,"product_type":"c1","uid":1247180,"ip_address":"","ucode":"8FFDE00E4BCDAB","user_header":"https://static001.geekbang.org/account/avatar/00/13/07/cc/6601c339.jpg","comment_is_top":false,"comment_ctime":1551107034,"is_pvip":false,"replies":[{"id":"25362","content":"å¯ä»¥æ¢ä¸ªæ—¶é—´è¯•è¯•ï¼Œæˆ–è€…æ¢æˆå›½å†…çš„é•œåƒï¼Œæ¯”å¦‚<br><br>docker pull dockerhub.azk8s.cn&#47;feisky&#47;nginx","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1551195403,"ip_address":"","comment_id":70496,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1551107034","product_id":100020901,"comment_content":"chen@p:~$ sudo docker run --name nginx -p 10000:80 -itd feisky&#47;nginx<br>[sudo] chen çš„å¯†ç ï¼š<br>Unable to find image &#39;feisky&#47;nginx:latest&#39; locally<br>docker: Error response from daemon: Get https:&#47;&#47;registry-1.docker.io&#47;v2&#47;feisky&#47;nginx&#47;manifests&#47;latest: Get https:&#47;&#47;auth.docker.io&#47;token?scope=repository%3Afeisky%2Fnginx%3Apull&amp;service=registry.docker.io: net&#47;http: request canceled while waiting for connection (Client.Timeout exceeded while awaiting headers).<br>See &#39;docker run --help&#39;.<br>chen@p:~$ sudo docker run --name nginx -p 10000:80 -itd feisky&#47;nginx<br>Unable to find image &#39;feisky&#47;nginx:latest&#39; locally<br>latest: Pulling from feisky&#47;nginx<br>802b00ed6f79: Retrying in 1 second<br>c16436dbc224: Downloading  8.035MB&#47;22.18MB<br>683eac851b28: Download complete<br>5bd58d400603: Downloading<br>c33cad8d5f27: Waiting<br>ae2759a7f424: Waiting<br>docker: net&#47;http: request canceled while waiting for connection (Client.Timeout exceeded while awaiting headers).<br><br><br>ä¸‹è½½å®‰è£…ä¸äº†ï¼Œæ€ä¹ˆåŠ","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":440664,"discussion_content":"å¯ä»¥æ¢ä¸ªæ—¶é—´è¯•è¯•ï¼Œæˆ–è€…æ¢æˆå›½å†…çš„é•œåƒï¼Œæ¯”å¦‚\n\ndocker pull dockerhub.azk8s.cn/feisky/nginx","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551195403,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1786203,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/41/5b/aa3ca816.jpg","nickname":"Cathy","note":"","ucode":"9C474FE2C70F38","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":309650,"discussion_content":"$ docker pull\næç¤º403 Forbidden","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1601377631,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":70476,"user_name":"é™ˆå¹³","can_delete":false,"product_type":"c1","uid":1247180,"ip_address":"","ucode":"8FFDE00E4BCDAB","user_header":"https://static001.geekbang.org/account/avatar/00/13/07/cc/6601c339.jpg","comment_is_top":false,"comment_ctime":1551104640,"is_pvip":false,"replies":[{"id":"25360","content":"é•œåƒæ‹‰å–è¶…æ—¶äº†ï¼Œå¯ä»¥å†é‡è¯•ä¸‹","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1551195215,"ip_address":"","comment_id":70476,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1551104640","product_id":100020901,"comment_content":"chen@p:~$ sudo docker run --name nginx -p 10000:80 -itd feisky&#47;nginx<br>Unable to find image &#39;feisky&#47;nginx:latest&#39; locally<br>latest: Pulling from feisky&#47;nginx<br>802b00ed6f79: Retrying in 1 second<br>c16436dbc224: Downloading  8.035MB&#47;22.18MB<br>683eac851b28: Download complete<br>5bd58d400603: Downloading<br>c33cad8d5f27: Waiting<br>ae2759a7f424: Waiting<br>docker: net&#47;http: request canceled while waiting for connection (Client.Timeout exceeded while awaiting headers).<br>See &#39;docker run --help&#39;.<br><br><br><br>","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":440655,"discussion_content":"é•œåƒæ‹‰å–è¶…æ—¶äº†ï¼Œå¯ä»¥å†é‡è¯•ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551195215,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":70330,"user_name":"å°çŒª","can_delete":false,"product_type":"c1","uid":1201662,"ip_address":"","ucode":"EAD6A4876CEF3B","user_header":"https://static001.geekbang.org/account/avatar/00/12/55/fe/ab541300.jpg","comment_is_top":false,"comment_ctime":1551076403,"is_pvip":false,"replies":[{"id":"25355","content":"ååº”å¡é¡¿æœ‰å¤šç§åŸå› ï¼Œé™¤äº†CPUä¹‹å¤–ï¼Œè¿˜æœ‰å†…å­˜ã€ç£ç›˜I&#47;Oå’Œç½‘ç»œã€‚å¯ä»¥è¯•ç€ä»æ¯ä¸ªèµ„æºæ’æŸ¥ä¸‹ï¼Œåé¢éƒ½ä¼šè®²åˆ°ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1551195065,"ip_address":"","comment_id":70330,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1551076403","product_id":100020901,"comment_content":"ä½¿ç”¨topæŸ¥çœ‹ï¼Œ<br>load average: 47.00, 46.92, 46.02  å¾ˆé«˜ï¼Œ<br>ä½†æ˜¯CPUä½¿ç”¨ç‡æ˜¯ï¼š%Cpu(s): 0.3 us, 0.3 sy, 0.0 ni, 99.3 id, 0.0 wa, 0.0 hi, 0.0 si, 0.0 st<br>ç³»ç»Ÿååº”å¡é¡¿ï¼Œè¿™ç§æƒ…å†µæ€ä¹ˆæŸ¥çœ‹é—®é¢˜å‘¢ï¼Ÿ<br>","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":440565,"discussion_content":"ååº”å¡é¡¿æœ‰å¤šç§åŸå› ï¼Œé™¤äº†CPUä¹‹å¤–ï¼Œè¿˜æœ‰å†…å­˜ã€ç£ç›˜I/Oå’Œç½‘ç»œã€‚å¯ä»¥è¯•ç€ä»æ¯ä¸ªèµ„æºæ’æŸ¥ä¸‹ï¼Œåé¢éƒ½ä¼šè®²åˆ°ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551195065,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":70302,"user_name":"BigBao","can_delete":false,"product_type":"c1","uid":1229603,"ip_address":"","ucode":"1002BA63F1657A","user_header":"https://static001.geekbang.org/account/avatar/00/12/c3/23/dbc999e4.jpg","comment_is_top":false,"comment_ctime":1551066550,"is_pvip":false,"replies":[{"id":"25354","content":"å—¯å—¯ï¼Œè¿™æ˜¯å¾ˆæ­£å¸¸çš„ç°è±¡ï¼Œè´Ÿè½½ä¸ä¸€æ€»æ˜¯å‡è¡¡çš„ã€‚ä¸è¿‡ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯è¿™å‡ å°æœºå™¨å‡ºç°äº†æ•…éšœã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1551194990,"ip_address":"","comment_id":70302,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1551066550","product_id":100020901,"comment_content":"æœ€å°´å°¬çš„é—®é¢˜å°±æ˜¯åŒä¸€ä¸ªé›†ç¾¤ï¼Œåœ¨å…¶ä¸­å‡ å°æœºå™¨CPUæ­£å¸¸ï¼Œä½†æ˜¯å¦å¤–å‡ å°æœºå™¨CPUå¾ˆé«˜","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":440555,"discussion_content":"å—¯å—¯ï¼Œè¿™æ˜¯å¾ˆæ­£å¸¸çš„ç°è±¡ï¼Œè´Ÿè½½ä¸ä¸€æ€»æ˜¯å‡è¡¡çš„ã€‚ä¸è¿‡ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯è¿™å‡ å°æœºå™¨å‡ºç°äº†æ•…éšœã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551194990,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":69884,"user_name":"æå®¢æœ€é“çš„ä»”","can_delete":false,"product_type":"c1","uid":1252439,"ip_address":"","ucode":"156C3A03DBC055","user_header":"https://static001.geekbang.org/account/avatar/00/13/1c/57/1f8c580e.jpg","comment_is_top":false,"comment_ctime":1550896294,"is_pvip":true,"replies":[{"id":"25333","content":"è¿™æ˜¯ä¸­æ–­ç”¨åˆ°çš„ä¸€ä¸ªå‡½æ•°ï¼Œä¸­æ–­é¢‘ç¹çš„æ—¶å€™å°±ä¼šæ¯”è¾ƒå¤šã€‚ä¸è¿‡ï¼Œè¿™é‡Œåªæ˜¯è¡¨æ˜å®ƒæ˜¯ä¸€ä¸ªçƒ­ç‚¹å‡½æ•°ï¼Œå…·ä½“æ˜¯ä¸æ˜¯ç“¶é¢ˆè¿˜æ˜¯è¦ç”¨æˆ‘ä»¬ä¸“æ é‡Œçš„æ–¹æ³•æ¥å®šä½ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1551193698,"ip_address":"","comment_id":69884,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1550896294","product_id":100020901,"comment_content":"  17.09%  [kernel]                         [k] _raw_spin_unlock_irqrestore<br>   4.46%  [kernel]                         [k] finish_task_switch<br>   3.24%  [kernel]                         [k] run_timer_softirq<br>   2.31%  [kernel]                         [k] __do_softirq<br>   1.86%  [kernel]                         [k] sk_run_filter<br>   1.82%  [kernel]                         [k] rcu_process_callbacks<br>   1.51%  [vdso]                           [.] __vdso_clock_gettime<br>   1.50%  [kernel]                         [k] rcu_idle_exit<br>   0.86%  [kernel]                         [k] tick_nohz_idle_exit<br>   0.75%  [kernel]                         [k] copy_user_generic_string<br>   0.72%  [kernel]                         [k] __do_page_fault<br>   0.72%  libc-2.17.so                     [.] __memcpy_ssse3_back<br>   0.67%  [kernel]                         [k] rcu_process_gp_end<br>   0.62%  [kernel]                         [k] check_for_new_grace_period.isra.26<br>   0.52%  [kernel]                         [k] system_call_after_swapgs<br>è€å¸ˆ è¿™æ˜¯æˆ‘pert top çœ‹åˆ°æ•°æ®  æˆ‘çœ‹ä¸æ‡‚è¿™ä¸ªå‡ ä¸ªæ˜¯ä»€ä¹ˆæ„æ€  ç‰¹åˆ«æ˜¯ç¬¬ä¸€ä¸ª  æœ‰æ—¶å€™ä»–çš„CPUä¼šå¾ˆé«˜  å¯ä»¥å¸®å¿™è§£ç­”ä¸€ä¸‹å—  è°¢è°¢è€å¸ˆäº†","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":440330,"discussion_content":"è¿™æ˜¯ä¸­æ–­ç”¨åˆ°çš„ä¸€ä¸ªå‡½æ•°ï¼Œä¸­æ–­é¢‘ç¹çš„æ—¶å€™å°±ä¼šæ¯”è¾ƒå¤šã€‚ä¸è¿‡ï¼Œè¿™é‡Œåªæ˜¯è¡¨æ˜å®ƒæ˜¯ä¸€ä¸ªçƒ­ç‚¹å‡½æ•°ï¼Œå…·ä½“æ˜¯ä¸æ˜¯ç“¶é¢ˆè¿˜æ˜¯è¦ç”¨æˆ‘ä»¬ä¸“æ é‡Œçš„æ–¹æ³•æ¥å®šä½ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551193698,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":69424,"user_name":"å¹³å®‰å–œä¹","can_delete":false,"product_type":"c1","uid":1102350,"ip_address":"","ucode":"B97D8944B0B035","user_header":"https://static001.geekbang.org/account/avatar/00/10/d2/0e/26bf35a4.jpg","comment_is_top":false,"comment_ctime":1550740622,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1550740622","product_id":100020901,"comment_content":"æ‰“å¡","like_count":0},{"had_liked":false,"id":68674,"user_name":"å¼ é‘«","can_delete":false,"product_type":"c1","uid":1130782,"ip_address":"","ucode":"3BCFBBF35144B8","user_header":"https://static001.geekbang.org/account/avatar/00/11/41/1e/b8586592.jpg","comment_is_top":false,"comment_ctime":1550570570,"is_pvip":false,"replies":[{"id":"24524","content":"è¿™å„¿è¯´çš„æ˜¯CPUä½¿ç”¨ç‡ï¼ŒCPUä½¿ç”¨ç‡å®é™…ä¸Šæ˜¯æŒ‰ç…§å„ç§è¿›ç¨‹çŠ¶æ€æ‰€å ç”¨çš„CPUæ—¶é—´æ¥è®¡ç®—çš„","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1550674115,"ip_address":"","comment_id":68674,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1550570570","product_id":100020901,"comment_content":"&quot;topä¸­ä¼šæ˜¾ç¤ºæ¯ä¸ªè¿›ç¨‹çš„ %CPU åˆ—ï¼Œè¡¨ç¤ºè¿›ç¨‹çš„ CPU ä½¿ç”¨ç‡ã€‚å®ƒæ˜¯ç”¨æˆ·æ€å’Œå†…æ ¸æ€ CPU ä½¿ç”¨ç‡çš„æ€»å’Œï¼ŒåŒ…æ‹¬è¿›ç¨‹ç”¨æˆ·ç©ºé—´ä½¿ç”¨çš„ CPUã€é€šè¿‡ç³»ç»Ÿè°ƒç”¨æ‰§è¡Œçš„å†…æ ¸ç©ºé—´ CPU ã€ä»¥åŠåœ¨å°±ç»ªé˜Ÿåˆ—ç­‰å¾…è¿è¡Œçš„ CPU&quot;ï¼Œè¿™é‡Œæ²¡æ˜ç™½ï¼Œ&quot;å°±ç»ªé˜Ÿåˆ—ç­‰å¾…è¿è¡Œçš„CPU&quot;æ˜¯ä»€ä¹ˆæ„æ€ï¼Œä¸åº”è¯¥æ˜¯ç­‰å¾…è¿è¡Œçš„è¿›ç¨‹å—ï¼Ÿè¢«è°ƒåº¦çš„è¿›ç¨‹æ˜¯åœ¨CPUä¸Šè¿è¡Œï¼ŒCPUæ€ä¹ˆä¼šç­‰å¾…è¿è¡Œå‘¢ï¼Œéº»çƒ¦è€å¸ˆå¸®å¿™è§£ç­”ä¸‹ã€‚","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":439791,"discussion_content":"è¿™å„¿è¯´çš„æ˜¯CPUä½¿ç”¨ç‡ï¼ŒCPUä½¿ç”¨ç‡å®é™…ä¸Šæ˜¯æŒ‰ç…§å„ç§è¿›ç¨‹çŠ¶æ€æ‰€å ç”¨çš„CPUæ—¶é—´æ¥è®¡ç®—çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1550674115,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":66440,"user_name":"tianming","can_delete":false,"product_type":"c1","uid":1009932,"ip_address":"","ucode":"0BAB735AC9017A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/69/0c/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1549939610,"is_pvip":false,"replies":[{"id":"23736","content":"CPUç¼–å·","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1550071105,"ip_address":"","comment_id":66440,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1549939610","product_id":100020901,"comment_content":"è¯·é—®è€å¸ˆï¼Œç”¨äº†pidstat ä¹‹åï¼Œåœ¨æ€»çš„cpuä½¿ç”¨ç‡åé¢çš„è¿˜æœ‰ä¸€åˆ—cpuï¼Œè¿™ä¸ªæ•°å­—ä»£è¡¨ä»€ä¹ˆæ„æ€ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438801,"discussion_content":"CPUç¼–å·","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1550071105,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":62412,"user_name":"Robertå°ä¸ƒ","can_delete":false,"product_type":"c1","uid":1165254,"ip_address":"","ucode":"6BBF4674673AF5","user_header":"https://static001.geekbang.org/account/avatar/00/11/c7/c6/35cc7c7c.jpg","comment_is_top":false,"comment_ctime":1548050734,"is_pvip":false,"replies":[{"id":"22130","content":"æ¨èåœ¨dockerä¹‹å¤–ä½¿ç”¨","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1548116110,"ip_address":"","comment_id":62412,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1548050734","product_id":100020901,"comment_content":"é˜¿é‡Œäº‘æœåŠ¡å™¨ CentOS7<br>è€å¸ˆç»™çš„dockeré•œåƒä¸­æ²¡æœ‰perfå·¥å…·ï¼Œè¯·é—®å¦‚ä½•åœ¨dockerå®¹å™¨ä¸­å®‰è£…perfå·¥å…·","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437202,"discussion_content":"æ¨èåœ¨dockerä¹‹å¤–ä½¿ç”¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548116110,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":61786,"user_name":"Allen","can_delete":false,"product_type":"c1","uid":1248304,"ip_address":"","ucode":"56F10976A79D20","user_header":"https://static001.geekbang.org/account/avatar/00/13/0c/30/a2e7728a.jpg","comment_is_top":false,"comment_ctime":1547800602,"is_pvip":false,"replies":[{"id":"22330","content":"while ä¸é€€å‡ºä¸€èˆ¬æ˜¯æ¡ä»¶åˆ¤æ–­çš„é—®é¢˜","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1548251406,"ip_address":"","comment_id":61786,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1547800602","product_id":100020901,"comment_content":"è€å¸ˆï¼Œè¯·æ•™ä¸ªé—®é¢˜ï¼Œ<br>unsinged long expire =jiffies +msecs_to_jiffies (1000);<br>while(1){<br>      if(time_before(jiffies,expire){<br><br>       break;<br>}<br>ä¸ºå•¥è¿™ä¸ªwhile ä¸€ç›´ä¸èƒ½é€€å‡ºäº†ï¼Œéš¾é“æ˜¯cpu æ­»äº†ï¼Œå¯¼è‡´jiffieså€¼ä¸å†å˜åŒ–å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436994,"discussion_content":"while ä¸é€€å‡ºä¸€èˆ¬æ˜¯æ¡ä»¶åˆ¤æ–­çš„é—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548251406,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":61385,"user_name":"lucifer_å‡¡","can_delete":false,"product_type":"c1","uid":1316340,"ip_address":"","ucode":"B249C3A1C1439D","user_header":"https://static001.geekbang.org/account/avatar/00/14/15/f4/085d18a4.jpg","comment_is_top":false,"comment_ctime":1547688845,"is_pvip":false,"replies":[{"id":"22320","content":"é‚£åº”è¯¥æ˜¯CPUæ•°é‡æ¯”è¾ƒå¤šäº†ã€‚CPUä½¿ç”¨ç‡é«˜æ¨èçœ‹çœ‹æ˜¯ä¸æ˜¯åˆç†ï¼Œå¦‚ä½•æ˜¯é¢„æœŸçš„ï¼Œå°±ä¸éœ€è¦ç‰¹åˆ«å…³æ³¨","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1548250306,"ip_address":"","comment_id":61385,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1547688845","product_id":100020901,"comment_content":"çº¿ä¸Šæœ‰ä¸ªè¿›ç¨‹ï¼Œcpuä½¿ç”¨ç‡è¾¾åˆ°äº†å‡ ç™¾ï¼Œä½†æ˜¯cpuå¹³å‡è´Ÿè½½å´å¾ˆä½ï¼Œiowaitä¹Ÿå‡ ä¹æ²¡æœ‰ï¼Œé€šè¿‡vmstatçœ‹ä¸Šä¸‹åˆåˆ‡æ¢ä¹Ÿä¸ç®—é«˜ï¼Œè€å¸ˆè¿™å¯èƒ½ä¼šæ˜¯ä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿè¿™ä¸ªè¿›ç¨‹åº”è¯¥åœ¨ä¸€ç›´å¤„ç†ç½‘ç»œè¯·æ±‚è¾ƒå¤šï¼Œåº”è¯¥ç‰¹åˆ«å…³æ³¨è¿™ç§æƒ…å†µå—","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436858,"discussion_content":"é‚£åº”è¯¥æ˜¯CPUæ•°é‡æ¯”è¾ƒå¤šäº†ã€‚CPUä½¿ç”¨ç‡é«˜æ¨èçœ‹çœ‹æ˜¯ä¸æ˜¯åˆç†ï¼Œå¦‚ä½•æ˜¯é¢„æœŸçš„ï¼Œå°±ä¸éœ€è¦ç‰¹åˆ«å…³æ³¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548250306,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":60684,"user_name":"æ¥šå¤©è¡Œ","can_delete":false,"product_type":"c1","uid":1100648,"ip_address":"","ucode":"B4DD986060ECD4","user_header":"https://static001.geekbang.org/account/avatar/00/10/cb/68/d8a4f907.jpg","comment_is_top":false,"comment_ctime":1547530396,"is_pvip":true,"replies":[{"id":"22307","content":"å®¹å™¨å¤–é¢æ‰¾åˆ°è¿›ç¨‹ PID ä¹Ÿå¯ä»¥è°ƒè¯•çš„","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1548249089,"ip_address":"","comment_id":60684,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1547530396","product_id":100020901,"comment_content":"è¯·é—®è€å¸ˆï¼Œå¦‚æœä¸€ä¸ªdockerè¿›ç¨‹è·‘äº†CPU 100%ï¼Œè¿™ä¸ªæ—¶å€™ä½¿ç”¨docker exec -it å·²ç»æ— æ³•è¿›å»äº†ï¼Œæ€ä¹ˆè°ƒè¯•è¿™ä¸ªå‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436583,"discussion_content":"å®¹å™¨å¤–é¢æ‰¾åˆ°è¿›ç¨‹ PID ä¹Ÿå¯ä»¥è°ƒè¯•çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548249089,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":58472,"user_name":"æé€é¥","can_delete":false,"product_type":"c1","uid":1109750,"ip_address":"","ucode":"DB74823527E203","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/xzHDjCSFicNY3MUMECtNz6sM8yDJhBoyGk5IRoOtUat6ZIkGzxjqEqwqKYWMD3GjehScKvMjicGOGDog5FF18oyg/132","comment_is_top":false,"comment_ctime":1547087817,"is_pvip":false,"replies":[{"id":"21151","content":"è¿™ä¹ˆåˆ†æçš„æ€è·¯å°±ä¾¿äº†ï¼Œç»§ç»­çœ‹åé¢çš„CPUåˆ†æå¥—è·¯å’Œç­”ç–‘ç¯‡ï¼Œæœ‰ç›¸å…³çš„è®²è§£","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1547124393,"ip_address":"","comment_id":58472,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1547087817","product_id":100020901,"comment_content":"phpåº”ç”¨ï¼Œtopå‘ç°ç”¨æˆ·ç©ºé—´CPUä½¿ç”¨ç‡é«˜<br>all   77.66    0.00    2.92    0.00    0.00    8.12    0.00    0.00    0.00   11.29<br>perf top -gï¼Œå‘ç°å†…æ ¸swapperè¿›ç¨‹çš„native_safe_halt å‡½æ•°æ¶ˆè€—äº†CPUï¼Œåç»­æ€ä¹ˆåˆ†æå‘¢ï¼Ÿ<br>-   37.91%    37.91%  swapper          [kernel.kallsyms]           [k] native_safe_halt<br>        cpu_startup_entry<br>     - arch_cpu_idle                                                                                                                                                       <br>         - 33.24% default_idle                                                                                                                                              <br>              native_safe_halt ","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436077,"discussion_content":"è¿™ä¹ˆåˆ†æçš„æ€è·¯å°±ä¾¿äº†ï¼Œç»§ç»­çœ‹åé¢çš„CPUåˆ†æå¥—è·¯å’Œç­”ç–‘ç¯‡ï¼Œæœ‰ç›¸å…³çš„è®²è§£","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547124393,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":56734,"user_name":"å­™æˆå­","can_delete":false,"product_type":"c1","uid":1317819,"ip_address":"","ucode":"7DF58E9202FC60","user_header":"https://static001.geekbang.org/account/avatar/00/14/1b/bb/4a749b6c.jpg","comment_is_top":false,"comment_ctime":1546530837,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1546530837","product_id":100020901,"comment_content":"ï¼¤5","like_count":0},{"had_liked":false,"id":55955,"user_name":"training","can_delete":false,"product_type":"c1","uid":1314657,"ip_address":"","ucode":"88AACE5E41ECC3","user_header":"https://static001.geekbang.org/account/avatar/00/14/0f/61/dc7cc89a.jpg","comment_is_top":false,"comment_ctime":1546354374,"is_pvip":false,"replies":[{"id":"20275","content":"å¯ä»¥ç”¨ ä½¿ç”¨æ–¹æ³•è¯·å‚è€ƒç¬¬14ç¯‡","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1546424541,"ip_address":"","comment_id":55955,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1546354374","product_id":100020901,"comment_content":"docker ä¸Šèƒ½ç”¨å—ï¼Ÿæˆ‘å®‰è£…ä¸Šä¹‹åæŠ¥ï¼š<br>WARNING: perf not found for kernel 4.9.125<br><br>  You may need to install the following packages for this specific kernel:<br>    linux-tools-4.9.125-linuxkit<br>    linux-cloud-tools-4.9.125-linuxkit<br><br>  You may also want to install one of the following packages to keep up to date:<br>    linux-tools-linuxkit<br>    linux-cloud-tools-linuxkit<br><br>ä½†apt install ä¸Šé¢å››ä¸ªåŒ…ååˆæŠ¥é”™ï¼š<br>E: Unable to locate package linux-tools-4.9.125-linuxkit<br>E: Couldn&#39;t find any package by glob &#39;linux-tools-4.9.125-linuxkit&#39;<br>E: Couldn&#39;t find any package by regex &#39;linux-tools-4.9.125-linuxkit&#39;<br>E: Unable to locate package linux-cloud-tools-4.9.125-linuxkit<br>E: Couldn&#39;t find any package by glob &#39;linux-cloud-tools-4.9.125-linuxkit&#39;<br>E: Couldn&#39;t find any package by regex &#39;linux-cloud-tools-4.9.125-linuxkit&#39;<br>E: Unable to locate package linux-tools-linuxkit<br>E: Unable to locate package linux-cloud-tools-linuxkit","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":434898,"discussion_content":"å¯ä»¥ç”¨ ä½¿ç”¨æ–¹æ³•è¯·å‚è€ƒç¬¬14ç¯‡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1546424541,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":55112,"user_name":"æµ·å†›ä¸Šæ ¡","can_delete":false,"product_type":"c1","uid":1104290,"ip_address":"","ucode":"7B0D9EC01A3F36","user_header":"https://static001.geekbang.org/account/avatar/00/10/d9/a2/afbc447c.jpg","comment_is_top":false,"comment_ctime":1546045737,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1546045737","product_id":100020901,"comment_content":"d5æ‰“å¡","like_count":0},{"had_liked":false,"id":54646,"user_name":"æ‚¬é“ƒæœ¨ï¼ˆèµµå²©ï¼‰","can_delete":false,"product_type":"c1","uid":1327862,"ip_address":"","ucode":"BB8285E938EE7B","user_header":"https://static001.geekbang.org/account/avatar/00/14/42/f6/6532d23d.jpg","comment_is_top":false,"comment_ctime":1545921617,"is_pvip":false,"replies":[{"id":"19945","content":"å¯ä»¥ï¼Œåªæ˜¯è¿˜éœ€è¦ä¸€äº›é¢å¤–çš„æ­¥éª¤ï¼Œç¬¬14ç¯‡æœ‰ä¸€äº›å‚è€ƒæ–¹æ³•","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1546005581,"ip_address":"","comment_id":54646,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1545921617","product_id":100020901,"comment_content":"Javaç¨‹åºä¹Ÿå¯ä»¥è¿™æ ·ç”¨perfåˆ†æå—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":434525,"discussion_content":"å¯ä»¥ï¼Œåªæ˜¯è¿˜éœ€è¦ä¸€äº›é¢å¤–çš„æ­¥éª¤ï¼Œç¬¬14ç¯‡æœ‰ä¸€äº›å‚è€ƒæ–¹æ³•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1546005581,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":54381,"user_name":"ç®¡æ¸…éºŸ","can_delete":false,"product_type":"c1","uid":1198013,"ip_address":"","ucode":"7CA1651D0DE257","user_header":"https://static001.geekbang.org/account/avatar/00/12/47/bd/5c34df95.jpg","comment_is_top":false,"comment_ctime":1545839057,"is_pvip":false,"replies":[{"id":"19760","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1545886135,"ip_address":"","comment_id":54381,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1545839057","product_id":100020901,"comment_content":"æ‰“å¡ç¬¬å…­å¤©","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":434440,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545886135,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":54275,"user_name":"DigDeeply","can_delete":false,"product_type":"c1","uid":1239008,"ip_address":"","ucode":"113F4D755A1FEC","user_header":"https://static001.geekbang.org/account/avatar/00/12/e7/e0/33521e13.jpg","comment_is_top":false,"comment_ctime":1545819984,"is_pvip":false,"replies":[{"id":"19694","content":"æ˜¯çš„ï¼Œéœ€è¦ç‰¹æƒæ¨¡å¼ã€‚14ç¯‡è¿˜æœ‰æ›´è¯¦ç»†çš„è®²è§£","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1545832981,"ip_address":"","comment_id":54275,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1545819984","product_id":100020901,"comment_content":"åœ¨å®¹å™¨å†…å¯ç”¨perfåæŠ¥é”™ ï¼šâ”‚You may not have permission to collect system-wide stats.         ï¼›<br>éœ€è¦ä¿®æ”¹ &#47;proc&#47;sys&#47;kernel&#47;perf_event_paranoid<br>ä½†æ˜¯ä¿®æ”¹æ—¶åˆæç¤º bash: &#47;proc&#47;sys&#47;kernel&#47;perf_event_paranoid: Read-only file system<br>æ— æ³•ä¿®æ”¹ã€‚<br>å¯¹äºè¿™ç§æƒ…å†µï¼Œåœ¨å¯åŠ¨å®¹å™¨æ—¶éœ€è¦æºå¸¦ --privileged å‚æ•°ï¼Œæ¯”å¦‚ï¼š<br>docker run --privileged --name phpfpm -it --network container:nginx feisky&#47;php-fpm<br>å†å®‰è£…perfä¹‹åå¯åŠ¨ï¼Œå°±å¯ä»¥äº†~~","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":434414,"discussion_content":"æ˜¯çš„ï¼Œéœ€è¦ç‰¹æƒæ¨¡å¼ã€‚14ç¯‡è¿˜æœ‰æ›´è¯¦ç»†çš„è®²è§£","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545832981,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":53776,"user_name":"heiman","can_delete":false,"product_type":"c1","uid":1314947,"ip_address":"","ucode":"C1184B13706001","user_header":"https://static001.geekbang.org/account/avatar/00/14/10/83/b3145b4d.jpg","comment_is_top":false,"comment_ctime":1545722299,"is_pvip":false,"replies":[{"id":"19509","content":"å¼€å¤´éƒ¨åˆ†çš„cpu0ã€cpu1æ˜¯å„ä¸ªCPUæ ¸çš„ä½¿ç”¨ç‡ï¼Œè€Œåé¢å„ä¸ªè¿›ç¨‹çš„CPUä¼šè°ƒåº¦åœ¨ä¸åŒçš„CPUæ ¸ä¸Šè¿è¡Œã€‚æ‰€ä»¥ä¸€èˆ¬ä¼šçœ‹åˆ°æŸä¸ªæˆ–è€…å‡ ä¸ªCPUæ ¸ä½¿ç”¨ç‡é«˜ï¼Œè€Œå…¶ä»–çš„å¯èƒ½å¾ˆä½","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1545730242,"ip_address":"","comment_id":53776,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1545722299","product_id":100020901,"comment_content":"è€å¸ˆï¼Œç”¨topå‘½ä»¤åœ¨æ¯è¡Œè¿›åŸä¸­éƒ½æœ‰ä¸ªcpuä½¿ç”¨ç‡ï¼Œå†æŒ‰1åˆä¼šå‡ºæ¥å¥½å¤šçš„cpu0,cpu1è¿™æ ·çš„æ•°æ®ã€‚æˆ‘æƒ³é—®ä¸‹è¿™å‡ ç§çš„å…³ç³»æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆæœ‰æ—¶å€™è¿›ç¨‹æ˜¾ç¤ºçš„cpuä½¿ç”¨ç‡å¾ˆé«˜ï¼Œè€Œcpu0  cpu1æ˜¾ç¤ºçš„å´å¾ˆä½ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":434237,"discussion_content":"å¼€å¤´éƒ¨åˆ†çš„cpu0ã€cpu1æ˜¯å„ä¸ªCPUæ ¸çš„ä½¿ç”¨ç‡ï¼Œè€Œåé¢å„ä¸ªè¿›ç¨‹çš„CPUä¼šè°ƒåº¦åœ¨ä¸åŒçš„CPUæ ¸ä¸Šè¿è¡Œã€‚æ‰€ä»¥ä¸€èˆ¬ä¼šçœ‹åˆ°æŸä¸ªæˆ–è€…å‡ ä¸ªCPUæ ¸ä½¿ç”¨ç‡é«˜ï¼Œè€Œå…¶ä»–çš„å¯èƒ½å¾ˆä½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545730242,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":52829,"user_name":"wmmmeng","can_delete":false,"product_type":"c1","uid":1117517,"ip_address":"","ucode":"C5E29DBB39BB0F","user_header":"https://static001.geekbang.org/account/avatar/00/11/0d/4d/f692ba8b.jpg","comment_is_top":false,"comment_ctime":1545536644,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1545536644","product_id":100020901,"comment_content":"è€å¸ˆï¼Œcentos6.3çš„è¿è¡Œä¸äº†docker runä¸€ç±»çš„å‘½ä»¤ï¼Œæ˜¯ç‰ˆæœ¬å¤ªä½äº†å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":52526,"user_name":"David.cui","can_delete":false,"product_type":"c1","uid":1302228,"ip_address":"","ucode":"AB46F310403612","user_header":"https://static001.geekbang.org/account/avatar/00/13/de/d4/b83c4185.jpg","comment_is_top":false,"comment_ctime":1545405303,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1545405303","product_id":100020901,"comment_content":"è¯·æ•™ä¸€ä¸‹è€å¸ˆï¼Œä¹‹å‰ä¸€ä¸ªé¡¹ç›®é‡åˆ°IBM Powerå¤„ç†å™¨ï¼Œ1cpuæœ‰å››ä¸ªé€»è¾‘å¤„ç†å™¨ï¼Œæ®è¯´è¿™å››ä¸ªé€»è¾‘å¤„ç†å™¨çš„å¤„ç†èƒ½åŠ›ä¸ä¸€æ ·ï¼Œç¬¬ä¸€ä¸ªé€»è¾‘å¤„ç†å™¨è·‘æ»¡ç‰©ç†cpuä½¿ç”¨ç‡å¤§çº¦50%ç¬¬äºŒé€»è¾‘cpuè·‘æ»¡ç‰©ç†cpuä½¿ç”¨ç‡å¤§çº¦25%ã€‚ä¸çŸ¥é“è¿™æ ·çš„è¯´æ³•æ˜¯å¦æ­£ç¡®ï¼Ÿå¦å¤–æƒ³è¯·æ•™ä¸€ä¸‹è€å¸ˆå¯¹äºintelæˆ–amdçš„å¤„ç†å™¨æ˜¯å¦ä¹Ÿæœ‰ç±»ä¼¼çš„é—®é¢˜ï¼Ÿ","like_count":0},{"had_liked":false,"id":52141,"user_name":"é¥¼å­","can_delete":false,"product_type":"c1","uid":1085953,"ip_address":"","ucode":"981A44836A5216","user_header":"https://static001.geekbang.org/account/avatar/00/10/92/01/c723d180.jpg","comment_is_top":false,"comment_ctime":1545318911,"is_pvip":false,"replies":[{"id":"19088","content":"è°¢è°¢åˆ†äº«","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1545386624,"ip_address":"","comment_id":52141,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1545318911","product_id":100020901,"comment_content":"æˆ‘å†çœ‹ä¸€æ¬¡ï¼Œä½¿ç”¨goè¯­è¨€éªŒè¯perf å‘½ä»¤æ—¶ï¼Œéœ€è¦ä¿ç•™ç¬¦å·è¡¨æ‰èƒ½çœ‹åˆ°è°ƒç”¨å…·ä½“å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯ç¼–è¯‘æ—¶ä¸èƒ½åŠ  ldflags -w -s","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":433761,"discussion_content":"è°¢è°¢åˆ†äº«","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545386624,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":52138,"user_name":"Only now","can_delete":false,"product_type":"c1","uid":1038574,"ip_address":"","ucode":"C617473A03AE27","user_header":"https://static001.geekbang.org/account/avatar/00/0f/d8/ee/6e7c2264.jpg","comment_is_top":false,"comment_ctime":1545317509,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1545317509","product_id":100020901,"comment_content":"<br>mark ","like_count":0},{"had_liked":false,"id":52079,"user_name":"maoxiajun","can_delete":false,"product_type":"c1","uid":1198843,"ip_address":"","ucode":"CB4926BC81B3B1","user_header":"https://static001.geekbang.org/account/avatar/00/12/4a/fb/70f14340.jpg","comment_is_top":false,"comment_ctime":1545306191,"is_pvip":false,"replies":[{"id":"18878","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1545312459,"ip_address":"","comment_id":52079,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1545306191","product_id":100020901,"comment_content":"lesson5æ‰“å¡","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":433733,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545312459,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":51187,"user_name":"InfoQ_ef36fd3e61b3","can_delete":false,"product_type":"c1","uid":1296354,"ip_address":"","ucode":"C7006320E4BD68","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoqfN5zibokKwnc08SVEfDfJxAH4mXO9xaAlZ54QoaicGFJic2iaPYI2Z8dJrIgwpvfxdBmM92iasBoQRg/132","comment_is_top":false,"comment_ctime":1545128644,"is_pvip":false,"replies":[{"id":"18456","content":"phpå®¹å™¨é€€å‡ºäº†ï¼Œè¯•è¯•ã€‚è¿è¡Œ docker logs phpfpm çœ‹çœ‹ä»€ä¹ˆé”™è¯¯ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1545141949,"ip_address":"","comment_id":51187,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1545128644","product_id":100020901,"comment_content":" docker ps -a<br>CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                       PORTS                   NAMES<br>10fc91513061        feisky&#47;php-fpm      &quot;php-fpm -F --pid ...&quot;   15 minutes ago      Exited (78) 15 minutes ago                           phpfpm<br>f47112099911        feisky&#47;nginx        &quot;nginx -g &#39;daemon ...&quot;   46 minutes ago      Up 46 minutes                0.0.0.0:10000-&gt;80&#47;tcp   nginx<br><br>è¯·é—®æˆ‘runäº†ä»¥åï¼Œå¦å¤–ä¸€å°è¿æ¥ä¸ä¸Šè¿™å°çš„10000ç«¯å£å¯èƒ½æ˜¯ä»€ä¹ˆåŸå› å‘¢ï¼Ÿ<br>curl http:&#47;&#47;10.16.57.155:10000&#47;<br>&lt;html&gt;<br>&lt;head&gt;&lt;title&gt;404 Not Found&lt;&#47;title&gt;&lt;&#47;head&gt;<br>&lt;body&gt;<br>&lt;center&gt;&lt;h1&gt;404 Not Found&lt;&#47;h1&gt;&lt;&#47;center&gt;<br>&lt;hr&gt;&lt;center&gt;nginx&#47;1.15.4&lt;&#47;center&gt;<br>&lt;&#47;body&gt;<br>&lt;&#47;html&gt;<br>","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":433331,"discussion_content":"phpå®¹å™¨é€€å‡ºäº†ï¼Œè¯•è¯•ã€‚è¿è¡Œ docker logs phpfpm çœ‹çœ‹ä»€ä¹ˆé”™è¯¯ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545141949,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":50841,"user_name":"Amark","can_delete":false,"product_type":"c1","uid":1121326,"ip_address":"","ucode":"E5F48633654002","user_header":"https://static001.geekbang.org/account/avatar/00/11/1c/2e/93812642.jpg","comment_is_top":false,"comment_ctime":1545053725,"is_pvip":false,"replies":[{"id":"18471","content":"ä¸€ä¸ªç”¨åœ¨ç”¨æˆ·æ€å»ï¼Œä¸€ä¸ªç”¨åœ¨å†…æ ¸é‡Œï¼Œå†…æ ¸è´Ÿè´£è½¬æ¢","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1545143969,"ip_address":"","comment_id":50841,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1545053725","product_id":100020901,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œç”¨æˆ·ç©ºé—´èŠ‚æ‹ç‡ä¸å†…æ ¸èŠ‚æ‹ç‡æœ‰å•¥å…³ç³»","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":433137,"discussion_content":"ä¸€ä¸ªç”¨åœ¨ç”¨æˆ·æ€å»ï¼Œä¸€ä¸ªç”¨åœ¨å†…æ ¸é‡Œï¼Œå†…æ ¸è´Ÿè´£è½¬æ¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545143969,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":50838,"user_name":"Amark","can_delete":false,"product_type":"c1","uid":1121326,"ip_address":"","ucode":"E5F48633654002","user_header":"https://static001.geekbang.org/account/avatar/00/11/1c/2e/93812642.jpg","comment_is_top":false,"comment_ctime":1545053234,"is_pvip":false,"replies":[{"id":"18472","content":"è¿™æ˜¯ä¸ªå†…æ ¸çš„å…¨å±€å˜é‡ï¼Œç”¨æ¥è®°å½•æ—¶é—´ã€‚æ¯ä¸ªCPUçš„è®¡æ—¶éƒ½ä¼šç”¨åˆ°å®ƒ","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1545144312,"ip_address":"","comment_id":50838,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1545053234","product_id":100020901,"comment_content":"å…¨å±€å˜é‡ Jiffies æ˜¯æ‰€æœ‰CPUæ€»å…±çš„èŠ‚æ‹æ•°å—?è¿˜æ˜¯å•ä¸ªCPUçš„","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":433135,"discussion_content":"è¿™æ˜¯ä¸ªå†…æ ¸çš„å…¨å±€å˜é‡ï¼Œç”¨æ¥è®°å½•æ—¶é—´ã€‚æ¯ä¸ªCPUçš„è®¡æ—¶éƒ½ä¼šç”¨åˆ°å®ƒ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545144312,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":50005,"user_name":"miaaa","can_delete":false,"product_type":"c1","uid":1315290,"ip_address":"","ucode":"AE3EA298389D18","user_header":"","comment_is_top":false,"comment_ctime":1544837955,"is_pvip":false,"replies":[{"id":"18107","content":"Linuxä¹Ÿæ˜¯ä¸€æ ·çš„","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1545004443,"ip_address":"","comment_id":50005,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1544837955","product_id":100020901,"comment_content":"æƒ³é—®ä¸‹linuxä¸‹CPUåˆ†ç‰©ç†cpuå’Œé€»è¾‘cpuçš„æ¦‚å¿µå—ï¼Œæ¯”å¦‚windowsä¸‹cpu 4core, å³ä½¿æŸä¸ªè¿›ç¨‹æ˜¯100% cpu, ä½†æ˜¯è¿™ä¸ªæ˜¯æ¯ä¸ªcoreä¸Šcpuä½¿ç”¨ç‡ä¹‹å’Œï¼Œå¹³å‡ä¹‹åæ˜¯25%ï¼Œä¹Ÿä¸ç®—high cpué—®é¢˜ã€‚","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432837,"discussion_content":"Linuxä¹Ÿæ˜¯ä¸€æ ·çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545004443,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":49937,"user_name":"leaj","can_delete":false,"product_type":"c1","uid":1330884,"ip_address":"","ucode":"94AAEDC8EBED93","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/iaMjvIrqFU9Mc7UhNaYygu2xX9NSiceRfU55ksT3NuGw7OGOeYXeticFDV2BS2OqbVfyTO4udibMsefK0SHau6lf6g/132","comment_is_top":false,"comment_ctime":1544793464,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1544793464","product_id":100020901,"comment_content":"è€å¸ˆï¼Œç©ºé—²æ—¶é—´åˆ°åº•åªæ˜¯idleè¿˜æ˜¯idle + iowait ? è¿™ä¸ªæœ‰åŠæ³•éªŒè¯ä¸‹å—ï¼Ÿæˆ‘çœ‹ä¸‹é¢è¿™ä¸ªæè¿°ï¼Œè²Œä¼¼æ˜¯åŒ…å«çš„ï¼Œä¹Ÿå°±æ˜¯è¯´æœ€ç»ˆçš„ä½¿ç”¨ç‡å¹¶ä¸åŒ…å«iowaitçš„éƒ¨åˆ†ï¼Ÿ<br><br>https:&#47;&#47;github.com&#47;Leo-G&#47;DevopsWiki&#47;wiki&#47;How-Linux-CPU-Usage-Time-and-Percentage-is-calculated<br>To calculate Linux CPU usage time subtract the idle CPU time from the total CPU time as follows:<br><br>Total CPU time since boot = user+nice+system+idle+iowait+irq+softirq+steal<br><br>Total CPU Idle time since boot = idle + iowait<br><br>Total CPU usage time since boot = Total CPU time since boot - Total CPU Idle time since boot<br><br>Total CPU percentage = Total CPU usage time since boot&#47;Total CPU time since boot X 100","like_count":0},{"had_liked":false,"id":49770,"user_name":"é¹","can_delete":false,"product_type":"c1","uid":1009228,"ip_address":"","ucode":"243E408E2094E1","user_header":"https://static001.geekbang.org/account/avatar/00/0f/66/4c/39a6829c.jpg","comment_is_top":false,"comment_ctime":1544767187,"is_pvip":false,"replies":[{"id":"17957","content":"perfçš„åŠŸèƒ½å¾ˆå¼ºå¤§ï¼Œä½¿ç”¨è€…ä¹Ÿè¦æ±‚æœ‰ä¸€å®šçš„ç³»ç»Ÿå’Œå†…æ ¸çŸ¥è¯†","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1544781424,"ip_address":"","comment_id":49770,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1544767187","product_id":100020901,"comment_content":"perf æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å·¥å…·ï¼Œä»Šååº”è¯¥ä¼šç”¨çš„æ¯”è¾ƒå¤š","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432768,"discussion_content":"perfçš„åŠŸèƒ½å¾ˆå¼ºå¤§ï¼Œä½¿ç”¨è€…ä¹Ÿè¦æ±‚æœ‰ä¸€å®šçš„ç³»ç»Ÿå’Œå†…æ ¸çŸ¥è¯†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544781424,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":49367,"user_name":"LeeSheen","can_delete":false,"product_type":"c1","uid":1075737,"ip_address":"","ucode":"7A02285009BB7D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTL4iaYPNBC91U6YfClaNNyIIboOrynwpribXiaJFoEPUpFMcMKZb4f5ooL7H3gkybe3Jp74UGMF8J02g/132","comment_is_top":false,"comment_ctime":1544672055,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1544672055","product_id":100020901,"comment_content":"<br>è€å¸ˆæ‚¨å¥½ï¼Œæ–‡ç« å‰éƒ¨æœ‰è¿™ä¹ˆä¸€å¥æè¿°ï¼š<br>userï¼ˆé€šå¸¸ç¼©å†™ä¸º usï¼‰ï¼Œä»£è¡¨ç”¨æˆ·æ€ CPU æ—¶é—´ã€‚æ³¨æ„ï¼Œå®ƒä¸åŒ…æ‹¬ä¸‹é¢çš„ nice æ—¶é—´ï¼Œä½†åŒ…æ‹¬äº† guest æ—¶é—´ã€‚<br>å¯¹äºâ€œåŒ…æ‹¬äº† guest æ—¶é—´â€ï¼Œæœ‰äº›ç–‘é—®ã€‚<br><br>linuxåœ¨å†…æ ¸update_process_timeså‡½æ•°ä¸­ç»Ÿè®¡&#47;proc&#47;statï¼Œå®ƒè°ƒç”¨äº†account_process_tickå‡½æ•°ï¼Œåœ¨æ­¤å‡½æ•°ä¸­å¯ä»¥çœ‹åˆ°ï¼š<br><br>void account_process_tick(struct task_struct *p, int user_tick)<br>{<br>        cputime_t one_jiffy_scaled = cputime_to_scaled(cputime_one_jiffy);<br>        struct rq *rq = this_rq();<br><br>        if (vtime_accounting_enabled())<br>                return;<br><br>        if (sched_clock_irqtime) {<br>                irqtime_account_process_tick(p, user_tick, rq);<br>                return;<br>        }<br><br>        if (steal_account_process_tick())<br>                return;<br><br>        if (user_tick)<br>                account_user_time(p, cputime_one_jiffy, one_jiffy_scaled);<br>        else if ((p != rq-&gt;idle) || (irq_count() != HARDIRQ_OFFSET))<br>                account_system_time(p, HARDIRQ_OFFSET, cputime_one_jiffy,<br>                                    one_jiffy_scaled);<br>        else<br>                account_idle_time(cputime_one_jiffy);<br>}<br><br>å…¶ä¸­å¯ä»¥çœ‹åˆ°ï¼Œaccount_user_timeå’Œaccount_system_timeæ˜¯åŒºåˆ†å¼€çš„ï¼Œè€Œaccount_guest_timeåˆæ˜¯ä»account_system_timeä¸­è·å–çš„ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š<br><br>void account_system_time(struct task_struct *p, int hardirq_offset,<br>                         cputime_t cputime, cputime_t cputime_scaled)<br>{<br>        int index;<br><br>        if ((p-&gt;flags &amp; PF_VCPU) &amp;&amp; (irq_count() - hardirq_offset == 0)) {<br>                account_guest_time(p, cputime, cputime_scaled);<br>                return;<br>        }<br><br>        if (hardirq_count() - hardirq_offset)<br>                index = CPUTIME_IRQ;<br>        else if (in_serving_softirq())<br>                index = CPUTIME_SOFTIRQ;<br>        else<br>                index = CPUTIME_SYSTEM;<br><br>        __account_system_time(p, cputime, cputime_scaled, index);<br>}<br><br>æ‰€ä»¥æˆ‘è®¤ä¸ºuseræ—¶é—´ä¸­ï¼Œæ˜¯ä¸ä¼šåŒ…å«guestçš„æ—¶é—´çš„ï¼Œæœ›æŒ‡æ•™ã€‚","like_count":0},{"had_liked":false,"id":49221,"user_name":"Blue_Eye","can_delete":false,"product_type":"c1","uid":1055764,"ip_address":"","ucode":"2FCF83951ABD7C","user_header":"https://static001.geekbang.org/account/avatar/00/10/1c/14/2388d9e4.jpg","comment_is_top":false,"comment_ctime":1544625670,"is_pvip":false,"replies":[{"id":"17656","content":"åŠ æ²¹","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1544660332,"ip_address":"","comment_id":49221,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1544625670","product_id":100020901,"comment_content":"æ„Ÿè§‰è‡ªå·±å­¦çš„æŒºæ…¢çš„ï¼Œä¸¤ä¸ªæ˜ŸæœŸæ‰çœ‹åˆ°è¿™é‡Œï¼Œå¸æ”¶çš„æœ‰ç‚¹æ…¢ï¼Œå¸Œæœ›è‡ªå·±åšæŒï¼ŒåŠ æ²¹ï¼ï¼åŠ æ²¹ğŸ’ª","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432536,"discussion_content":"åŠ æ²¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544660332,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":48849,"user_name":"å°˜å°","can_delete":false,"product_type":"c1","uid":1247006,"ip_address":"","ucode":"CEE0C006387A03","user_header":"https://static001.geekbang.org/account/avatar/00/13/07/1e/bdbe93f4.jpg","comment_is_top":false,"comment_ctime":1544572136,"is_pvip":false,"replies":[{"id":"17696","content":"çœ‹å·¥å…·ï¼Œæœ‰çš„å·¥å…·ä¼šæŠŠCPUä½¿ç”¨ç‡å åŠ ï¼Œæœ‰çš„ä¼šå–å¹³å‡å€¼ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1544661927,"ip_address":"","comment_id":48849,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1544572136","product_id":100020901,"comment_content":"è€å¸ˆï¼Œcentosä¸‹ï¼Œæœ‰æ—¶çœ‹åˆ°æŸä¸ªè¿›ç¨‹cpuåˆ©ç”¨ç‡1000%å¤šï¼Œè¿™ä¸ªæ˜¯æ€ä¹ˆè®¡ç®—å‡ºæ¥çš„ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432386,"discussion_content":"çœ‹å·¥å…·ï¼Œæœ‰çš„å·¥å…·ä¼šæŠŠCPUä½¿ç”¨ç‡å åŠ ï¼Œæœ‰çš„ä¼šå–å¹³å‡å€¼ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544661927,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":48725,"user_name":"å¦‚æœ","can_delete":false,"product_type":"c1","uid":1320638,"ip_address":"","ucode":"138A3EEEE50850","user_header":"","comment_is_top":false,"comment_ctime":1544522882,"is_pvip":false,"replies":[{"id":"17704","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1544662081,"ip_address":"","comment_id":48725,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1544522882","product_id":100020901,"comment_content":"DAY5,æ‰“å¡","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432330,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544662081,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":48579,"user_name":"John","can_delete":false,"product_type":"c1","uid":1064810,"ip_address":"","ucode":"5C0CCF51E88015","user_header":"https://static001.geekbang.org/account/avatar/00/10/3f/6a/c4f82e49.jpg","comment_is_top":false,"comment_ctime":1544491176,"is_pvip":false,"replies":[{"id":"17848","content":"å¯ä»¥è¿è¡Œå…¶ä»–ä»»åŠ¡ï¼Œåªæ˜¯ä¸èƒ½è¢«ä¿¡å·æ‰“æ–­ï¼Œæ¯”å¦‚ä½ ä¸èƒ½kill","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1544746399,"ip_address":"","comment_id":48579,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1544491176","product_id":100020901,"comment_content":"è€å¸ˆï¼Œiowaitçš„æ—¶é—´ï¼Œcpuåœ¨ç­‰å¾…ioè¿”å›ç»“æœï¼Œæ‰€ä»¥ä¸èƒ½è¿è¡Œå…¶ä»–ä»»åŠ¡ï¼Œæ‰€ä»¥ä¸å±äºidleæ—¶é—´æ˜¯å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432256,"discussion_content":"å¯ä»¥è¿è¡Œå…¶ä»–ä»»åŠ¡ï¼Œåªæ˜¯ä¸èƒ½è¢«ä¿¡å·æ‰“æ–­ï¼Œæ¯”å¦‚ä½ ä¸èƒ½kill","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544746399,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":48083,"user_name":"è€¿é•¿å­¦","can_delete":false,"product_type":"c1","uid":1309948,"ip_address":"","ucode":"C7A262812854D4","user_header":"https://static001.geekbang.org/account/avatar/00/13/fc/fc/1e235814.jpg","comment_is_top":false,"comment_ctime":1544344886,"is_pvip":false,"replies":[{"id":"17288","content":"æ‰¾ä¸åˆ°ä¾èµ–åº“å’Œç¬¦å·è¡¨å¯¼è‡´çš„ï¼Œæˆ‘åœ¨åé¢çš„ç­”ç–‘ä¸­å†è¯¦ç»†è®²ä¸€ä¸‹è¿™ä¸ªé—®é¢˜","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1544437037,"ip_address":"","comment_id":48083,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1544344886","product_id":100020901,"comment_content":"è€å¸ˆï¼Œæˆ‘çš„ä¹Ÿæ˜¯CentOS7.4ç³»ç»Ÿï¼Œæ’æŸ¥ä¸åˆ°å…·ä½“çš„å‡½æ•°ï¼Œéƒ½æ˜¯åå…­è¿›åˆ¶ï¼Œåç§°æ’æŸ¥ä¸å‡ºæ¥ï¼Œæ˜¯ä»€ä¹ˆåŸå› å‘¢ï¼Ÿæ˜¯ä¸æ˜¯æ²¡æœ‰å®‰è£…PHPç¨‹åº","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432018,"discussion_content":"æ‰¾ä¸åˆ°ä¾èµ–åº“å’Œç¬¦å·è¡¨å¯¼è‡´çš„ï¼Œæˆ‘åœ¨åé¢çš„ç­”ç–‘ä¸­å†è¯¦ç»†è®²ä¸€ä¸‹è¿™ä¸ªé—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544437037,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":47915,"user_name":"ä¸€å¿µæ— æ˜","can_delete":false,"product_type":"c1","uid":1324487,"ip_address":"","ucode":"2BDEC60A3590A1","user_header":"https://static001.geekbang.org/account/avatar/00/14/35/c7/9e292197.jpg","comment_is_top":false,"comment_ctime":1544256223,"is_pvip":false,"replies":[{"id":"17057","content":"æ²¡æœ‰ç»å¯¹çš„çš„æ ‡å‡†ï¼Œæœ‰çš„æ—¶å€™ä½ çœ‹åˆ°äº†90% ä¹Ÿä¸ä»£è¡¨æœ‰IOçš„æ€§èƒ½ç“¶é¢ˆï¼Œå®ƒåªæ˜¯å‘Šè¯‰ä½ è¿›ç¨‹åœ¨ç­‰å¾…èµ„æºæ—¶å æœ‰çš„æ—¶é—´æ¯”ä¾‹ã€‚å…·ä½“æ˜¯ä¸æ˜¯æœ‰é—®é¢˜è¿˜éœ€è¦å…¶ä»–æŒ‡æ ‡æ¥ç¡®è®¤ï¼Œæ¯”å¦‚ç£ç›˜I&#47;Oçš„ç¹å¿™æƒ…å†µ","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1544279415,"ip_address":"","comment_id":47915,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1544256223","product_id":100020901,"comment_content":"è€å¸ˆï¼Œä½¿ç”¨topå‘½ä»¤æ˜¾ç¤ºçš„ç»“æœï¼ŒCpu(s)è¿™ä¸€æ çš„%waå¤šé«˜æ‰ç®—é«˜å‘¢ï¼Ÿæœ‰æ²¡æœ‰ä¸€ä¸ªåŸºå‡†å€¼ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431943,"discussion_content":"æ²¡æœ‰ç»å¯¹çš„çš„æ ‡å‡†ï¼Œæœ‰çš„æ—¶å€™ä½ çœ‹åˆ°äº†90% ä¹Ÿä¸ä»£è¡¨æœ‰IOçš„æ€§èƒ½ç“¶é¢ˆï¼Œå®ƒåªæ˜¯å‘Šè¯‰ä½ è¿›ç¨‹åœ¨ç­‰å¾…èµ„æºæ—¶å æœ‰çš„æ—¶é—´æ¯”ä¾‹ã€‚å…·ä½“æ˜¯ä¸æ˜¯æœ‰é—®é¢˜è¿˜éœ€è¦å…¶ä»–æŒ‡æ ‡æ¥ç¡®è®¤ï¼Œæ¯”å¦‚ç£ç›˜I/Oçš„ç¹å¿™æƒ…å†µ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544279415,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":47872,"user_name":"å¾€äº‹éšé£ï¼Œé¡ºå…¶è‡ªç„¶","can_delete":false,"product_type":"c1","uid":1235692,"ip_address":"","ucode":"F266EC6B143E38","user_header":"https://static001.geekbang.org/account/avatar/00/12/da/ec/779c1a78.jpg","comment_is_top":false,"comment_ctime":1544242010,"is_pvip":false,"replies":[{"id":"17042","content":"ç‚¹å‡»é“¾æ¥çœ‹ä¸‹githubï¼Œé‡Œé¢æœ‰Dockerfileï¼Œæ‰§è¡Œmake buildå°±å¯ä»¥ç”Ÿæˆé•œåƒ","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1544255272,"ip_address":"","comment_id":47872,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1544242010","product_id":100020901,"comment_content":"è€å¸ˆï¼Œèƒ½ä¸èƒ½å†å¼„ä¸€ä¸ªnginxå’Œphpåˆ¶ä½œæˆdockeré•œåƒçš„æ–‡æ¡£ï¼Œæç¯å¢ƒæäº†å¥½ä¹…ï¼Œæœ‰ä¸å°‘é—®é¢˜ã€‚<br>centosä¸‹æ“ä½œä¸ç›¸åŒ","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431921,"discussion_content":"ç‚¹å‡»é“¾æ¥çœ‹ä¸‹githubï¼Œé‡Œé¢æœ‰Dockerfileï¼Œæ‰§è¡Œmake buildå°±å¯ä»¥ç”Ÿæˆé•œåƒ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544255272,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":47722,"user_name":"å…ƒå¤©å¤«","can_delete":false,"product_type":"c1","uid":1315599,"ip_address":"","ucode":"A453A2EBA77780","user_header":"","comment_is_top":false,"comment_ctime":1544186591,"is_pvip":false,"replies":[{"id":"17007","content":"åŠ æ²¹","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1544192954,"ip_address":"","comment_id":47722,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1544186591","product_id":100020901,"comment_content":"å·²ç»è½ä¸‹äº†ä¸¤èŠ‚è¯¾ï¼Œæ‰“å¡ï¼Œæé†’ä¸‹è‡ªå·±","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431869,"discussion_content":"åŠ æ²¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544192954,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":47618,"user_name":"krain","can_delete":false,"product_type":"c1","uid":1169438,"ip_address":"","ucode":"64A5FC10B5CCD2","user_header":"https://static001.geekbang.org/account/avatar/00/11/d8/1e/f495cac7.jpg","comment_is_top":false,"comment_ctime":1544166042,"is_pvip":false,"replies":[{"id":"17047","content":"éœ€è¦æ³¨æ„ä¸‹topé»˜è®¤æ˜¾ç¤ºçš„æ˜¯æ‰€æœ‰CPUä½¿ç”¨çš„å¹³å‡å€¼ï¼Œä½ å¯èƒ½ä¼šæ³¨æ„åˆ°æˆ‘åœ¨æ¡ˆä¾‹ä¸­éƒ½ä¼šé€šè¿‡1åˆ‡æ¢åˆ°æ¯ä¸ªCPUçš„ä½¿ç”¨æƒ…å†µã€‚è‡³äºä¼šä¸ä¼šæŠ¥è­¦å°±å–å†³äºä½ çš„æŠ¥è­¦ç­–ç•¥äº†","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1544257032,"ip_address":"","comment_id":47618,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1544166042","product_id":100020901,"comment_content":"è€å¸ˆï¼Œè¯·æ•™ä¸€ä¸‹ï¼Œæˆ‘ä¸€å°48æ ¸çš„æœåŠ¡å™¨ï¼ŒtopæŸ¥çœ‹æœ‰ä¸€ä¸ªè¿›ç¨‹çš„cpuä½¿ç”¨ç‡200%å¤šï¼Œä½†cpuæ€»ä½¿ç”¨ç‡10%å·¦å³ï¼Œè¿™æ ·çš„ä½¿ç”¨ç‡æ­£å¸¸å—ï¼Œä¼šä¸ä¼šè§¦å‘ç›‘æ§æŠ¥è­¦ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431835,"discussion_content":"éœ€è¦æ³¨æ„ä¸‹topé»˜è®¤æ˜¾ç¤ºçš„æ˜¯æ‰€æœ‰CPUä½¿ç”¨çš„å¹³å‡å€¼ï¼Œä½ å¯èƒ½ä¼šæ³¨æ„åˆ°æˆ‘åœ¨æ¡ˆä¾‹ä¸­éƒ½ä¼šé€šè¿‡1åˆ‡æ¢åˆ°æ¯ä¸ªCPUçš„ä½¿ç”¨æƒ…å†µã€‚è‡³äºä¼šä¸ä¼šæŠ¥è­¦å°±å–å†³äºä½ çš„æŠ¥è­¦ç­–ç•¥äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544257032,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":47128,"user_name":"niz","can_delete":false,"product_type":"c1","uid":1333708,"ip_address":"","ucode":"942576EE3B31F3","user_header":"https://static001.geekbang.org/account/avatar/00/14/59/cc/b7488e4c.jpg","comment_is_top":false,"comment_ctime":1544060798,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1544060798","product_id":100020901,"comment_content":"æœ‹å‹æ¨èçš„è¯¾ç¨‹ï¼Œå¸Œæœ›å°½å¿«è·Ÿä¸ŠèŠ‚å¥","like_count":0},{"had_liked":false,"id":46973,"user_name":"Shengyin","can_delete":false,"product_type":"c1","uid":1334786,"ip_address":"","ucode":"1A88F422FFB06B","user_header":"https://static001.geekbang.org/account/avatar/00/14/5e/02/3ac2eb73.jpg","comment_is_top":false,"comment_ctime":1544012774,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1544012774","product_id":100020901,"comment_content":"æ˜¯ä¸æ˜¯ç”Ÿäº§ç³»ç»Ÿéƒ½å¿…é¡»é¢„è£…pidstatã€perfç­‰å·¥å…·ï¼Ÿå¦‚æœæ²¡æœ‰çš„è¯æ˜¯ä¸æ˜¯èƒ½ç”¨çš„æ‰‹æ®µåŸºæœ¬ä¸Šå°±æ²¡æ²¡è¾™äº†ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1069269,"avatar":"https://static001.geekbang.org/account/avatar/00/10/50/d5/73334a95.jpg","nickname":"doos","note":"","ucode":"7C9AF67F90E65C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":578904,"discussion_content":"æ˜¯äº†éœ€è¦æå‰å®‰è£…","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657086593,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":46869,"user_name":"Blue sky","can_delete":false,"product_type":"c1","uid":1337182,"ip_address":"","ucode":"9551E5AC118AF5","user_header":"","comment_is_top":false,"comment_ctime":1543994507,"is_pvip":false,"replies":[{"id":"16758","content":"è¿™æ˜¯æ‰¾ä¸åˆ°ç¬¦å·è¡¨å¯¼è‡´çš„ï¼Œå¯ä»¥å‚è€ƒä¸‹ç•™è¨€é‡Œå›å¤è§£å†³","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1544017205,"ip_address":"","comment_id":46869,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543994507","product_id":100020901,"comment_content":"æœ‹é£å“¥å¥½ï¼Œæˆ‘è¿™é‡Œä½¿ç”¨perf top -g -p id ä¹‹åï¼Œå†æ‰“å¼€php-fpmçš„å †æ ˆä¿¡æ¯ï¼Œå¹¶æ²¡æœ‰æ˜¾ç¤ºå…·ä½“çš„å‡½æ•°åç§°ï¼Œæ˜¯perfç‰ˆæœ¬çš„åŸå› ä¹ˆï¼Ÿperfç‰ˆæœ¬3.10.0ç³»ç»Ÿcentos7.3.1611  å†…æ ¸ç‰ˆæœ¬ 3.10.1.517.e17.x86_64","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431579,"discussion_content":"è¿™æ˜¯æ‰¾ä¸åˆ°ç¬¦å·è¡¨å¯¼è‡´çš„ï¼Œå¯ä»¥å‚è€ƒä¸‹ç•™è¨€é‡Œå›å¤è§£å†³","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544017205,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":46745,"user_name":"ä»²é¬¼","can_delete":false,"product_type":"c1","uid":1314692,"ip_address":"","ucode":"DB1CD7052D5BA6","user_header":"https://static001.geekbang.org/account/avatar/00/14/0f/84/d8e63885.jpg","comment_is_top":false,"comment_ctime":1543976629,"is_pvip":false,"replies":[{"id":"16767","content":"1. å½“ç„¶è¿˜æ˜¯è¿›ç¨‹çš„CPUæ—¶é—´<br>2. iowaitåªæ˜¯ä¸ªå‚è€ƒï¼Œåé¢IOéƒ¨åˆ†ä¼šä»‹ç»IOçš„æ€§èƒ½æŒ‡æ ‡ï¼Œæ¯”å¦‚ç£ç›˜IOçš„å“åº”æ—¶é—´å’Œä½¿ç”¨ç‡ç­‰","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1544018048,"ip_address":"","comment_id":46745,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543976629","product_id":100020901,"comment_content":"è€å¸ˆå¥½ï¼Œè¯·æ•™2ä¸ªé—®é¢˜ï¼š<br>1. niceæ—¶é—´æŒ‡â€œè°ƒæ•´è¿›ç¨‹niceå€¼æ‰€ç”¨çš„æ—¶é—´â€ï¼Œè¿˜æ˜¯â€œniceå€¼ä¸º1-19çš„è¿›ç¨‹å ç”¨CPUçš„æ—¶é—´â€ï¼Ÿ<br>2. man procæåˆ°iowait not reliableï¼Œé‚£æœ‰æ²¡æœ‰ç±»ä¼¼çš„æŒ‡æ ‡æ›¿ä»£iowaitï¼Ÿ<br>","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431525,"discussion_content":"1. å½“ç„¶è¿˜æ˜¯è¿›ç¨‹çš„CPUæ—¶é—´\n2. iowaitåªæ˜¯ä¸ªå‚è€ƒï¼Œåé¢IOéƒ¨åˆ†ä¼šä»‹ç»IOçš„æ€§èƒ½æŒ‡æ ‡ï¼Œæ¯”å¦‚ç£ç›˜IOçš„å“åº”æ—¶é—´å’Œä½¿ç”¨ç‡ç­‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544018048,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":46430,"user_name":"Zenppl","can_delete":false,"product_type":"c1","uid":1322987,"ip_address":"","ucode":"093795428BADB7","user_header":"https://static001.geekbang.org/account/avatar/00/14/2f/eb/5dceac8a.jpg","comment_is_top":false,"comment_ctime":1543924709,"is_pvip":false,"replies":[{"id":"16599","content":"ğŸ‘è°¢è°¢åˆ†äº«","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1543927677,"ip_address":"","comment_id":46430,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543924709","product_id":100020901,"comment_content":"åˆ†äº«ä¸‹æˆ‘çš„perfå®‰è£…æ–¹å¼<br>ubuntu server 16.04<br>apt install linux-tools-common<br>$ perf æç¤ºå®‰è£…ä»¥ä¸‹æŒ‡å®šç‰ˆæœ¬çš„tools<br>linux-tools-4.4.0-24-generic<br>linux-cloud-tools-4.4.0-24-generic<br><br>åˆ†åˆ«apt installåperf --versionå®‰è£…æˆåŠŸ<br>","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431458,"discussion_content":"ğŸ‘è°¢è°¢åˆ†äº«","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543927677,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":46429,"user_name":"Zenppl","can_delete":false,"product_type":"c1","uid":1322987,"ip_address":"","ucode":"093795428BADB7","user_header":"https://static001.geekbang.org/account/avatar/00/14/2f/eb/5dceac8a.jpg","comment_is_top":false,"comment_ctime":1543923839,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543923839","product_id":100020901,"comment_content":"è€å¸ˆï¼Œæˆ‘çš„é—®é¢˜æ‰¾åˆ°äº†ï¼Œæˆ‘è£…çš„perfç‰ˆæœ¬åº”è¯¥æœ‰é—®é¢˜","like_count":0},{"had_liked":false,"id":46412,"user_name":"Zenppl","can_delete":false,"product_type":"c1","uid":1322987,"ip_address":"","ucode":"093795428BADB7","user_header":"https://static001.geekbang.org/account/avatar/00/14/2f/eb/5dceac8a.jpg","comment_is_top":false,"comment_ctime":1543917921,"is_pvip":false,"replies":[{"id":"16601","content":"å—¯ï¼Œå®‰è£…è½¯ä»¶åŒ…æ˜¯ä¸ªåŸºæœ¬åŠŸ","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1543927733,"ip_address":"","comment_id":46412,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543917921","product_id":100020901,"comment_content":"è€å¸ˆå¥½ï¼Œubuntu server 16.04,æ²¡æœ‰è‡ªå¸¦perfï¼Œä¸‹è½½sourceé€šè¿‡makeå®‰è£…ï¼Œæ‰§è¡Œperf top -g -p [pid]åä¸€ç›´åœ¨åˆ·æ–°ï¼Œå¹¶æç¤ºå¦‚ä¸‹ã€‚æ˜¯æˆ‘è£…çš„å§¿åŠ¿ä¸å¯¹ä¹ˆï¼Ÿ<br>Mapped keys:<br>\t[d]     display refresh delay.             \t(2)<br>\t[e]     display entries (lines).           \t(63)<br>\t[f]     profile display filter (count).    \t(5)<br>\t[F]     annotate display filter (percent). \t(5%)<br>\t[s]     annotate symbol.                   \t(NULL)<br>\t[S]     stop annotation.<br>\t[K]     hide kernel_symbols symbols.     \t(no)<br>\t[U]     hide user symbols.               \t(no)<br>\t[z]     toggle sample zeroing.             \t(0)<br>\t[qQ]    quit.<br><br>Enter selection, or unmapped key to continue:  <br>","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431451,"discussion_content":"å—¯ï¼Œå®‰è£…è½¯ä»¶åŒ…æ˜¯ä¸ªåŸºæœ¬åŠŸ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543927733,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":46152,"user_name":"é˜¿æ±œ","can_delete":false,"product_type":"c1","uid":1205987,"ip_address":"","ucode":"0206C81A71284E","user_header":"https://static001.geekbang.org/account/avatar/00/12/66/e3/5fae81d2.jpg","comment_is_top":false,"comment_ctime":1543854907,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543854907","product_id":100020901,"comment_content":"æ‰“å¡","like_count":0},{"had_liked":false,"id":46150,"user_name":"ichen","can_delete":false,"product_type":"c1","uid":1156973,"ip_address":"","ucode":"2A931EBE9098D0","user_header":"https://static001.geekbang.org/account/avatar/00/11/a7/6d/19bff1f9.jpg","comment_is_top":false,"comment_ctime":1543854448,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543854448","product_id":100020901,"comment_content":"å¯¹äºperf top -gåªçœ‹åˆ°åå…­è¿›åˆ¶ç çš„é—®é¢˜ï¼Œæˆ‘åœ¨enable perfçš„dwarf featureåè§£å†³ã€‚<br>å…·ä½“å°±æ˜¯å…ˆå®‰è£…è¿™ä¸ª: sudo apt-get install libdw-dev<br>ç„¶åå†ä»æºç é‡æ–°ç¼–è¯‘perfã€‚ <br>ref: https:&#47;&#47;stackoverflow.com&#47;questions&#47;18504690&#47;perf-can-find-symbol-in-the-kernel-but-can-not-find-symbol-in-my-program-how-t?lq=1","like_count":0},{"had_liked":false,"id":46063,"user_name":"é™³å…ˆæ£®","can_delete":false,"product_type":"c1","uid":1229006,"ip_address":"","ucode":"0F7AC617E3FE90","user_header":"https://static001.geekbang.org/account/avatar/00/12/c0/ce/fc41ad5e.jpg","comment_is_top":false,"comment_ctime":1543841051,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543841051","product_id":100020901,"comment_content":"è€å¸ˆæŒ‰ç…§ä½ ç»™çš„è¿™ä¸ªå‘½ä»¤æŸ¥çœ‹perf top -g -p 2995ï¼ŒæŸ¥çœ‹çš„éƒ½æ˜¯16è¿›åˆ¶çš„åœ°å€ï¼Œç„¶åä¹Ÿçœ‹ä¸å‡ºè°ƒç”¨å…³ç³»ï¼Œç„¶åçœ‹è§ä½ ç»™ä¸‹é¢çš„åŒå­¦ç•™è¨€ï¼Œä½¿ç”¨ä»¥ä¸‹æ–¹å¼æ“ä½œï¼šåªçœ‹åˆ°åœ°å€è€Œä¸æ˜¯å‡½æ•°åæ˜¯ç”±äºåº”ç”¨ç¨‹åºè¿è¡Œåœ¨å®¹å™¨ä¸­ï¼Œå®ƒçš„ä¾èµ–ä¹Ÿéƒ½åœ¨å®¹å™¨å†…éƒ¨ï¼Œæ•…è€Œperfæ— æ³•æ‰¾åˆ°PHPç¬¦å·è¡¨ã€‚å…·ä½“ä¸æ˜¯å¤ªæ˜ç™½è¿™ä¸ªæ˜¯æ€ä¹ˆæ“ä½œï¼Œå› ä¸ºdockeré‡Œé¢ä½ è¿™è¾¹æ„å»ºçš„éƒ½æ˜¯æœ€å°åŒ–ï¼Œå¾ˆå¤šå‘½ä»¤éƒ½æ²¡æœ‰è£…Â·Â·Â·èƒ½å¦ç»™ä¸ªå¤§æ¦‚çš„å…·ä½“æµç¨‹ã€‚","like_count":0},{"had_liked":false,"id":46060,"user_name":"é™³å…ˆæ£®","can_delete":false,"product_type":"c1","uid":1229006,"ip_address":"","ucode":"0F7AC617E3FE90","user_header":"https://static001.geekbang.org/account/avatar/00/12/c0/ce/fc41ad5e.jpg","comment_is_top":false,"comment_ctime":1543840277,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543840277","product_id":100020901,"comment_content":"perf top -g -p 2811<br>è¯·é—®ä¸‹è€å¸ˆè¿™ä¸ªå‘½ä»¤æ˜¯å¤Ÿè¦è¿›åˆ°å®¹å™¨å†…éƒ¨å»çœ‹ï¼Œå®¿ä¸»æœºä¸Šé¢ç¡®å®çœ‹ä¸åˆ°è°ƒç”¨å…³ç³»Â·Â·Â·<br><br>","like_count":0},{"had_liked":false,"id":45950,"user_name":"f","can_delete":false,"product_type":"c1","uid":1027733,"ip_address":"","ucode":"8849D39F700E4B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ae/95/d1b13c9e.jpg","comment_is_top":false,"comment_ctime":1543824466,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543824466","product_id":100020901,"comment_content":"æ‰“å¡","like_count":0},{"had_liked":false,"id":45845,"user_name":"åˆ’æ—¶ä»£","can_delete":false,"product_type":"c1","uid":1061454,"ip_address":"","ucode":"9554CE2F83B77F","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/2o1Izf2YyJSnnI0ErZ51pYRlnrmibqUTaia3tCU1PjMxuwyXSKOLUYiac2TQ5pd5gNGvS81fVqKWGvDsZLTM8zhWg/132","comment_is_top":false,"comment_ctime":1543803026,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543803026","product_id":100020901,"comment_content":"æ‰“å¡day6","like_count":0},{"had_liked":false,"id":45761,"user_name":"ä¸€ç”Ÿä¸€ä¸–","can_delete":false,"product_type":"c1","uid":1254081,"ip_address":"","ucode":"D8C3E55A920676","user_header":"https://static001.geekbang.org/account/avatar/00/13/22/c1/d402bfbf.jpg","comment_is_top":false,"comment_ctime":1543780916,"is_pvip":false,"replies":[{"id":"16293","content":"è¿™æ˜¯ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œgithubä¸Šæœ‰è¯¦ç»†çš„ä½¿ç”¨æ–‡æ¡£","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1543793565,"ip_address":"","comment_id":45761,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543780916","product_id":100020901,"comment_content":"ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œåªæ˜¯éœ€è¦é¢å¤–çš„ç¬¦å·ç¿»è¯‘ï¼Œå¯ä»¥ä½¿ç”¨ perf-map-agentè¿™ä¸ªé¡¹ç›®å¸®ä½ ç”Ÿæˆæ‰€éœ€è¦çš„ç¬¦å·è¡¨<br><br>è€å¸ˆè¿™ä¸ªå¦‚ä½•ç”¨perf-map-agent?","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431198,"discussion_content":"è¿™æ˜¯ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œgithubä¸Šæœ‰è¯¦ç»†çš„ä½¿ç”¨æ–‡æ¡£","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543793565,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":45751,"user_name":"LinkinPark","can_delete":false,"product_type":"c1","uid":1013069,"ip_address":"","ucode":"6B52463014FA9A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/75/4d/cd259dc1.jpg","comment_is_top":false,"comment_ctime":1543769237,"is_pvip":false,"replies":[{"id":"16295","content":"è¿™æ˜¯CentOSå—ï¼Ÿåªçœ‹åˆ°åœ°å€è€Œä¸æ˜¯å‡½æ•°åæ˜¯ç”±äºåº”ç”¨ç¨‹åºè¿è¡Œåœ¨å®¹å™¨ä¸­ï¼Œå®ƒçš„ä¾èµ–ä¹Ÿéƒ½åœ¨å®¹å™¨å†…éƒ¨ï¼Œæ•…è€Œperfæ— æ³•æ‰¾åˆ°PHPç¬¦å·è¡¨ã€‚ä¸€ä¸ªç®€å•çš„è§£å†³æ–¹æ³•æ˜¯ä½¿ç”¨perf recordç”Ÿæˆperf.dataæ‹·è´åˆ°å®¹å™¨å†…éƒ¨ perf reportã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1543794005,"ip_address":"","comment_id":45751,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1543769237","product_id":100020901,"comment_content":"çœ‹è§å¾ˆå¤šåŒå­¦éƒ½é‡åˆ°äº†æˆ‘ä¸€æ ·çš„é—®é¢˜ï¼Œperf top çœ‹åˆ°çš„ä¸æ˜¯func åï¼Œè€Œæ˜¯ä¸€å †åƒåœ°å€ä¸€æ ·çš„stringï¼›å³ä½¿ç‚¹å‡»åŠ å·å±•å¼€ä¹Ÿè¿˜æ˜¯ä¸€æ ·ï¼Œå¦‚ä¸‹ï¼š<br>Samples: 794K of event &#39;cycles:pp&#39;, Event count (approx.): 570876147, Thread: php-fpm(45082)<br>  Children      Self  Shared Object       Symbol                                                                                                             â—†<br>+   44.40%    44.40%  php-fpm             [.] 0x000000000094e383                                                                                             â–’<br>+   22.78%    22.78%  php-fpm             [.] 0x00000000008ccf85                                                                                             â–’<br>+   18.60%    18.60%  php-fpm             [.] 0x000000000016a730                                                                                             â–’<br>+    5.95%     5.95%  php-fpm             [.] 0x00000000009578d8                                                                                             â–’<br>+    3.51%     3.51%  php-fpm             [.] 0x000000000098d158","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431192,"discussion_content":"è¿™æ˜¯CentOSå—ï¼Ÿåªçœ‹åˆ°åœ°å€è€Œä¸æ˜¯å‡½æ•°åæ˜¯ç”±äºåº”ç”¨ç¨‹åºè¿è¡Œåœ¨å®¹å™¨ä¸­ï¼Œå®ƒçš„ä¾èµ–ä¹Ÿéƒ½åœ¨å®¹å™¨å†…éƒ¨ï¼Œæ•…è€Œperfæ— æ³•æ‰¾åˆ°PHPç¬¦å·è¡¨ã€‚ä¸€ä¸ªç®€å•çš„è§£å†³æ–¹æ³•æ˜¯ä½¿ç”¨perf recordç”Ÿæˆperf.dataæ‹·è´åˆ°å®¹å™¨å†…éƒ¨ perf reportã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543794005,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1103360,"avatar":"https://static001.geekbang.org/account/avatar/00/10/d6/00/dbd52a12.jpg","nickname":"æ´¥æ´¥æœ‰å‘³å„¿","note":"","ucode":"8089184EC62D8D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":204337,"discussion_content":"å®¹å™¨å†… æ²¡æœ‰yumå·¥å…·ï¼Œæ²¡æœ‰perfå·¥å…· æ— æ³•ä½¿ç”¨perf report æŸ¥çœ‹ï¼Œæ€ä¹ˆè§£å†³å•Šï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584156269,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":45743,"user_name":"SICUN","can_delete":false,"product_type":"c1","uid":1254261,"ip_address":"","ucode":"22A384904EB9E9","user_header":"https://static001.geekbang.org/account/avatar/00/13/23/75/2b599841.jpg","comment_is_top":false,"comment_ctime":1543765098,"is_pvip":false,"replies":[{"id":"16297","content":"åªçœ‹åˆ°åœ°å€è€Œä¸æ˜¯å‡½æ•°åæ˜¯ç”±äºåº”ç”¨ç¨‹åºè¿è¡Œåœ¨å®¹å™¨ä¸­ï¼Œå®ƒçš„ä¾èµ–ä¹Ÿéƒ½åœ¨å®¹å™¨å†…éƒ¨ï¼Œæ•…è€Œperfæ— æ³•æ‰¾åˆ°PHPç¬¦å·è¡¨ã€‚ä¸€ä¸ªç®€å•çš„è§£å†³æ–¹æ³•æ˜¯ä½¿ç”¨perf recordç”Ÿæˆperf.dataæ‹·è´åˆ°å®¹å™¨å†…éƒ¨ perf reportã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1543794338,"ip_address":"","comment_id":45743,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543765098","product_id":100020901,"comment_content":"è€å¸ˆï¼Œcentos 7.4ä¸‹ ï¼Œä½¿ç”¨perf top æŸ¥çœ‹çš„ç»“æœæ˜¾ç¤ºçš„æ˜¯16è¿›åˆ¶æ•°ï¼Œæ²¡çœ‹åˆ°é¢„æœŸçš„å‡½æ•°åï¼Œå¸Œæœ›è§£ç­”ä¸€ä¸‹","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431186,"discussion_content":"åªçœ‹åˆ°åœ°å€è€Œä¸æ˜¯å‡½æ•°åæ˜¯ç”±äºåº”ç”¨ç¨‹åºè¿è¡Œåœ¨å®¹å™¨ä¸­ï¼Œå®ƒçš„ä¾èµ–ä¹Ÿéƒ½åœ¨å®¹å™¨å†…éƒ¨ï¼Œæ•…è€Œperfæ— æ³•æ‰¾åˆ°PHPç¬¦å·è¡¨ã€‚ä¸€ä¸ªç®€å•çš„è§£å†³æ–¹æ³•æ˜¯ä½¿ç”¨perf recordç”Ÿæˆperf.dataæ‹·è´åˆ°å®¹å™¨å†…éƒ¨ perf reportã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543794338,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":45736,"user_name":"J","can_delete":false,"product_type":"c1","uid":1204008,"ip_address":"","ucode":"7F1BD7F66F4700","user_header":"https://static001.geekbang.org/account/avatar/00/12/5f/28/17ed19bc.jpg","comment_is_top":false,"comment_ctime":1543763423,"is_pvip":false,"replies":[{"id":"16298","content":"psæŒ‰ç…§è¿›ç¨‹çŠ¶æ€è¿‡æ»¤æ‰¾åˆ°RçŠ¶æ€çš„è¿›ç¨‹","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1543794382,"ip_address":"","comment_id":45736,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543763423","product_id":100020901,"comment_content":"æœ‰æ²¡æœ‰ä»€ä¹ˆåŠæ³•èƒ½åˆ—å‡ºvmstat r çš„è¿›ç¨‹æ˜¯ä»€ä¹ˆï¼Ÿ<br><br>","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431183,"discussion_content":"psæŒ‰ç…§è¿›ç¨‹çŠ¶æ€è¿‡æ»¤æ‰¾åˆ°RçŠ¶æ€çš„è¿›ç¨‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543794382,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":45731,"user_name":"dexter","can_delete":false,"product_type":"c1","uid":1315252,"ip_address":"","ucode":"DD51207438FBD6","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEL5xnfuicbtRz4F87AAjZX6oCEjMtYiaIu4iaQichQmy0vEBA6Sumic1RDvUCeuBEqj6iatnt2kENbKYmuw/132","comment_is_top":false,"comment_ctime":1543762057,"is_pvip":false,"replies":[{"id":"16302","content":"æ–‡ç« é‡Œé¢æœ‰é“¾æ¥ï¼Œæ˜¯æ”¾åœ¨githubä¸Šçš„","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1543795173,"ip_address":"","comment_id":45731,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543762057","product_id":100020901,"comment_content":"è¿™ä¸ªè½¯ä»¶èƒ½ç”¨pcæ‰“å¼€å—ï¼Œdockerçš„å®éªŒä»£ç è¦æ€ä¹ˆä¸‹è½½è·å–åˆ°ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431180,"discussion_content":"æ–‡ç« é‡Œé¢æœ‰é“¾æ¥ï¼Œæ˜¯æ”¾åœ¨githubä¸Šçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543795173,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":45674,"user_name":"æ¨Šæµ·æ¶›","can_delete":false,"product_type":"c1","uid":1323249,"ip_address":"","ucode":"0B04D5985EE0E1","user_header":"https://static001.geekbang.org/account/avatar/00/14/30/f1/bf7fd8d2.jpg","comment_is_top":false,"comment_ctime":1543743287,"is_pvip":false,"replies":[{"id":"16309","content":"åªçœ‹åˆ°åœ°å€è€Œä¸æ˜¯å‡½æ•°åæ˜¯ç”±äºåº”ç”¨ç¨‹åºè¿è¡Œåœ¨å®¹å™¨ä¸­ï¼Œå®ƒçš„ä¾èµ–ä¹Ÿéƒ½åœ¨å®¹å™¨å†…éƒ¨ï¼Œæ•…è€Œperfæ— æ³•æ‰¾åˆ°PHPç¬¦å·è¡¨ã€‚ä¸€ä¸ªç®€å•çš„è§£å†³æ–¹æ³•æ˜¯ä½¿ç”¨perf recordç”Ÿæˆperf.dataæ‹·è´åˆ°å®¹å™¨å†…éƒ¨ perf reportã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1543796908,"ip_address":"","comment_id":45674,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543743287","product_id":100020901,"comment_content":"perf top -g -pè¿½è¸ªä¸åˆ°sqrtï¼Œæ˜¯æ€ä¹ˆå›äº‹å‘¢ï¼Ÿ<br><br>","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431149,"discussion_content":"åªçœ‹åˆ°åœ°å€è€Œä¸æ˜¯å‡½æ•°åæ˜¯ç”±äºåº”ç”¨ç¨‹åºè¿è¡Œåœ¨å®¹å™¨ä¸­ï¼Œå®ƒçš„ä¾èµ–ä¹Ÿéƒ½åœ¨å®¹å™¨å†…éƒ¨ï¼Œæ•…è€Œperfæ— æ³•æ‰¾åˆ°PHPç¬¦å·è¡¨ã€‚ä¸€ä¸ªç®€å•çš„è§£å†³æ–¹æ³•æ˜¯ä½¿ç”¨perf recordç”Ÿæˆperf.dataæ‹·è´åˆ°å®¹å™¨å†…éƒ¨ perf reportã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543796908,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":45672,"user_name":"Chris","can_delete":false,"product_type":"c1","uid":1132777,"ip_address":"","ucode":"82056BBE2E4488","user_header":"https://static001.geekbang.org/account/avatar/00/11/48/e9/f7dba760.jpg","comment_is_top":false,"comment_ctime":1543743005,"is_pvip":false,"replies":[{"id":"16315","content":"perfå±äºåŠ¨æ€è·Ÿè¸ªå·¥å…·ï¼Œä¼šæ¶ˆè€—ç³»ç»Ÿèµ„æºçš„ï¼Œæ¯”å¦‚CPUã€å†…å­˜ç­‰","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1543797197,"ip_address":"","comment_id":45672,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543743005","product_id":100020901,"comment_content":"åœ¨ä¸€ä¸ªcentos6.6çš„æœåŠ¡å™¨ä¸Šæ‰§è¡Œperf top -gå¡ä½äº†ï¼Œç„¶åæ•´ä¸ªæœåŠ¡å™¨æ— æ³•ç™»é™†ï¼Œè¿™ä¸ªå‘½ä»¤è¿™ä¹ˆå±é™©å•Š","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431148,"discussion_content":"perfå±äºåŠ¨æ€è·Ÿè¸ªå·¥å…·ï¼Œä¼šæ¶ˆè€—ç³»ç»Ÿèµ„æºçš„ï¼Œæ¯”å¦‚CPUã€å†…å­˜ç­‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543797197,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":45656,"user_name":"mj4ever","can_delete":false,"product_type":"c1","uid":1005549,"ip_address":"","ucode":"73028E537099CC","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/ed/d50de13c.jpg","comment_is_top":false,"comment_ctime":1543739372,"is_pvip":true,"replies":[{"id":"16313","content":"åªçœ‹åˆ°åœ°å€è€Œä¸æ˜¯å‡½æ•°åæ˜¯ç”±äºåº”ç”¨ç¨‹åºè¿è¡Œåœ¨å®¹å™¨ä¸­ï¼Œå®ƒçš„ä¾èµ–ä¹Ÿéƒ½åœ¨å®¹å™¨å†…éƒ¨ï¼Œæ•…è€Œperfæ— æ³•æ‰¾åˆ°PHPç¬¦å·è¡¨ã€‚<br><br>å¦å¤–ï¼Œè¿™ä¸ªåº”ç”¨æ˜¯åœ¨ubuntuä¸Šç¼–è¯‘çš„ï¼Œå®ƒæ‰€ä¾èµ–çš„åº“è·¯å¾„è·Ÿcentosä¸ä¸€æ ·ã€‚è¿™æ ·ï¼Œå³ä½¿ä½ åœ¨centosä¸Šå®‰è£…äº†phpï¼Œperfä¹Ÿè¿˜æ˜¯æ‰¾ä¸åˆ°é‚£äº›ä¾èµ–åº“","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1543797079,"ip_address":"","comment_id":45656,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543739372","product_id":100020901,"comment_content":"å‘¨æœ«äº†ï¼Œè¡¥ä¸Šä¹‹å‰çš„è¯¾ç¨‹ã€‚<br>æœ¬æ¬¡è¯¾ç¨‹å­¦åˆ°äº†ä»¥ä¸‹å†…å®¹ï¼š<br>1ã€ç†è§£äº†CPUä½¿ç”¨ç‡æ˜¯å¦‚ä½•è®¡ç®—çš„ï¼Œå¹¶åˆæ­¥ç†è§£10ä¸ªæŒ‡æ ‡çš„å«ä¹‰ã€åœ¨åç»­å­¦ä¹ è¿‡ç¨‹ä¸­ï¼Œéœ€è¿›ä¸€æ­¥ç†è§£è¿™10ä¸ªæŒ‡æ ‡ï¼Œå¹¶èƒ½åœ¨æŸæŒ‡æ ‡å‡ºç°é—®é¢˜åï¼Œå¦‚ä½•è¿›ä¸€æ­¥æ’æŸ¥å“ªäº›æ–¹é¢ã€‘<br>2ã€ç³»ç»Ÿå‡ºç°é—®é¢˜æ—¶ï¼Œå¯ä»¥å…ˆé€šè¿‡topæŸ¥çœ‹æ€»ä½“èµ„æºçš„ä½¿ç”¨æƒ…å†µï¼Œç„¶åå†ç»“åˆpidstatæŸ¥çœ‹å…·ä½“è¿›ç¨‹çš„ç”¨æˆ·æ€CPUå’Œå†…æ ¸æ€CPUä½¿ç”¨æƒ…å†µï¼›è‹¥ç¡®å®šæ˜¯ç”¨æˆ·è¿›ç¨‹é—®é¢˜ï¼Œåˆ™å†æ ¹æ®perfå·¥å…·ï¼Œè¿›è¡Œåœ¨çº¿æˆ–è€…ç¦»çº¿åˆ†æï¼Œè¿›ä¸€æ­¥ç¡®è®¤å ç”¨ CPU çš„åˆ°åº•æ˜¯ä»£ç é‡Œçš„å“ªä¸ªå‡½æ•°ã€åç»­è¿˜è¦åŠ å¼ºå¯¹äºperfå·¥å…·çš„æŒæ¡ã€‘<br>3ã€å¯ä»¥å€ŸåŠ©Apache Benchè¿›è¡Œç½‘ç«™å‹åŠ›æµ‹è¯•ã€åœ¨åç»­å·¥ä½œä¸­ï¼Œå¯ä»¥å°è¯•ç”¨æ­¤å·¥å…·åšä¸‹äº§å“çš„å‹åŠ›æµ‹è¯•ã€‘<br><br>å¦å¤–ï¼Œç”¨perfå·¥å…·åˆ†ææ—¶ï¼Œç¬¬å››åˆ—å…¨éƒ½æ˜¯ç¬¦å·ï¼Œæ²¡æœ‰å‡ºç°å‡½æ•°åï¼Œä¸çŸ¥é“æ˜¯ä»€ä¹ˆåŸå› å¯¼è‡´çš„ï¼Œç•™è¨€ä¸­ä¹Ÿæœ‰ä¸¤ä¸ªåŒå­¦æåˆ°äº†è¿™ä¸ªé—®é¢˜ï¼Œä¸çŸ¥é“å’ŒCentosæ˜¯å¦æœ‰å…³ç³»ã€‚","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431139,"discussion_content":"åªçœ‹åˆ°åœ°å€è€Œä¸æ˜¯å‡½æ•°åæ˜¯ç”±äºåº”ç”¨ç¨‹åºè¿è¡Œåœ¨å®¹å™¨ä¸­ï¼Œå®ƒçš„ä¾èµ–ä¹Ÿéƒ½åœ¨å®¹å™¨å†…éƒ¨ï¼Œæ•…è€Œperfæ— æ³•æ‰¾åˆ°PHPç¬¦å·è¡¨ã€‚\n\nå¦å¤–ï¼Œè¿™ä¸ªåº”ç”¨æ˜¯åœ¨ubuntuä¸Šç¼–è¯‘çš„ï¼Œå®ƒæ‰€ä¾èµ–çš„åº“è·¯å¾„è·Ÿcentosä¸ä¸€æ ·ã€‚è¿™æ ·ï¼Œå³ä½¿ä½ åœ¨centosä¸Šå®‰è£…äº†phpï¼Œperfä¹Ÿè¿˜æ˜¯æ‰¾ä¸åˆ°é‚£äº›ä¾èµ–åº“","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543797079,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":45614,"user_name":"è¶…å¤§å®å½“å½“","can_delete":false,"product_type":"c1","uid":1203824,"ip_address":"","ucode":"847532DD090D28","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIGMzsqGicBHicmA0xosKibBSmFjrwG8LuRwky3QlZibJt1treDMLPuaKviaC9JrJdQpdJE199ztVMJOGQ/132","comment_is_top":false,"comment_ctime":1543722242,"is_pvip":false,"replies":[{"id":"16322","content":"åªçœ‹åˆ°åœ°å€è€Œä¸æ˜¯å‡½æ•°åæ˜¯ç”±äºåº”ç”¨ç¨‹åºè¿è¡Œåœ¨å®¹å™¨ä¸­ï¼Œå®ƒçš„ä¾èµ–ä¹Ÿéƒ½åœ¨å®¹å™¨å†…éƒ¨ï¼Œæ•…è€Œperfæ— æ³•æ‰¾åˆ°PHPç¬¦å·è¡¨ã€‚ä¸€ä¸ªç®€å•çš„è§£å†³æ–¹æ³•æ˜¯ä½¿ç”¨perf recordç”Ÿæˆperf.dataæ‹·è´åˆ°å®¹å™¨å†…éƒ¨ perf reportã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1543797426,"ip_address":"","comment_id":45614,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543722242","product_id":100020901,"comment_content":"åŒé—®:<br><br>ç³»ç»Ÿç‰ˆæœ¬centos7.2<br>perf version 3.10.0-862.14.4.el7.x86_64.debug<br>åœ¨perf top -g -P [pid]å‘½ä»¤é‡Œé¢ï¼Œè·³åˆ°php-fpmå›è½¦åä»…ä»…çœ‹åˆ°åå…­è¿›åˆ¶ï¼Œæ²¡çœ‹åˆ°è°ƒç”¨å‡½æ•°ï¼Œæ˜¯ç‰ˆæœ¬é—®é¢˜å—ï¼Ÿ<br>","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431121,"discussion_content":"åªçœ‹åˆ°åœ°å€è€Œä¸æ˜¯å‡½æ•°åæ˜¯ç”±äºåº”ç”¨ç¨‹åºè¿è¡Œåœ¨å®¹å™¨ä¸­ï¼Œå®ƒçš„ä¾èµ–ä¹Ÿéƒ½åœ¨å®¹å™¨å†…éƒ¨ï¼Œæ•…è€Œperfæ— æ³•æ‰¾åˆ°PHPç¬¦å·è¡¨ã€‚ä¸€ä¸ªç®€å•çš„è§£å†³æ–¹æ³•æ˜¯ä½¿ç”¨perf recordç”Ÿæˆperf.dataæ‹·è´åˆ°å®¹å™¨å†…éƒ¨ perf reportã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543797426,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":45606,"user_name":"gentlemanâ™¥ï¸","can_delete":false,"product_type":"c1","uid":1119062,"ip_address":"","ucode":"0BAC746A70038C","user_header":"https://static001.geekbang.org/account/avatar/00/11/13/56/6a062937.jpg","comment_is_top":false,"comment_ctime":1543721247,"is_pvip":false,"replies":[{"id":"16326","content":"è¯·ç”¨Linux","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1543797559,"ip_address":"","comment_id":45606,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543721247","product_id":100020901,"comment_content":"è€å¸ˆèƒ½è®²ä¸‹ macæ€ä¹ˆå®‰è£…sysstatå˜›ã€<br>ç”¨.&#47;configure make make install<br>æç¤ºé”™è¯¯","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431119,"discussion_content":"è¯·ç”¨Linux","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543797559,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":45580,"user_name":"èŒ´é¦™æ ¹","can_delete":false,"product_type":"c1","uid":1316111,"ip_address":"","ucode":"B91C00B72077F1","user_header":"https://static001.geekbang.org/account/avatar/00/14/15/0f/954be2db.jpg","comment_is_top":false,"comment_ctime":1543713295,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543713295","product_id":100020901,"comment_content":"æ‰“å¡å­¦ä¹ ï¼Œä»Šå¤©æ”¶è·perf","like_count":0},{"had_liked":false,"id":45572,"user_name":"ä¸€ç”Ÿä¸€ä¸–","can_delete":false,"product_type":"c1","uid":1254081,"ip_address":"","ucode":"D8C3E55A920676","user_header":"https://static001.geekbang.org/account/avatar/00/13/22/c1/d402bfbf.jpg","comment_is_top":false,"comment_ctime":1543681740,"is_pvip":false,"replies":[{"id":"16235","content":"ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œåªæ˜¯éœ€è¦é¢å¤–çš„ç¬¦å·ç¿»è¯‘ï¼Œå¯ä»¥ä½¿ç”¨ perf-map-agentè¿™ä¸ªé¡¹ç›®å¸®ä½ ç”Ÿæˆæ‰€éœ€è¦çš„ç¬¦å·è¡¨","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1543719064,"ip_address":"","comment_id":45572,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543681740","product_id":100020901,"comment_content":"è€å¸ˆperfå·¥å…·å¦‚ä½•åˆ†æJAVAç¨‹åºæ€§èƒ½å’Œè°ƒç”¨å…³ç³»ã€‚æˆ‘æ„Ÿè§‰è¿™ä¸ªé€‚åˆåˆ†æCæˆ–è€…C++ä¸é€‚åˆJAVAæ— æ³•æ‰¾åˆ°è°ƒç”¨å…³ç³»ï¼","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431100,"discussion_content":"ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œåªæ˜¯éœ€è¦é¢å¤–çš„ç¬¦å·ç¿»è¯‘ï¼Œå¯ä»¥ä½¿ç”¨ perf-map-agentè¿™ä¸ªé¡¹ç›®å¸®ä½ ç”Ÿæˆæ‰€éœ€è¦çš„ç¬¦å·è¡¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543719064,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":45561,"user_name":"DJH","can_delete":false,"product_type":"c1","uid":1256740,"ip_address":"","ucode":"2BDEF123B3DB6A","user_header":"https://static001.geekbang.org/account/avatar/00/13/2d/24/28acca15.jpg","comment_is_top":false,"comment_ctime":1543674400,"is_pvip":false,"replies":[{"id":"16328","content":"çœ‹ç™¾åˆ†æ¯”ï¼Œå•ç‹¬åªçœ‹sqrtè‡ªå·±çš„ç¡®ä¸é«˜ï¼Œä½†å®ƒæ˜¯çƒ­ç‚¹ä¸­çš„çƒ­ç‚¹","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1543797736,"ip_address":"","comment_id":45561,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543674400","product_id":100020901,"comment_content":"â€œè€å¸ˆï¼Œä»å‹æµ‹perfçš„æˆªå›¾çœ‹,sqrtçš„å æ¯”ä¸æ˜¯å¾ˆé«˜ï¼Œæ‚¨æ€ä¹ˆåˆ¤æ–­æ˜¯sqrtçš„é—®é¢˜çš„?â€åŒé—®...","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431095,"discussion_content":"çœ‹ç™¾åˆ†æ¯”ï¼Œå•ç‹¬åªçœ‹sqrtè‡ªå·±çš„ç¡®ä¸é«˜ï¼Œä½†å®ƒæ˜¯çƒ­ç‚¹ä¸­çš„çƒ­ç‚¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543797736,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":45502,"user_name":"miracle","can_delete":false,"product_type":"c1","uid":1276137,"ip_address":"","ucode":"FD7074F1062AE9","user_header":"https://static001.geekbang.org/account/avatar/00/13/78/e9/9d807269.jpg","comment_is_top":false,"comment_ctime":1543656323,"is_pvip":false,"replies":[{"id":"16242","content":"å¥½å»ºè®®ï¼Œè°¢è°¢ğŸ‘<br><br>","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1543720306,"ip_address":"","comment_id":45502,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543656323","product_id":100020901,"comment_content":"ä¸ªäººè§‰å¾—ä¸¤å°è™šæ‹Ÿæœºçš„å…³ç³»å¯ä»¥å†ç¨å¾®è¯¦ç»†çš„æè¿°ä¸€ç‚¹ï¼Œæ¯”å¦‚ç”»ä¸ªç®€å›¾ï¼Ÿè¿™æ ·åšabæµ‹è¯•çš„æ—¶å€™æ˜¯æ€æ ·äº§ç”Ÿè”åŠ¨å½±å“å°±ä¼šæ¸…æ¥šä¸€äº›","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431070,"discussion_content":"å¥½å»ºè®®ï¼Œè°¢è°¢ğŸ‘\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543720306,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":45414,"user_name":"ä¸€æ–‡","can_delete":false,"product_type":"c1","uid":1131720,"ip_address":"","ucode":"B672D36D5B9BC1","user_header":"https://static001.geekbang.org/account/avatar/00/11/44/c8/ed420754.jpg","comment_is_top":false,"comment_ctime":1543635222,"is_pvip":false,"replies":[{"id":"16335","content":"äº‰ç”¨CPUä¼šå¯¼è‡´ä¸Šä¸‹æ–‡åˆ‡æ¢","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1543798687,"ip_address":"","comment_id":45414,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543635222","product_id":100020901,"comment_content":"è¯·é—®ä¸ºä»€ä¹ˆåœ¨å°±ç»ªé˜Ÿåˆ—ç­‰å¾…çš„è¿›ç¨‹ä¹Ÿä¼šè€—è´¹CPUï¼Ÿæ–‡ä¸­æ‰€è¿°çš„æ¯ä¸ªè¿›ç¨‹éƒ½æœ‰ä¸€ä¸ªCPU%åˆ—ï¼Œè¡¨ç¤ºè¯¥è¿›ç¨‹CPUä½¿ç”¨ç‡ã€‚åŒ…æ‹¬ç”¨æˆ·ç©ºé—´ä½¿ç”¨çš„CPUï¼Œå†…æ ¸ç©ºé—´ä½¿ç”¨çš„CPUä»¥åŠåœ¨å°±ç»ªé˜Ÿåˆ—ç­‰å¾…è¿è¡Œçš„CPUã€‚æŒ‰æˆ‘ä¹‹å‰çš„ç†è§£ï¼Œåœ¨å°±ç»ªé˜Ÿåˆ—ç­‰å¾…è¿è¡Œçš„è¿‡ç¨‹æ˜¯å‡†å¤‡å¥½äº†è¿è¡Œæ‰€éœ€çš„å„ç±»èµ„æºä½†è¿˜æ²¡æ‹¿åˆ°CPUæ—¶é—´ç‰‡çš„è¿›ç¨‹ï¼Œæ—¢ç„¶æ²¡æ‹¿åˆ°CPUæ—¶é—´ç‰‡ï¼Œä¸ºä»€ä¹ˆè¿˜ä¼šè€—è´¹CPUï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431025,"discussion_content":"äº‰ç”¨CPUä¼šå¯¼è‡´ä¸Šä¸‹æ–‡åˆ‡æ¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543798687,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":45412,"user_name":"walker","can_delete":false,"product_type":"c1","uid":1324219,"ip_address":"","ucode":"FA5B2400A53730","user_header":"https://static001.geekbang.org/account/avatar/00/14/34/bb/0b971fca.jpg","comment_is_top":false,"comment_ctime":1543634362,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543634362","product_id":100020901,"comment_content":"æ‰“å¡D6","like_count":0},{"had_liked":false,"id":45399,"user_name":"å®ç³","can_delete":false,"product_type":"c1","uid":1335466,"ip_address":"","ucode":"FEE253A5DD6F00","user_header":"https://static001.geekbang.org/account/avatar/00/14/60/aa/d3d4fd91.jpg","comment_is_top":false,"comment_ctime":1543632013,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543632013","product_id":100020901,"comment_content":"æˆ‘ç”¨shellå‘½ä»¤ï¼Œæ˜¾ç¤ºæœ€é«˜CPUå ç”¨å‰10ç™¾åˆ†æ•°ã€‚","like_count":0},{"had_liked":false,"id":45388,"user_name":"Finfunnel","can_delete":false,"product_type":"c1","uid":1311984,"ip_address":"","ucode":"F3E464E9FC299B","user_header":"https://static001.geekbang.org/account/avatar/00/14/04/f0/0305b4c3.jpg","comment_is_top":false,"comment_ctime":1543629588,"is_pvip":false,"replies":[{"id":"16439","content":"PHP åº“é‡Œçš„å‡½æ•°","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1543832627,"ip_address":"","comment_id":45388,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543629588","product_id":100020901,"comment_content":"execute_exè¿™ä¸ªå‡½æ•°ä¸æ˜¯phpä»£ç ä¸­çš„ï¼Œè¯¾é‡Œä¹Ÿæ²¡è®²ï¼ŒæŸ¥ä¸åˆ°è¿™ä¸ªå‡½æ•°ä½œç”¨ï¼Œæ˜¯è‡ªå®šä¹‰çš„ï¼Œè¿˜æ˜¯åº•å±‚çš„å‡½æ•°åå‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431013,"discussion_content":"PHP åº“é‡Œçš„å‡½æ•°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543832627,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":45370,"user_name":"frodomei","can_delete":false,"product_type":"c1","uid":1172256,"ip_address":"","ucode":"332C468A7AA9FC","user_header":"https://static001.geekbang.org/account/avatar/00/11/e3/20/c642bc3f.jpg","comment_is_top":false,"comment_ctime":1543622353,"is_pvip":false,"replies":[{"id":"16340","content":"åé¢æ–‡ç« ä¼šè®²çš„","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1543799029,"ip_address":"","comment_id":45370,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543622353","product_id":100020901,"comment_content":"é€šè¿‡topå‘ç°si CPUä½¿ç”¨ç‡æ¯”è¾ƒé«˜ï¼ˆ40%å·¦å³ï¼‰ï¼Œå¹¶å‡è¡¡æ‰“åœ¨æ¯ä¸ªæ ¸ä¸Šï¼Œé€šè¿‡vmstatä¹Ÿå‘ç° inæ˜¯10wçº§çš„ï¼Œé€šè¿‡åˆ†æ&#47;proc&#47;softirqsæ–‡ä»¶å‘ç°äº§ç”Ÿè½¯ä¸­æ–­çš„åŸå› æ˜¯NET_RXï¼Œä¸‹ä¸€æ­¥è¯¥å¦‚ä½•åˆ†æï¼Ÿå¥‡æ€ªçš„çš„æ˜¯æˆ‘å¦ä¸€å°æœåŠ¡å™¨æ¥å—IPåŒ…é‡å’Œè¿™å°éƒ½æ˜¯1.7wå·¦å³ï¼Œè€Œinçš„é‡å´å°‘äº†7å€ï¼Œéº»çƒ¦å¤§ç‰›å¸®å¿™ç»™ä¸‹æ€è·¯ï¼Œæ„Ÿè°¢","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431003,"discussion_content":"åé¢æ–‡ç« ä¼šè®²çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543799029,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":45343,"user_name":"é£é£˜ï¼Œå¾ç‹¬æ€","can_delete":false,"product_type":"c1","uid":1131032,"ip_address":"","ucode":"4DF0E7DC22EE53","user_header":"https://static001.geekbang.org/account/avatar/00/11/42/18/edc1b373.jpg","comment_is_top":false,"comment_ctime":1543592099,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543592099","product_id":100020901,"comment_content":"d6æ‰“å¡","like_count":0},{"had_liked":false,"id":45329,"user_name":"Bolin","can_delete":false,"product_type":"c1","uid":1326242,"ip_address":"","ucode":"12C06A5A4E115E","user_header":"https://static001.geekbang.org/account/avatar/00/14/3c/a2/1bec7bdc.jpg","comment_is_top":false,"comment_ctime":1543588888,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543588888","product_id":100020901,"comment_content":"ç³»ç»Ÿç‰ˆæœ¬centos7.2<br>perf version 3.10.0-862.14.4.el7.x86_64.debug<br>åœ¨perf  top -g -P [pid]å‘½ä»¤é‡Œé¢ï¼Œè·³åˆ°php-fpmå›è½¦åä»…ä»…çœ‹åˆ°åå…­è¿›åˆ¶ï¼Œæ²¡çœ‹åˆ°è°ƒç”¨å‡½æ•°ï¼Œæ˜¯ç‰ˆæœ¬é—®é¢˜å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":45312,"user_name":"ç¥¥ä¼Ÿ","can_delete":false,"product_type":"c1","uid":1314639,"ip_address":"","ucode":"BB7D89109FC8BD","user_header":"https://static001.geekbang.org/account/avatar/00/14/0f/4f/5040f415.jpg","comment_is_top":false,"comment_ctime":1543584680,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543584680","product_id":100020901,"comment_content":"èµï¼Œè€å¸ˆè®²çš„éå¸¸å¥½ï¼Œè°¢è°¢","like_count":0},{"had_liked":false,"id":45305,"user_name":"èŠ±ä¼¼é›¾ä¸­çœ‹","can_delete":false,"product_type":"c1","uid":1317682,"ip_address":"","ucode":"D9979D86CB7AD9","user_header":"https://static001.geekbang.org/account/avatar/00/14/1b/32/467683eb.jpg","comment_is_top":false,"comment_ctime":1543581959,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543581959","product_id":100020901,"comment_content":"æ‰“å¡ï¼Œå­¦åˆ°äº†å¾ˆå¤šå“¦ï¼","like_count":0},{"had_liked":false,"id":45302,"user_name":"èµµå¼ºå¼º","can_delete":false,"product_type":"c1","uid":1073596,"ip_address":"","ucode":"1B8AE07484C69A","user_header":"https://static001.geekbang.org/account/avatar/00/10/61/bc/88a905a5.jpg","comment_is_top":false,"comment_ctime":1543581107,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543581107","product_id":100020901,"comment_content":"è€å¸ˆï¼Œä»å‹æµ‹perfçš„æˆªå›¾çœ‹,sqrtçš„å æ¯”ä¸æ˜¯å¾ˆé«˜ï¼Œæ‚¨æ€ä¹ˆåˆ¤æ–­æ˜¯sqrtçš„é—®é¢˜çš„?","like_count":0},{"had_liked":false,"id":45297,"user_name":"0oæ½‡æ¹˜é›¨å¤œo0","can_delete":false,"product_type":"c1","uid":1003334,"ip_address":"","ucode":"80E6E92A7CC22B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4f/46/4efa8607.jpg","comment_is_top":false,"comment_ctime":1543578807,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543578807","product_id":100020901,"comment_content":"æ‰“å¡","like_count":0},{"had_liked":false,"id":45261,"user_name":"ç–¯ç´","can_delete":false,"product_type":"c1","uid":1099379,"ip_address":"","ucode":"82ACAA4A27753D","user_header":"https://static001.geekbang.org/account/avatar/00/10/c6/73/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1543571756,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543571756","product_id":100020901,"comment_content":"è€å¸ˆï¼Œæˆ‘ç”¨centosï¼Œåœ¨è™šæ‹Ÿæœºé‡Œæµ‹è¯•ï¼Œperf top -g -pæ‰¾äº†åŠå¤©ï¼Œçœ‹ä¸åˆ°sqrtï¼Œå…¨æ˜¯16è¿›åˆ¶æ•°å­—ï¼Œè¯·é—®è¿™æ˜¯ä¸ºä»€ä¹ˆï¼Ÿ","like_count":0},{"had_liked":false,"id":45259,"user_name":"Eric è€ä¹Œé¾Ÿ","can_delete":false,"product_type":"c1","uid":1029671,"ip_address":"","ucode":"2853F01253E17A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b6/27/6ca3f497.jpg","comment_is_top":false,"comment_ctime":1543570116,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543570116","product_id":100020901,"comment_content":"å¾ˆå®ç”¨ï¼Œæœ‰ç©ºä¸€å®šå®æ“ä¸‹ï¼Œæ„Ÿå—ä¸€ä¸‹","like_count":0},{"had_liked":false,"id":45253,"user_name":"ä½è°ƒ","can_delete":false,"product_type":"c1","uid":1087237,"ip_address":"","ucode":"F4F001639091E0","user_header":"https://static001.geekbang.org/account/avatar/00/10/97/05/17cf5840.jpg","comment_is_top":false,"comment_ctime":1543568951,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543568951","product_id":100020901,"comment_content":"è€å¸ˆæœ‰ä¸ªç–‘é—®ï¼Œperf  top -gå‘½ä»¤æ¼”ç¤ºä¸­ï¼Œå ç”¨19%è¿™æ ·çš„16è¿›åˆ¶åœ°å€ï¼Œå¦‚ä½•å¯¹ç…§ï¼Ÿæœ‰å‚è€ƒå’Œå¯¹ç…§è¡¨ä¹ˆï¼Ÿ","like_count":0},{"had_liked":false,"id":45123,"user_name":"èµµå¼ºå¼º","can_delete":false,"product_type":"c1","uid":1073596,"ip_address":"","ucode":"1B8AE07484C69A","user_header":"https://static001.geekbang.org/account/avatar/00/10/61/bc/88a905a5.jpg","comment_is_top":false,"comment_ctime":1543547934,"is_pvip":false,"replies":[{"id":"16091","content":"åŒ…æ‹¬çš„ï¼Œè¿™äº›æŒ‡æ ‡å¯ä»¥ä»pidstatçš„ç»“æœä¸­çœ‹çš„","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1543588865,"ip_address":"","comment_id":45123,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543547934","product_id":100020901,"comment_content":"å€ªè€å¸ˆï¼Œæ–‡ä¸­è¿™æ®µè¯è¡¨è¿°æ˜¯å¦æœ‰è¯¯ï¼Ÿtopå‘½ä»¤æŸä¸ªè¿›ç¨‹CPUå æ¯”åº”è¯¥ä¸åŒ…æ‹¬å°±ç»ªç­‰å¾…æ—¶é—´å’Œè¿è¡Œè™šæ‹ŸåŒ–çš„æ—¶é—´å§ã€‚<br>â€œæ¯ä¸ªè¿›ç¨‹éƒ½æœ‰ä¸€ä¸ª %CPU åˆ—ï¼Œè¡¨ç¤ºè¿›ç¨‹çš„ CPU ä½¿ç”¨ç‡ã€‚å®ƒæ˜¯ç”¨æˆ·æ€å’Œå†…æ ¸æ€ CPU ä½¿ç”¨ç‡çš„æ€»å’Œï¼ŒåŒ…æ‹¬è¿›ç¨‹ç”¨æˆ·ç©ºé—´ä½¿ç”¨çš„ CPUã€é€šè¿‡ç³»ç»Ÿè°ƒç”¨æ‰§è¡Œçš„å†…æ ¸ç©ºé—´ CPU ã€ä»¥åŠåœ¨å°±ç»ªé˜Ÿåˆ—ç­‰å¾…è¿è¡Œçš„ CPUã€‚åœ¨è™šæ‹ŸåŒ–ç¯å¢ƒä¸­ï¼Œå®ƒè¿˜åŒ…æ‹¬äº†è¿è¡Œè™šæ‹Ÿæœºå ç”¨çš„ CPUã€‚â€ã€‚","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430930,"discussion_content":"åŒ…æ‹¬çš„ï¼Œè¿™äº›æŒ‡æ ‡å¯ä»¥ä»pidstatçš„ç»“æœä¸­çœ‹çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543588865,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":45115,"user_name":"ä¸œå­","can_delete":false,"product_type":"c1","uid":1303489,"ip_address":"","ucode":"59CF52913957C6","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI5lJBrAAQrpU1rP9GOhrDAWotY0pvpv6ovjEfHLn2iaA7zh8YtTWlXNf6XGFekoEB8dY3tUOL1E4g/132","comment_is_top":false,"comment_ctime":1543547305,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543547305","product_id":100020901,"comment_content":"è€å¸ˆï¼Œæˆ‘ç¢°åˆ°è¿‡å‡ æ¬¡åœ¨ç”Ÿäº§ç¯å¢ƒlinux 2.6.32ä¸­ä½¿ç”¨perf recordå¯¼è‡´ç³»ç»Ÿcrashçš„æƒ…å†µï¼Œä¸çŸ¥é“ä½ åœ¨å®é™…ä½¿ç”¨æ—¶ç¢°åˆ°è¿‡æ²¡æœ‰ï¼Œæ˜¯perfå·¥å…·çš„bugï¼Œè¿˜æ˜¯è®¾ç½®å‚æ•°çš„é—®é¢˜ï¼Œè°¢è°¢","like_count":0},{"had_liked":false,"id":45110,"user_name":"longhaiqwe","can_delete":false,"product_type":"c1","uid":1061318,"ip_address":"","ucode":"A5AEE950A7AF35","user_header":"https://static001.geekbang.org/account/avatar/00/10/31/c6/27225119.jpg","comment_is_top":false,"comment_ctime":1543547090,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543547090","product_id":100020901,"comment_content":"å€ªè€å¸ˆï¼Œé—®ä¸ªæ¯”è¾ƒå°ç™½çš„é—®é¢˜ï¼ŒN ä¸ªé€»è¾‘ CPU çš„æœºå™¨ï¼Œå¯äº† N ä¸ªçº¿ç¨‹ï¼Œå‡å¦‚æ¯ä¸ªçº¿ç¨‹éƒ½æ˜¯ while(1) ä»€ä¹ˆé‡Œé¢ä»€ä¹ˆéƒ½ä¸åšï¼ŒCPU ä½¿ç”¨ç‡åº”è¯¥æ˜¯æ¥è¿‘ (100*N)%ï¼Œä½†æ˜¯åœ¨whileä¸­è¿›è¡Œ cout æ‰“å°ï¼ŒCPU ä½¿ç”¨ç‡å°±ä¼šé™ä¸‹æ¥ï¼Œè¿™é‡Œé¢çš„åŸå› æ˜¯ä»€ä¹ˆï¼Ÿ","like_count":0},{"had_liked":false,"id":45103,"user_name":"å˜¿å˜¿å’Œå“ˆå“ˆ","can_delete":false,"product_type":"c1","uid":1040976,"ip_address":"","ucode":"D1DF7BB312BFAC","user_header":"https://static001.geekbang.org/account/avatar/00/0f/e2/50/9cc482c6.jpg","comment_is_top":false,"comment_ctime":1543545876,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543545876","product_id":100020901,"comment_content":"è€å¸ˆï¼Œåˆšæ‰é—®æ‚¨è¯´åœ¨githubä¸‹è½½ä¹‹åæ€ä¹ˆç”¨ï¼Œæ˜¯å› ä¸ºæˆ‘æ²¡æœ‰å¯åŠ¨dockerå®¹å™¨ã€‚å¯åŠ¨ä¹‹åå°±å¯ä»¥æ­£å¸¸è¿è¡Œ<br>Requests per second:    5681.84 [#&#47;sec] (mean)<br><br>è¿˜æœ‰ä¸€ä¸ªé—®é¢˜å°±æ˜¯ï¼Œæˆ‘çš„abå‘½ä»¤åªèƒ½åœ¨ç¬¬ä¸€ä¸ªç»ˆç«¯ä¸Šé¢æ‰§è¡Œã€‚åœ¨ç¬¬äºŒä¸ªç»ˆç«¯ä¸Šé¢æ‰§è¡Œæ²¡æœ‰ååº”","like_count":0},{"had_liked":false,"id":45095,"user_name":"WiFeng","can_delete":false,"product_type":"c1","uid":1043466,"ip_address":"","ucode":"D7F0FD3EC815B4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ec/0a/c35f9000.jpg","comment_is_top":false,"comment_ctime":1543545316,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543545316","product_id":100020901,"comment_content":"ç­‰å¾…iowaitæ—¶é—´ æ˜¯ç®—åˆ° ç”¨æˆ·æ€æ—¶é—´useräº†å—?<br><br>å¦å¤– %wait  ä¸%iowait æ˜¯ä¸€å›äº‹ä¸ï¼Œæœ‰äº›å·¥å…·ä½¿ç”¨çš„ iowait å¦‚mpstat,æœ‰äº›ä½¿ç”¨çš„wait å¦‚pidstat","like_count":0},{"had_liked":false,"id":45069,"user_name":"Smile","can_delete":false,"product_type":"c1","uid":1021017,"ip_address":"","ucode":"2002460CB3D869","user_header":"https://static001.geekbang.org/account/avatar/00/0f/94/59/ac2aa72b.jpg","comment_is_top":false,"comment_ctime":1543543788,"is_pvip":true,"replies":[{"id":"16092","content":"æ­£è§£ï¼Œè¿™æ˜¯åœ¨è™šæ‹ŸåŒ–ä¸­æ‰ä¼šæœ‰çš„ï¼Œå¹¶ä¸”åœ¨äº‘å¹³å°ä¸­æœ‰å¯èƒ½ä¼šè¢«æœåŠ¡æä¾›å•†ç¦æ‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1543588972,"ip_address":"","comment_id":45069,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543543788","product_id":100020901,"comment_content":"å€ªè€å¸ˆï¼Œä½ å¥½ï¼Œå¦‚æœäº‘å¹³å°ä¸­çš„è™šæ‹Ÿæœºçš„steal å€¼è¿‡é«˜ï¼Œæ˜¯å¦å¯ä»¥è¡¨æ˜ è™šæ‹Ÿæœºä¹‹é—´åœ¨å‘ç”ŸCPUäº‰æŠ¢<br>ç„¶åå¥½å¥‡è¿™ä¸ªå€¼æ˜¯æ€ä¹ˆè®¡ç®—å‡ºæ¥çš„ï¼Œè™šæ‹Ÿæœºè‡ªèº«æ€ä¹ˆçŸ¥é“åŒå®¿ä¸»æœºä¸Šå…¶ä»–è™šæ‹Ÿæœºçš„å ç”¨ï¼Ÿ æœ›è€å¸ˆè§£ç­”ï¼Œæ„Ÿè°¢ã€‚<br><br><br>","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430911,"discussion_content":"æ­£è§£ï¼Œè¿™æ˜¯åœ¨è™šæ‹ŸåŒ–ä¸­æ‰ä¼šæœ‰çš„ï¼Œå¹¶ä¸”åœ¨äº‘å¹³å°ä¸­æœ‰å¯èƒ½ä¼šè¢«æœåŠ¡æä¾›å•†ç¦æ‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543588972,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":45061,"user_name":"å˜¿å˜¿å’Œå“ˆå“ˆ","can_delete":false,"product_type":"c1","uid":1040976,"ip_address":"","ucode":"D1DF7BB312BFAC","user_header":"https://static001.geekbang.org/account/avatar/00/0f/e2/50/9cc482c6.jpg","comment_is_top":false,"comment_ctime":1543542306,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543542306","product_id":100020901,"comment_content":"è€å¸ˆé—®æ‚¨ä¸ªèœé¸Ÿçš„é—®é¢˜ã€‚æˆ‘ä»githubä¸Šé¢wgetä¸‹äº†æ‚¨çš„é‚£ä¸ªæ–‡ä»¶ã€‚ä½†æ˜¯æˆ‘éœ€è¦æ€ä¹ˆæ‰èƒ½è¿è¡Œåœ¨è‡ªå·±çš„æœºå™¨ä¸Šå‘¢ã€‚æœ‰æ—¶é—´å›å¤ä¸€ä¸‹ã€‚è°¢è°¢å•¦ã€‚","like_count":0},{"had_liked":false,"id":45055,"user_name":"ä¸€æ­¥","can_delete":false,"product_type":"c1","uid":1005391,"ip_address":"","ucode":"73CEA468CE70C3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","comment_is_top":false,"comment_ctime":1543541732,"is_pvip":true,"discussion_count":0,"race_medal":1,"score":"1543541732","product_id":100020901,"comment_content":"CPU ä½¿ç”¨ç‡ï¼Œå°±æ˜¯é™¤äº†ç©ºé—²æ—¶é—´å¤–çš„å…¶ä»–æ—¶é—´å æ€» CPU æ—¶é—´çš„ç™¾åˆ†æ¯”<br><br>é‚£ä¹ˆä¸ºä»€ä¹ˆæ–‡ä¸­è¯´ä½¿ç”¨èŠ‚æ‹ç´¯åŠ å€¼ å¯ä»¥è®¡ç®—å‡ºCPU ä½¿ç”¨ç‡å‘¢ï¼Ÿè¿™ä¸ªæ˜¯ä»€ä¹ˆåŸç†çš„","like_count":0},{"had_liked":false,"id":45052,"user_name":"nike","can_delete":false,"product_type":"c1","uid":1061281,"ip_address":"","ucode":"9D4E0F18D7ECDF","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/wRKRQaLBnjUF1SbNpNfC5icicVKSLQDgMunBI0V6mU1trJk72JfBh9jLW8QicP7gJic7aszbFBYvwbYmYJtNLHw3Yw/132","comment_is_top":false,"comment_ctime":1543541494,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543541494","product_id":100020901,"comment_content":"è€å¸ˆï¼Œæˆ‘å®è·µæ—¶å‘ç°è¿½è¸ªä¸åˆ°sqrtæ–¹æ³•ï¼Œæ˜¯ä¸æ˜¯phpfpmæºç è·¯å¾„é—®é¢˜ï¼Œè¿˜æ˜¯åˆ«çš„ä»€ä¹ˆå‘¢","like_count":0},{"had_liked":false,"id":45050,"user_name":"ç‹æ¶›","can_delete":false,"product_type":"c1","uid":1315326,"ip_address":"","ucode":"6241F08634D342","user_header":"https://static001.geekbang.org/account/avatar/00/14/11/fe/de00d8d8.jpg","comment_is_top":false,"comment_ctime":1543541455,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543541455","product_id":100020901,"comment_content":"æ‰“å¡d6","like_count":0},{"had_liked":false,"id":45049,"user_name":"nike","can_delete":false,"product_type":"c1","uid":1061281,"ip_address":"","ucode":"9D4E0F18D7ECDF","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/wRKRQaLBnjUF1SbNpNfC5icicVKSLQDgMunBI0V6mU1trJk72JfBh9jLW8QicP7gJic7aszbFBYvwbYmYJtNLHw3Yw/132","comment_is_top":false,"comment_ctime":1543541416,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543541416","product_id":100020901,"comment_content":"è€å¸ˆï¼Œæˆ‘å®è·µæ—¶è°ƒç”¨äº†sqrtæ–¹æ³•ï¼Œä½†æ˜¯perfé‡Œè¾¹è¿½è¸ªä¸åˆ°é‚£ä¸ªæ–¹æ³•ï¼Œæ˜¯ä¸æ˜¯phpfpmæºç è·¯å¾„é—®é¢˜è¿˜æ˜¯åˆ«çš„ä»€ä¹ˆå‘¢","like_count":0},{"had_liked":false,"id":45048,"user_name":"yfdba","can_delete":false,"product_type":"c1","uid":1315770,"ip_address":"","ucode":"3202F79BF99695","user_header":"","comment_is_top":false,"comment_ctime":1543541406,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543541406","product_id":100020901,"comment_content":"è€å¸ˆï¼Œæˆ‘ç”¨cgroupç‰¹æ€§é™åˆ¶åº”ç”¨ä½¿ç”¨cpuã€ioæˆ–è€…å…¶ä»–èµ„æºï¼Œå…¶ä»–è¿ç»´äººå‘˜æ€ä¹ˆåˆ†ææœ€åèƒ½å®šä½é—®é¢˜åŸå› å°±æ˜¯ä½¿ç”¨äº†cgroupçš„é—®é¢˜å‘¢","like_count":0},{"had_liked":false,"id":45046,"user_name":"å¤§é£","can_delete":false,"product_type":"c1","uid":1320080,"ip_address":"","ucode":"2D98888FC63CA9","user_header":"","comment_is_top":false,"comment_ctime":1543541371,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543541371","product_id":100020901,"comment_content":"d3æ‰“å¡","like_count":0},{"had_liked":false,"id":45038,"user_name":"é˜¿å·-è±†å¤«","can_delete":false,"product_type":"c1","uid":1005123,"ip_address":"","ucode":"732188848B0A85","user_header":"https://static001.geekbang.org/account/avatar/00/0f/56/43/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1543541094,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543541094","product_id":100020901,"comment_content":"ä¸çŸ¥é“perl èƒ½ä¸èƒ½å®šä½åˆ°ï¼Œjava åŠ¨æ€å­—èŠ‚ç è°ƒç”¨çš„javaå‡½æ•°ï¼Œ è²Œä¼¼ç”¨jstackå°±åœ¨åŠ¨æ€å­—èŠ‚ç è¿™é‡Œæ–­æ‰äº†ã€‚","like_count":0},{"had_liked":false,"id":45018,"user_name":"_JQ.Wang","can_delete":false,"product_type":"c1","uid":1227617,"ip_address":"","ucode":"6BE451E16592F3","user_header":"https://static001.geekbang.org/account/avatar/00/12/bb/61/90ad7c91.jpg","comment_is_top":false,"comment_ctime":1543539745,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543539745","product_id":100020901,"comment_content":"ä¸Šç­è·¯ä¸Šçœ‹å®Œçš„ï¼Œä¸€ä¼šåˆ°äº†å…¬å¸ï¼Œæ“ç»ƒèµ·æ¥","like_count":0},{"had_liked":false,"id":45013,"user_name":"Douglas","can_delete":false,"product_type":"c1","uid":1073027,"ip_address":"","ucode":"CFDE3D76B9DAE6","user_header":"https://static001.geekbang.org/account/avatar/00/10/5f/83/bb728e53.jpg","comment_is_top":false,"comment_ctime":1543539407,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543539407","product_id":100020901,"comment_content":"è€å¸ˆï¼Œä¸€ä¸ªæœåŠ¡å™¨ä¸Šéƒ¨ç½²å¤šä¸ªè¿›ç¨‹æ˜¯ä¸æ˜¯ä¸å¤ªå»ºè®®ï¼Œè¿›ç¨‹é—´çš„ä¸Šä¸‹æ–‡åˆ‡æ¢éœ€è¦ä¿å­˜å…±äº«å†…å­˜ç©ºé—´ï¼Œè€Œçº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œä¸ç”¨ä¿å­˜å…±äº«å†…å­˜ç©ºé—´ï¼Œä¿å­˜çº¿ç¨‹æ ˆå†…å­˜ç©ºé—´å°±å¥½ï¼Œç²—ç•¥ç†è§£ï¼Œä¸çŸ¥é“æœ‰æ²¡æœ‰åå·®","like_count":0},{"had_liked":false,"id":45007,"user_name":"Linuxer","can_delete":false,"product_type":"c1","uid":1153978,"ip_address":"","ucode":"272D9D8089C3D6","user_header":"https://static001.geekbang.org/account/avatar/00/11/9b/ba/333b59e5.jpg","comment_is_top":false,"comment_ctime":1543538949,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543538949","product_id":100020901,"comment_content":"è¯·é—®å…³äºperfä¸çŸ¥é“è¿˜æœ‰æ— æ›´å¤šä»‹ç»?æˆ–è€…æ¨èäº›èµ„æ–™","like_count":0},{"had_liked":false,"id":45005,"user_name":"Geek_101627","can_delete":false,"product_type":"c1","uid":1070389,"ip_address":"","ucode":"F246019019F1CB","user_header":"https://static001.geekbang.org/account/avatar/00/10/55/35/09e7dfde.jpg","comment_is_top":false,"comment_ctime":1543538912,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543538912","product_id":100020901,"comment_content":"D6","like_count":0},{"had_liked":false,"id":45001,"user_name":"Linuxer","can_delete":false,"product_type":"c1","uid":1153978,"ip_address":"","ucode":"272D9D8089C3D6","user_header":"https://static001.geekbang.org/account/avatar/00/11/9b/ba/333b59e5.jpg","comment_is_top":false,"comment_ctime":1543538855,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543538855","product_id":100020901,"comment_content":"æˆ‘ä»¬ä¹‹å‰æ˜¯å…ˆé€šè¿‡topç¡®è®¤æ˜¯ç”¨æˆ·æ€cpué«˜è¿˜æ˜¯å†…æ ¸æ€cpué«˜ï¼Œç”¨æˆ·æ€cpué«˜è¿˜æ˜¯é€šè¿‡topç¡®è®¤æ˜¯å“ªä¸€ä¸ªè¿›ç¨‹å¯¼è‡´çš„ï¼Œä¼šç»“åˆä½¿ç”¨top -H -P æŸ¥æ‰¾æœ€è€—cpuçš„çº¿ç¨‹ï¼Œé€šè¿‡å¤šæ¬¡pstackå»ç¡®è®¤è°ƒç”¨æœ€é¢‘ç¹çš„ç‚¹ã€‚","like_count":0},{"had_liked":false,"id":44999,"user_name":"ninuxer","can_delete":false,"product_type":"c1","uid":1243135,"ip_address":"","ucode":"5394ADAF2667D6","user_header":"https://wx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEKQMM4m7NHuicr55aRiblTSEWIYe0QqbpyHweaoAbG7j2v7UUElqqeP3Ihrm3UfDPDRb1Hv8LvPwXqA/132","comment_is_top":false,"comment_ctime":1543538824,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543538824","product_id":100020901,"comment_content":"æ‰“å¡ï¼Œday6<br>ä¸€èˆ¬éƒ½èƒ½æ‰¾å‡ºä½¿ç”¨ç‡é«˜çš„è¿›ç¨‹ï¼Œä½†æœ‰æ—¶è¿™ç§ä½¿ç”¨ç‡é«˜æ˜¯çŸ­æ—¶é—´çš„ï¼ŒçœŸæ­£å»æœºå™¨ä¸Šåˆ†æçš„æ—¶å€™ï¼Œå¯èƒ½ä½¿ç”¨ç‡å°±é™ä¸‹å»äº†ï¼Œæ‰€ä»¥è¿˜æ˜¯åªä¼šæ ¹æ®ä¸€äº›æ—¥å¿—ä¿¡æ¯å»åˆ†æå¯èƒ½çš„åŸå› <br>","like_count":0},{"had_liked":false,"id":44998,"user_name":"ä¸€æ­¥","can_delete":false,"product_type":"c1","uid":1005391,"ip_address":"","ucode":"73CEA468CE70C3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","comment_is_top":false,"comment_ctime":1543538721,"is_pvip":true,"discussion_count":0,"race_medal":1,"score":"1543538721","product_id":100020901,"comment_content":"è€å¸ˆ Red Hat4.4.4-11 æ²¡æœ‰èŠ‚æ‹ç‡CONFIG_HZè¿™ä¸ªé…ç½®é¡¹å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":44980,"user_name":"è‚æ„¿æ„¿","can_delete":false,"product_type":"c1","uid":1315436,"ip_address":"","ucode":"0E35F1757555D1","user_header":"https://static001.geekbang.org/account/avatar/00/14/12/6c/347a3351.jpg","comment_is_top":false,"comment_ctime":1543537494,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543537494","product_id":100020901,"comment_content":"ä¸Šç­åœ°é“é€”ä¸­æ‰“å¡ã€‚","like_count":0},{"had_liked":false,"id":44944,"user_name":"æ¹–æ¹˜å¿—","can_delete":false,"product_type":"c1","uid":1285578,"ip_address":"","ucode":"C8B069B3AD4FEA","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erJR5Kj0Xm6LykFHLaWqHjQiaroVxgdoGI7uHEGz2D3PfibWNkBYP23QLzFmcuicgKLbqUch0ZJ2ZNOA/132","comment_is_top":false,"comment_ctime":1543531571,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543531571","product_id":100020901,"comment_content":"D5","like_count":0},{"had_liked":false,"id":44941,"user_name":"å–„è‰¯çš„ç”·äºº","can_delete":false,"product_type":"c1","uid":1315544,"ip_address":"","ucode":"ED27030DE75059","user_header":"https://static001.geekbang.org/account/avatar/00/14/12/d8/12879eb7.jpg","comment_is_top":false,"comment_ctime":1543516702,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543516702","product_id":100020901,"comment_content":"çœ‹å®Œç¡è§‰ğŸ’¤ï¼Œæ˜å¤©åŠ¨æ‰‹","like_count":0},{"had_liked":false,"id":44931,"user_name":"Geek_2b6807","can_delete":false,"product_type":"c1","uid":1240168,"ip_address":"","ucode":"4C1D0B7F283554","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ert8UYzoypaI9wMPZQV2ibThQ2zKsoge5R25qxHP10eia5pMYOV1mq6G9bft5LoygnyR6bn8RERwQDg/132","comment_is_top":false,"comment_ctime":1543510663,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543510663","product_id":100020901,"comment_content":"Perfå¾ˆå¼ºå¤§ï¼Œæ¡ˆä¾‹ç¨å¾®å¤æ‚ç‚¹å°±æ›´å¥½äº†","like_count":0}]}