{"id":78658,"title":"31 | è¯¯åˆ æ•°æ®åé™¤äº†è·‘è·¯ï¼Œè¿˜èƒ½æ€ä¹ˆåŠï¼Ÿ","content":"<p>ä»Šå¤©æˆ‘è¦å’Œä½ è®¨è®ºçš„æ˜¯ä¸€ä¸ªæ²‰é‡çš„è¯é¢˜ï¼šè¯¯åˆ æ•°æ®ã€‚</p><p>åœ¨å‰é¢å‡ ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº†MySQLçš„é«˜å¯ç”¨æ¶æ„ã€‚å½“ç„¶ï¼Œä¼ ç»Ÿçš„é«˜å¯ç”¨æ¶æ„æ˜¯ä¸èƒ½é¢„é˜²è¯¯åˆ æ•°æ®çš„ï¼Œå› ä¸ºä¸»åº“çš„ä¸€ä¸ªdrop tableå‘½ä»¤ï¼Œä¼šé€šè¿‡binlogä¼ ç»™æ‰€æœ‰ä»åº“å’Œçº§è”ä»åº“ï¼Œè¿›è€Œå¯¼è‡´æ•´ä¸ªé›†ç¾¤çš„å®ä¾‹éƒ½ä¼šæ‰§è¡Œè¿™ä¸ªå‘½ä»¤ã€‚</p><p>è™½ç„¶æˆ‘ä»¬ä¹‹å‰é‡åˆ°çš„å¤§å¤šæ•°çš„æ•°æ®è¢«åˆ ï¼Œéƒ½æ˜¯è¿ç»´åŒå­¦æˆ–è€…DBAèƒŒé”…çš„ã€‚ä½†å®é™…ä¸Šï¼Œåªè¦æœ‰æ•°æ®æ“ä½œæƒé™çš„åŒå­¦ï¼Œéƒ½æœ‰å¯èƒ½è¸©åˆ°è¯¯åˆ æ•°æ®è¿™æ¡çº¿ã€‚</p><p>ä»Šå¤©æˆ‘ä»¬å°±æ¥èŠèŠè¯¯åˆ æ•°æ®å‰åï¼Œæˆ‘ä»¬å¯ä»¥åšäº›ä»€ä¹ˆï¼Œå‡å°‘è¯¯åˆ æ•°æ®çš„é£é™©ï¼Œå’Œç”±è¯¯åˆ æ•°æ®å¸¦æ¥çš„æŸå¤±ã€‚</p><p>ä¸ºäº†æ‰¾åˆ°è§£å†³è¯¯åˆ æ•°æ®çš„æ›´é«˜æ•ˆçš„æ–¹æ³•ï¼Œæˆ‘ä»¬éœ€è¦å…ˆå¯¹å’ŒMySQLç›¸å…³çš„è¯¯åˆ æ•°æ®ï¼Œåšä¸‹åˆ†ç±»ï¼š</p><ol>\n<li>\n<p>ä½¿ç”¨deleteè¯­å¥è¯¯åˆ æ•°æ®è¡Œï¼›</p>\n</li>\n<li>\n<p>ä½¿ç”¨drop tableæˆ–è€…truncate tableè¯­å¥è¯¯åˆ æ•°æ®è¡¨ï¼›</p>\n</li>\n<li>\n<p>ä½¿ç”¨drop databaseè¯­å¥è¯¯åˆ æ•°æ®åº“ï¼›</p>\n</li>\n<li>\n<p>ä½¿ç”¨rmå‘½ä»¤è¯¯åˆ æ•´ä¸ªMySQLå®ä¾‹ã€‚</p>\n</li>\n</ol><h1>è¯¯åˆ è¡Œ</h1><p>åœ¨<a href=\"https://time.geekbang.org/column/article/76446\">ç¬¬24ç¯‡æ–‡ç« </a>ä¸­ï¼Œæˆ‘ä»¬æåˆ°å¦‚æœæ˜¯ä½¿ç”¨deleteè¯­å¥è¯¯åˆ äº†æ•°æ®è¡Œï¼Œå¯ä»¥ç”¨Flashbackå·¥å…·é€šè¿‡é—ªå›æŠŠæ•°æ®æ¢å¤å›æ¥ã€‚</p><p>Flashbackæ¢å¤æ•°æ®çš„åŸç†ï¼Œæ˜¯ä¿®æ”¹binlogçš„å†…å®¹ï¼Œæ‹¿å›åŸåº“é‡æ”¾ã€‚è€Œèƒ½å¤Ÿä½¿ç”¨è¿™ä¸ªæ–¹æ¡ˆçš„å‰ææ˜¯ï¼Œéœ€è¦ç¡®ä¿binlog_format=row å’Œ binlog_row_image=FULLã€‚</p><!-- [[[read_end]]] --><p>å…·ä½“æ¢å¤æ•°æ®æ—¶ï¼Œå¯¹å•ä¸ªäº‹åŠ¡åšå¦‚ä¸‹å¤„ç†ï¼š</p><ol>\n<li>\n<p>å¯¹äºinsertè¯­å¥ï¼Œå¯¹åº”çš„binlog eventç±»å‹æ˜¯Write_rows eventï¼ŒæŠŠå®ƒæ”¹æˆDelete_rows eventå³å¯ï¼›</p>\n</li>\n<li>\n<p>åŒç†ï¼Œå¯¹äºdeleteè¯­å¥ï¼Œä¹Ÿæ˜¯å°†Delete_rows eventæ”¹ä¸ºWrite_rows eventï¼›</p>\n</li>\n<li>\n<p>è€Œå¦‚æœæ˜¯Update_rowsçš„è¯ï¼Œbinlogé‡Œé¢è®°å½•äº†æ•°æ®è¡Œä¿®æ”¹å‰å’Œä¿®æ”¹åçš„å€¼ï¼Œå¯¹è°ƒè¿™ä¸¤è¡Œçš„ä½ç½®å³å¯ã€‚</p>\n</li>\n</ol><p>å¦‚æœè¯¯æ“ä½œä¸æ˜¯ä¸€ä¸ªï¼Œè€Œæ˜¯å¤šä¸ªï¼Œä¼šæ€ä¹ˆæ ·å‘¢ï¼Ÿæ¯”å¦‚ä¸‹é¢ä¸‰ä¸ªäº‹åŠ¡ï¼š</p><pre><code>(A)delete ...\n(B)insert ...\n(C)update ...\n</code></pre><p>ç°åœ¨è¦æŠŠæ•°æ®åº“æ¢å¤å›è¿™ä¸‰ä¸ªäº‹åŠ¡æ“ä½œä¹‹å‰çš„çŠ¶æ€ï¼Œç”¨Flashbackå·¥å…·è§£æbinlogåï¼Œå†™å›ä¸»åº“çš„å‘½ä»¤æ˜¯ï¼š</p><pre><code>(reverse C)update ...\n(reverse B)delete ...\n(reverse A)insert ...\n</code></pre><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœè¯¯åˆ æ•°æ®æ¶‰åŠåˆ°äº†å¤šä¸ªäº‹åŠ¡çš„è¯ï¼Œéœ€è¦å°†äº‹åŠ¡çš„é¡ºåºè°ƒè¿‡æ¥å†æ‰§è¡Œã€‚</p><p><strong>éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œæˆ‘ä¸å»ºè®®ä½ ç›´æ¥åœ¨ä¸»åº“ä¸Šæ‰§è¡Œè¿™äº›æ“ä½œã€‚</strong></p><p>æ¢å¤æ•°æ®æ¯”è¾ƒå®‰å…¨çš„åšæ³•ï¼Œæ˜¯æ¢å¤å‡ºä¸€ä¸ªå¤‡ä»½ï¼Œæˆ–è€…æ‰¾ä¸€ä¸ªä»åº“ä½œä¸ºä¸´æ—¶åº“ï¼Œåœ¨è¿™ä¸ªä¸´æ—¶åº“ä¸Šæ‰§è¡Œè¿™äº›æ“ä½œï¼Œç„¶åå†å°†ç¡®è®¤è¿‡çš„ä¸´æ—¶åº“çš„æ•°æ®ï¼Œæ¢å¤å›ä¸»åº“ã€‚</p><p>ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšå‘¢ï¼Ÿ</p><p>è¿™æ˜¯å› ä¸ºï¼Œä¸€ä¸ªåœ¨æ‰§è¡Œçº¿ä¸Šé€»è¾‘çš„ä¸»åº“ï¼Œæ•°æ®çŠ¶æ€çš„å˜æ›´å¾€å¾€æ˜¯æœ‰å…³è”çš„ã€‚å¯èƒ½ç”±äºå‘ç°æ•°æ®é—®é¢˜çš„æ—¶é—´æ™šäº†ä¸€ç‚¹å„¿ï¼Œå°±å¯¼è‡´å·²ç»åœ¨ä¹‹å‰è¯¯æ“ä½œçš„åŸºç¡€ä¸Šï¼Œä¸šåŠ¡ä»£ç é€»è¾‘åˆç»§ç»­ä¿®æ”¹äº†å…¶ä»–æ•°æ®ã€‚æ‰€ä»¥ï¼Œå¦‚æœè¿™æ—¶å€™å•ç‹¬æ¢å¤è¿™å‡ è¡Œæ•°æ®ï¼Œè€Œåˆæœªç»ç¡®è®¤çš„è¯ï¼Œå°±å¯èƒ½ä¼šå‡ºç°å¯¹æ•°æ®çš„äºŒæ¬¡ç ´åã€‚</p><p>å½“ç„¶ï¼Œ<strong>æˆ‘ä»¬ä¸æ­¢è¦è¯´è¯¯åˆ æ•°æ®çš„äº‹åå¤„ç†åŠæ³•ï¼Œæ›´é‡è¦æ˜¯è¦åšåˆ°äº‹å‰é¢„é˜²</strong>ã€‚æˆ‘æœ‰ä»¥ä¸‹ä¸¤ä¸ªå»ºè®®ï¼š</p><ol>\n<li>\n<p>æŠŠsql_safe_updateså‚æ•°è®¾ç½®ä¸ºonã€‚è¿™æ ·ä¸€æ¥ï¼Œå¦‚æœæˆ‘ä»¬å¿˜è®°åœ¨deleteæˆ–è€…updateè¯­å¥ä¸­å†™whereæ¡ä»¶ï¼Œæˆ–è€…whereæ¡ä»¶é‡Œé¢æ²¡æœ‰åŒ…å«ç´¢å¼•å­—æ®µçš„è¯ï¼Œè¿™æ¡è¯­å¥çš„æ‰§è¡Œå°±ä¼šæŠ¥é”™ã€‚</p>\n</li>\n<li>\n<p>ä»£ç ä¸Šçº¿å‰ï¼Œå¿…é¡»ç»è¿‡SQLå®¡è®¡ã€‚</p>\n</li>\n</ol><p>ä½ å¯èƒ½ä¼šè¯´ï¼Œè®¾ç½®äº†sql_safe_updates=onï¼Œå¦‚æœæˆ‘çœŸçš„è¦æŠŠä¸€ä¸ªå°è¡¨çš„æ•°æ®å…¨éƒ¨åˆ æ‰ï¼Œåº”è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ</p><p>å¦‚æœä½ ç¡®å®šè¿™ä¸ªåˆ é™¤æ“ä½œæ²¡é—®é¢˜çš„è¯ï¼Œå¯ä»¥åœ¨deleteè¯­å¥ä¸­åŠ ä¸Šwhereæ¡ä»¶ï¼Œæ¯”å¦‚where id&gt;=0ã€‚</p><p>ä½†æ˜¯ï¼Œdeleteå…¨è¡¨æ˜¯å¾ˆæ…¢çš„ï¼Œéœ€è¦ç”Ÿæˆå›æ»šæ—¥å¿—ã€å†™redoã€å†™binlogã€‚æ‰€ä»¥ï¼Œä»æ€§èƒ½è§’åº¦è€ƒè™‘ï¼Œä½ åº”è¯¥ä¼˜å…ˆè€ƒè™‘ä½¿ç”¨truncate tableæˆ–è€…drop tableå‘½ä»¤ã€‚</p><p>ä½¿ç”¨deleteå‘½ä»¤åˆ é™¤çš„æ•°æ®ï¼Œä½ è¿˜å¯ä»¥ç”¨Flashbackæ¥æ¢å¤ã€‚è€Œä½¿ç”¨truncate /drop tableå’Œdrop databaseå‘½ä»¤åˆ é™¤çš„æ•°æ®ï¼Œå°±æ²¡åŠæ³•é€šè¿‡Flashbackæ¥æ¢å¤äº†ã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p><p>è¿™æ˜¯å› ä¸ºï¼Œå³ä½¿æˆ‘ä»¬é…ç½®äº†binlog_format=rowï¼Œæ‰§è¡Œè¿™ä¸‰ä¸ªå‘½ä»¤æ—¶ï¼Œè®°å½•çš„binlogè¿˜æ˜¯statementæ ¼å¼ã€‚binlogé‡Œé¢å°±åªæœ‰ä¸€ä¸ªtruncate/drop è¯­å¥ï¼Œè¿™äº›ä¿¡æ¯æ˜¯æ¢å¤ä¸å‡ºæ•°æ®çš„ã€‚</p><p>é‚£ä¹ˆï¼Œå¦‚æœæˆ‘ä»¬çœŸçš„æ˜¯ä½¿ç”¨è¿™å‡ æ¡å‘½ä»¤è¯¯åˆ æ•°æ®äº†ï¼Œåˆè¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ</p><h1>è¯¯åˆ åº“/è¡¨</h1><p>è¿™ç§æƒ…å†µä¸‹ï¼Œè¦æƒ³æ¢å¤æ•°æ®ï¼Œå°±éœ€è¦ä½¿ç”¨å…¨é‡å¤‡ä»½ï¼ŒåŠ å¢é‡æ—¥å¿—çš„æ–¹å¼äº†ã€‚è¿™ä¸ªæ–¹æ¡ˆè¦æ±‚çº¿ä¸Šæœ‰å®šæœŸçš„å…¨é‡å¤‡ä»½ï¼Œå¹¶ä¸”å®æ—¶å¤‡ä»½binlogã€‚</p><p>åœ¨è¿™ä¸¤ä¸ªæ¡ä»¶éƒ½å…·å¤‡çš„æƒ…å†µä¸‹ï¼Œå‡å¦‚æœ‰äººä¸­åˆ12ç‚¹è¯¯åˆ äº†ä¸€ä¸ªåº“ï¼Œæ¢å¤æ•°æ®çš„æµç¨‹å¦‚ä¸‹ï¼š</p><ol>\n<li>\n<p>å–æœ€è¿‘ä¸€æ¬¡å…¨é‡å¤‡ä»½ï¼Œå‡è®¾è¿™ä¸ªåº“æ˜¯ä¸€å¤©ä¸€å¤‡ï¼Œä¸Šæ¬¡å¤‡ä»½æ˜¯å½“å¤©0ç‚¹ï¼›</p>\n</li>\n<li>\n<p>ç”¨å¤‡ä»½æ¢å¤å‡ºä¸€ä¸ªä¸´æ—¶åº“ï¼›</p>\n</li>\n<li>\n<p>ä»æ—¥å¿—å¤‡ä»½é‡Œé¢ï¼Œå–å‡ºå‡Œæ™¨0ç‚¹ä¹‹åçš„æ—¥å¿—ï¼›</p>\n</li>\n<li>\n<p>æŠŠè¿™äº›æ—¥å¿—ï¼Œé™¤äº†è¯¯åˆ é™¤æ•°æ®çš„è¯­å¥å¤–ï¼Œå…¨éƒ¨åº”ç”¨åˆ°ä¸´æ—¶åº“ã€‚</p>\n</li>\n</ol><p>è¿™ä¸ªæµç¨‹çš„ç¤ºæ„å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/2f/db/2fafd0b75286e0163f432f85428ff8db.png?wh=1142*856\" alt=\"\"></p><center><span class=\"reference\">å›¾1 æ•°æ®æ¢å¤æµç¨‹-mysqlbinlogæ–¹æ³•</span></center><p>å…³äºè¿™ä¸ªè¿‡ç¨‹ï¼Œæˆ‘éœ€è¦å’Œä½ è¯´æ˜å¦‚ä¸‹å‡ ç‚¹ï¼š</p><ol>\n<li>\n<p>ä¸ºäº†åŠ é€Ÿæ•°æ®æ¢å¤ï¼Œå¦‚æœè¿™ä¸ªä¸´æ—¶åº“ä¸Šæœ‰å¤šä¸ªæ•°æ®åº“ï¼Œä½ å¯ä»¥åœ¨ä½¿ç”¨mysqlbinlogå‘½ä»¤æ—¶ï¼ŒåŠ ä¸Šä¸€ä¸ªâ€“databaseå‚æ•°ï¼Œç”¨æ¥æŒ‡å®šè¯¯åˆ è¡¨æ‰€åœ¨çš„åº“ã€‚è¿™æ ·ï¼Œå°±é¿å…äº†åœ¨æ¢å¤æ•°æ®æ—¶è¿˜è¦åº”ç”¨å…¶ä»–åº“æ—¥å¿—çš„æƒ…å†µã€‚</p>\n</li>\n<li>\n<p>åœ¨åº”ç”¨æ—¥å¿—çš„æ—¶å€™ï¼Œéœ€è¦è·³è¿‡12ç‚¹è¯¯æ“ä½œçš„é‚£ä¸ªè¯­å¥çš„binlogï¼š</p>\n<ul>\n<li>å¦‚æœåŸå®ä¾‹æ²¡æœ‰ä½¿ç”¨GTIDæ¨¡å¼ï¼Œåªèƒ½åœ¨åº”ç”¨åˆ°åŒ…å«12ç‚¹çš„binlogæ–‡ä»¶çš„æ—¶å€™ï¼Œå…ˆç”¨â€“stop-positionå‚æ•°æ‰§è¡Œåˆ°è¯¯æ“ä½œä¹‹å‰çš„æ—¥å¿—ï¼Œç„¶åå†ç”¨â€“start-positionä»è¯¯æ“ä½œä¹‹åçš„æ—¥å¿—ç»§ç»­æ‰§è¡Œï¼›</li>\n<li>å¦‚æœå®ä¾‹ä½¿ç”¨äº†GTIDæ¨¡å¼ï¼Œå°±æ–¹ä¾¿å¤šäº†ã€‚å‡è®¾è¯¯æ“ä½œå‘½ä»¤çš„GTIDæ˜¯gtid1ï¼Œé‚£ä¹ˆåªéœ€è¦æ‰§è¡Œset gtid_next=gtid1;begin;commit; å…ˆæŠŠè¿™ä¸ªGTIDåŠ åˆ°ä¸´æ—¶å®ä¾‹çš„GTIDé›†åˆï¼Œä¹‹åæŒ‰é¡ºåºæ‰§è¡Œbinlogçš„æ—¶å€™ï¼Œå°±ä¼šè‡ªåŠ¨è·³è¿‡è¯¯æ“ä½œçš„è¯­å¥ã€‚</li>\n</ul>\n</li>\n</ol><p>ä¸è¿‡ï¼Œå³ä½¿è¿™æ ·ï¼Œä½¿ç”¨mysqlbinlogæ–¹æ³•æ¢å¤æ•°æ®è¿˜æ˜¯ä¸å¤Ÿå¿«ï¼Œä¸»è¦åŸå› æœ‰ä¸¤ä¸ªï¼š</p><ol>\n<li>\n<p>å¦‚æœæ˜¯è¯¯åˆ è¡¨ï¼Œæœ€å¥½å°±æ˜¯åªæ¢å¤å‡ºè¿™å¼ è¡¨ï¼Œä¹Ÿå°±æ˜¯åªé‡æ”¾è¿™å¼ è¡¨çš„æ“ä½œï¼Œä½†æ˜¯mysqlbinlogå·¥å…·å¹¶ä¸èƒ½æŒ‡å®šåªè§£æä¸€ä¸ªè¡¨çš„æ—¥å¿—ï¼›</p>\n</li>\n<li>\n<p>ç”¨mysqlbinlogè§£æå‡ºæ—¥å¿—åº”ç”¨ï¼Œåº”ç”¨æ—¥å¿—çš„è¿‡ç¨‹å°±åªèƒ½æ˜¯å•çº¿ç¨‹ã€‚æˆ‘ä»¬åœ¨<a href=\"https://time.geekbang.org/column/article/77083\">ç¬¬26ç¯‡æ–‡ç« </a>ä¸­ä»‹ç»çš„é‚£äº›å¹¶è¡Œå¤åˆ¶çš„æ–¹æ³•ï¼Œåœ¨è¿™é‡Œéƒ½ç”¨ä¸ä¸Šã€‚</p>\n</li>\n</ol><p><strong>ä¸€ç§åŠ é€Ÿçš„æ–¹æ³•æ˜¯ï¼Œ</strong>åœ¨ç”¨å¤‡ä»½æ¢å¤å‡ºä¸´æ—¶å®ä¾‹ä¹‹åï¼Œå°†è¿™ä¸ªä¸´æ—¶å®ä¾‹è®¾ç½®æˆçº¿ä¸Šå¤‡åº“çš„ä»åº“ï¼Œè¿™æ ·ï¼š</p><ol>\n<li>\n<p>åœ¨start slaveä¹‹å‰ï¼Œå…ˆé€šè¿‡æ‰§è¡Œï»¿<br>\nï»¿change replication filter replicate_do_table = (tbl_name) å‘½ä»¤ï¼Œå°±å¯ä»¥è®©ä¸´æ—¶åº“åªåŒæ­¥è¯¯æ“ä½œçš„è¡¨ï¼›</p>\n</li>\n<li>\n<p>è¿™æ ·åšä¹Ÿå¯ä»¥ç”¨ä¸Šå¹¶è¡Œå¤åˆ¶æŠ€æœ¯ï¼Œæ¥åŠ é€Ÿæ•´ä¸ªæ•°æ®æ¢å¤è¿‡ç¨‹ã€‚</p>\n</li>\n</ol><p>è¿™ä¸ªè¿‡ç¨‹çš„ç¤ºæ„å›¾å¦‚ä¸‹æ‰€ç¤ºã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/65/f1/65bb04929b8235fb677c7a78b5bd67f1.png?wh=1142*856\" alt=\"\"></p><center><span class=\"reference\">å›¾2 æ•°æ®æ¢å¤æµç¨‹-master-slaveæ–¹æ³•</span></center><p>å¯ä»¥çœ‹åˆ°ï¼Œå›¾ä¸­binlogå¤‡ä»½ç³»ç»Ÿåˆ°çº¿ä¸Šå¤‡åº“æœ‰ä¸€æ¡è™šçº¿ï¼Œæ˜¯æŒ‡å¦‚æœç”±äºæ—¶é—´å¤ªä¹…ï¼Œå¤‡åº“ä¸Šå·²ç»åˆ é™¤äº†ä¸´æ—¶å®ä¾‹éœ€è¦çš„binlogçš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥ä»binlogå¤‡ä»½ç³»ç»Ÿä¸­æ‰¾åˆ°éœ€è¦çš„binlogï¼Œå†æ”¾å›å¤‡åº“ä¸­ã€‚</p><p>å‡è®¾ï¼Œæˆ‘ä»¬å‘ç°å½“å‰ä¸´æ—¶å®ä¾‹éœ€è¦çš„binlogæ˜¯ä»master.000005å¼€å§‹çš„ï¼Œä½†æ˜¯åœ¨å¤‡åº“ä¸Šæ‰§è¡Œshow binlogs æ˜¾ç¤ºçš„æœ€å°çš„binlogæ–‡ä»¶æ˜¯master.000007ï¼Œæ„å‘³ç€å°‘äº†ä¸¤ä¸ªbinlogæ–‡ä»¶ã€‚è¿™æ—¶ï¼Œæˆ‘ä»¬å°±éœ€è¦å»binlogå¤‡ä»½ç³»ç»Ÿä¸­æ‰¾åˆ°è¿™ä¸¤ä¸ªæ–‡ä»¶ã€‚</p><p>æŠŠä¹‹å‰åˆ æ‰çš„binlogæ”¾å›å¤‡åº“çš„æ“ä½œæ­¥éª¤ï¼Œæ˜¯è¿™æ ·çš„ï¼š</p><ol>\n<li>\n<p>ä»å¤‡ä»½ç³»ç»Ÿä¸‹è½½master.000005å’Œmaster.000006è¿™ä¸¤ä¸ªæ–‡ä»¶ï¼Œæ”¾åˆ°å¤‡åº“çš„æ—¥å¿—ç›®å½•ä¸‹ï¼›</p>\n</li>\n<li>\n<p>æ‰“å¼€æ—¥å¿—ç›®å½•ä¸‹çš„master.indexæ–‡ä»¶ï¼Œåœ¨æ–‡ä»¶å¼€å¤´åŠ å…¥ä¸¤è¡Œï¼Œå†…å®¹åˆ†åˆ«æ˜¯ â€œ./master.000005â€å’Œâ€œ./master.000006â€;</p>\n</li>\n<li>\n<p>é‡å¯å¤‡åº“ï¼Œç›®çš„æ˜¯è¦è®©å¤‡åº“é‡æ–°è¯†åˆ«è¿™ä¸¤ä¸ªæ—¥å¿—æ–‡ä»¶ï¼›</p>\n</li>\n<li>\n<p>ç°åœ¨è¿™ä¸ªå¤‡åº“ä¸Šå°±æœ‰äº†ä¸´æ—¶åº“éœ€è¦çš„æ‰€æœ‰binlogäº†ï¼Œå»ºç«‹ä¸»å¤‡å…³ç³»ï¼Œå°±å¯ä»¥æ­£å¸¸åŒæ­¥äº†ã€‚</p>\n</li>\n</ol><p>ä¸è®ºæ˜¯æŠŠmysqlbinlogå·¥å…·è§£æå‡ºçš„binlogæ–‡ä»¶åº”ç”¨åˆ°ä¸´æ—¶åº“ï¼Œè¿˜æ˜¯æŠŠä¸´æ—¶åº“æ¥åˆ°å¤‡åº“ä¸Šï¼Œè¿™ä¸¤ä¸ªæ–¹æ¡ˆçš„å…±åŒç‚¹æ˜¯ï¼šè¯¯åˆ åº“æˆ–è€…è¡¨åï¼Œæ¢å¤æ•°æ®çš„æ€è·¯ä¸»è¦å°±æ˜¯é€šè¿‡å¤‡ä»½ï¼Œå†åŠ ä¸Šåº”ç”¨binlogçš„æ–¹å¼ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸¤ä¸ªæ–¹æ¡ˆéƒ½è¦æ±‚å¤‡ä»½ç³»ç»Ÿå®šæœŸå¤‡ä»½å…¨é‡æ—¥å¿—ï¼Œè€Œä¸”éœ€è¦ç¡®ä¿binlogåœ¨è¢«ä»æœ¬åœ°åˆ é™¤ä¹‹å‰å·²ç»åšäº†å¤‡ä»½ã€‚</p><p>ä½†æ˜¯ï¼Œä¸€ä¸ªç³»ç»Ÿä¸å¯èƒ½å¤‡ä»½æ— é™çš„æ—¥å¿—ï¼Œä½ è¿˜éœ€è¦æ ¹æ®æˆæœ¬å’Œç£ç›˜ç©ºé—´èµ„æºï¼Œè®¾å®šä¸€ä¸ªæ—¥å¿—ä¿ç•™çš„å¤©æ•°ã€‚å¦‚æœä½ çš„DBAå›¢é˜Ÿå‘Šè¯‰ä½ ï¼Œå¯ä»¥ä¿è¯æŠŠæŸä¸ªå®ä¾‹æ¢å¤åˆ°åŠä¸ªæœˆå†…çš„ä»»æ„æ—¶é—´ç‚¹ï¼Œè¿™å°±è¡¨ç¤ºå¤‡ä»½ç³»ç»Ÿä¿ç•™çš„æ—¥å¿—æ—¶é—´å°±è‡³å°‘æ˜¯åŠä¸ªæœˆã€‚</p><p>å¦å¤–ï¼Œæˆ‘å»ºè®®ä½ ä¸è®ºä½¿ç”¨ä¸Šè¿°å“ªç§æ–¹å¼ï¼Œéƒ½è¦æŠŠè¿™ä¸ªæ•°æ®æ¢å¤åŠŸèƒ½åšæˆè‡ªåŠ¨åŒ–å·¥å…·ï¼Œå¹¶ä¸”ç»å¸¸æ‹¿å‡ºæ¥æ¼”ç»ƒã€‚ä¸ºä»€ä¹ˆè¿™ä¹ˆè¯´å‘¢ï¼Ÿ</p><p>è¿™é‡Œçš„åŸå› ï¼Œä¸»è¦åŒ…æ‹¬ä¸¤ä¸ªæ–¹é¢ï¼š</p><ol>\n<li>\n<p>è™½ç„¶â€œå‘ç”Ÿè¿™ç§äº‹ï¼Œå¤§å®¶éƒ½ä¸æƒ³çš„â€ï¼Œä½†æ˜¯ä¸‡ä¸€å‡ºç°äº†è¯¯åˆ äº‹ä»¶ï¼Œèƒ½å¤Ÿå¿«é€Ÿæ¢å¤æ•°æ®ï¼Œå°†æŸå¤±é™åˆ°æœ€å°ï¼Œä¹Ÿåº”è¯¥ä¸ç”¨è·‘è·¯äº†ã€‚</p>\n</li>\n<li>\n<p>è€Œå¦‚æœä¸´æ—¶å†æ‰‹å¿™è„šä¹±åœ°æ‰‹åŠ¨æ“ä½œï¼Œæœ€ååˆè¯¯æ“ä½œäº†ï¼Œå¯¹ä¸šåŠ¡é€ æˆäº†äºŒæ¬¡ä¼¤å®³ï¼Œé‚£å°±è¯´ä¸è¿‡å»äº†ã€‚</p>\n</li>\n</ol><h1>å»¶è¿Ÿå¤åˆ¶å¤‡åº“</h1><p>è™½ç„¶æˆ‘ä»¬å¯ä»¥é€šè¿‡åˆ©ç”¨å¹¶è¡Œå¤åˆ¶æ¥åŠ é€Ÿæ¢å¤æ•°æ®çš„è¿‡ç¨‹ï¼Œä½†æ˜¯è¿™ä¸ªæ–¹æ¡ˆä»ç„¶å­˜åœ¨â€œæ¢å¤æ—¶é—´ä¸å¯æ§â€çš„é—®é¢˜ã€‚</p><p>å¦‚æœä¸€ä¸ªåº“çš„å¤‡ä»½ç‰¹åˆ«å¤§ï¼Œæˆ–è€…è¯¯æ“ä½œçš„æ—¶é—´è·ç¦»ä¸Šä¸€ä¸ªå…¨é‡å¤‡ä»½çš„æ—¶é—´è¾ƒé•¿ï¼Œæ¯”å¦‚ä¸€å‘¨ä¸€å¤‡çš„å®ä¾‹ï¼Œåœ¨å¤‡ä»½ä¹‹åçš„ç¬¬6å¤©å‘ç”Ÿè¯¯æ“ä½œï¼Œé‚£å°±éœ€è¦æ¢å¤6å¤©çš„æ—¥å¿—ï¼Œè¿™ä¸ªæ¢å¤æ—¶é—´å¯èƒ½æ˜¯è¦æŒ‰å¤©æ¥è®¡ç®—çš„ã€‚</p><p>é‚£ä¹ˆï¼Œæˆ‘ä»¬æœ‰ä»€ä¹ˆæ–¹æ³•å¯ä»¥ç¼©çŸ­æ¢å¤æ•°æ®éœ€è¦çš„æ—¶é—´å‘¢ï¼Ÿ</p><p>å¦‚æœæœ‰éå¸¸æ ¸å¿ƒçš„ä¸šåŠ¡ï¼Œä¸å…è®¸å¤ªé•¿çš„æ¢å¤æ—¶é—´ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘<strong>æ­å»ºå»¶è¿Ÿå¤åˆ¶çš„å¤‡åº“ã€‚</strong>è¿™ä¸ªåŠŸèƒ½æ˜¯MySQL 5.6ç‰ˆæœ¬å¼•å…¥çš„ã€‚</p><p>ä¸€èˆ¬çš„ä¸»å¤‡å¤åˆ¶ç»“æ„å­˜åœ¨çš„é—®é¢˜æ˜¯ï¼Œå¦‚æœä¸»åº“ä¸Šæœ‰ä¸ªè¡¨è¢«è¯¯åˆ äº†ï¼Œè¿™ä¸ªå‘½ä»¤å¾ˆå¿«ä¹Ÿä¼šè¢«å‘ç»™æ‰€æœ‰ä»åº“ï¼Œè¿›è€Œå¯¼è‡´æ‰€æœ‰ä»åº“çš„æ•°æ®è¡¨ä¹Ÿéƒ½ä¸€èµ·è¢«è¯¯åˆ äº†ã€‚</p><p>å»¶è¿Ÿå¤åˆ¶çš„å¤‡åº“æ˜¯ä¸€ç§ç‰¹æ®Šçš„å¤‡åº“ï¼Œé€šè¿‡ CHANGE MASTER TO MASTER_DELAY = Nå‘½ä»¤ï¼Œå¯ä»¥æŒ‡å®šè¿™ä¸ªå¤‡åº“æŒç»­ä¿æŒè·Ÿä¸»åº“æœ‰Nç§’çš„å»¶è¿Ÿã€‚</p><p>æ¯”å¦‚ä½ æŠŠNè®¾ç½®ä¸º3600ï¼Œè¿™å°±ä»£è¡¨äº†å¦‚æœä¸»åº“ä¸Šæœ‰æ•°æ®è¢«è¯¯åˆ äº†ï¼Œå¹¶ä¸”åœ¨1å°æ—¶å†…å‘ç°äº†è¿™ä¸ªè¯¯æ“ä½œå‘½ä»¤ï¼Œè¿™ä¸ªå‘½ä»¤å°±è¿˜æ²¡æœ‰åœ¨è¿™ä¸ªå»¶è¿Ÿå¤åˆ¶çš„å¤‡åº“æ‰§è¡Œã€‚è¿™æ—¶å€™åˆ°è¿™ä¸ªå¤‡åº“ä¸Šæ‰§è¡Œstop slaveï¼Œå†é€šè¿‡ä¹‹å‰ä»‹ç»çš„æ–¹æ³•ï¼Œè·³è¿‡è¯¯æ“ä½œå‘½ä»¤ï¼Œå°±å¯ä»¥æ¢å¤å‡ºéœ€è¦çš„æ•°æ®ã€‚</p><p>è¿™æ ·çš„è¯ï¼Œä½ å°±éšæ—¶å¯ä»¥å¾—åˆ°ä¸€ä¸ªï¼Œåªéœ€è¦æœ€å¤šå†è¿½1å°æ—¶ï¼Œå°±å¯ä»¥æ¢å¤å‡ºæ•°æ®çš„ä¸´æ—¶å®ä¾‹ï¼Œä¹Ÿå°±ç¼©çŸ­äº†æ•´ä¸ªæ•°æ®æ¢å¤éœ€è¦çš„æ—¶é—´ã€‚</p><h1>é¢„é˜²è¯¯åˆ åº“/è¡¨çš„æ–¹æ³•</h1><p>è™½ç„¶å¸¸åœ¨æ²³è¾¹èµ°ï¼Œå¾ˆéš¾ä¸æ¹¿é‹ï¼Œä½†ç»ˆç©¶è¿˜æ˜¯å¯ä»¥æ‰¾åˆ°ä¸€äº›æ–¹æ³•æ¥é¿å…çš„ã€‚æ‰€ä»¥è¿™é‡Œï¼Œæˆ‘ä¹Ÿä¼šç»™ä½ ä¸€äº›å‡å°‘è¯¯åˆ æ“ä½œé£é™©çš„å»ºè®®ã€‚</p><p>ç¬¬ä¸€æ¡å»ºè®®æ˜¯ï¼Œè´¦å·åˆ†ç¦»ã€‚è¿™æ ·åšçš„ç›®çš„æ˜¯ï¼Œé¿å…å†™é”™å‘½ä»¤ã€‚æ¯”å¦‚ï¼š</p><ul>\n<li>æˆ‘ä»¬åªç»™ä¸šåŠ¡å¼€å‘åŒå­¦DMLæƒé™ï¼Œè€Œä¸ç»™truncate/dropæƒé™ã€‚è€Œå¦‚æœä¸šåŠ¡å¼€å‘äººå‘˜æœ‰DDLéœ€æ±‚çš„è¯ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å¼€å‘ç®¡ç†ç³»ç»Ÿå¾—åˆ°æ”¯æŒã€‚</li>\n<li>å³ä½¿æ˜¯DBAå›¢é˜Ÿæˆå‘˜ï¼Œæ—¥å¸¸ä¹Ÿéƒ½è§„å®šåªä½¿ç”¨åªè¯»è´¦å·ï¼Œå¿…è¦çš„æ—¶å€™æ‰ä½¿ç”¨æœ‰æ›´æ–°æƒé™çš„è´¦å·ã€‚</li>\n</ul><p>ç¬¬äºŒæ¡å»ºè®®æ˜¯ï¼Œåˆ¶å®šæ“ä½œè§„èŒƒã€‚è¿™æ ·åšçš„ç›®çš„ï¼Œæ˜¯é¿å…å†™é”™è¦åˆ é™¤çš„è¡¨åã€‚æ¯”å¦‚ï¼š</p><ul>\n<li>åœ¨åˆ é™¤æ•°æ®è¡¨ä¹‹å‰ï¼Œå¿…é¡»å…ˆå¯¹è¡¨åšæ”¹åæ“ä½œã€‚ç„¶åï¼Œè§‚å¯Ÿä¸€æ®µæ—¶é—´ï¼Œç¡®ä¿å¯¹ä¸šåŠ¡æ— å½±å“ä»¥åå†åˆ é™¤è¿™å¼ è¡¨ã€‚</li>\n<li>æ”¹è¡¨åçš„æ—¶å€™ï¼Œè¦æ±‚ç»™è¡¨ååŠ å›ºå®šçš„åç¼€ï¼ˆæ¯”å¦‚åŠ _to_be_deleted)ï¼Œç„¶ååˆ é™¤è¡¨çš„åŠ¨ä½œå¿…é¡»é€šè¿‡ç®¡ç†ç³»ç»Ÿæ‰§è¡Œã€‚å¹¶ä¸”ï¼Œç®¡ç†ç³»åˆ é™¤è¡¨çš„æ—¶å€™ï¼Œåªèƒ½åˆ é™¤å›ºå®šåç¼€çš„è¡¨ã€‚</li>\n</ul><h1>rmåˆ é™¤æ•°æ®</h1><p>å…¶å®ï¼Œå¯¹äºä¸€ä¸ªæœ‰é«˜å¯ç”¨æœºåˆ¶çš„MySQLé›†ç¾¤æ¥è¯´ï¼Œæœ€ä¸æ€•çš„å°±æ˜¯rmåˆ é™¤æ•°æ®äº†ã€‚åªè¦ä¸æ˜¯æ¶æ„åœ°æŠŠæ•´ä¸ªé›†ç¾¤åˆ é™¤ï¼Œè€Œåªæ˜¯åˆ æ‰äº†å…¶ä¸­æŸä¸€ä¸ªèŠ‚ç‚¹çš„æ•°æ®çš„è¯ï¼ŒHAç³»ç»Ÿå°±ä¼šå¼€å§‹å·¥ä½œï¼Œé€‰å‡ºä¸€ä¸ªæ–°çš„ä¸»åº“ï¼Œä»è€Œä¿è¯æ•´ä¸ªé›†ç¾¤çš„æ­£å¸¸å·¥ä½œã€‚</p><p>è¿™æ—¶ï¼Œä½ è¦åšçš„å°±æ˜¯åœ¨è¿™ä¸ªèŠ‚ç‚¹ä¸ŠæŠŠæ•°æ®æ¢å¤å›æ¥ï¼Œå†æ¥å…¥æ•´ä¸ªé›†ç¾¤ã€‚</p><p>å½“ç„¶äº†ï¼Œç°åœ¨ä¸æ­¢æ˜¯DBAæœ‰è‡ªåŠ¨åŒ–ç³»ç»Ÿï¼ŒSAï¼ˆç³»ç»Ÿç®¡ç†å‘˜ï¼‰ä¹Ÿæœ‰è‡ªåŠ¨åŒ–ç³»ç»Ÿï¼Œæ‰€ä»¥ä¹Ÿè®¸ä¸€ä¸ªæ‰¹é‡ä¸‹çº¿æœºå™¨çš„æ“ä½œï¼Œä¼šè®©ä½ æ•´ä¸ªMySQLé›†ç¾¤çš„æ‰€æœ‰èŠ‚ç‚¹éƒ½å…¨å†›è¦†æ²¡ã€‚</p><p>åº”å¯¹è¿™ç§æƒ…å†µï¼Œæˆ‘çš„å»ºè®®åªèƒ½æ˜¯è¯´å°½é‡æŠŠä½ çš„å¤‡ä»½è·¨æœºæˆ¿ï¼Œæˆ–è€…æœ€å¥½æ˜¯è·¨åŸå¸‚ä¿å­˜ã€‚</p><h1>å°ç»“</h1><p>ä»Šå¤©ï¼Œæˆ‘å’Œä½ è®¨è®ºäº†è¯¯åˆ æ•°æ®çš„å‡ ç§å¯èƒ½ï¼Œä»¥åŠè¯¯åˆ åçš„å¤„ç†æ–¹æ³•ã€‚</p><p>ä½†ï¼Œæˆ‘è¦å¼ºè°ƒçš„æ˜¯ï¼Œé¢„é˜²è¿œæ¯”å¤„ç†çš„æ„ä¹‰æ¥å¾—å¤§ã€‚</p><p>å¦å¤–ï¼Œåœ¨MySQLçš„é›†ç¾¤æ–¹æ¡ˆä¸­ï¼Œä¼šæ—¶ä¸æ—¶åœ°ç”¨åˆ°å¤‡ä»½æ¥æ¢å¤å®ä¾‹ï¼Œå› æ­¤å®šæœŸæ£€æŸ¥å¤‡ä»½çš„æœ‰æ•ˆæ€§ä¹Ÿå¾ˆæœ‰å¿…è¦ã€‚</p><p>å¦‚æœä½ æ˜¯ä¸šåŠ¡å¼€å‘åŒå­¦ï¼Œä½ å¯ä»¥ç”¨show grantså‘½ä»¤æŸ¥çœ‹è´¦æˆ·çš„æƒé™ï¼Œå¦‚æœæƒé™è¿‡å¤§ï¼Œå¯ä»¥å»ºè®®DBAåŒå­¦ç»™ä½ åˆ†é…æƒé™ä½ä¸€äº›çš„è´¦å·ï¼›ä½ ä¹Ÿå¯ä»¥è¯„ä¼°ä¸šåŠ¡çš„é‡è¦æ€§ï¼Œå’ŒDBAå•†é‡å¤‡ä»½çš„å‘¨æœŸã€æ˜¯å¦æœ‰å¿…è¦åˆ›å»ºå»¶è¿Ÿå¤åˆ¶çš„å¤‡åº“ç­‰ç­‰ã€‚</p><p>æ•°æ®å’ŒæœåŠ¡çš„å¯é æ€§ä¸æ­¢æ˜¯è¿ç»´å›¢é˜Ÿçš„å·¥ä½œï¼Œæœ€ç»ˆæ˜¯å„ä¸ªç¯èŠ‚ä¸€èµ·ä¿éšœçš„ç»“æœã€‚</p><p>ä»Šå¤©çš„è¯¾åè¯é¢˜æ˜¯ï¼Œå›å¿†ä¸‹ä½ äº²èº«ç»å†è¿‡çš„è¯¯åˆ æ•°æ®äº‹ä»¶å§ï¼Œä½ ç”¨äº†ä»€ä¹ˆæ–¹æ³•æ¥æ¢å¤æ•°æ®å‘¢ï¼Ÿä½ åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­å¾—åˆ°çš„ç»éªŒåˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p><p>ä½ å¯ä»¥æŠŠä½ çš„ç»å†å’Œç»éªŒå†™åœ¨ç•™è¨€åŒºï¼Œæˆ‘ä¼šåœ¨ä¸‹ä¸€ç¯‡æ–‡ç« çš„æœ«å°¾é€‰å–æœ‰è¶£çš„è¯„è®ºå’Œä½ ä¸€èµ·è®¨è®ºã€‚æ„Ÿè°¢ä½ çš„æ”¶å¬ï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ä¸€èµ·é˜…è¯»ã€‚</p><h1>ä¸ŠæœŸé—®é¢˜æ—¶é—´</h1><p>æˆ‘åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ç»™ä½ ç•™çš„é—®é¢˜ï¼Œæ˜¯å…³äºç©ºè¡¨çš„é—´éš™çš„å®šä¹‰ã€‚</p><p>ä¸€ä¸ªç©ºè¡¨å°±åªæœ‰ä¸€ä¸ªé—´éš™ã€‚æ¯”å¦‚ï¼Œåœ¨ç©ºè¡¨ä¸Šæ‰§è¡Œï¼š</p><pre><code>begin;\nselect * from t where id&gt;1 for update;\n</code></pre><p>è¿™ä¸ªæŸ¥è¯¢è¯­å¥åŠ é”çš„èŒƒå›´å°±æ˜¯next-key lock (-âˆ, supremum]ã€‚</p><p>éªŒè¯æ–¹æ³•çš„è¯ï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„æ“ä½œåºåˆ—ã€‚ä½ å¯ä»¥åœ¨å›¾4ä¸­çœ‹åˆ°æ˜¾ç¤ºçš„ç»“æœã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/12/65/12eb6a38c347203f60df72ecaea95565.png?wh=941*276\" alt=\"\"></p><center><span class=\"reference\">å›¾3 å¤ç°ç©ºè¡¨çš„next-key lock</span></center><p><img src=\"https://static001.geekbang.org/resource/image/53/9f/531b6556ffc82c6b02f9a010a3ceb09f.png?wh=1422*228\" alt=\"\"></p><center><span class=\"reference\">å›¾4 show engine innodb status éƒ¨åˆ†ç»“æœ</span></center><p>è¯„è®ºåŒºç•™è¨€ç‚¹èµæ¿ï¼š</p><blockquote>\n<p>@è€æ¨åŒå¿— ç»™å‡ºäº†æ­£ç¡®çš„åˆ†æå’ŒSQLè¯­å¥éªŒè¯æ–¹æ³•ï¼›<br>\n@åº“æ·˜æ·˜ æŒ‡å‡ºäº†show engine innodb statuséªŒè¯ç»“è®ºã€‚</p>\n</blockquote><p>èµè¿™äº›æ€è€ƒå’Œåé¦ˆã€‚</p><p></p>","neighbors":{"left":{"article_title":"30 | ç­”ç–‘æ–‡ç« ï¼ˆäºŒï¼‰ï¼šç”¨åŠ¨æ€çš„è§‚ç‚¹çœ‹åŠ é”","id":78427},"right":{"article_title":"32 | ä¸ºä»€ä¹ˆè¿˜æœ‰killä¸æ‰çš„è¯­å¥ï¼Ÿ","id":79026}},"comments":[{"had_liked":false,"id":63114,"user_name":"è‹èŒ«","can_delete":false,"product_type":"c1","uid":1299149,"ip_address":"","ucode":"CED8598307BEAE","user_header":"https://static001.geekbang.org/account/avatar/00/13/d2/cd/6fb14677.jpg","comment_is_top":true,"comment_ctime":1548258383,"is_pvip":false,"replies":[{"id":"22365","content":"ğŸ‘ è¿™ä¸ªæ˜¯è¡€æ³ªç»éªŒ<br><br>æ‹·è´æ–‡æœ¬æ‰§è¡Œï¼Œè¿™ä¸ªæ“ä½œè¿˜å¯èƒ½å­˜åœ¨å­—ç¬¦é›†éšæ‚£ã€‚<br><br>è¿™ä¸ªäº‹æƒ…æ›´æ·±ä¸€å±‚é€»è¾‘ï¼Œæ˜¯ä½ åšäº†åˆ›é€ æ€§çš„äº‹æƒ…ï¼Œéå¸¸ä¼˜ç§€ğŸ‘ã€‚<br>è€Œè¿™ä¸ªè¿ç»´åŒå­¦è®¤ä¸ºä»–åªæ˜¯ä¸€ä¸ªâ€å¤åˆ¶ç²˜è´´æ‰§è¡Œçš„äººâ€ï¼Œ è¿™ç§æ€è·¯ä¸‹æ˜¯è¿Ÿæ—©ä¼šå‡ºé—®é¢˜çš„ã€‚","user_name":"ä½œè€…å›å¤","comment_id":63114,"uid":"1264162","ip_address":"","utype":1,"ctime":1548288852,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":10,"race_medal":0,"score":"9.2233727084179005e+18","product_id":100020801,"comment_content":"æœ‰ä¸€æ¬¡ï¼Œæˆ‘ç»´æŠ¤ä¸€å¼ è¡¨ï¼Œéœ€è¦æ‰‹åŠ¨ä¿®æ”¹å¤§é‡æ•°æ®çš„çŠ¶æ€ï¼Œsqlå°±å¾ˆå¤šï¼Œç„¶åæˆ‘ä¿å­˜åˆ°txtæ–‡ä»¶ä¸­ä»¥é™„ä»¶çš„å½¢å¼å‘ç»™éƒ¨é—¨è€å¤§å®¡æ‰¹ï¼Œéƒ¨é—¨è€å¤§å®¡æ‰¹åè½¬å‘é‚®ä»¶ç»™è¿ç»´ï¼Œç„¶åè¿ç»´è¿™å“¥ä»¬ç”¨çš„æ˜¯360æµè§ˆå™¨ï¼Œä»–é¢„è§ˆçš„sqlï¼Œç„¶åå…¨éƒ¨å¤åˆ¶åˆ°å®¢æˆ·ç«¯æ‰§è¡Œï¼Œä½†æ˜¯é—®é¢˜ä¹Ÿåœ¨è¿™ï¼Œ360æµè§ˆå™¨é¢„è§ˆçš„æ—¶å€™ç”±äºæ–‡æœ¬åé•¿ï¼Œåˆ°äº†æŸä¸€æ¡è¯­å¥åªæœ‰å‰åŠéƒ¨åˆ†çš„updateè¯­å¥ï¼Œæ²¡æœ‰åé¢çš„æ¡ä»¶ï¼Œç„¶åå°±æ‚²å‰§äº†ã€‚å…¨è¡¨çš„çŠ¶æ€éƒ½å˜æˆåŒä¸€ä¸ªã€‚ç„¶åæˆ‘å°±ç‰¹åˆ«è«åå…¶å¦™ï¼Œè¿˜è¢«è€å¤§æ‰¹äº†ä¸€é¡¿ã€‚è¯´æˆ‘å†™çš„è„šæœ¬æœ‰é—®é¢˜ã€‚è¿™é”…æˆ‘å¯ä¸èƒŒï¼Œæˆ‘æŠŠè„šæœ¬åœ¨æœ¬åœ°å¤‡ä»½åº“è·‘äº†ä¸€éåˆä¸€éå°±æ˜¯æ²¡æœ‰é—®é¢˜ã€‚ç„¶åæˆ‘å†å»è¿ç»´å“¥ä»¬é‚£ï¼Œå«ä»–å†å¤åˆ¶ä¸€ä¸‹è„šæœ¬å°±å‘ç°é—®é¢˜äº†ã€‚å¥½åœ¨æ‰§è¡Œè„šæœ¬å‰è¿›è¡Œäº†è¡¨å¤‡ä»½ã€‚æ‰©å±•ä¸€ä¸‹ï¼Œå¦‚æœä½ ç”¨è°·æ­Œæµè§ˆå™¨å°±ä¸ä¼šå‡ºç°è¿™ç§é—®é¢˜ï¼å‘ç°é—®é¢˜åï¼Œç«‹é©¬æ¢å¤äº†æ•°æ®","like_count":157,"discussions":[{"author":{"id":1126538,"avatar":"https://static001.geekbang.org/account/avatar/00/11/30/8a/b5ca7286.jpg","nickname":"ä¸šä½™è‰","note":"","ucode":"99BDC1E629049D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":41,"discussion_content":"è€Œè¿™ä¸ªè¿ç»´åŒå­¦è®¤ä¸ºä»–åªæ˜¯ä¸€ä¸ªâ€å¤åˆ¶ç²˜è´´æ‰§è¡Œçš„äººâ€ï¼Œ è¿™ç§æ€è·¯ä¸‹æ˜¯è¿Ÿæ—©ä¼šå‡ºé—®é¢˜çš„ã€‚è¿™å¥è¯´çš„è«åå…¶å¦™çš„å¥½ï¼","likes_number":17,"is_delete":false,"is_hidden":false,"ctime":1561013290,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2052476,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Qq6oLfOTgKzjiculoUDicdv7WoY1iabPfOTumibWeInVP2Mnod9XVPrNSClvIiaLbvtDlIjRnWUNaXcYwREGzlcaDog/132","nickname":"Geek_åœ¨ä¸‹èŸ‘è‚ç‹","note":"","ucode":"E1F5BBB5BC5962","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1126538,"avatar":"https://static001.geekbang.org/account/avatar/00/11/30/8a/b5ca7286.jpg","nickname":"ä¸šä½™è‰","note":"","ucode":"99BDC1E629049D","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":323634,"discussion_content":"å·¥â€¦â€¦å·¥å…·äºº","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1604977370,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":41,"ip_address":""},"score":323634,"extra":""}]},{"author":{"id":1034377,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c8/89/e8e01a09.jpg","nickname":"å‘¨ç‘å³°","note":"","ucode":"E252E5A546104B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":289375,"discussion_content":"åŒæ ·é‡åˆ°è¿‡ä¸€æ¬¡ï¼Œå‘çš„é‚®ä»¶ï¼Œwhere æ¡ä»¶æ¢è¡Œäº†ï¼Œè¿ç»´æ²¡æ‹·è´ä¸Š","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1594083480,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437476,"discussion_content":"ğŸ‘ è¿™ä¸ªæ˜¯è¡€æ³ªç»éªŒ\n\næ‹·è´æ–‡æœ¬æ‰§è¡Œï¼Œè¿™ä¸ªæ“ä½œè¿˜å¯èƒ½å­˜åœ¨å­—ç¬¦é›†éšæ‚£ã€‚\n\nè¿™ä¸ªäº‹æƒ…æ›´æ·±ä¸€å±‚é€»è¾‘ï¼Œæ˜¯ä½ åšäº†åˆ›é€ æ€§çš„äº‹æƒ…ï¼Œéå¸¸ä¼˜ç§€ğŸ‘ã€‚\nè€Œè¿™ä¸ªè¿ç»´åŒå­¦è®¤ä¸ºä»–åªæ˜¯ä¸€ä¸ªâ€å¤åˆ¶ç²˜è´´æ‰§è¡Œçš„äººâ€ï¼Œ è¿™ç§æ€è·¯ä¸‹æ˜¯è¿Ÿæ—©ä¼šå‡ºé—®é¢˜çš„ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1548288852,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1274787,"avatar":"https://static001.geekbang.org/account/avatar/00/13/73/a3/2b077607.jpg","nickname":"Michael","note":"","ucode":"C233DF1D224EC1","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":414266,"discussion_content":"ç¬‘å¾—è‚šå­ç–¼","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1636704587,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2326401,"avatar":"https://static001.geekbang.org/account/avatar/00/23/7f/81/8cd1e6a2.jpg","nickname":"é˜³[å¤ªé˜³][å¤ªé˜³][å¤ªé˜³]","note":"","ucode":"5069182EA0A0AE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":328397,"discussion_content":"ç”¨ä»€ä¹ˆæ–¹æ³•å¯ä»¥è§„é¿å¤åˆ¶ç²˜è´´ï¼Ÿå¯ä»¥ç›´æ¥æ‰§è¡Œ.sqlæ–‡ä»¶ä¹ˆï¼Ÿæˆ–è€…é€šè¿‡è‡ªåŠ¨åŒæ­¥å·¥å…·æ‰§è¡ŒDDLï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1606134346,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1014665,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7b/89/34f2cbcc.jpg","nickname":"æ¨å®‡","note":"","ucode":"EB74DF6E269F03","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":2326401,"avatar":"https://static001.geekbang.org/account/avatar/00/23/7f/81/8cd1e6a2.jpg","nickname":"é˜³[å¤ªé˜³][å¤ªé˜³][å¤ªé˜³]","note":"","ucode":"5069182EA0A0AE","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":328860,"discussion_content":"åœ¨mysqlæç¤ºç¬¦ä¸‹ï¼Œè¾“å…¥å‘½ä»¤ï¼š\nsource æ–‡ä»¶å…¨è·¯å¾„\nï¼ˆæˆ–è€…ï¼‰\n\\. æ–‡ä»¶å…¨è·¯å¾„","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1606263108,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":328397,"ip_address":""},"score":328860,"extra":""},{"author":{"id":2283781,"avatar":"https://static001.geekbang.org/account/avatar/00/22/d9/05/0d772dbf.jpg","nickname":"å’¦","note":"","ucode":"2E0D5A488489A4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2326401,"avatar":"https://static001.geekbang.org/account/avatar/00/23/7f/81/8cd1e6a2.jpg","nickname":"é˜³[å¤ªé˜³][å¤ªé˜³][å¤ªé˜³]","note":"","ucode":"5069182EA0A0AE","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":398605,"discussion_content":"å»ºè®®æœ€å¥½è¿˜æ˜¯ç›´æ¥æ‰§è¡Œsqlå§ï¼Œçœçš„å‡ºç°sqlåœ¨äººä¸ºè½¬ç§»è¿‡ç¨‹ä¸­å‡ºé”™","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1632820731,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":328397,"ip_address":""},"score":398605,"extra":""}]},{"author":{"id":1034377,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c8/89/e8e01a09.jpg","nickname":"å‘¨ç‘å³°","note":"","ucode":"E252E5A546104B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":289374,"discussion_content":"åŒæ ·é‡åˆ°è¿‡ä¸€æ¬¡ï¼Œå‘çš„é‚®ä»¶ï¼Œwhere æ¡ä»¶æ¢è¡Œäº†ï¼Œè¿ç»´æ²¡æ‹·è´ä¸Š","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1594083478,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1440429,"avatar":"https://static001.geekbang.org/account/avatar/00/15/fa/ad/3fa02ac7.jpg","nickname":"æ˜ŸæœŸå…«","note":"","ucode":"D8C66E7F61B0D1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":271185,"discussion_content":"è‰å“¥ï¼Œä½ å¥½å‘€ï¼","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1590105505,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":63085,"user_name":"ç„¡åå°å’","can_delete":false,"product_type":"c1","uid":1345918,"ip_address":"","ucode":"1CBD8F26D7D33E","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/hGLA7hlgfLk3VQs1m3HbkGCg0zicgaSJeYFGfW7JgocuicpoN0Ukyic7MouDXXxBDAKSJLJyEWb3Ef7ic6K6bOKbsw/132","comment_is_top":true,"comment_ctime":1548247210,"is_pvip":false,"replies":[{"id":"22352","content":"ğŸ‘ éå¸¸å¥½çš„ç»éªŒ<br>å¦‚æœèƒ½å¤Ÿåˆ‡å®æ‰§è¡Œï¼Œå³ä½¿æœ‰å‡ºé—®é¢˜ï¼Œä¹Ÿæ˜¯å¯ä»¥å¾ˆå¿«æ¢å¤çš„<br>æŠŠè¿™äº›è„šæœ¬å½“åšå¼€å‘ä»£ç æ¥ç»´æŠ¤ï¼Œæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å®è·µ","user_name":"ä½œè€…å›å¤","comment_id":63085,"uid":"1264162","ip_address":"","utype":1,"ctime":1548257696,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":4,"race_medal":0,"score":"9.2233725795689001e+18","product_id":100020801,"comment_content":"å¯¹ç”Ÿäº§æ•°æ®åº“æ“ä½œï¼Œå…¬å¸DBAæå‡ºçš„ç¼–å†™è„šæœ¬æ–¹æ³•ï¼Œä¸ªäººè§‰å¾—è¿˜æ˜¯å€¼å¾—åˆ†äº«ï¼Œè™½è¯´å¯èƒ½å¤§éƒ¨åˆ†å…¬å¸ä¹Ÿå¯èƒ½æœ‰è¿™æ ·çš„è§„èŒƒã€‚<br>ä¿®æ”¹ç”Ÿäº§çš„æ•°æ®ï¼Œæˆ–è€…æ·»åŠ ç´¢å¼•ä¼˜åŒ–ï¼Œéƒ½è¦å…ˆå†™å¥½å››ä¸ªè„šæœ¬ï¼šå¤‡ä»½è„šæœ¬ã€æ‰§è¡Œè„šæœ¬ã€éªŒè¯è„šæœ¬å’Œå›æ»šè„šæœ¬ã€‚å¤‡ä»½è„šæœ¬æ˜¯å¯¹éœ€è¦å˜æ›´çš„æ•°æ®å¤‡ä»½åˆ°ä¸€å¼ è¡¨ä¸­ï¼Œå›ºå®šéœ€è¦æ“ä½œçš„æ•°æ®è¡Œï¼Œä»¥ä¾¿è¯¯æ“ä½œæˆ–ä¸šåŠ¡è¦æ±‚è¿›è¡Œå›æ»šï¼›æ‰§è¡Œè„šæœ¬å°±æ˜¯å¯¹æ•°æ®å˜æ›´çš„è„šæœ¬ï¼Œä¸ºé˜²Updateé”™æ•°æ®ï¼Œä¸€èˆ¬è¿å¤‡ä»½è¡¨è¿›è¡ŒUpdateæ“ä½œï¼›éªŒè¯è„šæœ¬æ˜¯éªŒè¯æ•°æ®å˜æ›´æˆ–å½±å“è¡Œæ•°æ˜¯å¦è¾¾åˆ°é¢„æœŸè¦æ±‚æ•ˆæœï¼›å›æ»šè„šæœ¬å°±æ˜¯å°†æ•°æ®å›æ»šåˆ°ä¿®æ”¹å‰çš„çŠ¶æ€ã€‚<br>è™½è¯´åˆ†å››æ­¥éª¤å†™è„šæœ¬å¯èƒ½ä¼šæ¯”è¾ƒç¹çï¼Œä½†æ˜¯è¿™èƒ½å¤Ÿå¾ˆå¤§ç¨‹åº¦é¿å…æ•°æ®è¯¯æ“ä½œã€‚","like_count":127,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437466,"discussion_content":"ğŸ‘ éå¸¸å¥½çš„ç»éªŒ\nå¦‚æœèƒ½å¤Ÿåˆ‡å®æ‰§è¡Œï¼Œå³ä½¿æœ‰å‡ºé—®é¢˜ï¼Œä¹Ÿæ˜¯å¯ä»¥å¾ˆå¿«æ¢å¤çš„\næŠŠè¿™äº›è„šæœ¬å½“åšå¼€å‘ä»£ç æ¥ç»´æŠ¤ï¼Œæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å®è·µ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548257696,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1124075,"avatar":"https://static001.geekbang.org/account/avatar/00/11/26/eb/24e0ac9c.jpg","nickname":"å¬´æ¢¦å·","note":"","ucode":"104CDFD26A1711","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":373811,"discussion_content":"æˆ‘ä»¬æœ‰é¢„å‘å¸ƒç¯å¢ƒï¼Œæ•°æ®å’Œç”Ÿæˆç¯å¢ƒæ˜¯ä¸€æ ·çš„ã€‚ç„¶åæˆ‘ä»¬åœ¨é¢„å‘å¸ƒç¯å¢ƒä¸Šå…ˆæ‰§è¡Œ(åŒ…æ‹¬æ‰§è¡Œè„šæœ¬å’Œå›æ»šè„šæœ¬)ï¼Œç„¶åå»ç”Ÿå­˜ç¯å¢ƒï¼ŒæŒ‰ç…§ä¸€æ ·çš„æ­¥éª¤ä¸€æ ·çš„è„šæœ¬å»æ‰§è¡Œï¼Œæ‰§è¡Œæ—¶æœ‰æ—¶ç ”å‘è¿˜ä¼šç«™åœ¨è¿ç»´èº«è¾¹ç›¯ç€ã€‚â€”â€”è¿™æ ·å¤§å¤§å‡å°äº†ç”Ÿæˆç¯å¢ƒäº‹æ•…ç‡ã€‚","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1620882052,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2014285,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKNv880TlsNuKaWcKbxiaAZTQIBWfJAddC8wfOROnwRPRwJXaEGSTBH2sic4jK7IGpxZn79tTDcREjw/132","nickname":"Geek_7482f6","note":"","ucode":"F3565F78525D30","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":410333,"discussion_content":"é‚£ä¿®æ”¹ä¸€æ¬¡ç”Ÿäº§ç¯å¢ƒæ•°æ®æ˜¯çœŸçš„éº»çƒ¦å•Š","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1635666883,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1274787,"avatar":"https://static001.geekbang.org/account/avatar/00/13/73/a3/2b077607.jpg","nickname":"Michael","note":"","ucode":"C233DF1D224EC1","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":414268,"discussion_content":"ä¹‹å‰é“¶è¡Œå·¥ä½œçš„æ—¶å€™ï¼Œéƒ½æ˜¯è¿™æ ·çš„è§„èŒƒï¼Œä¸ç„¶æŠ•äº§ç»„æŠ•äº§sqlå‡ºé—®é¢˜äº†ï¼Œå°±æ˜¯å¼€å‘çš„é”…ï¼Œç»™çš„ç”Ÿäº§åˆ¶å“æ²¡æŒ‰ç…§è§„èŒƒæ¥","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1636704805,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":110477,"user_name":"Sancho","can_delete":false,"product_type":"c1","uid":1436391,"ip_address":"","ucode":"78849913082622","user_header":"https://static001.geekbang.org/account/avatar/00/15/ea/e7/9ce305ec.jpg","comment_is_top":false,"comment_ctime":1562286289,"is_pvip":false,"replies":[{"id":"40802","content":"è¿™ä¸ªè€å¤§æ˜¯é«˜æ‰‹ğŸ˜†","user_name":"ä½œè€…å›å¤","comment_id":110477,"uid":"1264162","ip_address":"","utype":1,"ctime":1562698589,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":4,"race_medal":0,"score":"336569735377","product_id":100020801,"comment_content":"è¯´è¯´æˆ‘çš„æ•…äº‹ï¼šä¸€æ¬¡æ›´æ–°ï¼Œå°‘äº†ä¸€ä¸ªæ¡ä»¶ï¼Œç»“æœæŠŠå…¨è¡¨æ›´æ–°äº†ï¼Œç”¨çš„æ˜¯pgï¼Œå½“æ—¶dbaè¯´æ²¡å‘æ¢å¤ã€‚è¿™æ˜¯å±äºä¸€ä¸ªä¸šåŠ¡æ ¸å¿ƒè¡¨ï¼Œæ•°æ®æœ‰6000å¤šæ¡ã€‚å½“æ—¶ä¸šåŠ¡ç³»ç»Ÿæœ‰æœ¬åœ°ç¼“å­˜ï¼Œä¸šåŠ¡ç³»ç»Ÿçš„æ›´æ–°ä¼šå‘é€šçŸ¥åˆ·æ–°ï¼Œæ•°æ®åº“æ“ä½œçš„æ›´æ–°è¦å»ä¸šåŠ¡ç³»ç»Ÿä¸»åŠ¨åˆ·æ–°ã€‚åœ¨dbaæ“ä½œå®Œsqlï¼Œè¯´äº†å½±å“è¡Œæ•°ä¹‹åï¼Œæˆ‘ç«‹åˆ»å‚»äº†ã€‚èµ¶ç´§ä¸ŠæŠ¥è€å¤§ï¼ŒæŠ€æœ¯ç¾¤é‡Œå¤§å¼ä¸è¦åˆ·ç¼“å­˜ã€‚æˆ‘ä»¬è€å¤§æ˜¯ä¸ªè€å¸æœºï¼ŒçŸ¥é“dbaæ˜¯æŒ‡æœ›ä¸ä¸Šäº†ï¼Œç«‹åˆ»åœ¨å¦ä¸€ä¸ªä¸šåŠ¡ç³»ç»Ÿå†™äº†å‡ è¡Œä»£ç ï¼Œç„¶åå‘å¸ƒä¸Šçº¿ã€‚æµè§ˆå™¨ä¸€ä¸ªåœ°å€ä¸‹å»ï¼Œå†…å­˜é‡Œçš„æ•°æ®å…¨éƒ¨è¿”å›åˆ°æµè§ˆäº†ã€‚ã€‚ã€‚","like_count":79,"discussions":[{"author":{"id":1062848,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ersGSic8ib7OguJv6CJiaXY0s4n9C7Z51sWxTTljklFpq3ZAIWXoFTPV5oLo0GMTkqW5sYJRRnibNqOJQ/132","nickname":"walleæ–Œ","note":"","ucode":"0DB3243004951F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":296592,"discussion_content":"å“ˆï¼Œè¿™é‡Œè¾¹å†…å­˜åˆ†2ä¸ªï¼Œ\nç¬¬ä¸€æ˜¯redisè¿™ç§ï¼Œäº‘ä¸Šçš„åªæœ‰åŸºæœ¬ç›‘æ§ï¼Œå¤§éƒ¨åˆ†éƒ½éœ€è¦ä¸šåŠ¡ä¸è¿ç»´å…±åŒå¼€å‘ä¸€å¥—ä¾¿äºè‡ªå·±æ’æŸ¥ä¸ä½¿ç”¨ä¸”é€šç”¨çš„rediså·¥å…·ï¼Œå…¶ä¸­scanæ•°æ®æ˜¯åŸºç¡€ï¼Œå¦‚æœæœ‰è¿™ä¸ªåŠŸèƒ½çš„è¯ï¼Œä¸éœ€è¦ä¸Šçº¿æœåŠ¡ï¼Œåªéœ€è¦åœ¨é¡µé¢ä¸Šscanä¸€ä¸‹ï¼Œå¹¶ä¸‹è½½ç»“æœï¼Œè¯·æ³¨æ„å¤§éƒ¨åˆ†redisæ“ä½œè¯·ä½¿ç”¨æ–‡ä»¶ä¿å­˜ï¼Œè€Œä¸æ˜¯ç›´æ¥åœ¨å†…å­˜ç›´æ¥è¿”å›ã€‚\nç¬¬äºŒæœ¬åœ°ç¼“å­˜ï¼Œæœ¬åœ°ç¼“å­˜è¿™ä¸ªä¸€èˆ¬æ˜¯guavaçš„loadingcacheè¿™ç§ï¼Œè¿™ç§éº»çƒ¦ä¸€äº›ï¼Œä¸€æŠŠè®¾ç½®çš„é¢‘ç¹éƒ½æ˜¯ç§’çº§åˆ«ï¼Œåˆ†é’Ÿçº§åˆ«çš„å°‘ï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥æ„å»ºæœ¬åœ°ç¼“å­˜ç»Ÿä¸€æ‰˜ç®¡å™¨ï¼Œç»Ÿä¸€ä½¿ç”¨æ‰˜ç®¡å™¨ï¼Œè‡ªç„¶ä¹Ÿå¯ä»¥æ§åˆ¶æœ¬åœ°ç¼“å­˜ï¼Œè¿™ä¸ªä¸ºå•¥æ¥ï¼Œåº”å¯¹çªå‘çƒ­ç‚¹ä¸æµé‡ã€‚å¯ä»¥å¤–éƒ¨ç›´æ¥æ¥å…¥æœ¬åœ°ç¼“å­˜ï¼Œé˜²æ­¢redisè¢«æ‰“æŒ‚ã€‚\nä»¥ä¸Šéƒ½å±äºå…¬å¸çš„åŸºç¡€è®¾ç½®æ„å»ºï¼Œå¦‚æœæ„å»ºçš„è¶³å¤Ÿå…¨ï¼Œé‡åˆ°äº‹æƒ…è‡ªç„¶å°±ä¸æ…Œå¼ ã€‚å¦‚æœä¹ˆæœ‰ï¼Œä½ ä¹Ÿå¯ä»¥ä¸»åŠ¨æ‰¿æ‹…è¿™ä¸ªï¼Œè®¾è®¡å¹¶å‘è¨€é€‚åˆäºè‡ªå·±å…¬å¸ä¸šåŠ¡åœºæ™¯åˆå°½é‡å¯ä»¥è€ƒè™‘é€šç”¨çš„ç»„ä»¶æ¨¡å—ç³»ç»Ÿå“‡~","likes_number":16,"is_delete":false,"is_hidden":false,"ctime":1596596024,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456900,"discussion_content":"è¿™ä¸ªè€å¤§æ˜¯é«˜æ‰‹ğŸ˜†","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1562698589,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1303322,"avatar":"https://static001.geekbang.org/account/avatar/00/13/e3/1a/061e77b6.jpg","nickname":"äº¢æ˜Ÿä¸œ","note":"","ucode":"5E4063E83B2BB9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":331786,"discussion_content":"å…­åƒè¡Œåšå¤‡ä»½è¡¨","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1606976858,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1304870,"avatar":"https://static001.geekbang.org/account/avatar/00/13/e9/26/ee614fd4.jpg","nickname":"ä¾å±±è§‚æ¾œ","note":"","ucode":"F93BDCAB56B9B7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":373977,"discussion_content":"ä¸ªä¾‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620956679,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":63001,"user_name":"æŸã€äºº","can_delete":false,"product_type":"c1","uid":1308784,"ip_address":"","ucode":"ADB42AA12A11C1","user_header":"https://static001.geekbang.org/account/avatar/00/13/f8/70/f3a33a14.jpg","comment_is_top":false,"comment_ctime":1548224074,"is_pvip":false,"replies":[{"id":"22265","content":"ğŸ‘ ","user_name":"ä½œè€…å›å¤","comment_id":63001,"uid":"1264162","ip_address":"","utype":1,"ctime":1548238963,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":2,"race_medal":0,"score":"224886523466","product_id":100020801,"comment_content":"æ€»ç»“ä¸‹ä»Šå¤©çš„çŸ¥è¯†ç‚¹:<br>æˆ‘è§‰å¾—DBAçš„æœ€æ ¸å¿ƒçš„å·¥ä½œå°±æ˜¯ä¿è¯æ•°æ®çš„å®Œæ•´æ€§<br>ä»Šå¤©è€å¸ˆä¹Ÿè®²åˆ°äº†å…ˆè¦åšå¥½é¢„é˜²,é¢„é˜²çš„è¯å¤§æ¦‚æ˜¯é€šè¿‡è¿™å‡ ä¸ªç‚¹ï¼š<br>1.æƒé™æ§åˆ¶ä¸åˆ†é…(æ•°æ®åº“å’ŒæœåŠ¡å™¨æƒé™)<br>2.åˆ¶ä½œæ“ä½œè§„èŒƒ<br>3.å®šæœŸç»™å¼€å‘è¿›è¡ŒåŸ¹è®­<br>4.æ­å»ºå»¶è¿Ÿå¤‡åº“<br>5.åšå¥½sqlå®¡è®¡,åªè¦æ˜¯å¯¹çº¿ä¸Šæ•°æ®æœ‰æ›´æ”¹æ“ä½œçš„è¯­å¥(DMLå’ŒDDL)éƒ½éœ€è¦è¿›è¡Œå®¡æ ¸<br>6.åšå¥½å¤‡ä»½ã€‚å¤‡ä»½çš„è¯åˆåˆ†ä¸ºä¸¤ä¸ªç‚¹.<br>(1)å¦‚æœæ•°æ®é‡æ¯”è¾ƒå¤§,ç”¨ç‰©ç†å¤‡ä»½xtrabackupã€‚å®šæœŸå¯¹æ•°æ®åº“è¿›è¡Œå…¨é‡å¤‡ä»½,ä¹Ÿå¯ä»¥åšå¢é‡å¤‡ä»½ã€‚<br>(2)å¦‚æœæ•°æ®é‡è¾ƒå°‘,ç”¨mysqldumpæˆ–è€…mysqldumperã€‚å†åˆ©ç”¨binlogæ¥æ¢å¤æˆ–è€…æ­å»ºä¸»ä»çš„æ–¹å¼æ¥æ¢å¤æ•°æ®ã€‚<br>å®šæœŸå¤‡ä»½binlogæ–‡ä»¶ä¹Ÿæ˜¯å¾ˆæœ‰å¿…è¦çš„<br>è¿˜éœ€è¦å®šæœŸæ£€æŸ¥å¤‡ä»½æ–‡ä»¶æ˜¯å¦å¯ç”¨,å¦‚æœçœŸçš„å‘ç”Ÿäº†è¯¯æ“ä½œ,éœ€è¦æ¢å¤æ•°æ®çš„æ—¶å€™,å‘ç”Ÿå¤‡ä»½æ–‡ä»¶ä¸å¯ç”¨,é‚£å°±æ›´æ‚²å‰§äº†<br><br>å¦‚æœå‘ç”Ÿäº†æ•°æ®åˆ é™¤çš„æ“ä½œ,åˆå¯ä»¥ä»ä»¥ä¸‹å‡ ä¸ªç‚¹æ¥æ¢å¤:<br>1.DMLè¯¯æ“ä½œè¯­å¥é€ æˆæ•°æ®ä¸å®Œæ•´æˆ–è€…ä¸¢å¤±ã€‚å¯ä»¥é€šè¿‡flashback,ä¸è¿‡æˆ‘ä»¬ç›®å‰ç”¨çš„æ˜¯ç¾å›¢çš„myflash,ä¹Ÿæ˜¯ä¸€ä¸ªä¸é”™çš„å·¥å…·ï¼Œæœ¬è´¨éƒ½å·®ä¸å¤š.éƒ½æ˜¯å…ˆè§£æbinlog event,ç„¶ååœ¨è¿›è¡Œåè½¬ã€‚æŠŠdeleteåè½¬ä¸ºinsert,insertåè½¬ä¸ºdelete,updateå‰åimageå¯¹è°ƒã€‚æ‰€ä»¥å¿…é¡»è®¾ç½®binlog_format=row å’Œ binlog_row_image=full.<br>åˆ‡è®°æ¢å¤æ•°æ®çš„æ—¶å€™,åº”è¯¥å…ˆæ¢å¤åˆ°ä¸´æ—¶çš„å®ä¾‹,ç„¶ååœ¨æ¢å¤å›ä¸»åº“ä¸Šã€‚<br>2.DDLè¯­å¥è¯¯æ“ä½œ(truncateå’Œdrop),ç”±äºDDLè¯­å¥ä¸ç®¡binlog_formatæ˜¯rowè¿˜æ˜¯statement.åœ¨binlogé‡Œéƒ½åªè®°å½•è¯­å¥,ä¸è®°å½•imageæ‰€ä»¥æ¢å¤èµ·æ¥ç›¸å¯¹è¦éº»çƒ¦å¾—å¤šã€‚åªèƒ½é€šè¿‡å…¨é‡å¤‡ä»½+åº”ç”¨binlogçš„æ–¹å¼æ¥æ¢å¤æ•°æ®ã€‚ä¸€æ—¦æ•°æ®é‡æ¯”è¾ƒå¤§,é‚£ä¹ˆæ¢å¤æ—¶é—´å°±ç‰¹åˆ«é•¿,<br>å¯¹ä¸šåŠ¡æ˜¯ä¸ªè€ƒéªŒã€‚æ‰€ä»¥å°±æ¶‰åŠåˆ°è€å¸ˆåœ¨ç¬¬äºŒè®²æåˆ°çš„é—®é¢˜äº†ï¼Œå…¨é‡å¤‡ä»½çš„å‘¨æœŸæ€ä¹ˆå»é€‰æ‹©","like_count":53,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437434,"discussion_content":"ğŸ‘ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548238963,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1308159,"avatar":"https://static001.geekbang.org/account/avatar/00/13/f5/ff/523fb378.jpg","nickname":"é¢œæµ·èˆª","note":"","ucode":"5644F6328BF901","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":1869,"discussion_content":"æ•°æ®é‡è¾ƒå¤§æ—¶ ç”¨xtrabackupåšå…¨å¤‡ï¼Œç„¶åå¦‚æœæœ‰æ–°çš„binlogå°±å¤‡ä»½å‡ºæ¥ã€‚æƒ³é—®ä¸‹è¿™ä¸ªç”¨xtrabackupåšå…¨å¤‡çŸ¥é“æ€ä¹ˆåšï¼Œbinlogçš„å¤‡ä»½æ¢å¤æ˜¯ç”¨ä»€ä¹ˆå·¥å…·å—ï¼Ÿå¤‡ä»½å‡ºæ¥ä¹‹åæ€ä¹ˆæ¢å¤å‘¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563016318,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":63361,"user_name":"è¿˜ä¸€æ£µæ ‘","can_delete":false,"product_type":"c1","uid":1317709,"ip_address":"","ucode":"C187F2A141D60E","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eop9WylZJicLQxlvXukXUgPp39zJHyyReK5s1C9VhA6rric7GiarbfQMuWhdCCDdxdfL610Hc4cNkn9Q/132","comment_is_top":false,"comment_ctime":1548332346,"is_pvip":false,"replies":[{"id":"22435","content":"ğŸ‘<br>è¿™åŸºæœ¬ä¸Šæ˜¯æœ€å¿«çš„æ¢å¤æ­¥éª¤äº†","user_name":"ä½œè€…å›å¤","comment_id":63361,"uid":"1264162","ip_address":"","utype":1,"ctime":1548333993,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":4,"race_medal":0,"score":"216296697146","product_id":100020801,"comment_content":"æˆ‘é‡åˆ°è¿‡ä¸€ä¸ªçº¿ä¸Šè¯¯truncateè¡¨çš„ï¼Œæœ€ç»ˆé€‰æ‹©çš„å¤„ç†è¿‡ç¨‹å¦‚ä¸‹ï¼š<br>1ã€åˆ›å»ºä¸€ä¸ªåŒç‰ˆæœ¬çš„ç©ºmysqlå®ä¾‹ï¼Œå»ºä¸€ä¸ªåå­—+ç»“æ„ä¸€æ¨¡ä¸€æ ·çš„è¡¨<br>2ã€discardè¿™ä¸ªè¡¨çš„tablespace<br>3ã€ä»ä¹‹å‰çš„å¤‡ä»½é›†ä¸­   innobackupex --apply-log å¹¶è®°å½•binlogä½ç½®ï¼ˆç”¨innobackupexå¤‡ä»½çš„ï¼‰ã€‚è¿˜åŸåæ‰¾åˆ°è¯¯æ“ä½œè¡¨çš„.ibdæ–‡ä»¶ï¼Œcopyåˆ°æ–°å®ä¾‹å¯¹åº”çš„ä½ç½®<br>4ã€åœ¨ä¹‹å‰åˆ›å»ºçš„mysqlå®ä¾‹ä¸Šimport  tablespace<br>5ã€åˆ©ç”¨mysqlbinlog å¤„ç†å¢é‡æ•°æ®<br>6ã€æœ€åå¯¼å‡º å†å¯¼å…¥","like_count":51,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437563,"discussion_content":"ğŸ‘\nè¿™åŸºæœ¬ä¸Šæ˜¯æœ€å¿«çš„æ¢å¤æ­¥éª¤äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548333993,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1194853,"avatar":"https://static001.geekbang.org/account/avatar/00/12/3b/65/3a4fc8cf.jpg","nickname":"prepared","note":"","ucode":"00E54A5C7CDCBE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":337890,"discussion_content":"å¯ä»¥å†™ä¸€ç¯‡è¯¦ç»†çš„åšå®¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609118354,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1336009,"avatar":"https://static001.geekbang.org/account/avatar/00/14/62/c9/7da27891.jpg","nickname":"DKSky","note":"","ucode":"69371A81033949","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":59988,"discussion_content":"è¯·é—®ä¸ºä»€ä¹ˆè¦ç”¨åˆ°TTSï¼Œç›´æ¥é€šè¿‡innobackupexæ¢å¤åˆ°æ–°å®ä¾‹ï¼Œä¸å¯ä»¥å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574695854,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1594292,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epCnHKhYLefpkm02lnr4SpV5T4ibDQ2e4SlibkcaGu8ZxVDlEmVib6j0TiaDTicMmjrEdiaia8Aeen3nR7dg/132","nickname":"Geek_4a677e","note":"","ucode":"ACE5BD07A232D2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1336009,"avatar":"https://static001.geekbang.org/account/avatar/00/14/62/c9/7da27891.jpg","nickname":"DKSky","note":"","ucode":"69371A81033949","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":532104,"discussion_content":"ttsæ˜¯å•¥æ„æ€ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637516996,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":59988,"ip_address":""},"score":532104,"extra":"{\"user_type\":1}"}]}]},{"had_liked":false,"id":62879,"user_name":"KnightÂ²ÂºÂ¹â¸","can_delete":false,"product_type":"c1","uid":1089754,"ip_address":"","ucode":"BDCB830B6A730F","user_header":"https://static001.geekbang.org/account/avatar/00/10/a0/da/4f50f1b2.jpg","comment_is_top":false,"comment_ctime":1548201571,"is_pvip":false,"replies":[{"id":"22234","content":"åæ¥é€šè¿‡ chatrr +i å‘½ä»¤ç»™æ‰€æœ‰é‡è¦çš„æ–‡ä»¶å¢åŠ äº† i æƒé™å±æ€§ï¼Œè¿™æ ·å“ªæ€• root ç”¨æˆ·éƒ½æ— æ³•ç›´æ¥åˆ é™¤æ–‡ä»¶ã€‚<br><br>mark<br>","user_name":"ä½œè€…å›å¤","comment_id":62879,"uid":"1264162","ip_address":"","utype":1,"ctime":1548205068,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":3,"race_medal":0,"score":"138987155043","product_id":100020801,"comment_content":"å¾ˆä¹…ä¹‹å‰ï¼Œå‡çº§mongodbï¼Œåœ¨å¤‡ä»½æ•°æ®æ–‡ä»¶æ—¶ï¼Œå¤‡ä»½äº†æŒ‡å‘æ•°æ®æ–‡ä»¶çš„è½¯è¿æ¥(å½“æ—¶æ²¡æ³¨æ„æ˜¯è½¯è¿æ¥)ï¼Œå¯¼è‡´åœ¨åˆ é™¤æ•°æ®æ–‡ä»¶åï¼Œå†é€šè¿‡å¤‡ä»½æ•°æ®æ–‡ä»¶æ¢å¤æ•°æ®æ—¶æ‰¾ä¸åˆ°æ–‡ä»¶ï¼Œè¿™æ—¶æ‰å‘ç°è‡ªå·±å¤‡ä»½çš„åªæ˜¯ä¸€ä¸ªè½¯è¿æ¥ï¼Œæœ€åæ˜¯é€šè¿‡å¤‡ä»½èŠ‚ç‚¹æ‰æ¢å¤çš„æ•°æ®ã€‚å½“æ—¶è¿˜æ²¡è‡ªåŠ¨åŒ–è¿ç»´å·¥å…·ï¼Œçº¿ä¸Šæ“ä½œä¹Ÿä¸è§„èŒƒã€‚åæ¥é€šè¿‡ chatrr +i  å‘½ä»¤ç»™æ‰€æœ‰é‡è¦çš„æ–‡ä»¶å¢åŠ äº† i æƒé™å±æ€§ï¼Œè¿™æ ·å“ªæ€• root ç”¨æˆ·éƒ½æ— æ³•ç›´æ¥åˆ é™¤æ–‡ä»¶ã€‚å·®ç‚¹å°±è·‘è·¯äº†ï¼ŸğŸ˜‚ğŸ˜‚ğŸ˜‚","like_count":33,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437380,"discussion_content":"åæ¥é€šè¿‡ chatrr +i å‘½ä»¤ç»™æ‰€æœ‰é‡è¦çš„æ–‡ä»¶å¢åŠ äº† i æƒé™å±æ€§ï¼Œè¿™æ ·å“ªæ€• root ç”¨æˆ·éƒ½æ— æ³•ç›´æ¥åˆ é™¤æ–‡ä»¶ã€‚\n\nmark\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548205068,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1427946,"avatar":"https://static001.geekbang.org/account/avatar/00/15/c9/ea/08c2cc5b.jpg","nickname":"å¦‚æœå¯ä»¥æ”¹å˜","note":"","ucode":"64AB9E200AD7AC","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":99886,"discussion_content":"chattr -R +iå¯ä»¥ä¿æŠ¤å­æ–‡ä»¶ä¸‹çš„æ‰€æœ‰å†…å®¹ï¼Œchattr +iæ— æ³•ä¿æŠ¤å­æ–‡ä»¶å†…å®¹","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1577204383,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1391166,"avatar":"https://static001.geekbang.org/account/avatar/00/15/3a/3e/53ab11ce.jpg","nickname":"å‘¨æ°ä¼¦çš„å¥¶èŒ¶","note":"","ucode":"343CF19391FB9F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":372336,"discussion_content":"chattr +i æ–‡ä»¶ä¹Ÿæ²¡æœ‰å†™æƒé™äº†å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620288367,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":63522,"user_name":"é¡ºå“¥èŠæˆé•¿","can_delete":false,"product_type":"c1","uid":1023328,"ip_address":"","ucode":"FEF42E951B16F4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/9d/60/45b3184d.jpg","comment_is_top":false,"comment_ctime":1548389708,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"134692375884","product_id":100020801,"comment_content":"æˆ‘åªæƒ³è¯´ï¼Œä½œè€…åŠŸåŠ›è¿‡äºæ·±åšäº†ï¼","like_count":32},{"had_liked":false,"id":63958,"user_name":"Long","can_delete":false,"product_type":"c1","uid":1318970,"ip_address":"","ucode":"2417242560360A","user_header":"https://static001.geekbang.org/account/avatar/00/14/20/3a/90db6a24.jpg","comment_is_top":false,"comment_ctime":1548621130,"is_pvip":false,"replies":[{"id":"22621","content":"æ„Ÿè°¢ä½ çš„åˆ†äº«ï¼Œéƒ½æ˜¯è¡€æ³ªæ•™è®­ã€‚ã€‚<br>æˆ‘çœ‹æœ‰å‡ ä¸ªæ˜¯ç”¨çš„å¯è§†åŒ–å·¥å…·å¯¼è‡´çš„ï¼Œåé¢è¿˜æ˜¯å°½é‡ç”¨MySQLå®¢æˆ·ç«¯æ•²å‘½ä»¤å§ğŸ˜†<br><br>ibdæ–‡ä»¶åé¡µæˆ‘ä¹‹å‰æœ‰å›ç­”è¿‡å…¶ä»–åŒå­¦çš„ï¼Œçœ‹ä¸‹è¿™ä¸ª<br>https:&#47;&#47;weibo.com&#47;1933424965&#47;H3qIu0JYo?from=page_1005051933424965_profile&amp;wvr=6&amp;mod=weibotime","user_name":"ä½œè€…å›å¤","comment_id":63958,"uid":"1264162","ip_address":"","utype":1,"ctime":1548636093,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":1,"race_medal":0,"score":"96037901642","product_id":100020801,"comment_content":"åˆåˆ°äº†è®²æ•…äº‹(äº‹æ•…)çš„æ—¶å€™äº†ï¼Œå†å²ä¸Šé‡åˆ°è¿‡å¾ˆå¤šæ¬¡äº‹æ•…ã€‚å…¨è¡¨è¯¯åˆ é™¤ï¼Œè¯¯æ›´æ–°ä¸ä¸‹äº8æ¬¡ï¼Œæœ‰MySQL çš„DBä¹Ÿæœ‰memory DB.   æœ‰ä¸€æ¬¡åŒäº‹æ¯”è¾ƒæç¬‘çš„æ˜¯ï¼Œæœ‰ä¸€æ¬¡ä¸€å¼ é‡è¦çš„æƒé™æ§åˆ¶è¡¨æ›´æ–°ï¼Œç”±äºç”¨çš„æ˜¯workbench ç•Œé¢å·¥å…·å½“æ—¶å†™äº†whereæ¡ä»¶ï¼Œä½†æ˜¯åœ¨é€‰ä¸­æ‰§è¡Œè¡Œçš„æ—¶å€™whereæ¡ä»¶åœ¨ç¬¬äºŒè¡Œï¼Œæ²¡é€‰ä¸­ï¼Œè¿˜åœ¨æ‰§è¡Œå‰çš„æ—¶å€™æ‰‹åŠ¨æŠŠsession çº§çš„sql_safe_updates=0äº†ï¼Œä¹Ÿæ²¡æœ‰ç‚¹å¼€é‚£ä¸ªautocommitå–æ¶ˆçš„æŒ‰é’®ã€‚ç„¶åä¸€æ‰§è¡Œï¼Œå…¨è¡¨æ›´æ–°äº†ï¼Œå¯¼è‡´å…¨ç½‘åªæœ‰ä¸€ä¸ªç”¨æˆ·å¯ä»¥æ­£å¸¸ç™»å½•ã€‚è¿˜æœ‰å…¶ä»–çš„è¯¯æ“ä½œï¼Œæ€»ç»“å†å²é‡åˆ°è¿‡çš„è¿™ç±»é—®é¢˜åŸºæœ¬å°±æ˜¯å‡ ç±»<br>1. ç™»é”™ç¯å¢ƒï¼Œä»¥ä¸ºæ˜¯æµ‹è¯•ç¯å¢ƒï¼Œä¸€é¡¿æ“ä½œçŒ›å¦‚è™ï¼Œä¸€çœ‹ç¯å¢ƒæ˜¯ç”Ÿäº§ï¼Œå›å¤´ä¸€çœ‹ï¼Œè¡¨å·²ç»dropäº†â€¦â€¦<br>2. sqlå†™çš„æœ‰é—®é¢˜ï¼Œé€»è¾‘é”™è¯¯ï¼Œæˆ–è€…æ¡ä»¶ç¼ºå¤±ï¼Œå¸¸è§çš„å¦‚ä¸å¸¦whereï¼›orå…³é”®å­—çš„é€»è¾‘æ²¡æœ‰ç”¨æ‹¬å·æ‹¬å¥½<br>3. è¿˜æœ‰ä¸€äº›å¥‡è‘©çš„ï¼Œæ¯”å¦‚where å­—æ®µ1=å­—æ®µ2å†™æˆäº†å­—æ®µ1+å­—æ®µ2ï¼Œé€»è¾‘ç­‰äºåˆ¤æ–­å˜æˆäº†æ˜¯å¦ä¸º1çš„åˆ¤æ–­äº†ï¼Œå¤§æ¦‚ç‡å…¨è¡¨æ›´æ–°äº†ã€‚<br><br>é”™è¯¯è§£å†³å¤§éƒ¨åˆ†éƒ½æ˜¯ç”¨å¤‡ä»½æ¢å¤æˆ–è€…æ ¹æ®é”™è¯¯çš„é€»è¾‘æ¥é€»è¾‘æ¢å¤ã€‚<br><br><br>è¿˜æœ‰ä¸€ä¸ªï¼Œæœ€è¿‘åœ¨å°è¯•çš„ï¼Œå°±æ˜¯ibdæ–‡ä»¶ä¸­æœ‰åé¡µï¼Œåªè¦ä¸€è¯»åˆ°é‚£ä¸ªåé¡µï¼Œå°±ä¼šcrashï¼ŒæŠ¥é”™spaceid page no should beå¤šå°‘å¤šå°‘ï¼Œå°è¯•äº†copy frm, ibdï¼Œibdata, iblogfileè¿™äº›è¡¨ç»“æ„ï¼Œæ•°æ®æ–‡ä»¶ï¼Œæ•°æ®å­—å…¸ï¼Œundo redo æ—¥å¿—ï¼Œä¹Ÿå°è¯•ç”¨äº†undropçš„å·¥å…·ä¹Ÿè§£æä¸å‡ºæ¥ã€‚è¿™ä¸ªè¡¨æ¯”è¾ƒç‰¹æ®Šï¼Œæ˜¯ä¸€ä¸ªç‰¹æ®Šåº“ï¼Œæ²¡å¤‡ä»½ï¼Œè¡¨æ²¡æœ‰ç´¢å¼•æ²¡æ³•é€šè¿‡èµ°ç´¢å¼•è·³è¿‡é‚£ä¸ªåé¡µçš„é‚£äº›è¡Œï¼Œç°åœ¨çš„çŠ¶æ€æ˜¯ï¼Œåªèƒ½ç”¨nysqldumpæ¢å¤ä¸€éƒ¨åˆ†æ•°æ®ã€‚   æˆ‘æƒ³é€šè¿‡16è¿›åˆ¶ï¼Œè‡ªå·±æ…¢æ…¢æ‰¾åˆ°é‚£ä¸ªè„å†™çš„æ•°æ®ï¼Œç„¶åä¿®æ”¹ä¸€ä¸‹æ–‡ä»¶â€¦â€¦<br>è€å¸ˆæœ‰ä»€ä¹ˆæ¯”è¾ƒå¥½çš„å»ºè®®å—ï¼Ÿæˆ–è€…åé¢ä¼šè¯´åˆ°ibdæ–‡ä»¶çš„ç‰©ç†ç»“æ„ä¹‹ç±»çš„å—ï¼Ÿ æ„Ÿè°¢","like_count":23,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437781,"discussion_content":"æ„Ÿè°¢ä½ çš„åˆ†äº«ï¼Œéƒ½æ˜¯è¡€æ³ªæ•™è®­ã€‚ã€‚\næˆ‘çœ‹æœ‰å‡ ä¸ªæ˜¯ç”¨çš„å¯è§†åŒ–å·¥å…·å¯¼è‡´çš„ï¼Œåé¢è¿˜æ˜¯å°½é‡ç”¨MySQLå®¢æˆ·ç«¯æ•²å‘½ä»¤å§ğŸ˜†\n\nibdæ–‡ä»¶åé¡µæˆ‘ä¹‹å‰æœ‰å›ç­”è¿‡å…¶ä»–åŒå­¦çš„ï¼Œçœ‹ä¸‹è¿™ä¸ª\nhttps://weibo.com/1933424965/H3qIu0JYo?from=page_1005051933424965_profile&amp;amp;wvr=6&amp;amp;mod=weibotime","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548636093,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":93932,"user_name":"__å›°","can_delete":false,"product_type":"c1","uid":1207209,"ip_address":"","ucode":"5B68050D0F95CB","user_header":"https://static001.geekbang.org/account/avatar/00/12/6b/a9/ef0b2bd4.jpg","comment_is_top":false,"comment_ctime":1557671135,"is_pvip":false,"replies":[{"id":"34310","content":"å°±è¦çœ‹æƒ…å†µäº†<br><br>å¦‚æœåŸåº“æ˜¯åˆ è¡¨ï¼Œå°±æŠŠä¸´æ—¶åº“é‡Œé¢çš„è¡¨å¯¼è¿‡å»ï¼Œå°è¡¨é€»è¾‘å¯¼ï¼Œå¤§è¡¨å¯ä»¥ç”¨â€œé€æ˜è¡¨ç©ºé—´æœºåˆ¶â€ç‰©ç†å¯¼ï¼›<br>å¦‚æœåŸåº“æ˜¯è¯¯åˆ äº†ä¸€äº›è¡Œï¼Œé‚£åªèƒ½åœ¨ä¸´æ—¶åº“é‡Œé¢selectæ•°æ®å‡ºæ¥ï¼ŒæŒ‰ç…§ä¸šåŠ¡çš„éœ€è¦å»è¡¥äº†","user_name":"ä½œè€…å›å¤","comment_id":93932,"uid":"1264162","ip_address":"","utype":1,"ctime":1558261004,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":2,"race_medal":0,"score":"87457017055","product_id":100020801,"comment_content":"ä¸çŸ¥é“è€å¸ˆè¿˜åœ¨å—ï¼Œçœ‹åˆ°è¿™é‡Œï¼Œæ¢å¤å‡ºä¸´æ—¶åº“åï¼Œæ€ä¹ˆåº”ç”¨åˆ°ä¸»åº“","like_count":21,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449833,"discussion_content":"å°±è¦çœ‹æƒ…å†µäº†\n\nå¦‚æœåŸåº“æ˜¯åˆ è¡¨ï¼Œå°±æŠŠä¸´æ—¶åº“é‡Œé¢çš„è¡¨å¯¼è¿‡å»ï¼Œå°è¡¨é€»è¾‘å¯¼ï¼Œå¤§è¡¨å¯ä»¥ç”¨â€œé€æ˜è¡¨ç©ºé—´æœºåˆ¶â€ç‰©ç†å¯¼ï¼›\nå¦‚æœåŸåº“æ˜¯è¯¯åˆ äº†ä¸€äº›è¡Œï¼Œé‚£åªèƒ½åœ¨ä¸´æ—¶åº“é‡Œé¢selectæ•°æ®å‡ºæ¥ï¼ŒæŒ‰ç…§ä¸šåŠ¡çš„éœ€è¦å»è¡¥äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558261004,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2389270,"avatar":"https://static001.geekbang.org/account/avatar/00/24/75/16/6e28bf17.jpg","nickname":"åˆæ™¨","note":"","ucode":"C5D95D13E49127","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":590895,"discussion_content":"é€æ˜è¡¨ç©ºé—´æœºåˆ¶\n1.æºåº“åˆ›å»ºç›¸åŒè¡¨ç»“æ„çš„è¡¨ã€‚\n2.discard tablespace åˆ é™¤è¡¨ç©ºé—´éšä¹‹idbä¹Ÿä¼šè¢«åˆ é™¤ã€‚\n3.cp idbç­‰æ–‡ä»¶åˆ°æºåº“ã€‚\n4.import tablespace ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1666152251,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"é™•è¥¿"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":185350,"user_name":"æ–æ³¢é‚£å¥‘","can_delete":false,"product_type":"c1","uid":1464006,"ip_address":"","ucode":"85E2EBC01392B1","user_header":"https://static001.geekbang.org/account/avatar/00/16/56/c6/0b449bc6.jpg","comment_is_top":false,"comment_ctime":1583565704,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"44533238664","product_id":100020801,"comment_content":"è™½ç„¶æˆ‘ä¸æ˜¯DBA ä½†æ˜¯æ›¾ç»æˆ‘ä¸Šè¿‡oracleè¯¾ç¨‹ è€å¸ˆè®²è¿‡ä¸€å¥è¯----ä½ åœ¨æ•°æ®åœ¨ ä½ ä¸åœ¨æ•°æ®ä¾ç„¶åœ¨","like_count":11},{"had_liked":false,"id":97791,"user_name":"ä¹”çº³æ£®","can_delete":false,"product_type":"c1","uid":1045107,"ip_address":"","ucode":"51EC9FAE071388","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f2/73/1c7bceae.jpg","comment_is_top":false,"comment_ctime":1558775162,"is_pvip":true,"replies":[{"id":"34987","content":"æˆé•¿äº†ï¼šï¼‰","user_name":"ä½œè€…å›å¤","comment_id":97791,"uid":"1264162","ip_address":"","utype":1,"ctime":1558800200,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":4,"race_medal":0,"score":"31623546234","product_id":100020801,"comment_content":"æ„Ÿè°¢è€å¸ˆçš„è®²è§£ï¼Œæˆ‘ä¹Ÿåˆ†äº«ä¸€ä¸ªå§ï¼›<br>delete åˆ é™¤2000w å·¦å³çš„æ•°æ®åœºæ™¯ï¼Œ å¼€å‘ç›´æ¥è‡ªå·±ç™»mysqlæœåŠ¡æ“ä½œçš„<br>1. å¯¼å‡ºä¸»é”®idã€‚åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­<br>2. ä¸€ä¸ªå¾ªç¯å–id, delete. <br>for id in $( cat id.file)<br>do <br>mysql -hhost -pport -uuser -ppswd -e &quot;delete from t where id=$id&quot;;<br>done<br>é—®é¢˜å‡ºåœ¨id.fileï¼Œæ˜¯ç”¨ä»€ä¹ˆå·¥å…·å¯¼å‡ºæ¥çš„ï¼Œé‡Œé¢ä¸€ä¸ªid åˆ—å¤´éƒ¨ï¼›å†…å®¹å¤§æ¦‚å¦‚ä¸‹<br>id<br>3<br>400<br>ç„¶åå°±åˆ äº†å…¨è¡¨äº†ï¼Œå› ä¸ºè¿™ä¸ªåˆ å…¨è¡¨çš„æ—¶é—´éå¸¸é•¿ï¼Œåœ¨åˆ å®Œåï¼Œä»åº“é‡æ”¾æ—¶å‡ºç°äº†å»¶è¿Ÿï¼›<br>è¿˜å¥½æˆ‘ä»¬æœ‰A--B--C ï¼Œä¸»ä»æ¶æ„ï¼Œåœ¨Cå®ä¾‹ä¸Šç”¨mydumper å¯¼å…¥å’Œæ¢å¤ï¼ˆå¯¼å…¥æ—¶ï¼Œä¼šå…³é—­binlogï¼Œæ‰€ä»¥åœ¨Aå’ŒB ä¸Šéƒ½å¯¼å…¥äº†æ•°æ®ï¼‰ï¼›<br>å‡å¦‚å½“æ—¶ï¼š<br>1. æœ‰é•¿äº‹åŠ¡ç›‘æ§çš„è¯ï¼Œå°±å¯ä»¥åŠæ—¶å‘ç°ï¼Œå¹¶æ€æ‰delete æ“ä½œï¼Œé¿å…æ‚²å‰§å‘ç”Ÿ<br>2. å‡å¦‚çŸ¥é“ç”¨ibd æ¥æ¢å¤çš„è¯ï¼Œå°±å¯ä»¥ç›´æ¥ç”¨æ–‡ä»¶æ‹·è´ï¼Œè¢«sql å›æ”¾å¿«å¤šäº†<br>3. å½“æ—¶è¿˜æ˜¯å¤ªå¹´è½»äº†","like_count":8,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451422,"discussion_content":"æˆé•¿äº†ï¼šï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558800200,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1434831,"avatar":"https://static001.geekbang.org/account/avatar/00/15/e4/cf/906f47c9.jpg","nickname":"å«ç« ","note":"","ucode":"A7CA116D5275C9","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":294762,"discussion_content":"idbæ€ä¹ˆå›å¤","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595991104,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1589259,"avatar":"https://static001.geekbang.org/account/avatar/00/18/40/0b/d552db0c.jpg","nickname":"Working","note":"","ucode":"018741FC175C7B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1434831,"avatar":"https://static001.geekbang.org/account/avatar/00/15/e4/cf/906f47c9.jpg","nickname":"å«ç« ","note":"","ucode":"A7CA116D5275C9","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":330351,"discussion_content":"idbæ¢å¤ä¸äº†deleteæ•°æ®(æ²¡å¼€binlogï¼‰ï¼Œæ„ä¹‰ä¸å¤§ã€‚innodb_force_recoverry=6,æ— æ³•æ‰§è¡Œalert","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606576432,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":294762,"ip_address":""},"score":330351,"extra":""},{"author":{"id":1970443,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIx1V1QAxC4NHaxYZGyuibBN8lcURJWc5nrnO4yic1kxnDemYV2FJGialf47kYX9qtDnZZOfe1SJeLicg/132","nickname":"lleft","note":"","ucode":"D573EB509455AE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1589259,"avatar":"https://static001.geekbang.org/account/avatar/00/18/40/0b/d552db0c.jpg","nickname":"Working","note":"","ucode":"018741FC175C7B","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":377572,"discussion_content":"ä»–è¯´çš„ibdæ¢å¤æŒ‡çš„æ˜¯é€æ˜è¡¨ç©ºé—´ä¼ è¾“çš„æ–¹æ³•","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1622712563,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":330351,"ip_address":""},"score":377572,"extra":""}]}]},{"had_liked":false,"id":81004,"user_name":"å¼ ä»•å","can_delete":false,"product_type":"c1","uid":1054248,"ip_address":"","ucode":"8D41E96A5889FC","user_header":"https://static001.geekbang.org/account/avatar/00/10/16/28/c11e7aae.jpg","comment_is_top":false,"comment_ctime":1553773244,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"27323577020","product_id":100020801,"comment_content":"å›¾3ä¸­ select * from t where id&gt;1 for update å°‘äº† &quot;for update&quot;?","like_count":6},{"had_liked":false,"id":117195,"user_name":"null","can_delete":false,"product_type":"c1","uid":1024294,"ip_address":"","ucode":"F9039EFED6B55D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaELZPnUAiajaR5C25EDLWeJURggyiaOP5GGPe2qlwpQcm5e3ybib8OsP4tvddFDLVRSNNGL5I3SFPJHsA/132","comment_is_top":false,"comment_ctime":1563987036,"is_pvip":false,"discussion_count":4,"race_medal":0,"score":"23038823516","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæ‚¨å¥½ï¼<br><br>æ–‡ç« æåˆ°ï¼šâ€œåœ¨ç”¨å¤‡ä»½æ¢å¤å‡ºä¸´æ—¶å®ä¾‹ä¹‹åï¼Œå°†è¿™ä¸ªä¸´æ—¶å®ä¾‹è®¾ç½®æˆçº¿ä¸Šå¤‡åº“çš„ä»åº“â€ã€‚<br><br>å°†ä¸´æ—¶å®ä¾‹è®¾ç½®æˆçº¿ä¸Šå¤‡åº“çš„å‰æï¼Œæ˜¯å¤‡åº“è¿˜æœªåº”ç”¨ä¸»åº“åˆ é™¤åº“&#47;è¡¨çš„ binlog å§ï¼Ÿ<br>å¦‚æœå¤‡åº“åŒæ­¥äº†ä¸»åº“çš„ binlogï¼Œä¹ŸæŠŠåº“&#47;è¡¨åˆ é™¤äº†ï¼Œè¿™æ—¶å€™è¯¥æ€ä¹ˆåšï¼Ÿï¼ˆåœ¨ä¸´æ—¶åº“è®¾ç½® gtid_next è·³è¿‡è¯¥åˆ é™¤æ“ä½œä¹ˆï¼Ÿå¦‚æœä¸æ”¯æŒ gtid åˆè¯¥å’‹åŠï¼Ÿï¼‰<br><br>è°¢è°¢è€å¸ˆï¼","like_count":5,"discussions":[{"author":{"id":1970443,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIx1V1QAxC4NHaxYZGyuibBN8lcURJWc5nrnO4yic1kxnDemYV2FJGialf47kYX9qtDnZZOfe1SJeLicg/132","nickname":"lleft","note":"","ucode":"D573EB509455AE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":294566,"discussion_content":"å¤‡åº“æ•°æ®åº”è¯¥ä¹Ÿæ˜¯åˆ é™¤äº†ï¼Œä½†æ˜¯ä»–æœ‰binlogå‘€ï¼Œä¸´æ—¶åº“é€šè¿‡å…¨é‡å¤‡ä»½æ¢å¤çš„ï¼Œç°åœ¨å°±æ˜¯ç¼ºçš„å¢é‡çš„éƒ¨åˆ†ï¼Œé€šè¿‡ä½œä¸ºå¤‡åº“çš„ä»åº“åŒæ­¥å¢é‡çš„binlogå°±å¯ä»¥æ¢å¤äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595929534,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1508329,"avatar":"https://static001.geekbang.org/account/avatar/00/17/03/e9/6358059c.jpg","nickname":"GalaxyCreater","note":"","ucode":"C79E8A088D57CF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":263320,"discussion_content":"ä¸»ä»åŒæ­¥çš„æ—¶å€™ï¼Œä»åº“è¦è®¾ç½®è·³è¿‡è¿™ä¸ªGTIDï¼Œå°±å¯ä»¥æ¢å¤","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589199077,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1103643,"avatar":"https://static001.geekbang.org/account/avatar/00/10/d7/1b/f8b387ee.jpg","nickname":"olderwei","note":"","ucode":"9D66C179BD5BAB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":196963,"discussion_content":"æˆ‘ä¹Ÿæœ‰è¿™ä¸ªç–‘é—®ï¼Œå¦‚æœå¤‡åº“æ²¡æœ‰åˆ çš„è¯ï¼Œé‚£ä¸ºä»€ä¹ˆè¿˜éœ€è¦æ¢å¤ä¸€ä¸ªä¸´æ—¶åº“ï¼Œç›´æ¥ç”¨å¤‡åº“åº”ç”¨binlogä¸å°±å¯ä»¥å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583388790,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1652836,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epKJlW7sqts2ZbPuhMbseTAdvHWnrc4ficAeSZyKibkvn6qyxflPrkKKU3mH6XCNmYvDg11tB6y0pxg/132","nickname":"pc","note":"","ucode":"1AD538B9A900B6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":135184,"discussion_content":"æˆ‘ä¹Ÿæ˜¯è¿™ä¸ªé—®é¢˜ï¼Œå¦‚æœä¸»ä»åŒæ­¥å¾ˆå¿«ï¼Œé‚£ä¹ˆåˆ é™¤çš„æ—¶å€™ä»åº“ç«‹é©¬ä¹Ÿå°±dropè¡¨äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579076135,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":215138,"user_name":"#160","can_delete":false,"product_type":"c1","uid":1195835,"ip_address":"","ucode":"0C0A2C5494B252","user_header":"https://static001.geekbang.org/account/avatar/00/12/3f/3b/6f3cf0af.jpg","comment_is_top":false,"comment_ctime":1588912590,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"18768781774","product_id":100020801,"comment_content":"ç°åœ¨å¥½å¤šäº‘å¹³å°æä¾›æ‰˜ç®¡çš„mysqlå®ä¾‹ï¼Œæˆ‘ä»¬ç°åœ¨å°±ç”¨çš„awsæ‰˜ç®¡å®ä¾‹ï¼Œè¿ç»´ç›¸å½“äºäº¤ç»™äº†äº‘å¹³å°ï¼Œå¯¹äºæˆ‘ä»¬ä¸šåŠ¡å¼€å‘äººå‘˜æ¥è¯´ï¼Œèƒ½åšçš„ä¹Ÿå°±æ˜¯crudäº†ï¼Œè®°å¾—æœ‰ä¸€æ¬¡ä¸å°å¿ƒæ¸…ç©ºäº†ä¸€ä¸ªè¡¨çš„æ•°æ®ï¼Œç›´æ¥åœ¨é¡µé¢ä¸Šç‚¹ä¸€ç‚¹å°±æŠŠè¡¨æ¢å¤å›æ¥äº†ï¼Œæ•´ä¸ªè¿‡ç¨‹å°±æ˜¯ä¸ªé»‘ç›’ã€‚æˆ‘è§‰å¾—å¯¹äºå¼€å‘äººå‘˜æ¥è¯´ï¼Œè¯¥ä¸“æ çš„ç†è®ºæ„ä¹‰å¤§äºå®è·µæ„ä¹‰ï¼Œå­¦ä¹ å…¶ä¸­çš„æ€æƒ³ç†å¿µã€‚","like_count":4,"discussions":[{"author":{"id":1794060,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/60/0c/e1f012cb.jpg","nickname":"frankie","note":"","ucode":"813D1352B68A21","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":272420,"discussion_content":"å¾ˆå¤šå…¬å¸ä¹°çš„é˜¿é‡Œäº‘ï¼Œè‡ªå·±æ­å»ºMySQLã€‚ã€‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590303781,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":63057,"user_name":"700","can_delete":false,"product_type":"c1","uid":1072896,"ip_address":"","ucode":"E4BD0CBADAF951","user_header":"","comment_is_top":false,"comment_ctime":1548239035,"is_pvip":false,"replies":[{"id":"22274","content":"å…¶å®æ˜¯è¦çœ‹è¡¨çš„å¤§å°<br><br>å¦‚æœæ˜¯ä¸€ä¸ªå¤§è¡¨ï¼Œé€»è¾‘æ¢å¤è¿˜æ˜¯æ¯”è¾ƒæ…¢çš„ï¼Œæ¯•ç«Ÿç”¨ç‰©ç†å¤‡ä»½æ¥æ¢å¤å‡ºå®ä¾‹ï¼Œç›¸å¯¹ä¼šå¿«äº›ã€‚<br><br>å½“ç„¶å¦‚æœä½ å·²ç»æœ‰äº†ä¸€ä¸ªæˆç†Ÿç³»ç»Ÿç”¨é€»è¾‘æ¢å¤æ¥å®ç°ï¼Œä¹Ÿä¸ç”¨æ”¹å®ƒï¼Œä¸»è¦å…³æ³¨ä¸€ä¸‹æ˜¯å¦æ»¡è¶³SLAå°±å¯ä»¥äº†^_^<br>facebookå°±æ˜¯ä¸»è¦ç”¨é€»è¾‘å¤‡ä»½çš„","user_name":"ä½œè€…å›å¤","comment_id":63057,"uid":"1264162","ip_address":"","utype":1,"ctime":1548242213,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":1,"race_medal":0,"score":"14433140923","product_id":100020801,"comment_content":"è€å¸ˆï¼Œè¯·æ•™ã€‚å‡å¦‚æˆ‘æœ‰æ•°æ®åº“çš„ç‰©ç†å¤‡ä»½å’Œé€»è¾‘å¤‡ä»½ï¼ˆmydumperï¼‰ï¼Œå› ä¸º mydumper å¯¼å‡ºçš„æ•°æ®æ˜¯æŒ‰è¡¨ååˆ†å¼€å­˜æ”¾çš„ï¼Œé‚£ä¹ˆè¡¨è¯¯åˆ æ•°æ®çš„æ—¶å€™ä¼˜å…ˆè€ƒè™‘é€»è¾‘å¤‡ä»½ï¼ˆè¯¯åˆ æ•°æ®è¡¨çš„å¤‡ä»½é›†ï¼‰+binlog æ¢å¤æ¯”ç‰©ç†å¤‡ä»½æ¢å¤ä¼šå¿«ç‚¹ï¼ŸåŸºäºæ­¤ï¼Œæˆ‘æ€»æ„Ÿè§‰ç‰©ç†å¤‡ä»½åªæ˜¯åœ¨è¦æ¢å¤æ•´ä¸ªå®ä¾‹æ—¶æ‰ä¼šä¼˜å…ˆè€ƒè™‘ï¼Œè€Œæ¢å¤æ•´ä¸ªå®ä¾‹çš„åœºæ™¯åˆæ˜¯æ¯”è¾ƒå°‘çš„ï¼Œæ¯•ç«Ÿä¸€èˆ¬å¤§å®¶çš„çº¿ä¸Šæ¶æ„è‡³å°‘éƒ½æ˜¯ä¸»ä»æ¨¡å¼ã€‚æ‰€ä»¥é€»è¾‘å¤‡ä»½è¢«ç‰©ç†å¤‡ä»½æ›´å®ç”¨ã€‚è¿™ç§æƒ³æ³•ç®—æ˜¯è¯´å¾—é€šå—ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437453,"discussion_content":"å…¶å®æ˜¯è¦çœ‹è¡¨çš„å¤§å°\n\nå¦‚æœæ˜¯ä¸€ä¸ªå¤§è¡¨ï¼Œé€»è¾‘æ¢å¤è¿˜æ˜¯æ¯”è¾ƒæ…¢çš„ï¼Œæ¯•ç«Ÿç”¨ç‰©ç†å¤‡ä»½æ¥æ¢å¤å‡ºå®ä¾‹ï¼Œç›¸å¯¹ä¼šå¿«äº›ã€‚\n\nå½“ç„¶å¦‚æœä½ å·²ç»æœ‰äº†ä¸€ä¸ªæˆç†Ÿç³»ç»Ÿç”¨é€»è¾‘æ¢å¤æ¥å®ç°ï¼Œä¹Ÿä¸ç”¨æ”¹å®ƒï¼Œä¸»è¦å…³æ³¨ä¸€ä¸‹æ˜¯å¦æ»¡è¶³SLAå°±å¯ä»¥äº†^_^\nfacebookå°±æ˜¯ä¸»è¦ç”¨é€»è¾‘å¤‡ä»½çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548242213,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":63032,"user_name":"äº®","can_delete":false,"product_type":"c1","uid":1086346,"ip_address":"","ucode":"5B8E59AEA6E3F2","user_header":"https://static001.geekbang.org/account/avatar/00/10/93/8a/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1548233753,"is_pvip":false,"replies":[{"id":"22271","content":"å“¦ æŠ±æ­‰å“ˆï¼Œæˆ‘è¿™è¾¹éªŒè¯çš„æ—¶å€™é»˜è®¤ç”¨çš„latin1ï¼Œæ˜¯16+16+4","user_name":"ä½œè€…å›å¤","comment_id":63032,"uid":"1264162","ip_address":"","utype":1,"ctime":1548239298,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":3,"race_medal":0,"score":"10138168345","product_id":100020801,"comment_content":"CREATE TABLE `t` (<br>`id` int(11) NOT NULL,<br>`city` varchar(16) NOT NULL,<br>`name` varchar(16) NOT NULL,<br>`age` int(11) NOT NULL,<br>`addr` varchar(128) DEFAULT NULL,<br>PRIMARY KEY (`id`),<br>KEY `city` (`city`)<br>) ENGINE=InnoDB;<br><br>è€å¸ˆè¯·æ•™æ‚¨16ç« çš„é—®é¢˜ï¼Œæ‚¨æåˆ°â€œcityã€nameã€age è¿™ä¸‰ä¸ªå­—æ®µçš„å®šä¹‰æ€»é•¿åº¦æ˜¯36â€ï¼Œè¿™ä¸ªæ˜¯æ€ä¹ˆç®—å‡ºæ¥çš„å‘¢ï¼Œvarchar(16)æ˜¯å¯ä»¥ä¿å­˜16ä¸ªå­—ç¬¦ï¼Œå ç”¨äº†49ä¸ªå­—èŠ‚ï¼ˆutf8ï¼‰ï¼Œæ‰€ä»¥æˆ‘æ²¡æƒ³æ˜ç™½36æ˜¯æ€ä¹ˆæ¥çš„ã€‚<br><br>ç¬¬äºŒä¸ªé—®é¢˜æ˜¯max_length_for_sort_dataå‚æ•°ç³»ç»Ÿé»˜è®¤æ˜¯1024ï¼Œæ˜¯1024ä¸ªå­—èŠ‚çš„æ„æ€å—ï¼Ÿ<br><br>2019-01-23<br><br>î˜ˆÂ ä½œè€…å›å¤<br><br>1. age(11)å…¶å®æ˜¯4ä¸ªå­—èŠ‚å“ˆ<br>2. å¯¹ï¼Œå•ä½æ˜¯å­—èŠ‚<br><br>è°¢è°¢è€å¸ˆï¼Œä¸è¿‡è¿˜æ˜¯æ²¡æ˜ç™½ï¼Œageæ˜¯4ä¸ªå­—èŠ‚ï¼Œcityå’Œnameåˆ†åˆ«æ˜¯49ä¸ªå­—èŠ‚ï¼Œ49+49+4=102å­—èŠ‚ï¼Œ36æ˜¯æ€ä¹ˆæ¥çš„å‘¢ï¼Ÿå†æ¬¡æ„Ÿè°¢<br>","like_count":2,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437445,"discussion_content":"å“¦ æŠ±æ­‰å“ˆï¼Œæˆ‘è¿™è¾¹éªŒè¯çš„æ—¶å€™é»˜è®¤ç”¨çš„latin1ï¼Œæ˜¯16+16+4","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548239298,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1324550,"avatar":"https://static001.geekbang.org/account/avatar/00/14/36/06/08c46bcd.jpg","nickname":"è‚åˆ©","note":"","ucode":"808E064089724D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":587418,"discussion_content":"age æ˜¯æ•´å‹ int,åªå 4ä¸ªå­—èŠ‚ ï¼Œ11ï¼Œ åªæ˜¯ä¸€ä¸ªæ˜¾ç¤ºé•¿åº¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663041219,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1126538,"avatar":"https://static001.geekbang.org/account/avatar/00/11/30/8a/b5ca7286.jpg","nickname":"ä¸šä½™è‰","note":"","ucode":"99BDC1E629049D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":42,"discussion_content":"int(11) æ˜¯æœ€å®¹æ˜“ç¿»è½¦çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561013598,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":62895,"user_name":"Cranliu","can_delete":false,"product_type":"c1","uid":1304302,"ip_address":"","ucode":"DC2DE84B142FDA","user_header":"https://static001.geekbang.org/account/avatar/00/13/e6/ee/e3c4c9b3.jpg","comment_is_top":false,"comment_ctime":1548203864,"is_pvip":false,"replies":[{"id":"22235","content":"å¯¹çš„ï¼Œå¤‡ä»½çš„æ„è¯†å¾ˆé‡è¦ã€‚<br><br><br>ä¸è¿‡â€œdrop&#47;truncate çš„æ—¶å€™å…ˆé€»è¾‘å¤‡ä»½â€è¿™ä¹ˆåšçš„ä¸å¤š^_^ <br>ä¸»è¦çš„åŸå› æ˜¯é€»è¾‘å¤‡ä»½å¯èƒ½ä¼šå¯¹ç³»ç»Ÿæœ‰é¢å¤–æ¶ˆè€—ã€‚ï¼ˆå…¨è¡¨æ‰«æï¼‰<br><br>","user_name":"ä½œè€…å›å¤","comment_id":62895,"uid":"1264162","ip_address":"","utype":1,"ctime":1548205220,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":1,"race_medal":0,"score":"10138138456","product_id":100020801,"comment_content":"ä¸ªäººè§‰å¾—ï¼Œé¢„é˜²åŒæ ·å¾ˆé‡è¦ï¼Œä¸€èˆ¬çš„dmlæ“ä½œï¼Œæˆ‘æ˜¯å…ˆctasè¦æ“ä½œçš„æ•°æ®ï¼Œdrop&#47;truncate çš„æ—¶å€™å…ˆé€»è¾‘å¤‡ä»½ã€‚","like_count":2,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437388,"discussion_content":"å¯¹çš„ï¼Œå¤‡ä»½çš„æ„è¯†å¾ˆé‡è¦ã€‚\n\n\nä¸è¿‡â€œdrop/truncate çš„æ—¶å€™å…ˆé€»è¾‘å¤‡ä»½â€è¿™ä¹ˆåšçš„ä¸å¤š^_^ \nä¸»è¦çš„åŸå› æ˜¯é€»è¾‘å¤‡ä»½å¯èƒ½ä¼šå¯¹ç³»ç»Ÿæœ‰é¢å¤–æ¶ˆè€—ã€‚ï¼ˆå…¨è¡¨æ‰«æï¼‰\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548205220,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":318720,"user_name":"é’èä¹‹æœ«","can_delete":false,"product_type":"c1","uid":2145548,"ip_address":"","ucode":"C55233E90112FC","user_header":"https://static001.geekbang.org/account/avatar/00/20/bd/0c/1bd1b097.jpg","comment_is_top":false,"comment_ctime":1635402862,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5930370158","product_id":100020801,"comment_content":"åªæœ‰åŸç†è§£é‡Šï¼Œæ²¡æœ‰ç¯å¢ƒæ“ä½œï¼Œè€å®è¯´æœ‰ç‚¹å·æ‡’äº†ã€‚","like_count":1},{"had_liked":false,"id":235875,"user_name":"niunan","can_delete":false,"product_type":"c1","uid":1006960,"ip_address":"","ucode":"13EDDBAF0BD651","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/zorkvVKoJ9aMjcw1CWCDLF2hXpKddpb20od5alsjcndyGg01pf43QjqoIOB2ibr2n2icINK6cvAAcBapByNAPtWQ/132","comment_is_top":false,"comment_ctime":1595232091,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"5890199387","product_id":100020801,"comment_content":"æäº¤å·¥å•ç»™XXäº‘ï¼Œç„¶åä¸€ä¼šä»–ä»¬å°±ä¼šæ‰“ç”µè¯è¿‡æ¥äº†ã€‚ã€‚ã€‚^_^!!!","like_count":1,"discussions":[{"author":{"id":1047479,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/fb/b7/6ecb191f.jpg","nickname":"yong","note":"","ucode":"E83FDDD570A9D7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":372161,"discussion_content":"æŸæŸäº‘å®¢æœé—®ï¼Œäº²ï¼Œä½ åšå¿«ç…§äº†å—ã€‚æˆ‘è¯´ï¼Œæ²¡æœ‰ã€‚ä»–è¯´ï¼Œä¸è¦æ„æ€ï¼Œæ•°æ®æ— æ³•æ¢å¤ã€‚æˆ‘è¯´ï¼Œå¸®æˆ‘è½¬æ¥å·¥ç¨‹å¸ˆã€‚10åˆ†é’Ÿåå·¥ç¨‹å¸ˆè”ç³»æˆ‘è¯´binlogå¯ä»¥æ¢å¤ã€‚æˆ‘ä¸€æŸ¥binlogæ˜¯å¼€äº†çš„ã€‚ä½†æ˜¯å¤‡ä»½çš„æ•°æ®å’Œbinlogä¹‹é—´æœ‰ç©ºæ´ã€‚åæ¥èŠ±é’±æ‰¾äººè§£å†³äº†ã€‚åˆ å®Œåº“ï¼Œå­¦äº†å¥½å¤šæŠ€èƒ½ã€‚ä¸»ä»å»¶è¿ŸåŒæ­¥ã€‚æ•°æ®åº“å®šæ—¶å…¨å¤‡ã€‚binlogå›æ”¾ã€‚deleteè¯¯åˆ æ¢å¤ã€‚å¾ˆåæ‚”ï¼Œä¸ºå•¥èŒä¸šç”Ÿæ¶¯æ²¡èƒ½æ—©ç‚¹åˆ åº“ã€‚é”™è¿‡å¥½å¤šğŸ¶","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1620216224,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2369545,"avatar":"https://static001.geekbang.org/account/avatar/00/24/28/09/0ac42cff.jpg","nickname":"æ…•è‹","note":"","ucode":"7ED14D00429C21","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1047479,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/fb/b7/6ecb191f.jpg","nickname":"yong","note":"","ucode":"E83FDDD570A9D7","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":405665,"discussion_content":"å“ˆå“ˆå“ˆï¼Œæ²¡æ¯›ç—…ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634614867,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":372161,"ip_address":""},"score":405665,"extra":""}]}]},{"had_liked":false,"id":193130,"user_name":"è¿ç»´è€èƒ¡","can_delete":false,"product_type":"c1","uid":1227007,"ip_address":"","ucode":"DF398BEE296E11","user_header":"https://static001.geekbang.org/account/avatar/00/12/b8/ff/249da6da.jpg","comment_is_top":false,"comment_ctime":1584884389,"is_pvip":false,"replies":[{"id":"73664","content":"è¡€æ³ªç»éªŒå‘€<br>å…¶å®é‡åšä»åº“ä¸åº”è¯¥æœ‰â€œdrop databaseâ€è¿™ç§å‘½ä»¤<br>ç›´æ¥åœ¨æ–°çš„ç›®å½•ä¸‹é‡æ–°åˆ›å»ºä¸€ä¸ªæ–°çš„<br>æ—§çš„ä»åº“è¦åˆ é™¤çš„æ—¶å€™ï¼Œå…ˆmvåˆ°å›æ”¶ç«™ï¼Œç¡®è®¤æ²¡é—®é¢˜åå†rm æ–‡ä»¶<br><br>","user_name":"ä½œè€…å›å¤","comment_id":193130,"uid":"1264162","ip_address":"","utype":1,"ctime":1584891736,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":1,"race_medal":0,"score":"5879851685","product_id":100020801,"comment_content":"ä¸ªäººç»å†ï¼šä¸€å¹´å‰åˆšæ¥æ‰‹çº¿ä¸ŠMySQLç»´æŠ¤å·¥ä½œä¸ä¹…ï¼ŒæŸå¤©çº¿ä¸Šä¸€å°MySQLæ„å¤–é‡å¯å¯¼è‡´å¤åˆ¶ä¸­æ–­ï¼Œå…¶ä¸­æ–°æ¥çš„DBAå°±å‘Šè¯‰æˆ‘éœ€è¦é‡åšä»åº“ï¼Œå¤§å‘¨æœ«çš„ç‰¹æ„è·‘å»å…¬å¸é‡åšä»åº“ï¼Œç™»ä¸Šä»åº“åæ²¡æœ‰è¿›è¡Œç¯å¢ƒçš„ç¡®è®¤ï¼Œä»¥ä¸ºåªæ˜¯ä¸»å¤‡å¤åˆ¶ï¼Œå…¶å®æ˜¯åŒä¸»å¤åˆ¶ï¼Œç»“æœåœ¨ä»åº“ä¸Šç›´æ¥æ‰§è¡Œäº†drop database ï¼Œå¹¸äºåªåˆ äº†2ä¸ªå°åº“ï¼Œç„¶åæƒ³èµ·æ¥æœ‰æ²¡æœ‰å¯èƒ½æ˜¯åŒä¸»ã€‚åæ¥é€šè¿‡å›å¤å…¨åº“å¤‡ä»½å’Œåº”ç”¨binlogæ‰æ¢å¤å¥½è¢«åˆ çš„2ä¸ªåº“çš„æ•°æ®ã€‚<br>ä»ä¸­å¾—åˆ°ç»éªŒï¼š<br>1ã€æ“ä½œå‰å¿…é¡»ç¡®è®¤ç¯å¢ƒã€‚<br>2ã€ä»åº“æ–­ç”µé‡å¯å¯¼è‡´å¤åˆ¶å¼‚å¸¸ï¼Œå¯ä»¥å…ˆè·³è¿‡é”™è¯¯ï¼Œåç»­ä¸šåŠ¡ä½å³°æœŸå†é€šè¿‡ä¸»ä»å¤åˆ¶æ ¡éªŒæ¥ä¿®å¤ã€‚<br>3ã€ä¸€å®šè¦å®šæœŸåšå¥½å¤‡ä»½ã€‚","like_count":2,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488510,"discussion_content":"è¡€æ³ªç»éªŒå‘€\nå…¶å®é‡åšä»åº“ä¸åº”è¯¥æœ‰â€œdrop databaseâ€è¿™ç§å‘½ä»¤\nç›´æ¥åœ¨æ–°çš„ç›®å½•ä¸‹é‡æ–°åˆ›å»ºä¸€ä¸ªæ–°çš„\næ—§çš„ä»åº“è¦åˆ é™¤çš„æ—¶å€™ï¼Œå…ˆmvåˆ°å›æ”¶ç«™ï¼Œç¡®è®¤æ²¡é—®é¢˜åå†rm æ–‡ä»¶\n\n","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1584891736,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":63566,"user_name":"PengfeiWang","can_delete":false,"product_type":"c1","uid":1308369,"ip_address":"","ucode":"C877BBE99192B2","user_header":"https://static001.geekbang.org/account/avatar/00/13/f6/d1/dcafd7cf.jpg","comment_is_top":false,"comment_ctime":1548402395,"is_pvip":false,"replies":[{"id":"22492","content":"å¤§å®¶éƒ½æ˜¯è¿™ä¹ˆåšçš„ğŸ˜†","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1548413249,"ip_address":"","comment_id":63566,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5843369691","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæ‚¨å¥½ï¼Œæœ‰ä¸ªé—®é¢˜è¯·æ•™ä¸€ä¸‹ï¼š<br>å…³äºMySQLå¤‡ä»½æœ‰æ•ˆæ€§çš„éªŒè¯ï¼Œä½ æœ‰ä»€ä¹ˆå¥½çš„æ–¹æ³•å¯ä»¥æ¨èå—ï¼Ÿç›®å‰åªèƒ½é€šè¿‡ä¸å®šæœŸçš„å¤‡ä»½æ¢å¤æ¥éªŒè¯ã€‚","like_count":2,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437638,"discussion_content":"å¤§å®¶éƒ½æ˜¯è¿™ä¹ˆåšçš„ğŸ˜†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548413249,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1047479,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/fb/b7/6ecb191f.jpg","nickname":"yong","note":"","ucode":"E83FDDD570A9D7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":372157,"discussion_content":"æŠŠå¤‡ä»½çš„æ•°æ®æ¢å¤åˆ°æµ‹æœï¼Œé¡ºä¾¿å°±éªŒè¯äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620215263,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":63330,"user_name":"catalina","can_delete":false,"product_type":"c1","uid":1322372,"ip_address":"","ucode":"FC55E1CFE14CB9","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/G9pdXkStPJoCwmpxux3kshQFrhWOnKcia1AH2O6uSTSGAVMm7AO7h76t2w7BpnVl6vp2hlzODAibia5xa7KIKvtWg/132","comment_is_top":false,"comment_ctime":1548325320,"is_pvip":false,"replies":[{"id":"22434","content":"åŸåº“çš„è¿™å‡ ä¸ªè¡¨è¿˜ä¼šç»§ç»­æ›´æ–°å—ï¼Ÿ å¦‚æœä¼šç»§ç»­æ›´æ–°ï¼Œå°±ç”¨æ­ä¸»å¤‡çš„æ–¹æ³•ï¼›<br>å¦‚æœæ²¡æ›´æ–°äº†ï¼Œåé¢æœ‰ä¸€ä¸ªæ–‡ç« ä¸“é—¨è®²è¿™ä¸ªé—®é¢˜å“ˆ","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1548332469,"ip_address":"","comment_id":63330,"utype":1}],"discussion_count":3,"race_medal":0,"score":"5843292616","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæˆ‘ä»¬ç°åœ¨éœ€è¦å°†ä¸€ä¸ªåº“ä¸‹é¢çš„æ‰€æœ‰è¡¨çš„æ•°æ®åŒæ­¥åˆ°å¦å¤–ä¸€ä¸ªåº“ï¼Œæ¯ä¸ªè¡¨æœ‰å‡ ç™¾ä¸‡æ•°æ®å§ï¼Œå¤§çº¦åå¤šå¼ è¡¨ã€‚æœ‰ä»€ä¹ˆå¥½çš„æ–¹æ³•å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437551,"discussion_content":"åŸåº“çš„è¿™å‡ ä¸ªè¡¨è¿˜ä¼šç»§ç»­æ›´æ–°å—ï¼Ÿ å¦‚æœä¼šç»§ç»­æ›´æ–°ï¼Œå°±ç”¨æ­ä¸»å¤‡çš„æ–¹æ³•ï¼›\nå¦‚æœæ²¡æ›´æ–°äº†ï¼Œåé¢æœ‰ä¸€ä¸ªæ–‡ç« ä¸“é—¨è®²è¿™ä¸ªé—®é¢˜å“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548332469,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2036786,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/14/32/e37762cb.jpg","nickname":"æ ‡å‡†ç å†œ","note":"","ucode":"F1AAA474EC0619","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301486,"discussion_content":"ç›´æ¥æœåŠ¡å™¨åšé•œåƒ ç”¨æ¢å¤é•œåƒçš„æ–¹å¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598538412,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1794060,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/60/0c/e1f012cb.jpg","nickname":"frankie","note":"","ucode":"813D1352B68A21","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":272419,"discussion_content":"æ¯ä¸ªè¡¨å‡ ç™¾ä¸‡ï¼Œé‚£dumpä¸‹çš„sqlä¹Ÿå°±5ä¸ªGå§ï¼Ÿå½“ç„¶è¿˜æ˜¯è€ƒè™‘ç´¢å¼•å¤§å°çš„ï¼Œåå‡ ä¸ªè¡¨ï¼Œmysqlpumpå‹ç¼©ä¹Ÿæ²¡å¤šå¤§å•Šï¼Œæ…¢æ…¢dumpä¸‹æ¥æ¢å¤å‘—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590303730,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":63070,"user_name":"é£äºŒä¸­","can_delete":false,"product_type":"c1","uid":1131876,"ip_address":"","ucode":"73AC0AFB04931D","user_header":"https://static001.geekbang.org/account/avatar/00/11/45/64/2b09a36b.jpg","comment_is_top":false,"comment_ctime":1548243389,"is_pvip":true,"replies":[{"id":"22275","content":"å—¯ å¯¹äºæ ¸å¿ƒä¸šåŠ¡ï¼Œä½¿ç”¨å»¶è¿Ÿå¤åˆ¶çš„å¤‡ä»½<br><br>RPOæ—¶é—´ä¸º0ï¼Ÿæœ‰è¿™ä¹ˆå‡¶æ®‹çš„ä¸šåŠ¡éœ€æ±‚å—ã€‚ã€‚æˆ‘èƒ½æƒ³åˆ°çš„å°±æ˜¯å¤šå¥—å»¶è¿Ÿå¤‡ä»½çš„åº“ã€‚<br>æ¯”å¦‚å¼€3ä¸ªï¼Œ ä¸€ä¸ªæ˜¯10åˆ†é’Ÿï¼Œä¸€ä¸ª20åˆ†é’Ÿï¼Œä¸€ä¸ª30åˆ†é’Ÿï¼ˆä¸»è¦è€ƒè™‘æˆæœ¬ï¼‰<br>RPOè¿™ä¹ˆæ•æ„Ÿçš„ï¼Œåº”è¯¥æœ‰å¯¹åº”æ•æ„Ÿçš„ç›‘æ§ï¼Œè¯¯æ“ä½œè¦æ˜¯30åˆ†é’Ÿè¿˜ä¸èƒ½å‘ç°ï¼Œå¯ä»¥æŒ‘æˆ˜ä¸€ä¸‹ï¼Œè¿™ä¸ªä¸šåŠ¡æ˜¯ä¸æ˜¯å€¼å¾—è¿™ä¹ˆé«˜çš„æŒ‡æ ‡^_^<br><br>","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1548245362,"ip_address":"","comment_id":63070,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5843210685","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæ‚¨å¥½ã€‚å¦‚ä½•è®¾ç½®binlog çš„å¤‡ä»½æ—¶é—´å‘¢ï¼Œæ„Ÿè§‰RPO æ—¶é—´æ€»æ˜¯ä¸èƒ½ä¸ºé›¶ï¼Œå¦‚æœæ˜¯informix å¯ä»¥åªä¸¢ä¸€ä¸ªé€»è¾‘æ—¥å¿—ã€‚å¯¹äºéœ€è¦ä¿è¯mysqlæ¢å¤ RPO æ—¶é—´ä¸ºé›¶ï¼Œæœ‰ä»€ä¹ˆå»ºè®®å—ï¼Ÿå¤‡åº“å»¶è¿Ÿ1å°æ—¶ï¼ŒåŠ æ¯å°æ—¶å¤‡ä»½ä¸€æ¬¡binlog ã€‚","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437457,"discussion_content":"å—¯ å¯¹äºæ ¸å¿ƒä¸šåŠ¡ï¼Œä½¿ç”¨å»¶è¿Ÿå¤åˆ¶çš„å¤‡ä»½\n\nRPOæ—¶é—´ä¸º0ï¼Ÿæœ‰è¿™ä¹ˆå‡¶æ®‹çš„ä¸šåŠ¡éœ€æ±‚å—ã€‚ã€‚æˆ‘èƒ½æƒ³åˆ°çš„å°±æ˜¯å¤šå¥—å»¶è¿Ÿå¤‡ä»½çš„åº“ã€‚\næ¯”å¦‚å¼€3ä¸ªï¼Œ ä¸€ä¸ªæ˜¯10åˆ†é’Ÿï¼Œä¸€ä¸ª20åˆ†é’Ÿï¼Œä¸€ä¸ª30åˆ†é’Ÿï¼ˆä¸»è¦è€ƒè™‘æˆæœ¬ï¼‰\nRPOè¿™ä¹ˆæ•æ„Ÿçš„ï¼Œåº”è¯¥æœ‰å¯¹åº”æ•æ„Ÿçš„ç›‘æ§ï¼Œè¯¯æ“ä½œè¦æ˜¯30åˆ†é’Ÿè¿˜ä¸èƒ½å‘ç°ï¼Œå¯ä»¥æŒ‘æˆ˜ä¸€ä¸‹ï¼Œè¿™ä¸ªä¸šåŠ¡æ˜¯ä¸æ˜¯å€¼å¾—è¿™ä¹ˆé«˜çš„æŒ‡æ ‡^_^\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548245362,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":63030,"user_name":"é«˜å¼º","can_delete":false,"product_type":"c1","uid":1312433,"ip_address":"","ucode":"AA3C76FDD4BC61","user_header":"https://static001.geekbang.org/account/avatar/00/14/06/b1/ba6b4335.jpg","comment_is_top":false,"comment_ctime":1548232714,"is_pvip":false,"replies":[{"id":"22269","content":"æ”¹æˆRCéš”ç¦»çº§åˆ«è¯•è¯•","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1548239145,"ip_address":"","comment_id":63030,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5843200010","product_id":100020801,"comment_content":"è€å¸ˆä½ å¥½ï¼Œé—®ä¸ªå¸¦å­æŸ¥è¯¢çš„delete&#47;update&#47;inserté—®é¢˜ï¼ŒDelete from A where name in(\r<br>   Select name from B where time&lt;â€™2019-01-23 11:11:12â€™\r<br>)  è¿™æ¡è¯­å¥åˆ é™¤Aè¡¨è®°å½•ä¹‹å‰æ˜¯ä¸æ˜¯ä¹Ÿä¼šæŠŠè¡¨ Bæ»¡è¶³æ¡ä»¶çš„è®°å½•ä¹Ÿä¼šç»™é”ä½å‘¢?<br>æˆ‘è¯•éªŒäº†ä¸€ä¸‹ä¼šé”ä½Bè¡¨è®°å½•çš„ï¼Œæœ‰æ²¡æœ‰å…¶ä»–åŠæ³•ä¸è®©é”Bè¡¨å‘¢?","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437443,"discussion_content":"æ”¹æˆRCéš”ç¦»çº§åˆ«è¯•è¯•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548239145,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1629257,"avatar":"https://static001.geekbang.org/account/avatar/00/18/dc/49/43ae1627.jpg","nickname":"Ansyear","note":"","ucode":"489CE96852EA2C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":352970,"discussion_content":"å­æŸ¥è¯¢ä¸ºå•¥ä¼šè¢«é”ä½å•Šï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614932014,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":63022,"user_name":"æœå˜‰å˜‰","can_delete":false,"product_type":"c1","uid":1306430,"ip_address":"","ucode":"C23DE27E7886BD","user_header":"https://static001.geekbang.org/account/avatar/00/13/ef/3e/9c3a8abc.jpg","comment_is_top":false,"comment_ctime":1548230071,"is_pvip":false,"replies":[{"id":"22268","content":"ä½ çš„éœ€æ±‚æ˜¯è¦åˆ è¡¨å—ï¼Ÿ<br>å¦‚æœæ˜¯è¦åˆ è¡¨ï¼Œå°±renameï¼Œè¿‡äº†è§‚å¯Ÿæ—¶é—´å†drop<br>","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1548239129,"ip_address":"","comment_id":63022,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5843197367","product_id":100020801,"comment_content":"æˆ‘æœ‰ä¸ªé—®é¢˜ï¼Œé‚£ä¹ˆå¦‚æœè¯´éœ€è¦ä¿®æ”¹æ•°æ®ã€‚åœ¨æ²¡æœ‰è‡ªåŠ¨åŒ–å¹³å°è¿™ç§æƒ…å†µä¸‹ï¼Œä¸ºäº†é¿å…æ•°æ®ä¸¢å¤±ï¼Œæˆ‘è§‰å¾—æœ‰ä¸¤ç§æ–¹å¼å¯è¡Œã€‚å¦‚æœè¯´æ˜¯åˆ é™¤æ•´ä¸ªè¡¨ï¼Œå¯ä»¥ä½¿ç”¨rename æ“ä½œã€‚ç¬¬äºŒç§å°±æ˜¯è¿›è¡Œå¤‡ä»½ã€‚æˆ‘æƒ³é—®è€å¸ˆï¼Œé‚£ç§æ–¹æ³•æ›´åˆç†ä¸€äº›ï¼Ÿrenameæ˜¯DDLè¯­å¥ï¼Œä¼šä¸ä¼šé”è¡¨ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437441,"discussion_content":"ä½ çš„éœ€æ±‚æ˜¯è¦åˆ è¡¨å—ï¼Ÿ\nå¦‚æœæ˜¯è¦åˆ è¡¨ï¼Œå°±renameï¼Œè¿‡äº†è§‚å¯Ÿæ—¶é—´å†drop\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548239129,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":62894,"user_name":"511","can_delete":false,"product_type":"c1","uid":1307855,"ip_address":"","ucode":"AB0D3907F4EA39","user_header":"https://static001.geekbang.org/account/avatar/00/13/f4/cf/2af390ad.jpg","comment_is_top":false,"comment_ctime":1548203716,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5843171012","product_id":100020801,"comment_content":"æ—©~","like_count":1},{"had_liked":false,"id":350015,"user_name":"cloud","can_delete":false,"product_type":"c1","uid":2724511,"ip_address":"","ucode":"E465F7413D6FC0","user_header":"https://static001.geekbang.org/account/avatar/00/29/92/9f/40d46f64.jpg","comment_is_top":false,"comment_ctime":1656505739,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1656505739","product_id":100020801,"comment_content":"çœ‹è¿‡å¾ˆå¤šè¯¯æ“ä½œçš„ï¼Œå¯ä»¥å…ˆå¼€å¯äº‹åŠ¡ï¼Œæ‰§è¡Œè„šæœ¬ï¼ŒéªŒè¯åå†æäº¤ï¼Œè¿™æ ·å°±æœ‰ä¿éšœäº›","like_count":0},{"had_liked":false,"id":344025,"user_name":"äºšæ—","can_delete":false,"product_type":"c1","uid":1018972,"ip_address":"","ucode":"4A5A6D24314B79","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8c/5c/3f164f66.jpg","comment_is_top":false,"comment_ctime":1651198907,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1651198907","product_id":100020801,"comment_content":"MySQL8å·²ç»æ²¡ä¸ŠæœŸçš„é—®é¢˜äº†ã€‚","like_count":0},{"had_liked":false,"id":336380,"user_name":"Mr.x","can_delete":false,"product_type":"c1","uid":1130726,"ip_address":"","ucode":"FDA144380DB9AE","user_header":"https://static001.geekbang.org/account/avatar/00/11/40/e6/2cd0f52b.jpg","comment_is_top":false,"comment_ctime":1646122392,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1646122392","product_id":100020801,"comment_content":"éƒ½æ˜¯è¡€æ³ªå²ï¼Œçœ‹ç€ç¬‘å“­ï¼ŒåŠ ä¸‹ mysql 8.0 binlog çš„æ–‡æ¡£ https:&#47;&#47;dev.mysql.com&#47;doc&#47;refman&#47;8.0&#47;en&#47;mysqlbinlog.html","like_count":0},{"had_liked":false,"id":334820,"user_name":"Bruce","can_delete":false,"product_type":"c1","uid":1016284,"ip_address":"","ucode":"61E439EEF865A6","user_header":"https://static001.geekbang.org/account/avatar/00/0f/81/dc/a1662051.jpg","comment_is_top":false,"comment_ctime":1645147598,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1645147598","product_id":100020801,"comment_content":"binlogä¸å®Œæ•´çš„æƒ…å†µä¸‹å»æ¢å¤æ•°æ®ï¼Œæœ‰å¥½æ–¹æ³•ä¹ˆï¼Ÿ<br><br>æˆ‘ä»¬æœ‰ä¸ªåº“ï¼Œæ—¥å¿—è®°å½•å¼€å¯æ˜¯åœ¨è¿è¡Œä¸€æ®µæ—¶é—´åå¼€å¯çš„ï¼Œå¹¶æœªåšå…¨é‡å¤‡ä»½ï¼Œç„¶åæŸå¤©æœ‰åŒäº‹æ‰§è¡Œäº† drop database xxxï¼Œç°åœ¨æƒ³æ¢å¤ xxxã€‚<br><br>å› ä¸ºæ—¥å¿—ä¸æ˜¯å…¨é‡ï¼Œæ¢å¤èµ·æ¥æ¯”è¾ƒéº»çƒ¦ï¼Œä¸çŸ¥é“è€å¸ˆæ˜¯å¦æœ‰å¥½çš„å»ºè®®å¯ä»¥æŒ‡å¯¼ä¸‹","like_count":0},{"had_liked":false,"id":287336,"user_name":"æ”»åŸç‹®","can_delete":false,"product_type":"c1","uid":1197444,"ip_address":"","ucode":"7D2C2836052C4C","user_header":"https://static001.geekbang.org/account/avatar/00/12/45/84/4b309ba9.jpg","comment_is_top":false,"comment_ctime":1617889071,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1617889071","product_id":100020801,"comment_content":"è¯·é—®è€å¸ˆç”¨çš„ä»€ä¹ˆè½¯ä»¶ç”»çš„æµç¨‹å›¾å•Š","like_count":0},{"had_liked":false,"id":281886,"user_name":"æ°sir","can_delete":false,"product_type":"c1","uid":1098505,"ip_address":"","ucode":"80BB56B3BFB71A","user_header":"https://static001.geekbang.org/account/avatar/00/10/c3/09/dc368335.jpg","comment_is_top":false,"comment_ctime":1614935109,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1614935109","product_id":100020801,"comment_content":"å¯¹äºä¿®æ”¹æˆ–åˆ é™¤æ•°æ®çš„éœ€æ±‚éƒ½å°½é‡ç”¨è„šæœ¬æ¥æ“ä½œã€‚<br>1ï¼Œä¿®æ”¹æ•°æ®ï¼Œå†™å¥½è„šæœ¬ï¼Œè®°å½•å¥½logï¼ŒåŒ…æ‹¬è¦æ›´æ–°æ•°æ®å‰åçš„å€¼ï¼Œæ­£å¼æ‰§è¡Œæ›´æ–°æ“ä½œå‰æŠŠupdateè¯­å¥æ³¨é‡Šæ‰ï¼Œé€šè¿‡logçœ‹çœ‹è¦æ›´æ–°çš„æ•°æ®å¯¹ä¸å¯¹ï¼ŒåŒæ—¶ä¿å­˜è¿™ä»½logï¼Œä¹‹ååœ¨æ­£å¼æ‰§è¡Œæ›´æ–°ã€‚<br>2ï¼Œåˆ é™¤æ“ä½œï¼ŒåŒæ ·å…ˆå†™å¥½è„šæœ¬ï¼Œè®°å½•åˆ é™¤å‰çš„æ•°ï¼Œæ­£å¼åˆ é™¤å‰å…ˆæ³¨é‡Šdeleteè¯­å¥ç¡®è®¤åˆ é™¤æ•°æ®é€»è¾‘æ— è¯¯åå†æ­£å¼æ‰§è¡Œåˆ é™¤æ“ä½œã€‚<br><br>å¦‚æœæ˜¯è‡ªå·±é€šè¿‡å‘½ä»¤è¡Œè¿æ¥æ•°æ®åº“æ“ä½œçš„è¯ï¼Œåœ¨æ›´æ–°æ•°æ®å‰å…ˆæŠŠupdateæ”¹ä¸ºselectçœ‹çœ‹æ›´æ–°çš„æ•°æ®è¡Œæ˜¯å¦æ­£å¸¸ï¼Œä¹‹åå†æ­£å¼update, deleteåˆ é™¤æ•°æ®ä¹Ÿä¸€æ ·ã€‚<br><br>è¿˜æœ‰æ˜¯æ‰‹è´±ï¼Œé€šè¿‡ä¸Šä¸‹æ–¹å‘ç®­å¤´æŸ¥æ‰¾å†å²å‘½ä»¤ï¼Œä¸€ä¸å°å¿ƒçœ‹é”™sqlè¯­å¥æ‰§è¡Œäº†ä¸€ä¸ªdeleteæˆ–è€…updateã€‚è¿™ç§å¯ä»¥åœ¨deleteå’Œupdataæ—¶å°½é‡åŠ ä¸ªlimitï¼Œè®©å†å²è®°å½•é‡Œçš„sqléƒ½æœ‰limitï¼Œå‡ºç°è¿™ç§æƒ…å†µçš„æ—¶å€™å¯ä»¥æ§åˆ¶ä¸€å®šçš„å½±å“èŒƒå›´ã€‚","like_count":0},{"had_liked":false,"id":275907,"user_name":"æ«ä¸­æµªå­","can_delete":false,"product_type":"c1","uid":2351949,"ip_address":"","ucode":"860BEA32059B37","user_header":"https://static001.geekbang.org/account/avatar/00/23/e3/4d/8a26dbb2.jpg","comment_is_top":false,"comment_ctime":1611716116,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1611716116","product_id":100020801,"comment_content":"å¤§ä½¬ç”¨æ²¡æœ‰æ¨èçš„flashbackå·¥å…·å•Š","like_count":0},{"had_liked":false,"id":260410,"user_name":"ç››è‰³æ˜","can_delete":false,"product_type":"c1","uid":1132347,"ip_address":"","ucode":"E4C1C699572C44","user_header":"https://static001.geekbang.org/account/avatar/00/11/47/3b/15e4490f.jpg","comment_is_top":false,"comment_ctime":1604999716,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1604999716","product_id":100020801,"comment_content":"é—®ä¸‹è€å¸ˆ ï¼Œmysql å¦‚æœäº‹åŠ¡åœ¨commit ä¹‹å‰æŒ‚æ‰äº†ï¼Œäº‹åŠ¡çš„æ¢å¤å·¥ä½œæ˜¯ä¸æ˜¯ mysql ç³»ç»Ÿå¾ˆå…· redolog å’Œ binlogæ–‡ä»¶è‡ªå·±å°±ä¿®å¤äº†ï¼Œæ ¹æœ¬ä¸éœ€è¦äººå·¥æ¥å…¥","like_count":0,"discussions":[{"author":{"id":1047479,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/fb/b7/6ecb191f.jpg","nickname":"yong","note":"","ucode":"E83FDDD570A9D7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":372158,"discussion_content":"è¿™ä¸ªæ²¡æœ‰mysqlä¼šè‡ªåŠ¨æ¢å¤çš„ï¼Œæ— éœ€å¹²æ¶‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620215382,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":257789,"user_name":"moonfox","can_delete":false,"product_type":"c1","uid":1526355,"ip_address":"","ucode":"902BFF40EFA9FA","user_header":"https://static001.geekbang.org/account/avatar/00/17/4a/53/063f9d17.jpg","comment_is_top":false,"comment_ctime":1604131006,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1604131006","product_id":100020801,"comment_content":"æœ‰å¦‚ä¸‹é—®é¢˜ï¼Œè¿˜è¯·è€å¸ˆè§£ç­”<br>1. ä¸»ä»å¤åˆ¶ä¸­æ–­ä¸ºä»€ä¹ˆè¦é‡åšä»åº“ï¼Ÿ<br>2.å¦‚ä½•åˆ¤æ–­åˆ é™¤çš„æ•°æ®å·²ç»æ¢å¤å¥½äº†ï¼Ÿ<br>3.å¦‚æœæ²¡æœ‰å¯ç”¨GTIDï¼ŒæŒ‡å®šå‚æ•°`--stop-position`ï¼Œæ‰§è¡Œåˆ°è¯¯æ“ä½œä¹‹å‰çš„æ—¥å¿—å°±å¯ä»¥äº†å§ï¼Œè¯¯æ“ä½œä¹‹åçš„æ—¥å¿—è¿˜éœ€è¦æ¢å¤å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1047479,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/fb/b7/6ecb191f.jpg","nickname":"yong","note":"","ucode":"E83FDDD570A9D7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":372159,"discussion_content":"3.éœ€è¦ã€‚è¿™ä¸ªæ¢å¤çš„æ•°æ®æ˜¯ä½œä¸ºä¸»åº“ä½¿ç”¨ï¼Œå¿…éœ€è¦æ•°æ®æ˜¯æœ€æ–°çš„å§ã€‚åˆ é™¤è¯­å¥ä¹‹åçš„å˜æ›´ä¸æ¢å¤ä¸å°±æ˜¯ä¸¢æ•°æ®äº†å—ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620215729,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":241372,"user_name":"å¼ è§¥","can_delete":false,"product_type":"c1","uid":1341821,"ip_address":"","ucode":"6784E44838EBCA","user_header":"https://static001.geekbang.org/account/avatar/00/14/79/7d/b573c6d9.jpg","comment_is_top":false,"comment_ctime":1597281656,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1597281656","product_id":100020801,"comment_content":"Mysqlbinlogå·¥å…·çš„--databaseå‚æ•°åªæ”¯æŒè¾“å…¥ä¸€ä¸ªdbï¼Œä¸èƒ½åŒæ—¶è¿‡æ»¤å¤šä¸ªdbçš„binlogäº‹ä»¶ï¼Œè¿™ä¸ªå·¥å…·æœ‰ç‚¹å‘ï¼Œä¸åšå…¨äº†","like_count":0},{"had_liked":false,"id":225398,"user_name":"lleft","can_delete":false,"product_type":"c1","uid":1970443,"ip_address":"","ucode":"D573EB509455AE","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIx1V1QAxC4NHaxYZGyuibBN8lcURJWc5nrnO4yic1kxnDemYV2FJGialf47kYX9qtDnZZOfe1SJeLicg/132","comment_is_top":false,"comment_ctime":1591750912,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1591750912","product_id":100020801,"comment_content":"æ¢å¤çš„ä¸´æ—¶åº“æ¥åˆ°å¤‡åº“è¿›è¡Œæ¢å¤çš„æ—¶å€™æ˜¯æ€ä¹ˆæ ·è·³è¿‡è¯¯åˆ é™¤çš„è¯­å¥çš„ï¼Ÿgtidæ¨¡å¼æ˜¯é€šè¿‡è®¾ç½®set gtid_nextçš„æ–¹å¼ï¼Œé‚£ä¼ ç»Ÿå¤åˆ¶çš„æ€ä¹ˆè·³è¿‡å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1047479,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/fb/b7/6ecb191f.jpg","nickname":"yong","note":"","ucode":"E83FDDD570A9D7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":372162,"discussion_content":"æ•°æ®é‡ä¸å¤§æ—¶ï¼Œå¯ä»¥è¿™ä¹ˆæ“ä½œï¼šå°†binlogå¯¼å‡ºåˆ°æ–‡ä»¶ï¼Œæ³¨é‡Šæ‰è¯¯åˆ è¯­å¥ï¼Œåœ¨æ¢å¤çš„æœ€è¿‘å¤‡ä»½åˆ å›æ”¾å³å¯ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620216411,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":222575,"user_name":"ç£Šç£Š","can_delete":false,"product_type":"c1","uid":1119820,"ip_address":"","ucode":"172CC7DA5641FB","user_header":"https://static001.geekbang.org/account/avatar/00/11/16/4c/6dbf3dfb.jpg","comment_is_top":false,"comment_ctime":1590837968,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1590837968","product_id":100020801,"comment_content":"æˆ‘ä¸€èˆ¬é‡è¦æ•°æ® éƒ½åŒå†™ã€‚","like_count":0},{"had_liked":false,"id":218824,"user_name":"æœ‰æœ‹è‡ªè¿œæ–¹æ¥","can_delete":false,"product_type":"c1","uid":1083600,"ip_address":"","ucode":"23A12829DEB119","user_header":"https://static001.geekbang.org/account/avatar/00/10/88/d0/6e75f766.jpg","comment_is_top":false,"comment_ctime":1589880904,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1589880904","product_id":100020801,"comment_content":"çº¿ä¸Šæ•°æ®è¯¯åˆ é™¤ã€‚æ‰¾ä¸šåŠ¡æ–¹ï¼ŒæŠŠæ•°æ®è¡¥å›æ¥äº†ğŸ˜‚","like_count":0,"discussions":[{"author":{"id":1303322,"avatar":"https://static001.geekbang.org/account/avatar/00/13/e3/1a/061e77b6.jpg","nickname":"äº¢æ˜Ÿä¸œ","note":"","ucode":"5E4063E83B2BB9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":331793,"discussion_content":"æœ‰çš„æ²¡ç•™è¾“å…¥çš„å…¥å£ ï¼Œé‚£å°±æ‚²å‰§äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606978237,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":208908,"user_name":"Sparrow","can_delete":false,"product_type":"c1","uid":1693667,"ip_address":"","ucode":"88D3F3920C68BC","user_header":"https://static001.geekbang.org/account/avatar/00/19/d7/e3/e6cf6352.jpg","comment_is_top":false,"comment_ctime":1587463482,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1587463482","product_id":100020801,"comment_content":"æˆ‘æœ‰æ¬¡ä¿®æ”¹æŸä¸ªå­—æ®µï¼Œä½†æ˜¯æŸ¥æ‰¾æ›¿æ¢çš„æ—¶å€™ä¸å°å¿ƒæ¯ä¸ªwhereå‰é¢éƒ½æœ‰ä¸ªåˆ†å·ï¼› å¯¼è‡´æ‰€æœ‰çš„updateè¯­å¥éƒ½å˜æˆæ— æ¡ä»¶updateï¼› å…¨è¡¨æ•°æ®æ”¹äº† ã€‚ã€‚ã€‚ã€‚<br>----<br>å¦å¤–è¯·æ•™ä¸€ä¸ªé—®é¢˜ï¼Œæ¢å¤æ•°æ®çš„æ—¶å€™ï¼Œå†å²æ•°æ®å’Œæ–°æ•°æ®éƒ½å¾€æ–°åº“å†™ï¼Œ æˆ–ä¸ä¼šé€ æˆæ•°æ®å†²çªï¼Œè¢«è¦†ç›–çš„æƒ…å†µï¼Ÿ  è¿ç§»æ•°æ®åº“çš„æ—¶å€™ä¹Ÿæœ‰è¿™ä¸ªç–‘é—®","like_count":0},{"had_liked":false,"id":182774,"user_name":"å¤§æ±‰_å®¢å®¶æ—_æ•°æ®å·¥ç¨‹_æ›¾é™¢å£«","can_delete":false,"product_type":"c1","uid":1215758,"ip_address":"","ucode":"AD73C36D617CA1","user_header":"https://static001.geekbang.org/account/avatar/00/12/8d/0e/1f49ade9.jpg","comment_is_top":false,"comment_ctime":1582863832,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1582863832","product_id":100020801,"comment_content":"è¯·é—®ä¸€ä¸‹å¤‡ä»½å‡ºæ–°å®ä¾‹åšå¤‡åº“ï¼Œä½¿ç”¨å¹¶å‘æ¢å¤ï¼Œæ€ä¹ˆè·³è¿‡åˆ é™¤æ“ä½œçš„GTID?","like_count":0},{"had_liked":false,"id":176060,"user_name":"ç‹ç››æ­¦","can_delete":false,"product_type":"c1","uid":1182516,"ip_address":"","ucode":"DE7EF246D3DCE8","user_header":"https://static001.geekbang.org/account/avatar/00/12/0b/34/f41d73a4.jpg","comment_is_top":false,"comment_ctime":1580927029,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1580927029","product_id":100020801,"comment_content":"rmçš„å¦‚æœæ˜¯ä¸»åº“ï¼Œ å¦‚æœæœ‰éƒ¨åˆ†binlogè¿˜æ²¡é€å‡ºå»ï¼Œ å³ä½¿HAé€‰å‡ºæ–°çš„masterï¼Œé‚£æ˜¯å¦æœ‰å¯èƒ½ä¸¢å¤±éƒ¨åˆ†æ•°æ®å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":177262,"discussion_content":"åº”è¯¥æœ‰å¯èƒ½å§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582090057,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":163668,"user_name":"anchor","can_delete":false,"product_type":"c1","uid":1083124,"ip_address":"","ucode":"24EECD40CC54C2","user_header":"https://static001.geekbang.org/account/avatar/00/10/86/f4/331f33a7.jpg","comment_is_top":false,"comment_ctime":1576764196,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1576764196","product_id":100020801,"comment_content":"åœ¨ä¸€å®¶å…¬å¸çš„ä¸€ä¸ªç”Ÿäº§åº“ä¸Šæ‰€æœ‰è¡¨çš„æ•°æ®å°‘äº†2å‘¨çš„æ•°æ®ï¼Œåé¢dbaé€šè¿‡binlogæ‰¾å›äº†ï¼Œä½†æ˜¯è¿˜æœ‰äº›æ•°æ®ä¸ä¸€è‡´ï¼Œä¹Ÿæ²¡æœ‰è¯´å•¥åŸå› ï¼Œæ€€ç–‘æ˜¯ä¸æ˜¯dbaè¯¯æ“ä½œäº†","like_count":0},{"had_liked":false,"id":149337,"user_name":"è™å°ç‰™","can_delete":false,"product_type":"c1","uid":1323427,"ip_address":"","ucode":"05E28911E407C6","user_header":"https://static001.geekbang.org/account/avatar/00/14/31/a3/8fac8e75.jpg","comment_is_top":false,"comment_ctime":1573196569,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1573196569","product_id":100020801,"comment_content":"å°±åƒçœ‹å¼¹å¹•ä¸€æ ·ï¼Œè¯„è®ºåŒºæ°¸è¿œå¾ˆç²¾å½©ï¼ï¼ï¼","like_count":0},{"had_liked":false,"id":120509,"user_name":"é’±","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1564919521,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1564919521","product_id":100020801,"comment_content":"è‡ªå·±å¥½åƒæ²¡æœ‰è¯¯åˆ æ•°æ®çš„ç»éªŒï¼Œä¹‹å‰å…¬å¸å°ï¼Œä¹Ÿä¸ç›´æ¥æ“ä½œæ•°æ®åº“ã€‚ç›®å‰å…¬å¸å¯¹äºæ•°æ®åº“çš„æ“ä½œæ¯”è¾ƒä¸¥æ ¼ï¼Œä¸šåŠ¡å¼€å‘ä¸­ç‰©ç†åˆ é™¤æ˜¯ç¦ç”¨çš„ï¼Œä¿®æ”¹æ•°æ®ä¹Ÿæ˜¯å…ˆé€»è¾‘ä¿®æ”¹å†æ’å…¥ã€‚å¦‚æœæ˜¯æ•°æ®ç»“è½¬ï¼Œæ›´éœ€è¦å±‚å±‚å®¡æ ¸æœ€åæœ‰DBAæ“åˆ€ã€‚<br>é¢„é˜²ä¸ºä¸»ï¼Œé˜²æ²»ç»“åˆï¼Œæˆ‘ä»¬åšåˆ°äº†ï¼ŒåŸºæœ¬å°†é—®é¢˜æ‰¼æ€åœ¨æ‘‡ç¯®é‡Œã€‚","like_count":0},{"had_liked":false,"id":113455,"user_name":"é¢œæµ·èˆª","can_delete":false,"product_type":"c1","uid":1308159,"ip_address":"","ucode":"5644F6328BF901","user_header":"https://static001.geekbang.org/account/avatar/00/13/f5/ff/523fb378.jpg","comment_is_top":false,"comment_ctime":1563016328,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1563016328","product_id":100020801,"comment_content":"æ•°æ®é‡è¾ƒå¤§æ—¶ ç”¨xtrabackupåšå…¨å¤‡ï¼Œç„¶åå¦‚æœæœ‰æ–°çš„binlogå°±å¤‡ä»½å‡ºæ¥ã€‚æƒ³é—®ä¸‹è¿™ä¸ªç”¨xtrabackupåšå…¨å¤‡çŸ¥é“æ€ä¹ˆåšï¼Œbinlogçš„å¤‡ä»½æ¢å¤æ˜¯ç”¨ä»€ä¹ˆå·¥å…·å—ï¼Ÿå¤‡ä»½å‡ºæ¥ä¹‹åæ€ä¹ˆæ¢å¤å‘¢","like_count":0,"discussions":[{"author":{"id":2182464,"avatar":"https://static001.geekbang.org/account/avatar/00/21/4d/40/24e85fbf.jpg","nickname":"å®‡å®™å°˜åŸƒcosmic dust","note":"","ucode":"CCD21CCD186F73","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":308562,"discussion_content":"binlogçš„å¤‡ä»½æ¢å¤å·¥å…·å°±æ˜¯mysqlbinlogï¼Œæ¢å¤çš„é€»è¾‘æˆ–è€…å«æ­¥éª¤ï¼šå°±æ˜¯ä½¿ç”¨innobackupexå·¥å…·(å¦‚æœå…¨å¤‡çš„å·¥å…·ä½¿ç”¨innobackupexåšçš„è¯)å…ˆæŠŠå…¨é‡çš„å¤‡ä»½æ¢å¤ï¼Œç„¶åå†ä½¿ç”¨mysqlbinlogå‘½ä»¤å¯¹å…¨é‡å¤‡ä»½åçš„ç”Ÿæˆçš„é‚£äº›äºŒè¿›åˆ¶æ—¥å¿—æ–‡ä»¶åšæ¢å¤ï¼Œåº”è¯¥å°±èƒ½èƒ½æ¢å¤åˆ°æœ€åçš„æ•°æ®äº†","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1600996756,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":104414,"user_name":"cache","can_delete":false,"product_type":"c1","uid":1248232,"ip_address":"","ucode":"E23FFCDC6A5E40","user_header":"https://static001.geekbang.org/account/avatar/00/13/0b/e8/53061df4.jpg","comment_is_top":false,"comment_ctime":1560747931,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1560747931","product_id":100020801,"comment_content":"è¯¯åˆ è¡¨åï¼Œé…ç½®ä¸´æ—¶å®ä¾‹ä½œä¸ºå¤‡åº“çš„ä»åº“ï¼Œåˆ©ç”¨change replication filteråï¼Œæ˜¯ä¸æ˜¯è¿˜éœ€è¦æŒ‡å®šå¤åˆ¶åˆ°è¯¯åˆ ä¹‹å‰çš„GTIDï¼Œå¦‚start slave until SQL_BEFORE_GTIDS? ä½†æ˜¯åœ¨ slave_parallel_worker éƒ¨åˆ†çš„å®˜æ¡£ä¸­åˆè¯´â€œon a multithreaded slave the START SLAVE UNTIL statement only supports using SQL_AFTER_MTS_GAPSâ€, è¿˜è¯·è€å¸ˆè§£æƒ‘ã€‚","like_count":0},{"had_liked":false,"id":63565,"user_name":"æœå˜‰å˜‰","can_delete":false,"product_type":"c1","uid":1306430,"ip_address":"","ucode":"C23DE27E7886BD","user_header":"https://static001.geekbang.org/account/avatar/00/13/ef/3e/9c3a8abc.jpg","comment_is_top":false,"comment_ctime":1548402166,"is_pvip":false,"replies":[{"id":"22491","content":"æ˜¯ï¼Œä¸è¿‡renameçš„æ‰§è¡Œé€Ÿåº¦å¾ˆå¿«<br>","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1548413235,"ip_address":"","comment_id":63565,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1548402166","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæ¥ç€ä¸Šé¢é—®é¢˜ã€‚æ˜¯åˆ è¡¨ï¼Œçº¿ä¸Šrenameï¼Œæœ‰ä»€ä¹ˆé£é™©å—ï¼Ÿéœ€è¦æ³¨æ„ä»€ä¹ˆï¼Ÿrenameæ˜¯ä¸æ˜¯ddlæ“ä½œ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437637,"discussion_content":"æ˜¯ï¼Œä¸è¿‡renameçš„æ‰§è¡Œé€Ÿåº¦å¾ˆå¿«\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548413235,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":63345,"user_name":"è‹èŒ«","can_delete":false,"product_type":"c1","uid":1299149,"ip_address":"","ucode":"CED8598307BEAE","user_header":"https://static001.geekbang.org/account/avatar/00/13/d2/cd/6fb14677.jpg","comment_is_top":false,"comment_ctime":1548330126,"is_pvip":false,"replies":[{"id":"22431","content":"åé¢æœ‰ä¸€ç¯‡ä¸“é—¨è¯´è¿™ä¸ªï¼Œæ•¬è¯·æœŸå¾…å“ˆ","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1548332238,"ip_address":"","comment_id":63345,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1548330126","product_id":100020801,"comment_content":"æœ‰ä¸€æ¬¡æˆ‘åœ¨æŸ¥è¯¢æ•°æ®å€’æ•°æŠ¥è¡¨ç»™ä¸šåŠ¡æ–¹ï¼Œé‚£ä¸ªè„šæœ¬æ˜¯æˆ‘å†™çš„ï¼Œå…³è”äº†å¾ˆå¤šè¡¨ï¼Œè¿˜è·¨äº†åº“ï¼Œä¸€ä¸ªä¸»è¡¨æœ‰ä¸€ä¸‡å¤šæ¡çºªå½•ï¼Œå…³è”å¦ä¸€å¼ æ“ä½œè®°å½•è¡¨å¥½åƒæ˜¯10ä¸‡æ¡æ•°æ®ã€‚å› ä¸ºè¦ç»Ÿè®¡å¤šæ­¥æ“ä½œæ­¥éª¤ï¼Œæ‰€ä»¥æ¯ä¸€æ­¥çš„æ“ä½œè®°å½•æˆ‘å°±å¾—æŒ‰ç…§ä¸åŒçš„æ¡ä»¶å…³è”äº§ç”Ÿä¸´æ—¶è¡¨ï¼ˆå…³è”ä¸­æœ‰group è¿˜æœ‰maxï¼ˆï¼‰èšåˆå‡½æ•°ï¼Œè¿™ä¸ªæ˜¯éœ€æ±‚å¯¼è‡´çš„ï¼‰ï¼Œä¸€å¼€å§‹å†™å¥½çš„æŸ¥è¯¢å¾ˆå¿«æœ‰äº†ç»“æœã€‚é‚£å¤©11ç‚¹å¤šçš„æ—¶å€™ï¼Œæˆ‘æ‰§è¡Œé‚£ä¸ªè„šæœ¬ï¼Œå‘ç°å¾ˆæ…¢æ²¡æœ‰ååº”ï¼Œç„¶åæˆ‘å°±æŠŠè¿æ¥å…³äº†ï¼Œé‡å¤å‡ æ¬¡æ“ä½œï¼Œç„¶åç”Ÿäº§åº“å°±è¢«æˆ‘ææŒ‚äº†ã€‚åé¢è¿ç»´çš„åŒå­¦æ“ä½œäº†ä¸€æ³¢æ‰æ¢å¤è¿‡æ¥ã€‚è¿™æ¬¡ä¹Ÿæ˜¯è¿ç»´åŒå­¦èƒŒçš„é”…ã€‚åé¢ï¼Œè¿˜æŠŠæˆ‘çš„æ“ä½œç»™è´´å‡ºæ¥äº†ï¼Œåšé€šæŠ¥æ‰¹è¯„ã€‚æˆ‘æƒ³é—®ä¸‹ä¸ºå•¥ä¼šå‡ºç°è¿™ç§æƒ…å†µå‘¢ï¼Ÿ<br>åç»­æˆ‘çš„ç»„é•¿å¯¹æˆ‘å†™çš„sqlè¿›è¡Œäº†ä¼˜åŒ–ï¼Œä¸»è¦æ˜¯æŠŠè”è¡¨æ“ä½œéœ€è¦çš„ä¿¡æ¯æ”¾åœ¨å­æŸ¥è¯¢ä¸­ï¼Œç„¶åå†æ“ä½œè®°å½•è¡¨ä¸­åŠ äº†ç´¢å¼•ï¼Œæœ‰äº†å¤‡ä»½åº“ï¼Œæ¯æ¬¡æ‰§è¡Œè„šæœ¬å¯¼å‡ºæ•°æ®éƒ½æ˜¯åœ¨å¤‡ä»½åº“ä¸­å¯¼å‡ºï¼Œå°±å†ä¹Ÿæ²¡æœ‰å‘ç”Ÿè¿™ä¸ªé—®é¢˜äº†ã€‚","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437558,"discussion_content":"åé¢æœ‰ä¸€ç¯‡ä¸“é—¨è¯´è¿™ä¸ªï¼Œæ•¬è¯·æœŸå¾…å“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548332238,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":63337,"user_name":"é˜¿ä¸½","can_delete":false,"product_type":"c1","uid":1170970,"ip_address":"","ucode":"C01D32E7165302","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erJFlHhylrbLANtehiaX50wgVa2Z1ibQAdLpgyW4gCpEyOKEI9bPNZZBiabrP2oCleZWc2KKyKADz8tg/132","comment_is_top":false,"comment_ctime":1548327151,"is_pvip":false,"replies":[{"id":"22432","content":"å…¨æ–‡ç´¢å¼•æœ‰stop wordsçš„ï¼Œä½ çœ‹çœ‹æ˜¯ä¸æ˜¯è½åœ¨stop wordsé‡Œäº†","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1548332303,"ip_address":"","comment_id":63337,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1548327151","product_id":100020801,"comment_content":"è€å¸ˆï¼Œéº»çƒ¦é—®ä¸€ä¸‹ï¼Œ5.7.21ä¸Šinnodbçš„è¡¨ä¸¤åˆ—ï¼ˆæœ‰ä¸­æ–‡æœ‰è‹±æ–‡ï¼‰å»ºçš„å…¨æ–‡ç´¢å¼•ï¼Œæœ€å°åˆ†è¯1ï¼ŒæŒ‰ä¸­æ–‡å¯ä»¥æŸ¥è¯¢ï¼ŒæŒ‰è‹±æ–‡æœ‰äº›æŸ¥è¯¢ä¸å‡ºæ¥ï¼Œæ‚¨çŸ¥é“åŸå› å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437556,"discussion_content":"å…¨æ–‡ç´¢å¼•æœ‰stop wordsçš„ï¼Œä½ çœ‹çœ‹æ˜¯ä¸æ˜¯è½åœ¨stop wordsé‡Œäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548332303,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":63263,"user_name":"hua168","can_delete":false,"product_type":"c1","uid":1065255,"ip_address":"","ucode":"CFF9A7E86EBA48","user_header":"https://static001.geekbang.org/account/avatar/00/10/41/27/3ff1a1d6.jpg","comment_is_top":false,"comment_ctime":1548314687,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1548314687","product_id":100020801,"comment_content":"å¤§ç¥ï¼Œæœ‰äº²æˆšå°å…¬å¸æDBAä¸€å¹´ï¼Œæˆ‘æƒ³é—®ä¸€ä¸‹ï¼š<br>1.DBAä¸€èˆ¬å‘å±•æ–¹å‘æ˜¯æ€æ ·çš„å‘€ï¼Ÿè¿ç»´å’Œå¼€å‘æˆ‘äº†è§£ï¼ŒDBAæ²¡æ¥è§¦è¿‡ï¼Œæ— æ³•ç»™å»ºè®®ï¼Œä¸€èˆ¬çš„å‡çº§è¿‡ç¨‹æ˜¯æ€æ ·çš„ï¼Ÿ<br>2.ä»¥åå‘å±•æ–¹å‘æ˜¯æ€æ ·ï¼Ÿç°åœ¨éƒ½æ˜¯å¼€æºã€å¤§æ•°æ®æ—¶ä»£æ—¶ä»£ï¼Œé˜¿é‡Œåˆæâ€œå»IOEâ€ï¼Œä¸€èˆ¬oracle DBAå‘å±•å‰æ™¯ä¸å¥½å§ï¼Ÿ<br><br>èƒ½å¸®æŒ‡ä¸€ä¸ªå¤§æ¦‚çš„æ–¹å‘å—ï¼Ÿè°¢è°¢~~","like_count":0},{"had_liked":false,"id":63213,"user_name":"aliang","can_delete":false,"product_type":"c1","uid":1149502,"ip_address":"","ucode":"B36B94B362477F","user_header":"https://static001.geekbang.org/account/avatar/00/11/8a/3e/30c05bce.jpg","comment_is_top":false,"comment_ctime":1548299559,"is_pvip":true,"replies":[{"id":"23194","content":"å¯å¦è´´ä¸€ä¸‹ä½ çš„show variables  çš„ç»“æœï¼Œæˆ‘è¿™è¾¹éªŒè¯ï¼ˆä¸è®ºDæœ‰æ²¡æœ‰åŠ beginï¼‰çš„æ•ˆæœéƒ½æ˜¯ä½ è¯´çš„ç¬¬äºŒæ¬¡çš„æƒ…å†µå“¦","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1549277569,"ip_address":"","comment_id":63213,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1548299559","product_id":100020801,"comment_content":"è€å¸ˆå¥½ã€‚è¿™æ˜¯ç¬¬6è®²è¯„è®ºåŒºTony Duçš„è¯„è®ºï¼š<br>session A: begin; select * from t limit 1; æœ€å…ˆå¯åŠ¨sessionA<br>session B: begin; select * from t limit 1; ç´§æ¥ç€å¯åŠ¨sessionB<br>session C: alter table t add f int; ç„¶åå†æ˜¯å¯åŠ¨sessionC<br>session D: begin; select * from t limit 1; æœ€åæ˜¯å¯åŠ¨sessionD<br>ä»–è¯´session Cä¼šè¢«Aå’ŒBé˜»å¡ï¼ŒDä¼šè¢«Cé˜»å¡ï¼›å½“Aå’ŒBæäº¤åï¼ŒDæ˜¯å¯ä»¥ç»§ç»­æ‰§è¡Œå¾—åˆ°æŸ¥è¯¢ç»“æœçš„ï¼Œä½†æ˜¯Cä»ç„¶è¢«é˜»å¡ï¼Œåªæœ‰Dæäº¤åCæ‰èƒ½æ‰§è¡ŒæˆåŠŸã€‚æˆ‘è‡ªå·±åœ¨5.6å’Œ5.7æŒ‰ä»–çš„æ­¥éª¤åšäº†è¯•éªŒï¼Œç»“æœå’Œä»–ä¸€æ ·ã€‚<br>ç„¶åæˆ‘å†åšäº†ä¸€æ¬¡è¯•éªŒï¼Œè¿™æ¬¡æŠŠDçš„begin;å»æ‰ï¼Œå˜æˆäº†ï¼š<br>session A: begin; select * from t limit 1; æœ€å…ˆå¯åŠ¨sessionA<br>session B: begin; select * from t limit 1; ç´§æ¥ç€å¯åŠ¨sessionB<br>session C: alter table t add f int; ç„¶åå†æ˜¯å¯åŠ¨sessionC<br>session D: select * from t limit 1; æœ€åæ˜¯å¯åŠ¨sessionD<br>ç»“æœæ˜¯å½“Aå’ŒBæäº¤åï¼ŒDå’ŒCéƒ½èƒ½æ‰§è¡ŒæˆåŠŸäº†ï¼ˆå’Œè€å¸ˆçš„ç»“æœä¸€æ ·ï¼‰ã€‚æˆ‘çš„é—®é¢˜æ˜¯ï¼šä¸ºä»€ä¹ˆç¬¬ä¸€æ¬¡session Dæ˜¾å¼å¼€å¯äº‹åŠ¡ï¼Œå’Œç¬¬äºŒæ¬¡ä¸æ˜¾å¼å¼€å¯çš„ç»“æœä¸ä¸€æ ·å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437504,"discussion_content":"å¯å¦è´´ä¸€ä¸‹ä½ çš„show variables  çš„ç»“æœï¼Œæˆ‘è¿™è¾¹éªŒè¯ï¼ˆä¸è®ºDæœ‰æ²¡æœ‰åŠ beginï¼‰çš„æ•ˆæœéƒ½æ˜¯ä½ è¯´çš„ç¬¬äºŒæ¬¡çš„æƒ…å†µå“¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1549277569,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":63194,"user_name":"å¤ªç¦","can_delete":false,"product_type":"c1","uid":1301817,"ip_address":"","ucode":"9DA81A8EA9D044","user_header":"https://static001.geekbang.org/account/avatar/00/13/dd/39/f5747c5d.jpg","comment_is_top":false,"comment_ctime":1548296644,"is_pvip":false,"replies":[{"id":"23046","content":"è¿™ä¸ªä¸ç®—çªç„¶å‡ºç°å§ï¼Œä½ ä¸¤æ¬¡æ£€æµ‹ä¹‹é—´æ˜¯1åˆ†é’Ÿæ˜¯å§ï¼Ÿ<br><br>ä½ è¿™æ ·è¯´æˆ‘çœ‹ä¸å¤ªæ˜ç™½ï¼Œå¯å¦ç»™ä¸€ä¸ªå½“æ—¶çš„show processlistçš„æˆªå›¾ï¼›<br>ä½ è¿˜èƒ½æ‰§è¡Œshow processlistï¼Œå°±ä¸èƒ½ç®—â€åƒµæ­»â€œï¼›<br>ioçš„çŠ¶æ€å¦‚æœæœ‰ä¿å­˜ï¼Œä¹Ÿè´´ä¸€ä¸‹å½“æ—¶çš„iostatçš„ç»“æœï¼›<br><br>å¯ä»¥å‘ä¸ªå¾®åšé™„å›¾ï¼Œç„¶ååœ°å€å‘åˆ°è¯„è®ºåŒºå“ˆ<br>","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1549010015,"ip_address":"","comment_id":63194,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1548296644","product_id":100020801,"comment_content":"å› ä¸ºæ—¶é—´åŸå› ï¼Œå‰é¢çš„è¯¾ç¨‹æ²¡è·Ÿä¸Šï¼Œåœ¨è¿™é‡Œè¯·æ•™ä¸ªæœ€è¿‘çº¿ä¸Šmysqlé‡åˆ°çš„é—®é¢˜ï¼š<br>  ä¸€ä¸ªä»åº“mysql5.6ç‰ˆæœ¬,æ­£å¸¸æƒ…å†µä¸‹åªæœ‰3åˆ°5ä¸ªå¹¶å‘sqlåœ¨æŸ¥è¯¢ï¼Œæ¯åˆ†é’Ÿç”¨ä¸‹é¢çš„sqlæŸ¥çœ‹ä¸€æ¬¡æ£€æµ‹åˆ°çš„<br> SELECT  t1.* FROM information_schema.`PROCESSLIST` t1  WHERE  info is not null ORDER BY time desc;<br> å‰ä¸€æ¬¡æ£€æµ‹è¿˜æ˜¯å‡ ä¸ªsqlåœ¨æŸ¥è¯¢ï¼Œä¸‹1åˆ†é’ŸæŸ¥åˆ°2000å¤šä¸ªsqlåœ¨è·‘ï¼Œå¾ˆå¤šå †ç§¯äº†å‡ åç§’çš„sqlï¼ŒçŠ¶æ€â€œSending dataâ€ â€œCreating sort indexâ€<br> ï¼Œè€Œè¿™äº›sqlåœ¨æ­£å¸¸æƒ…å†µä¸‹æ˜¯ä¸åˆ°1ç§’å°±æŸ¥åˆ°ç»“æœäº†çš„ï¼Œä¸”cpuä½¿ç”¨ç‡ä¸ioå¾ˆä½ï¼Œçœ‹èµ·æ¥mysqlåƒµæ­»çš„äº†ã€‚<br>æœ‰ä¸¤ä¸ªé—®é¢˜ï¼š1ï¼‰é—®é¢˜çªç„¶å‡ºç°<br>              2ï¼‰å¤§é‡sqlåœ¨è·‘ï¼Œè€Œcpuä¸ç£ç›˜ioåè€Œæ¯”æ­£å¸¸ä¸‹é™ï¼›è¿™æ˜¯ä»åº“ï¼Œå†™åªæœ‰ä¸»ä»åŒæ­¥ï¼Œå…¶å®ƒéƒ½æ˜¯è¯»æŸ¥è¯¢ã€‚<br>é…ç½®ï¼š64Gå†…å­˜ï¼Œbpåˆ†é…40Gï¼Œioä½¿ç”¨ä¸é«˜<br>,ä¸šåŠ¡é‡æ²¡å¤§å˜åŠ¨ï¼Œä¹Ÿæ²¡æ–°ç‰ˆæœ¬å‘å¸ƒï¼Œå¤§ä½“æ’é™¤ä¸šåŠ¡å¹¶å‘åŠ å¤§å¯¼è‡´çš„ã€‚","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437496,"discussion_content":"è¿™ä¸ªä¸ç®—çªç„¶å‡ºç°å§ï¼Œä½ ä¸¤æ¬¡æ£€æµ‹ä¹‹é—´æ˜¯1åˆ†é’Ÿæ˜¯å§ï¼Ÿ\n\nä½ è¿™æ ·è¯´æˆ‘çœ‹ä¸å¤ªæ˜ç™½ï¼Œå¯å¦ç»™ä¸€ä¸ªå½“æ—¶çš„show processlistçš„æˆªå›¾ï¼›\nä½ è¿˜èƒ½æ‰§è¡Œshow processlistï¼Œå°±ä¸èƒ½ç®—â€åƒµæ­»â€œï¼›\nioçš„çŠ¶æ€å¦‚æœæœ‰ä¿å­˜ï¼Œä¹Ÿè´´ä¸€ä¸‹å½“æ—¶çš„iostatçš„ç»“æœï¼›\n\nå¯ä»¥å‘ä¸ªå¾®åšé™„å›¾ï¼Œç„¶ååœ°å€å‘åˆ°è¯„è®ºåŒºå“ˆ\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1549010015,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":62997,"user_name":"å¤¹å¿ƒé¢åŒ…","can_delete":false,"product_type":"c1","uid":1301957,"ip_address":"","ucode":"002BBA49D83D17","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJCscgdVibmoPyRLRaicvk6rjTJxePZ6VFHvGjUQvtfhCS6kO4OZ1AVibbhNGKlWZmpEFf2yA6ptsqHw/132","comment_is_top":false,"comment_ctime":1548223557,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1548223557","product_id":100020801,"comment_content":"å¯ä»¥éƒ½èµ°inceptionè‡ªåŠ¨å®¡æ ¸æ‰§è¡Œ,ä¸è¿‡å¯¹DDLè¿˜æ˜¯æ— è§£ å“ˆå“ˆ","like_count":0},{"had_liked":false,"id":62901,"user_name":"äº®","can_delete":false,"product_type":"c1","uid":1086346,"ip_address":"","ucode":"5B8E59AEA6E3F2","user_header":"https://static001.geekbang.org/account/avatar/00/10/93/8a/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1548204790,"is_pvip":false,"replies":[{"id":"22258","content":"1. age(11)å…¶å®æ˜¯4ä¸ªå­—èŠ‚å“ˆ<br>2. å¯¹ï¼Œå•ä½æ˜¯å­—èŠ‚<br>","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1548224634,"ip_address":"","comment_id":62901,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1548204790","product_id":100020801,"comment_content":"CREATE TABLE `t` (<br>  `id` int(11) NOT NULL,<br>  `city` varchar(16) NOT NULL,<br>  `name` varchar(16) NOT NULL,<br>  `age` int(11) NOT NULL,<br>  `addr` varchar(128) DEFAULT NULL,<br>  PRIMARY KEY (`id`),<br>  KEY `city` (`city`)<br>) ENGINE=InnoDB;<br><br>è€å¸ˆè¯·æ•™æ‚¨16ç« çš„é—®é¢˜ï¼Œæ‚¨æåˆ°â€œcityã€nameã€age è¿™ä¸‰ä¸ªå­—æ®µçš„å®šä¹‰æ€»é•¿åº¦æ˜¯36â€ï¼Œè¿™ä¸ªæ˜¯æ€ä¹ˆç®—å‡ºæ¥çš„å‘¢ï¼Œvarchar(16)æ˜¯å¯ä»¥ä¿å­˜16ä¸ªå­—ç¬¦ï¼Œå ç”¨äº†49ä¸ªå­—èŠ‚ï¼ˆutf8ï¼‰ï¼Œæ‰€ä»¥æˆ‘æ²¡æƒ³æ˜ç™½36æ˜¯æ€ä¹ˆæ¥çš„ã€‚<br><br>ç¬¬äºŒä¸ªé—®é¢˜æ˜¯max_length_for_sort_dataå‚æ•°ç³»ç»Ÿé»˜è®¤æ˜¯1024ï¼Œæ˜¯1024ä¸ªå­—èŠ‚çš„æ„æ€å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437391,"discussion_content":"1. age(11)å…¶å®æ˜¯4ä¸ªå­—èŠ‚å“ˆ\n2. å¯¹ï¼Œå•ä½æ˜¯å­—èŠ‚\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548224634,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}