{"id":187963,"title":"13丨性能测试场景：如何进行场景设计？","content":"<p>我们在前面屡次强调了场景的重要性，今天终于到了要把实际场景拿出来解析的时候了。</p><p>在本篇文章中，为了保证数据的连续性，我用之前的项目资料来作明确地说明。同时为了模糊关键业务信息，以及让场景的描述更通用性，我会把所有的业务名隐去。</p><p>根据之前我们所说的，基准性能场景是为了测试出单业务的最大容量，以便在混合容量场景中判断哪个业务对整体容量最有影响。</p><p>今天的场景设计需要说明两个前提条件：</p><ol>\n<li>这些业务都是实时的业务，不涉及批处理、大数据等业务。</li>\n<li>因为本篇着重讲场景的设计和具体项目的操作，所以不加系统资源的分析，避免信息混乱。</li>\n</ol><p>在这个场景设计中，首先，我们要列出自己要测试的业务比例、业务目标TPS和响应时间指标。</p><p><img src=\"https://static001.geekbang.org/resource/image/44/0a/444dad8faf28ab717da7635d1b9fb20a.png?wh=1148*544\" alt=\"\"><br>\n在这个项目中，响应时间指标是统一的，就是不大于100ms。</p><p>其实我们在做项目的时候，经常会这样制定一个统一的响应时间指标，这样做也不是完全因为懒，更多的是根本不知道如何定每个业务的时间。但我们性能测试人员要知道，这显然是不对的，因为业务不同，响应时间指标也应该不同，合理的做法是给出每个业务的响应时间指标。下面我们还会遇到\b响应时间定得不够细致的问题。</p><p>有了这个列表，下一步就是做基准性能测试了。</p><h2>基准性能场景</h2><p>有很多人做接口测试的时候，觉得接口的TPS真是高呀，于是就按照最高的TPS跟老板汇报。但我们一定要知道的是，接口的TPS再高，都无法说明容量场景的情况，除非这个服务只有这一个接口，并且也只为了测试服务，这时就不必有混合的情况了。</p><!-- [[[read_end]]] --><p>首先，我们要知道，每个业务在系统中的最大容量是多少。那么接下来，我们用上面的业务一个一个地做基准，看看结果如何。</p><h3>业务1</h3><p>场景执行时长：17分钟。</p><p>先看Statistics。</p><p><img src=\"https://static001.geekbang.org/resource/image/9d/a2/9de840c849d7527eaba8d61def519aa2.png?wh=1034*134\" alt=\"\"><br>\n很多人喜欢用这个表中的数据来做报告，特别是90th pct、95th pct、99th pct。我不是说不能用，但是，我们要先知道这个场景是什么样，再来确定这些值是不是可以用。</p><p>从上图来看，TPS达到573.24，平均响应时间是109.83ms，发送字节很少，这里都没统计到，接收字节966.22KB/sec，这个值也非常低，最小响应时间43ms，最大响应时间694ms。</p><p>但是！这能说明什么呢？什么都说明不了呀。是好是坏？不知道呀。所以我们还需要看其他图。</p><p>我们先看一下线程图。</p><p><img src=\"https://static001.geekbang.org/resource/image/ad/a4/ad1f3e8282cf0ba6f923d0f2ec6b48a4.png?wh=846*413\" alt=\"\"></p><p>以每分钟15个用户的速度往上递增。</p><p>对应的响应时间图是下面这样的。</p><p><img src=\"https://static001.geekbang.org/resource/image/c4/9d/c465de60017486d43bc4eebeebfc619d.png?wh=845*407\" alt=\"\"></p><p>随着用户的增加，响应时间一直都在增加，显然瓶颈已经出现了。</p><p>我们再结合Statistics表格中几个和时间有关的值来想想一想，90th pct、95th pct、99th pct、平均响应时间还可以用吗？ Statistics的平均响应时间是109.83ms，但是你从响应时间图和线程图比对就可以看到，在不同的线程阶梯，响应时间是有很大差别的。所以Statistics中的响应时间都是针对整个场景来说的，然而<strong>在梯度加压的过程中，用Statistics中的数据是不合理的</strong>。</p><p>接着我们再来看下TPS图：</p><p><img src=\"https://static001.geekbang.org/resource/image/23/65/23030e782738e7d4f1219e38b4fae565.png?wh=841*412\" alt=\"\"></p><p>我们可以从TPS图上看到，最大TPS能达到680左右。我再啰嗦一句，请你不要再用所谓的”最大TPS拐点“这样的描述来说明TPS曲线，我在<a href=\"https://time.geekbang.org/column/article/182912\">第6篇文章</a>中也说过，性能的衰减是逐步的（也有突然的情况，那是非常明显的性能瓶颈了），在最大TPS出现之前，就已经可以判断瓶颈是否出现了。</p><p>结合上面四个图，我们就有了如下的判断：</p><ol>\n<li>场景是递增的。</li>\n<li>压力线程上升到55（第四个阶梯）时，TPS达到上限680左右，但是明显的，性能在第三个阶梯就已经接近上限了，</li>\n<li>在压力线程达到55时，响应时间达到85ms左右，这个值并不高。</li>\n</ol><p>除此之外，其他的似乎不需要我们再做什么判断了。</p><p>也许这时候你会想问，那么瓶颈在哪里呢？总有人看到现象就想知道结果。但是这一次呢，我不打算满足这样的好奇心，因为本篇只是为了讲场景的逻辑，而不是瓶颈的分析。哈哈。</p><h3>业务2</h3><p>从业务2开始，我们不做啰嗦的数据解释了，只说明一下关键点。我们看图。</p><p>Statistics图：</p><p><img src=\"https://static001.geekbang.org/resource/image/b0/69/b0e2ccaf8a1f9714182870a9bbd1d669.png?wh=1034*142\" alt=\"\"><br>\n线程数：</p><p><img src=\"https://static001.geekbang.org/resource/image/ab/20/ab1fb5be7dcfd94a4026af6571c22420.png?wh=847*409\" alt=\"\"></p><p>响应时间图：</p><p><img src=\"https://static001.geekbang.org/resource/image/17/0a/1783318a63d409ff8f27038aab7b700a.png?wh=837*410\" alt=\"\"></p><p>TPS图：</p><p><img src=\"https://static001.geekbang.org/resource/image/a9/be/a932087dde363209b62c4e5ec8f72bbe.png?wh=847*408\" alt=\"\"></p><p>基于上面的四张图，我们可以看到：</p><ol>\n<li>这个单业务的最大TPS在6000以上。</li>\n<li>响应时间变化比较小，基本上都在10ms以下，但也能明显看出在线程增加的过程中，响应时间也是在增加的。</li>\n</ol><p>这个业务由于TPS太高，响应时间太短，实在没啥可分析的。</p><h3>业务3</h3><p>接下来再看一下业务3的情况。</p><p>Statistics：</p><p><img src=\"https://static001.geekbang.org/resource/image/f1/b0/f1349673df15293398a85f900143cab0.png?wh=1032*136\" alt=\"\"><br>\n线程数：</p><p><img src=\"https://static001.geekbang.org/resource/image/0a/c0/0a711dfcf44c37b55817521ae5a64ec0.png?wh=844*412\" alt=\"\"><br>\n响应时间图：</p><p><img src=\"https://static001.geekbang.org/resource/image/f2/7c/f28571859bacf3a5bdd7cbd9bfcd927c.png?wh=843*416\" alt=\"\"></p><p>TPS图：</p><p><img src=\"https://static001.geekbang.org/resource/image/3d/7e/3d90cb45f3b3c6c37835008a5e8bb57e.png?wh=847*410\" alt=\"\"></p><p>基于上面四张图，我们可以看到：</p><ol>\n<li>最大TPS将近5000。</li>\n<li>响应时间随着用户的增加而增加，在达到4500TPS时，响应时间在6.5ms左右。</li>\n</ol><h3>业务4</h3><p>Statistics：</p><p><img src=\"https://static001.geekbang.org/resource/image/fc/9b/fc5296d4a08e590dd04e323e176e679b.png?wh=1038*139\" alt=\"\"></p><p>线程数：</p><p><img src=\"https://static001.geekbang.org/resource/image/5e/7c/5e6992218dd747d4720cad3131058e7c.png?wh=851*411\" alt=\"\"></p><p>响应时间图：</p><p><img src=\"https://static001.geekbang.org/resource/image/5c/91/5ca47351a7c712f25222b2de51eb8c91.png?wh=848*409\" alt=\"\"></p><p>TPS图：</p><p><img src=\"https://static001.geekbang.org/resource/image/28/ba/28855bf2f93f744dd6854592b5796aba.png?wh=845*406\" alt=\"\"><br>\n基于上面四张图，我们可以看到：</p><ol>\n<li>最大TPS超过了300。</li>\n<li>响应时间随着用户的增而增加，在达到300TPS时，响应时间在70ms左右。</li>\n</ol><h3>业务5</h3><p>Statistics：</p><p><img src=\"https://static001.geekbang.org/resource/image/90/cc/90c2464c14548607b3101a25a765decc.png?wh=1036*150\" alt=\"\"><br>\n线程数：</p><p><img src=\"https://static001.geekbang.org/resource/image/f2/d1/f291158a41f96e251b969da3068cf4d1.png?wh=839*408\" alt=\"\"><br>\n响应时间图：</p><p><img src=\"https://static001.geekbang.org/resource/image/79/f5/79760efaeed680947747ab0393b292f5.png?wh=835*407\" alt=\"\"></p><p>TPS图：</p><p><img src=\"https://static001.geekbang.org/resource/image/bf/58/bfd1e5b3b7dc2e7f50933ea2ff675d58.png?wh=835*411\" alt=\"\"></p><p>基于上面四张图，我们可以看到：</p><ol>\n<li>最大TPS在550左右。</li>\n<li>响应时间随着用户的增而增加，在达到550TPS时，响应时间在55ms左右。</li>\n</ol><h3>业务6</h3><p>Statistics：</p><p><img src=\"https://static001.geekbang.org/resource/image/be/59/be54540743d302757a0e935cee006f59.png?wh=1041*148\" alt=\"\"></p><p>线程数：</p><p><img src=\"https://static001.geekbang.org/resource/image/b0/8f/b04fe8746c89e11c51f0dc7283508c8f.png?wh=838*415\" alt=\"\"></p><p>响应时间图：</p><p><img src=\"https://static001.geekbang.org/resource/image/1a/15/1a96bab4e7547a70dbb44780a5171a15.png?wh=843*415\" alt=\"\"></p><p>TPS图：</p><p><img src=\"https://static001.geekbang.org/resource/image/70/6e/70243e0c8dbadf5b26129e0c1dad776e.png?wh=848*406\" alt=\"\"></p><p>基于上面四张图，我们可以看到：</p><ol>\n<li>最大TPS超过了2500。</li>\n<li>响应时间随着用户的增加而增加，在达到2500TPS时，响应时间在16ms左右。</li>\n</ol><p>有了上面这些单业务的容量结果，我们就可以做一个表格了：</p><p><img src=\"https://static001.geekbang.org/resource/image/62/bc/6246f910d9112e9e4efd70b559a84ebc.png?wh=1203*569\" alt=\"\"><br>\n还记得我们前面提到响应时间都不能大于100ms吧。通过测试结果我们可以看到，业务1已经接近这个指标了，也就是说这个业务如果在活动或促销期，有可能出现峰值最大TPS超过承受值的情况，超过了前面制定的响应时间指标。</p><p>有了这些基础数据之后，下面我们就可以设计容量场景了。</p><h2>容量性能场景</h2><p>我们希望得到的容量场景在本文的一开始就已经给出。下面我们通过设计线程来得到这个容量场景的结果。</p><p>你需要记住我们的重点：</p><ol>\n<li>场景不断。</li>\n<li>控制比例。</li>\n</ol><p>我们这里只说一个容量性能场景，并且这个场景是峰值业务场景。如果在你的项目中，有特定的业务日，那就要根据业务日的业务比例，重新做一个针对性的场景。</p><p>在满足了最开始提到的业务比例之后，我们不断增加压力，得到如下结果。</p><p>Statistics：</p><p><img src=\"https://static001.geekbang.org/resource/image/ee/5e/eead380bafe36897ac3825c42e40255e.png?wh=1036*294\" alt=\"\"></p><p>线程数：</p><p><img src=\"https://static001.geekbang.org/resource/image/14/17/14272cc783b99b70ad7a7312f59a3017.png?wh=855*474\" alt=\"\"></p><p>响应时间图：</p><p><img src=\"https://static001.geekbang.org/resource/image/59/a9/59fea1518fc8a7c390f9afcadc0437a9.png?wh=847*463\" alt=\"\"></p><p>总TPS图：</p><p><img src=\"https://static001.geekbang.org/resource/image/91/b1/915e2c4152ed0a000f2d0849939730b1.png?wh=847*425\" alt=\"\"></p><p>TPS细分图：</p><p><img src=\"https://static001.geekbang.org/resource/image/e9/1d/e9a3f7f16b982c4a3f411c509ec4781d.png?wh=849*461\" alt=\"\"></p><p>从上面的结果可以看到，业务4和业务5的响应时间，随着业务的增加而增加，这显然在容量上会影响整体的性能。</p><p>在具体的项目中，这就是我们要分析调优的后续方向。</p><p>还有一点请你注意，并不是说，看到了性能瓶颈就一定要解决，事实上，只要业务指标可控，不调优仍然可以上线。这一点也是很多做性能测试的人会纠结的地方，感觉看到这种有衰减趋势的，就一定要把它给调平了。其实这是没有必要的。我们做性能是为了让系统能支持业务，即使性能衰减已经出现，性能瓶颈也在了，只要线上业务没有超出容量场景的范围，那就仍然可以上线。</p><p>另外再说几句闲话，做技术的人容易钻进这样的牛角尖，觉得明显有问题，结果公司老板不支持去调优处理，显然是老板不重视性能测试，于是深感自己不得志，工作也无精打采的。这就没必要了，做性能不是为了炫技，应该为业务服务。</p><p>我们再说回来，从总TPS图上看到，在容量测试中，我们仍然测试到了系统的上限。这是一个好事情，让我们可以判断出线上的系统配置应该是什么样的。</p><p>在达到了系统上限时，我们来看一个业务的比例（请你注意，我是不赞同用表格来承载<strong>分析</strong>数据的，但是作为最终的结果，给老板看的时候，还是要尽量说得通俗易懂）。</p><p>如下所示：</p><p><img src=\"https://static001.geekbang.org/resource/image/6f/7e/6f9a16076f49bbe50b05080ff32bf27e.png?wh=1192*605\" alt=\"\"></p><p>我们可以从上面的数据中看到，业务目标TPS已经达到，响应时间也没有超过指标。很好，这个容量就完全满足业务需求了。</p><p>但是！</p><p>如果业务要扩展的话，有两个业务将会先受到影响，那就是业务4和业务5，因为它们的测试TPS和最大TPS最为接近。这是在我们推算业务扩展之后，再做架构分析时要重点考虑的内容。如果是在实际的项目中，这里会标记一个业务扩展风险。</p><p>请你注意，根据架构，性能测试组需要根据当前的测试状态整理架构的关键配置给线上系统做为参考，并且每个项目都会不一样，所以并不是固定的内容。我想做运维的看到这些值可能会更为亲切。</p><p>在这里，我给一个之前项目中的示例（由于属于项目交付类文档，所以这里只截取部分技术片断），如下所示：</p><p><img src=\"https://static001.geekbang.org/resource/image/4d/72/4da0eef402ea87ed100d7a0cbd548f72.png?wh=918*529\" alt=\"\"></p><p>配置整理的范围包括架构中所有和性能相关的技术参数。如下所示：</p><p><img src=\"https://static001.geekbang.org/resource/image/77/dd/77faa612395beb608598e00d2cd67fdd.png?wh=892*398\" alt=\"\"></p><p>当然，这时我们也是要分析系统的资源使用率的。在本文为了避免混乱，所以我没有提及。在实际的项目中，我们还是要分析的哦。</p><p>说完了混合容量场景之后，我们回忆一下之前说过的两个重点，我的混合业务场景是不是没有断？是不是保持了业务比例？</p><p>下面我们就该说一下稳定性场景了。</p><h2>稳定性性能场景</h2><p>我在<a href=\"https://time.geekbang.org/column/article/178068\">第1篇文章</a>就提到过，稳定性场景的时间长度取决于系统上线后的运维周期。</p><p>在这个示例中，业务+运维部门联合给出了一个指标，那就是系统要稳定运行一周，支持2000万业务量。运维团队每周做全面系统的健康检查。当然谁没事也不用去重启系统，只要检查系统是否还在健康运行即可。大部分时候运维是等着系统警告的。</p><p>那么针对前面给出的容量结果，容量TPS能达到3800（业务1到业务6的容量测试结果TPS总和）。所以稳定性场景时间应该是：20000000/3800 = 1.46小时。</p><p>下面是两小时的稳定性场景运行情况，我在这里只做一下\b大概的说明。</p><p><img src=\"https://static001.geekbang.org/resource/image/91/13/91c74d10fd0d2aea83f8efb3263a9113.png?wh=440*264\" alt=\"\"></p><p>Statistics：</p><p><img src=\"https://static001.geekbang.org/resource/image/4e/fa/4ee95d514972394c65fef32094bbdcfa.png?wh=1035*294\" alt=\"\"></p><p>线程数：</p><p><img src=\"https://static001.geekbang.org/resource/image/38/ff/38e144260b35f7793de82f9cbb0a7bff.png?wh=839*416\" alt=\"\"></p><p>响应时间图：</p><p><img src=\"https://static001.geekbang.org/resource/image/e9/5d/e9011fa5b77fbe88a1bcd90fda21cd5d.png?wh=851*427\" alt=\"\"></p><p>TPS细分图：</p><p><img src=\"https://static001.geekbang.org/resource/image/b1/a7/b14ba925ae99b95f22cb3e7144fd1ca7.png?wh=834*413\" alt=\"\"></p><p>总TPS图：</p><p><img src=\"https://static001.geekbang.org/resource/image/9c/61/9c6b4159f90b5c2c091ee8fb9d4c1b61.png?wh=846*410\" alt=\"\"></p><p>从上面几张图可以看出，业务2和业务3对总TPS的动荡产生了影响，但系统并没有报错。这种周期性的影响，你可以去分析具体的原因，由于本篇是场景篇，所以这里不写分析过程，直接给出原因，这种影响是参数化数据周期性使用所导致的，有些数据的关联记录数多，有些数据的关联记录数少，数据库中变化倒是不大，但由于TPS过高，表现出来得就比较明显了。</p><p>其他的业务都比较正常，也比较稳定，没有报错。</p><p>总体业务量达到27299712，也达到了稳定性业务量级的要求。</p><p>有一点，估计会有人提出疑问，你这个稳定性的总体TPS，看起来和容量测试场景中差不多呀，有必要用容量测试中的最大TPS来跑稳定性吗？</p><p>这里就涉及到另一个被误解的稳定性知识点了。有很多人在资料中看到，稳定性测试应该用最大TPS的80%来跑。看到没有，这似乎又是一个由28原则导致的惯性思维。</p><p>在这里我要澄清一下。在具体的项目实施过程中，完全没有必要遵守这些看似有道理，实则对具体项目没什么用的原则。</p><p>这个系统用最大TPS能跑下来，业务一直很正常，稳定性目标能达到，为什么不能用最大TPS来跑呢？本来稳定性场景就是为了知道会不会由于长时间处理业务而引发潜在瓶颈（像内存泄露是个典型问题）。至于用多大的TPS来运行，又有什么关系？只要系统在正常处理，资源没有出现问题，也没有报错，那这个场景就是有效的，目标也是能达到的。</p><p>所以说，这里的稳定性场景，完全合理。但是，你觉得这样就完了吗？当然没有，我们还有异常场景要做嘛。</p><h2>异常性能场景</h2><p>我之前有提到过，异常性能场景要看架构图，但是涉及到职业素养的问题，我这里只能画个示意图来说明此系统的架构，以此来实现逻辑的完整性。示意图如下所示：</p><p><img src=\"https://static001.geekbang.org/resource/image/2f/a8/2f7595803a4f35fdf5c0b566c30a93a8.jpg?wh=2391*1597\" alt=\"\"></p><p>这是一个完全按生产架构来的示意图，在真实的测试过程中，也是这样搭建的。在这里有六个业务区域（包含基础架构区），也有DMZ区。</p><p>其实在每个区域中，根据架构中用到的技术组件，异常测试都有细化的场景设计，而在这里，我给你展示一个全局架构层的场景，用来说明异常场景。</p><p>这里运行的场景是：用容量场景中最大TPS的50%来做异常的压力背景。</p><p>咦，是不是会有人问：这里为什么只用50%了？稳定性性能场景不是还用100%的压力背景嘛？</p><p>这里我就要再说一遍，看目标！异常性能场景的目标是为了判断所要执行的操作对系统产生的影响，如果TPS不稳定，怎么能看出来异常点？当然是稳定无抖动的TPS是最容易做出异常动作产生的影响了。所以这里的50%是为了得到更为平稳的TPS曲线，以便做出正确的判断。</p><p>下面我们就要看异常场景的设计了。这是一个大的异常场景。</p><p>我分别对各区域中的业务应用服务器、数据库服务器以及基础架构服务器做异常操作（为了方便理解，下文我直接用kill来说明，其实在操作中，有些不是直接kill，像断电、断网卡的手段也都可以用，取决于如何操作更为准确）。</p><p>下面是具体的操作步骤和时间记录。</p><p>第一部分：业务应用服务器。停下如下区域的一半应用服务器，查看TPS、响应时间及其他服务器压力。</p><ol>\n<li>kill 区域三：17:02；</li>\n<li>kill 区域一：17:15；</li>\n<li>kill 区域二：17:20；</li>\n<li>kill 区域五：17:25。</li>\n</ol><p>第二部分：基础架构服务器。停下一半的基础架构主机，查看TPS、响应时间及另外主机压力的恢复情况。</p><p>kill 一台基础架构主机中的某个服务的某个节点：17:30。</p><p>第三部分：数据库服务器。停下master数据库，查看切换时间，slave的压力及TPS的恢复情况。</p><ol>\n<li>reboot DB-20：17:36。6分钟之后恢复；</li>\n<li>reboot DB-26：18:07。1分钟左右恢复；</li>\n<li>reboot DB-2：18:20。2分钟之后恢复。</li>\n</ol><p>第四部分：启动master数据库。</p><p>第五部分：启动被停的应用服务。</p><ol>\n<li>start 区域五：18:28；</li>\n<li>start 区域三：18:33；</li>\n<li>start 区域一：18:38；</li>\n<li>start 区域二：18:43。</li>\n</ol><p>第六部分：启动被停基础架构主机中的某个服务的某个节点。</p><p>start 基础架构主机中的某个服务的某个节点：18:48。</p><p>根据上面的步骤，这里我放出TPS图来做分析。</p><p><img src=\"https://static001.geekbang.org/resource/image/2c/d8/2caa1b0dd37053c673fa0f4f86a935d8.png?wh=855*425\" alt=\"\"></p><p>从上图中的TPS趋势可以看出，停掉一半的区域三应用服务器后，对TPS有明显的影响。为啥呢？</p><p>我们来看一下细分的TPS图：</p><p><img src=\"https://static001.geekbang.org/resource/image/1e/56/1efca032f3dc2404d9087de1c51d1256.png?wh=1043*481\" alt=\"\"></p><p>从图上看，并不是所有的TPS都在步骤1的时候受到了影响。受影响的只有业务2和业务3。显然只有业务2和业务3走到了这个区域。但是这仍然是一个BUG！！！</p><p>理论上，用一半的压力，停了一半的服务器，即便当前正在运行在被停掉的服务器上的session受到了影响，那TPS也应该会恢复的，但是TPS没恢复。所以先这里提个BUG。</p><p>另外，停掉区域一、二、五的一半应用服务器，影响不大，TPS有些许下降，但并没有报错，这个结果还可以接受。</p><p>停掉基础架构服务器时，TPS有下降，但很快恢复了，非常好。</p><p>在步骤6时，记录的信息是在6分钟之后恢复的，这个时间有点久了。我在这里拆开TPS细节来看一下。</p><p><img src=\"https://static001.geekbang.org/resource/image/63/f7/63e152d94df1d51d49b8493170b95df7.png?wh=1064*488\" alt=\"\"></p><p>显然这段报错得比较多，6分钟，一个master库切换过去。这怎么能接受呢？报BUG！！！</p><p>另外，步骤8中，TPS显然下降到底了。还好时间并不长，在2分钟后恢复。这个可以报BUG。为什么说是<strong>可以</strong>报呢？因为这个时间并不算长。这里就有一个预期的问题。通常情况下，我们做DB master的异常切换，在这个架构中，是期望在1分钟内完成切换的。在我这个场景中，最快的数据库master切换是40s。</p><p>请你注意，我看到有些厂商说数据库可以达到秒级切换，这种说法未免过于空泛。如果把”不到1分钟“称为秒级的话，那就欲盖弥彰了。我理解的秒级切换是一秒内，而不是单位是秒就可以。</p><p>通常这种1秒内切换说的都只是数据库实例的前面一层，有叫Plus的，有叫Proxy的，并且说的不是从出现异常，到判断切换的过程。而是说从切换动作开始到结束。另外，这个秒级切换也是有背景条件的。我们不要看广告，要看实际的操作结果。</p><p>请注意，上面提到的容量场景和异常场景，都只是项目中的一个场景。其实在这个项目中，我还有很多其它的容量场景和异常场景。从场景设计上来说，这些场景都大同小异，但都需要在大量的调研分析之后才能设计得出来。</p><h2>总结</h2><p>在对基准场景、容量场景、稳定性场景和异常场景做了详细的，有逻辑的描述之后，相信你已经能体会到场景的博大精深了。</p><p>在本篇中，由于字数有限，我只对场景的具体执行过程中的关键点做了细致地描述。但是场景绝对不止这些哦，还有很多细节的内容。</p><p>同时，为了让理解更为清晰，这里我只描述了场景本身，场景包括的其他内容，比如说参数设计、监控设计等等，在本篇中都没有描述。</p><p>从这里，你大概能明白我说的场景对性能有多么重要了吧。</p><p>希望今天的这篇文章能给你在设计性能场景时提供参考。</p><h2>思考题</h2><p>看完了今天的文章，你能说一下性能场景应该按什么样的逻辑设计吗？以及在稳定性场景中，为什么不用最大TPS的80%来做？</p><p>欢迎你在评论区写下你的思考，也欢迎把这篇文章分享给你的朋友或者同事，一起交流一下。</p>","neighbors":{"left":{"article_title":"12丨性能场景：做参数化之前，我们需要考虑什么？","id":187551},"right":{"article_title":"14丨性能测试场景：如何理解业务模型？","id":189010}},"comments":[{"had_liked":false,"id":176571,"user_name":"杜艳","can_delete":false,"product_type":"c1","uid":1168516,"ip_address":"","ucode":"8D46A8CF33E9C7","user_header":"https://static001.geekbang.org/account/avatar/00/11/d4/84/7f584cb2.jpg","comment_is_top":false,"comment_ctime":1581089524,"is_pvip":false,"replies":[{"id":"68598","content":"这个专栏没有规划要讲jmeter的基本使用，所以不清楚你要讲的jmeter具体功能是什么，如果呼声高的话，后面，我可以加餐。","user_name":"作者回复","comment_id":176571,"uid":"1785562","ip_address":"","utype":1,"ctime":1581165587,"user_name_real":"高楼(Zee)"}],"discussion_count":13,"race_medal":0,"score":"267869061876","product_id":100042501,"comment_content":"还是不会做这些结果图啊，能对应jmeter讲解具体点吗？知道怎么分析了，不知道这些数据图怎么来的。","like_count":62,"discussions":[{"author":{"id":1281460,"avatar":"https://static001.geekbang.org/account/avatar/00/13/8d/b4/ff82483d.jpg","nickname":"邵俊达","note":"","ucode":"4B7DACE6DBCF95","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":260208,"discussion_content":"能否给出一些  Jmeter 的真实配置例子结合图可能会更清晰🙏","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1588854910,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":483145,"discussion_content":"这个专栏没有规划要讲jmeter的基本使用，所以不清楚你要讲的jmeter具体功能是什么，如果呼声高的话，后面，我可以加餐。","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1581165587,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1165199,"avatar":"https://static001.geekbang.org/account/avatar/00/11/c7/8f/fcfaf45a.jpg","nickname":"莫西 👫 小妞儿 👼 🎵","note":"","ucode":"553BF89ED22111","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":294859,"discussion_content":"可以再开个专栏，深挖一下jmeter的使用","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1596016690,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1787221,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/45/55/97c25ffc.jpg","nickname":"薄荷微凉ζ","note":"","ucode":"F4F7508F515E9F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":292205,"discussion_content":"一样不知道这个图是什么样的脚本跑出来的，希望老师能补充下，谢谢","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1595140530,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2313694,"avatar":"https://static001.geekbang.org/account/avatar/00/23/4d/de/b4dda40a.jpg","nickname":"大辉","note":"","ucode":"B2A2A453C822D6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":330400,"discussion_content":"能否告诉下出这些结果图，所使用的插件吗？","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1606615969,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1737929,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/84/c9/9048f88e.jpg","nickname":"big rock","note":"","ucode":"2C9B07F43996A4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":296696,"discussion_content":"同样不知道这些数据图怎么配置才能生成","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1596624605,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1964073,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJtibQC84qHBbB3SzL1ibBL2ichK3MOSJtX1O2zIuCvb2PaH2Qw5xRmZA2lkjPxZficPiavS5Cp3BfRugA/132","nickname":"Geek_40e091","note":"","ucode":"4F492AD120E0D0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":291087,"discussion_content":"能否给出一些 Jmeter 的真实配置例子结合图可能会更清晰🙏","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1594704377,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1145583,"avatar":"https://static001.geekbang.org/account/avatar/00/11/7a/ef/9168ae82.jpg","nickname":"Watts","note":"","ucode":"A3D0EBC00D477C","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":270760,"discussion_content":"同样不知道这些数据图怎么配置才能生成\n","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1590048683,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2542533,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/BfM3XeuMIlfwFcWRiaGmHrTSLo0qiaWDXXF0bhrqacux2rxCDDW9AEAmS4WUOFf6WHoctnJeicicIcWzLUNUBXDb6g/132","nickname":"怡然","note":"","ucode":"604A8E444C51AB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":542678,"discussion_content":"1","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640827371,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1644029,"avatar":"https://static001.geekbang.org/account/avatar/00/19/15/fd/15d738bc.jpg","nickname":"克力巧","note":"","ucode":"04613D2ED6209B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":393352,"discussion_content":"老师这些图看着一目了然，希望老师能出🙏","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631370811,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2739062,"avatar":"https://static001.geekbang.org/account/avatar/00/29/cb/76/02994050.jpg","nickname":"emily","note":"","ucode":"557A3987DBAD69","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":389832,"discussion_content":"+1","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629446379,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1786398,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/42/1e/50607f55.jpg","nickname":"Susu","note":"","ucode":"C25E77AAE46110","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":385356,"discussion_content":"+1","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627011829,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1714144,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/27/e0/da87b444.jpg","nickname":"奔跑的蜗牛","note":"","ucode":"2D9AAF94316528","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":331703,"discussion_content":"+1","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606957020,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":187275,"user_name":"Coby","can_delete":false,"product_type":"c1","uid":1355972,"ip_address":"","ucode":"A416F2067760C2","user_header":"https://static001.geekbang.org/account/avatar/00/14/b0/c4/b2fa127f.jpg","comment_is_top":false,"comment_ctime":1584072836,"is_pvip":false,"replies":[{"id":"72336","content":"1. 不知道你看的是什么书籍，从我的理念上来说，那是绝对错误的理念。像你说的：<br>“基准性能场景是使用单线程做，目的是为了获取单线程时TPS值。”<br>这个都不用测试呀，脚本直接跑一遍，看一下响应时间，就知道TPS了。这还能叫场景这么复杂的词吗？这就是验证一下脚本而已。<br><br>”容量性能场景是按照需测试的业务一个个做，找出最大TPS、线程数或瓶颈点；混合性能场景是按照业务比例（这个比例大多数是拍脑袋决定的）做；“<br>这个听起来似乎没有什么不同的逻辑。但是你说的”容量性能场景“和”混合性能场景“，从词的本身含义上来说，你能区分谁做什么吗？我觉得容量性能测试这个词就可以是混合的，按你这样的说法，我只能理解为”容量性能场景“其实就是单业务的最大TPS场景。如果这样的话“容量”这个词就完全不是它本来该有的含义了。而“混合性能场景”是在表达生产场景的含义，要非这么说也没什么，只是字不同。<br>只是在我的理念中：基准就是测试单业务的最大TPS；容量就是测试生产场景的所有业务混合的场景。这样清晰又简单，字面意思就能理解。<br><br>“稳定性场景一般是按照时间长度，比如连续不断8小时、24小时、3x24小时等等。”<br>在我看来，这样设置时间长度，必然不对。最简单的来说，你测试了24小时的场景，如果让你回答“系统什么时候会死”或者“系统能不能运行一个月”，可以回答得了吗？在我的经历中，我没看到有人敢拍着胸脯保证的。<br>不是因为时间长度不够，而是因为没有逻辑推算判断就直接拍了一个时间，自己也拿不准。<br>所以这样配置时间的思路必然是不对的。<br><br>2. 这个问题，我觉得好奇怪，很多人问。做为一个性能团队，业务比例也不是自己定的，为什么要把这个责任揽到自己头上呢？<br>做为一个新开发的系统，如果连参照物都没有，那系统从哪来的呢？项目中没有一个人是有类似项目经验的吗？还是都不敢承担责任呢？就算是从线下搬到线上的系统也必然是有线下业务统计数据的呀。<br>在我的经验中，如果所有人都没有给的话。那我肯定会给出一个最傻瓜的比例，那就是所有业务都是1：1。这时你拿着1：1的业务比例跟别人讨论时，别人就会有意见了：“你这个1：1配置不合理呀？！” 好吧，那不合理的话，你为什么不给一个？这时肯定会有人说，这个业务应该是比一点，那个应该少一点。你看，这时候是不是业务比例就开始慢慢要形成了。<br>不过还是奉劝做性能的人，不要背这个锅。<br><br>3. 异常场景肯定是从小做到大的。每个区域中的每个组件，甚至到参数，我们都要做的。只是在一个文章中没法尽述，我只能举一个最复杂的最大的例子。如果全写出来，我估计还得来30多篇。","user_name":"作者回复","comment_id":187275,"uid":"1785562","ip_address":"","utype":1,"ctime":1584113359,"user_name_real":"高楼(Zee)"}],"discussion_count":2,"race_medal":0,"score":"130433091716","product_id":100042501,"comment_content":"高老师，您好。您的文章让我受益匪浅。这篇文章中有几个问题：<br>1.不同场景测试方法的问题。以前看到其他的性能书籍中介绍，基准性能场景是使用单线程做，目的是为了获取单线程时TPS值。容量性能场景是按照需测试的业务一个个做，找出最大TPS、线程数或瓶颈点；混合性能场景是按照业务比例（这个比例大多数是拍脑袋决定的）做；稳定性场景一般是按照时间长度，比如连续不断8小时、24小时、3x24小时等等。这样的做法不对吗？<br>2.针对一个新开发的系统，没有上线使用过，不管是客户方的业务部门或者我方的产品经理均无法给出业务比例，这时这么确定业务比例呢？<br>3.异常性能场景一般很少会被提及，渐渐大家都忘了这个场景。做这种场景的时候不用考虑单独一个区域中断的情况吗？比如您示意图中区域一、二、三、五都是应用服务器，只中断区域一中一半服务器后的TPS、响应时间情况。","like_count":30,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":487051,"discussion_content":"1. 不知道你看的是什么书籍，从我的理念上来说，那是绝对错误的理念。像你说的：\n“基准性能场景是使用单线程做，目的是为了获取单线程时TPS值。”\n这个都不用测试呀，脚本直接跑一遍，看一下响应时间，就知道TPS了。这还能叫场景这么复杂的词吗？这就是验证一下脚本而已。\n\n”容量性能场景是按照需测试的业务一个个做，找出最大TPS、线程数或瓶颈点；混合性能场景是按照业务比例（这个比例大多数是拍脑袋决定的）做；“\n这个听起来似乎没有什么不同的逻辑。但是你说的”容量性能场景“和”混合性能场景“，从词的本身含义上来说，你能区分谁做什么吗？我觉得容量性能测试这个词就可以是混合的，按你这样的说法，我只能理解为”容量性能场景“其实就是单业务的最大TPS场景。如果这样的话“容量”这个词就完全不是它本来该有的含义了。而“混合性能场景”是在表达生产场景的含义，要非这么说也没什么，只是字不同。\n只是在我的理念中：基准就是测试单业务的最大TPS；容量就是测试生产场景的所有业务混合的场景。这样清晰又简单，字面意思就能理解。\n\n“稳定性场景一般是按照时间长度，比如连续不断8小时、24小时、3x24小时等等。”\n在我看来，这样设置时间长度，必然不对。最简单的来说，你测试了24小时的场景，如果让你回答“系统什么时候会死”或者“系统能不能运行一个月”，可以回答得了吗？在我的经历中，我没看到有人敢拍着胸脯保证的。\n不是因为时间长度不够，而是因为没有逻辑推算判断就直接拍了一个时间，自己也拿不准。\n所以这样配置时间的思路必然是不对的。\n\n2. 这个问题，我觉得好奇怪，很多人问。做为一个性能团队，业务比例也不是自己定的，为什么要把这个责任揽到自己头上呢？\n做为一个新开发的系统，如果连参照物都没有，那系统从哪来的呢？项目中没有一个人是有类似项目经验的吗？还是都不敢承担责任呢？就算是从线下搬到线上的系统也必然是有线下业务统计数据的呀。\n在我的经验中，如果所有人都没有给的话。那我肯定会给出一个最傻瓜的比例，那就是所有业务都是1：1。这时你拿着1：1的业务比例跟别人讨论时，别人就会有意见了：“你这个1：1配置不合理呀？！” 好吧，那不合理的话，你为什么不给一个？这时肯定会有人说，这个业务应该是比一点，那个应该少一点。你看，这时候是不是业务比例就开始慢慢要形成了。\n不过还是奉劝做性能的人，不要背这个锅。\n\n3. 异常场景肯定是从小做到大的。每个区域中的每个组件，甚至到参数，我们都要做的。只是在一个文章中没法尽述，我只能举一个最复杂的最大的例子。如果全写出来，我估计还得来30多篇。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584113359,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2074429,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/a7/3d/e93de54b.jpg","nickname":"fd","note":"","ucode":"FED6AA6268F1A4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":369536,"discussion_content":"我觉得那个写基准场景用单线程可能没有理解清楚表达不到位，看最大TPS没错，但是单线程不一定能跑到最大。我们说基准场景往往都是线程连续递增看","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619068753,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":187657,"user_name":"kubxy","can_delete":false,"product_type":"c1","uid":1514411,"ip_address":"","ucode":"EDA317D303CC42","user_header":"https://static001.geekbang.org/account/avatar/00/17/1b/ab/a5f88914.jpg","comment_is_top":false,"comment_ctime":1584185446,"is_pvip":false,"replies":[{"id":"72462","content":"工具操作类的，觉得在度娘上能找到，所以没有写。不然有些有经验的就认为专栏过于基础了。<br>你的这个可以在jmeter中用throughput controller实现。直接输入比例值就可以。如果具体不会操作，可以在微信上找我。","user_name":"作者回复","comment_id":187657,"uid":"1785562","ip_address":"","utype":1,"ctime":1584242342,"user_name_real":"高楼(Zee)"}],"discussion_count":7,"race_medal":0,"score":"40238891110","product_id":100042501,"comment_content":"在容量场景中，您说要控制比例。这里控制的是什么的比例？线程数吗？您这里没有给出Jmeter的配置（具体环境的上下文缺失），很容易导致理解上的误区。","like_count":9,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":487188,"discussion_content":"工具操作类的，觉得在度娘上能找到，所以没有写。不然有些有经验的就认为专栏过于基础了。\n你的这个可以在jmeter中用throughput controller实现。直接输入比例值就可以。如果具体不会操作，可以在微信上找我。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584242342,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1514411,"avatar":"https://static001.geekbang.org/account/avatar/00/17/1b/ab/a5f88914.jpg","nickname":"kubxy","note":"","ucode":"EDA317D303CC42","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":205484,"discussion_content":"老师您可能误解了我的意思，我说的不是一步步的详细配置过程，就拿容量场景来说，两三个截图就行了，一个是测试计划栏整个元件的截图，一个是单个线程组内核心元件的截图，然后点出重点即可。\n提问之前我已经Google过了，并没有得到满意的答案，我觉得还是因为网上大多是纯工具的讲解没有结合具体的场景来谈。\n您这里有场景，但缺少了工具的核心细节，像我这样的新手，在实际操作时就犯难了","likes_number":9,"is_delete":false,"is_hidden":false,"ctime":1584317759,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1736094,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/7d/9e/dd0a6024.jpg","nickname":"Judy","note":"","ucode":"E1F38F79A9B110","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1514411,"avatar":"https://static001.geekbang.org/account/avatar/00/17/1b/ab/a5f88914.jpg","nickname":"kubxy","note":"","ucode":"EDA317D303CC42","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":382947,"discussion_content":"同意，老师确实讲的不够细致","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1625804019,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":205484,"ip_address":""},"score":382947,"extra":""}]},{"author":{"id":1393840,"avatar":"https://static001.geekbang.org/account/avatar/00/15/44/b0/c196c056.jpg","nickname":"SeaYang","note":"","ucode":"F44622A44CE8B9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":320921,"discussion_content":"这个比例其实就是控制各个业务的tps比例，比如说，一个电商系统，每秒有一万人在浏览商品，同时每秒有一千人在下单，那么浏览商品与下单这两个业务的tps比例是10000:1000，这个可以通过两个插件来设置，一个是比例控制器，一个是目标tps控制器，假如说你是在一个线程组里面配置所有的业务的话，那么比例控制器和目标tps控制器需要一起用才能控制各个业务的目标tps，如果每个业务单独一个线程组的话，那么只需要目标tps控制器了。对于线程组设置多少线程数，通过目标tps与最大tps时的平均响应时间就可以算出来了，并且线程数可以适当大一点，保证能够满足达到目标tps所需要的压力","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1604503188,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2421802,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ermm498iaT8hp4xmMu51AGoq20UOEwhZeE0wuHkaEsPQ461x1sib0WPwyV5ypQeYJZQ906piaQ4icf9eQ/132","nickname":"Geek_b76638","note":"","ucode":"858FB196CDFF7E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1393840,"avatar":"https://static001.geekbang.org/account/avatar/00/15/44/b0/c196c056.jpg","nickname":"SeaYang","note":"","ucode":"F44622A44CE8B9","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":365349,"discussion_content":"(对于线程组设置多少线程数，通过目标tps与最大tps时的平均响应时间就可以算出来了) 您好，这个没太看懂。。业务6目标tps是442，最大响应时间是16毫秒，算出来用户数应该在7左右？但是图里最大压力加到了90，这个并发线程数怎么算的呀。。。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617780798,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":320921,"ip_address":""},"score":365349,"extra":""}]},{"author":{"id":2285679,"avatar":"https://static001.geekbang.org/account/avatar/00/22/e0/6f/8610fa57.jpg","nickname":"孙灿","note":"","ucode":"FF63EF87003ABB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":328308,"discussion_content":"啊，我也有这个疑惑，终于找到答案了。虽然文章不讲工具的使用，但是建议老师在讲的时候提一句，是通过工具控制的tps，实现了业务比例的控制，具体怎么使用的工具，可以私下网上检索~要不然看得糊里糊涂的，不知道怎么忽然就控制好比例了~","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1606122501,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1514411,"avatar":"https://static001.geekbang.org/account/avatar/00/17/1b/ab/a5f88914.jpg","nickname":"kubxy","note":"","ucode":"EDA317D303CC42","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":205492,"discussion_content":"另外，对于工具的操作方面，您是否有收藏一些网上优秀的资源，能否分享一下","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584317993,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":176862,"user_name":"Geek_f93234","can_delete":false,"product_type":"c1","uid":1769504,"ip_address":"","ucode":"1E5DC903A5429E","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJGXndj5N66z9BL1ic9GibZzWWgoVeWaWTL2XUnCYic7iba2kAEvN9WfjmlXELD5lqt8IJ1P023N5ZWicg/132","comment_is_top":false,"comment_ctime":1581201043,"is_pvip":false,"replies":[{"id":"68683","content":"一个系统只有一种情况会需要像你这样来设计场景，就是系统的稳定性只和时间和关，和业务积累量无关。<br>我说的是用计算业务积累量的角度。","user_name":"作者回复","comment_id":176862,"uid":"1785562","ip_address":"","utype":1,"ctime":1581252810,"user_name_real":"高楼(Zee)"}],"discussion_count":4,"race_medal":1,"score":"35940939411","product_id":100042501,"comment_content":"老师，文中的这段话：在这个示例中，业务 + 运维部门联合给出了一个指标，那就是系统要稳定运行一周，支持 2000 万业务量。运维团队每周做全面系统的健康检查。当然谁没事也不用去重启系统，只要检查系统是否还在健康运行即可。大部分时候运维是等着系统警告的。那么针对前面给出的容量结果，容量 TPS 能达到 3800（业务 1 到业务 6 的容量测试结果 TPS 总和）。所以稳定性场景时间应该是：20000000&#47;3800 = 1.46 小时。<br>不明白稳定性场景时间为什么要这么计算？能详细分析一下吗？<br>还有我之前看到的很多都是这么来确定稳定性场景的执行时间的：一般来说，对于正常工作日（8小时）运行的系统，至少应该能保证系统稳定运行8小时以上，对于7*24运行的系统，至少应该能够保证系统稳定运行24小时以上。<br>","like_count":8,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":483229,"discussion_content":"一个系统只有一种情况会需要像你这样来设计场景，就是系统的稳定性只和时间和关，和业务积累量无关。\n我说的是用计算业务积累量的角度。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581252810,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":2,"child_discussions":[{"author":{"id":1269156,"avatar":"https://static001.geekbang.org/account/avatar/00/13/5d/a4/2e4b6d33.jpg","nickname":"素还真","note":"","ucode":"9ABA456355F7E3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":558017,"discussion_content":"业务的量2000万指的啥？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1648044218,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":483229,"ip_address":""},"score":558017,"extra":""},{"author":{"id":1410056,"avatar":"https://static001.geekbang.org/account/avatar/00/15/84/08/c88a9683.jpg","nickname":"hello. world","note":"","ucode":"3579A0BE22C0A8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":571698,"discussion_content":"根据老师的描述，我的理解如下：\n1、时间维度即所谓的二八原则，根据系统最大Tps或80% tps长时间运行8小时，7*24小时......，通过长时间的运行，来衡量系统的稳定性。\n2、计算业务积累量指在有明确业务访问量或指标的基础上进行换算，计算在多少业务量和tps的情况下稳定性压测多长时间，2000 万业务量就是系统最终要达到的访问量或者成交量，这个业务量取决于系统的实际情况。\n\n举个例子：\n表格统计的最大tps是14530*80%=11624，按1天8小时测试，执行的samples远超2000万业务量，大大超出了预期，测试结果看起来也是有效的，但是又耗时又耗人力。假设80%的tps只有100tps，100*8*3600=288万，运行1*8小时最终产生的业务量小于2000万，那稳定性测试的结果就不是系统所要支持的2000万业务量下的测试结果，只能拉长时间线直到系统生成2000万的业务量，究竟要跑1*8，1*24，还是7*24心里都没底，而且系统有insert、query查询产生的业务量又不一样。大多数情况是没有给出系统支撑的业务量的，只能拍脑袋二八原则就成了万精油大法。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1652353666,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":483229,"ip_address":""},"score":571698,"extra":""}]},{"author":{"id":1269156,"avatar":"https://static001.geekbang.org/account/avatar/00/13/5d/a4/2e4b6d33.jpg","nickname":"素还真","note":"","ucode":"9ABA456355F7E3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":558016,"discussion_content":"业务的量2000万指的啥？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1648044182,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":171222,"user_name":"Geek_65c0a2","can_delete":false,"product_type":"c1","uid":1785428,"ip_address":"","ucode":"3BA041930AAA78","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/ibaGFsFicWRKlUjhGsw4ibm9eGLQHrmlwxia1W28yqDUNbao2YD1icAQ07ux3mDZviaZACicsicoibrCndCV1kStN3PuPYw/132","comment_is_top":false,"comment_ctime":1578883809,"is_pvip":false,"replies":[{"id":"66377","content":"走的路径不一样。单业务涉及到的机器也没有容量场景涉及的机器多。","user_name":"作者回复","comment_id":171222,"uid":"1785562","ip_address":"","utype":1,"ctime":1578886236,"user_name_real":"高楼(Zee)"}],"discussion_count":1,"race_medal":0,"score":"27348687585","product_id":100042501,"comment_content":"高老师，我有个小白问题哈。为什么容量测试的结果会比单业务测的结果高呢？😄","like_count":6,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481265,"discussion_content":"走的路径不一样。单业务涉及到的机器也没有容量场景涉及的机器多。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578886236,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":285255,"user_name":"😂","can_delete":false,"product_type":"c1","uid":2318485,"ip_address":"","ucode":"59C0AE9D557C77","user_header":"https://static001.geekbang.org/account/avatar/00/23/60/95/ef2af905.jpg","comment_is_top":false,"comment_ctime":1616698268,"is_pvip":false,"replies":[{"id":"103547","content":"这个之所以没有固定的说法是因为它本身就没法固定。<br>要根据实际的业务场景去做相应的调整才可以。<br>通常我的做法就是：<br>1. 先确定单线程时响应时间是多少。假设响应时间在10毫秒以下，我会一个一个线程增加，因为tps在这时增加的很快。这就确定了梯度。<br>2. 我会用二分法确定系统的上限。比如说，我先加100个压力线程，看系统的tps是多少，如果这时tps没到上限，就用200个压力线程，以此类推。但如果在100个压力线程时就已经达到了tps上限，我会降到50压力线程再看，直到得到合适的压力线程为止。这就确定了压力工具中的线程数。<br>3. 持续时间在容量场景中，对我来说，我只要看到稳定运行一段时间即可，通常我会用一小时左右的持续时间。 ","user_name":"作者回复","comment_id":285255,"uid":"1785562","ip_address":"","utype":1,"ctime":1616731480,"user_name_real":"高楼(Zee)"}],"discussion_count":3,"race_medal":0,"score":"23091534748","product_id":100042501,"comment_content":"老师，您好，目前最大的疑问就是我应该设置多少个线程去压测，递增策略和递交策略，持续时间，这些该如何确定啊？","like_count":5,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":517628,"discussion_content":"这个之所以没有固定的说法是因为它本身就没法固定。\n要根据实际的业务场景去做相应的调整才可以。\n通常我的做法就是：\n1. 先确定单线程时响应时间是多少。假设响应时间在10毫秒以下，我会一个一个线程增加，因为tps在这时增加的很快。这就确定了梯度。\n2. 我会用二分法确定系统的上限。比如说，我先加100个压力线程，看系统的tps是多少，如果这时tps没到上限，就用200个压力线程，以此类推。但如果在100个压力线程时就已经达到了tps上限，我会降到50压力线程再看，直到得到合适的压力线程为止。这就确定了压力工具中的线程数。\n3. 持续时间在容量场景中，对我来说，我只要看到稳定运行一段时间即可，通常我会用一小时左右的持续时间。 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616731480,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1168516,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d4/84/7f584cb2.jpg","nickname":"杜艳","note":"","ucode":"8D46A8CF33E9C7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":411038,"discussion_content":"第二个回复中说如果这时tps没到上限， 我咋知道tps是否到上限了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635836375,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2960900,"avatar":"https://static001.geekbang.org/account/avatar/00/2d/2e/04/59e7067c.jpg","nickname":"欧oyxp","note":"","ucode":"CDACAD7C7A4FD1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1168516,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d4/84/7f584cb2.jpg","nickname":"杜艳","note":"","ucode":"8D46A8CF33E9C7","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":559954,"discussion_content":"可以看下老师的第六篇文章有说明tps的上限的过程，只要每线程每秒的 TPS 开始变少，就意味着性能瓶颈已经出现了。但是瓶颈出现之后，并不是说服务器的处理能力（这里我们用 TPS 来描述）会下降，应该说 TPS 仍然会上升，在性能不断衰减的过程中，TPS 就会达到上限","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649080145,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":411038,"ip_address":""},"score":559954,"extra":""}]}]},{"had_liked":false,"id":187689,"user_name":"kubxy","can_delete":false,"product_type":"c1","uid":1514411,"ip_address":"","ucode":"EDA317D303CC42","user_header":"https://static001.geekbang.org/account/avatar/00/17/1b/ab/a5f88914.jpg","comment_is_top":false,"comment_ctime":1584193279,"is_pvip":false,"replies":[{"id":"72486","content":"另一评论中已回复。<br>","user_name":"作者回复","comment_id":187689,"uid":"1785562","ip_address":"","utype":1,"ctime":1584249241,"user_name_real":"高楼(Zee)"}],"discussion_count":1,"race_medal":0,"score":"18764062463","product_id":100042501,"comment_content":"老师，性能场景中，比例控制这一块您能否结合jmeter等性能工具的具体设置来讲解？这里直接上测报报告，让我们这些性能测试新手理解起来很困难。总有一种是懂非懂的感觉","like_count":4,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":487202,"discussion_content":"另一评论中已回复。\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584249241,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":171629,"user_name":"rainbowzhouj","can_delete":false,"product_type":"c1","uid":1786797,"ip_address":"","ucode":"F90723B1777EA4","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Ce5DHQHpoeWBDMtibPAO9QKfRgRz9RvA3jgibMfJnyIXmOgZulVW02NYtn6ibF2fGNMQZ7z6LopHrknqB6MAzP1pw/132","comment_is_top":false,"comment_ctime":1578982065,"is_pvip":false,"replies":[{"id":"66639","content":"理解的挺正确。","user_name":"作者回复","comment_id":171629,"uid":"1785562","ip_address":"","utype":1,"ctime":1579047446,"user_name_real":"高楼(Zee)"}],"discussion_count":1,"race_medal":0,"score":"18758851249","product_id":100042501,"comment_content":"高老师，您好。以下是我对两个思考题的回答。<br>第一个问题：<br>性能场景设计前应了解实际场景中对应业务的目标值。然后查看对应业务的组成，采用先局部后整体的思想进行性能场景设计。具体而言，就如文章中所述先将单业务的基准性能测试结果得出，再进行混合业务的性能测试。值得一提的是通常情况下时间是稀缺资源，所以进行性能场景设计时，应时刻谨记以终为始的理念，得出结果后判断是否能满足业务目标。<br>第二个问题：<br>二八法则好比万金油，换句话说就是可有可无，进行稳定性场景的测试就是为了知道会不会由于长时间处理业务而引发潜在瓶颈。此时已经了解了对应业务的目标值，那么只要系统在正常处理，资源没有出现问题，也没有报错下，业务目标能满足，而且更确信，这样会更好。","like_count":4,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481442,"discussion_content":"理解的挺正确。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579047446,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":171491,"user_name":"村夫","can_delete":false,"product_type":"c1","uid":1434041,"ip_address":"","ucode":"B70D4E421A281B","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erdesQy0moaicYTicoHRQXzbmJm15wohb77qD1OdbuSqPCSUerbcZHzxJJunfmEhTx4kBLxbGaxQ9iag/132","comment_is_top":false,"comment_ctime":1578930695,"is_pvip":false,"replies":[{"id":"66502","content":"场景不断，就是从低到高线程递增。<br>业务1到6，都是有业务含义的，后端会有很多个接口。<br>控制业务比例的过程通常是这样的：1. 先是拿线程数和TPS、响应时间来计算业务比例来做；2. 当运行过程中出来业务比例偏差时，就调整线程数；3. 在jmeter中可以有控制吞吐量的控制器。<br>业务比例设计的后面有一篇是专门描述这个的。<br>最大TPS，我是通过曲线图的一段来做计算的，你要是“约摸”这个词，也不是不可以。哈哈。","user_name":"作者回复","comment_id":171491,"uid":"1785562","ip_address":"","utype":1,"ctime":1578975171,"user_name_real":"高楼(Zee)"}],"discussion_count":1,"race_medal":0,"score":"18758799879","product_id":100042501,"comment_content":"老师，有几个问题和想法。首先场景不断这个应该怎么理解？其次是老师例子中的业务一到六是一个接口还是多个接口？再次是控制业务比例，如果可以拿jmeter举例子会好很多，让我们能把您的想法落地，前面那几篇工具篇能匀一篇说业务比例如何设计该多好。最后是容量场景下最大tps应该怎么看？我看您的图都是曲线图，难道是看曲线图约摸着得出一个结果？","like_count":4,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481378,"discussion_content":"场景不断，就是从低到高线程递增。\n业务1到6，都是有业务含义的，后端会有很多个接口。\n控制业务比例的过程通常是这样的：1. 先是拿线程数和TPS、响应时间来计算业务比例来做；2. 当运行过程中出来业务比例偏差时，就调整线程数；3. 在jmeter中可以有控制吞吐量的控制器。\n业务比例设计的后面有一篇是专门描述这个的。\n最大TPS，我是通过曲线图的一段来做计算的，你要是“约摸”这个词，也不是不可以。哈哈。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578975171,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":202351,"user_name":"月亮和六便士","can_delete":false,"product_type":"c1","uid":1080894,"ip_address":"","ucode":"EFFCB9171D4B4E","user_header":"https://static001.geekbang.org/account/avatar/00/10/7e/3e/82202cc8.jpg","comment_is_top":false,"comment_ctime":1585972884,"is_pvip":false,"replies":[{"id":"75766","content":"是的，我理解你说的这样设置没问题。","user_name":"作者回复","comment_id":202351,"uid":"1785562","ip_address":"","utype":1,"ctime":1586075430,"user_name_real":"高楼(Zee)"}],"discussion_count":1,"race_medal":0,"score":"14470874772","product_id":100042501,"comment_content":"高老师，请教一下，容量测试的时候 ：假如有三个接口，没有顺序，但是有业务比例，是不是把三个接口放一个线程组里，每个接口添加事物，按照业务比例设置throughput controller控制就可以，如果有顺序，设置一个大事物就可以？","like_count":3,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490565,"discussion_content":"是的，我理解你说的这样设置没问题。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586075430,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":182256,"user_name":"Geek4%","can_delete":false,"product_type":"c1","uid":1518968,"ip_address":"","ucode":"A8D51408BB3357","user_header":"https://static001.geekbang.org/account/avatar/00/17/2d/78/0640f9fe.jpg","comment_is_top":false,"comment_ctime":1582736686,"is_pvip":false,"replies":[{"id":"70542","content":"设置ramp-up就可以了呀。","user_name":"作者回复","comment_id":182256,"uid":"1785562","ip_address":"","utype":1,"ctime":1582761421,"user_name_real":"高楼(Zee)"}],"discussion_count":3,"race_medal":0,"score":"14467638574","product_id":100042501,"comment_content":"老师，需要怎么设置线程与时间关系才能出现阶梯的TPS图","like_count":3,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":485274,"discussion_content":"设置ramp-up就可以了呀。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582761421,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1393840,"avatar":"https://static001.geekbang.org/account/avatar/00/15/44/b0/c196c056.jpg","nickname":"SeaYang","note":"","ucode":"F44622A44CE8B9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":320912,"discussion_content":"下载步进线程组插件就可以了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604502632,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1518968,"avatar":"https://static001.geekbang.org/account/avatar/00/17/2d/78/0640f9fe.jpg","nickname":"Geek4%","note":"","ucode":"A8D51408BB3357","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":191339,"discussion_content":"老师，http协议的视频点播怎么压力测试？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582990737,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":311897,"user_name":"学员141","can_delete":false,"product_type":"c1","uid":2559600,"ip_address":"","ucode":"8BC79DC3D7AF44","user_header":"","comment_is_top":false,"comment_ctime":1631525371,"is_pvip":false,"replies":[{"id":"114825","content":"对呀。","user_name":"作者回复","comment_id":311897,"uid":"1785562","ip_address":"","utype":1,"ctime":1634690921,"user_name_real":"高楼(Zee)"}],"discussion_count":1,"race_medal":0,"score":"10221459963","product_id":100042501,"comment_content":"老师，批处理、大数据这种业务是不是不用脚本，直接准备批量数据，实时调用分析？","like_count":2,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526785,"discussion_content":"对呀。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634690921,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":293305,"user_name":"johnny","can_delete":false,"product_type":"c1","uid":1210226,"ip_address":"","ucode":"54E78B7BBC6AF0","user_header":"https://static001.geekbang.org/account/avatar/00/12/77/72/8f77ddb0.jpg","comment_is_top":false,"comment_ctime":1621329771,"is_pvip":false,"replies":[{"id":"106251","content":"1. 根据响应时间计算出来看了才知道。<br>2. 搞不懂这个思路从哪来的。难道是要两个业务相互追平的意思吗？在我的逻辑中递增策略相同即可，关键是保持住业务比例。","user_name":"作者回复","comment_id":293305,"uid":"1785562","ip_address":"","utype":1,"ctime":1621394614,"user_name_real":"高楼(Zee)"}],"discussion_count":1,"race_medal":0,"score":"10211264363","product_id":100042501,"comment_content":"老师，关于文中的混合业务线程数图。<br>我有两个问题，帮忙解答一下。<br>问题1：各业务的线程之间的比例和业务比例是不是比较接近？<br>问题2：各业务的线程递增策略是不是不一样（基准场景中响应时间快的业务会设置的线程递增较慢些，相应慢的业务会设置线程递增较快些）？","like_count":2,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":520150,"discussion_content":"1. 根据响应时间计算出来看了才知道。\n2. 搞不懂这个思路从哪来的。难道是要两个业务相互追平的意思吗？在我的逻辑中递增策略相同即可，关键是保持住业务比例。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621394614,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":286489,"user_name":"SeaYang","can_delete":false,"product_type":"c1","uid":1393840,"ip_address":"","ucode":"F44622A44CE8B9","user_header":"https://static001.geekbang.org/account/avatar/00/15/44/b0/c196c056.jpg","comment_is_top":false,"comment_ctime":1617343703,"is_pvip":false,"replies":[{"id":"104118","content":"你可以做一个示例来看一下。<br>递增在秒杀场景中也是可以适用的，只是递增的速度很快。集合点其实只是压力工具中的集合，并不是服务器端的集合。<br>如果考虑服务端对同一请求的同时的处理，注意哦，那是在不同的线程里。","user_name":"作者回复","comment_id":286489,"uid":"1785562","ip_address":"","utype":1,"ctime":1617471057,"user_name_real":"高楼(Zee)"}],"discussion_count":1,"race_medal":0,"score":"10207278295","product_id":100042501,"comment_content":"高老师，之前面试时面试官问秒杀活动怎么设计压测场景，我说梯度加压得到最大稳定Tps，再结合限流策略保障稳定性。但面试官不认可，说秒杀是突增流量，不是梯度流量。我再说可以考虑集合点的方式模拟突增流量，面试官才说是他想要的点。。。可我还是觉得不管是不是秒杀活动，系统最大稳定tps都是会有一个确定的值，只是对于秒杀来说，需要采取限流、降级等策略来保障系统不挂。对此，老师您怎么看呢？","like_count":2,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518007,"discussion_content":"你可以做一个示例来看一下。\n递增在秒杀场景中也是可以适用的，只是递增的速度很快。集合点其实只是压力工具中的集合，并不是服务器端的集合。\n如果考虑服务端对同一请求的同时的处理，注意哦，那是在不同的线程里。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617471057,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":223105,"user_name":"jy","can_delete":false,"product_type":"c1","uid":1785172,"ip_address":"","ucode":"F4E179C435451B","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJJ6G2xZvNRmhyXBjmGbI5G8icGCCMPupr6yxZ1IcURwp7GTRHcpWGWpg9A0fLlyicmVdDwzqZqwiaOQ/132","comment_is_top":false,"comment_ctime":1591002538,"is_pvip":false,"replies":[{"id":"84040","content":"1. 只要跑运维周期的业务量即可。<br>2. 就是多长时间做系统的清理、巡检等。","user_name":"作者回复","comment_id":223105,"uid":"1785562","ip_address":"","utype":1,"ctime":1592532926,"user_name_real":"高楼(Zee)"}],"discussion_count":1,"race_medal":0,"score":"10180937130","product_id":100042501,"comment_content":"1、稳定性场景，是不是只要跑运维周期的业务量即可？而不是运维周期这个时间长度？<br>2、运维周期是个什么概念？我们没这个说法呢","like_count":2,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497012,"discussion_content":"1. 只要跑运维周期的业务量即可。\n2. 就是多长时间做系统的清理、巡检等。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592532926,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":222851,"user_name":"jy","can_delete":false,"product_type":"c1","uid":1785172,"ip_address":"","ucode":"F4E179C435451B","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJJ6G2xZvNRmhyXBjmGbI5G8icGCCMPupr6yxZ1IcURwp7GTRHcpWGWpg9A0fLlyicmVdDwzqZqwiaOQ/132","comment_is_top":false,"comment_ctime":1590930686,"is_pvip":false,"replies":[{"id":"84043","content":"我在写的时候考虑到这个是工具的功能，所以没有写细。这个是单线程组、多线程组都不重要，业务比例控制方式也有好几种，所以没有一一列举。","user_name":"作者回复","comment_id":222851,"uid":"1785562","ip_address":"","utype":1,"ctime":1592533155,"user_name_real":"高楼(Zee)"}],"discussion_count":2,"race_medal":0,"score":"10180865278","product_id":100042501,"comment_content":"我们平时在很多场合下所说的场景范围都有些狭隘，觉得场景就是业务比例，就是用多少数据。而实际做过多个性能项目之后，你就会发现，工具中的一个小小的配置，也会对结果产生巨大的影响。【------摘抄自第四课】<br><br>场景如何转换为压测脚本？文中只有非gui的html报告截图，完全看不到jmeter脚本一个大概的设计，比如，是单线程组还是多线程组？业务比例通过什么来控制？线程设置多少或者如何算？<br><br>我觉得这是关键的一环，但是缺失了。希望老师能补充","like_count":2,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496937,"discussion_content":"我在写的时候考虑到这个是工具的功能，所以没有写细。这个是单线程组、多线程组都不重要，业务比例控制方式也有好几种，所以没有一一列举。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592533155,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1526668,"avatar":"https://static001.geekbang.org/account/avatar/00/17/4b/8c/8557ac91.jpg","nickname":"bruce","note":"","ucode":"C9AFCC121EBBE4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582862,"discussion_content":"老师这里时多个线程组吧，因为最后容量性能场景，业务1到业务6线程数量都不一样，应该时每个业务对应的线程组都设置了梯度加压","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659712619,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"重庆"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":172702,"user_name":"顺利","can_delete":false,"product_type":"c1","uid":1618652,"ip_address":"","ucode":"C904941C8BA6DA","user_header":"https://static001.geekbang.org/account/avatar/00/18/b2/dc/67e0e985.jpg","comment_is_top":false,"comment_ctime":1579254434,"is_pvip":false,"replies":[{"id":"67022","content":"业务比例在容量场景中直接通过控制tps来体现就可以了。后面说了工具中各用什么功能来控制。不知道你的具体疑惑点是什么呢？<br>基准测试起到的作用就是先把最基本的瓶颈解决掉。我这里已经给出的是优化后的基准测试结果。其实这个过程中遇到的瓶颈很多。 只有先把这些问题解决，基准测试的响应时间和tps才能对容量测试有比对的作用。","user_name":"作者回复","comment_id":172702,"uid":"1785562","ip_address":"","utype":1,"ctime":1579278460,"user_name_real":"高楼(Zee)"}],"discussion_count":1,"race_medal":0,"score":"10169189026","product_id":100042501,"comment_content":"拿到基准测试的结果后，您是如何按照业务比例设计出容量性能场景的，这块弄不懂，文中也没有计算的过程，不知道基准测试结果起到说明作用，老师能否详细说明。","like_count":2,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481824,"discussion_content":"业务比例在容量场景中直接通过控制tps来体现就可以了。后面说了工具中各用什么功能来控制。不知道你的具体疑惑点是什么呢？\n基准测试起到的作用就是先把最基本的瓶颈解决掉。我这里已经给出的是优化后的基准测试结果。其实这个过程中遇到的瓶颈很多。 只有先把这些问题解决，基准测试的响应时间和tps才能对容量测试有比对的作用。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579278460,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":171133,"user_name":"土耳其小土豆","can_delete":false,"product_type":"c1","uid":1785659,"ip_address":"","ucode":"B16574EF28525E","user_header":"https://static001.geekbang.org/account/avatar/00/1b/3f/3b/119fd0ef.jpg","comment_is_top":false,"comment_ctime":1578872377,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10168806969","product_id":100042501,"comment_content":"先占个坑","like_count":2},{"had_liked":false,"id":354950,"user_name":"Zik","can_delete":false,"product_type":"c1","uid":2741864,"ip_address":"北京","ucode":"CD295634957CB4","user_header":"https://static001.geekbang.org/account/avatar/00/29/d6/68/822d27b5.jpg","comment_is_top":false,"comment_ctime":1660902242,"is_pvip":false,"replies":[{"id":"129297","content":"这个公式只是瞬间数据有效。看趋势的时候不需要去计算。 ","user_name":"作者回复","comment_id":354950,"uid":"1785562","ip_address":"北京","utype":1,"ctime":1661330559,"user_name_real":"编辑"}],"discussion_count":1,"race_medal":0,"score":"5955869538","product_id":100042501,"comment_content":"老师，在这一篇TPS好像都没有根据这个公式来计算的对吗？<br>TPS=1000ms​&#47;响应时间(单位ms)∗压力机线程数","like_count":1,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585087,"discussion_content":"这个公式只是瞬间数据有效。看趋势的时候不需要去计算。 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661330559,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":344356,"user_name":"林小胖","can_delete":false,"product_type":"c1","uid":1997569,"ip_address":"","ucode":"39F32FEFA7C729","user_header":"","comment_is_top":false,"comment_ctime":1651487287,"is_pvip":false,"replies":[{"id":"125944","content":"有生产数据就统计生产数据，没有生产数据，只能让业务人员先评估业务峰值了。","user_name":"作者回复","comment_id":344356,"uid":"1785562","ip_address":"","utype":1,"ctime":1652058834,"user_name_real":"编辑"}],"discussion_count":1,"race_medal":0,"score":"5946454583","product_id":100042501,"comment_content":"容量测试的业务目标TPS是怎么计算的啊","like_count":1,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":571036,"discussion_content":"有生产数据就统计生产数据，没有生产数据，只能让业务人员先评估业务峰值了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1652058834,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":334828,"user_name":"爱丽包°","can_delete":false,"product_type":"c1","uid":2535283,"ip_address":"","ucode":"125325E82EE6D2","user_header":"https://static001.geekbang.org/account/avatar/00/26/af/73/6bc60f7a.jpg","comment_is_top":false,"comment_ctime":1645148897,"is_pvip":false,"replies":[{"id":"122536","content":"这个确实需要根据实际情况进行计划。首先，做一次单线程单请求，看一下响应时间是多少，再看系统硬件资源是多少，再考虑要达到的tps目标值，算一下压力线程需要多少，再考虑递增的幅度和周期。<br>可以联系我微信，把具体的信息给我看看。Zee_7D","user_name":"作者回复","user_name_real":"编辑","uid":"1785562","ctime":1645578720,"ip_address":"","comment_id":334828,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5940116193","product_id":100042501,"comment_content":"老师，想请问一下基准场景中并发线程要设置多少？前面说根据并发用户数转换，是看每个线程的TPS计算需要多少个线程，那需要从这个线程数开始递增加压吗？那递增幅度呢，前面有给出经验值，那是每分钟递增几个线程？那持续时间多久呢？我在测试过程中调整7，8次，要么最高线程数太低TPS没有达到最高，要么开始没多久就压到最高TPS了，不然就是曲线递增太快","like_count":1,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":552701,"discussion_content":"这个确实需要根据实际情况进行计划。首先，做一次单线程单请求，看一下响应时间是多少，再看系统硬件资源是多少，再考虑要达到的tps目标值，算一下压力线程需要多少，再考虑递增的幅度和周期。\n可以联系我微信，把具体的信息给我看看。Zee_7D","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645578720,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":317217,"user_name":"啸龙","can_delete":false,"product_type":"c1","uid":2807321,"ip_address":"","ucode":"ACE8C52AD8D329","user_header":"https://static001.geekbang.org/account/avatar/00/2a/d6/19/dafc61a8.jpg","comment_is_top":false,"comment_ctime":1634712493,"is_pvip":false,"replies":[{"id":"115043","content":"是的，相加。 ","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1634808616,"ip_address":"","comment_id":317217,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5929679789","product_id":100042501,"comment_content":"高老师，<br>原文“那么针对前面给出的容量结果，容量 TPS 能达到 3800（业务 1 到业务 6 的容量测试结果 TPS 总和）。所以稳定性场景时间应该是：20000000&#47;3800 = 1.46 小时。” <br>问题：<br>这里的业务1到业务6容量测试，是指容量测试中的各业务最大TPS相加得到的吗?光看图不是特别明确","like_count":1,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":528720,"discussion_content":"是的，相加。 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634808616,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":316352,"user_name":"雅妹儿","can_delete":false,"product_type":"c1","uid":1786922,"ip_address":"","ucode":"8299C412A67575","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/zxkns28cIAUZIt3WjDb8G5vj94HpqTKv8St09DxCOWbXB6pib2CicSvuz4SmLIQOoFV5gnUTC2Owt7nLbJGCjfTQ/132","comment_is_top":false,"comment_ctime":1634282200,"is_pvip":false,"replies":[{"id":"114673","content":"在混合场景中，如果是串行的，哪个业务慢就必然会是先影响整体TPS的。<br>如果是并行的，那就需要分配不同的线程组，以减少压力线程级串行执行对整体TPS的影响。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1634535640,"ip_address":"","comment_id":316352,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5929249496","product_id":100042501,"comment_content":"有两个业务将会先受到影响，那就是业务 4 和业务 5，因为它们的测试 TPS 和最大 TPS 最为接近。<br><br>不明白这个结论的因果关系？ 需要帮忙解答一下，辛苦老师了 ","like_count":1,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":528365,"discussion_content":"在混合场景中，如果是串行的，哪个业务慢就必然会是先影响整体TPS的。\n如果是并行的，那就需要分配不同的线程组，以减少压力线程级串行执行对整体TPS的影响。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634535640,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":303007,"user_name":"爱丽包°","can_delete":false,"product_type":"c1","uid":2535283,"ip_address":"","ucode":"125325E82EE6D2","user_header":"https://static001.geekbang.org/account/avatar/00/26/af/73/6bc60f7a.jpg","comment_is_top":false,"comment_ctime":1626514524,"is_pvip":false,"replies":[{"id":"109657","content":"在另一个问题中回复了。<br>在第二个专栏的第10章中也有说明。 ","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1626536353,"ip_address":"","comment_id":303007,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5921481820","product_id":100042501,"comment_content":"老师 容量性场景中的线程数怎么定的","like_count":1,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":523511,"discussion_content":"在另一个问题中回复了。\n在第二个专栏的第10章中也有说明。 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626536353,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":301345,"user_name":"johnny","can_delete":false,"product_type":"c1","uid":1210226,"ip_address":"","ucode":"54E78B7BBC6AF0","user_header":"https://static001.geekbang.org/account/avatar/00/12/77/72/8f77ddb0.jpg","comment_is_top":false,"comment_ctime":1625640713,"is_pvip":false,"replies":[{"id":"109118","content":"业务包括几个请求取决于应该包括几个。<br><br>你可以用这个控制器，有的可能直接用http request就能区分开，这个也取决于不同的系统。 ","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1625647591,"ip_address":"","comment_id":301345,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5920608009","product_id":100042501,"comment_content":"老师，这里提到6个业务，我有两个问题<br>1.每个业务包含一个请求还是多个请求？<br>2.这里的业务是和jmeter中事物控制器（Transaction Controller）对应的吗？","like_count":1,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":522972,"discussion_content":"业务包括几个请求取决于应该包括几个。\n\n你可以用这个控制器，有的可能直接用http request就能区分开，这个也取决于不同的系统。 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625647591,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":293637,"user_name":"johnny","can_delete":false,"product_type":"c1","uid":1210226,"ip_address":"","ucode":"54E78B7BBC6AF0","user_header":"https://static001.geekbang.org/account/avatar/00/12/77/72/8f77ddb0.jpg","comment_is_top":false,"comment_ctime":1621473798,"is_pvip":false,"replies":[{"id":"106350","content":"那还要第一种方式干嘛呢？又麻烦又不准。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1621482426,"ip_address":"","comment_id":293637,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5916441094","product_id":100042501,"comment_content":"老师，对于容量场景如何控制业务比例，我这样理解正确吗？<br>我们可以使用下面2种方式达到控制业务比例的目的（不排除还有其他方式）。<br>第一种：多线程组方式<br>多线程组方式就是将不同业务放在不同的线程组中，通过控制线程数来控制业务比例。<br>比如实际业务中需要业务A、业务B和业务C的比例为3:2:1，<br>那么初始时我们可以设置线程组A（对应业务A）的线程数为3，<br>设置线程组B（对应业务B）的线程数为2，<br>设置线程组C（对应业务C）的线程数为1，<br>设置三个线程组A、线程组B、线程组C的线程递增策略为一致的（比如都设置为每秒递增10个线程），<br>这样可以粗略的达到控制业务比例的要求。<br>但是如果三个业务的响应时间不一样，并且随着压力的增加变化的比例也有所差异，那么最终完成的业务数也会有所差异。<br>所以使用这种方式控制业务比例有个前提就是每个业务的响应时间完全一致，并且随着压力的增加，响应时间的变化也是同步的（当然这是理想状态）。<br>第二种：使用throughput controller的方式<br>这种方式就是将不同业务放在同一个线程组中，通过使用throughput controller，可以达到精确控制业务比例的目的。","like_count":1,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":520301,"discussion_content":"那还要第一种方式干嘛呢？又麻烦又不准。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621482426,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":293463,"user_name":"johnny","can_delete":false,"product_type":"c1","uid":1210226,"ip_address":"","ucode":"54E78B7BBC6AF0","user_header":"https://static001.geekbang.org/account/avatar/00/12/77/72/8f77ddb0.jpg","comment_is_top":false,"comment_ctime":1621395049,"is_pvip":false,"replies":[{"id":"106301","content":"是。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1621425667,"ip_address":"","comment_id":293463,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5916362345","product_id":100042501,"comment_content":"老师，在底部问答中你说：&quot;2. 我会用二分法确定系统的上限。比如说，我先加100个压力线程，看系统的tps是多少&quot;。在这个回答中“100个压力线程”指代的是6个业务所用的线程总量吗？","like_count":1,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":520222,"discussion_content":"是。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621425667,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":292243,"user_name":"陈诚","can_delete":false,"product_type":"c1","uid":1498273,"ip_address":"","ucode":"BF0905C6539C06","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKbt3JKCxyeRvkfXMSlkbHlwFqPjXw5kZAXxzKhC8aRtNUyUl7nfmMdnZh88oibfOChuNPCODPMyibQ/132","comment_is_top":false,"comment_ctime":1620736728,"is_pvip":false,"replies":[{"id":"105792","content":"在第二个专栏《高楼的性能工程实战课》的第6节课里有详细描述。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1620744005,"ip_address":"","comment_id":292243,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5915704024","product_id":100042501,"comment_content":"有个问题想请问一下老师，不知道是我理解能力太差了还是老师在文中没有讲到，文中在对各个业务做了基准测试之后，容量场景是怎么得来的？比如总的容量是如何确定的？我从文中只看到了一开始我们确定了容量场景中各个业务的比例。","like_count":1,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":519745,"discussion_content":"在第二个专栏《高楼的性能工程实战课》的第6节课里有详细描述。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620744005,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":287089,"user_name":"Geek_b76638","can_delete":false,"product_type":"c1","uid":2421802,"ip_address":"","ucode":"858FB196CDFF7E","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ermm498iaT8hp4xmMu51AGoq20UOEwhZeE0wuHkaEsPQ461x1sib0WPwyV5ypQeYJZQ906piaQ4icf9eQ/132","comment_is_top":false,"comment_ctime":1617771681,"is_pvip":false,"replies":[{"id":"104263","content":"不用得到呀，只要连续递增就好了。<br>如果你想先知道个大概的容量场景中的最大线程数，用二分法做尝试即可。 ","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1617804125,"ip_address":"","comment_id":287089,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5912738977","product_id":100042501,"comment_content":"老师，怎么根据基准的最大tps和响应时间，得到的容量测试的线程数呀？","like_count":1,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518190,"discussion_content":"不用得到呀，只要连续递增就好了。\n如果你想先知道个大概的容量场景中的最大线程数，用二分法做尝试即可。 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617804125,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":284833,"user_name":"🍓 新月","can_delete":false,"product_type":"c1","uid":1209856,"ip_address":"","ucode":"330E393346E642","user_header":"https://static001.geekbang.org/account/avatar/00/12/76/00/ce438b61.jpg","comment_is_top":false,"comment_ctime":1616490036,"is_pvip":false,"replies":[{"id":"103334","content":"对的。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1616505912,"ip_address":"","comment_id":284833,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5911457332","product_id":100042501,"comment_content":"老师，这些图都是jmeter软件输出的吗？","like_count":1,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":517480,"discussion_content":"对的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616505912,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":277104,"user_name":"Geek_a8d2eb","can_delete":false,"product_type":"c1","uid":2169031,"ip_address":"","ucode":"B3EA4F3318B307","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLx577ko7FBh90vfSFM4oqSz8wFBW4ztau8PUxY18R7yKJnRD4WB4sF7ibOmlqBYAZqwNsEbWT6bbg/132","comment_is_top":false,"comment_ctime":1612260374,"is_pvip":false,"replies":[{"id":"103276","content":"要对应业务能接受的RT来判断。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1616423471,"ip_address":"","comment_id":277104,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5907227670","product_id":100042501,"comment_content":"高老师，请教下，查看TPS曲线的最大TPS值时，是不是要找衰减前的TPS最大值，如果性能已经在衰减，但TPS还在增加，需要看性能衰减后达到的最大TPS值么？","like_count":1,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":514932,"discussion_content":"要对应业务能接受的RT来判断。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616423471,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":275336,"user_name":"Geek_WHY","can_delete":false,"product_type":"c1","uid":1800248,"ip_address":"","ucode":"DAEDFA330AA9D3","user_header":"https://static001.geekbang.org/account/avatar/00/1b/78/38/a3c9de1b.jpg","comment_is_top":false,"comment_ctime":1611477304,"is_pvip":false,"replies":[{"id":"99954","content":"因为想通过递增找到整体的瓶颈点。 ","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1611544154,"ip_address":"","comment_id":275336,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5906444600","product_id":100042501,"comment_content":"高老师，您好：<br>有个疑问，麻烦解答一下<br>容量性能场景中的每个业务的线程数递增策略是怎么判断的？<br>比如：业务1目标tps是196，在第一梯度（10线程就能达到），在容量性能场景我看是从3左右的位置，梯度增压到20，这个策略是怎么得来的","like_count":1,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":514315,"discussion_content":"因为想通过递增找到整体的瓶颈点。 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611544154,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":273881,"user_name":"Geek_a8d2eb","can_delete":false,"product_type":"c1","uid":2169031,"ip_address":"","ucode":"B3EA4F3318B307","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLx577ko7FBh90vfSFM4oqSz8wFBW4ztau8PUxY18R7yKJnRD4WB4sF7ibOmlqBYAZqwNsEbWT6bbg/132","comment_is_top":false,"comment_ctime":1610704558,"is_pvip":false,"replies":[{"id":"99242","content":"1，如果各业务的响应时间都随压力变化，能够保持业务比例，就可以按比例设置线程数，如果不能保持，就要用吞吐量控制器。<br>2，最好把机器资源用完。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1610790890,"ip_address":"","comment_id":273881,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5905671854","product_id":100042501,"comment_content":"高老师，有两个问题想请教下：<br>1.本文是用的jmeter测试的吧？你的业务比例是怎么实现的呀？每个业务对应一个线程组吗？然后按比例设置线程数？<br>2.在测最大TPS的时候，是否是业务机器的CPU使用率不高于某个值（比如70%）下的最大TPS？","like_count":1,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":513842,"discussion_content":"1，如果各业务的响应时间都随压力变化，能够保持业务比例，就可以按比例设置线程数，如果不能保持，就要用吞吐量控制器。\n2，最好把机器资源用完。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610790890,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2169031,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLx577ko7FBh90vfSFM4oqSz8wFBW4ztau8PUxY18R7yKJnRD4WB4sF7ibOmlqBYAZqwNsEbWT6bbg/132","nickname":"Geek_a8d2eb","note":"","ucode":"B3EA4F3318B307","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":347580,"discussion_content":"但现网有要求，CPU使用率高于70%，就会告警了，所以一般只测70%以内的最大tps","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612261185,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":225253,"user_name":"Geek_905bf9","can_delete":false,"product_type":"c1","uid":1599748,"ip_address":"","ucode":"70BD0AD8B01B63","user_header":"","comment_is_top":false,"comment_ctime":1591696729,"is_pvip":false,"replies":[{"id":"84038","content":"你可以提一个更具体的问题。我来给你解释。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1592532859,"ip_address":"","comment_id":225253,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5886664025","product_id":100042501,"comment_content":"这个场景设计讲的太大了，听完还是不知道怎么设计场景，想听具体点的","like_count":1,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497787,"discussion_content":"你可以提一个更具体的问题。我来给你解释。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592532859,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":223102,"user_name":"jy","can_delete":false,"product_type":"c1","uid":1785172,"ip_address":"","ucode":"F4E179C435451B","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJJ6G2xZvNRmhyXBjmGbI5G8icGCCMPupr6yxZ1IcURwp7GTRHcpWGWpg9A0fLlyicmVdDwzqZqwiaOQ/132","comment_is_top":false,"comment_ctime":1591002456,"is_pvip":false,"replies":[{"id":"84041","content":"那要看看工具中的功能怎么用了。看下如何控制tps。 ","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1592532962,"ip_address":"","comment_id":223102,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5885969752","product_id":100042501,"comment_content":"还是没看懂容量场景，各个业务的线程数是怎么设置的","like_count":1,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497010,"discussion_content":"那要看看工具中的功能怎么用了。看下如何控制tps。 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592532962,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":209045,"user_name":"从一","can_delete":false,"product_type":"c1","uid":1713019,"ip_address":"","ucode":"E80924B260CBA5","user_header":"https://static001.geekbang.org/account/avatar/00/1a/23/7b/1fbf68e5.jpg","comment_is_top":false,"comment_ctime":1587482457,"is_pvip":false,"replies":[{"id":"82008","content":"1. 你是说一个线程组还是6个线程组吗？<br>2. 业务并发是需要和业务比例一致的。跟rampup无关。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1590754306,"ip_address":"","comment_id":209045,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5882449753","product_id":100042501,"comment_content":"老师，有两个问题想问下<br>1，你示例中6个业务是放在一个线程还是6个线程？<br>2，如果是多个线程控制业务的话，每个业务的并发数需要和基准场景测试时一样吗？比如我测业务1运用的线程数是600，ramp-up设置的也是600..那么在混合场景测试时这个线程数和ramp-up要变吗？","like_count":1,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":492705,"discussion_content":"1. 你是说一个线程组还是6个线程组吗？\n2. 业务并发是需要和业务比例一致的。跟rampup无关。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590754306,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1785875,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/40/13/3e77a4a0.jpg","nickname":"言希","note":"","ucode":"87E80087CFECA8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":275398,"discussion_content":"我也想问这个问题，楼主你的疑惑解开了吗","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590713346,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":205633,"user_name":"白菜","can_delete":false,"product_type":"c1","uid":1216648,"ip_address":"","ucode":"5C2CAF64A69ED9","user_header":"https://static001.geekbang.org/account/avatar/00/12/90/88/1907a8b3.jpg","comment_is_top":false,"comment_ctime":1586691917,"is_pvip":false,"replies":[{"id":"77267","content":"比如说电商，下订单就是一个业务。所以是按功能算的。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1586959049,"ip_address":"","comment_id":205633,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5881659213","product_id":100042501,"comment_content":"业务1， 业务2，这里的业务范围是什么，是按功能算吗，还是指单个接口呢？我不太清楚怎么才算一个业务","like_count":1,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":491534,"discussion_content":"比如说电商，下订单就是一个业务。所以是按功能算的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586959049,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":194315,"user_name":"小呀么小二郎","can_delete":false,"product_type":"c1","uid":1326905,"ip_address":"","ucode":"149540DCFDF43E","user_header":"https://static001.geekbang.org/account/avatar/00/14/3f/39/b1558fc9.jpg","comment_is_top":false,"comment_ctime":1585049688,"is_pvip":false,"replies":[{"id":"74168","content":"很快就出师了！","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1585136583,"ip_address":"","comment_id":194315,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5880016984","product_id":100042501,"comment_content":"今日思考题：<br>性能场景应该按什么样的逻辑设计？<br>按照基准性能场景、容量性能场景、稳定性性能场景和异常性能场景来进行设计。<br>在做基准性能场景前，需要先列出自己要测试的业务比例、业务目标TPS和响应时间指标。业务比例通常是由生产环境统计的数据得出的。<br>基准性能场景的目的是为了测试出单业务的最大容量，以便在混合容量场景中判断哪个业务对整体容量最有影响。<br>容量性能场景的目的是为了模拟真实生产环境的业务进行测试，保证性能测试的有效性。测试重点是场景不断以及控制比例。容量性能场景不止一个。<br>稳定性性能场景的目的是为了知道系统是否会由于长时间处理业务而引发瓶颈。时间长度取决于系统上线后的运维周期。<br>异常性能场景的目的是为了判断所执行的操作（比如kill、断电、断网卡等）对系统产生的影响，测试过程中要保持TPS的稳定（通常用容量场景中最大TPS的50%来进行测试）。异常性能场景也不止一个。<br><br><br>性能场景应该按什么样的逻辑设计？<br>首先，稳定性性能场景的目的就是为了知道系统是否会由于长时间处理业务而引发潜在瓶颈，对于用多少TPS没有具体的要求。<br>其次，如果系统用最大TPS跑下来，业务一直正常，那就达到了稳定性性能目标，这个场景是有效的。既然有效，那么用最大TPS是没有问题的。<br>最后，理论要结合实际，我们在测试的时候也要结合场景目标以及系统真实情况来做，而不是道听途说的“原则”。<br><br><br>老师这节课的干货太多了。我需要找个实际项目练练手才能消化了。","like_count":1,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488811,"discussion_content":"很快就出师了！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585136583,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":187682,"user_name":"kubxy","can_delete":false,"product_type":"c1","uid":1514411,"ip_address":"","ucode":"EDA317D303CC42","user_header":"https://static001.geekbang.org/account/avatar/00/17/1b/ab/a5f88914.jpg","comment_is_top":false,"comment_ctime":1584192459,"is_pvip":false,"replies":[{"id":"72715","content":"在这个项目中，是根据业务团队给出来的业务比例和基准测试的结果，来计算出的混合场景中的比例。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1584362331,"ip_address":"","comment_id":187682,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5879159755","product_id":100042501,"comment_content":"在容量场景中，您的6个线程组的线程数是如何确定的？","like_count":1,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":487198,"discussion_content":"在这个项目中，是根据业务团队给出来的业务比例和基准测试的结果，来计算出的混合场景中的比例。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584362331,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1514411,"avatar":"https://static001.geekbang.org/account/avatar/00/17/1b/ab/a5f88914.jpg","nickname":"kubxy","note":"","ucode":"EDA317D303CC42","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":206415,"discussion_content":"这个没有计算公式呢？您能否结合案例讲解一下","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584404510,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":172308,"user_name":"律飛","can_delete":false,"product_type":"c1","uid":1462608,"ip_address":"","ucode":"65394E437AD2DF","user_header":"https://static001.geekbang.org/account/avatar/00/16/51/50/f5f2a121.jpg","comment_is_top":false,"comment_ctime":1579146762,"is_pvip":false,"replies":[{"id":"66874","content":"1. 业务比例和目标tps是业务指标中的关键部分，这是要业务部门提的。要不你看下业务模型那篇是否可以回答得了这个问题。<br>2. 递增数据的数据在这篇中已经说了吧。就是看响应时间是快还是慢，如果响应时间快就少一点线程上升。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1579184710,"ip_address":"","comment_id":172308,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5874114058","product_id":100042501,"comment_content":"听完本次课，对性能测试有了更进一步的理解，对以往迷惑的地方有了一些模糊的澄清，还需要继续努力学习。谢谢老师！另外有一些地方请教老师：<br>1.在基准性能场景测试时，有哪些好的途径和方法来获取所需的业务比例、业务目标TPS和响应时间？<br>2.容量测试场景中，实在没有弄明白线程递增数据是怎么获得的？我看老师在回答其他人的问题时说后续在业务比例设计中会讲到。如果是这样，很期待早日听到该课程！","like_count":1,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481693,"discussion_content":"1. 业务比例和目标tps是业务指标中的关键部分，这是要业务部门提的。要不你看下业务模型那篇是否可以回答得了这个问题。\n2. 递增数据的数据在这篇中已经说了吧。就是看响应时间是快还是慢，如果响应时间快就少一点线程上升。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579184710,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1818999,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/c1/77/bee24d2d.jpg","nickname":"hou","note":"","ucode":"B86FDAE03B1C61","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":202113,"discussion_content":"很多情况下，业务人员给业务目标，tps和相应时间的目标有点难","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583860687,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":171365,"user_name":"kubxy","can_delete":false,"product_type":"c1","uid":1514411,"ip_address":"","ucode":"EDA317D303CC42","user_header":"https://static001.geekbang.org/account/avatar/00/17/1b/ab/a5f88914.jpg","comment_is_top":false,"comment_ctime":1578909133,"is_pvip":false,"replies":[{"id":"66507","content":"你这个问题的前提是：你想做的是什么场景？<br>只有分析了你要做的场景，才能判断出应该如何访问接口。<br>比如说，你的目的是只测试登录，那就完全没必要请求后面的接口。即使是录制实现了登录，并且连带了后面的接口请求。也应该把后面的接口请求给删掉。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1578975466,"ip_address":"","comment_id":171365,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5873876429","product_id":100042501,"comment_content":"老师，我一直有一个疑问。在做业务的性能测试时，是只测实现这个业务逻辑的接口，还是要测完成这个业务时访问的所有接口？比如，登录业务。在接口文档里只是一个登录接口，但使用JMeter录制登录操作，还会请求其他接口。","like_count":1,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481317,"discussion_content":"你这个问题的前提是：你想做的是什么场景？\n只有分析了你要做的场景，才能判断出应该如何访问接口。\n比如说，你的目的是只测试登录，那就完全没必要请求后面的接口。即使是录制实现了登录，并且连带了后面的接口请求。也应该把后面的接口请求给删掉。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578975466,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":171330,"user_name":"Imaginary","can_delete":false,"product_type":"c1","uid":1528943,"ip_address":"","ucode":"DBCFB1AAB977FE","user_header":"https://static001.geekbang.org/account/avatar/00/17/54/6f/476a3cd6.jpg","comment_is_top":false,"comment_ctime":1578903549,"is_pvip":false,"replies":[{"id":"66514","content":"理解的非常对。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1578975876,"ip_address":"","comment_id":171330,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5873870845","product_id":100042501,"comment_content":"答：<br>1、性能测试场景应该有预期的测试指标并且符合实际的生产场景，按照生产的业务比例模拟真正的业务，以达到我们所真正需要的结果。<br>2、稳定性场景就是为了知道会不会由于长时间处理业务而引发潜在瓶颈。至于用多大的 TPS 来运行，又有什么关系？这个系统用最大 TPS 能跑下来，业务一直很正常，稳定性目标能达到，为什么不能用最大 TPS 来跑呢？只要系统在正常处理，资源没有出现问题，也没有报错，那这个场景就是有效的，目标也是能达到的。","like_count":1,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481298,"discussion_content":"理解的非常对。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578975876,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":360897,"user_name":"燕","can_delete":false,"product_type":"c1","uid":1918796,"ip_address":"四川","ucode":"1F1AB112F15A8A","user_header":"https://static001.geekbang.org/account/avatar/00/1d/47/4c/791d0f5e.jpg","comment_is_top":false,"comment_ctime":1666951037,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1666951037","product_id":100042501,"comment_content":"高老师，你好，我是一个新手小白，我看了你的栏目，觉的讲的确实很好，都是实际工作中经常会遇到 的问题，对我也很有启发。但是，有些内容还不是特别理解，请帮忙指点一下，非常感谢！<br>1、做基本测试的目的，是为了获取单个业务的最大TPS，以及最大TPS对应的响应时间，是吗？<br>2、容量测试的时候，是不是需要已知前提条件：每个业务的业务比例，以及业务目标TPS，然后才能开展的啊？<br>3、容量测试没有看出来需要用到基准测试的结果啊，所以不明白基准测试，是否是容量测试必须的前奏？<br>4、容量测试的时候，每个业务对应的线程递增梯度，是根据每个业务的TPS来指定的吗，比如TPS大的，线程可以递增慢一些；TPS小的，递增幅度可以大一些，是这样的吗？然后各个线程相互之间怎么递增，是没有一定的准则或者约束的，是吗？<br>5、容量测试的目的，是模拟我们系统中进行一系列不同的业务组合操作时，得到各个业务的最大TPS，以及系统总体的TPS（前提：响应时间满足要求，服务器资源使用情况满足要求），然后与我们期望的各个业务目标TPS对比，检查是否能达标，是吗？至于JMETER工具上的线程数最终加到多少，并不是我们需要观注的重点，是吗？<br>6、最后一个问题，当我们不论做什么性能测试的时候，我们的目的都是为了获取服务器的最大TPS。那么我们在知道服务器最大TPS的情况下，系统能支持的最大用户在线数，是不是由nginx的连接数、redis的缓存等相关配置决定的啊？由于不太懂开发的相关知识，所以有些问题总是理解不透彻，在此也希望高老师能推荐一系列性能测试体系的相关书籍来学习啊。<br><br>非常感谢，期望你的解答！","like_count":0},{"had_liked":false,"id":359303,"user_name":"Geek_5887d8","can_delete":false,"product_type":"c1","uid":2761194,"ip_address":"四川","ucode":"28A0F53E3272BB","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/KjfGzaPJDibQjdW5kqtjlDVaCmt9ibiayic5plD9ZNTAa0clkic9xgCdLIQxfyaNje9oOp2EnWWibX3xpwpX6HCdAuicw/132","comment_is_top":false,"comment_ctime":1665398887,"is_pvip":false,"replies":[{"id":"130957","content":"从生产日志分析。","user_name":"作者回复","user_name_real":"编辑","uid":"1785562","ctime":1666188925,"ip_address":"四川","comment_id":359303,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1665398887","product_id":100042501,"comment_content":"业务比例这么获取","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":590961,"discussion_content":"从生产日志分析。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1666188925,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"四川"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":350400,"user_name":"Clown","can_delete":false,"product_type":"c1","uid":1588791,"ip_address":"北京","ucode":"796454DA259DE8","user_header":"https://static001.geekbang.org/account/avatar/00/18/3e/37/1ff94175.jpg","comment_is_top":false,"comment_ctime":1656896507,"is_pvip":false,"replies":[{"id":"129328","content":"你说的这两者有啥区别吗？增加请求数不是靠增加线程数来实现的吗？","user_name":"作者回复","user_name_real":"编辑","uid":"1785562","ctime":1661335627,"ip_address":"北京","comment_id":350400,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1656896507","product_id":100042501,"comment_content":"老师这里所谓的增加压力是指单位时间增加线程数吗？还是单位时间的并发请求数量？","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585126,"discussion_content":"你说的这两者有啥区别吗？增加请求数不是靠增加线程数来实现的吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661335627,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":346924,"user_name":"Duxuebing","can_delete":false,"product_type":"c1","uid":1050444,"ip_address":"","ucode":"3902E4B0C9F63E","user_header":"https://static001.geekbang.org/account/avatar/00/10/07/4c/1eec5844.jpg","comment_is_top":false,"comment_ctime":1653538385,"is_pvip":true,"replies":[{"id":"126610","content":"这个没办法，打击盗版，就需要成本，这个连极客时间也无能为力呀。","user_name":"作者回复","user_name_real":"编辑","uid":"1785562","ctime":1653833955,"ip_address":"","comment_id":346924,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1653538385","product_id":100042501,"comment_content":"刚刚发了一条留言，说您的博客被抄袭了，我又去搜索了几下，发现好多抄袭。挺生气，这些人","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":574104,"discussion_content":"这个没办法，打击盗版，就需要成本，这个连极客时间也无能为力呀。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1653833955,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1050444,"avatar":"https://static001.geekbang.org/account/avatar/00/10/07/4c/1eec5844.jpg","nickname":"Duxuebing","note":"","ucode":"3902E4B0C9F63E","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":575303,"discussion_content":"见一个举报一个","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1654738884,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":574104,"ip_address":""},"score":575303,"extra":""}]}]},{"had_liked":false,"id":346921,"user_name":"Duxuebing","can_delete":false,"product_type":"c1","uid":1050444,"ip_address":"","ucode":"3902E4B0C9F63E","user_header":"https://static001.geekbang.org/account/avatar/00/10/07/4c/1eec5844.jpg","comment_is_top":false,"comment_ctime":1653537910,"is_pvip":true,"replies":[{"id":"126609","content":"野火烧不尽。","user_name":"作者回复","user_name_real":"编辑","uid":"1785562","ctime":1653833763,"ip_address":"","comment_id":346921,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1653537910","product_id":100042501,"comment_content":"高老师，我在学习这篇文章的时候，发现有人全文抄袭你的文章。已经举报https:&#47;&#47;www.cnblogs.com&#47;siguadd&#47;p&#47;14863365.html<br>","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":574101,"discussion_content":"野火烧不尽。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1653833763,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":343694,"user_name":"Katharine","can_delete":false,"product_type":"c1","uid":1145920,"ip_address":"","ucode":"00E986A2A651CA","user_header":"https://static001.geekbang.org/account/avatar/00/11/7c/40/5e35209b.jpg","comment_is_top":false,"comment_ctime":1650985427,"is_pvip":false,"replies":[{"id":"125946","content":"目标是要达到的指标，测试出来的结果要和指标对比。测试执行肯定只有容量场景。","user_name":"作者回复","user_name_real":"编辑","uid":"1785562","ctime":1652058926,"ip_address":"","comment_id":343694,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1650985427","product_id":100042501,"comment_content":"高老师好，您好，看了这篇文章之后，结合前面的，有个疑问，想问下：<br>前面文章您提到，可以用目标TPS跟响应时间来倒推出并发数，但这篇文章中，您的第一种场景是逐步加压找到各业务的最大TPS，对这两种方式，我有些混淆，不确定分别该应用于那种场景，<br>期待您的解答，感谢！","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":571038,"discussion_content":"目标是要达到的指标，测试出来的结果要和指标对比。测试执行肯定只有容量场景。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1652058926,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":330279,"user_name":"Lj","can_delete":false,"product_type":"c1","uid":1565467,"ip_address":"","ucode":"6E2F87AF10CBD8","user_header":"https://static001.geekbang.org/account/avatar/00/17/e3/1b/cad16d25.jpg","comment_is_top":false,"comment_ctime":1641891613,"is_pvip":true,"replies":[{"id":"120617","content":"就是统计生产的业务比例。","user_name":"作者回复","user_name_real":"编辑","uid":"1785562","ctime":1642139145,"ip_address":"","comment_id":330279,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1641891613","product_id":100042501,"comment_content":"老师，混合测试的业务比例参考哪些数据去制定？","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":546050,"discussion_content":"就是统计生产的业务比例。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642139145,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":309714,"user_name":"Geek_588072","can_delete":false,"product_type":"c1","uid":2459800,"ip_address":"","ucode":"BF6F51CBA00A53","user_header":"","comment_is_top":false,"comment_ctime":1630310970,"is_pvip":false,"replies":[{"id":"112350","content":"好好学习，拍马屁也不能让你成长。哈哈","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1630473863,"ip_address":"","comment_id":309714,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1630310970","product_id":100042501,"comment_content":"高老师，实在是高","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":525975,"discussion_content":"好好学习，拍马屁也不能让你成长。哈哈","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630473863,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":309314,"user_name":"Geek_6bb","can_delete":false,"product_type":"c1","uid":2748610,"ip_address":"","ucode":"82CADDD4721CAD","user_header":"https://static001.geekbang.org/account/avatar/00/29/f0/c2/231d2f12.jpg","comment_is_top":false,"comment_ctime":1630043266,"is_pvip":false,"replies":[{"id":"111991","content":"这问题得结合具体的项目中的业务需求来做呀。没有固定的套路。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1630067577,"ip_address":"","comment_id":309314,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1630043266","product_id":100042501,"comment_content":"老师你好  能不能看一下 做混合场景测试的时候的  jmeter 脚本的配置呢    比如用了哪些组件    各个组件的配置是怎么样的    ","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":525823,"discussion_content":"这问题得结合具体的项目中的业务需求来做呀。没有固定的套路。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630067577,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2748610,"avatar":"https://static001.geekbang.org/account/avatar/00/29/f0/c2/231d2f12.jpg","nickname":"Geek_6bb","note":"","ucode":"82CADDD4721CAD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":392036,"discussion_content":"谢谢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630796289,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":305457,"user_name":"jy","can_delete":false,"product_type":"c1","uid":1785172,"ip_address":"","ucode":"F4E179C435451B","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJJ6G2xZvNRmhyXBjmGbI5G8icGCCMPupr6yxZ1IcURwp7GTRHcpWGWpg9A0fLlyicmVdDwzqZqwiaOQ/132","comment_is_top":false,"comment_ctime":1627981005,"is_pvip":false,"replies":[{"id":"110540","content":"这里不是为了获取到系统的最大容量值，所以可以不递增。<br>稳定性是关注的业务积累量。<br>异常是为了看在做异常动作时，tps曲线的变化。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1628052968,"ip_address":"","comment_id":305457,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1627981005","product_id":100042501,"comment_content":"老师，你好，稳定性和异常场景，线程数为啥不是递增的（阶梯加压）？","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":524392,"discussion_content":"这里不是为了获取到系统的最大容量值，所以可以不递增。\n稳定性是关注的业务积累量。\n异常是为了看在做异常动作时，tps曲线的变化。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628052968,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":305239,"user_name":"章鱼","can_delete":false,"product_type":"c1","uid":2673745,"ip_address":"","ucode":"D44893DC2526D4","user_header":"","comment_is_top":false,"comment_ctime":1627889803,"is_pvip":false,"replies":[{"id":"110619","content":"所以得操作呀。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1628152180,"ip_address":"","comment_id":305239,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1627889803","product_id":100042501,"comment_content":"每篇文章都听了好几遍，没哟实际的操作就意味着，我就算听了很多遍也会忘掉","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":524329,"discussion_content":"所以得操作呀。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628152180,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":305008,"user_name":"颜颜","can_delete":false,"product_type":"c1","uid":2718104,"ip_address":"","ucode":"2AE3A10A51EFC1","user_header":"https://static001.geekbang.org/account/avatar/00/29/79/98/fb1bf6c7.jpg","comment_is_top":false,"comment_ctime":1627747021,"is_pvip":false,"replies":[{"id":"110623","content":"这个我在第二个专栏中有过说明。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1628152402,"ip_address":"","comment_id":305008,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1627747021","product_id":100042501,"comment_content":"老师，基准测试执行15分钟，一般基准测试设置的线程数是多少？你设置的是1还是100？要是设置的是100，那ramp-up时间是怎么设置，还有响应时间  TPS 线程数这些图是jmeter本身就有的图吗？","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":524248,"discussion_content":"这个我在第二个专栏中有过说明。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628152402,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":303028,"user_name":"爱丽包°","can_delete":false,"product_type":"c1","uid":2535283,"ip_address":"","ucode":"125325E82EE6D2","user_header":"https://static001.geekbang.org/account/avatar/00/26/af/73/6bc60f7a.jpg","comment_is_top":false,"comment_ctime":1626525837,"is_pvip":false,"replies":[{"id":"109655","content":"1， 先确定服务器的总体容量。根据架构和硬件来评估。<br>2. 再确定一个线程的TPS。<br>3. 再通过递增确定能支持的压力线程数。 可以使用二分法之类的。 ","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1626536272,"ip_address":"","comment_id":303028,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1626525837","product_id":100042501,"comment_content":"容量还有稳定性场景中的线程数怎么确定的","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":523520,"discussion_content":"1， 先确定服务器的总体容量。根据架构和硬件来评估。\n2. 再确定一个线程的TPS。\n3. 再通过递增确定能支持的压力线程数。 可以使用二分法之类的。 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626536272,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":303001,"user_name":"爱丽包°","can_delete":false,"product_type":"c1","uid":2535283,"ip_address":"","ucode":"125325E82EE6D2","user_header":"https://static001.geekbang.org/account/avatar/00/26/af/73/6bc60f7a.jpg","comment_is_top":false,"comment_ctime":1626510586,"is_pvip":false,"replies":[{"id":"109658","content":"不能用曲线上的最大值来说明最大TPS。而是一个稳定的平均值来判断。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1626536451,"ip_address":"","comment_id":303001,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1626510586","product_id":100042501,"comment_content":"怎么看最大tps 比如业务5为什么不是600 业务1怎么看粗来680的","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":523509,"discussion_content":"不能用曲线上的最大值来说明最大TPS。而是一个稳定的平均值来判断。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626536451,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":301679,"user_name":"Judy","can_delete":false,"product_type":"c1","uid":1736094,"ip_address":"","ucode":"E1F38F79A9B110","user_header":"https://static001.geekbang.org/account/avatar/00/1a/7d/9e/dd0a6024.jpg","comment_is_top":false,"comment_ctime":1625808815,"is_pvip":false,"replies":[{"id":"109236","content":"看趋势，不要看平均数据。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1625885522,"ip_address":"","comment_id":301679,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1625808815","product_id":100042501,"comment_content":"求问两个问题：<br>1、“业务2 这个业务由于 TPS 太高，响应时间太短，实在没啥可分析的。”——-这里是因为响应时间太短说明性能比较好，没啥明显性能问题，所以才没啥好分析的吗？<br>2、在容量测试 中，总结表中的TPS和上面每个业务容量测试的statistics表中的TPS不一致呢？例如，总结表业务1时270，但是上面statistics表中时230.34，这里270时怎么得出来的呢？","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":523064,"discussion_content":"看趋势，不要看平均数据。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625885522,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":297725,"user_name":"0909","can_delete":false,"product_type":"c1","uid":1969097,"ip_address":"","ucode":"79C60A8D2B809A","user_header":"https://static001.geekbang.org/account/avatar/00/1e/0b/c9/b53037df.jpg","comment_is_top":false,"comment_ctime":1623747356,"is_pvip":false,"replies":[{"id":"108111","content":"jmeter用throughput controller就行。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1623764053,"ip_address":"","comment_id":297725,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1623747356","product_id":100042501,"comment_content":"老师，容量测试如何控制业务比例","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":521919,"discussion_content":"jmeter用throughput controller就行。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623764053,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":296547,"user_name":"沙棘","can_delete":false,"product_type":"c1","uid":2025411,"ip_address":"","ucode":"2B1E258A5530B2","user_header":"https://static001.geekbang.org/account/avatar/00/1e/e7/c3/ad741cdf.jpg","comment_is_top":false,"comment_ctime":1623037871,"is_pvip":false,"replies":[{"id":"107703","content":"历史数据统计出来的。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1623059945,"ip_address":"","comment_id":296547,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1623037871","product_id":100042501,"comment_content":"老师，问一个很白的问题：业务1目标tps是196，这个目标tps是怎么计算出来的？","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":521481,"discussion_content":"历史数据统计出来的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623059945,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":294573,"user_name":"安静。。。","can_delete":false,"product_type":"c1","uid":2069304,"ip_address":"","ucode":"4366269948B006","user_header":"https://static001.geekbang.org/account/avatar/00/1f/93/38/efb7eb38.jpg","comment_is_top":false,"comment_ctime":1622003261,"is_pvip":false,"replies":[{"id":"106980","content":"稳定性关注的业务累积量。所以需要从生产数据中统计较长的一段时间看每个业务的累积量，都要达到才可以。<br>你可以用峰值的接口比例来做稳定性，但前提是满足生产环境中对稳定性业务累积量的要求。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1622075827,"ip_address":"","comment_id":294573,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1622003261","product_id":100042501,"comment_content":"高老师，您好。您的文章让我受益匪浅。想请教一下，做容量测试的时候，取的是峰值的接口比例，做稳定性测试的时候的接口比例，也是取峰值的接口比例吗？<br>稳定性测试的时候，是不是应该取非峰值下，平时的一个接口调用比例呢？","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":520722,"discussion_content":"稳定性关注的业务累积量。所以需要从生产数据中统计较长的一段时间看每个业务的累积量，都要达到才可以。\n你可以用峰值的接口比例来做稳定性，但前提是满足生产环境中对稳定性业务累积量的要求。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622075827,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":290100,"user_name":"wfw001","can_delete":false,"product_type":"c1","uid":2352165,"ip_address":"","ucode":"0DA8A08367C3F8","user_header":"","comment_is_top":false,"comment_ctime":1619361319,"is_pvip":false,"replies":[{"id":"105222","content":"1. 不是线程数，是对应的tps数。如果你50线程降到25线程时，tps也恰好降到50%，那也行，通常我不用线程来判断，而是用tps来判断。<br>2. 异常场景只要覆盖你做动作的时间段就可以了。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1619492447,"ip_address":"","comment_id":290100,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1619361319","product_id":100042501,"comment_content":"1.稳定场景用容量场景的最大tps，异常场景用最大tps的50%，这个指的是tps对应的线程数吗？比如达到最大tps时候，业务1是50线程，业务二是80线程，那么异常场景可以设置业务一25线程和业务二40线程进行<br>2.异常场景的时间根据什么依据进行设定？","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":519112,"discussion_content":"1. 不是线程数，是对应的tps数。如果你50线程降到25线程时，tps也恰好降到50%，那也行，通常我不用线程来判断，而是用tps来判断。\n2. 异常场景只要覆盖你做动作的时间段就可以了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619492447,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":288229,"user_name":"懂Java的测试","can_delete":false,"product_type":"c1","uid":2141473,"ip_address":"","ucode":"09B04078DA2D1B","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJjiaeDudnGOBcibBqkmiaxHbTh4yibHujUpSAKJkPZDM2t3w58aAZ2PW7hOtmc7RicXKjibD8xNb9mLZVg/132","comment_is_top":false,"comment_ctime":1618370891,"is_pvip":false,"replies":[{"id":"104620","content":"请看方案那一篇文章中的业务比例表格。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1618372692,"ip_address":"","comment_id":288229,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1618370891","product_id":100042501,"comment_content":"业务场景比例占比什么意思？","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518555,"discussion_content":"请看方案那一篇文章中的业务比例表格。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618372692,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":286019,"user_name":"Geek_d67023","can_delete":false,"product_type":"c1","uid":2536827,"ip_address":"","ucode":"85671A828D071C","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJqnzNrwPhVVNvDKuu2gqJbAGMVGicia4Nnh34whYlNiarU99YfNlNaEiaibCibSyXrp7qCeOv9fjZicfQ2w/132","comment_is_top":false,"comment_ctime":1617108581,"is_pvip":false,"replies":[{"id":"103846","content":"线上历史数据统计出来的比例。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1617112880,"ip_address":"","comment_id":286019,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1617108581","product_id":100042501,"comment_content":"你好，请教下，在容量测试这个环节，业务1-6的压测线程数是通过什么逻辑来设定的？","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":517846,"discussion_content":"线上历史数据统计出来的比例。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617112880,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":281502,"user_name":"PULEI","can_delete":false,"product_type":"c1","uid":2006466,"ip_address":"","ucode":"93EC344D939220","user_header":"https://static001.geekbang.org/account/avatar/00/1e/9d/c2/2f8737ae.jpg","comment_is_top":false,"comment_ctime":1614766358,"is_pvip":false,"replies":[{"id":"103245","content":"根据业务确定。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1616422644,"ip_address":"","comment_id":281502,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1614766358","product_id":100042501,"comment_content":"老师，想问一下目标TPS怎么确定的呢","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":516421,"discussion_content":"根据业务确定。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616422644,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":278179,"user_name":"jy","can_delete":false,"product_type":"c1","uid":1785172,"ip_address":"","ucode":"F4E179C435451B","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJJ6G2xZvNRmhyXBjmGbI5G8icGCCMPupr6yxZ1IcURwp7GTRHcpWGWpg9A0fLlyicmVdDwzqZqwiaOQ/132","comment_is_top":false,"comment_ctime":1612790891,"is_pvip":false,"replies":[{"id":"103268","content":"根据业务比例来乘才对。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1616423265,"ip_address":"","comment_id":278179,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1612790891","product_id":100042501,"comment_content":"老师，请教：容量场景中，每个业务的线程数如何估算的？比如业务1容量场景中目标tps是100，基准场景中最大tps时的响应时间是rt，是否容量场景线程数=100&#47;(1000&#47;rt)?<br>谢谢","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":515305,"discussion_content":"根据业务比例来乘才对。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616423265,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":278162,"user_name":"jy","can_delete":false,"product_type":"c1","uid":1785172,"ip_address":"","ucode":"F4E179C435451B","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJJ6G2xZvNRmhyXBjmGbI5G8icGCCMPupr6yxZ1IcURwp7GTRHcpWGWpg9A0fLlyicmVdDwzqZqwiaOQ/132","comment_is_top":false,"comment_ctime":1612779524,"is_pvip":false,"replies":[{"id":"103269","content":"因为这时候递增不是关键了。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1616423286,"ip_address":"","comment_id":278162,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1612779524","product_id":100042501,"comment_content":"老师，请教下，稳定性和异常场景，线程数为啥不是递增的（阶梯加压）？","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":515302,"discussion_content":"因为这时候递增不是关键了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616423286,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":272447,"user_name":"欢乐马","can_delete":false,"product_type":"c1","uid":1730998,"ip_address":"","ucode":"F94C267FCAA2AD","user_header":"https://static001.geekbang.org/account/avatar/00/1a/69/b6/ec40830a.jpg","comment_is_top":false,"comment_ctime":1610091994,"is_pvip":false,"replies":[{"id":"99031","content":"容量场景是真实的业务场景，基准中强调在单业务上调优的过程，不是真实的业务场景。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1610533616,"ip_address":"","comment_id":272447,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1610091994","product_id":100042501,"comment_content":"容量测试在设计场景中将所有单业务混合一起看做是混合测试，容量测试的关注点是在不断增加用户数的基础上观察系统的最大承受量，还是将单业务的数量进行对比。那直接单业务也可以设计随用户数增加查看单业务的最大容量，不知道有什么区别。后面的部分也是难理解啊","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":513283,"discussion_content":"容量场景是真实的业务场景，基准中强调在单业务上调优的过程，不是真实的业务场景。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610533616,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":264734,"user_name":"大辉","can_delete":false,"product_type":"c1","uid":2313694,"ip_address":"","ucode":"B2A2A453C822D6","user_header":"https://static001.geekbang.org/account/avatar/00/23/4d/de/b4dda40a.jpg","comment_is_top":false,"comment_ctime":1606621603,"is_pvip":false,"replies":[{"id":"96440","content":"是的，响应时间快，线程自然就要增加的少一点，不然tps上升太快。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1606884329,"ip_address":"","comment_id":264734,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1606621603","product_id":100042501,"comment_content":"高老师，递增数据为什么看响应时间是快还是慢，如果响应时间快就少一点线程上升？","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":510669,"discussion_content":"是的，响应时间快，线程自然就要增加的少一点，不然tps上升太快。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606884329,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":256895,"user_name":"爱运动de小吃货","can_delete":false,"product_type":"c1","uid":2165166,"ip_address":"","ucode":"C49EC5BD66AAF1","user_header":"https://static001.geekbang.org/account/avatar/00/21/09/ae/f01bf96f.jpg","comment_is_top":false,"comment_ctime":1603778983,"is_pvip":false,"replies":[{"id":"93929","content":"主要是声音好听。哈哈。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1604280984,"ip_address":"","comment_id":256895,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1603778983","product_id":100042501,"comment_content":"听的时候有种吸收不完的感觉，哈哈哈，看来还需要多听多理解几遍。","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":508158,"discussion_content":"主要是声音好听。哈哈。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604280984,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":248444,"user_name":"一念","can_delete":false,"product_type":"c1","uid":1786499,"ip_address":"","ucode":"E647C079BC894A","user_header":"","comment_is_top":false,"comment_ctime":1600164904,"is_pvip":false,"replies":[{"id":"93963","content":"1. 线程数往上加就可以。<br>2. 稳定时主要看时长，不会一直往上加。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1604283278,"ip_address":"","comment_id":248444,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1600164904","product_id":100042501,"comment_content":"高老师有几个疑问：<br>1.拿案例中的业务2来说，使用Constant Throughput Timer定时器控制业务2的目标tps量为70560(jmeter该值是以分钟为单位1176*60)，混合容量测试结果业务2的tps值为什么大于业务目标TPS中业务2的tps？自己也试了一下Constant Throughput Timer这个定时器，汇总结果tps不会大于设置的目标吞吐量tps值。那这样控制各业务tps量级话，是不是无法测试出容量场景整体业务最大tps量级了？<br>2.在案例中稳定性测试，tps和active threads、响应时间图为什么没有明显的递增趋势情况了？<br>是不是已经测试出容量场景的整体业务最大tps量级，就不需要再ramp-up慢慢加载线程了，让ramp-up加载线程快些？","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":505652,"discussion_content":"1. 线程数往上加就可以。\n2. 稳定时主要看时长，不会一直往上加。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604283278,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":242275,"user_name":"potato","can_delete":false,"product_type":"c1","uid":1712675,"ip_address":"","ucode":"C3544C7F4BBDF4","user_header":"https://static001.geekbang.org/account/avatar/00/1a/22/23/5bf30be6.jpg","comment_is_top":false,"comment_ctime":1597656066,"is_pvip":false,"replies":[{"id":"93980","content":"可以用吞吐量控制器，也可以用其他的组件。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1604283871,"ip_address":"","comment_id":242275,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1597656066","product_id":100042501,"comment_content":"容量场景是用jmeter的吞吐量控制器吗","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":503967,"discussion_content":"可以用吞吐量控制器，也可以用其他的组件。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604283871,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":241621,"user_name":"chailyn","can_delete":false,"product_type":"c1","uid":2066287,"ip_address":"","ucode":"E4C7769B3AD311","user_header":"https://static001.geekbang.org/account/avatar/00/1f/87/6f/a1c56129.jpg","comment_is_top":false,"comment_ctime":1597372939,"is_pvip":false,"replies":[{"id":"93982","content":"这个要看具体的应用场景的。没有固定的设置。你可以设置长一点，只要看出问题来就好。 <br>","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1604283924,"ip_address":"","comment_id":241621,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1597372939","product_id":100042501,"comment_content":"老师，基准测试，测试持续时间该如何设计?我看到很多基准测试时间都很少，几分钟，既然要看出最大tps，不断加压，时间上难道不应该长点吗？还有没有需求，目标TPS和业务比例真的不好计算呢，按实际运营环境下，比如1分钟内要接诊70和病人，那么大概就是目标tps为2，可是这样算真的对吗？","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":503792,"discussion_content":"这个要看具体的应用场景的。没有固定的设置。你可以设置长一点，只要看出问题来就好。 \n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604283924,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":239109,"user_name":"阳雅莉","can_delete":false,"product_type":"c1","uid":1860697,"ip_address":"","ucode":"F0950F3C2149DE","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI4S1hv2icZRS7IVrsibhMBRP4Eo8rpN0fY9YLLywV1VFcI1czZibpFqbTU4JFwTIswk2lauKhPgYe6w/132","comment_is_top":false,"comment_ctime":1596437761,"is_pvip":false,"replies":[{"id":"93992","content":"这个在每个项目中都会不同。都是通过测试过程不断修正才可以的。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1604284185,"ip_address":"","comment_id":239109,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1596437761","product_id":100042501,"comment_content":"老师好，想咨询下，您在容量性能测试小节里面配置的各业务的线程数的配置的依据是什么，这个线程数的配置会和业务量有关么？","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":502983,"discussion_content":"这个在每个项目中都会不同。都是通过测试过程不断修正才可以的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604284185,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":237968,"user_name":"莫西 👫 小妞儿 👼 🎵","can_delete":false,"product_type":"c1","uid":1165199,"ip_address":"","ucode":"553BF89ED22111","user_header":"https://static001.geekbang.org/account/avatar/00/11/c7/8f/fcfaf45a.jpg","comment_is_top":false,"comment_ctime":1596016575,"is_pvip":false,"replies":[{"id":"87949","content":"不是根据最大TPS来分配。做单交易基准是为了看单交易最大TPS能达到多高。为容量场景做数据比对，以便判断在容量场景中哪个单交易更可能成为最大的瓶颈。<br>在容量测试中是应该按实际业务使用比例来分配的。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1596069703,"ip_address":"","comment_id":237968,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1596016575","product_id":100042501,"comment_content":"老师，想问一下您文章里举的容量测试场景的例子中，并发比例是根据单交易可支持的最大tps的比例来分配的么？为什么要这样分配比例呢？我原本理解的容量测试的并发比例要根据实际业务的使用情况来分配。比如场景1用的人多，那么分配的比例就高一些","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":502602,"discussion_content":"不是根据最大TPS来分配。做单交易基准是为了看单交易最大TPS能达到多高。为容量场景做数据比对，以便判断在容量场景中哪个单交易更可能成为最大的瓶颈。\n在容量测试中是应该按实际业务使用比例来分配的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596069703,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":236599,"user_name":"郝洁怡","can_delete":false,"product_type":"c1","uid":2037971,"ip_address":"","ucode":"50DEFE489B3708","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/uG2kliaKAroGkNaXSwFNEmbhnqBictyaMaibUr8gOT0mVwTkT78Y409qbT49oiawRDD5ibeTVy8uS7hojibkq120tDuw/132","comment_is_top":false,"comment_ctime":1595474277,"is_pvip":false,"replies":[{"id":"87951","content":"tps就是每秒事务数。我们使用吞吐量这个词时，是用TPS这个概念来承载的而已。这时说的不是网络吞吐量。<br>","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1596069809,"ip_address":"","comment_id":236599,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1595474277","product_id":100042501,"comment_content":"高老师，问一个小白的问题，TPS到底是吞吐量还是每秒通过事务数啊，我在文章里面看到有些throughput的值您引用的时候写的是tps， 我有点疑惑，希望解答一下","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":502135,"discussion_content":"tps就是每秒事务数。我们使用吞吐量这个词时，是用TPS这个概念来承载的而已。这时说的不是网络吞吐量。\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596069809,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":222864,"user_name":"jy","can_delete":false,"product_type":"c1","uid":1785172,"ip_address":"","ucode":"F4E179C435451B","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJJ6G2xZvNRmhyXBjmGbI5G8icGCCMPupr6yxZ1IcURwp7GTRHcpWGWpg9A0fLlyicmVdDwzqZqwiaOQ/132","comment_is_top":false,"comment_ctime":1590933698,"is_pvip":false,"replies":[{"id":"84042","content":"我检查了一下，没看到有问题呀。可以联系我，详细说明一下。发红包。微信：Zee_7D","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1592533067,"ip_address":"","comment_id":222864,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1590933698","product_id":100042501,"comment_content":"文章最开头，业务6，15%，442，这个数据对不上呢？算下来总的tps，不是2800，前面算出来都是2800","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496939,"discussion_content":"我检查了一下，没看到有问题呀。可以联系我，详细说明一下。发红包。微信：Zee_7D","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592533067,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2069304,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/93/38/efb7eb38.jpg","nickname":"安静。。。","note":"","ucode":"4366269948B006","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":302319,"discussion_content":"想知道这里按怎么能根据单业务的TPS，计算出业务目标的TPS的？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598878523,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":222498,"user_name":"HE明伟","can_delete":false,"product_type":"c1","uid":1211663,"ip_address":"","ucode":"DC302021D4250A","user_header":"https://static001.geekbang.org/account/avatar/00/12/7d/0f/26c38307.jpg","comment_is_top":false,"comment_ctime":1590821571,"is_pvip":false,"replies":[{"id":"84047","content":"这个4500是笔误，已经告诉编辑改了。多谢。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1592533537,"ip_address":"","comment_id":222498,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1590821571","product_id":100042501,"comment_content":"高老师，您好，我对文章中的基准测试，业物6的结论有疑问<br>“响应时间随着用户的增而增加，在达到 4500TPS 时，响应时间在 16ms 左右”，从TPS的图来看，没有达到4500，这个响应时间是16MS，<br>所以想请教您一下，您是怎么通过图中数据，得到这个两个值得","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496820,"discussion_content":"这个4500是笔误，已经告诉编辑改了。多谢。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592533537,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":213370,"user_name":"Technological life","can_delete":false,"product_type":"c1","uid":1696794,"ip_address":"","ucode":"0368ED53F14997","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ergiaP9dmjrW39G73N9qv0icInW4xygvNehp0uc3IS0d6BozdIgl9eH2obNWhaLIiaw1aEOBHx0nibibDA/132","comment_is_top":false,"comment_ctime":1588397362,"is_pvip":false,"replies":[{"id":"81984","content":"用容量测试到最大TPS之后，再用最大TPS的50%来做。<br>","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1590749327,"ip_address":"","comment_id":213370,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1588397362","product_id":100042501,"comment_content":"高老师，您说异常测试是用50%tps来测试。tps不是服务器的自身的性能指标吗?那怎么控制这50%的量呢?","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":493760,"discussion_content":"用容量测试到最大TPS之后，再用最大TPS的50%来做。\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590749327,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":211969,"user_name":"Geek_8868d7","can_delete":false,"product_type":"c1","uid":1855146,"ip_address":"","ucode":"202337B7EDDEA7","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLnL02lia3my7bp5YHia9L8mtIoTnVZmDDr49ibZI3uTVrkDw0qQbuIkDBjOC6jE3Zf0yfBibk7F61JjA/132","comment_is_top":false,"comment_ctime":1588041306,"is_pvip":false,"replies":[{"id":"81988","content":"混合场景是ABC的比例。123是不是要包括，取决于业务模型比例。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1590749487,"ip_address":"","comment_id":211969,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1588041306","product_id":100042501,"comment_content":"高老师好，关于单点和混合业务场景我还有点疑惑。比如一个系统包含了多个大的功能模块ABC，功能模块A可能就有很多不同的功能123。那请问单点场景是指1还是A呢？混合场景是123的比例呢，还是ABC的比例呢，如果指ABC，那ABC里面的123是要全部包括呢，还是抽取一部分呢？","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":493400,"discussion_content":"混合场景是ABC的比例。123是不是要包括，取决于业务模型比例。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590749487,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":188934,"user_name":"董飞","can_delete":false,"product_type":"c1","uid":1693828,"ip_address":"","ucode":"4A4A13C4A971E3","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/6Be8vjNk03LEXMl52vONOQvdKTL1MWPR6OsAGEDsHIZXw9FibW8c4YtNL6HAmB8wRkDNIEx15xawJ9PWLW4y1UA/132","comment_is_top":false,"comment_ctime":1584435570,"is_pvip":false,"replies":[{"id":"72914","content":"这个过程要不断尝试。<br>比如说，单业务场景时，我们并不知道系统最大支持多少TPS。那就设置一个比较大的压力线程值，然后设置ramp-up的值，在执行过程中观察TPS的变化。 ","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1584449786,"ip_address":"","comment_id":188934,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1584435570","product_id":100042501,"comment_content":"老师，容量性能场景是根据业务比例，单业务场景的tps和响应时间设计线程递增的，具体是怎么做的？研究半天还是没看懂。望解答，多谢老师。","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":487569,"discussion_content":"这个过程要不断尝试。\n比如说，单业务场景时，我们并不知道系统最大支持多少TPS。那就设置一个比较大的压力线程值，然后设置ramp-up的值，在执行过程中观察TPS的变化。 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584449786,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":188778,"user_name":"小呆呆","can_delete":false,"product_type":"c1","uid":1798489,"ip_address":"","ucode":"6A04486F1FC932","user_header":"https://static001.geekbang.org/account/avatar/00/1b/71/59/642cd27a.jpg","comment_is_top":false,"comment_ctime":1584414885,"is_pvip":false,"replies":[{"id":"72901","content":"根据生产环境统计数据的业务比例来的。这个在其他地方有描述。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1584446006,"ip_address":"","comment_id":188778,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1584414885","product_id":100042501,"comment_content":"高老师好，请教一下，基准性能场景业务1,2,3,4,5,6可以看得懂，不知道容量性能场景是怎么基准性能场景演变出来的，没看明白。容量性能场景是基于实际的业务量的吗？","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":487519,"discussion_content":"根据生产环境统计数据的业务比例来的。这个在其他地方有描述。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584446006,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":187289,"user_name":"sunshineling","can_delete":false,"product_type":"c1","uid":1543564,"ip_address":"","ucode":"7E8E03C8568112","user_header":"https://static001.geekbang.org/account/avatar/00/17/8d/8c/ec40964b.jpg","comment_is_top":false,"comment_ctime":1584074754,"is_pvip":true,"replies":[{"id":"72335","content":"对大数据和批处理，数据量是最重要的环节，必然要和业务一致。<br>时间和其他的测试一样，得有指定的时间指标，没指标是没法判断是否可以结束的。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1584112395,"ip_address":"","comment_id":187289,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1584074754","product_id":100042501,"comment_content":"老师，像批处理和大数据这种的，该怎样设计常见呢？场景设计是不是准备预估的数据量，然后看看能不能在指定的时间内完成就可以了哇？","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":487061,"discussion_content":"对大数据和批处理，数据量是最重要的环节，必然要和业务一致。\n时间和其他的测试一样，得有指定的时间指标，没指标是没法判断是否可以结束的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584112395,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":183310,"user_name":"笑对人生","can_delete":false,"product_type":"c1","uid":1665355,"ip_address":"","ucode":"875FB4D352E860","user_header":"https://static001.geekbang.org/account/avatar/00/19/69/4b/9ad7e399.jpg","comment_is_top":false,"comment_ctime":1582991740,"is_pvip":false,"replies":[{"id":"70933","content":"没太明白，你说的3400是哪个值？","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1583026715,"ip_address":"","comment_id":183310,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1582991740","product_id":100042501,"comment_content":"容量场景中，测试出的聚合报告图形和整理后的报告，总的吞吐量为什么不一样，一个是3400，一个是3800","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":485645,"discussion_content":"没太明白，你说的3400是哪个值？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583026715,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":183147,"user_name":"wjh","can_delete":false,"product_type":"c1","uid":1786500,"ip_address":"","ucode":"3504E24EC6D097","user_header":"https://static001.geekbang.org/account/avatar/00/1b/42/84/e0a6fc1c.jpg","comment_is_top":false,"comment_ctime":1582961982,"is_pvip":false,"replies":[{"id":"70892","content":"异常场景和架构非常相关。这个话题要展开的话，不是几篇文章可以尽述的。<br>后面我会考虑如何细化写，这完全可以是一个新专栏的级别了。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1582982446,"ip_address":"","comment_id":183147,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1582961982","product_id":100042501,"comment_content":"高老师，能不能写一写除了容量，稳定性测试之外，其他性能异常场景，这块很少有人涉及，感谢😊 ","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":485574,"discussion_content":"异常场景和架构非常相关。这个话题要展开的话，不是几篇文章可以尽述的。\n后面我会考虑如何细化写，这完全可以是一个新专栏的级别了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582982446,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":182750,"user_name":"那片海","can_delete":false,"product_type":"c1","uid":1212165,"ip_address":"","ucode":"163E5337292C1C","user_header":"https://static001.geekbang.org/account/avatar/00/12/7f/05/ab6c5624.jpg","comment_is_top":false,"comment_ctime":1582859944,"is_pvip":false,"replies":[{"id":"70728","content":"1，稳定性测试主要在时长和累积业务量，你这样递增可以的。不过要注意关注重点。<br>业务比例是要控制的。<br>2，不管是多个还是一个模拟器，只要实现压力就可以。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1582887492,"ip_address":"","comment_id":182750,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1582859944","product_id":100042501,"comment_content":"高老师好，有两个细节问题咨询下，谢谢<br>1.稳定性测试，使用最大tps进行压测，这个时候的压力是通过梯度递增线程到最大线程数，满足加压到最大tps，然后持续运行满足业务需要的时长吗？<br><br>另外需要在测试中对每个业务使用 constant through timer对每个业务吞吐量设置吗？<br><br>2.这样不同的业务，是部署一个jmeter模拟器通过建立不同的线程区分业务，然后对每个业务都设置一个吞吐量定时器。还是使用不同的模拟器 分别加压一个业务？<br><br>","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":485435,"discussion_content":"1，稳定性测试主要在时长和累积业务量，你这样递增可以的。不过要注意关注重点。\n业务比例是要控制的。\n2，不管是多个还是一个模拟器，只要实现压力就可以。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582887492,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":180058,"user_name":"麦兜布熊","can_delete":false,"product_type":"c1","uid":1118352,"ip_address":"","ucode":"F46E3571FAE9FE","user_header":"https://static001.geekbang.org/account/avatar/00/11/10/90/5cb92311.jpg","comment_is_top":false,"comment_ctime":1582176132,"is_pvip":false,"replies":[{"id":"69919","content":"xmind","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1582183074,"ip_address":"","comment_id":180058,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1582176132","product_id":100042501,"comment_content":"高老师歪个楼，您的思维导图用什么软件画的，太好看了！","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484503,"discussion_content":"xmind","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582183074,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":178365,"user_name":"SugarTurboS","can_delete":false,"product_type":"c1","uid":1030498,"ip_address":"","ucode":"6003D6FB6AD4F7","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b9/62/b5c76d98.jpg","comment_is_top":false,"comment_ctime":1581669822,"is_pvip":false,"replies":[{"id":"69191","content":"生产数据统计出来的。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1581683867,"ip_address":"","comment_id":178365,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1581669822","product_id":100042501,"comment_content":"老师您好，没有看明白容量测试场景TPS的数据是怎么得出来的。","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":483775,"discussion_content":"生产数据统计出来的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581683867,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1229136,"avatar":"https://static001.geekbang.org/account/avatar/00/12/c1/50/ce45f6b7.jpg","nickname":"Alice","note":"","ucode":"3AE3BE98509D89","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":187812,"discussion_content":"业务1-6的线程图和响应时间图是咋来的？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582770516,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":176572,"user_name":"杜艳","can_delete":false,"product_type":"c1","uid":1168516,"ip_address":"","ucode":"8D46A8CF33E9C7","user_header":"https://static001.geekbang.org/account/avatar/00/11/d4/84/7f584cb2.jpg","comment_is_top":false,"comment_ctime":1581089533,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1581089533","product_id":100042501,"comment_content":"感觉还是没有很基础","like_count":0},{"had_liked":false,"id":174698,"user_name":"小老鼠","can_delete":false,"product_type":"c1","uid":1257460,"ip_address":"","ucode":"C663A0C863A515","user_header":"https://static001.geekbang.org/account/avatar/00/13/2f/f4/2dede51a.jpg","comment_is_top":false,"comment_ctime":1580354915,"is_pvip":false,"replies":[{"id":"68603","content":"没看懂这个问题，请描述多些。给些具体的数据。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1581165876,"ip_address":"","comment_id":174698,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1580354915","product_id":100042501,"comment_content":"稳定性性能场景中100%最大TPS出现了error，而80%正常，如何判断稳定性性能测试是否有Bug。","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":482494,"discussion_content":"没看懂这个问题，请描述多些。给些具体的数据。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581165876,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":172763,"user_name":"songyy","can_delete":false,"product_type":"c1","uid":1007201,"ip_address":"","ucode":"34D6443B91676D","user_header":"https://static001.geekbang.org/account/avatar/00/0f/5e/61/985f3eb7.jpg","comment_is_top":false,"comment_ctime":1579276034,"is_pvip":false,"replies":[{"id":"67021","content":"第二个理解的不对哦。80%也不一定就会有抖动。<br>而应该是只要用稳定的TPS就可以了。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1579278091,"ip_address":"","comment_id":172763,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1579276034","product_id":100042501,"comment_content":"思考题<br>\t- 性能场景应该按什么样的逻辑设计: 了解目标要支持多少流量，峰值流量如何，最大月份共计需要支持多少流量。然后用总计流量，除以峰值流量，可以得到以峰值流量进行性能测试的时间<br>以及在稳定性场景中，为什么不用最大 TPS 的 80% 来做：因为80%就太高了，CPU的抖动会比较大，很难控制变量","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481842,"discussion_content":"第二个理解的不对哦。80%也不一定就会有抖动。\n而应该是只要用稳定的TPS就可以了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579278091,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":172299,"user_name":"律飛","can_delete":false,"product_type":"c1","uid":1462608,"ip_address":"","ucode":"65394E437AD2DF","user_header":"https://static001.geekbang.org/account/avatar/00/16/51/50/f5f2a121.jpg","comment_is_top":false,"comment_ctime":1579146168,"is_pvip":false,"replies":[{"id":"66877","content":"第二个问题的理解没有说到关键点。 <br>","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1579185338,"ip_address":"","comment_id":172299,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1579146168","product_id":100042501,"comment_content":"第一个问题，性能场景应该按什么样的逻辑设计吗？<br>第一步，通过调研分析以及经验等途径获得并列出需要测试的业务、业务比例、业务目标TPS和响应时间指标；如果没有以上数据，也可采用头脑风暴法，也就是俗称的拍脑袋法，来获取相关信息，当然，这时测试过程会延长，需要通过想法、验证、修正等步骤，逐步获取较为精确的数据。<br>第二步，开展基准性能场景测试，获得每个业务的最大TPS和响应时间。<br>第三步，开展容量性能场景测试，在场景不断和控制比例的要求下，设计合理的各业务参数，测试后分析数据。<br>第四步，开展稳定性性能场景测试。在容量场景测试的基础上，确定综合业务TPS和时长。<br>第五步，开展异常性能测试，在全面分析架构图的基础上，根据测试目标选择压力参数，设计运行场景。<br>第二个问题，在稳定性场景中，为什么不用最大 TPS 的 80% 来做？<br>二八原则适用于头脑风暴法，也就是没有分析数据，没有经验值，自己拍脑袋的话，还不如采用这种方法，至少说起来还有一定的依据。😅<br>但是按第一个问题的回答，在稳定性场景测试时，我们已获取了需要的信息，因此没必要采用这个法子了。","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481690,"discussion_content":"第二个问题的理解没有说到关键点。 \n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579185338,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":172075,"user_name":"志富","can_delete":false,"product_type":"c1","uid":1765077,"ip_address":"","ucode":"99DAF4CF1EFAB7","user_header":"https://static001.geekbang.org/account/avatar/00/1a/ee/d5/1aa85ac8.jpg","comment_is_top":false,"comment_ctime":1579082617,"is_pvip":false,"replies":[{"id":"66736","content":"为了混合容量场景中设置比例。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1579094418,"ip_address":"","comment_id":172075,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1579082617","product_id":100042501,"comment_content":"老师那个业务占比是用来干什么的？得到业务占比是为了后面的什么用途需要呢？","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481610,"discussion_content":"为了混合容量场景中设置比例。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579094418,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":171908,"user_name":"ldm","can_delete":false,"product_type":"c1","uid":1785893,"ip_address":"","ucode":"1B8521BF2BCAB4","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJiabrzic7IeQJGzicQDzyiaXkD3kY1E4rzXnU5XChibwSyvqqqnUpDMEtVv1BjjYQ8ZKD7k7KQJBhib0zg/132","comment_is_top":false,"comment_ctime":1579052147,"is_pvip":false,"replies":[{"id":"66670","content":"从技术操作上来说，可以截取出来。<br>可是为什么要截取出来？","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1579063283,"ip_address":"","comment_id":171908,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1579052147","product_id":100042501,"comment_content":"高老师，好，请教个小白的问题，jmeter按照梯度运行，每个阶梯的数据可以像LR一样截取出来吗？<br>例如：按照10、20、30线程各运行10分钟，可以把每个梯度的数据截取出来吗？","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481543,"discussion_content":"从技术操作上来说，可以截取出来。\n可是为什么要截取出来？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579063283,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1785893,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJiabrzic7IeQJGzicQDzyiaXkD3kY1E4rzXnU5XChibwSyvqqqnUpDMEtVv1BjjYQ8ZKD7k7KQJBhib0zg/132","nickname":"ldm","note":"","ucode":"1B8521BF2BCAB4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":135161,"discussion_content":"除了看趋势，统计每个梯度的具体数值，老师有什么截取的好方法吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579074038,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":171635,"user_name":"qiaotaoli","can_delete":false,"product_type":"c1","uid":1390856,"ip_address":"","ucode":"F1504DEA634FE9","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/xRYuVOluJxeuRtmKPjwwkZUziaj0juNp7eYpQ5n9KbuyPzp1GedN6gXdoNyzOEAAqtkqWaXFHsiapFcRmU09NNAA/132","comment_is_top":false,"comment_ctime":1578983573,"is_pvip":false,"replies":[{"id":"66638","content":"没有业务统计数据参照，只能找有经验的人拍脑袋了。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1579047371,"ip_address":"","comment_id":171635,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1578983573","product_id":100042501,"comment_content":"老师，你上面讲的场景设计是开篇已经有了各个业务的比例以及各个业务的TPS指标，对于没有明确指标数据的系统如果去定这些指标呢？比如有个用券兑换礼品的系统，用户就说我有500w张券，用券兑换礼品的活动持续时间是1个月，需要做个性能测试保证这个1个月内系统不要出问题。对于这样的情况，该如何去定指标并完成整个性能测试呢？","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481445,"discussion_content":"没有业务统计数据参照，只能找有经验的人拍脑袋了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579047371,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":171587,"user_name":"nana","can_delete":false,"product_type":"c1","uid":1258652,"ip_address":"","ucode":"C4AD21B5F52F71","user_header":"https://static001.geekbang.org/account/avatar/00/13/34/9c/30cd6840.jpg","comment_is_top":false,"comment_ctime":1578970414,"is_pvip":false,"replies":[{"id":"66530","content":"场景执行时连续。生成的结果报告自然就是那样了。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1578983513,"ip_address":"","comment_id":171587,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1578970414","product_id":100042501,"comment_content":"弱问老师线程数递增图和响应时间图是怎么生成的？谢谢<br>当前的测试都是分开的，比如10 threads 对应的响应时间t1， 20threads对应的响应时间点t2。记录了这两个场景的值","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481423,"discussion_content":"场景执行时连续。生成的结果报告自然就是那样了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578983513,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1518968,"avatar":"https://static001.geekbang.org/account/avatar/00/17/2d/78/0640f9fe.jpg","nickname":"Geek4%","note":"","ucode":"A8D51408BB3357","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":187590,"discussion_content":"该怎么连续呢？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582736878,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1168516,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d4/84/7f584cb2.jpg","nickname":"杜艳","note":"","ucode":"8D46A8CF33E9C7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":163699,"discussion_content":"还是不会连续啊，能对应jmeter讲解具体点吗？知道怎么分析了，不知道这些数据图怎么来的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581089282,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":171453,"user_name":"米儿","can_delete":false,"product_type":"c1","uid":1315707,"ip_address":"","ucode":"8CEF877924537E","user_header":"https://static001.geekbang.org/account/avatar/00/14/13/7b/f1220e26.jpg","comment_is_top":false,"comment_ctime":1578925630,"is_pvip":false,"replies":[{"id":"66504","content":"你可以用吞吐量控制器。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1578975310,"ip_address":"","comment_id":171453,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1578925630","product_id":100042501,"comment_content":"高老师，jmeter中您是怎么来控制业务比例？我自己在实际压测的过程中很难做到比例的精确，多个线程组的话，每个业务的响应时间又都不相同，求赐教","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481358,"discussion_content":"你可以用吞吐量控制器。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578975310,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":171342,"user_name":"🐻","can_delete":false,"product_type":"c1","uid":1165279,"ip_address":"","ucode":"CA5E9FA604D921","user_header":"https://static001.geekbang.org/account/avatar/00/11/c7/df/d099eca7.jpg","comment_is_top":false,"comment_ctime":1578905665,"is_pvip":false,"replies":[{"id":"66511","content":"没有业务指标是可以测试出最大tps的哇。只要有业务比例即可。线程数是根据业务比例来的。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1578975781,"ip_address":"","comment_id":171342,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1578905665","product_id":100042501,"comment_content":"高老师 有个问题想问一下。如果没有业务指标情况下 想要跑压测之类 有没有一些常规的指标？或者要怎么去定线程数之类的","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481305,"discussion_content":"没有业务指标是可以测试出最大tps的哇。只要有业务比例即可。线程数是根据业务比例来的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578975781,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":171339,"user_name":"Geek_a98085","can_delete":false,"product_type":"c1","uid":1637292,"ip_address":"","ucode":"33BD817345C0C9","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/z5OUcd5RD7jVxKTnqsokibptjib5sgO9fP4dg0I7kCI2ncvuxX99vM958ickdgthziaviajWGAIzI9tcZOwbNxxLBcw/132","comment_is_top":false,"comment_ctime":1578904922,"is_pvip":false,"replies":[{"id":"66512","content":"做为尝试场景，可以这样做。只是要知道这个结果对线上没有参考价值。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1578975813,"ip_address":"","comment_id":171339,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1578904922","product_id":100042501,"comment_content":"如果是新的项目，没有拿到比例的情况，是不是可以按默认1:1:1的比例来执行容量场景？","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481303,"discussion_content":"做为尝试场景，可以这样做。只是要知道这个结果对线上没有参考价值。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578975813,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}