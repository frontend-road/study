{"id":118990,"title":"08 | 工欲善其事必先利其器：学会使用各种工具","content":"<p>你好，我是盛延敏，这里是网络编程实战第8讲，欢迎回来。</p><p>上一讲我们讲到了本地套接字，加上前面介绍的TCP、UDP套接字，你会发现我们已经比较全面地接触了套接字。</p><p>其实在平常使用套接字开发和测试过程中，我们总会碰到这样或那样的问题。学会对这些问题进行诊断和分析，其实需要不断地积累经验。而Linux平台下提供的各种网络工具，则为我们进行诊断分析提供了很好的帮助。在这一讲里，我将会选择几个重点的工具逐一介绍。</p><h2>必备工具: ping</h2><p>这个命令我想大家都不陌生，“ping”这个命名来自于声呐探测，在网络上用来完成对网络连通性的探测，这个命名可以说是恰如其分了。</p><pre><code>$ ping www.sina.com.cn\nPING www.sina.com.cn (202.102.94.124) 56(84) bytes of data.\n64 bytes from www.sina.com.cn (202.102.94.124): icmp_seq=1 ttl=63 time=8.64 ms\n64 bytes from www.sina.com.cn (202.102.94.124): icmp_seq=2 ttl=63 time=11.3 ms\n64 bytes from www.sina.com.cn (202.102.94.124): icmp_seq=3 ttl=63 time=8.66 ms\n64 bytes from www.sina.com.cn (202.102.94.124): icmp_seq=4 ttl=63 time=13.7 ms\n64 bytes from www.sina.com.cn (202.102.94.124): icmp_seq=5 ttl=63 time=8.22 ms\n64 bytes from www.sina.com.cn (202.102.94.124): icmp_seq=6 ttl=63 time=7.99 ms\n^C\n--- www.sina.com.cn ping statistics ---\n6 packets transmitted, 6 received, 0% packet loss, time 5006ms\nrtt min/avg/max/mdev = 7.997/9.782/13.795/2.112 ms\n</code></pre><p>在上面的例子中，我使用ping命令探测了和新浪网的网络连通性。可以看到，每次显示是按照sequence序列号排序显示的，一并显示的，也包括TTL（time to live），反映了两个IP地址之间传输的时间。最后还显示了ping命令的统计信息，如最小时间、平均时间等。</p><p>我们需要经常和Linux下的ping命令打交道，那么ping命令的原理到底是什么呢？它是基于TCP还是UDP开发的？</p><p>都不是。</p><p>其实，ping是基于一种叫做ICMP的协议开发的，ICMP又是一种基于IP协议的控制协议，翻译为网际控制协议，其报文格式如下图：</p><!-- [[[read_end]]] --><p><img src=\"https://static001.geekbang.org/resource/image/15/38/1555df944c00bdba5c2a4ea3c55cf338.png?wh=2368*2243\" alt=\"\"><br>\nICMP在IP报文后加入了新的内容，这些内容包括：</p><ul>\n<li>类型：即ICMP的类型, 其中ping的请求类型为8，应答为0。</li>\n<li>代码：进一步划分ICMP的类型, 用来查找产生错误的原因。</li>\n<li>校验和：用于检查错误的数据。</li>\n<li>标识符：通过标识符来确认是谁发送的控制协议，可以是进程ID。</li>\n<li>序列号：唯一确定的一个报文，前面ping名字执行后显示的icmp_seq就是这个值。</li>\n</ul><p>当我们发起ping命令时，ping程序实际上会组装成如图的一个IP报文。报文的目的地址为ping的目标地址，源地址就是发送ping命令时的主机地址，同时按照ICMP报文格式填上数据，在可选数据上可以填上发送时的时间戳。</p><p>IP报文通过ARP协议，源地址和目的地址被翻译成MAC地址，经过数据链路层后，报文被传输出去。当报文到达目的地址之后，目的地址所在的主机也按照ICMP协议进行应答。之所以叫做协议，是因为双方都会遵守这个报文格式，并且也会按照格式进行发送-应答。</p><p>应答数据到达源地址之后，ping命令可以通过再次解析ICMP报文，对比序列号，计算时间戳等来完成每个发送-应答的显示，最终显示的格式就像前面的例子中展示的一样。</p><p>可以说，ICMP协议为我们侦测网络问题提供了非常好的支持。另外一种对路由的检测命令Traceroute也是通过ICMP协议来完成的，这里就不展开讲了。</p><h2>基本命令: ifconfig</h2><p>很多熟悉Windows的同学都知道Windows有一个ipconfig命令，用来显示当前的网络设备列表。事实上，Linux有一个对应的命令叫做ifconfig，也用来显示当前系统中的所有网络设备，通俗一点的说，就是网卡列表。</p><pre><code>vagrant@ubuntu-xenial-01:~$ ifconfig\ncni0      Link encap:Ethernet  HWaddr 0a:58:0a:f4:00:01\n          inet addr:10.244.0.1  Bcast:0.0.0.0  Mask:255.255.255.0\n          inet6 addr: fe80::401:b4ff:fe51:bcf9/64 Scope:Link\n          UP BROADCAST RUNNING MULTICAST  MTU:1450  Metric:1\n          RX packets:2133 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:2216 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:1000\n          RX bytes:139381 (139.3 KB)  TX bytes:853302 (853.3 KB)\n\n\ndocker0   Link encap:Ethernet  HWaddr 02:42:93:0f:f7:11\n          inet addr:172.17.0.1  Bcast:0.0.0.0  Mask:255.255.0.0\n          inet6 addr: fe80::42:93ff:fe0f:f711/64 Scope:Link\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\n          RX packets:653 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:685 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:0\n          RX bytes:49542 (49.5 KB)  TX bytes:430826 (430.8 KB)\n\n\nenp0s3    Link encap:Ethernet  HWaddr 02:54:ad:ea:60:2e\n          inet addr:10.0.2.15  Bcast:10.0.2.255  Mask:255.255.255.0\n          inet6 addr: fe80::54:adff:feea:602e/64 Scope:Link\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\n          RX packets:7951 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:4123 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:1000\n          RX bytes:5081047 (5.0 MB)  TX bytes:385600 (385.6 KB)\n</code></pre><p>我稍微解释一下这里面显示的数据。</p><pre><code>Link encap:Ethernet  HWaddr 02:54:ad:ea:60:2e\n</code></pre><p>上面这段表明这是一个以太网设备，MAC地址为02:54:ad:ea:60:2e。</p><pre><code>inet addr:10.0.2.15  Bcast:10.0.2.255  Mask:255.255.255.0\ninet6 addr: fe80::54:adff:feea:602e/64 Scope:Link\n</code></pre><p>这里显示的是网卡的IPv4和IPv6地址，其中IPv4还显示了该网络的子网掩码以及广播地址。</p><p>在每个IPv4子网中，有一个特殊地址被保留作为子网广播地址，比如这里的10.0.2.255就是这个子网的广播地址。当向这个地址发送请求时，就会向以太网网络上的一组主机发送请求。</p><p>通常来说，这种被称作广播（broadcast）的技术，是用UDP来实现的。</p><pre><code>UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\n</code></pre><p>这里显示的是网卡的状态，MTU是最大传输单元的意思，表示的是链路层包的大小。1500表示的是字节大小。</p><p>Metric大家可能不知道是干啥用的，这里解释下，Linux在一台主机上可以有多个网卡设备，很可能有这么一种情况，多个网卡可以路由到目的地。一个简单的例子是在同时有无线网卡和有线网卡的情况下，网络连接是从哪一个网卡设备上出去的？Metric就是用来确定多块网卡的优先级的，数值越小，优先级越高，1为最高级。</p><pre><code>          RX packets:7951 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:4123 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:1000\n          RX bytes:5081047 (5.0 MB)  TX bytes:385600 (385.6 KB)\n</code></pre><h2>netstat和lsof：对网络状况了如指掌</h2><p>在平时的工作中，我们最常碰到的问题就是某某进程对应的网络状况如何？是不是连接被打爆了？还是有大量的TIME_WAIT连接？</p><p>netstat可以帮助我们了解当前的网络连接状况，比如我想知道当前所有的连接详情，就可以使用下面这行命令：</p><pre><code>netstat -alepn\n</code></pre><p>可能的结果为：</p><p><img src=\"https://static001.geekbang.org/resource/image/34/df/34084af982a4c4223e0a78ed01c662df.jpg?wh=2139*709\" alt=\"\"><br>\nnetstat会把所有IPv4形态的TCP，IPV6形态的TCP、UDP以及UNIX域的套接字都显示出来。</p><p>对于TCP类型来说，最大的好处是可以清楚地看到一条TCP连接的四元组（源地址、源端口、目的地地址和目的端口）。</p><p>例如这里的一条信息：</p><pre><code>tcp        0      0 127.0.0.1:2379          127.0.0.1:52464         ESTABLISHED 0          27710       3496/etcd\n</code></pre><p>它表达的意思是本地127.0.0.1的端口52464连上本地127.0.0.1的端口2379，状态为ESTABLISHED，本地进程为etcd，进程为3496。</p><p>这在实战分析的时候非常有用，比如你可以很方便地知道，在某个时候是不是有很多TIME_WAIT的TCP连接，导致端口号被占用光，以致新的连接分配不了。</p><p>当然，我们也可以只对UNIX套接字进行筛查。</p><pre><code>netstat Socket -x -alepn\n</code></pre><p><img src=\"https://static001.geekbang.org/resource/image/a1/13/a1aeca1245b6b8cabaa0f22ce02d4813.jpg?wh=2894*789\" alt=\"\"><br>\nUNIX套接字的结果稍有不同，最关键的信息是Path，这个信息显示了本地套接字监听的文件路径，比如这条：</p><pre><code>unix  3      [ ]         STREAM     CONNECTED     23209    1400/dockerd        /var/run/docker.sock\n</code></pre><p>这其实就是大名鼎鼎的Docker在本地套接字的监听路径。/var/run/docker.sock是本地套接字监听地址，dockerd是进程名称，1400是进程号。</p><p>netstat命令可以选择的参数非常之多，这里只关注了几个简单的场景，你可以通过帮助命令或者查阅文档获得更多的信息。</p><p>lsof的常见用途之一是帮助我们找出在指定的IP地址或者端口上打开套接字的进程，而netstat则告诉我们IP地址和端口使用的情况，以及各个TCP连接的状态。Isof和netstst可以结合起来一起使用。</p><p>比如说，我们可以通过lsof查看到底是谁打开了这个文件：</p><pre><code>lsof /var/run/docker.sock\n</code></pre><p>下面这张图显示了是dockerd打开了这个本地文件套接字：</p><p><img src=\"https://static001.geekbang.org/resource/image/ac/28/acebeb7d0bbe26b469a200456c299d28.jpg?wh=1691*394\" alt=\"\"><br>\nlsof还有一个非常常见的用途。如果我们启动了一个服务器程序，发现这个服务器需要绑定的端口地址已经被占用，内核报出“该地址已在使用”的出错信息，我们可以使用lsof找出正在使用该端口的那个进程。比如下面这个代码，就帮我们找到了使用8080端口的那个进程，从而帮助我们定位问题。</p><pre><code>lsof -i :8080\n</code></pre><h2>抓包利器: tcpdump</h2><p>tcpdump这样的抓包工具对于网络编程而言是非常有用的，特别是在一些“山重水复疑无路”的情形下，通过tcpdump这样的抓包工具，往往可以达到“柳暗花明又一村”的效果。</p><p>tcpdump具有非常强大的过滤和匹配功能。</p><p>比如说指定网卡：</p><pre><code>tcpdump -i eth0\n</code></pre><p>再比如说指定来源：</p><pre><code>tcpdump src host hostname\n</code></pre><p>我们再来一个复杂一点的例子。这里抓的包是TCP，且端口是80，包来自IP地址为192.168.1.25的主机地址。</p><pre><code>tcpdump 'tcp and port 80 and src host 192.168.1.25' \n</code></pre><p>如果我们对TCP协议非常熟悉，还可以写出这样的tcpdump命令：</p><pre><code>tcpdump 'tcp and port 80 and tcp[13:1]&amp;2 != 0'\n</code></pre><p>这里tcp[13:1]表示的是TCP头部开始处偏移为13的字节，如果这个值为2，说明设置了SYN分节，当然，我们也可以设置成其他值来获取希望类型的分节。注意，这里的偏移是从0开始算起的，tcp[13]其实是报文里的第14个字节。</p><p>tcpdump在开启抓包的时候，会自动创建一个类型为AF_PACKET的网络套接口，并向系统内核注册。当网卡接收到一个网络报文之后，它会遍历系统中所有已经被注册的网络协议，包括其中已经注册了的AF_PACKET网络协议。系统内核接下来就会将网卡收到的报文发送给该协议的回调函数进行一次处理，回调函数可以把接收到的报文完完整整地复制一份，假装是自己接收到的报文，然后交给tcpdump程序，进行各种条件的过滤和判断，再对报文进行解析输出。</p><p>下面这张图显示的是tcpdump的输出格式：</p><p><img src=\"https://static001.geekbang.org/resource/image/43/c3/43a9e4ea08bc872c2646453ce06ed3c3.jpg?wh=2792*782\" alt=\"\"><br>\n首先我们看到的是时间戳，之后类似192.168.33.11.41388 &gt; 192.168.33.11.6443这样的，显示的是源地址（192.168.33.11.41388）到目的地址（192.168.33.11.6443）；然后Flags [ ]是包的标志，[P]表示是数据推送，比较常见的包格式如下：</p><ul>\n<li>[S]：SYN，表示开始连接</li>\n<li>[.]：没有标记，一般是确认</li>\n<li>[P]：PSH，表示数据推送</li>\n<li>[F]：FIN，表示结束连接</li>\n<li>[R] ：RST，表示重启连接</li>\n</ul><p>我们可以看到最后有几个数据，它们代表的含义如下：</p><ul>\n<li>seq：包序号，就是TCP的确认分组</li>\n<li>cksum：校验码</li>\n<li>win：滑动窗口大小</li>\n<li>length：承载的数据（payload）长度length，如果没有数据则为0</li>\n</ul><p>此外，tcpdump还可以对每条TCP报文的细节进行显示，让我们可以看到每条报文的详细字节信息。这在对报文进行排查的时候很有用。</p><h2>小结</h2><p>本章我讲述了一些常见的网络诊断工具，这些工具需要你了解之后活学活用。用好它们，对加深网络编程的理解，以及对问题情况进行排查等都有非常大的帮助。</p><p>我再来总结一下这几个命令的作用：</p><ul>\n<li>ping可以用来帮助我们进行网络连通性的探测。</li>\n<li>ifconfig，用来显示当前系统中的所有网络设备。</li>\n<li>netstat和lsof可以查看活动的连接状况。</li>\n<li>tcpdump可以对各种奇怪的环境进行抓包，进而帮我们了解报文，排查问题。</li>\n</ul><h2>思考题</h2><p>最后给大家留两个思考题。</p><p>本章我讲到了强大的抓包工具tcpdump，你知道tcpdump这个工具还可以对UDP包进行抓包处理吗？你不妨尝试一下。</p><p>另外，netstat输出时，监听状态的套接字所对应的Foreign Address显示的*.*表示的是什么意思呢？</p><p>欢迎你在评论区写下你的思考，我会和你一起交流，也欢迎你把这篇文章分享给你的朋友或者同事，一起讨论下这几个工具。</p>","comments":[{"had_liked":false,"id":125379,"user_name":"xindoo","can_delete":false,"product_type":"c1","uid":1101718,"ip_address":"","ucode":"AEAF3208E644BC","user_header":"https://static001.geekbang.org/account/avatar/00/10/cf/96/251c0cee.jpg","comment_is_top":false,"comment_ctime":1566176750,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"233494410734","product_id":100032701,"comment_content":"iftop命令可以查网络io大户","like_count":55},{"had_liked":false,"id":125453,"user_name":"许童童","can_delete":false,"product_type":"c1","uid":1003005,"ip_address":"","ucode":"4B799C0C6BC678","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4d/fd/0aa0e39f.jpg","comment_is_top":false,"comment_ctime":1566186614,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"130415205494","product_id":100032701,"comment_content":"tcpdump可以抓UDP，很简单 指定端口就可以了。<br><br>tcpdump还可以导出文件pcap，放到wireshark中进一步分析。<br><br>Foreign Address 显示的 *.* 表示的是什么意思呢？<br>这个套接字正在监听端口等待连接进来，允许任何地址、任何端口来建立连接。","like_count":31,"discussions":[{"author":{"id":1200589,"avatar":"https://static001.geekbang.org/account/avatar/00/12/51/cd/d6fe851f.jpg","nickname":"Gopher","note":"","ucode":"CF98ACFB8BFD6F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":18925,"discussion_content":"请问Local Address和Foreign Address里的0.0.0.0又分别表示什么意思呢？","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1569120048,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1909810,"avatar":"","nickname":"曾佳皓","note":"","ucode":"2BDC9CDBD8A60F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":531698,"discussion_content":"我能不能理解这个就是个被广播的端口，没有ip和端口限制","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637389531,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1111870,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK2Az5uTh9ZGVA7yQCj1BXtXuicPRkvJicA97AoN9xX3bnPcUYglTMXJeZeoVbPQeJA7ICvQhR3KQ0w/132","nickname":"日不落帝国","note":"","ucode":"6A11ABBD8AC438","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":25317,"discussion_content":"学习学习","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570500003,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":125755,"user_name":"一步","can_delete":false,"product_type":"c1","uid":1005391,"ip_address":"","ucode":"73CEA468CE70C3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","comment_is_top":false,"comment_ctime":1566258997,"is_pvip":true,"replies":[{"id":"48231","content":"这个值我也没注意过，看了介绍是说mdev 就是 Mean Deviation 的缩写，它表示这些 ICMP 包的 RTT 偏离平均值的程度，这个值越大说明你的网速越不稳定。","user_name":"作者回复","user_name_real":"froghui","uid":"1618647","ctime":1567133727,"ip_address":"","comment_id":125755,"utype":1}],"discussion_count":2,"race_medal":0,"score":"53105866549","product_id":100032701,"comment_content":"对于 ping 的最后统计信息中<br>rtt min&#47;avg&#47;max&#47;mdev = 4.512&#47;4.579&#47;4.647&#47;0.078 ms<br>中的 mdev 时间是什么意思的？","like_count":12,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463684,"discussion_content":"这个值我也没注意过，看了介绍是说mdev 就是 Mean Deviation 的缩写，它表示这些 ICMP 包的 RTT 偏离平均值的程度，这个值越大说明你的网速越不稳定。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567133727,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1170784,"avatar":"https://static001.geekbang.org/account/avatar/00/11/dd/60/eae432c6.jpg","nickname":"yusuf","note":"","ucode":"9F32149B2ADDA0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5745,"discussion_content":"Mean Deviation，平均偏差，越大网络越不稳定","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566459160,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":125491,"user_name":"剑衣清风","can_delete":false,"product_type":"c1","uid":1009527,"ip_address":"","ucode":"470CD81F6612F4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/77/c1310aad.jpg","comment_is_top":false,"comment_ctime":1566193340,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"44515866300","product_id":100032701,"comment_content":"tcpdump 可以结合 wireshark，也就是把抓到的协议包保存成 cap 格式的，然后在 windows 上点击查看更加形象<br><br>tcpdump host 10.1.11.133 and udp port 5060 -v -w gw.cap【写成 wireshark 可读取的】","like_count":10},{"had_liked":false,"id":146828,"user_name":"icejoywoo","can_delete":false,"product_type":"c1","uid":1019222,"ip_address":"","ucode":"E68C8B54D07EC3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8d/56/2a04dd88.jpg","comment_is_top":false,"comment_ctime":1572666526,"is_pvip":false,"replies":[{"id":"57471","content":"可以的，作为一个老程序员，ss是我刚刚接触到的，学习了。","user_name":"作者回复","user_name_real":"froghui","uid":"1618647","ctime":1573281232,"ip_address":"","comment_id":146828,"utype":1}],"discussion_count":1,"race_medal":0,"score":"27342470302","product_id":100032701,"comment_content":"ss可以替代netstat么，netstat有时候非常慢，ss速度很快","like_count":6,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":473024,"discussion_content":"可以的，作为一个老程序员，ss是我刚刚接触到的，学习了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573281232,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":200148,"user_name":"jay","can_delete":false,"product_type":"c1","uid":1023130,"ip_address":"","ucode":"7D7AF1E9C920BA","user_header":"https://static001.geekbang.org/account/avatar/00/0f/9c/9a/150e480e.jpg","comment_is_top":false,"comment_ctime":1585550622,"is_pvip":true,"replies":[{"id":"75778","content":"感谢斧正，已经修改，待提交。","user_name":"作者回复","user_name_real":"froghui","uid":"1618647","ctime":1586076390,"ip_address":"","comment_id":200148,"utype":1}],"discussion_count":2,"race_medal":0,"score":"23060387102","product_id":100032701,"comment_content":"文中这句语： 即 ICMP 的类型, 其中 ping 的请求类型为 0，应答为 8。描述有误，请求类型为8，应答为0。 <br>Type: 8 (Echo (ping) request)<br>Type: 0 (Echo (ping) reply)","like_count":5,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":489947,"discussion_content":"感谢斧正，已经修改，待提交。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586076390,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1708271,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/10/ef/4c9b2383.jpg","nickname":"Everlaa","note":"","ucode":"9B4FFFABD62B07","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":293850,"discussion_content":"这么久了，原文也不改，有点坑","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595688160,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":156319,"user_name":"明键","can_delete":false,"product_type":"c1","uid":1344740,"ip_address":"","ucode":"4F46C2233A6183","user_header":"https://static001.geekbang.org/account/avatar/00/14/84/e4/3b8e2017.jpg","comment_is_top":false,"comment_ctime":1574856354,"is_pvip":false,"replies":[{"id":"60367","content":"IPV6的地址格式为X:X:X:X:X:X:X:X，一共8个X，其中每个X表示地址中的16b，以十六进制表示。<br><br>在某些情况下，一个IPv6地址中间可能包含很长的一段0，可以把连续的一段0压缩为“::”。<br><br>所以，看看你的地址里是不是有::哦。","user_name":"作者回复","user_name_real":"froghui","uid":"1618647","ctime":1575185090,"ip_address":"","comment_id":156319,"utype":1}],"discussion_count":2,"race_medal":0,"score":"23049692834","product_id":100032701,"comment_content":"IPv6的地址不是128位吗，为什么我数ifconfig的输出只有12字节？还有四字节到哪里去了呢？","like_count":5,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476066,"discussion_content":"IPV6的地址格式为X:X:X:X:X:X:X:X，一共8个X，其中每个X表示地址中的16b，以十六进制表示。\n\n在某些情况下，一个IPv6地址中间可能包含很长的一段0，可以把连续的一段0压缩为“::”。\n\n所以，看看你的地址里是不是有::哦。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575185090,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2536581,"avatar":"https://static001.geekbang.org/account/avatar/00/26/b4/85/eaffe571.jpg","nickname":"美食家房","note":"","ucode":"8D1DCBE0FC48E4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":377365,"discussion_content":"真的是，看解答区，老师的回复，也很涨知识阿","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622617493,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":125668,"user_name":"哦哟哟哟哟","can_delete":false,"product_type":"c1","uid":1243212,"ip_address":"","ucode":"04EC364D959A94","user_header":"https://static001.geekbang.org/account/avatar/00/12/f8/4c/e44357de.jpg","comment_is_top":false,"comment_ctime":1566223828,"is_pvip":false,"replies":[{"id":"48232","content":"看你应用程序绑定到哪个网卡设备和Ip了","user_name":"作者回复","user_name_real":"froghui","uid":"1618647","ctime":1567133780,"ip_address":"","comment_id":125668,"utype":1}],"discussion_count":2,"race_medal":0,"score":"23041060308","product_id":100032701,"comment_content":"麻烦老师解答下。前面ifconfig命令关于网卡优先级的metric=1表示优先级最高、示例中三张网卡优先级都是1、那如何进行选择呢","like_count":5,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463653,"discussion_content":"看你应用程序绑定到哪个网卡设备和Ip了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567133780,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2101997,"avatar":"","nickname":"Geek_a2ed66","note":"","ucode":"B6D817CD906F9B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":296751,"discussion_content":"那如果我绑定的那个ip的网卡优先级很低呢。走优先级高的还是绑的那个网卡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596638716,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":154115,"user_name":"钱","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1574382701,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"18754251885","product_id":100032701,"comment_content":"小结<br>ping 可以用来帮助我们进行网络连通性的探测。<br>ifconfig，用来显示当前系统中的所有网络设备。<br>netstat 和 lsof 可以查看活动的连接状况。<br>tcpdump 可以对各种奇怪的环境进行抓包，进而帮我们了解报文，排查问题。<br>iftop命令可以查网络io大户<br>arp<br>router<br>ss<br>","like_count":4,"discussions":[{"author":{"id":1051402,"avatar":"https://static001.geekbang.org/account/avatar/00/10/0b/0a/fa152399.jpg","nickname":"wahaha","note":"","ucode":"E60166599CF31D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":199216,"discussion_content":"补充3个：\npacman -S iperf3 mtr iproute2\niperf3: TCP, UDP, and SCTP network bandwidth measurement tool\nmtr: Combines the functionality of traceroute and ping into one tool (CLI version)\niproute2: IP Routing Utilities","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583570906,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":168837,"user_name":"超大红细胞","can_delete":false,"product_type":"c1","uid":1780519,"ip_address":"","ucode":"08FA6FE03A8C27","user_header":"https://static001.geekbang.org/account/avatar/00/1b/2b/27/9676d6b3.jpg","comment_is_top":false,"comment_ctime":1578196361,"is_pvip":false,"replies":[{"id":"65483","content":"学习了 ","user_name":"作者回复","user_name_real":"froghui","uid":"1618647","ctime":1578214009,"ip_address":"","comment_id":168837,"utype":1}],"discussion_count":2,"race_medal":0,"score":"14463098249","product_id":100032701,"comment_content":"tcpdump 抓取 1400 端口 UDP 报文并保存：<br>tcpdump -i ens33 udp port -w .&#47;udp.cap","like_count":3,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480349,"discussion_content":"学习了 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578214009,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1024294,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaELZPnUAiajaR5C25EDLWeJURggyiaOP5GGPe2qlwpQcm5e3ybib8OsP4tvddFDLVRSNNGL5I3SFPJHsA/132","nickname":"null","note":"","ucode":"F9039EFED6B55D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":358919,"discussion_content":"这条命令在哪体现了 1400 这个端口呀，谢谢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616075335,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":177438,"user_name":"晚风·和煦","can_delete":false,"product_type":"c1","uid":1236047,"ip_address":"","ucode":"0B1DB8F437A4B2","user_header":"","comment_is_top":false,"comment_ctime":1581392658,"is_pvip":false,"replies":[{"id":"71016","content":"在程序角度来说，accept函数表示的是三次握手的过程，如果从accept返回，表示三次握手成功，连接已经建立。","user_name":"作者回复","user_name_real":"froghui","uid":"1618647","ctime":1583050899,"ip_address":"","comment_id":177438,"utype":1}],"discussion_count":2,"race_medal":0,"score":"10171327250","product_id":100032701,"comment_content":"老师，accept是发生在三次握手之后吗？😂","like_count":2,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":483426,"discussion_content":"在程序角度来说，accept函数表示的是三次握手的过程，如果从accept返回，表示三次握手成功，连接已经建立。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583050899,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1607117,"avatar":"https://static001.geekbang.org/account/avatar/00/18/85/cd/63a10fbe.jpg","nickname":"简之","note":"","ucode":"6C96513778BA68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":573266,"discussion_content":"不是listen的时候已经握手了吗","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1653302023,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":483426,"ip_address":""},"score":573266,"extra":""}]}]},{"had_liked":false,"id":143510,"user_name":"极客雷","can_delete":false,"product_type":"c1","uid":1041465,"ip_address":"","ucode":"0DBAC4CB9C7BCD","user_header":"https://static001.geekbang.org/account/avatar/00/0f/e4/39/a06ade33.jpg","comment_is_top":false,"comment_ctime":1571722533,"is_pvip":true,"replies":[{"id":"55830","content":"这些命令在平时的trouleshooting还是很有用处的，毕竟还不能在生产环境都换成Linux 4&#47;5版本吧。","user_name":"作者回复","user_name_real":"froghui","uid":"1618647","ctime":1572058650,"ip_address":"","comment_id":143510,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10161657125","product_id":100032701,"comment_content":"ifconfig、netstat都是比较偏老的、不再维护的命令，为啥不与时俱进讲一下iproute2系列的命令","like_count":2,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":471571,"discussion_content":"这些命令在平时的trouleshooting还是很有用处的，毕竟还不能在生产环境都换成Linux 4/5版本吧。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572058650,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":287446,"user_name":"null","can_delete":false,"product_type":"c1","uid":1024294,"ip_address":"","ucode":"F9039EFED6B55D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaELZPnUAiajaR5C25EDLWeJURggyiaOP5GGPe2qlwpQcm5e3ybib8OsP4tvddFDLVRSNNGL5I3SFPJHsA/132","comment_is_top":false,"comment_ctime":1617954225,"is_pvip":false,"replies":[{"id":"104489","content":"ping都不通了，可以认为对方服务器真的下线了","user_name":"作者回复","user_name_real":"froghui","uid":"1618647","ctime":1618140076,"ip_address":"","comment_id":287446,"utype":1}],"discussion_count":3,"race_medal":0,"score":"5912921521","product_id":100032701,"comment_content":"如果对方禁ping 了，还有其他方法能测试与对方服务器的连通性么？","like_count":1,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518311,"discussion_content":"ping都不通了，可以认为对方服务器真的下线了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618140076,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1024294,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaELZPnUAiajaR5C25EDLWeJURggyiaOP5GGPe2qlwpQcm5e3ybib8OsP4tvddFDLVRSNNGL5I3SFPJHsA/132","nickname":"null","note":"","ucode":"F9039EFED6B55D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":366652,"discussion_content":"对方禁了 icmp协议","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1618145841,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2916751,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/U5vvFI4v3jibf6uHbOFtkm1sBaXeLZnJicCOia0KW5KNb2KK06we5gkzJE7RiawfDzMAicHIpINUrTYfjrdZweQsuUA/132","nickname":"Geek_1cd0c8","note":"","ucode":"1F0C3F5E03C420","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":576191,"discussion_content":"Ping 还要考虑防火墙的问题\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655346746,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":257820,"user_name":"NEVER SETTLE","can_delete":false,"product_type":"c1","uid":1101894,"ip_address":"","ucode":"9C86BDAFDBF768","user_header":"https://static001.geekbang.org/account/avatar/00/10/d0/46/1a9229b3.jpg","comment_is_top":false,"comment_ctime":1604140506,"is_pvip":false,"replies":[{"id":"95506","content":"正常啊，工具也不是万能的。不过很好奇，什么样的语法错误逃脱了CLion的火眼金睛。","user_name":"作者回复","user_name_real":"froghui","uid":"1618647","ctime":1606041676,"ip_address":"","comment_id":257820,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5899107802","product_id":100032701,"comment_content":"老师，我用CLion编写代码时，有明显的语法错误，结果没有提示出来（波浪线等等）","like_count":1,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":508461,"discussion_content":"正常啊，工具也不是万能的。不过很好奇，什么样的语法错误逃脱了CLion的火眼金睛。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606041676,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":352947,"user_name":"dll","can_delete":false,"product_type":"c1","uid":1264401,"ip_address":"北京","ucode":"5773CBC8BFB91F","user_header":"https://static001.geekbang.org/account/avatar/00/13/4b/11/d7e08b5b.jpg","comment_is_top":false,"comment_ctime":1659037793,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1659037793","product_id":100032701,"comment_content":"<br>          RX packets:7951 errors:0 dropped:0 overruns:0 frame:0<br>          TX packets:4123 errors:0 dropped:0 overruns:0 carrier:0<br>          collisions:0 txqueuelen:1000<br>          RX bytes:5081047 (5.0 MB)  TX bytes:385600 (385.6 KB)<br>_________<br>RX TX 是什么呢。我看到文里没有解释","like_count":0},{"had_liked":false,"id":351438,"user_name":"gecko","can_delete":false,"product_type":"c1","uid":1198048,"ip_address":"","ucode":"2B7122536F1A0E","user_header":"https://static001.geekbang.org/account/avatar/00/12/47/e0/1ff26e99.jpg","comment_is_top":false,"comment_ctime":1657787302,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1657787302","product_id":100032701,"comment_content":"netstat<br>netstat  -x -alepn yes<br>netstat Socket -x -alepn no<br>","like_count":0},{"had_liked":false,"id":284238,"user_name":"null","can_delete":false,"product_type":"c1","uid":1024294,"ip_address":"","ucode":"F9039EFED6B55D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaELZPnUAiajaR5C25EDLWeJURggyiaOP5GGPe2qlwpQcm5e3ybib8OsP4tvddFDLVRSNNGL5I3SFPJHsA/132","comment_is_top":false,"comment_ctime":1616132094,"is_pvip":false,"replies":[{"id":"103193","content":"mac是可以使用这两个工具的。","user_name":"作者回复","user_name_real":"froghui","uid":"1618647","ctime":1616314894,"ip_address":"","comment_id":284238,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1616132094","product_id":100032701,"comment_content":"macbook 下，也是使用 wireshark 配合 tcpdump 文件一起么？","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":517280,"discussion_content":"mac是可以使用这两个工具的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616314894,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":284136,"user_name":"null","can_delete":false,"product_type":"c1","uid":1024294,"ip_address":"","ucode":"F9039EFED6B55D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaELZPnUAiajaR5C25EDLWeJURggyiaOP5GGPe2qlwpQcm5e3ybib8OsP4tvddFDLVRSNNGL5I3SFPJHsA/132","comment_is_top":false,"comment_ctime":1616075146,"is_pvip":false,"replies":[{"id":"103192","content":"选择哪个网卡，有多个因素会决定，一个可能的因素是系统路由表，比如docker0的地址是172.17.0.1，走172.17.0.0&#47;16的地址就会通过docker0。","user_name":"作者回复","user_name_real":"froghui","uid":"1618647","ctime":1616314852,"ip_address":"","comment_id":284136,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1616075146","product_id":100032701,"comment_content":"cni0（1450）、enp0s3（1500）、docker0（1500）这三者的 MTU 为啥不一样，是协议栈的不同么？<br>这三个网卡的 Metric 都为 1，最高级，那最终选择哪一个网卡设置呀？<br>谢谢老师！","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":517248,"discussion_content":"选择哪个网卡，有多个因素会决定，一个可能的因素是系统路由表，比如docker0的地址是172.17.0.1，走172.17.0.0/16的地址就会通过docker0。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616314852,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":245923,"user_name":"Geek_8593e5","can_delete":false,"product_type":"c1","uid":1736807,"ip_address":"","ucode":"B316E40C400CC8","user_header":"","comment_is_top":false,"comment_ctime":1599111433,"is_pvip":false,"replies":[{"id":"90592","content":"你是对的，我已更改文稿。","user_name":"作者回复","user_name_real":"froghui","uid":"1618647","ctime":1599400343,"ip_address":"","comment_id":245923,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1599111433","product_id":100032701,"comment_content":"老师说的，类型：即 ICMP 的类型, 其中 ping 的请求类型为 0，应答为 8。我实际测了下，应答为0，请求为8？","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":505010,"discussion_content":"你是对的，我已更改文稿。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599400343,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":204283,"user_name":"你好","can_delete":false,"product_type":"c1","uid":1252980,"ip_address":"","ucode":"0B5E024BA58560","user_header":"https://static001.geekbang.org/account/avatar/00/13/1e/74/636ea0f3.jpg","comment_is_top":false,"comment_ctime":1586359421,"is_pvip":false,"replies":[{"id":"76799","content":"应该是随机的吧，没有什么优先级；一般我们多用ANY_ADDR来做，本身就不想限制是哪块网卡或者IP地址。","user_name":"作者回复","user_name_real":"froghui","uid":"1618647","ctime":1586680903,"ip_address":"","comment_id":204283,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1586359421","product_id":100032701,"comment_content":"<br>🙋，老师我有问题：<br>前面文章中提到过：使用 INADDR_ANY，一台机器有两块网卡，IP 地址分别是 202.61.22.55 和 192.168.1.11，那么向这两个 IP 请求的请求包都会被我们编写的应用程序处理。那如果优先级相同是走哪一个呢？<br>那服务器&#47;客户端绑定端口的时候如何指定使用哪个网卡进行绑定呢？","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":491128,"discussion_content":"应该是随机的吧，没有什么优先级；一般我们多用ANY_ADDR来做，本身就不想限制是哪块网卡或者IP地址。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586680903,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":199364,"user_name":"徐衡","can_delete":false,"product_type":"c1","uid":1881664,"ip_address":"","ucode":"06EBCB2F507603","user_header":"https://static001.geekbang.org/account/avatar/00/1c/b6/40/6060d233.jpg","comment_is_top":false,"comment_ctime":1585487744,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585487744","product_id":100032701,"comment_content":" *.* 表示的是 允许任何地址、任何端口来建立连接","like_count":0},{"had_liked":false,"id":192495,"user_name":"Geek_wannaBgeek","can_delete":false,"product_type":"c1","uid":1643435,"ip_address":"","ucode":"6F42F4181981C3","user_header":"https://static001.geekbang.org/account/avatar/00/19/13/ab/d73e25de.jpg","comment_is_top":false,"comment_ctime":1584855381,"is_pvip":false,"replies":[{"id":"73530","content":"寒，一天不需要打这么多次吧...","user_name":"作者回复","user_name_real":"froghui","uid":"1618647","ctime":1584862830,"ip_address":"","comment_id":192495,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1584855381","product_id":100032701,"comment_content":"打卡打卡","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488408,"discussion_content":"寒，一天不需要打这么多次吧...","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584862830,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":137285,"user_name":"一天到晚游泳的鱼","can_delete":false,"product_type":"c1","uid":1433982,"ip_address":"","ucode":"1F40AF478D85B9","user_header":"","comment_is_top":false,"comment_ctime":1569677658,"is_pvip":false,"replies":[{"id":"52774","content":"是这样的，这里的偏移是从0开始算起的，tcp[13]其实是第14个byte。我在文稿里稍微加一下。感谢指出。","user_name":"作者回复","user_name_real":"froghui","uid":"1618647","ctime":1569723240,"ip_address":"","comment_id":137285,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1569677658","product_id":100032701,"comment_content":"老师tcp头部偏移位13字节表示的是头部长度啊 并不是syn啊","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":469019,"discussion_content":"是这样的，这里的偏移是从0开始算起的，tcp[13]其实是第14个byte。我在文稿里稍微加一下。感谢指出。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569723240,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":136899,"user_name":"不二","can_delete":false,"product_type":"c1","uid":1147151,"ip_address":"","ucode":"67E0E3BA3EEC26","user_header":"https://static001.geekbang.org/account/avatar/00/11/81/0f/8f7ebd2d.jpg","comment_is_top":false,"comment_ctime":1569550011,"is_pvip":false,"replies":[{"id":"52784","content":"后面第10讲专门讲了time_wait，你可以看一下","user_name":"作者回复","user_name_real":"froghui","uid":"1618647","ctime":1569724718,"ip_address":"","comment_id":136899,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1569550011","product_id":100032701,"comment_content":"老师您好，可否具体讲解一下time_wait","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468852,"discussion_content":"后面第10讲专门讲了time_wait，你可以看一下","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569724718,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":135114,"user_name":"kissingers","can_delete":false,"product_type":"c1","uid":1135299,"ip_address":"","ucode":"615151808CF628","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKzqiaZnBw2myRWY802u48Rw3W2zDtKoFQ6vN63m4FdyjibM21FfaOYe8MbMpemUdxXJeQH6fRdVbZA/132","comment_is_top":false,"comment_ctime":1569031139,"is_pvip":false,"replies":[{"id":"52194","content":"自动化的工具应该有，抓包只是入门的技巧。","user_name":"作者回复","user_name_real":"froghui","uid":"1618647","ctime":1569406446,"ip_address":"","comment_id":135114,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1569031139","product_id":100032701,"comment_content":"老师，wireshark 是人工肉眼分析的工具，有没有自动分析网络和排查网络故障的工具？","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468053,"discussion_content":"自动化的工具应该有，抓包只是入门的技巧。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569406446,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":128158,"user_name":"多襄丸","can_delete":false,"product_type":"c1","uid":1074310,"ip_address":"","ucode":"1AA1497C5A293C","user_header":"https://static001.geekbang.org/account/avatar/00/10/64/86/f5a9403a.jpg","comment_is_top":false,"comment_ctime":1566838144,"is_pvip":false,"replies":[{"id":"47927","content":"我已经发现很多同学有这个问题了，我不确定是不是漏报，还是其他什么原因......","user_name":"作者回复","user_name_real":"froghui","uid":"1618647","ctime":1567005289,"ip_address":"","comment_id":128158,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1566838144","product_id":100032701,"comment_content":"老师： 　seq= 1949465353 对应的 ack= 1949465354<br><br>可是 seq= 3372444594对应的ack= 3372444595为啥没找到啊？<br><br>00:37:31.920159 IP 192.168.31.10.49564 &gt; 182.61.62.12.https: Flags [S], seq 1949465353, win 65535, options [mss 1460,nop,wscale 6,nop,nop,TS val 1065686443 ecr 0,sackOK,eol], length 0<br><br>00:37:31.930144 IP 182.61.62.12.https &gt; 192.168.31.10.49564: Flags [S.], seq 3372444594, ack 1949465354, win 8192, options [mss 1440,nop,wscale 5,nop,nop,nop,nop,nop,nop,nop,nop,nop,nop,nop,nop,sackOK,eol], length 0<br><br>00:37:31.930188 IP 192.168.31.10.49564 &gt; 182.61.62.12.https: Flags [.], ack 1, win 4096, length 0<br>00:37:31.930913 IP 192.168.31.10.49564 &gt; 182.61.62.12.https: Flags [P.], seq 1:518, ack 1, win 4096, length 517<br>00:37:31.941981 IP 182.61.62.12.https &gt; 192.168.31.10.49564: Flags [.], ack 518, win 812, length 0<br>00:37:31.943678 IP 182.61.62.12.https &gt; 192.168.31.10.49564: Flags [P.], seq 1:97, ack 518, win 812, length 96<br>00:37:31.943704 IP 192.168.31.10.49564 &gt; 182.61.62.12.https: Flags [.], ack 97, win 4094, length 0<br>00:37:31.944626 IP 182.61.62.12.https &gt; 192.168.31.10.49564: Flags [P.], seq 97:103, ack 518, win 812, length 6<br>00:37:31.944631 IP 182.61.62.12.https &gt; 192.168.31.10.49564: Flags [P.], seq 103:148, ack 518, win 812, length 45<br>00:37:31.944657 IP 192.168.31.10.49564 &gt; 182.61.62.12.https: Flags [.], ack 103, win 4095, length 0<br>00:37:31.944666 IP 192.168.31.10.49564 &gt; 182.61.62.12.https: Flags [.], ack 148, win 4095, length 0<br>00:37:31.944784 IP 192.168.31.10.49564 &gt; 182.61.62.12.https: Flags [P.], seq 518:569, ack 148, win 4096, length 51<br><br><br>","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464816,"discussion_content":"我已经发现很多同学有这个问题了，我不确定是不是漏报，还是其他什么原因......","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567005289,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1662117,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q3auHgzwzM7zuDYFIutbSPc4eEtcMhdNBTI1FRR7q0xrGh2X1QdiaNxvAV31HcRUsjPWLaaWftqgwTnVoiaica8Nw/132","nickname":"胜辉（大V）","note":"","ucode":"3C13BFCD82D4EC","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":404760,"discussion_content":"看起来就是握手前两个包用了原始序列号 第三个包开始用相对序列号。相对序列号是为了方便人阅读，本身不是一个问题","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634396651,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":126720,"user_name":"yusuf","can_delete":false,"product_type":"c1","uid":1170784,"ip_address":"","ucode":"9F32149B2ADDA0","user_header":"https://static001.geekbang.org/account/avatar/00/11/dd/60/eae432c6.jpg","comment_is_top":false,"comment_ctime":1566457713,"is_pvip":false,"replies":[{"id":"47904","content":"我也觉得是，不知道你这个是啥系统？","user_name":"作者回复","user_name_real":"froghui","uid":"1618647","ctime":1567003822,"ip_address":"","comment_id":126720,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1566457713","product_id":100032701,"comment_content":"老师，以下是我用tcpdump抓的三次握手，我认为第3个包中的ack应该是1551435398，可为什么第3个包中ack的值实际是1呢?<br><br># tcpdump -i lo host 127.0.0.1 and port 12345 -c 5<br>tcpdump: verbose output suppressed, use -v or -vv for full protocol decode<br>listening on lo, link-type EN10MB (Ethernet), capture size 262144 bytes<br><br><br>14:53:40.089777 IP localhost.49054 &gt; localhost.italk: Flags [S], seq 2093800598, win 43690, options [mss 65495,sackOK,TS val 707848048 ecr 0,nop,wscale 6], length 0<br><br>14:53:40.089792 IP localhost.italk &gt; localhost.49054: Flags [S.], seq 1551435397, ack 2093800599, win 43690, options [mss 65495,sackOK,TS val 707848048 ecr 707848048,nop,wscale 6], length 0<br><br>14:53:40.089806 IP localhost.49054 &gt; localhost.italk: Flags [.], ack 1, win 683, options [nop,nop,TS val 707848048 ecr 707848048], length 0<br><br>14:54:01.561276 IP localhost.49054 &gt; localhost.italk: Flags [P.], seq 1:1025, ack 1, win 683, options [nop,nop,TS val 707869520 ecr 707848048], length 1024<br><br>14:54:01.561355 IP localhost.italk &gt; localhost.49054: Flags [.], ack 1025, win 715, options [nop,nop,TS val 707869520 ecr 707869520], length 0<br><br><br>5 packets captured<br>12 packets received by filter<br>0 packets dropped by kernel","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464136,"discussion_content":"我也觉得是，不知道你这个是啥系统？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567003822,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1005528,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/57/d8/425e1b0a.jpg","nickname":"小虾米","note":"","ucode":"F543987A7FAB20","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":231996,"discussion_content":"是相对值便于阅读，有参数可以设置是否使用绝对值","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1586844639,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1170784,"avatar":"https://static001.geekbang.org/account/avatar/00/11/dd/60/eae432c6.jpg","nickname":"yusuf","note":"","ucode":"9F32149B2ADDA0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6023,"discussion_content":"应该是tcpdump的问题，前两次都是用的绝对量，第三次开始使用了相对上次的差值","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566617607,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":125750,"user_name":"禾桃","can_delete":false,"product_type":"c1","uid":1477855,"ip_address":"","ucode":"9FE85C34A9E9E0","user_header":"https://static001.geekbang.org/account/avatar/00/16/8c/df/77acb793.jpg","comment_is_top":false,"comment_ctime":1566258497,"is_pvip":false,"replies":[{"id":"47901","content":"可以这么理解","user_name":"作者回复","user_name_real":"froghui","uid":"1618647","ctime":1567003633,"ip_address":"","comment_id":125750,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1566258497","product_id":100032701,"comment_content":"“另外，netstat 输出时，监听状态的套接字所对应的 Foreign Address 显示的 *.* 表示的是什么意思呢？”<br><br>是表示任何远端地址端口都可以和它建立连接的意思吗？","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463681,"discussion_content":"可以这么理解","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567003633,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":125477,"user_name":"刘明","can_delete":false,"product_type":"c1","uid":1109382,"ip_address":"","ucode":"5871C54AAE1A81","user_header":"https://static001.geekbang.org/account/avatar/00/10/ed/86/5855aaa4.jpg","comment_is_top":false,"comment_ctime":1566189149,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1566189149","product_id":100032701,"comment_content":"2、表示接受任意IP地址任意端口的连接请求。","like_count":0},{"had_liked":false,"id":125475,"user_name":"刘明","can_delete":false,"product_type":"c1","uid":1109382,"ip_address":"","ucode":"5871C54AAE1A81","user_header":"https://static001.geekbang.org/account/avatar/00/10/ed/86/5855aaa4.jpg","comment_is_top":false,"comment_ctime":1566188768,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1566188768","product_id":100032701,"comment_content":"1、tcpdump -i eth0 -nn -XX udp and src port 1234","like_count":0},{"had_liked":false,"id":125430,"user_name":"二星球","can_delete":false,"product_type":"c1","uid":1111552,"ip_address":"","ucode":"89EC5FEB98E7CE","user_header":"https://static001.geekbang.org/account/avatar/00/10/f6/00/2a248fd8.jpg","comment_is_top":false,"comment_ctime":1566183791,"is_pvip":false,"replies":[{"id":"47896","content":"我觉得既然都收到http 200的结果，那么应该是应用层出错了吧。","user_name":"作者回复","user_name_real":"froghui","uid":"1618647","ctime":1567003151,"ip_address":"","comment_id":125430,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1566183791","product_id":100032701,"comment_content":"老师好，向您请教最近遇到的一个问题，APP应用通过http长链接向后台发送请求，中间有几个代理服务器，偶尔发现app发送的请求返回的状态码是正常的200，但是没有返回值，没有出错，后台也没有收到请求，这是什么原因，该如何解决呢？","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463572,"discussion_content":"我觉得既然都收到http 200的结果，那么应该是应用层出错了吧。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567003151,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}