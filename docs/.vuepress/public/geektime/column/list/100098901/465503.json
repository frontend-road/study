{"id":465503,"title":"09ï½œRTP & RTCPï¼šå¦‚ä½•æ­£ç¡®åœ°å°†è§†é¢‘è£…è¿›RTPä¸­ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯ææ±Ÿã€‚</p><p>åœ¨å‰é¢çš„è¯¾ç¨‹ä¸­ï¼Œæˆ‘ä»¬è¯¦ç»†åœ°è®²è¿°äº†è§†é¢‘ç¼–ç çš„åŸç†ä»¥åŠé¢„æµ‹ç¼–ç å’Œå˜æ¢ç¼–ç çš„çŸ¥è¯†ã€‚é€šè¿‡è¿™äº›æˆ‘ä»¬äº†è§£äº†è§†é¢‘ç¼–ç çš„åŸºæœ¬åŸç†å’Œæ­¥éª¤ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬è¿˜ç”¨äº†ä¸€èŠ‚è¯¾çš„æ—¶é—´æ·±å…¥æ¢è®¨äº†H264çš„ç æµç»“æ„ï¼Œç›¸ä¿¡ä½ å·²ç»æ¸…æ¥šäº†H264ç æµæ˜¯ä»€ä¹ˆæ ·çš„ï¼Œä»¥åŠå¦‚ä½•ä»ç æµä¸­åˆ†ç¦»å‡ºä¸€å¸§å¸§å›¾åƒæ•°æ®ï¼Œå¹¶å­¦ä¼šäº†å¦‚ä½•åˆ¤æ–­è¿™äº›å¸§çš„ç±»å‹ã€‚</p><p>é‚£ä¹ˆä»è¿™èŠ‚è¯¾å¼€å§‹å‘¢ï¼Œæˆ‘ä»¬å°±è¦è¿›å…¥è§†é¢‘ä¼ è¾“å’Œç½‘ç»œå¯¹æŠ—éƒ¨åˆ†äº†ã€‚æˆ‘ä»¬ä¼šåœ¨è§†é¢‘ç¼–ç ç æµçš„åŸºç¡€ä¸Šï¼Œè®²è®²å¦‚ä½•å°†ç æµæ‰“åŒ…æˆä¸€ä¸ªä¸ªæ•°æ®åŒ…å‘é€åˆ°ç½‘ç»œä¸Šï¼Œå¹¶è¿›ä¸€æ­¥è®¨è®ºå¦‚ä½•é¿å…åœ¨å‘é€çš„è¿‡ç¨‹ä¸­å¼•èµ·ç½‘ç»œæ‹¥å¡ï¼Œä»è€Œä¿è¯è§†é¢‘çš„æµç•…æ€§ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬ä¼šè¿›ä¸€æ­¥åœ¨åé¢çš„è¯¾ç¨‹ä¸­è®²è§£å¦‚ä½•åœ¨ç½‘ç»œä¸æ–­å˜åŒ–çš„æ—¶å€™åšå¥½è§†é¢‘ç æ§ç®—æ³•ï¼Œå¦‚ä½•é˜²æ­¢è§†é¢‘å‡ºç°èŠ±å±ï¼Œä»¥åŠå¦‚ä½•å°½é‡å‡å°‘è§†é¢‘å¡é¡¿ç­‰éå¸¸æœ‰éš¾åº¦çš„å®é™…å·¥ç¨‹é—®é¢˜ã€‚</p><p>è¿™äº›é—®é¢˜æ˜¯è§†é¢‘å¼€å‘è¿‡ç¨‹ä¸­ç»å¸¸ä¼šé‡åˆ°ä¸”è¿«åˆ‡éœ€è¦è§£å†³çš„é‡è¦é—®é¢˜ã€‚è€Œè§£å†³è¿™äº›é—®é¢˜çš„åŸºç¡€å°±æ˜¯éœ€è¦ç†Ÿæ‚‰RTPå’ŒRTCPåè®®ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬è¿™èŠ‚è¯¾çš„é‡ç‚¹ã€‚</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬ä¼šåˆ†åˆ«ä»RTPåè®®ã€RTCPåè®®å’ŒH264çš„RTPæ‰“åŒ…æ–¹æ³•è¿™ä¸‰ä¸ªæ–¹é¢æ¥å±•å¼€è¿™èŠ‚è¯¾ã€‚é¦–å…ˆè®©æˆ‘ä»¬ä¸€èµ·æ¥è®¤è¯†ä¸€ä¸‹RTPåè®®ã€‚</p><h2>RTPåè®®</h2><p>RTPï¼ˆReal-time Transport Protocolï¼‰åè®®ï¼Œå…¨ç§°æ˜¯å®æ—¶ä¼ è¾“åè®®ã€‚å®ƒä¸»è¦ç”¨äºéŸ³è§†é¢‘æ•°æ®çš„ä¼ è¾“ã€‚é‚£å®ƒçš„ä½œç”¨æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p><!-- [[[read_end]]] --><p>ä¸€èˆ¬æˆ‘ä»¬åœ¨å®æ—¶é€šä¿¡çš„æ—¶å€™ï¼Œéœ€è¦ä¼ è¾“éŸ³é¢‘å’Œè§†é¢‘æ•°æ®ã€‚æˆ‘ä»¬é€šå¸¸æ˜¯è¿™æ ·åšçš„ï¼Œå…ˆå°†åŸå§‹æ•°æ®ç»è¿‡ç¼–ç å‹ç¼©ä¹‹åï¼Œå†å°†ç¼–ç ç æµä¼ è¾“åˆ°æ¥æ”¶ç«¯ã€‚åœ¨ä¼ è¾“çš„æ—¶å€™æˆ‘ä»¬é€šå¸¸ä¸ä¼šç›´æ¥å°†ç¼–ç ç æµè¿›è¡Œä¼ è¾“ï¼Œè€Œæ˜¯<strong>å…ˆå°†ç æµæ‰“åŒ…æˆä¸€ä¸ªä¸ªRTPåŒ…å†è¿›è¡Œå‘é€</strong>ã€‚</p><p>é‚£ä¸ºä»€ä¹ˆéœ€è¦æ‰“åŒ…æˆRTPåŒ…å‘¢ï¼Ÿè¿™æ˜¯<strong>å› ä¸ºæˆ‘ä»¬<strong><strong>çš„</strong></strong>æ¥æ”¶ç«¯è¦èƒ½å¤Ÿæ­£ç¡®<strong><strong>åœ°</strong></strong>ä½¿ç”¨è¿™äº›éŸ³è§†é¢‘ç¼–ç æ•°æ®ï¼Œä¸ä»…ä»…éœ€è¦åŸå§‹çš„ç¼–ç ç æµï¼Œè¿˜éœ€è¦ä¸€äº›é¢å¤–çš„ä¿¡æ¯</strong>ã€‚æ¯”å¦‚è¯´ï¼š</p><ul>\n<li><strong>å½“å‰è§†é¢‘ç æµæ˜¯å“ªç§è§†é¢‘ç¼–ç æ ‡å‡†</strong>ï¼Œæ˜¯H264ã€H265ã€VP8ã€VP9è¿˜æ˜¯AV1å‘¢ï¼Ÿæˆ‘ä»¬çŸ¥é“æ¯ç§ä¸åŒçš„ç¼–ç æ ‡å‡†ï¼Œå…¶ç æµè§£æçš„æ–¹å¼è‚¯å®šä¹Ÿä¸ä¸€æ ·ã€‚è¿™ä¸ªå°±éœ€è¦é€šè¿‡RTPåè®®å‘ŠçŸ¥æ¥æ”¶ç«¯ã€‚</li>\n<li>å½“æˆ‘ä»¬çŸ¥é“ç¼–ç æ ‡å‡†äº†ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ­£ç¡®åœ°è§£æç æµï¼Œå¹¶è§£ç å‡ºå›¾åƒäº†ã€‚ä½†æ˜¯æˆ‘ä»¬åˆä¼šé‡åˆ°ä¸€ä¸ªæ–°çš„é—®é¢˜ï¼Œé‚£å°±æ˜¯<strong>æŒ‰ç…§ä»€ä¹ˆé€Ÿåº¦æ’­æ”¾è§†é¢‘å‘¢ï¼Ÿ</strong>è¿™ä¸ªä¹Ÿéœ€è¦RTPåè®®å‘ŠçŸ¥æ¥æ”¶ç«¯ã€‚<br>\nè¿™å°±æ˜¯RTPåè®®çš„ä¸€ä¸ªé‡è¦çš„ä½œç”¨ï¼Œå³å‘ŠçŸ¥æ¥æ”¶ç«¯ä¸€äº›å¿…è¦çš„ä¿¡æ¯ã€‚å½“ç„¶RTPåè®®çš„ä½œç”¨ä¸æ­¢è¿™äº›ï¼Œå®ƒå…¶å®åœ¨ç½‘ç»œå¸¦å®½é¢„æµ‹å’Œæ‹¥å¡æ§åˆ¶çš„æ—¶å€™ä¹Ÿå‘æŒ¥å‡ºäº†è‡³å…³é‡è¦çš„ä½œç”¨ã€‚æˆ‘ä»¬åœ¨ä¹‹åçš„è¯¾ç¨‹ä¸­ä¼šç»§ç»­è®¨è®ºï¼Œè¿™é‡Œå°±å…ˆä¸è®²äº†ï¼Œä½ å¤§ä½“æœ‰ä¸ªå°è±¡å°±å¯ä»¥ã€‚</li>\n</ul><p>æˆ‘ä»¬çŸ¥é“RTPåŒ…éœ€è¦é™„å¸¦å¾ˆå¤šé¢å¤–çš„ä¿¡æ¯ï¼Œé‚£è¿™äº›ä¿¡æ¯åœ¨RTPåŒ…ä¸­æ˜¯æ€ä¹ˆå­˜åœ¨çš„å‘¢ï¼Ÿå…¶å®RTPåŒ…åŒ…æ‹¬ä¸¤ä¸ªéƒ¨åˆ†ï¼šç¬¬ä¸€ä¸ªéƒ¨åˆ†æ˜¯RTPå¤´ï¼›å¦å¤–ä¸€ä¸ªéƒ¨åˆ†æ˜¯RTPæœ‰æ•ˆè½½è·ã€‚å…¶ä¸­RTPå¤´ä¸»è¦æ˜¯ç”¨æ¥æºå¸¦å‰é¢è¯´çš„é‚£äº›é¢å¤–ä¿¡æ¯çš„ï¼Œç­‰ä¼šå„¿æˆ‘ä¼šè¯¦ç»†ä»‹ç»ä¸€ä¸‹RTPå¤´éƒ¨æ¯ä¸ªå­—æ®µçš„æ„ä¹‰ã€‚</p><p>è¿™é‡Œæˆ‘å…ˆç¨å¾®è·Ÿä½ è§£é‡Šä¸€ä¸‹å¦å¤–ä¸€ä¸ªéƒ¨åˆ†ï¼Œä¹Ÿå°±æ˜¯RTPæœ‰æ•ˆè½½è·ã€‚RTPæœ‰æ•ˆè½½è·ï¼Œå…¶å®å°±æ˜¯RTPåŒ…é‡Œé¢çš„å®é™…æ•°æ®ã€‚å¦‚æœæ˜¯H264ç¼–ç æ‰“åŒ…æˆRTPåŒ…ï¼Œé‚£æœ‰æ•ˆè½½è·å°±æ˜¯ç»è¿‡H264ç¼–ç çš„ç æµï¼›å¦‚æœæ˜¯VP8ç¼–ç å‘¢ï¼Œé‚£å°±æ˜¯VP8ç æµã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬é‡ç‚¹æ¥çœ‹çœ‹RTPåŒ…çš„å¤´éƒ¨ã€‚å…·ä½“å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/14/e6/143a86a6aef7f664beca7268f58e99e6.jpg?wh=1280x426\" alt=\"\"><br>\næ˜¯ä¸æ˜¯æœ‰ç‚¹æ‡µï¼Œåˆ«æ€¥ï¼Œä¸‹é¢æˆ‘ç»™äº†ä¸€å¼ è¡¨æ ¼ï¼Œä½ å¯ä»¥å¯¹ç…§ç€è¡¨æ ¼çœ‹çœ‹RTPåŒ…å¤´çš„æ¯ä¸€ä¸ªå­—æ®µå ç”¨çš„ä½æ•°å’Œå…·ä½“çš„å«ä¹‰ã€‚å…¶ä¸­ç»¿è‰²éƒ¨åˆ†æ˜¯å¾ˆé‡è¦çš„çŸ¥è¯†ç‚¹ï¼Œéœ€è¦ä½ é‡ç‚¹æŒæ¡ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/3b/52/3b724acdcb5a69f3c1831591be49ca52.png?wh=1354x1194\" alt=\"å›¾ç‰‡\"></p><p>ä¸Šé¢è®²çš„å°±æ˜¯RTPå¤´éƒ¨çš„ä¸»è¦ç»„æˆéƒ¨åˆ†ã€‚åœ¨è¿™é‡Œéœ€è¦å•ç‹¬æä¸€ä¸‹RTPå¤´éƒ¨çš„å¦å¤–ä¸€ä¸ªæ¯”è¾ƒé‡è¦çš„éƒ¨åˆ†ï¼Œå°±æ˜¯RTPæ‰©å±•å¤´ã€‚ä»ä¸Šè¡¨æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒRTPåŒ…å¤´æœ‰ä¸€ä¸ªæ‰©å±•å¤´æ ‡å¿—ä½Xï¼Œå½“æ‰©å±•å¤´æ ‡å¿—ä½Xä¸º1çš„æ—¶å€™ï¼Œè¯´æ˜æœ‰RTPæ‰©å±•å¤´ã€‚RTPæ‰©å±•å¤´ç”±äºå¹³æ—¶å¤§å®¶å¾ˆå°‘ç”¨çœ‹ä¼¼ä¸æ€ä¹ˆé‡è¦ï¼Œä½†æ˜¯åœ¨RTCåœºæ™¯ä¸­ï¼Œå°¤å…¶æ˜¯WebRTCä¸­ç»å¸¸ä¼šç”¨åˆ°ã€‚å¦å¤–ï¼ŒRTPæ‰©å±•å¤´æˆ‘ä»¬åœ¨å¸¦å®½é¢„æµ‹çš„æ—¶å€™ä¹Ÿä¼šç”¨åˆ°ã€‚æ‰€ä»¥å»ºè®®ä½ ä¹Ÿäº†è§£ä¸€ä¸‹ã€‚</p><p>æ‰©å±•å¤´ä¸»è¦æ˜¯ç”¨æ¥ç»™ç”¨æˆ·è‡ªå®šä¹‰æ‰©å±•ä½¿ç”¨çš„ã€‚å› ä¸ºåè®®æ˜¯æ ‡å‡†çš„ï¼Œä½†æ˜¯ç”¨æˆ·ä½¿ç”¨åœºæ™¯å´æ˜¯å¤šç§å¤šæ ·çš„ï¼Œæ‰€ä»¥RTPéœ€è¦è€ƒè™‘çš„æ¯”è¾ƒå…¨é¢ï¼Œç•™äº†ä¸€ä¸ªæ‰©å±•å¤´å¯ä»¥è®©ç”¨æˆ·æ ¹æ®ä½¿ç”¨åœºæ™¯å’Œéœ€æ±‚ï¼Œè‡ªå·±å®šä¹‰æ‰©å±•å¤´ï¼Œç”¨æ¥ä¼ è¾“éœ€è¦åœ¨RTPåŒ…ä¸­ä¼ è¾“çš„ä¿¡æ¯ã€‚æ‰©å±•å¤´çš„æ ¼å¼å¯ä»¥å‚è€ƒ<a href=\"https://www.cnblogs.com/ishen/p/12050077.html\">è¿™ç¯‡æ–‡ç« </a>ï¼Œè¿™é‡Œå°±ä¸åšè¿‡å¤šçš„å±•å¼€äº†ã€‚</p><p>å¥½äº†ï¼Œä»¥ä¸Šå°±æ˜¯RTPåè®®çš„ä¸»è¦çŸ¥è¯†ç‚¹ã€‚æœ‰äº†RTPåè®®ï¼Œæˆ‘ä»¬å°±èƒ½å¤Ÿå°†ç æµæ‰“åŒ…æˆRTPåŒ…å‘ç»™æ¥æ”¶ç«¯äº†ã€‚å¦‚æœä½ åªè´Ÿè´£ä¼ è¾“RTPåŒ…ï¼Œè€Œä¸éœ€è¦ç®¡ä¼ è¾“è¿‡ç¨‹ä¸­æœ‰æ²¡æœ‰ä¸¢åŒ…ï¼Œä»¥åŠä¼ è¾“RTPåŒ…çš„æ—¶å€™æœ‰æ²¡æœ‰å¼•èµ·ç½‘ç»œæ‹¥å¡çš„è¯ï¼Œé‚£ä½ åªéœ€è¦ä½¿ç”¨RTPåè®®å°±å¯ä»¥äº†ã€‚æ¯”å¦‚è¯´ï¼Œä½ é€‰æ‹©ä½¿ç”¨TCPåè®®ä¼ è¾“RTPåŒ…çš„è¯å°±å¯ä»¥ä¸ç”¨ç®¡è¿™äº›äº‹æƒ…ï¼Œå› ä¸ºTCPåè®®å…·æœ‰ä¸¢åŒ…é‡ä¼ ã€æ‹¥å¡æ§åˆ¶ç­‰åŠŸèƒ½ã€‚</p><p>ä½†æ˜¯é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åœ¨ä¼ è¾“éŸ³è§†é¢‘æ•°æ®çš„æ—¶å€™ä¸ä¼šä½¿ç”¨TCPåè®®ä½œä¸ºä¼ è¾“å±‚åè®®ã€‚è¿™æ˜¯å› ä¸ºTCPåè®®æ›´é€‚åˆä¼ è¾“æ–‡æœ¬å’Œæ–‡ä»¶ç­‰æ•°æ®ï¼Œè€Œä¸é€‚åˆä¼ è¾“å®æ—¶éŸ³é¢‘æµå’Œè§†é¢‘æµæ•°æ®ï¼Œæ‰€ä»¥æˆ‘ä»¬é€šå¸¸ä¼š<strong>ä½¿ç”¨UDPåè®®ä½œä¸ºéŸ³è§†é¢‘æ•°æ®çš„ä¼ è¾“å±‚åè®®</strong>ã€‚ä½†UDPåè®®ä¸å…·æœ‰ä¸¢åŒ…é‡ä¼ å’Œæ‹¥å¡æ§åˆ¶çš„åŠŸèƒ½ï¼Œéœ€è¦æˆ‘ä»¬è‡ªå·±å®ç°ã€‚é‚£æ€ä¹ˆåŠå‘¢ï¼Ÿ</p><p>å…¶å®ï¼ŒçœŸè¦åšå¥½ä¸¢åŒ…é‡ä¼ å’Œæ‹¥å¡æ§åˆ¶æ˜¯éå¸¸éš¾çš„ï¼Œä¸€èŠ‚è¯¾ä¹Ÿè®²è¿°ä¸æ¸…æ¥šï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬ä¼šåœ¨æ¥ä¸‹æ¥çš„å¥½å‡ èŠ‚è¯¾é‡Œè¯¦ç»†è§£é‡Šã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å¯ä»¥å…ˆå…³æ³¨ä¸‹ä¸¢åŒ…é‡ä¼ å’Œæ‹¥å¡æ§åˆ¶çš„åŸºç¡€ä¹‹ä¸€ï¼Œä¹Ÿå°±æ˜¯RTPåè®®çš„â€œå¥½å…„å¼Ÿâ€ï¼ŒRTCPåè®®ã€‚</p><h2>RTCPåè®®</h2><p>RTCPï¼ˆReal-time Transport Control Protocolï¼‰åè®®ï¼Œå…¨ç§°æ˜¯å®æ—¶ä¼ è¾“æ§åˆ¶åè®®ã€‚å®ƒæ˜¯è¾…åŠ©RTPåè®®ä½¿ç”¨çš„ã€‚RTCPæŠ¥æ–‡æœ‰å¾ˆå¤šç§ï¼Œåˆ†åˆ«è´Ÿè´£ä¸åŒçš„åŠŸèƒ½ã€‚å¸¸ç”¨çš„æŠ¥æ–‡æœ‰å‘é€ç«¯æŠ¥å‘Šï¼ˆSRï¼‰ã€æ¥æ”¶ç«¯æŠ¥å‘Šï¼ˆRRï¼‰ã€RTPåé¦ˆæŠ¥å‘Šï¼ˆRTPFBï¼‰ç­‰ã€‚è€Œæ¯ä¸€ç§æŠ¥å‘Šçš„æœ‰æ•ˆè½½è·éƒ½æ˜¯ä¸åŒçš„ã€‚æˆ‘ä»¬å°±æ˜¯é€šè¿‡è¿™äº›æŠ¥å‘Šåœ¨æ¥æ”¶ç«¯å’Œå‘é€ç«¯ä¼ é€’å½“å‰ç»Ÿè®¡çš„RTPåŒ…çš„ä¼ è¾“æƒ…å†µçš„ã€‚æˆ‘ä»¬ä½¿ç”¨è¿™äº›ç»Ÿè®¡ä¿¡æ¯æ¥åšä¸¢åŒ…é‡ä¼ ï¼Œä»¥åŠé¢„æµ‹å¸¦å®½ã€‚</p><p>ä¸è¿‡ï¼Œæˆ‘éœ€è¦å†æ¬¡å¼ºè°ƒä¸€ä¸‹ï¼Œ<strong>RTCPåè®®åªæ˜¯ç”¨æ¥ä¼ é€’RTPåŒ…çš„ä¼ è¾“ç»Ÿè®¡ä¿¡æ¯ï¼Œæœ¬èº«ä¸å…·æœ‰ä¸¢åŒ…é‡ä¼ å’Œå¸¦å®½é¢„æµ‹çš„åŠŸèƒ½ï¼Œ</strong>è€Œè¿™äº›åŠŸèƒ½éœ€è¦æˆ‘ä»¬è‡ªå·±æ¥å®ç°ã€‚</p><p>æˆ‘ä»¬ä¸Šé¢è®²åˆ°äº†RTCPåè®®æœ‰å¾ˆå¤šç§æŠ¥å‘Šï¼Œè€Œæ¯ç§æŠ¥å‘Šå…¶å®å®šä¹‰çš„å…·ä½“å†…å®¹éƒ½æ˜¯ä¸ä¸€æ ·çš„ã€‚æˆ‘ä»¬è¿™é‡Œä»¥RTPFBæŠ¥å‘Šä¸­çš„NACKæŠ¥å‘Šï¼ˆä¸¢åŒ…æç¤ºæŠ¥å‘Šï¼‰ä½œä¸ºä¸€ä¸ªä¾‹å­æ¥çœ‹çœ‹RTCPåè®®å¤§æ¦‚æ˜¯ä»€ä¹ˆæ ·å­çš„ã€‚ï¼ˆRTPFBæŠ¥å‘ŠåŒ…å«äº†å¤šç§å­æŠ¥å‘Šï¼ŒNACKæŠ¥å‘Šåªæ˜¯å…¶ä¸­çš„ä¸€ç§ï¼Œå› ä¸ºæˆ‘ä»¬åé¢è¿˜ä¼šç”¨åˆ°è¿™ä¸ªæŠ¥å‘Šï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬å°±å…ˆä»¥è¿™ä¸ªæŠ¥å‘Šä¸ºä¾‹å­ã€‚ï¼‰</p><p>ä¸‹å›¾å°±æ˜¯NACKæŠ¥å‘Šçš„åè®®æ ¼å¼ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/83/cf/8346b7d062d6e18c1700603a2dd1a5cf.jpg?wh=1280x434\" alt=\"\"><br>\nå…¶ä¸­ï¼Œæ¯ä¸€ä¸ªå­—æ®µåœ¨ä¸‹è¡¨ä¸­éƒ½æœ‰è¯¦ç»†çš„è§£é‡Šã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/c3/73/c3e2f8185a38c0746be0c0dbd6b52073.jpg?wh=1280x720\" alt=\"\"></p><p>ä»ä¸Šé¢çš„NACKæŠ¥å‘Šæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒRTCPåè®®è·ŸRTPä¸åŒï¼Œå®ƒä»¬ä¼ é€’çš„ä¸œè¥¿æ˜¯ä¸ä¸€æ ·çš„ã€‚</p><p>æˆ‘ä»¬çŸ¥é“RTPæ˜¯ç”¨æ¥ä¼ è¾“å®é™…çš„è§†é¢‘æ•°æ®çš„ã€‚å®ƒå°±åƒä¸€ä¸ªå¿«é€’ç›’ï¼Œå…ˆè£…å¥½è§†é¢‘ï¼Œç„¶åå¡«å¥½è¿é€çš„è§†é¢‘åŸºæœ¬ä¿¡æ¯å’Œæ”¶ä»¶äººä¿¡æ¯ï¼Œæœ€åå°†è§†é¢‘è¿é€åˆ°æ”¶ä»¶äººæ‰‹ä¸Šã€‚</p><p>è€ŒRTCPåè®®åˆ™åƒæ˜¯ä¸€ä¸ªç”¨æ¥ç»Ÿè®¡å¿«é€’è¿é€æƒ…å†µçš„è®°å½•è¡¨ã€‚å…¶ä¸­çš„NACKæŠ¥å‘Šå°±æ˜¯å¿«é€’ä¸¢ä»¶æƒ…å†µçš„è®°å½•è¡¨ã€‚å®ƒè®°å½•ç€å“ªäº›å¿«é€’ä¸¢äº†ã€‚å‘ä»¶äººæ”¶åˆ°äº†NACKä¹‹åï¼Œå¯ä»¥é‡æ–°å¯„ä¸€ä¸ªåŒæ ·çš„å¿«é€’ç»™æ”¶ä»¶äººï¼Œé˜²æ­¢æ”¶ä»¶äººæ²¡æœ‰æ”¶åˆ°å¿«é€’ã€‚åœ¨è¿™é‡Œä¹Ÿå°±æ˜¯å°†ä¸¢å¤±çš„è§†é¢‘RTPåŒ…é‡ä¼ ä¸€éã€‚</p><p>è™½ç„¶æˆ‘ä»¬åªè®²äº†ä¸€ç§RTCPæŠ¥å‘Šï¼Œä½†æ˜¯å…¶å®ƒçš„æŠ¥å‘Šä¹Ÿæ˜¯ç±»ä¼¼çš„ã€‚å¤§å¤šæ•°æŠ¥å‘Šéƒ½æ˜¯ç”¨æ¥è®°å½•ä¼ è¾“ä¿¡æ¯çš„ã€‚å› ä¸ºæ•°é‡å¾ˆå¤šï¼Œæˆ‘ä»¬è¿™é‡Œå°±ä¸ä¸€ä¸€å±•å¼€äº†ã€‚å¦‚æœä½ æœ‰å…´è¶£çš„è¯ï¼Œå¯ä»¥æŸ¥çœ‹è¿™ä¸ª<a href=\"https://datatracker.ietf.org/doc/html/rfc3550\">RFCæ–‡æ¡£</a>ã€‚</p><p>å¥½äº†ï¼Œé€šè¿‡å­¦ä¹ RTPå’ŒRTCPçš„åŸºç¡€çŸ¥è¯†ï¼Œæˆ‘ä»¬äº†è§£äº†RTPåŒ…çš„åè®®æ ¼å¼å’Œä¸»è¦è´Ÿè´£çš„åŠŸèƒ½ï¼Œä¹ŸçŸ¥é“äº†RTCPçš„åè®®æ ¼å¼å’Œå…¶ä¸»è¦æ‰¿æ‹…çš„è´£ä»»ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å°±è¿›å…¥å®é™…å·¥ç¨‹éƒ¨åˆ†çš„çŸ¥è¯†äº†ã€‚</p><p>æˆ‘ç›¸ä¿¡é€šè¿‡å‰é¢è¯¾ç¨‹çš„å­¦ä¹ ï¼Œä½ å¯¹H264çš„ç æµç»“æ„å·²ç»è¾ƒä¸ºç†Ÿæ‚‰äº†ï¼ŒH264æ˜¯åœ¨å·¥ç¨‹ä¸­ç”¨å¾—æ¯”è¾ƒå¤šçš„ç¼–ç æ ‡å‡†ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬ä»¥H264ä¸ºä¾‹æ¥è®²è®²å®é™…å·¥ç¨‹å¼€å‘ä¸­ï¼Œæˆ‘ä»¬æ€ä¹ˆå°†H264ç æµæ‰“åŒ…æˆRTPåŒ…ã€‚</p><h2>H264 RTPæ‰“åŒ…</h2><p>æˆ‘ä»¬å‰é¢è¯´äº†ï¼ŒH264ç æµæ˜¯æ”¾åœ¨RTPçš„æœ‰æ•ˆè½½è·éƒ¨åˆ†çš„ã€‚å› æ­¤æœ‰æ•ˆè½½è·å‰é¢çš„RTPå¤´éƒ¨è·Ÿç æµæœ¬èº«æ˜¯æ²¡æœ‰å…³ç³»çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç›´æ¥å…ˆå°†å¤´éƒ¨çš„å­—æ®µå¡«å¥½å°±å¯ä»¥ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦å°†H264ç æµå¡«å……åˆ°RTPæœ‰æ•ˆè½½è·ä¸­å»ã€‚</p><p><strong>RTP H264ç æµæ‰“åŒ…åˆ†ä¸ºä¸‰ç§æ–¹å¼ï¼šåˆ†åˆ«æ˜¯å•NALUå°åŒ…æ–¹å¼ã€ç»„åˆå°åŒ…æ–¹å¼ã€åˆ†ç‰‡å°åŒ…æ–¹å¼ã€‚</strong>é¡¾åæ€ä¹‰ï¼Œå•NALUå°åŒ…æ–¹å¼æ˜¯ä¸€ä¸ªNALUæ‰“ä¸€ä¸ªRTPåŒ…ï¼›è€Œç»„åˆå°åŒ…æ–¹å¼å°±æ˜¯å¤šä¸ªNALUæ‰“ä¸€ä¸ªRTPåŒ…ï¼›åˆ†ç‰‡å°åŒ…æ–¹å¼åˆ™æ˜¯ä¸€ä¸ªNALUåˆ†å¼€æ”¾åœ¨è¿ç»­çš„å¤šä¸ªRTPåŒ…ä¸­ã€‚ä¸‹é¢æˆ‘ä»¬æ¥åˆ†åˆ«çœ‹ä¸€ä¸‹å„ç§æ‰“åŒ…æ–¹å¼æ˜¯æ€ä¹ˆæ ·çš„ã€‚</p><p>1ã€å•NALUå°åŒ…æ–¹å¼</p><p>å•NALUå°åŒ…æ–¹å¼éå¸¸ç®€å•ã€‚æˆ‘ä»¬åœ¨RTPå¤´éƒ¨çš„åé¢ï¼Œç›´æ¥æ”¾ç½®NALUæ•°æ®å³å¯ã€‚æ³¨æ„ï¼Œæ ¹æ®RTPçš„è§„å®šï¼Œè¿™é‡Œéœ€è¦<strong>å°†NALUæ•°æ®å‰é¢çš„èµ·å§‹ç å»é™¤</strong><strong>ï¼Œ</strong>ä¸è¦å°†èµ·å§‹ç ä¹Ÿå¸¦å…¥RTPåŒ…ä¸­ã€‚å…¶æ ¼å¼å¦‚ä¸‹ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/12/91/12961a82dca32ea3f1d760b4674fbf91.jpg?wh=1280x570\" alt=\"\"><br>\nä¸ºäº†è®©ä½ æ›´ç›´è§‚åœ°ç†è§£è¿™ç§æ‰“åŒ…æ–¹å¼ï¼Œæˆ‘ç»™å‡ºäº†æ‰“åŒ…çš„ç¤ºæ„å›¾ã€‚å…·ä½“å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/3d/9b/3d4845a261ef2f7e0683d8a81522ab9b.jpg?wh=1280x504\" alt=\"\"><br>\nè¿™ç§æ‰“åŒ…æ–¹å¼é€‚åˆäºå•ä¸ªRTPåŒ…å°äº1500å­—èŠ‚ï¼ˆMTUå¤§å°ï¼‰çš„æ—¶å€™ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œä¸€äº›På¸§å’ŒBå¸§ç¼–ç ä¹‹åæ¯”è¾ƒå°ï¼Œå°±å¯ä»¥ä½¿ç”¨è¿™ç§æ‰“åŒ…æ–¹å¼ã€‚</p><p>2ã€ç»„åˆå°åŒ…æ–¹å¼</p><p>ç»„åˆå°åŒ…æ–¹å¼ç¨å¾®å¤æ‚ä¸€äº›ã€‚å®ƒæ˜¯å°†å¤šä¸ªNALUæ”¾ç½®åœ¨ä¸€ä¸ªRTPåŒ…ä¸­ã€‚åœ¨RTPå¤´éƒ¨ä¹‹åï¼Œä¸”æ”¾ç½®NALUæ•°æ®ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦æ”¾ç½®ä¸€ä¸ª1å­—èŠ‚çš„STAP-Açš„å¤´éƒ¨ã€‚å…¶ä¸­ï¼ŒSTAP-A Headerè·ŸNALU Headerçš„æ ¼å¼æ˜¯ä¸€æ ·çš„ï¼Œåªæ˜¯Typeå­—æ®µçš„å€¼ä¸ä¸€æ ·ã€‚å› æ­¤ï¼Œä½ å¯ä»¥å‚è€ƒH264ç æµç»“æ„è¯¾ç¨‹ä¸­NALUå°èŠ‚æ¥ç†è§£STAP-Açš„å¤´éƒ¨çš„æ ¼å¼ã€‚å…·ä½“å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/16/c2/16ec78c30e2760fab5a34a74524663c2.jpg?wh=1280x406\" alt=\"\"><br>\nå…¶ä¸­ï¼ŒTypeçš„å–å€¼å¦‚ä¸‹è¡¨æ‰€ç¤ºã€‚è¿™é‡Œæˆ‘éœ€è¦æé†’ä½ ä¸€ä¸‹ï¼Œè¡¨ä¸­çš„24å’Œ25ç±»å‹å°±æ˜¯STAPç»„åˆå°åŒ…æ–¹å¼ã€‚æ³¨æ„ï¼Œæˆ‘ä»¬è¿™é‡Œåªè®²STAP-Aï¼Œè¿™æ˜¯å› ä¸ºSTAP-Bå¾ˆå°‘ç”¨åˆ°ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/5a/a6/5a27c25b87c3fcb2be2a396f59ecb2a6.jpg?wh=1280x664\" alt=\"\"><br>\næ”¾ç½®å®ŒSTAP-A Headerä¹‹åï¼Œåœ¨æ¯ä¸€ä¸ªNALUçš„å‰é¢æˆ‘ä»¬éœ€è¦æ”¾ç½®ä¸€ä¸ª2å­—èŠ‚çš„sizeå­—æ®µï¼Œç”¨äºè¡¨ç¤ºåé¢çš„NALUçš„å¤§å°ã€‚ä¹‹åæ‰æ˜¯NALUçš„æ•°æ®ã€‚è®°ä½åŒæ ·éœ€è¦<strong>å»æ‰èµ·å§‹ç </strong>ã€‚å…¶æ ¼å¼å¦‚ä¸‹ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/bb/c3/bb5498a2d629d5c754920d62d401c5c3.jpg?wh=1280x720\" alt=\"\"><br>\nåŒæ ·åœ°ï¼Œä¸ºäº†è®©ä½ æ›´ç›´è§‚åœ°ç†è§£è¿™ç§æ‰“åŒ…æ–¹å¼ï¼Œæˆ‘ä¹Ÿç»™å‡ºäº†æ‰“åŒ…çš„ç¤ºæ„å›¾ã€‚å…·ä½“å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/9c/c8/9ceee0961afe0be20a20f663fbf932c8.jpg?wh=1280x454\" alt=\"\"></p><p>è¿™ç§æ‰“åŒ…æ–¹å¼é€‚åˆäºå•ä¸ªNALUå¾ˆå°çš„æ—¶å€™ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å°†å¤šä¸ªNALUæ‰“åŒ…åˆ°ä¸€èµ·ä¹Ÿå°äº1500å­—èŠ‚çš„æ—¶å€™å°±å¯ä»¥ä½¿ç”¨ã€‚ä½†æ˜¯ç”±äºä¸€èˆ¬å¤šä¸ªè§†é¢‘å¸§åŠ åˆ°ä¸€èµ·è¿˜å°äº1500çš„æƒ…å†µæ¯”è¾ƒå°‘ï¼Œæ‰€ä»¥è§†é¢‘æ•°æ®çš„RTPæ‰“åŒ…ä¸€èˆ¬æ¥è¯´ç”¨ç»„åˆå°åŒ…æ–¹å¼çš„æƒ…å†µä¹Ÿå¾ˆå°‘ã€‚</p><p>3ã€åˆ†ç‰‡å°åŒ…æ–¹å¼</p><p>åˆ†ç‰‡å°åŒ…å°±æ›´å¤æ‚ä¸€äº›äº†ï¼Œä½†å´æ˜¯æˆ‘ä»¬ç»å¸¸ç”¨åˆ°çš„æ‰“åŒ…æ–¹å¼ã€‚</p><p>å®ƒæ˜¯å°†ä¸€ä¸ªNALUåˆ†å¼€æ‰“åŒ…åœ¨è¿ç»­çš„å¤šä¸ªRTPåŒ…ä¸­ã€‚å› æ­¤ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦ä¸€ä¸ª1å­—èŠ‚çš„FU indicatoræ¥è¡¨ç¤ºå½“å‰RTPåŒ…æ˜¯ä¸æ˜¯åˆ†ç‰‡å°åŒ…æ–¹å¼ï¼Œå†ç”¨ä¸€ä¸ª1å­—èŠ‚çš„FU Headeræ¥è¡¨ç¤ºå½“å‰è¿™ä¸ªRTPåŒ…æ˜¯ä¸æ˜¯NALUçš„ç¬¬ä¸€ä¸ªåŒ…ï¼Œæ˜¯ä¸æ˜¯NALUçš„æœ€åä¸€ä¸ªåŒ…ï¼Œä»¥åŠNALUçš„ç±»å‹ã€‚</p><p>ä¸ºä»€ä¹ˆéœ€è¦è¡¨ç¤ºæ˜¯ä¸æ˜¯ç¬¬ä¸€ä¸ªåŒ…ä»¥åŠæ˜¯ä¸æ˜¯æœ€åä¸€ä¸ªåŒ…å‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºä¸€ä¸ªNALUè¢«åˆ†å¼€æ”¾åœ¨å¤šä¸ªRTPåŒ…ä¸­ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“å“ªä¸ªæ˜¯ç¬¬ä¸€ä¸ªNALUåˆ†ç‰‡ï¼Œå“ªä¸ªæ˜¯æœ€åä¸€ä¸ªNALUåˆ†ç‰‡ï¼Œä»¥åŠå“ªäº›æ˜¯ä¸­é—´åˆ†ç‰‡ã€‚è¿™æ ·æˆ‘ä»¬æ‰èƒ½ç»„æˆä¸€ä¸ªå®Œæ•´çš„NALUã€‚</p><p>é‚£ä½ å¯èƒ½ä¼šé—®ï¼ŒNALUä¸æ˜¯å·²ç»åœ¨NALU Headerä¸­æœ‰äº†NALU Typeå­—æ®µå—ï¼Ÿä¸ºä»€ä¹ˆFU Headerä¸­è¿˜è¦æœ‰NALU Typeå‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºåˆ†ç‰‡å°åŒ…æ—¶éœ€è¦å»æ‰NALU Headerã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡FU Headerä¸­çš„NALU Typeå¾—åˆ°NALUçš„ç±»å‹ã€‚</p><p>å…¶ä¸­ï¼Œåˆ†ç‰‡å°è£…ä¸­çš„FU indicatorè·ŸNALU Headerçš„æ ¼å¼ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œä¹Ÿåªæ˜¯Typeå­—æ®µçš„å€¼ä¸åŒï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å‚è€ƒç»„åˆå°åŒ…å°èŠ‚ä¸­çš„è¡¨æ ¼ã€‚å› ä¸ºæˆ‘ä»¬ä¸€èˆ¬åªä½¿ç”¨FU-Aï¼Œæ‰€ä»¥æ¥ä¸‹æ¥è®²è¿°çš„å°†æ˜¯FU-Açš„åˆ†ç‰‡å°åŒ…æ–¹å¼ã€‚å¦å¤–ï¼ŒFU Headeræ ¼å¼å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/d5/63/d50ff5960768966518f9dafdac33a463.jpg?wh=1280x402\" alt=\"\"><br>\nè¿™é‡Œæˆ‘ç®€å•è§£é‡Šä¸€ä¸‹å„å­—æ®µçš„å«ä¹‰ï¼š</p><ul>\n<li>Sï¼šèµ·å§‹ä½ï¼Œå 1bitï¼Œä¸º1åˆ™è¡¨ç¤ºæ˜¯NALUçš„ç¬¬ä¸€ä¸ªRTPåŒ…ã€‚</li>\n<li>Eï¼šç»“æŸä½ï¼Œå 1bitï¼Œä¸º1åˆ™è¡¨ç¤ºæ˜¯NALUçš„æœ€åä¸€ä¸ªRTPåŒ…ã€‚</li>\n<li>Rï¼šé¢„ç•™ä½ï¼Œå 1bitã€‚</li>\n<li>Typeï¼šå 5bitsï¼Œè¡¨ç¤ºNALUç±»å‹ã€‚<br>\nåˆ†ç‰‡æ‰“åŒ…çš„æ ¼å¼å¦‚ä¸‹ï¼š</li>\n</ul><p><img src=\"https://static001.geekbang.org/resource/image/e3/bd/e3590b35793907d565293bf592c514bd.jpg?wh=1280x560\" alt=\"\"><br>\nåˆ†ç‰‡æ‰“åŒ…çš„ç¤ºæ„å›¾å¦‚ä¸‹ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/14/7b/1402a1e69a71d1d9dff7b4f40920907b.jpg?wh=1280x588\" alt=\"\"><br>\nè¿™ç§æ‰“åŒ…æ–¹å¼ä¸»è¦ç”¨äºå°†NALUæ•°æ®æ‰“åŒ…æˆä¸€ä¸ªRTPåŒ…æ—¶å¤§å°å¤§äº1500å­—èŠ‚çš„æ—¶å€™ï¼Œè¿™æ˜¯ç»å¸¸ä½¿ç”¨çš„è§†é¢‘RTPæ‰“åŒ…æ–¹æ³•ã€‚</p><p>å¥½äº†ï¼Œä»¥ä¸Šå°±æ˜¯ä¸‰ç§æ‰“åŒ…æ–¹å¼ã€‚æˆ‘ä»¬æ€ä¹ˆé€‰æ‹©ä½¿ç”¨å“ªç§æ–¹å¼æ‰“åŒ…å‘¢ï¼Ÿä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬åœ¨ä¸€ä¸ªH264ç æµä¸­ä¼šæ··åˆä½¿ç”¨å¤šç§RTPæ‰“åŒ…æ–¹å¼ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå¯¹äºå°çš„På¸§ã€Bå¸§è¿˜æœ‰SPSã€PPSæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å•ä¸ªNALUå°åŒ…æ–¹å¼ã€‚è€Œå¯¹äºå¤§çš„Iå¸§ã€På¸§æˆ–Bå¸§ï¼Œæˆ‘ä»¬ä½¿ç”¨åˆ†ç‰‡å°åŒ…æ–¹å¼ã€‚å½“ç„¶ï¼Œä½ å¯ä»¥æ ¹æ®å®é™…æƒ…å†µè¿›è¡Œé€‰æ‹©ã€‚</p><h2>å°ç»“</h2><p>å¥½äº†ï¼Œä»¥ä¸Šå°±æ˜¯è¿™èŠ‚è¯¾çš„ä¸»è¦å†…å®¹ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬æ¥æ€»ç»“ä¸€ä¸‹ã€‚</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬ä¸€èµ·è®¨è®ºäº†RTPåè®®å’ŒRTCPåè®®çš„ä¸»è¦ä½œç”¨ã€‚RTPåè®®ç”¨æ¥å°è£…éŸ³è§†é¢‘æ•°æ®ï¼Œå¹¶ä¸”å°†éŸ³è§†é¢‘æ•°æ®å’Œä¸€äº›åŸºæœ¬ä¿¡æ¯æ‰“åŒ…åˆ°RTPåŒ…ä¸­ä¼ è¾“åˆ°æ¥æ”¶ç«¯ã€‚è€ŒRTCPåè®®åˆ™è¾…åŠ©RTPåè®®ä½¿ç”¨ï¼Œå…¶ä¸­ä¸€ä¸ªä¸»è¦çš„åŠŸèƒ½å°±æ˜¯ç”¨æ¥ç»Ÿè®¡RTPåŒ…çš„å‘é€æƒ…å†µï¼Œæ¯”å¦‚è¯´ä¸¢åŒ…ç‡å’Œå…·ä½“å“ªäº›RTPåŒ…åœ¨ç½‘ç»œå‘é€çš„è¿‡ç¨‹ä¸­ä¸¢å¤±äº†ã€‚RTCPåŒ…å°†è¿™äº›ä¿¡æ¯æ”¶é›†èµ·æ¥å‘é€ç»™RTPåŒ…çš„å‘é€ç«¯ã€‚</p><p>ç„¶åï¼Œæˆ‘ä»¬è¯´æ˜äº†RTPå’ŒRTCPåè®®æ˜¯å¸¦å®½é¢„æµ‹å’Œæ‹¥å¡æ§åˆ¶çš„åŸºç¡€ï¼Œå¹¶ä¸”é‡ç‚¹å¼ºè°ƒäº†RTCPåè®®æœ¬èº«åªç»Ÿè®¡ä¿¡æ¯ï¼Œè€Œå¸¦å®½é¢„æµ‹å’Œæ‹¥å¡æ§åˆ¶ç®—æ³•æ˜¯éœ€è¦æˆ‘ä»¬è‡ªå·±å®ç°çš„ï¼ŒRTCPåè®®æœ¬èº«å¹¶æ²¡æœ‰è¿™ä¸ªåŠŸèƒ½ã€‚</p><p>æœ€åï¼Œæˆ‘ä»¬ä»‹ç»äº†H264çš„RTPæ‰“åŒ…æ–¹å¼ï¼Œæ€»å…±æœ‰ä¸‰ç§ï¼Œåˆ†åˆ«æ˜¯å•NALUå°åŒ…æ–¹å¼ã€ç»„åˆå°åŒ…æ–¹å¼å’Œåˆ†ç‰‡å°åŒ…æ–¹å¼ã€‚</p><ul>\n<li>å•NALUå°åŒ…æ–¹å¼ï¼Œä¸€èˆ¬é€‚åˆNALUå¤§å°æ¯”è¾ƒå°ï¼Œä¸”æ‰“åŒ…å‡ºæ¥çš„RTPå¤§å°å°äº1500å­—èŠ‚çš„æ—¶å€™ä½¿ç”¨ã€‚</li>\n<li>ç»„åˆå°åŒ…æ–¹å¼ï¼Œé€‚åˆå¤šä¸ªNALUéƒ½å¾ˆå°ï¼Œä¸”åˆå¹¶åœ¨ä¸€èµ·æ‰“åŒ…çš„RTPåŒ…å°äº1500å­—èŠ‚çš„æ—¶å€™ä½¿ç”¨ã€‚</li>\n<li>åˆ†ç‰‡æ‰“åŒ…ï¼Œåˆ™é€‚åˆNALUæ¯”è¾ƒå¤§çš„æƒ…å†µï¼Œä¸”æ‰“åŒ…æˆä¸€ä¸ªRTPåŒ…å…¶å¤§å°ä¼šå¤§äº1500å­—èŠ‚çš„æ—¶å€™ä½¿ç”¨ã€‚<br>\nè¿™å‡ ç§æ‰“åŒ…æ–¹å¼ä¸æ˜¯è¯´åªèƒ½é€‰æ‹©ä¸€ç§ï¼Œåœ¨ä¸€ä¸ªRTPæµä¸­æ˜¯å¯ä»¥å­˜åœ¨å¤šç§æ‰“åŒ…æ–¹å¼çš„ï¼Œå³å¯ä»¥æ··åˆä½¿ç”¨ã€‚</li>\n</ul><p>æœ€åå†ä¸€æ¬¡å¼ºè°ƒï¼Œè¿™èŠ‚è¯¾å’ŒH264ç æµç»“æ„é‚£èŠ‚è¯¾éƒ½æ˜¯éå¸¸é‡è¦çš„ã€‚å®ƒä»¬åœ¨å®é™…è§†é¢‘å¼€å‘çš„è¿‡ç¨‹ä¸­ä¼šç»å¸¸ç”¨åˆ°ï¼Œå¸Œæœ›ä½ å¯ä»¥ç†Ÿç»ƒæŒæ¡ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>ä¸ºä»€ä¹ˆæˆ‘ä»¬åœ¨é€‰æ‹©RTPæ‰“åŒ…æ–¹å¼çš„æ—¶å€™ï¼Œéœ€è¦æ ¹æ®NALUå¤§å°æ˜¯ä¸æ˜¯å¤§äº1500å­—èŠ‚ï¼ˆMTUï¼‰æ¥é€‰æ‹©ï¼Ÿ</p><p>æ¬¢è¿ä½ åœ¨ç•™è¨€åŒºå’Œæˆ‘åˆ†äº«ä½ çš„æ€è€ƒå’Œç–‘æƒ‘ï¼Œä½ ä¹Ÿå¯ä»¥æŠŠä»Šå¤©æ‰€å­¦åˆ†äº«ç»™èº«è¾¹çš„æœ‹å‹ï¼Œé‚€è¯·ä»–åŠ å…¥æ¢è®¨ï¼Œå…±åŒè¿›æ­¥ã€‚ä¸‹èŠ‚è¯¾å†è§ã€‚</p>","neighbors":{"left":{"article_title":"08ï½œå˜æ¢é‡åŒ–ï¼šå¦‚ä½•å‡å°‘è§†è§‰å†—ä½™ï¼Ÿ","id":464501},"right":{"article_title":"10ï½œå¸¦å®½é¢„æµ‹ï¼š3å¤§ç®—æ³•å‡†ç¡®é¢„ä¼°ç½‘ç»œå¸¦å®½","id":467073}},"comments":[{"had_liked":false,"id":325697,"user_name":"ç‹‚å¥”çš„å¸¦åˆ€èœ—ç‰›","can_delete":false,"product_type":"c1","uid":1063510,"ip_address":"","ucode":"75CC65C1B87EAC","user_header":"https://static001.geekbang.org/account/avatar/00/10/3a/56/96aa5869.jpg","comment_is_top":false,"comment_ctime":1639100865,"is_pvip":false,"replies":[{"id":"118428","content":"å›ç­”çš„å¾ˆå¥½","user_name":"ä½œè€…å›å¤","comment_id":325697,"uid":"2744713","ip_address":"","utype":1,"ctime":1639409187,"user_name_real":"ç¼–è¾‘"}],"discussion_count":4,"race_medal":0,"score":"27408904641","product_id":100098901,"comment_content":"<br>ä¸è¶…è¿‡1500ä¸»è¦æ˜¯å› ä¸ºUdpåè®®çš„MTUä¸º1500ï¼Œè¶…è¿‡äº†ä¼šå¯¼è‡´Udpåˆ†ç‰‡ä¼ è¾“ï¼Œè€Œåˆ†ç‰‡çš„ç¼ºç‚¹æ˜¯ä¸¢äº†ä¸€ä¸ªç‰‡ï¼Œæ•´åŒ…æ•°æ®å°±åºŸå¼ƒäº†","like_count":7,"discussions":[{"author":{"id":2744713,"avatar":"https://static001.geekbang.org/account/avatar/00/29/e1/89/2bc80aa1.jpg","nickname":"å«ä»€ä¹ˆå¥½å‘¢","note":"","ucode":"2A4069A23DE3B2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":538471,"discussion_content":"å›ç­”çš„å¾ˆå¥½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639409187,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":3029068,"avatar":"https://static001.geekbang.org/account/avatar/00/2e/38/4c/d20f8abf.jpg","nickname":"é¢œ","note":"","ucode":"94AD096D89A8C6","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":576498,"discussion_content":"UDPçš„MTUæ˜¯1472å§ï¼Œ1500å­—èŠ‚æ˜¯é“¾è·¯å±‚çš„MTU","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655608338,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2615904,"avatar":"https://static001.geekbang.org/account/avatar/00/27/ea/60/924c4fed.jpg","nickname":"æ–¹æ°","note":"","ucode":"AD902ACC9A9B88","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":539137,"discussion_content":"MTUæ˜¯IPå±‚ä¸Šçš„æ¦‚å¿µå§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639620980,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1898023,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/f6/27/c27599ae.jpg","nickname":"æœ¯å­ç±³å¾·","note":"","ucode":"382EA7E2AF0B56","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":537765,"discussion_content":"Ethernetçš„å…¸å‹MTUæ˜¯1500å­—èŠ‚ï¼Œæ‰€ä»¥UDPåœ¨è¿™ç§ç½‘ç»œæ‰æ˜¯è¿™ä¸ªåˆ†ç‰‡å°ºå¯¸","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639180944,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":332116,"user_name":"æˆ‘æœ‰ä¸€æ¡é±¼","can_delete":false,"product_type":"c1","uid":2143357,"ip_address":"","ucode":"9581A06A0EAF3B","user_header":"https://static001.geekbang.org/account/avatar/00/20/b4/7d/9455f31a.jpg","comment_is_top":false,"comment_ctime":1643027598,"is_pvip":true,"replies":[{"id":"122332","content":"åƒä¸¢åŒ…ç‡è¿™ç§ä¿¡æ¯ç¨å¾®ä¸¢ä¸€äº›é—®é¢˜ä¸å¤§ï¼ŒåƒNACKè¿™ç§ä¸¢äº†æœ‰å¯èƒ½ä¼šé€ æˆé‡ä¼ æ…¢äº†ï¼Œæ˜¯ä¼šæœ‰äº›å½±å“ã€‚ä½†ä¸€èˆ¬åªè¦ä¸æ˜¯éå¸¸å¤§çš„ä¸¢åŒ…å°±æ²¡å¤ªå¤§é—®é¢˜ã€‚ä¸€èˆ¬ä¸éœ€è¦ç”¨TCPæ¥ä¼ ã€‚","user_name":"ä½œè€…å›å¤","comment_id":332116,"uid":"2744713","ip_address":"","utype":1,"ctime":1645196749,"user_name_real":"ç¼–è¾‘"}],"discussion_count":2,"race_medal":0,"score":"5937994894","product_id":100098901,"comment_content":"æƒ³é—®ä¸€ä¸‹RTCPåè®®å¦‚æœä¹Ÿæ˜¯åŸºäºUDPåè®®çš„è¯ï¼Œæ€ä¹ˆä¿è¯ç»Ÿè®¡ä¿¡æ¯æ˜¯æ­£ç¡®çš„å‘¢ï¼Ÿæ‰€ä»¥RTCPæ˜¯ä¸æ˜¯åº”è¯¥å…·ä½“TCPåè®®ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":2744713,"avatar":"https://static001.geekbang.org/account/avatar/00/29/e1/89/2bc80aa1.jpg","nickname":"å«ä»€ä¹ˆå¥½å‘¢","note":"","ucode":"2A4069A23DE3B2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":551982,"discussion_content":"åƒä¸¢åŒ…ç‡è¿™ç§ä¿¡æ¯ç¨å¾®ä¸¢ä¸€äº›é—®é¢˜ä¸å¤§ï¼ŒåƒNACKè¿™ç§ä¸¢äº†æœ‰å¯èƒ½ä¼šé€ æˆé‡ä¼ æ…¢äº†ï¼Œæ˜¯ä¼šæœ‰äº›å½±å“ã€‚ä½†ä¸€èˆ¬åªè¦ä¸æ˜¯éå¸¸å¤§çš„ä¸¢åŒ…å°±æ²¡å¤ªå¤§é—®é¢˜ã€‚ä¸€èˆ¬ä¸éœ€è¦ç”¨TCPæ¥ä¼ ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645196749,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1209653,"avatar":"https://static001.geekbang.org/account/avatar/00/12/75/35/a0c15ca8.jpg","nickname":"ä¸€é ­è »ç‰›","note":"","ucode":"887E596A1DBF2D","race_medal":1,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":577175,"discussion_content":"å¥½é—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655955346,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":328387,"user_name":"Geek_b8aa7b","can_delete":false,"product_type":"c1","uid":2866565,"ip_address":"","ucode":"AF744B7DCD62BA","user_header":"","comment_is_top":false,"comment_ctime":1640699039,"is_pvip":false,"replies":[{"id":"119810","content":"å› ä¸ºä½¿ç”¨udpçš„è¯ï¼Œä½ å°±éœ€è¦è‡ªå·±å®ç°æ‹¥å¡æ§åˆ¶ç­‰QOSçš„ç­–ç•¥äº†ã€‚è¿™ä¸ªä¸œè¥¿æ˜¯å¾ˆéš¾çš„ã€‚rtmpç”¨åœ¨ç›´æ’­é¢†åŸŸï¼Œå¯¹å®æ—¶æ€§è¦æ±‚æ²¡æœ‰rtcé«˜ã€‚","user_name":"ä½œè€…å›å¤","comment_id":328387,"uid":"2744713","ip_address":"","utype":1,"ctime":1640929351,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":0,"score":"5935666335","product_id":100098901,"comment_content":"rtpå’Œrtcpæ˜¯åŸºäºudpçš„ï¼Œä¸Šé¢ä¹Ÿæåˆ°å®æ—¶åœºæ™¯ä¸€èˆ¬ç”¨udpï¼Œä½†ä¸ºä»€ä¹ˆrtmpæ˜¯åŸºäºtcpçš„ï¼Œæˆ‘çœ‹å¾ˆå¤šéŸ³è§†é¢‘ä¼ è¾“æ˜¯åŸºäºrtmpçš„ï¼Œä¸æ˜¯è¯´tcpä¼šå»¶æ—¶å˜›ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":2744713,"avatar":"https://static001.geekbang.org/account/avatar/00/29/e1/89/2bc80aa1.jpg","nickname":"å«ä»€ä¹ˆå¥½å‘¢","note":"","ucode":"2A4069A23DE3B2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":543003,"discussion_content":"å› ä¸ºä½¿ç”¨udpçš„è¯ï¼Œä½ å°±éœ€è¦è‡ªå·±å®ç°æ‹¥å¡æ§åˆ¶ç­‰QOSçš„ç­–ç•¥äº†ã€‚è¿™ä¸ªä¸œè¥¿æ˜¯å¾ˆéš¾çš„ã€‚rtmpç”¨åœ¨ç›´æ’­é¢†åŸŸï¼Œå¯¹å®æ—¶æ€§è¦æ±‚æ²¡æœ‰rtcé«˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640929351,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":325670,"user_name":"æœ¨å¸Œ","can_delete":false,"product_type":"c1","uid":1961788,"ip_address":"","ucode":"C682F76A9824F6","user_header":"https://static001.geekbang.org/account/avatar/00/1d/ef/3c/673826c1.jpg","comment_is_top":false,"comment_ctime":1639094579,"is_pvip":true,"replies":[{"id":"120353","content":"å‡ºå‘ç‚¹æ˜¯æˆ‘è§‰å¾—ä»£ç å¾ˆå¤šæ²¡æœ‰æ³¨é‡Šä½ å¾ˆéš¾çœ‹æ‡‚æ‰€ä»¥æˆ‘æƒ³åšä¸€é—¨è¯¾ç¨‹è®©å¤§å®¶æ‡‚åŸºæœ¬åŸç†ï¼Œä¹‹åçœ‹ä»£ç å°±ä¼šå®¹æ˜“ä¸€äº›ã€‚è¿™äº›åŸç†åœ¨webrtcå’Œffmpeg é‡Œé¢éƒ½æœ‰å®ç°ï¼Œåªæ˜¯å…‰çœ‹ä»£ç å¾ˆéš¾çœ‹æ‡‚ã€‚æˆ‘åœ¨æƒ³ä»¥åæœ‰æ—¶é—´æˆ‘æ˜¯ä¸æ˜¯å¯ä»¥ç›´æ¥è®²è®²é‡Œé¢çš„ä»£ç ã€‚å¯æ˜¯æœ€è¿‘å¤ªå¿™äº†ã€‚ğŸ˜­","user_name":"ä½œè€…å›å¤","comment_id":325670,"uid":"2744713","ip_address":"","utype":1,"ctime":1641893662,"user_name_real":"ç¼–è¾‘"}],"discussion_count":5,"race_medal":0,"score":"5934061875","product_id":100098901,"comment_content":"æ±Ÿå“¥ï¼Œæ‚¨è¿™è¯¾ç¨‹ä»‹ç»çš„è§†é¢‘æŠ€æœ¯åŸç†æ€§éƒ½å¾ˆè¯¦ç»†ï¼Œå¯ä»¥å¾ˆå¥½çš„ç†è§£è§†é¢‘åŸç†æ€§çš„ä¸œè¥¿ï¼Œåé¢æ˜¯å¦ä¼šå¸¦ä¸Šéƒ¨åˆ†ä»£ç é€»è¾‘çš„å®ç°ï¼ŒåŸç†è·Ÿå®ç°è¿˜æ˜¯æœ‰å¾ˆé•¿çš„è·¯ã€‚","like_count":1,"discussions":[{"author":{"id":2744713,"avatar":"https://static001.geekbang.org/account/avatar/00/29/e1/89/2bc80aa1.jpg","nickname":"å«ä»€ä¹ˆå¥½å‘¢","note":"","ucode":"2A4069A23DE3B2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":545283,"discussion_content":"å‡ºå‘ç‚¹æ˜¯æˆ‘è§‰å¾—ä»£ç å¾ˆå¤šæ²¡æœ‰æ³¨é‡Šä½ å¾ˆéš¾çœ‹æ‡‚æ‰€ä»¥æˆ‘æƒ³åšä¸€é—¨è¯¾ç¨‹è®©å¤§å®¶æ‡‚åŸºæœ¬åŸç†ï¼Œä¹‹åçœ‹ä»£ç å°±ä¼šå®¹æ˜“ä¸€äº›ã€‚è¿™äº›åŸç†åœ¨webrtcå’Œffmpeg é‡Œé¢éƒ½æœ‰å®ç°ï¼Œåªæ˜¯å…‰çœ‹ä»£ç å¾ˆéš¾çœ‹æ‡‚ã€‚æˆ‘åœ¨æƒ³ä»¥åæœ‰æ—¶é—´æˆ‘æ˜¯ä¸æ˜¯å¯ä»¥ç›´æ¥è®²è®²é‡Œé¢çš„ä»£ç ã€‚å¯æ˜¯æœ€è¿‘å¤ªå¿™äº†ã€‚ğŸ˜­","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641893662,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":2,"child_discussions":[{"author":{"id":1471387,"avatar":"https://static001.geekbang.org/account/avatar/00/16/73/9b/67a38926.jpg","nickname":"keepgoing","note":"","ucode":"A2FE0687FB17E0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2744713,"avatar":"https://static001.geekbang.org/account/avatar/00/29/e1/89/2bc80aa1.jpg","nickname":"å«ä»€ä¹ˆå¥½å‘¢","note":"","ucode":"2A4069A23DE3B2","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":572668,"discussion_content":"ææ±Ÿè€å¸ˆèƒ½å¦æœ‰æœºä¼šå‡ºä¸€äº›ç³»åˆ—è¯¾ç¨‹è®²è§£ffmpeg å’Œ webrtcçš„åŸºæœ¬åŸç†ï¼Œçš„ç¡®è¯´åˆ°äº†å¾ˆå¤šäººçš„ç—›ç‚¹ï¼Œç›´æ¥çœ‹ä»£ç å¾ˆéš¾çœ‹æ‡‚ï¼Œå¹¶ä¸”å¯¹äºæ•´ä½“ä»£ç ç»“æ„æŒæ¡å¾ˆå›°éš¾ï¼Œæœ‰ä¸€ä¸ªå¥½çš„è€å¸ˆå¸¦é¢†çš„ç¡®èƒ½å¤Ÿäº‹åŠåŠŸå€ã€‚å¦‚æœå¯ä»¥æœ‰çš„è¯ä¸€å®šå†æ¥æ”¯æŒææ±Ÿè€å¸ˆï¼å¦å¤–è¯·é—®ææ±Ÿè€å¸ˆæœ‰éŸ³è§†é¢‘äº¤æµçš„å¾®ä¿¡ç¾¤å¯ä»¥åŠ å…¥äº¤æµå—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1652886378,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":545283,"ip_address":""},"score":572668,"extra":""},{"author":{"id":1960993,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqJ4FhVnbLgPWLhpFEs3icl3p3qShEObhtIwviaSqPssHStFhYxADG5ib69Wz0sD7hwwiar52LsWJ9V9g/132","nickname":"å´æˆå‡¯","note":"","ucode":"0149FD4D16115C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2744713,"avatar":"https://static001.geekbang.org/account/avatar/00/29/e1/89/2bc80aa1.jpg","nickname":"å«ä»€ä¹ˆå¥½å‘¢","note":"","ucode":"2A4069A23DE3B2","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":575904,"discussion_content":"æœŸå¾…æ”»å…‹è§†é¢‘æŠ€æœ¯ 2 ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1655178080,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":545283,"ip_address":""},"score":575904,"extra":""}]},{"author":{"id":1898023,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/f6/27/c27599ae.jpg","nickname":"æœ¯å­ç±³å¾·","note":"","ucode":"382EA7E2AF0B56","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":537766,"discussion_content":"è¿™äº›å¼€æºä»£ç éƒ½èƒ½æ‰¾åˆ°ï¼Œå…¸å‹å°±æ˜¯ffmpeg","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1639181003,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1063510,"avatar":"https://static001.geekbang.org/account/avatar/00/10/3a/56/96aa5869.jpg","nickname":"ç‹‚å¥”çš„å¸¦åˆ€èœ—ç‰›","note":"","ucode":"75CC65C1B87EAC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":537545,"discussion_content":"ä¸è¶…è¿‡1500ä¸»è¦æ˜¯å› ä¸ºUdpåè®®çš„MTUä¸º1500ï¼Œè¶…è¿‡äº†ä¼šå¯¼è‡´Udpåˆ†ç‰‡ä¼ è¾“ï¼Œè€Œåˆ†ç‰‡çš„ç¼ºç‚¹æ˜¯ä¸¢äº†ä¸€ä¸ªç‰‡ï¼Œæ•´åŒ…æ•°æ®å°±åºŸå¼ƒäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639100825,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":350705,"user_name":"åŠ æ²¹åŠ æ²¹","can_delete":false,"product_type":"c1","uid":2032995,"ip_address":"","ucode":"4326347ED6E532","user_header":"https://static001.geekbang.org/account/avatar/00/1f/05/63/dd59ad18.jpg","comment_is_top":false,"comment_ctime":1657103563,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1657103563","product_id":100098901,"comment_content":"è€å¸ˆèƒ½è¡¥å……è®²è®²     rtp&#47;rtsp    åœ¨tcpä¸­çš„ç»„ç»‡å®ç°æ–¹å¼å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":350598,"user_name":"åŠ æ²¹åŠ æ²¹","can_delete":false,"product_type":"c1","uid":2032995,"ip_address":"","ucode":"4326347ED6E532","user_header":"https://static001.geekbang.org/account/avatar/00/1f/05/63/dd59ad18.jpg","comment_is_top":false,"comment_ctime":1657029597,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1657029597","product_id":100098901,"comment_content":"rtsp headerä¸­çš„markæ˜¯ä¸æ˜¯ä¹Ÿæ˜¯è¡¨ç¤ºå½“å‰å¸§æ•°æ®çš„ç»“æŸï¼Ÿ","like_count":0},{"had_liked":false,"id":347823,"user_name":"é¾šé•¿å","can_delete":false,"product_type":"c1","uid":2969046,"ip_address":"","ucode":"A710129E480788","user_header":"","comment_is_top":false,"comment_ctime":1654490557,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1654490557","product_id":100098901,"comment_content":"å¦‚æœä¸€ä¸ªNALUçš„å¤§å°å¤§äºMTU ï¼ˆ1500å­—èŠ‚ï¼‰ï¼Œé‚£ä¹ˆè¿™ä¸ªNALUå¿…é¡»é€šè¿‡åˆ†ç‰‡æ–¹å¼æ¥å°è£…å…¶rtpåŒ…ã€‚","like_count":0},{"had_liked":false,"id":344083,"user_name":"accessory","can_delete":false,"product_type":"c1","uid":1455454,"ip_address":"","ucode":"988A99ACF03611","user_header":"https://static001.geekbang.org/account/avatar/00/16/35/5e/7a584fed.jpg","comment_is_top":false,"comment_ctime":1651225427,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1651225427","product_id":100098901,"comment_content":"è¯·é—®ï¼ŒRTP å¤´ä¸­çš„ 16 ä½ sequence number èµ·å§‹å€¼ä¸ºä»€ä¹ˆæ˜¯éšæœºçš„ï¼Ÿ 2 å­—èŠ‚çš„èƒ½è¡¨ç¤ºçš„èŒƒå›´æ˜¯ [0, 2^16-1],è¶…å‡ºè¿™ä¸ªèŒƒå›´å sequence number æ€ä¹ˆå¤„ç†ï¼Œæ˜¯ä» 0 é‡æ–°å¼€å§‹ï¼Œè¿˜æ˜¯æ¢ä¸€ä¸ªéšæœºæ•°ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1513123,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKH4ILYLTcZjkl4lqZL6r4ZqPCic6IgPNByYccszEwhI0CU8SWW8g96gdIWiapw1RI6eYiagP10rXusA/132","nickname":"Geek_1760ca","note":"","ucode":"5D29BAB6ACDDF8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":572957,"discussion_content":"åº”è¯¥æ˜¯ä»0å¼€å§‹ï¼ŒFacebooké•¿æ—¶é—´è§†é¢‘é€šè¯çš„æŠ¥æ–‡åˆ°äº†65535è²Œä¼¼å°±ä»0å¼€å§‹äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1653104617,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":342666,"user_name":"Aå›","can_delete":false,"product_type":"c1","uid":1940105,"ip_address":"","ucode":"FE96F089C2312C","user_header":"https://static001.geekbang.org/account/avatar/00/1d/9a/89/babe8b52.jpg","comment_is_top":false,"comment_ctime":1650411512,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1650411512","product_id":100098901,"comment_content":"é¢„æµ‹å¸§ç»è¿‡ç¼–ç åéœ€è¦å°è£…è¿›RTPåŒ…æ‰èƒ½å‘é€ï¼Œå› ä¸ºæ¥æ”¶æ–¹è¦çŸ¥é“ç æµæ˜¯ä½¿ç”¨å“ªç§ç¼–ç ä»¥åŠæ’­æ”¾é€Ÿåº¦æ˜¯å¤šå°‘ç­‰ä¿¡æ¯ã€‚RTPåŒ…æ²¡æœ‰ä¸¢åŒ…é‡ä¼ å’Œæ‹¥å¡æ§åˆ¶ï¼ŒRTCPé€šè¿‡å‘é€RTPè®°å½•æ¥ç»Ÿè®¡å·²æ¥å—åŒ…ä¿¡æ¯ï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®è¿™äº›ä¿¡æ¯æ¥è‡ªå·±å®ç°ä¸¢åŒ…é‡ä¼ ã€‚RTPä¹Ÿä¼šæ ¹æ®ç æµå¤§å°é‡‡ç”¨å•åŒ…æˆ–åˆ†ç‰‡çš„æ ¼å¼æ¥å°è£…åŒ…ã€‚","like_count":0},{"had_liked":false,"id":338000,"user_name":"weekend","can_delete":false,"product_type":"c1","uid":2853514,"ip_address":"","ucode":"03EEAFC78B76B4","user_header":"https://static001.geekbang.org/account/avatar/00/2b/8a/8a/2aa0e992.jpg","comment_is_top":false,"comment_ctime":1647226924,"is_pvip":false,"replies":[{"id":"124414","content":"rtmpå…¶å®å°±æ˜¯ä½¿ç”¨çš„flvçš„å°è£…ï¼Œå¹¶ä½¿ç”¨tcpä¼ è¾“ã€‚","user_name":"ä½œè€…å›å¤","comment_id":338000,"uid":"2744713","ip_address":"","utype":1,"ctime":1648687660,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":0,"score":"1647226924","product_id":100098901,"comment_content":"å¥½åƒæ²¡æœ‰è®²RTMPç›¸å…³çš„ï¼ŒRTMPçš„åŒºåˆ«æ˜¯ä»€ä¹ˆ","like_count":0,"discussions":[{"author":{"id":2744713,"avatar":"https://static001.geekbang.org/account/avatar/00/29/e1/89/2bc80aa1.jpg","nickname":"å«ä»€ä¹ˆå¥½å‘¢","note":"","ucode":"2A4069A23DE3B2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":559274,"discussion_content":"rtmpå…¶å®å°±æ˜¯ä½¿ç”¨çš„flvçš„å°è£…ï¼Œå¹¶ä½¿ç”¨tcpä¼ è¾“ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1648687660,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":334229,"user_name":"æ™“é¾™","can_delete":false,"product_type":"c1","uid":1004576,"ip_address":"","ucode":"78CDCEBD183D3A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/54/20/93c79f7c.jpg","comment_is_top":false,"comment_ctime":1644822604,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1644822604","product_id":100098901,"comment_content":"è®°å½•ä¸‹ä»è§†é¢‘ä»ç¼–ç åˆ°ä¼ è¾“åˆ†åˆ«ç»å†äº†å“ªäº›æ ¼å¼ï¼š<br><br>ä¸€æ®µè§†é¢‘ -&gt;ç”±å¤šä¸ªFrameç»„æˆï¼ˆIï¼ŒBï¼ŒPï¼‰<br>ä¸€ä¸ªFrame -&gt; åˆ†ä¸ºå¤šä¸ªSlice<br>ä¸€ä¸ªSlice -&gt; ç”±å¤šä¸ªMBç»„æˆ<br><br>ç¼–ç ï¼š<br>Sliceç¼–ç  -&gt; MBåˆ†æ -&gt; ç†µç¼–ç  -&gt;å°è£…NALU<br><br>ä¼ è¾“ï¼š<br>NALU -&gt; ç”±ä¸€ä¸ªæˆ–å¤šä¸ªRTPåŒ…ç»„è£…ä¼ è¾“<br>","like_count":1},{"had_liked":false,"id":331957,"user_name":"Chris Zou","can_delete":false,"product_type":"c1","uid":1897148,"ip_address":"","ucode":"B6DFC71C1DD8B7","user_header":"https://static001.geekbang.org/account/avatar/00/1c/f2/bc/ffc7ad67.jpg","comment_is_top":false,"comment_ctime":1642920443,"is_pvip":false,"replies":[{"id":"122333","content":"æ˜¯çš„","user_name":"ä½œè€…å›å¤","comment_id":331957,"uid":"2744713","ip_address":"","utype":1,"ctime":1645196776,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":0,"score":"1642920443","product_id":100098901,"comment_content":"è€å¸ˆï¼Œç»“åˆjitterbufferé‚£ç« æ¥çœ‹ï¼Œå¯¹äºFU-Aå°åŒ…ï¼Œä¸€ä¸ªNALUå•å…ƒå¯¹åº”ä¸€ä¸ªsliceï¼Œä¸€å¸§æ•°æ®æ˜¯æœ‰å¯èƒ½å¯¹åº”å¤šä¸ªsliceï¼Œä¹Ÿå°±æ˜¯NALUTå•å…ƒï¼Œæ¯ä¸ªsliceéƒ½ä¼šæœ‰ä¸€æ¬¡Sèµ·å§‹ä½å’ŒEç»ˆæ­¢ä½ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":2744713,"avatar":"https://static001.geekbang.org/account/avatar/00/29/e1/89/2bc80aa1.jpg","nickname":"å«ä»€ä¹ˆå¥½å‘¢","note":"","ucode":"2A4069A23DE3B2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":551983,"discussion_content":"æ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645196776,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":325998,"user_name":"ç‹å¤æœ›","can_delete":false,"product_type":"c1","uid":1241588,"ip_address":"","ucode":"E878EC76576DC4","user_header":"https://static001.geekbang.org/account/avatar/00/12/f1/f4/707b7877.jpg","comment_is_top":false,"comment_ctime":1639300493,"is_pvip":false,"replies":[{"id":"118426","content":"å®æ—¶é‡‡é›†çš„è¯ä¸ä¸€å®šæ˜¯å›ºå®šçš„ã€‚æ¯”å¦‚æœ‰æ—¶å¸§ç‡æ˜¯å˜åŒ–çš„","user_name":"ä½œè€…å›å¤","comment_id":325998,"uid":"2744713","ip_address":"","utype":1,"ctime":1639409069,"user_name_real":"ç¼–è¾‘"}],"discussion_count":2,"race_medal":0,"score":"1639300493","product_id":100098901,"comment_content":"è¯·é—®å¯¹äºä¸åŒå¸§ï¼ŒrtpåŒ…ä¸­çš„timestampçš„å·®å€¼æ˜¯å›ºå®šçš„è¿˜æ˜¯å˜åŒ–çš„ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":2744713,"avatar":"https://static001.geekbang.org/account/avatar/00/29/e1/89/2bc80aa1.jpg","nickname":"å«ä»€ä¹ˆå¥½å‘¢","note":"","ucode":"2A4069A23DE3B2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":538469,"discussion_content":"å®æ—¶é‡‡é›†çš„è¯ä¸ä¸€å®šæ˜¯å›ºå®šçš„ã€‚æ¯”å¦‚æœ‰æ—¶å¸§ç‡æ˜¯å˜åŒ–çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639409069,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1897148,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/f2/bc/ffc7ad67.jpg","nickname":"Chris Zou","note":"","ucode":"B6DFC71C1DD8B7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":547111,"discussion_content":"è€å¸ˆï¼ŒRTPåŒ…ä¸­çš„è¿™ä¸ªæ—¶é—´æˆ³æ˜¯æ‰“åŒ…æ—¶å€™ç”Ÿæˆçš„æ—¶é—´æˆ³å—ï¼Ÿè¿˜æ˜¯ç¼–ç æˆ–è€…é‡‡é›†çš„æ—¶é—´æˆ³ï¼Ÿ\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642542540,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}