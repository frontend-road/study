{"id":183357,"title":"15 | CPUç¯‡ï¼šå¦‚ä½•è®©CPUçš„è¿è¡Œä¸å—é˜»ç¢ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯åº„æŒ¯è¿ã€‚</p><p>ä»è¿™ä¸€è®²å¼€å§‹ï¼Œæˆ‘ä»¬æ¢è®¨åˆ†æå‡ ä¸ªæœ€å®¹æ˜“å‘ç”Ÿæ€§èƒ½é—®é¢˜çš„é¢†åŸŸï¼šCPUã€å†…å­˜ã€å­˜å‚¨å’Œç½‘ç»œã€‚</p><p>è¿™ä¸€è®²å…ˆæ¥è®¨è®ºå…³äºCPUçš„å¸¸è§æ€§èƒ½é—®é¢˜ã€‚é¦–å…ˆæˆ‘ä»¬ä»ç¡¬ä»¶çš„è§’åº¦ï¼Œæ¥çœ‹çœ‹CPUçš„æ€§èƒ½å–å†³äºå“ªäº›å› ç´ ï¼Œç„¶ååˆ†æä¸€ä¸‹CPUçš„å†…éƒ¨ç»“æ„ã€‚æ¥ç€æˆ‘ä»¬æ¢è®¨å’ŒCPUæ€§èƒ½ç›¸å…³çš„è½¯ä»¶ç³»ç»Ÿï¼Œçœ‹çœ‹CPUè¿è¡Œæ—¶ä¾¯çš„è°ƒåº¦å’Œåˆ‡æ¢ã€‚</p><h2>CPUçš„æ€§èƒ½å†³å®šå› ç´ </h2><p>å®è§‚æ¥è®²ï¼Œä¸€å°æœåŠ¡å™¨é‡Œé¢çš„CPUæ€§èƒ½å–å†³äºå¥½å‡ ä¸ªå› ç´ ï¼ŒåŒ…æ‹¬æœ‰å¤šå°‘å¤„ç†å™¨ã€å¤šå°‘ä¸ªæ ¸ã€æ—¶é’Ÿä¸»é¢‘æ˜¯å¤šå°‘ã€æœ‰æ²¡æœ‰Turboæ¨¡å¼ã€å¤„ç†å™¨å†…éƒ¨çš„è¿ç®—æ¶æ„ä»¥åŠå’ŒCPUç´§å¯†äº¤äº’çš„å…¶ä»–éƒ¨ä»¶çš„æ€§èƒ½ã€‚</p><p>CPUçš„æ›´æ–°æ¢ä»£å¾ˆé¢‘ç¹ï¼ŒåŸºæœ¬ä¸Šæ¯ä¸¤å¹´å°±ä¼šæ›´æ–°ä¸€ä»£ã€‚æ¯”å¦‚Intelçš„CPUï¼Œæœ€è¿‘10å¹´å·²ç»ç»å†äº†5ä»£å·¦å³ã€‚æ¯ä¸€ä»£éƒ½æœ‰ä¸»é¢‘çš„å˜åŒ–ï¼Œè€Œä¸”æœ‰å¥½å‡ ä¸ªå˜ç§ã€‚</p><p>ä¸‹é¢çš„è¡¨æ ¼æè¿°äº†ä»åå¹´å‰ï¼ˆä¹Ÿå°±æ˜¯2009å¹´ï¼‰çš„SandyBridgeï¼Œåˆ°åæ¥çš„IvyBridgeã€Haswellã€Broadwellï¼Œç›´åˆ°Skylakeã€‚æ³¨æ„ï¼Œå¯¹åé¢çš„ä¸‰ä»£ï¼Œæˆ‘åˆ†åˆ«åˆ—å‡ºäº†å…¶ä¸­çš„ä¸¤ç§å˜åŒ–â€”â€”å•å¤„ç†å™¨ï¼ˆ1Pï¼‰å’ŒåŒå¤„ç†å™¨ï¼ˆ2Pï¼‰ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/0c/09/0ccfee296bbd3ab792b41ee0feb26209.png?wh=1290*280\" alt=\"\"></p><p>å¤§ä½“ä¸Šæˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œè™½ç„¶CPUæ›´æ–°æ¢ä»£ï¼Œä½†æ˜¯å¤„ç†å™¨çš„æ—¶é’Ÿä¸»é¢‘åŸºæœ¬ä¸å†æé«˜ï¼Œç”šè‡³å˜å¾—æ›´ä½äº†ã€‚è¿™æ ·çš„ç›®çš„æ˜¯é™ä½CPUçš„åŠŸè€—ã€‚æ¯”å¦‚SandyBridgeçš„æ—¶é’Ÿé¢‘ç‡æ˜¯2.6GHzï¼Œä½†æ˜¯åˆ°äº†Skylakeï¼Œåè€Œé™ä½åˆ°äº†2GHzã€‚</p><!-- [[[read_end]]] --><p>ä¸ºäº†æå‡å•ä¸ªå¤„ç†å™¨çš„æ€§èƒ½ï¼Œæ¯ä¸ªå¤„ç†å™¨é‡Œé¢çš„æ ¸æ•°å´è¶Šæ¥è¶Šå¤šï¼Œè¿™æ ·å°±å¯ä»¥å°½é‡çš„æå‡å¹¶è¡Œå¤„ç†èƒ½åŠ›ã€‚æ¯”å¦‚SandyBridgeçš„æ¯ä¸ªå¤„ç†å™¨åªæœ‰8ä¸ªæ ¸ï¼Œè€ŒSkylakeåˆ™å¤šè¾¾20ä¸ªæ ¸ã€‚</p><p>è€Œä¸”æˆ‘ä»¬ä¹Ÿçœ‹åˆ°ï¼Œæ¯ä¸€ä»£CPUéƒ½å…è®¸Turboæ¨¡å¼ï¼Œå°±æ˜¯è®©CPUçš„ä¸»é¢‘æé«˜ã€‚ç›®çš„æ˜¯å¯ä»¥è®©å¤„ç†å™¨åœ¨ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œç”¨æé«˜åŠŸè€—çš„ä»£ä»·æ¥å¢åŠ ä¸»é¢‘ï¼Œä»è€Œè·å¾—æ›´é«˜æ€§èƒ½ã€‚</p><h2>CPUçš„å†…éƒ¨ç»“æ„</h2><p>CPUçš„æ€§èƒ½ä¹Ÿå–å†³äºå®ƒçš„å†…éƒ¨ç»“æ„è®¾è®¡ã€‚å¾ˆå¤šç¨‹åºå‘˜å¯¹CPUçš„å†…éƒ¨æœºæ„ä¸æ˜¯å®Œå…¨æ¸…æ¥šï¼Œå°¤å…¶æ˜¯å¯¹ç›¸å…³çš„æœ¯è¯­ä¹‹é—´çš„åŒºåˆ«å’Œè”ç³»ä¸€çŸ¥åŠè§£ï¼Œæ¯”å¦‚å¤šå¤„ç†å™¨å’Œå¤šæ ¸ã€é€»è¾‘CPUå’Œç¡¬ä»¶çº¿ç¨‹ã€è¶…çº¿ç¨‹ï¼Œä»¥åŠL1/L2/L3ä¸‰çº§ç¼“å­˜ç­‰ã€‚</p><p>ä¹‹æ‰€ä»¥å¯¹è¿™äº›ç»“æ„ä¸ç”šäº†è§£ï¼Œä¸»è¦åŸå› æ˜¯ç°ä»£å¤„ç†å™¨å˜å¾—å¤æ‚ï¼Œæ™®éé‡‡ç”¨å¤šå¤„ç†å™¨ï¼Œå¤šæ ¸ä»¥åŠå†…éƒ¨çš„å„ç§ä¼˜åŒ–å¤„ç†æ¥æé«˜CPUæ€§èƒ½ã€‚æˆ‘ä»¬ä»Šå¤©å°±ä»å¤–åˆ°å†…ï¼Œä»å®è§‚åˆ°å¾®è§‚åœ°ä»‹ç»ä¸€ä¸‹ã€‚</p><p>æˆ‘æ³¨æ„åˆ°ï¼Œè¿™æ–¹é¢çš„å¾ˆå¤šä¸­æ–‡æœ¯è¯­ï¼Œå¤§å®¶æœ‰æ—¶å€™ç”¨æ³•ä¸ä¸€è‡´ï¼Œæ‰€ä»¥å¾ˆå®¹æ˜“æ··æ·†ã€‚ä¸ºäº†æ¸…æ¥šæè¿°ï¼Œä½ å°¤å…¶è¦æ³¨æ„ä¸€ä¸‹æˆ‘ç”¨çš„æœ¯è¯­ï¼ˆåŒ…æ‹¬è‹±æ–‡ï¼‰ã€‚</p><h3>å¤šå¤„ç†å™¨å’ŒNUMA</h3><p>ç°åœ¨çš„CPUæ™®éé‡‡ç”¨å¤šå¤„ç†å™¨ï¼ˆSocketï¼‰æ¥æé«˜CPUæ€§èƒ½ï¼Œæ¯ä¸ªå¤„ç†å™¨éƒ½æœ‰è‡ªå·±å¯ä»¥ç›´æ¥è®¿é—®çš„æœ¬åœ°å†…å­˜ï¼ˆLocal Memoryï¼‰ã€‚ä¸€èˆ¬æ¥è®²ï¼Œè¿™é‡Œé¢æ¯ä¸ªå¤„ç†å™¨çš„æ€§èƒ½å’Œå†…å­˜å¤§å°éƒ½æ˜¯ä¸€æ ·çš„ã€‚æ¯ä¸ªå¤„ç†å™¨ä¹Ÿéƒ½å¯ä»¥è®¿é—®å…¶ä»–å¤„ç†å™¨çš„å†…å­˜ï¼Œè¿™äº›å†…å­˜å°±ç›¸å½“äºæ˜¯å¤–åœ°/è¿œç¨‹å†…å­˜ï¼ˆRemote Memoryï¼‰ã€‚</p><p>å½“CPUå¤„ç†å™¨è®¿é—®æœ¬åœ°å†…å­˜æ—¶ï¼Œä¼šæœ‰è¾ƒçŸ­çš„å“åº”æ—¶é—´ï¼ˆç§°ä¸ºæœ¬åœ°è®¿é—®Local Accessï¼‰ã€‚è€Œå¦‚æœéœ€è¦è®¿é—®å¤–åœ°/è¿œç¨‹å†…å­˜æ—¶å€™ï¼Œå°±éœ€è¦é€šè¿‡äº’è”é€šé“è®¿é—®ï¼Œå“åº”æ—¶é—´å°±ç›¸æ¯”æœ¬åœ°å†…å­˜å˜æ…¢äº†ï¼ˆç§°ä¸ºè¿œç«¯è®¿é—®Remote Accessï¼‰ã€‚æ‰€ä»¥NUMAï¼ˆNon-Uniform Memory Accessï¼‰å°±æ­¤å¾—åã€‚</p><p>ä¸‹å›¾å±•ç¤ºäº†ä¸¤ä¸ªå¤„ç†å™¨çš„NUMAæ¶æ„ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/88/33/88b6a75956af211654f2fe6c13a0c933.png?wh=1300*732\" alt=\"\"></p><p>å¦‚æœå¤„ç†å™¨Aè®¿é—®å†…å­˜Aï¼Œå°±æ˜¯æœ¬åœ°è®¿é—®ã€‚å¦‚æœå®ƒè®¿é—®å†…å­˜Bï¼Œå°±æ˜¯è¿œç«¯è®¿é—®ï¼Œå†…å­˜çš„è®¿é—®å»¶è¿Ÿå¤§å¤§å¢åŠ ã€‚</p><p>é‡‡ç”¨å¤šå¤„ç†å™¨å’ŒNUMAæ¶æ„çš„ä¸»è¦åŸå› ï¼Œæ˜¯æé«˜æ•´ä¸ªCPUçš„å¹¶è¡Œå¤„ç†æ€§èƒ½ã€‚æ¯ä¸€å°æœåŠ¡å™¨å¯ä»¥åŒæ—¶è¿è¡Œå¾ˆå¤šç¨‹åºå’Œè¿›ç¨‹ã€‚å¯¹æ¯ä¸€ä¸ªè¿›ç¨‹å’Œçº¿ç¨‹è€Œè¨€ï¼Œå½“å®ƒè¿è¡Œåœ¨æŸä¸€ä¸ªå¤„ç†å™¨ä¸Šæ—¶ï¼Œå®ƒæ‰€å¯¹åº”çš„å†…å­˜ä½¿ç”¨é»˜è®¤çš„åˆ†é…æ–¹æ¡ˆæ˜¯â€”â€”ä¼˜å…ˆå°è¯•åœ¨è¯·æ±‚çº¿ç¨‹å½“å‰æ‰€å¤„çš„å¤„ç†å™¨çš„æœ¬åœ°å†…å­˜ä¸Šåˆ†é…ã€‚å¦‚æœæœ¬åœ°å†…å­˜ä¸è¶³ï¼Œæ‰ä¼šåˆ†é…åˆ°å¤–åœ°/è¿œç¨‹å†…å­˜ä¸Šå»ã€‚</p><h3>å¤šæ ¸ç»“æ„å’Œå¤šçº§ç¼“å­˜</h3><p>æˆ‘ä»¬å†çœ‹çœ‹æ¯ä¸ªå¤„ç†å™¨å†…éƒ¨çš„ç»“æ„ã€‚æˆ‘ä»¬åˆšåˆšè®²åˆ°çš„å¤„ç†å™¨ï¼Œå†…éƒ¨ä¸€èˆ¬éƒ½æ˜¯å¤šæ ¸ï¼ˆCoreï¼‰æ¶æ„ã€‚éšç€å¤šæ ¸å¤„ç†å™¨çš„å‘å±•ï¼ŒCPUçš„ç¼“å­˜é€šå¸¸åˆ†æˆäº†ä¸‰ä¸ªçº§åˆ«ï¼šL1ã€L2å’ŒL3ã€‚</p><p>çº§åˆ«è¶Šå°å°±è¶Šæ¥è¿‘CPUï¼Œé€Ÿåº¦æ›´å¿«ï¼ŒåŒæ—¶å®¹é‡ä¹Ÿè¶Šå°ã€‚L1å’ŒL2ä¸€èˆ¬åœ¨æ ¸çš„å†…éƒ¨ï¼Œæˆ‘ä»¬ä¸‹ä¸€è®²è¿˜ä¼šè¯¦ç»†è®²ã€‚L3ç¼“å­˜æ˜¯ä¸‰çº§ç¼“å­˜ä¸­æœ€å¤§çš„ä¸€çº§ï¼ŒåŒæ—¶ä¹Ÿæ˜¯æœ€æ…¢çš„ä¸€çº§ï¼›åœ¨åŒä¸€ä¸ªå¤„ç†å™¨å†…éƒ¨çš„æ ¸ä¼šå…±äº«åŒä¸€ä¸ª L3 ç¼“å­˜ã€‚</p><p>é™¤äº†å¤šä¸ªæ ¸ä»¥åŠL3ç¼“å­˜å¤–ï¼Œå¤„ç†å™¨ä¸Šä¸€èˆ¬è¿˜æœ‰éæ ¸å¿ƒå¤„ç†å™¨ï¼ˆUncoreï¼‰ï¼Œé‡Œé¢å«æœ‰å’ŒæŒ‡ä»¤è¿è¡Œä¸ç›´æ¥ç›¸å…³çš„ç»„ä»¶ï¼ŒåŒ…æ‹¬QPIæ§åˆ¶å™¨å’Œå­˜å‚¨å™¨ä¸€è‡´æ€§ç›‘æµ‹ç»„ä»¶ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/35/e7/354764adfca130abdc7ae15a0fafd0e7.png?wh=1300*731\" alt=\"\"></p><h3>è¶…çº¿ç¨‹ï¼ˆHyperthreadingï¼ŒHTï¼‰</h3><p>ä¸€ä¸ªæ ¸è¿˜å¯ä»¥è¿›ä¸€æ­¥åˆ†æˆå‡ ä¸ªé€»è¾‘æ ¸ï¼Œæ¥æ‰§è¡Œå¤šä¸ªæ§åˆ¶æµç¨‹ï¼Œè¿™æ ·å¯ä»¥è¿›ä¸€æ­¥æé«˜å¹¶è¡Œç¨‹åº¦ï¼Œè¿™ä¸€æŠ€æœ¯å°±å«è¶…çº¿ç¨‹ï¼Œæœ‰æ—¶å«åš simultaneous multi-threadingï¼ˆSMTï¼‰ã€‚</p><p>è¶…çº¿ç¨‹æŠ€æœ¯ä¸»è¦çš„å‡ºå‘ç‚¹æ˜¯ï¼Œå½“å¤„ç†å™¨åœ¨è¿è¡Œä¸€ä¸ªçº¿ç¨‹ï¼Œæ‰§è¡ŒæŒ‡ä»¤ä»£ç æ—¶ï¼Œå¾ˆå¤šæ—¶å€™å¤„ç†å™¨å¹¶ä¸ä¼šä½¿ç”¨åˆ°å…¨éƒ¨çš„è®¡ç®—èƒ½åŠ›ï¼Œéƒ¨åˆ†è®¡ç®—èƒ½åŠ›å°±ä¼šå¤„äºç©ºé—²çŠ¶æ€ã€‚è€Œè¶…çº¿ç¨‹æŠ€æœ¯å°±æ˜¯é€šè¿‡å¤šçº¿ç¨‹æ¥è¿›ä¸€æ­¥â€œå‹æ¦¨â€å¤„ç†å™¨ã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœä¸€ä¸ªçº¿ç¨‹è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œå¿…é¡»è¦ç­‰åˆ°ä¸€äº›æ•°æ®åŠ è½½åˆ°ç¼“å­˜ä¸­ä»¥åæ‰èƒ½ç»§ç»­æ‰§è¡Œï¼Œæ­¤æ—¶CPUå°±å¯ä»¥åˆ‡æ¢åˆ°å¦ä¸€ä¸ªçº¿ç¨‹ï¼Œå»æ‰§è¡Œå…¶ä»–æŒ‡ä»¤ï¼Œè€Œä¸ç”¨å»å¤„äºç©ºé—²çŠ¶æ€ï¼Œç­‰å¾…å½“å‰çº¿ç¨‹çš„æ•°æ®åŠ è½½å®Œæ¯•ã€‚</p><p>é€šå¸¸ï¼Œä¸€ä¸ªä¼ ç»Ÿçš„å¤„ç†å™¨åœ¨çº¿ç¨‹ä¹‹é—´åˆ‡æ¢ï¼Œå¯èƒ½éœ€è¦å‡ ä¸‡ä¸ªæ—¶é’Ÿå‘¨æœŸã€‚è€Œä¸€ä¸ªå…·æœ‰HTè¶…çº¿ç¨‹æŠ€æœ¯çš„å¤„ç†å™¨åªéœ€è¦1ä¸ªæ—¶é’Ÿå‘¨æœŸã€‚å› æ­¤å°±å¤§å¤§å‡å°äº†çº¿ç¨‹ä¹‹é—´åˆ‡æ¢çš„æˆæœ¬ï¼Œä»è€Œæœ€å¤§é™åº¦åœ°è®©å¤„ç†å™¨æ»¡è´Ÿè·è¿è½¬ã€‚</p><p>ä¸€ä¸ªæ ¸åˆ†æˆå‡ ä¸ªè¶…çº¿ç¨‹å‘¢ï¼Ÿ</p><p>è¿™ä¸ªæ•°å­—ä¼šæ ¹æ®CPUæ¶æ„æœ‰æ‰€å˜åŒ–ï¼›Intelä¸€èˆ¬æ˜¯æŠŠä¸€ä¸ªæ ¸åˆ†æˆ2ä¸ªã€‚</p><p>â€œè¿™å°è®¡ç®—æœºæœ‰å¤šå°‘CPUï¼Ÿâ€</p><p>æˆ‘ä»¬ç»å¸¸ä¼šé—®è¿™ä¸ªé—®é¢˜ï¼Œç»“åˆæˆ‘ä»¬åˆšåˆšè®²çš„çŸ¥è¯†ï¼Œå°±å¾ˆå®¹æ˜“å›ç­”äº†ã€‚</p><p>æ¯”å¦‚ï¼Œå¦‚æœä¸€å°è®¡ç®—æœºæœ‰ä¸¤ä¸ªå¤„ç†å™¨ï¼Œæ¯ä¸ªå¤„ç†å™¨æœ‰12ä¸ªæ ¸ï¼Œè€Œä¸”é‡‡ç”¨äº†HTè¶…çº¿ç¨‹ï¼Œé‚£ä¹ˆæ€»çš„CPUæ•°ç›®å°±æ˜¯48ï¼Œå°±æ˜¯2Ã—12Ã—2ã€‚è¿™ä¸ªæ•°å­—48ï¼Œå°±æ˜¯æˆ‘ä»¬å¹³æ—¶ç”¨ç›‘æ§è½¯ä»¶å’Œå‘½ä»¤çœ‹åˆ°çš„CPUçš„æ•°é‡ã€‚æ¯”å¦‚ï¼ŒLinuxçš„topæˆ–è€…vmstatå‘½ä»¤ï¼Œæ˜¾ç¤ºçš„CPUä¸ªæ•°å°±æ˜¯è¿™æ ·ç®—å‡ºæ¥çš„ã€‚</p><h2>CPUæ€§èƒ½æŒ‡æ ‡å’Œå¸¸è§æ€§èƒ½é—®é¢˜</h2><p>æˆ‘ä»¬ç»§ç»­æ¢è®¨CPUçš„æ€§èƒ½æŒ‡æ ‡å’Œå¸¸è§æ€§èƒ½é—®é¢˜ï¼Œè¿™æ–¹é¢å¾ˆå¤šèµ„æ–™éƒ½æœ‰æ¶‰åŠï¼Œæˆ‘ä»¬æçº²æŒˆé¢†åœ°æ€»ç»“ä¸€ä¸‹ã€‚</p><p>æœ€è¡¨å±‚çš„CPUæ€§èƒ½æŒ‡æ ‡ï¼Œå°±æ˜¯CPUçš„è´Ÿè½½æƒ…å†µå’Œä½¿ç”¨ç‡ã€‚CPUä½¿ç”¨ç‡åˆè¿›ä¸€æ­¥åˆ†æˆç³»ç»ŸCPUã€ç”¨æˆ·CPUã€IOç­‰å¾…CPUç­‰å‡ ä¸ªæŒ‡æ ‡ã€‚ä½ æ‰§è¡Œä¸€ä¸‹topå‘½ä»¤å°±ä¼šçœ‹åˆ°ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå› ä¸ºCPUæ¶æ„çš„å¤æ‚æ€§ï¼Œä»¥åŠå’Œå…¶ä»–éƒ¨ä»¶çš„äº¤äº’ï¼ŒCPUçš„ä½¿ç”¨ç‡å’Œè´Ÿè½½çš„å…³ç³»å¾€å¾€ä¸æ˜¯çº¿æ€§çš„ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœ10%çš„CPUä½¿ç”¨ç‡å¯ä»¥æ¯ç§’å¤„ç†1åƒä¸ªè¯·æ±‚ï¼Œé‚£ä¹ˆ80%çš„CPUä½¿ç”¨ç‡èƒ½å¤Ÿå¤„ç†å¤šå°‘è¯·æ±‚å‘¢ï¼Ÿä¸å¤ªå¯èƒ½å¤„ç†æ¯ç§’8åƒä¸ªè¯·æ±‚ï¼Œå¾€å¾€ä¼šè¿œè¿œå°äºè¿™ä¸ªæ•°å­—ã€‚</p><p>è¡¡é‡ä¸€ä¸ªåº”ç”¨ç¨‹åºå¯¹CPUä½¿ç”¨æ•ˆç‡æ—¶ï¼Œå¾€å¾€ä¼šè€ƒå¯ŸCPIï¼ˆCycles Per Instructionï¼Œæ¯æŒ‡ä»¤çš„å‘¨æœŸæ•°ï¼‰å’Œ IPCï¼ˆInstructions Per Cycleï¼Œæ¯å‘¨æœŸçš„æŒ‡ä»¤æ•°ï¼‰ã€‚è¿™ä¸¤ä¸ªæŒ‡æ ‡æœ‰åŠ©äºè¯†åˆ«è¿è¡Œæ•ˆç‡é«˜æˆ–ä½çš„åº”ç”¨ç¨‹åºã€‚è€Œä¸€å°è®¡ç®—æœºçš„CPUæ€§èƒ½ä¸€èˆ¬ç”¨MIPSï¼ˆMillions of Instructions Per Secondï¼‰æ¥è¡¡é‡ï¼Œè¡¨ç¤ºæ¯ç§’èƒ½è¿è¡Œå¤šå°‘ä¸ªç™¾ä¸‡æŒ‡ä»¤ï¼ŒMIPSè¶Šé«˜ï¼Œæ€§èƒ½è¶Šé«˜ã€‚MIPSçš„è®¡ç®—å¾ˆç®€å•ï¼Œå°±æ˜¯æ—¶é’Ÿé¢‘ç‡Ã—IPCã€‚</p><p>ç»§ç»­å¾€æ·±å¤„åˆ†æï¼ŒCPUå¸¸è§çš„å„ç§ä¸­æ–­åŒ…æ‹¬è½¯ä¸­æ–­å’Œç¡¬ä¸­æ–­ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€ç§ç‰¹æ®Šçš„ä¸­æ–­ï¼šä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚è¿™äº›æŒ‡æ ‡éœ€è¦å’Œæ¯ä¸ªæ ¸æŒ‚é’©ï¼Œç†æƒ³æƒ…å†µä¸‹æ˜¯å„ä¸ªæ ¸ä¸Šçš„ä¸­æ–­èƒ½å¤Ÿå‡è¡¡ã€‚å¦‚æœæ•°é‡ä¸å‡è¡¡ï¼Œå¾€å¾€ä¼šé€ æˆä¸¥é‡çš„æ€§èƒ½é—®é¢˜â€”â€”æœ‰çš„æ ¸ä¼šè¶…è½½è€Œå¯¼è‡´ç³»ç»Ÿå“åº”ç¼“æ…¢ï¼Œä½†æ˜¯å…¶ä»–çš„æ ¸åè€Œç©ºé—²ã€‚</p><p>å’ŒCPUç›¸å…³çš„æ€§èƒ½é—®é¢˜ï¼ŒåŸºæœ¬ä¸Šå°±æ˜¯è¡¨ç°ä¸ºCPUè¶…è½½æˆ–è€…ç©ºé—²ã€‚</p><p>å¦‚æœæ˜¯CPUè¶…è½½ï¼Œé‚£ä¹ˆå°±è¦åˆ†æä¸ºä»€ä¹ˆè¶…è½½ã€‚å¤šæ•°æƒ…å†µä¸‹éƒ½ä¸ä¸€å®šæ˜¯åˆç†çš„è¶…è½½ï¼Œæ¯”å¦‚è¯´å¤šæ ¸ä¹‹é—´çš„è´Ÿè½½æ²¡æœ‰å¹³è¡¡å¥½ï¼Œæˆ–è€…CPUå¹²äº†å¾ˆå¤šæ²¡ç”¨çš„æ´»ï¼Œæˆ–è€…åº”ç”¨ç¨‹åºæœ¬èº«çš„è®¾è®¡éœ€è¦ä¼˜åŒ–ç­‰ç­‰ã€‚åä¹‹ï¼Œå¦‚æœæ˜¯CPUç©ºé—²ï¼Œé‚£å°±éœ€è¦äº†è§£ä¸ºä»€ä¹ˆç©ºé—²ï¼Œæˆ–è®¸æ˜¯æŒ‡ä»¤é‡Œé¢å¤ªå¤šå†…å­˜æ•°æ®æ“ä½œï¼Œä»è€Œé€ æˆCPUåœé¡¿ï¼Œä¹Ÿæˆ–è®¸æ˜¯å¤ªå¤šçš„åˆ†æ”¯é¢„æµ‹é”™è¯¯ç­‰ï¼Œè¿™å°±éœ€è¦å…·ä½“åˆ†æå’Œå¯¹ç—‡ä¸‹è¯çš„ä¼˜åŒ–ã€‚</p><p>CPUå¯¹å¤šçº¿ç¨‹çš„æ‰§è¡Œé¡ºåºæ˜¯è°å®šçš„å‘¢ï¼Ÿ</p><p>æ˜¯ç”±å†…æ ¸çš„è¿›ç¨‹è°ƒåº¦æ¥å†³å®šçš„ã€‚å†…æ ¸è¿›ç¨‹è°ƒåº¦è´Ÿè´£ç®¡ç†å’Œåˆ†é…CPUèµ„æºï¼Œåˆç†å†³å®šå“ªä¸ªè¿›ç¨‹è¯¥ä½¿ç”¨ CPUï¼Œå“ªä¸ªè¿›ç¨‹è¯¥ç­‰å¾…ã€‚è¿›ç¨‹è°ƒåº¦ç»™ä¸åŒçš„çº¿ç¨‹å’Œä»»åŠ¡åˆ†é…äº†ä¸åŒçš„ä¼˜å…ˆçº§ï¼Œä¼˜å…ˆçº§æœ€é«˜çš„æ˜¯ç¡¬ä»¶ä¸­æ–­ï¼Œå…¶æ¬¡æ˜¯å†…æ ¸ï¼ˆç³»ç»Ÿï¼‰è¿›ç¨‹ï¼Œæœ€åæ˜¯ç”¨æˆ·è¿›ç¨‹ã€‚æ¯ä¸ªé€»è¾‘CPUéƒ½ç»´æŠ¤ç€ä¸€ä¸ªå¯è¿è¡Œé˜Ÿåˆ—ï¼Œç”¨æ¥å­˜æ”¾å¯è¿è¡Œçš„çº¿ç¨‹æ¥è°ƒåº¦ã€‚</p><h2>CPUçš„æ€§èƒ½ç›‘æµ‹å·¥å…·</h2><p>æˆ‘ä»¬æœ€åè®²ä¸€ä¸‹CPUæ€§èƒ½ç›‘æµ‹æ–¹é¢çš„å·¥å…·ã€‚å’ŒCPUç›‘æµ‹ç›¸å…³çš„å·¥å…·æŒºå¤šçš„ï¼Œè€Œä¸”å¾€å¾€æ¯ä¸ªå·¥å…·éƒ½åŒ…å«å¾ˆå¤šä¸åŒçš„æœ‰ç”¨çš„ä¿¡æ¯ã€‚</p><p>æ¯”å¦‚åœ¨Linuxä¸Šï¼Œæœ€å¸¸ç”¨çš„Topç³»ç»Ÿè¿›ç¨‹ç›‘æ§å‘½ä»¤ã€‚Topæ˜¯ä¸€ä¸ªä¸‡é‡‘æ²¹çš„å·¥å…·ï¼Œå¯ä»¥æ˜¾ç¤ºå‡ºCPUçš„ä½¿ç”¨ã€å†…å­˜çš„ä½¿ç”¨ã€äº¤æ¢å†…å­˜å’Œç¼“å­˜å¤§å°ã€ç¼“å†²åŒºå¤§å°ã€å„ä¸ªè¿›ç¨‹ä¿¡æ¯ç­‰ã€‚</p><p>å¦‚æœæƒ³è¦æŸ¥çœ‹è¿‡å»çš„CPUè´Ÿè½½æƒ…å†µï¼Œå¯ä»¥ç”¨uptimeã€‚ä¹Ÿå¯ä»¥ç”¨mpstatå’Œpidstatï¼Œæ¥åˆ†åˆ«æŸ¥çœ‹æ¯ä¸ªæ ¸è¿˜æœ‰æ¯ä¸ªè¿›ç¨‹çš„æƒ…å†µã€‚å¦ä¸€ä¸ªå¸¸ç”¨çš„vmstatå‘½ä»¤å¯ä»¥ç”¨äºæ˜¾ç¤ºè™šæ‹Ÿå†…å­˜ã€å†…æ ¸çº¿ç¨‹ã€ç£ç›˜ã€ç³»ç»Ÿè¿›ç¨‹ã€I/Oæ¨¡å—ã€ä¸­æ–­ç­‰ä¿¡æ¯ã€‚</p><p>å¯¹æœ‰ç»éªŒçš„æ€§èƒ½å·¥ç¨‹å¸ˆæ¥è®²ï¼Œæœ‰ä¸€ä¸ªç±»ä¼¼äºâ€œç‘å£«å†›åˆ€â€ä¸€æ ·çš„å¥½å·¥å…·ï¼šPerfã€‚</p><p>Perfæ˜¯Linuxä¸Šçš„æ€§èƒ½å‰–æï¼ˆprofilingï¼‰å·¥å…·ï¼Œæä¸ºæœ‰ç”¨ã€‚å®ƒæ˜¯åŸºäºäº‹ä»¶é‡‡æ ·åŸç†ï¼Œä»¥æ€§èƒ½äº‹ä»¶ä¸ºåŸºç¡€ï¼Œåˆ©ç”¨å†…æ ¸ä¸­çš„è®¡æ•°å™¨æ¥è¿›è¡Œæ€§èƒ½ç»Ÿè®¡ã€‚å®ƒä¸ä½†å¯ä»¥åˆ†ææŒ‡å®šåº”ç”¨ç¨‹åºçš„æ€§èƒ½é—®é¢˜ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥åˆ†æå†…æ ¸çš„æ€§èƒ½é—®é¢˜ã€‚</p><h2>æ€»ç»“</h2><p>è¿™ä¸€è®²æˆ‘ä»¬è®¨è®ºäº†è®¡ç®—æœºçš„è¿ç®—æ ¸å¿ƒï¼ŒCPUçš„ç»“æ„ï¼Œå°¤å…¶æ˜¯å®ƒå†…éƒ¨çš„å’Œæ€§èƒ½ç›¸å…³çš„éƒ¨ä»¶ï¼Œå¹¶æ¾„æ¸…äº†ä¸€äº›æœ¯è¯­ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/b7/7c/b7600ae6757369212e30aec6e829997c.png?wh=2531*3355\" alt=\"\"></p><p>CPUæ˜¯æœåŠ¡å™¨æ€§èƒ½çš„æœ€é‡è¦çš„éƒ¨åˆ†ï¼›å› ä¸ºä¸ç®¡ç¨‹åºä»£ç å¦‚ä½•ä¼˜åŒ–ï¼Œæœ€åéƒ½è¦è½¬æ¢æˆæŒ‡ä»¤ï¼Œè®©CPUæ¥æ‰§è¡Œã€‚ä¸ç®¡å…¶ä»–éƒ¨ä»¶å¦‚ä½•å’ŒCPUäº¤äº’ï¼Œæœ€ç»ˆç›®çš„æ˜¯è®©CPUå°½å¿«åœ°æ‹¿åˆ°æŒ‡ä»¤ï¼Œå¹¶æ»¡è½½æ‰§è¡Œã€‚</p><p>å”ä»£æœ‰ä¸ªè¯—äººå«æè´ºï¼Œä»–æ›¾ç»å½¢å®¹è·¨é©¬å¥”é©°çš„æ„¿æ™¯ï¼š</p><p>â€œå¤§æ¼ æ²™å¦‚é›ªï¼Œç‡•å±±æœˆä¼¼é’©ã€‚<br>\nä½•å½“é‡‘ç»œè„‘ï¼Œå¿«èµ°è¸æ¸…ç§‹ã€‚â€</p><p>æˆ‘ä»¬å¸¸æŠŠCPUç±»æ¯”å¤§è„‘ï¼ŒCPUæ€§èƒ½ä¼˜åŒ–çš„ç›®æ ‡ï¼Œå°±æ˜¯è®©å®ƒçš„è¿è¡Œä¸å—é˜»ç¢ï¼Œå¦‚åƒé‡Œé©¬ä¸€æ ·ä»»æ„é©°éª‹ã€‚</p><p>ç°ä»£CPUæå‡æ€§èƒ½çš„ä¸»è¦é€”å¾„æ˜¯å¹¶è¡ŒåŒ–ï¼Œè¿™æ–¹é¢çš„ç­–ç•¥åŒ…æ‹¬ï¼šå¤šå¤„ç†å™¨ã€å¤šæ ¸ã€è¶…çº¿ç¨‹ï¼Œå¦å¤–è¿˜æœ‰æµæ°´çº¿æ¶æ„å’Œè¶…æ ‡é‡ç­‰ç­‰ï¼Œéƒ½æ˜¯ä¸ºäº†æé«˜å¹¶è¡Œå¤„ç†èƒ½åŠ›ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>ä½ å·¥ä½œä¸­ä¸€å®šç¢°åˆ°è¿‡CPUæ–¹é¢çš„æ€§èƒ½é—®é¢˜å§ï¼Ÿæ€»ç»“ä¸€ä¸‹ï¼Œæœ‰å‡ ç§è¡¨ç°å½¢å¼ï¼Ÿ</p><blockquote>\n<p>æ¯”å¦‚æ˜¯æ€»ä½“CPUä½¿ç”¨é‡å¤ªé«˜ï¼Œè¿˜æ˜¯è®¡ç®—æœºçš„å‡ ä¸ªæ ¸è´Ÿè½½ä¸å‡è¡¡ï¼Ÿè´Ÿè½½ä¸å‡è¡¡æ˜¯ä»€ä¹ˆåŸå› å¯¼è‡´çš„å‘¢ï¼Ÿæ˜¯çº¿ç¨‹æ•°ä¸å¤Ÿï¼Œè¿˜æ˜¯ç³»ç»Ÿè°ƒåº¦çš„é—®é¢˜ï¼Ÿ</p>\n</blockquote><p>æ¬¢è¿ä½ åœ¨ç•™è¨€åŒºåˆ†äº«è‡ªå·±çš„æ€è€ƒï¼Œä¸æˆ‘å’Œå…¶ä»–åŒå­¦ä¸€èµ·è®¨è®ºï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠæ–‡ç« åˆ†äº«ç»™è‡ªå·±çš„æœ‹å‹ã€‚</p>","neighbors":{"left":{"article_title":"14 | æ€§èƒ½åˆ†ææ¦‚è¿°ï¼šæ€§èƒ½é—®é¢˜å½’æ ¹ç»“åº•æ˜¯ä»€ä¹ˆåŸå› ï¼Ÿ","id":182915},"right":{"article_title":"16 | å†…å­˜ç¯‡ï¼šå¦‚ä½•å‡å°‘å»¶è¿Ÿæå‡å†…å­˜åˆ†é…æ•ˆç‡ï¼Ÿ","id":184479}},"comments":[{"had_liked":false,"id":167006,"user_name":"Linuxer","can_delete":false,"product_type":"c1","uid":1153978,"ip_address":"","ucode":"272D9D8089C3D6","user_header":"https://static001.geekbang.org/account/avatar/00/11/9b/ba/333b59e5.jpg","comment_is_top":false,"comment_ctime":1577668428,"is_pvip":false,"replies":[{"id":"65069","content":"è¿™ä¸ªä¸“é¢˜å®šä½æ˜¯ç»™å¤§å®¶ä¸€ä¸ªç³»ç»Ÿå’Œå®è§‚çš„è®¤è¯†ã€‚å…·ä½“çš„æ¯ä¸ªçŸ¥è¯†ç‚¹çš„ç¡®æœ‰å¾ˆå¤šä¸œè¥¿éœ€è¦å­¦ã€‚æˆ‘ä¼šæ ¹æ®å¤§å®¶çš„åé¦ˆï¼Œè®¤çœŸè€ƒè™‘æ‰©å±•ä¸€ä¸‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"zhenyun2010","uid":"1272838","ctime":1577906097,"ip_address":"","comment_id":167006,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23052504908","product_id":100041101,"comment_content":"è¯·é—®è€å¸ˆåç»­æœ‰ä¸å®éªŒç»“åˆçš„è®²è§£å—ï¼Ÿæˆ‘è§‰å¾—å¤§å¤šæ•°äººéƒ½çŸ¥é“æ¦‚å¿µå’Œç›‘æµ‹çš„æ–¹æ³•ï¼Œä½†æ˜¯éƒ½ä¸çŸ¥é“å¦‚ä½•åˆ†æå‡ºå…·ä½“çš„æ·±å±‚æ¬¡çš„åŸå› ï¼Ÿæ¯”å¦‚NUMAé‡Œé¢è·¨èŠ‚ç‚¹å†…å­˜è®¿é—®å¯¹æ€§èƒ½åˆ°åº•æœ‰å¤šå¤§å½±å“å‘¢ï¼Ÿæ¯”å¦‚æµæ°´çº¿åœé¡¿å¯¹æ€§èƒ½çš„å½±å“åˆæ˜¯å¦‚ä½•è¡¨ç°çš„ç­‰ç­‰","like_count":5,"discussions":[{"author":{"id":1272838,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/nicib8gqImzrCGJYyJW3QEmsvtDcfuLe02wm55HBdC2mAHt1mqc6wT7I9GHyByS19zQRBiaZx2EeXKnyvslCZd4tQ/132","nickname":"zhenyun2010","note":"","ucode":"567187932468D8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479709,"discussion_content":"è¿™ä¸ªä¸“é¢˜å®šä½æ˜¯ç»™å¤§å®¶ä¸€ä¸ªç³»ç»Ÿå’Œå®è§‚çš„è®¤è¯†ã€‚å…·ä½“çš„æ¯ä¸ªçŸ¥è¯†ç‚¹çš„ç¡®æœ‰å¾ˆå¤šä¸œè¥¿éœ€è¦å­¦ã€‚æˆ‘ä¼šæ ¹æ®å¤§å®¶çš„åé¦ˆï¼Œè®¤çœŸè€ƒè™‘æ‰©å±•ä¸€ä¸‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577906097,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":167523,"user_name":"Ethan","can_delete":false,"product_type":"c1","uid":1246017,"ip_address":"","ucode":"6856180D7B2525","user_header":"https://static001.geekbang.org/account/avatar/00/13/03/41/ba59e1ee.jpg","comment_is_top":false,"comment_ctime":1577847966,"is_pvip":false,"replies":[{"id":"65064","content":"è°¢è°¢å»ºè®®ï¼Œåé¢çš„ç« èŠ‚æœ‰çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"zhenyun2010","uid":"1272838","ctime":1577905448,"ip_address":"","comment_id":167523,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18757717150","product_id":100041101,"comment_content":"æ¦‚å¿µæ¸…æ¥šäº†ï¼Œéœ€è¦å®æˆ˜æ‰å¥½","like_count":4,"discussions":[{"author":{"id":1272838,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/nicib8gqImzrCGJYyJW3QEmsvtDcfuLe02wm55HBdC2mAHt1mqc6wT7I9GHyByS19zQRBiaZx2EeXKnyvslCZd4tQ/132","nickname":"zhenyun2010","note":"","ucode":"567187932468D8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479890,"discussion_content":"è°¢è°¢å»ºè®®ï¼Œåé¢çš„ç« èŠ‚æœ‰çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577905448,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":167137,"user_name":"Di Yu","can_delete":false,"product_type":"c1","uid":1248429,"ip_address":"","ucode":"9AC55943F7D5D1","user_header":"https://static001.geekbang.org/account/avatar/00/13/0c/ad/d1ab1995.jpg","comment_is_top":false,"comment_ctime":1577697522,"is_pvip":false,"replies":[{"id":"65065","content":"Linuxä¸‹çš„è¯çœ‹å„ä¸ªCPUçš„è´Ÿè½½ï¼Œæ¯”å¦‚mpstat -P ALL","user_name":"ä½œè€…å›å¤","user_name_real":"zhenyun2010","uid":"1272838","ctime":1577905511,"ip_address":"","comment_id":167137,"utype":1}],"discussion_count":3,"race_medal":0,"score":"14462599410","product_id":100041101,"comment_content":"è¯·é—®è€å¸ˆï¼Œç”¨ä»€ä¹ˆå·¥å…·æ‰èƒ½æµ‹å‡ºæ¥CPUå‡ ä¸ªæ ¸è´Ÿè½½ä¸å‡è¡¡å‘¢ï¼Ÿ","like_count":4,"discussions":[{"author":{"id":1272838,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/nicib8gqImzrCGJYyJW3QEmsvtDcfuLe02wm55HBdC2mAHt1mqc6wT7I9GHyByS19zQRBiaZx2EeXKnyvslCZd4tQ/132","nickname":"zhenyun2010","note":"","ucode":"567187932468D8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479759,"discussion_content":"Linuxä¸‹çš„è¯çœ‹å„ä¸ªCPUçš„è´Ÿè½½ï¼Œæ¯”å¦‚mpstat -P ALL","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577905511,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1205253,"avatar":"https://static001.geekbang.org/account/avatar/00/12/64/05/6989dce6.jpg","nickname":"æˆ‘æ¥ä¹Ÿ","note":"","ucode":"773D6104F56767","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":109911,"discussion_content":"topåæŒ‰æ•°å­—1ï¼Œå°±å¯ä»¥çœ‹å„cpuçš„è´Ÿè½½äº†ã€‚\nå¦‚æœæœ‰çš„cpuè´Ÿè½½æ¥è¿‘100%ï¼Œè€Œæœ‰çš„åˆå‡ ä¹ä¸º0ï¼Œé‚£å°±è¯´æ˜æ˜¯å‡ºç°äº† ä¸€æ–¹æœ‰éš¾ï¼Œå¦ä¸€æ–¹å›´è§‚çš„æƒ…å†µã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577714503,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1014800,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7c/10/165cb374.jpg","nickname":"Scott","note":"","ucode":"7E57FDCB5E5D49","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":109873,"discussion_content":"mpstat","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577713738,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":184350,"user_name":"é’±","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1583296633,"is_pvip":false,"replies":[{"id":"72958","content":"è¿™ä¸ªé—®é¢˜ä»·å€¼ç™¾ä¸‡ç¾å…ƒï¼Œå“ˆå“ˆã€‚<br>ç¨‹åºå‘˜å¾ˆå¤šæ–¹é¢éƒ½å¯ä»¥å¸®åŠ©CPUçš„é«˜æ•ˆï¼Œæ¯”å¦‚å°½é‡å¤šçº¿ç¨‹å¹¶è¡ŒåŒ–ï¼Œæ•°æ®ç»“æ„ç¼“å­˜å‹å¥½ï¼Œç¨‹åºå®ç°å°‘ç”¨å†…å­˜ç­‰ç­‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"zhenyun2010","uid":"1272838","ctime":1584456868,"ip_address":"","comment_id":184350,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5878263929","product_id":100041101,"comment_content":"ç«™åœ¨ç¨‹åºå‘˜çš„è§’åº¦ï¼Œå¦‚ä½•è®©CPUçš„è¿è¡Œä¸å—é˜»ç¢å“ªï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1272838,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/nicib8gqImzrCGJYyJW3QEmsvtDcfuLe02wm55HBdC2mAHt1mqc6wT7I9GHyByS19zQRBiaZx2EeXKnyvslCZd4tQ/132","nickname":"zhenyun2010","note":"","ucode":"567187932468D8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":485984,"discussion_content":"è¿™ä¸ªé—®é¢˜ä»·å€¼ç™¾ä¸‡ç¾å…ƒï¼Œå“ˆå“ˆã€‚\nç¨‹åºå‘˜å¾ˆå¤šæ–¹é¢éƒ½å¯ä»¥å¸®åŠ©CPUçš„é«˜æ•ˆï¼Œæ¯”å¦‚å°½é‡å¤šçº¿ç¨‹å¹¶è¡ŒåŒ–ï¼Œæ•°æ®ç»“æ„ç¼“å­˜å‹å¥½ï¼Œç¨‹åºå®ç°å°‘ç”¨å†…å­˜ç­‰ç­‰ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1584456868,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":284181,"user_name":"Aå›","can_delete":false,"product_type":"c1","uid":1940105,"ip_address":"","ucode":"FE96F089C2312C","user_header":"https://static001.geekbang.org/account/avatar/00/1d/9a/89/babe8b52.jpg","comment_is_top":false,"comment_ctime":1616116216,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1616116216","product_id":100041101,"comment_content":"è¡¡é‡å¤„ç†å™¨æ€§èƒ½ğŸ‰æŒ‡æ ‡æ˜¯æ¯ç§’æŒ‡ä»¤æ•°ï¼Œè¿™å’Œgpuçš„æ¯ç§’æµ®ç‚¹è¿ç®—æ•°ç±»ä¼¼ã€‚MIPSï¼ipc*clkã€‚è®¡ç®—æ—¶é—´é•¿ï¼Œå¯èƒ½æ˜¯å¤šå¤„ç†å™¨ã€å¤šæ ¸è´Ÿå€ºä¸å‡è¡¡å¯¼è‡´çš„ï¼Œè¿™å¯èƒ½è·Ÿçº¿ç¨‹è°ƒåº¦æœ‰å…³ï¼Œå•æ ¸çš„æ€§èƒ½åªèƒ½æ˜¯æé«˜ä»£ç è´¨é‡ã€‚","like_count":0},{"had_liked":false,"id":269369,"user_name":"æƒœå¿ƒï¼ˆä¼Ÿç¥ºï¼‰","can_delete":false,"product_type":"c1","uid":1067846,"ip_address":"","ucode":"393DF1A9E81332","user_header":"https://static001.geekbang.org/account/avatar/00/10/4b/46/717d5cb9.jpg","comment_is_top":false,"comment_ctime":1608626359,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1608626359","product_id":100041101,"comment_content":"è¥¿ç“œå“¥çš„ã€Šå¤§è¯è®¡ç®—æœºã€‹é‡Œé¢å¯¹ç¡¬ä»¶ä»‹ç»æ¯”è¾ƒæ¸…æ™°","like_count":1},{"had_liked":false,"id":257964,"user_name":"å¤§ä¿Šstan","can_delete":false,"product_type":"c1","uid":1125370,"ip_address":"","ucode":"BD0CB5FC790DDB","user_header":"https://static001.geekbang.org/account/avatar/00/11/2b/fa/1cde88d4.jpg","comment_is_top":false,"comment_ctime":1604226531,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1604226531","product_id":100041101,"comment_content":"æŠŠè¿™ç¯‡æ–‡ç« çœ‹ä¸‹æ¥ï¼Œåªèƒ½ä½©æœè€å¸ˆçš„æ€»ç»“èƒ½åŠ›ã€‚è€å¸ˆè¿™ç¯‡æ–‡ç« ä¸­çš„å¾ˆå¤šæ¦‚å¿µå¤§å®¶å¯ä»¥ç»“åˆLInuxæ€§èƒ½ä¼˜åŒ–å®æˆ˜ä»¥åŠæ·±å…¥æ“ä½œç³»ç»Ÿç»„æˆåŸç†ä¸€èµ·å­¦ä¹ ã€‚å¾ˆå¤šå°çš„æ¦‚å¿µç‚¹å¦å¤–ä¸¤é—¨è¯¾ç¨‹éƒ½æœ‰è®²åˆ°ã€‚æ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥çœ‹çœ‹å»ã€‚","like_count":0},{"had_liked":false,"id":252317,"user_name":"è°¢ç…œé”‹","can_delete":false,"product_type":"c1","uid":1134624,"ip_address":"","ucode":"5D1279174C7A1B","user_header":"https://static001.geekbang.org/account/avatar/00/11/50/20/47729092.jpg","comment_is_top":false,"comment_ctime":1602233612,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1602233612","product_id":100041101,"comment_content":"å¦‚æœèƒ½ç»“åˆå…·ä½“caseæ¥åˆ†æï¼Œå°±æ¯”è¾ƒå¥½ã€‚æˆ‘ä»¬åœ¨å®é™…ä¸šåŠ¡ä¸­å¯¹äºè®¡ç®—å‹å¯†é›†å‹ç¨‹åºè®¾ç½®è¶…é¢‘ï¼Œç¡®å®å¸¦æ¥äº†æ„æƒ³ä¸åˆ°çš„æ”¶ç›Šã€‚è€å¸ˆè®²çš„è¿™ç§ï¼Œä½¿ç”¨åœºæ™¯ä¹Ÿèƒ½ä¸¾å‡ ä¸ªä¾‹å­å°±æ¯”è¾ƒå¥½","like_count":0},{"had_liked":false,"id":201094,"user_name":"Frank","can_delete":false,"product_type":"c1","uid":1111985,"ip_address":"","ucode":"9DADD72C193296","user_header":"https://static001.geekbang.org/account/avatar/00/10/f7/b1/982ea185.jpg","comment_is_top":false,"comment_ctime":1585714276,"is_pvip":true,"replies":[{"id":"75737","content":"å¯¹çš„ï¼Œç¨‹åºä¼šç¼–è¯‘é“¾æ¥ï¼Œç„¶åå¯æ‰§è¡Œç¨‹åºè¢«è½½å…¥å†…å­˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"zhenyun2010","uid":"1272838","ctime":1586050409,"ip_address":"","comment_id":201094,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1585714276","product_id":100041101,"comment_content":"è€å¸ˆã€‚cpu æŒ‡ä»¤æ˜¯å­˜åœ¨å“ªå„¿çš„ï¼Ÿ è¿˜æ˜¯è¯´ç¨‹åºä»£ç ï¼Œç»è¿‡ç¿»è¯‘åå°±ä¼šå˜æˆ cpu æŒ‡ä»¤ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1272838,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/nicib8gqImzrCGJYyJW3QEmsvtDcfuLe02wm55HBdC2mAHt1mqc6wT7I9GHyByS19zQRBiaZx2EeXKnyvslCZd4tQ/132","nickname":"zhenyun2010","note":"","ucode":"567187932468D8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490238,"discussion_content":"å¯¹çš„ï¼Œç¨‹åºä¼šç¼–è¯‘é“¾æ¥ï¼Œç„¶åå¯æ‰§è¡Œç¨‹åºè¢«è½½å…¥å†…å­˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586050409,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":180422,"user_name":"ç¡åœ¨åºŠæ¿ä¸‹","can_delete":false,"product_type":"c1","uid":1267832,"ip_address":"","ucode":"69BF52FF9C8A0C","user_header":"https://static001.geekbang.org/account/avatar/00/13/58/78/fe19274b.jpg","comment_is_top":false,"comment_ctime":1582278311,"is_pvip":false,"replies":[{"id":"71062","content":"CPUè°ƒåº¦æ˜¯åœ¨çº¿ç¨‹çº§çš„ã€‚Whileå¾ªç¯åº”è¯¥ä¼šè®©é‚£ä¸ªCPU 100%ã€‚ä½ çš„CPUæˆ–è®¸æœ‰16ä¸ªç¡¬ä»¶çº¿ç¨‹ï¼ˆæ¯ä¸ªæ ¸å¯ä»¥æœ‰å¤šä¸ªç¡¬ä»¶çº¿ç¨‹ï¼‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"zhenyun2010","uid":"1272838","ctime":1583082298,"ip_address":"","comment_id":180422,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1582278311","product_id":100041101,"comment_content":"è€å¸ˆé—®ä¸€ä¸ªé—®é¢˜ï¼Œæœ‰ä¸€ä¸ªc++å››ä¸ªçº¿ç¨‹ç¨‹åºéƒ½æ‰§è¡Œwhileæ­»å¾ªç¯ï¼Œä»»åŠ¡ç®¡ç†å™¨æŸ¥çœ‹æ—¶cpuæ˜¾ç¤º25%ï¼Œè¯´æ˜æ˜¯4æ ¸å¤„ç†å™¨æŸä¸€ä¸ªæ ¸100%äº†å—ï¼Ÿ ä¸€ä¸ªè¿›ç¨‹é»˜è®¤æ˜¯ä¸èƒ½è·¨å¤„ç†å™¨å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1272838,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/nicib8gqImzrCGJYyJW3QEmsvtDcfuLe02wm55HBdC2mAHt1mqc6wT7I9GHyByS19zQRBiaZx2EeXKnyvslCZd4tQ/132","nickname":"zhenyun2010","note":"","ucode":"567187932468D8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484660,"discussion_content":"CPUè°ƒåº¦æ˜¯åœ¨çº¿ç¨‹çº§çš„ã€‚Whileå¾ªç¯åº”è¯¥ä¼šè®©é‚£ä¸ªCPU 100%ã€‚ä½ çš„CPUæˆ–è®¸æœ‰16ä¸ªç¡¬ä»¶çº¿ç¨‹ï¼ˆæ¯ä¸ªæ ¸å¯ä»¥æœ‰å¤šä¸ªç¡¬ä»¶çº¿ç¨‹ï¼‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583082298,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":168775,"user_name":"Wang","can_delete":false,"product_type":"c1","uid":1207893,"ip_address":"","ucode":"7846A73E6DFF24","user_header":"https://static001.geekbang.org/account/avatar/00/12/6e/55/8c2c83f4.jpg","comment_is_top":false,"comment_ctime":1578155918,"is_pvip":false,"replies":[{"id":"65707","content":"ä½ è¯´çš„â€œè´Ÿè½½åˆ°8â€æ˜¯æŒ‡Runnable=8å§ã€‚å››æ ¸å¦‚æœHT Enableçš„è¯ï¼Œä¼šæœ‰8ä¸ªCPUï¼Œæ‰€ä»¥ä¸ç®—è¿‡è½½ã€‚72%æˆ‘è§‰å¾—ä¹Ÿä¸å¥‡æ€ªã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"zhenyun2010","uid":"1272838","ctime":1578366439,"ip_address":"","comment_id":168775,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1578155918","product_id":100041101,"comment_content":"CPUåˆ©ç”¨ç‡åœ¨72%ï¼Œè´Ÿè½½å´åˆ°äº†8ä»¥ä¸Šï¼Œå››æ ¸CPUï¼Œè¯·é—®è¿™ç§æƒ…å†µæ­£å¸¸å—ï¼Ÿæ˜¯ä¸æ˜¯éœ€è¦æ·±å…¥ç ”ç©¶CPUç©ºé—²åŸå› ï¼Ÿ<br>éå¸¸æ„Ÿè°¢ï¼","like_count":0,"discussions":[{"author":{"id":1272838,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/nicib8gqImzrCGJYyJW3QEmsvtDcfuLe02wm55HBdC2mAHt1mqc6wT7I9GHyByS19zQRBiaZx2EeXKnyvslCZd4tQ/132","nickname":"zhenyun2010","note":"","ucode":"567187932468D8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480331,"discussion_content":"ä½ è¯´çš„â€œè´Ÿè½½åˆ°8â€æ˜¯æŒ‡Runnable=8å§ã€‚å››æ ¸å¦‚æœHT Enableçš„è¯ï¼Œä¼šæœ‰8ä¸ªCPUï¼Œæ‰€ä»¥ä¸ç®—è¿‡è½½ã€‚72%æˆ‘è§‰å¾—ä¹Ÿä¸å¥‡æ€ªã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578366439,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":167119,"user_name":"Scott","can_delete":false,"product_type":"c1","uid":1014800,"ip_address":"","ucode":"7E57FDCB5E5D49","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7c/10/165cb374.jpg","comment_is_top":false,"comment_ctime":1577695108,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1577695108","product_id":100041101,"comment_content":"æˆ‘é‡åˆ°è¿‡ä¸€ä¸ªsys cpué«˜çš„é—®é¢˜ï¼Œç°è±¡å°±æ˜¯sys cpuè‡³å°‘10%ï¼Œä¸€é‡å¯å°±å¥½äº†ï¼Œæœ€åå‘ç°æ˜¯cgroupæ³„æ¼çš„é—®é¢˜ï¼Œè¿™ä¸ªé—®é¢˜æ’æŸ¥è¿‡ç¨‹çœŸæ˜¯éå¸¸è‰°éš¾ã€‚","like_count":0,"discussions":[{"author":{"id":1260026,"avatar":"https://static001.geekbang.org/account/avatar/00/13/39/fa/a7edbc72.jpg","nickname":"å®‰æ’","note":"","ucode":"F78CFA9624CAEF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":222343,"discussion_content":"Cgroupæ€ä¹ˆæ³„éœ²ï¼Ÿå­¦ä¹ ä¸‹ä½ çš„æ¡ˆä¾‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586137280,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1047423,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/fb/7f/746a6f5e.jpg","nickname":"Q","note":"","ucode":"785546C617D3DF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1260026,"avatar":"https://static001.geekbang.org/account/avatar/00/13/39/fa/a7edbc72.jpg","nickname":"å®‰æ’","note":"","ucode":"F78CFA9624CAEF","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583683,"discussion_content":"https://www.infoq.cn/article/l3qnkhnyusv9w7tgxqvp","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660293463,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":222343,"ip_address":"å¹¿ä¸œ"},"score":583683,"extra":""}]}]}]}