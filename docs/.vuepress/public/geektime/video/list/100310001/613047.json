{"id":613047,"title":"49｜函数的定义：如何优雅地反复引用同一段代码？","content":"<p><strong>课后习题</strong><br>\n请找到“飞机大战”的课程代码，将输出飞机位置的代码块改为以函数方式实现。</p><p><strong>课程代码、课件及其他相关资料地址</strong><br>\n<a href=\"https://gitee.com/wilsonyin/zero-basics-python\">https://gitee.com/wilsonyin/zero-basics-python</a></p>","comments":[{"had_liked":false,"id":364493,"user_name":"Matthew","can_delete":false,"product_type":"c3","uid":2843865,"ip_address":"江苏","ucode":"96093089773740","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEKSVuNarJuDhBSvHY0giaq6yriceEBKiaKuc04wCYWOuso50noqDexaPJJibJN7PHwvcQppnzsDia1icZkw/132","comment_is_top":false,"comment_ctime":1671024039,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100310001,"comment_content":"from pynput.keyboard import Key, Listener, KeyCode\n\n# 函数：显示位置\ndef show_location(loc):\n    for a in loc:\n        print(a)\n\nbackground = [[0,  0, 0],    \n              [0, &quot;x&quot;, 0],        \n              [0,   0, 0]]      \n\n# 调用 显示位置 函数\nshow_location(background)\n\n# 函数：响应按键\ndef on_press(key):\n\n    if key == KeyCode.from_char(&#39;w&#39;):\n        \n        for i in 0,1,2:\n            for j in 0,1,2:\n                if background[i][j] == &quot;x&quot; and i &gt;0 :\n                    background[i][j] = &quot;0&quot;\n                    background[i-1][j] = &quot;x&quot;\n\n\n    elif key == KeyCode.from_char(&#39;s&#39;):    \n\n        for i in 2,1,0:\n            for j in 0,1,2:\n                if background[i][j] == &quot;x&quot; and i &lt; 2 :\n                    background[i][j] = &quot;0&quot;\n                    background[i+1][j] = &quot;x&quot;\n\n\n\n    elif key == KeyCode.from_char(&#39;a&#39;):\n\n        for i in 0,1,2:\n            for j in 0,1,2:\n                if background[i][j] == &quot;x&quot; and j &gt; 0 :\n                    background[i][j] = &quot;0&quot;\n                    background[i][j-1] = &quot;x&quot;\n                    break\n\n\n    elif key == KeyCode.from_char(&#39;d&#39;):\n        \n        for i in 0,1,2:\n            for j in 0,1,2:\n                if background[i][j] == &quot;x&quot; and j &lt; 2 :\n                    background[i][j] = &quot;0&quot;\n                    background[i][j+1] = &quot;x&quot;\n                    break\n\n    print()\n    # 调用 显示位置 函数\n    show_location(background)   \n\n\nwith Listener(on_press=on_press) as listener:\n    listener.join()","like_count":5},{"had_liked":false,"id":367279,"user_name":"yanyu-xin","can_delete":false,"product_type":"c3","uid":1899757,"ip_address":"广东","ucode":"3AA389F9E4C236","user_header":"","comment_is_top":false,"comment_ctime":1675090176,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100310001,"comment_content":"from pynput.keyboard import Key, Listener, KeyCode\n\n# 位置列表，全局变量\nbackground = [[&#39;0&#39;, &#39;0&#39;, &#39;0&#39;],    \n              [&#39;0&#39;, &#39;x&#39;, &#39;0&#39;],        \n              [&#39;0&#39;, &#39;0&#39;, &#39;0&#39;]]  \n\n# 打印列表，显示位置信息的函数\ndef show_background(): \n    print(background[0])\n    print(background[1])\n    print(background[2])\n    print()\n    return\n\n# 显示初始位置\nshow_background()\n\n# 按键动作函数\ndef on_press(key):\n    # 按w键，循环找到位置，修改相应位置信息\n    if key == KeyCode.from_char(&#39;w&#39;):\n        for i in 0,1,2:\n            for j in 0,1,2:\n                if background[i][j] == &quot;x&quot; and i &gt;0 :\n                    background[i][j] = &quot;0&quot;\n                    background[i-1][j] = &quot;x&quot;\n    # 按s键，循环找到位置，修改相应位置信息  \n    elif key == KeyCode.from_char(&#39;s&#39;): \n        for i in 2,1,0:\n            for j in 0,1,2:\n                if background[i][j] == &quot;x&quot; and i &lt; 2 :\n                    background[i][j] = &quot;0&quot;\n                    background[i+1][j] = &quot;x&quot;\n    # 按a键，循环找到位置，修改相应位置信息\n    elif key == KeyCode.from_char(&#39;a&#39;):\n        for i in 0,1,2:\n            for j in 0,1,2:\n                if background[i][j] == &quot;x&quot; and j &gt; 0 :\n                    background[i][j] = &quot;0&quot;\n                    background[i][j-1] = &quot;x&quot;\n                    break\n    # 按d键，循环找到位置，修改相应位置信息\n    elif key == KeyCode.from_char(&#39;d&#39;):\n        for i in 0,1,2:\n            for j in 0,1,2:\n                if background[i][j] == &quot;x&quot; and j &lt; 2 :\n                    background[i][j] = &quot;0&quot;\n                    background[i][j+1] = &quot;x&quot;\n                    break\n    # 增加按q键,退出程序\n    elif key == KeyCode.from_char(&#39;q&#39;):\n        exit(-1)\n    # 按键处理后，显示新位置\n    show_background()\n     \n# 调用按键处理函数库\nwith Listener(on_press=on_press) as listener:\n    listener.join()","like_count":2},{"had_liked":false,"id":367298,"user_name":"yanyu-xin","can_delete":false,"product_type":"c3","uid":1899757,"ip_address":"广东","ucode":"3AA389F9E4C236","user_header":"","comment_is_top":false,"comment_ctime":1675126235,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100310001,"comment_content":"from pynput.keyboard import Key, Listener, KeyCode\n# 用x , y 变量作为位置参数\n\n# 打印位置，显示位置信息的函数\ndef show_background(x, y) : \n    print(x,y)\n    for  y1 in range(5) :\n        for x1 in range(5) :\n            if (x1 == x and y1 == y) :\n                print(&#39;x&#39;,end=&#39; &#39;)\n            else :\n                print(&#39;0&#39;,end=&#39; &#39;)\n        print()\n    return\n\n# 调整x y的限制范围,控制在限制范围内\ndef limit(x, y) :\n    if x &gt; 4:\n        x = 4\n    if x &lt; 0:\n        x = 0\n    if y &gt; 4:\n        y = 4\n    if y &lt; 0:\n        y = 0\n    return x, y\n\n# 按键动作函数\ndef on_press(key):\n\n    global x_loca, y_loca\n    # 按w键，循环找到位置，修改相应位置信息\n    if key == KeyCode.from_char(&#39;w&#39;):\n        y_loca -= 1 \n    # 按s键，循环找到位置，修改相应位置信息  \n    elif key == KeyCode.from_char(&#39;s&#39;): \n        y_loca += 1\n    # 按a键，循环找到位置，修改相应位置信息\n    elif key == KeyCode.from_char(&#39;a&#39;):\n        x_loca -= 1\n    # 按d键，循环找到位置，修改相应位置信息\n    elif key == KeyCode.from_char(&#39;d&#39;):\n        x_loca += 1\n    # 增加按q键,退出程序\n    elif key == KeyCode.from_char(&#39;q&#39;):\n        exit(-1)\n\n    # 调整x y的限制范围,控制在限制范围内\n    x_loca, y_loca = limit(x_loca, y_loca)\n\n    # 按新坐标显示新位置\n    show_background(x_loca, y_loca)\n\n# 位置列表，全局变量.x,y表示，0，0 为第一行第一列,范围为5 x 5\nx_loca , y_loca = 1 , 1  \n\n# 显示初始位置\nshow_background(x_loca, y_loca)\n     \n# 调用按键处理函数库\nwith Listener(on_press=on_press) as listener:\n    listener.join()","like_count":1},{"had_liked":false,"id":395209,"user_name":"尹长拟","can_delete":false,"product_type":"c3","uid":3074007,"ip_address":"北京","ucode":"1EBD42B5BBD934","user_header":"","comment_is_top":false,"comment_ctime":1729754984,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100310001,"comment_content":"# 飞机大战小游戏按照自己的理解写了一次\n\nfrom pynput.keyboard import Key,Listener,KeyCode\n\nbackground = [[0,0,0],\n              [0,&quot;x&quot;,0],\n              [0,0,0]]\n\ndef show():\n    for y in background:\n        print(y)\n\nshow()\n\ndef on_press(key):\n    global background\n\n    if key == KeyCode.from_char(&#39;w&#39;):\n        \n        for i in range(3):\n            for j in range(3):\n                if background[i][j] == &quot;x&quot; and i &gt; 0 :\n                    background[i][j]=&quot;0&quot;\n                    background[i-1][j]=&quot;x&quot;\n                    break\n\n\n    elif key == KeyCode.from_char(&quot;s&quot;):\n\n        for i in 2,1,0:\n            for j in range(3):\n                if background[i][j]==&quot;x&quot; and i &lt; 2 :\n                    background[i][j]=&quot;0&quot;\n                    background[i+1][j]=&quot;x&quot;\n                    break\n\n\n    elif key == KeyCode.from_char(&quot;a&quot;):\n\n        for i in range(3):\n            for j in range(3):\n                if background[i][j]==&quot;x&quot; and j &gt; 0 :\n                    background[i][j]=&quot;0&quot;\n                    background[i][j-1]=&quot;x&quot;\n                    break\n\n\n    elif key == KeyCode.from_char(&quot;d&quot;):\n        \n        for i in range(3):\n            for j in range(3):\n                if background[i][j]==&quot;x&quot; and j &lt; 2 :\n                    background[i][j]=&quot;0&quot;\n                    background[i][j+1]=&quot;x&quot;\n                    break\n    print()\n    show()\n\nwith Listener(on_press=on_press)as listener:\n    listener.join()","like_count":0},{"had_liked":false,"id":384882,"user_name":"Geek_0c747b","can_delete":false,"product_type":"c3","uid":3790728,"ip_address":"广东","ucode":"7D7251D7B98B08","user_header":"","comment_is_top":false,"comment_ctime":1701744417,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100310001,"comment_content":"def print_background():\n    print()\n    print(background[0])\n    print(background[1])\n    print(background[2])","like_count":0},{"had_liked":false,"id":380484,"user_name":"好困啊","can_delete":false,"product_type":"c3","uid":2094450,"ip_address":"上海","ucode":"D49429660F2DC8","user_header":"https://static001.geekbang.org/account/avatar/00/1f/f5/72/8cbc5cb3.jpg","comment_is_top":false,"comment_ctime":1693667031,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":2,"product_id":100310001,"comment_content":"# 定义输出飞机位置的函数\ndef print_background():\n    for site in background:\n        print(site)\n    print(f&quot;health:{health}&quot;)","like_count":0,"discussions":[{"author":{"id":2383299,"avatar":"https://static001.geekbang.org/account/avatar/00/24/5d/c3/b8bb888c.jpg","nickname":"依托答辩","note":"","ucode":"4BE79E8A030813","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":632401,"discussion_content":"你health哪来的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1700732788,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"上海","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":380408,"user_name":"acondess","can_delete":false,"product_type":"c3","uid":3628115,"ip_address":"浙江","ucode":"D9145C65C73AAC","user_header":"","comment_is_top":false,"comment_ctime":1693496148,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100310001,"comment_content":"from pynput.keyboard import Key,KeyCode,Listener\n\n# 生成地图\nbackground = [\n    [0,  0, 0],\n    [0,&quot;x&quot;, 0],\n    [0,  0, 0]\n            ]\n##定义地图显示函数\ndef show_map():\n    for i in background:\n        print(i)\n\n        \ndef on_press(key):\n    if key == KeyCode.from_char(&#39;w&#39;):\n        for i in 0,1,2:\n            for j in 0,1,2:\n                if background[i][j]==&#39;x&#39; and i&gt;0:\n                    background[i][j] = &#39;0&#39;\n                    background[i-1][j] = &#39;x&#39;\n                    break\n    elif key == KeyCode.from_char(&#39;s&#39;):\n        #注意此处如果i从0，1，2顺序判断时，x字符在第0行，执行了一次移动，此时x在第1行，\n        #再判断时，又会从第1行移动到第2行\n        for i in 2,1,0:\n            for j in 0,1,2:\n                if background[i][j]==&#39;x&#39; and i&lt;2:\n                    background[i][j] = &#39;0&#39;\n                    background[i+1][j] = &#39;x&#39;\n                    break\n    elif key == KeyCode.from_char(&#39;a&#39;):\n        for i in 0,1,2:\n            for j in 0,1,2:\n                if background[i][j]==&#39;x&#39; and j&gt;0:\n                    background[i][j] = &#39;0&#39;\n                    background[i][j-1] = &#39;x&#39;\n                    break\n    elif key == KeyCode.from_char(&#39;d&#39;):\n        for i in 0,1,2:\n            for j in 0,1,2:\n                if background[i][j]==&#39;x&#39; and j&lt;2:\n                    background[i][j] = &#39;0&#39;\n                    background[i][j+1] = &#39;x&#39;\n                    break\n\n    print()\n    #调用地图显示\n    show_map()\n    # for i in background:\n    #     print(i)\n\n# 调用地图显示\nshow_map()\n\nwith Listener(on_press = on_press) as listener:\n    listener.join()","like_count":0},{"had_liked":false,"id":367283,"user_name":"朱雯","can_delete":false,"product_type":"c3","uid":1035744,"ip_address":"北京","ucode":"064C45FBF6B51F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/cd/e0/c85bb948.jpg","comment_is_top":false,"comment_ctime":1675091567,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100310001,"comment_content":"from pynput.keyboard import  Key,Listener,KeyCode\nimport random\nbackground = [[0,0,0],[0,&quot;x&quot;,0],[0,0,0]]\n# for i in background:\n#     print(i)\nhealth = 100\nprint(health)\n\ndef on_press(key):\n    global health\n    if key == KeyCode.from_char(&quot;w&quot;):\n        movehead(background)\n    if key == KeyCode.from_char(&quot;s&quot;):\n        moveback(background)\n    if key == KeyCode.from_char(&quot;a&quot;):\n        moveleft(background)\n    if key == KeyCode.from_char(&quot;d&quot;):\n        moveright(background)\n    if key == KeyCode.from_char(&quot;=&quot;):\n        health = addhealth(health)\n    if key == KeyCode.from_char(&quot;-&quot;):\n        health = subhealth(health)\n    print(health)\ndef moveleft(background):\n   for i in range(0,3):\n        for j in range(0,3):\n            if background[i][j] == &#39;x&#39; and j &gt; 0:\n                background[i][j] = 0\n                background[i][j-1] = &#39;x&#39;\ndef moveright(background):\n     for i in range(0,3):\n            for j in 2,1,0:\n                if background[i][j] == &#39;x&#39; and j &lt; 2:\n                    background[i][j] = 0\n                    background[i][j+1] = &#39;x&#39;\n                    print(i,j)\ndef movehead(background):\n     for i in range(0,3):\n        for j in range(0,3):\n            if background[i][j] == &#39;x&#39; and i &gt; 0:\n                background[i][j] = 0\n                background[i-1][j] = &#39;x&#39;\n                break \ndef moveback(background):\n     for i in 2,1,0:\n        for j in range(0,3):\n            if background[i][j] == &#39;x&#39; and i &lt; 2:\n                background[i][j] = 0\n                background[i+1][j] = &#39;x&#39;\ndef addhealth(health):\n    if health &lt; 100:\n        health += random.randint(0,100)\n        if health &gt; 100:\n            health = 100\n        return health\ndef subhealth(health):\n    if health &gt; 0:\n        health -= random.randint(0,100)\n        if health &lt;= 0:\n            health = 0\n            exit(-1)\n        return health\nwith Listener(on_press=on_press) as listner:\n    listner.join()","like_count":0}]}