{"id":141573,"title":"22 | éé˜»å¡I/Oï¼šæå‡æ€§èƒ½çš„åŠ é€Ÿå™¨","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯ç››å»¶æ•ï¼Œè¿™é‡Œæ˜¯ç½‘ç»œç¼–ç¨‹å®æˆ˜ç¬¬22è®²ï¼Œæ¬¢è¿å›æ¥ã€‚</p><p>åœ¨æ€§èƒ½ç¯‡çš„å‰ä¸¤è®²ä¸­ï¼Œæˆ‘åˆ†åˆ«ä»‹ç»äº†selectå’Œpollä¸¤ç§ä¸åŒçš„I/Oå¤šè·¯å¤ç”¨æŠ€æœ¯ã€‚åœ¨æ¥ä¸‹æ¥çš„è¿™ä¸€è®²ä¸­ï¼Œæˆ‘å°†å¸¦å¤§å®¶è¿›å…¥éé˜»å¡I/Oæ¨¡å¼çš„ä¸–ç•Œã€‚äº‹å®ä¸Šï¼Œéé˜»å¡I/Oé…åˆI/Oå¤šè·¯å¤ç”¨ï¼Œæ˜¯é«˜æ€§èƒ½ç½‘ç»œç¼–ç¨‹ä¸­çš„å¸¸è§æŠ€æœ¯ã€‚</p><h2>é˜»å¡ VS éé˜»å¡</h2><p>å½“åº”ç”¨ç¨‹åºè°ƒç”¨é˜»å¡I/Oå®ŒæˆæŸä¸ªæ“ä½œæ—¶ï¼Œåº”ç”¨ç¨‹åºä¼šè¢«æŒ‚èµ·ï¼Œç­‰å¾…å†…æ ¸å®Œæˆæ“ä½œï¼Œæ„Ÿè§‰ä¸Šåº”ç”¨ç¨‹åºåƒæ˜¯è¢«â€œé˜»å¡â€äº†ä¸€æ ·ã€‚å®é™…ä¸Šï¼Œå†…æ ¸æ‰€åšçš„äº‹æƒ…æ˜¯å°†CPUæ—¶é—´åˆ‡æ¢ç»™å…¶ä»–æœ‰éœ€è¦çš„è¿›ç¨‹ï¼Œç½‘ç»œåº”ç”¨ç¨‹åºåœ¨è¿™ç§æƒ…å†µä¸‹å°±ä¼šå¾—ä¸åˆ°CPUæ—¶é—´åšè¯¥åšçš„äº‹æƒ…ã€‚</p><p>éé˜»å¡I/Oåˆ™ä¸ç„¶ï¼Œå½“åº”ç”¨ç¨‹åºè°ƒç”¨éé˜»å¡I/Oå®ŒæˆæŸä¸ªæ“ä½œæ—¶ï¼Œå†…æ ¸ç«‹å³è¿”å›ï¼Œä¸ä¼šæŠŠCPUæ—¶é—´åˆ‡æ¢ç»™å…¶ä»–è¿›ç¨‹ï¼Œåº”ç”¨ç¨‹åºåœ¨è¿”å›åï¼Œå¯ä»¥å¾—åˆ°è¶³å¤Ÿçš„CPUæ—¶é—´ç»§ç»­å®Œæˆå…¶ä»–äº‹æƒ…ã€‚</p><p>å¦‚æœæ‹¿å»ä¹¦åº—ä¹°ä¹¦ä¸¾ä¾‹å­ï¼Œé˜»å¡I/Oå¯¹åº”ä»€ä¹ˆåœºæ™¯å‘¢ï¼Ÿ ä½ å»äº†ä¹¦åº—ï¼Œå‘Šè¯‰è€æ¿ï¼ˆå†…æ ¸ï¼‰ä½ æƒ³è¦æŸæœ¬ä¹¦ï¼Œç„¶åä½ å°±ä¸€ç›´åœ¨é‚£é‡Œç­‰ç€ï¼Œç›´åˆ°ä¹¦åº—è€æ¿ç¿»ç®±å€’æŸœæ‰¾åˆ°ä½ æƒ³è¦çš„ä¹¦ï¼Œæœ‰å¯èƒ½è¿˜è¦å¸®ä½ è”ç³»å…¨åŸå…¶å®ƒåˆ†åº—ã€‚æ³¨æ„ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­ä½ ä¸€ç›´æ»ç•™åœ¨ä¹¦åº—ç­‰å¾…è€æ¿çš„å›å¤ï¼Œå¥½åƒåœ¨ä¹¦åº—è€æ¿è¿™é‡Œ\"é˜»å¡\"ä½äº†ã€‚</p><p>é‚£ä¹ˆéé˜»å¡I/Oå‘¢ï¼Ÿä½ å»äº†ä¹¦åº—ï¼Œé—®è€æ¿æœ‰æ²¡ä½ å¿ƒä»ªçš„é‚£æœ¬ä¹¦ï¼Œè€æ¿æŸ¥äº†ä¸‹ç”µè„‘ï¼Œå‘Šè¯‰ä½ æ²¡æœ‰ï¼Œä½ å°±æ‚»æ‚»ç¦»å¼€äº†ã€‚ä¸€å‘¨ä»¥åï¼Œä½ åˆæ¥è¿™ä¸ªä¹¦åº—ï¼Œå†é—®è¿™ä¸ªè€æ¿ï¼Œè€æ¿ä¸€æŸ¥ï¼Œæœ‰äº†ï¼Œäºæ˜¯ä½ ä¹°äº†è¿™æœ¬ä¹¦ã€‚æ³¨æ„ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œä½ æ²¡æœ‰è¢«é˜»å¡ï¼Œè€Œæ˜¯åœ¨ä¸æ–­è½®è¯¢ã€‚</p><!-- [[[read_end]]] --><p>ä½†è½®è¯¢çš„æ•ˆç‡å¤ªä½äº†ï¼Œäºæ˜¯ä½ å‘è€æ¿æè®®ï¼šâ€œè€æ¿ï¼Œåˆ°è´§ç»™æˆ‘æ‰“ç”µè¯å§ï¼Œæˆ‘å†æ¥ä»˜é’±å–ä¹¦ã€‚â€è¿™å°±æ˜¯å‰é¢è®²åˆ°çš„I/Oå¤šè·¯å¤ç”¨ã€‚</p><p>å†è¿›ä¸€æ­¥ï¼Œä½ è¿å»ä¹¦åº—å–ä¹¦ä¹Ÿæƒ³çœäº†ï¼Œå¾—äº†ï¼Œè®©è€æ¿ä»£åŠ³å§ï¼Œä½ ç•™ä¸‹åœ°å€ï¼Œä»˜äº†ä¹¦è´¹ï¼Œè®©è€æ¿åˆ°è´§æ—¶å¯„ç»™ä½ ï¼Œä½ ç›´æ¥åœ¨å®¶é‡Œæ‹¿åˆ°å°±å¯ä»¥çœ‹äº†ã€‚è¿™å°±æ˜¯æˆ‘ä»¬å°†ä¼šåœ¨ç¬¬30è®²ä¸­è®²åˆ°çš„å¼‚æ­¥I/Oã€‚</p><p>è¿™å‡ ä¸ªI/Oæ¨¡å‹ï¼Œå†åŠ ä¸Šè¿›ç¨‹ã€çº¿ç¨‹æ¨¡å‹ï¼Œæ„æˆäº†æ•´ä¸ªç½‘ç»œç¼–ç¨‹çš„çŸ¥è¯†æ ¸å¿ƒã€‚</p><p>æŒ‰ç…§ä½¿ç”¨åœºæ™¯ï¼Œéé˜»å¡I/Oå¯ä»¥è¢«ç”¨åˆ°è¯»æ“ä½œã€å†™æ“ä½œã€æ¥æ”¶è¿æ¥æ“ä½œå’Œå‘èµ·è¿æ¥æ“ä½œä¸Šã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¯¹å®ƒä»¬ä¸€ä¸€è§£è¯»ã€‚</p><h2>éé˜»å¡I/O</h2><h3>è¯»æ“ä½œ</h3><p>å¦‚æœå¥—æ¥å­—å¯¹åº”çš„æ¥æ”¶ç¼“å†²åŒºæ²¡æœ‰æ•°æ®å¯è¯»ï¼Œåœ¨éé˜»å¡æƒ…å†µä¸‹readè°ƒç”¨ä¼šç«‹å³è¿”å›ï¼Œä¸€èˆ¬è¿”å›EWOULDBLOCKæˆ–EAGAINå‡ºé”™ä¿¡æ¯ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå‡ºé”™ä¿¡æ¯æ˜¯éœ€è¦å°å¿ƒå¤„ç†ï¼Œæ¯”å¦‚åé¢å†æ¬¡è°ƒç”¨readæ“ä½œï¼Œè€Œä¸æ˜¯ç›´æ¥ä½œä¸ºé”™è¯¯ç›´æ¥è¿”å›ã€‚è¿™å°±å¥½åƒå»ä¹¦åº—ä¹°ä¹¦æ²¡ä¹°åˆ°ç¦»å¼€ä¸€æ ·ï¼Œéœ€è¦ä¸æ–­è¿›è¡Œåˆä¸€æ¬¡è½®è¯¢å¤„ç†ã€‚</p><h3>å†™æ“ä½œ</h3><p>ä¸çŸ¥é“ä½ æœ‰æ²¡æœ‰æ³¨æ„åˆ°ï¼Œåœ¨é˜»å¡I/Oæƒ…å†µä¸‹ï¼Œwriteå‡½æ•°è¿”å›çš„å­—èŠ‚æ•°ï¼Œå’Œè¾“å…¥çš„å‚æ•°æ€»æ˜¯ä¸€æ ·çš„ã€‚å¦‚æœè¿”å›å€¼æ€»æ˜¯å’Œè¾“å…¥çš„æ•°æ®å¤§å°ä¸€æ ·ï¼Œwriteç­‰å†™å…¥å‡½æ•°è¿˜éœ€è¦å®šä¹‰è¿”å›å€¼å—ï¼Ÿæˆ‘ä¸çŸ¥é“ä½ æ˜¯ä¸æ˜¯å’Œæˆ‘ä¸€æ ·ï¼Œåˆšæ¥è§¦åˆ°è¿™ä¸€éƒ¨åˆ†çŸ¥è¯†çš„æ—¶å€™æœ‰è¿™ç§å›°æƒ‘ã€‚</p><p>è¿™é‡Œå°±è¦å¼•å‡ºæˆ‘ä»¬æ‰€è¯´çš„éé˜»å¡I/Oã€‚åœ¨éé˜»å¡I/Oçš„æƒ…å†µä¸‹ï¼Œå¦‚æœå¥—æ¥å­—çš„å‘é€ç¼“å†²åŒºå·²è¾¾åˆ°äº†æé™ï¼Œä¸èƒ½å®¹çº³æ›´å¤šçš„å­—èŠ‚ï¼Œé‚£ä¹ˆæ“ä½œç³»ç»Ÿå†…æ ¸ä¼š<strong>å°½æœ€å¤§å¯èƒ½</strong>ä»åº”ç”¨ç¨‹åºæ‹·è´æ•°æ®åˆ°å‘é€ç¼“å†²åŒºä¸­ï¼Œå¹¶ç«‹å³ä»writeç­‰å‡½æ•°è°ƒç”¨ä¸­è¿”å›ã€‚å¯æƒ³è€ŒçŸ¥ï¼Œåœ¨æ‹·è´åŠ¨ä½œå‘ç”Ÿçš„ç¬é—´ï¼Œæœ‰å¯èƒ½ä¸€ä¸ªå­—ç¬¦ä¹Ÿæ²¡æ‹·è´ï¼Œæœ‰å¯èƒ½æ‰€æœ‰è¯·æ±‚å­—ç¬¦éƒ½è¢«æ‹·è´å®Œæˆï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™å°±éœ€è¦è¿”å›ä¸€ä¸ªæ•°å€¼ï¼Œå‘Šè¯‰åº”ç”¨ç¨‹åºåˆ°åº•æœ‰å¤šå°‘æ•°æ®è¢«æˆåŠŸæ‹·è´åˆ°äº†å‘é€ç¼“å†²åŒºä¸­ï¼Œåº”ç”¨ç¨‹åºéœ€è¦å†æ¬¡è°ƒç”¨writeå‡½æ•°ï¼Œä»¥è¾“å‡ºæœªå®Œæˆæ‹·è´çš„å­—èŠ‚ã€‚</p><p>writeç­‰å‡½æ•°æ˜¯å¯ä»¥åŒæ—¶ä½œç”¨åˆ°é˜»å¡I/Oå’Œéé˜»å¡I/Oä¸Šçš„ï¼Œä¸ºäº†å¤ç”¨ä¸€ä¸ªå‡½æ•°ï¼Œå¤„ç†éé˜»å¡å’Œé˜»å¡I/Oå¤šç§æƒ…å†µï¼Œè®¾è®¡å‡ºäº†å†™å…¥è¿”å›å€¼ï¼Œå¹¶ç”¨è¿™ä¸ªè¿”å›å€¼è¡¨ç¤ºå®é™…å†™å…¥çš„æ•°æ®å¤§å°ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œéé˜»å¡I/Oå’Œé˜»å¡I/Oå¤„ç†çš„æ–¹å¼æ˜¯ä¸ä¸€æ ·çš„ã€‚</p><p>éé˜»å¡I/Oéœ€è¦è¿™æ ·ï¼šæ‹·è´â†’è¿”å›â†’å†æ‹·è´â†’å†è¿”å›ã€‚</p><p>è€Œé˜»å¡I/Oéœ€è¦è¿™æ ·ï¼šæ‹·è´â†’ç›´åˆ°æ‰€æœ‰æ•°æ®æ‹·è´è‡³å‘é€ç¼“å†²åŒºå®Œæˆâ†’è¿”å›ã€‚</p><p>ä¸è¿‡åœ¨å®æˆ˜ä¸­ï¼Œä½ å¯ä»¥ä¸ç”¨åŒºåˆ«é˜»å¡å’Œéé˜»å¡I/Oï¼Œä½¿ç”¨å¾ªç¯çš„æ–¹å¼æ¥å†™å…¥æ•°æ®å°±å¥½äº†ã€‚åªä¸è¿‡åœ¨é˜»å¡I/Oçš„æƒ…å†µä¸‹ï¼Œå¾ªç¯åªæ‰§è¡Œä¸€æ¬¡å°±ç»“æŸäº†ã€‚</p><p>æˆ‘åœ¨å‰é¢çš„ç« èŠ‚ä¸­å·²ç»ä»‹ç»äº†ç±»ä¼¼çš„æ–¹æ¡ˆï¼Œä½ å¯ä»¥çœ‹åˆ°writenå‡½æ•°çš„å®ç°ã€‚</p><pre><code>/* å‘æ–‡ä»¶æè¿°ç¬¦fdå†™å…¥nå­—èŠ‚æ•° */\nssize_t writen(int fd, const void * data, size_t n)\n{\n    size_t      nleft;\n    ssize_t     nwritten;\n    const char  *ptr;\n\n    ptr = data;\n    nleft = n;\n    //å¦‚æœè¿˜æœ‰æ•°æ®æ²¡è¢«æ‹·è´å®Œæˆï¼Œå°±ä¸€ç›´å¾ªç¯\n    while (nleft &gt; 0) {\n        if ( (nwritten = write(fd, ptr, nleft)) &lt;= 0) {\n           /* è¿™é‡ŒEAGAINæ˜¯éé˜»å¡non-blockingæƒ…å†µä¸‹ï¼Œé€šçŸ¥æˆ‘ä»¬å†æ¬¡è°ƒç”¨write() */\n            if (nwritten &lt; 0 &amp;&amp; errno == EAGAIN)\n                nwritten = 0;      \n            else\n                return -1;         /* å‡ºé”™é€€å‡º */\n        }\n\n        /* æŒ‡é’ˆå¢å¤§ï¼Œå‰©ä¸‹å­—èŠ‚æ•°å˜å°*/\n        nleft -= nwritten;\n        ptr   += nwritten;\n    }\n    return n;\n}\n</code></pre><p>ä¸‹é¢æˆ‘é€šè¿‡ä¸€å¼ è¡¨æ¥æ€»ç»“ä¸€ä¸‹readå’Œwriteåœ¨é˜»å¡æ¨¡å¼å’Œéé˜»å¡æ¨¡å¼ä¸‹çš„ä¸åŒè¡Œä¸ºç‰¹æ€§ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/6e/aa/6e7a467bc6f5985eebbd94ef7de14aaa.png?wh=1022*381\" alt=\"\"><br>\nå…³äºreadå’Œwriteè¿˜æœ‰å‡ ä¸ªç»“è®ºï¼Œä½ éœ€è¦æŠŠæ¡ä½ï¼š</p><ol>\n<li>readæ€»æ˜¯åœ¨æ¥æ”¶ç¼“å†²åŒºæœ‰æ•°æ®æ—¶å°±ç«‹å³è¿”å›ï¼Œä¸æ˜¯ç­‰åˆ°åº”ç”¨ç¨‹åºç»™å®šçš„æ•°æ®å……æ»¡æ‰è¿”å›ã€‚å½“æ¥æ”¶ç¼“å†²åŒºä¸ºç©ºæ—¶ï¼Œé˜»å¡æ¨¡å¼ä¼šç­‰å¾…ï¼Œéé˜»å¡æ¨¡å¼ç«‹å³è¿”å›-1ï¼Œå¹¶æœ‰EWOULDBLOCKæˆ–EAGAINé”™è¯¯ã€‚</li>\n<li>å’Œreadä¸åŒï¼Œé˜»å¡æ¨¡å¼ä¸‹ï¼Œwriteåªæœ‰åœ¨å‘é€ç¼“å†²åŒºè¶³ä»¥å®¹çº³åº”ç”¨ç¨‹åºçš„è¾“å‡ºå­—èŠ‚æ—¶æ‰è¿”å›ï¼›è€Œéé˜»å¡æ¨¡å¼ä¸‹ï¼Œåˆ™æ˜¯èƒ½å†™å…¥å¤šå°‘å°±å†™å…¥å¤šå°‘ï¼Œå¹¶è¿”å›å®é™…å†™å…¥çš„å­—èŠ‚æ•°ã€‚</li>\n<li>é˜»å¡æ¨¡å¼ä¸‹çš„writeæœ‰ä¸ªç‰¹ä¾‹, å°±æ˜¯å¯¹æ–¹ä¸»åŠ¨å…³é—­äº†å¥—æ¥å­—ï¼Œè¿™ä¸ªæ—¶å€™writeè°ƒç”¨ä¼šç«‹å³è¿”å›ï¼Œå¹¶é€šè¿‡è¿”å›å€¼å‘Šè¯‰åº”ç”¨ç¨‹åºå®é™…å†™å…¥çš„å­—èŠ‚æ•°ï¼Œå¦‚æœå†æ¬¡å¯¹è¿™æ ·çš„å¥—æ¥å­—è¿›è¡Œwriteæ“ä½œï¼Œå°±ä¼šè¿”å›å¤±è´¥ã€‚å¤±è´¥æ˜¯é€šè¿‡è¿”å›å€¼-1æ¥é€šçŸ¥åˆ°åº”ç”¨ç¨‹åºçš„ã€‚</li>\n</ol><h3>accept</h3><p>å½“acceptå’ŒI/Oå¤šè·¯å¤ç”¨selectã€pollç­‰ä¸€èµ·é…åˆä½¿ç”¨æ—¶ï¼Œå¦‚æœåœ¨ç›‘å¬å¥—æ¥å­—ä¸Šè§¦å‘äº‹ä»¶ï¼Œè¯´æ˜æœ‰è¿æ¥å»ºç«‹å®Œæˆï¼Œæ­¤æ—¶è°ƒç”¨acceptè‚¯å®šå¯ä»¥è¿”å›å·²è¿æ¥å¥—æ¥å­—ã€‚è¿™æ ·çœ‹æ¥ï¼Œä¼¼ä¹æŠŠç›‘å¬å¥—æ¥å­—è®¾ç½®ä¸ºéé˜»å¡ï¼Œæ²¡æœ‰ä»»ä½•å¥½å¤„ã€‚</p><p>ä¸ºäº†è¯´æ˜è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬æ„å»ºä¸€ä¸ªå®¢æˆ·ç«¯ç¨‹åºï¼Œå…¶ä¸­æœ€å…³é”®çš„æ˜¯ï¼Œä¸€æ—¦è¿æ¥å»ºç«‹ï¼Œè®¾ç½®SO_LINGERå¥—æ¥å­—é€‰é¡¹ï¼ŒæŠŠl_onoffæ ‡å¿—è®¾ç½®ä¸º1ï¼ŒæŠŠl_lingeræ—¶é—´è®¾ç½®ä¸º0ã€‚è¿™æ ·ï¼Œè¿æ¥è¢«å…³é—­æ—¶ï¼ŒTCPå¥—æ¥å­—ä¸Šå°†ä¼šå‘é€ä¸€ä¸ªRSTã€‚</p><pre><code>struct linger ling;\nling.l_onoff = 1; \nling.l_linger = 0;\nsetsockopt(socket_fd, SOL_SOCKET, SO_LINGER, &amp;ling, sizeof(ling));\nclose(socket_fd);\n</code></pre><p>æœåŠ¡å™¨ç«¯ä½¿ç”¨select I/Oå¤šè·¯å¤ç”¨ï¼Œä¸è¿‡ï¼Œç›‘å¬å¥—æ¥å­—ä»ç„¶æ˜¯blockingçš„ã€‚å¦‚æœç›‘å¬å¥—æ¥å­—ä¸Šæœ‰äº‹ä»¶å‘ç”Ÿï¼Œä¼‘çœ 5ç§’ï¼Œä»¥ä¾¿æ¨¡æ‹Ÿé«˜å¹¶å‘åœºæ™¯ä¸‹çš„æƒ…å½¢ã€‚</p><pre><code>if (FD_ISSET(listen_fd, &amp;readset)) {\n    printf(&quot;listening socket readable\\n&quot;);\n    sleep(5);\n    struct sockaddr_storage ss;\n    socklen_t slen = sizeof(ss);\n    int fd = accept(listen_fd, (struct sockaddr *) &amp;ss, &amp;slen);\n</code></pre><p>è¿™é‡Œçš„ä¼‘çœ æ—¶é—´éå¸¸å…³é”®ï¼Œè¿™æ ·ï¼Œåœ¨ç›‘å¬å¥—æ¥å­—ä¸Šæœ‰å¯è¯»äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œå¹¶æ²¡æœ‰é©¬ä¸Šè°ƒç”¨acceptã€‚ç”±äºå®¢æˆ·ç«¯å‘ç”Ÿäº†RSTåˆ†èŠ‚ï¼Œè¯¥è¿æ¥è¢«æ¥æ”¶ç«¯å†…æ ¸ä»è‡ªå·±çš„å·²å®Œæˆé˜Ÿåˆ—ä¸­åˆ é™¤äº†ï¼Œæ­¤æ—¶å†è°ƒç”¨acceptï¼Œç”±äºæ²¡æœ‰å·²å®Œæˆè¿æ¥ï¼ˆå‡è®¾æ²¡æœ‰å…¶ä»–å·²å®Œæˆè¿æ¥ï¼‰ï¼Œacceptä¸€ç›´é˜»å¡ï¼Œæ›´ä¸ºä¸¥é‡çš„æ˜¯ï¼Œè¯¥çº¿ç¨‹å†ä¹Ÿæ²¡æœ‰æœºä¼šå¯¹å…¶ä»–I/Oäº‹ä»¶è¿›è¡Œåˆ†å‘ï¼Œç›¸å½“äºè¯¥æœåŠ¡å™¨æ— æ³•å¯¹å…¶ä»–I/Oè¿›è¡ŒæœåŠ¡ã€‚</p><p>å¦‚æœæˆ‘ä»¬å°†ç›‘å¬å¥—æ¥å­—è®¾ä¸ºéé˜»å¡ï¼Œä¸Šè¿°çš„æƒ…å½¢å°±ä¸ä¼šå†å‘ç”Ÿã€‚åªä¸è¿‡å¯¹äºacceptçš„è¿”å›å€¼ï¼Œéœ€è¦æ­£ç¡®åœ°å¤„ç†å„ç§çœ‹ä¼¼å¼‚å¸¸çš„é”™è¯¯ï¼Œä¾‹å¦‚å¿½ç•¥EWOULDBLOCKã€EAGAINç­‰ã€‚</p><p>è¿™ä¸ªä¾‹å­ç»™æˆ‘ä»¬çš„å¯å‘æ˜¯ï¼Œä¸€å®šè¦å°†ç›‘å¬å¥—æ¥å­—è®¾ç½®ä¸ºéé˜»å¡çš„ï¼Œå°½ç®¡è¿™é‡Œä¼‘çœ æ—¶é—´5ç§’æœ‰ç‚¹å¤¸å¼ ï¼Œä½†æ˜¯åœ¨æç«¯æƒ…å†µä¸‹å¤„ç†ä¸å½“çš„æœåŠ¡å™¨ç¨‹åºæ˜¯æœ‰å¯èƒ½ç¢°åˆ°ä¾‹å­æ‰€é˜è¿°çš„æƒ…å†µï¼Œä¸ºäº†è®©æœåŠ¡å™¨ç¨‹åºåœ¨æç«¯æƒ…å†µä¸‹å·¥ä½œæ­£å¸¸ï¼Œè¿™ç‚¹å·¥ä½œè¿˜æ˜¯éå¸¸å€¼å¾—çš„ã€‚</p><h3>connect</h3><p>åœ¨éé˜»å¡TCPå¥—æ¥å­—ä¸Šè°ƒç”¨connectå‡½æ•°ï¼Œä¼šç«‹å³è¿”å›ä¸€ä¸ªEINPROGRESSé”™è¯¯ã€‚TCPä¸‰æ¬¡æ¡æ‰‹ä¼šæ­£å¸¸è¿›è¡Œï¼Œåº”ç”¨ç¨‹åºå¯ä»¥ç»§ç»­åšå…¶ä»–åˆå§‹åŒ–çš„äº‹æƒ…ã€‚å½“è¯¥è¿æ¥å»ºç«‹æˆåŠŸæˆ–è€…å¤±è´¥æ—¶ï¼Œé€šè¿‡I/Oå¤šè·¯å¤ç”¨selectã€pollç­‰å¯ä»¥è¿›è¡Œè¿æ¥çš„çŠ¶æ€æ£€æµ‹ã€‚</p><h2>éé˜»å¡I/O + selectå¤šè·¯å¤ç”¨</h2><p>æˆ‘åœ¨è¿™é‡Œç»™å‡ºäº†ä¸€ä¸ªéé˜»å¡I/Oæ­é…selectå¤šè·¯å¤ç”¨çš„ä¾‹å­ã€‚</p><pre><code>#define MAX_LINE 1024\n#define FD_INIT_SIZE 128\n\nchar rot13_char(char c) {\n    if ((c &gt;= 'a' &amp;&amp; c &lt;= 'm') || (c &gt;= 'A' &amp;&amp; c &lt;= 'M'))\n        return c + 13;\n    else if ((c &gt;= 'n' &amp;&amp; c &lt;= 'z') || (c &gt;= 'N' &amp;&amp; c &lt;= 'Z'))\n        return c - 13;\n    else\n        return c;\n}\n\n//æ•°æ®ç¼“å†²åŒº\nstruct Buffer {\n    int connect_fd;  //è¿æ¥å­—\n    char buffer[MAX_LINE];  //å®é™…ç¼“å†²\n    size_t writeIndex;      //ç¼“å†²å†™å…¥ä½ç½®\n    size_t readIndex;       //ç¼“å†²è¯»å–ä½ç½®\n    int readable;           //æ˜¯å¦å¯ä»¥è¯»\n};\n\nstruct Buffer *alloc_Buffer() {\n    struct Buffer *buffer = malloc(sizeof(struct Buffer));\n    if (!buffer)\n        return NULL;\n    buffer-&gt;connect_fd = 0;\n    buffer-&gt;writeIndex = buffer-&gt;readIndex = buffer-&gt;readable = 0;\n    return buffer;\n}\n\nvoid free_Buffer(struct Buffer *buffer) {\n    free(buffer);\n}\n\nint onSocketRead(int fd, struct Buffer *buffer) {\n    char buf[1024];\n    int i;\n    ssize_t result;\n    while (1) {\n        result = recv(fd, buf, sizeof(buf), 0);\n        if (result &lt;= 0)\n            break;\n\n        for (i = 0; i &lt; result; ++i) {\n            if (buffer-&gt;writeIndex &lt; sizeof(buffer-&gt;buffer))\n                buffer-&gt;buffer[buffer-&gt;writeIndex++] = rot13_char(buf[i]);\n            if (buf[i] == '\\n') {\n                buffer-&gt;readable = 1;  //ç¼“å†²åŒºå¯ä»¥è¯»\n            }\n        }\n    }\n\n    if (result == 0) {\n        return 1;\n    } else if (result &lt; 0) {\n        if (errno == EAGAIN)\n            return 0;\n        return -1;\n    }\n\n    return 0;\n}\n\nint onSocketWrite(int fd, struct Buffer *buffer) {\n    while (buffer-&gt;readIndex &lt; buffer-&gt;writeIndex) {\n        ssize_t result = send(fd, buffer-&gt;buffer + buffer-&gt;readIndex, buffer-&gt;writeIndex - buffer-&gt;readIndex, 0);\n        if (result &lt; 0) {\n            if (errno == EAGAIN)\n                return 0;\n            return -1;\n        }\n\n        buffer-&gt;readIndex += result;\n    }\n\n    if (buffer-&gt;readIndex == buffer-&gt;writeIndex)\n        buffer-&gt;readIndex = buffer-&gt;writeIndex = 0;\n\n    buffer-&gt;readable = 0;\n\n    return 0;\n}\n\nint main(int argc, char **argv) {\n    int listen_fd;\n    int i, maxfd;\n\n    struct Buffer *buffer[FD_INIT_SIZE];\n    for (i = 0; i &lt; FD_INIT_SIZE; ++i) {\n        buffer[i] = alloc_Buffer();\n    }\n\n    listen_fd = tcp_nonblocking_server_listen(SERV_PORT);\n\n    fd_set readset, writeset, exset;\n    FD_ZERO(&amp;readset);\n    FD_ZERO(&amp;writeset);\n    FD_ZERO(&amp;exset);\n\n    while (1) {\n        maxfd = listen_fd;\n\n        FD_ZERO(&amp;readset);\n        FD_ZERO(&amp;writeset);\n        FD_ZERO(&amp;exset);\n\n        // listeneråŠ å…¥readset\n        FD_SET(listen_fd, &amp;readset);\n\n        for (i = 0; i &lt; FD_INIT_SIZE; ++i) {\n            if (buffer[i]-&gt;connect_fd &gt; 0) {\n                if (buffer[i]-&gt;connect_fd &gt; maxfd)\n                    maxfd = buffer[i]-&gt;connect_fd;\n                FD_SET(buffer[i]-&gt;connect_fd, &amp;readset);\n                if (buffer[i]-&gt;readable) {\n                    FD_SET(buffer[i]-&gt;connect_fd, &amp;writeset);\n                }\n            }\n        }\n\n        if (select(maxfd + 1, &amp;readset, &amp;writeset, &amp;exset, NULL) &lt; 0) {\n            error(1, errno, &quot;select error&quot;);\n        }\n\n        if (FD_ISSET(listen_fd, &amp;readset)) {\n            printf(&quot;listening socket readable\\n&quot;);\n            sleep(5);\n            struct sockaddr_storage ss;\n            socklen_t slen = sizeof(ss);\n           int fd = accept(listen_fd, (struct sockaddr *) &amp;ss, &amp;slen);\n            if (fd &lt; 0) {\n                error(1, errno, &quot;accept failed&quot;);\n            } else if (fd &gt; FD_INIT_SIZE) {\n                error(1, 0, &quot;too many connections&quot;);\n                close(fd);\n            } else {\n                make_nonblocking(fd);\n                if (buffer[fd]-&gt;connect_fd == 0) {\n                    buffer[fd]-&gt;connect_fd = fd;\n                } else {\n                    error(1, 0, &quot;too many connections&quot;);\n                }\n            }\n        }\n\n        for (i = 0; i &lt; maxfd + 1; ++i) {\n            int r = 0;\n            if (i == listen_fd)\n                continue;\n\n            if (FD_ISSET(i, &amp;readset)) {\n                r = onSocketRead(i, buffer[i]);\n            }\n            if (r == 0 &amp;&amp; FD_ISSET(i, &amp;writeset)) {\n                r = onSocketWrite(i, buffer[i]);\n            }\n            if (r) {\n                buffer[i]-&gt;connect_fd = 0;\n                close(i);\n            }\n        }\n    }\n}\n</code></pre><p>ç¬¬93è¡Œï¼Œè°ƒç”¨fcntlå°†ç›‘å¬å¥—æ¥å­—è®¾ç½®ä¸ºéé˜»å¡ã€‚</p><pre><code>fcntl(fd, F_SETFL, O_NONBLOCK);\n</code></pre><p>ç¬¬121è¡Œè°ƒç”¨selectè¿›è¡ŒI/Oäº‹ä»¶åˆ†å‘å¤„ç†ã€‚</p><p>131-142è¡Œåœ¨å¤„ç†æ–°çš„è¿æ¥å¥—æ¥å­—ï¼Œæ³¨æ„è¿™é‡Œä¹ŸæŠŠè¿æ¥å¥—æ¥å­—è®¾ç½®ä¸ºéé˜»å¡çš„ã€‚</p><p>151-156è¡Œåœ¨å¤„ç†è¿æ¥å¥—æ¥å­—ä¸Šçš„I/Oè¯»å†™äº‹ä»¶ï¼Œè¿™é‡Œæˆ‘ä»¬æŠ½è±¡äº†ä¸€ä¸ªBufferå¯¹è±¡ï¼ŒBufferå¯¹è±¡ä½¿ç”¨äº†readIndexå’ŒwriteIndexåˆ†åˆ«è¡¨ç¤ºå½“å‰ç¼“å†²çš„è¯»å†™ä½ç½®ã€‚</p><h2>å®éªŒ</h2><p>å¯åŠ¨è¯¥æœåŠ¡å™¨ï¼š</p><pre><code>$./nonblockingserver\n</code></pre><p>ä½¿ç”¨å¤šä¸ªtelnetå®¢æˆ·ç«¯è¿æ¥è¯¥æœåŠ¡å™¨ï¼Œå¯ä»¥éªŒè¯äº¤äº’æ­£å¸¸ã€‚</p><pre><code>$telnet 127.0.0.1 43211\nTrying 127.0.0.1...\nConnected to localhost.\nEscape character is '^]'.\nfasfasfasf\nsnfsnfsnfs\n</code></pre><h2>æ€»ç»“</h2><p>éé˜»å¡I/Oå¯ä»¥ä½¿ç”¨åœ¨readã€writeã€acceptã€connectç­‰å¤šç§ä¸åŒçš„åœºæ™¯ï¼Œåœ¨éé˜»å¡I/Oä¸‹ï¼Œä½¿ç”¨è½®è¯¢çš„æ–¹å¼å¼•èµ·CPUå ç”¨ç‡é«˜ï¼Œæ‰€ä»¥ä¸€èˆ¬å°†éé˜»å¡I/Oå’ŒI/Oå¤šè·¯å¤ç”¨æŠ€æœ¯selectã€pollç­‰æ­é…ä½¿ç”¨ï¼Œåœ¨éé˜»å¡I/Oäº‹ä»¶å‘ç”Ÿæ—¶ï¼Œå†è°ƒç”¨å¯¹åº”äº‹ä»¶çš„å¤„ç†å‡½æ•°ã€‚è¿™ç§æ–¹å¼ï¼Œæå¤§åœ°æé«˜äº†ç¨‹åºçš„å¥å£®æ€§å’Œç¨³å®šæ€§ï¼Œæ˜¯Linuxä¸‹é«˜æ€§èƒ½ç½‘ç»œç¼–ç¨‹çš„é¦–é€‰ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>ç»™ä½ å¸ƒç½®ä¸¤é“æ€è€ƒé¢˜:</p><p>ç¬¬ä¸€é“ï¼Œç¨‹åºä¸­ç¬¬133è¡Œè¿™ä¸ªåˆ¤æ–­è¯´æ˜äº†ä»€ä¹ˆï¼Ÿå¦‚æœè¦æ”¹è¿›çš„è¯ï¼Œä½ æœ‰ä»€ä¹ˆæƒ³æ³•ï¼Ÿ</p><pre><code>else if (fd &gt; FD_INIT_SIZE) {\n    error(1, 0, &quot;too many connections&quot;);\n    close(fd);\n</code></pre><p>ç¬¬äºŒé“ï¼Œä½ å¯ä»¥ä»”ç»†é˜…è¯»ä¸€ä¸‹æ•°æ®è¯»å†™éƒ¨åˆ†Bufferçš„ä»£ç ï¼Œä½ è§‰å¾—ç”¨ä¸€ä¸ªBufferå¯¹è±¡ï¼Œè€Œä¸æ˜¯ä¸¤ä¸ªçš„ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿ</p><p>æ¬¢è¿åœ¨è¯„è®ºåŒºå†™ä¸‹ä½ çš„æ€è€ƒï¼Œæˆ‘ä¼šå’Œä½ ä¸€èµ·äº¤æµï¼Œä¹Ÿæ¬¢è¿æŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«ç»™ä½ çš„æœ‹å‹æˆ–è€…åŒäº‹ï¼Œä¸€èµ·äº¤æµä¸€ä¸‹ã€‚</p>","neighbors":{"left":{"article_title":"21 | pollï¼šå¦ä¸€ç§I/Oå¤šè·¯å¤ç”¨","id":140520},"right":{"article_title":"23 | Linuxåˆ©å™¨ï¼šepollçš„å‰ä¸–ä»Šç”Ÿ","id":143245}},"comments":[{"had_liked":false,"id":171554,"user_name":"HerofH","can_delete":false,"product_type":"c1","uid":1480252,"ip_address":"","ucode":"84EB3243FAB432","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/86QEF74Mhc6ECbBBMr62hVz0ezOicI2Kbv8QBA7qR7KepeoDib9W6KLxxMPuQ24JGusvjC03NNr8uj8GyK0DxKiaw/132","comment_is_top":false,"comment_ctime":1578966150,"is_pvip":false,"replies":[{"id":"68052","content":"è¯»ç¼“å†²çš„ä½œç”¨æœ‰å¾ˆå¤šï¼Œä½ æåˆ°äº†é€šè¿‡è®¾ç½®ç¼“å†²åŒºï¼Œå‡å°‘ç³»ç»Ÿè°ƒç”¨çš„æ¬¡æ•°æ˜¯ä¸€ä¸ªæ–¹é¢ï¼Œå¦å¤–ï¼Œåˆ«å¿˜äº†è¯»å–çš„æ•°æ®æ˜¯éœ€è¦åœ¨åº”ç”¨å±‚è¿›è¡ŒæŠ¥æ–‡è§£æçš„ï¼Œä¸€ä¸ªåº”ç”¨å±‚ç¼“å†²åŒºæ˜¾ç„¶æ˜¯æ¯”è¾ƒæ–¹ä¾¿çš„ï¼Œå¦åˆ™ï¼Œéœ€è¦ä¸æ–­çš„è¿›è¡Œæ•°æ®çš„è¯»å–ï¼Œç›´è‡³è§£æåˆ°å®Œæ•´çš„æŠ¥æ–‡ã€‚æˆ‘è®¤ä¸ºï¼Œåº”ç”¨å±‚ç¼“å†²æ˜¯&quot;ç©ºé—´æ¢æ—¶é—´&quot;çš„ä¸€ä¸ªæ¯”è¾ƒå¥½çš„ä¾‹å­ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1580627688,"ip_address":"","comment_id":171554,"utype":1}],"discussion_count":1,"race_medal":0,"score":"134722952326","product_id":100032701,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼æˆ‘çœ‹åˆ°æ‚¨è¿™åœ¨åº”ç”¨å±‚è®¾è®¡äº†ä¸€ä¸ªè¯»å†™ç¼“å†²åŒºï¼Œæˆ‘ä¹‹å‰çœ‹äº†muduoå’Œlibeventï¼Œä¹Ÿæ˜¯è®¾è®¡äº†è¿™æ ·çš„ç¼“å†²åŒºï¼Œå¹¶ä¸”muduoä½œè€…é™ˆç¡•ä¹Ÿæåˆ°éé˜»å¡IOå¿…é¡»è¦è®¾è®¡ä¸€ä¸ªåº”ç”¨å±‚Bufferï¼Œæˆ‘å¾ˆç–‘æƒ‘çš„å°±æ˜¯ï¼Œè¿™æ ·çš„è¯»å†™ç¼“å†²åŒºçš„å¿…è¦æ€§æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ<br>æˆ‘å¤§æ¦‚åªèƒ½ç†è§£åˆ°éé˜»å¡IOä¸‹ä½¿ç”¨åº”ç”¨å±‚å†™ç¼“å†²åŒºå¯ä»¥è®©è¿˜æœªæ¥å¾—åŠå‘å‡ºçš„æ•°æ®å…ˆä¿å­˜åœ¨åº”ç”¨å±‚Bufferä¸­ï¼Œç„¶åç­‰åˆ°å¯å†™çš„æ—¶å€™å†å°†æ•°æ®ä»åº”ç”¨å±‚Bufferå†™åˆ°fdçš„å‘é€ç¼“å†²åŒºä¸­ï¼›<br>é‚£ä¹ˆå¦‚ä½•ç†è§£åº”ç”¨å±‚è¯»ç¼“å†²åŒºçš„å¿…è¦æ€§å‘¢ï¼Ÿæœ‰æ•°æ®æ¥ï¼Œè§¦å‘å¯è¯»äº‹ä»¶ï¼Œè¿™ä¸ªæ—¶å€™ç›´æ¥è°ƒç”¨readå»è¯»ä¸å°±å¯ä»¥äº†å—ï¼Œä¸ºä»€ä¹ˆä¸€å®šè¦å…ˆè¯»åˆ°è¯»ç¼“å†²åŒºå‘¢ï¼Ÿæ ¹æ®libeventä¸­ï¼Œæ¯æ¬¡è¯»æ•°æ®æ—¶éƒ½ä¼šå°½é‡å¤šçš„ä»fdçš„æ¥æ”¶ç¼“å†²åŒºä¸­è¯»å–æ•°æ®åˆ°åº”ç”¨å±‚bufferï¼Œæˆ‘çš„ä¸€ç§æƒ³æ³•æ˜¯ï¼Œè®¾ç½®è¯»ç¼“å†²åŒºçš„ä½œç”¨ï¼Œæ˜¯å¦æ˜¯ä¸ºäº†å‡å°‘readçš„è°ƒç”¨æ¬¡æ•°å‘¢ï¼Ÿ<br>è¿˜æ˜¯æœ‰å…¶å®ƒåŸå› å‘¢ï¼Ÿæƒ³äº†è§£ä¸€ä¸‹è€å¸ˆçš„çœ‹æ³•ï¼Œè°¢è°¢ï¼<br>","like_count":31,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481411,"discussion_content":"è¯»ç¼“å†²çš„ä½œç”¨æœ‰å¾ˆå¤šï¼Œä½ æåˆ°äº†é€šè¿‡è®¾ç½®ç¼“å†²åŒºï¼Œå‡å°‘ç³»ç»Ÿè°ƒç”¨çš„æ¬¡æ•°æ˜¯ä¸€ä¸ªæ–¹é¢ï¼Œå¦å¤–ï¼Œåˆ«å¿˜äº†è¯»å–çš„æ•°æ®æ˜¯éœ€è¦åœ¨åº”ç”¨å±‚è¿›è¡ŒæŠ¥æ–‡è§£æçš„ï¼Œä¸€ä¸ªåº”ç”¨å±‚ç¼“å†²åŒºæ˜¾ç„¶æ˜¯æ¯”è¾ƒæ–¹ä¾¿çš„ï¼Œå¦åˆ™ï¼Œéœ€è¦ä¸æ–­çš„è¿›è¡Œæ•°æ®çš„è¯»å–ï¼Œç›´è‡³è§£æåˆ°å®Œæ•´çš„æŠ¥æ–‡ã€‚æˆ‘è®¤ä¸ºï¼Œåº”ç”¨å±‚ç¼“å†²æ˜¯&amp;quot;ç©ºé—´æ¢æ—¶é—´&amp;quot;çš„ä¸€ä¸ªæ¯”è¾ƒå¥½çš„ä¾‹å­ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580627688,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":259668,"user_name":"TinyCalf","can_delete":false,"product_type":"c1","uid":2137418,"ip_address":"","ucode":"0A3EF213359388","user_header":"https://static001.geekbang.org/account/avatar/00/20/9d/4a/09a5041e.jpg","comment_is_top":false,"comment_ctime":1604806236,"is_pvip":false,"replies":[{"id":"95514","content":"æˆ‘è§‰å¾—æ˜¯å¯ä»¥è¿™æ ·ç†è§£çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1606042277,"ip_address":"","comment_id":259668,"utype":1}],"discussion_count":2,"race_medal":0,"score":"57439381084","product_id":100032701,"comment_content":"æˆ‘åœ¨æ€è€ƒä¸€ä¸ªé—®é¢˜ï¼Œselectæ—¢ç„¶å·²ç»å‘Šè¯‰æˆ‘ä»¬æ¥å£å¯è¯»äº†ï¼Œä¸ºä»€ä¹ˆè¿˜è¦ç”¨éé˜»å¡IOï¼›æˆ‘è‡ªå·±çš„æƒ³æ³•æ˜¯ï¼Œselectå…¶å®åªé€šçŸ¥äº†æœ‰æ²¡æœ‰å†…å®¹å¯è¯»ï¼Œæ²¡æœ‰æä¾›æœ‰å¤šå°‘æ•°æ®å¯è¯»ï¼Œæ‰€ä»¥å½“æˆ‘ä»¬ä½¿ç”¨é˜»å¡IOå¾ªç¯readæ—¶ï¼Œæ— æ³•ç¡®è®¤ä¸‹ä¸€ä¸ªreadè¿˜æ˜¯ä¸æ˜¯å¯è¯»çš„ï¼Œå› æ­¤ä»ç„¶å¯èƒ½é˜»å¡ï¼Œè€Œéé˜»å¡IOå¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä¸çŸ¥é“æˆ‘æƒ³çš„å¯¹ä¸å¯¹","like_count":13,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":508997,"discussion_content":"æˆ‘è§‰å¾—æ˜¯å¯ä»¥è¿™æ ·ç†è§£çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606042277,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2765079,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/31/17/ab2c27a6.jpg","nickname":"èœé¸¡äº’å•„","note":"","ucode":"59162B81398399","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":539069,"discussion_content":"è€å¸ˆ ä¸ºä»€ä¹ˆä¸æ˜¯å‘Šè¯‰æˆ‘ä»¬å“ªä¸ªæ¥å£å¯è¯»äº† é¡ºä¾¿æŠŠå¤šå°‘æ•°æ®å¯è¯»ä¸€å¹¶å®Œæˆå‘¢ï¼Ÿæ˜¯æ“ä½œå°±æ˜¯è¿™æ ·è®¾è®¡çš„å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639584631,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":508997,"ip_address":""},"score":539069,"extra":""}]}]},{"had_liked":false,"id":137084,"user_name":"MoonGod","can_delete":false,"product_type":"c1","uid":1254337,"ip_address":"","ucode":"CB39976963F37A","user_header":"https://static001.geekbang.org/account/avatar/00/13/23/c1/54ef6885.jpg","comment_is_top":false,"comment_ctime":1569593504,"is_pvip":false,"replies":[{"id":"52780","content":"æˆ‘åœ¨ä»£ç é‡Œå¤šåŠ ä¸€äº›æ³¨é‡Šï¼Œå¯ä»¥çœ‹æœ€æ–°çš„ä»£ç <br><br>https:&#47;&#47;github.com&#47;froghui&#47;yolanda","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1569723893,"ip_address":"","comment_id":137084,"utype":1}],"discussion_count":3,"race_medal":0,"score":"53109201056","product_id":100032701,"comment_content":"æ„Ÿè§‰è¿™ç¯‡çš„è§£é‡Šå’Œå‰é¢çš„æ¯”èµ·æ¥å¤ªä¸ç»†è‡´äº†â€¦å¾ˆå¤šåœ°æ–¹éƒ½æ²¡è¯´æ˜ã€‚è€å¸ˆèƒ½ä¸èƒ½å¤šä¸€äº›è¯´æ˜å•Š","like_count":12,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468934,"discussion_content":"æˆ‘åœ¨ä»£ç é‡Œå¤šåŠ ä¸€äº›æ³¨é‡Šï¼Œå¯ä»¥çœ‹æœ€æ–°çš„ä»£ç \n\nhttps://github.com/froghui/yolanda","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569723893,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2153838,"avatar":"https://static001.geekbang.org/account/avatar/00/20/dd/6e/8f6f79d2.jpg","nickname":"YUAN","note":"","ucode":"98EF68EEE21893","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":316070,"discussion_content":"ä¸åº”è¯¥æ˜¯å¤§äºç­‰äºå°±åˆ¤æ–­è¿æ¥å¤ªå¤šå—ï¼Ÿbufferæœ€å¤§ä¸‹æ ‡æ˜¯fd_init_size-1","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1603354667,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2153838,"avatar":"https://static001.geekbang.org/account/avatar/00/20/dd/6e/8f6f79d2.jpg","nickname":"YUAN","note":"","ucode":"98EF68EEE21893","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":316089,"discussion_content":"è€å¸ˆæ‚¨å¥½ï¼Œæˆ‘è®¤ä¸º\n1.é‚£ä¸ªbufferç¼“å†²åŒºå¯ä»¥åšæˆå¾ªç¯çš„æ•°ç»„\n2.æˆ‘è®¤ä¸ºonSocketReadé‚£ä¸ªå‡½æ•°ä¼šé€ æˆæ•°æ®ä¸¢å¤±å§ï¼Œå¦‚æœrecvçš„æ•°æ®è¶…è¿‡äº†bufferçš„å¯ç”¨å†…å­˜ï¼Œå°±ä¼šé€ æˆå®¢æˆ·çš„æ•°æ®ä¸¢å¤±å§ï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1603357311,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":241390,"user_name":"fedwing","can_delete":false,"product_type":"c1","uid":1743661,"ip_address":"","ucode":"2DFF902FD190C7","user_header":"https://static001.geekbang.org/account/avatar/00/1a/9b/2d/f7fca208.jpg","comment_is_top":false,"comment_ctime":1597283654,"is_pvip":false,"replies":[{"id":"89400","content":"selectå’Œpollæ˜¯&quot;è€æ¿&quot;è¿™ä¸ªå†…æ ¸è‡ªå·±åœ¨è½®è¯¢å“¦ï¼Œä¸æ˜¯ä¹°ä¹¦äºº(åº”ç”¨ç¨‹åº)åœ¨è½®è¯¢ï¼Œ&quot;è€æ¿&quot;å¯ä»¥æœ‰å¤šä¸ªæ–¹å¼ä¼˜åŒ–è¿™ä¸ªè¿‡ç¨‹ï¼Œæ¯”å¦‚ä»–è®°å½•äº†ä¸€ä¸ªäº‹ä»¶ï¼Œä¸€æ—¦ä¹¦å®šæˆäº†ï¼Œä»–å°±å‘ç°éœ€è¦å‘Šè¯‰å’Œä»–æœ‰è®¢é˜…å…³ç³»çš„&quot;ä½ &quot;äº†ã€‚æƒ³æƒ³çœ‹ï¼Œä½œä¸ºåº”ç”¨ç¨‹åºçš„&quot;ä½ &quot;åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæ˜¯ä¸æ˜¯å¯ä»¥æ”¾å¼€æ‰‹å¹²ç‚¹åˆ«çš„äº‹ï¼Œæ¯”å¦‚ç©ä¸ªåƒé¸¡æ¸¸æˆçš„ä»€ä¹ˆã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1597641080,"ip_address":"","comment_id":241390,"utype":1}],"discussion_count":3,"race_medal":0,"score":"40251989318","product_id":100032701,"comment_content":"é‚£ä¹ˆéé˜»å¡ I&#47;O å‘¢ï¼Ÿä½ å»äº†ä¹¦åº—ï¼Œé—®è€æ¿æœ‰æ²¡ä½ å¿ƒä»ªçš„é‚£æœ¬ä¹¦ï¼Œè€æ¿æŸ¥äº†ä¸‹ç”µè„‘ï¼Œå‘Šè¯‰ä½ æ²¡æœ‰ï¼Œä½ å°±æ‚»æ‚»ç¦»å¼€äº†ã€‚ä¸€å‘¨ä»¥åï¼Œä½ åˆæ¥è¿™ä¸ªä¹¦åº—ï¼Œå†é—®è¿™ä¸ªè€æ¿ï¼Œè€æ¿ä¸€æŸ¥ï¼Œæœ‰äº†ï¼Œäºæ˜¯ä½ ä¹°äº†è¿™æœ¬ä¹¦ã€‚æ³¨æ„ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œä½ æ²¡æœ‰è¢«é˜»å¡ï¼Œè€Œæ˜¯åœ¨ä¸æ–­è½®è¯¢ã€‚ä½†è½®è¯¢çš„æ•ˆç‡å¤ªä½äº†ï¼Œäºæ˜¯ä½ å‘è€æ¿æè®®ï¼šâ€œè€æ¿ï¼Œåˆ°è´§ç»™æˆ‘æ‰“ç”µè¯å§ï¼Œæˆ‘å†æ¥ä»˜é’±å–ä¹¦ã€‚â€è¿™å°±æ˜¯å‰é¢è®²åˆ°çš„ I&#47;O å¤šè·¯å¤ç”¨ã€‚ <br>    å¯¹äºè¿™ä¸ªæˆ‘æœ‰ç‚¹ç–‘é—®ï¼Œselectå’Œpollæœ¬è´¨ä¸Šï¼Œä¸éƒ½æ˜¯è½®è¯¢å—ï¼Œä¸ºä»€ä¹ˆè¿™é‡Œè¯´è½®è¯¢æ•ˆç‡å¤ªä½ï¼Œæ”¹æˆselectï¼Œpoll","like_count":9,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":503732,"discussion_content":"selectå’Œpollæ˜¯&amp;quot;è€æ¿&amp;quot;è¿™ä¸ªå†…æ ¸è‡ªå·±åœ¨è½®è¯¢å“¦ï¼Œä¸æ˜¯ä¹°ä¹¦äºº(åº”ç”¨ç¨‹åº)åœ¨è½®è¯¢ï¼Œ&amp;quot;è€æ¿&amp;quot;å¯ä»¥æœ‰å¤šä¸ªæ–¹å¼ä¼˜åŒ–è¿™ä¸ªè¿‡ç¨‹ï¼Œæ¯”å¦‚ä»–è®°å½•äº†ä¸€ä¸ªäº‹ä»¶ï¼Œä¸€æ—¦ä¹¦å®šæˆäº†ï¼Œä»–å°±å‘ç°éœ€è¦å‘Šè¯‰å’Œä»–æœ‰è®¢é˜…å…³ç³»çš„&amp;quot;ä½ &amp;quot;äº†ã€‚æƒ³æƒ³çœ‹ï¼Œä½œä¸ºåº”ç”¨ç¨‹åºçš„&amp;quot;ä½ &amp;quot;åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæ˜¯ä¸æ˜¯å¯ä»¥æ”¾å¼€æ‰‹å¹²ç‚¹åˆ«çš„äº‹ï¼Œæ¯”å¦‚ç©ä¸ªåƒé¸¡æ¸¸æˆçš„ä»€ä¹ˆã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597641080,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1346285,"avatar":"https://static001.geekbang.org/account/avatar/00/14/8a/ed/76500086.jpg","nickname":"feng","note":"","ucode":"254A0D72E07ABF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":588489,"discussion_content":"è€å¸ˆï¼Œselectä¸æ˜¯é˜»å¡ç­‰å¾…äº†å—ï¼Œåº”ç”¨ç¨‹åºæ€ä¹ˆå¯ä»¥å»åšåˆ«çš„äº‹ï¼Ÿå¦‚æœä¸é˜»å¡ï¼Œé‚£ä¸æ˜¯ç›´æ¥è¿”å›äº†å—ï¼Œåº”ç”¨ç¨‹åºä¸‹ä¸€æ¬¡è¿˜è¦æ¥è½®è¯¢æ‰èƒ½çŸ¥é“è¦æ‹¿ä¹¦äº†ã€‚é€»è¾‘ä¸é€šå•Šã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663803003,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1245504,"avatar":"https://static001.geekbang.org/account/avatar/00/13/01/40/a203a3b9.jpg","nickname":"çˆ±å­¦ä¹ ä¸å®³æ€•","note":"","ucode":"BE325C02E4C92F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298437,"discussion_content":"æˆ‘ç†è§£ä¸€ä¸ªæ˜¯ç”¨æˆ·æ€ä¸€ä¸ªæ˜¯å†…æ ¸æ€å§ã€‚pollå’Œselectæ˜¯å†…æ ¸å®ç°çš„è½®è¯¢ï¼Œæ¯”ç”¨æˆ·æ€å®ç°çš„è½®è¯¢æ•ˆç‡é«˜ä¸€äº›","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597299024,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":234024,"user_name":"è¡¬è¡«çš„ä»·æ ¼æ˜¯19ç¾å…ƒ","can_delete":false,"product_type":"c1","uid":1397631,"ip_address":"","ucode":"655F925451F772","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKVUskibDnhMt5MCIJ8227HWkeg2wEEyewps8GuWhWaY5fy7Ya56bu2ktMlxdla3K29Wqia9efCkWaQ/132","comment_is_top":false,"comment_ctime":1594555538,"is_pvip":false,"replies":[{"id":"86811","content":"æ€»ç»“åˆ°ä½ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1594907593,"ip_address":"","comment_id":234024,"utype":1}],"discussion_count":2,"race_medal":0,"score":"40249261202","product_id":100032701,"comment_content":"1.selectï¼Œpollï¼Œepollæ˜¯ioå¤šè·¯å¤ç”¨æŠ€æœ¯ï¼Œæ˜¯æ“ä½œç³»ç»Ÿæä¾›çš„æ£€æµ‹ioäº‹ä»¶æ˜¯å¦å°±ç»ªçš„æ–¹æ³•ï¼Œå½“ç„¶æˆ‘ä»¬å¯ä»¥ä¸ç”¨æ“ä½œç³»ç»Ÿæä¾›çš„æ–¹æ³•è€Œè‡ªå·±å»å†™ä¸€ä¸ªè½®è®­ï¼Œä½†æ˜¯è½®è®­ä¼šåŠ é‡cpuè´Ÿè½½ã€‚<br>2.å½“æˆ‘ä»¬è°ƒç”¨fcntlå°†å¥—æ¥å­—é…ç½®ä¸ºéé˜»å¡åï¼Œåœ¨è¯¥å¥—æ¥å­—ä¸Šåç»­çš„acceptï¼Œreadï¼Œwriteæ“ä½œéƒ½å°†å˜ä¸ºéé˜»å¡<br>3.éé˜»å¡ioä¸€èˆ¬éƒ½éœ€è¦é…åˆioå¤šè·¯å¤ç”¨æŠ€æœ¯ä½¿ç”¨","like_count":9,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":501244,"discussion_content":"æ€»ç»“åˆ°ä½ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594907593,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2776006,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83er5SNsSoiaZw4Qzd2ctH4vtibHQordcLrYsX43oFZFloRTId0op617mcGlrvGx33U8ic2LTgdicoEFPvQ/132","nickname":"Frankey","note":"","ucode":"2F09BC2500C9E7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":569272,"discussion_content":"æˆ‘è¿˜æ­£çº³é—·æ€ä¹ˆå®ç°éé˜»å¡çš„ï¼Œç„¶åå°±çœ‹åˆ°äº†ä½ è¯„è®ºï¼Œå¸®ä¸Šå¿™äº†ã€‚è°¢è°¢ã€‚æˆ‘çœ‹äº†ä¸‹ä»£ç ã€‚fcntl(fd, F_SETFL, O_NONBLOCK);","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651389804,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":224565,"user_name":"æ‰©æ•£æ€§ç™¾ä¸‡å’¸é¢åŒ…","can_delete":false,"product_type":"c1","uid":1905171,"ip_address":"","ucode":"6D703D51553B42","user_header":"https://static001.geekbang.org/account/avatar/00/1d/12/13/e103a6e3.jpg","comment_is_top":false,"comment_ctime":1591444420,"is_pvip":false,"replies":[{"id":"84264","content":"å¾ˆè®¤çœŸçš„å›ç­”ä½ ï¼Œæˆ‘è§‰å¾—ä½ è¯´çš„ å•çº¿ç¨‹ + å¤šè·¯å¤ç”¨ + éé˜»å¡I&#47;Oï¼Œæ˜¯å’Œredisçš„è®¾è®¡æœ‰å…³çš„ï¼Œé€šè¿‡è¿™ä¹ˆä¸€ä¸ªè®¾è®¡ï¼Œå‡å°‘äº†å¤šä¸ªçº¿ç¨‹é”çš„æ¶ˆè€—ï¼Œæˆ‘æƒ³æ˜¯redisåšäº†ä¸€äº›å–èˆçš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1592740334,"ip_address":"","comment_id":224565,"utype":1}],"discussion_count":2,"race_medal":0,"score":"40246150084","product_id":100032701,"comment_content":"è€å¸ˆï¼Œè®¤çœŸçš„é—®ä½ ä¸€ä¸ªé—®é¢˜ã€‚<br><br>Redisä¸­ï¼Œç½‘ä¸Šçš„ä»‹ç»æ˜¯è¯´å•çº¿ç¨‹ + å¤šè·¯å¤ç”¨ + éé˜»å¡I&#47;Oã€‚ä¸ºä»€ä¹ˆä¸é‡‡å–C10ké—®é¢˜ä¸­çš„ï¼Œä¸»ä»Reactorç»“æ„ï¼Œå¤šä¸ªäº‹ä»¶åˆ†å‘å™¨æ¥å……åˆ†åˆ©ç”¨CPUçš„å¤šæ ¸èƒ½åŠ›å‘¢ï¼Ÿç†è®ºä¸Šè¿™æ ·æ›´å¥½å•Šã€‚","like_count":9,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497526,"discussion_content":"å¾ˆè®¤çœŸçš„å›ç­”ä½ ï¼Œæˆ‘è§‰å¾—ä½ è¯´çš„ å•çº¿ç¨‹ + å¤šè·¯å¤ç”¨ + éé˜»å¡I/Oï¼Œæ˜¯å’Œredisçš„è®¾è®¡æœ‰å…³çš„ï¼Œé€šè¿‡è¿™ä¹ˆä¸€ä¸ªè®¾è®¡ï¼Œå‡å°‘äº†å¤šä¸ªçº¿ç¨‹é”çš„æ¶ˆè€—ï¼Œæˆ‘æƒ³æ˜¯redisåšäº†ä¸€äº›å–èˆçš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592740334,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2549097,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoib6BjEV4KPEaIdlLEfoVFRCxCSlL2XaIVDiaakvjhWEibibym323ZeHXAY46JMO3nSHmjiaWtAY47eww/132","nickname":"dobby","note":"","ucode":"9C1992C4DD28F5","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":534003,"discussion_content":"å¾ˆç®€å•ï¼Œredisè®¾è®¡å›¢é˜Ÿè‚¯å®šåœ¨å¤šçº¿ç¨‹é”ç«äº‰å’Œå•çº¿ç¨‹ä¸­æ¯”è¾ƒå‡ºæ¥ï¼Œå•çº¿ç¨‹è¿™ç§æ¶æ„æ€§èƒ½æ›´å¥½æ›´é€‚ç”¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638068457,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":182955,"user_name":"ç»¿ç®­ä¾ ","can_delete":false,"product_type":"c1","uid":1528536,"ip_address":"","ucode":"B994F558A98E29","user_header":"https://static001.geekbang.org/account/avatar/00/17/52/d8/123a4981.jpg","comment_is_top":false,"comment_ctime":1582897104,"is_pvip":false,"replies":[{"id":"71027","content":"éé˜»å¡å’Œé˜»å¡æ˜¯æŒ‡I&#47;Oï¼Œå…·ä½“ä½œç”¨åˆ°çš„æ˜¯å¥—æ¥å­—ä¸Šï¼Œè€Œselectè¿™é‡Œæ˜¯I&#47;Oå¤šè·¯å¤ç”¨çš„ä¸€ç§æŠ€æœ¯ï¼Œæ³¨æ„åˆ°è¿™ä¸€è¡Œ ï¼š<br>make_nonblocking(fd);<br><br>å®é™…ä¸Šæ˜¯æŠŠå¥—æ¥å­—éƒ½æ”¹ä¸ºéé˜»å¡I&#47;Oï¼Œå†é€šè¿‡I&#47;Oå¤šè·¯å¤ç”¨æ¥æ¥æ”¶å¥—æ¥å­—ä¸Šçš„I&#47;Oäº‹ä»¶ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1583051969,"ip_address":"","comment_id":182955,"utype":1}],"discussion_count":3,"race_medal":0,"score":"23057733584","product_id":100032701,"comment_content":"è€å¸ˆï¼Œè¯„è®ºåŒºä¸­ ç¨‹åºæ°´æœå® è¯´selectéé˜»å¡ï¼Œæˆ‘çš„ç†è§£ï¼šselect(maxfd + 1, &amp;readset, &amp;writeset, &amp;exset, NULL) æ­¤å¤„å› ä¸ºNULLå½“ç„¶é˜»å¡ï¼Œä¸æ˜ç™½ä¸ºä»€ä¹ˆè¯´selectéé˜»å¡ï¼Ÿï¼Ÿ","like_count":5,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":485511,"discussion_content":"éé˜»å¡å’Œé˜»å¡æ˜¯æŒ‡I/Oï¼Œå…·ä½“ä½œç”¨åˆ°çš„æ˜¯å¥—æ¥å­—ä¸Šï¼Œè€Œselectè¿™é‡Œæ˜¯I/Oå¤šè·¯å¤ç”¨çš„ä¸€ç§æŠ€æœ¯ï¼Œæ³¨æ„åˆ°è¿™ä¸€è¡Œ ï¼š\nmake_nonblocking(fd);\n\nå®é™…ä¸Šæ˜¯æŠŠå¥—æ¥å­—éƒ½æ”¹ä¸ºéé˜»å¡I/Oï¼Œå†é€šè¿‡I/Oå¤šè·¯å¤ç”¨æ¥æ¥æ”¶å¥—æ¥å­—ä¸Šçš„I/Oäº‹ä»¶ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583051969,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1026502,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a9/c6/30b29c22.jpg","nickname":"é‚£é£åœ¨æå®¢","note":"","ucode":"132B9263006BB9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":591075,"discussion_content":"select æ˜¯é˜»å¡çš„ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1666262208,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2916751,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/U5vvFI4v3jibf6uHbOFtkm1sBaXeLZnJicCOia0KW5KNb2KK06we5gkzJE7RiawfDzMAicHIpINUrTYfjrdZweQsuUA/132","nickname":"Geek_1cd0c8","note":"","ucode":"1F0C3F5E03C420","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":576596,"discussion_content":"selectå‡½æ•°æœ¬èº«ä¸å°±æ˜¯é˜»å¡å‡½æ•°ï¼Ÿï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655693567,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":147943,"user_name":"javaYJL","can_delete":false,"product_type":"c1","uid":1188249,"ip_address":"","ucode":"E326EB9AFDCE32","user_header":"https://static001.geekbang.org/account/avatar/00/12/21/99/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1572920678,"is_pvip":false,"replies":[{"id":"57483","content":"acceptå’Œé˜»å¡å¥—æ¥å­—ä¸€èµ·ä½¿ç”¨å°±æ˜¯é˜»å¡çš„ï¼Œå’Œéé˜»å¡å¥—é›†å­—ä¸€èµ·ä½¿ç”¨å°±æ˜¯éé˜»å¡çš„ã€‚é˜»å¡å’Œéé˜»å¡æ˜¯ä½œç”¨åˆ°å¥—é›†å­—ä¸Šçš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1573282485,"ip_address":"","comment_id":147943,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23047757158","product_id":100032701,"comment_content":"è€å¸ˆï¼Œacceptï¼ˆ)è¿™ä¸ªå‡½æ•°ä¸æ˜¯é˜»å¡çš„å—ï¼Ÿ","like_count":5,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":473347,"discussion_content":"acceptå’Œé˜»å¡å¥—æ¥å­—ä¸€èµ·ä½¿ç”¨å°±æ˜¯é˜»å¡çš„ï¼Œå’Œéé˜»å¡å¥—é›†å­—ä¸€èµ·ä½¿ç”¨å°±æ˜¯éé˜»å¡çš„ã€‚é˜»å¡å’Œéé˜»å¡æ˜¯ä½œç”¨åˆ°å¥—é›†å­—ä¸Šçš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573282485,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":138522,"user_name":"ä¸€å¤©åˆ°æ™šæ¸¸æ³³çš„é±¼","can_delete":false,"product_type":"c1","uid":1433982,"ip_address":"","ucode":"1F40AF478D85B9","user_header":"","comment_is_top":false,"comment_ctime":1570289648,"is_pvip":false,"replies":[{"id":"54309","content":"ä½ çš„ç†è§£æ˜¯å¯¹çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1570971673,"ip_address":"","comment_id":138522,"utype":1}],"discussion_count":2,"race_medal":0,"score":"23045126128","product_id":100032701,"comment_content":"è€å¸ˆï¼Œæˆ‘æƒ³è¯·æ•™ä¸€ä¸ªé—®é¢˜å°±æ˜¯, å½“æŠŠä¸€ä¸ªæè¿°ç¬¦è®¾ç½®ä¸ºéé˜»å¡çš„ä¹‹åï¼Œåœ¨è¯¥æè¿°ç¬¦ä¸Šé¢çš„æ“ä½œå°±ä¼šå˜æˆéé˜»å¡çš„å—? æ¯”å¦‚è¯´æŠŠè¿æ¥å¥—æ¥å­—è®¾ç½®ä¸ºéé˜»å¡çš„ï¼Œsendå’Œrecvå°±ä¼šå˜æˆéé˜»å¡çš„å—?","like_count":5,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":469555,"discussion_content":"ä½ çš„ç†è§£æ˜¯å¯¹çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570971673,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1202482,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/ydFhHonicUQibGlAfsAYBibNOfSxpCG5cJNp9oRibTJm3TrxM7Hj4WPPCRE3vluZJb0TGQqpKCaBWLdmra5Su1KF5Q/132","nickname":"yudidi","note":"","ucode":"70283DE39D86F5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":225021,"discussion_content":"æ˜¯ä¸æ˜¯å¯ä»¥è¿™ä¹ˆç†è§£ï¼šå¦‚æœlisten_fdæ˜¯éé˜»å¡IOçš„å¥—æ¥å­—ï¼Œaccept(listen_fd)å°±ä¸ä¼šé˜»å¡?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586344488,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":137387,"user_name":"yusuf","can_delete":false,"product_type":"c1","uid":1170784,"ip_address":"","ucode":"9F32149B2ADDA0","user_header":"https://static001.geekbang.org/account/avatar/00/11/dd/60/eae432c6.jpg","comment_is_top":false,"comment_ctime":1569727729,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"23044564209","product_id":100032701,"comment_content":"1ã€133è¡Œåˆ¤æ–­æ˜¯å¦è¶…è¿‡äº†æ–‡ä»¶æè¿°ç¬¦çš„æœ€å¤§å€¼ï¼Œå¦‚æœè¶…è¿‡äº†ï¼Œå°±ä¼šæŠ¥é”™ã€‚å¯ä»¥è€ƒè™‘ä½¿ç”¨åŠ¨æ€åˆ†é…çš„æ–¹å¼ï¼Œä½†å¦‚æœè¶…è¿‡äº†1024çš„è¯ï¼Œä½¿ç”¨ä¸Šä¸€èŠ‚ä¸­çš„pollæ¥å¤„ç†ä¼šæ›´å¥½äº›<br>2ã€è®¤ä¸ºæ˜¯è€ƒè™‘åˆ°å¯¹åŒä¸€ä¸ªfdçš„åŒä¸€ç¼“å†²åŒºè¿›è¡Œè¯»å†™æ“ä½œï¼Œåªç”¨ä¸€ä¸ªBufferå¯¹è±¡è¶³å¤Ÿäº†","like_count":5},{"had_liked":false,"id":251616,"user_name":"YUAN","can_delete":false,"product_type":"c1","uid":2153838,"ip_address":"","ucode":"98EF68EEE21893","user_header":"https://static001.geekbang.org/account/avatar/00/20/dd/6e/8f6f79d2.jpg","comment_is_top":false,"comment_ctime":1601726059,"is_pvip":false,"replies":[{"id":"92060","content":"æˆ‘æŠŠå®ƒå½’ä¸ºå¤šè·¯å¤ç”¨ã€‚è½®è¯¢çš„æ„æ€æ˜¯åº”ç”¨ç¨‹åºè‡ªå·±ä¸æ–­çš„ä»åº”ç”¨å±‚å‘èµ·æ£€æµ‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1601871749,"ip_address":"","comment_id":251616,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18781595243","product_id":100032701,"comment_content":"selectå’Œpollä¹Ÿæ˜¯è½®è®­å§ğŸ˜„ï¼Ÿ","like_count":4,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":506566,"discussion_content":"æˆ‘æŠŠå®ƒå½’ä¸ºå¤šè·¯å¤ç”¨ã€‚è½®è¯¢çš„æ„æ€æ˜¯åº”ç”¨ç¨‹åºè‡ªå·±ä¸æ–­çš„ä»åº”ç”¨å±‚å‘èµ·æ£€æµ‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1601871749,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":287486,"user_name":"null","can_delete":false,"product_type":"c1","uid":1024294,"ip_address":"","ucode":"F9039EFED6B55D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaELZPnUAiajaR5C25EDLWeJURggyiaOP5GGPe2qlwpQcm5e3ybib8OsP4tvddFDLVRSNNGL5I3SFPJHsA/132","comment_is_top":false,"comment_ctime":1617973539,"is_pvip":false,"replies":[{"id":"104490","content":"é¼“æŒğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1618140137,"ip_address":"","comment_id":287486,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14502875427","product_id":100032701,"comment_content":"Buffer.readable ä¸º 1 æˆ– 0ï¼š<br><br>1-å¯è¯»ï¼Œè¯´æ˜ç»“æ„ä½“ buffer æœ‰æ•°æ®å¯è¯»ï¼Œä¹Ÿå°±å¯ä»¥å¾€ connect_fd å†™æ•°æ®ï¼Œå› æ­¤æ˜¯ç›‘å¬ connect_fd çš„å†™äº‹ä»¶ã€‚<br><br>0-ä¸å¯è¯»ï¼Œè¯´æ˜ç»“æ„ä½“ buffer æ— æ•°æ®ï¼Œå³ç»“æ„ä½“ buffer æœ‰ç©ºé—´å¯ä»¥å†™æ•°æ®ï¼Œä¹Ÿå°±å¯ä»¥ä» connect_fd è¯»æ•°æ®ï¼Œå› æ­¤æ˜¯ç›‘å¬ connect_fd çš„è¯»äº‹ä»¶ã€‚<br><br>è€å¸ˆï¼Œæ˜¯è¿™æ ·ä¸ï¼Œè°¢è°¢ï¼","like_count":3,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518322,"discussion_content":"é¼“æŒğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618140137,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":170376,"user_name":"skye","can_delete":false,"product_type":"c1","uid":1027840,"ip_address":"","ucode":"C55C9F52C78A00","user_header":"https://static001.geekbang.org/account/avatar/00/0f/af/00/9b49f42b.jpg","comment_is_top":false,"comment_ctime":1578582206,"is_pvip":false,"replies":[{"id":"68058","content":"è¿™å¥è¯æ˜¯è¯´ï¼Œåœ¨readè°ƒç”¨æ—¶ï¼Œè™½ç„¶è®¾å®šéœ€è¦1kä¸ªå­—èŠ‚ï¼Œå®é™…ä¸Šæ€»æ˜¯åœ¨ç¼“å†²åŒºæœ‰æ•°æ®æ—¶å°±ç«‹å³è¿”å›äº†ï¼Œæœ‰å¯èƒ½åªè¯»åˆ°äº†20ä¸ªå­—èŠ‚ã€‚è¿™ç§è¡Œä¸ºå¯¹é˜»å¡å’Œéé˜»å¡æ˜¯ä¸€æ ·çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1580628460,"ip_address":"","comment_id":170376,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14463484094","product_id":100032701,"comment_content":"read æ€»æ˜¯åœ¨æ¥æ”¶ç¼“å†²åŒºæœ‰æ•°æ®æ—¶å°±ç«‹å³è¿”å›ï¼Œä¸æ˜¯ç­‰åˆ°åº”ç”¨ç¨‹åºç»™å®šçš„æ•°æ®å……æ»¡æ‰è¿”å›ã€‚===<br>è€å¸ˆï¼Œè¿™ä¸ªæ˜¯æŒ‡é˜»å¡æ—¶å—ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480961,"discussion_content":"è¿™å¥è¯æ˜¯è¯´ï¼Œåœ¨readè°ƒç”¨æ—¶ï¼Œè™½ç„¶è®¾å®šéœ€è¦1kä¸ªå­—èŠ‚ï¼Œå®é™…ä¸Šæ€»æ˜¯åœ¨ç¼“å†²åŒºæœ‰æ•°æ®æ—¶å°±ç«‹å³è¿”å›äº†ï¼Œæœ‰å¯èƒ½åªè¯»åˆ°äº†20ä¸ªå­—èŠ‚ã€‚è¿™ç§è¡Œä¸ºå¯¹é˜»å¡å’Œéé˜»å¡æ˜¯ä¸€æ ·çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580628460,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":137557,"user_name":"æ²‰æ·€çš„æ¢¦æƒ³","can_delete":false,"product_type":"c1","uid":1177315,"ip_address":"","ucode":"BCB7C26F9D214B","user_header":"https://static001.geekbang.org/account/avatar/00/11/f6/e3/e4bcd69e.jpg","comment_is_top":false,"comment_ctime":1569775291,"is_pvip":false,"replies":[{"id":"53867","content":"ROT13ï¼ˆå›è½¬13ä½ï¼Œrotateby13placesï¼Œæœ‰æ—¶ä¸­é—´åŠ äº†ä¸ªå‡å·ç§°ä½œROT-13ï¼‰æ˜¯ä¸€ç§ç®€æ˜“çš„ç½®æ¢æš—ç ã€‚<br><br>ROT-13 ç¼–ç æ˜¯ä¸€ç§æ¯ä¸€ä¸ªå­—æ¯è¢«å¦ä¸€ä¸ªå­—æ¯ä»£æ›¿çš„æ–¹æ³•ã€‚è¿™ä¸ªä»£æ›¿å­—æ¯æ˜¯ç”±åŸæ¥çš„å­—æ¯å‘å‰ç§»åŠ¨ 13 ä¸ªå­—æ¯è€Œå¾—åˆ°çš„ã€‚æ•°å­—å’Œéå­—æ¯å­—ç¬¦ä¿æŒä¸å˜ã€‚<br><br>å®ƒæ˜¯ä¸€ç§åœ¨ç½‘è·¯è®ºå›ç”¨ä½œéšè—å…«å¦ã€å¦™å¥ã€è°œé¢˜è§£ç­”ä»¥åŠæŸäº›è„è¯çš„å·¥å…·ï¼Œç›®çš„æ˜¯é€ƒè¿‡ç‰ˆä¸»æˆ–ç®¡ç†å‘˜çš„åŒ†åŒ†ä¸€ç¥ã€‚ROT13æ¿€åŠ±äº†å¹¿æ³›çš„çº¿ä¸Šä¹¦ä¿¡æ’°å†™ä¸å­—æ¯æ¸¸æˆï¼Œä¸”å®ƒå¸¸äºæ–°é—»ç¾¤ç»„å¯¹è¯ä¸­è¢«æåŠã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1570698137,"ip_address":"","comment_id":137557,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14454677179","product_id":100032701,"comment_content":"è€å¸ˆä»£ç ä¸­è¿›è¡Œrot13_charç¼–ç çš„ç›®çš„æ˜¯å•¥ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":469148,"discussion_content":"ROT13ï¼ˆå›è½¬13ä½ï¼Œrotateby13placesï¼Œæœ‰æ—¶ä¸­é—´åŠ äº†ä¸ªå‡å·ç§°ä½œROT-13ï¼‰æ˜¯ä¸€ç§ç®€æ˜“çš„ç½®æ¢æš—ç ã€‚\n\nROT-13 ç¼–ç æ˜¯ä¸€ç§æ¯ä¸€ä¸ªå­—æ¯è¢«å¦ä¸€ä¸ªå­—æ¯ä»£æ›¿çš„æ–¹æ³•ã€‚è¿™ä¸ªä»£æ›¿å­—æ¯æ˜¯ç”±åŸæ¥çš„å­—æ¯å‘å‰ç§»åŠ¨ 13 ä¸ªå­—æ¯è€Œå¾—åˆ°çš„ã€‚æ•°å­—å’Œéå­—æ¯å­—ç¬¦ä¿æŒä¸å˜ã€‚\n\nå®ƒæ˜¯ä¸€ç§åœ¨ç½‘è·¯è®ºå›ç”¨ä½œéšè—å…«å¦ã€å¦™å¥ã€è°œé¢˜è§£ç­”ä»¥åŠæŸäº›è„è¯çš„å·¥å…·ï¼Œç›®çš„æ˜¯é€ƒè¿‡ç‰ˆä¸»æˆ–ç®¡ç†å‘˜çš„åŒ†åŒ†ä¸€ç¥ã€‚ROT13æ¿€åŠ±äº†å¹¿æ³›çš„çº¿ä¸Šä¹¦ä¿¡æ’°å†™ä¸å­—æ¯æ¸¸æˆï¼Œä¸”å®ƒå¸¸äºæ–°é—»ç¾¤ç»„å¯¹è¯ä¸­è¢«æåŠã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570698137,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":137152,"user_name":"çŸ³å°†ä»","can_delete":false,"product_type":"c1","uid":1375617,"ip_address":"","ucode":"12F43E643D1D58","user_header":"https://static001.geekbang.org/account/avatar/00/14/fd/81/1864f266.jpg","comment_is_top":false,"comment_ctime":1569636213,"is_pvip":false,"replies":[{"id":"52778","content":"å…¶å®è¿˜æ˜¯è›®ç®€å•çš„ï¼Œç¨å¾®è§£é‡Šä¸€ä¸‹ï¼š<br><br>onSocketReadæ˜¯é€šè¿‡å¥—æ¥å­—è¯»å–æ•°æ®ï¼Œæ•°æ®å­˜æ”¾åœ¨Bufferå¯¹è±¡é‡Œï¼ŒBufferå¯¹è±¡é€šè¿‡äº†writeIndexè®°å½•å½“å‰æ•°<br>æ®åŒºå¯å†™çš„ä½ç½®ï¼›<br><br>onSocketWriteé€šè¿‡å¥—æ¥å­—å†™æ•°æ®ï¼Œæ•°æ®æ¥æºäºBufferç¼“å†²å¯¹è±¡ï¼ŒBufferç¼“å†²å¯¹è±¡çš„readIndexè®°å½•äº†å½“å‰ç¼“å†²åŒºè¯»çš„ä½ç½®ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1569723806,"ip_address":"","comment_id":137152,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14454538101","product_id":100032701,"comment_content":"æ²¡æœ‰æ³¨é‡Šï¼Œçœ‹onSocketWriteå’ŒonSocketReadå‡½æ•°å¾ˆè´¹åŠ²","like_count":3,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468959,"discussion_content":"å…¶å®è¿˜æ˜¯è›®ç®€å•çš„ï¼Œç¨å¾®è§£é‡Šä¸€ä¸‹ï¼š\n\nonSocketReadæ˜¯é€šè¿‡å¥—æ¥å­—è¯»å–æ•°æ®ï¼Œæ•°æ®å­˜æ”¾åœ¨Bufferå¯¹è±¡é‡Œï¼ŒBufferå¯¹è±¡é€šè¿‡äº†writeIndexè®°å½•å½“å‰æ•°\næ®åŒºå¯å†™çš„ä½ç½®ï¼›\n\nonSocketWriteé€šè¿‡å¥—æ¥å­—å†™æ•°æ®ï¼Œæ•°æ®æ¥æºäºBufferç¼“å†²å¯¹è±¡ï¼ŒBufferç¼“å†²å¯¹è±¡çš„readIndexè®°å½•äº†å½“å‰ç¼“å†²åŒºè¯»çš„ä½ç½®ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569723806,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":240117,"user_name":"keepgoing","can_delete":false,"product_type":"c1","uid":1471387,"ip_address":"","ucode":"A2FE0687FB17E0","user_header":"https://static001.geekbang.org/account/avatar/00/16/73/9b/67a38926.jpg","comment_is_top":false,"comment_ctime":1596765529,"is_pvip":false,"replies":[{"id":"89396","content":"å¦‚æœæ˜¯recv == 0ï¼Œåˆ™è¯´æ˜æ˜¯EOFï¼Œæ­£å¸¸å…³é—­ï¼›<br>å¦‚æœæ˜¯recv &lt;0ï¼Œè¯´æ˜å‡ºé”™äº†ï¼Œä¸åšä»»ä½•å¤„ç†ï¼Œç»§ç»­ä¸‹ä¸ªfdï¼›<br>å¦‚ä¸æ˜¯recv &lt;0,ä½†æ˜¯ä¸ºEAGAINï¼Œåˆ™è¿›å…¥å†™åˆ¤æ–­ï¼›<br><br>-1çš„ä½œç”¨å°±æ˜¯ä¸ºäº†åŒºåˆ«å‡º&gt;0å’Œ==0çš„ä¸åŒreturnå€¼ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1597640709,"ip_address":"","comment_id":240117,"utype":1}],"discussion_count":3,"race_medal":0,"score":"10186700121","product_id":100032701,"comment_content":"è¯·é—®è€å¸ˆonSocketReadå‡½æ•°ä¸­ï¼Œerror != EAGAINçš„æƒ…å†µä¸åº”è¯¥ä¹Ÿè¿”å›1ï¼Œè¡¨ç¤ºè¯»åˆ°äº†é”™è¯¯éœ€è¦å…³é—­å—ã€‚<br>æˆ‘ç†è§£recv == 0 ä»¥åŠ &lt; 0çš„æƒ…å†µéƒ½éœ€è¦å…³é—­ï¼Œè¿™é‡Œä¸ºä»€ä¹ˆåªåˆ¤æ–­ == 0çš„æƒ…å†µå…³é—­å‘¢ï¼Œå¦å¤–ç»“æœè¿”å›å€¼r == -1ä¸€ç›´æ²¡æœ‰å¤„ç†ï¼Œæƒ³é—®ä¸‹è¿™ä¸ª-1æ˜¯ä»€ä¹ˆç”¨å‘¢ã€‚çœ‹å®Œä»£ç æ¯”è¾ƒç–‘æƒ‘ï¼Œæƒ³è¯·è€å¸ˆè§£ç­”ä¸€ä¸‹","like_count":2,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":503346,"discussion_content":"å¦‚æœæ˜¯recv == 0ï¼Œåˆ™è¯´æ˜æ˜¯EOFï¼Œæ­£å¸¸å…³é—­ï¼›\nå¦‚æœæ˜¯recv &amp;lt;0ï¼Œè¯´æ˜å‡ºé”™äº†ï¼Œä¸åšä»»ä½•å¤„ç†ï¼Œç»§ç»­ä¸‹ä¸ªfdï¼›\nå¦‚ä¸æ˜¯recv &amp;lt;0,ä½†æ˜¯ä¸ºEAGAINï¼Œåˆ™è¿›å…¥å†™åˆ¤æ–­ï¼›\n\n-1çš„ä½œç”¨å°±æ˜¯ä¸ºäº†åŒºåˆ«å‡º&amp;gt;0å’Œ==0çš„ä¸åŒreturnå€¼ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597640709,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2331572,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ep1aHicNquR3ETTicbInlCpfawcDMB8ILYyzegVTubTgQ0w6icarsK7fglpZVr7VfiaJaQ0eokNAHVYLA/132","nickname":"ä¸€ä¸ªæˆ’","note":"","ucode":"2FD9289C547785","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":332396,"discussion_content":"è¯·é—®ä¸€ä¸‹æ¥¼ä¸»ï¼Œå½“onSocketReadè¿”å›å€¼ä¸º0æ—¶ï¼Œæœ‰å¯èƒ½æ˜¯EAGAINæˆ–è€…onSocketReadå®Œæˆï¼Œä¸ºä»€ä¹ˆ154è¡Œåˆ¤æ–­ä¸€ä¸‹å°±ç›´æ¥å†™äº†ï¼Œå¦‚æœæ˜¯EAGAINå¥½åƒæ²¡åšä»»ä½•å¤„ç†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607179624,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1471387,"avatar":"https://static001.geekbang.org/account/avatar/00/16/73/9b/67a38926.jpg","nickname":"keepgoing","note":"","ucode":"A2FE0687FB17E0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":300717,"discussion_content":"å¥½çš„æ˜ç™½ï¼Œè°¢è°¢è€å¸ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598246174,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":138285,"user_name":"J.M.Liu","can_delete":false,"product_type":"c1","uid":1200037,"ip_address":"","ucode":"B2CB84B8E923A6","user_header":"https://static001.geekbang.org/account/avatar/00/12/4f/a5/71358d7b.jpg","comment_is_top":false,"comment_ctime":1570154956,"is_pvip":false,"replies":[{"id":"54298","content":"ä¸æ˜¯ä¸€å®šéœ€è¦selectæ‰å¯ä»¥ acceptçš„ã€‚è¿™é‡Œçš„ä¾‹å­ä¸»è¦æ˜¯è¯´æ˜å¦‚æœä¸ç»™ç›‘å¬å¥—é›†å­—è®¾ç½®ä¸ºéé˜»å¡ï¼Œå¯èƒ½ä¼šå¼•èµ·çš„é—®é¢˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1570970283,"ip_address":"","comment_id":138285,"utype":1}],"discussion_count":3,"race_medal":0,"score":"10160089548","product_id":100032701,"comment_content":"è€å¸ˆï¼Œæœ‰ä¸€ä¸ªåœ°æ–¹ä¸æ˜¯å¾ˆæ˜ç™½ã€‚åœ¨è¿æ¥å¥—æ¥å­—è®¾ä¸ºé˜»å¡æ—¶ï¼Œå½“å®¢æˆ·ç«¯å‘é€RSTåï¼ŒæœåŠ¡ç«¯åœ¨å·²å®Œæˆè¿æ¥é˜Ÿåˆ—åˆ é™¤äº†è¿æ¥ï¼Œaccepté˜»å¡ã€‚è¿™æ—¶å€™å¦‚æœæœ‰æ–°è¿æ¥è¿›æ¥äº†ï¼Œä¸ºä»€ä¹ˆacceptè¿˜æ˜¯ä¼šé˜»å¡å‘€ï¼Ÿéš¾é“æ–°è¿æ¥è¿›æ¥ä¸€å®šè¦å…ˆselectä¹‹åï¼Œacceptæ‰èƒ½å–åˆ°è¿æ¥å¥½çš„å¥—æ¥å­—ï¼Ÿï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":469467,"discussion_content":"ä¸æ˜¯ä¸€å®šéœ€è¦selectæ‰å¯ä»¥ acceptçš„ã€‚è¿™é‡Œçš„ä¾‹å­ä¸»è¦æ˜¯è¯´æ˜å¦‚æœä¸ç»™ç›‘å¬å¥—é›†å­—è®¾ç½®ä¸ºéé˜»å¡ï¼Œå¯èƒ½ä¼šå¼•èµ·çš„é—®é¢˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570970283,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1202482,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/ydFhHonicUQibGlAfsAYBibNOfSxpCG5cJNp9oRibTJm3TrxM7Hj4WPPCRE3vluZJb0TGQqpKCaBWLdmra5Su1KF5Q/132","nickname":"yudidi","note":"","ucode":"70283DE39D86F5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":225015,"discussion_content":"æˆ‘è§‰å¾—ï¼Œåªè¦æœ‰æ–°çš„è¿æ¥å»ºç«‹ï¼Œacceptå°±èƒ½è¿”å›ï¼Œç»§ç»­æ‰§è¡Œå§","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1586344057,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1123690,"avatar":"https://static001.geekbang.org/account/avatar/00/11/25/6a/fac4e9d5.jpg","nickname":"æˆ˜","note":"","ucode":"B65666690D15AA","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":117052,"discussion_content":"accept åœ¨è¿™ç§æƒ…å†µåº”è¯¥æ˜¯èƒ½è·å–æ–°é“¾æ¥çš„å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578084953,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":137556,"user_name":"æ²‰æ·€çš„æ¢¦æƒ³","can_delete":false,"product_type":"c1","uid":1177315,"ip_address":"","ucode":"BCB7C26F9D214B","user_header":"https://static001.geekbang.org/account/avatar/00/11/f6/e3/e4bcd69e.jpg","comment_is_top":false,"comment_ctime":1569774749,"is_pvip":false,"replies":[{"id":"53866","content":"è¿™é‡Œä¸¾çš„ä¸€ä¸ªä¾‹å­ï¼Œæœ‰å¯èƒ½åœ¨æ–°çš„åè®®æ ˆä¸‹æœ‰æ‰€æ”¹å˜ï¼Œä½†æ˜¯ä¸ç®¡æ€æ ·ï¼Œç†è®ºä¸Šçš„åˆ†ææœ‰å¯èƒ½å¯¼è‡´é˜»å¡ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜æ˜¯åº”è¯¥åœ¨å¹³æ—¶ç¼–ç ä¸­å°†ç›‘å¬å¥—æ¥å­—ä¹Ÿè®¾ç½®ä¸ºéé˜»å¡çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1570697914,"ip_address":"","comment_id":137556,"utype":1}],"discussion_count":4,"race_medal":0,"score":"10159709341","product_id":100032701,"comment_content":"è€å¸ˆé‚£ä¸ªaccepté˜»å¡çš„å®éªŒï¼Œåœ¨æˆ‘ç”µè„‘ï¼ˆlinux-4.18.0ï¼Œubuntu18.10ï¼‰ä¸Šçš„è¡Œä¸ºæœ‰ç‚¹ä¸å¤ªä¸€æ ·ï¼Œæ— è®ºæ˜¯æŠŠlisten_fdè®¾ç½®ä¸ºé˜»å¡è¿˜æ˜¯éé˜»å¡ï¼Œsleep 5sè¿˜æ˜¯10sæˆ–è€…æ›´é•¿ï¼Œè¡Œä¸ºæ€»æ˜¯ï¼šacceptæˆåŠŸè·å–åˆ°å®¢æˆ·ç«¯è¿æ¥ï¼Œç„¶åè¯»å–åˆ°å®¢æˆ·ç«¯çš„RST","like_count":2,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":469147,"discussion_content":"è¿™é‡Œä¸¾çš„ä¸€ä¸ªä¾‹å­ï¼Œæœ‰å¯èƒ½åœ¨æ–°çš„åè®®æ ˆä¸‹æœ‰æ‰€æ”¹å˜ï¼Œä½†æ˜¯ä¸ç®¡æ€æ ·ï¼Œç†è®ºä¸Šçš„åˆ†ææœ‰å¯èƒ½å¯¼è‡´é˜»å¡ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜æ˜¯åº”è¯¥åœ¨å¹³æ—¶ç¼–ç ä¸­å°†ç›‘å¬å¥—æ¥å­—ä¹Ÿè®¾ç½®ä¸ºéé˜»å¡çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570697914,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1498137,"avatar":"https://static001.geekbang.org/account/avatar/00/16/dc/19/c058bcbf.jpg","nickname":"æµæµªåœ°çƒ","note":"","ucode":"25210DCD353F97","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":33428,"discussion_content":"æˆ‘å¯¹è¿™ä¸ªåœ°æ–¹çš„ç†è§£ä¹Ÿæ˜¯ï¼ŒæœåŠ¡å™¨ç«¯acceptåï¼Œå®¢æˆ·ç«¯æ‰è®¤ä¸ºé“¾æ¥å»ºç«‹æˆåŠŸï¼Œæ‰ä¼šèµ°åé¢çš„è®¾ç½®åŠcloseæ“ä½œï¼Œå¯¹è€å¸ˆçš„ä»£ç äº§ç”Ÿçš„ç°è±¡ä¸æ˜¯å¾ˆç†è§£ã€‚","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1571123108,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1717235,"avatar":"","nickname":"ray","note":"","ucode":"10962C711CBC11","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":228883,"discussion_content":"æˆ‘æ˜¯åœ¨ubuntu 18.04 kernel 5.3.0-46-genericï¼Œç”¨wiresharkæŠ“åŒ…çš„ç»“æœæ˜¯clientä¸€å»ºç«‹å®Œè¿ç»“åï¼Œä¼šé©¬ä¸Šæ–­å¼€ã€‚ä½†æ˜¯acceptè¿˜æ˜¯ä¼šæ­£å¸¸å–å‡ºfdç„¶åå·¥ä½œï¼Œä¸ç®¡æœ‰æ²¡æœ‰åŠ make_nonblockingéƒ½ä¸€æ ·ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1586586176,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1433982,"avatar":"","nickname":"ä¸€å¤©åˆ°æ™šæ¸¸æ³³çš„é±¼","note":"","ucode":"1F40AF478D85B9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":24921,"discussion_content":"æˆ‘ç”¨çš„centosç³»ç»Ÿï¼Œå®éªŒçš„ç»“æœå’Œä½ ä¸€æ ·","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570332235,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":288575,"user_name":"Jaime","can_delete":false,"product_type":"c1","uid":1078333,"ip_address":"","ucode":"904192CC4E916F","user_header":"https://static001.geekbang.org/account/avatar/00/10/74/3d/54bbc1df.jpg","comment_is_top":false,"comment_ctime":1618543318,"is_pvip":true,"replies":[{"id":"104850","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1618751718,"ip_address":"","comment_id":288575,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5913510614","product_id":100032701,"comment_content":"ç¬¬ä¸€é“é—®é¢˜ï¼Œè¯´æ˜äº†è¿™ä¸ªæœåŠ¡å™¨åªèƒ½æœåŠ¡å›ºå®šçš„è¿æ¥ï¼ŒLINUXä¸Šæ˜¯1024ï¼Œæ”¹è¿›çš„åŒ–ï¼Œå¯ä»¥ä½¿ç”¨pollæˆ–è€…epollçªç ´æ–‡ä»¶æè¿°ç¬¦æ•°é‡é™åˆ¶<br>ç¬¬äºŒé“é—®é¢˜ï¼ŒBUFFå°±æ˜¯ä¸€ä¸ªå¾ªç¯ç¼“å†²åŒºï¼Œä¸€ä¸ªè¯»æŒ‡é’ˆï¼Œä¸€ä¸ªå†™æŒ‡é’ˆï¼Œå·²ç»å¯ä»¥å®ç°è¯»å†™åŠŸèƒ½ï¼Œç›®çš„æ˜¯èŠ‚çœå†…å­˜","like_count":1,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518667,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618751718,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":287359,"user_name":"null","can_delete":false,"product_type":"c1","uid":1024294,"ip_address":"","ucode":"F9039EFED6B55D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaELZPnUAiajaR5C25EDLWeJURggyiaOP5GGPe2qlwpQcm5e3ybib8OsP4tvddFDLVRSNNGL5I3SFPJHsA/132","comment_is_top":false,"comment_ctime":1617900813,"is_pvip":false,"replies":[{"id":"104488","content":"selectå’Œpollæ˜¯è®©æ“ä½œç³»ç»Ÿåœ¨æœ‰I&#47;Oå®é™…æ—¶å†ä»è°ƒç”¨ä¸­è¿”å›ï¼Œè€Œä¸”æœ¬è´¨ä¸Šselectå’Œpolléƒ½æ˜¯åœ¨ç­‰å¾…å¤šç§I&#47;Oäº‹ä»¶ï¼Œå’Œå‰é¢æ¯æ¬¡è½®è¯¢å•ä¸ªI&#47;Oäº‹ä»¶æ˜¯å¦å°±ç»ªï¼Œæœ‰å¤©å£¤ä¹‹åˆ«ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1618139962,"ip_address":"","comment_id":287359,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5912868109","product_id":100032701,"comment_content":"åŸæ–‡ï¼š<br>é‚£ä¹ˆéé˜»å¡ I&#47;O å‘¢ï¼Ÿâ€¦ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œä½ æ²¡æœ‰è¢«é˜»å¡ï¼Œè€Œæ˜¯åœ¨ä¸æ–­è½®è¯¢ã€‚<br>ä½†è½®è¯¢çš„æ•ˆç‡å¤ªä½äº†ï¼Œäºæ˜¯ä½ å‘è€æ¿æè®®ï¼šâ€œè€æ¿ï¼Œåˆ°è´§ç»™æˆ‘æ‰“ç”µè¯å§ï¼Œæˆ‘å†æ¥ä»˜é’±å–ä¹¦ã€‚â€è¿™å°±æ˜¯å‰é¢è®²åˆ°çš„ I&#47;O å¤šè·¯å¤ç”¨ã€‚<br><br>ä»¥ä¸‹ä»£ç ç‰‡æ®µï¼Œæ‘˜è‡ªå‰é¢ä¸¤èŠ‚è¯¾ï¼Œå½“ select&#47;poll çš„ time å‚æ•°è®¾ç½®ä¸º 0ï¼Œä¹Ÿæ˜¯éé˜»å¡ç«‹åˆ»è¿”å›ï¼Œç„¶åä¸æ–­è½®è¯¢è°ƒç”¨ select&#47;poll å‡½æ•°ã€‚è¿™ä¸å°±å’Œéé˜»å¡ I&#47;O æè¿°çš„æ˜¯ä¸€æ ·ï¼šç«‹åˆ»è¿”å›+è½®è¯¢ã€‚<br>æ˜¯ä¸æ˜¯è¯´ select&#47;poll å¯ä»¥å¤„ç†å¤šæ¡â€œé“¾è·¯â€ï¼Œè€Œéé˜»å¡ I&#47;O åªå¤„ç†ä¸€æ¡é“¾è·¯ã€‚è¿˜æ˜¯è¯´è¿™ä¸¤ä¸ªæ¦‚å¿µä¸æ˜¯ä¸€å›äº‹ï¼Œæ°´æœå’ŒåŠ¨ç‰©ä¸èƒ½æ··ä¸ºä¸€è°ˆã€‚<br>è¯·é—®è€å¸ˆï¼Œæ˜¯æˆ‘å“ªé‡Œç†è§£é”™äº†ä¹ˆï¼Ÿè°¢è°¢ï¼<br><br>select&#47;poll å¤šè·¯å¤ç”¨ä»£ç æ®µï¼š<br>for (;;) {<br>    readmask = allreads;<br>    int rc = select(socket_fd + 1, &amp;readmask, NULL, NULL, NULL);<br>}<br><br>for (;;) {<br>    if ((ready_number = poll(event_set, INIT_SIZE, -1)) &lt; 0) {<br>        error(1, errno, &quot;poll failed &quot;);<br>    }<br>}","like_count":1,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518277,"discussion_content":"selectå’Œpollæ˜¯è®©æ“ä½œç³»ç»Ÿåœ¨æœ‰I/Oå®é™…æ—¶å†ä»è°ƒç”¨ä¸­è¿”å›ï¼Œè€Œä¸”æœ¬è´¨ä¸Šselectå’Œpolléƒ½æ˜¯åœ¨ç­‰å¾…å¤šç§I/Oäº‹ä»¶ï¼Œå’Œå‰é¢æ¯æ¬¡è½®è¯¢å•ä¸ªI/Oäº‹ä»¶æ˜¯å¦å°±ç»ªï¼Œæœ‰å¤©å£¤ä¹‹åˆ«ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618139962,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":268904,"user_name":"Geek_8313015","can_delete":false,"product_type":"c1","uid":1482180,"ip_address":"","ucode":"19EE1CD90CA3EE","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIvcr7IX9NtayicPbkuRzW661kQwxiaFFV3zSRVzJV0siaHXFEryofa06W1gGL5gnVLVH8DhttHyMIxQ/132","comment_is_top":false,"comment_ctime":1608424974,"is_pvip":false,"replies":[{"id":"98870","content":"å†…æ ¸å¸®ä½ åšçš„è½®è¯¢ï¼Œå’Œå’±ä»¬åœ¨åº”ç”¨ç¨‹åºé‡Œé¢ä¸æ–­çš„é€šè¿‡ç³»ç»Ÿè°ƒç”¨æ‹¿åˆ°ç»“æœçš„è½®è¯¢ï¼Œä¸æ˜¯ä¸€å›äº‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1610285713,"ip_address":"","comment_id":268904,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5903392270","product_id":100032701,"comment_content":"è€å¸ˆï¼ŒIOå¤šè·¯å¤ç”¨ä¸ä¹Ÿæ˜¯è½®è®­ä¹ˆï¼Œå¹¶ä¸æ˜¯æ‰“ç”µè¯é€šçŸ¥æ¥å–ä¹¦ï¼Œè¿˜æœ‰IOå¤šè·¯å¤ç”¨ä¸æ˜¯è§£å†³å¤šè·¯å¤ç”¨é—®ä¹ˆï¼Œè·Ÿé˜»å¡éé˜»å¡æ²¡å•¥å…³ç³»å§","like_count":1,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":512075,"discussion_content":"å†…æ ¸å¸®ä½ åšçš„è½®è¯¢ï¼Œå’Œå’±ä»¬åœ¨åº”ç”¨ç¨‹åºé‡Œé¢ä¸æ–­çš„é€šè¿‡ç³»ç»Ÿè°ƒç”¨æ‹¿åˆ°ç»“æœçš„è½®è¯¢ï¼Œä¸æ˜¯ä¸€å›äº‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610285713,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":250885,"user_name":"kang","can_delete":false,"product_type":"c1","uid":1263025,"ip_address":"","ucode":"6796C8C5285E60","user_header":"https://static001.geekbang.org/account/avatar/00/13/45/b1/9f3b2b27.jpg","comment_is_top":false,"comment_ctime":1601271338,"is_pvip":false,"replies":[{"id":"92056","content":"å¥½æ£’ï¼ŒåŠ æ²¹~","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1601871315,"ip_address":"","comment_id":250885,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5896238634","product_id":100032701,"comment_content":"è¿™ä¸¤å¤©æ­£å¥½å¡åœ¨æ€ä¹ˆè·å–å®Œæˆå¯¹ç«¯æ•°æ®è¿™é‡Œï¼Œæˆ‘è‡ªå·±å®ç°äº†nreadå‡½æ•°ï¼Œä¿è¯åœ¨tcpåè®®ä¸‹å¯ä»¥å®Œæ•´è·å–æ•°æ®ã€‚ä½†æ˜¯ï¼Œç¬¬ä¸€æ¬¡è¯»å–å¯èƒ½æ— æ³•å…¨éƒ¨è¯»åˆ°ï¼Œä½†æ˜¯ç¬¬äºŒæ¬¡å†è¯»å–7æ˜¯ï¼Œä¼šåœ¨nreadä¸­é˜»å¡ä½ã€‚selectå¤±æ•ˆï¼Œçœ‹äº†éé˜»å¡+ç¼“å†²åŒºçš„è®¾è®¡ï¼Œè±ç„¶å¼€æœ—","like_count":1,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":506326,"discussion_content":"å¥½æ£’ï¼ŒåŠ æ²¹~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1601871315,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":244443,"user_name":"fedwing","can_delete":false,"product_type":"c1","uid":1743661,"ip_address":"","ucode":"2DFF902FD190C7","user_header":"https://static001.geekbang.org/account/avatar/00/1a/9b/2d/f7fca208.jpg","comment_is_top":false,"comment_ctime":1598519055,"is_pvip":false,"replies":[{"id":"90125","content":"å¦‚æœæœ‰æ–°çš„è¿æ¥ï¼Œacceptæ˜¯å¯ä»¥è¿”å›çš„ï¼›ä½†æ˜¯å¦‚æœä¸æ˜¯æ–°çš„è¿æ¥ï¼Œè€Œæ˜¯æœ‰æ•°æ®å¯è¯»ï¼Œæ˜¯æ²¡æœ‰åŠæ³•ä»acceptè¿”å›çš„ï¼Œè¿™æ ·å°±ä¸å¯ä»¥å¯¹å…¶ä»–I&#47;Oè¿›è¡ŒæœåŠ¡äº†ã€‚(åŸæ–‡è¡¨è¾¾çš„ç¨å¾®æœ‰ç‚¹é—®é¢˜ï¼Œç¨åä¿®æ­£ ï¼‰","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1598796155,"ip_address":"","comment_id":244443,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5893486351","product_id":100032701,"comment_content":"ç”±äºå®¢æˆ·ç«¯å‘ç”Ÿäº† RST åˆ†èŠ‚ï¼Œè¯¥è¿æ¥è¢«æ¥æ”¶ç«¯å†…æ ¸ä»è‡ªå·±çš„å·²å®Œæˆé˜Ÿåˆ—ä¸­åˆ é™¤äº†ï¼Œæ­¤æ—¶å†è°ƒç”¨ acceptï¼Œç”±äºæ²¡æœ‰å·²å®Œæˆè¿æ¥ï¼ˆå‡è®¾æ²¡æœ‰å…¶ä»–å·²å®Œæˆè¿æ¥ï¼‰ï¼Œaccept ä¸€ç›´é˜»å¡ï¼Œæ›´ä¸ºä¸¥é‡çš„æ˜¯ï¼Œè¯¥çº¿ç¨‹å†ä¹Ÿæ²¡æœ‰æœºä¼šå¯¹å…¶ä»– I&#47;O äº‹ä»¶è¿›è¡Œåˆ†å‘ï¼Œç›¸å½“äºè¯¥æœåŠ¡å™¨æ— æ³•å¯¹æ–°è¿æ¥å’Œå…¶ä»– I&#47;O è¿›è¡ŒæœåŠ¡ã€‚<br>è¯·é—®ä¸‹ï¼Œä¸ºä»€ä¹ˆè¯¥æœåŠ¡å™¨æ— æ³•å¯¹æ–°çš„è¿æ¥æœåŠ¡ï¼Œå¦‚æœè¿™ä¸ªå¥—æ¥å­—ï¼Œæ¥äº†æ–°çš„è¿æ¥ï¼Œæ˜¯ä¸æ˜¯acceptå‡½æ•°å°±å¯ä»¥è¿”å›æˆåŠŸäº†","like_count":1,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504581,"discussion_content":"å¦‚æœæœ‰æ–°çš„è¿æ¥ï¼Œacceptæ˜¯å¯ä»¥è¿”å›çš„ï¼›ä½†æ˜¯å¦‚æœä¸æ˜¯æ–°çš„è¿æ¥ï¼Œè€Œæ˜¯æœ‰æ•°æ®å¯è¯»ï¼Œæ˜¯æ²¡æœ‰åŠæ³•ä»acceptè¿”å›çš„ï¼Œè¿™æ ·å°±ä¸å¯ä»¥å¯¹å…¶ä»–I/Oè¿›è¡ŒæœåŠ¡äº†ã€‚(åŸæ–‡è¡¨è¾¾çš„ç¨å¾®æœ‰ç‚¹é—®é¢˜ï¼Œç¨åä¿®æ­£ ï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598796155,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":237807,"user_name":"puladiao","can_delete":false,"product_type":"c1","uid":1103345,"ip_address":"","ucode":"5F67E8F4091880","user_header":"https://static001.geekbang.org/account/avatar/00/10/d5/f1/efd8769e.jpg","comment_is_top":false,"comment_ctime":1595979370,"is_pvip":false,"replies":[{"id":"89338","content":"è¿™é‡Œè¯´çš„æ˜¯ä¸€ä¸ªéå¸¸æç«¯çš„åœºæ™¯ï¼Œå³åœ¨è¿›å…¥äº†ç›‘å¬å¥—æ¥å­—åˆ¤æ–­çš„ä»£ç åˆ†æ”¯ä¸‹ï¼ŒåŒæ—¶å®¢æˆ·ç«¯å‘ç”Ÿäº† RST åˆ†èŠ‚ï¼Œå¯¼è‡´æ¥ä¸‹æ¥çš„ä»£ç é˜»å¡åœ¨&quot;accept&quot;è°ƒç”¨ä¸‹ï¼Œæ³¨æ„è¿™é‡Œæ˜¯ä¸€ä¸ªå•çº¿ç¨‹ç¨‹åºï¼Œæ²¡æœ‰åŠæ³•å¯¹å…¶ä»–I&#47;Oäº‹ä»¶è¿›è¡ŒæœåŠ¡ã€‚ä¸è¿‡ï¼Œæ˜¯å¯ä»¥å¯¹&quot;å…¶ä»–çš„æ–°è¿æ¥&quot;è¿›è¡ŒæœåŠ¡çš„ã€‚è¿™é‡Œè¿˜æ˜¯éœ€è¦æè¿°å¾—æ›´ä¸ºæ¸…æ™°ä¸€ç‚¹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1597585092,"ip_address":"","comment_id":237807,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5890946666","product_id":100032701,"comment_content":"accept ä¸€ç›´é˜»å¡ï¼Œæ›´ä¸ºä¸¥é‡çš„æ˜¯ï¼Œè¯¥çº¿ç¨‹å†ä¹Ÿæ²¡æœ‰æœºä¼šå¯¹å…¶ä»– I&#47;O äº‹ä»¶è¿›è¡Œåˆ†å‘ï¼Œç›¸å½“äºè¯¥æœåŠ¡å™¨æ— æ³•å¯¹æ–°è¿æ¥å’Œå…¶ä»– I&#47;O è¿›è¡ŒæœåŠ¡ã€‚<br><br>è¿™ä¸€æ®µæœ‰ç‚¹æ²¡æ˜ç™½ã€‚acceptå‡½æ•°åœ¨é˜»å¡æ¨¡å¼ä¸‹ï¼Œåº”è¯¥æ˜¯ä¸€ç›´ç­‰å¾…ä¸‹ä¸€ä¸ªå¯ä»¥acceptçš„è¿æ¥ã€‚ä¸ºä»€ä¹ˆæ–‡ä¸­è¯´â€œæ— æ³•å¯¹æ–°è¿æ¥è¿›è¡ŒæœåŠ¡â€å‘¢ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":502549,"discussion_content":"è¿™é‡Œè¯´çš„æ˜¯ä¸€ä¸ªéå¸¸æç«¯çš„åœºæ™¯ï¼Œå³åœ¨è¿›å…¥äº†ç›‘å¬å¥—æ¥å­—åˆ¤æ–­çš„ä»£ç åˆ†æ”¯ä¸‹ï¼ŒåŒæ—¶å®¢æˆ·ç«¯å‘ç”Ÿäº† RST åˆ†èŠ‚ï¼Œå¯¼è‡´æ¥ä¸‹æ¥çš„ä»£ç é˜»å¡åœ¨&amp;quot;accept&amp;quot;è°ƒç”¨ä¸‹ï¼Œæ³¨æ„è¿™é‡Œæ˜¯ä¸€ä¸ªå•çº¿ç¨‹ç¨‹åºï¼Œæ²¡æœ‰åŠæ³•å¯¹å…¶ä»–I/Oäº‹ä»¶è¿›è¡ŒæœåŠ¡ã€‚ä¸è¿‡ï¼Œæ˜¯å¯ä»¥å¯¹&amp;quot;å…¶ä»–çš„æ–°è¿æ¥&amp;quot;è¿›è¡ŒæœåŠ¡çš„ã€‚è¿™é‡Œè¿˜æ˜¯éœ€è¦æè¿°å¾—æ›´ä¸ºæ¸…æ™°ä¸€ç‚¹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597585092,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":228021,"user_name":"äº‘æ·¡é£è½»","can_delete":false,"product_type":"c1","uid":1121817,"ip_address":"","ucode":"D6903A0FCEBC58","user_header":"https://static001.geekbang.org/account/avatar/00/11/1e/19/a235f31d.jpg","comment_is_top":false,"comment_ctime":1592537132,"is_pvip":false,"replies":[{"id":"84282","content":"æ˜¯çš„ï¼Œæˆ‘æŠ½ç©ºæ”¹ä¸‹ä»£ç ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1592744553,"ip_address":"","comment_id":228021,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5887504428","product_id":100032701,"comment_content":"æ€è€ƒé¢˜ä¸€ï¼Œ133è¡Œçš„åˆ¤æ–­æ˜¯ä¸ªbugå§ï¼Œå¦‚æœfd = FD_INIT_SIZE ï¼Œèµ°buffer çš„åˆ†æ”¯ï¼Œæ•°ç»„å°±è¶Šä½äº†ï¼Œæ‰€ä»¥åˆ¤æ–­åº”è¯¥æ˜¯ fd &gt;= FD_INIT_SIZEã€‚","like_count":1,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":498892,"discussion_content":"æ˜¯çš„ï¼Œæˆ‘æŠ½ç©ºæ”¹ä¸‹ä»£ç ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592744553,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":219209,"user_name":"rongyefeng","can_delete":false,"product_type":"c1","uid":1959482,"ip_address":"","ucode":"9A15D947E9D645","user_header":"https://static001.geekbang.org/account/avatar/00/1d/e6/3a/382cf024.jpg","comment_is_top":false,"comment_ctime":1589966701,"is_pvip":false,"replies":[{"id":"80983","content":"è¿™ä¸€æ®µç¡®å®æ˜¯å¾ˆéš¾è·‘åˆ°ï¼Œä»…ä»…åšä¸ºä¸€ä¸ªå¼‚å¸¸æ¡ä»¶å§ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1589977640,"ip_address":"","comment_id":219209,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5884933997","product_id":100032701,"comment_content":"è¯·é—®è€å¸ˆï¼Œ <br>make_nonblocking(fd);   <br>if (buffer[fd]-&gt;connect_fd == 0)   <br> {   <br>      buffer[fd]-&gt;connect_fd = fd;   <br>}   else {     <br>     error(1, 0, &quot;too many connections&quot;);   <br>}<br>è¿™é‡Œçš„&quot;too many connections&quot;ä¼šåœ¨ä»€ä¹ˆæƒ…å†µä¸‹å‡ºç°å‘¢ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":495718,"discussion_content":"è¿™ä¸€æ®µç¡®å®æ˜¯å¾ˆéš¾è·‘åˆ°ï¼Œä»…ä»…åšä¸ºä¸€ä¸ªå¼‚å¸¸æ¡ä»¶å§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589977640,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":197721,"user_name":"linker","can_delete":false,"product_type":"c1","uid":1803259,"ip_address":"","ucode":"6C5799F2FC2C82","user_header":"https://static001.geekbang.org/account/avatar/00/1b/83/fb/621adceb.jpg","comment_is_top":false,"comment_ctime":1585394903,"is_pvip":false,"replies":[{"id":"74758","content":"å›å¤é‡Œæœ‰ç­”çš„å¾ˆå¥½çš„ï¼Œçœ‹å›å¤ä¹Ÿæ˜¯å­¦ä¹ å“¦ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1585484717,"ip_address":"","comment_id":197721,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5880362199","product_id":100032701,"comment_content":"ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œåˆ¤æ–­æœ€å¤šæ”¾å¤šå°‘socker çš„æè¿°ç¬¦ï¼Œå¯ä»¥æ”¹ä¸ºåŠ¨æ€æ•°ç»„<br>ç¬¬äºŒä¸ªé—®é¢˜ï¼Œä¸ç†è§£ï¼Œæ˜¯ä¸æ˜¯å¯ä»¥è®¤ä¸ºèŠ‚çœç©ºé—´ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":489587,"discussion_content":"å›å¤é‡Œæœ‰ç­”çš„å¾ˆå¥½çš„ï¼Œçœ‹å›å¤ä¹Ÿæ˜¯å­¦ä¹ å“¦ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585484717,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1803259,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/83/fb/621adceb.jpg","nickname":"linker","note":"","ucode":"6C5799F2FC2C82","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":216771,"discussion_content":"å¥½çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585484920,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":183245,"user_name":"Tesla","can_delete":false,"product_type":"c1","uid":1500742,"ip_address":"","ucode":"98629AFD9861EE","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKUcSLVV6ia3dibe7qvTu8Vic1PVs2EibxoUdx930MC7j2Q9A6s4eibMDZlcicMFY0D0icd3RrDorMChu0zw/132","comment_is_top":false,"comment_ctime":1582981613,"is_pvip":false,"replies":[{"id":"71023","content":"è¿™ä¸ªè”æƒ³å€’æ˜¯éå¸¸çš„æ¸…å¥‡ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1583051536,"ip_address":"","comment_id":183245,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5877948909","product_id":100032701,"comment_content":"æ–‡ä¸­select+é˜»å¡IOçš„æ¨¡å‹é€ æˆçš„acceptä¸€ç›´é˜»å¡çš„ç°è±¡ï¼Œå¾ˆåƒå•ä¾‹æ¨¡å¼ä¸­éœ€è¦åˆ¤æ–­ä¸¤æ¬¡instance == nullçš„æƒ…æ™¯ã€‚","like_count":1,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":485615,"discussion_content":"è¿™ä¸ªè”æƒ³å€’æ˜¯éå¸¸çš„æ¸…å¥‡ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583051536,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":141892,"user_name":"JasonZhi","can_delete":false,"product_type":"c1","uid":1282818,"ip_address":"","ucode":"6C23DCD592636D","user_header":"https://static001.geekbang.org/account/avatar/00/13/93/02/fcab58d1.jpg","comment_is_top":false,"comment_ctime":1571245940,"is_pvip":true,"replies":[{"id":"55114","content":"ä½ æ˜¯å¯¹çš„ï¼Œæˆ‘å·²ç»ä¿®æ­£ä»£ç ï¼Œç­‰å¾…ç¼–è¾‘æ›´æ–°ï¼Œæ„Ÿè°¢æŒ‡æ­£ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1571456259,"ip_address":"","comment_id":141892,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5866213236","product_id":100032701,"comment_content":"ç¬¬ä¸€æ®µä»£ç çš„æ³¨é‡Šæ˜¯å¦æœ‰è¯¯ï¼ŸEINTRåº”è¯¥å±äºä¸­æ–­å¯¼è‡´çš„é”™è¯¯ï¼Œå¦‚ï¼šä¿¡å·ä¸­æ–­ï¼Œå¦‚æœæ˜¯éé˜»å¡æ²¡æœ‰æ•°æ®å¯è¯»çš„æƒ…å†µä¸‹ï¼Œåº”è¯¥è¿”å›é”™è¯¯EAGAIN","like_count":1,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470928,"discussion_content":"ä½ æ˜¯å¯¹çš„ï¼Œæˆ‘å·²ç»ä¿®æ­£ä»£ç ï¼Œç­‰å¾…ç¼–è¾‘æ›´æ–°ï¼Œæ„Ÿè°¢æŒ‡æ­£ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571456259,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":139881,"user_name":"Geek_d4f974","can_delete":false,"product_type":"c1","uid":1591783,"ip_address":"","ucode":"F91D0CD09CB13E","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/NTSD503ibERiba4wcsoiaezDrjLMOVVlAlliagHc6ic3icWFfuzaFWaHwuULQDo22mPiabicImFTB7ial82OuBD96bl4RTQ/132","comment_is_top":false,"comment_ctime":1570759836,"is_pvip":false,"replies":[{"id":"55071","content":"è¿˜å¥½å§ï¼Œè¿™é‡Œä¸»è¦æ˜¯è¯´éé˜»å¡I&#47;Oçš„å«ä¹‰ï¼Œä»¥åŠå¯¹æˆ‘ä»¬ç¼–å†™ç¨‹åºçš„å¸®åŠ©ï¼Œå¤šè¯»ä¸€ä¸‹ï¼Œåº”è¯¥å¯ä»¥æå®šçš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1571451067,"ip_address":"","comment_id":139881,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5865727132","product_id":100032701,"comment_content":"è¿™ç« çœŸçš„æ™¦æ¶©éš¾æ‡‚å•Š","like_count":1,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470155,"discussion_content":"è¿˜å¥½å§ï¼Œè¿™é‡Œä¸»è¦æ˜¯è¯´éé˜»å¡I/Oçš„å«ä¹‰ï¼Œä»¥åŠå¯¹æˆ‘ä»¬ç¼–å†™ç¨‹åºçš„å¸®åŠ©ï¼Œå¤šè¯»ä¸€ä¸‹ï¼Œåº”è¯¥å¯ä»¥æå®šçš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571451067,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":137473,"user_name":"åˆ˜ç«‹ä¼Ÿ","can_delete":false,"product_type":"c1","uid":1337037,"ip_address":"","ucode":"620ED44DDFCC6F","user_header":"https://static001.geekbang.org/account/avatar/00/14/66/cd/eb469d2e.jpg","comment_is_top":false,"comment_ctime":1569749213,"is_pvip":false,"replies":[{"id":"53859","content":"æˆ‘æ˜¯ubuntu 16.04 LTSç‰ˆæœ¬ï¼Œé»˜è®¤çš„pthreadå°±å¯ä»¥æ”¯æŒäº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1570697343,"ip_address":"","comment_id":137473,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5864716509","product_id":100032701,"comment_content":"ubuntu18.04ç¯å¢ƒä¸‹ç¼–è¯‘æ•´ä¸ªå·¥ç¨‹å¤±è´¥ï¼æç¤ºå¦‚ä¸‹<br>CMakeFiles&#47;aio01.dir&#47;aio01.c.o: In function `main&#39;:<br>aio01.c:(.text+0x19b): undefined reference to `aio_write&#39;<br>aio01.c:(.text+0x1f4): undefined reference to `aio_error&#39;<br>aio01.c:(.text+0x208): undefined reference to `aio_error&#39;<br>aio01.c:(.text+0x21d): undefined reference to `aio_return&#39;<br>aio01.c:(.text+0x329): undefined reference to `aio_read&#39;<br>aio01.c:(.text+0x379): undefined reference to `aio_error&#39;<br>aio01.c:(.text+0x38d): undefined reference to `aio_return&#39;<br>collect2: error: ld returned 1 exit status<br>chap-30&#47;CMakeFiles&#47;aio01.dir&#47;build.make:95: recipe for target &#39;bin&#47;aio01&#39; failed<br><br>éœ€è¦åœ¨åœ¨chapter-30 ä¸‹çš„CMakeList.txt ä¸­çš„target_link_librariesã€€å¢åŠ  rt","like_count":1,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":469114,"discussion_content":"æˆ‘æ˜¯ubuntu 16.04 LTSç‰ˆæœ¬ï¼Œé»˜è®¤çš„pthreadå°±å¯ä»¥æ”¯æŒäº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570697343,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2889984,"avatar":"","nickname":"Geek_da4d45","note":"","ucode":"B6094DE0FBCD5D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":545189,"discussion_content":"æ€ä¹ˆåŠ çš„å•Šï¼Ÿæˆ‘ä¹Ÿé‡åˆ°äº†è¿™ä¸ªé—®é¢˜ï¼Œä¸çŸ¥é“æ€ä¹ˆä¿®æ”¹å•Š : (","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641871329,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":137144,"user_name":"çŸ³å°†ä»","can_delete":false,"product_type":"c1","uid":1375617,"ip_address":"","ucode":"12F43E643D1D58","user_header":"https://static001.geekbang.org/account/avatar/00/14/fd/81/1864f266.jpg","comment_is_top":false,"comment_ctime":1569635336,"is_pvip":false,"replies":[{"id":"52779","content":"å¥½çš„ï¼Œæˆ‘åœ¨githubä¸Šçš„æäº¤å¤šåŠ ä¸€äº›æ³¨é‡Šã€‚<br><br>https:&#47;&#47;github.com&#47;froghui&#47;yolanda","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1569723851,"ip_address":"","comment_id":137144,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5864602632","product_id":100032701,"comment_content":"è€å¸ˆä»£ç èƒ½ä¸èƒ½å†™å¤šç‚¹æ³¨é‡Šå‘€ï¼ŸåŸºç¡€å·®çš„åŒå­¦çœ‹å¾—è´¹åŠ²","like_count":1,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468957,"discussion_content":"å¥½çš„ï¼Œæˆ‘åœ¨githubä¸Šçš„æäº¤å¤šåŠ ä¸€äº›æ³¨é‡Šã€‚\n\nhttps://github.com/froghui/yolanda","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569723851,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1231713,"avatar":"https://static001.geekbang.org/account/avatar/00/12/cb/61/b62d8a3b.jpg","nickname":"å¼ ç«‹å","note":"","ucode":"173B938DD9478A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":22847,"discussion_content":"https://github.com/froghui/yolanda/","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569714524,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":360984,"user_name":"Geek_1696dd","can_delete":false,"product_type":"c1","uid":2948566,"ip_address":"æ±Ÿè‹","ucode":"DEC1F02116F5F5","user_header":"","comment_is_top":false,"comment_ctime":1667056694,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1667056694","product_id":100032701,"comment_content":"è€å¸ˆè¿™ä¸ªç¨‹åºå’ŒUNPé‚£ä¸ªéé˜»å¡IO+selectå¤šè·¯å¤ç”¨æ€æƒ³ç±»ä¼¼çš„å§","like_count":0},{"had_liked":false,"id":360893,"user_name":"æ›¾æ³½æµ©","can_delete":false,"product_type":"c1","uid":1104601,"ip_address":"å¹¿ä¸œ","ucode":"A7E5CF9E1571A2","user_header":"https://static001.geekbang.org/account/avatar/00/10/da/d9/f051962f.jpg","comment_is_top":false,"comment_ctime":1666946447,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1666946447","product_id":100032701,"comment_content":"æˆ‘æ¯”è¾ƒç–‘æƒ‘ï¼Œselectæœ¬èº«å°±æ˜¯é˜»å¡çš„å§ï¼Œé‚£selectè¿”å›ç»“æœè¯´æ˜å¯ä»¥read()ï¼Œé‚£ä¸ºä»€ä¹ˆè¿˜éœ€è¦ç”¨éé˜»å¡çš„IOå‘¢","like_count":0},{"had_liked":false,"id":339543,"user_name":"èœé¸¡äº’å•„","can_delete":false,"product_type":"c1","uid":2765079,"ip_address":"","ucode":"59162B81398399","user_header":"https://static001.geekbang.org/account/avatar/00/2a/31/17/ab2c27a6.jpg","comment_is_top":false,"comment_ctime":1648178625,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1648178625","product_id":100032701,"comment_content":"æ‰“å¡ æ¸©æ•…çŸ¥æ–° æ¯æ¬¡çœ‹éƒ½æœ‰æ”¶è´§ã€‚","like_count":0},{"had_liked":false,"id":339095,"user_name":"Info_E","can_delete":false,"product_type":"c1","uid":1755152,"ip_address":"","ucode":"97207B2CC4C776","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/VTPuhJb5xxuRwH1iblqrAe3De4PoETgNWibZRkLlhvszysdtpAvSPZFuYtsJfWJmoXOFFWnpR02W9NGIiammU8UPg/132","comment_is_top":false,"comment_ctime":1647915755,"is_pvip":false,"replies":[{"id":"124143","content":"æœ¬æ¥selectè°ƒç”¨ä¹Ÿä¸€ç›´æ˜¯ç­‰å¾…äº‹ä»¶è¿”å›çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1618647","ctime":1648297763,"ip_address":"","comment_id":339095,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1647915755","product_id":100032701,"comment_content":"select å‡½æ•°ä»£ç é‡Œè®¾ç½®çš„æ˜¯é˜»å¡å¼çš„ï¼Œæ²¡æœ‰fdäº‹ä»¶å°±ä¸ä¼šè¿”å›ï¼Œ121è¡Œæ˜¯ä¸æ˜¯å°±ä¸€ç›´é˜»å¡äº†ã€‚<br>","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":558434,"discussion_content":"æœ¬æ¥selectè°ƒç”¨ä¹Ÿä¸€ç›´æ˜¯ç­‰å¾…äº‹ä»¶è¿”å›çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1648297763,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":324363,"user_name":"Luke","can_delete":false,"product_type":"c1","uid":2012725,"ip_address":"","ucode":"B68B6D2519D924","user_header":"https://static001.geekbang.org/account/avatar/00/1e/b6/35/f6622b4f.jpg","comment_is_top":false,"comment_ctime":1638406449,"is_pvip":false,"replies":[{"id":"117836","content":"å¼€ä¸€ä¸ªbyteæ•°ç»„ï¼ŒæŠŠreadå¾—åˆ°çš„æ•°æ®è£…è¿›å»ã€‚åé¢è¯¥è§£æçš„è§£æã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1618647","ctime":1638691666,"ip_address":"","comment_id":324363,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1638406449","product_id":100032701,"comment_content":"è€å¸ˆæˆ‘æœ‰ä¸ªç–‘é—®ã€‚åœ¨éé˜»å¡æ¨¡å¼ä¸‹ï¼Œå¦‚æœæ¥å—ç¼“å†²åŒºæœ‰æ•°æ®ï¼Œè°ƒç”¨readä¼šç«‹å³è¿”å›ï¼Œé‚£ä¹ˆè¿”å›äº†åº”ç”¨ç¨‹åºæ€ä¹ˆè¯»æ•°æ®å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":536110,"discussion_content":"å¼€ä¸€ä¸ªbyteæ•°ç»„ï¼ŒæŠŠreadå¾—åˆ°çš„æ•°æ®è£…è¿›å»ã€‚åé¢è¯¥è§£æçš„è§£æã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638691666,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":323716,"user_name":"geek","can_delete":false,"product_type":"c1","uid":2401422,"ip_address":"","ucode":"FF0845140D72A9","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/NyFOEueITjaGLpakMEuWAqVQjo1uDIXlpDdpCxXGfaWiaXzibLQ3WgOFCe8D9FvCmyjsGT7jDsLUbkt8jt2aVs9g/132","comment_is_top":false,"comment_ctime":1638110641,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1638110641","product_id":100032701,"comment_content":"ç¬¬ä¸€ä¸ªé—®é¢˜ï¼šè¯´æ˜ç¨‹åºçš„å¹¶å‘è¶…è¿‡äº†ä¹‹å‰çš„é¢„ä¼°å€¼ï¼Œå¯ä»¥ä½¿ç”¨åŠ¨æ€åˆ†é…Buffer çš„æ–¹å¼æé«˜å¹¶å‘ã€‚<br>ç¬¬äºŒä¸ªé—®é¢˜ï¼šæ­¤å¤„ç¨‹åºåŠŸèƒ½ç±»ä¼¼echoï¼ŒæŠŠæ”¶åˆ°çš„æ•°æ®é€å­—èŠ‚çš„å›ç»™å®¢æˆ·ç«¯ã€‚æ‰€ä»¥åŒä¸€ä¸ªå®¢æˆ·ç«¯çš„è¯»å†™ç”¨äº†ä¸€ä¸ªBufferã€‚","like_count":0},{"had_liked":false,"id":322615,"user_name":"huadanian","can_delete":false,"product_type":"c1","uid":1014061,"ip_address":"","ucode":"A986E1DB777428","user_header":"https://static001.geekbang.org/account/avatar/00/0f/79/2d/dbb5570f.jpg","comment_is_top":false,"comment_ctime":1637501029,"is_pvip":false,"replies":[{"id":"117472","content":"onSocketReadæ­£ç¡®è¿”å›ï¼Œæ²¡æœ‰å‡ºé”™ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1618647","ctime":1638089063,"ip_address":"","comment_id":322615,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1637501029","product_id":100032701,"comment_content":"è¯·é—®è€å¸ˆï¼Œç¬¬154è¡Œçš„r==0çš„åˆ¤æ–­æ¡ä»¶çš„åŸå› æ˜¯ä»€ä¹ˆï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":534079,"discussion_content":"onSocketReadæ­£ç¡®è¿”å›ï¼Œæ²¡æœ‰å‡ºé”™ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638089063,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":319400,"user_name":"Geek_70e534","can_delete":false,"product_type":"c1","uid":2826984,"ip_address":"","ucode":"10F17256E5E396","user_header":"","comment_is_top":false,"comment_ctime":1635777814,"is_pvip":false,"replies":[{"id":"116133","content":"æœ‹å‹ï¼Œä½ è§‰å¾—æ€ä¹ˆè§£é‡Šè¿™ä»¶äº‹æƒ…æ¯”è¾ƒå®¹æ˜“ç†è§£å‘¢ï¼Ÿ<br>å› ä¸ºæ›´å¤šçš„æ˜¯ç†è§£è¿™ä¸¤ç§ç¼–ç¨‹æ¨¡å¼çš„å·®å¼‚ï¼Œä¸¾ä¾‹å­æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¥½çš„æ–¹å¼ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1636272277,"ip_address":"","comment_id":319400,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1635777814","product_id":100032701,"comment_content":"æ„Ÿè§‰è¿™ä¸ªä¾‹å­æŒºè¿·çš„ï¼Œä¸»è¦æ˜¯å®éªŒç»“æœéƒ½æ²¡æœ‰å¯¹æ¯”ï¼Œç»™ä¸ªç»“æœå°±å®Œäº‹äº†ï¼Œå®Œå…¨çœ‹ä¸å‡ºé˜»å¡å’Œéé˜»å¡çš„åŒºåˆ«ã€‚","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529622,"discussion_content":"æœ‹å‹ï¼Œä½ è§‰å¾—æ€ä¹ˆè§£é‡Šè¿™ä»¶äº‹æƒ…æ¯”è¾ƒå®¹æ˜“ç†è§£å‘¢ï¼Ÿ\nå› ä¸ºæ›´å¤šçš„æ˜¯ç†è§£è¿™ä¸¤ç§ç¼–ç¨‹æ¨¡å¼çš„å·®å¼‚ï¼Œä¸¾ä¾‹å­æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¥½çš„æ–¹å¼ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636272277,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":305871,"user_name":"ç†ŠçŒ«","can_delete":false,"product_type":"c1","uid":1080238,"ip_address":"","ucode":"23C85117A16BEF","user_header":"https://static001.geekbang.org/account/avatar/00/10/7b/ae/66ae403d.jpg","comment_is_top":false,"comment_ctime":1628215226,"is_pvip":false,"replies":[{"id":"111679","content":"è¿™é‡Œå±•ç¤ºçš„æ˜¯å¤šè·¯å¤ç”¨éé˜»å¡æƒ…å†µï¼Œæ ¹æ®å¥—æ¥å­—çš„çŠ¶å†µå†å†³å®šåé¢çš„åŠ¨ä½œï¼ŒåŸæ–‡é‡Œæ˜¯ç›‘å¬å¥—æ¥å­—æœ‰äº‹ä»¶å‘ç”Ÿï¼Œæ‰€ä»¥å¯¹æ­¤è¿›è¡Œæ“ä½œï¼Œå³è°ƒç”¨acceptè¿›è¡Œå¤„ç†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1629636871,"ip_address":"","comment_id":305871,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1628215226","product_id":100032701,"comment_content":"è¿™é‡Œçš„ä¼‘çœ æ—¶é—´éå¸¸å…³é”®ï¼Œè¿™æ ·ï¼Œåœ¨ç›‘å¬å¥—æ¥å­—ä¸Šæœ‰å¯è¯»äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œå¹¶æ²¡æœ‰é©¬ä¸Šè°ƒç”¨ accept---ç››è€å¸ˆï¼Œæˆ‘ä»¬ä¸æ˜¯å…ˆacceptï¼Œå†è¯»æ•°æ®å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":524544,"discussion_content":"è¿™é‡Œå±•ç¤ºçš„æ˜¯å¤šè·¯å¤ç”¨éé˜»å¡æƒ…å†µï¼Œæ ¹æ®å¥—æ¥å­—çš„çŠ¶å†µå†å†³å®šåé¢çš„åŠ¨ä½œï¼ŒåŸæ–‡é‡Œæ˜¯ç›‘å¬å¥—æ¥å­—æœ‰äº‹ä»¶å‘ç”Ÿï¼Œæ‰€ä»¥å¯¹æ­¤è¿›è¡Œæ“ä½œï¼Œå³è°ƒç”¨acceptè¿›è¡Œå¤„ç†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629636871,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1080238,"avatar":"https://static001.geekbang.org/account/avatar/00/10/7b/ae/66ae403d.jpg","nickname":"ç†ŠçŒ«","note":"","ucode":"23C85117A16BEF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":390071,"discussion_content":"è°¢è°¢ç››è€å¸ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629641471,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":289366,"user_name":"Geek5198","can_delete":false,"product_type":"c1","uid":2028945,"ip_address":"","ucode":"2BEBE6A39D9A0E","user_header":"","comment_is_top":false,"comment_ctime":1618989740,"is_pvip":false,"replies":[{"id":"105519","content":"ä¸æ˜¯å®Œå…¨ä¸€æ ·ï¼Œselectè®¾ç½®æˆ0çš„ç”¨æ³•æ˜¯æ¯”è¾ƒå°‘ç”¨çš„ï¼Œä¸è¿‡ä»ä½œç”¨åŸç†ä¸Šç¡®å®æ˜¯è¦åº”ç”¨ç¨‹åºè‡ªå·±è½®è¯¢äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1620223564,"ip_address":"","comment_id":289366,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1618989740","product_id":100032701,"comment_content":"è€å¸ˆï¼Œæœ‰ä¸ªé—®é¢˜ä¸æ˜ç™½ï¼Œå¦‚æœéé˜»å¡IOä¸ä½¿ç”¨selectçš„è¯ï¼Œé‚£å°±æ˜¯åº”ç”¨ç¨‹åºè‡ªå·±è½®è¯¢ï¼Œä½¿ç”¨selectçš„è¯ï¼Œåº”ç”¨ç¨‹åºç­‰å¾…selectè¿”å›ï¼Œå¦‚æœè¯´æŠŠselectçš„å‚æ•°timeoutè®¾ç½®æˆ0çš„è¯ï¼Œæ˜¯ä¸æ˜¯å’Œåº”ç”¨ç¨‹åºè‡ªå·±è½®è¯¢æ•ˆæœä¸€æ ·äº†ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518894,"discussion_content":"ä¸æ˜¯å®Œå…¨ä¸€æ ·ï¼Œselectè®¾ç½®æˆ0çš„ç”¨æ³•æ˜¯æ¯”è¾ƒå°‘ç”¨çš„ï¼Œä¸è¿‡ä»ä½œç”¨åŸç†ä¸Šç¡®å®æ˜¯è¦åº”ç”¨ç¨‹åºè‡ªå·±è½®è¯¢äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620223564,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":287577,"user_name":"null","can_delete":false,"product_type":"c1","uid":1024294,"ip_address":"","ucode":"F9039EFED6B55D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaELZPnUAiajaR5C25EDLWeJURggyiaOP5GGPe2qlwpQcm5e3ybib8OsP4tvddFDLVRSNNGL5I3SFPJHsA/132","comment_is_top":false,"comment_ctime":1618036881,"is_pvip":false,"replies":[{"id":"104491","content":"ä¸ä¸€å®šå•Šï¼Œå¦‚æœæˆ‘å¼€äº†ä¸€ä¸ªæ¯”è¾ƒå¤§çš„ç¼“å†²ï¼Œä¸€æ¬¡æ€§è¯»å–å¾ˆå¤šbyteï¼Œè¿™æ ·å°±ä¸ä¼šé¢‘é¢‘çš„ç³»ç»Ÿè°ƒç”¨äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1618140192,"ip_address":"","comment_id":287577,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1618036881","product_id":100032701,"comment_content":"è€å¸ˆï¼Œè¯·é—®ä¸€ä¸‹ï¼Œæ€ä¹ˆç†è§£æ‚¨å›å¤ HerofH ä¸­çš„ã€Œå‡å°‘ç³»ç»Ÿè°ƒç”¨çš„æ¬¡æ•°ã€ã€‚<br>è¿™ä¸ªç³»ç»Ÿåº•å±‚è°ƒç”¨æ¬¡æ•°èƒ½å‡å°‘ä¹ˆï¼Ÿ<br>å‡è®¾æœ¬æ¥éœ€è¦è°ƒç”¨ 10 æ¬¡ readï¼Œå³ä½¿æ–°å¢ buffer ä¹‹åï¼Œä¹Ÿè¿˜æ˜¯éœ€è¦è°ƒç”¨ 10 æ¬¡ read çš„å§ï¼Ÿ<br>ä½†æ˜¯å¯ä»¥å‡å°‘ write å‡½æ•°çš„è°ƒç”¨æ¬¡æ•°ã€‚<br>è°¢è°¢","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518353,"discussion_content":"ä¸ä¸€å®šå•Šï¼Œå¦‚æœæˆ‘å¼€äº†ä¸€ä¸ªæ¯”è¾ƒå¤§çš„ç¼“å†²ï¼Œä¸€æ¬¡æ€§è¯»å–å¾ˆå¤šbyteï¼Œè¿™æ ·å°±ä¸ä¼šé¢‘é¢‘çš„ç³»ç»Ÿè°ƒç”¨äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618140192,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":283897,"user_name":"ğŸ—Jinx","can_delete":false,"product_type":"c1","uid":1711790,"ip_address":"","ucode":"B5C084F54BF66A","user_header":"https://static001.geekbang.org/account/avatar/00/1a/1e/ae/a6d5e24a.jpg","comment_is_top":false,"comment_ctime":1615976356,"is_pvip":false,"replies":[{"id":"103191","content":"å…¶å®bufferé‡Œé¢æœ‰è¶³å¤Ÿçš„ç©ºé—´æ”¾ç½®æ•°æ®ï¼Œä¸€èˆ¬æƒ…å†µä¸‹é€šè¿‡å¾€bufferé‡Œå­˜è¯»å–çš„æ•°æ®ï¼Œä¹‹åé©¬ä¸Šæ¶ˆè´¹æ‰è¿™éƒ¨åˆ†è¯»å–çš„æ•°æ®ï¼Œå†å¾€bufferé‡Œå­˜æ”¾å³å°†å‘é€çš„æ•°æ®ï¼Œè¿™æ ·å¾€è¿”ï¼Œå®é™…ä¸Šä¸€ä¸ªbufferå¯¹è±¡å°±å·²ç»å¤Ÿç”¨äº†ã€‚bufferå¯¹è±¡é‡Œä¿å­˜äº†æŒ‡é’ˆå‘Šè¯‰æˆ‘ä»¬è¯»ã€å†™çš„ä½ç½®ï¼Œæ‰€ä»¥ä¸ä¼šæ··çš„ã€‚<br><br>åé¢çš„ç« èŠ‚é‡Œä¼šå¯¹bufferçš„è®¾è®¡å±•å¼€è®¨è®ºï¼Œä½ å¯ä»¥è€ç€æ€§å­å¾€ä¸‹è¯»ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1616314670,"ip_address":"","comment_id":283897,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1615976356","product_id":100032701,"comment_content":"è€å¸ˆï¼Œæˆ‘å§‹ç»ˆä¸æ˜¯å¾ˆæ˜ç™½ä¸ºä»€ä¹ˆæ¯ä¸ªé“¾æ¥ï¼Œä¹Ÿå°±æ˜¯æ¯ä¸ª client_fd åªéœ€è¦ç»´æŠ¤ä¸€ä¸ª bufferï¼ŸæœåŠ¡ç«¯åº”è¯¥ä¸ºæ¯ä¸ªé“¾æ¥ç»´æŠ¤ä¸¤ä¸ª bufferå•Šï¼Œä¸€ä¸ªæ˜¯ input bufferï¼Œä¹Ÿå°±æ˜¯ç”¨äºæ¥æ”¶å®¢æˆ·ç«¯æ•°æ®ï¼›å¦ä¸€ä¸ªæ˜¯ output bufferï¼Œç”¨äºå‚¨å­˜å›å¤å®¢æˆ·ç«¯çš„æ•°æ®ã€‚<br><br>å¦‚æœæ¯ä¸ªé“¾æ¥åªæœ‰ä¸€ä¸ª buffer çš„è¯ï¼Œå²‚ä¸æ˜¯ï¼Œæ¥æ”¶çš„æ•°æ®è·Ÿè¦å‘é€çš„æ•°æ®éƒ½æ··åœ¨ä¸€èµ·äº†ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":517174,"discussion_content":"å…¶å®bufferé‡Œé¢æœ‰è¶³å¤Ÿçš„ç©ºé—´æ”¾ç½®æ•°æ®ï¼Œä¸€èˆ¬æƒ…å†µä¸‹é€šè¿‡å¾€bufferé‡Œå­˜è¯»å–çš„æ•°æ®ï¼Œä¹‹åé©¬ä¸Šæ¶ˆè´¹æ‰è¿™éƒ¨åˆ†è¯»å–çš„æ•°æ®ï¼Œå†å¾€bufferé‡Œå­˜æ”¾å³å°†å‘é€çš„æ•°æ®ï¼Œè¿™æ ·å¾€è¿”ï¼Œå®é™…ä¸Šä¸€ä¸ªbufferå¯¹è±¡å°±å·²ç»å¤Ÿç”¨äº†ã€‚bufferå¯¹è±¡é‡Œä¿å­˜äº†æŒ‡é’ˆå‘Šè¯‰æˆ‘ä»¬è¯»ã€å†™çš„ä½ç½®ï¼Œæ‰€ä»¥ä¸ä¼šæ··çš„ã€‚\n\nåé¢çš„ç« èŠ‚é‡Œä¼šå¯¹bufferçš„è®¾è®¡å±•å¼€è®¨è®ºï¼Œä½ å¯ä»¥è€ç€æ€§å­å¾€ä¸‹è¯»ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616314670,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":256877,"user_name":"doge","can_delete":false,"product_type":"c1","uid":1593251,"ip_address":"","ucode":"9E2D4C8F9B4CBC","user_header":"https://static001.geekbang.org/account/avatar/00/18/4f/a3/0e56b4e5.jpg","comment_is_top":false,"comment_ctime":1603770886,"is_pvip":false,"replies":[{"id":"95503","content":"åœ¨ä¸»å¾ªç¯é‡Œæ¯æ¬¡åº”è¯¥éœ€è¦å¯¹ç»“æœè¿›è¡Œæ¸…é›¶å¤„ç†ã€‚FD_CLRæ˜¯æ¸…é™¤æ‰å¯¹åº”çš„æ–‡ä»¶æè¿°ç¬¦ï¼Œæ„Ÿè§‰è¿™é‡Œæœ‰ç‚¹é—®é¢˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1606041542,"ip_address":"","comment_id":256877,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1603770886","product_id":100032701,"comment_content":"é—®ä¸€ä¸‹è€å¸ˆï¼Œåœ¨ä¸»å¾ªç¯çš„éƒ¨åˆ†ï¼Œè€å¸ˆæ˜¯é€šè¿‡æ£€æŸ¥fdæ•°æ®é‡æ–°setäº†ä¸€éread fd setå’Œwrite fd setï¼Œè¿™ä¸ªç¡®å®OKï¼Œä½†æˆ‘ç”¨å¦ä¸€ç§æ–¹å¼å¤‡ä»½è®¾ç½®å¥½çš„fd setï¼Œç„¶åå½“å®¢æˆ·ç«¯å¼‚å¸¸çš„æ—¶å€™ç”¨FD_CLRæ¸…ç†æ‰setå¯¹åº”çš„fdï¼Œä½†æ˜¯å¥½åƒæ²¡æœ‰æˆåŠŸï¼Œæˆ‘ç”¨é”™äº†FD_CLRå—ï¼Ÿ<br><br>fd_set readfd;<br>FD_SET(xx, &amp;readfd);<br>...<br>fd_set backup = readfd;<br><br>while (1) {<br>select(maxfd + 1, &amp;readfd, NULL, NULL, NULL);<br>&#47;&#47;å¤„ç†accetpfd<br>è¿æ¥æˆåŠŸFD_SET(æˆåŠŸ, &amp;backup)<br>&#47;&#47;å¤„ç†å®¢æˆ·ç«¯<br>å¦‚æœå®¢æˆ·ç«¯å¼‚å¸¸FD_CLR(å¼‚å¸¸, &amp;backup)<br>æˆ‘è¿™é‡Œç”¨hexdumpæ‰“å°äº†backupï¼Œå‘ç°å¼‚å¸¸çš„ä½å¹¶æ²¡æœ‰è¢«ç½®é›¶ï¼Œæœ€åå¯¼è‡´selectä¸åœæŠ¥EBADFé”™è¯¯ï¼Œè¯·é—®è€å¸ˆæ˜¯æˆ‘ç†è§£é”™äº†å—ï¼Ÿ<br><br>&#47;&#47;å®¢æˆ·ç«¯å¤„ç†å®Œæ¯•<br>readfd = backup;<br>}","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":508150,"discussion_content":"åœ¨ä¸»å¾ªç¯é‡Œæ¯æ¬¡åº”è¯¥éœ€è¦å¯¹ç»“æœè¿›è¡Œæ¸…é›¶å¤„ç†ã€‚FD_CLRæ˜¯æ¸…é™¤æ‰å¯¹åº”çš„æ–‡ä»¶æè¿°ç¬¦ï¼Œæ„Ÿè§‰è¿™é‡Œæœ‰ç‚¹é—®é¢˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606041542,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1593251,"avatar":"https://static001.geekbang.org/account/avatar/00/18/4f/a3/0e56b4e5.jpg","nickname":"doge","note":"","ucode":"9E2D4C8F9B4CBC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":318624,"discussion_content":"é—®é¢˜è§£å†³äº†ï¼Œæ˜¯æˆ‘è°ƒç”¨FD_CLRçš„æ—¶æœºæ™šäº†ã€‚çœ‹æ ·å­è¿˜æ˜¯æŒ‰ç…§è€å¸ˆçš„å†™æ³•æ¯”è¾ƒä¸å®¹æ˜“å‡ºé”™äº›(Â´;ï¸µ;`)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603792549,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":231773,"user_name":"éƒ‘ç¥–ç…Œ","can_delete":false,"product_type":"c1","uid":1469608,"ip_address":"","ucode":"49A0D2E3279826","user_header":"https://static001.geekbang.org/account/avatar/00/16/6c/a8/1922a0f5.jpg","comment_is_top":false,"comment_ctime":1593767515,"is_pvip":false,"replies":[{"id":"85733","content":"å—¯ï¼Œæœ‰åˆ©æœ‰å¼Šå§ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1593954886,"ip_address":"","comment_id":231773,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1593767515","product_id":100032701,"comment_content":"1. é‚£ä¸ªæ˜¯é™åˆ¶fdçš„ä¸ªæ•°ï¼Œå¯ä»¥å°†Bufferç”±æ•°ç»„çš„å­˜å‚¨æ–¹å¼ä¿®æ”¹ä¸ºé“¾è¡¨çš„æ–¹å¼ï¼Œå°±æ˜¯åœ¨Bufferåé¢åŠ ä¸€ä¸ªæŒ‡é’ˆã€‚ä½†æ˜¯è¿™ä¸ªåšä¸æ–¹é¢çš„ä¸€ç‚¹å°±æ˜¯å¾—é€ä¸ªå»éå†ã€‚ ","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":500433,"discussion_content":"å—¯ï¼Œæœ‰åˆ©æœ‰å¼Šå§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593954886,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":231751,"user_name":"éƒ‘ç¥–ç…Œ","can_delete":false,"product_type":"c1","uid":1469608,"ip_address":"","ucode":"49A0D2E3279826","user_header":"https://static001.geekbang.org/account/avatar/00/16/6c/a8/1922a0f5.jpg","comment_is_top":false,"comment_ctime":1593764851,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1593764851","product_id":100032701,"comment_content":"ç¬¬ä¸€ä¸ªæ˜¯å¯¹åŒæ—¶åœ¨çº¿è¿æ¥çš„äººæ•°åšäº†é™åˆ¶ã€‚å¦‚æœè¶…è¿‡äº†FD_INIT_SIZEå°±å¼ºåˆ¶å…³é—­è¯¥socketè¿æ¥ã€‚å¯ä»¥é€šè¿‡åŠ¨æ€æ•°æ®å»å®ç°äººæ•°çš„åŠ¨æ€åˆ†é…ã€‚","like_count":0},{"had_liked":false,"id":225624,"user_name":"n3bul2","can_delete":false,"product_type":"c1","uid":1137426,"ip_address":"","ucode":"11EDFAB2EA2B5E","user_header":"https://static001.geekbang.org/account/avatar/00/11/5b/12/b9ec95e2.jpg","comment_is_top":false,"comment_ctime":1591801392,"is_pvip":false,"replies":[{"id":"84271","content":"ç»“æœæ˜¯æ­£ç¡®çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1592742243,"ip_address":"","comment_id":225624,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1591801392","product_id":100032701,"comment_content":"è€å¸ˆï¼Œæˆ‘å…ˆè¿è¡Œäº†æœåŠ¡å™¨ç«¯ï¼Œåœ¨è¿è¡Œå®¢æˆ·ç«¯è¾“å…¥ipä¸€å›è½¦å°±é€€å‡ºäº†ï¼ŒæœåŠ¡å™¨ç«¯æ˜¾ç¤ºâ€listening socket readableâ€œï¼Œè¿™æ˜¯æ­£ç¡®çš„ç»“æœå—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497917,"discussion_content":"ç»“æœæ˜¯æ­£ç¡®çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592742243,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":211545,"user_name":"Joy","can_delete":false,"product_type":"c1","uid":1589746,"ip_address":"","ucode":"54560FE6398945","user_header":"https://static001.geekbang.org/account/avatar/00/18/41/f2/4843532d.jpg","comment_is_top":false,"comment_ctime":1587980997,"is_pvip":false,"replies":[{"id":"79178","content":"æ˜¯çš„ã€‚è¿™é‡ŒonSocketRead&#47;onSocketWriteå‡½æ•°æœ¬èº«æ˜¯åœ¨ä¸»çº¿ç¨‹é‡Œå¤„ç†çš„ï¼Œå¦‚æœå¾ˆæ…¢ç¡®å®ä¼šæ‹–ç´¯å…¶ä»–äº‹ä»¶çš„å¤„ç†ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥ä½¿ç”¨çº¿ç¨‹æ¥å¤„ç†ã€‚åé¢è®²åˆ°çš„reactoræ¨¡å¼ä¼šæŠŠäº‹ä»¶æ£€æµ‹å’Œæ•°æ®å¤„ç†åˆ†å¼€ç”¨ä¸åŒçš„çº¿ç¨‹å¤„ç†ï¼ŒæŸç§ç¨‹åº¦å¯ä»¥è§„é¿ä½ è¯´çš„é—®é¢˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1588497473,"ip_address":"","comment_id":211545,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1587980997","product_id":100032701,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œè¯·é—®å¦‚æœonSocketRead&#47;onSocketWriteå‡½æ•°é‡Œçš„å¤„ç†æ—¶é—´è¾ƒé•¿ä¼šå½±å“selectæ‰€åœ¨whileçš„å¾ªç¯å¤„ç†æˆ–è€…è¯´ä¼šå½±å“å…¶ä»–äº‹ä»¶çš„å¤„ç†å—ï¼Ÿè°¢è°¢ï¼","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":493291,"discussion_content":"æ˜¯çš„ã€‚è¿™é‡ŒonSocketRead/onSocketWriteå‡½æ•°æœ¬èº«æ˜¯åœ¨ä¸»çº¿ç¨‹é‡Œå¤„ç†çš„ï¼Œå¦‚æœå¾ˆæ…¢ç¡®å®ä¼šæ‹–ç´¯å…¶ä»–äº‹ä»¶çš„å¤„ç†ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥ä½¿ç”¨çº¿ç¨‹æ¥å¤„ç†ã€‚åé¢è®²åˆ°çš„reactoræ¨¡å¼ä¼šæŠŠäº‹ä»¶æ£€æµ‹å’Œæ•°æ®å¤„ç†åˆ†å¼€ç”¨ä¸åŒçš„çº¿ç¨‹å¤„ç†ï¼ŒæŸç§ç¨‹åº¦å¯ä»¥è§„é¿ä½ è¯´çš„é—®é¢˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588497473,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":208665,"user_name":"æ™ºå¼º","can_delete":false,"product_type":"c1","uid":1275287,"ip_address":"","ucode":"C5D8813FCB46E7","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ5lDDMYy9zfQGQAGPL5icH82BuP8J9loZKSqRffr80eyV5AhGS9LyMeWDmSOXl2iaIoK7qONlwpD4A/132","comment_is_top":false,"comment_ctime":1587397002,"is_pvip":false,"replies":[{"id":"78414","content":"ä¸æ˜¯å“¦ï¼Œè¿™é‡Œçš„ä¸‹æ ‡è¡¨ç¤ºçš„æ˜¯æ•°ç»„Bufferé‡Œçš„å…ƒç´ ï¼Œæ¯ä¸ªBufferå¯¹è±¡é‡Œé¢çš„connct_fdæ‰æ˜¯socket fdã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1587804248,"ip_address":"","comment_id":208665,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1587397002","product_id":100032701,"comment_content":"ä¸çŸ¥é“ç°åœ¨è¿˜èƒ½çœ‹åˆ°ä¸ã€‚<br>146è¡Œå¼€å§‹å¯¹ fd_set å¾ªç¯å¤„ç†æ—¶ï¼Œæ˜¯å¦ä» i = 3 å¼€å§‹æ¯”è¾ƒå¥½ï¼Ÿ<br>æˆ‘çš„ç†è§£æ˜¯ 0ï¼Œ1ï¼Œ2ä¸‰ä¸ª fd ä¸ä¼šå¯¹åº” socketã€‚","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":492568,"discussion_content":"ä¸æ˜¯å“¦ï¼Œè¿™é‡Œçš„ä¸‹æ ‡è¡¨ç¤ºçš„æ˜¯æ•°ç»„Bufferé‡Œçš„å…ƒç´ ï¼Œæ¯ä¸ªBufferå¯¹è±¡é‡Œé¢çš„connct_fdæ‰æ˜¯socket fdã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587804248,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":207755,"user_name":"heyman","can_delete":false,"product_type":"c1","uid":1173894,"ip_address":"","ucode":"92EF9EF1B1B1B3","user_header":"https://static001.geekbang.org/account/avatar/00/11/e9/86/d34800a4.jpg","comment_is_top":false,"comment_ctime":1587174792,"is_pvip":false,"replies":[{"id":"77719","content":"connectæœ‰è¿æ¥è¶…æ—¶è®¾ç½®ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1587304382,"ip_address":"","comment_id":207755,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1587174792","product_id":100032701,"comment_content":"â€è¿™é‡Œçš„ä¼‘çœ æ—¶é—´éå¸¸å…³é”®ï¼Œè¿™æ ·ï¼Œåœ¨ç›‘å¬å¥—æ¥å­—ä¸Šæœ‰å¯è¯»äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œå¹¶æ²¡æœ‰é©¬ä¸Šè°ƒç”¨ acceptã€‚ç”±äºå®¢æˆ·ç«¯å‘ç”Ÿäº† RST åˆ†èŠ‚ï¼Œè¯¥è¿æ¥è¢«æ¥æ”¶ç«¯å†…æ ¸ä»è‡ªå·±çš„å·²å®Œæˆé˜Ÿåˆ—ä¸­åˆ é™¤äº†ï¼Œæ­¤æ—¶å†è°ƒç”¨ acceptï¼Œç”±äºæ²¡æœ‰å·²å®Œæˆè¿æ¥ï¼ˆå‡è®¾æ²¡æœ‰å…¶ä»–å·²å®Œæˆè¿æ¥ï¼‰ï¼Œaccept ä¸€ç›´é˜»å¡â€œã€‚è¯·æ•™ä¸€ä¸‹ï¼Œä¸ºä»€ä¹ˆå®¢æˆ·ç«¯ä¼šå‘ç”ŸRSTåˆ†èŠ‚ï¼ŸæœåŠ¡ç«¯è¿˜æ²¡æœ‰acceptçš„è¯ï¼Œå®¢æˆ·ç«¯çš„connectä¸æ˜¯åº”è¯¥é˜»å¡å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":492232,"discussion_content":"connectæœ‰è¿æ¥è¶…æ—¶è®¾ç½®ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587304382,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":205353,"user_name":"ä½ å¥½","can_delete":false,"product_type":"c1","uid":1252980,"ip_address":"","ucode":"0B5E024BA58560","user_header":"https://static001.geekbang.org/account/avatar/00/13/1e/74/636ea0f3.jpg","comment_is_top":false,"comment_ctime":1586597033,"is_pvip":false,"replies":[{"id":"76803","content":":)","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1586681203,"ip_address":"","comment_id":205353,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1586597033","product_id":100032701,"comment_content":"emmmï¼Œæˆ‘æœ‰ç‚¹æ‡µäº†","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":491457,"discussion_content":":)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586681203,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":205163,"user_name":"Geek_wannaBgeek","can_delete":false,"product_type":"c1","uid":1643435,"ip_address":"","ucode":"6F42F4181981C3","user_header":"https://static001.geekbang.org/account/avatar/00/19/13/ab/d73e25de.jpg","comment_is_top":false,"comment_ctime":1586562426,"is_pvip":false,"replies":[{"id":"76802","content":"ä¿¡å·é©±åŠ¨I&#47;Oè¿™ä¸ªå¤ªç©ºï¼ŒLinuxä¹Ÿæ²¡æœ‰å®é™…çš„APIæ”¯æŒï¼Œæˆ‘ç†è§£ä½ æ˜¯æƒ³è¯´AIOï¼Œå½“å®é™…ä¸Š, AIOæ˜¯è¦å¸®æˆ‘ä»¬æŠŠä¹¦ç»™æ¬å›å®¶çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1586681189,"ip_address":"","comment_id":205163,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1586562426","product_id":100032701,"comment_content":"è€å¸ˆæˆ‘æƒ³è¯·é—®ä¸€ä¸‹ï¼Œè¿™æ®µâ€œä½†è½®è¯¢çš„æ•ˆç‡å¤ªä½äº†ï¼Œäºæ˜¯ä½ å‘è€æ¿æè®®ï¼šâ€œè€æ¿ï¼Œåˆ°è´§ç»™æˆ‘æ‰“ç”µè¯å§ï¼Œæˆ‘å†æ¥ä»˜é’±å–ä¹¦ã€‚â€è¿™å°±æ˜¯å‰é¢è®²åˆ°çš„ I&#47;O å¤šè·¯å¤ç”¨ã€‚â€æ„Ÿè§‰å’Œä¿¡å·é©±åŠ¨ioæœ‰ç‚¹åƒå‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":491411,"discussion_content":"ä¿¡å·é©±åŠ¨I/Oè¿™ä¸ªå¤ªç©ºï¼ŒLinuxä¹Ÿæ²¡æœ‰å®é™…çš„APIæ”¯æŒï¼Œæˆ‘ç†è§£ä½ æ˜¯æƒ³è¯´AIOï¼Œå½“å®é™…ä¸Š, AIOæ˜¯è¦å¸®æˆ‘ä»¬æŠŠä¹¦ç»™æ¬å›å®¶çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586681189,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1643435,"avatar":"https://static001.geekbang.org/account/avatar/00/19/13/ab/d73e25de.jpg","nickname":"Geek_wannaBgeek","note":"","ucode":"6F42F4181981C3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":234363,"discussion_content":"aioè¿™ä¸ªæ˜¯å†…æ ¸è´Ÿè´£æ‹·è´å€’æ˜¯çŸ¥é“ï¼Œä¸€å¼€å§‹æ²¡æœ‰getåˆ°ä¹¦åº—è€æ¿æ˜¯selectä¹‹ç±»çš„è§’è‰²ï¼Œè°¢è°¢è€å¸ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586963468,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":169411,"user_name":"javaYJL","can_delete":false,"product_type":"c1","uid":1188249,"ip_address":"","ucode":"E326EB9AFDCE32","user_header":"https://static001.geekbang.org/account/avatar/00/12/21/99/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1578329536,"is_pvip":false,"replies":[{"id":"68077","content":"ä»ç³»ç»Ÿè°ƒç”¨è§’åº¦æ¥è¯´æ˜¯çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1580631338,"ip_address":"","comment_id":169411,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1578329536","product_id":100032701,"comment_content":"è€å¸ˆï¼Œå®¢æˆ·ç«¯å‘èµ·connectè¿æ¥ã€‚æ˜¯ä¸æ˜¯è¦æœåŠ¡ç«¯å®Œæˆacceptoræ¥å…¥å¤„ç†ï¼Œè¿™ä¸ªtcpè¿æ¥æ‰ç®—æ˜¯æˆåŠŸçš„ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480545,"discussion_content":"ä»ç³»ç»Ÿè°ƒç”¨è§’åº¦æ¥è¯´æ˜¯çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580631338,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":168611,"user_name":"ä¸è¯‰ç¦»æ®‡","can_delete":false,"product_type":"c1","uid":1239350,"ip_address":"","ucode":"4F7BB1220ECED7","user_header":"https://static001.geekbang.org/account/avatar/00/12/e9/36/f62471c5.jpg","comment_is_top":false,"comment_ctime":1578122665,"is_pvip":false,"replies":[{"id":"65473","content":"éé˜»å¡I&#47;Oçš„å¥½å¤„ä½ å·²ç»è¯´åˆ°äº†ï¼Œå°±æ˜¯å¯ä»¥ç›´æ¥è¿”å›ï¼Œä¸ä¼šåƒé˜»å¡I&#47;Oä¸€æ ·ä¸€ç›´é˜»å¡ã€‚ç¡®å®ï¼Œå¦‚æœæ˜¯I&#47;Oå¤šè·¯å¤ç”¨ï¼Œçœ‹ä¸Šå»é˜»å¡I&#47;Oä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯å®ƒæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯å®¹æ˜“é˜»å¡ï¼Œå¯¼è‡´çº¿ç¨‹æ²¡è€—æ­»ã€‚ä½ å¯ä»¥è¿™ä¹ˆç®€å•çš„ç†è§£ï¼Œæœ¬æ¥æˆ‘ä»¬ä½¿ç”¨éé˜»å¡I&#47;Oéœ€è¦è‡ªå·±ä¸æ–­çš„è½®è¯¢ï¼Œç°åœ¨æ“ä½œç³»ç»Ÿå¸®æˆ‘ä»£åŠ³äº†ï¼Œå¯ä»¥é€šè¿‡äº‹ä»¶æ¥é€šçŸ¥æˆ‘ä»¬ï¼Œè¿™æ ·éé˜»å¡I&#47;O+å¤šè·¯å¤ç”¨å°±æˆä¸ºäº†ç½‘ç»œç¼–ç¨‹çš„ä¸€ä¸ªæ ‡å‡†æŠ€æœ¯äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1578213084,"ip_address":"","comment_id":168611,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1578122665","product_id":100032701,"comment_content":"è€å¸ˆå¥½ï¼Œæˆ‘æœ‰ä¸€ä¸ªç–‘é—®ï¼Œåœ¨ä½¿ç”¨ioå¤ç”¨çš„æƒ…å†µä¸‹ï¼Œæ—¢ç„¶å†…æ ¸é€šçŸ¥å¥—æ¥å£å¯è¯»ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™readåº”è¯¥ä¸ä¼šé˜»å¡ï¼Œç›´æ¥å°±èƒ½è¿”å›ï¼Œé‚£ä¹ˆåœ¨ioå¤ç”¨æƒ…å†µä¸‹ï¼Œå°†å¥—æ¥å­—è®¾ç½®ä¸ºéé˜»å¡çš„å¯¹readæ“ä½œæœ‰ä»€ä¹ˆæ„ä¹‰ï¼Ÿéé˜»å¡æƒ…å†µä¸‹å¦‚æœæ²¡æœ‰æ•°æ®è¿˜éœ€è¦è½®è¯¢ï¼Œæ¶ˆè€—cpuï¼Œè¿˜ä¸å¦‚é˜»å¡ioï¼Ÿå¯¹äºreadnæ“ä½œï¼Œå¦‚æœè¯»å–çš„å­—èŠ‚æ•°ä¸(å‡è®¾æœ‰ä¸€ä¸ªæ¶æ„çš„å®¢æˆ·ç«¯ï¼Œå‘äº†ä¸€éƒ¨åˆ†æ•°æ®å°±ä¸å‘äº†ï¼‰ï¼Œé‚£ä¹ˆé˜»å¡ioçš„readå°±ä¼šä¸€ç›´é˜»å¡ï¼ˆå¯ä»¥åŠ timeoutï¼‰ï¼Ÿéé˜»å¡ioä¼šä¸€ç›´è½®è¯¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480269,"discussion_content":"éé˜»å¡I/Oçš„å¥½å¤„ä½ å·²ç»è¯´åˆ°äº†ï¼Œå°±æ˜¯å¯ä»¥ç›´æ¥è¿”å›ï¼Œä¸ä¼šåƒé˜»å¡I/Oä¸€æ ·ä¸€ç›´é˜»å¡ã€‚ç¡®å®ï¼Œå¦‚æœæ˜¯I/Oå¤šè·¯å¤ç”¨ï¼Œçœ‹ä¸Šå»é˜»å¡I/Oä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯å®ƒæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯å®¹æ˜“é˜»å¡ï¼Œå¯¼è‡´çº¿ç¨‹æ²¡è€—æ­»ã€‚ä½ å¯ä»¥è¿™ä¹ˆç®€å•çš„ç†è§£ï¼Œæœ¬æ¥æˆ‘ä»¬ä½¿ç”¨éé˜»å¡I/Oéœ€è¦è‡ªå·±ä¸æ–­çš„è½®è¯¢ï¼Œç°åœ¨æ“ä½œç³»ç»Ÿå¸®æˆ‘ä»£åŠ³äº†ï¼Œå¯ä»¥é€šè¿‡äº‹ä»¶æ¥é€šçŸ¥æˆ‘ä»¬ï¼Œè¿™æ ·éé˜»å¡I/O+å¤šè·¯å¤ç”¨å°±æˆä¸ºäº†ç½‘ç»œç¼–ç¨‹çš„ä¸€ä¸ªæ ‡å‡†æŠ€æœ¯äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578213084,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":168369,"user_name":"å­¦æ€ª","can_delete":false,"product_type":"c1","uid":1723983,"ip_address":"","ucode":"FE40B40460B0C7","user_header":"https://static001.geekbang.org/account/avatar/00/1a/4e/4f/b0b24789.jpg","comment_is_top":false,"comment_ctime":1578056620,"is_pvip":false,"replies":[{"id":"65475","content":"ä½ çš„é”™è¯¯æ˜¯ä»€ä¹ˆï¼Œæˆ‘ç¡®å®šæ‰€æœ‰çš„ç¨‹åºéƒ½æ˜¯å¯ä»¥ç¼–è¯‘ã€é“¾æ¥ï¼Œå¹¶æœ€åä»¥å¯æ‰§è¡Œç¨‹åºçš„æ–¹å¼è¿è¡Œçš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1578213129,"ip_address":"","comment_id":168369,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1578056620","product_id":100032701,"comment_content":"è€å¸ˆï¼Œè¿™ä¸ªè´´å‡ºæ¥çš„ä»£ç ç¡®å®šæ²¡æœ‰é—®é¢˜å—ï¼Ÿæˆ‘è‡ªå·±æ•²çš„å’ŒGitHubä¸Šä¸‹è½½ä¸‹æ¥çš„ä»£ç éƒ½è·‘ä¸é€šå‘¢","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480203,"discussion_content":"ä½ çš„é”™è¯¯æ˜¯ä»€ä¹ˆï¼Œæˆ‘ç¡®å®šæ‰€æœ‰çš„ç¨‹åºéƒ½æ˜¯å¯ä»¥ç¼–è¯‘ã€é“¾æ¥ï¼Œå¹¶æœ€åä»¥å¯æ‰§è¡Œç¨‹åºçš„æ–¹å¼è¿è¡Œçš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578213129,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":163090,"user_name":"zhang","can_delete":false,"product_type":"c1","uid":1256330,"ip_address":"","ucode":"BFA19BED5A5322","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEIRm3kWsgiaEXjO0rr0Aiav7o89StFTFSXbLTkEmiaibmnw8EQTejibrtzKla0emibePT0R0KXjFRIpfXrQ/132","comment_is_top":false,"comment_ctime":1576655052,"is_pvip":false,"replies":[{"id":"63908","content":"ä¸èƒ½è¿™ä¹ˆå¹²ã€‚åº”è¯¥æ˜¯è¿™æ ·ï¼Œå»ºç«‹ä¸€ä¸ªç®¡é“(pipe)ï¼Œç„¶ç¬¬ä¸€ä¸ªçº¿ç¨‹åŒæ—¶selectè¿™ä¸ªç®¡é“çš„å¯è¯»äº‹ä»¶ï¼Œç¬¬äºŒä¸ªçº¿ç¨‹å¾€è¿™ä¸ªç®¡é“å‘é€ä¸€ä¸ªå­—ç¬¦ï¼Œè¿™æ ·ç¬¬ä¸€ä¸ªçº¿ç¨‹å°±è‡ªç„¶å¯ä»¥è‹é†’è¿‡æ¥äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1577604479,"ip_address":"","comment_id":163090,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1576655052","product_id":100032701,"comment_content":"å¦‚æœæ˜¯å¤šçº¿ç¨‹çš„ï¼Œä¸€ä¸ªçº¿ç¨‹select(max_fd+1, &amp;read_fds, &amp;write_fds, NULL, NULL)ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹æƒ³è¦å”¤é†’ç¬¬ä¸€ä¸ªçº¿ç¨‹çš„selectçš„write_fdsï¼Œå¦‚ä½•åšï¼Ÿæˆ‘è¯•éªŒç¬¬äºŒä¸ªçº¿ç¨‹è°ƒç”¨ç¬¬ä¸€ä¸ªçº¿ç¨‹å¯¹è±¡çš„FD_ZERO(&amp;write_fds);FD_SET(client.sd, &amp;write_fds);ï¼Œä½†å¹¶æ²¡æœ‰å”¤é†’selectï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478244,"discussion_content":"ä¸èƒ½è¿™ä¹ˆå¹²ã€‚åº”è¯¥æ˜¯è¿™æ ·ï¼Œå»ºç«‹ä¸€ä¸ªç®¡é“(pipe)ï¼Œç„¶ç¬¬ä¸€ä¸ªçº¿ç¨‹åŒæ—¶selectè¿™ä¸ªç®¡é“çš„å¯è¯»äº‹ä»¶ï¼Œç¬¬äºŒä¸ªçº¿ç¨‹å¾€è¿™ä¸ªç®¡é“å‘é€ä¸€ä¸ªå­—ç¬¦ï¼Œè¿™æ ·ç¬¬ä¸€ä¸ªçº¿ç¨‹å°±è‡ªç„¶å¯ä»¥è‹é†’è¿‡æ¥äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577604479,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1256330,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEIRm3kWsgiaEXjO0rr0Aiav7o89StFTFSXbLTkEmiaibmnw8EQTejibrtzKla0emibePT0R0KXjFRIpfXrQ/132","nickname":"zhang","note":"","ucode":"BFA19BED5A5322","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":87496,"discussion_content":"æ˜¯å¦å¯ä»¥ç”¨eventfdæ¥åšï¼Œåˆ›å»ºçš„wake_fdæ·»åŠ åˆ°selectçš„readfdsä¸­ã€‚ç¬¬äºŒä¸ªçº¿ç¨‹å†™å…¥bufferåï¼Œwriteè¿™ä¸ªwake_fdï¼Œè¿™æ ·ç¬¬ä¸€ä¸ªçº¿ç¨‹selectå°±ä¼šè¢«readfdsçš„wake_fdäº‹ä»¶å”¤é†’ï¼Œä¹‹åæ¥ç€æ£€æŸ¥æœ‰writefdsäº‹ä»¶å°±ä»bufferå–å‡ºæ•°æ®å‘é€ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576670852,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":154842,"user_name":"é’±","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1574578415,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1574578415","product_id":100032701,"comment_content":"éé˜»å¡ I&#47;O å¯ä»¥è¢«ç”¨åˆ°è¯»æ“ä½œã€å†™æ“ä½œã€æ¥æ”¶è¿æ¥æ“ä½œå’Œå‘èµ·è¿æ¥æ“ä½œä¸Šã€‚<br>éé˜»å¡æ˜¯ç›¸å¯¹äºé˜»å¡è€Œè¨€çš„ï¼Œé˜»å¡ç®€å•è®²å°±æ˜¯åº”ç”¨ç¨‹åºè®©å†…æ ¸åšæŸä¸€ä»¶äº‹ï¼Œå†…æ ¸éœ€è¦ç‚¹æ—¶é—´åšï¼Œåº”ç”¨ç¨‹åºåœ¨å†…æ ¸åšäº‹çš„è¿™æ®µæ—¶é—´é‡Œå•¥ä¹Ÿä¸å¹²å°±å¹²ç­‰ç€ï¼Œç›´åˆ°å†…æ ¸æŠŠè¿™ä»¶äº‹å¹²å®Œï¼Œç„¶åå‘Šè¯‰åº”ç”¨ç¨‹åºç»“æœï¼Œåº”ç”¨ç¨‹åºæ‰æ¥ç€å¹²åˆ«çš„äº‹æƒ…ã€‚<br>éé˜»å¡çš„å…³é”®ç‚¹æ˜¯ï¼Œä¸å¹²ç­‰ç€äº†ï¼Œåœ¨å†…æ ¸åšäº‹çš„é‚£ä¸ªæ—¶é—´æ®µå†…ï¼Œç»§ç»­å¹²è‡ªå·±èƒ½çš„äº‹ï¼Œç­‰å†…æ ¸å¹²å®Œäº†åº”ç”¨ç¨‹åºäº¤ç»™å®ƒå¹²çš„äº‹ï¼ŒæŠŠç»“æœè¿”ç»™åº”ç”¨ç¨‹åºæ—¶ï¼Œåº”ç”¨ç¨‹åºåˆ™å†ç»§ç»­å¹²æ‹¿åˆ°ç»“æœä¹‹ååº”å¹²çš„äº‹ã€‚","like_count":0},{"had_liked":false,"id":153976,"user_name":"herongwei","can_delete":false,"product_type":"c1","uid":1153928,"ip_address":"","ucode":"E4158BF7AD2E70","user_header":"https://static001.geekbang.org/account/avatar/00/11/9b/88/34c171f1.jpg","comment_is_top":false,"comment_ctime":1574339638,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1574339638","product_id":100032701,"comment_content":"è¿™ä¸€ç« éœ€è¦åå¤é˜…è¯»å’Œç†è§£","like_count":0},{"had_liked":false,"id":152738,"user_name":"zmysang","can_delete":false,"product_type":"c1","uid":1642663,"ip_address":"","ucode":"8A98057E7819DD","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/tjhOILHBAmlx6YiaTZJzqzxn1uyB6XpdvGDIZhBn127TYEcoLLzxRiaKvtVd3HllQqPx7cqf2YmibyBUgGGGJPDkw/132","comment_is_top":false,"comment_ctime":1574072315,"is_pvip":false,"replies":[{"id":"59326","content":"å¯ä»¥è¿™ä¹ˆç†è§£ã€‚å½“ç„¶ï¼Œæ¥æ”¶ç¼“å†²å»å¯è¯»çš„å¤§å°ï¼Œå’Œå‘é€ç¼“å†²åŒºå¯å†™çš„å¤§å°éƒ½æ˜¯å¯ä»¥é€šè¿‡å†…æ ¸å‚æ•°åŠ¨æ€é…ç½®ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1574497982,"ip_address":"","comment_id":152738,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1574072315","product_id":100032701,"comment_content":"è¯·é—®è€å¸ˆï¼Œæˆ‘ç†è§£selectå‡½æ•°æ˜¯ï¼Œå¦‚æœreadsetä¸­çš„fdçš„æ¥æ”¶ç¼“å†²åŒºä¸ä¸ºç©ºï¼Œå°±æ˜¯å¯è¯»çš„ï¼Œå¦‚æœwritesetä¸­çš„fdçš„å‘é€ç¼“å†²åŒºæ²¡æœ‰æ»¡å°±æ˜¯å¯å†™çš„æ˜¯å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":474921,"discussion_content":"å¯ä»¥è¿™ä¹ˆç†è§£ã€‚å½“ç„¶ï¼Œæ¥æ”¶ç¼“å†²å»å¯è¯»çš„å¤§å°ï¼Œå’Œå‘é€ç¼“å†²åŒºå¯å†™çš„å¤§å°éƒ½æ˜¯å¯ä»¥é€šè¿‡å†…æ ¸å‚æ•°åŠ¨æ€é…ç½®ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574497982,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":138882,"user_name":"ä¼ è¯´ä¸­çš„æˆå¤§å¤§","can_delete":false,"product_type":"c1","uid":1236766,"ip_address":"","ucode":"103543D6E706BF","user_header":"https://static001.geekbang.org/account/avatar/00/12/df/1e/cea897e8.jpg","comment_is_top":false,"comment_ctime":1570498331,"is_pvip":false,"replies":[{"id":"54313","content":"è¿™ä¸ªä¾‹å­å°±æ˜¯è¯´æ˜ä¸€ä¸‹ç›‘å¬å¥—æ¥å­—éœ€è¦è®¾ç½®ä¸ºéé˜»å¡çš„ï¼Œç»“æœä¸é‡è¦äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1570972148,"ip_address":"","comment_id":138882,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1570498331","product_id":100032701,"comment_content":"æœ‰è¿æ¥ä¸Šæ¥çš„æ—¶å€™sleep5ç§’é‚£ä¸ªä¾‹å­ä¸­ æˆ‘è¿™è¾¹æ²¡æœ‰æ°¸ä¹…é˜»å¡ åè€Œæ˜¯ .&#47;server: accept failed: Invalid argument","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":469684,"discussion_content":"è¿™ä¸ªä¾‹å­å°±æ˜¯è¯´æ˜ä¸€ä¸‹ç›‘å¬å¥—æ¥å­—éœ€è¦è®¾ç½®ä¸ºéé˜»å¡çš„ï¼Œç»“æœä¸é‡è¦äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570972148,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":137544,"user_name":"æ²‰æ·€çš„æ¢¦æƒ³","can_delete":false,"product_type":"c1","uid":1177315,"ip_address":"","ucode":"BCB7C26F9D214B","user_header":"https://static001.geekbang.org/account/avatar/00/11/f6/e3/e4bcd69e.jpg","comment_is_top":false,"comment_ctime":1569771406,"is_pvip":false,"replies":[{"id":"53862","content":"å¯¹ï¼Œæ˜¯æŒ‡closeæ‰ä¸¤ä¸ªæ–¹å‘çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1570697521,"ip_address":"","comment_id":137544,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1569771406","product_id":100032701,"comment_content":"æ–‡ä¸­è¯´â€œå¯¹æ–¹ä¸»åŠ¨å…³é—­å¥—æ¥å­—ï¼Œé˜»å¡writeè°ƒç”¨ä¼šç«‹å³è¿”å›å®é™…å­—èŠ‚æ•°ï¼Œå¦‚æœå†æ¬¡writeï¼Œåˆ™è¿”å›å¤±è´¥â€ï¼Œè¿™æ˜¯çš„â€œå…³é—­â€åªæŒ‡ä¸¤ä¸ªæ–¹å‘å…³é—­å—ï¼Ÿå¦‚æœå¯¹æ–¹åªæ˜¯åŠå…³é—­çš„è¯ï¼Œç†è®ºä¸Šæœ¬æœºè¿˜æ˜¯å¯ä»¥ç»§ç»­writeçš„å§","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":469144,"discussion_content":"å¯¹ï¼Œæ˜¯æŒ‡closeæ‰ä¸¤ä¸ªæ–¹å‘çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570697521,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":136915,"user_name":"åˆ˜ä¸¹","can_delete":false,"product_type":"c1","uid":1081922,"ip_address":"","ucode":"66594D1C957E15","user_header":"https://static001.geekbang.org/account/avatar/00/10/82/42/8b04d489.jpg","comment_is_top":false,"comment_ctime":1569552882,"is_pvip":false,"replies":[{"id":"52782","content":"å¦‚æœæœ‰å¤šä¸ª\\nï¼Œè¿™é‡Œä¹Ÿè®¤ä¸ºå®¢æˆ·ç«¯ç»“æŸäº†ï¼Œåªä¸è¿‡\\nä¼šå‘é€ç»™å®¢æˆ·ç«¯ã€‚<br><br>å¯ä»¥åŠ ä¸€ä¸ªå¤„ç†ï¼Œå¦‚æœè¯»åˆ°\\nï¼Œå°±ä¸è¦å†ç»§ç»­è¯»ä¸‹å»äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1569724590,"ip_address":"","comment_id":136915,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1569552882","product_id":100032701,"comment_content":"æ„Ÿè§‰ readable è¿™ä¸ªæ ‡è®°çš„å¤„ç†æœ‰ç‚¹å°é—®é¢˜ï¼Œæ²¡å¤ªè€ƒè™‘å¤šä¸ª \\n çš„æƒ…å†µ","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468861,"discussion_content":"å¦‚æœæœ‰å¤šä¸ª\\nï¼Œè¿™é‡Œä¹Ÿè®¤ä¸ºå®¢æˆ·ç«¯ç»“æŸäº†ï¼Œåªä¸è¿‡\\nä¼šå‘é€ç»™å®¢æˆ·ç«¯ã€‚\n\nå¯ä»¥åŠ ä¸€ä¸ªå¤„ç†ï¼Œå¦‚æœè¯»åˆ°\\nï¼Œå°±ä¸è¦å†ç»§ç»­è¯»ä¸‹å»äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569724590,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":136878,"user_name":"ç¨‹åºæ°´æœå®","can_delete":false,"product_type":"c1","uid":1371633,"ip_address":"","ucode":"1700DDFE073A56","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqyicZYyW7ahaXgXUD8ZAS8x0t8jx5rYLhwbUCJiawRepKIZfsLdkxdQ9XQMo99c1UDibmNVfFnAqwPg/132","comment_is_top":false,"comment_ctime":1569546827,"is_pvip":false,"replies":[{"id":"52785","content":" ä»£ç éƒ½åœ¨:https:&#47;&#47;github.com&#47;froghui&#47;yolanda<br><br>è¿™é‡Œè´´ä¸€æ®µï¼š<br>    int listenfd;<br>    listenfd = socket(AF_INET, SOCK_STREAM, 0);<br>    fcntl(listenfd, F_SETFL, O_NONBLOCK);","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1569724826,"ip_address":"","comment_id":136878,"utype":1}],"discussion_count":4,"race_medal":0,"score":"1569546827","product_id":100032701,"comment_content":"åº”è¯¥æŠŠå‡½æ•°tcp_nonblocking_server_listen(SERV_PORT)çš„å®ç°ä»£ç ä¹Ÿç»™å‡ºæ¥çš„ï¼Œä¸ç„¶æ–°æ‰‹å¯èƒ½ä¸çŸ¥é“æ€ä¹ˆselect å°±å˜æˆäº†éé˜»å¡äº†","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468839,"discussion_content":" ä»£ç éƒ½åœ¨:https://github.com/froghui/yolanda\n\nè¿™é‡Œè´´ä¸€æ®µï¼š\n    int listenfd;\n    listenfd = socket(AF_INET, SOCK_STREAM, 0);\n    fcntl(listenfd, F_SETFL, O_NONBLOCK);","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569724826,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1182631,"avatar":"https://static001.geekbang.org/account/avatar/00/12/0b/a7/6ef32187.jpg","nickname":"Keep-Moving","note":"","ucode":"76F33C06E07A27","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":21937,"discussion_content":"èµåŒ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569554676,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1528536,"avatar":"https://static001.geekbang.org/account/avatar/00/17/52/d8/123a4981.jpg","nickname":"ç»¿ç®­ä¾ ","note":"","ucode":"B994F558A98E29","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1182631,"avatar":"https://static001.geekbang.org/account/avatar/00/12/0b/a7/6ef32187.jpg","nickname":"Keep-Moving","note":"","ucode":"76F33C06E07A27","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":189670,"discussion_content":"select(maxfd + 1, &amp;readset, &amp;writeset, &amp;exset, NULL) æ­¤å¤„å½“ç„¶ä¼šé˜»å¡ï¼Œæ²¡æ˜ç™½æ€ä¹ˆè¯´selectéé˜»å¡ï¼Ÿï¼Ÿï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582896976,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":21937,"ip_address":""},"score":189670,"extra":""},{"author":{"id":2776006,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83er5SNsSoiaZw4Qzd2ctH4vtibHQordcLrYsX43oFZFloRTId0op617mcGlrvGx33U8ic2LTgdicoEFPvQ/132","nickname":"Frankey","note":"","ucode":"2F09BC2500C9E7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1528536,"avatar":"https://static001.geekbang.org/account/avatar/00/17/52/d8/123a4981.jpg","nickname":"ç»¿ç®­ä¾ ","note":"","ucode":"B994F558A98E29","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":569280,"discussion_content":"å› ä¸ºç¨‹åºfcntl(listenfd, F_SETFL, O_NONBLOCK);","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651392854,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":189670,"ip_address":""},"score":569280,"extra":""}]}]}]}