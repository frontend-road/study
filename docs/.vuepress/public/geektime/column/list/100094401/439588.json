{"id":439588,"title":"10 | æ•°æ®æµï¼šå¦‚ä½•ä½¿ç”¨Vuexè®¾è®¡ä½ çš„æ•°æ®æµ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯å¤§åœ£ï¼Œæ¬¢è¿è¿›å…¥è¯¾ç¨‹çš„ç¬¬10è®²ã€‚</p><p>å‰é¢çš„åŸºç¡€å…¥é—¨ç¯‡ä¸­çš„å‡ è®²ï¼Œéƒ½æ˜¯é’ˆå¯¹Vueæœ¬èº«çš„è¿›é˜¶å†…å®¹ã€‚é€šè¿‡è¿™å‡ è®²ï¼Œæˆ‘ä»¬å·©å›ºå’Œè¿›é˜¶äº†Composition APIã€ç»„ä»¶åŒ–å’ŒåŠ¨ç”»ç­‰å…³é”®çŸ¥è¯†ï¼ŒVueæœ¬èº«çš„çŸ¥è¯†ç‚¹å·²ç»æŒæ¡å¾—å·®ä¸å¤šäº†ã€‚é‚£ä¹ˆä»è¿™ä¸€è®²å¼€å§‹ï¼Œæˆ‘ä»¬è¿›å…¥è¯¾ç¨‹çš„å…¨å®¶æ¡¶å®æˆ˜ç¯‡ã€‚</p><p>åœ¨å…¨å®¶æ¡¶å®æˆ˜ç¯‡ï¼Œæˆ‘ä»¬å°†ä¸€åŒå­¦ä¹ Vue 3çš„ç”Ÿæ€ï¼ŒåŒ…æ‹¬Vuexã€vue-routerã€Vue Devtoolsç­‰ç”Ÿæ€åº“ï¼Œä»¥åŠå®æˆ˜å¼€å‘ä¸­éœ€è¦ç”¨åˆ°çš„åº“ã€‚è¿™â¼€æ¨¡å—å­¦å®Œï¼Œä½ å°±èƒ½å…¨å‰¯æ­¦è£…ï¼Œåº”å¯¹å¤æ‚çš„é¡¹ç›®å¼€å‘ä¹Ÿä¼šæ…¢æ…¢å¾—å¿ƒåº”æ‰‹ã€‚</p><p>ä»Šå¤©ï¼Œæˆ‘å…ˆæ¥å¸¦ä½ è®¤è¯†ä¸€ä¸‹Vueå…¨å®¶æ¡¶å¿…å¤‡çš„å·¥å…·ï¼šVuexï¼Œæœ‰äº†è¿™ä¸ªç¥å…µåˆ©å™¨ï¼Œå¤æ‚é¡¹ç›®è®¾è®¡ä¹Ÿä¼šå˜å¾—æ¡ç†æ›´æ¸…æ™°ã€‚æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬å…ˆä»Vuexè§£å†³äº†ä»€ä¹ˆé—®é¢˜è¯´èµ·ã€‚</p><h2>å‰ç«¯æ•°æ®ç®¡ç†</h2><p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦æŒæ¡å‰ç«¯çš„æ•°æ®æ€ä¹ˆç®¡ç†ï¼Œç°ä»£Webåº”ç”¨éƒ½æ˜¯ç”±ä¸‰å¤§ä»¶æ„æˆï¼Œåˆ†åˆ«æ˜¯ï¼šç»„ä»¶ã€æ•°æ®å’Œè·¯ç”±ã€‚å…³äºç»„ä»¶åŒ–å¼€å‘ï¼Œåœ¨å‰é¢çš„<a href=\"https://time.geekbang.org/column/article/435439\">ç¬¬8è®²</a>ä¸­ï¼Œå·²ç»æœ‰è¯¦ç»†çš„è®²è§£äº†ã€‚è¿™ä¸€è®²æˆ‘ä»¬æ€è€ƒä¸€ä¸ªè¿™æ ·çš„åœºæ™¯ï¼Œå°±æ˜¯æœ‰ä¸€äº›æ•°æ®ç»„ä»¶ä¹‹é—´éœ€è¦å…±äº«çš„æ—¶å€™ï¼Œåº”è¯¥å¦‚ä½•å®ç°ï¼Ÿ</p><p>è§£å†³è¿™ä¸ªé—®é¢˜çš„æœ€å¸¸è§çš„ä¸€ç§æ€è·¯å°±æ˜¯ï¼šä¸“é—¨å®šä¹‰ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œä»»ä½•ç»„ä»¶éœ€è¦æ•°æ®çš„æ—¶å€™éƒ½å»è¿™ä¸ªå…¨å±€å˜é‡ä¸­è·å–ã€‚ä¸€äº›é€šç”¨çš„æ•°æ®ï¼Œæ¯”å¦‚ç”¨æˆ·ç™»å½•ä¿¡æ¯ï¼Œä»¥åŠä¸€ä¸ªè·¨å±‚çº§çš„ç»„ä»¶é€šä¿¡éƒ½å¯ä»¥é€šè¿‡è¿™ä¸ªå…¨å±€å˜é‡å¾ˆå¥½åœ°å®ç°ã€‚åœ¨ä¸‹é¢çš„ä»£ç ä¸­æˆ‘ä»¬ä½¿ç”¨_storeè¿™ä¸ªå…¨å±€å˜é‡å­˜å‚¨æ•°æ®ã€‚</p><!-- [[[read_end]]] --><pre><code class=\"language-xml\">window._store = {}\n</code></pre><p>æ•°æ®å­˜å‚¨çš„ç»“æ„å›¾å¤§è‡´å¦‚ä¸‹ï¼Œä»»ä½•ç»„ä»¶å†…éƒ¨éƒ½å¯ä»¥é€šè¿‡window._storeè·å–æ•°æ®å¹¶ä¸”ä¿®æ”¹ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/4d/4b/4de32506d33f278704d2edd7b2d8914b.jpg?wh=1920x936\" alt=\"å›¾ç‰‡\"></p><p>ä½†è¿™æ ·å°±ä¼šäº§ç”Ÿä¸€ä¸ªé—®é¢˜ï¼Œwindow._storeå¹¶ä¸æ˜¯å“åº”å¼çš„ï¼Œå¦‚æœåœ¨Vueé¡¹ç›®ä¸­ç›´æ¥ä½¿ç”¨ï¼Œé‚£ä¹ˆå°±æ— æ³•è‡ªåŠ¨æ›´æ–°é¡µé¢ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦ç”¨refå’Œreactiveå»æŠŠæ•°æ®åŒ…è£¹æˆå“åº”å¼æ•°æ®ï¼Œå¹¶ä¸”æä¾›ç»Ÿä¸€çš„æ“ä½œæ–¹æ³•ï¼Œè¿™å…¶å®å°±æ˜¯æ•°æ®ç®¡ç†æ¡†æ¶Vuexçš„é›å½¢äº†ã€‚</p><h2>Vuexæ˜¯ä»€ä¹ˆ</h2><p>ä½ ç°åœ¨è‚¯å®šè·Ÿå°åœ£æœ‰åŒæ ·çš„å›°æƒ‘ï¼Œé‚£å°±æ˜¯æ„Ÿè§‰Vueå·²ç»å¤Ÿç”¨äº†ï¼Œè¿™ä¸ªVuexåˆæ˜¯åšä»€ä¹ˆçš„ï¼Ÿå…¶å®ï¼ŒVuexå­˜åœ¨çš„æ„ä¹‰ï¼Œå°±æ˜¯ç®¡ç†æˆ‘ä»¬é¡¹ç›®çš„æ•°æ®ã€‚</p><p>æˆ‘ä»¬æ˜¯ä½¿ç”¨ç»„ä»¶åŒ–æœºåˆ¶æ¥æ­å»ºæ•´ä¸ªé¡¹ç›®ï¼Œæ¯ä¸ªç»„ä»¶å†…éƒ¨æœ‰è‡ªå·±çš„æ•°æ®å’Œæ¨¡æ¿ã€‚ä½†æ˜¯æ€»æœ‰äº›æ•°æ®æ˜¯éœ€è¦å…±äº«çš„ï¼Œæ¯”å¦‚å½“å‰ç™»å½•çš„ç”¨æˆ·åã€æƒé™ç­‰æ•°æ®ï¼Œå¦‚æœéƒ½åœ¨ç»„ä»¶å†…éƒ¨ä¼ é€’ï¼Œä¼šå˜å¾—éå¸¸æ··ä¹±ã€‚</p><p>å¦‚æœæŠŠå¼€å‘çš„é¡¹ç›®æ¯”ä½œå…¬å¸çš„è¯ï¼Œæˆ‘ä»¬é¡¹ç›®ä¸­çš„å„ç§æ•°æ®å°±éå¸¸åƒåŠå…¬ç”¨å“ã€‚å¾ˆå¤šå°å…¬å¸åœ¨åˆåˆ›æ—¶æœŸä¸éœ€è¦ç®¡ç†å¤ªå¤šï¼Œå¤§å®¶éšä¾¿æ‹¿åŠå…¬ç”¨å“å°±è¡Œã€‚ä½†æ˜¯å…¬å¸å¤§äº†ä¹‹åï¼Œå°±éœ€è¦ä¸€ä¸ªä¸“é—¨çš„åŠå…¬ç”¨å“ç”³æŠ¥çš„æµç¨‹ï¼Œå¯¹æ•°æ®åšç»Ÿä¸€åœ°ç”³è¯·å’Œå‘æ”¾ï¼Œè¿™æ ·æ‰èƒ½æ–¹ä¾¿åšèµ„äº§ç®¡ç†ã€‚<strong>Vuexå°±ç›¸å½“äºæˆ‘ä»¬é¡¹ç›®ä¸­çš„å¤§ç®¡å®¶ï¼Œé›†ä¸­å¼å­˜å‚¨ç®¡ç†åº”ç”¨çš„æ‰€æœ‰ç»„ä»¶çš„çŠ¶æ€</strong>ã€‚</p><p>ä¸‹é¢ï¼Œæˆ‘ä»¬å…ˆæ¥ä¸Šæ‰‹ä½¿ç”¨ä¸€ä¸‹Vuexã€‚æˆ‘ä»¬é¡¹ç›®ç»“æ„ä¸­çš„src/storeç›®å½•ï¼Œå°±æ˜¯ä¸“é—¨ç•™ç»™Vuexçš„ï¼Œåœ¨é¡¹ç›®çš„ç›®å½•ä¸‹ï¼Œæˆ‘ä»¬æ‰§è¡Œä¸‹é¢è¿™ä¸ªå‘½ä»¤ï¼Œè¿›è¡ŒVuexçš„å®‰è£…å·¥ä½œã€‚</p><pre><code>npm install vuex@next\n</code></pre><p>å®‰è£…å®Œæˆåï¼Œæˆ‘ä»¬åœ¨src/storeä¸­å…ˆæ–°å»º index.jsï¼Œåœ¨ä¸‹é¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨createStoreæ¥åˆ›å»ºä¸€ä¸ªæ•°æ®å­˜å‚¨ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºstoreã€‚</p><p>storeå†…éƒ¨é™¤äº†æ•°æ®ï¼Œè¿˜éœ€è¦ä¸€ä¸ªmutationé…ç½®å»ä¿®æ”¹æ•°æ®ï¼Œä½ å¯ä»¥æŠŠè¿™ä¸ªmutationç†è§£ä¸ºæ•°æ®æ›´æ–°çš„ç”³è¯·å•ï¼Œmutationå†…éƒ¨çš„å‡½æ•°ä¼šæŠŠstateä½œä¸ºå‚æ•°ï¼Œæˆ‘ä»¬ç›´æ¥æ“ä½œstate.countå°±å¯ä»¥å®Œæˆæ•°æ®çš„ä¿®æ”¹ã€‚</p><pre><code class=\"language-xml\">import { createStore } from 'vuex'\n\nconst store = createStore({\n  state () {\n    return {\n      count: 666\n    }\n  },\n  mutations: {\n    add (state) {\n      state.count++\n    }\n  }\n})\n</code></pre><p>ç°åœ¨ä½ ä¼šå‘ç°ï¼Œæˆ‘ä»¬çš„ä»£ç é‡Œï¼Œåœ¨Vueçš„ç»„ä»¶ç³»ç»Ÿä¹‹å¤–ï¼Œå¤šäº†ä¸€ä¸ªæ•°æ®æºï¼Œé‡Œé¢åªæœ‰ä¸€ä¸ªå˜é‡countï¼Œå¹¶ä¸”æœ‰ä¸€ä¸ªæ–¹æ³•å¯ä»¥ç´¯åŠ è¿™ä¸ªcountã€‚ç„¶åï¼Œæˆ‘ä»¬åœ¨Vueä¸­æ³¨å†Œè¿™ä¸ªæ•°æ®æºï¼Œåœ¨é¡¹ç›®å…¥å£æ–‡ä»¶src/main.jsä¸­ï¼Œä½¿ç”¨app.use(store)è¿›è¡Œæ³¨å†Œï¼Œè¿™æ ·Vueå’ŒVuexå°±è¿æ¥ä¸Šäº†ã€‚</p><p>ç„¶åï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>.use</code> å°±å¯ä»¥å¯¹è·¯ç”±è¿›è¡Œæ³¨å†Œï¼Œä½¿ç”¨ <code>.mount</code> å°±å¯ä»¥æŠŠ Vue è¿™ä¸ªåº”ç”¨æŒ‚è½½åˆ°é¡µé¢ä¸Šï¼Œä»£ç å¦‚ä¸‹ã€‚</p><pre><code class=\"language-xml\">const app = createApp(App)\napp.use(store)\n    .use(router)\n    .mount('#app')\n</code></pre><p>ä¹‹åï¼Œæˆ‘ä»¬åœ¨src/componentsæ–‡ä»¶å¤¹ä¸‹æ–°å»ºä¸€ä¸ªCount.vueç»„ä»¶ï¼Œåœ¨ä¸‹é¢çš„ä»£ç ä¸­ï¼Œtemplateä¸­çš„ä»£ç æˆ‘ä»¬å¾ˆç†Ÿæ‚‰äº†ï¼Œå°±æ˜¯ä¸€ä¸ªdivæ¸²æŸ“äº†countå˜é‡ï¼Œå¹¶ä¸”ç‚¹å‡»çš„æ—¶å€™è§¦å‘addæ–¹æ³•ã€‚åœ¨scriptä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨useStoreå»è·å–æ•°æ®æºï¼Œåˆå§‹åŒ–å€¼å’Œä¿®æ”¹çš„å‡½æ•°æœ‰ä¸¤ä¸ªå˜åŒ–ï¼š</p><ul>\n<li>countä¸æ˜¯ä½¿ç”¨refç›´æ¥å®šä¹‰ï¼Œè€Œæ˜¯ä½¿ç”¨è®¡ç®—å±æ€§è¿”å›äº†store.state.countï¼Œä¹Ÿå°±æ˜¯åˆšæ‰åœ¨src/store/index.jsä¸­å®šä¹‰çš„countã€‚</li>\n<li>addå‡½æ•°æ˜¯ç”¨æ¥ä¿®æ”¹æ•°æ®ï¼Œè¿™é‡Œæˆ‘ä»¬ä¸èƒ½ç›´æ¥å»æ“ä½œ store.state.count +=1ï¼Œå› ä¸ºè¿™ä¸ªæ•°æ®å±äºVuexç»Ÿä¸€ç®¡ç†ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦ä½¿ç”¨store.commit(â€˜addâ€™)å»è§¦å‘Vuexä¸­çš„mutationå»ä¿®æ”¹æ•°æ®ã€‚</li>\n</ul><pre><code class=\"language-xml\">&lt;template&gt;\n&lt;div @click=\"add\"&gt;\n    {{count}}\n&lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script setup&gt;\nimport { computed } from 'vue'\nimport {useStore} from 'vuex'\nlet store = useStore()\nlet count = computed(()=&gt;store.state.count)\n\nfunction add(){\n    store.commit('add')\n}\n&lt;/script&gt;\n</code></pre><p>åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€é¡¹ç›®é¡µé¢ï¼Œæˆ‘ä»¬å°±ä¼šæœ‰ä¸€ä¸ªç´¯åŠ å™¨çš„æ•ˆæœã€‚ç›¸æ¯”èµ·æ¥ä¹‹å‰ç”¨refçš„æ–¹å¼ï¼ŒçœŸçš„å¾ˆç®€å•ï¼Œè¿™æ—¶å€™å°åœ£å°±é—®äº†æˆ‘ä¸€ä¸ªé—®é¢˜ï¼šä»€ä¹ˆæ—¶å€™çš„æ•°æ®ç”¨Vuexç®¡ç†ï¼Œä»€ä¹ˆæ—¶å€™æ•°æ®è¦æ”¾åœ¨ç»„ä»¶å†…éƒ¨ä½¿ç”¨refç®¡ç†å‘¢ï¼Ÿ</p><p>ç­”æ¡ˆå°±æ˜¯ï¼Œ<strong>å¯¹äºä¸€ä¸ªæ•°æ®ï¼Œå¦‚æœåªæ˜¯ç»„ä»¶å†…éƒ¨ä½¿ç”¨å°±æ˜¯ç”¨refç®¡ç†ï¼›å¦‚æœæˆ‘ä»¬éœ€è¦è·¨ç»„ä»¶ï¼Œè·¨é¡µé¢å…±äº«çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±éœ€è¦æŠŠæ•°æ®ä»Vueçš„ç»„ä»¶å†…éƒ¨æŠ½ç¦»å‡ºæ¥ï¼Œæ”¾åœ¨Vuexä¸­å»ç®¡ç†</strong>ã€‚</p><p>æˆ‘å†ç»“åˆä¾‹å­å…·ä½“è¯´è¯´ï¼šæ¯”å¦‚é¡¹ç›®ä¸­çš„ç™»å½•ç”¨æˆ·åï¼Œé¡µé¢çš„å³ä¸Šè§’éœ€è¦æ˜¾ç¤ºï¼Œæœ‰äº›ä¿¡æ¯å¼¹çª—ä¹Ÿéœ€è¦æ˜¾ç¤ºã€‚è¿™æ ·çš„æ•°æ®å°±éœ€è¦æ”¾åœ¨Vuexä¸­ç»Ÿä¸€ç®¡ç†ï¼Œæ¯å½“éœ€è¦æŠ½ç¦»è¿™æ ·çš„æ•°æ®çš„æ—¶å€™ï¼Œæˆ‘ä»¬éƒ½éœ€è¦æ€è€ƒè¿™ä¸ªæ•°æ®çš„åˆå§‹åŒ–å’Œæ›´æ–°é€»è¾‘ã€‚</p><p>å°±åƒä¸‹å›¾ä¸­ï¼Œé¡¹ç›®åˆå§‹åŒ–çš„æ—¶å€™æ²¡æœ‰ç™»å½•çŠ¶æ€ï¼Œæˆ‘ä»¬æ˜¯åœ¨ç”¨æˆ·ç™»å½•æˆåŠŸä¹‹åï¼Œæ‰èƒ½è·å–ç”¨æˆ·åè¿™ä¸ªä¿¡æ¯ï¼Œå»ä¿®æ”¹Vuexçš„æ•°æ®ï¼Œå†é€šè¿‡Vuexæ´¾å‘åˆ°æ‰€æœ‰çš„ç»„ä»¶ä¸­ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/9f/b9/9fca00b12fb51d52bbb48277a3c4e2b9.jpg?wh=1920x1224\" alt=\"å›¾ç‰‡\"></p><h2>æ‰‹å†™è¿·ä½ Vuex</h2><p>çŸ¥é“äº†Vuexæ˜¯ä»€ä¹ˆï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ä¸å¦¨åŠ¨æ‰‹å®ç°ä¸€ä¸ªè¿·ä½ çš„Vuexï¼Œè¿™èƒ½è®©ä½ çœ‹åˆ°Vuexçš„å¤§è‡´åŸç†ã€‚</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªå˜é‡storeç”¨æ¥å­˜å‚¨æ•°æ®ã€‚ä¸‹ä¸€æ­¥å°±æ˜¯æŠŠè¿™ä¸ªstoreçš„æ•°æ®åŒ…è½¬æˆå“åº”å¼çš„æ•°æ®ï¼Œå¹¶ä¸”æä¾›ç»™Vueç»„ä»¶ä½¿ç”¨ã€‚åœ¨Vueä¸­æœ‰ <a href=\"https://v3.cn.vuejs.org/guide/component-provide-inject.html#%E5%A4%84%E7%90%86%E5%93%8D%E5%BA%94%E6%80%A7\">provide/inject</a> è¿™ä¸¤ä¸ªå‡½æ•°ä¸“é—¨ç”¨æ¥åšæ•°æ®å…±äº«ï¼Œprovideæ³¨å†Œäº†æ•°æ®åï¼Œæ‰€æœ‰çš„å­ç»„ä»¶éƒ½å¯ä»¥é€šè¿‡injectè·å–æ•°æ®ï¼Œè¿™ä¸¤ä¸ªå‡½æ•°å®˜æ–¹æ–‡æ¡£ä»‹ç»å¾—æ¯”è¾ƒè¯¦ç»†ï¼Œæˆ‘åœ¨è¿™é‡Œå°±ä¸è¿‡å¤šè§£é‡Šäº†ã€‚</p><p>å®Œæˆåˆšæ‰çš„æ•°æ®è½¬æ¢ä¹‹åï¼Œæˆ‘ä»¬ç›´æ¥è¿›å…¥åˆ°src/storeæ–‡ä»¶å¤¹ä¸‹ï¼Œæ–°å»ºgvuex.jsã€‚ä¸‹é¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªStoreç±»æ¥ç®¡ç†æ•°æ®ï¼Œç±»çš„å†…éƒ¨ä½¿ç”¨_stateå­˜å‚¨æ•°æ®ï¼Œä½¿ç”¨mutationsæ¥å­˜å‚¨æ•°æ®ä¿®æ”¹çš„å‡½æ•°ï¼Œæ³¨æ„è¿™é‡Œçš„stateå·²ç»ä½¿ç”¨reactiveåŒ…è£¹æˆå“åº”å¼æ•°æ®äº†ã€‚</p><pre><code class=\"language-xml\">import { inject, reactive } from 'vue'\n\nconst STORE_KEY = '__store__'\nfunction useStore() {\n  return inject(STORE_KEY)\n}\nfunction createStore(options) {\n  return new Store(options)\n}\nclass Store {\n  constructor(options) {\n    this._state = reactive({\n      data: options.state()\n    })\n    this._mutations = options.mutations\n  }\n}\nexport { createStore, useStore }\n</code></pre><p>ä¸Šé¢çš„ä»£ç è¿˜æš´éœ²äº†createStoreå»åˆ›å»ºStoreçš„å®ä¾‹ï¼Œå¹¶ä¸”å¯ä»¥åœ¨ä»»æ„ç»„ä»¶çš„setupå‡½æ•°å†…ï¼Œä½¿ç”¨useStoreå»è·å–storeçš„å®ä¾‹ã€‚ä¸‹ä¸€æ­¥æˆ‘ä»¬å›åˆ°src/store/index.jsä¸­ï¼ŒæŠŠvuexæ”¹æˆ ./gvuexã€‚</p><p>ä¸‹é¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨createStoreåˆ›å»ºäº†ä¸€ä¸ªstoreå®ä¾‹ï¼Œå¹¶ä¸”å®ä¾‹å†…éƒ¨ä½¿ç”¨stateå®šä¹‰äº†countå˜é‡å’Œä¿®æ”¹countå€¼çš„addå‡½æ•°ã€‚</p><pre><code>// import { createStore } from 'vuex'\nimport { createStore } from './gvuex'\nconst store = ...\nexport default store\n</code></pre><p>æœ€ç»ˆæˆ‘ä»¬ä½¿ç”¨storeçš„æ–¹å¼ï¼Œåœ¨é¡¹ç›®å…¥å£æ–‡ä»¶src/main.jsä¸­ä½¿ç”¨app.use(store)æ³¨å†Œã€‚ä¸ºäº†è®©useStoreèƒ½æ­£å¸¸å·¥ä½œï¼Œä¸‹é¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ç»™storeæ–°å¢ä¸€ä¸ªinstallæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šåœ¨app.useå‡½æ•°å†…éƒ¨æ‰§è¡Œã€‚æˆ‘ä»¬é€šè¿‡app.provideå‡½æ•°æ³¨å†Œstoreç»™å…¨å±€çš„ç»„ä»¶ä½¿ç”¨ã€‚</p><pre><code class=\"language-xml\">class Store {\n  // main.jså…¥å£å¤„app.use(store)çš„æ—¶å€™ï¼Œä¼šæ‰§è¡Œè¿™ä¸ªå‡½æ•°\n  install(app) {\n    app.provide(STORE_KEY, this)\n  }\n}\n</code></pre><p>ä¸‹é¢çš„ä»£ç ä¸­ï¼ŒStoreç±»å†…éƒ¨å˜é‡_stateå­˜å‚¨å“åº”å¼æ•°æ®ï¼Œè¯»å–stateçš„æ—¶å€™ç›´æ¥è·å–å“åº”å¼æ•°æ®_state.dataï¼Œå¹¶ä¸”æä¾›äº†commitå‡½æ•°å»æ‰§è¡Œç”¨æˆ·é…ç½®å¥½çš„mutationsã€‚</p><pre><code class=\"language-xml\">import { inject, reactive } from 'vue'\nconst STORE_KEY = '__store__'\nfunction useStore() {\n  return inject(STORE_KEY)\n}\nfunction createStore(options) {\n  return new Store(options)\n}\nclass Store {\n  constructor(options) {\n    this.$options = options\n    this._state = reactive({\n      data: options.state\n    })\n    this._mutations = options.mutations\n  }\n  get state() {\n    return this._state.data\n  }\n  commit = (type, payload) =&gt; {\n    const entry = this._mutations[type]\n    entry &amp;&amp; entry(this.state, payload)\n  }\n  install(app) {\n    app.provide(STORE_KEY, this)\n  }\n}\nexport { createStore, useStore }\n</code></pre><p>è¿™æ ·åœ¨ç»„ä»¶å†…éƒ¨ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªè¿·ä½ çš„Vuexå»å®ç°ä¸€ä¸ªç´¯åŠ å™¨äº†ã€‚ä¸‹é¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨useStoreè·å–storeçš„å®ä¾‹ï¼Œå¹¶ä¸”ä½¿ç”¨è®¡ç®—å±æ€§è¿”å›countï¼Œåœ¨ä¿®æ”¹countçš„æ—¶å€™ä½¿ç”¨store.commit(â€˜addâ€™)æ¥ä¿®æ”¹countçš„å€¼ã€‚</p><pre><code class=\"language-xml\">import {useStore} from '../store/gvuex'\nlet store =useStore()\nlet count = computed(()=&gt;store.state.count)\nfunction add(){\n    store.commit('add')\n}\n\n</code></pre><p>æ­å–œä½ ï¼Œè¿™æ ·å€ŸåŠ©vueçš„æ’ä»¶æœºåˆ¶å’Œreactiveå“åº”å¼åŠŸèƒ½ï¼Œæˆ‘ä»¬åªç”¨30è¡Œä»£ç ï¼Œå°±å®ç°äº†ä¸€ä¸ªæœ€è¿·ä½ çš„æ•°æ®ç®¡ç†å·¥å…·ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªè¿·ä½ çš„Vuexå®ç°ï¼Œä¸‹é¢æˆ‘ä»¬å†ç»“åˆä¾‹å­ï¼Œæ­£å¼ä»‹ç»ä¸€ä¸‹Vuexçœ‹ä¸€çœ‹Vuexå…·ä½“æ€ä¹ˆç”¨ï¼Ÿ</p><h2>Vuexå®æˆ˜</h2><p>ä»ä¸Šé¢çš„ä¾‹å­ä½ å¯ä»¥ç«‹å³çœ‹å‡ºï¼ŒVuexå°±æ˜¯ä¸€ä¸ªå…¬ç”¨ç‰ˆæœ¬çš„refï¼Œæä¾›å“åº”å¼æ•°æ®ç»™æ•´ä¸ªé¡¹ç›®ä½¿ç”¨ã€‚ç°åœ¨çš„åŠŸèƒ½è¿˜æ¯”è¾ƒç®€å•ï¼Œé¡¹ç›®å¤§éƒ¨åˆ†æƒ…å†µéƒ½æ˜¯åƒä¹‹å‰çš„æ¸…å•åº”ç”¨ä¸€æ ·ï¼Œé™¤äº†ç®€å•çš„æ•°æ®ä¿®æ”¹ï¼Œè¿˜ä¼šæœ‰ä¸€äº›å¼‚æ­¥ä»»åŠ¡çš„è§¦å‘ï¼Œè¿™äº›åœºæ™¯Vuexéƒ½æœ‰ä¸“é—¨çš„å¤„ç†æ–¹å¼ã€‚</p><p>åœ¨Vuexä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨gettersé…ç½®ï¼Œæ¥å®ç°computedçš„åŠŸèƒ½ï¼Œæ¯”å¦‚æˆ‘ä»¬æƒ³æ˜¾ç¤ºç´¯åŠ å™¨æ•°å­—ä¹˜ä»¥2ä¹‹åçš„å€¼ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦å¼•å…¥gettersé…ç½®ã€‚</p><p>ä¸‹é¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬å®ç°äº†è®¡ç®—ç´¯åŠ å™¨æ•°å­—ä¹˜ä»¥2ä»¥åçš„å€¼ã€‚æˆ‘ä»¬åœ¨Vuexä¸­æ–°å¢äº†gettersé…ç½®ï¼Œå…¶å®gettersé…ç½®å’ŒVueä¸­çš„computedæ˜¯ä¸€æ ·çš„å†™æ³•å’ŒåŠŸèƒ½ã€‚æˆ‘ä»¬é…ç½®äº†doubuleå‡½æ•°ï¼Œç”¨äºæ˜¾ç¤ºcountä¹˜ä»¥2çš„è®¡ç®—ç»“æœã€‚</p><pre><code class=\"language-xml\">import { createStore } from 'vuex'\nconst store = createStore({\n  state () {\n    return {\n      count: 666\n    }\n  },\n  getters:{\n    double(state){\n          return state.count*2\n      }\n  },\n  mutations: {\n    add (state) {\n      state.count++\n    }\n  }\n})\n\nexport default store\n</code></pre><p>ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿åœ°åœ¨ç»„ä»¶ä¸­ä½¿ç”¨gettersï¼ŒæŠŠdoubleå¤„ç†å’Œè®¡ç®—çš„é€»è¾‘äº¤ç»™Vuexã€‚</p><pre><code class=\"language-xml\">let double = computed(()=&gt;store.getters.double)\n</code></pre><p>å®é™…é¡¹ç›®å¼€å‘ä¸­ï¼Œæœ‰å¾ˆå¤šæ•°æ®æˆ‘ä»¬éƒ½æ˜¯ä»ç½‘ç»œè¯·æ±‚ä¸­è·å–åˆ°çš„ã€‚åœ¨Vuexä¸­ï¼Œmutationçš„è®¾è®¡å°±æ˜¯ç”¨æ¥å®ç°åŒæ­¥åœ°ä¿®æ”¹æ•°æ®ã€‚å¦‚æœæ•°æ®æ˜¯å¼‚æ­¥ä¿®æ”¹çš„ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ–°çš„é…ç½®actionã€‚ç°åœ¨æˆ‘ä»¬æ¨¡æ‹Ÿä¸€ä¸ªå¼‚æ­¥çš„åœºæ™¯ï¼Œå°±æ˜¯ç‚¹å‡»æŒ‰é’®ä¹‹åçš„1ç§’ï¼Œå†å»åšæ•°æ®çš„ä¿®æ”¹ã€‚</p><p>é¢å¯¹è¿™ç§å¼‚æ­¥çš„ä¿®æ”¹éœ€æ±‚ï¼Œåœ¨Vuexä¸­ä½ éœ€è¦æ–°å¢actionçš„é…ç½®ï¼Œåœ¨actionä¸­ä½ å¯ä»¥åšä»»æ„çš„å¼‚æ­¥å¤„ç†ã€‚è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨setTimeoutæ¥æ¨¡æ‹Ÿå»¶æ—¶ï¼Œç„¶ååœ¨actionå†…éƒ¨è°ƒç”¨mutationå°±å¯ä»¥äº†ã€‚</p><p>å¬èµ·æ¥æ˜¯ä¸æ˜¯å¾ˆç»•ï¼Ÿä¸è¿‡ä½ ä¸ç”¨æ‹…å¿ƒï¼Œä¸‹é¢çš„ä»£ç å°±å¾ˆæ¸…æ™°åœ°æ¼”ç¤ºäº†è¿™ä¸ªè¿‡ç¨‹ã€‚</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬åœ¨createStoreçš„é…ç½®ä¸­ï¼Œæ–°å¢äº†actionsé…ç½®ï¼Œè¿™ä¸ªé…ç½®ä¸­æ‰€æœ‰çš„å‡½æ•°ï¼Œå¯ä»¥é€šè¿‡è§£æ„è·å¾—commitå‡½æ•°ã€‚å†…éƒ¨çš„å¼‚æ­¥ä»»åŠ¡å®Œæˆåï¼Œå°±éšæ—¶å¯ä»¥è°ƒç”¨commitæ¥æ‰§è¡Œmutationså»æ›´æ–°æ•°æ®ã€‚</p><pre><code class=\"language-xml\">const store = createStore({\n  state () {\n    return {\n      count: 666\n    }\n  },\n  ...\n  actions:{\n      asyncAdd({commit}){\n          setTimeout(()=&gt;{\n            commit('add')\n          },1000)\n      }\n  }\n})\n\n</code></pre><p><strong>actionå¹¶ä¸æ˜¯ç›´æ¥ä¿®æ”¹æ•°æ®ï¼Œè€Œæ˜¯é€šè¿‡mutationså»ä¿®æ”¹ï¼Œè¿™æ˜¯æˆ‘æé†’ä½ éœ€è¦æ³¨æ„çš„</strong>ã€‚actionsçš„è°ƒç”¨æ–¹å¼æ˜¯ä½¿ç”¨store.dispatchï¼Œåœ¨ä¸‹é¢çš„ä»£ç ä¸­ä½ å¯ä»¥çœ‹åˆ°è¿™æ ·çš„å˜åŒ–æ•ˆæœï¼šé¡µé¢ä¸­æ–°å¢äº†ä¸€ä¸ªasyncAddçš„æŒ‰é’®ï¼Œç‚¹å‡»åä¼šå»¶è¿Ÿä¸€ç§’åšç´¯åŠ ã€‚</p><pre><code class=\"language-xml\">function asyncAdd(){\n    store.dispatch('asyncAdd')\n}\n</code></pre><p>ä»£ç æ‰§è¡Œçš„æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/d0/b4/d07df967ed262e3fd02751fdc55171b4.gif?wh=435x239\" alt=\"å›¾ç‰‡\"></p><p>Vuexåœ¨æ•´ä½“ä¸Šçš„é€»è¾‘å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œä»å®è§‚æ¥è¯´ï¼ŒVueçš„ç»„ä»¶è´Ÿè´£æ¸²æŸ“é¡µé¢ï¼Œç»„ä»¶ä¸­ç”¨åˆ°è·¨é¡µé¢çš„æ•°æ®ï¼Œå°±æ˜¯ç”¨stateæ¥å­˜å‚¨ï¼Œä½†æ˜¯Vueä¸èƒ½ç›´æ¥ä¿®æ”¹stateï¼Œè€Œæ˜¯è¦é€šè¿‡actions/mutationså»åšæ•°æ®çš„ä¿®æ”¹ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/85/28/851478d3f2b0393474de6e5b3b355a28.png?wh=1280x866\" alt=\"\"></p><p>ä¸‹é¢è¿™ä¸ªå›¾ä¹Ÿæ˜¯Vuexå®˜æ–¹çš„ç»“æ„å›¾ï¼Œå¾ˆå¥½åœ°æ‹†è§£äº†Vuexåœ¨Vueå…¨å®¶æ¡¶ä¸­çš„å®šä½ï¼Œæˆ‘ä»¬é¡¹ç›®ä¸­ä¹Ÿä¼šç”¨Vuexæ¥ç®¡ç†æ‰€æœ‰çš„è·¨ç»„ä»¶çš„æ•°æ®ï¼Œå¹¶ä¸”æˆ‘ä»¬ä¹Ÿä¼šåœ¨Vuexå†…éƒ¨æ ¹æ®åŠŸèƒ½æ¨¡å—å»åšæ‹†åˆ†ï¼Œä¼šæŠŠç”¨æˆ·ã€æƒé™ç­‰ä¸åŒæ¨¡å—çš„ç»„ä»¶åˆ†å¼€å»ç®¡ç†ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/23/7a/237557819e2148ac022305eaf86c0b7a.png?wh=701x551\" alt=\"å›¾ç‰‡\"></p><p>ç”±äºVuexæ‰€æœ‰çš„æ•°æ®ä¿®æ”¹éƒ½æ˜¯é€šè¿‡mutationsæ¥å®Œæˆçš„ï¼Œå› è€Œæˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿åœ°ç›‘æ§åˆ°æ•°æ®çš„åŠ¨æ€å˜åŒ–ï¼Œåé¢æˆ‘ä»¬å¯ä»¥å€ŸåŠ©å®˜æ–¹çš„è°ƒè¯•å·¥å…·ï¼Œéå¸¸æ–¹ä¾¿åœ°å»è°ƒè¯•é¡¹ç›®ä¸­çš„æ•°æ®å˜åŒ–ã€‚</p><p>å›åˆ°æ­£åœ¨åšçš„è¿™ä¸ªé¡¹ç›®ä¸­ï¼Œæœ‰å¤§é‡çš„æ•°æ®äº¤äº’éœ€æ±‚ã€ç”¨æˆ·çš„ç™»å½•çŠ¶æ€ã€ç™»å½•çš„æœ‰æ•ˆæœŸã€å¸ƒå±€çš„è®¾ç½®ï¼Œä¸åŒç”¨æˆ·è¿˜ä¼šæœ‰ä¸åŒçš„èœå•æƒé™ç­‰ã€‚</p><p>ä¸è¿‡é¢å¯¹çœ¼èŠ±ç¼­ä¹±çš„äº¤äº’éœ€æ±‚ï¼Œä½ ä¸èƒ½è‡ªä¹±é˜µè„šã€‚æ€»ä½“æ¥è¯´ï¼Œ<strong>æˆ‘ä»¬åœ¨å†³å®šä¸€ä¸ªæ•°æ®æ˜¯å¦ç”¨Vuexæ¥ç®¡ç†çš„æ—¶å€™ï¼Œæ ¸å¿ƒå°±æ˜¯è¦æ€è€ƒæ¸…æ¥šï¼Œè¿™ä¸ªæ•°æ®æ˜¯å¦æœ‰å…±äº«ç»™å…¶ä»–é¡µé¢æˆ–è€…æ˜¯å…¶ä»–ç»„ä»¶çš„éœ€è¦</strong>ã€‚å¦‚æœéœ€è¦ï¼Œå°±æ”¾ç½®åœ¨Vuexä¸­ç®¡ç†ï¼›å¦‚æœä¸éœ€è¦ï¼Œå°±åº”è¯¥æ”¾åœ¨ç»„ä»¶å†…éƒ¨ä½¿ç”¨refæˆ–è€…reactiveå»ç®¡ç†ã€‚</p><h2>ä¸‹ä¸€ä»£Vuex</h2><p>Vuexç”±äºåœ¨APIçš„è®¾è®¡ä¸Šï¼Œå¯¹TypeScriptçš„ç±»å‹æ¨å¯¼çš„æ”¯æŒæ¯”è¾ƒå¤æ‚ï¼Œç”¨èµ·æ¥å¾ˆæ˜¯ç—›è‹¦ã€‚å› ä¸ºæˆ‘ä»¬çš„é¡¹ç›®ä¸€ç›´ç”¨çš„éƒ½æ˜¯JavaScriptï¼Œä½ å¯èƒ½æ„Ÿè§¦å¹¶ä¸æ·±ï¼Œä½†å¯¹äºä½¿ç”¨TypeScriptçš„ç”¨æˆ·æ¥è¯´ï¼ŒVuexçš„è¿™ç§é—®é¢˜æ˜¯å¾ˆæ˜æ˜¾çš„ã€‚</p><p>ä¸ºäº†è§£å†³Vuexçš„è¿™ä¸ªé—®é¢˜ï¼ŒVuexçš„ä½œè€…æœ€è¿‘å‘å¸ƒäº†ä¸€ä¸ªæ–°çš„ä½œå“å«Piniaï¼Œå¹¶å°†å…¶ç§°ä¹‹ä¸ºä¸‹ä¸€ä»£çš„Vuexã€‚Piniaçš„APIçš„è®¾è®¡éå¸¸æ¥è¿‘Vuex5çš„ææ¡ˆï¼Œé¦–å…ˆï¼ŒPiniaä¸éœ€è¦Vuexè‡ªå®šä¹‰å¤æ‚çš„ç±»å‹å»æ”¯æŒTypeScriptï¼Œå¤©ç”Ÿå¯¹ç±»å‹æ¨æ–­å°±éå¸¸å‹å¥½ï¼Œå¹¶ä¸”å¯¹Vue Devtoolçš„æ”¯æŒä¹Ÿéå¸¸å¥½ï¼Œæ˜¯ä¸€ä¸ªå¾ˆæœ‰æ½œåŠ›çš„çŠ¶æ€ç®¡ç†æ¡†æ¶ã€‚</p><h2>æ€»ç»“</h2><p>ä»Šå¤©çš„å­¦ä¹ å†…å®¹å¹¶ä¸éš¾ï¼Œä¸»è¦æ˜¯å¼•å…¥äº†ä¸€ä¸ªæ–°çš„æ¡†æ¶Vuexå’Œæ•°æ®ç®¡ç†çš„æ¦‚å¿µï¼Œè®©æˆ‘ä»¬ä¸€èµ·æ¥å›é¡¾ä¸€ä¸‹ã€‚</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬ä»å‰ç«¯æ•°æ®ç®¡ç†æ¦‚å¿µå¼€å§‹è®²èµ·ã€‚æ¯ä¸ªç»„ä»¶å†…éƒ¨æœ‰è‡ªå·±çš„æ•°æ®å’Œæ¨¡æ¿ï¼Œé‚£å…±äº«çš„æ•°æ®æ€ä¹ˆç§‘å­¦ç®¡ç†å‘¢ï¼Ÿè¿™å°±éœ€è¦Vuexå‡ºé©¬äº†ã€‚</p><p>ç®€å•æ¥è¯´ï¼ŒVuexæ˜¯ä¸€ä¸ªçŠ¶æ€å’Œæ•°æ®ç®¡ç†çš„æ¡†æ¶ï¼Œè´Ÿè´£ç®¡ç†é¡¹ç›®ä¸­å¤šä¸ªç»„ä»¶å’Œå¤šä¸ªé¡µé¢å…±äº«çš„æ•°æ®ã€‚åœ¨å¼€å‘é¡¹ç›®çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±ä¼šæŠŠæ•°æ®åˆ†æˆä¸¤ä¸ªéƒ¨åˆ†ï¼Œä¸€ç§æ•°æ®æ˜¯åœ¨æŸä¸ªç»„ä»¶å†…éƒ¨ä½¿ç”¨ï¼Œæˆ‘ä»¬ä½¿ç”¨refæˆ–è€…reactiveå®šä¹‰å³å¯ï¼Œå¦å¤–ä¸€ç§æ•°æ®éœ€è¦è·¨é¡µé¢å…±äº«ï¼Œå°±éœ€è¦ä½¿ç”¨Vuexæ¥è¿›è¡Œç®¡ç†ã€‚</p><p>ä¹‹åï¼Œæˆ‘ä»¬è¿˜è®²åˆ°äº†Vuexå¸¦æ¥äº†å‡ ä¸ªæ–°çš„æ¦‚å¿µï¼Œæˆ‘ä»¬ä½¿ç”¨stateå®šä¹‰æ•°æ®ï¼Œä½¿ç”¨mutationå®šä¹‰ä¿®æ”¹æ•°æ®çš„é€»è¾‘ï¼Œå¹¶ä¸”åœ¨ç»„ä»¶ä¸­ä½¿ç”¨commitå»è°ƒç”¨mutationsã€‚åœ¨æ­¤åŸºç¡€ä¹‹ä¸Šï¼Œè¿˜å¯ä»¥ç”¨getterså»å®ç°Vuexä¸–ç•Œçš„è®¡ç®—å±æ€§ï¼Œä½¿ç”¨actionæ¥å»å®šä¹‰å¼‚æ­¥ä»»åŠ¡ï¼Œå¹¶ä¸”åœ¨å†…éƒ¨è°ƒç”¨mutationå»åŒæ­¥æ•°æ®ã€‚</p><p>Vuexçš„å‡ºç°ï¼Œè®©æˆ‘ä»¬æ•´ä¸ªé¡¹ç›®ä¸­çš„æ•°æ®æµåŠ¨å˜å¾—éå¸¸è‡ªç„¶ã€‚æ•°æ®æµå‘ç»„ä»¶ï¼Œä½†ç»„ä»¶ä¸èƒ½ç›´æ¥ä¿®æ”¹æ•°æ®ï¼Œè€Œæ˜¯è¦é€šè¿‡mutationæå‡ºç”³è¯·ï¼Œmutationå»ä¿®æ”¹æ•°æ®ï¼Œå½¢æˆäº†ä¸€ä¸ªåœ†ç¯ã€‚è¿™ç§æ–¹å¼å¯¹äºæˆ‘ä»¬é¡¹ç›®çš„å¼€å‘ã€ç»´æŠ¤å’Œè°ƒè¯•éƒ½æ˜¯æœ‰å¾ˆå¤§çš„å¸®åŠ©ã€‚ä¹‹åï¼Œæˆ‘ä»¬ä¸€èµ·æ‰‹å†™äº†ä¸€ä¸ªè¿·ä½ çš„Vuexï¼Œé€šè¿‡å®æˆ˜å·©å›ºå‰é¢çš„å­¦ä¹ ã€‚</p><p>æœ€åï¼Œæˆ‘è¿˜ç®€å•ä»‹ç»äº†ä¸€ä¸‹Piniaè¿™ä¸ªæ¡†æ¶ï¼ŒPiniaç®—æ˜¯ä¸‹ä¸€ä»£çš„Vuexï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥å»Piniaçš„å®˜ç½‘å­¦ä¹ ä¸€ä¸‹ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>ç›¸ä¿¡ä»Šå¤©çš„è¯¾ç¨‹ç»“æŸåï¼Œä½ å¯¹Vuexä¼šæœ‰ä¸ä¸€æ ·çš„äº†è§£ï¼Œé‚£ä¹ˆä½ çš„é¡¹ç›®é‡Œå“ªäº›æ•°æ®è¦æ”¾åœ¨Vuexä¸­å‘¢ï¼Ÿ</p><p>æ¬¢è¿åœ¨ç•™è¨€åŒºåˆ†äº«ä½ çš„ç­”æ¡ˆï¼Œå¹¶å’Œæˆ‘ä¸€èµ·äº¤æµè®¨è®ºï¼Œæˆ‘ä»¬ä¸‹ä¸€è®²è§ï¼</p>","comments":[{"had_liked":false,"id":320523,"user_name":"ll","can_delete":false,"product_type":"c1","uid":1296458,"ip_address":"","ucode":"57C5DAC5B51036","user_header":"https://static001.geekbang.org/account/avatar/00/13/c8/4a/3a322856.jpg","comment_is_top":true,"comment_ctime":1636365608,"is_pvip":true,"replies":[{"id":"116208","content":"ç²¾å“å›å¤ï¼ï¼èµèµèµ","user_name":"ä½œè€…å›å¤","comment_id":320523,"uid":"1003715","ip_address":"","utype":1,"ctime":1636378176,"user_name_real":"èŠ±æœå±±å¤§åœ£"}],"discussion_count":1,"race_medal":0,"score":"9.2233721716350996e+18","product_id":100094401,"comment_content":"éå¸¸æ£’çš„ä¸€èŠ‚ï¼Œåœ¨å­¦ä¹ å†…å®¹çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä¹Ÿåœ¨å›é¡¾ä¹‹å‰å­¦ä¹ å…³äº Vuex çš„çŸ¥è¯†ï¼Œåœ¨å†™miniVuex çš„å®ç°çš„ä»£ç åï¼Œå¯¹ç»„ä»¶åŒ–æœ‰äº†æ–°çš„è®¤è¯†ï¼Œç®€å•è¯´ä¸‹ä½“ä¼šã€‚<br><br> â€œç»„ä»¶åŒ–â€ æ˜¯è§£å†³â€œå¤æ‚â€é—®é¢˜çš„é‡è¦æ€æƒ³ã€‚å…¶å®ç°å°±æ˜¯ä¸€ä¸ªä¸ªâ€œç»„ä»¶â€ï¼Œå³ä½¿è¡¨ç°æ–¹å¼ä¸åŒï¼Œæ ¸å¿ƒè¿˜æ˜¯ MVX çš„æ¨¡å‹ã€‚<br><br> è¿™æ ·ç†è§£ï¼Œç»„ä»¶å†…çš„ state å°±æ˜¯ modelï¼Œæ¸²æŸ“å‡ºæ¥çš„â€œå›¾å½¢â€å°±æ˜¯ viewï¼Œè€Œè¿™ä¸ª X æ˜¯è¿™ model ä¸ view çš„â€œæ²Ÿé€šæ–¹å¼â€ï¼Œå®ƒå¯ä»¥æ˜¯ controlï¼Œä¹Ÿå¯ä»¥æ˜¯ view modelï¼Œå¤§æ¦‚å°±è¿™ä¸ªæ„æ€ã€‚è¿™é‡Œè¦æ³¨æ„ï¼Œmodel å’Œ view ä¸åº”è¯¥ç›´æ¥æ²Ÿé€šã€‚<br><br>æˆ‘ä»¬ç°åœ¨çš„å·¥ä½œå°±æ˜¯åœ¨â€œæ­ç§¯æœ¨â€ï¼Œæ€ä¹ˆæ­å¾ˆé‡è¦ï¼Œä½†æ˜¯äº†è§£æ‰‹ä¸­çš„â€œç§¯æœ¨â€ä¹ŸåŒæ ·é‡è¦ã€‚<br><br>Vue2 æä¾›çš„ç§¯æœ¨æœ‰ MVX(ä¸€èˆ¬ç»„ä»¶)ï¼ŒVX(å‡½æ•°å¼ç»„ä»¶)ï¼ŒMX(vuex)ï¼›è€Œ Vue3 é€šè¿‡ CompositionAPI æä¾›äº† Mï¼Œä¸€ä¸ªåªæœ‰ M çš„â€œç»„ä»¶â€ï¼Œä¹Ÿæ˜¯Vue3çµæ´»åŸå› ä¹‹ä¸€ã€‚<br><br>åˆ°è¿™ï¼Œæˆ‘å‘ç°ï¼Œå…¶å® Vuex ä¹Ÿæ˜¯ç»„ä»¶ï¼Œæ²¡æœ‰ View çš„ç»„ä»¶ï¼Œæœ‰ Modelï¼ˆstateï¼‰ï¼Œæœ‰ Xï¼ˆmutationï¼Œactionï¼‰ï¼Œå®ƒçš„é€»è¾‘å’Œå…¶ä»–ç»„ä»¶ä¸€æ ·ï¼Œæƒ³è¦å˜æ›´â€œçŠ¶æ€â€ï¼Œå¿…é¡»é€šè¿‡Xã€‚å°±è¿™æ ·â€œç®¡å®¶â€è¯ç”Ÿäº†ã€‚<br><br>å¯æ˜¯å…·ä½“è¿™ä¸ªæ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ<br>å¤§æ¦‚è¯´ä¸‹å‡ ä¸ªAPIï¼šinstallï¼Œprovideï¼Œuse ç­‰ï¼Œå¤§åœ£è®²çš„å¾ˆæ¸…æ¥šï¼Œå›å¤´å¤šçœ‹å‡ éï¼Œæœ€ä¸»è¦çš„æ˜¯å¤šå†™å†™ã€‚","like_count":31,"discussions":[{"author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"èŠ±æœå±±å¤§åœ£","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":530028,"discussion_content":"ç²¾å“å›å¤ï¼ï¼èµèµèµ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636378176,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":338507,"user_name":"ooooo","can_delete":false,"product_type":"c1","uid":2944560,"ip_address":"","ucode":"1060BB503AFF41","user_header":"https://static001.geekbang.org/account/avatar/00/2c/ee/30/d3bb5205.jpg","comment_is_top":false,"comment_ctime":1647529080,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"87546875000","product_id":100094401,"comment_content":"1. provide å…¨å±€æä¾›æ•°æ®<br>2. inject ä»»æ„å­ç»„ä»¶ä¸­è·å–provideæä¾›çš„æ•°æ®<br>3. const STORE_KEY = &quot;__store__&quot;  è¿™å¥ä»£ç è§„å®šäº†æä¾›å…¨å±€æ•°æ®çš„key<br>4. useStoreå‡½æ•°ï¼Œreturn inject(STORE_KEY) è¿™é‡Œåœ¨å­ç»„ä»¶è°ƒç”¨useStoreæ—¶ï¼Œé€šè¿‡STORE_KEYæ‹¿åˆ°keyå¯¹åº”çš„value<br>5. createStore å‡½æ•° ä½œç”¨æ˜¯å®ä¾‹åŒ–Storeå¯¹è±¡ï¼ŒæŠŠç”¨æˆ·å†™çš„vuexçš„å‡ ä¸ªå±æ€§ï¼ˆstateï¼Œactionsï¼Œmutationsï¼Œgettersï¼‰ä¼ ç»™Storeå¯¹è±¡<br><br>6. storeå¯¹è±¡æ ¹æ®optionsæ¥åˆå§‹åŒ–è‡ªå·±ï¼Œ<br><br>7. åˆå§‹åŒ–è¿‡ç¨‹ï¼šthis._state = reactive({data: options.state()}) æŠŠç”¨æˆ·ä¼ å…¥çš„stateå¯¹è±¡å˜æˆå“åº”å¼æ•°æ®ï¼Œå¹¶ä¿å­˜åˆ°å†…éƒ¨å˜é‡_stateä¸Šé¢<br><br>8. this._mutations = options.mutations ç›´æ¥ä¿å­˜ç”¨æˆ·çš„mutations<br><br>9. get state(){returrn this._state.data} stateæ–¹æ³•è¿”å›ä¿å­˜åœ¨_stateä¸Šé¢çš„ç”¨æˆ·çš„state, ä½¿ç”¨get state(){}æ ¼å¼ï¼Œæ˜¯ä¸ºäº†è®¿é—®this.stateæ—¶ç›´æ¥æ‹¿åˆ°è¿”å›å€¼ï¼Œè€Œä¸æ˜¯this.state() æ‰èƒ½æ‹¿åˆ°è¿”å›å€¼<br><br>10. commit = (type, payload) =&gt; {<br>  const entry = this._mutations[type]<br>  entry &amp;&amp; entry(this.state, payload)<br>}<br>commitæ–¹æ³•æ˜¯åœ¨ç”¨æˆ·è°ƒç”¨commitæ—¶ä¸€èˆ¬ä¼šä¼ å…¥è¦è§¦å‘çš„mutionså‡½æ•°åç§°ï¼Œå’Œæ–°æ•°æ®<br>commitå‡½æ•°åœ¨æ¥æ”¶åˆ°ç”¨æˆ·ä¼ å…¥çš„å‚æ•°æ—¶ï¼Œå…ˆåˆ¤æ–­äº†_mutationså¯¹è±¡ä¸Šé¢æœ‰ç”¨æˆ·è¦è§¦å‘çš„å‡½æ•°ï¼Œä¹‹åè¿›è¡Œè§¦å‘ï¼Œä¼ å…¥stateï¼Œå’Œæ–°æ•°æ®æä¾›ç»™ç”¨æˆ·çš„mutationså‡½æ•°ä½¿ç”¨<br><br>11. æœ€åinstallå‡½æ•°<br>åœ¨Vue.use(store)æ—¶ï¼Œä¼šæ‰§è¡Œinstallå‡½æ•°ï¼Œè¿™æ—¶è°ƒç”¨äº†appä¸Šé¢çš„provideï¼Œæ­¤æ—¶å…¨å±€æœ€é¡¶å±‚çš„appç»„ä»¶ä¼šæä¾›ä¸€ä¸ªkeyä¸ºSTORE_KEYï¼ˆ__store__ï¼‰çš„å¯¹è±¡ï¼Œå€¼ä¸ºthisï¼ˆStoreå¯¹è±¡ï¼‰ä¾›ä»»æ„å­ç»„ä»¶é€šè¿‡injectå»è·å–é¡¶å±‚ç»„ä»¶æä¾›çš„storeæ•°æ®","like_count":20},{"had_liked":false,"id":320430,"user_name":"ä¸€ä¸ªå°ğŸ","can_delete":false,"product_type":"c1","uid":2835033,"ip_address":"","ucode":"BA868E0EDD5C58","user_header":"https://static001.geekbang.org/account/avatar/00/2b/42/59/67b7709b.jpg","comment_is_top":false,"comment_ctime":1636330508,"is_pvip":false,"replies":[{"id":"116529","content":"åªå­¦æˆç†Ÿçš„æŠ€æœ¯å°±å¯ä»¥äº†ï¼Œä¸éœ€è¦è¿‡äºè¿½çƒ­ç‚¹ï¼ŒPiniaå’ŒVuexä¹Ÿæ˜¯æœ‰å¾ˆå¤šæ¦‚å¿µå’Œç†å¿µæ˜¯ä¸€è„‰ç›¸æ‰¿çš„","user_name":"ä½œè€…å›å¤","comment_id":320430,"uid":"1003715","ip_address":"","utype":1,"ctime":1636638422,"user_name_real":"èŠ±æœå±±å¤§åœ£"}],"discussion_count":1,"race_medal":0,"score":"87535676428","product_id":100094401,"comment_content":"æˆ‘Vuex4éƒ½è¿˜æ²¡å­¦å®Œï¼ŒPiniaå°±å‡ºæ¥äº†ï¼Œå­¦ä¸å®Œäº†ã€‚<br>ï¼ˆè¯è¯´æƒ³è¯·æ•™å¤§åœ£è€å¸ˆï¼Œåœ¨å‰ç«¯æŠ€æœ¯å‘å±•å¦‚æ­¤ä¹‹å¿«çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åº”è¯¥å¦‚ä½•åšå–èˆå‘¢ï¼Ÿï¼‰","like_count":20,"discussions":[{"author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"èŠ±æœå±±å¤§åœ£","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529986,"discussion_content":"åªå­¦æˆç†Ÿçš„æŠ€æœ¯å°±å¯ä»¥äº†ï¼Œä¸éœ€è¦è¿‡äºè¿½çƒ­ç‚¹ï¼ŒPiniaå’ŒVuexä¹Ÿæ˜¯æœ‰å¾ˆå¤šæ¦‚å¿µå’Œç†å¿µæ˜¯ä¸€è„‰ç›¸æ‰¿çš„","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1636638422,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":320457,"user_name":"ä¹å¶","can_delete":false,"product_type":"c1","uid":2303958,"ip_address":"","ucode":"144683EE28F346","user_header":"https://static001.geekbang.org/account/avatar/00/23/27/d6/c318bd20.jpg","comment_is_top":false,"comment_ctime":1636340419,"is_pvip":false,"replies":[{"id":"116519","content":"æ˜¯çš„æ˜¯çš„ï¼Œç¬¬ä¸€éƒ¨åˆ†å®æˆ˜ä»£ç åœ¨è¿™é‡Œå‘€ï¼Œæ¬¢è¿é‡è§bugäº†æprå‘€<br>https:&#47;&#47;github.com&#47;shengxinjing&#47;geektime-vue-course","user_name":"ä½œè€…å›å¤","comment_id":320457,"uid":"1003715","ip_address":"","utype":1,"ctime":1636638092,"user_name_real":"èŠ±æœå±±å¤§åœ£"}],"discussion_count":5,"race_medal":0,"score":"66060849859","product_id":100094401,"comment_content":"  constructor(options) {<br>    this._state = reactive({<br>      &#47;&#47;  data: options.state<br>      data: options.state()<br>    })<br>    this.mutations = options.mutations<br>  }<br><br>  get state() {<br>    return this._state.data<br>  }<br><br>options.stateè¿™æ ·å†™ä½¿ç”¨è°ƒè¯•å‘ç°è·å–åˆ°çš„æ˜¯å‡½æ•°<br>options.state()å†™æˆè¿™æ ·æ‰å¯ä»¥æ­£å¸¸è¿è¡Œ","like_count":15,"discussions":[{"author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"èŠ±æœå±±å¤§åœ£","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529999,"discussion_content":"æ˜¯çš„æ˜¯çš„ï¼Œç¬¬ä¸€éƒ¨åˆ†å®æˆ˜ä»£ç åœ¨è¿™é‡Œå‘€ï¼Œæ¬¢è¿é‡è§bugäº†æprå‘€\nhttps://github.com/shengxinjing/geektime-vue-course","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636638092,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1239409,"avatar":"https://static001.geekbang.org/account/avatar/00/12/e9/71/81ea2f30.jpg","nickname":"M","note":"","ucode":"72A8B00AC427E3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":537101,"discussion_content":"@å¤§åœ£ äººå®¶è¯´çš„æ„æ€æ˜¯ ä½ åœ¨æ–‡æ¡£é‡Œé¢æ”¹ä¸€ä¸‹ åˆ«è¯¯å¯¼åˆ«äºº ä½ å…‰ç²˜è´´git æœ‰å•¥ç”¨å•Š è‡³å°‘æŠŠä»£ç æ”¹å¯¹å•Š ","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1638956758,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1862545,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/6b/91/168e10a1.jpg","nickname":"bugu","note":"","ucode":"FEBF82A876C979","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":412973,"discussion_content":"æˆ‘ä¹Ÿæ˜¯é‡åˆ°è¿™ä¸ªé—®é¢˜","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1636347821,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2839891,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/55/53/b22d729e.jpg","nickname":"senduuuuuu","note":"","ucode":"FA05BA562503E5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":413939,"discussion_content":"çš„ç¡®æ˜¯è¿™æ ·","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636615202,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1165817,"avatar":"https://static001.geekbang.org/account/avatar/00/11/c9/f9/39492855.jpg","nickname":"é˜¿é˜³","note":"","ucode":"20A35FB86B1C5C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":413031,"discussion_content":"æ˜¯çš„ï¼Œæˆ‘æ˜¯é‡åˆ°è¿™æ ·çš„é—®é¢˜ï¼Œæ”¹ä¸ºå‡½æ•°è°ƒç”¨å°±å¯ä»¥äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636365266,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":320453,"user_name":"Geek_4578dc","can_delete":false,"product_type":"c1","uid":2820898,"ip_address":"","ucode":"CC5E01CC76DF2D","user_header":"","comment_is_top":false,"comment_ctime":1636338460,"is_pvip":false,"replies":[{"id":"116526","content":"ç¬¬ä¸€éƒ¨åˆ†å®æˆ˜ä»£ç åœ¨è¿™é‡Œå‘€ï¼Œæ¬¢è¿é‡è§bugäº†æprå‘€<br>https:&#47;&#47;github.com&#47;shengxinjing&#47;geektime-vue-course","user_name":"ä½œè€…å›å¤","comment_id":320453,"uid":"1003715","ip_address":"","utype":1,"ctime":1636638278,"user_name_real":"èŠ±æœå±±å¤§åœ£"}],"discussion_count":1,"race_medal":0,"score":"31701109532","product_id":100094401,"comment_content":"å»ºè®®å¤§åœ£è€å¸ˆæŠŠæ¯èŠ‚çš„ä»£ç æ”¾å‡ºæ¥ï¼Œè¿™æ ·æœ‰åˆ©äºé˜…è¯»","like_count":7,"discussions":[{"author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"èŠ±æœå±±å¤§åœ£","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529996,"discussion_content":"ç¬¬ä¸€éƒ¨åˆ†å®æˆ˜ä»£ç åœ¨è¿™é‡Œå‘€ï¼Œæ¬¢è¿é‡è§bugäº†æprå‘€\nhttps://github.com/shengxinjing/geektime-vue-course","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636638278,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":322411,"user_name":"æ·±è“","can_delete":false,"product_type":"c1","uid":1219317,"ip_address":"","ucode":"944AE8C1F2DBC7","user_header":"https://static001.geekbang.org/account/avatar/00/12/9a/f5/71eee10b.jpg","comment_is_top":false,"comment_ctime":1637376517,"is_pvip":false,"replies":[{"id":"118403","content":"gettersæ˜¯vuexå†…éƒ¨çš„computedï¼Œæˆ–è€…ä½ ä¹Ÿå¯ä»¥ä¸€æŠŠæ¢­å…¨éƒ¨éƒ½ç”¨computedï¼Œå¦‚æœvuexä¸­æœ‰çš„è®¡ç®—ç»“æœéœ€è¦å¤šæ¬¡å¤ç”¨ï¼Œå°±ä»computedç§»åˆ°getterä¸­","user_name":"ä½œè€…å›å¤","comment_id":322411,"uid":"1003715","ip_address":"","utype":1,"ctime":1639404184,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":0,"score":"18817245701","product_id":100094401,"comment_content":"çŠ¶æ€ç®¡ç†æ„Ÿè§‰æ˜¯å‰ç«¯ä»£ç çš„æ ¸å¿ƒï¼Œå…¶ä»–æ‰€æœ‰ç»„ä»¶ï¼Œç›‘å¬æ•°æ®æµçš„å˜åŒ–ï¼Œæˆ–æ”¹å˜æ•°æ®ï¼Œç„¶åä¸è¿™ä¸ªæ•°æ®æµç›¸å…³çš„é¡µé¢ç»„ä»¶ä½œå‡ºå“åº”å˜åŒ–ï¼ŒåŠ¨æ€èœå•ï¼Œå¯¼èˆªæ ï¼Œä»¥åŠä¸»é¡µé¢çš„ç»„ä»¶å°±éšä¹‹æ”¹å˜äº†ï¼Œæ•´ä¸ªWebæœåŠ¡å°±åŠ¨èµ·æ¥äº†ï¼Œæœ€è¿‘å‡ å¤©vuex çœ‹çš„æœ‰ç‚¹æ™•ï¼Œæœ‰ä¸ªåœ°æ–¹æœ‰ç‚¹ç–‘æƒ‘<br><br>1  vue &lt; script&gt; computed &lt;&#47;script&gt;<br>2 vuex  ä¹Ÿæœ‰ getters <br><br>ä¸¤è€…éƒ½æ˜¯è®¡ç®—å±æ€§ï¼Œè¿™é‡Œç»•æ¥ç»•å»ï¼Œè¿˜æ˜¯ç†ä¸æ¸…è¿™é‡Œæ€ä¹ˆä½¿ç”¨æœ€å¥½ï¼Ÿ<br><br>","like_count":4,"discussions":[{"author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"èŠ±æœå±±å¤§åœ£","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":538416,"discussion_content":"gettersæ˜¯vuexå†…éƒ¨çš„computedï¼Œæˆ–è€…ä½ ä¹Ÿå¯ä»¥ä¸€æŠŠæ¢­å…¨éƒ¨éƒ½ç”¨computedï¼Œå¦‚æœvuexä¸­æœ‰çš„è®¡ç®—ç»“æœéœ€è¦å¤šæ¬¡å¤ç”¨ï¼Œå°±ä»computedç§»åˆ°getterä¸­","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639404184,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":320451,"user_name":"é†‰æœˆ","can_delete":false,"product_type":"c1","uid":1375462,"ip_address":"","ucode":"530B4412FEDBE4","user_header":"https://static001.geekbang.org/account/avatar/00/14/fc/e6/2cff4a89.jpg","comment_is_top":false,"comment_ctime":1636336993,"is_pvip":false,"replies":[{"id":"116210","content":"æœ€åä¼šæœ‰æ¶‰åŠçš„ï¼Œæ¯•ç«Ÿæ˜¯æœªæ¥çš„vuex","user_name":"ä½œè€…å›å¤","comment_id":320451,"uid":"1003715","ip_address":"","utype":1,"ctime":1636378221,"user_name_real":"èŠ±æœå±±å¤§åœ£"}],"discussion_count":1,"race_medal":0,"score":"18816206177","product_id":100094401,"comment_content":"å¤§åœ£è€å¸ˆPiniaä¼šæœ‰æ¶‰åŠå—","like_count":4,"discussions":[{"author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"èŠ±æœå±±å¤§åœ£","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529995,"discussion_content":"æœ€åä¼šæœ‰æ¶‰åŠçš„ï¼Œæ¯•ç«Ÿæ˜¯æœªæ¥çš„vuex","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636378221,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":324899,"user_name":"ä¹Ÿè¨±æœ‰ä¸€å¤©","can_delete":false,"product_type":"c1","uid":1899883,"ip_address":"","ucode":"61D4A89C97B096","user_header":"https://static001.geekbang.org/account/avatar/00/1c/fd/6b/d91521bf.jpg","comment_is_top":false,"comment_ctime":1638709457,"is_pvip":false,"replies":[{"id":"118030","content":"rxç¡®å®æ˜¯æ•°æ®ç®¡ç†çš„ç‹ç‰Œæ¡†æ¶ï¼Œä¸Šæ‰‹æˆæœ¬ä¹Ÿæ˜¯æœ‰ä¸€äº›","user_name":"ä½œè€…å›å¤","comment_id":324899,"uid":"1003715","ip_address":"","utype":1,"ctime":1638881980,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":0,"score":"14523611345","product_id":100094401,"comment_content":"æˆ‘ä»¬å…¬å¸å¯¼å…¥rxjsæ¥å–ä»£vuexï¼Œä¸å¾—ä¸è¯´rxjsæ˜¯çœŸçš„çŒ›...","like_count":3,"discussions":[{"author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"èŠ±æœå±±å¤§åœ£","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":536840,"discussion_content":"rxç¡®å®æ˜¯æ•°æ®ç®¡ç†çš„ç‹ç‰Œæ¡†æ¶ï¼Œä¸Šæ‰‹æˆæœ¬ä¹Ÿæ˜¯æœ‰ä¸€äº›","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638881980,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":320435,"user_name":"uncle é‚¦","can_delete":false,"product_type":"c1","uid":1996927,"ip_address":"","ucode":"ED5BF9398C1B5C","user_header":"https://static001.geekbang.org/account/avatar/00/1e/78/7f/ef0e0ec8.jpg","comment_is_top":false,"comment_ctime":1636332422,"is_pvip":false,"replies":[{"id":"116528","content":"æ„Ÿè°¢æç¤ºè¿™ä¸ªé”™åˆ«å­—ï¼Œå·²ç»æäº¤ç»™ç¼–è¾‘<br>ç¬¬ä¸€éƒ¨åˆ†å®æˆ˜ä»£ç åœ¨è¿™é‡Œå‘€ï¼Œæ¬¢è¿é‡è§bugäº†æprå‘€<br>https:&#47;&#47;github.com&#47;shengxinjing&#47;geektime-vue-course","user_name":"ä½œè€…å›å¤","comment_id":320435,"uid":"1003715","ip_address":"","utype":1,"ctime":1636638388,"user_name_real":"èŠ±æœå±±å¤§åœ£"}],"discussion_count":1,"race_medal":0,"score":"14521234310","product_id":100094401,"comment_content":"count ä¸æ˜¯ä½¿ç”¨ ref ç›´æ¥å®šä¹‰ï¼Œè€Œæ˜¯ä½¿ç”¨è®¡ç®—å±æ€§è¿”å›äº† state.state.countï¼Œä¹Ÿå°±æ˜¯åˆšæ‰åœ¨ src&#47;store&#47;index.js ä¸­å®šä¹‰çš„ countã€‚è¿™ä¸ª &quot; state.state.count&quot; æ˜¯ä¸æ˜¯è¦æ”¹æˆ â€œstore.state.countâ€","like_count":3,"discussions":[{"author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"èŠ±æœå±±å¤§åœ£","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529988,"discussion_content":"æ„Ÿè°¢æç¤ºè¿™ä¸ªé”™åˆ«å­—ï¼Œå·²ç»æäº¤ç»™ç¼–è¾‘\nç¬¬ä¸€éƒ¨åˆ†å®æˆ˜ä»£ç åœ¨è¿™é‡Œå‘€ï¼Œæ¬¢è¿é‡è§bugäº†æprå‘€\nhttps://github.com/shengxinjing/geektime-vue-course","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636638388,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":334282,"user_name":"æœ¨å­åˆç§‹","can_delete":false,"product_type":"c1","uid":2893706,"ip_address":"","ucode":"6DDCB55232E1B3","user_header":"https://static001.geekbang.org/account/avatar/00/2c/27/8a/d65e34c4.jpg","comment_is_top":false,"comment_ctime":1644848121,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"10234782713","product_id":100094401,"comment_content":"å†æ¬¡æ›´è¯¦ç»†çš„è®¤è¯†äº†Vuexï¼Œå¹¶ç‚¹å‡ºäº†vue3+TSæ¨èä½¿ç”¨çš„piniaï¼Œæ„Ÿè§‰å¾ˆæ£’ã€‚å¼±å¼±é—®ä¸€å¥æˆ‘è§‰å¾—æ˜¯ä¸æ˜¯éœ€è¦è®²è®²vuexä¸­æ¨¡å—çš„ä½¿ç”¨ï¼Œå®é™…é¡¹ç›®å¼€å‘ä¸­ï¼Œæˆ‘é‡åˆ°è¿‡Vuexä¸­storeæ–‡ä»¶å¤¹ä¸‹æœ‰å¾ˆå¤šmodulesï¼Œç›´æ¥æ³¨å†Œåœ¨storeä¸‹çš„index.tsæ–‡ä»¶ä¸­ï¼Œæ„Ÿè§‰å¯ä»¥ç»†è®²ä¸€ä¸‹è¿™ç§å¼€å‘æ€è·¯ï¼Œå†æ¬¡ç»†åˆ†æ•°æ®ã€‚","like_count":2,"discussions":[{"author":{"id":2546490,"avatar":"https://static001.geekbang.org/account/avatar/00/26/db/3a/58a1da4f.jpg","nickname":"ç‹å¸…å…µ","note":"","ucode":"5353D7E86962EE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":566950,"discussion_content":"æ„Ÿè§‰åº”è¯¥è®²çš„ï¼Œè¿˜æœ‰é‚£äº›ä¸ªè¾…åŠ©å‡½æ•°ï¼Œå‘½åç©ºé—´ï¼Œæ–‡ä¸­çš„é™¤äº†æ‰‹å†™vuexï¼Œå…¶ä»–çš„çœŸçš„åªæ˜¯ä»‹ç»è€Œå·²","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1650804573,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":327166,"user_name":"rookie","can_delete":false,"product_type":"c1","uid":1225665,"ip_address":"","ucode":"4428BC9BAC684D","user_header":"https://static001.geekbang.org/account/avatar/00/12/b3/c1/b96b5015.jpg","comment_is_top":false,"comment_ctime":1639965967,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10229900559","product_id":100094401,"comment_content":"1.è·¨ç»„ä»¶ä¼ å€¼æˆ–è€…å…±äº«æ—¶ç”¨vuex<br>2.ç”¨æˆ·ä¿¡æ¯ã€æƒé™ä¿¡æ¯ã€å…¬å…±æ•°æ®...<br>3.vuex æ•°æ®æŒä¹… vuex-persistedstate<br>4.piniaæ¡†æ¶","like_count":2},{"had_liked":false,"id":321990,"user_name":"JIo","can_delete":false,"product_type":"c1","uid":2826376,"ip_address":"","ucode":"7CD752E2420010","user_header":"https://static001.geekbang.org/account/avatar/00/2b/20/88/42d3b1fb.jpg","comment_is_top":false,"comment_ctime":1637128758,"is_pvip":false,"replies":[{"id":"116989","content":"æ˜¯å‘€ï¼Œé—®é¢˜å°±æ˜¯è¿™é‡Œåªæœ‰æ–‡å­—å’ŒéŸ³é¢‘  å›§  æœ›ç†è§£","user_name":"ä½œè€…å›å¤","comment_id":321990,"uid":"1003715","ip_address":"","utype":1,"ctime":1637242376,"user_name_real":"ç¼–è¾‘"}],"discussion_count":3,"race_medal":0,"score":"10227063350","product_id":100094401,"comment_content":"çœŸå¿ƒè§‰å¾—è¿™ç§è®¾è®¡åˆ°å¤šæ®µä»£ç çš„è¯¾ç¨‹åº”è¯¥å‡ºè§†é¢‘è¯¾ è€Œä¸æ˜¯éŸ³é¢‘è¯¾ å„ç§ä¸­è‹±æ–‡é”™ç»¼ç©¿æ’ ä»£ç è¿˜éœ€è¦æˆªå›¾åœ¨æ—è¾¹æ‰èƒ½å¬è®² æ•ˆæœçœŸçš„ä¸å¦‚è§†é¢‘æ¥çš„å¿«ã€‚ã€‚ã€‚","like_count":2,"discussions":[{"author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"èŠ±æœå±±å¤§åœ£","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":531152,"discussion_content":"æ˜¯å‘€ï¼Œé—®é¢˜å°±æ˜¯è¿™é‡Œåªæœ‰æ–‡å­—å’ŒéŸ³é¢‘  å›§  æœ›ç†è§£","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637242376,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2816342,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/f9/56/806ccdde.jpg","nickname":"é¾","note":"","ucode":"F246210F19B83E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":540979,"discussion_content":"è§†é¢‘è¯¾å°±ä¸æ˜¯è¿™ä¸ªä»·äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640224541,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2709927,"avatar":"https://static001.geekbang.org/account/avatar/00/29/59/a7/9a086b7e.jpg","nickname":"æˆ‘çš„ä¸–ç•Œå¾ˆå°","note":"","ucode":"7AA0DA80B29FC3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":534627,"discussion_content":"æˆ‘æ¯æ¬¡éƒ½æ˜¯ä¸‹äº†æºç  å¯¹ç€éŸ³é¢‘å’Œæºç ä¸€æœŸæ•²ä¸€é","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638243554,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":321447,"user_name":"é™ˆè±†","can_delete":false,"product_type":"c1","uid":2258618,"ip_address":"","ucode":"7E2A0766B035C7","user_header":"https://static001.geekbang.org/account/avatar/00/22/76/ba/2373075b.jpg","comment_is_top":false,"comment_ctime":1636880845,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"10226815437","product_id":100094401,"comment_content":"å†™ä¸ªå°å‹çš„vuexä¸­ï¼Œå‚è€ƒmutationså®ç°äº†actionsï¼Œæƒ³è¯·æ•™ä¸€ä¸‹æ€ä¹ˆå®ç°getters","like_count":2,"discussions":[{"author":{"id":1497275,"avatar":"https://static001.geekbang.org/account/avatar/00/16/d8/bb/99bfdeea.jpg","nickname":"è«å‡¡è«çƒ¦","note":"","ucode":"6E8F7FE6F5C739","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":561528,"discussion_content":"constructor(options) {\n    ...\n    this._getters = options.getters;\n  }\n\nget getters() {\n    const gettersKeys = Object.keys(this._getters);\n    const gettersMap = {};\n    gettersKeys.forEach((keys) =&gt; {\n      gettersMap[keys] = this._getters[keys](this.state);\n    });\n\n    return gettersMap;\n}","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649662790,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":343184,"user_name":"ä¸€è·¯å‘åŒ—","can_delete":false,"product_type":"c1","uid":2625465,"ip_address":"","ucode":"9968CFE0456C0F","user_header":"https://static001.geekbang.org/account/avatar/00/28/0f/b9/f81a4436.jpg","comment_is_top":false,"comment_ctime":1650696982,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5945664278","product_id":100094401,"comment_content":"å¤§åœ£ï¼Œä½ åœ¨å°minivuexçš„æ—¶å€™è¯»å–çš„stateæœ¬èº«å°±æ˜¯reactiveä¹‹åçš„å“åº”å¼æ•°æ®ï¼Œä¸ºä»€ä¹ˆ`let count = computed(()=&gt;store.state.count)`ä½¿ç”¨çš„æ—¶å€™è¿˜éœ€è¦ç”¨computedï¼Ÿ","like_count":1},{"had_liked":false,"id":340379,"user_name":"YelLow","can_delete":false,"product_type":"c1","uid":2959886,"ip_address":"","ucode":"32CD8AFF44D7BC","user_header":"https://static001.geekbang.org/account/avatar/00/2d/2a/0e/74093a3a.jpg","comment_is_top":false,"comment_ctime":1648785847,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5943753143","product_id":100094401,"comment_content":" æƒ³æé—®ä¸€ä¸‹ï¼Œç”¨vuexå¯ä»¥åšé¡¹ç›®çš„ç¼“å­˜å—ï¼Ÿ<br>é€šå¸¸é¡µé¢åœ¨åˆå§‹åŒ–çš„æ—¶å€™éœ€è¦è¯·æ±‚æ•°æ®ï¼Œæ ¹æ®è·å–çš„æ•°æ®å»æ¸²æŸ“é¡µé¢ã€‚å¦‚æœæˆ‘ä»¬ç”¨vuexåœ¨ç”¨æˆ·ç¬¬ä¸€æ¬¡è¿›å…¥é¡µé¢æ—¶è¯·æ±‚åˆ°çš„æ•°æ®å­˜å…¥vuexä¸­ï¼Œé‚£ä¹ˆç”¨æˆ·ç¬¬äºŒæ¬¡è¿›å…¥é¡µé¢æ—¶å°±å¯ä»¥å…ˆæ ¹æ®vuexçš„æ•°æ®æ¸²æŸ“é¡µé¢ã€‚å…¶ä¸­å¦‚æœæ•°æ®çš„æ—¶æ•ˆæ€§æ¯”è¾ƒé«˜å¯ä»¥åœ¨ç”¨æˆ·è¿›å…¥é¡µé¢åå†è¯·æ±‚ä¸€æ¬¡åå°æ•°æ®ï¼Œå¹¶æ›´æ–°é¡µé¢ï¼Œå› ä¸ºæ­¤æ—¶vuexä¸­æœ‰æ•°æ®äº†ï¼Œæ‰€ä»¥ç”¨æˆ·åœ¨è¿›å…¥é¡µé¢æ—¶å°±ä¸ç”¨ç­‰åˆ°è¯·æ±‚åˆ°åå°æ•°æ®åæ‰æ˜¾ç¤ºé¡µé¢ï¼Œå¯ä»¥å…ˆæ ¹æ®vuexä¸­çš„æ•°æ®æ¸²æŸ“é¡µé¢ã€‚åŒæ—¶å¦‚æœç”¨æˆ·çš„æŸäº›æ“ä½œæ›´æ”¹äº†é¡µé¢çš„æ•°æ®ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æŠŠç”¨æˆ·æ›´æ”¹çš„æ•°æ®å­˜å…¥vuexä¸­ï¼Œè¿™æ ·å°±ç¡®ä¿äº†vuexä¸­çš„æ•°æ®æ˜¯ç›¸å¯¹æ¯”è¾ƒæ–°çš„","like_count":1},{"had_liked":false,"id":330859,"user_name":"Mercurywithu","can_delete":false,"product_type":"c1","uid":2522310,"ip_address":"","ucode":"863928FDC6BA4B","user_header":"https://static001.geekbang.org/account/avatar/00/26/7c/c6/dd01049e.jpg","comment_is_top":false,"comment_ctime":1642230081,"is_pvip":false,"replies":[{"id":"120835","content":"å¯¹ï¼Œè¿™ä¸ªæ˜¯vueå†…éƒ¨æ’ä»¶çš„ä¹¦å†™æ–¹æ³•ï¼Œå¯ä»¥çœ‹ä¸‹useå‡½æ•°çš„æºç <br><br>https:&#47;&#47;github.com&#47;vuejs&#47;vue-next&#47;blob&#47;master&#47;packages&#47;runtime-core&#47;src&#47;apiCreateApp.ts#L219","user_name":"ä½œè€…å›å¤","comment_id":330859,"uid":"1003715","ip_address":"","utype":1,"ctime":1642338260,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":0,"score":"5937197377","product_id":100094401,"comment_content":"è¯·é—®ä¸‹å¤§åœ£è€å¸ˆã€‚install æ–¹æ³•ä¸ºä»€ä¹ˆä¼šåœ¨main.jså…¥å£å¤„app.use(store)çš„æ—¶å€™ï¼Œæ‰§è¡Œè¿™ä¸ªå‡½æ•°è°ƒç”¨ã€‚æ˜¯å†…ç½®çš„apiä¹ˆã€","like_count":1,"discussions":[{"author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"èŠ±æœå±±å¤§åœ£","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":546536,"discussion_content":"å¯¹ï¼Œè¿™ä¸ªæ˜¯vueå†…éƒ¨æ’ä»¶çš„ä¹¦å†™æ–¹æ³•ï¼Œå¯ä»¥çœ‹ä¸‹useå‡½æ•°çš„æºç \n\nhttps://github.com/vuejs/vue-next/blob/master/packages/runtime-core/src/apiCreateApp.ts#L219","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642338260,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":328664,"user_name":"ä¹”å¸† Kayla","can_delete":false,"product_type":"c1","uid":1883514,"ip_address":"","ucode":"81944832230BC4","user_header":"https://static001.geekbang.org/account/avatar/00/1c/bd/7a/37df606b.jpg","comment_is_top":false,"comment_ctime":1640830152,"is_pvip":false,"replies":[{"id":"119787","content":"è¿™ä¸ªæ²¡æœ‰ï¼Œåªæ˜¯ç”¨__å¼€å¤´æ¥é¿å…å’Œé‡å¤ï¼Œè¿™é‡Œå¯ä»¥ä½¿ç”¨æ–°çš„æ•°æ®ç»“æ„Sybmolå»ä¼˜åŒ–","user_name":"ä½œè€…å›å¤","comment_id":328664,"uid":"1003715","ip_address":"","utype":1,"ctime":1640909343,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":0,"score":"5935797448","product_id":100094401,"comment_content":"STORE_KEY çš„å€¼å®šä¸º __store__ , æœ‰ä»€ä¹ˆç‰¹æ®Šå«ä¹‰æˆ–ç‰¹æ®Šå¤„ç†å—?","like_count":1,"discussions":[{"author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"èŠ±æœå±±å¤§åœ£","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":542935,"discussion_content":"è¿™ä¸ªæ²¡æœ‰ï¼Œåªæ˜¯ç”¨__å¼€å¤´æ¥é¿å…å’Œé‡å¤ï¼Œè¿™é‡Œå¯ä»¥ä½¿ç”¨æ–°çš„æ•°æ®ç»“æ„Sybmolå»ä¼˜åŒ–","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640909343,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":327609,"user_name":"xiaxiaxiaxia","can_delete":false,"product_type":"c1","uid":2873593,"ip_address":"","ucode":"4B20C71983D227","user_header":"","comment_is_top":false,"comment_ctime":1640187195,"is_pvip":false,"replies":[{"id":"119276","content":"ä½ å¥½ï¼Œéå¸¸æŠ±æ­‰å¯¹ä½ é€ æˆå›°æ‰°ï¼Œæ˜¯å“ªä¸€éƒ¨åˆ†ä½ è§‰å¾—ä¸å¤ªå‹å¥½å‘¢ï¼Ÿæˆ‘åé¢å¯ä»¥åŠ ä¸Šä¸€äº›","user_name":"ä½œè€…å›å¤","comment_id":327609,"uid":"1003715","ip_address":"","utype":1,"ctime":1640229173,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":0,"score":"5935154491","product_id":100094401,"comment_content":"ä¸ºä»€ä¹ˆåœ¨ä»£ç ç¤ºä¾‹é‡Œæ€»æ˜¯çœç•¥é‚£ä¹ˆå¤šä½ è§‰å¾—æˆ‘ä»¬éƒ½ä¼šæ‡‚çš„ä»£ç å‘¢ã€‚ã€‚ã€‚ã€‚å¯¹æ–°æ‰‹ä¸€ç‚¹ä¹Ÿä¸å‹å¥½ã€‚ã€‚ã€‚","like_count":1,"discussions":[{"author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"èŠ±æœå±±å¤§åœ£","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":540999,"discussion_content":"ä½ å¥½ï¼Œéå¸¸æŠ±æ­‰å¯¹ä½ é€ æˆå›°æ‰°ï¼Œæ˜¯å“ªä¸€éƒ¨åˆ†ä½ è§‰å¾—ä¸å¤ªå‹å¥½å‘¢ï¼Ÿæˆ‘åé¢å¯ä»¥åŠ ä¸Šä¸€äº›","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640229173,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":326732,"user_name":"å°ç°","can_delete":false,"product_type":"c1","uid":1637092,"ip_address":"","ucode":"EB5A344C534453","user_header":"https://static001.geekbang.org/account/avatar/00/18/fa/e4/0b55683f.jpg","comment_is_top":false,"comment_ctime":1639648143,"is_pvip":false,"replies":[{"id":"120872","content":"çœ‹è¿™é‡Œ https:&#47;&#47;next.vuex.vuejs.org&#47;zh&#47;guide&#47;modules.html","user_name":"ä½œè€…å›å¤","comment_id":326732,"uid":"1003715","ip_address":"","utype":1,"ctime":1642342775,"user_name_real":"ä½œè€…"}],"discussion_count":1,"race_medal":0,"score":"5934615439","product_id":100094401,"comment_content":"å¤§åœ£è€å¸ˆ   è¯·æ•™ä¸‹vuexçš„æ¨¡å—åŒ–   ","like_count":1,"discussions":[{"author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"èŠ±æœå±±å¤§åœ£","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":546583,"discussion_content":"çœ‹è¿™é‡Œ https://next.vuex.vuejs.org/zh/guide/modules.html","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642342775,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":325123,"user_name":"KLonILo","can_delete":false,"product_type":"c1","uid":1711330,"ip_address":"","ucode":"C5874B2E6F7653","user_header":"https://static001.geekbang.org/account/avatar/00/1a/1c/e2/8048fff4.jpg","comment_is_top":false,"comment_ctime":1638836824,"is_pvip":false,"replies":[{"id":"118325","content":"vuexæœ‰ä¸€ä¸ªæŒä¹…åŒ–å­˜å‚¨çš„æ’ä»¶persistedstateå¯ä»¥ç›´æ¥å­˜å‚¨åœ¨localstorageä¸­","user_name":"ä½œè€…å›å¤","comment_id":325123,"uid":"1003715","ip_address":"","utype":1,"ctime":1639398152,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":0,"score":"5933804120","product_id":100094401,"comment_content":"ç››å“¥ï¼Œæœ€è¿‘åˆšå¥½ç¢°åˆ°ä¸€ä¸ªç”¨æˆ·ä¿¡æ¯å­˜å‚¨çš„é—®é¢˜ï¼Œæˆ‘ä»¬æ˜¯å¤šé¡µé¢ï¼Œvuexçš„è¯åˆ·æ–°å°±æ²¡äº†ï¼Œæ‰€ä»¥æ˜¯å¦å°†ç”¨æˆ·ååŒæ—¶å­˜å‚¨æœ¬åœ°æ¥ç»“åˆä½¿ç”¨å‘¢ï¼Ÿæˆ–è€…ä½ æœ‰æ²¡æœ‰æ¯”è¾ƒå¥½çš„æ–¹æ¡ˆæç‚¹æç‚¹ï¼Œæ„Ÿæ©~","like_count":1,"discussions":[{"author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"èŠ±æœå±±å¤§åœ£","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":538312,"discussion_content":"vuexæœ‰ä¸€ä¸ªæŒä¹…åŒ–å­˜å‚¨çš„æ’ä»¶persistedstateå¯ä»¥ç›´æ¥å­˜å‚¨åœ¨localstorageä¸­","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639398152,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":323420,"user_name":"æ·±è“","can_delete":false,"product_type":"c1","uid":1219317,"ip_address":"","ucode":"944AE8C1F2DBC7","user_header":"https://static001.geekbang.org/account/avatar/00/12/9a/f5/71eee10b.jpg","comment_is_top":false,"comment_ctime":1637896109,"is_pvip":false,"replies":[{"id":"117368","content":"$å°±æ˜¯ä¸ºäº†åŒºåˆ†å‡ºè¿™æ˜¯æ’ä»¶å®šä¹‰çš„å†…å®¹ï¼Œç®—æ˜¯ä¸€ä¸ªçº¦å®šä¿—æˆçš„æœ€ä½³å®è·µ<br>nameæ˜¯æ™®é€šå˜é‡<br>_nameæ˜¯å†…éƒ¨å˜é‡<br>$nameæ˜¯ç¬¬ä¸‰æ–¹æ’ä»¶ or æˆ‘ä»¬è‡ªå·±æ³¨å†Œçš„å…¬ç”¨æ•°æ®","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1003715","ctime":1637932622,"ip_address":"","comment_id":323420,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5932863405","product_id":100094401,"comment_content":"åœ¨çœ‹GitHub å…¶ä»–å¼€æºé¡¹ç›®ä»£ç ï¼Œä½¿ç”¨vuex åˆ›å»ºå¥½store å¼•ç”¨çš„æ—¶å€™ç»å¸¸çœ‹åˆ°$store ä¸€ç›´ä¸å¤ªç†è§£è¿™çš„$çš„å«ä¹‰ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"èŠ±æœå±±å¤§åœ£","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":533676,"discussion_content":"$å°±æ˜¯ä¸ºäº†åŒºåˆ†å‡ºè¿™æ˜¯æ’ä»¶å®šä¹‰çš„å†…å®¹ï¼Œç®—æ˜¯ä¸€ä¸ªçº¦å®šä¿—æˆçš„æœ€ä½³å®è·µ\nnameæ˜¯æ™®é€šå˜é‡\n_nameæ˜¯å†…éƒ¨å˜é‡\n$nameæ˜¯ç¬¬ä¸‰æ–¹æ’ä»¶ or æˆ‘ä»¬è‡ªå·±æ³¨å†Œçš„å…¬ç”¨æ•°æ®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637932622,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":322717,"user_name":"éŸ©ä»•æ°","can_delete":false,"product_type":"c1","uid":1522060,"ip_address":"","ucode":"A61DF19B802724","user_header":"https://static001.geekbang.org/account/avatar/00/17/39/8c/3be6991a.jpg","comment_is_top":false,"comment_ctime":1637564342,"is_pvip":false,"replies":[{"id":"117375","content":"vuexå¯¹tsç¨å¾®ä¸å¤ªæœ‰å¥½ï¼Œpiniaæ›´é€‚åˆtsé¡¹ç›®ï¼Œä¹Ÿæ˜¯vuexçš„æœªæ¥","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1003715","ctime":1637932908,"ip_address":"","comment_id":322717,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5932531638","product_id":100094401,"comment_content":"è€å¸ˆï¼Œvue3ä¸­ï¼Œå°¤å¤§ä¸æ¨èç”¨vuexæ¥åšçŠ¶æ€ç®¡ç†ï¼Œæ‚¨å¯¹è¿™æ–¹é¢æ€ä¹ˆçœ‹å‘¢ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"èŠ±æœå±±å¤§åœ£","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":533684,"discussion_content":"vuexå¯¹tsç¨å¾®ä¸å¤ªæœ‰å¥½ï¼Œpiniaæ›´é€‚åˆtsé¡¹ç›®ï¼Œä¹Ÿæ˜¯vuexçš„æœªæ¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637932908,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":322176,"user_name":"è‘±å‘³é»‘å’–å•¡","can_delete":false,"product_type":"c1","uid":2063970,"ip_address":"","ucode":"9BF75E8CCF8E0B","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/8YX35AFKL60uUNM5YGloEx8uDbv0VGB5VddYvqKDgPRiauyW1ggJIs9p6B7ad3AricFMZAp8ahAqP4FmzaTP1few/132","comment_is_top":false,"comment_ctime":1637222777,"is_pvip":true,"replies":[{"id":"116986","content":"æŒä¹…åŒ–ç‹¬ç«‹æˆä¸“é—¨çš„æ’ä»¶äº† vuex-persistedstate","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1003715","ctime":1637241840,"ip_address":"","comment_id":322176,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5932190073","product_id":100094401,"comment_content":" ç¬¬ä¸€æ¬¡ä½¿ç”¨vuexæ˜¯åœ¨vue2æ—¶ï¼Œç”¨æ¥å­˜å‚¨ç™»å½•çš„ç”¨æˆ·æ•°æ®ï¼Œä½†vuexæ˜¯æ²¡æœ‰æŒä¹…åŒ–æ•°æ®çš„ï¼Œæ‰€ä»¥è¿˜å¾—é…åˆç€localstorageå’Œsessionstorageæ¥ç”¨ï¼Œæ¯”è¾ƒå¥½å¥‡ä¸ºä»€ä¹ˆvuexä¸æä¾›æ•°æ®æŒä¹…åŒ–çš„å®ç°ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"èŠ±æœå±±å¤§åœ£","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":531148,"discussion_content":"æŒä¹…åŒ–ç‹¬ç«‹æˆä¸“é—¨çš„æ’ä»¶äº† vuex-persistedstate","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1637241840,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":321603,"user_name":"è½»é£˜é£˜è¿‡","can_delete":false,"product_type":"c1","uid":1347071,"ip_address":"","ucode":"68F26121369330","user_header":"https://static001.geekbang.org/account/avatar/00/14/8d/ff/986ffb41.jpg","comment_is_top":false,"comment_ctime":1636963694,"is_pvip":false,"replies":[{"id":"118387","content":"1. æ„Ÿè°¢æé†’ï¼Œåé¢ä¼šæœ‰vuexæºç çš„è§£è¯»<br>2. ä½¿ç”¨app.useæ³¨å†Œä¸»è¦çš„ç›®çš„å°±æ˜¯å¸Œæœ›èƒ½å¤Ÿæä¾›ä¸€ä¸ªå…¨å±€çš„store&#47;ç»„ä»¶","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1003715","ctime":1639402233,"ip_address":"","comment_id":321603,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5931930990","product_id":100094401,"comment_content":"1. çœ‹provideå’Œinjecté‚£åœ°æ–¹mini-vuexçš„å°è£…æœ‰ç‚¹æ‡µï¼Œè¯´â€œprovide æ³¨å†Œäº†æ•°æ®åï¼Œæ‰€æœ‰çš„å­ç»„ä»¶éƒ½å¯ä»¥é€šè¿‡ inject è·å–æ•°æ®â€ï¼Œä½†æ˜¯mini-vuexåªæ˜¯å°è£…äº†å‡½æ•°å¹¶ä¸æ˜¯ç»„ä»¶ï¼Œåæ¥çœ‹å®˜æ–¹æ–‡æ¡£æ‰çŸ¥é“è¿™ä¸ªåœ¨è°ƒç”¨useçš„æ—¶å€™è¿›è¡Œæ³¨å…¥äº†å…¨å±€ç»„ä»¶ä¸Šäº†ã€‚è¦æ˜¯å¤§åœ£è€å¸ˆå†å†™è¯¦ç»†ç‚¹å°±å¥½äº†ã€‚<br>2. æœ‰ä¸ªç–‘é—®ï¼Œä½¿ç”¨app.use(store)è¿›è¡Œæ³¨å…¥vuexï¼Œä¸ºå•¥ä¸å°è£…æˆvueuseæ¨¡å—ï¼Œåœ¨app.tsä¸­ç”¨composition Apiå¼•å…¥å‘¢ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"èŠ±æœå±±å¤§åœ£","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":538395,"discussion_content":"1. æ„Ÿè°¢æé†’ï¼Œåé¢ä¼šæœ‰vuexæºç çš„è§£è¯»\n2. ä½¿ç”¨app.useæ³¨å†Œä¸»è¦çš„ç›®çš„å°±æ˜¯å¸Œæœ›èƒ½å¤Ÿæä¾›ä¸€ä¸ªå…¨å±€çš„store/ç»„ä»¶","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639402233,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":321345,"user_name":"ç¢ç«¹è½æ£‹","can_delete":false,"product_type":"c1","uid":2827040,"ip_address":"","ucode":"6064F35EC5A33F","user_header":"https://static001.geekbang.org/account/avatar/00/2b/23/20/5fd6ed6f.jpg","comment_is_top":false,"comment_ctime":1636804143,"is_pvip":false,"replies":[{"id":"116997","content":"å› ä¸ºgetteréœ€è¦éšç€çŠ¶æ€çš„å˜åŒ–å»æ›´æ–°è§†å›¾ï¼Œè¿™å°±æ˜¯computedçš„ç”¨æ­¦ä¹‹åœ°äº†","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1003715","ctime":1637243360,"ip_address":"","comment_id":321345,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5931771439","product_id":100094401,"comment_content":"githubæºç ä¸­ï¼Œthis.getters[name] = computed(() =&gt; fn(this.state))ï¼Œä¸ºä»€ä¹ˆéœ€è¦ç”¨computedå»åŒ…ä½å‘¢ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"èŠ±æœå±±å¤§åœ£","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":531162,"discussion_content":"å› ä¸ºgetteréœ€è¦éšç€çŠ¶æ€çš„å˜åŒ–å»æ›´æ–°è§†å›¾ï¼Œè¿™å°±æ˜¯computedçš„ç”¨æ­¦ä¹‹åœ°äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637243360,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":320858,"user_name":"Tyä¸¶æ±¤åœ†åœ†","can_delete":false,"product_type":"c1","uid":2087697,"ip_address":"","ucode":"DD89BE64338506","user_header":"","comment_is_top":false,"comment_ctime":1636532792,"is_pvip":false,"replies":[{"id":"118391","content":"storageçš„é—®é¢˜å°±åœ¨äºå¯èƒ½å’Œåç«¯æ•°æ®åº“çš„çŠ¶æ€ä¸åŒæ­¥...","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1003715","ctime":1639402578,"ip_address":"","comment_id":320858,"utype":1}],"discussion_count":4,"race_medal":0,"score":"5931500088","product_id":100094401,"comment_content":"æƒ³é—®ä¸‹å¤§åœ£å•Šï¼Œå› ä¸ºvuexæœ‰åˆ·æ–°çš„é—®é¢˜ï¼Œæ‰€ä»¥é¡¹ç›®é‡Œé€šå¸¸æŠŠ vuex å’Œ Storage ç»“åˆåœ¨ä¸€èµ·åšæ•°æ®æŒä¹…åŒ–ï¼Œä½†æ˜¯ç”¨å¤šäº†å°±ä¼šäº§ç”Ÿä¸ºä»€ä¹ˆä¸ç›´æ¥ç”¨ Storage å­˜å–æ•°æ®çš„ç–‘é—®ã€‚å°è£…åå­˜å–æ•°æ®ä¹Ÿä¸€æ ·å¾ˆæ–¹ä¾¿å˜›ï¼Œè¿˜æ˜¯è¯´ä»…ä»…æ˜¯å› ä¸º vuex æœ‰å“åº”å¼åŠŸèƒ½å‘¢ã€‚å¸Œæœ›å¤§åœ£å¸®å¿™è§£ç­”ä¸‹ï¼Œè°¢è°¢~","like_count":1,"discussions":[{"author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"èŠ±æœå±±å¤§åœ£","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":538399,"discussion_content":"storageçš„é—®é¢˜å°±åœ¨äºå¯èƒ½å’Œåç«¯æ•°æ®åº“çš„çŠ¶æ€ä¸åŒæ­¥...","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1639402578,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1098584,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c3/58/ba171e09.jpg","nickname":"å°èƒ–","note":"","ucode":"B1C0EFDD821630","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":414719,"discussion_content":"è¯´ä¸‹æˆ‘çš„ç†è§£(ççŒœ)ï¼š\n1. localStorageè¿˜æ˜¯æœ‰å¤§å°é™åˆ¶äº†ï¼Œ5Mï¼Œè¿™ä¸ªå¤§å°ä½ è¯´å¤Ÿä¹Ÿå¤Ÿï¼Œè¯´ä¸å¤Ÿä¹Ÿä¸å¤Ÿã€‚\n2. localStorageè¿˜æ˜¯æœ‰å…¼å®¹é—®é¢˜çš„(ä¸æ”¯æŒIE8)ï¼Œvuexå¥½åƒæ˜¯æ²¡æœ‰è¿™ä¸ªé™åˆ¶çš„ï¼Œvue2çš„å¿˜è®°æ˜¯ä¸æ˜¯æ”¯æŒIE8äº†ã€‚\n3. åªæœ‰ä¸€äº›ç‰¹å®šçš„åœºæ™¯ï¼Œæˆ‘ä»¬æ‰éœ€è¦æŠŠæ•°æ®å­˜å‚¨åœ¨æœ¬åœ°ï¼Œç”¨æˆ·ä¿¡æ¯è¿™äº›æˆ‘ä»¬æ›´å¤šæ˜¯å€¾å‘äºç”¨æˆ·ç¬¬åˆ·æ–°ä¸€æ¬¡å°±å‘åç«¯æ‹¿ä¸€æ¬¡æ–°çš„ï¼Œè€Œä¸æ˜¯ä½¿ç”¨æœ¬åœ°æ•°æ®ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636872850,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":2063970,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/8YX35AFKL60uUNM5YGloEx8uDbv0VGB5VddYvqKDgPRiauyW1ggJIs9p6B7ad3AricFMZAp8ahAqP4FmzaTP1few/132","nickname":"è‘±å‘³é»‘å’–å•¡","note":"","ucode":"9BF75E8CCF8E0B","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1098584,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c3/58/ba171e09.jpg","nickname":"å°èƒ–","note":"","ucode":"B1C0EFDD821630","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":531082,"discussion_content":"å¦‚æœæ˜¯å¿…é¡»ç»“åˆæµè§ˆå™¨storageåšæŒä¹…åŒ–æ•°æ®çš„ï¼Œlocalstorageå°±å†³å®šäº†æ•°æ®å¤§å°ä¸Šé™ï¼Œvuexåšä¸åšé™åˆ¶å·²ç»æ— æ‰€è°“äº†ã€‚è‡³äºåˆ·æ–°ä¸€æ¬¡å°±æ‹¿ä¸€æ¬¡æ•°æ®ä¸å¤ªè®¤åŒï¼Œç”¨æˆ·æ•°æ®çš„æ›´æ–°é¢‘ç‡ä¸€èˆ¬æ˜¯å¾ˆä½çš„ï¼Œå¦‚æœèƒ½åªæ‹¿ä¸€æ¬¡å°±å¯ä»¥å‡å°‘å¤šæ¬¡è¯·æ±‚çš„å¼€é”€ã€‚å†µä¸”é™¤äº†ç”¨æˆ·æ•°æ®å¤–ï¼Œå‡å¦‚è¿˜æƒ³è¦å­˜å…¥å…¶ä»–ç›¸å¯¹é™æ€çš„æ•°æ®å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637223562,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":414719,"ip_address":""},"score":531082,"extra":"{\"user_type\":1}"},{"author":{"id":1098584,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c3/58/ba171e09.jpg","nickname":"å°èƒ–","note":"","ucode":"B1C0EFDD821630","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2063970,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/8YX35AFKL60uUNM5YGloEx8uDbv0VGB5VddYvqKDgPRiauyW1ggJIs9p6B7ad3AricFMZAp8ahAqP4FmzaTP1few/132","nickname":"è‘±å‘³é»‘å’–å•¡","note":"","ucode":"9BF75E8CCF8E0B","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":531090,"discussion_content":"å¯¹äºé™æ€æ•°æ®ï¼Œç”¨æœ¬åœ°å­˜å‚¨æ²¡æœ‰é—®é¢˜ï¼Œä½†ä¸Šé¢çš„é—®é¢˜æ˜¯ä¸ä½¿ç”¨Vuexç›´æ¥ä½¿ç”¨localstorageï¼Œå¹¶æ²¡æœ‰è¯´æ˜¯â€œé™æ€æ•°æ®â€ç›´æ¥ä½¿ç”¨localstorageã€‚\nå¯¹äºï¼Œç”¨æˆ·æ•°æ®ä¸ä¼šå˜åŠ¨ä¼šå°‘çš„é—®é¢˜ï¼Œä¹Ÿè¦çœ‹äº§å“ç±»å‹ã€‚åŒæ—¶ï¼Œå°±ç®—äº§å“ç±»å‹ç”¨æˆ·ä¿¡æ¯å˜åŠ¨ä¼šå¾ˆå°ï¼Œéš¾é“åˆ·æ–°ä½ ä¸å»é‡æ–°å–æ•°æ®ä¹ˆï¼Œç›´æ¥ç”¨æœ¬åœ°æ•°æ®ï¼Ÿ\næˆ–è€…è¿˜å…ˆæ¥å£è¯·æ±‚ä¸‹åç«¯æ•°æ®æœ‰æ²¡æœ‰å˜ï¼Œæœ‰å˜å°±æ‹¿æ–°çš„ï¼Œæ²¡å˜å°±æ‹¿æœ¬åœ°çš„ï¼Œé‚£ä¸ºä½•ä¸ç›´æ¥æ‹¿ä¸€æ¬¡æ–°çš„å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637225001,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":531082,"ip_address":""},"score":531090,"extra":"{\"user_type\":1}"}]}]},{"had_liked":false,"id":320444,"user_name":"å—å±±","can_delete":false,"product_type":"c1","uid":1239362,"ip_address":"","ucode":"1B5EF54A2A56F8","user_header":"https://static001.geekbang.org/account/avatar/00/12/e9/42/1de79e71.jpg","comment_is_top":false,"comment_ctime":1636334658,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5931301954","product_id":100094401,"comment_content":"æ‰“å¡<br>1. ç™»å½•çš„ç”¨æˆ·ä¿¡æ¯ï¼Œæƒé™ä¿¡æ¯ï¼Œå­—å…¸ä¿¡æ¯<br>2. å…¨å±€å…±äº«çš„æ•°æ®","like_count":1},{"had_liked":false,"id":360698,"user_name":"æµ£èŠ±å…¬å­","can_delete":false,"product_type":"c1","uid":3204086,"ip_address":"å‰æ—","ucode":"2C88563566FF0B","user_header":"https://static001.geekbang.org/account/avatar/00/30/e3/f6/4a873881.jpg","comment_is_top":false,"comment_ctime":1666766420,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1666766420","product_id":100094401,"comment_content":"provide å…¨å±€æä¾›æ•°æ®<br>inject ä»»æ„å­ç»„ä»¶ä¸­è·å–provideæä¾›çš„æ•°æ®<br>æ„Ÿè§‰å°±æ˜¯ react é‡Œçš„ ä¸Šä¸‹æ–‡ useContext","like_count":0},{"had_liked":false,"id":351566,"user_name":"ä¸€ä¸­å¿ƒ","can_delete":false,"product_type":"c1","uid":1063514,"ip_address":"","ucode":"0678061709E709","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLDXstrzRuSBz119U4W1MSk3LVj2Jia5XzKEUZsuRNRzs00geIquOyFsuhORibPMB4Ec2Dp6Zecpogg/132","comment_is_top":false,"comment_ctime":1657936497,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1657936497","product_id":100094401,"comment_content":"gitlabåœ°å€æˆ‘æ€ä¹ˆæ‰¾ä¸åˆ°äº†","like_count":0},{"had_liked":false,"id":349788,"user_name":"ä¸ä¸å†é™©è®°","can_delete":false,"product_type":"c1","uid":1661704,"ip_address":"","ucode":"A43829E454C067","user_header":"https://static001.geekbang.org/account/avatar/00/19/5b/08/b0b0db05.jpg","comment_is_top":false,"comment_ctime":1656328108,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1656328108","product_id":100094401,"comment_content":"ç¬¬ä¸€ä¸ªä¾‹å­æŠ¥é”™äº†ï¼Œå¤§å®¶æ˜¯å¦‚ä½•æŠ˜è…¾è¿‡å»çš„ã€‚ <br>æœ€çƒ¦è¿™ç§ï¼Œä¾‹å­ä¸ç»™å…¨ï¼Œä¸€æŠ„å…¨æ˜¯å‘çš„ä¸œè¥¿ã€‚<br>UncaughtTypeError: Cannot read property &#39;state&#39; of undefined","like_count":0},{"had_liked":false,"id":349031,"user_name":"æå®—è±ª","can_delete":false,"product_type":"c1","uid":2975725,"ip_address":"","ucode":"05723CB1F02F3B","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEK2nhcF9TqzhWX9FVA3OcrSsQpB0ucicISapYWvRzemJxvL5jAar1qAhLmuA3FicZ1sNhZmyoq3ODvA/132","comment_is_top":false,"comment_ctime":1655653573,"is_pvip":false,"discussion_count":0,"race_medal":3,"score":"1655653573","product_id":100094401,"comment_content":"vue3ä¸ç”¨tsç”¨jsåšdemoå—ï¼Ÿ","like_count":0},{"had_liked":false,"id":347469,"user_name":"Totoro","can_delete":false,"product_type":"c1","uid":2936272,"ip_address":"","ucode":"78C45824B7C0BE","user_header":"https://static001.geekbang.org/account/avatar/00/2c/cd/d0/7431a18a.jpg","comment_is_top":false,"comment_ctime":1654062582,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1654062582","product_id":100094401,"comment_content":"åœ¨æä¾›getæ–¹æ³•å’Œcommitçš„é‚£æ®µä»£ç  data: options.state() æ²¡åŠ ä¸Š &quot;()&quot;è°ƒç”¨, ä¼šæ‹¿ä¸åˆ°æ•°æ®","like_count":0},{"had_liked":false,"id":346462,"user_name":"Spike Jim.Fun","can_delete":false,"product_type":"c1","uid":1300707,"ip_address":"","ucode":"C956A19146E1DA","user_header":"https://static001.geekbang.org/account/avatar/00/13/d8/e3/987c9195.jpg","comment_is_top":false,"comment_ctime":1653151858,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1653151858","product_id":100094401,"comment_content":"&#47;&#47; let double = computed(() =&gt; store.getters.double)<br>è¿™é‡Œçš„double æ²¡æœ‰å¿…è¦å†åŒ…è£¹ä¸€écomputedï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼š<br>let double = store.getters.double","like_count":0},{"had_liked":false,"id":343689,"user_name":"äº‘ä¸­æ­Œ","can_delete":false,"product_type":"c1","uid":1806446,"ip_address":"","ucode":"F2F0AED74159D2","user_header":"https://static001.geekbang.org/account/avatar/00/1b/90/6e/d729672d.jpg","comment_is_top":false,"comment_ctime":1650983413,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1650983413","product_id":100094401,"comment_content":"æ²¡å¤ªçœ‹æ˜ç™½ï¼Œä¸ºä»€ä¹ˆè¦å•ç‹¬æä¸€ä¸ªactionsï¼Œæ—¢ç„¶éƒ½æ˜¯è°ƒç”¨çš„mutationï¼Œä¸ºä»€ä¹ˆè¿™éƒ¨åˆ†ä¸äº¤ç»™ä¸šåŠ¡è‡ªå·±åšè¿˜çµæ´»ä¸€äº›","like_count":0},{"had_liked":false,"id":342573,"user_name":"LINEQ","can_delete":false,"product_type":"c1","uid":2924165,"ip_address":"","ucode":"43F969C38B40FE","user_header":"https://static001.geekbang.org/account/avatar/00/2c/9e/85/2c61e700.jpg","comment_is_top":false,"comment_ctime":1650349821,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1650349821","product_id":100094401,"comment_content":"ä¸çœ‹è¯„è®ºåŒºéƒ½ä¸çŸ¥é“æ€ä¹ˆæ’é”™ğŸ˜‚","like_count":0},{"had_liked":false,"id":339297,"user_name":"ç¨³ä¸é™","can_delete":false,"product_type":"c1","uid":2934922,"ip_address":"","ucode":"30B049C1341E13","user_header":"https://static001.geekbang.org/account/avatar/00/2c/c8/8a/a8338fbe.jpg","comment_is_top":false,"comment_ctime":1648026168,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1648026168","product_id":100094401,"comment_content":"å¤§åœ£è€å¸ˆï¼Œä½ å¥½ï¼Œä½ åœ¨ä¸Šè¾¹æåˆ°äº†vuexä¸­çš„actionsé…ç½®é¡¹æ˜¯æ”¯æŒå¼‚æ­¥é€»è¾‘çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡axios è¯·æ±‚  è¯·æ±‚æ•°æ®åº“ä¸­çš„ä¸€äº›æ•°æ®ï¼Œæˆ‘æƒ³é—®æˆ‘ä»¬æ˜¯ä¸æ˜¯éœ€è¦å°†è¿›è¡Œaxiosè¯·æ±‚çš„æ–¹æ³•åœ¨é¡¹ç›®åˆå§‹åŒ–çš„æ—¶å€™æ”¾åˆ°App.vueç»„ä»¶çš„onmountedï¼ˆï¼‰ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸­ï¼Œè¿™æ ·åœ¨æŒ‚è½½çš„æ—¶å€™æ‰èƒ½è¯·æ±‚åˆ°æ•°æ®ã€‚","like_count":0},{"had_liked":false,"id":339246,"user_name":"ç¨³ä¸é™","can_delete":false,"product_type":"c1","uid":2934922,"ip_address":"","ucode":"30B049C1341E13","user_header":"https://static001.geekbang.org/account/avatar/00/2c/c8/8a/a8338fbe.jpg","comment_is_top":false,"comment_ctime":1648006032,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1648006032","product_id":100094401,"comment_content":"ç¬¬ä¸€éƒ¨åˆ†vuexçš„index.jsæ–‡ä»¶ä¸å¯¹å§ï¼Œæˆ‘ä»¬æŠŠå¯¹è±¡æ²¡æœ‰storeå¯¹è±¡éƒ½æ²¡æœ‰æš´éœ²å‡ºå»ï¼Œå¦‚ä½•åœ¨main.jsæ–‡ä»¶ä¸­æ³¨å†Œ?","like_count":0},{"had_liked":false,"id":334307,"user_name":"åæœ¨åŒå­¦-TM","can_delete":false,"product_type":"c1","uid":1376768,"ip_address":"","ucode":"821FF531D6F18B","user_header":"https://static001.geekbang.org/account/avatar/00/15/02/00/e99cbf75.jpg","comment_is_top":false,"comment_ctime":1644857924,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1644857924","product_id":100094401,"comment_content":"å¤§åœ£è€å¸ˆï¼Œæˆ‘æŒ‰ç…§æ–‡ç« çš„ä»£ç æ•²ä¸‹æ¥ï¼Œé¡µé¢æŠ¥TypeError: Cannot read properties of undefined (reading &#39;state&#39;)è¿™ä¸ªé”™ï¼ŒæŠ¥é”™çš„åœ°æ–¹åœ¨count.vueæ–‡ä»¶çš„store.state.count,è¿™æ˜¯ä»€ä¹ˆåŸå› å‘¢","like_count":0,"discussions":[{"author":{"id":2967711,"avatar":"https://static001.geekbang.org/account/avatar/00/2d/48/9f/d850ec1a.jpg","nickname":"è½©å­","note":"","ucode":"24A6CC61C1F4E2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":572145,"discussion_content":"æˆ‘åˆšå¼€å§‹æŠŠstoreå’Œrouterå†™åœ¨åŒä¸€ä¸ªuseä¸­æŠ¥è¿™é”™ï¼Œæ”¹æˆä¸‹è¾¹è¿™ç§å°±å¥½äº†\ncreateApp(App)\n.use(router)\n.use(store)\n.mount(&#34;#app&#34;);","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1652620086,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":333721,"user_name":"æé”¦ä¼¦","can_delete":false,"product_type":"c1","uid":2814182,"ip_address":"","ucode":"9583D304D6D777","user_header":"https://static001.geekbang.org/account/avatar/00/2a/f0/e6/a7b1abe5.jpg","comment_is_top":false,"comment_ctime":1644484827,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1644484827","product_id":100094401,"comment_content":"  Object.keys(options.getters).forEach(name =&gt; {<br>      const fn = options.getters[name]<br>      this.getters[name] = computed(() =&gt; fn(this.state))<br>    })<br>ä¼ å…¥åˆ°fné‡Œçš„ this.state çš„æŒ‡å‘æ˜¯é‚£ä¸ªstate","like_count":0,"discussions":[{"author":{"id":1242602,"avatar":"https://static001.geekbang.org/account/avatar/00/12/f5/ea/5f046856.jpg","nickname":"Dale","note":"","ucode":"AD19A33FE5EEDF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":555507,"discussion_content":"getters æ•´ä¸ªæ”¹æˆä¸€ä¸ª computed å¾—åˆ°çš„å“åº”å¼å¯¹è±¡å°±è¡Œäº†å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646933268,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":332744,"user_name":"è¥¿çº¢æŸ¿ç‚’ç•ªèŒ„","can_delete":false,"product_type":"c1","uid":2045741,"ip_address":"","ucode":"384828B4ABEDF3","user_header":"https://static001.geekbang.org/account/avatar/00/1f/37/2d/df408cde.jpg","comment_is_top":false,"comment_ctime":1643537951,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1643537951","product_id":100094401,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œåœ¨ä¸è°ˆè®ºå¯ç»´æŠ¤æ€§çš„æƒ…å†µä¸‹ã€‚ä¸é€šè¿‡mutationï¼Œç›´æ¥ä¿®æ”¹stateåº”è¯¥ä¹Ÿä¼šè§¦å‘è§†å›¾çš„é‡æ–°æ¸²æŸ“å§ã€‚","like_count":0},{"had_liked":false,"id":331396,"user_name":"Geek_30ee3b","can_delete":false,"product_type":"c1","uid":2829632,"ip_address":"","ucode":"116959550659F9","user_header":"","comment_is_top":false,"comment_ctime":1642572517,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1642572517","product_id":100094401,"comment_content":"minivuex ç‰› å­¦åˆ°äº†","like_count":0},{"had_liked":false,"id":330420,"user_name":"Q","can_delete":false,"product_type":"c1","uid":1412736,"ip_address":"","ucode":"10A972D7A85627","user_header":"https://static001.geekbang.org/account/avatar/00/15/8e/80/2ad9e9f5.jpg","comment_is_top":false,"comment_ctime":1641973564,"is_pvip":false,"replies":[{"id":"120841","content":"useStoreéœ€è¦åœ¨setupå‡½æ•°å†…éƒ¨ æˆ–è€…script setupå†…ä½¿ç”¨ï¼Œä½ å¯ä»¥å¯¹æ¯”ä¸€ä¸‹è¯¾çš„ä»£ç ","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1003715","ctime":1642338450,"ip_address":"","comment_id":330420,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1641973564","product_id":100094401,"comment_content":"è€å¸ˆ,ä¸ºä»€ä¹ˆæˆ‘åœ¨ç»„ä»¶å†…import { useStore } from &#39;vuex&#39;ä¹‹ååœ¨ä¸‹é¢è·å–ä¸åˆ°storeçš„å®ä¾‹,å¹¶ä¸”æ€»æ˜¯ç»™æˆ‘[Vue warn]: inject() can only be used inside setup() or functional componentsè¿™ä¸ªè­¦å‘Š,æˆ‘åœ¨æŒ‚è½½storeçš„åœ°æ–¹å®é™…ä¸Šæ˜¯å¯ä»¥è·å–åˆ°storeçš„å®ä¾‹çš„","like_count":0,"discussions":[{"author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"èŠ±æœå±±å¤§åœ£","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":546543,"discussion_content":"useStoreéœ€è¦åœ¨setupå‡½æ•°å†…éƒ¨ æˆ–è€…script setupå†…ä½¿ç”¨ï¼Œä½ å¯ä»¥å¯¹æ¯”ä¸€ä¸‹è¯¾çš„ä»£ç ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642338451,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":329435,"user_name":"coder","can_delete":false,"product_type":"c1","uid":1656956,"ip_address":"","ucode":"3A0940EBF94577","user_header":"https://static001.geekbang.org/account/avatar/00/19/48/7c/2aaf50e5.jpg","comment_is_top":false,"comment_ctime":1641350344,"is_pvip":false,"replies":[{"id":"120854","content":"ä»£ç åœ¨è¿™é‡Œ <br>https:&#47;&#47;github.com&#47;shengxinjing&#47;geektime-vue-course&#47;blob&#47;main&#47;mini-vuex-router&#47;src&#47;store&#47;gvuex.js","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1003715","ctime":1642339826,"ip_address":"","comment_id":329435,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1641350344","product_id":100094401,"comment_content":"è¿™ç« çš„ä»£ç githubä¸Šæ²¡æœ‰å•Š","like_count":0,"discussions":[{"author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"èŠ±æœå±±å¤§åœ£","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":546559,"discussion_content":"ä»£ç åœ¨è¿™é‡Œ \nhttps://github.com/shengxinjing/geektime-vue-course/blob/main/mini-vuex-router/src/store/gvuex.js","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642339826,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":323517,"user_name":"solomon","can_delete":false,"product_type":"c1","uid":2545770,"ip_address":"","ucode":"EDCB23F1977E10","user_header":"https://static001.geekbang.org/account/avatar/00/26/d8/6a/38e21f41.jpg","comment_is_top":false,"comment_ctime":1637942986,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1637942986","product_id":100094401,"comment_content":"vue3æ›´é€‚åˆç”¨pinia:  https:&#47;&#47;juejin.cn&#47;post&#47;7030999394518302727","like_count":0},{"had_liked":false,"id":323300,"user_name":"æœ—","can_delete":false,"product_type":"c1","uid":2563876,"ip_address":"","ucode":"3E9B825DFC6178","user_header":"https://static001.geekbang.org/account/avatar/00/27/1f/24/24f15e57.jpg","comment_is_top":false,"comment_ctime":1637826213,"is_pvip":false,"replies":[{"id":"117370","content":"è¿™æ˜¯classè¯­æ³•é‡Œçš„getterè¯­æ³•ï¼Œè¯»å–stateçš„æ—¶å€™æ‰§è¡Œget stateè¿™ä¸ªå‡½æ•°","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1003715","ctime":1637932702,"ip_address":"","comment_id":323300,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1637826213","product_id":100094401,"comment_content":"class Store {<br>    constructor(opts) {<br>        this.$options = opts<br>        this._state = reactive({<br>            data: opts.state()<br>        })<br><br>        this._mutations = opts.mutations<br><br>    }<br><br>    get state() {<br>        return this._state.data<br>    }<br><br>    commit = (type, payload) =&gt; {<br>        const entry = this._mutations[type]<br><br>        return entry &amp;&amp; entry(this.state, payload)<br>    }<br><br>    install(app) {<br>        app.provide(STORE_KEY, this)<br>    }<br>}<br><br>export { useStore, createStore }<br><br>é—®ä¸‹ return entry &amp;&amp; entry(this.state, payload)  ä¸­çš„this.stateå‚æ•°ï¼Œæ˜¯ä¸ªæ–¹æ³•ï¼Œä½†è¿™é‡Œæ²¡æœ‰è°ƒç”¨ï¼Œæ˜¯æ€ä¹ˆè·å–è¿™ä¸ªæ–¹æ³•é‡Œreturnçš„this._state.dataå‘¢","like_count":0,"discussions":[{"author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"èŠ±æœå±±å¤§åœ£","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":533678,"discussion_content":"è¿™æ˜¯classè¯­æ³•é‡Œçš„getterè¯­æ³•ï¼Œè¯»å–stateçš„æ—¶å€™æ‰§è¡Œget stateè¿™ä¸ªå‡½æ•°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637932702,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":323084,"user_name":"ä¸€å—å°ç –å¤´","can_delete":false,"product_type":"c1","uid":1848314,"ip_address":"","ucode":"4FA84F57FDEC18","user_header":"","comment_is_top":false,"comment_ctime":1637723187,"is_pvip":false,"replies":[{"id":"117371","content":"ä½ éœ€è¦export defaultä¸€ä¸‹store","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1003715","ctime":1637932728,"ip_address":"","comment_id":323084,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1637723187","product_id":100094401,"comment_content":"The requested module &#39;&#47;src&#47;store&#47;gvuex.js?t=1637723171450&#39; does not provide an export named &#39;default&#39;     æœ‰äººé‡åˆ°äº†è¿™ä¸ªé—®é¢˜ä¹ˆï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"èŠ±æœå±±å¤§åœ£","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":533679,"discussion_content":"ä½ éœ€è¦export defaultä¸€ä¸‹store","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637932728,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":321722,"user_name":"ç™¾äº‹å¯ä¹","can_delete":false,"product_type":"c1","uid":2815755,"ip_address":"","ucode":"7D7561B5306066","user_header":"https://static001.geekbang.org/account/avatar/00/2a/f7/0b/b01f1d68.jpg","comment_is_top":false,"comment_ctime":1637025455,"is_pvip":false,"replies":[{"id":"116994","content":"options.state()æ˜¯okçš„","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1003715","ctime":1637242811,"ip_address":"","comment_id":321722,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1637025455","product_id":100094401,"comment_content":"constructor ï¼ˆï¼‰{<br><br> this.$options = options;<br>        this._state = reactive({<br>            data: options.state()     &#47;&#47; è¿™é‡Œæ–‡ç« è¿™é‡Œæœ€åæ”¹æˆ  options.state  å¥½åƒä¸å¯¹å§<br>        })<br>        this._mutations = options.mutations<br>}","like_count":0,"discussions":[{"author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"èŠ±æœå±±å¤§åœ£","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":531158,"discussion_content":"options.state()æ˜¯okçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637242811,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":321033,"user_name":"ç“¦åŠ›","can_delete":false,"product_type":"c1","uid":1169104,"ip_address":"","ucode":"130655441C68CB","user_header":"https://static001.geekbang.org/account/avatar/00/11/d6/d0/288c673c.jpg","comment_is_top":false,"comment_ctime":1636626276,"is_pvip":false,"replies":[{"id":"116494","content":"å…¶å®éƒ½æ˜¯æ•°æ®ç®¡ç†çš„é€»è¾‘  é€šç”¨çš„ å˜¿å˜¿","user_name":"ä½œè€…å›å¤","user_name_real":"èŠ±æœå±±å¤§åœ£","uid":"1003715","ctime":1636637406,"ip_address":"","comment_id":321033,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1636626276","product_id":100094401,"comment_content":"æ„Ÿè§‰vuexçš„å¾ˆå¤§éƒ¨åˆ†é€»è¾‘æ¥è‡ªäºreduxï¼Œæ¦‚å¿µåŸºæœ¬ç›¸åŒï¼šstoreã€stateã€actionã€reducer(mutation)ã€middleware(commit)ï¼ŒUIä¸é€»è¾‘åˆ†ç¦»ï¼Œactionè§¦å‘stateæ”¹å˜ï¼Œå¹¶ä¸”stateæ˜¯immutableçš„ã€‚","like_count":0,"discussions":[{"author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"èŠ±æœå±±å¤§åœ£","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":530192,"discussion_content":"å…¶å®éƒ½æ˜¯æ•°æ®ç®¡ç†çš„é€»è¾‘  é€šç”¨çš„ å˜¿å˜¿","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636637406,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":320699,"user_name":"æ— åŒ","can_delete":false,"product_type":"c1","uid":1238757,"ip_address":"","ucode":"405779043D091E","user_header":"https://static001.geekbang.org/account/avatar/00/12/e6/e5/e3daa1a7.jpg","comment_is_top":false,"comment_ctime":1636459719,"is_pvip":false,"replies":[{"id":"118392","content":"vuexæœ‰æŒä¹…åŒ–æ’ä»¶å¯ä»¥è€ƒè™‘ä½¿ç”¨vuex-persistedstate","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1003715","ctime":1639402745,"ip_address":"","comment_id":320699,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1636459719","product_id":100094401,"comment_content":"å¤§åœ£è€å¸ˆ,è¯·é—®vuexå¦‚ä½•å¤„ç†åˆ·æ–°ä¸¢å¤±æ•°æ®çš„é—®é¢˜ï¼Œæˆ‘è‡ªå·±çš„å¤„ç†æ–¹å¼æ˜¯æŠŠStorageå°è£…åˆ°vuexä¸­ï¼Œä½†æ„Ÿè§‰ä¸æ˜¯å¾ˆå¥½ã€‚","like_count":0,"discussions":[{"author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"èŠ±æœå±±å¤§åœ£","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":538400,"discussion_content":"vuexæœ‰æŒä¹…åŒ–æ’ä»¶å¯ä»¥è€ƒè™‘ä½¿ç”¨vuex-persistedstate","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639402745,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":320544,"user_name":"æ‹¼æã€è¿›å–","can_delete":false,"product_type":"c1","uid":2818717,"ip_address":"","ucode":"C8BB52028C1B5E","user_header":"https://static001.geekbang.org/account/avatar/00/2b/02/9d/566b9065.jpg","comment_is_top":false,"comment_ctime":1636373979,"is_pvip":false,"replies":[{"id":"116514","content":"ç¬¬ä¸€éƒ¨åˆ†çš„æ¼”ç¤ºä»£ç åœ¨è¿™é‡Œäº†ï¼Œæ¬¢è¿å‘ç°bugæpr<br>https:&#47;&#47;github.com&#47;shengxinjing&#47;geektime-vue-course","user_name":"ä½œè€…å›å¤","user_name_real":"èŠ±æœå±±å¤§åœ£","uid":"1003715","ctime":1636637987,"ip_address":"","comment_id":320544,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1636373979","product_id":100094401,"comment_content":"getters:{ double(state){ return state.count*2 } }, è¿™ä¸ªgetterså¦‚ä½•å®ç°çš„å‘¢","like_count":0,"discussions":[{"author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"èŠ±æœå±±å¤§åœ£","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":530039,"discussion_content":"ç¬¬ä¸€éƒ¨åˆ†çš„æ¼”ç¤ºä»£ç åœ¨è¿™é‡Œäº†ï¼Œæ¬¢è¿å‘ç°bugæpr\nhttps://github.com/shengxinjing/geektime-vue-course","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636637987,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":320537,"user_name":"Victor","can_delete":false,"product_type":"c1","uid":1321640,"ip_address":"","ucode":"1E8234654B926F","user_header":"https://static001.geekbang.org/account/avatar/00/14/2a/a8/b101c645.jpg","comment_is_top":false,"comment_ctime":1636371430,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1636371430","product_id":100094401,"comment_content":"vuexæ˜¯ä¸ºäº†è§£å†³è·¨ç»„ä»¶å’Œè·¨é¡µé¢çš„å¤§é‡æ•°æ®å…±äº«çš„é—®é¢˜ï¼Œç›¸æ¯”è¾ƒä¹Ÿèƒ½å¤Ÿè§£å†³æ­¤é—®é¢˜çš„localstorageæ¥è¯´ï¼Œvuex ç®¡ç†çš„æ•°æ®æ”¯æŒå“åº”å¼ï¼Œæä¾›äº†ç»Ÿä¸€çš„æ›´æ–°å’Œè·å–æ•°æ®çš„æ–¹å¼ã€‚<br>æ‰€ä»¥ï¼Œåƒç”¨æˆ·ç™»å½•ä¿¡æ¯ï¼ŒçŠ¶æ€ä¿¡æ¯ç­‰éƒ½å¾ˆé€‚åˆã€‚","like_count":0},{"had_liked":false,"id":320522,"user_name":"é˜¿é˜³","can_delete":false,"product_type":"c1","uid":1165817,"ip_address":"","ucode":"20A35FB86B1C5C","user_header":"https://static001.geekbang.org/account/avatar/00/11/c9/f9/39492855.jpg","comment_is_top":false,"comment_ctime":1636365150,"is_pvip":false,"replies":[{"id":"116209","content":"miniç‰ˆæœ¬çš„æ—¶å€™äº”æŠŠstateè®¾ç½®ä¸ºå¯¹è±¡äº†","user_name":"ä½œè€…å›å¤","user_name_real":"èŠ±æœå±±å¤§åœ£","uid":"1003715","ctime":1636378194,"ip_address":"","comment_id":320522,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1636365150","product_id":100094401,"comment_content":"åœ¨å®ç°miniç‰ˆçš„vuexæ—¶ï¼Œä»¥ä¸‹ä»£ç this._state = reactive({ data: options.state })ï¼Œè¿™é‡Œæ˜¯ä¸æ˜¯åº”è¯¥æ˜¯options.state()ï¼Œæ˜¯ä¸€ä¸ªå‡½æ•°è°ƒç”¨ã€‚å› ä¸ºåœ¨åˆ›å»ºstoreæ—¶ï¼Œstateå·²ç»å†™æˆäº†ä¸€ä¸ªå‡½æ•°äº†ã€‚","like_count":0,"discussions":[{"author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"èŠ±æœå±±å¤§åœ£","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":530027,"discussion_content":"miniç‰ˆæœ¬çš„æ—¶å€™äº”æŠŠstateè®¾ç½®ä¸ºå¯¹è±¡äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636378194,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":320464,"user_name":"1023","can_delete":false,"product_type":"c1","uid":2817114,"ip_address":"","ucode":"5EE74BC138E4B3","user_header":"https://static001.geekbang.org/account/avatar/00/2a/fc/5a/3d4cb5ab.jpg","comment_is_top":false,"comment_ctime":1636343257,"is_pvip":false,"replies":[{"id":"116518","content":"ç¬¬ä¸€éƒ¨åˆ†å®æˆ˜ä»£ç åœ¨è¿™é‡Œå‘€ï¼Œæ¬¢è¿é‡è§bugäº†æprå‘€<br>https:&#47;&#47;github.com&#47;shengxinjing&#47;geektime-vue-course","user_name":"ä½œè€…å›å¤","user_name_real":"èŠ±æœå±±å¤§åœ£","uid":"1003715","ctime":1636638084,"ip_address":"","comment_id":320464,"utype":1}],"discussion_count":7,"race_medal":0,"score":"1636343257","product_id":100094401,"comment_content":"ç¬¬ä¸€ä¸ªç¤ºä¾‹æŠ¥é”™ï¼Œè·å–ä¸åˆ°storeæ˜¯ä»€ä¹ˆåŸå› å‘¢","like_count":0,"discussions":[{"author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"èŠ±æœå±±å¤§åœ£","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":530002,"discussion_content":"ç¬¬ä¸€éƒ¨åˆ†å®æˆ˜ä»£ç åœ¨è¿™é‡Œå‘€ï¼Œæ¬¢è¿é‡è§bugäº†æprå‘€\nhttps://github.com/shengxinjing/geektime-vue-course","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636638084,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1883514,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/bd/7a/37df606b.jpg","nickname":"ä¹”å¸† Kayla","note":"","ucode":"81944832230BC4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":542492,"discussion_content":"store/index.js  ä¸­åŠ  export { store }\n\nmain.js ä¸­åŠ   import { store } from &#39;./store/index&#39;","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640767870,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2817114,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/fc/5a/3d4cb5ab.jpg","nickname":"1023","note":"","ucode":"5EE74BC138E4B3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":413292,"discussion_content":"ç ´æ¡ˆäº†ï¼Œæˆ‘ä¹‹å‰æ˜¯å†™åœ¨viteæ„å»ºçš„é¡¹ç›®ä¸­çš„ï¼Œè·å–ä¸åˆ°storeï¼Œvue3 cli æ„å»ºçš„é¡¹ç›®ä¸­å¯ä»¥æ­£å¸¸è·å–ã€‚æ”¹åˆ°æ€€ç–‘è‡ªå·±............................","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636439730,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1133376,"avatar":"https://static001.geekbang.org/account/avatar/00/11/4b/40/abfc81f4.jpg","nickname":"belboard","note":"","ucode":"E1696E94A6A3AC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2817114,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/fc/5a/3d4cb5ab.jpg","nickname":"1023","note":"","ucode":"5EE74BC138E4B3","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":531931,"discussion_content":"æˆ‘ä¹Ÿé‡åˆ°å’Œä½ ä¸€æ ·çš„é—®é¢˜ï¼Œåæ¥å‘ç°æ²¡æœ‰æš´éœ²storeï¼ŒåŠ ä¸Šexport default storeå³å¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637473831,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":413292,"ip_address":""},"score":531931,"extra":"{\"user_type\":1}"},{"author":{"id":1305516,"avatar":"https://static001.geekbang.org/account/avatar/00/13/eb/ac/d31b15d8.jpg","nickname":"Mr.Zhu â„¡Â¹âµÂ¹âµâ¶â´â¶â°Â³â°â¶","note":"","ucode":"CE0E6BDFB6B598","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1133376,"avatar":"https://static001.geekbang.org/account/avatar/00/11/4b/40/abfc81f4.jpg","nickname":"belboard","note":"","ucode":"E1696E94A6A3AC","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":536690,"discussion_content":"è¿™ä¸ªé¸Ÿé¡¹ç›® å†™ä»£ç åªå†™ä¸€åŠ å‰©ä¸‹ä¸€ä¸¤å¥ éƒ½è¦ä½ è‡ªå·±æ‰¾é—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638845872,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":531931,"ip_address":""},"score":536690,"extra":""}]},{"author":{"id":1618815,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b3/7f/e3b0e8c1.jpg","nickname":"Range","note":"","ucode":"1AECD8E9AF6CC4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":413027,"discussion_content":"main.js   åŠ ä¸Š   import store from &#39;./store/index&#39;","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636362381,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2817114,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/fc/5a/3d4cb5ab.jpg","nickname":"1023","note":"","ucode":"5EE74BC138E4B3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1618815,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b3/7f/e3b0e8c1.jpg","nickname":"Range","note":"","ucode":"1AECD8E9AF6CC4","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":413249,"discussion_content":"åŠ äº†ï¼Œä¹Ÿå¯¼å‡ºäº†ï¼Œå°±æ˜¯è·å–ä¸åˆ°ï¼Œå¾ˆå¥‡æ€ª","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636424450,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":413027,"ip_address":""},"score":413249,"extra":""}]}]},{"had_liked":false,"id":320428,"user_name":"æµ·é˜”å¤©ç©º","can_delete":false,"product_type":"c1","uid":1327016,"ip_address":"","ucode":"16C87A0052A08B","user_header":"https://static001.geekbang.org/account/avatar/00/14/3f/a8/8da58e53.jpg","comment_is_top":false,"comment_ctime":1636329408,"is_pvip":false,"replies":[{"id":"116530","content":"cool","user_name":"ä½œè€…å›å¤","user_name_real":"èŠ±æœå±±å¤§åœ£","uid":"1003715","ctime":1636638427,"ip_address":"","comment_id":320428,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1636329408","product_id":100094401,"comment_content":"vuexä½¿ç”¨åœºæ™¯ä¸€èˆ¬æ˜¯éœ€è¦å…±äº«çš„æ•°æ®ã€‚1ï¼Œå¯¹äºä¸åŒé¡µé¢ä¹‹é—´ï¼Œå¦‚ç”¨æˆ·ä¿¡æ¯ç­‰ã€‚2ï¼Œå¯¹äºå¤æ‚åŠŸèƒ½çš„é¡µé¢é—´ä¸åŒç»„ä»¶é—´çš„æ•°æ®å…±äº«ã€‚å¦‚æœä¸éœ€è¦å…±äº«çŠ¶æ€çš„ç»„ä»¶ï¼Œæ•°æ®å°±ä¸éœ€è¦å­˜å‚¨åˆ€vuexä¸­äº†ã€‚","like_count":0,"discussions":[{"author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"èŠ±æœå±±å¤§åœ£","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529985,"discussion_content":"cool","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636638427,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":320421,"user_name":"JayMe_DotDot","can_delete":false,"product_type":"c1","uid":1902591,"ip_address":"","ucode":"813CB9AF5744BE","user_header":"https://static001.geekbang.org/account/avatar/00/1d/07/ff/3b508125.jpg","comment_is_top":false,"comment_ctime":1636304674,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1636304674","product_id":100094401,"comment_content":"æ²¡æ¥è§¦è¿‡ Vuexï¼Œå¬äº†è€å¸ˆè®²çš„ï¼Œæ„Ÿè§‰ Vuex æœ€å¤§çš„ç‰¹ç‚¹æ˜¯ï¼š1ã€å¯ä»¥ç»Ÿä¸€ç»„ç»‡å’Œç®¡ç†è·¨ç»„ä»¶æ•°æ®ã€ç»„ä»¶ä¹‹é—´çš„æ•°æ®äº¤æµï¼›2ã€å› ä¸ºæ•°æ®ç»„ç»‡åœ¨ä¸€èµ·ï¼Œæ–¹ä¾¿å»æ£€æŸ¥å’Œç›‘æ§ã€‚<br><br>æ”¾åœ¨ Vuex ä¸­çš„æ•°æ®ï¼š1ã€ç™»å½•ä¿¡æ¯ï¼›2ã€æƒé™ä¿¡æ¯ï¼›3ã€æˆ‘å’‹æ„Ÿè§‰åªè¦ä¸æ˜¯ä¸€æ¬¡æ€§ä½¿ç”¨çš„æ•°æ®ã€å’Œå…¶ä»–ç»„ä»¶åŠåç«¯æœ‰äº¤äº’çš„æ•°æ®ï¼Œéƒ½è¦æ”¾åˆ° Vuex ä¸­ğŸ˜‚","like_count":0,"discussions":[{"author":{"id":2832259,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epmBmNzSU9po7PX7NapoPlIPoRWOUUAiaQ1RvOnqmMZkFLnVTKiafHEMzwiamEqWyDCYWcvpYunAJ5Kg/132","nickname":"aehyok","note":"","ucode":"5170D8FC3143D6","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":412916,"discussion_content":"å®è·µä¸€ä¸‹ï¼Œå¹¶ç»“åˆä¸šåŠ¡åœºæ™¯ï¼Œå¯èƒ½ä½ ä¼šæ…¢æ…¢æ€»ç»“å‡ºä½¿ç”¨åœºæ™¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636332930,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}