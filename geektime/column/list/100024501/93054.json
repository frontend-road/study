{"id":93054,"title":"22 | ç»†è¯´ iOS å“åº”å¼æ¡†æ¶å˜è¿ï¼Œå“ªäº›æ€æƒ³å¯ä»¥ä¸ºæˆ‘æ‰€ç”¨ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯æˆ´é“­ã€‚</p><p>è¯´åˆ°iOS å“åº”å¼æ¡†æ¶ï¼Œæœ€å¼€å§‹è¢«å¤§å®¶çŸ¥é“çš„æ˜¯ ReactiveCocoaï¼ˆç®€ç§°RACï¼‰ï¼Œåæ¥æ¯”è¾ƒæµè¡Œçš„æ˜¯ RxSwiftã€‚ä½†æ®æˆ‘äº†è§£ï¼ŒiOSåŸç”Ÿå¼€å‘ä½¿ç”¨ ReactiveCocoaæ¡†æ¶çš„å›¢é˜Ÿå¹¶ä¸å¤šï¼Œè€Œå‰ç«¯åœ¨æ¨å‡ºReact.js åï¼Œå“åº”å¼æ€è·¯éåœ°å¼€èŠ±ã€‚</p><p>é‚£ä¹ˆï¼Œ<strong>å“åº”å¼æ¡†æ¶åˆ°åº•æ˜¯ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆåœ¨iOSåŸç”Ÿå¼€å‘ä¸­æ²¡è¢«å¹¿æ³›é‡‡ç”¨ï¼Œå´èƒ½åœ¨å‰ç«¯é¢†åŸŸå¾—åˆ°æ¨å¹¿å‘¢ï¼Ÿ</strong></p><p>æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹å“åº”å¼æ¡†æ¶ï¼Œå®ƒæŒ‡çš„æ˜¯èƒ½å¤Ÿæ”¯æŒå“åº”å¼ç¼–ç¨‹èŒƒå¼çš„æ¡†æ¶ã€‚ä½¿ç”¨äº†å“åº”å¼æ¡†æ¶ï¼Œä½ åœ¨ç¼–ç¨‹æ—¶å°±å¯ä»¥ä½¿ç”¨æ•°æ®æµä¼ æ’­æ•°æ®çš„å˜åŒ–ï¼Œå“åº”è¿™ä¸ªæ•°æ®æµçš„è®¡ç®—æ¨¡å‹ä¼šè‡ªåŠ¨è®¡ç®—å‡ºæ–°çš„å€¼ï¼Œå°†æ–°çš„å€¼é€šè¿‡æ•°æ®æµä¼ ç»™ä¸‹ä¸€ä¸ªå“åº”çš„è®¡ç®—æ¨¡å‹ï¼Œå¦‚æ­¤åå¤ä¸‹å»ï¼Œç›´åˆ°æ²¡æœ‰å“åº”è€…ä¸ºæ­¢ã€‚</p><p>React.jsæ¡†æ¶çš„åº•å±‚æœ‰ä¸ª Virtual DOMï¼ˆè™šæ‹Ÿæ–‡æ¡£å¯¹è±¡æ¨¡å‹ï¼‰ï¼Œé¡µé¢ç»„ä»¶çŠ¶æ€ä¼šå’Œ Virtual DOM ç»‘å®šï¼Œç”¨æ¥å’Œ DOMï¼ˆæ–‡æ¡£å¯¹è±¡æ¨¡å‹ï¼‰åšæ˜ å°„ä¸è½¬æ¢ã€‚å½“ç»„ä»¶çŠ¶æ€æ›´æ–°æ—¶ï¼ŒVirtual DOM å°±ä¼šè¿›è¡Œ Diff è®¡ç®—ï¼Œæœ€ç»ˆåªå°†éœ€è¦æ¸²æŸ“çš„èŠ‚ç‚¹è¿›è¡Œå®é™… DOM çš„æ¸²æŸ“ã€‚</p><p>JavaScript æ¯æ¬¡æ“ä½œ DOM éƒ½ä¼šå…¨éƒ¨é‡æ–°æ¸²æŸ“ï¼Œè€ŒVirtual DOM ç›¸å½“äº JavaScript å’Œ DOM ä¹‹é—´çš„ä¸€ä¸ªç¼“å­˜ï¼ŒJavaScript æ¯æ¬¡éƒ½æ˜¯æ“ä½œè¿™ä¸ªç¼“å­˜ï¼Œå¯¹å…¶è¿›è¡Œ Diff å’Œå˜æ›´ï¼Œæœ€åæ‰å°†æ•´ä½“å˜åŒ–å¯¹åº”åˆ° DOM è¿›è¡Œæœ€åçš„æ¸²æŸ“ï¼Œä»è€Œå‡å°‘æ²¡å¿…è¦çš„æ¸²æŸ“ã€‚</p><!-- [[[read_end]]] --><p>React.js çš„ Virtual DOM æ˜ å°„å’Œè½¬æ¢ DOM çš„åŸç†ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚æˆ‘ä»¬ä¸€èµ·é€šè¿‡åŸç†ï¼Œæ¥åˆ†æä¸€ä¸‹å®ƒçš„æ€§èƒ½æå‡ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/67/a2/672e07e4347b132701c37d21ac7a44a2.png?wh=1920*1080\" alt=\"\"><br>\nå¯ä»¥çœ‹å‡ºï¼Œæ“ä½œ Virtual DOM æ—¶å¹¶ä¸ä¼šç›´æ¥è¿›è¡Œ DOM æ¸²æŸ“ï¼Œè€Œæ˜¯åœ¨å®Œæˆäº† Diff è®¡ç®—å¾—åˆ°æ‰€æœ‰å®é™…å˜åŒ–çš„èŠ‚ç‚¹åæ‰ä¼šè¿›è¡Œä¸€æ¬¡ DOM æ“ä½œï¼Œç„¶åæ•´ä½“æ¸²æŸ“ã€‚è€Œ DOM åªè¦æœ‰æ“ä½œå°±ä¼šè¿›è¡Œæ•´ä½“æ¸²æŸ“ã€‚</p><p>ç›´æ¥åœ¨ DOM ä¸Šè¿›è¡Œæ“ä½œæ˜¯éå¸¸æ˜‚è´µçš„ï¼Œæ‰€ä»¥è§†å›¾ç»„ä»¶ä¼šå’Œ Virtual DOM ç»‘å®šï¼ŒçŠ¶æ€çš„æ”¹å˜ç›´æ¥æ›´æ”¹ Virtual DOMã€‚Virtual DOM ä¼šæ£€æŸ¥ä¸¤ä¸ªçŠ¶æ€ä¹‹é—´çš„å·®å¼‚ï¼Œè¿›è¡Œæœ€å°çš„ä¿®æ”¹ï¼Œæ‰€ä»¥ React.js å…·æœ‰å¾ˆå¥½çš„æ€§èƒ½ã€‚ä¹Ÿæ­£æ˜¯å› ä¸ºæ€§èƒ½è‰¯å¥½ï¼ŒReact.jsæ‰èƒ½å¤Ÿåœ¨å‰ç«¯åœˆæµè¡Œèµ·æ¥ã€‚</p><p>è€Œåè§‚iOSï¼ŒReactiveCocoaæ¡†æ¶çš„æ€è·¯ï¼Œå…¶å®ä¸React.jsä¸­é¡µé¢ç»„ä»¶çŠ¶æ€å’Œ Virtual DOM ç»‘å®šã€åŒæ­¥æ›´æ–°çš„æ€è·¯æ˜¯ä¸€è‡´çš„ã€‚é‚£<strong>ä¸ºä»€ä¹ˆ ReactiveCocoa åœ¨iOSåŸç”Ÿå¼€å‘ä¸­å°±æ²¡æµè¡Œèµ·æ¥å‘¢ï¼Ÿ</strong></p><p>æˆ‘è§‰å¾—ï¼Œä¸»è¦åŸå› æ˜¯å‰ç«¯DOM æ ‘çš„ç»“æ„éå¸¸å¤æ‚ï¼Œè¿›è¡Œä¸€æ¬¡å®Œæ•´çš„ DOM æ ‘å˜æ›´ï¼Œä¼šå¸¦æ¥ä¸¥é‡çš„æ€§èƒ½é—®é¢˜ï¼Œè€Œæœ‰äº† Virtual DOM ä¹‹åï¼Œä¸ç›´æ¥æ“ä½œ DOM å¯ä»¥é¿å…å¯¹æ•´ä¸ª DOM æ ‘è¿›è¡Œå˜æ›´ï¼Œä½¿å¾—æˆ‘ä»¬ä¸ç”¨å†æ‹…å¿§åº”ç”¨çš„æ€§èƒ½é—®é¢˜ã€‚</p><p>ä½†æ˜¯ï¼Œè¿™ç§æ€§èƒ½é—®é¢˜å¹¶ä¸å­˜åœ¨äºiOS åŸç”Ÿå¼€å‘ã€‚è¿™ï¼Œä¸»è¦æ˜¯å¾—æ˜“äº Cocoa Touch æ¡†æ¶çš„ç•Œé¢èŠ‚ç‚¹æ ‘ç»“æ„è¦æ¯” DOM æ ‘ç®€å•å¾—å¤šï¼Œæ²¡æœ‰å‰ç«¯é‚£æ ·çš„å†å²åŒ…è¢±ã€‚</p><p>ä¸å‰ç«¯ DOM æ¸²æŸ“æœºåˆ¶ä¸åŒï¼ŒCocoa Touch æ¯æ¬¡æ›´æ–°è§†å›¾æ—¶ä¸ä¼šç«‹åˆ»è¿›è¡Œæ•´ä¸ªè§†å›¾èŠ‚ç‚¹æ ‘çš„é‡æ–°æ¸²æŸ“ï¼Œè€Œæ˜¯ä¼šé€šè¿‡ setNeedsLayout æ–¹æ³•å…ˆæ ‡è®°è¯¥è§†å›¾éœ€è¦é‡æ–°å¸ƒå±€ï¼Œç›´åˆ°ç»˜å›¾å¾ªç¯åˆ°è¿™ä¸ªè§†å›¾èŠ‚ç‚¹æ—¶æ‰å¼€å§‹è°ƒç”¨ layoutSubviews æ–¹æ³•è¿›è¡Œé‡æ–°å¸ƒå±€ï¼Œæœ€åå†æ¸²æŸ“ã€‚</p><p>æ‰€ä»¥è¯´ï¼ŒReactiveCocoaæ¡†æ¶å¹¶æ²¡æœ‰ä¸º iOS çš„ App å¸¦æ¥æ›´å¥½çš„æ€§èƒ½ã€‚å½“ä¸€ä¸ªæ¡†æ¶å¯æœ‰å¯æ— ï¼Œè€Œä¸”æ²¡æœ‰æ˜æ˜¾æ”¶ç›Šæ—¶ï¼Œä¸€èˆ¬å›¢é˜Ÿæ˜¯æ²¡æœ‰ç†ç”±å»ä½¿ç”¨çš„ã€‚é‚£ä¹ˆï¼Œåƒ ReactiveCocoa è¿™ç§å“åº”å¼æ€æƒ³çš„æ¡†æ¶åœ¨ iOS é‡Œå°±æ²¡æœ‰å¯å–ä¹‹å¤„äº†å—ï¼Ÿ</p><p>æˆ‘è§‰å¾—å¹¶ä¸æ˜¯ã€‚ä»Šå¤©ï¼Œæˆ‘å°±æ¥è·Ÿä½ åˆ†äº«ä¸‹ï¼Œ<strong>ReactiveCocoa é‡Œæœ‰å“ªäº›æ€æƒ³å¯ä»¥ä¸ºæˆ‘æ‰€ç”¨ï¼Œå¸®æˆ‘ä»¬æé«˜å¼€å‘æ•ˆç‡ï¼Ÿ</strong></p><p>ReactiveCocoa æ˜¯å°†å‡½æ•°å¼ç¼–ç¨‹å’Œå“åº”å¼ç¼–ç¨‹ç»“åˆèµ·æ¥çš„åº“ï¼Œé€šè¿‡å‡½æ•°å¼ç¼–ç¨‹æ€æƒ³å»ºç«‹äº†æ•°æ®æµçš„é€šé“ï¼Œæ•°æ®æµåŠ¨æ—¶ä¼šç»è¿‡å„ç§å‡½æ•°çš„å¤„ç†æœ€ç»ˆåˆ°è¾¾å’Œæ•°æ®ç»‘å®šçš„ç•Œé¢ï¼Œç”±æ­¤å®ç°äº†æ•°æ®å˜åŒ–å“åº”ç•Œé¢å˜åŒ–çš„æ•ˆæœã€‚</p><h2>Monad</h2><p>ReactiveCocoa æ˜¯é‡‡ç”¨å·ç§°çº¯å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€é‡Œçš„ Monad è®¾è®¡æ¨¡å¼æ­å»ºèµ·æ¥çš„ï¼Œæ ¸å¿ƒç±»æ˜¯ RACStreamã€‚æˆ‘ä»¬ä½¿ç”¨æœ€å¤šçš„ RACSignalï¼ˆä¿¡å·ç±»ï¼Œå»ºç«‹æ•°æ®æµé€šé“çš„åŸºæœ¬å•å…ƒï¼‰ ï¼Œå°±æ˜¯ç»§æ‰¿è‡ªRACStreamã€‚RACStream çš„å®šä¹‰å¦‚ä¸‹ï¼š</p><pre><code>typedef RACStream * (^RACStreamBindBlock)(id value, BOOL *stop);\n\n/// An abstract class representing any stream of values.\n///\n/// This class represents a monad, upon which many stream-based operations can\n/// be built.\n///\n/// When subclassing RACStream, only the methods in the main @interface body need\n/// to be overridden.\n@interface RACStream : NSObject\n\n+ (instancetype)empty;\n+ (instancetype)return:(id)value;\n- (instancetype)bind:(RACStreamBindBlock (^)(void))block;\n- (instancetype)concat:(RACStream *)stream;\n- (instancetype)zipWith:(RACStream *)stream;\n\n@end\n</code></pre><p>é€šè¿‡å®šä¹‰çš„æ³¨é‡Šå¯ä»¥çœ‹å‡ºï¼ŒRACStreamçš„ä½œè€…ä¹Ÿå¾ˆæ˜ç¡®åœ°å†™å‡ºäº†RACStream ç±»è¡¨ç¤ºçš„æ˜¯ä¸€ä¸ª Monadï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨ RACStream ä¸Šå¯ä»¥æ„å»ºè®¸å¤šåŸºäºæ•°æ®æµçš„æ“ä½œï¼›RACStreamBindBlockï¼Œå°±æ˜¯ç”¨æ¥å¤„ç† RACStream æ¥æ”¶åˆ°æ•°æ®çš„å‡½æ•°ã€‚é‚£ä¹ˆï¼Œ<strong>Monad å°±ä¸€å®šæ˜¯å¥½çš„è®¾è®¡æ¨¡å¼å—ï¼Ÿ</strong></p><p><strong>ä»ä»£ç è§†è§‰ä¸Šçœ‹</strong>ï¼ŒMonad ä¸ºäº†é¿å…èµ‹å€¼è¯­å¥åšäº†å¾ˆå¤šæ•°æ®ä¼ é€’çš„ç®¡é“å·¥ä½œã€‚è¿™æ ·çš„è¯ï¼Œæˆ‘ä»¬åœ¨åˆ†æé—®é¢˜æ—¶ï¼Œå°±å¾ˆå®¹æ˜“ä»ä»£ç å±‚é¢æ¸…æ™°åœ°çœ‹å‡ºæ•°æ®æµå‘å’Œå˜åŒ–ã€‚è€Œå¦‚æœæ˜¯èµ‹å€¼è¯­å¥ï¼Œåœ¨åˆ†ææ•°æ®æ—¶å°±éœ€è¦è€ƒè™‘æ•°æ®çŠ¶æ€å’Œç”Ÿå‘½å‘¨æœŸï¼Œä¼šå¢åŠ è°ƒè¯•å®šä½çš„æˆæœ¬ï¼Œå¼ºä¾èµ–è°ƒè¯•å·¥å…·å»è§‚å¯Ÿå˜é‡ã€‚</p><p><strong>ä»è¯­è¨€å‘å±•æ¥çœ‹</strong>ï¼ŒMonad è™½ç„¶å¯ä»¥è®©ä¸Šå±‚æ¥å£çœ‹èµ·æ¥å¾ˆç®€æ´ï¼Œä½†åº•å±‚çš„å®ç°å´çŠ¹å¦‚ä¸€å›¢ä¹±éº»ã€‚ä¸ºäº†è¾¾åˆ°â€œçº¯â€å‡½æ•°æ•ˆæœï¼ŒMonadåº•å±‚å°†å„ç§å‡½æ•°çš„å‚æ•°å’Œè¿”å›å€¼å°è£…åœ¨äº†ç±»å‹é‡Œï¼Œå°†æœ¬æ¥å¯ä»¥é€šè¿‡ç®€å•æ•°æ®èµ‹å€¼ç»™å˜é‡è®°å½•çš„æ–¹å¼å¤æ‚åŒ–äº†ã€‚</p><p>ä¸è¿‡æ— è®ºæ˜¯èµ‹å€¼æ–¹å¼è¿˜æ˜¯ Monad æ–¹å¼ï¼Œç¼–è¯‘åç”Ÿæˆçš„ä»£ç éƒ½æ˜¯ä¸€æ ·çš„ã€‚ç‹å åœ¨ä»–çš„åšæ–‡â€œ<a href=\"http://www.yinwang.org/blog-cn/2013/03/31/purely-functional\">å‡½æ•°å¼è¯­è¨€çš„å®—æ•™</a>â€é‡Œè¯¦ç»†åˆ†æäº† Monadï¼Œå¹¶ä¸”å†™äº†ä¸¤æ®µåˆ†åˆ«é‡‡ç”¨èµ‹å€¼å’Œå‡½æ•°å¼çš„ä»£ç ï¼Œç¼–è¯‘åçš„æœºå™¨ç å®é™…ä¸Šæ˜¯ä¸€æ ·çš„ã€‚å¦‚æœä½ æ„Ÿå…´è¶£çš„è¯ï¼Œå¯ä»¥çœ‹ä¸€ä¸‹è¿™ç¯‡æ–‡ç« ã€‚</p><p>æ‰€ä»¥ï¼Œå¦‚æœä½ ä¸æƒ³å¼•å…¥ ReactiveCocoa åº“ï¼Œè¿˜æƒ³ä½¿ç”¨å‡½æ•°å“åº”å¼ç¼–ç¨‹æ€æƒ³æ¥å¼€å‘ç¨‹åºçš„è¯ï¼Œå®Œå…¨ä¸ç”¨å»é‡æ–°å®ç°ä¸€ä¸ªé‡‡ç”¨ Monad æ¨¡å¼çš„ RACStreamï¼Œåªè¦åœ¨ä¸Šå±‚æŒ‰ç…§å‡½æ•°å¼ç¼–ç¨‹çš„æ€æƒ³æ¥æ­å»ºæ•°æ®æµç®¡é“ï¼Œåœ¨ä¸‹å±‚ä½¿ç”¨èµ‹å€¼æ–¹å¼æ¥ç®¡ç†æ•°æ®å°±å¯ä»¥äº†ã€‚å¹¶ä¸”ï¼Œé‡‡ç”¨è¿™ç§æ–¹å¼ï¼Œå¯èƒ½ä¼šæ¯” Monad è¿™ç§â€œçº¯â€å‡½æ•°æ¥å¾—æ›´åŠ å®¹æ˜“ã€‚</p><h2>å‡½æ•°å“åº”å¼ç¼–ç¨‹ä¾‹å­</h2><p>æ¥ä¸‹æ¥ï¼Œæˆ‘é€šè¿‡ä¸€ä¸ªå…·ä½“çš„æ¡ˆä¾‹æ¥å’Œä½ è¯´æ˜ä¸‹ï¼Œå¦‚ä½•æ­å»ºä¸€ä¸ªä¸é‡‡ç”¨ Monad æ¨¡å¼çš„å‡½æ•°å“åº”å¼ç¼–ç¨‹æ¡†æ¶ã€‚</p><p>è¿™ä¸ªæ¡ˆä¾‹è¦å®Œæˆçš„åŠŸèƒ½æ˜¯ï¼šæ·»åŠ å­¦ç”ŸåŸºæœ¬ä¿¡æ¯ï¼Œæ·»åŠ å®Œå­¦ç”Ÿä¿¡æ¯åï¼Œé€šè¿‡æŒ‰é’®ç‚¹å‡»ç´¯åŠ å­¦ç”Ÿåˆ†æ•°ï¼Œæ¯æ¬¡ç‚¹å‡»æŒ‰é’®åˆ†æ•°åŠ 5ï¼›æ‰€å¾—åˆ†æ•°åœ¨30åˆ†å†…ï¼Œé¢œè‰²æ˜¾ç¤ºä¸ºç°è‰²ï¼›åˆ†æ•°åœ¨30åˆ°70åˆ†ä¹‹é—´ï¼Œé¢œè‰²æ˜¾ç¤ºä¸ºç´«è‰²ï¼›åˆ†æ•°åœ¨70åˆ†å†…ï¼ŒçŠ¶æ€æ–‡æœ¬æ˜¾ç¤ºä¸åˆæ ¼ï¼›è¶…è¿‡70åˆ†ï¼Œåˆ†æ•°é¢œè‰²æ˜¾ç¤ºä¸ºçº¢è‰²ï¼ŒçŠ¶æ€æ–‡æœ¬æ˜¾ç¤ºåˆæ ¼ã€‚åˆå§‹æ€åˆ†æ•°ä¸º0ï¼ŒçŠ¶æ€æ–‡æœ¬æ˜¾ç¤ºæœªè®¾ç½®ã€‚</p><p>è¿™ä¸ªåŠŸèƒ½è™½ç„¶ä¸éš¾å®Œæˆï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬å°†è¿™äº›é€»è¾‘éƒ½å†™åœ¨ä¸€èµ·ï¼Œé‚£å¿…ç„¶æ˜¯æ¡ä»¶é‡Œå¥—æ¡ä»¶ï¼Œå½“è¦ä¿®æ”¹åŠŸèƒ½æ—¶ï¼Œè¿˜éœ€è¦ä»å¤´åˆ°å°¾å†æ‹ä¸€éã€‚</p><p>å¦‚æœæŠŠé€»è¾‘æ‹†åˆ†æˆå°é€»è¾‘æ”¾åˆ°ä¸åŒçš„æ–¹æ³•é‡Œï¼Œå½“è¦ä¿®æ”¹åŠŸèƒ½æ—¶ï¼ŒæŸ¥æ‰¾èµ·æ¥ä¹Ÿä¼šè·³æ¥è·³å»ï¼ŒåŠ ä¸Šä¸ºäº†æè¿°æ–¹æ³•å†…é€»è¾‘ï¼Œå‡½æ•°åå’Œå‚æ•°åä¹Ÿéœ€è¦éå¸¸æ¸…æ™°ã€‚è¿™ï¼Œæ— ç–‘åŠ é‡äº†å¼€å‘å’Œç»´æŠ¤æˆæœ¬ï¼Œç‰¹åˆ«æ˜¯å‡½æ•°é‡Œé¢çš„é€»è¾‘è¢«ä¿®æ”¹äº†åï¼Œæˆ‘ä»¬è¿˜è¦å¯¹åº”ç€ä¿®æ”¹æ–¹æ³•åã€‚å¦åˆ™ï¼Œé”™è¯¯çš„æ–¹æ³•åï¼Œå°†ä¼šè¯¯å¯¼åæ¥çš„ç»´æŠ¤è€…ã€‚</p><p>é‚£ä¹ˆï¼Œ<strong>ä½¿ç”¨å‡½æ•°å“åº”å¼ç¼–ç¨‹æ–¹å¼ä¼šä¸ä¼šå¥½ä¸€äº›å‘¢ï¼Ÿ</strong></p><p>è¿™é‡Œï¼Œæˆ‘ç»™å‡ºäº†ä½¿ç”¨å‡½æ•°å“åº”å¼ç¼–ç¨‹æ–¹å¼çš„ä»£ç ï¼Œä½ å¯ä»¥å¯¹æ¯”çœ‹çœ‹æ˜¯ä¸æ˜¯æ¯”æ¡ä»¶é‡Œå¥—æ¡ä»¶å’Œæ–¹æ³•é‡Œå¥—æ–¹æ³•çš„å†™æ³•è¦å¥½ã€‚</p><p><strong>é¦–å…ˆï¼Œ</strong>åˆ›å»ºä¸€ä¸ªå­¦ç”Ÿçš„è®°å½•ï¼Œåœ¨åˆ›å»ºè®°å½•çš„é“¾å¼è°ƒç”¨é‡Œæ·»åŠ ä¸€ä¸ªå¤„ç†çŠ¶æ€æ–‡æœ¬æ˜¾ç¤ºçš„é€»è¾‘ã€‚ä»£ç å¦‚ä¸‹ï¼š</p><pre><code>// æ·»åŠ å­¦ç”ŸåŸºæœ¬ä¿¡æ¯\nself.student = [[[[[SMStudent create]\n                   name:@&quot;ming&quot;]\n                  gender:SMStudentGenderMale]\n                 studentNumber:345]\n                filterIsASatisfyCredit:^BOOL(NSUInteger credit){\n                    if (credit &gt;= 70) {\n                        // åˆ†æ•°å¤§äºç­‰äº 70 æ˜¾ç¤ºåˆæ ¼\n                        self.isSatisfyLabel.text = @&quot;åˆæ ¼&quot;;\n                        self.isSatisfyLabel.textColor = [UIColor redColor];\n                        return YES;\n                    } else {\n                        // åˆ†æ•°å°äº 70 ä¸åˆæ ¼\n                        self.isSatisfyLabel.text = @&quot;ä¸åˆæ ¼&quot;;\n                        return NO;\n                    }\n                }];\n</code></pre><p>å¯ä»¥çœ‹å‡ºï¼Œå½“åˆ†æ•°å°äº70æ—¶ï¼ŒçŠ¶æ€æ–‡æœ¬ä¼šæ˜¾ç¤ºä¸ºâ€œä¸åˆæ ¼â€ï¼Œå¤§äºç­‰äº70æ—¶ä¼šæ˜¾ç¤ºä¸ºâ€œåˆæ ¼â€ã€‚</p><p><strong>æ¥ä¸‹æ¥ï¼Œ</strong>é’ˆå¯¹åˆ†æ•°ï¼Œæˆ‘å†åˆ›å»ºä¸€ä¸ªä¿¡å·ï¼Œå½“åˆ†æ•°æœ‰å˜åŒ–æ—¶ï¼Œä¿¡å·ä¼šå°†åˆ†æ•°ä¼ é€’ç»™è¿™ä¸ªåˆ†æ•°ä¿¡å·çš„ä¸¤ä¸ªè®¢é˜…è€…ã€‚ä»£ç å¦‚ä¸‹ï¼š</p><pre><code>// ç¬¬ä¸€ä¸ªè®¢é˜…çš„creditå¤„ç†\n[self.student.creditSubject subscribeNext:^(NSUInteger credit) {\n    NSLog(@&quot;ç¬¬ä¸€ä¸ªè®¢é˜…çš„creditå¤„ç†ç§¯åˆ†%lu&quot;,credit);\n    self.currentCreditLabel.text = [NSString stringWithFormat:@&quot;%lu&quot;,credit];\n    if (credit &lt; 30) {\n        self.currentCreditLabel.textColor = [UIColor lightGrayColor];\n    } else if(credit &lt; 70) {\n        self.currentCreditLabel.textColor = [UIColor purpleColor];\n    } else {\n        self.currentCreditLabel.textColor = [UIColor redColor];\n    }\n}];\n\n// ç¬¬äºŒä¸ªè®¢é˜…çš„creditå¤„ç†\n[self.student.creditSubject subscribeNext:^(NSUInteger credit) {\n    NSLog(@&quot;ç¬¬äºŒä¸ªè®¢é˜…çš„creditå¤„ç†ç§¯åˆ†%lu&quot;,credit);\n    if (!(credit &gt; 0)) {\n        self.currentCreditLabel.text = @&quot;0&quot;;\n        self.isSatisfyLabel.text = @&quot;æœªè®¾ç½®&quot;;\n    }\n}];\n</code></pre><p>å¯ä»¥çœ‹å‡ºï¼Œè¿™ä¸¤ä¸ªåˆ†æ•°ä¿¡å·çš„è®¢é˜…è€…åˆ†åˆ«å¤„ç†äº†ä¸¤ä¸ªåŠŸèƒ½é€»è¾‘ï¼š</p><ul>\n<li>ç¬¬ä¸€ä¸ªå¤„ç†çš„æ˜¯åˆ†æ•°é¢œè‰²ï¼›</li>\n<li>ç¬¬äºŒä¸ªå¤„ç†çš„æ˜¯åˆå§‹çŠ¶æ€ä¸‹çŠ¶æ€æ–‡æœ¬çš„æ˜¾ç¤ºé€»è¾‘ã€‚</li>\n</ul><p>æ•´ä½“çœ‹èµ·æ¥ï¼Œæ‰€æœ‰çš„é€»è¾‘éƒ½å›´ç»•ç€åˆ†æ•°è¿™ä¸ªæ•°æ®çš„æ›´æ–°è‡ªåŠ¨æµåŠ¨èµ·æ¥ï¼Œä¹Ÿèƒ½å¤Ÿå¾ˆçµæ´»åœ°é€šè¿‡ä¿¡å·è®¢é˜…çš„æ–¹å¼è¿›è¡Œå½’ç±»å¤„ç†ã€‚</p><p>é‡‡ç”¨è¿™ç§ç¼–ç¨‹æ–¹å¼ï¼Œä¸Šå±‚å®ç°æ–¹å¼çœ‹èµ·æ¥ç±»ä¼¼äº ReactiveCocoaï¼Œè€Œåº•å±‚å®ç°å´éå¸¸ç®€å•ï¼Œå°†ä¿¡å·è®¢é˜…è€…ç›´æ¥ä½¿ç”¨èµ‹å€¼çš„æ–¹å¼èµ‹å€¼ç»™ä¸€ä¸ªé›†åˆè¿›è¡Œç»´æŠ¤ï¼Œè€Œæ²¡æœ‰ä½¿ç”¨ Monad æ–¹å¼ã€‚åº•å±‚å¯¹ä¿¡å·å’Œè®¢é˜…è€…çš„å®ç°ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>@interface SMCreditSubject : NSObject\n\ntypedef void(^SubscribeNextActionBlock)(NSUInteger credit);\n\n+ (SMCreditSubject *)create;\n\n// å‘é€ä¿¡å·\n- (SMCreditSubject *)sendNext:(NSUInteger)credit;\n// æ¥æ”¶ä¿¡å·\n- (SMCreditSubject *)subscribeNext:(SubscribeNextActionBlock)block;\n\n@end\n\n@interface SMCreditSubject()\n\n@property (nonatomic, assign) NSUInteger credit; // ç§¯åˆ†\n@property (nonatomic, strong) SubscribeNextActionBlock subscribeNextBlock; // è®¢é˜…ä¿¡å·äº‹ä»¶\n@property (nonatomic, strong) NSMutableArray *blockArray; // è®¢é˜…ä¿¡å·äº‹ä»¶é˜Ÿåˆ—\n\n@end\n\n@implementation SMCreditSubject\n\n// åˆ›å»ºä¿¡å·\n+ (SMCreditSubject *)create {\n    SMCreditSubject *subject = [[self alloc] init];\n    return subject;\n}\n\n// å‘é€ä¿¡å·\n- (SMCreditSubject *)sendNext:(NSUInteger)credit {\n    self.credit = credit;\n    if (self.blockArray.count &gt; 0) {\n        for (SubscribeNextActionBlock block in self.blockArray) {\n            block(self.credit);\n        }\n    }\n    return self;\n}\n\n// è®¢é˜…ä¿¡å·\n- (SMCreditSubject *)subscribeNext:(SubscribeNextActionBlock)block {\n    if (block) {\n        block(self.credit);\n    }\n    [self.blockArray addObject:block];\n    return self;\n}\n\n#pragma mark - Getter\n- (NSMutableArray *)blockArray {\n    if (!_blockArray) {\n        _blockArray = [NSMutableArray array];\n    }\n    return _blockArray;\n}\n</code></pre><p>å¦‚ä¸Šé¢ä»£ç æ‰€ç¤ºï¼Œè®¢é˜…è€…éƒ½ä¼šè®°å½•åˆ° blockArray é‡Œï¼Œblock çš„ç±»å‹æ˜¯ SubscribeNextActionBlockã€‚</p><p>æœ€ç»ˆï¼Œæˆ‘ä»¬ä½¿ç”¨å‡½æ•°å¼ç¼–ç¨‹çš„æ€æƒ³ï¼Œç®€å•ã€é«˜æ•ˆåœ°å®ç°äº†è¿™ä¸ªåŠŸèƒ½ã€‚è¿™ä¸ªä¾‹å­å®Œæ•´ä»£ç ï¼Œä½ å¯ä»¥ç‚¹å‡»<a href=\"https://github.com/ming1016/RACStudy\">è¿™ä¸ªé“¾æ¥</a>æŸ¥çœ‹ã€‚</p><h2>å°ç»“</h2><p>ä»Šå¤©è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘å’Œä½ åˆ†äº«äº†ReactiveCocoa è¿™ç§å“åº”å¼ç¼–ç¨‹æ¡†æ¶éš¾ä»¥åœ¨ iOS åŸç”Ÿå¼€å‘ä¸­æµè¡Œå¼€çš„åŸå› ã€‚</p><p>ä»æœ¬è´¨ä¸Šçœ‹ï¼Œå“åº”å¼ç¼–ç¨‹æ²¡èƒ½æé«˜Appçš„æ€§èƒ½ï¼Œæ˜¯å…¶æ²¡èƒ½æµè¡Œèµ·æ¥çš„ä¸»è¦åŸå› ã€‚</p><p>åœ¨è°ƒè¯•ä¸Šï¼Œç”±äº ReactiveCocoaæ¡†æ¶é‡‡ç”¨äº† Monad æ¨¡å¼ï¼Œå¯¼è‡´å…¶åº•å±‚å®ç°è¿‡äºå¤æ‚ï¼Œä»è€Œåœ¨æ–¹æ³•è°ƒç”¨å †æ ˆé‡Œå¾ˆéš¾å»å®šä½åˆ°é—®é¢˜ã€‚è¿™ï¼Œä¹Ÿæ˜¯ReactiveCocoaæ²¡èƒ½æµè¡Œèµ·æ¥çš„ä¸€ä¸ªåŸå› ã€‚</p><p>ä½†ï¼Œ ReactiveCocoaçš„ä¸Šå±‚æ¥å£è®¾è®¡æ€æƒ³ï¼Œå¯ä»¥ç”¨æ¥æé«˜ä»£ç ç»´æŠ¤çš„æ•ˆç‡ï¼Œè¿˜æ˜¯å¯ä»¥å¼•å…¥åˆ° iOS å¼€å‘ä¸­çš„ã€‚</p><p>ReactiveCocoaé‡Œé¢è¿˜æœ‰å¾ˆå¤šå€¼å¾—æˆ‘ä»¬å­¦ä¹ çš„åœ°æ–¹ï¼Œæ¯”å¦‚è¯´å®çš„è¿ç”¨ã€‚å¯¹æ­¤æ„Ÿå…´è¶£çš„è¯ï¼Œä½ å¯ä»¥çœ‹çœ‹sunnyxxçš„é‚£ç¯‡<a href=\"http://blog.sunnyxx.com/2014/03/06/rac_1_macros/\">ã€ŠReactive Cocoa Tutorial [1] = ç¥å¥‡çš„Macrosã€‹ã€‚</a></p><p>å¯¹äº iOS å¼€å‘æ¥è¯´ï¼Œå“åº”å¼ç¼–ç¨‹è¿˜æœ‰ä¸€ä¸ªå¾ˆé‡è¦çš„æŠ€æœ¯æ˜¯ KVOï¼Œä½¿ç”¨ KVO æ¥å®ç°å“åº”å¼å¼€å‘çš„èŒƒä¾‹å¯ä»¥å‚è€ƒ<a href=\"https://github.com/ming1016/DecoupleDemo\">æˆ‘ä»¥å‰çš„ä¸€ä¸ª demo</a>ã€‚å¦‚æœä½ æœ‰å…³äºKVOçš„é—®é¢˜ï¼Œä¹Ÿæ¬¢è¿åœ¨è¯„è®ºåŒºç»™æˆ‘ç•™è¨€ã€‚</p><h2>è¯¾åä½œä¸š</h2><p>åœ¨ä»Šå¤©è¿™ç¯‡æ–‡ç« é‡Œé¢ï¼Œæˆ‘å’Œä½ èŠäº†Monad çš„å¾ˆå¤šç¼ºç‚¹ï¼Œä¸çŸ¥é“ä½ æ˜¯å¦‚ä½•çœ‹å¾…Monadçš„ï¼Œåœ¨è¯„è®ºåŒºç»™æˆ‘ç•™è¨€åˆ†äº«ä¸‹ä½ çš„è§‚ç‚¹å§ã€‚</p><p>æ„Ÿè°¢ä½ çš„æ”¶å¬ï¼Œæ¬¢è¿ä½ åœ¨è¯„è®ºåŒºç»™æˆ‘ç•™è¨€åˆ†äº«ä½ çš„è§‚ç‚¹ï¼Œä¹Ÿæ¬¢è¿æŠŠå®ƒåˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ä¸€èµ·é˜…è¯»ã€‚</p><p></p>","comments":[{"had_liked":false,"id":100576,"user_name":"æ™¯å¤©å„¿","can_delete":false,"product_type":"c1","uid":1018983,"ip_address":"","ucode":"1A5EFE9DE2597B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8c/67/e91fe8d3.jpg","comment_is_top":false,"comment_ctime":1559587567,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"104638802671","product_id":100024501,"comment_content":"1 æ™®é€šçš„å‡½æ•°å¼ç¼–ç¨‹ï¼Œå°±æ˜¯å‡½æ•°å¯ä»¥ä½œä¸ºå‚æ•°ã€è¿”å›å€¼ã€‚è¿™ä½¿å¾—:<br>1.1 é“¾å¼ç¼–ç¨‹æˆä¸ºå¯èƒ½ï¼ŒMasonryå°±æ˜¯ä¸€ä¸ªç‰¹åˆ«å¥½çš„ä¾‹å­ã€‚<br>1.2 å¼‚æ­¥è°ƒç”¨ï¼Œå‡½æ•°å¼ç¼–ç¨‹çš„ç»“æœå¾ˆåƒè§‚å¯Ÿè€…æ¨¡å¼ã€‚<br>1.3 åŒæ­¥è°ƒç”¨ï¼Œå‡½æ•°å¼ç¼–ç¨‹çš„ç»“æœæœ‰ç‚¹åƒæ¨¡æ¿æ¨¡å¼ã€‚<br><br>2. ç¨çº¯ä¸€äº›çš„å‡½æ•°å¼ç¼–ç¨‹ï¼Œåˆ™å¼ºè°ƒåªç”¨å¸¸é‡ï¼Œä¸ç”¨å˜é‡ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥èµ‹å€¼ï¼Œä¸èƒ½ä¿®æ”¹åˆ é™¤ï¼Œæœºå™¨å­¦ä¹ é‡Œé¢åŸºæœ¬éƒ½æ˜¯è¿™ä¹ˆæã€‚å¼ºè°ƒè¾“å…¥ä¸€æ ·æ—¶ï¼Œè¾“å‡ºä¹Ÿä¸€æ ·ã€‚<br><br>3. monadï¼Œä»¥åŠè¿èµ‹å€¼éƒ½ä¸å…è®¸çš„å‡½æ•°å¼ï¼Œä¹‹å‰åªå¬è¿‡ï¼Œæ²¡æœ‰ç ”ç©¶ã€‚çœ‹äº†è¿™ç¯‡æ–‡ç« ä¸­æ¨èçš„ç‹å çš„åšæ–‡ï¼Œæ„Ÿè§‰ç†è§£åŠ æ·±äº†ä¸å°‘ï¼Œå°¤å…¶æ˜¯å‚æ•°ã€å±€éƒ¨å˜é‡ã€å…¨å±€å˜é‡ä¸â€œçŠ¶æ€â€ã€æ•°æ®ä¼ è¾“å…³ç³»çš„ç†è§£ä¸Šã€‚çœŸçš„æ˜¯å‘â€¦<br><br>4. swifté‡Œé¢æ”¯æŒçš„é«˜é˜¶å‡½æ•°ï¼Œæœ‰ç‚¹å„¿åƒä¸Šé¢ç¬¬äºŒç§å‡½æ•°å¼ç¼–ç¨‹ã€‚<br><br>5. æˆ‘ç†è§£çš„å“åº”å¼ç¼–ç¨‹ï¼Œå°±æ˜¯åˆ†ç¦»äº‹ä»¶çš„å‘èµ·è€…å’Œæ¥å—è€…ã€‚å…¶å®target-actionï¼Œblockï¼Œdelegateï¼Œkvoï¼Œé€šçŸ¥ï¼Œéƒ½æ˜¯å¯ä»¥çœ‹ä½œå“åº”å¼ç¼–ç¨‹ã€‚<br><br>6. ä»è®¾è®¡æ¨¡å¼çš„è§’åº¦æ¥è¯´ï¼Œå“åº”å¼ç¼–ç¨‹ä¸è§‚å¯Ÿè€…æ¨¡å¼ã€çŠ¶æ€æ¨¡å¼çš„æ€æƒ³æœ€æ¥è¿‘ã€‚","like_count":25,"discussions":[{"author":{"id":1027430,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/ad/66/abb7bfe3.jpg","nickname":"åœ°çƒæ´²ğŸŒ","note":"","ucode":"72E5B9A2C78252","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4528,"discussion_content":"ä¼˜è´¨è¯„è®º","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565521437,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":96527,"user_name":"Geek_45fc02","can_delete":false,"product_type":"c1","uid":1457447,"ip_address":"","ucode":"FE074A1594AC7E","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJTOicFdCW2hgUwgfiaR9qSGabPvgLorp1Xcd7uLquXibWmKZxJibMsSeqibEpuHoSwusj2kOr86uLAzng/132","comment_is_top":false,"comment_ctime":1558441570,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"31623212642","product_id":100024501,"comment_content":"å¼•å…¥åRACè°ƒè¯•å®åœ¨æ˜¯å¤ªç—›è‹¦äº†ï¼Œçº¿ç¨‹æ ˆé‡ŒåµŒå¥—äº†å¤ªå¤šRACå†…éƒ¨çš„è°ƒç”¨ï¼Œå¾ˆéš¾è¿½æº¯åˆ°ç”¨æˆ·çœŸæ­£ä½¿ç”¨çš„ä»£ç ã€‚","like_count":6},{"had_liked":false,"id":90766,"user_name":"bo","can_delete":false,"product_type":"c1","uid":1456491,"ip_address":"","ucode":"0D99D00E1AF5BA","user_header":"https://static001.geekbang.org/account/avatar/00/16/39/6b/5fcc65ad.jpg","comment_is_top":false,"comment_ctime":1556632842,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"27326436618","product_id":100024501,"comment_content":"RACå®ç¡®å®ç‰›é€¼ã€‚çœ‹äº†æºç å­¦åˆ°äº†å¾ˆå¤šä¸œè¥¿ã€‚ç°åœ¨å…¬å¸é¡¹ç›®ä¸­è™½ç„¶æ²¡æœ‰å¼•å…¥ racã€‚ä½†æ˜¯æŠŠ rac çš„å®æå–å‡ºæ¥ç”¨ã€‚è‡ªå®šä¹‰å‚æ•°ä¸ªæ•°å¹¶ä¾æ¬¡å¤„ç†ï¼Œéå¸¸çš„æ–¹ä¾¿ã€‚","like_count":7},{"had_liked":false,"id":90623,"user_name":"å¤§åœŸè±†","can_delete":false,"product_type":"c1","uid":1121636,"ip_address":"","ucode":"67445DC3EC9DB0","user_header":"https://static001.geekbang.org/account/avatar/00/11/1d/64/52a5863b.jpg","comment_is_top":false,"comment_ctime":1556590138,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"23031426618","product_id":100024501,"comment_content":"åœ¨Androidå¼€å‘ç•Œï¼ŒRxJavaæ˜¯ç—…æ¯’ä¸€æ ·çš„æµè¡Œï¼Œä¸æ‡‚RxJavaï¼Œå°±ä¸è¦æ‰¾å·¥ä½œäº†ï¼Œä»¥è‡´äºæ‰€æœ‰çš„ä¸œè¥¿éƒ½è¢«RxJavaåŒ–ï¼Œè€ŒiOSå¼€å‘ç•Œï¼Œåˆ™æ˜¯å¤©å·®åœ°åˆ«","like_count":5},{"had_liked":false,"id":98969,"user_name":"xilie","can_delete":false,"product_type":"c1","uid":1013805,"ip_address":"","ucode":"AFCC4E157F7830","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJVegfjqa0gM4hcRrBhZkIf7Uc5oeTMYsg6o5pd76IQlUoIIh2ic6P22xVEFtRnAzjyLtiaPVstkKug/132","comment_is_top":false,"comment_ctime":1559121752,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5854089048","product_id":100024501,"comment_content":"æˆ‘è§‰å¾—å‡½æ•°å“åº”å¼ç¼–ç¨‹å…¶å®æ˜¯ç®€åŒ–äº†ç¨‹åºçš„é€»è¾‘å¹¶è§£è€¦ï¼Œå°±æ‹¿ä¼ å€¼æ¥è¯´ï¼Œå¯¹è±¡ A å°†å±æ€§ a ä¼ ç»™å¯¹è±¡ Bï¼ŒBå†ä¼ ç»™ C, C ä¿®æ”¹ aï¼ŒA å†é’ˆå¯¹ a çš„ä¿®æ”¹åšå“åº”ï¼Œä¼ ç»Ÿçš„èµ‹å€¼ï¼Œæ•´ä¸ªæ•°æ®å’Œé€»è¾‘ä¼šéšç€ä¼ é€’è¶Šå¤šè¶Šå¤æ‚ï¼Œè€Œå“åº”å¼ï¼Œåˆ™å¾ˆç®€å•å•Šï¼Œè¯´ä¸æ¸…æ¥šï¼Œåæ­£å®é™…å¼€å‘ä¸­ï¼Œç¡®å®ç®€å•äº†å¾ˆå¤š","like_count":1},{"had_liked":false,"id":91027,"user_name":"å®¶æœ‰èŒæŸ´fries","can_delete":false,"product_type":"c1","uid":1048179,"ip_address":"","ucode":"EE96CBDF30E99C","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fe/73/7c56ed19.jpg","comment_is_top":false,"comment_ctime":1556806709,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5851774005","product_id":100024501,"comment_content":"ComponentKitè€å¸ˆæœ‰äº†è§£ä¹ˆï¼Ÿæƒ³é—®é—®çœ‹ComponentKité‡Œé¢æ˜¯æ€ä¹ˆåšåˆ°å¯¹stateå˜åŒ–çš„ç›‘å¬å‘¢ï¼Ÿ","like_count":1},{"had_liked":false,"id":90573,"user_name":"å“ˆ","can_delete":false,"product_type":"c1","uid":1453904,"ip_address":"","ucode":"3F46ADFFBC94CE","user_header":"https://static001.geekbang.org/account/avatar/00/16/2f/50/b46a9b6a.jpg","comment_is_top":false,"comment_ctime":1556583210,"is_pvip":false,"replies":[{"id":"32662","content":"ä¸¤è€…ä½¿ç”¨åœºæ™¯ä¸åŒï¼Œå¯æ¯”æ€§ä¸å¤§","user_name":"ä½œè€…å›å¤","user_name_real":"æˆ´é“­","uid":"1140280","ctime":1556890432,"ip_address":"","comment_id":90573,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5851550506","product_id":100024501,"comment_content":"åœ¨æˆ‘çš„ç†è§£ä¸­ï¼ŒMasonryä¹Ÿå±äºå“åº”å¼ç¼–ç¨‹ï¼Œæ¡†æ¶çš„ä½œè€…æœ€åˆè²Œä¼¼æ˜¯å†™JAVAçš„ï¼ŒMasonryçš„å“åº”å¼è²Œä¼¼æ¯”RACçš„è¦è½»é‡çº§â€¦RACç”¨åˆ°äº†å¾ˆå¤šè¿è¡Œæ—¶æ–¹æ³•æ›¿æ¢ï¼Œè°ƒè¯•èµ·æ¥æ¯”è¾ƒéº»çƒ¦","like_count":1,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"æˆ´é“­","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":448575,"discussion_content":"ä¸¤è€…ä½¿ç”¨åœºæ™¯ä¸åŒï¼Œå¯æ¯”æ€§ä¸å¤§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1556890432,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":90567,"user_name":"è´°å","can_delete":false,"product_type":"c1","uid":1504587,"ip_address":"","ucode":"447E7E048CEFAD","user_header":"https://static001.geekbang.org/account/avatar/00/16/f5/4b/67495ca4.jpg","comment_is_top":false,"comment_ctime":1556580907,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5851548203","product_id":100024501,"comment_content":"æˆ‘çš„ç†è§£ï¼Œè§‚å¯Ÿè€…æ˜¯å®ç°å“åº”å¼çš„å…³é”®ï¼Œmonadæ˜¯å®ç°å‡½æ•°å¼çš„å…³é”®ã€‚<br><br>å‡½æ•°å¼æä¾›äº†  X â€“&gt; [X] ï¼Œ â€“&gt; çš„ç›´è§‚æ“ä½œ","like_count":1},{"had_liked":false,"id":309012,"user_name":"Donkeyman","can_delete":false,"product_type":"c1","uid":1932704,"ip_address":"","ucode":"A24ED814252FC5","user_header":"https://static001.geekbang.org/account/avatar/00/1d/7d/a0/323dea01.jpg","comment_is_top":false,"comment_ctime":1629891330,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1629891330","product_id":100024501,"comment_content":"çœŸæ­£é€»è¾‘å¤æ‚çš„ä¸šåŠ¡é€»è¾‘ä¸­ä¸é€‚åˆä½¿ç”¨è¿™äº›èŠ±é‡Œèƒ¡å“¨çš„ä¸œè¥¿ï¼Œè€è€å®å®æŒ‰ç…§å¯è¯»æ€§æœ€é«˜çš„æ–¹å¼å»å†™ï¼Œå“ªæ€•ä»£ç ä¸‘ä¸€ç‚¹ä¹Ÿæ— æ‰€è°“ï¼Œå¯è¯»æ€§ç¨³å®šæ€§æœ€é‡è¦","like_count":1},{"had_liked":false,"id":295738,"user_name":"isaced","can_delete":false,"product_type":"c1","uid":1455016,"ip_address":"","ucode":"99110B8CDBA38B","user_header":"https://static001.geekbang.org/account/avatar/00/16/33/a8/a5a00407.jpg","comment_is_top":false,"comment_ctime":1622567708,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1622567708","product_id":100024501,"comment_content":"React æ—¶ä»£ç›¸æ¯”ä¼ ç»Ÿ Web å¼€å‘é™¤äº† Virtual DOM å¸¦æ¥ UI æ“ä½œæ€§èƒ½çš„æå‡ï¼Œå¦ä¸€ä¸ªæ›´é‡è¦çš„ç‚¹æ˜¯å¼•å…¥å•å‘æ•°æ®æµçš„æ€æƒ³é…åˆå“åº”å¼UIæ›´æ–°æœºåˆ¶ï¼Œé™ä½ä¸šåŠ¡å¼€å‘å¤æ‚åº¦ï¼Œæå‡ç ”å‘æ•ˆç‡ã€‚","like_count":1},{"had_liked":false,"id":290982,"user_name":"å¥ˆä½•æ¡¥ä¸Šçœ‹æµæ°´","can_delete":false,"product_type":"c1","uid":2599462,"ip_address":"","ucode":"C603D56F0F975D","user_header":"https://static001.geekbang.org/account/avatar/00/27/aa/26/911065ac.jpg","comment_is_top":false,"comment_ctime":1619915519,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1619915519","product_id":100024501,"comment_content":"kvoå¦‚æœé€šè¿‡keypathè·å–æ”¹å˜çš„ï¼Œä¾‹å¦‚self.model.namedemo.name","like_count":0},{"had_liked":false,"id":278379,"user_name":"kenshin","can_delete":false,"product_type":"c1","uid":1653234,"ip_address":"","ucode":"10A09FF2097340","user_header":"https://static001.geekbang.org/account/avatar/00/19/39/f2/23506d84.jpg","comment_is_top":false,"comment_ctime":1612922808,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1612922808","product_id":100024501,"comment_content":"ä¸ªäººæ„Ÿè§‰RACåœ¨MVVMä¸‹çš„è´¡çŒ®ä¼šæœ‰ä¸€äº›ï¼Œä½†æ˜¯åœ¨å®šä½é—®é¢˜ï¼Œè°ƒè¯•çš„æ—¶å€™ä¼šæ¯”è¾ƒå›°éš¾ã€‚","like_count":0},{"had_liked":false,"id":273878,"user_name":"GL","can_delete":false,"product_type":"c1","uid":1877167,"ip_address":"","ucode":"B8A5D8AED2CEBA","user_header":"https://static001.geekbang.org/account/avatar/00/1c/a4/af/25976c4d.jpg","comment_is_top":false,"comment_ctime":1610703070,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1610703070","product_id":100024501,"comment_content":"ä½œè€…çš„demoä½¿ç”¨äº†ReactiveCocoaï¼Œå¦‚æœä¸ä½¿ç”¨ReactiveCocoaè€Œåªç”¨å“åº”å¼çš„æ€æƒ³æ€ä¹ˆå®ç°è¿™ä¸ªdemoå‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":169276,"user_name":"Sun0010","can_delete":false,"product_type":"c1","uid":1263832,"ip_address":"","ucode":"92B35625DCEB9B","user_header":"https://static001.geekbang.org/account/avatar/00/13/48/d8/51ab657d.jpg","comment_is_top":false,"comment_ctime":1578303801,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1578303801","product_id":100024501,"comment_content":"æˆ‘æ€»æ„Ÿè§‰ å“åº”å¼ å…¶å®æ˜¯ æ•°æ®æ”¹å˜èƒ½å¤Ÿé©¬ä¸Šå“åº”åˆ°é¡µé¢ï¼› å‰ç«¯çš„Vue å°±æ˜¯é€šè¿‡getã€setæ–¹æ³•æ¥çŸ¥é“æ•°æ®çš„æ”¹å˜ï¼Œç„¶åå»å“åº”é¡µé¢","like_count":0},{"had_liked":false,"id":136544,"user_name":"å¾®ç¬‘ç¾ç”·ğŸ˜„","can_delete":false,"product_type":"c1","uid":1010774,"ip_address":"","ucode":"E188923723703B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6c/56/07920099.jpg","comment_is_top":false,"comment_ctime":1569468373,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1569468373","product_id":100024501,"comment_content":"é‚£ç¯‡å®çš„ æ²¡æœ‰çœ‹æ‡‚ã€‚æœ‰ç‚¹éš¾ç†è§£<br>","like_count":0},{"had_liked":false,"id":96811,"user_name":"çƒ˜å“„è½°ã€","can_delete":false,"product_type":"c1","uid":1135473,"ip_address":"","ucode":"B57568E8584ED5","user_header":"https://static001.geekbang.org/account/avatar/00/11/53/71/4cf1b380.jpg","comment_is_top":false,"comment_ctime":1558513266,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1558513266","product_id":100024501,"comment_content":"React.jsçš„Virtual DOMå…¶å®ç±»ä¼¼äºJavaScriptå’ŒDomä¹‹é—´çš„ä¸€ä¸ªç¼“å­˜ã€‚JavaScriptæ¯æ¬¡éƒ½æ˜¯æ“ä½œè¿™ä¸ªç¼“å­˜ï¼Œä¹‹åè¿›è¡ŒDiffè®¡ç®—å’Œå˜æ›´ï¼Œæœ€åæ‰å°†æ•´ä½“å˜åŒ–å¯¹åº”åˆ°DOMè¿›è¡Œæœ€åçš„æ¸²æŸ“ã€‚","like_count":1},{"had_liked":false,"id":93690,"user_name":"ä½•ä¹ä¹","can_delete":false,"product_type":"c1","uid":1385771,"ip_address":"","ucode":"E016AEACF7A713","user_header":"https://static001.geekbang.org/account/avatar/00/15/25/2b/079d321e.jpg","comment_is_top":false,"comment_ctime":1557560235,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"1557560235","product_id":100024501,"comment_content":"æˆ‘è§‰å¾—Reactè¿˜æœ‰ä¸€ä¸ªå¾ˆé‡è¦çš„ç‚¹æ˜¯ï¼šReactæ¡†æ¶å¸®æˆ‘ä»¬å¤„ç† UI å’ŒçŠ¶æ€åŒæ­¥ï¼Œæˆ‘ä»¬ä¸éœ€è¦ç”¨å‘½ä»¤å¼çš„æ–¹å¼å»æ“ä½œ UIï¼Œæˆ‘ä»¬åªéœ€è¦å…³æ³¨çŠ¶æ€å±‚æ•°æ®çš„æ­£ç¡®æ€§ã€‚DOM diff åªæ˜¯ä¸ºäº†æ€§èƒ½æ›´å¥½çš„æ›´æ–° UIï¼Œæœ€å°åŒ–æ“ä½œ DOMã€‚<br>è€Œ iOS å’Œ Android åŸç”Ÿéƒ½ç¼ºå°‘æ¯”è¾ƒå¥½çš„å£°æ˜å¼ UI å¸ƒå±€æ–¹å¼ï¼Œå½“UI è§†å›¾æ”¹å˜æ—¶ï¼Œæ²¡æœ‰å¤ªå¥½çš„æ–¹å¼é¿å…è§†å›¾çš„é‡å¤åˆ›å»ºå’Œæ¸²æŸ“ã€‚æˆ‘ä»¬æ“ä½œ UI å¤§éƒ¨åˆ†æ—¶å€™è¿˜æ˜¯ä½¿ç”¨å‘½ä»¤å¼çš„æ–¹å¼ã€‚","like_count":0,"discussions":[{"author":{"id":1471551,"avatar":"https://static001.geekbang.org/account/avatar/00/16/74/3f/52fa1e72.jpg","nickname":"findU","note":"","ucode":"B3F26ED4E5A29D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":716,"discussion_content":"æœ€æ–°çš„SwiftUIå·²ç»æ”¯æŒäº†å£°æ˜å¼çš„å¸ƒå±€äº†ï¼Œè¿˜åœ¨ç ”ç©¶ä¸­...","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561975506,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":92236,"user_name":"SZ","can_delete":false,"product_type":"c1","uid":1108032,"ip_address":"","ucode":"AD20051B6109C2","user_header":"https://static001.geekbang.org/account/avatar/00/10/e8/40/a7fa1530.jpg","comment_is_top":false,"comment_ctime":1557209365,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1557209365","product_id":100024501,"comment_content":"KVOé‡‡ç”¨äº†isa swizzleï¼Œæ‰€ä»¥KVOè¿‡çš„classä¸èƒ½å†æ¬¡ä½¿ç”¨isa swizzleï¼Œè¿™ç‚¹ä¼šæœ‰é™åˆ¶ï¼Œè€Œä¸”åªèƒ½åœ¨objc runtimeä¸‹ä½¿ç”¨ï¼Œæ‰€ä»¥KVOçš„ä½¿ç”¨ä¹Ÿè¶Šæ¥è¶Šå°‘äº†ã€‚","like_count":0},{"had_liked":false,"id":90724,"user_name":"æœ¨æœ¨å½¡","can_delete":false,"product_type":"c1","uid":1455806,"ip_address":"","ucode":"2661AC2EF856E9","user_header":"https://static001.geekbang.org/account/avatar/00/16/36/be/f68a19b1.jpg","comment_is_top":false,"comment_ctime":1556617218,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1556617218","product_id":100024501,"comment_content":"ä½¿ç”¨RACæŒºå¤šçš„å§","like_count":0},{"had_liked":false,"id":90689,"user_name":"springxiao","can_delete":false,"product_type":"c1","uid":1143109,"ip_address":"","ucode":"1823EBB59B5A0F","user_header":"https://static001.geekbang.org/account/avatar/00/11/71/45/ae5bb741.jpg","comment_is_top":false,"comment_ctime":1556610345,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1556610345","product_id":100024501,"comment_content":"1ã€RNæŒ‡çš„æ˜¯React Nativeï¼Œè€Œä¸æ˜¯ReactiveCocoaï¼Œä¸¤ä¸ªä¸åŒçš„æ¡†æ¶<br>2ã€RNå‰ä¸¤å¹´ç«äº†ä¸€é˜µï¼Œè²Œä¼¼ç°åœ¨å¤§å‚ç”¨çš„ä¹Ÿå¾ˆå°‘","like_count":0},{"had_liked":false,"id":90668,"user_name":"change","can_delete":false,"product_type":"c1","uid":1455068,"ip_address":"","ucode":"616071E26C861A","user_header":"https://static001.geekbang.org/account/avatar/00/16/33/dc/5197a6b2.jpg","comment_is_top":false,"comment_ctime":1556606619,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1556606619","product_id":100024501,"comment_content":"å¤§å‚é‡‡ç”¨RNçš„ç†ç”±æ˜¯çƒ­è·Ÿæ–°å—","like_count":0},{"had_liked":false,"id":90642,"user_name":"å§œæµ©è¿œ","can_delete":false,"product_type":"c1","uid":1236739,"ip_address":"","ucode":"6ED5CA8283858B","user_header":"https://static001.geekbang.org/account/avatar/00/12/df/03/6613bd63.jpg","comment_is_top":false,"comment_ctime":1556594052,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1556594052","product_id":100024501,"comment_content":"æ—¢ç„¶çœ‹ä¸Šå»å­˜åœ¨çš„å¥½å¤„ä¸å¤šï¼Œä½†ä¸ºä»€ä¹ˆä¸€äº›å¤§å‚è¿˜åœ¨ä½¿ç”¨ ReactiveCocoa å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1370456,"avatar":"https://static001.geekbang.org/account/avatar/00/14/e9/58/397a4ab2.jpg","nickname":"daniel","note":"","ucode":"3516AF7F9A4DEA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5121,"discussion_content":"ä»£ç å‡å°‘äº†æŒºå¤š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565961289,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":90621,"user_name":"å½­åºçŒ¿","can_delete":false,"product_type":"c1","uid":1002648,"ip_address":"","ucode":"EC59F7968147B6","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4c/98/9845e6b5.jpg","comment_is_top":false,"comment_ctime":1556589761,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1556589761","product_id":100024501,"comment_content":"æœ‰æœ‹å‹èƒ½è§£é‡Šä¸‹ï¼šå‘½ä»¤å¼ã€å“åº”å¼ã€å‡½æ•°å¼ã€é“¾å¼è¿™å‡ ä¸ªçš„åŒºåˆ«è”ç³»å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1263832,"avatar":"https://static001.geekbang.org/account/avatar/00/13/48/d8/51ab657d.jpg","nickname":"Sun0010","note":"","ucode":"92B35625DCEB9B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":42981,"discussion_content":"æˆ‘ä¸ªäººè®¤ä¸ºæ˜¯ä¸€æ ·çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572837389,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":90593,"user_name":"ssala","can_delete":false,"product_type":"c1","uid":1005356,"ip_address":"","ucode":"CCD82C81756FC6","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/2c/b0793828.jpg","comment_is_top":false,"comment_ctime":1556585473,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1556585473","product_id":100024501,"comment_content":"æˆ‘çš„ç†è§£æ˜¯ï¼Œé€»è¾‘å¤æ‚ä»¥åï¼Œç¨‹åºçš„å†…åœ¨å¤æ‚åº¦æå‡ï¼Œæ— è®ºé‡‡ç”¨ä½•ç§ç¼–ç¨‹èŒƒå¼ï¼Œæ— è®ºæ˜¯é¢å‘å¯¹è±¡è¿˜æ˜¯å‡½æ•°å¼ç¼–ç¨‹ï¼Œéƒ½ä¸ä¼šé™ä½ç¨‹åºæœ¬èº«çš„å¤æ‚åº¦ã€‚è€Œè‡³äºå¯è¯»æ€§ï¼Œå†³å®šå› ç´ åœ¨ç¼–å†™ä»£ç çš„äººï¼Œå’Œä½¿ç”¨çš„æ¡†æ¶ï¼Œè¯­è¨€å…³ç³»ä¸å¤§ã€‚","like_count":0}]}