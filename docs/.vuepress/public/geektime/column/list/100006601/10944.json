{"id":10944,"title":"34 | 深入理解微服务架构：银弹 or 焦油坑？","content":"<p>微服务是近几年非常火热的架构设计理念，大部分人认为是Martin Fowler提出了微服务概念，但事实上微服务概念的历史要早得多，也不是Martin Fowler创造出来的，Martin只是将微服务进行了系统的阐述（原文链接：<a href=\"https://martinfowler.com/articles/microservices.html\">https://martinfowler.com/articles/microservices.html</a>）。不过不能否认Martin在推动微服务起到的作用，微服务能火，Martin功不可没。</p><p>微服务的定义相信你早已耳熟能详，参考维基百科，我就来简单梳理一下微服务的历史吧（<a href=\"https://en.wikipedia.org/wiki/Microservices#History%EF%BC%89%EF%BC%9A\">https://en.wikipedia.org/wiki/Microservices#History）：</a></p><ul>\n<li>\n<p>2005年：Dr. Peter Rodgers在Web Services Edge大会上提出了“Micro-Web-Services”的概念。</p>\n</li>\n<li>\n<p>2011年：一个软件架构工作组使用了“microservice”一词来描述一种架构模式。</p>\n</li>\n<li>\n<p>2012年：同样是这个架构工作组，正式确定用“microservice”来代表这种架构。</p>\n</li>\n<li>\n<p>2012年：ThoughtWorks的James Lewis针对微服务概念在QCon San Francisco 2012发表了演讲。</p>\n</li>\n<li>\n<p>2014年：James Lewis和Martin Fowler合写了关于微服务的一篇学术性的文章，详细阐述了微服务。</p>\n</li>\n</ul><!-- [[[read_end]]] --><p>由于微服务的理念中也包含了“服务”的概念，而SOA中也有“服务”的概念，我们自然而然地会提出疑问：<strong>微服务与SOA有什么关系？有什么区别？为何有了SOA还要提微服务</strong>？这几个问题是理解微服务的关键，否则如果只是跟风拿来就用，既不会用，也用不好，用了不但没有效果，反而还可能有副作用。</p><p>今天我们就来<span class=\"orange\">深入理解微服务，到底是银弹还是焦油坑</span>。</p><h2>微服务与SOA的关系</h2><p>对于了解过SOA的人来说，第一次看到微服务这个概念肯定会有所疑惑：为何有了SOA还要提微服务呢？等到简单看完微服务的介绍后，可能很多人更困惑了：这不就是SOA吗？</p><p>关于SOA和微服务的关系和区别，大概分为下面几个典型的观点。</p><ul>\n<li>微服务是SOA的实现方式</li>\n</ul><p>如下图所示，这种观点认为SOA是一种架构理念，而微服务是SOA理念的一种具体实现方法。例如，“微服务就是使用HTTP RESTful协议来实现ESB的SOA”“使用SOA来构建单个系统就是微服务”和“微服务就是更细粒度的SOA”。</p><p><img src=\"https://static001.geekbang.org/resource/image/d0/1f/d023f007c996193e27606ae632b1961f.jpg?wh=2586*1300\" alt=\"\"></p><ul>\n<li>微服务是去掉ESB后的SOA</li>\n</ul><p>如下图所示，这种观点认为传统SOA架构最广为人诟病的就是庞大、复杂、低效的ESB，因此将ESB去掉，改为轻量级的HTTP实现，就是微服务。</p><p></p><p><img src=\"https://static001.geekbang.org/resource/image/5d/22/5de96952034dda7298215dda6dfb2422.jpg?wh=2726*1281\" alt=\"\"></p><ul>\n<li>微服务是一种和SOA相似但本质上不同的架构理念</li>\n</ul><p>如下图所示，这种观点认为微服务和SOA只是有点类似，但本质上是不同的架构设计理念。相似点在于下图中交叉的地方，就是两者都关注“服务”，都是通过服务的拆分来解决可扩展性问题。本质上不同的地方在于几个核心理念的差异：是否有ESB、服务的粒度、架构设计的目标等。</p><p></p><p><img src=\"https://static001.geekbang.org/resource/image/d5/a8/d58120dc17ff683179274078abfa73a8.jpg?wh=2942*1301\" alt=\"\"></p><p>以上观点看似都有一定的道理，但都有点差别，到底哪个才是准确的呢？单纯从概念上是难以分辨的，我来对比一下SOA和微服务的一些具体做法，再来看看到底哪一种观点更加符合实际情况。</p><ol>\n<li>服务粒度</li>\n</ol><p>整体上来说，SOA的服务粒度要粗一些，而微服务的服务粒度要细一些。例如，对一个大型企业来说，“员工管理系统”就是一个SOA架构中的服务；而如果采用微服务架构，则“员工管理系统”会被拆分为更多的服务，比如“员工信息管理”“员工考勤管理”“员工假期管理”和“员工福利管理”等更多服务。</p><ol start=\"2\">\n<li>服务通信</li>\n</ol><p>SOA采用了ESB作为服务间通信的关键组件，负责服务定义、服务路由、消息转换、消息传递，总体上是重量级的实现。微服务推荐使用统一的协议和格式，例如，RESTful协议、RPC协议，无须ESB这样的重量级实现。Martin Fowler将微服务架构的服务通讯理念称为“Smart endpoints and dumb pipes”，简单翻译为“聪明的终端，愚蠢的管道”。之所以用“愚蠢”二字，其实就是与ESB对比的，因为ESB太强大了，既知道每个服务的协议类型（例如，是RMI还是HTTP），又知道每个服务的数据类型（例如，是XML还是JSON），还知道每个数据的格式（例如，是2017-01-01还是01/01/2017），而微服务的“dumb pipes”仅仅做消息传递，对消息格式和内容一无所知。</p><ol start=\"3\">\n<li>服务交付</li>\n</ol><p>SOA对服务的交付并没有特殊要求，因为SOA更多考虑的是兼容已有的系统；微服务的架构理念要求“快速交付”，相应地要求采取自动化测试、持续集成、自动化部署等敏捷开发相关的最佳实践。如果没有这些基础能力支撑，微服务规模一旦变大（例如，超过20个微服务），整体就难以达到快速交付的要求，这也是很多企业在实行微服务时踩过的一个明显的坑，就是系统拆分为微服务后，部署的成本呈指数上升。</p><ol start=\"4\">\n<li>应用场景</li>\n</ol><p>SOA更加适合于庞大、复杂、异构的企业级系统，这也是SOA诞生的背景。这类系统的典型特征就是很多系统已经发展多年，采用不同的企业级技术，有的是内部开发的，有的是外部购买的，无法完全推倒重来或者进行大规模的优化和重构。因为成本和影响太大，只能采用兼容的方式进行处理，而承担兼容任务的就是ESB。</p><p>微服务更加适合于快速、轻量级、基于Web的互联网系统，这类系统业务变化快，需要快速尝试、快速交付；同时基本都是基于Web，虽然开发技术可能差异很大（例如，Java、C++、.NET等），但对外接口基本都是提供HTTP RESTful风格的接口，无须考虑在接口层进行类似SOA的ESB那样的处理。</p><p>综合上述分析，我将SOA和微服务对比如下：</p><p><img src=\"https://static001.geekbang.org/resource/image/d3/be/d32345729fa918b57ed66dfb905c98be.jpg?wh=3792*1540\" alt=\"\"></p><p>因此，我们可以看到，<strong>SOA和微服务本质上是两种不同的架构设计理念，只是在“服务”这个点上有交集而已，因此两者的关系应该是上面第三种观点</strong>。</p><p>其实，Martin Fowler在他的微服务文章中，已经做了很好的提炼：</p><blockquote>\n<p>In short, the microservice architectural style is an approach to developing a single application as a suite of small services, each running in its own process and communicating with lightweight mechanisms, often an HTTP resource API. These services are built around business capabilities and independently deployable by fully automated deployment machinery.</p>\n</blockquote><p>（<a href=\"https://martinfowler.com/articles/microservices.html\">https://martinfowler.com/articles/microservices.html</a>）</p><p>上述英文的三个关键词分别是：small、lightweight、automated，基本上浓缩了微服务的精华，也是微服务与SOA的本质区别所在。</p><p>通过前面的详细分析和比较，似乎微服务本质上就是一种比SOA要优秀很多的架构模式，那是否意味着我们都应该把架构重构为微服务呢？</p><p>其实不然，SOA和微服务是两种不同理念的架构模式，并不存在孰优孰劣，只是应用场景不同而已。我们介绍SOA时候提到其产生历史背景是因为企业的IT服务系统庞大而又复杂，改造成本很高，但业务上又要求其互通，因此才会提出SOA这种解决方案。如果我们将微服务的架构模式生搬硬套到企业级IT服务系统中，这些IT服务系统的改造成本可能远远超出实施SOA的成本。</p><h2>微服务的陷阱</h2><p>单纯从上面的对比来看，似乎微服务大大优于SOA，这也导致了很多团队在实践时不加思考地采用微服务——既不考虑团队的规模，也不考虑业务的发展，也没有考虑基础技术的支撑，只是觉得微服务很牛就赶紧来实施，以为实施了微服务后就什么问题都解决了，而一旦真正实施后才发现掉到微服务的坑里面去了。</p><p>我们看一下微服务具体有哪些坑：</p><ol>\n<li>服务划分过细，服务间关系复杂</li>\n</ol><p>服务划分过细，单个服务的复杂度确实下降了，但整个系统的复杂度却上升了，因为微服务将系统内的复杂度转移为系统间的复杂度了。</p><p>从理论的角度来计算，n个服务的复杂度是n×(n-1)/2，整体系统的复杂度是随着微服务数量的增加呈指数级增加的。下图形象了说明了整体复杂度：</p><p></p><p><img src=\"https://static001.geekbang.org/resource/image/39/f7/39ba1095d73b080ffce4a334309b62f7.jpg?wh=4064*1798\" alt=\"\"></p><p>粗粒度划分服务时，系统被划分为3个服务，虽然单个服务较大，但服务间的关系很简单；细粒度划分服务时，虽然单个服务小了一些，但服务间的关系却复杂了很多。</p><ol start=\"2\">\n<li>服务数量太多，团队效率急剧下降</li>\n</ol><p>微服务的“微”字，本身就是一个陷阱，很多团队看到“微”字后，就想到必须将服务拆分得很细，有的团队人员规模是5 ~ 6个人，然而却拆分出30多个微服务，平均每个人要维护5个以上的微服务。</p><p>这样做给工作效率带来了明显的影响，一个简单的需求开发就需要涉及多个微服务，光是微服务之间的接口就有6 ~ 7个，无论是设计、开发、测试、部署，都需要工程师不停地在不同的服务间切换。</p><ul>\n<li>\n<p>开发工程师要设计多个接口，打开多个工程，调试时要部署多个程序，提测时打多个包。</p>\n</li>\n<li>\n<p>测试工程师要部署多个环境，准备多个微服务的数据，测试多个接口。</p>\n</li>\n<li>\n<p>运维工程师每次上线都要操作多个微服务，并且微服务之间可能还有依赖关系。</p>\n</li>\n</ul><ol start=\"3\">\n<li>调用链太长，性能下降</li>\n</ol><p>由于微服务之间都是通过HTTP或者RPC调用的，每次调用必须经过网络。一般线上的业务接口之间的调用，平均响应时间大约为50毫秒，如果用户的一起请求需要经过6次微服务调用，则性能消耗就是300毫秒，这在很多高性能业务场景下是难以满足需求的。为了支撑业务请求，可能需要大幅增加硬件，这就导致了硬件成本的大幅上升。</p><ol start=\"4\">\n<li>调用链太长，问题定位困难</li>\n</ol><p>系统拆分为微服务后，一次用户请求需要多个微服务协同处理，任意微服务的故障都将导致整个业务失败。然而由于微服务数量较多，且故障存在扩散现象，快速定位到底是哪个微服务故障是一件复杂的事情。下面是一个典型样例。</p><p><img src=\"https://static001.geekbang.org/resource/image/b9/20/b92bf0b8386bf488896b1da651148820.jpg?wh=4117*1912\" alt=\"\"></p><p>Service C的数据库出现慢查询，导致Service C给Service B的响应错误，Service B 给Service A的响应错误，Service A给用户的响应错误。我们在实际定位时是不会有样例图中这么清晰的，最开始是用户报错，这时我们首先会去查Service A。导致Service A故障的原因有很多，我们可能要花半个小时甚至1个小时才能发现是Service B返回错误导致的。于是我们又去查Service B，这相当于重复Service A故障定位的步骤……如此循环下去，最后可能花费了几个小时才能定位到是Service C的数据库慢查询导致了错误。</p><p>如果多个微服务同时发生不同类型的故障，则定位故障更加复杂，如下图所示。</p><p><img src=\"https://static001.geekbang.org/resource/image/2e/76/2ef561c923e543e5b9341c5e3bc58076.jpg?wh=4116*1848\" alt=\"\"></p><p>Service C的数据库发生慢查询故障，同时Service C到Service D的网络出现故障，此时到底是哪个原因导致了Service C返回Error给Service B，需要大量的信息和人力去排查。</p><ol start=\"5\">\n<li>没有自动化支撑，无法快速交付</li>\n</ol><p>如果没有相应的自动化系统进行支撑，都是靠人工去操作，那么微服务不但达不到快速交付的目的，甚至还不如一个大而全的系统效率高。例如：</p><ul>\n<li>\n<p>没有自动化测试支撑，每次测试时需要测试大量接口。</p>\n</li>\n<li>\n<p>没有自动化部署支撑，每次部署6 ~ 7个服务，几十台机器，运维人员敲shell命令逐台部署，手都要敲麻。</p>\n</li>\n<li>\n<p>没有自动化监控，每次故障定位都需要人工查几十台机器几百个微服务的各种状态和各种日志文件。</p>\n</li>\n</ul><ol start=\"6\">\n<li>没有服务治理，微服务数量多了后管理混乱</li>\n</ol><p>信奉微服务理念的设计人员总是强调微服务的lightweight特性，并举出ESB的反例来证明微服务的优越之处。但具体实践后就会发现，随着微服务种类和数量越来越多，如果没有服务治理系统进行支撑，微服务提倡的lightweight就会变成问题。主要问题有：</p><ul>\n<li>\n<p>服务路由：假设某个微服务有60个节点，部署在20台机器上，那么其他依赖的微服务如何知道这个部署情况呢？</p>\n</li>\n<li>\n<p>服务故障隔离：假设上述例子中的60个节点有5个节点发生故障了，依赖的微服务如何处理这种情况呢？</p>\n</li>\n<li>\n<p>服务注册和发现：同样是上述的例子，现在我们决定从60个节点扩容到80个节点，或者将60个节点缩减为40个节点，新增或者减少的节点如何让依赖的服务知道呢？</p>\n</li>\n</ul><p>如果以上场景都依赖人工去管理，整个系统将陷入一片混乱，最终的解决方案必须依赖自动化的服务管理系统，这时就会发现，微服务所推崇的“lightweight”，最终也发展成和ESB几乎一样的复杂程度。</p><h2>小结</h2><p>今天我为你讲了微服务与SOA的关系以及微服务实践中的常见陷阱，希望对你有所帮助。</p><p>这就是今天的全部内容，留一道思考题给你吧，你们的业务有采用微服务么？谈谈具体实践过程中有什么经验和教训。</p><p>欢迎你把答案写到留言区，和我一起讨论。相信经过深度思考的回答，也会让你对知识的理解更加深刻。（编辑乱入：精彩的留言有机会获得丰厚福利哦！）</p>","neighbors":{"left":{"article_title":"33 | 传统的可扩展架构模式：分层架构和SOA","id":10790},"right":{"article_title":"35 | 微服务架构最佳实践 - 方法篇","id":11207}},"comments":[{"had_liked":false,"id":19565,"user_name":"Tom","can_delete":false,"product_type":"c1","uid":1109832,"ip_address":"","ucode":"00EEDE4CB11776","user_header":"","comment_is_top":true,"comment_ctime":1533881818,"is_pvip":false,"replies":[{"id":6754,"content":"我理解算微服务，千万不要理解为微服务就是将服务拆的很细，后面有具体实践技巧介绍这部分","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1533884613,"ip_address":"","comment_id":19565,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100006601,"comment_content":"我们公司的实践是比较粗粒度的子系统或服务，基本上没有太细粒度的微服务，以webapi为主。感觉更像微服务架构，只是服务粒度比较粗，从概念上算是SOA还是微服务架构呢？","like_count":34},{"had_liked":false,"id":16017,"user_name":"鹅米豆发","can_delete":false,"product_type":"c1","uid":1017687,"ip_address":"","ucode":"98E8D911EE32DE","user_header":"https://static001.geekbang.org/account/avatar/00/0f/87/57/645159ee.jpg","comment_is_top":false,"comment_ctime":1531741288,"is_pvip":false,"replies":[{"id":5569,"content":"他们架构师是水货😂你的理解和分析是对的，后一篇就讲了","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1531792461,"ip_address":"","comment_id":16017,"utype":1}],"discussion_count":10,"race_medal":0,"score":2,"product_id":100006601,"comment_content":"对于一个新事物的诞生，本能地套用已有的知识。特别是一个并不简单的东西，这算是一种高效的入门方法。微服务架构其实相当复杂，我是分成好几个阶段理解。\r\n1、第一阶段，微服务架构就是去掉了ESB的SOA架构，只不过是通信的方式和结构变了。对于初级的使用者而言，这样理解没有太大问题。\r\n2、第二阶段，没有了ESB，原本很多由ESB组件做的事儿，转到服务的提供者和调用者这里了。他们需要考虑服务的拆分粒。大体仍然算是SOA架构。\r\n3、第三阶段，随着服务的数量大幅增加，服务的管理越来越困难，此时DevOps出现了。这个阶段的微服务架构，已经是跟SOA架构完全不同的东西了。\r\n之前给一家大国企分享过一些经验。他们想从传统架构，转向微服务架构。\r\n1、建设好基础设施，RPC、服务治理、日志、监控、持续集成、持续部署、运维自动化是基本的，其它包括服务编排、分布式追踪等。\r\n2、要逐步演进和迭代，不要过于激进，更不要拆分过细，拆分的粒度，要与团队的架构相互匹配。（康威定律）\r\n3、微服务与数据库方面，是个很大的难点，可以深入了解下领域驱动设计，做好领域建模，特别是数据库要随着服务一起拆分。\r\n说完上面这些，他们的研发负责人说，我说的跟他们的架构师说的不一样，他们的架构师说，微服务就是各种拆分，不顾一切地拆分。","like_count":155,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":421895,"discussion_content":"我理解算微服务，千万不要理解为微服务就是将服务拆的很细，后面有具体实践技巧介绍这部分","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1533884613,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":15979,"user_name":"ant","can_delete":false,"product_type":"c1","uid":1043816,"ip_address":"","ucode":"27BAF20679679A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ed/68/737f97c8.jpg","comment_is_top":false,"comment_ctime":1531704530,"is_pvip":false,"replies":[{"id":5520,"content":"用户会用脚投票的😂😂","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1531720322,"ip_address":"","comment_id":15979,"utype":1}],"discussion_count":4,"race_medal":0,"score":2,"product_id":100006601,"comment_content":"我们是一家社交公司，后端加厚的演变符合dubbo官网的那张图，在Mvc架构坚持了一年后，业务越来越大，工程越来越臃肿。后面我们一致同意进行服务话，开始用了dubbo。后面由于决策层的原因没有上，后面来了个架构师，又重启了服务拆分，到现在已经用于生产。我们使用的是Spring cloud，现在拆分暴露了很多问题:\n1、个别服务没有熔断出来，出现过雪崩效应\n2、服务拆分过细，服务调用链过长\n3、开发人员能力不一样，代码水平不一样\n4、没有监控措施\n5、每个服务部署多台，日志查询就会死人的感觉\n6、开发过程中经常出现访问不到该访问的接口，这是因为开发人员经常启动本地服务，就会导致30%的概率访问不到\n7、使用了不合理的持久层框架，使用了JPA访问\n大概就有上面的问题，总之微服务不是银弹，用得不好会发现无穷无尽的坑。当然，出现问题解决问题就是了。唯一的就像CEO说的: 你们他妈的是完全在拿用户当小白鼠使用","like_count":37,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420625,"discussion_content":"用户会用脚投票的😂😂","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1531720322,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1062848,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ersGSic8ib7OguJv6CJiaXY0s4n9C7Z51sWxTTljklFpq3ZAIWXoFTPV5oLo0GMTkqW5sYJRRnibNqOJQ/132","nickname":"walle斌","note":"","ucode":"0DB3243004951F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":303993,"discussion_content":"，，，微服务跟一开始启动工作的那批技术人员有很大关系，约到后期，技术债务越多，后续的技术人员水平再高，也是带着镣铐跳舞，希望团队起步阶段，一定别让太多水货掺和","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1599446058,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1187577,"avatar":"https://static001.geekbang.org/account/avatar/00/12/1e/f9/bfb54326.jpg","nickname":"狮锅艺","note":"","ucode":"1B4AD130F9D0CA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":281229,"discussion_content":"微服务架构设计中提到的绞杀者模式可能比较适合对已有单体进行改造，直接全拆风险太大了吧。微服务治理平台的搭建不是一下子就能搞定的。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1591696413,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1005042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/55/f2/ba68d931.jpg","nickname":"有米","note":"","ucode":"C9A10B7A67BC12","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":187548,"discussion_content":"一把双刃剑就看你用得怎么样了","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1582732785,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":20479,"user_name":"三棱镜","can_delete":false,"product_type":"c1","uid":1155543,"ip_address":"","ucode":"14833F759F8423","user_header":"https://static001.geekbang.org/account/avatar/00/11/a1/d7/fb836ffc.jpg","comment_is_top":false,"comment_ctime":1534470881,"is_pvip":false,"replies":[{"id":7194,"content":"感同身受啊😄","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1534514381,"ip_address":"","comment_id":20479,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100006601,"comment_content":"我们目前全部微服务，踩坑踩了不少，拆分服务同时要把自动化运维系统和多维度监控系统，包括问题定位跟踪系统建立起来，要不然拆了就是噩梦。","like_count":22,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420625,"discussion_content":"用户会用脚投票的😂😂","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1531720322,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1062848,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ersGSic8ib7OguJv6CJiaXY0s4n9C7Z51sWxTTljklFpq3ZAIWXoFTPV5oLo0GMTkqW5sYJRRnibNqOJQ/132","nickname":"walle斌","note":"","ucode":"0DB3243004951F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":303993,"discussion_content":"，，，微服务跟一开始启动工作的那批技术人员有很大关系，约到后期，技术债务越多，后续的技术人员水平再高，也是带着镣铐跳舞，希望团队起步阶段，一定别让太多水货掺和","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1599446058,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1187577,"avatar":"https://static001.geekbang.org/account/avatar/00/12/1e/f9/bfb54326.jpg","nickname":"狮锅艺","note":"","ucode":"1B4AD130F9D0CA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":281229,"discussion_content":"微服务架构设计中提到的绞杀者模式可能比较适合对已有单体进行改造，直接全拆风险太大了吧。微服务治理平台的搭建不是一下子就能搞定的。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1591696413,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1005042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/55/f2/ba68d931.jpg","nickname":"有米","note":"","ucode":"C9A10B7A67BC12","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":187548,"discussion_content":"一把双刃剑就看你用得怎么样了","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1582732785,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":16053,"user_name":"凡凡","can_delete":false,"product_type":"c1","uid":1056142,"ip_address":"","ucode":"134C1E1E6B22BF","user_header":"https://static001.geekbang.org/account/avatar/00/10/1d/8e/0a546871.jpg","comment_is_top":false,"comment_ctime":1531753326,"is_pvip":false,"replies":[{"id":5567,"content":"把HTTP转RPC做成规则，别硬编码每个接口，例如，规定HTTP URL为&#47;service&#47;interface&#47;method?para1=xxx&amp;para2=yyy","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1531792211,"ip_address":"","comment_id":16053,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100006601,"comment_content":"说到微服务，切分的粒度和基础设施都致关重要。\n\n经历的项目有创业初期的单体服务，也有不太完善的服务切分的系统，也有微服务基础设施相对完善的公司。\n\n单体服务致命就致命在随着项目的发展，项目会越来越臃肿，越不利于扩展开发。\n\n微服务过程怕就怕基础不完善，人员配备不够盲目切分，导致工程师开发和维护的战线拉长，特别疲惫和泄气，容易产生一种抱怨的大气氛，从而导致微服务失败，重新合并一部分服务。\n\n微服务做的好的，也有所经历，公司的基础设施完全云化和统一管理，申请几台机器，一套缓存集群，一套mq，sql&#47;nosql…特别容易，工程师愿意建独立的工程，因为很容易构建和部署。这种感觉有点像svn和git，git建分支特别轻量，大家都愿意用分支管理自己的代码，迭代开发，应急处理都能自由切换，得心应手。\n\n现在遇到一个问题，就是微服务内部系统大多使用rpc，但对接外部系统，或者跨外网传输到客户端就需要http-rest类的协议。也就是我们常说的网关，如果是纯http就很容易做到通用的转发机制，但是http转rpc就不知道有什么方式可以做到通用转发了，内部每增加一个rpc，网关就需要增加一个对应的服务处理逻辑。不知道，这个问题，有没有好的解决办法？","like_count":17,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420648,"discussion_content":"把HTTP转RPC做成规则，别硬编码每个接口，例如，规定HTTP URL为/service/interface/method?para1=xxx&amp;amp;para2=yyy","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1531792211,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":49203,"user_name":"木头旮瘩","can_delete":false,"product_type":"c1","uid":1243119,"ip_address":"","ucode":"33FD0A8598B91E","user_header":"","comment_is_top":false,"comment_ctime":1544621613,"is_pvip":false,"replies":[{"id":17764,"content":"你可以去改造他们😂","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1544679647,"ip_address":"","comment_id":49203,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100006601,"comment_content":"让我想起了一次面试经历，一家小公司，技术团队大概7 8个人，然后他们要进行微服务架构改造，我问他们:你们这样满足康威定理么？他们一脸懵逼……我就果断闪人了","like_count":16,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420648,"discussion_content":"把HTTP转RPC做成规则，别硬编码每个接口，例如，规定HTTP URL为/service/interface/method?para1=xxx&amp;amp;para2=yyy","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1531792211,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":15812,"user_name":"正是那朵玫瑰","can_delete":false,"product_type":"c1","uid":1048261,"ip_address":"","ucode":"73D630B654573F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fe/c5/3467cf94.jpg","comment_is_top":false,"comment_ctime":1531535531,"is_pvip":false,"replies":[{"id":5537,"content":"spring全家桶，你值得拥有😂","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1531721768,"ip_address":"","comment_id":15812,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100006601,"comment_content":"我们的业务也算是微服务吧，\t接手项目时，已经有好多服务，主要采用的语言有java，php，nodejs，存在以下问题：\n1、没有一个统一的网关服务，前端请求后端服务都需要后端的服务A来充当安全校验，权限校验等，A服务充当了多重职责，变的职责不明确了，后来抽出网关系统，负责平台统一的流量入口。在构建微服务网关系统是至关重要的。\n2、监控系统不完善，调用链跟踪，异常报警都不完善，对微服务是巨坑，查找问题如同一场噩梦，调用链很长，一旦发生异常不知道到底哪里出现问题，得一个一个去找。后来慢慢完善，变得好了很多，问题很快定位。\n3、加入网关后，没有一个统一的服务发现注册中心，网关的路由依靠人工手动配置，变的很麻烦，也很容易出错。后来引入consul，得到改善。","like_count":13,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420561,"discussion_content":"spring全家桶，你值得拥有😂","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1531721768,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1095857,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/bvj76PmeUvW8kokyu91IZWuRATKmabibDWbzAj2TajeEic7WvKCJOLaOh6jibEmdQ36EO3sBUZ0HibAiapsrZo64U8w/132","nickname":"梦倚栏杆","note":"","ucode":"BDEB97F2822445","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":367091,"discussion_content":"你们网关服务是单独的团队维护的吗？如果业务系统关于相关的校验有变化或者排查问题时怎么处理呢？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618267754,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1048261,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/fe/c5/3467cf94.jpg","nickname":"正是那朵玫瑰","note":"","ucode":"73D630B654573F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1095857,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/bvj76PmeUvW8kokyu91IZWuRATKmabibDWbzAj2TajeEic7WvKCJOLaOh6jibEmdQ36EO3sBUZ0HibAiapsrZo64U8w/132","nickname":"梦倚栏杆","note":"","ucode":"BDEB97F2822445","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":370149,"discussion_content":"不是","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619313032,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":367091,"ip_address":"","group_id":0},"score":370149,"extra":""}]}]},{"had_liked":false,"id":15883,"user_name":"子清","can_delete":false,"product_type":"c1","uid":1106345,"ip_address":"","ucode":"2E2E82AD5B1680","user_header":"https://static001.geekbang.org/account/avatar/00/10/e1/a9/64a2fe3a.jpg","comment_is_top":false,"comment_ctime":1531588136,"is_pvip":false,"replies":[{"id":5531,"content":"让你们架构师来订阅架构专栏😂😂😂","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1531721356,"ip_address":"","comment_id":15883,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100006601,"comment_content":"我们公司的平台就是使用微服务架构，十多二十个微服务，但是没有自动化部署，监控，自动化测试这些，而且每次报错日志也特别难找，但是我们那架构师却不重视这些，只想继续升级平台的功能","like_count":10,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420561,"discussion_content":"spring全家桶，你值得拥有😂","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1531721768,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1095857,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/bvj76PmeUvW8kokyu91IZWuRATKmabibDWbzAj2TajeEic7WvKCJOLaOh6jibEmdQ36EO3sBUZ0HibAiapsrZo64U8w/132","nickname":"梦倚栏杆","note":"","ucode":"BDEB97F2822445","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":367091,"discussion_content":"你们网关服务是单独的团队维护的吗？如果业务系统关于相关的校验有变化或者排查问题时怎么处理呢？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618267754,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1048261,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/fe/c5/3467cf94.jpg","nickname":"正是那朵玫瑰","note":"","ucode":"73D630B654573F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1095857,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/bvj76PmeUvW8kokyu91IZWuRATKmabibDWbzAj2TajeEic7WvKCJOLaOh6jibEmdQ36EO3sBUZ0HibAiapsrZo64U8w/132","nickname":"梦倚栏杆","note":"","ucode":"BDEB97F2822445","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":370149,"discussion_content":"不是","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619313032,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":367091,"ip_address":"","group_id":0},"score":370149,"extra":""}]}]},{"had_liked":false,"id":268613,"user_name":"修仙中","can_delete":false,"product_type":"c1","uid":2369112,"ip_address":"","ucode":"A139C0EB3F2F52","user_header":"https://static001.geekbang.org/account/avatar/00/24/26/58/141fd7df.jpg","comment_is_top":false,"comment_ctime":1608273328,"is_pvip":false,"replies":[{"id":97507,"content":"最后的结局让人猝不及防😂😂","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1608370278,"ip_address":"","comment_id":268613,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100006601,"comment_content":"我们之前5个人的小团队，老板一拍脑袋玩起了微服务。整了spring cloud那一套全家桶：\n现有业务拆拆拆，什么注册中心，配置中心，链路追踪，网关，ELK统统往系统里面堆。\n主要的带来了以下问题：\n1、运维成本过高，部署物数量多、监控进程多导致整体运维复杂度提升。\n2、接口大量的兼容版本\n3、网络延迟，服务容错，可用性，负载复杂性大大提升\n4、还引入了分布式事务\n团队没有运维，我们只能硬着头皮上，自己用docker搭redis集群，mysql集群，mq集群，es集群\n最终因为不够钱买服务器，整个叫停了，哈哈哈哈哈","like_count":8,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":511988,"discussion_content":"最后的结局让人猝不及防😂😂","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608370278,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2950644,"avatar":"","nickname":"Geek_5e3dd1","note":"","ucode":"5849154880BB8C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":566816,"discussion_content":"我们公司的服务器甲方提供，所以无需成本考虑","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650767673,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1006735,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5c/8f/551b5624.jpg","nickname":"小可","note":"","ucode":"8834AF621FA67D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":356169,"discussion_content":"真是笑死人","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615543838,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":24961,"user_name":"Jussi Lee","can_delete":false,"product_type":"c1","uid":1211190,"ip_address":"","ucode":"F2F5948CCD52A2","user_header":"https://static001.geekbang.org/account/avatar/00/12/7b/36/fd46331c.jpg","comment_is_top":false,"comment_ctime":1537233633,"is_pvip":false,"replies":[{"id":9257,"content":"很好的案例👍","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1537342172,"ip_address":"","comment_id":24961,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100006601,"comment_content":"我们项目之前是把数据采集，和展示都是我们Java组去写的。后面公司为了统一，把采集部分交给了.net组。我们Java只负责数据展示。但是我们这边又按照领导的要求把整个业务拆分为模板解析层-》api层——》终端层。现在每次最烦的事就是找bug。一直感觉现阶段我们的任务和目标没有这么庞大，这与架构中的简单和合适原则想违背。搞的整个项目组一直在反复的开发工作中。都很心累","like_count":8,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":424145,"discussion_content":"很好的案例👍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1537342172,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1095857,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/bvj76PmeUvW8kokyu91IZWuRATKmabibDWbzAj2TajeEic7WvKCJOLaOh6jibEmdQ36EO3sBUZ0HibAiapsrZo64U8w/132","nickname":"梦倚栏杆","note":"","ucode":"BDEB97F2822445","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":367093,"discussion_content":"我也有类似的感受，查 bug时很累，面向用户终端的是需要最新排查的，然后一层层往下找，尤其跨组找问题很累，bug解决了，可能还需要修复关连数据","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618267979,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":19565,"user_name":"Tom","can_delete":false,"product_type":"c1","uid":1109832,"ip_address":"","ucode":"00EEDE4CB11776","user_header":"","comment_is_top":true,"comment_ctime":1533881818,"is_pvip":false,"replies":[{"id":6754,"content":"我理解算微服务，千万不要理解为微服务就是将服务拆的很细，后面有具体实践技巧介绍这部分","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1533884613,"ip_address":"","comment_id":19565,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100006601,"comment_content":"我们公司的实践是比较粗粒度的子系统或服务，基本上没有太细粒度的微服务，以webapi为主。感觉更像微服务架构，只是服务粒度比较粗，从概念上算是SOA还是微服务架构呢？","like_count":34,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":421895,"discussion_content":"我理解算微服务，千万不要理解为微服务就是将服务拆的很细，后面有具体实践技巧介绍这部分","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1533884613,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":16017,"user_name":"鹅米豆发","can_delete":false,"product_type":"c1","uid":1017687,"ip_address":"","ucode":"98E8D911EE32DE","user_header":"https://static001.geekbang.org/account/avatar/00/0f/87/57/645159ee.jpg","comment_is_top":false,"comment_ctime":1531741288,"is_pvip":false,"replies":[{"id":5569,"content":"他们架构师是水货😂你的理解和分析是对的，后一篇就讲了","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1531792461,"ip_address":"","comment_id":16017,"utype":1}],"discussion_count":10,"race_medal":0,"score":2,"product_id":100006601,"comment_content":"对于一个新事物的诞生，本能地套用已有的知识。特别是一个并不简单的东西，这算是一种高效的入门方法。微服务架构其实相当复杂，我是分成好几个阶段理解。\r\n1、第一阶段，微服务架构就是去掉了ESB的SOA架构，只不过是通信的方式和结构变了。对于初级的使用者而言，这样理解没有太大问题。\r\n2、第二阶段，没有了ESB，原本很多由ESB组件做的事儿，转到服务的提供者和调用者这里了。他们需要考虑服务的拆分粒。大体仍然算是SOA架构。\r\n3、第三阶段，随着服务的数量大幅增加，服务的管理越来越困难，此时DevOps出现了。这个阶段的微服务架构，已经是跟SOA架构完全不同的东西了。\r\n之前给一家大国企分享过一些经验。他们想从传统架构，转向微服务架构。\r\n1、建设好基础设施，RPC、服务治理、日志、监控、持续集成、持续部署、运维自动化是基本的，其它包括服务编排、分布式追踪等。\r\n2、要逐步演进和迭代，不要过于激进，更不要拆分过细，拆分的粒度，要与团队的架构相互匹配。（康威定律）\r\n3、微服务与数据库方面，是个很大的难点，可以深入了解下领域驱动设计，做好领域建模，特别是数据库要随着服务一起拆分。\r\n说完上面这些，他们的研发负责人说，我说的跟他们的架构师说的不一样，他们的架构师说，微服务就是各种拆分，不顾一切地拆分。","like_count":155,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420638,"discussion_content":"他们架构师是水货😂你的理解和分析是对的，后一篇就讲了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1531792461,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1111917,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f7/6d/1f6614b8.jpg","nickname":"哭哭吓唬你","note":"","ucode":"93C760B67B8E84","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":597354,"discussion_content":"您好，请问有没有服务编排的相关实战资料或讲解，一直比较迷惑是怎么进行的？是直接编码还是用类似bpm这种还是其他？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1671715104,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":420638,"ip_address":"北京","group_id":0},"score":597354,"extra":""}]},{"author":{"id":1394541,"avatar":"https://static001.geekbang.org/account/avatar/00/15/47/6d/f818a06d.jpg","nickname":"一拳超人","note":"","ucode":"22A3CB97DCAD25","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":626348,"discussion_content":"mark\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1692839240,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"四川","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":3216493,"avatar":"","nickname":"舒秉亮","note":"","ucode":"A723B37C82EC46","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":595439,"discussion_content":"mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1670075349,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1007271,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5e/a7/8dc374e2.jpg","nickname":"BitInit","note":"","ucode":"BDDDA0F51B1EFB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":587361,"discussion_content":"Mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662993116,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"浙江","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1293551,"avatar":"https://static001.geekbang.org/account/avatar/00/13/bc/ef/98550b85.jpg","nickname":"云彩＆草原","note":"","ucode":"6AEA686202F1CC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":557930,"discussion_content":"M","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1648027965,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1918112,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/44/a0/16d0d300.jpg","nickname":"ZHANGPING","note":"","ucode":"7108812981C996","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":384406,"discussion_content":"点赞","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626574539,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1095857,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/bvj76PmeUvW8kokyu91IZWuRATKmabibDWbzAj2TajeEic7WvKCJOLaOh6jibEmdQ36EO3sBUZ0HibAiapsrZo64U8w/132","nickname":"梦倚栏杆","note":"","ucode":"BDEB97F2822445","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":367089,"discussion_content":"所以架构还包含运维的内容？那就是整个技术部的迭代，基础组件，运维，测试能力都要跟的上？？？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618266919,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1922378,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/55/4a/8a841200.jpg","nickname":"ACK","note":"","ucode":"C5D09B18DEF151","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":358767,"discussion_content":"受益。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616047342,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1336475,"avatar":"https://static001.geekbang.org/account/avatar/00/14/64/9b/d1ab239e.jpg","nickname":"J.Smile","note":"","ucode":"C4D98DFDBF7584","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":335117,"discussion_content":"很棒的阶段性认识分析，受益。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608095526,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":15979,"user_name":"ant","can_delete":false,"product_type":"c1","uid":1043816,"ip_address":"","ucode":"27BAF20679679A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ed/68/737f97c8.jpg","comment_is_top":false,"comment_ctime":1531704530,"is_pvip":false,"replies":[{"id":5520,"content":"用户会用脚投票的😂😂","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1531720322,"ip_address":"","comment_id":15979,"utype":1}],"discussion_count":4,"race_medal":0,"score":2,"product_id":100006601,"comment_content":"我们是一家社交公司，后端加厚的演变符合dubbo官网的那张图，在Mvc架构坚持了一年后，业务越来越大，工程越来越臃肿。后面我们一致同意进行服务话，开始用了dubbo。后面由于决策层的原因没有上，后面来了个架构师，又重启了服务拆分，到现在已经用于生产。我们使用的是Spring cloud，现在拆分暴露了很多问题:\n1、个别服务没有熔断出来，出现过雪崩效应\n2、服务拆分过细，服务调用链过长\n3、开发人员能力不一样，代码水平不一样\n4、没有监控措施\n5、每个服务部署多台，日志查询就会死人的感觉\n6、开发过程中经常出现访问不到该访问的接口，这是因为开发人员经常启动本地服务，就会导致30%的概率访问不到\n7、使用了不合理的持久层框架，使用了JPA访问\n大概就有上面的问题，总之微服务不是银弹，用得不好会发现无穷无尽的坑。当然，出现问题解决问题就是了。唯一的就像CEO说的: 你们他妈的是完全在拿用户当小白鼠使用","like_count":37,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420638,"discussion_content":"他们架构师是水货😂你的理解和分析是对的，后一篇就讲了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1531792461,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1111917,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f7/6d/1f6614b8.jpg","nickname":"哭哭吓唬你","note":"","ucode":"93C760B67B8E84","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":597354,"discussion_content":"您好，请问有没有服务编排的相关实战资料或讲解，一直比较迷惑是怎么进行的？是直接编码还是用类似bpm这种还是其他？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1671715104,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":420638,"ip_address":"北京","group_id":0},"score":597354,"extra":""}]},{"author":{"id":1394541,"avatar":"https://static001.geekbang.org/account/avatar/00/15/47/6d/f818a06d.jpg","nickname":"一拳超人","note":"","ucode":"22A3CB97DCAD25","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":626348,"discussion_content":"mark\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1692839240,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"四川","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":3216493,"avatar":"","nickname":"舒秉亮","note":"","ucode":"A723B37C82EC46","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":595439,"discussion_content":"mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1670075349,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1007271,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5e/a7/8dc374e2.jpg","nickname":"BitInit","note":"","ucode":"BDDDA0F51B1EFB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":587361,"discussion_content":"Mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662993116,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"浙江","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1293551,"avatar":"https://static001.geekbang.org/account/avatar/00/13/bc/ef/98550b85.jpg","nickname":"云彩＆草原","note":"","ucode":"6AEA686202F1CC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":557930,"discussion_content":"M","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1648027965,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1918112,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/44/a0/16d0d300.jpg","nickname":"ZHANGPING","note":"","ucode":"7108812981C996","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":384406,"discussion_content":"点赞","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626574539,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1095857,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/bvj76PmeUvW8kokyu91IZWuRATKmabibDWbzAj2TajeEic7WvKCJOLaOh6jibEmdQ36EO3sBUZ0HibAiapsrZo64U8w/132","nickname":"梦倚栏杆","note":"","ucode":"BDEB97F2822445","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":367089,"discussion_content":"所以架构还包含运维的内容？那就是整个技术部的迭代，基础组件，运维，测试能力都要跟的上？？？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618266919,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1922378,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/55/4a/8a841200.jpg","nickname":"ACK","note":"","ucode":"C5D09B18DEF151","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":358767,"discussion_content":"受益。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616047342,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1336475,"avatar":"https://static001.geekbang.org/account/avatar/00/14/64/9b/d1ab239e.jpg","nickname":"J.Smile","note":"","ucode":"C4D98DFDBF7584","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":335117,"discussion_content":"很棒的阶段性认识分析，受益。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608095526,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":20479,"user_name":"三棱镜","can_delete":false,"product_type":"c1","uid":1155543,"ip_address":"","ucode":"14833F759F8423","user_header":"https://static001.geekbang.org/account/avatar/00/11/a1/d7/fb836ffc.jpg","comment_is_top":false,"comment_ctime":1534470881,"is_pvip":false,"replies":[{"id":7194,"content":"感同身受啊😄","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1534514381,"ip_address":"","comment_id":20479,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100006601,"comment_content":"我们目前全部微服务，踩坑踩了不少，拆分服务同时要把自动化运维系统和多维度监控系统，包括问题定位跟踪系统建立起来，要不然拆了就是噩梦。","like_count":22,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":422265,"discussion_content":"感同身受啊😄","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1534514381,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1067591,"avatar":"https://static001.geekbang.org/account/avatar/00/10/4a/47/38520c68.jpg","nickname":"邱理","note":"","ucode":"9FEC42B0B47116","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":13873,"discussion_content":"没有链路跟踪、统一日志处理等基础服务的微服务简直是噩梦。 出了问题都瞎了，只能一层层往下查，无法快速定位问题。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1568710635,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":16053,"user_name":"凡凡","can_delete":false,"product_type":"c1","uid":1056142,"ip_address":"","ucode":"134C1E1E6B22BF","user_header":"https://static001.geekbang.org/account/avatar/00/10/1d/8e/0a546871.jpg","comment_is_top":false,"comment_ctime":1531753326,"is_pvip":false,"replies":[{"id":5567,"content":"把HTTP转RPC做成规则，别硬编码每个接口，例如，规定HTTP URL为&#47;service&#47;interface&#47;method?para1=xxx&amp;para2=yyy","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1531792211,"ip_address":"","comment_id":16053,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100006601,"comment_content":"说到微服务，切分的粒度和基础设施都致关重要。\n\n经历的项目有创业初期的单体服务，也有不太完善的服务切分的系统，也有微服务基础设施相对完善的公司。\n\n单体服务致命就致命在随着项目的发展，项目会越来越臃肿，越不利于扩展开发。\n\n微服务过程怕就怕基础不完善，人员配备不够盲目切分，导致工程师开发和维护的战线拉长，特别疲惫和泄气，容易产生一种抱怨的大气氛，从而导致微服务失败，重新合并一部分服务。\n\n微服务做的好的，也有所经历，公司的基础设施完全云化和统一管理，申请几台机器，一套缓存集群，一套mq，sql&#47;nosql…特别容易，工程师愿意建独立的工程，因为很容易构建和部署。这种感觉有点像svn和git，git建分支特别轻量，大家都愿意用分支管理自己的代码，迭代开发，应急处理都能自由切换，得心应手。\n\n现在遇到一个问题，就是微服务内部系统大多使用rpc，但对接外部系统，或者跨外网传输到客户端就需要http-rest类的协议。也就是我们常说的网关，如果是纯http就很容易做到通用的转发机制，但是http转rpc就不知道有什么方式可以做到通用转发了，内部每增加一个rpc，网关就需要增加一个对应的服务处理逻辑。不知道，这个问题，有没有好的解决办法？","like_count":17,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":422265,"discussion_content":"感同身受啊😄","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1534514381,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1067591,"avatar":"https://static001.geekbang.org/account/avatar/00/10/4a/47/38520c68.jpg","nickname":"邱理","note":"","ucode":"9FEC42B0B47116","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":13873,"discussion_content":"没有链路跟踪、统一日志处理等基础服务的微服务简直是噩梦。 出了问题都瞎了，只能一层层往下查，无法快速定位问题。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1568710635,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":49203,"user_name":"木头旮瘩","can_delete":false,"product_type":"c1","uid":1243119,"ip_address":"","ucode":"33FD0A8598B91E","user_header":"","comment_is_top":false,"comment_ctime":1544621613,"is_pvip":false,"replies":[{"id":17764,"content":"你可以去改造他们😂","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1544679647,"ip_address":"","comment_id":49203,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100006601,"comment_content":"让我想起了一次面试经历，一家小公司，技术团队大概7 8个人，然后他们要进行微服务架构改造，我问他们:你们这样满足康威定理么？他们一脸懵逼……我就果断闪人了","like_count":16,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432526,"discussion_content":"你可以去改造他们😂","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544679647,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1592279,"avatar":"https://static001.geekbang.org/account/avatar/00/18/4b/d7/f46c6dfd.jpg","nickname":"William Ning","note":"","ucode":"4DB8D05E69E5F3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":569299,"discussion_content":"康威定律是马尔文·康威1967提出的：\n“设计系统的架构受制于产生这些设计的组织的沟通结构。”\n通俗的来讲：产品必然是其（人员）组织沟通结构的缩影。\nhttps://zhuanlan.zhihu.com/p/359452953","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1651397693,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":15812,"user_name":"正是那朵玫瑰","can_delete":false,"product_type":"c1","uid":1048261,"ip_address":"","ucode":"73D630B654573F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fe/c5/3467cf94.jpg","comment_is_top":false,"comment_ctime":1531535531,"is_pvip":false,"replies":[{"id":5537,"content":"spring全家桶，你值得拥有😂","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1531721768,"ip_address":"","comment_id":15812,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100006601,"comment_content":"我们的业务也算是微服务吧，\t接手项目时，已经有好多服务，主要采用的语言有java，php，nodejs，存在以下问题：\n1、没有一个统一的网关服务，前端请求后端服务都需要后端的服务A来充当安全校验，权限校验等，A服务充当了多重职责，变的职责不明确了，后来抽出网关系统，负责平台统一的流量入口。在构建微服务网关系统是至关重要的。\n2、监控系统不完善，调用链跟踪，异常报警都不完善，对微服务是巨坑，查找问题如同一场噩梦，调用链很长，一旦发生异常不知道到底哪里出现问题，得一个一个去找。后来慢慢完善，变得好了很多，问题很快定位。\n3、加入网关后，没有一个统一的服务发现注册中心，网关的路由依靠人工手动配置，变的很麻烦，也很容易出错。后来引入consul，得到改善。","like_count":13,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432526,"discussion_content":"你可以去改造他们😂","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544679647,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1592279,"avatar":"https://static001.geekbang.org/account/avatar/00/18/4b/d7/f46c6dfd.jpg","nickname":"William Ning","note":"","ucode":"4DB8D05E69E5F3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":569299,"discussion_content":"康威定律是马尔文·康威1967提出的：\n“设计系统的架构受制于产生这些设计的组织的沟通结构。”\n通俗的来讲：产品必然是其（人员）组织沟通结构的缩影。\nhttps://zhuanlan.zhihu.com/p/359452953","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1651397693,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":15883,"user_name":"子清","can_delete":false,"product_type":"c1","uid":1106345,"ip_address":"","ucode":"2E2E82AD5B1680","user_header":"https://static001.geekbang.org/account/avatar/00/10/e1/a9/64a2fe3a.jpg","comment_is_top":false,"comment_ctime":1531588136,"is_pvip":false,"replies":[{"id":5531,"content":"让你们架构师来订阅架构专栏😂😂😂","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1531721356,"ip_address":"","comment_id":15883,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100006601,"comment_content":"我们公司的平台就是使用微服务架构，十多二十个微服务，但是没有自动化部署，监控，自动化测试这些，而且每次报错日志也特别难找，但是我们那架构师却不重视这些，只想继续升级平台的功能","like_count":10,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420586,"discussion_content":"让你们架构师来订阅架构专栏😂😂😂","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1531721356,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":268613,"user_name":"修仙中","can_delete":false,"product_type":"c1","uid":2369112,"ip_address":"","ucode":"A139C0EB3F2F52","user_header":"https://static001.geekbang.org/account/avatar/00/24/26/58/141fd7df.jpg","comment_is_top":false,"comment_ctime":1608273328,"is_pvip":false,"replies":[{"id":97507,"content":"最后的结局让人猝不及防😂😂","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1608370278,"ip_address":"","comment_id":268613,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100006601,"comment_content":"我们之前5个人的小团队，老板一拍脑袋玩起了微服务。整了spring cloud那一套全家桶：\n现有业务拆拆拆，什么注册中心，配置中心，链路追踪，网关，ELK统统往系统里面堆。\n主要的带来了以下问题：\n1、运维成本过高，部署物数量多、监控进程多导致整体运维复杂度提升。\n2、接口大量的兼容版本\n3、网络延迟，服务容错，可用性，负载复杂性大大提升\n4、还引入了分布式事务\n团队没有运维，我们只能硬着头皮上，自己用docker搭redis集群，mysql集群，mq集群，es集群\n最终因为不够钱买服务器，整个叫停了，哈哈哈哈哈","like_count":8,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420586,"discussion_content":"让你们架构师来订阅架构专栏😂😂😂","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1531721356,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":24961,"user_name":"Jussi Lee","can_delete":false,"product_type":"c1","uid":1211190,"ip_address":"","ucode":"F2F5948CCD52A2","user_header":"https://static001.geekbang.org/account/avatar/00/12/7b/36/fd46331c.jpg","comment_is_top":false,"comment_ctime":1537233633,"is_pvip":false,"replies":[{"id":9257,"content":"很好的案例👍","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1537342172,"ip_address":"","comment_id":24961,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100006601,"comment_content":"我们项目之前是把数据采集，和展示都是我们Java组去写的。后面公司为了统一，把采集部分交给了.net组。我们Java只负责数据展示。但是我们这边又按照领导的要求把整个业务拆分为模板解析层-》api层——》终端层。现在每次最烦的事就是找bug。一直感觉现阶段我们的任务和目标没有这么庞大，这与架构中的简单和合适原则想违背。搞的整个项目组一直在反复的开发工作中。都很心累","like_count":8,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":511988,"discussion_content":"最后的结局让人猝不及防😂😂","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608370278,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2950644,"avatar":"","nickname":"Geek_5e3dd1","note":"","ucode":"5849154880BB8C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":566816,"discussion_content":"我们公司的服务器甲方提供，所以无需成本考虑","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650767673,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1006735,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5c/8f/551b5624.jpg","nickname":"小可","note":"","ucode":"8834AF621FA67D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":356169,"discussion_content":"真是笑死人","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615543838,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":48567,"user_name":"乘风","can_delete":false,"product_type":"c1","uid":1115724,"ip_address":"","ucode":"0420C5535DACB7","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLwSoTjHPX5tm4whBSfoZLX6toZxrZGUaLABQywKNf4MDc9toK3QSV7Z99ATcGicFCysoleQ5ISzmw/132","comment_is_top":false,"comment_ctime":1544489846,"is_pvip":false,"replies":[{"id":17770,"content":"是的，粒度太重要了","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1544679820,"ip_address":"","comment_id":48567,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100006601,"comment_content":"16年时，架构师引入了微服务架构，架构设计分为三层：网关层、业务处理层、数据处理层（getaway-&gt;ls&gt;ds），自上而下依赖，业务层之间也互相依赖，构建过程中发现引入了分布式事务和调用链长（调用链的消耗时间无法接受），经常无故报错，定位问题慢，测试复杂等问题，而我们的大多数业务相对简单，所以重新划分服务粒度，分为两层：网关层：提供路由功能，业务处理层：处理请求，业务层中间可以相互调用，当出现有出现分布式事务时，采取MQ或者更新状态的方式解决，如果是充值+业务订单的这种会直接在一个事务里处理（其实这里就混乱一点了），层与层之间没有完全隔离，但是将调用链缩短，我觉得采用微服务架构确实解决了单体应用的一些问题，如资源问题（但消耗资源是比以前多的）、耦合问题、快速迭代问题，服务与服务的职责更加清晰，不同的服务粒度设计的系统是天差地别的。","like_count":7},{"had_liked":false,"id":102262,"user_name":"Daniel大东","can_delete":false,"product_type":"c1","uid":1028078,"ip_address":"","ucode":"0F1AD92F7396D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/af/ee/5235ebfa.jpg","comment_is_top":false,"comment_ctime":1560171594,"is_pvip":false,"replies":[{"id":37206,"content":"我跟编辑聊聊看","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1560324432,"ip_address":"","comment_id":102262,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100006601,"comment_content":"能否来一篇中台战略和微服务的文章？","like_count":6,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":453323,"discussion_content":"我跟编辑聊聊看","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560324432,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":37561,"user_name":"冬阳(Wolfer Chen)","can_delete":false,"product_type":"c1","uid":1081324,"ip_address":"","ucode":"AB45667A1411CA","user_header":"https://static001.geekbang.org/account/avatar/00/10/7f/ec/6cbc04d3.jpg","comment_is_top":false,"comment_ctime":1541640658,"is_pvip":false,"replies":[{"id":13615,"content":"是的，康威定律和微服务拆分是相关的","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1541752121,"ip_address":"","comment_id":37561,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100006601,"comment_content":"我个人比较认同康威定律，微服务的拆分粒度一定要和组织结构匹配起来，组织结构和开发管理模式是微服务粒度的最重要参考指标之一。","like_count":6,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":428401,"discussion_content":"是的，康威定律和微服务拆分是相关的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1541752121,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1688187,"avatar":"https://static001.geekbang.org/account/avatar/00/19/c2/7b/8194cbab.jpg","nickname":"Cyrus","note":"","ucode":"8D362E2F5A2C1D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":391277,"discussion_content":"组织架构是有业务决定的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630386299,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":20910,"user_name":"hello","can_delete":false,"product_type":"c1","uid":1102652,"ip_address":"","ucode":"E04A474CAF6D26","user_header":"https://static001.geekbang.org/account/avatar/00/10/d3/3c/ab6425f7.jpg","comment_is_top":false,"comment_ctime":1534813689,"is_pvip":false,"replies":[{"id":7354,"content":"你们缺少一个真正的架构师😂","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1534823021,"ip_address":"","comment_id":20910,"utype":1}],"discussion_count":4,"race_medal":0,"score":3,"product_id":100006601,"comment_content":"我记得有一次做业务，当时不知道什么原因，整体使用微服务，当时是个新业务，完全从0开始，没有任何用户基础，当时按照业务把服务拆成了7.8个微服务，但没有自动化，服务还是部署在一台机器上，服务之间也没有服务治理，服务之间的调用链很长，开发就4.5个人，定位问题花费时间长，典型的基础服务也跟不上。现在想想，当时团队不知道咋想的，觉得微服务比较新就上了，完全没有考虑到产生的问题。还好后来这块业务黄了。要不然估计坑更多。对于创业公司来说，刚开始的时候，其实一个服务就够了，真等用户上来了，业务有希望了，那时候再上其他架构模式也不迟，忌讳一开始就求新求全，说到底，对于大部分公司来说。技术是为业务服务的。","like_count":6,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":422452,"discussion_content":"你们缺少一个真正的架构师😂","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1534823021,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1737886,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/84/9e/d4c0e2c4.jpg","nickname":"Broadm","note":"","ucode":"BEA06300731AE8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":575176,"discussion_content":"活生生的案例啊, 架构设计必须实事求是,尤其新项目,还没有用户基础的话,切忌直接上微服务, 相反一开始单体,后面用户量上来了,再慢慢演化才是符合实际的","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1654651921,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1102743,"avatar":"https://static001.geekbang.org/account/avatar/00/10/d3/97/953a9f5a.jpg","nickname":"清泉","note":"","ucode":"28EAE68B33A140","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":270804,"discussion_content":"这违反了合适原则，简单原则、演化原则。追求一步到位","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1590057528,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1986739,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/50/b3/9269cd59.jpg","nickname":"LWD","note":"","ucode":"DDA444DB113C01","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":610779,"discussion_content":"没办法，很多技术开发人员纯粹就是面向简历开发，根本不关心公司目前的资源市场情况","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1679748076,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":15940,"user_name":"衣申人","can_delete":false,"product_type":"c1","uid":1115777,"ip_address":"","ucode":"887FE9109B97DE","user_header":"https://static001.geekbang.org/account/avatar/00/11/06/81/28418795.jpg","comment_is_top":false,"comment_ctime":1531664521,"is_pvip":false,"replies":[{"id":5526,"content":"dubbo可以算微服务基础设施的一部分，主要承担服务注册发现等","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1531721012,"ip_address":"","comment_id":15940,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100006601,"comment_content":"同问:dubbo和motan这类rpc框架，是微服务框架？？","like_count":5,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420607,"discussion_content":"dubbo可以算微服务基础设施的一部分，主要承担服务注册发现等","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1531721012,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":15802,"user_name":"narry","can_delete":false,"product_type":"c1","uid":1033576,"ip_address":"","ucode":"B8010C1DE39D08","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c5/68/7afb7304.jpg","comment_is_top":false,"comment_ctime":1531527523,"is_pvip":false,"replies":[{"id":5454,"content":"这还真是第一次听说jvm与docker不兼容，看看是不是有bug\n","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1531533390,"ip_address":"","comment_id":15802,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100006601,"comment_content":"我弄微服务遇到最大的坑，就是jvm与docker兼容性不好，导致每个微服务会消耗过多不必要的内存，我感觉从资源消耗上来说，java开发的微服务都不能算是微服务了，最近在转向go来改造","like_count":5,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420558,"discussion_content":"这还真是第一次听说jvm与docker不兼容，看看是不是有bug\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1531533390,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":95435,"user_name":"Demon.Lee","can_delete":false,"product_type":"c1","uid":1052859,"ip_address":"","ucode":"7F0E5493A8E345","user_header":"https://static001.geekbang.org/account/avatar/00/10/10/bb/f1061601.jpg","comment_is_top":false,"comment_ctime":1558056321,"is_pvip":false,"replies":[{"id":34418,"content":"最终一致性加修复功能，系统无法做到多个业务系统事务实时一致性","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1558353971,"ip_address":"","comment_id":95435,"utype":1}],"discussion_count":4,"race_medal":0,"score":3,"product_id":100006601,"comment_content":"一个服务调用好几个微服务，如何保证事务一致性啊，愁死了，每个微服务属于不同的业务子系统，独立的数据库，数据一致性有好的实践么","like_count":4,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":450457,"discussion_content":"最终一致性加修复功能，系统无法做到多个业务系统事务实时一致性","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558353971,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1002591,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/4c/5f/cd29a602.jpg","nickname":"可乐","note":"","ucode":"C1D62BE5AD5A49","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":651099,"discussion_content":"最终一致性，每个服务保证他自己的一致性，重试、定时任务、记录失败日志、人工介入等","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1726219543,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"湖北","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1737886,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/84/9e/d4c0e2c4.jpg","nickname":"Broadm","note":"","ucode":"BEA06300731AE8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":575179,"discussion_content":"只能保证最终一致性, 消息队列,失败重试,幂等处理,人工补偿","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1654652327,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1082046,"avatar":"https://static001.geekbang.org/account/avatar/00/10/82/be/28e41bcf.jpg","nickname":"寻梦人","note":"","ucode":"C5F14222755ED8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":345,"discussion_content":"我们用的TCC+补偿","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561460365,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":25850,"user_name":"森林","can_delete":false,"product_type":"c1","uid":1071920,"ip_address":"","ucode":"53BD05633B77B6","user_header":"https://static001.geekbang.org/account/avatar/00/10/5b/30/9dcf35ff.jpg","comment_is_top":false,"comment_ctime":1537451252,"is_pvip":false,"replies":[{"id":10989,"content":"如果从历史产生的背景去理解，那就每个人都有自己的理解，没法沟通交流呢😊","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1538870111,"ip_address":"","comment_id":25850,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100006601,"comment_content":"概念是会一直演化的，我相信最初的SOA的概念就是作者所说的形式，但是仅仅从&quot;面向服务的架构&quot;这几个字来说，难道他就不能是微服务的超集么？在微服务名字出来前，用dubbo的系统是怎么称呼其架构的？微服务定义一开始还要求一定是基于Rest的，难道用dubbo的就不是了？所以个人觉得，理解历史可以，但限定于SOA就一定是基于ESB做协议转换联通各个系统的一种架构是不妥的。","like_count":4,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":424433,"discussion_content":"如果从历史产生的背景去理解，那就每个人都有自己的理解，没法沟通交流呢😊","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1538870111,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":19391,"user_name":"旭东(Frank)","can_delete":false,"product_type":"c1","uid":1024486,"ip_address":"","ucode":"176FA629800062","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a1/e6/50da1b2d.jpg","comment_is_top":false,"comment_ctime":1533804171,"is_pvip":false,"replies":[{"id":6760,"content":"SOA是完整的解决方案哦，IBM等公司卖ESB都卖了好多钱😀","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1533885215,"ip_address":"","comment_id":19391,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100006601,"comment_content":"个人觉得SOA只是提出了面向服务的编程，到但没有对服务粒度的定义，以及服务的治理问题做深入的分析。\n提出微服务主要是为了解决面向服务架构后如何能够在实际工程中带来真正的红利。\n微服务对SOA的技术关键点给出了指导意见。\n\n\n微服务对分布式服务的诱惑力的确很大，但做但微服务都不会免费的，需要很多的基础设施来做铺垫和基石，才有可能搞定。\n\n除了基础设施还有很多设计思想需要学习，我觉得DDD就是微服务的绝配。\n\n","like_count":4,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":424433,"discussion_content":"如果从历史产生的背景去理解，那就每个人都有自己的理解，没法沟通交流呢😊","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1538870111,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":23553,"user_name":"孙振超","can_delete":false,"product_type":"c1","uid":1101755,"ip_address":"","ucode":"0F9EABC6125350","user_header":"https://static001.geekbang.org/account/avatar/00/10/cf/bb/22af0e52.jpg","comment_is_top":false,"comment_ctime":1536481500,"is_pvip":false,"replies":[{"id":8554,"content":"spring全家桶，你值得拥有😀","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1536535905,"ip_address":"","comment_id":23553,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100006601,"comment_content":"之前是一个系统承载所有功能，对应几十个开发，每次的发布都会有一个痛苦的冲突解决的过程。\n\n采用微服务首先是理念转变的过程，从一个系统一个数据库切分为多个系统多个数据库，确实会给问题定位排查带上很大的麻烦，每次一个业务功能的更迭需要多个系统共同参与，中间的需求宣讲、排期、联调、确定发布依赖和发布计划增加了不少工作量。\n\n个人认为最为重要的要有包含全方位立体的监控、链路排查、服务依赖、jia包依赖、服务器部署结构等能力的强大的基础设施，这将极大的提升整体效率。","like_count":3,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":421817,"discussion_content":"SOA是完整的解决方案哦，IBM等公司卖ESB都卖了好多钱😀","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1533885215,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1737886,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/84/9e/d4c0e2c4.jpg","nickname":"Broadm","note":"","ucode":"BEA06300731AE8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":575178,"discussion_content":"DDD确实是指导领域建模,领域拆分的利器,但是还需要大量的实战经验,落地很难啊","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1654652161,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":48567,"user_name":"乘风","can_delete":false,"product_type":"c1","uid":1115724,"ip_address":"","ucode":"0420C5535DACB7","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLwSoTjHPX5tm4whBSfoZLX6toZxrZGUaLABQywKNf4MDc9toK3QSV7Z99ATcGicFCysoleQ5ISzmw/132","comment_is_top":false,"comment_ctime":1544489846,"is_pvip":false,"replies":[{"id":17770,"content":"是的，粒度太重要了","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1544679820,"ip_address":"","comment_id":48567,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100006601,"comment_content":"16年时，架构师引入了微服务架构，架构设计分为三层：网关层、业务处理层、数据处理层（getaway-&gt;ls&gt;ds），自上而下依赖，业务层之间也互相依赖，构建过程中发现引入了分布式事务和调用链长（调用链的消耗时间无法接受），经常无故报错，定位问题慢，测试复杂等问题，而我们的大多数业务相对简单，所以重新划分服务粒度，分为两层：网关层：提供路由功能，业务处理层：处理请求，业务层中间可以相互调用，当出现有出现分布式事务时，采取MQ或者更新状态的方式解决，如果是充值+业务订单的这种会直接在一个事务里处理（其实这里就混乱一点了），层与层之间没有完全隔离，但是将调用链缩短，我觉得采用微服务架构确实解决了单体应用的一些问题，如资源问题（但消耗资源是比以前多的）、耦合问题、快速迭代问题，服务与服务的职责更加清晰，不同的服务粒度设计的系统是天差地别的。","like_count":7,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432248,"discussion_content":"是的，粒度太重要了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544679820,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":102262,"user_name":"Daniel大东","can_delete":false,"product_type":"c1","uid":1028078,"ip_address":"","ucode":"0F1AD92F7396D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/af/ee/5235ebfa.jpg","comment_is_top":false,"comment_ctime":1560171594,"is_pvip":false,"replies":[{"id":37206,"content":"我跟编辑聊聊看","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1560324432,"ip_address":"","comment_id":102262,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100006601,"comment_content":"能否来一篇中台战略和微服务的文章？","like_count":6,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":453323,"discussion_content":"我跟编辑聊聊看","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560324432,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":37561,"user_name":"冬阳(Wolfer Chen)","can_delete":false,"product_type":"c1","uid":1081324,"ip_address":"","ucode":"AB45667A1411CA","user_header":"https://static001.geekbang.org/account/avatar/00/10/7f/ec/6cbc04d3.jpg","comment_is_top":false,"comment_ctime":1541640658,"is_pvip":false,"replies":[{"id":13615,"content":"是的，康威定律和微服务拆分是相关的","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1541752121,"ip_address":"","comment_id":37561,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100006601,"comment_content":"我个人比较认同康威定律，微服务的拆分粒度一定要和组织结构匹配起来，组织结构和开发管理模式是微服务粒度的最重要参考指标之一。","like_count":6,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432248,"discussion_content":"是的，粒度太重要了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544679820,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":20910,"user_name":"hello","can_delete":false,"product_type":"c1","uid":1102652,"ip_address":"","ucode":"E04A474CAF6D26","user_header":"https://static001.geekbang.org/account/avatar/00/10/d3/3c/ab6425f7.jpg","comment_is_top":false,"comment_ctime":1534813689,"is_pvip":false,"replies":[{"id":7354,"content":"你们缺少一个真正的架构师😂","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1534823021,"ip_address":"","comment_id":20910,"utype":1}],"discussion_count":4,"race_medal":0,"score":3,"product_id":100006601,"comment_content":"我记得有一次做业务，当时不知道什么原因，整体使用微服务，当时是个新业务，完全从0开始，没有任何用户基础，当时按照业务把服务拆成了7.8个微服务，但没有自动化，服务还是部署在一台机器上，服务之间也没有服务治理，服务之间的调用链很长，开发就4.5个人，定位问题花费时间长，典型的基础服务也跟不上。现在想想，当时团队不知道咋想的，觉得微服务比较新就上了，完全没有考虑到产生的问题。还好后来这块业务黄了。要不然估计坑更多。对于创业公司来说，刚开始的时候，其实一个服务就够了，真等用户上来了，业务有希望了，那时候再上其他架构模式也不迟，忌讳一开始就求新求全，说到底，对于大部分公司来说。技术是为业务服务的。","like_count":6,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":428401,"discussion_content":"是的，康威定律和微服务拆分是相关的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1541752121,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1688187,"avatar":"https://static001.geekbang.org/account/avatar/00/19/c2/7b/8194cbab.jpg","nickname":"Cyrus","note":"","ucode":"8D362E2F5A2C1D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":391277,"discussion_content":"组织架构是有业务决定的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630386299,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":15940,"user_name":"衣申人","can_delete":false,"product_type":"c1","uid":1115777,"ip_address":"","ucode":"887FE9109B97DE","user_header":"https://static001.geekbang.org/account/avatar/00/11/06/81/28418795.jpg","comment_is_top":false,"comment_ctime":1531664521,"is_pvip":false,"replies":[{"id":5526,"content":"dubbo可以算微服务基础设施的一部分，主要承担服务注册发现等","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1531721012,"ip_address":"","comment_id":15940,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100006601,"comment_content":"同问:dubbo和motan这类rpc框架，是微服务框架？？","like_count":5,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":422452,"discussion_content":"你们缺少一个真正的架构师😂","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1534823021,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1737886,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/84/9e/d4c0e2c4.jpg","nickname":"Broadm","note":"","ucode":"BEA06300731AE8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":575176,"discussion_content":"活生生的案例啊, 架构设计必须实事求是,尤其新项目,还没有用户基础的话,切忌直接上微服务, 相反一开始单体,后面用户量上来了,再慢慢演化才是符合实际的","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1654651921,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1102743,"avatar":"https://static001.geekbang.org/account/avatar/00/10/d3/97/953a9f5a.jpg","nickname":"清泉","note":"","ucode":"28EAE68B33A140","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":270804,"discussion_content":"这违反了合适原则，简单原则、演化原则。追求一步到位","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1590057528,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1986739,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/50/b3/9269cd59.jpg","nickname":"LWD","note":"","ucode":"DDA444DB113C01","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":610779,"discussion_content":"没办法，很多技术开发人员纯粹就是面向简历开发，根本不关心公司目前的资源市场情况","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1679748076,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":15802,"user_name":"narry","can_delete":false,"product_type":"c1","uid":1033576,"ip_address":"","ucode":"B8010C1DE39D08","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c5/68/7afb7304.jpg","comment_is_top":false,"comment_ctime":1531527523,"is_pvip":false,"replies":[{"id":5454,"content":"这还真是第一次听说jvm与docker不兼容，看看是不是有bug\n","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1531533390,"ip_address":"","comment_id":15802,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100006601,"comment_content":"我弄微服务遇到最大的坑，就是jvm与docker兼容性不好，导致每个微服务会消耗过多不必要的内存，我感觉从资源消耗上来说，java开发的微服务都不能算是微服务了，最近在转向go来改造","like_count":5,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420607,"discussion_content":"dubbo可以算微服务基础设施的一部分，主要承担服务注册发现等","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1531721012,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":95435,"user_name":"Demon.Lee","can_delete":false,"product_type":"c1","uid":1052859,"ip_address":"","ucode":"7F0E5493A8E345","user_header":"https://static001.geekbang.org/account/avatar/00/10/10/bb/f1061601.jpg","comment_is_top":false,"comment_ctime":1558056321,"is_pvip":false,"replies":[{"id":34418,"content":"最终一致性加修复功能，系统无法做到多个业务系统事务实时一致性","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1558353971,"ip_address":"","comment_id":95435,"utype":1}],"discussion_count":4,"race_medal":0,"score":3,"product_id":100006601,"comment_content":"一个服务调用好几个微服务，如何保证事务一致性啊，愁死了，每个微服务属于不同的业务子系统，独立的数据库，数据一致性有好的实践么","like_count":4,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420558,"discussion_content":"这还真是第一次听说jvm与docker不兼容，看看是不是有bug\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1531533390,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":25850,"user_name":"森林","can_delete":false,"product_type":"c1","uid":1071920,"ip_address":"","ucode":"53BD05633B77B6","user_header":"https://static001.geekbang.org/account/avatar/00/10/5b/30/9dcf35ff.jpg","comment_is_top":false,"comment_ctime":1537451252,"is_pvip":false,"replies":[{"id":10989,"content":"如果从历史产生的背景去理解，那就每个人都有自己的理解，没法沟通交流呢😊","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1538870111,"ip_address":"","comment_id":25850,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100006601,"comment_content":"概念是会一直演化的，我相信最初的SOA的概念就是作者所说的形式，但是仅仅从&quot;面向服务的架构&quot;这几个字来说，难道他就不能是微服务的超集么？在微服务名字出来前，用dubbo的系统是怎么称呼其架构的？微服务定义一开始还要求一定是基于Rest的，难道用dubbo的就不是了？所以个人觉得，理解历史可以，但限定于SOA就一定是基于ESB做协议转换联通各个系统的一种架构是不妥的。","like_count":4,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":450457,"discussion_content":"最终一致性加修复功能，系统无法做到多个业务系统事务实时一致性","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558353971,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1002591,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/4c/5f/cd29a602.jpg","nickname":"可乐","note":"","ucode":"C1D62BE5AD5A49","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":651099,"discussion_content":"最终一致性，每个服务保证他自己的一致性，重试、定时任务、记录失败日志、人工介入等","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1726219543,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"湖北","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1737886,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/84/9e/d4c0e2c4.jpg","nickname":"Broadm","note":"","ucode":"BEA06300731AE8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":575179,"discussion_content":"只能保证最终一致性, 消息队列,失败重试,幂等处理,人工补偿","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1654652327,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1082046,"avatar":"https://static001.geekbang.org/account/avatar/00/10/82/be/28e41bcf.jpg","nickname":"寻梦人","note":"","ucode":"C5F14222755ED8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":345,"discussion_content":"我们用的TCC+补偿","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561460365,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":19391,"user_name":"旭东(Frank)","can_delete":false,"product_type":"c1","uid":1024486,"ip_address":"","ucode":"176FA629800062","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a1/e6/50da1b2d.jpg","comment_is_top":false,"comment_ctime":1533804171,"is_pvip":false,"replies":[{"id":6760,"content":"SOA是完整的解决方案哦，IBM等公司卖ESB都卖了好多钱😀","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1533885215,"ip_address":"","comment_id":19391,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100006601,"comment_content":"个人觉得SOA只是提出了面向服务的编程，到但没有对服务粒度的定义，以及服务的治理问题做深入的分析。\n提出微服务主要是为了解决面向服务架构后如何能够在实际工程中带来真正的红利。\n微服务对SOA的技术关键点给出了指导意见。\n\n\n微服务对分布式服务的诱惑力的确很大，但做但微服务都不会免费的，需要很多的基础设施来做铺垫和基石，才有可能搞定。\n\n除了基础设施还有很多设计思想需要学习，我觉得DDD就是微服务的绝配。\n\n","like_count":4,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":421817,"discussion_content":"SOA是完整的解决方案哦，IBM等公司卖ESB都卖了好多钱😀","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1533885215,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1737886,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/84/9e/d4c0e2c4.jpg","nickname":"Broadm","note":"","ucode":"BEA06300731AE8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":575178,"discussion_content":"DDD确实是指导领域建模,领域拆分的利器,但是还需要大量的实战经验,落地很难啊","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1654652161,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":23553,"user_name":"孙振超","can_delete":false,"product_type":"c1","uid":1101755,"ip_address":"","ucode":"0F9EABC6125350","user_header":"https://static001.geekbang.org/account/avatar/00/10/cf/bb/22af0e52.jpg","comment_is_top":false,"comment_ctime":1536481500,"is_pvip":false,"replies":[{"id":8554,"content":"spring全家桶，你值得拥有😀","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1536535905,"ip_address":"","comment_id":23553,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100006601,"comment_content":"之前是一个系统承载所有功能，对应几十个开发，每次的发布都会有一个痛苦的冲突解决的过程。\n\n采用微服务首先是理念转变的过程，从一个系统一个数据库切分为多个系统多个数据库，确实会给问题定位排查带上很大的麻烦，每次一个业务功能的更迭需要多个系统共同参与，中间的需求宣讲、排期、联调、确定发布依赖和发布计划增加了不少工作量。\n\n个人认为最为重要的要有包含全方位立体的监控、链路排查、服务依赖、jia包依赖、服务器部署结构等能力的强大的基础设施，这将极大的提升整体效率。","like_count":3,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423612,"discussion_content":"spring全家桶，你值得拥有😀","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536535905,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":378788,"user_name":"单朋荣","can_delete":false,"product_type":"c1","uid":1272662,"ip_address":"山东","ucode":"8AD121BEDD9675","user_header":"https://static001.geekbang.org/account/avatar/00/13/6b/56/37a4cea7.jpg","comment_is_top":false,"comment_ctime":1690790559,"is_pvip":false,"replies":[{"id":138030,"content":"云原生本身并不只是能用于微服务架构，但微服务架构天生就特别适合云原生，因此可以算目前的最佳实践。","user_name":"作者回复","user_name_real":"编辑","uid":1098920,"ctime":1690853698,"ip_address":"广东","comment_id":378788,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100006601,"comment_content":"云原生算不算是微服务的最佳实践？","like_count":2},{"had_liked":false,"id":362808,"user_name":"Geek_8ddf3c","can_delete":false,"product_type":"c1","uid":3220590,"ip_address":"广东","ucode":"8A6AF32F35A9DF","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKlqvEticcIia5JMNgV8sNcjRv2kXXX35MxID6XKDzoG5ZGIic5gaAoS6ia8qystVwPrDsFB21a9Ft1HA/132","comment_is_top":false,"comment_ctime":1668929871,"is_pvip":false,"replies":[{"id":132051,"content":"云原生时代，微服务基础设施由云厂家搞定，中小公司一样可以用微服务，因为只有拆分了微服务才能发挥云原生的弹性能力","user_name":"作者回复","user_name_real":"编辑","uid":1098920,"ctime":1669342827,"ip_address":"广东","comment_id":362808,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100006601,"comment_content":"微服务过于精细和笨重，不适合中小型公司","like_count":2,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":624684,"discussion_content":"云原生本身并不只是能用于微服务架构，但微服务架构天生就特别适合云原生，因此可以算目前的最佳实践。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1690853698,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":361464,"user_name":"甜宝仙女的专属饲养员","can_delete":false,"product_type":"c1","uid":1443145,"ip_address":"广东","ucode":"6D2039BA22551F","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eozpyAUaM6ra1hqeIsd4v0fulS4zVmxDM3LQyqGo0BFM141QpQnSib6oHdQricGrRxusp5rflGn54ew/132","comment_is_top":false,"comment_ctime":1667527137,"is_pvip":false,"replies":[{"id":131505,"content":"全家桶下来，不熟悉的团队要掉层皮😃","user_name":"作者回复","user_name_real":"编辑","uid":1098920,"ctime":1667636266,"ip_address":"广东","comment_id":361464,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100006601,"comment_content":"没有基建是做不好微服务的，微服务只有两个，一个是书上的几个简单服务的单机玩玩，另一个就是基建上构建的微服务复杂王国","like_count":2,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":594733,"discussion_content":"云原生时代，微服务基础设施由云厂家搞定，中小公司一样可以用微服务，因为只有拆分了微服务才能发挥云原生的弹性能力","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1669342827,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":352583,"user_name":"艺超(鲁鸣)","can_delete":false,"product_type":"c1","uid":1029436,"ip_address":"北京","ucode":"7F749FA543E0F1","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b5/3c/967d7291.jpg","comment_is_top":false,"comment_ctime":1658796805,"is_pvip":false,"replies":[{"id":128341,"content":"级联反应，故障扩散，循环依赖","user_name":"作者回复","user_name_real":"编辑","uid":1098920,"ctime":1659066361,"ip_address":"北京","comment_id":352583,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100006601,"comment_content":"遇到两个典型问题，第一个，由于某个服务响应慢，再加上不合理的重试，导致一系列级联反应，最终整个系统挂掉了。第二个，也是很有意思，A微服务调用B微服务的接口，结果B微服务接口实现中又依赖了A服务，这个问题很容易导致自己把自己打挂的情况发生","like_count":2,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":592722,"discussion_content":"全家桶下来，不熟悉的团队要掉层皮😃","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1667636267,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":20186,"user_name":"joseph.herder💭.","can_delete":false,"product_type":"c1","uid":1006963,"ip_address":"","ucode":"632A743D6B7355","user_header":"https://static001.geekbang.org/account/avatar/00/0f/5d/73/742097e2.jpg","comment_is_top":false,"comment_ctime":1534300278,"is_pvip":false,"replies":[{"id":7131,"content":"目前不算成熟，适合大规模服务节点","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1534388249,"ip_address":"","comment_id":20186,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100006601,"comment_content":"李老师对service mesh怎么看？","like_count":2,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":422142,"discussion_content":"目前不算成熟，适合大规模服务节点","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1534388249,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":15902,"user_name":"波波安","can_delete":false,"product_type":"c1","uid":1002452,"ip_address":"","ucode":"2A677908E5A75D","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4b/d4/b7719327.jpg","comment_is_top":false,"comment_ctime":1531629732,"is_pvip":false,"replies":[{"id":5528,"content":"不是拆分有问题，是配套基础设施有问题","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1531721104,"ip_address":"","comment_id":15902,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100006601,"comment_content":"我们用的是dubbo。最开始系统要快速上线，所以服务拆分的不彻底。订单，商品，店铺等这些服务都没有进行拆分。就把支付和营销两个服务拆分出来了。服务拆分不彻底经常导致一个业务有问题。整个系统都用不了。","like_count":2,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420595,"discussion_content":"不是拆分有问题，是配套基础设施有问题","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1531721104,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":396002,"user_name":"killer","can_delete":false,"product_type":"c1","uid":1047778,"ip_address":"四川","ucode":"E275AD8C4523FA","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/7P4wtgRQt1l0YQlVOtiaUKey2AFZqQCAcABzdCNTP0JR027tkhVkRYgj1iaYF8OlqsE8j6A6icsAvYHIAX8E31WNg/132","comment_is_top":false,"comment_ctime":1732670656,"is_pvip":false,"replies":[{"id":143813,"content":"哇塞，你这是把单体、SOA、微服务架构的坑都踩了一遍了，机会难得，相信你也很有收获 ：）","user_name":"作者回复","user_name_real":"作者","uid":1098920,"ctime":1733217126,"ip_address":"广东","comment_id":396002,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100006601,"comment_content":"我经历了初创公司到公司高速发展再到公司衰退，聊聊我们踩过的坑吧。\n1、团队初期，为了快速验证业务价值，快速上线，整个团队都在单体应用上开发，业务需求较多团队10来个人冲突已经比较严重了，开发--&gt;发布经常遇到合并代码遗漏代码问题；\n\n2、业务发展越来越好发现在单体服务中迭代已经是举步维艰了，这时候想着拆服务，当时觉得微服务很牛逼，但是理解并不深刻。开发语言是golang，所以想了一个骚操作，就是 go get 引包的方式，把其他模块代码逻辑引入造成耦合严重（服务之间调用舍弃了http和rpc），这种方式开发巨快也为我们后来埋下了非常严重的技术债务（一年内我们团队20人发展到了160+个服务）；\n\n3、后来适应公司发展，团队规模缩小，160+的服务落到了我们团队，团队12人。虽然有一些模块不在迭代，但是也根本维护不过来，很多服务不知道啥背景、啥业务，开发一个迭代少则几个服务，多则几十个服务一起发布，研发-&gt;测试-&gt;运维都痛苦不堪；\n\n4、后面发现越来越不对劲，2年时间我做了服务治理，做了服务合并，下线了110+的服务（这段时间真的痛苦，制定目标每周跟进拉着全团队拼命干），到目前为止我们团队剩下40左右服务（有一大批是低价值业务也不迭代了），核心服务不超过15个，后来发现很多成本都降低了，比如：开发测试成本、硬件成本、运维成本等。\n\n微服务拆分的好，一定是可以提升性能、稳定性、研发效率的，但是拆分不好就是煤焦油。。。","like_count":1,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":654662,"discussion_content":"哇塞，你这是把单体、SOA、微服务架构的坑都踩了一遍了，机会难得，相信你也很有收获 ：）","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1733217126,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":383036,"user_name":"陈峰","can_delete":false,"product_type":"c1","uid":3721548,"ip_address":"江苏","ucode":"11F92938308C6C","user_header":"","comment_is_top":false,"comment_ctime":1698334112,"is_pvip":false,"replies":[{"id":139519,"content":"理解到位。\n\n微服务在代码层面类似module，但是在数据存储层面和module不同，数据也是拆分开的，这样进一步导致复杂度大大上升","user_name":"作者回复","user_name_real":"编辑","uid":1098920,"ctime":1698376568,"ip_address":"广东","comment_id":383036,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100006601,"comment_content":"我认为，我在的小团队不适合用微服务，之前只有试水过。\n\n目前我主导的项目，直接完全不考虑微服在做，当然我也hold不住。\n\n在我的观点里\n\n微服在代码组织上，实际上和拆模块没有什么本质的区别，仅仅是为了编码和隔离服务之间的编码影响，完全没必要使用微服务，直接maven拆模块即可。\n\n我认为，微服能写好的前提是，单体项目模块化写法能做到信手拈来。最终的微服实现，代码层面就相当于将模块单独拆分出去。\n\n微服本质上是为了解决一个问题，也就是最初讲的，任务分解，通过任务分解来提高系统的性能。\n\n所以，我认为没有以上需求的场景完全不用拆分微服，而且大多数中小型项目可能集群就可以解决性能需求的话，也没必要拆分微服。\n\n感觉微服对比单纯的计算高性能集群，复杂度会上升特别多。","like_count":1,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":630379,"discussion_content":"理解到位。\n\n微服务在代码层面类似module，但是在数据存储层面和module不同，数据也是拆分开的，这样进一步导致复杂度大大上升","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1698376568,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":370565,"user_name":"拿笔小星","can_delete":false,"product_type":"c1","uid":1193755,"ip_address":"上海","ucode":"D3D8F6A959710D","user_header":"https://static001.geekbang.org/account/avatar/00/12/37/1b/82310e20.jpg","comment_is_top":false,"comment_ctime":1678960376,"is_pvip":false,"replies":[{"id":135235,"content":"非常正确，SOA的系统可能都是不同外包服务商做的，技术也千奇百怪，有Delphi、Java、C#等，数据库也是Oracle、MySQL等","user_name":"作者回复","user_name_real":"编辑","uid":1098920,"ctime":1679047305,"ip_address":"广东","comment_id":370565,"utype":1}],"discussion_count":2,"race_medal":0,"score":4,"product_id":100006601,"comment_content":"总计一下，老师看对不对。\nSOA，更多是思考如何把企业里的众多的异构系统整合起来，互相通信，提高服务效率。因此，设计出了ESB这个组件。他这里的服务更多是指，一个个单体应用。即，每个服务都是可以独立对外提供服务的。我理解，SOA的提出更多是为了解决传统企业的软件服务不好互相协作的问题。出发点是为了解决历史包袱。所以，他是现有了系统，再用SOA去把这些系统整合。\n\n微服务设计基本不需要考虑历史包袱，他是先设计，把大单体应用按业务领域拆分出一个个服务，然后通过BFF层整体对外提供服务。其中的每个领域服务无法独立对外提供服务。然后服务间通过更轻量的通信方式通信即可\n\n","like_count":1,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":609599,"discussion_content":"非常正确，SOA的系统可能都是不同外包服务商做的，技术也千奇百怪，有Delphi、Java、C#等，数据库也是Oracle、MySQL等","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1679047305,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1193755,"avatar":"https://static001.geekbang.org/account/avatar/00/12/37/1b/82310e20.jpg","nickname":"拿笔小星","note":"","ucode":"D3D8F6A959710D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":609366,"discussion_content":"这样看，soa重点是如何整和，微服务重点是如何拆分","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1678961335,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"上海","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":338950,"user_name":"简单猫","can_delete":false,"product_type":"c1","uid":1866485,"ip_address":"","ucode":"EA027D4C344E25","user_header":"https://static001.geekbang.org/account/avatar/00/1c/7a/f5/54a5084b.jpg","comment_is_top":false,"comment_ctime":1647829041,"is_pvip":false,"replies":[{"id":123980,"content":"这个量级的业务，微服务没什么作用，还会有很多坏处。","user_name":"作者回复","user_name_real":"编辑","uid":1098920,"ctime":1648020156,"ip_address":"","comment_id":338950,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100006601,"comment_content":"还是根据实际是业务情况来吧。\n最早是net MVC架构，业务各做各的，后来发现业务有重合，就把业务层抽离了一层 其实也就是说的web api化，同一个业务同一个人维护就好了，而不是每个人都要去了解业务并从新开发一次。后来尝试了一下微服务架构发现完全没必要，业务量集没起来，一共就2台服务器，一台数据库，一台web服务器。分个鬼微服务，个人认为接口化就满足了要求，正好也方便以后真有需求扩展成微服务架构","like_count":1,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":557897,"discussion_content":"这个量级的业务，微服务没什么作用，还会有很多坏处。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1648020156,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":378788,"user_name":"单朋荣","can_delete":false,"product_type":"c1","uid":1272662,"ip_address":"山东","ucode":"8AD121BEDD9675","user_header":"https://static001.geekbang.org/account/avatar/00/13/6b/56/37a4cea7.jpg","comment_is_top":false,"comment_ctime":1690790559,"is_pvip":false,"replies":[{"id":138030,"content":"云原生本身并不只是能用于微服务架构，但微服务架构天生就特别适合云原生，因此可以算目前的最佳实践。","user_name":"作者回复","user_name_real":"编辑","uid":1098920,"ctime":1690853698,"ip_address":"广东","comment_id":378788,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100006601,"comment_content":"云原生算不算是微服务的最佳实践？","like_count":2,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":624684,"discussion_content":"云原生本身并不只是能用于微服务架构，但微服务架构天生就特别适合云原生，因此可以算目前的最佳实践。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1690853698,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":362808,"user_name":"Geek_8ddf3c","can_delete":false,"product_type":"c1","uid":3220590,"ip_address":"广东","ucode":"8A6AF32F35A9DF","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKlqvEticcIia5JMNgV8sNcjRv2kXXX35MxID6XKDzoG5ZGIic5gaAoS6ia8qystVwPrDsFB21a9Ft1HA/132","comment_is_top":false,"comment_ctime":1668929871,"is_pvip":false,"replies":[{"id":132051,"content":"云原生时代，微服务基础设施由云厂家搞定，中小公司一样可以用微服务，因为只有拆分了微服务才能发挥云原生的弹性能力","user_name":"作者回复","user_name_real":"编辑","uid":1098920,"ctime":1669342827,"ip_address":"广东","comment_id":362808,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100006601,"comment_content":"微服务过于精细和笨重，不适合中小型公司","like_count":2,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":594733,"discussion_content":"云原生时代，微服务基础设施由云厂家搞定，中小公司一样可以用微服务，因为只有拆分了微服务才能发挥云原生的弹性能力","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1669342827,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":361464,"user_name":"甜宝仙女的专属饲养员","can_delete":false,"product_type":"c1","uid":1443145,"ip_address":"广东","ucode":"6D2039BA22551F","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eozpyAUaM6ra1hqeIsd4v0fulS4zVmxDM3LQyqGo0BFM141QpQnSib6oHdQricGrRxusp5rflGn54ew/132","comment_is_top":false,"comment_ctime":1667527137,"is_pvip":false,"replies":[{"id":131505,"content":"全家桶下来，不熟悉的团队要掉层皮😃","user_name":"作者回复","user_name_real":"编辑","uid":1098920,"ctime":1667636266,"ip_address":"广东","comment_id":361464,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100006601,"comment_content":"没有基建是做不好微服务的，微服务只有两个，一个是书上的几个简单服务的单机玩玩，另一个就是基建上构建的微服务复杂王国","like_count":2,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":592722,"discussion_content":"全家桶下来，不熟悉的团队要掉层皮😃","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1667636267,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":352583,"user_name":"艺超(鲁鸣)","can_delete":false,"product_type":"c1","uid":1029436,"ip_address":"北京","ucode":"7F749FA543E0F1","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b5/3c/967d7291.jpg","comment_is_top":false,"comment_ctime":1658796805,"is_pvip":false,"replies":[{"id":128341,"content":"级联反应，故障扩散，循环依赖","user_name":"作者回复","user_name_real":"编辑","uid":1098920,"ctime":1659066361,"ip_address":"北京","comment_id":352583,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100006601,"comment_content":"遇到两个典型问题，第一个，由于某个服务响应慢，再加上不合理的重试，导致一系列级联反应，最终整个系统挂掉了。第二个，也是很有意思，A微服务调用B微服务的接口，结果B微服务接口实现中又依赖了A服务，这个问题很容易导致自己把自己打挂的情况发生","like_count":2,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581915,"discussion_content":"级联反应，故障扩散，循环依赖","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659066361,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":20186,"user_name":"joseph.herder💭.","can_delete":false,"product_type":"c1","uid":1006963,"ip_address":"","ucode":"632A743D6B7355","user_header":"https://static001.geekbang.org/account/avatar/00/0f/5d/73/742097e2.jpg","comment_is_top":false,"comment_ctime":1534300278,"is_pvip":false,"replies":[{"id":7131,"content":"目前不算成熟，适合大规模服务节点","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1534388249,"ip_address":"","comment_id":20186,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100006601,"comment_content":"李老师对service mesh怎么看？","like_count":2,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581915,"discussion_content":"级联反应，故障扩散，循环依赖","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659066361,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":15902,"user_name":"波波安","can_delete":false,"product_type":"c1","uid":1002452,"ip_address":"","ucode":"2A677908E5A75D","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4b/d4/b7719327.jpg","comment_is_top":false,"comment_ctime":1531629732,"is_pvip":false,"replies":[{"id":5528,"content":"不是拆分有问题，是配套基础设施有问题","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1531721104,"ip_address":"","comment_id":15902,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100006601,"comment_content":"我们用的是dubbo。最开始系统要快速上线，所以服务拆分的不彻底。订单，商品，店铺等这些服务都没有进行拆分。就把支付和营销两个服务拆分出来了。服务拆分不彻底经常导致一个业务有问题。整个系统都用不了。","like_count":2,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":422142,"discussion_content":"目前不算成熟，适合大规模服务节点","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1534388249,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":396002,"user_name":"killer","can_delete":false,"product_type":"c1","uid":1047778,"ip_address":"四川","ucode":"E275AD8C4523FA","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/7P4wtgRQt1l0YQlVOtiaUKey2AFZqQCAcABzdCNTP0JR027tkhVkRYgj1iaYF8OlqsE8j6A6icsAvYHIAX8E31WNg/132","comment_is_top":false,"comment_ctime":1732670656,"is_pvip":false,"replies":[{"id":143813,"content":"哇塞，你这是把单体、SOA、微服务架构的坑都踩了一遍了，机会难得，相信你也很有收获 ：）","user_name":"作者回复","user_name_real":"作者","uid":1098920,"ctime":1733217126,"ip_address":"广东","comment_id":396002,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100006601,"comment_content":"我经历了初创公司到公司高速发展再到公司衰退，聊聊我们踩过的坑吧。\n1、团队初期，为了快速验证业务价值，快速上线，整个团队都在单体应用上开发，业务需求较多团队10来个人冲突已经比较严重了，开发--&gt;发布经常遇到合并代码遗漏代码问题；\n\n2、业务发展越来越好发现在单体服务中迭代已经是举步维艰了，这时候想着拆服务，当时觉得微服务很牛逼，但是理解并不深刻。开发语言是golang，所以想了一个骚操作，就是 go get 引包的方式，把其他模块代码逻辑引入造成耦合严重（服务之间调用舍弃了http和rpc），这种方式开发巨快也为我们后来埋下了非常严重的技术债务（一年内我们团队20人发展到了160+个服务）；\n\n3、后来适应公司发展，团队规模缩小，160+的服务落到了我们团队，团队12人。虽然有一些模块不在迭代，但是也根本维护不过来，很多服务不知道啥背景、啥业务，开发一个迭代少则几个服务，多则几十个服务一起发布，研发-&gt;测试-&gt;运维都痛苦不堪；\n\n4、后面发现越来越不对劲，2年时间我做了服务治理，做了服务合并，下线了110+的服务（这段时间真的痛苦，制定目标每周跟进拉着全团队拼命干），到目前为止我们团队剩下40左右服务（有一大批是低价值业务也不迭代了），核心服务不超过15个，后来发现很多成本都降低了，比如：开发测试成本、硬件成本、运维成本等。\n\n微服务拆分的好，一定是可以提升性能、稳定性、研发效率的，但是拆分不好就是煤焦油。。。","like_count":1,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420595,"discussion_content":"不是拆分有问题，是配套基础设施有问题","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1531721104,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":383036,"user_name":"陈峰","can_delete":false,"product_type":"c1","uid":3721548,"ip_address":"江苏","ucode":"11F92938308C6C","user_header":"","comment_is_top":false,"comment_ctime":1698334112,"is_pvip":false,"replies":[{"id":139519,"content":"理解到位。\n\n微服务在代码层面类似module，但是在数据存储层面和module不同，数据也是拆分开的，这样进一步导致复杂度大大上升","user_name":"作者回复","user_name_real":"编辑","uid":1098920,"ctime":1698376568,"ip_address":"广东","comment_id":383036,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100006601,"comment_content":"我认为，我在的小团队不适合用微服务，之前只有试水过。\n\n目前我主导的项目，直接完全不考虑微服在做，当然我也hold不住。\n\n在我的观点里\n\n微服在代码组织上，实际上和拆模块没有什么本质的区别，仅仅是为了编码和隔离服务之间的编码影响，完全没必要使用微服务，直接maven拆模块即可。\n\n我认为，微服能写好的前提是，单体项目模块化写法能做到信手拈来。最终的微服实现，代码层面就相当于将模块单独拆分出去。\n\n微服本质上是为了解决一个问题，也就是最初讲的，任务分解，通过任务分解来提高系统的性能。\n\n所以，我认为没有以上需求的场景完全不用拆分微服，而且大多数中小型项目可能集群就可以解决性能需求的话，也没必要拆分微服。\n\n感觉微服对比单纯的计算高性能集群，复杂度会上升特别多。","like_count":1,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":654662,"discussion_content":"哇塞，你这是把单体、SOA、微服务架构的坑都踩了一遍了，机会难得，相信你也很有收获 ：）","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1733217126,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":370565,"user_name":"拿笔小星","can_delete":false,"product_type":"c1","uid":1193755,"ip_address":"上海","ucode":"D3D8F6A959710D","user_header":"https://static001.geekbang.org/account/avatar/00/12/37/1b/82310e20.jpg","comment_is_top":false,"comment_ctime":1678960376,"is_pvip":false,"replies":[{"id":135235,"content":"非常正确，SOA的系统可能都是不同外包服务商做的，技术也千奇百怪，有Delphi、Java、C#等，数据库也是Oracle、MySQL等","user_name":"作者回复","user_name_real":"编辑","uid":1098920,"ctime":1679047305,"ip_address":"广东","comment_id":370565,"utype":1}],"discussion_count":2,"race_medal":0,"score":4,"product_id":100006601,"comment_content":"总计一下，老师看对不对。\nSOA，更多是思考如何把企业里的众多的异构系统整合起来，互相通信，提高服务效率。因此，设计出了ESB这个组件。他这里的服务更多是指，一个个单体应用。即，每个服务都是可以独立对外提供服务的。我理解，SOA的提出更多是为了解决传统企业的软件服务不好互相协作的问题。出发点是为了解决历史包袱。所以，他是现有了系统，再用SOA去把这些系统整合。\n\n微服务设计基本不需要考虑历史包袱，他是先设计，把大单体应用按业务领域拆分出一个个服务，然后通过BFF层整体对外提供服务。其中的每个领域服务无法独立对外提供服务。然后服务间通过更轻量的通信方式通信即可\n\n","like_count":1,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":630379,"discussion_content":"理解到位。\n\n微服务在代码层面类似module，但是在数据存储层面和module不同，数据也是拆分开的，这样进一步导致复杂度大大上升","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1698376568,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":338950,"user_name":"简单猫","can_delete":false,"product_type":"c1","uid":1866485,"ip_address":"","ucode":"EA027D4C344E25","user_header":"https://static001.geekbang.org/account/avatar/00/1c/7a/f5/54a5084b.jpg","comment_is_top":false,"comment_ctime":1647829041,"is_pvip":false,"replies":[{"id":123980,"content":"这个量级的业务，微服务没什么作用，还会有很多坏处。","user_name":"作者回复","user_name_real":"编辑","uid":1098920,"ctime":1648020156,"ip_address":"","comment_id":338950,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100006601,"comment_content":"还是根据实际是业务情况来吧。\n最早是net MVC架构，业务各做各的，后来发现业务有重合，就把业务层抽离了一层 其实也就是说的web api化，同一个业务同一个人维护就好了，而不是每个人都要去了解业务并从新开发一次。后来尝试了一下微服务架构发现完全没必要，业务量集没起来，一共就2台服务器，一台数据库，一台web服务器。分个鬼微服务，个人认为接口化就满足了要求，正好也方便以后真有需求扩展成微服务架构","like_count":1,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":609599,"discussion_content":"非常正确，SOA的系统可能都是不同外包服务商做的，技术也千奇百怪，有Delphi、Java、C#等，数据库也是Oracle、MySQL等","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1679047305,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1193755,"avatar":"https://static001.geekbang.org/account/avatar/00/12/37/1b/82310e20.jpg","nickname":"拿笔小星","note":"","ucode":"D3D8F6A959710D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":609366,"discussion_content":"这样看，soa重点是如何整和，微服务重点是如何拆分","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1678961335,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"上海","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":306697,"user_name":"大叶枫","can_delete":false,"product_type":"c1","uid":1153702,"ip_address":"","ucode":"224AC5533889AD","user_header":"https://static001.geekbang.org/account/avatar/00/11/9a/a6/3bddb98c.jpg","comment_is_top":false,"comment_ctime":1628672034,"is_pvip":false,"replies":[{"id":111067,"content":"微服务基础框架现在已经比ESB还复杂了\n","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1628688589,"ip_address":"","comment_id":306697,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100006601,"comment_content":"SOA去掉ESB的方式，采用微服务去搞，是主流互联网企业的方案选型。基本都会有服务治理框架、流量调度层、持续集成、部署、交付等devOps的技术体系产生。。不然做起来太痛苦了。","like_count":1},{"had_liked":false,"id":275711,"user_name":"Geek_9b9530","can_delete":false,"product_type":"c1","uid":2146381,"ip_address":"","ucode":"23498B3944F97C","user_header":"","comment_is_top":false,"comment_ctime":1611651135,"is_pvip":false,"replies":[{"id":100071,"content":"然后发现掉到坑里了 ：）","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1611668388,"ip_address":"","comment_id":275711,"utype":1}],"discussion_count":2,"race_medal":0,"score":5,"product_id":100006601,"comment_content":"很多时候，为了微服务而微服务，客户不懂觉得牛逼，团队想要练手学习，就上了微服务。","like_count":1,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":524877,"discussion_content":"微服务基础框架现在已经比ESB还复杂了\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628688589,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":26041,"user_name":"小寞子。(≥3≤)","can_delete":false,"product_type":"c1","uid":1206545,"ip_address":"","ucode":"6D978BDCBB2862","user_header":"https://static001.geekbang.org/account/avatar/00/12/69/11/831cec7d.jpg","comment_is_top":false,"comment_ctime":1537492865,"is_pvip":false,"replies":[{"id":9564,"content":"是的，istio就是想屏蔽微服务的基础设施，让业务系统不需要感知基础设施。\n\nbussiness可大可小，甚至可以比soa还大，因此不要这样理解微服务","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1537542142,"ip_address":"","comment_id":26041,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100006601,"comment_content":"我看现在istio还有 kubernetes好像就是为了解决上面微服务的毛病的。 包括服务之间的关系 自动化测试部署，服务可视化差错。容错。熔断等等。 。 还有关于soa和微服务的区别，有个说法是 soa基于企业系统差分，微服务基于business服务拆分","like_count":1,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":514447,"discussion_content":"然后发现掉到坑里了 ：）","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611668388,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1918112,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/44/a0/16d0d300.jpg","nickname":"ZHANGPING","note":"","ucode":"7108812981C996","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":384411,"discussion_content":"现实了\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626576032,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":17598,"user_name":"Joy","can_delete":false,"product_type":"c1","uid":1117940,"ip_address":"","ucode":"2EEB69F47B88BF","user_header":"https://static001.geekbang.org/account/avatar/00/11/0e/f4/a6ebfc3b.jpg","comment_is_top":false,"comment_ctime":1532768963,"is_pvip":false,"replies":[{"id":6147,"content":"请参考后面的35微服务架构最佳实践-方法篇和36微服务架构最佳实践-基础设施篇","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1532917948,"ip_address":"","comment_id":17598,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100006601,"comment_content":"如果公司在重构一个系统采用了微服务架构。\n架构师从Spring官网上的demo项目基础上加了mybatis就发布出来作为基础框架。\n被本地工程师提问了十几个怎么做和为什么。\n目前存在以下问题：\n1、无运维自动化基础，手工部署发布阶段\n2、开发团队不熟悉微服务，人员异地\n3、监控做不到全链路\n4、服务拆分不评审直接业务功能开发\n\n怎么做才能避免重构失败？\n\n","like_count":1,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":424501,"discussion_content":"是的，istio就是想屏蔽微服务的基础设施，让业务系统不需要感知基础设施。\n\nbussiness可大可小，甚至可以比soa还大，因此不要这样理解微服务","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1537542142,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":393002,"user_name":"龙哥","can_delete":false,"product_type":"c1","uid":1451669,"ip_address":"广东","ucode":"E7ED2E7DF759A1","user_header":"https://static001.geekbang.org/account/avatar/00/16/26/95/a4e0f7ab.jpg","comment_is_top":false,"comment_ctime":1722470491,"is_pvip":false,"replies":[{"id":142761,"content":"最蛋疼的是还喜欢拆得特别细 ：）","user_name":"作者回复","user_name_real":"编辑","uid":1098920,"ctime":1722830063,"ip_address":"广东","comment_id":393002,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100006601,"comment_content":"最反感的是为了微服务而做微服务，明明一个应用可以搞定的事情，非要分成多个应用。","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":421197,"discussion_content":"请参考后面的35微服务架构最佳实践-方法篇和36微服务架构最佳实践-基础设施篇","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1532917948,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":384801,"user_name":"Apa琦","can_delete":false,"product_type":"c1","uid":3710982,"ip_address":"上海","ucode":"A4A76A4D7364EA","user_header":"https://static001.geekbang.org/account/avatar/00/38/a0/06/f0ca94ca.jpg","comment_is_top":false,"comment_ctime":1701578857,"is_pvip":false,"replies":[{"id":140329,"content":"没有总架构师把控就会这样","user_name":"作者回复","user_name_real":"编辑","uid":1098920,"ctime":1701764376,"ip_address":"广东","comment_id":384801,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100006601,"comment_content":"我上家单位所有的项目都在用一个服务体系。新启一个项目就变成一个新的微服务，后面有好多服务压根不知道是干啥的，负责的人可能已经不干这个行业了，而且也有循环依赖的情况，拆成微服务服务之间的调用也要谨慎设计","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":649121,"discussion_content":"最蛋疼的是还喜欢拆得特别细 ：）","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1722830063,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":379437,"user_name":"鲁米","can_delete":false,"product_type":"c1","uid":1574008,"ip_address":"北京","ucode":"F8F23431723F25","user_header":"https://static001.geekbang.org/account/avatar/00/18/04/78/37b46ba6.jpg","comment_is_top":false,"comment_ctime":1691975780,"is_pvip":false,"replies":[{"id":138241,"content":"趁着现在微服务数量还不多，先合并几个","user_name":"作者回复","user_name_real":"编辑","uid":1098920,"ctime":1692014515,"ip_address":"广东","comment_id":379437,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100006601,"comment_content":"公司老师系统重构采用微服务，spring cloud alibaba 全家桶。研发团队小于10人（含前端，测试【临时借调】----只有2个老人）。总共拆分了10几个微服务。老师说的微服务坑我自己认为都遇到了。刚开始还有评审之类的流程，后面任务多了评审都省了，直接干。没有几个版本过后cicd的编译就想俄罗斯套娃一样了，有一次一个服务发测试环境就需要全部微服务的依赖都编译一遍。服务之间各种调用，请问老师如何在前期有什么手段可以避免这种蔓延么？","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":633031,"discussion_content":"没有总架构师把控就会这样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1701764376,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":370562,"user_name":"拿笔小星","can_delete":false,"product_type":"c1","uid":1193755,"ip_address":"上海","ucode":"D3D8F6A959710D","user_header":"https://static001.geekbang.org/account/avatar/00/12/37/1b/82310e20.jpg","comment_is_top":false,"comment_ctime":1678959493,"is_pvip":false,"replies":[{"id":135236,"content":"抓住机会好好实践课程内容，知行合一","user_name":"作者回复","user_name_real":"编辑","uid":1098920,"ctime":1679047337,"ip_address":"广东","comment_id":370562,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100006601,"comment_content":"我们项目是微服务的架构，目前有10几个吧。团队7个人。服务之间用http通信，通过内网域名，SLB转发到对应服务上。如果没有自动化，运维的支持，想想的确人工成本太大。微服务使用过程，会增加代码开发量，以及发版过程需要注意依赖关系等等。但是，的确可以职责划分清除。目前项目遇到其中一个微服务已经发展成大单体了，今年目标是对他做拆分。","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":609600,"discussion_content":"抓住机会好好实践课程内容，知行合一","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1679047337,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":364002,"user_name":"Andy","can_delete":false,"product_type":"c1","uid":1108469,"ip_address":"广东","ucode":"2088B05F33EE9A","user_header":"https://static001.geekbang.org/account/avatar/00/10/e9/f5/21e72902.jpg","comment_is_top":false,"comment_ctime":1670418144,"is_pvip":false,"replies":[{"id":132353,"content":"你这个自底向上的方法很少见，正常来说都是自顶向下的拆分微服务，因为你在分析底层数据模型的时候，其实已经是从业务的角度分析才能得到底层的数据模型。","user_name":"作者回复","user_name_real":"编辑","uid":1098920,"ctime":1670547463,"ip_address":"广东","comment_id":364002,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100006601,"comment_content":"微服务是围绕如何将数据资产转化成对外的能力，所以好的微服务拆分不光是服务本身考虑，还是考虑底层数据模型的设计，没有好的数据模型，微服务也就是个伪命题了。我目前的落地方案是，先从底层数据模型升级，升级模型的过程中，对数据的使用场景和业务场景理解的更加深刻，做出的数据模型对后续的应用架构升级扩展性更好。","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":609600,"discussion_content":"抓住机会好好实践课程内容，知行合一","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1679047337,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":353442,"user_name":"呆","can_delete":false,"product_type":"c1","uid":1090280,"ip_address":"广东","ucode":"CA635189EA2764","user_header":"https://static001.geekbang.org/account/avatar/00/10/a2/e8/dc2b0884.jpg","comment_is_top":false,"comment_ctime":1659442423,"is_pvip":false,"replies":[{"id":128583,"content":"合并微服务 ：）","user_name":"作者回复","user_name_real":"编辑","uid":1098920,"ctime":1659667045,"ip_address":"广东","comment_id":353442,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100006601,"comment_content":"我们现在做的系统，采用微服务的架构去落，微服务粒度比较细，小集群部署，工程、性能优化很痛苦，每次迭代周边依赖问题闭环都是一场“战役”","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":595985,"discussion_content":"你这个自底向上的方法很少见，正常来说都是自顶向下的拆分微服务，因为你在分析底层数据模型的时候，其实已经是从业务的角度分析才能得到底层的数据模型。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1670547463,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":306697,"user_name":"大叶枫","can_delete":false,"product_type":"c1","uid":1153702,"ip_address":"","ucode":"224AC5533889AD","user_header":"https://static001.geekbang.org/account/avatar/00/11/9a/a6/3bddb98c.jpg","comment_is_top":false,"comment_ctime":1628672034,"is_pvip":false,"replies":[{"id":111067,"content":"微服务基础框架现在已经比ESB还复杂了\n","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1628688589,"ip_address":"","comment_id":306697,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100006601,"comment_content":"SOA去掉ESB的方式，采用微服务去搞，是主流互联网企业的方案选型。基本都会有服务治理框架、流量调度层、持续集成、部署、交付等devOps的技术体系产生。。不然做起来太痛苦了。","like_count":1,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":524877,"discussion_content":"微服务基础框架现在已经比ESB还复杂了\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628688589,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":275711,"user_name":"Geek_9b9530","can_delete":false,"product_type":"c1","uid":2146381,"ip_address":"","ucode":"23498B3944F97C","user_header":"","comment_is_top":false,"comment_ctime":1611651135,"is_pvip":false,"replies":[{"id":100071,"content":"然后发现掉到坑里了 ：）","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1611668388,"ip_address":"","comment_id":275711,"utype":1}],"discussion_count":2,"race_medal":0,"score":5,"product_id":100006601,"comment_content":"很多时候，为了微服务而微服务，客户不懂觉得牛逼，团队想要练手学习，就上了微服务。","like_count":1,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":514447,"discussion_content":"然后发现掉到坑里了 ：）","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611668388,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1918112,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/44/a0/16d0d300.jpg","nickname":"ZHANGPING","note":"","ucode":"7108812981C996","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":384411,"discussion_content":"现实了\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626576032,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":26041,"user_name":"小寞子。(≥3≤)","can_delete":false,"product_type":"c1","uid":1206545,"ip_address":"","ucode":"6D978BDCBB2862","user_header":"https://static001.geekbang.org/account/avatar/00/12/69/11/831cec7d.jpg","comment_is_top":false,"comment_ctime":1537492865,"is_pvip":false,"replies":[{"id":9564,"content":"是的，istio就是想屏蔽微服务的基础设施，让业务系统不需要感知基础设施。\n\nbussiness可大可小，甚至可以比soa还大，因此不要这样理解微服务","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1537542142,"ip_address":"","comment_id":26041,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100006601,"comment_content":"我看现在istio还有 kubernetes好像就是为了解决上面微服务的毛病的。 包括服务之间的关系 自动化测试部署，服务可视化差错。容错。熔断等等。 。 还有关于soa和微服务的区别，有个说法是 soa基于企业系统差分，微服务基于business服务拆分","like_count":1,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":424501,"discussion_content":"是的，istio就是想屏蔽微服务的基础设施，让业务系统不需要感知基础设施。\n\nbussiness可大可小，甚至可以比soa还大，因此不要这样理解微服务","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1537542142,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":17598,"user_name":"Joy","can_delete":false,"product_type":"c1","uid":1117940,"ip_address":"","ucode":"2EEB69F47B88BF","user_header":"https://static001.geekbang.org/account/avatar/00/11/0e/f4/a6ebfc3b.jpg","comment_is_top":false,"comment_ctime":1532768963,"is_pvip":false,"replies":[{"id":6147,"content":"请参考后面的35微服务架构最佳实践-方法篇和36微服务架构最佳实践-基础设施篇","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1532917948,"ip_address":"","comment_id":17598,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100006601,"comment_content":"如果公司在重构一个系统采用了微服务架构。\n架构师从Spring官网上的demo项目基础上加了mybatis就发布出来作为基础框架。\n被本地工程师提问了十几个怎么做和为什么。\n目前存在以下问题：\n1、无运维自动化基础，手工部署发布阶段\n2、开发团队不熟悉微服务，人员异地\n3、监控做不到全链路\n4、服务拆分不评审直接业务功能开发\n\n怎么做才能避免重构失败？\n\n","like_count":1,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":421197,"discussion_content":"请参考后面的35微服务架构最佳实践-方法篇和36微服务架构最佳实践-基础设施篇","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1532917948,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":393002,"user_name":"龙哥","can_delete":false,"product_type":"c1","uid":1451669,"ip_address":"广东","ucode":"E7ED2E7DF759A1","user_header":"https://static001.geekbang.org/account/avatar/00/16/26/95/a4e0f7ab.jpg","comment_is_top":false,"comment_ctime":1722470491,"is_pvip":false,"replies":[{"id":142761,"content":"最蛋疼的是还喜欢拆得特别细 ：）","user_name":"作者回复","user_name_real":"编辑","uid":1098920,"ctime":1722830063,"ip_address":"广东","comment_id":393002,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100006601,"comment_content":"最反感的是为了微服务而做微服务，明明一个应用可以搞定的事情，非要分成多个应用。","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":649121,"discussion_content":"最蛋疼的是还喜欢拆得特别细 ：）","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1722830063,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":384801,"user_name":"Apa琦","can_delete":false,"product_type":"c1","uid":3710982,"ip_address":"上海","ucode":"A4A76A4D7364EA","user_header":"https://static001.geekbang.org/account/avatar/00/38/a0/06/f0ca94ca.jpg","comment_is_top":false,"comment_ctime":1701578857,"is_pvip":false,"replies":[{"id":140329,"content":"没有总架构师把控就会这样","user_name":"作者回复","user_name_real":"编辑","uid":1098920,"ctime":1701764376,"ip_address":"广东","comment_id":384801,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100006601,"comment_content":"我上家单位所有的项目都在用一个服务体系。新启一个项目就变成一个新的微服务，后面有好多服务压根不知道是干啥的，负责的人可能已经不干这个行业了，而且也有循环依赖的情况，拆成微服务服务之间的调用也要谨慎设计","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":633031,"discussion_content":"没有总架构师把控就会这样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1701764376,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":379437,"user_name":"鲁米","can_delete":false,"product_type":"c1","uid":1574008,"ip_address":"北京","ucode":"F8F23431723F25","user_header":"https://static001.geekbang.org/account/avatar/00/18/04/78/37b46ba6.jpg","comment_is_top":false,"comment_ctime":1691975780,"is_pvip":false,"replies":[{"id":138241,"content":"趁着现在微服务数量还不多，先合并几个","user_name":"作者回复","user_name_real":"编辑","uid":1098920,"ctime":1692014515,"ip_address":"广东","comment_id":379437,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100006601,"comment_content":"公司老师系统重构采用微服务，spring cloud alibaba 全家桶。研发团队小于10人（含前端，测试【临时借调】----只有2个老人）。总共拆分了10几个微服务。老师说的微服务坑我自己认为都遇到了。刚开始还有评审之类的流程，后面任务多了评审都省了，直接干。没有几个版本过后cicd的编译就想俄罗斯套娃一样了，有一次一个服务发测试环境就需要全部微服务的依赖都编译一遍。服务之间各种调用，请问老师如何在前期有什么手段可以避免这种蔓延么？","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":625649,"discussion_content":"趁着现在微服务数量还不多，先合并几个","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1692014515,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":370562,"user_name":"拿笔小星","can_delete":false,"product_type":"c1","uid":1193755,"ip_address":"上海","ucode":"D3D8F6A959710D","user_header":"https://static001.geekbang.org/account/avatar/00/12/37/1b/82310e20.jpg","comment_is_top":false,"comment_ctime":1678959493,"is_pvip":false,"replies":[{"id":135236,"content":"抓住机会好好实践课程内容，知行合一","user_name":"作者回复","user_name_real":"编辑","uid":1098920,"ctime":1679047337,"ip_address":"广东","comment_id":370562,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100006601,"comment_content":"我们项目是微服务的架构，目前有10几个吧。团队7个人。服务之间用http通信，通过内网域名，SLB转发到对应服务上。如果没有自动化，运维的支持，想想的确人工成本太大。微服务使用过程，会增加代码开发量，以及发版过程需要注意依赖关系等等。但是，的确可以职责划分清除。目前项目遇到其中一个微服务已经发展成大单体了，今年目标是对他做拆分。","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":625649,"discussion_content":"趁着现在微服务数量还不多，先合并几个","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1692014515,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":364002,"user_name":"Andy","can_delete":false,"product_type":"c1","uid":1108469,"ip_address":"广东","ucode":"2088B05F33EE9A","user_header":"https://static001.geekbang.org/account/avatar/00/10/e9/f5/21e72902.jpg","comment_is_top":false,"comment_ctime":1670418144,"is_pvip":false,"replies":[{"id":132353,"content":"你这个自底向上的方法很少见，正常来说都是自顶向下的拆分微服务，因为你在分析底层数据模型的时候，其实已经是从业务的角度分析才能得到底层的数据模型。","user_name":"作者回复","user_name_real":"编辑","uid":1098920,"ctime":1670547463,"ip_address":"广东","comment_id":364002,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100006601,"comment_content":"微服务是围绕如何将数据资产转化成对外的能力，所以好的微服务拆分不光是服务本身考虑，还是考虑底层数据模型的设计，没有好的数据模型，微服务也就是个伪命题了。我目前的落地方案是，先从底层数据模型升级，升级模型的过程中，对数据的使用场景和业务场景理解的更加深刻，做出的数据模型对后续的应用架构升级扩展性更好。","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":595985,"discussion_content":"你这个自底向上的方法很少见，正常来说都是自顶向下的拆分微服务，因为你在分析底层数据模型的时候，其实已经是从业务的角度分析才能得到底层的数据模型。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1670547463,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":353442,"user_name":"呆","can_delete":false,"product_type":"c1","uid":1090280,"ip_address":"广东","ucode":"CA635189EA2764","user_header":"https://static001.geekbang.org/account/avatar/00/10/a2/e8/dc2b0884.jpg","comment_is_top":false,"comment_ctime":1659442423,"is_pvip":false,"replies":[{"id":128583,"content":"合并微服务 ：）","user_name":"作者回复","user_name_real":"编辑","uid":1098920,"ctime":1659667045,"ip_address":"广东","comment_id":353442,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100006601,"comment_content":"我们现在做的系统，采用微服务的架构去落，微服务粒度比较细，小集群部署，工程、性能优化很痛苦，每次迭代周边依赖问题闭环都是一场“战役”","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582772,"discussion_content":"合并微服务 ：）","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659667045,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":353090,"user_name":"Michael","can_delete":false,"product_type":"c1","uid":1752796,"ip_address":"广东","ucode":"7BC7539A3355DA","user_header":"https://static001.geekbang.org/account/avatar/00/1a/be/dc/ce674e93.jpg","comment_is_top":false,"comment_ctime":1659154283,"is_pvip":false,"replies":[{"id":128455,"content":"正解","user_name":"作者回复","user_name_real":"编辑","uid":1098920,"ctime":1659361666,"ip_address":"广东","comment_id":353090,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100006601,"comment_content":"对于中小型公司，要采用微服务架构，最重要不能把服务拆的过细，拆到适合团队人数，团队测试运维监控等能力的粒度即可","like_count":0},{"had_liked":false,"id":333282,"user_name":"沐雪","can_delete":false,"product_type":"c1","uid":1028301,"ip_address":"","ucode":"0C42BF0D75FD9B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b0/cd/c54572fe.jpg","comment_is_top":false,"comment_ctime":1644244788,"is_pvip":false,"replies":[{"id":121852,"content":"感觉你们要合并微服务了","user_name":"作者回复","user_name_real":"编辑","uid":1098920,"ctime":1644372926,"ip_address":"","comment_id":333282,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100006601,"comment_content":"我们在实践微服务中，遇到的坑有几点：\n1、拆分多个微服务后，开发人员人手不足，维护不过来；老员工离职，新员工不熟悉，导致很多微服务成为历史遗产，谁都不敢改动接口；新员工可能又会开辟一个微服务出来；\n2、接口数量越来越多，缺乏版本管理，有失控的感觉；\n3、链路太长，遇到问题，分析和解决非常耗时；","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582313,"discussion_content":"正解","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659361666,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":320535,"user_name":"tungSing","can_delete":false,"product_type":"c1","uid":1402570,"ip_address":"","ucode":"F7147EA351BE44","user_header":"https://static001.geekbang.org/account/avatar/00/15/66/ca/fb5c3a30.jpg","comment_is_top":false,"comment_ctime":1636369953,"is_pvip":false,"replies":[{"id":116366,"content":"尝试还是可以试试的，先拆分一两个小的不重要的微服务练练手","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1636543529,"ip_address":"","comment_id":320535,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100006601,"comment_content":"一直没敢尝试，事物现在已经有解决方案，联合查询没想到好的解决办法","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":550060,"discussion_content":"感觉你们要合并微服务了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644372926,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":318141,"user_name":"zhongguo168a","can_delete":false,"product_type":"c1","uid":1600041,"ip_address":"","ucode":"9B5E3ED7A2EAE9","user_header":"","comment_is_top":false,"comment_ctime":1635161932,"is_pvip":false,"replies":[{"id":115352,"content":"后面会讲微服务拆分技巧，事务一致性确实难搞，而且坑很多，但是一般来说，业务里面要用到分布式事务一致性的地方其实不多，如果你们要求所有的数据都要分布式一致性，那么就是设计理念有偏差","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1635209873,"ip_address":"","comment_id":318141,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100006601,"comment_content":"微服务就不应该拆的太细，本来就很容易横向扩展的模块，就不应该拆开。事务一致性很折腾人","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":530035,"discussion_content":"尝试还是可以试试的，先拆分一两个小的不重要的微服务练练手","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636543529,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":315590,"user_name":"bin的技术小屋","can_delete":false,"product_type":"c1","uid":1049047,"ip_address":"","ucode":"478603A9AB13B4","user_header":"https://static001.geekbang.org/account/avatar/00/10/01/d7/f835081c.jpg","comment_is_top":false,"comment_ctime":1633926531,"is_pvip":false,"replies":[{"id":114428,"content":"哈哈，几乎所有的读者都说经历过其中的一些问题，但是一个不落的经历过，那确实说明你们的架构师或者技术总监之类的人问题不小","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1634001917,"ip_address":"","comment_id":315590,"utype":1}],"discussion_count":2,"race_medal":0,"score":6,"product_id":100006601,"comment_content":"很不幸，华仔你提到的这些焦油坑，我一个不落地全部都经历过，而且血的教训历历在目","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529116,"discussion_content":"后面会讲微服务拆分技巧，事务一致性确实难搞，而且坑很多，但是一般来说，业务里面要用到分布式事务一致性的地方其实不多，如果你们要求所有的数据都要分布式一致性，那么就是设计理念有偏差","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635209873,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":303065,"user_name":"ZHANGPING","can_delete":false,"product_type":"c1","uid":1918112,"ip_address":"","ucode":"7108812981C996","user_header":"https://static001.geekbang.org/account/avatar/00/1d/44/a0/16d0d300.jpg","comment_is_top":false,"comment_ctime":1626575075,"is_pvip":false,"replies":[{"id":109721,"content":"微服务全套下来，比SOA的ESB还要复杂了\n","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1626654921,"ip_address":"","comment_id":303065,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100006601,"comment_content":"以前我们公司采用的微服务有一整套基础基础架构，不过基础设施复杂，上手慢。其实就是没有做统一的日志中心，线上故障要取几十台机器上搜索日志，定位麻烦。","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":528109,"discussion_content":"哈哈，几乎所有的读者都说经历过其中的一些问题，但是一个不落的经历过，那确实说明你们的架构师或者技术总监之类的人问题不小","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634001917,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1049047,"avatar":"https://static001.geekbang.org/account/avatar/00/10/01/d7/f835081c.jpg","nickname":"bin的技术小屋","note":"","ucode":"478603A9AB13B4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":403141,"discussion_content":"华仔，我需要安慰😂","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634015467,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":298434,"user_name":"田军","can_delete":false,"product_type":"c1","uid":2437411,"ip_address":"","ucode":"23029701FAC0B5","user_header":"","comment_is_top":false,"comment_ctime":1624099789,"is_pvip":false,"replies":[{"id":108334,"content":"你们需要一个好的架构师 ：）","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1624249381,"ip_address":"","comment_id":298434,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100006601,"comment_content":"我们是传统行业的系统，公司想做微服务，但是有几个问题\n1、业务没有拆开，会导致服务间耦合过多\n2、由于业务未拆开，做一个功能，开发必须得在好几个服务间切换修改代码，很浪费效率、时间\n3、拆开后真实价值不够凸显","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":523541,"discussion_content":"微服务全套下来，比SOA的ESB还要复杂了\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626654921,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":286486,"user_name":"喵了个咪的汪","can_delete":false,"product_type":"c1","uid":1338163,"ip_address":"","ucode":"8D6BDF3B681147","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEKTDI00ykOfZ1UFxHGZ1Yhknb2BIqrwZgjFD6ykDlN3KUEMN4YgKa8N9TVib8vrtQ2Uk0tFCGAwNsw/132","comment_is_top":false,"comment_ctime":1617341794,"is_pvip":false,"replies":[{"id":104079,"content":"做好微服务依赖的熔断和容错处理","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1617370746,"ip_address":"","comment_id":286486,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100006601,"comment_content":"我们公司采用的是按照业务拆分的微服务，然后经常出现的问题就是一个微服务挂了，依赖的所有微服务都没法用了，幸好日志系统够强大，可以很快定位到出错的微服务，还有就是采用自动化部署。","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":522139,"discussion_content":"你们需要一个好的架构师 ：）","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1624249381,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":286465,"user_name":"知识没学到","can_delete":false,"product_type":"c1","uid":1046584,"ip_address":"","ucode":"5D819DFFC7AB08","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f8/38/8af56e18.jpg","comment_is_top":false,"comment_ctime":1617332256,"is_pvip":false,"replies":[{"id":104077,"content":"这里只是举例而已，不是说一定要这么拆分。","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1617370667,"ip_address":"","comment_id":286465,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100006601,"comment_content":"微服务的粒度是这么细的吗？“员工管理系统”会被拆分为更多的服务，比如“员工信息管理”“员工考勤管理”“员工假期管理”和“员工福利管理”等更多服务，也得看系统体量吧，过度拆分也会造成资源的浪费且后期维护起来也是噩梦","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518005,"discussion_content":"做好微服务依赖的熔断和容错处理","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617370746,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":266350,"user_name":"Geek_9b9530","can_delete":false,"product_type":"c1","uid":2146381,"ip_address":"","ucode":"23498B3944F97C","user_header":"","comment_is_top":false,"comment_ctime":1607310194,"is_pvip":false,"replies":[{"id":96753,"content":"没有银弹","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1607345556,"ip_address":"","comment_id":266350,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100006601,"comment_content":"微服务的运维和实施是一大问题，微服务的乱用也是一大问题，各企业有各个企业的坑","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":517996,"discussion_content":"这里只是举例而已，不是说一定要这么拆分。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617370667,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":353090,"user_name":"Michael","can_delete":false,"product_type":"c1","uid":1752796,"ip_address":"广东","ucode":"7BC7539A3355DA","user_header":"https://static001.geekbang.org/account/avatar/00/1a/be/dc/ce674e93.jpg","comment_is_top":false,"comment_ctime":1659154283,"is_pvip":false,"replies":[{"id":128455,"content":"正解","user_name":"作者回复","user_name_real":"编辑","uid":1098920,"ctime":1659361666,"ip_address":"广东","comment_id":353090,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100006601,"comment_content":"对于中小型公司，要采用微服务架构，最重要不能把服务拆的过细，拆到适合团队人数，团队测试运维监控等能力的粒度即可","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582313,"discussion_content":"正解","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659361666,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":333282,"user_name":"沐雪","can_delete":false,"product_type":"c1","uid":1028301,"ip_address":"","ucode":"0C42BF0D75FD9B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b0/cd/c54572fe.jpg","comment_is_top":false,"comment_ctime":1644244788,"is_pvip":false,"replies":[{"id":121852,"content":"感觉你们要合并微服务了","user_name":"作者回复","user_name_real":"编辑","uid":1098920,"ctime":1644372926,"ip_address":"","comment_id":333282,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100006601,"comment_content":"我们在实践微服务中，遇到的坑有几点：\n1、拆分多个微服务后，开发人员人手不足，维护不过来；老员工离职，新员工不熟悉，导致很多微服务成为历史遗产，谁都不敢改动接口；新员工可能又会开辟一个微服务出来；\n2、接口数量越来越多，缺乏版本管理，有失控的感觉；\n3、链路太长，遇到问题，分析和解决非常耗时；","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":550060,"discussion_content":"感觉你们要合并微服务了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644372926,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":320535,"user_name":"tungSing","can_delete":false,"product_type":"c1","uid":1402570,"ip_address":"","ucode":"F7147EA351BE44","user_header":"https://static001.geekbang.org/account/avatar/00/15/66/ca/fb5c3a30.jpg","comment_is_top":false,"comment_ctime":1636369953,"is_pvip":false,"replies":[{"id":116366,"content":"尝试还是可以试试的，先拆分一两个小的不重要的微服务练练手","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1636543529,"ip_address":"","comment_id":320535,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100006601,"comment_content":"一直没敢尝试，事物现在已经有解决方案，联合查询没想到好的解决办法","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":530035,"discussion_content":"尝试还是可以试试的，先拆分一两个小的不重要的微服务练练手","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636543529,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":318141,"user_name":"zhongguo168a","can_delete":false,"product_type":"c1","uid":1600041,"ip_address":"","ucode":"9B5E3ED7A2EAE9","user_header":"","comment_is_top":false,"comment_ctime":1635161932,"is_pvip":false,"replies":[{"id":115352,"content":"后面会讲微服务拆分技巧，事务一致性确实难搞，而且坑很多，但是一般来说，业务里面要用到分布式事务一致性的地方其实不多，如果你们要求所有的数据都要分布式一致性，那么就是设计理念有偏差","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1635209873,"ip_address":"","comment_id":318141,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100006601,"comment_content":"微服务就不应该拆的太细，本来就很容易横向扩展的模块，就不应该拆开。事务一致性很折腾人","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529116,"discussion_content":"后面会讲微服务拆分技巧，事务一致性确实难搞，而且坑很多，但是一般来说，业务里面要用到分布式事务一致性的地方其实不多，如果你们要求所有的数据都要分布式一致性，那么就是设计理念有偏差","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635209873,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":315590,"user_name":"bin的技术小屋","can_delete":false,"product_type":"c1","uid":1049047,"ip_address":"","ucode":"478603A9AB13B4","user_header":"https://static001.geekbang.org/account/avatar/00/10/01/d7/f835081c.jpg","comment_is_top":false,"comment_ctime":1633926531,"is_pvip":false,"replies":[{"id":114428,"content":"哈哈，几乎所有的读者都说经历过其中的一些问题，但是一个不落的经历过，那确实说明你们的架构师或者技术总监之类的人问题不小","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1634001917,"ip_address":"","comment_id":315590,"utype":1}],"discussion_count":2,"race_medal":0,"score":6,"product_id":100006601,"comment_content":"很不幸，华仔你提到的这些焦油坑，我一个不落地全部都经历过，而且血的教训历历在目","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":528109,"discussion_content":"哈哈，几乎所有的读者都说经历过其中的一些问题，但是一个不落的经历过，那确实说明你们的架构师或者技术总监之类的人问题不小","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634001917,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1049047,"avatar":"https://static001.geekbang.org/account/avatar/00/10/01/d7/f835081c.jpg","nickname":"bin的技术小屋","note":"","ucode":"478603A9AB13B4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":403141,"discussion_content":"华仔，我需要安慰😂","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634015467,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":303065,"user_name":"ZHANGPING","can_delete":false,"product_type":"c1","uid":1918112,"ip_address":"","ucode":"7108812981C996","user_header":"https://static001.geekbang.org/account/avatar/00/1d/44/a0/16d0d300.jpg","comment_is_top":false,"comment_ctime":1626575075,"is_pvip":false,"replies":[{"id":109721,"content":"微服务全套下来，比SOA的ESB还要复杂了\n","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1626654921,"ip_address":"","comment_id":303065,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100006601,"comment_content":"以前我们公司采用的微服务有一整套基础基础架构，不过基础设施复杂，上手慢。其实就是没有做统一的日志中心，线上故障要取几十台机器上搜索日志，定位麻烦。","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":523541,"discussion_content":"微服务全套下来，比SOA的ESB还要复杂了\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626654921,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":298434,"user_name":"田军","can_delete":false,"product_type":"c1","uid":2437411,"ip_address":"","ucode":"23029701FAC0B5","user_header":"","comment_is_top":false,"comment_ctime":1624099789,"is_pvip":false,"replies":[{"id":108334,"content":"你们需要一个好的架构师 ：）","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1624249381,"ip_address":"","comment_id":298434,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100006601,"comment_content":"我们是传统行业的系统，公司想做微服务，但是有几个问题\n1、业务没有拆开，会导致服务间耦合过多\n2、由于业务未拆开，做一个功能，开发必须得在好几个服务间切换修改代码，很浪费效率、时间\n3、拆开后真实价值不够凸显","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":522139,"discussion_content":"你们需要一个好的架构师 ：）","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1624249381,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":286486,"user_name":"喵了个咪的汪","can_delete":false,"product_type":"c1","uid":1338163,"ip_address":"","ucode":"8D6BDF3B681147","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEKTDI00ykOfZ1UFxHGZ1Yhknb2BIqrwZgjFD6ykDlN3KUEMN4YgKa8N9TVib8vrtQ2Uk0tFCGAwNsw/132","comment_is_top":false,"comment_ctime":1617341794,"is_pvip":false,"replies":[{"id":104079,"content":"做好微服务依赖的熔断和容错处理","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1617370746,"ip_address":"","comment_id":286486,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100006601,"comment_content":"我们公司采用的是按照业务拆分的微服务，然后经常出现的问题就是一个微服务挂了，依赖的所有微服务都没法用了，幸好日志系统够强大，可以很快定位到出错的微服务，还有就是采用自动化部署。","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518005,"discussion_content":"做好微服务依赖的熔断和容错处理","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617370746,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":286465,"user_name":"知识没学到","can_delete":false,"product_type":"c1","uid":1046584,"ip_address":"","ucode":"5D819DFFC7AB08","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f8/38/8af56e18.jpg","comment_is_top":false,"comment_ctime":1617332256,"is_pvip":false,"replies":[{"id":104077,"content":"这里只是举例而已，不是说一定要这么拆分。","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1617370667,"ip_address":"","comment_id":286465,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100006601,"comment_content":"微服务的粒度是这么细的吗？“员工管理系统”会被拆分为更多的服务，比如“员工信息管理”“员工考勤管理”“员工假期管理”和“员工福利管理”等更多服务，也得看系统体量吧，过度拆分也会造成资源的浪费且后期维护起来也是噩梦","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":517996,"discussion_content":"这里只是举例而已，不是说一定要这么拆分。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617370667,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":266350,"user_name":"Geek_9b9530","can_delete":false,"product_type":"c1","uid":2146381,"ip_address":"","ucode":"23498B3944F97C","user_header":"","comment_is_top":false,"comment_ctime":1607310194,"is_pvip":false,"replies":[{"id":96753,"content":"没有银弹","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1607345556,"ip_address":"","comment_id":266350,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100006601,"comment_content":"微服务的运维和实施是一大问题，微服务的乱用也是一大问题，各企业有各个企业的坑","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":511225,"discussion_content":"没有银弹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607345556,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":199826,"user_name":"Regis","can_delete":false,"product_type":"c1","uid":1435632,"ip_address":"","ucode":"3911E4EDE27F4E","user_header":"https://static001.geekbang.org/account/avatar/00/15/e7/f0/d0bf3a5f.jpg","comment_is_top":false,"comment_ctime":1585496546,"is_pvip":false,"replies":[{"id":74860,"content":"你是想学习微服务中间件开发，还是基于微服务做业务开发？如果是前者，可以看spring全家桶，如果是后者，现在基本上都封装好了，上层业务开发基本不感知","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1585538953,"ip_address":"","comment_id":199826,"utype":1}],"discussion_count":1,"race_medal":0,"score":7,"product_id":100006601,"comment_content":"很想学习一下微服务的开发，要学的东西太多了，都没有方向了，对什么都感兴趣","like_count":0},{"had_liked":false,"id":186247,"user_name":"谭方敏","can_delete":false,"product_type":"c1","uid":1710960,"ip_address":"","ucode":"728DC7ECB7C902","user_header":"https://static001.geekbang.org/account/avatar/00/1a/1b/70/547042ee.jpg","comment_is_top":false,"comment_ctime":1583807193,"is_pvip":false,"replies":[{"id":72862,"content":"c++确实没有合适的全家桶，自己搞投入还是很大的","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1584425706,"ip_address":"","comment_id":186247,"utype":1}],"discussion_count":1,"race_medal":0,"score":7,"product_id":100006601,"comment_content":"我家公司之前在满足现有业务增长规模的情况下，也涉足微服务领域了，其实遇到的问题跟大家也差不多：\n1) 业务拆分问题，大家对服务的理解类似于某个技术框架，让这个技术框架适配现有业务流程和架构就好了，这就有点新瓶装旧酒的味道，对于怎么拆分，大家各执一词，争论不休，尤其在数据库规划上，更是举步维艰，很难有进展，后来才找到一种方法，领域驱动设计（DDD），算是解了燃眉之急。\n2）技术栈在应对微服务架构的时候，显得心有余而力不足，传统技术栈不会包括服务发现，服务治理，以及调用链分析，在微服务架构上知识结构体系是不全的。\n3）整个微服务环境甚至文化处于原始阶段，大家都觉得微服务只是一个点上面的事情，比如只是后台的事情，而事实上，这个关乎测试（自动化测试）还有运维(持续集成，持续部署，监控)等，也就是华哥在回复区提到的基础架构部分。\n4）研发部门的尴尬，由于公司一向偏向于c++，没有人熟悉java，所以在落地的时候，就没有spring全家桶就能解决所有事情的那种小幸运，而要选择不同的服务组件来满足微服务架构的需求。","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":486690,"discussion_content":"c++确实没有合适的全家桶，自己搞投入还是很大的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584425706,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":161236,"user_name":"WuKongCoder","can_delete":false,"product_type":"c1","uid":1019739,"ip_address":"","ucode":"69C990105DEF47","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8f/5b/2f16ca95.jpg","comment_is_top":false,"comment_ctime":1576153642,"is_pvip":false,"replies":[{"id":63219,"content":"嗯，微服务必须要有基础设施配套，不然很蛋疼","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1577328288,"ip_address":"","comment_id":161236,"utype":1}],"discussion_count":1,"race_medal":0,"score":7,"product_id":100006601,"comment_content":"我们现有的服务也算是微服务了，也是逐渐演进过来的，微服务不单单是服务的拆分解耦。还包含devops  自动化部署，自动化监控，服务编排以及各类方便开发人员聚焦到开发上的工具，不要把精力都消耗在那些重复工作中。","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477651,"discussion_content":"嗯，微服务必须要有基础设施配套，不然很蛋疼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577328288,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":135005,"user_name":"Geek_88604f","can_delete":false,"product_type":"c1","uid":1501234,"ip_address":"","ucode":"33DD1318E53814","user_header":"","comment_is_top":false,"comment_ctime":1568974117,"is_pvip":false,"replies":[{"id":51998,"content":"都算，尤其是最后一个，查起来很麻烦","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1569235080,"ip_address":"","comment_id":135005,"utype":1}],"discussion_count":1,"race_medal":0,"score":7,"product_id":100006601,"comment_content":"        微服务遇到的坑，不知道算不算。第一个是到底满足什么条件才能算一个微服务，往往是为了拆分而拆分，比如将一个服务拆分成了ABC三个微服务，BC仅仅是为A提供服务不具有独立的能力，接口也只是内部接口，对外完全不可见。\n        第二个是微服务内部是有状态的，这就导致了其它访问的时候必须请求到那个实例，对伸缩和可靠性带来了不利的影响。\n        第三个是扩缩容依赖，服务A需要扩充一倍，依赖的服务要扩充多少呢？这个往往很难评估准确，曾出现过由于扩充的比例不对导致现网紧急变更。\n        最后是分布式一致性，微服务之间往往需要互相配合来完成某个业务功能，但是由于网络故障或其它原因经常处理不一致。然后通过各种系统定时任务去清理或修正，系统越来越难以理解。","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467998,"discussion_content":"都算，尤其是最后一个，查起来很麻烦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569235080,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":87247,"user_name":"花花大脸猫","can_delete":false,"product_type":"c1","uid":1117318,"ip_address":"","ucode":"8ABDB3F7F4FB0F","user_header":"https://static001.geekbang.org/account/avatar/00/11/0c/86/8e52afb8.jpg","comment_is_top":false,"comment_ctime":1555552711,"is_pvip":true,"replies":[{"id":31426,"content":"先完善基础设施","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1555598210,"ip_address":"","comment_id":87247,"utype":1}],"discussion_count":1,"race_medal":0,"score":7,"product_id":100006601,"comment_content":"我们公司拆分的原因主要是基于现有遗留的老系统太过于庞大，代码结构比较混乱，每次新的需求过来的时候，都会牵一发而动全身，从而有了服务拆分的想法，但是对于当时的服务拆分的粒度，受限于人员数量以及对微服务的理解，根据业务模块做了服务的拆分，但是有一个问题是还是共用的一个库，而且链路监控以及服务治理都还在预研阶段，并没有落地，现在都是哪边遇到坑就去填坑，数据库的拆分以及数据迁移在后面也是一个不得不头痛的问题，请求老师现在的这个情况，您这边有什么好的建议么？","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":447366,"discussion_content":"先完善基础设施","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555598210,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":68249,"user_name":"可爱(๑• . •๑)","can_delete":false,"product_type":"c1","uid":1364539,"ip_address":"","ucode":"1B6E047B9046B1","user_header":"https://static001.geekbang.org/account/avatar/00/14/d2/3b/85338316.jpg","comment_is_top":false,"comment_ctime":1550467551,"is_pvip":false,"replies":[{"id":25381,"content":"后面会讲","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1551227538,"ip_address":"","comment_id":68249,"utype":1}],"discussion_count":1,"race_medal":0,"score":7,"product_id":100006601,"comment_content":"微服务改造改如何做？","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":447366,"discussion_content":"先完善基础设施","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555598210,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":49729,"user_name":"朋朋","can_delete":false,"product_type":"c1","uid":1133890,"ip_address":"","ucode":"3070498E7282C5","user_header":"https://static001.geekbang.org/account/avatar/00/11/4d/42/8fd7c2e2.jpg","comment_is_top":false,"comment_ctime":1544758230,"is_pvip":false,"replies":[{"id":17934,"content":"akka框架就是做这事的，但很复杂","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1544772292,"ip_address":"","comment_id":49729,"utype":1}],"discussion_count":1,"race_medal":0,"score":7,"product_id":100006601,"comment_content":"我在想如果启动一个服务进程 服务里有多线程 每个线程启动一个vm 虚拟机去执行脚本 一个脚本的vm去对应一个微服务 这个部署只需启动一个进程服务器就可以啦 另外一个vm 对应一个actor实体 对应一个微服务 然后用每个actor处理自己的消息 通过rpc调用是不是可以？部署从外部看是一个整体 从内部看是众多的服务（每个服务对应一个actor个体实现相应的功能）。","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":439587,"discussion_content":"后面会讲","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551227538,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":38207,"user_name":"forever","can_delete":false,"product_type":"c1","uid":1065978,"ip_address":"","ucode":"1C8968D4EC9A95","user_header":"https://static001.geekbang.org/account/avatar/00/10/43/fa/b4324501.jpg","comment_is_top":false,"comment_ctime":1541989107,"is_pvip":false,"replies":[{"id":13736,"content":"这是最常见的做法，你可以思考一下为什么对外用HTTP对内用RPC，而不是反过来","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1542006260,"ip_address":"","comment_id":38207,"utype":1}],"discussion_count":1,"race_medal":0,"score":7,"product_id":100006601,"comment_content":"老师 我想问问HTTP和RPC的调用方式 目前对外接口采用http 内部服务间调用采用RPC 不知道有没有问题 ","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432746,"discussion_content":"akka框架就是做这事的，但很复杂","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544772292,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":29216,"user_name":"func","can_delete":false,"product_type":"c1","uid":1254534,"ip_address":"","ucode":"481018617F42D8","user_header":"https://static001.geekbang.org/account/avatar/00/13/24/86/6069f169.jpg","comment_is_top":false,"comment_ctime":1538291205,"is_pvip":false,"replies":[{"id":10512,"content":"预知后事如何，请看下回分解😀","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1538307493,"ip_address":"","comment_id":29216,"utype":1}],"discussion_count":1,"race_medal":0,"score":7,"product_id":100006601,"comment_content":"华仔老师，这个服务网关具体指的是什么啊？还是没太理解清除？比如长链服务的网关？这个网关的作用是什么啊？路由分发？负载？","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":425519,"discussion_content":"预知后事如何，请看下回分解😀","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1538307493,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":28355,"user_name":"奋斗心","can_delete":false,"product_type":"c1","uid":1247286,"ip_address":"","ucode":"06A195AB0B6570","user_header":"https://static001.geekbang.org/account/avatar/00/13/08/36/98be3d69.jpg","comment_is_top":false,"comment_ctime":1538059720,"is_pvip":false,"replies":[{"id":10262,"content":"后面有讲","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1538103953,"ip_address":"","comment_id":28355,"utype":1}],"discussion_count":1,"race_medal":0,"score":7,"product_id":100006601,"comment_content":"微服务太多\n通过：微服务分层，分类，通过网关提供服务。具体的相关内容在哪可以找","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":425246,"discussion_content":"后面有讲","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1538103953,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":199826,"user_name":"Regis","can_delete":false,"product_type":"c1","uid":1435632,"ip_address":"","ucode":"3911E4EDE27F4E","user_header":"https://static001.geekbang.org/account/avatar/00/15/e7/f0/d0bf3a5f.jpg","comment_is_top":false,"comment_ctime":1585496546,"is_pvip":false,"replies":[{"id":74860,"content":"你是想学习微服务中间件开发，还是基于微服务做业务开发？如果是前者，可以看spring全家桶，如果是后者，现在基本上都封装好了，上层业务开发基本不感知","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1585538953,"ip_address":"","comment_id":199826,"utype":1}],"discussion_count":1,"race_medal":0,"score":7,"product_id":100006601,"comment_content":"很想学习一下微服务的开发，要学的东西太多了，都没有方向了，对什么都感兴趣","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":489884,"discussion_content":"你是想学习微服务中间件开发，还是基于微服务做业务开发？如果是前者，可以看spring全家桶，如果是后者，现在基本上都封装好了，上层业务开发基本不感知","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585538953,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":186247,"user_name":"谭方敏","can_delete":false,"product_type":"c1","uid":1710960,"ip_address":"","ucode":"728DC7ECB7C902","user_header":"https://static001.geekbang.org/account/avatar/00/1a/1b/70/547042ee.jpg","comment_is_top":false,"comment_ctime":1583807193,"is_pvip":false,"replies":[{"id":72862,"content":"c++确实没有合适的全家桶，自己搞投入还是很大的","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1584425706,"ip_address":"","comment_id":186247,"utype":1}],"discussion_count":1,"race_medal":0,"score":7,"product_id":100006601,"comment_content":"我家公司之前在满足现有业务增长规模的情况下，也涉足微服务领域了，其实遇到的问题跟大家也差不多：\n1) 业务拆分问题，大家对服务的理解类似于某个技术框架，让这个技术框架适配现有业务流程和架构就好了，这就有点新瓶装旧酒的味道，对于怎么拆分，大家各执一词，争论不休，尤其在数据库规划上，更是举步维艰，很难有进展，后来才找到一种方法，领域驱动设计（DDD），算是解了燃眉之急。\n2）技术栈在应对微服务架构的时候，显得心有余而力不足，传统技术栈不会包括服务发现，服务治理，以及调用链分析，在微服务架构上知识结构体系是不全的。\n3）整个微服务环境甚至文化处于原始阶段，大家都觉得微服务只是一个点上面的事情，比如只是后台的事情，而事实上，这个关乎测试（自动化测试）还有运维(持续集成，持续部署，监控)等，也就是华哥在回复区提到的基础架构部分。\n4）研发部门的尴尬，由于公司一向偏向于c++，没有人熟悉java，所以在落地的时候，就没有spring全家桶就能解决所有事情的那种小幸运，而要选择不同的服务组件来满足微服务架构的需求。","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":489884,"discussion_content":"你是想学习微服务中间件开发，还是基于微服务做业务开发？如果是前者，可以看spring全家桶，如果是后者，现在基本上都封装好了，上层业务开发基本不感知","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585538953,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":161236,"user_name":"WuKongCoder","can_delete":false,"product_type":"c1","uid":1019739,"ip_address":"","ucode":"69C990105DEF47","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8f/5b/2f16ca95.jpg","comment_is_top":false,"comment_ctime":1576153642,"is_pvip":false,"replies":[{"id":63219,"content":"嗯，微服务必须要有基础设施配套，不然很蛋疼","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1577328288,"ip_address":"","comment_id":161236,"utype":1}],"discussion_count":1,"race_medal":0,"score":7,"product_id":100006601,"comment_content":"我们现有的服务也算是微服务了，也是逐渐演进过来的，微服务不单单是服务的拆分解耦。还包含devops  自动化部署，自动化监控，服务编排以及各类方便开发人员聚焦到开发上的工具，不要把精力都消耗在那些重复工作中。","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":486690,"discussion_content":"c++确实没有合适的全家桶，自己搞投入还是很大的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584425706,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":135005,"user_name":"Geek_88604f","can_delete":false,"product_type":"c1","uid":1501234,"ip_address":"","ucode":"33DD1318E53814","user_header":"","comment_is_top":false,"comment_ctime":1568974117,"is_pvip":false,"replies":[{"id":51998,"content":"都算，尤其是最后一个，查起来很麻烦","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1569235080,"ip_address":"","comment_id":135005,"utype":1}],"discussion_count":1,"race_medal":0,"score":7,"product_id":100006601,"comment_content":"        微服务遇到的坑，不知道算不算。第一个是到底满足什么条件才能算一个微服务，往往是为了拆分而拆分，比如将一个服务拆分成了ABC三个微服务，BC仅仅是为A提供服务不具有独立的能力，接口也只是内部接口，对外完全不可见。\n        第二个是微服务内部是有状态的，这就导致了其它访问的时候必须请求到那个实例，对伸缩和可靠性带来了不利的影响。\n        第三个是扩缩容依赖，服务A需要扩充一倍，依赖的服务要扩充多少呢？这个往往很难评估准确，曾出现过由于扩充的比例不对导致现网紧急变更。\n        最后是分布式一致性，微服务之间往往需要互相配合来完成某个业务功能，但是由于网络故障或其它原因经常处理不一致。然后通过各种系统定时任务去清理或修正，系统越来越难以理解。","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477651,"discussion_content":"嗯，微服务必须要有基础设施配套，不然很蛋疼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577328288,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":87247,"user_name":"花花大脸猫","can_delete":false,"product_type":"c1","uid":1117318,"ip_address":"","ucode":"8ABDB3F7F4FB0F","user_header":"https://static001.geekbang.org/account/avatar/00/11/0c/86/8e52afb8.jpg","comment_is_top":false,"comment_ctime":1555552711,"is_pvip":true,"replies":[{"id":31426,"content":"先完善基础设施","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1555598210,"ip_address":"","comment_id":87247,"utype":1}],"discussion_count":1,"race_medal":0,"score":7,"product_id":100006601,"comment_content":"我们公司拆分的原因主要是基于现有遗留的老系统太过于庞大，代码结构比较混乱，每次新的需求过来的时候，都会牵一发而动全身，从而有了服务拆分的想法，但是对于当时的服务拆分的粒度，受限于人员数量以及对微服务的理解，根据业务模块做了服务的拆分，但是有一个问题是还是共用的一个库，而且链路监控以及服务治理都还在预研阶段，并没有落地，现在都是哪边遇到坑就去填坑，数据库的拆分以及数据迁移在后面也是一个不得不头痛的问题，请求老师现在的这个情况，您这边有什么好的建议么？","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467998,"discussion_content":"都算，尤其是最后一个，查起来很麻烦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569235080,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":68249,"user_name":"可爱(๑• . •๑)","can_delete":false,"product_type":"c1","uid":1364539,"ip_address":"","ucode":"1B6E047B9046B1","user_header":"https://static001.geekbang.org/account/avatar/00/14/d2/3b/85338316.jpg","comment_is_top":false,"comment_ctime":1550467551,"is_pvip":false,"replies":[{"id":25381,"content":"后面会讲","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1551227538,"ip_address":"","comment_id":68249,"utype":1}],"discussion_count":1,"race_medal":0,"score":7,"product_id":100006601,"comment_content":"微服务改造改如何做？","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":439587,"discussion_content":"后面会讲","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551227538,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":49729,"user_name":"朋朋","can_delete":false,"product_type":"c1","uid":1133890,"ip_address":"","ucode":"3070498E7282C5","user_header":"https://static001.geekbang.org/account/avatar/00/11/4d/42/8fd7c2e2.jpg","comment_is_top":false,"comment_ctime":1544758230,"is_pvip":false,"replies":[{"id":17934,"content":"akka框架就是做这事的，但很复杂","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1544772292,"ip_address":"","comment_id":49729,"utype":1}],"discussion_count":1,"race_medal":0,"score":7,"product_id":100006601,"comment_content":"我在想如果启动一个服务进程 服务里有多线程 每个线程启动一个vm 虚拟机去执行脚本 一个脚本的vm去对应一个微服务 这个部署只需启动一个进程服务器就可以啦 另外一个vm 对应一个actor实体 对应一个微服务 然后用每个actor处理自己的消息 通过rpc调用是不是可以？部署从外部看是一个整体 从内部看是众多的服务（每个服务对应一个actor个体实现相应的功能）。","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432746,"discussion_content":"akka框架就是做这事的，但很复杂","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544772292,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":38207,"user_name":"forever","can_delete":false,"product_type":"c1","uid":1065978,"ip_address":"","ucode":"1C8968D4EC9A95","user_header":"https://static001.geekbang.org/account/avatar/00/10/43/fa/b4324501.jpg","comment_is_top":false,"comment_ctime":1541989107,"is_pvip":false,"replies":[{"id":13736,"content":"这是最常见的做法，你可以思考一下为什么对外用HTTP对内用RPC，而不是反过来","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1542006260,"ip_address":"","comment_id":38207,"utype":1}],"discussion_count":1,"race_medal":0,"score":7,"product_id":100006601,"comment_content":"老师 我想问问HTTP和RPC的调用方式 目前对外接口采用http 内部服务间调用采用RPC 不知道有没有问题 ","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":428642,"discussion_content":"这是最常见的做法，你可以思考一下为什么对外用HTTP对内用RPC，而不是反过来","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1542006260,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":29216,"user_name":"func","can_delete":false,"product_type":"c1","uid":1254534,"ip_address":"","ucode":"481018617F42D8","user_header":"https://static001.geekbang.org/account/avatar/00/13/24/86/6069f169.jpg","comment_is_top":false,"comment_ctime":1538291205,"is_pvip":false,"replies":[{"id":10512,"content":"预知后事如何，请看下回分解😀","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1538307493,"ip_address":"","comment_id":29216,"utype":1}],"discussion_count":1,"race_medal":0,"score":7,"product_id":100006601,"comment_content":"华仔老师，这个服务网关具体指的是什么啊？还是没太理解清除？比如长链服务的网关？这个网关的作用是什么啊？路由分发？负载？","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":428642,"discussion_content":"这是最常见的做法，你可以思考一下为什么对外用HTTP对内用RPC，而不是反过来","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1542006260,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":28355,"user_name":"奋斗心","can_delete":false,"product_type":"c1","uid":1247286,"ip_address":"","ucode":"06A195AB0B6570","user_header":"https://static001.geekbang.org/account/avatar/00/13/08/36/98be3d69.jpg","comment_is_top":false,"comment_ctime":1538059720,"is_pvip":false,"replies":[{"id":10262,"content":"后面有讲","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1538103953,"ip_address":"","comment_id":28355,"utype":1}],"discussion_count":1,"race_medal":0,"score":7,"product_id":100006601,"comment_content":"微服务太多\n通过：微服务分层，分类，通过网关提供服务。具体的相关内容在哪可以找","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":425519,"discussion_content":"预知后事如何，请看下回分解😀","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1538307493,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":27832,"user_name":"Karl","can_delete":false,"product_type":"c1","uid":1112156,"ip_address":"","ucode":"613BA676CE60B4","user_header":"https://static001.geekbang.org/account/avatar/00/10/f8/5c/9e3f1ea3.jpg","comment_is_top":false,"comment_ctime":1537952123,"is_pvip":false,"replies":[{"id":10179,"content":"你们应该是过度设计了","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1538051183,"ip_address":"","comment_id":27832,"utype":1}],"discussion_count":1,"race_medal":0,"score":8,"product_id":100006601,"comment_content":"文中说的问题 深有体会！服务与服务之间调用失败难以定位，因为这个问题我们也做了服务调用链路日志监控，但还不完善。因为服务拆分数据存储在不同的库，导致统计报表，一些实时查询缓慢。部署耗时3个环境，多个服务简直是蛋疼。 目前没有自动化部署，自动化测试，后端开发3人。 因为是新产品试用阶段，根据用户反馈不断修改增加功能。因为没控制好拆分和架构师的指导目前项目显得有点臃肿。基于一路走过来的坑，我感觉新项目开始，需要不明确，功能逻辑反复推翻，未有一套完整的微服务架构。基础设施不完善的情况下不要实施微服务，前期实施单体，业务功能稳定后有一定的微服务经验才实施微服务。","like_count":0},{"had_liked":false,"id":25242,"user_name":"万物皆导","can_delete":false,"product_type":"c1","uid":1202189,"ip_address":"","ucode":"44BFD0E26D33B4","user_header":"https://static001.geekbang.org/account/avatar/00/12/58/0d/6524b77d.jpg","comment_is_top":false,"comment_ctime":1537276576,"is_pvip":false,"replies":[{"id":9253,"content":"那你又回到了大一统系统时代，大一统系统有其它更多问题😄","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1537341857,"ip_address":"","comment_id":25242,"utype":1}],"discussion_count":1,"race_medal":0,"score":8,"product_id":100006601,"comment_content":"我道不是明白为什么a服务调b服务，然后b服务调c服务？这样设计不会造成雪崩效应？？我们都学过电路，串联电路上只要有一个电路不通，那均崩溃，我们系统也一样，总有个集装箱，去组装这些微服务的各种数据，不是更好？？根据具体业务能否异步去取不同微服务的内容，这样性能也不会差到哪去。","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":425050,"discussion_content":"你们应该是过度设计了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1538051183,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":21708,"user_name":"呵呵","can_delete":false,"product_type":"c1","uid":1052862,"ip_address":"","ucode":"986CC73CFBBC67","user_header":"","comment_is_top":false,"comment_ctime":1535262629,"is_pvip":false,"replies":[{"id":7681,"content":"你可以这么理解，每个系统对外提供的接口协议都是一样的就是服务拆分，每个系统的接口协议不同，需要中间件来转换，那就是ESB","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1535275144,"ip_address":"","comment_id":21708,"utype":1}],"discussion_count":1,"race_medal":0,"score":8,"product_id":100006601,"comment_content":"之前公司把业务是分为几个大系统，通过hessian进行通信，请问老师这算是什么架构，这个架构师是支付宝过来的。还有系统间可以直接调用，什么情况下需要esb,它究竟有什么用","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":424232,"discussion_content":"那你又回到了大一统系统时代，大一统系统有其它更多问题😄","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1537341857,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":21568,"user_name":"sodarfish","can_delete":false,"product_type":"c1","uid":1060635,"ip_address":"","ucode":"702FD9E4007111","user_header":"https://static001.geekbang.org/account/avatar/00/10/2f/1b/c8ff4d7f.jpg","comment_is_top":false,"comment_ctime":1535169991,"is_pvip":false,"replies":[{"id":7707,"content":"合适就好，太高逼格可能问题更多，参考架构设计的其中一条原则😄","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1535276730,"ip_address":"","comment_id":21568,"utype":1}],"discussion_count":1,"race_medal":0,"score":8,"product_id":100006601,"comment_content":"像我们公司这种:  产品划分为几个大应用，每个应用暴露出来一系列rpc接口，部分公共逻辑拆分为小应用，也是暴露rpc接口。系统之间就通过rpc交互，中间加个nginx做负载均衡;  没有服务发现和配置中心，因为接口不是很多，都靠配置文件手工管理。 算不算是比较low的微服务?   ","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":422745,"discussion_content":"合适就好，太高逼格可能问题更多，参考架构设计的其中一条原则😄","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1535276730,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":21554,"user_name":"文竹","can_delete":false,"product_type":"c1","uid":1103167,"ip_address":"","ucode":"74413B1975976B","user_header":"https://static001.geekbang.org/account/avatar/00/10/d5/3f/80bf4841.jpg","comment_is_top":false,"comment_ctime":1535166978,"is_pvip":false,"replies":[{"id":7708,"content":"按照演进原则判断即可，先发展业务","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1535276787,"ip_address":"","comment_id":21554,"utype":1}],"discussion_count":1,"race_medal":0,"score":8,"product_id":100006601,"comment_content":"公司业务用了微服务，但微服务相关的基础设施还没有做，想当于入门阶段。公司处于起步阶段，业务非常简单，没有精力花费在基础设施的搭建上。\n\n已完成：\n1、API网关做统一出入口，统一认证和服务级别ACL控制，流量限制，IP黑白名单。\n\n未完成：\n1、统一配置中心、服务注册中心、服务熔断\n2、微服务调用链路监控\n3、自动化测试，自动化运维","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":422734,"discussion_content":"按照演进原则判断即可，先发展业务","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1535276787,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":18434,"user_name":"刘鹏","can_delete":false,"product_type":"c1","uid":1119705,"ip_address":"","ucode":"7A13AA1968E0CC","user_header":"https://static001.geekbang.org/account/avatar/00/11/15/d9/b01d8221.jpg","comment_is_top":false,"comment_ctime":1533304308,"is_pvip":false,"replies":[{"id":6434,"content":"需要微服务基础设施来解决你的问题","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1533305295,"ip_address":"","comment_id":18434,"utype":1}],"discussion_count":1,"race_medal":0,"score":8,"product_id":100006601,"comment_content":"App后台设计了用户、LBS、商品、UGC、订单&amp;支付、活动等微服务，然后由API根据不同功能模块串联提供给客户端。服务之间通过rpc通信。\n优点：\n（1）独立部署，性能优化容易\n（2）便于分工，实现相互独立&amp;透明\n缺点：\n（1）需求开发沟通成本高（尤其当新增终端时）\n（2）线上排查问题慢（链路长，多机部署）","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":421055,"discussion_content":"service mesh就是嫌弃微服务基础设施太庞大了，需要应用感知","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1532577943,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":17141,"user_name":"r00k1t","can_delete":false,"product_type":"c1","uid":1047346,"ip_address":"","ucode":"1D289C3BF87BA3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fb/32/efa29138.jpg","comment_is_top":false,"comment_ctime":1532450552,"is_pvip":false,"replies":[{"id":6016,"content":"service mesh就是嫌弃微服务基础设施太庞大了，需要应用感知","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1532577943,"ip_address":"","comment_id":17141,"utype":1}],"discussion_count":1,"race_medal":0,"score":8,"product_id":100006601,"comment_content":"怎么看待最近比较火热的ServiceMesh之于微服务和ESB之于SOA的关系呢？感觉其实都是为了解决同样的问题。","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420952,"discussion_content":"可以将微服务分层或者分类，每一层对外通过网关提供服务","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1532425173,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":16865,"user_name":"枫晴 andy","can_delete":false,"product_type":"c1","uid":1050830,"ip_address":"","ucode":"10ABBD7E7561A8","user_header":"https://static001.geekbang.org/account/avatar/00/10/08/ce/f7d637fb.jpg","comment_is_top":false,"comment_ctime":1532263395,"is_pvip":false,"replies":[{"id":5940,"content":"可以将微服务分层或者分类，每一层对外通过网关提供服务","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1532425173,"ip_address":"","comment_id":16865,"utype":1}],"discussion_count":1,"race_medal":0,"score":8,"product_id":100006601,"comment_content":"上次在深圳的ArchSummit，菜鸟网络的一个架构师说他们的微服务成千上万，内部复杂的调用和逻辑关系没有一个人能完全搞清楚。这个怎么破啊？😂😂😂","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420729,"discussion_content":"掉到坑了😂","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1531877122,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":16254,"user_name":"kyll","can_delete":false,"product_type":"c1","uid":1103329,"ip_address":"","ucode":"2425DCF5753786","user_header":"https://static001.geekbang.org/account/avatar/00/10/d5/e1/a05a9e22.jpg","comment_is_top":false,"comment_ctime":1531868392,"is_pvip":false,"replies":[{"id":5613,"content":"掉到坑了😂","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1531877122,"ip_address":"","comment_id":16254,"utype":1}],"discussion_count":1,"race_medal":0,"score":8,"product_id":100006601,"comment_content":"公司在决定使用微服务的时候，连服务注册发现，配置中心等基础设施组件都没有，业务就同步开发，最后造成了框架组件需要改造，业务却抵制的状况。","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420729,"discussion_content":"掉到坑了😂","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1531877122,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":16253,"user_name":"kyll","can_delete":false,"product_type":"c1","uid":1103329,"ip_address":"","ucode":"2425DCF5753786","user_header":"https://static001.geekbang.org/account/avatar/00/10/d5/e1/a05a9e22.jpg","comment_is_top":false,"comment_ctime":1531868094,"is_pvip":false,"replies":[{"id":5614,"content":"是的，微服务是开发，测试，运维都需要改变，刚开始肯定不习惯","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1531877329,"ip_address":"","comment_id":16253,"utype":1}],"discussion_count":1,"race_medal":0,"score":8,"product_id":100006601,"comment_content":"公司正在进行微服务的改造，过程确实很痛苦，不光是要在框架上做变革，开发运维的思维意识也需要改变。","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420728,"discussion_content":"是的，微服务是开发，测试，运维都需要改变，刚开始肯定不习惯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1531877329,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":27832,"user_name":"Karl","can_delete":false,"product_type":"c1","uid":1112156,"ip_address":"","ucode":"613BA676CE60B4","user_header":"https://static001.geekbang.org/account/avatar/00/10/f8/5c/9e3f1ea3.jpg","comment_is_top":false,"comment_ctime":1537952123,"is_pvip":false,"replies":[{"id":10179,"content":"你们应该是过度设计了","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1538051183,"ip_address":"","comment_id":27832,"utype":1}],"discussion_count":1,"race_medal":0,"score":8,"product_id":100006601,"comment_content":"文中说的问题 深有体会！服务与服务之间调用失败难以定位，因为这个问题我们也做了服务调用链路日志监控，但还不完善。因为服务拆分数据存储在不同的库，导致统计报表，一些实时查询缓慢。部署耗时3个环境，多个服务简直是蛋疼。 目前没有自动化部署，自动化测试，后端开发3人。 因为是新产品试用阶段，根据用户反馈不断修改增加功能。因为没控制好拆分和架构师的指导目前项目显得有点臃肿。基于一路走过来的坑，我感觉新项目开始，需要不明确，功能逻辑反复推翻，未有一套完整的微服务架构。基础设施不完善的情况下不要实施微服务，前期实施单体，业务功能稳定后有一定的微服务经验才实施微服务。","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":425050,"discussion_content":"你们应该是过度设计了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1538051183,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":25242,"user_name":"万物皆导","can_delete":false,"product_type":"c1","uid":1202189,"ip_address":"","ucode":"44BFD0E26D33B4","user_header":"https://static001.geekbang.org/account/avatar/00/12/58/0d/6524b77d.jpg","comment_is_top":false,"comment_ctime":1537276576,"is_pvip":false,"replies":[{"id":9253,"content":"那你又回到了大一统系统时代，大一统系统有其它更多问题😄","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1537341857,"ip_address":"","comment_id":25242,"utype":1}],"discussion_count":1,"race_medal":0,"score":8,"product_id":100006601,"comment_content":"我道不是明白为什么a服务调b服务，然后b服务调c服务？这样设计不会造成雪崩效应？？我们都学过电路，串联电路上只要有一个电路不通，那均崩溃，我们系统也一样，总有个集装箱，去组装这些微服务的各种数据，不是更好？？根据具体业务能否异步去取不同微服务的内容，这样性能也不会差到哪去。","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":424232,"discussion_content":"那你又回到了大一统系统时代，大一统系统有其它更多问题😄","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1537341857,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":21708,"user_name":"呵呵","can_delete":false,"product_type":"c1","uid":1052862,"ip_address":"","ucode":"986CC73CFBBC67","user_header":"","comment_is_top":false,"comment_ctime":1535262629,"is_pvip":false,"replies":[{"id":7681,"content":"你可以这么理解，每个系统对外提供的接口协议都是一样的就是服务拆分，每个系统的接口协议不同，需要中间件来转换，那就是ESB","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1535275144,"ip_address":"","comment_id":21708,"utype":1}],"discussion_count":1,"race_medal":0,"score":8,"product_id":100006601,"comment_content":"之前公司把业务是分为几个大系统，通过hessian进行通信，请问老师这算是什么架构，这个架构师是支付宝过来的。还有系统间可以直接调用，什么情况下需要esb,它究竟有什么用","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":422822,"discussion_content":"你可以这么理解，每个系统对外提供的接口协议都是一样的就是服务拆分，每个系统的接口协议不同，需要中间件来转换，那就是ESB","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1535275144,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":21568,"user_name":"sodarfish","can_delete":false,"product_type":"c1","uid":1060635,"ip_address":"","ucode":"702FD9E4007111","user_header":"https://static001.geekbang.org/account/avatar/00/10/2f/1b/c8ff4d7f.jpg","comment_is_top":false,"comment_ctime":1535169991,"is_pvip":false,"replies":[{"id":7707,"content":"合适就好，太高逼格可能问题更多，参考架构设计的其中一条原则😄","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1535276730,"ip_address":"","comment_id":21568,"utype":1}],"discussion_count":1,"race_medal":0,"score":8,"product_id":100006601,"comment_content":"像我们公司这种:  产品划分为几个大应用，每个应用暴露出来一系列rpc接口，部分公共逻辑拆分为小应用，也是暴露rpc接口。系统之间就通过rpc交互，中间加个nginx做负载均衡;  没有服务发现和配置中心，因为接口不是很多，都靠配置文件手工管理。 算不算是比较low的微服务?   ","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":422822,"discussion_content":"你可以这么理解，每个系统对外提供的接口协议都是一样的就是服务拆分，每个系统的接口协议不同，需要中间件来转换，那就是ESB","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1535275144,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":21554,"user_name":"文竹","can_delete":false,"product_type":"c1","uid":1103167,"ip_address":"","ucode":"74413B1975976B","user_header":"https://static001.geekbang.org/account/avatar/00/10/d5/3f/80bf4841.jpg","comment_is_top":false,"comment_ctime":1535166978,"is_pvip":false,"replies":[{"id":7708,"content":"按照演进原则判断即可，先发展业务","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1535276787,"ip_address":"","comment_id":21554,"utype":1}],"discussion_count":1,"race_medal":0,"score":8,"product_id":100006601,"comment_content":"公司业务用了微服务，但微服务相关的基础设施还没有做，想当于入门阶段。公司处于起步阶段，业务非常简单，没有精力花费在基础设施的搭建上。\n\n已完成：\n1、API网关做统一出入口，统一认证和服务级别ACL控制，流量限制，IP黑白名单。\n\n未完成：\n1、统一配置中心、服务注册中心、服务熔断\n2、微服务调用链路监控\n3、自动化测试，自动化运维","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":422745,"discussion_content":"合适就好，太高逼格可能问题更多，参考架构设计的其中一条原则😄","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1535276730,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":18434,"user_name":"刘鹏","can_delete":false,"product_type":"c1","uid":1119705,"ip_address":"","ucode":"7A13AA1968E0CC","user_header":"https://static001.geekbang.org/account/avatar/00/11/15/d9/b01d8221.jpg","comment_is_top":false,"comment_ctime":1533304308,"is_pvip":false,"replies":[{"id":6434,"content":"需要微服务基础设施来解决你的问题","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1533305295,"ip_address":"","comment_id":18434,"utype":1}],"discussion_count":1,"race_medal":0,"score":8,"product_id":100006601,"comment_content":"App后台设计了用户、LBS、商品、UGC、订单&amp;支付、活动等微服务，然后由API根据不同功能模块串联提供给客户端。服务之间通过rpc通信。\n优点：\n（1）独立部署，性能优化容易\n（2）便于分工，实现相互独立&amp;透明\n缺点：\n（1）需求开发沟通成本高（尤其当新增终端时）\n（2）线上排查问题慢（链路长，多机部署）","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":421525,"discussion_content":"需要微服务基础设施来解决你的问题","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1533305295,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":17141,"user_name":"r00k1t","can_delete":false,"product_type":"c1","uid":1047346,"ip_address":"","ucode":"1D289C3BF87BA3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fb/32/efa29138.jpg","comment_is_top":false,"comment_ctime":1532450552,"is_pvip":false,"replies":[{"id":6016,"content":"service mesh就是嫌弃微服务基础设施太庞大了，需要应用感知","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1532577943,"ip_address":"","comment_id":17141,"utype":1}],"discussion_count":1,"race_medal":0,"score":8,"product_id":100006601,"comment_content":"怎么看待最近比较火热的ServiceMesh之于微服务和ESB之于SOA的关系呢？感觉其实都是为了解决同样的问题。","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":422734,"discussion_content":"按照演进原则判断即可，先发展业务","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1535276787,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":16865,"user_name":"枫晴 andy","can_delete":false,"product_type":"c1","uid":1050830,"ip_address":"","ucode":"10ABBD7E7561A8","user_header":"https://static001.geekbang.org/account/avatar/00/10/08/ce/f7d637fb.jpg","comment_is_top":false,"comment_ctime":1532263395,"is_pvip":false,"replies":[{"id":5940,"content":"可以将微服务分层或者分类，每一层对外通过网关提供服务","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1532425173,"ip_address":"","comment_id":16865,"utype":1}],"discussion_count":1,"race_medal":0,"score":8,"product_id":100006601,"comment_content":"上次在深圳的ArchSummit，菜鸟网络的一个架构师说他们的微服务成千上万，内部复杂的调用和逻辑关系没有一个人能完全搞清楚。这个怎么破啊？😂😂😂","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":421525,"discussion_content":"需要微服务基础设施来解决你的问题","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1533305295,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":16254,"user_name":"kyll","can_delete":false,"product_type":"c1","uid":1103329,"ip_address":"","ucode":"2425DCF5753786","user_header":"https://static001.geekbang.org/account/avatar/00/10/d5/e1/a05a9e22.jpg","comment_is_top":false,"comment_ctime":1531868392,"is_pvip":false,"replies":[{"id":5613,"content":"掉到坑了😂","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1531877122,"ip_address":"","comment_id":16254,"utype":1}],"discussion_count":1,"race_medal":0,"score":8,"product_id":100006601,"comment_content":"公司在决定使用微服务的时候，连服务注册发现，配置中心等基础设施组件都没有，业务就同步开发，最后造成了框架组件需要改造，业务却抵制的状况。","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":421055,"discussion_content":"service mesh就是嫌弃微服务基础设施太庞大了，需要应用感知","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1532577943,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":16253,"user_name":"kyll","can_delete":false,"product_type":"c1","uid":1103329,"ip_address":"","ucode":"2425DCF5753786","user_header":"https://static001.geekbang.org/account/avatar/00/10/d5/e1/a05a9e22.jpg","comment_is_top":false,"comment_ctime":1531868094,"is_pvip":false,"replies":[{"id":5614,"content":"是的，微服务是开发，测试，运维都需要改变，刚开始肯定不习惯","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1531877329,"ip_address":"","comment_id":16253,"utype":1}],"discussion_count":1,"race_medal":0,"score":8,"product_id":100006601,"comment_content":"公司正在进行微服务的改造，过程确实很痛苦，不光是要在框架上做变革，开发运维的思维意识也需要改变。","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420952,"discussion_content":"可以将微服务分层或者分类，每一层对外通过网关提供服务","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1532425173,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":16164,"user_name":"星座","can_delete":false,"product_type":"c1","uid":1021545,"ip_address":"","ucode":"BD28D9712C9D03","user_header":"","comment_is_top":false,"comment_ctime":1531805836,"is_pvip":false,"replies":[{"id":5586,"content":"搞好微服务基础设施建设，后面章节会讲","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1531810656,"ip_address":"","comment_id":16164,"utype":1}],"discussion_count":1,"race_medal":0,"score":9,"product_id":100006601,"comment_content":"我们用微服务改造了系统，老师文中说的问题基本都遇到了，开始没有服务治理，导致定位问题非常困难，还有就是每服务的版本维护是一个问题，现在服务越来越多，版本要手工一个一个去改，老师有没有好的办法","like_count":0},{"had_liked":false,"id":16130,"user_name":"凡凡","can_delete":false,"product_type":"c1","uid":1056142,"ip_address":"","ucode":"134C1E1E6B22BF","user_header":"https://static001.geekbang.org/account/avatar/00/10/1d/8e/0a546871.jpg","comment_is_top":false,"comment_ctime":1531792798,"is_pvip":false,"replies":[{"id":5590,"content":"HTTP协议解析很简单的呀，可以试试，阿里也有MTOP承担类似职责","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1531810869,"ip_address":"","comment_id":16130,"utype":1}],"discussion_count":1,"race_medal":0,"score":9,"product_id":100006601,"comment_content":"http转rpc我们卡在了怎么去掉模型和接口这两个骨架代码这里，有没有办法可以不加入骨架代码，按照既定的url自动解析，然后转发？或者说只能使用协议解析实现？\n\n我们用的thrift，回头我需要确认一下thrift的protocol在编解码的时候，有没有写入模型的类型信息，如果没有的话，实现起来感觉不会太复杂，如果包含模型的类型信息，就和骨架代码强耦合了。\n\n阿里如何处理的这种情况呢？","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420693,"discussion_content":"搞好微服务基础设施建设，后面章节会讲","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1531810656,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":16119,"user_name":"云学","can_delete":false,"product_type":"c1","uid":1027233,"ip_address":"","ucode":"366AE90BA06356","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ac/a1/43d83698.jpg","comment_is_top":false,"comment_ctime":1531790495,"is_pvip":false,"replies":[{"id":5559,"content":"控制逻辑具体指什么？","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1531791521,"ip_address":"","comment_id":16119,"utype":1}],"discussion_count":1,"race_medal":0,"score":9,"product_id":100006601,"comment_content":"软件的复杂度由业务逻辑和控制逻辑决定，前者决定了复杂度上限，微服务架构仅能帮助改善控制逻辑复杂度。","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420680,"discussion_content":"HTTP协议解析很简单的呀，可以试试，阿里也有MTOP承担类似职责","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1531810869,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":16096,"user_name":"王维","can_delete":false,"product_type":"c1","uid":1091684,"ip_address":"","ucode":"836E6CDB1A56BA","user_header":"https://static001.geekbang.org/account/avatar/00/10/a8/64/965e0d9b.jpg","comment_is_top":false,"comment_ctime":1531787207,"is_pvip":false,"replies":[{"id":5564,"content":"不一定，微服务不单单是将ESB改为HTTP，后面会深入阐述","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1531791883,"ip_address":"","comment_id":16096,"utype":1}],"discussion_count":1,"race_medal":0,"score":9,"product_id":100006601,"comment_content":"按照这样说，用Web API方式构造的服务，也是属于微服务吗？","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420676,"discussion_content":"控制逻辑具体指什么？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1531791521,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":16088,"user_name":"hello","can_delete":false,"product_type":"c1","uid":1103163,"ip_address":"","ucode":"6E24DDD2981001","user_header":"","comment_is_top":false,"comment_ctime":1531785173,"is_pvip":false,"replies":[{"id":5565,"content":"是的，需要适配每个系统的每种接口协议和数据格式","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1531791911,"ip_address":"","comment_id":16088,"utype":1}],"discussion_count":1,"race_medal":0,"score":9,"product_id":100006601,"comment_content":"请问李老师，esb是单独的一个系统吗？esb需要知道每个系统的接口和协议吗？","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420659,"discussion_content":"是的，需要适配每个系统的每种接口协议和数据格式","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1531791911,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":16076,"user_name":"krugle","can_delete":false,"product_type":"c1","uid":1045770,"ip_address":"","ucode":"60A7D9189C01BE","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f5/0a/077b9922.jpg","comment_is_top":false,"comment_ctime":1531761549,"is_pvip":false,"replies":[{"id":5566,"content":"我了解是没有😀","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1531791940,"ip_address":"","comment_id":16076,"utype":1}],"discussion_count":1,"race_medal":0,"score":9,"product_id":100006601,"comment_content":"go语言有什么微服务全家桶之类的吗，找了几个不理想,没java多","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420655,"discussion_content":"我了解是没有😀","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1531791940,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":15939,"user_name":"霍潘","can_delete":false,"product_type":"c1","uid":1108336,"ip_address":"","ucode":"98933232BA9C1F","user_header":"https://static001.geekbang.org/account/avatar/00/10/e9/70/266634f7.jpg","comment_is_top":false,"comment_ctime":1531664474,"is_pvip":false,"replies":[{"id":5525,"content":"你们需要一个架构师😂","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1531720932,"ip_address":"","comment_id":15939,"utype":1}],"discussion_count":1,"race_medal":0,"score":9,"product_id":100006601,"comment_content":"很多情况都是为了为微服务而微服务，。我们公司也是采用了微服务，但结果很不理想，改造后的系统每天都会有10到30分钟出问题，使用者苦不堪言","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420606,"discussion_content":"你们需要一个架构师😂","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1531720932,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":15922,"user_name":"小喵喵","can_delete":false,"product_type":"c1","uid":1062444,"ip_address":"","ucode":"FDBBB2A59DB8B6","user_header":"https://static001.geekbang.org/account/avatar/00/10/36/2c/8bd4be3a.jpg","comment_is_top":false,"comment_ctime":1531652703,"is_pvip":false,"replies":[{"id":5527,"content":"有专门章节介绍","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1531721072,"ip_address":"","comment_id":15922,"utype":1}],"discussion_count":1,"race_medal":0,"score":9,"product_id":100006601,"comment_content":"搭建微服务架构需要搭建那些基础设施呢？","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420606,"discussion_content":"你们需要一个架构师😂","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1531720932,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":15888,"user_name":"彡工鸟","can_delete":false,"product_type":"c1","uid":1108881,"ip_address":"","ucode":"37867BF7151F33","user_header":"https://static001.geekbang.org/account/avatar/00/10/eb/91/12612612.jpg","comment_is_top":false,"comment_ctime":1531615370,"is_pvip":false,"replies":[{"id":5530,"content":"焦油坑😄","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1531721323,"ip_address":"","comment_id":15888,"utype":1}],"discussion_count":1,"race_medal":0,"score":9,"product_id":100006601,"comment_content":"个人感觉soa与微服务的最大区别在他们出现的背景就可以可清晰的标明了。一个面向多系统集成，一个主打系统内拆分。至于微服务的坑，部署上微服务了，思想上还没有(除了把系统拆小之外，而且拆的原则还不清不楚，剩下所有的一切还按老路走)😓","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420601,"discussion_content":"有专门章节介绍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1531721072,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":15855,"user_name":"mini希","can_delete":false,"product_type":"c1","uid":1043539,"ip_address":"","ucode":"54DFFE0CE0C7EF","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ec/53/dcec6fdc.jpg","comment_is_top":false,"comment_ctime":1531560619,"is_pvip":false,"replies":[{"id":5532,"content":"减少很多，但是不灵活","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1531721377,"ip_address":"","comment_id":15855,"utype":1}],"discussion_count":1,"race_medal":1,"score":9,"product_id":100006601,"comment_content":"基于Spring Cloud或者其他框架是不是可以减少一些成本","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420574,"discussion_content":"减少很多，但是不灵活","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1531721377,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":16164,"user_name":"星座","can_delete":false,"product_type":"c1","uid":1021545,"ip_address":"","ucode":"BD28D9712C9D03","user_header":"","comment_is_top":false,"comment_ctime":1531805836,"is_pvip":false,"replies":[{"id":5586,"content":"搞好微服务基础设施建设，后面章节会讲","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1531810656,"ip_address":"","comment_id":16164,"utype":1}],"discussion_count":1,"race_medal":0,"score":9,"product_id":100006601,"comment_content":"我们用微服务改造了系统，老师文中说的问题基本都遇到了，开始没有服务治理，导致定位问题非常困难，还有就是每服务的版本维护是一个问题，现在服务越来越多，版本要手工一个一个去改，老师有没有好的办法","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420693,"discussion_content":"搞好微服务基础设施建设，后面章节会讲","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1531810656,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":16130,"user_name":"凡凡","can_delete":false,"product_type":"c1","uid":1056142,"ip_address":"","ucode":"134C1E1E6B22BF","user_header":"https://static001.geekbang.org/account/avatar/00/10/1d/8e/0a546871.jpg","comment_is_top":false,"comment_ctime":1531792798,"is_pvip":false,"replies":[{"id":5590,"content":"HTTP协议解析很简单的呀，可以试试，阿里也有MTOP承担类似职责","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1531810869,"ip_address":"","comment_id":16130,"utype":1}],"discussion_count":1,"race_medal":0,"score":9,"product_id":100006601,"comment_content":"http转rpc我们卡在了怎么去掉模型和接口这两个骨架代码这里，有没有办法可以不加入骨架代码，按照既定的url自动解析，然后转发？或者说只能使用协议解析实现？\n\n我们用的thrift，回头我需要确认一下thrift的protocol在编解码的时候，有没有写入模型的类型信息，如果没有的话，实现起来感觉不会太复杂，如果包含模型的类型信息，就和骨架代码强耦合了。\n\n阿里如何处理的这种情况呢？","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420680,"discussion_content":"HTTP协议解析很简单的呀，可以试试，阿里也有MTOP承担类似职责","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1531810869,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":16119,"user_name":"云学","can_delete":false,"product_type":"c1","uid":1027233,"ip_address":"","ucode":"366AE90BA06356","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ac/a1/43d83698.jpg","comment_is_top":false,"comment_ctime":1531790495,"is_pvip":false,"replies":[{"id":5559,"content":"控制逻辑具体指什么？","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1531791521,"ip_address":"","comment_id":16119,"utype":1}],"discussion_count":1,"race_medal":0,"score":9,"product_id":100006601,"comment_content":"软件的复杂度由业务逻辑和控制逻辑决定，前者决定了复杂度上限，微服务架构仅能帮助改善控制逻辑复杂度。","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420676,"discussion_content":"控制逻辑具体指什么？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1531791521,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":16096,"user_name":"王维","can_delete":false,"product_type":"c1","uid":1091684,"ip_address":"","ucode":"836E6CDB1A56BA","user_header":"https://static001.geekbang.org/account/avatar/00/10/a8/64/965e0d9b.jpg","comment_is_top":false,"comment_ctime":1531787207,"is_pvip":false,"replies":[{"id":5564,"content":"不一定，微服务不单单是将ESB改为HTTP，后面会深入阐述","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1531791883,"ip_address":"","comment_id":16096,"utype":1}],"discussion_count":1,"race_medal":0,"score":9,"product_id":100006601,"comment_content":"按照这样说，用Web API方式构造的服务，也是属于微服务吗？","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420665,"discussion_content":"不一定，微服务不单单是将ESB改为HTTP，后面会深入阐述","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1531791883,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":16088,"user_name":"hello","can_delete":false,"product_type":"c1","uid":1103163,"ip_address":"","ucode":"6E24DDD2981001","user_header":"","comment_is_top":false,"comment_ctime":1531785173,"is_pvip":false,"replies":[{"id":5565,"content":"是的，需要适配每个系统的每种接口协议和数据格式","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1531791911,"ip_address":"","comment_id":16088,"utype":1}],"discussion_count":1,"race_medal":0,"score":9,"product_id":100006601,"comment_content":"请问李老师，esb是单独的一个系统吗？esb需要知道每个系统的接口和协议吗？","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420665,"discussion_content":"不一定，微服务不单单是将ESB改为HTTP，后面会深入阐述","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1531791883,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":16076,"user_name":"krugle","can_delete":false,"product_type":"c1","uid":1045770,"ip_address":"","ucode":"60A7D9189C01BE","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f5/0a/077b9922.jpg","comment_is_top":false,"comment_ctime":1531761549,"is_pvip":false,"replies":[{"id":5566,"content":"我了解是没有😀","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1531791940,"ip_address":"","comment_id":16076,"utype":1}],"discussion_count":1,"race_medal":0,"score":9,"product_id":100006601,"comment_content":"go语言有什么微服务全家桶之类的吗，找了几个不理想,没java多","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420659,"discussion_content":"是的，需要适配每个系统的每种接口协议和数据格式","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1531791911,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":15939,"user_name":"霍潘","can_delete":false,"product_type":"c1","uid":1108336,"ip_address":"","ucode":"98933232BA9C1F","user_header":"https://static001.geekbang.org/account/avatar/00/10/e9/70/266634f7.jpg","comment_is_top":false,"comment_ctime":1531664474,"is_pvip":false,"replies":[{"id":5525,"content":"你们需要一个架构师😂","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1531720932,"ip_address":"","comment_id":15939,"utype":1}],"discussion_count":1,"race_medal":0,"score":9,"product_id":100006601,"comment_content":"很多情况都是为了为微服务而微服务，。我们公司也是采用了微服务，但结果很不理想，改造后的系统每天都会有10到30分钟出问题，使用者苦不堪言","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420655,"discussion_content":"我了解是没有😀","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1531791940,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":15922,"user_name":"小喵喵","can_delete":false,"product_type":"c1","uid":1062444,"ip_address":"","ucode":"FDBBB2A59DB8B6","user_header":"https://static001.geekbang.org/account/avatar/00/10/36/2c/8bd4be3a.jpg","comment_is_top":false,"comment_ctime":1531652703,"is_pvip":false,"replies":[{"id":5527,"content":"有专门章节介绍","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1531721072,"ip_address":"","comment_id":15922,"utype":1}],"discussion_count":1,"race_medal":0,"score":9,"product_id":100006601,"comment_content":"搭建微服务架构需要搭建那些基础设施呢？","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420601,"discussion_content":"有专门章节介绍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1531721072,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":15888,"user_name":"彡工鸟","can_delete":false,"product_type":"c1","uid":1108881,"ip_address":"","ucode":"37867BF7151F33","user_header":"https://static001.geekbang.org/account/avatar/00/10/eb/91/12612612.jpg","comment_is_top":false,"comment_ctime":1531615370,"is_pvip":false,"replies":[{"id":5530,"content":"焦油坑😄","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1531721323,"ip_address":"","comment_id":15888,"utype":1}],"discussion_count":1,"race_medal":0,"score":9,"product_id":100006601,"comment_content":"个人感觉soa与微服务的最大区别在他们出现的背景就可以可清晰的标明了。一个面向多系统集成，一个主打系统内拆分。至于微服务的坑，部署上微服务了，思想上还没有(除了把系统拆小之外，而且拆的原则还不清不楚，剩下所有的一切还按老路走)😓","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420588,"discussion_content":"焦油坑😄","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1531721323,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":15855,"user_name":"mini希","can_delete":false,"product_type":"c1","uid":1043539,"ip_address":"","ucode":"54DFFE0CE0C7EF","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ec/53/dcec6fdc.jpg","comment_is_top":false,"comment_ctime":1531560619,"is_pvip":false,"replies":[{"id":5532,"content":"减少很多，但是不灵活","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1531721377,"ip_address":"","comment_id":15855,"utype":1}],"discussion_count":1,"race_medal":1,"score":9,"product_id":100006601,"comment_content":"基于Spring Cloud或者其他框架是不是可以减少一些成本","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420588,"discussion_content":"焦油坑😄","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1531721323,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":15852,"user_name":"Aec","can_delete":false,"product_type":"c1","uid":1086922,"ip_address":"","ucode":"A654FDDC5B5BBF","user_header":"https://static001.geekbang.org/account/avatar/00/10/95/ca/d503a2a0.jpg","comment_is_top":false,"comment_ctime":1531559288,"is_pvip":false,"replies":[{"id":5533,"content":"很多团队或者领导需要一些给自己镀金的东西😄😄\n","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1531721455,"ip_address":"","comment_id":15852,"utype":1}],"discussion_count":1,"race_medal":0,"score":10,"product_id":100006601,"comment_content":"看到上面的留言几个服务，就引入微服务。。杀鸡用牛刀啊。。还是先跑业务吧。。华而不实。。无论业务复杂度，流量，需求迭代。。4.5个人拆10，20个服务想啥呢","like_count":0},{"had_liked":false,"id":15833,"user_name":"小西","can_delete":false,"product_type":"c1","uid":1005478,"ip_address":"","ucode":"AC4208D7DA42CF","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/a6/d94643dc.jpg","comment_is_top":false,"comment_ctime":1531544127,"is_pvip":false,"replies":[{"id":5535,"content":"微服务","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1531721626,"ip_address":"","comment_id":15833,"utype":1}],"discussion_count":1,"race_medal":0,"score":10,"product_id":100006601,"comment_content":"李老师，Dubbo是属于SOA架构还是微服务架构？","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420569,"discussion_content":"微服务","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1531721626,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":15837,"user_name":"空档滑行","can_delete":false,"product_type":"c1","uid":1091611,"ip_address":"","ucode":"06A6A7F503FAA7","user_header":"https://static001.geekbang.org/account/avatar/00/10/a8/1b/ced1d171.jpg","comment_is_top":false,"comment_ctime":1531547180,"is_pvip":false,"replies":null,"discussion_count":6,"race_medal":0,"score":10,"product_id":100006601,"comment_content":"之前一家公司搞了一次完整的微服务改造，享受到了一些好处，但是文中说到的问题，大部分都碰上了。\n先说下好处，原来的单体应用都服务化了，扩容简单很多。功能隔离后之前一个bug导致系统挂掉的现象没了。问题责任定位划分的更清楚，比如之前大量慢sql无人管，现在通过监控快速找到开发责任人。\n再说下坏处，1.服务太多了，人不够啊。之前的架构师按照小的原则，把数据层，服务层，应用层严格拆分。一个人手上超过10几个服务...\n2.服务化不彻底，太多事手工干。服务监控只能监控一半指标，各种远程调用异常没人解决。运维只有打包发布做了自动化。可以想象下开发人员基本下改bug和发布的死循环中。服务网关没有，服务调用就是一张密密麻麻的网\n3.培训不到位，直接上阵，开发人员对微服务理解不到位，服务质量可想而知\n4.没有专职测试，自动化测试靠开发写脚本，谁有空啊，单元测试能写一个就算相当有觉悟了\n总结下来，做服务化改造首先问自己这些问题，业务真的需要微服务来解决吗？真的所有模块的问题都要微服务来解决吗？技术人员的配置和水平达到要求了吗？\n","like_count":52,"discussions":[{"author":{"id":1275690,"avatar":"https://static001.geekbang.org/account/avatar/00/13/77/2a/4f72941e.jpg","nickname":"cpzhao","note":"","ucode":"6B86D4D538BDF7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":305462,"discussion_content":"我这边团队刚好有人离职，现在几个人人手70+个微服务，一团乱😓","likes_number":7,"is_delete":false,"is_hidden":false,"ctime":1599929896,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1918112,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/44/a0/16d0d300.jpg","nickname":"ZHANGPING","note":"","ucode":"7108812981C996","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1275690,"avatar":"https://static001.geekbang.org/account/avatar/00/13/77/2a/4f72941e.jpg","nickname":"cpzhao","note":"","ucode":"6B86D4D538BDF7","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":384408,"discussion_content":"超人\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626574813,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":305462,"ip_address":"","group_id":0},"score":384408,"extra":""}]},{"author":{"id":1062848,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ersGSic8ib7OguJv6CJiaXY0s4n9C7Z51sWxTTljklFpq3ZAIWXoFTPV5oLo0GMTkqW5sYJRRnibNqOJQ/132","nickname":"walle斌","note":"","ucode":"0DB3243004951F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":303992,"discussion_content":"采坑，一个人负责20多个微服务，前期底子是外包搭建的。。。MD一个消息消费都TM给你整一个微服务，这TM按照项目收的外包费吗？ 绝对的负面例子","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1599445961,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1066752,"avatar":"https://static001.geekbang.org/account/avatar/00/10/47/00/3202bdf0.jpg","nickname":"piboye","note":"","ucode":"7CFD8712857A85","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301233,"discussion_content":"一个人负责10个人服务算啥，我他妈一天在5个不同项目切换写代码过😹","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1598449167,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1986739,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/50/b3/9269cd59.jpg","nickname":"LWD","note":"","ucode":"DDA444DB113C01","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":610758,"discussion_content":"说明是开发设计水平出现了问题","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1679742388,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1267535,"avatar":"https://static001.geekbang.org/account/avatar/00/13/57/4f/854505da.jpg","nickname":"烂番茄","note":"","ucode":"48C6A91ED8FD19","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2756,"discussion_content":"\n你遇到过的我也遇到过，尤其是服务没有网关，自动化过程只有打包！发布靠开发人员自己上去发布！一个开发人员手上管理好几个微服务","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563897174,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":15987,"user_name":"Neal","can_delete":false,"product_type":"c1","uid":1111680,"ip_address":"","ucode":"25F7926377EE1A","user_header":"https://static001.geekbang.org/account/avatar/00/10/f6/80/7dfdd3e3.jpg","comment_is_top":false,"comment_ctime":1531709363,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":10,"product_id":100006601,"comment_content":"1. 数据库拆不开\n2. 人手不够就两人","like_count":5},{"had_liked":false,"id":15975,"user_name":"问题究竟系边度","can_delete":false,"product_type":"c1","uid":1095284,"ip_address":"","ucode":"CA4F2C9A84F867","user_header":"https://static001.geekbang.org/account/avatar/00/10/b6/74/c63449b1.jpg","comment_is_top":false,"comment_ctime":1531702932,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":10,"product_id":100006601,"comment_content":"算是用了微服务。\n没有保证足够人力不要实施微服务。\n需求的功能拆分需要更资深的人做规划。\n业务没有到一定的复杂度不要实施微服务，不要追时髦。\n监控，部署，机器资源，服务接口管理是实施重点。\n\n","like_count":1},{"had_liked":false,"id":368541,"user_name":"第一月歌","can_delete":false,"product_type":"c1","uid":1160534,"ip_address":"广东","ucode":"E3D4F696C95468","user_header":"https://static001.geekbang.org/account/avatar/00/11/b5/56/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1676431457,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":10,"product_id":100006601,"comment_content":"看到这么多人都这么痛苦，我也就放心了","like_count":0},{"had_liked":false,"id":355085,"user_name":"杜秀清","can_delete":false,"product_type":"c1","uid":2952514,"ip_address":"上海","ucode":"4D33DD69E8D238","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJGiahPncXAMXlRibCVapHxib4V90Pxa56QQr6iatHmHn77YibSibWhdBe9YKxrD5ria9ZI4JfFjD1SecAmg/132","comment_is_top":false,"comment_ctime":1661070830,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":10,"product_id":100006601,"comment_content":"先将SOA拆分，再组合同类域服务组成微服务，再用K8S等这些解决自动化部署的问题","like_count":0},{"had_liked":false,"id":313176,"user_name":"Drake敏","can_delete":false,"product_type":"c1","uid":2734734,"ip_address":"","ucode":"38366767EFDC90","user_header":"https://static001.geekbang.org/account/avatar/00/29/ba/8e/4645afae.jpg","comment_is_top":false,"comment_ctime":1632302095,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":10,"product_id":100006601,"comment_content":"我们公司就是采用微服务，用了eurake这个来监控服务的情况。这样就能更快第一时间去检查服务的问题","like_count":0},{"had_liked":false,"id":288836,"user_name":"prader26","can_delete":false,"product_type":"c1","uid":1433707,"ip_address":"","ucode":"5EFFFC374ADECE","user_header":"https://static001.geekbang.org/account/avatar/00/15/e0/6b/f61d7466.jpg","comment_is_top":false,"comment_ctime":1618723563,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":10,"product_id":100006601,"comment_content":"微服务是一种和 SOA 相似但本质上不同的架构理念如下图所示，这种观点认为微服务和 SOA 只是有点类似，但本质上是不同的架构设计理念。\n相似点在于下图中交叉的地方，就是两者都关注“服务”，都是通过服务的拆分来解决可扩展性问题。\n本质上不同的地方在于几个核心理念的差异：是否有 ESB、服务的粒度、架构设计的目标等。\n微服务的陷阱：\n1服务划分过细，服务间关系复杂\n2服务数量太多，团队效率急剧下降\n3调用链太长，性能下降\n4调用链太长，问题定位困难\n5没有自动化支撑，无法快速交付\n6没有服务治理，微服务数量多了后管理混乱","like_count":0},{"had_liked":false,"id":244275,"user_name":"piboye","can_delete":false,"product_type":"c1","uid":1066752,"ip_address":"","ucode":"7CFD8712857A85","user_header":"https://static001.geekbang.org/account/avatar/00/10/47/00/3202bdf0.jpg","comment_is_top":false,"comment_ctime":1598448828,"is_pvip":true,"replies":null,"discussion_count":0,"race_medal":0,"score":10,"product_id":100006601,"comment_content":"k8s的dns来做最简单","like_count":0,"discussions":[{"author":{"id":1275690,"avatar":"https://static001.geekbang.org/account/avatar/00/13/77/2a/4f72941e.jpg","nickname":"cpzhao","note":"","ucode":"6B86D4D538BDF7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":305462,"discussion_content":"我这边团队刚好有人离职，现在几个人人手70+个微服务，一团乱😓","likes_number":7,"is_delete":false,"is_hidden":false,"ctime":1599929896,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1918112,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/44/a0/16d0d300.jpg","nickname":"ZHANGPING","note":"","ucode":"7108812981C996","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1275690,"avatar":"https://static001.geekbang.org/account/avatar/00/13/77/2a/4f72941e.jpg","nickname":"cpzhao","note":"","ucode":"6B86D4D538BDF7","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":384408,"discussion_content":"超人\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626574813,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":305462,"ip_address":"","group_id":0},"score":384408,"extra":""}]},{"author":{"id":1062848,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ersGSic8ib7OguJv6CJiaXY0s4n9C7Z51sWxTTljklFpq3ZAIWXoFTPV5oLo0GMTkqW5sYJRRnibNqOJQ/132","nickname":"walle斌","note":"","ucode":"0DB3243004951F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":303992,"discussion_content":"采坑，一个人负责20多个微服务，前期底子是外包搭建的。。。MD一个消息消费都TM给你整一个微服务，这TM按照项目收的外包费吗？ 绝对的负面例子","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1599445961,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1066752,"avatar":"https://static001.geekbang.org/account/avatar/00/10/47/00/3202bdf0.jpg","nickname":"piboye","note":"","ucode":"7CFD8712857A85","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301233,"discussion_content":"一个人负责10个人服务算啥，我他妈一天在5个不同项目切换写代码过😹","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1598449167,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1986739,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/50/b3/9269cd59.jpg","nickname":"LWD","note":"","ucode":"DDA444DB113C01","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":610758,"discussion_content":"说明是开发设计水平出现了问题","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1679742388,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1267535,"avatar":"https://static001.geekbang.org/account/avatar/00/13/57/4f/854505da.jpg","nickname":"烂番茄","note":"","ucode":"48C6A91ED8FD19","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2756,"discussion_content":"\n你遇到过的我也遇到过，尤其是服务没有网关，自动化过程只有打包！发布靠开发人员自己上去发布！一个开发人员手上管理好几个微服务","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563897174,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":15852,"user_name":"Aec","can_delete":false,"product_type":"c1","uid":1086922,"ip_address":"","ucode":"A654FDDC5B5BBF","user_header":"https://static001.geekbang.org/account/avatar/00/10/95/ca/d503a2a0.jpg","comment_is_top":false,"comment_ctime":1531559288,"is_pvip":false,"replies":[{"id":5533,"content":"很多团队或者领导需要一些给自己镀金的东西😄😄\n","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1531721455,"ip_address":"","comment_id":15852,"utype":1}],"discussion_count":1,"race_medal":0,"score":10,"product_id":100006601,"comment_content":"看到上面的留言几个服务，就引入微服务。。杀鸡用牛刀啊。。还是先跑业务吧。。华而不实。。无论业务复杂度，流量，需求迭代。。4.5个人拆10，20个服务想啥呢","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420572,"discussion_content":"很多团队或者领导需要一些给自己镀金的东西😄😄\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1531721455,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":15833,"user_name":"小西","can_delete":false,"product_type":"c1","uid":1005478,"ip_address":"","ucode":"AC4208D7DA42CF","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/a6/d94643dc.jpg","comment_is_top":false,"comment_ctime":1531544127,"is_pvip":false,"replies":[{"id":5535,"content":"微服务","user_name":"作者回复","user_name_real":"华仔","uid":1098920,"ctime":1531721626,"ip_address":"","comment_id":15833,"utype":1}],"discussion_count":1,"race_medal":0,"score":10,"product_id":100006601,"comment_content":"李老师，Dubbo是属于SOA架构还是微服务架构？","like_count":0,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420572,"discussion_content":"很多团队或者领导需要一些给自己镀金的东西😄😄\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1531721455,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":15837,"user_name":"空档滑行","can_delete":false,"product_type":"c1","uid":1091611,"ip_address":"","ucode":"06A6A7F503FAA7","user_header":"https://static001.geekbang.org/account/avatar/00/10/a8/1b/ced1d171.jpg","comment_is_top":false,"comment_ctime":1531547180,"is_pvip":false,"replies":null,"discussion_count":6,"race_medal":0,"score":10,"product_id":100006601,"comment_content":"之前一家公司搞了一次完整的微服务改造，享受到了一些好处，但是文中说到的问题，大部分都碰上了。\n先说下好处，原来的单体应用都服务化了，扩容简单很多。功能隔离后之前一个bug导致系统挂掉的现象没了。问题责任定位划分的更清楚，比如之前大量慢sql无人管，现在通过监控快速找到开发责任人。\n再说下坏处，1.服务太多了，人不够啊。之前的架构师按照小的原则，把数据层，服务层，应用层严格拆分。一个人手上超过10几个服务...\n2.服务化不彻底，太多事手工干。服务监控只能监控一半指标，各种远程调用异常没人解决。运维只有打包发布做了自动化。可以想象下开发人员基本下改bug和发布的死循环中。服务网关没有，服务调用就是一张密密麻麻的网\n3.培训不到位，直接上阵，开发人员对微服务理解不到位，服务质量可想而知\n4.没有专职测试，自动化测试靠开发写脚本，谁有空啊，单元测试能写一个就算相当有觉悟了\n总结下来，做服务化改造首先问自己这些问题，业务真的需要微服务来解决吗？真的所有模块的问题都要微服务来解决吗？技术人员的配置和水平达到要求了吗？\n","like_count":52,"discussions":[{"author":{"id":1098920,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a8/f2685e1b.jpg","nickname":"华仔","note":"","ucode":"851FF94CF5133A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420569,"discussion_content":"微服务","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1531721626,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":15987,"user_name":"Neal","can_delete":false,"product_type":"c1","uid":1111680,"ip_address":"","ucode":"25F7926377EE1A","user_header":"https://static001.geekbang.org/account/avatar/00/10/f6/80/7dfdd3e3.jpg","comment_is_top":false,"comment_ctime":1531709363,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":10,"product_id":100006601,"comment_content":"1. 数据库拆不开\n2. 人手不够就两人","like_count":5},{"had_liked":false,"id":15975,"user_name":"问题究竟系边度","can_delete":false,"product_type":"c1","uid":1095284,"ip_address":"","ucode":"CA4F2C9A84F867","user_header":"https://static001.geekbang.org/account/avatar/00/10/b6/74/c63449b1.jpg","comment_is_top":false,"comment_ctime":1531702932,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":10,"product_id":100006601,"comment_content":"算是用了微服务。\n没有保证足够人力不要实施微服务。\n需求的功能拆分需要更资深的人做规划。\n业务没有到一定的复杂度不要实施微服务，不要追时髦。\n监控，部署，机器资源，服务接口管理是实施重点。\n\n","like_count":1},{"had_liked":false,"id":368541,"user_name":"第一月歌","can_delete":false,"product_type":"c1","uid":1160534,"ip_address":"广东","ucode":"E3D4F696C95468","user_header":"https://static001.geekbang.org/account/avatar/00/11/b5/56/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1676431457,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":10,"product_id":100006601,"comment_content":"看到这么多人都这么痛苦，我也就放心了","like_count":0},{"had_liked":false,"id":355085,"user_name":"杜秀清","can_delete":false,"product_type":"c1","uid":2952514,"ip_address":"上海","ucode":"4D33DD69E8D238","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJGiahPncXAMXlRibCVapHxib4V90Pxa56QQr6iatHmHn77YibSibWhdBe9YKxrD5ria9ZI4JfFjD1SecAmg/132","comment_is_top":false,"comment_ctime":1661070830,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":10,"product_id":100006601,"comment_content":"先将SOA拆分，再组合同类域服务组成微服务，再用K8S等这些解决自动化部署的问题","like_count":0},{"had_liked":false,"id":313176,"user_name":"Drake敏","can_delete":false,"product_type":"c1","uid":2734734,"ip_address":"","ucode":"38366767EFDC90","user_header":"https://static001.geekbang.org/account/avatar/00/29/ba/8e/4645afae.jpg","comment_is_top":false,"comment_ctime":1632302095,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":10,"product_id":100006601,"comment_content":"我们公司就是采用微服务，用了eurake这个来监控服务的情况。这样就能更快第一时间去检查服务的问题","like_count":0},{"had_liked":false,"id":288836,"user_name":"prader26","can_delete":false,"product_type":"c1","uid":1433707,"ip_address":"","ucode":"5EFFFC374ADECE","user_header":"https://static001.geekbang.org/account/avatar/00/15/e0/6b/f61d7466.jpg","comment_is_top":false,"comment_ctime":1618723563,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":10,"product_id":100006601,"comment_content":"微服务是一种和 SOA 相似但本质上不同的架构理念如下图所示，这种观点认为微服务和 SOA 只是有点类似，但本质上是不同的架构设计理念。\n相似点在于下图中交叉的地方，就是两者都关注“服务”，都是通过服务的拆分来解决可扩展性问题。\n本质上不同的地方在于几个核心理念的差异：是否有 ESB、服务的粒度、架构设计的目标等。\n微服务的陷阱：\n1服务划分过细，服务间关系复杂\n2服务数量太多，团队效率急剧下降\n3调用链太长，性能下降\n4调用链太长，问题定位困难\n5没有自动化支撑，无法快速交付\n6没有服务治理，微服务数量多了后管理混乱","like_count":0},{"had_liked":false,"id":244275,"user_name":"piboye","can_delete":false,"product_type":"c1","uid":1066752,"ip_address":"","ucode":"7CFD8712857A85","user_header":"https://static001.geekbang.org/account/avatar/00/10/47/00/3202bdf0.jpg","comment_is_top":false,"comment_ctime":1598448828,"is_pvip":true,"replies":null,"discussion_count":0,"race_medal":0,"score":10,"product_id":100006601,"comment_content":"k8s的dns来做最简单","like_count":0},{"had_liked":false,"id":230431,"user_name":"小熊猫加肥版","can_delete":false,"product_type":"c1","uid":1102125,"ip_address":"","ucode":"99F1D1C8BCF094","user_header":"https://static001.geekbang.org/account/avatar/00/10/d1/2d/f1879ca8.jpg","comment_is_top":false,"comment_ctime":1593389920,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":11,"product_id":100006601,"comment_content":"没有配套的基础设施最好还是老实点","like_count":0},{"had_liked":false,"id":130072,"user_name":"钱","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1567383222,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":11,"product_id":100006601,"comment_content":"课后思考及问题\n1：微服务的使用经验和坑？\n非常认同老师的微服务没有基础的治理平台是非常坑的观点，我就亲身经历过，上一家公司是个只有七八个人的小团队，一切都是从零开始，项目经理也挺喜欢研究技术的，当时就是使用spring的全家桶来搭建的微服务，开发、测试、部署、运维真是非常费劲。一台机器从编译到部署完启动起来就需要半天功夫，什么都是人肉来处理，效率相当慢。\n目前的公司基础技术服务比较完善，RPC、MQ、缓存、监控、部署等等都有专门的团队来维护，基本是自研或二次开发，上线部署轻松简单，上几百台也是很轻松容易的，时间主要花费在业务验证上，有一套流程要走。基础服务的使用也比较简单，他们来运维，有需求也可以提。\n微服务是把双刃剑，用好了能杀敌，用不好会伤己。","like_count":0},{"had_liked":false,"id":129598,"user_name":"fomy","can_delete":false,"product_type":"c1","uid":1125834,"ip_address":"","ucode":"CD87EA03B1F327","user_header":"https://static001.geekbang.org/account/avatar/00/11/2d/ca/02b0e397.jpg","comment_is_top":false,"comment_ctime":1567166362,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":11,"product_id":100006601,"comment_content":"服务拆分的粒度太小，造成了一个业务的修改涉及的系统太多，引入了很多系统复杂度，但是又缺少人手，经常造成开发工作量太大，需要同时上线多个服务，缺乏自动化部署，每次测试都要涉及多个系统接口的测试。最大问题是服务无法实现事务的原子性（实现分布式事务代价太高没有采用），造成一个业务异常无法回滚，频繁需要修改数据。服务没有实现治理，造成发生问题时，没有及时发现问题。","like_count":0},{"had_liked":false,"id":127938,"user_name":"考休","can_delete":false,"product_type":"c1","uid":1053955,"ip_address":"","ucode":"968DFC00D6D0CF","user_header":"https://static001.geekbang.org/account/avatar/00/10/15/03/c0fe1dbf.jpg","comment_is_top":false,"comment_ctime":1566812078,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":11,"product_id":100006601,"comment_content":"公司项目目前还没有使用微服务，之前也考察过一段时间，经过讨论最终还是决定先不上微服务，最重要的原因是没有必要要用微服务，如果真的改了架构，那才是为了用微服务而用了！","like_count":0},{"had_liked":false,"id":55841,"user_name":"Geek_fb3db2","can_delete":false,"product_type":"c1","uid":1218254,"ip_address":"","ucode":"8089B8311B6C80","user_header":"https://static001.geekbang.org/account/avatar/00/12/96/ce/8c3bdbe5.jpg","comment_is_top":false,"comment_ctime":1546324385,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":11,"product_id":100006601,"comment_content":"我们现在还不算微服务 目前采用组件方式开发 一个应用拆分为多个组件 最上层为包装组件的聚合层 应用还是一个，最近领导说组件功能太单一 应该再包一层供外围调用 是否需要考虑微服务或者其他方式","like_count":0},{"had_liked":false,"id":16933,"user_name":"成功","can_delete":false,"product_type":"c1","uid":1112099,"ip_address":"","ucode":"954B90AC92E8C3","user_header":"https://static001.geekbang.org/account/avatar/00/10/f8/23/165d2f0e.jpg","comment_is_top":false,"comment_ctime":1532312113,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":11,"product_id":100006601,"comment_content":"soA有，微服务没","like_count":0},{"had_liked":false,"id":15990,"user_name":"小田","can_delete":false,"product_type":"c1","uid":1073342,"ip_address":"","ucode":"59CA02059F71E4","user_header":"https://static001.geekbang.org/account/avatar/00/10/60/be/68ce2fd0.jpg","comment_is_top":false,"comment_ctime":1531711191,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":11,"product_id":100006601,"comment_content":"# 微服务特点小结\n细粒度服务化: 依赖服务治理系统\n快速交付: 依赖敏捷开发技术(自动化测试,持续集成,自动化部署)\n轻量级通信: RESTful API, RPC\n场景: 互联网应用(相对于&quot;企业内部应用&quot;)","like_count":0},{"had_liked":false,"id":15835,"user_name":"欧星星","can_delete":false,"product_type":"c1","uid":1014347,"ip_address":"","ucode":"56365442E231A0","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7a/4b/1a7b36ab.jpg","comment_is_top":false,"comment_ctime":1531544738,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":11,"product_id":100006601,"comment_content":"服务多了之后用的资源反而比之前更多，没有监控系统和日志聚合系统查看问题就像大海捞针","like_count":0},{"had_liked":false,"id":15819,"user_name":"yungoo","can_delete":false,"product_type":"c1","uid":1060805,"ip_address":"","ucode":"D9BB84A75047CB","user_header":"https://static001.geekbang.org/account/avatar/00/10/2f/c5/aaacb98f.jpg","comment_is_top":false,"comment_ctime":1531537846,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":11,"product_id":100006601,"comment_content":"我们也在采用微服务，后端团队大概20人，十来个服务，4&#47;5条产品线，基础服务由4&#47;5人团队维护。碰到的最大问题是服务部署和应用监控的问题，其次是部分服务没有恰当的抽象，还在为不同的业务定制接口。","like_count":0},{"had_liked":false,"id":15806,"user_name":"张玮(大圣)","can_delete":false,"product_type":"c1","uid":1111343,"ip_address":"","ucode":"D567C4BE87D116","user_header":"https://static001.geekbang.org/account/avatar/00/10/f5/2f/56117bab.jpg","comment_is_top":false,"comment_ctime":1531533296,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":11,"product_id":100006601,"comment_content":"采取一些措施把坑填平，生态中有一些通用措施，\n\n不能满足再走内部开发，\n\n做这些事之前就是得评估下团队人的情况和产品项目的发展情况。","like_count":0},{"had_liked":false,"id":230431,"user_name":"小熊猫加肥版","can_delete":false,"product_type":"c1","uid":1102125,"ip_address":"","ucode":"99F1D1C8BCF094","user_header":"https://static001.geekbang.org/account/avatar/00/10/d1/2d/f1879ca8.jpg","comment_is_top":false,"comment_ctime":1593389920,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":11,"product_id":100006601,"comment_content":"没有配套的基础设施最好还是老实点","like_count":0},{"had_liked":false,"id":130072,"user_name":"钱","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1567383222,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":11,"product_id":100006601,"comment_content":"课后思考及问题\n1：微服务的使用经验和坑？\n非常认同老师的微服务没有基础的治理平台是非常坑的观点，我就亲身经历过，上一家公司是个只有七八个人的小团队，一切都是从零开始，项目经理也挺喜欢研究技术的，当时就是使用spring的全家桶来搭建的微服务，开发、测试、部署、运维真是非常费劲。一台机器从编译到部署完启动起来就需要半天功夫，什么都是人肉来处理，效率相当慢。\n目前的公司基础技术服务比较完善，RPC、MQ、缓存、监控、部署等等都有专门的团队来维护，基本是自研或二次开发，上线部署轻松简单，上几百台也是很轻松容易的，时间主要花费在业务验证上，有一套流程要走。基础服务的使用也比较简单，他们来运维，有需求也可以提。\n微服务是把双刃剑，用好了能杀敌，用不好会伤己。","like_count":0},{"had_liked":false,"id":129598,"user_name":"fomy","can_delete":false,"product_type":"c1","uid":1125834,"ip_address":"","ucode":"CD87EA03B1F327","user_header":"https://static001.geekbang.org/account/avatar/00/11/2d/ca/02b0e397.jpg","comment_is_top":false,"comment_ctime":1567166362,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":11,"product_id":100006601,"comment_content":"服务拆分的粒度太小，造成了一个业务的修改涉及的系统太多，引入了很多系统复杂度，但是又缺少人手，经常造成开发工作量太大，需要同时上线多个服务，缺乏自动化部署，每次测试都要涉及多个系统接口的测试。最大问题是服务无法实现事务的原子性（实现分布式事务代价太高没有采用），造成一个业务异常无法回滚，频繁需要修改数据。服务没有实现治理，造成发生问题时，没有及时发现问题。","like_count":0},{"had_liked":false,"id":127938,"user_name":"考休","can_delete":false,"product_type":"c1","uid":1053955,"ip_address":"","ucode":"968DFC00D6D0CF","user_header":"https://static001.geekbang.org/account/avatar/00/10/15/03/c0fe1dbf.jpg","comment_is_top":false,"comment_ctime":1566812078,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":11,"product_id":100006601,"comment_content":"公司项目目前还没有使用微服务，之前也考察过一段时间，经过讨论最终还是决定先不上微服务，最重要的原因是没有必要要用微服务，如果真的改了架构，那才是为了用微服务而用了！","like_count":0},{"had_liked":false,"id":55841,"user_name":"Geek_fb3db2","can_delete":false,"product_type":"c1","uid":1218254,"ip_address":"","ucode":"8089B8311B6C80","user_header":"https://static001.geekbang.org/account/avatar/00/12/96/ce/8c3bdbe5.jpg","comment_is_top":false,"comment_ctime":1546324385,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":11,"product_id":100006601,"comment_content":"我们现在还不算微服务 目前采用组件方式开发 一个应用拆分为多个组件 最上层为包装组件的聚合层 应用还是一个，最近领导说组件功能太单一 应该再包一层供外围调用 是否需要考虑微服务或者其他方式","like_count":0},{"had_liked":false,"id":16933,"user_name":"成功","can_delete":false,"product_type":"c1","uid":1112099,"ip_address":"","ucode":"954B90AC92E8C3","user_header":"https://static001.geekbang.org/account/avatar/00/10/f8/23/165d2f0e.jpg","comment_is_top":false,"comment_ctime":1532312113,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":11,"product_id":100006601,"comment_content":"soA有，微服务没","like_count":0},{"had_liked":false,"id":15990,"user_name":"小田","can_delete":false,"product_type":"c1","uid":1073342,"ip_address":"","ucode":"59CA02059F71E4","user_header":"https://static001.geekbang.org/account/avatar/00/10/60/be/68ce2fd0.jpg","comment_is_top":false,"comment_ctime":1531711191,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":11,"product_id":100006601,"comment_content":"# 微服务特点小结\n细粒度服务化: 依赖服务治理系统\n快速交付: 依赖敏捷开发技术(自动化测试,持续集成,自动化部署)\n轻量级通信: RESTful API, RPC\n场景: 互联网应用(相对于&quot;企业内部应用&quot;)","like_count":0},{"had_liked":false,"id":15835,"user_name":"欧星星","can_delete":false,"product_type":"c1","uid":1014347,"ip_address":"","ucode":"56365442E231A0","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7a/4b/1a7b36ab.jpg","comment_is_top":false,"comment_ctime":1531544738,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":11,"product_id":100006601,"comment_content":"服务多了之后用的资源反而比之前更多，没有监控系统和日志聚合系统查看问题就像大海捞针","like_count":0},{"had_liked":false,"id":15819,"user_name":"yungoo","can_delete":false,"product_type":"c1","uid":1060805,"ip_address":"","ucode":"D9BB84A75047CB","user_header":"https://static001.geekbang.org/account/avatar/00/10/2f/c5/aaacb98f.jpg","comment_is_top":false,"comment_ctime":1531537846,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":11,"product_id":100006601,"comment_content":"我们也在采用微服务，后端团队大概20人，十来个服务，4&#47;5条产品线，基础服务由4&#47;5人团队维护。碰到的最大问题是服务部署和应用监控的问题，其次是部分服务没有恰当的抽象，还在为不同的业务定制接口。","like_count":0},{"had_liked":false,"id":15806,"user_name":"张玮(大圣)","can_delete":false,"product_type":"c1","uid":1111343,"ip_address":"","ucode":"D567C4BE87D116","user_header":"https://static001.geekbang.org/account/avatar/00/10/f5/2f/56117bab.jpg","comment_is_top":false,"comment_ctime":1531533296,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":11,"product_id":100006601,"comment_content":"采取一些措施把坑填平，生态中有一些通用措施，\n\n不能满足再走内部开发，\n\n做这些事之前就是得评估下团队人的情况和产品项目的发展情况。","like_count":0}]}