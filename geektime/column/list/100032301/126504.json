{"id":126504,"title":"åŠ é¤ | JMQçš„Brokeræ˜¯å¦‚ä½•å¼‚æ­¥å¤„ç†æ¶ˆæ¯çš„ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯æç¥ã€‚</p><p>æˆ‘ä»¬çš„è¯¾ç¨‹æ›´æ–°åˆ°è¿›é˜¶ç¯‡ä¹‹åï¼Œé€šè¿‡è¯„è®ºåŒºçš„ç•™è¨€ï¼Œæˆ‘çœ‹åˆ°æœ‰ä¸€äº›åŒå­¦ä¸å¤ªç†è§£ï¼Œä¸ºä»€ä¹ˆåœ¨è¿›é˜¶ç¯‡ä¸­è¦è®²è¿™äº›â€œçœ‹èµ·æ¥å’Œæ¶ˆæ¯é˜Ÿåˆ—å…³ç³»ä¸å¤§çš„â€å†…å®¹å‘¢ï¼Ÿ</p><p>åœ¨è¿™é‡Œï¼Œæˆ‘è·Ÿä½ åˆ†äº«ä¸€ä¸‹è¿™é—¨è¯¾ç¨‹çš„è®¾è®¡æ€è·¯ã€‚æˆ‘ä»¬è¿™é—¨è¯¾ç¨‹çš„åç§°æ˜¯â€œæ¶ˆæ¯é˜Ÿåˆ—é«˜æ‰‹è¯¾â€ï¼Œæˆ‘å¸Œæœ›ä½ åœ¨å­¦ä¹ å®Œè¿™é—¨è¯¾ç¨‹ä¹‹åï¼Œä¸ä»…ä»…åªæ˜¯æˆä¸ºä¸€ä¸ªä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—çš„é«˜æ‰‹ï¼Œè€Œæ˜¯<strong>è®¾è®¡å’Œå®ç°</strong>æ¶ˆæ¯é˜Ÿåˆ—çš„é«˜æ‰‹ã€‚æ‰€ä»¥æˆ‘ä»¬åœ¨è®¾è®¡è¯¾ç¨‹çš„æ—¶å€™ï¼Œåˆ†äº†åŸºç¡€ç¯‡ã€è¿›é˜¶ç¯‡å’Œæ¡ˆä¾‹ç¯‡ä¸‰éƒ¨åˆ†ã€‚</p><p>åŸºç¡€ç¯‡ä¸­æˆ‘ä»¬ç»™å¤§å®¶è®²è§£æ¶ˆæ¯é˜Ÿåˆ—çš„åŸç†å’Œä¸€äº›ä½¿ç”¨æ–¹æ³•ï¼Œé‡ç‚¹æ˜¯è®©å¤§å®¶å­¦ä¼šä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—ã€‚</p><p>ä½ åœ¨è¿›é˜¶ç¯‡ä¸­ï¼Œæˆ‘ä»¬è¯¾ç¨‹è®¾è®¡çš„é‡ç‚¹æ˜¯è®²è§£å®ç°æ¶ˆæ¯é˜Ÿåˆ—å¿…å¤‡çš„æŠ€æœ¯çŸ¥è¯†ï¼Œé€šè¿‡åˆ†ææºç è®²è§£æ¶ˆæ¯é˜Ÿåˆ—çš„å®ç°åŸç†ã€‚<strong>å¸Œæœ›ä½ é€šè¿‡è¿›é˜¶ç¯‡çš„å­¦ä¹ èƒ½å¤ŸæŒæ¡åˆ°è®¾è®¡ã€å®ç°æ¶ˆæ¯é˜Ÿåˆ—æ‰€å¿…å¤‡çš„çŸ¥è¯†å’ŒæŠ€æœ¯ï¼Œè¿™äº›çŸ¥è¯†å’ŒæŠ€æœ¯ä¹Ÿæ˜¯è®¾è®¡æ‰€æœ‰é«˜æ€§èƒ½ã€é«˜å¯é çš„åˆ†å¸ƒå¼ç³»ç»Ÿéƒ½éœ€è¦å…·å¤‡çš„ã€‚</strong></p><p>è¿›é˜¶ç¯‡çš„ä¸ŠåŠéƒ¨åˆ†ï¼Œæˆ‘ä»¬æ¯ä¸€èŠ‚è¯¾ä¸€ä¸ªä¸“é¢˜ï¼Œæ¥è®²è§£è®¾è®¡å®ç°ä¸€ä¸ªé«˜æ€§èƒ½æ¶ˆæ¯é˜Ÿåˆ—ï¼Œå¿…å¤‡çš„æŠ€æœ¯å’ŒçŸ¥è¯†ã€‚è¿™é‡Œé¢æ¯èŠ‚è¯¾ä¸­è®²è§£çš„æŠ€æœ¯ç‚¹ï¼Œä¸ä»…å¯ä»¥ç”¨æ¥è®¾è®¡æ¶ˆæ¯é˜Ÿåˆ—ï¼ŒåŒå­¦ä»¬åœ¨è®¾è®¡æ—¥å¸¸çš„åº”ç”¨ç³»ç»Ÿä¸­ä¹Ÿä¸€å®šä¼šç”¨å¾—åˆ°ã€‚</p><p>å‰å‡ å¤©æˆ‘åœ¨æå®¢æ—¶é—´ç›´æ’­çš„æ—¶å€™ä¹Ÿè·Ÿå¤§å®¶é€éœ²è¿‡ï¼Œç”±æˆ‘æ‰€åœ¨çš„äº¬ä¸œåŸºç¡€æ¶æ„å›¢é˜Ÿå¼€å‘çš„æ¶ˆæ¯é˜Ÿåˆ—JMQï¼Œå®ƒçš„ç»¼åˆæ€§èƒ½è¦æ˜¾è‘—ä¼˜äºç›®å‰å…¬è®¤æ€§èƒ½éå¸¸å¥½çš„Kafkaã€‚è™½ç„¶åœ¨å¼€å‘JMQçš„è¿‡ç¨‹ä¸­æœ‰å¾ˆå¤šçš„åˆ›æ–°ï¼Œä½†æ˜¯å¯¹äºæ€§èƒ½çš„ä¼˜åŒ–è¿™å—ï¼Œå¹¶æ²¡æœ‰ä»€ä¹ˆå…¨æ–°çš„åˆ’æ—¶ä»£çš„æ–°æŠ€æœ¯ï¼ŒJMQä¹‹æ‰€ä»¥èƒ½åšåˆ°è¿™æ ·çš„æè‡´æ€§èƒ½ï¼Œé çš„å°±æ˜¯åˆç†åœ°è®¾è®¡å’Œæ­£ç¡®åœ°ä½¿ç”¨å·²æœ‰çš„è¿™äº›é€šç”¨çš„åº•å±‚æŠ€æœ¯å’Œä¼˜åŒ–æŠ€å·§ã€‚æˆ‘æŠŠè¿™äº›æŠ€æœ¯å’ŒçŸ¥è¯†ç‚¹åŠ ä»¥æç‚¼å’Œæ€»ç»“ï¼Œæ”¾åœ¨è¿›é˜¶ç¯‡çš„ä¸ŠåŠéƒ¨åˆ†ä¸­ã€‚</p><!-- [[[read_end]]] --><p>è¿›é˜¶ç¯‡çš„ä¸‹åŠéƒ¨åˆ†ï¼Œæˆ‘ä»¬ä¸»è¦é€šè¿‡åˆ†ææºç çš„æ–¹å¼ï¼Œæ¥å­¦ä¹ ä¼˜ç§€å¼€æºæ¶ˆæ¯é˜Ÿåˆ—äº§å“ä¸­çš„ä¸€äº›å®ç°åŸç†å’Œå®ƒä»¬çš„è®¾è®¡æ€æƒ³ã€‚</p><p>åœ¨æœ€åçš„æ¡ˆä¾‹ç¯‡ï¼Œæˆ‘ä¼šå’Œå¤§å®¶ä¸€èµ·ï¼Œåˆ©ç”¨è¿›é˜¶ç¯‡ä¸­å­¦ä¹ çš„çŸ¥è¯†ï¼Œä¸€èµ·æ¥å¼€å‘ä¸€ä¸ªç®€å•çš„RPCæ¡†æ¶ã€‚ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦å¼€å‘ä¸€ä¸ªRPCæ¡†æ¶ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—ï¼Ÿè¿™é‡Œé¢å°±æ˜¯å¸Œæœ›å¤§å®¶ä¸åªæ˜¯æœºæ¢°çš„å»å­¦ä¹ ï¼Œä»…ä»…æ˜¯æˆ‘å‘Šè¯‰è¿™ä¸ªé—®é¢˜æ€ä¹ˆè§£å†³ï¼Œä½ å°±åªæ˜¯å­¦ä¼šäº†è¿™ä¸ªé—®é¢˜æ€ä¹ˆè§£å†³ï¼Œè€Œæ˜¯èƒ½åšåˆ°çœŸæ­£ç†è§£åŸç†ï¼ŒæŒæ¡çŸ¥è¯†å’ŒæŠ€æœ¯ï¼Œå¹¶ä¸”èƒ½èä¼šè´¯é€šï¼Œçµæ´»åœ°å»ä½¿ç”¨ã€‚åªæœ‰è¿™æ ·ï¼Œä½ æ‰æ˜¯çœŸçš„â€œå­¦ä¼šäº†â€ã€‚</p><p>æœ‰çš„åŒå­¦åœ¨çœ‹äº†è¿›é˜¶ç¯‡ä¸­å·²æ›´æ–°çš„è¿™å‡ èŠ‚è¯¾ç¨‹ä¹‹åï¼Œè§‰å¾—åªè®²æŠ€æœ¯åŸç†ä¸è¿‡ç˜¾ï¼Œå¸Œæœ›èƒ½çœ‹åˆ°è¿™äº›æŠ€æœ¯æ˜¯å¦‚ä½•åœ¨æ¶ˆæ¯é˜Ÿåˆ—ä¸­åº”ç”¨å¹¶è½åœ°çš„ï¼Œçœ‹åˆ°å…·ä½“çš„å®ç°å’Œä»£ç ï¼Œæ‰€ä»¥æˆ‘ä»¥äº¬ä¸œJMQä¸ºä¾‹ï¼Œå°†è¿™äº›åŸºç¡€æŠ€æœ¯ç‚¹åœ¨æ¶ˆæ¯é˜Ÿåˆ—å®ç°ä¸­çš„åº”ç”¨è®²è§£ä¸€ä¸‹ã€‚</p><h2>JMQçš„Brokeræ˜¯å¦‚ä½•å¼‚æ­¥å¤„ç†æ¶ˆæ¯çš„ï¼Ÿ</h2><p>å¯¹äºæ¶ˆæ¯é˜Ÿåˆ—çš„Brokerï¼Œå®ƒæœ€æ ¸å¿ƒçš„ä¸¤ä¸ªæµç¨‹å°±æ˜¯æ¥æ”¶ç”Ÿäº§è€…å‘æ¥çš„æ¶ˆæ¯ï¼Œä»¥åŠç»™æ¶ˆè´¹è€…å‘é€æ¶ˆæ¯ã€‚åè€…çš„ä¸šåŠ¡é€»è¾‘ç›¸å¯¹æ¯”è¾ƒç®€å•ï¼Œå½±å“æ¶ˆæ¯é˜Ÿåˆ—æ€§èƒ½çš„å…³é”®ï¼Œå°±æ˜¯æ¶ˆæ¯ç”Ÿäº§çš„è¿™ä¸ªä¸šåŠ¡æµç¨‹ã€‚åœ¨JMQä¸­ï¼Œç»è¿‡ä¼˜åŒ–åçš„æ¶ˆæ¯ç”Ÿäº§æµç¨‹ï¼Œå®æµ‹å®ƒæ¯ç§’é’Ÿå¯ä»¥å¤„ç†è¶…è¿‡100ä¸‡æ¬¡è¯·æ±‚ã€‚</p><p>æˆ‘ä»¬åœ¨ä¹‹å‰çš„è¯¾ç¨‹ä¸­é¦–å…ˆè®²äº†å¼‚æ­¥çš„è®¾è®¡æ€æƒ³ï¼Œè¿™é‡Œç»™ä½ åˆ†äº«ä¸€ä¸‹æˆ‘åœ¨è®¾è®¡è¿™ä¸ªæµç¨‹æ—¶ï¼Œæ˜¯å¦‚ä½•æ¥å°†å¼‚æ­¥çš„è®¾è®¡è½åœ°çš„ã€‚</p><p>æ¶ˆæ¯ç”Ÿäº§çš„æµç¨‹éœ€è¦å®Œæˆçš„åŠŸèƒ½æ˜¯è¿™æ ·çš„ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/a7/ba/a7589a7b4525e107f9b82de133bc43ba.jpg?wh=4124*2895\" alt=\"\"></p><ul>\n<li>é¦–å…ˆï¼Œç”Ÿäº§è€…å‘é€ä¸€æ‰¹æ¶ˆæ¯ç»™Brokerçš„ä¸»èŠ‚ç‚¹ï¼›</li>\n<li>Brokeræ”¶åˆ°æ¶ˆæ¯ä¹‹åï¼Œä¼šå¯¹æ¶ˆæ¯åšä¸€ç³»åˆ—çš„è§£æã€æ£€æŸ¥ç­‰å¤„ç†ï¼›</li>\n<li>ç„¶åï¼ŒæŠŠæ¶ˆæ¯å¤åˆ¶ç»™æ‰€æœ‰çš„Brokerä»èŠ‚ç‚¹ï¼Œå¹¶ä¸”éœ€è¦æŠŠæ¶ˆæ¯å†™å…¥åˆ°ç£ç›˜ä¸­ï¼›</li>\n<li>ä¸»èŠ‚ç‚¹æ”¶åˆ°å¤§å¤šæ•°ä»èŠ‚ç‚¹çš„å¤åˆ¶æˆåŠŸç¡®è®¤åï¼Œç»™ç”Ÿäº§è€…å›å“åº”å‘ŠçŸ¥æ¶ˆæ¯å‘é€æˆåŠŸã€‚</li>\n</ul><p>ç”±äºä½¿ç”¨å„ç§å¼‚æ­¥æ¡†æ¶æˆ–å¤šæˆ–å°‘éƒ½ä¼šæœ‰ä¸€äº›æ€§èƒ½æŸå¤±ï¼Œæ‰€ä»¥æˆ‘åœ¨è®¾è®¡è¿™ä¸ªæµç¨‹çš„æ—¶å€™ï¼Œæ²¡æœ‰ä½¿ç”¨ä»»ä½•çš„å¼‚æ­¥æ¡†æ¶ï¼Œè€Œæ˜¯è‡ªè¡Œè®¾è®¡ä¸€ç»„äº’ç›¸é…åˆçš„å¤„ç†çº¿ç¨‹æ¥å®ç°ï¼Œä½†ä½¿ç”¨çš„å¼‚æ­¥è®¾è®¡æ€æƒ³å’Œæˆ‘ä»¬ä¹‹å‰è¯¾ç¨‹ä¸­æ‰€è®²çš„æ˜¯ä¸€æ ·çš„ã€‚</p><p>å¯¹äºè¿™ä¸ªæµç¨‹ï¼Œæˆ‘ä»¬è®¾è®¡çš„çº¿ç¨‹æ¨¡å‹æ˜¯è¿™æ ·çš„ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/c9/fc/c9bf75cafc246f4ace9d36831e95e1fc.png?wh=1157*580\" alt=\"\"></p><p>å›¾ä¸­ç™½è‰²çš„ç»†ç®­å¤´æ˜¯æ•°æ®æµï¼Œè“è‰²çš„ç®­å¤´æ˜¯æ§åˆ¶æµï¼Œç™½è‰²çš„ç²—ç®­å¤´ä»£è¡¨è¿œç¨‹è°ƒç”¨ã€‚è“ç™½ç›¸é—´çš„æ–¹æ¡†ä»£è¡¨çš„æ˜¯å¤„ç†çš„æ­¥éª¤ï¼Œæˆ‘åœ¨è“è‰²æ–¹æ¡†ä¸­æ ‡æ³¨äº†è¿™ä¸ªæ­¥éª¤æ˜¯åœ¨ä»€ä¹ˆçº¿ç¨‹ä¸­æ‰§è¡Œçš„ã€‚åœ†è§’çŸ©å½¢ä»£è¡¨çš„æ˜¯æµç¨‹ä¸­éœ€è¦ä½¿ç”¨çš„ä¸€äº›å…³é”®çš„æ•°æ®ç»“æ„ã€‚</p><p>è¿™é‡Œæˆ‘ä»¬è®¾è®¡äº†6ç»„çº¿ç¨‹ï¼Œå°†ä¸€ä¸ªå¤§çš„æµç¨‹æ‹†æˆäº†6ä¸ªå°æµç¨‹ã€‚å¹¶ä¸”æ•´ä¸ªè¿‡ç¨‹å®Œå…¨æ˜¯å¼‚æ­¥åŒ–çš„ã€‚</p><p>æµç¨‹çš„å…¥å£åœ¨å›¾ä¸­çš„å·¦ä¸Šè§’ï¼ŒBrokeråœ¨æ”¶åˆ°æ¥è‡ªç”Ÿäº§è€…çš„å‘æ¶ˆæ¯è¯·æ±‚åï¼Œä¼šåœ¨ä¸€ä¸ªHandlerä¸­å¤„ç†è¿™äº›è¯·æ±‚ï¼Œè¿™å’Œæˆ‘ä»¬åœ¨æ™®é€šçš„ä¸šåŠ¡ç³»ç»Ÿä¸­ï¼Œç”¨Handleræ¥æ”¶HTTPè¯·æ±‚æ˜¯ä¸€æ ·çš„ï¼Œæ‰§è¡ŒHandlerä¸­ä¸šåŠ¡é€»è¾‘ä½¿ç”¨çš„æ˜¯Nettyçš„IOçº¿ç¨‹ã€‚</p><p>æ”¶åˆ°è¯·æ±‚åï¼Œæˆ‘ä»¬åœ¨Handlerä¸­ä¸åšè¿‡å¤šçš„å¤„ç†ï¼Œæ‰§è¡Œå¿…è¦çš„æ£€æŸ¥åï¼Œå°†è¯·æ±‚æ”¾åˆ°ä¸€ä¸ªå†…å­˜é˜Ÿåˆ—ä¸­ï¼Œä¹Ÿå°±æ˜¯å›¾ä¸­çš„Requests Queueã€‚è¯·æ±‚è¢«æ”¾å…¥é˜Ÿåˆ—åï¼ŒHandlerçš„æ–¹æ³•å°±ç»“æŸäº†ã€‚å¯ä»¥çœ‹åˆ°ï¼Œåœ¨Handlerä¸­åªæ˜¯æŠŠè¯·æ±‚æ”¾åˆ°äº†é˜Ÿåˆ—ä¸­ï¼Œæ²¡æœ‰å¤ªå¤šçš„ä¸šåŠ¡é€»è¾‘ï¼Œè¿™ä¸ªæ‰§è¡Œè¿‡ç¨‹æ˜¯éå¸¸å¿«çš„ï¼Œæ‰€ä»¥å³ä½¿æ˜¯å¤„ç†æµ·é‡çš„è¯·æ±‚ï¼Œä¹Ÿä¸ä¼šè¿‡å¤šçš„å ç”¨IOçº¿ç¨‹ã€‚</p><p>ç”±äºè¦ä¿è¯æ¶ˆæ¯çš„æœ‰åºæ€§ï¼Œæ•´ä¸ªæµç¨‹çš„å¤§éƒ¨åˆ†è¿‡ç¨‹æ˜¯ä¸èƒ½å¹¶å‘çš„ï¼Œåªèƒ½å•çº¿ç¨‹æ‰§è¡Œã€‚æ‰€ä»¥ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªçº¿ç¨‹WriteThreadä»è¯·æ±‚é˜Ÿåˆ—ä¸­æŒ‰ç…§é¡ºåºæ¥è·å–è¯·æ±‚ï¼Œä¾æ¬¡è¿›è¡Œè§£æè¯·æ±‚ç­‰å…¶ä»–çš„å¤„ç†é€»è¾‘ï¼Œæœ€åå°†æ¶ˆæ¯åºåˆ—åŒ–å¹¶å†™å…¥å­˜å‚¨ã€‚åºåˆ—åŒ–åçš„æ¶ˆæ¯ä¼šè¢«å†™å…¥åˆ°ä¸€ä¸ªå†…å­˜ç¼“å­˜ä¸­ï¼Œå°±æ˜¯å›¾ä¸­çš„JournalCacheï¼Œç­‰å¾…åç»­çš„å¤„ç†ã€‚</p><p>æ‰§è¡Œåˆ°è¿™é‡Œï¼Œä¸€æ¡ä¸€æ¡çš„æ¶ˆæ¯å·²ç»è¢«è½¬æ¢æˆä¸€ä¸ªè¿ç»­çš„å­—èŠ‚æµï¼Œæ¯ä¸€æ¡æ¶ˆæ¯éƒ½åœ¨è¿™ä¸ªå­—èŠ‚æµä¸­æœ‰ä¸€ä¸ªå…¨å±€å”¯ä¸€èµ·æ­¢ä½ç½®ï¼Œä¹Ÿå°±æ˜¯è¿™æ¡æ¶ˆæ¯çš„Offsetã€‚åç»­çš„å¤„ç†å°±ä¸ç”¨å…³å¿ƒå­—èŠ‚æµä¸­çš„å†…å®¹äº†ï¼Œåªè¦ç¡®ä¿è¿™ä¸ªå­—èŠ‚æµèƒ½å¿«é€Ÿæ­£ç¡®çš„è¢«ä¿å­˜å’Œå¤åˆ¶å°±å¯ä»¥äº†ã€‚</p><p>è¿™é‡Œé¢è¿˜æœ‰ä¸€ä¸ªå·¥ä½œéœ€è¦å®Œæˆï¼Œå°±æ˜¯ç»™ç”Ÿäº§è€…å›å“åº”ï¼Œä½†åœ¨è¿™ä¸€æ­¥ï¼Œæ¶ˆæ¯æ—¢æ²¡æœ‰è½ç›˜ï¼Œä¹Ÿæ²¡æœ‰å®Œæˆå¤åˆ¶ï¼Œè¿˜ä¸èƒ½ç»™å®¢æˆ·ç«¯è¿”å›å“åº”ï¼Œæ‰€ä»¥æˆ‘ä»¬æŠŠå¾…è¿”å›çš„å“åº”æŒ‰ç…§é¡ºåºæ”¾åˆ°ä¸€ä¸ªå†…å­˜çš„é“¾è¡¨Pending Callbacksä¸­ï¼Œå¹¶è®°å½•æ¯ä¸ªè¯·æ±‚ä¸­çš„æ¶ˆæ¯å¯¹åº”çš„Offsetã€‚</p><p>ç„¶åï¼Œæˆ‘ä»¬æœ‰2ä¸ªçº¿ç¨‹ï¼ŒFlushThreadå’ŒReplicationThreadï¼Œè¿™ä¸¤ä¸ªçº¿ç¨‹æ˜¯å¹¶è¡Œæ‰§è¡Œçš„ï¼Œåˆ†åˆ«è´Ÿè´£æ‰¹é‡å¼‚æ­¥è¿›è¡Œåˆ·ç›˜å’Œå¤åˆ¶ï¼Œåˆ·ç›˜å’Œå¤åˆ¶åˆåˆ†åˆ«æ˜¯2ä¸ªæ¯”è¾ƒå¤æ‚çš„æµç¨‹ï¼Œæˆ‘ä»¬æš‚æ—¶ä¸å±•å¼€è®²ã€‚åˆ·ç›˜çº¿ç¨‹ä¸åœåœ°å°†æ–°å†™å…¥Journal Cacheçš„å­—èŠ‚æµå†™åˆ°ç£ç›˜ä¸Šï¼Œå®Œæˆä¸€æ‰¹æ•°æ®çš„åˆ·ç›˜ï¼Œå®ƒå°±ä¼šæ›´æ–°ä¸€ä¸ªåˆ·ç›˜ä½ç½®çš„å†…å­˜å˜é‡ï¼Œç¡®ä¿è¿™ä¸ªåˆ·ç›˜ä½ç½®ä¹‹å‰æ•°æ®éƒ½å·²ç»å®‰å…¨çš„å†™å…¥ç£ç›˜ä¸­ã€‚å¤åˆ¶çº¿ç¨‹çš„é€»è¾‘ä¹Ÿæ˜¯ç±»ä¼¼çš„ï¼ŒåŒæ ·ç»´æŠ¤äº†ä¸€ä¸ªå¤åˆ¶ä½ç½®çš„å†…å­˜å˜é‡ã€‚</p><p>æœ€åï¼Œæˆ‘ä»¬è®¾è®¡äº†ä¸€ç»„ä¸“é—¨ç”¨äºå‘é€å“åº”çš„çº¿ç¨‹ReponseThreadsï¼Œåœ¨åˆ·ç›˜ä½ç½®æˆ–è€…å¤åˆ¶ä½ç½®æ›´æ–°åï¼Œå»æ£€æŸ¥å¾…è¿”å›çš„å“åº”é“¾è¡¨Pending Callbacksï¼Œæ ¹æ®QOSçº§åˆ«çš„è®¾ç½®ï¼ˆå› ä¸ºä¸åŒQOSåŸºæœ¬å¯¹å‘é€æˆåŠŸçš„å®šä¹‰ä¸ä¸€æ ·ï¼Œæœ‰çš„è®¾ç½®éœ€è¦æ¶ˆæ¯å†™å…¥ç£ç›˜æ‰ç®—æˆåŠŸï¼Œæœ‰çš„éœ€è¦å¤åˆ¶å®Œæˆæ‰ç®—æˆåŠŸï¼‰ï¼Œå°†åˆ·ç›˜ä½ç½®æˆ–è€…å¤åˆ¶ä½ç½®ä¹‹å‰æ‰€æœ‰å“åº”ï¼Œä»¥åŠå·²ç»è¶…æ—¶çš„å“åº”ï¼Œåˆ©ç”¨è¿™ç»„çº¿ç¨‹ReponseThreadså¼‚æ­¥å¹¶è¡Œçš„å‘é€ç»™å„ä¸ªå®¢æˆ·ç«¯ã€‚</p><p>è¿™æ ·å°±å®Œæˆäº†æ¶ˆæ¯ç”Ÿäº§è¿™ä¸ªæµç¨‹ã€‚æ•´ä¸ªæµç¨‹ä¸­ï¼Œé™¤äº†JournalCacheçš„åŠ è½½å’Œå¸è½½éœ€è¦å¯¹æ–‡ä»¶åŠ é”ä»¥å¤–ï¼Œæ²¡æœ‰ç”¨åˆ°å…¶ä»–çš„é”ã€‚æ¯ä¸ªå°æµç¨‹éƒ½ä¸ä¼šç­‰å¾…å…¶ä»–æµç¨‹çš„å…±äº«èµ„æºï¼Œä¹Ÿå°±ä¸ç”¨äº’ç›¸ç­‰å¾…èµ„æºï¼ˆæ²¡æœ‰æ•°æ®éœ€è¦å¤„ç†æ—¶ç­‰å¾…ä¸Šæ¸¸æµç¨‹æä¾›æ•°æ®çš„æƒ…å†µé™¤å¤–ï¼‰ï¼Œå¹¶ä¸”åªè¦æœ‰æ•°æ®å°±èƒ½ç¬¬ä¸€æ—¶é—´å¤„ç†ã€‚</p><p>è¿™ä¸ªæµç¨‹ä¸­ï¼Œæœ€æ ¸å¿ƒçš„éƒ¨åˆ†åœ¨äºWriteThreadæ‰§è¡Œå¤„ç†çš„è¿™ä¸ªæ­¥éª¤ï¼Œå¯¹æ¯æ¡æ¶ˆæ¯è¿›è¡Œå¤„ç†çš„è¿™äº›ä¸šåŠ¡é€»è¾‘ï¼Œéƒ½åªèƒ½åœ¨WriteThreadä¸­å•çº¿ç¨‹æ‰§è¡Œï¼Œè™½ç„¶è¿™é‡Œé¢å¹²äº†å¾ˆå¤šçš„äº‹å„¿ï¼Œä½†æ˜¯æˆ‘ä»¬ç¡®ä¿è¿™äº›é€»è¾‘ä¸­ï¼Œæ²¡æœ‰ç¼“æ…¢çš„ç£ç›˜å’Œç½‘ç»œIOï¼Œä¹Ÿæ²¡æœ‰ä½¿ç”¨ä»»ä½•çš„é”æ¥ç­‰å¾…èµ„æºï¼Œå…¨éƒ¨éƒ½æ˜¯å†…å­˜æ“ä½œï¼Œè¿™æ ·å³ä½¿å•çº¿ç¨‹å¯ä»¥éå¸¸å¿«é€Ÿåœ°æ‰§è¡Œæ‰€æœ‰çš„ä¸šåŠ¡é€»è¾‘ã€‚</p><p><strong>è¿™ä¸ªé‡Œé¢æœ‰å¾ˆé‡è¦çš„å‡ ç‚¹ä¼˜åŒ–ï¼š</strong></p><ul>\n<li>ä¸€æ˜¯æˆ‘ä»¬ä½¿ç”¨å¼‚æ­¥è®¾è®¡ï¼ŒæŠŠåˆ·ç›˜å’Œå¤åˆ¶è¿™ä¸¤éƒ¨åˆ†æ¯”è¾ƒæ…¢çš„æ“ä½œä»è¿™ä¸ªæµç¨‹ä¸­åˆ†ç¦»å‡ºå»å¼‚æ­¥æ‰§è¡Œï¼›</li>\n<li>ç¬¬äºŒæ˜¯ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ªå†™ç¼“å­˜Journal Cacheå°†ä¸€ä¸ªå†™ç£ç›˜çš„æ“ä½œï¼Œè½¬æ¢æˆäº†ä¸€ä¸ªå†™å†…å­˜çš„æ“ä½œï¼Œæ¥æå‡æ•°æ®å†™å…¥çš„æ€§èƒ½ï¼Œå…³äºå¦‚ä½•ä½¿ç”¨ç¼“å­˜ï¼Œåé¢æˆ‘ä¼šä¸“é—¨ç”¨ä¸€èŠ‚è¯¾æ¥è®²ï¼›</li>\n<li>ç¬¬ä¸‰æ˜¯ï¼Œè¿™ä¸ªå¤„ç†çš„å…¨æµç¨‹æ˜¯è¿‘ä¹æ— é”çš„è®¾è®¡ï¼Œé¿å…äº†çº¿ç¨‹å› ä¸ºç­‰å¾…é”å¯¼è‡´çš„é˜»å¡ï¼›</li>\n<li>ç¬¬å››æ˜¯ï¼Œæˆ‘ä»¬æŠŠå›å¤å“åº”è¿™ä¸ªéœ€è¦ç­‰å¾…èµ„æºçš„æ“ä½œï¼Œä¹Ÿå¼‚æ­¥æ”¾åˆ°å…¶ä»–çš„çº¿ç¨‹ä¸­å»æ‰§è¡Œã€‚</li>\n</ul><p>ä½ çœ‹ï¼Œä¸€ä¸ªçœ‹èµ·æ¥å¾ˆç®€å•çš„æ¥æ”¶è¯·æ±‚å†™å…¥æ•°æ®å¹¶å›å“åº”çš„æµç¨‹ï¼Œéœ€è¦æ¶‰åŠçš„æŠ€æœ¯åŒ…æ‹¬ï¼š<strong>å¼‚æ­¥çš„è®¾è®¡ã€ç¼“å­˜è®¾è®¡ã€é”çš„æ­£ç¡®ä½¿ç”¨ã€çº¿ç¨‹åè°ƒã€åºåˆ—åŒ–å’Œå†…å­˜ç®¡ç†</strong>ï¼Œç­‰ç­‰ã€‚ä½ éœ€è¦å¯¹è¿™äº›æŠ€æœ¯éƒ½æœ‰æ·±å…¥çš„ç†è§£ï¼Œå¹¶åˆç†åœ°ä½¿ç”¨ï¼Œæ‰èƒ½åœ¨ç¡®ä¿é€»è¾‘æ­£ç¡®ã€æ•°æ®å‡†ç¡®çš„å‰æä¸‹ï¼Œåšåˆ°æè‡´çš„æ€§èƒ½ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬åœ¨è¯¾ç¨‹çš„è¿›é˜¶ç¯‡ä¸­ï¼Œç”¨è¿™ä¹ˆå¤šèŠ‚è¯¾æ¥é€ä¸€è®²è§£è¿™äº›â€œçœ‹èµ·æ¥å’Œæ¶ˆæ¯é˜Ÿåˆ—æ²¡ä»€ä¹ˆå…³ç³»â€çš„çŸ¥è¯†ç‚¹å’ŒæŠ€æœ¯ã€‚</p><p>æˆ‘ä¹Ÿå¸Œæœ›åŒå­¦ä»¬åœ¨å­¦ä¹ è¿™äº›çŸ¥è¯†ç‚¹çš„æ—¶å€™ï¼Œä¸ä»…ä»…åªæ˜¯è®°ä½äº†ï¼Œèƒ½è¯´å‡ºæ¥ï¼Œç”¨äºå›ç­”é¢è¯•é—®é¢˜ï¼Œè¿˜è¦èƒ½çœŸæ­£ç†è§£è¿™äº›çŸ¥è¯†ç‚¹å’ŒæŠ€æœ¯èƒŒåæ·±åˆ»çš„æ€æƒ³ï¼Œå¹¶ä½¿ç”¨åœ¨æ—¥å¸¸çš„è®¾è®¡å’Œå¼€å‘è¿‡ç¨‹ä¸­ã€‚</p><p>æ¯”å¦‚è¯´ï¼Œåœ¨é¢è¯•çš„æ—¶å€™ï¼Œå¾ˆå¤šåŒå­¦éƒ½å¯ä»¥å¾ˆè½»æ¾åœ°è®²JVMå†…å­˜ç»“æ„ï¼Œä¹ŸçŸ¥é“æ€ä¹ˆç”¨jstatã€jmapã€jstackè¿™äº›å·¥å…·æ¥æŸ¥çœ‹è™šæ‹Ÿæœºçš„çŠ¶æ€ã€‚ä½†æ˜¯ï¼Œå½“æˆ‘ç»™å‡ºä¸€ä¸ªæœ‰å†…å­˜æº¢å‡ºçš„é—®é¢˜ç¨‹åºå’Œæºä»£ç ï¼Œè®©ä»–æ¥åˆ†æåŸå› å¹¶æ”¹æ­£çš„æ—¶å€™ï¼Œå´å¾ˆå°‘æœ‰äººèƒ½ç»™å‡ºæ­£ç¡®çš„ç­”æ¡ˆã€‚åœ¨æˆ‘çœ‹æ¥ï¼Œå¯¹äºJVMè¿™äº›åŸºç¡€çŸ¥è¯†ï¼Œè¿™æ ·çš„åŒå­¦ä»–ä»¥ä¸ºè‡ªå·±å·²ç»æŒæ¡äº†ï¼Œä½†æ˜¯ï¼Œæ— æ³•é¢†ä¼šæŠ€æœ¯èƒŒåçš„æ€æƒ³ï¼Œåšä¸åˆ°å­¦ä»¥è‡´ç”¨ï¼Œé‚£è¿˜åªæ˜¯åˆ«äººçŸ¥è¯†ï¼Œä¸æ˜¯ä½ çš„ã€‚</p><p>å†æ¯”å¦‚ï¼Œæˆ‘ä¸‹é¢è¦è¯´çš„è¿™ä¸ªä¿©å¤§çˆ·çš„ä½œä¸šï¼Œä½ æ˜¯çœŸçš„èŠ±æ—¶é—´æŠŠä»£ç å†™å‡ºæ¥äº†ï¼Œè¿˜åªæ˜¯åœ¨è„‘å­æƒ³äº†æƒ³æ€ä¹ˆåšï¼Œå°±ç®—å®Œæˆäº†å‘¢ï¼Ÿ</p><h2>ä¿©å¤§çˆ·çš„æ€è€ƒé¢˜</h2><p>æˆ‘ä»¬åœ¨è¿›é˜¶ç¯‡çš„å¼€å§‹ï¼ŒèŠ±äº†4èŠ‚è¯¾çš„å†…å®¹ï¼Œæ¥è®²è§£å¦‚ä½•å®ç°é«˜æ€§èƒ½çš„å¼‚æ­¥ç½‘ç»œé€šä¿¡ï¼Œåœ¨ã€Š<a href=\"http://time.geekbang.org/column/article/119988\">13 | ä¼ è¾“åè®®ï¼šåº”ç”¨ç¨‹åºä¹‹é—´å¯¹è¯çš„è¯­è¨€</a>ã€‹ä¸­ï¼Œæˆ‘ç»™å¤§å®¶ç•™äº†ä¸€ä¸ªæ€è€ƒé¢˜ï¼šå†™ä¸€ä¸ªç¨‹åºï¼Œè®©ä¿©å¤§çˆ·åœ¨èƒ¡åŒå£é‡è§10ä¸‡æ¬¡å¹¶è®°å½•ä¸‹è€—æ—¶ã€‚</p><p>æœ‰å‡ ä¸ªåŒå­¦åœ¨ç•™è¨€åŒºåˆ†äº«äº†è‡ªå·±çš„ä»£ç ï¼Œæ¯ä¸€ä¸ªåŒå­¦åˆ†äº«çš„ä»£ç æˆ‘éƒ½ä»”ç»†è¯»è¿‡ï¼Œæœ‰çš„ä½œä¸šå®ç°äº†å¼‚æ­¥çš„ç½‘ç»œé€šä¿¡ï¼Œæœ‰çš„ä½œä¸šåºåˆ—åŒ–å’Œåè®®è®¾è®¡å®ç°å¾—å¾ˆå¥½ï¼Œä½†å¾ˆé—æ†¾çš„æ˜¯ï¼Œæ²¡æœ‰ä¸€ä»½ä½œä¸šèƒ½åœ¨åºåˆ—åŒ–ã€åè®®è®¾è®¡å’Œå¼‚æ­¥ç½‘ç»œä¼ è¾“è¿™å‡ æ–¹é¢éƒ½åšåˆ°æˆ‘æœŸæœ›çš„æ°´å¹³ã€‚</p><p>åœ¨è¿™ä¸ªä½œä¸šä¸­ï¼Œåº”ç”¨åˆ°äº†æˆ‘ä»¬è¿›é˜¶ç¯‡ä¸­å‰å››èŠ‚è¯¾è®²åˆ°çš„å‡ ä¸ªçŸ¥è¯†ç‚¹ï¼š</p><ul>\n<li>ä½¿ç”¨å¼‚æ­¥è®¾è®¡çš„æ–¹æ³•ï¼›</li>\n<li>å¼‚æ­¥ç½‘ç»œIOï¼›</li>\n<li>ä¸“ç”¨åºåˆ—åŒ–ã€ååºåˆ—åŒ–æ–¹æ³•ï¼›</li>\n<li>è®¾è®¡è‰¯å¥½çš„ä¼ è¾“åè®®ï¼›</li>\n<li>åŒå·¥é€šä¿¡ã€‚</li>\n</ul><p>è¿™é‡Œé¢ç‰¹åˆ«æ˜¯åŒå·¥é€šä¿¡çš„æ–¹æ³•ï¼Œå¤§å®¶éƒ½æ²¡èƒ½æ­£ç¡®çš„å®ç°ã€‚æ‰€ä»¥ï¼Œè¿™äº›ä½œä¸šçš„å®é™…æ‰§è¡Œæ€§èƒ½ä¹Ÿæ²¡èƒ½è¾¾åˆ°ä¸€ä¸ªåº”æœ‰çš„æ°´å¹³ã€‚</p><p>è¿™é‡Œï¼Œæˆ‘ä¹Ÿç»™å‡ºä¸€ä¸ªä½œä¸šçš„å‚è€ƒå®ç°ï¼Œæˆ‘ä»¬ç”¨Goè¯­è¨€æ¥å®ç°è¿™ä¸ªä½œä¸šï¼š</p><p>æˆ‘ä»¬ç”¨Goè¯­è¨€æ¥å®ç°è¿™ä¸ªä½œä¸šï¼š</p><pre><code>package main\n\nimport (\n\t&quot;encoding/binary&quot;\n\t&quot;fmt&quot;\n\t&quot;io&quot;\n\t&quot;net&quot;\n\t&quot;sync&quot;\n\t&quot;time&quot;\n)\n\nvar zRecvCount = uint32(0) // å¼ å¤§çˆ·å¬åˆ°äº†å¤šå°‘å¥è¯\nvar lRecvCount = uint32(0) // æå¤§çˆ·å¬åˆ°äº†å¤šå°‘å¥è¯\nvar total = uint32(100000) // æ€»å…±éœ€è¦é‡è§å¤šå°‘æ¬¡\n\nvar z0 = &quot;åƒäº†æ²¡ï¼Œæ‚¨å¶?&quot;\nvar z3 = &quot;å—¨ï¼åƒé¥±äº†æºœæºœå¼¯å„¿ã€‚&quot;\nvar z5 = &quot;å›å¤´å»ç»™è€å¤ªå¤ªè¯·å®‰ï¼&quot;\nvar l1 = &quot;åˆšåƒã€‚&quot;\nvar l2 = &quot;æ‚¨è¿™ï¼Œå˜›å»ï¼Ÿ&quot;\nvar l4 = &quot;æœ‰ç©ºå®¶é‡Œååå•Šã€‚&quot;\n\nvar liWriteLock sync.Mutex    // æå¤§çˆ·çš„å†™é”\nvar zhangWriteLock sync.Mutex // å¼ å¤§çˆ·çš„å†™é”\n\ntype RequestResponse struct {\n\tSerial  uint32 // åºå·\n\tPayload string // å†…å®¹\n}\n\n// åºåˆ—åŒ–RequestResponseï¼Œå¹¶å‘é€\n// åºåˆ—åŒ–åçš„ç»“æ„å¦‚ä¸‹ï¼š\n// \té•¿åº¦\t4å­—èŠ‚\n// \tSerial 4å­—èŠ‚\n// \tPayLoad å˜é•¿\nfunc writeTo(r *RequestResponse, conn *net.TCPConn, lock *sync.Mutex) {\n\tlock.Lock()\n\tdefer lock.Unlock()\n\tpayloadBytes := []byte(r.Payload)\n\tserialBytes := make([]byte, 4)\n\tbinary.BigEndian.PutUint32(serialBytes, r.Serial)\n\tlength := uint32(len(payloadBytes) + len(serialBytes))\n\tlengthByte := make([]byte, 4)\n\tbinary.BigEndian.PutUint32(lengthByte, length)\n\n\tconn.Write(lengthByte)\n\tconn.Write(serialBytes)\n\tconn.Write(payloadBytes)\n\t// fmt.Println(&quot;å‘é€: &quot; + r.Payload)\n}\n\n// æ¥æ”¶æ•°æ®ï¼Œååºåˆ—åŒ–æˆRequestResponse\nfunc readFrom(conn *net.TCPConn) (*RequestResponse, error) {\n\tret := &amp;RequestResponse{}\n\tbuf := make([]byte, 4)\n\tif _, err := io.ReadFull(conn, buf); err != nil {\n\t\treturn nil, fmt.Errorf(&quot;è¯»é•¿åº¦æ•…éšœï¼š%s&quot;, err.Error())\n\t}\n\tlength := binary.BigEndian.Uint32(buf)\n\tif _, err := io.ReadFull(conn, buf); err != nil {\n\t\treturn nil, fmt.Errorf(&quot;è¯»Serialæ•…éšœï¼š%s&quot;, err.Error())\n\t}\n\tret.Serial = binary.BigEndian.Uint32(buf)\n\tpayloadBytes := make([]byte, length-4)\n\tif _, err := io.ReadFull(conn, payloadBytes); err != nil {\n\t\treturn nil, fmt.Errorf(&quot;è¯»Payloadæ•…éšœï¼š%s&quot;, err.Error())\n\t}\n\tret.Payload = string(payloadBytes)\n\treturn ret, nil\n}\n\n// å¼ å¤§çˆ·çš„è€³æœµ\nfunc zhangDaYeListen(conn *net.TCPConn, wg *sync.WaitGroup) {\n\tdefer wg.Done()\n\tfor zRecvCount &lt; total*3 {\n\t\tr, err := readFrom(conn)\n\t\tif err != nil {\n\t\t\tfmt.Println(err.Error())\n\t\t\tbreak\n\t\t}\n\t\t// fmt.Println(&quot;å¼ å¤§çˆ·æ”¶åˆ°ï¼š&quot; + r.Payload)\n\t\tif r.Payload == l2 { // å¦‚æœæ”¶åˆ°ï¼šæ‚¨è¿™ï¼Œå˜›å»ï¼Ÿ\n\t\t\tgo writeTo(&amp;RequestResponse{r.Serial, z3}, conn, &amp;zhangWriteLock) // å›å¤ï¼šå—¨ï¼åƒé¥±äº†æºœæºœå¼¯å„¿ã€‚\n\t\t} else if r.Payload == l4 { // å¦‚æœæ”¶åˆ°ï¼šæœ‰ç©ºå®¶é‡Œååå•Šã€‚\n\t\t\tgo writeTo(&amp;RequestResponse{r.Serial, z5}, conn, &amp;zhangWriteLock) // å›å¤ï¼šå›å¤´å»ç»™è€å¤ªå¤ªè¯·å®‰ï¼\n\t\t} else if r.Payload == l1 { // å¦‚æœæ”¶åˆ°ï¼šåˆšåƒã€‚\n\t\t\t// ä¸ç”¨å›å¤\n\t\t} else {\n\t\t\tfmt.Println(&quot;å¼ å¤§çˆ·å¬ä¸æ‡‚ï¼š&quot; + r.Payload)\n\t\t\tbreak\n\t\t}\n\t\tzRecvCount++\n\t}\n}\n\n// å¼ å¤§çˆ·çš„å˜´\nfunc zhangDaYeSay(conn *net.TCPConn) {\n\tnextSerial := uint32(0)\n\tfor i := uint32(0); i &lt; total; i++ {\n\t\twriteTo(&amp;RequestResponse{nextSerial, z0}, conn, &amp;zhangWriteLock)\n\t\tnextSerial++\n\t}\n}\n\n// æå¤§çˆ·çš„è€³æœµï¼Œå®ç°æ˜¯å’Œå¼ å¤§çˆ·ç±»ä¼¼çš„\nfunc liDaYeListen(conn *net.TCPConn, wg *sync.WaitGroup) {\n\tdefer wg.Done()\n\tfor lRecvCount &lt; total*3 {\n\t\tr, err := readFrom(conn)\n\t\tif err != nil {\n\t\t\tfmt.Println(err.Error())\n\t\t\tbreak\n\t\t}\n\t\t// fmt.Println(&quot;æå¤§çˆ·æ”¶åˆ°ï¼š&quot; + r.Payload)\n\t\tif r.Payload == z0 { // å¦‚æœæ”¶åˆ°ï¼šåƒäº†æ²¡ï¼Œæ‚¨å¶?\n\t\t\twriteTo(&amp;RequestResponse{r.Serial, l1}, conn, &amp;liWriteLock) // å›å¤ï¼šåˆšåƒã€‚\n\t\t} else if r.Payload == z3 {\n\t\t\t// do nothing\n\t\t} else if r.Payload == z5 {\n\t\t\t// do nothing\n\t\t} else {\n\t\t\tfmt.Println(&quot;æå¤§çˆ·å¬ä¸æ‡‚ï¼š&quot; + r.Payload)\n\t\t\tbreak\n\t\t}\n\t\tlRecvCount++\n\t}\n}\n\n// æå¤§çˆ·çš„å˜´\nfunc liDaYeSay(conn *net.TCPConn) {\n\tnextSerial := uint32(0)\n\tfor i := uint32(0); i &lt; total; i++ {\n\t\twriteTo(&amp;RequestResponse{nextSerial, l2}, conn, &amp;liWriteLock)\n\t\tnextSerial++\n\t\twriteTo(&amp;RequestResponse{nextSerial, l4}, conn, &amp;liWriteLock)\n\t\tnextSerial++\n\t}\n}\n\nfunc startServer(wg *sync.WaitGroup) {\n\ttcpAddr, _ := net.ResolveTCPAddr(&quot;tcp&quot;, &quot;127.0.0.1:9999&quot;)\n\ttcpListener, _ := net.ListenTCP(&quot;tcp&quot;, tcpAddr)\n\tdefer tcpListener.Close()\n\tfmt.Println(&quot;å¼ å¤§çˆ·åœ¨èƒ¡åŒå£ç­‰ç€ ...&quot;)\n\tfor {\n\t\tconn, err := tcpListener.AcceptTCP()\n\t\tif err != nil {\n\t\t\tfmt.Println(err)\n\t\t\tbreak\n\t\t}\n\n\t\tfmt.Println(&quot;ç¢°è§ä¸€ä¸ªæå¤§çˆ·:&quot; + conn.RemoteAddr().String())\n\t\tgo zhangDaYeListen(conn, wg)\n\t\tgo zhangDaYeSay(conn)\n\t}\n\n}\n\nfunc startClient(wg *sync.WaitGroup) *net.TCPConn {\n\tvar tcpAddr *net.TCPAddr\n\ttcpAddr, _ = net.ResolveTCPAddr(&quot;tcp&quot;, &quot;127.0.0.1:9999&quot;)\n\tconn, _ := net.DialTCP(&quot;tcp&quot;, nil, tcpAddr)\n\tgo liDaYeListen(conn, wg)\n\tgo liDaYeSay(conn)\n\treturn conn\n}\n\nfunc main() {\n\tvar wg sync.WaitGroup\n\twg.Add(2)\n\tgo startServer(&amp;wg)\n\ttime.Sleep(time.Second)\n\tconn := startClient(&amp;wg)\n\tt1 := time.Now()\n\twg.Wait()\n\telapsed := time.Since(t1)\n\tconn.Close()\n\tfmt.Println(&quot;è€—æ—¶: &quot;, elapsed)\n}\n</code></pre><p>åœ¨æˆ‘çš„Macæ‰§è¡Œ10ä¸‡æ¬¡å¤§çº¦éœ€è¦ä¸åˆ°5ç§’é’Ÿï¼š</p><pre><code>go run hutong.go\nå¼ å¤§çˆ·åœ¨èƒ¡åŒå£ç­‰ç€ ...\nç¢°è§ä¸€ä¸ªæå¤§çˆ·:127.0.0.1:50136\nè€—æ—¶:  4.962786896s\n</code></pre><p>åœ¨è¿™æ®µç¨‹åºé‡Œé¢ï¼Œ<strong>æˆ‘æ²¡æœ‰å¯¹ç¨‹åºåšä»»ä½•ç‰¹æ®Šçš„æ€§èƒ½ä¼˜åŒ–ï¼Œåªæ˜¯ä½¿ç”¨äº†æˆ‘ä»¬ä¹‹å‰å››èŠ‚è¯¾ä¸­è®²åˆ°çš„ï¼Œä¸Šé¢åˆ—å‡ºæ¥çš„é‚£äº›çŸ¥è¯†ç‚¹ï¼Œå®Œæˆäº†ä¸€ä¸ªåŸºæœ¬çš„å®ç°ã€‚</strong></p><p>åœ¨è¿™æ®µç¨‹åºä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆå®šä¹‰äº†RequestResponseè¿™ä¸ªç»“æ„ä½“ï¼Œä»£è¡¨è¯·æ±‚æˆ–å“åº”ï¼Œå®ƒåŒ…æ‹¬åºå·å’Œå†…å®¹ä¸¤ä¸ªå­—æ®µã€‚readFromæ–¹æ³•çš„åŠŸèƒ½æ˜¯ï¼Œæ¥æ”¶æ•°æ®ï¼Œååºåˆ—åŒ–æˆRequestResponseã€‚</p><p>åè®®çš„è®¾è®¡æ˜¯è¿™æ ·çš„ï¼šé¦–å…ˆç”¨4ä¸ªå­—èŠ‚æ¥æ ‡æ˜è¿™ä¸ªè¯·æ±‚çš„é•¿åº¦ï¼Œç„¶åç”¨4ä¸ªå­—èŠ‚æ¥ä¿å­˜åºå·ï¼Œæœ€åå˜é•¿çš„éƒ¨åˆ†å°±æ˜¯å¤§çˆ·è¯´çš„è¯ã€‚è¿™é‡Œé¢ç”¨åˆ°äº†ä½¿ç”¨å‰ç½®é•¿åº¦çš„æ–¹å¼æ¥è¿›è¡Œæ–­å¥ï¼Œè¿™ç§æ–­å¥çš„æ–¹å¼æˆ‘åœ¨ä¹‹å‰çš„è¯¾ç¨‹ä¸­ä¸“é—¨è®²åˆ°è¿‡ã€‚</p><p>è¿™é‡Œé¢æˆ‘ä»¬ä½¿ç”¨äº†ä¸“æœ‰çš„åºåˆ—åŒ–æ–¹æ³•ï¼ŒåŸå› æˆ‘åœ¨ä¹‹å‰çš„è¯¾ç¨‹ä¸­é‡ç‚¹è®²è¿‡ï¼Œä¸“æœ‰çš„åºåˆ—åŒ–æ–¹æ³•å…·å¤‡æœ€å¥½çš„æ€§èƒ½ï¼Œåºåˆ—åŒ–å‡ºæ¥çš„å­—èŠ‚æ•°ä¹Ÿæ›´å°‘ï¼Œè€Œæˆ‘ä»¬è¿™ä¸ªä½œä¸šæ¯”æ‹¼çš„å°±æ˜¯æ€§èƒ½ï¼Œæ‰€ä»¥åœ¨è¿™ä¸ªä½œä¸šä¸­é‡‡ç”¨è¿™ç§åºåˆ—åŒ–æ–¹å¼æ˜¯æœ€åˆé€‚çš„é€‰æ‹©ã€‚</p><p>zhangDaYeListenå’ŒliDaYeListenè¿™ä¸¤ä¸ªæ–¹æ³•ï¼Œå®ƒä»¬çš„å®ç°æ˜¯å·®ä¸å¤šçš„ï¼Œå°±æ˜¯æ¥æ”¶å¯¹æ–¹å‘å‡ºçš„è¯·æ±‚ï¼Œç„¶åç»™å‡ºæ­£ç¡®çš„å“åº”ã€‚zhangDaYeSayå’ŒliDaYeSayè¿™ä¸¤ä¸ªæ–¹æ³•çš„å®ç°ä¹Ÿæ˜¯å·®ä¸å¤šçš„ï¼Œå½“ä¿©å¤§çˆ·é‡è§åï¼Œå°±å¼€å§‹ä¸åœåœ°è¯´å„è‡ªçš„è¯·æ±‚ï¼Œ<strong>å¹¶ä¸ç­‰å¾…å¯¹æ–¹çš„å“åº”</strong>ï¼Œè¿ç»­è¯´10ä¸‡æ¬¡ã€‚</p><p>è¿™4ä¸ªæ–¹æ³•ï¼Œåˆ†åˆ«åœ¨4ä¸ªä¸åŒçš„åç¨‹ä¸­å¹¶è¡Œè¿è¡Œï¼Œä¸¤æ”¶ä¸¤å‘ï¼Œå®ç°äº†å…¨åŒå·¥çš„é€šä¿¡ã€‚åœ¨è¿™ä¸ªåœ°æ–¹ï¼Œä¸å°‘åŒå­¦è¿˜æ˜¯æ‘†è„±ä¸äº†â€œä¸€é—®ä¸€ç­”ï¼Œå†é—®å†ç­”â€è¿™ç§äººç±»äº¤æµçš„è‡ªç„¶æ–¹å¼å¯¹æ€ç»´çš„å½±å“ï¼Œå†™å‡ºæ¥çš„ä¾ç„¶æ˜¯å•å·¥é€šä¿¡çš„ç¨‹åºï¼Œå•å·¥é€šä¿¡çš„æ€§èƒ½æ˜¯è¿œè¿œä¸å¦‚åŒå·¥é€šä¿¡çš„ï¼Œæ‰€ä»¥ï¼Œè¦æƒ³åšåˆ°æ¯”è¾ƒå¥½çš„ç½‘ç»œä¼ è¾“æ€§èƒ½ï¼ŒåŒå·¥é€šä¿¡çš„æ–¹å¼æ‰æ˜¯æœ€ä½³çš„é€‰æ‹©ã€‚</p><p>ä¸ºäº†é¿å…å¹¶å‘å‘åŒä¸€ä¸ªsocketä¸­å†™å…¥é€ æˆæ•°æ®æ··ä¹±ï¼Œæˆ‘ä»¬ç»™ä¿©å¤§çˆ·åˆ†åˆ«å®šä¹‰äº†ä¸€ä¸ªå†™é”ï¼Œç¡®ä¿æ¯ä¸ªå¤§çˆ·åŒä¸€æ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªåç¨‹åœ¨å‘é€æ•°æ®ã€‚åé¢çš„è¯¾ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¼šä¸“é—¨æ¥è®²ï¼Œå¦‚ä½•æ­£ç¡®åœ°ä½¿ç”¨é”ã€‚</p><p>æœ€åï¼Œæˆ‘ä»¬ç»™å¼ å¤§çˆ·å®šä¹‰ä¸ºæœåŠ¡ç«¯ï¼Œæå¤§çˆ·å®šä¹‰ä¸ºå®¢æˆ·ç«¯ï¼Œè¿æ¥å»ºç«‹åï¼Œåˆ†åˆ«å¼€å¯ä¸¤ä¸ªå¤§çˆ·çš„è€³æœµå’Œå˜´ï¼Œæ¥å®Œæˆè¿™10ä¸‡æ¬¡é‡è§ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>åœ¨æˆ‘ç»™å‡ºè¿™ä¸ªä¿©å¤§çˆ·ä½œä¸šçš„å®ç°ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è®¡ç®—ä¸€ä¸‹ï¼Œ10ä¸‡æ¬¡é‡è§è€—æ—¶çº¦5ç§’ï¼Œå¹³å‡æ¯ç§’å¯ä»¥é‡è§çº¦2ä¸‡æ¬¡ï¼Œ<strong>è€ƒè™‘åˆ°æ•°æ®é‡çš„å¤§å°ï¼Œè¿™é‡Œé¢ä»ç„¶æœ‰éå¸¸å¤§çš„ä¼˜åŒ–ç©ºé—´ã€‚</strong></p><p>è¯·ä½ åœ¨å……åˆ†ç†è§£è¿™æ®µä»£ç ä¹‹åï¼Œæƒ³ä¸€æƒ³ï¼Œè¿˜æœ‰å“ªäº›åœ°æ–¹æ˜¯å¯ä»¥ä¼˜åŒ–çš„ï¼Œç„¶åä¸€å®šè¦åŠ¨æ‰‹æŠŠä»£ç æ”¹å‡ºæ¥ï¼Œå¹¶è¿è¡Œï¼ŒéªŒè¯ä¸€ä¸‹ä½ çš„æ”¹è¿›æ˜¯å¦çœŸçš„è¾¾åˆ°äº†æ•ˆæœã€‚æ¬¢è¿ä½ åœ¨ç•™è¨€åŒºæå‡ºä½ çš„æ”¹è¿›æ„è§ã€‚</p><p>æ„Ÿè°¢é˜…è¯»ï¼Œå¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰ä¸€äº›å¯å‘ï¼Œä¹Ÿæ¬¢è¿æŠŠå®ƒåˆ†äº«ç»™ä½ çš„æœ‹å‹ã€‚</p><p></p>","comments":[{"had_liked":false,"id":127678,"user_name":"åŒ…æ˜","can_delete":false,"product_type":"c1","uid":1086748,"ip_address":"","ucode":"67B9F661613532","user_header":"https://static001.geekbang.org/account/avatar/00/10/95/1c/3cefe42b.jpg","comment_is_top":false,"comment_ctime":1566778629,"is_pvip":false,"replies":[{"id":47515,"content":"ä½ è¦æ˜ç™½ä¸€ä»¶äº‹å„¿ï¼Œå®¢æˆ·ç«¯å‘æ¥ä¸€æ¡æ•°æ®ï¼Œç›´åˆ°æœåŠ¡ç«¯è¿”å›ç»™å®¢æˆ·ç«¯å‘é€æˆåŠŸï¼Œè¿™æ®µæ—¶é—´å†…ï¼Œæ•°æ®æ˜¯å…è®¸ä¸¢å¤±çš„ã€‚\n\næ•°æ®ä¸¢å¤±åï¼Œå®¢æˆ·ç«¯æ”¶ä¸åˆ°å‘é€æˆåŠŸå“åº”ï¼Œè‡ªç„¶ä¼šé‡è¯•ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1566868175,"ip_address":"","comment_id":127678,"utype":1}],"discussion_count":4,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"Requests Queue å†…å­˜çº§çš„ æ€ä¹ˆåšåˆ°ä¸ä¸¢è¯·æ±‚ï¼Ÿ","like_count":69},{"had_liked":false,"id":127222,"user_name":"é’èˆŸ","can_delete":false,"product_type":"c1","uid":1192732,"ip_address":"","ucode":"2651482AC0DEC6","user_header":"https://static001.geekbang.org/account/avatar/00/12/33/1c/59a4e803.jpg","comment_is_top":false,"comment_ctime":1566614196,"is_pvip":false,"replies":[{"id":47079,"content":"ğŸ‘ğŸ‘ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1566620279,"ip_address":"","comment_id":127222,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"https:&#47;&#47;github.com&#47;qingzhou413&#47;geektime-mq-rpc.git\n\nä½¿ç”¨nettyä½œä¸ºç½‘ç»œåº“ï¼Œserverå’Œclientçš„ioçº¿ç¨‹æ•°éƒ½æ˜¯1ï¼Œç¬”è®°æœ¬4æ ¸æ ‡å‹2.3Gæ—¶é—´2.3ç§’ã€‚","like_count":27,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464384,"discussion_content":"ğŸ‘ğŸ‘ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566620279,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1905373,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/hxdXcxp1wOKuKhiaibDZdrW8yJ2lcGOtVrRdgHS3Ub3ObeYg0ukh5oOMicuWIUORzDVv2OVfdkfnicfZVvQvqtNMpw/132","nickname":"Geek_aecacf","note":"","ucode":"B2C4E8E049786A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":570341,"discussion_content":"è¯·æ•™ä¸ªé—®é¢˜ï¼šè¿™ä¸ªä»£ç æ˜¯ä½¿ç”¨äº†æ‰¹é‡å¤„ç†çš„æ–¹å¼ï¼Œä¼šæ¯”æ™®é€šçš„å¿«å¾ˆå¤šï¼Œä½†æ˜¯ä½¿ç”¨åŒå·¥æ¨¡å¼æ˜¯åœ¨å“ªé‡Œä½“ç°çš„ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651737507,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1899599,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/fc/4f/0a452c94.jpg","nickname":"å¤§æ¯›","note":"","ucode":"93B18287F06706","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1905373,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/hxdXcxp1wOKuKhiaibDZdrW8yJ2lcGOtVrRdgHS3Ub3ObeYg0ukh5oOMicuWIUORzDVv2OVfdkfnicfZVvQvqtNMpw/132","nickname":"Geek_aecacf","note":"","ucode":"B2C4E8E049786A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":630997,"discussion_content":"æœ€ç›´æ¥çš„ä½“ç°æ˜¯ï¼ŒreadFrom å’Œ writeTo ä¸­æ²¡æœ‰ä¿æŠ¤ net.TCPConn çš„é”ï¼ˆwriteToä¸­æœ‰é”ï¼Œä½†æ˜¯æ˜¯ä¸ºäº†è§£å†³å¹¶å‘å†™çš„é—®é¢˜ï¼Œè€Œä¸æ˜¯é”ä½å¯¹net.TCPConnçš„æ“ä½œï¼‰ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨è°ƒç”¨ readFrom çš„åŒæ—¶ä¹Ÿå¯ä»¥è°ƒç”¨ writeToï¼Œè¿™å°±æ˜¯è¯»çš„æ—¶å€™å¯ä»¥å†™ï¼Œä¹Ÿå°±æ˜¯åŒå·¥ã€‚æ›´å…·ä½“çš„ï¼Œå°±æ˜¯åœ¨è°ƒç”¨ conn.Write(lengthByte) çš„æ—¶å€™ä¹Ÿå¯ä»¥è°ƒç”¨ io.ReadFull(conn, buf)ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1699206082,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":570341,"ip_address":"åŒ—äº¬","group_id":0},"score":630997,"extra":""}]}]},{"had_liked":false,"id":161690,"user_name":"ub8","can_delete":false,"product_type":"c1","uid":1481811,"ip_address":"","ucode":"0D937C3EAEB781","user_header":"https://static001.geekbang.org/account/avatar/00/16/9c/53/ade0afb0.jpg","comment_is_top":false,"comment_ctime":1576297133,"is_pvip":false,"replies":[{"id":62381,"content":"ä¸€èˆ¬ç®€å•å¸¸ç”¨çš„åšæ³•éƒ½æ˜¯åœ¨å¤„ç†requestçš„çº¿ç¨‹ä¸­æ‰§è¡Œä¸šåŠ¡é€»è¾‘ï¼Œç„¶åæŠŠresponseè¿”å›ã€‚\n\nå…¶å®ä»ç½‘ç»œå±‚é¢æ¥çœ‹ï¼ŒRequestå’ŒResponseåªæ˜¯å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯äº’ç›¸å‘é€çš„ä¸¤æ®µæ•°æ®ï¼Œå’ŒæœåŠ¡ç«¯å¤„ç†ç”¨ä»€ä¹ˆçº¿ç¨‹å®Œå…¨æ²¡æœ‰å…³ç³»ã€‚\n\nRequestå’ŒResponseå¦‚ä½•å¯¹åº”ï¼Œè¿™ä¸ªå–å†³äºç½‘ç»œä¼ è¾“åè®®æ˜¯æ€ä¹ˆè®¾è®¡çš„ã€‚è¿™ä¸ªæˆ‘ä»¬åœ¨è¯¾ç¨‹ä¸­è®²è¿‡ã€‚\n\nåœ¨æœåŠ¡ç«¯å®ç°ä¸­ï¼Œå¯ä»¥æ¥å—åˆ°Requestä¹‹åï¼Œè¿›è¡Œå¼‚æ­¥å¤„ç†ï¼Œå¼‚æ­¥å¤„ç†å®Œæˆä¹‹åï¼Œæ— è®ºåœ¨ä»€ä¹ˆçº¿ç¨‹ä¸­ï¼Œåªè¦èƒ½æ‹¿åˆ°å¤„ç†ç»“æœæ„å»ºå‡ºResponseï¼Œé€šè¿‡ç½‘ç»œå‘ç»™å®¢æˆ·ç«¯å°±å¯ä»¥äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1576896514,"ip_address":"","comment_id":161690,"utype":1}],"discussion_count":4,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"è€å¸ˆï¼Œæ–‡ä¸­æåˆ°çš„ â€œæˆ‘ä»¬æŠŠå›å¤å“åº”è¿™ä¸ªéœ€è¦ç­‰å¾…èµ„æºçš„æ“ä½œï¼Œä¹Ÿå¼‚æ­¥æ”¾åˆ°å…¶ä»–çš„çº¿ç¨‹ä¸­å»æ‰§è¡Œã€‚â€ï¼›è¿™ä¸ªæ˜¯æ€ä¹ˆå®ç°çš„å‘¢ï¼Ÿ ResponseThread ,å’Œ RequestThread æ˜¯å¦‚ä½•å¯¹åº”ä¸Šçš„ï¼Ÿ","like_count":14,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477817,"discussion_content":"ä¸€èˆ¬ç®€å•å¸¸ç”¨çš„åšæ³•éƒ½æ˜¯åœ¨å¤„ç†requestçš„çº¿ç¨‹ä¸­æ‰§è¡Œä¸šåŠ¡é€»è¾‘ï¼Œç„¶åæŠŠresponseè¿”å›ã€‚\n\nå…¶å®ä»ç½‘ç»œå±‚é¢æ¥çœ‹ï¼ŒRequestå’ŒResponseåªæ˜¯å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯äº’ç›¸å‘é€çš„ä¸¤æ®µæ•°æ®ï¼Œå’ŒæœåŠ¡ç«¯å¤„ç†ç”¨ä»€ä¹ˆçº¿ç¨‹å®Œå…¨æ²¡æœ‰å…³ç³»ã€‚\n\nRequestå’ŒResponseå¦‚ä½•å¯¹åº”ï¼Œè¿™ä¸ªå–å†³äºç½‘ç»œä¼ è¾“åè®®æ˜¯æ€ä¹ˆè®¾è®¡çš„ã€‚è¿™ä¸ªæˆ‘ä»¬åœ¨è¯¾ç¨‹ä¸­è®²è¿‡ã€‚\n\nåœ¨æœåŠ¡ç«¯å®ç°ä¸­ï¼Œå¯ä»¥æ¥å—åˆ°Requestä¹‹åï¼Œè¿›è¡Œå¼‚æ­¥å¤„ç†ï¼Œå¼‚æ­¥å¤„ç†å®Œæˆä¹‹åï¼Œæ— è®ºåœ¨ä»€ä¹ˆçº¿ç¨‹ä¸­ï¼Œåªè¦èƒ½æ‹¿åˆ°å¤„ç†ç»“æœæ„å»ºå‡ºResponseï¼Œé€šè¿‡ç½‘ç»œå‘ç»™å®¢æˆ·ç«¯å°±å¯ä»¥äº†ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1576896514,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1937062,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/8e/a6/c3286b61.jpg","nickname":"Javaå’å¢™å·¥ç¨‹å¸ˆ","note":"","ucode":"E76AE44A9C76AE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":299756,"discussion_content":"åŒä¸€ä¸ªconnection","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1597807351,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1749015,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/b0/17/451cb87c.jpg","nickname":"åŠ æ²¹ï¼","note":"","ucode":"947E97762DB6EF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1937062,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/8e/a6/c3286b61.jpg","nickname":"Javaå’å¢™å·¥ç¨‹å¸ˆ","note":"","ucode":"E76AE44A9C76AE","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":542257,"discussion_content":"éƒ½å¼‚æ­¥äº†æ€ä¹ˆè¿˜åŒä¸€ä¸ªconnectionï¼Œè¿™é‡Œè€å¸ˆä¾‹å­æ˜¯ç”¨goçš„åç¨‹å¤„ç†çš„ï¼Œä¸¤è€…æ²¡æœ‰ä»€ä¹ˆå…³ç³»ï¼Œè€ŒRequestå’ŒResponseå¯¹åº”æ˜¯é€šè¿‡ä¼ è¾“åè®®å¯¹åº”ä¸Šçš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640692287,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":299756,"ip_address":"","group_id":0},"score":542257,"extra":""},{"author":{"id":1592279,"avatar":"https://static001.geekbang.org/account/avatar/00/18/4b/d7/f46c6dfd.jpg","nickname":"William Ning","note":"","ucode":"4DB8D05E69E5F3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1749015,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/b0/17/451cb87c.jpg","nickname":"åŠ æ²¹ï¼","note":"","ucode":"947E97762DB6EF","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":554318,"discussion_content":"è€å¸ˆçš„å›å¤ï¼š\n\nä½ çš„å¤§éƒ¨åˆ†ç†è§£éƒ½æ²¡é—®é¢˜ï¼Œæœ‰ä¸€ä¸ªå°é—®é¢˜æ˜¯ï¼Œç»´æŒä¸€ä¸ªTCPè¿æ¥å¹¶ä¸ä¸€å®šéœ€è¦å ç”¨ä¸€ä¸ªçº¿ç¨‹ã€‚åªæœ‰åœ¨è¿™ä¸ªè¿æ¥ä¸Šæ‰§è¡Œæ”¶å‘æ•°æ®çš„æ—¶å€™ï¼Œæ‰éœ€è¦å ç”¨çº¿ç¨‹ã€‚æ”¶åˆ°è¯·æ±‚å¤„ç†å®Œï¼ŒæŠŠè¯·æ±‚äº¤ç»™å…¶å®ƒçº¿ç¨‹å¤„ç†åï¼Œå½“å‰çº¿ç¨‹å°±å¯ä»¥é‡Šæ”¾äº†ã€‚ç›´åˆ°å“åº”ç”Ÿæˆåï¼Œè¿™æ®µæ—¶é—´åªç»´æŒTCPè¿æ¥æ˜¯ä¸éœ€è¦å ç”¨ä»»ä½•çº¿ç¨‹çš„ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1646316231,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":542257,"ip_address":"","group_id":0},"score":554318,"extra":""}]}]},{"had_liked":false,"id":127449,"user_name":"linqw","can_delete":false,"product_type":"c1","uid":1134138,"ip_address":"","ucode":"09DCFE98C54DD8","user_header":"https://static001.geekbang.org/account/avatar/00/11/4e/3a/86196508.jpg","comment_is_top":false,"comment_ctime":1566718840,"is_pvip":false,"replies":[{"id":47507,"content":"è¿™ä¸ªæµç¨‹ä¸­å¤„ç†çš„æ•°æ®å·²ç»æ˜¯è¢«åˆ†é…è¿‡çš„ï¼Œå•ä¸ªé˜Ÿåˆ—çš„æ•°æ®ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1566867929,"ip_address":"","comment_id":127449,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"è€å¸ˆæœ‰ä¸ªç–‘é—®ï¼Œå¸®å¿™è§£ç­”ä¸‹å“¦ï¼Œåœ¨ä¸Šé¢çš„é‚£ä¸ªæµç¨‹å›¾ä¸­ï¼ŒWriteThreadæ˜¯å•çº¿ç¨‹ä»è¯·æ±‚é˜Ÿåˆ—ä¸­è·å–åˆ°æ¶ˆæ¯ç„¶åæŠŠæ¶ˆæ¯æ”¾åˆ°journal Cacheï¼Œå¼€å¯ReplicationThreadã€FlushThreadè¿›è¡Œå¤„ç†ï¼Œèƒ½å¦æŠŠWriteThreadåšæˆåˆ†é…å™¨äº†ï¼Œmqåªè¦ä¿è¯topicä¸‹çš„é˜Ÿåˆ—æœ‰åºå°±å¯ä»¥ï¼ŒåŒä¸€ä¸ªé˜Ÿåˆ—çš„æ¶ˆæ¯ç”±WriteThreadåˆ†é…ç»™åŒä¸€ä¸ªçº¿ç¨‹è¿›è¡Œå¤„ç†ï¼Œçº¿ç¨‹æ± çš„å½¢å¼ï¼Œçº¿ç¨‹æ± ä¸­çš„æ¯ä¸ªå·¥ä½œçº¿ç¨‹å†…éƒ¨éƒ½æœ‰ä¸ªé›†åˆä¿å­˜æ¶ˆæ¯ï¼Œå¦‚æœå‰é¢æ²¡æœ‰åŒä¸€ä¸ªé˜Ÿåˆ—çš„æ¶ˆæ¯ï¼Œåˆ†é…ç»™æœ€ç©ºé—²çš„çº¿ç¨‹è¿›è¡Œæ‰§è¡Œï¼Œé‚£è¿™æ ·çš„è¯ï¼ŒWriteThreadåªè¦åˆ†é…æ¶ˆæ¯ï¼Œæ¯”å¦‚å¯ä»¥å¯¹å‘é€è¿‡æ¥çš„æ¶ˆæ¯ä¸­è¦ä¿å­˜çš„é˜Ÿåˆ—å±æ€§å€¼è¿›è¡Œhashï¼Œç„¶åæ ¹æ®hashå€¼åˆ¤æ–­çº¿ç¨‹æ± ä¸­çš„æ‰€æœ‰çº¿ç¨‹çš„æ¶ˆæ¯é›†åˆæ˜¯å¦æœ‰ç›¸åŒé˜Ÿåˆ—çš„æ¶ˆæ¯ï¼Œæœ‰çš„è¯åˆ†é…ç»™åŒä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œï¼Œæ²¡æœ‰çš„è¯æœ€ç©ºé—²çš„çº¿ç¨‹æ‰§è¡Œï¼Œmysqlçš„binlogåŒæ­¥ä¹Ÿæ˜¯æœ‰å‡ ç§è¿™ç§ç­–ç•¥ï¼Œå¹¶å‘çš„åŒæ­¥sqlï¼Œåˆšå¼€å§‹æ˜¯åŸºäºåº“ï¼ŒåŒä¸€ä¸ªåº“çš„sqlåˆ†é…åˆ°ä¸€ä¸ªçº¿ç¨‹æ‰§è¡ŒåŒæ­¥ï¼Œä¸åŒåº“è¿›è¡Œå¹¶å‘ï¼Œåæ¥æ˜¯åŸºäºredo logçš„ç»„æäº¤å½¢å¼ï¼Œèƒ½ç»„æäº¤çš„sqlå¯ä»¥å¹¶å‘çš„åŒæ­¥ï¼Œå†åæ¥æ˜¯WRITESETï¼Œæ ¹æ®åº“åã€è¡¨åã€ç´¢å¼•ï¼ˆä¸»é”®å’Œå”¯ä¸€ç´¢å¼•ï¼‰è®¡ç®—hashè¿›è¡Œåˆ†å‘ç­–ç•¥ã€‚","like_count":8,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464496,"discussion_content":"è¿™ä¸ªæµç¨‹ä¸­å¤„ç†çš„æ•°æ®å·²ç»æ˜¯è¢«åˆ†é…è¿‡çš„ï¼Œå•ä¸ªé˜Ÿåˆ—çš„æ•°æ®ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566867929,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":127282,"user_name":"å¾çš‡ä¸‡å²ä¸‡å²ä¸‡ä¸‡å²","can_delete":false,"product_type":"c1","uid":1135155,"ip_address":"","ucode":"8FDD608729A002","user_header":"https://static001.geekbang.org/account/avatar/00/11/52/33/abf321b7.jpg","comment_is_top":false,"comment_ctime":1566633078,"is_pvip":false,"replies":[{"id":47162,"content":"ä¸ä¼šä¸¢ï¼Œå› ä¸ºæ•°æ®å·²ç»å¤åˆ¶åˆ°äº†ä»èŠ‚ç‚¹ä¸Šï¼Œleaderå®•æœºåï¼Œä¼šé‡æ–°é€‰ä¸¾å‡ºæ–°çš„leaderï¼ˆä¹Ÿå°±æ˜¯ä¹‹å‰çš„æŸä¸ªfollowerï¼‰ï¼Œè¿™ä¸ªæ–°leaderä¸Šæ˜¯æœ‰åŸleaderä¸Šçš„å…¨éƒ¨æ•°æ®çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1566708652,"ip_address":"","comment_id":127282,"utype":1}],"discussion_count":6,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"è¯·é—®è€å¸ˆï¼ŒJMQåœ¨followerèŠ‚ç‚¹å“åº”åï¼Œå°±ç»™ç”Ÿäº§è€…å‘é€ç¡®è®¤æ¶ˆæ¯ï¼Œæ­¤æ—¶å¦‚æœleaderèŠ‚ç‚¹æ•…éšœï¼Œæ•°æ®è¿˜åœ¨JournalCacheé‡Œé¢ï¼Œæ‹¿æ˜¯ä¸æ˜¯å¯ä»¥è®¤ä¸ºè¿™éƒ¨åˆ†æ•°æ®ä¸¢å¤±ï¼Ÿ","like_count":8,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464496,"discussion_content":"è¿™ä¸ªæµç¨‹ä¸­å¤„ç†çš„æ•°æ®å·²ç»æ˜¯è¢«åˆ†é…è¿‡çš„ï¼Œå•ä¸ªé˜Ÿåˆ—çš„æ•°æ®ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566867929,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":155806,"user_name":"æå†²","can_delete":false,"product_type":"c1","uid":1254530,"ip_address":"","ucode":"C8C12308B0FDDA","user_header":"https://static001.geekbang.org/account/avatar/00/13/24/82/b5808a60.jpg","comment_is_top":false,"comment_ctime":1574759465,"is_pvip":false,"replies":[{"id":60086,"content":"ğŸ‘ğŸ‘ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1574903308,"ip_address":"","comment_id":155806,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"å€Ÿç”¨è€å¸ˆçš„çš„goæºç ç»è¿‡è¯»ï¼Œå†™ï¼Œå»æ‰é”3æ¬¡æ¼”è¿›ï¼Œåˆ†åˆ«åœ¨é‡‘å±±äº‘ECSï¼ˆ2æ ¸4Gï¼‰ä¸Šè·‘åˆ°3.1&#47;2.4&#47;1.4ç§’çš„æ ·å­ã€‚\næœ€ç»ˆçš„æ–‡ä»¶ï¼šhttps:&#47;&#47;github.com&#47;lichongsw&#47;algorithm&#47;blob&#47;master&#47;duplex_communication_optimization_3_no_write_lock.go","like_count":7,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464412,"discussion_content":"ä¸ä¼šä¸¢ï¼Œå› ä¸ºæ•°æ®å·²ç»å¤åˆ¶åˆ°äº†ä»èŠ‚ç‚¹ä¸Šï¼Œleaderå®•æœºåï¼Œä¼šé‡æ–°é€‰ä¸¾å‡ºæ–°çš„leaderï¼ˆä¹Ÿå°±æ˜¯ä¹‹å‰çš„æŸä¸ªfollowerï¼‰ï¼Œè¿™ä¸ªæ–°leaderä¸Šæ˜¯æœ‰åŸleaderä¸Šçš„å…¨éƒ¨æ•°æ®çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566708652,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1115149,"avatar":"https://static001.geekbang.org/account/avatar/00/11/04/0d/3dc5683a.jpg","nickname":"æŸ¯å¯Ÿé‡‘","note":"","ucode":"F722BF8FCD2C47","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":637884,"discussion_content":"é‚£åœ¨ jorunal cache é‡Œé¢çš„æ•°æ®ä¸å°±ä¸¢å¤±äº†å˜›","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1709041039,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":464412,"ip_address":"ç¾å›½","group_id":0},"score":637884,"extra":""}]},{"author":{"id":1002317,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/4b/4d/0239bc19.jpg","nickname":"ç›Šå†›","note":"","ucode":"5629FA62A01F25","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6578,"discussion_content":"è¿™é‡Œæœ‰ä¸¤ä¸ªé—®é¢˜å“ˆã€‚1.è¿™ä¸ªé¢†å¯¼è€…é€‰ä¸¾æœŸé—´ï¼Œå®¢æˆ·ç«¯å†™å…¥æ¶ˆæ¯æ˜¯å¤±è´¥è¿˜æ˜¯é‡è¯•åˆ°å…¶ä»–broker ï¼Ÿ 2.ä¸€èˆ¬è¿™ä¸ªé¢†å¯¼è€…é€‰ä¸¾æ—¶é—´éœ€è¦å¤šä¹…ï¼Œé‡‡ç”¨å“ªç§åè®®å®ç°çš„ï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1566982978,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1009652,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","nickname":"é’±","note":"","ucode":"2C92A243A463D4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1002317,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/4b/4d/0239bc19.jpg","nickname":"ç›Šå†›","note":"","ucode":"5629FA62A01F25","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":20407,"discussion_content":"å¥½é—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569311074,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":6578,"ip_address":"","group_id":0},"score":20407,"extra":""},{"author":{"id":1802337,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/80/61/ae3bb67c.jpg","nickname":"æ¯›æ¯›è™«å¤§å¸","note":"","ucode":"1EBB026121C060","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1002317,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/4b/4d/0239bc19.jpg","nickname":"ç›Šå†›","note":"","ucode":"5629FA62A01F25","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":175000,"discussion_content":"å®¢æˆ·ç«¯å‘å¾€ä¸€å°brokeråº”è¯¥å†…éƒ¨æœ‰ä¸€ä¸ªæœ€å¤§é‡è¯•æ¬¡æ•°ï¼Œå¦‚æœè¶…è¿‡æœ€å¤§é‡è¯•ä»ç„¶å¤±è´¥ï¼Œä¼šæ ¹æ®ä¹‹å‰å®¢æˆ·ç«¯æ‹‰å–çš„è¯¥ä¸»é¢˜åˆ†å¸ƒçš„é›†ç¾¤åˆ—è¡¨ä¸­å…¶ä»–å¯ç”¨brokerç»§ç»­å‘é€ï¼Œé‚£ä¹ˆæ•…éšœçš„brokerå†…éƒ¨è¯¥ä¸»é¢˜çš„å­˜å‚¨ä¼šè¿›è¡Œé€‰ä¸¾ï¼Œè¿™é‡Œå¹¶ä¸æ˜¯brokerçš„é€‰ä¸¾è€Œæ˜¯ç±»ä¼¼å­˜å‚¨ä¸Šçš„åˆ†åŒºæˆ–è€…é˜Ÿåˆ—çš„é€‰ä¸¾ï¼Œæ–°leaderäº§ç”Ÿåœ¨ä¹‹å‰è¯¥ä¸»é¢˜å­˜å‚¨çš„å…¶ä»–brokerä¸Šçš„å‰¯æœ¬ä¸Šï¼Œç”±é€‰ä¸¾çš„termä»»æœŸå€¼å’Œæœ€å¤§æ—¥å¿—å¤åˆ¶ä½ç½®å†³å®šï¼Œè¯¥é€‰ä¸¾ä½¿ç”¨raftå®ç°çš„ï¼Œå¤åˆ¶ä¹Ÿæ˜¯raftåè®®ï¼Œé€‰ä¸¾æˆåŠŸçš„æ—¶é—´ä¸€èˆ¬æ˜¯1ç§’å†…ï¼Œfolloweræˆä¸ºleaderçš„è¶…æ—¶æ—¶é—´ä¸€èˆ¬æ˜¯150ms~300msä¹‹é—´ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581947975,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":6578,"ip_address":"","group_id":0},"score":175000,"extra":""}]},{"author":{"id":1980201,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/37/29/b3af57a7.jpg","nickname":"å‡¯æ–‡å°çŒª","note":"","ucode":"36D8AD0229547F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":373131,"discussion_content":"æˆ‘æƒ³äº†è§£ä¸‹leaderä¸followä¹‹é—´åŒæ­¥æ•°æ® æ˜¯åŸºäºåŠåŒæ­¥è¿˜æ˜¯è‡ªå·±å®ç°äº†ä¸€ä¸ªå¤åˆ¶çŠ¶æ€æœºï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620627862,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":143835,"user_name":"æå¿ƒå®‡ğŸ¦‰","can_delete":false,"product_type":"c1","uid":1208306,"ip_address":"","ucode":"C381CA80170D5B","user_header":"https://static001.geekbang.org/account/avatar/00/12/6f/f2/1f77b0bd.jpg","comment_is_top":false,"comment_ctime":1571797838,"is_pvip":false,"replies":[{"id":55638,"content":"ä½ çš„å¤§éƒ¨åˆ†ç†è§£éƒ½æ²¡é—®é¢˜ï¼Œæœ‰ä¸€ä¸ªå°é—®é¢˜æ˜¯ï¼Œç»´æŒä¸€ä¸ªTCPè¿æ¥å¹¶ä¸ä¸€å®šéœ€è¦å ç”¨ä¸€ä¸ªçº¿ç¨‹ã€‚åªæœ‰åœ¨è¿™ä¸ªè¿æ¥ä¸Šæ‰§è¡Œæ”¶å‘æ•°æ®çš„æ—¶å€™ï¼Œæ‰éœ€è¦å ç”¨çº¿ç¨‹ã€‚æ”¶åˆ°è¯·æ±‚å¤„ç†å®Œï¼ŒæŠŠè¯·æ±‚äº¤ç»™å…¶å®ƒçº¿ç¨‹å¤„ç†åï¼Œå½“å‰çº¿ç¨‹å°±å¯ä»¥é‡Šæ”¾äº†ã€‚ç›´åˆ°å“åº”ç”Ÿæˆåï¼Œè¿™æ®µæ—¶é—´åªç»´æŒTCPè¿æ¥æ˜¯ä¸éœ€è¦å ç”¨ä»»ä½•çº¿ç¨‹çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1571883695,"ip_address":"","comment_id":143835,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"è€å¸ˆå¥½ï¼Œæˆ‘å¯¹JMQçš„brokeræ¥æ”¶ç”Ÿäº§è€…è¯·æ±‚å¹¶å†™å…¥æ¶ˆæ¯çš„æµç¨‹æœ‰ä¸ªç–‘é—®ã€‚\nåœ¨å¤„ç†å®Œæ•°æ®è½ç›˜å’Œå¤šèŠ‚ç‚¹æ•°æ®å¤åˆ¶ä¹‹åï¼Œè¦ç»™ç”Ÿäº§è€…å›å¤å“åº”äº†ï¼Œè¿™æ—¶å€™brokerå¦‚ä½•èƒ½æ‰¾åˆ°ç”Ÿäº§è€…å‘¢ï¼Ÿæˆ‘ç†è§£æ˜¯ç¬¬ä¸€æ­¥ç”Ÿäº§è€…å‘é€è¯·æ±‚å»ºç«‹çš„TCPè¿æ¥å¥æŸ„æ²¡æœ‰é‡Šæ”¾ï¼Œæœ€åå†é€šè¿‡è¿™ä¸ªè¿æ¥å¥æŸ„æ¥writeå“åº”ã€‚è¿™æ ·çš„è¯ï¼Œè¿˜æ˜¯æ¯ä¸ªè¿æ¥åœ¨å¾—åˆ°å“åº”ä¹‹å‰ä¸èƒ½é‡Šæ”¾éœ€è¦å ç”¨ä¸€ä¸ªçº¿ç¨‹å•Šã€‚è¯·é—®æ˜¯æ€ä¹ˆåšåˆ°åœ¨ç¬¬ä¸€æ­¥æ¥æ”¶å“åº”é˜¶æ®µåªéœ€è¦å¾ˆå°‘çš„çº¿ç¨‹çš„ï¼Ÿæ˜¯ä¸æ˜¯åˆ©ç”¨å¼‚æ­¥éé˜»å¡ï¼Œåœ¨çº¿ç¨‹é‡Œè®¾ç½®å¤§é‡çš„åç¨‹æ¥å¤„ç†è¯·æ±‚ï¼Ÿ","like_count":5,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475879,"discussion_content":"ğŸ‘ğŸ‘ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574903308,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1254530,"avatar":"https://static001.geekbang.org/account/avatar/00/13/24/82/b5808a60.jpg","nickname":"æå†²","note":"","ucode":"C8C12308B0FDDA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":79925,"discussion_content":"ç»è¿‡å†ä¸€æ¬¡æ‰¹é‡å†™ä¼˜åŒ–åï¼Œé‡‘å±±äº‘ECSï¼ˆ2æ ¸4Gï¼‰ä¸Šè·‘åˆ°0.7ç§’å·¦å³ã€‚\nhttps://github.com/lichongsw/algorithm/blob/master/duplex_communication_optimization_4_use_write_buf.go","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1576124046,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":134918,"user_name":"Martin","can_delete":false,"product_type":"c1","uid":1464381,"ip_address":"","ucode":"8EAA93D6432C22","user_header":"https://static001.geekbang.org/account/avatar/00/16/58/3d/4ba98f04.jpg","comment_is_top":false,"comment_ctime":1568952577,"is_pvip":false,"replies":[{"id":51839,"content":"ğŸ‘ğŸ‘ğŸ‘æ­£ç¡®å†™å‡ºè¿™ä¸ªç¨‹åºå·®ä¸å¤šå°±æ˜¯è¿™ä¸ªè€—æ—¶ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1569024325,"ip_address":"","comment_id":134918,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"https:&#47;&#47;github.com&#47;MartinDai&#47;mq-in-action&#47;blob&#47;master&#47;src&#47;main&#47;java&#47;com&#47;doodl6&#47;mq&#47;MeetInRpc.java\n\nåŸºäºnetty4å®ç°çš„ï¼ŒMacbook pro 2015æ¬¾ 13å¯¸ æµ‹è¯•å·®ä¸å¤š4.2ç§’å·¦å³ï¼Œè€å¸ˆå¸®å¿™çœ‹çœ‹å“ªé‡Œè¿˜å¯ä»¥æœ‰ä¼˜åŒ–ç©ºé—´å—","like_count":5,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467956,"discussion_content":"ğŸ‘ğŸ‘ğŸ‘æ­£ç¡®å†™å‡ºè¿™ä¸ªç¨‹åºå·®ä¸å¤šå°±æ˜¯è¿™ä¸ªè€—æ—¶ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569024325,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1577210,"avatar":"https://static001.geekbang.org/account/avatar/00/18/10/fa/d977627e.jpg","nickname":"åˆ˜å¤§äºº","note":"","ucode":"F66AE613E80398","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":336798,"discussion_content":"åŒæ ·çš„ä»£ç  æˆ‘å’‹è·‘äº† 11s","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608704749,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":127929,"user_name":"å—è¾•åŒ—è¾™","can_delete":false,"product_type":"c1","uid":1214502,"ip_address":"","ucode":"03EC406AE0D591","user_header":"https://static001.geekbang.org/account/avatar/00/12/88/26/b8c53cee.jpg","comment_is_top":false,"comment_ctime":1566811243,"is_pvip":false,"replies":[{"id":47525,"content":"æ­å–œä½ å­¦åˆ°äº†ğŸ˜„","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1566868614,"ip_address":"","comment_id":127929,"utype":1}],"discussion_count":4,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"æŠŠè€å¸ˆçš„ä»£ç çœ‹äº†néï¼Œå†ç”¨javaçš„åŸç”Ÿnioå®ç°äº†ä¸€éï¼Œç†è§£äº†è€å¸ˆçš„ç”¨å¿ƒè‰¯è‹¦ã€‚å‰äºŒç« åºåˆ—åŒ–ä¸ç½‘ç»œåè®®é‚£å—çš„çŸ¥è¯†ï¼Œå¯¹åº”ä»£ç å¯¹äºstructçš„æ„é€ ï¼Œå››å­—èŠ‚çš„æ€»é•¿åº¦ï¼Œå››å­—èŠ‚çš„åºå·ï¼Œä»¥åŠå˜é•¿å†…å®¹ï¼Œç„¶åäºŒä¸ªå¤§çˆ·åœ¨æ¥å—åˆ°æ•°æ®ä»¥åä¹Ÿæ˜¯æ ¹æ®è¿™ä¸ªåè®®è¿›è¡Œå–æ•°æ®ã€‚ä¹Ÿå°±å¯¹åº”äº†åºåˆ—åŒ–ä»¥åŠåè®®éƒ½æ˜¯è‡ªå®šä¹‰çš„ï¼ï¼äºŒä¸ªå¤§çˆ·éƒ½æ‡‚è¯¥æ€ä¹ˆä»äºŒè¿›åˆ¶çš„æ•°æ®ä¸­ï¼Œæå–å‡ºå¯¹è¯ã€‚","like_count":3,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467956,"discussion_content":"ğŸ‘ğŸ‘ğŸ‘æ­£ç¡®å†™å‡ºè¿™ä¸ªç¨‹åºå·®ä¸å¤šå°±æ˜¯è¿™ä¸ªè€—æ—¶ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569024325,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1577210,"avatar":"https://static001.geekbang.org/account/avatar/00/18/10/fa/d977627e.jpg","nickname":"åˆ˜å¤§äºº","note":"","ucode":"F66AE613E80398","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":336798,"discussion_content":"åŒæ ·çš„ä»£ç  æˆ‘å’‹è·‘äº† 11s","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608704749,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":127781,"user_name":"åˆ˜å¤©é¹","can_delete":false,"product_type":"c1","uid":1632015,"ip_address":"","ucode":"FB146250578911","user_header":"https://static001.geekbang.org/account/avatar/00/18/e7/0f/fa840c1b.jpg","comment_is_top":false,"comment_ctime":1566791888,"is_pvip":false,"replies":[{"id":47520,"content":"å¦‚æœæ˜¯å¤šä¸ªçº¿ç¨‹å¹¶å‘å‘åŒä¸€ä¸ªsocketä¸­å†™æ•°æ®ï¼Œè¿™ä¸ªé”æ˜¯å¿…é¡»åŠ çš„ã€‚\n\næ¯”å¦‚ï¼ŒAçº¿ç¨‹å‘é€â€œ123456â€ï¼ŒBçº¿ç¨‹å‘é€â€œabcdâ€ï¼Œå¦‚æœä¸åŠ é”ï¼Œå¯¹ç«¯æ”¶åˆ°çš„å¯èƒ½å°±æˆäº†â€œ12abc345d6â€ï¼Œè¿™ç§æ•°æ®æ˜¯å¯¹ç«¯æ˜¯æ²¡æ³•è§£æçš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1566868410,"ip_address":"","comment_id":127781,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"è€å¸ˆçš„writeToå‡½æ•°æ²¡å¿…è¦åŠ é”å§ï¼Œç”¨ä¸€ä¸ªå±€éƒ¨ç¼“å†²æŠŠlengthByte serialBytes payloadBytesæ‹¼è£…å¥½å†ä¸€èµ·å‘é€åº”è¯¥å°±å¯ä»¥äº†\næˆ‘æŠŠæˆ‘çš„å¤§çˆ·æ”¹æˆåŒå·¥çš„ï¼Œå¤šçº¿ç¨‹çš„ï¼Œå¯ä»¥æ‰“åŒ…å‘é€çš„ï¼Œç°åœ¨å¤§çˆ·è¿˜åªæœ‰ä¸€å¼ å˜´ä¸€ä¸ªè€³æœµï¼ˆä¸€ä¸ªsocketè¿æ¥ï¼‰\nå¯èƒ½æ˜¯æ²¡æœ‰é€»è¾‘å¤„ç†çš„è´Ÿæ‹…ï¼Œå¤šçº¿ç¨‹æ²¡å•¥æ”¹å˜\næ‰“åŒ…å‘é€æœ‰ä¸€å®šçš„æ”¹è¿›ï¼Œ1æ¬¡3æ¡æ•°æ® 14s\nç°åœ¨100ä¸‡æ¬¡èƒ¡åŒç¢°é¢ï¼Œ8.66s(å…¬å¸çš„i7)\n\nhttps:&#47;&#47;gist.github.com&#47;liutianpeng&#47;d9330f85d47525a8e32dcd24f5738e55","like_count":3,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464710,"discussion_content":"æ­å–œä½ å­¦åˆ°äº†ğŸ˜„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566868614,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1740409,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/8e/79/f9d5dd3a.jpg","nickname":"å•è¶…","note":"","ucode":"B36883984BE16B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":369247,"discussion_content":"æ—¢ç„¶é—®ç­”çš„å†…å®¹æ˜¯æ—¢å®šçš„ï¼Œé‚£ç›´æ¥ç”¨æšä¸¾ä¼ 123456å²‚ä¸ç¾å“‰ï¼Ÿè¿åºåˆ—åŒ–éƒ½çœäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618986945,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1577210,"avatar":"https://static001.geekbang.org/account/avatar/00/18/10/fa/d977627e.jpg","nickname":"åˆ˜å¤§äºº","note":"","ucode":"F66AE613E80398","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":336713,"discussion_content":"Java ä»£ç  åˆ†äº«ä¸‹ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608685595,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1214502,"avatar":"https://static001.geekbang.org/account/avatar/00/12/88/26/b8c53cee.jpg","nickname":"å—è¾•åŒ—è¾™","note":"","ucode":"03EC406AE0D591","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6252,"discussion_content":"æ—¢ç„¶è€³æœµä»£ç ä¸­å¯¹è¯å­—ç¬¦ä¸²éƒ½æ˜¯ç”¨æ¥åˆ¤æ–­çš„ï¼Œå¯å¦åœ¨ä¼ é€’è¿‡ç¨‹ä¸­ç”¨ä¸€ä¸ªæ•°å­—ç‰ˆæœ¬å·æ¥ä»£æ›¿å¯¹è¯å†…å®¹ï¼Œå‡å°‘ä¼ é€’æ•°æ®é‡ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566811558,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":127678,"user_name":"åŒ…æ˜","can_delete":false,"product_type":"c1","uid":1086748,"ip_address":"","ucode":"67B9F661613532","user_header":"https://static001.geekbang.org/account/avatar/00/10/95/1c/3cefe42b.jpg","comment_is_top":false,"comment_ctime":1566778629,"is_pvip":false,"replies":[{"id":47515,"content":"ä½ è¦æ˜ç™½ä¸€ä»¶äº‹å„¿ï¼Œå®¢æˆ·ç«¯å‘æ¥ä¸€æ¡æ•°æ®ï¼Œç›´åˆ°æœåŠ¡ç«¯è¿”å›ç»™å®¢æˆ·ç«¯å‘é€æˆåŠŸï¼Œè¿™æ®µæ—¶é—´å†…ï¼Œæ•°æ®æ˜¯å…è®¸ä¸¢å¤±çš„ã€‚\n\næ•°æ®ä¸¢å¤±åï¼Œå®¢æˆ·ç«¯æ”¶ä¸åˆ°å‘é€æˆåŠŸå“åº”ï¼Œè‡ªç„¶ä¼šé‡è¯•ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1566868175,"ip_address":"","comment_id":127678,"utype":1}],"discussion_count":4,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"Requests Queue å†…å­˜çº§çš„ æ€ä¹ˆåšåˆ°ä¸ä¸¢è¯·æ±‚ï¼Ÿ","like_count":69,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464605,"discussion_content":"ä½ è¦æ˜ç™½ä¸€ä»¶äº‹å„¿ï¼Œå®¢æˆ·ç«¯å‘æ¥ä¸€æ¡æ•°æ®ï¼Œç›´åˆ°æœåŠ¡ç«¯è¿”å›ç»™å®¢æˆ·ç«¯å‘é€æˆåŠŸï¼Œè¿™æ®µæ—¶é—´å†…ï¼Œæ•°æ®æ˜¯å…è®¸ä¸¢å¤±çš„ã€‚\n\næ•°æ®ä¸¢å¤±åï¼Œå®¢æˆ·ç«¯æ”¶ä¸åˆ°å‘é€æˆåŠŸå“åº”ï¼Œè‡ªç„¶ä¼šé‡è¯•ã€‚","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1566868175,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1980201,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/37/29/b3af57a7.jpg","nickname":"å‡¯æ–‡å°çŒª","note":"","ucode":"36D8AD0229547F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":373130,"discussion_content":"è¿™ç§éƒ½æ˜¯é å®¢æˆ·ç«¯è‡ªå·±å®ç°çŠ¶æ€æœº æ¯”æ–¹è¯´rocketmqçš„å¯é æ¶ˆæ¯ä¸€è‡´æ€§ æˆ–è€…å°±æ˜¯å®ç°retriesç‰¹æ€§","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1620627777,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2417723,"avatar":"https://static001.geekbang.org/account/avatar/00/24/e4/3b/f1b9d6bf.jpg","nickname":"è”¡ä¿Šè´¤","note":"","ucode":"A856D094E3F4A3","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":390496,"discussion_content":"åœ¨å®¢æˆ·ç«¯å‘é€æ¶ˆæ¯åæ”¶åˆ°ACKå‰çš„è¿™æ®µæ—¶é—´å†…ï¼Œè¿™æ¡æ¶ˆæ¯çš„çŠ¶æ€å¯¹å®¢æˆ·ç«¯æ¥è¯´å°±æ˜¯å‘é€ä¸­ï¼Œå‘é€ä¸­çš„æ¶ˆæ¯æ˜¯å…è®¸ä¸¢å¤±çš„ï¼Œä¸ç®¡æ˜¯å› ä¸ºç½‘ç»œåŸå› æ²¡æœ‰åˆ°è¾¾brokerï¼Œè¿˜æ˜¯åœ¨brokerçš„ç¼“å­˜ä¸­ä¸¢å¤±ï¼Œå¯¹äºå®¢æˆ·ç«¯æ¥è¯´ï¼Œå®ƒå¯ä»¥åœ¨è¶…æ—¶æ²¡æœ‰æ”¶åˆ°ACKååˆ¤æ–­ä¸ºæ¶ˆæ¯å‘é€å¤±è´¥ï¼Œä»è€Œè¿›å…¥é‡å‘æµç¨‹","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1629865241,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1110723,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f2/c3/f18e4507.jpg","nickname":"è¿œé¹","note":"","ucode":"37B06413D88BEC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":216661,"discussion_content":"å†…å­˜çº§çš„ä¸œè¥¿æœ¬èº«æ˜¯åšä¸åˆ°ä¸ä¸¢è¯·æ±‚çš„ï¼Œä½†å¯ä»¥é€šè¿‡å…¶ä»–æ‰‹æ®µè¿›è¡Œæ¶ˆæ¯çš„ç¡®è®¤æ¥è¿›ä¸€æ­¥åˆ¤æ–­æ¶ˆæ¯çš„å®Œæ•´æ€§","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1585474211,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":127222,"user_name":"é’èˆŸ","can_delete":false,"product_type":"c1","uid":1192732,"ip_address":"","ucode":"2651482AC0DEC6","user_header":"https://static001.geekbang.org/account/avatar/00/12/33/1c/59a4e803.jpg","comment_is_top":false,"comment_ctime":1566614196,"is_pvip":false,"replies":[{"id":47079,"content":"ğŸ‘ğŸ‘ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1566620279,"ip_address":"","comment_id":127222,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"https:&#47;&#47;github.com&#47;qingzhou413&#47;geektime-mq-rpc.git\n\nä½¿ç”¨nettyä½œä¸ºç½‘ç»œåº“ï¼Œserverå’Œclientçš„ioçº¿ç¨‹æ•°éƒ½æ˜¯1ï¼Œç¬”è®°æœ¬4æ ¸æ ‡å‹2.3Gæ—¶é—´2.3ç§’ã€‚","like_count":27,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464605,"discussion_content":"ä½ è¦æ˜ç™½ä¸€ä»¶äº‹å„¿ï¼Œå®¢æˆ·ç«¯å‘æ¥ä¸€æ¡æ•°æ®ï¼Œç›´åˆ°æœåŠ¡ç«¯è¿”å›ç»™å®¢æˆ·ç«¯å‘é€æˆåŠŸï¼Œè¿™æ®µæ—¶é—´å†…ï¼Œæ•°æ®æ˜¯å…è®¸ä¸¢å¤±çš„ã€‚\n\næ•°æ®ä¸¢å¤±åï¼Œå®¢æˆ·ç«¯æ”¶ä¸åˆ°å‘é€æˆåŠŸå“åº”ï¼Œè‡ªç„¶ä¼šé‡è¯•ã€‚","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1566868175,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1980201,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/37/29/b3af57a7.jpg","nickname":"å‡¯æ–‡å°çŒª","note":"","ucode":"36D8AD0229547F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":373130,"discussion_content":"è¿™ç§éƒ½æ˜¯é å®¢æˆ·ç«¯è‡ªå·±å®ç°çŠ¶æ€æœº æ¯”æ–¹è¯´rocketmqçš„å¯é æ¶ˆæ¯ä¸€è‡´æ€§ æˆ–è€…å°±æ˜¯å®ç°retriesç‰¹æ€§","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1620627777,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2417723,"avatar":"https://static001.geekbang.org/account/avatar/00/24/e4/3b/f1b9d6bf.jpg","nickname":"è”¡ä¿Šè´¤","note":"","ucode":"A856D094E3F4A3","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":390496,"discussion_content":"åœ¨å®¢æˆ·ç«¯å‘é€æ¶ˆæ¯åæ”¶åˆ°ACKå‰çš„è¿™æ®µæ—¶é—´å†…ï¼Œè¿™æ¡æ¶ˆæ¯çš„çŠ¶æ€å¯¹å®¢æˆ·ç«¯æ¥è¯´å°±æ˜¯å‘é€ä¸­ï¼Œå‘é€ä¸­çš„æ¶ˆæ¯æ˜¯å…è®¸ä¸¢å¤±çš„ï¼Œä¸ç®¡æ˜¯å› ä¸ºç½‘ç»œåŸå› æ²¡æœ‰åˆ°è¾¾brokerï¼Œè¿˜æ˜¯åœ¨brokerçš„ç¼“å­˜ä¸­ä¸¢å¤±ï¼Œå¯¹äºå®¢æˆ·ç«¯æ¥è¯´ï¼Œå®ƒå¯ä»¥åœ¨è¶…æ—¶æ²¡æœ‰æ”¶åˆ°ACKååˆ¤æ–­ä¸ºæ¶ˆæ¯å‘é€å¤±è´¥ï¼Œä»è€Œè¿›å…¥é‡å‘æµç¨‹","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1629865241,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1110723,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f2/c3/f18e4507.jpg","nickname":"è¿œé¹","note":"","ucode":"37B06413D88BEC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":216661,"discussion_content":"å†…å­˜çº§çš„ä¸œè¥¿æœ¬èº«æ˜¯åšä¸åˆ°ä¸ä¸¢è¯·æ±‚çš„ï¼Œä½†å¯ä»¥é€šè¿‡å…¶ä»–æ‰‹æ®µè¿›è¡Œæ¶ˆæ¯çš„ç¡®è®¤æ¥è¿›ä¸€æ­¥åˆ¤æ–­æ¶ˆæ¯çš„å®Œæ•´æ€§","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1585474211,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":161690,"user_name":"ub8","can_delete":false,"product_type":"c1","uid":1481811,"ip_address":"","ucode":"0D937C3EAEB781","user_header":"https://static001.geekbang.org/account/avatar/00/16/9c/53/ade0afb0.jpg","comment_is_top":false,"comment_ctime":1576297133,"is_pvip":false,"replies":[{"id":62381,"content":"ä¸€èˆ¬ç®€å•å¸¸ç”¨çš„åšæ³•éƒ½æ˜¯åœ¨å¤„ç†requestçš„çº¿ç¨‹ä¸­æ‰§è¡Œä¸šåŠ¡é€»è¾‘ï¼Œç„¶åæŠŠresponseè¿”å›ã€‚\n\nå…¶å®ä»ç½‘ç»œå±‚é¢æ¥çœ‹ï¼ŒRequestå’ŒResponseåªæ˜¯å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯äº’ç›¸å‘é€çš„ä¸¤æ®µæ•°æ®ï¼Œå’ŒæœåŠ¡ç«¯å¤„ç†ç”¨ä»€ä¹ˆçº¿ç¨‹å®Œå…¨æ²¡æœ‰å…³ç³»ã€‚\n\nRequestå’ŒResponseå¦‚ä½•å¯¹åº”ï¼Œè¿™ä¸ªå–å†³äºç½‘ç»œä¼ è¾“åè®®æ˜¯æ€ä¹ˆè®¾è®¡çš„ã€‚è¿™ä¸ªæˆ‘ä»¬åœ¨è¯¾ç¨‹ä¸­è®²è¿‡ã€‚\n\nåœ¨æœåŠ¡ç«¯å®ç°ä¸­ï¼Œå¯ä»¥æ¥å—åˆ°Requestä¹‹åï¼Œè¿›è¡Œå¼‚æ­¥å¤„ç†ï¼Œå¼‚æ­¥å¤„ç†å®Œæˆä¹‹åï¼Œæ— è®ºåœ¨ä»€ä¹ˆçº¿ç¨‹ä¸­ï¼Œåªè¦èƒ½æ‹¿åˆ°å¤„ç†ç»“æœæ„å»ºå‡ºResponseï¼Œé€šè¿‡ç½‘ç»œå‘ç»™å®¢æˆ·ç«¯å°±å¯ä»¥äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1576896514,"ip_address":"","comment_id":161690,"utype":1}],"discussion_count":4,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"è€å¸ˆï¼Œæ–‡ä¸­æåˆ°çš„ â€œæˆ‘ä»¬æŠŠå›å¤å“åº”è¿™ä¸ªéœ€è¦ç­‰å¾…èµ„æºçš„æ“ä½œï¼Œä¹Ÿå¼‚æ­¥æ”¾åˆ°å…¶ä»–çš„çº¿ç¨‹ä¸­å»æ‰§è¡Œã€‚â€ï¼›è¿™ä¸ªæ˜¯æ€ä¹ˆå®ç°çš„å‘¢ï¼Ÿ ResponseThread ,å’Œ RequestThread æ˜¯å¦‚ä½•å¯¹åº”ä¸Šçš„ï¼Ÿ","like_count":14,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464384,"discussion_content":"ğŸ‘ğŸ‘ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566620279,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1905373,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/hxdXcxp1wOKuKhiaibDZdrW8yJ2lcGOtVrRdgHS3Ub3ObeYg0ukh5oOMicuWIUORzDVv2OVfdkfnicfZVvQvqtNMpw/132","nickname":"Geek_aecacf","note":"","ucode":"B2C4E8E049786A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":570341,"discussion_content":"è¯·æ•™ä¸ªé—®é¢˜ï¼šè¿™ä¸ªä»£ç æ˜¯ä½¿ç”¨äº†æ‰¹é‡å¤„ç†çš„æ–¹å¼ï¼Œä¼šæ¯”æ™®é€šçš„å¿«å¾ˆå¤šï¼Œä½†æ˜¯ä½¿ç”¨åŒå·¥æ¨¡å¼æ˜¯åœ¨å“ªé‡Œä½“ç°çš„ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651737507,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1899599,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/fc/4f/0a452c94.jpg","nickname":"å¤§æ¯›","note":"","ucode":"93B18287F06706","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1905373,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/hxdXcxp1wOKuKhiaibDZdrW8yJ2lcGOtVrRdgHS3Ub3ObeYg0ukh5oOMicuWIUORzDVv2OVfdkfnicfZVvQvqtNMpw/132","nickname":"Geek_aecacf","note":"","ucode":"B2C4E8E049786A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":630997,"discussion_content":"æœ€ç›´æ¥çš„ä½“ç°æ˜¯ï¼ŒreadFrom å’Œ writeTo ä¸­æ²¡æœ‰ä¿æŠ¤ net.TCPConn çš„é”ï¼ˆwriteToä¸­æœ‰é”ï¼Œä½†æ˜¯æ˜¯ä¸ºäº†è§£å†³å¹¶å‘å†™çš„é—®é¢˜ï¼Œè€Œä¸æ˜¯é”ä½å¯¹net.TCPConnçš„æ“ä½œï¼‰ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨è°ƒç”¨ readFrom çš„åŒæ—¶ä¹Ÿå¯ä»¥è°ƒç”¨ writeToï¼Œè¿™å°±æ˜¯è¯»çš„æ—¶å€™å¯ä»¥å†™ï¼Œä¹Ÿå°±æ˜¯åŒå·¥ã€‚æ›´å…·ä½“çš„ï¼Œå°±æ˜¯åœ¨è°ƒç”¨ conn.Write(lengthByte) çš„æ—¶å€™ä¹Ÿå¯ä»¥è°ƒç”¨ io.ReadFull(conn, buf)ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1699206082,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":570341,"ip_address":"åŒ—äº¬","group_id":0},"score":630997,"extra":""}]}]},{"had_liked":false,"id":127449,"user_name":"linqw","can_delete":false,"product_type":"c1","uid":1134138,"ip_address":"","ucode":"09DCFE98C54DD8","user_header":"https://static001.geekbang.org/account/avatar/00/11/4e/3a/86196508.jpg","comment_is_top":false,"comment_ctime":1566718840,"is_pvip":false,"replies":[{"id":47507,"content":"è¿™ä¸ªæµç¨‹ä¸­å¤„ç†çš„æ•°æ®å·²ç»æ˜¯è¢«åˆ†é…è¿‡çš„ï¼Œå•ä¸ªé˜Ÿåˆ—çš„æ•°æ®ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1566867929,"ip_address":"","comment_id":127449,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"è€å¸ˆæœ‰ä¸ªç–‘é—®ï¼Œå¸®å¿™è§£ç­”ä¸‹å“¦ï¼Œåœ¨ä¸Šé¢çš„é‚£ä¸ªæµç¨‹å›¾ä¸­ï¼ŒWriteThreadæ˜¯å•çº¿ç¨‹ä»è¯·æ±‚é˜Ÿåˆ—ä¸­è·å–åˆ°æ¶ˆæ¯ç„¶åæŠŠæ¶ˆæ¯æ”¾åˆ°journal Cacheï¼Œå¼€å¯ReplicationThreadã€FlushThreadè¿›è¡Œå¤„ç†ï¼Œèƒ½å¦æŠŠWriteThreadåšæˆåˆ†é…å™¨äº†ï¼Œmqåªè¦ä¿è¯topicä¸‹çš„é˜Ÿåˆ—æœ‰åºå°±å¯ä»¥ï¼ŒåŒä¸€ä¸ªé˜Ÿåˆ—çš„æ¶ˆæ¯ç”±WriteThreadåˆ†é…ç»™åŒä¸€ä¸ªçº¿ç¨‹è¿›è¡Œå¤„ç†ï¼Œçº¿ç¨‹æ± çš„å½¢å¼ï¼Œçº¿ç¨‹æ± ä¸­çš„æ¯ä¸ªå·¥ä½œçº¿ç¨‹å†…éƒ¨éƒ½æœ‰ä¸ªé›†åˆä¿å­˜æ¶ˆæ¯ï¼Œå¦‚æœå‰é¢æ²¡æœ‰åŒä¸€ä¸ªé˜Ÿåˆ—çš„æ¶ˆæ¯ï¼Œåˆ†é…ç»™æœ€ç©ºé—²çš„çº¿ç¨‹è¿›è¡Œæ‰§è¡Œï¼Œé‚£è¿™æ ·çš„è¯ï¼ŒWriteThreadåªè¦åˆ†é…æ¶ˆæ¯ï¼Œæ¯”å¦‚å¯ä»¥å¯¹å‘é€è¿‡æ¥çš„æ¶ˆæ¯ä¸­è¦ä¿å­˜çš„é˜Ÿåˆ—å±æ€§å€¼è¿›è¡Œhashï¼Œç„¶åæ ¹æ®hashå€¼åˆ¤æ–­çº¿ç¨‹æ± ä¸­çš„æ‰€æœ‰çº¿ç¨‹çš„æ¶ˆæ¯é›†åˆæ˜¯å¦æœ‰ç›¸åŒé˜Ÿåˆ—çš„æ¶ˆæ¯ï¼Œæœ‰çš„è¯åˆ†é…ç»™åŒä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œï¼Œæ²¡æœ‰çš„è¯æœ€ç©ºé—²çš„çº¿ç¨‹æ‰§è¡Œï¼Œmysqlçš„binlogåŒæ­¥ä¹Ÿæ˜¯æœ‰å‡ ç§è¿™ç§ç­–ç•¥ï¼Œå¹¶å‘çš„åŒæ­¥sqlï¼Œåˆšå¼€å§‹æ˜¯åŸºäºåº“ï¼ŒåŒä¸€ä¸ªåº“çš„sqlåˆ†é…åˆ°ä¸€ä¸ªçº¿ç¨‹æ‰§è¡ŒåŒæ­¥ï¼Œä¸åŒåº“è¿›è¡Œå¹¶å‘ï¼Œåæ¥æ˜¯åŸºäºredo logçš„ç»„æäº¤å½¢å¼ï¼Œèƒ½ç»„æäº¤çš„sqlå¯ä»¥å¹¶å‘çš„åŒæ­¥ï¼Œå†åæ¥æ˜¯WRITESETï¼Œæ ¹æ®åº“åã€è¡¨åã€ç´¢å¼•ï¼ˆä¸»é”®å’Œå”¯ä¸€ç´¢å¼•ï¼‰è®¡ç®—hashè¿›è¡Œåˆ†å‘ç­–ç•¥ã€‚","like_count":8,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477817,"discussion_content":"ä¸€èˆ¬ç®€å•å¸¸ç”¨çš„åšæ³•éƒ½æ˜¯åœ¨å¤„ç†requestçš„çº¿ç¨‹ä¸­æ‰§è¡Œä¸šåŠ¡é€»è¾‘ï¼Œç„¶åæŠŠresponseè¿”å›ã€‚\n\nå…¶å®ä»ç½‘ç»œå±‚é¢æ¥çœ‹ï¼ŒRequestå’ŒResponseåªæ˜¯å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯äº’ç›¸å‘é€çš„ä¸¤æ®µæ•°æ®ï¼Œå’ŒæœåŠ¡ç«¯å¤„ç†ç”¨ä»€ä¹ˆçº¿ç¨‹å®Œå…¨æ²¡æœ‰å…³ç³»ã€‚\n\nRequestå’ŒResponseå¦‚ä½•å¯¹åº”ï¼Œè¿™ä¸ªå–å†³äºç½‘ç»œä¼ è¾“åè®®æ˜¯æ€ä¹ˆè®¾è®¡çš„ã€‚è¿™ä¸ªæˆ‘ä»¬åœ¨è¯¾ç¨‹ä¸­è®²è¿‡ã€‚\n\nåœ¨æœåŠ¡ç«¯å®ç°ä¸­ï¼Œå¯ä»¥æ¥å—åˆ°Requestä¹‹åï¼Œè¿›è¡Œå¼‚æ­¥å¤„ç†ï¼Œå¼‚æ­¥å¤„ç†å®Œæˆä¹‹åï¼Œæ— è®ºåœ¨ä»€ä¹ˆçº¿ç¨‹ä¸­ï¼Œåªè¦èƒ½æ‹¿åˆ°å¤„ç†ç»“æœæ„å»ºå‡ºResponseï¼Œé€šè¿‡ç½‘ç»œå‘ç»™å®¢æˆ·ç«¯å°±å¯ä»¥äº†ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1576896514,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1937062,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/8e/a6/c3286b61.jpg","nickname":"Javaå’å¢™å·¥ç¨‹å¸ˆ","note":"","ucode":"E76AE44A9C76AE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":299756,"discussion_content":"åŒä¸€ä¸ªconnection","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1597807351,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1749015,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/b0/17/451cb87c.jpg","nickname":"åŠ æ²¹ï¼","note":"","ucode":"947E97762DB6EF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1937062,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/8e/a6/c3286b61.jpg","nickname":"Javaå’å¢™å·¥ç¨‹å¸ˆ","note":"","ucode":"E76AE44A9C76AE","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":542257,"discussion_content":"éƒ½å¼‚æ­¥äº†æ€ä¹ˆè¿˜åŒä¸€ä¸ªconnectionï¼Œè¿™é‡Œè€å¸ˆä¾‹å­æ˜¯ç”¨goçš„åç¨‹å¤„ç†çš„ï¼Œä¸¤è€…æ²¡æœ‰ä»€ä¹ˆå…³ç³»ï¼Œè€ŒRequestå’ŒResponseå¯¹åº”æ˜¯é€šè¿‡ä¼ è¾“åè®®å¯¹åº”ä¸Šçš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640692287,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":299756,"ip_address":"","group_id":0},"score":542257,"extra":""},{"author":{"id":1592279,"avatar":"https://static001.geekbang.org/account/avatar/00/18/4b/d7/f46c6dfd.jpg","nickname":"William Ning","note":"","ucode":"4DB8D05E69E5F3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1749015,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/b0/17/451cb87c.jpg","nickname":"åŠ æ²¹ï¼","note":"","ucode":"947E97762DB6EF","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":554318,"discussion_content":"è€å¸ˆçš„å›å¤ï¼š\n\nä½ çš„å¤§éƒ¨åˆ†ç†è§£éƒ½æ²¡é—®é¢˜ï¼Œæœ‰ä¸€ä¸ªå°é—®é¢˜æ˜¯ï¼Œç»´æŒä¸€ä¸ªTCPè¿æ¥å¹¶ä¸ä¸€å®šéœ€è¦å ç”¨ä¸€ä¸ªçº¿ç¨‹ã€‚åªæœ‰åœ¨è¿™ä¸ªè¿æ¥ä¸Šæ‰§è¡Œæ”¶å‘æ•°æ®çš„æ—¶å€™ï¼Œæ‰éœ€è¦å ç”¨çº¿ç¨‹ã€‚æ”¶åˆ°è¯·æ±‚å¤„ç†å®Œï¼ŒæŠŠè¯·æ±‚äº¤ç»™å…¶å®ƒçº¿ç¨‹å¤„ç†åï¼Œå½“å‰çº¿ç¨‹å°±å¯ä»¥é‡Šæ”¾äº†ã€‚ç›´åˆ°å“åº”ç”Ÿæˆåï¼Œè¿™æ®µæ—¶é—´åªç»´æŒTCPè¿æ¥æ˜¯ä¸éœ€è¦å ç”¨ä»»ä½•çº¿ç¨‹çš„ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1646316231,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":542257,"ip_address":"","group_id":0},"score":554318,"extra":""}]}]},{"had_liked":false,"id":127282,"user_name":"å¾çš‡ä¸‡å²ä¸‡å²ä¸‡ä¸‡å²","can_delete":false,"product_type":"c1","uid":1135155,"ip_address":"","ucode":"8FDD608729A002","user_header":"https://static001.geekbang.org/account/avatar/00/11/52/33/abf321b7.jpg","comment_is_top":false,"comment_ctime":1566633078,"is_pvip":false,"replies":[{"id":47162,"content":"ä¸ä¼šä¸¢ï¼Œå› ä¸ºæ•°æ®å·²ç»å¤åˆ¶åˆ°äº†ä»èŠ‚ç‚¹ä¸Šï¼Œleaderå®•æœºåï¼Œä¼šé‡æ–°é€‰ä¸¾å‡ºæ–°çš„leaderï¼ˆä¹Ÿå°±æ˜¯ä¹‹å‰çš„æŸä¸ªfollowerï¼‰ï¼Œè¿™ä¸ªæ–°leaderä¸Šæ˜¯æœ‰åŸleaderä¸Šçš„å…¨éƒ¨æ•°æ®çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1566708652,"ip_address":"","comment_id":127282,"utype":1}],"discussion_count":6,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"è¯·é—®è€å¸ˆï¼ŒJMQåœ¨followerèŠ‚ç‚¹å“åº”åï¼Œå°±ç»™ç”Ÿäº§è€…å‘é€ç¡®è®¤æ¶ˆæ¯ï¼Œæ­¤æ—¶å¦‚æœleaderèŠ‚ç‚¹æ•…éšœï¼Œæ•°æ®è¿˜åœ¨JournalCacheé‡Œé¢ï¼Œæ‹¿æ˜¯ä¸æ˜¯å¯ä»¥è®¤ä¸ºè¿™éƒ¨åˆ†æ•°æ®ä¸¢å¤±ï¼Ÿ","like_count":8,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464412,"discussion_content":"ä¸ä¼šä¸¢ï¼Œå› ä¸ºæ•°æ®å·²ç»å¤åˆ¶åˆ°äº†ä»èŠ‚ç‚¹ä¸Šï¼Œleaderå®•æœºåï¼Œä¼šé‡æ–°é€‰ä¸¾å‡ºæ–°çš„leaderï¼ˆä¹Ÿå°±æ˜¯ä¹‹å‰çš„æŸä¸ªfollowerï¼‰ï¼Œè¿™ä¸ªæ–°leaderä¸Šæ˜¯æœ‰åŸleaderä¸Šçš„å…¨éƒ¨æ•°æ®çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566708652,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1115149,"avatar":"https://static001.geekbang.org/account/avatar/00/11/04/0d/3dc5683a.jpg","nickname":"æŸ¯å¯Ÿé‡‘","note":"","ucode":"F722BF8FCD2C47","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":637884,"discussion_content":"é‚£åœ¨ jorunal cache é‡Œé¢çš„æ•°æ®ä¸å°±ä¸¢å¤±äº†å˜›","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1709041039,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":464412,"ip_address":"ç¾å›½","group_id":0},"score":637884,"extra":""}]},{"author":{"id":1002317,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/4b/4d/0239bc19.jpg","nickname":"ç›Šå†›","note":"","ucode":"5629FA62A01F25","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6578,"discussion_content":"è¿™é‡Œæœ‰ä¸¤ä¸ªé—®é¢˜å“ˆã€‚1.è¿™ä¸ªé¢†å¯¼è€…é€‰ä¸¾æœŸé—´ï¼Œå®¢æˆ·ç«¯å†™å…¥æ¶ˆæ¯æ˜¯å¤±è´¥è¿˜æ˜¯é‡è¯•åˆ°å…¶ä»–broker ï¼Ÿ 2.ä¸€èˆ¬è¿™ä¸ªé¢†å¯¼è€…é€‰ä¸¾æ—¶é—´éœ€è¦å¤šä¹…ï¼Œé‡‡ç”¨å“ªç§åè®®å®ç°çš„ï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1566982978,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1009652,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","nickname":"é’±","note":"","ucode":"2C92A243A463D4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1002317,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/4b/4d/0239bc19.jpg","nickname":"ç›Šå†›","note":"","ucode":"5629FA62A01F25","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":20407,"discussion_content":"å¥½é—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569311074,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":6578,"ip_address":"","group_id":0},"score":20407,"extra":""},{"author":{"id":1802337,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/80/61/ae3bb67c.jpg","nickname":"æ¯›æ¯›è™«å¤§å¸","note":"","ucode":"1EBB026121C060","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1002317,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/4b/4d/0239bc19.jpg","nickname":"ç›Šå†›","note":"","ucode":"5629FA62A01F25","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":175000,"discussion_content":"å®¢æˆ·ç«¯å‘å¾€ä¸€å°brokeråº”è¯¥å†…éƒ¨æœ‰ä¸€ä¸ªæœ€å¤§é‡è¯•æ¬¡æ•°ï¼Œå¦‚æœè¶…è¿‡æœ€å¤§é‡è¯•ä»ç„¶å¤±è´¥ï¼Œä¼šæ ¹æ®ä¹‹å‰å®¢æˆ·ç«¯æ‹‰å–çš„è¯¥ä¸»é¢˜åˆ†å¸ƒçš„é›†ç¾¤åˆ—è¡¨ä¸­å…¶ä»–å¯ç”¨brokerç»§ç»­å‘é€ï¼Œé‚£ä¹ˆæ•…éšœçš„brokerå†…éƒ¨è¯¥ä¸»é¢˜çš„å­˜å‚¨ä¼šè¿›è¡Œé€‰ä¸¾ï¼Œè¿™é‡Œå¹¶ä¸æ˜¯brokerçš„é€‰ä¸¾è€Œæ˜¯ç±»ä¼¼å­˜å‚¨ä¸Šçš„åˆ†åŒºæˆ–è€…é˜Ÿåˆ—çš„é€‰ä¸¾ï¼Œæ–°leaderäº§ç”Ÿåœ¨ä¹‹å‰è¯¥ä¸»é¢˜å­˜å‚¨çš„å…¶ä»–brokerä¸Šçš„å‰¯æœ¬ä¸Šï¼Œç”±é€‰ä¸¾çš„termä»»æœŸå€¼å’Œæœ€å¤§æ—¥å¿—å¤åˆ¶ä½ç½®å†³å®šï¼Œè¯¥é€‰ä¸¾ä½¿ç”¨raftå®ç°çš„ï¼Œå¤åˆ¶ä¹Ÿæ˜¯raftåè®®ï¼Œé€‰ä¸¾æˆåŠŸçš„æ—¶é—´ä¸€èˆ¬æ˜¯1ç§’å†…ï¼Œfolloweræˆä¸ºleaderçš„è¶…æ—¶æ—¶é—´ä¸€èˆ¬æ˜¯150ms~300msä¹‹é—´ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581947975,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":6578,"ip_address":"","group_id":0},"score":175000,"extra":""}]},{"author":{"id":1980201,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/37/29/b3af57a7.jpg","nickname":"å‡¯æ–‡å°çŒª","note":"","ucode":"36D8AD0229547F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":373131,"discussion_content":"æˆ‘æƒ³äº†è§£ä¸‹leaderä¸followä¹‹é—´åŒæ­¥æ•°æ® æ˜¯åŸºäºåŠåŒæ­¥è¿˜æ˜¯è‡ªå·±å®ç°äº†ä¸€ä¸ªå¤åˆ¶çŠ¶æ€æœºï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620627862,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":155806,"user_name":"æå†²","can_delete":false,"product_type":"c1","uid":1254530,"ip_address":"","ucode":"C8C12308B0FDDA","user_header":"https://static001.geekbang.org/account/avatar/00/13/24/82/b5808a60.jpg","comment_is_top":false,"comment_ctime":1574759465,"is_pvip":false,"replies":[{"id":60086,"content":"ğŸ‘ğŸ‘ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1574903308,"ip_address":"","comment_id":155806,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"å€Ÿç”¨è€å¸ˆçš„çš„goæºç ç»è¿‡è¯»ï¼Œå†™ï¼Œå»æ‰é”3æ¬¡æ¼”è¿›ï¼Œåˆ†åˆ«åœ¨é‡‘å±±äº‘ECSï¼ˆ2æ ¸4Gï¼‰ä¸Šè·‘åˆ°3.1&#47;2.4&#47;1.4ç§’çš„æ ·å­ã€‚\næœ€ç»ˆçš„æ–‡ä»¶ï¼šhttps:&#47;&#47;github.com&#47;lichongsw&#47;algorithm&#47;blob&#47;master&#47;duplex_communication_optimization_3_no_write_lock.go","like_count":7,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475879,"discussion_content":"ğŸ‘ğŸ‘ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574903308,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1254530,"avatar":"https://static001.geekbang.org/account/avatar/00/13/24/82/b5808a60.jpg","nickname":"æå†²","note":"","ucode":"C8C12308B0FDDA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":79925,"discussion_content":"ç»è¿‡å†ä¸€æ¬¡æ‰¹é‡å†™ä¼˜åŒ–åï¼Œé‡‘å±±äº‘ECSï¼ˆ2æ ¸4Gï¼‰ä¸Šè·‘åˆ°0.7ç§’å·¦å³ã€‚\nhttps://github.com/lichongsw/algorithm/blob/master/duplex_communication_optimization_4_use_write_buf.go","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1576124046,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":143835,"user_name":"æå¿ƒå®‡ğŸ¦‰","can_delete":false,"product_type":"c1","uid":1208306,"ip_address":"","ucode":"C381CA80170D5B","user_header":"https://static001.geekbang.org/account/avatar/00/12/6f/f2/1f77b0bd.jpg","comment_is_top":false,"comment_ctime":1571797838,"is_pvip":false,"replies":[{"id":55638,"content":"ä½ çš„å¤§éƒ¨åˆ†ç†è§£éƒ½æ²¡é—®é¢˜ï¼Œæœ‰ä¸€ä¸ªå°é—®é¢˜æ˜¯ï¼Œç»´æŒä¸€ä¸ªTCPè¿æ¥å¹¶ä¸ä¸€å®šéœ€è¦å ç”¨ä¸€ä¸ªçº¿ç¨‹ã€‚åªæœ‰åœ¨è¿™ä¸ªè¿æ¥ä¸Šæ‰§è¡Œæ”¶å‘æ•°æ®çš„æ—¶å€™ï¼Œæ‰éœ€è¦å ç”¨çº¿ç¨‹ã€‚æ”¶åˆ°è¯·æ±‚å¤„ç†å®Œï¼ŒæŠŠè¯·æ±‚äº¤ç»™å…¶å®ƒçº¿ç¨‹å¤„ç†åï¼Œå½“å‰çº¿ç¨‹å°±å¯ä»¥é‡Šæ”¾äº†ã€‚ç›´åˆ°å“åº”ç”Ÿæˆåï¼Œè¿™æ®µæ—¶é—´åªç»´æŒTCPè¿æ¥æ˜¯ä¸éœ€è¦å ç”¨ä»»ä½•çº¿ç¨‹çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1571883695,"ip_address":"","comment_id":143835,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"è€å¸ˆå¥½ï¼Œæˆ‘å¯¹JMQçš„brokeræ¥æ”¶ç”Ÿäº§è€…è¯·æ±‚å¹¶å†™å…¥æ¶ˆæ¯çš„æµç¨‹æœ‰ä¸ªç–‘é—®ã€‚\nåœ¨å¤„ç†å®Œæ•°æ®è½ç›˜å’Œå¤šèŠ‚ç‚¹æ•°æ®å¤åˆ¶ä¹‹åï¼Œè¦ç»™ç”Ÿäº§è€…å›å¤å“åº”äº†ï¼Œè¿™æ—¶å€™brokerå¦‚ä½•èƒ½æ‰¾åˆ°ç”Ÿäº§è€…å‘¢ï¼Ÿæˆ‘ç†è§£æ˜¯ç¬¬ä¸€æ­¥ç”Ÿäº§è€…å‘é€è¯·æ±‚å»ºç«‹çš„TCPè¿æ¥å¥æŸ„æ²¡æœ‰é‡Šæ”¾ï¼Œæœ€åå†é€šè¿‡è¿™ä¸ªè¿æ¥å¥æŸ„æ¥writeå“åº”ã€‚è¿™æ ·çš„è¯ï¼Œè¿˜æ˜¯æ¯ä¸ªè¿æ¥åœ¨å¾—åˆ°å“åº”ä¹‹å‰ä¸èƒ½é‡Šæ”¾éœ€è¦å ç”¨ä¸€ä¸ªçº¿ç¨‹å•Šã€‚è¯·é—®æ˜¯æ€ä¹ˆåšåˆ°åœ¨ç¬¬ä¸€æ­¥æ¥æ”¶å“åº”é˜¶æ®µåªéœ€è¦å¾ˆå°‘çš„çº¿ç¨‹çš„ï¼Ÿæ˜¯ä¸æ˜¯åˆ©ç”¨å¼‚æ­¥éé˜»å¡ï¼Œåœ¨çº¿ç¨‹é‡Œè®¾ç½®å¤§é‡çš„åç¨‹æ¥å¤„ç†è¯·æ±‚ï¼Ÿ","like_count":5,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":471717,"discussion_content":"ä½ çš„å¤§éƒ¨åˆ†ç†è§£éƒ½æ²¡é—®é¢˜ï¼Œæœ‰ä¸€ä¸ªå°é—®é¢˜æ˜¯ï¼Œç»´æŒä¸€ä¸ªTCPè¿æ¥å¹¶ä¸ä¸€å®šéœ€è¦å ç”¨ä¸€ä¸ªçº¿ç¨‹ã€‚åªæœ‰åœ¨è¿™ä¸ªè¿æ¥ä¸Šæ‰§è¡Œæ”¶å‘æ•°æ®çš„æ—¶å€™ï¼Œæ‰éœ€è¦å ç”¨çº¿ç¨‹ã€‚æ”¶åˆ°è¯·æ±‚å¤„ç†å®Œï¼ŒæŠŠè¯·æ±‚äº¤ç»™å…¶å®ƒçº¿ç¨‹å¤„ç†åï¼Œå½“å‰çº¿ç¨‹å°±å¯ä»¥é‡Šæ”¾äº†ã€‚ç›´åˆ°å“åº”ç”Ÿæˆåï¼Œè¿™æ®µæ—¶é—´åªç»´æŒTCPè¿æ¥æ˜¯ä¸éœ€è¦å ç”¨ä»»ä½•çº¿ç¨‹çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571883695,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1208306,"avatar":"https://static001.geekbang.org/account/avatar/00/12/6f/f2/1f77b0bd.jpg","nickname":"æå¿ƒå®‡ğŸ¦‰","note":"","ucode":"C381CA80170D5B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":39083,"discussion_content":"æ„Ÿè°¢è€å¸ˆçš„è§£ç­”ï¼Œç°åœ¨ç†è§£äº†ã€‚æƒ³äº†ä¸€ä¸ªdemoï¼Œtcp acceptä¹‹åï¼Œhandleræ‹¿åˆ°connå¯¹è±¡ä¹‹åï¼Œæ”¾å…¥ä¸€ä¸ªmapé‡Œï¼Œç„¶åå°±å¯ä»¥é‡Šæ”¾è¿™ä¸ªçº¿ç¨‹äº†ã€‚ç­‰ç›¸åº”çš„å¼‚æ­¥ä»»åŠ¡å¤„ç†å®Œä¹‹åï¼Œå†åˆ°mapé‡Œå–connå¯¹è±¡å‘é€ç›¸åº”ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1571889542,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1749015,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/b0/17/451cb87c.jpg","nickname":"åŠ æ²¹ï¼","note":"","ucode":"947E97762DB6EF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1208306,"avatar":"https://static001.geekbang.org/account/avatar/00/12/6f/f2/1f77b0bd.jpg","nickname":"æå¿ƒå®‡ğŸ¦‰","note":"","ucode":"C381CA80170D5B","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":542264,"discussion_content":"è¿™ä¸ªè¿‡ç¨‹åº”è¯¥æ˜¯tcpè‡ªå·±ç»´æŠ¤çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640694709,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":39083,"ip_address":"","group_id":0},"score":542264,"extra":""}]}]},{"had_liked":false,"id":134918,"user_name":"Martin","can_delete":false,"product_type":"c1","uid":1464381,"ip_address":"","ucode":"8EAA93D6432C22","user_header":"https://static001.geekbang.org/account/avatar/00/16/58/3d/4ba98f04.jpg","comment_is_top":false,"comment_ctime":1568952577,"is_pvip":false,"replies":[{"id":51839,"content":"ğŸ‘ğŸ‘ğŸ‘æ­£ç¡®å†™å‡ºè¿™ä¸ªç¨‹åºå·®ä¸å¤šå°±æ˜¯è¿™ä¸ªè€—æ—¶ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1569024325,"ip_address":"","comment_id":134918,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"https:&#47;&#47;github.com&#47;MartinDai&#47;mq-in-action&#47;blob&#47;master&#47;src&#47;main&#47;java&#47;com&#47;doodl6&#47;mq&#47;MeetInRpc.java\n\nåŸºäºnetty4å®ç°çš„ï¼ŒMacbook pro 2015æ¬¾ 13å¯¸ æµ‹è¯•å·®ä¸å¤š4.2ç§’å·¦å³ï¼Œè€å¸ˆå¸®å¿™çœ‹çœ‹å“ªé‡Œè¿˜å¯ä»¥æœ‰ä¼˜åŒ–ç©ºé—´å—","like_count":5,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":471717,"discussion_content":"ä½ çš„å¤§éƒ¨åˆ†ç†è§£éƒ½æ²¡é—®é¢˜ï¼Œæœ‰ä¸€ä¸ªå°é—®é¢˜æ˜¯ï¼Œç»´æŒä¸€ä¸ªTCPè¿æ¥å¹¶ä¸ä¸€å®šéœ€è¦å ç”¨ä¸€ä¸ªçº¿ç¨‹ã€‚åªæœ‰åœ¨è¿™ä¸ªè¿æ¥ä¸Šæ‰§è¡Œæ”¶å‘æ•°æ®çš„æ—¶å€™ï¼Œæ‰éœ€è¦å ç”¨çº¿ç¨‹ã€‚æ”¶åˆ°è¯·æ±‚å¤„ç†å®Œï¼ŒæŠŠè¯·æ±‚äº¤ç»™å…¶å®ƒçº¿ç¨‹å¤„ç†åï¼Œå½“å‰çº¿ç¨‹å°±å¯ä»¥é‡Šæ”¾äº†ã€‚ç›´åˆ°å“åº”ç”Ÿæˆåï¼Œè¿™æ®µæ—¶é—´åªç»´æŒTCPè¿æ¥æ˜¯ä¸éœ€è¦å ç”¨ä»»ä½•çº¿ç¨‹çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571883695,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1208306,"avatar":"https://static001.geekbang.org/account/avatar/00/12/6f/f2/1f77b0bd.jpg","nickname":"æå¿ƒå®‡ğŸ¦‰","note":"","ucode":"C381CA80170D5B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":39083,"discussion_content":"æ„Ÿè°¢è€å¸ˆçš„è§£ç­”ï¼Œç°åœ¨ç†è§£äº†ã€‚æƒ³äº†ä¸€ä¸ªdemoï¼Œtcp acceptä¹‹åï¼Œhandleræ‹¿åˆ°connå¯¹è±¡ä¹‹åï¼Œæ”¾å…¥ä¸€ä¸ªmapé‡Œï¼Œç„¶åå°±å¯ä»¥é‡Šæ”¾è¿™ä¸ªçº¿ç¨‹äº†ã€‚ç­‰ç›¸åº”çš„å¼‚æ­¥ä»»åŠ¡å¤„ç†å®Œä¹‹åï¼Œå†åˆ°mapé‡Œå–connå¯¹è±¡å‘é€ç›¸åº”ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1571889542,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1749015,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/b0/17/451cb87c.jpg","nickname":"åŠ æ²¹ï¼","note":"","ucode":"947E97762DB6EF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1208306,"avatar":"https://static001.geekbang.org/account/avatar/00/12/6f/f2/1f77b0bd.jpg","nickname":"æå¿ƒå®‡ğŸ¦‰","note":"","ucode":"C381CA80170D5B","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":542264,"discussion_content":"è¿™ä¸ªè¿‡ç¨‹åº”è¯¥æ˜¯tcpè‡ªå·±ç»´æŠ¤çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640694709,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":39083,"ip_address":"","group_id":0},"score":542264,"extra":""}]}]},{"had_liked":false,"id":127929,"user_name":"å—è¾•åŒ—è¾™","can_delete":false,"product_type":"c1","uid":1214502,"ip_address":"","ucode":"03EC406AE0D591","user_header":"https://static001.geekbang.org/account/avatar/00/12/88/26/b8c53cee.jpg","comment_is_top":false,"comment_ctime":1566811243,"is_pvip":false,"replies":[{"id":47525,"content":"æ­å–œä½ å­¦åˆ°äº†ğŸ˜„","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1566868614,"ip_address":"","comment_id":127929,"utype":1}],"discussion_count":4,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"æŠŠè€å¸ˆçš„ä»£ç çœ‹äº†néï¼Œå†ç”¨javaçš„åŸç”Ÿnioå®ç°äº†ä¸€éï¼Œç†è§£äº†è€å¸ˆçš„ç”¨å¿ƒè‰¯è‹¦ã€‚å‰äºŒç« åºåˆ—åŒ–ä¸ç½‘ç»œåè®®é‚£å—çš„çŸ¥è¯†ï¼Œå¯¹åº”ä»£ç å¯¹äºstructçš„æ„é€ ï¼Œå››å­—èŠ‚çš„æ€»é•¿åº¦ï¼Œå››å­—èŠ‚çš„åºå·ï¼Œä»¥åŠå˜é•¿å†…å®¹ï¼Œç„¶åäºŒä¸ªå¤§çˆ·åœ¨æ¥å—åˆ°æ•°æ®ä»¥åä¹Ÿæ˜¯æ ¹æ®è¿™ä¸ªåè®®è¿›è¡Œå–æ•°æ®ã€‚ä¹Ÿå°±å¯¹åº”äº†åºåˆ—åŒ–ä»¥åŠåè®®éƒ½æ˜¯è‡ªå®šä¹‰çš„ï¼ï¼äºŒä¸ªå¤§çˆ·éƒ½æ‡‚è¯¥æ€ä¹ˆä»äºŒè¿›åˆ¶çš„æ•°æ®ä¸­ï¼Œæå–å‡ºå¯¹è¯ã€‚","like_count":3,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464710,"discussion_content":"æ­å–œä½ å­¦åˆ°äº†ğŸ˜„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566868614,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1740409,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/8e/79/f9d5dd3a.jpg","nickname":"å•è¶…","note":"","ucode":"B36883984BE16B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":369247,"discussion_content":"æ—¢ç„¶é—®ç­”çš„å†…å®¹æ˜¯æ—¢å®šçš„ï¼Œé‚£ç›´æ¥ç”¨æšä¸¾ä¼ 123456å²‚ä¸ç¾å“‰ï¼Ÿè¿åºåˆ—åŒ–éƒ½çœäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618986945,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1577210,"avatar":"https://static001.geekbang.org/account/avatar/00/18/10/fa/d977627e.jpg","nickname":"åˆ˜å¤§äºº","note":"","ucode":"F66AE613E80398","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":336713,"discussion_content":"Java ä»£ç  åˆ†äº«ä¸‹ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608685595,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1214502,"avatar":"https://static001.geekbang.org/account/avatar/00/12/88/26/b8c53cee.jpg","nickname":"å—è¾•åŒ—è¾™","note":"","ucode":"03EC406AE0D591","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6252,"discussion_content":"æ—¢ç„¶è€³æœµä»£ç ä¸­å¯¹è¯å­—ç¬¦ä¸²éƒ½æ˜¯ç”¨æ¥åˆ¤æ–­çš„ï¼Œå¯å¦åœ¨ä¼ é€’è¿‡ç¨‹ä¸­ç”¨ä¸€ä¸ªæ•°å­—ç‰ˆæœ¬å·æ¥ä»£æ›¿å¯¹è¯å†…å®¹ï¼Œå‡å°‘ä¼ é€’æ•°æ®é‡ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566811558,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":127781,"user_name":"åˆ˜å¤©é¹","can_delete":false,"product_type":"c1","uid":1632015,"ip_address":"","ucode":"FB146250578911","user_header":"https://static001.geekbang.org/account/avatar/00/18/e7/0f/fa840c1b.jpg","comment_is_top":false,"comment_ctime":1566791888,"is_pvip":false,"replies":[{"id":47520,"content":"å¦‚æœæ˜¯å¤šä¸ªçº¿ç¨‹å¹¶å‘å‘åŒä¸€ä¸ªsocketä¸­å†™æ•°æ®ï¼Œè¿™ä¸ªé”æ˜¯å¿…é¡»åŠ çš„ã€‚\n\næ¯”å¦‚ï¼ŒAçº¿ç¨‹å‘é€â€œ123456â€ï¼ŒBçº¿ç¨‹å‘é€â€œabcdâ€ï¼Œå¦‚æœä¸åŠ é”ï¼Œå¯¹ç«¯æ”¶åˆ°çš„å¯èƒ½å°±æˆäº†â€œ12abc345d6â€ï¼Œè¿™ç§æ•°æ®æ˜¯å¯¹ç«¯æ˜¯æ²¡æ³•è§£æçš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1566868410,"ip_address":"","comment_id":127781,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"è€å¸ˆçš„writeToå‡½æ•°æ²¡å¿…è¦åŠ é”å§ï¼Œç”¨ä¸€ä¸ªå±€éƒ¨ç¼“å†²æŠŠlengthByte serialBytes payloadBytesæ‹¼è£…å¥½å†ä¸€èµ·å‘é€åº”è¯¥å°±å¯ä»¥äº†\næˆ‘æŠŠæˆ‘çš„å¤§çˆ·æ”¹æˆåŒå·¥çš„ï¼Œå¤šçº¿ç¨‹çš„ï¼Œå¯ä»¥æ‰“åŒ…å‘é€çš„ï¼Œç°åœ¨å¤§çˆ·è¿˜åªæœ‰ä¸€å¼ å˜´ä¸€ä¸ªè€³æœµï¼ˆä¸€ä¸ªsocketè¿æ¥ï¼‰\nå¯èƒ½æ˜¯æ²¡æœ‰é€»è¾‘å¤„ç†çš„è´Ÿæ‹…ï¼Œå¤šçº¿ç¨‹æ²¡å•¥æ”¹å˜\næ‰“åŒ…å‘é€æœ‰ä¸€å®šçš„æ”¹è¿›ï¼Œ1æ¬¡3æ¡æ•°æ® 14s\nç°åœ¨100ä¸‡æ¬¡èƒ¡åŒç¢°é¢ï¼Œ8.66s(å…¬å¸çš„i7)\n\nhttps:&#47;&#47;gist.github.com&#47;liutianpeng&#47;d9330f85d47525a8e32dcd24f5738e55","like_count":3,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464655,"discussion_content":"å¦‚æœæ˜¯å¤šä¸ªçº¿ç¨‹å¹¶å‘å‘åŒä¸€ä¸ªsocketä¸­å†™æ•°æ®ï¼Œè¿™ä¸ªé”æ˜¯å¿…é¡»åŠ çš„ã€‚\n\næ¯”å¦‚ï¼ŒAçº¿ç¨‹å‘é€â€œ123456â€ï¼ŒBçº¿ç¨‹å‘é€â€œabcdâ€ï¼Œå¦‚æœä¸åŠ é”ï¼Œå¯¹ç«¯æ”¶åˆ°çš„å¯èƒ½å°±æˆäº†â€œ12abc345d6â€ï¼Œè¿™ç§æ•°æ®æ˜¯å¯¹ç«¯æ˜¯æ²¡æ³•è§£æçš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566868410,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1632015,"avatar":"https://static001.geekbang.org/account/avatar/00/18/e7/0f/fa840c1b.jpg","nickname":"åˆ˜å¤©é¹","note":"","ucode":"FB146250578911","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6358,"discussion_content":"å“¦ æ‡‚äº†ï¼Œsocketçš„sendä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566868802,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":197585,"user_name":"nfx","can_delete":false,"product_type":"c1","uid":1693667,"ip_address":"","ucode":"88D3F3920C68BC","user_header":"https://static001.geekbang.org/account/avatar/00/19/d7/e3/e6cf6352.jpg","comment_is_top":false,"comment_ctime":1585386652,"is_pvip":false,"replies":[{"id":74817,"content":"è¿™ä¸ªåœ°æ–¹ç†è®ºä¸Šæ˜¯ä¸éœ€è¦é”çš„ï¼Œå› ä¸ºæ˜¯Append Onlyçš„æ•°æ®æ¨¡å‹ï¼Œä¹Ÿå°±æ˜¯è¯´æ•°æ®åœ¨å°¾éƒ¨è¿½åŠ å†™å…¥ï¼Œå†™å…¥åä¸å¯æ”¹å˜ï¼Œé‚£è¯»å†™å°±ä¸ä¼šæœ‰å†²çªï¼Œæ‰€ä»¥ä¸éœ€è¦åŠ é”ã€‚\n\nä½†å®é™…ä¸Šï¼Œå› ä¸ºå†…å­˜æ˜¯æœ‰é™çš„ï¼Œæ€»æ˜¯è¦å‘ç”Ÿæ¢é¡µæ“ä½œï¼Œç›¸å½“äºæŠŠæ•°æ®ä»å†…å­˜ä¸­åˆ é™¤ï¼Œè¿™ä¸ªåœ°æ–¹è¿˜æ˜¯éœ€è¦ç”¨é”æ¥æ§åˆ¶çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1585532115,"ip_address":"","comment_id":197585,"utype":1}],"discussion_count":3,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"æœ‰ä¸ªç–‘é—®,  request queue, journal cacheéƒ½æ˜¯ç”Ÿäº§è€…, æ¶ˆè´¹è€…æ¨¡å‹çš„é˜Ÿåˆ—,  é‡Œé¢åº”è¯¥ä¼šæœ‰é”å§?  åªæ˜¯è¿™ç§é˜Ÿåˆ—é”éœ€è¦çš„èµ„æºå¾ˆå°‘. \n ä¸çŸ¥é“æ€ä¹ˆç†è§£å¯¹ä¸å¯¹","like_count":2},{"had_liked":false,"id":134282,"user_name":"é¡¶æ–°","can_delete":false,"product_type":"c1","uid":1036566,"ip_address":"","ucode":"241D3CCCAE536B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/d1/16/6347bbc0.jpg","comment_is_top":false,"comment_ctime":1568793058,"is_pvip":false,"replies":[{"id":51547,"content":"è¿™ä¸ªåœ°æ–¹æ˜¯ä¸éœ€è¦é”çš„ï¼Œå†™å…¥å’Œç§»å‡ºCallbackåˆ†åˆ«æ˜¯åœ¨2ä¸ªå›ºå®šçš„çº¿ç¨‹ä¸­åˆ†åˆ«æ‰§è¡Œï¼Œè¿™ä¸ªé“¾è¡¨å†™å…¥çš„æ—¶å€™ç›´æ¥æ˜¯å°¾éƒ¨è¿½åŠ ï¼Œæ‰§è¡ŒCallbackçš„æ—¶å€™åœ¨å¤´éƒ¨ç§»å‡ºã€‚å¹¶ä¸”ï¼Œæ‰§è¡ŒCallbackçš„æ—¶å€™ä¸€å®šé“¾è¡¨ä¸­æœ‰æ•°æ®çš„æ—¶å€™ï¼Œæ‰€ä»¥ä¹Ÿä¸éœ€è¦åŠ é”æ‹…å¿ƒç§»é™¤è¶Šç•Œã€‚æ‰€ä»¥è¿™ä¸ªåœ°æ–¹æ˜¯ä¸éœ€è¦é”çš„","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1568855667,"ip_address":"","comment_id":134282,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"FlushThread å’Œ ReplicationThreadçº¿ç¨‹å¯¹å†…å­˜çš„é“¾è¡¨ Pending Callbacks ä¸­æ•°æ®çš„æ›´æ–°ï¼Œç„¶åResponseThreadæ‰«æé“¾è¡¨Pending Callbacksï¼Œæ‰¹é‡å–å‡ºç¬¦åˆ QOS è§„åˆ™çš„å“åº”åŠè¶…æ—¶çš„å“åº”ï¼Œç„¶åå¹¶å‘è¿”å›ç»™å®¢æˆ·ç«¯ã€‚è¿™å—ä¹Ÿå­˜åœ¨å¯¹ Pending Callbacks å­˜åœ¨äº’æ–¥é”å§ï¼Ÿä¸çŸ¥é“ç†è§£çš„å¯¹ä¸å¯¹ï¼Œè¿˜è¯·è€å¸ˆç­”ç–‘ :)","like_count":2,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":489552,"discussion_content":"è¿™ä¸ªåœ°æ–¹ç†è®ºä¸Šæ˜¯ä¸éœ€è¦é”çš„ï¼Œå› ä¸ºæ˜¯Append Onlyçš„æ•°æ®æ¨¡å‹ï¼Œä¹Ÿå°±æ˜¯è¯´æ•°æ®åœ¨å°¾éƒ¨è¿½åŠ å†™å…¥ï¼Œå†™å…¥åä¸å¯æ”¹å˜ï¼Œé‚£è¯»å†™å°±ä¸ä¼šæœ‰å†²çªï¼Œæ‰€ä»¥ä¸éœ€è¦åŠ é”ã€‚\n\nä½†å®é™…ä¸Šï¼Œå› ä¸ºå†…å­˜æ˜¯æœ‰é™çš„ï¼Œæ€»æ˜¯è¦å‘ç”Ÿæ¢é¡µæ“ä½œï¼Œç›¸å½“äºæŠŠæ•°æ®ä»å†…å­˜ä¸­åˆ é™¤ï¼Œè¿™ä¸ªåœ°æ–¹è¿˜æ˜¯éœ€è¦ç”¨é”æ¥æ§åˆ¶çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585532115,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1749015,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/b0/17/451cb87c.jpg","nickname":"åŠ æ²¹ï¼","note":"","ucode":"947E97762DB6EF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":542265,"discussion_content":"å­¦åˆ°äº†ï¼ŒAppend Onlyçš„æ•°æ®æ¨¡å‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640695097,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1980201,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/37/29/b3af57a7.jpg","nickname":"å‡¯æ–‡å°çŒª","note":"","ucode":"36D8AD0229547F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":532661,"discussion_content":"ç®€å•è§£é‡Šä¸€ä¸‹ çº¿ç¨‹åšå®ŒæŒä¹…åŒ–æˆ–åŒæ­¥åï¼Œéœ€è¦å°†å†…å­˜æ•°æ®åˆ é™¤ï¼Œè¿™ä¸ªæ—¶å€™å­˜åœ¨å†™è¦†ç›–é—®é¢˜ éœ€è¦ä¸€å±‚ä¿æŠ¤","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637662300,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":127545,"user_name":"ykkk88","can_delete":false,"product_type":"c1","uid":1068585,"ip_address":"","ucode":"A1BCFC2F0D1022","user_header":"https://static001.geekbang.org/account/avatar/00/10/4e/29/1be3dd40.jpg","comment_is_top":false,"comment_ctime":1566739307,"is_pvip":false,"replies":[{"id":47510,"content":"æ˜¯çš„ã€‚\n\nä¸€èˆ¬çš„åè®®éƒ½æ˜¯è¿™ç§â€œè¯·æ±‚-å“åº”â€çš„æ–¹å¼ï¼Œä¸éœ€è¦åŒæ­¥çš„è¯·æ±‚ä¹‹é—´æœ‰åºã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1566867996,"ip_address":"","comment_id":127545,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"å¦‚æœè¦ä¿è¯å‰ä¸€å¥è¯è¦å¯¹æ–¹ç¡®è®¤å›å¤åå†å‘é€ä¸‹ä¸€å¥è¯ å°±ä¸èƒ½ç”¨è¿™ç§æ–¹å¼äº†å§ï¼Ÿè¿™æ ·ååé‡å°±ä¼šå¾ˆä½äº†","like_count":2,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467690,"discussion_content":"è¿™ä¸ªåœ°æ–¹æ˜¯ä¸éœ€è¦é”çš„ï¼Œå†™å…¥å’Œç§»å‡ºCallbackåˆ†åˆ«æ˜¯åœ¨2ä¸ªå›ºå®šçš„çº¿ç¨‹ä¸­åˆ†åˆ«æ‰§è¡Œï¼Œè¿™ä¸ªé“¾è¡¨å†™å…¥çš„æ—¶å€™ç›´æ¥æ˜¯å°¾éƒ¨è¿½åŠ ï¼Œæ‰§è¡ŒCallbackçš„æ—¶å€™åœ¨å¤´éƒ¨ç§»å‡ºã€‚å¹¶ä¸”ï¼Œæ‰§è¡ŒCallbackçš„æ—¶å€™ä¸€å®šé“¾è¡¨ä¸­æœ‰æ•°æ®çš„æ—¶å€™ï¼Œæ‰€ä»¥ä¹Ÿä¸éœ€è¦åŠ é”æ‹…å¿ƒç§»é™¤è¶Šç•Œã€‚æ‰€ä»¥è¿™ä¸ªåœ°æ–¹æ˜¯ä¸éœ€è¦é”çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568855667,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":127533,"user_name":"TWT_Marq","can_delete":false,"product_type":"c1","uid":1238077,"ip_address":"","ucode":"1E1E14C7281477","user_header":"https://static001.geekbang.org/account/avatar/00/12/e4/3d/5d51fda4.jpg","comment_is_top":false,"comment_ctime":1566736554,"is_pvip":false,"replies":[{"id":47508,"content":"æ˜¯çš„","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1566867942,"ip_address":"","comment_id":127533,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"JMQä¸­ï¼Œæ¥å—è¯·æ±‚çš„iothreadså°†è¯·æ±‚ä¸¢ç»™request queueï¼ŒWriteThreadä»queueä¸­å–å‡ºæ¥å¼€å§‹å¹²æ´»ã€‚è¿™ä¸ªqueueæ˜¯concurrentBlockingQueueå—ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464544,"discussion_content":"æ˜¯çš„ã€‚\n\nä¸€èˆ¬çš„åè®®éƒ½æ˜¯è¿™ç§â€œè¯·æ±‚-å“åº”â€çš„æ–¹å¼ï¼Œä¸éœ€è¦åŒæ­¥çš„è¯·æ±‚ä¹‹é—´æœ‰åºã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566867996,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":127448,"user_name":"linqw","can_delete":false,"product_type":"c1","uid":1134138,"ip_address":"","ucode":"09DCFE98C54DD8","user_header":"https://static001.geekbang.org/account/avatar/00/11/4e/3a/86196508.jpg","comment_is_top":false,"comment_ctime":1566717576,"is_pvip":false,"replies":[{"id":47506,"content":"è¿˜æ˜¯è´´ä¸€ä¸‹GitHubçš„é“¾æ¥æŠŠï¼Œä¹Ÿæ–¹ä¾¿å…¶ä»–åŒå­¦å­¦ä¹ ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1566867867,"ip_address":"","comment_id":127448,"utype":1}],"discussion_count":10,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"æˆ‘ç”¨javaå®ç°äº†ä¸€ç‰ˆï¼Œè€å¸ˆå¸®å¿™çœ‹ä¸‹å“¦ï¼Œè¯„è®ºåªèƒ½å‘2000å­—ï¼Œå…¶ä½™åœ¨è¯„è®ºåŒºè¡¥ä¸Š\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\nimport javax.annotation.Nonnull;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.OutputStream;\nimport java.net.ServerSocket;\nimport java.net.Socket;\nimport java.util.concurrent.*;\nimport java.util.concurrent.atomic.AtomicInteger;\nimport java.util.concurrent.atomic.AtomicLong;\nimport java.util.concurrent.locks.ReentrantLock;\n\n&#47;**\n * @author linqw\n *&#47;\npublic class SocketExample {\n\n    private static final Logger LOGGER = LoggerFactory.getLogger(SocketExample.class);\n\n    private static final ReentrantLock LI_WRITE_REENTRANT_LOCK = new ReentrantLock();\n\n    private static final ReentrantLock ZHANG_WRITE_REENTRANT_LOCK = new ReentrantLock();\n\n    private static final int NCPU = Runtime.getRuntime().availableProcessors();\n\n    private final ThreadPoolExecutor serverThreadPoolExecutor = new ThreadPoolExecutor(NCPU, NCPU, 5, TimeUnit.SECONDS, new ArrayBlockingQueue&lt;Runnable&gt;(200000), new ThreadFactoryImpl(&quot;server-&quot;), new ThreadPoolExecutor.CallerRunsPolicy());\n\n    private final ThreadPoolExecutor clientThreadPoolExecutor = new ThreadPoolExecutor(NCPU, NCPU, 5, TimeUnit.SECONDS, new ArrayBlockingQueue&lt;Runnable&gt;(200000), new ThreadFactoryImpl(&quot;client-&quot;), new ThreadPoolExecutor.CallerRunsPolicy());\n\n    private volatile boolean started = false;\n\n    &#47;**\n     * ä¿©å¤§çˆ·å·²ç»é‡è§äº†å¤šå°‘æ¬¡\n     *&#47;\n    private volatile AtomicInteger count = new AtomicInteger(0);\n\n    &#47;**\n     * æ€»å…±éœ€è¦é‡è§å¤šå°‘æ¬¡\n     *&#47;\n    private static final int TOTAL = 1;\n\n    private static final String Z0 = &quot; åƒäº†æ²¡ï¼Œæ‚¨å¶?&quot;;\n\n    private static final String Z3 = &quot; å—¨ï¼åƒé¥±äº†æºœæºœå¼¯å„¿ã€‚&quot;;\n    private static final String Z5 = &quot; å›å¤´å»ç»™è€å¤ªå¤ªè¯·å®‰ï¼&quot;;\n    private static final String L1 = &quot; åˆšåƒã€‚&quot;;\n    private static final String L2 = &quot; æ‚¨è¿™ï¼Œå˜›å»ï¼Ÿ&quot;;\n    private static final String L4 = &quot; æœ‰ç©ºå®¶é‡Œååå•Šã€‚&quot;;","like_count":2,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464495,"discussion_content":"è¿˜æ˜¯è´´ä¸€ä¸‹GitHubçš„é“¾æ¥æŠŠï¼Œä¹Ÿæ–¹ä¾¿å…¶ä»–åŒå­¦å­¦ä¹ ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566867867,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1134138,"avatar":"https://static001.geekbang.org/account/avatar/00/11/4e/3a/86196508.jpg","nickname":"linqw","note":"","ucode":"09DCFE98C54DD8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6132,"discussion_content":"class RequestResponse {\n        int serial;\n        String payLoad;\n\n        @Override\n        public String toString() {\n            return &#34;RequestResponse{&#34; +\n                    &#34;serial=&#34; + serial +\n                    &#34;, payLoad=&#39;&#34; + payLoad + &#39;\\&#39;&#39; +\n                    &#39;}&#39;;\n        }\n    }\n\n    private void writeTo(RequestResponse requestResponse, ReentrantLock reentrantLock, Socket socket) {\n        try {\n            OutputStream outputStream = socket.getOutputStream();\n            byte[] payloadBytes = requestResponse.payLoad.getBytes();\n            byte[] serialBytes = intToByte(requestResponse.serial);\n            int length = payloadBytes.length + serialBytes.length;\n            byte[] lengthBytes = intToByte(length);\n            reentrantLock.lock();\n            outputStream.write(lengthBytes);\n            outputStream.write(serialBytes);\n            outputStream.write(payloadBytes);\n            outputStream.flush();\n        } catch (IOException e) {\n            LOGGER.error(e.toString());\n        } finally {\n            reentrantLock.unlock();\n        }\n    }\n\n    ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1566719012,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1103652,"avatar":"https://static001.geekbang.org/account/avatar/00/10/d7/24/bdc0e12b.jpg","nickname":"æ–½åæ´›","note":"","ucode":"138B4A0E4EA76A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6224,"discussion_content":"æ¥ä¸ªgitç‰ˆæœ¬çš„å•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566795049,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1134138,"avatar":"https://static001.geekbang.org/account/avatar/00/11/4e/3a/86196508.jpg","nickname":"linqw","note":"","ucode":"09DCFE98C54DD8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1103652,"avatar":"https://static001.geekbang.org/account/avatar/00/10/d7/24/bdc0e12b.jpg","nickname":"æ–½åæ´›","note":"","ucode":"138B4A0E4EA76A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6279,"discussion_content":"æˆ‘æ‰¾ä¸ªæ—¶é—´ï¼Œç”¨nettyã€ nioä¹Ÿå®ç°ä¸‹ï¼Œç»Ÿä¸€æ”¾åœ¨GitHubä¸Š","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1566820342,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":6224,"ip_address":"","group_id":0},"score":6279,"extra":""}]},{"author":{"id":1134138,"avatar":"https://static001.geekbang.org/account/avatar/00/11/4e/3a/86196508.jpg","nickname":"linqw","note":"","ucode":"09DCFE98C54DD8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6138,"discussion_content":"  class ThreadFactoryImpl implements ThreadFactory {\n        private final AtomicLong threadIndex = new AtomicLong(0);\n        private final String threadNamePrefix;\n        private final boolean daemon;\n\n        ThreadFactoryImpl(final String threadNamePrefix) {\n            this(threadNamePrefix, false);\n        }\n\n        ThreadFactoryImpl(final String threadNamePrefix, boolean daemon) {\n            this.threadNamePrefix = threadNamePrefix;\n            this.daemon = daemon;\n        }\n\n        @Override\n        public Thread newThread(@Nonnull Runnable r) {\n            Thread thread = new Thread(r, threadNamePrefix + this.threadIndex.incrementAndGet());\n            thread.setDaemon(daemon);\n            return thread;\n        }\n    }\n\n    public static void main(String[] args) throws InterruptedException {\n        SocketExample socketExample = new SocketExample();\n        new Thread(new Runnable() {\n            @Override\n            public void run() {\n                socketExample.startServer(9999);\n            }\n        }).start();\n        while (!socketExample.started) {\n            Thread.sleep(1);\n        }\n        long start = System.nanoTime();\n        socketExample.startClient(&#34;127.0.0.1&#34;, 9999);\n        long end = System.nanoTime();\n        System.out.println(TimeUnit.SECONDS.convert(end - start, TimeUnit.NANOSECONDS));\n    }\n}","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566719271,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1134138,"avatar":"https://static001.geekbang.org/account/avatar/00/11/4e/3a/86196508.jpg","nickname":"linqw","note":"","ucode":"09DCFE98C54DD8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6137,"discussion_content":" private void startClient(String host, int port) {\n        final CountDownLatch countDownLatch = new CountDownLatch(1);\n        // ä¸æœåŠ¡ç«¯å»ºç«‹è¿æ¥\n        try (Socket socket = new Socket(host, port)) {\n            clientThreadPoolExecutor.execute(new Runnable() {\n                @Override\n                public void run() {\n                    liDaYeListen(socket, countDownLatch);\n\n                }\n            });\n            clientThreadPoolExecutor.execute(new Runnable() {\n                @Override\n                public void run() {\n                    liDaYeSay(socket);\n                }\n            });\n            countDownLatch.await();\n        } catch (IOException | InterruptedException e) {\n            LOGGER.error(e.toString());\n        }\n\n    }\n\n    private byte[] intToByte(int val) {\n        byte[] bytes = new byte[4];\n        bytes[0] = (byte) (val &amp; 0xff);\n        bytes[1] = (byte) ((val >> 8) &amp; 0xff);\n        bytes[2] = (byte) ((val >> 16) &amp; 0xff);\n        bytes[3] = (byte) ((val >> 24) &amp; 0xff);\n        return bytes;\n    }\n\n    private int byteToInt(byte[] bytes) {\n        int val = 0;\n        if (bytes == null || bytes.length < 4) {\n            return val;\n        }\n        val += bytes[0] &amp; 0xff;\n        val += (bytes[1] &amp; 0xff) << 8;\n        val += (bytes[2] &amp; 0xff) << 16;\n        val += (bytes[3] &amp; 0xff) << 24;\n        return val;\n    }\n\n  ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566719267,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1134138,"avatar":"https://static001.geekbang.org/account/avatar/00/11/4e/3a/86196508.jpg","nickname":"linqw","note":"","ucode":"09DCFE98C54DD8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6136,"discussion_content":"    /**\n     * æå¤§çˆ·çš„å˜´\n     */\n    private void liDaYeSay(Socket socket) {\n        AtomicInteger nextSerial = new AtomicInteger(0);\n        for (int i = 0; i < TOTAL; i++) {\n            clientThreadPoolExecutor.execute(new Runnable() {\n                @Override\n                public void run() {\n                    RequestResponse requestResponse = new RequestResponse();\n                    requestResponse.serial = nextSerial.getAndAdd(1);;\n                    requestResponse.payLoad = L2;\n                    writeTo(requestResponse, LI_WRITE_REENTRANT_LOCK, socket);\n                }\n            });\n            clientThreadPoolExecutor.execute(new Runnable() {\n                @Override\n                public void run() {\n                    RequestResponse requestResponse = new RequestResponse();\n                    requestResponse.serial = nextSerial.getAndAdd(1);\n                    requestResponse.payLoad = L4;\n                    writeTo(requestResponse, LI_WRITE_REENTRANT_LOCK, socket);\n                }\n            });\n\n        }\n    }\n\n    private void startServer(int port) {\n        // ç›‘å¬æŒ‡å®šçš„ç«¯å£\n\n        try (ServerSocket server = new ServerSocket(port)) {\n            started = true;\n            System.out.println(&#34; å¼ å¤§çˆ·åœ¨èƒ¡åŒå£ç­‰ç€ ...&#34;);\n            Socket socket = server.accept();\n            System.out.println(&#34; ç¢°è§ä¸€ä¸ªæå¤§çˆ·:&#34; + socket.getRemoteSocketAddress().toString());\n            zhangDaYeSay(socket);\n            zhangDaYeListen(socket);\n        } catch (IOException e) {\n            LOGGER.error(e.toString());\n        }\n    }\n\n   ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566719247,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1134138,"avatar":"https://static001.geekbang.org/account/avatar/00/11/4e/3a/86196508.jpg","nickname":"linqw","note":"","ucode":"09DCFE98C54DD8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6135,"discussion_content":"/**\n     * æå¤§çˆ·çš„è€³æœµ\n     */\n    private void liDaYeListen(Socket socket, CountDownLatch countDownLatch) {\n        while (count.get() <= TOTAL - 1) {\n            RequestResponse requestResponse = readFrom(socket);\n            if (requestResponse == null) {\n                continue;\n            }\n\n            clientThreadPoolExecutor.execute(new Runnable() {\n                @Override\n                public void run() {\n                    // fmt.Println(&#34; æå¤§çˆ·æ”¶åˆ°ï¼š&#34; + r.Payload)\n                    // å¦‚æœæ”¶åˆ°ï¼šåƒäº†æ²¡ï¼Œæ‚¨å¶?\n                    if (requestResponse.payLoad.equals(Z0)) {\n                        requestResponse.payLoad = L1;\n                        // å›å¤ï¼šåˆšåƒã€‚\n                        writeTo(requestResponse, LI_WRITE_REENTRANT_LOCK, socket);\n                    } else if (requestResponse.payLoad.equals(Z3)) {\n                        // do nothing\n                    } else if (requestResponse.payLoad.equals(Z5)) {\n                        //fmt.Println(&#34; ä¿©äººè¯´å®Œèµ°äº† &#34;)\n                        count.incrementAndGet();\n                    } else {\n                        System.out.format(&#34; æå¤§çˆ·å¬ä¸æ‡‚ï¼š%s%n&#34; + requestResponse.payLoad);\n                    }\n                }\n            });\n\n        }\n        countDownLatch.countDown();\n    }\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566719210,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1134138,"avatar":"https://static001.geekbang.org/account/avatar/00/11/4e/3a/86196508.jpg","nickname":"linqw","note":"","ucode":"09DCFE98C54DD8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6134,"discussion_content":"  /**\n     * å¼ å¤§çˆ·çš„è€³æœµ\n     */\n    private void zhangDaYeListen(Socket socket) {\n\n        while (count.get() <= TOTAL - 1) {\n            RequestResponse requestResponse = readFrom(socket);\n            if (requestResponse == null) {\n                continue;\n            }\n            serverThreadPoolExecutor.execute(new Runnable() {\n                @Override\n                public void run() {\n                    // å¦‚æœæ”¶åˆ°ï¼šæ‚¨è¿™ï¼Œå˜›å»ï¼Ÿ\n                    if (requestResponse.payLoad.equals(L2)) {\n                        requestResponse.payLoad = Z3;\n                        // å›å¤ï¼šå—¨ï¼åƒé¥±äº†æºœæºœå¼¯å„¿ã€‚\n                        writeTo(requestResponse, ZHANG_WRITE_REENTRANT_LOCK, socket);\n                        // å¦‚æœæ”¶åˆ°ï¼šæœ‰ç©ºå®¶é‡Œååå•Šã€‚\n                    } else if (requestResponse.payLoad.equals(L4)) {\n                        requestResponse.payLoad = Z5;\n                        // å›å¤ï¼šå›å¤´å»ç»™è€å¤ªå¤ªè¯·å®‰ï¼\n                        writeTo(requestResponse, ZHANG_WRITE_REENTRANT_LOCK, socket);\n                        // å¦‚æœæ”¶åˆ°ï¼šåˆšåƒã€‚\n                    } else if (requestResponse.payLoad.equals(L1)) {\n                        // ignoreä¸ç”¨å›å¤\n                    } else {\n                        System.out.format(&#34; å¼ å¤§çˆ·å¬ä¸æ‡‚ï¼š%s%n&#34; + requestResponse.payLoad);\n                    }\n                }\n            });\n        }\n\n\n    }\n\n    /**\n     * å¼ å¤§çˆ·çš„å˜´\n     */\n    private void zhangDaYeSay(Socket socket) {\n        AtomicInteger nextSerial = new AtomicInteger(0);\n        for (int i = 0; i < TOTAL; i++) {\n            serverThreadPoolExecutor.execute(new Runnable() {\n                @Override\n                public void run() {\n                    RequestResponse requestResponse = new RequestResponse();\n                    requestResponse.serial = nextSerial.getAndAdd(1);\n                    requestResponse.payLoad = Z0;\n                    writeTo(requestResponse, ZHANG_WRITE_REENTRANT_LOCK, socket);\n                }\n            });\n        }\n    }\n\n    ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566719138,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1134138,"avatar":"https://static001.geekbang.org/account/avatar/00/11/4e/3a/86196508.jpg","nickname":"linqw","note":"","ucode":"09DCFE98C54DD8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6133,"discussion_content":"private RequestResponse readFrom(Socket socket) {\n        RequestResponse requestResponse = new RequestResponse();\n        int length = 4;\n        int serialLength = 4;\n        byte[] payloadBytes;\n        byte[] serialBytes;\n        byte[] lengthBytes;\n        InputStream inputStream;\n        try {\n            inputStream = socket.getInputStream();\n\n            try {\n                lengthBytes = new byte[length];\n                inputStream.read(lengthBytes);\n                length = byteToInt(lengthBytes);\n                if (length <= serialLength) {\n                    return null;\n                }\n            } catch (IOException e) {\n                LOGGER.error(&#34; è¯»é•¿åº¦æ•…éšœï¼š{}&#34;, e.toString());\n            }\n            try {\n                serialBytes = new byte[4];\n                inputStream.read(serialBytes);\n                requestResponse.serial = byteToInt(serialBytes);\n            } catch (IOException e) {\n                LOGGER.error(&#34; è¯»Serialæ•…éšœï¼š{}&#34;, e.toString());\n            }\n            try {\n                payloadBytes = new byte[length - serialLength];\n                inputStream.read(payloadBytes);\n                requestResponse.payLoad = new String(payloadBytes);\n            } catch (IOException e) {\n                LOGGER.error(&#34; è¯»PayLoadæ•…éšœï¼š{}&#34;, e.toString());\n            }\n        } catch (IOException e) {\n            LOGGER.error(e.toString());\n        }\n        return requestResponse;\n\n    }\n\n  ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566719106,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":127344,"user_name":"è±†æ²™åŒ…","can_delete":false,"product_type":"c1","uid":1223954,"ip_address":"","ucode":"7C62E546E6786A","user_header":"https://static001.geekbang.org/account/avatar/00/12/ad/12/d4d54dd2.jpg","comment_is_top":false,"comment_ctime":1566659587,"is_pvip":false,"replies":[{"id":47163,"content":"è¿™ä¸ªåœ°æ–¹æ˜¯å› ä¸ºï¼Œå®Œæˆäº†æ‰€æœ‰ä¼šè¯ä¹‹åï¼Œå…³é—­socketè¿æ¥çš„æ—¶å€™ï¼Œæ²¡æœ‰å…ˆç­‰å¾…2ä¸ªå¤§çˆ·è¯»å†™socketçš„4ä¸ªçº¿ç¨‹éƒ½ç»“æŸå¯¼è‡´çš„ã€‚\n\nè™½ç„¶ä¸å½±å“ç»“æœï¼Œä½†è¿˜æ˜¯å¯ä»¥æ”¹è¿›ä¸€ä¸‹ï¼Œåšåˆ°ä¼˜é›…çš„é€€å‡ºã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1566708952,"ip_address":"","comment_id":127344,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"è€å¸ˆï¼Œæˆ‘åœ¨è¿è¡Œä½ çš„è€å¤§çˆ·ä»£ç çš„æ—¶å€™å‘ç°äº†ä¸€ä¸ªé—®é¢˜ï¼Œç»å¸¸æŠ¥è¯»é•¿åº¦æ•…éšœã€‚æˆ‘è°ƒè¯•äº†ä¸€ä¸‹ï¼Œåº”è¯¥æ˜¯å› ä¸ºå¼ å¤§çˆ·é˜»å¡åœ¨readfromçš„æ—¶å€™ï¼Œæå¤§çˆ·count++äº†ã€‚ç„¶åcountå¤§äºtotalï¼Œclienté‡Šæ”¾äº†tcpã€‚è¿™å¯¼è‡´readfromæ— æ³•è¯»å‡ºå‡†ç¡®æ•°æ®ã€‚æˆ‘åœ¨è¿”å›è¯»æ•°æ®æ•…éšœå‰åˆ¤æ–­äº†ä¸€ä¸‹countå’Œtotalçš„å…³ç³»ï¼Œå¦‚æœcountå¤§äºç­‰äºtotalæ­£å¸¸è¿”å›ï¼Œå°±æ²¡æœ‰å†æŠ¥è¿‡å¼‚å¸¸äº†ã€‚æ‚¨çœ‹æˆ‘åˆ†æçš„æ˜¯å¦æœ‰é—®é¢˜å‘¢","like_count":2,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464451,"discussion_content":"è¿™ä¸ªåœ°æ–¹æ˜¯å› ä¸ºï¼Œå®Œæˆäº†æ‰€æœ‰ä¼šè¯ä¹‹åï¼Œå…³é—­socketè¿æ¥çš„æ—¶å€™ï¼Œæ²¡æœ‰å…ˆç­‰å¾…2ä¸ªå¤§çˆ·è¯»å†™socketçš„4ä¸ªçº¿ç¨‹éƒ½ç»“æŸå¯¼è‡´çš„ã€‚\n\nè™½ç„¶ä¸å½±å“ç»“æœï¼Œä½†è¿˜æ˜¯å¯ä»¥æ”¹è¿›ä¸€ä¸‹ï¼Œåšåˆ°ä¼˜é›…çš„é€€å‡ºã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566708952,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":127215,"user_name":"solar","can_delete":false,"product_type":"c1","uid":1070335,"ip_address":"","ucode":"E6C7090478B027","user_header":"https://static001.geekbang.org/account/avatar/00/10/54/ff/09a058f3.jpg","comment_is_top":false,"comment_ctime":1566612503,"is_pvip":false,"replies":[{"id":47078,"content":"è¿™äº›æƒ³æ³•ï¼Œæœ€å¥½æ˜¯è½åˆ°ä»£ç ä¸Šï¼Œé€šè¿‡çœŸå®çš„ä¼˜åŒ–æ•ˆæœï¼Œæ¥å°è¯è‡ªå·±çš„æƒ³æ³•ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1566620267,"ip_address":"","comment_id":127215,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"ä¸€äº›åˆ†é…å†…å­˜åœ°æ–¹ä¹Ÿå¯ä»¥ä¼˜åŒ–ï¼Œå¯ä»¥é¢„å…ˆåˆ†é…ä¸€å—å¤ç”¨ï¼Œå‡å°‘å‘å†…æ ¸ç”³è¯·åˆ†é…å†…å­˜æ¬¡æ•°.","like_count":2,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464451,"discussion_content":"è¿™ä¸ªåœ°æ–¹æ˜¯å› ä¸ºï¼Œå®Œæˆäº†æ‰€æœ‰ä¼šè¯ä¹‹åï¼Œå…³é—­socketè¿æ¥çš„æ—¶å€™ï¼Œæ²¡æœ‰å…ˆç­‰å¾…2ä¸ªå¤§çˆ·è¯»å†™socketçš„4ä¸ªçº¿ç¨‹éƒ½ç»“æŸå¯¼è‡´çš„ã€‚\n\nè™½ç„¶ä¸å½±å“ç»“æœï¼Œä½†è¿˜æ˜¯å¯ä»¥æ”¹è¿›ä¸€ä¸‹ï¼Œåšåˆ°ä¼˜é›…çš„é€€å‡ºã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566708952,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":127212,"user_name":"Geek_zbvt62","can_delete":false,"product_type":"c1","uid":1046714,"ip_address":"","ucode":"81EA27ADD9EC1A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f8/ba/d28174a9.jpg","comment_is_top":false,"comment_ctime":1566612023,"is_pvip":false,"replies":[{"id":47080,"content":"1. è¿™é‡Œæ˜¯ä¸éœ€è¦åŒæ­¥çš„ï¼Œå› ä¸ºè¿™ä¸ªæµå®ƒå…·å¤‡WALçš„æ‰€æœ‰ç‰¹æ€§ï¼šå°¾éƒ¨è¿½åŠ ã€å†™å…¥åä¸å˜ï¼Œè¿™ç§WALè¯»å†™çº¿ç¨‹ä¹‹é—´æ˜¯ä¸éœ€è¦ä»»ä½•åè°ƒçš„ã€‚\n\n2. è¿™ä¸ªæ˜¯æˆ‘ä»¬å•ç‹¬ä½¿ç”¨å †å¤–å†…å­˜è®¾è®¡çš„ä¸€ä¸ªå†™ç¼“å­˜ï¼Œç›®çš„å°±æ˜¯é¿å…é¢‘ç¹çš„GCã€‚\n\n3. ä¼˜åŒ–çš„è¿‡ç¨‹æ˜¯ä¸€ä¸ªå¾ªåºæ¸è¿›çš„è¿‡ç¨‹ï¼Œå¹¶æ²¡æœ‰å“ªä¸€æ­¥æ˜¯ä¸€ä¸‹å­æå‡äº†å¾ˆå¤šã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1566620620,"ip_address":"","comment_id":127212,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"æƒ³ç®€å•è¯·æ•™ä¸€ä¸‹JMQ\n1. writeThreadä¸ReplicationThread&#47;FlushThreadä¹‹é—´çš„åŒæ­¥ä¹Ÿè¦åŸºäºæ— é”é˜Ÿåˆ—æ˜¯å§ï¼Ÿ\n2. JournalCacheå°±æ˜¯ç®€å•çš„ç”¨æˆ·æ€å†…å­˜ï¼Œè¿˜æ˜¯åŸºäºmmapï¼Ÿï¼ˆä»æè¿°ä¸Šçœ‹æ„Ÿè§‰å°±æ˜¯ç”¨æˆ·æ€å†…å­˜ï¼‰ã€‚\n3. è€å¸ˆèƒ½ä¸èƒ½é€éœ²ä¸€ä¸‹ï¼Œåœ¨ç ”å‘JMQçš„è¿‡ç¨‹ä¸­ï¼Œè§£å†³äº†å“ªä¸ªç“¶é¢ˆä¹‹åï¼Œååé‡ä¸€ä¸‹å­æäº†å¾ˆå¤šå‘¢ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464379,"discussion_content":"è¿™äº›æƒ³æ³•ï¼Œæœ€å¥½æ˜¯è½åˆ°ä»£ç ä¸Šï¼Œé€šè¿‡çœŸå®çš„ä¼˜åŒ–æ•ˆæœï¼Œæ¥å°è¯è‡ªå·±çš„æƒ³æ³•ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566620267,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1070335,"avatar":"https://static001.geekbang.org/account/avatar/00/10/54/ff/09a058f3.jpg","nickname":"solar","note":"","ucode":"E6C7090478B027","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6028,"discussion_content":"ä¸šåŠ¡ä¸­æ›¾ç”¨goå®ç°è¿‡. ğŸ˜„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566620796,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":140558,"user_name":"Tesla","can_delete":false,"product_type":"c1","uid":1500742,"ip_address":"","ucode":"98629AFD9861EE","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKUcSLVV6ia3dibe7qvTu8Vic1PVs2EibxoUdx930MC7j2Q9A6s4eibMDZlcicMFY0D0icd3RrDorMChu0zw/132","comment_is_top":false,"comment_ctime":1570985576,"is_pvip":false,"replies":[{"id":54348,"content":"ä¸æ˜¯è¿™æ ·çš„ï¼Œä»¥ä½ è¿™ä¸ªä¾‹å­æ¥è¯´ï¼Œå‡è®¾abcdè¿™æ¡æ¶ˆæ¯å‰é¢å†ä¹Ÿæ²¡æœ‰å…¶å®ƒæ¶ˆæ¯çš„ï¼Œå®ƒæ˜¯æœ€å‰çš„ä¸€æ¡ï¼Œabcdè¿™æ¡æ¶ˆæ¯çš„offsetå°±æ˜¯0ï¼Œ abcdefghè¿™æ¡æ¶ˆæ¯çš„offsetå°±æ˜¯6.","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1571018586,"ip_address":"","comment_id":140558,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"è€å¸ˆå¥½ï¼Œè¯·é—®ä¸€ä¸‹WriteThreadä¸­å°†æ¶ˆæ¯åºåˆ—åŒ–å¹¶ç»´æŠ¤èµ·æ­¢ä½ç½®offsetï¼Œè¿™ä¸ªoffsetæ˜¯å¦å°±æ˜¯å¤´éƒ¨ä¿¡æ¯ä¸­ä¿å­˜æ¶ˆæ¯é•¿åº¦å‘¢ï¼Ÿæ¯”å¦‚04abcd08abcdefghï¼Œé€šè¿‡04å°±å¯ä»¥çŸ¥é“abcdæ¶ˆæ¯çš„èµ·æ­¢ä½ç½®ï¼Œä¸‹ä¸€ä¸ªè¯»åˆ°çš„08åˆ™ä»£è¡¨ä¸‹ä¸€æ¡æ¶ˆæ¯çš„èµ·æ­¢ä½ç½®ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470440,"discussion_content":"ä¸æ˜¯è¿™æ ·çš„ï¼Œä»¥ä½ è¿™ä¸ªä¾‹å­æ¥è¯´ï¼Œå‡è®¾abcdè¿™æ¡æ¶ˆæ¯å‰é¢å†ä¹Ÿæ²¡æœ‰å…¶å®ƒæ¶ˆæ¯çš„ï¼Œå®ƒæ˜¯æœ€å‰çš„ä¸€æ¡ï¼Œabcdè¿™æ¡æ¶ˆæ¯çš„offsetå°±æ˜¯0ï¼Œ abcdefghè¿™æ¡æ¶ˆæ¯çš„offsetå°±æ˜¯6.","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571018586,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1485489,"avatar":"https://static001.geekbang.org/account/avatar/00/16/aa/b1/c834aab5.jpg","nickname":"å¼ å°å‹‹","note":"","ucode":"8C5E434EF53BF4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":38137,"discussion_content":"08  04 åº”è¯¥æŒ‡çš„æ˜¯åé¢è¯»å–çš„é•¿åº¦å§offset æ˜¯æŒ‡çš„è¯»å–çš„å¼€å§‹ä½ç½®~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571734125,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":135953,"user_name":"é’±","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1569313877,"is_pvip":false,"replies":[{"id":52146,"content":"æ˜¯çš„ï¼Œè¿™é‡Œçš„â€œå¼‚æ­¥â€æ˜¯æŒ‡ï¼Œå‘å“åº”ç»™å®¢æˆ·ç«¯å¹¶ä¸æ˜¯ç”±å¤åˆ¶æˆ–è€…åˆ·ç›˜çº¿ç¨‹æ¥æ‰§è¡Œçš„ï¼Œè€Œæ˜¯å•ç‹¬çš„ä¸€ç»„çº¿ç¨‹ã€‚ç»™æ¯ä¸ªå®¢æˆ·ç«¯å‘å“åº”è¿™ä¸ªæ“ä½œæ˜¯å¯ä»¥å¹¶è¡Œæ‰§è¡Œçš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1569375374,"ip_address":"","comment_id":135953,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"è€å¸ˆå¥½ï¼Œ ReponseThreads è¿™ç»„çº¿ç¨‹ï¼Œæ€ä¹ˆå®ç°å¼‚æ­¥å¹¶è¡Œçš„æ²¡å¤ªç†è§£ï¼Œå¥¹ä¸æ˜¯éœ€è¦ç­‰å¾…å¤åˆ¶å“åº”æˆ–è€…è½ç›˜åæ‰å‘æ¶ˆæ¯ç»™å®¢æˆ·ç«¯å˜›ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470440,"discussion_content":"ä¸æ˜¯è¿™æ ·çš„ï¼Œä»¥ä½ è¿™ä¸ªä¾‹å­æ¥è¯´ï¼Œå‡è®¾abcdè¿™æ¡æ¶ˆæ¯å‰é¢å†ä¹Ÿæ²¡æœ‰å…¶å®ƒæ¶ˆæ¯çš„ï¼Œå®ƒæ˜¯æœ€å‰çš„ä¸€æ¡ï¼Œabcdè¿™æ¡æ¶ˆæ¯çš„offsetå°±æ˜¯0ï¼Œ abcdefghè¿™æ¡æ¶ˆæ¯çš„offsetå°±æ˜¯6.","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571018586,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1485489,"avatar":"https://static001.geekbang.org/account/avatar/00/16/aa/b1/c834aab5.jpg","nickname":"å¼ å°å‹‹","note":"","ucode":"8C5E434EF53BF4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":38137,"discussion_content":"08  04 åº”è¯¥æŒ‡çš„æ˜¯åé¢è¯»å–çš„é•¿åº¦å§offset æ˜¯æŒ‡çš„è¯»å–çš„å¼€å§‹ä½ç½®~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571734125,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":197585,"user_name":"nfx","can_delete":false,"product_type":"c1","uid":1693667,"ip_address":"","ucode":"88D3F3920C68BC","user_header":"https://static001.geekbang.org/account/avatar/00/19/d7/e3/e6cf6352.jpg","comment_is_top":false,"comment_ctime":1585386652,"is_pvip":false,"replies":[{"id":74817,"content":"è¿™ä¸ªåœ°æ–¹ç†è®ºä¸Šæ˜¯ä¸éœ€è¦é”çš„ï¼Œå› ä¸ºæ˜¯Append Onlyçš„æ•°æ®æ¨¡å‹ï¼Œä¹Ÿå°±æ˜¯è¯´æ•°æ®åœ¨å°¾éƒ¨è¿½åŠ å†™å…¥ï¼Œå†™å…¥åä¸å¯æ”¹å˜ï¼Œé‚£è¯»å†™å°±ä¸ä¼šæœ‰å†²çªï¼Œæ‰€ä»¥ä¸éœ€è¦åŠ é”ã€‚\n\nä½†å®é™…ä¸Šï¼Œå› ä¸ºå†…å­˜æ˜¯æœ‰é™çš„ï¼Œæ€»æ˜¯è¦å‘ç”Ÿæ¢é¡µæ“ä½œï¼Œç›¸å½“äºæŠŠæ•°æ®ä»å†…å­˜ä¸­åˆ é™¤ï¼Œè¿™ä¸ªåœ°æ–¹è¿˜æ˜¯éœ€è¦ç”¨é”æ¥æ§åˆ¶çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1585532115,"ip_address":"","comment_id":197585,"utype":1}],"discussion_count":3,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"æœ‰ä¸ªç–‘é—®,  request queue, journal cacheéƒ½æ˜¯ç”Ÿäº§è€…, æ¶ˆè´¹è€…æ¨¡å‹çš„é˜Ÿåˆ—,  é‡Œé¢åº”è¯¥ä¼šæœ‰é”å§?  åªæ˜¯è¿™ç§é˜Ÿåˆ—é”éœ€è¦çš„èµ„æºå¾ˆå°‘. \n ä¸çŸ¥é“æ€ä¹ˆç†è§£å¯¹ä¸å¯¹","like_count":2,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":489552,"discussion_content":"è¿™ä¸ªåœ°æ–¹ç†è®ºä¸Šæ˜¯ä¸éœ€è¦é”çš„ï¼Œå› ä¸ºæ˜¯Append Onlyçš„æ•°æ®æ¨¡å‹ï¼Œä¹Ÿå°±æ˜¯è¯´æ•°æ®åœ¨å°¾éƒ¨è¿½åŠ å†™å…¥ï¼Œå†™å…¥åä¸å¯æ”¹å˜ï¼Œé‚£è¯»å†™å°±ä¸ä¼šæœ‰å†²çªï¼Œæ‰€ä»¥ä¸éœ€è¦åŠ é”ã€‚\n\nä½†å®é™…ä¸Šï¼Œå› ä¸ºå†…å­˜æ˜¯æœ‰é™çš„ï¼Œæ€»æ˜¯è¦å‘ç”Ÿæ¢é¡µæ“ä½œï¼Œç›¸å½“äºæŠŠæ•°æ®ä»å†…å­˜ä¸­åˆ é™¤ï¼Œè¿™ä¸ªåœ°æ–¹è¿˜æ˜¯éœ€è¦ç”¨é”æ¥æ§åˆ¶çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585532115,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1749015,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/b0/17/451cb87c.jpg","nickname":"åŠ æ²¹ï¼","note":"","ucode":"947E97762DB6EF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":542265,"discussion_content":"å­¦åˆ°äº†ï¼ŒAppend Onlyçš„æ•°æ®æ¨¡å‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640695097,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1980201,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/37/29/b3af57a7.jpg","nickname":"å‡¯æ–‡å°çŒª","note":"","ucode":"36D8AD0229547F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":532661,"discussion_content":"ç®€å•è§£é‡Šä¸€ä¸‹ çº¿ç¨‹åšå®ŒæŒä¹…åŒ–æˆ–åŒæ­¥åï¼Œéœ€è¦å°†å†…å­˜æ•°æ®åˆ é™¤ï¼Œè¿™ä¸ªæ—¶å€™å­˜åœ¨å†™è¦†ç›–é—®é¢˜ éœ€è¦ä¸€å±‚ä¿æŠ¤","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637662300,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":134282,"user_name":"é¡¶æ–°","can_delete":false,"product_type":"c1","uid":1036566,"ip_address":"","ucode":"241D3CCCAE536B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/d1/16/6347bbc0.jpg","comment_is_top":false,"comment_ctime":1568793058,"is_pvip":false,"replies":[{"id":51547,"content":"è¿™ä¸ªåœ°æ–¹æ˜¯ä¸éœ€è¦é”çš„ï¼Œå†™å…¥å’Œç§»å‡ºCallbackåˆ†åˆ«æ˜¯åœ¨2ä¸ªå›ºå®šçš„çº¿ç¨‹ä¸­åˆ†åˆ«æ‰§è¡Œï¼Œè¿™ä¸ªé“¾è¡¨å†™å…¥çš„æ—¶å€™ç›´æ¥æ˜¯å°¾éƒ¨è¿½åŠ ï¼Œæ‰§è¡ŒCallbackçš„æ—¶å€™åœ¨å¤´éƒ¨ç§»å‡ºã€‚å¹¶ä¸”ï¼Œæ‰§è¡ŒCallbackçš„æ—¶å€™ä¸€å®šé“¾è¡¨ä¸­æœ‰æ•°æ®çš„æ—¶å€™ï¼Œæ‰€ä»¥ä¹Ÿä¸éœ€è¦åŠ é”æ‹…å¿ƒç§»é™¤è¶Šç•Œã€‚æ‰€ä»¥è¿™ä¸ªåœ°æ–¹æ˜¯ä¸éœ€è¦é”çš„","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1568855667,"ip_address":"","comment_id":134282,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"FlushThread å’Œ ReplicationThreadçº¿ç¨‹å¯¹å†…å­˜çš„é“¾è¡¨ Pending Callbacks ä¸­æ•°æ®çš„æ›´æ–°ï¼Œç„¶åResponseThreadæ‰«æé“¾è¡¨Pending Callbacksï¼Œæ‰¹é‡å–å‡ºç¬¦åˆ QOS è§„åˆ™çš„å“åº”åŠè¶…æ—¶çš„å“åº”ï¼Œç„¶åå¹¶å‘è¿”å›ç»™å®¢æˆ·ç«¯ã€‚è¿™å—ä¹Ÿå­˜åœ¨å¯¹ Pending Callbacks å­˜åœ¨äº’æ–¥é”å§ï¼Ÿä¸çŸ¥é“ç†è§£çš„å¯¹ä¸å¯¹ï¼Œè¿˜è¯·è€å¸ˆç­”ç–‘ :)","like_count":2,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467690,"discussion_content":"è¿™ä¸ªåœ°æ–¹æ˜¯ä¸éœ€è¦é”çš„ï¼Œå†™å…¥å’Œç§»å‡ºCallbackåˆ†åˆ«æ˜¯åœ¨2ä¸ªå›ºå®šçš„çº¿ç¨‹ä¸­åˆ†åˆ«æ‰§è¡Œï¼Œè¿™ä¸ªé“¾è¡¨å†™å…¥çš„æ—¶å€™ç›´æ¥æ˜¯å°¾éƒ¨è¿½åŠ ï¼Œæ‰§è¡ŒCallbackçš„æ—¶å€™åœ¨å¤´éƒ¨ç§»å‡ºã€‚å¹¶ä¸”ï¼Œæ‰§è¡ŒCallbackçš„æ—¶å€™ä¸€å®šé“¾è¡¨ä¸­æœ‰æ•°æ®çš„æ—¶å€™ï¼Œæ‰€ä»¥ä¹Ÿä¸éœ€è¦åŠ é”æ‹…å¿ƒç§»é™¤è¶Šç•Œã€‚æ‰€ä»¥è¿™ä¸ªåœ°æ–¹æ˜¯ä¸éœ€è¦é”çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568855667,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":127545,"user_name":"ykkk88","can_delete":false,"product_type":"c1","uid":1068585,"ip_address":"","ucode":"A1BCFC2F0D1022","user_header":"https://static001.geekbang.org/account/avatar/00/10/4e/29/1be3dd40.jpg","comment_is_top":false,"comment_ctime":1566739307,"is_pvip":false,"replies":[{"id":47510,"content":"æ˜¯çš„ã€‚\n\nä¸€èˆ¬çš„åè®®éƒ½æ˜¯è¿™ç§â€œè¯·æ±‚-å“åº”â€çš„æ–¹å¼ï¼Œä¸éœ€è¦åŒæ­¥çš„è¯·æ±‚ä¹‹é—´æœ‰åºã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1566867996,"ip_address":"","comment_id":127545,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"å¦‚æœè¦ä¿è¯å‰ä¸€å¥è¯è¦å¯¹æ–¹ç¡®è®¤å›å¤åå†å‘é€ä¸‹ä¸€å¥è¯ å°±ä¸èƒ½ç”¨è¿™ç§æ–¹å¼äº†å§ï¼Ÿè¿™æ ·ååé‡å°±ä¼šå¾ˆä½äº†","like_count":2,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464544,"discussion_content":"æ˜¯çš„ã€‚\n\nä¸€èˆ¬çš„åè®®éƒ½æ˜¯è¿™ç§â€œè¯·æ±‚-å“åº”â€çš„æ–¹å¼ï¼Œä¸éœ€è¦åŒæ­¥çš„è¯·æ±‚ä¹‹é—´æœ‰åºã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566867996,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":127533,"user_name":"TWT_Marq","can_delete":false,"product_type":"c1","uid":1238077,"ip_address":"","ucode":"1E1E14C7281477","user_header":"https://static001.geekbang.org/account/avatar/00/12/e4/3d/5d51fda4.jpg","comment_is_top":false,"comment_ctime":1566736554,"is_pvip":false,"replies":[{"id":47508,"content":"æ˜¯çš„","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1566867942,"ip_address":"","comment_id":127533,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"JMQä¸­ï¼Œæ¥å—è¯·æ±‚çš„iothreadså°†è¯·æ±‚ä¸¢ç»™request queueï¼ŒWriteThreadä»queueä¸­å–å‡ºæ¥å¼€å§‹å¹²æ´»ã€‚è¿™ä¸ªqueueæ˜¯concurrentBlockingQueueå—ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464537,"discussion_content":"æ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566867942,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":127448,"user_name":"linqw","can_delete":false,"product_type":"c1","uid":1134138,"ip_address":"","ucode":"09DCFE98C54DD8","user_header":"https://static001.geekbang.org/account/avatar/00/11/4e/3a/86196508.jpg","comment_is_top":false,"comment_ctime":1566717576,"is_pvip":false,"replies":[{"id":47506,"content":"è¿˜æ˜¯è´´ä¸€ä¸‹GitHubçš„é“¾æ¥æŠŠï¼Œä¹Ÿæ–¹ä¾¿å…¶ä»–åŒå­¦å­¦ä¹ ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1566867867,"ip_address":"","comment_id":127448,"utype":1}],"discussion_count":10,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"æˆ‘ç”¨javaå®ç°äº†ä¸€ç‰ˆï¼Œè€å¸ˆå¸®å¿™çœ‹ä¸‹å“¦ï¼Œè¯„è®ºåªèƒ½å‘2000å­—ï¼Œå…¶ä½™åœ¨è¯„è®ºåŒºè¡¥ä¸Š\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\nimport javax.annotation.Nonnull;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.OutputStream;\nimport java.net.ServerSocket;\nimport java.net.Socket;\nimport java.util.concurrent.*;\nimport java.util.concurrent.atomic.AtomicInteger;\nimport java.util.concurrent.atomic.AtomicLong;\nimport java.util.concurrent.locks.ReentrantLock;\n\n&#47;**\n * @author linqw\n *&#47;\npublic class SocketExample {\n\n    private static final Logger LOGGER = LoggerFactory.getLogger(SocketExample.class);\n\n    private static final ReentrantLock LI_WRITE_REENTRANT_LOCK = new ReentrantLock();\n\n    private static final ReentrantLock ZHANG_WRITE_REENTRANT_LOCK = new ReentrantLock();\n\n    private static final int NCPU = Runtime.getRuntime().availableProcessors();\n\n    private final ThreadPoolExecutor serverThreadPoolExecutor = new ThreadPoolExecutor(NCPU, NCPU, 5, TimeUnit.SECONDS, new ArrayBlockingQueue&lt;Runnable&gt;(200000), new ThreadFactoryImpl(&quot;server-&quot;), new ThreadPoolExecutor.CallerRunsPolicy());\n\n    private final ThreadPoolExecutor clientThreadPoolExecutor = new ThreadPoolExecutor(NCPU, NCPU, 5, TimeUnit.SECONDS, new ArrayBlockingQueue&lt;Runnable&gt;(200000), new ThreadFactoryImpl(&quot;client-&quot;), new ThreadPoolExecutor.CallerRunsPolicy());\n\n    private volatile boolean started = false;\n\n    &#47;**\n     * ä¿©å¤§çˆ·å·²ç»é‡è§äº†å¤šå°‘æ¬¡\n     *&#47;\n    private volatile AtomicInteger count = new AtomicInteger(0);\n\n    &#47;**\n     * æ€»å…±éœ€è¦é‡è§å¤šå°‘æ¬¡\n     *&#47;\n    private static final int TOTAL = 1;\n\n    private static final String Z0 = &quot; åƒäº†æ²¡ï¼Œæ‚¨å¶?&quot;;\n\n    private static final String Z3 = &quot; å—¨ï¼åƒé¥±äº†æºœæºœå¼¯å„¿ã€‚&quot;;\n    private static final String Z5 = &quot; å›å¤´å»ç»™è€å¤ªå¤ªè¯·å®‰ï¼&quot;;\n    private static final String L1 = &quot; åˆšåƒã€‚&quot;;\n    private static final String L2 = &quot; æ‚¨è¿™ï¼Œå˜›å»ï¼Ÿ&quot;;\n    private static final String L4 = &quot; æœ‰ç©ºå®¶é‡Œååå•Šã€‚&quot;;","like_count":2,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464537,"discussion_content":"æ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566867942,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":127344,"user_name":"è±†æ²™åŒ…","can_delete":false,"product_type":"c1","uid":1223954,"ip_address":"","ucode":"7C62E546E6786A","user_header":"https://static001.geekbang.org/account/avatar/00/12/ad/12/d4d54dd2.jpg","comment_is_top":false,"comment_ctime":1566659587,"is_pvip":false,"replies":[{"id":47163,"content":"è¿™ä¸ªåœ°æ–¹æ˜¯å› ä¸ºï¼Œå®Œæˆäº†æ‰€æœ‰ä¼šè¯ä¹‹åï¼Œå…³é—­socketè¿æ¥çš„æ—¶å€™ï¼Œæ²¡æœ‰å…ˆç­‰å¾…2ä¸ªå¤§çˆ·è¯»å†™socketçš„4ä¸ªçº¿ç¨‹éƒ½ç»“æŸå¯¼è‡´çš„ã€‚\n\nè™½ç„¶ä¸å½±å“ç»“æœï¼Œä½†è¿˜æ˜¯å¯ä»¥æ”¹è¿›ä¸€ä¸‹ï¼Œåšåˆ°ä¼˜é›…çš„é€€å‡ºã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1566708952,"ip_address":"","comment_id":127344,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"è€å¸ˆï¼Œæˆ‘åœ¨è¿è¡Œä½ çš„è€å¤§çˆ·ä»£ç çš„æ—¶å€™å‘ç°äº†ä¸€ä¸ªé—®é¢˜ï¼Œç»å¸¸æŠ¥è¯»é•¿åº¦æ•…éšœã€‚æˆ‘è°ƒè¯•äº†ä¸€ä¸‹ï¼Œåº”è¯¥æ˜¯å› ä¸ºå¼ å¤§çˆ·é˜»å¡åœ¨readfromçš„æ—¶å€™ï¼Œæå¤§çˆ·count++äº†ã€‚ç„¶åcountå¤§äºtotalï¼Œclienté‡Šæ”¾äº†tcpã€‚è¿™å¯¼è‡´readfromæ— æ³•è¯»å‡ºå‡†ç¡®æ•°æ®ã€‚æˆ‘åœ¨è¿”å›è¯»æ•°æ®æ•…éšœå‰åˆ¤æ–­äº†ä¸€ä¸‹countå’Œtotalçš„å…³ç³»ï¼Œå¦‚æœcountå¤§äºç­‰äºtotalæ­£å¸¸è¿”å›ï¼Œå°±æ²¡æœ‰å†æŠ¥è¿‡å¼‚å¸¸äº†ã€‚æ‚¨çœ‹æˆ‘åˆ†æçš„æ˜¯å¦æœ‰é—®é¢˜å‘¢","like_count":2,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464495,"discussion_content":"è¿˜æ˜¯è´´ä¸€ä¸‹GitHubçš„é“¾æ¥æŠŠï¼Œä¹Ÿæ–¹ä¾¿å…¶ä»–åŒå­¦å­¦ä¹ ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566867867,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1134138,"avatar":"https://static001.geekbang.org/account/avatar/00/11/4e/3a/86196508.jpg","nickname":"linqw","note":"","ucode":"09DCFE98C54DD8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6132,"discussion_content":"class RequestResponse {\n        int serial;\n        String payLoad;\n\n        @Override\n        public String toString() {\n            return &#34;RequestResponse{&#34; +\n                    &#34;serial=&#34; + serial +\n                    &#34;, payLoad=&#39;&#34; + payLoad + &#39;\\&#39;&#39; +\n                    &#39;}&#39;;\n        }\n    }\n\n    private void writeTo(RequestResponse requestResponse, ReentrantLock reentrantLock, Socket socket) {\n        try {\n            OutputStream outputStream = socket.getOutputStream();\n            byte[] payloadBytes = requestResponse.payLoad.getBytes();\n            byte[] serialBytes = intToByte(requestResponse.serial);\n            int length = payloadBytes.length + serialBytes.length;\n            byte[] lengthBytes = intToByte(length);\n            reentrantLock.lock();\n            outputStream.write(lengthBytes);\n            outputStream.write(serialBytes);\n            outputStream.write(payloadBytes);\n            outputStream.flush();\n        } catch (IOException e) {\n            LOGGER.error(e.toString());\n        } finally {\n            reentrantLock.unlock();\n        }\n    }\n\n    ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1566719012,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1103652,"avatar":"https://static001.geekbang.org/account/avatar/00/10/d7/24/bdc0e12b.jpg","nickname":"æ–½åæ´›","note":"","ucode":"138B4A0E4EA76A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6224,"discussion_content":"æ¥ä¸ªgitç‰ˆæœ¬çš„å•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566795049,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1134138,"avatar":"https://static001.geekbang.org/account/avatar/00/11/4e/3a/86196508.jpg","nickname":"linqw","note":"","ucode":"09DCFE98C54DD8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1103652,"avatar":"https://static001.geekbang.org/account/avatar/00/10/d7/24/bdc0e12b.jpg","nickname":"æ–½åæ´›","note":"","ucode":"138B4A0E4EA76A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6279,"discussion_content":"æˆ‘æ‰¾ä¸ªæ—¶é—´ï¼Œç”¨nettyã€ nioä¹Ÿå®ç°ä¸‹ï¼Œç»Ÿä¸€æ”¾åœ¨GitHubä¸Š","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1566820342,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":6224,"ip_address":"","group_id":0},"score":6279,"extra":""}]},{"author":{"id":1134138,"avatar":"https://static001.geekbang.org/account/avatar/00/11/4e/3a/86196508.jpg","nickname":"linqw","note":"","ucode":"09DCFE98C54DD8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6138,"discussion_content":"  class ThreadFactoryImpl implements ThreadFactory {\n        private final AtomicLong threadIndex = new AtomicLong(0);\n        private final String threadNamePrefix;\n        private final boolean daemon;\n\n        ThreadFactoryImpl(final String threadNamePrefix) {\n            this(threadNamePrefix, false);\n        }\n\n        ThreadFactoryImpl(final String threadNamePrefix, boolean daemon) {\n            this.threadNamePrefix = threadNamePrefix;\n            this.daemon = daemon;\n        }\n\n        @Override\n        public Thread newThread(@Nonnull Runnable r) {\n            Thread thread = new Thread(r, threadNamePrefix + this.threadIndex.incrementAndGet());\n            thread.setDaemon(daemon);\n            return thread;\n        }\n    }\n\n    public static void main(String[] args) throws InterruptedException {\n        SocketExample socketExample = new SocketExample();\n        new Thread(new Runnable() {\n            @Override\n            public void run() {\n                socketExample.startServer(9999);\n            }\n        }).start();\n        while (!socketExample.started) {\n            Thread.sleep(1);\n        }\n        long start = System.nanoTime();\n        socketExample.startClient(&#34;127.0.0.1&#34;, 9999);\n        long end = System.nanoTime();\n        System.out.println(TimeUnit.SECONDS.convert(end - start, TimeUnit.NANOSECONDS));\n    }\n}","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566719271,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1134138,"avatar":"https://static001.geekbang.org/account/avatar/00/11/4e/3a/86196508.jpg","nickname":"linqw","note":"","ucode":"09DCFE98C54DD8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6137,"discussion_content":" private void startClient(String host, int port) {\n        final CountDownLatch countDownLatch = new CountDownLatch(1);\n        // ä¸æœåŠ¡ç«¯å»ºç«‹è¿æ¥\n        try (Socket socket = new Socket(host, port)) {\n            clientThreadPoolExecutor.execute(new Runnable() {\n                @Override\n                public void run() {\n                    liDaYeListen(socket, countDownLatch);\n\n                }\n            });\n            clientThreadPoolExecutor.execute(new Runnable() {\n                @Override\n                public void run() {\n                    liDaYeSay(socket);\n                }\n            });\n            countDownLatch.await();\n        } catch (IOException | InterruptedException e) {\n            LOGGER.error(e.toString());\n        }\n\n    }\n\n    private byte[] intToByte(int val) {\n        byte[] bytes = new byte[4];\n        bytes[0] = (byte) (val &amp; 0xff);\n        bytes[1] = (byte) ((val >> 8) &amp; 0xff);\n        bytes[2] = (byte) ((val >> 16) &amp; 0xff);\n        bytes[3] = (byte) ((val >> 24) &amp; 0xff);\n        return bytes;\n    }\n\n    private int byteToInt(byte[] bytes) {\n        int val = 0;\n        if (bytes == null || bytes.length < 4) {\n            return val;\n        }\n        val += bytes[0] &amp; 0xff;\n        val += (bytes[1] &amp; 0xff) << 8;\n        val += (bytes[2] &amp; 0xff) << 16;\n        val += (bytes[3] &amp; 0xff) << 24;\n        return val;\n    }\n\n  ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566719267,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1134138,"avatar":"https://static001.geekbang.org/account/avatar/00/11/4e/3a/86196508.jpg","nickname":"linqw","note":"","ucode":"09DCFE98C54DD8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6136,"discussion_content":"    /**\n     * æå¤§çˆ·çš„å˜´\n     */\n    private void liDaYeSay(Socket socket) {\n        AtomicInteger nextSerial = new AtomicInteger(0);\n        for (int i = 0; i < TOTAL; i++) {\n            clientThreadPoolExecutor.execute(new Runnable() {\n                @Override\n                public void run() {\n                    RequestResponse requestResponse = new RequestResponse();\n                    requestResponse.serial = nextSerial.getAndAdd(1);;\n                    requestResponse.payLoad = L2;\n                    writeTo(requestResponse, LI_WRITE_REENTRANT_LOCK, socket);\n                }\n            });\n            clientThreadPoolExecutor.execute(new Runnable() {\n                @Override\n                public void run() {\n                    RequestResponse requestResponse = new RequestResponse();\n                    requestResponse.serial = nextSerial.getAndAdd(1);\n                    requestResponse.payLoad = L4;\n                    writeTo(requestResponse, LI_WRITE_REENTRANT_LOCK, socket);\n                }\n            });\n\n        }\n    }\n\n    private void startServer(int port) {\n        // ç›‘å¬æŒ‡å®šçš„ç«¯å£\n\n        try (ServerSocket server = new ServerSocket(port)) {\n            started = true;\n            System.out.println(&#34; å¼ å¤§çˆ·åœ¨èƒ¡åŒå£ç­‰ç€ ...&#34;);\n            Socket socket = server.accept();\n            System.out.println(&#34; ç¢°è§ä¸€ä¸ªæå¤§çˆ·:&#34; + socket.getRemoteSocketAddress().toString());\n            zhangDaYeSay(socket);\n            zhangDaYeListen(socket);\n        } catch (IOException e) {\n            LOGGER.error(e.toString());\n        }\n    }\n\n   ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566719247,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1134138,"avatar":"https://static001.geekbang.org/account/avatar/00/11/4e/3a/86196508.jpg","nickname":"linqw","note":"","ucode":"09DCFE98C54DD8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6135,"discussion_content":"/**\n     * æå¤§çˆ·çš„è€³æœµ\n     */\n    private void liDaYeListen(Socket socket, CountDownLatch countDownLatch) {\n        while (count.get() <= TOTAL - 1) {\n            RequestResponse requestResponse = readFrom(socket);\n            if (requestResponse == null) {\n                continue;\n            }\n\n            clientThreadPoolExecutor.execute(new Runnable() {\n                @Override\n                public void run() {\n                    // fmt.Println(&#34; æå¤§çˆ·æ”¶åˆ°ï¼š&#34; + r.Payload)\n                    // å¦‚æœæ”¶åˆ°ï¼šåƒäº†æ²¡ï¼Œæ‚¨å¶?\n                    if (requestResponse.payLoad.equals(Z0)) {\n                        requestResponse.payLoad = L1;\n                        // å›å¤ï¼šåˆšåƒã€‚\n                        writeTo(requestResponse, LI_WRITE_REENTRANT_LOCK, socket);\n                    } else if (requestResponse.payLoad.equals(Z3)) {\n                        // do nothing\n                    } else if (requestResponse.payLoad.equals(Z5)) {\n                        //fmt.Println(&#34; ä¿©äººè¯´å®Œèµ°äº† &#34;)\n                        count.incrementAndGet();\n                    } else {\n                        System.out.format(&#34; æå¤§çˆ·å¬ä¸æ‡‚ï¼š%s%n&#34; + requestResponse.payLoad);\n                    }\n                }\n            });\n\n        }\n        countDownLatch.countDown();\n    }\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566719210,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1134138,"avatar":"https://static001.geekbang.org/account/avatar/00/11/4e/3a/86196508.jpg","nickname":"linqw","note":"","ucode":"09DCFE98C54DD8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6134,"discussion_content":"  /**\n     * å¼ å¤§çˆ·çš„è€³æœµ\n     */\n    private void zhangDaYeListen(Socket socket) {\n\n        while (count.get() <= TOTAL - 1) {\n            RequestResponse requestResponse = readFrom(socket);\n            if (requestResponse == null) {\n                continue;\n            }\n            serverThreadPoolExecutor.execute(new Runnable() {\n                @Override\n                public void run() {\n                    // å¦‚æœæ”¶åˆ°ï¼šæ‚¨è¿™ï¼Œå˜›å»ï¼Ÿ\n                    if (requestResponse.payLoad.equals(L2)) {\n                        requestResponse.payLoad = Z3;\n                        // å›å¤ï¼šå—¨ï¼åƒé¥±äº†æºœæºœå¼¯å„¿ã€‚\n                        writeTo(requestResponse, ZHANG_WRITE_REENTRANT_LOCK, socket);\n                        // å¦‚æœæ”¶åˆ°ï¼šæœ‰ç©ºå®¶é‡Œååå•Šã€‚\n                    } else if (requestResponse.payLoad.equals(L4)) {\n                        requestResponse.payLoad = Z5;\n                        // å›å¤ï¼šå›å¤´å»ç»™è€å¤ªå¤ªè¯·å®‰ï¼\n                        writeTo(requestResponse, ZHANG_WRITE_REENTRANT_LOCK, socket);\n                        // å¦‚æœæ”¶åˆ°ï¼šåˆšåƒã€‚\n                    } else if (requestResponse.payLoad.equals(L1)) {\n                        // ignoreä¸ç”¨å›å¤\n                    } else {\n                        System.out.format(&#34; å¼ å¤§çˆ·å¬ä¸æ‡‚ï¼š%s%n&#34; + requestResponse.payLoad);\n                    }\n                }\n            });\n        }\n\n\n    }\n\n    /**\n     * å¼ å¤§çˆ·çš„å˜´\n     */\n    private void zhangDaYeSay(Socket socket) {\n        AtomicInteger nextSerial = new AtomicInteger(0);\n        for (int i = 0; i < TOTAL; i++) {\n            serverThreadPoolExecutor.execute(new Runnable() {\n                @Override\n                public void run() {\n                    RequestResponse requestResponse = new RequestResponse();\n                    requestResponse.serial = nextSerial.getAndAdd(1);\n                    requestResponse.payLoad = Z0;\n                    writeTo(requestResponse, ZHANG_WRITE_REENTRANT_LOCK, socket);\n                }\n            });\n        }\n    }\n\n    ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566719138,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1134138,"avatar":"https://static001.geekbang.org/account/avatar/00/11/4e/3a/86196508.jpg","nickname":"linqw","note":"","ucode":"09DCFE98C54DD8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6133,"discussion_content":"private RequestResponse readFrom(Socket socket) {\n        RequestResponse requestResponse = new RequestResponse();\n        int length = 4;\n        int serialLength = 4;\n        byte[] payloadBytes;\n        byte[] serialBytes;\n        byte[] lengthBytes;\n        InputStream inputStream;\n        try {\n            inputStream = socket.getInputStream();\n\n            try {\n                lengthBytes = new byte[length];\n                inputStream.read(lengthBytes);\n                length = byteToInt(lengthBytes);\n                if (length <= serialLength) {\n                    return null;\n                }\n            } catch (IOException e) {\n                LOGGER.error(&#34; è¯»é•¿åº¦æ•…éšœï¼š{}&#34;, e.toString());\n            }\n            try {\n                serialBytes = new byte[4];\n                inputStream.read(serialBytes);\n                requestResponse.serial = byteToInt(serialBytes);\n            } catch (IOException e) {\n                LOGGER.error(&#34; è¯»Serialæ•…éšœï¼š{}&#34;, e.toString());\n            }\n            try {\n                payloadBytes = new byte[length - serialLength];\n                inputStream.read(payloadBytes);\n                requestResponse.payLoad = new String(payloadBytes);\n            } catch (IOException e) {\n                LOGGER.error(&#34; è¯»PayLoadæ•…éšœï¼š{}&#34;, e.toString());\n            }\n        } catch (IOException e) {\n            LOGGER.error(e.toString());\n        }\n        return requestResponse;\n\n    }\n\n  ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566719106,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":127215,"user_name":"solar","can_delete":false,"product_type":"c1","uid":1070335,"ip_address":"","ucode":"E6C7090478B027","user_header":"https://static001.geekbang.org/account/avatar/00/10/54/ff/09a058f3.jpg","comment_is_top":false,"comment_ctime":1566612503,"is_pvip":false,"replies":[{"id":47078,"content":"è¿™äº›æƒ³æ³•ï¼Œæœ€å¥½æ˜¯è½åˆ°ä»£ç ä¸Šï¼Œé€šè¿‡çœŸå®çš„ä¼˜åŒ–æ•ˆæœï¼Œæ¥å°è¯è‡ªå·±çš„æƒ³æ³•ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1566620267,"ip_address":"","comment_id":127215,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"ä¸€äº›åˆ†é…å†…å­˜åœ°æ–¹ä¹Ÿå¯ä»¥ä¼˜åŒ–ï¼Œå¯ä»¥é¢„å…ˆåˆ†é…ä¸€å—å¤ç”¨ï¼Œå‡å°‘å‘å†…æ ¸ç”³è¯·åˆ†é…å†…å­˜æ¬¡æ•°.","like_count":2,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464379,"discussion_content":"è¿™äº›æƒ³æ³•ï¼Œæœ€å¥½æ˜¯è½åˆ°ä»£ç ä¸Šï¼Œé€šè¿‡çœŸå®çš„ä¼˜åŒ–æ•ˆæœï¼Œæ¥å°è¯è‡ªå·±çš„æƒ³æ³•ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566620267,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1070335,"avatar":"https://static001.geekbang.org/account/avatar/00/10/54/ff/09a058f3.jpg","nickname":"solar","note":"","ucode":"E6C7090478B027","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6028,"discussion_content":"ä¸šåŠ¡ä¸­æ›¾ç”¨goå®ç°è¿‡. ğŸ˜„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566620796,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":127212,"user_name":"Geek_zbvt62","can_delete":false,"product_type":"c1","uid":1046714,"ip_address":"","ucode":"81EA27ADD9EC1A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f8/ba/d28174a9.jpg","comment_is_top":false,"comment_ctime":1566612023,"is_pvip":false,"replies":[{"id":47080,"content":"1. è¿™é‡Œæ˜¯ä¸éœ€è¦åŒæ­¥çš„ï¼Œå› ä¸ºè¿™ä¸ªæµå®ƒå…·å¤‡WALçš„æ‰€æœ‰ç‰¹æ€§ï¼šå°¾éƒ¨è¿½åŠ ã€å†™å…¥åä¸å˜ï¼Œè¿™ç§WALè¯»å†™çº¿ç¨‹ä¹‹é—´æ˜¯ä¸éœ€è¦ä»»ä½•åè°ƒçš„ã€‚\n\n2. è¿™ä¸ªæ˜¯æˆ‘ä»¬å•ç‹¬ä½¿ç”¨å †å¤–å†…å­˜è®¾è®¡çš„ä¸€ä¸ªå†™ç¼“å­˜ï¼Œç›®çš„å°±æ˜¯é¿å…é¢‘ç¹çš„GCã€‚\n\n3. ä¼˜åŒ–çš„è¿‡ç¨‹æ˜¯ä¸€ä¸ªå¾ªåºæ¸è¿›çš„è¿‡ç¨‹ï¼Œå¹¶æ²¡æœ‰å“ªä¸€æ­¥æ˜¯ä¸€ä¸‹å­æå‡äº†å¾ˆå¤šã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1566620620,"ip_address":"","comment_id":127212,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"æƒ³ç®€å•è¯·æ•™ä¸€ä¸‹JMQ\n1. writeThreadä¸ReplicationThread&#47;FlushThreadä¹‹é—´çš„åŒæ­¥ä¹Ÿè¦åŸºäºæ— é”é˜Ÿåˆ—æ˜¯å§ï¼Ÿ\n2. JournalCacheå°±æ˜¯ç®€å•çš„ç”¨æˆ·æ€å†…å­˜ï¼Œè¿˜æ˜¯åŸºäºmmapï¼Ÿï¼ˆä»æè¿°ä¸Šçœ‹æ„Ÿè§‰å°±æ˜¯ç”¨æˆ·æ€å†…å­˜ï¼‰ã€‚\n3. è€å¸ˆèƒ½ä¸èƒ½é€éœ²ä¸€ä¸‹ï¼Œåœ¨ç ”å‘JMQçš„è¿‡ç¨‹ä¸­ï¼Œè§£å†³äº†å“ªä¸ªç“¶é¢ˆä¹‹åï¼Œååé‡ä¸€ä¸‹å­æäº†å¾ˆå¤šå‘¢ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464378,"discussion_content":"1. è¿™é‡Œæ˜¯ä¸éœ€è¦åŒæ­¥çš„ï¼Œå› ä¸ºè¿™ä¸ªæµå®ƒå…·å¤‡WALçš„æ‰€æœ‰ç‰¹æ€§ï¼šå°¾éƒ¨è¿½åŠ ã€å†™å…¥åä¸å˜ï¼Œè¿™ç§WALè¯»å†™çº¿ç¨‹ä¹‹é—´æ˜¯ä¸éœ€è¦ä»»ä½•åè°ƒçš„ã€‚\n\n2. è¿™ä¸ªæ˜¯æˆ‘ä»¬å•ç‹¬ä½¿ç”¨å †å¤–å†…å­˜è®¾è®¡çš„ä¸€ä¸ªå†™ç¼“å­˜ï¼Œç›®çš„å°±æ˜¯é¿å…é¢‘ç¹çš„GCã€‚\n\n3. ä¼˜åŒ–çš„è¿‡ç¨‹æ˜¯ä¸€ä¸ªå¾ªåºæ¸è¿›çš„è¿‡ç¨‹ï¼Œå¹¶æ²¡æœ‰å“ªä¸€æ­¥æ˜¯ä¸€ä¸‹å­æå‡äº†å¾ˆå¤šã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566620620,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":140558,"user_name":"Tesla","can_delete":false,"product_type":"c1","uid":1500742,"ip_address":"","ucode":"98629AFD9861EE","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKUcSLVV6ia3dibe7qvTu8Vic1PVs2EibxoUdx930MC7j2Q9A6s4eibMDZlcicMFY0D0icd3RrDorMChu0zw/132","comment_is_top":false,"comment_ctime":1570985576,"is_pvip":false,"replies":[{"id":54348,"content":"ä¸æ˜¯è¿™æ ·çš„ï¼Œä»¥ä½ è¿™ä¸ªä¾‹å­æ¥è¯´ï¼Œå‡è®¾abcdè¿™æ¡æ¶ˆæ¯å‰é¢å†ä¹Ÿæ²¡æœ‰å…¶å®ƒæ¶ˆæ¯çš„ï¼Œå®ƒæ˜¯æœ€å‰çš„ä¸€æ¡ï¼Œabcdè¿™æ¡æ¶ˆæ¯çš„offsetå°±æ˜¯0ï¼Œ abcdefghè¿™æ¡æ¶ˆæ¯çš„offsetå°±æ˜¯6.","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1571018586,"ip_address":"","comment_id":140558,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"è€å¸ˆå¥½ï¼Œè¯·é—®ä¸€ä¸‹WriteThreadä¸­å°†æ¶ˆæ¯åºåˆ—åŒ–å¹¶ç»´æŠ¤èµ·æ­¢ä½ç½®offsetï¼Œè¿™ä¸ªoffsetæ˜¯å¦å°±æ˜¯å¤´éƒ¨ä¿¡æ¯ä¸­ä¿å­˜æ¶ˆæ¯é•¿åº¦å‘¢ï¼Ÿæ¯”å¦‚04abcd08abcdefghï¼Œé€šè¿‡04å°±å¯ä»¥çŸ¥é“abcdæ¶ˆæ¯çš„èµ·æ­¢ä½ç½®ï¼Œä¸‹ä¸€ä¸ªè¯»åˆ°çš„08åˆ™ä»£è¡¨ä¸‹ä¸€æ¡æ¶ˆæ¯çš„èµ·æ­¢ä½ç½®ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464378,"discussion_content":"1. è¿™é‡Œæ˜¯ä¸éœ€è¦åŒæ­¥çš„ï¼Œå› ä¸ºè¿™ä¸ªæµå®ƒå…·å¤‡WALçš„æ‰€æœ‰ç‰¹æ€§ï¼šå°¾éƒ¨è¿½åŠ ã€å†™å…¥åä¸å˜ï¼Œè¿™ç§WALè¯»å†™çº¿ç¨‹ä¹‹é—´æ˜¯ä¸éœ€è¦ä»»ä½•åè°ƒçš„ã€‚\n\n2. è¿™ä¸ªæ˜¯æˆ‘ä»¬å•ç‹¬ä½¿ç”¨å †å¤–å†…å­˜è®¾è®¡çš„ä¸€ä¸ªå†™ç¼“å­˜ï¼Œç›®çš„å°±æ˜¯é¿å…é¢‘ç¹çš„GCã€‚\n\n3. ä¼˜åŒ–çš„è¿‡ç¨‹æ˜¯ä¸€ä¸ªå¾ªåºæ¸è¿›çš„è¿‡ç¨‹ï¼Œå¹¶æ²¡æœ‰å“ªä¸€æ­¥æ˜¯ä¸€ä¸‹å­æå‡äº†å¾ˆå¤šã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566620620,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":135953,"user_name":"é’±","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1569313877,"is_pvip":false,"replies":[{"id":52146,"content":"æ˜¯çš„ï¼Œè¿™é‡Œçš„â€œå¼‚æ­¥â€æ˜¯æŒ‡ï¼Œå‘å“åº”ç»™å®¢æˆ·ç«¯å¹¶ä¸æ˜¯ç”±å¤åˆ¶æˆ–è€…åˆ·ç›˜çº¿ç¨‹æ¥æ‰§è¡Œçš„ï¼Œè€Œæ˜¯å•ç‹¬çš„ä¸€ç»„çº¿ç¨‹ã€‚ç»™æ¯ä¸ªå®¢æˆ·ç«¯å‘å“åº”è¿™ä¸ªæ“ä½œæ˜¯å¯ä»¥å¹¶è¡Œæ‰§è¡Œçš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1569375374,"ip_address":"","comment_id":135953,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"è€å¸ˆå¥½ï¼Œ ReponseThreads è¿™ç»„çº¿ç¨‹ï¼Œæ€ä¹ˆå®ç°å¼‚æ­¥å¹¶è¡Œçš„æ²¡å¤ªç†è§£ï¼Œå¥¹ä¸æ˜¯éœ€è¦ç­‰å¾…å¤åˆ¶å“åº”æˆ–è€…è½ç›˜åæ‰å‘æ¶ˆæ¯ç»™å®¢æˆ·ç«¯å˜›ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468399,"discussion_content":"æ˜¯çš„ï¼Œè¿™é‡Œçš„â€œå¼‚æ­¥â€æ˜¯æŒ‡ï¼Œå‘å“åº”ç»™å®¢æˆ·ç«¯å¹¶ä¸æ˜¯ç”±å¤åˆ¶æˆ–è€…åˆ·ç›˜çº¿ç¨‹æ¥æ‰§è¡Œçš„ï¼Œè€Œæ˜¯å•ç‹¬çš„ä¸€ç»„çº¿ç¨‹ã€‚ç»™æ¯ä¸ªå®¢æˆ·ç«¯å‘å“åº”è¿™ä¸ªæ“ä½œæ˜¯å¯ä»¥å¹¶è¡Œæ‰§è¡Œçš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569375374,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":129609,"user_name":"å¤§ç™½å…ˆç”Ÿ","can_delete":false,"product_type":"c1","uid":1615335,"ip_address":"","ucode":"7EF709EF8FFE6B","user_header":"https://static001.geekbang.org/account/avatar/00/18/a5/e7/ed0a0131.jpg","comment_is_top":false,"comment_ctime":1567171879,"is_pvip":false,"replies":[{"id":48361,"content":"æ— è®ºæ˜¯ç”¨å‰ç½®é•¿åº¦è¿˜æ˜¯åˆ†éš”ç¬¦çš„æ–¹å¼æ–­å¥ï¼Œä¸€ä¸ª10Kçš„æ¶ˆæ¯ï¼Œå½“æ¥æ”¶æ–¹æ”¶åˆ°å‰8Kçš„æ—¶å€™ï¼Œå®ƒæ˜¯è‚¯å®šå¯ä»¥çŸ¥é“â€œè¿™æ¡æ¶ˆæ¯æˆ‘åªæ”¶åˆ°äº†ä¸€éƒ¨åˆ†â€ï¼Œè¿™ä¸ªæ—¶å€™å®ƒå°±ä»€ä¹ˆéƒ½ä¸åšï¼Œç­‰ç€æŠŠå‰©ä¸‹çš„éƒ¨åˆ†æ”¶å…¨å°±è¡Œäº†ã€‚\n\nä½ åœ¨è¿™é‡Œé¢æœ‰ä¸€ä¸ªè¯¯åŒºå°±æ˜¯ï¼Œæ¯æ¬¡è¯»åˆ°ä¸€éƒ¨åˆ†æ•°æ®ï¼Œä¸æ˜¯è¯´ä¸€å®šéè¦æŠŠè¿™éƒ¨åˆ†æ•°æ®å…¨éƒ½è§£æå®Œï¼Œèƒ½è§£æå‡ºæ¥æ•´å¥çš„æ¶ˆæ¯ï¼Œæ‹¿å»å¤„ç†ã€‚å‰©ä¸‹åŠå¥çš„æ‰”åœ¨é‚£å„¿ä¸ç®¡ï¼Œç­‰ç€ååŠå¥æ¥äº†å†è§£æå°±è¡Œäº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1567214143,"ip_address":"","comment_id":129609,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"è€å¸ˆï¼Œæˆ‘åŸºäºä¹‹å‰åŠåŒ…ç²˜åŒ…çš„é—®é¢˜è¿˜æƒ³é—®ä¸€ä¸ªé—®é¢˜ã€‚ä¹‹å‰æ‚¨è¯´å¦‚æœæŒ‰ç…§å’±ä»¬è¯¾ä¸Šè®²çš„è‡ªå®šä¹‰æ¶ˆæ¯æ ¼å¼ï¼Œä¸ä¼šå‡ºç°è¿™ç§æƒ…å†µã€‚æˆ‘æƒ³é—®ï¼Œå¦‚æœå‡ºç°æ¦‚å¿µä¸Šçš„åŠåŒ…æƒ…å†µï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œsoketé¦–å‘ç¼“å­˜å»8kï¼Œæˆ‘è¿™è¾¹å†™å…¥ä¸€æ¡10kçš„æ¶ˆæ¯ï¼Œé‚£ä¹ˆæ¥æ”¶æ–¹æŒ‰ç…§å’±ä»¬å®šä¹‰çš„æ ¼å¼è§£æï¼Œé‚£ä¸å°±æ˜¯è§£æåˆ°äº†å‰8kçš„æ•°æ®ï¼Œé‚£ä¹ˆæŒ‰ç…§æ•°æ®é’±çš„åŒ…é•¿åº¦è§£æçš„æ—¶å€™ï¼Œæ•°æ®çš„é•¿åº¦å°±ä¸å¤Ÿï¼Œè¿™æ ·ä¸ä¼šå¼•èµ·æ•°æ®é”™è¯¯ä¹ˆ","like_count":1},{"had_liked":false,"id":128607,"user_name":"å¤§ç™½å…ˆç”Ÿ","can_delete":false,"product_type":"c1","uid":1615335,"ip_address":"","ucode":"7EF709EF8FFE6B","user_header":"https://static001.geekbang.org/account/avatar/00/18/a5/e7/ed0a0131.jpg","comment_is_top":false,"comment_ctime":1566912873,"is_pvip":false,"replies":[{"id":47843,"content":"å…¶å®ï¼Œå¹¶æ²¡æœ‰æ‰€è°“çš„ç²˜åŒ…æˆ–è€…åŠåŒ…é—®é¢˜ï¼Œæˆ‘åœ¨ä¹‹å‰çš„è¯¾ç¨‹ä¸­è®²è¿‡ï¼Œä¾é æ•°æ®æµçš„è‡ªç„¶åˆ†éš”æ¥æ–­å¥æ˜¯ä¸é è°±çš„ï¼ŒTCPåè®®æœ¬èº«ä¹Ÿæ²¡æœ‰æ”¯æŒæˆ–è€…ä¿è¯ï¼Œæ¯æ¬¡å‘å‡ºçš„çš„ä¸€æ‰¹æ•°æ®ï¼Œå¯¹æ–¹ä¸€å®šä¹Ÿä¼šâ€œä¸€æ¬¡æ€§â€çš„æ”¶åˆ°èµ·æ­¢ä½ç½®ç›¸åŒçš„ä¸€æ‰¹æ•°æ®ï¼Œå®é™…ä¸Štcpè¿æ¥é€šé“ä»–æ˜¯ä¸€ä¸ªåŒå‘æµï¼Œæµä¸­çš„æ•°æ®æ˜¯æ²¡æœ‰ä»€ä¹ˆå¤©ç„¶çš„åˆ†å‰²çš„ï¼Œä¹Ÿæ ¹æœ¬ä¸ä¼šä¿è¯ä»€ä¹ˆâ€œæ‰¹â€ã€‚æ‰€ä»¥ï¼Œæ‰€è°“çš„â€œç²˜åŒ…â€æˆ–è€…â€œåŠåŒ…â€éƒ½æ˜¯ä¼ªæ¦‚å¿µï¼Œåªè¦ä½ åœ¨åè®®è®¾è®¡ä¸Šï¼Œèƒ½å¤ŸæŒ‰ç…§æˆ‘ä»¬æä¾›çš„æ–¹æ³•è¿›è¡Œæ–­å¥ï¼Œå³ä½¿å‡ºç°â€œç²˜åŒ…åŠåŒ…â€ï¼Œä¾ç„¶å¯ä»¥æ­£ç¡®çš„ä¼ è¾“æ•°æ®ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1566973276,"ip_address":"","comment_id":128607,"utype":1}],"discussion_count":2,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"è€å¸ˆï¼Œæˆ‘åœ¨å­¦ä¹ javaå®ç°tcpå‘é€æ•°æ®æ—¶ï¼Œæˆ‘æœ‰çœ‹åˆ°æœ‰è®²è§£tcpç²˜åŒ…æˆ–è€…æ˜¯åŠåŒ…çš„æƒ…å†µï¼Œæˆ‘çœ‹çš„æ–‡ç« è¯´æ˜¯å¯èƒ½æ˜¯å› ä¸ºä¸€æ¬¡å†™å…¥çš„æ•°æ®å¤§äºsoketå‘é€ç¼“å†²åŒºã€‚ä¼šå¯¼è‡´æ¥æ”¶æ–¹æ¥å—æ•°æ®æœ‰é—®é¢˜ã€‚ä½†æ˜¯æˆ‘å†™ä¾‹å­çš„æ—¶å€™æ²¡æœ‰å‘ç°è¿™ä¸ªé—®é¢˜ï¼Œè¯·é—®ï¼Œæ€ä¹ˆèƒ½å¼„å‡ºè¿™ä¸¤ç§æƒ…å†µï¼Ÿå‡å¦‚ä¸ç”¨nettyæ—¶ï¼Œåˆ©ç”¨soketèƒ½å¦‚ä½•å¤„ç†è¿™ç§é—®é¢˜ã€‚","like_count":1,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465565,"discussion_content":"æ— è®ºæ˜¯ç”¨å‰ç½®é•¿åº¦è¿˜æ˜¯åˆ†éš”ç¬¦çš„æ–¹å¼æ–­å¥ï¼Œä¸€ä¸ª10Kçš„æ¶ˆæ¯ï¼Œå½“æ¥æ”¶æ–¹æ”¶åˆ°å‰8Kçš„æ—¶å€™ï¼Œå®ƒæ˜¯è‚¯å®šå¯ä»¥çŸ¥é“â€œè¿™æ¡æ¶ˆæ¯æˆ‘åªæ”¶åˆ°äº†ä¸€éƒ¨åˆ†â€ï¼Œè¿™ä¸ªæ—¶å€™å®ƒå°±ä»€ä¹ˆéƒ½ä¸åšï¼Œç­‰ç€æŠŠå‰©ä¸‹çš„éƒ¨åˆ†æ”¶å…¨å°±è¡Œäº†ã€‚\n\nä½ åœ¨è¿™é‡Œé¢æœ‰ä¸€ä¸ªè¯¯åŒºå°±æ˜¯ï¼Œæ¯æ¬¡è¯»åˆ°ä¸€éƒ¨åˆ†æ•°æ®ï¼Œä¸æ˜¯è¯´ä¸€å®šéè¦æŠŠè¿™éƒ¨åˆ†æ•°æ®å…¨éƒ½è§£æå®Œï¼Œèƒ½è§£æå‡ºæ¥æ•´å¥çš„æ¶ˆæ¯ï¼Œæ‹¿å»å¤„ç†ã€‚å‰©ä¸‹åŠå¥çš„æ‰”åœ¨é‚£å„¿ä¸ç®¡ï¼Œç­‰ç€ååŠå¥æ¥äº†å†è§£æå°±è¡Œäº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567214143,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":181991,"user_name":"Geek_498c16","can_delete":false,"product_type":"c1","uid":1716617,"ip_address":"","ucode":"616913785EFF06","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTL6ibvATzI5FKR6r71GU3CjdlPkZYYSBYBtNibIGENFZDnqajW7LOPKZXUPWSsjt8OiaxTZ0neT8LwQQ/132","comment_is_top":false,"comment_ctime":1582688776,"is_pvip":false,"replies":[{"id":70562,"content":"è¾¾åˆ°ç³»ç»Ÿå¤„ç†èƒ½åŠ›æé™ä¹‹åï¼Œæ¶ˆæ¯å°±ä¼šå †ç§¯åˆ°è¿™é‡Œï¼Œè¿™æ ·ä¹Ÿå®¢è§‚ä¸Šèµ·äº†ä¸€ä¸ªèƒŒå‹çš„æ•ˆæœã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1582766609,"ip_address":"","comment_id":181991,"utype":1}],"discussion_count":2,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"Requests Queue ä¸ä¼šå­˜åœ¨ WriteThreadå¤„ç†æ…¢å¯¼è‡´é˜Ÿåˆ—å¡æ»¡çš„æƒ…å†µå—? çœ‹äº†ä¸‹æµç¨‹Requests Queue çš„å–æ˜¯æ¯”æ”¾æ…¢çš„.","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465020,"discussion_content":"å…¶å®ï¼Œå¹¶æ²¡æœ‰æ‰€è°“çš„ç²˜åŒ…æˆ–è€…åŠåŒ…é—®é¢˜ï¼Œæˆ‘åœ¨ä¹‹å‰çš„è¯¾ç¨‹ä¸­è®²è¿‡ï¼Œä¾é æ•°æ®æµçš„è‡ªç„¶åˆ†éš”æ¥æ–­å¥æ˜¯ä¸é è°±çš„ï¼ŒTCPåè®®æœ¬èº«ä¹Ÿæ²¡æœ‰æ”¯æŒæˆ–è€…ä¿è¯ï¼Œæ¯æ¬¡å‘å‡ºçš„çš„ä¸€æ‰¹æ•°æ®ï¼Œå¯¹æ–¹ä¸€å®šä¹Ÿä¼šâ€œä¸€æ¬¡æ€§â€çš„æ”¶åˆ°èµ·æ­¢ä½ç½®ç›¸åŒçš„ä¸€æ‰¹æ•°æ®ï¼Œå®é™…ä¸Štcpè¿æ¥é€šé“ä»–æ˜¯ä¸€ä¸ªåŒå‘æµï¼Œæµä¸­çš„æ•°æ®æ˜¯æ²¡æœ‰ä»€ä¹ˆå¤©ç„¶çš„åˆ†å‰²çš„ï¼Œä¹Ÿæ ¹æœ¬ä¸ä¼šä¿è¯ä»€ä¹ˆâ€œæ‰¹â€ã€‚æ‰€ä»¥ï¼Œæ‰€è°“çš„â€œç²˜åŒ…â€æˆ–è€…â€œåŠåŒ…â€éƒ½æ˜¯ä¼ªæ¦‚å¿µï¼Œåªè¦ä½ åœ¨åè®®è®¾è®¡ä¸Šï¼Œèƒ½å¤ŸæŒ‰ç…§æˆ‘ä»¬æä¾›çš„æ–¹æ³•è¿›è¡Œæ–­å¥ï¼Œå³ä½¿å‡ºç°â€œç²˜åŒ…åŠåŒ…â€ï¼Œä¾ç„¶å¯ä»¥æ­£ç¡®çš„ä¼ è¾“æ•°æ®ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566973276,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1485489,"avatar":"https://static001.geekbang.org/account/avatar/00/16/aa/b1/c834aab5.jpg","nickname":"å¼ å°å‹‹","note":"","ucode":"8C5E434EF53BF4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":38140,"discussion_content":"TCP ä¸æ˜¯åˆ†æ¬¡å‘åŒ…çš„ä¹ˆ  ä¸å­˜åœ¨ç²˜åŒ…æˆ–è€…åŠåŒ…é—®é¢˜ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571734384,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":136564,"user_name":"Six Days","can_delete":false,"product_type":"c1","uid":1322463,"ip_address":"","ucode":"8587F2EEFFFD11","user_header":"https://static001.geekbang.org/account/avatar/00/14/2d/df/4949b250.jpg","comment_is_top":false,"comment_ctime":1569472990,"is_pvip":false,"replies":[{"id":52404,"content":"åç»­æˆ‘ä»¬ä¼šæŠŠæ‰€æœ‰ä»£ç éƒ½å¼€æºå‡ºæ¥çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1569495979,"ip_address":"","comment_id":136564,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"è€å¸ˆï¼Œå¸Œæœ›èƒ½ç»™å‡ºä¸€ä»½java ç‰ˆæœ¬çš„å‚è€ƒä»£ç ä»¥ä¾›å­¦ä¹ ï¼Œè°¢è°¢ä½ äº†","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468695,"discussion_content":"åç»­æˆ‘ä»¬ä¼šæŠŠæ‰€æœ‰ä»£ç éƒ½å¼€æºå‡ºæ¥çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569495979,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":135070,"user_name":"mark","can_delete":false,"product_type":"c1","uid":1015720,"ip_address":"","ucode":"39EDFEA8010F9B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7f/a8/d103904b.jpg","comment_is_top":false,"comment_ctime":1568996358,"is_pvip":false,"replies":[{"id":51838,"content":"ğŸ‘ğŸ‘ğŸ‘\næœ€å¥½èƒ½è¯´ä¸€ä¸‹ä½ ä¼˜åŒ–äº†å“ªäº›åœ°æ–¹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1569024178,"ip_address":"","comment_id":135070,"utype":1}],"discussion_count":2,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"åšäº†ä¸€ç‚¹ä¼˜åŒ–ï¼Œåˆ°äº† 3s\n\nhttps:&#47;&#47;gist.github.com&#47;vipwzw&#47;382f68995e26a2696e4da8cc5039c595","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468695,"discussion_content":"åç»­æˆ‘ä»¬ä¼šæŠŠæ‰€æœ‰ä»£ç éƒ½å¼€æºå‡ºæ¥çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569495979,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":132474,"user_name":"Lucianoæé‘«","can_delete":false,"product_type":"c1","uid":1329995,"ip_address":"","ucode":"5FBE5F86FD5B2C","user_header":"https://static001.geekbang.org/account/avatar/00/14/4b/4b/97926cba.jpg","comment_is_top":false,"comment_ctime":1568130705,"is_pvip":false,"replies":[{"id":50694,"content":"è¿™ç§é”™è¯¯ä¸€èˆ¬æ˜¯è¿æ¥ä¸­æ–­äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1568165215,"ip_address":"","comment_id":132474,"utype":1}],"discussion_count":2,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"è¯»é•¿åº¦æ•…éšœ read: connection reset by peer ,è¯·é—®ä¸‹è¿™æ˜¯ä¸ºä»€ä¹ˆï¼ŒmacOSç³»ç»Ÿ","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468030,"discussion_content":"ğŸ‘ğŸ‘ğŸ‘\næœ€å¥½èƒ½è¯´ä¸€ä¸‹ä½ ä¼˜åŒ–äº†å“ªäº›åœ°æ–¹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569024178,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1015720,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7f/a8/d103904b.jpg","nickname":"mark","note":"","ucode":"39EDFEA8010F9B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":18133,"discussion_content":"1. è¯»å†™æ·»åŠ äº†bufio 2. ç¼–ç è§£ç ç”¨äº† sync.Pool ä¸»è¦å°±æ˜¯åŠ äº†ä¸€äº›ç¼“å†²ã€‚å…¶å®è¿˜å¯ä»¥ä¼˜åŒ–ï¼Œæ¯”å¦‚åšæ‰¹é‡çš„å‘é€ä¹‹ç±»çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569025392,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":132395,"user_name":"aroll","can_delete":false,"product_type":"c1","uid":1023524,"ip_address":"","ucode":"3A1A1267C88CC3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/9e/24/0d6a7987.jpg","comment_is_top":false,"comment_ctime":1568108905,"is_pvip":false,"replies":[{"id":51008,"content":"æˆ‘æ£€æŸ¥äº†ä¸€ä¸‹è¿™æ®µä»£ç ï¼Œç¡®å®åœ¨å¹¶å‘çš„æ—¶å€™å¯èƒ½å‡ºç°ä½ è¯´çš„é—®é¢˜ï¼ŒåŸå› æ˜¯ï¼Œä»£ç ä¸­ä¿©å¤§çˆ·åªç”¨äº†ä¸€ä¸ªcountæ¥è®¡æ•°ï¼Œå¼ å¤§çˆ·æ”¶åˆ°äº†æ‰€æœ‰çš„å¯¹è¯å°±ç»“æŸäº†ç¨‹åºï¼Œä½†æ˜¯æå¤§çˆ·å¯èƒ½è¿˜æ²¡æ”¶å…¨æ¶ˆæ¯ã€‚\n\næˆ‘å·²ç»ä¿®æ”¹äº†ä»£ç ï¼Œä½ å¯ä»¥å†å‚è€ƒä¸€ä¸‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1568431684,"ip_address":"","comment_id":132395,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"è€å¸ˆï¼Œä½ ç”¨goè¯­è¨€å®ç°çš„ä»£ç ï¼Œæˆ‘æŠŠfmt.Printlnæ”¾å¼€ä¹‹åè·‘äº†ä¸€ä¸‹ï¼Œå‘ç°æœ‰æ¶ˆæ¯ä¸¢å¤±çš„ç°è±¡ï¼Œ&quot; å—¨ï¼åƒé¥±äº†æºœæºœå¼¯å„¿ã€‚&quot;ï¼ˆè¿™ä¸€å¥æ€»æ˜¯å°‘ä¸€æ¬¡ï¼‰ï¼Œ&quot; åˆšåƒã€‚&quot;ï¼ˆè¿™ä¸€å¥æ—¶æœ‰æ—¶æ²¡æœ‰ï¼‰ï¼Œæˆ‘å¯¹goäº†è§£ä¸å¤šï¼Œæ²¡çœ‹å‡ºæ¥å’‹å›äº‹","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466911,"discussion_content":"æˆ‘æ£€æŸ¥äº†ä¸€ä¸‹è¿™æ®µä»£ç ï¼Œç¡®å®åœ¨å¹¶å‘çš„æ—¶å€™å¯èƒ½å‡ºç°ä½ è¯´çš„é—®é¢˜ï¼ŒåŸå› æ˜¯ï¼Œä»£ç ä¸­ä¿©å¤§çˆ·åªç”¨äº†ä¸€ä¸ªcountæ¥è®¡æ•°ï¼Œå¼ å¤§çˆ·æ”¶åˆ°äº†æ‰€æœ‰çš„å¯¹è¯å°±ç»“æŸäº†ç¨‹åºï¼Œä½†æ˜¯æå¤§çˆ·å¯èƒ½è¿˜æ²¡æ”¶å…¨æ¶ˆæ¯ã€‚\n\næˆ‘å·²ç»ä¿®æ”¹äº†ä»£ç ï¼Œä½ å¯ä»¥å†å‚è€ƒä¸€ä¸‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568431684,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":127551,"user_name":"ykkk88","can_delete":false,"product_type":"c1","uid":1068585,"ip_address":"","ucode":"A1BCFC2F0D1022","user_header":"https://static001.geekbang.org/account/avatar/00/10/4e/29/1be3dd40.jpg","comment_is_top":false,"comment_ctime":1566739584,"is_pvip":false,"replies":[{"id":47511,"content":"ä¸ç”¨ç­‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1566868006,"ip_address":"","comment_id":127551,"utype":1}],"discussion_count":2,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"è€å¸ˆ  é‡æ–°çœ‹äº†ä¸‹ä¸Šé¢è¿™ä¸ªä¾‹å­æˆ‘çš„ç†è§£æ˜¯å¼‚æ­¥æ–¹å¼å‘é€æ¶ˆæ¯å§ï¼Œå‘é€å®Œä¸ä¼šç­‰åˆ°æ¶ˆæ¯å›æ¥å†å‘ç¬¬äºŒä¸ªï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464545,"discussion_content":"ä¸ç”¨ç­‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566868006,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1199968,"avatar":"https://static001.geekbang.org/account/avatar/00/12/4f/60/049a20e9.jpg","nickname":"å´å®‡æ™¨","note":"","ucode":"F8F45B7067DF6D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6269,"discussion_content":"é‚£åªæ˜¯åœ¨å‘é€å’Œæ¥æ”¶æ¶ˆæ¯æ—¶æ˜¯å¼‚æ­¥çš„ï¼Œå› ä¸ºæœ‰åºå·ï¼Œå®¢æˆ·ç«¯æ”¶åˆ°åå¯ä»¥æŒ‰åºå·è¿˜åŸé—®ç­”é¡ºåº","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566817869,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":127388,"user_name":"coffee","can_delete":false,"product_type":"c1","uid":1391640,"ip_address":"","ucode":"DF831C481B7949","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/vK7WwQG23CI29w0iamcgetTicMdQ8NsJsQWSXIia3aSUbVE6dqfTiaVtqTdibJu31f7k2BkOSkQianxOUaqojEYP6ic3w/132","comment_is_top":false,"comment_ctime":1566693419,"is_pvip":false,"replies":[{"id":47164,"content":"ğŸ‘ğŸ‘ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1566708993,"ip_address":"","comment_id":127388,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"è€å¸ˆï¼Œå·²å°†å•å·¥é€šè®¯æ”¹æˆäº†åŒå·¥é€šè®¯ï¼Œæ—¶é—´ä¸Šç¡®å®šæœ‰æé«˜ã€‚10ä¸‡æ¬¡å¤§æ¦‚åœ¨3364-4873æ¯«ç§’è¿™ä¸ªåŒºé—´ã€‚\nhttps:&#47;&#47;github.com&#47;swgithub1006&#47;mqlearning\nåè®®ä¸Šçš„ç¡®è¿˜æœ‰ä¼˜åŒ–çš„ç©ºé—´ï¼Œæ¯”å¦‚å€Ÿé‰´ä¸‹protobufçš„è®¾è®¡æ€æƒ³ã€‚","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464545,"discussion_content":"ä¸ç”¨ç­‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566868006,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1199968,"avatar":"https://static001.geekbang.org/account/avatar/00/12/4f/60/049a20e9.jpg","nickname":"å´å®‡æ™¨","note":"","ucode":"F8F45B7067DF6D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6269,"discussion_content":"é‚£åªæ˜¯åœ¨å‘é€å’Œæ¥æ”¶æ¶ˆæ¯æ—¶æ˜¯å¼‚æ­¥çš„ï¼Œå› ä¸ºæœ‰åºå·ï¼Œå®¢æˆ·ç«¯æ”¶åˆ°åå¯ä»¥æŒ‰åºå·è¿˜åŸé—®ç­”é¡ºåº","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566817869,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":127200,"user_name":"è·¯äºº","can_delete":false,"product_type":"c1","uid":1084291,"ip_address":"","ucode":"55FF703DE772D7","user_header":"https://static001.geekbang.org/account/avatar/00/10/8b/83/d2afc837.jpg","comment_is_top":false,"comment_ctime":1566608795,"is_pvip":false,"replies":[{"id":47081,"content":"ä½¿ç”¨Keynoteç»˜åˆ¶çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1566620709,"ip_address":"","comment_id":127200,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"è€å¸ˆçš„è¯¾è®²çš„å¾ˆå¥½ï¼ŒåŸºæœ¬ä¸Šè®²çš„éƒ½æ˜¯ä¸€äº›æ¶ˆæ¯ç›¸å…³çš„è®¾è®¡ç†å¿µï¼Œç«™çš„è§’åº¦ä¹Ÿæ¯”è¾ƒé«˜ï¼Œéå¸¸å®ç”¨ã€‚è¯·é—®ä¸‹è€å¸ˆæ–‡ä¸­çš„å›¾ç”¨çš„ä»€ä¹ˆå·¥å…·ç”»çš„","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464470,"discussion_content":"ğŸ‘ğŸ‘ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566708993,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":129609,"user_name":"å¤§ç™½å…ˆç”Ÿ","can_delete":false,"product_type":"c1","uid":1615335,"ip_address":"","ucode":"7EF709EF8FFE6B","user_header":"https://static001.geekbang.org/account/avatar/00/18/a5/e7/ed0a0131.jpg","comment_is_top":false,"comment_ctime":1567171879,"is_pvip":false,"replies":[{"id":48361,"content":"æ— è®ºæ˜¯ç”¨å‰ç½®é•¿åº¦è¿˜æ˜¯åˆ†éš”ç¬¦çš„æ–¹å¼æ–­å¥ï¼Œä¸€ä¸ª10Kçš„æ¶ˆæ¯ï¼Œå½“æ¥æ”¶æ–¹æ”¶åˆ°å‰8Kçš„æ—¶å€™ï¼Œå®ƒæ˜¯è‚¯å®šå¯ä»¥çŸ¥é“â€œè¿™æ¡æ¶ˆæ¯æˆ‘åªæ”¶åˆ°äº†ä¸€éƒ¨åˆ†â€ï¼Œè¿™ä¸ªæ—¶å€™å®ƒå°±ä»€ä¹ˆéƒ½ä¸åšï¼Œç­‰ç€æŠŠå‰©ä¸‹çš„éƒ¨åˆ†æ”¶å…¨å°±è¡Œäº†ã€‚\n\nä½ åœ¨è¿™é‡Œé¢æœ‰ä¸€ä¸ªè¯¯åŒºå°±æ˜¯ï¼Œæ¯æ¬¡è¯»åˆ°ä¸€éƒ¨åˆ†æ•°æ®ï¼Œä¸æ˜¯è¯´ä¸€å®šéè¦æŠŠè¿™éƒ¨åˆ†æ•°æ®å…¨éƒ½è§£æå®Œï¼Œèƒ½è§£æå‡ºæ¥æ•´å¥çš„æ¶ˆæ¯ï¼Œæ‹¿å»å¤„ç†ã€‚å‰©ä¸‹åŠå¥çš„æ‰”åœ¨é‚£å„¿ä¸ç®¡ï¼Œç­‰ç€ååŠå¥æ¥äº†å†è§£æå°±è¡Œäº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1567214143,"ip_address":"","comment_id":129609,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"è€å¸ˆï¼Œæˆ‘åŸºäºä¹‹å‰åŠåŒ…ç²˜åŒ…çš„é—®é¢˜è¿˜æƒ³é—®ä¸€ä¸ªé—®é¢˜ã€‚ä¹‹å‰æ‚¨è¯´å¦‚æœæŒ‰ç…§å’±ä»¬è¯¾ä¸Šè®²çš„è‡ªå®šä¹‰æ¶ˆæ¯æ ¼å¼ï¼Œä¸ä¼šå‡ºç°è¿™ç§æƒ…å†µã€‚æˆ‘æƒ³é—®ï¼Œå¦‚æœå‡ºç°æ¦‚å¿µä¸Šçš„åŠåŒ…æƒ…å†µï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œsoketé¦–å‘ç¼“å­˜å»8kï¼Œæˆ‘è¿™è¾¹å†™å…¥ä¸€æ¡10kçš„æ¶ˆæ¯ï¼Œé‚£ä¹ˆæ¥æ”¶æ–¹æŒ‰ç…§å’±ä»¬å®šä¹‰çš„æ ¼å¼è§£æï¼Œé‚£ä¸å°±æ˜¯è§£æåˆ°äº†å‰8kçš„æ•°æ®ï¼Œé‚£ä¹ˆæŒ‰ç…§æ•°æ®é’±çš„åŒ…é•¿åº¦è§£æçš„æ—¶å€™ï¼Œæ•°æ®çš„é•¿åº¦å°±ä¸å¤Ÿï¼Œè¿™æ ·ä¸ä¼šå¼•èµ·æ•°æ®é”™è¯¯ä¹ˆ","like_count":1,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465565,"discussion_content":"æ— è®ºæ˜¯ç”¨å‰ç½®é•¿åº¦è¿˜æ˜¯åˆ†éš”ç¬¦çš„æ–¹å¼æ–­å¥ï¼Œä¸€ä¸ª10Kçš„æ¶ˆæ¯ï¼Œå½“æ¥æ”¶æ–¹æ”¶åˆ°å‰8Kçš„æ—¶å€™ï¼Œå®ƒæ˜¯è‚¯å®šå¯ä»¥çŸ¥é“â€œè¿™æ¡æ¶ˆæ¯æˆ‘åªæ”¶åˆ°äº†ä¸€éƒ¨åˆ†â€ï¼Œè¿™ä¸ªæ—¶å€™å®ƒå°±ä»€ä¹ˆéƒ½ä¸åšï¼Œç­‰ç€æŠŠå‰©ä¸‹çš„éƒ¨åˆ†æ”¶å…¨å°±è¡Œäº†ã€‚\n\nä½ åœ¨è¿™é‡Œé¢æœ‰ä¸€ä¸ªè¯¯åŒºå°±æ˜¯ï¼Œæ¯æ¬¡è¯»åˆ°ä¸€éƒ¨åˆ†æ•°æ®ï¼Œä¸æ˜¯è¯´ä¸€å®šéè¦æŠŠè¿™éƒ¨åˆ†æ•°æ®å…¨éƒ½è§£æå®Œï¼Œèƒ½è§£æå‡ºæ¥æ•´å¥çš„æ¶ˆæ¯ï¼Œæ‹¿å»å¤„ç†ã€‚å‰©ä¸‹åŠå¥çš„æ‰”åœ¨é‚£å„¿ä¸ç®¡ï¼Œç­‰ç€ååŠå¥æ¥äº†å†è§£æå°±è¡Œäº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567214143,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":128607,"user_name":"å¤§ç™½å…ˆç”Ÿ","can_delete":false,"product_type":"c1","uid":1615335,"ip_address":"","ucode":"7EF709EF8FFE6B","user_header":"https://static001.geekbang.org/account/avatar/00/18/a5/e7/ed0a0131.jpg","comment_is_top":false,"comment_ctime":1566912873,"is_pvip":false,"replies":[{"id":47843,"content":"å…¶å®ï¼Œå¹¶æ²¡æœ‰æ‰€è°“çš„ç²˜åŒ…æˆ–è€…åŠåŒ…é—®é¢˜ï¼Œæˆ‘åœ¨ä¹‹å‰çš„è¯¾ç¨‹ä¸­è®²è¿‡ï¼Œä¾é æ•°æ®æµçš„è‡ªç„¶åˆ†éš”æ¥æ–­å¥æ˜¯ä¸é è°±çš„ï¼ŒTCPåè®®æœ¬èº«ä¹Ÿæ²¡æœ‰æ”¯æŒæˆ–è€…ä¿è¯ï¼Œæ¯æ¬¡å‘å‡ºçš„çš„ä¸€æ‰¹æ•°æ®ï¼Œå¯¹æ–¹ä¸€å®šä¹Ÿä¼šâ€œä¸€æ¬¡æ€§â€çš„æ”¶åˆ°èµ·æ­¢ä½ç½®ç›¸åŒçš„ä¸€æ‰¹æ•°æ®ï¼Œå®é™…ä¸Štcpè¿æ¥é€šé“ä»–æ˜¯ä¸€ä¸ªåŒå‘æµï¼Œæµä¸­çš„æ•°æ®æ˜¯æ²¡æœ‰ä»€ä¹ˆå¤©ç„¶çš„åˆ†å‰²çš„ï¼Œä¹Ÿæ ¹æœ¬ä¸ä¼šä¿è¯ä»€ä¹ˆâ€œæ‰¹â€ã€‚æ‰€ä»¥ï¼Œæ‰€è°“çš„â€œç²˜åŒ…â€æˆ–è€…â€œåŠåŒ…â€éƒ½æ˜¯ä¼ªæ¦‚å¿µï¼Œåªè¦ä½ åœ¨åè®®è®¾è®¡ä¸Šï¼Œèƒ½å¤ŸæŒ‰ç…§æˆ‘ä»¬æä¾›çš„æ–¹æ³•è¿›è¡Œæ–­å¥ï¼Œå³ä½¿å‡ºç°â€œç²˜åŒ…åŠåŒ…â€ï¼Œä¾ç„¶å¯ä»¥æ­£ç¡®çš„ä¼ è¾“æ•°æ®ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1566973276,"ip_address":"","comment_id":128607,"utype":1}],"discussion_count":2,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"è€å¸ˆï¼Œæˆ‘åœ¨å­¦ä¹ javaå®ç°tcpå‘é€æ•°æ®æ—¶ï¼Œæˆ‘æœ‰çœ‹åˆ°æœ‰è®²è§£tcpç²˜åŒ…æˆ–è€…æ˜¯åŠåŒ…çš„æƒ…å†µï¼Œæˆ‘çœ‹çš„æ–‡ç« è¯´æ˜¯å¯èƒ½æ˜¯å› ä¸ºä¸€æ¬¡å†™å…¥çš„æ•°æ®å¤§äºsoketå‘é€ç¼“å†²åŒºã€‚ä¼šå¯¼è‡´æ¥æ”¶æ–¹æ¥å—æ•°æ®æœ‰é—®é¢˜ã€‚ä½†æ˜¯æˆ‘å†™ä¾‹å­çš„æ—¶å€™æ²¡æœ‰å‘ç°è¿™ä¸ªé—®é¢˜ï¼Œè¯·é—®ï¼Œæ€ä¹ˆèƒ½å¼„å‡ºè¿™ä¸¤ç§æƒ…å†µï¼Ÿå‡å¦‚ä¸ç”¨nettyæ—¶ï¼Œåˆ©ç”¨soketèƒ½å¦‚ä½•å¤„ç†è¿™ç§é—®é¢˜ã€‚","like_count":1,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465020,"discussion_content":"å…¶å®ï¼Œå¹¶æ²¡æœ‰æ‰€è°“çš„ç²˜åŒ…æˆ–è€…åŠåŒ…é—®é¢˜ï¼Œæˆ‘åœ¨ä¹‹å‰çš„è¯¾ç¨‹ä¸­è®²è¿‡ï¼Œä¾é æ•°æ®æµçš„è‡ªç„¶åˆ†éš”æ¥æ–­å¥æ˜¯ä¸é è°±çš„ï¼ŒTCPåè®®æœ¬èº«ä¹Ÿæ²¡æœ‰æ”¯æŒæˆ–è€…ä¿è¯ï¼Œæ¯æ¬¡å‘å‡ºçš„çš„ä¸€æ‰¹æ•°æ®ï¼Œå¯¹æ–¹ä¸€å®šä¹Ÿä¼šâ€œä¸€æ¬¡æ€§â€çš„æ”¶åˆ°èµ·æ­¢ä½ç½®ç›¸åŒçš„ä¸€æ‰¹æ•°æ®ï¼Œå®é™…ä¸Štcpè¿æ¥é€šé“ä»–æ˜¯ä¸€ä¸ªåŒå‘æµï¼Œæµä¸­çš„æ•°æ®æ˜¯æ²¡æœ‰ä»€ä¹ˆå¤©ç„¶çš„åˆ†å‰²çš„ï¼Œä¹Ÿæ ¹æœ¬ä¸ä¼šä¿è¯ä»€ä¹ˆâ€œæ‰¹â€ã€‚æ‰€ä»¥ï¼Œæ‰€è°“çš„â€œç²˜åŒ…â€æˆ–è€…â€œåŠåŒ…â€éƒ½æ˜¯ä¼ªæ¦‚å¿µï¼Œåªè¦ä½ åœ¨åè®®è®¾è®¡ä¸Šï¼Œèƒ½å¤ŸæŒ‰ç…§æˆ‘ä»¬æä¾›çš„æ–¹æ³•è¿›è¡Œæ–­å¥ï¼Œå³ä½¿å‡ºç°â€œç²˜åŒ…åŠåŒ…â€ï¼Œä¾ç„¶å¯ä»¥æ­£ç¡®çš„ä¼ è¾“æ•°æ®ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566973276,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1485489,"avatar":"https://static001.geekbang.org/account/avatar/00/16/aa/b1/c834aab5.jpg","nickname":"å¼ å°å‹‹","note":"","ucode":"8C5E434EF53BF4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":38140,"discussion_content":"TCP ä¸æ˜¯åˆ†æ¬¡å‘åŒ…çš„ä¹ˆ  ä¸å­˜åœ¨ç²˜åŒ…æˆ–è€…åŠåŒ…é—®é¢˜ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571734384,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":181991,"user_name":"Geek_498c16","can_delete":false,"product_type":"c1","uid":1716617,"ip_address":"","ucode":"616913785EFF06","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTL6ibvATzI5FKR6r71GU3CjdlPkZYYSBYBtNibIGENFZDnqajW7LOPKZXUPWSsjt8OiaxTZ0neT8LwQQ/132","comment_is_top":false,"comment_ctime":1582688776,"is_pvip":false,"replies":[{"id":70562,"content":"è¾¾åˆ°ç³»ç»Ÿå¤„ç†èƒ½åŠ›æé™ä¹‹åï¼Œæ¶ˆæ¯å°±ä¼šå †ç§¯åˆ°è¿™é‡Œï¼Œè¿™æ ·ä¹Ÿå®¢è§‚ä¸Šèµ·äº†ä¸€ä¸ªèƒŒå‹çš„æ•ˆæœã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1582766609,"ip_address":"","comment_id":181991,"utype":1}],"discussion_count":2,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"Requests Queue ä¸ä¼šå­˜åœ¨ WriteThreadå¤„ç†æ…¢å¯¼è‡´é˜Ÿåˆ—å¡æ»¡çš„æƒ…å†µå—? çœ‹äº†ä¸‹æµç¨‹Requests Queue çš„å–æ˜¯æ¯”æ”¾æ…¢çš„.","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":485189,"discussion_content":"è¾¾åˆ°ç³»ç»Ÿå¤„ç†èƒ½åŠ›æé™ä¹‹åï¼Œæ¶ˆæ¯å°±ä¼šå †ç§¯åˆ°è¿™é‡Œï¼Œè¿™æ ·ä¹Ÿå®¢è§‚ä¸Šèµ·äº†ä¸€ä¸ªèƒŒå‹çš„æ•ˆæœã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582766609,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1716617,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTL6ibvATzI5FKR6r71GU3CjdlPkZYYSBYBtNibIGENFZDnqajW7LOPKZXUPWSsjt8OiaxTZ0neT8LwQQ/132","nickname":"Geek_498c16","note":"","ucode":"616913785EFF06","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":187841,"discussion_content":"ä½ è¿™é‡Œçš„é˜Ÿåˆ—æ˜¯æœ‰ç•Œçš„å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582772371,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":136564,"user_name":"Six Days","can_delete":false,"product_type":"c1","uid":1322463,"ip_address":"","ucode":"8587F2EEFFFD11","user_header":"https://static001.geekbang.org/account/avatar/00/14/2d/df/4949b250.jpg","comment_is_top":false,"comment_ctime":1569472990,"is_pvip":false,"replies":[{"id":52404,"content":"åç»­æˆ‘ä»¬ä¼šæŠŠæ‰€æœ‰ä»£ç éƒ½å¼€æºå‡ºæ¥çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1569495979,"ip_address":"","comment_id":136564,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"è€å¸ˆï¼Œå¸Œæœ›èƒ½ç»™å‡ºä¸€ä»½java ç‰ˆæœ¬çš„å‚è€ƒä»£ç ä»¥ä¾›å­¦ä¹ ï¼Œè°¢è°¢ä½ äº†","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":485189,"discussion_content":"è¾¾åˆ°ç³»ç»Ÿå¤„ç†èƒ½åŠ›æé™ä¹‹åï¼Œæ¶ˆæ¯å°±ä¼šå †ç§¯åˆ°è¿™é‡Œï¼Œè¿™æ ·ä¹Ÿå®¢è§‚ä¸Šèµ·äº†ä¸€ä¸ªèƒŒå‹çš„æ•ˆæœã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582766609,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1716617,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTL6ibvATzI5FKR6r71GU3CjdlPkZYYSBYBtNibIGENFZDnqajW7LOPKZXUPWSsjt8OiaxTZ0neT8LwQQ/132","nickname":"Geek_498c16","note":"","ucode":"616913785EFF06","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":187841,"discussion_content":"ä½ è¿™é‡Œçš„é˜Ÿåˆ—æ˜¯æœ‰ç•Œçš„å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582772371,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":135070,"user_name":"mark","can_delete":false,"product_type":"c1","uid":1015720,"ip_address":"","ucode":"39EDFEA8010F9B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7f/a8/d103904b.jpg","comment_is_top":false,"comment_ctime":1568996358,"is_pvip":false,"replies":[{"id":51838,"content":"ğŸ‘ğŸ‘ğŸ‘\næœ€å¥½èƒ½è¯´ä¸€ä¸‹ä½ ä¼˜åŒ–äº†å“ªäº›åœ°æ–¹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1569024178,"ip_address":"","comment_id":135070,"utype":1}],"discussion_count":2,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"åšäº†ä¸€ç‚¹ä¼˜åŒ–ï¼Œåˆ°äº† 3s\n\nhttps:&#47;&#47;gist.github.com&#47;vipwzw&#47;382f68995e26a2696e4da8cc5039c595","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468030,"discussion_content":"ğŸ‘ğŸ‘ğŸ‘\næœ€å¥½èƒ½è¯´ä¸€ä¸‹ä½ ä¼˜åŒ–äº†å“ªäº›åœ°æ–¹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569024178,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1015720,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7f/a8/d103904b.jpg","nickname":"mark","note":"","ucode":"39EDFEA8010F9B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":18133,"discussion_content":"1. è¯»å†™æ·»åŠ äº†bufio 2. ç¼–ç è§£ç ç”¨äº† sync.Pool ä¸»è¦å°±æ˜¯åŠ äº†ä¸€äº›ç¼“å†²ã€‚å…¶å®è¿˜å¯ä»¥ä¼˜åŒ–ï¼Œæ¯”å¦‚åšæ‰¹é‡çš„å‘é€ä¹‹ç±»çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569025392,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":132474,"user_name":"Lucianoæé‘«","can_delete":false,"product_type":"c1","uid":1329995,"ip_address":"","ucode":"5FBE5F86FD5B2C","user_header":"https://static001.geekbang.org/account/avatar/00/14/4b/4b/97926cba.jpg","comment_is_top":false,"comment_ctime":1568130705,"is_pvip":false,"replies":[{"id":50694,"content":"è¿™ç§é”™è¯¯ä¸€èˆ¬æ˜¯è¿æ¥ä¸­æ–­äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1568165215,"ip_address":"","comment_id":132474,"utype":1}],"discussion_count":2,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"è¯»é•¿åº¦æ•…éšœ read: connection reset by peer ,è¯·é—®ä¸‹è¿™æ˜¯ä¸ºä»€ä¹ˆï¼ŒmacOSç³»ç»Ÿ","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466960,"discussion_content":"è¿™ç§é”™è¯¯ä¸€èˆ¬æ˜¯è¿æ¥ä¸­æ–­äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568165215,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1329995,"avatar":"https://static001.geekbang.org/account/avatar/00/14/4b/4b/97926cba.jpg","nickname":"Lucianoæé‘«","note":"","ucode":"5FBE5F86FD5B2C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":10080,"discussion_content":"æˆ‘åœ¨Linuxæµ‹è¯•æ²¡é—®é¢˜ macOSä¸Šä¼šæŠ¥ä¸Šé¢çš„é”™ï¼Œä¸€èˆ¬ä»€ä¹ˆæƒ…å†µä¼šå¯¼è‡´è¢«åŠ¨ä¸­æ–­å‘¢ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯éƒ½åœ¨æœ¬åœ°ï¼Œå¶å°”è¿˜ä¼šæŠ¥EOF","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568262074,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":132395,"user_name":"aroll","can_delete":false,"product_type":"c1","uid":1023524,"ip_address":"","ucode":"3A1A1267C88CC3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/9e/24/0d6a7987.jpg","comment_is_top":false,"comment_ctime":1568108905,"is_pvip":false,"replies":[{"id":51008,"content":"æˆ‘æ£€æŸ¥äº†ä¸€ä¸‹è¿™æ®µä»£ç ï¼Œç¡®å®åœ¨å¹¶å‘çš„æ—¶å€™å¯èƒ½å‡ºç°ä½ è¯´çš„é—®é¢˜ï¼ŒåŸå› æ˜¯ï¼Œä»£ç ä¸­ä¿©å¤§çˆ·åªç”¨äº†ä¸€ä¸ªcountæ¥è®¡æ•°ï¼Œå¼ å¤§çˆ·æ”¶åˆ°äº†æ‰€æœ‰çš„å¯¹è¯å°±ç»“æŸäº†ç¨‹åºï¼Œä½†æ˜¯æå¤§çˆ·å¯èƒ½è¿˜æ²¡æ”¶å…¨æ¶ˆæ¯ã€‚\n\næˆ‘å·²ç»ä¿®æ”¹äº†ä»£ç ï¼Œä½ å¯ä»¥å†å‚è€ƒä¸€ä¸‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1568431684,"ip_address":"","comment_id":132395,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"è€å¸ˆï¼Œä½ ç”¨goè¯­è¨€å®ç°çš„ä»£ç ï¼Œæˆ‘æŠŠfmt.Printlnæ”¾å¼€ä¹‹åè·‘äº†ä¸€ä¸‹ï¼Œå‘ç°æœ‰æ¶ˆæ¯ä¸¢å¤±çš„ç°è±¡ï¼Œ&quot; å—¨ï¼åƒé¥±äº†æºœæºœå¼¯å„¿ã€‚&quot;ï¼ˆè¿™ä¸€å¥æ€»æ˜¯å°‘ä¸€æ¬¡ï¼‰ï¼Œ&quot; åˆšåƒã€‚&quot;ï¼ˆè¿™ä¸€å¥æ—¶æœ‰æ—¶æ²¡æœ‰ï¼‰ï¼Œæˆ‘å¯¹goäº†è§£ä¸å¤šï¼Œæ²¡çœ‹å‡ºæ¥å’‹å›äº‹","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466960,"discussion_content":"è¿™ç§é”™è¯¯ä¸€èˆ¬æ˜¯è¿æ¥ä¸­æ–­äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568165215,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1329995,"avatar":"https://static001.geekbang.org/account/avatar/00/14/4b/4b/97926cba.jpg","nickname":"Lucianoæé‘«","note":"","ucode":"5FBE5F86FD5B2C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":10080,"discussion_content":"æˆ‘åœ¨Linuxæµ‹è¯•æ²¡é—®é¢˜ macOSä¸Šä¼šæŠ¥ä¸Šé¢çš„é”™ï¼Œä¸€èˆ¬ä»€ä¹ˆæƒ…å†µä¼šå¯¼è‡´è¢«åŠ¨ä¸­æ–­å‘¢ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯éƒ½åœ¨æœ¬åœ°ï¼Œå¶å°”è¿˜ä¼šæŠ¥EOF","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568262074,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":127551,"user_name":"ykkk88","can_delete":false,"product_type":"c1","uid":1068585,"ip_address":"","ucode":"A1BCFC2F0D1022","user_header":"https://static001.geekbang.org/account/avatar/00/10/4e/29/1be3dd40.jpg","comment_is_top":false,"comment_ctime":1566739584,"is_pvip":false,"replies":[{"id":47511,"content":"ä¸ç”¨ç­‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1566868006,"ip_address":"","comment_id":127551,"utype":1}],"discussion_count":2,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"è€å¸ˆ  é‡æ–°çœ‹äº†ä¸‹ä¸Šé¢è¿™ä¸ªä¾‹å­æˆ‘çš„ç†è§£æ˜¯å¼‚æ­¥æ–¹å¼å‘é€æ¶ˆæ¯å§ï¼Œå‘é€å®Œä¸ä¼šç­‰åˆ°æ¶ˆæ¯å›æ¥å†å‘ç¬¬äºŒä¸ªï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466911,"discussion_content":"æˆ‘æ£€æŸ¥äº†ä¸€ä¸‹è¿™æ®µä»£ç ï¼Œç¡®å®åœ¨å¹¶å‘çš„æ—¶å€™å¯èƒ½å‡ºç°ä½ è¯´çš„é—®é¢˜ï¼ŒåŸå› æ˜¯ï¼Œä»£ç ä¸­ä¿©å¤§çˆ·åªç”¨äº†ä¸€ä¸ªcountæ¥è®¡æ•°ï¼Œå¼ å¤§çˆ·æ”¶åˆ°äº†æ‰€æœ‰çš„å¯¹è¯å°±ç»“æŸäº†ç¨‹åºï¼Œä½†æ˜¯æå¤§çˆ·å¯èƒ½è¿˜æ²¡æ”¶å…¨æ¶ˆæ¯ã€‚\n\næˆ‘å·²ç»ä¿®æ”¹äº†ä»£ç ï¼Œä½ å¯ä»¥å†å‚è€ƒä¸€ä¸‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568431684,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":127388,"user_name":"coffee","can_delete":false,"product_type":"c1","uid":1391640,"ip_address":"","ucode":"DF831C481B7949","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/vK7WwQG23CI29w0iamcgetTicMdQ8NsJsQWSXIia3aSUbVE6dqfTiaVtqTdibJu31f7k2BkOSkQianxOUaqojEYP6ic3w/132","comment_is_top":false,"comment_ctime":1566693419,"is_pvip":false,"replies":[{"id":47164,"content":"ğŸ‘ğŸ‘ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1566708993,"ip_address":"","comment_id":127388,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"è€å¸ˆï¼Œå·²å°†å•å·¥é€šè®¯æ”¹æˆäº†åŒå·¥é€šè®¯ï¼Œæ—¶é—´ä¸Šç¡®å®šæœ‰æé«˜ã€‚10ä¸‡æ¬¡å¤§æ¦‚åœ¨3364-4873æ¯«ç§’è¿™ä¸ªåŒºé—´ã€‚\nhttps:&#47;&#47;github.com&#47;swgithub1006&#47;mqlearning\nåè®®ä¸Šçš„ç¡®è¿˜æœ‰ä¼˜åŒ–çš„ç©ºé—´ï¼Œæ¯”å¦‚å€Ÿé‰´ä¸‹protobufçš„è®¾è®¡æ€æƒ³ã€‚","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464470,"discussion_content":"ğŸ‘ğŸ‘ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566708993,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":127200,"user_name":"è·¯äºº","can_delete":false,"product_type":"c1","uid":1084291,"ip_address":"","ucode":"55FF703DE772D7","user_header":"https://static001.geekbang.org/account/avatar/00/10/8b/83/d2afc837.jpg","comment_is_top":false,"comment_ctime":1566608795,"is_pvip":false,"replies":[{"id":47081,"content":"ä½¿ç”¨Keynoteç»˜åˆ¶çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1566620709,"ip_address":"","comment_id":127200,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"è€å¸ˆçš„è¯¾è®²çš„å¾ˆå¥½ï¼ŒåŸºæœ¬ä¸Šè®²çš„éƒ½æ˜¯ä¸€äº›æ¶ˆæ¯ç›¸å…³çš„è®¾è®¡ç†å¿µï¼Œç«™çš„è§’åº¦ä¹Ÿæ¯”è¾ƒé«˜ï¼Œéå¸¸å®ç”¨ã€‚è¯·é—®ä¸‹è€å¸ˆæ–‡ä¸­çš„å›¾ç”¨çš„ä»€ä¹ˆå·¥å…·ç”»çš„","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464372,"discussion_content":"ä½¿ç”¨Keynoteç»˜åˆ¶çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566620709,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":128691,"user_name":"ä»˜æ°¸å¼º","can_delete":false,"product_type":"c1","uid":1419544,"ip_address":"","ucode":"898998296EBD56","user_header":"https://static001.geekbang.org/account/avatar/00/15/a9/18/393a841d.jpg","comment_is_top":false,"comment_ctime":1566952077,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"è¿™ä¹ˆçœ‹æ¥JMQåŸºæœ¬ä¸Šæ˜¯æŠŠæ‰€æœ‰æ¶‰åŠioç­‰å¾…åœ°æ–¹æ­¥éª¤è¿›è¡Œå¼‚æ­¥è®¾è®¡ã€‚å­¦åˆ°äº†ï¼æ„Ÿè°¢åˆ†äº«ï¼ğŸ¤”","like_count":18},{"had_liked":false,"id":143344,"user_name":"è°¢æ¸…","can_delete":false,"product_type":"c1","uid":1069849,"ip_address":"","ucode":"31B2862A790CEB","user_header":"https://static001.geekbang.org/account/avatar/00/10/53/19/dec74631.jpg","comment_is_top":false,"comment_ctime":1571671174,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"åˆ·äº†ä¸‹è¯„è®ºï¼Œé’èˆŸå†™çš„æœ€å¥½ï¼Œå…¶æ¬¡Martin\né’èˆŸ\nhttps:&#47;&#47;github.com&#47;qingzhou413&#47;geektime-mq-rpc.git\nMartin\nhttps:&#47;&#47;github.com&#47;MartinDai&#47;mq-in-action&#47;blob&#47;master&#47;src&#47;main&#47;java&#47;com&#47;doodl6&#47;mq&#47;MeetInRpc.java","like_count":12},{"had_liked":false,"id":127240,"user_name":"è®¸ç«¥ç«¥","can_delete":false,"product_type":"c1","uid":1003005,"ip_address":"","ucode":"4B799C0C6BC678","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4d/fd/0aa0e39f.jpg","comment_is_top":false,"comment_ctime":1566618427,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"è€å¸ˆè¯´å¾—å¾ˆå¥½ï¼Œæƒ³æˆä¸ºä¸€ä¸ªçœŸæˆçš„é«˜æ‰‹ï¼Œç†è§£å¹¶å®è·µè¿™äº›åŸºæœ¬åŸç†ï¼Œæ˜¯å¿…ä¸å¯å°‘çš„ï¼Œä¸è¦åªåœç•™åœ¨çŸ¥è¯†çš„è¡¨é¢ï¼Œè¦é¢†ä¼šæŠ€æœ¯èƒŒåçš„æ€æƒ³ï¼Œæ‰èƒ½æ´»å­¦æ´»ç”¨ï¼Œå®è·µè‚¯å®šæ˜¯å°‘ä¸äº†çš„ï¼ŒåŠ æ²¹ã€‚","like_count":5},{"had_liked":false,"id":181068,"user_name":"å‡¡","can_delete":false,"product_type":"c1","uid":1721168,"ip_address":"","ucode":"80C2A6452AB9EA","user_header":"https://static001.geekbang.org/account/avatar/00/1a/43/50/abb4ca1e.jpg","comment_is_top":false,"comment_ctime":1582469319,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"å€Ÿé‰´äº† MySql çš„æ€æƒ³ï¼Œè·Ÿæ–°æ•°æ®å…ˆå†™å…¥ Buffer poolï¼Œç„¶åå®šæœŸå°†å†…å­˜çš„æ•°æ®åˆ·åˆ°ç£ç›˜ï¼Œè¿™æ ·å‡å°‘äº†ç£ç›˜ IO çš„æ“ä½œé¢‘ç‡ï¼Œæé«˜äº†æ€§èƒ½","like_count":2},{"had_liked":false,"id":271466,"user_name":"è‡ªæ‹ä¸å¼€ç¾é¢œ","can_delete":false,"product_type":"c1","uid":1925935,"ip_address":"","ucode":"711CF52CF68434","user_header":"https://static001.geekbang.org/account/avatar/00/1d/63/2f/f7e5b8c4.jpg","comment_is_top":false,"comment_ctime":1609654813,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"ä¸€é—®ä¸€ç­”ï¼Œæ˜¯åŠåŒå·¥è€Œä¸æ˜¯å•å·¥ã€‚","like_count":1},{"had_liked":false,"id":128298,"user_name":"å¤§é­”ç‹æ±ªæ±ª","can_delete":false,"product_type":"c1","uid":1010680,"ip_address":"","ucode":"4B205CB52FC95F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6b/f8/b4da7936.jpg","comment_is_top":false,"comment_ctime":1566869491,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"æ•´ä¸ªè®¾è®¡æ–¹æ¡ˆç®€å•çš„çœ‹æ˜¯å‡ ä¸ªæ¶ˆè´¹ç”Ÿäº§æ¨¡å‹çš„ç»„åˆğŸ˜","like_count":1},{"had_liked":false,"id":127198,"user_name":"leslie","can_delete":false,"product_type":"c1","uid":1324255,"ip_address":"","ucode":"798E7C1CC98CC2","user_header":"https://static001.geekbang.org/account/avatar/00/14/34/df/64e3d533.jpg","comment_is_top":false,"comment_ctime":1566608008,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"\tä»Šå¤©è€å¸ˆé‡æ–°æ¢³ç†ä¹‹åçŸ¥é“å¤§è‡´éœ€è¦å“ªäº›çŸ¥è¯†äº†ï¼Œå€Ÿç€ä¹‹å‰è€å¸ˆçš„æ•™è¯²åšä¸ªæ€»ç»“ï¼š\n\tåŸºç¡€çŸ¥è¯†\n\t1.ç½‘ç»œæ–¹é¢ï¼šæ¶ˆæ¯é˜Ÿåˆ—æ‰€ç”¨çš„çŸ¥è¯†ç¡®å®åªæ˜¯ä½¿ç”¨åœ¨åº”ç”¨å±‚å…³äºå…¨åŒå·¥è¿™å—çŸ¥è¯†ï¼Œå…¶å®ƒå±‚æ¬¡æš‚ä¸æ¶‰åŠ\n\t2.ç¨‹åºï¼šæˆ‘ä»¬åªéœ€è¦æŒæ¡å¸¸è§„çš„ç¼–ç¨‹æ‰‹æ³•å°±è¡Œï¼›è‡³äºæˆ‘ä»¬å»ç”¨ä½•ç§è¯­è¨€å®ç°ä¸é‡è¦çš„ï¼Œé‡è¦çš„æ˜¯åŸºäºé—®é¢˜é€šè¿‡ä»£ç é«˜æ•ˆçš„è§£å†³å°±è¡Œ\n\t3.æ“ä½œç³»ç»Ÿï¼šæˆ‘ä»¬éœ€è¦æ˜ç™½ç³»ç»Ÿè¿›ç¨‹ä¹‹é—´çš„è°ƒç”¨ï¼Œä»è€Œæ‰èƒ½åˆç†çš„å»å®ç°å¼‚æ­¥å’Œå¹¶å‘\n\tè¯¾ç¨‹çš„å­¦ä¹ \n\t1.è€å¸ˆå…¶å®æ˜¯æœ€åˆåœ¨ä¼ æˆæ¶ˆæ¯é˜Ÿåˆ—çš„ç”±æ¥ã€æ¡†æ¶ã€ä¸åŒæ¶ˆæ¯é˜Ÿåˆ—çš„ä½¿ç”¨åœºæ™¯\n\t2.æ•™æˆæ•´ä¸ªæ¶ˆæ¯é˜Ÿåˆ—çš„ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ä¹‹é—´çš„å…³ç³»å’Œç‰¹æ€§ï¼šè®©æˆ‘ä»¬ç†è§£æ¶ˆæ¯é˜Ÿåˆ—\n\t3.é€šè¿‡ä¸Šè¿°åŸºç¡€ï¼šåé¢çš„è¯¾ç¨‹å°±æ˜¯ä¸æ–­çš„é€šè¿‡çœŸå®ç°çŠ¶ç†è®º+å®é™…æ¡ˆä¾‹å»æ“ä½œåŠ¨æ‰‹ï¼›æ¸”æˆäºˆäº†ï¼Œå°±è¦å¼€å§‹è®©æˆ‘ä»¬æ•é±¼äº†ï¼Œ\n\té€šè¿‡æˆ‘ä»¬æ•é±¼çš„é—®é¢˜å»ä¿®æ­£æˆ‘ä»¬çš„é”™è¯¯ï¼Œæå‡æˆ‘ä»¬æ•é±¼çš„èƒ½åŠ›ã€‚è¿™æ˜¯æˆ‘å­¦ä¹ åˆ°ç°åœ¨å¯¹äºè¯¾ç¨‹å­¦ä¹ çš„æ„Ÿå—ã€‚\n\tä»£ç èƒ½åŠ›åå¼±ï¼šä¸è¿‡åé¢ä¼šå°½åŠ›å»åšï¼›æ¯•ç«Ÿè¯¾ç¨‹æ¶‰åŠçš„ä¸œè¥¿å’ŒçŸ¥è¯†ï¼Œä¸ºäº†å­¦ä¹ å¥½è¯¾ç¨‹ä¸€ç›´åœ¨è·Ÿåˆ˜è€å¸ˆè¯¾å¹¶ç”¨åˆ˜è€å¸ˆçš„å­¦ä¹ æ–¹å¼åœ¨è¡¥å……å­¦ä¹ ä¸­æ‰€ä¸è¶³ï¼›\n\tçŸ¥è¯†çš„è¯¾ç¨‹æ˜¯è·Ÿä¸Šäº†ï¼Œä»£ç çš„å®è·µè½ä¸‹äº†ï¼›å°½åŠ›å»åšå°½åŠ›è·Ÿä¸Šè€å¸ˆçš„æ­¥ä¼å§ï¼Œå¸Œæœ›è€å¸ˆè¯¾ç¨‹ç»“è¯¾æ—¶èƒ½è¾¾åˆ°è‡ªå·±æœ€åˆçš„å­¦ä¹ ç›®æ ‡ã€‚","like_count":1},{"had_liked":false,"id":393649,"user_name":"lion_fly","can_delete":false,"product_type":"c1","uid":1060242,"ip_address":"å¹¿ä¸œ","ucode":"FCFD6B66C01B83","user_header":"https://static001.geekbang.org/account/avatar/00/10/2d/92/287f99db.jpg","comment_is_top":false,"comment_ctime":1724483195,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"æ‰€è°“çš„åŒå·¥ï¼Œå…¶å®å°±æ˜¯é€šä¿¡çš„ä¸¤ç«¯éƒ½æ˜¯serverï¼Œè€Œä¸æ˜¯ä¼ ç»Ÿçš„C&#47;Sçš„æ¨¡å¼","like_count":0},{"had_liked":false,"id":370820,"user_name":"å…¨éº¦å°é¢åŒ…","can_delete":false,"product_type":"c1","uid":1086413,"ip_address":"ä¸Šæµ·","ucode":"823C65BF366097","user_header":"https://static001.geekbang.org/account/avatar/00/10/93/cd/dbafc7d1.jpg","comment_is_top":false,"comment_ctime":1679303978,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"è€å¸ˆï¼Œæˆ‘è¿˜æœ‰ä¸€ä¸ªé—®é¢˜æƒ³è¯·æ•™ï¼Œå°±æ˜¯å¦‚ä½•å®ç°&quot;ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ä¹‹é—´çš„æ— é”æ²Ÿé€š&quot;ã€‚å¦‚æœæ–‡ä¸­çš„&quot;è¯·æ±‚é˜Ÿåˆ—&quot;ç”¨BlockingQueueå®ç°ï¼Œé‚£ä¹ˆå®ƒçš„&quot;æ·»åŠ \\è·å–&quot;æ“ä½œï¼Œéƒ½æ˜¯å¸¦é”çš„ï¼Œæ— è®ºéœ€ä¸éœ€è¦è·å–é”ç›¸å…³çš„ä¿¡å·é‡ï¼Œè¿›è¡Œé˜»å¡ç­‰å¾…ã€‚ä¾‹å¦‚offeræ–¹æ³•ç›´æ¥è¿”å›trueæˆ–falseï¼Œä½†ä¹Ÿæ˜¯è¦å…ˆè·å–é”çš„ã€‚è¿™æ˜¯å› ä¸ºå¯èƒ½å­˜åœ¨å¤šä¸ªçº¿ç¨‹ç«äº‰&quot;å†™\\è¯»&quot;ï¼Œé€ æˆé˜Ÿåˆ—å†…éƒ¨çŠ¶æ€å¼‚å¸¸ã€‚ç„¶åæˆ‘çœ‹äº†è¯„è®ºï¼Œè€å¸ˆè¯´åŸºäºWALï¼Œå¯ä»¥å®ç°ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ä¹‹é—´çš„æ— é”æ²Ÿé€šï¼Œèƒ½è¯¦ç»†è¯´è¯´å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":370816,"user_name":"å…¨éº¦å°é¢åŒ…","can_delete":false,"product_type":"c1","uid":1086413,"ip_address":"ä¸Šæµ·","ucode":"823C65BF366097","user_header":"https://static001.geekbang.org/account/avatar/00/10/93/cd/dbafc7d1.jpg","comment_is_top":false,"comment_ctime":1679303239,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"è€å¸ˆï¼Œæˆ‘æƒ³é—®ä¸‹&quot;WriteThread&quot;å•çº¿ç¨‹çš„æ„ä¹‰ã€‚æ–‡ä¸­è¯´ï¼Œç”±äºè¦ä¿è¯æ¶ˆæ¯çš„æœ‰åºæ€§ï¼Œæ‰€ä»¥ï¼Œä½¿ç”¨å•çº¿ç¨‹çš„WriteThread ä»è¯·æ±‚é˜Ÿåˆ—ä¸­æŒ‰ç…§é¡ºåºæ¥è·å–è¯·æ±‚ã€‚ä½†å°†è¯·æ±‚æ”¾å…¥&quot;è¯·æ±‚é˜Ÿåˆ—&quot;çš„çº¿ç¨‹ä¸æ­¢ä¸€ä¸ªå§(Netty çš„ IO çº¿ç¨‹)ï¼Ÿæ‰€ä»¥å³ä½¿WriteThreadå•çº¿ç¨‹ï¼Œä¹Ÿä¸èƒ½ä¿è¯å…¨å±€çš„é¡ºåºï¼Œè¿™æ ·çš„è¯ï¼Œå•WriteThreadçº¿ç¨‹ï¼Œæœ‰ç‰¹åˆ«çš„æ„ä¹‰å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":128691,"user_name":"ä»˜æ°¸å¼º","can_delete":false,"product_type":"c1","uid":1419544,"ip_address":"","ucode":"898998296EBD56","user_header":"https://static001.geekbang.org/account/avatar/00/15/a9/18/393a841d.jpg","comment_is_top":false,"comment_ctime":1566952077,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"è¿™ä¹ˆçœ‹æ¥JMQåŸºæœ¬ä¸Šæ˜¯æŠŠæ‰€æœ‰æ¶‰åŠioç­‰å¾…åœ°æ–¹æ­¥éª¤è¿›è¡Œå¼‚æ­¥è®¾è®¡ã€‚å­¦åˆ°äº†ï¼æ„Ÿè°¢åˆ†äº«ï¼ğŸ¤”","like_count":18},{"had_liked":false,"id":143344,"user_name":"è°¢æ¸…","can_delete":false,"product_type":"c1","uid":1069849,"ip_address":"","ucode":"31B2862A790CEB","user_header":"https://static001.geekbang.org/account/avatar/00/10/53/19/dec74631.jpg","comment_is_top":false,"comment_ctime":1571671174,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"åˆ·äº†ä¸‹è¯„è®ºï¼Œé’èˆŸå†™çš„æœ€å¥½ï¼Œå…¶æ¬¡Martin\né’èˆŸ\nhttps:&#47;&#47;github.com&#47;qingzhou413&#47;geektime-mq-rpc.git\nMartin\nhttps:&#47;&#47;github.com&#47;MartinDai&#47;mq-in-action&#47;blob&#47;master&#47;src&#47;main&#47;java&#47;com&#47;doodl6&#47;mq&#47;MeetInRpc.java","like_count":12},{"had_liked":false,"id":127240,"user_name":"è®¸ç«¥ç«¥","can_delete":false,"product_type":"c1","uid":1003005,"ip_address":"","ucode":"4B799C0C6BC678","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4d/fd/0aa0e39f.jpg","comment_is_top":false,"comment_ctime":1566618427,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"è€å¸ˆè¯´å¾—å¾ˆå¥½ï¼Œæƒ³æˆä¸ºä¸€ä¸ªçœŸæˆçš„é«˜æ‰‹ï¼Œç†è§£å¹¶å®è·µè¿™äº›åŸºæœ¬åŸç†ï¼Œæ˜¯å¿…ä¸å¯å°‘çš„ï¼Œä¸è¦åªåœç•™åœ¨çŸ¥è¯†çš„è¡¨é¢ï¼Œè¦é¢†ä¼šæŠ€æœ¯èƒŒåçš„æ€æƒ³ï¼Œæ‰èƒ½æ´»å­¦æ´»ç”¨ï¼Œå®è·µè‚¯å®šæ˜¯å°‘ä¸äº†çš„ï¼ŒåŠ æ²¹ã€‚","like_count":5},{"had_liked":false,"id":181068,"user_name":"å‡¡","can_delete":false,"product_type":"c1","uid":1721168,"ip_address":"","ucode":"80C2A6452AB9EA","user_header":"https://static001.geekbang.org/account/avatar/00/1a/43/50/abb4ca1e.jpg","comment_is_top":false,"comment_ctime":1582469319,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"å€Ÿé‰´äº† MySql çš„æ€æƒ³ï¼Œè·Ÿæ–°æ•°æ®å…ˆå†™å…¥ Buffer poolï¼Œç„¶åå®šæœŸå°†å†…å­˜çš„æ•°æ®åˆ·åˆ°ç£ç›˜ï¼Œè¿™æ ·å‡å°‘äº†ç£ç›˜ IO çš„æ“ä½œé¢‘ç‡ï¼Œæé«˜äº†æ€§èƒ½","like_count":2},{"had_liked":false,"id":271466,"user_name":"è‡ªæ‹ä¸å¼€ç¾é¢œ","can_delete":false,"product_type":"c1","uid":1925935,"ip_address":"","ucode":"711CF52CF68434","user_header":"https://static001.geekbang.org/account/avatar/00/1d/63/2f/f7e5b8c4.jpg","comment_is_top":false,"comment_ctime":1609654813,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"ä¸€é—®ä¸€ç­”ï¼Œæ˜¯åŠåŒå·¥è€Œä¸æ˜¯å•å·¥ã€‚","like_count":1},{"had_liked":false,"id":128298,"user_name":"å¤§é­”ç‹æ±ªæ±ª","can_delete":false,"product_type":"c1","uid":1010680,"ip_address":"","ucode":"4B205CB52FC95F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6b/f8/b4da7936.jpg","comment_is_top":false,"comment_ctime":1566869491,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"æ•´ä¸ªè®¾è®¡æ–¹æ¡ˆç®€å•çš„çœ‹æ˜¯å‡ ä¸ªæ¶ˆè´¹ç”Ÿäº§æ¨¡å‹çš„ç»„åˆğŸ˜","like_count":1},{"had_liked":false,"id":127198,"user_name":"leslie","can_delete":false,"product_type":"c1","uid":1324255,"ip_address":"","ucode":"798E7C1CC98CC2","user_header":"https://static001.geekbang.org/account/avatar/00/14/34/df/64e3d533.jpg","comment_is_top":false,"comment_ctime":1566608008,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"\tä»Šå¤©è€å¸ˆé‡æ–°æ¢³ç†ä¹‹åçŸ¥é“å¤§è‡´éœ€è¦å“ªäº›çŸ¥è¯†äº†ï¼Œå€Ÿç€ä¹‹å‰è€å¸ˆçš„æ•™è¯²åšä¸ªæ€»ç»“ï¼š\n\tåŸºç¡€çŸ¥è¯†\n\t1.ç½‘ç»œæ–¹é¢ï¼šæ¶ˆæ¯é˜Ÿåˆ—æ‰€ç”¨çš„çŸ¥è¯†ç¡®å®åªæ˜¯ä½¿ç”¨åœ¨åº”ç”¨å±‚å…³äºå…¨åŒå·¥è¿™å—çŸ¥è¯†ï¼Œå…¶å®ƒå±‚æ¬¡æš‚ä¸æ¶‰åŠ\n\t2.ç¨‹åºï¼šæˆ‘ä»¬åªéœ€è¦æŒæ¡å¸¸è§„çš„ç¼–ç¨‹æ‰‹æ³•å°±è¡Œï¼›è‡³äºæˆ‘ä»¬å»ç”¨ä½•ç§è¯­è¨€å®ç°ä¸é‡è¦çš„ï¼Œé‡è¦çš„æ˜¯åŸºäºé—®é¢˜é€šè¿‡ä»£ç é«˜æ•ˆçš„è§£å†³å°±è¡Œ\n\t3.æ“ä½œç³»ç»Ÿï¼šæˆ‘ä»¬éœ€è¦æ˜ç™½ç³»ç»Ÿè¿›ç¨‹ä¹‹é—´çš„è°ƒç”¨ï¼Œä»è€Œæ‰èƒ½åˆç†çš„å»å®ç°å¼‚æ­¥å’Œå¹¶å‘\n\tè¯¾ç¨‹çš„å­¦ä¹ \n\t1.è€å¸ˆå…¶å®æ˜¯æœ€åˆåœ¨ä¼ æˆæ¶ˆæ¯é˜Ÿåˆ—çš„ç”±æ¥ã€æ¡†æ¶ã€ä¸åŒæ¶ˆæ¯é˜Ÿåˆ—çš„ä½¿ç”¨åœºæ™¯\n\t2.æ•™æˆæ•´ä¸ªæ¶ˆæ¯é˜Ÿåˆ—çš„ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ä¹‹é—´çš„å…³ç³»å’Œç‰¹æ€§ï¼šè®©æˆ‘ä»¬ç†è§£æ¶ˆæ¯é˜Ÿåˆ—\n\t3.é€šè¿‡ä¸Šè¿°åŸºç¡€ï¼šåé¢çš„è¯¾ç¨‹å°±æ˜¯ä¸æ–­çš„é€šè¿‡çœŸå®ç°çŠ¶ç†è®º+å®é™…æ¡ˆä¾‹å»æ“ä½œåŠ¨æ‰‹ï¼›æ¸”æˆäºˆäº†ï¼Œå°±è¦å¼€å§‹è®©æˆ‘ä»¬æ•é±¼äº†ï¼Œ\n\té€šè¿‡æˆ‘ä»¬æ•é±¼çš„é—®é¢˜å»ä¿®æ­£æˆ‘ä»¬çš„é”™è¯¯ï¼Œæå‡æˆ‘ä»¬æ•é±¼çš„èƒ½åŠ›ã€‚è¿™æ˜¯æˆ‘å­¦ä¹ åˆ°ç°åœ¨å¯¹äºè¯¾ç¨‹å­¦ä¹ çš„æ„Ÿå—ã€‚\n\tä»£ç èƒ½åŠ›åå¼±ï¼šä¸è¿‡åé¢ä¼šå°½åŠ›å»åšï¼›æ¯•ç«Ÿè¯¾ç¨‹æ¶‰åŠçš„ä¸œè¥¿å’ŒçŸ¥è¯†ï¼Œä¸ºäº†å­¦ä¹ å¥½è¯¾ç¨‹ä¸€ç›´åœ¨è·Ÿåˆ˜è€å¸ˆè¯¾å¹¶ç”¨åˆ˜è€å¸ˆçš„å­¦ä¹ æ–¹å¼åœ¨è¡¥å……å­¦ä¹ ä¸­æ‰€ä¸è¶³ï¼›\n\tçŸ¥è¯†çš„è¯¾ç¨‹æ˜¯è·Ÿä¸Šäº†ï¼Œä»£ç çš„å®è·µè½ä¸‹äº†ï¼›å°½åŠ›å»åšå°½åŠ›è·Ÿä¸Šè€å¸ˆçš„æ­¥ä¼å§ï¼Œå¸Œæœ›è€å¸ˆè¯¾ç¨‹ç»“è¯¾æ—¶èƒ½è¾¾åˆ°è‡ªå·±æœ€åˆçš„å­¦ä¹ ç›®æ ‡ã€‚","like_count":1},{"had_liked":false,"id":393649,"user_name":"lion_fly","can_delete":false,"product_type":"c1","uid":1060242,"ip_address":"å¹¿ä¸œ","ucode":"FCFD6B66C01B83","user_header":"https://static001.geekbang.org/account/avatar/00/10/2d/92/287f99db.jpg","comment_is_top":false,"comment_ctime":1724483195,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"æ‰€è°“çš„åŒå·¥ï¼Œå…¶å®å°±æ˜¯é€šä¿¡çš„ä¸¤ç«¯éƒ½æ˜¯serverï¼Œè€Œä¸æ˜¯ä¼ ç»Ÿçš„C&#47;Sçš„æ¨¡å¼","like_count":0},{"had_liked":false,"id":370820,"user_name":"å…¨éº¦å°é¢åŒ…","can_delete":false,"product_type":"c1","uid":1086413,"ip_address":"ä¸Šæµ·","ucode":"823C65BF366097","user_header":"https://static001.geekbang.org/account/avatar/00/10/93/cd/dbafc7d1.jpg","comment_is_top":false,"comment_ctime":1679303978,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"è€å¸ˆï¼Œæˆ‘è¿˜æœ‰ä¸€ä¸ªé—®é¢˜æƒ³è¯·æ•™ï¼Œå°±æ˜¯å¦‚ä½•å®ç°&quot;ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ä¹‹é—´çš„æ— é”æ²Ÿé€š&quot;ã€‚å¦‚æœæ–‡ä¸­çš„&quot;è¯·æ±‚é˜Ÿåˆ—&quot;ç”¨BlockingQueueå®ç°ï¼Œé‚£ä¹ˆå®ƒçš„&quot;æ·»åŠ \\è·å–&quot;æ“ä½œï¼Œéƒ½æ˜¯å¸¦é”çš„ï¼Œæ— è®ºéœ€ä¸éœ€è¦è·å–é”ç›¸å…³çš„ä¿¡å·é‡ï¼Œè¿›è¡Œé˜»å¡ç­‰å¾…ã€‚ä¾‹å¦‚offeræ–¹æ³•ç›´æ¥è¿”å›trueæˆ–falseï¼Œä½†ä¹Ÿæ˜¯è¦å…ˆè·å–é”çš„ã€‚è¿™æ˜¯å› ä¸ºå¯èƒ½å­˜åœ¨å¤šä¸ªçº¿ç¨‹ç«äº‰&quot;å†™\\è¯»&quot;ï¼Œé€ æˆé˜Ÿåˆ—å†…éƒ¨çŠ¶æ€å¼‚å¸¸ã€‚ç„¶åæˆ‘çœ‹äº†è¯„è®ºï¼Œè€å¸ˆè¯´åŸºäºWALï¼Œå¯ä»¥å®ç°ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ä¹‹é—´çš„æ— é”æ²Ÿé€šï¼Œèƒ½è¯¦ç»†è¯´è¯´å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":370816,"user_name":"å…¨éº¦å°é¢åŒ…","can_delete":false,"product_type":"c1","uid":1086413,"ip_address":"ä¸Šæµ·","ucode":"823C65BF366097","user_header":"https://static001.geekbang.org/account/avatar/00/10/93/cd/dbafc7d1.jpg","comment_is_top":false,"comment_ctime":1679303239,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"è€å¸ˆï¼Œæˆ‘æƒ³é—®ä¸‹&quot;WriteThread&quot;å•çº¿ç¨‹çš„æ„ä¹‰ã€‚æ–‡ä¸­è¯´ï¼Œç”±äºè¦ä¿è¯æ¶ˆæ¯çš„æœ‰åºæ€§ï¼Œæ‰€ä»¥ï¼Œä½¿ç”¨å•çº¿ç¨‹çš„WriteThread ä»è¯·æ±‚é˜Ÿåˆ—ä¸­æŒ‰ç…§é¡ºåºæ¥è·å–è¯·æ±‚ã€‚ä½†å°†è¯·æ±‚æ”¾å…¥&quot;è¯·æ±‚é˜Ÿåˆ—&quot;çš„çº¿ç¨‹ä¸æ­¢ä¸€ä¸ªå§(Netty çš„ IO çº¿ç¨‹)ï¼Ÿæ‰€ä»¥å³ä½¿WriteThreadå•çº¿ç¨‹ï¼Œä¹Ÿä¸èƒ½ä¿è¯å…¨å±€çš„é¡ºåºï¼Œè¿™æ ·çš„è¯ï¼Œå•WriteThreadçº¿ç¨‹ï¼Œæœ‰ç‰¹åˆ«çš„æ„ä¹‰å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":348882,"user_name":"god","can_delete":false,"product_type":"c1","uid":1997758,"ip_address":"","ucode":"09CB6D17451CBC","user_header":"https://static001.geekbang.org/account/avatar/00/1e/7b/be/12735117.jpg","comment_is_top":false,"comment_ctime":1655508386,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100032301,"comment_content":"æœ‰æ²¡æœ‰Javaéœ€è¦å®ç°çš„ä¾‹å­ï¼Œè°¢è°¢","like_count":0},{"had_liked":false,"id":326942,"user_name":"ææ–‡åš","can_delete":false,"product_type":"c1","uid":2845349,"ip_address":"","ucode":"C238A840DA60DE","user_header":"","comment_is_top":false,"comment_ctime":1639789439,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100032301,"comment_content":"åˆ·ç›˜å’Œå¤åˆ¶æ€ä¹ˆä¿è¯æ•°æ®ä¸€è‡´æ€§çš„ï¼Œå¤åˆ¶æˆåŠŸäº†ï¼Œåˆ·ç›˜å¤±è´¥äº†ã€‚è¿™æ—¶å€™åˆšå¥½å®•æœºäº†ï¼Œé‚£æ•°æ®æ€ä¹ˆä¿è¯ä¸€è‡´æ€§çš„","like_count":0},{"had_liked":false,"id":326192,"user_name":"é”é”","can_delete":false,"product_type":"c1","uid":2562434,"ip_address":"","ucode":"FCBA8CF5AB2325","user_header":"https://static001.geekbang.org/account/avatar/00/27/19/82/5acaca40.jpg","comment_is_top":false,"comment_ctime":1639408601,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100032301,"comment_content":"è€å¸ˆï¼Œæœ‰æ²¡æœ‰å‚è€ƒredis? ä¸Šä¸€ä¸ªè¯¾ç¨‹å­¦çš„redisæ„Ÿè§‰å’Œjmqçš„å·®ä¸å¤š(ï½¡ï½¥Ï‰ï½¥ï½¡)ï¾‰â™¡","like_count":0},{"had_liked":false,"id":322956,"user_name":"å‡¯æ–‡å°çŒª","can_delete":false,"product_type":"c1","uid":1980201,"ip_address":"","ucode":"36D8AD0229547F","user_header":"https://static001.geekbang.org/account/avatar/00/1e/37/29/b3af57a7.jpg","comment_is_top":false,"comment_ctime":1637669417,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100032301,"comment_content":"è¿™é‡Œæœ‰ä¸ªé—®é¢˜ ä¸€ç›´æ²¡ææ‡‚å°±æ˜¯IOThreadä½¿ç”¨æ¯è¯·æ±‚æ¯çº¿ç¨‹çš„æ–¹å¼ æ˜¯å¦‚ä½•ä¿è¯é˜Ÿåˆ—å†…æ¶ˆæ¯æœ‰åºçš„ï¼Ÿ\næ¯”æ–¹è¯´åŒä¸€ä¸ªå®¢æˆ·ç«¯å‘é€ä¸¤æ¡æ¶ˆæ¯&lt;queue1, msg1&gt;, &lt;queue1, msg2&gt; å¯¹brokeræ¥è¯´ä¼šä½¿ç”¨ä¸¤ä¸ªçº¿ç¨‹æ¥æ¥æ”¶è¯·æ±‚æ‰”åˆ°request cache è¿™é‡Œæ²¡çœ‹å‡ºå¦‚ä½•ä¿è¯å•é˜Ÿåˆ—ä¸‹å¦‚ä½•åšåˆ°å› æœä¸€è‡´ã€‚\n\nä»¥kafkaæ¥è¯´ï¼Œæˆ‘ä»¬ä¼šå°†ä¸¥æ ¼æœ‰åºçš„æ¶ˆæ¯æ‰”åˆ°åŒä¸€ä¸ªåˆ†åŒºé‡Œã€‚æƒ³é—®ä¸€ä¸‹JMQæ˜¯å¦‚ä½•ä¿è¯çš„","like_count":0},{"had_liked":false,"id":307490,"user_name":"SinKitwah","can_delete":false,"product_type":"c1","uid":1478242,"ip_address":"","ucode":"BC39A39E17C95E","user_header":"https://static001.geekbang.org/account/avatar/00/16/8e/62/435148c1.jpg","comment_is_top":false,"comment_ctime":1629120720,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100032301,"comment_content":"è¿™ä¼¼ä¹ä¼šå­˜åœ¨ä»èŠ‚ç‚¹å¤„ç†å®Œå¹¶å“åº”ç»™ä¸»èŠ‚ç‚¹ï¼Œä½†æ˜¯è¿™ä¸ªä¸»èŠ‚ç‚¹çªç„¶æŒ‚æ‰çš„æƒ…å†µã€‚ç„¶åå¯¼è‡´å®¢æˆ·ç«¯é‡å‘â€¦è¿™ä¸æ˜¯é‡å¤å‘é€äº†å—","like_count":0},{"had_liked":false,"id":296185,"user_name":"Geek_fjfjjf04","can_delete":false,"product_type":"c1","uid":1972839,"ip_address":"","ucode":"848DE73097F4D7","user_header":"","comment_is_top":false,"comment_ctime":1622797199,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100032301,"comment_content":"å¼ å¤§çˆ·åœ¨èƒ¡åŒå£ç­‰ç€ ...\nç¢°è§ä¸€ä¸ªæå¤§çˆ·:127.0.0.1:57913\nè€—æ—¶:  9.482526528s\nä½¿ç”¨ä¸Šé¢çš„ä»£ç ï¼Œæˆ‘åœ¨macä¸Šè¿è¡Œå‡ºæ¥æ€ä¹ˆ9ç§’å¤š","like_count":0},{"had_liked":false,"id":281601,"user_name":"Geek_1d0a96","can_delete":false,"product_type":"c1","uid":2293684,"ip_address":"","ucode":"C2B4D608DB6B12","user_header":"","comment_is_top":false,"comment_ctime":1614822756,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100032301,"comment_content":"jmqçœ‹èµ·æ¥åƒredis6.0","like_count":0},{"had_liked":false,"id":279096,"user_name":"Simple life","can_delete":false,"product_type":"c1","uid":1571460,"ip_address":"","ucode":"1902D7F72FB43F","user_header":"https://static001.geekbang.org/account/avatar/00/17/fa/84/f01d203a.jpg","comment_is_top":false,"comment_ctime":1613619676,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100032301,"comment_content":"ç”Ÿäº§è€…ä¹Ÿå¯èƒ½å› ä¸ºç½‘ç»œåŸå› å¯¼è‡´æ²¡æœ‰æ”¶åˆ°æˆåŠŸå“åº”å¯¼è‡´é‡å‘æ¶ˆæ¯ï¼ŒMQå¯èƒ½è¦å¢åŠ å¯¹æ¶ˆæ¯IDçš„ç»´æŠ¤ï¼Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨","like_count":0},{"had_liked":false,"id":277970,"user_name":"Edward","can_delete":false,"product_type":"c1","uid":2249379,"ip_address":"","ucode":"D7485A8A89761C","user_header":"https://static001.geekbang.org/account/avatar/00/22/52/a3/28f6ade2.jpg","comment_is_top":false,"comment_ctime":1612686569,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100032301,"comment_content":"å­¦ä»¥è‡´ç”¨ï¼Œå—æ•™","like_count":0},{"had_liked":false,"id":277898,"user_name":"Heaven","can_delete":false,"product_type":"c1","uid":1694207,"ip_address":"","ucode":"FA33FBCC66C911","user_header":"https://static001.geekbang.org/account/avatar/00/19/d9/ff/b23018a6.jpg","comment_is_top":false,"comment_ctime":1612664529,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100032301,"comment_content":"åˆšçœ‹è§è¿˜æœ‰å¯¹åº”çš„ç¼–ç¨‹é¢˜,ç”¨Nettyç®€å•å®ç°äº†ä¸€ä¸‹,æ€§èƒ½ä¸Šå¯èƒ½è¿˜æ˜¯æœ‰äº›å·®è·\nhttps:&#47;&#47;github.com&#47;HeavenXin&#47;geektime_message_queue&#47;tree&#47;master&#47;src13&#47;talk","like_count":0},{"had_liked":false,"id":348882,"user_name":"god","can_delete":false,"product_type":"c1","uid":1997758,"ip_address":"","ucode":"09CB6D17451CBC","user_header":"https://static001.geekbang.org/account/avatar/00/1e/7b/be/12735117.jpg","comment_is_top":false,"comment_ctime":1655508386,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100032301,"comment_content":"æœ‰æ²¡æœ‰Javaéœ€è¦å®ç°çš„ä¾‹å­ï¼Œè°¢è°¢","like_count":0},{"had_liked":false,"id":326942,"user_name":"ææ–‡åš","can_delete":false,"product_type":"c1","uid":2845349,"ip_address":"","ucode":"C238A840DA60DE","user_header":"","comment_is_top":false,"comment_ctime":1639789439,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100032301,"comment_content":"åˆ·ç›˜å’Œå¤åˆ¶æ€ä¹ˆä¿è¯æ•°æ®ä¸€è‡´æ€§çš„ï¼Œå¤åˆ¶æˆåŠŸäº†ï¼Œåˆ·ç›˜å¤±è´¥äº†ã€‚è¿™æ—¶å€™åˆšå¥½å®•æœºäº†ï¼Œé‚£æ•°æ®æ€ä¹ˆä¿è¯ä¸€è‡´æ€§çš„","like_count":0},{"had_liked":false,"id":326192,"user_name":"é”é”","can_delete":false,"product_type":"c1","uid":2562434,"ip_address":"","ucode":"FCBA8CF5AB2325","user_header":"https://static001.geekbang.org/account/avatar/00/27/19/82/5acaca40.jpg","comment_is_top":false,"comment_ctime":1639408601,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100032301,"comment_content":"è€å¸ˆï¼Œæœ‰æ²¡æœ‰å‚è€ƒredis? ä¸Šä¸€ä¸ªè¯¾ç¨‹å­¦çš„redisæ„Ÿè§‰å’Œjmqçš„å·®ä¸å¤š(ï½¡ï½¥Ï‰ï½¥ï½¡)ï¾‰â™¡","like_count":0},{"had_liked":false,"id":322956,"user_name":"å‡¯æ–‡å°çŒª","can_delete":false,"product_type":"c1","uid":1980201,"ip_address":"","ucode":"36D8AD0229547F","user_header":"https://static001.geekbang.org/account/avatar/00/1e/37/29/b3af57a7.jpg","comment_is_top":false,"comment_ctime":1637669417,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100032301,"comment_content":"è¿™é‡Œæœ‰ä¸ªé—®é¢˜ ä¸€ç›´æ²¡ææ‡‚å°±æ˜¯IOThreadä½¿ç”¨æ¯è¯·æ±‚æ¯çº¿ç¨‹çš„æ–¹å¼ æ˜¯å¦‚ä½•ä¿è¯é˜Ÿåˆ—å†…æ¶ˆæ¯æœ‰åºçš„ï¼Ÿ\næ¯”æ–¹è¯´åŒä¸€ä¸ªå®¢æˆ·ç«¯å‘é€ä¸¤æ¡æ¶ˆæ¯&lt;queue1, msg1&gt;, &lt;queue1, msg2&gt; å¯¹brokeræ¥è¯´ä¼šä½¿ç”¨ä¸¤ä¸ªçº¿ç¨‹æ¥æ¥æ”¶è¯·æ±‚æ‰”åˆ°request cache è¿™é‡Œæ²¡çœ‹å‡ºå¦‚ä½•ä¿è¯å•é˜Ÿåˆ—ä¸‹å¦‚ä½•åšåˆ°å› æœä¸€è‡´ã€‚\n\nä»¥kafkaæ¥è¯´ï¼Œæˆ‘ä»¬ä¼šå°†ä¸¥æ ¼æœ‰åºçš„æ¶ˆæ¯æ‰”åˆ°åŒä¸€ä¸ªåˆ†åŒºé‡Œã€‚æƒ³é—®ä¸€ä¸‹JMQæ˜¯å¦‚ä½•ä¿è¯çš„","like_count":0},{"had_liked":false,"id":307490,"user_name":"SinKitwah","can_delete":false,"product_type":"c1","uid":1478242,"ip_address":"","ucode":"BC39A39E17C95E","user_header":"https://static001.geekbang.org/account/avatar/00/16/8e/62/435148c1.jpg","comment_is_top":false,"comment_ctime":1629120720,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100032301,"comment_content":"è¿™ä¼¼ä¹ä¼šå­˜åœ¨ä»èŠ‚ç‚¹å¤„ç†å®Œå¹¶å“åº”ç»™ä¸»èŠ‚ç‚¹ï¼Œä½†æ˜¯è¿™ä¸ªä¸»èŠ‚ç‚¹çªç„¶æŒ‚æ‰çš„æƒ…å†µã€‚ç„¶åå¯¼è‡´å®¢æˆ·ç«¯é‡å‘â€¦è¿™ä¸æ˜¯é‡å¤å‘é€äº†å—","like_count":0},{"had_liked":false,"id":296185,"user_name":"Geek_fjfjjf04","can_delete":false,"product_type":"c1","uid":1972839,"ip_address":"","ucode":"848DE73097F4D7","user_header":"","comment_is_top":false,"comment_ctime":1622797199,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100032301,"comment_content":"å¼ å¤§çˆ·åœ¨èƒ¡åŒå£ç­‰ç€ ...\nç¢°è§ä¸€ä¸ªæå¤§çˆ·:127.0.0.1:57913\nè€—æ—¶:  9.482526528s\nä½¿ç”¨ä¸Šé¢çš„ä»£ç ï¼Œæˆ‘åœ¨macä¸Šè¿è¡Œå‡ºæ¥æ€ä¹ˆ9ç§’å¤š","like_count":0},{"had_liked":false,"id":281601,"user_name":"Geek_1d0a96","can_delete":false,"product_type":"c1","uid":2293684,"ip_address":"","ucode":"C2B4D608DB6B12","user_header":"","comment_is_top":false,"comment_ctime":1614822756,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100032301,"comment_content":"jmqçœ‹èµ·æ¥åƒredis6.0","like_count":0},{"had_liked":false,"id":279096,"user_name":"Simple life","can_delete":false,"product_type":"c1","uid":1571460,"ip_address":"","ucode":"1902D7F72FB43F","user_header":"https://static001.geekbang.org/account/avatar/00/17/fa/84/f01d203a.jpg","comment_is_top":false,"comment_ctime":1613619676,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100032301,"comment_content":"ç”Ÿäº§è€…ä¹Ÿå¯èƒ½å› ä¸ºç½‘ç»œåŸå› å¯¼è‡´æ²¡æœ‰æ”¶åˆ°æˆåŠŸå“åº”å¯¼è‡´é‡å‘æ¶ˆæ¯ï¼ŒMQå¯èƒ½è¦å¢åŠ å¯¹æ¶ˆæ¯IDçš„ç»´æŠ¤ï¼Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨","like_count":0},{"had_liked":false,"id":277970,"user_name":"Edward","can_delete":false,"product_type":"c1","uid":2249379,"ip_address":"","ucode":"D7485A8A89761C","user_header":"https://static001.geekbang.org/account/avatar/00/22/52/a3/28f6ade2.jpg","comment_is_top":false,"comment_ctime":1612686569,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100032301,"comment_content":"å­¦ä»¥è‡´ç”¨ï¼Œå—æ•™","like_count":0},{"had_liked":false,"id":277898,"user_name":"Heaven","can_delete":false,"product_type":"c1","uid":1694207,"ip_address":"","ucode":"FA33FBCC66C911","user_header":"https://static001.geekbang.org/account/avatar/00/19/d9/ff/b23018a6.jpg","comment_is_top":false,"comment_ctime":1612664529,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100032301,"comment_content":"åˆšçœ‹è§è¿˜æœ‰å¯¹åº”çš„ç¼–ç¨‹é¢˜,ç”¨Nettyç®€å•å®ç°äº†ä¸€ä¸‹,æ€§èƒ½ä¸Šå¯èƒ½è¿˜æ˜¯æœ‰äº›å·®è·\nhttps:&#47;&#47;github.com&#47;HeavenXin&#47;geektime_message_queue&#47;tree&#47;master&#47;src13&#47;talk","like_count":0},{"had_liked":false,"id":239095,"user_name":"é¢‡å¿’å¦¥","can_delete":false,"product_type":"c1","uid":1026448,"ip_address":"","ucode":"AA86AD1049BC2E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a9/90/0c5ed3d9.jpg","comment_is_top":false,"comment_ctime":1596434369,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":7,"product_id":100032301,"comment_content":"è€—æ—¶:  40.354851ms\n\nhttps:&#47;&#47;gist.github.com&#47;chanjarster&#47;a3b6957ad1f4117038722372cafbecb9","like_count":0},{"had_liked":false,"id":198967,"user_name":"è¿œé¹","can_delete":false,"product_type":"c1","uid":1110723,"ip_address":"","ucode":"37B06413D88BEC","user_header":"https://static001.geekbang.org/account/avatar/00/10/f2/c3/f18e4507.jpg","comment_is_top":false,"comment_ctime":1585474603,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":7,"product_id":100032301,"comment_content":"è®²çš„å¾ˆå¯¹ï¼Œå¾ˆå¤šçŸ¥è¯†ç‚¹è¡¨é¢ä¸Šå’Œmqæ²¡æœ‰å…³ç³»ï¼Œå®é™…ä¸Šæ˜¯å¯¹çŸ¥è¯†æŒæ¡ç¨‹åº¦ä¸å¤Ÿ","like_count":0},{"had_liked":false,"id":197016,"user_name":"å‡Œç©ºé£èµ·çš„å‰ªåˆ€è…¿","can_delete":false,"product_type":"c1","uid":1243680,"ip_address":"","ucode":"16FBBF4A3B54C6","user_header":"https://static001.geekbang.org/account/avatar/00/12/fa/20/0f06b080.jpg","comment_is_top":false,"comment_ctime":1585349677,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":7,"product_id":100032301,"comment_content":"æè€å¸ˆæ‚¨å¥½ï¼ŒJMQä¸­request queueä¸éœ€è¦åŠ é”å•Šï¼Ÿ","like_count":0},{"had_liked":false,"id":143930,"user_name":"å¼ ä¸‰ä¸°","can_delete":false,"product_type":"c1","uid":1155275,"ip_address":"","ucode":"3A6215A40B3B21","user_header":"https://static001.geekbang.org/account/avatar/00/11/a0/cb/aab3b3e7.jpg","comment_is_top":false,"comment_ctime":1571808795,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":7,"product_id":100032301,"comment_content":"ç†è§£è€å¸ˆçš„è®²è¯¾æ€è·¯ï¼Œå°±å› ä¸ºè€å¸ˆè¿™ä¹ˆè®²æˆ‘æ‰è´­ä¹°è¿™ä¸ªä¸“æ ï¼Œéå¸¸å€¼ï¼","like_count":0},{"had_liked":false,"id":137809,"user_name":"ä¸ä¸å†é™©è®°","can_delete":false,"product_type":"c1","uid":1661704,"ip_address":"","ucode":"A43829E454C067","user_header":"https://static001.geekbang.org/account/avatar/00/19/5b/08/b0b0db05.jpg","comment_is_top":false,"comment_ctime":1569859805,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":7,"product_id":100032301,"comment_content":"æ— ç”¨ä¹‹ç”¨ï¼Œæ–¹ä¸ºå¤§ç”¨ã€‚","like_count":0},{"had_liked":false,"id":134690,"user_name":"Geek_3cb8e5","can_delete":false,"product_type":"c1","uid":1599296,"ip_address":"","ucode":"E520F0D7051FDE","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ4Mg9HAJ5auickN5l1JxxxVS0CdQVJX0QkqEQAib7VzHx0pES4V4Xu3XvBK0Nkib8j5GwibjO3v0hPJA/132","comment_is_top":false,"comment_ctime":1568895836,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":7,"product_id":100032301,"comment_content":"è€å¸ˆï¼Œæ‚¨çš„è¯¾ç¨‹å®‰æ’éå¸¸çš„å¥½ï¼Œ æˆ‘ä»¬éœ€è¦å­¦ä¹ è½®å­æ˜¯å¦‚ä½•é€ çš„ã€‚","like_count":0},{"had_liked":false,"id":134112,"user_name":"renwotao","can_delete":false,"product_type":"c1","uid":1042503,"ip_address":"","ucode":"8054CA7EC0C8AB","user_header":"https://static001.geekbang.org/account/avatar/00/0f/e8/47/3e4a03ac.jpg","comment_is_top":false,"comment_ctime":1568762853,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":7,"product_id":100032301,"comment_content":"åºå·è®¾è®¡å¾ˆæœ‰å¸®åŠ©ï¼Œ","like_count":0},{"had_liked":false,"id":129612,"user_name":"oscarwin","can_delete":false,"product_type":"c1","uid":1131956,"ip_address":"","ucode":"492430BA342593","user_header":"https://static001.geekbang.org/account/avatar/00/11/45/b4/ec66d499.jpg","comment_is_top":false,"comment_ctime":1567172776,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":7,"product_id":100032301,"comment_content":"å¦‚æœä½¿ç”¨é˜»å¡IOæ¥æ˜¾ç¤ºï¼Œä¼¼ä¹ä¼šå‡ºç°æ­»é”çš„æƒ…å†µ:\nå¼ å¤§çˆ·sayçº¿ç¨‹ï¼šwriteé˜»å¡\nå¼ å¤§çˆ·listençº¿ç¨‹ï¼šå›å¤æ—¶ï¼Œé˜»å¡åœ¨lockä¸Š\næå¤§çˆ·sayçº¿ç¨‹ï¼šwriteé˜»å¡\næå¤§çˆ·listençº¿ç¨‹ï¼šå›å¤æ—¶ï¼Œé˜»å¡åœ¨lockä¸Š\nå¦‚æ­¤ï¼Œå°±å‘ç”Ÿäº†æ­»é”ã€‚","like_count":0},{"had_liked":false,"id":128034,"user_name":"å¤œç©ºä¸­æœ€äº®çš„æ˜Ÿ","can_delete":false,"product_type":"c1","uid":1267566,"ip_address":"","ucode":"ADC3E7B6789955","user_header":"https://static001.geekbang.org/account/avatar/00/13/57/6e/b6795c44.jpg","comment_is_top":false,"comment_ctime":1566823171,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":7,"product_id":100032301,"comment_content":"ä»Šå¤©å¿…é¡»å†™ä¸€ä¸‹","like_count":0},{"had_liked":false,"id":127216,"user_name":"å¼ ä¸‰","can_delete":false,"product_type":"c1","uid":1004092,"ip_address":"","ucode":"1155528FAE1546","user_header":"https://static001.geekbang.org/account/avatar/00/0f/52/3c/d6fcb93a.jpg","comment_is_top":false,"comment_ctime":1566612687,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":7,"product_id":100032301,"comment_content":"å¤ªç²¾å½©äº†ï¼ŒJMQçš„è®¾è®¡ï¼Œæˆ‘è§‰å¾—å®Œå…¨å°±æ˜¯å°†ç°å®ä¸­çš„æµæ°´çº¿ä½œä¸šå†åŠ ä¸Šæ“ä½œç³»ç»Ÿçš„ç‰¹æ€§","like_count":0},{"had_liked":false,"id":239095,"user_name":"é¢‡å¿’å¦¥","can_delete":false,"product_type":"c1","uid":1026448,"ip_address":"","ucode":"AA86AD1049BC2E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a9/90/0c5ed3d9.jpg","comment_is_top":false,"comment_ctime":1596434369,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":7,"product_id":100032301,"comment_content":"è€—æ—¶:  40.354851ms\n\nhttps:&#47;&#47;gist.github.com&#47;chanjarster&#47;a3b6957ad1f4117038722372cafbecb9","like_count":0},{"had_liked":false,"id":198967,"user_name":"è¿œé¹","can_delete":false,"product_type":"c1","uid":1110723,"ip_address":"","ucode":"37B06413D88BEC","user_header":"https://static001.geekbang.org/account/avatar/00/10/f2/c3/f18e4507.jpg","comment_is_top":false,"comment_ctime":1585474603,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":7,"product_id":100032301,"comment_content":"è®²çš„å¾ˆå¯¹ï¼Œå¾ˆå¤šçŸ¥è¯†ç‚¹è¡¨é¢ä¸Šå’Œmqæ²¡æœ‰å…³ç³»ï¼Œå®é™…ä¸Šæ˜¯å¯¹çŸ¥è¯†æŒæ¡ç¨‹åº¦ä¸å¤Ÿ","like_count":0},{"had_liked":false,"id":197016,"user_name":"å‡Œç©ºé£èµ·çš„å‰ªåˆ€è…¿","can_delete":false,"product_type":"c1","uid":1243680,"ip_address":"","ucode":"16FBBF4A3B54C6","user_header":"https://static001.geekbang.org/account/avatar/00/12/fa/20/0f06b080.jpg","comment_is_top":false,"comment_ctime":1585349677,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":7,"product_id":100032301,"comment_content":"æè€å¸ˆæ‚¨å¥½ï¼ŒJMQä¸­request queueä¸éœ€è¦åŠ é”å•Šï¼Ÿ","like_count":0},{"had_liked":false,"id":143930,"user_name":"å¼ ä¸‰ä¸°","can_delete":false,"product_type":"c1","uid":1155275,"ip_address":"","ucode":"3A6215A40B3B21","user_header":"https://static001.geekbang.org/account/avatar/00/11/a0/cb/aab3b3e7.jpg","comment_is_top":false,"comment_ctime":1571808795,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":7,"product_id":100032301,"comment_content":"ç†è§£è€å¸ˆçš„è®²è¯¾æ€è·¯ï¼Œå°±å› ä¸ºè€å¸ˆè¿™ä¹ˆè®²æˆ‘æ‰è´­ä¹°è¿™ä¸ªä¸“æ ï¼Œéå¸¸å€¼ï¼","like_count":0},{"had_liked":false,"id":137809,"user_name":"ä¸ä¸å†é™©è®°","can_delete":false,"product_type":"c1","uid":1661704,"ip_address":"","ucode":"A43829E454C067","user_header":"https://static001.geekbang.org/account/avatar/00/19/5b/08/b0b0db05.jpg","comment_is_top":false,"comment_ctime":1569859805,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":7,"product_id":100032301,"comment_content":"æ— ç”¨ä¹‹ç”¨ï¼Œæ–¹ä¸ºå¤§ç”¨ã€‚","like_count":0},{"had_liked":false,"id":134690,"user_name":"Geek_3cb8e5","can_delete":false,"product_type":"c1","uid":1599296,"ip_address":"","ucode":"E520F0D7051FDE","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ4Mg9HAJ5auickN5l1JxxxVS0CdQVJX0QkqEQAib7VzHx0pES4V4Xu3XvBK0Nkib8j5GwibjO3v0hPJA/132","comment_is_top":false,"comment_ctime":1568895836,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":7,"product_id":100032301,"comment_content":"è€å¸ˆï¼Œæ‚¨çš„è¯¾ç¨‹å®‰æ’éå¸¸çš„å¥½ï¼Œ æˆ‘ä»¬éœ€è¦å­¦ä¹ è½®å­æ˜¯å¦‚ä½•é€ çš„ã€‚","like_count":0},{"had_liked":false,"id":134112,"user_name":"renwotao","can_delete":false,"product_type":"c1","uid":1042503,"ip_address":"","ucode":"8054CA7EC0C8AB","user_header":"https://static001.geekbang.org/account/avatar/00/0f/e8/47/3e4a03ac.jpg","comment_is_top":false,"comment_ctime":1568762853,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":7,"product_id":100032301,"comment_content":"åºå·è®¾è®¡å¾ˆæœ‰å¸®åŠ©ï¼Œ","like_count":0},{"had_liked":false,"id":129612,"user_name":"oscarwin","can_delete":false,"product_type":"c1","uid":1131956,"ip_address":"","ucode":"492430BA342593","user_header":"https://static001.geekbang.org/account/avatar/00/11/45/b4/ec66d499.jpg","comment_is_top":false,"comment_ctime":1567172776,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":7,"product_id":100032301,"comment_content":"å¦‚æœä½¿ç”¨é˜»å¡IOæ¥æ˜¾ç¤ºï¼Œä¼¼ä¹ä¼šå‡ºç°æ­»é”çš„æƒ…å†µ:\nå¼ å¤§çˆ·sayçº¿ç¨‹ï¼šwriteé˜»å¡\nå¼ å¤§çˆ·listençº¿ç¨‹ï¼šå›å¤æ—¶ï¼Œé˜»å¡åœ¨lockä¸Š\næå¤§çˆ·sayçº¿ç¨‹ï¼šwriteé˜»å¡\næå¤§çˆ·listençº¿ç¨‹ï¼šå›å¤æ—¶ï¼Œé˜»å¡åœ¨lockä¸Š\nå¦‚æ­¤ï¼Œå°±å‘ç”Ÿäº†æ­»é”ã€‚","like_count":0},{"had_liked":false,"id":128034,"user_name":"å¤œç©ºä¸­æœ€äº®çš„æ˜Ÿ","can_delete":false,"product_type":"c1","uid":1267566,"ip_address":"","ucode":"ADC3E7B6789955","user_header":"https://static001.geekbang.org/account/avatar/00/13/57/6e/b6795c44.jpg","comment_is_top":false,"comment_ctime":1566823171,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":7,"product_id":100032301,"comment_content":"ä»Šå¤©å¿…é¡»å†™ä¸€ä¸‹","like_count":0},{"had_liked":false,"id":127216,"user_name":"å¼ ä¸‰","can_delete":false,"product_type":"c1","uid":1004092,"ip_address":"","ucode":"1155528FAE1546","user_header":"https://static001.geekbang.org/account/avatar/00/0f/52/3c/d6fcb93a.jpg","comment_is_top":false,"comment_ctime":1566612687,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":7,"product_id":100032301,"comment_content":"å¤ªç²¾å½©äº†ï¼ŒJMQçš„è®¾è®¡ï¼Œæˆ‘è§‰å¾—å®Œå…¨å°±æ˜¯å°†ç°å®ä¸­çš„æµæ°´çº¿ä½œä¸šå†åŠ ä¸Šæ“ä½œç³»ç»Ÿçš„ç‰¹æ€§","like_count":0},{"had_liked":false,"id":127213,"user_name":"solar","can_delete":false,"product_type":"c1","uid":1070335,"ip_address":"","ucode":"E6C7090478B027","user_header":"https://static001.geekbang.org/account/avatar/00/10/54/ff/09a058f3.jpg","comment_is_top":false,"comment_ctime":1566612091,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":8,"product_id":100032301,"comment_content":"è¿˜å¯ä»¥ä¼˜åŒ–io bufferè¯»å†™ï¼Œå¦‚æ˜ å°„connçš„bufferï¼Œå‡å°‘å†…æ ¸æ€ä¸ç”¨æˆ·æ€çš„å†…å­˜æ‹·è´.","like_count":0},{"had_liked":false,"id":127205,"user_name":"çœ‹ä¸åˆ°deé¢œè‰²","can_delete":false,"product_type":"c1","uid":1162714,"ip_address":"","ucode":"88348CCAE81931","user_header":"https://static001.geekbang.org/account/avatar/00/11/bd/da/3d76ea74.jpg","comment_is_top":false,"comment_ctime":1566611250,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":8,"product_id":100032301,"comment_content":"æ²™å‘~~çœ‹äº†æœ¬ç« å†…å®¹æ·±æ„Ÿæƒ­æ„§ã€‚å¹³æ—¥é‡Œæ›´å¤šçš„ä¹Ÿåªæ˜¯å¯¹åŸç†çš„äº†è§£ï¼Œç¡®å®ç¼ºä¹åŠ¨æ‰‹å®è·µã€‚è¿™å°±å»ç å¼ å¤§çˆ·å’Œæå¤§çˆ·çš„çˆ±æ¨æƒ…é•¿ã€‚","like_count":0},{"had_liked":false,"id":127213,"user_name":"solar","can_delete":false,"product_type":"c1","uid":1070335,"ip_address":"","ucode":"E6C7090478B027","user_header":"https://static001.geekbang.org/account/avatar/00/10/54/ff/09a058f3.jpg","comment_is_top":false,"comment_ctime":1566612091,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":8,"product_id":100032301,"comment_content":"è¿˜å¯ä»¥ä¼˜åŒ–io bufferè¯»å†™ï¼Œå¦‚æ˜ å°„connçš„bufferï¼Œå‡å°‘å†…æ ¸æ€ä¸ç”¨æˆ·æ€çš„å†…å­˜æ‹·è´.","like_count":0},{"had_liked":false,"id":127205,"user_name":"çœ‹ä¸åˆ°deé¢œè‰²","can_delete":false,"product_type":"c1","uid":1162714,"ip_address":"","ucode":"88348CCAE81931","user_header":"https://static001.geekbang.org/account/avatar/00/11/bd/da/3d76ea74.jpg","comment_is_top":false,"comment_ctime":1566611250,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":8,"product_id":100032301,"comment_content":"æ²™å‘~~çœ‹äº†æœ¬ç« å†…å®¹æ·±æ„Ÿæƒ­æ„§ã€‚å¹³æ—¥é‡Œæ›´å¤šçš„ä¹Ÿåªæ˜¯å¯¹åŸç†çš„äº†è§£ï¼Œç¡®å®ç¼ºä¹åŠ¨æ‰‹å®è·µã€‚è¿™å°±å»ç å¼ å¤§çˆ·å’Œæå¤§çˆ·çš„çˆ±æ¨æƒ…é•¿ã€‚","like_count":0}]}