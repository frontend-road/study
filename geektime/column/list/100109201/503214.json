{"id":503214,"title":"08ï½œéœ€æ±‚æç‚¼ï¼ˆäºŒï¼‰ï¼šå¾®æœåŠ¡é›†ç¾¤è¦æµ‹ä»€ä¹ˆï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯æŸ³èƒœã€‚</p><p>éšç€äº’è”ç½‘å‘å±•å’Œè½¯ä»¶åœºæ™¯æ™®åŠï¼Œå•ä½“åº”ç”¨é€æ¸æš´éœ²å‡ºè‡´å‘½ç¼ºé™·ï¼Œæ¯”å¦‚è¿‡äºåºå¤§ï¼Œå¤§å¤§å¢åŠ ç³»ç»Ÿçš„å¤æ‚åº¦ã€äº¤ä»˜é€Ÿåº¦å˜æ…¢ï¼Œåä½œå›°éš¾ã€é”™è¯¯éš¾ä»¥éš”ç¦»ã€ç»´æŠ¤æˆæœ¬å·¨å¤§ç­‰ç­‰ã€‚</p><p>åŒæ—¶ï¼Œè½¯ä»¶æŠ€æœ¯ä¹Ÿåœ¨å‘å±•ï¼Œå‡ºç°äº†VMwareã€Dockerå’ŒKubernetesç­‰è½»é‡åŒ–éƒ¨ç½²æ–¹å¼ï¼Œè¿™ä½¿å¾—æ‹†åˆ†çš„å›°éš¾å˜å°ï¼Œéƒ¨ç½²çš„æˆæœ¬é™ä½ã€‚å¾®æœåŠ¡æ¶æ„è¯ç”Ÿåï¼Œä¸€ä¸ªç³»ç»Ÿæ‹†åˆ†æˆå¤šä¸ªç‹¬ç«‹å¼€å‘å’Œè¿è¡Œçš„æœåŠ¡ï¼Œè¿™ä¸ªæœåŠ¡ä¸ç®¡å¤§å°ï¼Œä¸šç•Œéƒ½ç®¡å®ƒå«å¾®æœåŠ¡ã€‚å®ƒä»¬ä¹Ÿæœ‰ä¸€å¥—æœåŠ¡æ²»ç†çš„æŠ€æœ¯è§„èŒƒï¼Œç”¨æ¥ä¿è¯éƒ¨ç½²å’Œè¿è¡Œçš„å¯é æ€§å’Œæ‰©å±•æ€§ã€‚</p><p>å¾®æœåŠ¡é›†ç¾¤çš„å¼€å‘æ–¹å¼ç¡®å®æ–¹ä¾¿äº†ç”¨æˆ·éœ€æ±‚å¿«é€Ÿå®ç°å’Œäº¤ä»˜ï¼Œä½†ä»Šå¤©æˆ‘ä»¬çš„å…³æ³¨ç‚¹æ˜¯ï¼Œä»æµ‹è¯•è§’åº¦çœ‹ï¼Œå¾®æœåŠ¡ç›¸æ¯”å•ä½“åº”ç”¨æœ‰ä»€ä¹ˆä¸ä¸€æ ·ï¼Ÿæœ‰æ²¡æœ‰æ–°çš„æµ‹è¯•ç‚¹ï¼Ÿ</p><p>è¿™ä¸€è®²æˆ‘ä»¬å°†ç»§ç»­å»¶ç»­FoodComeçš„ä¾‹å­ï¼Œçœ‹çœ‹å®ƒä»å•ä½“åº”ç”¨å˜æˆå¾®æœåŠ¡æ¶æ„ä¹‹åï¼Œç»™æµ‹è¯•å·¥ä½œå¸¦æ¥çš„å˜åŒ–å’ŒæŒ‘æˆ˜ã€‚</p><h2>å¾®æœåŠ¡æ¶æ„ä¸‹çš„FoodCome</h2><p>åœ¨ä¸Šä¸€è®²ï¼Œå•ä½“åº”ç”¨çš„FoodComeæ˜¯è¿™æ ·çš„ï¼š<img src=\"https://static001.geekbang.org/resource/image/bd/a3/bddb6ed5729850bb7340033b437775a3.jpg?wh=1920x1369\" alt=\"å›¾ç‰‡\" title=\"FoodComeå•ä½“æ¶æ„å›¾\"></p><p>éšç€ä¸šåŠ¡è§„æ¨¡çš„æ‰©å¤§ï¼Œå¼€å‘äººæ‰‹å¢åŠ ï¼ŒFoodComeè¢«æ‹†åˆ†æˆ5ä¸ªå¾®æœåŠ¡ï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p><ul>\n<li>è®¢å•æœåŠ¡ï¼šå¤„ç†ç”¨æˆ·ä¸‹çš„è®¢å•ï¼›</li>\n<li>ç‰©æµæœåŠ¡ï¼šFoodcomeå†…éƒ¨çš„ç‰©æµç®¡ç†ï¼Œä¸å¤–éƒ¨ç‰©æµå¯¹æ¥ï¼›</li>\n<li>é¤é¦†æœåŠ¡ï¼šç®¡ç†é¤é¦†çš„ä¿¡æ¯ï¼Œå‚ä¸è®¢å•çš„å·¥ä½œæµï¼›</li>\n<li>è´¦æˆ·æœåŠ¡ï¼šç®¡ç†è®¢å•é‡Œçš„é¡¾å®¢ä¿¡æ¯ï¼Œå’Œå¤–éƒ¨çš„æ”¯ä»˜ç³»ç»Ÿå¯¹æ¥ã€‚</li>\n<li>é€šçŸ¥æœåŠ¡ï¼šäº§ç”Ÿæ¶ˆæ¯é€šçŸ¥ç”¨æˆ·ï¼Œå’Œå¤–éƒ¨çš„é‚®ä»¶ç³»ç»Ÿå¯¹æ¥ã€‚</li>\n</ul><!-- [[[read_end]]] --><p>ç”±æ­¤ç»„æˆçš„FoodComeçš„å¾®æœåŠ¡æ¶æ„å¦‚ä¸‹å›¾ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/b1/21/b1e740b327ea837f1278f1a44e754321.jpg?wh=1920x1030\" alt=\"å›¾ç‰‡\" title=\"FoodComeå¾®æœåŠ¡æ¶æ„å›¾\"></p><p>åœ¨è¿™ä¸ªæ¶æ„ä¸‹ï¼ŒåŸå…ˆå•ä½“åº”ç”¨çš„å¯¹å¤–æ¥å£ä¿æŒä¸å˜ï¼Œä½†æ˜¯å•ä½“åº”ç”¨å†…éƒ¨è¢«5ä¸ªç‹¬ç«‹çš„å¾®æœåŠ¡å–ä»£ã€‚ç”¨æˆ·çš„è®¢å•è¯·æ±‚å…ˆé€šè¿‡APIç½‘å…³åˆ°è¾¾è®¢å•æœåŠ¡ï¼Œå®Œæˆæ”¯ä»˜åï¼Œé¤é¦†æ¥å•ï¼Œå†é€šè¿‡ç‰©æµç³»ç»Ÿäº¤ä»˜è®¢å•ã€‚</p><p>æ¯ä¸ªå¾®æœåŠ¡å®ç°è‡ªæ²»ï¼Œç‹¬ç«‹å¼€å‘å’Œå‘å¸ƒéƒ¨ç½²ï¼ŒåŠ å¿«å‘å¸ƒé€Ÿåº¦ã€‚è€Œä¸”å¢åŠ æ–°åŠŸèƒ½ä¹Ÿå¾ˆæ–¹ä¾¿ï¼Œæ¯”å¦‚ç™»å½•é‰´æƒï¼Œåœ¨è¿™ä¸ªå›¾ä¸­å†å¢åŠ ä¸€ä¸ªè®¤è¯æœåŠ¡å°±å¯ä»¥ï¼Œè¿™æ˜¯ç»™å®¢æˆ·å¸¦æ¥çš„å¥½å¤„ã€‚</p><p>ç°åœ¨çš„é—®é¢˜æ˜¯ï¼Œè¿™ç»™æµ‹è¯•å¸¦æ¥å“ªäº›å˜åŒ–å‘¢ï¼Ÿåˆ†æ‹†åï¼ŒFoodComeç³»ç»Ÿå˜æˆäº†å¾®æœåŠ¡é›†ç¾¤ï¼Œå°±åƒä¸€éƒ¨å·¨å¤§æœºå™¨ï¼Œç”±å¤šä¸ªé›¶ä»¶ç»„æˆï¼Œäº’ç›¸å’¬åˆï¼Œä¸€èµ·å·¥ä½œã€‚ä½œä¸ºæµ‹è¯•äººå‘˜ï¼Œä¸ä½†è¦éªŒè¯æ¯ä¸ªé›¶ä»¶æ˜¯åˆæ ¼çš„ï¼Œè¿˜è¦æœ‰åŠæ³•é¢„æµ‹å®ƒä»¬ç»„è£…èµ·æ¥çš„æœºå™¨ä¹Ÿèƒ½æ­£å¸¸å·¥ä½œã€‚</p><p>è¿™é‡Œçš„æµ‹è¯•éš¾ç‚¹æ˜¯ï¼Œå¾®æœåŠ¡çš„æ•°é‡å¢åŠ ï¼ŒæœåŠ¡é—´çš„äº¤äº’é‡ä¹Ÿä¼šå‰§å¢ï¼Œç›¸æ¯”å•ä½“ç³»ç»Ÿï¼Œé›†æˆæµ‹è¯•åœ¨å¾®æœåŠ¡é›†ç¾¤æ¶æ„ä¸‹æ›´åŠ å…³é”®ã€‚</p><p>è¦åšé›†æˆæµ‹è¯•ï¼Œæˆ‘ä»¬å°±å…ˆææ˜ç™½å¾®æœåŠ¡é—´æ˜¯æ€ä¹ˆäº¤äº’çš„ã€‚åœ¨å¾®æœåŠ¡æ¶æ„ä¸‹ï¼Œäº¤äº’å¯ä»¥æœ‰å¤šç§é£æ ¼ï¼Œæ¯”å¦‚RPCè¿œç¨‹è¿‡ç¨‹è°ƒç”¨ã€RESTé£æ ¼ã€Message Queueæ¶ˆæ¯é˜Ÿåˆ—ç­‰ç­‰ã€‚æ ¹æ®äº¤äº’çš„æ–¹æ³•å’Œé£æ ¼ï¼Œæˆ‘æŠŠå®ƒä»¬æ•´ç†å‡ºä¸€ä¸ªè¡¨æ ¼ï¼Œæ–¹ä¾¿ä½ ç†è§£ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/6c/02/6cd53f0b8988bc03e77a996106f13302.jpg?wh=3323x1052\" alt=\"\"><br>\nåœ¨FoodComeé‡‡ç”¨äº†ä¸¤ç§äº¤äº’æ–¹å¼ï¼ŒRestAPIå’ŒMessage Queueã€‚</p><p>RestAPIç”¨æ¥å¤„ç†å®æ—¶æ€§å¼ºçš„æœåŠ¡é—´äº¤äº’ï¼Œæ¯”å¦‚å‰ç«¯é€šè¿‡APIç½‘å…³è°ƒç”¨è®¢å•æœåŠ¡æ¥ä¸‹è®¢å•ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/d2/57/d231ac53f77f707c09f15d872af69d57.jpg?wh=1920x711\" alt=\"å›¾ç‰‡\"></p><p>Message Queueç”¨æ¥å¤„ç†å¼‚æ­¥çš„äº¤äº’ï¼Œè®¢å•æœåŠ¡å’Œé€šçŸ¥æœåŠ¡ä¹‹é—´é€šè¿‡Message Queueæ¥äº¤æ¢ä¿¡æ¯.</p><p><img src=\"https://static001.geekbang.org/resource/image/2d/98/2d4c9f4fa823ab4cb0b877161a6f8f98.jpg?wh=1920x855\" alt=\"å›¾ç‰‡\"></p><p>ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹è¿™ä¸¤ç§äº¤äº’æ–¹å¼çš„å…·ä½“å®ç°ï¼Œç„¶åæ‰¾å‡ºæµ‹è¯•ç‚¹ã€‚</p><h2>REST</h2><p>æˆ‘ä»¬éœ€è¦å…ˆçŸ¥é“Restæ¥å£æ˜¯æ€ä¹ˆè®¾è®¡çš„ï¼Œæ‰èƒ½æ‰¾å‡ºåé¢éƒ½è¦æµ‹ä»€ä¹ˆã€‚</p><h3>ä»€ä¹ˆæ˜¯REST</h3><p>RESTæ˜¯Representational State Transferçš„ç¼©å†™ï¼Œå«åšè¡¨ç°å±‚çŠ¶æ€è½¬æ¢ã€‚å¬èµ·æ¥æŒºæ‹—å£ï¼Œä½†æˆ‘ä¸€è¯´ä½ å°±èƒ½æ‡‚ï¼Œå®ƒå…¶å®æ˜¯ä¸€ç»„æ¾æ•£çš„è§„èŒƒï¼Œä¸æ˜¯ä¸¥æ ¼çš„åè®®ï¼Œä¹Ÿä¸æ˜¯å¼ºåˆ¶çš„æ ‡å‡†ã€‚è¿™ä¸ªè§„èŒƒçš„ç›®çš„å°±æ˜¯è®©APIçš„è®¾è®¡æ›´åŠ ç®€å•æ˜“æ‡‚ã€‚</p><p>å®ƒåŒ…å«ä»¥ä¸‹å‡ ä¸ªåŸºæœ¬åŸåˆ™ï¼š</p><p>1.RESTæ˜¯åŸºäºHTTPåè®®çš„ï¼›<br>\n2.é€šè¿‡HTTPçš„URLæš´éœ²Resourceèµ„æºï¼›<br>\n3.é€šè¿‡HTTPçš„æ“ä½œåŸè¯­ï¼Œæä¾›å¯¹Resourceçš„æ“ä½œï¼ŒGETã€ POSTã€PUTã€DELETEå¯¹åº”ç€å¢åˆ æ”¹æŸ¥çš„æ“ä½œã€‚</p><p>åªè¦å¼€å‘äººå‘˜æ‡‚HTTPåè®®ï¼ŒæŒ‰ç…§ä¸Šé¢çš„è§„åˆ™ç”¨RESTé£æ ¼è¡¨è¾¾ä»–çš„APIæ˜¯å¾ˆå®¹æ˜“çš„ã€‚åŒæ ·ï¼Œå¦å¤–ä¸€ä¸ªå¼€å‘äººå‘˜çœ‹åˆ°REST APIï¼Œä¹Ÿå¾ˆå¿«å°±èƒ½çŸ¥é“è¿™äº›APIæ˜¯å¹²ä»€ä¹ˆç”¨çš„ï¼Œå‡ ä¹ä¸ç”¨çœ‹éš¾æ‡‚çš„æ–‡æ¡£ã€‚</p><p>è¿™æ˜¯RESTçš„ä¼˜ç‚¹ï¼ŒRESTé£æ ¼ä¸‹è®¾è®¡çš„APï¼Œå­¦ä¹ æˆæœ¬éå¸¸ä½ï¼Œæ‰€ä»¥äº’è”ç½‘ä¸Šæœ‰å¾ˆå¤šæœåŠ¡éƒ½æ˜¯é€šè¿‡RESTæ–¹å¼å¯¹å¤–æä¾›APIï¼Œæ¯”å¦‚äºšé©¬é€Šçš„AWSäº‘æœåŠ¡ã€Googleçš„DocumentæœåŠ¡ç­‰ç­‰ã€‚</p><p>å½“ç„¶ï¼Œç°å®ä¸­çš„RESTï¼Œä»2000å¹´æ¦‚å¿µè¯ç”Ÿåˆ°ç°åœ¨å‘å±•äº†20å¹´ï¼Œåœ¨ä¸Šé¢çš„åŸºæœ¬è§„èŒƒä¸Šåˆå¢åŠ äº†å¾ˆå¤šå†…å®¹ï¼Œè®©RESTæ¥å£å…·å¤‡è‡ªè§£é‡Šã€å¯å‘ç°ç­‰ä¼˜åŠ¿ï¼Œæœ‰å…´è¶£ä½ å¯ä»¥çœ‹RichardSonæå‡ºçš„ <a href=\"https://martinfowler.com/articles/richardsonMaturityModel.html\">RESTå››çº§æˆç†Ÿåº¦æ¨¡å‹</a>ã€‚</p><h3>Order Serviceçš„REST APIè®¾è®¡</h3><p>éµå¾ªRESTè§„èŒƒï¼ŒOrder Serviceçš„æ¥å£è®¾è®¡å¯ä»¥æŒ‰ç…§â€œåè¯-åŠ¨è¯â€çš„æ€è·¯æ¥æ‹æ¸…ã€‚</p><p>é¦–å…ˆå¯»æ‰¾åè¯ï¼ŒOrderï¼Œå®ƒå¯¹åº”RESTä¸Šçš„ä¸€ä¸ªResourceèµ„æºï¼š</p><pre><code class=\"language-plain\">http://api.foodcome.com/api/v1/orders\n</code></pre><p>å†æ‰¾åˆ°åŠ¨è¯â€œä¸‹å•â€ï¼Œå®ƒå¯¹åº”HTTPåè®®ä¸Šçš„POSTåŸè¯­ï¼Œå¯¹Ordersèµ„æºå‘é€POSTè¯·æ±‚å°±æ˜¯ä¸‹å•ï¼š</p><pre><code class=\"language-plain\">POST http://api.foodcome.com/api/v1/orders\n</code></pre><p>ä¹‹åå°†â€œæŸ¥è¯¢è®¢å•â€è¿™ä¸ªåŠ¨è¯ï¼Œè½¬æˆHTTPåè®®ä¸Šçš„GETåŸè¯­ï¼ŒæŸ¥è¯¢æ¡ä»¶orderIDä»¥å‚æ•°å½¢å¼åŠ åœ¨URLé‡Œï¼š</p><pre><code class=\"language-plain\">GET http://api.foodcome.com/api/v1/orders?orderID=123456\n</code></pre><p>åŒæ ·ï¼Œä¿®æ”¹è®¢å•ä½¿ç”¨PUTåŸè¯­ï¼Œåˆ é™¤è®¢å•ä½¿ç”¨DELETEåŸè¯­ã€‚</p><p>æˆ‘ä»¬å†ç”¨åŒæ ·çš„æ–¹æ³•æ¥æŠŠå…¶ä»–åè¯â€œé¡¾å®¢â€å’Œâ€œé¤é¦†â€ï¼Œè½¬æˆResourceå’Œæ“ä½œï¼š</p><pre><code class=\"language-plain\">http://api.foodcome.com/api/v1/customers\nhttp://api.foodcome.com/api/v1/restaurants\n</code></pre><h3>Order serviceçš„RestAPIè§„æ ¼å®šä¹‰</h3><p>ä¸æˆç†Ÿçš„å¼€å‘å›¢é˜Ÿï¼Œç»å¸¸æ˜¯ä¸€è¾¹å†™ä»£ç ï¼Œä¸€è¾¹è®¾è®¡APIï¼Œè¿™æ ·åšçš„ç»“æœä¸éš¾æ¨æµ‹ï¼Œä¸€åƒä¸ªå¼€å‘äººå‘˜ä¼šå†™å‡ºä¸€åƒä¸ªOrder Service APIï¼Œè™½ç„¶ä»–ä»¬éƒ½å£°ç§°éµå¾ªäº†RESTè§„èŒƒã€‚</p><p>æ‰€ä»¥ï¼Œå¥½çš„å®è·µæ˜¯ï¼Œå¼€å‘å›¢é˜Ÿéœ€è¦å…ˆè®¾è®¡RestAPIï¼Œå¹¶æŠŠå®ƒè¡¨è¾¾å‡ºæ¥ï¼Œç„¶åå›¢é˜Ÿå°±å¯ä»¥è¿›è¡Œè¯„å®¡ï¼Œè¾¾æˆç†è§£ä¸€è‡´ã€‚</p><p>é‚£è¡¨è¾¾çš„è½½ä½“æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿè¿™é‡Œå°±è¦æåˆ°Interface Definition Languageè¿™ä¸ªæ¦‚å¿µäº†ï¼Œé¡¾åæ€ä¹‰ï¼Œ<strong>IDLæ˜¯æ¥å£å®šä¹‰è¯­è¨€ï¼Œå®ƒé€šè¿‡ä¸€ç§ç‹¬ç«‹äºç¼–ç¨‹è¯­è¨€çš„è¯­æ³•è§„åˆ™æ¥æè¿°APIã€‚</strong>ä¸åŒç±»å‹çš„APIï¼Œå®ƒçš„IDLæ˜¯ä¸ä¸€æ ·çš„ã€‚</p><p>æˆ‘ä»¬ç”¨RESTä¸»æµçš„IDLï¼Œä¹Ÿå°±æ˜¯OpenAPIçš„è¯­æ³•è§„èŒƒï¼Œæ¥æè¿°ä¸‹è®¢å•çš„è¿™ä¸ªæ¥å£çš„å‚æ•°ï¼ŒæŠŠè¯·æ±‚å’Œå“åº”å†™åœ¨ä¸€ä¸ªYAMLæ–‡ä»¶é‡Œã€‚</p><pre><code class=\"language-yaml\">\"/api/v1/orders\":\n&nbsp; &nbsp; post:\n&nbsp; &nbsp; &nbsp; consumes:\n&nbsp; &nbsp; &nbsp; - application/json\n&nbsp; &nbsp; &nbsp; produces:\n&nbsp; &nbsp; &nbsp; - application/json\n&nbsp; &nbsp; &nbsp; parameters:\n&nbsp; &nbsp; &nbsp; - in: body\n&nbsp; &nbsp; &nbsp; &nbsp; name: body\n&nbsp; &nbsp; &nbsp; &nbsp; description: order placed for Food \n&nbsp; &nbsp; &nbsp; &nbsp; required: true\n&nbsp; &nbsp; &nbsp; &nbsp; properties:\n          foodId:\n            type: integer\n          shipDate:\n            type: Date\n          status:\n            type: String\n            enum:\n            - placed\n            - accepted\n            - delivered\n&nbsp; &nbsp; &nbsp; responses:\n&nbsp; &nbsp; &nbsp; &nbsp; '200':\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; description: successful operation\n&nbsp; &nbsp; &nbsp; &nbsp; '400':\n          description: invalid order\n</code></pre><p>åˆ°è¿™é‡Œï¼ŒFoodComeæœåŠ¡é—´çš„RESTæ¥å£è§„æ ¼è¯´æ˜ä¹¦å°±ç”Ÿæˆäº†ï¼</p><p>è¿™ä¸ªè§„æ ¼è¯´æ˜ä¹¦å®šä¹‰äº†å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¹‹é—´çš„å¥‘çº¦ï¼Œé¡¾å®¢è¦ä¸‹å•çš„è¯ï¼Œå®¢æˆ·ç«¯åº”è¯¥å‘æœåŠ¡ç«¯\"api/v1/orders\"å‘é€ä¸€ä¸ªè¯·æ±‚ï¼Œé‡Œé¢åŒ…å«äº†é£Ÿå“çš„ä»£ç ã€æ—¥æœŸç­‰ç­‰ï¼Œè€ŒæœåŠ¡ç«¯æˆåŠŸåˆ™è¿”å›ä¸€ä¸ªHTTP 200çš„å“åº”ï¼Œå¤±è´¥è¿”å›ä¸€ä¸ªHTTP 400çš„å“åº”ã€‚</p><h2>å¼‚æ­¥æ¶ˆæ¯</h2><p>è¯´å®Œäº†åŒæ­¥å¸¸ç”¨çš„RESTï¼Œæˆ‘ä»¬å†åˆ†æä¸€ä¸‹å¼‚æ­¥æ¶ˆæ¯ã€‚</p><p>ä»€ä¹ˆæ˜¯å¼‚æ­¥æ¶ˆæ¯å‘¢ï¼Ÿæ¶ˆæ¯å°±æ˜¯å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯äº¤æ¢çš„æ•°æ®ï¼Œè€Œå¼‚æ­¥æŒ‡çš„æ˜¯è°ƒç”¨çš„æ–¹å¼ï¼Œå®¢æˆ·ç«¯ä¸ç”¨ç­‰åˆ°æœåŠ¡ç«¯å¤„ç†å®Œæ¶ˆæ¯ï¼Œå°±å¯ä»¥è¿”å›ã€‚ç­‰æœåŠ¡ç«¯å¤„ç†å®Œï¼Œå†é€šçŸ¥å®¢æˆ·ç«¯ã€‚</p><p>å¼‚æ­¥æ¶ˆæ¯åœ¨å¾®æœåŠ¡é›†ç¾¤çš„æ¶æ„é‡Œï¼Œèƒ½å¤Ÿèµ·åˆ°å‰Šå³°ã€è§£è€¦çš„ä½œç”¨ã€‚æ¯”å¦‚FoodComeåœ¨è®¢é¤é«˜å³°æ—¶æ®µï¼Œå…ˆæŠŠè®¢å•æ”¶ä¸‹æ¥ï¼Œæ”¾åˆ°æ¶ˆæ¯é˜Ÿåˆ—ï¼Œæ’å¥½é˜Ÿï¼Œç­‰å¾…é¤é¦†ä¸€ä¸ªä¸ªå¤„ç†ã€‚æ‰€ä»¥å¼‚æ­¥æ¶ˆæ¯æ˜¯ç°åœ¨ä¸šç•Œå¾ˆå¸¸ç”¨çš„ä¸€ç§æœåŠ¡äº¤äº’æ–¹å¼ï¼Œå®ƒçš„æŠ€æœ¯åŸç†æ˜¯æ¶ˆæ¯é˜Ÿåˆ—ï¼ŒæŠ€æœ¯å®ç°æ˜¯æ¶ˆæ¯ä»£ç†ï¼Œæœ‰Kafkaã€RabbitMQç­‰ç­‰ã€‚</p><p>è€Œå¼€å‘äººå‘˜åœ¨è®¾è®¡å¾®æœåŠ¡æ—¶ï¼Œé¦–å…ˆè¦è®¾è®¡å¼‚æ­¥æ¶ˆæ¯æ¥å£ï¼Œå®šä¹‰å¥½æˆ‘çš„å¾®æœåŠ¡ä»€ä¹ˆæ—¶å€™å¾€æ¶ˆæ¯é˜Ÿåˆ—é‡Œæ”¾æ¶ˆæ¯ï¼Œæ”¾ä»€ä¹ˆæ ·çš„æ¶ˆæ¯ã€‚åŒæ ·ï¼Œä¹Ÿè¦å®šä¹‰å¥½å–æ¶ˆæ¯çš„æ—¶æœºå’Œæ–¹æ³•ã€‚</p><h3>å¼‚æ­¥æ¶ˆæ¯æ¥å£è®¾è®¡</h3><p>å¥½ï¼Œé‚£æˆ‘ä»¬å°±æ¥çœ‹ä¸€ä¸‹è®¢å•æœåŠ¡æ˜¯æ€ä¹ˆè®¾è®¡å®ƒçš„å¼‚æ­¥æ¶ˆæ¯æ¥å£çš„ã€‚</p><p>é¦–å…ˆï¼Œè¦å®šä¹‰æ¶ˆæ¯ä½“ï¼Œè®¢å•æœåŠ¡ä¼šå‘å¤–å‘å‡ºä¸‰ç§æ¶ˆæ¯OrderCreatedã€OrderUpdatedã€OrderCancelledã€‚æ¶ˆæ¯é‡ŒåŒ…å«äº†order IDã€order itemsã€order Statusè¿™äº›å­—æ®µã€‚</p><p>å…¶æ¬¡ï¼Œè¿˜è¦è¯´æ˜è¿™ä¸ªæ¶ˆæ¯å‘é€åˆ°å“ªä¸ªchannelé‡Œã€‚Channelå°±æ˜¯æ¶ˆæ¯çš„é˜Ÿåˆ—ï¼Œä¸€ä¸ªæ¶ˆæ¯ä»£ç†é‡Œå¯ä»¥æœ‰å¤šä¸ªchannelï¼Œæ¯ä¸ªchannelæœ‰ä¸åŒçš„åŠŸèƒ½ã€‚</p><p>å› ä¸ºorderçš„æ¶ˆæ¯æœ‰ä¸¥æ ¼çš„æ—¶åºï¼Œæ¯”å¦‚ï¼ŒOrderCancelledå’ŒOrderCreatedè¿™ä¸¤ä¸ªæ¶ˆæ¯çš„é¡ºåºåäº†çš„è¯ï¼Œä¼šå¼•èµ·ç¨‹åºå¤„ç†çš„æ··ä¹±ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬æŠŠè¿™ä¸‰ç§æ¶ˆæ¯éƒ½å‘é€åˆ°ä¸€ä¸ªå«orderçš„channelé‡Œã€‚</p><p>å¦‚ä¸‹å›¾ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/f3/d9/f3f7b68948f2f64acc82c53ed833bfd9.jpg?wh=1920x1021\" alt=\"å›¾ç‰‡\"></p><h3>å¼‚æ­¥æ¶ˆæ¯æ¥å£è§„æ ¼è¯´æ˜ä¹¦</h3><p>å¥½ï¼Œä¸‹é¢å°±åˆ°å…³é”®ç¯èŠ‚äº†ï¼Œå¯¹äºæµ‹è¯•äººå‘˜æ¥è¯´ï¼Œæˆ‘ä»¬æœ€å…³å¿ƒçš„å°±æ˜¯<strong>æ¥å£è§„æ ¼è¯´æ˜ä¹¦</strong>ï¼Œè·ŸRESTä¸€æ ·ï¼Œæ¶ˆæ¯é˜Ÿåˆ—ä¹Ÿéœ€è¦æ‰¾åˆ°IDLæ¥æè¿°æ¥å£ä¸Šçš„ä¿¡æ¯ã€‚</p><p>RestAPIçš„ä¸»æµIDLæ˜¯OpenAPIï¼Œç›¸å¯¹åº”åœ°ï¼ŒMessageAPIçš„IDLæ˜¯ AsyncAPIã€‚ä¸Šé¢çš„Orderæ¶ˆæ¯æ¥å£ï¼Œç”¨AsyncAPIè§„èŒƒæ¥å®šä¹‰ï¼Œä¼šæ˜¯ä¸‹é¢è¿™ä¸ªæ ·å­ï¼š</p><pre><code class=\"language-yaml\">asyncapi: 2.2.0\ninfo:\n&nbsp; title: è®¢å•æœåŠ¡\n&nbsp; version: 0.1.0\nchannels:\n&nbsp; order:\n&nbsp; &nbsp; subscribe:\n&nbsp; &nbsp; &nbsp; message:\n&nbsp; &nbsp; &nbsp; &nbsp; description: Order created.\n&nbsp; &nbsp; &nbsp; &nbsp; payload:\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; type: object\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; properties:\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; orderID:\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; type: Integer\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; orderStatus:\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; type: string\n</code></pre><p>è¿™æ®µä»£ç æè¿°çš„æ˜¯ï¼Œè®¢å•æœåŠ¡åœ¨è¿è¡Œæ—¶ä¼šå‘Order channelè¾“å‡ºOrderCreatedæ¶ˆæ¯ï¼Œè¿™ä¸ªOrderCreatedæ¶ˆæ¯åŒ…å«äº†2ä¸ªå­—æ®µï¼Œorderçš„IDå’Œorderçš„çŠ¶æ€ã€‚</p><h2>åœ¨è®¾è®¡é˜¶æ®µæµ‹è¯•è¦åšä»€ä¹ˆï¼Ÿ</h2><p>åˆšåˆšæˆ‘ä»¬èŠ±äº†ä¸å°‘ç¯‡å¹…åˆ†æAPIè®¾è®¡ï¼Œå¦‚æœä½ ä¹‹å‰ä¸€ç›´åªåšæµ‹è¯•ï¼Œä¹Ÿè®¸ä¼šç–‘æƒ‘ï¼šâ€œè¿™äº›çœ‹èµ·æ¥æ˜¯å¼€å‘é¢†åŸŸçš„çŸ¥è¯†å•Šï¼Œæ˜¯ä¸æ˜¯è·‘é¢˜äº†ï¼Ÿâ€å…¶å®æˆ‘æƒ³è¯´çš„æ˜¯ï¼ŒAPIé¢†åŸŸæ˜¯å¼€å‘ã€æµ‹è¯•å…±åŒå…³æ³¨çš„ã€‚æµ‹è¯•åº”è¯¥ä¸»åŠ¨å‚ä¸åˆ°è¿™äº›é¢†åŸŸçš„æ´»åŠ¨ï¼Œæ‰èƒ½è®©æµ‹è¯•æ›´åŠ æœ‰æ•ˆã€‚</p><p>æˆ‘æ›¾ç»çœ‹åˆ°è¿‡ä¸¤ä¸ªå¾®æœåŠ¡å›¢é˜Ÿå„è‡ªå¼€å‘éƒ½å¾ˆå¿«ï¼Œä½†æ˜¯å¾®æœåŠ¡ä¸€ä¸Šçº¿ï¼Œå°±å‘ç°é—®é¢˜äº†ï¼Œæœ‰çš„æ˜¯æ¥å£å°±å¯¹ä¸ä¸Šï¼Œæœ‰çš„æ˜¯æ•°æ®ç±»å‹ä¸ä¸€è‡´ç­‰ç­‰åƒå¥‡ç™¾æ€ªçš„é—®é¢˜ï¼Œè¿™äº›é—®é¢˜èŠ±äº†å¤§æŠŠè¯Šæ–­æ—¶é—´ä¸è¯´ï¼Œç”šè‡³ä¼šç»™å®¢æˆ·å¸¦æ¥æŸå¤±ã€‚</p><p>å•ä½“åº”ç”¨åŸºæœ¬æ²¡è¿™äº›é—®é¢˜ï¼Œå®ƒä»¬æ˜¯å¾®æœåŠ¡é›†ç¾¤çš„å…¸å‹é—®é¢˜ï¼Œé‚£å¾®æœåŠ¡é›†ç¾¤çš„æµ‹è¯•ï¼Œè¯¥æ€ä¹ˆé¿å…è¿™äº›é—®é¢˜å‘¢ï¼Ÿ</p><p>æœ‰ä¸¤ä¸ªæ¯”è¾ƒå¥½çš„å®è·µï¼Œæ¨èä½ å°è¯•ä¸€ä¸‹ã€‚</p><p>ç¬¬ä¸€ï¼Œæµ‹è¯•è®¾è®¡å…ˆè¡ŒåŸåˆ™ã€‚</p><p>æµ‹è¯•è®¾è®¡å…ˆè¡Œï¼Œéœ€è¦çš„æ˜¯å¼€å‘è®¾è®¡å…ˆè¡Œã€‚å¼€å‘ä¸åšè®¾è®¡ï¼Œæµ‹è¯•å¹²ç€æ€¥ä¹Ÿæ²¡æ³•è®¾è®¡ã€‚æ€ä¹ˆç£ä¿ƒå¼€å‘è®¾è®¡å…ˆè¡Œå‘¢ï¼Ÿä¸€ä¸ªå…³é”®æŒ‡æ ‡æ˜¯ï¼Œå®ƒåœ¨è®¾è®¡é˜¶æ®µæ˜¯å¦è¾“å‡ºäº†æ¥å£è§„æ ¼è¯´æ˜ä¹¦ã€‚<strong>å¯¹äºå¼€å‘å·¥ä½œæ¥è¯´ï¼Œæ˜¯éœ€è¦å»ä»£ç å®ç°çš„å¼€å‘éœ€æ±‚ã€‚å¯¹äºæµ‹è¯•å·¥ä½œæ¥è¯´ï¼Œå®ƒå°±æ˜¯æµ‹è¯•éœ€æ±‚ï¼Œéœ€è¦æ ¹æ®å®ƒå†™æµ‹è¯•æ¡ˆä¾‹ã€‚</strong></p><p>ç¬¬äºŒï¼Œæ‰¾åˆ°åˆé€‚çš„IDLæ¥è¡¨è¾¾æ¥å£è®¾è®¡ã€‚</p><p>ä¸€ä»½å‘¨å¯†ã€é«˜è´¨é‡çš„æµ‹è¯•éœ€æ±‚ï¼Œä¼šæ˜¯æˆåŠŸæµ‹è¯•çš„å¼€å§‹ã€‚æ‰€ä»¥è¿™ä¸ªæ¥å£è§„æ ¼è¯´æ˜ä¹¦ä¸ä»…è¦æœ‰ï¼Œè¿˜å¾—è§„èŒƒï¼Œèƒ½æŒ‡å¯¼æˆ‘ä»¬ç”Ÿæˆæµ‹è¯•æ¡ˆä¾‹ã€‚</p><p>æ€ä¹ˆåšåˆ°å‘¢ï¼Ÿè®©å¼€å‘äººå‘˜å†™ä¸€ä»½Wordæ–‡æ¡£ï¼Ÿä¸€åƒä¸ªå¼€å‘äººå‘˜èƒ½å†™å‡ºä¸€åƒä¸ªè§„æ ¼è¯´æ˜ã€‚è¿™æ—¶ï¼ŒIDLçš„ä»·å€¼å°±æ˜¾ç°å‡ºæ¥äº†ï¼Œå®ƒæä¾›ä¸€å¥—è§„èŒƒå’Œè¯­æ³•ï¼Œåƒä¸€é—¨ä¸“ç”¨è¯­è¨€ï¼Œèƒ½ç²¾å‡†æè¿°æ¥å£ã€‚è€Œä¸”å®ƒä¸ç¼–ç¨‹è¯­è¨€æ— å…³ï¼Œå¯ä»¥æ ¹æ®IDLåšJavaçš„å®ç°ï¼Œä¹Ÿå¯ä»¥æ˜¯C++, JavaScriptï¼ŒPythonç­‰ç­‰ã€‚</p><p>OpenAPIå’ŒAsyncAPIæ˜¯IDLæ—ç¾¤é‡Œçš„2ç§ã€‚æˆ‘è¿™é‡Œåˆ—å‡ºä¸€ä¸ªå¸¸è§çš„IDLåˆ—è¡¨ï¼Œä½ å¯ä»¥çœ‹çœ‹ä½ é¢†åŸŸé‡Œçš„IDLæ˜¯ä»€ä¹ˆã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/7f/4d/7ffae5be80f21c28d878156fd5e3664d.jpg?wh=1920x623\" alt=\"å›¾ç‰‡\"><br>\næ‰¾åˆ°äº†IDLï¼Œä½ å’Œå›¢é˜Ÿå°±å¯ä»¥ä¸€èµ·å•†é‡æ€ä¹ˆè·µè¡Œè®¾è®¡å…ˆè¡ŒåŸåˆ™ï¼Œä½¿ç”¨IDLè®¾è®¡æ¥å£äº†ã€‚æœ‰äº†è§„æ ¼è¯´æ˜ä¹¦ä¹‹åï¼Œä¹‹åæˆ‘ä»¬è¿˜ä¼šè®²åˆ°ï¼Œåœ¨æµ‹è¯•é˜¶æ®µæ€ä¹ˆè¿ç”¨å®ƒä»¬è®¾è®¡ã€å¼€å‘æµ‹è¯•æ¡ˆä¾‹ï¼Œæ•¬è¯·æœŸå¾…ã€‚</p><h2>å°ç»“</h2><p>è¿™ä¸€è®²ï¼Œæˆ‘ä»¬å…ˆåˆ†æäº†FoodComeå‡çº§æˆä¸ºå¾®æœåŠ¡é›†ç¾¤æ¶æ„åï¼Œå‘ç”Ÿäº†å“ªäº›å˜åŒ–ã€‚å…¶ä¸­æœ€ä¸»è¦å°±æ˜¯æœåŠ¡é—´çš„äº¤äº’é‡å¤§å¹…å¢åŠ ã€‚Foodcomeé‡‡ç”¨äº†2ç§äº¤äº’æ–¹å¼ï¼Œä¸€æ˜¯RestAPIåŒæ­¥æ¥å£ï¼Œç”¨æ¥æ¥æ”¶ç”¨æˆ·çš„è®¢å•ï¼›äºŒæ˜¯Message Queueçš„å¼‚æ­¥æ¥å£ï¼Œç”¨æ¥å¤„ç†ç”¨æˆ·çš„è®¢å•ã€‚</p><p>è¿™ä¸¤ç§APIåœ¨è®¾è®¡ä¸­ç”¨åˆ°äº†ä¸åŒçš„IDLï¼šOpenAPIå’ŒAsyncAPIï¼Œäº§ç”Ÿå‡ºæ¥çš„æ¥å£è§„æ ¼è¯´æ˜ä¹¦æ˜¯<strong>YAMLæ–‡ä»¶</strong>ã€‚è¿™ä¸ªYAMLæ–‡ä»¶å¯¹å¼€å‘å¾ˆé‡è¦ï¼Œå¯ä»¥ä¿è¯ä»–ä»¬å¼€å‘å‡ºæ¥çš„å¾®æœåŠ¡åœ¨é›†æˆæ—¶ï¼Œèƒ½å’¬åˆåœ¨ä¸€èµ·ï¼›å¯¹äºæµ‹è¯•æ¥è¯´ä¹Ÿå¾ˆé‡è¦ï¼Œè¿™æ˜¯åç»­æµ‹è¯•çš„æµ‹è¯•éœ€æ±‚ã€‚åœ¨åé¢çš„æµ‹è¯•é˜¶æ®µï¼Œæˆ‘ä»¬éœ€è¦å»éªŒè¯ï¼ŒæœåŠ¡æ˜¯ä¸æ˜¯éµå¾ªäº†æ¥å£ã€‚</p><p>å½“ç„¶å¾®æœåŠ¡æ¶æ„è¿˜æœ‰ä¸€äº›å…¶ä»–å˜åŒ–ï¼Œæ¯”å¦‚æœåŠ¡çš„æ²»ç†æ¨¡å¼ï¼Œåˆ†å¸ƒå¼äº‹åŠ¡ï¼Œå¯é æ€§çš„å®ç°ç­‰ç­‰ã€‚æˆ‘ä»¬æœ¬ä¸“æ å…³æ³¨å’Œè‡ªåŠ¨åŒ–ç›¸å…³çš„æµ‹è¯•éœ€æ±‚ï¼Œå…¶ä»–å˜åŒ–å¯èƒ½éœ€è¦å¼€ä¸€ä¸ªæ–°ä¸“æ æ‰èƒ½è¯¦ç»†è®¨è®ºã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/08/61/0853ba4b25a66d1e21ebd2556a62bd61.jpg?wh=1990x1520\" alt=\"\"></p><h2>æ€è€ƒé¢˜</h2><p>åœ¨ä½ çš„é¡¹ç›®ç»„é‡Œï¼Œèƒ½ä¸èƒ½æ¨è¡Œè®¾è®¡å…ˆè¡Œï¼Œä½ é¢„æƒ³ä¼šé‡åˆ°ä»€ä¹ˆå›°éš¾ï¼Œè¦æ€ä¹ˆåº”å¯¹å‘¢ï¼Ÿ</p><p>æ¬¢è¿ä½ åœ¨ç•™è¨€åŒºå’Œæˆ‘äº¤æµäº’åŠ¨ï¼Œä¹Ÿæ¨èä½ æŠŠè¿™ä¸€è®²åˆ†äº«ç»™æ›´å¤šåŒäº‹ã€æœ‹å‹ã€‚</p>","comments":[{"had_liked":false,"id":342708,"user_name":"å°å§å§","can_delete":false,"product_type":"c1","uid":1423965,"ip_address":"","ucode":"A857C01123465F","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/4licJxNRH6yZLPjPlsbIiaCNPPGDb3cpWJJO3Tm0hFStIMYfIzrrjjWOYjvGK8ro1zcibiaRPT0j9koeA9oGak64lA/132","comment_is_top":false,"comment_ctime":1650427330,"is_pvip":false,"replies":[{"id":125276,"content":"è°¢è°¢åˆ†äº«ç°çŠ¶ï¼Œèƒ½æ€»ç»“åˆ°è¿™ä¸ªç¨‹åº¦ï¼Œå·²ç»éå¸¸äº†ä¸èµ·äº†ï¼æƒ³å¿…åº”è¯¥ä¹Ÿåœ¨ç»å†ç—›è‹¦ï¼Œèƒ½æ”¹å˜çš„å°±æ”¹å˜ï¼Œä¸èƒ½æ”¹å˜çš„å°±æ¥å—ï¼Œæ¥å—ä¸äº†å°±èµ°äººï¼ğŸ˜„","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1877634,"ctime":1650550076,"ip_address":"","comment_id":342708,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100109201,"comment_content":"æ¥¼ä¸‹å·²ç»å›ç­”äº†å¾®æœåŠ¡çš„æµ‹è¯•é‡ç‚¹ï¼Œæˆ‘å†™ä¸‹å¾®æœåŠ¡æµ‹è¯•ç›®å‰å…ˆåœ¨å…¬å¸é¢ä¸´çš„éš¾ç‚¹ï¼Œæœ‰å¾ˆå¤šæ—¶å€™éœ€è¦å€ŸåŠ©å¼€å‘å¤§ä½¬çš„â€œå¨åŠ›â€æ¥éœ‡æ…‘ï¼Œè¿›è¡Œæ¨åŠ¨\n1.å¼€å‘è®¾è®¡ä¸èƒ½å…ˆè¡Œ  å¤šæ•°æƒ…å†µæ˜¯è¾¹å¼€å‘è¾¹ä¿®æ”¹ï¼Œé€ æˆå¾ˆå¤šé—æ¼ï¼Œæµ‹è¯•çš„æµ‹è¯•æ¡©æˆ–è€…ç”¨ä¾‹è®¾è®¡ä¹Ÿæ˜¯åƒç–®ç™¾å­”ï¼Œä¿®ä¿®è¡¥è¡¥\n2.æ¨ä¸åŠ¨å¼€å‘è¿›è¡Œè®¾è®¡å…ˆè¡Œï¼Œè¿™çœŸçš„éœ€è¦é«˜å±‚çš„é¢†å¯¼åŠ›è¿›è¡Œæ–½å‹\n3.å¼€å‘è®¤çŸ¥è®¾è®¡å°±åœ¨æˆ‘è„‘è¢‹é‡Œï¼Œå¯ä»¥å…ˆä¸è®¾è®¡ï¼Œä¸€åˆ‡éƒ½åœ¨æˆ‘è„‘è¢‹é‡Œï¼Œæœ‰é—®é¢˜å°±å½“é¢å£è¿°\n4.è®¾è®¡æ–‡æ¡£ï¼Œç§è‡ªæ”¹åŠ¨ï¼Œä¸é€šçŸ¥ç›¸å…³æ–¹ï¼Œé€ æˆæ•´ä½“ä¸šåŠ¡æµå µå¡\n5.è®¾è®¡æ–‡æ¡£ä¸åŠæ—¶æ›´æ–°ï¼Œä¸å®é™…çš„ä¸šåŠ¡ä¸ä¸€è‡´","like_count":8,"discussions":[{"author":{"id":1877634,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/a6/82/791d0f5e.jpg","nickname":"æŸ³èƒœ","note":"","ucode":"50F35834586E4A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":565866,"discussion_content":"è°¢è°¢åˆ†äº«ç°çŠ¶ï¼Œèƒ½æ€»ç»“åˆ°è¿™ä¸ªç¨‹åº¦ï¼Œå·²ç»éå¸¸äº†ä¸èµ·äº†ï¼æƒ³å¿…åº”è¯¥ä¹Ÿåœ¨ç»å†ç—›è‹¦ï¼Œèƒ½æ”¹å˜çš„å°±æ”¹å˜ï¼Œä¸èƒ½æ”¹å˜çš„å°±æ¥å—ï¼Œæ¥å—ä¸äº†å°±èµ°äººï¼ğŸ˜„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650550076,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1633901,"avatar":"https://static001.geekbang.org/account/avatar/00/18/ee/6d/1e715544.jpg","nickname":"è§ç‘Ÿ","note":"","ucode":"0C182BA4EF650C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":572034,"discussion_content":"åŒå­¦ï¼Œç¬¬ä¸‰ç‚¹æ„ŸåŒèº«å— ğŸ¥±","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1652577395,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":341530,"user_name":"å¤ªåŒ†åŒ†","can_delete":false,"product_type":"c1","uid":1628299,"ip_address":"","ucode":"2F3F273CB65F5D","user_header":"https://static001.geekbang.org/account/avatar/00/18/d8/8b/d81769bf.jpg","comment_is_top":false,"comment_ctime":1649678681,"is_pvip":false,"replies":[{"id":124807,"content":"ä»æµ‹è¯•æ¥çœ‹ï¼Œæ¨åŠ¨å¼€å‘ç¡®å®æœ‰å›°éš¾ã€‚ä½†å¦‚æœå¼€å‘å’Œæµ‹è¯•æŒ‰ä¸€æœ¬å¸æ¥ç®—çš„è¯ï¼Œå•å…ƒæµ‹è¯•çš„ROIæœ€é«˜ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆDevopsèƒ½å¤Ÿå¤§è¡Œå…¶é“çš„å†…æ ¸é€»è¾‘ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1877634,"ctime":1649728231,"ip_address":"","comment_id":341530,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100109201,"comment_content":"è®¾è®¡å…ˆè¡Œæœ‰ç‚¹éš¾ä»¥å¼€å±•ï¼Œç‰¹åˆ«æ˜¯æµ‹è¯•å»æ¨åŠ¨è¿™ä¸ªäº‹æƒ…ã€‚","like_count":3,"discussions":[{"author":{"id":1877634,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/a6/82/791d0f5e.jpg","nickname":"æŸ³èƒœ","note":"","ucode":"50F35834586E4A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":561820,"discussion_content":"ä»æµ‹è¯•æ¥çœ‹ï¼Œæ¨åŠ¨å¼€å‘ç¡®å®æœ‰å›°éš¾ã€‚ä½†å¦‚æœå¼€å‘å’Œæµ‹è¯•æŒ‰ä¸€æœ¬å¸æ¥ç®—çš„è¯ï¼Œå•å…ƒæµ‹è¯•çš„ROIæœ€é«˜ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆDevopsèƒ½å¤Ÿå¤§è¡Œå…¶é“çš„å†…æ ¸é€»è¾‘ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649728232,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":347474,"user_name":"Geek_d00d65","can_delete":false,"product_type":"c1","uid":2572973,"ip_address":"","ucode":"64D5574B05C176","user_header":"","comment_is_top":false,"comment_ctime":1654066959,"is_pvip":false,"replies":[{"id":126709,"content":"è¿™æ˜¯å¾ˆå¥½çš„å›¢é˜Ÿå®è·µï¼å»ºè®®å‚è€ƒç¬¬äºŒæ¨¡å—çš„å†…å®¹ï¼Œå¯ä»¥æƒ³æƒ³èƒ½ä¸èƒ½è‡ªåŠ¨åŒ–æµ‹è¯•è®¾è®¡å…ˆè¡Œã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1877634,"ctime":1654171766,"ip_address":"","comment_id":347474,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100109201,"comment_content":"ä¸€èˆ¬æ­£å¸¸æ’æœŸçš„é¡¹ç›®éƒ½æ˜¯ä¼šåœ¨éœ€æ±‚è¯„å®¡åï¼Œè¿›è¡Œæ•°æ®åº“è®¾è®¡å’Œæ¥å£è®¾è®¡ï¼Œè®¾è®¡å®Œåè¿›è¡Œæ•°æ®åº“å’Œæ¥å£è¯„å®¡ï¼Œæ¥å£è®¾è®¡ä¹Ÿæ˜¯æŒ‰RESTfulè§„èŒƒè®¾è®¡","like_count":1,"discussions":[{"author":{"id":1877634,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/a6/82/791d0f5e.jpg","nickname":"æŸ³èƒœ","note":"","ucode":"50F35834586E4A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":574601,"discussion_content":"è¿™æ˜¯å¾ˆå¥½çš„å›¢é˜Ÿå®è·µï¼å»ºè®®å‚è€ƒç¬¬äºŒæ¨¡å—çš„å†…å®¹ï¼Œå¯ä»¥æƒ³æƒ³èƒ½ä¸èƒ½è‡ªåŠ¨åŒ–æµ‹è¯•è®¾è®¡å…ˆè¡Œã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1654171766,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":344800,"user_name":"æ´¾æ£®","can_delete":false,"product_type":"c1","uid":1169937,"ip_address":"","ucode":"063AC75FA77EFB","user_header":"https://static001.geekbang.org/account/avatar/00/11/da/11/bdffffa6.jpg","comment_is_top":false,"comment_ctime":1651798938,"is_pvip":false,"replies":[{"id":126068,"content":"è°¢è°¢åˆ†äº«ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1877634,"ctime":1652234354,"ip_address":"","comment_id":344800,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100109201,"comment_content":"æˆ‘ä»¬é¡¹ç›®å¾ˆå¥‡è‘©ï¼Œæ˜¯è´­ä¹°çš„ä»£ç ï¼Œé¢†å¯¼å±‚åªæƒ³æ”¹å§æ”¹å§ä¸Šçº¿ï¼Œç„¶åå°±æ˜¯æŠ½äººåŠ›å‡ºå»åšå…¶ä»–ä»·å€¼æ›´é«˜çš„é¡¹ç›®ï¼Œè¿™ç§é¡¹ç›®è¿æ¥å£ç æµéƒ½æ˜¯ä¸Šåå°æŠ“çš„ï¼Œå¤ªéª¨æ„Ÿäº†ï¼Œä½†æ˜¯æˆ‘è§‰å¾—è€å¸ˆçš„è¿™ä¸€å¥—å¾ˆå¥½ï¼Œé¡¹ç›®å¤–åŒ…äººåŠ›æµåŠ¨æ€§å¾ˆå¼ºï¼Œæœ‰è¿™æ ·çš„è§„åˆ™åœ¨ï¼Œå°±æ˜¯ä¸€åªæ— å½¢çš„æ‰‹ä¸ºä¿é©¾æŠ¤èˆªï¼Œè¦æï¼è¦å¥½å¥½æï¼","like_count":1,"discussions":[{"author":{"id":1877634,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/a6/82/791d0f5e.jpg","nickname":"æŸ³èƒœ","note":"","ucode":"50F35834586E4A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":571460,"discussion_content":"è°¢è°¢åˆ†äº«ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1652234354,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":340988,"user_name":"lisa","can_delete":false,"product_type":"c1","uid":1508049,"ip_address":"","ucode":"62CB6333CBF7B6","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLw3jpao45frZibQIAicWBfc7ofgrm5gJLiaFQSj5u2DDvkjy3ia5goicJLJlgVtZ0HryiaXb2VqpTSQT5Q/132","comment_is_top":false,"comment_ctime":1649255912,"is_pvip":false,"replies":[{"id":124754,"content":"ç†è§£åˆ°ä½ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1877634,"ctime":1649518044,"ip_address":"","comment_id":340988,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100109201,"comment_content":"å¾®æœåŠ¡æµ‹è¯•æ›´é‡è¦çš„æ˜¯åšæ¥å£æµ‹è¯•ï¼ˆæœåŠ¡è‡ªèº«ï¼ˆåç«¯mockï¼‰ä»¥åŠé›†æˆå¤šä¸ªå¾®æœåŠ¡è°ƒç”¨é“¾è·¯ä»¥åŠåŸºäºç”¨æˆ·åœºæ™¯çš„æµ‹è¯•ï¼‰ï¼Œå› ä¸ºå¾®æœåŠ¡æ‹†åˆ†ä¹‹åå¯èƒ½ç”±å¤šä¸ªäººè´Ÿè´£ï¼Œå¾®æœåŠ¡æœ¬èº«ä»£ç é€»è¾‘æ¯”è¾ƒç®€å•æ‰€ä»¥å•å…ƒæµ‹è¯•ä¸æ˜¯é‡ç‚¹ï¼Œé‡ç‚¹æ˜¯å¤šä¸ªäººååŒä¸Šç»å¸¸ä¼šå‡ºç°ä¸šåŠ¡é€»è¾‘ç†è§£ä¸ä¸€è‡´æˆ–è€…ç¼ºä¹æ²Ÿé€šå¯¼è‡´çš„BUGï¼Œè¿™äº›éƒ½éœ€è¦ä¾èµ–æ¥å£æµ‹è¯•å’Œé›†æˆæµ‹è¯•æ¥å‘ç°","like_count":1,"discussions":[{"author":{"id":1877634,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/a6/82/791d0f5e.jpg","nickname":"æŸ³èƒœ","note":"","ucode":"50F35834586E4A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":561045,"discussion_content":"ç†è§£åˆ°ä½ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649518044,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":340925,"user_name":"è¿½é£ç­çš„äºº","can_delete":false,"product_type":"c1","uid":1488020,"ip_address":"","ucode":"2993D60F94C396","user_header":"https://static001.geekbang.org/account/avatar/00/16/b4/94/2796de72.jpg","comment_is_top":false,"comment_ctime":1649231168,"is_pvip":false,"replies":[{"id":124659,"content":"å…ˆæ•´ä½“è®¾è®¡ï¼Œå†å„ä¸ªå‡»ç ´ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1877634,"ctime":1649253659,"ip_address":"","comment_id":340925,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100109201,"comment_content":"åœ¨æµ‹è¯•é˜¶æ®µæ€ä¹ˆè¿ç”¨å®ƒä»¬è®¾è®¡ã€å¼€å‘æµ‹è¯•æ¡ˆä¾‹ï¼Œç­‰å¾…ä¸­ã€‚ã€‚ã€‚ã€‚ã€‚","like_count":1,"discussions":[{"author":{"id":1877634,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/a6/82/791d0f5e.jpg","nickname":"æŸ³èƒœ","note":"","ucode":"50F35834586E4A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":560297,"discussion_content":"å…ˆæ•´ä½“è®¾è®¡ï¼Œå†å„ä¸ªå‡»ç ´ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649253659,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":387517,"user_name":"ifelse","can_delete":false,"product_type":"c1","uid":2550743,"ip_address":"æµ™æ±Ÿ","ucode":"D0565908C99695","user_header":"https://static001.geekbang.org/account/avatar/00/26/eb/d7/90391376.jpg","comment_is_top":false,"comment_ctime":1707718017,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":3,"score":2,"product_id":100109201,"comment_content":"å­¦ä¹ æ‰“å¡","like_count":0},{"had_liked":false,"id":377068,"user_name":"ç‹å°å¡","can_delete":false,"product_type":"c1","uid":1163677,"ip_address":"è¾½å®","ucode":"83992F85F10E46","user_header":"https://static001.geekbang.org/account/avatar/00/11/c1/9d/d75736be.jpg","comment_is_top":false,"comment_ctime":1687908472,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100109201,"comment_content":"IDLå°±æ˜¯æ¥å£å¼æ ·çš„æ„æ€å—ï¼ŸOpenAPIå’ŒSwaggerä¸€æ ·çš„å·¥å…·å—ï¼Ÿ","like_count":0}]}