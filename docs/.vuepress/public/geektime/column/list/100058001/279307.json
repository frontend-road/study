{"id":279307,"title":"05 åˆ†æç¯‡ | å¦‚ä½•åˆ¤æ–­é—®é¢˜æ˜¯å¦ç”±Page Cacheäº§ç”Ÿçš„ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯é‚µäºšæ–¹ã€‚</p><p>åœ¨å‰é¢å‡ èŠ‚è¯¾é‡Œï¼Œæˆ‘ä»¬è®²äº†Page Cacheçš„ä¸€äº›åŸºç¡€çŸ¥è¯†ï¼Œä»¥åŠå¦‚ä½•å»å¤„ç†Page Cacheå¼•å‘çš„ä¸€äº›é—®é¢˜ã€‚è¿™èŠ‚è¯¾æˆ‘ä»¬æ¥è®²è®²ï¼Œå¦‚ä½•åˆ¤æ–­é—®é¢˜æ˜¯ä¸æ˜¯ç”±Page Cacheå¼•èµ·çš„ã€‚</p><p>æˆ‘ä»¬çŸ¥é“ï¼Œä¸€ä¸ªé—®é¢˜å¾€å¾€ç‰µæ‰¯åˆ°æ“ä½œç³»ç»Ÿçš„å¾ˆå¤šæ¨¡å—ï¼Œæ¯”å¦‚è¯´ï¼Œå½“ç³»ç»Ÿå‡ºç°loadé£™é«˜çš„é—®é¢˜æ—¶ï¼Œå¯èƒ½æ˜¯Page Cacheå¼•èµ·çš„ï¼›ä¹Ÿå¯èƒ½æ˜¯é”å†²çªå¤ªå‰å®³ï¼Œç‰©ç†èµ„æºï¼ˆCPUã€å†…å­˜ã€ç£ç›˜I/Oã€ç½‘ç»œI/Oï¼‰æœ‰äº‰æŠ¢å¯¼è‡´çš„ï¼›ä¹Ÿå¯èƒ½æ˜¯å†…æ ¸ç‰¹æ€§è®¾è®¡ç¼ºé™·å¯¼è‡´çš„ï¼Œç­‰ç­‰ã€‚</p><p>å¦‚æœæˆ‘ä»¬æ²¡æœ‰åˆ¤æ–­æ¸…æ¥šé—®é¢˜æ˜¯å¦‚ä½•å¼•èµ·çš„è€Œè´¸ç„¶é‡‡å–æªæ–½ï¼Œéä½†æ— æ³•è§£å†³é—®é¢˜ï¼Œåè€Œä¼šå¼•èµ·å…¶ä»–è´Ÿé¢å½±å“ï¼Œæ¯”å¦‚è¯´ï¼Œloadé£™é«˜æœ¬æ¥æ˜¯Page Cacheå¼•èµ·çš„ï¼Œå¦‚æœä½ æ²¡æœ‰æŸ¥æ¸…æ¥šåŸå› ï¼Œè€Œè¯¯ä»¥ä¸ºæ˜¯ç½‘ç»œå¼•èµ·çš„ï¼Œç„¶åå¯¹ç½‘ç»œè¿›è¡Œé™æµï¼Œçœ‹èµ·æ¥æŠŠé—®é¢˜è§£å†³äº†ï¼Œä½†æ˜¯ç³»ç»Ÿè¿è¡Œä¹…äº†è¿˜æ˜¯ä¼šå‡ºç°loadé£™é«˜ï¼Œè€Œä¸”é™æµè¿™ç§è¡Œä¸ºè¿˜é™ä½äº†ç³»ç»Ÿè´Ÿè½½èƒ½åŠ›ã€‚</p><p>é‚£ä¹ˆå½“é—®é¢˜å‘ç”Ÿæ—¶ï¼Œæˆ‘ä»¬å¦‚ä½•åˆ¤æ–­å®ƒæ˜¯ä¸æ˜¯ç”±Page Cacheå¼•èµ·çš„å‘¢ï¼Ÿ</p><h2>Linuxé—®é¢˜çš„å…¸å‹åˆ†ææ‰‹æ®µ</h2><p>Linuxä¸Šæœ‰ä¸€äº›å…¸å‹çš„é—®é¢˜åˆ†ææ‰‹æ®µï¼Œä»è¿™äº›åŸºæœ¬çš„åˆ†ææ–¹æ³•å…¥æ‰‹ï¼Œä½ å¯ä»¥ä¸€æ­¥æ­¥åˆ¤æ–­å‡ºé—®é¢˜æ ¹å› ã€‚è¿™äº›åˆ†ææ‰‹æ®µï¼Œå¯ä»¥ç®€å•åœ°å½’çº³ä¸ºä¸‹å›¾ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/ee/c1/ee08329fc5eb7fb8ddff14dba9ebf0c1.jpg?wh=2200*1184\" alt=\"\" title=\"Linuxçš„å…¸å‹åˆ†ææ‰‹æ®µ\"></p><p>ä»è¿™å¼ å›¾ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒLinuxå†…æ ¸ä¸»è¦æ˜¯é€šè¿‡/procå’Œ/sysæŠŠç³»ç»Ÿä¿¡æ¯å¯¼å‡ºç»™ç”¨æˆ·ï¼Œå½“ä½ ä¸æ¸…æ¥šé—®é¢˜å‘ç”Ÿçš„åŸå› æ—¶ï¼Œä½ å°±å¯ä»¥è¯•ç€å»è¿™å‡ ä¸ªç›®å½•ä¸‹è¯»å–ä¸€ä¸‹ç³»ç»Ÿä¿¡æ¯ï¼Œçœ‹çœ‹å“ªäº›æŒ‡æ ‡å¼‚å¸¸ã€‚æ¯”å¦‚å½“ä½ ä¸æ¸…æ¥šé—®é¢˜æ˜¯å¦ç”±Page Cacheå¼•èµ·æ—¶ï¼Œä½ å¯ä»¥è¯•ç€å»æŠŠ/proc/vmstaté‡Œé¢çš„ä¿¡æ¯ç»™è¯»å–å‡ºæ¥ï¼Œçœ‹çœ‹å“ªäº›æŒ‡æ ‡å•ä½æ—¶é—´å†…å˜åŒ–è¾ƒå¤§ã€‚å¦‚æœpgscanç›¸å…³æŒ‡æ ‡å˜åŒ–è¾ƒå¤§ï¼Œé‚£å°±å¯èƒ½æ˜¯Page Cacheå¼•èµ·çš„ï¼Œå› ä¸ºpgscanä»£è¡¨äº†Page Cacheçš„å†…å­˜å›æ”¶è¡Œä¸ºï¼Œå®ƒå˜åŒ–è¾ƒå¤§å¾€å¾€æ„å‘³ç€ç³»ç»Ÿå†…å­˜å‹åŠ›å¾ˆç´§å¼ ã€‚</p><!-- [[[read_end]]] --><p>/procå’Œ/sysé‡Œé¢çš„ä¿¡æ¯å¯ä»¥ç»™æˆ‘ä»¬æŒ‡å‡ºä¸€ä¸ªé—®é¢˜åˆ†æçš„å¤§è‡´æ–¹å‘ï¼Œæˆ‘ä»¬å¯ä»¥åˆ¤æ–­å‡ºé—®é¢˜æ˜¯ä¸æ˜¯ç”±Page Cacheå¼•èµ·çš„ï¼Œä½†æ˜¯å¦‚æœæƒ³è¦æ·±å…¥åœ°åˆ†æé—®é¢˜ï¼ŒçŸ¥é“Page Cacheæ˜¯å¦‚ä½•å¼•èµ·é—®é¢˜çš„ï¼Œæˆ‘ä»¬è¿˜éœ€è¦æŒæ¡æ›´åŠ ä¸“ä¸šçš„åˆ†ææ‰‹æ®µï¼Œä¸“ä¸šçš„åˆ†æå·¥å…·æœ‰ftraceï¼Œebpfï¼Œperfç­‰ã€‚</p><p>å½“ç„¶äº†ï¼Œè¿™äº›ä¸“ä¸šå·¥å…·çš„å­¦ä¹ æˆæœ¬ä¹Ÿç›¸å¯¹ç•¥é«˜ä¸€äº›ï¼Œä½†ä½ ä¸èƒ½è§‰å¾—å®ƒéš¾ã€æˆæœ¬é«˜ï¼Œå°±ä¸å­¦äº†ï¼Œå› ä¸ºæŒæ¡äº†è¿™äº›åˆ†æå·¥å…·åï¼Œå†é‡åˆ°ç–‘éš¾æ‚ç—‡ï¼Œä½ åˆ†æèµ·æ¥ä¼šæ›´åŠ å¾—å¿ƒåº”æ‰‹ã€‚</p><p>ä¸ºäº†è®©ä½ åœ¨é‡åˆ°é—®é¢˜æ—¶æ›´åŠ æ–¹ä¾¿åœ°æ‰¾åˆ°åˆé€‚çš„åˆ†æå·¥å…·ï¼Œæˆ‘å€Ÿç”¨<a href=\"https://www.slideshare.net/brendangregg/velocity-2015-linux-perf-tools/107\">Bredan Greggçš„ä¸€å¼ å›¾</a>ï¼Œå¹¶æ ¹æ®è‡ªå·±çš„ç»éªŒï¼ŒæŠŠè¿™å¼ å›¾ç•¥ä½œäº†ä¸€äº›æ”¹è¿›ï¼Œå¸®åŠ©ä½ å­¦ä¹ è¯¥å¦‚ä½•ä½¿ç”¨è¿™äº›åˆ†æå·¥å…·ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/0c/97/0ccc072485d8ca2b995a6e7b6a75da97.jpg?wh=3104*1714\" alt=\"\"></p><p>åœ¨è¿™å¼ å›¾é‡Œï¼Œæ•´ä½“ä¸Šè¿½è¸ªæ–¹å¼åˆ†ä¸ºäº†é™æ€è¿½è¸ªï¼ˆé¢„ç½®äº†è¿½è¸ªç‚¹ï¼‰å’ŒåŠ¨æ€è¿½è¸ªï¼ˆéœ€è¦å€ŸåŠ©probeï¼‰ï¼š</p><ul>\n<li>å¦‚æœä½ æƒ³è¦è¿½è¸ªçš„ä¸œè¥¿å·²ç»æœ‰äº†é¢„ç½®çš„è¿½è¸ªç‚¹ï¼Œé‚£ä½ ç›´æ¥ä½¿ç”¨è¿™äº›é¢„ç½®è¿½è¸ªç‚¹å°±å¯ä»¥äº†ï¼›</li>\n<li>å¦‚æœæ²¡æœ‰é¢„ç½®è¿½è¸ªç‚¹ï¼Œé‚£ä½ å°±è¦çœ‹çœ‹æ˜¯å¦å¯ä»¥ä½¿ç”¨probe(åŒ…æ‹¬kprobeå’Œuprobe)æ¥å®ç°ã€‚</li>\n</ul><p>å› ä¸ºåˆ†æå·¥å…·è‡ªèº«ä¹Ÿä¼šå¯¹ä¸šåŠ¡é€ æˆä¸€äº›å½±å“ï¼ˆHeisenbugï¼‰ï¼Œæ¯”å¦‚è¯´ä½¿ç”¨straceä¼šé˜»å¡è¿›ç¨‹çš„è¿è¡Œï¼Œå†æ¯”å¦‚ä½¿ç”¨systemtapä¹Ÿä¼šæœ‰åŠ è½½ç¼–è¯‘çš„å¼€é”€ç­‰ï¼Œ<strong>æ‰€ä»¥æˆ‘ä»¬åœ¨ä½¿ç”¨è¿™äº›å·¥å…·ä¹‹å‰ä¹Ÿéœ€è¦å»è¯¦ç»†äº†è§£ä¸‹è¿™äº›å·¥å…·çš„å‰¯ä½œç”¨ï¼Œä»¥å…å¼•èµ·æ„æ–™ä¹‹å¤–çš„é—®é¢˜</strong>ã€‚</p><p>æ¯”å¦‚æˆ‘å¤šå¹´ä»¥å‰åœ¨ä½¿ç”¨systemtapçš„guruï¼ˆä¸“å®¶ï¼‰æ¨¡å¼çš„æ—¶å€™ï¼Œå› ä¸ºæ²¡æœ‰è€ƒè™‘åˆ°systemtapè¿›ç¨‹å¼‚å¸¸é€€å‡ºåï¼Œå¯èƒ½ä¸ä¼šå¸è½½systemtapæ¨¡å—ä»è€Œå¼•å‘ç³»ç»Ÿpanicçš„é—®é¢˜ã€‚</p><p>ä¸Šé¢è¿™äº›å°±æ˜¯Linuxé—®é¢˜çš„ä¸€äº›å…¸å‹åˆ†ææ–¹æ³•ï¼Œäº†è§£äº†è¿™äº›åˆ†ææ–¹æ³•ï¼Œä½ å†é‡åˆ°é—®é¢˜å°±èƒ½çŸ¥é“è¯¥é€‰æ‹©ä»€ä¹ˆæ ·çš„å·¥å…·æ¥å»åˆ†æã€‚å¯¹äºPage Cacheè€Œè¨€ï¼Œé¦–å…ˆæˆ‘ä»¬å¯ä»¥é€šè¿‡/proc/vmstatæ¥åšä¸€ä¸ªå¤§è‡´åˆ¤æ–­ï¼Œç„¶åå†ç»“åˆPage Cacheçš„tracepointæ¥åšæ›´åŠ æ·±å…¥çš„åˆ†æã€‚</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬ä¸€èµ·åˆ†æä¸¤ä¸ªå…·ä½“é—®é¢˜ã€‚</p><h2>ç³»ç»Ÿç°åœ¨loadå¾ˆé«˜ï¼Œæ˜¯ç”±Page Cacheå¼•èµ·çš„å—ï¼Ÿ</h2><p>æˆ‘ç›¸ä¿¡ä½ è‚¯å®šä¼šé‡åˆ°è¿‡è¿™ç§åœºæ™¯ï¼šä¸šåŠ¡ä¸€ç›´ç¨³å®šè¿è¡Œç€å´å¿½ç„¶å‡ºç°å¾ˆå¤§çš„æ€§èƒ½æŠ–åŠ¨ï¼Œæˆ–è€…ç³»ç»Ÿä¸€ç›´ç¨³å®šè¿è¡Œç€å´å¿½ç„¶å‡ºç°è¾ƒé«˜çš„loadå€¼ï¼Œé‚£æ€ä¹ˆå»åˆ¤æ–­è¿™ä¸ªé—®é¢˜æ˜¯ä¸æ˜¯ç”±Page Cacheå¼•èµ·çš„å‘¢ï¼Ÿåœ¨è¿™é‡Œï¼Œæˆ‘æ ¹æ®è‡ªå·±å¤šå¹´çš„ç»éªŒï¼Œæ€»ç»“äº†ä¸€äº›åˆ†æçš„æ­¥éª¤ã€‚</p><p>åˆ†æé—®é¢˜çš„ç¬¬ä¸€æ­¥ï¼Œå°±æ˜¯éœ€è¦å¯¹ç³»ç»Ÿçš„æ¦‚æ‹¬åšä¸€ä¸ªäº†è§£ï¼Œå¯¹äºPage Caheç›¸å…³çš„é—®é¢˜ï¼Œæˆ‘æ¨èä½ <strong>ä½¿ç”¨saræ¥é‡‡é›†Page Cacheçš„æ¦‚å†µ</strong>ï¼Œå®ƒæ˜¯ç³»ç»Ÿé»˜è®¤é…ç½®å¥½çš„å·¥å…·ï¼Œä½¿ç”¨èµ·æ¥éå¸¸ç®€å•æ–¹ä¾¿ã€‚</p><p>æˆ‘åœ¨è¯¾ç¨‹çš„ç¬¬1è®²ä¹Ÿæåˆ°äº†å¯¹sarçš„ä¸€äº›ä½¿ç”¨ï¼šæ¯”å¦‚é€šè¿‡sar -Bæ¥åˆ†æåˆ†é¡µä¿¡æ¯(Paging statistics)ï¼Œ ä»¥åŠsar -ræ¥åˆ†æå†…å­˜ä½¿ç”¨æƒ…å†µç»Ÿè®¡(Memory utilization statistics)ç­‰ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ç‰¹åˆ«æ¨èä½ ä½¿ç”¨saré‡Œé¢è®°å½•çš„PSIï¼ˆPressure-Stall Informationï¼‰ä¿¡æ¯æ¥æŸ¥çœ‹Page Cacheäº§ç”Ÿå‹åŠ›æƒ…å†µï¼Œå°¤å…¶æ˜¯ç»™ä¸šåŠ¡äº§ç”Ÿçš„å‹åŠ›ï¼Œè€Œè¿™äº›å‹åŠ›æœ€ç»ˆéƒ½ä¼šä½“ç°åœ¨loadä¸Šã€‚ä¸è¿‡è¯¥åŠŸèƒ½éœ€è¦4.20ä»¥ä¸Šçš„å†…æ ¸ç‰ˆæœ¬æ‰æ”¯æŒï¼ŒåŒæ—¶sarçš„ç‰ˆæœ¬ä¹Ÿè¦æ›´æ–°åˆ°12.3.3ç‰ˆæœ¬ä»¥ä¸Šã€‚æ¯”å¦‚PSIä¸­è¡¨ç¤ºå†…å­˜å‹åŠ›çš„å¦‚ä¸‹è¾“å‡ºï¼š</p><pre><code>some avg10=45.49 avg60=10.23 avg300=5.41 total=76464318\nfull avg10=40.87 avg60=9.05 avg300=4.29 total=58141082\n</code></pre><p>ä½ éœ€è¦é‡ç‚¹å…³æ³¨avg10è¿™ä¸€åˆ—ï¼Œå®ƒè¡¨ç¤ºæœ€è¿‘10så†…å­˜çš„å¹³å‡å‹åŠ›æƒ…å†µï¼Œå¦‚æœå®ƒå¾ˆå¤§ï¼ˆæ¯”å¦‚å¤§äº40ï¼‰é‚£loadé£™é«˜å¤§æ¦‚ç‡æ˜¯ç”±äºå†…å­˜å‹åŠ›ï¼Œå°¤å…¶æ˜¯Page Cacheçš„å‹åŠ›å¼•èµ·çš„ã€‚</p><p>æ˜ç™½äº†æ¦‚å†µä¹‹åï¼Œæˆ‘ä»¬è¿˜éœ€è¦è¿›ä¸€æ­¥æŸ¥çœ‹ç©¶ç«Ÿæ˜¯Page Cacheçš„ä»€ä¹ˆè¡Œä¸ºå¼•èµ·çš„ç³»ç»Ÿå‹åŠ›ã€‚</p><p>å› ä¸ºsaré‡‡é›†çš„åªæ˜¯ä¸€äº›å¸¸ç”¨çš„æŒ‡æ ‡ï¼Œå®ƒå¹¶æ²¡æœ‰è¦†ç›–Page Cacheçš„æ‰€æœ‰è¡Œä¸ºï¼Œæ¯”å¦‚è¯´å†…å­˜è§„æ•´ï¼ˆmemory compactionï¼‰ã€ä¸šåŠ¡workingsetç­‰è¿™äº›å®¹æ˜“å¼•èµ·loadé£™é«˜çš„é—®é¢˜ç‚¹ã€‚åœ¨æˆ‘ä»¬æƒ³è¦åˆ†ææ›´åŠ å…·ä½“çš„åŸå› æ—¶ï¼Œå°±éœ€è¦å»é‡‡é›†è¿™äº›æŒ‡æ ‡äº†ã€‚é€šå¸¸åœ¨Page Cacheå‡ºé—®é¢˜æ—¶ï¼Œè¿™äº›æŒ‡æ ‡ä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªéƒ½ä¼šæœ‰å¼‚å¸¸ï¼Œè¿™é‡Œæˆ‘ç»™ä½ åˆ—å‡ºä¸€äº›å¸¸è§æŒ‡æ ‡ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/ed/bb/ed990308aef09a5918e6855362284dbb.jpg?wh=3370*2529\" alt=\"\"></p><p>é‡‡é›†å®Œè¿™äº›æŒ‡æ ‡åï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆ†æPage Cacheå¼‚å¸¸æ˜¯ç”±ä»€ä¹ˆå¼•èµ·çš„äº†ã€‚æ¯”å¦‚è¯´ï¼Œå½“æˆ‘ä»¬å‘ç°ï¼Œå•ä½æ—¶é—´å†…compact_failå˜åŒ–å¾ˆå¤§æ—¶ï¼Œé‚£å¾€å¾€æ„å‘³ç€ç³»ç»Ÿå†…å­˜ç¢ç‰‡å¾ˆä¸¥é‡ï¼Œå·²ç»å¾ˆéš¾ç”³è¯·åˆ°è¿ç»­ç‰©ç†å†…å­˜äº†ï¼Œè¿™æ—¶ä½ å°±éœ€è¦å»è°ƒæ•´ç¢ç‰‡æŒ‡æ•°æˆ–è€…æ‰‹åŠ¨è§¦å‘å†…å­˜è§„æ•´ï¼Œæ¥å‡ç¼“å› ä¸ºå†…å­˜ç¢ç‰‡å¼•èµ·çš„å‹åŠ›äº†ã€‚</p><p>æˆ‘ä»¬åœ¨å‰é¢çš„æ­¥éª¤ä¸­é‡‡é›†çš„æ•°æ®æŒ‡æ ‡ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬æ¥å®šä½åˆ°é—®é¢˜ç‚¹ç©¶ç«Ÿæ˜¯ä»€ä¹ˆï¼Œæ¯”å¦‚ä¸‹é¢è¿™äº›é—®é¢˜ç‚¹ã€‚ä½†æ˜¯æœ‰çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¿˜éœ€è¦çŸ¥é“æ˜¯ä»€ä¹ˆä¸œè¥¿åœ¨è¿›è¡Œè¿ç»­å†…å­˜çš„ç”³è¯·ï¼Œä»è€Œæ¥åšæ›´åŠ æœ‰é’ˆå¯¹æ€§çš„è°ƒæ•´ï¼Œè¿™å°±éœ€è¦è¿›è¡Œè¿›ä¸€æ­¥çš„è§‚å¯Ÿäº†ã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨å†…æ ¸é¢„ç½®çš„ç›¸å…³tracepointæ¥åšæ›´åŠ ç»†è‡´çš„åˆ†æã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/f1/f0/f14faca88b5a765690a6c1540517def0.jpg?wh=3209*1913\" alt=\"\"></p><p>æˆ‘ä»¬ç»§ç»­ä»¥å†…å­˜è§„æ•´(memory compaction)ä¸ºä¾‹ï¼Œæ¥çœ‹ä¸‹å¦‚ä½•åˆ©ç”¨tracepointæ¥å¯¹å®ƒè¿›è¡Œè§‚å¯Ÿï¼š</p><pre><code>#é¦–å…ˆæ¥ä½¿èƒ½compcationç›¸å…³çš„ä¸€äº›tracepoing\n$ echo 1 &gt;\n/sys/kernel/debug/tracing/events/compaction/mm_compaction_begin/enable\n$ echo 1 &gt;\n/sys/kernel/debug/tracing/events/compaction/mm_compaction_end/enable \n\n#ç„¶åæ¥è¯»å–ä¿¡æ¯ï¼Œå½“compactionäº‹ä»¶è§¦å‘åå°±ä¼šæœ‰ä¿¡æ¯è¾“å‡º\n$ cat /sys/kernel/debug/tracing/trace_pipe\n           &lt;...&gt;-49355 [037] .... 1578020.975159: mm_compaction_begin: \nzone_start=0x2080000 migrate_pfn=0x2080000 free_pfn=0x3fe5800 \nzone_end=0x4080000, mode=async\n           &lt;...&gt;-49355 [037] .N.. 1578020.992136: mm_compaction_end: \nzone_start=0x2080000 migrate_pfn=0x208f420 free_pfn=0x3f4b720 \nzone_end=0x4080000, mode=async status=contended\n</code></pre><p>ä»è¿™ä¸ªä¾‹å­ä¸­çš„ä¿¡æ¯é‡Œï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ˜¯49355è¿™ä¸ªè¿›ç¨‹è§¦å‘äº†compactionï¼Œbeginå’Œendè¿™ä¸¤ä¸ªtracepointè§¦å‘çš„æ—¶é—´æˆ³ç›¸å‡ï¼Œå°±å¯ä»¥å¾—åˆ°compactionç»™ä¸šåŠ¡å¸¦æ¥çš„å»¶è¿Ÿï¼Œæˆ‘ä»¬å¯ä»¥è®¡ç®—å‡ºè¿™ä¸€æ¬¡çš„å»¶è¿Ÿä¸º17msã€‚</p><p>å¾ˆå¤šæ—¶å€™ç”±äºé‡‡é›†çš„ä¿¡æ¯é‡å¤ªå¤§ï¼Œæˆ‘ä»¬å¾€å¾€éœ€è¦å€ŸåŠ©ä¸€äº›è‡ªåŠ¨åŒ–åˆ†æçš„å·¥å…·æ¥åˆ†æï¼Œè¿™æ ·ä¼šå¾ˆé«˜æ•ˆã€‚æ¯”å¦‚æˆ‘ä¹‹å‰å†™è¿‡ä¸€ä¸ª<a href=\"https://lore.kernel.org/linux-mm/20191001144524.GB3321@techsingularity.net/T/\">perf script</a>æ¥åˆ†æç›´æ¥å†…å­˜å›æ”¶å¯¹ä¸šåŠ¡é€ æˆçš„å»¶è¿Ÿã€‚å¦å¤–ä½ ä¹Ÿå¯ä»¥å‚è€ƒBrendan GreggåŸºäºbcc(eBPF)å†™çš„<a href=\"https://github.com/iovisor/bcc/blob/master/tools/drsnoop.py\">direct reclaim snoop</a>æ¥è§‚å¯Ÿè¿›ç¨‹å› ä¸ºdirect reclaimè€Œå¯¼è‡´çš„å»¶è¿Ÿã€‚</p><h2>ç³»ç»Ÿloadå€¼åœ¨æ˜¨å¤©é£™å¾—å¾ˆé«˜ï¼Œæ˜¯ç”±Page Cacheå¼•èµ·çš„å—ï¼Ÿ</h2><p>ä¸Šé¢çš„é—®é¢˜æ˜¯å®æ—¶å‘ç”Ÿçš„ï¼Œå¯¹å®æ—¶é—®é¢˜æ¥è¯´ï¼Œå› ä¸ºæœ‰ç°åœºä¿¡æ¯å¯ä¾›é‡‡é›†ï¼Œæ‰€ä»¥ç›¸å¯¹å¥½åˆ†æä¸€äº›ã€‚ä½†æ˜¯æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬æ²¡æœ‰åŠæ³•åŠæ—¶åœ°å»æœé›†ç°åœºä¿¡æ¯ï¼Œæ¯”å¦‚é—®é¢˜å‘ç”Ÿåœ¨æ·±å¤œæ—¶ï¼Œæˆ‘ä»¬æ²¡æœ‰æ¥å¾—åŠå»é‡‡é›†ç°åœºä¿¡æ¯ï¼Œè¿™ä¸ªæ—¶å€™å°±åªèƒ½æŸ¥çœ‹å†å²è®°å½•äº†ã€‚</p><p>æˆ‘ä»¬å¯ä»¥æ ¹æ®sarçš„æ—¥å¿—ä¿¡æ¯æ¥åˆ¤æ–­å½“æ—¶å‘ç”Ÿäº†ä»€ä¹ˆäº‹æƒ…ã€‚æˆ‘ä¹‹å‰å°±é‡åˆ°è¿‡ç±»ä¼¼çš„é—®é¢˜ã€‚</p><p>æ›¾ç»æœ‰ä¸€ä¸ªä¸šåŠ¡åé¦ˆè¯´RTæŠ–åŠ¨å¾—æ¯”è¾ƒæ˜æ˜¾ï¼Œè®©æˆ‘å¸®ä»–ä»¬åˆ†æä¸€ä¸‹æŠ–åŠ¨çš„åŸå› ï¼Œæˆ‘æŠŠä¸šåŠ¡RTæŠ–åŠ¨çš„æ—¶é—´å’Œsar -Bé‡Œçš„pgscandä¸ä¸º0çš„æ—¶åˆ»ç›¸æ¯”è¾ƒåå‘ç°ï¼ŒäºŒè€…åœ¨å¾ˆå¤šæ—¶å€™éƒ½æ˜¯å»åˆçš„ã€‚äºæ˜¯ï¼Œæˆ‘æ¨æ–­ä¸šåŠ¡æŠ–åŠ¨è·ŸPage Cacheå›æ”¶å­˜åœ¨ä¸€äº›å…³ç³»ï¼Œç„¶åæˆ‘è®©ä¸šåŠ¡æ–¹è°ƒvm.min_free_kbytesæ¥éªŒè¯æ•ˆæœï¼Œä¸šåŠ¡æ–¹å°†è¯¥å€¼ä»åˆå§‹å€¼90112è°ƒæ•´ä¸º4Gåæ•ˆæœç«‹ç«¿è§å½±ï¼Œå°±å‡ ä¹æ²¡æœ‰æŠ–åŠ¨äº†ã€‚</p><p>åœ¨è¿™é‡Œï¼Œæˆ‘æƒ³å†æ¬¡å¼ºè°ƒä¸€éï¼Œè°ƒæ•´vm.min_free_kbytesä¼šå­˜åœ¨ä¸€äº›é£é™©ï¼Œå¦‚æœç³»ç»Ÿæœ¬èº«å†…å­˜å›æ”¶å·²ç»å¾ˆç´§å¼ ï¼Œå†å»è°ƒå¤§å®ƒææœ‰å¯èƒ½è§¦å‘OOMç”šè‡³å¼•èµ·ç³»ç»Ÿå®•æœºã€‚æ‰€ä»¥åœ¨è°ƒå¤§çš„æ—¶å€™ï¼Œä¸€å®šè¦å…ˆåšä¸€äº›æ£€æŸ¥ï¼Œçœ‹çœ‹æ­¤æ—¶æ˜¯å¦å¯ä»¥è°ƒæ•´ã€‚</p><p>å½“ç„¶äº†ï¼Œå¦‚æœä½ çš„sysstatç‰ˆæœ¬è¾ƒæ–°å¹¶ä¸”å†…æ ¸ç‰ˆæœ¬è¾ƒé«˜ï¼Œé‚£ä½ ä¹Ÿå¯ä»¥è§‚å¯ŸPSIè®°å½•çš„æ—¥å¿—ä¿¡æ¯æ˜¯å¦è·Ÿä¸šåŠ¡æŠ–åŠ¨ç›¸å»åˆã€‚æ ¹æ®sarçš„è¿™äº›ä¿¡æ¯æˆ‘ä»¬å¯ä»¥æ¨æ–­å‡ºæ•…éšœæ˜¯å¦è·ŸPage Cacheç›¸å…³ã€‚</p><p>æ—¢ç„¶æ˜¯é€šè¿‡sarçš„æ—¥å¿—ä¿¡æ¯æ¥è¯„åˆ¤ï¼Œé‚£ä¹ˆå¯¹æ—¥å¿—ä¿¡æ¯çš„ä¸°å¯Œåº¦å°±æœ‰ä¸€å®šè¦æ±‚ã€‚ä½ éœ€è¦å¯¹å¸¸è§çš„ä¸€äº›é—®é¢˜åšä¸€äº›å½’çº³æ€»ç»“ï¼Œç„¶åæŠŠè¿™äº›å¸¸è§é—®é¢˜ç›¸å…³è”çš„æŒ‡æ ‡è®°å½•åœ¨æ—¥å¿—ä¸­ä¾›äº‹ååˆ†æï¼Œè¿™æ ·å¯ä»¥å¸®åŠ©ä½ æ›´åŠ å…¨é¢åœ°åˆ†æé—®é¢˜ï¼Œå°¤å…¶æ˜¯å‘ç”Ÿé¢‘ç‡è¾ƒé«˜çš„ä¸€äº›é—®é¢˜ã€‚</p><p>æ¯”å¦‚ï¼Œæ›¾ç»æˆ‘ä»¬çš„ä¸šåŠ¡ç»å¸¸å‘ç”Ÿä¸€äº›ä¸šåŠ¡æŠ–åŠ¨ï¼Œåœ¨é€šè¿‡æˆ‘ä»¬ä¸Šè¿°çš„åˆ†ææ‰‹æ®µåˆ†æå‡ºæ¥æ˜¯compationå¼•èµ·çš„é—®é¢˜åï¼Œè€Œä¸”è¿™ç±»é—®é¢˜è¾ƒå¤šï¼Œæˆ‘ä»¬ä¾¿æŠŠ/proc/vmstaté‡Œcompactionç›¸å…³çš„æŒ‡æ ‡ï¼ˆæˆ‘ä»¬åœ¨ä¸Šé¢çš„è¡¨æ ¼é‡Œæœ‰å†™åˆ°å…·ä½“æ˜¯å“ªäº›æŒ‡æ ‡ï¼‰è®°å½•åˆ°æˆ‘ä»¬æ—¥å¿—ç³»ç»Ÿä¸­ã€‚åœ¨ä¸šåŠ¡å†æ¬¡å‡ºç°æŠ–åŠ¨åï¼Œæˆ‘ä»¬å°±å¯ä»¥æ ¹æ®æ—¥å¿—ä¿¡æ¯æ¥åˆ¤æ–­æ˜¯å¦è·Ÿcompactionç›¸å…³äº†ã€‚</p><h2>è¯¾å ‚å›é¡¾</h2><p>å¥½äº†ï¼Œè¿™èŠ‚è¯¾æˆ‘ä»¬å°±è®²åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬ç®€å•å›é¡¾ä¸€ä¸‹ã€‚è¿™èŠ‚è¯¾æˆ‘ä»¬è®²äº†Page Cacheé—®é¢˜çš„åˆ†ææ–¹æ³•è®ºï¼ŒæŒ‰ç…§è¿™ä¸ªæ–¹æ³•è®ºæˆ‘ä»¬å‡ ä¹å¯ä»¥åˆ†ææ¸…æ¥šPage Cacheç›¸å…³çš„æ‰€æœ‰é—®é¢˜ï¼Œè€Œä¸”ä¹Ÿèƒ½å¸®åŠ©æˆ‘ä»¬äº†è§£ä¸šåŠ¡çš„å†…å­˜è®¿é—®æ¨¡å¼ï¼Œä»è€Œå¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°å¯¹ä¸šåŠ¡æ¥åšä¼˜åŒ–ã€‚</p><p>å½“ç„¶è¿™å¥—åˆ†ææ–¹æ³•è®ºä¸ä»…ä»…é€‚ç”¨äºPage Cacheå¼•å‘çš„é—®é¢˜ï¼Œå¯¹äºç³»ç»Ÿå…¶ä»–å±‚é¢å¼•èµ·çš„é—®é¢˜åŒæ ·ä¹Ÿé€‚ç”¨ã€‚è®©æˆ‘ä»¬å†æ¬¡å›é¡¾ä¸€ä¸‹è¿™äº›è¦ç‚¹ï¼š</p><ul>\n<li>åœ¨è§‚å¯ŸPage Cacheçš„è¡Œä¸ºæ—¶ï¼Œä½ å¯ä»¥å…ˆä»æœ€ç®€å•æ˜“ç”¨çš„åˆ†æå·¥å…·æ¯”å¦‚sarå…¥æ‰‹ï¼Œæ¥å¾—åˆ°ä¸€ä¸ªæ¦‚å†µï¼Œç„¶åå†ä½¿ç”¨æ›´åŠ ä¸“ä¸šä¸€äº›çš„å·¥å…·æ¯”å¦‚tracepointå»åšæ›´ç»†è‡´çš„åˆ†æã€‚è¿™æ ·ä½ å°±èƒ½åˆ†ææ¸…æ¥šPage Cacheçš„è¯¦ç»†è¡Œä¸ºï¼Œä»¥åŠå®ƒä¸ºä»€ä¹ˆä¼šäº§ç”Ÿé—®é¢˜ï¼›</li>\n<li>å¯¹äºå¾ˆå¤šçš„å¶å‘æ€§çš„é—®é¢˜ï¼Œå¾€å¾€éœ€è¦é‡‡é›†å¾ˆå¤šçš„ä¿¡æ¯æ‰èƒ½æŠ“å–å‡ºæ¥é—®é¢˜ç°åœºï¼Œè¿™ç§åœºæ™¯ä¸‹æœ€å¥½ä½¿ç”¨perf scriptæ¥å†™ä¸€äº›è‡ªåŠ¨åŒ–åˆ†æçš„å·¥å…·æ¥æå‡æ•ˆç‡ï¼›</li>\n<li>å¦‚æœä½ æ‹…å¿ƒåˆ†æå·¥å…·ä¼šå¯¹ç”Ÿäº§ç¯å¢ƒäº§ç”Ÿæ€§èƒ½å½±å“ï¼Œä½ å¯ä»¥æŠŠä¿¡æ¯é‡‡é›†ä¸‹æ¥ä¹‹åè¿›è¡Œç¦»çº¿åˆ†æï¼Œæˆ–è€…ä½¿ç”¨ebpfæ¥è¿›è¡Œè‡ªåŠ¨è¿‡æ»¤åˆ†æï¼Œè¯·æ³¨æ„ebpféœ€è¦é«˜ç‰ˆæœ¬å†…æ ¸çš„æ”¯æŒã€‚</li>\n</ul><p>è¿™æ˜¯æˆ‘æ²‰æ·€ä¸‹æ¥çš„å®šä½é—®é¢˜çš„æ–¹æ³•ã€‚ä¹Ÿå¸Œæœ›ä½ åœ¨é‡åˆ°é—®é¢˜æ—¶ä¸é€ƒé¿ï¼Œåˆ¨æ ¹é—®åº•å¯»æ‰¾æ ¹æœ¬åŸå› æ˜¯ä»€ä¹ˆï¼Œç›¸ä¿¡ä½ ä¸€å®šä¹Ÿä¼šæœ‰è‡ªå·±çš„é—®é¢˜åˆ†ææ–¹æ³•è®ºï¼Œç„¶ååœ¨å‡ºç°é—®é¢˜æ—¶èƒ½å¤Ÿå¿«é€Ÿé«˜æ•ˆåœ°æ‰¾åˆ°åŸå› ã€‚</p><h2>è¯¾åä½œä¸š</h2><p>å‡è®¾ç°åœ¨å†…å­˜ç´§å¼ ï¼Œ æœ‰å¾ˆå¤šè¿›ç¨‹éƒ½åœ¨è¿›è¡Œç›´æ¥å†…å­˜å›æ”¶ï¼Œå¦‚ä½•ç»Ÿè®¡å‡ºæ¥éƒ½æ˜¯å“ªäº›è¿›ç¨‹åœ¨è¿›è¡Œç›´æ¥å†…å­˜å›æ”¶å‘¢ï¼Ÿæ¬¢è¿åœ¨ç•™è¨€åŒºåˆ†äº«ä½ çš„çœ‹æ³•ã€‚</p><p>æ„Ÿè°¢ä½ çš„é˜…è¯»ï¼Œå¦‚æœä½ è®¤ä¸ºè¿™èŠ‚è¯¾çš„å†…å®¹æœ‰æ”¶è·ï¼Œä¹Ÿæ¬¢è¿æŠŠå®ƒåˆ†äº«ç»™ä½ çš„æœ‹å‹ï¼Œæˆ‘ä»¬ä¸‹ä¸€è®²è§ã€‚</p>","comments":[{"had_liked":false,"id":252593,"user_name":"é‚µäºšæ–¹","can_delete":false,"product_type":"c1","uid":1981399,"ip_address":"","ucode":"CDFABCB81B9782","user_header":"https://static001.geekbang.org/account/avatar/00/1e/3b/d7/9d942870.jpg","comment_is_top":true,"comment_ctime":1602395147,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"9.2233720942916997e+18","product_id":100058001,"comment_content":"è¯¾åä½œä¸šç­”æ¡ˆï¼š<br>- å‡è®¾ç°åœ¨å†…å­˜ç´§å¼ ï¼Œ æœ‰å¾ˆå¤šè¿›ç¨‹éƒ½åœ¨è¿›è¡Œç›´æ¥å†…å­˜å›æ”¶ï¼Œå¦‚ä½•ç»Ÿè®¡å‡ºæ¥éƒ½æ˜¯å“ªäº›è¿›ç¨‹åœ¨è¿›è¡Œç›´æ¥å†…å­˜å›æ”¶å‘¢ï¼Ÿ<br>è¯„è®ºåŒºé‡Œæœ‰äººå·²ç»å¾ˆå¥½çš„å›ç­”äº†è¿™ä¸ªé—®é¢˜ï¼Œä½¿ç”¨tracepointæ˜¯æœ€ç®€å•çš„æ–¹æ³•ã€‚<br>â€œå·²ç»å¾—çŸ¥æ˜¯ç›´æ¥å†…å­˜å›æ”¶å¼•èµ·çš„é—®é¢˜ï¼Œä¸€æ¬¡æ‰§è¡Œ<br>echo 1 &gt;&#47;sys&#47;kernel&#47;debug&#47;tracing&#47;events&#47;vmscan&#47;mm_vmscan_direct_reclaim_begin<br>echo 1 &gt;&#47;sys&#47;kernel&#47;debug&#47;tracing&#47;events&#47;vmscan&#47;mm_vmscan_direct_reclaim_end<br>æ‰“å¼€ç›´æ¥å†…å­˜å›æ”¶ç›¸å…³çš„tracepointï¼Œç„¶å<br>cat &#47;sys&#47;kernel&#47;debug&#47;tracing&#47;trace_pipe<br>æŸ¥çœ‹è·Ÿè¸ªè¾“å‡ºï¼Œå¾—åˆ°è¿›ç¨‹å·â€œ","like_count":13},{"had_liked":false,"id":244932,"user_name":"æˆ‘æ¥ä¹Ÿ","can_delete":false,"product_type":"c1","uid":1205253,"ip_address":"","ucode":"773D6104F56767","user_header":"https://static001.geekbang.org/account/avatar/00/12/64/05/6989dce6.jpg","comment_is_top":false,"comment_ctime":1598756013,"is_pvip":false,"replies":[{"id":"90163","content":"è¿›ç¨‹æ—¢æœ‰ç”¨æˆ·æ€ä¹Ÿæœ‰å†…æ ¸æ€ï¼Œåœ¨è¿›ç¨‹å¤„äºå†…æ ¸æ€æ—¶ï¼Œå°±å¯èƒ½ä¼šç”³è¯·è¿ç»­å†…å­˜ã€‚æ¯”å¦‚è¯´è¿›ç¨‹è¦æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ï¼Œé‚£å°±ä¼šå…ˆæŸ¥æ‰¾è¯¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼ŒæŸ¥æ‰¾çš„è¿‡ç¨‹å°±æ˜¯åœ¨å†…æ ¸æ€æ¥å®Œæˆçš„ï¼Œç„¶åè¿™ä¸ªè¿‡ç¨‹ä¸­ä¼šåˆ†é…æ–‡ä»¶æ‰€éœ€è¦çš„ä¸€äº›å†…æ ¸ç»“æ„ä½“ï¼Œæ¯”å¦‚dentryï¼Œinodeç­‰ï¼Œè¿™å°±éœ€è¦ç”³è¯·å†…å­˜ï¼Œè¿™äº›å†…å­˜å°±æ˜¯è¿ç»­ç‰©ç†å†…å­˜ã€‚","user_name":"ä½œè€…å›å¤","comment_id":244932,"uid":"1981399","ip_address":"","utype":1,"ctime":1598847518,"user_name_real":"é‚µäºšæ–¹"}],"discussion_count":1,"race_medal":0,"score":"40253461677","product_id":100058001,"comment_content":"é‚µè€å¸ˆï¼Œçœ‹äº†æ–‡ä¸­çš„ä¸€å¥è¯ï¼Œæ­£å¥½æœ‰ä¸ªå›°æ‰°å¾ˆä¹…çš„ç–‘é—®è¯·æ•™ä¸€ä¸‹ï¼š<br>æˆ‘ä»¬ä»€ä¹ˆæ—¶å€™ä¼šçœŸçš„é‡åˆ°éœ€è¦ç”³è¯·è¿ç»­ç‰©ç†å†…å­˜çš„æƒ…å†µï¼Ÿ<br><br>&gt; â€œå•ä½æ—¶é—´å†… compact_fail å˜åŒ–å¾ˆå¤§æ—¶ï¼Œé‚£å¾€å¾€æ„å‘³ç€ç³»ç»Ÿå†…å­˜ç¢ç‰‡å¾ˆä¸¥é‡ï¼Œå·²ç»å¾ˆéš¾ç”³è¯·åˆ°è¿ç»­ç‰©ç†å†…å­˜äº†â€<br>è¿™é‡Œæåˆ°äº†â€œè¿ç»­ç‰©ç†å†…å­˜â€ã€‚<br>å¹³å¸¸ä¹Ÿç»å¸¸ä¼šçœ‹åˆ°è¿™ä¸ªæè¿°ã€‚<br><br>æˆ‘ä»¬çŸ¥é“ï¼Œæ¯ä¸ªç”¨æˆ·è¿›ç¨‹éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„è™šæ‹Ÿå†…å­˜åœ°å€ç©ºé—´ã€‚<br>è‡ªå·±ç”³è¯·åˆ°çš„å†…å­˜åœ°å€å…¶å®åªæ˜¯è¿›ç¨‹è™šæ‹Ÿå†…å­˜ä¸­çš„ä¸€ä¸ªåœ°å€ï¼Œå¹¶ä¸æ˜¯å®é™…çš„ç‰©ç†å†…å­˜åœ°å€ã€‚<br>åªæœ‰è‡ªå·±åœ¨ç”¨åˆ°äº†å¯¹åº”çš„è™šæ‹Ÿåœ°å€æ—¶æ‰ä¼šï¼Œç³»ç»Ÿæ‰ä¼šé€šè¿‡ç¼ºé¡µå¼‚å¸¸æ¥åˆ†é…å…·ä½“çš„ç‰©ç†åœ°å€ã€‚<br><br>è€Œç³»ç»Ÿçš„å†…å­˜ä¸€èˆ¬éƒ½æ˜¯4kä¸€ä¸ªé¡µè¡¨ã€‚<br>å¾ˆæœ‰å¯èƒ½åœ¨è¿›ç¨‹ä¸­è¿ç»­çš„è™šæ‹Ÿå†…å­˜åœ°å€ï¼Œåœ¨å®é™…çš„ç‰©ç†å†…å­˜ä¸­å¹¶ä¸æ˜¯è¿ç»­çš„ã€‚<br>ç°åœ¨å‡ ä¹éƒ½åªæœ‰å†…æ ¸æœ‰æƒé™ç›´æ¥æ“ä½œç‰©ç†å†…å­˜äº†ã€‚<br><br>æ‰€ä»¥æˆ‘å°±æœ‰äº†å¼€å¤´çš„é‚£ä¸ªç–‘é—®ã€‚","like_count":9,"discussions":[{"author":{"id":1981399,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/3b/d7/9d942870.jpg","nickname":"é‚µäºšæ–¹","note":"","ucode":"CDFABCB81B9782","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504741,"discussion_content":"è¿›ç¨‹æ—¢æœ‰ç”¨æˆ·æ€ä¹Ÿæœ‰å†…æ ¸æ€ï¼Œåœ¨è¿›ç¨‹å¤„äºå†…æ ¸æ€æ—¶ï¼Œå°±å¯èƒ½ä¼šç”³è¯·è¿ç»­å†…å­˜ã€‚æ¯”å¦‚è¯´è¿›ç¨‹è¦æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ï¼Œé‚£å°±ä¼šå…ˆæŸ¥æ‰¾è¯¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼ŒæŸ¥æ‰¾çš„è¿‡ç¨‹å°±æ˜¯åœ¨å†…æ ¸æ€æ¥å®Œæˆçš„ï¼Œç„¶åè¿™ä¸ªè¿‡ç¨‹ä¸­ä¼šåˆ†é…æ–‡ä»¶æ‰€éœ€è¦çš„ä¸€äº›å†…æ ¸ç»“æ„ä½“ï¼Œæ¯”å¦‚dentryï¼Œinodeç­‰ï¼Œè¿™å°±éœ€è¦ç”³è¯·å†…å­˜ï¼Œè¿™äº›å†…å­˜å°±æ˜¯è¿ç»­ç‰©ç†å†…å­˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598847518,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":244750,"user_name":"J.Smile","can_delete":false,"product_type":"c1","uid":1336475,"ip_address":"","ucode":"C4D98DFDBF7584","user_header":"https://static001.geekbang.org/account/avatar/00/14/64/9b/0b578b08.jpg","comment_is_top":false,"comment_ctime":1598664789,"is_pvip":false,"replies":[{"id":"90103","content":"è¿™ä¸ªæ˜¯procé‡Œé¢çš„æ–‡ä»¶ï¼Œä½¿ç”¨å‰ææ˜¯ï¼Œä½ çš„å†…æ ¸éœ€è¦æ”¯æŒå®ƒï¼Œéœ€è¦4.18ä»¥åŠæ›´æ–°çš„å†…æ ¸ã€‚å¦‚æœå†…æ ¸æ”¯æŒäº†è¯¥ç‰¹æ€§ï¼Œä½ å°±å¯ä»¥å»&#47;proc&#47;pressure&#47;é‡Œé¢å»è¯»å–å®ƒäº†ï¼Œè¿™é‡Œé¢ä¼šæœ‰memoryï¼Œioï¼Œcpuçš„ä¿¡æ¯ã€‚<br>ä½ å¯ä»¥åšä¸€äº›å·¥å…·æ¥è§£æè¿™äº›ä¿¡æ¯ï¼Œå…·ä½“åšæ³•å¯ä»¥å‚è€ƒsarçš„åšæ³•ã€‚<br>é‡‡é›†å®Œè¿™äº›æ•°æ®åï¼Œä½ å°±å¯ä»¥ä½¿ç”¨å®ƒæ¥ä½œä¸ºç³»ç»Ÿå‹åŠ›æŒ‡æ ‡çš„å‚è€ƒäº†ã€‚æ¯”å¦‚åœ¨ä¸šåŠ¡æœ‰æŠ–åŠ¨æ—¶ï¼Œä½ å¯ä»¥è§‚å¯Ÿæ˜¯å¦æŸä¸ªæŒ‡æ ‡æœ‰å¼‚å¸¸ã€‚","user_name":"ä½œè€…å›å¤","comment_id":244750,"uid":"1981399","ip_address":"","utype":1,"ctime":1598717827,"user_name_real":"é‚µäºšæ–¹"}],"discussion_count":2,"race_medal":0,"score":"31663435861","product_id":100058001,"comment_content":"sar é‡Œé¢è®°å½•çš„ PSIï¼ˆPressure-Stall Informationï¼‰å…·ä½“æ€ä¹ˆç”¨å•Šï¼Ÿ","like_count":7,"discussions":[{"author":{"id":1981399,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/3b/d7/9d942870.jpg","nickname":"é‚µäºšæ–¹","note":"","ucode":"CDFABCB81B9782","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504689,"discussion_content":"è¿™ä¸ªæ˜¯procé‡Œé¢çš„æ–‡ä»¶ï¼Œä½¿ç”¨å‰ææ˜¯ï¼Œä½ çš„å†…æ ¸éœ€è¦æ”¯æŒå®ƒï¼Œéœ€è¦4.18ä»¥åŠæ›´æ–°çš„å†…æ ¸ã€‚å¦‚æœå†…æ ¸æ”¯æŒäº†è¯¥ç‰¹æ€§ï¼Œä½ å°±å¯ä»¥å»/proc/pressure/é‡Œé¢å»è¯»å–å®ƒäº†ï¼Œè¿™é‡Œé¢ä¼šæœ‰memoryï¼Œioï¼Œcpuçš„ä¿¡æ¯ã€‚\nä½ å¯ä»¥åšä¸€äº›å·¥å…·æ¥è§£æè¿™äº›ä¿¡æ¯ï¼Œå…·ä½“åšæ³•å¯ä»¥å‚è€ƒsarçš„åšæ³•ã€‚\né‡‡é›†å®Œè¿™äº›æ•°æ®åï¼Œä½ å°±å¯ä»¥ä½¿ç”¨å®ƒæ¥ä½œä¸ºç³»ç»Ÿå‹åŠ›æŒ‡æ ‡çš„å‚è€ƒäº†ã€‚æ¯”å¦‚åœ¨ä¸šåŠ¡æœ‰æŠ–åŠ¨æ—¶ï¼Œä½ å¯ä»¥è§‚å¯Ÿæ˜¯å¦æŸä¸ªæŒ‡æ ‡æœ‰å¼‚å¸¸ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598717827,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1000060,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/42/7c/8ef14715.jpg","nickname":"ğŸ„½ğŸ„¸ğŸ…‡ğŸ…„ğŸ…‚","note":"","ucode":"853763C229A5AA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":334475,"discussion_content":"è¯¾ç¨‹å†…å®¹å¾ˆå¥½ï¼Œåªæ˜¯å¾ˆå¤šä¸œè¥¿ï¼Œåªæ˜¯æä¸€ä¸‹ï¼Œä¸€ç¬”å¸¦è¿‡ï¼Œå®Œå…¨ä¸çŸ¥é“å¦‚ä½•å®è·µ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1607857399,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":246319,"user_name":"KennyQ","can_delete":false,"product_type":"c1","uid":1449481,"ip_address":"","ucode":"5F9AFFCBC086DB","user_header":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIt0nAFvqib3fpf9AIKUrEJMdbiaPjnKqCryevwjRdqrbzAIxdOn3P5wCz28MNb5Bgb2PwEdCezLEWg/132","comment_is_top":false,"comment_ctime":1599276698,"is_pvip":true,"replies":[{"id":"90944","content":"å¦‚æœé‡‡é›†çš„æ•°æ®å¾ˆå¤šï¼Œé‚£ä¹ˆç§’çº§ç›‘æ§çš„å¼€é”€è¿˜æ˜¯å¾ˆå¤§çš„ï¼Œæ‰€ä»¥ä¸€èˆ¬éƒ½ä¸ä¼šæ¯ç§’å»é‡‡é›†å¾ˆå¤šç³»ç»ŸæŒ‡æ ‡ã€‚é€šå¸¸æƒ…å†µä¸‹éƒ½æ˜¯é‡‡ç”¨äº‹ä»¶æœºåˆ¶ï¼Œæ¯”å¦‚åœ¨å†…æ ¸é‡Œä¸€äº›å…³é”®è·¯å¾„ä¸ŠæŒ‚ä¸Šé’©å­ï¼Œå½“å¼‚å¸¸è¡Œä¸ºå‘ç”Ÿæ—¶å°±æŠŠè¯¥äº‹ä»¶è®°å½•ä¸‹æ¥ï¼Œä½†æ˜¯è¿™æ ·åšæ¯•ç«Ÿåªæ˜¯é’ˆå¯¹æœ‰é™çš„äº‹ä»¶ï¼Œä¸ä¼šæ¶‰åŠåˆ°å¤ªå¤šçš„äº‹ä»¶ï¼Œä¸ç„¶ç³»ç»Ÿå¼€é”€è¿˜æ˜¯ä¼šå¤§ã€‚æ‰€ä»¥åœ¨å‘ç”Ÿé—®é¢˜åçš„äº‹åé‡‡é›†æœºåˆ¶è¿˜æ˜¯æœ‰å¿…è¦çš„ï¼Œå› ä¸ºå‘ç”Ÿé—®é¢˜åï¼Œè¿ç»´æˆ–è€…ä¸šåŠ¡ä¼šæ›´åŠ å…³æ³¨åŸå› ä¼šæ˜¯ä»€ä¹ˆï¼Œå¯¹é‡‡é›†å¸¦æ¥çš„å¼€é”€ä¼šæœ‰å¿ƒé‡Œé¢„æœŸï¼Œæ‰€ä»¥å¯ä»¥æ¥å—ä¸€å®šç¨‹åº¦çš„æŸè€—ã€‚å¾ˆå¤šæ—¶å€™å€ŸåŠ©è¿™äº›ç²—åŠ›åº¦çš„æŒ‡æ ‡ï¼Œæ˜¯å¯ä»¥å¤§è‡´åˆ¤æ–­å‡ºé—®é¢˜å¯èƒ½å‡ºåœ¨å“ªé‡Œï¼Œç„¶åå†é’ˆå¯¹æ€§çš„å»åšæ›´ç»†ç²’åº¦çš„ç›‘æ§ã€‚<br>æƒ³è¦ç²¾ç¡®ï¼Œå°±éœ€è¦ç»“åˆä¸šåŠ¡æ¥æ·±åº¦å®šåˆ¶ç›‘æ§ï¼›æƒ³è¦è¦†ç›–é¢å¹¿ä¸€äº›ï¼Œå°±è¦å°½é‡ä¿éšœç›‘æ§å¼€é”€ã€‚é±¼ä¸ç†ŠæŒæ˜¯å¾ˆéš¾å…¼å¾—çš„ã€‚","user_name":"ä½œè€…å›å¤","comment_id":246319,"uid":"1981399","ip_address":"","utype":1,"ctime":1599797914,"user_name_real":"é‚µäºšæ–¹"}],"discussion_count":1,"race_medal":0,"score":"27369080474","product_id":100058001,"comment_content":"å¾ˆå¤šç”Ÿäº§é—®é¢˜éƒ½æ˜¯è¦å¯¹ç§’çº§ç”šè‡³æ¯«ç§’çº§çš„è¡Œä¸ºè¿›è¡Œåˆ†æï¼Œè€Œä¸šåŠ¡ä¸€æ—¦å‘è¿ç»´éƒ¨é—¨åé¦ˆäº†é—®é¢˜ä»¥åï¼Œä¸€èˆ¬éƒ½æ˜¯è¦åšäº‹ååˆ†æï¼Œ é‚£ä¹ˆä¸€èˆ¬å¦‚ä½•åº”å¯¹è¿™æ ·çš„é—®é¢˜åˆ†æåœºæ™¯ï¼Ÿ<br>æ˜¯é’ˆå¯¹ä¸€äº›é‡è¦æŒ‡æ ‡åœ¨äº‹å‰å°±è¿›è¡Œç§’çº§ç›‘æ§ï¼Ÿåˆ†é’Ÿçº§ç›‘æ§ï¼Ÿè¿˜æ˜¯ç­‰å¾…äº‹åéƒ¨ç½²ç§’çº§çš„ç›‘æ§è„šæœ¬è¿›è¡Œä¿¡æ¯æŠ“å–ï¼Ÿ","like_count":6,"discussions":[{"author":{"id":1981399,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/3b/d7/9d942870.jpg","nickname":"é‚µäºšæ–¹","note":"","ucode":"CDFABCB81B9782","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":505112,"discussion_content":"å¦‚æœé‡‡é›†çš„æ•°æ®å¾ˆå¤šï¼Œé‚£ä¹ˆç§’çº§ç›‘æ§çš„å¼€é”€è¿˜æ˜¯å¾ˆå¤§çš„ï¼Œæ‰€ä»¥ä¸€èˆ¬éƒ½ä¸ä¼šæ¯ç§’å»é‡‡é›†å¾ˆå¤šç³»ç»ŸæŒ‡æ ‡ã€‚é€šå¸¸æƒ…å†µä¸‹éƒ½æ˜¯é‡‡ç”¨äº‹ä»¶æœºåˆ¶ï¼Œæ¯”å¦‚åœ¨å†…æ ¸é‡Œä¸€äº›å…³é”®è·¯å¾„ä¸ŠæŒ‚ä¸Šé’©å­ï¼Œå½“å¼‚å¸¸è¡Œä¸ºå‘ç”Ÿæ—¶å°±æŠŠè¯¥äº‹ä»¶è®°å½•ä¸‹æ¥ï¼Œä½†æ˜¯è¿™æ ·åšæ¯•ç«Ÿåªæ˜¯é’ˆå¯¹æœ‰é™çš„äº‹ä»¶ï¼Œä¸ä¼šæ¶‰åŠåˆ°å¤ªå¤šçš„äº‹ä»¶ï¼Œä¸ç„¶ç³»ç»Ÿå¼€é”€è¿˜æ˜¯ä¼šå¤§ã€‚æ‰€ä»¥åœ¨å‘ç”Ÿé—®é¢˜åçš„äº‹åé‡‡é›†æœºåˆ¶è¿˜æ˜¯æœ‰å¿…è¦çš„ï¼Œå› ä¸ºå‘ç”Ÿé—®é¢˜åï¼Œè¿ç»´æˆ–è€…ä¸šåŠ¡ä¼šæ›´åŠ å…³æ³¨åŸå› ä¼šæ˜¯ä»€ä¹ˆï¼Œå¯¹é‡‡é›†å¸¦æ¥çš„å¼€é”€ä¼šæœ‰å¿ƒé‡Œé¢„æœŸï¼Œæ‰€ä»¥å¯ä»¥æ¥å—ä¸€å®šç¨‹åº¦çš„æŸè€—ã€‚å¾ˆå¤šæ—¶å€™å€ŸåŠ©è¿™äº›ç²—åŠ›åº¦çš„æŒ‡æ ‡ï¼Œæ˜¯å¯ä»¥å¤§è‡´åˆ¤æ–­å‡ºé—®é¢˜å¯èƒ½å‡ºåœ¨å“ªé‡Œï¼Œç„¶åå†é’ˆå¯¹æ€§çš„å»åšæ›´ç»†ç²’åº¦çš„ç›‘æ§ã€‚\næƒ³è¦ç²¾ç¡®ï¼Œå°±éœ€è¦ç»“åˆä¸šåŠ¡æ¥æ·±åº¦å®šåˆ¶ç›‘æ§ï¼›æƒ³è¦è¦†ç›–é¢å¹¿ä¸€äº›ï¼Œå°±è¦å°½é‡ä¿éšœç›‘æ§å¼€é”€ã€‚é±¼ä¸ç†ŠæŒæ˜¯å¾ˆéš¾å…¼å¾—çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599797914,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":248076,"user_name":"Geek_circle","can_delete":false,"product_type":"c1","uid":1711469,"ip_address":"","ucode":"B85D0E9CEE8786","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epUBQibdMCca340MFZOe5I1GwZ0PosPIzA0TPCNzibgH00w45Zmv4jmL0mFRHMUM9FuKiclKOCBjSmsw/132","comment_is_top":false,"comment_ctime":1600000949,"is_pvip":false,"replies":[{"id":"91447","content":"é¡µçš„äº¤æ¢æ˜¯è¦ä¾èµ–swapåˆ†åŒºçš„ï¼Œåœ¨å¼€å¯äº†swapååŒ¿åé¡µï¼ˆæ¯”å¦‚å †å†…å­˜ï¼‰å°±å¯ä»¥è¢«äº¤æ¢åˆ°swapåˆ†åŒºï¼Œè¿™ä¸ªè¡Œä¸ºä¼šä½“ç°åœ¨pswpinå’Œpswpoutè¿™ä¸¤ä¸ªæŒ‡æ ‡ä¸­ã€‚<br>è€Œpgpginå’Œpgpgoutåˆ™æ˜¯æŒ‡æ–‡ä»¶é¡µçš„è¯»å…¥è¯»å‡ºï¼Œå°†ç£ç›˜æ–‡ä»¶è¯»å…¥å†…å­˜å’Œè„é¡µå†™å›ç£ç›˜ï¼Œå®ƒä»¬è·Ÿswapæ˜¯æ²¡æœ‰å…³ç³»çš„ï¼Œå³ä½¿æ²¡æœ‰swapä¹Ÿä¼šæœ‰pgpginå’Œpgpgoutã€‚","user_name":"ä½œè€…å›å¤","comment_id":248076,"uid":"1981399","ip_address":"","utype":1,"ctime":1600569668,"user_name_real":"é‚µäºšæ–¹"}],"discussion_count":1,"race_medal":0,"score":"14484902837","product_id":100058001,"comment_content":"è€å¸ˆå¥½ï¼Œæƒ³ç¡®è®¤ä¸‹é¡µé¢çš„æ¢å‡ºæ˜¯å¦ä¾èµ–ç³»ç»Ÿå¼€å¯çš„swapåˆ†åŒºï¼ˆä¸€èˆ¬linuxç³»ç»Ÿä¸ºäº†é¿å…å½±å“æ€§èƒ½ï¼Œéƒ½æ˜¯å…³é—­ä¸å¯ç”¨swapçš„ï¼‰ï¼Œå¦‚æœä¸ä¾èµ–ï¼Œè¿™ä¸ªæ¢å‡ºçš„é¡µé¢æ˜¯æ”¾ç½®åœ¨ç‰©ç†ç¡¬ç›˜çš„å“ªé‡Œå‘¢ï¼Ÿ<br>.è¿™ä¸ªsarç»Ÿè®¡çš„pgpginå’Œpgpgout å¦‚ä½•è§£è¯»å‘¢","like_count":3,"discussions":[{"author":{"id":1981399,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/3b/d7/9d942870.jpg","nickname":"é‚µäºšæ–¹","note":"","ucode":"CDFABCB81B9782","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":505560,"discussion_content":"é¡µçš„äº¤æ¢æ˜¯è¦ä¾èµ–swapåˆ†åŒºçš„ï¼Œåœ¨å¼€å¯äº†swapååŒ¿åé¡µï¼ˆæ¯”å¦‚å †å†…å­˜ï¼‰å°±å¯ä»¥è¢«äº¤æ¢åˆ°swapåˆ†åŒºï¼Œè¿™ä¸ªè¡Œä¸ºä¼šä½“ç°åœ¨pswpinå’Œpswpoutè¿™ä¸¤ä¸ªæŒ‡æ ‡ä¸­ã€‚\nè€Œpgpginå’Œpgpgoutåˆ™æ˜¯æŒ‡æ–‡ä»¶é¡µçš„è¯»å…¥è¯»å‡ºï¼Œå°†ç£ç›˜æ–‡ä»¶è¯»å…¥å†…å­˜å’Œè„é¡µå†™å›ç£ç›˜ï¼Œå®ƒä»¬è·Ÿswapæ˜¯æ²¡æœ‰å…³ç³»çš„ï¼Œå³ä½¿æ²¡æœ‰swapä¹Ÿä¼šæœ‰pgpginå’Œpgpgoutã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600569668,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":244936,"user_name":"ray","can_delete":false,"product_type":"c1","uid":1717235,"ip_address":"","ucode":"10962C711CBC11","user_header":"","comment_is_top":false,"comment_ctime":1598756856,"is_pvip":false,"replies":[{"id":"90164","content":"1. è¿™ä¸ªå•ä½æ˜¯åº”ç”¨ç¨‹åºé˜»å¡æ—¶é—´ï¼Œä»¥memoryä¸ºä¾‹ï¼Œé‚£å°±æ˜¯è¿›ç¨‹åœ¨å†…å­˜ç”³è¯·ä¸Šæ¶ˆè€—çš„æ—¶é—´ã€‚åŠ å…¥10så†…ï¼Œè¿›ç¨‹åœ¨å†…å­˜ç”³è¯·ä¸Šæ¶ˆè€—äº†5sï¼Œé‚£avg10å°±æ˜¯50ã€‚<br><br>2.totalä»£è¡¨è¿›ç¨‹æ€»çš„æ¶ˆè€—æ—¶é—´ï¼ŒåŒ…æ‹¬å†å²ç´¯ç§¯å€¼ã€‚ä»¥memoryä¸ºä¾‹ï¼Œé‚£å°±æ˜¯åœ¨å†…å­˜ç”³è¯·ä¸Šæ¶ˆè€—çš„æ€»æ—¶é—´ã€‚<br><br>è¿™äº›åœ¨Documentationé‡Œéƒ½æœ‰è¯´æ˜<br>ã€‚<br><br><br>","user_name":"ä½œè€…å›å¤","comment_id":244936,"uid":"1981399","ip_address":"","utype":1,"ctime":1598847872,"user_name_real":"é‚µäºšæ–¹"}],"discussion_count":2,"race_medal":0,"score":"14483658744","product_id":100058001,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œè¯·é—®<br>==&gt; &#47;proc&#47;pressure&#47;cpu &lt;==<br>some avg10=0.00 avg60=0.00 avg300=0.00 total=10078249<br><br>==&gt; &#47;proc&#47;pressure&#47;io &lt;==<br>some avg10=18.04 avg60=17.66 avg300=19.08 total=1334977849<br>full avg10=17.54 avg60=16.98 avg300=18.49 total=1294527367<br><br>==&gt; &#47;proc&#47;pressure&#47;memory &lt;==<br>some avg10=0.00 avg60=0.00 avg300=0.00 total=0<br>full avg10=0.00 avg60=0.00 avg300=0.00 total=0<br><br>1. ä¸Šè¿°cpu, io, memoryæŒ‡æ ‡çš„avgçš„è®¡ç®—æ–¹å¼æ˜¯ï¼Œå•ä½ &#47; ç§’æ•°ï¼Œæˆ‘çš„ç–‘é—®æ˜¯è¿™3ä¸ªæŒ‡æ ‡æ˜¯ç”¨ä»€ä¹ˆå•ä½é™¤ä»¥ç§’æ•°è®¡ç®—å‡ºå¹³å‡å€¼ï¼Ÿï¼ˆä»¥memoryä¸ºä¾‹ï¼Œå¯èƒ½æ˜¯page &#47; sï¼Œä½†æˆ‘ä¸æ˜¯å¾ˆæ¸…æ¥šå•ä½æ˜¯å¦æ˜¯pageï¼‰<br><br>2. totalä»£è¡¨çš„æ„æ€æ˜¯ä»€ä¹ˆï¼Ÿ<br><br>è°¢è°¢è€å¸ˆçš„è§£ç­”^^","like_count":3,"discussions":[{"author":{"id":1981399,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/3b/d7/9d942870.jpg","nickname":"é‚µäºšæ–¹","note":"","ucode":"CDFABCB81B9782","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504743,"discussion_content":"1. è¿™ä¸ªå•ä½æ˜¯åº”ç”¨ç¨‹åºé˜»å¡æ—¶é—´ï¼Œä»¥memoryä¸ºä¾‹ï¼Œé‚£å°±æ˜¯è¿›ç¨‹åœ¨å†…å­˜ç”³è¯·ä¸Šæ¶ˆè€—çš„æ—¶é—´ã€‚åŠ å…¥10så†…ï¼Œè¿›ç¨‹åœ¨å†…å­˜ç”³è¯·ä¸Šæ¶ˆè€—äº†5sï¼Œé‚£avg10å°±æ˜¯50ã€‚\n\n2.totalä»£è¡¨è¿›ç¨‹æ€»çš„æ¶ˆè€—æ—¶é—´ï¼ŒåŒ…æ‹¬å†å²ç´¯ç§¯å€¼ã€‚ä»¥memoryä¸ºä¾‹ï¼Œé‚£å°±æ˜¯åœ¨å†…å­˜ç”³è¯·ä¸Šæ¶ˆè€—çš„æ€»æ—¶é—´ã€‚\n\nè¿™äº›åœ¨Documentationé‡Œéƒ½æœ‰è¯´æ˜\nã€‚\n\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598847872,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1717235,"avatar":"","nickname":"ray","note":"","ucode":"10962C711CBC11","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":302324,"discussion_content":"è°¢è°¢è€å¸ˆçš„è§£ç­”ï¼Œæˆ‘æ‰¾äº†å¾ˆä¹…éƒ½æ‰¾ä¸åˆ°æ˜¯documentçš„å“ªä¸€é¡µï¼Œå¯ä»¥è¯·è€å¸ˆåˆ†äº«ä¸€ä¸‹ç½‘å€å— æ„Ÿæ¿€ä¸å°½^^","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598879041,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":255546,"user_name":"Linuxer","can_delete":false,"product_type":"c1","uid":1153978,"ip_address":"","ucode":"272D9D8089C3D6","user_header":"https://static001.geekbang.org/account/avatar/00/11/9b/ba/333b59e5.jpg","comment_is_top":false,"comment_ctime":1603369855,"is_pvip":false,"replies":[{"id":"93222","content":"- è´Ÿè½½é«˜æ˜¯å¦æ˜¯ç”±é”å†²çªå¯¼è‡´çš„<br>é”å†²çªæœ‰ä¸¤ç±»ï¼Œä¸€ç±»æ˜¯Dï¼Œä¸€ç±»æ˜¯spinï¼Œç®€å•æŸ¥çœ‹å½“å‰ç³»ç»Ÿå¤„äºDå’ŒRçš„ä»»åŠ¡ä»¥åŠè°ƒç”¨æ ˆå°±å¯ä»¥åˆ¤æ–­ï¼Œæ¯”å¦‚ä½¿ç”¨sysrqã€‚<br><br>â€” resource temp unavailable<br>è¿™ä¸ªæ— æ³•é€šè¿‡å¿«ç…§æ¥æŸ¥çœ‹ å› ä¸ºè¿™æ˜¯ä¸€æ¬¡æ€§çš„è¡Œä¸º ç»“æŸåå°±æ²¡æœ‰ç°åœºäº† é™¤éå¯ä»¥å¤ç°å‡ºæ¥","user_name":"ä½œè€…å›å¤","comment_id":255546,"uid":"1981399","ip_address":"","utype":1,"ctime":1603517095,"user_name_real":"é‚µäºšæ–¹"}],"discussion_count":1,"race_medal":0,"score":"10193304447","product_id":100058001,"comment_content":"è¯·é—®ä¸€ä¸‹é‚µè€å¸ˆï¼Œå¦‚ä½•ç¡®å®šè´Ÿè½½é«˜æ˜¯é”å†²çªå¯¼è‡´çš„å‘¢ï¼Ÿè¿˜æœ‰å°±æ˜¯è±¡ resource temporarily unavailableè¿™ç§æŠ¥é”™æˆ‘æƒ³çŸ¥é“å…·ä½“æ˜¯å“ªä¸€ç§èµ„æºï¼Œæ˜¯ä¸æ˜¯å¯ä»¥é€šè¿‡ç³»ç»Ÿå¿«ç…§æ‰¾åˆ°å‘¢ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1981399,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/3b/d7/9d942870.jpg","nickname":"é‚µäºšæ–¹","note":"","ucode":"CDFABCB81B9782","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":507748,"discussion_content":"- è´Ÿè½½é«˜æ˜¯å¦æ˜¯ç”±é”å†²çªå¯¼è‡´çš„\né”å†²çªæœ‰ä¸¤ç±»ï¼Œä¸€ç±»æ˜¯Dï¼Œä¸€ç±»æ˜¯spinï¼Œç®€å•æŸ¥çœ‹å½“å‰ç³»ç»Ÿå¤„äºDå’ŒRçš„ä»»åŠ¡ä»¥åŠè°ƒç”¨æ ˆå°±å¯ä»¥åˆ¤æ–­ï¼Œæ¯”å¦‚ä½¿ç”¨sysrqã€‚\n\nâ€” resource temp unavailable\nè¿™ä¸ªæ— æ³•é€šè¿‡å¿«ç…§æ¥æŸ¥çœ‹ å› ä¸ºè¿™æ˜¯ä¸€æ¬¡æ€§çš„è¡Œä¸º ç»“æŸåå°±æ²¡æœ‰ç°åœºäº† é™¤éå¯ä»¥å¤ç°å‡ºæ¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603517095,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":251165,"user_name":"Geek_b85295","can_delete":false,"product_type":"c1","uid":1487998,"ip_address":"","ucode":"51CBB577C255EA","user_header":"https://wx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqtXSgThiaEiaEqqic5YIJ7v469nCM3VXiccOJ4SxbYjW91ciczuYYEzcTVtYWaWXaokZqShuLdKsXjnFA/132","comment_is_top":false,"comment_ctime":1601387346,"is_pvip":false,"replies":[{"id":"91956","content":"èµï¼å›ç­”çš„å¾ˆå¥½ï¼","user_name":"ä½œè€…å›å¤","comment_id":251165,"uid":"1981399","ip_address":"","utype":1,"ctime":1601611034,"user_name_real":"é‚µäºšæ–¹"}],"discussion_count":1,"race_medal":0,"score":"10191321938","product_id":100058001,"comment_content":"å…³äºè¯¾åä½œä¸šï¼Œæˆ‘æ¥ä¾è‘«èŠ¦ç”»ç“¢ï¼Œè¿˜æœ›è€å¸ˆæŒ‡æ•™ã€‚<br>å·²ç»å¾—çŸ¥æ˜¯ç›´æ¥å†…å­˜å›æ”¶å¼•èµ·çš„é—®é¢˜ï¼Œä¸€æ¬¡æ‰§è¡Œ<br>echo 1 &gt;&#47;sys&#47;kernel&#47;debug&#47;tracing&#47;events&#47;vmscan&#47;mm_vmscan_direct_reclaim_begin<br>echo 1 &gt;&#47;sys&#47;kernel&#47;debug&#47;tracing&#47;events&#47;vmscan&#47;mm_vmscan_direct_reclaim_end<br>æ‰“å¼€ç›´æ¥å†…å­˜å›æ”¶ç›¸å…³çš„tracepointï¼Œç„¶å<br>cat &#47;sys&#47;kernel&#47;debug&#47;tracing&#47;trace_pipe<br>æŸ¥çœ‹è·Ÿè¸ªè¾“å‡ºï¼Œå¾—åˆ°è¿›ç¨‹å·","like_count":2,"discussions":[{"author":{"id":1981399,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/3b/d7/9d942870.jpg","nickname":"é‚µäºšæ–¹","note":"","ucode":"CDFABCB81B9782","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":506399,"discussion_content":"èµï¼å›ç­”çš„å¾ˆå¥½ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1601611034,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":245693,"user_name":"Eria","can_delete":false,"product_type":"c1","uid":2025708,"ip_address":"","ucode":"B38B0A327F0717","user_header":"https://static001.geekbang.org/account/avatar/00/1e/e8/ec/faed0b4f.jpg","comment_is_top":false,"comment_ctime":1599028901,"is_pvip":false,"replies":[{"id":"90426","content":"buffer&#47;cacheå°çš„è¯ï¼Œworkingset refaultä¼šå¤šï¼Œè¿™ä¼šå¯¼è‡´ioutilå¤ªé«˜ã€‚ä¸ºä»€ä¹ˆBä¸­çš„buff&#47;cacheä¼šæ¯”Aä¸­å°é‚£ä¹ˆå¤šï¼Œæˆ‘çŒœæµ‹æ˜¯å› ä¸ºBä¸­æœ‰å¾ˆå¤šä¸å¯ä»¥è¢«å›æ”¶çš„å†…å­˜å¯¼è‡´çš„ï¼Œä½ å¯ä»¥è§‚å¯Ÿä¸‹ä¸¤ä¸ªæœºå™¨çš„&#47;proc&#47;meminfo,å¯¹æ¯”çœ‹çœ‹å“ªäº›é¡¹å­˜åœ¨å·®å¼‚ï¼Ÿ<br>","user_name":"ä½œè€…å›å¤","comment_id":245693,"uid":"1981399","ip_address":"","utype":1,"ctime":1599145225,"user_name_real":"é‚µäºšæ–¹"}],"discussion_count":1,"race_medal":0,"score":"10188963493","product_id":100058001,"comment_content":"è¯·æ•™è€å¸ˆä¸€ä¸ªé—®é¢˜ï¼šæˆ‘ä»¬ä¸¤ä¸ªæœºå™¨ä¸Šä¸€æ ·çš„ç³»ç»Ÿå’Œç¡¬ä»¶é…ç½®å’ŒæœåŠ¡ï¼Œè¿è¡Œç›¸åŒçš„æµ‹è¯•ï¼š<br><br>    1. ç³»ç»Ÿ A çš„ç£ç›˜ util å¾ˆå°ï¼ˆ3%-10%ï¼‰ï¼Œä½†æ˜¯å¯ä»¥çœ‹åˆ° 80G å·¦å³çš„ buffer&#47;cacheï¼Œç³»ç»Ÿ A çš„æœåŠ¡å»¶è¿Ÿéå¸¸å°<br>    2. ç³»ç»Ÿ B çš„ç£ç›˜ util å¾ˆé«˜ï¼ˆå¤§äº 30%)ï¼Œbuffer&#47;cache 10G å·¦å³ï¼Œç³»ç»Ÿ B çš„æœåŠ¡å»¶è¿Ÿæ˜¯ A çš„å¥½å‡ å€<br><br>ç³»ç»Ÿ B æ˜¯å¦å¯èƒ½ç”±äºå¤ªå°çš„ buffer&#47;cache å¯¼è‡´ disk util é£™é«˜è¿›è€Œå¯¼è‡´å»¶è¿Ÿä¸Šå‡ï¼Ÿä¸¤ä¸ªç³»ç»Ÿçš„ cahce å‚æ•°é…ç½®æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥ä¸ºä»€ä¹ˆç³»ç»Ÿ B çš„ buffer&#47;cache ä¼šæ¯”ç³»ç»Ÿ A å°é‚£ä¹ˆå¤šï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1981399,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/3b/d7/9d942870.jpg","nickname":"é‚µäºšæ–¹","note":"","ucode":"CDFABCB81B9782","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504960,"discussion_content":"buffer/cacheå°çš„è¯ï¼Œworkingset refaultä¼šå¤šï¼Œè¿™ä¼šå¯¼è‡´ioutilå¤ªé«˜ã€‚ä¸ºä»€ä¹ˆBä¸­çš„buff/cacheä¼šæ¯”Aä¸­å°é‚£ä¹ˆå¤šï¼Œæˆ‘çŒœæµ‹æ˜¯å› ä¸ºBä¸­æœ‰å¾ˆå¤šä¸å¯ä»¥è¢«å›æ”¶çš„å†…å­˜å¯¼è‡´çš„ï¼Œä½ å¯ä»¥è§‚å¯Ÿä¸‹ä¸¤ä¸ªæœºå™¨çš„/proc/meminfo,å¯¹æ¯”çœ‹çœ‹å“ªäº›é¡¹å­˜åœ¨å·®å¼‚ï¼Ÿ\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599145225,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":244928,"user_name":"jssfy","can_delete":false,"product_type":"c1","uid":1137238,"ip_address":"","ucode":"F16353CFE607B7","user_header":"https://static001.geekbang.org/account/avatar/00/11/5a/56/115c6433.jpg","comment_is_top":false,"comment_ctime":1598755358,"is_pvip":false,"replies":[{"id":"90162","content":"äº’è”ç½‘ä¼ä¸šæ™®ééƒ½æ˜¯åŸºäºcentosæˆ–è€…Ubuntuçš„å†…æ ¸ï¼Œç„¶ååœ¨è¿™äº›å†…æ ¸çš„åŸºç¡€ä¸Šæ¥åšè‡ªå·±å®šåˆ¶åŒ–çš„ç‰¹æ€§ï¼Œè¿™äº›ç‰¹æ€§æ—¢æœ‰backportçš„ ä¹Ÿæœ‰æ ¹æ®è‡ªå·±åœºæ™¯æ¥å®ç°çš„ç‰¹å®šéœ€æ±‚ã€‚ç”Ÿäº§ç¯å¢ƒä¸Šcentos7æ˜¯ä¸»æµï¼Œå†…æ ¸ä¸º3.10ï¼Œå…¶æ¬¡æ˜¯centos8ï¼Œå†…æ ¸ä¸º4.18ã€‚","user_name":"ä½œè€…å›å¤","comment_id":244928,"uid":"1981399","ip_address":"","utype":1,"ctime":1598847249,"user_name_real":"é‚µäºšæ–¹"}],"discussion_count":1,"race_medal":0,"score":"10188689950","product_id":100058001,"comment_content":"è¯·é—®è€å¸ˆä½ ä»¬ç”Ÿäº§ç¯å¢ƒæ˜¯å¦ç”¨4.18+å†…æ ¸å¤š? è¿˜æ˜¯å®šåˆ¶è¿ç§»ç›¸å…³ç‰¹æ€§åˆ°è‡ªç»´æŠ¤ç‰ˆæœ¬å†…æ ¸?","like_count":2,"discussions":[{"author":{"id":1981399,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/3b/d7/9d942870.jpg","nickname":"é‚µäºšæ–¹","note":"","ucode":"CDFABCB81B9782","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504739,"discussion_content":"äº’è”ç½‘ä¼ä¸šæ™®ééƒ½æ˜¯åŸºäºcentosæˆ–è€…Ubuntuçš„å†…æ ¸ï¼Œç„¶ååœ¨è¿™äº›å†…æ ¸çš„åŸºç¡€ä¸Šæ¥åšè‡ªå·±å®šåˆ¶åŒ–çš„ç‰¹æ€§ï¼Œè¿™äº›ç‰¹æ€§æ—¢æœ‰backportçš„ ä¹Ÿæœ‰æ ¹æ®è‡ªå·±åœºæ™¯æ¥å®ç°çš„ç‰¹å®šéœ€æ±‚ã€‚ç”Ÿäº§ç¯å¢ƒä¸Šcentos7æ˜¯ä¸»æµï¼Œå†…æ ¸ä¸º3.10ï¼Œå…¶æ¬¡æ˜¯centos8ï¼Œå†…æ ¸ä¸º4.18ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598847249,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":359207,"user_name":"è´¹æ›¼å…ˆç”Ÿ","can_delete":false,"product_type":"c1","uid":1325150,"ip_address":"å¹¿ä¸œ","ucode":"C65DC8746F98E6","user_header":"https://static001.geekbang.org/account/avatar/00/14/38/5e/f0394817.jpg","comment_is_top":false,"comment_ctime":1665325686,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1665325686","product_id":100058001,"comment_content":"é‚µè€å¸ˆï¼Œç›®å‰æˆ‘è¿™è¾¹æ“ä½œç³»ç»Ÿç‰ˆæœ¬æ˜¯ CentOS Linux release 7.9.2009 (Core) ä¸ºä»€ä¹ˆæˆ‘åœ¨ä¸»æœºä¸Šæ— æ³•æ‰¾åˆ°&#47;sys&#47;kernel&#47;debug&#47;tracing&#47;events&#47;compaction&#47;mm_compaction_begin&#47;enableè¿™ä¸ªæ–‡ä»¶å‘ï¼Ÿæ˜¯å› ä¸ºæ“ä½œç³»ç»Ÿä¸åŒå¼•èµ·çš„å˜›ï¼Ÿ","like_count":0},{"had_liked":false,"id":347990,"user_name":"Arcoo","can_delete":false,"product_type":"c1","uid":2061158,"ip_address":"","ucode":"03E149E2C841CF","user_header":"","comment_is_top":false,"comment_ctime":1654653839,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1654653839","product_id":100058001,"comment_content":"ã€ä½ éœ€è¦é‡ç‚¹å…³æ³¨ avg10 è¿™ä¸€åˆ—ï¼Œå®ƒè¡¨ç¤ºæœ€è¿‘ 10s å†…å­˜çš„å¹³å‡å‹åŠ›æƒ…å†µï¼Œå¦‚æœå®ƒå¾ˆå¤§ï¼ˆæ¯”å¦‚å¤§äº 40ï¼‰é‚£ load é£™é«˜å¤§æ¦‚ç‡æ˜¯ç”±äºå†…å­˜å‹åŠ›ï¼Œå°¤å…¶æ˜¯ Page Cache çš„å‹åŠ›å¼•èµ·çš„ã€‚ã€‘<br>å‹åŠ›çš„å¤§å°è¯¥å¦‚ä½•ç•Œå®šï¼Œ40ä»£è¡¨å‹åŠ›å¾ˆå¤§ï¼Œé‚£ 10ã€20 å°±è¡¨ç¤ºå‹åŠ›ä¸å¤§ï¼Ÿ<br>æˆ‘è¯¥å¦‚ä½•è¯„ä¼°ç³»ç»Ÿçš„å‹åŠ›æ˜¯å¦å¤§ï¼Ÿ","like_count":0},{"had_liked":false,"id":253518,"user_name":"Bryant.C","can_delete":false,"product_type":"c1","uid":1172363,"ip_address":"","ucode":"0DF832373CFA97","user_header":"https://static001.geekbang.org/account/avatar/00/11/e3/8b/27f875ba.jpg","comment_is_top":false,"comment_ctime":1602761099,"is_pvip":false,"replies":[{"id":"92732","content":"è€ç‰ˆæœ¬å†…æ ¸ä¸Šæ²¡æœ‰å¾ˆé«˜æ•ˆçš„æ–¹æ³•ï¼Œbrandan greggå†™è¿‡blogæ¥ä»‹ç»è¿™äº›è§‚æµ‹æ–¹å¼ï¼Œä½ å¯ä»¥æœç´¢ä¸€ä¸‹çœ‹ã€‚<br>å¦å¤–ä»…ä»…çŸ¥é“pagecache missè¿˜æ˜¯ä¸å¤Ÿçš„ï¼Œè¿˜éœ€è¦çŸ¥é“misså¯¼è‡´çš„å»¶è¿Ÿæƒ…å†µï¼Œå¦‚æœå»¶è¿Ÿéƒ½å¾ˆå°é‚£å¯èƒ½ä¸éœ€è¦ä¼˜åŒ–ï¼Œå¦‚æœå¯¼è‡´å­˜åœ¨å¾ˆå¤§çš„æƒ…å†µï¼Œè¿˜æ˜¯å¾—æƒ³åŠæ³•æ¥åšäº›ä¼˜åŒ–ã€‚misså»¶è¿Ÿæƒ…å†µä¹Ÿæ˜¯è¦åœ¨å†…æ ¸é‡Œæ‰“ç‚¹æ¥è¿½è¸ªã€‚<br>systemtapåœ¨è¿è¡Œæ—¶çš„å¼€é”€å…¶å®è¿˜å¥½ï¼ŒåŠ è½½è¿‡ç¨‹çš„å¼€é”€éœ€è¦æ³¨æ„ã€‚","user_name":"ä½œè€…å›å¤","comment_id":253518,"uid":"1981399","ip_address":"","utype":1,"ctime":1602917563,"user_name_real":"é‚µäºšæ–¹"}],"discussion_count":1,"race_medal":0,"score":"1602761099","product_id":100058001,"comment_content":"è€å¸ˆå¥½ï¼Œåœ¨è€ç‰ˆæœ¬(2.6.32)é‡Œé¢æœ‰æ²¡æœ‰æ¯”è¾ƒå¥½çš„æ–¹å¼æ£€æµ‹æœºå™¨æ•´ä½“page cacheçš„å‘½ä¸­ç‡å‘¢ï¼Ÿpage cacheå‘½ä¸­è¿™ä¸ªæŒ‡æ ‡å¯¹äºæˆ‘ä»¬çš„æœåŠ¡è¿˜æ˜¯ç›¸å½“é‡è¦çš„ï¼Œå¦‚æœä½¿ç”¨systemtapç›‘æ§å‡½æ•°è°ƒç”¨çš„è¯ä¼šä¸ä¼šæœ‰å¾ˆé«˜çš„å¼€é”€å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1981399,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/3b/d7/9d942870.jpg","nickname":"é‚µäºšæ–¹","note":"","ucode":"CDFABCB81B9782","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":507092,"discussion_content":"è€ç‰ˆæœ¬å†…æ ¸ä¸Šæ²¡æœ‰å¾ˆé«˜æ•ˆçš„æ–¹æ³•ï¼Œbrandan greggå†™è¿‡blogæ¥ä»‹ç»è¿™äº›è§‚æµ‹æ–¹å¼ï¼Œä½ å¯ä»¥æœç´¢ä¸€ä¸‹çœ‹ã€‚\nå¦å¤–ä»…ä»…çŸ¥é“pagecache missè¿˜æ˜¯ä¸å¤Ÿçš„ï¼Œè¿˜éœ€è¦çŸ¥é“misså¯¼è‡´çš„å»¶è¿Ÿæƒ…å†µï¼Œå¦‚æœå»¶è¿Ÿéƒ½å¾ˆå°é‚£å¯èƒ½ä¸éœ€è¦ä¼˜åŒ–ï¼Œå¦‚æœå¯¼è‡´å­˜åœ¨å¾ˆå¤§çš„æƒ…å†µï¼Œè¿˜æ˜¯å¾—æƒ³åŠæ³•æ¥åšäº›ä¼˜åŒ–ã€‚misså»¶è¿Ÿæƒ…å†µä¹Ÿæ˜¯è¦åœ¨å†…æ ¸é‡Œæ‰“ç‚¹æ¥è¿½è¸ªã€‚\nsystemtapåœ¨è¿è¡Œæ—¶çš„å¼€é”€å…¶å®è¿˜å¥½ï¼ŒåŠ è½½è¿‡ç¨‹çš„å¼€é”€éœ€è¦æ³¨æ„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602917563,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}