{"id":839058,"title":"12ï½œåˆ†å¸ƒå¼ç¼“å­˜ï¼šå¤§ä¿ƒæŠ¢è´­ï¼Œä¸çŸ¥çƒ­ç‚¹å’‹é˜²çƒ­Keyï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯å¾é€¸ã€‚</p><p>é€šè¿‡ä¸ŠèŠ‚è¯¾çš„å­¦ä¹ ï¼Œæˆ‘ä»¬çŸ¥é“äº†æå‡æœåŠ¡ååçš„æ•°æ®åº“æ¶æ„æ–¹æ¡ˆã€‚</p><p>ä¸è¿‡åœ¨å®è·µä¸­ï¼Œé™¤äº†åœ¨æ•°æ®åº“å±‚é¢åšä¼˜åŒ–ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡æ­é…ç¼“å­˜çš„æ–¹å¼ï¼Œæ¥å‡è½»æ•°æ®åº“çš„è®¿é—®å‹åŠ›ï¼Œé¿å…æ•°æ®åº“æˆä¸ºæ€§èƒ½ç“¶é¢ˆç‚¹ã€‚ä¾‹å¦‚ç”µå•†å¤§ä¿ƒçš„å•†å“è¯¦æƒ…é¡µï¼Œç”±äºå•†å“çš„åç§°ã€å›¾ç‰‡é“¾æ¥ã€ä»·æ ¼ç­‰æ•°æ®ä¼šè¢«é¢‘ç¹è®¿é—®ï¼Œå› æ­¤ä¸€èˆ¬ä¼šè¢«ç¼“å­˜ï¼Œä»¥ä¾¿æå‡ç³»ç»Ÿçš„æ€§èƒ½ã€‚</p><p>ä»Šå¤©æˆ‘ä»¬å°±æ¥èŠèŠï¼Œåœ¨å¤§ä¿ƒæŠ¢è´­æœŸé—´ï¼Œæœ‰äº›å•†å“è®¿é—®QPSçªç„¶å¤§å¹…åº¦å¢é«˜æ—¶ï¼Œæˆ‘ä»¬å¦‚ä½•æ‰èƒ½ä¿éšœRedisè®¿é—®çš„æ€§èƒ½ä¸å—å½±å“å‘¢ï¼Ÿ</p><h2>ä»€ä¹ˆæ˜¯çƒ­ Key é—®é¢˜</h2><p>åœ¨è®¨è®ºå…·ä½“æ–¹æ¡ˆä¹‹å‰ï¼Œä½ ä¸å¦¨å…ˆæƒ³ä¸€æƒ³ï¼šè¦æ˜¯Redisä¸­æŸä¸ªKeyçš„è®¿é—®QPSçªç„¶å˜å¾—å¾ˆé«˜ï¼Œä¼šç»™æˆ‘ä»¬çš„ç³»ç»Ÿå¸¦æ¥æ€æ ·çš„å½±å“ï¼Ÿ</p><p>å°±åƒä¸‹é¢çš„å›¾å±•ç¤ºçš„ä¸€æ ·ï¼Œå½“ä» Redis è¯»å–æ•°æ®æ—¶ï¼ŒRedis ä»£ç†æœåŠ¡ä¼šåŸºäº Key è¿›è¡Œ Hash è®¡ç®—ï¼Œä»¥æ­¤å®šä½åˆ° Redis ä¸­å®é™…å­˜æ”¾æ•°æ®çš„åç«¯ Redis Serverã€‚æ‰€ä»¥ï¼Œè¦æ˜¯æŸä¸ª Key çš„è®¿é—® QPS çªç„¶å¤§å¹…æ”€å‡ï¼Œé‚£ä¹ˆè¿™ä¸ª Key æ‰€åœ¨çš„ Redis Server å°±ä¼šæœ‰éƒ¨åˆ†è¯·æ±‚è¢«è¿«æ’é˜Ÿï¼Œè¿›è€Œå¯¼è‡´å»¶è¿Ÿå‡é«˜ï¼Œä¸¥é‡æ—¶è¿˜ä¼šå‡ºç°è¶…æ—¶å¤±è´¥çš„çŠ¶å†µã€‚è¿™ä¾¿æ˜¯æˆ‘ä»¬å¹³å¸¸æ‰€è¯´çš„çƒ­ Key é—®é¢˜ï¼Œè€Œé‚£äº›<strong>è¢«é«˜é¢‘ç‡è®¿é—®çš„ Key å°±æ˜¯çƒ­ Key</strong>ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/71/36/71fb5bb42c689ce7c4725732bfd2b336.jpg?wh=3400x2630\" alt=\"\" title=\"å›¾1 Redis åˆ†ç‰‡æ¶æ„\"></p><p>åœ¨åº”å¯¹çªå‘çƒ­ Key æ‰€å¼•å‘çš„æ€§èƒ½éš¾é¢˜æ—¶ï¼Œå„ä¸ªå…¬å¸æ‰€é‡‡ç”¨çš„è§£å†³æ–¹æ¡ˆå¯è°“æ˜¯å„æœ‰åƒç§‹ã€‚ä¸è¿‡ï¼Œå®ƒä»¬çš„æ ¸å¿ƒæ€è·¯å´æ®Šé€”åŒå½’ï¼Œé‚£ä¾¿æ˜¯<strong>å€ŸåŠ©æ›´å¤šçš„æœºå™¨èµ„æºï¼Œæ¥åˆ†æ‹…çƒ­ Key çš„è®¿é—®æµé‡</strong>ã€‚è¿™äº›æ–¹æ¡ˆå¤§è‡´èƒ½å¤Ÿå½’ä¸ºä»¥ä¸‹ä¸¤ç±»ã€‚</p><!-- [[[read_end]]] --><ul>\n<li>\n<p>ç¬¬ä¸€ç±»æ˜¯åœ¨ä¸šåŠ¡å±‚è¿›è¡Œæ”¹é€ ï¼Œä»è€Œè§£å†³çƒ­Keyé—®é¢˜çš„æ–¹æ¡ˆã€‚</p>\n</li>\n<li>\n<p>ç¬¬äºŒç±»æ˜¯å¯¹ä¸šåŠ¡å±‚é€æ˜çš„ï¼Œäº‘å‚å•†æä¾›çš„ï¼ŒRedisé™„å¸¦æ–¹æ¡ˆï¼ˆæ¯”å¦‚é˜¿é‡Œäº‘å’Œè…¾è®¯äº‘ï¼‰ã€‚</p>\n</li>\n</ul><h2>ä¸šåŠ¡å±‚è§£å†³æ–¹æ¡ˆ</h2><p>æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ä¸šåŠ¡å±‚æ–¹æ¡ˆçš„å…·ä½“æƒ…å†µã€‚</p><h3>æœ¬åœ°ç¼“å­˜å…¨é‡æ•°æ®</h3><p>å¯¹äºä¸šåŠ¡å±‚çš„æ–¹æ¡ˆï¼Œæœ€ä¸ºç®€å•çš„æ˜¯æœåŠ¡<strong>æœ¬åœ°ç¼“å­˜å…¨é‡æ•°æ®</strong>çš„æ–¹æ¡ˆã€‚<strong>ä¹Ÿå°±æ˜¯åœ¨æœåŠ¡çš„å„ä¸ªå®ä¾‹å†…å­˜ä¸­ï¼ŒæŠŠæ‰€æœ‰æ•°æ®éƒ½ç¼“å­˜èµ·æ¥</strong>ã€‚è¿™æ ·å½“è¯·æ±‚è®¿é—®æ—¶ï¼Œå°±å¯ä»¥ç›´æ¥ä»æœåŠ¡å®ä¾‹çš„æœ¬åœ°ç¼“å­˜ä¸­è·å–æ•°æ®ï¼Œè€Œä¸ç”¨è¯·æ±‚Redisï¼Œé˜²æ­¢å‘ç”Ÿçƒ­ Key é—®é¢˜ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/dc/4e/dc31f852df6983f520b798fb1a37e34e.jpg?wh=3593x2722\" alt=\"\" title=\"å›¾2 localcache å…¨é‡ç¼“å­˜\"></p><p>ç„¶è€Œï¼Œè¦æ˜¯æœåŠ¡æœ¬åœ°æ²¡åŠæ³•ç¼“å­˜å…¨éƒ¨æ•°æ®ï¼Œåƒæ•°æ®é‡è¶…å¤§ï¼Œè¶…å‡ºå†…å­˜è§„æ ¼æ‰€èƒ½æ‰¿å—çš„èŒƒå›´ï¼Œåˆæˆ–è€…æ˜¯ä¸ºäº†é¿å¼€ Golangçš„GCï¼ˆåƒåœ¾å›æ”¶ï¼‰å¸¦æ¥çš„å½±å“ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œåœ¨æœ¬åœ°ç¼“å­˜å…¨é‡æ•°æ®çš„æ–¹æ¡ˆå°±è¡Œä¸é€šäº†ã€‚</p><h3>æœ¬åœ°ç¼“å­˜éƒ¨åˆ†æ•°æ®</h3><p>ä¸ºäº†åº”å¯¹æœåŠ¡æœ¬åœ°å†…å­˜æ— æ³•ç¼“å­˜å…¨é‡æ•°æ®è¿™ä¸€å›°å¢ƒï¼Œåœ¨ä¸šåŠ¡å±‚çš„æ–¹æ¡ˆä¸­ï¼Œè¿˜å­˜åœ¨ä¸€ç§ä»…å¯¹éƒ¨åˆ†æ•°æ®è¿›è¡Œç¼“å­˜çš„ç­–ç•¥ï¼Œå³<strong>ä¸“é—¨é’ˆå¯¹çƒ­ Key æ•°æ®è¿›è¡Œç¼“å­˜ï¼Œè€Œå°†å…¶ä»–æ•°æ®æ’é™¤åœ¨ç¼“å­˜èŒƒå›´ä¹‹å¤–</strong>ã€‚</p><p>ç„¶è€Œï¼Œè¦å®ç°è¿™ä¸ªç­–ç•¥ï¼Œå…³é”®åœ¨äºæœåŠ¡ç«¯å¾—æœ‰åŠæ³•çŸ¥é“å“ªäº›æ˜¯çƒ­ Keyï¼Œè¿™æ ·æ‰èƒ½åœ¨æœ¬åœ°ç¼“å­˜å®ƒä»¬ã€‚æ‰€ä»¥å‘¢ï¼Œè¿™å¾—é ä¸€å¥—å¾ˆå®Œå–„çš„çƒ­ Key æ¢æµ‹æ¡†æ¶ï¼Œæœ‰äº†å®ƒï¼Œå°±èƒ½åˆå¿«åˆå‡†åœ°å‘ç°çƒ­ Keyã€‚</p><p>é‚£ä¹ˆï¼Œåˆ°åº•å­˜ä¸å­˜åœ¨èƒ½å¤Ÿå®ç°çƒ­ Key æ¢æµ‹çš„æ¡†æ¶å‘¢ï¼Ÿ</p><p>å®é™…ä¸Šï¼Œ<a href=\"https://gitee.com/jd-platform-opensource/hotkey\">äº¬ä¸œæ¨å‡ºäº†ä¸€ä¸ªå¼€æºçš„çƒ­ Key æ¢æµ‹æ¡†æ¶â€”â€” JdHotkey</a>ï¼Œæœ‰äº†å®ƒï¼Œæˆ‘ä»¬çš„æœåŠ¡ç«¯å°±èƒ½åŠæ—¶åœ°æ„ŸçŸ¥åˆ°çƒ­ Keyã€‚æ¥ä¸‹æ¥å’±ä»¬å°±æ¥ç ”ç©¶ä¸€ä¸‹å®ƒæ˜¯æ€ä¹ˆåšçƒ­ Key æ¢æµ‹çš„ã€‚ä½¿ç”¨ JdHotkey æ¡†æ¶æ¥å®ç°çƒ­ Key çš„æ¢æµ‹ï¼Œä¸»è¦åŒ…å«ä¸¤ä¸ªå…³é”®æ­¥éª¤ã€‚</p><p>é¦–å…ˆæ˜¯ <strong>Key è®¿é—®çš„ä¸ŠæŠ¥ä¸ç»Ÿè®¡</strong>ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/0a/a1/0a3bac0944723674422908bae988f4a1.jpg?wh=3366x2679\" alt=\"\" title=\"å›¾3 Key è®¿é—®ä¸ŠæŠ¥\"></p><p>æ­£å¦‚å‰é¢çš„å›¾é‡Œæ‰€å±•ç¤ºçš„é‚£æ ·ï¼Œç”±äºåŒä¸€ä¸ª Key ä¼šåœ¨ä¸åŒçš„æœåŠ¡å®ä¾‹ä¸­è¢«è®¿é—®ï¼Œæ‰€ä»¥ä»…ä»…ä¾é å•ä¸ªå®¢æˆ·ç«¯æˆ–è€… Redis Proxy éš¾ä»¥å®Œæˆçƒ­ Key çš„ç»Ÿè®¡å·¥ä½œã€‚</p><p>ä¸ºäº†èƒ½å¤Ÿç²¾å‡†åœ°ç»Ÿè®¡çƒ­ Keyï¼Œå°±å¿…é¡»å•ç‹¬éƒ¨ç½²ä¸€ä¸ªä¸“é—¨çš„ worker æœåŠ¡ã€‚å½“æˆ‘ä»¬è®¿é—®æŸä¸ªKeyæ—¶ï¼Œéœ€è¦è°ƒç”¨JdHotkeyæ¡†æ¶æä¾›çš„SDKè¿›è¡Œä¸ŠæŠ¥ã€‚SDKåº•å±‚ä¼šå‘¨æœŸæ€§åœ°æŠŠæ”¶é›†åˆ°çš„Keyè®¿é—®æ•°æ®ä¸ŠæŠ¥è‡³è¿™ä¸ªç»Ÿä¸€çš„ worker æœåŠ¡ï¼Œä»¥ä¾¿å¼€å±•èšåˆè®¡ç®—ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå·²ç»çƒ­äº†çš„Keyä¸ä¼šå†æ¬¡å‘é€ç»™workeræœåŠ¡ï¼Œé™¤éClientæœ¬åœ°è¯¥Keyç¼“å­˜å·²è¿‡æœŸã€‚</p><p>å½“ç„¶ï¼Œé’ˆå¯¹ä¸åŒæœåŠ¡å®ä¾‹è®¿é—®ç›¸åŒKeyçš„æƒ…å†µï¼Œæ¡†æ¶SDKä¼šæ ¹æ®ç±»ä¼¼ä¸‹é¢çš„ä¼ªä»£ç ï¼Œå°†ç›¸åŒKeyçš„è®¿é—®ä¸ŠæŠ¥åˆ°åŒä¸€ä¸ª worker å®ä¾‹ã€‚è¿™æ ·ä¸€æ¥ï¼Œå°±èƒ½å¤Ÿæœ‰æ•ˆå¯¹ Key è®¿é—®é¢‘ç‡åšå‡ºç²¾ç¡®ç»Ÿè®¡ï¼Œä¸ºåç»­çƒ­ Key çš„åˆ¤å®šä¸å¤„ç†æä¾›å¯é çš„æ•°æ®æ”¯æ’‘ã€‚</p><pre><code class=\"language-go\">// workersåˆ—è¡¨ï¼Œå¯ä»¥é€šè¿‡æœåŠ¡å‘ç°è·å–workersåˆ—è¡¨\nworkers := []string{\"worker1\", \"worker2\", \"worker3\", \"worker4\", \"worker5\"}\nkey := \"example_key\"\nindex := hash(key)%len(workers)\nworker = workers[index] // ä¸ŠæŠ¥çš„worker\n</code></pre><p>ç¬¬äºŒæ­¥å°±æ˜¯<strong>çƒ­ Key çš„åˆ¤æ–­ä¸æ¨é€</strong>ã€‚å½“ä¸“é—¨è´Ÿè´£ç»Ÿè®¡çš„ worker æœåŠ¡ç›‘æµ‹åˆ°çƒ­ Key å‡ºç°æ—¶ï¼Œå®ƒä¼šä¸»åŠ¨åœ°å°†çƒ­ Key ä¿¡æ¯æ¨é€åˆ°æ‰€æœ‰ç›¸å…³çš„ä¸šåŠ¡æœåŠ¡å®ä¾‹ï¼Œä»è€Œç¡®ä¿å„ä¸ªä¸šåŠ¡æœåŠ¡å®ä¾‹èƒ½å¤ŸåŠæ—¶çŸ¥æ™“çƒ­ Key çš„æƒ…å†µï¼Œå¹¶æ®æ­¤åšå‡ºç›¸åº”çš„å¤„ç†ç­–ç•¥è°ƒæ•´ã€‚è¿™ä¸ªè¿‡ç¨‹çš„ç¤ºæ„å›¾å¦‚ä¸‹ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/3e/24/3ec1ac71840c2a1ebc2f5584edc02024.jpg?wh=3366x2679\" alt=\"\" title=\"å›¾4 çƒ­ Key æ¨é€\"></p><p>ä¸ºäº†è®©ä½ æœ‰ä¸ªç›´è§‚çš„æ„ŸçŸ¥ï¼Œä¸‹é¢çš„å›¾é‡Œï¼Œæˆ‘ç»™å‡ºäº†æœåŠ¡ç«¯æ¥å…¥çƒ­Keyæ¢æµ‹ä¹‹åçš„Redisè®¿é—®æµç¨‹å›¾ï¼Œä¾›ä½ å‚è€ƒã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/a8/2f/a8de16e2ce2fb6faf4418d366yyd792f.jpg?wh=4000x1135\" alt=\"\" title=\"å›¾5 æœåŠ¡ç«¯ Redis è®¿é—®æµç¨‹å›¾\"></p><p>åœ¨ä¸šåŠ¡å±‚æ¥å…¥çƒ­Keyçš„æ¢æµ‹æ¡†æ¶ï¼Œè™½ç„¶å¯ä»¥è§£å†³çƒ­Keyé—®é¢˜ï¼Œä½†æ˜¯ç»™æˆ‘ä»¬å¸¦æ¥äº†é¢å¤–çš„å¤æ‚åº¦ã€‚æ¯”å¦‚æˆ‘ä»¬éœ€è¦æ¥å…¥ç‰¹å®šçš„SDKæ‰èƒ½ä½¿ç”¨ï¼Œè€Œä¸”è¿˜éœ€è¦éƒ¨ç½²ä¸€ä¸ªé¢å¤–çš„workeræœåŠ¡æ¥åšç»Ÿè®¡ã€‚</p><p>é‚£æˆ‘ä»¬æœ‰æ²¡æœ‰åŠæ³•é¿å…å¯¹ä¸šåŠ¡å±‚çš„æ”¹é€ ï¼Œåœ¨Redisæ•°æ®åº“å±‚è§£å†³çƒ­Keyé—®é¢˜å‘¢ï¼Ÿ</p><h2>Rediså±‚è§£å†³æ–¹æ¡ˆ</h2><p>å®é™…ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨å„ä¸ªäº‘å‚å•†çš„Redisæ‰€æä¾›çš„åŠŸèƒ½ï¼Œæ¥è§£å†³çƒ­Keyé—®é¢˜ï¼Œä»è€Œé¿å…å¢åŠ ä¸šåŠ¡é€»è¾‘çš„å¤æ‚æ€§ã€‚è€Œåˆ©ç”¨äº‘Redisè§£å†³çƒ­Keyé—®é¢˜ï¼Œé€šå¸¸æœ‰ä¸¤ç§æ¯”è¾ƒå¸¸ç”¨çš„æ–¹æ¡ˆã€‚</p><h3>è¯»å†™åˆ†ç¦»</h3><p>é¦–å…ˆæ˜¯è¯»å†™åˆ†ç¦»æ–¹æ¡ˆã€‚å°±åƒä¸‹é¢çš„å›¾ä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥<strong>ç»™åˆ†ç‰‡Serverå¢åŠ æ›´å¤šçš„ä»åº“ï¼Œè®©ä»åº“æ¥æ‰¿è½½Keyçš„è¯»è®¿é—®</strong>ï¼Œä»è€Œé¿å…çƒ­Keyè®¿é—®å½±å“å•å°Redis Serverçš„æ€§èƒ½ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/03/f3/036f05f7a556299655f7b2a7debfa1f3.jpg?wh=3912x2540\" alt=\"\" title=\"å›¾6 è¯»å†™åˆ†ç¦»æ¶æ„\"></p><p>ä¸è¿‡å‘¢ï¼Œåœ¨é‡‡ç”¨è¯»å†™åˆ†ç¦»è¿™ç§æ¶æ„çš„æ—¶å€™ï¼Œç”±äºæˆ‘ä»¬äº‹å…ˆæ²¡åŠæ³•ç¡®å®šç©¶ç«Ÿå“ªäº› Key ä¼šæˆä¸ºçƒ­ Keyï¼Œæ‰€ä»¥ä¸ºäº†ä¿é™©èµ·è§ï¼Œæˆ‘ä»¬å°±åªèƒ½å¯¹æ‰€æœ‰çš„ Redis Server éƒ½è¿›è¡Œæ‰©å……ä»åº“çš„æ“ä½œã€‚è¿™æ ·ä¸€æ¥ï¼Œå¿…ç„¶ä¼šä½¿å¾—æ‰€è€—è´¹çš„Redisèµ„æºæˆæœ¬å¤§å¹…å¢åŠ ã€‚</p><p>é‚£ä¹ˆï¼Œæˆ‘ä»¬ç©¶ç«Ÿåº”è¯¥é‡‡ç”¨ä»€ä¹ˆæ ·çš„æ–¹æ³•ï¼Œæ‰èƒ½æœ‰æ•ˆè§£å†³è¿™æ ·çš„é—®é¢˜å‘¢ï¼Ÿ</p><h3>Proxyçƒ­Keyæ‰¿è½½</h3><p>å®é™…ä¸Šï¼Œä¸å°‘äº‘å‚å•†éƒ½é¢å¤–æä¾›äº†ä¸€ç§å€ŸåŠ© Proxy æ¥æ‰¿è½½çƒ­ Key çš„æ–¹æ¡ˆã€‚</p><p>å°±æ‹¿é˜¿é‡Œäº‘Redisçš„ <a href=\"https://help.aliyun.com/zh/redis/user-guide/use-proxy-query-cache-to-address-issues-caused-by-hotkeys?spm=a2c4g.11186623.help-menu-26340.d_2_11_4_0.60a8181cJR2s8w&scm=20140722.H_216309._.OR_help-T_cn-DAS-zh-V_1\">Proxy Query Cache</a> ç‰¹æ€§æ¥è¯´ï¼Œè¿™ç±»æ–¹æ¡ˆçš„æ ¸å¿ƒæ€è·¯åœ¨äºï¼Œå¹¶éé’ˆå¯¹æ¯ä¸ªRedis Serveréƒ½å»æ‰©å……ä»åº“ï¼Œè€Œæ˜¯å·§å¦™åœ°<strong>åˆ©ç”¨ Proxyæ¥ç¼“å­˜çƒ­Keyæ•°æ®ï¼Œæ‰¿æ‹…çƒ­ Key è®¿é—®æ‰€å¸¦æ¥çš„å‹åŠ›</strong>ã€‚è¿™æ ·åœ¨åº”å¯¹çƒ­ Key é—®é¢˜æ—¶ï¼Œæ—¢èƒ½æœ‰æ•ˆç¼“è§£ç³»ç»Ÿå‹åŠ›ï¼Œåˆèƒ½é¿å…å› å¤§è§„æ¨¡æ‰©å……ä»åº“è€Œå¯¼è‡´çš„èµ„æºæµªè´¹ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/9f/69/9fbfa40d3f80672d9d5d8c2954b27d69.jpg?wh=3319x2540\" alt=\"\" title=\"å›¾7 Proxy çƒ­ Key æ‰¿è½½æ–¹æ¡ˆ\"></p><p>é‚£ä¹ˆï¼Œè¿™ç±»æ–¹æ¡ˆç©¶ç«Ÿæ˜¯æ€æ ·å®ç°çš„å‘¢ï¼Ÿ</p><p>å®é™…ä¸Šï¼Œè™½ç„¶è¿™ç±»æ–¹æ¡ˆçš„å®ç°ç»†èŠ‚å„æœ‰ä¸åŒï¼Œä½†å¤§è‡´éƒ½å¯ä»¥åˆ†ä¸ºä¸‹é¢å‡ æ­¥ã€‚</p><p>é¦–å…ˆï¼Œå½“å¯¹Keyè¿›è¡Œè®¿é—®æ—¶ï¼Œåœ¨Redis Serverç«¯è¿›è¡ŒKeyè®¿é—®é¢‘ç‡ç»Ÿè®¡ã€‚</p><p>æ¥ç€ï¼Œå½“Redis Serveråˆ¤å®šä¸ºçƒ­Keyæ—¶ï¼Œé€šè¿‡æ¨æˆ–è€…æ‹‰çš„æ¨¡å¼ï¼Œå°†è¿™ä¸ªçƒ­ Key åŠå…¶ç›¸å…³æ•°æ®ç¼“å­˜åˆ° Proxy ä¹‹ä¸­ã€‚</p><p>ä¹‹åï¼Œå½“æœ‰çƒ­Keyè®¿é—®æ—¶ï¼Œç›´æ¥ä»Proxyè·å–æ•°æ®è¿”å›ï¼Œè€Œä¸å†ä»Redis Serverè·å–ï¼Œä»è€Œå‡è½»å•ä¸ªRedis Serverçš„å‹åŠ›ã€‚</p><p>æœ€åï¼Œå½“Proxyç¼“å­˜çš„æ•°æ®è¿‡æœŸæ—¶ï¼Œé‡æ–°ä»Redis Serverè·å–ã€‚</p><h2>å°ç»“</h2><p>ä»Šå¤©è¿™èŠ‚è¯¾ï¼Œæˆ‘ä»¥å¤§ä¿ƒæŠ¢è´­å•†å“è¯¦æƒ…é¡µçš„ç¼“å­˜åœºæ™¯ä¸ºä¾‹ï¼Œå¸¦ä½ æ¢³ç†äº†ç¼“å­˜çš„çƒ­Keyé—®é¢˜ä»¥åŠå¸¸ç”¨è§£å†³æ–¹æ¡ˆï¼Œç°åœ¨è®©æˆ‘ä»¬æ¥å›é¡¾ä¸‹è¿™äº›è§£å†³æ–¹æ¡ˆã€‚</p><ul>\n<li>\n<p>é¦–å…ˆæ˜¯ä¸šåŠ¡æœåŠ¡æœ¬åœ°ç¼“å­˜å…¨é‡æ•°æ®çš„æ–¹æ¡ˆã€‚è¦æ˜¯æ•°æ®é‡ä¸å¤§ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨æœåŠ¡æœ¬åœ°å†…å­˜æŠŠæ‰€æœ‰æ•°æ®éƒ½ç¼“å­˜èµ·æ¥ï¼Œè¿™æ ·èƒ½å¤§å¹…åº¦é™ä½çƒ­Keyé—®é¢˜å¯¼è‡´çš„Redisè®¿é—®å‹åŠ›ã€‚</p>\n</li>\n<li>\n<p>ç„¶åæ˜¯ä¸šåŠ¡æœåŠ¡æœ¬åœ°åªç¼“å­˜çƒ­Keyæ•°æ®çš„æ–¹æ¡ˆã€‚å½“æœåŠ¡ä¸èƒ½ç¼“å­˜å…¨éƒ¨æ•°æ®æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥æ¥å…¥çƒ­ Key æ¢æµ‹æ¡†æ¶ï¼ŒåªæŠŠé‚£äº›è¢«é¢‘ç¹è®¿é—®çš„çƒ­ Key æ•°æ®å­˜åˆ°æœ¬åœ°ï¼ŒèŠ‚çœå†…å­˜ä¹‹å¤–è¿˜èƒ½ä¿è¯çƒ­ Key çš„å¿«é€Ÿè¯»å–ã€‚</p>\n</li>\n<li>\n<p>ä¹‹åæ˜¯Redisè¯»å†™åˆ†ç¦»æ¶æ„æ–¹æ¡ˆã€‚è¦æ˜¯ä¸æƒ³è®©ä¸šåŠ¡å±‚å˜å¾—å¤æ‚ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡å–è¯»å†™åˆ†ç¦»æ¶æ„ï¼Œç»™æ¯ä¸ª Redis Server éƒ½åŠ ä¸Šä»åº“ï¼Œè®©ä»åº“å»åº”å¯¹çƒ­ Key çš„é«˜é¢‘ç‡è¯»å–ï¼Œåˆ†æ‹…å‹åŠ›ã€‚</p>\n</li>\n<li>\n<p>æœ€åæ˜¯Proxyçƒ­Keyæ‰¿è½½æ–¹æ¡ˆã€‚ç”±äºè¯»å†™åˆ†ç¦»æ¶æ„ä¼šå¢åŠ Redisèµ„æºæˆæœ¬ï¼Œæ‰€ä»¥åœ¨Redisæä¾›äº†çƒ­Keyæ‰¿è½½æ–¹æ¡ˆçš„æ¡ä»¶ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥ä¼˜å…ˆç”¨Proxyçƒ­Keyæ‰¿è½½æ–¹æ¡ˆï¼Œè¿™æ ·æ—¢èƒ½è§£å†³çƒ­ Key é—®é¢˜ï¼Œåˆèƒ½æ§åˆ¶æˆæœ¬ã€‚</p>\n</li>\n</ul><p>å¸Œæœ›ä½ å¥½å¥½ä½“ä¼šè¿™å‡ ä¸ªæ–¹æ¡ˆçš„ä½¿ç”¨åœºæ™¯å’ŒåŸç†ã€‚å½“é‡åˆ°çƒ­Keyé—®é¢˜æ—¶ï¼Œåˆ«å¿˜äº†é€‰æ‹©åˆé€‚çš„æ–¹æ¡ˆæ¥è§£å†³ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>åœ¨ Go è¯­è¨€çš„å¹¶å‘åº“å­˜åœ¨è¿™æ ·ä¸€ä¸ªç±»å‹ï¼Œåˆ©ç”¨å®ƒèƒ½å¤Ÿé¿å…æœåŠ¡ Server å‘ä¸‹æ¸¸ï¼ˆæ¯”å¦‚ Redisï¼‰åŒæ—¶å‘èµ·è¿‡å¤šè¯·æ±‚ã€‚é‚£ä¹ˆï¼Œè¿™ä¸ªç±»å‹ç©¶ç«Ÿæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p><p>æ¬¢è¿ä½ æŠŠä½ çš„ç­”æ¡ˆåˆ†äº«åœ¨è¯„è®ºåŒºï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠè¿™èŠ‚è¯¾çš„å†…å®¹åˆ†äº«ç»™éœ€è¦çš„æœ‹å‹ï¼Œæˆ‘ä»¬ä¸‹èŠ‚è¯¾å†è§ï¼</p>","comments":[{"had_liked":false,"id":396898,"user_name":"è¯·åŠ¡å¿…ä¼˜ç§€","can_delete":false,"product_type":"c1","uid":2025816,"ip_address":"æ¹–åŒ—","ucode":"2B7AE4EF41C972","user_header":"https://static001.geekbang.org/account/avatar/00/1e/e9/58/7bb2c561.jpg","comment_is_top":false,"comment_ctime":1736094668,"is_pvip":true,"replies":[{"id":144031,"content":"1.rocksdbè¿™ä¸ªï¼Œç¡®å®å¾ˆå¤šå¤§å…¬å¸å†…éƒ¨éƒ½ä¼šæœ‰è¿™ç§ç¼“å­˜æ–¹æ¡ˆï¼Œå®ƒæ˜¯å†…å­˜+ç£ç›˜çš„æ··åˆå­˜å‚¨æ–¹å¼ï¼Œä¸»è¦æ˜¯ç¼“å­˜çš„æ•°æ®é‡ï¼ˆTBç”šè‡³PBçº§ï¼‰æ¯”è¾ƒå¤§çš„æ—¶å€™ç”¨ï¼Œèµ·åˆ°é™æœ¬çš„ç›®çš„ã€‚2.è¿™ç§æ–¹å¼ï¼Œä¸€èˆ¬ç›¸åŒé…ç½®çš„æœºå™¨ï¼Œå•æœºååå’Œå»¶æ—¶ä¸å¦‚redisã€‚æˆ‘ä»¬ä¸€èˆ¬æ˜¯ç¼“å­˜çš„æ•°æ®é‡å°çš„æ—¶å€™ç”¨redisï¼Œå¤§çš„æ—¶å€™ç”¨æ··åˆå­˜å‚¨çš„æ–¹å¼ã€‚3.ä¸æ˜¯æ›¿ä»£çš„å…³ç³»ï¼Œå„æœ‰å„çš„é€‚ç”¨åœºæ™¯","user_name":"ä½œè€…å›å¤","user_name_real":"ä½œè€…","uid":1313417,"ctime":1736175184,"ip_address":"å¹¿ä¸œ","comment_id":396898,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100843701,"comment_content":"å­¦åˆ°äº†goçš„golang.org&#47;x&#47;sync&#47;singleflightåº“ï¼Œä¹‹å‰æ²¡æœ‰ç”¨è¿‡ï¼è€å¸ˆï¼Œé‚£ä¹ˆä»€ä¹ˆåœºæ™¯ä¼šåœ¨Redisé›†ç¾¤å’Œå…³ç³»å‹æ•°æ®åº“ä¸­é—´å†åŠ ä¸€å±‚KVæŒä¹…åŒ–å­˜å‚¨ï¼ˆæœ‰äº›å…¬å¸ä¼šç”¨rocksdb+raftä»¿ç…§Rediså†æä¸€å±‚ï¼‰å‘¢ï¼Ÿæˆ–è€…ä»€ä¹ˆæ—¶å€™ä¼šç›´æ¥ä¸ç”¨redisï¼Œç›´æ¥ç”¨rocksdb+raftçš„é‚£ä¸€å¥—kvå‘¢ï¼Ÿè¿™ä¸ªç›®å‰ä¸šç•Œè¿ç”¨çš„å¾ˆæ™®éå—ï¼Ÿæ˜¯å¦ä¼šå–ä»£redisè¿˜æ˜¯è¯´åªæ˜¯å„å®¶åœ¨é€ æ— ç”¨çš„è½®å­ï¼ˆæœ‰ä¸€äº›å…¬å¸å·ç§°å–ä»£redisï¼Œç”¨rocksdb+rafté€ å‡ºæ¥å„ç§xxedisï¼‰ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1313417,"avatar":"https://static001.geekbang.org/account/avatar/00/14/0a/89/eb8c28a4.jpg","nickname":"å¾é€¸","note":"","ucode":"DCFDEE08FD263A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":655891,"discussion_content":"1.rocksdbè¿™ä¸ªï¼Œç¡®å®å¾ˆå¤šå¤§å…¬å¸å†…éƒ¨éƒ½ä¼šæœ‰è¿™ç§ç¼“å­˜æ–¹æ¡ˆï¼Œå®ƒæ˜¯å†…å­˜+ç£ç›˜çš„æ··åˆå­˜å‚¨æ–¹å¼ï¼Œä¸»è¦æ˜¯ç¼“å­˜çš„æ•°æ®é‡ï¼ˆTBç”šè‡³PBçº§ï¼‰æ¯”è¾ƒå¤§çš„æ—¶å€™ç”¨ï¼Œèµ·åˆ°é™æœ¬çš„ç›®çš„ã€‚2.è¿™ç§æ–¹å¼ï¼Œä¸€èˆ¬ç›¸åŒé…ç½®çš„æœºå™¨ï¼Œå•æœºååå’Œå»¶æ—¶ä¸å¦‚redisã€‚æˆ‘ä»¬ä¸€èˆ¬æ˜¯ç¼“å­˜çš„æ•°æ®é‡å°çš„æ—¶å€™ç”¨redisï¼Œå¤§çš„æ—¶å€™ç”¨æ··åˆå­˜å‚¨çš„æ–¹å¼ã€‚3.ä¸æ˜¯æ›¿ä»£çš„å…³ç³»ï¼Œå„æœ‰å„çš„é€‚ç”¨åœºæ™¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1736175184,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":396830,"user_name":"Amosãƒ¾","can_delete":false,"product_type":"c1","uid":1567014,"ip_address":"å¹¿ä¸œ","ucode":"833F6FCB4042AD","user_header":"https://static001.geekbang.org/account/avatar/00/17/e9/26/472e16e4.jpg","comment_is_top":false,"comment_ctime":1735835330,"is_pvip":true,"replies":[{"id":144008,"content":"å“ˆå“ˆï¼Œå¯ä»¥åšåˆ†ç‰‡é›†ç¾¤ï¼Œæ¯ä¸ªé›†ç¾¤åªåŠ è½½éƒ¨åˆ†æ•°æ®ï¼Œåé¢æœ¬åœ°ç¼“å­˜é‚£ä¸€èŠ‚ä¼šè®²åˆ°","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1313417,"ctime":1735901386,"ip_address":"å¹¿ä¸œ","comment_id":396830,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100843701,"comment_content":"æ•°æ®é‡å¤§çš„æ—¶å€™ï¼Œæœ¬åœ°ä¸šåŠ¡ç¼“å­˜æ˜¯å¦å¯ä»¥è€ƒè™‘å®ç°ç±»ä¼¼redisé›†ç¾¤çš„åˆ†å¸ƒå¼ç¼“å­˜ï¼Ÿç›®å‰ä¸šç•Œgoç”Ÿæ€æ˜¯å¦æœ‰ä¸€äº›æˆç†Ÿçš„å·¥å…·å¯ä»¥å€Ÿé‰´ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1313417,"avatar":"https://static001.geekbang.org/account/avatar/00/14/0a/89/eb8c28a4.jpg","nickname":"å¾é€¸","note":"","ucode":"DCFDEE08FD263A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":655799,"discussion_content":"å“ˆå“ˆï¼Œå¯ä»¥åšåˆ†ç‰‡é›†ç¾¤ï¼Œæ¯ä¸ªé›†ç¾¤åªåŠ è½½éƒ¨åˆ†æ•°æ®ï¼Œåé¢æœ¬åœ°ç¼“å­˜é‚£ä¸€èŠ‚ä¼šè®²åˆ°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1735901386,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":396840,"user_name":"lJ","can_delete":false,"product_type":"c1","uid":2562558,"ip_address":"æ±Ÿè‹","ucode":"CC29D06A16FF93","user_header":"https://static001.geekbang.org/account/avatar/00/27/19/fe/d31344db.jpg","comment_is_top":false,"comment_ctime":1735873630,"is_pvip":false,"replies":[{"id":144007,"content":"1.é«˜å¹¶å‘åœºæ™¯ï¼ŒLRUä¸å¯è¡Œï¼Œä¸åŠ åŒºåˆ†çš„è¯ï¼Œä¼šå¯¼è‡´çƒ­keyè¢«é¢‘ç¹æ·˜æ±°æ‰“åˆ°redisã€‚ 2.æ²¡è¿™ä¸ªé™åˆ¶ï¼ŒåŒä¸€ä¸ªå®¢æˆ·ç«¯è¯·æ±‚å¯ä»¥è´Ÿè½½å‡è¡¡æ‰“åˆ°å¤šä¸ªproxy 3.æœ¬è´¨éƒ½æ˜¯æ„ŸçŸ¥çƒ­keyï¼Œæ·»åŠ äºŒçº§ç¼“å­˜ï¼Œè¿½æ±‚çš„éƒ½æ˜¯æœ€ç»ˆä¸€è‡´æ€§ï¼Œåœºæ™¯ä¸Šï¼Œç”¨æ¢æµ‹æ¡†æ¶çš„æ–¹æ¡ˆï¼Œæ¢æµ‹å‡ºçƒ­keyä¹‹åï¼Œåç»­åŠ¨ä½œç”±ä¸šåŠ¡å†³å®šï¼Œä¸å…‰å¯ä»¥é˜²æ­¢redisçƒ­keyï¼Œè¿˜èƒ½é˜²æ•°æ®åº“çƒ­è¡Œè®¿é—®ï¼Œä¸€äº›é»‘äº§ipæ‹¦æˆªç­‰æ“ä½œï¼Œé€‚ç”¨åœºæ™¯æ›´å¹¿ï¼Œä½†æ˜¯å¯¹ä»£ç çš„ä¾µå…¥ä¹Ÿæ¯”è¾ƒé«˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1313417,"ctime":1735901278,"ip_address":"å¹¿ä¸œ","comment_id":396840,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100843701,"comment_content":"1. ä¸šåŠ¡å±‚è§£å†³æ–¹æ¡ˆ=&gt;æœ¬åœ°ç¼“å­˜éƒ¨åˆ†æ•°æ®ä¸­ï¼Œé‡‡ç”¨æœ¬åœ°ç¼“å­˜çš„ LRUç­–ç•¥æˆ–è¿‡æœŸç­–ç•¥æ¥ç®¡ç†ç¼“å­˜æ˜¯å¦å¯è¡Œå‘¢\n2. Proxy çƒ­ Key æ‰¿è½½æ–¹æ¡ˆ =&gt;åŒä¸€ä¸ªå®¢æˆ·ç«¯ä¼šè¢«åŒä¸€ä¸ªproxyå¤„ç†å—\n3. è¿™äº›æ–¹æ¡ˆå¯¹æ—§æ•°æ®çš„å®¹å¿åº¦æ˜¯æ€ä¹ˆæ ·çš„å‘¢ï¼Œåœ¨æ•°æ®ä¸€è‡´æ€§æ–¹é¢ï¼Œå„ä¸ªæ–¹æ¡ˆé€‚ç”¨çš„ä¸šåŠ¡åœºæ™¯æœ‰å“ªäº›æ³¨æ„ç‚¹å‘¢\n4. æ€è€ƒé¢˜ï¼šhttps:&#47;&#47;pkg.go.dev&#47;golang.org&#47;x&#47;sync&#47;singleflightï¼Œå¤§å¹¶å‘è¯·æ±‚çš„åœºæ™¯ï¼Œè€Œä¸”è¿™äº›è¯·æ±‚éƒ½æ˜¯è¯»è¯·æ±‚æ—¶ï¼Œå¯ä»¥æŠŠè¿™äº›è¯·æ±‚åˆå¹¶ä¸ºä¸€ä¸ªè¯·æ±‚\n","like_count":0,"discussions":[{"author":{"id":1313417,"avatar":"https://static001.geekbang.org/account/avatar/00/14/0a/89/eb8c28a4.jpg","nickname":"å¾é€¸","note":"","ucode":"DCFDEE08FD263A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":655798,"discussion_content":"1.é«˜å¹¶å‘åœºæ™¯ï¼ŒLRUä¸å¯è¡Œï¼Œä¸åŠ åŒºåˆ†çš„è¯ï¼Œä¼šå¯¼è‡´çƒ­keyè¢«é¢‘ç¹æ·˜æ±°æ‰“åˆ°redisã€‚ 2.æ²¡è¿™ä¸ªé™åˆ¶ï¼ŒåŒä¸€ä¸ªå®¢æˆ·ç«¯è¯·æ±‚å¯ä»¥è´Ÿè½½å‡è¡¡æ‰“åˆ°å¤šä¸ªproxy 3.æœ¬è´¨éƒ½æ˜¯æ„ŸçŸ¥çƒ­keyï¼Œæ·»åŠ äºŒçº§ç¼“å­˜ï¼Œè¿½æ±‚çš„éƒ½æ˜¯æœ€ç»ˆä¸€è‡´æ€§ï¼Œåœºæ™¯ä¸Šï¼Œç”¨æ¢æµ‹æ¡†æ¶çš„æ–¹æ¡ˆï¼Œæ¢æµ‹å‡ºçƒ­keyä¹‹åï¼Œåç»­åŠ¨ä½œç”±ä¸šåŠ¡å†³å®šï¼Œä¸å…‰å¯ä»¥é˜²æ­¢redisçƒ­keyï¼Œè¿˜èƒ½é˜²æ•°æ®åº“çƒ­è¡Œè®¿é—®ï¼Œä¸€äº›é»‘äº§ipæ‹¦æˆªç­‰æ“ä½œï¼Œé€‚ç”¨åœºæ™¯æ›´å¹¿ï¼Œä½†æ˜¯å¯¹ä»£ç çš„ä¾µå…¥ä¹Ÿæ¯”è¾ƒé«˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1735901278,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":396836,"user_name":"ã€WJã€","can_delete":false,"product_type":"c1","uid":1511840,"ip_address":"ä¸Šæµ·","ucode":"B2F6FB9ECFDC12","user_header":"https://static001.geekbang.org/account/avatar/00/17/11/a0/085f8747.jpg","comment_is_top":false,"comment_ctime":1735863618,"is_pvip":false,"replies":[{"id":144011,"content":"åšäºŒçº§ç¼“å­˜ï¼Œé¿å…å…¨éƒ¨æ‰“åˆ°å•ä¸ªredis server","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1313417,"ctime":1735901717,"ip_address":"å¹¿ä¸œ","comment_id":396836,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100843701,"comment_content":"è¯†åˆ«å‡ºæ¥çƒ­keyä»¥åå‘¢","like_count":0,"discussions":[{"author":{"id":1313417,"avatar":"https://static001.geekbang.org/account/avatar/00/14/0a/89/eb8c28a4.jpg","nickname":"å¾é€¸","note":"","ucode":"DCFDEE08FD263A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":655802,"discussion_content":"åšäºŒçº§ç¼“å­˜ï¼Œé¿å…å…¨éƒ¨æ‰“åˆ°å•ä¸ªredis server","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1735901717,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":396834,"user_name":"Realm","can_delete":false,"product_type":"c1","uid":1081299,"ip_address":"æµ™æ±Ÿ","ucode":"30CBEBE619D1A2","user_header":"https://static001.geekbang.org/account/avatar/00/10/7f/d3/b5896293.jpg","comment_is_top":false,"comment_ctime":1735858077,"is_pvip":true,"replies":[{"id":144010,"content":"å¯ä»¥çœ‹ä¸‹singleflightğŸ˜€","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1313417,"ctime":1735901651,"ip_address":"å¹¿ä¸œ","comment_id":396834,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100843701,"comment_content":"å¸¦ç¼“å†²åŒºçš„é€šé“.","like_count":0,"discussions":[{"author":{"id":1313417,"avatar":"https://static001.geekbang.org/account/avatar/00/14/0a/89/eb8c28a4.jpg","nickname":"å¾é€¸","note":"","ucode":"DCFDEE08FD263A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":655801,"discussion_content":"å¯ä»¥çœ‹ä¸‹singleflightğŸ˜€","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1735901651,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]}]}