{"id":214067,"title":"13 | é«˜å¯ç”¨æ¶æ„æ¡ˆä¾‹ï¼ˆä¸€ï¼‰ï¼šå¦‚ä½•å®ç°O2Oå¹³å°æ—¥è®¢å•500ä¸‡ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯ç‹åº†å‹ã€‚åœ¨ä¸Šä¸€è®²ä¸­ï¼Œæˆ‘å’Œä½ ä»‹ç»äº†é«˜å¯ç”¨ç³»ç»Ÿçš„è®¾è®¡åŸåˆ™å’Œå¸¸è§æ‰‹æ®µã€‚ä»Šå¤©å‘¢ï¼Œæˆ‘ä¼šé€šè¿‡ä¸€ä¸ªå®é™…çš„æ¡ˆä¾‹ï¼Œå‘Šè¯‰ä½ å…·ä½“å¦‚ä½•è½åœ°ä¸€ä¸ªé«˜å¯ç”¨çš„æ¶æ„ï¼Œè®©ä½ èƒ½å¤Ÿæ·±å…¥ç†è§£å’Œè¿ç”¨è¿™äº›é«˜å¯ç”¨æ‰‹æ®µã€‚</p><h2>é¡¹ç›®èƒŒæ™¯ä»‹ç»</h2><p>å…ˆè¯´ä¸‹é¡¹ç›®çš„èƒŒæ™¯ã€‚è¿™æ˜¯ä¸€ä¸ªå°ç¨‹åºç‚¹é¤å¹³å°ï¼Œç”¨æˆ·åœ¨å°ç¨‹åºä¸Šç‚¹é¤å¹¶æ”¯ä»˜å®Œæˆåï¼Œè®¢å•ä¼šå…ˆè½åˆ°è®¢å•åº“ï¼Œç„¶åè¿›ä¸€æ­¥æ¨é€åˆ°é—¨åº—çš„æ”¶é“¶ç³»ç»Ÿï¼›æ”¶é“¶ç³»ç»Ÿæ¥å•åï¼Œæ¨é€ç»™åå¨ç³»ç»Ÿè¿›è¡Œç”Ÿäº§ï¼›åŒæ—¶è¿”å›å°ç¨‹åºå–é¤ç ï¼Œç”¨æˆ·å¯ä»¥å‡­å–é¤ç å»é—¨åº—å–é¤æˆ–æ”¶å–å¤–å–ã€‚</p><p>è¿™ä¸ªé¡¹ç›®æœåŠ¡äºä¸€å®¶å¤§å‹çš„é¤é¥®å…¬å¸ï¼Œå…¬å¸åœ¨å…¨å›½æœ‰å¤§é‡çš„é—¨åº—ï¼Œä»–ä»¬å‡†å¤‡æä¸€ä¸ªé•¿æœŸçš„å¤§å‹çº¿ä¸Šä¿ƒé”€æ´»åŠ¨ï¼Œä¿ƒé”€çš„åŠ›åº¦å¾ˆå¤§ï¼šç”¨æˆ·å¯ä»¥åœ¨å°ç¨‹åºä¸Šå…ˆé¢†å–ä¼˜æƒ åˆ¸ï¼Œç„¶åå‡­åˆ¸å†æ”¯ä»˜1å…ƒï¼Œå°±å¯ä»¥è´­ä¹°ä»·å€¼æ•°åå…ƒçš„å¥—é¤ã€‚</p><p>ç»“åˆä»¥å¾€çš„ç»éªŒï¼Œä»¥åŠè¿™æ¬¡çš„ä¿ƒé”€åŠ›åº¦ï¼Œæˆ‘ä»¬é¢„è®¡åœ¨é«˜å³°æ—¶ï¼Œå‰ç«¯å°ç¨‹åºè¯·æ±‚å°†ä¼šè¾¾åˆ°<strong>æ¯ç§’10ä¸‡QPS</strong>ï¼Œå¹¶ä¸”é¢„è®¡<strong>é¦–æ—¥çš„è®¢å•æ•°é‡ä¼šè¶…è¿‡500ä¸‡</strong>ã€‚åœ¨è¿™ç§é«˜å¹¶å‘çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¸ºäº†ä¿è¯ç”¨æˆ·çš„ä½“éªŒï¼Œ<strong>ç³»ç»Ÿæ•´ä½“çš„å¯ç”¨æ€§è¦è¾¾åˆ°99.99%</strong>ã€‚</p><p>ä½ å¯ä»¥å…ˆäº†è§£ä¸€ä¸‹è¿™ä¸ªç‚¹é¤å¹³å°çš„å…·ä½“æ¶æ„ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/f0/de/f0767d06f06e5166687d54b2c4b7a4de.jpg?wh=2283*1370\" alt=\"\"></p><p>è¿™é‡Œå‘¢ï¼Œæˆ‘å…·ä½“è¯´ä¸‹ç³»ç»Ÿä¸»è¦çš„è°ƒç”¨è¿‡ç¨‹ï¼Œä»¥ä¾¿äºä½ æ›´å¥½åœ°ç†è§£å®ƒï¼š</p><ol>\n<li>å°ç¨‹åºå‰ç«¯é€šè¿‡Nginxç½‘å…³ï¼Œè®¿é—®å°ç¨‹åºæœåŠ¡ç«¯ï¼›</li>\n<li>å°ç¨‹åºæœåŠ¡ç«¯ä¼šè°ƒç”¨ä¸€ç³»åˆ—çš„åŸºç¡€æœåŠ¡ï¼Œå®Œæˆç›¸åº”çš„è¯·æ±‚å¤„ç†ï¼ŒåŒ…æ‹¬é—¨åº—æœåŠ¡ã€ä¼šå‘˜æœåŠ¡ã€å•†å“æœåŠ¡ã€è®¢å•æœåŠ¡ã€æ”¯ä»˜æœåŠ¡ç­‰ï¼Œæ¯ä¸ªæœåŠ¡éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„æ•°æ®åº“å’ŒRedisç¼“å­˜ï¼›</li>\n<li>è®¢å•æœåŠ¡æ¥æ”¶åˆ°æ–°è®¢å•åï¼Œå…ˆåœ¨æœ¬åœ°æ•°æ®åº“è½åœ°è®¢å•ï¼Œç„¶åé€šè¿‡MQåŒæ­¥è®¢å•ç»™OMSå±¥å•ä¸­å¿ƒï¼›</li>\n<li>é—¨åº—çš„æ”¶é“¶ç³»ç»Ÿé€šè¿‡HTTPè¿œç¨‹è®¿é—®äº‘ç«¯çš„OMSå±¥å•ä¸­å¿ƒï¼Œæ‹‰å–æ–°è®¢å•ï¼Œå¹¶è¿”å›å–é¤ç ç»™OMSï¼ŒOMSå†è°ƒç”¨å°ç¨‹åºè®¢å•æœåŠ¡åŒæ­¥å–é¤ç ï¼›</li>\n<li>å°ç¨‹åºå‰ç«¯åˆ·æ–°é¡µé¢ï¼Œè®¿é—®æœåŠ¡ç«¯è·å¾—å–é¤ç ï¼Œç„¶åç”¨æˆ·å¯ä»¥æ ¹æ®å–é¤ç åˆ°é—¨åº—å–é¤æˆ–ç­‰å¾…å¤–å–ã€‚</li>\n</ol><!-- [[[read_end]]] --><h2>é«˜å¯ç”¨ç³»ç»Ÿæ”¹é€ æªæ–½</h2><p>æˆ‘åœ¨å‰é¢ä¹Ÿä»‹ç»äº†ï¼Œè¿™æ¬¡æ´»åŠ¨çš„ä¿ƒé”€åŠ›åº¦å¾ˆå¤§ï¼Œé«˜å³°æœŸæµé‡å°†è¾¾åˆ°å¹³æ—¶çš„æ•°åå€ï¼Œè¿™å°±è¦æ±‚ç³»ç»Ÿèƒ½å¤Ÿåœ¨é«˜å¹¶å‘çš„åœºæ™¯ä¸‹ï¼Œä¿è¯é«˜å¯ç”¨æ€§ã€‚</p><p>æ‰€ä»¥ï¼ŒåŸºäºè®¿é—®é‡ã€æ—¥è®¢å•é‡å’Œå¯ç”¨æ€§çš„æŒ‡æ ‡ï¼Œæˆ‘ä»¬å¯¹åŸæœ‰ç³»ç»Ÿè¿›è¡Œäº†ä¸€ç³»åˆ—æ”¹é€ ï¼Œæœ€ç»ˆé¡ºåˆ©åœ°å®ç°äº†é¦–æ—¥500ä¸‡è®¢å•ï¼Œä»¥åŠåœ¨å¤§ä¿ƒæœŸé—´ï¼Œç³»ç»Ÿ4ä¸ª9çš„å¯ç”¨æ€§ç›®æ ‡ã€‚è¿™ä¸ª500ä¸‡çš„è®¢å•é‡ï¼Œä¹Ÿåˆ›é€ äº†ä¸­å›½å•å•†æˆ·çº¿ä¸Šäº¤æ˜“çš„å†å²è®°å½•ã€‚</p><p>åœ¨ä¸‹é¢çš„ç³»ç»Ÿæ¶æ„å›¾ä¸­ï¼Œæˆ‘æ ‡å‡ºäº†å…·ä½“çš„æ”¹é€ ç‚¹ï¼Œä¸»è¦æœ‰10å¤„ï¼Œæ¥ä¸‹æ¥æˆ‘å°±ç»™ä½ åˆ†åˆ«å…·ä½“ä»‹ç»ä¸€ä¸‹ï¼Œä½ å¯ä»¥é€šè¿‡è¿™äº›å…·ä½“çš„æ”¹é€ æªæ–½ï¼Œæ¥çœŸæ­£ç†è§£é«˜å¯ç”¨ç³»ç»Ÿçš„è®¾è®¡æ‰‹æ®µã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/21/4c/218719777ff902f9b26cb88a6187ba4c.jpg?wh=2284*1638\" alt=\"\"></p><h3>å‰ç«¯æ¥å…¥æ”¹é€ </h3><p>è¿™é‡Œçš„å‰ç«¯æœ‰ä¸¤ä¸ªï¼ŒCç«¯çš„å°ç¨‹åºå’ŒBç«¯çš„é—¨åº—æ”¶é“¶ç³»ç»Ÿã€‚å‰ç«¯éƒ¨åˆ†ä¸»è¦æ˜¯å¯¹ä¸‰ä¸ªç‚¹è¿›è¡Œæ”¹é€ ï¼ŒåŒ…æ‹¬å°ç¨‹åºç«¯çš„CDNä¼˜åŒ–ã€Nginxè´Ÿè½½å‡è¡¡ï¼Œä»¥åŠæ”¶é“¶ç«¯çš„é€šä¿¡çº¿è·¯å¤‡ä»½ã€‚</p><ul>\n<li><strong>å°ç¨‹åºç«¯çš„CDNä¼˜åŒ–</strong></li>\n</ul><p>ç”¨æˆ·ç‚¹é¤å‰ï¼Œéœ€è¦å…ˆæµè§ˆå•†å“å’Œèœå•ï¼Œè¿™ä¸ªç”¨æˆ·è¯·æ±‚çš„é¢‘ç‡å¾ˆé«˜ï¼Œæ•°æ®æµé‡å¤§ï¼Œä¼šå¯¹æœåŠ¡ç«¯é€ æˆå¾ˆå¤§çš„å‹åŠ›ã€‚æ‰€ä»¥ï¼Œé’ˆå¯¹è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬é€šè¿‡CDNä¾›åº”å•†ï¼Œåœ¨å…¨å›½å„åœ°æ„å»ºäº†å¤šä¸ªCDNä¸­å¿ƒï¼Œå‚¨å­˜é™æ€çš„å•†å“æ•°æ®ï¼Œç‰¹åˆ«æ˜¯å›¾ç‰‡ï¼Œè¿™æ ·å°ç¨‹åºå‰ç«¯å¯ä»¥å°±è¿‘è®¿é—®CDNï¼Œæµé‡æ— éœ€é€šè¿‡å°ç¨‹åºæœåŠ¡ç«¯ï¼Œç¼“è§£äº†æœåŠ¡ç«¯çš„å‹åŠ›ã€‚</p><ul>\n<li><strong>Nginxè´Ÿè½½å‡è¡¡</strong></li>\n</ul><p>è¿™ä¸ªå°ç¨‹åºç‚¹é¤å¹³å°ï¼Œä¹‹å‰æ˜¯ç›´æ¥åˆ©ç”¨äº‘æœåŠ¡å•†æä¾›çš„LBï¼Œå®ƒåªæœ‰ç®€å•çš„è´Ÿè½½å‡è¡¡èƒ½åŠ›ã€‚ä¸ºäº†èƒ½åº”å¯¹è¿™æ¬¡çš„é«˜å¹¶å‘æµé‡ï¼Œç°åœ¨æˆ‘ä»¬ç‹¬ç«‹æ­å»ºäº†æ•°åå°çš„Nginxé›†ç¾¤ï¼Œé›†ç¾¤é™¤äº†è´Ÿè½½å‡è¡¡ï¼Œè¿˜æä¾›é™æµæ”¯æŒï¼Œå¦‚æœQPSæ€»æ•°è¶…è¿‡äº†10ä¸‡ï¼Œå‰ç«¯çš„è®¿é—®è¯·æ±‚å°†ä¼šè¢«ä¸¢å¼ƒæ‰ã€‚</p><p>å¦å¤–ï¼ŒNginxåœ¨è¿™é‡Œè¿˜æœ‰ä¸€ä¸ªå¥½å¤„ï¼Œå°±æ˜¯å¯ä»¥å®æ—¶æä¾›æ¯ä¸ªæ¥å£çš„è®¿é—®é¢‘ç‡å’Œç½‘ç»œå¸¦å®½å ç”¨æƒ…å†µï¼Œèƒ½å¤Ÿèµ·åˆ°å¾ˆå¥½çš„æ¥å…¥å±‚ç›‘æ§åŠŸèƒ½ã€‚</p><blockquote>\n<p><strong>è¡¥å……è¯´æ˜ï¼š</strong>ä¸€å°Nginxä¸€èˆ¬å¯ä»¥æ”¯æŒæ•°ä¸‡çš„å¹¶å‘ï¼Œæœ¬æ¥è¿™é‡Œæ— éœ€è¿™ä¹ˆå¤šå°Nginxï¼Œè¿™æ˜¯å› ä¸ºäº‘æœåŠ¡å•†å¯¹å•ä¸ªLBçš„æ¥å…¥æœ‰ç½‘ç»œå¸¦å®½çš„é™åˆ¶ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦é€šè¿‡æå‡Nginxçš„æ•°é‡ï¼Œæ¥ä¿è¯æ¥å…¥æœ‰è¶³å¤Ÿçš„å¸¦å®½ã€‚</p>\n</blockquote><ul>\n<li><strong>æ”¶é“¶ç«¯çš„é€šä¿¡çº¿è·¯å¤‡ä»½</strong></li>\n</ul><p>é—¨åº—çš„æ”¶é“¶ç³»ç»Ÿä¼šé€šè¿‡å‰ç½®ä»£ç†æœåŠ¡å™¨ï¼Œæ¥è®¿é—®äº‘ç«¯çš„OMSç³»ç»Ÿï¼Œè¿™ä¸ªä»£ç†æœåŠ¡å™¨éƒ¨ç½²åœ¨å•†æˆ·è‡ªå·±çš„IDCæœºæˆ¿ï¼ŒåŸæ¥åªé€šè¿‡ç”µä¿¡çº¿è·¯å’Œäº‘ç«¯æœºæˆ¿æ‰“é€šã€‚åœ¨è¿™æ¬¡æ”¹é€ ä¸­ï¼Œæˆ‘ä»¬<strong>å¢åŠ äº†ç§»åŠ¨çº¿è·¯</strong>ï¼Œè¿™æ ·å½“ç”µä¿¡ä¸»çº¿è·¯å‡ºé—®é¢˜æ—¶ï¼Œç³»ç»Ÿå°±å¯ä»¥å¿«é€Ÿåœ°åˆ‡æ¢åˆ°ç§»åŠ¨çº¿è·¯ã€‚</p><h3>åº”ç”¨å’ŒæœåŠ¡çš„æ°´å¹³æ‰©å±•</h3><p>é¦–å…ˆï¼Œé’ˆå¯¹å°ç¨‹åºæœåŠ¡ç«¯çš„éƒ¨ç½²ï¼Œæˆ‘ä»¬æŠŠå®ä¾‹æ•°ä»åå‡ å°æå‡åˆ°äº†100å°ï¼Œæ°´å¹³æ‰©å±•å®ƒçš„å¤„ç†èƒ½åŠ›ã€‚åœ¨ä¸Šé¢çš„æ¶æ„å›¾ä¸­ï¼Œä½ å¯ä»¥çœ‹åˆ°ï¼Œå°ç¨‹åºæœåŠ¡ç«¯ä¾èµ–äº†7ä¸ªåŸºç¡€æœåŠ¡ï¼Œæ¯ä¸ªåŸºç¡€æœåŠ¡ä¹Ÿåšäº†ç›¸åº”çš„æ°´å¹³æ‰©å±•ï¼Œç”±äºåº”ç”¨å’ŒåŸºç¡€æœåŠ¡éƒ½æ˜¯æ— çŠ¶æ€çš„ï¼Œå› æ­¤æˆ‘ä»¬å¾ˆå®¹æ˜“æ‰©å……ã€‚</p><p>è¿™é‡Œçš„åŸºç¡€æœåŠ¡æ˜¯Javaå¼€å‘çš„ï¼ŒåŸæ¥æ˜¯ç”¨è™šæ‹Ÿæœºæ–¹å¼éƒ¨ç½²çš„ï¼Œç°åœ¨æˆ‘ä»¬æŠŠåŸºç¡€æœåŠ¡å…¨éƒ¨è¿ç§»åˆ°äº†<strong>å®¹å™¨ç¯å¢ƒ</strong>ï¼Œè¿™æ ·åœ¨æå‡èµ„æºåˆ©ç”¨ç‡çš„åŒæ—¶ï¼Œä¹Ÿæ›´å¥½åœ°æ”¯æŒäº†åŸºç¡€æœåŠ¡çš„å¼¹æ€§æ‰©å®¹ã€‚</p><h3>è®¢å•æ°´å¹³åˆ†åº“</h3><p>åœ¨å¤§ä¿ƒæƒ…å†µä¸‹ï¼Œä¸‹å•é«˜å³°æœŸï¼Œè®¢å•ä¸»åº“çš„<strong>å†™è®¿é—®</strong>é¢‘ç‡å¾ˆé«˜ï¼Œä¸€ä¸ªè®¢å•ä¼šå¯¹åº”6~7æ¬¡çš„å†™æ“ä½œï¼ŒåŒ…æ‹¬äº†åˆ›å»ºæ–°è®¢å•å’Œè®¢å•çŠ¶æ€å˜æ›´ï¼›è®¢å•çš„<strong>è¯»æ“ä½œ</strong>ï¼Œæˆ‘ä»¬ä¹‹å‰é€šè¿‡ä¸€ä¸»å¤šä»éƒ¨ç½²å’Œè¯»å†™åˆ†ç¦»ï¼Œå·²ç»å¾—åˆ°äº†æ”¯æŒã€‚</p><p>ä½†è´Ÿè´£å†™å…¥çš„ä¸»åº“åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œæ‰€ä»¥è¿™æ¬¡æˆ‘ä»¬é€šè¿‡<strong>è®¢å•çš„æ°´å¹³åˆ†åº“</strong>ï¼Œæ‰©å……äº†è®¢å•ä¸»åº“çš„å®ä¾‹æ•°ï¼Œæ”¹é€ åï¼Œæˆ‘ä»¬æœ‰4ä¸ªä¸»åº“æ¥è´Ÿè´£è®¢å•æ•°æ®å†™å…¥ã€‚æ•°æ®åº“çš„é…ç½®ï¼Œä¹Ÿä»åŸæ¥çš„8æ ¸16Gæå‡åˆ°äº†16æ ¸32Gï¼Œè¿™æ ·æˆ‘ä»¬é€šè¿‡ç¡¬ä»¶çš„å‚ç›´æ‰©å±•ï¼Œè¿›ä¸€æ­¥æå‡äº†æ•°æ®åº“çš„å¤„ç†èƒ½åŠ›ã€‚</p><p>è¿™é‡Œçš„è®¢å•æ°´å¹³åˆ†åº“åœ¨å®ç°ä¸Šæ¯”è¾ƒç®€å•ï¼Œæˆ‘ä»¬æ˜¯<strong>é€šè¿‡è®¢å•IDå–æ¨¡è¿›è¡Œåˆ†åº“ï¼ŒåŸºäºè¿›ç¨‹å†…çš„Sharding-JDBCæŠ€æœ¯ï¼Œå®ç°äº†æ•°æ®åº“çš„è‡ªåŠ¨è·¯ç”±</strong>ã€‚åé¢çš„è¯¾ç¨‹ä¸­ï¼Œæˆ‘ä¼šä¸“é—¨ä»‹ç»ç”µå•†å¹³å°çš„è®¢å•æ°´å¹³åˆ†åº“ï¼Œå®ƒä¼šæ›´åŠ å¤æ‚ï¼Œåˆ°æ—¶ä½ å¯ä»¥åšä¸ªæ¯”è¾ƒï¼Œå¦‚æœæœ‰éœ€è¦çš„è¯ï¼Œä¹Ÿå¯ä»¥åœ¨å®é™…é¡¹ç›®å‚è€ƒè½åœ°ã€‚</p><h3>å¼‚æ­¥åŒ–å¤„ç†</h3><p>ä½ å¯ä»¥çœ‹åˆ°ï¼Œåœ¨å‰å°è®¢å•ä¸­å¿ƒå’Œåå°OMSä¹‹é—´ï¼Œæˆ‘ä»¬éœ€è¦åŒæ­¥è®¢å•æ•°æ®ï¼Œæ‰€ä»¥è¿™ä¸¤è€…æ˜¯ç´§å¯†è€¦åˆçš„ã€‚ä¸è¿‡è¿™é‡Œï¼Œæˆ‘ä»¬é€šè¿‡<strong>æ¶ˆæ¯ç³»ç»Ÿ</strong>å¯¹å®ƒä»¬è¿›è¡Œäº†è§£è€¦ã€‚ ä¸€æ–¹é¢ï¼Œå‰å°ä¸‹å•è¦æ±‚æ¯”è¾ƒå¿«ï¼Œåå°OMSçš„è®¢å•å¤„ç†èƒ½åŠ›æ¯”è¾ƒå¼±ï¼ˆOMSåº“æ²¡æœ‰è¿›è¡Œæ°´å¹³åˆ†åº“ï¼‰ï¼Œé€šè¿‡æ¶ˆæ¯çš„å¼‚æ­¥åŒ–å¤„ç†ï¼Œæˆ‘ä»¬å®ç°äº†å¯¹è®¢å•æµé‡çš„å‰Šå³°ï¼›å¦ä¸€æ–¹é¢ï¼Œå¦‚æœOMSæœ‰é—®é¢˜ï¼Œä»¥å¼‚æ­¥çš„æ–¹å¼è¿›è¡Œæ•°æ®åŒæ­¥ï¼Œä¹Ÿä¸ä¼šå½±å“å‰å°ç”¨æˆ·ä¸‹å•ã€‚</p><p>è¿˜æœ‰åœ¨å°ç¨‹åºæœåŠ¡ç«¯ï¼Œåœ¨ç”¨æˆ·æ”¯ä»˜å®Œæˆæˆ–è€…åå°ç”Ÿæˆå–é¤ç åï¼Œæˆ‘ä»¬ä¼šä»¥<strong>å¾®ä¿¡æ¶ˆæ¯</strong>çš„æ–¹å¼é€šçŸ¥ç”¨æˆ·ï¼Œè¿™ä¸ªåœ¨ä»£ç ä¸­ï¼Œä¹Ÿæ˜¯é€šè¿‡å¼‚æ­¥æ–¹å¼å®ç°çš„ï¼Œå¦‚æœå¾®ä¿¡æ¶ˆæ¯å‘é€ä¸æˆåŠŸï¼Œç”¨æˆ·è¿˜æ˜¯å¯ä»¥åœ¨å°ç¨‹åºä¸Šçœ‹åˆ°ç›¸å…³ä¿¡æ¯ï¼Œä¸å½±å“ç”¨æˆ·å–é¤ã€‚</p><h3>ä¸»åŠ¨é€šçŸ¥ï¼Œé¿å…è½®è¯¢</h3><p>åœ¨åŸæ¥çš„æ¶æ„ä¸­ï¼Œå‰å°å°ç¨‹åºæ˜¯é€šè¿‡è½®è¯¢æœåŠ¡ç«¯çš„æ–¹å¼ï¼Œæ¥è·å–å–é¤ç ï¼›åŒæ ·ï¼Œå•†æˆ·çš„æ”¶é“¶ç³»ç»Ÿä¹Ÿæ˜¯é€šè¿‡è½®è¯¢OMSç³»ç»Ÿæ‹‰å–æ–°è®¢å•ï¼Œè¿™æ ·çš„æ”¶é“¶ç³»ç»Ÿæœ‰ä¸Šä¸‡ä¸ªï¼Œæ¯éš”10så°±ä¼šæ‹‰å–ä¸€æ¬¡ã€‚è¿™ç§ç›²ç›®è½®è¯¢çš„æ–¹å¼ï¼Œä¸ä½†æ•ˆç‡ä½ï¼Œè€Œä¸”ä¼šå¯¹æœåŠ¡ç«¯é€ æˆå¾ˆå¤§çš„å‹åŠ›ã€‚</p><p>ç»è¿‡æ”¹é€ åï¼Œæˆ‘ä»¬è½åœ°äº†<strong>æ¶ˆæ¯æ¨é€ä¸­å¿ƒ</strong>ï¼Œæ”¶é“¶ç³»ç»Ÿé€šè¿‡Socketæ–¹å¼ï¼Œå’Œæ¨é€ä¸­å¿ƒä¿æŒé•¿è¿æ¥ã€‚å½“OMSç³»ç»Ÿæ¥æ”¶åˆ°å‰å°çš„æ–°è®¢å•åï¼Œä¼šå‘é€æ¶ˆæ¯åˆ°æ¶ˆæ¯æ¨é€ä¸­å¿ƒï¼›ç„¶åï¼Œæ”¶é“¶ç³»ç»Ÿå°±å¯ä»¥å®æ—¶åœ°è·å–æ–°è®¢å•çš„æ¶ˆæ¯ï¼Œå†è®¿é—®OMSç³»ç»Ÿæ‹‰å–æ–°è®¢å•ã€‚ä¸ºäº†é¿å…å› æ¶ˆæ¯æ¨é€ä¸­å¿ƒå‡ºé—®é¢˜ï¼ˆæ¯”å¦‚æ¶ˆæ¯ä¸­å¿ƒæŒ‚æ‰äº†ï¼‰ï¼Œå¯¼è‡´æ”¶é“¶ç³»ç»Ÿæ‹¿ä¸åˆ°æ–°è®¢å•ï¼Œæ”¶é“¶ç³»ç»Ÿè¿˜ä¿æŒå¯¹OMSç³»ç»Ÿçš„è½®è¯¢ï¼Œä½†é¢‘ç‡é™ä½åˆ°äº†1åˆ†é’Ÿä¸€æ¬¡ã€‚</p><p>åŒç†ï¼Œå°ç¨‹åºå‰ç«¯ä¼šé€šè¿‡Web Socketæ–¹å¼ï¼Œå’Œæ¶ˆæ¯æ¨é€ä¸­å¿ƒä¿æŒé•¿è¿æ¥ã€‚å½“OMSç³»ç»Ÿåœ¨æ¥æ”¶åˆ°æ”¶é“¶ç³»ç»Ÿçš„å–é¤ç åï¼Œä¼šå‘é€æ¶ˆæ¯åˆ°æ¶ˆæ¯æ¨é€ä¸­å¿ƒã€‚è¿™æ ·ï¼Œå°ç¨‹åºå‰ç«¯å¯ä»¥åŠæ—¶åœ°è·å–å–é¤ç ä¿¡æ¯ã€‚</p><h3>ç¼“å­˜çš„ä½¿ç”¨</h3><p>æˆ‘ä»¬çŸ¥é“ï¼Œç¼“å­˜æ˜¯æå‡æ€§èƒ½ååˆ†æœ‰æ•ˆçš„å·¥å…·ã€‚è¿™é‡Œçš„æ”¹é€ ï¼Œå°±æœ‰ä¸¤ä¸ªåœ°æ–¹ä½¿ç”¨äº†ç¼“å­˜ã€‚</p><ul>\n<li>å½“æ”¶é“¶ç³»ç»Ÿå‘OMSæ‹‰å–æ–°è®¢å•æ—¶ï¼ŒOMSä¸æ˜¯åˆ°æ•°æ®åº“é‡ŒæŸ¥è¯¢æ–°è®¢å•ï¼Œè€Œæ˜¯æŠŠæ–°è®¢å•å…ˆä¿å­˜åœ¨Redisé˜Ÿåˆ—é‡Œï¼ŒOMSé€šè¿‡ç›´æ¥æŸ¥è¯¢Redisï¼ŒæŠŠæ–°è®¢å•åˆ—è¡¨è¿”å›ç»™æ”¶é“¶ç³»ç»Ÿã€‚</li>\n<li>åœ¨å•†å“æœåŠ¡ä¸­ï¼Œèœå•å’Œå•†å“æ•°æ®ä¹Ÿæ˜¯æ”¾åœ¨äº†Redisä¸­ï¼Œæ¯å¤©å‡Œæ™¨ï¼Œæˆ‘ä»¬é€šè¿‡å®šæ—¶ä»»åŠ¡ï¼Œæ¨¡ä»¿å‰ç«¯å°ç¨‹åºï¼Œéå†è®¿é—®æ¯ä¸ªå•†å“æ•°æ®ï¼Œå®ç°å¯¹ç¼“å­˜çš„é¢„åˆ·æ–°ï¼Œè¿›ä¸€æ­¥ä¿è¯ç¼“å­˜æ•°æ®çš„ä¸€è‡´æ€§ï¼Œä¹Ÿé¿å…äº†ç¼“å­˜æ•°æ®çš„åŒæ—¶å¤±æ•ˆï¼Œå¯¼è‡´ç¼“å­˜é›ªå´©ã€‚</li>\n</ul><h3>ä¸€ä½“åŒ–ç›‘æ§</h3><p>åœ¨å‰é¢å„ä¸ªèŠ‚ç‚¹å¯ç”¨æ€§ä¼˜åŒ–çš„åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬ä¹Ÿåœ¨ç³»ç»Ÿçš„ç›‘æ§æ–¹é¢åšäº†å¾ˆå¤šå¼ºåŒ–ã€‚é™¤äº†å¸¸è§„çš„Zabbixåšç³»ç»Ÿç›‘æ§ã€CATåšåº”ç”¨ç›‘æ§ã€æ‹‰è®¢å•æ›²çº¿åšä¸šåŠ¡ç›‘æ§ä»¥å¤–ï¼Œæˆ‘ä»¬è¿˜å¯¹ç³»ç»Ÿå®ç°äº†ä¸€ä½“åŒ–çš„ç›‘æ§ã€‚</p><p>åœ¨è¿™é‡Œï¼Œæ‰€æœ‰çš„èŠ‚ç‚¹éƒ½åœ¨ä¸€ä¸ªé¡µé¢é‡Œæ˜¾ç¤ºï¼ŒåŒ…æ‹¬Webåº”ç”¨ã€Redisã€MQå’Œæ•°æ®åº“ï¼Œé¡µé¢ä¹Ÿä¼šä½“ç°èŠ‚ç‚¹ä¹‹é—´çš„ä¸Šä¸‹æ¸¸å…³ç³»ã€‚<strong>æˆ‘ä»¬é€šè¿‡é‡‡é›†èŠ‚ç‚¹çš„çŠ¶æ€æ•°æ®ï¼Œå®æ—¶ç›‘æµ‹æ¯ä¸ªèŠ‚ç‚¹çš„å¥åº·ç¨‹åº¦ï¼Œå¹¶ä¸”ç”¨çº¢é»„ç»¿ä¸‰ç§é¢œè‰²ï¼Œè¡¨ç¤ºæ¯ä¸ªèŠ‚ç‚¹çš„å¥åº·çŠ¶å†µã€‚</strong>è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥éå¸¸ç›´è§‚åœ°è¯†åˆ«å‡ºï¼Œå½“å‰çš„å“ªäº›èŠ‚ç‚¹æœ‰é—®é¢˜ã€‚</p><p>ç›‘æ§çš„æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œåœ¨ä¸‹ä¸€è®²ä¸­ï¼Œæˆ‘å°±ä¼šä¸ºä½ å…·ä½“åœ°ä»‹ç»è¿™ä¸ªç›‘æ§ç³»ç»Ÿã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/ba/b0/ba4c6d94de2121ceef0e7cb579c2d8b0.jpg?wh=1854*864\" alt=\"\"></p><p>åœ¨å®è·µä¸­ï¼Œè¿™å¥—ç›‘æ§ç³»ç»Ÿä¹Ÿç¡®å®å‘æŒ¥äº†å·¨å¤§çš„ä½œç”¨ã€‚å¾ˆå¤šæ—¶å€™ï¼Œåœ¨ç³»ç»Ÿé—®é¢˜è¿˜æ²¡æœ‰å˜å¾—ä¸¥é‡ä¹‹å‰ï¼Œæˆ‘ä»¬å°±èƒ½å¤Ÿè¯†åˆ«å‡ºæ¥ï¼Œå¹¶èƒ½è¿›è¡Œä¸»åŠ¨å¹²é¢„ã€‚</p><p>æ¯”å¦‚è¯´ï¼Œå°ç¨‹åºæœåŠ¡ç«¯çš„éƒ¨åˆ†èŠ‚ç‚¹æœ‰æ—¶å€™ä¼šå‡æ­»ï¼Œè¿™åœ¨Zabbixç›‘æ§é‡Œå¾€å¾€çœ‹ä¸å‡ºæ¥ï¼Œä½†åœ¨æˆ‘ä»¬çš„ç›‘æ§é¡µé¢ä¸­ï¼Œè¿™äº›èŠ‚ç‚¹å°±ä¼šé£˜çº¢ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡é‡å¯èŠ‚ç‚¹æ¥å¿«é€Ÿæ¢å¤ã€‚è¿˜æœ‰å¥½å‡ æ¬¡ï¼Œç³»ç»Ÿæœ‰å¤§é¢ç§¯çš„èŠ‚ç‚¹å‡ºé—®é¢˜äº†ï¼Œæˆ‘ä»¬é€šè¿‡èŠ‚ç‚¹çš„ä¸Šä¸‹æ¸¸å…³ç³»ï¼Œå¾ˆå®¹æ˜“åœ°å®šä½å‡ºäº†çœŸæ­£å‡ºç°é—®é¢˜çš„åœ°æ–¹ï¼Œé¿å…æ‰€æœ‰äººä¸€çªèœ‚åœ°æ‰‘ä¸Šå»æ’æŸ¥é—®é¢˜ã€‚</p><p>é™¤äº†è¿™é‡Œæˆ‘ä»‹ç»çš„ä¼˜åŒ–æªæ–½ä»¥å¤–ï¼Œæˆ‘ä»¬ä¹Ÿä¸ºç³»ç»Ÿå¯èƒ½å‡ºé—®é¢˜çš„åœ°æ–¹åšäº†å„ç§é¢„æ¡ˆã€‚æ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬ä¿ç•™äº†éƒ¨åˆ†è™šæ‹Ÿæœºä¸Šéƒ¨ç½²çš„åŸºç¡€æœåŠ¡å®ä¾‹ï¼Œè¿™æ ·å¦‚æœå®¹å™¨å‡ºç°äº†é—®é¢˜ï¼ŒåŸºç¡€æœåŠ¡å¯ä»¥å¿«é€Ÿåˆ‡å›åˆ°è™šæ‹Ÿæœºä¸Šçš„å®ä¾‹ã€‚</p><h2>ç³»ç»Ÿæ”¹é€ å°ç»“</h2><p>åˆ°è¿™é‡Œä¸ºæ­¢ï¼Œç³»ç»Ÿä¸»è¦çš„ä¼˜åŒ–æªæ–½å°±ä»‹ç»å®Œäº†ï¼Œ<strong>ä½†æˆ‘ä»¬æ˜¯å¦‚ä½•çŸ¥é“è¦é…ç½®å¤šå°‘ä¸ªèŠ‚ç‚¹ï¼Œæœ‰æ²¡æœ‰è¾¾åˆ°é¢„å®šçš„æ•ˆæœå‘¢ï¼Ÿ</strong></p><p>å¯¹äºè¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬çš„åšæ³•æ˜¯ï¼Œ<strong>æŒ‰ç…§10ä¸‡QPSå’Œ99.99%çš„å¯ç”¨æŒ‡æ ‡è¦æ±‚ï¼Œé€šè¿‡å¤§é‡çš„å‹æµ‹æ¥ç¡®å®šçš„ã€‚</strong></p><ul>\n<li>é¦–å…ˆï¼Œæˆ‘ä»¬å¯¹æ¯ä¸ªèŠ‚ç‚¹è¿›è¡Œæ¥å£å‹æµ‹ï¼Œåšå„ç§æ€§èƒ½ä¼˜åŒ–ï¼Œç¡®å®šå¥½éœ€è¦çš„æœºå™¨æ•°é‡ï¼›</li>\n<li>ç„¶åï¼Œæˆ‘ä»¬åˆ©ç”¨JMeterï¼Œæ¨¡æ‹Ÿå°ç¨‹åºå‰ç«¯å‘èµ·æ··åˆåœºæ™¯çš„è°ƒç”¨ï¼Œä»¥æ­¤æ£€éªŒç³»ç»Ÿçš„æŠ—å‹èƒ½åŠ›ï¼Œä»¥åŠåœ¨å‹åŠ›ä¸‹ï¼Œç³»ç»Ÿçš„å¯ç”¨æ€§æ˜¯å¦è¾¾åˆ°äº†é¢„å®šçš„è¦æ±‚ï¼›</li>\n<li>æœ€åï¼Œæˆ‘ä»¬åœ¨ç”Ÿäº§ç¯å¢ƒä¸­æ ¹æ®å‹æµ‹ç¯å¢ƒï¼ŒæŒ‰ç…§æœåŠ¡å™¨1:1çš„æ•°é‡è¿›è¡Œéƒ¨ç½²ï¼Œä¿è¯æ€§èƒ½ä¸æ‰“æŠ˜ï¼Œæœ€ç»ˆè¿™ä¸ªå°ç¨‹åºä¸‹å•å¹³å°æ€»çš„æœºå™¨è§„æ¨¡ï¼Œä¹Ÿè¾¾åˆ°äº†æ•°ç™¾å°çš„é‡çº§ã€‚</li>\n</ul><p>è¿™é‡Œï¼Œæˆ‘æƒ³ç»“åˆç€ä¸Šä¸€è®²å’Œä½ ä»‹ç»çš„æ¶æ„åŸåˆ™ï¼Œæ¥è®©ä½ æ›´æ·±åˆ»åœ°ç†è§£è¿™æ¬¡ç³»ç»Ÿå¯ç”¨æ€§çš„æ”¹é€ è¿‡ç¨‹ã€‚</p><p>ä»æ­£é¢ä¿éšœçš„è§’åº¦æ¥çœ‹ï¼Œæˆ‘ä»¬é¦–å…ˆåœ¨å„ä¸ªç¯èŠ‚éƒ½<strong>é¿å…äº†å•ç‚¹</strong>ï¼ŒåŒ…æ‹¬è¿œç¨‹é€šä¿¡çº¿è·¯ï¼Œè¿™æ ·èƒ½ä¿è¯ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹å‡ºäº†é—®é¢˜ï¼Œéƒ½æœ‰å…¶ä»–å®ä¾‹å¯ä»¥é¡¶ä¸Šå»ï¼›å…¶æ¬¡ï¼Œæˆ‘ä»¬é€šè¿‡èŠ‚ç‚¹çš„<strong>å‚ç›´æ‰©å±•å’Œæ°´å¹³æ‰©å±•</strong>ï¼Œå¤§å¹…åº¦æå‡äº†ç³»ç»Ÿçš„å¤„ç†èƒ½åŠ›ï¼ŒåŒ…æ‹¬åº”ç”¨ã€æœåŠ¡å’Œæ•°æ®åº“çš„æ‰©å±•ï¼›æˆ‘ä»¬ä¹Ÿæœ‰æ•ˆåœ°åˆ©ç”¨äº†<strong>Redisç¼“å­˜</strong>ï¼Œå¯¹é«˜é¢‘çš„è®¢å•å’Œèœå•æ•°æ®çš„è¯»å–è¿›è¡Œäº†ä¼˜åŒ–ã€‚</p><p>åœ¨<strong>æŸ”æ€§å¤„ç†</strong>æ–¹é¢ï¼Œæˆ‘ä»¬é€šè¿‡å¼‚æ­¥å¤„ç†ï¼Œæ¥ä¼˜åŒ–ç³»ç»Ÿçš„æ€§èƒ½å’Œé¿å…å¤§æµé‡çš„ç›´æ¥å†²å‡»ï¼ŒåŒ…æ‹¬ä½¿ç”¨æ¶ˆæ¯ç³»ç»Ÿè§£è€¦å‰å°ä¸‹å•ç³»ç»Ÿå’Œåå°OMSç³»ç»Ÿï¼Œä»¥åŠé€šè¿‡åŠæ—¶çš„æ¶ˆæ¯æ¨é€ï¼Œé¿å…å‰ç«¯ç›²ç›®è½®è¯¢æœåŠ¡ç«¯ã€‚</p><p>åŒæ—¶ï¼Œæˆ‘ä»¬åœ¨<strong>ç³»ç»Ÿæ¥å…¥å±‚</strong>ï¼Œé€šè¿‡Nginxè¿›è¡Œé™æµï¼Œä¸ºç³»ç»Ÿçš„å¯ç”¨æ€§è¿›è¡Œå…œåº•ï¼Œè¿™æ ·åœ¨æµé‡è¶…è¿‡é¢„ä¼°æ—¶ï¼Œèƒ½å¤Ÿæœ‰æ•ˆåœ°é¿å…åç«¯ç³»ç»Ÿè¢«å†²å®ã€‚</p><p>æœ€åï¼Œæˆ‘ä»¬é€šè¿‡<strong>å¼ºæœ‰åŠ›çš„ç›‘æ§æ‰‹æ®µ</strong>ï¼Œå¯ä»¥å®æ—¶å…¨é¢åœ°äº†è§£ç³»ç»Ÿè¿è¡ŒçŠ¶å†µï¼Œéšæ—¶ä¸ºå¼‚å¸¸æƒ…å†µåšå¥½å‡†å¤‡ã€‚</p><h2>æ€»ç»“</h2><p>ä»Šå¤©ï¼Œæˆ‘ä¸ä½ åˆ†äº«äº†ä¸€ä¸ªå®é™…çš„O2Oç‚¹é¤å¹³å°ï¼Œåœ¨é¢å¯¹é«˜å¹¶å‘æµé‡æ—¶ï¼Œæˆ‘ä»¬æ˜¯å¦‚ä½•å¯¹ç³»ç»Ÿè¿›è¡Œå‡çº§æ”¹é€ ï¼Œä¿è¯ç³»ç»Ÿçš„é«˜å¯ç”¨çš„ã€‚ç›¸ä¿¡ä½ åœ¨ä¸Šä¸€è®²ç†è®ºçš„åŸºç¡€ä¸Šï¼Œé€šè¿‡è¿›ä¸€æ­¥ç»“åˆå®é™…çš„åœºæ™¯ï¼Œèƒ½å¤Ÿæ·±å…¥åœ°ç†è§£å¦‚ä½•è¿ç”¨å„ç§é«˜å¯ç”¨çš„æ‰‹æ®µäº†ã€‚</p><p>é«˜å¯ç”¨çš„å¤„ç†æ–¹å¼æœ‰å¾ˆå¤šï¼Œæˆ‘è¿™é‡Œç»™ä½ ä»‹ç»çš„ä¹Ÿåªæ˜¯ä¸€éƒ¨åˆ†ï¼Œå¸Œæœ›ä½ èƒ½å¤Ÿåœ¨å®è·µä¸­ï¼Œç»“åˆå…·ä½“çš„ä¸šåŠ¡åœºæ™¯ï¼Œçµæ´»åœ°è½åœ°é«˜å¯ç”¨çš„è®¾è®¡ã€‚</p><p>ä¸è¿‡ï¼Œæ— è®ºæˆ‘ä»¬é‡‡å–å¤šä¹ˆå‘¨å¯†çš„æªæ–½ï¼Œæ€»ä¼šæœ‰äº›åœ°æ–¹æˆ‘ä»¬æ²¡æœ‰è€ƒè™‘åˆ°ï¼Œç³»ç»Ÿå¯èƒ½ä¼šå‡ºç°å„ç§å„æ ·çš„é—®é¢˜ï¼Œè¿™ä¸ªæ—¶å€™å¯¹ç³»ç»Ÿè¿›è¡Œå…¨é¢çš„ç›‘æ§å°±éå¸¸é‡è¦äº†ã€‚ä¸‹ä¸€è®²æˆ‘ä¼šå°±å¦‚ä½•åšå¥½ç³»ç»Ÿçš„ç›‘æ§ï¼Œå’Œä½ åšè¯¦ç»†çš„ä»‹ç»ã€‚</p><p><strong>æœ€åï¼Œç»™ä½ ç•™ä¸€é“æ€è€ƒé¢˜ï¼š</strong>ä½ å½“å‰çš„ç³»ç»Ÿæœ‰å•ç‚¹å—ï¼Ÿè¿™ä¸ªå•ç‚¹æœ‰æ²¡æœ‰å‡ºè¿‡é—®é¢˜å‘¢ï¼Ÿ</p><p>æ¬¢è¿ä½ åœ¨ç•™è¨€åŒºä¸å¤§å®¶åˆ†äº«ä½ çš„é—®é¢˜å’Œæ€è€ƒï¼Œæˆ‘ä»¬ä¸€èµ·è®¨è®ºã€‚å¦‚æœè¿™èŠ‚è¯¾å¯¹ä½ æœ‰å¸®åŠ©ï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠå®ƒåˆ†äº«ç»™ä½ çš„æœ‹å‹ã€‚æ„Ÿè°¢é˜…è¯»ï¼Œæˆ‘ä»¬ä¸‹æœŸå†è§ã€‚</p>","comments":[{"had_liked":false,"id":191010,"user_name":"J.Smile","can_delete":false,"product_type":"c1","uid":1336475,"ip_address":"","ucode":"C4D98DFDBF7584","user_header":"https://static001.geekbang.org/account/avatar/00/14/64/9b/0b578b08.jpg","comment_is_top":false,"comment_ctime":1584717363,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"108958899763","product_id":100046301,"comment_content":"è¿™è®²æœ€å¤§çš„ä»·å€¼å°±æ˜¯è®©æ™®é€šå…¬å¸çš„å·¥ç¨‹å¸ˆè§è¯†åˆ°äº†å¤§æµé‡çš„åº”å¯¹æ¶æ„è®¾è®¡ï¼Œæœ‰äº†ä¸€ä¸ªæ€»ä½“çš„è½®å»“å’Œæ–¹å‘ã€‚","like_count":26},{"had_liked":false,"id":191748,"user_name":"zeor","can_delete":false,"product_type":"c1","uid":1888276,"ip_address":"","ucode":"20DA6DB3527D21","user_header":"https://static001.geekbang.org/account/avatar/00/1c/d0/14/50782491.jpg","comment_is_top":false,"comment_ctime":1584794215,"is_pvip":false,"replies":[{"id":"73472","content":"åŠæ³•å¾ˆå¤šï¼Œè¿™é‡Œä¸¾ä¸¤ä¸ªä¾‹å­ï¼š<br>æ‚²è§‚é”ï¼Œ<br>    select for update  æå‰é”å®šåº“å­˜<br>ä¹è§‚é” <br>     åº“å­˜è®°å½•æœ‰ä¸ªå­—æ®µæ ‡è¯†å®ƒçš„ç‰ˆæœ¬ï¼Œè¯»åº“å­˜çš„æ—¶å€™ï¼Œè·å–ç‰ˆæœ¬ä¿¡æ¯ï¼Œæ¯”å¦‚1ã€‚åé¢æ›´æ–°çš„æ—¶å€™ï¼Œæ£€æŸ¥è®°å½•çš„ç‰ˆæœ¬æ˜¯ä¸æ˜¯è¿˜æ˜¯1ï¼Œå¦‚æœä¸æ˜¯ï¼Œåˆ™å†™å¤±è´¥ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™å†™æˆåŠŸï¼ŒåŒæ—¶æ›´æ–°ç‰ˆæœ¬ä¸º2ã€‚","user_name":"ä½œè€…å›å¤","comment_id":191748,"uid":"1268522","ip_address":"","utype":1,"ctime":1584802640,"user_name_real":"ç‹åº†å‹"}],"discussion_count":3,"race_medal":0,"score":"27354597991","product_id":100046301,"comment_content":"è€å¸ˆæ‚¨å¥½ è¯·é—®ä¸‹å•æ—¶æ€ä¹ˆä¿è¯è¶…å– è¯·æŒ‡æ•™å…·ä½“æ–¹æ¡ˆå’Œå®ç°","like_count":7,"discussions":[{"author":{"id":1268522,"avatar":"https://static001.geekbang.org/account/avatar/00/13/5b/2a/83c3cb2d.jpg","nickname":"ç‹åº†å‹","note":"","ucode":"90D8743C4A6C79","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488247,"discussion_content":"åŠæ³•å¾ˆå¤šï¼Œè¿™é‡Œä¸¾ä¸¤ä¸ªä¾‹å­ï¼š\næ‚²è§‚é”ï¼Œ\n    select for update  æå‰é”å®šåº“å­˜\nä¹è§‚é” \n     åº“å­˜è®°å½•æœ‰ä¸ªå­—æ®µæ ‡è¯†å®ƒçš„ç‰ˆæœ¬ï¼Œè¯»åº“å­˜çš„æ—¶å€™ï¼Œè·å–ç‰ˆæœ¬ä¿¡æ¯ï¼Œæ¯”å¦‚1ã€‚åé¢æ›´æ–°çš„æ—¶å€™ï¼Œæ£€æŸ¥è®°å½•çš„ç‰ˆæœ¬æ˜¯ä¸æ˜¯è¿˜æ˜¯1ï¼Œå¦‚æœä¸æ˜¯ï¼Œåˆ™å†™å¤±è´¥ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™å†™æˆåŠŸï¼ŒåŒæ—¶æ›´æ–°ç‰ˆæœ¬ä¸º2ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584802640,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1888276,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/d0/14/50782491.jpg","nickname":"zeor","note":"","ucode":"20DA6DB3527D21","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":212184,"discussion_content":"è°¢è°¢è€å¸ˆçš„å›ç­”ï¼Œæˆ‘çš„æ„æ€æ˜¯è¯´ï¼Œåœ¨æ•°æ®åº“åŠ é”ï¼Œåœ¨å¹¶å‘é‡å¾ˆå¤§çš„æƒ…å†µä¸‹ï¼Œ1.è¿™æ ·åŠ é”ä¼šä¸ä¼šå‡ºç°æ•°æ®åº“çš„ç“¶é¢ˆï¼Œ2.å¦‚æœåˆ†å¼€å¤šä¸ªåº“æ˜¯å¦å¯è¡Œï¼Œæ€ä¹ˆä¿è¯åˆ†å¼€å¤šä¸ªåº“æ•°æ®çš„ä¸€è‡³æ€§å’Œæ•°æ®çš„å®æ—¶æ€§ï¼ˆæ¯”å¦‚ä¸¤ä¸ªå†™åº“ï¼‰ï¼Œ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1584944011,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1195557,"avatar":"https://static001.geekbang.org/account/avatar/00/12/3e/25/dbf3e7ec.jpg","nickname":"éƒ­ä¹‰","note":"","ucode":"994B529DAC41A7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":584287,"discussion_content":"å¯ä»¥æŠŠåº“å­˜æ•°æ®æ”¾åœ¨redisä¸­ï¼Œä¿ƒé”€æœŸé—´ä¸æ“ä½œæ•°æ®åº“ï¼Œç›´æ¥æ“ä½œredis","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660723239,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":190901,"user_name":"æ­£åœ¨å‡è‚¥çš„èƒ–ç±½ã€‚","can_delete":false,"product_type":"c1","uid":1033728,"ip_address":"","ucode":"99E2E4DF599236","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c6/00/683bb4f0.jpg","comment_is_top":false,"comment_ctime":1584707449,"is_pvip":false,"replies":[{"id":"73397","content":"ä¸€ç§æ˜¯æŠŠredisä½œä¸ºå‰ç½®æ•°æ®åº“ï¼Œå¦‚æœä¸‹å•æ—¶ï¼Œç¼“å­˜å†™å…¥å¤±è´¥ï¼Œç­‰äºä¸šåŠ¡å¤±è´¥ã€‚å½“ç¼“å­˜å†™å…¥åï¼Œå¦‚æœç¼“å­˜å´©æºƒï¼Œè¿™ä¸ªé—®é¢˜ä¸å¤§ï¼Œå¯ä»¥é€šè¿‡æŒä¹…åŒ–ç¼“å­˜æ•°æ®ï¼Œé‡å¯åæ¢å¤ã€‚<br><br>å¦‚æœåªæ˜¯æŠŠrediså½“åšç¼“å­˜æ¥ç”¨ï¼Œæˆ‘æ¯”è¾ƒæ¨èå†™dbçš„æ—¶å€™ç«‹å³æ›´æ–°ç¼“å­˜æˆ–åˆ é™¤ç¼“å­˜ï¼Œä¿è¯ç¼“å­˜å’Œdbæ•°æ®çš„ä¸€è‡´æ€§ã€‚","user_name":"ä½œè€…å›å¤","comment_id":190901,"uid":"1268522","ip_address":"","utype":1,"ctime":1584786330,"user_name_real":"ç‹åº†å‹"}],"discussion_count":5,"race_medal":0,"score":"23059543929","product_id":100046301,"comment_content":"ä¸‹å•åï¼Œè®¢å•æ”¾åˆ°redisä¸­ï¼Œå¦‚æœredisæ•°æ®å†™å…¥å¤±è´¥ï¼Ÿæœ‰åšè¡¥å¿å—?éœ€è¦è¯·æ•™è€å¸ˆä½ ä»¬rediså’Œæ•°æ®åº“ä¹‹é—´çš„æ•°æ®æ€ä¹ˆä¿è¯ä¸€è‡´æ€§ï¼Ÿå¦‚æœä¸ä¿æŒä¸€è‡´æ€§é‚£å…¶ä»–ç³»ç»Ÿæ˜¯å¦å°±æ‹‰å–ä¸åˆ°è®¢å•ï¼Ÿ","like_count":5,"discussions":[{"author":{"id":1268522,"avatar":"https://static001.geekbang.org/account/avatar/00/13/5b/2a/83c3cb2d.jpg","nickname":"ç‹åº†å‹","note":"","ucode":"90D8743C4A6C79","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488075,"discussion_content":"ä¸€ç§æ˜¯æŠŠredisä½œä¸ºå‰ç½®æ•°æ®åº“ï¼Œå¦‚æœä¸‹å•æ—¶ï¼Œç¼“å­˜å†™å…¥å¤±è´¥ï¼Œç­‰äºä¸šåŠ¡å¤±è´¥ã€‚å½“ç¼“å­˜å†™å…¥åï¼Œå¦‚æœç¼“å­˜å´©æºƒï¼Œè¿™ä¸ªé—®é¢˜ä¸å¤§ï¼Œå¯ä»¥é€šè¿‡æŒä¹…åŒ–ç¼“å­˜æ•°æ®ï¼Œé‡å¯åæ¢å¤ã€‚\n\nå¦‚æœåªæ˜¯æŠŠrediså½“åšç¼“å­˜æ¥ç”¨ï¼Œæˆ‘æ¯”è¾ƒæ¨èå†™dbçš„æ—¶å€™ç«‹å³æ›´æ–°ç¼“å­˜æˆ–åˆ é™¤ç¼“å­˜ï¼Œä¿è¯ç¼“å­˜å’Œdbæ•°æ®çš„ä¸€è‡´æ€§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584786330,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1033728,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c6/00/683bb4f0.jpg","nickname":"æ­£åœ¨å‡è‚¥çš„èƒ–ç±½ã€‚","note":"","ucode":"99E2E4DF599236","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":210878,"discussion_content":"å¤šè°¢è€å¸ˆå›å¤ï¼Œæ–‡ç« ä¸­çš„ä½ ä»¬æ˜¯å†™å…¥åˆ°ç¼“å­˜ä¸­å°±ç®—æˆåŠŸï¼Ÿå¦‚æœæ˜¯é‚£ä»€ä¹ˆæ—¶å€™è½åœ°åˆ°DBä¸­ï¼Ÿæç«¯æƒ…å†µä¸‹ï¼Œå¦‚æœç¼“å­˜å´©æºƒæœ‰1ç§’é’Ÿçš„æ—¶é—´æ²¡æœ‰æŒä¹…åŒ–ï¼Ÿé‚£è¿™ç§ä¸šåŠ¡æ€ä¹ˆå¤„ç†ï¼Ÿæ˜¯äººå·¥å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584786877,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1212902,"avatar":"https://static001.geekbang.org/account/avatar/00/12/81/e6/6cafed37.jpg","nickname":"æ—…é€”","note":"","ucode":"5022477E8E9441","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1033728,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c6/00/683bb4f0.jpg","nickname":"æ­£åœ¨å‡è‚¥çš„èƒ–ç±½ã€‚","note":"","ucode":"99E2E4DF599236","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":273710,"discussion_content":"redisåº”è¯¥æ˜¯åšäº†é«˜å¯ç”¨çš„,å¹¶ä¸”å¯èƒ½æ˜¯å…ˆå†™å®Œdbç„¶åæ›´æ–°ç¼“å­˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590491548,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":210878,"ip_address":""},"score":273710,"extra":""},{"author":{"id":1254392,"avatar":"https://static001.geekbang.org/account/avatar/00/13/23/f8/24fcccea.jpg","nickname":"ğŸ’¢ æ˜Ÿæ˜ŸğŸ’¢","note":"","ucode":"A402B765222C35","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1212902,"avatar":"https://static001.geekbang.org/account/avatar/00/12/81/e6/6cafed37.jpg","nickname":"æ—…é€”","note":"","ucode":"5022477E8E9441","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":275464,"discussion_content":"å¦‚æœæœ‰å¤šä¸ªå¹¶å‘å†™æ“ä½œï¼Œç¼“å­˜ä¸æ˜¯è¿˜æ˜¯ä¼šå‡ºç°ä¸ä¸€è‡´çš„æƒ…å†µä¹ˆï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590718042,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":273710,"ip_address":""},"score":275464,"extra":""},{"author":{"id":1212902,"avatar":"https://static001.geekbang.org/account/avatar/00/12/81/e6/6cafed37.jpg","nickname":"æ—…é€”","note":"","ucode":"5022477E8E9441","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1254392,"avatar":"https://static001.geekbang.org/account/avatar/00/13/23/f8/24fcccea.jpg","nickname":"ğŸ’¢ æ˜Ÿæ˜ŸğŸ’¢","note":"","ucode":"A402B765222C35","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":275610,"discussion_content":"æˆ‘æ›´æ–°å®Œdbåä¸»åŠ¨æ›´æ–°ç¼“å­˜ï¼Œå‰ç«¯è¯·æ±‚æŸ¥è¯¢æ•°æ®åº“åä¸åŠ è½½ç¼“å­˜ï¼Œä¸æ˜¯æ—è·¯ç¼“å­˜çš„æ€è·¯ï¼Œå› ä¸ºè¿™ä¸ªç›®çš„æ˜¯ç¼“å­˜æœ€è¿‘çš„è®¢å•ï¼Œä¸æ˜¯æ—è·¯ç¼“å­˜åº”ç”¨çš„åœºæ™¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590739890,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":275464,"ip_address":""},"score":275610,"extra":""}]}]},{"had_liked":false,"id":190499,"user_name":"å¤œç©ºä¸­æœ€äº®çš„æ˜Ÿ","can_delete":false,"product_type":"c1","uid":1267566,"ip_address":"","ucode":"ADC3E7B6789955","user_header":"https://static001.geekbang.org/account/avatar/00/13/57/6e/b6795c44.jpg","comment_is_top":false,"comment_ctime":1584665052,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"23059501532","product_id":100046301,"comment_content":"è¿™é‡Œè®²ï¼Œå¾ˆæ£’ï¼Œéƒ½æ˜¯ç¡¬æ ¸","like_count":5},{"had_liked":false,"id":191780,"user_name":"lyshrine","can_delete":false,"product_type":"c1","uid":1058278,"ip_address":"","ucode":"497551F047A5C6","user_header":"https://static001.geekbang.org/account/avatar/00/10/25/e6/a69cff76.jpg","comment_is_top":false,"comment_ctime":1584796376,"is_pvip":false,"replies":[{"id":"73471","content":"Central Application Trackingï¼Œä¸€ä¸ªå¼€æºçš„åº”ç”¨ç›‘æ§ç»„ä»¶ï¼Œå›½å†…ç”¨çš„æ¯”è¾ƒå¹¿æ³›ã€‚","user_name":"ä½œè€…å›å¤","comment_id":191780,"uid":"1268522","ip_address":"","utype":1,"ctime":1584802417,"user_name_real":"ç‹åº†å‹"}],"discussion_count":1,"race_medal":0,"score":"18764665560","product_id":100046301,"comment_content":"è¯·é—®è€å¸ˆï¼ŒCATçš„å…¨ç¨‹æ˜¯ä»€ä¹ˆï¼Ÿ","like_count":4,"discussions":[{"author":{"id":1268522,"avatar":"https://static001.geekbang.org/account/avatar/00/13/5b/2a/83c3cb2d.jpg","nickname":"ç‹åº†å‹","note":"","ucode":"90D8743C4A6C79","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488255,"discussion_content":"Central Application Trackingï¼Œä¸€ä¸ªå¼€æºçš„åº”ç”¨ç›‘æ§ç»„ä»¶ï¼Œå›½å†…ç”¨çš„æ¯”è¾ƒå¹¿æ³›ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584802417,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":190556,"user_name":"æ¯å¤©æ™’ç™½ç‰™","can_delete":false,"product_type":"c1","uid":1004698,"ip_address":"","ucode":"A1B102CD933DEA","user_header":"https://static001.geekbang.org/account/avatar/00/0f/54/9a/76c0af70.jpg","comment_is_top":false,"comment_ctime":1584668550,"is_pvip":false,"replies":[{"id":"73398","content":"ç›‘æ§æ•°æ®ä¸€èˆ¬æœ‰æ”¶é›†ï¼Œåˆ†æå’Œå‘Šè­¦çš„è¿‡ç¨‹ï¼Œä½ è¿™é‡Œç¼ºä¹åç«¯çš„ç›‘æ§æ•°æ®çš„åˆ†æç³»ç»Ÿï¼Œéœ€è¦ç»“åˆå„ç§è§„åˆ™åšç»¼åˆåˆ¤æ–­åæ‰å‘Šè­¦ã€‚","user_name":"ä½œè€…å›å¤","comment_id":190556,"uid":"1268522","ip_address":"","utype":1,"ctime":1584786482,"user_name_real":"ç‹åº†å‹"}],"discussion_count":2,"race_medal":0,"score":"18764537734","product_id":100046301,"comment_content":"å¾ˆæœŸå¾…è€å¸ˆè¯´çš„ç›‘æ§æå‰é¢„è­¦çš„æ–¹æ¡ˆ<br>è€å¸ˆæˆ‘è¯·æ•™ä¸ªå’Œç›‘æ§æŠ¥è­¦ç›¸å…³çš„é—®é¢˜ï¼Œå°±æ˜¯æˆ‘ä»¬è‡ªå·±é€šè¿‡ prometheus+grafana æ­å»ºäº†ä¸€å¥—ç®€å•çš„ä¸šåŠ¡ç›‘æ§æŠ¥è­¦ï¼Œä¸»è¦é€šè¿‡åœ¨ä»£ç ä¸­åŸ‹ç‚¹ï¼Œç°åœ¨æŠ¥è­¦çŸ­ä¿¡æœ‰ç‚¹å¤šï¼Œä½†é‡Œé¢æœ‰äº›æŠ¥è­¦ä¹Ÿå¹¶ä¸æ˜¯å¾ˆä¸¥é‡ï¼Œæ‰€ä»¥å°±å¿½ç•¥äº†ï¼Œä½†æœ‰æ—¶åˆä¼šé”™è¿‡ä¸¥é‡çš„æŠ¥è­¦çŸ­ä¿¡ï¼Œä»è€Œå½±å“çº¿ä¸Šé—®é¢˜ï¼Œæ‰€ä»¥åé¢æŠŠæŠ¥è­¦çš„é˜ˆå€¼æé«˜äº†ï¼Œä½†æ„Ÿè§‰è¿™æ ·åˆæœ‰é£é™©ã€‚<br>æƒ³å¬å¬è€å¸ˆå¯¹ç›‘æ§æŠ¥è­¦è¿™çš„æœ€ä½³å®æˆ˜ï¼Œæ¯”å¦‚æ€ä¹ˆå®ç°ç›‘æ§æŠ¥è­¦çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼Ÿæ€ä¹ˆé€šè¿‡ç¨‹åºåŒ–çš„æ–¹å¼æ¥åˆ†ææŠ¥è­¦ï¼Œå‡å°‘äººåŠ›æ¶ˆè€—ç­‰","like_count":4,"discussions":[{"author":{"id":1268522,"avatar":"https://static001.geekbang.org/account/avatar/00/13/5b/2a/83c3cb2d.jpg","nickname":"ç‹åº†å‹","note":"","ucode":"90D8743C4A6C79","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488003,"discussion_content":"ç›‘æ§æ•°æ®ä¸€èˆ¬æœ‰æ”¶é›†ï¼Œåˆ†æå’Œå‘Šè­¦çš„è¿‡ç¨‹ï¼Œä½ è¿™é‡Œç¼ºä¹åç«¯çš„ç›‘æ§æ•°æ®çš„åˆ†æç³»ç»Ÿï¼Œéœ€è¦ç»“åˆå„ç§è§„åˆ™åšç»¼åˆåˆ¤æ–­åæ‰å‘Šè­¦ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584786482,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1007924,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/61/34/368ef8ad.jpg","nickname":"Hero","note":"","ucode":"1CC29BC1038DBE","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":287894,"discussion_content":"æŠ¥è­¦åšåˆ†çº§å¤„ç†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593582120,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":221402,"user_name":"æ—…é€”","can_delete":false,"product_type":"c1","uid":1212902,"ip_address":"","ucode":"5022477E8E9441","user_header":"https://static001.geekbang.org/account/avatar/00/12/81/e6/6cafed37.jpg","comment_is_top":false,"comment_ctime":1590492450,"is_pvip":false,"replies":[{"id":"81865","content":"1. æˆ‘ä»¬ç”¨çš„æ˜¯äº‘ä¸»æœºï¼Œä¾›åº”å•†æä¾›äº†K8s+dockerç¯å¢ƒï¼Œæˆ‘ä»¬æŠŠæœåŠ¡éƒ¨ç½²åœ¨è¿™ä¸ªç¯èŠ‚å°±å¯ä»¥ï¼Œæ€»ä½“ä¸Šèµ„æºåˆ©ç”¨ç‡ä¼šæ›´é«˜ã€‚<br>2. oms ä¹Ÿéƒ¨ç½²äº†æ›´å¤šæœºå™¨<br>3. lvséƒ¨ç½²å’Œè¿ç»´èµ·æ¥æ¯”è¾ƒå¤æ‚ï¼Œåˆ«åŸ‹æŠ€æœ¯å‘ï¼Œnginxæ¯”è¾ƒå®¹æ˜“ä¸Šæ‰‹ï¼Œæ•ˆæœä¹Ÿä¸é”™ã€‚","user_name":"ä½œè€…å›å¤","comment_id":221402,"uid":"1268522","ip_address":"","utype":1,"ctime":1590677564,"user_name_real":"ç‹åº†å‹"}],"discussion_count":1,"race_medal":0,"score":"14475394338","product_id":100046301,"comment_content":"æ„Ÿè°¢è€å¸ˆçš„åˆ†äº«ï¼å¾ˆå°‘è§åˆ°è¿™ä¸ªé‡çº§webå…¨é“¾è·¯æ”¹é€ çš„åˆ†æ,æ”¶è·å¾ˆå¤§ï¼Œä½†æ˜¯è¿˜æ˜¯æœ‰å‡ ä¸ªé—®é¢˜ä¸å¤ªæ˜ç™½<br>1.å°†åº”ç”¨æœåŠ¡æ”¾å…¥dockerä¸­,éƒ¨ç½²çš„è®¾å¤‡æœ‰æ²¡æœ‰æ°´å¹³æ‰©å±•æˆ–è€…æ‰©å®¹?è¿˜æ˜¯åªæ˜¯ç”¨çš„åŸæ¥çš„è®¾å¤‡ä¸è¿‡æ˜¯dockeréƒ¨ç½²äº†æ›´å¤šä»½?<br>2.omséœ€è¦æ¶ˆè´¹çš„æ¶ˆæ¯ä¼šå˜å¤š,omsä¹Ÿæ‰©å®¹äº†å§?<br>3.æœºå™¨è§„æ¨¡å·²ç»è¾¾åˆ°äº†æ•°ç™¾å°é‡çº§,å‰ç«¯çš„è¯·æ±‚åˆ†å‘,ä¸ºä»€ä¹ˆæ²¡æœ‰å…ˆä½¿ç”¨lvsè¿›è¡Œå››å±‚ä»¥ä¸‹çš„åˆ†å‘,æ˜¯å› ä¸ºqpsè¿˜ä¸å¤Ÿå¤§å—?<br>","like_count":3,"discussions":[{"author":{"id":1268522,"avatar":"https://static001.geekbang.org/account/avatar/00/13/5b/2a/83c3cb2d.jpg","nickname":"ç‹åº†å‹","note":"","ucode":"90D8743C4A6C79","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496447,"discussion_content":"1. æˆ‘ä»¬ç”¨çš„æ˜¯äº‘ä¸»æœºï¼Œä¾›åº”å•†æä¾›äº†K8s+dockerç¯å¢ƒï¼Œæˆ‘ä»¬æŠŠæœåŠ¡éƒ¨ç½²åœ¨è¿™ä¸ªç¯èŠ‚å°±å¯ä»¥ï¼Œæ€»ä½“ä¸Šèµ„æºåˆ©ç”¨ç‡ä¼šæ›´é«˜ã€‚\n2. oms ä¹Ÿéƒ¨ç½²äº†æ›´å¤šæœºå™¨\n3. lvséƒ¨ç½²å’Œè¿ç»´èµ·æ¥æ¯”è¾ƒå¤æ‚ï¼Œåˆ«åŸ‹æŠ€æœ¯å‘ï¼Œnginxæ¯”è¾ƒå®¹æ˜“ä¸Šæ‰‹ï¼Œæ•ˆæœä¹Ÿä¸é”™ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1590677564,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":205717,"user_name":"æ¢ç´¢æ— æ­¢å¢ƒ","can_delete":false,"product_type":"c1","uid":1044178,"ip_address":"","ucode":"91D2A9907DFA79","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ee/d2/7024431c.jpg","comment_is_top":false,"comment_ctime":1586707588,"is_pvip":false,"replies":[{"id":"76920","content":"å¾ˆå¥½çš„æ€è€ƒã€‚<br>1. å°ç¨‹åºåœ¨å®Œæˆä¸‹å•æ”¯ä»˜åï¼Œä¼šå’Œæ¨é€ä¸­å¿ƒå»ºç«‹é•¿è¿æ¥ï¼Œè¿™æ—¶å®ƒä¼šæœ‰è¿”å›å–é¤ç çš„é¢„æœŸï¼Œè·å–åˆ°å–é¤ç åæ–­æ‰è¿æ¥ï¼Œæ•´ä¸ªè¿æ¥çš„æ—¶é—´ä¸€èˆ¬åœ¨å‡ ç§’ã€‚<br>2. é—¨åº—çš„æ”¶é“¶ç³»ç»Ÿé€šè¿‡ä¸­å¿ƒçš„ä»£ç†æœåŠ¡å™¨è®¿é—®äº‘ç«¯ï¼Œè¿™ä¸ªä»£ç†æœåŠ¡å™¨éƒ¨ç½²åœ¨å•†æˆ·è‡ªå·±çš„IDCæœºæˆ¿ï¼Œè¿™ä¸ªä»£ç†æœåŠ¡å™¨å’Œäº‘å‚å•†çš„æœ‰åŒçº¿è·¯ã€‚POSæ”¶é“¶ç³»ç»Ÿä¸æ˜¯æµè§ˆå™¨ç•Œé¢ï¼Œæ˜¯ä¸€ä¸ªæ¡Œé¢åº”ç”¨ã€‚","user_name":"ä½œè€…å›å¤","comment_id":205717,"uid":"1268522","ip_address":"","utype":1,"ctime":1586747783,"user_name_real":"ç‹åº†å‹"}],"discussion_count":1,"race_medal":0,"score":"10176642180","product_id":100046301,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œæœ‰ä¸¤ä¸ªé—®é¢˜è¯·æ•™ï¼<br>ç¬¬ä¸€ä¸ªæ˜¯æ–‡ä¸­æåˆ°å°ç¨‹åºå‰ç«¯éœ€è¦è·Ÿæ¨é€ä¸­å¿ƒä¿æŒé•¿è¿æ¥ï¼Œé‚£å¦‚ä½•æœ‰åƒä¸‡çš„ç”¨æˆ·ï¼Œé‚£æœåŠ¡ç«¯è¦ä¿æŒä¸Šåƒä¸‡çš„é•¿è¿æ¥ï¼Œè¿™ä¸€å—ä¼šä¸ä¼šæœ‰é—®é¢˜ï¼Ÿæˆ–è€…éœ€è¦åšä»€ä¹ˆä¼˜åŒ–å¤„ç†ï¼Ÿ<br>ç¬¬äºŒä¸ªæ˜¯æ”¶é“¶ç³»ç»Ÿå¦‚æœæ˜¯ä¸€ä¸ªBSæ¶æ„çš„å®¢æˆ·ç«¯ï¼Œé‚£æ˜¯ä¸æ˜¯å°±å¯ä»¥è·Ÿå±¥å•ç³»ç»Ÿéƒ¨ç½²åœ¨åŒä¸€ä¸ªäº‘å‚å•†çš„æœåŠ¡å™¨ä¸Šï¼Œå› ä¸ºæ˜¯åŒä¸ªäº‘å‚å•†çš„æœåŠ¡å™¨ï¼Œæ˜¯ä¸æ˜¯å°±ä¸éœ€è¦è€ƒè™‘ç§»åŠ¨å’Œç”µä¿¡çš„åŒçº¿è·¯äº†ï¼Œä¸çŸ¥é“ç†è§£æ˜¯å¦æœ‰é—®é¢˜ï¼Ÿ<br>è¯·è€å¸ˆæŒ‡æ­£ï¼<br>","like_count":2,"discussions":[{"author":{"id":1268522,"avatar":"https://static001.geekbang.org/account/avatar/00/13/5b/2a/83c3cb2d.jpg","nickname":"ç‹åº†å‹","note":"","ucode":"90D8743C4A6C79","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":491568,"discussion_content":"å¾ˆå¥½çš„æ€è€ƒã€‚\n1. å°ç¨‹åºåœ¨å®Œæˆä¸‹å•æ”¯ä»˜åï¼Œä¼šå’Œæ¨é€ä¸­å¿ƒå»ºç«‹é•¿è¿æ¥ï¼Œè¿™æ—¶å®ƒä¼šæœ‰è¿”å›å–é¤ç çš„é¢„æœŸï¼Œè·å–åˆ°å–é¤ç åæ–­æ‰è¿æ¥ï¼Œæ•´ä¸ªè¿æ¥çš„æ—¶é—´ä¸€èˆ¬åœ¨å‡ ç§’ã€‚\n2. é—¨åº—çš„æ”¶é“¶ç³»ç»Ÿé€šè¿‡ä¸­å¿ƒçš„ä»£ç†æœåŠ¡å™¨è®¿é—®äº‘ç«¯ï¼Œè¿™ä¸ªä»£ç†æœåŠ¡å™¨éƒ¨ç½²åœ¨å•†æˆ·è‡ªå·±çš„IDCæœºæˆ¿ï¼Œè¿™ä¸ªä»£ç†æœåŠ¡å™¨å’Œäº‘å‚å•†çš„æœ‰åŒçº¿è·¯ã€‚POSæ”¶é“¶ç³»ç»Ÿä¸æ˜¯æµè§ˆå™¨ç•Œé¢ï¼Œæ˜¯ä¸€ä¸ªæ¡Œé¢åº”ç”¨ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1586747783,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":200071,"user_name":"é˜¿å¡ç‰›","can_delete":false,"product_type":"c1","uid":1022247,"ip_address":"","ucode":"0BC43A904C3199","user_header":"https://static001.geekbang.org/account/avatar/00/0f/99/27/47aa9dea.jpg","comment_is_top":false,"comment_ctime":1585539589,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10175474181","product_id":100046301,"comment_content":"å¯¹äºå¤§å‹çš„åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œæ²¡æœ‰ä¸€å¥—å¥½ç”¨çš„ç›‘æ§ç³»ç»Ÿï¼Œå°±ç­‰äºç›²äººæ‘¸è±¡","like_count":2},{"had_liked":false,"id":253693,"user_name":"åˆºå®¢","can_delete":false,"product_type":"c1","uid":1098916,"ip_address":"","ucode":"607ABD2F2B5898","user_header":"https://static001.geekbang.org/account/avatar/00/10/c4/a4/b9b12d71.jpg","comment_is_top":false,"comment_ctime":1602834097,"is_pvip":true,"replies":[{"id":"92920","content":"è°¢è°¢å¤¸å¥–ï¼Œåæ ‡ä¸Šæµ·ï¼Œæœ‰å…´è¶£å‹¾å…‘ä¸‹ï¼Œå“ˆå“ˆã€‚","user_name":"ä½œè€…å›å¤","comment_id":253693,"uid":"1268522","ip_address":"","utype":1,"ctime":1603172987,"user_name_real":"ç‹åº†å‹"}],"discussion_count":2,"race_medal":0,"score":"5897801393","product_id":100046301,"comment_content":"ç¡¬æ ¸ï¼Œéå¸¸æ£’ï¼Œè´´è¿‘å®æˆ˜ï¼Œè¦å¤šè¯»å‡ éï¼Œæœ‰æœºä¼šå’Œè€å¸ˆåšåŒäº‹é‚£å°†æ˜¯äººç”Ÿå¹¸äº‹å‘€","like_count":1,"discussions":[{"author":{"id":1268522,"avatar":"https://static001.geekbang.org/account/avatar/00/13/5b/2a/83c3cb2d.jpg","nickname":"ç‹åº†å‹","note":"","ucode":"90D8743C4A6C79","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":507146,"discussion_content":"è°¢è°¢å¤¸å¥–ï¼Œåæ ‡ä¸Šæµ·ï¼Œæœ‰å…´è¶£å‹¾å…‘ä¸‹ï¼Œå“ˆå“ˆã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603172987,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1098916,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/a4/b9b12d71.jpg","nickname":"åˆºå®¢","note":"","ucode":"607ABD2F2B5898","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":318215,"discussion_content":"æˆ‘åªèƒ½é¥æœ›å¤§ä½¬äº†ï¼Œæˆ‘åœ¨åŒ—äº¬ï¼Œå¸Œæœ›ä»¥åæœ‰æœºä¼š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603680831,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":200203,"user_name":"é˜¿å›º","can_delete":false,"product_type":"c1","uid":1064149,"ip_address":"","ucode":"F16B99FED58993","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/2PtNr4sjKLYNnibicnwWcZicmQbTguUK9ZaCVBLYmiaSYFRjRrUP08jHO9N7KB2adDw87ywccexMJh8yCQ84q5gEzg/132","comment_is_top":false,"comment_ctime":1585557441,"is_pvip":false,"replies":[{"id":"74937","content":"Nginxé…ç½®ç»†èŠ‚ï¼Œä¸“ä¸šçš„è¿ç»´ä¼šæ¯”è¾ƒæ¸…æ¥šï¼Œè¿™é‡Œæˆ‘ä¸æ•¢è¯¯å¯¼ä½ ã€‚","user_name":"ä½œè€…å›å¤","comment_id":200203,"uid":"1268522","ip_address":"","utype":1,"ctime":1585568080,"user_name_real":"ç‹åº†å‹"}],"discussion_count":1,"race_medal":0,"score":"5880524737","product_id":100046301,"comment_content":"è€å¸ˆå¥½ï¼å¯¹Nginxè¿™å—çš„éƒ¨ç½²æœ‰ç‚¹æ‹¿æä¸å®šï¼Œæˆ‘æƒ³åˆ°ä¸¤æ–¹æ¡ˆï¼š<br>æ–¹æ¡ˆä¸€<br>1.æ¯ä¸ªæœ‰å…¬ç½‘IPçš„æœåŠ¡å™¨ä¸Šå®‰è£…Nginxï¼ˆupstreamé…ç½®ç›¸åŒï¼‰<br>2.åœ¨DNSåŸŸåå•†æŒ‡å®šæ­¥éª¤1ä¸­çš„å…¬ç½‘IPæŒ‡å‘ä¸€ä¸ªåŸŸå<br><br>æ–¹æ¡ˆäºŒ<br>1.å†…ç½‘éƒ¨ç½²Nginxï¼Œä½¿ç”¨keepalivedåšé«˜å¯ç”¨é›†ç¾¤<br>2.åœ¨DNSåŸŸåå•†æŒ‡ä¸€ä¸ªå…¬ç½‘IPæŒ‡å‘åŸŸå<br>è€å¸ˆä¼šä»å“ªäº›è§’åº¦è€ƒè™‘ï¼Œèƒ½è¯¦ç»†è®²ä¸€ä¸‹è¯·æ±‚ä»åŸŸååˆ°Nginxé›†ç¾¤è¿™ä¸€æ®µçš„æ¶æ„å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1268522,"avatar":"https://static001.geekbang.org/account/avatar/00/13/5b/2a/83c3cb2d.jpg","nickname":"ç‹åº†å‹","note":"","ucode":"90D8743C4A6C79","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":489959,"discussion_content":"Nginxé…ç½®ç»†èŠ‚ï¼Œä¸“ä¸šçš„è¿ç»´ä¼šæ¯”è¾ƒæ¸…æ¥šï¼Œè¿™é‡Œæˆ‘ä¸æ•¢è¯¯å¯¼ä½ ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585568080,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":196603,"user_name":"å°æ´›","can_delete":false,"product_type":"c1","uid":1005062,"ip_address":"","ucode":"227EC21891012B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/56/06/ea49b29d.jpg","comment_is_top":false,"comment_ctime":1585296841,"is_pvip":false,"replies":[{"id":"74466","content":"æ˜¯éœ€è¦å¾ˆå¤šä¸ªæ¶ˆè´¹è€…ï¼Œè¿™æ˜¯ä¸šåŠ¡åŠŸèƒ½ï¼Œä¸æ˜¯çº¯ç²¹æ•°æ®åŒæ­¥ï¼Œä¸èƒ½è®¢é˜…binlogï¼Œbinlogå¤ªåº•å±‚äº†æ„å‘³å¼ºè€¦åˆã€‚<br>ä¸æ˜¯è®¢å•ä¸­å¿ƒæ‰€æœ‰æ•°æ®å˜åŠ¨ï¼Œomséƒ½ä¼šå…³å¿ƒï¼Œæ¯”å¦‚æœ¬æ¥å°±æ˜¯omsåé¦ˆå–é¤ç ç»™è®¢å•ä¸­å¿ƒï¼Œomsè‡ªç„¶ä¸å…³å¿ƒbinlogã€‚","user_name":"ä½œè€…å›å¤","comment_id":196603,"uid":"1268522","ip_address":"","utype":1,"ctime":1585318239,"user_name_real":"ç‹åº†å‹"}],"discussion_count":1,"race_medal":0,"score":"5880264137","product_id":100046301,"comment_content":"è¯·æ•™è€å¸ˆæ‚¨å‡ ä¸ªé—®é¢˜ï¼š<br>1ã€OMSå±¥å•ä¸­å¿ƒçš„ä½œç”¨ï¼Œå› ä¸ºæˆ‘ä»¬å…¬å¸çš„ä¸šåŠ¡å°±æ˜¯æ¨é€ç»™æ¶ˆæ¯ç»™æ”¶é“¶ï¼Œè¿™ä¸ªæ¶ˆæ¯å°±æ”¾åœ¨è®¢å•æœåŠ¡é‡Œé¢å»åšäº†ï¼Œæ‰€ä»¥é‡æ–°éƒ¨ç½²ä¸ªOMSå±¥å•ä¸­å¿ƒ  å¯¹åç»­çš„ä¸šåŠ¡æ¶æ„æœ‰ä»€ä¹ˆå¸®åŠ©å—ï¼Ÿ<br>2ã€å› ä¸ºåŠ äº†OMSå±¥å•ä¸­å¿ƒï¼ŒåŒæ­¥è®¢å•æ–¹é¢ çœ‹æ–¹æ¡ˆæ˜¯é‡‡ç”¨äº†å¾€MQé‡Œé¢ å†™å…¥è®¢å•æ•°æ® ç„¶åå†è½åº“å—ï¼Ÿå¦‚æœè®¢å•æ•°æ®é‡å¾ˆå¤šå‡ ç™¾ä¸‡   é‚£ä¹ˆOMSæ˜¯ä¸æ˜¯è¦éƒ¨ç½²å¾ˆå¤šå°æœºå™¨å»æ¶ˆè´¹MQç„¶åè½è®¢å•æ•°æ®ï¼Œæ˜¯ä¸æ˜¯å¯ä»¥ç›´æ¥ç”¨è®¢é˜…binlog å¤‡ä»½æ•°æ®åº“å°±è¡Œäº†ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1268522,"avatar":"https://static001.geekbang.org/account/avatar/00/13/5b/2a/83c3cb2d.jpg","nickname":"ç‹åº†å‹","note":"","ucode":"90D8743C4A6C79","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":489341,"discussion_content":"æ˜¯éœ€è¦å¾ˆå¤šä¸ªæ¶ˆè´¹è€…ï¼Œè¿™æ˜¯ä¸šåŠ¡åŠŸèƒ½ï¼Œä¸æ˜¯çº¯ç²¹æ•°æ®åŒæ­¥ï¼Œä¸èƒ½è®¢é˜…binlogï¼Œbinlogå¤ªåº•å±‚äº†æ„å‘³å¼ºè€¦åˆã€‚\nä¸æ˜¯è®¢å•ä¸­å¿ƒæ‰€æœ‰æ•°æ®å˜åŠ¨ï¼Œomséƒ½ä¼šå…³å¿ƒï¼Œæ¯”å¦‚æœ¬æ¥å°±æ˜¯omsåé¦ˆå–é¤ç ç»™è®¢å•ä¸­å¿ƒï¼Œomsè‡ªç„¶ä¸å…³å¿ƒbinlogã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585318239,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":195647,"user_name":"çº¦ä¹¦äºš","can_delete":false,"product_type":"c1","uid":1046714,"ip_address":"","ucode":"81EA27ADD9EC1A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f8/ba/14e05601.jpg","comment_is_top":false,"comment_ctime":1585209206,"is_pvip":false,"replies":[{"id":"74471","content":"åŒ…æ‹¬ç³»ç»Ÿæ”¹é€ ï¼Œå‹æµ‹ï¼Œï¼Œåšäº†æœ‰3ä¸ªæœˆã€‚<br>ä¸ä½¿ç”¨äº‘æœåŠ¡å•†æä¾›çš„LBï¼Œæµé‡ä»ç»Ÿä¸€çš„å£å­è¿›æ¥åï¼Œç”±Nginxé›†ç¾¤æ¥ç®¡ï¼Œå†ç”±å„ä¸ªNginxè·¯ç”±åˆ°webåº”ç”¨ã€‚","user_name":"ä½œè€…å›å¤","comment_id":195647,"uid":"1268522","ip_address":"","utype":1,"ctime":1585318808,"user_name_real":"ç‹åº†å‹"}],"discussion_count":1,"race_medal":0,"score":"5880176502","product_id":100046301,"comment_content":"è¯·æ•™å‡ ä¸ªé—®é¢˜:<br>1. nginxå’ŒLBé‚£é‡Œæ²¡çœ‹æ‡‚ï¼Œæ˜¯æ€ä¹ˆä¸€ç§ç»“æ„å…³ç³»å‘¢ï¼ŒLBå°†è¯·æ±‚åˆ†æµåˆ°nginxï¼Ÿæ”¹é€ ä¹‹åæœ‰å¤šä¸ªLBäº†ï¼Œè¿˜æ˜¯æ”¹é€ åæ²¡æœ‰äº‘æœåŠ¡å•†çš„LBäº†ï¼Ÿ<br>2. è¿™ä¹ˆå¤šå·¥ä½œï¼Œè¦åœ¨å¤§ä¿ƒå‰æå‰å¤šä¹…å¼€å§‹è¿›è¡Œï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1268522,"avatar":"https://static001.geekbang.org/account/avatar/00/13/5b/2a/83c3cb2d.jpg","nickname":"ç‹åº†å‹","note":"","ucode":"90D8743C4A6C79","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":489134,"discussion_content":"åŒ…æ‹¬ç³»ç»Ÿæ”¹é€ ï¼Œå‹æµ‹ï¼Œï¼Œåšäº†æœ‰3ä¸ªæœˆã€‚\nä¸ä½¿ç”¨äº‘æœåŠ¡å•†æä¾›çš„LBï¼Œæµé‡ä»ç»Ÿä¸€çš„å£å­è¿›æ¥åï¼Œç”±Nginxé›†ç¾¤æ¥ç®¡ï¼Œå†ç”±å„ä¸ªNginxè·¯ç”±åˆ°webåº”ç”¨ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585318808,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":195365,"user_name":"Skysper","can_delete":false,"product_type":"c1","uid":1058800,"ip_address":"","ucode":"164B3CAF81A7C5","user_header":"https://static001.geekbang.org/account/avatar/00/10/27/f0/06ecce19.jpg","comment_is_top":false,"comment_ctime":1585183828,"is_pvip":false,"replies":[{"id":"74282","content":"æ¯ä¸ªæ•°æ®åº“éƒ½æ˜¯é›†ç¾¤éƒ¨ç½²ï¼Œ1ä¸»1å¤‡2ä»","user_name":"ä½œè€…å›å¤","comment_id":195365,"uid":"1268522","ip_address":"","utype":1,"ctime":1585194566,"user_name_real":"ç‹åº†å‹"}],"discussion_count":1,"race_medal":0,"score":"5880151124","product_id":100046301,"comment_content":"æ•°æ®åº“åˆ†åº“å å•åº“æœ‰MHAå—ï¼Ÿæ²¡æœ‰å°±å¯èƒ½å­˜åœ¨å•ç‚¹ï¼›å¦å¤–redis å’Œmqç­‰ç¼“å­˜å’Œäº‹ä»¶ä¿éšœè¦æ€ä¹ˆå¤„ç†ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1268522,"avatar":"https://static001.geekbang.org/account/avatar/00/13/5b/2a/83c3cb2d.jpg","nickname":"ç‹åº†å‹","note":"","ucode":"90D8743C4A6C79","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":489045,"discussion_content":"æ¯ä¸ªæ•°æ®åº“éƒ½æ˜¯é›†ç¾¤éƒ¨ç½²ï¼Œ1ä¸»1å¤‡2ä»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585194566,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":193975,"user_name":"Geek_0e5f26","can_delete":false,"product_type":"c1","uid":1896365,"ip_address":"","ucode":"E00C63EB05B9F6","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLl8N60fn4vYacskrXUQC5Y7PFGL6EDrxb5wwr7EuaADZeOjMd00nyFR5DAOD06S3NVG2EESuicebg/132","comment_is_top":false,"comment_ctime":1585009734,"is_pvip":false,"replies":[{"id":"74014","content":"1. è¿™é‡Œçš„QPSæ˜¯å°ç¨‹åºå‰ç«¯çš„æ··åˆè°ƒç”¨åœºæ™¯ï¼ŒåŒ…æ‹¬é¦–é¡µè®¿é—®ï¼Œå•†å“æµé‡ï¼ŒåŠ è´­ç‰©è½¦ï¼Œä¸‹å•ç­‰ï¼Œæˆ‘ä»¬ä¼šå¤§è‡´åˆ†æå„ä¸ªæ¥å£çš„è°ƒç”¨æ¯”ä¾‹ã€‚<br>2. ç„¶åæ ¹æ®æ¥å£çš„è¯·æ±‚å’Œå“åº”æ•°æ®é‡ï¼Œç®—å‡ºç½‘ç»œå¸¦å®½ã€‚<br>3.æœ€åç»“åˆæ··åˆåœºæ™¯çš„å‹æµ‹æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥æ¯”è¾ƒå‡†ç¡®åœ°çŸ¥é“å¸¦å®½å ç”¨ï¼Œæœ€åç®—å‡ºéœ€è¦éƒ¨ç½²çš„Nginxæ•°é‡ã€‚<br>Nginxçš„éƒ¨ç½²æ¶æ„å’Œäº‘æœåŠ¡å•†çš„LBæœ‰å…³ï¼Œæˆ‘ç¡®è®¤å¥½å†åé¦ˆç»™ä½ ã€‚<br>","user_name":"ä½œè€…å›å¤","comment_id":193975,"uid":"1268522","ip_address":"","utype":1,"ctime":1585054567,"user_name_real":"ç‹åº†å‹"}],"discussion_count":1,"race_medal":0,"score":"5879977030","product_id":100046301,"comment_content":"è€å¸ˆ è¯·æ•™ä¸¤ä¸ªé—®é¢˜ã€‚é—®é¢˜ä¸€ï¼šNginxé›†ç¾¤ï¼Œä»–ä»¬çš„ç‰©ç†æ¶æ„æ˜¯æ€ä¹ˆæ ·çš„ï¼Œè°æ¥åšè·¯ç”±å’Œè´Ÿè½½å‡è¡¡ï¼Ÿ   é—®é¢˜2ï¼šé€šè¿‡æå‡ Nginx çš„æ•°é‡ï¼Œæ¥ä¿è¯æ¥å…¥æœ‰è¶³å¤Ÿçš„å¸¦å®½ã€‚è¿™ä¸ªå¸¦å®½é‡æ˜¯å¦‚ä½•ä¼°ç®—çš„ï¼Ÿæ¯”å¦‚æ¯ä¸ªç”¨æˆ·è¯·æ±‚å¹³å‡å¤§å°ï¼Œå†åˆ°å“åº”æ•°æ®å¹³å‡å¤§å°ï¼Œè¿™ä¸ªä¼°ç®—è¿‡ç¨‹è¯·æ‚¨æŒ‡ç‚¹ä¸€ä¸‹å§ï¼Œæœ€å¥½è¯·æ‚¨åˆ†äº«ä¸€ä¸‹å‚è€ƒå€¼ï¼Œè°¢è°¢è€å¸ˆï¼","like_count":1,"discussions":[{"author":{"id":1268522,"avatar":"https://static001.geekbang.org/account/avatar/00/13/5b/2a/83c3cb2d.jpg","nickname":"ç‹åº†å‹","note":"","ucode":"90D8743C4A6C79","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488717,"discussion_content":"1. è¿™é‡Œçš„QPSæ˜¯å°ç¨‹åºå‰ç«¯çš„æ··åˆè°ƒç”¨åœºæ™¯ï¼ŒåŒ…æ‹¬é¦–é¡µè®¿é—®ï¼Œå•†å“æµé‡ï¼ŒåŠ è´­ç‰©è½¦ï¼Œä¸‹å•ç­‰ï¼Œæˆ‘ä»¬ä¼šå¤§è‡´åˆ†æå„ä¸ªæ¥å£çš„è°ƒç”¨æ¯”ä¾‹ã€‚\n2. ç„¶åæ ¹æ®æ¥å£çš„è¯·æ±‚å’Œå“åº”æ•°æ®é‡ï¼Œç®—å‡ºç½‘ç»œå¸¦å®½ã€‚\n3.æœ€åç»“åˆæ··åˆåœºæ™¯çš„å‹æµ‹æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥æ¯”è¾ƒå‡†ç¡®åœ°çŸ¥é“å¸¦å®½å ç”¨ï¼Œæœ€åç®—å‡ºéœ€è¦éƒ¨ç½²çš„Nginxæ•°é‡ã€‚\nNginxçš„éƒ¨ç½²æ¶æ„å’Œäº‘æœåŠ¡å•†çš„LBæœ‰å…³ï¼Œæˆ‘ç¡®è®¤å¥½å†åé¦ˆç»™ä½ ã€‚\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585054567,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":193803,"user_name":"å¤©å¤©å‘å–„","can_delete":false,"product_type":"c1","uid":1108250,"ip_address":"","ucode":"6AE57FB2B15043","user_header":"https://static001.geekbang.org/account/avatar/00/10/e9/1a/6ba207a3.jpg","comment_is_top":false,"comment_ctime":1584967562,"is_pvip":true,"replies":[{"id":"74016","content":"å°ç¨‹åºæœåŠ¡ç«¯æœ¬èº«å°±100ä¸ªå®ä¾‹ï¼ŒæœåŠ¡æ ¹æ®æƒ…å†µï¼Œå®ä¾‹æ•°é‡ä¸ç­‰ã€‚äº‘ä¸Šå¯¹å¤–ä¹Ÿæ˜¯æä¾›ç»Ÿä¸€åœ°å€ï¼Œå¦‚æœæˆ‘æ²¡è®°é”™çš„è¯ï¼Œæ¯å°Nginxæ”¯æŒ100Mæµé‡ã€‚","user_name":"ä½œè€…å›å¤","comment_id":193803,"uid":"1268522","ip_address":"","utype":1,"ctime":1585054780,"user_name_real":"ç‹åº†å‹"}],"discussion_count":1,"race_medal":0,"score":"5879934858","product_id":100046301,"comment_content":"æ¯ç§’10ä¸‡ï¼Œèƒ½ä¸èƒ½å†ç»™ä¸€äº›æ•°å­—ï¼Œæ”¹é€ åæ²¡æœ‰ç”¨äº‘lb,è‡ªå»ºnginxé›†ç¾¤ï¼Œè¿™ä¸ªäº‘ä¸Šä¹Ÿæ˜¯æœ‰vipæ˜¯å—ï¼Œè¿™ä¸ªæµé‡æ˜¯æ¯å°æœºå™¨è®¾å¤šå°‘å›ºå®šå¸¦å®½?è¿˜æœ‰å°ç¨‹åºæœåŠ¡ç«¯ä¸åŸºç¡€æœåŠ¡å…±100ä¸ªå®ä¾‹ï¼Œè¿˜æ˜¯ä»…å°ç¨‹åºæœåŠ¡ç«¯ï¼ŒåŸºç¡€æœåŠ¡å½“æ—¶ç”¨äº†å¤šå°‘å®ä¾‹ï¼Œå¦å¤–ä¸€ä¸ªå®¹å™¨å¤§çº¦cpuä¸å†…å­˜ä»€ä¹ˆé…ç½®","like_count":1,"discussions":[{"author":{"id":1268522,"avatar":"https://static001.geekbang.org/account/avatar/00/13/5b/2a/83c3cb2d.jpg","nickname":"ç‹åº†å‹","note":"","ucode":"90D8743C4A6C79","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488667,"discussion_content":"å°ç¨‹åºæœåŠ¡ç«¯æœ¬èº«å°±100ä¸ªå®ä¾‹ï¼ŒæœåŠ¡æ ¹æ®æƒ…å†µï¼Œå®ä¾‹æ•°é‡ä¸ç­‰ã€‚äº‘ä¸Šå¯¹å¤–ä¹Ÿæ˜¯æä¾›ç»Ÿä¸€åœ°å€ï¼Œå¦‚æœæˆ‘æ²¡è®°é”™çš„è¯ï¼Œæ¯å°Nginxæ”¯æŒ100Mæµé‡ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585054780,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":192552,"user_name":"å·æ°","can_delete":false,"product_type":"c1","uid":1099750,"ip_address":"","ucode":"815211E1D698E6","user_header":"https://static001.geekbang.org/account/avatar/00/10/c7/e6/11f21cb4.jpg","comment_is_top":false,"comment_ctime":1584859603,"is_pvip":false,"replies":[{"id":"73742","content":"è¿™ä¸ªåªæ˜¯ç®€å•è¿æ¥ï¼Œå®é™…æ•°æ®è¿˜æ˜¯é€šè¿‡æœåŠ¡æ¥å£è·å–ï¼Œå‡ ä¸‡ä¸ªè¿æ¥é—®é¢˜ä¸å¤§ï¼Œä¹Ÿå¯ä»¥åŠ æœºå™¨å¢å¼ºå¤„ç†èƒ½åŠ›ã€‚","user_name":"ä½œè€…å›å¤","comment_id":192552,"uid":"1268522","ip_address":"","utype":1,"ctime":1584934960,"user_name_real":"ç‹åº†å‹"}],"discussion_count":1,"race_medal":0,"score":"5879826899","product_id":100046301,"comment_content":"è€å¸ˆå¥½ï¼Œæ¶ˆæ¯æ¨é€ä¸­å¿ƒé€šè¿‡é•¿è¿æ¥çš„æ–¹å¼ä¿æŒï¼Œä½†æ˜¯æ¯ä¸ªé•¿è¿æ¥éƒ½æœ‰ä¸€å®šçš„èµ„æºæ¶ˆè€—ï¼›å¦‚æœä¸Šæ¸¸çš„è¯·æ±‚è¿‡å¤šï¼Œè¿™ä¸ªèµ„æºæ¶ˆè€—è¿‡å¤§çš„é—®é¢˜æ€ä¹ˆå¤„ç†ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1268522,"avatar":"https://static001.geekbang.org/account/avatar/00/13/5b/2a/83c3cb2d.jpg","nickname":"ç‹åº†å‹","note":"","ucode":"90D8743C4A6C79","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488422,"discussion_content":"è¿™ä¸ªåªæ˜¯ç®€å•è¿æ¥ï¼Œå®é™…æ•°æ®è¿˜æ˜¯é€šè¿‡æœåŠ¡æ¥å£è·å–ï¼Œå‡ ä¸‡ä¸ªè¿æ¥é—®é¢˜ä¸å¤§ï¼Œä¹Ÿå¯ä»¥åŠ æœºå™¨å¢å¼ºå¤„ç†èƒ½åŠ›ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584934960,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":190550,"user_name":"æ¯å¤©æ™’ç™½ç‰™","can_delete":false,"product_type":"c1","uid":1004698,"ip_address":"","ucode":"A1B102CD933DEA","user_header":"https://static001.geekbang.org/account/avatar/00/0f/54/9a/76c0af70.jpg","comment_is_top":false,"comment_ctime":1584668116,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5879635412","product_id":100046301,"comment_content":"æ„Ÿè°¢è€å¸ˆçš„å®æˆ˜ç»éªŒåˆ†äº«ï¼Œå¾ˆå¹²","like_count":1},{"had_liked":false,"id":190452,"user_name":"åˆ˜æ¥ ","can_delete":false,"product_type":"c1","uid":1120773,"ip_address":"","ucode":"9F19D44CBEE039","user_header":"https://static001.geekbang.org/account/avatar/00/11/1a/05/f154d134.jpg","comment_is_top":false,"comment_ctime":1584662258,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5879629554","product_id":100046301,"comment_content":"è§„æ¨¡æ²¡è¿™ä¹ˆå¤§ï¼Œåªèƒ½æƒ³æƒ³ï¼Œå­¦ä¹ ä¸‹","like_count":1},{"had_liked":false,"id":190422,"user_name":"æ·±å±±å°ä¹¦ç«¥","can_delete":false,"product_type":"c1","uid":1079593,"ip_address":"","ucode":"6B5DD3B3D84534","user_header":"https://static001.geekbang.org/account/avatar/00/10/79/29/a90cf777.jpg","comment_is_top":false,"comment_ctime":1584658778,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5879626074","product_id":100046301,"comment_content":"éå¸¸æ£’ï¼ä¸€æ—©èµ·æ¥è¯»åˆ°å¹²è´§æ»¡æ»¡çš„æ–‡ç« ï¼Œå¿ƒæƒ…ç¾ç¾å“’","like_count":1},{"had_liked":false,"id":359243,"user_name":"æœç§€æ¸…","can_delete":false,"product_type":"c1","uid":2952514,"ip_address":"ä¸Šæµ·","ucode":"4D33DD69E8D238","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJGiahPncXAMXlRibCVapHxib4V90Pxa56QQr6iatHmHn77YibSibWhdBe9YKxrD5ria9ZI4JfFjD1SecAmg/132","comment_is_top":false,"comment_ctime":1665370252,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1665370252","product_id":100046301,"comment_content":"æˆ‘ä»¬ç°åœ¨ç¡¬è´Ÿè½½æ˜¯å•ç‚¹ï¼Œé‡‡ç”¨å•å°F5","like_count":0},{"had_liked":false,"id":318104,"user_name":"æµäº‘è¿½é£","can_delete":false,"product_type":"c1","uid":2611950,"ip_address":"","ucode":"16D738406CB191","user_header":"https://static001.geekbang.org/account/avatar/00/27/da/ee/63090718.jpg","comment_is_top":false,"comment_ctime":1635152537,"is_pvip":false,"replies":[{"id":"120385","content":"ç›‘æ§åªèƒ½åŠæ—¶å‘ç°é—®é¢˜ï¼Œä¸èƒ½é¿å…æµé‡å¤§ï¼Œç³»ç»Ÿä¸å‡ºé—®é¢˜","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1268522","ctime":1641976421,"ip_address":"","comment_id":318104,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1635152537","product_id":100046301,"comment_content":"å¦‚ä½•å¯¹æµé‡å’Œå¹¶å‘æœ‰ä¸ªè¾ƒå¯é çš„é¢„ä¼°,æœªä¸Šäº‘çš„IDCçš„åº”ç”¨,å¦‚ä½•åŠæ—¶æ°´å¹³æ‰©å±•ã€‚å°±æ˜¯å½“èµ„æºæœ‰é™çš„æ—¶å€™,è¿˜æ˜¯è¦å¤šé ç›‘æ§å§","like_count":0,"discussions":[{"author":{"id":1268522,"avatar":"https://static001.geekbang.org/account/avatar/00/13/5b/2a/83c3cb2d.jpg","nickname":"ç‹åº†å‹","note":"","ucode":"90D8743C4A6C79","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":545492,"discussion_content":"ç›‘æ§åªèƒ½åŠæ—¶å‘ç°é—®é¢˜ï¼Œä¸èƒ½é¿å…æµé‡å¤§ï¼Œç³»ç»Ÿä¸å‡ºé—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641976421,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":315938,"user_name":"ezekiel","can_delete":false,"product_type":"c1","uid":1158795,"ip_address":"","ucode":"AB4AB6FA8612D8","user_header":"https://static001.geekbang.org/account/avatar/00/11/ae/8b/43ce01ca.jpg","comment_is_top":false,"comment_ctime":1634062893,"is_pvip":false,"replies":[{"id":"120389","content":"1. å‰ç«¯å°ç¨‹åºä¸‹å•å’Œå±¥å•ç³»ç»Ÿæ˜¯é€šè¿‡MQå»æŠ—æµé‡å’Œè§£è€¦ï¼Œè¿™ä¸ªå·²ç»æ˜¯ç”¨æˆ·çš„æ­£å¼è®¢å•äº†ï¼Œå¦‚æœåªæ˜¯ä¸‹å•è¯·æ±‚ï¼Œä¸é€‚åˆæ”¾åˆ°MQï¼Œå†å–MQæ¶ˆæ¯ç”Ÿæˆè®¢å•ã€‚ä¸€æ–¹é¢ï¼Œç”¨æˆ·éœ€è¦åŠæ—¶åé¦ˆï¼›å¦ä¸€æ–¹é¢å¢åŠ å‡ºé”™å¯èƒ½ã€‚<br>2. æ”¶é“¶ç³»ç»Ÿæœ‰å‡çº§ç¨‹åºï¼Œå¯ä»¥è‡ªåŠ¨ä¸‹å‘ä¿®æ”¹å’Œå‡çº§","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1268522","ctime":1641977011,"ip_address":"","comment_id":315938,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1634062893","product_id":100046301,"comment_content":"1.ä¸ºä»€ä¹ˆä¸åœ¨å°ç¨‹åºå’Œåç«¯ä¹‹é—´ç”¨MQå»æŠ—ï¼Ÿ<br>2.æ”¶é“¶ç³»ç»Ÿæ˜¯å¦‚ä½•æ›´æ–°çš„ï¼Ÿæœ‰è‡ªå·±çš„å‡çº§ç¨‹åºå—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1268522,"avatar":"https://static001.geekbang.org/account/avatar/00/13/5b/2a/83c3cb2d.jpg","nickname":"ç‹åº†å‹","note":"","ucode":"90D8743C4A6C79","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":545497,"discussion_content":"1. å‰ç«¯å°ç¨‹åºä¸‹å•å’Œå±¥å•ç³»ç»Ÿæ˜¯é€šè¿‡MQå»æŠ—æµé‡å’Œè§£è€¦ï¼Œè¿™ä¸ªå·²ç»æ˜¯ç”¨æˆ·çš„æ­£å¼è®¢å•äº†ï¼Œå¦‚æœåªæ˜¯ä¸‹å•è¯·æ±‚ï¼Œä¸é€‚åˆæ”¾åˆ°MQï¼Œå†å–MQæ¶ˆæ¯ç”Ÿæˆè®¢å•ã€‚ä¸€æ–¹é¢ï¼Œç”¨æˆ·éœ€è¦åŠæ—¶åé¦ˆï¼›å¦ä¸€æ–¹é¢å¢åŠ å‡ºé”™å¯èƒ½ã€‚\n2. æ”¶é“¶ç³»ç»Ÿæœ‰å‡çº§ç¨‹åºï¼Œå¯ä»¥è‡ªåŠ¨ä¸‹å‘ä¿®æ”¹å’Œå‡çº§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641977011,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":254837,"user_name":"é£é£˜ï¼Œå¾ç‹¬æ€","can_delete":false,"product_type":"c1","uid":1131032,"ip_address":"","ucode":"4DF0E7DC22EE53","user_header":"https://static001.geekbang.org/account/avatar/00/11/42/18/edc1b373.jpg","comment_is_top":false,"comment_ctime":1603197455,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1603197455","product_id":100046301,"comment_content":"çœŸæ­£å®æˆ˜ï¼Œå¹²æ´»æ»¡æ»¡","like_count":0},{"had_liked":false,"id":234448,"user_name":"ï¼Œ","can_delete":false,"product_type":"c1","uid":1701867,"ip_address":"","ucode":"A5543C8DFEB198","user_header":"https://static001.geekbang.org/account/avatar/00/19/f7/eb/e7127bb8.jpg","comment_is_top":false,"comment_ctime":1594694051,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"1594694051","product_id":100046301,"comment_content":"      æˆ‘ä»¬çš„ç³»ç»Ÿé‡åˆ°è¿‡è¿™æ ·çš„é—®é¢˜:<br>      è¿™æ˜¯ä¸€ä¸ªå†…å®¹ç®¡ç†ç³»ç»Ÿ,å†…éƒ¨æ˜¯ä¸€ä¸ªéƒ¨ç½²äº†å››ä¸ªèŠ‚ç‚¹çš„é›†ç¾¤,æ¥å…¥å±‚ç”¨nginxåšè´Ÿè½½,è¯·æ±‚ä»£ç†çš„ç­–ç•¥ç”¨çš„hash,ç”¨æˆ·å¶å°”ä¼šæœ‰æƒé™æ–¹é¢çš„ä¿®æ”¹,åœ¨ä¿®æ”¹å®Œä¹‹å,æœ‰çš„ç”µè„‘ä¸Šæ˜¯ç”Ÿæ•ˆçš„,æœ‰çš„ç”µè„‘ä¸Šä¸ç”Ÿæ•ˆ<br>       ç»è¿‡æ’æŸ¥,å‘ç°ç³»ç»Ÿé‡Œæƒé™ç›¸å…³çš„å†…å®¹æ˜¯å¯åŠ¨æ—¶ä»æ•°æ®åº“åŠ è½½,å­˜å‚¨åœ¨å½“å‰å®ä¾‹çš„hashtableé‡Œ,ä¿®æ”¹æƒé™ä¹‹å,æ•°æ®åº“å’Œå½“å‰å®ä¾‹çš„hashtableå¾—åˆ°æ›´æ–°,å…¶ä»–å®ä¾‹çš„hashtableæ²¡èƒ½æ›´æ–°,åŒæ—¶ç”±äºnginxç”¨äº†hashçš„è¯·æ±‚åˆ†æ´¾ç­–ç•¥,æœ‰çš„æœºå™¨çš„è¯·æ±‚æ‰“åœ¨æ›´æ–°ä¹‹åçš„å®ä¾‹ä¸Š,æœ‰çš„æœºå™¨çš„è¯·æ±‚æ‰“åœ¨è€çš„å®ä¾‹ä¸Š,æ‰€ä»¥å¯¼è‡´æƒé™ä¿®æ”¹ä¸ç”Ÿæ•ˆ,è¿™æ˜¯ç”±äºæ²¡æœ‰åšåˆ°æœåŠ¡æ— çŠ¶æ€è€Œäº§ç”Ÿçš„é—®é¢˜","like_count":0,"discussions":[{"author":{"id":1111899,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f7/5b/d2e7c2c4.jpg","nickname":"æ—¶éšæ—¶ç°","note":"","ucode":"DA4D622FF84920","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579123,"discussion_content":"å¯ä»¥ç”¨session stickyæ¥è§£å†³å§ï¼Œç›¸åŒç”¨æˆ·idæ‰“åˆ°åç«¯åŒä¸€ä¸ªnginx","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657181863,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":227884,"user_name":"better","can_delete":false,"product_type":"c1","uid":1257750,"ip_address":"","ucode":"2B9BCCED753D7F","user_header":"https://static001.geekbang.org/account/avatar/00/13/31/16/f2269e73.jpg","comment_is_top":false,"comment_ctime":1592517344,"is_pvip":true,"replies":[{"id":"84606","content":"redisé›†ç¾¤æœ¬èº«çš„é«˜å¯ç”¨æ˜¯äº‘æœåŠ¡å•†æä¾›çš„ï¼ŒèƒŒåæ˜¯å¦sentinelæœºåˆ¶ä¸è‚¯å®šï¼Œæˆ–è€…è¿˜æœ‰å…¶ä»–æœºåˆ¶ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹åº†å‹","uid":"1268522","ctime":1592966091,"ip_address":"","comment_id":227884,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1592517344","product_id":100046301,"comment_content":"è€å¸ˆä½ å¥½ï¼Œæˆ‘çœ‹åˆ°ä½ åœ¨è¯„è®ºé‡Œå›å¤åˆ°ï¼Œä½ ä»¬redisç°åœ¨ç›´æ¥ä¹°äº‘çš„ç¼“å­˜æœåŠ¡ï¼ŒèƒŒåæ˜¯m&#47;sï¼Œé‚£é«˜å¯ç”¨è¿™å—ï¼Œä¹Ÿæ˜¯ç”±äº‘ä¸»æœºçš„ä¾›åº”å•†ç›´æ¥é…ç½®å¥½sentinelä¹ˆï¼Œè¿˜æ˜¯é«˜å¯ç”¨è¿™ä¹ˆä½ ä»¬æ˜¯æ€ä¹ˆåšçš„å‘¢","like_count":0,"discussions":[{"author":{"id":1268522,"avatar":"https://static001.geekbang.org/account/avatar/00/13/5b/2a/83c3cb2d.jpg","nickname":"ç‹åº†å‹","note":"","ucode":"90D8743C4A6C79","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":498818,"discussion_content":"redisé›†ç¾¤æœ¬èº«çš„é«˜å¯ç”¨æ˜¯äº‘æœåŠ¡å•†æä¾›çš„ï¼ŒèƒŒåæ˜¯å¦sentinelæœºåˆ¶ä¸è‚¯å®šï¼Œæˆ–è€…è¿˜æœ‰å…¶ä»–æœºåˆ¶ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592966091,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":206251,"user_name":"è‹LH","can_delete":false,"product_type":"c1","uid":1962654,"ip_address":"","ucode":"318CA11FC27B9F","user_header":"https://static001.geekbang.org/account/avatar/00/1d/f2/9e/7b6fcced.jpg","comment_is_top":false,"comment_ctime":1586829927,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1586829927","product_id":100046301,"comment_content":"æ­¤è·ç¦»å¾ˆè´´åˆå®é™…ï¼Œè°¢è°¢è€å¸ˆ","like_count":0},{"had_liked":false,"id":200942,"user_name":"è¿½å¿†ä¼¼æ°´å¹´å","can_delete":false,"product_type":"c1","uid":1160192,"ip_address":"","ucode":"C1D7C0DD7E7411","user_header":"https://static001.geekbang.org/account/avatar/00/11/b4/00/661fb98d.jpg","comment_is_top":false,"comment_ctime":1585696784,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1585696784","product_id":100046301,"comment_content":"æ„Ÿè°¢è€å¸ˆåˆ†äº«ï¼Œè¿™å‰åçš„å‡ èŠ‚è¯¾ç¨‹éƒ½å¾ˆæ£’ã€‚<br>è¯è¯´æˆ‘ä»¬å…¬å¸å°±æ˜¯å®Œå…¨çš„å•ç‚¹ï¼Œä¸€å°é˜¿é‡Œäº‘ Windows 2012 æœåŠ¡å™¨ï¼Œæ‰€æœ‰åº”ç”¨ã€æ•°æ®åº“éƒ½æ˜¯å•ç‚¹ï¼Œåªæ˜¯åšäº†å¿«ç…§ï¼Œç”¨æ¥åœ¨ç³»ç»Ÿå‡ºç°æ„å¤–æ•…éšœæ—¶è¦†ç›–é•œåƒã€‚<br>è‡³äºç›‘æ§ï¼Œå°±åªæœ‰é˜¿é‡Œäº‘è‡ªå¸¦çš„æœåŠ¡ï¼ŒåŒ…æ‹¬å¯¹ç³»ç»Ÿã€ç¡¬ä»¶å±‚é¢çš„ç›‘æ§ï¼Œä¸šåŠ¡å’ŒæŠ€æœ¯å±‚é¢æ˜¯æ²¡æœ‰çš„ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬ä¹‹åéœ€è¦è¡¥è¶³çš„çŸ­æ¿ã€‚","like_count":0},{"had_liked":false,"id":191462,"user_name":"image","can_delete":false,"product_type":"c1","uid":1039069,"ip_address":"","ucode":"A45BFF284F8933","user_header":"https://static001.geekbang.org/account/avatar/00/0f/da/dd/1e5e7b0c.jpg","comment_is_top":false,"comment_ctime":1584775325,"is_pvip":false,"replies":[{"id":"73396","content":"æˆ‘ä»¬éƒ¨ç½²åœ¨å…¬æœ‰äº‘ï¼Œä¹‹å‰æ˜¯è‡ªæ­çš„ä¸‰èŠ‚ç‚¹clusterï¼Œç°åœ¨ç›´æ¥ä¹°äº‘çš„ç¼“å­˜æœåŠ¡ï¼ŒèƒŒåæ˜¯m&#47;sã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹åº†å‹","uid":"1268522","ctime":1584786085,"ip_address":"","comment_id":191462,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1584775325","product_id":100046301,"comment_content":"è¯·æ•™ä¸€ä¸‹ï¼Œç”Ÿäº§ç¯å¢ƒä½¿ç”¨redisåšç¼“å­˜ï¼Œä¸€èˆ¬çš„éƒ¨ç½²æ¨¡å¼æ˜¯ä»€ä¹ˆï¼Ÿsentinelï¼Œclusterï¼Œ m&#47;sï¼Ÿ ","like_count":0,"discussions":[{"author":{"id":1268522,"avatar":"https://static001.geekbang.org/account/avatar/00/13/5b/2a/83c3cb2d.jpg","nickname":"ç‹åº†å‹","note":"","ucode":"90D8743C4A6C79","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488180,"discussion_content":"æˆ‘ä»¬éƒ¨ç½²åœ¨å…¬æœ‰äº‘ï¼Œä¹‹å‰æ˜¯è‡ªæ­çš„ä¸‰èŠ‚ç‚¹clusterï¼Œç°åœ¨ç›´æ¥ä¹°äº‘çš„ç¼“å­˜æœåŠ¡ï¼ŒèƒŒåæ˜¯m/sã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584786085,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":190987,"user_name":"Alex","can_delete":false,"product_type":"c1","uid":1024763,"ip_address":"","ucode":"F6B5C64BC99FB7","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a2/fb/94af9cf1.jpg","comment_is_top":false,"comment_ctime":1584716118,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584716118","product_id":100046301,"comment_content":"é™æµã€è´Ÿè½½ã€åˆ†æµã€ç¼“å­˜ã€å¼‚æ­¥ã€ä»¿çœŸã€ç›‘æ§éƒ½ä¸Šäº†æ»¡æ»¡çš„å¹²è´§","like_count":0}]}