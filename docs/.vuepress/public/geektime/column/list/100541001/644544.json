{"id":644544,"title":"07ï½œæ–‡æœ¬èšç±»ä¸æ‘˜è¦ï¼Œè®©AIå¸®ä½ åšä¸ªæ€»ç»“","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯å¾æ–‡æµ©ã€‚</p><p>ä¸Šä¸€è®²é‡Œï¼Œæˆ‘ä»¬ç”¨ä¸Šäº†æœ€æ–°çš„ChatGPTçš„APIï¼Œæ³¨å†Œå¥½äº†HuggingFaceçš„è´¦å·ï¼Œä¹ŸæŠŠæˆ‘ä»¬çš„èŠå¤©æœºå™¨äººéƒ¨ç½²äº†å‡ºå»ã€‚å¸Œæœ›é€šè¿‡è¿™ä¸ªè¿‡ç¨‹ï¼Œä½ å¯¹å®é™…çš„åº”ç”¨å¼€å‘è¿‡ç¨‹å·²ç»æœ‰äº†å……è¶³çš„ä½“éªŒã€‚é‚£ä¹ˆè¿™ä¸€è®²é‡Œï¼Œæˆ‘ä»¬ä¼šå›åˆ°OpenAIçš„å„ä¸ªæ¥å£èƒ½å¤Ÿæä¾›çš„èƒ½åŠ›ã€‚æˆ‘ä»¬åˆ†åˆ«çœ‹çœ‹æ€ä¹ˆé€šè¿‡Embeddingè¿›è¡Œæ–‡æœ¬èšç±»ï¼Œæ€ä¹ˆåˆ©ç”¨æç¤ºè¯­ï¼ˆPromptï¼‰åšæ–‡æœ¬çš„æ€»ç»“ã€‚</p><h2>åŸºäºEmbeddingå‘é‡è¿›è¡Œæ–‡æœ¬èšç±»</h2><p>æˆ‘å…ˆç»™ä¸å¤ªäº†è§£æŠ€æœ¯çš„åŒå­¦ç®€å•ç§‘æ™®ä¸€ä¸‹ä»€ä¹ˆå«åšæ–‡æœ¬èšç±»ï¼Œæ–‡æœ¬èšç±»å°±æ˜¯æŠŠå¾ˆå¤šæ²¡æœ‰æ ‡æ³¨è¿‡çš„æ–‡æœ¬ï¼Œæ ¹æ®å®ƒä»¬ä¹‹é—´çš„ç›¸ä¼¼åº¦ï¼Œè‡ªåŠ¨åœ°åˆ†æˆå‡ ç±»ã€‚åŸºäºGPTç³»åˆ—çš„æ¨¡å‹è¿›è¡Œæ–‡æœ¬èšç±»å¾ˆç®€å•ï¼Œå› ä¸ºæˆ‘ä»¬å¯ä»¥é€šè¿‡EmbeddingæŠŠæ–‡æœ¬å˜æˆä¸€æ®µå‘é‡ã€‚è€Œå¯¹äºå‘é‡æˆ‘ä»¬è‡ªç„¶å¯ä»¥ç”¨ä¸€äº›ç®€å•çš„èšç±»ç®—æ³•ï¼Œæ¯”å¦‚æˆ‘ä»¬é‡‡ç”¨æœ€ç®€å•çš„K-Meansç®—æ³•å°±å¯ä»¥äº†ã€‚</p><p>è¿™ä¸€æ¬¡ï¼Œæˆ‘ä»¬é€‰ç”¨çš„æ•°æ®é›†ï¼Œæ˜¯å¾ˆå¤šè€çš„æœºå™¨å­¦ä¹ æ•™ç¨‹é‡Œå¸¸ç”¨çš„20 newsgroupsæ•°æ®é›†ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªå¸¦äº†æ ‡æ³¨åˆ†å¥½ç±»çš„è‹±æ–‡æ–°é—»ç»„çš„æ•°æ®é›†ã€‚è¿™ä¸ªæ•°æ®é›†ï¼Œå…¶å®ä¸æ˜¯æœ€è‡ªç„¶çš„è‡ªç„¶è¯­è¨€ï¼Œé‡Œé¢çš„æ•°æ®æ˜¯ç»è¿‡äº†é¢„å¤„ç†çš„ï¼Œæ¯”å¦‚å»é™¤äº†æ ‡ç‚¹ç¬¦å·ã€åœç”¨è¯ç­‰ç­‰ã€‚æˆ‘ä»¬æ­£å¥½å¯ä»¥æ‹¿æ¥çœ‹çœ‹ï¼Œé¢å¯¹è¿™æ ·å…¶å®ä¸å¤ªâ€œè‡ªç„¶è¯­è¨€â€çš„æ•°æ®ï¼ŒOpenAIçš„GPTç³»åˆ—æ¨¡å‹å¤„ç†çš„æ•ˆæœæ€ä¹ˆæ ·ã€‚</p><!-- [[[read_end]]] --><p>é¦–å…ˆï¼Œæˆ‘ä»¬å…ˆé€šè¿‡scikit-learnè¿™ä¸ªPythonåº“æ¥æ‹¿åˆ°æ•°æ®ï¼Œæ•°æ®é›†å°±å†…ç½®åœ¨è¿™ä¸ªåº“é‡Œé¢ã€‚scikit-learnä¹Ÿæ˜¯éå¸¸å¸¸ç”¨çš„ä¸€ä¸ªæœºå™¨å­¦ä¹ åº“ï¼Œæˆ‘ä»¬ç›´æ¥æŠŠæ•°æ®ä¸‹è½½ä¸‹æ¥ï¼Œå­˜å‚¨æˆCSVæ–‡ä»¶ã€‚å¯¹åº”çš„ä»£ç åœ¨ä¸‹é¢å¯ä»¥çœ‹åˆ°ã€‚</p><pre><code class=\"language-python\">from sklearn.datasets import fetch_20newsgroups\nimport pandas as pd\n\ndef twenty_newsgroup_to_csv():\n    newsgroups_train = fetch_20newsgroups(subset='train', remove=('headers', 'footers', 'quotes'))\n\n    df = pd.DataFrame([newsgroups_train.data, newsgroups_train.target.tolist()]).T\n    df.columns = ['text', 'target']\n\n    targets = pd.DataFrame( newsgroups_train.target_names, columns=['title'])\n\n    out = pd.merge(df, targets, left_on='target', right_index=True)\n    out.to_csv('20_newsgroup.csv', index=False)\n    \ntwenty_newsgroup_to_csv()\n</code></pre><p>æ¥ç€ï¼Œæˆ‘ä»¬è¦å¯¹æ•°æ®åšé¢„å¤„ç†ï¼Œæˆ‘ä»¬éœ€è¦è¿‡æ»¤æ‰æ•°æ®é‡Œé¢æœ‰äº›æ–‡æœ¬æ˜¯ç©ºçš„æƒ…å†µã€‚ä»¥åŠå’Œæˆ‘ä»¬å‰é¢è¿›è¡Œæ–‡æœ¬åˆ†ç±»ä¸€æ ·ï¼ŒæŠŠTokenæ•°é‡å¤ªå¤šçš„ç»™è¿‡æ»¤æ‰ã€‚</p><pre><code class=\"language-python\">from openai.embeddings_utils import get_embeddings\nimport openai, os, tiktoken, backoff\n\nopenai.api_key = os.environ.get(\"OPENAI_API_KEY\")\nembedding_model = \"text-embedding-ada-002\"\nembedding_encoding = \"cl100k_base\"  # this the encoding for text-embedding-ada-002\nbatch_size = 2000\nmax_tokens = 8000  # the maximum for text-embedding-ada-002 is 8191\n\ndf = pd.read_csv('20_newsgroup.csv')\nprint(\"Number of rows before null filtering:\", len(df))\ndf = df[df['text'].isnull() == False]\nencoding = tiktoken.get_encoding(embedding_encoding)\n\ndf[\"n_tokens\"] = df.text.apply(lambda x: len(encoding.encode(x)))\nprint(\"Number of rows before token number filtering:\", len(df))\ndf = df[df.n_tokens &lt;= max_tokens]\nprint(\"Number of rows data used:\", len(df))\n</code></pre><p>è¾“å‡ºç»“æœï¼š</p><pre><code class=\"language-python\">Number of rows before null filtering: 11314\nNumber of rows before token number filtering: 11096\nNumber of rows data used: 11044\n</code></pre><p>ç„¶åï¼Œæˆ‘ä»¬ä»ç„¶æ˜¯é€šè¿‡Embeddingçš„æ¥å£ï¼Œæ‹¿åˆ°æ–‡æœ¬çš„Embeddingå‘é‡ï¼Œç„¶åæŠŠæ•´ä¸ªæ•°æ®å­˜å‚¨æˆparquetæ–‡ä»¶ã€‚</p><pre><code class=\"language-python\">@backoff.on_exception(backoff.expo, openai.error.RateLimitError)\ndef get_embeddings_with_backoff(prompts, engine):\n    embeddings = []\n    for i in range(0, len(prompts), batch_size):\n        batch = prompts[i:i+batch_size]\n        embeddings += get_embeddings(list_of_text=batch, engine=engine)\n    return embeddings\n\nprompts = df.text.tolist()\nprompt_batches = [prompts[i:i+batch_size] for i in range(0, len(prompts), batch_size)]\n\nembeddings = []\nfor batch in prompt_batches:\n    batch_embeddings = get_embeddings_with_backoff(prompts=batch, engine=embedding_model)\n    embeddings += batch_embeddings\n\ndf[\"embedding\"] = embeddings\ndf.to_parquet(\"data/20_newsgroup_with_embedding.parquet\", index=False)\n</code></pre><p>è¿™ä¸€éƒ¨åˆ†ä»£ç åŸºæœ¬å’Œå‰é¢æˆ‘ä»¬åšæ–‡æœ¬åˆ†ç±»ä¸€æ ·ï¼Œæˆ‘å°±ä¸å†åšè¯¦ç»†è®²è§£äº†ã€‚ä¸ç†è§£ä»£ç ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆå†™çš„åŒå­¦ï¼Œå¯ä»¥å»çœ‹å‰é¢çš„<a href=\"http:/time.geekbang.org/column/article/643889\">ç¬¬ 05 è®²</a>ã€‚</p><p>é€šå¸¸ï¼Œåœ¨ä½¿ç”¨Jupyter Notebookæˆ–è€…Pythonå»åšæœºå™¨å­¦ä¹ ç±»çš„ä»»åŠ¡çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¾€å¾€ä¼šæŠŠä¸€äº›ä¸­é—´æ­¥éª¤çš„æ•°æ®ç»“æœç»™å­˜ä¸‹æ¥ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å¯ä»¥é¿å…åœ¨åé¢æ­¥éª¤å†™äº†Bugæˆ–è€…å‚æ•°è®¾é”™çš„æ—¶å€™ä»å¤´å¼€å§‹ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°±æŠŠåŸå§‹æ•°æ®ï¼Œä»¥åŠEmbeddingå¤„ç†å®Œçš„æ•°æ®éƒ½å­˜äº†ä¸€ä»½ã€‚è¿™æ ·ï¼Œå¦‚æœåé¢çš„èšç±»ç¨‹åºè¦åšä¿®æ”¹ï¼Œæˆ‘ä»¬ä¸éœ€è¦å†èŠ±é’±è®©OpenAIç»™æˆ‘ä»¬ç®—ä¸€æ¬¡Embeddingäº†ã€‚</p><p>æ¥ç€ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç”¨K-Meansç®—æ³•æ¥è¿›è¡Œèšç±»äº†ã€‚å› ä¸ºåŸæœ¬çš„æ•°æ®æ¥è‡ª20ä¸ªä¸åŒçš„æ–°é—»ç»„ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¹Ÿä¸å¦¨å°±èšåˆæˆ20ä¸ªç±»ï¼Œæ­£å¥½æˆ‘ä»¬çœ‹çœ‹è‡ªåŠ¨èšç±»å‡ºæ¥çš„åˆ†ç±»ä¼šä¸ä¼šå°±å’ŒåŸå§‹åˆ†ç±»å·®ä¸å¤šã€‚</p><pre><code class=\"language-python\">import numpy as np\nfrom sklearn.cluster import KMeans\n\nembedding_df = pd.read_parquet(\"data/20_newsgroup_with_embedding.parquet\")\n\nmatrix = np.vstack(embedding_df.embedding.values)\nnum_of_clusters = 20\n\nkmeans = KMeans(n_clusters=num_of_clusters, init=\"k-means++\", n_init=10, random_state=42)\nkmeans.fit(matrix)\nlabels = kmeans.labels_\nembedding_df[\"cluster\"] = labels\n</code></pre><p>èšç±»çš„ä»£ç éå¸¸ç®€å•ï¼Œæˆ‘ä»¬é€šè¿‡NumPyçš„stackå‡½æ•°ï¼ŒæŠŠæ‰€æœ‰çš„Embeddingæ”¾åˆ°ä¸€ä¸ªçŸ©é˜µé‡Œé¢ï¼Œè®¾ç½®ä¸€ä¸‹è¦èšåˆå‡ºæ¥çš„ç±»çš„æ•°é‡ï¼Œç„¶åè¿è¡Œä¸€ä¸‹K-Meansç®—æ³•çš„fitå‡½æ•°ï¼Œå°±å¥½äº†ã€‚ä¸è¿‡ï¼Œèšç±»å®Œï¼Œæˆ‘ä»¬æ€ä¹ˆå»çœ‹å®ƒèšç±»çš„ç»“æœæ˜¯ä¸æ˜¯åˆé€‚å‘¢ï¼Ÿæ¯ä¸ªèšåˆå‡ºæ¥çš„ç±»ä»£è¡¨ä»€ä¹ˆå‘¢ï¼Ÿ</p><p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬çš„æ•°æ®ä¹‹å‰å°±æœ‰åˆ†ç»„ã€‚é‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥ç”¨ä¸€ä¸ªå–å·§çš„æ€è·¯ã€‚æˆ‘ä»¬ç»Ÿè®¡ä¸€ä¸‹èšç±»ä¹‹åçš„æ¯ä¸ªç±»æœ‰å¤šå°‘æ¡å„ä¸ªnewsgroupsåˆ†ç»„çš„æ•°æ®ã€‚ç„¶åçœ‹çœ‹è¿™äº›æ•°æ®é‡Œé¢ï¼Œæ’åç¬¬ä¸€çš„åˆ†ç»„æ˜¯ä»€ä¹ˆã€‚å¦‚æœæˆ‘ä»¬èšç±»èšåˆå‡ºæ¥çš„ç±»ï¼Œéƒ½æ˜¯ä»æŸä¸€ä¸ªnewsgroupåˆ†ç»„å‡ºæ¥çš„æ–‡ç« ï¼Œé‚£ä¹ˆè¯´æ˜è¿™ä¸ªèšåˆå‡ºæ¥çš„ç±»å…¶å®å°±å’Œé‚£ä¸ªåˆ†ç»„çš„å†…å®¹å·®ä¸å¤šã€‚ä½¿ç”¨è¿™ä¸ªæ€è·¯çš„ä»£ç ï¼Œæˆ‘ä¹Ÿæ”¾åœ¨ä¸‹é¢äº†ï¼Œæˆ‘ä»¬ä¸€èµ·æ¥çœ‹ä¸€çœ‹ã€‚</p><pre><code class=\"language-python\"># ç»Ÿè®¡æ¯ä¸ªclusterçš„æ•°é‡\nnew_df = embedding_df.groupby('cluster')['cluster'].count().reset_index(name='count')\n\n# ç»Ÿè®¡è¿™ä¸ªclusteré‡Œæœ€å¤šçš„åˆ†ç±»çš„æ•°é‡\ntitle_count = embedding_df.groupby(['cluster', 'title']).size().reset_index(name='title_count')\nfirst_titles = title_count.groupby('cluster').apply(lambda x: x.nlargest(1, columns=['title_count']))\nfirst_titles = first_titles.reset_index(drop=True)\nnew_df = pd.merge(new_df, first_titles[['cluster', 'title', 'title_count']], on='cluster', how='left')\nnew_df = new_df.rename(columns={'title': 'rank1', 'title_count': 'rank1_count'})\n\n# ç»Ÿè®¡è¿™ä¸ªclusteré‡Œç¬¬äºŒå¤šçš„åˆ†ç±»çš„æ•°é‡\nsecond_titles = title_count[~title_count['title'].isin(first_titles['title'])]\nsecond_titles = second_titles.groupby('cluster').apply(lambda x: x.nlargest(1, columns=['title_count']))\nsecond_titles = second_titles.reset_index(drop=True)\nnew_df = pd.merge(new_df, second_titles[['cluster', 'title', 'title_count']], on='cluster', how='left')\nnew_df = new_df.rename(columns={'title': 'rank2', 'title_count': 'rank2_count'})\nnew_df['first_percentage'] = (new_df['rank1_count'] / new_df['count']).map(lambda x: '{:.2%}'.format(x))\n# å°†ç¼ºå¤±å€¼æ›¿æ¢ä¸º 0\nnew_df.fillna(0, inplace=True)\n# è¾“å‡ºç»“æœ\nfrom IPython.display import display\ndisplay(new_df)\n</code></pre><p>è¿™ä¸ªä»£ç ä¹Ÿä¸éš¾å†™ï¼Œæˆ‘ä»¬å¯ä»¥åˆ†æˆå‡ æ­¥æ¥åšã€‚</p><ol>\n<li>æˆ‘ä»¬é€šè¿‡groupbyå¯ä»¥æŠŠä¹‹å‰çš„DataFrameæŒ‰ç…§clusterè¿›è¡Œèšåˆï¼Œç»Ÿè®¡æ¯ä¸ªclusteré‡Œé¢æ•°æ®çš„æ¡æ•°ã€‚</li>\n<li>è€Œè¦ç»Ÿè®¡æŸä¸€ä¸ªclusteré‡Œé¢æ’åç¬¬ä¸€çš„åˆ†ç»„åç§°å’Œæ•°é‡çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡groupbyï¼ŒæŠŠæ•°æ®æŒ‰ç…§ cluster + title çš„æ–¹å¼èšåˆã€‚</li>\n<li>å†é€šè¿‡ cluster èšåˆåï¼Œä½¿ç”¨ x.nlargest å‡½æ•°æ‹¿åˆ°é‡Œé¢æ•°é‡æ’åç¬¬ä¸€çš„åˆ†ç»„çš„åå­—å’Œæ•°é‡ã€‚</li>\n<li>ä¸ºäº†æ–¹ä¾¿åˆ†æï¼Œæˆ‘è¿˜æŠŠæ•°æ®é‡Œæ’åç¬¬ä¸€çš„å»æ‰ä¹‹åï¼Œåˆç»Ÿè®¡äº†ä¸€ä¸‹æ’åç¬¬äºŒçš„åˆ†ç»„ï¼Œæ”¾åœ¨ä¸€èµ·çœ‹ä¸€ä¸‹ã€‚</li>\n</ol><p>è¾“å‡ºç»“æœï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/f6/0c/f66f45d30edfb11a3f97a964684bd00c.png?wh=781x496\" alt=\"å›¾ç‰‡\"></p><p>ä»è¿™ä¸ªç»Ÿè®¡æ•°æ®çš„ç»“æœæ¥çœ‹ï¼Œå¤§éƒ¨åˆ†èšç±»çš„ç»“æœï¼Œèƒ½å¤Ÿå¯¹åº”åˆ°æŸä¸€ä¸ªåŸæœ¬æ–°é—»ç»„çš„åˆ†ç±»ã€‚æ¯”å¦‚ï¼Œcluster 0å°±æœ‰93.98%æ¥è‡ª comp.windows.x è¿™ä¸ªåˆ†ç±»ã€‚åœ¨20ä¸ªèšåˆå‡ºæ¥çš„ç±»é‡Œé¢ï¼Œæœ‰10ä¸ªç±»80%æ¥è‡ªåŸæœ¬newsgroupçš„æŸä¸€ä¸ªåˆ†ç±»ã€‚å‰©ä¸‹çš„åˆ†ç±»ä¸­ï¼Œæ¯”å¦‚cluster 2ï¼Œå‰ä¸¤ä¸ªåˆ†ç»„åŠ åœ¨ä¸€èµ·å äº†75%ï¼Œè¿™ä¸¤ä¸ªåˆ†ç»„çš„åç§°åˆ†åˆ«æ˜¯  pc.hardware  å’Œ mac.hardware å…¶å®éƒ½æ˜¯èŠç”µè„‘ç¡¬ä»¶çš„ï¼Œä¸è¿‡æ˜¯newsgroupsé‡ŒæŒ‰ç…§ç¡¬ä»¶ä¸åŒåšäº†åŒºåˆ†è€Œå·²ã€‚æˆ‘ä»¬åªæœ‰3ä¸ªç±»ï¼Œå¯¹åº”çš„åˆ†ç»„æ¯”è¾ƒåˆ†æ•£ï¼Œåˆ†åˆ«æ˜¯cluster 6ã€9å’Œ19ã€‚</p><p>ä»è¿™ä¸ªç»“æœæ¥çœ‹ï¼Œæˆ‘ä»¬ç›´æ¥ä½¿ç”¨æ–‡æœ¬çš„Embeddingæ¥è¿›è¡Œèšç±»ï¼Œæ•ˆæœè¿˜ç®—ä¸é”™ã€‚</p><h2>ä½¿ç”¨æç¤ºè¯­å¯¹æ–‡æœ¬è¿›è¡Œæ€»ç»“</h2><p>ä¸è¿‡å•Šï¼Œåœ¨çœŸå®çš„åº”ç”¨åœºæ™¯é‡Œï¼Œæˆ‘ä»¬æ‹¿æ¥è¿›è¡Œæ–‡æœ¬èšç±»çš„æ•°æ®ï¼Œå¤šåŠå¹¶æ²¡æœ‰ä»€ä¹ˆåˆ†ç»„ä¿¡æ¯ã€‚è¿‡å»ï¼Œæˆ‘ä»¬è¦å»ç»™èšåˆå‡ºæ¥çš„ç±»å–ä¸€ä¸ªåå­—ï¼Œå¾€å¾€åªèƒ½é€‰æ‹©çœ‹çœ‹å„ä¸ªç±»é‡Œé¢çš„æ–‡æœ¬æ˜¯ä»€ä¹ˆå†…å®¹ã€‚é æˆ‘ä»¬çš„â€œäººè„‘â€ç»™â€œç”µè„‘â€åšå‡ºçš„é€‰æ‹©èµ·ä¸€ä¸ªæˆ‘ä»¬è§‰å¾—åˆé€‚çš„åå­—ã€‚æ¯”å¦‚ï¼Œå¯¹åº”åˆ°è¿™é‡Œçš„20ä¸ªåˆ†ç±»çš„æ•°æ®ï¼Œå¾€å¾€æˆ‘ä»¬åªèƒ½æ¯ä¸ªæŒ‘ä¸Šå‡ ç¯‡å†…å®¹ï¼Œäººå·¥è¯»ä¸€éï¼Œå†å–ä¸€ä¸ªåå­—ã€‚è€Œå¦‚æœä½ è‹±æ–‡ä¸å¤ªå¥½ï¼Œé‚£å¯å°±å¤ªç—›è‹¦äº†ã€‚</p><p>ä¸è¿‡ï¼Œæ—¢ç„¶æœ‰äº†OpenAIçš„Completionæ¥å£ï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥è®©AIç»™æˆ‘ä»¬èšåˆå‡ºæ¥çš„ç±»èµ·ä¸€ä¸ªåå­—ã€‚æˆ‘ä»¬å¯ä»¥éšæœºåœ¨æ¯ä¸ªèšåˆå‡ºæ¥çš„ç±»é‡Œé¢ï¼ŒæŒ‘ä¸Š3ï½5æ¡ï¼Œç„¶åè¯·AIæ€»ç»“ä¸€ä¸‹è¯¥å–ä»€ä¹ˆåå­—ï¼Œç„¶åå†æŒ‘ä¸€ä¸¤æ¡æ–‡æœ¬è®©AIç»™æˆ‘ä»¬ç¿»è¯‘æˆä¸­æ–‡ï¼Œçœ‹çœ‹åå­—å–çš„æ˜¯ä¸æ˜¯åˆç†ã€‚</p><pre><code class=\"language-python\">items_per_cluster = 10\nCOMPLETIONS_MODEL = \"text-davinci-003\"\n\nfor i in range(num_of_clusters):\n    cluster_name = new_df[new_df.cluster == i].iloc[0].rank1\n    print(f\"Cluster {i}, Rank 1: {cluster_name}, Theme:\", end=\" \")\n\n    content = \"\\n\".join(\n        embedding_df[embedding_df.cluster == i].text.sample(items_per_cluster, random_state=42).values\n    )\n    response = openai.Completion.create(\n        model=COMPLETIONS_MODEL,\n        prompt=f'''æˆ‘ä»¬æƒ³è¦ç»™ä¸‹é¢çš„å†…å®¹ï¼Œåˆ†ç»„æˆæœ‰æ„ä¹‰çš„ç±»åˆ«ï¼Œä»¥ä¾¿æˆ‘ä»¬å¯ä»¥å¯¹å…¶è¿›è¡Œæ€»ç»“ã€‚è¯·æ ¹æ®ä¸‹é¢è¿™äº›å†…å®¹çš„å…±åŒç‚¹ï¼Œæ€»ç»“ä¸€ä¸ª50ä¸ªå­—ä»¥å†…çš„æ–°é—»ç»„çš„åç§°ã€‚æ¯”å¦‚ â€œPCç¡¬ä»¶â€\\n\\nå†…å®¹:\\n\"\"\"\\n{content}\\n\"\"\"æ–°é—»ç»„åç§°ï¼š''',\n        temperature=0,\n        max_tokens=100,\n        top_p=1,\n    )\n    print(response[\"choices\"][0][\"text\"].replace(\"\\n\", \"\"))\n</code></pre><p>æˆ‘ä»¬å¯ä»¥ç”¨è¿™æ ·ä¸€æ®µä»£ç é€šè¿‡Completionæ¥å£æ¥å®ç°æˆ‘ä»¬çš„éœ€æ±‚ã€‚</p><ol>\n<li>æˆ‘ä»¬éšæœºä»èšç±»ç»“æœé‡Œçš„æ¯ä¸€ä¸ªç±»é‡Œé¢ï¼Œéƒ½æŒ‘ä¸Š10æ¡è®°å½•ï¼Œç„¶ååˆ†è¡Œå°†è¿™äº›è®°å½•æ‹¼åœ¨ä¸€èµ·ã€‚</li>\n<li>ç„¶åï¼Œæˆ‘ä»¬ç»™AIè¿™æ ·ä¸€æ®µæç¤ºè¯­ï¼Œå‘Šè¯‰AIè¿™äº›å†…å®¹æ¥è‡ªæ–°é—»ç»„ï¼Œè¯·AIæ ¹æ®å®ƒä»¬çš„å…±æ€§ç»™è¿™äº›æ–°é—»ç»„çš„å†…å®¹å–ä¸€ä¸ª50ä¸ªå­—ä»¥å†…çš„åå­—ã€‚</li>\n<li>è¾“å‡ºçš„å†…å®¹ï¼Œæˆ‘ä»¬ç”¨Clusterï¼ŒClusteré‡ŒåŸå…ˆæ’åç¬¬ä¸€çš„åˆ†ç»„è‹±æ–‡ï¼Œä»¥åŠAIç»™å‡ºçš„æ–°é—»ç»„åç§°ï¼Œå¯¹åº”çš„è¾“å‡ºç»“æœåœ¨ä¸‹é¢ã€‚</li>\n</ol><p>è¾“å‡ºç»“æœï¼š</p><pre><code class=\"language-python\">Cluster 0, Rank 1: comp.windows.x, Theme: Xlibç¼–ç¨‹\nCluster 1, Rank 1: sci.space, Theme: å¤ªç©ºæŠ€æœ¯ä¸èˆªç©º\nCluster 2, Rank 1: comp.sys.ibm.pc.hardware, Theme: PCç¡¬ä»¶ä¸ç³»ç»Ÿ\nCluster 3, Rank 1: rec.sport.hockey, Theme: æ¬§æ´²å†°çƒvsåŒ—ç¾å†°çƒ\nCluster 4, Rank 1: talk.politics.misc, Theme: ç¤¾ä¼šè§‚ç‚¹ä¸è‡ªç”±\nCluster 5, Rank 1: rec.autos, Theme: æ±½è½¦ç¡¬ä»¶\nCluster 6, Rank 1: rec.motorcycles, Theme: æ•°å­¦ä¸æ–‡åŒ–å†²å‡»\nCluster 7, Rank 1: comp.os.ms-windows.misc, Theme: PCè½¯ä»¶ä¸ç¡¬ä»¶\nCluster 8, Rank 1: talk.politics.mideast, Theme: â€œç©†æ–¯æ—å¤§å± æ€â€\nCluster 9, Rank 1: comp.os.ms-windows.misc, Theme: ç§‘æŠ€äº§å“\"\"\"\nCluster 10, Rank 1: talk.politics.guns, Theme: æªæ”¯ç®¡åˆ¶ä¸å®‰å…¨\nCluster 11, Rank 1: comp.graphics, Theme: è®¡ç®—æœºç¼–ç¨‹ä¸ç¡¬ä»¶\nCluster 12, Rank 1: rec.motorcycles, Theme: éª‘è¡Œå®‰å…¨ä¸æŠ€å·§\nCluster 13, Rank 1: soc.religion.christian, Theme: å®—æ•™ä¿¡ä»°ä¸å®è·µ\nCluster 14, Rank 1: rec.sport.baseball, Theme: æ£’çƒè”ç›Ÿ\nCluster 15, Rank 1: misc.forsale, Theme: è´­ç‰©ä¼˜æƒ å’Œå‡ºå”®\nCluster 16, Rank 1: sci.crypt, Theme: å…³äºåŠ å¯†æ”¿ç­–çš„è®¨è®º\nCluster 17, Rank 1: sci.electronics, Theme: ç”µå­è®¾å¤‡æŠ€æœ¯\nCluster 18, Rank 1: sci.med, Theme: è¯ç‰©å’Œç–¾ç—…\nCluster 19, Rank 1: sci.electronics, Theme: ç”µå­é‚®ä»¶ä½¿ç”¨è€…ç ”ç©¶\n</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œæœºå™¨ç»™å‡ºçš„ä¸­æ–‡åˆ†ç±»åç§°ï¼Œå¤§éƒ¨åˆ†æ˜¯åˆç†çš„ã€‚æˆ‘ä»¬è¿˜å¯ä»¥æŒ‘ä¸€äº›é‡Œé¢çš„æ–‡æœ¬å†…å®¹ï¼Œçœ‹çœ‹å®ƒä»¬çš„ä¸­æ–‡ç¿»è¯‘æ˜¯ä¸æ˜¯å’Œä¸Šé¢å–çš„åå­—æ˜¯ä¸€è‡´çš„ã€‚ç¿»è¯‘çš„ä»£ç å’Œä¸Šé¢ç±»ä¼¼ï¼Œå°‘æ•°çš„å‡ ä¸ªå·®åˆ«æ˜¯ï¼š</p><ol>\n<li>æˆ‘ä»¬åœ¨æ¯ä¸ªåˆ†ç±»çš„æŠ½æ ·æ•°æ®é‡Œåªæ‰¾äº†1æ¡ï¼Œè€Œä¸æ˜¯æ€»ç»“æ—¶å€™é€‰çš„10æ¡ã€‚</li>\n<li>æˆ‘ä»¬é™åˆ¶äº†è¿™æ®µæ–‡æœ¬çš„Tokenæ•°é‡ä¸è¶…è¿‡100ä¸ªï¼Œå…å¾—å¤ªå åœ°æ–¹ã€‚</li>\n<li>è¾“å‡ºçš„å†…å®¹æˆ‘ä»¬æ”¾å¤§äº†å­—æ•°åˆ°500å­—ï¼Œç¡®ä¿ç¿»è¯‘èƒ½æä¾›è¶³å¤Ÿçš„å†…å®¹ã€‚</li>\n</ol><pre><code class=\"language-python\">items_per_cluster = 1\nCOMPLETIONS_MODEL = \"text-davinci-003\"\n\nfor i in range(num_of_clusters):\n    cluster_name = new_df[new_df.cluster == i].iloc[0].rank1\n    print(f\"Cluster {i}, Rank 1: {cluster_name}, æŠ½æ ·ç¿»è¯‘:\", end=\" \")\n\n    content = \"\\n\".join(\n        embedding_df[(embedding_df.cluster == i) &amp; (embedding_df.n_tokens &gt; 100)].text.sample(items_per_cluster, random_state=42).values\n    )\n    response = openai.Completion.create(\n        model=COMPLETIONS_MODEL,\n        prompt=f'''è¯·æŠŠä¸‹é¢çš„å†…å®¹ç¿»è¯‘æˆä¸­æ–‡\\n\\nå†…å®¹:\\n\"\"\"\\n{content}\\n\"\"\"ç¿»è¯‘ï¼š''',\n        temperature=0,\n        max_tokens=2000,\n        top_p=1,\n    )\n    print(response[\"choices\"][0][\"text\"].replace(\"\\n\", \"\"))\n</code></pre><p>è¾“å‡ºç»“æœï¼š</p><pre><code class=\"language-python\">Cluster 0, Rank 1: comp.windows.x, æŠ½æ ·ç¿»è¯‘: æ²¡æœ‰å®é™…æ‰§è¡Œå®ƒï¼Ÿä¸çŸ¥æ€ä¹ˆå›äº‹ï¼Œæˆ‘çš„ä¸€ä¸ªxterminalç”¨æˆ·ä½¿å¾—åªè¦ç‚¹å‡»é¼ æ ‡å³é”®ï¼Œå°±ä¼šè‡ªåŠ¨æ€æ­»æ‰€æœ‰å®¢æˆ·ç«¯-å“¦ï¼Œæˆ‘çš„ï¼š-(è°¢è°¢ï¼ŒFish\nCluster 1, Rank 1: sci.space, æŠ½æ ·ç¿»è¯‘: éŸ¦æ©Â·é©¬æ£®å’Œä»–çš„å›¢ä¼™åœ¨é˜¿æ‹‰å·´é©¬å·å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿæˆ‘è¿˜å¬è¯´æœ‰ä¸€ä¸ªæœªç»è¯å®çš„è°£è¨€ï¼Œå³èˆªç©ºå¤§ä½¿ä»¬å·²ç»æ¶ˆå¤±äº†ã€‚æœ‰å…¶ä»–äººå¯ä»¥è¯å®å—ï¼Ÿ\nCluster 2, Rank 1: comp.sys.ibm.pc.hardware, æŠ½æ ·ç¿»è¯‘: æˆ‘æ€€ç–‘è¿™ä¸æ˜¯ä¸€ä¸ªç‰¹å®šäºQuadraçš„é—®é¢˜ã€‚å»å¹´æˆ‘ä¸å¾—ä¸æ”¾å¼ƒæˆ‘â€œå¤è€â€çš„Bernoulli 20ï¼ˆæ¯ä¸ªç£å¸¦çš„ä»·æ ¼å¤§çº¦æ˜¯90ç¾å…ƒï¼Œä½¿æ•´ä¸ªäº‹æƒ…çš„ä»·å€¼è¶…è¿‡æˆ‘çš„æ•´ä¸ªç”µè„‘;ï¼‰ã€‚Ocean Microsystemsçš„æŠ€æœ¯æ”¯æŒäººå‘˜å»ºè®®å¯ä»¥ä½¿ç”¨ä¸€äº›ç¬¬ä¸‰æ–¹é©±åŠ¨ç¨‹åºæ¥è§£å†³è¿™ä¸ªé—®é¢˜ - åœ¨æˆ‘çš„æƒ…å†µä¸‹ï¼Œç£å¸¦æ— æ³•æ ¼å¼åŒ–/æŒ‚è½½/åˆ†åŒºç”¨äºA / UXã€‚\nCluster 3, Rank 1: rec.sport.hockey, æŠ½æ ·ç¿»è¯‘: æˆ‘ç›¸ä¿¡é‚£æ˜¯4-1ã€‚ç½—å¾·Â·å¸ƒæ—é“Â·é˜¿è«å°”åœ¨ç¬¬ä¸‰èŠ‚19.59æ—¶åˆ†æ”»å…¥ä¸€çƒã€‚\nCluster 4, Rank 1: talk.politics.misc, æŠ½æ ·ç¿»è¯‘: ä¸ºäº†ç¡®ä¿æ¯ä¸ªäººéƒ½æ¸…æ¥šï¼šâ€œå®ƒä»æœªæœ‰è¿‡â€æ˜¯æŒ‡â€œä¿æŠ¤â€ï¼Œè€Œä¸æ˜¯â€œæœªèƒ½ä¿æŠ¤â€ï¼›å³ï¼Œåœ¨æˆ‘çš„ä¸€ç”Ÿä¸­ï¼Œæˆ‘ä»æœªè§è¿‡ç¾å›½æ”¿åºœå§‹ç»ˆä¿æŠ¤ç¾å›½å…¬æ°‘çš„åˆ©ç›Šï¼Œé™¤éæ˜¯æ„å¤–ã€‚\nCluster 5, Rank 1: rec.autos, æŠ½æ ·ç¿»è¯‘: å™¢ï¼Œæ¥å§ï¼Œå‚»ç“œï¼Œä½ è¦åšçš„å°±æ˜¯åœ¨ä½ çš„å¼•æ“ç½©ä¸Šå‰²ä¸€ä¸ªæ´ï¼Œç„¶åæŠŠä¸€ä¸ªç®¡å­æ”¾è¿›å»ï¼Œè¿™æ ·ä½ å°±å¯ä»¥æŠŠæœºæ²¹å€’è¿›å»äº†ã€‚ä½ è§‰å¾—é‚£äº›çƒ­é—¨è½¦ä¸Šçš„å¤§ç©ºæ°”è¿›æ°”è£…ç½®æ˜¯å¹²ä»€ä¹ˆçš„ï¼Ÿå®ƒä»¬åªæ˜¯ä¸ºäº†å¤–è§‚ï¼Œæ²¡æœ‰äººçŸ¥é“ï¼Œå®ƒä»¬æä¾›äº†è¿›å…¥æœºæ²¹å¡«å……å­”çš„é€”å¾„ã€‚\nCluster 6, Rank 1: rec.motorcycles, æŠ½æ ·ç¿»è¯‘: ä½ çœŸæ˜¯ä¸ªå¤±è´¥è€…\nCluster 7, Rank 1: comp.os.ms-windows.misc, æŠ½æ ·ç¿»è¯‘: å¶å°”ä½ éœ€è¦ä¸ºè¡¨ç°è‰¯å¥½çš„ä¸œè¥¿è¯´å¥å¥½è¯ã€‚æˆ‘çš„ä¸œè¥¿æ¡¥3401æ²¡æœ‰ä»»ä½•é—®é¢˜ã€‚å®ƒåœ¨DOSå’ŒOS/2ä¸Šè¿è¡Œå¾—å¾ˆå¥½ã€‚å¯¹äºOS/2ï¼Œä½ ä¸éœ€è¦åŠ è½½ä»»ä½•ç‰¹æ®Šçš„é©±åŠ¨ç¨‹åºã€‚å®‰è£…ä¼šæ£€æµ‹åˆ°å®ƒæ˜¯ä¸€ä¸ªä¸œè¥¿æ¡¥é©±åŠ¨å™¨ï¼Œç„¶åå°±å®Œæˆäº†ã€‚é¡ºä¾¿è¯´ä¸€å¥ï¼Œå®ƒä¹Ÿå¾ˆå¿«ï¼\nCluster 8, Rank 1: talk.politics.mideast, æŠ½æ ·ç¿»è¯‘: Aviï¼Œ    ä¾›ä½ å‚è€ƒï¼Œä¼Šæ–¯å…°æ•™å…è®¸å®—æ•™è‡ªç”±â€”â€”åœ¨å®—æ•™ä¸Šæ²¡æœ‰å¼ºåˆ¶ã€‚çŠ¹å¤ªæ•™æ˜¯å¦ä¹Ÿå…è®¸å®—æ•™è‡ªç”±ï¼ˆå³æ˜¯å¦è®¤å¯éçŠ¹å¤ªäººï¼‰ï¼Ÿåªæ˜¯å¥½å¥‡è€Œå·²ã€‚\nCluster 9, Rank 1: comp.os.ms-windows.misc, æŠ½æ ·ç¿»è¯‘: æ¯ä¸ªäººéƒ½æœ‰è‡ªå·±çš„æ¢¦æƒ³ï¼Œä½†åªæœ‰å‹‡æ•¢è¿½æ±‚æ¢¦æƒ³çš„äººæ‰èƒ½å®ç°å®ƒã€‚\nCluster 10, Rank 1: talk.politics.guns, æŠ½æ ·ç¿»è¯‘: ä¸ä¸€å®šï¼Œç‰¹åˆ«æ˜¯å¦‚æœå¼ºå¥¸çŠ¯è¢«è®¤å®šä¸ºæ­¤ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ æœ‰æ„åœ°æŠŠæ‰‹æŒ‡ä¼¸è¿›ä¸€ä¸ªè£…æ»¡äº†è€é¼ å¤¹çš„åœ°æ–¹ï¼Œç„¶åè¢«å¤¹ä½ï¼Œè¿™æ˜¯è°çš„é”™ï¼Ÿ\nCluster 11, Rank 1: comp.graphics, æŠ½æ ·ç¿»è¯‘: å¸®å¸®æˆ‘ï¼ï¼æˆ‘éœ€è¦ä»£ç /åŒ…/ä»»ä½•ä¸œè¥¿æ¥å¤„ç†3Dæ•°æ®ï¼Œå¹¶å°†å…¶è½¬æ¢ä¸ºå¸¦æœ‰éšè—çº¿çš„çº¿æ¡†è¡¨é¢ã€‚æˆ‘æ­£åœ¨ä½¿ç”¨DOSæœºå™¨ï¼Œä»£ç å¯ä»¥æ˜¯ANSI Cæˆ–C ++ï¼ŒANSI Fortranæˆ–Basicã€‚æˆ‘ä½¿ç”¨çš„æ•°æ®å½¢æˆä¸€ä¸ªçŸ©å½¢ç½‘æ ¼ã€‚è¯·å°†æ‚¨çš„å›å¤å‘å¸ƒåˆ°ç½‘ç»œä¸Šï¼Œä»¥ä¾¿å…¶ä»–äººå—ç›Šã€‚æˆ‘çš„ä¸ªäººè§‚ç‚¹æ˜¯ï¼Œè¿™æ˜¯ä¸€ä¸ªæ™®éçš„å…´è¶£é—®é¢˜ã€‚è°¢è°¢ï¼ï¼ï¼ï¼ï¼\nCluster 12, Rank 1: rec.motorcycles, æŠ½æ ·ç¿»è¯‘: è¿™æ˜¯ä¸€æ®µå¿ƒç†å­¦ï¼Œå¯¹äºä»»ä½•é•¿æœŸéª‘è¡Œè€…æ¥è¯´éƒ½æ˜¯å¿…ä¸å¯å°‘çš„ã€‚äººä»¬ä¸ä¼šå»æƒ³â€œå¦‚æœæˆ‘è¿™ä¹ˆåšä¼šæœ‰å…¶ä»–äººå—åˆ°å½±å“å—ï¼Ÿâ€ä»–ä»¬åªä¼šè¯„ä¼°â€œå¦‚æœæˆ‘è¿™ä¹ˆåšä¼šå—åˆ°å½±å“å—ï¼Ÿâ€\nCluster 13, Rank 1: soc.religion.christian, æŠ½æ ·ç¿»è¯‘: è¿™æ˜¯ä¸€ä¸ªéå¸¸è–„å¼±çš„è®ºç‚¹ï¼Œå› ä¸ºæ²¡æœ‰ç‹¬ç«‹çš„æ”¯æŒæ–‡æœ¬ï¼ˆå…³äºå…³é”®äº‹ä»¶ï¼‰ã€‚è‡³äºæ–°çº¦æœ€å¤è€çš„ç°å­˜æ–‡æœ¬çš„æ—¥æœŸ......å¦‚æœç°åœ¨åªæœ‰ä¸€ä¸ªå…³äºç¾å›½å†…æˆ˜çš„ç°å­˜æ–‡æœ¬ï¼Œä½ ä¼šæ€ä¹ˆæƒ³ï¼Ÿç°åœ¨è€ƒè™‘ä¸€ä¸ªå¤§éƒ¨åˆ†æ–‡ç›²çš„äººå£ï¼Œæ¯ä¸€ä»½æ‰‹ç¨¿éƒ½æ˜¯æ‰‹å·¥å¤åˆ¶çš„......--Hal\nCluster 14, Rank 1: rec.sport.baseball, æŠ½æ ·ç¿»è¯‘: è¿™ä¸ªèµ”ç‡æ„å‘³ç€ä½ ä¸‹æ³¨5ç¾å…ƒèµŒåè´¥è€…èµ¢8ç¾å…ƒï¼Œæˆ–è€…ä¸‹æ³¨9ç¾å…ƒèµŒèƒœè€…èµ¢5ç¾å…ƒã€‚\nCluster 15, Rank 1: misc.forsale, æŠ½æ ·ç¿»è¯‘: å—¯ï¼Œæ ‡é¢˜å°±æ˜¯è¿™æ ·......æˆ‘æ­£åœ¨å¯»æ‰¾ä¾¿å®œçš„äºŒæ‰‹TG-16æ¸¸æˆï¼Œå®ƒä»¬æ”¯æŒ2ä¸ªæˆ–æ›´å¤šç©å®¶ï¼ˆåŒæ—¶ï¼‰....è¯·ç»™æˆ‘å‘é€æ‰€æœ‰å¸¦æœ‰ä»·æ ¼çš„æŠ¥ä»·ã€‚\nCluster 16, Rank 1: sci.crypt, æŠ½æ ·ç¿»è¯‘: å“ªé‡Œï¼Ÿè€å®è¯´ï¼Œæˆ‘æ²¡æœ‰çœ‹åˆ°ä»»ä½•â€¦â€¦æˆ‘ä¸åŒæ„ï¼Œè‡³å°‘æœ‰å…¶ä»–æ ‡å‡†å·²ç»å­˜åœ¨ã€‚æ­¤å¤–ï¼Œå³ä½¿ä»–ä»¬é™åˆ¶NRENä¸Šçš„åŠ å¯†ï¼Œè°åœ¨ä¹å‘¢ï¼Ÿå¤§éƒ¨åˆ†äº’è”ç½‘éƒ½æ˜¯å•†ä¸šçš„ã€‚NRENåªé€‚ç”¨äºæ”¿åºœå’Œå¤§å­¦ç ”ç©¶ï¼ˆé˜…è¯»ææ¡ˆ-å®ƒæ˜¯ä¸€æ¡â€œæ•°æ®é«˜é€Ÿå…¬è·¯â€ï¼Œä¸äº’è”ç½‘æ— å…³ï¼‰ã€‚\nCluster 17, Rank 1: sci.electronics, æŠ½æ ·ç¿»è¯‘: åŠ¨æ€RAMä¸æ˜¯åŸºäºç¿»è½¬é”å­˜å™¨ï¼›åŸºæœ¬ä¸Šæ¯ä¸ªä½åªæœ‰ä¸€ä¸ªæ™¶ä½“ç®¡å’Œç”µå®¹æ¥å­˜å‚¨ï¼é™æ€RAMæ˜¯åŸºäºç¿»è½¬é”å­˜å™¨ï¼Œæ›´åŠ æ˜‚è´µï¼Œå¯†åº¦ä¹Ÿæ›´ä½ã€‚å¦‚æœå¿½ç•¥ç”µå­å’Œçƒ­è†¨èƒ€ï¼Œä¸¤è€…éƒ½æ²¡æœ‰ä»»ä½•â€œç§»åŠ¨â€çš„éƒ¨ä»¶...Chris\nCluster 18, Rank 1: sci.med, æŠ½æ ·ç¿»è¯‘: åŒ–å­¦å“å·²ç»æ¶ˆå¤±ï¼Œæ„Ÿè°¢æ‰€æœ‰çš„å›åº”ã€‚\nCluster 19, Rank 1: sci.electronics, æŠ½æ ·ç¿»è¯‘: å°è¯•lyman.pppl.gov--/pub/8051\n</code></pre><p>ä»è¾“å‡ºçš„ç»“æœæ¥çœ‹ï¼Œæˆ‘ä»¬é€‰å–çš„å†…å®¹å’ŒAIæ€»ç»“çš„æ ‡é¢˜çš„ç¡®å…«ä¹ä¸ç¦»åã€‚ä¸çŸ¥é“è¿™ä¸ªè¿‡ç¨‹ï¼Œæœ‰æ²¡æœ‰é‡æ–°è®©ä½ å›å¿†èµ·Completionè¿™ä¸ªæ¥å£çš„å¼ºå¤§ä¹‹å¤„ã€‚æˆ‘ä»¬åªè¦ç»™å‡ºåˆé€‚çš„æŒ‡ä»¤ï¼Œå®ƒå°±èƒ½æŒ‰ç…§æˆ‘ä»¬çš„å¿ƒæ„ç»™å‡ºåˆç†çš„ç»“æœã€‚</p><h2>åˆ©ç”¨æ–‡æœ¬æ‘˜è¦æ”¯æŒæ— é™è½®æ•°çš„èŠå¤©</h2><p>ä¸çŸ¥é“ä½ æ˜¯å¦è¿˜è®°å¾—ä¸Šä¸€è®²é‡Œçš„æ€è€ƒé¢˜ï¼Œå¦‚æœä¸åªæ˜¯ä¿ç•™è¿‡å»å‡ è½®å¯¹è¯ï¼Œæˆ‘ä»¬æ€ä¹ˆåœ¨å¯¹è¯è½®æ•°è¶Šæ¥è¶Šå¤šçš„æ—¶å€™è®©AIè®°ä½å°½é‡å¤šçš„ä¸Šä¸‹æ–‡ï¼Ÿæœ‰ä¸€ä¸ªåŠæ³•ï¼Œå°±æ˜¯å°†è¿‡å»å‡ è½®çš„ä¸Šä¸‹æ–‡å†…å®¹ï¼Œå…ˆäº¤ç»™AIåšä¸€ä¸ª100å­—çš„æ€»ç»“ã€‚ç„¶åï¼ŒæŠŠè¿™ä¸ªæ€»ç»“ä¹Ÿä½œä¸ºå¯¹è¯çš„Promptä¿¡æ¯ï¼Œå‘Šè¯‰AIè¿™æ˜¯èŠå¤©çš„èƒŒæ™¯ï¼Œå†é‡æ–°å¼€å§‹æ–°çš„ä¸€è½®å¯¹è¯ã€‚</p><p>åœ¨è¿™é‡Œæˆ‘ä»¬ä¸å¦¨è¯•ä¸€ä¸‹ã€‚</p><ol>\n<li>æˆ‘ä»¬æ‹¿ä¸Šä¸€è®²çš„ä¸€æ®µèŠå¤©è®°å½•ï¼Œè®©AIå…ˆæ€»ç»“ä¸€ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°AIæ€»ç»“äº†Userå’ŒAssistantä¹‹é—´èŠäº†ä»€ä¹ˆã€‚</li>\n</ol><pre><code class=\"language-python\">history = \"\"\"User : ä½ æ˜¯è°ï¼Ÿ\nAssistant : æˆ‘æ˜¯ä¸€ä¸ªäººå·¥æ™ºèƒ½è¯­è¨€æ¨¡å‹ï¼Œå¯ä»¥å›ç­”å„ç§é—®é¢˜ï¼ŒåŒ…æ‹¬åšèœçš„é—®é¢˜ã€‚\n\nUser : è¯·é—®é±¼é¦™è‚‰ä¸æ€ä¹ˆåšï¼Ÿ\nAssistant : é±¼é¦™è‚‰ä¸çš„åšæ³•ï¼š\n\n1. çŒªé‡Œè„Šè‚‰åˆ‡ä¸ï¼ŒåŠ å…¥ç›ã€æ·€ç²‰ã€æ–™é…’æ…æ‹Œå‡åŒ€ï¼Œè…Œåˆ¶10åˆ†é’Ÿ\n2. èƒ¡èåœã€é’æ¤’ã€æœ¨è€³åˆ‡ä¸å¤‡ç”¨\n3. çƒ­é”…å‡‰æ²¹ï¼Œæ”¾å…¥è’œæœ«ã€å§œæœ«ç…¸ç‚’å‡ºé¦™å‘³ï¼ŒåŠ å…¥è‚‰ä¸ç¿»ç‚’è‡³å˜è‰²\n4. åŠ å…¥èƒ¡èåœã€é’æ¤’ã€æœ¨è€³ç¿»ç‚’ï¼ŒåŠ å…¥é…±æ²¹ã€ç³–ã€é†‹ã€ç›ã€å‘³ç²¾ã€æ°´æ·€ç²‰æ…æ‹Œå‡åŒ€ï¼Œå€’å…¥é”…ä¸­ç¿»ç‚’å‡åŒ€å³å¯ã€‚\n\næç¤ºï¼šé±¼é¦™è‚‰ä¸çš„å…³é”®æ˜¯è°ƒæ–™çš„é…æ¯”ï¼Œé…±æ²¹ã€ç³–ã€é†‹ã€ç›ã€å‘³ç²¾çš„æ¯”ä¾‹è¦é€‚åˆè‡ªå·±çš„å£å‘³ã€‚\n\nUser : é‚£èšæ²¹ç‰›è‚‰å‘¢ï¼Ÿ\nAssistant : èšæ²¹ç‰›è‚‰çš„åšæ³•ï¼š\n\n1. å°†ç‰›è‚‰åˆ‡æˆè–„ç‰‡ï¼ŒåŠ å…¥ç›ã€æ·€ç²‰ã€æ–™é…’è…Œåˆ¶10åˆ†é’Ÿ\n2. è‘±å§œåˆ‡æœ«ï¼Œè’œåˆ‡ç‰‡ï¼Œé’çº¢æ¤’åˆ‡ä¸å¤‡ç”¨\n3. çƒ­é”…å‡‰æ²¹ï¼Œæ”¾å…¥è‘±å§œæœ«ã€è’œç‰‡ç…¸ç‚’å‡ºé¦™å‘³ï¼ŒåŠ å…¥ç‰›è‚‰ç¿»ç‚’è‡³å˜è‰²\n4. åŠ å…¥èšæ²¹ã€é…±æ²¹ã€ç³–ã€æ°´æ·€ç²‰è°ƒå‘³ï¼ŒåŠ å…¥é’çº¢æ¤’ç¿»ç‚’å‡åŒ€å³å¯ã€‚\n\næç¤ºï¼šèšæ²¹ç‰›è‚‰çš„å…³é”®æ˜¯ç‰›è‚‰è¦åˆ‡è–„ï¼Œç¿»ç‚’æ—¶ç«å€™è¦å¿«ï¼Œä¿è¯ç‰›è‚‰å£æ„Ÿé²œå«©ã€‚è°ƒå‘³æ—¶ï¼Œèšæ²¹å’Œé…±æ²¹çš„æ¯”ä¾‹ä¹Ÿè¦é€‚åˆè‡ªå·±çš„å£å‘³ã€‚\n\"\"\"\n\ndef summarize(text, max_tokens=200):\n    response = openai.Completion.create(\n        model=COMPLETIONS_MODEL,\n        prompt=text + \"\\n\\nè¯·æ€»ç»“ä¸€ä¸‹ä¸Šé¢Userå’ŒAssistantèŠäº†äº›ä»€ä¹ˆï¼š\\n\",\n        max_tokens=max_tokens,\n    )\n    return response[\"choices\"][0][\"text\"]\n\nsummarized = summarize(history)\nprint(summarized)\n</code></pre><p>è¾“å‡ºç»“æœï¼š</p><pre><code class=\"language-python\">Userå’ŒAssistantèŠäº†é±¼é¦™è‚‰ä¸å’Œèšæ²¹ç‰›è‚‰çš„åˆ¶ä½œæ–¹æ³•ã€‚Useré—®äº†Assistantä¸¤ä¸ªå…³äºå¦‚ä½•åšé±¼é¦™è‚‰ä¸å’Œèšæ²¹ç‰›è‚‰çš„é—®é¢˜ï¼ŒAssistantç»™å‡ºäº†å›ç­”å¹¶ä»‹ç»äº†æ¯é“èœçš„å…·ä½“åˆ¶ä½œæ–¹æ³•ï¼ŒåŒæ—¶ä¹Ÿæç¤ºäº†è°ƒæ–™çš„é…æ¯”å’Œç‰›è‚‰åˆ¶ä½œæ—¶è¦æ³¨æ„çš„ç»†èŠ‚ã€‚\n</code></pre><ol start=\"2\">\n<li>ç„¶åï¼Œæˆ‘ä»¬å†æ–°å»ºä¸€ä¸ªConversationï¼Œè¿™æ¬¡çš„æç¤ºè¯­é‡Œï¼Œæˆ‘ä»¬å…ˆåŠ ä¸Šäº†æ€»ç»“çš„å†…å®¹ï¼Œç„¶åå‘Šè¯‰AIæŠŠå¯¹è¯ç»§ç»­ä¸‹å»ã€‚</li>\n</ol><pre><code class=\"language-python\">prompt = summarized + \"\\n\\nè¯·ä½ æ ¹æ®å·²ç»èŠäº†çš„å†…å®¹ï¼Œç»§ç»­å¯¹è¯ï¼š\"\nconversation = Conversation(prompt, 5)\n\nquestion = \"é‚£å®«ä¿é¸¡ä¸å‘¢ï¼Ÿ\"\nanswer = conversation.ask(question)\nprint(\"User : %s\" % question)\nprint(\"Assistant : %s\\n\" % answer)\n</code></pre><p>æ³¨æ„ï¼Œå¦‚æœä½ æ˜¯åœ¨Notebooké‡Œé¢æ‰§è¡Œçš„è¯ï¼Œä½ éœ€è¦æŠŠä¸Šä¸€è®²çš„Conversationç±»çš„ä»£ç å¤åˆ¶è¿‡æ¥å…ˆæ‰§è¡Œä¸€ä¸‹ã€‚è¿™é‡Œï¼Œæˆ‘ä»¬å¯åŠ¨äº†ä¸€ä¸ªæ–°çš„å¯¹è¯å¯¹è±¡ï¼Œå°†ä¹‹å‰çš„å‡ è½®å¯¹è¯çš„å†…å®¹æ€»ç»“äº†ä¸€ä¸‹ï¼Œæ”¾åœ¨Promptçš„æœ€å‰é¢ï¼Œç„¶åè®©AIæ ¹æ®å·²ç»èŠäº†çš„å†…å®¹ï¼Œç»§ç»­å¾€ä¸‹èŠã€‚</p><ol start=\"3\">\n<li>å½“æˆ‘ä»¬ç›´æ¥é—®ï¼Œâ€œé‚£å®«ä¿é¸¡ä¸å‘¢ï¼Ÿâ€ï¼ŒAIä¼šæ­£ç¡®å›ç­”å‡ºå®«ä¿é¸¡ä¸çš„åšæ³•ã€‚<br>\nè¾“å‡ºç»“æœï¼š</li>\n</ol><pre><code class=\"language-python\">User : é‚£å®«ä¿é¸¡ä¸å‘¢ï¼Ÿ\nAssistant : å®«ä¿é¸¡ä¸çš„åˆ¶ä½œæ–¹æ³•ä¹Ÿæ¯”è¾ƒç®€å•ã€‚é¦–å…ˆï¼Œå°†é¸¡è‚‰åˆ‡æˆå°ä¸çŠ¶ï¼Œç”¨æ–™é…’ã€ç›ã€ç”ŸæŠ½è…Œåˆ¶ä¸€ä¸‹ã€‚ç„¶åå°†é’æ¤’ã€çº¢æ¤’ã€è‘±å§œè’œåˆ‡æˆä¸çŠ¶å¤‡ç”¨ã€‚æ¥ç€ï¼Œå°†èŠ±ç”Ÿç±³ç‚’é¦™å¤‡ç”¨ã€‚\nçƒ­é”…å‡‰æ²¹ï¼Œæ²¹æ¸©ä¸ƒæˆçƒ­æ—¶æ”¾å…¥é¸¡ä¸ç…¸ç‚’è‡³å˜è‰²ï¼Œæå‡ºå¤‡ç”¨ã€‚å†å°†è‘±å§œè’œçˆ†é¦™ï¼ŒåŠ å…¥é’çº¢æ¤’ä¸ç¿»ç‚’ä¸€ä¸‹ï¼Œç„¶ååŠ å…¥é¸¡ä¸ï¼Œç¿»ç‚’å‡åŒ€ã€‚æœ€ååŠ å…¥é€‚é‡çš„ç³–ã€ç›ã€é†‹ã€ç”ŸæŠ½ã€è€æŠ½ã€æ–™é…’ã€æ°´æ·€ç²‰ç‚’åŒ€ï¼Œæœ€ååŠ å…¥ç‚’é¦™çš„èŠ±ç”Ÿç±³å³å¯ã€‚\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç‚’é¸¡ä¸çš„æ—¶å€™è¦ç”¨å¤§ç«ï¼Œè¿™æ ·é¸¡è‚‰ä¼šæ›´å«©ã€‚å¦å¤–ï¼Œè°ƒæ–™çš„é…æ¯”ä¹Ÿå¾ˆå…³é”®ï¼Œéœ€è¦æ ¹æ®ä¸ªäººå£å‘³é€‚é‡è°ƒæ•´ã€‚\n</code></pre><p>è€Œå¦‚æœæˆ‘ä»¬æ²¡æœ‰åŠ ä¸ŠAIæ€»ç»“çš„ä¹‹å‰çš„å¯¹è¯ï¼Œåªæ˜¯è®©AIå¯¹è¯ï¼Œå®ƒåªèƒ½å’Œä½ é—²æ‰¯ä¸€äº›åˆ«çš„ã€‚</p><pre><code class=\"language-python\">conversation = Conversation(\"è¯·ä½ æ ¹æ®å·²ç»èŠäº†çš„å†…å®¹ï¼Œç»§ç»­å¯¹è¯ï¼š\", 5)\n\nquestion = \"é‚£å®«ä¿é¸¡ä¸å‘¢ï¼Ÿ\"\nanswer = conversation.ask(question)\nprint(\"User : %s\" % question)\nprint(\"Assistant : %s\\n\" % answer)\n</code></pre><p>è¾“å‡ºç»“æœï¼š</p><pre><code class=\"language-python\">User : é‚£å®«ä¿é¸¡ä¸å‘¢ï¼Ÿ\nAssistant : å®«ä¿é¸¡ä¸æ˜¯ä¸€é“éå¸¸æœ‰åçš„å·èœï¼Œå£æ„Ÿéº»è¾£é²œé¦™ï¼Œéå¸¸ç¾å‘³ã€‚ä½ å–œæ¬¢åƒè¾£çš„é£Ÿç‰©å—ï¼Ÿ\n</code></pre><p>å¦‚æœæ²¡æœ‰ç»™å®ƒå·²ç»æ€»ç»“äº†çš„å†…å®¹ï¼ŒAIåªä¼šå’Œä½ çæ‰¯ï¼Œå‘Šè¯‰ä½ å®«ä¿é¸¡ä¸å¾ˆå¥½åƒã€‚</p><h2>å°ç»“</h2><p>ä¸çŸ¥é“ä»Šå¤©æ•™çš„è¿™äº›æŠ€å·§ä½ å­¦ä¼šäº†å—ï¼Ÿè¿™ä¸€è®²é‡Œï¼Œæˆ‘ä»¬å…ˆæ˜¯å¿«é€Ÿå®éªŒäº†ä¸€ä¸‹é€šè¿‡Embeddingæ‹¿åˆ°çš„å‘é‡è¿›è¡Œæ–‡æœ¬èšç±»ã€‚å¯¹äºèšç±»çš„ç»“æœï¼Œæˆ‘ä»¬ä¸ç”¨å†åƒä»¥å‰é‚£æ ·äººå·¥çœ‹æˆç™¾ä¸Šåƒæ¡æ•°æ®ï¼Œç„¶åæ‹ä¸ªè„‘è¢‹ç»™è¿™ä¸ªç±»å–ä¸ªåå­—ã€‚æˆ‘ä»¬ç›´æ¥åˆ©ç”¨äº†Completionæ¥å£å¯ä»¥å¸®æˆ‘ä»¬æ€»ç»“å†…å®¹çš„èƒ½åŠ›ï¼Œç»™åˆ†ç±»å–äº†ä¸€ä¸ªåå­—ã€‚ä»æœ€ç»ˆçš„æ•ˆæœæ¥çœ‹ï¼Œè¿˜ç®—ä¸é”™ã€‚</p><p>è€Œç±»ä¼¼çš„æŠ€å·§ï¼Œä¹Ÿå¯ä»¥ç”¨åœ¨å¤šè½®çš„é•¿å¯¹è¯ä¸­ã€‚æˆ‘ä»¬å°†å†å²å¯¹è¯ï¼Œè®©AIæ€»ç»“æˆä¸€å°æ®µæ–‡æœ¬æ”¾åˆ°æç¤ºè¯­é‡Œé¢ã€‚è¿™æ ·æ—¢èƒ½å¤Ÿè®©AIè®°ä½è¿‡å»çš„å¯¹è¯å†…å®¹ï¼Œåˆä¸ä¼šå› ä¸ºå¯¹è¯è¶Šæ¥è¶Šé•¿è€Œè¶…å‡ºæ¨¡å‹å¯ä»¥æ”¯æŒçš„Tokenæ•°é‡ã€‚è¿™ä¸ªæŠ€å·§ä¹Ÿæ˜¯ä½¿ç”¨å¤§è¯­è¨€æ¨¡å‹çš„ä¸€ç§å¸¸è§æ¨¡å¼ã€‚</p><h2>è¯¾åç»ƒä¹ </h2><ol>\n<li>è¿™ä¸€è®²é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨äº†è®©AIæ¦‚æ‹¬èšç±»æ–‡æœ¬å†…å®¹å’ŒèŠå¤©è®°å½•çš„æç¤ºè¯­ã€‚ä½ è‡ªå·±åœ¨ä½“éªŒGPTç³»åˆ—æ¨¡å‹çš„æ—¶å€™ï¼Œæœ‰ä»€ä¹ˆè§‰å¾—ç‰¹åˆ«æœ‰ç”¨çš„æç¤ºè¯­å—ï¼Ÿæ¬¢è¿ä½ åˆ†äº«è‡ªå·±çš„ä½“éªŒã€‚</li>\n<li>åœ¨æ–‡æœ¬èšç±»é‡Œé¢ï¼Œæœ‰ä¸‰ä¸ªèšåˆå‡ºæ¥çš„ç±»ï¼Œå’ŒåŸå…ˆçš„åˆ†ç»„æ²¡æœ‰å¾ˆæ˜æ˜¾çš„å¯¹åº”å…³ç³»ã€‚ä½ èƒ½åˆ©ç”¨ç°åœ¨å­¦åˆ°çš„çŸ¥è¯†ï¼Œå†™ä¸€äº›ä»£ç çœ‹çœ‹æ•°æ®ï¼Œç ”ç©¶ä¸€ä¸‹æ˜¯ä¸ºä»€ä¹ˆå—ï¼Ÿ</li>\n</ol><p>æœŸå¾…èƒ½åœ¨è¯„è®ºåŒºçœ‹åˆ°ä½ çš„æ€è€ƒï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠè¿™èŠ‚è¯¾åˆ†äº«ç»™æ„Ÿå…´è¶£çš„æœ‹å‹ï¼Œæˆ‘ä»¬ä¸‹ä¸€è®²å†è§ã€‚</p>","comments":[{"had_liked":false,"id":371686,"user_name":"Geek_d8a880","can_delete":false,"product_type":"c1","uid":2908367,"ip_address":"åŒ—äº¬","ucode":"D5C3AB47027AAA","user_header":"","comment_is_top":false,"comment_ctime":1680181456,"is_pvip":false,"replies":[{"id":135754,"content":"æ˜¯çš„ï¼Œæ‰€ä»¥å®é™…è¿ç”¨ä¸­ï¼Œè¿˜éœ€è¦è€ƒè™‘ä¿ç•™å“ªäº›è®°å¿†ä¿¡æ¯ã€‚å“ªäº›å­˜å‚¨åœ¨å¤–éƒ¨ï¼Œå¯ä»¥ç»§ç»­å¾€åçœ‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1680586432,"ip_address":"ä¸Šæµ·","comment_id":371686,"utype":1}],"discussion_count":5,"race_medal":0,"score":2,"product_id":100541001,"comment_content":"éšç€å¯¹è¯çš„è½®æ•°è¶Šæ¥è¶Šå¤šï¼Œæ–‡æœ¬æ‘˜è¦ä¹Ÿä¼šè¶Šæ¥è¶ŠæŠ½è±¡ï¼Œèƒ½ä¿ç•™çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ä¹Ÿä¼šè¶Šæ¥è¶Šå°‘å§","like_count":10,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":612260,"discussion_content":"æ˜¯çš„ï¼Œæ‰€ä»¥å®é™…è¿ç”¨ä¸­ï¼Œè¿˜éœ€è¦è€ƒè™‘ä¿ç•™å“ªäº›è®°å¿†ä¿¡æ¯ã€‚å“ªäº›å­˜å‚¨åœ¨å¤–éƒ¨ï¼Œå¯ä»¥ç»§ç»­å¾€åçœ‹ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1680586433,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1035226,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/cb/da/79080738.jpg","nickname":"æ¤°å­èˆ¹é•¿","note":"","ucode":"36A9BD5F312028","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":611924,"discussion_content":"åŒé—®ï¼Œæ¯æ¬¡å¯¹è¯éƒ½æœ‰æ–°çš„å†…å®¹ï¼Œä¹‹å‰å¯¹è¯çš„æ‘˜è¦ä¸ç”¨æ¯æ¬¡éƒ½ç”Ÿæˆï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1680420672,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1018552,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8a/b8/97d30803.jpg","nickname":"å¸ƒæ‹‰æ ¼çš„é±¼","note":"","ucode":"95145A236D6033","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":611884,"discussion_content":"æ„Ÿè§‰ç¡®å®å¦‚æ­¤","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1680398870,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æµ™æ±Ÿ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1104601,"avatar":"https://static001.geekbang.org/account/avatar/00/10/da/d9/f051962f.jpg","nickname":"æµ©ä»”æ˜¯ç¨‹åºå‘˜","note":"","ucode":"A7E5CF9E1571A2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":611762,"discussion_content":"æˆ‘ä¹Ÿæœ‰è¿™æ ·å­çš„ç–‘é—®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1680280273,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1104601,"avatar":"https://static001.geekbang.org/account/avatar/00/10/da/d9/f051962f.jpg","nickname":"æµ©ä»”æ˜¯ç¨‹åºå‘˜","note":"","ucode":"A7E5CF9E1571A2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":611761,"discussion_content":"æˆ‘ä¹Ÿæ˜¯æœ‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1680280259,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":372337,"user_name":"Geek2014","can_delete":false,"product_type":"c1","uid":2028957,"ip_address":"åŒ—äº¬","ucode":"9EB356D8DF287E","user_header":"https://static001.geekbang.org/account/avatar/00/1e/f5/9d/104bb8ea.jpg","comment_is_top":false,"comment_ctime":1681006780,"is_pvip":false,"replies":[{"id":135937,"content":"æ¥è‡ªChatGPTçš„å›ç­”åœ¨ä¸‹é¢ï¼Œå¤§å®¶éƒ½ä¹°äº†è¿™ä¸ªè¯¾äº†è¿˜æ˜¯æœ‰é—®é¢˜å¯ä»¥å¤šé—®ChatGPTå•Šã€‚ä¸è¿‡æ–°æ—¶ä»£ä¸‹ï¼Œå¾ˆå¤šè‡ªåŠ¨è¯„ä»·æŒ‡æ ‡å…¶å®å·²ç»ä¸ä¸€å®šåˆé€‚äº†ï¼Œå€¼å¾—ç ”ç©¶ä¸€ä¸‹æœ‰ä»€ä¹ˆæ–°çš„è¯„ä»·æ–¹æ³•\n\nå¸¸ç”¨çš„æ–‡æœ¬æ‘˜è¦è¯„ä»·æŒ‡æ ‡æœ‰ï¼š\n\n1. ROUGEï¼ˆRecall-Oriented Understudy for Gisting Evaluationï¼‰ï¼šç”¨äºè¡¡é‡è‡ªåŠ¨æ–‡æœ¬æ‘˜è¦ä¸å‚è€ƒæ‘˜è¦ä¹‹é—´çš„åŒ¹é…ç¨‹åº¦ï¼Œåœ¨å¬å›ç‡ï¼ˆrecallï¼‰çš„åŸºç¡€ä¸Šè®¡ç®—ç²¾ç¡®ç‡ï¼ˆprecisionï¼‰å’Œ F1 å€¼ã€‚\n\n2. BLEUï¼ˆBilingual Evaluation Understudyï¼‰ï¼šåŸºäº n-gram çš„ç»Ÿè®¡æ–¹æ³•ï¼Œç”¨äºè¡¡é‡è‡ªåŠ¨æ–‡æœ¬æ‘˜è¦ä¸å‚è€ƒæ‘˜è¦çš„ç›¸ä¼¼åº¦ã€‚\n\n3. METEORï¼ˆMetric for Evaluation of Text with Explicit ORderingï¼‰ï¼šç»“åˆäº†è¯­ä¹‰æ¨¡å‹å’ŒçŸ­è¯­è¡¨å¾çš„è¯„ä»·æŒ‡æ ‡ï¼Œèƒ½å¤Ÿå¤„ç†åŒä¹‰è¯ã€è¯­æ³•å˜åŒ–ç­‰é—®é¢˜ã€‚\n\n4. NISTï¼ˆNIST Information Retrievalï¼‰ï¼šåŸºäºè¯­è¨€æ¨¡å‹çš„è‡ªåŠ¨æ‘˜è¦è¯„ä»·æŒ‡æ ‡ï¼Œä½¿ç”¨ç»Ÿè®¡çš„æ–¹æ³•è·å–å‚è€ƒæ‘˜è¦ä¸­çš„å…³é”®è¯ä¿¡æ¯ï¼Œå°†è¿™äº›ä¿¡æ¯ä¸è‡ªåŠ¨æ‘˜è¦è¿›è¡Œæ¯”å¯¹ã€‚\n\n5. CIDErï¼ˆConsensus-based Image Description Evaluationï¼‰ï¼šæœ€åˆæ˜¯ç”¨äºè¯„ä»·å›¾åƒæè¿°çš„æŒ‡æ ‡ï¼Œä¹Ÿå¯ä»¥åº”ç”¨äºæ–‡æœ¬æ‘˜è¦è¯„ä»·ä¸Šï¼Œèƒ½å¤Ÿæ•æ‰åˆ°å¤šæ ·æ€§å’Œæµç•…æ€§ç­‰æ–¹é¢ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1681129196,"ip_address":"ç¾å›½","comment_id":372337,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100541001,"comment_content":"è¯·é—®å¾è€å¸ˆï¼Œchatgpt ç»™å‡ºçš„æ–‡æœ¬æ‘˜è¦ï¼Œæˆ‘ä»¬èƒ½å¤Ÿç”¨ä»€ä¹ˆæ–¹æ³•æ¥è¯„ä¼°ç»™å‡ºçš„æ‘˜è¦æ˜¯å¥½æˆ–ä¸å¥½å‘¢ï¼Ÿå¯ä»¥é€šè¿‡å“ªäº›æŒ‡æ ‡æ¥æµ‹è¯•å‘¢ï¼Ÿ","like_count":8,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":613106,"discussion_content":"æ¥è‡ªChatGPTçš„å›ç­”åœ¨ä¸‹é¢ï¼Œå¤§å®¶éƒ½ä¹°äº†è¿™ä¸ªè¯¾äº†è¿˜æ˜¯æœ‰é—®é¢˜å¯ä»¥å¤šé—®ChatGPTå•Šã€‚ä¸è¿‡æ–°æ—¶ä»£ä¸‹ï¼Œå¾ˆå¤šè‡ªåŠ¨è¯„ä»·æŒ‡æ ‡å…¶å®å·²ç»ä¸ä¸€å®šåˆé€‚äº†ï¼Œå€¼å¾—ç ”ç©¶ä¸€ä¸‹æœ‰ä»€ä¹ˆæ–°çš„è¯„ä»·æ–¹æ³•\n\nå¸¸ç”¨çš„æ–‡æœ¬æ‘˜è¦è¯„ä»·æŒ‡æ ‡æœ‰ï¼š\n\n1. ROUGEï¼ˆRecall-Oriented Understudy for Gisting Evaluationï¼‰ï¼šç”¨äºè¡¡é‡è‡ªåŠ¨æ–‡æœ¬æ‘˜è¦ä¸å‚è€ƒæ‘˜è¦ä¹‹é—´çš„åŒ¹é…ç¨‹åº¦ï¼Œåœ¨å¬å›ç‡ï¼ˆrecallï¼‰çš„åŸºç¡€ä¸Šè®¡ç®—ç²¾ç¡®ç‡ï¼ˆprecisionï¼‰å’Œ F1 å€¼ã€‚\n\n2. BLEUï¼ˆBilingual Evaluation Understudyï¼‰ï¼šåŸºäº n-gram çš„ç»Ÿè®¡æ–¹æ³•ï¼Œç”¨äºè¡¡é‡è‡ªåŠ¨æ–‡æœ¬æ‘˜è¦ä¸å‚è€ƒæ‘˜è¦çš„ç›¸ä¼¼åº¦ã€‚\n\n3. METEORï¼ˆMetric for Evaluation of Text with Explicit ORderingï¼‰ï¼šç»“åˆäº†è¯­ä¹‰æ¨¡å‹å’ŒçŸ­è¯­è¡¨å¾çš„è¯„ä»·æŒ‡æ ‡ï¼Œèƒ½å¤Ÿå¤„ç†åŒä¹‰è¯ã€è¯­æ³•å˜åŒ–ç­‰é—®é¢˜ã€‚\n\n4. NISTï¼ˆNIST Information Retrievalï¼‰ï¼šåŸºäºè¯­è¨€æ¨¡å‹çš„è‡ªåŠ¨æ‘˜è¦è¯„ä»·æŒ‡æ ‡ï¼Œä½¿ç”¨ç»Ÿè®¡çš„æ–¹æ³•è·å–å‚è€ƒæ‘˜è¦ä¸­çš„å…³é”®è¯ä¿¡æ¯ï¼Œå°†è¿™äº›ä¿¡æ¯ä¸è‡ªåŠ¨æ‘˜è¦è¿›è¡Œæ¯”å¯¹ã€‚\n\n5. CIDErï¼ˆConsensus-based Image Description Evaluationï¼‰ï¼šæœ€åˆæ˜¯ç”¨äºè¯„ä»·å›¾åƒæè¿°çš„æŒ‡æ ‡ï¼Œä¹Ÿå¯ä»¥åº”ç”¨äºæ–‡æœ¬æ‘˜è¦è¯„ä»·ä¸Šï¼Œèƒ½å¤Ÿæ•æ‰åˆ°å¤šæ ·æ€§å’Œæµç•…æ€§ç­‰æ–¹é¢ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1681129196,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ç¾å›½","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":371827,"user_name":"Kevin","can_delete":false,"product_type":"c1","uid":2422166,"ip_address":"æ¾³å¤§åˆ©äºš","ucode":"3BF17EEEA6DBF7","user_header":"https://static001.geekbang.org/account/avatar/00/24/f5/96/4e3dd4e1.jpg","comment_is_top":false,"comment_ctime":1680398849,"is_pvip":false,"replies":[{"id":135732,"content":"å› ä¸ºChatPDFæ²¡æœ‰å¼€æºï¼Œæ‰€ä»¥å…·ä½“å®ƒæ˜¯æ€ä¹ˆåšçš„æˆ‘ä¸çŸ¥é“ã€‚\n\nå…¶å®æœ€åˆç†çš„æ–¹å¼ï¼Œæ˜¯æ—¢ä½¿ç”¨Embeddingï¼Œä¹Ÿå¯ä»¥ç”¨å…¶ä»–çš„NLPæŠ€æœ¯ï¼ŒåŒ…æ‹¬æ‰¾ä¸€äº›å…³é”®å­—ï¼ˆåˆ©ç”¨POSåˆ†è¯ï¼‰ï¼Œåšå‘½åå®ä½“è¯†åˆ«ç­‰ç­‰ï¼Œæ¥åšæ®µè½çš„æœç´¢ï¼ˆå¬å›ï¼‰ã€‚\n\nç„¶åé€šè¿‡ChatGPTçš„APIå†æ ¹æ®å†…å®¹åšé—®ç­”ã€‚å…¶å®è¦åšå¥½ç´¢å¼•è¿˜æ˜¯æœ‰å¾ˆå¤šæŠ€å·§çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1680582774,"ip_address":"ä¸Šæµ·","comment_id":371827,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100541001,"comment_content":"è¯·æ•™ä¸€ä¸‹å¾è€å¸ˆï¼Œchatpdfçš„å®ç°ä¹Ÿæ˜¯åŸºäºembeddingæ¥å¯¹ä¸Šä¼ çš„pdfå»ºç«‹ä¸€ä¸ªindexä¹ˆï¼Ÿchatpdfè‡ªå·±å›ç­”æ‰€ä¸æ˜¯åŸºäºembeddingå»ºç«‹çš„indexï¼Œé¡¾å·¦å³è€Œè¨€ä»–ï¼Œè¯´æ˜¯ç”¨äº†å…¶ä»–æŠ€æœ¯ï¼Œæ¯”å¦‚æäº†part-of-speech tagging å’Œ named entity recognitionã€‚æ‰€ä»¥å®ƒç”¨å…¶ä»–æŠ€æœ¯å¯¹pdfåšäº†ä¸€ä¸ªæ‘˜è¦æ–‡ä»¶å¯¹ä¹ˆï¼Ÿä½¿ç”¨chatgpt apiæ˜¯ä¸ºäº†æ›´å¥½çš„ç†è§£è‡ªç„¶è¯­è¨€ï¼ˆæŠŠç”¨æˆ·è¯­è¨€è½¬æ¢æˆå¯ä»¥part-of-speechæˆ–è€…å…¶ä»–ä¸“ç”¨åº“çš„æ“ä½œï¼Œç±»ä¼¼äºembeddingçš„cosine-similarityæ“ä½œï¼Œç„¶åå†æŠŠç­”æ¡ˆç”¨è‡ªç„¶è¯­è¨€å›å¤ï¼‰ï¼Ÿéå¸¸å¥½å¥‡å¦‚ä½•å®ç°ï¼Œè¯·å¾è€å¸ˆåˆ†äº«ä¸€ä¸‹æ´è§ï¼Œè°¢è°¢ï¼ä»¥ä¸‹æ˜¯chatpdfå›å¤ï¼š In order to analyze the text of a PDF file, a PDF reader is used to extract the text from the file. This text is then passed to me as input, and I use natural language processing (NLP) techniques to analyze it.\n first step in my analysis involves breaking down the text into smaller units such as words or phrases. This is done using a process called tokenization, which involves splitting the text into individual tokens based on whitespace and punctuation.\n\nOnce the text has been tokenized, I use various NLP techniques to extract meaning from it. For example, I might use part-of-speech tagging to identify the grammatical structure of sentences, or named entity recognition to identify specific entities such as people, places, or organizations.","like_count":6,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":612231,"discussion_content":"å› ä¸ºChatPDFæ²¡æœ‰å¼€æºï¼Œæ‰€ä»¥å…·ä½“å®ƒæ˜¯æ€ä¹ˆåšçš„æˆ‘ä¸çŸ¥é“ã€‚\n\nå…¶å®æœ€åˆç†çš„æ–¹å¼ï¼Œæ˜¯æ—¢ä½¿ç”¨Embeddingï¼Œä¹Ÿå¯ä»¥ç”¨å…¶ä»–çš„NLPæŠ€æœ¯ï¼ŒåŒ…æ‹¬æ‰¾ä¸€äº›å…³é”®å­—ï¼ˆåˆ©ç”¨POSåˆ†è¯ï¼‰ï¼Œåšå‘½åå®ä½“è¯†åˆ«ç­‰ç­‰ï¼Œæ¥åšæ®µè½çš„æœç´¢ï¼ˆå¬å›ï¼‰ã€‚\n\nç„¶åé€šè¿‡ChatGPTçš„APIå†æ ¹æ®å†…å®¹åšé—®ç­”ã€‚å…¶å®è¦åšå¥½ç´¢å¼•è¿˜æ˜¯æœ‰å¾ˆå¤šæŠ€å·§çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1680582774,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":371623,"user_name":"å—¯å“¼ğŸ˜¬","can_delete":false,"product_type":"c1","uid":1522613,"ip_address":"å¹¿ä¸œ","ucode":"43BCCCCB6820D9","user_header":"https://static001.geekbang.org/account/avatar/00/17/3b/b5/3bb54136.jpg","comment_is_top":false,"comment_ctime":1680110595,"is_pvip":false,"replies":[{"id":135759,"content":"å…ˆæŠŠä»£ç è·‘èµ·æ¥æœ‰ç‚¹ä½“æ„Ÿã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1680587015,"ip_address":"ä¸Šæµ·","comment_id":371623,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100541001,"comment_content":"ğŸ˜°ç³Ÿç³•ï¼Œæ²¡æœ‰ NLP åŸºç¡€çš„æ™®é€šå¼€å‘äººå‘˜è¶Šçœ‹è¶Šè¿·ç³Šã€‚","like_count":6,"discussions":[{"author":{"id":1080418,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/OwlfSZBK8I7dpGtLia70p3e4cXib5ZsbY1vIpXiaWtAowoawJQFNVibGurpKlDwIBXmqZZpHx7RtSwCEyjOepicjstA/132","nickname":"ytl","note":"","ucode":"AB0D1F77CD0B7D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":611521,"discussion_content":"gptå¤§å¤§é™ä½äº†nlpä½¿ç”¨çš„é—¨æ§›ï¼Œcodingèµ·æ¥å°±ä¸è¿·ç³Šäº†","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1680147841,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æ±Ÿè¥¿","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":612265,"discussion_content":"å…ˆæŠŠä»£ç è·‘èµ·æ¥æœ‰ç‚¹ä½“æ„Ÿã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1680587015,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":374827,"user_name":"é™ˆé¹","can_delete":false,"product_type":"c1","uid":1574748,"ip_address":"ç«‹é™¶å®›","ucode":"777F23D9178A6A","user_header":"https://static001.geekbang.org/account/avatar/00/18/07/5c/2b75c836.jpg","comment_is_top":false,"comment_ctime":1684467448,"is_pvip":false,"replies":[{"id":136877,"content":"è¿™ä¸ªè®­ç»ƒï¼Œæ˜¯æŒ‡ä¼ ç»Ÿçš„æœºå™¨å­¦ä¹ æ¨¡å‹è®­ç»ƒã€‚\n\næœ‰é¢å¤–çš„ä¸€ç»„â€œå‚æ•°â€ï¼Œè¿™ä¸ªå‚æ•°å¾ˆå°‘ï¼Œæ¯”å¦‚1537ä¸ªï¼ˆæ­£å¥½å’Œæˆ‘ä»¬çš„Embeddingçš„ç»´åº¦æ•°é‡+1ï¼‰ï¼Œå°†embeddingå†æ˜ å°„åˆ°æˆ‘ä»¬æƒ³è¦çš„åˆ†ç±»é—®é¢˜ã€‚\n\nå°æ¨¡å‹è®­ç»ƒçš„è¿‡ç¨‹å°±æ˜¯è‡ªåŠ¨ä¼˜åŒ–è¿™ç»„é¢å¤–å‚æ•°çš„é—®é¢˜ï¼Œå‚æ•°æƒ³å­˜åœ¨å“ªé‡Œéƒ½å¯ä»¥ã€‚ä¸‹æ¬¡è¦ç”¨çš„æ—¶å€™åŠ è½½è¿™ç»„å‚æ•°å°±å¯ä»¥äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1684754448,"ip_address":"ä¸Šæµ·","comment_id":374827,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100541001,"comment_content":"è€å¸ˆå¥½ï¼Œæˆ‘ç†è§£ç¬¬5å’Œç¬¬7èŠ‚è¯´çš„æ˜¯ï¼šåˆ©ç”¨openaiå¤§è¯­è¨€æ¨¡å‹çš„apiï¼Œå°†æ•°æ®embeddingï¼Œç”¨embeddingçš„ç»“æœå»è®­ç»ƒå…¶ä»–çš„æ¨¡å‹ï¼Œæ¯”å¦‚èšç±»æ¨¡å‹æˆ–åˆ†ç±»æ¨¡å‹ã€‚\n\næˆ‘ä¸å¤ªç†è§£è¿™é‡Œçš„â€œè®­ç»ƒâ€æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ\n\næŠŠembeddingåçš„æ•°æ®é›†ç»™åˆ°å°æ¨¡å‹ç®—æ³•ï¼Œå°æ¨¡å‹ä¼šå¾—å‡ºåˆ†ç±»æˆ–èšç±»çš„ç»“æœï¼Œè¯¾ç¨‹ä¸­ï¼Œè€å¸ˆè¯´è¿™æ ·åšçš„æ•ˆæœæ¯”è¾ƒå¥½ã€‚é‚£ä¹ˆè¿™é‡Œçš„â€œè®­ç»ƒâ€ä½“ç°åœ¨å“ªé‡Œå‘¢ï¼Ÿ\n\nç”¨embeddingåçš„æ•°æ®ç»™åˆ°å°æ¨¡å‹ï¼Œå°æ¨¡å‹å°±è‡ªåŠ¨ä¼˜åŒ–å†…éƒ¨å‚æ•°äº†ï¼Ÿè¿˜æ˜¯è¯´è¯¾ç¨‹ä¸­æ²¡æœ‰æ¶‰åŠåˆ°æ¨¡å‹è®­ç»ƒçš„å†…å®¹ï¼Ÿ\nå¦‚æœè¿™æ ·å°±æ˜¯è®­ç»ƒäº†å°æ¨¡å‹ï¼Œé‚£ä¹ˆè®­ç»ƒåçš„å‚æ•°æ˜¯å¦‚ä½•å­˜å‚¨çš„ï¼Ÿä¸‹æ¬¡è°ƒç”¨åï¼Œè¿™æ¬¡è®­ç»ƒçš„å‚æ•°è¿˜å­˜åœ¨å—ï¼Ÿ\n\nè°¢è°¢è€å¸ˆè§£æƒ‘","like_count":2,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":619067,"discussion_content":"è¿™ä¸ªè®­ç»ƒï¼Œæ˜¯æŒ‡ä¼ ç»Ÿçš„æœºå™¨å­¦ä¹ æ¨¡å‹è®­ç»ƒã€‚\n\næœ‰é¢å¤–çš„ä¸€ç»„â€œå‚æ•°â€ï¼Œè¿™ä¸ªå‚æ•°å¾ˆå°‘ï¼Œæ¯”å¦‚1537ä¸ªï¼ˆæ­£å¥½å’Œæˆ‘ä»¬çš„Embeddingçš„ç»´åº¦æ•°é‡+1ï¼‰ï¼Œå°†embeddingå†æ˜ å°„åˆ°æˆ‘ä»¬æƒ³è¦çš„åˆ†ç±»é—®é¢˜ã€‚\n\nå°æ¨¡å‹è®­ç»ƒçš„è¿‡ç¨‹å°±æ˜¯è‡ªåŠ¨ä¼˜åŒ–è¿™ç»„é¢å¤–å‚æ•°çš„é—®é¢˜ï¼Œå‚æ•°æƒ³å­˜åœ¨å“ªé‡Œéƒ½å¯ä»¥ã€‚ä¸‹æ¬¡è¦ç”¨çš„æ—¶å€™åŠ è½½è¿™ç»„å‚æ•°å°±å¯ä»¥äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1684754448,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":373806,"user_name":"gc","can_delete":false,"product_type":"c1","uid":1159933,"ip_address":"ä¸Šæµ·","ucode":"F45A536FDEF37D","user_header":"https://static001.geekbang.org/account/avatar/00/11/b2/fd/e10b39e4.jpg","comment_is_top":false,"comment_ctime":1683189445,"is_pvip":false,"replies":[{"id":136867,"content":"ä½ æƒ³è¦ä»€ä¹ˆæ ·çš„æ ‡ç­¾ï¼Ÿ\n\næ ¹æ®ä¹¦çš„ä»‹ç»ï¼Œè€Œä¸æ˜¯å…¨æ–‡æ¥æ‰“æ ‡ç­¾ä¸€èˆ¬å°±è¶³å¤Ÿäº†å§ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1684753033,"ip_address":"ä¸Šæµ·","comment_id":373806,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100541001,"comment_content":"è€å¸ˆï¼Œæœ¬äººå°ç™½ï¼Œé—®ä¸ªåˆ«çš„é—®é¢˜ï¼Œå¦‚ä½•å¯¹ä¹¦ç±è¿›è¡Œåˆ†ç±»èšåˆå‘¢ï¼Œæ¯”å¦‚ä¸€æœ¬ä¹¦æ‹†å‡ºä¸€äº›åˆ†ç±»æ ‡ç­¾ï¼Œèƒ½æä¾›ä¸€äº›æ€è·¯å—ï¼Ÿè¿™ç§å¤§æ–‡æœ¬çš„å¥½åƒæœ¬ç« èŠ‚æ–¹å¼å¹¶ä¸é€‚åˆï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":619054,"discussion_content":"ä½ æƒ³è¦ä»€ä¹ˆæ ·çš„æ ‡ç­¾ï¼Ÿ\n\næ ¹æ®ä¹¦çš„ä»‹ç»ï¼Œè€Œä¸æ˜¯å…¨æ–‡æ¥æ‰“æ ‡ç­¾ä¸€èˆ¬å°±è¶³å¤Ÿäº†å§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1684753033,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1401327,"avatar":"https://static001.geekbang.org/account/avatar/00/15/61/ef/ac5e914d.jpg","nickname":"éº¦è€€é”‹","note":"","ucode":"077DA831185C01","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":617041,"discussion_content":"å¯¹äºä¹¦ç±ï¼Œæˆ‘è§‰å¾—å¯ä»¥å€ŸåŠ©ä¹¦ç±çš„ç›®å½•ã€æ‘˜è¦ã€è¯„è®ºç­‰æ¥ç»™chatgptåšembeddingã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1683278330,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":373465,"user_name":"Geek_32772e","can_delete":false,"product_type":"c1","uid":1446158,"ip_address":"åŒ—äº¬","ucode":"2850EF64F4775F","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoribOUgcicu1sOqZZVtPqpSDSS43vicxW0GesxQeBRjUC47CzulKSzYNj2aMg9YOZDdjPdAZxS3jNcQ/132","comment_is_top":false,"comment_ctime":1682535098,"is_pvip":false,"replies":[{"id":136509,"content":"æ„Ÿè§‰æ˜¯ç½‘ç»œæˆ–è€…æºIPåœ¨å›½å†…çš„é—®é¢˜ï¼ŸOpenAIç›®å‰å¤§é™†å’Œé¦™æ¸¯åº”è¯¥éƒ½ä¸è®©è®¿é—®","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1683091443,"ip_address":"ä¸Šæµ·","comment_id":373465,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100541001,"comment_content":"ç¬¬ä¸€æ®µä»£ç 403Forbiddenäº†ï¼ŒæŠ¥é”™å¦‚ä¸‹ï¼šurllib.error.HTTPError: HTTP Error 403: Forbidden","like_count":2,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":616749,"discussion_content":"æ„Ÿè§‰æ˜¯ç½‘ç»œæˆ–è€…æºIPåœ¨å›½å†…çš„é—®é¢˜ï¼ŸOpenAIç›®å‰å¤§é™†å’Œé¦™æ¸¯åº”è¯¥éƒ½ä¸è®©è®¿é—®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1683091443,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2846589,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/6f/7d/3abf607b.jpg","nickname":"MWF","note":"","ucode":"2436883403543A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":629433,"discussion_content":"å¼€äº†æ¢¯å­å°±èƒ½æ­£å¸¸ä¸‹è½½äº†ï¼Œå¦åˆ™403","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1697070785,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1222233,"avatar":"https://static001.geekbang.org/account/avatar/00/12/a6/59/1689ea0c.jpg","nickname":"é‡‘hb.Ryan å†·ç©ºæ°£é§•åˆ°","note":"","ucode":"CAD363576696E4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":618762,"discussion_content":"figshare.com åœ¨å›½å†…è®¿é—®ä¼šè¿”å›403","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1684510491,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":372414,"user_name":"å–çƒ§çƒ¤å¤«æ–¯åŸº","can_delete":false,"product_type":"c1","uid":2081124,"ip_address":"å¹¿ä¸œ","ucode":"EC9DB8C4A3C21A","user_header":"https://static001.geekbang.org/account/avatar/00/1f/c1/64/3b994bd5.jpg","comment_is_top":false,"comment_ctime":1681118518,"is_pvip":false,"replies":[{"id":135939,"content":"ä¸€èˆ¬éƒ½æ˜¯è¯•å‡ ä¸ªå€¼ç„¶åæ¯”è¾ƒä¸€äº›è¯„ä»·æŒ‡æ ‡ã€‚\n\næ¥è‡ªchatgptçš„å›ç­”ï¼Œä¸ç†è§£æŒ‡æ ‡çš„å®šä¹‰å¯ä»¥è¿›ä¸€æ­¥é—®ä»–ã€‚å¤§å®¶ä¸€å®šè¦ä¹ æƒ¯èµ·æ¥æœ‰é—®é¢˜å¯ä»¥ä¸æ–­è¿½é—®ChatGPTæ¥å›ç­”\n\nèšç±»ç®—æ³•çš„èšç±»æ•°é‡æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„å‚æ•°ï¼Œå¯¹èšç±»ç»“æœå½±å“å¾ˆå¤§ã€‚ä»¥ä¸‹æ˜¯å‡ ç§æµ‹è¯•èšç±»æ•°é‡åˆé€‚çš„æ–¹æ³•ï¼š\n\n1. Elbow methodï¼ˆè‚˜éƒ¨æ³•åˆ™ï¼‰ï¼šéšç€èšç±»æ•°é‡çš„å¢åŠ ï¼Œèšç±»æ•ˆæœä¸æ–­å¢åŠ ï¼Œä½†æ˜¯èšç±»æ•°é‡è¾¾åˆ°ä¸€å®šç¨‹åº¦åï¼Œèšç±»æ•ˆæœä¸å†æ˜æ˜¾æé«˜ï¼Œè¿™ä¸ªç‚¹ç§°ä¸ºâ€œæ‹ç‚¹â€ï¼Œä¹Ÿç§°ä¸ºè‚˜éƒ¨ç‚¹ã€‚é€šè¿‡åœ¨ä¸åŒçš„èšç±»æ•°é‡ä¸‹è®¡ç®—èšç±»è¯¯å·®å¹¶ç»˜åˆ¶æˆå›¾è¡¨ï¼Œæ‰¾åˆ°èšç±»è¯¯å·®å¼€å§‹éª¤é™çš„ç‚¹ä½œä¸ºèšç±»æ•°é‡çš„å‚è€ƒã€‚\n\n2. Silhouette methodï¼ˆè½®å»“ç³»æ•°æ³•ï¼‰ï¼šé€šè¿‡è®¡ç®—æ¯ä¸ªæ ·æœ¬çš„è½®å»“ç³»æ•°ï¼Œå¾—åˆ°å¹³å‡è½®å»“ç³»æ•°ï¼Œé€šè¿‡ä¸åŒèšç±»æ•°é‡ä¸‹çš„å¹³å‡è½®å»“ç³»æ•°æ¥ç¡®å®šæœ€åˆé€‚çš„èšç±»æ•°é‡ã€‚\n\n3. Gap statistic methodï¼ˆé—´éš”ç»Ÿè®¡æ³•ï¼‰ï¼šä¸éšæœºæ•°æ®æ¯”è¾ƒå¾—åˆ°ç†è®ºä¸Šæœ€ä½³èšç±»æ•°ç›®ï¼ŒåŸç†æ˜¯ç”¨åŸå§‹æ•°æ®ä¸éšæœºæ•°æ®æ¯”è¾ƒå¾—åˆ°ä¸€ä¸ªç»Ÿè®¡å€¼ï¼Œéšç€èšç±»æ•°é‡çš„å¢åŠ ï¼Œç»Ÿè®¡å€¼å…ˆå¢åŠ åå‡å°‘ï¼Œå–çš„å€¼ä¸éšæœºæ•°æ®çš„å·®è·æœ€å¤§çš„ç‚¹ä¸ºæœ€ä½³èšç±»æ•°ã€‚\n\n4. DBSCANï¼ˆåŸºäºå¯†åº¦çš„èšç±»ç®—æ³•ï¼‰ï¼šè¯¥ç®—æ³•æœ¬èº«æ˜¯æ²¡æœ‰èšç±»æ•°é‡çš„é™åˆ¶ï¼Œä¼šè‡ªåŠ¨æ ¹æ®æ•°æ®æ ·æœ¬çš„å¯†åº¦æ¥ç¡®å®šèšç±»æ•°é‡ã€‚å¯ä»¥é€šè¿‡è°ƒæ•´èšç±»åŠå¾„å’Œæ ·æœ¬å¯†åº¦å‚æ•°æ¥è°ƒæ•´èšç±»æ•°é‡ã€‚\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸åŒçš„æ•°æ®é›†å’Œèšç±»ç®—æ³•å¯èƒ½é€‚ç”¨ä¸åŒçš„æ–¹æ³•ï¼Œå¯»æ‰¾æœ€åˆé€‚çš„èšç±»æ•°é‡éœ€è¦è¿›è¡Œä¸€å®šçš„å°è¯•å’Œæ¯”è¾ƒã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1681129400,"ip_address":"ç¾å›½","comment_id":372414,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100541001,"comment_content":"è¯·é—®è€å¸ˆï¼Œé¢å¯¹å¤§é‡éšæœºæ–‡æœ¬ï¼Œèšç±»çš„ä¸ªæ•°å¦‚ä½•ç¡®å®šå‘¢ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":613109,"discussion_content":"ä¸€èˆ¬éƒ½æ˜¯è¯•å‡ ä¸ªå€¼ç„¶åæ¯”è¾ƒä¸€äº›è¯„ä»·æŒ‡æ ‡ã€‚\n\næ¥è‡ªchatgptçš„å›ç­”ï¼Œä¸ç†è§£æŒ‡æ ‡çš„å®šä¹‰å¯ä»¥è¿›ä¸€æ­¥é—®ä»–ã€‚å¤§å®¶ä¸€å®šè¦ä¹ æƒ¯èµ·æ¥æœ‰é—®é¢˜å¯ä»¥ä¸æ–­è¿½é—®ChatGPTæ¥å›ç­”\n\nèšç±»ç®—æ³•çš„èšç±»æ•°é‡æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„å‚æ•°ï¼Œå¯¹èšç±»ç»“æœå½±å“å¾ˆå¤§ã€‚ä»¥ä¸‹æ˜¯å‡ ç§æµ‹è¯•èšç±»æ•°é‡åˆé€‚çš„æ–¹æ³•ï¼š\n\n1. Elbow methodï¼ˆè‚˜éƒ¨æ³•åˆ™ï¼‰ï¼šéšç€èšç±»æ•°é‡çš„å¢åŠ ï¼Œèšç±»æ•ˆæœä¸æ–­å¢åŠ ï¼Œä½†æ˜¯èšç±»æ•°é‡è¾¾åˆ°ä¸€å®šç¨‹åº¦åï¼Œèšç±»æ•ˆæœä¸å†æ˜æ˜¾æé«˜ï¼Œè¿™ä¸ªç‚¹ç§°ä¸ºâ€œæ‹ç‚¹â€ï¼Œä¹Ÿç§°ä¸ºè‚˜éƒ¨ç‚¹ã€‚é€šè¿‡åœ¨ä¸åŒçš„èšç±»æ•°é‡ä¸‹è®¡ç®—èšç±»è¯¯å·®å¹¶ç»˜åˆ¶æˆå›¾è¡¨ï¼Œæ‰¾åˆ°èšç±»è¯¯å·®å¼€å§‹éª¤é™çš„ç‚¹ä½œä¸ºèšç±»æ•°é‡çš„å‚è€ƒã€‚\n\n2. Silhouette methodï¼ˆè½®å»“ç³»æ•°æ³•ï¼‰ï¼šé€šè¿‡è®¡ç®—æ¯ä¸ªæ ·æœ¬çš„è½®å»“ç³»æ•°ï¼Œå¾—åˆ°å¹³å‡è½®å»“ç³»æ•°ï¼Œé€šè¿‡ä¸åŒèšç±»æ•°é‡ä¸‹çš„å¹³å‡è½®å»“ç³»æ•°æ¥ç¡®å®šæœ€åˆé€‚çš„èšç±»æ•°é‡ã€‚\n\n3. Gap statistic methodï¼ˆé—´éš”ç»Ÿè®¡æ³•ï¼‰ï¼šä¸éšæœºæ•°æ®æ¯”è¾ƒå¾—åˆ°ç†è®ºä¸Šæœ€ä½³èšç±»æ•°ç›®ï¼ŒåŸç†æ˜¯ç”¨åŸå§‹æ•°æ®ä¸éšæœºæ•°æ®æ¯”è¾ƒå¾—åˆ°ä¸€ä¸ªç»Ÿè®¡å€¼ï¼Œéšç€èšç±»æ•°é‡çš„å¢åŠ ï¼Œç»Ÿè®¡å€¼å…ˆå¢åŠ åå‡å°‘ï¼Œå–çš„å€¼ä¸éšæœºæ•°æ®çš„å·®è·æœ€å¤§çš„ç‚¹ä¸ºæœ€ä½³èšç±»æ•°ã€‚\n\n4. DBSCANï¼ˆåŸºäºå¯†åº¦çš„èšç±»ç®—æ³•ï¼‰ï¼šè¯¥ç®—æ³•æœ¬èº«æ˜¯æ²¡æœ‰èšç±»æ•°é‡çš„é™åˆ¶ï¼Œä¼šè‡ªåŠ¨æ ¹æ®æ•°æ®æ ·æœ¬çš„å¯†åº¦æ¥ç¡®å®šèšç±»æ•°é‡ã€‚å¯ä»¥é€šè¿‡è°ƒæ•´èšç±»åŠå¾„å’Œæ ·æœ¬å¯†åº¦å‚æ•°æ¥è°ƒæ•´èšç±»æ•°é‡ã€‚\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸åŒçš„æ•°æ®é›†å’Œèšç±»ç®—æ³•å¯èƒ½é€‚ç”¨ä¸åŒçš„æ–¹æ³•ï¼Œå¯»æ‰¾æœ€åˆé€‚çš„èšç±»æ•°é‡éœ€è¦è¿›è¡Œä¸€å®šçš„å°è¯•å’Œæ¯”è¾ƒã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1681129400,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ç¾å›½","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":374633,"user_name":"Hugh","can_delete":false,"product_type":"c1","uid":1029016,"ip_address":"ä¸Šæµ·","ucode":"126A56632CB09A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b3/98/2ad8b465.jpg","comment_is_top":false,"comment_ctime":1684243190,"is_pvip":false,"replies":[{"id":136795,"content":"å•Šï¼Œå¯¹ã€‚å› ä¸ºæˆ‘ç”¨ Colab æˆ–è€… VSCode å†…ç½®çš„é»˜è®¤ä¸éœ€è¦importï¼Œæˆ‘å’Œç¼–è¾‘åŒæ­¥ä¿®æ”¹ä¸€ä¸‹","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1684722898,"ip_address":"æ–°åŠ å¡","comment_id":374633,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100541001,"comment_content":"display(new_df) æ²¡æœ‰å¼•å…¥ from IPython.display import display","like_count":1,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":618931,"discussion_content":"å•Šï¼Œå¯¹ã€‚å› ä¸ºæˆ‘ç”¨ Colab æˆ–è€… VSCode å†…ç½®çš„é»˜è®¤ä¸éœ€è¦importï¼Œæˆ‘å’Œç¼–è¾‘åŒæ­¥ä¿®æ”¹ä¸€ä¸‹","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1684722899,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ–°åŠ å¡","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":372580,"user_name":"suzg","can_delete":false,"product_type":"c1","uid":1001561,"ip_address":"åŒ—äº¬","ucode":"C3883EBA834689","user_header":"https://static001.geekbang.org/account/avatar/00/0f/48/59/439a172e.jpg","comment_is_top":false,"comment_ctime":1681298693,"is_pvip":false,"replies":[{"id":136110,"content":"æœ‰å¯èƒ½ï¼Œä½ ä¹Ÿå¯ä»¥æ‹¿è‡ªå·±çš„æ•°æ®é›†è¯•ä¸€ä¸‹å‘€ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1681614182,"ip_address":"ä¸Šæµ·","comment_id":372580,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100541001,"comment_content":"æœ‰æ²¡æœ‰å¯èƒ½æ˜¯è¿™ä¸ªnewsgroupæ•°æ®é›†å°±åœ¨openaiçš„è®­ç»ƒæ•°æ®ä¸­ï¼Œæ‰€ä»¥æ•ˆæœå¥½","like_count":1,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":613952,"discussion_content":"æœ‰å¯èƒ½ï¼Œä½ ä¹Ÿå¯ä»¥æ‹¿è‡ªå·±çš„æ•°æ®é›†è¯•ä¸€ä¸‹å‘€ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1681614182,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":371680,"user_name":"å–çƒ§çƒ¤å¤«æ–¯åŸº","can_delete":false,"product_type":"c1","uid":2081124,"ip_address":"å¹¿ä¸œ","ucode":"EC9DB8C4A3C21A","user_header":"https://static001.geekbang.org/account/avatar/00/1f/c1/64/3b994bd5.jpg","comment_is_top":false,"comment_ctime":1680170249,"is_pvip":false,"replies":[{"id":135758,"content":"ğŸ‘ï¼Œæ˜¯çš„ï¼Œè¿™ä¸ªæˆ‘åœ¨æµ‹è¯•çš„æ—¶å€™æ²¡æœ‰è€ƒè™‘ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1680586999,"ip_address":"ä¸Šæµ·","comment_id":371680,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100541001,"comment_content":"embedding_df[embedding_df.cluster == i].text.sample(items_per_cluster, random_state=42).values\nè·å–çš„éšæœºæ–‡æœ¬è¿‡é•¿ï¼Œå¯èƒ½ä¼šè¶…å‡ºopenaiçš„tokené™åˆ¶ï¼Œå¯¼è‡´æŠ¥é”™ã€‚è¿˜éœ€è¦è®¡ç®—ä¸€ä¸‹conentçš„tokené•¿åº¦","like_count":1,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":612264,"discussion_content":"ğŸ‘ï¼Œæ˜¯çš„ï¼Œè¿™ä¸ªæˆ‘åœ¨æµ‹è¯•çš„æ—¶å€™æ²¡æœ‰è€ƒè™‘ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1680586999,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":371649,"user_name":"www","can_delete":false,"product_type":"c1","uid":1898338,"ip_address":"å¹¿ä¸œ","ucode":"ADC9BC655EA16C","user_header":"https://static001.geekbang.org/account/avatar/00/1c/f7/62/947004d0.jpg","comment_is_top":false,"comment_ctime":1680147644,"is_pvip":false,"replies":null,"discussion_count":7,"race_medal":0,"score":3,"product_id":100541001,"comment_content":"ä¸æ‡‚NLPï¼Œè·Ÿç€åœ¨colabè·‘äº†ä¸€éï¼Œæœ‰é—®é¢˜å°±é—®chatgptï¼Œæœ‰ç§ä¸æ»‘çš„ä½“éªŒ\n","like_count":11,"discussions":[{"author":{"id":1452167,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJcwXucibksEYRSYg6icjibzGa7efcMrCsGec2UwibjTd57icqDz0zzkEEOM2pXVju60dibzcnQKPfRkN9g/132","nickname":"Geek_93970d","note":"","ucode":"52AC308BEC7737","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":621774,"discussion_content":"merge left_on, right_index=True\nChatGPT\nå½“åœ¨ merge() æ–¹æ³•ä¸­è®¾ç½®å‚æ•° left_on å’Œ right_index=True æ—¶ï¼Œè¡¨ç¤ºä½¿ç”¨å·¦ä¾§ DataFrame çš„æŒ‡å®šåˆ—ä½œä¸ºè¿æ¥é”®ï¼ŒåŒæ—¶ä½¿ç”¨å³ä¾§ DataFrame çš„ç´¢å¼•ä½œä¸ºè¿æ¥é”®è¿›è¡Œåˆå¹¶ã€‚\n\nä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼š\n\npython\nCopy code\nimport pandas as pd\n\n# åˆ›å»ºç¤ºä¾‹ DataFrame\ndf1 = pd.DataFrame({&#39;ID&#39;: [1, 2, 3, 4],\n                    &#39;Name&#39;: [&#39;Alice&#39;, &#39;Bob&#39;, &#39;Charlie&#39;, &#39;David&#39;]})\n\ndf2 = pd.DataFrame({&#39;Age&#39;: [25, 30, 35, 40]},\n                   index=[3, 4, 5, 6])\n\n# ä½¿ç”¨ merge() æ–¹æ³•è¿›è¡Œåˆå¹¶ï¼Œleft_on=&#39;ID&#39;ï¼Œright_index=True\nmerged_df = df1.merge(df2, left_on=&#39;ID&#39;, right_index=True)\nprint(merged_df)\nè¾“å‡ºç»“æœï¼š\n\nCopy code\n   ID     Name  Age\n2   3  Charlie   25\n3   4    David   30\nåœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸¤ä¸ª DataFrameï¼šdf1 å’Œ df2ã€‚df1 åŒ…å«åˆ— &#39;ID&#39; å’Œ &#39;Name&#39;ï¼Œè€Œ df2 åŒ…å«åˆ— &#39;Age&#39;ï¼Œå¹¶ä¸”ä½¿ç”¨ç´¢å¼•ä½œä¸ºè¿æ¥é”®ã€‚\n\né€šè¿‡ä½¿ç”¨ merge() æ–¹æ³•ï¼Œå¹¶è®¾ç½® left_on=&#39;ID&#39; å’Œ right_index=Trueï¼Œæˆ‘ä»¬æŒ‡å®šä½¿ç”¨ df1 çš„ &#39;ID&#39; åˆ—ä½œä¸ºè¿æ¥é”®ï¼ŒåŒæ—¶ä½¿ç”¨ df2 çš„ç´¢å¼•ä½œä¸ºè¿æ¥é”®è¿›è¡Œåˆå¹¶ã€‚è¿™æ ·ï¼Œåªæœ‰ &#39;ID&#39; åˆ—ä¸­çš„å€¼ä¸ df2 çš„ç´¢å¼•åŒ¹é…çš„è¡Œæ‰ä¼šè¢«åˆå¹¶ã€‚\n\nåœ¨åˆå¹¶ç»“æœä¸­ï¼Œåªæœ‰ &#39;ID&#39; åˆ—ä¸­çš„å€¼ä¸º 3 å’Œ 4 çš„è¡Œä¸ df2 çš„ç´¢å¼• 3 å’Œ 4 åŒ¹é…ï¼Œå› æ­¤åªæœ‰è¿™ä¸¤è¡Œè¢«åˆå¹¶ï¼Œå¹¶åŒ…å«äº† &#39;Age&#39; åˆ—çš„å€¼ã€‚\n\nè¿™ç§åˆå¹¶æ–¹å¼å…è®¸æˆ‘ä»¬ä½¿ç”¨å·¦ä¾§ DataFrame çš„ç‰¹å®šåˆ—ä¸å³ä¾§ DataFrame çš„ç´¢å¼•è¿›è¡Œè¿æ¥æ“ä½œï¼Œæ ¹æ®å…·ä½“çš„æ•°æ®ç»“æ„å’Œè¿æ¥éœ€æ±‚ï¼Œå¯ä»¥é€‰æ‹©åˆé€‚çš„è¿æ¥é”®ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1687619073,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1452167,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJcwXucibksEYRSYg6icjibzGa7efcMrCsGec2UwibjTd57icqDz0zzkEEOM2pXVju60dibzcnQKPfRkN9g/132","nickname":"Geek_93970d","note":"","ucode":"52AC308BEC7737","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":621769,"discussion_content":"pandas.DataFrame.T è¿™é‡Œ T æ˜¯å•¥ï¼Ÿ\nChatGPT\nåœ¨pandasä¸­ï¼ŒTæ˜¯DataFrameçš„ä¸€ä¸ªå±æ€§ï¼Œè¡¨ç¤ºè½¬ç½®ï¼ˆTransposeï¼‰ã€‚å®ƒç”¨äºå°†DataFrameçš„è¡Œå’Œåˆ—è¿›è¡Œäº¤æ¢ï¼Œå³å°†DataFrameçš„è¡Œå˜ä¸ºåˆ—ï¼Œåˆ—å˜ä¸ºè¡Œã€‚\n\nå½“ä½ è°ƒç”¨Tå±æ€§æ—¶ï¼Œå®ƒä¼šè¿”å›ä¸€ä¸ªæ–°çš„è½¬ç½®åçš„DataFrameï¼Œè€Œä¸ä¼šä¿®æ”¹åŸå§‹çš„DataFrameã€‚è½¬ç½®æ“ä½œå¯¹äºé‡æ–°æ’åˆ—æ•°æ®ä»¥æ»¡è¶³åˆ†æéœ€æ±‚æˆ–æ”¹å˜æ•°æ®ç»“æ„çš„å½¢çŠ¶éå¸¸æœ‰ç”¨ã€‚\n\nä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼š\n\npython\nCopy code\nimport pandas as pd\n\n# åˆ›å»ºä¸€ä¸ªDataFrame\ndata = {&#39;Name&#39;: [&#39;John&#39;, &#39;Jane&#39;, &#39;Mike&#39;],\n        &#39;Age&#39;: [25, 30, 35],\n        &#39;City&#39;: [&#39;New York&#39;, &#39;London&#39;, &#39;Paris&#39;]}\ndf = pd.DataFrame(data)\n\n# åŸå§‹DataFrame\nprint(df)\n# è¾“å‡ºï¼š\n#    Name  Age      City\n# 0  John   25  New York\n# 1  Jane   30    London\n# 2  Mike   35     Paris\n\n# è½¬ç½®åçš„DataFrame\ndf_transposed = df.T\nprint(df_transposed)\n# è¾“å‡ºï¼š\n#          0       1      2\n# Name   John    Jane   Mike\n# Age      25      30     35\n# City    New York London  Paris\nåœ¨è½¬ç½®åçš„DataFrameä¸­ï¼ŒåŸå§‹DataFrameçš„è¡Œæ ‡ç­¾å˜ä¸ºäº†åˆ—æ ‡ç­¾ï¼Œè€Œåˆ—æ ‡ç­¾å˜ä¸ºäº†è¡Œæ ‡ç­¾ã€‚è½¬ç½®åçš„DataFrameåœ¨è¿›è¡Œç´¢å¼•å’Œæ“ä½œæ—¶ï¼Œè¡Œå’Œåˆ—çš„è§’è‰²ä¹Ÿä¼šç›¸åº”åœ°äº¤æ¢ã€‚\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè½¬ç½®æ“ä½œä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„DataFrameï¼Œè€Œä¸æ˜¯ä¿®æ”¹åŸå§‹çš„DataFrameã€‚å¦‚æœéœ€è¦åœ¨åŸå§‹DataFrameä¸Šè¿›è¡Œè½¬ç½®æ“ä½œï¼Œå¯ä»¥ä½¿ç”¨df = df.Tæ¥è¦†ç›–åŸå§‹DataFrameã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1687611640,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1452167,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJcwXucibksEYRSYg6icjibzGa7efcMrCsGec2UwibjTd57icqDz0zzkEEOM2pXVju60dibzcnQKPfRkN9g/132","nickname":"Geek_93970d","note":"","ucode":"52AC308BEC7737","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":621765,"discussion_content":"fetch_20newsgroups å‡½æ•°å¦‚ä½•ä½¿ç”¨ï¼Œå‚æ•°çš„å«ä¹‰æ˜¯ä»€ä¹ˆ\nChatGPT\nfetch_20newsgroupsæ˜¯scikit-learnåº“ä¸­ç”¨äºä¸‹è½½å’ŒåŠ è½½20ä¸ªæ–°é—»ç»„æ•°æ®é›†çš„å‡½æ•°ã€‚è¿™ä¸ªæ•°æ®é›†æ˜¯ä¸€ä¸ªå¸¸ç”¨çš„æ–‡æœ¬åˆ†ç±»æ•°æ®é›†ï¼ŒåŒ…å«å¤§çº¦20,000ç¯‡æ–°é—»æ–‡æ¡£ï¼Œæ¶µç›–äº†20ä¸ªä¸åŒä¸»é¢˜çš„æ–°é—»ç»„ã€‚\n\nä»¥ä¸‹æ˜¯fetch_20newsgroupså‡½æ•°çš„å¸¸ç”¨å‚æ•°åŠå…¶å«ä¹‰ï¼š\n\nsubsetï¼šæŒ‡å®šè¦åŠ è½½çš„æ•°æ®å­é›†ã€‚å¯é€‰å€¼ä¸º&#39;train&#39;ï¼ˆè®­ç»ƒé›†ï¼‰, &#39;test&#39;ï¼ˆæµ‹è¯•é›†ï¼‰, &#39;all&#39;ï¼ˆæ‰€æœ‰æ–‡æ¡£ï¼‰ä¹‹ä¸€ã€‚é»˜è®¤å€¼ä¸º&#39;train&#39;ã€‚\n\ncategoriesï¼šæŒ‡å®šè¦åŠ è½½çš„æ–°é—»ç»„ä¸»é¢˜çš„åˆ—è¡¨ã€‚å¯ä»¥æ˜¯å…·ä½“çš„ä¸»é¢˜åç§°ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸»é¢˜åç§°çš„æ¨¡å¼ã€‚ä¾‹å¦‚ï¼Œ[&#39;comp.graphics&#39;, &#39;comp.os.ms-windows.misc&#39;]å°†åªåŠ è½½ä¸è®¡ç®—æœºå›¾å½¢å’ŒWindowsç›¸å…³çš„æ–‡æ¡£ã€‚é»˜è®¤å€¼ä¸ºNoneï¼Œè¡¨ç¤ºåŠ è½½æ‰€æœ‰ä¸»é¢˜ã€‚\n\nshuffleï¼šæŒ‡å®šæ˜¯å¦å¯¹æ•°æ®è¿›è¡Œéšæœºæ’åºã€‚é»˜è®¤å€¼ä¸ºTrueï¼Œè¡¨ç¤ºéšæœºæ’åºã€‚\n\nrandom_stateï¼šç”¨äºæ§åˆ¶æ•°æ®æ´—ç‰Œçš„éšæœºç§å­ã€‚å¦‚æœè®¾ç½®äº†ä¸€ä¸ªå›ºå®šçš„éšæœºç§å­ï¼Œæ¯æ¬¡è°ƒç”¨å‡½æ•°æ—¶å°†è·å¾—ç›¸åŒçš„æ•°æ®æ´—ç‰Œç»“æœã€‚\n\nremoveï¼šæŒ‡å®šæ˜¯å¦ç§»é™¤æ–‡æ¡£ä¸­çš„é‚®ä»¶å¤´ã€å¼•æ–‡ç­‰å…ƒä¿¡æ¯ã€‚é»˜è®¤å€¼ä¸º(&#39;headers&#39;, &#39;footers&#39;, &#39;quotes&#39;)ï¼Œè¡¨ç¤ºç§»é™¤é‚®ä»¶å¤´ã€é‚®ä»¶å°¾å’Œå¼•æ–‡ã€‚å¦‚æœè®¾ç½®ä¸ºNoneï¼Œåˆ™ä¸ä¼šç§»é™¤ä»»ä½•å…ƒä¿¡æ¯ã€‚\n\ndownload_if_missingï¼šæŒ‡å®šå¦‚æœæ•°æ®é›†æ–‡ä»¶ä¸å­˜åœ¨æ—¶æ˜¯å¦è‡ªåŠ¨ä¸‹è½½ã€‚é»˜è®¤å€¼ä¸ºTrueï¼Œè¡¨ç¤ºè‡ªåŠ¨ä¸‹è½½ã€‚\n\nreturn_X_yï¼šæŒ‡å®šæ˜¯å¦åªè¿”å›æ•°æ®å’Œç›®æ ‡å˜é‡ï¼ˆTrueï¼‰ï¼Œè¿˜æ˜¯è¿”å›ä¸€ä¸ªBunchå¯¹è±¡ï¼ˆFalseï¼‰ã€‚é»˜è®¤å€¼ä¸ºFalseã€‚\n\ndata_homeï¼šæŒ‡å®šæ•°æ®é›†çš„ç›®æ ‡æ–‡ä»¶å¤¹è·¯å¾„ã€‚æ•°æ®é›†å°†ä¼šè¢«ä¸‹è½½åˆ°è¯¥æ–‡ä»¶å¤¹ä¸­ã€‚å¦‚æœæœªæŒ‡å®šï¼Œåˆ™ä½¿ç”¨é»˜è®¤çš„scikit-learnæ•°æ®é›†ç›®å½•ã€‚\n\nä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨fetch_20newsgroupså‡½æ•°åŠ è½½è®­ç»ƒé›†æ•°æ®çš„ä¾‹å­ï¼š\n\npython\nCopy code\nfrom sklearn.datasets import fetch_20newsgroups\n\n# åŠ è½½è®­ç»ƒé›†æ•°æ®\ntrain_data = fetch_20newsgroups(subset=&#39;train&#39;)\n\n# æ‰“å°æ•°æ®é›†ä¿¡æ¯\nprint(train_data.DESCR)\n\n# è·å–æ•°æ®å’Œç›®æ ‡å˜é‡\nX_train = train_data.data\ny_train = train_data.target\nè¿™æ ·ï¼ŒX_trainå°†åŒ…å«è®­ç»ƒé›†çš„æ–‡æœ¬æ•°æ®ï¼Œy_trainå°†åŒ…å«ç›¸åº”çš„ç›®æ ‡å˜é‡ï¼ˆå¯¹åº”20ä¸ªæ–°é—»ç»„ä¸»é¢˜çš„æ•´æ•°æ ‡ç­¾ï¼‰ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1687609992,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1452167,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJcwXucibksEYRSYg6icjibzGa7efcMrCsGec2UwibjTd57icqDz0zzkEEOM2pXVju60dibzcnQKPfRkN9g/132","nickname":"Geek_93970d","note":"","ucode":"52AC308BEC7737","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":621768,"discussion_content":"at å’Œ loc çš„åŒºåˆ«\nChatGPT\natå’Œlocéƒ½æ˜¯pandasä¸­ç”¨äºè®¿é—®DataFrameå’ŒSeriesä¸­å•ä¸ªå…ƒç´ çš„æ–¹æ³•ï¼Œä½†å®ƒä»¬åœ¨ç”¨æ³•å’Œæ€§èƒ½ä¸Šæœ‰ä¸€äº›åŒºåˆ«ã€‚\n\natï¼šatæ–¹æ³•ç”¨äºé€šè¿‡æ ‡ç­¾ï¼ˆè¡Œæ ‡ç­¾å’Œåˆ—æ ‡ç­¾ï¼‰æ¥è®¿é—®å•ä¸ªå…ƒç´ ã€‚å®ƒå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š\n\nä½¿ç”¨è¡Œæ ‡ç­¾å’Œåˆ—æ ‡ç­¾ä½œä¸ºè¾“å…¥ï¼Œç±»ä¼¼äºdf.at[row_label, column_label]ã€‚\nåªèƒ½ç”¨äºè®¿é—®å•ä¸ªå…ƒç´ ï¼Œä¸æ”¯æŒå¯¹è¡Œæˆ–åˆ—è¿›è¡Œåˆ‡ç‰‡æ“ä½œã€‚\nè¿”å›çš„ç»“æœæ˜¯ä¸€ä¸ªæ ‡é‡å€¼ã€‚\natæ–¹æ³•çš„ä¼˜ç‚¹æ˜¯å®ƒæ¯”locæ›´å¿«ï¼Œå› ä¸ºå®ƒä¸éœ€è¦è¿”å›æ•´ä¸ªè¡Œæˆ–åˆ—çš„è§†å›¾ï¼Œè€Œæ˜¯ç›´æ¥è¿”å›å•ä¸ªå…ƒç´ çš„å€¼ã€‚å› æ­¤ï¼Œå¦‚æœä½ åªéœ€è¦è®¿é—®å•ä¸ªå…ƒç´ ï¼Œä½¿ç”¨atä¼šæ›´æœ‰æ•ˆç‡ã€‚\n\nç¤ºä¾‹ä½¿ç”¨atæ–¹æ³•è®¿é—®å•ä¸ªå…ƒç´ ï¼š\n\npython\nCopy code\nvalue = df.at[0, &#39;Name&#39;]\nlocï¼šlocæ–¹æ³•ç”¨äºé€šè¿‡æ ‡ç­¾ï¼ˆè¡Œæ ‡ç­¾å’Œåˆ—æ ‡ç­¾ï¼‰æ¥è®¿é—®æ•°æ®ï¼ŒåŒ…æ‹¬å•ä¸ªå…ƒç´ ã€å¤šä¸ªè¡Œæˆ–å¤šä¸ªåˆ—ã€‚å®ƒå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š\n\nä½¿ç”¨è¡Œæ ‡ç­¾å’Œåˆ—æ ‡ç­¾ä½œä¸ºè¾“å…¥ï¼Œç±»ä¼¼äºdf.loc[row_label, column_label]ã€‚\næ”¯æŒå¯¹è¡Œå’Œåˆ—è¿›è¡Œåˆ‡ç‰‡æ“ä½œï¼Œå¯ä»¥é€‰æ‹©å¤šä¸ªè¡Œå’Œåˆ—ã€‚\nè¿”å›çš„ç»“æœå¯ä»¥æ˜¯ä¸€ä¸ªæ ‡é‡å€¼ã€Serieså¯¹è±¡æˆ–DataFrameå¯¹è±¡ï¼Œå…·ä½“å–å†³äºé€‰æ‹©çš„æ•°æ®ã€‚\nlocæ–¹æ³•çš„ä¼˜ç‚¹æ˜¯å®ƒæä¾›äº†æ›´çµæ´»çš„é€‰æ‹©å’Œæ“ä½œæ•°æ®çš„åŠŸèƒ½ï¼Œå¯ä»¥æ ¹æ®æ ‡ç­¾è¿›è¡Œåˆ‡ç‰‡ã€ç­›é€‰å’Œåˆ†ç»„æ“ä½œã€‚\n\nç¤ºä¾‹ä½¿ç”¨locæ–¹æ³•è®¿é—®å•ä¸ªå…ƒç´ å’Œå¤šä¸ªè¡Œ/åˆ—ï¼š\n\npython\nCopy code\n# è®¿é—®å•ä¸ªå…ƒç´ \nvalue = df.loc[0, &#39;Name&#39;]\n\n# è®¿é—®å¤šä¸ªè¡Œå’Œåˆ—\nsubset = df.loc[1:3, [&#39;Name&#39;, &#39;Age&#39;]]\næ€»ç»“ï¼š\n\natç”¨äºé€šè¿‡æ ‡ç­¾è®¿é—®å•ä¸ªå…ƒç´ ï¼Œè¿”å›æ ‡é‡å€¼ã€‚\nlocç”¨äºé€šè¿‡æ ‡ç­¾è®¿é—®å•ä¸ªå…ƒç´ ã€å¤šä¸ªè¡Œæˆ–å¤šä¸ªåˆ—ï¼Œè¿”å›æ ‡é‡å€¼ã€Serieså¯¹è±¡æˆ–DataFrameå¯¹è±¡ã€‚\naté€‚ç”¨äºåªéœ€è¦è®¿é—®å•ä¸ªå…ƒç´ çš„åœºæ™¯ï¼Œå› ä¸ºå®ƒæ›´å¿«ã€‚\nlocæä¾›äº†æ›´çµæ´»çš„é€‰æ‹©å’Œæ“ä½œæ•°æ®çš„åŠŸèƒ½ï¼Œæ”¯æŒåˆ‡ç‰‡ã€ç­›é€‰å’Œåˆ†ç»„æ“ä½œã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1687611444,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1452167,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJcwXucibksEYRSYg6icjibzGa7efcMrCsGec2UwibjTd57icqDz0zzkEEOM2pXVju60dibzcnQKPfRkN9g/132","nickname":"Geek_93970d","note":"","ucode":"52AC308BEC7737","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":621767,"discussion_content":"loc å’Œ iloc åŒºåˆ«\nChatGPT\nlocå’Œilocéƒ½æ˜¯ç”¨äºåœ¨pandasä¸­è®¿é—®DataFrameå’ŒSeriesä¸­çš„æ•°æ®çš„æ–¹æ³•ï¼Œä½†å®ƒä»¬åœ¨ç´¢å¼•æ–¹å¼å’Œç”¨æ³•ä¸Šæœ‰ä¸€äº›åŒºåˆ«ã€‚\n\nlocï¼šlocæ˜¯åŸºäºæ ‡ç­¾çš„ç´¢å¼•ï¼Œç”¨äºé€šè¿‡æ ‡ç­¾ï¼ˆè¡Œç´¢å¼•å’Œåˆ—åï¼‰æ¥è®¿é—®æ•°æ®ã€‚\n\nä½¿ç”¨è¡Œæ ‡ç­¾å’Œåˆ—æ ‡ç­¾è¿›è¡Œç´¢å¼•ï¼Œç±»ä¼¼äºdf.loc[row_label, column_label]ã€‚\nè¡Œæ ‡ç­¾å¯ä»¥æ˜¯å•ä¸ªæ ‡ç­¾ã€æ ‡ç­¾åˆ—è¡¨æˆ–å¸ƒå°”æ¡ä»¶ã€‚\nåˆ—æ ‡ç­¾å¯ä»¥æ˜¯å•ä¸ªæ ‡ç­¾ã€æ ‡ç­¾åˆ—è¡¨æˆ–åˆ—åˆ‡ç‰‡ã€‚\nè¿”å›çš„ç»“æœæ˜¯ä¸€ä¸ªæ–°çš„DataFrameæˆ–Seriesï¼ŒåŒ…å«æ»¡è¶³æ¡ä»¶çš„æ•°æ®ã€‚\nä»¥ä¸‹æ˜¯locçš„ä¸€äº›ç¤ºä¾‹ï¼š\n\npython\nCopy code\n# é€šè¿‡è¡Œæ ‡ç­¾å’Œåˆ—æ ‡ç­¾è®¿é—®å•ä¸ªå…ƒç´ \ndf.loc[0, &#39;Name&#39;]\n\n# é€šè¿‡è¡Œæ ‡ç­¾å’Œåˆ—æ ‡ç­¾è®¿é—®æŸä¸€è¡Œæˆ–æŸä¸€åˆ—\ndf.loc[0]  # è®¿é—®ç¬¬ä¸€è¡Œçš„æ‰€æœ‰åˆ—\ndf.loc[:, &#39;Age&#39;]  # è®¿é—® &#39;Age&#39; åˆ—çš„æ‰€æœ‰è¡Œ\n\n# é€šè¿‡å¸ƒå°”æ¡ä»¶è¿›è¡Œç­›é€‰\ndf.loc[df[&#39;Age&#39;] &gt; 30]\n\n# é€šè¿‡æ ‡ç­¾åˆ‡ç‰‡è®¿é—®å¤šè¡Œæˆ–å¤šåˆ—\ndf.loc[1:3, &#39;Name&#39;:&#39;City&#39;]\nilocï¼šilocæ˜¯åŸºäºä½ç½®çš„ç´¢å¼•ï¼Œç”¨äºé€šè¿‡æ•´æ•°ä½ç½®æ¥è®¿é—®æ•°æ®ã€‚\n\nä½¿ç”¨æ•´æ•°ä½ç½®è¿›è¡Œç´¢å¼•ï¼Œç±»ä¼¼äºdf.iloc[row_index, column_index]ã€‚\nè¡Œç´¢å¼•å’Œåˆ—ç´¢å¼•éƒ½æ˜¯æ•´æ•°ï¼Œä»0å¼€å§‹ã€‚\nè¡Œç´¢å¼•å’Œåˆ—ç´¢å¼•å¯ä»¥æ˜¯å•ä¸ªæ•´æ•°ã€æ•´æ•°åˆ—è¡¨æˆ–æ•´æ•°åˆ‡ç‰‡ã€‚\nè¿”å›çš„ç»“æœæ˜¯ä¸€ä¸ªæ–°çš„DataFrameæˆ–Seriesï¼ŒåŒ…å«æ»¡è¶³æ¡ä»¶çš„æ•°æ®ã€‚\nä»¥ä¸‹æ˜¯ilocçš„ä¸€äº›ç¤ºä¾‹ï¼š\n\npython\nCopy code\n# é€šè¿‡æ•´æ•°ä½ç½®è®¿é—®å•ä¸ªå…ƒç´ \ndf.iloc[0, 1]\n\n# é€šè¿‡æ•´æ•°ä½ç½®è®¿é—®æŸä¸€è¡Œæˆ–æŸä¸€åˆ—\ndf.iloc[0]  # è®¿é—®ç¬¬ä¸€è¡Œçš„æ‰€æœ‰åˆ—\ndf.iloc[:, 2]  # è®¿é—®ç¬¬ä¸‰åˆ—çš„æ‰€æœ‰è¡Œ\n\n# é€šè¿‡æ•´æ•°ä½ç½®åˆ‡ç‰‡è®¿é—®å¤šè¡Œæˆ–å¤šåˆ—\ndf.iloc[1:4, 1:3]\næ€»ç»“ï¼š\n\nlocæ˜¯åŸºäºæ ‡ç­¾çš„ç´¢å¼•ï¼Œä½¿ç”¨è¡Œæ ‡ç­¾å’Œåˆ—æ ‡ç­¾è¿›è¡Œç´¢å¼•ã€‚\nilocæ˜¯åŸºäºä½ç½®çš„ç´¢å¼•ï¼Œä½¿ç”¨æ•´æ•°ä½ç½®è¿›è¡Œç´¢å¼•ã€‚\nlocå’Œilocéƒ½å¯ä»¥ç”¨äºé€‰æ‹©ç‰¹å®šçš„è¡Œã€åˆ—ï¼Œä»¥åŠè¿›è¡Œæ¡ä»¶ç­›é€‰ã€‚\né€‰æ‹©å•ä¸ªå…ƒç´ æ—¶ï¼Œlocä½¿ç”¨æ ‡ç­¾ç´¢å¼•ï¼Œilocä½¿ç”¨æ•´æ•°ä½ç½®ç´¢å¼•ã€‚\nä½¿ç”¨æ ‡ç­¾åˆ‡ç‰‡æ—¶ï¼Œlocä¼šåŒ…å«ç»“æŸä½ç½®çš„è¡Œå’Œåˆ—ï¼Œilocä¼šæŒ‰ç…§æƒ¯ä¾‹ä¸åŒ…å«ç»“æŸä½ç½®çš„è¡Œå’Œåˆ—ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1687611423,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1452167,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJcwXucibksEYRSYg6icjibzGa7efcMrCsGec2UwibjTd57icqDz0zzkEEOM2pXVju60dibzcnQKPfRkN9g/132","nickname":"Geek_93970d","note":"","ucode":"52AC308BEC7737","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":621766,"discussion_content":"pandas.DataFrame å¦‚ä½•ä½¿ç”¨ï¼Ÿ\nChatGPT\npandas.DataFrameæ˜¯pandasåº“ä¸­çš„ä¸€ä¸ªæ ¸å¿ƒæ•°æ®ç»“æ„ï¼Œç”¨äºè¡¨ç¤ºäºŒç»´çš„è¡¨æ ¼æ•°æ®ï¼Œç±»ä¼¼äºExcelä¸­çš„ç”µå­è¡¨æ ¼æˆ–SQLä¸­çš„è¡¨ã€‚å®ƒæä¾›äº†ä¸€ç³»åˆ—åŠŸèƒ½å¼ºå¤§çš„æ–¹æ³•å’Œæ“ä½œï¼Œä½¿å¾—æ•°æ®çš„å¤„ç†ã€è½¬æ¢å’Œåˆ†æå˜å¾—æ›´åŠ ç®€å•å’Œé«˜æ•ˆã€‚\n\nä¸‹é¢æ˜¯ä¸€äº›å¸¸ç”¨çš„pandas.DataFrameçš„ä½¿ç”¨æ–¹æ³•ï¼š\n\nåˆ›å»ºDataFrameï¼šå¯ä»¥ä»å¤šç§æ•°æ®æºåˆ›å»ºDataFrameï¼Œå¦‚å­—å…¸ã€åˆ—è¡¨ã€NumPyæ•°ç»„ã€CSVæ–‡ä»¶ã€æ•°æ®åº“æŸ¥è¯¢ç»“æœç­‰ã€‚ä¸‹é¢æ˜¯ä¸€äº›ç¤ºä¾‹ï¼š\n\npython\nCopy code\nimport pandas as pd\n\n# ä»å­—å…¸åˆ›å»ºDataFrame\ndata = {&#39;Name&#39;: [&#39;John&#39;, &#39;Jane&#39;, &#39;Mike&#39;],\n        &#39;Age&#39;: [25, 30, 35],\n        &#39;City&#39;: [&#39;New York&#39;, &#39;London&#39;, &#39;Paris&#39;]}\ndf = pd.DataFrame(data)\n\n# ä»CSVæ–‡ä»¶åˆ›å»ºDataFrame\ndf = pd.read_csv(&#39;data.csv&#39;)\næŸ¥çœ‹æ•°æ®ï¼šå¯ä»¥ä½¿ç”¨ä¸€äº›æ–¹æ³•æ¥æŸ¥çœ‹DataFrameçš„æ•°æ®å’Œç»“æ„ã€‚\n\npython\nCopy code\n# æŸ¥çœ‹DataFrameçš„å‰å‡ è¡Œ\ndf.head()\n\n# æŸ¥çœ‹DataFrameçš„åŸºæœ¬ç»Ÿè®¡ä¿¡æ¯\ndf.describe()\n\n# æŸ¥çœ‹DataFrameçš„åˆ—å\ndf.columns\n\n# æŸ¥çœ‹DataFrameçš„å½¢çŠ¶ï¼ˆè¡Œæ•°å’Œåˆ—æ•°ï¼‰\ndf.shape\nè®¿é—®æ•°æ®ï¼šå¯ä»¥ä½¿ç”¨ä¸åŒçš„æ–¹æ³•æ¥è®¿é—®å’Œæ“ä½œDataFrameä¸­çš„æ•°æ®ã€‚\n\npython\nCopy code\n# è®¿é—®æŸä¸€åˆ—çš„æ•°æ®\ndf[&#39;Name&#39;]  # æˆ– df.Name\n\n# è®¿é—®æŸä¸€è¡Œçš„æ•°æ®\ndf.loc[0]  # æ ¹æ®è¡Œç´¢å¼•\ndf.iloc[0]  # æ ¹æ®è¡Œå·\n\n# è®¿é—®æŸä¸ªå•å…ƒæ ¼çš„æ•°æ®\ndf.at[0, &#39;Name&#39;]  # æ ¹æ®è¡Œç´¢å¼•å’Œåˆ—å\ndf.iat[0, 1]  # æ ¹æ®è¡Œå·å’Œåˆ—å·\n\n# æ¡ä»¶ç­›é€‰æ•°æ®\ndf[df[&#39;Age&#39;] &gt; 30]\nä¿®æ”¹å’Œæ›´æ–°æ•°æ®ï¼šå¯ä»¥å¯¹DataFrameä¸­çš„æ•°æ®è¿›è¡Œä¿®æ”¹å’Œæ›´æ–°ã€‚\n\npython\nCopy code\n# æ·»åŠ æ–°çš„åˆ—\ndf[&#39;Gender&#39;] = [&#39;Male&#39;, &#39;Female&#39;, &#39;Male&#39;]\n\n# ä¿®æ”¹æŸåˆ—çš„å€¼\ndf.loc[0, &#39;Age&#39;] = 26\n\n# æ ¹æ®æ¡ä»¶æ›´æ–°æ•°æ®\ndf.loc[df[&#39;Age&#39;] &gt; 30, &#39;City&#39;] = &#39;Unknown&#39;\n\n# åˆ é™¤æŸåˆ—æˆ–æŸè¡Œ\ndf.drop(&#39;Gender&#39;, axis=1, inplace=True)  # åˆ é™¤åˆ—\ndf.drop(0, inplace=True)  # åˆ é™¤è¡Œ\næ•°æ®æ“ä½œå’Œè½¬æ¢ï¼šå¯ä»¥å¯¹DataFrameè¿›è¡Œå„ç§æ•°æ®æ“ä½œå’Œè½¬æ¢ã€‚\n\npython\nCopy code\n# æ’åºæ•°æ®\ndf.sort_values(&#39;Age&#39;, ascending=False)\n\n# å»é‡\ndf.drop_duplicates()\n\n# åˆ†ç»„å’Œèšåˆ\ndf.groupby(&#39;City&#39;)[&#39;Age&#39;].mean()\n\n# å¤„ç†ç¼ºå¤±å€¼\ndf.dropna()  # åˆ é™¤åŒ…å«ç¼ºå¤±å€¼çš„è¡Œ\ndf.fillna(0)  # å°†ç¼ºå¤±","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1687611402,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1118159,"avatar":"https://static001.geekbang.org/account/avatar/00/11/0f/cf/bfa0dc80.jpg","nickname":"Z12","note":"","ucode":"59F5E62F67FFDC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":615583,"discussion_content":"æˆ‘æ¯”ä½ æ›´æƒ¨ï¼Œä¸æ‡‚pythonï¼Œä½†æ˜¯åˆ©ç”¨chatgptä¹Ÿæ˜¯å„ç§ä¸æ»‘çš„ä½“éªŒã€‚è¿½é—®å¼çš„å­¦ä¹ çœŸçš„æ˜¯å¤ªæ£’äº†ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1682341114,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":380942,"user_name":"é‡Œå’¯ç ´","can_delete":false,"product_type":"c1","uid":1224546,"ip_address":"å¹¿ä¸œ","ucode":"2DA41A6D44B3C4","user_header":"https://static001.geekbang.org/account/avatar/00/12/af/62/5eeb9041.jpg","comment_is_top":false,"comment_ctime":1694490550,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100541001,"comment_content":"ç”±äºapikeysè¿‡æœŸäº†ï¼Œæ‰€ä»¥ä¸€ç›´æ²¡è·‘ä»£ç ï¼Œçœ‹åˆ°ç¬¬5ç« å¼€å§‹å°±çœ‹ä¸æ‡‚äº†ï¼ŒåªçŸ¥é“å¤§æ¦‚æ„æ€ï¼Œç‰¹åˆ«æ˜¯ä½ åšè¯†åˆ«å¯¹æ¯”çš„å›¾è¡¨ï¼Œå®Œå…¨çœ‹ä¸åˆ°ï¼Œä¸çŸ¥é“è¡¨è¾¾äº†ä»€ä¹ˆæ„æ€ã€‚","like_count":2},{"had_liked":false,"id":378142,"user_name":"å°ç†æƒ³ã€‚","can_delete":false,"product_type":"c1","uid":2238528,"ip_address":"åŒ—äº¬","ucode":"EDC35A907570DB","user_header":"https://static001.geekbang.org/account/avatar/00/22/28/40/82d748e6.jpg","comment_is_top":false,"comment_ctime":1689818019,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100541001,"comment_content":"è€å¸ˆèƒ½ä¸èƒ½ç»™ä¸‹è¿™ä¸ªæ–‡ä»¶ 20_newsgroup_with_embedding.parquetï¼Œé»˜è®¤çš„apikeyè¢«é™åˆ¶ä½äº†ä¸å…è®¸è¯·æ±‚ï¼Œ","like_count":1},{"had_liked":false,"id":378089,"user_name":"å°ç†æƒ³ã€‚","can_delete":false,"product_type":"c1","uid":2238528,"ip_address":"åŒ—äº¬","ucode":"EDC35A907570DB","user_header":"https://static001.geekbang.org/account/avatar/00/22/28/40/82d748e6.jpg","comment_is_top":false,"comment_ctime":1689747801,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100541001,"comment_content":"è·å–æ•°æ®é›†å¹¶å¤„ç†ï¼Œä»£ç åŠ ä¸Šäº†æ³¨é‡Šï¼Œæ„Ÿè°¢\nChatGPTdef twenty_newsgroup_to_csv():\n    # è·å–æ–°é—»æ•°æ®é›†ï¼Œsubset=&quot;train&quot;åªè·å–è®­ç»ƒé›†é‚£éƒ¨åˆ†ï¼Œremove=(&#39;headers&#39;,&#39;footers&#39;,&#39;quotes&#39;) è¡¨ç¤ºåœ¨è·å–æ•°æ®é›†æ—¶ï¼ŒåŒæ—¶ç§»é™¤æ–‡æœ¬ä¸­çš„æ ‡é¢˜ã€é¡µè„šå’Œå¼•ç”¨éƒ¨åˆ†ã€‚\n    newsgroups_train=fetch_20newsgroups(subset=&quot;train&quot;,remove=(&#39;headers&#39;,&#39;footers&#39;,&#39;quotes&#39;))\n    # åˆ›å»ºDataFrameå¯¹è±¡ï¼ŒDataFrameå¯¹è±¡åŒ…å«ä¸¤åˆ—æ•°æ®ï¼Œä¸€åˆ—æ˜¯newsgroups_train.dataçš„åŒ…å«æ–°é—»ç»„æ•°æ®çš„åˆ—è¡¨ï¼Œ\n    # å¦ä¸€åˆ—newsgroups_train.targetæ˜¯ä¸€ä¸ªåŒ…å«æ–°é—»ç»„æ ‡ç­¾çš„åˆ—è¡¨ã€‚\n    df=pd.DataFrame([newsgroups_train.data,newsgroups_train.target.tolist()]).T\n    # å°†DataFrameå¯¹è±¡çš„åˆ—åæ›´æ”¹ä¸º&#39;text&#39;å’Œ&#39;target&#39;\n    df.columns=[&#39;text&#39;,&#39;target&#39;]\n\n    # åˆ›å»ºä¸€ä¸ªåŒ…å«æ–°é—»ç»„åˆ†ç±»åç§°çš„DataFrameå¯¹è±¡ï¼Œå°†åˆ—åå‘½åä¸º&#39;title&#39;\n    targets=pd.DataFrame(newsgroups_train.target_names,columns=[&#39;title&#39;])\n\n    out=pd.merge(df,targets,left_on=&#39;target&#39;,right_index=True)\n    out.to_csv(&#39;20_newsgroup.csv&#39;,index=False)\n\n\ntwenty_newsgroup_to_csv()","like_count":1},{"had_liked":false,"id":375225,"user_name":"newbiner","can_delete":false,"product_type":"c1","uid":1310478,"ip_address":"åŒ—äº¬","ucode":"04F4B4FDB79854","user_header":"","comment_is_top":false,"comment_ctime":1685089184,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100541001,"comment_content":"è€å¸ˆï¼Œå…³äºç¬¬äºŒç‚¹â€œåˆ©ç”¨æ–‡æœ¬æ‘˜è¦æ”¯æŒæ— é™è½®æ•°çš„èŠå¤©â€ï¼Œå¦‚æœhistoryå’Œå¤šï¼Œæ˜¯ä¸æ˜¯ä¹Ÿå¾ˆè´¹tokenï¼Œæœ‰æ²¡æœ‰æ›´å¥½çš„æ–¹æ¡ˆå‘¢ï¼Ÿè°¢è°¢ï¼","like_count":1},{"had_liked":false,"id":371813,"user_name":"yanyu-xin","can_delete":false,"product_type":"c1","uid":1899757,"ip_address":"å¹¿ä¸œ","ucode":"3AA389F9E4C236","user_header":"","comment_is_top":false,"comment_ctime":1680361645,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100541001,"comment_content":"å·²ç»çœ‹ä¸å¤ªæ‡‚ã€‚å¹¶ä¸”ç¨‹åºè¿˜æ˜¯æœ‰ä¸å°‘éœ€è¦æ ¹æ®ä¸ªäººç¯å¢ƒå¾®è°ƒçš„ï¼Œä½†æ˜¯è°ƒè¯•ç¨‹åºï¼Œå‡ºé”™å°±é—®chatï¼Œè¿˜æ˜¯å¾ˆå®¹æ˜“å°±èƒ½é¡ºåˆ©è¿è¡Œçš„ã€‚å…ˆå¼€å§‹ï¼ŒæŒ‰è¯¾ç¨‹é€ä¸€è°ƒè¯•ç¨‹åºï¼Œä»¥åé€æ­¥æ·±å…¥äº†è§£","like_count":1},{"had_liked":false,"id":394387,"user_name":"Geek_78a551","can_delete":false,"product_type":"c1","uid":3784461,"ip_address":"åŒ—äº¬","ucode":"CCADD2F766E193","user_header":"","comment_is_top":false,"comment_ctime":1726678318,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100541001,"comment_content":"é‡æ–°æ›´æ–°ä¸‹ä»£ç å§, ä¸Šé¢çš„ä»£ç æ‰€æœ‰çš„éƒ½ä¸èƒ½æ‰§è¡Œ","like_count":0},{"had_liked":false,"id":388177,"user_name":"Geek_95f4ae","can_delete":false,"product_type":"c1","uid":2908735,"ip_address":"å¹¿ä¸œ","ucode":"202A0F99F5638B","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/mbOToKXibw8HFuW7AkqCAIJVLMxqCaOYQYZxQYHBT4VO2v92d4UCK3XtiaFz2PpDXWpBlHnN9LbsTibCzV4EKALJA/132","comment_is_top":false,"comment_ctime":1709561733,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":3,"product_id":100541001,"comment_content":"@backoff.on_exception(backoff.expo, openai.error.RateLimitError)\ndef get_embeddings_with_backoff(prompts, engine):\n    embeddings = []\n    for i in range(0, len(prompts), batch_size):\n        batch = prompts[i:i+batch_size]\n        embeddings += get_embeddings(list_of_text=batch, engine=engine)\n    return embeddings\n\nprompts = df.text.tolist()\nprompt_batches = [prompts[i:i+batch_size] for i in range(0, len(prompts), batch_size)]\n\nembeddings = []\nfor batch in prompt_batches:\n    batch_embeddings = get_embeddings_with_backoff(prompts=batch, engine=embedding_model)\n    embeddings += batch_embeddings\n\ndf[&quot;embedding&quot;] = embeddings\ndf.to_parquet(&quot;data&#47;20_newsgroup_with_embedding.parquet&quot;, index=False)\n\nè€å¸ˆè¯·é—®ä¸Šé¢çš„ä»£ç æœ‰ä»€ä¹ˆè¦æ³¨æ„çš„åœ°æ–¹å—ï¼Œåœ¨ç¬¬ä¸€å¥å°±æŠ¥é”™ï¼Œé—®chatgptå¾—åˆ°çš„ç­”æ¡ˆä¹Ÿè·‘ä¸é€šï¼Œæ˜¯ç‰ˆæœ¬æ›´æ–°å¯¼è‡´çš„å—ï¼Ÿè¯·é—®æœ‰å¤„ç†çš„æ–¹æ³•å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1816799,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/b8/df/26c8a2e1.jpg","nickname":"åå±±è®ºå‰‘","note":"","ucode":"72B63FE285BDBB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":639133,"discussion_content":"æŠŠopenai.error.RateLimitErroræ”¹æˆopenai.RateLimitErrorï¼Œä»£ç é‡Œçš„engineå…¨éƒ¨æ”¹æˆmodelï¼Œå°±å¯ä»¥äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1710317303,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æµ™æ±Ÿ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":386228,"user_name":"zengraoli","can_delete":false,"product_type":"c1","uid":3203583,"ip_address":"åŒ—äº¬","ucode":"3F5DBA914CB974","user_header":"https://static001.geekbang.org/account/avatar/00/30/e1/ff/5e538177.jpg","comment_is_top":false,"comment_ctime":1704355379,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100541001,"comment_content":"è€å¸ˆä½ å¥½ï¼Œæƒ³è·Ÿä½ è·‘æ–‡ä¸­çš„ç¨‹åºï¼Œå¯æƒœçœ‹åˆ°äº†05ä¹Ÿæœªè§åˆ°æœ‰dataæ–‡ä»¶å¤¹çš„å†…å®¹ï¼Œè¯·é—®å¯ä»¥ç»™ä¸ªä¸‹è½½åœ°å€ä¹ˆï¼Ÿ","like_count":0},{"had_liked":false,"id":381270,"user_name":"èƒ¡è´ºé¹","can_delete":false,"product_type":"c1","uid":2398372,"ip_address":"å¹¿ä¸œ","ucode":"D03369FEEDCA92","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/wr3qiaXYeAaLHyPBArO8ThtgMns5icVkv7SWasTbGeic8QsIkAIC2XCG7ibTTibdicLB6WCibjj5b50kcV7rPKxqVW8Dw/132","comment_is_top":false,"comment_ctime":1694959132,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100541001,"comment_content":"è¯·é—®è¿™è¡Œä»£ç æœ‰ä»€ä¹ˆç”¨ï¼Ÿ\nnp.vstack(embedding_df.embedding.values)","like_count":0},{"had_liked":false,"id":380055,"user_name":"SlgGrlGwy","can_delete":false,"product_type":"c1","uid":3193646,"ip_address":"å¹¿ä¸œ","ucode":"D35076047897EC","user_header":"https://static001.geekbang.org/account/avatar/00/30/bb/2e/3e0bd0e1.jpg","comment_is_top":false,"comment_ctime":1692886338,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100541001,"comment_content":"å¯ä»¥æä¾›ä¸‹parquet æ–‡ä»¶å—ï¼Ÿè½¬åŒ–ä¸€å¤©å•¦ï¼Œè¿˜æœªå®Œæˆ","like_count":0},{"had_liked":false,"id":376983,"user_name":"ç¥æ¯“é€é¥","can_delete":false,"product_type":"c1","uid":2147220,"ip_address":"ä¸Šæµ·","ucode":"83351CB18B190E","user_header":"https://static001.geekbang.org/account/avatar/00/20/c3/94/e89ebc50.jpg","comment_is_top":false,"comment_ctime":1687790252,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100541001,"comment_content":"æœ¬åœ°çŸ¥è¯†åº“åˆ†æä¸å›ç­”é—®é¢˜ï¼Œæœ‰æ¨èçš„å—ï¼Ÿè°ƒç”¨ OPENAPI æ¶‰åŠå®‰å…¨é—®é¢˜","like_count":0},{"had_liked":false,"id":376372,"user_name":"èœ•å˜","can_delete":false,"product_type":"c1","uid":2035234,"ip_address":"å±±ä¸œ","ucode":"F3FB212D300B11","user_header":"https://static001.geekbang.org/account/avatar/00/1f/0e/22/988879b9.jpg","comment_is_top":false,"comment_ctime":1686740028,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100541001,"comment_content":"Traceback (most recent call last):\n  File &quot;&#47;Users&#47;hupengfei&#47;miniconda3&#47;envs&#47;py310&#47;lib&#47;python3.10&#47;site-packages&#47;gradio&#47;routes.py&quot;, line 394, in run_predict\n    output = await app.get_blocks().process_api(\n  File &quot;&#47;Users&#47;hupengfei&#47;miniconda3&#47;envs&#47;py310&#47;lib&#47;python3.10&#47;site-packages&#47;gradio&#47;blocks.py&quot;, line 1078, in process_api\n    data = self.postprocess_data(fn_index, result[&quot;prediction&quot;], state)\n  File &quot;&#47;Users&#47;hupengfei&#47;miniconda3&#47;envs&#47;py310&#47;lib&#47;python3.10&#47;site-packages&#47;gradio&#47;blocks.py&quot;, line 1012, in postprocess_data\n    prediction_value = block.postprocess(prediction_value)\n  File &quot;&#47;Users&#47;hupengfei&#47;miniconda3&#47;envs&#47;py310&#47;lib&#47;python3.10&#47;site-packages&#47;gradio&#47;components.py&quot;, line 4181, in postprocess\n    self._process_chat_messages(message_pair[1]),\n  File &quot;&#47;Users&#47;hupengfei&#47;miniconda3&#47;envs&#47;py310&#47;lib&#47;python3.10&#47;site-packages&#47;gradio&#47;components.py&quot;, line 4154, in _process_chat_messages\n    raise ValueError(f&quot;Invalid message for Chatbot component: {chat_message}&quot;)\nValueError: Invalid message for Chatbot component: module &#39;openai&#39; has no attribute &#39;ChatCompletion&#39;\npip show openai\n\nå‘é€çš„æ—¶å€™æŠ¥äº†è¿™ä¸ªé”™è¯¯~  ","like_count":0},{"had_liked":false,"id":373771,"user_name":"Geek_378f83","can_delete":false,"product_type":"c1","uid":3196784,"ip_address":"ä¸Šæµ·","ucode":"AD2B400EED436A","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/z3nIITkhzRj9WApibhic524lQSJmqUCerpuqpntEe06LE3lRGKr6rGwPpPJtZ5Xj0NBPyvTatKtIk0hfyAnl9Hsg/132","comment_is_top":false,"comment_ctime":1683131256,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100541001,"comment_content":"7","like_count":0},{"had_liked":false,"id":372908,"user_name":"aoe","can_delete":false,"product_type":"c1","uid":1121758,"ip_address":"æµ™æ±Ÿ","ucode":"1C6201EDB4E954","user_header":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","comment_is_top":false,"comment_ctime":1681791628,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100541001,"comment_content":"è™½ç„¶æ²¡çœ‹æ‡‚ï¼Œä½†è§‰å¾—å¾ˆå‰å®³ï¼\nåŸæ¥è°ƒç”¨ openAI çš„ API ä¸åƒæˆ‘æƒ³è±¡çš„é‚£ä¹ˆç®€å•ï¼Œè¿˜æ˜¯éœ€è¦ä¸€äº›ã€Œæœºå™¨å­¦ä¹ ã€çš„åŸºç¡€çŸ¥è¯†\næ„Ÿè°¢è€å¸ˆå¸¦æˆ‘å‚è§‚ã€Œæœºå™¨å­¦ä¹ å…¥é—¨ã€","like_count":0},{"had_liked":false,"id":371694,"user_name":"Ethan New","can_delete":false,"product_type":"c1","uid":2063962,"ip_address":"æµ™æ±Ÿ","ucode":"9CA2EF39E58030","user_header":"https://static001.geekbang.org/account/avatar/00/1f/7e/5a/da39f489.jpg","comment_is_top":false,"comment_ctime":1680188885,"is_pvip":true,"replies":null,"discussion_count":0,"race_medal":4,"score":4,"product_id":100541001,"comment_content":"å­¦ä¹ æ‰“å¡","like_count":0}]}