{"id":1610,"title":"27 | 洞悉PaaS平台的本质","content":"<p>你好，我是陈皓，网名左耳朵耗子。</p>\n<p>在了解了前面几篇文章中提的这些问题以后，我们需要思考一下该怎样解决这些问题。为了解决这些问题，请先允许我来谈谈软件工程的本质。</p>\n<p>我认为，一家商业公司的软件工程能力主要体现在三个地方。</p>\n<p><strong>第一，提高服务的SLA。</strong></p>\n<p>所谓服务的SLA，也就是我们能提供多少个9的系统可用性，而每提高一个9的可用性都是对整个系统架构的重新洗礼。在我看来，提高系统的SLA主要表现在两个方面：</p>\n<ul>\n<li>高可用的系统；</li>\n<li>自动化的运维。</li>\n</ul>\n<p>你可以看一下我在CoolShell上写的《<a href=\"https://coolshell.cn/articles/17459.html\">关于高可用系统</a>》这篇文章，它主要讲了构建高可用的系统需要使用的分布式系统设计思路。然而这还不够，我们还需要一个高度自动化的运维和管理系统，因为故障是常态，如果没有自动化的故障恢复，就很难提高服务的SLA。</p>\n<!-- [[[read_end]]] -->\n<p><strong>第二，能力和资源重用或复用。</strong></p>\n<p>软件工程还有一个重要的能力就是让能力和资源可以重用。其主要表现在如下两个方面：</p>\n<ul>\n<li>软件模块的重用；</li>\n<li>软件运行环境和资源的重用。</li>\n</ul>\n<p>为此，需要我们有两个重要的能力：一个是“软件抽象的能力”，另一个是“软件标准化的能力”。你可以认为软件抽象就是找出通用的软件模块或服务，软件标准化就是使用统一的软件通讯协议、统一的开发和运维管理方法……这样能让整体软件开发运维的能力和资源得到最大程度的复用，从而增加效率。</p>\n<p><strong>第三，过程的自动化。</strong></p>\n<p>编程本来就是把一个重复工作自动化的过程，所以，<strong>软件工程的第三个本质就是把软件生产和运维的过程自动化起来</strong>。也就是下面这两个方面：</p>\n<ul>\n<li>软件生产流水线；</li>\n<li>软件运维自动化。</li>\n</ul>\n<p>为此，我们除了需要CI/CD的DevOps式的自动化之外，也需要能够对正在运行的生产环境中的软件进行自动化运维。</p>\n<p>通过了解软件工程的这三个本质，你会发现，我们上面所说的那些分布式的技术点是高度一致的，也就是下面这三个方面的能力。（是的，世界就是这样的。当参透了本质之后，你会发现世界是大同的。）</p>\n<ul>\n<li>分布式多层的系统架构。</li>\n<li>服务化的能力供应。</li>\n<li>自动化的运维能力。</li>\n</ul>\n<p>只有做到了这些，我们才能够真正拥有云计算的威力。这就是所谓的Cloud Native。而这些目标都完美地体现在PaaS平台上。</p>\n<p>前面讲述的分布式系统关键技术和软件工程的本质，都可以在PaaS平台上得到完全体现。所以，需要一个PaaS平台把那么多的东西给串联起来。这里，我结合自己的认知给你讲一下PaaS相关的东西，并把前面讲过的所有东西做一个总结。</p>\n<h1>PaaS平台的本质</h1>\n<p>一个好的PaaS平台应该具有分布式、服务化、自动化部署、高可用、敏捷以及分层开放的特征，并可与IaaS实现良好的联动。</p>\n<p><img src=\"https://static001.geekbang.org/resource/image/a0/83/a0a0ae2213fcea58978d8a214412ee83.jpg?wh=1323x1323\" alt=\"\" /><br />\n下面这三件事是PaaS跟传统中间件最大的差别。</p>\n<ul>\n<li><strong>服务化是PaaS的本质</strong>。软件模块重用，服务治理，对外提供能力是PaaS的本质。</li>\n<li><strong>分布式是PaaS的根本特性</strong>。多租户隔离、高可用、服务编排是PaaS的基本特性。</li>\n<li><strong>自动化是PaaS的灵魂</strong>。自动化部署安装运维，自动化伸缩调度是PaaS的关键。</li>\n</ul>\n<h2>PaaS平台的总体架构</h2>\n<p>从下面的图中可以看到，我用了Docker+Kubernetes层来做了一个“技术缓冲层”。也就是说，如果没有Docker和Kubernetes，构建PaaS将会复杂很多。当然，如果你正在开发一个类似PaaS的平台，那么你会发现自己开发出来的东西会跟Docker和Kubernetes非常像。相信我，最终你还是会放弃自己的轮子而采用Docker+Kubernetes的。</p>\n<p><img src=\"https://static001.geekbang.org/resource/image/f6/68/f65ccf66daf8d01d59fa8948c8136c68.png?wh=865*582\" alt=\"\" /></p>\n<p>在Docker+Kubernetes层之上，我们看到了两个相关的PaaS层。一个是PaaS调度层，很多人将其称为iPaaS；另一个是PaaS能力层，通常被称为aPaaS。没有PaaS调度层，PaaS能力层很难被管理和运维，而没有PaaS能力层，PaaS就失去了提供实际能力的业务价值。而本文更多的是在讲PaaS调度层上的东西。</p>\n<p>在两个相关的PaaS层之上，有一个流量调度的接入模块，这也是PaaS中非常关键的东西。流控、路由、降级、灰度、聚合、串联等等都在这里，包括最新的AWS Lambda Service的小函数等也可以放在这里。这个模块应该是像CDN那样来部署的。</p>\n<p>然后，在这个图的两边分别是与运营和运维相关的。运营这边主要是管理一些软件资源方面的东西（类似Docker Hub和CMDB），以及外部接入和开放平台上的东西，这主要是对外提供能力的相关组件；而运维这边主要是对内的相关东西，主要就是DevOps。</p>\n<p>总结一下，一个完整的PaaS平台会包括以下几部分。</p>\n<ul>\n<li>PaaS调度层 – 主要是PaaS的自动化和分布式对于高可用高性能的管理。</li>\n<li>PaaS能力服务层 – 主要是PaaS真正提供给用户的服务和能力。</li>\n<li>PaaS的流量调度 – 主要是与流量调度相关的东西，包括对高并发的管理。</li>\n<li>PaaS的运营管理 – 软件资源库、软件接入、认证和开放平台门户。</li>\n<li>PaaS的运维管理 – 主要是DevOps相关的东西。</li>\n</ul>\n<p>因为我画的是一个大而全的东西，所以看上去似乎很重很复杂。实际上，其中的很多组件是可以根据自己的需求被简化和裁剪的，而且很多开源软件能帮你简化好多工作。虽然构建PaaS平台看上去很麻烦，但是其实并不是很复杂，不要被我吓到了。哈哈。</p>\n<h2>PaaS平台的生产和运维</h2>\n<p>下面的图我给出了一个大概的软件生产、运维和服务接入的流程，它把之前的东西都串起来了。</p>\n<p><img src=\"https://static001.geekbang.org/resource/image/97/38/9740e0fe4225f5a3d7843e46582d3938.png?wh=3132x1416\" alt=\"\" /></p>\n<p>从左上开始软件构建，进入软件资产库（Docker Registry+一些软件的定义），然后走DevOps的流程，通过整体架构控制器进入生产环境，生产环境通过控制器操作Docker+Kubernetes集群进行软件部署和生产变更。</p>\n<p>其中，同步服务的运行状态，并通过生命周期管理来拟合状态，如图右侧部分所示。服务运行时的数据会进入到相关应用监控，应用监控中的一些监控事件会同步到生命周期管理中，再由生命周期管理器来做出决定，通过控制器来调度服务运行。当应用监控中心发现流量变化，要进行强制性伸缩时，它通过生命周期管理来通知控制系统进行伸缩。</p>\n<p>左下是服务接入的相关组件，主要是网关服务，以及API聚合编排和流程处理。这对应于之前说过的流量调度和API Gateway的相关功能。</p>\n<h1>总结</h1>\n<p>恭喜你，已经学完了《分布式系统架构的本质》系列课程的7讲内容。下面，我们对这些内容做一下总结。</p>\n<p>传统的单体架构系统容量显然是有上限的。同时，为了应对有计划和无计划的下线时间，系统的可用性也是有其极限的。分布式系统为以上两个问题提供了解决方案，并且还附带有其他优势。但是，要同时解决这两个问题绝非易事。为了构建分布式系统，我们面临的主要问题如下。</p>\n<ul>\n<li>分布式系统的硬件故障发生率更高，故障发生是常态，需要尽可能地将运维流程自动化。</li>\n<li>需要良好地设计服务，避免某服务的单点故障对依赖它的其他服务造成大面积影响。</li>\n<li>为了容量的可伸缩性，服务的拆分、自治和无状态变得更加重要，可能需要对老的软件逻辑做大的修改。</li>\n<li>老的服务可能是异构的，此时需要让它们使用标准的协议，以便可以被调度、编排，且互相之间可以通信。</li>\n<li>服务软件故障的处理也变得复杂，需要优化的流程，以加快故障的恢复。</li>\n<li>为了管理各个服务的容量，让分布式系统发挥出最佳性能，需要有流量调度技术。</li>\n<li>分布式存储会让事务处理变得复杂；在事务遇到故障无法被自动恢复的情况下，手动恢复流程也会变得复杂。</li>\n<li>测试和查错的复杂度增大。</li>\n<li>系统的吞吐量会变大，但响应时间会变长。</li>\n</ul>\n<p>为了解决这些问题，我们深入了解了以下这些解决方案。</p>\n<ul>\n<li>需要有完善的监控系统，以便对服务运行状态有全面的了解。</li>\n<li>设计服务时要分析其依赖链；当非关键服务故障时，其他服务要自动降级功能，避免调用该服务。</li>\n<li>重构老的软件，使其能被服务化；可以参考SOA和微服务的设计方式，目标是微服务化；使用Docker和Kubernetes来调度服务。</li>\n<li>为老的服务编写接口逻辑来使用标准协议，或在必要时重构老的服务以使得它们有这些功能。</li>\n<li>自动构建服务的依赖地图，并引入好的处理流程，让团队能以最快速度定位和恢复故障，详见《故障处理最佳实践：应对故障》一讲。</li>\n<li>使用一个API Gateway，它具备服务流向控制、流量控制和管理的功能。</li>\n<li>事务处理建议在存储层实现；根据业务需求，或者降级使用更简单、吞吐量更大的最终一致性方案，或者通过二阶段提交、Paxos、Raft、NWR等方案之一，使用吞吐量小的强一致性方案。</li>\n<li>通过更真实地模拟生产环境，乃至在生产环境中做灰度发布，从而增加测试强度；同时做充分的单元测试和集成测试以发现和消除缺陷；最后，在服务故障发生时，相关的多个团队同时上线自查服务状态，以最快地定位故障原因。</li>\n<li>通过异步调用来减少对短响应时间的依赖；对关键服务提供专属硬件资源，并优化软件逻辑以缩短响应时间。</li>\n</ul>\n<p>你已经看到，解决分布式服务的吞吐量和可用性问题不是件容易的事，以及目前的主流技术是怎么办到的。衍生出来的许多子问题，每一个都值得去细化、去研究其解决方案。这已经超出本节课的篇幅所能及的了，但的确都是值得我们做技术的人去深入思考的。</p>\n<p>在这里，我想邀请你来讨论一下，你在分布式系统的哪个领域研究得比较深？有什么独特的心得能与我们分享？期待你的留言。</p>\n<p>这一讲的最后给出了《分布式系统架构的本质》系列课程的目录，方便你查找自己关注的内容。</p>\n<ul>\n<li><a href=\"https://time.geekbang.org/column/article/1411\">分布式系统架构的冰与火</a></li>\n<li><a href=\"https://time.geekbang.org/column/article/1505\">从亚马逊的实践，谈分布式系统的难点</a></li>\n<li><a href=\"https://time.geekbang.org/column/article/1512\">分布式系统的技术栈</a></li>\n<li><a href=\"https://time.geekbang.org/column/article/1513\">分布式系统关键技术：全栈监控</a></li>\n<li><a href=\"https://time.geekbang.org/column/article/1604\">分布式系统关键技术：服务调度</a></li>\n<li><a href=\"https://time.geekbang.org/column/article/1609\">分布式系统关键技术：流量与数据调度</a></li>\n<li><a href=\"https://time.geekbang.org/column/article/1610\">洞悉PaaS平台的本质</a></li>\n<li><a href=\"https://time.geekbang.org/column/article/2080\">推荐阅读：分布式系统架构经典资料</a></li>\n<li><a href=\"https://time.geekbang.org/column/article/2421\">推荐阅读：分布式数据调度相关论文</a></li>\n</ul>\n","comments":[{"had_liked":false,"id":12068,"user_name":"delete is create","can_delete":false,"product_type":"c1","uid":1148262,"ip_address":"","ucode":"12A64AF8D50C00","user_header":"","comment_is_top":false,"comment_ctime":1528548094,"is_pvip":false,"replies":[{"id":"4008","content":"整个工业界的主流技术。多看英文资料","user_name":"作者回复","user_name_real":"左耳朵","uid":"1001269","ctime":1528648817,"ip_address":"","comment_id":12068,"utype":1}],"discussion_count":1,"race_medal":0,"score":"87427894014","product_id":100002201,"comment_content":"耗子哥   这些主流技术是你所在工作中用到的还是下班写写demo学到的呢？","like_count":21,"discussions":[{"author":{"id":1001269,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/35/89726f5f.jpg","nickname":"左耳朵","note":"","ucode":"8A4741D677702E","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":419102,"discussion_content":"整个工业界的主流技术。多看英文资料","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1528648817,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":1842,"user_name":"李博越","can_delete":false,"product_type":"c1","uid":1027808,"ip_address":"","ucode":"E6CDA0CDC0BCE6","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ae/e0/3e636955.jpg","comment_is_top":false,"comment_ctime":1514770745,"is_pvip":false,"replies":[{"id":"306","content":"Swarm会淘汰的，看看docker官方同时还支持以k8s就知道k8s是赢家了。","user_name":"作者回复","user_name_real":"左耳朵","uid":"1001269","ctime":1514858357,"ip_address":"","comment_id":1842,"utype":1}],"discussion_count":1,"race_medal":0,"score":"70234247481","product_id":100002201,"comment_content":"目前工作在搞这些，不过是用的swarm，估计过两年就会被淘汰吧","like_count":17,"discussions":[{"author":{"id":1001269,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/35/89726f5f.jpg","nickname":"左耳朵","note":"","ucode":"8A4741D677702E","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":415551,"discussion_content":"Swarm会淘汰的，看看docker官方同时还支持以k8s就知道k8s是赢家了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1514858357,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":5695,"user_name":"探索无止境","can_delete":false,"product_type":"c1","uid":1044178,"ip_address":"","ucode":"91D2A9907DFA79","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ee/d2/7024431c.jpg","comment_is_top":false,"comment_ctime":1523808666,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"53063416218","product_id":100002201,"comment_content":"耗子叔能否这一个JVM优化的系列专题，这一块现在网络上虽资源很多，但都不像您这样直达本质的讲法，期待！","like_count":12,"discussions":[{"author":{"id":1745150,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/a0/fe/642c4d29.jpg","nickname":"胡帅","note":"","ucode":"04D42E29E1ABC6","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":60987,"discussion_content":"叫叔，你就已经输了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574768454,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":55433,"user_name":"钱","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1546177309,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"48790817565","product_id":100002201,"comment_content":"知识密度比较大，需要更多时间消化，读起来相当畅快，但实际下手又不知从何下手。这是个大工程，个人感觉只能有个整体认知，需要组织的力量去驱动。","like_count":11},{"had_liked":false,"id":4149,"user_name":"林三杠","can_delete":false,"product_type":"c1","uid":1012832,"ip_address":"","ucode":"E667F986D07DC6","user_header":"https://static001.geekbang.org/account/avatar/00/0f/74/60/0403b575.jpg","comment_is_top":false,"comment_ctime":1521621966,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"22996458446","product_id":100002201,"comment_content":"这个系列真是干货啊，信息量巨大。对应的看自己单位的系统，简直千疮百孔，无法直视，在任何一个单点上都没做好，整体就更不用说了。","like_count":5,"discussions":[{"author":{"id":2058258,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/68/12/031a05c3.jpg","nickname":"A免帅叫哥","note":"","ucode":"76D2522E602AEF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":300496,"discussion_content":"我觉得他讲的就是一个理想化的状态吧。也不是大公司也都做的特别好的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598149448,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":270796,"user_name":"剑八","can_delete":false,"product_type":"c1","uid":1297630,"ip_address":"","ucode":"0A09F41DB8A4E7","user_header":"https://static001.geekbang.org/account/avatar/00/13/cc/de/e28c01e1.jpg","comment_is_top":false,"comment_ctime":1609277982,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"14494179870","product_id":100002201,"comment_content":"IAAS是基础设施，如服务器，网络<br>paas是软件基础设施，以平台形式对外提供服务，提供软件开发的部署，运维能力，客户只要关注业务软件开发既可。<br>SAAS是开箱即用的服务，如物流助手，电商网站<br>典型的，salesforce是paas平台，供不同的ISV去定制提供SAAS服务","like_count":4},{"had_liked":false,"id":17469,"user_name":"噜啦","can_delete":false,"product_type":"c1","uid":1175086,"ip_address":"","ucode":"B2CED8E3544744","user_header":"https://static001.geekbang.org/account/avatar/00/11/ee/2e/9ac22d45.jpg","comment_is_top":false,"comment_ctime":1532667111,"is_pvip":false,"replies":[{"id":"6172","content":"我在程序员练级攻略中的容器篇中罗列了些资料","user_name":"作者回复","user_name_real":"左耳朵","uid":"1001269","ctime":1532962245,"ip_address":"","comment_id":17469,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14417568999","product_id":100002201,"comment_content":"需要好好品味，刚入paas这个坑，看来还需要修炼啊。<br>耗叔，你觉得k8s的官方文档和网上的、社区上的讨论哪个更容易让新手对整个k8s+docker的生态有一个了解？<br>求翻牌","like_count":3,"discussions":[{"author":{"id":1001269,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/35/89726f5f.jpg","nickname":"左耳朵","note":"","ucode":"8A4741D677702E","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":421166,"discussion_content":"我在程序员练级攻略中的容器篇中罗列了些资料","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1532962245,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":1870,"user_name":"。。。。","can_delete":false,"product_type":"c1","uid":1042514,"ip_address":"","ucode":"343588C9585A61","user_header":"https://static001.geekbang.org/account/avatar/00/0f/e8/52/97f59d07.jpg","comment_is_top":false,"comment_ctime":1514972451,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"14399874339","product_id":100002201,"comment_content":"浩哥请教个问题，我看谷歌那篇spanner论文的描述，它完成一个事务的时间大致需要两个truetime api返回的时间误差值，大致可以推导出大概是8毫秒完成一个事务，这种情况下咋应付高并发的读写呢","like_count":3},{"had_liked":false,"id":190189,"user_name":"ipofss","can_delete":false,"product_type":"c1","uid":1018620,"ip_address":"","ucode":"DE3061C9259F9E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8a/fc/d1dd57dd.jpg","comment_is_top":false,"comment_ctime":1584612236,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10174546828","product_id":100002201,"comment_content":"我还没接触过分布式，日常开发中没有应用场景，这一系列文章，让我对分布式有了高纬度的理解，然后再去扎进去学单块知识时感觉效果会更好","like_count":3},{"had_liked":false,"id":32361,"user_name":"Sean","can_delete":false,"product_type":"c1","uid":1242497,"ip_address":"","ucode":"2521FB6292F304","user_header":"https://static001.geekbang.org/account/avatar/00/12/f5/81/92d01e3a.jpg","comment_is_top":false,"comment_ctime":1539561021,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10129495613","product_id":100002201,"comment_content":"openshift怎么样？","like_count":2},{"had_liked":false,"id":1835,"user_name":"刘宗尧","can_delete":false,"product_type":"c1","uid":1009476,"ip_address":"","ucode":"3E10A471C9177D","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/44/1d63fc03.jpg","comment_is_top":false,"comment_ctime":1514715048,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10104649640","product_id":100002201,"comment_content":"写了服务端的，会不会写一下客户端的架构设计?比如说移动客户端的架构设计?","like_count":2},{"had_liked":false,"id":195947,"user_name":"GZC","can_delete":false,"product_type":"c1","uid":1928513,"ip_address":"","ucode":"1A96BC07D8BC42","user_header":"https://static001.geekbang.org/account/avatar/00/1d/6d/41/256f7238.jpg","comment_is_top":false,"comment_ctime":1585225440,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"5880192736","product_id":100002201,"comment_content":"一入分布式系统，不回头，等我开源nodejs版微服务","like_count":1,"discussions":[{"author":{"id":2439636,"avatar":"https://static001.geekbang.org/account/avatar/00/25/39/d4/08989e53.jpg","nickname":"罗文静好漂亮啊","note":"","ucode":"4D1FF065D9CF16","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":571435,"discussion_content":"大佬，nodejs版微服务出来了吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1652228449,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1402127,"avatar":"https://static001.geekbang.org/account/avatar/00/15/65/0f/770eba2d.jpg","nickname":"Kay","note":"","ucode":"A5A6E3655FEC2D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":335761,"discussion_content":"大佬，nodejs版微服务出来了吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608296746,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":22279,"user_name":"大叶枫","can_delete":false,"product_type":"c1","uid":1153702,"ip_address":"","ucode":"224AC5533889AD","user_header":"https://static001.geekbang.org/account/avatar/00/11/9a/a6/3bddb98c.jpg","comment_is_top":false,"comment_ctime":1535591423,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5830558719","product_id":100002201,"comment_content":"读了好几遍，信息量很大，影响巨大。再核对思考下提问题。","like_count":1},{"had_liked":false,"id":4454,"user_name":"missa","can_delete":false,"product_type":"c1","uid":1033417,"ip_address":"","ucode":"485CB229C4C556","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c4/c9/90c8a53e.jpg","comment_is_top":false,"comment_ctime":1522113934,"is_pvip":false,"replies":[{"id":"1116","content":"坑不少啊，以后有空讲讲","user_name":"作者回复","user_name_real":"左耳朵","uid":"1001269","ctime":1522160393,"ip_address":"","comment_id":4454,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5817081230","product_id":100002201,"comment_content":"耗子叔你在做apm，gateway等的时间，有遇到什么坑，或者做的时候有需要注意的地方，以后的文章中方便讲讲？","like_count":1,"discussions":[{"author":{"id":1001269,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/35/89726f5f.jpg","nickname":"左耳朵","note":"","ucode":"8A4741D677702E","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":416369,"discussion_content":"坑不少啊，以后有空讲讲","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1522160393,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":1772,"user_name":"胡明","can_delete":false,"product_type":"c1","uid":1040827,"ip_address":"","ucode":"AC639FAA57D4FC","user_header":"https://static001.geekbang.org/account/avatar/00/0f/e1/bb/02f9023b.jpg","comment_is_top":false,"comment_ctime":1514425348,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5809392644","product_id":100002201,"comment_content":"整个系统的层次模块划分方式有没有经典的书或者论文可以参考啊","like_count":1},{"had_liked":false,"id":326747,"user_name":"Geek_71d8b8","can_delete":false,"product_type":"c1","uid":2237812,"ip_address":"","ucode":"C767E902AE874B","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/gGOGcSH4AcC6iaeVcibEsuKdkRMPWia5G1OQY9Bm5n9pR7HFWEmtWeK9S3RhibDf8ePibx7RsCRl2Ng6MOPL0ry9vHA/132","comment_is_top":false,"comment_ctime":1639658824,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1639658824","product_id":100002201,"comment_content":"分布式系统是一整套浩大的工程，就像是在建造一座摩天大厦","like_count":0},{"had_liked":false,"id":317117,"user_name":"方勇(gopher)","can_delete":false,"product_type":"c1","uid":1290625,"ip_address":"","ucode":"D199911C4CFEF5","user_header":"https://static001.geekbang.org/account/avatar/00/13/b1/81/13f23d1e.jpg","comment_is_top":false,"comment_ctime":1634691089,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1634691089","product_id":100002201,"comment_content":"对消息治理有一定的研究，如何保障消息不丢，消息达到率，消息幂等，server端的高可用部署与架构，server过载防护，发布失败补偿，消费失败重试等","like_count":0},{"had_liked":false,"id":301829,"user_name":"郭子","can_delete":false,"product_type":"c1","uid":1147047,"ip_address":"","ucode":"E69B12C2648E54","user_header":"https://static001.geekbang.org/account/avatar/00/11/80/a7/b8eadbdc.jpg","comment_is_top":false,"comment_ctime":1625901424,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1625901424","product_id":100002201,"comment_content":"细节都是魔鬼👹，谢谢您的专栏。我学到了很多","like_count":0},{"had_liked":false,"id":294348,"user_name":"William Ning","can_delete":false,"product_type":"c1","uid":1592279,"ip_address":"","ucode":"4DB8D05E69E5F3","user_header":"https://static001.geekbang.org/account/avatar/00/18/4b/d7/f46c6dfd.jpg","comment_is_top":false,"comment_ctime":1621906579,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1621906579","product_id":100002201,"comment_content":"第二遍看～记得第一遍时看的云里雾里，不知道在讲什么，额外补了其他的知识，现在感觉好一些了～","like_count":0},{"had_liked":false,"id":260452,"user_name":"夜行观星","can_delete":false,"product_type":"c1","uid":1010389,"ip_address":"","ucode":"C880CB39033929","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6a/d5/73c75eb3.jpg","comment_is_top":false,"comment_ctime":1605010881,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1605010881","product_id":100002201,"comment_content":"比较喜欢看旧文，随着时间的沉淀，可以看到哪些是真干货，一滴水都没有的","like_count":0},{"had_liked":false,"id":257144,"user_name":"刘匿名","can_delete":false,"product_type":"c1","uid":1319157,"ip_address":"","ucode":"CB4C1DC8C1BB31","user_header":"https://static001.geekbang.org/account/avatar/00/14/20/f5/6cdbfa90.jpg","comment_is_top":false,"comment_ctime":1603861124,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1603861124","product_id":100002201,"comment_content":"很多部分的知识只是有所了解，作为业务方的开发很多底层实现和架构都被运维部门隐藏了，只能主动多学多问了","like_count":0},{"had_liked":false,"id":238919,"user_name":"你为啥那么牛","can_delete":false,"product_type":"c1","uid":1503506,"ip_address":"","ucode":"1ABC604A54A8F6","user_header":"https://static001.geekbang.org/account/avatar/00/16/f1/12/7dac30d6.jpg","comment_is_top":false,"comment_ctime":1596370048,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1596370048","product_id":100002201,"comment_content":"就从这三张图来说，就甩出平常公司几条街。一些公司，只是表达了我有什么，而不说我怎么用","like_count":0},{"had_liked":false,"id":211416,"user_name":"Geek_130e9e","can_delete":false,"product_type":"c1","uid":1587628,"ip_address":"","ucode":"518AAF2F228C17","user_header":"","comment_is_top":false,"comment_ctime":1587959929,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1587959929","product_id":100002201,"comment_content":"此节信息量巨大，干货满满啊。只有组织的力量才能驱动Paas大工程。k8s是赢家，docker官网支持，Swarm肯定被淘汰。","like_count":0},{"had_liked":false,"id":210204,"user_name":"许光伟","can_delete":false,"product_type":"c1","uid":1345056,"ip_address":"","ucode":"95976E241319BA","user_header":"https://static001.geekbang.org/account/avatar/00/14/86/20/ee7d32e0.jpg","comment_is_top":false,"comment_ctime":1587697347,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1587697347","product_id":100002201,"comment_content":"之前一直在用，今天终于高纬度了解了下，受益匪浅","like_count":0},{"had_liked":false,"id":206398,"user_name":"闫冬","can_delete":false,"product_type":"c1","uid":1109691,"ip_address":"","ucode":"1725E869D5A3D3","user_header":"https://static001.geekbang.org/account/avatar/00/10/ee/bb/7afd6824.jpg","comment_is_top":false,"comment_ctime":1586853684,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1586853684","product_id":100002201,"comment_content":"运维自动化<br>开发流水化<br>模块复用化<br>系统高可用<br>","like_count":0},{"had_liked":false,"id":179541,"user_name":"ZYCHD(子玉)","can_delete":false,"product_type":"c1","uid":1109815,"ip_address":"","ucode":"32B2ED529450C6","user_header":"https://static001.geekbang.org/account/avatar/00/10/ef/37/4b12b4cc.jpg","comment_is_top":false,"comment_ctime":1582027959,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1582027959","product_id":100002201,"comment_content":"有所收获，还要再看几遍","like_count":0},{"had_liked":false,"id":168937,"user_name":"沫沫（美丽人生）","can_delete":false,"product_type":"c1","uid":1051023,"ip_address":"","ucode":"FC73BF0D79E3FD","user_header":"https://static001.geekbang.org/account/avatar/00/10/09/8f/ad6039b6.jpg","comment_is_top":false,"comment_ctime":1578220911,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1578220911","product_id":100002201,"comment_content":"老师好，能否把PaaS专门作为一个课程来讲讲呢，现在很多SaaS公司都在向PaaS转型。","like_count":0},{"had_liked":false,"id":166481,"user_name":"Geek_110","can_delete":false,"product_type":"c1","uid":1785130,"ip_address":"","ucode":"963458FD9BE044","user_header":"","comment_is_top":false,"comment_ctime":1577457053,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1577457053","product_id":100002201,"comment_content":"为什么服务编排也放在paas调度上呢。服务编排不是根据业务进行编排么，还有服务调度不是就保护服务的scale为什么还要加上服务伸缩呢","like_count":0},{"had_liked":false,"id":165308,"user_name":"俊毓","can_delete":false,"product_type":"c1","uid":1554638,"ip_address":"","ucode":"F150D39D00FAAC","user_header":"https://static001.geekbang.org/account/avatar/00/17/b8/ce/0abbb54d.jpg","comment_is_top":false,"comment_ctime":1577198054,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1577198054","product_id":100002201,"comment_content":"ipaas层的部分功能，实际上类似于k8s提供的HAproxy, scheduler, controller manager和kubelet的功能。","like_count":0},{"had_liked":false,"id":165003,"user_name":"Haan","can_delete":false,"product_type":"c1","uid":1388133,"ip_address":"","ucode":"7A7BBE0D0CD39E","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eq8qpSvBoZz89u3BhGXWLibs2OibCkZl8bx74aLSJ58f467bR8anNaTiccJklcqjBdhfvvJpvLVmYesA/132","comment_is_top":false,"comment_ctime":1577146450,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1577146450","product_id":100002201,"comment_content":"信息量很大","like_count":0},{"had_liked":false,"id":164540,"user_name":"攻城狮Ra","can_delete":false,"product_type":"c1","uid":1681051,"ip_address":"","ucode":"4D6F97A6481166","user_header":"https://static001.geekbang.org/account/avatar/00/19/a6/9b/20b9fce3.jpg","comment_is_top":false,"comment_ctime":1577023446,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1577023446","product_id":100002201,"comment_content":"好庞大的知识体系，《分布式系统架构的本质》系列的每一篇文章都是一个闪光点，足够好好吸收消化个把月了，如果还要实际操作就更是需要时间积累了。太流批了！！！","like_count":0},{"had_liked":false,"id":134848,"user_name":"windfantasy","can_delete":false,"product_type":"c1","uid":1120165,"ip_address":"","ucode":"B15AAB42AEA4A2","user_header":"https://static001.geekbang.org/account/avatar/00/11/17/a5/4237891d.jpg","comment_is_top":false,"comment_ctime":1568942460,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1568942460","product_id":100002201,"comment_content":"陈老师，您对容器要取代虚拟化这个说法是怎么看的呢","like_count":0},{"had_liked":false,"id":132273,"user_name":"Magic","can_delete":false,"product_type":"c1","uid":1272047,"ip_address":"","ucode":"FD9CEDAA419EB0","user_header":"https://static001.geekbang.org/account/avatar/00/13/68/ef/6264ca3d.jpg","comment_is_top":false,"comment_ctime":1568077449,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1568077449","product_id":100002201,"comment_content":"祝耗子叔教师节快乐","like_count":0},{"had_liked":false,"id":98311,"user_name":"Hector","can_delete":false,"product_type":"c1","uid":1496889,"ip_address":"","ucode":"110CAF87ADDC01","user_header":"https://static001.geekbang.org/account/avatar/00/16/d7/39/6698b6a9.jpg","comment_is_top":false,"comment_ctime":1558954566,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1558954566","product_id":100002201,"comment_content":"浅读了k8s的内部架构，完美契合了分布式的思想，真执牛儿者!需要再去多读读","like_count":0},{"had_liked":false,"id":41985,"user_name":"安静","can_delete":false,"product_type":"c1","uid":1212634,"ip_address":"","ucode":"7C4DB6D81A48EB","user_header":"https://static001.geekbang.org/account/avatar/00/12/80/da/9c0c458c.jpg","comment_is_top":false,"comment_ctime":1542887018,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1542887018","product_id":100002201,"comment_content":"终于知道pass平台是啥东西了","like_count":0},{"had_liked":false,"id":40069,"user_name":"Geek_fb3db2","can_delete":false,"product_type":"c1","uid":1218254,"ip_address":"","ucode":"8089B8311B6C80","user_header":"https://static001.geekbang.org/account/avatar/00/12/96/ce/8c3bdbe5.jpg","comment_is_top":false,"comment_ctime":1542463150,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1542463150","product_id":100002201,"comment_content":"耗子叔，分布式和集群有啥本质区别","like_count":0},{"had_liked":false,"id":1929,"user_name":"rjava","can_delete":false,"product_type":"c1","uid":1009029,"ip_address":"","ucode":"C850BE3F072A9B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/65/85/3a4b31fc.jpg","comment_is_top":false,"comment_ctime":1515122741,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1515122741","product_id":100002201,"comment_content":"七篇文章能从框架上对分布式相关技术有所了解，结合自身在实现分布式过程中踩到的坑真是好文收益良多。","like_count":0},{"had_liked":false,"id":1775,"user_name":"子悠","can_delete":false,"product_type":"c1","uid":1000383,"ip_address":"","ucode":"070BB09477E8A8","user_header":"https://static001.geekbang.org/account/avatar/00/0f/43/bf/9a982bc1.jpg","comment_is_top":false,"comment_ctime":1514436378,"is_pvip":true,"discussion_count":3,"race_medal":0,"score":"1514436378","product_id":100002201,"comment_content":"这篇文章不太懂了，我还要继续修炼！！！","like_count":0,"discussions":[{"author":{"id":1051023,"avatar":"https://static001.geekbang.org/account/avatar/00/10/09/8f/ad6039b6.jpg","nickname":"沫沫（美丽人生）","note":"","ucode":"FC73BF0D79E3FD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":119194,"discussion_content":"老师好，能否把PaaS专门作为一个课程来讲讲呢，现在很多SaaS公司都在向PaaS转型。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578220889,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1051023,"avatar":"https://static001.geekbang.org/account/avatar/00/10/09/8f/ad6039b6.jpg","nickname":"沫沫（美丽人生）","note":"","ucode":"FC73BF0D79E3FD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":119130,"discussion_content":"老师好，能否把PaaS专门作为一个课程来讲讲呢，现在很多SaaS公司都在向PaaS转型。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578217561,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2806043,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLBFkSq1oiaEMRjtyyv4ZpCI0OuaSsqs04ODm0OkZF6QhsAh3SvqhxibS2n7PLAVZE3QRSn5Hic0DyXg/132","nickname":"ddh","note":"","ucode":"8E852375365F16","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1051023,"avatar":"https://static001.geekbang.org/account/avatar/00/10/09/8f/ad6039b6.jpg","nickname":"沫沫（美丽人生）","note":"","ucode":"FC73BF0D79E3FD","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":543939,"discussion_content":"SaaS服务是基于PaaS来做的， 为啥是SaaS向PaaS转","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641364698,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":119130,"ip_address":""},"score":543939,"extra":""}]}]}]}