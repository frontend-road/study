{"id":174509,"title":"50 | 安全增强：简单有效的黑白名单","content":"<p><strong>课件和Demo地址</strong><br>\n<a href=\"https://gitee.com/geektime-geekbang/geek_netty\">https://gitee.com/geektime-geekbang/geek_netty</a></p>","comments":[{"had_liked":false,"id":159003,"user_name":"鱼向北游","can_delete":false,"product_type":"c3","uid":1439908,"ip_address":"","ucode":"580EC7DCE57E9A","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/IPdZZXuHVMibwfZWmm7NiawzeEFGsaRoWjhuN99iaoj5amcRkiaOePo6rH1KJ3jictmNlic4OibkF4I20vOGfwDqcBxfA/132","comment_is_top":false,"comment_ctime":1575513077,"is_pvip":false,"replies":[{"id":61249,"content":"以前我也不知道，自从看到这么多功能后，我就想着我有没有什么好的功能贡献贡献了，感觉这些功能真的不错。哈哈","user_name":"作者回复","user_name_real":"傅健","uid":1638649,"ctime":1575959276,"ip_address":"","comment_id":159003,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"功能好全，以前使用并没有注意到，涨姿势了","like_count":1,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"傅健","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476910,"discussion_content":"以前我也不知道，自从看到这么多功能后，我就想着我有没有什么好的功能贡献贡献了，感觉这些功能真的不错。哈哈","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575959276,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":174628,"user_name":"谁与话轻柔","can_delete":false,"product_type":"c3","uid":1360264,"ip_address":"","ucode":"0C39AA91A7C9D5","user_header":"https://static001.geekbang.org/account/avatar/00/14/c1/88/e68c58b7.jpg","comment_is_top":false,"comment_ctime":1580302376,"is_pvip":false,"replies":[{"id":68861,"content":"cidrPrefix本身简单理解就是区分网络号和主机号的，和你是什么地址关系不大了，您可以测试下更容易明白。","user_name":"作者回复","user_name_real":"stroller","uid":1638649,"ctime":1581387807,"ip_address":"","comment_id":174628,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"请问，如果客户端的ip不是127.0.0.1 而是随意的外部地址（120.227.23.41），配置黑名单的时候cidrPrefix怎么配置？有什么公式可以计算吗？","like_count":0,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"傅健","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":482464,"discussion_content":"cidrPrefix本身简单理解就是区分网络号和主机号的，和你是什么地址关系不大了，您可以测试下更容易明白。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581387807,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":354405,"user_name":"Linton","can_delete":false,"product_type":"c3","uid":1046562,"ip_address":"中国香港","ucode":"7918113F03FD44","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f8/22/a59136c2.jpg","comment_is_top":false,"comment_ctime":1660362260,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"有个问题, 如果netty前有反向代理的话, 拿到的ip会是反向代理的ip.","like_count":1},{"had_liked":false,"id":365371,"user_name":"L","can_delete":false,"product_type":"c3","uid":1056184,"ip_address":"北京","ucode":"60F51FC6A47E19","user_header":"https://static001.geekbang.org/account/avatar/00/10/1d/b8/75e30d75.jpg","comment_is_top":false,"comment_ctime":1672390631,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"请问老师和各位同学，我通过K8S部署发布netty工程后，通过Channel获取到remoteAddress拿到是K8S的内部IP，而非客户端IP，这该如何处理，多谢","like_count":0},{"had_liked":false,"id":332930,"user_name":"flying eagle","can_delete":false,"product_type":"c3","uid":1155616,"ip_address":"","ucode":"1020359D893C04","user_header":"https://static001.geekbang.org/account/avatar/00/11/a2/20/7549ff2b.jpg","comment_is_top":false,"comment_ctime":1643845606,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"在生产使用的时候，cidrPrefix和 ip 地址该怎么选择呢？","like_count":0},{"had_liked":false,"id":247744,"user_name":"ant","can_delete":false,"product_type":"c3","uid":1556708,"ip_address":"","ucode":"A39A03AF257471","user_header":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKYLPAlGUWic4yAqsGtEYBSRR7gDjyg9yiaJicNhMwiaNw4rMKQ5DHTfp7gmic0gpqEwCZaou8G6CdHKCg/132","comment_is_top":false,"comment_ctime":1599814288,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"我这边通过看代码的堆栈然后重写了channelRegistered方法，发现把增加连接的代码加到这里能避免计数不准的问题","like_count":0},{"had_liked":false,"id":247741,"user_name":"ant","can_delete":false,"product_type":"c3","uid":1556708,"ip_address":"","ucode":"A39A03AF257471","user_header":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKYLPAlGUWic4yAqsGtEYBSRR7gDjyg9yiaJicNhMwiaNw4rMKQ5DHTfp7gmic0gpqEwCZaou8G6CdHKCg/132","comment_is_top":false,"comment_ctime":1599813806,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"老师，我注意到当我们引入黑白名单机制的时候那么会导致，连接数量的统计不再准确了，那么针对这种问题有什么好的处理方式呢？","like_count":0}]}