{"id":404013,"title":"38 | ä»å•æ’åˆ°å›¢æˆ˜ï¼šè¯¦è§£æ“ä½œç³»ç»Ÿçš„å®è§‚ç½‘ç»œæ¶æ„","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯ LMOSã€‚</p><p>ä¸ŠèŠ‚è¯¾æˆ‘ä»¬å­¦ä¹ äº†å•æœºçŠ¶æ€ä¸‹ç½‘ç»œæ•°æ®åœ¨å†…æ ¸ä¸­æµè½¬çš„å…¨è¿‡ç¨‹ï¼Œå¹¶ä¸”å¸¦ä½ ä¸€èµ·æ¢³ç†äº†ç½‘ç»œæ ˆç§»æ¤çš„å…³é”®æ­¥éª¤ã€‚</p><p>è¿™èŠ‚è¯¾æˆ‘ä¼šå¸¦ä½ çœ‹çœ‹ï¼Œç°å®ä¸–ç•Œä¸­ç½‘ç»œè¯·æ±‚æ˜¯å¦‚ä½•ç©¿è¿‡é‡é‡ç½‘ç»œè®¾å¤‡ï¼Œå®ç°å¤§è§„æ¨¡ç»„ç½‘çš„ã€‚åŒæ—¶ï¼Œæˆ‘è¿˜ä¼šç»™ä½ è®²è§£ç½‘ç»œæ¶æ„çš„è¿‡å»ã€ç°åœ¨ï¼Œå¹¶å±•æœ›ä¸€ä¸‹å°†æ¥çš„å‘å±•è¶‹åŠ¿ã€‚æœ€åæˆ‘ä¼šå¸¦ä½ åŠ¨æ‰‹æ­å»ºä¸€ä¸ªç°ä»£äº’è”ç½‘å®éªŒç¯å¢ƒï¼Œé€šè¿‡å®é™…çš„ç»„ç½‘å®è·µåŠ æ·±å¯¹ç½‘ç»œæ¶æ„çš„ç†è§£ã€‚</p><h2>ä»ä¼ ç»Ÿç½‘ç»œæ¶æ„èŠèµ·</h2><p>ä½ æ˜¯å¦å¥½å¥‡è¿‡ï¼Œæˆ‘ä»¬ç›®å‰ç”¨çš„äº’è”ç½‘æ˜¯å¦‚ä½•åšåˆ°äº’è”äº’é€šçš„å‘¢ï¼Ÿ</p><p>è®©æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ä¼ ç»Ÿçš„ä¸‰å±‚ç½‘ç»œæ¶æ„ï¼Œè‘—åçš„é€šä¿¡è®¾å¤‡å‚å•†æ€ç§‘æŠŠè¿™ç§æ¶æ„å«åšåˆ†çº§çš„äº’è”ç½‘ç»œæ¨¡å‹ï¼ˆHierarchical Inter-networking Modelï¼‰ã€‚è¿™ç§æ¶æ„çš„ä¼˜ç‚¹æ˜¯ï¼Œå¯ä»¥æŠŠå¤æ‚çš„ç½‘ç»œè®¾è®¡é—®é¢˜æŠ½è±¡ä¸ºå‡ ä¸ªå±‚é¢æ¥è§£å†³ï¼Œæ¯ä¸ªå±‚é¢åˆèšç„¦äºæŸäº›ç‰¹å®šçš„åŠŸèƒ½ã€‚è¿™æ ·å°±èƒ½æŠŠå¤æ‚è€Œåºå¤§çš„ç½‘ç»œé—®é¢˜æ‹†è§£æˆæ¯”è¾ƒå¥½è§£å†³çš„å­é—®é¢˜ã€‚</p><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œä¸‰å±‚ç½‘ç»œæ¶æ„è®¾è®¡ä¸»è¦åŒ…æ‹¬<strong>æ ¸å¿ƒå±‚ã€æ±‡èšå±‚ã€æ¥å…¥å±‚</strong>è¿™ä¸‰ä¸ªå±‚ã€‚ä¸‹é¢æˆ‘åˆ†åˆ«ç»™ä½ è¯´ä¸€è¯´ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/1c/d0/1cdf9edbfe9d244d75438d64021508d0.jpg?wh=4410x3750\" alt=\"\" title=\"ä¸‰å±‚ç½‘ç»œæ¶æ„ç¤ºæ„å›¾\"></p><p>é¦–å…ˆæ˜¯æ ¸å¿ƒå±‚ã€‚äº¤æ¢å±‚çš„æ ¸å¿ƒäº¤æ¢æœºä¸ºè¿›å‡ºæ•°æ®ä¸­å¿ƒçš„æ•°æ®åŒ…æä¾›é«˜é€Ÿè½¬å‘çš„åŠŸèƒ½ï¼Œä¸ºå¤šä¸ªæ±‡èšå±‚æä¾›è¿é€šæ€§ï¼ŒåŒæ—¶ä¹Ÿä¸ºæ•´ä¸ªç½‘ç»œæä¾›çµæ´»çš„L3è·¯ç”±ç½‘ç»œã€‚</p><p>ç„¶åæ˜¯æ±‡èšå±‚ã€‚æ±‡èšäº¤æ¢æœºä¸æ¥å…¥äº¤æ¢æœºç›¸è¿ï¼Œæä¾›é˜²ç«å¢™ã€SSLå¸è½½ã€å…¥ä¾µæ£€æµ‹ã€ç½‘ç»œåˆ†æç­‰å…¶ä»–æœåŠ¡ã€‚</p><!-- [[[read_end]]] --><p>æœ€åæˆ‘ä»¬æ¥çœ‹æ¥å…¥å±‚ã€‚æ¥å…¥äº¤æ¢æœºé€šå¸¸ä½äºæœºæ¶çš„é¡¶éƒ¨ï¼Œå› æ­¤å®ƒä»¬ä¹Ÿè¢«ç§°ä¸ºToRäº¤æ¢æœºï¼Œå¹¶ä¸”å®ƒä»¬ä¸æœåŠ¡å™¨ç‰©ç†è¿æ¥ã€‚</p><p>å½“ç„¶ï¼Œè§‚å¯Ÿè¿™ä¸ªæ¶æ„æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œæ ¸å¿ƒå±‚å’Œæ±‡èšå±‚è¿™ç§éª¨å¹²ç½‘ç»œéœ€è¦æ‰¿æ‹…çš„æµé‡æ˜¯è›®å¤§çš„ï¼Œæµé‡å¤§æ„å‘³ç€å¯¹äº¤æ¢æ€§èƒ½ã€æ•ˆç‡æœ‰æ›´é«˜çš„è¦æ±‚ã€‚æ‰€ä»¥ä¸ºäº†è§£å†³æ€§èƒ½ã€æ•ˆç‡ç­‰é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦åœ¨OSIçš„1ã€2ã€3å±‚ä¸Šåˆ†åˆ«åšä¼˜åŒ–ã€‚</p><p>è¿™é‡Œè¦è¯´åˆ°ä¼ ç»Ÿç½‘ç»œæ¶æ„çš„ä¸è¶³ä¹‹å¤„ï¼Œæˆ‘ä»¬å‘ç°ç»å…¸çš„IPç½‘ç»œæ˜¯é€è·³è½¬å‘æ•°æ®çš„ã€‚è½¬å‘æ•°æ®æ—¶ï¼Œæ¯å°è·¯ç”±å™¨éƒ½è¦æ ¹æ®åŒ…å¤´çš„ç›®çš„åœ°å€æŸ¥è¯¢è·¯ç”±è¡¨ï¼Œä»¥è·å¾—ä¸‹ä¸€è·³çš„å‡ºå£ã€‚è¿™ä¸ªè¿‡ç¨‹æ˜¾ç„¶æ˜¯ç¹çä½æ•ˆçš„ã€‚</p><p>å¦å¤–ï¼Œè½¬å‘è·¯å¾„ä¹Ÿä¸å¤Ÿçµæ´»ï¼Œä¸ºäº†åŠ ä»¥æ”¹å–„ï¼Œæˆ‘ä»¬åœ¨ç¬¬äºŒå±‚ä¹‹ä¸Šã€ç¬¬ä¸‰å±‚ä¹‹ä¸‹å¼•å…¥ä¸€ä¸ª2.5å±‚çš„æŠ€æœ¯æ–¹æ¡ˆï¼Œå³å¤šåè®®æ ‡ç­¾äº¤æ¢ï¼ˆMPLSï¼‰æŠ€æœ¯ã€‚</p><h3>ä¼˜åŒ–ä¸è¿­ä»£ï¼šMPLSæŠ€æœ¯</h3><p>ç›®å‰MPLSæŠ€æœ¯åœ¨å›½å†…åº”ç”¨å¹¿æ³›ï¼Œæ— è®ºæ˜¯BATç­‰äº’è”ç½‘å·¨å¤´ï¼Œè¿˜æ˜¯è¿è¥å•†å»ºè®¾éª¨å¹²ç½‘éƒ½åœ¨åº”ç”¨è¿™ç§æŠ€æœ¯ã€‚MPLSçš„æ ¸å¿ƒç»“æ„å¦‚ä¸‹ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/d0/fc/d06de7ca8e0d693667fd93bab0cd82fc.jpg?wh=3307x1612\" alt=\"\" title=\"MPLSæ ¸å¿ƒç»“æ„å›¾\"></p><p>MPLSé€šè¿‡LDPæ ‡ç­¾åˆ†å‘åè®®ã€‚æˆ‘æ¥ä¸¾ä¸ªä¾‹å­å§ï¼Œè¿™ç›¸å½“äºæŠŠå¿«é€’æ ‡ç­¾â€œè´´åœ¨â€äº†å¿«é€’ç›’å­ä¸Šäº†ï¼Œåç»­åªéœ€è¦è¯»å–æ ‡ç­¾ï¼Œå°±èƒ½çŸ¥é“è¿™ä¸ªæ•°æ®è¦è½¬å‘åˆ°å“ªé‡Œå»äº†ã€‚è¿™æ ·å°±é¿å…äº†ä¼ ç»Ÿè·¯ç”±ç½‘ç»œä¸­æ¯è·¯è¿‡ä¸€ä¸ªç»æ‰‹äººï¼ˆæ¯ä¸€è·³ï¼‰ï¼Œéƒ½è¦æŠŠå¿«é€’ç›’å­æ‰“å¼€çœ‹ä¸€çœ‹çš„é¢å¤–å¼€é”€ã€‚</p><p>è€Œè·¯å¾„è®¡ç®—å…ƒç´ åè®®ï¼ˆRSVP-TEï¼‰æœ€å¤§çš„ä¼˜ç‚¹æ˜¯<strong>æ”¶é›†æ•´ä¸ªç½‘ç»œçš„æ‹“æ‰‘å’Œé“¾è·¯çŠ¶æ€ä¿¡æ¯</strong>ã€‚é€šè¿‡æ‰©å±•çš„èµ„æºé¢„ç•™åè®®ï¼Œå¯ä»¥å®ç°çµæ´»çš„è½¬å‘è·¯å¾„é€‰æ‹©å’Œè§„åˆ’ã€‚è¿™å°±å¥½æ¯”åŒåä¸€äº†ï¼Œç‰©æµå…¬å¸æ ¹æ®ç‰©æµå¤§æ•°æ®æ”¶é›†åˆ°çš„è·¯ç½‘å’Œæ‹¥å µçŠ¶æ€ç­‰ä¿¡æ¯ï¼Œè‡ªåŠ¨è§„åˆ’å‡ºæ€§ä»·æ¯”æœ€é«˜çš„è·¯å¾„ï¼Œæ˜¾ç„¶å¿«é€’é…é€æ•ˆç‡ä¼šå¾—åˆ°å¾ˆå¤§æå‡ã€‚</p><p>å½“ç„¶ï¼Œåªåœ¨OSIçš„2ã€3å±‚ä¹‹é—´åšä¼˜åŒ–æ˜¯è¿œè¿œä¸å¤Ÿçš„ï¼Œä¸ºäº†æ»¡è¶³åŠ¨è¾„æ•°ç™¾Gä¼ è¾“éœ€æ±‚ï¼Œç‰©ç†å±‚ä¹Ÿç»å†äº†ä»DWDMï¼ˆDense Wavelength Division Multiplexingï¼‰æ³¢åˆ†å¤ç”¨ç³»ç»Ÿè¿™ç§æ³¢åˆ†å¤ç”¨æŠ€æœ¯åˆ°OTNï¼ˆIptical Transport Networkï¼Œå…‰ä¼ é€ç½‘ï¼‰çš„æŠ€æœ¯æ¼”è¿›ã€‚æ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥æœç´¢å…‰ä¼ é€ç½‘å’Œæ³¢åˆ†å¤ç”¨ç›¸å…³çš„èµ„æ–™ï¼Œè¿™é‡Œæˆ‘å°±ä¸å±•å¼€äº†ã€‚</p><p>æ ¹æ®å‰é¢çš„è®²è§£æˆ‘ä»¬å‘ç°ï¼Œä¼ ç»Ÿç½‘ç»œåŸºç¡€æ¶æ„ç¡®å®å¯ä»¥è§£å†³ä¸å°‘é—®é¢˜ï¼Œä½†è¿™æ ·çœŸçš„å®Œç¾äº†ä¹ˆï¼Ÿå…¶å®ä¸ç„¶ï¼Œæ¯”å¦‚å‰é¢çš„MPLSæŠ€æœ¯è™½ç„¶ä¹Ÿè§£å†³äº†é—®é¢˜ï¼Œä½†ä¹ŸåŠ é‡äº†è€¦åˆï¼Œå¹¶ä¸”å­˜åœ¨èµ„æºåˆ©ç”¨ç‡ä½ã€å¤æ‚åº¦é«˜ã€ä»·æ ¼æ˜‚è´µç­‰ç¼ºç‚¹ã€‚</p><p>æ‰€ä»¥åæ¥SRï¼ˆSegment Routingï¼‰æŠ€æœ¯åˆåº”è¿è€Œç”Ÿï¼Œè€Œéšç€IPv6çš„æ¼”è¿›ï¼Œæˆ‘ä»¬ç”¨SRv6æ›¿ä»£MPLSæŠ€æœ¯ä¹Ÿæ˜¯å¤§åŠ¿æ‰€è¶‹ã€‚</p><p>å¦å¤–ï¼Œæˆ‘ä»¬è¿˜è¦æ³¨æ„åˆ°ä¸šåŠ¡éœ€æ±‚çš„å˜åŒ–ã€‚æ¯”å¦‚éšç€äº‘ä¸5Gç­‰ç§»åŠ¨é€šä¿¡çš„å‘å±•ï¼Œæµé‡é™¤äº†ä»¥å‰å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„å—åŒ—å‘é€šä¿¡ä¹‹å¤–ï¼ŒæœåŠ¡ç«¯åˆ†å¸ƒå¼æœåŠ¡ä¹‹é—´ä¹Ÿä¼šå¼•å…¥äº†å¤§é‡çš„é€šä¿¡æµé‡ã€‚ç”šè‡³éšç€äº‘ä¸å®¹å™¨çš„æ¼”è¿›ï¼ŒæœåŠ¡ç«¯ä¼šå­˜åœ¨å¤§é‡çš„è™šæ‹Ÿæœºè¿ç§»ç­‰åŠ¨ä½œã€‚è¿™äº›å¯¹ä¼ ç»Ÿç½‘ç»œä¸­STPæ‹“æ‰‘å˜åŒ–ã€æ”¶æ•›ä»¥åŠç½‘ç»œè§„æ¨¡éƒ½å¸¦æ¥äº†å·¨å¤§çš„æŒ‘æˆ˜ã€‚</p><p>é‚£ä¹ˆå¦‚ä½•è§£å†³ä¼ ç»Ÿä¸‰å±‚ç½‘ç»œæ¶æ„å¸¦æ¥çš„æŒ‘æˆ˜å‘¢ï¼Ÿç­”æ¡ˆå…¶å®åœ¨è´å°”å®éªŒå®¤çš„Charles Closåšå£«åœ¨1953å¹´çš„ã€Šæ— é˜»å¡äº¤æ¢ç½‘ç»œç ”ç©¶ã€‹ä¹‹ä¸­ã€‚è®ºæ–‡ä¸­æåˆ°çš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š<strong>ç”¨å¤šä¸ªå°è§„æ¨¡ã€ä½æˆæœ¬çš„å•å…ƒï¼Œæ„å»ºå¤æ‚ã€å¤§è§„æ¨¡çš„ç½‘ç»œã€‚</strong></p><p>è®ºæ–‡ä¸­æåˆ°çš„ç®€å•çš„CLOWç½‘ç»œæ˜¯åŒ…å«è¾“å…¥çº§åˆ«ã€ä¸­é—´çº§åˆ«å’Œè¾“å‡ºçº§åˆ«çš„ä¸‰çº§äº’è¿ä½“ç³»ç»“æ„ã€‚</p><p>ä¸‹å›¾ä¸­çš„çŸ©å½¢è¡¨ç¤ºè§„æ¨¡è¾ƒå°çš„è½¬å‘å•å…ƒï¼Œå…¶æˆæœ¬æ˜¾ç„¶ä¹Ÿç›¸å¯¹è¾ƒä½ã€‚CLOSçš„æœ¬è´¨å¯ä»¥ç®€å•ç†è§£ä¸ºæ˜¯ä¸€ç§å¤šçº§äº¤æ¢çš„æ¶æ„æ€æƒ³ï¼Œå¹¶ä¸”è¿™ç§æ¶æ„å¾ˆé€‚åˆåœ¨è¾“å…¥å’Œè¾“å‡ºæŒç»­å¢åŠ çš„æƒ…å†µä¸‹å°†ä¸­é—´äº¤å‰æ•°é™è‡³æœ€ä½ã€‚</p><p>ä¸‹å›¾ä¸­ï¼Œmæ˜¯æ¯ä¸ªå­æ¨¡å—çš„è¾“å…¥ç«¯å£æ•°ï¼Œnæ˜¯æ¯ä¸ªå­æ¨¡å—çš„è¾“å‡ºç«¯å£æ•°ï¼Œræ˜¯æ¯ä¸€çº§çš„å­æ¨¡å—æ•°ï¼Œç»è¿‡åˆç†çš„é‡æ’ï¼Œåªè¦æ»¡è¶³å…¬å¼ï¼š</p><pre><code>r2â‰¥max(m1,n3)\n</code></pre><p>é‚£ä¹ˆï¼Œå¯¹äºä»»æ„çš„è¾“å…¥åˆ°è¾“å‡ºï¼Œæ€»æ˜¯èƒ½æ‰¾åˆ°ä¸€æ¡æ— é˜»å¡çš„é€šè·¯ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/c5/86/c5d6de358fa1a058da525206e096f086.jpg?wh=3705x2655\" alt=\"\" title=\"CLOSå›¾è§£\"></p><p>ç›´åˆ°1990å¹´ä»£ï¼ŒCLOSæ¶æ„è¢«åº”ç”¨åˆ°Switch Fabricã€‚åº”ç”¨CLOSæ¶æ„çš„äº¤æ¢æœºçš„å¼€å…³å¯†åº¦ï¼Œä¸äº¤æ¢æœºç«¯å£æ•°é‡Nçš„å…³ç³»å¦‚ä¸‹ã€‚</p><pre><code>O(N^(3/2))\n</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œåœ¨Nè¾ƒå¤§æ—¶ï¼ŒCLOSæ¨¡å‹èƒ½é™ä½äº¤æ¢æœºå†…éƒ¨çš„å¼€å…³å¯†åº¦ã€‚ç”±æ­¤å¯è§ï¼Œè¶Šæ¥è¶Šå¤šçš„äººå‘ç°äº†ä¼ ç»Ÿä¸‰å±‚ç½‘ç»œæ¶æ„ä¸‹çš„ç—›ç‚¹ï¼Œäºæ˜¯ä¸€ç§å«åšèƒ–æ ‘çš„ç½‘ç»œæ¶æ„åº”è¿è€Œç”Ÿï¼ˆæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥åœ¨æœç´¢ã€ŠA Scalable, Commodity Data Center Network Architectureã€‹è¿™ç¯‡è®ºæ–‡ï¼‰ã€‚</p><p>è€Œå€Ÿé‰´Fattreeå’ŒCLOSæ¨¡å‹çš„æ€æƒ³ï¼Œç›®å‰ä¸šç•Œè¡ç”Ÿå‡ºäº†å¶è„Šï¼ˆSpine-Leafï¼‰ç½‘ç»œæ¶æ„ã€‚ç›®å‰é€šè¿‡FaceBookã€Googleç­‰å…¬å¸å¤§é‡å®è·µçš„äº‹å®å·²ç»è¯æ˜ï¼ŒSpine-Leafç½‘ç»œæ¶æ„å¯ä»¥æä¾›é«˜å¸¦å®½ã€ä½å»¶è¿Ÿã€éé˜»å¡ã€å¯æ‰©å±•çš„æœåŠ¡å™¨åˆ°æœåŠ¡å™¨è¿æ¥ã€‚</p><p>è¿™ç§æ–°ä¸€ä»£æ¶æ„åœ¨å·¥ç¨‹å®è·µä¸­çš„ä»£è¡¨ä¹‹ä¸€ï¼Œåˆ™æ­£æ˜¯Googleçš„B4ç½‘ç»œï¼Œæ¥ä¸‹æ¥å°±è®©æˆ‘ä»¬ä¸€èµ·çœ‹ä¸€ä¸‹Google B4ç½‘ç»œçš„æ¶æ„ã€‚</p><h2>è°ˆè°ˆGoogle B4</h2><p>Googleçš„ç ”ç©¶å‘˜Amin Vahdatæ›¾ç»è¯´è¿‡ï¼šâ€œå¦‚æœæ²¡æœ‰è½¯ä»¶å®šä¹‰ç½‘ç»œï¼Œé‚£Googleå°±ä¸ä¼šæ˜¯ä»Šå¤©çš„Googleã€‚â€</p><p>ä¸ºäº†å®ç°å®ç°æ•°æ®ä¸­å¿ƒçš„äº’è”äº’é€šï¼Œè°·æ­Œè®¾è®¡å¹¶æ­å»ºäº†B4ç½‘ç»œï¼Œå®ç°äº†æ•°æ®åœ¨å„ä¸ªå…¬å¸å›­åŒºä¹‹é—´çš„å®æ—¶å¤åˆ¶ã€‚</p><p>B4ç½‘ç»œçš„æ ¸å¿ƒæ¶æ„ç”±Googleè®¾è®¡çš„æ§åˆ¶è½¯ä»¶å’Œç™½ç›’äº¤æ¢æœºæ„æˆã€‚è°·æ­Œçš„ç›®æ ‡æ˜¯å»ºç«‹ä¸€ä¸ªç±»ä¼¼äºå¹¿åŸŸç½‘çš„é•œåƒç½‘ç»œï¼Œéšç€ç½‘ç»œè§„æ¨¡çš„ä¸æ–­æ‰©å±•ï¼Œç›®å‰è°·æ­Œçš„å¤§éƒ¨åˆ†ä¸šåŠ¡éƒ½å·²ç»è¿è¡Œåœ¨B4ä¸Šäº†ã€‚</p><p>æ¥ä¸‹æ¥è®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹Google Google B4çš„æ¶æ„å›¾ï¼ˆä¸‹é¢4å¼ å›¾å‡ºè‡ª<a href=\"https://cseweb.ucsd.edu/~vahdat/papers/b4-sigcomm13.pdf\">Google B4ç½‘ç»œè®ºæ–‡</a>ï¼‰ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/c6/1b/c646fc729ff1da2ab19b62f7ed0a921b.png?wh=859x630\" alt=\"\" title=\"B4ç½‘ç»œæ¶æ„å›¾\"></p><p>B4ç½‘ç»œçš„å…¶å®ä¹Ÿæ˜¯ç”±ä¸‰å±‚æ„æˆï¼Œä½†è¿™ä¸ªå’Œä¼ ç»Ÿç½‘ç»œçš„â€œä¸‰å±‚æ¶æ„â€åˆä¸å¤ªä¸€æ ·ã€‚è¿™é‡ŒæŒ‡çš„æ˜¯ç‰©ç†è®¾å¤‡å±‚ï¼ˆSwitch Hardwareï¼‰ã€å±€éƒ¨ç½‘ç»œæ§åˆ¶å±‚ï¼ˆSite Controllersï¼‰å’Œå…¨å±€æ§åˆ¶å±‚ï¼ˆGlobalï¼‰ã€‚</p><p>å…¨å±€æ§åˆ¶å±‚ä¸­çš„SDNç½‘å…³å’ŒTEæœåŠ¡å™¨ä¼šåœ¨å…¨å±€è¿›è¡Œç»Ÿä¸€æ§åˆ¶ï¼Œè€Œæ¯ä¸ªæ•°æ®ä¸­å¿ƒï¼ˆSiteï¼‰åˆ™ä¼šé€šè¿‡Site Controlleræ¥æ§åˆ¶ç‰©ç†äº¤æ¢æœºï¼Œä»è€Œå®ç°å°†ç½‘ç»œçš„æ§åˆ¶é¢å’Œæ•°æ®é¢åˆ†ç¦»çš„æ•ˆæœã€‚</p><h3>ç¬¬ä¸€å±‚ï¼šç‰©ç†è®¾å¤‡å±‚</h3><p>æˆ‘ä»¬é¦–å…ˆæ¥çœ‹ç¬¬ä¸€å±‚çš„ç‰©ç†äº¤æ¢è®¾å¤‡ï¼Œå®ƒæ˜¯Googleè‡ªç ”å¹¶è¯·ODMå‚å•†ä»£å·¥çš„ç™½ç›’äº¤æ¢æœºã€‚è¿™ä¸ªè‡ªç ”çš„äº¤æ¢æœºä½¿ç”¨äº†24é¢—16Ã—10Gbçš„èŠ¯ç‰‡ï¼Œè¿˜æºå¸¦äº†128ä¸ª10Gbç½‘å£ã€‚</p><p>äº¤æ¢æœºé‡Œé¢è¿è¡Œçš„æ˜¯OpenFlowåè®®ã€‚ä½†ä¼—æ‰€å‘¨çŸ¥ï¼Œäº¤æ¢æœºå†…çš„ä¸“ç”¨èŠ¯ç‰‡ä»ç ”å‘è®¾è®¡åˆ°æœ€ç»ˆæµç‰‡å…¶å®å‘¨æœŸå’Œæˆæœ¬è¿˜æ˜¯å¾ˆé«˜çš„ã€‚</p><p>é‚£å¦‚ä½•è®©ä¸“ç”¨çš„äº¤æ¢æœºèŠ¯ç‰‡è·ŸOpenFlowæ›´å¥½åœ°è¿›è¡ŒååŒå‘¢ï¼Ÿä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒGoogleé‡‡ç”¨äº†TTPæ–¹æ¡ˆã€‚å®é™…è¿è¡Œæ—¶äº¤æ¢æœºåˆ™ä¼šæŠŠåƒè®¿é—®æ§åˆ¶åˆ—è¡¨ï¼ˆACLï¼‰ã€è·¯ç”±è¡¨ã€éš§é“è¡¨ä¹‹ç±»çš„å…³é”®æ•°æ®é€šè¿‡BGP/IS-ISåè®®æŠ¥æ–‡é€åˆ°Controllerï¼Œç”±Controllerè¿›è¡Œå¤„ç†ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/94/70/940c89da5963e2d1d63c5b89576a1270.png?wh=1099x581\" alt=\"\" title=\"ç‰©ç†è®¾å¤‡å±‚\"></p><h3>ç¬¬äºŒå±‚ï¼šå±€éƒ¨ç½‘ç»œæ§åˆ¶å±‚</h3><p>B4ç½‘ç»œä¸­ï¼Œä¸€ä¸ªControlleræœåŠ¡å¯ä»¥æ§åˆ¶å¤šä¸ªäº¤æ¢æœºã€‚è€Œä¸ºäº†ä¿è¯å¯ç”¨æ€§ï¼Œä¸€ä¸ªäº¤æ¢æœºæ˜¯å¯ä»¥è¿æ¥å¤šä¸ªControlleræœåŠ¡çš„ï¼Œè€ŒåŒä¸€æ—¶é—´åªä¼šæœ‰ä¸€ä¸ªControlleræœåŠ¡ä¸ºè¿™å°äº¤æ¢æœºæä¾›æœåŠ¡ï¼Œå¹¶ä¸”ä¸€ä¸ªæ•°æ®ä¸­å¿ƒä¸­ä¼šåŒ…å«ç”±å¤šä¸ªControlleræœåŠ¡å®ä¾‹æ„æˆçš„æœåŠ¡é›†ç¾¤ã€‚</p><p>åœ¨å±€éƒ¨ç½‘ç»œæ§åˆ¶å±‚ä¸­ï¼Œè¿˜ä¼š<strong>ä½¿ç”¨Paxosåè®®è´Ÿè´£æ‰€æœ‰æ§åˆ¶åŠŸèƒ½çš„é¢†å¯¼è€…ï¼ˆleaderï¼‰é€‰ä¸¾</strong>ã€‚</p><p>å…·ä½“è¿‡ç¨‹æ˜¯è¿™æ ·çš„ï¼Œæ¯ä¸ªèŠ‚ç‚¹ä¸Šçš„Paxoså®ä¾‹å¯¹ç»™å®šæ§åˆ¶åŠŸèƒ½çš„å¯ç”¨å‰¯æœ¬é›†åšåº”ç”¨ç¨‹åºçº§åˆ«çš„å¥åº·æ£€æµ‹ã€‚å½“å¤§å¤šæ•°çš„Paxoså®ä¾‹æ£€æµ‹åˆ°æ•…éšœæ—¶ï¼Œä»–ä»¬å°±ä¼šä»å‰©ä½™çš„å¯ç”¨æœåŠ¡å™¨é›†ä¸­é€‰å‡ºä¸€ä¸ªæ–°çš„è´Ÿè´£äººã€‚ç„¶åï¼ŒPaxosä¼šå°†é€’å¢çš„IDå·å›è°ƒç»™å½“é€‰çš„leaderã€‚leaderä½¿ç”¨è¿™ä¸ªIDæ¥å‘å®¢æˆ·è¡¨æ˜è‡ªå·±çš„èº«ä»½ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/c4/63/c4e7477dc2a7998d1ea22277274c6a63.png?wh=1790x632\" alt=\"\" title=\"å±€éƒ¨ç½‘ç»œæ§åˆ¶å±‚\"></p><h3>ç¬¬ä¸‰å±‚å…¨å±€æ§åˆ¶å±‚ï¼ˆGlobalï¼‰</h3><p>è´Ÿè´£å…¨å±€æ§åˆ¶çš„TE Serveré€šè¿‡SDN Gatewayä»å„ä¸ªæ•°æ®ä¸­å¿ƒçš„æ§åˆ¶å™¨æ”¶é›†é“¾è·¯ä¿¡æ¯ï¼Œä»è€ŒæŒæ¡è·¯å¾„çŠ¶æ€ã€‚è¿™äº›è·¯å¾„ä»¥IP-In-IPéš§é“çš„æ–¹å¼åˆ›å»ºï¼Œé€šè¿‡SDNç½‘å…³åˆ°è¾¾Onixæ§åˆ¶å™¨ï¼Œæœ€åä¸‹è¾¾åˆ°äº¤æ¢æœºã€‚</p><p>å½“ä¸€ä¸ªæ–°çš„ä¸šåŠ¡æ•°æ®éœ€è¦ä¼ è¾“æ—¶ï¼Œåº”ç”¨ç¨‹åºä¼šä¼°è®¡å®ƒåœ¨ä¼ è¾“æ—¶éœ€è¦çš„å¸¦å®½ï¼Œå¹¶ä¸ºå®ƒé€‰æ‹©ä¸€ä¸ªæœ€ä½³è·¯å¾„ï¼Œè¿™æ ·å¯ä»¥è®©é“¾è·¯çš„å¸¦å®½åˆ©ç”¨ç‡è¾¾åˆ°æ•´ä½“æœ€ä½³ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/aa/01/aa4ed7e58fa4ea766fbbcb7dc3830a01.png?wh=949x534\" alt=\"\" title=\"å…¨å±€æ§åˆ¶å±‚\"></p><h2>SDNåŸç†</h2><p>å¼€æ”¾ç½‘ç»œåŸºé‡‘ä¼šONFï¼ˆOpen Networking Foundationï¼‰åˆ™ç«™åœ¨äº†Google B4ç­‰å‰äººç»éªŒçš„åŸºç¡€ä¸Šï¼Œå½“ç„¶ä¹Ÿæ˜¯å°†SDNæ¶æ„åˆ†ä¸ºä¸‰å±‚ï¼Œå¦‚ä¸‹ã€‚</p><p>åº”ç”¨å±‚æ˜¯ç”±åŒ…å«äº†å„ç§ä¸åŒçš„çš„ä¸šåŠ¡é€»è¾‘çš„åº”ç”¨æ„æˆçš„ã€‚</p><ul>\n<li>æ§åˆ¶å±‚ä¸»è¦è´Ÿè´£æ•°æ®å¹³é¢ç›¸å…³èµ„æºçš„ç¼–æ’ã€è°ƒåº¦ã€ç½‘ç»œæ‹“æ‰‘çš„ç»´æŠ¤ä»¥åŠçŠ¶æ€ä¿¡æ¯ç®¡ç†ç­‰å·¥ä½œã€‚</li>\n<li>æ•°æ®å±‚ç›¸å¯¹æ¥è¯´é€»è¾‘æ›´è½»ï¼Œä¸»è¦è´Ÿè´£æ•°æ®çš„è½¬å‘ã€å¤„ç†ä»¥åŠè¿è¡Œæ—¶çš„ä¸€äº›çŠ¶æ€æ”¶é›†å·¥ä½œã€‚</li>\n</ul><p><img src=\"https://static001.geekbang.org/resource/image/38/ee/38015c71a27996d161ca5d86153fe1ee.jpg?wh=1353x968\" alt=\"\" title=\"ONF-SDNæ¶æ„å›¾ï¼Œä¸Šå›¾å‡ºè‡ªONFå®˜æ–¹æ–‡æ¡£\"></p><h3>SDNçš„åŸºæœ¬ç‰¹å¾å’Œä¼˜åŠ¿</h3><p>SDNä¸»è¦åŒ…å«ä¸‰ä¸ªåŸºæœ¬ç‰¹å¾ï¼Œæˆ‘ä»¬å¯ä»¥åˆ†åˆ«æ¥çœ‹ä¸€ä¸‹ã€‚</p><p>1.æ§åˆ¶é€»è¾‘ä¸è½¬å‘é€»è¾‘åˆ†ç¦»ã€‚è½¬å‘å¹³é¢ä¸»è¦æ˜¯ç”±å—æ§çš„è½¬å‘è®¾å¤‡æ„æˆï¼Œå…·ä½“çš„è½¬å‘æ–¹å¼å’Œç›¸å…³ä¸šåŠ¡é€»è¾‘åˆ™ç”±åˆ†ç¦»åœ¨æ§åˆ¶é¢çš„æ§åˆ¶åº”ç”¨ç¨‹åºæ§åˆ¶ã€‚<br>\n2.å¼€æ”¾çš„APIã€‚é€šè¿‡å¼€æ”¾çš„å—åŒ—å‘APIï¼Œå¯ä»¥å®ç°åº”ç”¨å’Œç½‘ç»œçš„æ— ç¼é›†æˆï¼Œè®©åº”ç”¨åªéœ€è¦å…³æ³¨è‡ªå·±çš„é€»è¾‘ï¼Œä¸éœ€è¦å…³æ³¨åº•å±‚çš„å®ç°ç»†èŠ‚ã€‚<br>\n3.é›†ä¸­æ§åˆ¶ï¼šé›†ä¸­çš„æ§åˆ¶å¹³é¢å¯ä»¥è·å–ç½‘ç»œèµ„æºçš„å…¨å±€ä¿¡æ¯ï¼Œå¹¶æ ¹æ®ä¸šåŠ¡éœ€æ±‚è¿›è¡Œå…¨å±€åˆ†é…å’Œä¼˜åŒ–ã€‚</p><p>ç»“åˆæˆ‘ä»¬å‰é¢æ‰€è®²çš„SDNçš„ç‰¹å¾ï¼Œæˆ‘å¸®ä½ æ¢³ç†äº†SDNçš„å‡ å¤§ä¼˜åŠ¿ã€‚</p><p>1.çµæ´»æ€§ï¼ŒåŠ¨æ€è°ƒæ•´ç½‘ç»œè®¾å¤‡çš„é…ç½®ï¼Œä¸å†éœ€è¦æ‰‹åŠ¨é…ç½®æ¯å°è®¾å¤‡äº†ã€‚<br>\n2.ç½‘ç»œç¡¬ä»¶ç®€åŒ–ï¼ˆå¦‚ç™½ç›’äº¤æ¢æœºç­‰ï¼‰ã€‚åªéœ€è¦å…³æ³¨æ•°æ®å¤„ç†å’Œè½¬å‘ï¼Œä¸å…·ä½“ä¸šåŠ¡ç‰¹æ€§è§£è€¦ï¼ŒåŠ é€Ÿæ–°ä¸šåŠ¡ç‰¹æ€§çš„å¼•å…¥ã€‚<br>\n3.è‡ªåŠ¨åŒ–çš„ç½‘ç»œéƒ¨ç½²ã€æ“ä½œå’Œç»´æŠ¤ä»¥åŠæ•…éšœè¯Šæ–­ã€‚</p><p>ä¸ºäº†åŠ æ·±å¤§å®¶å¯¹SDNçš„ç†è§£ï¼Œæ¥ä¸‹æ¥è®©æˆ‘ä»¬ä¸€èµ·ç»™äºˆå¼€æºçš„æ§åˆ¶é¢ONOSä»¥åŠæ•°æ®é¢Mininetè¿›è¡Œä¸€ä¸‹ç»„ç½‘è¯•éªŒã€‚</p><h2>å¼€æ”¾ç½‘ç»œæ“ä½œç³»ç»ŸONOSç»„ç½‘å®è·µ</h2><p>ONOSæ˜¯ä¸€ä¸ªå¼€æºçš„ã€åˆ†å¸ƒå¼çš„ç½‘ç»œæ“ä½œç³»ç»Ÿæ§åˆ¶å¹³å°ï¼Œå¯ä»¥æ»¡è¶³è¿è¥å•†å¯¹ç½‘ç»œä¸šåŠ¡çš„ç”µä¿¡çº§éœ€æ±‚ã€‚</p><p>è‡ªONOSè¯ç”Ÿä»¥æ¥ï¼Œå°±å·²ç»æ±‡èšäº†å¾ˆå¤šçŸ¥åæœåŠ¡æä¾›å•†(å¦‚ATTã€NTTé€šä¿¡)ã€ä»¥åŠä¸€äº›é«˜æ ‡å‡†ç½‘ç»œè®¾å¤‡ä¾›åº”å•†ã€è¿è¥å•†ã€åˆä½œä¼™ä¼´ï¼ˆå¦‚è‹±ç‰¹å°”ã€çˆ±ç«‹ä¿¡ã€Cienaã€å¯Œå£«é€šã€åä¸ºã€NECã€CNITã€CREATE-NETã€Infobloxã€SRIï¼‰ç­‰ï¼Œå¾—åˆ°äº†ONFçš„å…¨åŠ›æ”¯æŒã€‚ç›®å‰ï¼ŒONOSå·²ç»å¾—åˆ°ä¸šç•Œè¶Šæ¥è¶Šå¤šçš„è®¤å¯ä¸æ”¯æŒã€‚</p><p>æˆ‘ä»¬å‰é¢è®²è¿‡SDNåˆ†ä¸ºæ§åˆ¶é¢å’Œæ•°æ®é¢ï¼Œå¯¹åº”åˆ°å¼€æºå®ç°ä¸­ONOSå°±æ˜¯æ§åˆ¶é¢çš„å…·ä½“å®ç°ï¼Œè€ŒMininetå¯¹åº”çš„å°±æ˜¯æ•°æ®é¢å®ç°ã€‚Mininetæ˜¯ç”±æ–¯å¦ç¦å¤§å­¦åŸºäºLinuxå®¹å™¨æ¶æ„å¼€å‘çš„ä¸€ä¸ª<strong>äº‘åŸç”Ÿè™šæ‹ŸåŒ–ç½‘ç»œä»¿çœŸå·¥å…·</strong>ã€‚</p><p>ä½¿ç”¨ONOS+Mininetæˆ‘ä»¬å¯ä»¥å¿«é€Ÿåˆ›å»ºä¸€ä¸ªåŒ…å«ä¸»æœºã€äº¤æ¢æœºã€SDNæ§åˆ¶å™¨ä»¥åŠé“¾è·¯çš„è™šæ‹Ÿç½‘ç»œï¼Œå¹¶ä¸”Mininetåˆ›å»ºçš„äº¤æ¢æœºä¹Ÿæ˜¯æ”¯æŒä¸Šæ–‡è®²åˆ°çš„OpenFlowåè®®çš„ï¼Œè¿™ä¹Ÿä½¿å¾—å®ƒå…·å¤‡äº†é«˜åº¦çš„çµæ´»æ€§ã€‚ä½¿ç”¨è¿™ä¸ªå·¥å…·ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æœ¬åœ°è½»æ¾æ­å»ºä¸€ä¸ªSDNå¼€å‘ã€è°ƒè¯•ç¯å¢ƒã€‚</p><h3>ä¸‹è½½è™šæ‹Ÿæœºé•œåƒ</h3><p>é¦–å…ˆï¼Œè®©æˆ‘ä»¬ä½¿ç”¨å®˜æ–¹æ‰“åŒ…å¥½çš„<a href=\"http://mininet.org/download/\">é•œåƒ</a>virtualboxå®‰è£…Mininetï¼Œè¿™ç§æ–¹å¼å®‰è£…æ¯”è¾ƒç®€å•é«˜æ•ˆã€‚</p><h3>å®‰è£…Mininet</h3><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œä¸‹è½½mininet-2.3.0-210211-ubuntu-20.04.1-legacy-server-amd64-ovf.zipï¼Œè§£å‹åå¯¼å…¥è™šæ‹Ÿæœºå³å¯ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/1c/bc/1c59861e3052beyy5038611857c84fbc.jpg?wh=1448x780\" alt=\"\" title=\"å®‰è£…Mininet\"></p><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå¯¼å…¥å®Œæ¯•ä¹‹åï¼Œæˆ‘ä»¬æ­£å¸¸å¯åŠ¨è™šæ‹Ÿæœºã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/ce/39/ce7a20b977f37ab33ca0deb83b9f8639.jpg?wh=1410x854\" alt=\"\" title=\"ç™»é™†è™šæ‹Ÿæœº\"></p><p>å¯¼å…¥æˆåŠŸåï¼Œä½¿ç”¨ç”¨æˆ·å/å¯†ç ï¼šmininet/mininetå³å¯ç™»å½•ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦è¿è¡Œæ–‡ç¨¿ä¸­çš„å‘½ä»¤å®‰è£…dockerã€‚</p><pre><code>sudo apt-get update\nsudo apt install curl\nsudo apt install ssh\ncurl -fsSL https://get.docker.com | bash -s docker --mirror Aliyun\n</code></pre><p>å®‰è£…å¥½Dockerä¹‹åï¼Œæˆ‘ä»¬åœ¨è™šæ‹Ÿæœºä¸­æ‰§è¡Œæ–‡ç¨¿åé¢è¿™æ¡å‘½ä»¤ï¼Œæ‹‰å–ONOSçš„é•œåƒï¼ˆå¦‚æœå› ä¸ºæŸäº›ç½‘ç»œç¯å¢ƒåŸå› é•œåƒæ‹‰å–é€Ÿåº¦è¿‡æ…¢ï¼Œä½ å¯ä»¥å°è¯•æœç´¢ä½¿ç”¨dockeré•œåƒåŠ é€ŸæœåŠ¡ï¼‰ã€‚</p><pre><code>docker pull onosproject/onos\n</code></pre><p><img src=\"https://static001.geekbang.org/resource/image/1c/66/1cb3a507398df45f6360a93a15262566.jpg?wh=844x778\" alt=\"\" title=\"æ‹‰å–ONOS\"></p><h3>åˆ›å»ºMininetå®¹å™¨è¿æ¥ONOS</h3><p>å¥½ï¼Œç°åœ¨å®‰è£…Mininetçš„å·¥ä½œå°±å®Œæˆäº†ã€‚ä¸‹é¢æˆ‘ä»¬è¿è¡Œåé¢çš„docker runå‘½ä»¤ï¼Œåˆ›å»ºONOSå®¹å™¨ã€‚</p><pre><code>docker run -t -d --name onos1 onosproject/onos\n</code></pre><p><img src=\"https://static001.geekbang.org/resource/image/66/5c/66cf13d47yy42e7c316beb15yy5bdb5c.jpg?wh=844x778\" alt=\"\" title=\"è¿è¡ŒONOSå®¹å™¨\"></p><p>ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å®¹å™¨idè·å–ONOSå®¹å™¨çš„IPï¼Œä»£ç å¦‚ä¸‹ã€‚</p><pre><code>docker inspect --format '{{ .NetworkSettings.IPAddress }}' &lt;container-ID&gt;\n</code></pre><p><img src=\"https://static001.geekbang.org/resource/image/67/1a/6702fb7954d2bd274667b00b5603141a.jpg?wh=844x778\" alt=\"\" title=\"è·å–å®¹å™¨IP\"></p><p>å¾—åˆ°IPä¹‹åï¼Œæˆ‘ä»¬ä½¿ç”¨sshç™»é™†ONOSï¼Œç”¨æˆ·åå¯†ç éƒ½æ˜¯karafã€‚</p><pre><code>ssh -p 8101 karaf@172.17.0.2\napp activate org.onosproject.openflow #å¯ç”¨openflow\napp activate org.onosproject.fwd #å¯ç”¨forwardè½¬å‘åŠŸèƒ½\n</code></pre><p><img src=\"https://static001.geekbang.org/resource/image/d5/d3/d53a41311b03f22cec545440b38518d3.jpg?wh=844x778\" alt=\"\" title=\"å¼€å¯è½¬å‘åŠŸèƒ½\"></p><p>æ¥ç€ï¼Œæˆ‘ä»¬éœ€è¦é€€å‡ºonosç™»å½•ï¼Œè¿”å›è™šæ‹Ÿæœºä¸­ï¼Œé…ç½®mininetè¿æ¥åˆ°ONOSã€‚</p><pre><code>sudo mn --topo tree,2 --controller remote,ip=172.17.0.2 #åˆ›å»ºä¸´æ—¶ç½‘ç»œ\npingall #ç½‘è·¯è¿é€šæ€§æ£€æµ‹\n</code></pre><p><img src=\"https://static001.geekbang.org/resource/image/01/bc/011125f073e362b3882c6117f12447bc.jpg?wh=844x778\" alt=\"\" title=\"è¿é€šæ€§æ£€æµ‹\"></p><h3>ONOSæŸ¥çœ‹æ‹“æ‰‘</h3><p>æŸ¥çœ‹æ‹“æ‰‘æ˜¯é€šä¿¡ç»„ç½‘çš„åŸºæœ¬æ“ä½œï¼Œæˆ‘åœ¨åé¢è¿˜ç”»äº†ä¸€å¼ ç½‘ç»œæ‹“æ‰‘å›¾ã€‚ç›¸ä¿¡ç»è¿‡å®æˆ˜ä½“ä¼šï¼Œå†ç»“åˆå›¾ç¤ºï¼Œä½ å¯¹ç½‘ç»œèŠ‚ç‚¹å’Œæ•°æ®æµè½¬çš„ç†è§£ä¼šæ›´ä¸Šä¸€å±‚æ¥¼ã€‚</p><p>æ‰“å¼€URLï¼š<a href=\"http://172.17.0.2:8181/onos/ui/login.html\">http://172.17.0.2:8181/onos/ui/login.html</a></p><p>è´¦å·/å¯†ç ï¼škaraf</p><p><img src=\"https://static001.geekbang.org/resource/image/f5/f9/f59c28556af60513060dae0c315879f9.jpg?wh=1220x1261\" alt=\"\" title=\"æŸ¥çœ‹æ‹“æ‰‘\"></p><p>ï¼ˆè¯´æ˜ï¼šå…ˆæŠŠå®¹å™¨çš„ç½‘ç»œæ˜ å°„åˆ°è™šæ‹Ÿæœºï¼Œå†æŠŠè™šæ‹Ÿæœºçš„ç½‘ç»œæ˜ å°„åˆ°æœ¬åœ°å³å¯ã€‚docker runçš„æ—¶å€™åŠ ä¸Š-p 8000:80è¿™æ ·çš„å‚æ•°ï¼Œå°±å¯ä»¥æ˜ å°„åˆ°è™šæœºäº†ï¼Œç„¶åå†æ”¹ä¸€ä¸‹VBoxçš„ç½‘ç»œè®¾ç½®ã€‚ï¼‰</p><h3>ONOS CLI</h3><p>karafè¿›å…¥ONOSä¹‹åï¼Œé™¤äº†å¼€å¯å„ç±»è®¾ç½®ï¼Œå®ƒæœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªCLIï¼Œå¯ä»¥æŸ¥çœ‹å„ç±»ä¿¡æ¯ï¼Œä¾‹å¦‚åé¢è¿™äº›ä¿¡æ¯ã€‚</p><ul>\n<li>devicesï¼šæŸ¥çœ‹äº¤æ¢æœº</li>\n<li>linksï¼šæŸ¥çœ‹é“¾è·¯</li>\n<li>hostsï¼šæŸ¥çœ‹ä¸»æœº</li>\n<li>flows &lt;tabé”®&gt;ï¼šæŸ¥çœ‹æ‰€é€‰äº¤æ¢æœºä¹‹é—´çš„è·¯å¾„</li>\n</ul><p>æ›´å¤šå‘½ä»¤å’Œå®éªŒï¼Œä½ å¯ä»¥å‚è€ƒ<a href=\"https://wiki.onosproject.org/display/ONOS/Appendix+A+%3A+CLI+commands\">ONOSå®˜æ–¹æ–‡æ¡£</a>è‡ªå·±æ¢ç´¢ã€‚</p><h2>é‡ç‚¹å›é¡¾</h2><p>å¥½ï¼Œè¿™èŠ‚è¯¾çš„å†…å®¹å‘Šä¸€æ®µè½äº†ï¼Œæˆ‘æ¥ç»™ä½ åšä¸ªæ€»ç»“ã€‚</p><p>æˆ‘ä»¬å…ˆä»ä¼ ç»Ÿäº’è”ç½‘ç»„ç½‘çš„æ–¹å¼å¼€å§‹é€æ¸äº†è§£äº†äº’è”ç½‘æ¶æ„ï¼Œéšç€è®¤è¯†çš„æ·±å…¥æˆ‘ä»¬å‘ç°ä¼ ç»Ÿä¸‰å±‚æ¶æ„æ˜¯å­˜åœ¨ç¼ºç‚¹çš„ï¼Œäºæ˜¯æˆ‘ä»¬å¼•å…¥äº†å„ç§ä¼˜åŒ–æ–¹æ¡ˆæ¥ä¸æ–­è¿­ä»£ã€æ¼”è¿›å‡ºäº†ä»¥SDNä¸ºä»£è¡¨çš„ç°ä»£äº’è”ç½‘åŸºç¡€æ¶æ„ã€‚</p><p>æœ€åï¼Œæˆ‘ä»¬<strong>åŸºäºONOSå’ŒMiniNetæ­å»ºäº†SDNçš„å®éªŒç¯å¢ƒ</strong>ï¼Œäº†è§£åˆ°äº†ä¸€æ¬¡<strong>SDNç»„ç½‘çš„åŸºæœ¬æµç¨‹</strong>ï¼ŒåŒæ—¶è·‘é€šäº†æˆ‘ä»¬ç¬¬ä¸€ä¸ªå®éªŒã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/84/3f/841bd5d29410b0f9658f2f56a47df73f.jpg?wh=3272x2265\" alt=\"\"></p><h2>æ€è€ƒé¢˜</h2><p>è¯·æ€è€ƒä¸€ä¸‹ï¼Œæˆ‘ä»¬ç›®å‰çš„äº’è”ç½‘æ¶æ„å±äºä¸­å¿ƒåŒ–æ¶æ„è¿˜æ˜¯å»ä¸­å¿ƒåŒ–æ¶æ„å‘¢ï¼Ÿä½ è§‰å¾—æœªæ¥çš„å‘å±•è¶‹åŠ¿åˆæ˜¯å¦‚ä½•ï¼Ÿ</p><h2>æ‹“å±•é˜…è¯»</h2><p>1.<a href=\"https://dl.acm.org/doi/10.1145/1402946.1402967\">å¯æ‰©å±•çš„å•†ç”¨æ•°æ®ä¸­å¿ƒç½‘ç»œæ¶æ„</a>ã€‚</p><p>2.<a href=\"https://cseweb.ucsd.edu/~vahdat/papers/b4-sigcomm13.pdf\">B4ï¼šä½¿ç”¨å…¨çƒéƒ¨ç½²çš„è½¯ä»¶å®šä¹‰å¹¿åŸŸç½‘çš„ç»éªŒ</a>ã€‚</p><p>æ¬¢è¿ä½ åœ¨ç•™è¨€åŒºè®°å½•ä½ çš„å­¦ä¹ æ”¶è·ï¼Œæˆ–è€…è·Ÿæˆ‘äº¤æµæ¢è®¨ã€‚ä¹Ÿæ¨èä½ æŠŠä»Šå¤©è¿™èŠ‚è¯¾åˆ†äº«ç»™èº«è¾¹çš„æœ‹å‹ã€‚</p><p>æˆ‘æ˜¯LMOSï¼Œæˆ‘ä»¬ä¸‹èŠ‚è¯¾è§ï¼</p>","neighbors":{"left":{"article_title":"37 | ä»å†…æ ¸åˆ°åº”ç”¨ï¼šç½‘ç»œæ•°æ®åœ¨å†…æ ¸ä¸­å¦‚ä½•æµè½¬","id":402840},"right":{"article_title":"39 | ç§ä¸€ç§Linuxï¼šè¯¦è§£socketå®ç°ä¸ç½‘ç»œç¼–ç¨‹æ¥å£","id":404724}},"comments":[{"had_liked":false,"id":306373,"user_name":"neohope","can_delete":false,"product_type":"c1","uid":1043475,"ip_address":"","ucode":"C0268F6E7E2B6E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ec/13/49e98289.jpg","comment_is_top":true,"comment_ctime":1628518770,"is_pvip":false,"replies":[{"id":"110936","content":"å˜¿å˜¿ è€é“åˆæ€»ç»“äº†","user_name":"ä½œè€…å›å¤","user_name_real":"LMOS","uid":"1345199","ctime":1628562445,"ip_address":"","comment_id":306373,"utype":1}],"discussion_count":1,"race_medal":0,"score":"9.2233720556632003e+18","product_id":100078401,"comment_content":"1ã€ä¸‹è½½mininetè™šæ‹Ÿæœºï¼š<br>http:&#47;&#47;mininet.org&#47;download&#47;#option-1-mininet-vm-installation-easy-recommended<br><br>2ã€å¯¼å…¥å¹¶è¿è¡Œè™šæ‹Ÿæœº<br>ç”¨æˆ·å &#47; å¯†ç ï¼šmininet&#47;mininet<br><br>3ã€å®‰è£…docker<br>sudo apt-get update<br>sudo apt install curl ssh<br>curl -fsSL https:&#47;&#47;get.docker.com | bash -s docker --mirror Aliyun<br><br>4ã€æ‹‰å–onesé•œåƒ<br>sudo docker pull onosproject&#47;onos<br><br>5ã€è¿è¡Œoneså®¹å™¨<br>#è¿è¡Œ<br>sudo docker run -t -d -p 8181:8181 --name onos1 onosproject&#47;onos<br><br>#æŸ¥çœ‹å®¹å™¨è¿è¡Œæƒ…å†µ<br>sudo docker ps<br><br>6ã€è¿æ¥å®¹å™¨ï¼Œå¯ç”¨æœåŠ¡<br>#æŸ¥çœ‹ipåœ°å€<br>sudo docker inspect --format &#39;{{ .NetworkSettings.IPAddress }}&#39; onos1<br><br>#sshè¿æ¥åˆ°å®¹å™¨<br>ssh -p 8101 karaf@172.17.0.2<br><br>#å¯ç”¨OpenFlow Provider Suite<br>app activate org.onosproject.openflow <br><br>#å¯ç”¨ Reactive Forwarding<br>app activate org.onosproject.fwd <br><br>#é€€å‡º<br>ctrl+d<br><br>7ã€åˆ›å»ºç½‘ç»œ<br>#åˆ›å»ºä¸´æ—¶ç½‘ç»œ<br>sudo mn --topo tree,2 --controller remote,ip=172.17.0.2  --switch=ovsk,protocols=OpenFlow13<br>*** Creating network<br>*** Adding controller<br>Connecting to remote controller at 172.17.0.2:6653<br>*** Adding hosts:<br>h1 h2 h3 h4<br>*** Adding switches:<br>s1 s2 s3<br>*** Adding links:<br>(s1, s2) (s1, s3) (s2, h1) (s2, h2) (s3, h3) (s3, h4)<br>*** Configuring hosts<br>h1 h2 h3 h4<br>*** Starting controller<br>c0<br>*** Starting 3 switches<br>s1 s2 s3 ...<br>*** Starting CLI:<br><br>mininet&gt; nodes<br>available nodes are:<br>c0 h1 h2 h3 h4 s1 s2 s3<br><br>mininet&gt; links<br>s1-eth1&lt;-&gt;s2-eth3 (OK OK)<br>s1-eth2&lt;-&gt;s3-eth3 (OK OK)<br>s2-eth1&lt;-&gt;h1-eth0 (OK OK)<br>s2-eth2&lt;-&gt;h2-eth0 (OK OK)<br>s3-eth1&lt;-&gt;h3-eth0 (OK OK)<br>s3-eth2&lt;-&gt;h4-eth0 (OK OK)<br><br>mininet&gt; net<br>h1 h1-eth0:s2-eth1<br>h2 h2-eth0:s2-eth2<br>h3 h3-eth0:s3-eth1<br>h4 h4-eth0:s3-eth2<br>s1 lo:  s1-eth1:s2-eth3 s1-eth2:s3-eth3<br>s2 lo:  s2-eth1:h1-eth0 s2-eth2:h2-eth0 s2-eth3:s1-eth1<br>s3 lo:  s3-eth1:h3-eth0 s3-eth2:h4-eth0 s3-eth3:s1-eth2<br>c0<br><br>mininet&gt; h1 ping h2<br>PING 10.0.0.2 (10.0.0.2) 56(84) bytes of data.<br>64 bytes from 10.0.0.2: icmp_seq=1 ttl=64 time=43.2 ms<br><br>mininet&gt; pingall<br>*** Ping: testing ping reachability<br>h1 -&gt; h2 h3 h4<br>h2 -&gt; h1 h3 h4<br>h3 -&gt; h1 h2 h4<br>h4 -&gt; h1 h2 h3<br>*** Results: 0% dropped (12&#47;12 received)<br><br>#é€€å‡º<br>ctrl+d<br><br>8ã€ç½‘ç»œè®¿é—®<br>http:&#47;&#47;172.17.0.2:8181&#47;onos&#47;ui&#47;login.html<br>è´¦å·&#47;å¯†ç ï¼škaraf&#47;karaf<br>ç„¶åå°±å¯ä»¥çœ‹åˆ°æ‹“æ‰‘å›¾äº†","like_count":4,"discussions":[{"author":{"id":1345199,"avatar":"https://static001.geekbang.org/account/avatar/00/14/86/af/99219321.jpg","nickname":"LMOS","note":"","ucode":"B037712C8B8B3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":524734,"discussion_content":"å˜¿å˜¿ è€é“åˆæ€»ç»“äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628562445,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":305525,"user_name":"pedro","can_delete":false,"product_type":"c1","uid":1200704,"ip_address":"","ucode":"F40C839DDFD599","user_header":"https://static001.geekbang.org/account/avatar/00/12/52/40/e57a736e.jpg","comment_is_top":false,"comment_ctime":1628032303,"is_pvip":false,"replies":[{"id":"110593","content":"66666","user_name":"ä½œè€…å›å¤","user_name_real":"LMOS","uid":"1345199","ctime":1628128191,"ip_address":"","comment_id":305525,"utype":1}],"discussion_count":1,"race_medal":0,"score":"27397836079","product_id":100078401,"comment_content":"æ¶¨çŸ¥è¯†ï¼Œä¸€ä¸ªæ“ä½œç³»ç»Ÿä¸“æ è®²ç½‘ç»œç«Ÿç„¶ç¢¾å‹ç½‘ç»œä¸“æ ï¼<br><br>äº’è”ç½‘æ¶æ„å±äºå»ä¸­å¿ƒåŒ–æ¶æ„ï¼Œå³ä½¿æœ‰çš„åŒºåŸŸæŒ‚äº†ï¼Œä½†å…¶å®ƒåŒºåŸŸä»ç„¶å¯ä»¥å·¥ä½œã€‚å¥ˆä½•æœ¬äººèœï¼Œå¯¹ç½‘ç»œè¿™å—çš„çŸ¥è¯†åªé™äºä½¿ç”¨ï¼Œå®åœ¨æ˜¯æ— æ³•é¢„æµ‹å‘å±•è¶‹åŠ¿å•Šã€‚<br><br>ä½†æœ‰ä¸€ç‚¹å¯ä»¥è‚¯å®šï¼Œäº’è”ç½‘ä¼šè¶Šæ¥è¶Šå¼€æ”¾ã€‚","like_count":6,"discussions":[{"author":{"id":1345199,"avatar":"https://static001.geekbang.org/account/avatar/00/14/86/af/99219321.jpg","nickname":"LMOS","note":"","ucode":"B037712C8B8B3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":524416,"discussion_content":"66666","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628128191,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":305569,"user_name":"é’ç‰ç™½éœ²","can_delete":false,"product_type":"c1","uid":2619436,"ip_address":"","ucode":"96FE2D4D2B94A0","user_header":"https://static001.geekbang.org/account/avatar/00/27/f8/2c/92969c48.jpg","comment_is_top":false,"comment_ctime":1628049225,"is_pvip":false,"replies":[{"id":"110584","content":"å“ˆå“ˆ å¥½çš„ ","user_name":"ä½œè€…å›å¤","user_name_real":"LMOS","uid":"1345199","ctime":1628125864,"ip_address":"","comment_id":305569,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10217983817","product_id":100078401,"comment_content":"ç°åœ¨æ˜¯ä¸­å¿ƒåŒ–æ¶æ„ï¼Œæœªæ¥æŒ‰æˆ‘ä¸ªäººçœ‹æ³•åº”è¯¥ä¼šå»ä¸­å¿ƒåŒ–çš„ï¼Œç±»ä¼¼äºåŒºå—é“¾è¿™ç§ã€‚<br>è¯è¯´45èŠ‚è¯¾è¿™ä¹ˆå¿«å°±è¦ç»“æŸäº†å•Šï¼ŒæœŸå¾…å½­è€å¸ˆä»¥åçš„è¯¾ç¨‹ï¼å¹çˆ†ï¼","like_count":2,"discussions":[{"author":{"id":1345199,"avatar":"https://static001.geekbang.org/account/avatar/00/14/86/af/99219321.jpg","nickname":"LMOS","note":"","ucode":"B037712C8B8B3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":524433,"discussion_content":"å“ˆå“ˆ å¥½çš„ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628125864,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":305581,"user_name":"Fan","can_delete":false,"product_type":"c1","uid":1115232,"ip_address":"","ucode":"3BF28670FD9407","user_header":"https://static001.geekbang.org/account/avatar/00/11/04/60/64d166b6.jpg","comment_is_top":false,"comment_ctime":1628059037,"is_pvip":false,"replies":[{"id":"110598","content":"åŠ æ²¹","user_name":"ä½œè€…å›å¤","user_name_real":"LMOS","uid":"1345199","ctime":1628128304,"ip_address":"","comment_id":305581,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5923026333","product_id":100078401,"comment_content":"å‰å®³äº†ï¼Œç½‘ç»œè¯¾ç¨‹å®‰æ’èµ°èµ·ã€‚ğŸ˜‚","like_count":1,"discussions":[{"author":{"id":1345199,"avatar":"https://static001.geekbang.org/account/avatar/00/14/86/af/99219321.jpg","nickname":"LMOS","note":"","ucode":"B037712C8B8B3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":524438,"discussion_content":"åŠ æ²¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628128304,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":360203,"user_name":"åˆ˜ä½é’¦","can_delete":false,"product_type":"c1","uid":2894098,"ip_address":"æ¹–åŒ—","ucode":"A678DFF11A8F27","user_header":"https://static001.geekbang.org/account/avatar/00/2c/29/12/8d5a8f51.jpg","comment_is_top":false,"comment_ctime":1666273625,"is_pvip":true,"replies":[{"id":"131038","content":"å¯ä»¥å‡å°‘wifié“¾æ¥æ•°é‡","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1345199","ctime":1666420641,"ip_address":"æ¹–åŒ—","comment_id":360203,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1666273625","product_id":100078401,"comment_content":"wifiè¿æ¥å‡ºç°å¡é¡¿æœ‰ä»€ä¹ˆåŠæ³•","like_count":0,"discussions":[{"author":{"id":1345199,"avatar":"https://static001.geekbang.org/account/avatar/00/14/86/af/99219321.jpg","nickname":"LMOS","note":"","ucode":"B037712C8B8B3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":591234,"discussion_content":"å¯ä»¥å‡å°‘wifié“¾æ¥æ•°é‡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1666420641,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ¹–åŒ—"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":345875,"user_name":"è‰¾æ©å‡","can_delete":false,"product_type":"c1","uid":2950704,"ip_address":"","ucode":"F2B81BF4F0106A","user_header":"https://static001.geekbang.org/account/avatar/00/2d/06/30/c26ea06a.jpg","comment_is_top":false,"comment_ctime":1652671670,"is_pvip":false,"replies":[{"id":"126255","content":"ä¸å–œæ¬¢ç½‘ç»œï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1345199","ctime":1652785924,"ip_address":"","comment_id":345875,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1652671670","product_id":100078401,"comment_content":"æœ¬èŠ‚è¯¾å°±å½“æ‹“å±•å¬å¬äº†","like_count":0,"discussions":[{"author":{"id":1345199,"avatar":"https://static001.geekbang.org/account/avatar/00/14/86/af/99219321.jpg","nickname":"LMOS","note":"","ucode":"B037712C8B8B3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":572443,"discussion_content":"ä¸å–œæ¬¢ç½‘ç»œï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1652785924,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":317326,"user_name":"Mike_Han","can_delete":false,"product_type":"c1","uid":2616914,"ip_address":"","ucode":"C0E41AD4247A62","user_header":"https://static001.geekbang.org/account/avatar/00/27/ee/52/cda34b19.jpg","comment_is_top":false,"comment_ctime":1634741775,"is_pvip":false,"replies":[{"id":"115368","content":"å“ˆå“ˆ ","user_name":"ä½œè€…å›å¤","user_name_real":"LMOS","uid":"1345199","ctime":1635211924,"ip_address":"","comment_id":317326,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1634741775","product_id":100078401,"comment_content":"é¢†è¯»çš„è€å¸ˆï¼Œåº”è¯¥æ˜¯ç½‘ç»œæ–¹é¢çš„ä¸“å®¶ï¼Œè¯»è¿™ç¯‡æ–‡ç« çš„æ—¶å€™ï¼Œå¾ˆæ˜¯å¨´ç†Ÿï¼ï¼","like_count":0,"discussions":[{"author":{"id":1345199,"avatar":"https://static001.geekbang.org/account/avatar/00/14/86/af/99219321.jpg","nickname":"LMOS","note":"","ucode":"B037712C8B8B3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":528766,"discussion_content":"å“ˆå“ˆ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635211924,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":305681,"user_name":"springXu","can_delete":false,"product_type":"c1","uid":2064750,"ip_address":"","ucode":"F5DB0B963C894F","user_header":"","comment_is_top":false,"comment_ctime":1628099660,"is_pvip":true,"replies":[{"id":"110592","content":"å˜¿å˜¿ ","user_name":"ä½œè€…å›å¤","user_name_real":"LMOS","uid":"1345199","ctime":1628128178,"ip_address":"","comment_id":305681,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1628099660","product_id":100078401,"comment_content":"3. é›†ä¸­æ§åˆ¶ï¼šé›†ä¸­çš„æ§åˆ¶å¹³é¢å¯ä»¥è·å–ç½‘ç»œèµ„æºçš„å…¨å±€ä¿¡æ¯ï¼Œå¹¶æ ¹æ®ä¸šåŠ¡éœ€æ±‚è¿›è¡Œå…¨å±€åˆ†é…å’Œä¼˜åŒ–ã€‚ <br>ä»è¿™é‡Œæ¥çœ‹ï¼ŒSDNä¸è¿˜æ˜¯ä¸­å¿ƒåŒ–çš„æ€è·¯ã€‚ è¿™åˆæ˜¯ä¸€é“é˜…è¯»ç†è§£é¢˜äº†ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1345199,"avatar":"https://static001.geekbang.org/account/avatar/00/14/86/af/99219321.jpg","nickname":"LMOS","note":"","ucode":"B037712C8B8B3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":524477,"discussion_content":"å˜¿å˜¿ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628128178,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}