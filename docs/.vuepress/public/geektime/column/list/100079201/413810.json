{"id":413810,"title":"18｜拓展阅读：再聊聊ARM、RISC-V与中国的机会","content":"<p>你好，我是邵巍。</p><p>我在讲完第17讲“<a href=\"https://time.geekbang.org/column/article/387859\">拓展阅读：聊聊 ARM 与 RISC-V</a>”后，不管是从专栏还是微信上，一众网友给我留言说，刚开个头，就结束了，其实我自己也觉得还没有讲透，所以我要加个餐，再聊聊这个话题。</p><p>7月份我参加了两个活动，一个是华东师范大学的暑假学校，我做了三个小时的“ARM架构演进历史与现状”主题演讲。另一个活动是第一财经举办的线下沙龙，题目是“来聊聊智能时代的下一个大生意”，当然这个大生意，就是半导体生意，更准确的说，是中国的半导体生意。活动不但请了芯片产业的人，还请了关注芯片产业的投资机构。这两次交流活动，我各有所得，刚好可以再给你补充一下第17讲没讲完的故事。</p><p>首先，能在华东师范大学的暑假学校做这个演讲，是因为我手头有本ARM  25周年时出的公司历史书。这本图文并茂的内部大册子从Acorn年代只有40多条指令的ARMv1架构讲起，那个时候只有3级流水的ARM1 CPU Core只是研究性质而并没有商用，一直讲到2014年，ARM Cortex-A占据了移动计算市场，成为第三代计算的核心关键技术。可以说，这本册子包含着每一代产品背后的人、技术、商业故事，是官方版本的八卦。</p><p>我觉得值得花时间给大学生做这个讲座，是因为ARM公司的历史，就是一部英式RISC CPU技术的发展历史，同时也是一种实用的谨慎经营与商业创新相结合的半导体公司发展史，值得他们去了解。</p><!-- [[[read_end]]] --><p>ARM是首创了IP授权这种商业模式的，对现代的半导体产品IP、IC设计、IC制造的产业链分工模式都有贡献。它跟我在大学时老师讲的偏美式的半导体技术和发展非常不同。其实想想，台积电首创的代工模式，和ARM首创的IP授权模式，都是非美国的半导体公司，在美国强大产业链压力下，生出的不同的竞争方式。从这个角度理解，ARM就更值得学习了。</p><p>回到ARM公司的产品，ARM1/ARM2 CPU Core只有3级流水，没有Cache，然后ARM3增加了一级Cache，到ARM6增加了MMU。对比Intel，到了2000年，Intel已经进入到有20级流水、L2 Cache、主频1.5Ghz的奔腾4的设计了，同年，算得上是ARM历史上非常成功的ARM7，仍然是一个3级流水，一个L1 Cache的CPU核。</p><p>你可能想问，流水线级数没有人家多，这是意味着ARM不如Intel吗？用今天的眼光看，现在大学里计算机体系结构的课程，都从5级流水的CPU核开始讲起了。</p><p>但其实ARM看似简陋的3级流水，成就了极低功耗、极高能效比的处理器产品路线，而Intel的20级流水适合高主频高性能实现，在市场上两者都是成功的产品路线。不同的PPAC（Performance性能、Power功耗、Area面积、Cost成本）取舍，让ARM在手机市场上大获成功，在半导体行业第一名Intel的最核心技术领域，另辟蹊径开创了新天地。</p><p>不过胡伟武老师在《计算机体系结构》这本教科书里说得好，计算机体系机构、操作系统、编译原理、数据库原理等计算机专业的核心课程就是研究怎么造计算机的，是<strong>计算机专业学生的看家本领</strong>。可惜，我们国家计算机行业起步太晚，几次自己造计算机的机会，都不是很成功，这个看家本领还很生疏。</p><p>当然，其实放眼全世界的计算机产业界，自x86、ARM之后，其它的指令集架构都不成功，直到RISC-V出现。</p><p>从这点上，无论RISC-V最终能走到什么位置，我们这代人都是幸运的，这是时代给予我们的机会，因为你可以从头学习，可以参与到一个计算机指令集产业的从无到有，到加速发展的整个过程。不仅中国的态度是这样，整个世界对于RISC-V的态度也如此。这是一次产业界的大规模试错的机会。</p><p>我在第17讲的时候，泛泛地说到了一些RISC-V的优点，这里我要再提炼一下，在今天，RISC-V最大的优势有三点。</p><p><strong>第一，开源优势。</strong> 开源，其实并不是意味着免费，而是意味着自由。整个学术界、产业界被半导体行业的残酷竞争压抑得太久，而RISC-V的出现是一个难得一见的推倒重来，大家一起重新造轮子的“革命”。不是为了所谓一个新兴市场或一个未解难题，而是现代计算机产业技术发展成熟到一定阶段，人人“能”且希望有机会实习一下“造CPU”的看家本领。</p><p>开源确实是一次革命，从商业到技术的全面革命。虽然硬件和软件开源的公式不相同，开源硬件项目，如何能进入良性的商业循环，还是整个产业界需要摸索的话题。但是开源，是RISC-V成为唯三有可能存活下来，形成“三国鼎立”局面的指令集系统的主因。</p><p><strong>其次，产业发展需要领域专用架构DSA（Domain Specific Architecture）的硬件。</strong> 你可以理解为不是产业需要RISC-V，而是产业需要DSA硬件，而RISC-V有可能成为DSA的最优解。</p><p>不知道你是否还记得，半导体的上一轮竞争为什么是通用处理器干掉了专用处理器（我曾经擅长的网络处理器就是受害者），是因为软件。软件的开销激增，在一个项目中的占比越来越高，已经超过硬件的开销，成为一个项目的主要成本。而通用处理器能更好地保护软件的投资，因此在十年前，通用处理器把大部分活跃的专用处理器都用“软件定义网络”“软件定义存储”“软件定义xx”的口号干到消声灭迹了。</p><p>但是世界是有轮回的，一方面是摩尔定律的变缓，通用处理器性能提升缓慢，另一方面是互联网、移动计算带来的算力需求的爆炸式增长，市场重新燃起对DSA的强烈渴望，这也解释了NPU、DPU的兴起。但是长期看，项目的总成本（硬件开发成本+软件开发成本）在增加，让每个产品经理都会倾向于选择可以参与平摊软件成本的高性能硬件架构。</p><p>RISC-V的指令集开源，既给了产业界尝试DSA的自由，又用模块化的的设计给了产业界一个共同开发软件的可能性。</p><p><strong>最后一个优势，中美之争给了所有“非美技术”一个机会。</strong> x86属于Intel（美），ARM原本是中立的，但是在2020年9月，美半导体巨头英伟达与日本软银达成协议，准备以400亿美元天价收购ARM，并计划在2022年3月前完成这笔交易，但目前大概率会延期，如果英国政府能站出来坚决否决英伟达对ARM的收购案，那么ARM就会被打上一个“非美”的标签。</p><p>当时收购新闻一出，整个产业界一片哗然。本来ARM作为一个商业可用的架构，一直以非常中立的态度协同整个产业界，合力建立了庞大的ARM指令集生态，这是产业界最大的、可用的、开放的CPU指令集生态。如果ARM被英伟达收购，则意味ARM指令集有极大的可能性变成英伟达的私有指令集，如同Intel/AMD拥有x86指令集一样。但是如果英国政府能站出来否决，从地缘政治的角度，也就排除了“ARM”被任何美国企业占用的可能性。</p><p>ARM结局尚未确定，而RISC- V是作为“开源独立”精神的代表而不依赖于任何国家存在的。因此，不仅仅在中国，在欧洲、日本、印度，都有非常活跃的RISC-V团队，当然美国若干个团队也是很活跃的。</p><p>在这一波浪潮中，中国额外突出。在国际上关注度最高的是阿里巴巴平头哥，一方面当然是因为阿里巴巴作为互联网大厂，本就是这轮芯片浪潮中的新入局者。产业界对开源硬件一个最大的担心，就是项目的可持续性，有阿里这样的大树，不但持续投入的问题迎刃而解，连产品落地的场景似乎也可以期待。</p><p>另一个方面平头哥的产品确实抢眼。2019年7月，平头哥发布了性能非常强悍的RISC-V IP核玄铁910。2021年3月，又在玄铁910上成功运行安卓系统基础功能，这是芯片行业首次实现RISC-V架构对安卓的支持。</p><p>靓丽产品的背后，是一个有十年以上CPU设计经验的老牌团队，因此玄铁910，不仅性能业界领先，而且扩展了50余条指令。这里我有所感触，似乎成功的CPU团队，都是10年以上CPU设计经验的“老”团队。说回产品本身，从平头哥现有产品矩阵上看，也确实是全而精，被高度关注实属正常。</p><p>跟平头哥的商业路线相对，中国科学院计算技术研究所包云岗研究员（我在17讲有提过包老师的高质量翻译作品：<a href=\"http://riscvbook.com/chinese/RISC-V-Reader-Chinese-v2p1.pdf\">RISC-V手册</a>）带领的香山处理器项目组，交付了第一款开源国产处理器。这款处理器，不仅仅是开源处理器，而且是一个开源的平台，采用了非常前沿的Chisel语言。更为可喜的是，在这个项目背后，还有一小撮商业公司，例如优矽科技高调跟随。这很让人联想到当年Linux开源之后，是红帽、SuSE这样成功的商业公司的崛起。</p><p>在7月份第一财经的线下沙龙中，我从慧智微电子的CEO李阳先生那里学习到一个说法，“半导体行业是一个追击任务，不是一个爬山任务。这是半导体行业不同于‘原子弹’的地方。”深以为然。</p><p>爬山任务，是爬到山顶就算成功，而且不计时间。山就在那里，等你尝试。而发展半导体是一个追击任务，是公司与公司之间的竞争，是产品与产品之间的比较。一代产品的成功，只是一个追击任务中的一个点而已。</p><p>对于CPU这样一个核心产品领域，有一家或者几家有能力持续交付世界一流水平产品的商业公司，整个中国产业界等了太久。</p><p>2018年到2019年是AI、NPU的机会，2020年是GPGPU的窗口，2021年是DPU的天时，我个人预计2022年将是中国CPU的启动之年，无论是ARM派的CPU，还是RISC-V派的CPU，都有机会各领风骚。</p><p>好了，到这里，我想聊的就讲完了，你可以畅所欲言，聊聊对于ARM、RISC-V你知道的内容，欢迎在评论区和我交流。</p>","neighbors":{"left":{"article_title":"17｜拓展阅读：聊聊 ARM 与 RISC-V","id":387859},"right":{"article_title":"结束语 | 芯片人的升职之路","id":388504}},"comments":[{"had_liked":false,"id":314367,"user_name":"sun","can_delete":false,"product_type":"c1","uid":2737485,"ip_address":"","ucode":"0A728F7FA2DC4A","user_header":"https://static001.geekbang.org/account/avatar/00/29/c5/4d/8e2e2ab0.jpg","comment_is_top":false,"comment_ctime":1632987759,"is_pvip":false,"replies":[{"id":"113874","content":"多谢支持。中国，在半导体行业，会繁荣强大起来的。","user_name":"作者回复","user_name_real":"Winnie.S","uid":"2476436","ctime":1633045365,"ip_address":"","comment_id":314367,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5927955055","product_id":100079201,"comment_content":"谢谢邵老师的精彩分享，让我对芯片行业有了立体感和层次感。因为邵老师的这个专题，做了极客时间的会员。<br>目前由于客观原因，芯片要国产化，但目前国内的主流CPU采用的指令集都非原创。RISC-V貌似有打破瓶颈的机会，但看看谷歌现在对安卓的态度，未来就会变的风云莫测。相信未来中国会有完全自主的CPU架构，而且中国庞大的市场完全能够培育出来。","like_count":1,"discussions":[{"author":{"id":2476436,"avatar":"https://static001.geekbang.org/account/avatar/00/25/c9/94/43dbbd2c.jpg","nickname":"Winnie.S","note":"","ucode":"2BD50725236956","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527662,"discussion_content":"多谢支持。中国，在半导体行业，会繁荣强大起来的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633045365,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":357897,"user_name":"Geek_8d14a9","can_delete":false,"product_type":"c1","uid":3173384,"ip_address":"浙江","ucode":"9987CF5C7BFE3B","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqdClaMPEeJeMQLgfOunbGgQ5na5pfWgic3Z9pEoxBiaxLdZp8HCoPDMMgIaza90QGP8LRNRyabqtwA/132","comment_is_top":false,"comment_ctime":1663736945,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1663736945","product_id":100079201,"comment_content":"据不可靠消息 ARM针对于数据计算的手机端业务比较多 而 RV偏向于边缘计算 AI 存储业务 方向还是有写区别的","like_count":0},{"had_liked":false,"id":338140,"user_name":"徐李","can_delete":false,"product_type":"c1","uid":1213325,"ip_address":"","ucode":"41550F6CA1E112","user_header":"https://static001.geekbang.org/account/avatar/00/12/83/8d/03cac826.jpg","comment_is_top":false,"comment_ctime":1647320936,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1647320936","product_id":100079201,"comment_content":"Arm 和 riscv 都是公开的指令集.开源的指令集有利于生态的蓬勃发展","like_count":0},{"had_liked":false,"id":331442,"user_name":"米米爸","can_delete":false,"product_type":"c1","uid":1842829,"ip_address":"","ucode":"311FB9AE0360A2","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/ic1icOZiaragU2teagxYKmqGddmBEyINwsZ3BrHu3YjxdHzuCvQYQwWKE0JNpzcEn94apaHLfBfylXTxPvdlxE8SQ/132","comment_is_top":false,"comment_ctime":1642586252,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1642586252","product_id":100079201,"comment_content":"老师您好！请问文中说的三个小时的“ARM 架构演进历史与现状”主题演讲，有没有公开出来，搜了一下没有找到。对ARM的历史比较感兴趣，谢谢！","like_count":0},{"had_liked":false,"id":327010,"user_name":"momo","can_delete":false,"product_type":"c1","uid":2870948,"ip_address":"","ucode":"17EC667EC8D304","user_header":"https://static001.geekbang.org/account/avatar/00/2b/ce/a4/250ccbd9.jpg","comment_is_top":false,"comment_ctime":1639835683,"is_pvip":false,"replies":[{"id":"119001","content":"是的，不过arm也在向pc上进军，就像risc-v向aiot市场进军一样","user_name":"作者回复","user_name_real":"编辑","uid":"2476436","ctime":1639970811,"ip_address":"","comment_id":327010,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1639835683","product_id":100079201,"comment_content":"老师听完您的课程，我理解X86指令集主要就是电脑上用的inter和AMD的芯片。ARM指令集主要是现在手机芯片用的，risc-v可能是未来的颠覆者。是这样吗？","like_count":0,"discussions":[{"author":{"id":2476436,"avatar":"https://static001.geekbang.org/account/avatar/00/25/c9/94/43dbbd2c.jpg","nickname":"Winnie.S","note":"","ucode":"2BD50725236956","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":540144,"discussion_content":"是的，不过arm也在向pc上进军，就像risc-v向aiot市场进军一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639970811,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":315328,"user_name":"Lorry","can_delete":false,"product_type":"c1","uid":1066409,"ip_address":"","ucode":"BD4754D0F1D786","user_header":"https://static001.geekbang.org/account/avatar/00/10/45/a9/3d48d6a2.jpg","comment_is_top":false,"comment_ctime":1633834087,"is_pvip":false,"replies":[{"id":"115735","content":"龙芯？ 人家是自主的指令集，不是risc-v","user_name":"作者回复","user_name_real":"Winnie.S","uid":"2476436","ctime":1635727966,"ip_address":"","comment_id":315328,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1633834087","product_id":100079201,"comment_content":"老师，提到了平头哥，那么怎么看龙心，他的指令集也是基于risc-v的","like_count":0,"discussions":[{"author":{"id":2476436,"avatar":"https://static001.geekbang.org/account/avatar/00/25/c9/94/43dbbd2c.jpg","nickname":"Winnie.S","note":"","ucode":"2BD50725236956","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527935,"discussion_content":"龙芯？ 人家是自主的指令集，不是risc-v","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635727966,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2846442,"avatar":"","nickname":"Geek_8363c3","note":"","ucode":"F7BFC57DABF2F2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":414515,"discussion_content":"买的MIPS，还在打官司","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1636799473,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}