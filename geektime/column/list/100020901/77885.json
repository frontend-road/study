{"id":77885,"title":"26 | æ¡ˆä¾‹ç¯‡ï¼šå¦‚ä½•æ‰¾å‡ºç‹‚æ‰“æ—¥å¿—çš„â€œå†…é¬¼â€ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯å€ªæœ‹é£ã€‚</p><p>å‰ä¸¤èŠ‚ï¼Œæˆ‘ä»¬å­¦äº†æ–‡ä»¶ç³»ç»Ÿå’Œç£ç›˜çš„ I/O åŸç†ï¼Œæˆ‘å…ˆå¸¦ä½ å¤ä¹ ä¸€ä¸‹ã€‚</p><p>æ–‡ä»¶ç³»ç»Ÿï¼Œæ˜¯å¯¹å­˜å‚¨è®¾å¤‡ä¸Šçš„æ–‡ä»¶è¿›è¡Œç»„ç»‡ç®¡ç†çš„ä¸€ç§æœºåˆ¶ã€‚ä¸ºäº†æ”¯æŒå„ç±»ä¸åŒçš„æ–‡ä»¶ç³»ç»Ÿï¼ŒLinuxåœ¨å„ç§æ–‡ä»¶ç³»ç»Ÿä¸Šï¼ŒæŠ½è±¡äº†ä¸€å±‚è™šæ‹Ÿæ–‡ä»¶ç³»ç»ŸVFSã€‚</p><p>å®ƒå®šä¹‰äº†ä¸€ç»„æ‰€æœ‰æ–‡ä»¶ç³»ç»Ÿéƒ½æ”¯æŒçš„æ•°æ®ç»“æ„å’Œæ ‡å‡†æ¥å£ã€‚è¿™æ ·ï¼Œåº”ç”¨ç¨‹åºå’Œå†…æ ¸ä¸­çš„å…¶ä»–å­ç³»ç»Ÿï¼Œå°±åªéœ€è¦è·Ÿ VFS æä¾›çš„ç»Ÿä¸€æ¥å£è¿›è¡Œäº¤äº’ã€‚</p><p>åœ¨æ–‡ä»¶ç³»ç»Ÿçš„ä¸‹å±‚ï¼Œä¸ºäº†æ”¯æŒå„ç§ä¸åŒç±»å‹çš„å­˜å‚¨è®¾å¤‡ï¼ŒLinuxåˆåœ¨å„ç§å­˜å‚¨è®¾å¤‡çš„åŸºç¡€ä¸Šï¼ŒæŠ½è±¡äº†ä¸€ä¸ªé€šç”¨å—å±‚ã€‚</p><p>é€šç”¨å—å±‚ï¼Œä¸ºæ–‡ä»¶ç³»ç»Ÿå’Œåº”ç”¨ç¨‹åºæä¾›äº†è®¿é—®å—è®¾å¤‡çš„æ ‡å‡†æ¥å£ï¼›åŒæ—¶ï¼Œä¸ºå„ç§å—è®¾å¤‡çš„é©±åŠ¨ç¨‹åºæä¾›äº†ç»Ÿä¸€çš„æ¡†æ¶ã€‚æ­¤å¤–ï¼Œé€šç”¨å—å±‚è¿˜ä¼šå¯¹æ–‡ä»¶ç³»ç»Ÿå’Œåº”ç”¨ç¨‹åºå‘é€è¿‡æ¥çš„ I/O è¯·æ±‚è¿›è¡Œæ’é˜Ÿï¼Œå¹¶é€šè¿‡é‡æ–°æ’åºã€è¯·æ±‚åˆå¹¶ç­‰æ–¹å¼ï¼Œæé«˜ç£ç›˜è¯»å†™çš„æ•ˆç‡ã€‚</p><p>é€šç”¨å—å±‚çš„ä¸‹ä¸€å±‚ï¼Œè‡ªç„¶å°±æ˜¯è®¾å¤‡å±‚äº†ï¼ŒåŒ…æ‹¬å„ç§å—è®¾å¤‡çš„é©±åŠ¨ç¨‹åºä»¥åŠç‰©ç†å­˜å‚¨è®¾å¤‡ã€‚</p><p>æ–‡ä»¶ç³»ç»Ÿã€é€šç”¨å—å±‚ä»¥åŠè®¾å¤‡å±‚ï¼Œå°±æ„æˆäº† Linux çš„å­˜å‚¨ I/O æ ˆã€‚å­˜å‚¨ç³»ç»Ÿçš„ I/O ï¼Œé€šå¸¸æ˜¯æ•´ä¸ªç³»ç»Ÿä¸­æœ€æ…¢çš„ä¸€ç¯ã€‚æ‰€ä»¥ï¼ŒLinux é‡‡ç”¨å¤šç§ç¼“å­˜æœºåˆ¶ï¼Œæ¥ä¼˜åŒ– I/O çš„æ•ˆç‡ï¼Œæ¯”æ–¹è¯´ï¼Œ</p><ul>\n<li>\n<p>ä¸ºäº†ä¼˜åŒ–æ–‡ä»¶è®¿é—®çš„æ€§èƒ½ï¼Œé‡‡ç”¨é¡µç¼“å­˜ã€ç´¢å¼•èŠ‚ç‚¹ç¼“å­˜ã€ç›®å½•é¡¹ç¼“å­˜ç­‰å¤šç§ç¼“å­˜æœºåˆ¶ï¼Œå‡å°‘å¯¹ä¸‹å±‚å—è®¾å¤‡çš„ç›´æ¥è°ƒç”¨ã€‚</p>\n</li>\n<li>\n<p>åŒæ ·çš„ï¼Œä¸ºäº†ä¼˜åŒ–å—è®¾å¤‡çš„è®¿é—®æ•ˆç‡ï¼Œä½¿ç”¨ç¼“å†²åŒºæ¥ç¼“å­˜å—è®¾å¤‡çš„æ•°æ®ã€‚</p>\n</li>\n</ul><!-- [[[read_end]]] --><p>ä¸è¿‡ï¼Œåœ¨ç¢°åˆ°æ–‡ä»¶ç³»ç»Ÿå’Œç£ç›˜çš„ I/O é—®é¢˜æ—¶ï¼Œå…·ä½“åº”è¯¥æ€ä¹ˆå®šä½å’Œåˆ†æå‘¢ï¼Ÿä»Šå¤©ï¼Œæˆ‘å°±ä»¥ä¸€ä¸ªæœ€å¸¸è§çš„åº”ç”¨ç¨‹åºè®°å½•å¤§é‡æ—¥å¿—çš„æ¡ˆä¾‹ï¼Œå¸¦ä½ æ¥åˆ†æè¿™ç§æƒ…å†µã€‚</p><h2>æ¡ˆä¾‹å‡†å¤‡</h2><p>æœ¬æ¬¡æ¡ˆä¾‹è¿˜æ˜¯åŸºäº Ubuntu 18.04ï¼ŒåŒæ ·é€‚ç”¨äºå…¶ä»–çš„ Linux ç³»ç»Ÿã€‚æˆ‘ä½¿ç”¨çš„æ¡ˆä¾‹ç¯å¢ƒå¦‚ä¸‹æ‰€ç¤ºï¼š</p><ul>\n<li>\n<p>æœºå™¨é…ç½®ï¼š2 CPUï¼Œ8GB å†…å­˜</p>\n</li>\n<li>\n<p>é¢„å…ˆå®‰è£… dockerã€sysstat ç­‰å·¥å…·ï¼Œå¦‚ apt install  <a href=\"http://docker.io/\">docker.io</a>  sysstat</p>\n</li>\n</ul><p>è¿™é‡Œè¦æ„Ÿè°¢å”¯å“ä¼šèµ„æ·±è¿ç»´å·¥ç¨‹å¸ˆé˜³ç¥¥ä¹‰å¸®å¿™ï¼Œåˆ†æ‹…äº†ä»Šå¤©çš„æ¡ˆä¾‹ã€‚è¿™ä¸ªæ¡ˆä¾‹ï¼Œæ˜¯ä¸€ä¸ªç”¨ Python å¼€å‘çš„å°åº”ç”¨ï¼Œä¸ºäº†æ–¹ä¾¿è¿è¡Œï¼Œæˆ‘æŠŠå®ƒæ‰“åŒ…æˆäº†ä¸€ä¸ª Docker é•œåƒã€‚è¿™æ ·ï¼Œä½ åªè¦è¿è¡Œ Docker å‘½ä»¤ï¼Œå°±å¯ä»¥å¯åŠ¨å®ƒã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæ‰“å¼€ä¸€ä¸ªç»ˆç«¯ï¼ŒSSH ç™»å½•åˆ°æ¡ˆä¾‹æ‰€ç”¨çš„æœºå™¨ä¸­ï¼Œå¹¶å®‰è£…ä¸Šè¿°å·¥å…·ã€‚è·Ÿä»¥å‰ä¸€æ ·ï¼Œæ¡ˆä¾‹ä¸­æ‰€æœ‰å‘½ä»¤ï¼Œéƒ½é»˜è®¤ä»¥ root ç”¨æˆ·è¿è¡Œã€‚å¦‚æœä½ æ˜¯ç”¨æ™®é€šç”¨æˆ·èº«ä»½ç™»é™†ç³»ç»Ÿï¼Œè¯·è¿è¡Œ sudo su root å‘½ä»¤ï¼Œåˆ‡æ¢åˆ° root ç”¨æˆ·ã€‚</p><p>åˆ°è¿™é‡Œï¼Œå‡†å¤‡å·¥ä½œå°±å®Œæˆäº†ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ­£å¼è¿›å…¥æ“ä½œç¯èŠ‚ã€‚</p><blockquote>\n<p>æ¸©é¦¨æç¤ºï¼šæ¡ˆä¾‹ä¸­ Python åº”ç”¨çš„æ ¸å¿ƒé€»è¾‘æ¯”è¾ƒç®€å•ï¼Œä½ å¯èƒ½ä¸€çœ¼å°±èƒ½çœ‹å‡ºé—®é¢˜ï¼Œä½†å®é™…ç”Ÿäº§ç¯å¢ƒä¸­çš„æºç å°±å¤æ‚å¤šäº†ã€‚æ‰€ä»¥ï¼Œæˆ‘ä¾æ—§å»ºè®®ï¼Œæ“ä½œä¹‹å‰åˆ«çœ‹æºç ï¼Œé¿å…å…ˆå…¥ä¸ºä¸»ï¼Œè¦æŠŠå®ƒå½“æˆä¸€ä¸ªé»‘ç›’æ¥åˆ†æã€‚è¿™æ ·ï¼Œä½ å¯ä»¥æ›´å¥½æŠŠæ¡ä½ï¼Œæ€ä¹ˆä»ç³»ç»Ÿçš„èµ„æºä½¿ç”¨é—®é¢˜å‡ºå‘ï¼Œåˆ†æå‡ºç“¶é¢ˆæ‰€åœ¨çš„åº”ç”¨ï¼Œä»¥åŠç“¶é¢ˆåœ¨åº”ç”¨ä¸­å¤§æ¦‚çš„ä½ç½®ã€‚</p>\n</blockquote><h2>æ¡ˆä¾‹åˆ†æ</h2><p>é¦–å…ˆï¼Œæˆ‘ä»¬åœ¨ç»ˆç«¯ä¸­æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œè¿è¡Œä»Šå¤©çš„ç›®æ ‡åº”ç”¨ï¼š</p><pre><code>$ docker run -v /tmp:/tmp --name=app -itd feisky/logapp \n</code></pre><p>ç„¶åï¼Œåœ¨ç»ˆç«¯ä¸­è¿è¡Œ ps å‘½ä»¤ï¼Œç¡®è®¤æ¡ˆä¾‹åº”ç”¨æ­£å¸¸å¯åŠ¨ã€‚å¦‚æœæ“ä½œæ— è¯¯ï¼Œä½ åº”è¯¥å¯ä»¥åœ¨ ps çš„è¾“å‡ºä¸­ï¼Œçœ‹åˆ°ä¸€ä¸ª app.py çš„è¿›ç¨‹ï¼š</p><pre><code>$ ps -ef | grep /app.py \nroot     18940 18921 73 14:41 pts/0    00:00:02 python /app.py \n</code></pre><p>æ¥ç€ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ç³»ç»Ÿæœ‰æ²¡æœ‰æ€§èƒ½é—®é¢˜ã€‚è¦è§‚å¯Ÿå“ªäº›æ€§èƒ½æŒ‡æ ‡å‘¢ï¼Ÿå‰é¢æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬çŸ¥é“ CPUã€å†…å­˜å’Œç£ç›˜ I/O ç­‰ç³»ç»Ÿèµ„æºï¼Œå¾ˆå®¹æ˜“å‡ºç°èµ„æºç“¶é¢ˆï¼Œè¿™å°±æ˜¯æˆ‘ä»¬è§‚å¯Ÿçš„æ–¹å‘äº†ã€‚æˆ‘ä»¬æ¥è§‚å¯Ÿä¸€ä¸‹è¿™äº›èµ„æºçš„ä½¿ç”¨æƒ…å†µã€‚</p><p>å½“ç„¶ï¼ŒåŠ¨æ‰‹ä¹‹å‰ä½ åº”è¯¥æƒ³æ¸…æ¥šï¼Œè¦ç”¨å“ªäº›å·¥å…·æ¥åšï¼Œä»¥åŠå·¥å…·çš„ä½¿ç”¨é¡ºåºåˆæ˜¯æ€æ ·çš„ã€‚ä½ å¯ä»¥å…ˆå›å¿†ä¸‹å‰é¢çš„æ¡ˆä¾‹å’Œæ€è·¯ï¼Œè‡ªå·±æƒ³ä¸€æƒ³ï¼Œç„¶åå†ç»§ç»­ä¸‹é¢çš„æ­¥éª¤ã€‚</p><p>æˆ‘çš„æƒ³æ³•æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆç”¨ top ï¼Œæ¥è§‚å¯Ÿ CPU å’Œå†…å­˜çš„ä½¿ç”¨æƒ…å†µï¼›ç„¶åå†ç”¨ iostat ï¼Œæ¥è§‚å¯Ÿç£ç›˜çš„ I/O æƒ…å†µã€‚</p><p>æ‰€ä»¥ï¼Œæ¥ä¸‹æ¥ï¼Œä½ å¯ä»¥åœ¨ç»ˆç«¯ä¸­è¿è¡Œ top å‘½ä»¤ï¼Œè§‚å¯Ÿ CPU å’Œå†…å­˜çš„ä½¿ç”¨æƒ…å†µï¼š</p><pre><code># æŒ‰1åˆ‡æ¢åˆ°æ¯ä¸ªCPUçš„ä½¿ç”¨æƒ…å†µ \n$ top \ntop - 14:43:43 up 1 day,  1:39,  2 users,  load average: 2.48, 1.09, 0.63 \nTasks: 130 total,   2 running,  74 sleeping,   0 stopped,   0 zombie \n%Cpu0  :  0.7 us,  6.0 sy,  0.0 ni,  0.7 id, 92.7 wa,  0.0 hi,  0.0 si,  0.0 st \n%Cpu1  :  0.0 us,  0.3 sy,  0.0 ni, 92.3 id,  7.3 wa,  0.0 hi,  0.0 si,  0.0 st \nKiB Mem :  8169308 total,   747684 free,   741336 used,  6680288 buff/cache \nKiB Swap:        0 total,        0 free,        0 used.  7113124 avail Mem \n\n  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND \n18940 root      20   0  656108 355740   5236 R   6.3  4.4   0:12.56 python \n1312 root      20   0  236532  24116   9648 S   0.3  0.3   9:29.80 python3 \n</code></pre><p>è§‚å¯Ÿ top çš„è¾“å‡ºï¼Œä½ ä¼šå‘ç°ï¼ŒCPU0 çš„ä½¿ç”¨ç‡éå¸¸é«˜ï¼Œå®ƒçš„ç³»ç»ŸCPUä½¿ç”¨ç‡ï¼ˆsys%ï¼‰ä¸º 6%ï¼Œè€Œ iowait è¶…è¿‡äº† 90%ã€‚è¿™è¯´æ˜ CPU0 ä¸Šï¼Œå¯èƒ½æ­£åœ¨è¿è¡Œ I/O å¯†é›†å‹çš„è¿›ç¨‹ã€‚ä¸è¿‡ï¼Œç©¶ç«Ÿæ˜¯ä»€ä¹ˆåŸå› å‘¢ï¼Ÿè¿™ä¸ªç–‘é—®å…ˆä¿ç•™ç€ï¼Œæˆ‘ä»¬å…ˆç»§ç»­çœ‹å®Œã€‚</p><p>æ¥ç€æˆ‘ä»¬æ¥çœ‹ï¼Œè¿›ç¨‹éƒ¨åˆ†çš„ CPU ä½¿ç”¨æƒ…å†µã€‚ä½ ä¼šå‘ç°ï¼Œ python è¿›ç¨‹çš„ CPU ä½¿ç”¨ç‡å·²ç»è¾¾åˆ°äº† 6%ï¼Œè€Œå…¶ä½™è¿›ç¨‹çš„ CPU ä½¿ç”¨ç‡éƒ½æ¯”è¾ƒä½ï¼Œä¸è¶…è¿‡ 0.3%ã€‚çœ‹èµ·æ¥ python æ˜¯ä¸ªå¯ç–‘è¿›ç¨‹ã€‚è®°ä¸‹ python è¿›ç¨‹çš„ PID å· 18940ï¼Œæˆ‘ä»¬ç¨ååˆ†æã€‚</p><p>æœ€åå†çœ‹å†…å­˜çš„ä½¿ç”¨æƒ…å†µï¼Œæ€»å†…å­˜ 8Gï¼Œå‰©ä½™å†…å­˜åªæœ‰ 730 MBï¼Œè€Œ Buffer/Cacheå ç”¨å†…å­˜é«˜è¾¾6GB ä¹‹å¤šï¼Œè¿™è¯´æ˜å†…å­˜ä¸»è¦è¢«ç¼“å­˜å ç”¨ã€‚è™½ç„¶å¤§éƒ¨åˆ†ç¼“å­˜å¯å›æ”¶ï¼Œæˆ‘ä»¬è¿˜æ˜¯å¾—äº†è§£ä¸‹ç¼“å­˜çš„å»å¤„ï¼Œç¡®è®¤ç¼“å­˜ä½¿ç”¨éƒ½æ˜¯åˆç†çš„ã€‚</p><p>åˆ°è¿™ä¸€æ­¥ï¼Œä½ åŸºæœ¬å¯ä»¥åˆ¤æ–­å‡ºï¼ŒCPU ä½¿ç”¨ç‡ä¸­çš„ iowait æ˜¯ä¸€ä¸ªæ½œåœ¨ç“¶é¢ˆï¼Œè€Œå†…å­˜éƒ¨åˆ†çš„ç¼“å­˜å æ¯”è¾ƒå¤§ï¼Œé‚£ç£ç›˜ I/O åˆæ˜¯æ€ä¹ˆæ ·çš„æƒ…å†µå‘¢ï¼Ÿ</p><p>æˆ‘ä»¬åœ¨ç»ˆç«¯ä¸­æŒ‰ Ctrl+C ï¼Œåœæ­¢ top å‘½ä»¤ï¼Œå†è¿è¡Œ iostat å‘½ä»¤ï¼Œè§‚å¯Ÿ I/O çš„ä½¿ç”¨æƒ…å†µï¼š</p><pre><code># -dè¡¨ç¤ºæ˜¾ç¤ºI/Oæ€§èƒ½æŒ‡æ ‡ï¼Œ-xè¡¨ç¤ºæ˜¾ç¤ºæ‰©å±•ç»Ÿè®¡ï¼ˆå³æ‰€æœ‰I/OæŒ‡æ ‡ï¼‰ \n$ iostat -x -d 1 \nDevice            r/s     w/s     rkB/s     wkB/s   rrqm/s   wrqm/s  %rrqm  %wrqm r_await w_await aqu-sz rareq-sz wareq-sz  svctm  %util \nloop0            0.00    0.00      0.00      0.00     0.00     0.00   0.00   0.00    0.00    0.00   0.00     0.00     0.00   0.00   0.00 \nsdb              0.00    0.00      0.00      0.00     0.00     0.00   0.00   0.00    0.00    0.00   0.00     0.00     0.00   0.00   0.00 \nsda              0.00   64.00      0.00  32768.00     0.00     0.00   0.00   0.00    0.00 7270.44 1102.18     0.00   512.00  15.50  99.20\n</code></pre><p>è¿˜è®°å¾—è¿™äº›æ€§èƒ½æŒ‡æ ‡çš„å«ä¹‰å—ï¼Ÿå…ˆè‡ªå·±å›å¿†ä¸€ä¸‹ï¼Œå¦‚æœå®åœ¨æƒ³ä¸èµ·æ¥ï¼ŒæŸ¥çœ‹ä¸Šä¸€èŠ‚çš„å†…å®¹ï¼Œæˆ–è€…ç”¨ man iostat æŸ¥è¯¢ã€‚</p><p>è§‚å¯Ÿ iostat çš„æœ€åä¸€åˆ—ï¼Œä½ ä¼šçœ‹åˆ°ï¼Œç£ç›˜ sda çš„ I/O ä½¿ç”¨ç‡å·²ç»é«˜è¾¾ 99%ï¼Œå¾ˆå¯èƒ½å·²ç»æ¥è¿‘ I/O é¥±å’Œã€‚</p><p>å†çœ‹å‰é¢çš„å„ä¸ªæŒ‡æ ‡ï¼Œæ¯ç§’å†™ç£ç›˜è¯·æ±‚æ•°æ˜¯ 64 ï¼Œå†™å¤§å°æ˜¯ 32 MBï¼Œå†™è¯·æ±‚çš„å“åº”æ—¶é—´ä¸º 7 ç§’ï¼Œè€Œè¯·æ±‚é˜Ÿåˆ—é•¿åº¦åˆ™è¾¾åˆ°äº† 1100ã€‚</p><p>è¶…æ…¢çš„å“åº”æ—¶é—´å’Œç‰¹é•¿çš„è¯·æ±‚é˜Ÿåˆ—é•¿åº¦ï¼Œè¿›ä¸€æ­¥éªŒè¯äº† I/O å·²ç»é¥±å’Œçš„çŒœæƒ³ã€‚æ­¤æ—¶ï¼Œsda ç£ç›˜å·²ç»é‡åˆ°äº†ä¸¥é‡çš„æ€§èƒ½ç“¶é¢ˆã€‚</p><p>åˆ°è¿™é‡Œï¼Œä¹Ÿå°±å¯ä»¥ç†è§£ï¼Œä¸ºä»€ä¹ˆå‰é¢çœ‹åˆ°çš„ iowait é«˜è¾¾ 90% äº†ï¼Œè¿™æ­£æ˜¯ç£ç›˜ sda çš„ I/O ç“¶é¢ˆå¯¼è‡´çš„ã€‚æ¥ä¸‹æ¥çš„é‡ç‚¹å°±æ˜¯åˆ†æ I/O æ€§èƒ½ç“¶é¢ˆçš„æ ¹æºäº†ã€‚é‚£è¦æ€ä¹ˆçŸ¥é“ï¼Œè¿™äº› I/Oè¯·æ±‚ç›¸å…³çš„è¿›ç¨‹å‘¢ï¼Ÿ</p><p>ä¸çŸ¥é“ä½ è¿˜è®°ä¸è®°å¾—ï¼Œä¸Šä¸€èŠ‚æˆ‘æ›¾æåˆ°è¿‡ï¼Œå¯ä»¥ç”¨ pidstat æˆ–è€… iotop ï¼Œè§‚å¯Ÿè¿›ç¨‹çš„ I/O æƒ…å†µã€‚è¿™é‡Œï¼Œæˆ‘å°±ç”¨ pidstat æ¥çœ‹ä¸€ä¸‹ã€‚</p><p>ä½¿ç”¨ pidstat åŠ ä¸Š -d å‚æ•°ï¼Œå°±å¯ä»¥æ˜¾ç¤ºæ¯ä¸ªè¿›ç¨‹çš„ I/O æƒ…å†µã€‚æ‰€ä»¥ï¼Œä½ å¯ä»¥åœ¨ç»ˆç«¯ä¸­è¿è¡Œå¦‚ä¸‹å‘½ä»¤æ¥è§‚å¯Ÿï¼š</p><pre><code>$ pidstat -d 1 \n\n15:08:35      UID       PID   kB_rd/s   kB_wr/s kB_ccwr/s iodelay  Command \n15:08:36        0     18940      0.00  45816.00      0.00      96  python \n\n15:08:36      UID       PID   kB_rd/s   kB_wr/s kB_ccwr/s iodelay  Command \n15:08:37        0       354      0.00      0.00      0.00     350  jbd2/sda1-8 \n15:08:37        0     18940      0.00  46000.00      0.00      96  python \n15:08:37        0     20065      0.00      0.00      0.00    1503  kworker/u4:2 \n</code></pre><p>ä» pidstat çš„è¾“å‡ºï¼Œä½ å¯ä»¥å‘ç°ï¼Œåªæœ‰ python è¿›ç¨‹çš„å†™æ¯”è¾ƒå¤§ï¼Œè€Œä¸”æ¯ç§’å†™çš„æ•°æ®è¶…è¿‡ 45 MBï¼Œæ¯”ä¸Šé¢ iostat å‘ç°çš„ 32MB çš„ç»“æœè¿˜è¦å¤§ã€‚å¾ˆæ˜æ˜¾ï¼Œæ­£æ˜¯ python è¿›ç¨‹å¯¼è‡´äº† I/O ç“¶é¢ˆã€‚</p><p>å†å¾€ä¸‹çœ‹ iodelay é¡¹ã€‚è™½ç„¶åªæœ‰ python åœ¨å¤§é‡å†™æ•°æ®ï¼Œä½†ä½ åº”è¯¥æ³¨æ„åˆ°äº†ï¼Œæœ‰ä¸¤ä¸ªè¿›ç¨‹ ï¼ˆkworker å’Œ jbd2 ï¼‰çš„å»¶è¿Ÿï¼Œå±…ç„¶æ¯” python è¿›ç¨‹è¿˜å¤§å¾ˆå¤šã€‚</p><p>è¿™å…¶ä¸­ï¼Œkworker æ˜¯ä¸€ä¸ªå†…æ ¸çº¿ç¨‹ï¼Œè€Œ jbd2 æ˜¯ ext4 æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œç”¨æ¥ä¿è¯æ•°æ®å®Œæ•´æ€§çš„å†…æ ¸çº¿ç¨‹ã€‚ä»–ä»¬éƒ½æ˜¯ä¿è¯æ–‡ä»¶ç³»ç»ŸåŸºæœ¬åŠŸèƒ½çš„å†…æ ¸çº¿ç¨‹ï¼Œæ‰€ä»¥å…·ä½“ç»†èŠ‚æš‚æ—¶å°±ä¸ç”¨ç®¡äº†ï¼Œæˆ‘ä»¬åªéœ€è¦æ˜ç™½ï¼Œå®ƒä»¬å»¶è¿Ÿçš„æ ¹æºè¿˜æ˜¯å¤§é‡ I/Oã€‚</p><p>ç»¼åˆpidstatçš„è¾“å‡ºæ¥çœ‹ï¼Œè¿˜æ˜¯pythonè¿›ç¨‹çš„å«Œç–‘æœ€å¤§ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥åˆ†æ python è¿›ç¨‹åˆ°åº•åœ¨å†™ä»€ä¹ˆã€‚</p><p>é¦–å…ˆç•™æ„ä¸€ä¸‹ python è¿›ç¨‹çš„ PID å·ï¼Œ 18940ã€‚çœ‹åˆ° 18940 ï¼Œä½ æœ‰æ²¡æœ‰è§‰å¾—ç†Ÿæ‚‰ï¼Ÿå…¶å®å‰é¢åœ¨ä½¿ç”¨topæ—¶ï¼Œæˆ‘ä»¬è®°å½•è¿‡çš„ CPU ä½¿ç”¨ç‡æœ€é«˜çš„è¿›ç¨‹ï¼Œä¹Ÿæ­£æ˜¯å®ƒã€‚ä¸è¿‡ï¼Œè™½ç„¶åœ¨topä¸­ä½¿ç”¨ç‡æœ€é«˜ï¼Œä¹Ÿä¸è¿‡æ˜¯ 6%ï¼Œå¹¶ä¸ç®—é«˜ã€‚æ‰€ä»¥ï¼Œä»¥I/Oé—®é¢˜ä¸ºåˆ†ææ–¹å‘è¿˜æ˜¯æ­£ç¡®çš„ã€‚</p><p>çŸ¥é“äº†è¿›ç¨‹çš„ PID å·ï¼Œå…·ä½“è¦æ€ä¹ˆæŸ¥çœ‹å†™çš„æƒ…å†µå‘¢ï¼Ÿ</p><p>å…¶å®ï¼Œæˆ‘åœ¨ç³»ç»Ÿè°ƒç”¨çš„æ¡ˆä¾‹ä¸­è®²è¿‡ï¼Œè¯»å†™æ–‡ä»¶å¿…é¡»é€šè¿‡ç³»ç»Ÿè°ƒç”¨å®Œæˆã€‚è§‚å¯Ÿç³»ç»Ÿè°ƒç”¨æƒ…å†µï¼Œå°±å¯ä»¥çŸ¥é“è¿›ç¨‹æ­£åœ¨å†™çš„æ–‡ä»¶ã€‚æƒ³èµ· strace äº†å—ï¼Œå®ƒæ­£æ˜¯æˆ‘ä»¬åˆ†æç³»ç»Ÿè°ƒç”¨æ—¶æœ€å¸¸ç”¨çš„å·¥å…·ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åœ¨ç»ˆç«¯ä¸­è¿è¡Œstrace å‘½ä»¤ï¼Œå¹¶é€šè¿‡ -p 18940 æŒ‡å®š python è¿›ç¨‹çš„ PID å·ï¼š</p><pre><code>$ strace -p 18940 \nstrace: Process 18940 attached \n...\nmmap(NULL, 314576896, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f0f7aee9000 \nmmap(NULL, 314576896, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f0f682e8000 \nwrite(3, &quot;2018-12-05 15:23:01,709 - __main&quot;..., 314572844 \n) = 314572844 \nmunmap(0x7f0f682e8000, 314576896)       = 0 \nwrite(3, &quot;\\n&quot;, 1)                       = 1 \nmunmap(0x7f0f7aee9000, 314576896)       = 0 \nclose(3)                                = 0 \nstat(&quot;/tmp/logtest.txt.1&quot;, {st_mode=S_IFREG|0644, st_size=943718535, ...}) = 0 \n</code></pre><p>ä» write() ç³»ç»Ÿè°ƒç”¨ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œè¿›ç¨‹å‘æ–‡ä»¶æè¿°ç¬¦ç¼–å·ä¸º 3 çš„æ–‡ä»¶ä¸­ï¼Œå†™å…¥äº† 300MB çš„æ•°æ®ã€‚çœ‹æ¥ï¼Œå®ƒåº”è¯¥æ˜¯æˆ‘ä»¬è¦æ‰¾çš„æ–‡ä»¶ã€‚ä¸è¿‡ï¼Œwrite() è°ƒç”¨ä¸­åªèƒ½çœ‹åˆ°æ–‡ä»¶çš„æè¿°ç¬¦ç¼–å·ï¼Œæ–‡ä»¶åå’Œè·¯å¾„è¿˜æ˜¯æœªçŸ¥çš„ã€‚</p><p>å†è§‚å¯Ÿåé¢çš„ stat() è°ƒç”¨ï¼Œä½ å¯ä»¥çœ‹åˆ°ï¼Œå®ƒæ­£åœ¨è·å– /tmp/logtest.txt.1 çš„çŠ¶æ€ã€‚ è¿™ç§â€œç‚¹+æ•°å­—æ ¼å¼â€çš„æ–‡ä»¶ï¼Œåœ¨æ—¥å¿—å›æ»šä¸­éå¸¸å¸¸è§ã€‚æˆ‘ä»¬å¯ä»¥çŒœæµ‹ï¼Œè¿™æ˜¯ç¬¬ä¸€ä¸ªæ—¥å¿—å›æ»šæ–‡ä»¶ï¼Œè€Œæ­£åœ¨å†™çš„æ—¥å¿—æ–‡ä»¶è·¯å¾„ï¼Œåˆ™æ˜¯/tmp/logtest.txtã€‚</p><p>å½“ç„¶ï¼Œè¿™åªæ˜¯æˆ‘ä»¬çš„çŒœæµ‹ï¼Œè‡ªç„¶è¿˜éœ€è¦éªŒè¯ã€‚è¿™é‡Œï¼Œæˆ‘å†ç»™ä½ ä»‹ç»ä¸€ä¸ªæ–°çš„å·¥å…· lsofã€‚å®ƒä¸“é—¨ç”¨æ¥æŸ¥çœ‹è¿›ç¨‹æ‰“å¼€æ–‡ä»¶åˆ—è¡¨ï¼Œä¸è¿‡ï¼Œè¿™é‡Œçš„â€œæ–‡ä»¶â€ä¸åªæœ‰æ™®é€šæ–‡ä»¶ï¼Œè¿˜åŒ…æ‹¬äº†ç›®å½•ã€å—è®¾å¤‡ã€åŠ¨æ€åº“ã€ç½‘ç»œå¥—æ¥å­—ç­‰ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åœ¨ç»ˆç«¯ä¸­è¿è¡Œä¸‹é¢çš„ lsof å‘½ä»¤ï¼Œçœ‹çœ‹è¿›ç¨‹ 18940 éƒ½æ‰“å¼€äº†å“ªäº›æ–‡ä»¶ï¼š</p><pre><code>$ lsof -p 18940 \nCOMMAND   PID USER   FD   TYPE DEVICE  SIZE/OFF    NODE NAME \npython  18940 root  cwd    DIR   0,50      4096 1549389 / \npython  18940 root  rtd    DIR   0,50      4096 1549389 / \nâ€¦ \npython  18940 root    2u   CHR  136,0       0t0       3 /dev/pts/0 \npython  18940 root    3w   REG    8,1 117944320     303 /tmp/logtest.txt \n</code></pre><p>è¿™ä¸ªè¾“å‡ºç•Œé¢ä¸­ï¼Œæœ‰å‡ åˆ—æˆ‘ç®€å•ä»‹ç»ä¸€ä¸‹ï¼ŒFD è¡¨ç¤ºæ–‡ä»¶æè¿°ç¬¦å·ï¼ŒTYPE è¡¨ç¤ºæ–‡ä»¶ç±»å‹ï¼ŒNAME è¡¨ç¤ºæ–‡ä»¶è·¯å¾„ã€‚è¿™ä¹Ÿæ˜¯æˆ‘ä»¬éœ€è¦å…³æ³¨çš„é‡ç‚¹ã€‚</p><p>å†çœ‹æœ€åä¸€è¡Œï¼Œè¿™è¯´æ˜ï¼Œè¿™ä¸ªè¿›ç¨‹æ‰“å¼€äº†æ–‡ä»¶ /tmp/logtest.txtï¼Œå¹¶ä¸”å®ƒçš„æ–‡ä»¶æè¿°ç¬¦æ˜¯ 3 å·ï¼Œè€Œ3 åé¢çš„ w ï¼Œè¡¨ç¤ºä»¥å†™çš„æ–¹å¼æ‰“å¼€ã€‚</p><p>è¿™è·Ÿåˆšæ‰ strace å®Œæˆ‘ä»¬çŒœæµ‹çš„ç»“æœä¸€è‡´ï¼Œçœ‹æ¥è¿™å°±æ˜¯é—®é¢˜çš„æ ¹æºï¼šè¿›ç¨‹ 18940 ä»¥æ¯æ¬¡ 300MB çš„é€Ÿåº¦ï¼Œåœ¨â€œç–¯ç‹‚â€å†™æ—¥å¿—ï¼Œè€Œæ—¥å¿—æ–‡ä»¶çš„è·¯å¾„æ˜¯ /tmp/logtest.txtã€‚</p><p>æ—¢ç„¶æ‰¾å‡ºäº†é—®é¢˜æ ¹æºï¼Œæ¥ä¸‹æ¥æŒ‰ç…§æƒ¯ä¾‹ï¼Œå°±è¯¥æŸ¥çœ‹æºä»£ç ï¼Œç„¶ååˆ†æä¸ºä»€ä¹ˆè¿™ä¸ªè¿›ç¨‹ä¼šç‹‚æ‰“æ—¥å¿—äº†ã€‚</p><p>ä½ å¯ä»¥è¿è¡Œ docker cp å‘½ä»¤ï¼ŒæŠŠæ¡ˆä¾‹åº”ç”¨çš„æºä»£ç æ‹·è´å‡ºæ¥ï¼Œç„¶åæŸ¥çœ‹å®ƒçš„å†…å®¹ã€‚ï¼ˆä½ ä¹Ÿå¯ä»¥ç‚¹å‡»<a href=\"https://github.com/feiskyer/linux-perf-examples/tree/master/logging-app\">è¿™é‡Œ</a>æŸ¥çœ‹æ¡ˆä¾‹åº”ç”¨çš„æºç ï¼‰ï¼š</p><pre><code>#æ‹·è´æ¡ˆä¾‹åº”ç”¨æºä»£ç åˆ°å½“å‰ç›®å½•\n$ docker cp app:/app.py . \n\n#æŸ¥çœ‹æ¡ˆä¾‹åº”ç”¨çš„æºä»£ç \n$ cat app.py \n\nlogger = logging.getLogger(__name__) \nlogger.setLevel(level=logging.INFO) \nrHandler = RotatingFileHandler(&quot;/tmp/logtest.txt&quot;, maxBytes=1024 * 1024 * 1024, backupCount=1) \nrHandler.setLevel(logging.INFO) \n\ndef write_log(size): \n  '''Write logs to file''' \n  message = get_message(size) \n  while True: \n    logger.info(message) \n    time.sleep(0.1) \n\nif __name__ == '__main__': \n  msg_size = 300 * 1024 * 1024 \n  write_log(msg_size) \n</code></pre><p>åˆ†æè¿™ä¸ªæºç ï¼Œæˆ‘ä»¬å‘ç°ï¼Œå®ƒçš„æ—¥å¿—è·¯å¾„æ˜¯ /tmp/logtest.txtï¼Œé»˜è®¤è®°å½• INFO çº§åˆ«ä»¥ä¸Šçš„æ‰€æœ‰æ—¥å¿—ï¼Œè€Œä¸”æ¯æ¬¡å†™æ—¥å¿—çš„å¤§å°æ˜¯ 300MBã€‚è¿™è·Ÿæˆ‘ä»¬ä¸Šé¢çš„åˆ†æç»“æœæ˜¯ä¸€è‡´çš„ã€‚</p><p>ä¸€èˆ¬æ¥è¯´ï¼Œç”Ÿäº§ç³»ç»Ÿçš„åº”ç”¨ç¨‹åºï¼Œåº”è¯¥æœ‰åŠ¨æ€è°ƒæ•´æ—¥å¿—çº§åˆ«çš„åŠŸèƒ½ã€‚ç»§ç»­æŸ¥çœ‹æºç ï¼Œä½ ä¼šå‘ç°ï¼Œè¿™ä¸ªç¨‹åºä¹Ÿå¯ä»¥è°ƒæ•´æ—¥å¿—çº§åˆ«ã€‚å¦‚æœä½ ç»™å®ƒå‘é€ SIGUSR1 ä¿¡å·ï¼Œå°±å¯ä»¥æŠŠæ—¥å¿—è°ƒæ•´ä¸º INFO çº§ï¼›å‘é€ SIGUSR2 ä¿¡å·ï¼Œåˆ™ä¼šè°ƒæ•´ä¸º WARNING çº§ï¼š</p><pre><code>def set_logging_info(signal_num, frame): \n  '''Set loging level to INFO when receives SIGUSR1''' \n  logger.setLevel(logging.INFO) \n\ndef set_logging_warning(signal_num, frame): \n  '''Set loging level to WARNING when receives SIGUSR2''' \n  logger.setLevel(logging.WARNING) \n\nsignal.signal(signal.SIGUSR1, set_logging_info) \nsignal.signal(signal.SIGUSR2, set_logging_warning) \n</code></pre><p>æ ¹æ®æºç ä¸­çš„æ—¥å¿—è°ƒç”¨ logger. info(message) ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œå®ƒçš„æ—¥å¿—æ˜¯ INFO çº§ï¼Œè¿™ä¹Ÿæ­£æ˜¯å®ƒçš„é»˜è®¤çº§åˆ«ã€‚é‚£ä¹ˆï¼Œåªè¦æŠŠé»˜è®¤çº§åˆ«è°ƒé«˜åˆ° WARNING çº§ï¼Œæ—¥å¿—é—®é¢˜åº”è¯¥å°±è§£å†³äº†ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±æ¥æ£€æŸ¥ä¸€ä¸‹ï¼Œåˆšåˆšçš„åˆ†æå¯¹ä¸å¯¹ã€‚åœ¨ç»ˆç«¯ä¸­è¿è¡Œä¸‹é¢çš„ kill å‘½ä»¤ï¼Œç»™è¿›ç¨‹ 18940 å‘é€ SIGUSR2 ä¿¡å·ï¼š</p><pre><code>$ kill -SIGUSR2 18940 \n</code></pre><p>ç„¶åï¼Œå†æ‰§è¡Œ top å’Œ iostat è§‚å¯Ÿä¸€ä¸‹ï¼š</p><pre><code>$ top \n... \n%Cpu(s):  0.3 us,  0.2 sy,  0.0 ni, 99.5 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st \n</code></pre><pre><code>$ iostat -d -x 1\nDevice            r/s     w/s     rkB/s     wkB/s   rrqm/s   wrqm/s  %rrqm  %wrqm r_await w_await aqu-sz rareq-sz wareq-sz  svctm  %util \nloop0            0.00    0.00      0.00      0.00     0.00     0.00   0.00   0.00    0.00    0.00   0.00     0.00     0.00   0.00   0.00 \nsdb              0.00    0.00      0.00      0.00     0.00     0.00   0.00   0.00    0.00    0.00   0.00     0.00     0.00   0.00   0.00 \nsda              0.00    0.00      0.00      0.00     0.00     0.00   0.00   0.00    0.00    0.00   0.00     0.00     0.00   0.00   0.00\n</code></pre><p>è§‚å¯Ÿtop å’Œ iostat çš„è¾“å‡ºï¼Œä½ ä¼šå‘ç°ï¼Œç¨ç­‰ä¸€æ®µæ—¶é—´åï¼Œiowait ä¼šå˜æˆ 0ï¼Œè€Œ sda ç£ç›˜çš„ I/O ä½¿ç”¨ç‡ä¹Ÿä¼šé€æ¸å‡å°‘åˆ° 0ã€‚</p><p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬ä¸ä»…å®šä½äº†ç‹‚æ‰“æ—¥å¿—çš„åº”ç”¨ç¨‹åºï¼Œå¹¶é€šè¿‡è°ƒé«˜æ—¥å¿—çº§åˆ«çš„æ–¹æ³•ï¼Œå®Œç¾è§£å†³äº† I/O çš„æ€§èƒ½ç“¶é¢ˆã€‚</p><p>æ¡ˆä¾‹æœ€åï¼Œå½“ç„¶ä¸è¦å¿˜äº†è¿è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œåœæ­¢æ¡ˆä¾‹åº”ç”¨ï¼š</p><pre><code>$ docker rm -f app \n</code></pre><h2>å°ç»“</h2><p>æ—¥å¿—ï¼Œæ˜¯äº†è§£åº”ç”¨ç¨‹åºå†…éƒ¨è¿è¡Œæƒ…å†µï¼Œæœ€å¸¸ç”¨ã€ä¹Ÿæœ€æœ‰æ•ˆçš„å·¥å…·ã€‚æ— è®ºæ˜¯æ“ä½œç³»ç»Ÿï¼Œè¿˜æ˜¯åº”ç”¨ç¨‹åºï¼Œéƒ½ä¼šè®°å½•å¤§é‡çš„è¿è¡Œæ—¥å¿—ï¼Œä»¥ä¾¿äº‹åæŸ¥çœ‹å†å²è®°å½•ã€‚è¿™äº›æ—¥å¿—ä¸€èˆ¬æŒ‰ç…§ä¸åŒçº§åˆ«æ¥å¼€å¯ï¼Œæ¯”å¦‚ï¼Œå¼€å‘ç¯å¢ƒé€šå¸¸æ‰“å¼€è°ƒè¯•çº§åˆ«çš„æ—¥å¿—ï¼Œè€Œçº¿ä¸Šç¯å¢ƒåˆ™åªè®°å½•è­¦å‘Šå’Œé”™è¯¯æ—¥å¿—ã€‚</p><p>åœ¨æ’æŸ¥åº”ç”¨ç¨‹åºé—®é¢˜æ—¶ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦ï¼Œåœ¨çº¿ä¸Šç¯å¢ƒä¸´æ—¶å¼€å¯åº”ç”¨ç¨‹åºçš„è°ƒè¯•æ—¥å¿—ã€‚æœ‰æ—¶å€™ï¼Œäº‹åä¸€ä¸å°å¿ƒå°±å¿˜äº†è°ƒå›å»ã€‚æ²¡æŠŠçº¿ä¸Šçš„æ—¥å¿—è°ƒé«˜åˆ°è­¦å‘Šçº§åˆ«ï¼Œå¯èƒ½ä¼šå¯¼è‡´ CPU ä½¿ç”¨ç‡ã€ç£ç›˜ I/O ç­‰ä¸€ç³»åˆ—çš„æ€§èƒ½é—®é¢˜ï¼Œä¸¥é‡æ—¶ï¼Œç”šè‡³ä¼šå½±å“åˆ°åŒä¸€å°æœåŠ¡å™¨ä¸Šè¿è¡Œçš„å…¶ä»–åº”ç”¨ç¨‹åºã€‚</p><p>ä»Šåï¼Œåœ¨ç¢°åˆ°è¿™ç§â€œç‹‚æ‰“æ—¥å¿—â€çš„åœºæ™¯æ—¶ï¼Œä½ å¯ä»¥ç”¨ iostatã€straceã€lsof ç­‰å·¥å…·æ¥å®šä½ç‹‚æ‰“æ—¥å¿—çš„è¿›ç¨‹ï¼Œæ‰¾å‡ºç›¸åº”çš„æ—¥å¿—æ–‡ä»¶ï¼Œå†é€šè¿‡åº”ç”¨ç¨‹åºçš„æ¥å£ï¼Œè°ƒæ•´æ—¥å¿—çº§åˆ«æ¥è§£å†³é—®é¢˜ã€‚</p><p>å¦‚æœåº”ç”¨ç¨‹åºä¸èƒ½åŠ¨æ€è°ƒæ•´æ—¥å¿—çº§åˆ«ï¼Œä½ å¯èƒ½è¿˜éœ€è¦ä¿®æ”¹åº”ç”¨çš„é…ç½®ï¼Œå¹¶é‡å¯åº”ç”¨è®©é…ç½®ç”Ÿæ•ˆã€‚</p><h2>æ€è€ƒ</h2><p>æœ€åï¼Œç»™ä½ ç•™ä¸€ä¸ªæ€è€ƒé¢˜ã€‚</p><p>åœ¨ä»Šå¤©çš„æ¡ˆä¾‹å¼€å§‹æ—¶ï¼Œæˆ‘ä»¬ç”¨ top å’Œ iostat æŸ¥çœ‹äº†ç³»ç»Ÿèµ„æºçš„ä½¿ç”¨æƒ…å†µã€‚é™¤äº† CPU å’Œç£ç›˜ I/Oå¤–ï¼Œå‰©ä½™å†…å­˜ä¹Ÿæ¯”è¾ƒå°‘ï¼Œè€Œå†…å­˜ä¸»è¦è¢« Buffer/Cache å ç”¨ã€‚</p><p>é‚£ä¹ˆï¼Œä»Šå¤©çš„é—®é¢˜å°±æ˜¯ï¼Œè¿™äº›å†…å­˜åˆ°åº•æ˜¯è¢« Buffer è¿˜æ˜¯ Cache å ç”¨äº†å‘¢ï¼Ÿæœ‰æ²¡æœ‰ä»€ä¹ˆæ–¹æ³•æ¥ç¡®è®¤ä½ çš„åˆ†æç»“æœå‘¢ï¼Ÿ</p><p>æ¬¢è¿åœ¨ç•™è¨€åŒºå’Œæˆ‘è®¨è®ºï¼Œä¹Ÿæ¬¢è¿æŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«ç»™ä½ çš„åŒäº‹ã€æœ‹å‹ã€‚æˆ‘ä»¬ä¸€èµ·åœ¨å®æˆ˜ä¸­æ¼”ç»ƒï¼Œåœ¨äº¤æµä¸­è¿›æ­¥ã€‚</p><p></p>","comments":[{"had_liked":false,"id":61894,"user_name":"hua168","can_delete":false,"product_type":"c1","uid":1065255,"ip_address":"","ucode":"CFF9A7E86EBA48","user_header":"https://static001.geekbang.org/account/avatar/00/10/41/27/3ff1a1d6.jpg","comment_is_top":false,"comment_ctime":1547830387,"is_pvip":false,"replies":[{"id":"22573","content":"çœ‹å‰é¢çš„ç»å†ï¼ŒæŠ€æœ¯é¢è¿˜æ˜¯æŒºå¹¿çš„ï¼Œä½†å¯èƒ½å¾ˆå¤šåœ°æ–¹éƒ½ä¸å¤ªæ·±å…¥ã€‚<br><br>å»ºè®®è¿˜æ˜¯å…ˆæ‰¾ä»½å·¥ä½œå§ï¼Œé•¿æœŸå¾…ä¸šå¯èƒ½ä¼šåŠ é‡ç„¦è™‘ã€‚ç„¶åå¯ä»¥æ ¹æ®å®é™…å·¥ä½œéœ€è¦ï¼Œå…ˆæŠŠå·¥ä½œéœ€è¦çš„çŸ¥è¯†æŠ€èƒ½åŠ æ·±æŒæ¡ã€‚ç­‰åˆ°å¯ä»¥ä»å®¹åº”å¯¹å·¥ä½œçš„æ—¶å€™ï¼Œå†è€ƒè™‘åœ¨æŸä¸ªé¢†åŸŸåŠ å¼ºæ·±å…¥ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1548575122,"ip_address":"","comment_id":61894,"utype":1}],"discussion_count":13,"race_medal":0,"score":"366620050547","product_id":100020901,"comment_content":"å¤§ç¥ï¼Œèƒ½é—®ä¸€ä¸ªé¢˜å¤–è¯å—ï¼Œå…³äºè‡ªå·±äººç”Ÿè§„åˆ’ï¼Œæ°´å¹³å’Œçœ¼ç•Œæ‰€é™ï¼Œæƒ³ä¸é€šï¼Œ<br>éƒ½è¯´å¤§ç¥çº§è§è¯†å¾ˆå¹¿ä¹Ÿå¤šï¼Œèƒ½ç»™æˆ‘è¿™ä¸ª35å²åªç»´æŠ¤è¿‡å››äº”åå°linuxæœåŠ¡å™¨çš„è¿ç»´æŒ‡æ¡è·¯å—ï¼Ÿ<br>ç°åœ¨å¾ˆè¿·èŒ«å’Œå‹åŠ›å¤§~~<br>èƒ½åŠ›å¦‚ä¸‹ï¼š<br>ä¸€.ç½‘ç»œï¼šCCNAæ°´å¹³ï¼Œè‡ªè¿‡äº†CCNPå¿˜è®°äº†ï¼Œå½“è¿‡2å¹´ç½‘ç®¡<br>äºŒã€ç»´æŠ¤è¿‡asp.netç”µå•†ç½‘ç«™ï¼Œ3å¹´ï¼Œåªæœ‰ç®€å•çš„ï¼Œå…¼èŒç½‘ç®¡<br>ä¸‰ã€linuxè¿ç»´ï¼Œåªåœ¨ä¸€å®¶ç”µå•†åšäº†3å¹´å¤šï¼Œä¼š<br>1.webï¼šnginxã€tomcaté…ç½®ï¼ˆå°‘ç”¨ï¼‰+php:nignxçš„rewirteå’Œåä»£<br>2.æ•°æ®åº“ï¼šmysqlã€mongoDBã€redis é…ç½®åŠä¸»ä»ï¼Œä¸ä¼šmycatã€Cetusä¹‹ç±»<br>3.åä»£ï¼šä¼šnginxã€haproxyç®€å•é…ç½®<br>4.å­˜å‚¨ï¼šNFSã€fastDFSã€hadoopç®€å•çœ‹äº†ä¸€ä¸‹<br>5.ç‰ˆæœ¬æ§åˆ¶ï¼šåªä¼šgitåŠæ­å»ºgitlab+jenkinsï¼ˆç®€å•çš„CI&#47;CDï¼‰<br>6.ç›‘æ§ï¼šç®€å•é…ç½®zabbix+shellè„šæœ¬<br>7.è™šæ‹ŸåŒ–ï¼škvmå®‰è£…åŠé…ç½®ã€docker(k8sè¿˜æ²¡å­¦)<br>8.äº‘è®¡ç®—ï¼šopenstackåªä¼šå®‰è£…åšè¿‡å®éªŒ<br>9.æµ‹è¯•ï¼šåªä¼šabå·¥å…·<br>10.æ—¥å¿—ï¼šELKå®‰è£…é…ç½®ï¼Œè¿˜æ²¡ç»“åˆjavaï¼ˆåœ¨å­¦ä¸­ï¼‰<br>11.å¤§æ•°æ®ï¼šæ²¡ä½¿ç”¨è¿‡ï¼ˆä¸ä¼šflumeã€stormã€sparkã€flinkã€kafkaï¼‰<br>12.è„šæœ¬ï¼šä¸»è¦æ˜¯shellä¸ºä¸»ã€ä¼šç‚¹python<br><br>å››ã€ç¼–ç¨‹èƒ½åŠ›ï¼šè‡ªå­¦ï¼Œæ²¡é¡¹ç›®ç»éªŒ<br>1.å‰ç«¯ï¼š<br>  1ï¼‰HTMLï¼ˆHTML5ä¸æ€çœ‹ï¼‰<br>  2ï¼‰cssï¼ˆlaiuiã€å­¦äº†ä¸€ä¸‹vueï¼‰<br>  3) jsã€jqueryæ¡†æ¶ã€ES6ç®€å•çœ‹äº†ä¸€ä¸‹  <br>2.PHPï¼šè¯­æ³•ç®€å•çš„thinkphp5æ¡†æ¶<br>3.javaï¼šè€ƒè™‘è¦ç»´æŠ¤java webåœ¨å­¦<br>\tåªçœ‹äº†javaã€jspåŠservetã€springã€springMVCã€spring Bootï¼ˆè¿™ä¸ªä¸ºä¸»ï¼‰<br>4.pythonï¼šè€ƒè™‘è¿ç»´ç”¨åˆ°<br>\tpythonï¼šä¼šç®€å•çš„è„šæœ¬<br>\tdjangoï¼šåªä¼šå®˜ç½‘ç®€å•çš„<br>\t<br>é—®é¢˜æ˜¯ï¼šç°åœ¨å·²35å²äº†ï¼Œå¤±ä¸šï¼Œæ€åŠï¼Ÿå¹´é¾„æ‘†åœ¨é‚£é‡Œï¼Œèƒ½åŠ›å¥½åƒä¸å¼ºï¼Œå­¦å†å¤§ä¸“ã€‚<br>èƒ½ç»™ä¸ªå»ºè®®å—ï¼Ÿéå¸¸æ„Ÿè°¢~~","like_count":85,"discussions":[{"author":{"id":2393362,"avatar":"","nickname":"Geek_4c721a","note":"","ucode":"0A81294AB5BB37","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":383176,"discussion_content":"è¦é€‰å¥½æ–¹å‘ä¸“æ”»ï¼Œæ—¢ç„¶æ˜¯è¿ç»´ï¼Œé‚£å‰ç«¯çš„å®Œå…¨æ”¾å¼ƒï¼Œä¸è¦æµªè´¹æ—¶é—´ï¼Œå‰ç«¯äº¤ç»™ä¸“ä¸šçš„å‰ç«¯å»åš","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1625969974,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437029,"discussion_content":"çœ‹å‰é¢çš„ç»å†ï¼ŒæŠ€æœ¯é¢è¿˜æ˜¯æŒºå¹¿çš„ï¼Œä½†å¯èƒ½å¾ˆå¤šåœ°æ–¹éƒ½ä¸å¤ªæ·±å…¥ã€‚\n\nå»ºè®®è¿˜æ˜¯å…ˆæ‰¾ä»½å·¥ä½œå§ï¼Œé•¿æœŸå¾…ä¸šå¯èƒ½ä¼šåŠ é‡ç„¦è™‘ã€‚ç„¶åå¯ä»¥æ ¹æ®å®é™…å·¥ä½œéœ€è¦ï¼Œå…ˆæŠŠå·¥ä½œéœ€è¦çš„çŸ¥è¯†æŠ€èƒ½åŠ æ·±æŒæ¡ã€‚ç­‰åˆ°å¯ä»¥ä»å®¹åº”å¯¹å·¥ä½œçš„æ—¶å€™ï¼Œå†è€ƒè™‘åœ¨æŸä¸ªé¢†åŸŸåŠ å¼ºæ·±å…¥ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1548575122,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1308196,"avatar":"https://static001.geekbang.org/account/avatar/00/13/f6/24/5a9277f1.jpg","nickname":"ghostwritten","note":"","ucode":"AE512F2E24A1A0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":383566,"discussion_content":"ä»è¿ç»´å‡ºå‘ï¼Œlinuxï¼Œshellç†Ÿç»ƒï¼Œpythonèƒ½å®Œæˆéœ€æ±‚ä»»åŠ¡ï¼Œgoå¯ä»¥å®ŒæˆåŠŸèƒ½æ€§ä»»åŠ¡ï¼Œk8sç†Ÿç»ƒã€‚è¿™åº”è¯¥æ˜¯ç›®å‰å¾ˆå¤šå·¥ç¨‹å¸ˆçš„æ°´å¹³å§ï¼Œä¹Ÿæ˜¯è´¨å˜çš„ä¸€ä¸ªç“¶é¢ˆï¼Œå¯¹äºå…¶ä»–å„ä¸ªå¼€æºé¡¹ç›®ï¼Œnginx,es......,åˆ°å“ªå…·ä½“åˆ°é¡¹ç›®ç›¸ä¿¡ä¹Ÿä¸ä¼šæ‹‰ä¸‹ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1626161562,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2466127,"avatar":"","nickname":"Geek_d60e46","note":"","ucode":"AB8E529461DCA5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":365292,"discussion_content":"åŒåœ¨è¿ç»´çš„å‘é‡ŒæŒ£æ‰ã€‚ä¸ªäººæ„Ÿè§‰æ²¡æœ‰å¹³å°ï¼ŒçœŸçš„æ˜¯æ­¥å±¥ç»´è‰°ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1617763088,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1543040,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8b/80/8702bd5f.jpg","nickname":"evan","note":"","ucode":"491B073D5AFEDE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":317967,"discussion_content":"å¤ªå¹¿æ³›äº† é€‰ä¸€ä¸ªæ–¹å‘ä¸“ä¾›å§~\nå¤§æ•°æ®(java+hadoopå…¨å®¶æ¡¶)\näº‘è®¡ç®—(openstack(vm)/k8s(å®¹å™¨äº‘))  \né‰´äºä½ çš„ç»å†, æ¨èk8så§~ ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1603623791,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1916685,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/3f/0d/1e8dbb2c.jpg","nickname":"æ€€æ£æ¢¦æƒ³çš„å­¦æ¸£","note":"","ucode":"2349B9F4F6FDE3","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":217934,"discussion_content":"äº‘è®¡ç®—è¿™éƒ¨åˆ†ï¼Œå¦‚æœä¸æ¶‰åŠå‚ä¸å¼€å‘ï¼Œåªæ˜¯åšä¸šåŠ¡äº¤ä»˜çš„è¯ï¼Œå‚å•†æ‰“åŒ…å¥½çš„äº§å“æ˜¯æœ€çœå¿ƒçš„ã€‚å¦‚æœåªæ˜¯åšä¸šåŠ¡çš„è¿è¥ï¼Œä¹Ÿå¯ä»¥èµšåˆ°ä¸€äº›é’±ï¼Œä½†æ˜¯ä»è¿ç»´çš„èŒä¸šå¯¿å‘½çœ‹ï¼Œæˆ‘å‰é¢æåˆ°çš„ä¸¤ç§é€‰æ‹©ï¼Œæ›´åƒæ˜¯æ··æ—¥å­ï¼Œå¾ˆæ˜¯å°´å°¬ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1585585269,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1504291,"avatar":"https://static001.geekbang.org/account/avatar/00/16/f4/23/993e7f05.jpg","nickname":"å‡ åº¦æµ®æ²‰","note":"","ucode":"B538711E6826C1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":206779,"discussion_content":"ä¸è¦å¦å®šè‡ªå·±ï¼Œæ‰“å¥½åŸºç¡€ï¼Œå¤šæ€è€ƒï¼Œå¤šå®æˆ˜ï¼Œæœ€å¥½å¤šæ¥è§¦å®ä¾‹æ¡ˆä¾‹ï¼Œæ˜¯æˆé•¿çš„æœ€ä½³ä¹‹è·¯ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1584443029,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1624538,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/jAsPmqra89uLYer998tsdAmHIxy9iaVfLIkzkTB3ITfUZg21Yiadf73TqmcFZXTEv2wuQicDA2uvqXvicHJ9HckBWg/132","nickname":"Geek_c991f2","note":"","ucode":"0FDE8CE24B8E32","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":35457,"discussion_content":"ä¸æ·±å…¥,æœ‰æ²¡æœ‰è¯´æ¨èå¾€å“ªä¸ªæ–¹å‘æ·±å…¥?devops?æ·±å…¥pythonè¿˜æ˜¯javaè¿˜æ˜¯webå‰ç«¯?è¿ç»´åœ¨å¹¿åº¦è¿˜æ˜¯æ·±åº¦?è¿˜æ˜¯æ·±å…¥è¿ç»´æŠ€æœ¯,ç›‘æ§,æ€§èƒ½è°ƒä¼˜?æ„Ÿè§‰å¥½å¤šä¸œè¥¿,ä¸çŸ¥é“å“ªé‡Œå…ˆå…¥æ‰‹æ¯”è¾ƒå¥½","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1571282812,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1085089,"avatar":"https://static001.geekbang.org/account/avatar/00/10/8e/a1/c05ab3b3.jpg","nickname":"å’–å•¡çŒ«","note":"","ucode":"64F4CB55DD11B5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":347504,"discussion_content":"ä½œä¸ºä¸€åè¿ç»´äººå‘˜ï¼Œæœ¬èº«è¡Œä¸šå°±æ˜¯æ¥è§¦é¢æŒºå¹¿çš„ï¼Œéšç€ç»éªŒå¢é•¿ï¼Œæ…¢æ…¢å°±æˆäº†å…¨èƒ½å‹å§ï¼Œæ„Ÿè§‰å¤§å“¥ä»¥å‰è‚¯å®šæ²¡æ·±å…¥å»å­¦ä¹ ï¼Œéƒ½æ˜¯è‚¤æµ…çš„å­¦ä¹ äº†ä¸€äº›å¤§æ¦‚æ–¹å‘ä¸Šçš„çŸ¥è¯†ï¼Œå¹¶æ²¡æœ‰å»åšæŒä¸‹å»ï¼Œåé¢å­¦çš„è¿ç»´å¼€å‘çš„ç›¸å…³çŸ¥è¯†ï¼Œå¦‚æœåšæŒä¸‹å»ï¼Œ(å¹¶ä¸”ä¹Ÿæ‰¾åˆ°äº†è¿ç»´å¼€å‘çš„å·¥ä½œ)æ–¹å‘è¿˜æ˜¯å¾ˆæ˜æœ—çš„ï¼Œå¦‚æœåšæŒä¸ä¸‹å»çš„è¯ï¼Œå°±å±äºåŸºç¡€è¿ç»´å²—ï¼Œé€‰æ‹©ä¸€å®¶å…¬å¸ï¼Œèƒ½å»çš„å°±è¸å®å¹²ä¸‹å»ï¼Œä¸è½»æ˜“è·³æ§½ï¼ŒåŸºæœ¬å°±è¿™æ ·äº†....... ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612244444,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1705468,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/05/fc/bceb3f2b.jpg","nickname":"å¼€å¿ƒå“¥","note":"","ucode":"D44C1F03B23C5A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":332791,"discussion_content":"å¤§å“¥ï¼ŒåŠ æ²¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607339715,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1504291,"avatar":"https://static001.geekbang.org/account/avatar/00/16/f4/23/993e7f05.jpg","nickname":"å‡ åº¦æµ®æ²‰","note":"","ucode":"B538711E6826C1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":206780,"discussion_content":"æœåŠ¡å™¨æ•°é‡è¿˜æ˜¯å¤ªå°‘äº†ï¼Œæˆ‘è¿™è¾¹2000å¤šå°æœºå™¨ï¼Œæ¯å¤©ä¼šæ¥è§¦æ›´å¤šå®æˆ˜åœºæ™¯ï¼Œå¤šæ€»ç»“å¤šæ€è€ƒï¼Œå‘ç°ä½ ä¼šæˆé•¿çš„æ›´å¿«ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584443109,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1000439,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/43/f7/abb7bfe3.jpg","nickname":"åˆ˜å†²","note":"","ucode":"0C4F66921AE76C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":41460,"discussion_content":"éšä¾¿é€‰ä¸€ä¸ªæ„Ÿå…´è¶£çš„ï¼Œæ·±å…¥æï¼Œå°±å®Œäº‹äº†ï¼Œä¸ªäººå»ºè®®ï¼Œæå¤§æ•°æ®ï¼Œå­¦javaè¿™æ¡è·¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572431930,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1305633,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ec/21/b0fe1bfd.jpg","nickname":"Adam","note":"","ucode":"338BA720880E4F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":7766,"discussion_content":"è¿™ä½å¤§å“¥çš„æŠ€æœ¯é¢ç¡®å®æŒºå¹¿çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567666314,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":61866,"user_name":"æˆ‘æ¥ä¹Ÿ","can_delete":false,"product_type":"c1","uid":1205253,"ip_address":"","ucode":"773D6104F56767","user_header":"https://static001.geekbang.org/account/avatar/00/12/64/05/6989dce6.jpg","comment_is_top":false,"comment_ctime":1547822905,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"186231416633","product_id":100020901,"comment_content":"[D26æ‰“å¡]<br>åˆæ˜¯è€å¥—è·¯äº†ï¼Œå“ˆå“ˆã€‚<br>å…ˆæ˜¯topçœ‹%iowaitåˆ°å‡é«˜ï¼Œå†çœ‹pidstatæ˜¯å“ªä¸ªè¿›ç¨‹åœ¨æ“ä½œç£ç›˜ï¼Œå†straceçœ‹è¿›ç¨‹çš„è°ƒç”¨æ ˆã€‚<br>çœ‹&#47;proc&#47;meminfoå°±å¯ä»¥çœ‹åˆ°ç³»ç»Ÿçš„bufferå’Œcacheå„å äº†å¤šå°‘å§ã€‚å‰åä¸€å¯¹æ¯”å°±çŸ¥é“æ˜¯è°äº†ã€‚ğŸ˜„","like_count":43},{"had_liked":false,"id":61700,"user_name":"Christmas","can_delete":false,"product_type":"c1","uid":1219172,"ip_address":"","ucode":"F48F6BE4A7595B","user_header":"https://static001.geekbang.org/account/avatar/00/12/9a/64/ad837224.jpg","comment_is_top":false,"comment_ctime":1547777065,"is_pvip":false,"replies":[{"id":"22325","content":"å—¯å—¯ æ˜¯çš„ï¼Œå¹¶ä¸”è¿™ä¸ªå·¥å…·éœ€è¦çŸ¥é“å“ªä¸ªæ–‡ä»¶","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1548250848,"ip_address":"","comment_id":61700,"utype":1}],"discussion_count":1,"race_medal":0,"score":"143281697833","product_id":100020901,"comment_content":"pcstat(page cache stat)è¿™ä¸ªå¯ä»¥æŸ¥çœ‹ç›®æ ‡logæ–‡ä»¶åœ¨cacheä¸­çš„å¤§å°","like_count":33,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436961,"discussion_content":"å—¯å—¯ æ˜¯çš„ï¼Œå¹¶ä¸”è¿™ä¸ªå·¥å…·éœ€è¦çŸ¥é“å“ªä¸ªæ–‡ä»¶","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548250848,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":62824,"user_name":"æ— åè€å’","can_delete":false,"product_type":"c1","uid":1348261,"ip_address":"","ucode":"48874CE670E122","user_header":"","comment_is_top":false,"comment_ctime":1548166544,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"117512283536","product_id":100020901,"comment_content":"æŸ¥çœ‹buffer&#47;cacheå ç”¨ï¼Œå»ºè®®ä½¿ç”¨pcstatæˆ–è€…hcacheï¼Œhcacheæ˜¯åŸºäºpcstatçš„ï¼Œpcstatå¯ä»¥æŸ¥çœ‹æŸä¸ªæ–‡ä»¶æ˜¯å¦è¢«ç¼“å­˜å’Œæ ¹æ®è¿›ç¨‹pidæ¥æŸ¥çœ‹éƒ½ç¼“å­˜äº†å“ªäº›æ–‡ä»¶ã€‚hcacheåœ¨å…¶åŸºç¡€ä¸Šå¢åŠ äº†æŸ¥çœ‹æ•´ä¸ªæ“ä½œç³»ç»ŸCacheå’Œæ ¹æ®ä½¿ç”¨Cacheå¤§å°æ’åºçš„ç‰¹æ€§ã€‚<br><br>[root@linjx ~]# hcache --top 3<br>+--------------------------+----------------+------------+-----------+---------+<br>| Name                     | Size (bytes)   | Pages      | Cached    | Percent |<br>|--------------------------+----------------+------------+-----------+---------|<br>| &#47;usr&#47;bin&#47;containerd      | 44250880       | 10804      | 10804     | 100.000 |<br>| &#47;usr&#47;bin&#47;dockerd-ce      | 81622264       | 19928      | 8319      | 041.745 |<br>| &#47;usr&#47;bin&#47;containerd-shim | 4972896        | 1215       | 1215      | 100.000 |<br>+--------------------------+----------------+------------+-----------+---------+<br>","like_count":27},{"had_liked":false,"id":61699,"user_name":"åˆ’æ—¶ä»£","can_delete":false,"product_type":"c1","uid":1061454,"ip_address":"","ucode":"9554CE2F83B77F","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/2o1Izf2YyJSnnI0ErZ51pYRlnrmibqUTaia3tCU1PjMxuwyXSKOLUYiac2TQ5pd5gNGvS81fVqKWGvDsZLTM8zhWg/132","comment_is_top":false,"comment_ctime":1547777031,"is_pvip":false,"replies":[{"id":"22324","content":"è°¢è°¢æŒ‡å‡ºï¼Œç¡®å®åªæ˜¯æ–‡ä»¶åç§°çš„æ—‹è½¬ï¼Œå†…å®¹å¹¶æ²¡æœ‰å›æ»š","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1548250769,"ip_address":"","comment_id":61699,"utype":1}],"discussion_count":3,"race_medal":0,"score":"113216926727","product_id":100020901,"comment_content":"æŒ‡å‡ºè€å¸ˆçš„ä¸€ä¸ªé—®é¢˜ï¼Œâ€œæ—¥å¿—å›æ»šæ–‡ä»¶â€ï¼Œæ‰“å°æ—¥å¿—çš„è¿‡ç¨‹ä¸­ä»ç›´è§‰æ¥çœ‹å¾ˆå®¹æ˜“è¯¯è®¤ä¸ºæ—¥å¿—æ˜¯åœ¨â€œå›æ»šâ€ï¼Œæˆ‘ä¹ŸçŠ¯è¿‡è¿™æ ·çš„é”™è¯¯ï¼›rotatingè‹±æ–‡ç›´è¯‘ä¸ºâ€œæ—‹è½¬â€æˆ–â€œè½®æµâ€ï¼Œå®é™…çš„æ—¥å¿—æ‰“å°è¿‡ç¨‹ä¸­ï¼Œæ—¥å¿—åç§°æ˜¯â€œæ—‹è½¬â€çš„ï¼Œä¾‹å¦‚log.1(å½“å‰æ‰“å°çš„æ—¥å¿—æ–‡ä»¶å¹¶ä¸”ä¸€ç›´ä¼šæ‰“å°è¿™ä¸ªæ–‡ä»¶)ï¼Œlog.2(è¾ƒæ—©æ—¥å¿—)ï¼Œlog.3(æ›´æ—©æ—¥å¿—)ï¼Œå½“è§¦å‘â€œæ—‹è½¬â€æ¡ä»¶æ—¶ï¼Œæ—¥å¿—åç§°ä¼šå‘ç”Ÿå˜æ›´ï¼Œå‡å¦‚log.3æ˜¯ä¸Šé™æ•°ï¼Œé‚£ä¹ˆlog.3å‘ç”Ÿâ€œæ—‹è½¬â€å°±è¢«removeï¼Œlog.2è¢«renameä¸ºlog.3ã€‚æ›´å½¢è±¡ä¸€ç‚¹çš„æè¿°æ˜¯ï¼Œæ—¥å¿—åç§°å‘ç”Ÿäº†æ»šåŠ¨ï¼Œlog.1=&gt;log.2=&gt;log.3ä¸æ–­çš„æ›´æ–°ã€‚","like_count":26,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436960,"discussion_content":"è°¢è°¢æŒ‡å‡ºï¼Œç¡®å®åªæ˜¯æ–‡ä»¶åç§°çš„æ—‹è½¬ï¼Œå†…å®¹å¹¶æ²¡æœ‰å›æ»š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548250769,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1308729,"avatar":"https://static001.geekbang.org/account/avatar/00/13/f8/39/4089c9b5.jpg","nickname":"èƒ–å­ç½—","note":"","ucode":"AF45AEED6064B3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":577531,"discussion_content":"æ—¥å¿—æ»šåŠ¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656166823,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1292330,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/VX0ib4CV0m7fwxB2xFcIJaYYWXXpfxxYbfBErqBej9395hgZszqS3dz9bThCxOuFfJ8Xibx9HbdNmZJwL5m33wIw/132","nickname":"chaoxifuchen","note":"","ucode":"95DCC5C4994F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":392776,"discussion_content":"æ„Ÿè§‰å«è½®è½¬å¥½ä¸€äº›","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631114271,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":61705,"user_name":"éƒ­æ±Ÿä¼Ÿ","can_delete":false,"product_type":"c1","uid":1313994,"ip_address":"","ucode":"613D638619B5A2","user_header":"https://static001.geekbang.org/account/avatar/00/14/0c/ca/6173350b.jpg","comment_is_top":false,"comment_ctime":1547778216,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"70267254952","product_id":100020901,"comment_content":"buffers&#47;cachedä½¿ç”¨æƒ…å†µå¯ä»¥ä»procæ–‡ä»¶ç³»ç»Ÿçœ‹ï¼š<br>gjw@gjw:~$ cat &#47;proc&#47;meminfo <br>MemTotal:        7588504 kB<br>MemFree:         3621800 kB<br>MemAvailable:    6335912 kB<br>Buffers:          473920 kB<br>Cached:          2491192 kB","like_count":16},{"had_liked":false,"id":61664,"user_name":"ninuxer","can_delete":false,"product_type":"c1","uid":1243135,"ip_address":"","ucode":"5394ADAF2667D6","user_header":"https://wx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEKQMM4m7NHuicr55aRiblTSEWIYe0QqbpyHweaoAbG7j2v7UUElqqeP3Ihrm3UfDPDRb1Hv8LvPwXqA/132","comment_is_top":false,"comment_ctime":1547770859,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"23022607339","product_id":100020901,"comment_content":"æ‰“å¡day27<br>åº”è¯¥æ˜¯è¢«cacheå ç”¨ï¼Œå› ä¸ºå†…å­˜ç¯‡æåˆ°cacheä¸»è¦æ˜¯è´Ÿè´£æ–‡ä»¶çš„è¯»å†™ç¼“å­˜ï¼Œbufferæ˜¯è´Ÿè´£å—è®¾å¤‡è¯»å†™ç¼“å­˜ï¼Œè€Œæ¡ˆä¾‹ä¸­å†™çš„æ˜¯æ–‡ä»¶<br>å¯ä»¥é€šè¿‡cachestatéªŒè¯","like_count":5},{"had_liked":false,"id":62273,"user_name":"J","can_delete":false,"product_type":"c1","uid":1204008,"ip_address":"","ucode":"7F1BD7F66F4700","user_header":"https://static001.geekbang.org/account/avatar/00/12/5f/28/17ed19bc.jpg","comment_is_top":false,"comment_ctime":1547999144,"is_pvip":false,"replies":[{"id":"22140","content":"å¯ä»¥çš„ï¼Œæ¯”å¦‚è°ƒé«˜åˆ°è­¦å‘Šçº§åˆ«ï¼Œé‚£ä¹ˆ info() å®é™…ä¸Šå°±ä¸å†™äº†","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1548116645,"ip_address":"","comment_id":62273,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18727868328","product_id":100020901,"comment_content":"logger.info(message)çš„æƒ…å†µä¸‹ï¼Œè¿˜å¯ä»¥ä½¿ç”¨logger.setLevelä¿®æ”¹æ—¥å¿—çº§åˆ«å—ï¼Ÿ","like_count":4,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437155,"discussion_content":"å¯ä»¥çš„ï¼Œæ¯”å¦‚è°ƒé«˜åˆ°è­¦å‘Šçº§åˆ«ï¼Œé‚£ä¹ˆ info() å®é™…ä¸Šå°±ä¸å†™äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548116645,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":225502,"user_name":"hello","can_delete":false,"product_type":"c1","uid":1510495,"ip_address":"","ucode":"C6FC61A90F202B","user_header":"https://static001.geekbang.org/account/avatar/00/17/0c/5f/4cbcbfb9.jpg","comment_is_top":false,"comment_ctime":1591771274,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14476673162","product_id":100020901,"comment_content":"æ‰“å¡ã€‚æˆ‘çš„ã€Šlinuxæ€§èƒ½ä¼˜åŒ–å®è·µã€‹å­¦ä¹ ç¬”è®°åˆ†äº«ç»™å¤§å®¶(æŒç»­æ›´æ–°ä¸­)ï¼šhttps:&#47;&#47;github.com&#47;chenhongjun&#47;linux-","like_count":3},{"had_liked":false,"id":61824,"user_name":"Geek_41dcba","can_delete":false,"product_type":"c1","uid":1089626,"ip_address":"","ucode":"22F9180FBD74F5","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/wjK0unDiaUMZYGsl43dovmLWZS6WvDzpespydKfOQHDU55QPZQZvfKKYk4ZaITibGc3wwC3vqTTudWficcPhEia0Xw/132","comment_is_top":false,"comment_ctime":1547810728,"is_pvip":true,"replies":[{"id":"22331","content":"å—¯ å¯ä»¥å®é™…æ“ä½œéªŒè¯ä¸€ä¸‹","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1548251481,"ip_address":"","comment_id":61824,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14432712616","product_id":100020901,"comment_content":"åœ¨å›ç­”ä»Šå¤©çš„æ€è€ƒé¢˜å‰ï¼Œæˆ‘æƒ³éœ€è¦æ˜ç¡®ä¸¤ä¸ªå‰æï¼Œä¸€ä¸ªæ˜¯Bufferåˆ°åº•åœ¨æ•´ä¸ªç³»ç»Ÿç»“æ„çš„å“ªä¸€å±‚ï¼Œä¼šä¸ä¼šæ˜¯ä¸æ˜¯åœ¨IOè°ƒåº¦å™¨çš„ä¸‹ä¸€å±‚ï¼Œæˆ‘æƒ³åº”è¯¥ä¼šï¼Œç†ç”±æ˜¯Bufferç¼“å­˜ç£ç›˜å†…å®¹è°ƒåº¦å™¨åˆå¹¶åå†å»å†™ç£ç›˜æ•ˆç‡æ›´å¥½;å¦ä¸€ä¸ªæ˜¯ä¹‹å‰æœ‰çœ‹åˆ°ç•™è¨€å¯¹äºæ–‡ä»¶ç³»ç»Ÿä½¿ç”¨å¸¦Cacheçš„IOæ“ä½œåº•å±‚ä¸ºäº†æ€§èƒ½Bufferå’ŒCacheæ˜¯åˆå¹¶çš„ï¼Œå¦‚æœæ˜¯è¿™æ ·é‚£æˆ‘å°±ä»é€»è¾‘ä¸Šè®¤ä¸ºå®ƒä»¬æ˜¯åˆ†å¼€çš„ï¼Œè¿™æ ·å¥½å›ç­”é—®é¢˜(å£°æ˜æˆ‘æ²¡çœ‹è¿‡åº•å±‚ä»£ç éƒ½æ˜¯æ²¡æœ‰ä»£ç ä¾æ®çš„)ã€‚  æˆ‘è®¤ä¸ºå¢é•¿çš„åœ°æ–¹éƒ½åœ¨Bufferé‡Œé¢ï¼ŒCacheé‡Œé¢çš„å†…å®¹å¯ä»¥ç»è¿‡IOè°ƒåº¦å™¨æ•´ç†åæ”¾Bufferï¼Œæ²¡æœ‰ç†ç”±è¯´ç£ç›˜é˜»å¡ï¼ŒCacheå°±ä¸èƒ½ç§»åŠ¨åˆ°Buffer  æŸ¥çœ‹æ•°æ®çš„åœ°æ–¹åœ¨&#47;proc&#47;meminfoã€‚<br><br>ä¸Šé¢çš„éƒ½æƒ³æ³•ä»Šå¤©æ²¡æœ‰æ—¶é—´éªŒè¯ï¼Œè¦æ˜å¤©äº†!","like_count":3,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437008,"discussion_content":"å—¯ å¯ä»¥å®é™…æ“ä½œéªŒè¯ä¸€ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548251481,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":345626,"user_name":"è‚¥low","can_delete":false,"product_type":"c1","uid":1043480,"ip_address":"","ucode":"A158AFAAB8C742","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ec/18/bf7254d3.jpg","comment_is_top":false,"comment_ctime":1652440275,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10242374867","product_id":100020901,"comment_content":"è¯¾ä¸‹ä½œä¸šæˆ‘æ˜¯ç”¨çš„ free -w å‘½ä»¤,è¿™æ ·å¯ä»¥æ˜¾ç¤º Buffer å’Œ Cache çš„åˆ†åˆ«å ç”¨æƒ…å†µäº†","like_count":2},{"had_liked":false,"id":85342,"user_name":"å°è‚¥çš‚é…±","can_delete":false,"product_type":"c1","uid":1167821,"ip_address":"","ucode":"12A039F7166DE0","user_header":"https://static001.geekbang.org/account/avatar/00/11/d1/cd/2747b687.jpg","comment_is_top":false,"comment_ctime":1555040757,"is_pvip":false,"replies":[{"id":"30628","content":"åº”è¯¥æ˜¯é€€å‡ºäº†ï¼Œdocker logs appçœ‹çœ‹æ˜¯ä»€ä¹ˆé”™è¯¯ä¿¡æ¯","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1555074378,"ip_address":"","comment_id":85342,"utype":1}],"discussion_count":5,"race_medal":0,"score":"10144975349","product_id":100020901,"comment_content":"è€å¸ˆï¼Œæˆ‘è¿è¡Œdocker run -v &#47;tmp:&#47;tmp --name=app -itd feisky&#47;logapp è¿™ä¸ªå‘½ä»¤å‡ ç§’åè¿™ä¸ªè¿›ç¨‹å°±ä¸åœ¨äº†ã€‚æ€ä¹ˆå›äº‹å‘¢ ","like_count":2,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446638,"discussion_content":"åº”è¯¥æ˜¯é€€å‡ºäº†ï¼Œdocker logs appçœ‹çœ‹æ˜¯ä»€ä¹ˆé”™è¯¯ä¿¡æ¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555074378,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2803070,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/gTnAoZ9fJ3K2G9Mib3ecwt1ngfM1EkNm19e6xlpj1ibwruuleMne129icIHRc41td2RXtz7PE4v4NfKczEXhictjgA/132","nickname":"111qqz","note":"","ucode":"16C24D8347912B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":574686,"discussion_content":"å†…å­˜å°çš„æœºå™¨å¯èƒ½æ˜¯OOMäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1654245181,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2259219,"avatar":"","nickname":"Geek_fd8a50","note":"","ucode":"839EFBF398CCE3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":331052,"discussion_content":"è¯·é—®å®¹å™¨é•œåƒæ˜¯å¦æœ‰ä¸‹è½½é“¾æ¥ï¼Ÿæ„Ÿè°¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606753032,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1580782,"avatar":"https://static001.geekbang.org/account/avatar/00/18/1e/ee/48f39616.jpg","nickname":"é«˜é«˜çš„é«˜","note":"","ucode":"607BD31319B29E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":302271,"discussion_content":"å…³é—­selinux","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598863836,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1246017,"avatar":"https://static001.geekbang.org/account/avatar/00/13/03/41/ba59e1ee.jpg","nickname":"Ethan","note":"","ucode":"6856180D7B2525","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":19856,"discussion_content":"åœ¨CentOS 7.5ä¸‹ï¼Œä¼šå‡ºç°å¦‚ä¸‹é”™è¯¯ï¼š\n\n[root@localhost tmp]# docker run -v /tmp:/tmp --name=app -itd feisky/logapp \n9232e6efd3c0d27b29f5c95e0bb7d12bd3abd6462891d85a5cfd8879d12f7c2c\n[root@localhost tmp]# docker logs app\nTraceback (most recent call last):\n  File &#34;/app.py&#34;, line 15, in <module>\n    &#34;/tmp/logtest.txt&#34;, maxBytes=1024 * 1024 * 1024, backupCount=1)\n  File &#34;/usr/local/lib/python3.7/logging/handlers.py&#34;, line 147, in __init__\n    BaseRotatingHandler.__init__(self, filename, mode, encoding, delay)\n  File &#34;/usr/local/lib/python3.7/logging/handlers.py&#34;, line 54, in __init__\n    logging.FileHandler.__init__(self, filename, mode, encoding, delay)\n  File &#34;/usr/local/lib/python3.7/logging/__init__.py&#34;, line 1092, in __init__\n    StreamHandler.__init__(self, self._open())\n  File &#34;/usr/local/lib/python3.7/logging/__init__.py&#34;, line 1121, in _open\n    return open(self.baseFilename, self.mode, encoding=self.encoding)\nPermissionError: [Errno 13] Permission denied: &#39;/tmp/logtest.txt&#39;\n[root@localhost tmp]# ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569231110,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":62152,"user_name":"å°è€é¼ ","can_delete":false,"product_type":"c1","uid":1257460,"ip_address":"","ucode":"C663A0C863A515","user_header":"https://static001.geekbang.org/account/avatar/00/13/2f/f4/2dede51a.jpg","comment_is_top":false,"comment_ctime":1547958859,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10137893451","product_id":100020901,"comment_content":"æˆ‘è§‰çš„åº”è¯¥æ˜¯cacheï¼Œå†™æ—¥å¿—ï¼Œæ—¥å¿—æ˜¯æ–‡ä»¶","like_count":2},{"had_liked":false,"id":61663,"user_name":"wtcctw","can_delete":false,"product_type":"c1","uid":1141208,"ip_address":"","ucode":"EECBBB9AC08CD9","user_header":"https://static001.geekbang.org/account/avatar/00/11/69/d8/112f69f8.jpg","comment_is_top":false,"comment_ctime":1547770445,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10137705037","product_id":100020901,"comment_content":"é€»è¾‘æ¸…æ™°ï¼Œæ­¥éª¤è¯¦ç»†ï¼Œèµ","like_count":2},{"had_liked":false,"id":352206,"user_name":"è‚¥low","can_delete":false,"product_type":"c1","uid":1043480,"ip_address":"","ucode":"A158AFAAB8C742","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ec/18/bf7254d3.jpg","comment_is_top":false,"comment_ctime":1658455769,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5953423065","product_id":100020901,"comment_content":"ç”¨ vmstat -w 1 å°±èƒ½çŸ¥é“å…·ä½“æ˜¯bufferè¿˜æ˜¯cacheå å¾—å¤šäº†","like_count":1},{"had_liked":false,"id":297447,"user_name":"Geek_c38736","can_delete":false,"product_type":"c1","uid":2204497,"ip_address":"","ucode":"6EF2F8FA78C0D2","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLV02BvM8NIcaNibOQeYxSLzfECL2WvmMTGMe2eiccclBLWibyPUL0SMTkelBuibyl8FQB5vG5R5ia6Btg/132","comment_is_top":false,"comment_ctime":1623557560,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5918524856","product_id":100020901,"comment_content":"è¯·é—®æ–‡ç« ä¸­å¼€å§‹æ˜¾ç¤ºçš„iowait cpuéƒ½å·²ç»92%å¤šäº†ï¼Œè¿™ä¸ªpythonè¿›ç¨‹çš„ä½¿ç”¨ç‡ä¸ºä»€ä¹ˆåªæœ‰6%. éš¾é“ä½¿ç”¨ç‡é‡Œé¢ä¸åŒ…å«iowait cpuçš„ç»Ÿè®¡å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1226968,"avatar":"https://static001.geekbang.org/account/avatar/00/12/b8/d8/f81b5604.jpg","nickname":"hcyycb","note":"","ucode":"77FF6CA41F9E66","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":393235,"discussion_content":"iowait æ˜¯CPUç©ºé—²æ—¶æœ‰ç£ç›˜ioè¯·æ±‚ã€‚Python åªå 6%ï¼Œæ•°æ®å¯¹å¾—ä¸Šï¼Œåˆç†å•Šã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631322099,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":142200,"user_name":"å¼ æ´","can_delete":false,"product_type":"c1","uid":1433129,"ip_address":"","ucode":"671C066DF85521","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/wEWLExAiboszs7l38p72XshYmQ1WSbMT9VGdlHnmGTuqWyLiaZAppCzLHSrBKaKzjL8YbtxGySsvP225Ct0NViaEQ/132","comment_is_top":false,"comment_ctime":1571308885,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5866276181","product_id":100020901,"comment_content":"è€å¸ˆï¼Œä½ å¥½ã€‚æµ‹è¯•ä¸­é‡åˆ°çš„æƒ…å†µè·Ÿä½ è¯´çš„ä¸å¤ªä¸€æ ·ã€‚<br>iostat -d -x 1å¾—åˆ°çš„ç»“æœ<br>%utilè¾¾åˆ°99%ï¼ŒIOPS 90ï¼Œååé‡ 700KB&#47;Sï¼Œå“åº”æ—¶é—´ 10msï¼Œå¹³å‡ç­‰å¾…é˜Ÿåˆ—1.1ï¼›<br>top çœ‹åˆ°iowait 30%ï¼Œä¸åˆ°60%ï¼›<br>å¹¶å‘æ•°å¢åŠ ï¼Œcpuã€å†…å­˜ä½¿ç”¨ç‡éƒ½æ²¡æœ‰å¢åŠ ï¼Œç£ç›˜ä½¿ç”¨ç‡99%ï¼›<br>å¦‚ä½•åˆ¤æ–­å‡ºç£ç›˜æ˜¯å¦å·²ç»è¾¾åˆ°äº†é¥±å’Œï¼Ÿå¯¹äºè¿™ä¸ªç»“æœï¼Œæˆ‘ä¸èƒ½åˆ†æå‡ºç£ç›˜æ˜¯å¦è¾¾åˆ°äº†ç“¶é¢ˆã€‚<br>æ˜¯å¦å¯ä»¥æŒ‡ç‚¹ä¸‹ï¼Ÿå¯å¦åˆ©ç”¨ç£ç›˜æœ€å¤§çš„IOPSæ¥åˆ¤æ–­æ˜¯å¦ç£ç›˜è¾¾åˆ°äº†ç“¶é¢ˆï¼Ÿè°¢è°¢ï¼","like_count":1,"discussions":[{"author":{"id":1226968,"avatar":"https://static001.geekbang.org/account/avatar/00/12/b8/d8/f81b5604.jpg","nickname":"hcyycb","note":"","ucode":"77FF6CA41F9E66","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":393236,"discussion_content":"å¯èƒ½ä½ æœåŠ¡å™¨çš„ç¡¬ä»¶æ€§èƒ½ä¸åŒã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631322175,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":125250,"user_name":"å°è‹","can_delete":false,"product_type":"c1","uid":1501618,"ip_address":"","ucode":"1A4776F948C6F5","user_header":"https://static001.geekbang.org/account/avatar/00/16/e9/b2/6a9203b5.jpg","comment_is_top":false,"comment_ctime":1566131403,"is_pvip":false,"discussion_count":4,"race_medal":0,"score":"5861098699","product_id":100020901,"comment_content":"strace -p 18923<br>Process 18923 attached<br>futex(0x7fbe2c2e39d0, FUTEX_WAIT, 18924, NULL<br>æˆ‘å¥½åƒå¯¹æ¯ä¸ªè¿›ç¨‹æ‰§è¡Œè¯¥å‘½ä»¤éƒ½ä¼šå¡åœ¨è¿™åœ°æ–¹.è¿™ä¸ªå‘½ä»¤åŸºæœ¬ä¸Šç”¨ä¸ä¸Š,ä¸çŸ¥é“æ€ä¹ˆå›äº‹.","like_count":1,"discussions":[{"author":{"id":1160951,"avatar":"https://static001.geekbang.org/account/avatar/00/11/b6/f7/3c3b1385.jpg","nickname":"æµ·èƒ†é˜¶æ®µ","note":"","ucode":"7A8C4BB4D0CDB8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":370958,"discussion_content":"reference: https://meenakshi02.wordpress.com/2011/02/02/strace-hanging-at-futex/\nåŸå› å¯èƒ½æ˜¯ä½ åœ¨Strace parent process, è€Œè¿™ä¸ªparent è¿›ç¨‹æ²¡åšä»€ä¹ˆï¼Œä½†åœ¨ç­‰å¾…å®ƒçš„å­çº¿ç¨‹ï¼Œæ‰€ä»¥ä½ è¦æ‰¾åˆ°å­çº¿ç¨‹å†å»strace","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1619592770,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1054546,"avatar":"https://static001.geekbang.org/account/avatar/00/10/17/52/8e72876e.jpg","nickname":"iq2wh","note":"","ucode":"B2C894ED48B2EF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1160951,"avatar":"https://static001.geekbang.org/account/avatar/00/11/b6/f7/3c3b1385.jpg","nickname":"æµ·èƒ†é˜¶æ®µ","note":"","ucode":"7A8C4BB4D0CDB8","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":386826,"discussion_content":"è°¢è°¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627822009,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":370958,"ip_address":""},"score":386826,"extra":""},{"author":{"id":1308729,"avatar":"https://static001.geekbang.org/account/avatar/00/13/f8/39/4089c9b5.jpg","nickname":"èƒ–å­ç½—","note":"","ucode":"AF45AEED6064B3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1160951,"avatar":"https://static001.geekbang.org/account/avatar/00/11/b6/f7/3c3b1385.jpg","nickname":"æµ·èƒ†é˜¶æ®µ","note":"","ucode":"7A8C4BB4D0CDB8","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":577535,"discussion_content":"å­¦ä¹ äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656167028,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":370958,"ip_address":""},"score":577535,"extra":""}]},{"author":{"id":1786819,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/43/c3/2c53acd7.jpg","nickname":"é›„é¹°","note":"","ucode":"67E0C4BDE7F6F2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":295841,"discussion_content":"è€é“ï¼šæˆ‘ä¹Ÿé‡åˆ°è¿™ä¸ªé—®é¢˜ï¼Œè¯·é—®ä½ æ‰¾åˆ°åŸå› æ²¡ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596361341,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":115138,"user_name":"Hinimix","can_delete":false,"product_type":"c1","uid":1316937,"ip_address":"","ucode":"7994136C93BD89","user_header":"https://static001.geekbang.org/account/avatar/00/14/18/49/b1d864e5.jpg","comment_is_top":false,"comment_ctime":1563499277,"is_pvip":false,"replies":[{"id":"42494","content":"ä¸åŒç¼–ç¨‹è¯­è¨€éƒ½æœ‰ç›¸åº”çš„åº“å‡½æ•°å¯ä»¥è°ƒç”¨ã€‚æ¡ˆä¾‹ä¸­Pythonçš„ä½¿ç”¨æ–¹æ³•å¯ä»¥å‚è€ƒhttps:&#47;&#47;github.com&#47;feiskyer&#47;linux-perf-examples&#47;blob&#47;master&#47;logging-app&#47;app.py#L47","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1563806114,"ip_address":"","comment_id":115138,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5858466573","product_id":100020901,"comment_content":"è€å¸ˆï¼Œä»£ç é‡Œæ€ä¹ˆå†™èƒ½æ¥å—sigusrè¿™ä¸ªå‚æ•°å‘¢ï¼Œç°åœ¨æ¯æ¬¡æ”¹çº§åˆ«æˆ‘éƒ½æ˜¯æ”¹é…ç½®æ–‡ä»¶ç„¶åé‡å¯","like_count":1,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458983,"discussion_content":"ä¸åŒç¼–ç¨‹è¯­è¨€éƒ½æœ‰ç›¸åº”çš„åº“å‡½æ•°å¯ä»¥è°ƒç”¨ã€‚æ¡ˆä¾‹ä¸­Pythonçš„ä½¿ç”¨æ–¹æ³•å¯ä»¥å‚è€ƒhttps://github.com/feiskyer/linux-perf-examples/blob/master/logging-app/app.py#L47","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563806114,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1112139,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f8/4b/5ae62b10.jpg","nickname":"Geek_b04b12","note":"","ucode":"F8705A21FCDF09","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5624,"discussion_content":"phpé‡Œé¢æœ‰pcntl ç³»åˆ—å‡½æ•°ä»‹ç»çš„æ˜¯æœ‰å…³SIGxxç›¸å…³çš„ä¿¡å·ï¼Œå› ä¸ºè¿™ä¸ªphpè¯ç”Ÿäº†swoole ","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1566391134,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":62524,"user_name":"æ¸¡æ¸¡é¸Ÿ_linux","can_delete":false,"product_type":"c1","uid":1227772,"ip_address":"","ucode":"099BB11A3201D3","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ernR4NKI5tejJAV3HMTF3gszBBUAjkjLO2QYic2gx5dMGelFv4LWibib7CUGexmMcMp5HiaaibmOH3dyHg/132","comment_is_top":false,"comment_ctime":1548081131,"is_pvip":false,"replies":[{"id":"22126","content":"sysä½¿ç”¨é«˜æ˜¯æ­£å¸¸çš„ï¼Œä»»ä½•IOéƒ½è¦ç»è¿‡ç³»ç»Ÿè°ƒç”¨å®Œæˆï¼Œè‡ªç„¶è¦å ç”¨sysã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1548115805,"ip_address":"","comment_id":62524,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5843048427","product_id":100020901,"comment_content":"æˆ‘è¿™è¾¹ä½¿ç”¨centos7 2c 8g å®éªŒç»“æœä¸æ–‡ç« ä¸­æœ‰äº›åŒºåˆ«ï¼š<br>1. åœ¨è¿è¡Œå®¹å™¨åï¼Œä½¿ç”¨topå‘½ä»¤å‘ç°sysä¸iowaitå„å å•ä¸ªCPUçš„10-50%<br>2. é’ˆå¯¹iowaitï¼Œä½¿ç”¨dstatå‘ç°ç£ç›˜æ¯ç§’å†™å…¥çº¦ä¸º300M; vmstatä¸­boä¹ŸéªŒè¯äº†å†™è¯·æ±‚è¾ƒå¤§<br>3. ä½¿ç”¨pidstat -d åˆ†æå‘ç°æ˜¯Pythonå†™å…¥è¯·æ±‚å¤§ï¼Œæ ¹æ® iostatåˆ†æåˆ°å½“å‰ç£ç›˜ä½¿ç”¨ç‡90%ï¼Œå†™é˜Ÿåˆ—1000<br>4. ä½¿ç”¨straceè·Ÿè¸ªï¼Œå‘ç°å†™å…¥fdä¸º3ï¼Œè§‚å¯Ÿls -l &#47;proc&#47;$pid&#47;fd&#47;ï¼Œå‘ç°fd:3 --&gt; &#47;tmp&#47;logtest.txt<br>5. å†é€šè¿‡ watch -n 1 ls -lh &#47;tmp&#47;logtest.txt è§‚å¯Ÿæ—¥å¿—å¤§å°ï¼Œå‘ç°æ—¥å¿—åœ¨è½®è½¬<br>----<br>æœ‰ä¸ªç–‘æƒ‘ï¼Œé’ˆå¯¹ sys è¾ƒé«˜ï¼Œæ— è®ºæ˜¯ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œè¿˜æ˜¯ä¸­æ–­ï¼Œéƒ½éå¸¸å°‘ï¼Œåªæœ‰ä¸€ä¸ªioå†™å…¥ã€‚éš¾é“ioå¯†é›†å‹åº”ç”¨ä¹Ÿèƒ½å¤§å¹…åº¦æ‹‰é«˜sysï¼Ÿæˆ‘ä¹Ÿæ²¡å‘ç°manæ‰‹å†Œä¸­æåˆ°ioç­‰å¾…æ—¶é—´åŒ…å«åœ¨sysä¸­å•Š<br>[root@centos-80 ~]# dstat 2<br>----total-cpu-usage---- -dsk&#47;total- -net&#47;total- ---paging-- ---system--<br>usr sys idl wai hiq siq| read  writ| recv  send|  in   out | int   csw<br>  6  13  68  12   0   0| 146k  312M|   0     0 |   0     0 | 854   333<br> 13  26  27  34   0   1|   0   598M|  60B  626B|   0     0 |1506   312<br> 10  22  42  25   0   0|   0   587M|  60B  354B|   0     0 |1385   270","like_count":1,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437246,"discussion_content":"sysä½¿ç”¨é«˜æ˜¯æ­£å¸¸çš„ï¼Œä»»ä½•IOéƒ½è¦ç»è¿‡ç³»ç»Ÿè°ƒç”¨å®Œæˆï¼Œè‡ªç„¶è¦å ç”¨sysã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548115805,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":61748,"user_name":"ä»²é¬¼","can_delete":false,"product_type":"c1","uid":1314692,"ip_address":"","ucode":"DB1CD7052D5BA6","user_header":"https://static001.geekbang.org/account/avatar/00/14/0f/84/d8e63885.jpg","comment_is_top":false,"comment_ctime":1547789772,"is_pvip":false,"replies":[{"id":"22329","content":"è¿™å„¿æ˜¯è¦è¯´ IO çš„æ¥æºï¼Œè‚¯å®šæ˜¯ I&#47;O å¤§çš„è¿›ç¨‹","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1548251132,"ip_address":"","comment_id":61748,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5842757068","product_id":100020901,"comment_content":"â€œæ¯ç§’å†™çš„æ•°æ®è¶…è¿‡ 45 MBï¼Œæ¯”ä¸Šé¢ iostat å‘ç°çš„ 32MB çš„ç»“æœè¿˜è¦å¤§â€<br>è€å¸ˆå¥½ï¼Œæ²¡æ˜ç™½è¿™é‡Œçš„æ¯”è¾ƒè¦è¯´æ˜ä»€ä¹ˆé—®é¢˜ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436976,"discussion_content":"è¿™å„¿æ˜¯è¦è¯´ IO çš„æ¥æºï¼Œè‚¯å®šæ˜¯ I/O å¤§çš„è¿›ç¨‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548251132,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":61725,"user_name":"å®‰å°ä¾","can_delete":false,"product_type":"c1","uid":1101660,"ip_address":"","ucode":"A5C414C7B994FF","user_header":"https://static001.geekbang.org/account/avatar/00/10/cf/5c/d4e19eb6.jpg","comment_is_top":false,"comment_ctime":1547782420,"is_pvip":false,"replies":[{"id":"22326","content":"ä½ è¿™ä¸ªä¾‹å­æ˜¯å‘æ–‡ä»¶ &#47;tmp&#47;aaa å†™ï¼Œä¸æ˜¯æ ‡å‡†è¾“å‡º","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1548250969,"ip_address":"","comment_id":61725,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5842749716","product_id":100020901,"comment_content":"Ubuntu 16.04, ä½¿ç”¨ strace åº”è¯¥éœ€è¦å…ˆä¸´æ—¶ä¿®æ”¹ç³»ç»Ÿä¸€ä¸ªé…ç½®ï¼šecho 0 | sudo tee &#47;proc&#47;sys&#47;kernel&#47;yama&#47;ptrace_scopeã€‚å¦å¤–ç”¨ java æ¨¡æ‹Ÿå†™æ–‡ä»¶ï¼Œstrace å‘ç°è¿˜æ˜¯ä¸è¡Œï¼Œä¸€ç›´å¡åœ¨è¿™ä¸ªåœ°æ–¹ï¼š<br><br>zk@zk-pc:~&#47;Documents$ strace -p 6526<br>strace: Process 6526 attached<br>futex(0x7f934a93a9d0, FUTEX_WAIT, 6527, NULL<br><br>è€å¸ˆå¸®å¿™çœ‹ä¸€ä¸‹ï¼ŒJava æºä»£ç å¦‚ä¸‹ã€‚æ³¨é‡Šæ‰çš„éƒ¨åˆ† System.out æ˜¯ç–¯ç‹‚æ‰“æ—¥å¿— ï¼ˆæ ‡å‡†è¾“å‡ºï¼‰ï¼Œçº¿ä¸Šç¯å¢ƒå‡ºç°è¿‡ï¼Œç–¯ç‹‚ println ç»“æœç£ç›˜æ‰“æ»¡çš„é—®é¢˜ï¼Œæƒ³æ¨¡æ‹Ÿä¸€ä¸‹ï¼Œç»“æœå‘ç°ä¸è¡Œã€‚ç„¶åæ¢æˆäº†å†™æ–‡ä»¶ï¼Œç»“æœ strace è¿˜æ˜¯çœ‹ä¸å‡ºæ¥ï¼Œå¡åœ¨é‚£ä¸ªåœ°æ–¹ä¸€ç›´ä¸åŠ¨ï¼š<br><br>    public static void main(String...args) throws Exception {<br>        File file = new File(&quot;&#47;tmp&#47;aaa&quot;);<br>        PrintWriter printWriter = new PrintWriter(file);<br><br>        while (true) {<br>            printWriter.write(UUID.randomUUID().toString());<br>            &#47;&#47; System.out.println(&quot;------------------------------NULL-------------------&quot;);<br>            LockSupport.parkNanos(1);<br>        }<br>    }<br><br>å¦å¤–é—®ä¸€ä¸‹è€å¸ˆï¼Œä¸€ç›´å‘æ ‡å‡†è¾“å‡ºæ‰“å°çš„è¯ï¼Œæœ€ç»ˆçš„é‚£ä¸ªæ–‡ä»¶æ˜¯æ”¾åœ¨å“ªé‡Œå‘¢äº†ï¼Ÿæ€ä¹ˆå°±æŠŠç£ç›˜æ‰“æ»¡äº†å‘¢ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436969,"discussion_content":"ä½ è¿™ä¸ªä¾‹å­æ˜¯å‘æ–‡ä»¶ /tmp/aaa å†™ï¼Œä¸æ˜¯æ ‡å‡†è¾“å‡º","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548250969,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":360551,"user_name":"Geek_f93234","can_delete":false,"product_type":"c1","uid":1769504,"ip_address":"åŒ—äº¬","ucode":"1E5DC903A5429E","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJGXndj5N66z9BL1ic9GibZzWWgoVeWaWTL2XUnCYic7iba2kAEvN9WfjmlXELD5lqt8IJ1P023N5ZWicg/132","comment_is_top":false,"comment_ctime":1666652012,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"1666652012","product_id":100020901,"comment_content":"root@pc:~# cat &#47;proc&#47;meminfo  | grep -E &quot;Cached|SReclaimable&quot;<br>Cached:          1696908 kB<br>SwapCached:            0 kB<br>SReclaimable:      66336 kB","like_count":0},{"had_liked":false,"id":360550,"user_name":"Geek_f93234","can_delete":false,"product_type":"c1","uid":1769504,"ip_address":"åŒ—äº¬","ucode":"1E5DC903A5429E","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJGXndj5N66z9BL1ic9GibZzWWgoVeWaWTL2XUnCYic7iba2kAEvN9WfjmlXELD5lqt8IJ1P023N5ZWicg/132","comment_is_top":false,"comment_ctime":1666651734,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"1666651734","product_id":100020901,"comment_content":"é€šè¿‡vmstat çœ‹åˆ° å†…å­˜è¢«Cacheå ç”¨äº†<br>root@pc:~# vmstat 1<br>procs -----------memory---------- ---swap-- -----io---- -system-- ------cpu-----<br> r  b   swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa st<br> 1  0      0 4946408  25412 2065436    0    0   191 304456  261  162  1  3 82 14  0<br> 1  0      0 6160016  25412 1452472    0    0     0 344208  327  286  1  9 90  0  0<br> 1  0      0 5541428  25412 2078736    0    0     0 577540  548  224  0  0 89 11  0<br> 1  0      0 5669052  25412 1452588    0    0     0 344064  414  162  1  5 94  0  0<br> 1  0      0 5047392  25412 2078736    0    0     0 688128  368  199  1  5 94  0  0<br> 3  0      0 5864288  25424 1762964    0    0     0 569584  312  301  1  6 93  0  0<br> 2  0      0 4925112  25424 2086076    0    0     0 118784  283  106  2  2 96  0  0<br> 1  0      0 5492056  25424 1763660    0    0     0 782340  500  319  0  7 82 10  0<br> 0  0      0 5233080  25424 2394508    0    0     0 544772  439  265  0  3 96  1  0<br> 1  0      0 5484624  25424 1763668    0    0     0 344064  255  127  1  3 96  0  0<br> 2  0      0 4890676  25436 2394396    0    0     0 516264  247  158  3  6 86  6  0<br> 1  0      0 5006000  25436 2005184    0    0     0 516188  235   82  0  4 95  1  0","like_count":0},{"had_liked":false,"id":357009,"user_name":"*","can_delete":false,"product_type":"c1","uid":2901446,"ip_address":"ç¦å»º","ucode":"575AECA891950A","user_header":"https://static001.geekbang.org/account/avatar/00/2c/45/c6/28dfdbc9.jpg","comment_is_top":false,"comment_ctime":1662854097,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1662854097","product_id":100020901,"comment_content":"è€å¸ˆï¼Œé˜Ÿåˆ—å¤šå¤§ç®—é•¿","like_count":0},{"had_liked":false,"id":305381,"user_name":"ç¬ƒå®š","can_delete":false,"product_type":"c1","uid":1316173,"ip_address":"","ucode":"92E06FA13CC046","user_header":"https://static001.geekbang.org/account/avatar/00/14/15/4d/bbfda6b7.jpg","comment_is_top":false,"comment_ctime":1627954600,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1627954600","product_id":100020901,"comment_content":"ç¤ºä¾‹ä¸­å†™çš„æ˜¯æ–‡ä»¶ï¼Œä¼šç»è¿‡æ–‡ä»¶ç³»ç»Ÿï¼Œç”±æ–‡ä»¶ç³»ç»Ÿæ¥åšå…·ä½“çš„ioè°ƒåº¦ã€ioå†™å…¥ç­‰æ“ä½œï¼›è€Œä¹‹å‰åœ¨å†…å­˜ç¯‡ä¸­ï¼Œè€å¸ˆè¯´è¿‡ï¼Œè¯»å†™æ–‡ä»¶ç³»ç»Ÿçš„æ–‡ä»¶æ“ä½œå®é™…æ˜¯å†™é¡µç¼“å­˜ï¼Œä¹Ÿå°±æ˜¯æ–‡ä»¶ç³»ç»Ÿä¸­çš„cacheï¼Œæ‰€ä»¥å†™æ–‡ä»¶æ“ä½œä¸»è¦å ç”¨çš„æ˜¯å†…å­˜ä¸­çš„cacheæŒ‡æ ‡ã€‚","like_count":0},{"had_liked":false,"id":297006,"user_name":"é˜¿æµ·","can_delete":false,"product_type":"c1","uid":1281585,"ip_address":"","ucode":"2589431F840C42","user_header":"https://static001.geekbang.org/account/avatar/00/13/8e/31/28972804.jpg","comment_is_top":false,"comment_ctime":1623259255,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1623259255","product_id":100020901,"comment_content":"ä½¿ç”¨cachestat æˆ–è€… &#47;proc&#47;meminfo éƒ½èƒ½çœ‹åˆ° bufferå’Œcacheå„è‡ªå ç”¨äº†å¤šå°‘ï¼›ä¾‹å­æ˜¯å†™æ–‡ä»¶ï¼Œæ‰€ä»¥è‡ªç„¶æ˜¯cacheç”¨çš„å¤š","like_count":0},{"had_liked":false,"id":275794,"user_name":"Anthony","can_delete":false,"product_type":"c1","uid":1309908,"ip_address":"","ucode":"9E0C98A9123365","user_header":"https://static001.geekbang.org/account/avatar/00/13/fc/d4/743d3f02.jpg","comment_is_top":false,"comment_ctime":1611668903,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1611668903","product_id":100020901,"comment_content":"vmstat çœ‹åˆ°æ˜¯cacheä¸æ–­ä¸Šå‡ï¼Œåˆå› ä¸ºé¡µå›æ”¶æœºåˆ¶ï¼Œé™ä½å‡é«˜ä¸æ–­åå¤","like_count":0},{"had_liked":false,"id":255770,"user_name":"ç ¥ç ºå‰è¡Œ","can_delete":false,"product_type":"c1","uid":1333693,"ip_address":"","ucode":"F49A7287147E6A","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/49NMDFFQekIc5h06icIyx4blaCwl339PaibzFZhhZ4SAwan6xv6UZicPubkRjTQnNmZbiaSB4VfwA3yCPgPOWDJ4pA/132","comment_is_top":false,"comment_ctime":1603425210,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1603425210","product_id":100020901,"comment_content":"é™¤äº† CPU å’Œç£ç›˜ I&#47;O å¤–ï¼Œå‰©ä½™å†…å­˜ä¹Ÿæ¯”è¾ƒå°‘ï¼Œè€Œå†…å­˜ä¸»è¦è¢« Buffer&#47;Cache å ç”¨ã€‚<br>å¦‚æœåªæ˜¯çœ‹é‚£ä¸ªè¢«å ç”¨çš„å¤šå¯ä»¥vmstat<br>","like_count":0},{"had_liked":false,"id":246370,"user_name":"å‘æ–‡è¶…","can_delete":false,"product_type":"c1","uid":1976384,"ip_address":"","ucode":"3DA58D26FF8FCB","user_header":"https://static001.geekbang.org/account/avatar/00/1e/28/40/1c1a34c7.jpg","comment_is_top":false,"comment_ctime":1599299076,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1599299076","product_id":100020901,"comment_content":"ä¹‹å‰é‡åˆ°è¿‡ä¸€ä¸ªé—®é¢˜ï¼Œdockerä¸­ä¸€ä¸ªjavaè¿›ç¨‹ä¸æ–­å‘stdoutæ‰“debugæ—¥å¿—ï¼Œå½“æ—¶çš„ç°è±¡æ˜¯å®¿ä¸»æœºå†…å­˜ç¼“æ…¢å‡é«˜ï¼Œæœ€åå¯¼è‡´oomã€‚å½“æ—¶çœ‹åˆ°oomï¼Œä¸€ç‚¹æ€è·¯ä¹Ÿæ²¡æœ‰ï¼Œçœ‹äº†è€å¸ˆçš„å†…å­˜é—®é¢˜å’Œioé—®é¢˜çš„å®šä½ï¼Œç°åœ¨å›æƒ³èµ·æ¥å°±æ²¡è§‰å¾—é‚£ä¹ˆéš¾äº†ï¼Œå—ç›Šè‰¯å¤šï¼","like_count":0},{"had_liked":false,"id":226812,"user_name":"djfhchdh","can_delete":false,"product_type":"c1","uid":1484184,"ip_address":"","ucode":"E71D75328CE398","user_header":"https://static001.geekbang.org/account/avatar/00/16/a5/98/a65ff31a.jpg","comment_is_top":false,"comment_ctime":1592208532,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1592208532","product_id":100020901,"comment_content":"æ€è€ƒé¢˜ï¼šç”¨cachetopæˆ–cachestatå·¥å…·å°±å¯ä»¥çœ‹åˆ°å…·ä½“çš„bufferã€cacheçš„å¤§å°","like_count":0},{"had_liked":false,"id":223434,"user_name":"è¥¿å‡ºåä¸‰å½’","can_delete":false,"product_type":"c1","uid":1527323,"ip_address":"","ucode":"693417E8D75F74","user_header":"https://static001.geekbang.org/account/avatar/00/17/4e/1b/ba80a35e.jpg","comment_is_top":false,"comment_ctime":1591088688,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1591088688","product_id":100020901,"comment_content":"è€å¸ˆï¼Œæˆ‘çš„ç¯å¢ƒé‡Œé¢é€šè¿‡iostatå¥½åƒå¹¶ä¸èƒ½åˆ¤æ–­å‡ºioçš„ç“¶é¢ˆï¼Œé˜Ÿåˆ—å’Œä½¿ç”¨ç‡éƒ½å¾ˆå°ï¼Œä½†æ˜¯topçš„cpu iowait ç¡®å®è¾¾åˆ°äº†å¾ˆé«˜ï¼Œè¿™æ˜¯ä¸æ˜¯ä»£è¡¨æˆ‘ç¯å¢ƒçš„æ€§èƒ½ç“¶é¢ˆåè€Œæ˜¯åœ¨cpuä¸Šäº†ã€‚<br>Device            r&#47;s     rkB&#47;s   rrqm&#47;s  %rrqm r_await rareq-sz     w&#47;s     wkB&#47;s   wrqm&#47;s  %wrqm w_await wareq-sz     d&#47;s     dkB&#47;s   drqm&#47;s  %drqm d_await dareq-sz     f&#47;s f_await  aqu-sz  %util<br>dm-0             0.00      0.00     0.00   0.00    0.00     0.00   67.00 229392.50     0.00   0.00   56.03  3423.77    0.00      0.00     0.00   0.00    0.00     0.00    0.00    0.00    3.75  10.90<br>dm-1             0.00      0.00     0.00   0.00    0.00     0.00    0.00      0.00     0.00   0.00    0.00     0.00    0.00      0.00     0.00   0.00    0.00     0.00    0.00    0.00    0.00   0.00<br>sda              0.00      0.00     0.00   0.00    0.00     0.00  235.00 234172.50     1.00   0.42   30.45   996.48    0.00      0.00     0.00   0.00    0.00     0.00    0.00    0.00    7.04  22.20<br>sdb              0.00      0.00     0.00   0.00    0.00     0.00    0.00      0.00     0.00   0.00    0.00     0.00    0.00      0.00     0.00   0.00    0.00     0.00    0.00    0.00    0.00   0.00<br>scd0             0.00      0.00     0.00   0.00    0.00     0.00    0.00      0.00     0.00   0.00    0.00     0.00    0.00      0.00     0.00   0.00    0.00     0.00    0.00    0.00    0.00   0.00<br>","like_count":0,"discussions":[{"author":{"id":1013424,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/76/b0/14fec62f.jpg","nickname":"ä¸äº†å³°","note":"","ucode":"E23B96D6A3D4EC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":551176,"discussion_content":"æ„Ÿè§‰ä½ çš„ç¯å¢ƒæ€§èƒ½å¾ˆå¥½ã€‚å› ä¸ºä½ æ²¡æœ‰CPUå’Œ iowait è¾¾åˆ°å¤šå°‘ï¼Œä¸èƒ½åˆ¤æ–­æ˜¯å¦å­˜åœ¨cpuçš„ç“¶é¢ˆã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644917428,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":208911,"user_name":"å¤§é›„","can_delete":false,"product_type":"c1","uid":1676966,"ip_address":"","ucode":"5FCFDD3A940801","user_header":"https://static001.geekbang.org/account/avatar/00/19/96/a6/32a286e0.jpg","comment_is_top":false,"comment_ctime":1587463776,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1587463776","product_id":100020901,"comment_content":"strace -p nginx-id<br>Process 3173 attached<br>rt_sigsuspend([], 8<br><br><br>è¿™ä¸ªä»€ä¹ˆæƒ…å†µ","like_count":0},{"had_liked":false,"id":183516,"user_name":"å‡¹å‡¸æ›¼","can_delete":false,"product_type":"c1","uid":1178970,"ip_address":"","ucode":"66F78B8D91CDDB","user_header":"https://static001.geekbang.org/account/avatar/00/11/fd/5a/44719f7c.jpg","comment_is_top":false,"comment_ctime":1583056897,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1583056897","product_id":100020901,"comment_content":"è€å¸ˆï¼Œè¯·é—®ä¸‹ä¸ºä»€ä¹ˆiowaitå¤§çš„æ—¶å€™åªåœ¨å•ä¸ªCPUé€»è¾‘æ ¸ä¸Šä½“ç°","like_count":0,"discussions":[{"author":{"id":1013424,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/76/b0/14fec62f.jpg","nickname":"ä¸äº†å³°","note":"","ucode":"E23B96D6A3D4EC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":551177,"discussion_content":"å› ä¸ºåªæœ‰ä¸€ä¸ªè¿›ç¨‹å†™","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644917449,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":180143,"user_name":"hostfoxÂ²â°Â²â°","can_delete":false,"product_type":"c1","uid":1740281,"ip_address":"","ucode":"0D987C733D7CCB","user_header":"https://static001.geekbang.org/account/avatar/00/1a/8d/f9/ceb39113.jpg","comment_is_top":false,"comment_ctime":1582197769,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1582197769","product_id":100020901,"comment_content":"android è™½ç„¶æ²¡æœ‰pidstatï¼Œä½†å¯ä»¥ä½¿ç”¨ iotop æ‰¾å‡ºioè¯»å†™è¾ƒé«˜çš„çº¿ç¨‹ï¼Œç„¶åæ ¹æ®straceå’Œlsofæ‰¾å‡ºè¯»å†™çš„æ–‡ä»¶ã€‚","like_count":0},{"had_liked":false,"id":143583,"user_name":"æ±¤ğŸ ğŸ¥£æ˜±","can_delete":false,"product_type":"c1","uid":1332781,"ip_address":"","ucode":"46842C90E59A1A","user_header":"https://static001.geekbang.org/account/avatar/00/14/56/2d/dd3b12b8.jpg","comment_is_top":false,"comment_ctime":1571737043,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1571737043","product_id":100020901,"comment_content":"è€å¸ˆï¼Œæˆ‘ç”¨linuxçš„ä¸€ä¸ª1æ ¸çš„ å†…å­˜1Gçš„æœåŠ¡å™¨ï¼Œæ²¡æœ‰å‡ºç°ioç“¶é¢ˆçš„é—®é¢˜ï¼Œé€šè¿‡topå‘½ä»¤åˆ°æ˜¯å‘ç°äº†cpuä½¿ç”¨ç‡é£šåˆ°93%ï¼Œ64.5 us, 29.2 syã€‚è¿™æ˜¯æ˜¯traceè·Ÿè¸ªçš„æƒ…å†µï¼šæ€ä¹ˆååº”ä¸äº†æ˜¯ioçš„é—®é¢˜å°¼ï¼Ÿ<br>mmap(NULL, 393220096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = -1 ENOMEM (Cannot allocate memory)<br>munmap(0x7f2cc8098000, 314576896)       = 0<br>write(2, &quot;--- Logging error ---\\n&quot;, 22) = 22<br>stat(&quot;&#47;usr&#47;local&#47;lib&#47;python3.7&#47;logging&#47;handlers.py&quot;, {st_mode=S_IFREG|0644, st_size=57674, ...}) = 0<br>write(2, &quot;Traceback (most recent call last&quot;..., 35) = 35<br>write(2, &quot;  File \\&quot;&#47;usr&#47;local&#47;lib&#47;python3.7&quot;..., 108) = 108<br>write(2, &quot;  File \\&quot;&#47;usr&#47;local&#47;lib&#47;python3.7&quot;..., 122) = 122<br>write(2, &quot;MemoryError\\n&quot;, 12)           = 12<br>write(2, &quot;Call stack:\\n&quot;, 12)           = 12<br>stat(&quot;&#47;app.py&quot;, {st_mode=S_IFREG|0664, st_size=1289, ...}) = 0<br>write(2, &quot;  File \\&quot;&#47;app.py\\&quot;, line 52, in &lt;m&quot;..., 63) = 63<br>write(2, &quot;  File \\&quot;&#47;app.py\\&quot;, line 43, in wr&quot;..., 65) = 65<br>mmap(NULL, 314576896, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f2cc8098000<br>mmap(NULL, 393220096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = -1 ENOMEM (Cannot allocate memory)<br>munmap(0x7f2cc8098000, 314576896)       = 0<br>write(2, &quot;Unable to print the message and &quot;..., 119) = 119<br>select(0, NULL, NULL, NULL, {0, 100000}) = 0 (Timeout)<br>getpid()                                = 1<br>mmap(NULL, 314576896, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f2cc8098000<br>mmap(NULL, 393220096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = -1 ENOMEM (Cannot allocate memory)<br>munmap(0x7f2cc8098000, 314576896)       = 0<br>write(2, &quot;--- Logging error ---\\n&quot;, 22) = 22<br>stat(&quot;&#47;usr&#47;local&#47;lib&#47;python3.7&#47;logging&#47;handlers.py&quot;, {st_mode=S_IFREG|0644, st_size=57674, ...}) = 0<br>write(2, &quot;Traceback (most recent call last&quot;..., 35) = 35<br>write(2, &quot;  File \\&quot;&#47;usr&#47;local&#47;lib&#47;python3.7&quot;..., 108) = 108<br>write(2, &quot;  File \\&quot;&#47;usr&#47;local&#47;lib&#47;python3.7&quot;..., 122) = 122<br>write(2, &quot;MemoryError\\n&quot;, 12)           = 12<br>write(2, &quot;Call stack:\\n&quot;, 12)           = 12<br><br>","like_count":0},{"had_liked":false,"id":142816,"user_name":"Shane","can_delete":false,"product_type":"c1","uid":1291344,"ip_address":"","ucode":"322D0A883BAF16","user_header":"https://static001.geekbang.org/account/avatar/00/13/b4/50/c5dad2dc.jpg","comment_is_top":false,"comment_ctime":1571542391,"is_pvip":false,"replies":[{"id":"55583","content":"è¯·å‚è€ƒ 05 ç¯‡ï¼Œæœ‰å¯¹è¿™ä¸ªé—®é¢˜çš„è¯¦ç»†è®²è§£","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1571840506,"ip_address":"","comment_id":142816,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1571542391","product_id":100020901,"comment_content":"è€å¸ˆï¼Œæˆ‘ä»Šå¤©æ‰çœ‹å®Œè¿™ç¯‡æ–‡ç« ã€‚æƒ³è¦æå‡ ä¸ªé—®é¢˜ï¼Œä¸çŸ¥é“è¯¥ä¸“æ è¿‡äº†è¿™ä¹ˆé•¿æ—¶é—´äº†ï¼Œè¿˜ä¼šä¸ä¼šè¢«è€å¸ˆçœ‹åˆ°ã€‚ä¸è¿‡è¿˜æ˜¯æç€æŠŠï¼Œä¸‡ä¸€çœ‹åˆ°å¹¶ä¸”å›å¤äº†å‘¢ï¼Ÿ<br><br>æœ‰ä¸€ç‚¹å›°æƒ‘éš¾ä»¥ç†è§£ï¼Ÿåœ¨è¿è¡Œapp.pyå‘½ä»¤ä¹‹åï¼Œä½¿ç”¨topæŸ¥çœ‹æ—¶ï¼Œå‘ç°cpuçš„waitä½¿ç”¨ç‡åœ¨80ï¼Œ90å¾˜å¾Šã€‚<br><br>ä½†æ˜¯topä¸‹é¢çš„pythonè¿›ç¨‹çš„cpuä½¿ç”¨ç‡åªæœ‰6%ã€‚<br><br>åœ¨æˆ‘çš„ç†è§£ä¸­ï¼Œç°åœ¨æ€»çš„cpuä½¿ç”¨ç‡æ˜¯1 - idleã€‚ä¹Ÿå°±æ˜¯90%å·¦å³ã€‚å…¶ä¸­å¤§é‡éƒ½æ˜¯waitï¼Œsysä¹‹å ç”¨äº†6%å·¦å³ã€‚<br><br>ä½†æ˜¯ï¼Œtopä¸‹é¢æ‰€æœ‰è¿›ç¨‹çš„ä½¿ç”¨ç‡æ€»å’Œä¸æ˜¯åº”è¯¥æ˜¯1-idleï¼Œ90%å·¦å³å—ï¼Ÿéš¾é“æ‰€æœ‰çš„è¿›ç¨‹çš„cpuä½¿ç”¨ç‡çš„æ€»å’Œå’Œä¸Šé¢çš„ä¸æ˜¯ç›¸ç­‰çš„å—ï¼Ÿ<br><br>å¦‚æœä¸æ˜¯ç›¸ç­‰çš„ï¼Œæˆ‘è¿˜æƒ³åˆ°äº†ä¸€ç§å¯èƒ½æ˜¯: è¿›ç¨‹æ˜¾ç¤ºçš„æ˜¯æ‰€æœ‰cpuçš„ä½¿ç”¨ç‡ï¼ŒæŸä¸€ä¸ªè¿›ç¨‹çš„ä½¿ç”¨ç‡åº”è¯¥ä¼šè¶…è¿‡100%(å¦‚æœæœ‰å¤šä¸ªé€»è¾‘æ ¸å¿ƒ)ã€‚è¿˜æ˜¯ä¸åº”è¯¥å‡ºç°æ€»å’Œå°äºä¸Šé¢çš„æ€»cpuä½¿ç”¨ç‡çš„æƒ…å†µå§ï¼Ÿï¼Ÿ<br><br>å¸Œæœ›è€å¸ˆç­”ç–‘è§£æƒ‘ã€‚","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":471282,"discussion_content":"è¯·å‚è€ƒ 05 ç¯‡ï¼Œæœ‰å¯¹è¿™ä¸ªé—®é¢˜çš„è¯¦ç»†è®²è§£","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571840506,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":126009,"user_name":"çƒ¨","can_delete":false,"product_type":"c1","uid":1564897,"ip_address":"","ucode":"2844E63958EAD1","user_header":"https://static001.geekbang.org/account/avatar/00/17/e0/e1/029768f1.jpg","comment_is_top":false,"comment_ctime":1566292778,"is_pvip":false,"replies":[{"id":"47214","content":"å¯èƒ½mysqlè¿˜æ²¡åˆå§‹åŒ–å¥½ï¼Œé‡å¯ä¸€ä¸‹mysqlå®¹å™¨è¯•è¯•","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1566744033,"ip_address":"","comment_id":126009,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1566292778","product_id":100020901,"comment_content":"è€å¸ˆä½ å¥½ï¼Œmake initåä¸€ç›´æŠ¥é”™è¿ä¸ä¸Šmysqlæ˜¯ä¸ºå•¥å‘¢ï¼Ÿ<br>curl http:&#47;&#47;127.0.0.1:10000&#47;db&#47;insert&#47;products&#47;10000åæŠ¥é”™ï¼š<br>pymysql.err.OperationalError: (2003, &amp;quot;Can&#39;t connect to MySQL server on &#39;127.0.0.1&#39; ([Errno 111] Connection refused)&amp;quot;)<br>å®é™…æ˜¯èµ·æ¥äº†çš„","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463785,"discussion_content":"å¯èƒ½mysqlè¿˜æ²¡åˆå§‹åŒ–å¥½ï¼Œé‡å¯ä¸€ä¸‹mysqlå®¹å™¨è¯•è¯•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566744033,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":125454,"user_name":"é£é¸Ÿ","can_delete":false,"product_type":"c1","uid":1255192,"ip_address":"","ucode":"56434301B82BF3","user_header":"https://static001.geekbang.org/account/avatar/00/13/27/18/b70a86b0.jpg","comment_is_top":false,"comment_ctime":1566186633,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1566186633","product_id":100020901,"comment_content":"è€å¸ˆå¥½ï¼Œ æˆ‘å‰æ®µæ—¶é—´æˆ‘ä»¬ç”Ÿäº§é›†ç¾¤ é‡åˆ°è¿‡ jbd2å¼•èµ·IOè¿‡é«˜ï¼Œå¯¼è‡´kudu å¹³å‡è´Ÿè½½è¶…è½½ï¼Œä¸¥é‡å½±å“æ­£å¸¸çš„è¯»å†™ï¼Œå½“æ—¶æˆ‘å®šä½åˆ°äº†æ˜¯ jbd2å¯¼è‡´çš„ï¼Œ å¯æ˜¯æˆ‘ä¸çŸ¥æ”¹å’‹åŠï¼Œæœ€åæ— å¥ˆï¼Œåœæ‰ä½œä¸šé‡å¯äº†Kuduã€‚ å¯¹è¿™ä¸ªé—®é¢˜æˆ‘ä¸çŸ¥æ”¹å¦‚ä½•è§£å†³ï¼Œ è€å¸ˆæŒ‡ç‚¹æŒ‡ç‚¹ã€‚","like_count":0,"discussions":[{"author":{"id":1318941,"avatar":"https://static001.geekbang.org/account/avatar/00/14/20/1d/0c1a184c.jpg","nickname":"ç½—è¾‘æ€ç»´","note":"","ucode":"D257A06EDE928E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":193180,"discussion_content":"ä»Šå¤©çœ‹äº†æ€§èƒ½æµ‹è¯•å®æˆ˜30è®²ï¼š31ä¸¨æ¡ˆä¾‹ï¼šå½“ç£ç›˜å‚æ•°å¯¼è‡´I/Oé«˜çš„æ—¶å€™ï¼Œåº”è¯¥æ€ä¹ˆåŠï¼Ÿ\né‡Œé¢çš„å»ºè®®æ˜¯ç›´æ¥å…³æ‰ journal åŠŸèƒ½ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583134454,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":107409,"user_name":"Rempor","can_delete":false,"product_type":"c1","uid":1226680,"ip_address":"","ucode":"AC34D643C29A38","user_header":"https://static001.geekbang.org/account/avatar/00/12/b7/b8/37f5dadf.jpg","comment_is_top":false,"comment_ctime":1561531188,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561531188","product_id":100020901,"comment_content":"cachetop","like_count":0},{"had_liked":false,"id":75682,"user_name":"åˆ˜éŸ¦è ","can_delete":false,"product_type":"c1","uid":1423328,"ip_address":"","ucode":"7DEE07AEB11973","user_header":"https://static001.geekbang.org/account/avatar/00/15/b7/e0/5fdb9fc2.jpg","comment_is_top":false,"comment_ctime":1552448708,"is_pvip":false,"replies":[{"id":"28042","content":"docker kill","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1552748825,"ip_address":"","comment_id":75682,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552448708","product_id":100020901,"comment_content":"å®¹å™¨é‡Œé¢èµ·æ¥çš„è¿›ç¨‹ å®¹å™¨å¤–é¢ç”¨root æƒé™éƒ½æ²¡æœ‰æƒé™kill, æ˜¾ç¤ºpermission denied, ååå®¹å™¨é‡Œé¢æ²¡æœ‰kill è¿™ä¸ªå‘½ä»¤. è¿™ç§æƒ…å†µè¯¥æ€ä¹ˆåš? ç½‘ä¸Šæ²¡æ‰¾åˆ°æœ‰ç”¨çš„ä¿¡æ¯...","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442982,"discussion_content":"docker kill","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552748825,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":74734,"user_name":"å¦‚æœ","can_delete":false,"product_type":"c1","uid":1320638,"ip_address":"","ucode":"138A3EEEE50850","user_header":"","comment_is_top":false,"comment_ctime":1552288699,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552288699","product_id":100020901,"comment_content":"DAY26ï¼Œæ‰“å¡","like_count":0},{"had_liked":false,"id":71600,"user_name":"è‚˜å­å“¥","can_delete":false,"product_type":"c1","uid":1333601,"ip_address":"","ucode":"F152F3DF514117","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/ccpIPibkaTQfYbO5DGiaWpL86YSHAZfVO55WtJhjV0hb7AuyIMzLyRdLnQZ6tjB0Wars4ib7YX3fhmPh9R81MVKtA/132","comment_is_top":false,"comment_ctime":1551399818,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1551399818","product_id":100020901,"comment_content":"æ‰“å¡","like_count":0},{"had_liked":false,"id":67525,"user_name":"VIC","can_delete":false,"product_type":"c1","uid":1343938,"ip_address":"","ucode":"805246B9ABE16C","user_header":"https://static001.geekbang.org/account/avatar/00/14/81/c2/314460b8.jpg","comment_is_top":false,"comment_ctime":1550192599,"is_pvip":false,"replies":[{"id":"24036","content":"ç›´æ¥ docker pull å°±å¯ä»¥ä¸‹è½½ï¼Œæºä»£ç åœ¨ github ä¸Šé¢ï¼šhttps:&#47;&#47;github.com&#47;feiskyer&#47;linux-perf-examples","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1550325447,"ip_address":"","comment_id":67525,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1550192599","product_id":100020901,"comment_content":"è€å¸ˆï¼Œè¿™äº›dockeré•œåƒä»€ä¹ˆåœ°æ–¹ä¸‹è½½","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":439230,"discussion_content":"ç›´æ¥ docker pull å°±å¯ä»¥ä¸‹è½½ï¼Œæºä»£ç åœ¨ github ä¸Šé¢ï¼šhttps://github.com/feiskyer/linux-perf-examples","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1550325447,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":62528,"user_name":"xfan","can_delete":false,"product_type":"c1","uid":1315147,"ip_address":"","ucode":"48ED8D498D7F56","user_header":"https://static001.geekbang.org/account/avatar/00/14/11/4b/fa64f061.jpg","comment_is_top":false,"comment_ctime":1548081779,"is_pvip":false,"replies":[{"id":"22125","content":"æ£€æŸ¥ä¸‹swapinessçš„è®¾ç½®","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1548115718,"ip_address":"","comment_id":62528,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1548081779","product_id":100020901,"comment_content":"æˆ‘å¼€å¯äº†äº¤æ¢swapï¼Œå’Œå®éªŒä¸åŒçš„æ˜¯æˆ‘çš„Buffer&#47;cacheå ç”¨ä¸é«˜ï¼Œåå€’æ˜¯swapå¾ˆé«˜ã€‚è¿˜æœ‰ä¸€ä¸ªæ˜¯åŸºæœ¬æ²¡æœ‰å†™ï¼Œè¯»å¾ˆé«˜ã€‚å¥‡æ€ª","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437248,"discussion_content":"æ£€æŸ¥ä¸‹swapinessçš„è®¾ç½®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548115718,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":61703,"user_name":"å”¯ç¾","can_delete":false,"product_type":"c1","uid":1263430,"ip_address":"","ucode":"9186A5B99DFBCA","user_header":"https://static001.geekbang.org/account/avatar/00/13/47/46/61f16147.jpg","comment_is_top":false,"comment_ctime":1547777962,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1547777962","product_id":100020901,"comment_content":"æ‰“å¡Day26 <br>day day up!","like_count":0}]}