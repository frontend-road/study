{"id":351201,"title":"03 | 表：怎么创建和修改数据表？","content":"<p>你好，我是朱晓峰。今天，我们来聊一聊怎么创建和修改数据表。</p><p>创建和修改数据表，是数据存储过程中的重要一环。我们不仅需要把表创建出来，还需要正确地设置限定条件，这样才能确保数据的一致性和完整性。同时，表中的数据会随着业务需求的变化而变化，添加和修改相应的字段也是常见的操作。这节课，我们就来学习下具体的方法。</p><p>在我们的超市项目里，客户经常需要进货，这就需要在MySQL数据库里面创建一个表，来管理进货相关的数据。我们先看看这个表里有什么内容。</p><p>假设这个表叫做进货单头表（importhead），如下图所示：</p><p><img src=\"https://static001.geekbang.org/resource/image/83/ff/83c593cb7679ed5f99c29d937712c8ff.jpg?wh=3883*1057\" alt=\"\"></p><p>这里的1、2、3表示门店的3种进货方式，分别是配送中心配送、门店采买和供货商直供。</p><p>其中，“1（配送中心配送）”是标准进货方式。因为超市是连锁经营，为了确保商品质量和品类一致，超过9成的门店进货，是通过配送中心进行配送的。因此，我们希望这个字段的值能够默认是1，这样一来，除非有特别的指定，否则，门店进货单的进货方式，就自动设置成“1”了。</p><p>现在，客户需要一个类似的表来存储进货数据，而且进货方式还有3个可能的取值范围，需要设置默认值，那么，应该怎么创建这个表呢？另外，创建好表以后，又该怎么进行修改呢？</p><h2>如何创建数据表？</h2><!-- [[[read_end]]] --><p>首先，我们要知道MySQL创建表的语法结构：</p><pre><code>CREATE TABLE &lt;表名&gt;\n(\n字段名1 数据类型 [字段级别约束] [默认值]，\n字段名2 数据类型 [字段级别约束] [默认值]，\n......\n[表级别约束]\n);\n</code></pre><p>在这里，我们通过定义表名、表中的字段、表的属性等，把一张表创建出来。</p><p>你可能注意到了，在MySQL创建表的语法结构里面，有一个词叫做“约束”。<strong>“约束”限定了表中数据应该满足的条件</strong>。MySQL会根据这些限定条件，对表的操作进行监控，阻止破坏约束条件的操作执行，并提示错误，从而确保表中数据的唯一性、合法性和完整性。这是创建表时不可缺少的一部分。</p><p>下面我来带你创建刚刚提到的进货单表。需要注意的是，这里我们需要定义默认值，也就是要定义默认值约束，除此之外，还有很多种约束，一会儿我再细讲。</p><p>我们先来看基本的数据表创建流程，创建代码如下：</p><pre><code>CREATE TABLE demo.importhead\n(\nlistnumber INT,\nsupplierid INT,\nstocknumber INT,\n--我们在字段importype定义为INT类型的后面，按照MySQL创建表的语法，加了默认值1。\nimporttype INT DEFAULT 1,\nquantity DECIMAL(10,3),\nimportvalue DECIMAL(10,2),\nrecorder INT,\nrecordingdate DATETIME\n);\n</code></pre><p>运行这个SQL语句，表demo.importhead就按照我们的要求被创建出来了。</p><p>在创建表的时候，字段名称要避开MySQL的<a href=\"https://dev.mysql.com/doc/refman/8.0/en/keywords.html#keywords-removed-in-current-series\">系统关键字</a>，原因是MySQL系统保留的关键字都有特定的含义，如果作为字段名称出现在SQL语句中，MySQL会把这个字段名称理解为系统关键字，从而导致SQL语句无法正常运行。比如，刚刚我们把进货金额设置为“importvalue”，而不是“value”，就是因为，“value”是MySQL的系统关键字。</p><p>好了，现在我们尝试往刚刚创建的表里插入一条记录，来验证一下对字段“importtype”定义的默认值约束是否起了作用。</p><pre><code>INSERT INTO demo.importhead\n(\nlistnumber,\nsupplierid,\nstocknumber,\n-- 这里我们没有插入字段importtype的值\nquantity,\nimportvalue,\nrecorder,\nrecordingdate\n)\nVALUES\n(\n3456,\n1,\n1,\n10,\n100,\n1,\n'2020-12-10'\n);\n</code></pre><p>插入完成后，我们来查询一下表的内容：</p><pre><code>SELECT *\nFROM demo.importhead\n</code></pre><p>运行结果如下：</p><pre><code>mysql&gt; select * from demo.importhead;\n+------------+------------+-------------+------------+----------+-------------+----------+---------------------+\n| listnumber | supplierid | stocknumber | importtype | quantity | importvalue | recorder | recordingdate       |\n+------------+------------+-------------+------------+----------+-------------+----------+---------------------+\n|       1234 |          1 |           1 |          1 |   10.000 |      100.00 |        1 | 2020-12-10 00:00:00 |\n|       2345 |          1 |           1 |          2 |   20.000 |     2000.00 |        1 | 2020-12-10 00:00:00 |\n|       3456 |          1 |           1 |          1 |   20.000 |     2000.00 |        1 | 2020-12-10 00:00:00 |\n+------------+------------+-------------+------------+----------+-------------+----------+---------------------+\n3 rows in set (0.00 sec)\n</code></pre><p>你会发现，字段importtype的值已经是1了。这样，通过在创建表的时候设置默认值，我们就实现了将字段的默认值定义为1的目的。</p><p>到这里，表就被创建出来了。</p><h3>都有哪些约束？</h3><p>刚刚这种给字段设置默认值的做法，就是默认约束。设置了默认约束，插入数据的时候，如果不明确给字段赋值，那么系统会把设置的默认值自动赋值给字段。</p><p>除了默认约束，还有主键约束、外键约束、非空约束、唯一性约束和自增约束。</p><p>我们在<a href=\"https://time.geekbang.org/column/article/350470\">上节课</a>里学的主键，其实就是主键约束，我就不多说了。外键约束涉及表与表之间的关联，以及确保表的数据一致性的问题，内容比较多，后面我在讲“关联表”的时候，再给你具体解释。</p><p>现在，我来重点给你介绍一下非空约束、唯一性约束和自增约束。</p><p><strong>1.非空约束</strong></p><p>非空约束表示字段值不能为空，如果创建表的时候，指明某个字段非空，那么添加数据的时候，这个字段必须有值，否则系统就会提示错误。</p><p><strong>2.唯一性约束</strong></p><p>唯一性约束表示这个字段的值不能重复，否则系统会提示错误。跟主键约束相比，唯一性约束要更加弱一些。</p><p>在一个表中，我们可以指定多个字段满足唯一性约束，而主键约束则只能有一个，这也是MySQL系统决定的。另外，<strong>满足主键约束的字段，自动满足非空约束，但是满足唯一性约束的字段，则可以是空值</strong>。</p><p>为了方便你理解，我来举个例子。比如，我们有个商品信息表goodsmaster，如下所示：</p><p><img src=\"https://static001.geekbang.org/resource/image/5f/93/5f73f86c51f7b259fef9d52eaf5da893.jpg?wh=1415*703\" alt=\"\"></p><p>barcode代表条码，goodsname代表名称。为了防止条码重复，我们可以定义字段“barcode”满足唯一性约束。这样一来，条码就不能重复，但是可以为空。</p><p>同样道理，为了防止名称重复，我们也可以定义字段“goodsname”满足唯一性约束。但是，由于无论名称和条码都可能重用，或者可能为空，都不适合做主键。因此，对这个表来说，可以添加一个满足唯一性要求的新字段来做主键。</p><p><strong>3.自增约束</strong></p><p>自增约束可以让MySQL自动给字段赋值，且保证不会重复，非常有用，只是不容易用好。所以，我借助一个例子来给你具体讲一讲。</p><p>假如我们有这样一个商品信息表：</p><p><img src=\"https://static001.geekbang.org/resource/image/52/c2/524bfc84ab3555283dd981a14f2a06c2.jpg?wh=2039*1067\" alt=\"\"></p><p>从这个表中，我们可以看到，barcode、goodsname和price都不能确保唯一性，所以没有任何一个字段可以做主键，因此，我们可以自己添加一个字段itemnumber，并且每次添加一条数据的时候，要给值增加1。怎么实现呢？我们就可以通过定义自增约束的方式，让系统自动帮我们赋值，从而满足唯一性，这样就可以做主键了。</p><p><img src=\"https://static001.geekbang.org/resource/image/e0/b1/e004230d1b626e17c3822c678cb1e5b1.jpg?wh=2342*1065\" alt=\"\"></p><p>这里，有2个问题需要你注意一下。</p><p>第一，在数据表中，只有整数类型的字段（包括TINYINT、SMALLINT、MEDIUMINT、INT和BIGINT），才可以定义自增约束。自增约束的字段，每增加一条数据，值自动增加1。</p><p>第二，你可以给自增约束的字段赋值，这个时候，MySQL会重置自增约束字段的自增基数，下次添加数据的时候，自动以自增约束字段的最大值加1为新的字段值。</p><p>举个例子，我们通过Workbench把数据表demo.goodsmaster中的字段itemnumber，定义为满足自增约束，如下图所示：</p><p><img src=\"https://static001.geekbang.org/resource/image/4b/22/4bb1264e88ee558e51061e0956d13f22.png?wh=937*466\" alt=\"\"></p><p>然后，我们插入一条测试记录：</p><pre><code>INSERT INTO demo.goodsmaster\n(\nitemnumber,\nbarcode,\ngoodsname,\nspecification,\nunit,\nprice\n)\nVALUES\n(\n-- 指定商品编号为100：\n100,\n'0003',\n'测试1',\n'',\n'个',\n10\n);\n</code></pre><p>运行这条语句之后，查看表的内容，我们得到：</p><pre><code>mysql&gt; select * from demo.goodsmaster;\n+------------+---------+-----------+---------------+------+----+\n| itemnumber | barcode | goodsname | specification | unit | price |\n+------------+---------+-----------+---------------+------+-------+\n|          1 | 0001    | 书        | 16开          | 本   | 89.00 |\n|          2 | 0002    | 地图      | NULL          | 张   |  9.90 |\n|          3 | 0003    | 笔        | 10支          | 包   |  3.00 |\n|        100 | 0003    | 测试1     |               | 个   | 10.00 |\n+------------+---------+-----------+---------------+------+-------+\n4 rows in set (0.02 sec)\n</code></pre><p>这个时候，字段“itemnumber”的值不连续，最大值是我们刚刚插入的100。</p><p>接着，我们再插入一条数据：</p><pre><code>INSERT INTO demo.goodsmaster\n(\n-- 不指定自增字段itemnumber的值\nbarcode,\ngoodsname,\nspecification,\nunit,\nprice\n)\nVALUES\n(\n'0004',\n'测试2',\n'',\n'个',\n20\n);\n</code></pre><p>运行这条语句之后，我们再查看表的内容：</p><pre><code>mysql&gt; select * from demo.goodsmaster;\n+------------+---------+-----------+---------------+------+-------+\n| itemnumber | barcode | goodsname | specification | unit | price |\n+------------+---------+-----------+---------------+------+-------+\n|          1 | 0001    | 书        | 16开          | 本   | 89.00 |\n|          2 | 0002    | 地图      | NULL          | 张   |  9.90 |\n|          3 | 0003    | 笔        | 10支          | 包   |  3.00 |\n|        100 | 0003    | 测试1     |               | 个   | 10.00 |\n|        101 | 0004    | 测试2     |               | 个   | 20.00 |\n+------------+---------+-----------+---------------+------+-------+\n5 rows in set (0.00 sec)\n</code></pre><p>可以看到，系统自动给自增字段“itemnumber”，在最大值的基础之上加了1，赋值为101。</p><p>好了，到这里，我们就学会了创建表和定义约束的方法。约束要根据业务需要定义在相应的字段上，这样才能保证数据是准确的，你一定要注意它的使用方法。</p><h2>如何修改表？</h2><p>创建完表以后，我们经常还需要修改表，下面我们就来学习下修改表的方法。</p><p>在咱们的超市项目中，当我们创建新表的时候，会出现这样的情况：我们前面创建的进货单表，是用来存储进货数据的。但是，我们还要创建一个进货单历史表（importheadhist），用来存储验收过的进货数据。这个表的结构跟进货单表类似，只是多了2个字段，分别是验收人（confirmer）和验收时间（confirmdate）。针对这种情况，我们很容易想到可以通过复制表结构，然后在这个基础上通过修改表结构，来创建新的表。具体怎么实现呢？接下来，我就给你讲解一下。</p><p>首先，我们要把原来的表结构复制一下，代码如下：</p><pre><code>CREATE TABLE demo.importheadhist\nLIKE demo.importhead;\n</code></pre><p>运行这个语句之后，一个跟demo.importhead有相同表结构的空表demo.importheadhist，就被创建出来了。</p><p>这个新创建出来的表，还不是我们需要的表，我们需要对这个表进行修改，通过添加字段和修改字段，来获得我们需要的“进货单历史表”。</p><h3>添加字段</h3><p>你可能会想到，我们可以通过Workbench，用可视化操作来修改表的结构，如下图所示：</p><p><img src=\"https://static001.geekbang.org/resource/image/53/3f/537d01d3c33f8c9f804056e7795d1e3f.png?wh=986*423\" alt=\"\"></p><p>这样当然没问题，但是我想给你讲一个更方便灵活的方式：<strong>用SQL语句来修改表的结构</strong>。</p><p>现在我要给这个新的表增加2个字段：confirmer和confirmdate，就可以用下面的代码：</p><pre><code>mysql&gt; ALTER TABLE demo.importheadhist\n    -&gt; ADD confirmer INT; -- 添加一个字段confirmer，类型INT\nQuery OK, 0 rows affected (0.04 sec)\nRecords: 0  Duplicates: 0  Warnings: 0\n\nmysql&gt; ALTER TABLE demo.importheadhist\n    -&gt; ADD confirmdate DATETIME; -- 添加一个字段confirmdate，类型是DATETIME\nQuery OK, 0 rows affected (0.04 sec)\nRecords: 0  Duplicates: 0  Warnings: 0\n</code></pre><p>运行这个SQL语句，查看表的结构，你会发现，在字段的最后，多了两个字段：</p><ul>\n<li>“confirmer”，数据类型是INT；</li>\n<li>“confirmdate\"，类型是DATETIME。</li>\n</ul><p>我们来查看一下表结构：</p><pre><code>mysql&gt; DESCRIBE demo.importheadhist;\n+----------------+---------------+------+-----+---------+-------+\n| Field          | Type          | Null | Key | Default | Extra |\n+----------------+---------------+------+-----+---------+-------+\n| listnumber     | int           | NO   | PRI | NULL    |       |\n| supplierid     | int           | NO   |     | NULL    |       |\n| stocknumber    | int           | NO   |     | NULL    |       |\n| importtype     | int           | YES  |     | 1       |       |\n| quantity       | decimal(10,3) | YES  |     | NULL    |       |\n| importvalue    | decimal(10,2) | YES  |     | NULL    |       |\n| recorder       | int           | YES  |     | NULL    |       |\n| recordingdate  | datetime      | YES  |     | NULL    |       |\n| confirmer      | int           | YES  |     | NULL    |       |\n| confirmdate    | datetime      | YES  |     | NULL    |       |\n+----------------+---------------+------+-----+---------+-------+\n10 rows in set (0.02 sec)\n</code></pre><p>这样，通过简单增加2个字段，我们就获得了进货单历史表。</p><h3>修改字段</h3><p>除了添加字段，我们可能还要修改字段，比如，我们要把字段名称“quantity”改成“importquantity”，并且把字段类型改为DOUBLE，该怎么操作呢？</p><p>我们可以通过修改表结构语句ALTER TABLE，来修改字段：</p><pre><code>mysql&gt; ALTER TABLE demo.importheadhist\n    -&gt; CHANGE quantity importquantity DOUBLE;\nQuery OK, 0 rows affected (0.15 sec)\nRecords: 0  Duplicates: 0  Warnings: 0\n</code></pre><p>运行这个SQL语句，查看表的结构，我们会得到下面的结果：</p><pre><code>mysql&gt; DESCRIBE demo.importheadhist;\n+----------------+---------------+------+-----+---------+-------+\n| Field          | Type          | Null | Key | Default | Extra |\n+----------------+---------------+------+-----+---------+-------+\n| listnumber     | int           | NO   | PRI | NULL    |       |\n| supplierid     | int           | NO   |     | NULL    |       |\n| stocknumber    | int           | NO   |     | NULL    |       |\n| importtype     | int           | YES  |     | 1       |       |\n| importquantity | double        | YES  |     | NULL    |       |\n| importvalue    | decimal(10,2) | YES  |     | NULL    |       |\n| recorder       | int           | YES  |     | NULL    |       |\n| recordingdate  | datetime      | YES  |     | NULL    |       |\n| confirmer      | int           | YES  |     | NULL    |       |\n| confirmdate    | datetime      | YES  |     | NULL    |       |\n+----------------+---------------+------+-----+---------+-------+\n10 rows in set (0.02 sec)\n</code></pre><p>可以看到，字段名称和字段类型全部都改过来了。</p><p>如果你不想改变字段名称，只想改变字段类型，例如，把字段“importquantity”类型改成DECIMAL(10,3)，你可以这样写：</p><pre><code>ALTER TABLE demo.importheadhist\nMODIFY importquantity DECIMAL(10,3);\n</code></pre><p>运行SQL语句，查看表结构，你会发现，已经改过来了。</p><pre><code>mysql&gt; DESCRIBE demo.importheadhist;\n+----------------+---------------+------+-----+---------+-------+\n| Field          | Type          | Null | Key | Default | Extra |\n+----------------+---------------+------+-----+---------+-------+\n| listnumber     | int           | NO   | PRI | NULL    |       |\n| supplierid     | int           | NO   |     | NULL    |       |\n| stocknumber    | int           | NO   |     | NULL    |       |\n| importtype     | int           | YES  |     | 1       |       |\n| importquantity | decimal(10,3) | YES  |     | NULL    |       |\n| importvalue    | decimal(10,2) | YES  |     | NULL    |       |\n| recorder       | int           | YES  |     | NULL    |       |\n| recordingdate  | datetime      | YES  |     | NULL    |       |\n| confirmer      | int           | YES  |     | NULL    |       |\n| confirmdate    | datetime      | YES  |     | NULL    |       |\n+----------------+---------------+------+-----+---------+-------+\n10 rows in set (0.02 sec)\n</code></pre><p>我们还可以通过SQL语句<strong>向表中添加一个字段</strong>，我们甚至可以指定添加字段在表中的位置。</p><p>比如说，在字段supplierid之后，添加一个字段suppliername，数据类型是TEXT。我们可以这样写SQL语句：</p><pre><code>ALTER TABLE demo.importheadhist\nADD suppliername TEXT AFTER supplierid;\n</code></pre><p>运行SQL语句，查看表结构：</p><pre><code>mysql&gt; DESCRIBE demo.importheadhist;\n+----------------+---------------+------+-----+---------+-------+\n| Field          | Type          | Null | Key | Default | Extra |\n+----------------+---------------+------+-----+---------+-------+\n| listnumber     | int           | NO   | PRI | NULL    |       |\n| supplierid     | int           | NO   |     | NULL    |       |\n| suppliername   | text          | YES  |     | NULL    |       |\n| stocknumber    | int           | NO   |     | NULL    |       |\n| importtype     | int           | YES  |     | 1       |       |\n| importquantity | decimal(10,3) | YES  |     | NULL    |       |\n| importvalue    | decimal(10,2) | YES  |     | NULL    |       |\n| recorder       | int           | YES  |     | NULL    |       |\n| recordingdate  | datetime      | YES  |     | NULL    |       |\n| confirmer      | int           | YES  |     | NULL    |       |\n| confirmdate    | datetime      | YES  |     | NULL    |       |\n+----------------+---------------+------+-----+---------+-------+\n11 rows in set (0.02 sec)\n</code></pre><p>到这里，我们就完成了修改字段在表中位置的操作。</p><h2>总结</h2><p>这节课，我们学习了创建和修改数据表的具体方法。在讲创建表时，我讲到了一个重要的概念，就是约束，包括默认约束、非空约束、唯一性约束和自增约束等。</p><ul>\n<li>默认值约束：就是给字段设置一个默认值。</li>\n<li>非空约束：就是声明字段不能为空值。</li>\n<li>唯一性约束：就是声明字段不能重复。</li>\n<li>自增约束：就是声明字段值能够自动加1，且不会重复。</li>\n</ul><p>在修改表时，我们可以通过修改已经存在的表创建新表，也可以通过添加字段、修改字段的方式来修改数据表。</p><p>最后，我给你汇总了一些常用的创建表的SQL语句，你一定要牢记。</p><pre><code>CREATE TABLE\n(\n字段名 字段类型 PRIMARY KEY\n);\nCREATE TABLE\n(\n字段名 字段类型 NOT NULL\n);\nCREATE TABLE\n(\n字段名 字段类型 UNIQUE\n);\nCREATE TABLE\n(\n字段名 字段类型 DEFAULT 值\n);\n-- 这里要注意自增类型的条件，字段类型必须是整数类型。\nCREATE TABLE\n(\n字段名 字段类型 AUTO_INCREMENT\n);\n-- 在一个已经存在的表基础上，创建一个新表\nCREATE TABLE demo.importheadhist LIKE demo.importhead;\n-- 修改表的相关语句\nALTER TABLE 表名 CHANGE 旧字段名 新字段名 数据类型;\nALTER TABLE 表名 ADD COLUMN 字段名 字段类型 FIRST|AFTER 字段名;\nALTER TABLE 表名 MODIFY 字段名 字段类型 FIRST|AFTER 字段名;\n</code></pre><p>对于初学者来说，掌握了今天的内容，就足够对数据表进行操作了。不过，MySQL支持的数据表操作不只这些，我来举几个简单的小例子，你可以了解一下，有个印象。</p><p>比如，你可以在表一级指定表的存储引擎：</p><pre><code>ALTER TABLE 表名 ENGINE=INNODB;\n</code></pre><p>你还可以通过指定关键字AUTO_EXTENDSIZE，来指定存储文件自增空间的大小，从而提高存储空间的利用率。</p><p>在MySQL 8.0.23之后的版本中，你甚至还可以通过INVISIBLE关键字，使字段不可见，但却可以使用。</p><p>如果你想了解更多有关数据表的操作，我也给你提供两份资料：<a href=\"https://dev.mysql.com/doc/refman/8.0/en/create-table.html\">MySQL创建表文档</a>和<a href=\"https://dev.mysql.com/doc/refman/8.0/en/alter-table.html\">MySQL修改表文档</a>。这些都是MySQL的官方文档，相信会对你有所帮助。</p><h2>思考题</h2><p>请你写一个SQL语句，将表demo.goodsmaster中的字段“salesprice”改成不能重复，并且不能为空。</p><p>欢迎在留言区写下你的思考和答案，我们一起交流讨论。如果你觉得今天的内容对你有所帮助，欢迎你把它分享给你的朋友或同事，我们下节课见。</p>","neighbors":{"left":{"article_title":"02 | 字段：这么多字段类型，该怎么定义？","id":350470},"right":{"article_title":"04 | 增删改查：如何操作表中的数据？","id":351225}},"comments":[{"had_liked":false,"id":285748,"user_name":"朱晓峰","can_delete":false,"product_type":"c1","uid":2356905,"ip_address":"","ucode":"D2F84F44329C29","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","comment_is_top":true,"comment_ctime":1617001228,"is_pvip":false,"discussion_count":5,"race_medal":0,"score":"9.2233720728315003e+18","product_id":100073201,"comment_content":"你好，我是朱晓峰，下面我就来公布一下上节课思考题的答案：<br><br>上节课，我们学习了MySQL中的字段类型，包括整数类型、浮点数和定点数类型、文本类型、日期和时间类型等。下面是思考题的答案：<br> <br>CREATE TABLE demo.membermaster<br>(<br>      memberid INT PRIMARY KEY,<br>      membername TEXT,<br>      memberphone TEXT,<br>      memberpoints INT<br>);","like_count":8,"discussions":[{"author":{"id":1007405,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5f/2d/d294a2d2.jpg","nickname":"nzb","note":"","ucode":"2CAE41EDB5C910","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":387604,"discussion_content":"我觉得这样建超表很有争议没有按照实际业务来，我们的表是服务业务的，\n1 首先会员名称用TEXT不合理，因为压根不可能有这么长的名称，一般会员名称也不会这么长，当然也不排除可能过长，因为按照人的习惯名称都是简单易理解\n2 手机号为啥不用数字类型，这个好处就是从入库操作就能限制手机号一定的合理性，不能输入非法字符\n最后强调一点，一般业务中很少使用TEXT类型，Text类型使用的话，都是需要仔细考虑的，一般公司的DBA都不建议使用的，我们设计表的时候更多还是需要根据业务来","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1628299537,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1862885,"avatar":"","nickname":"杨丽南","note":"","ucode":"51B9926D6BE429","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":378870,"discussion_content":"会员卡编号我觉得用text类型更灵活一些，可以加入字母。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1623473585,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2775127,"avatar":"","nickname":"Geek_e43e33","note":"","ucode":"8FE09B5E0A4C3D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1862885,"avatar":"","nickname":"杨丽南","note":"","ucode":"51B9926D6BE429","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":411426,"discussion_content":"赞成","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635925966,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":378870,"ip_address":""},"score":411426,"extra":""}]},{"author":{"id":1274067,"avatar":"https://static001.geekbang.org/account/avatar/00/13/70/d3/6e62cad5.jpg","nickname":"安洪旭真好","note":"","ucode":"FCC8AD4CE390D6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":379251,"discussion_content":"老师我想请教一下。为什么这个手机号码 没有使用 int呢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623771407,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2775127,"avatar":"","nickname":"Geek_e43e33","note":"","ucode":"8FE09B5E0A4C3D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1274067,"avatar":"https://static001.geekbang.org/account/avatar/00/13/70/d3/6e62cad5.jpg","nickname":"安洪旭真好","note":"","ucode":"FCC8AD4CE390D6","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":411427,"discussion_content":"手机号11位，感觉用int不太合适。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635925993,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":379251,"ip_address":""},"score":411427,"extra":""}]}]},{"had_liked":false,"id":283320,"user_name":"yaomon","can_delete":false,"product_type":"c1","uid":1121557,"ip_address":"","ucode":"4742547EB92BCE","user_header":"https://static001.geekbang.org/account/avatar/00/11/1d/15/8ad4e24a.jpg","comment_is_top":false,"comment_ctime":1615705038,"is_pvip":false,"replies":[{"id":"104966","content":"十分感谢你的指正，这个地方是我疏忽了。唯一性约束，如果允许为空，可以有多个空值。我已经申请后台帮我修改了。","user_name":"作者回复","user_name_real":"朱晓峰","uid":"2356905","ctime":1618992267,"ip_address":"","comment_id":283320,"utype":1}],"discussion_count":1,"race_medal":0,"score":"48860345294","product_id":100073201,"comment_content":"我们可以定义字段“barcode”满足唯一性约束。这样一来，条码就不能重复，但是可以为空，而且只能有一条记录条码为空。<br>-------------<br>null和任何值不相等，包括null，所以不是可以有多条记录都是null值吗，是8.0规则变了？","like_count":12,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"朱晓峰","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":516994,"discussion_content":"十分感谢你的指正，这个地方是我疏忽了。唯一性约束，如果允许为空，可以有多个空值。我已经申请后台帮我修改了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618992267,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":283168,"user_name":"lesserror","can_delete":false,"product_type":"c1","uid":1351076,"ip_address":"","ucode":"25A54D1165FCF6","user_header":"https://static001.geekbang.org/account/avatar/00/14/9d/a4/e481ae48.jpg","comment_is_top":false,"comment_ctime":1615604299,"is_pvip":false,"replies":[{"id":"103656","content":"感谢你的提醒，CREATE语句确实少了TABLE关键字，我已经改过来了。我会尽快吧思考题的答案发布一下，方便大家学习。","user_name":"作者回复","user_name_real":"朱晓峰","uid":"2356905","ctime":1616979061,"ip_address":"","comment_id":283168,"utype":1}],"discussion_count":1,"race_medal":0,"score":"40270309963","product_id":100073201,"comment_content":"朱老师，周末好。<br><br>表 demo.importhead中插入数据的时候，SQL语句是不是少了两条插入记录？文稿中你查询出来的是三条记录。<br><br>复制表结构这个语句：CREATE demo.importheadhist LIKE demo.importhead; 我本地操作会报错，少了一个「TABLE」关键字。应该是：CREATE TABLE demo.importheadhist LIKE demo.importhead。<br><br>另外，上节课的思考题答案老师按照惯例，麻烦评论区给出一下。方便学习的同学做一个参考呗。","like_count":9,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"朱晓峰","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":516950,"discussion_content":"感谢你的提醒，CREATE语句确实少了TABLE关键字，我已经改过来了。我会尽快吧思考题的答案发布一下，方便大家学习。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616979061,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":284964,"user_name":"Jun","can_delete":false,"product_type":"c1","uid":1608959,"ip_address":"","ucode":"48B7D8DDAE9CB6","user_header":"https://static001.geekbang.org/account/avatar/00/18/8c/ff/9edc274f.jpg","comment_is_top":false,"comment_ctime":1616563635,"is_pvip":false,"replies":[{"id":"103398","content":"有的，超市有生鲜，会有小数的","user_name":"作者回复","user_name_real":"朱晓峰","uid":"2356905","ctime":1616599207,"ip_address":"","comment_id":284964,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18796432819","product_id":100073201,"comment_content":"想请教一下老师，为什么 importquantity 用decimal 而不是int,难道进货数量会有小数吗？","like_count":5,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"朱晓峰","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":517528,"discussion_content":"有的，超市有生鲜，会有小数的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616599207,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":283400,"user_name":"右耳朵猫咪","can_delete":false,"product_type":"c1","uid":1014984,"ip_address":"","ucode":"3AB186CC780FBB","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7c/c8/8627f5c1.jpg","comment_is_top":false,"comment_ctime":1615768181,"is_pvip":true,"replies":[{"id":"103662","content":"命名规则应该统一，便于理解和书写。比如listnumber，拆分成list_number，我认为意义不大，因为意思比较单一。","user_name":"作者回复","user_name_real":"朱晓峰","uid":"2356905","ctime":1616981199,"ip_address":"","comment_id":283400,"utype":1}],"discussion_count":3,"race_medal":0,"score":"18795637365","product_id":100073201,"comment_content":"老师好，创建表字段的时候是不是应该把多个单词用下划线分开比较好？比如，listnumber改成list_number。","like_count":4,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"朱晓峰","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":517020,"discussion_content":"命名规则应该统一，便于理解和书写。比如listnumber，拆分成list_number，我认为意义不大，因为意思比较单一。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616981199,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1101007,"avatar":"https://static001.geekbang.org/account/avatar/00/10/cc/cf/1c19ad6d.jpg","nickname":"陈启年","note":"","ucode":"EE34FC76AE3C9B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":358246,"discussion_content":"我也想问这个问题，使用常见的“驼峰、下划线、匈牙利”是不是比纯小写更加好？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615951885,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1608959,"avatar":"https://static001.geekbang.org/account/avatar/00/18/8c/ff/9edc274f.jpg","nickname":"Jun","note":"","ucode":"48B7D8DDAE9CB6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1101007,"avatar":"https://static001.geekbang.org/account/avatar/00/10/cc/cf/1c19ad6d.jpg","nickname":"陈启年","note":"","ucode":"EE34FC76AE3C9B","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":360946,"discussion_content":"是的。但是要保持一致，或者都是驼峰，或者都是下划线，全是小写，看起来太费劲了。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1616563500,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":358246,"ip_address":""},"score":360946,"extra":""}]}]},{"had_liked":false,"id":283296,"user_name":"王坤祥","can_delete":false,"product_type":"c1","uid":1003327,"ip_address":"","ucode":"FB988B9F381A33","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4f/3f/6f62f982.jpg","comment_is_top":false,"comment_ctime":1615696528,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14500598416","product_id":100073201,"comment_content":"goodsmaster表结构里面突然就多出几个字段，导致插入失败。另外，复制表结构的语句也有问题。<br><br>跟其他那些优秀的课程还有一点差距。","like_count":4},{"had_liked":false,"id":298986,"user_name":"张成虎","can_delete":false,"product_type":"c1","uid":2548561,"ip_address":"","ucode":"8AC3029D4AB5FA","user_header":"","comment_is_top":false,"comment_ctime":1624416145,"is_pvip":false,"replies":[{"id":"110378","content":"change 可以修改字段名称，modify 只能修改字段属性。这里的思考题没有要求修改字段名称，所以用modify也是可以的。我这里用到change，主要是因为change的功能更强大一些，所以凡是涉及到修改字段的地方，都用change，比较容易书写和维护。","user_name":"作者回复","user_name_real":"朱晓峰","uid":"2356905","ctime":1627869773,"ip_address":"","comment_id":298986,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10214350737","product_id":100073201,"comment_content":"老师好，思考题并没有修改字段名称，为什么用的是change，不用modify？","like_count":2,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"朱晓峰","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":522303,"discussion_content":"change 可以修改字段名称，modify 只能修改字段属性。这里的思考题没有要求修改字段名称，所以用modify也是可以的。我这里用到change，主要是因为change的功能更强大一些，所以凡是涉及到修改字段的地方，都用change，比较容易书写和维护。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1627869773,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":283135,"user_name":"星空下","can_delete":false,"product_type":"c1","uid":1183639,"ip_address":"","ucode":"473643B567674A","user_header":"https://static001.geekbang.org/account/avatar/00/12/0f/97/372d8628.jpg","comment_is_top":false,"comment_ctime":1615565900,"is_pvip":false,"replies":[{"id":"103650","content":"在实践中学习，记得牢","user_name":"作者回复","user_name_real":"朱晓峰","uid":"2356905","ctime":1616978728,"ip_address":"","comment_id":283135,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10205500492","product_id":100073201,"comment_content":"这节好实用，都是开发中在用的操作","like_count":2,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"朱晓峰","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":516942,"discussion_content":"在实践中学习，记得牢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616978728,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":306278,"user_name":"momoko","can_delete":false,"product_type":"c1","uid":1145686,"ip_address":"","ucode":"0D736E46BA4728","user_header":"https://static001.geekbang.org/account/avatar/00/11/7b/56/cef0f48f.jpg","comment_is_top":false,"comment_ctime":1628483054,"is_pvip":false,"replies":[{"id":"112617","content":"请参考思考题答案","user_name":"作者回复","user_name_real":"朱晓峰","uid":"2356905","ctime":1630912753,"ip_address":"","comment_id":306278,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5923450350","product_id":100073201,"comment_content":"ALTER demo.goodsmaster modify salesprice DECIMAL(10,3) UNIQUE NOT NULL;<br>","like_count":1,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"朱晓峰","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":524699,"discussion_content":"请参考思考题答案","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630912753,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":283771,"user_name":"giteebravo","can_delete":false,"product_type":"c1","uid":1005290,"ip_address":"","ucode":"C087E8D6B5A98B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/56/ea/32608c44.jpg","comment_is_top":false,"comment_ctime":1615910930,"is_pvip":false,"discussion_count":1,"race_medal":1,"score":"5910878226","product_id":100073201,"comment_content":"change 和 first&#47;after 学习了","like_count":1,"discussions":[{"author":{"id":1473953,"avatar":"https://static001.geekbang.org/account/avatar/00/16/7d/a1/d03c445b.jpg","nickname":"熊猫拍板砖","note":"","ucode":"C0F4BBE4AE5C88","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":359619,"discussion_content":"就first 和 after我查了半天，最终我悟了， 原来是 first 和 after 字段名，first后面不跟任何东西","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1616241711,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":283397,"user_name":"小鱼干","can_delete":false,"product_type":"c1","uid":1047134,"ip_address":"","ucode":"74C59DA5181880","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fa/5e/d7331a3e.jpg","comment_is_top":false,"comment_ctime":1615765163,"is_pvip":false,"replies":[{"id":"103661","content":"int 后面指定的那个数字表示显示的位数，与实际存储空间无关，比如int(4)，表示显示4位，如果不足4位，在左边用空格补齐。","user_name":"作者回复","user_name_real":"朱晓峰","uid":"2356905","ctime":1616980920,"ip_address":"","comment_id":283397,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5910732459","product_id":100073201,"comment_content":"int类型，不写字段大小和写字段大小实际存储是一样吗","like_count":1,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"朱晓峰","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":517018,"discussion_content":"int 后面指定的那个数字表示显示的位数，与实际存储空间无关，比如int(4)，表示显示4位，如果不足4位，在左边用空格补齐。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1616980920,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1922661,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/56/65/fa4437d7.jpg","nickname":"Wonderfulpeng","note":"","ucode":"1BA9AB30B52159","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":360100,"discussion_content":"也有同样的疑问","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616371598,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":351146,"user_name":"不管","can_delete":false,"product_type":"c1","uid":1094549,"ip_address":"","ucode":"49C35544E8A6D7","user_header":"https://static001.geekbang.org/account/avatar/00/10/b3/95/77f5aa52.jpg","comment_is_top":false,"comment_ctime":1657548811,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1657548811","product_id":100073201,"comment_content":"怎么没有介绍提到的各种约束怎么写，能不能加个示例","like_count":0},{"had_liked":false,"id":348317,"user_name":"一步","can_delete":false,"product_type":"c1","uid":1005391,"ip_address":"","ucode":"73CEA468CE70C3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","comment_is_top":false,"comment_ctime":1654955409,"is_pvip":true,"discussion_count":0,"race_medal":1,"score":"1654955409","product_id":100073201,"comment_content":"表中的字段顺序 有什么作用的？ 比如创建表的时候指定字段顺序 或者  add column 时候 after ","like_count":0},{"had_liked":false,"id":337493,"user_name":"shk1230","can_delete":false,"product_type":"c1","uid":1701572,"ip_address":"","ucode":"9E39279C23FF8F","user_header":"https://static001.geekbang.org/account/avatar/00/19/f6/c4/e14686d4.jpg","comment_is_top":false,"comment_ctime":1646852558,"is_pvip":true,"replies":[{"id":"123509","content":"请参考思考题答案","user_name":"作者回复","user_name_real":"编辑","uid":"2356905","ctime":1647077182,"ip_address":"","comment_id":337493,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1646852558","product_id":100073201,"comment_content":"思考题： 请你写一个 SQL 语句，将表 demo.goodsmaster 中的字段“salesprice”改成不能重复，并且不能为空。<br>答案：alter table demo.goodsmaster<br>modify salesprice DECIMAL(5,2) not null unique;","like_count":0,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"朱晓峰","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":555829,"discussion_content":"请参考思考题答案","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647077182,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":333365,"user_name":"SharpBB","can_delete":false,"product_type":"c1","uid":2014573,"ip_address":"","ucode":"D30C5B798B8E8C","user_header":"https://static001.geekbang.org/account/avatar/00/1e/bd/6d/7010f98e.jpg","comment_is_top":false,"comment_ctime":1644311496,"is_pvip":true,"replies":[{"id":"123485","content":"好的","user_name":"作者回复","user_name_real":"编辑","uid":"2356905","ctime":1647075297,"ip_address":"","comment_id":333365,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1644311496","product_id":100073201,"comment_content":"笔记来了<br><br>1.如何创建数据表<br>\t建表语法<br>\tdefault 可以设置默认值 该字段如果不填即为默认值<br>2.约束<br>\t主键约束<br>\t\t一个表只能有一个 且字段值不能重复 不能为空 约束最强<br>\t\tps:主键确实只有一个 但是可以有多个字段 被称之为联合主键<br>\t非空约束<br>\t\t必须有值 否则报错<br>\t唯一性约束<br>\t\t字段值不能重复 可以为空  可以有多个字段有唯一性约束<br>\t自增约束<br>\t\t只有整型字段才能有自增约束<br>\t\t新增字段的值为最大值+1<br>3.修改表<br>\t复制表<br>\t\tcreate 库名.新表名 like 库名.被复制的表名;<br>\t增加表字段<br>\t\talter table &lt;库名.表名&gt; add &lt;字段&gt; &lt;类型&gt;<br>\t\t\t如 alter table test.user add id int;<br>\t\t在开头添加某字段<br>\t\t\talter table test.user add id int first;<br>\t\t在某个字段的后面添加<br>\t\t\t如 alter table test.user add id int after name;<br>\t修改表字段<br>\t\talter table &lt;库名.表名&gt; change &lt;旧字段&gt; &lt;新字段&gt; &lt;类型&gt;<br>\t\t\t如 alter table test,user change id uid bigint;<br>\t\t只改变字段类型<br>\t\t\t如 alter table test,user modify id int;","like_count":0,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"朱晓峰","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":555798,"discussion_content":"好的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647075297,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":333363,"user_name":"SharpBB","can_delete":false,"product_type":"c1","uid":2014573,"ip_address":"","ucode":"D30C5B798B8E8C","user_header":"https://static001.geekbang.org/account/avatar/00/1e/bd/6d/7010f98e.jpg","comment_is_top":false,"comment_ctime":1644311305,"is_pvip":true,"replies":[{"id":"123484","content":"请参考思考题答案","user_name":"作者回复","user_name_real":"编辑","uid":"2356905","ctime":1647075284,"ip_address":"","comment_id":333363,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1644311305","product_id":100073201,"comment_content":"思考题：<br>alter table demo.goodsmaster modify price decimal(5,2) not null unique;<br>似乎一定要加个类型才能更改<br>","like_count":0,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"朱晓峰","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":555797,"discussion_content":"请参考思考题答案","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647075285,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":310904,"user_name":"彭彬","can_delete":false,"product_type":"c1","uid":2680555,"ip_address":"","ucode":"5AF4F4D7163DFE","user_header":"https://static001.geekbang.org/account/avatar/00/28/e6/eb/7b7c0101.jpg","comment_is_top":false,"comment_ctime":1630978270,"is_pvip":false,"replies":[{"id":"113745","content":"请参考思考题答案","user_name":"作者回复","user_name_real":"朱晓峰","uid":"2356905","ctime":1632798817,"ip_address":"","comment_id":310904,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1630978270","product_id":100073201,"comment_content":"alter table emo.goodsmaster modify salesprice unique<br>alter table emo.goodsmaster modify salesprice not null","like_count":0,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"朱晓峰","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526394,"discussion_content":"请参考思考题答案","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632798817,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":309298,"user_name":"Geek_48e778","can_delete":false,"product_type":"c1","uid":2033337,"ip_address":"","ucode":"8621DCB8B65CBB","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epJT1bQ1le38EPpPpYVPn1jreNWRl4lVVQdMXe7bibwhohicEH46KVUteaic3JJKUJph9ZPgOwDfOE6Q/132","comment_is_top":false,"comment_ctime":1630035335,"is_pvip":false,"replies":[{"id":"113727","content":"请参考思考题答案","user_name":"作者回复","user_name_real":"朱晓峰","uid":"2356905","ctime":1632797433,"ip_address":"","comment_id":309298,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1630035335","product_id":100073201,"comment_content":"goodsmaster表没有salesprice字段，先增加一个：<br>ALTER TABLE demo.goodsmaster ADD COLUMN selasprice DECIMAL(9,2) AFTER price;<br>然后修改约束条件：<br>ALTER TABLE demo.goodsmaster modify salesprice DECIMAL(9,2) UNIQUE NOT NULL;","like_count":0,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"朱晓峰","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":525816,"discussion_content":"请参考思考题答案","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632797433,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":306011,"user_name":"nzb","can_delete":false,"product_type":"c1","uid":1007405,"ip_address":"","ucode":"2CAE41EDB5C910","user_header":"https://static001.geekbang.org/account/avatar/00/0f/5f/2d/d294a2d2.jpg","comment_is_top":false,"comment_ctime":1628300215,"is_pvip":false,"replies":[{"id":"112616","content":"还是要从实际情况出发。在这个项目中，超市商品的配送方式的默认值，设置成绝大多数商品都遵从的配送方式，可以降低超市的运营成本。","user_name":"作者回复","user_name_real":"朱晓峰","uid":"2356905","ctime":1630912736,"ip_address":"","comment_id":306011,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1628300215","product_id":100073201,"comment_content":"默认值设置我认为是有争议的，一般默认值设置都是不建议设置成有意义的值，文中直接将默认值设置为有意义的值是值得商榷的","like_count":0,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"朱晓峰","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":524595,"discussion_content":"还是要从实际情况出发。在这个项目中，超市商品的配送方式的默认值，设置成绝大多数商品都遵从的配送方式，可以降低超市的运营成本。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630912736,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":305769,"user_name":"Geek_2173a7","can_delete":false,"product_type":"c1","uid":2722713,"ip_address":"","ucode":"AE0A12BB1DFF04","user_header":"","comment_is_top":false,"comment_ctime":1628153760,"is_pvip":false,"replies":[{"id":"112613","content":"请参考思考题答案","user_name":"作者回复","user_name_real":"朱晓峰","uid":"2356905","ctime":1630910132,"ip_address":"","comment_id":305769,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1628153760","product_id":100073201,"comment_content":"ALTER TABLE demo.goodsmaste MODIFY salesprice NOT NULL UNIQUE;","like_count":0,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"朱晓峰","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":524507,"discussion_content":"请参考思考题答案","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630910132,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":303037,"user_name":"Darren","can_delete":false,"product_type":"c1","uid":1711277,"ip_address":"","ucode":"D288B0C23F39CD","user_header":"https://static001.geekbang.org/account/avatar/00/1a/1c/ad/032403fd.jpg","comment_is_top":false,"comment_ctime":1626533791,"is_pvip":true,"replies":[{"id":"110395","content":"这是因为员工表中的主键是INT类型，为了方便关联，所以使用相同的数据类型","user_name":"作者回复","user_name_real":"朱晓峰","uid":"2356905","ctime":1627874235,"ip_address":"","comment_id":303037,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1626533791","product_id":100073201,"comment_content":"老师您好，增加的字段confirmer类型为什么是 INT ，不是TEXT，是因为超市确认人是使用工号不是名字是吗","like_count":0,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"朱晓峰","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":523525,"discussion_content":"这是因为员工表中的主键是INT类型，为了方便关联，所以使用相同的数据类型","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627874235,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":299998,"user_name":"born","can_delete":false,"product_type":"c1","uid":1164840,"ip_address":"","ucode":"3F097B2EE52478","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLzJr3dmr96ULaeQQJrslQcSZfH8fwPug8q42Y69q0daYarUbx1b0U1iadjcTtOmUicDnlx968SLLkw/132","comment_is_top":false,"comment_ctime":1624950709,"is_pvip":false,"replies":[{"id":"110380","content":"加上“column”可以增加代码的可读性。","user_name":"作者回复","user_name_real":"朱晓峰","uid":"2356905","ctime":1627870131,"ip_address":"","comment_id":299998,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1624950709","product_id":100073201,"comment_content":"字段操作中添加和省略“column”关键字有啥区别？","like_count":0,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"朱晓峰","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":522609,"discussion_content":"加上“column”可以增加代码的可读性。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627870131,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":296188,"user_name":"熟悉已陌生","can_delete":false,"product_type":"c1","uid":1345483,"ip_address":"","ucode":"70125896CBC827","user_header":"https://static001.geekbang.org/account/avatar/00/14/87/cb/23e01234.jpg","comment_is_top":false,"comment_ctime":1622798114,"is_pvip":false,"replies":[{"id":"107711","content":"这是个好办法，文稿中为了说明方便，进行了简化。","user_name":"作者回复","user_name_real":"朱晓峰","uid":"2356905","ctime":1623061751,"ip_address":"","comment_id":296188,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1622798114","product_id":100073201,"comment_content":"进货方式 1、2、3 表示门店的 3 种，分别是配送中心配送、门店采买和供货商直供，这种的按照实际项目场景中，应该存放字典表中，便于维护","like_count":0,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"朱晓峰","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":521355,"discussion_content":"这是个好办法，文稿中为了说明方便，进行了简化。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623061751,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":295650,"user_name":"时光过客","can_delete":false,"product_type":"c1","uid":2481050,"ip_address":"","ucode":"B4EBA23017D65B","user_header":"https://static001.geekbang.org/account/avatar/00/25/db/9a/1c827ac9.jpg","comment_is_top":false,"comment_ctime":1622530350,"is_pvip":false,"replies":[{"id":"107699","content":"change可以修改字段名称，modify不行","user_name":"作者回复","user_name_real":"朱晓峰","uid":"2356905","ctime":1623059284,"ip_address":"","comment_id":295650,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1622530350","product_id":100073201,"comment_content":"老师，对于表字段的更改，能描述一下，modify与change的区别吗？","like_count":0,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"朱晓峰","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":521169,"discussion_content":"change可以修改字段名称，modify不行","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1623059284,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2481050,"avatar":"https://static001.geekbang.org/account/avatar/00/25/db/9a/1c827ac9.jpg","nickname":"时光过客","note":"","ucode":"B4EBA23017D65B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":378227,"discussion_content":"收到，谢谢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623119825,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":292152,"user_name":"Aven","can_delete":false,"product_type":"c1","uid":1066230,"ip_address":"","ucode":"E2B1D0B57F18D1","user_header":"https://static001.geekbang.org/account/avatar/00/10/44/f6/60f948e1.jpg","comment_is_top":false,"comment_ctime":1620704426,"is_pvip":true,"replies":[{"id":"106532","content":"问题1，在设定数据类型的时候，就要考虑到溢出的问题，比如使用INT作为自增字段的数据类型，主要是考虑到INT的范围足够大，在可预见的未来溢出的风险很小。<br>问题2，可以考虑增加一个新的字段，用新的字段名，暂时保留老字段，等确认没有问题再把老的字段删除","user_name":"作者回复","user_name_real":"朱晓峰","uid":"2356905","ctime":1621566952,"ip_address":"","comment_id":292152,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1620704426","product_id":100073201,"comment_content":"老师，我有两个问题：<br>1.当讲到自增的时候，往往会不会由于这种特性的易用性，而忽略其无限制增长乃至最后溢出呢，这个是否需要一定的监控机制，或者有什么办法吗？比如有个字段是“编号”，int类型，那么不断自增，早晚会超过int类型的最大值<br>2.修改数据库中的字段这种方式，在应对线上应用正在运行的情况，应该如何应对呢，比如线上商店应用正在运行中，这时候有个需求，正好需要修改某个字段名，那肯定应用也需要配合同步修改，这种情况有什么好的应对方案吗","like_count":0,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"朱晓峰","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":519703,"discussion_content":"问题1，在设定数据类型的时候，就要考虑到溢出的问题，比如使用INT作为自增字段的数据类型，主要是考虑到INT的范围足够大，在可预见的未来溢出的风险很小。\n问题2，可以考虑增加一个新的字段，用新的字段名，暂时保留老字段，等确认没有问题再把老的字段删除","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621566952,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":288272,"user_name":"lleft","can_delete":false,"product_type":"c1","uid":1970443,"ip_address":"","ucode":"D573EB509455AE","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIx1V1QAxC4NHaxYZGyuibBN8lcURJWc5nrnO4yic1kxnDemYV2FJGialf47kYX9qtDnZZOfe1SJeLicg/132","comment_is_top":false,"comment_ctime":1618388617,"is_pvip":false,"replies":[{"id":"106405","content":"参见思考题答案","user_name":"作者回复","user_name_real":"朱晓峰","uid":"2356905","ctime":1621504678,"ip_address":"","comment_id":288272,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1618388617","product_id":100073201,"comment_content":"思考题：<br>alter table demo.goodsmaster modify salesprice decimal(10,3) not null, add unique key(salesprice);","like_count":0,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"朱晓峰","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518566,"discussion_content":"参见思考题答案","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621504678,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":287923,"user_name":"floating","can_delete":false,"product_type":"c1","uid":1834974,"ip_address":"","ucode":"6E701A24805A00","user_header":"https://static001.geekbang.org/account/avatar/00/1b/ff/de/075d2c8e.jpg","comment_is_top":false,"comment_ctime":1618216907,"is_pvip":false,"replies":[{"id":"106400","content":"请参考公布的答案","user_name":"作者回复","user_name_real":"朱晓峰","uid":"2356905","ctime":1621504444,"ip_address":"","comment_id":287923,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1618216907","product_id":100073201,"comment_content":"思考题答案：<br><br>alter table demo.goodsmaster modify salesprice decimal(10,3) not null<br>alter table demo.goodsmaster add unique(salesprice);","like_count":0,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"朱晓峰","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518460,"discussion_content":"请参考公布的答案","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621504444,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":284809,"user_name":"小白","can_delete":false,"product_type":"c1","uid":1227630,"ip_address":"","ucode":"310FA28117D765","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKmXoYDRv98a9GEoJccTovtWH928eN9N6ZN0fibiamEVbpGwpAzuRmhEbI2sUZa6Hur7utDYMXYrIHw/132","comment_is_top":false,"comment_ctime":1616483620,"is_pvip":false,"replies":[{"id":"104973","content":"请参考我公布的思考题答案","user_name":"作者回复","user_name_real":"朱晓峰","uid":"2356905","ctime":1618993339,"ip_address":"","comment_id":284809,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1616483620","product_id":100073201,"comment_content":"ALTER TABLE demo.goodsmaster MODIFY salesprice INT UNIQUE; <br>-- 不能重复设置如上，非空设置不成功。没有找到好的解决办法。望老师解答","like_count":0,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"朱晓峰","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":517474,"discussion_content":"请参考我公布的思考题答案","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618993339,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":283779,"user_name":"giteebravo","can_delete":false,"product_type":"c1","uid":1005290,"ip_address":"","ucode":"C087E8D6B5A98B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/56/ea/32608c44.jpg","comment_is_top":false,"comment_ctime":1615914307,"is_pvip":false,"replies":[{"id":"104965","content":"这个查询有问题，请看一下我公布的参考答案","user_name":"作者回复","user_name_real":"朱晓峰","uid":"2356905","ctime":1618992134,"ip_address":"","comment_id":283779,"utype":1}],"discussion_count":2,"race_medal":1,"score":"1615914307","product_id":100073201,"comment_content":"<br>交作业：<br><br>alter table demo.goodsmaster <br>modify salesprice decimal(10,3) not null<br>unique(salesprice)<br>","like_count":0,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"朱晓峰","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":517144,"discussion_content":"这个查询有问题，请看一下我公布的参考答案","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618992134,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1005290,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/56/ea/32608c44.jpg","nickname":"giteebravo","note":"","ucode":"C087E8D6B5A98B","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":369315,"discussion_content":"好的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619003170,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":283154,"user_name":"出卖灵魂的教练Kerry","can_delete":false,"product_type":"c1","uid":1807943,"ip_address":"","ucode":"8C64517DA556FE","user_header":"https://static001.geekbang.org/account/avatar/00/1b/96/47/93838ff7.jpg","comment_is_top":false,"comment_ctime":1615598006,"is_pvip":true,"replies":[{"id":"103652","content":"是的","user_name":"作者回复","user_name_real":"朱晓峰","uid":"2356905","ctime":1616978918,"ip_address":"","comment_id":283154,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1615598006","product_id":100073201,"comment_content":"老师你好，修改表结构是不是对性能有影响呢？比如页分裂或者合并。","like_count":0,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"朱晓峰","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":516947,"discussion_content":"是的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616978918,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":283149,"user_name":"Better","can_delete":false,"product_type":"c1","uid":1515024,"ip_address":"","ucode":"4170A84A7EB378","user_header":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTL7J5Yb5nofkD1Wp7gEtoEhNCuv70DUDcu26XtOK0UrFyuQltje0P1icTLMOW2unCa5u6nCdWQNrlg/132","comment_is_top":false,"comment_ctime":1615594892,"is_pvip":false,"replies":[{"id":"103651","content":"可视化的集成工具使用方便，容易上手。但是这些工具对平台资源要求较高，命令行不受这些限制，建议你尽量掌握。","user_name":"作者回复","user_name_real":"朱晓峰","uid":"2356905","ctime":1616978894,"ip_address":"","comment_id":283149,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1615594892","product_id":100073201,"comment_content":"老师有个问题，虽然建表改表语句是基础，但是，现在开发很多年的人都未必能准确快速的用命令操作，，基本都是用可视化的方式去修改配置，datagrip, navicat,workbench等，这些dms,集成了强大的可视化功能，那么记住这些操作命令有必要么？(当然对于dba,命令行界面的服务器管理，这个是特别必要的)","like_count":0,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"朱晓峰","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":516946,"discussion_content":"可视化的集成工具使用方便，容易上手。但是这些工具对平台资源要求较高，命令行不受这些限制，建议你尽量掌握。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616978894,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}