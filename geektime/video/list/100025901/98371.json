{"id":98371,"title":"44 | 使用结构化的数据进行解析和展示","content":"<p><strong>PDF 课件和源代码下载地址：</strong></p><p><a href=\"https://gitee.com/geektime-geekbang/geektime-ios-course\">https://gitee.com/geektime-geekbang/geektime-ios-course</a></p>","comments":[{"had_liked":false,"id":103964,"user_name":"Geek_jg3r26","can_delete":false,"product_type":"c3","uid":1454691,"ip_address":"","ucode":"7D093ED7273CBE","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEK5icO2A4K7HYTYfQoagTz7VbtgxfS2ibBqLnKVWwQZgsePibZWFvFJEhPT8BtpQSaFx9IEodyp6c0dw/132","comment_is_top":false,"comment_ctime":1560575330,"is_pvip":false,"replies":[{"id":37910,"content":"有的，这个也是为什么我在项目中增加了warning，正常开发的时候是需要类型检查的。比如最常见的后台没有下发数据，经常 jsonObj[@&quot;result&quot;]如果解析出来的是NSNull，这个时候调用后面的[@&quot;data&quot;]，就会有unrecognized selector的Exception.所以在实际开发过程中，一定要做类型的检查。","user_name":"作者回复","user_name_real":"dequanzhu","uid":1041455,"ctime":1560837886,"ip_address":"","comment_id":103964,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100025901,"comment_content":"NSArray *dataArray = jsonObj[@&quot;result&quot;][@&quot;data&quot;];\n\n没有像老师那样转换类型， 在项目开发中有没有隐患？","like_count":4,"discussions":[{"author":{"id":1041455,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKJ3dLlYr6tznfnZXJNsD7Jw48BVnFSib3RO3VWEN0pgebRY1jaR8YXLQ6iaAjTsFiamOWSA3UPAa37A/132","nickname":"Geek_e7jq8k","note":"","ucode":"352964E5D793DA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454072,"discussion_content":"有的，这个也是为什么我在项目中增加了warning，正常开发的时候是需要类型检查的。比如最常见的后台没有下发数据，经常 jsonObj[@&amp;quot;result&amp;quot;]如果解析出来的是NSNull，这个时候调用后面的[@&amp;quot;data&amp;quot;]，就会有unrecognized selector的Exception.所以在实际开发过程中，一定要做类型的检查。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560837886,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":151651,"user_name":"git","can_delete":false,"product_type":"c3","uid":1639484,"ip_address":"","ucode":"86A7AF93FD2660","user_header":"","comment_is_top":false,"comment_ctime":1573775879,"is_pvip":false,"replies":[{"id":58689,"content":"对于NSMutableArray，他的copy&#47;mutableCopy和alloc或者new是一样的，都是创建一个新的对象。但是他们都属于shallow copy，就是array里面的object都是引用的关系，但是两个NSMutableArray是两个不同的对象。同样的如果对一个NSArray进行copy&#47;mutableCopy，copy之后的对象还是原来的对象，mutableCopy是创建了一个新的对象。","user_name":"作者回复","user_name_real":"zzz","uid":1041455,"ctime":1574081506,"ip_address":"","comment_id":151651,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100025901,"comment_content":"请教一下，我平常开发中写接收数据NSMutableArray的时候，都是直接new一个新的，或者alloc一个新的……但是我看视频里的写法是直接copy一个，我还从来没这么试过这么写，请问有什么区别啊？","like_count":1,"discussions":[{"author":{"id":1041455,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKJ3dLlYr6tznfnZXJNsD7Jw48BVnFSib3RO3VWEN0pgebRY1jaR8YXLQ6iaAjTsFiamOWSA3UPAa37A/132","nickname":"Geek_e7jq8k","note":"","ucode":"352964E5D793DA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":474564,"discussion_content":"对于NSMutableArray，他的copy/mutableCopy和alloc或者new是一样的，都是创建一个新的对象。但是他们都属于shallow copy，就是array里面的object都是引用的关系，但是两个NSMutableArray是两个不同的对象。同样的如果对一个NSArray进行copy/mutableCopy，copy之后的对象还是原来的对象，mutableCopy是创建了一个新的对象。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574081506,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":186239,"user_name":"华哥506","can_delete":false,"product_type":"c3","uid":1876931,"ip_address":"","ucode":"5314BF42F25DA0","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/txSaX2pa3CQ6m9cFRGda2JTlcMS53IbyQESz4EoIEAywHwBCH8WcZTymOSt4oSguSk5DQmISjR5KqZGBicfWw5g/132","comment_is_top":false,"comment_ctime":1583806177,"is_pvip":false,"replies":[{"id":74596,"content":"通过你另外的一个问题，是因为断点的位置加早了，可以进行单步调试看下，或者改下断点位置，以及使用NSLog打印出结果看下。","user_name":"作者回复","user_name_real":"zzz","uid":1041455,"ctime":1585383168,"ip_address":"","comment_id":186239,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100025901,"comment_content":"你好，朱老师，我获得的jsonObj是NSMallocBlock类型的数据，怎么回事？\n","like_count":0,"discussions":[{"author":{"id":1041455,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKJ3dLlYr6tznfnZXJNsD7Jw48BVnFSib3RO3VWEN0pgebRY1jaR8YXLQ6iaAjTsFiamOWSA3UPAa37A/132","nickname":"Geek_e7jq8k","note":"","ucode":"352964E5D793DA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":486689,"discussion_content":"通过你另外的一个问题，是因为断点的位置加早了，可以进行单步调试看下，或者改下断点位置，以及使用NSLog打印出结果看下。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585383168,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":364828,"user_name":"张军","can_delete":false,"product_type":"c3","uid":1654447,"ip_address":"河南","ucode":"FCBDB41842FA13","user_header":"https://static001.geekbang.org/account/avatar/00/19/3e/af/103aa3b5.jpg","comment_is_top":false,"comment_ctime":1671549110,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100025901,"comment_content":"没有java那种类似于Jackson gson这样的反射工具吗，这样写太麻烦了","like_count":0},{"had_liked":false,"id":336601,"user_name":"陈俊焕","can_delete":false,"product_type":"c3","uid":1338915,"ip_address":"","ucode":"64EE6ED20C159A","user_header":"https://static001.geekbang.org/account/avatar/00/14/6e/23/f6d773f5.jpg","comment_is_top":false,"comment_ctime":1646233792,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":2,"product_id":100025901,"comment_content":"这里的属性为什么用copy不用strong?","like_count":0,"discussions":[{"author":{"id":1458503,"avatar":"https://static001.geekbang.org/account/avatar/00/16/41/47/604daa28.jpg","nickname":"Geek_652e06","note":"","ucode":"58DFD79B1C28D8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":557905,"discussion_content":"字符串要用copy修饰的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1648020604,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":190132,"user_name":"Shnerd","can_delete":false,"product_type":"c3","uid":1440263,"ip_address":"","ucode":"3630276571AF66","user_header":"https://static001.geekbang.org/account/avatar/00/15/fa/07/1d50f530.jpg","comment_is_top":false,"comment_ctime":1584605543,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":2,"product_id":100025901,"comment_content":"终于理解UIKIT中各组件的构造思想了","like_count":0,"discussions":[{"author":{"id":2076600,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/af/b8/458866d3.jpg","nickname":"Bo","note":"","ucode":"D5DD3300310C02","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":397456,"discussion_content":"从何说起呢？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632624199,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}