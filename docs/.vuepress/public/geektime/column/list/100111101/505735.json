{"id":505735,"title":"开篇词｜你现在所写的每一行代码，都是未来的遗留系统","content":"<p>你好，我是姚琪琳，来自Thoughtworks，很高兴在极客时间与你相遇。</p><p>先做个自我介绍，我做过程序员、架构师、技术负责人、技术教练、咨询师，角色一直在变化，但幸运的是始终可以有机会写写代码。业余时间也喜欢翻译，曾经翻译过大大小小十来本技术书籍。</p><p>这15年的职业生涯，虽然我尝试了种种工作，但总结起来我大部分的时间都在和遗留系统打交道。既有开发历史已经接近20年的系统，也有刚上线没几年的系统，当然也有开发了十来年，但看上去十分美好的、所谓的“遗留”系统。</p><p>在这个深坑中摸爬滚打了多年之后，我在遗留系统开发、治理和改造的过程中积累了大量的一手经验，现在我决定把我和团队的经验分享出来，帮助深陷在遗留系统的泥潭中无法自拔的你。</p><p>你可能会说，你当前所在的项目上并没有遗留系统，所有的系统都生机勃勃、一片祥和。不过，根据这些年和遗留系统打交道的经验，我基本可以告诉你，表面的祥和之下，可能暗藏波涛。</p><h2>你现在所写的每一行代码，都是未来的遗留系统</h2><p>我的同事，重构和微服务的缔造者，软件开发领域的泰斗，Martin Fowler曾经说过<a href=\"https://martinfowler.com/bliki/StranglerFigApplication.html\">这样一句话</a>：</p><blockquote>\n<p>Let’s face it, all we are doing is writing tomorrow’s legacy software today.</p>\n</blockquote><!-- [[[read_end]]] --><p>是的，可以毫不夸张地说，<strong>你现在所写的每一行代码，都是未来的遗留系统</strong>。</p><p>这听上去有点让人沮丧，但却是血淋淋的事实。每一种技术的诞生和流行，都有它的时代背景，当这个背景不存在时，也就失去了它生存的土壤。因此你现在所纠结的每一项技术选型，到五年以后都会过时成为遗留产物。</p><p>曾经作为行业标准的IOE，现在人人唯恐避之不及；风靡一时的SOA，也最终被微服务所取代；而如果以后云服务进一步发展，大型服务的部署和演进不再是瓶颈，单体会不会重新流行？谁知道呢。</p><p>看到这里，你还会觉得遗留系统跟自己没关系吗？即使你现在没有工作在遗留系统上，你也很快就要工作在它上面了。</p><p>而随着技术的发展，被遗留系统左右的可不仅仅是开发者个人，还有你所在的企业。我想你一定听说过数字化转型！那些曾经为企业立下汗马功劳的IT系统（也就是遗留系统），此刻反而成为了数字化转型的绊脚石。这是为什么呢？</p><p>概括来说就是，IT能力支撑不了企业的市场需求，技术跟不上业务。一个简单的流程更改，都需要很久才能上线；新的数字渠道来临时，系统更是无法支持。不仅如此，有些系统甚至连最基本的可用性都无法满足，动不动就打不开、报错，甚至无法完成业务，用户体验也非常差。面对这样的痛点，系统现代化势在必行。</p><p>有太多在遗留系统上折腾的案例，改造的过程声势浩大，结果却令人扼腕。有的开启专项，抽调精英，大刀阔斧地进行整改；有的则干脆重写，企图替换原有系统。但这些行动大多都以失败而告终：有的改造完了仍然无法满足业务，新写的系统也好不到哪去，只不过是又一个遗留系统罢了。</p><p>在亲眼目睹了这些惨案之后，我愈发觉得有必要把我的经验分享给你和你的组织了。</p><h2>你的系统真的不是遗留系统吗？</h2><p>也许看到这里你还是感觉遗留系统和你无关。要么觉得我手上的系统才两三年，算不上遗留系统，要么立志“让我维护遗留系统就辞职”。</p><p>对于第一种想法，你敢打包票自己的系统不是遗留系统吗？很多人以为存在时间很长的就是遗留系统，但这其实是个误区。</p><p>时间长短并不能作为衡量遗留系统的标准。有些系统虽然刚开发不久，但你工作起来还是有各种不爽，比如：</p><ul>\n<li>代码质量一言难尽，改个需求或做维护经常加班，让你恨不得推翻重写；</li>\n<li>架构混乱，模块之间职责不明，一个需求需要修改四五个服务；</li>\n<li>CI/CD运转不畅，经常莫名其妙地挂掉，每次升级、上线都一拖再拖；</li>\n<li>团队结构不稳定，人员变动频繁；大家都在拼命开发新需求，没人关心技术债；</li>\n<li>……</li>\n</ul><p>如果以上问题你都自信满满，那我就要拿出杀手锏了。</p><p>你的代码有测试吗？你平时开发新需求时会写测试吗？你在修改bug时会补测试吗？经过这样的灵魂三问，你还有自信坚持说自己的系统不是遗留系统吗？</p><p>《修改代码的艺术》一书的作者Michael Feathers说过，“没有测试的代码都是遗留代码”。在我们越来越强调软件系统质量内建的今天，仍然有很多系统甚至很多刚刚开发的新系统，由于各种原因不写测试。有的说工期太紧，没时间写；有的说系统原来就没测试，我新加的这么几行代码没必要写。其实每种借口都禁不起推敲，都是在为自己不会写测试来打马虎眼。</p><p>软件系统本身就是一个不断熵增的过程，代码逐渐从有序变得无序。如果没有测试的严防死守，熵增的过程就会慢慢加快，代码很快就会变得混乱不堪。</p><p>前段时间在硅谷有个新闻，一位华裔开发人员受不了同事不写单元测试，所以愤然离开了这家在国内赫赫有名的大厂。这家大厂的做法和国内的很多互联网公司一样，用大量的昂贵的人工测试，去替代廉价的自动化测试。不是说这样不可行，但问题是它的投入产出比非常低，并且十分低效的。而且是把软件开发这个智力劳动，当成了体力劳动密集型的工作。在我看来，这不但是对软件工作者的嘲讽和亵渎，而且无视了熵增定律，迟早要付出代价。</p><p>至于第二种想法“让我维护遗留系统就辞职”。如果你是公司的CTO或者架构师，你还会这么想吗？</p><p>技术之路走到后来，你需要更深的技术与业务洞察，更丰富的理论和实战经验。</p><p>比如我在代码现代化部分介绍的代码重构，难道你平时写代码不重构吗？显然不是，重构已经成为了开发人员必备的甚至是融入血液的技能。不会重构，怎么好意思跟人打招呼。</p><p>再比如在架构现代化部分介绍的抽象分支模式，不也正是我们在日常开发时会频繁使用的模式吗？每当我们提取一个接口来隔离某个变化方向，其实就是一个抽象分支。想想看，你是不是早就习惯了一个接口加一个Impl类的结构了呢（当然，我并不推荐盲目使用接口 + Impl类的结构）？</p><p>我的这些经验之谈，并不仅适用于遗留系统开发。像三个原则和四个现代化中的各种模式，其实都是开发新系统常常要用到的。</p><h2>课程安排</h2><p>谈了这么多，无非就是表达一个观点：作为工程师，我们比想象中距离遗留系统更近。与其逃避躲闪，不如把它作为我们技术进阶的磨刀石和垫脚石。</p><p>在这个专栏里，我会先给你介绍一下我心中的遗留系统现代化的定义。然后按照我最喜欢的技术书籍之一《敏捷软件开发：原则、模式和实践》那样，将遗留系统现代化的各种知识总结为原则、模式和实践。</p><p>你一定会好奇为什么叫遗留系统“现代化”，而不是业界常说的“改造”。我其实是有意回避了这个词，因为这个词“重过程”、“轻结果”。我见过太多遗留系统改造之后并没有什么变化，甚至越改越糟。这也是我总结遗留系统现代化三原则的原因。只有遵循这些原则，才能有的放矢，才不会偏离方向。</p><p>这三个原则分别是<strong>以降低认知负载为前提、以假设驱动为指引、以增量演进为手段</strong>。</p><p>它们是大多数遗留系统改造项目中容易忽视的部分。很多系统的改造都只针对局部问题，缺乏全局的认知和系统的视角。</p><p>比如重构代码是为了什么？只是为了提升可读性吗？拆分模块是为了什么？只是为了架构整洁吗？为什么耗时一年的改造上线之后因为bug太多而不得不被叫停，最后不了了之？相信在学完原则篇后，你能找到答案。</p><p>而模式则包含很多了，它们有的来源于网络上或书上，我在实际工作中使用之后感觉受益匪浅，于是拿出来夹带着我自己的理解展示给你。像Michael Feathers提出的<strong>接缝</strong>模式、Martin Fowler提出的<strong>扩张-收缩</strong>模式、Eric Evans提出的<strong>气泡上下文</strong>模式等等。这些大师总结的模式，我用起来的感觉就是两个字：真香。</p><p>这些模式，有的则来自于我和同事在实战一线处理完各种疑难杂症后，总结出来的套路，它们适合去解决不同种类的问题。比如为遗留代码添加测试的<strong>决策表</strong>模式，以及为了更好地持续集成而使用的<strong>七步提交法</strong>。即使你不在遗留系统上工作，这些知识也能丰富你的工具箱，使你成为解决问题的高手。</p><p><img src=\"https://static001.geekbang.org/resource/image/21/ef/216d75abcd69352fec044138befd9bef.jpg?wh=11533x6020\" alt=\"\"></p><p>而最后的实践部分，我将带着你一起对一个典型的遗留系统进行现代化。这期间会遇到种种问题，我们一起把前面提到的原则和模式使用起来，武装我们的双手，并且还会对各种模式进行变体，以使其更加适配我们要解决的问题。相信我们一定可以兵来将挡、水来土掩。</p><p><img src=\"https://static001.geekbang.org/resource/image/3e/6e/3e5f39d0b9a91f9cd858d7d2830f2b6e.jpg?wh=1920x876\" alt=\"图片\"></p><h2>写在最后</h2><p>技术可以流行一时，但终将被淘汰，而方法论却可以像陈年老酒一样愈久弥香。我也曾经像你一样，对于新技术趋之若鹜，但最后发现，只有掌握了解决问题的方法，才能不惧任何问题。那些不同的技术，只不过是同一种方法下的不同思路罢了。</p><p>总之，我把我解决遗留系统难题的方法总结了出来，尽管它有些地方与你现在所使用的技术并不完全一致，但学会了这些知识，对平时的开发和设计都是非常有帮助的。毕竟，虽然要解决的问题不同，但方法却殊途同归。</p><p>我们的遗留系统现代化列车即将启程，希望你和我一起学习进步！</p>","comments":[{"had_liked":false,"id":345630,"user_name":"听水的湖","can_delete":false,"product_type":"c1","uid":1501385,"ip_address":"","ucode":"B1759F90165D81","user_header":"https://static001.geekbang.org/account/avatar/00/16/e8/c9/59bcd490.jpg","comment_is_top":true,"comment_ctime":1652442171,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100111101,"comment_content":"大家好，我是遗留系统专栏的编辑小新。\n\n老师的开学典礼直播回放已经上传B站，传送门如下：\nhttps:&#47;&#47;www.bilibili.com&#47;video&#47;BV1a3411N7hP?spm_id_from=333.999.list.card_archive.click\n\n有兴趣的可以拓展学习一下（记得一键三连哦）。","like_count":4},{"had_liked":false,"id":341695,"user_name":"Bradly","can_delete":false,"product_type":"c1","uid":1008415,"ip_address":"","ucode":"E4876475F2DC26","user_header":"https://static001.geekbang.org/account/avatar/00/0f/63/1f/f049597d.jpg","comment_is_top":true,"comment_ctime":1649772750,"is_pvip":true,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100111101,"comment_content":"旧系统遇到瓶颈，正处在现代化阶段，真是及时雨。","like_count":8},{"had_liked":false,"id":343282,"user_name":"2022","can_delete":false,"product_type":"c1","uid":1837401,"ip_address":"","ucode":"FF4ACF782DCD32","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/0G5nUhs4Isl9DicqZczPQt51OibNcmfjVxhXdpCoAibvyoOPnK7ZvVBgA3A3Shw08hcmMcuhSer3dmQruJ9xibTb7g/132","comment_is_top":false,"comment_ctime":1650762594,"is_pvip":false,"replies":[{"id":125367,"content":"感谢分享。\n其实有时候那些担心单元测试会耽误时间的人，他们的心情也可以理解，因为开发人员普遍不具备快速写出单元测试的能力。如果一个2天开发工作量的需求，单元测试的编写时间只有2个小时，恐怕就没有人会担心单元测试影响开发进度了。","user_name":"作者回复","user_name_real":"编辑","uid":1009237,"ctime":1650803659,"ip_address":"","comment_id":343282,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100111101,"comment_content":"我们公司也没有单元测试，在项目开始前期的时候一般计划要搞，但是每个项目的时间安排的太紧，几乎每个项目都延期，只好压缩单元测试的时间，直接进入测试集成阶段，由测试部人工测试，。这么多年了，都没搞起来。\n现在好多旧模块的代码都超过600行，都不敢改，怕改动引发，心累..","like_count":4,"discussions":[{"author":{"id":1009237,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/55/098b3396.jpg","nickname":"姚琪琳","note":"","ucode":"68EB7FFC9B8A6F","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":566944,"discussion_content":"感谢分享。\n其实有时候那些担心单元测试会耽误时间的人，他们的心情也可以理解，因为开发人员普遍不具备快速写出单元测试的能力。如果一个2天开发工作量的需求，单元测试的编写时间只有2个小时，恐怕就没有人会担心单元测试影响开发进度了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650803659,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1053294,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ1VPGSQg7SqrN1Gutx31Kicks2icZjTCg1gZoDLfEcSSricYD6l5qQgE3MkMpqlhkM4gMicymOYzaudg/132","nickname":"可可","note":"","ucode":"297A5D32949128","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1009237,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/55/098b3396.jpg","nickname":"姚琪琳","note":"","ucode":"68EB7FFC9B8A6F","race_medal":0,"user_type":2,"is_pvip":true},"discussion":{"id":609150,"discussion_content":"2天开发工作量需要2个小时编写单元测试，我还是会觉得太浪费时间。主要是想把工作量甩给测试人员。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1678850041,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":566944,"ip_address":"山东","group_id":0},"score":609150,"extra":""}]}]},{"had_liked":false,"id":341837,"user_name":"escray","can_delete":false,"product_type":"c1","uid":1020525,"ip_address":"","ucode":"1F4204930E47C4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/92/6d/becd841a.jpg","comment_is_top":false,"comment_ctime":1649854837,"is_pvip":true,"replies":[{"id":124876,"content":"遗留系统现代化的过程中肯定是要有测试这个环节的，只不过这部分被放到了代码现代化里，因为遗留代码通常都是无法直接写测试的，所以要先进行可测试化重构，才能补上测试。","user_name":"作者回复","user_name_real":"编辑","uid":1009237,"ctime":1649897039,"ip_address":"","comment_id":341837,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100111101,"comment_content":"有一点好奇，遗留系统现代化的过程中可以没有测试么？\n\n架构和团队结构的现代化相对来说比较务虚，代码和 DevOps 现代化就是真正的硬骨头了。\n\n现在 Thoughtworks 的软件开发方法论在极客时间已经越来越多的被介绍，看上去很美好。\n\n没有测试的代码就是遗留代码。","like_count":4,"discussions":[{"author":{"id":1009237,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/55/098b3396.jpg","nickname":"姚琪琳","note":"","ucode":"68EB7FFC9B8A6F","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":562790,"discussion_content":"遗留系统现代化的过程中肯定是要有测试这个环节的，只不过这部分被放到了代码现代化里，因为遗留代码通常都是无法直接写测试的，所以要先进行可测试化重构，才能补上测试。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1649897040,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":341957,"user_name":"数学汤家凤","can_delete":false,"product_type":"c1","uid":2029485,"ip_address":"","ucode":"DE84E777C384AD","user_header":"https://static001.geekbang.org/account/avatar/00/1e/f7/ad/4fd4d867.jpg","comment_is_top":false,"comment_ctime":1649930595,"is_pvip":false,"replies":[{"id":124951,"content":"请问是否尝试过给代码添加测试呢？","user_name":"作者回复","user_name_real":"编辑","uid":1009237,"ctime":1649947225,"ip_address":"","comment_id":341957,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100111101,"comment_content":"刚入职，接手了一个19年的项目，不算老。但代表质量一言难尽。项目总有一些乱七八糟的小问题，出问题就手动补，都不知道是哪一块儿的问题。","like_count":2,"discussions":[{"author":{"id":1009237,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/55/098b3396.jpg","nickname":"姚琪琳","note":"","ucode":"68EB7FFC9B8A6F","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":563163,"discussion_content":"请问是否尝试过给代码添加测试呢？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649947225,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":341557,"user_name":"Y024","can_delete":false,"product_type":"c1","uid":1018056,"ip_address":"","ucode":"397126D2E17997","user_header":"https://static001.geekbang.org/account/avatar/00/0f/88/c8/6af6d27e.jpg","comment_is_top":false,"comment_ctime":1649688868,"is_pvip":true,"replies":[{"id":124831,"content":"但是不要轻视技术哦，认知帮我们认识问题和想出解决方案，但真正落地时，还是要靠技术的。","user_name":"作者回复","user_name_real":"编辑","uid":1009237,"ctime":1649766727,"ip_address":"","comment_id":341557,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100111101,"comment_content":"在更高维度的认知面前技术显得弱小且稚嫩！","like_count":1,"discussions":[{"author":{"id":1009237,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/55/098b3396.jpg","nickname":"姚琪琳","note":"","ucode":"68EB7FFC9B8A6F","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":562035,"discussion_content":"但是不要轻视技术哦，认知帮我们认识问题和想出解决方案，但真正落地时，还是要靠技术的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649766727,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":361657,"user_name":"1043","can_delete":false,"product_type":"c1","uid":1485365,"ip_address":"北京","ucode":"AAA69CC175AEE3","user_header":"https://static001.geekbang.org/account/avatar/00/16/aa/35/1a4884f9.jpg","comment_is_top":false,"comment_ctime":1667742658,"is_pvip":false,"replies":[{"id":131872,"content":"学习加油","user_name":"编辑回复","user_name_real":"编辑","uid":1501385,"ctime":1668736028,"ip_address":"北京","comment_id":361657,"utype":2}],"discussion_count":1,"race_medal":4,"score":2,"product_id":100111101,"comment_content":"你现在正在做的有问题的代码或构建的系统就是未来的遗留系统……","like_count":0,"discussions":[{"author":{"id":1501385,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e8/c9/59bcd490.jpg","nickname":"听水的湖","note":"","ucode":"B1759F90165D81","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":594034,"discussion_content":"学习加油","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1668736028,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":8}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":346715,"user_name":"sqnv_geek","can_delete":false,"product_type":"c1","uid":2179895,"ip_address":"","ucode":"B23265E1862E4F","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/a4nwicfbEpwqfm8En9iapFqGoOpVg0p0N4ZjIFAdWQMiaxT0JT9OpYrM5ud1OliaLAUhhiaHDjY8mxmNfSbgBNAAGTQ/132","comment_is_top":false,"comment_ctime":1653376410,"is_pvip":false,"replies":[{"id":126464,"content":"其实vendor的产品如果现在无法得到后续服务了，跟遗留系统是一样的（没有人熟悉），你可以试读一下后面的内容，应该对你有所帮助。\n\nPS：没有代码版本管理的话，就从现在开始加上吧，这个没难度的。","user_name":"作者回复","user_name_real":"编辑","uid":1009237,"ctime":1653395663,"ip_address":"","comment_id":346715,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100111101,"comment_content":"就职于金融企业，请问如何改造vendor的产品，比如IBM的各种product，不好用，复杂，不好加测试，做CICD，甚至没有代码版本管理\n请问有咨询经验share一下吗","like_count":0,"discussions":[{"author":{"id":1009237,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/55/098b3396.jpg","nickname":"姚琪琳","note":"","ucode":"68EB7FFC9B8A6F","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":573411,"discussion_content":"其实vendor的产品如果现在无法得到后续服务了，跟遗留系统是一样的（没有人熟悉），你可以试读一下后面的内容，应该对你有所帮助。\n\nPS：没有代码版本管理的话，就从现在开始加上吧，这个没难度的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1653395663,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":345996,"user_name":"渠梁","can_delete":false,"product_type":"c1","uid":1488038,"ip_address":"","ucode":"DC86BDEC63C9BC","user_header":"https://static001.geekbang.org/account/avatar/00/16/b4/a6/b6fa2562.jpg","comment_is_top":false,"comment_ctime":1652756158,"is_pvip":false,"replies":[{"id":126248,"content":"那就是对他来说，还没有意识到潜在的风险和切身的痛点，或者从业务角度痛点也还没有那么大。可以好好跟他聊聊，把开发过程中各种痛点一一列出来，并说明未来业务上会带来的隐患。有时候现在没有痛点并不代表一直没有痛点，现在改可能还来得及，未来真痛了再改，可能来不及了。","user_name":"作者回复","user_name_real":"编辑","uid":1009237,"ctime":1652772636,"ip_address":"","comment_id":345996,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100111101,"comment_content":"遗留系统一团乱麻，想重构或者改造。可主管不同意，觉得风险和成本都太高了，怎么办","like_count":0,"discussions":[{"author":{"id":1009237,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/55/098b3396.jpg","nickname":"姚琪琳","note":"","ucode":"68EB7FFC9B8A6F","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":572405,"discussion_content":"那就是对他来说，还没有意识到潜在的风险和切身的痛点，或者从业务角度痛点也还没有那么大。可以好好跟他聊聊，把开发过程中各种痛点一一列出来，并说明未来业务上会带来的隐患。有时候现在没有痛点并不代表一直没有痛点，现在改可能还来得及，未来真痛了再改，可能来不及了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1652772636,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":342626,"user_name":"不会MATLAB","can_delete":false,"product_type":"c1","uid":2613059,"ip_address":"","ucode":"725795EDB38F5A","user_header":"https://static001.geekbang.org/account/avatar/00/27/df/43/0773c064.jpg","comment_is_top":false,"comment_ctime":1650368777,"is_pvip":false,"replies":[{"id":125212,"content":"感谢分享。\n\n我没有参与过嵌入式开发，不过倒是接触过一些需要跟大量外接设备协同的软件系统。我的经验是把与外部设备交互的部分提取成接缝（可以理解为接口，后面课程会介绍），然后在单元测试中，用测试替身来替换这些外部设备。这一点还是可以做到的。\n\n至于第二个问题，我认为先进的软件系统就是那些以先进的软件开发思想构建起来的，不断迭代演进的软件系统。","user_name":"作者回复","user_name_real":"编辑","uid":1009237,"ctime":1650460734,"ip_address":"","comment_id":342626,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100111101,"comment_content":"经历了三家嵌入式公司，从下游到上游，嵌入式领域的代码测试可以说相对较少，尤其是单元测试，系统集成测试也很困难自动化（主要有些测试项是需要制作专门的测试设备，例如测试显示屏的输出是否正常），基本都是人工测试，有的厂也只是对一些至关重要的功能环节安排自动化测试设备。希望这门课可以让我对1.如何进行一些跟硬件相关的代码的自动化测试 2.现代先进的软件系统是怎样的整体。这两方面有所收益。","like_count":0,"discussions":[{"author":{"id":1009237,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/55/098b3396.jpg","nickname":"姚琪琳","note":"","ucode":"68EB7FFC9B8A6F","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":565405,"discussion_content":"感谢分享。\n\n我没有参与过嵌入式开发，不过倒是接触过一些需要跟大量外接设备协同的软件系统。我的经验是把与外部设备交互的部分提取成接缝（可以理解为接口，后面课程会介绍），然后在单元测试中，用测试替身来替换这些外部设备。这一点还是可以做到的。\n\n至于第二个问题，我认为先进的软件系统就是那些以先进的软件开发思想构建起来的，不断迭代演进的软件系统。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650460734,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":342489,"user_name":"陈芷维","can_delete":false,"product_type":"c1","uid":2588698,"ip_address":"","ucode":"260330ADB3CB35","user_header":"https://static001.geekbang.org/account/avatar/00/27/80/1a/b5ab2d31.jpg","comment_is_top":false,"comment_ctime":1650288757,"is_pvip":false,"replies":[{"id":125101,"content":"你肯定是：）","user_name":"作者回复","user_name_real":"编辑","uid":1009237,"ctime":1650291967,"ip_address":"","comment_id":342489,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100111101,"comment_content":"希望我是未雨绸缪","like_count":0,"discussions":[{"author":{"id":1009237,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/55/098b3396.jpg","nickname":"姚琪琳","note":"","ucode":"68EB7FFC9B8A6F","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":564637,"discussion_content":"你肯定是：）","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650291967,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2613059,"avatar":"https://static001.geekbang.org/account/avatar/00/27/df/43/0773c064.jpg","nickname":"不会MATLAB","note":"","ucode":"725795EDB38F5A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":564986,"discussion_content":"喂鱼抽猫；）","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650368242,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":342165,"user_name":"喜欢","can_delete":false,"product_type":"c1","uid":1172837,"ip_address":"","ucode":"3C56A0BAF03566","user_header":"https://static001.geekbang.org/account/avatar/00/11/e5/65/e1d777c4.jpg","comment_is_top":false,"comment_ctime":1650079457,"is_pvip":false,"replies":[{"id":125125,"content":"感谢支持，后面更精彩，多交流哦～","user_name":"编辑回复","user_name_real":"编辑","uid":1501385,"ctime":1650330188,"ip_address":"","comment_id":342165,"utype":2}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100111101,"comment_content":"及时雨","like_count":0,"discussions":[{"author":{"id":1501385,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e8/c9/59bcd490.jpg","nickname":"听水的湖","note":"","ucode":"B1759F90165D81","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":564785,"discussion_content":"感谢支持，后面更精彩，多交流哦～","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650330189,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":8}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":341843,"user_name":"石马","can_delete":false,"product_type":"c1","uid":1128089,"ip_address":"","ucode":"2BB8D16DEE6001","user_header":"https://static001.geekbang.org/account/avatar/00/11/36/99/b4341376.jpg","comment_is_top":false,"comment_ctime":1649857881,"is_pvip":false,"replies":[{"id":124879,"content":"感谢关注，一起学习进步！","user_name":"作者回复","user_name_real":"编辑","uid":1009237,"ctime":1649898229,"ip_address":"","comment_id":341843,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100111101,"comment_content":"向优秀的人学习","like_count":0,"discussions":[{"author":{"id":1009237,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/55/098b3396.jpg","nickname":"姚琪琳","note":"","ucode":"68EB7FFC9B8A6F","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":562820,"discussion_content":"感谢关注，一起学习进步！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649898230,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":341621,"user_name":"子夜枯灯","can_delete":false,"product_type":"c1","uid":1359678,"ip_address":"","ucode":"5D84BFE7832038","user_header":"https://static001.geekbang.org/account/avatar/00/14/bf/3e/cdc36608.jpg","comment_is_top":false,"comment_ctime":1649738001,"is_pvip":false,"replies":[{"id":124829,"content":"一起加油💪","user_name":"作者回复","user_name_real":"编辑","uid":1009237,"ctime":1649766568,"ip_address":"","comment_id":341621,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100111101,"comment_content":"遗留系统攻坚战，启动","like_count":0,"discussions":[{"author":{"id":1009237,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/55/098b3396.jpg","nickname":"姚琪琳","note":"","ucode":"68EB7FFC9B8A6F","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":562031,"discussion_content":"一起加油💪","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649766568,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":341604,"user_name":"aoe","can_delete":false,"product_type":"c1","uid":1121758,"ip_address":"","ucode":"1C6201EDB4E954","user_header":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","comment_is_top":false,"comment_ctime":1649731628,"is_pvip":false,"replies":[{"id":124833,"content":"可以的，希望两个多月后结课时你可以不虚此行～","user_name":"编辑回复","user_name_real":"编辑","uid":1501385,"ctime":1649772159,"ip_address":"","comment_id":341604,"utype":2}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100111101,"comment_content":"跟着老师一起摆平遗留系统","like_count":0,"discussions":[{"author":{"id":1501385,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e8/c9/59bcd490.jpg","nickname":"听水的湖","note":"","ucode":"B1759F90165D81","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":562084,"discussion_content":"可以的，希望两个多月后结课时你可以不虚此行～","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1649772159,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":8}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":345926,"user_name":"王王王王王王。","can_delete":false,"product_type":"c1","uid":1216676,"ip_address":"","ucode":"8BCF178E16B901","user_header":"https://static001.geekbang.org/account/avatar/00/12/90/a4/358d829c.jpg","comment_is_top":false,"comment_ctime":1652697518,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100111101,"comment_content":"我们公司的测试就是全人工测试，都是由测试人员手工一个个操作的，测试质量可想而知。主要是现在公司的主营系统也已经10年了，尽管架构上也不断在调整，但又不能全部重构，因为公司靠它赚钱，经常在推进系统改造时感觉好艰辛，希望能通过这门课程学习到关于如何使这个遗留系统再发光彩","like_count":1},{"had_liked":false,"id":376302,"user_name":"知更","can_delete":false,"product_type":"c1","uid":2056303,"ip_address":"广东","ucode":"31B58CE816A043","user_header":"https://static001.geekbang.org/account/avatar/00/1f/60/6f/fd9831a0.jpg","comment_is_top":false,"comment_ctime":1686654275,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100111101,"comment_content":"如果没有测试的严防死守，熵增的过程就会慢慢加快，代码很快就会变得混乱不堪。\n有了测试代码就会慢一点变的混乱吗？为什么呢？","like_count":0},{"had_liked":false,"id":370216,"user_name":"Ice","can_delete":false,"product_type":"c1","uid":1082095,"ip_address":"四川","ucode":"B2C0AD8F970981","user_header":"https://static001.geekbang.org/account/avatar/00/10/82/ef/0badf9dc.jpg","comment_is_top":false,"comment_ctime":1678541778,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100111101,"comment_content":"“现代化”的三个原则\n1. 以降低认知负载为前提（提升商业价值为前提，没有商业目标的重构（“现代化”）活动都是耍流氓）\n2. 以假设驱动为指引\n3. 以增量演进为手段\n","like_count":0},{"had_liked":false,"id":367939,"user_name":"MaLu","can_delete":false,"product_type":"c1","uid":1083559,"ip_address":"广东","ucode":"A5E900B6B94FB9","user_header":"https://static001.geekbang.org/account/avatar/00/10/88/a7/fb383ef7.jpg","comment_is_top":false,"comment_ctime":1675757598,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100111101,"comment_content":"1.认识遗留系统的特点与问题  -- 标的识别 -- What\n2.面对的三个原则  -- 都指向商业价值\n3.四方面的考究 -- 全局认知\n4.演练实例  -- 做给你看\n老师的行文思路很清晰。","like_count":0},{"had_liked":false,"id":367243,"user_name":"fliyu","can_delete":false,"product_type":"c1","uid":1588873,"ip_address":"广东","ucode":"E80D318348CA47","user_header":"https://static001.geekbang.org/account/avatar/00/18/3e/89/77829168.jpg","comment_is_top":false,"comment_ctime":1675064788,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100111101,"comment_content":"改造的过程声势浩大，结果却令人扼腕。有的开启专项，抽调精英，大刀阔斧地进行整改；有的则干脆重写，企图替换原有系统。但这些行动大多都以失败而告终：有的改造完了仍然无法满足业务，新写的系统也好不到哪去，只不过是又一个遗留系统罢了。","like_count":0},{"had_liked":false,"id":363925,"user_name":"...","can_delete":false,"product_type":"c1","uid":1444578,"ip_address":"浙江","ucode":"49670311EDF894","user_header":"https://static001.geekbang.org/account/avatar/00/16/0a/e2/aa8c2de2.jpg","comment_is_top":false,"comment_ctime":1670343781,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100111101,"comment_content":"无意间发现这个课程，对于现在的工作模式很适用，期待","like_count":0},{"had_liked":false,"id":361588,"user_name":"龙哥","can_delete":false,"product_type":"c1","uid":1451669,"ip_address":"湖南","ucode":"E7ED2E7DF759A1","user_header":"https://static001.geekbang.org/account/avatar/00/16/26/95/a4e0f7ab.jpg","comment_is_top":false,"comment_ctime":1667658112,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100111101,"comment_content":"突然想起上家公司做了个重构项目，一开始奔着微服务去搞，后来搞着搞着感觉不如老系统好用，投产后客户投诉直线上升，项目组内各种扯皮\n","like_count":0},{"had_liked":false,"id":358250,"user_name":"花花大脸猫","can_delete":false,"product_type":"c1","uid":1117318,"ip_address":"江苏","ucode":"8ABDB3F7F4FB0F","user_header":"https://static001.geekbang.org/account/avatar/00/11/0c/86/8e52afb8.jpg","comment_is_top":false,"comment_ctime":1664115350,"is_pvip":true,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100111101,"comment_content":"刚接了一个系统，烂的我是 一眼看不到能够优化的尽头，希望老师的课程能帮我指导迷津了！！！","like_count":0},{"had_liked":false,"id":349455,"user_name":"磉盘","can_delete":false,"product_type":"c1","uid":1055624,"ip_address":"","ucode":"1C245991F30A73","user_header":"https://static001.geekbang.org/account/avatar/00/10/1b/88/ac69f57a.jpg","comment_is_top":false,"comment_ctime":1655976063,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100111101,"comment_content":"有模式，有方法。代码改造起来心理有底。","like_count":0},{"had_liked":false,"id":347077,"user_name":"Henry","can_delete":false,"product_type":"c1","uid":1019345,"ip_address":"","ucode":"585A9666DDE273","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8d/d1/337654ba.jpg","comment_is_top":false,"comment_ctime":1653698605,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100111101,"comment_content":"醍醐灌頂","like_count":0}]}