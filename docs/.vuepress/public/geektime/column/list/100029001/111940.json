{"id":111940,"title":"29 | æˆ‘åº”è¯¥è¿ç§»åˆ°HTTPSå—ï¼Ÿ","content":"<p>ä»Šå¤©æ˜¯â€œå®‰å…¨ç¯‡â€çš„æœ€åä¸€è®²ï¼Œæˆ‘ä»¬å·²ç»å­¦å®Œäº†HTTPSã€TLSç›¸å…³çš„å¤§éƒ¨åˆ†çŸ¥è¯†ã€‚ä¸è¿‡ï¼Œæˆ–è®¸ä½ å¿ƒé‡Œè¿˜ä¼šæœ‰ä¸€äº›å›°æƒ‘ï¼š</p><p>â€œHTTPSè¿™ä¹ˆå¤æ‚ï¼Œæˆ‘æ˜¯å¦åº”è¯¥è¿ç§»åˆ°HTTPSå‘¢ï¼Ÿå®ƒèƒ½å¸¦æ¥å“ªäº›å¥½å¤„å‘¢ï¼Ÿå…·ä½“åˆåº”è¯¥æ€ä¹ˆå®æ–½è¿ç§»å‘¢ï¼Ÿâ€</p><p>è¿™äº›é—®é¢˜ä¸å•æ˜¯ä½ ï¼Œä¹Ÿæ˜¯å…¶ä»–å¾ˆå¤šäººï¼Œè¿˜æœ‰å½“åˆçš„æˆ‘çš„çœŸå®æƒ³æ³•ï¼Œæ‰€ä»¥ä»Šå¤©æˆ‘å°±æ¥è·Ÿä½ èŠèŠè¿™æ–¹é¢çš„äº‹æƒ…ã€‚</p><h2>è¿ç§»çš„å¿…è¦æ€§</h2><p>å¦‚æœä½ åšç§»åŠ¨åº”ç”¨å¼€å‘çš„è¯ï¼Œé‚£ä¹ˆå°±ä¸€å®šçŸ¥é“ï¼ŒAppleã€Androidã€æŸä¿¡ç­‰å¼€å‘å¹³å°åœ¨2017å¹´å°±ç›¸ç»§å‘å‡ºé€šçŸ¥ï¼Œè¦æ±‚æ‰€æœ‰çš„åº”ç”¨å¿…é¡»ä½¿ç”¨HTTPSè¿æ¥ï¼Œç¦æ­¢ä¸å®‰å…¨çš„HTTPã€‚</p><p>åœ¨å°å¼æœºä¸Šï¼Œä¸»æµçš„æµè§ˆå™¨Chromeã€Firefoxç­‰ä¹Ÿæ—©å°±å¼€å§‹â€œå¼ºæ¨â€HTTPSï¼ŒæŠŠHTTPç«™ç‚¹æ‰“ä¸Šâ€œä¸å®‰å…¨â€çš„æ ‡ç­¾ï¼Œç»™ç”¨æˆ·ä»¥â€œå¿ƒç†å‹åŠ›â€ã€‚</p><p>Googleç­‰æœç´¢å·¨å¤´è¿˜åˆ©ç”¨è‡ªèº«çš„â€œè¯è¯­æƒâ€ä¼˜åŠ¿ï¼Œé™ä½HTTPç«™ç‚¹çš„æ’åï¼Œè€Œç»™HTTPSæ›´å¤§çš„æƒé‡ï¼ŒåŠ›å›¾è®©ç½‘æ°‘åªè®¿é—®åˆ°HTTPSç½‘ç«™ã€‚</p><p>è¿™äº›æ‰‹æ®µéƒ½é€æ¸â€œæŒ¤å‹â€äº†çº¯æ˜æ–‡HTTPçš„ç”Ÿå­˜ç©ºé—´ï¼Œ<span class=\"orange\">â€œè¿ç§»åˆ°HTTPSâ€å·²ç»ä¸æ˜¯â€œè¦ä¸è¦åšâ€çš„é—®é¢˜ï¼Œè€Œæ˜¯â€œè¦æ€ä¹ˆåšâ€çš„é—®é¢˜äº†</span>ã€‚HTTPSçš„å¤§æ½®æ— æ³•é˜»æŒ¡ï¼Œå¦‚æœè¿˜æ˜¯æ­»å®ˆç€HTTPï¼Œé‚£ä¹ˆæ— ç–‘ä¼šè¢«å†²åˆ·åˆ°äº’è”ç½‘çš„è§’è½é‡Œã€‚</p><p>ç›®å‰å›½å†…å¤–çš„è®¸å¤šçŸ¥åå¤§ç«™éƒ½å·²ç»å®ç°äº†â€œå…¨ç«™HTTPSâ€ï¼Œæ‰“å¼€å¸¸ç”¨çš„æŸå®ã€æŸä¸œã€æŸæµªï¼Œéƒ½å¯ä»¥åœ¨æµè§ˆå™¨çš„åœ°å€æ é‡Œçœ‹åˆ°â€œå°é”å¤´â€ï¼Œå¦‚æœä½ æ­£åœ¨ç»´æŠ¤çš„ç½‘ç«™è¿˜æ²¡æœ‰å®æ–½HTTPSï¼Œé‚£å¯è¦æŠ“ç‚¹ç´§äº†ã€‚</p><!-- [[[read_end]]] --><h2>è¿ç§»çš„é¡¾è™‘</h2><p>æ®æˆ‘è§‚å¯Ÿï¼Œé˜»ç¢HTTPSå®æ–½çš„å› ç´ è¿˜æœ‰ä¸€äº›è¿™æ ·é‚£æ ·çš„é¡¾è™‘ï¼Œæˆ‘æ€»ç»“å‡ºäº†ä¸‰ä¸ªæ¯”è¾ƒæµè¡Œçš„è§‚ç‚¹ï¼šâ€œ<span class=\"orange\">æ…¢ã€è´µã€éš¾</span>â€ã€‚</p><p>æ‰€è°“â€œ<span class=\"orange\">æ…¢</span>â€ï¼Œæ˜¯æŒ‡æƒ¯æ€§æ€ç»´ï¼Œæ‹¿ä»¥å‰çš„æ•°æ®æ¥è¯„ä¼°HTTPSçš„æ€§èƒ½ï¼Œè®¤ä¸ºHTTPSä¼šå¢åŠ æœåŠ¡å™¨çš„æˆæœ¬ï¼Œå¢åŠ å®¢æˆ·ç«¯çš„æ—¶å»¶ï¼Œå½±å“ç”¨æˆ·ä½“éªŒã€‚</p><p>å…¶å®ç°åœ¨æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯çš„è¿ç®—èƒ½åŠ›éƒ½å·²ç»æœ‰äº†å¾ˆå¤§çš„æå‡ï¼Œæ€§èƒ½æ–¹é¢å®Œå…¨æ²¡æœ‰æ‹…å¿ƒçš„å¿…è¦ï¼Œè€Œä¸”è¿˜å¯ä»¥åº”ç”¨å¾ˆå¤šçš„ä¼˜åŒ–è§£å†³æ–¹æ¡ˆï¼ˆå‚è§<a href=\"https://time.geekbang.org/column/article/111287\">ç¬¬28è®²</a>ï¼‰ã€‚æ ¹æ®Googleç­‰å…¬å¸çš„è¯„ä¼°ï¼Œåœ¨ç»è¿‡é€‚å½“ä¼˜åŒ–ä¹‹åï¼ŒHTTPSçš„é¢å¤–CPUæˆæœ¬å°äº1%ï¼Œé¢å¤–çš„ç½‘ç»œæˆæœ¬å°äº2%ï¼Œå¯ä»¥è¯´æ˜¯ä¸æ— åŠ å¯†çš„HTTPç›¸å·®æ— å‡ ã€‚</p><p>æ‰€è°“â€œ<span class=\"orange\">è´µ</span>â€ï¼Œä¸»è¦æ˜¯æŒ‡è¯ä¹¦ç”³è¯·å’Œç»´æŠ¤çš„æˆæœ¬å¤ªé«˜ï¼Œç½‘ç«™éš¾ä»¥æ‰¿æ‹…ã€‚</p><p>è¿™ä¹Ÿå±äºæƒ¯æ€§æ€ç»´ï¼Œåœ¨æ—©å‡ å¹´çš„ç¡®æ˜¯ä¸ªé—®é¢˜ï¼Œå‘CAç”³è¯·è¯ä¹¦çš„è¿‡ç¨‹ä¸ä»…éº»çƒ¦ï¼Œè€Œä¸”ä»·æ ¼æ˜‚è´µï¼Œæ¯å¹´è¦äº¤å‡ åƒç”šè‡³å‡ ä¸‡å…ƒã€‚</p><p>ä½†ç°åœ¨å°±ä¸ä¸€æ ·äº†ï¼Œä¸ºäº†æ¨å¹¿HTTPSï¼Œå¾ˆå¤šäº‘æœåŠ¡å‚å•†éƒ½æä¾›äº†ä¸€é”®ç”³è¯·ã€ä»·æ ¼ä½å»‰çš„è¯ä¹¦ï¼Œè€Œä¸”è¿˜å‡ºç°äº†ä¸“é—¨é¢å‘å…è´¹è¯ä¹¦çš„CAï¼Œå…¶ä¸­æœ€è‘—åçš„å°±æ˜¯â€œ<strong>Letâ€™s Encrypt</strong>â€ã€‚</p><p>æ‰€è°“çš„â€œ<span class=\"orange\">éš¾</span>â€ï¼Œæ˜¯æŒ‡HTTPSæ¶‰åŠçš„çŸ¥è¯†ç‚¹å¤ªå¤šã€å¤ªå¤æ‚ï¼Œæœ‰ä¸€å®šçš„æŠ€æœ¯é—¨æ§›ï¼Œä¸èƒ½å¾ˆå¿«ä¸Šæ‰‹ã€‚</p><p>è¿™ç¬¬ä¸‰ä¸ªé¡¾è™‘æ¯”è¾ƒç°å®ï¼ŒHTTPSèƒŒåå…³è”åˆ°äº†å¯†ç å­¦ã€TLSã€PKIç­‰è®¸å¤šé¢†åŸŸï¼Œä¸æ˜¯çŸ­çŸ­å‡ å‘¨ã€å‡ ä¸ªæœˆå°±èƒ½å¤Ÿç²¾é€šçš„ã€‚ä½†å®æ–½HTTPSä¹Ÿå¹¶ä¸éœ€è¦æŠŠè¿™äº›å®Œå…¨æŒæ¡ï¼Œåªè¦æŠ“ä½å°‘æ•°å‡ ä¸ªè¦ç‚¹å°±å¥½ï¼Œä¸‹é¢æˆ‘å°±æ¥å¸®ä½ é€ä¸ªè§£å†³ä¸€äº›å…³é”®çš„â€œéš¾ç‚¹â€ã€‚</p><h2>ç”³è¯·è¯ä¹¦</h2><p>è¦æŠŠç½‘ç«™ä»HTTPåˆ‡æ¢åˆ°HTTPSï¼Œé¦–å…ˆè¦åšçš„å°±æ˜¯ä¸ºç½‘ç«™ç”³è¯·ä¸€å¼ è¯ä¹¦ã€‚</p><p>å¤§å‹ç½‘ç«™å‡ºäºä¿¡èª‰ã€å…¬å¸å½¢è±¡çš„è€ƒè™‘ï¼Œé€šå¸¸ä¼šé€‰æ‹©å‘ä¼ ç»Ÿçš„CAç”³è¯·è¯ä¹¦ï¼Œä¾‹å¦‚DigiCertã€GlobalSignï¼Œè€Œä¸­å°å‹ç½‘ç«™å®Œå…¨å¯ä»¥é€‰æ‹©ä½¿ç”¨â€œLetâ€™s Encryptâ€è¿™æ ·çš„å…è´¹è¯ä¹¦ï¼Œæ•ˆæœä¹Ÿå®Œå…¨ä¸è¾“äºé‚£äº›æ”¶è´¹çš„è¯ä¹¦ã€‚</p><p>â€œ<strong>Letâ€™s Encrypt</strong>â€ä¸€ç›´åœ¨æ¨åŠ¨è¯ä¹¦çš„è‡ªåŠ¨åŒ–éƒ¨ç½²ï¼Œä¸ºæ­¤è¿˜å®ç°äº†ä¸“é—¨çš„ACMEåè®®ï¼ˆRFC8555ï¼‰ã€‚æœ‰å¾ˆå¤šçš„å®¢æˆ·ç«¯è½¯ä»¶å¯ä»¥å®Œæˆç”³è¯·ã€éªŒè¯ã€ä¸‹è½½ã€æ›´æ–°çš„â€œä¸€æ¡é¾™â€æ“ä½œï¼Œæ¯”å¦‚Certbotã€acme.shç­‰ç­‰ï¼Œéƒ½å¯ä»¥åœ¨â€œLetâ€™s Encryptâ€ç½‘ç«™ä¸Šæ‰¾åˆ°ï¼Œç”¨æ³•å¾ˆç®€å•ï¼Œç›¸å…³çš„æ–‡æ¡£ä¹Ÿå¾ˆè¯¦ç»†ï¼Œå‡ åˆ†é’Ÿå°±èƒ½å®Œæˆç”³è¯·ï¼Œæ‰€ä»¥æˆ‘åœ¨è¿™é‡Œå°±ä¸ç»†è¯´äº†ã€‚</p><p>ä¸è¿‡æˆ‘å¿…é¡»æé†’ä½ å‡ ä¸ªæ³¨æ„äº‹é¡¹ã€‚</p><p>ç¬¬ä¸€ï¼Œç”³è¯·è¯ä¹¦æ—¶åº”å½“åŒæ—¶ç”³è¯·RSAå’ŒECDSAä¸¤ç§è¯ä¹¦ï¼Œåœ¨Nginxé‡Œé…ç½®æˆåŒè¯ä¹¦éªŒè¯ï¼Œè¿™æ ·æœåŠ¡å™¨å¯ä»¥è‡ªåŠ¨é€‰æ‹©å¿«é€Ÿçš„æ¤­åœ†æ›²çº¿è¯ä¹¦ï¼ŒåŒæ—¶ä¹Ÿå…¼å®¹åªæ”¯æŒRSAçš„å®¢æˆ·ç«¯ã€‚</p><p>ç¬¬äºŒï¼Œå¦‚æœç”³è¯·RSAè¯ä¹¦ï¼Œç§é’¥è‡³å°‘è¦2048ä½ï¼Œæ‘˜è¦ç®—æ³•åº”è¯¥é€‰ç”¨SHA-2ï¼Œä¾‹å¦‚SHA256ã€SHA384ç­‰ã€‚</p><p>ç¬¬ä¸‰ï¼Œå‡ºäºå®‰å…¨çš„è€ƒè™‘ï¼Œâ€œLetâ€™s Encryptâ€è¯ä¹¦çš„æœ‰æ•ˆæœŸå¾ˆçŸ­ï¼Œåªæœ‰90å¤©ï¼Œæ—¶é—´ä¸€åˆ°å°±ä¼šè¿‡æœŸå¤±æ•ˆï¼Œæ‰€ä»¥å¿…é¡»è¦å®šæœŸæ›´æ–°ã€‚ä½ å¯ä»¥åœ¨crontabé‡ŒåŠ ä¸ªæ¯å‘¨æˆ–æ¯æœˆä»»åŠ¡ï¼Œå‘é€æ›´æ–°è¯·æ±‚ï¼Œä¸è¿‡å¾ˆå¤šACMEå®¢æˆ·ç«¯ä¼šè‡ªåŠ¨æ·»åŠ è¿™æ ·çš„å®šæœŸä»»åŠ¡ï¼Œå®Œå…¨ä¸ç”¨ä½ æ“å¿ƒã€‚</p><h2>é…ç½®HTTPS</h2><p>æå®šäº†è¯ä¹¦ï¼Œæ¥ä¸‹æ¥å°±æ˜¯é…ç½®WebæœåŠ¡å™¨ï¼Œåœ¨443ç«¯å£ä¸Šå¼€å¯HTTPSæœåŠ¡äº†ã€‚</p><p>è¿™åœ¨Nginxä¸Šéå¸¸ç®€å•ï¼Œåªè¦åœ¨â€œlistenâ€æŒ‡ä»¤åé¢åŠ ä¸Šå‚æ•°â€œsslâ€ï¼Œå†é…ä¸Šåˆšæ‰çš„è¯ä¹¦æ–‡ä»¶å°±å¯ä»¥å®ç°æœ€åŸºæœ¬çš„HTTPSã€‚</p><pre><code>listen                443 ssl;\n\nssl_certificate       xxx_rsa.crt;  #rsa2048 cert\nssl_certificate_key   xxx_rsa.key;  #rsa2048 private key\n\nssl_certificate       xxx_ecc.crt;  #ecdsa cert\nssl_certificate_key   xxx_ecc.key;  #ecdsa private ke\n</code></pre><p>ä¸ºäº†æé«˜HTTPSçš„å®‰å…¨ç³»æ•°å’Œæ€§èƒ½ï¼Œä½ è¿˜å¯ä»¥å¼ºåˆ¶Nginxåªæ”¯æŒTLS1.2ä»¥ä¸Šçš„åè®®ï¼Œæ‰“å¼€â€œSession Ticketâ€ä¼šè¯å¤ç”¨ï¼š</p><pre><code>ssl_protocols               TLSv1.2 TLSv1.3;\n\nssl_session_timeout         5m;\nssl_session_tickets         on;\nssl_session_ticket_key      ticket.key;\n</code></pre><p>å¯†ç å¥—ä»¶çš„é€‰æ‹©æ–¹é¢ï¼Œæˆ‘ç»™ä½ çš„å»ºè®®æ˜¯ä»¥æœåŠ¡å™¨çš„å¥—ä»¶ä¼˜å…ˆã€‚è¿™æ ·å¯ä»¥é¿å…æ¶æ„å®¢æˆ·ç«¯æ•…æ„é€‰æ‹©è¾ƒå¼±çš„å¥—ä»¶ã€é™ä½å®‰å…¨ç­‰çº§ï¼Œç„¶åå¯†ç å¥—ä»¶å‘TLS1.3â€œçœ‹é½â€ï¼Œåªä½¿ç”¨ECDHEã€AESå’ŒChaCha20ï¼Œæ”¯æŒâ€œFalse Startâ€ã€‚</p><pre><code>ssl_prefer_server_ciphers   on;\n\n\nssl_ciphers   ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-CHACHA20-POLY1305:ECDHE+AES128:!MD5:!SHA1;\n</code></pre><p>å¦‚æœä½ çš„æœåŠ¡å™¨ä¸Šä½¿ç”¨äº†OpenSSLçš„åˆ†æ”¯BorringSSLï¼Œé‚£ä¹ˆè¿˜å¯ä»¥ä½¿ç”¨ä¸€ä¸ªç‰¹æ®Šçš„â€œç­‰ä»·å¯†ç ç»„â€ï¼ˆEqual preference cipher groupsï¼‰ç‰¹æ€§ï¼Œå®ƒå¯ä»¥è®©æœåŠ¡å™¨é…ç½®ä¸€ç»„â€œç­‰ä»·â€çš„å¯†ç å¥—ä»¶ï¼Œåœ¨è¿™äº›å¥—ä»¶é‡Œå…è®¸å®¢æˆ·ç«¯ä¼˜å…ˆé€‰æ‹©ï¼Œæ¯”å¦‚è¿™ä¹ˆé…ç½®ï¼š</p><pre><code>ssl_ciphers \n[ECDHE-ECDSA-AES128-GCM-SHA256|ECDHE-ECDSA-CHACHA20-POLY1305];\n</code></pre><p>å¦‚æœå®¢æˆ·ç«¯ç¡¬ä»¶æ²¡æœ‰AESä¼˜åŒ–ï¼ŒæœåŠ¡å™¨å°±ä¼šé¡ºç€å®¢æˆ·ç«¯çš„æ„æ€ï¼Œä¼˜å…ˆé€‰æ‹©ä¸AESâ€œç­‰ä»·â€çš„ChaCha20ç®—æ³•ï¼Œè®©å®¢æˆ·ç«¯èƒ½å¤Ÿå¿«ä¸€ç‚¹ã€‚</p><p>å…¨éƒ¨é…ç½®å®Œæˆåï¼Œä½ å¯ä»¥è®¿é—®â€œ<a href=\"https://www.ssllabs.com/\">SSLLabs</a>â€ç½‘ç«™ï¼Œæµ‹è¯•ç½‘ç«™çš„å®‰å…¨ç¨‹åº¦ï¼Œå®ƒä¼šæ¨¡æ‹Ÿå¤šç§å®¢æˆ·ç«¯å‘èµ·æµ‹è¯•ï¼Œæ‰“å‡ºä¸€ä¸ªç»¼åˆçš„è¯„åˆ†ã€‚</p><p>ä¸‹å›¾å°±æ˜¯GitHubç½‘ç«™çš„è¯„åˆ†ç»“æœï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/a6/1b/a662d410dfdaa8ab44b36cbb68ab8d1b.png?wh=1142*577\" alt=\"\"></p><h2>æœåŠ¡å™¨åç§°æŒ‡ç¤º</h2><p>é…ç½®HTTPSæœåŠ¡æ—¶è¿˜æœ‰ä¸€ä¸ªâ€œè™šæ‹Ÿä¸»æœºâ€çš„é—®é¢˜éœ€è¦è§£å†³ã€‚</p><p>åœ¨HTTPåè®®é‡Œï¼Œå¤šä¸ªåŸŸåå¯ä»¥åŒæ—¶åœ¨ä¸€ä¸ªIPåœ°å€ä¸Šè¿è¡Œï¼Œè¿™å°±æ˜¯â€œè™šæ‹Ÿä¸»æœºâ€ï¼ŒWebæœåŠ¡å™¨ä¼šä½¿ç”¨è¯·æ±‚å¤´é‡Œçš„Hostå­—æ®µï¼ˆå‚è§<a href=\"https://time.geekbang.org/column/article/100513\">ç¬¬9è®²</a>ï¼‰æ¥é€‰æ‹©ã€‚</p><p>ä½†åœ¨HTTPSé‡Œï¼Œå› ä¸ºè¯·æ±‚å¤´åªæœ‰åœ¨TLSæ¡æ‰‹ä¹‹åæ‰èƒ½å‘é€ï¼Œåœ¨æ¡æ‰‹æ—¶å°±å¿…é¡»é€‰æ‹©â€œè™šæ‹Ÿä¸»æœºâ€å¯¹åº”çš„è¯ä¹¦ï¼ŒTLSæ— æ³•å¾—çŸ¥åŸŸåçš„ä¿¡æ¯ï¼Œå°±åªèƒ½ç”¨IPåœ°å€æ¥åŒºåˆ†ã€‚æ‰€ä»¥ï¼Œæœ€æ—©çš„æ—¶å€™æ¯ä¸ªHTTPSåŸŸåå¿…é¡»ä½¿ç”¨ç‹¬ç«‹çš„IPåœ°å€ï¼Œéå¸¸ä¸æ–¹ä¾¿ã€‚</p><p>é‚£ä¹ˆæ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ</p><p>è¿™è¿˜æ˜¯å¾—ç”¨åˆ°TLSçš„â€œæ‰©å±•â€ï¼Œç»™åè®®åŠ ä¸ª<strong>SNI</strong>ï¼ˆServer Name Indicationï¼‰çš„â€œè¡¥å……æ¡æ¬¾â€ã€‚å®ƒçš„ä½œç”¨å’ŒHostå­—æ®µå·®ä¸å¤šï¼Œå®¢æˆ·ç«¯ä¼šåœ¨â€œClient Helloâ€æ—¶å¸¦ä¸ŠåŸŸåä¿¡æ¯ï¼Œè¿™æ ·æœåŠ¡å™¨å°±å¯ä»¥æ ¹æ®åå­—è€Œä¸æ˜¯IPåœ°å€æ¥é€‰æ‹©è¯ä¹¦ã€‚</p><pre><code>Extension: server_name (len=19)\n    Server Name Indication extension\n        Server Name Type: host_name (0)\n        Server Name: www.chrono.com\n</code></pre><p>Nginxå¾ˆæ—©å°±åŸºäºSNIç‰¹æ€§æ”¯æŒäº†HTTPSçš„è™šæ‹Ÿä¸»æœºï¼Œä½†åœ¨OpenRestyé‡Œå¯è¿˜ä»¥ç¼–å†™Luaè„šæœ¬ï¼Œåˆ©ç”¨Redisã€MySQLç­‰æ•°æ®åº“æ›´çµæ´»å¿«é€Ÿåœ°åŠ è½½è¯ä¹¦ã€‚</p><h2>é‡å®šå‘è·³è½¬</h2><p>ç°åœ¨æœ‰äº†HTTPSæœåŠ¡ï¼Œä½†åŸæ¥çš„HTTPç«™ç‚¹ä¹Ÿä¸èƒ½é©¬ä¸Šå¼ƒç”¨ï¼Œè¿˜æ˜¯ä¼šæœ‰å¾ˆå¤šç½‘æ°‘ä¹ æƒ¯åœ¨åœ°å€æ é‡Œç›´æ¥æ•²åŸŸåï¼ˆæˆ–è€…æ˜¯æ—§çš„ä¹¦ç­¾ã€è¶…é“¾æ¥ï¼‰ï¼Œé»˜è®¤ä½¿ç”¨HTTPåè®®è®¿é—®ã€‚</p><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬å°±éœ€è¦ç”¨åˆ°ç¬¬18è®²é‡Œçš„â€œé‡å®šå‘è·³è½¬â€æŠ€æœ¯äº†ï¼ŒæŠŠä¸å®‰å…¨çš„HTTPç½‘å€ç”¨301æˆ–302â€œé‡å®šå‘â€åˆ°æ–°çš„HTTPSç½‘ç«™ï¼Œè¿™åœ¨Nginxé‡Œä¹Ÿå¾ˆå®¹æ˜“åšåˆ°ï¼Œä½¿ç”¨â€œreturnâ€æˆ–â€œrewriteâ€éƒ½å¯ä»¥ã€‚</p><pre><code>return 301 https://$host$request_uri;             #æ°¸ä¹…é‡å®šå‘\nrewrite ^  https://$host$request_uri permanent;   #æ°¸ä¹…é‡å®šå‘\n</code></pre><p>ä½†è¿™ç§æ–¹å¼æœ‰ä¸¤ä¸ªé—®é¢˜ã€‚ä¸€ä¸ªæ˜¯é‡å®šå‘å¢åŠ äº†ç½‘ç»œæˆæœ¬ï¼Œå¤šå‡ºäº†ä¸€æ¬¡è¯·æ±‚ï¼›å¦ä¸€ä¸ªæ˜¯å­˜åœ¨å®‰å…¨éšæ‚£ï¼Œé‡å®šå‘çš„å“åº”å¯èƒ½ä¼šè¢«â€œä¸­é—´äººâ€çªœæ”¹ï¼Œå®ç°â€œä¼šè¯åŠ«æŒâ€ï¼Œè·³è½¬åˆ°æ¶æ„ç½‘ç«™ã€‚</p><p>ä¸è¿‡æœ‰ä¸€ç§å«â€œ<strong>HSTS</strong>â€ï¼ˆHTTPä¸¥æ ¼ä¼ è¾“å®‰å…¨ï¼ŒHTTP Strict Transport Securityï¼‰çš„æŠ€æœ¯å¯ä»¥æ¶ˆé™¤è¿™ç§å®‰å…¨éšæ‚£ã€‚HTTPSæœåŠ¡å™¨éœ€è¦åœ¨å‘å‡ºçš„å“åº”å¤´é‡Œæ·»åŠ ä¸€ä¸ªâ€œ<strong>Strict-Transport-Security</strong>â€çš„å­—æ®µï¼Œå†è®¾å®šä¸€ä¸ªæœ‰æ•ˆæœŸï¼Œä¾‹å¦‚ï¼š</p><pre><code>Strict-Transport-Security: max-age=15768000; includeSubDomains\n</code></pre><p>è¿™ç›¸å½“äºå‘Šè¯‰æµè§ˆå™¨ï¼šæˆ‘è¿™ä¸ªç½‘ç«™å¿…é¡»ä¸¥æ ¼ä½¿ç”¨HTTPSåè®®ï¼Œåœ¨åŠå¹´ä¹‹å†…ï¼ˆ182.5å¤©ï¼‰éƒ½ä¸å…è®¸ç”¨HTTPï¼Œä½ ä»¥åå°±è‡ªå·±åšè½¬æ¢å§ï¼Œä¸è¦å†æ¥éº»çƒ¦æˆ‘äº†ã€‚</p><p>æœ‰äº†â€œHSTSâ€çš„æŒ‡ç¤ºï¼Œä»¥åæµè§ˆå™¨å†è®¿é—®åŒæ ·çš„åŸŸåçš„æ—¶å€™å°±ä¼šè‡ªåŠ¨æŠŠURIé‡Œçš„â€œhttpâ€æ”¹æˆâ€œhttpsâ€ï¼Œç›´æ¥è®¿é—®å®‰å…¨çš„HTTPSç½‘ç«™ã€‚è¿™æ ·â€œä¸­é—´äººâ€å°±å¤±å»äº†æ”»å‡»çš„æœºä¼šï¼Œè€Œä¸”å¯¹äºå®¢æˆ·ç«¯æ¥è¯´ä¹Ÿå…å»äº†ä¸€æ¬¡è·³è½¬ï¼ŒåŠ å¿«äº†è¿æ¥é€Ÿåº¦ã€‚</p><p>æ¯”å¦‚ï¼Œå¦‚æœåœ¨å®éªŒç¯å¢ƒçš„é…ç½®æ–‡ä»¶é‡Œç”¨â€œadd_headerâ€æŒ‡ä»¤æ·»åŠ â€œHSTSâ€å­—æ®µï¼š</p><pre><code>add_header Strict-Transport-Security max-age=15768000; #182.5days\n</code></pre><p>é‚£ä¹ˆChromeæµè§ˆå™¨åªä¼šåœ¨ç¬¬ä¸€æ¬¡è¿æ¥æ—¶ä½¿ç”¨HTTPåè®®ï¼Œä¹‹åå°±ä¼šéƒ½èµ°HTTPSåè®®ã€‚</p><h2>å°ç»“</h2><p>ä»Šå¤©æˆ‘ä»‹ç»äº†ä¸€äº›HTTPSè¿ç§»çš„æŠ€æœ¯è¦ç‚¹ï¼ŒæŒæ¡äº†å®ƒä»¬ä½ å°±å¯ä»¥æ­å»ºå‡ºä¸€ä¸ªå®Œæ•´çš„HTTPSç«™ç‚¹äº†ã€‚</p><p>ä½†æƒ³è¦å®ç°å¤§å‹ç½‘ç«™çš„â€œå…¨ç«™HTTPSâ€è¿˜æ˜¯éœ€è¦æœ‰å¾ˆå¤šçš„ç»†ææœ«èŠ‚çš„å·¥ä½œè¦åšï¼Œæ¯”å¦‚ä½¿ç”¨CSPï¼ˆContent Security Policyï¼‰çš„å„ç§æŒ‡ä»¤å’Œæ ‡ç­¾æ¥é…ç½®å®‰å…¨ç­–ç•¥ï¼Œä½¿ç”¨åå‘ä»£ç†æ¥é›†ä¸­â€œå¸è½½â€SSLã€‚</p><p>ç®€å•å°ç»“ä¸€ä¸‹ä»Šå¤©çš„å†…å®¹ï¼š</p><ol>\n<li><span class=\"orange\">ä»HTTPè¿ç§»åˆ°HTTPSæ˜¯â€œå¤§åŠ¿æ‰€è¶‹â€ï¼Œèƒ½åšå°±åº”è¯¥å°½æ—©åšï¼›</span></li>\n<li><span class=\"orange\">å‡çº§HTTPSé¦–å…ˆè¦ç”³è¯·æ•°å­—è¯ä¹¦ï¼Œå¯ä»¥é€‰æ‹©å…è´¹å¥½ç”¨çš„â€œLetâ€™s Encryptâ€ï¼›</span></li>\n<li><span class=\"orange\">é…ç½®HTTPSæ—¶éœ€è¦æ³¨æ„é€‰æ‹©æ°å½“çš„TLSç‰ˆæœ¬å’Œå¯†ç å¥—ä»¶ï¼Œå¼ºåŒ–å®‰å…¨ï¼›</span></li>\n<li><span class=\"orange\">åŸæœ‰çš„HTTPç«™ç‚¹å¯ä»¥ä¿ç•™ä½œä¸ºè¿‡æ¸¡ï¼Œä½¿ç”¨301é‡å®šå‘åˆ°HTTPSã€‚</span></li>\n</ol><h2>è¯¾ä¸‹ä½œä¸š</h2><ol>\n<li>ç»“åˆä½ çš„å®é™…å·¥ä½œï¼Œåˆ†æä¸€ä¸‹è¿ç§»HTTPSçš„éš¾ç‚¹æœ‰å“ªäº›ï¼Œåº”è¯¥å¦‚ä½•å…‹æœï¼Ÿ</li>\n<li>å‚è€ƒä¸Šä¸€è®²ï¼Œä½ è§‰å¾—é…ç½®HTTPSæ—¶è¿˜åº”è¯¥åŠ ä¸Šå“ªäº›éƒ¨åˆ†ï¼Ÿ</li>\n</ol><p>æ¬¢è¿ä½ æŠŠè‡ªå·±çš„å­¦ä¹ ä½“ä¼šå†™åœ¨ç•™è¨€åŒºï¼Œä¸æˆ‘å’Œå…¶ä»–åŒå­¦ä¸€èµ·è®¨è®ºã€‚å¦‚æœä½ è§‰å¾—æœ‰æ‰€æ”¶è·ï¼Œä¹Ÿæ¬¢è¿æŠŠæ–‡ç« åˆ†äº«ç»™ä½ çš„æœ‹å‹ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/db/ec/dbe386f94df8f69fc0b32d2b52e3b3ec.png?wh=1769*3769\" alt=\"unpreview\"></p><p><img src=\"https://static001.geekbang.org/resource/image/56/63/56d766fc04654a31536f554b8bde7b63.jpg?wh=1110*659\" alt=\"unpreview\"></p>","neighbors":{"left":{"article_title":"28 | è¿æ¥å¤ªæ…¢è¯¥æ€ä¹ˆåŠï¼šHTTPSçš„ä¼˜åŒ–","id":111287},"right":{"article_title":"30 | æ—¶ä»£ä¹‹é£ï¼ˆä¸Šï¼‰ï¼šHTTP/2ç‰¹æ€§æ¦‚è§ˆ","id":112036}},"comments":[{"had_liked":false,"id":120233,"user_name":"å‰ç«¯è¥¿ç“œå“¥","can_delete":false,"product_type":"c1","uid":1248576,"ip_address":"","ucode":"150130C34CD1C1","user_header":"https://static001.geekbang.org/account/avatar/00/13/0d/40/f70e5653.jpg","comment_is_top":false,"comment_ctime":1564812609,"is_pvip":false,"replies":[{"id":"44214","content":"ä¸€èµ·åˆ†äº«ä½ çš„å–œæ‚¦ï¼","user_name":"ä½œè€…å›å¤","comment_id":120233,"uid":"1181974","ip_address":"","utype":1,"ctime":1564925877,"user_name_real":"chrono"}],"discussion_count":1,"race_medal":0,"score":"250672915777","product_id":100029001,"comment_content":"æ„Ÿè°¢è€å¸ˆçš„è¿™ç¯‡æ–‡ç« ï¼ä»Šå¤©æˆ‘æˆåŠŸå°†ä¸ªäººåšå®¢ç½‘ç«™è¿ç§»åˆ° HTTPS äº†ï¼Œé«˜å…´ã€‚<br>æˆ‘ä¹‹å‰ä¸€ç›´æ²¡æœ‰æŠŠç½‘ç«™è¿ç§»åˆ° HTTPS ï¼Œä¸»è¦æ˜¯å› ä¸ºéœ€è¦å­¦å¾ˆå¤šä¸œè¥¿ï¼Œæ¯”å¦‚å¦‚ä½•é…ç½® nginxï¼Œhttps çš„ç›¸å…³çŸ¥è¯†ï¼Œè¯ä¹¦çš„ç”³è¯·ç­‰ç­‰ï¼ˆåšå¼€å‘çš„éƒ½çŸ¥é“ï¼Œé…ç½®è¿™ç§ä¸œè¥¿çœŸçš„å¾ˆéº»çƒ¦ï¼‰ã€‚æ­¤å¤–è¯¯è§£ç”³è¯·è¯ä¹¦æ˜¯è¦èŠ±å¾ˆå¤šé’±çš„ï¼ˆçœ‹äº†è¿™ç« æ‰çŸ¥é“æœ‰è¿™ä¹ˆæ–¹ä¾¿ç®€å•çš„å…è´¹è¯ä¹¦ï¼‰ï¼Œå¦å¤–åˆè§‰å¾—æˆ‘è¿™ä¸ªåªæ˜¯ä¸ªä¸ªäººæŠ€æœ¯åšå®¢ç½‘ç«™ï¼Œhttp å…¶å®ä¹Ÿå¯ä»¥ï¼Œå°±ä¸€ç›´æ”¾åœ¨é‚£é‡Œä¸åšäº†ã€‚<br>ä¸è¿‡å­¦äº†è¿™ç« å’Œå‰é¢çš„å†…å®¹ï¼Œå°±æ˜ç™½çš„ HTTPS å¤§æ¦‚çš„è¿‡ç¨‹ï¼Œä¹Ÿå­¦ä¼šäº†è¿ç§» HTTPS éœ€è¦æ³¨æ„çš„ä¸€äº›ç»†èŠ‚ã€‚ä»Šå¤©ä¹Ÿæ˜¯æˆåŠŸå°†è‡ªå·±çš„ä¸ªäººåšå®¢è¿ç§»åˆ° HTTPS äº†ï¼ŒæœŸé—´ä¹Ÿæ˜¯å„ç§é—®é¢˜ä¸æ–­ï¼Œä¹Ÿæ˜¯ä¸€ä¸€è§£å†³ï¼ŒæŠ˜è…¾äº†å¾ˆä¹…ã€‚ä¸è¿‡çœ‹åˆ°è‡ªå·±çš„ç½‘ç«™ä¸Šåœ¨ä¹Ÿæ²¡æœ‰â€œä¸å®‰å…¨â€çš„æ ‡ç­¾ï¼Œä¹Ÿæ˜¯è§‰å¾—éå¸¸æœ‰æˆå°±æ„Ÿã€‚","like_count":58,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461251,"discussion_content":"ä¸€èµ·åˆ†äº«ä½ çš„å–œæ‚¦ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564925877,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":145467,"user_name":"Demon.Lee","can_delete":false,"product_type":"c1","uid":1052859,"ip_address":"","ucode":"7F0E5493A8E345","user_header":"https://static001.geekbang.org/account/avatar/00/10/10/bb/f1061601.jpg","comment_is_top":false,"comment_ctime":1572278687,"is_pvip":false,"replies":[{"id":"56148","content":"httpsè¦æ¯”httpå¤æ‚å¾—å¤šï¼Œå› ä¸ºæ¶‰åŠåˆ°å®‰å…¨ï¼Œæ‰€ä»¥â€œä¸‡äº‹å°å¿ƒâ€ã€‚<br><br>å¯ä»¥ç»“åˆæŠ“åŒ…ã€Chromeå·¥å…·ï¼Œå¤šåšå®éªŒã€‚","user_name":"ä½œè€…å›å¤","comment_id":145467,"uid":"1181974","ip_address":"","utype":1,"ctime":1572310863,"user_name_real":"chrono"}],"discussion_count":1,"race_medal":1,"score":"44521951647","product_id":100029001,"comment_content":"å®‰å…¨ç¯‡å­¦ä¹ å®Œäº†ï¼Œå¤§éƒ¨åˆ†éƒ½æ²¡è®°ä½ï¼Œçœ‹æ ·å­ï¼Œèµ·ç å¾—åˆ·3éä»¥ä¸ŠğŸ®","like_count":10,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":472412,"discussion_content":"httpsè¦æ¯”httpå¤æ‚å¾—å¤šï¼Œå› ä¸ºæ¶‰åŠåˆ°å®‰å…¨ï¼Œæ‰€ä»¥â€œä¸‡äº‹å°å¿ƒâ€ã€‚\n\nå¯ä»¥ç»“åˆæŠ“åŒ…ã€Chromeå·¥å…·ï¼Œå¤šåšå®éªŒã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572310863,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":119882,"user_name":"è®¸ç«¥ç«¥","can_delete":false,"product_type":"c1","uid":1003005,"ip_address":"","ucode":"4B799C0C6BC678","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4d/fd/0aa0e39f.jpg","comment_is_top":false,"comment_ctime":1564717544,"is_pvip":false,"replies":[{"id":"44018","content":"å¾ˆå¥½çš„å®è·µæœºä¼šã€‚","user_name":"ä½œè€…å›å¤","comment_id":119882,"uid":"1181974","ip_address":"","utype":1,"ctime":1564719679,"user_name_real":"chrono"}],"discussion_count":1,"race_medal":0,"score":"23039554024","product_id":100029001,"comment_content":"ä¸ªäººåšå®¢ç½‘ç«™å¾ˆæ—©å°±ç”¨ä¸Šäº†httpsï¼Œä½†è€å¸ˆè¯´çš„é‚£äº›Nginxä¼˜åŒ–å‚æ•°æ²¡æœ‰ç”¨ä¸Šï¼Œæˆ‘è¿™å°±å»åŠ ä¸Šã€‚","like_count":5,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461111,"discussion_content":"å¾ˆå¥½çš„å®è·µæœºä¼šã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564719679,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":233252,"user_name":"çš®ç‰¹å°”","can_delete":false,"product_type":"c1","uid":1017161,"ip_address":"","ucode":"313862C91DD325","user_header":"https://static001.geekbang.org/account/avatar/00/0f/85/49/585c69c4.jpg","comment_is_top":false,"comment_ctime":1594271117,"is_pvip":false,"replies":[{"id":"86048","content":"è¿™ä¸ªé—®é¢˜ä¸å¥½å›ç­”å•Šï¼Œæ˜¯é€å‘½é¢˜â€¦â€¦","user_name":"ä½œè€…å›å¤","comment_id":233252,"uid":"1181974","ip_address":"","utype":1,"ctime":1594272624,"user_name_real":"ç½—å‰‘é”‹"}],"discussion_count":2,"race_medal":1,"score":"18774140301","product_id":100029001,"comment_content":"ESNIæŠŠè¯·æ±‚åŸŸåä¹ŸåŠ å¯†äº†ï¼ŒGFWçš„æ‹¦æˆªæ˜¯ä¸æ˜¯å°±å¤±æ•ˆäº†ï¼Ÿ","like_count":4,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":500960,"discussion_content":"è¿™ä¸ªé—®é¢˜ä¸å¥½å›ç­”å•Šï¼Œæ˜¯é€å‘½é¢˜â€¦â€¦","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1594272624,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1017161,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/85/49/585c69c4.jpg","nickname":"çš®ç‰¹å°”","note":"","ucode":"313862C91DD325","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":289936,"discussion_content":"å“ˆå“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594275583,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":119881,"user_name":"é˜¿é”‹","can_delete":false,"product_type":"c1","uid":1127761,"ip_address":"","ucode":"7AF449ABA89242","user_header":"https://static001.geekbang.org/account/avatar/00/11/35/51/c616f95a.jpg","comment_is_top":false,"comment_ctime":1564717242,"is_pvip":false,"replies":[{"id":"44019","content":"è™šæ‹Ÿä¸»æœºä¸ä»£ç†æ²¡æœ‰å…³ç³»ï¼Œæ˜¯httpæœåŠ¡å™¨é‡Œçš„æ¦‚å¿µï¼Œåœ¨ä¸€ä¸ªipåœ°å€ä¸Šå­˜åœ¨å¤šä¸ªåŸŸåï¼ˆå³ä¸»æœºï¼‰ï¼Œæ‰€ä»¥å«â€œè™šæ‹Ÿä¸»æœºâ€ã€‚<br><br>å› ä¸ºä¸èƒ½ç”¨ipåœ°å€åŒºåˆ†ï¼Œæ‰€ä»¥å°±è¦ç”¨hostå­—æ®µï¼ŒåŒºåˆ†ä¸åŒçš„ä¸»æœºï¼ˆåŸŸåã€ç½‘ç«™ï¼‰ã€‚","user_name":"ä½œè€…å›å¤","comment_id":119881,"uid":"1181974","ip_address":"","utype":1,"ctime":1564719821,"user_name_real":"chrono"}],"discussion_count":2,"race_medal":0,"score":"18744586426","product_id":100029001,"comment_content":"ä¸Šæ–‡æåˆ°çš„è™šæ‹Ÿä¸»æœºï¼Œè·Ÿæ­£å‘ä»£ç†ï¼Œåå‘ä»£ç†ï¼Œæœ‰ä»€ä¹ˆåŒºåˆ«ã€‚","like_count":4,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461110,"discussion_content":"è™šæ‹Ÿä¸»æœºä¸ä»£ç†æ²¡æœ‰å…³ç³»ï¼Œæ˜¯httpæœåŠ¡å™¨é‡Œçš„æ¦‚å¿µï¼Œåœ¨ä¸€ä¸ªipåœ°å€ä¸Šå­˜åœ¨å¤šä¸ªåŸŸåï¼ˆå³ä¸»æœºï¼‰ï¼Œæ‰€ä»¥å«â€œè™šæ‹Ÿä¸»æœºâ€ã€‚\n\nå› ä¸ºä¸èƒ½ç”¨ipåœ°å€åŒºåˆ†ï¼Œæ‰€ä»¥å°±è¦ç”¨hostå­—æ®µï¼ŒåŒºåˆ†ä¸åŒçš„ä¸»æœºï¼ˆåŸŸåã€ç½‘ç«™ï¼‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564719821,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1127761,"avatar":"https://static001.geekbang.org/account/avatar/00/11/35/51/c616f95a.jpg","nickname":"é˜¿é”‹","note":"","ucode":"7AF449ABA89242","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3698,"discussion_content":"è™šæ‹Ÿä¸»æœºæ˜¯åœ¨ç‰©ç†ä¸»æœºä¸Šéƒ¨ç½²å¯¹ä¸ªåŸŸåä¸ä¸€æ ·çš„httpæœåŠ¡ï¼Œè·Ÿæ­£å‘ä»£ç†ï¼Œåå‘ä»£ç†ï¼Œæ²¡ç›´æ¥å…³ç³»ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564717927,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":119922,"user_name":"è®¸ç«¥ç«¥","can_delete":false,"product_type":"c1","uid":1003005,"ip_address":"","ucode":"4B799C0C6BC678","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4d/fd/0aa0e39f.jpg","comment_is_top":false,"comment_ctime":1564730834,"is_pvip":false,"replies":[{"id":"44037","content":"æ”¯æŒtls1.3ä¸»è¦å°±æ˜¯OpenSSLè¦å‡çº§åˆ°1.11ï¼ŒNginxçš„ç‰ˆæœ¬ç”¨è¾ƒæ–°çš„å°±å¥½ã€‚<br><br>å› ä¸ºNginxçš„sslåŠŸèƒ½ä¾èµ–äºåº•å±‚çš„OpenSSLï¼Œæ‰€ä»¥æ”¯æŒtls1.3æ¯”è¾ƒç®€å•ï¼Œåªè¦é‡æ–°ç¼–è¯‘å°±å¥½ã€‚<br><br>è¿™æ–¹é¢å¥½åƒæ²¡ä»€ä¹ˆç®€å•çš„æ–¹æ³•ï¼Œä¸è¿‡ä¹Ÿä¸æ˜¯å¾ˆéº»çƒ¦ã€‚<br>","user_name":"ä½œè€…å›å¤","comment_id":119922,"uid":"1181974","ip_address":"","utype":1,"ctime":1564733011,"user_name_real":"chrono"}],"discussion_count":1,"race_medal":0,"score":"14449632722","product_id":100029001,"comment_content":"è€å¸ˆä½ å¥½ï¼Œåˆšæ‰æäº†åŠå¤©ç¼–è¯‘å¥½äº†Nginxæ–°ç‰ˆæœ¬With OpenSSLæ‰å¼€å¯TLSv1.3ï¼Œä¸çŸ¥é“è€å¸ˆæ˜¯æ€ä¹ˆå®‰è£…è¿™äº›è½¯ä»¶çš„ï¼Œæœ‰ä»€ä¹ˆå¥½çš„å»ºè®®å—ï¼Ÿ<br>nginx version: nginx&#47;1.16.0<br>built by gcc 4.8.5 20150623 (Red Hat 4.8.5-36) (GCC) <br>built with OpenSSL 1.1.1  11 Sep 2018","like_count":3,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461131,"discussion_content":"æ”¯æŒtls1.3ä¸»è¦å°±æ˜¯OpenSSLè¦å‡çº§åˆ°1.11ï¼ŒNginxçš„ç‰ˆæœ¬ç”¨è¾ƒæ–°çš„å°±å¥½ã€‚\n\nå› ä¸ºNginxçš„sslåŠŸèƒ½ä¾èµ–äºåº•å±‚çš„OpenSSLï¼Œæ‰€ä»¥æ”¯æŒtls1.3æ¯”è¾ƒç®€å•ï¼Œåªè¦é‡æ–°ç¼–è¯‘å°±å¥½ã€‚\n\nè¿™æ–¹é¢å¥½åƒæ²¡ä»€ä¹ˆç®€å•çš„æ–¹æ³•ï¼Œä¸è¿‡ä¹Ÿä¸æ˜¯å¾ˆéº»çƒ¦ã€‚\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564733011,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":318926,"user_name":"åŠŸå¤«ç†ŠçŒ«","can_delete":false,"product_type":"c1","uid":2732243,"ip_address":"","ucode":"D124F4FA4E816F","user_header":"https://static001.geekbang.org/account/avatar/00/29/b0/d3/200e82ff.jpg","comment_is_top":false,"comment_ctime":1635484338,"is_pvip":true,"replies":[{"id":"115611","content":"å‰ç«¯çš„vueä¸æ˜¯å¾ˆäº†è§£ï¼Œä½†å¦‚æœæ˜¯è®¿é—®httpsæœåŠ¡å™¨ï¼Œä¸€èˆ¬æ˜¯ä¸éœ€è¦å®¢æˆ·ç«¯æä¾›è¯ä¹¦çš„ï¼Œå› ä¸ºç°åœ¨å¤§å¤šæ•°æ˜¯å•å‘è®¤è¯ï¼ŒåªéªŒè¯æœåŠ¡å™¨çš„è¯ä¹¦ã€‚","user_name":"ä½œè€…å›å¤","comment_id":318926,"uid":"1181974","ip_address":"","utype":1,"ctime":1635496060,"user_name_real":"ç½—å‰‘é”‹"}],"discussion_count":1,"race_medal":0,"score":"10225418930","product_id":100029001,"comment_content":"vue-cilçš„vue-configé‡Œå¯ä»¥ç›´æ¥é€‰æ‹©å‘é€åè®®æ˜¯httpè¿˜æ˜¯httpsï¼Œåªéœ€è¦åœ¨httpsé€‰é¡¹åè®¾ç½®ä¸ºtrueå°±å¯ä»¥ï¼Œä½†å¥½åƒè¿˜æ˜¯éœ€è¦æ•°å­—è¯ä¹¦ç”³è¯·ä¹‹ç±»çš„","like_count":2,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529431,"discussion_content":"å‰ç«¯çš„vueä¸æ˜¯å¾ˆäº†è§£ï¼Œä½†å¦‚æœæ˜¯è®¿é—®httpsæœåŠ¡å™¨ï¼Œä¸€èˆ¬æ˜¯ä¸éœ€è¦å®¢æˆ·ç«¯æä¾›è¯ä¹¦çš„ï¼Œå› ä¸ºç°åœ¨å¤§å¤šæ•°æ˜¯å•å‘è®¤è¯ï¼ŒåªéªŒè¯æœåŠ¡å™¨çš„è¯ä¹¦ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635496060,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":324918,"user_name":"Lostoy","can_delete":false,"product_type":"c1","uid":1103489,"ip_address":"","ucode":"23F893EAF27DD3","user_header":"https://static001.geekbang.org/account/avatar/00/10/d6/81/2331554c.jpg","comment_is_top":false,"comment_ctime":1638716567,"is_pvip":true,"replies":[{"id":"117889","content":"å‰é¢è®²tls1.2ã€1.3çš„æ—¶å€™å·²ç»è¯´è¿‡é€šä¿¡è¿‡ç¨‹äº†ï¼Œå®¢æˆ·ç«¯æ˜¯æµè§ˆå™¨ã€curléƒ½å¯ä»¥ã€‚<br><br>è¿™é‡Œåªè¯´äº†ç›®å‰æœ€å¸¸ç”¨çš„å•å‘è®¤è¯ï¼Œæ‰€ä»¥å®¢æˆ·ç«¯ä¸éœ€è¦ä»»ä½•é…ç½®ï¼Œåªè¦æŒ‰ç…§åè®®çš„è§„å®šï¼ŒéªŒè¯å®ŒæœåŠ¡å™¨èº«ä»½å°±å¯ä»¥äº†ã€‚<br><br>å…·ä½“å¯ä»¥å†çœ‹çœ‹è¿™ä¸¤ä¸ªæ¡æ‰‹è¿‡ç¨‹ï¼Œæ³¨æ„æŠŠå®¢æˆ·ç«¯æ›¿æ¢æˆä½ å…³å¿ƒçš„æµè§ˆå™¨æˆ–è€…Appã€‚","user_name":"ä½œè€…å›å¤","comment_id":324918,"uid":"1181974","ip_address":"","utype":1,"ctime":1638761285,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":0,"score":"5933683863","product_id":100029001,"comment_content":"è€å¸ˆèƒ½å¦è¯´ä¸€ä¸‹æµè§ˆå™¨&#47;ç§»åŠ¨ç«¯APPå’ŒæœåŠ¡ç«¯è¿›è¡Œhttpsè¯·æ±‚çš„å®Œæ•´åŠ å¯†é…ç½®å’Œé€šä¿¡è¿‡ç¨‹ï¼Ÿä¸Šé¢åªè¯´äº†æœåŠ¡ç«¯çš„é…ç½®ï¼Œéš¾é“ç§»åŠ¨ç«¯APPæˆ–è€…æµè§ˆå™¨ä¸ç”¨åšä»»ä½•é…ç½®ï¼Ÿå¦‚æœä¸ç”¨é…ç½®é‚£æ•´ä¸ªå®‰å…¨é€šä¿¡æœºåˆ¶æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿä¸ºä»€ä¹ˆåªç”¨æœåŠ¡å™¨é…ç½®å°±å¯ä»¥äº†ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":536330,"discussion_content":"å‰é¢è®²tls1.2ã€1.3çš„æ—¶å€™å·²ç»è¯´è¿‡é€šä¿¡è¿‡ç¨‹äº†ï¼Œå®¢æˆ·ç«¯æ˜¯æµè§ˆå™¨ã€curléƒ½å¯ä»¥ã€‚\n\nè¿™é‡Œåªè¯´äº†ç›®å‰æœ€å¸¸ç”¨çš„å•å‘è®¤è¯ï¼Œæ‰€ä»¥å®¢æˆ·ç«¯ä¸éœ€è¦ä»»ä½•é…ç½®ï¼Œåªè¦æŒ‰ç…§åè®®çš„è§„å®šï¼ŒéªŒè¯å®ŒæœåŠ¡å™¨èº«ä»½å°±å¯ä»¥äº†ã€‚\n\nå…·ä½“å¯ä»¥å†çœ‹çœ‹è¿™ä¸¤ä¸ªæ¡æ‰‹è¿‡ç¨‹ï¼Œæ³¨æ„æŠŠå®¢æˆ·ç«¯æ›¿æ¢æˆä½ å…³å¿ƒçš„æµè§ˆå™¨æˆ–è€…Appã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638761285,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":290059,"user_name":"å­¦ä¸åŠ¨äº†","can_delete":false,"product_type":"c1","uid":1235562,"ip_address":"","ucode":"6855C982ECC3A8","user_header":"https://static001.geekbang.org/account/avatar/00/12/da/6a/6b96edbd.jpg","comment_is_top":false,"comment_ctime":1619341975,"is_pvip":true,"replies":[{"id":"105174","content":"æœ‰é—®é¢˜éšæ—¶æï¼Œå…±åŒè¿›æ­¥ã€‚","user_name":"ä½œè€…å›å¤","comment_id":290059,"uid":"1181974","ip_address":"","utype":1,"ctime":1619398743,"user_name_real":"ç½—å‰‘é”‹"}],"discussion_count":1,"race_medal":0,"score":"5914309271","product_id":100029001,"comment_content":"è¿™ä¸¤ç« å¯¹äºæˆ‘è¿™ç§é—¨å¤–æ±‰æ¥è¯´ï¼ŒçœŸçš„æ˜¯å¹²è´§æ»¡æ»¡","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":519098,"discussion_content":"æœ‰é—®é¢˜éšæ—¶æï¼Œå…±åŒè¿›æ­¥ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619398743,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":247444,"user_name":"î‡ å°¿å¸ƒ","can_delete":false,"product_type":"c1","uid":1476323,"ip_address":"","ucode":"D1C8BDA7540962","user_header":"https://static001.geekbang.org/account/avatar/00/16/86/e3/a31f6869.jpg","comment_is_top":false,"comment_ctime":1599709980,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5894677276","product_id":100029001,"comment_content":"â€HSTSâ€œæ— æ³•é˜²æ­¢é»‘å®¢å¯¹ç¬¬ä¸€æ¬¡è®¿é—®çš„æ”»å‡»ï¼Œæ‰€ä»¥Chromeç­‰æµè§ˆå™¨è¿˜å†…ç½®äº†ä¸€ä¸ªâ€HSTS preloadâ€œçš„åˆ—è¡¨ï¼ˆchrome:&#47;&#47;net-internals&#47;#hstsï¼‰ï¼Œåªè¦åŸŸåå†è¿™ä¸ªåˆ—è¡¨é‡Œï¼Œæ— è®ºä½•æ—¶éƒ½ä¼šå¼ºåˆ¶ä½¿ç”¨HTTPSè®¿é—®<br><br>ä¹‹å‰åœ¨å®éªŒå®¤ç¯å¢ƒè®¿é—®HTTPåè®®æ—¶å¯ä»¥çœ‹åˆ°è¯·æ±‚å¤´é‡Œæœ‰â€Upgrade-Insecure-Requests: 1â€œï¼Œå®ƒå°±æ˜¯GSPçš„ä¸€ç§ï¼Œè¡¨ç¤ºæµè§ˆå™¨æ”¯æŒå‡çº§åˆ°HTTPSåè®®","like_count":1},{"had_liked":false,"id":205486,"user_name":"å¼ ä¸‰","can_delete":false,"product_type":"c1","uid":1004092,"ip_address":"","ucode":"1155528FAE1546","user_header":"https://static001.geekbang.org/account/avatar/00/0f/52/3c/d6fcb93a.jpg","comment_is_top":false,"comment_ctime":1586642822,"is_pvip":false,"replies":[{"id":"76738","content":"ieæ¯”è¾ƒè€äº†ï¼Œå®‰å…¨æ€§æ¯”è¾ƒå¼±ã€‚<br><br>Chromeçš„é—®é¢˜éœ€è¦çœ‹æœåŠ¡å™¨çš„é…ç½®ï¼Œæ˜¯å¦é…ç½®äº†hstsï¼Œä½ è¦éç”¨httpå®ƒä¹Ÿæ˜¯æ”¯æŒçš„ã€‚","user_name":"ä½œè€…å›å¤","comment_id":205486,"uid":"1181974","ip_address":"","utype":1,"ctime":1586647058,"user_name_real":"chrono"}],"discussion_count":1,"race_medal":0,"score":"5881610118","product_id":100029001,"comment_content":"1. å…¬å¸æœ‰ä¸€å°æœåŠ¡å™¨çš„åº”ç”¨é…ç½®äº†httpå’Œhttpsï¼Œç”¨ä¸åŒçš„ç«¯å£æ¥åŒºåˆ†ï¼Œå¯æ˜¯chromeæ¯æ¬¡éƒ½æ˜¯é»˜è®¤ç”¨httpsï¼Œæ‰€ä»¥å°±ä¼šå‡ºç°ä¸èƒ½è®¿é—®httpçš„é—®é¢˜ï¼Œè€Œieå°±ä¸ä¼šï¼Œä¸çŸ¥é“å’ŒHSTSæœ‰æ²¡æœ‰å…³ç³»ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":491490,"discussion_content":"ieæ¯”è¾ƒè€äº†ï¼Œå®‰å…¨æ€§æ¯”è¾ƒå¼±ã€‚\n\nChromeçš„é—®é¢˜éœ€è¦çœ‹æœåŠ¡å™¨çš„é…ç½®ï¼Œæ˜¯å¦é…ç½®äº†hstsï¼Œä½ è¦éç”¨httpå®ƒä¹Ÿæ˜¯æ”¯æŒçš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586647058,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":202369,"user_name":"é’±","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1585977860,"is_pvip":false,"replies":[{"id":"75726","content":"good","user_name":"ä½œè€…å›å¤","comment_id":202369,"uid":"1181974","ip_address":"","utype":1,"ctime":1586041277,"user_name_real":"chrono"}],"discussion_count":1,"race_medal":0,"score":"5880945156","product_id":100029001,"comment_content":"å¤§åŠ¿æ‰€è¶‹ï¼Œé‚£å°±è¦è·Ÿä¸Šï¼Œæˆ‘å¸å·²åˆ‡ğŸ˜„","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490571,"discussion_content":"good","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586041277,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":119821,"user_name":"djfhchdh","can_delete":false,"product_type":"c1","uid":1484184,"ip_address":"","ucode":"E71D75328CE398","user_header":"https://static001.geekbang.org/account/avatar/00/16/a5/98/a65ff31a.jpg","comment_is_top":false,"comment_ctime":1564708571,"is_pvip":false,"replies":[{"id":"43991","content":"å¯¹ï¼Œç›¸åº”çš„NginxæŒ‡ä»¤æ˜¯ï¼š<br><br>ssl_early_data on;<br>ssl_stapling on;","user_name":"ä½œè€…å›å¤","comment_id":119821,"uid":"1181974","ip_address":"","utype":1,"ctime":1564709614,"user_name_real":"chrono"}],"discussion_count":2,"race_medal":0,"score":"5859675867","product_id":100029001,"comment_content":"2ã€TLS1.3çš„pre-shared-keyï¼Œå®ç°0-RTTï¼›OCSP Staplingï¼›","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461086,"discussion_content":"å¯¹ï¼Œç›¸åº”çš„NginxæŒ‡ä»¤æ˜¯ï¼š\n\nssl_early_data on;\nssl_stapling on;","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564709614,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1476323,"avatar":"https://static001.geekbang.org/account/avatar/00/16/86/e3/a31f6869.jpg","nickname":"î‡ å°¿å¸ƒ","note":"","ucode":"D1C8BDA7540962","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":304912,"discussion_content":"å­¦ä¹ äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599710015,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":360876,"user_name":"æ›¾æ³½æµ©","can_delete":false,"product_type":"c1","uid":1104601,"ip_address":"ä¸Šæµ·","ucode":"A7E5CF9E1571A2","user_header":"https://static001.geekbang.org/account/avatar/00/10/da/d9/f051962f.jpg","comment_is_top":false,"comment_ctime":1666930186,"is_pvip":false,"replies":[{"id":"131281","content":"å¯ä»¥åœ¨proxy_passæŒ‡ä»¤é‡Œé…ç½®ï¼Œhttpã€httpséƒ½å¯ä»¥ã€‚","user_name":"ä½œè€…å›å¤","comment_id":360876,"uid":"1181974","ip_address":"ä¸Šæµ·","utype":1,"ctime":1666938570,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":0,"score":"1666930186","product_id":100029001,"comment_content":"ä½ å¥½ï¼Œæˆ‘æƒ³è¯·æ•™ä¸€ä¸‹ï¼Œæ˜¯ä¸æ˜¯NGåˆ°upstreamè¿™ä¸€è·³è¿˜æ˜¯ç”¨æ˜æ–‡ä¼ è¾“çš„ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":591929,"discussion_content":"å¯ä»¥åœ¨proxy_passæŒ‡ä»¤é‡Œé…ç½®ï¼Œhttpã€httpséƒ½å¯ä»¥ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1666938570,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":285675,"user_name":"ç¡è§‰ä¹Ÿåœ¨ç¬‘","can_delete":false,"product_type":"c1","uid":1928682,"ip_address":"","ucode":"62381E78061843","user_header":"https://static001.geekbang.org/account/avatar/00/1d/6d/ea/2c5fcdb1.jpg","comment_is_top":false,"comment_ctime":1616971617,"is_pvip":false,"replies":[{"id":"103667","content":"TLSæ ‡å‡†é‡Œæ²¡æœ‰ä¸ºå›½å¯†ç®—æ³•ç•™ä½ç½®ï¼Œè¿™ä¸ªä¸å¤ªå¥½åŠï¼Œä¹Ÿè®¸å¯ä»¥è€ƒè™‘é‚£ä¸ªå›½å†…æŸä¸ªå¤§å­¦åŸºäºOpenSSLåšçš„åº“ï¼Œå…·ä½“çš„åå­—è®°ä¸æ¸…äº†ã€‚","user_name":"ä½œè€…å›å¤","comment_id":285675,"uid":"1181974","ip_address":"","utype":1,"ctime":1616981659,"user_name_real":"ç½—å‰‘é”‹"}],"discussion_count":1,"race_medal":0,"score":"1616971617","product_id":100029001,"comment_content":"è€å¸ˆï¼Œå†…éƒ¨spring bootå†™çš„å¾®æœåŠ¡ä¹‹é—´æœ‰ä»€ä¹ˆhttpsçš„ä¼˜åŒ–æ–¹æ¡ˆå—ï¼Ÿå› ä¸ºæ˜¯é“¶è¡Œé¢†åŸŸï¼Œæ‰€ä»¥ç›‘ç®¡éƒ¨é—¨æœ‰ä¸€äº›å¼ºåˆ¶çš„å®‰å…¨åŸºçº¿ã€‚å› æ­¤æˆ‘æƒ³é—®ä¸€ä¸‹æœ‰æ²¡æœ‰ä»€ä¹ˆæ”¯æŒå›½å¯†ç®—æ³•çš„å¥½çš„æ–¹æ¡ˆã€‚sm2ç®—æ³•æ˜¯æ¤­åœ†æ›²çº¿çš„ä¸€ç§æ‰©å±•ç®—æ³•ï¼Œä½†æ˜¯ä¸çŸ¥é“éœ€è¦æ€æ ·çš„æ”¹é€ æ‰èƒ½æ”¯æŒTLS1.3.","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":517750,"discussion_content":"TLSæ ‡å‡†é‡Œæ²¡æœ‰ä¸ºå›½å¯†ç®—æ³•ç•™ä½ç½®ï¼Œè¿™ä¸ªä¸å¤ªå¥½åŠï¼Œä¹Ÿè®¸å¯ä»¥è€ƒè™‘é‚£ä¸ªå›½å†…æŸä¸ªå¤§å­¦åŸºäºOpenSSLåšçš„åº“ï¼Œå…·ä½“çš„åå­—è®°ä¸æ¸…äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616981659,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":205923,"user_name":"Ping","can_delete":false,"product_type":"c1","uid":1812754,"ip_address":"","ucode":"FC4743D8FEF61C","user_header":"https://static001.geekbang.org/account/avatar/00/1b/a9/12/e041e7b2.jpg","comment_is_top":false,"comment_ctime":1586757606,"is_pvip":false,"replies":[{"id":"76932","content":"æœäº†ä¸€ä¸‹ï¼Œå®ƒæ˜¯Amazonå¼€å‘çš„ä¸€ä¸ªtlså®ç°ï¼Œç›¸å½“äºOpenSSLï¼Œä½†æ›´ç²¾ç®€ã€‚<br><br>ç°åœ¨æ¥çœ‹å½±å“è¿˜ä¸æ˜¯å¾ˆå¤§ï¼Œæƒå¨æ€§ä¸å¤Ÿï¼Œä¸è¿‡ç”¨æ¥ç ”ç©¶åº”è¯¥è¿˜æ˜¯å¯ä»¥çš„ã€‚","user_name":"ä½œè€…å›å¤","comment_id":205923,"uid":"1181974","ip_address":"","utype":1,"ctime":1586761445,"user_name_real":"chrono"}],"discussion_count":1,"race_medal":0,"score":"1586757606","product_id":100029001,"comment_content":"è€å¸ˆä¸çŸ¥é“æ‚¨äº†è§£S2Nå—ï¼Œèƒ½ä¸èƒ½è®²è§£ä¸‹ä»€ä¹ˆæ˜¯S2N?","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":491615,"discussion_content":"æœäº†ä¸€ä¸‹ï¼Œå®ƒæ˜¯Amazonå¼€å‘çš„ä¸€ä¸ªtlså®ç°ï¼Œç›¸å½“äºOpenSSLï¼Œä½†æ›´ç²¾ç®€ã€‚\n\nç°åœ¨æ¥çœ‹å½±å“è¿˜ä¸æ˜¯å¾ˆå¤§ï¼Œæƒå¨æ€§ä¸å¤Ÿï¼Œä¸è¿‡ç”¨æ¥ç ”ç©¶åº”è¯¥è¿˜æ˜¯å¯ä»¥çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586761445,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":176988,"user_name":"keep it simple","can_delete":false,"product_type":"c1","uid":1574739,"ip_address":"","ucode":"72B8DC00247C9E","user_header":"https://static001.geekbang.org/account/avatar/00/18/07/53/05aa9573.jpg","comment_is_top":false,"comment_ctime":1581242638,"is_pvip":false,"replies":[{"id":"68686","content":"å¯ä»¥æ”¹ï¼Œåœ¨Nginxé‡Œæœ‰é…ç½®ï¼Œssl_session_timeouté»˜è®¤å°±æ˜¯300ç§’ï¼Œä½†é˜¿é‡Œäº‘è¯¥å¦‚ä½•é…ç½®å°±ä¸å¤ªæ¸…æ¥šäº†ã€‚<br><br>æˆ‘çŒœç”¨çš„æ˜¯tengineï¼Œä¹Ÿæ˜¯Nginxï¼Œåº”è¯¥æ˜¯ä¸€æ ·çš„ï¼Œå¯ä»¥å»Nginxå®˜ç½‘çœ‹æ–‡æ¡£ã€‚<br><br>http:&#47;&#47;nginx.org&#47;en&#47;docs&#47;http&#47;ngx_http_ssl_module.html#ssl_session_tickets","user_name":"ä½œè€…å›å¤","comment_id":176988,"uid":"1181974","ip_address":"","utype":1,"ctime":1581256345,"user_name_real":"chrono"}],"discussion_count":1,"race_medal":0,"score":"1581242638","product_id":100029001,"comment_content":"è¯·æ•™ä¸‹è€å¸ˆï¼Œå¯ç”¨äº†session ticketï¼Œä½†æ³¨æ„åˆ°new session ticketæœ‰æ•ˆæœŸåªæœ‰300ç§’ï¼Œè¿™ä¸ªå‚æ•°èƒ½æ”¹é•¿å—ï¼Ÿæˆ‘ä»¬ç”¨çš„æ˜¯é˜¿é‡Œäº‘çš„SLB","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":483268,"discussion_content":"å¯ä»¥æ”¹ï¼Œåœ¨Nginxé‡Œæœ‰é…ç½®ï¼Œssl_session_timeouté»˜è®¤å°±æ˜¯300ç§’ï¼Œä½†é˜¿é‡Œäº‘è¯¥å¦‚ä½•é…ç½®å°±ä¸å¤ªæ¸…æ¥šäº†ã€‚\n\næˆ‘çŒœç”¨çš„æ˜¯tengineï¼Œä¹Ÿæ˜¯Nginxï¼Œåº”è¯¥æ˜¯ä¸€æ ·çš„ï¼Œå¯ä»¥å»Nginxå®˜ç½‘çœ‹æ–‡æ¡£ã€‚\n\nhttp://nginx.org/en/docs/http/ngx_http_ssl_module.html#ssl_session_tickets","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581256345,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":127861,"user_name":"ã€€ã€€ã€€ã€€ã€€ã€€ã€€é¸Ÿäººî”¡","can_delete":false,"product_type":"c1","uid":1035165,"ip_address":"","ucode":"E504B22F336035","user_header":"https://static001.geekbang.org/account/avatar/00/0f/cb/9d/2bc85843.jpg","comment_is_top":false,"comment_ctime":1566801901,"is_pvip":false,"replies":[{"id":"47395","content":"é‚£ä¹ˆè¯ä¹¦å°±å¤±æ•ˆäº†ï¼Œæµè§ˆå™¨ä¼šè®¤ä¸ºä¸å®‰å…¨ï¼Œå½“ç„¶è¿˜æ˜¯å¯ä»¥å¼ºåˆ¶è®¿é—®çš„ã€‚","user_name":"ä½œè€…å›å¤","comment_id":127861,"uid":"1181974","ip_address":"","utype":1,"ctime":1566805577,"user_name_real":"chrono"}],"discussion_count":1,"race_medal":0,"score":"1566801901","product_id":100029001,"comment_content":"è¯·é—®å¦‚æœç½‘ç«™HTTPSè¯ä¹¦è¿‡æœŸä¼šæ€ä¹ˆæ ·ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464683,"discussion_content":"é‚£ä¹ˆè¯ä¹¦å°±å¤±æ•ˆäº†ï¼Œæµè§ˆå™¨ä¼šè®¤ä¸ºä¸å®‰å…¨ï¼Œå½“ç„¶è¿˜æ˜¯å¯ä»¥å¼ºåˆ¶è®¿é—®çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566805577,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":120641,"user_name":"å¾æµ·æµª","can_delete":false,"product_type":"c1","uid":1078528,"ip_address":"","ucode":"21801C420D0610","user_header":"https://static001.geekbang.org/account/avatar/00/10/75/00/618b20da.jpg","comment_is_top":false,"comment_ctime":1564965853,"is_pvip":false,"replies":[{"id":"44273","content":"æ¬¢è¿å®æˆ˜ç»éªŒåˆ†äº«ï¼","user_name":"ä½œè€…å›å¤","comment_id":120641,"uid":"1181974","ip_address":"","utype":1,"ctime":1564968103,"user_name_real":"chrono"}],"discussion_count":1,"race_medal":1,"score":"1564965853","product_id":100029001,"comment_content":"1. ç»“åˆä½ çš„å®é™…å·¥ä½œï¼Œåˆ†æä¸€ä¸‹è¿ç§» HTTPS çš„éš¾ç‚¹æœ‰å“ªäº›ï¼Œåº”è¯¥å¦‚ä½•å…‹æœï¼Ÿ<br>(è¯´ä¸‹æˆ‘ç»å†çš„ï¼‰<br>a. æ¢³ç†æ‰€æœ‰å¤–éƒ¨è¿æ¥æ˜¯å¦ä¸ºhttpsã€‚å› ä¸ºåˆ‡æ¢httpsåï¼Œæœ‰çš„æµè§ˆå™¨ä¼šæœ‰å®‰å…¨æœºåˆ¶é™åˆ¶å‘èµ·httpè¯·æ±‚ã€‚<br>b. å¼€å¯httpå¼ºåˆ¶è·³è½¬httpsåï¼Œå¦‚æœhttpclient(ä»£ç )æ²¡æœ‰å¤„ç†302çŠ¶æ€ï¼Œé‚£ä¹ˆæ¥å£ä¼šè°ƒä¸é€šã€‚è¦é€šçŸ¥å¤–éƒ¨æ¥å£è°ƒç”¨å˜æ›´httpsã€‚<br>å…ˆåœ¨æµ‹è¯•ç¯å¢ƒå¼€å¯å¼ºåˆ¶è·³è½¬httpså¼ºåˆ¶è·³è½¬ã€‚ç”Ÿäº§ç¯å¢ƒæœ‰ä¸€ä¸ªå…±å­˜è¿‡åº¦æœŸï¼Œæœ€åå†å¼ºåˆ¶è·³è½¬ã€‚","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461414,"discussion_content":"æ¬¢è¿å®æˆ˜ç»éªŒåˆ†äº«ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564968103,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":120205,"user_name":"ä¸€æ­¥","can_delete":false,"product_type":"c1","uid":1005391,"ip_address":"","ucode":"73CEA468CE70C3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","comment_is_top":false,"comment_ctime":1564806513,"is_pvip":true,"replies":[{"id":"44215","content":"LibreSSLæ˜¯OpenBSDçš„åˆ†æ”¯ï¼Œå’ŒOpenSSLçš„å·®å¼‚è¾ƒå¤§ï¼Œå¯ä»¥çœ‹å®ƒçš„å®˜ç½‘http:&#47;&#47;www.libressl.orgï¼Œäº†è§£å…·ä½“çš„æƒ…å†µã€‚","user_name":"ä½œè€…å›å¤","comment_id":120205,"uid":"1181974","ip_address":"","utype":1,"ctime":1564926008,"user_name_real":"chrono"}],"discussion_count":1,"race_medal":1,"score":"1564806513","product_id":100029001,"comment_content":"Mac ç”µè„‘æŸ¥çœ‹ openssl çš„ç‰ˆæœ¬ï¼Œå‘ç°æ˜¯è¿™ä¸ªï¼šLibreSSL 2.6.5<br><br>LibreSSL æ€ä¹ˆå’Œ openSSL ç‰ˆæœ¬å¯¹åº”çš„ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461238,"discussion_content":"LibreSSLæ˜¯OpenBSDçš„åˆ†æ”¯ï¼Œå’ŒOpenSSLçš„å·®å¼‚è¾ƒå¤§ï¼Œå¯ä»¥çœ‹å®ƒçš„å®˜ç½‘http://www.libressl.orgï¼Œäº†è§£å…·ä½“çš„æƒ…å†µã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564926008,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}