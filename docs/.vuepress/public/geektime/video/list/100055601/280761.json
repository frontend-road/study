{"id":280761,"title":"61 | 设计项目测试用例：将POM设计模式应用到项目","content":"<p><strong>课件和Demo地址</strong><br>\n<a href=\"https://gitee.com/geektime-geekbang/Selenium\">https://gitee.com/geektime-geekbang/Selenium</a></p>","comments":[{"had_liked":false,"id":334929,"user_name":"半吊子","can_delete":false,"product_type":"c3","uid":2681334,"ip_address":"","ucode":"186B6B40B3171C","user_header":"https://static001.geekbang.org/account/avatar/00/28/e9/f6/5dc6c99a.jpg","comment_is_top":false,"comment_ctime":1645186383,"is_pvip":false,"replies":[{"id":134423,"content":"在pytest中，当一个测试用例有依赖关系时，被依赖的用例如果执行失败，那么依赖于它的用例就不会执行。这是因为pytest默认情况下，当一个用例执行失败时，pytest会停止执行当前测试集中的所有用例，并输出失败信息。\n\n如果你希望依赖的用例不会跳过，而是继续执行，并且在依赖的用例执行失败时抛出一个异常，你可以使用pytest-dependency插件。该插件提供了一个`depend`装饰器，可以指定用例的依赖关系，并设置用例执行顺序。当被依赖的用例执行失败时，依赖于它的用例将引发一个异常，并标记为失败。\n\n以下是使用pytest-dependency插件的示例：\n\n```\nimport pytest\n\n@pytest.mark.dependency()\ndef test_login():\n    # do login\n    assert True\n\n@pytest.mark.dependency(depends=[&quot;test_login&quot;])\ndef test_add_to_cart():\n    # add item to cart\n    assert True\n```\n\n在这个示例中，`test_add_to_cart`用例依赖于`test_login`用例。当`test_login`执行失败时，`test_add_to_cart`用例将引发一个异常，并标记为失败，而不是跳过不执行。","user_name":"作者回复","user_name_real":"编辑","uid":1654315,"ctime":1677056819,"ip_address":"河北","comment_id":334929,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100055601,"comment_content":"老师，为什么被依赖的用例执行成功了，依赖的用例会跳过不执行呢","like_count":0,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":606286,"discussion_content":"在pytest中，当一个测试用例有依赖关系时，被依赖的用例如果执行失败，那么依赖于它的用例就不会执行。这是因为pytest默认情况下，当一个用例执行失败时，pytest会停止执行当前测试集中的所有用例，并输出失败信息。\n\n如果你希望依赖的用例不会跳过，而是继续执行，并且在依赖的用例执行失败时抛出一个异常，你可以使用pytest-dependency插件。该插件提供了一个`depend`装饰器，可以指定用例的依赖关系，并设置用例执行顺序。当被依赖的用例执行失败时，依赖于它的用例将引发一个异常，并标记为失败。\n\n以下是使用pytest-dependency插件的示例：\n\n```\nimport pytest\n\n@pytest.mark.dependency()\ndef test_login():\n    # do login\n    assert True\n\n@pytest.mark.dependency(depends=[&#34;test_login&#34;])\ndef test_add_to_cart():\n    # add item to cart\n    assert True\n```\n\n在这个示例中，`test_add_to_cart`用例依赖于`test_login`用例。当`test_login`执行失败时，`test_add_to_cart`用例将引发一个异常，并标记为失败，而不是跳过不执行。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1677056819,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"河北","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":330604,"user_name":"Leo","can_delete":false,"product_type":"c3","uid":2022178,"ip_address":"","ucode":"44956913C4F34C","user_header":"","comment_is_top":false,"comment_ctime":1642065387,"is_pvip":false,"replies":[{"id":125457,"content":"pom 是有这个问题 有人推荐使用 有人不用","user_name":"作者回复","user_name_real":"编辑","uid":1654315,"ctime":1651032378,"ip_address":"","comment_id":330604,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100055601,"comment_content":"老师，有写问题请教一下\n1. POM模式一定是一个page对应一个case吗？\n2. 如果是的话，那page层级比较深的话，是每次都要走一遍前面的所有流程吗？\n3. 这适合做单页面的测试还是做场景的测试？","like_count":0,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":567942,"discussion_content":"pom 是有这个问题 有人推荐使用 有人不用","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651032378,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":328858,"user_name":"Vayne","can_delete":false,"product_type":"c3","uid":2064984,"ip_address":"","ucode":"1CEDEA8E862525","user_header":"https://static001.geekbang.org/account/avatar/00/1f/82/58/edbba4b4.jpg","comment_is_top":false,"comment_ctime":1640920093,"is_pvip":false,"replies":[{"id":125451,"content":"https:&#47;&#47;gitee.com&#47;geektime-geekbang&#47;Selenium","user_name":"作者回复","user_name_real":"编辑","uid":1654315,"ctime":1651032107,"ip_address":"","comment_id":328858,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100055601,"comment_content":"gitee地址没有课件了，还能再发一个么。老师","like_count":0,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":567935,"discussion_content":"https://gitee.com/geektime-geekbang/Selenium","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651032108,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":301952,"user_name":"随片","can_delete":false,"product_type":"c3","uid":2139020,"ip_address":"","ucode":"1EDA99E17B20C7","user_header":"https://static001.geekbang.org/account/avatar/00/20/a3/8c/23b2464c.jpg","comment_is_top":false,"comment_ctime":1625993430,"is_pvip":false,"replies":[{"id":109685,"content":"嗯 有一些网站是不适合做自动化测试的","user_name":"作者回复","user_name_real":"郭宏志","uid":1654315,"ctime":1626602897,"ip_address":"","comment_id":301952,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100055601,"comment_content":"请问这个股票类的网站如何UI自动化处理了？很多线的操作，数据的变化等。","like_count":0,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":523133,"discussion_content":"嗯 有一些网站是不适合做自动化测试的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626602897,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":284101,"user_name":"随片","can_delete":false,"product_type":"c3","uid":2139020,"ip_address":"","ucode":"1EDA99E17B20C7","user_header":"https://static001.geekbang.org/account/avatar/00/20/a3/8c/23b2464c.jpg","comment_is_top":false,"comment_ctime":1616063708,"is_pvip":false,"replies":[{"id":103103,"content":"下载源码，对照一下，看看是否有书写错误","user_name":"作者回复","user_name_real":"郭宏志","uid":1654315,"ctime":1616146251,"ip_address":"","comment_id":284101,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100055601,"comment_content":"我这边一直在BasePage.__init__(self, login.driver)，这边一直显示attributeError：（test文件）object has no attribute ‘driver’。请问这个怎么定位处理？","like_count":0,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":517234,"discussion_content":"下载源码，对照一下，看看是否有书写错误","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616146251,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1177377,"avatar":"","nickname":"William","note":"","ucode":"7DADC9415C07F0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":405264,"discussion_content":"給你參考，我自己是 ,  . 寫錯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634543518,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2139020,"avatar":"https://static001.geekbang.org/account/avatar/00/20/a3/8c/23b2464c.jpg","nickname":"随片","note":"","ucode":"1EDA99E17B20C7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":359227,"discussion_content":"下载过源码对照过，书写没有错误。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616146353,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":276903,"user_name":"Hedy","can_delete":false,"product_type":"c3","uid":1734821,"ip_address":"","ucode":"3D4B515B4BEE3C","user_header":"https://static001.geekbang.org/account/avatar/00/1a/78/a5/5c1e285e.jpg","comment_is_top":false,"comment_ctime":1612171046,"is_pvip":true,"replies":[{"id":101548,"content":"可以使用setup","user_name":"作者回复","user_name_real":"郭宏志","uid":1654315,"ctime":1613821838,"ip_address":"","comment_id":276903,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100055601,"comment_content":"老师，想问一下测试用例中如testcase01需要使用find_element方法，但是调用后会提示不能在testcase中初始化一个构造方法，这种场景应该如何解决呢，即想在具体的用例中直接使用封装的找元素方法应该如何做呢","like_count":0,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":514858,"discussion_content":"可以使用setup","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1613821838,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":266201,"user_name":"ning","can_delete":false,"product_type":"c3","uid":1798471,"ip_address":"","ucode":"5A9A9F31653A0E","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/rRCSdTPyqWdJkIdySLkRpCT0dW4ibxnyutO4dkzagibricncUJQOWGUqrDKhOeJ5MpicYVeia2Nn8UGQX3fc0ghLZ2g/132","comment_is_top":false,"comment_ctime":1607240008,"is_pvip":false,"replies":[{"id":97188,"content":"这个只是做个演示 实际项目根据业务需求判断","user_name":"作者回复","user_name_real":"郭宏志","uid":1654315,"ctime":1607852562,"ip_address":"","comment_id":266201,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100055601,"comment_content":"老师，真实项目中添加与删除文章测试用例是存在关系的吗？如果添加文章失败，存在依赖的话也会导致删除文章用例也执行失败了","like_count":0,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":511176,"discussion_content":"这个只是做个演示 实际项目根据业务需求判断","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607852562,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1798471,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/rRCSdTPyqWdJkIdySLkRpCT0dW4ibxnyutO4dkzagibricncUJQOWGUqrDKhOeJ5MpicYVeia2Nn8UGQX3fc0ghLZ2g/132","nickname":"ning","note":"","ucode":"5A9A9F31653A0E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":334777,"discussion_content":"看了pytest dependency文档，如果依赖的用例失败，被依赖的用例不会被执行","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607987179,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":246196,"user_name":"ShouIdo😂","can_delete":false,"product_type":"c3","uid":1351601,"ip_address":"","ucode":"F8371C54FB4EB2","user_header":"https://static001.geekbang.org/account/avatar/00/14/9f/b1/2894614a.jpg","comment_is_top":false,"comment_ctime":1599205725,"is_pvip":false,"replies":[{"id":90496,"content":"有一种方法 登录后 可以使用cookie 但是 我们测试的项目被屏蔽了","user_name":"作者回复","user_name_real":"郭宏志","uid":1654315,"ctime":1599225787,"ip_address":"","comment_id":246196,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100055601,"comment_content":"老师，在这种模式下，文章分类测试需要依赖管理员登录，那是不是我每次运行文章分类测试的时候，都会把管理员登录测试类中的所有测试用例全都跑一边？","like_count":0,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":505086,"discussion_content":"有一种方法 登录后 可以使用cookie 但是 我们测试的项目被屏蔽了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599225787,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":348134,"user_name":"涓涓","can_delete":false,"product_type":"c3","uid":1173140,"ip_address":"","ucode":"16C6C308BA2816","user_header":"https://static001.geekbang.org/account/avatar/00/11/e6/94/ba217a11.jpg","comment_is_top":false,"comment_ctime":1654764267,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100055601,"comment_content":"老师，你好。\n业务层用例的setup_class函数中初始化了Admin Login Page对象，为什么会执行它对应模块下的用例呢？\n这一点想不通，希望老师能看到并解答，十分感谢。","like_count":1},{"had_liked":false,"id":355690,"user_name":"Geek_70a12c","can_delete":false,"product_type":"c3","uid":2771090,"ip_address":"陕西","ucode":"C93C713F3ECE96","user_header":"","comment_is_top":false,"comment_ctime":1661658651,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100055601,"comment_content":"这个课程适配性真的很好，很系统，很清晰，很好用，太有帮助了","like_count":0}]}