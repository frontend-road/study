{"id":415988,"title":"08ï½œæ‰€æœ‰æƒï¼šå€¼çš„å€Ÿç”¨æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯é™ˆå¤©ã€‚</p><p>ä¸Šä¸€è®²æˆ‘ä»¬å­¦ä¹ äº† Rust æ‰€æœ‰æƒçš„åŸºæœ¬è§„åˆ™ï¼Œåœ¨ Rust ä¸‹ï¼Œå€¼æœ‰å•ä¸€çš„æ‰€æœ‰è€…ã€‚</p><p>å½“æˆ‘ä»¬è¿›è¡Œå˜é‡èµ‹å€¼ã€ä¼ å‚å’Œå‡½æ•°è¿”å›æ—¶ï¼Œå¦‚æœæ¶‰åŠçš„æ•°æ®ç»“æ„æ²¡æœ‰å®ç° Copy traitï¼Œå°±ä¼šé»˜è®¤ä½¿ç”¨ Move è¯­ä¹‰è½¬ç§»å€¼çš„æ‰€æœ‰æƒï¼Œå¤±å»æ‰€æœ‰æƒçš„å˜é‡å°†æ— æ³•ç»§ç»­è®¿é—®åŸæ¥çš„æ•°æ®ï¼›å¦‚æœæ•°æ®ç»“æ„å®ç°äº† Copy traitï¼Œå°±ä¼šä½¿ç”¨ Copy è¯­ä¹‰ï¼Œè‡ªåŠ¨æŠŠå€¼å¤åˆ¶ä¸€ä»½ï¼ŒåŸæœ‰çš„å˜é‡è¿˜èƒ½ç»§ç»­è®¿é—®ã€‚</p><p>è™½ç„¶ï¼Œå•ä¸€æ‰€æœ‰æƒè§£å†³äº†å…¶å®ƒè¯­è¨€ä¸­å€¼è¢«ä»»æ„å…±äº«å¸¦æ¥çš„é—®é¢˜ï¼Œä½†ä¹Ÿå¼•å‘äº†ä¸€äº›ä¸ä¾¿ã€‚æˆ‘ä»¬ä¸Šä¸€è®²æåˆ°ï¼š<strong>å½“ä½ ä¸å¸Œæœ›å€¼çš„æ‰€æœ‰æƒè¢«è½¬ç§»ï¼Œåˆå› ä¸ºæ²¡æœ‰å®ç° Copy trait è€Œæ— æ³•ä½¿ç”¨ Copy è¯­ä¹‰ï¼Œæ€ä¹ˆåŠ</strong>ï¼Ÿä½ å¯ä»¥â€œå€Ÿç”¨â€æ•°æ®ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸€è®²æˆ‘ä»¬è¦ç»§ç»­ä»‹ç»çš„ Borrow è¯­ä¹‰ã€‚</p><h2>Borrow è¯­ä¹‰</h2><p>é¡¾åæ€ä¹‰ï¼ŒBorrow è¯­ä¹‰å…è®¸ä¸€ä¸ªå€¼çš„æ‰€æœ‰æƒï¼Œåœ¨ä¸å‘ç”Ÿè½¬ç§»çš„æƒ…å†µä¸‹ï¼Œè¢«å…¶å®ƒä¸Šä¸‹æ–‡ä½¿ç”¨ã€‚å°±å¥½åƒä½é…’åº—æˆ–è€…ç§Ÿæˆ¿é‚£æ ·ï¼Œæ—…å®¢/ç§Ÿå®¢åªæœ‰æˆ¿é—´çš„ä¸´æ—¶ä½¿ç”¨æƒï¼Œä½†æ²¡æœ‰å®ƒçš„æ‰€æœ‰æƒã€‚å¦å¤–ï¼ŒBorrow è¯­ä¹‰é€šè¿‡å¼•ç”¨è¯­æ³•ï¼ˆ&amp; æˆ–è€… &amp;mutï¼‰æ¥å®ç°ã€‚</p><p>çœ‹åˆ°è¿™é‡Œï¼Œä½ æ˜¯ä¸æ˜¯æœ‰ç‚¹è¿·æƒ‘äº†ï¼Œæ€ä¹ˆå¼•å…¥äº†ä¸€ä¸ªâ€œå€Ÿç”¨â€çš„æ–°æ¦‚å¿µï¼Œä½†æ˜¯åˆå†™â€œå¼•ç”¨â€è¯­æ³•å‘¢ï¼Ÿ</p><p>å…¶å®ï¼Œ<strong>åœ¨ Rust ä¸­ï¼Œâ€œå€Ÿç”¨â€å’Œâ€œå¼•ç”¨â€æ˜¯ä¸€ä¸ªæ¦‚å¿µ</strong>ï¼Œåªä¸è¿‡åœ¨å…¶ä»–è¯­è¨€ä¸­å¼•ç”¨çš„æ„ä¹‰å’Œ Rust ä¸åŒï¼Œæ‰€ä»¥ Rust æå‡ºäº†æ–°æ¦‚å¿µâ€œå€Ÿç”¨â€ï¼Œä¾¿äºåŒºåˆ†ã€‚</p><!-- [[[read_end]]] --><p>åœ¨å…¶ä»–è¯­è¨€ä¸­ï¼Œå¼•ç”¨æ˜¯ä¸€ç§åˆ«åï¼Œä½ å¯ä»¥ç®€å•ç†è§£æˆé²è¿…ä¹‹äºå‘¨æ ‘äººï¼Œå¤šä¸ªå¼•ç”¨æ‹¥æœ‰å¯¹å€¼çš„æ— å·®åˆ«çš„è®¿é—®æƒé™ï¼Œæœ¬è´¨ä¸Šæ˜¯å…±äº«äº†æ‰€æœ‰æƒï¼›è€Œåœ¨ Rust ä¸‹ï¼Œæ‰€æœ‰çš„å¼•ç”¨éƒ½åªæ˜¯å€Ÿç”¨äº†â€œä¸´æ—¶ä½¿ç”¨æƒâ€ï¼Œå®ƒå¹¶ä¸ç ´åå€¼çš„å•ä¸€æ‰€æœ‰æƒçº¦æŸã€‚</p><p>å› æ­¤<strong>é»˜è®¤æƒ…å†µä¸‹ï¼ŒRust çš„å€Ÿç”¨éƒ½æ˜¯åªè¯»çš„</strong>ï¼Œå°±å¥½åƒä½é…’åº—ï¼Œé€€æˆ¿æ—¶è¦å®Œå¥½æ— æŸã€‚ä½†æœ‰äº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦å¯å˜çš„å€Ÿç”¨ï¼Œå°±åƒç§Ÿæˆ¿ï¼Œå¯ä»¥å¯¹æˆ¿å±‹è¿›è¡Œå¿…è¦çš„è£…é¥°ï¼Œè¿™ä¸€ç‚¹å¾…ä¼šè¯¦ç»†è®²ã€‚</p><p>æ‰€ä»¥ï¼Œå¦‚æœæˆ‘ä»¬æƒ³é¿å… Copy æˆ–è€… Moveï¼Œå¯ä»¥ä½¿ç”¨å€Ÿç”¨ï¼Œæˆ–è€…è¯´å¼•ç”¨ã€‚</p><h2>åªè¯»å€Ÿç”¨/å¼•ç”¨</h2><p>æœ¬è´¨ä¸Šï¼Œå¼•ç”¨æ˜¯ä¸€ä¸ªå—æ§çš„æŒ‡é’ˆï¼ŒæŒ‡å‘æŸä¸ªç‰¹å®šçš„ç±»å‹ã€‚åœ¨å­¦ä¹ å…¶ä»–è¯­è¨€çš„æ—¶å€™ï¼Œä½ ä¼šæ³¨æ„åˆ°å‡½æ•°ä¼ å‚æœ‰ä¸¤ç§æ–¹å¼ï¼šä¼ å€¼ï¼ˆpass-by-valueï¼‰å’Œä¼ å¼•ç”¨ï¼ˆpass-by-referenceï¼‰ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/1b/6a/1b4ae03b5152226289092c95fd16786a.jpg?wh=2312x2043\" alt=\"\"></p><p>ä»¥ Java ä¸ºä¾‹ï¼Œç»™å‡½æ•°ä¼ ä¸€ä¸ªæ•´æ•°ï¼Œè¿™æ˜¯ä¼ å€¼ï¼Œå’Œ Rust é‡Œçš„ Copy è¯­ä¹‰ä¸€è‡´ï¼›è€Œç»™å‡½æ•°ä¼ ä¸€ä¸ªå¯¹è±¡ï¼Œæˆ–è€…ä»»ä½•å †ä¸Šçš„æ•°æ®ç»“æ„ï¼ŒJava éƒ½ä¼šè‡ªåŠ¨éšå¼åœ°ä¼ å¼•ç”¨ã€‚åˆšæ‰è¯´è¿‡ï¼ŒJava çš„å¼•ç”¨æ˜¯å¯¹è±¡çš„åˆ«åï¼Œè¿™ä¹Ÿå¯¼è‡´éšç€ç¨‹åºçš„æ‰§è¡Œï¼ŒåŒä¸€å—å†…å­˜çš„å¼•ç”¨åˆ°å¤„éƒ½æ˜¯ï¼Œä¸å¾—ä¸ä¾èµ– GC è¿›è¡Œå†…å­˜å›æ”¶ã€‚</p><p>ä½† Rust æ²¡æœ‰ä¼ å¼•ç”¨çš„æ¦‚å¿µï¼Œ<strong>Rust æ‰€æœ‰çš„å‚æ•°ä¼ é€’éƒ½æ˜¯ä¼ å€¼</strong>ï¼Œä¸ç®¡æ˜¯ Copy è¿˜æ˜¯ Moveã€‚æ‰€ä»¥åœ¨Rustä¸­ï¼Œä½ å¿…é¡»æ˜¾å¼åœ°æŠŠæŸä¸ªæ•°æ®çš„å¼•ç”¨ï¼Œä¼ ç»™å¦ä¸€ä¸ªå‡½æ•°ã€‚</p><p>Rust çš„å¼•ç”¨å®ç°äº† Copy traitï¼Œæ‰€ä»¥æŒ‰ç…§ Copy è¯­ä¹‰ï¼Œè¿™ä¸ªå¼•ç”¨ä¼šè¢«å¤åˆ¶ä¸€ä»½äº¤ç»™è¦è°ƒç”¨çš„å‡½æ•°ã€‚å¯¹è¿™ä¸ªå‡½æ•°æ¥è¯´ï¼Œå®ƒå¹¶ä¸æ‹¥æœ‰æ•°æ®æœ¬èº«ï¼Œæ•°æ®åªæ˜¯ä¸´æ—¶å€Ÿç»™å®ƒä½¿ç”¨ï¼Œæ‰€æœ‰æƒè¿˜åœ¨åŸæ¥çš„æ‹¥æœ‰è€…é‚£é‡Œã€‚</p><p>åœ¨ Rusté‡Œï¼Œå¼•ç”¨æ˜¯ä¸€ç­‰å…¬æ°‘ï¼Œå’Œå…¶ä»–æ•°æ®ç±»å‹åœ°ä½ç›¸ç­‰ã€‚</p><p>è¿˜æ˜¯ç”¨ä¸Šä¸€è®²æœ‰ä¸¤å¤„é”™è¯¯çš„ <a href=\"https://play.rust-lang.org/?version=stable&mode=debug&edition=2018&gist=3d76a275e808fac6fcc88e21e0a0a05b\">ä»£ç 2</a> æ¥æ¼”ç¤ºã€‚</p><pre><code class=\"language-rust\">fn main() {\n    let data = vec![1, 2, 3, 4];\n    let data1 = data;\n    println!(\"sum of data1: {}\", sum(data1));\n    println!(\"data1: {:?}\", data1); // error1\n    println!(\"sum of data: {}\", sum(data)); // error2\n}\n\nfn sum(data: Vec&lt;u32&gt;) -&gt; u32 {\n    data.iter().fold(0, |acc, x| acc + x)\n}\n</code></pre><p>æˆ‘ä»¬æŠŠ <a href=\"https://play.rust-lang.org/?version=stable&mode=debug&edition=2018&gist=3d76a275e808fac6fcc88e21e0a0a05b\">ä»£ç 2</a> ç¨å¾®æ”¹å˜ä¸€ä¸‹ï¼Œé€šè¿‡æ·»åŠ å¼•ç”¨ï¼Œè®©ç¼–è¯‘é€šè¿‡ï¼Œå¹¶æŸ¥çœ‹å€¼å’Œå¼•ç”¨çš„åœ°å€ï¼ˆ<a href=\"https://play.rust-lang.org/?version=stable&mode=debug&edition=2018&gist=ce5222622af73c3463a84ba1f9121aa4\">ä»£ç 3</a>ï¼‰ï¼š</p><pre><code class=\"language-rust\">fn main() {\n    let data = vec![1, 2, 3, 4];\n    let data1 = &amp;data;\n    // å€¼çš„åœ°å€æ˜¯ä»€ä¹ˆï¼Ÿå¼•ç”¨çš„åœ°å€åˆæ˜¯ä»€ä¹ˆï¼Ÿ\n    println!(\n        \"addr of value: {:p}({:p}), addr of data {:p}, data1: {:p}\",\n        &amp;data, data1, &amp;&amp;data, &amp;data1\n    );\n    println!(\"sum of data1: {}\", sum(data1));\n\n    // å †ä¸Šæ•°æ®çš„åœ°å€æ˜¯ä»€ä¹ˆï¼Ÿ\n    println!(\n        \"addr of items: [{:p}, {:p}, {:p}, {:p}]\",\n        &amp;data[0], &amp;data[1], &amp;data[2], &amp;data[3]\n    );\n}\n\nfn sum(data: &amp;Vec&lt;u32&gt;) -&gt; u32 {\n    // å€¼çš„åœ°å€ä¼šæ”¹å˜ä¹ˆï¼Ÿå¼•ç”¨çš„åœ°å€ä¼šæ”¹å˜ä¹ˆï¼Ÿ\n    println!(\"addr of value: {:p}, addr of ref: {:p}\", data, &amp;data);\n    data.iter().fold(0, |acc, x| acc + x)\n}\n</code></pre><p>åœ¨è¿è¡Œè¿™æ®µä»£ç ä¹‹å‰ï¼Œä½ å¯ä»¥å…ˆæ€è€ƒä¸€ä¸‹ï¼Œdata å¯¹åº”å€¼çš„åœ°å€æ˜¯å¦ä¿æŒä¸å˜ï¼Œè€Œ data1 å¼•ç”¨çš„åœ°å€ï¼Œåœ¨ä¼ ç»™ sum() å‡½æ•°åï¼Œæ˜¯å¦è¿˜æŒ‡å‘åŒä¸€ä¸ªåœ°å€ã€‚</p><p>å¥½ï¼Œå¦‚æœä½ æœ‰æƒ³æ³•äº†ï¼Œå¯ä»¥å†è¿è¡Œä»£ç éªŒè¯ä¸€ä¸‹ä½ æ˜¯å¦æ­£ç¡®ï¼Œæˆ‘ä»¬å†çœ‹ä¸‹å›¾åˆ†æï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/44/39/441678ea9318e9f159cac6b274aef239.jpg?wh=2312x2043\" alt=\"\"></p><p>data1ã€&amp;data å’Œä¼ åˆ° sum() é‡Œçš„ data1â€™ éƒ½æŒ‡å‘ data æœ¬èº«ï¼Œè¿™ä¸ªå€¼çš„åœ°å€æ˜¯å›ºå®šçš„ã€‚ä½†æ˜¯å®ƒä»¬å¼•ç”¨çš„åœ°å€éƒ½æ˜¯ä¸åŒçš„ï¼Œè¿™å°è¯äº†æˆ‘ä»¬è®² Copy trait çš„æ—¶å€™ï¼Œä»‹ç»è¿‡<strong>åªè¯»å¼•ç”¨å®ç°äº† Copy traitï¼Œä¹Ÿå°±æ„å‘³ç€å¼•ç”¨çš„èµ‹å€¼ã€ä¼ å‚éƒ½ä¼šäº§ç”Ÿæ–°çš„æµ…æ‹·è´</strong>ã€‚</p><p>è™½ç„¶ data æœ‰å¾ˆå¤šåªè¯»å¼•ç”¨æŒ‡å‘å®ƒï¼Œä½†å †ä¸Šçš„æ•°æ®ä¾æ—§åªæœ‰ data ä¸€ä¸ªæ‰€æœ‰è€…ï¼Œæ‰€ä»¥å€¼çš„ä»»æ„å¤šä¸ªå¼•ç”¨å¹¶ä¸ä¼šå½±å“æ‰€æœ‰æƒçš„å”¯ä¸€æ€§ã€‚</p><p>ä½†æˆ‘ä»¬é©¬ä¸Šå°±å‘ç°äº†æ–°é—®é¢˜ï¼šä¸€æ—¦ data ç¦»å¼€äº†ä½œç”¨åŸŸè¢«é‡Šæ”¾ï¼Œå¦‚æœè¿˜æœ‰å¼•ç”¨æŒ‡å‘ dataï¼Œå²‚ä¸æ˜¯é€ æˆæˆ‘ä»¬æƒ³æåŠ›é¿å…çš„ä½¿ç”¨å·²é‡Šæ”¾å†…å­˜ï¼ˆuse after freeï¼‰è¿™æ ·çš„å†…å­˜å®‰å…¨é—®é¢˜ï¼Ÿæ€ä¹ˆåŠå‘¢ï¼Ÿ</p><h3>å€Ÿç”¨çš„ç”Ÿå‘½å‘¨æœŸåŠå…¶çº¦æŸ</h3><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯¹å€¼çš„å¼•ç”¨ä¹Ÿè¦æœ‰çº¦æŸï¼Œè¿™ä¸ªçº¦æŸæ˜¯ï¼šå€Ÿç”¨ä¸èƒ½è¶…è¿‡ï¼ˆoutliveï¼‰å€¼çš„ç”Ÿå­˜æœŸã€‚</p><p>è¿™ä¸ªçº¦æŸå¾ˆç›´è§‚ï¼Œä¹Ÿå¾ˆå¥½ç†è§£ã€‚åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œsum() å‡½æ•°å¤„åœ¨ main() å‡½æ•°ä¸‹ä¸€å±‚è°ƒç”¨æ ˆä¸­ï¼Œå®ƒç»“æŸä¹‹å main() å‡½æ•°è¿˜ä¼šç»§ç»­æ‰§è¡Œï¼Œæ‰€ä»¥åœ¨ main() å‡½æ•°ä¸­å®šä¹‰çš„ data ç”Ÿå‘½å‘¨æœŸè¦æ¯” sum() ä¸­å¯¹ data çš„å¼•ç”¨è¦é•¿ï¼Œè¿™æ ·ä¸ä¼šæœ‰ä»»ä½•é—®é¢˜ã€‚</p><p>ä½†å¦‚æœæ˜¯è¿™æ ·çš„ä»£ç å‘¢ï¼ˆ<a href=\"https://play.rust-lang.org/?version=stable&mode=debug&edition=2018&gist=fd23517a1666c88834f0d47a564671e7\">æƒ…å†µ1</a>ï¼‰ï¼Ÿ</p><pre><code class=\"language-rust\">fn main() {\n    let r = local_ref();\n    println!(\"r: {:p}\", r);\n}\n\nfn local_ref&lt;'a&gt;() -&gt; &amp;'a i32 {\n    let a = 42;\n    &amp;a\n}\n</code></pre><p>æ˜¾ç„¶ï¼Œç”Ÿå‘½å‘¨æœŸæ›´é•¿çš„ main() å‡½æ•°å˜é‡ r ï¼Œå¼•ç”¨äº†ç”Ÿå‘½å‘¨æœŸæ›´çŸ­çš„ local_ref() å‡½æ•°é‡Œçš„å±€éƒ¨å˜é‡ï¼Œè¿™è¿èƒŒäº†æœ‰å…³å¼•ç”¨çš„çº¦æŸï¼Œæ‰€ä»¥ Rust ä¸å…è®¸è¿™æ ·çš„ä»£ç ç¼–è¯‘é€šè¿‡ã€‚</p><p>é‚£ä¹ˆï¼Œå¦‚æœæˆ‘ä»¬åœ¨å †å†…å­˜ä¸­ï¼Œä½¿ç”¨æ ˆå†…å­˜çš„å¼•ç”¨ï¼Œå¯ä»¥ä¹ˆï¼Ÿ</p><p>æ ¹æ®è¿‡å»çš„å¼€å‘ç»éªŒï¼Œä½ ä¹Ÿè®¸ä¼šè„±å£è€Œå‡ºï¼šä¸è¡Œï¼å› ä¸ºå †å†…å­˜çš„ç”Ÿå‘½å‘¨æœŸæ˜¾ç„¶æ¯”æ ˆå†…å­˜è¦æ›´é•¿æ›´çµæ´»ï¼Œè¿™æ ·åšå†…å­˜ä¸å®‰å…¨ã€‚</p><p>æˆ‘ä»¬å†™æ®µä»£ç è¯•è¯•çœ‹ï¼ŒæŠŠä¸€ä¸ªæœ¬åœ°å˜é‡çš„å¼•ç”¨å­˜å…¥ä¸€ä¸ªå¯å˜æ•°ç»„ä¸­ã€‚ä»åŸºç¡€çŸ¥è¯†çš„å­¦ä¹ ä¸­æˆ‘ä»¬çŸ¥é“ï¼Œå¯å˜æ•°ç»„å­˜æ”¾åœ¨å †ä¸Šï¼Œæ ˆä¸Šåªæœ‰ä¸€ä¸ªèƒ–æŒ‡é’ˆæŒ‡å‘å®ƒï¼Œæ‰€ä»¥è¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„æŠŠæ ˆä¸Šå˜é‡çš„å¼•ç”¨å­˜åœ¨å †ä¸Šçš„ä¾‹å­ï¼ˆ<a href=\"https://play.rust-lang.org/?version=stable&mode=debug&edition=2018&gist=1726b8d86610530c22476d1756509208\">æƒ…å†µ2</a>ï¼‰ï¼š</p><pre><code class=\"language-rust\">fn main() {\n    let mut data: Vec&lt;&amp;u32&gt; = Vec::new();\n    let v = 42;\n    data.push(&amp;v);\n    println!(\"data: {:?}\", data);\n}\n</code></pre><p>ç«Ÿç„¶ç¼–è¯‘é€šè¿‡ï¼Œæ€ä¹ˆå›äº‹ï¼Ÿæˆ‘ä»¬å˜æ¢ä¸€ä¸‹ï¼Œçœ‹çœ‹è¿˜èƒ½ç¼–è¯‘ä¸ï¼ˆ<a href=\"https://play.rust-lang.org/?version=stable&mode=debug&edition=2018&gist=daaefec97e99184460664e658e578ce9\">æƒ…å†µ3</a>ï¼‰ï¼Œåˆæ— æ³•é€šè¿‡äº†ï¼</p><pre><code class=\"language-rust\">fn main() {\n    let mut data: Vec&lt;&amp;u32&gt; = Vec::new();\n    push_local_ref(&amp;mut data);\n    println!(\"data: {:?}\", data);\n}\n\nfn push_local_ref(data: &amp;mut Vec&lt;&amp;u32&gt;) {\n    let v = 42;\n    data.push(&amp;v);\n}\n\n</code></pre><p>åˆ°è¿™é‡Œï¼Œä½ æ˜¯ä¸æ˜¯æœ‰ç‚¹è¿·ç³Šäº†ï¼Œè¿™ä¸‰ç§æƒ…å†µï¼Œä¸ºä»€ä¹ˆåŒæ ·æ˜¯å¯¹æ ˆå†…å­˜çš„å¼•ç”¨ï¼Œæ€ä¹ˆç¼–è¯‘ç»“æœéƒ½ä¸ä¸€æ ·ï¼Ÿ</p><p>è¿™ä¸‰æ®µä»£ç çœ‹ä¼¼é”™ç»¼å¤æ‚ï¼Œä½†å¦‚æœæŠ“ä½äº†ä¸€ä¸ªæ ¸å¿ƒè¦ç´ â€œåœ¨ä¸€ä¸ªä½œç”¨åŸŸä¸‹ï¼ŒåŒä¸€æ—¶åˆ»ï¼Œä¸€ä¸ªå€¼åªèƒ½æœ‰ä¸€ä¸ªæ‰€æœ‰è€…â€ï¼Œä½ ä¼šå‘ç°ï¼Œå…¶å®å¾ˆç®€å•ã€‚</p><p>å †å˜é‡çš„ç”Ÿå‘½å‘¨æœŸä¸å…·å¤‡ä»»æ„é•¿çŸ­çš„çµæ´»æ€§ï¼Œå› ä¸ºå †ä¸Šå†…å­˜çš„ç”Ÿæ­»å­˜äº¡ï¼Œè·Ÿæ ˆä¸Šçš„æ‰€æœ‰è€…ç‰¢ç‰¢ç»‘å®šã€‚è€Œæ ˆä¸Šå†…å­˜çš„ç”Ÿå‘½å‘¨æœŸï¼Œåˆè·Ÿæ ˆçš„ç”Ÿå‘½å‘¨æœŸç›¸å…³ï¼Œæ‰€ä»¥æˆ‘ä»¬<strong>æ ¸å¿ƒåªéœ€è¦å…³å¿ƒè°ƒç”¨æ ˆçš„ç”Ÿå‘½å‘¨æœŸ</strong>ã€‚</p><p>ç°åœ¨ä½ æ˜¯ä¸æ˜¯å¯ä»¥è½»æ˜“åˆ¤æ–­å‡ºï¼Œä¸ºä»€ä¹ˆæƒ…å†µ 1 å’Œæƒ…å†µ 3 çš„ä»£ç æ— æ³•ç¼–è¯‘é€šè¿‡äº†ï¼Œå› ä¸ºå®ƒä»¬å¼•ç”¨äº†ç”Ÿå‘½å‘¨æœŸæ›´çŸ­çš„å€¼ï¼Œè€Œæƒ…å†µ2 çš„ä»£ç è™½ç„¶åœ¨å †å†…å­˜é‡Œå¼•ç”¨æ ˆå†…å­˜ï¼Œä½†ç”Ÿå‘½å‘¨æœŸæ˜¯ç›¸åŒçš„ï¼Œæ‰€ä»¥æ²¡æœ‰é—®é¢˜ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/56/44/5632f4043c93cd485567e1dc2ebe7e44.jpg?wh=4335x2348\" alt=\"\"></p><p>å¥½ï¼Œåˆ°è¿™é‡Œï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼ŒRust çš„åªè¯»å€Ÿç”¨å°±è®²å®Œäº†ï¼Œå€Ÿç”¨è€…ä¸èƒ½ä¿®æ”¹è¢«å€Ÿç”¨çš„å€¼ï¼Œç®€å•ç±»æ¯”å°±åƒä½é…’åº—ï¼Œåªæœ‰ä½¿ç”¨æƒã€‚</p><p>ä½†ä¹‹å‰ä¹Ÿæåˆ°ï¼Œæœ‰äº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦å¯å˜å€Ÿç”¨ï¼Œæƒ³åœ¨å€Ÿç”¨çš„è¿‡ç¨‹ä¸­ä¿®æ”¹å€¼çš„å†…å®¹ï¼Œå°±åƒç§Ÿæˆ¿ï¼Œéœ€è¦å¯¹æˆ¿å±‹è¿›è¡Œå¿…è¦çš„è£…é¥°ã€‚</p><h2>å¯å˜å€Ÿç”¨/å¼•ç”¨</h2><p>åœ¨æ²¡æœ‰å¼•å…¥å¯å˜å€Ÿç”¨ä¹‹å‰ï¼Œå› ä¸ºä¸€ä¸ªå€¼åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªæ‰€æœ‰è€…ï¼Œæ‰€ä»¥å¦‚æœè¦ä¿®æ”¹è¿™ä¸ªå€¼ï¼Œåªèƒ½é€šè¿‡å”¯ä¸€çš„æ‰€æœ‰è€…è¿›è¡Œã€‚ä½†æ˜¯ï¼Œå¦‚æœå…è®¸å€Ÿç”¨æ”¹å˜å€¼æœ¬èº«ï¼Œä¼šå¸¦æ¥æ–°çš„é—®é¢˜ã€‚</p><p>æˆ‘ä»¬å…ˆçœ‹ç¬¬ä¸€ç§æƒ…å†µï¼Œ<strong>å¤šä¸ªå¯å˜å¼•ç”¨å…±å­˜</strong>ï¼š</p><pre><code class=\"language-rust\">fn main() {\n    let mut data = vec![1, 2, 3];\n\n    for item in data.iter_mut() {\n        data.push(*item + 1);\n    }\n}\n</code></pre><p>è¿™æ®µä»£ç åœ¨éå†å¯å˜æ•°ç»„ data çš„è¿‡ç¨‹ä¸­ï¼Œè¿˜å¾€ data é‡Œæ·»åŠ æ–°çš„æ•°æ®ï¼Œè¿™æ˜¯å¾ˆå±é™©çš„åŠ¨ä½œï¼Œå› ä¸ºå®ƒç ´åäº†å¾ªç¯çš„ä¸å˜æ€§ï¼ˆloop invariantï¼‰ï¼Œå®¹æ˜“å¯¼è‡´æ­»å¾ªç¯ç”šè‡³ç³»ç»Ÿå´©æºƒã€‚æ‰€ä»¥ï¼Œåœ¨åŒä¸€ä¸ªä½œç”¨åŸŸä¸‹æœ‰å¤šä¸ªå¯å˜å¼•ç”¨ï¼Œæ˜¯ä¸å®‰å…¨çš„ã€‚</p><p>ç”±äº Rust ç¼–è¯‘å™¨é˜»æ­¢äº†è¿™ç§æƒ…å†µï¼Œä¸Šè¿°ä»£ç ä¼šç¼–è¯‘å‡ºé”™ã€‚æˆ‘ä»¬å¯ä»¥ç”¨ Python æ¥ä½“éªŒä¸€ä¸‹å¤šä¸ªå¯å˜å¼•ç”¨å¯èƒ½å¸¦æ¥çš„æ­»å¾ªç¯ï¼š</p><pre><code class=\"language-python\">if __name__ == \"__main__\":\n    data = [1, 2]\n    for item in data:\n        data.append(item + 1)\n        print(item)\n    # unreachable code\n    print(data)\n</code></pre><p>åŒä¸€ä¸ªä¸Šä¸‹æ–‡ä¸­å¤šä¸ªå¯å˜å¼•ç”¨æ˜¯ä¸å®‰å…¨çš„ï¼Œé‚£å¦‚æœ<strong>åŒæ—¶æœ‰ä¸€ä¸ªå¯å˜å¼•ç”¨å’Œè‹¥å¹²ä¸ªåªè¯»å¼•ç”¨</strong>ï¼Œä¼šæœ‰é—®é¢˜å—ï¼Ÿæˆ‘ä»¬å†çœ‹ä¸€æ®µä»£ç ï¼š</p><pre><code class=\"language-rust\">fn main() {\n    let mut data = vec![1, 2, 3];\n    let data1 = vec![&amp;data[0]];\n    println!(\"data[0]: {:p}\", &amp;data[0]);\n\n    for i in 0..100 {\n        data.push(i);\n    }\n\n    println!(\"data[0]: {:p}\", &amp;data[0]);\n    println!(\"boxed: {:p}\", &amp;data1);\n}\n</code></pre><p>åœ¨è¿™æ®µä»£ç é‡Œï¼Œä¸å¯å˜æ•°ç»„ data1 å¼•ç”¨äº†å¯å˜æ•°ç»„ data ä¸­çš„ä¸€ä¸ªå…ƒç´ ï¼Œè¿™æ˜¯ä¸ªåªè¯»å¼•ç”¨ã€‚åç»­æˆ‘ä»¬å¾€ data ä¸­æ·»åŠ äº† 100 ä¸ªå…ƒç´ ï¼Œåœ¨è°ƒç”¨  <code>data.push()</code> æ—¶ï¼Œæˆ‘ä»¬è®¿é—®äº† data çš„å¯å˜å¼•ç”¨ã€‚</p><p>è¿™æ®µä»£ç ä¸­ï¼Œdata çš„åªè¯»å¼•ç”¨å’Œå¯å˜å¼•ç”¨å…±å­˜ï¼Œä¼¼ä¹æ²¡æœ‰ä»€ä¹ˆå½±å“ï¼Œå› ä¸º data1 å¼•ç”¨çš„å…ƒç´ å¹¶æ²¡æœ‰ä»»ä½•æ”¹åŠ¨ã€‚</p><p>å¦‚æœä½ ä»”ç»†æ¨æ•²ï¼Œå°±ä¼šå‘ç°è¿™é‡Œæœ‰å†…å­˜ä¸å®‰å…¨çš„æ½œåœ¨æ“ä½œï¼šå¦‚æœç»§ç»­æ·»åŠ å…ƒç´ ï¼Œå †ä¸Šçš„æ•°æ®é¢„ç•™çš„ç©ºé—´ä¸å¤Ÿäº†ï¼Œå°±ä¼šé‡æ–°åˆ†é…ä¸€ç‰‡è¶³å¤Ÿå¤§çš„å†…å­˜ï¼ŒæŠŠä¹‹å‰çš„å€¼æ‹·è¿‡æ¥ï¼Œç„¶åé‡Šæ”¾æ—§çš„å†…å­˜ã€‚è¿™æ ·å°±ä¼šè®© data1 ä¸­ä¿å­˜çš„ &amp;data[0] å¼•ç”¨å¤±æ•ˆï¼Œå¯¼è‡´å†…å­˜å®‰å…¨é—®é¢˜ã€‚</p><h3>Rustçš„é™åˆ¶</h3><p>å¤šä¸ªå¯å˜å¼•ç”¨å…±å­˜ã€å¯å˜å¼•ç”¨å’Œåªè¯»å¼•ç”¨å…±å­˜è¿™ä¸¤ç§é—®é¢˜ï¼Œé€šè¿‡ GC ç­‰è‡ªåŠ¨å†…å­˜ç®¡ç†æ–¹æ¡ˆå¯ä»¥é¿å…ç¬¬äºŒç§ï¼Œä½†æ˜¯ç¬¬ä¸€ä¸ªé—®é¢˜ GC ä¹Ÿæ— æµäºäº‹ã€‚</p><p>æ‰€ä»¥ä¸ºäº†ä¿è¯å†…å­˜å®‰å…¨ï¼ŒRust å¯¹å¯å˜å¼•ç”¨çš„ä½¿ç”¨ä¹Ÿåšäº†ä¸¥æ ¼çš„çº¦æŸï¼š</p><ul>\n<li><strong>åœ¨ä¸€ä¸ªä½œç”¨åŸŸå†…ï¼Œä»…å…è®¸ä¸€ä¸ªæ´»è·ƒçš„å¯å˜å¼•ç”¨</strong>ã€‚æ‰€è°“æ´»è·ƒï¼Œå°±æ˜¯çœŸæ­£è¢«ä½¿ç”¨æ¥ä¿®æ”¹æ•°æ®çš„å¯å˜å¼•ç”¨ï¼Œå¦‚æœåªæ˜¯å®šä¹‰äº†ï¼Œå´æ²¡æœ‰ä½¿ç”¨æˆ–è€…å½“ä½œåªè¯»å¼•ç”¨ä½¿ç”¨ï¼Œä¸ç®—æ´»è·ƒã€‚</li>\n<li>åœ¨ä¸€ä¸ªä½œç”¨åŸŸå†…ï¼Œ<strong>æ´»è·ƒçš„å¯å˜å¼•ç”¨ï¼ˆå†™ï¼‰å’Œåªè¯»å¼•ç”¨ï¼ˆè¯»ï¼‰æ˜¯äº’æ–¥çš„ï¼Œä¸èƒ½åŒæ—¶å­˜åœ¨</strong>ã€‚</li>\n</ul><p>è¿™ä¸ªçº¦æŸä½ æ˜¯ä¸æ˜¯è§‰å¾—çœ‹ä¸Šå»ä¼¼æ›¾ç›¸è¯†ï¼Ÿå¯¹ï¼Œå®ƒå’Œæ•°æ®åœ¨å¹¶å‘ä¸‹çš„è¯»å†™è®¿é—®ï¼ˆæ¯”å¦‚ RwLockï¼‰è§„åˆ™éå¸¸ç±»ä¼¼ï¼Œä½ å¯ä»¥ç±»æ¯”å­¦ä¹ ã€‚</p><p>ä»å¯å˜å¼•ç”¨çš„çº¦æŸæˆ‘ä»¬ä¹Ÿå¯ä»¥çœ‹åˆ°ï¼ŒRust ä¸å…‰è§£å†³äº† GC å¯ä»¥è§£å†³çš„å†…å­˜å®‰å…¨é—®é¢˜ï¼Œè¿˜è§£å†³äº† GC æ— æ³•è§£å†³çš„é—®é¢˜ã€‚åœ¨ç¼–å†™ä»£ç çš„æ—¶å€™ï¼Œ Rust ç¼–è¯‘å™¨å°±åƒä½ çš„è‰¯å¸ˆç›Šå‹ï¼Œä¸æ–­æ•¦ä¿ƒä½ é‡‡ç”¨æœ€ä½³å®è·µæ¥æ’°å†™å®‰å…¨çš„ä»£ç ã€‚</p><p>å­¦å®Œä»Šå¤©çš„å†…å®¹ï¼Œæˆ‘ä»¬å†å›çœ‹<a href=\"https://time.geekbang.org/column/article/408400\">å¼€ç¯‡è¯</a>å±•ç¤ºçš„ç¬¬ä¸€æ€§åŸç†å›¾ï¼Œä½ çš„ç†è§£æ˜¯ä¸æ˜¯æ›´é€å½»äº†ï¼Ÿ</p><p><img src=\"https://static001.geekbang.org/resource/image/60/51/605094c2dc6992997e31f687dc908751.jpg?wh=2646x3048\" alt=\"\"></p><p>å…¶å®ï¼Œæˆ‘ä»¬æ‹¨å¼€è¡¨å±‚çš„ä¼—å¤šæ‰€æœ‰æƒè§„åˆ™ï¼Œä¸€å±‚å±‚æ·±ç©¶ä¸‹å»ï¼Œè§¦åŠæœ€åŸºç¡€çš„æ¦‚å¿µï¼Œææ¸…æ¥šå †æˆ–æ ˆä¸­å€¼åˆ°åº•æ˜¯å¦‚ä½•å­˜æ”¾çš„ã€åœ¨å†…å­˜ä¸­å€¼æ˜¯å¦‚ä½•è®¿é—®çš„ï¼Œç„¶åä»è¿™äº›æ¦‚å¿µå‡ºå‘ï¼Œæˆ–è€…æ‰©å±•å…¶å¤–å»¶ï¼Œæˆ–è€…é™åˆ¶å…¶ä½¿ç”¨ï¼Œä»æ ¹æœ¬ä¸Šå¯»æ‰¾è§£å†³ä¹‹é“ï¼Œè¿™æ‰æ˜¯æˆ‘ä»¬å¤„ç†å¤æ‚é—®é¢˜çš„æœ€ä½³æ‰‹æ®µï¼Œä¹Ÿæ˜¯Rustçš„è®¾è®¡æ€è·¯ã€‚</p><h2>å°ç»“</h2><p>ä»Šå¤©æˆ‘ä»¬å­¦ä¹ äº† Borrow è¯­ä¹‰ï¼Œææ¸…æ¥šäº†åªè¯»å¼•ç”¨å’Œå¯å˜å¼•ç”¨çš„åŸç†ï¼Œç»“åˆä¸Šä¸€è®²å­¦ä¹ çš„ Move / Copy è¯­ä¹‰ï¼ŒRust ç¼–è¯‘å™¨ä¼šé€šè¿‡æ£€æŸ¥ï¼Œæ¥ç¡®ä¿ä»£ç æ²¡æœ‰è¿èƒŒè¿™ä¸€ç³»åˆ—çš„è§„åˆ™ï¼š</p><ol>\n<li>ä¸€ä¸ªå€¼åœ¨åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªæ‰€æœ‰è€…ã€‚å½“æ‰€æœ‰è€…ç¦»å¼€ä½œç”¨åŸŸï¼Œå…¶æ‹¥æœ‰çš„å€¼ä¼šè¢«ä¸¢å¼ƒã€‚èµ‹å€¼æˆ–è€…ä¼ å‚ä¼šå¯¼è‡´å€¼ Moveï¼Œæ‰€æœ‰æƒè¢«è½¬ç§»ï¼Œä¸€æ—¦æ‰€æœ‰æƒè½¬ç§»ï¼Œä¹‹å‰çš„å˜é‡å°±ä¸èƒ½è®¿é—®ã€‚</li>\n<li>å¦‚æœå€¼å®ç°äº† Copy traitï¼Œé‚£ä¹ˆèµ‹å€¼æˆ–ä¼ å‚ä¼šä½¿ç”¨ Copy è¯­ä¹‰ï¼Œç›¸åº”çš„å€¼ä¼šè¢«æŒ‰ä½æ‹·è´ï¼Œäº§ç”Ÿæ–°çš„å€¼ã€‚</li>\n<li>ä¸€ä¸ªå€¼å¯ä»¥æœ‰å¤šä¸ªåªè¯»å¼•ç”¨ã€‚</li>\n<li>ä¸€ä¸ªå€¼å¯ä»¥æœ‰å”¯ä¸€ä¸€ä¸ªæ´»è·ƒçš„å¯å˜å¼•ç”¨ã€‚å¯å˜å¼•ç”¨ï¼ˆå†™ï¼‰å’Œåªè¯»å¼•ç”¨ï¼ˆè¯»ï¼‰æ˜¯äº’æ–¥çš„å…³ç³»ï¼Œå°±åƒå¹¶å‘ä¸‹æ•°æ®çš„è¯»å†™äº’æ–¥é‚£æ ·ã€‚</li>\n<li>å¼•ç”¨çš„ç”Ÿå‘½å‘¨æœŸä¸èƒ½è¶…å‡ºå€¼çš„ç”Ÿå‘½å‘¨æœŸã€‚</li>\n</ol><p>ä½ ä¹Ÿå¯ä»¥çœ‹è¿™å¼ å›¾å¿«é€Ÿå›é¡¾ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/94/30/94b4311f2b384f91dfb051bb84884c30.jpg?wh=6927x3821\" alt=\"\"></p><p>ä½†æ€»æœ‰ä¸€äº›ç‰¹æ®Šæƒ…å†µï¼Œæ¯”å¦‚DAGï¼Œæˆ‘ä»¬æƒ³ç»•è¿‡â€œä¸€ä¸ªå€¼åªæœ‰ä¸€ä¸ªæ‰€æœ‰è€…â€çš„é™åˆ¶ï¼Œæ€ä¹ˆåŠï¼Ÿä¸‹ä¸€è®²æˆ‘ä»¬ç»§ç»­å­¦ä¹ â€¦â€¦</p><h3>æ€è€ƒé¢˜</h3><ol>\n<li>ä¸Šä¸€è®²æˆ‘ä»¬åœ¨è®² Copy trait æ—¶è¯´åˆ°ï¼Œå¯å˜å¼•ç”¨æ²¡æœ‰å®ç° Copy traitã€‚ç»“åˆè¿™ä¸€è®²çš„å†…å®¹ï¼Œæƒ³æƒ³ä¸ºä»€ä¹ˆï¼Ÿ</li>\n<li>ä¸‹é¢è¿™æ®µä»£ç ï¼Œå¦‚ä½•ä¿®æ”¹æ‰èƒ½ä½¿å…¶ç¼–è¯‘é€šè¿‡ï¼Œé¿å…åŒæ—¶æœ‰åªè¯»å¼•ç”¨å’Œå¯å˜å¼•ç”¨ï¼Ÿ</li>\n</ol><pre><code class=\"language-rust\">fn main() {\n&nbsp; let mut arr = vec![1, 2, 3];\n&nbsp; // cache the last item\n&nbsp; let last = arr.last();\n&nbsp; arr.push(4);\n&nbsp; // consume previously stored last item\n&nbsp; println!(\"last: {:?}\", last);\n}\n</code></pre><p>æ¬¢è¿åœ¨ç•™è¨€åŒºåˆ†äº«ä½ çš„æ€è€ƒã€‚ä»Šå¤©ä½ å®Œæˆäº† Rust å­¦ä¹ çš„ç¬¬å…«æ¬¡æ‰“å¡ï¼å¦‚æœä½ è§‰å¾—æœ‰æ”¶è·ï¼Œä¹Ÿæ¬¢è¿ä½ åˆ†äº«ç»™èº«è¾¹çš„æœ‹å‹ï¼Œé‚€TAä¸€èµ·è®¨è®ºã€‚</p><h2>å‚è€ƒèµ„æ–™</h2><p>æœ‰åŒå­¦è¯„è®º,å¥½å¥‡å¯å˜å¼•ç”¨æ˜¯å¦‚ä½•å¯¼è‡´å †å†…å­˜é‡æ–°åˆ†é…çš„ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸ªä¾‹å­ã€‚æˆ‘å…ˆåˆ†é…ä¸€ä¸ª capacity ä¸º 1 çš„ Vec<i32>ï¼Œç„¶åæ”¾å…¥ 32 ä¸ªå…ƒç´ ï¼Œæ­¤æ—¶å®ƒä¼šé‡æ–°åˆ†é…ï¼Œç„¶åæ‰“å°é‡æ–°åˆ†é…å‰å &amp;v[0] çš„å †åœ°å€æ—¶ï¼Œä¼šçœ‹åˆ°å‘ç”Ÿäº†å˜åŒ–ã€‚</i32></p><p>æ‰€ä»¥ï¼Œå¦‚æœæˆ‘ä»¬æœ‰æŒ‡å‘æ—§çš„ &amp;v[0] çš„åœ°å€ï¼Œå°±ä¼šè¯»åˆ°å·²é‡Šæ”¾å†…å­˜ï¼Œè¿™å°±æ˜¯æˆ‘åœ¨æ–‡ä¸­è¯´ä¸ºä»€ä¹ˆåœ¨åŒä¸€ä¸ªä½œç”¨åŸŸä¸‹ï¼Œå¯å˜å¼•ç”¨å’Œåªè¯»å¼•ç”¨ä¸èƒ½å…±å­˜ï¼ˆ<a href=\"https://play.rust-lang.org/?version=stable&mode=debug&edition=2018&gist=3027c5f5751f9ec4c45d7b918fec34f3\">ä»£ç </a>ï¼‰ã€‚</p><pre><code>use std::mem;\n\nfn main() {\n    // capacity æ˜¯ 1, len æ˜¯ 0\n    let mut v = vec![1];\n    // capacity æ˜¯ 8, len æ˜¯ 0\n    let v1: Vec&lt;i32&gt; = Vec::with_capacity(8);\n\n    print_vec(&quot;v1&quot;, v1);\n\n    // æˆ‘ä»¬å…ˆæ‰“å° heap åœ°å€ï¼Œç„¶åçœ‹çœ‹æ·»åŠ å†…å®¹æ˜¯å¦ä¼šå¯¼è‡´å †é‡åˆ†é…\n    println!(&quot;heap start: {:p}&quot;, &amp;v[0] as *const i32);\n\n    extend_vec(&amp;mut v);\n\n    // heap åœ°å€æ”¹å˜äº†ï¼è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå¯å˜å¼•ç”¨å’Œä¸å¯å˜å¼•ç”¨ä¸èƒ½å…±å­˜çš„åŸå› \n    println!(&quot;new heap start: {:p}&quot;, &amp;v[0] as *const i32);\n\n    print_vec(&quot;v&quot;, v);\n}\n\nfn extend_vec(v: &amp;mut Vec&lt;i32&gt;) {\n    // Vec&lt;T&gt; å †å†…å­˜é‡Œ T çš„ä¸ªæ•°æ˜¯æŒ‡æ•°å¢é•¿çš„ï¼Œæˆ‘ä»¬è®©å®ƒæ°å¥½ push 33 ä¸ªå…ƒç´ \n    // capacity ä¼šå˜æˆ 64\n    (2..34).into_iter().for_each(|i| v.push(i));\n}\n\nfn print_vec&lt;T&gt;(name: &amp;str, data: Vec&lt;T&gt;) {\n    let p: [usize; 3] = unsafe { mem::transmute(data) };\n    // æ‰“å° Vec&lt;T&gt; çš„å †åœ°å€ï¼Œcapacityï¼Œlen\n    println!(&quot;{}: 0x{:x}, {}, {}&quot;, name, p[0], p[1], p[2]);\n}\n</code></pre><p>æ‰“å°ç»“æœï¼ˆåœ°å€åœ¨ä½ æœºå™¨ä¸Šä¼šä¸ä¸€æ ·ï¼‰ï¼š</p><pre><code>v1: 0x7f8a2f405e00, 8, 0\nheap start: 0x7f8a2f405df0\nnew heap start: 0x7f8a2f405e20\nv: 0x7f8a2f405e20, 64, 33\n</code></pre><p>å¦‚æœä½ è¿è¡Œäº†è¿™æ®µä»£ç ï¼Œä½ å¯èƒ½ä¼šæ³¨æ„åˆ°ä¸€ä¸ªå¾ˆæœ‰æ„æ€çš„ç»†èŠ‚ï¼šæˆ‘åœ¨ playground ä»£ç é“¾æ¥ä¸­ç»™å‡ºçš„ä»£ç å’Œæ–‡ä¸­çš„ä»£ç ç¨å¾®æœ‰äº›ä¸åŒã€‚</p><p>åœ¨æ–‡ä¸­æˆ‘çš„ç¯å¢ƒæ˜¯ OS Xï¼Œå¾ˆå°‘é‡çš„æ•°æ®å°±ä¼šè®©å †å†…å­˜é‡æ–°åˆ†é…ï¼Œè€Œ playground æ˜¯ Linux ç¯å¢ƒï¼Œæˆ‘ä¸€ç›´è¯•åˆ° &gt; 128KB å†…å­˜æ‰è®© Vec<t> çš„å †å†…å­˜é‡åˆ†é…ã€‚</t></p>","neighbors":{"left":{"article_title":"07ï½œæ‰€æœ‰æƒï¼šå€¼çš„ç”Ÿæ€å¤§æƒåˆ°åº•åœ¨è°æ‰‹ä¸Šï¼Ÿ","id":415098},"right":{"article_title":"09ï½œæ‰€æœ‰æƒï¼šä¸€ä¸ªå€¼å¯ä»¥æœ‰å¤šä¸ªæ‰€æœ‰è€…ä¹ˆï¼Ÿ","id":416722}},"comments":[{"had_liked":false,"id":311081,"user_name":"woshidag","can_delete":false,"product_type":"c1","uid":1026057,"ip_address":"","ucode":"772A12D1386BBF","user_header":"","comment_is_top":true,"comment_ctime":1631066968,"is_pvip":false,"replies":[{"id":"112734","content":"éå¸¸æ£’ï¼<br><br>ç¬¬äºŒé¢˜ä¹Ÿå¯ä»¥å…ˆä½¿ç”¨ï¼Œå pushã€‚<br><br>```rust<br>fn main() {<br>  let mut arr = vec![1, 2, 3];<br>  &#47;&#47; cache the last item<br>  let last = arr.last();<br>  &#47;&#47; consume previously stored last item<br>  println!(&quot;last: {:?}&quot;, last);<br>  arr.push(4);<br>}<br>```","user_name":"ä½œè€…å›å¤","user_name_real":"Tyr","uid":"1079375","ctime":1631069828,"ip_address":"","comment_id":311081,"utype":1}],"discussion_count":2,"race_medal":0,"score":"9.2233721200902001e+18","product_id":100085301,"comment_content":"ç¬¬ä¸€é¢˜<br>å¯å˜å¼•ç”¨å¯copy traitçš„è¯ï¼Œç›¸å½“äºå¤šä¸ªåœ°æ–¹å¯ä»¥ä¿®æ”¹åŒä¸€å—æ•°æ®ï¼Œè¿èƒŒâ€œä¸€ä¸ªå€¼åœ¨åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªæ‰€æœ‰è€…â€<br>ç¬¬äºŒé¢˜ï¼Œç”¨æ•°ç»„ä¸‹æ ‡å–å€¼ï¼Œi32å®ç°äº†copy trait<br>fn main() {<br>    let mut arr = vec![1, 2, 3];<br>    &#47;&#47; cache the last item<br>    let last = arr[arr.len()-1];<br>    &#47;&#47; let last = arr.last();<br>    arr.push(4);<br>    &#47;&#47; consume previously stored last item<br>    println!(&quot;last: {:?}&quot;, last);<br>  }","like_count":20,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526466,"discussion_content":"éå¸¸æ£’ï¼\n\nç¬¬äºŒé¢˜ä¹Ÿå¯ä»¥å…ˆä½¿ç”¨ï¼Œå pushã€‚\n\n```rust\nfn main() {\n  let mut arr = vec![1, 2, 3];\n  // cache the last item\n  let last = arr.last();\n  // consume previously stored last item\n  println!(&amp;quot;last: {:?}&amp;quot;, last);\n  arr.push(4);\n}\n```","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631069828,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1133945,"avatar":"https://static001.geekbang.org/account/avatar/00/11/4d/79/803537db.jpg","nickname":"æ…¢åŠ¨ä½œ","note":"","ucode":"62C944F4A4D8AC","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":392637,"discussion_content":"å¯å˜å¼•ç”¨çš„moveçœ‹ä¸æ‡‚ï¼Ÿhttps://stackoverflow.com/questions/32154387/why-is-the-mutable-reference-not-moved-here","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1631083900,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":311067,"user_name":"pedro","can_delete":false,"product_type":"c1","uid":1200704,"ip_address":"","ucode":"F40C839DDFD599","user_header":"https://static001.geekbang.org/account/avatar/00/12/52/40/e57a736e.jpg","comment_is_top":true,"comment_ctime":1631062786,"is_pvip":false,"replies":[{"id":"112738","content":"éå¸¸æ­£ç¡®ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"Tyr","uid":"1079375","ctime":1631070169,"ip_address":"","comment_id":311067,"utype":1}],"discussion_count":5,"race_medal":0,"score":"9.2233720986154004e+18","product_id":100085301,"comment_content":"1. ä¸Šä¸€è®²æˆ‘ä»¬åœ¨è®² Copy trait æ—¶è¯´åˆ°ï¼Œå¯å˜å¼•ç”¨æ²¡æœ‰å®ç° Copy traitã€‚ç»“åˆè¿™ä¸€è®²çš„å†…å®¹ï¼Œæƒ³æƒ³ä¸ºä»€ä¹ˆï¼Ÿ<br><br>åœ¨ä¸€ä¸ªä½œç”¨åŸŸå†…ï¼Œä»…å…è®¸ä¸€ä¸ªæ´»è·ƒçš„å¯å˜å¼•ç”¨ï¼Œå¦‚æœå¯ä»¥è¢« Copyï¼Œé‚£è¿˜æ€ä¹ˆç©ã€‚<br><br>ä¸‹é¢è¿™æ®µä»£ç ï¼Œå¦‚ä½•ä¿®æ”¹æ‰èƒ½ä½¿å…¶ç¼–è¯‘é€šè¿‡ï¼Œé¿å…åŒæ—¶æœ‰åªè¯»å¼•ç”¨å’Œå¯å˜å¼•ç”¨ï¼Ÿ<br><br>ç©¶å…¶æ ¹æœ¬åŸå› åœ¨äºï¼Œå¯å˜ä¸ä¸å¯å˜å€Ÿç”¨ç›¸äº’äº¤ç¼ ï¼Œç ´åäº†ï¼šæ´»è·ƒçš„å¯å˜å¼•ç”¨ï¼ˆå†™ï¼‰å’Œåªè¯»å¼•ç”¨ï¼ˆè¯»ï¼‰æ˜¯äº’æ–¥çš„ï¼Œä¸èƒ½åŒæ—¶å­˜åœ¨çš„åŸåˆ™ï¼Œå› æ­¤ä¿®æ”¹ä¹Ÿå¾ˆç®€å•ï¼ŒæŠŠ arr.push ä¸Šç§»ï¼Œæˆ–è€…ä¸‹ç§»ï¼Œå¦‚ä¸‹ï¼š<br><br>fn main() {<br>  let mut arr = vec![1,2,3];<br>  let last = arr.last();<br>  println!(&quot;last: {:?}&quot;, last);<br>  arr.push(4);<br>}<br><br>å½“ç„¶ä¹Ÿå¯ä»¥ä¸Šç§»åˆ° last å‰é¢ã€‚","like_count":15,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526456,"discussion_content":"éå¸¸æ­£ç¡®ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631070169,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1580803,"avatar":"https://static001.geekbang.org/account/avatar/00/18/1f/03/e4e15f95.jpg","nickname":"DustyBun","note":"","ucode":"546D2E89B2E96E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":406496,"discussion_content":"æœ‰ç‚¹ä¸ç†è§£ï¼Œæ´»è·ƒçš„å¯å˜ä¸åªè¯»ä¹Ÿè¿˜æ˜¯åœ¨åŒä¸€ä¸ªä½œç”¨åŸŸå‘€ï¼Œè¿™ä¸ªä¸èƒ½åŒæ—¶å­˜åœ¨çš„åŸåˆ™åˆ°åº•æ˜¯æ˜¯ä»€ä¹ˆï¼Œä¸èƒ½æŒ¨ç€?","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1634780890,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1208393,"avatar":"https://static001.geekbang.org/account/avatar/00/12/70/49/d7690979.jpg","nickname":"tommyCmd","note":"","ucode":"4ADBB1FA44668D","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1580803,"avatar":"https://static001.geekbang.org/account/avatar/00/18/1f/03/e4e15f95.jpg","nickname":"DustyBun","note":"","ucode":"546D2E89B2E96E","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":578027,"discussion_content":"åŒé—®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656474070,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":406496,"ip_address":""},"score":578027,"extra":""},{"author":{"id":1933174,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/7f/76/51137a97.jpg","nickname":"ä¸€ä¸€","note":"","ucode":"F552F21A538D6F","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1208393,"avatar":"https://static001.geekbang.org/account/avatar/00/12/70/49/d7690979.jpg","nickname":"tommyCmd","note":"","ucode":"4ADBB1FA44668D","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":586385,"discussion_content":"åŒé—®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662177160,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":578027,"ip_address":"æµ™æ±Ÿ"},"score":586385,"extra":""}]},{"author":{"id":2835285,"avatar":"","nickname":"Geek_ad4600","note":"","ucode":"D1B55BF41EAF01","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":553910,"discussion_content":"^_^  â€œå½“ç„¶ä¹Ÿå¯ä»¥ä¸Šç§»åˆ° last å‰é¢ã€‚â€  ç¨‹åºæ­£ç¡®æ€§ä¸å°±å˜äº†å—ï¼Œéœ€è¦çš„æ˜¯3ä¸æ˜¯4 ^_^","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646130379,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":311050,"user_name":"Ryan","can_delete":false,"product_type":"c1","uid":2739803,"ip_address":"","ucode":"026C66ED684E00","user_header":"","comment_is_top":true,"comment_ctime":1631034479,"is_pvip":false,"replies":[{"id":"112741","content":"ä½ å¯ä»¥ç”¨ Box::leak &#47; Box:into_raw &#47; ManuallyDrop è®©å †å†…å­˜å®Œå…¨è„±ç¦»è‡ªåŠ¨ç®¡ç†ã€‚æŒ‰ç…§ä½ çš„éœ€æ±‚ï¼Œä½ å¯ä»¥ä½¿ç”¨ ManuallyDropã€‚ä»£ç å¦‚ä¸‹ï¼š<br><br>```rust<br>use std::mem::ManuallyDrop;<br><br>fn main() {<br>    &#47;&#47; ä½¿ç”¨ ManuallyDrop å°è£…æ•°æ®ç»“æ„ä½¿å…¶ä¸è¿›è¡Œè‡ªåŠ¨ drop<br>    let mut s = ManuallyDrop::new(String::from(&quot;Hello World!&quot;));<br><br>    &#47;&#47; ManuallyDrop ä½¿ç”¨äº† Deref trait æŒ‡å‘ Tï¼Œæ‰€ä»¥å¯ä»¥å½“ String ä½¿ç”¨<br>    s.truncate(5);<br>    println!(&quot;s: {:?}&quot;, s);<br><br>    &#47;&#47; å¦‚æœæ²¡æœ‰è¿™å¥ï¼Œs ä¸ä¼šåœ¨ scope ç»“æŸæ—¶è¢«è‡ªåŠ¨ dropï¼ˆä½ å¯ä»¥æ³¨æ‰è¯•ä¸€ä¸‹ï¼‰<br>    &#47;&#47; å¦‚æœæˆ‘ä»¬æƒ³è®©å®ƒå¯ä»¥è‡ªåŠ¨ dropï¼Œå¯ä»¥ç”¨ into_inner<br>    let _: String = ManuallyDrop::into_inner(s);<br>}<br>```<br><br>æ›´è¯¦ç»†çš„ä»£ç å¯ä»¥çœ‹ playgroundï¼ˆæˆ‘å®ç°äº†ä¸ª MyStringï¼Œåœ¨ Drop trait ä¸­åŠ äº†æ‰“å°ï¼Œè¿™æ ·å¯ä»¥æ›´æ¸…æ¥šåœ°çœ‹åˆ° drop æ˜¯å¦è¢«è°ƒç”¨ï¼‰ï¼š<br><br>https:&#47;&#47;play.rust-lang.org&#47;?version=stable&amp;mode=debug&amp;edition=2018&amp;gist=4362bb2f45d252b01822d9206b988019<br><br>è‡³äº Box::leak &#47; Box::into_rawï¼Œæˆ‘ä»¬åç»­ä¼šæ…¢æ…¢è®²åˆ°ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Tyr","uid":"1079375","ctime":1631072145,"ip_address":"","comment_id":311050,"utype":1}],"discussion_count":3,"race_medal":0,"score":"9.2233720771405005e+18","product_id":100085301,"comment_content":"å †å˜é‡çš„ç”Ÿå‘½å‘¨æœŸä¸å…·å¤‡ä»»æ„é•¿çŸ­çš„çµæ´»æ€§ï¼Œå› ä¸ºå †ä¸Šå†…å­˜çš„ç”Ÿæ­»å­˜äº¡ï¼Œè·Ÿæ ˆä¸Šçš„æ‰€æœ‰è€…ç‰¢ç‰¢ç»‘å®šã€‚<br>è¿™åº”è¯¥ç®—æ˜¯ä¸€ä¸ªå¾ˆå¼ºçš„é™åˆ¶ï¼Œå¦‚æœæˆ‘å¸Œæœ›æœ‰ä¸€æ®µå†…å­˜çš„ç”Ÿå‘½å‘¨æœŸæ˜¯ç”±æˆ‘çš„ä¸šåŠ¡é€»è¾‘å†³å®šçš„ï¼Œåœ¨rustä¸­è¦å¦‚ä½•å®ç°å‘¢ï¼Ÿè¿™ç§æƒ…å†µä¸‹åˆå¦‚ä½•è®©rustå¸®åŠ©æˆ‘ç®¡ç†ç”Ÿå‘½å‘¨æœŸï¼Œå‡å°‘é”™è¯¯å‘¢ï¼Ÿ","like_count":10,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526448,"discussion_content":"ä½ å¯ä»¥ç”¨ Box::leak / Box:into_raw / ManuallyDrop è®©å †å†…å­˜å®Œå…¨è„±ç¦»è‡ªåŠ¨ç®¡ç†ã€‚æŒ‰ç…§ä½ çš„éœ€æ±‚ï¼Œä½ å¯ä»¥ä½¿ç”¨ ManuallyDropã€‚ä»£ç å¦‚ä¸‹ï¼š\n\n```rust\nuse std::mem::ManuallyDrop;\n\nfn main() {\n    // ä½¿ç”¨ ManuallyDrop å°è£…æ•°æ®ç»“æ„ä½¿å…¶ä¸è¿›è¡Œè‡ªåŠ¨ drop\n    let mut s = ManuallyDrop::new(String::from(&amp;quot;Hello World!&amp;quot;));\n\n    // ManuallyDrop ä½¿ç”¨äº† Deref trait æŒ‡å‘ Tï¼Œæ‰€ä»¥å¯ä»¥å½“ String ä½¿ç”¨\n    s.truncate(5);\n    println!(&amp;quot;s: {:?}&amp;quot;, s);\n\n    // å¦‚æœæ²¡æœ‰è¿™å¥ï¼Œs ä¸ä¼šåœ¨ scope ç»“æŸæ—¶è¢«è‡ªåŠ¨ dropï¼ˆä½ å¯ä»¥æ³¨æ‰è¯•ä¸€ä¸‹ï¼‰\n    // å¦‚æœæˆ‘ä»¬æƒ³è®©å®ƒå¯ä»¥è‡ªåŠ¨ dropï¼Œå¯ä»¥ç”¨ into_inner\n    let _: String = ManuallyDrop::into_inner(s);\n}\n```\n\næ›´è¯¦ç»†çš„ä»£ç å¯ä»¥çœ‹ playgroundï¼ˆæˆ‘å®ç°äº†ä¸ª MyStringï¼Œåœ¨ Drop trait ä¸­åŠ äº†æ‰“å°ï¼Œè¿™æ ·å¯ä»¥æ›´æ¸…æ¥šåœ°çœ‹åˆ° drop æ˜¯å¦è¢«è°ƒç”¨ï¼‰ï¼š\n\nhttps://play.rust-lang.org/?version=stable&amp;amp;mode=debug&amp;amp;edition=2018&amp;amp;gist=4362bb2f45d252b01822d9206b988019\n\nè‡³äº Box::leak / Box::into_rawï¼Œæˆ‘ä»¬åç»­ä¼šæ…¢æ…¢è®²åˆ°ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631072145,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1018673,"avatar":"http://thirdwx.qlogo.cn/mmopen/ajNVdqHZLLDoDeeNST87MZEdfT8n7yEWp06KsFCTs2ssFh2tbHu413nibrRObOia1Zn9pqiaHgIicVkSHRZM3LHOEA/132","nickname":"è‘¡è„","note":"","ucode":"6E8597D1B09807","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":392554,"discussion_content":"æ§åˆ¶ä¸šåŠ¡é€»è¾‘å†…æ ˆä¸Šæ‰€æœ‰è€…çš„å­˜æ´»ï¼Ÿ\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631059170,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1018673,"avatar":"http://thirdwx.qlogo.cn/mmopen/ajNVdqHZLLDoDeeNST87MZEdfT8n7yEWp06KsFCTs2ssFh2tbHu413nibrRObOia1Zn9pqiaHgIicVkSHRZM3LHOEA/132","nickname":"è‘¡è„","note":"","ucode":"6E8597D1B09807","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":392620,"discussion_content":"å †ã€‚æ ˆä¸Šæ•°æ®çš„å­˜æ´»ä¸å¦ä»»ä½•è¯­è¨€éƒ½ç®¡ä¸äº†ï¼Œå¦åˆ™å°±å¤±å»äº†æ ˆçš„æ„ä¹‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631073239,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":392554,"ip_address":""},"score":392620,"extra":""}]}]},{"had_liked":false,"id":311616,"user_name":"Marvichov","can_delete":false,"product_type":"c1","uid":1111835,"ip_address":"","ucode":"7482099415C41C","user_header":"https://static001.geekbang.org/account/avatar/00/10/f7/1b/db7a0edc.jpg","comment_is_top":true,"comment_ctime":1631341339,"is_pvip":false,"replies":[{"id":"113007","content":"éå¸¸èµï¼","user_name":"ä½œè€…å›å¤","user_name_real":"Tyr","uid":"1079375","ctime":1631516696,"ip_address":"","comment_id":311616,"utype":1}],"discussion_count":1,"race_medal":0,"score":"9.2233720556659999e+18","product_id":100085301,"comment_content":"1. è¿™ç¯‡ä¹Ÿæ˜¯å¸¸çœ‹å¸¸æ–°: https:&#47;&#47;manishearth.github.io&#47;blog&#47;2015&#47;05&#47;17&#47;the-problem-with-shared-mutability&#47;; è¿™ä¹Ÿèƒ½è§£é‡Šä¸ºä»€ä¹ˆå°±ç®—å•çº¿ç¨‹, æŸä¸ªcode entryåªèƒ½æœ‰ä¸€ä¸ªmutable reference<br>2. ç¬¬äºŒé¢˜å¼•å‡ºäº†non lexical lifetime; æ„Ÿè§‰è¿˜æ˜¯ç¬¬ä¸€æ€§åŸç† shared mutability: æŸä¸ªcode entryè¿è¡Œæ—¶, æœ‰ä¸”åªæœ‰ä¸€ä¸ªmutable reference; ä¸è¿å, å°±èƒ½work;<br>3. ç§Ÿæˆ¿é‚£ä¸ªä¾‹å­å¤ªæ£’äº†! æˆ¿å­åˆ°æœŸäº†, ç§Ÿæˆ·ä¸èƒ½ç™½å«–;","like_count":4,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526681,"discussion_content":"éå¸¸èµï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631516696,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":311219,"user_name":"bekyiu","can_delete":false,"product_type":"c1","uid":1119328,"ip_address":"","ucode":"3C43208719FD72","user_header":"https://static001.geekbang.org/account/avatar/00/11/14/60/1f55d565.jpg","comment_is_top":false,"comment_ctime":1631110481,"is_pvip":false,"replies":[{"id":"112809","content":"å¥½é—®é¢˜ã€‚è¿™æ¶‰åŠåˆ° reborrowã€‚åœ¨å‡½æ•°è°ƒç”¨æ—¶ï¼Œsum(b) å®é™…ä¸Šç­‰ä»·äº sum(&amp;mut *b)ã€‚reborrow ä»¥åæˆ‘ä»¬çœ‹æœ‰æ²¡æœ‰æœºä¼šå’Œ NLL (non-lexical lifetime) åŠ é¤ä¸€èµ·ä»‹ç»ä¸€ä¸‹ã€‚ç›®å‰æˆ‘ä»¬å…ˆç†è§£å¥½åŸºæœ¬çš„æ‰€æœ‰æƒ&#47;å€Ÿç”¨&#47;ç”Ÿå‘½å‘¨æœŸè§„åˆ™ã€‚reborrow &#47; NLL æ˜¯ä¸ºäº†è®©ä»£ç æ›´ç®€å•æ˜“å†™è€Œåšçš„æ”¹è¿›ã€‚<br><br>ä½ å¯ä»¥é€šè¿‡ä¸‹é¢çš„ä»£ç çœ‹ reborrow å’Œæ™®é€šå€Ÿç”¨çš„åŒºåˆ«ï¼š<br>```rust<br>fn main() {<br>    let mut x = 42;<br><br>    let r1 = &amp;mut x;<br>    &#47;&#47; reborrow å¯ä»¥é€šè¿‡<br>    let r2 = &amp;*r1;<br>    &#47;&#47; &amp;x ä¸å¯ä»¥<br>    &#47;&#47; let r2 = &amp;x;<br><br>    println!(&quot;r1: {:p}, r2: {:p}&quot;, &amp;r1, &amp;r2);<br><br>    *r1 += 1;<br>}<br>```","user_name":"ä½œè€…å›å¤","user_name_real":"Tyr","uid":"1079375","ctime":1631159720,"ip_address":"","comment_id":311219,"utype":1}],"discussion_count":1,"race_medal":0,"score":"44580783441","product_id":100085301,"comment_content":"    let mut data = vec![1, 2, 3, 4];<br>    let b = &amp;mut data;<br>    println!(&quot;sum of data1: {}&quot;, sum(b));<br>    &#47;&#47; ok<br>    println!(&quot;{:?}&quot;, b);<br><br><br>å¯å˜å¼•ç”¨æ²¡æœ‰å®ç°copy traitï¼Œä¸ºå•¥è¿™æ ·ä¸ä¼šè½¬ç§»æ‰€æœ‰æƒå‘¢","like_count":11,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526525,"discussion_content":"å¥½é—®é¢˜ã€‚è¿™æ¶‰åŠåˆ° reborrowã€‚åœ¨å‡½æ•°è°ƒç”¨æ—¶ï¼Œsum(b) å®é™…ä¸Šç­‰ä»·äº sum(&amp;amp;mut *b)ã€‚reborrow ä»¥åæˆ‘ä»¬çœ‹æœ‰æ²¡æœ‰æœºä¼šå’Œ NLL (non-lexical lifetime) åŠ é¤ä¸€èµ·ä»‹ç»ä¸€ä¸‹ã€‚ç›®å‰æˆ‘ä»¬å…ˆç†è§£å¥½åŸºæœ¬çš„æ‰€æœ‰æƒ/å€Ÿç”¨/ç”Ÿå‘½å‘¨æœŸè§„åˆ™ã€‚reborrow / NLL æ˜¯ä¸ºäº†è®©ä»£ç æ›´ç®€å•æ˜“å†™è€Œåšçš„æ”¹è¿›ã€‚\n\nä½ å¯ä»¥é€šè¿‡ä¸‹é¢çš„ä»£ç çœ‹ reborrow å’Œæ™®é€šå€Ÿç”¨çš„åŒºåˆ«ï¼š\n```rust\nfn main() {\n    let mut x = 42;\n\n    let r1 = &amp;amp;mut x;\n    // reborrow å¯ä»¥é€šè¿‡\n    let r2 = &amp;amp;*r1;\n    // &amp;amp;x ä¸å¯ä»¥\n    // let r2 = &amp;amp;x;\n\n    println!(&amp;quot;r1: {:p}, r2: {:p}&amp;quot;, &amp;amp;r1, &amp;amp;r2);\n\n    *r1 += 1;\n}\n```","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1631159720,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":318062,"user_name":"å½­äºšä¼¦","can_delete":false,"product_type":"c1","uid":2425378,"ip_address":"","ucode":"77A32C73A23F72","user_header":"https://static001.geekbang.org/account/avatar/00/25/02/22/19585900.jpg","comment_is_top":false,"comment_ctime":1635135518,"is_pvip":true,"replies":[{"id":"116592","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"Tyr","uid":"1079375","ctime":1636644109,"ip_address":"","comment_id":318062,"utype":1}],"discussion_count":2,"race_medal":0,"score":"27404939294","product_id":100085301,"comment_content":"ç¬¬ä¸€é¢˜<br>å¯å˜å¼•ç”¨å¦‚æœå®ç°Copy  Traitçš„è¯, å®¹æ˜“é€ æˆåŒä¸€ä½œç”¨åŸŸå†…å‡ºç°å¤šä¸ªå¯å˜å¼•ç”¨, æœ¬è´¨ä¸Šä¼šå¯¹åŒä¸€æ•°æ®æœ‰å¤šä¸ªä¿®æ”¹æƒé™, å½¢æˆæ•°æ®ç«äº‰, ä¼šå¯¼è‡´æœªå®šä¹‰è¡Œä¸ºï¼Œéš¾ä»¥åœ¨è¿è¡Œæ—¶è¿½è¸ªï¼Œå¹¶ä¸”éš¾ä»¥è¯Šæ–­å’Œä¿®å¤ç›¸å½“äºåŒä¸€æ—¶åˆ»åŒä¸€æ•°æ®æœ‰å¤šä¸ªæ‰€æœ‰è€…, æ•°æ®å®‰å…¨å®Œå…¨ä¸å¯æ§, å› æ­¤å¯å˜å¼•ç”¨ä¸èƒ½å®ç°Copy Trait.<br><br>ç¬¬äºŒé¢˜, è§£å†³æ–¹æ¡ˆæœ‰ä¸å°‘<br>ç¬¬ä¸€ç§, æŠŠ`arr.push(4)` ç§»åŠ¨åˆ°æ‰“å°ä¸‹æ–¹<br>```rsut<br>fn main() {<br><br>  let mut arr = vec![1, 2, 3];<br><br>  let last = arr.last();<br>  println!(&quot;last: {:?}&quot;, last);<br><br>  arr.push(4);<br><br><br>}<br>```<br>è¿™æ ·åšä¸€å¼€å§‹æ˜¯æ¯”è¾ƒéš¾ä»¥ç†è§£çš„,  å› ä¸ºå¯å˜å¼•ç”¨å’Œä¸å¯å¼•ç”¨ä¼¼ä¹éƒ½åœ¨mainå‡½æ•°è¿™åŒä¸€ä¸ªä½œç”¨åŸŸå†…, ä½†æ˜¯çœ‹è¿‡æ­»çµä¹¦è¿˜æ˜¯å•¥çš„å¤§è‡´å°±æ˜ç™½äº†, å…¶å®æ˜¯ç¼–è¯‘å™¨è‡ªå·±åšäº†ä¼˜åŒ–, æ·»åŠ äº†ä¸€äº›ç”Ÿå‘½å‘¨æœŸæ ‡å¿—, ä½¿å¾—ä¸å¯å˜å¼•ç”¨çš„ç”Ÿå‘½å‘¨æœŸåœ¨æ‰“å°è°ƒç”¨å®Œä¹‹åå°±æå‰ç»“æŸäº†,  ä¹‹åå†ä½¿ç”¨å¯å˜å¼•ç”¨å°±æ²¡é—®é¢˜äº†.  æ–°ç‰ˆBooké‡Œé¢æœ‰: ç¼–è¯‘å™¨åœ¨ä½œç”¨åŸŸç»“æŸä¹‹å‰åˆ¤æ–­ä¸å†ä½¿ç”¨çš„å¼•ç”¨çš„èƒ½åŠ›è¢«ç§°ä¸ºéè¯æ³•ä½œç”¨åŸŸç”Ÿå‘½å‘¨æœŸï¼ˆNon-Lexical Lifetimesï¼Œç®€ç§°NLLï¼‰.<br> <br>è¿˜æœ‰ä¸€ä¸ªæ˜¯è°ƒç”¨`Option`çš„æ–¹æ³•cloned, ä¹Ÿç®—è¡Œçš„é€šå§, å“ˆå“ˆ:<br><br>```rsut<br>fn main() {<br><br>  let mut arr = vec![1, 2, 3];<br><br>  let last = arr.last().cloned();<br>  arr.push(4);<br>  println!(&quot;last: {:?}&quot;, last);<br>}<br>```","like_count":7,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529084,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636644109,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1243961,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/VLB1WPGVDnicKaMGUcFZdtDQOXSib3LhFv6YqCZA16qfy2KHUAGL0ichSEE6rSu8HXSibGdg8vzIQ7qWlk9BZOeJjQ/132","nickname":"Curricane","note":"","ucode":"3778B96444874E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":543164,"discussion_content":"&#34; å…¶å®æ˜¯ç¼–è¯‘å™¨è‡ªå·±åšäº†ä¼˜åŒ–, æ·»åŠ äº†ä¸€äº›ç”Ÿå‘½å‘¨æœŸæ ‡å¿—, ä½¿å¾—ä¸å¯å˜å¼•ç”¨çš„ç”Ÿå‘½å‘¨æœŸåœ¨æ‰“å°è°ƒç”¨å®Œä¹‹åå°±æå‰ç»“æŸäº†, ä¹‹åå†ä½¿ç”¨å¯å˜å¼•ç”¨å°±æ²¡é—®é¢˜äº†&#34; çªç„¶å°±ç†è§£äº†\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640967326,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":311077,"user_name":"gnu","can_delete":false,"product_type":"c1","uid":1631832,"ip_address":"","ucode":"B598402D9377D9","user_header":"https://static001.geekbang.org/account/avatar/00/18/e6/58/a0f74927.jpg","comment_is_top":false,"comment_ctime":1631065061,"is_pvip":false,"replies":[{"id":"112735","content":"å—¯ï¼Œè¿™æ ·ä¹Ÿå¯ä»¥ã€‚è¿™é‡Œéšå«ç€ä½¿ç”¨äº† i32 çš„ Copy traitï¼Œè®© last æ‹·è´äº†ä¸€ä»½ã€‚å®ƒå¯¹ Vec&lt;String&gt; å°±ä¸é€‚ç”¨ï¼Œå› ä¸º String ä¼šåš moveã€‚ä½ å¯ä»¥è¯•ç€åœ¨ playground è¿è¡Œè¿™ç«¯ä»£ç çœ‹çœ‹å‡ºä»€ä¹ˆé”™è¯¯ï¼š<br><br>```rust<br>fn main() {<br>    let mut arr = vec![String::from(&quot;a&quot;), String::from(&quot;b&quot;)];<br>    &#47;&#47; cache the last item<br>    let last = *arr.last().unwrap();<br>    arr.push(String::from(&quot;c&quot;));<br>    &#47;&#47; consume previously stored last item<br>    println!(&quot;last: {:?}&quot;, last);<br>}<br>```<br><br>è¿˜æœ‰å…¶å®ƒè§£æ³•ï¼Œå¯ä»¥å‚è€ƒæˆ‘ä¹‹å‰çš„å›ç­”ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Tyr","uid":"1079375","ctime":1631070054,"ip_address":"","comment_id":311077,"utype":1}],"discussion_count":1,"race_medal":0,"score":"27400868837","product_id":100085301,"comment_content":"fn main() {<br>    let mut arr = vec![1, 2, 3];<br>    &#47;&#47; cache the last item<br>    let last = *arr.last().unwrap();<br>    arr.push(4);<br>    &#47;&#47; consume previously stored last item<br>    println!(&quot;last: {:?}&quot;, last);<br>}<br><br>é€šè¿‡ è§£å¼•ç”¨ è®© last æˆä¸ºåˆ†é…åœ¨æ ˆä¸Šçš„å€¼ï¼Œè€Œä¸æ˜¯æŒ‡å‘å †ä¸Š arr æ•°ç»„å…ƒç´ çš„æŒ‡é’ˆï¼Œå¯ä»¥ç¼–è¯‘é€šè¿‡","like_count":6,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526465,"discussion_content":"å—¯ï¼Œè¿™æ ·ä¹Ÿå¯ä»¥ã€‚è¿™é‡Œéšå«ç€ä½¿ç”¨äº† i32 çš„ Copy traitï¼Œè®© last æ‹·è´äº†ä¸€ä»½ã€‚å®ƒå¯¹ Vec&amp;lt;String&amp;gt; å°±ä¸é€‚ç”¨ï¼Œå› ä¸º String ä¼šåš moveã€‚ä½ å¯ä»¥è¯•ç€åœ¨ playground è¿è¡Œè¿™ç«¯ä»£ç çœ‹çœ‹å‡ºä»€ä¹ˆé”™è¯¯ï¼š\n\n```rust\nfn main() {\n    let mut arr = vec![String::from(&amp;quot;a&amp;quot;), String::from(&amp;quot;b&amp;quot;)];\n    // cache the last item\n    let last = *arr.last().unwrap();\n    arr.push(String::from(&amp;quot;c&amp;quot;));\n    // consume previously stored last item\n    println!(&amp;quot;last: {:?}&amp;quot;, last);\n}\n```\n\nè¿˜æœ‰å…¶å®ƒè§£æ³•ï¼Œå¯ä»¥å‚è€ƒæˆ‘ä¹‹å‰çš„å›ç­”ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631070054,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":313666,"user_name":"thanq","can_delete":false,"product_type":"c1","uid":1064799,"ip_address":"","ucode":"E71A52137F36CA","user_header":"https://static001.geekbang.org/account/avatar/00/10/3f/5f/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1632588126,"is_pvip":false,"replies":[{"id":"113742","content":"éå¸¸æ£’ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"Tyr","uid":"1079375","ctime":1632798685,"ip_address":"","comment_id":313666,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23107424606","product_id":100085301,"comment_content":"ç¬¬ä¸€é¢˜: å¯å˜å¼•ç”¨(eg:  let mut v = vec![1] ; let mut r = v ), å¦‚æœå®ç°äº† Copy trait, å°±ä¼šå¯¼è‡´å˜é‡ r åˆ›å»ºæ—¶, åœ¨æ ˆä¸Šå†å¤åˆ¶ä¸€ä¸ªèƒ–æŒ‡é’ˆ, è¯¥èƒ–æŒ‡é’ˆä¹Ÿä¼šæŒ‡å‘ç›¸åŒçš„å †å†…å­˜, ä¸”è¿™ä¸¤ä¸ªèƒ–æŒ‡é’ˆæ‰€æœ‰æƒç‹¬ç«‹, éƒ½å¯ä»¥å‘èµ·è¯¥ä»½å †å†…å­˜æ•°æ®çš„ä¿®æ”¹æ“ä½œ, è¿™æ ·å°±æ— æ³•ä¿è¯å†…å­˜å®‰å…¨. æ‰€ä»¥, å‡ºäºå†…å­˜å®‰å…¨çš„è€ƒè™‘, Rustå¯¹å¯å˜å¼•ç”¨æ²¡æœ‰å®ç° Copy trait<br><br>ç¬¬äºŒé¢˜:  å®ä¾‹ä»£ç ç¼–è¯‘æŠ¥é”™çš„åŸå› æ˜¯åœ¨å˜é‡ last ä¸ºå¯¹ arr çš„åªè¯»å€Ÿç”¨è¿˜ç”Ÿæ•ˆçš„æƒ…å†µä¸‹, åˆå°è¯•è¿›è¡Œ arr çš„å¯å˜å€Ÿç”¨, è€Œè¿™ä¸¤ä¸ªæ“ä½œæ˜¯äº’æ–¥çš„<br>è§£å†³æ–¹å¼æœ‰ä¸¤ä¸ª: <br>  1 æå‰å½’è¿˜å˜é‡ last å¯¹ arr çš„åªè¯»å€Ÿç”¨<br>```<br>fn main() {<br>  let mut arr = vec![1, 2, 3];<br>  let last = arr.last();<br>  println!(&quot;last: {:?}&quot;, last);<br>  &#47;&#47; last ä½œç”¨åŸŸç»“æŸ, å½’è¿˜arrçš„åªè¯»å€Ÿç”¨<br>  arr.push(4);<br>}<br>```<br>  2 å˜é‡ last èµ‹å€¼ä¸è¿›è¡Œå€Ÿç”¨æ“ä½œ<br>```<br>fn main() {<br>  let mut arr = vec![1, 2, 3];<br>  &#47;&#47;å°†æ•´æ•°å€¼èµ‹å€¼ç»™å˜é‡last, æ­¤å¤„ä¸å‘ç”Ÿå€Ÿç”¨(&amp;)æ“ä½œ<br>  let last = arr[arr.len() - 1];<br>  println!(&quot;last: {:?}&quot;, last);<br>  arr.push(4);<br>  println!(&quot;len: {:?}&quot;, len);<br>}<br>```","like_count":6,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527432,"discussion_content":"éå¸¸æ£’ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632798685,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":311500,"user_name":"ç½—æ°","can_delete":false,"product_type":"c1","uid":1320487,"ip_address":"","ucode":"96BAFAA147341F","user_header":"https://static001.geekbang.org/account/avatar/00/14/26/27/eba94899.jpg","comment_is_top":false,"comment_ctime":1631258418,"is_pvip":false,"replies":[{"id":"112879","content":"å—¯ï¼Œã€Œæ´»è·ƒçš„ã€è¿™ä¸ªå®šè¯­æ˜¯ Rust ç¼–è¯‘å™¨åšçš„ä¸€ä¸ªä¼˜åŒ–ï¼Œå¯ä»¥è®©æˆ‘ä»¬ä¸ç”¨æ·»åŠ ä¸å¿…è¦çš„ä½œç”¨åŸŸã€‚å¯ä»¥ç®€å•è¿™ä¹ˆè®¤ä¸ºï¼šåœ¨æ’°å†™ä»£ç çš„æ—¶å€™ï¼Œå¦‚æœä½ åœ¨æŸå¤„ä½¿ç”¨äº†ä¸€ä¸ªå¯å˜å¼•ç”¨ä¹‹åå°±å†ä¹Ÿæ²¡ç”¨äº†ï¼Œé‚£ä¹ˆè¿™å¤„ä¹‹åçš„åœ°æ–¹è¿™ä¸ªå¯å˜å¼•ç”¨å°±ä¸æ˜¯æ´»è·ƒçš„äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Tyr","uid":"1079375","ctime":1631284578,"ip_address":"","comment_id":311500,"utype":1}],"discussion_count":2,"race_medal":2,"score":"23106094898","product_id":100085301,"comment_content":"æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªæ´»è·ƒçš„å¯å˜å¼•ç”¨å­˜åœ¨ï¼Œå¯¹äºè¿™å¥è¯è¿˜æ˜¯è¦å¥½å¥½ç†è§£ä¸€ä¸‹ã€‚","like_count":5,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526636,"discussion_content":"å—¯ï¼Œã€Œæ´»è·ƒçš„ã€è¿™ä¸ªå®šè¯­æ˜¯ Rust ç¼–è¯‘å™¨åšçš„ä¸€ä¸ªä¼˜åŒ–ï¼Œå¯ä»¥è®©æˆ‘ä»¬ä¸ç”¨æ·»åŠ ä¸å¿…è¦çš„ä½œç”¨åŸŸã€‚å¯ä»¥ç®€å•è¿™ä¹ˆè®¤ä¸ºï¼šåœ¨æ’°å†™ä»£ç çš„æ—¶å€™ï¼Œå¦‚æœä½ åœ¨æŸå¤„ä½¿ç”¨äº†ä¸€ä¸ªå¯å˜å¼•ç”¨ä¹‹åå°±å†ä¹Ÿæ²¡ç”¨äº†ï¼Œé‚£ä¹ˆè¿™å¤„ä¹‹åçš„åœ°æ–¹è¿™ä¸ªå¯å˜å¼•ç”¨å°±ä¸æ˜¯æ´»è·ƒçš„äº†ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1631284578,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1240106,"avatar":"https://static001.geekbang.org/account/avatar/00/12/ec/2a/b11d5ad8.jpg","nickname":"æ›¾ç»ç˜¦è¿‡","note":"","ucode":"57C32575A1C1FD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":557531,"discussion_content":"çœ‹åˆ°è¿™é‡Œæ‰æ˜ç™½ä¸ºå•¥ç¬¬äºŒé¢˜å¯ä»¥é‚£ä¹ˆä¿®æ”¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647853911,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":312012,"user_name":"èƒ¡å°æ¶µ","can_delete":false,"product_type":"c1","uid":2004538,"ip_address":"","ucode":"2E750C65EC282C","user_header":"https://static001.geekbang.org/account/avatar/00/1e/96/3a/e06f8367.jpg","comment_is_top":false,"comment_ctime":1631590435,"is_pvip":false,"replies":[{"id":"113074","content":"æ­£ç¡®","user_name":"ä½œè€…å›å¤","user_name_real":"Tyr","uid":"1079375","ctime":1631601850,"ip_address":"","comment_id":312012,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14516492323","product_id":100085301,"comment_content":"copyè¯­ä¹‰å’Œmoveè¯­ä¹‰åº•å±‚å®ç°éƒ½æ˜¯æŒ‰ä½æµ…æ‹·è´ï¼Œåªä¸è¿‡copyè¯­ä¹‰æ˜¯äº§ç”Ÿæ–°çš„å€¼ï¼Œmoveè¯­ä¹‰æ˜¯æ‰€æœ‰æƒè½¬ç§»ï¼Œè¿™æ ·ç†è§£å¯¹å§ï¼Ÿ","like_count":4,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526831,"discussion_content":"æ­£ç¡®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631601850,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":311676,"user_name":"Marvichov","can_delete":false,"product_type":"c1","uid":1111835,"ip_address":"","ucode":"7482099415C41C","user_header":"https://static001.geekbang.org/account/avatar/00/10/f7/1b/db7a0edc.jpg","comment_is_top":false,"comment_ctime":1631383168,"is_pvip":false,"replies":[{"id":"112994","content":"çœ¼å°–ï¼Œæˆ‘æ„Ÿè§‰æˆ‘ addr of data æ˜¯æƒ³æ‰“ &amp;*dataï¼Œè¿™ä¸ªæ˜¯å †åœ°å€ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Tyr","uid":"1079375","ctime":1631515435,"ip_address":"","comment_id":311676,"utype":1}],"discussion_count":7,"race_medal":0,"score":"14516285056","product_id":100085301,"comment_content":"<br>ä»£ç 3ä¸­, ä¸ºå•¥dataçš„addræ˜¯&amp;&amp;data? ä¸åº”è¯¥å°±æ˜¯&amp;dataå˜›?<br>```<br>println!(  &quot;addr of value: {:p}({:p}), addr of data {:p}, data1: {:p}&quot;,  <br>&amp;data, data1, &amp;&amp;data, &amp;data1);<br>```<br><br>æˆ‘è¯•äº†ä¸‹&amp;&amp;dataå’Œdata1ä¸ä¸€æ ·; æ€ä¹ˆæ„Ÿè§‰æ˜¯ä¸€ä¸ªtemp variableçš„åœ°å€å‘¢?<br>```<br>    println!(<br>        &quot;addr of data {:p}, &amp;&amp;data {:p}, &amp;&amp;&amp;data {:p}&quot;,<br>        &amp;data, &amp;&amp;data, &amp;&amp;&amp;data<br>    );<br>```","like_count":3,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526701,"discussion_content":"çœ¼å°–ï¼Œæˆ‘æ„Ÿè§‰æˆ‘ addr of data æ˜¯æƒ³æ‰“ &amp;amp;*dataï¼Œè¿™ä¸ªæ˜¯å †åœ°å€ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631515435,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1222445,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Vt2RSNYe0pPmj9J8ncLibuudVlRWYAHxicDTGWtexYXeicibjBfUHicbcYW2bEzGAjiadjaHrFibnAA5MvS14b6p8mV2Q/132","nickname":"Metaer","note":"","ucode":"3B510A1582FF69","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":399204,"discussion_content":"é‚£ä¸ºä½•æ–‡æ¡£ä¸ä¿®æ”¹ï¼Ÿ","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1632921117,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1076856,"avatar":"https://static001.geekbang.org/account/avatar/00/10/6e/78/500432c2.jpg","nickname":"èŠ±è½èŠ±å¼€","note":"","ucode":"4F9B9805C09FCC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":541350,"discussion_content":"æˆ‘çš„ç†è§£ï¼Œ(&#34;{:p}&#34;, &amp;&amp;data) åº”è¯¥æ˜¯ &amp;data çš„åœ°å€ã€‚åŒç†ï¼Œ(&#34;{:p}&#34;, &amp;data) æ˜¯ data çš„åœ°å€ã€‚å¦‚æœæ˜¯ (&#34;{:p}&#34;, &amp;*data) ï¼Œé‚£ä¹ˆåº”è¯¥æ˜¯ data ä¸­çš„å­˜æ”¾çš„ ptrï¼Œä¹Ÿå°±æ˜¯å †åœ°å€ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1640337014,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1018487,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8a/77/8a89d0c9.jpg","nickname":"tr1um7h","note":"","ucode":"5BAA01CAADA028","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":393581,"discussion_content":"æˆ‘ç†è§£&amp;&amp;dataæ˜¯æ ˆä¸Šåˆ†é…çš„èƒ–æŒ‡é’ˆçš„åœ°å€ï¼Œç­‰è€å¸ˆçš„è§£ç­”","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1631503021,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1390032,"avatar":"https://static001.geekbang.org/account/avatar/00/15/35/d0/f2ac6d91.jpg","nickname":"é˜¿æˆ","note":"","ucode":"CEC3CD65FB9333","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1018487,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8a/77/8a89d0c9.jpg","nickname":"tr1um7h","note":"","ucode":"5BAA01CAADA028","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":408329,"discussion_content":"æˆ‘è§‰å¾—ä½ è¯´çš„å¯¹ï¼Œä¼°è®¡æ˜¯è€å¸ˆå›å¤çš„æ—¶å€™æ²¡æ³¨æ„ä¸Šä¸‹æ–‡â€¦â€¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635228442,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":393581,"ip_address":""},"score":408329,"extra":""}]},{"author":{"id":2905523,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIDqHQQByGiaXcAk94MdDn3ftupZLXyR6bAKibxOzMxy5h3uBwZ7QiaCiaIfbCMK0cIQfGNax8iawoiaQAg/132","nickname":"nuan","note":"","ucode":"55FF98EB85404D","race_medal":5,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":555473,"discussion_content":"&amp;&amp;data æ˜¯æ ˆåœ°å€ï¼Œ&amp;*data æ˜¯å †åœ°å€ï¼Œè¿™æ ·çœ‹ä»£ç ä¸ç”¨æ”¹ï¼Œaddr of data å°±åº”è¯¥ç”¨ &amp;&amp;data å•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646921138,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1070043,"avatar":"https://static001.geekbang.org/account/avatar/00/10/53/db/858337e3.jpg","nickname":"Ethan Liu","note":"","ucode":"231F944F7CD56A","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":393592,"discussion_content":"åŒé—®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631507473,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":318315,"user_name":"é˜¿æˆ","can_delete":false,"product_type":"c1","uid":1390032,"ip_address":"","ucode":"CEC3CD65FB9333","user_header":"https://static001.geekbang.org/account/avatar/00/15/35/d0/f2ac6d91.jpg","comment_is_top":false,"comment_ctime":1635238751,"is_pvip":false,"replies":[{"id":"116582","content":"1. &amp;String æ˜¯å»‹æŒ‡é’ˆï¼Œå› ä¸ºæŒ‡å‘ String ç»“æ„çš„å¼•ç”¨ä¸éœ€è¦é¢å¤–çš„ä¿¡æ¯ï¼ŒString å°±æºå¸¦äº†é•¿åº¦ç­‰ä¿¡æ¯ã€‚&amp;str æ˜¯èƒ–æŒ‡é’ˆï¼Œå› ä¸º str ç±»å‹æ˜¯ DSTï¼ˆåŠ¨æ€é•¿åº¦ç±»å‹ï¼‰ï¼Œæ‰€ä»¥éœ€è¦é¢å¤–çš„é•¿åº¦ä¿¡æ¯æ¥è¯»å–å’Œä½¿ç”¨æŒ‡é’ˆæŒ‡å‘çš„å†…å­˜ã€‚<br>2. æœ‰é¢„ç•™ï¼Œcapacity å°±æ˜¯å¹²è¿™ä¸ªäº‹æƒ…çš„<br>3. ç¼–è¯‘å™¨ä¸ä¼šè‡ªåŠ¨åŠ å¼•ç”¨ï¼ˆä½†ä¼šè‡ªåŠ¨è§£å¼•ç”¨ï¼‰ï¼Œprintln! æ˜¯ä¸€ä¸ªå®ï¼Œå®ƒå¯ä»¥æ›´æ”¹è¢«å®åŒ…è£¹çš„ä»£ç ï¼Œæ‰€ä»¥ï¼Œå®ƒä¼šæ ¹æ®éœ€è¦åŠ å¼•ç”¨ã€‚<br>4. ä¸æ˜¯ã€‚reborrow å’Œ scope å’Œ lifetime ç›¸å…³ã€‚æ˜¯ç¼–è¯‘å™¨çš„ä¸€ç§ä¼˜åŒ–ã€‚æ›´è¯¦ç»†çš„è§£é‡Šå¯ä»¥çœ‹ï¼šhttps:&#47;&#47;cotigao.medium.com&#47;mutable-reference-in-rust-995320366e22","user_name":"ä½œè€…å›å¤","user_name_real":"Tyr","uid":"1079375","ctime":1636643412,"ip_address":"","comment_id":318315,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5930206047","product_id":100085301,"comment_content":"1. ä¸€ä¸ªèƒ–ç˜¦æŒ‡é’ˆçš„é—®é¢˜ï¼š<br>&amp;String &amp;[u8] æ˜¯èƒ–æŒ‡é’ˆ<br>&amp;Vec&lt;T&gt; æ˜¯ç˜¦æŒ‡é’ˆ<br>æ€ä¹ˆåˆ¤æ–­æ˜¯å“ªä¸ªå‘¢ï¼Œæˆ‘æ„Ÿè§‰ &amp;String å’Œ &amp;Vec&lt;T&gt; åº”è¯¥æ˜¯åŒä¸€ç§å•Šâ€¦â€¦<br><br>2. æ–‡æœ«æ¼”ç¤ºå †å†…å­˜é‡æ–°åˆ†é…çš„ä¾‹å­ï¼Œä¸ºä»€ä¹ˆå®¹é‡åˆ°64æ‰é‡æ–°åˆ†é…å•Šï¼Œä¸€å¼€å§‹çš„å®¹é‡ä¸æ˜¯1å—ï¼Œé‚£å†pushä¸€ä¸ªå®¹é‡åˆ°2å°±åº”è¯¥é‡æ–°åˆ†é…äº†å•Šã€‚æˆ‘ç†è§£å¯èƒ½æ˜¯ä¸€å¼€å§‹å°±é¢„ç•™äº†ä¸€éƒ¨åˆ†åœ°å€ç©ºé—´ï¼Œè¿™æ ·æ‰©å®¹åˆ°æ—¶å€™ï¼Œåªéœ€è¦æ”¹å˜å®¹é‡çš„å€¼å°±è¡Œäº†ã€‚é¢„ç•™çš„ç©ºé—´ä¸å¤Ÿäº†æ‰ä¼šé‡æ–°æ‰¾åœ°æ–¹å¼€è¾Ÿä¸€æ®µæ–°ç©ºé—´ã€‚ä¸çŸ¥é“æˆ‘è¿™æ ·ç†è§£å¯¹ä¸å¯¹ã€‚<br><br>3. è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼š<br>```rust<br>let a = 1;<br>println!(&quot;{}&quot;, a);<br>```<br>è¿™é‡Œæ ¹æ®æˆ‘è·Ÿç¼–è¯‘å™¨æ–—äº‰çš„å†å²æ¥çœ‹ï¼Œaåº”è¯¥æ˜¯è¢«å€Ÿç”¨çš„ã€‚ä¹Ÿå°±æ˜¯ç¼–è¯‘å™¨ç»™aå‰è¾¹è‡ªåŠ¨åŠ äº†ä¸€ä¸ª&amp;ã€‚<br><br>```rust<br>let a = 1;<br>&#47;&#47; error, use &amp;a<br>println!(&quot;{:p}&quot;, a);<br>```<br>ä½†æ˜¯è¿™é‡Œå¥½åƒå°±ä¸ä¼šï¼Œå¾—æ‰‹åŠ¨åŠ &amp;ï¼Œæ‰èƒ½æ‰“å°å‡ºåœ°å€ã€‚<br>èƒ½ä¸èƒ½è¯¦ç»†è§£é‡Šä¸‹ï¼Ÿ<br><br>4. å…³äº reborrow çš„ä¾‹å­ï¼š<br>```rust<br>fn main() {<br>    let mut x = 42;<br><br>    let r1 = &amp;mut x;<br>    &#47;&#47; reborrow å¯ä»¥é€šè¿‡<br>    let r2 = &amp;*r1;<br>    &#47;&#47; &amp;x ä¸å¯ä»¥<br>    &#47;&#47; let r2 = &amp;x;<br><br>    println!(&quot;r1: {:p}, r2: {:p}&quot;, &amp;r1, &amp;r2);<br><br>    *r1 += 1;<br>}<br>```<br>è¿™é‡Œæ˜¯ä¸æ˜¯å¯ä»¥è¿™æ ·ç†è§£ï¼Œr2 å®é™…ä¸Šå€Ÿç”¨çš„æ˜¯ *r1ï¼ˆè™½ç„¶æˆ‘ä»¬çŸ¥é“ *r1 å°±æ˜¯ xï¼Œä½†ç¼–è¯‘å™¨å¯ä»¥å‡è£…ä¸çŸ¥é“ï¼Ÿï¼‰ã€‚<br>æ‰€ä»¥ *r1 åœ¨ r2 çš„ç”Ÿå‘½å‘¨æœŸå†…æ— æ³•ä½¿ç”¨ã€‚","like_count":2,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529182,"discussion_content":"1. &amp;amp;String æ˜¯å»‹æŒ‡é’ˆï¼Œå› ä¸ºæŒ‡å‘ String ç»“æ„çš„å¼•ç”¨ä¸éœ€è¦é¢å¤–çš„ä¿¡æ¯ï¼ŒString å°±æºå¸¦äº†é•¿åº¦ç­‰ä¿¡æ¯ã€‚&amp;amp;str æ˜¯èƒ–æŒ‡é’ˆï¼Œå› ä¸º str ç±»å‹æ˜¯ DSTï¼ˆåŠ¨æ€é•¿åº¦ç±»å‹ï¼‰ï¼Œæ‰€ä»¥éœ€è¦é¢å¤–çš„é•¿åº¦ä¿¡æ¯æ¥è¯»å–å’Œä½¿ç”¨æŒ‡é’ˆæŒ‡å‘çš„å†…å­˜ã€‚\n2. æœ‰é¢„ç•™ï¼Œcapacity å°±æ˜¯å¹²è¿™ä¸ªäº‹æƒ…çš„\n3. ç¼–è¯‘å™¨ä¸ä¼šè‡ªåŠ¨åŠ å¼•ç”¨ï¼ˆä½†ä¼šè‡ªåŠ¨è§£å¼•ç”¨ï¼‰ï¼Œprintln! æ˜¯ä¸€ä¸ªå®ï¼Œå®ƒå¯ä»¥æ›´æ”¹è¢«å®åŒ…è£¹çš„ä»£ç ï¼Œæ‰€ä»¥ï¼Œå®ƒä¼šæ ¹æ®éœ€è¦åŠ å¼•ç”¨ã€‚\n4. ä¸æ˜¯ã€‚reborrow å’Œ scope å’Œ lifetime ç›¸å…³ã€‚æ˜¯ç¼–è¯‘å™¨çš„ä¸€ç§ä¼˜åŒ–ã€‚æ›´è¯¦ç»†çš„è§£é‡Šå¯ä»¥çœ‹ï¼šhttps://cotigao.medium.com/mutable-reference-in-rust-995320366e22","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636643412,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2056396,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKyJPx4r7mYedM4545Dw4tscPLBQoB7zUbf0RD0sfMyAlZgS1m05u953BYukYBvTHUZnUe7E8Ou8w/132","nickname":"Griffenliu","note":"","ucode":"0A5BFC80B3C0A2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":411458,"discussion_content":"é¡¶ï¼Œè€å¸ˆæˆ–å“ªä½å¤§ç¥è§£ç­”ä¸‹~~~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635933196,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":315976,"user_name":"Lex","can_delete":false,"product_type":"c1","uid":1147270,"ip_address":"","ucode":"4D085735CD9DF1","user_header":"https://static001.geekbang.org/account/avatar/00/11/81/86/3f178c08.jpg","comment_is_top":false,"comment_ctime":1634091439,"is_pvip":false,"replies":[{"id":"115281","content":"ç¦æ­¢ç»§ç»­è®¿é—®çš„ä»£ç ç¼–è¯‘ã€‚é—®é¢˜åœ¨ç¼–è¯‘æœŸå°±è¢«æªå‡ºæ¥äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Tyr","uid":"1079375","ctime":1635132420,"ip_address":"","comment_id":315976,"utype":1}],"discussion_count":4,"race_medal":0,"score":"5929058735","product_id":100085301,"comment_content":"å½“æ ˆä¸Šçš„æ•°æ®è¢«Moveåï¼Œæ ˆä¸ŠåŸæ¥çš„å†…å­˜ä¸­çš„æ•°æ®æœ‰å˜åŒ–å—ï¼Ÿrustè¿™é‡Œæ˜¯å¦‚ä½•å¤„ç†çš„ï¼Œæ˜¯ä»…ä»…ç”±ç¼–è¯‘å™¨ç¦æ­¢ç”¨æˆ·ä»£ç è®¿é—®ï¼Œè¿˜æ˜¯ç›´æ¥åœ¨è¯¥å—å†…å­˜ä¸Šå†™å…¥äº†æŸç§æ ‡è®°ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":528220,"discussion_content":"ç¦æ­¢ç»§ç»­è®¿é—®çš„ä»£ç ç¼–è¯‘ã€‚é—®é¢˜åœ¨ç¼–è¯‘æœŸå°±è¢«æªå‡ºæ¥äº†ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1635132420,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1390032,"avatar":"https://static001.geekbang.org/account/avatar/00/15/35/d0/f2ac6d91.jpg","nickname":"é˜¿æˆ","note":"","ucode":"CEC3CD65FB9333","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":408324,"discussion_content":"ç®€å•è¯´ï¼Œæ‰€æœ‰æƒæ˜¯å†™ä»£ç å’Œç¼–è¯‘ä»£ç çš„æ—¶å€™çš„æ¦‚å¿µï¼Œè¿è¡Œæ—¶æ˜¯ä¸ä¼šæœ‰æ‰€æœ‰æƒçš„ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1635227831,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1672439,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/tLkC8Fe24CbIFib2tNeAMZGq1aSv6dW5GclccjZSwU6AAFb2TSFiajbq4ZrtFRAibGw4jxNaHmicFxGjm7IibmibG87g/132","nickname":"Geek_a34828","note":"","ucode":"4CA07B90ADF776","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":588164,"discussion_content":"ç¼–è¯‘å™¨åˆæ˜¯å¦‚ä½•çŸ¥é“è¿™ä¸ªå€¼ä¸èƒ½è®¿é—®çš„å‘¢ï¼Ÿæ€»å¾—åšç‚¹ä»€ä¹ˆå§ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663582905,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1037669,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/d5/65/1c9f1530.jpg","nickname":"NorthWind","note":"","ucode":"459ADF3B0945E7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":576180,"discussion_content":"ä¹Ÿå°±æ˜¯è¢« move åè¿™ä¸ªå€¼è¿˜æ˜¯åœ¨çš„ï¼Œä½†æ˜¯ç¼–è¯‘å™¨å°±æ˜¯ä¸å…è®¸è®¿é—®ï¼Œè¿™æ ·ç†è§£å¯¹ä¹ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655343568,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":312733,"user_name":"humblelei","can_delete":false,"product_type":"c1","uid":1562245,"ip_address":"","ucode":"4FE89EF54BD9B3","user_header":"https://static001.geekbang.org/account/avatar/00/17/d6/85/7f4f7ada.jpg","comment_is_top":false,"comment_ctime":1631955926,"is_pvip":true,"replies":[{"id":"113317","content":"æ­£ç¡®ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"Tyr","uid":"1079375","ctime":1631982100,"ip_address":"","comment_id":312733,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5926923222","product_id":100085301,"comment_content":"æ‰“å¡ã€‚<br>1ã€è¿èƒŒäº†ä¸€ä¸ªä½œç”¨åŸŸé‡Œåªèƒ½æœ‰ä¸€ä¸ªæ´»è·ƒçš„å¯å˜å¼•ç”¨<br>2ã€å…ˆä½¿ç”¨åä¿®æ”¹<br>```<br>fn main() {<br>    let mut arr = vec![1, 2, 3];<br>    &#47;&#47; cache the last item<br>    let last = arr.last();<br>    &#47;&#47; consume previously stored last item<br>    println!(&quot;last: {:?}&quot;, last);<br>    arr.push(4);<br>}<br><br>```","like_count":1,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527093,"discussion_content":"æ­£ç¡®ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631982100,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":311105,"user_name":"æ…¢åŠ¨ä½œ","can_delete":false,"product_type":"c1","uid":1133945,"ip_address":"","ucode":"62C944F4A4D8AC","user_header":"https://static001.geekbang.org/account/avatar/00/11/4d/79/803537db.jpg","comment_is_top":false,"comment_ctime":1631072575,"is_pvip":true,"replies":[{"id":"112760","content":"æ€è€ƒé¢˜æ­£ç¡®ã€‚<br><br>å¯¹äºå¯å˜å¼•ç”¨å’Œä¸å¯å˜å¼•ç”¨å…±å­˜çš„é—®é¢˜ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸ªä¾‹å­ã€‚æˆ‘å…ˆåˆ†é…ä¸€ä¸ª capacity ä¸º 1 çš„ Vec&lt;i32&gt;ï¼Œç„¶åæ”¾å…¥ 32 ä¸ªå…ƒç´ ï¼Œæ­¤æ—¶å®ƒä¼šé‡æ–°åˆ†é…ã€‚å¦‚æœæ‰“å° &amp;v[0] çš„å †åœ°å€ï¼Œä¼šçœ‹åˆ°å‘ç”Ÿäº†å˜åŒ–ã€‚æ‰€ä»¥å¦‚æœæˆ‘ä»¬æœ‰æŒ‡å‘æ—§çš„ &amp;v[0] çš„åœ°å€ï¼Œé‚£ä¹ˆå°±ä¼šè¯»åˆ°å·²é‡Šæ”¾å†…å­˜ã€‚<br><br>```rust<br>use std::mem;<br><br>fn main() {<br>    &#47;&#47; capacity æ˜¯ 1, len æ˜¯ 0<br>    let mut v = vec![1];<br>    &#47;&#47; capacity æ˜¯ 8, len æ˜¯ 0<br>    let v1: Vec&lt;i32&gt; = Vec::with_capacity(8);<br><br>    print_vec(&quot;v1&quot;, v1);<br><br>    &#47;&#47; æˆ‘ä»¬å…ˆæ‰“å° heap åœ°å€ï¼Œç„¶åçœ‹çœ‹æ·»åŠ å†…å®¹æ˜¯å¦ä¼šå¯¼è‡´å †é‡åˆ†é…<br>    println!(&quot;heap start: {:p}&quot;, &amp;v[0] as *const i32);<br>    &#47;&#47; Vec&lt;T&gt; å †å†…å­˜é‡Œ T çš„ä¸ªæ•°æ˜¯æŒ‡æ•°å¢é•¿çš„ï¼Œæˆ‘ä»¬è®©å®ƒæ°å¥½ push 33 ä¸ªå…ƒç´ <br>    &#47;&#47; capacity ä¼šå˜æˆ 64<br>    (2..34).into_iter().for_each(|i| v.push(i));<br><br>    &#47;&#47; heap åœ°å€æ”¹å˜äº†ï¼è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå¯å˜å¼•ç”¨å’Œä¸å¯å˜å¼•ç”¨ä¸èƒ½å…±å­˜çš„åŸå› <br>    println!(&quot;new heap start: {:p}&quot;, &amp;v[0] as *const i32);<br><br>    print_vec(&quot;v&quot;, v);<br>}<br><br>fn print_vec&lt;T&gt;(name: &amp;str, data: Vec&lt;T&gt;) {<br>    let p: [usize; 3] = unsafe { mem::transmute(data) };<br>    &#47;&#47; æ‰“å° Vec&lt;T&gt; çš„å †åœ°å€ï¼Œcapacityï¼Œlen<br>    println!(&quot;{}: 0x{:x}, 0x{:x}, 0x{:x}&quot;, name, p[0], p[1], p[2]);<br>}<br>```<br><br>æ‰“å°ç»“æœï¼ˆåœ°å€åœ¨ä½ æœºå™¨ä¸Šä¼šä¸ä¸€æ ·ï¼‰ï¼š<br><br>```bash<br>v1: 0x7f962e405e00, 0x8, 0x0<br>heap start: 0x7f962e405df0<br>new heap start: 0x7f962e405e20<br>v: 0x7f962e405e20, 0x40, 0x21<br>```","user_name":"ä½œè€…å›å¤","user_name_real":"Tyr","uid":"1079375","ctime":1631111359,"ip_address":"","comment_id":311105,"utype":1}],"discussion_count":3,"race_medal":0,"score":"5926039871","product_id":100085301,"comment_content":"1ã€å¯å˜å¼•ç”¨copyå¯¼è‡´å¯å˜å¼•ç”¨å’Œå…¶å®ƒå¼•ç”¨å…±å­˜<br>2ã€æ´»è·ƒå¯å˜å¼•ç”¨æ‰ä¼šå’Œå…¶å®ƒå¼•ç”¨å†²çªï¼Œå¯ä»¥è°ƒæ¢ä¸‹4ï¼Œ5ä¸¤è¡Œ<br><br>å¯å˜å¼•ç”¨å¯¼è‡´å †ä¸Šæ•°æ®é‡æ–°åˆ†é…ï¼Œç›¸åº”çš„è¢«å€Ÿç”¨çš„æ ˆä¸Šå˜é‡è¢«ä¿®æ”¹ï¼Œä¸å¯æ¯”å¼•ç”¨æ˜¯é€šè¿‡æ ˆé—´æ¥æŒ‡å‘å †çš„ï¼Œè¿™ç§æƒ…å†µå®é™…ä¸Šæ²¡æœ‰é—®é¢˜ï¼Ÿè€Œæ–‡ä¸­ä¾‹å­æœ€åä¸€ä¸ªï¼Œ&amp;data[0]æ˜¯å †ä¸Šçš„ä¸€ä¸ªå¼•ç”¨æŒ‡å‘å¦ä¸€ä¸ªå †æ•°æ®ï¼Œèµ‹å€¼è¿‡ç¨‹ä¸­æœ‰å€Ÿç”¨ï¼Œä½†æœ€ç»ˆä¸å­˜åœ¨é€šè¿‡è¢«å€Ÿç”¨å˜é‡æŒ‡å‘å †è¿™ä¸ªå…³ç³»ï¼Œå’Œå¯å˜å¼•ç”¨å…±å­˜å°±ä¼šå‡ºé—®é¢˜ï¼Ÿç°åœ¨ä¸ä¼šæ¨¡æ‹Ÿå †ä¸Šæ•°æ®é‡æ–°åˆ†é…ï¼Œå †ç”¨çš„å¤ªå°‘","like_count":1,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526477,"discussion_content":"æ€è€ƒé¢˜æ­£ç¡®ã€‚\n\nå¯¹äºå¯å˜å¼•ç”¨å’Œä¸å¯å˜å¼•ç”¨å…±å­˜çš„é—®é¢˜ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸ªä¾‹å­ã€‚æˆ‘å…ˆåˆ†é…ä¸€ä¸ª capacity ä¸º 1 çš„ Vec&amp;lt;i32&amp;gt;ï¼Œç„¶åæ”¾å…¥ 32 ä¸ªå…ƒç´ ï¼Œæ­¤æ—¶å®ƒä¼šé‡æ–°åˆ†é…ã€‚å¦‚æœæ‰“å° &amp;amp;v[0] çš„å †åœ°å€ï¼Œä¼šçœ‹åˆ°å‘ç”Ÿäº†å˜åŒ–ã€‚æ‰€ä»¥å¦‚æœæˆ‘ä»¬æœ‰æŒ‡å‘æ—§çš„ &amp;amp;v[0] çš„åœ°å€ï¼Œé‚£ä¹ˆå°±ä¼šè¯»åˆ°å·²é‡Šæ”¾å†…å­˜ã€‚\n\n```rust\nuse std::mem;\n\nfn main() {\n    // capacity æ˜¯ 1, len æ˜¯ 0\n    let mut v = vec![1];\n    // capacity æ˜¯ 8, len æ˜¯ 0\n    let v1: Vec&amp;lt;i32&amp;gt; = Vec::with_capacity(8);\n\n    print_vec(&amp;quot;v1&amp;quot;, v1);\n\n    // æˆ‘ä»¬å…ˆæ‰“å° heap åœ°å€ï¼Œç„¶åçœ‹çœ‹æ·»åŠ å†…å®¹æ˜¯å¦ä¼šå¯¼è‡´å †é‡åˆ†é…\n    println!(&amp;quot;heap start: {:p}&amp;quot;, &amp;amp;v[0] as *const i32);\n    // Vec&amp;lt;T&amp;gt; å †å†…å­˜é‡Œ T çš„ä¸ªæ•°æ˜¯æŒ‡æ•°å¢é•¿çš„ï¼Œæˆ‘ä»¬è®©å®ƒæ°å¥½ push 33 ä¸ªå…ƒç´ \n    // capacity ä¼šå˜æˆ 64\n    (2..34).into_iter().for_each(|i| v.push(i));\n\n    // heap åœ°å€æ”¹å˜äº†ï¼è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå¯å˜å¼•ç”¨å’Œä¸å¯å˜å¼•ç”¨ä¸èƒ½å…±å­˜çš„åŸå› \n    println!(&amp;quot;new heap start: {:p}&amp;quot;, &amp;amp;v[0] as *const i32);\n\n    print_vec(&amp;quot;v&amp;quot;, v);\n}\n\nfn print_vec&amp;lt;T&amp;gt;(name: &amp;amp;str, data: Vec&amp;lt;T&amp;gt;) {\n    let p: [usize; 3] = unsafe { mem::transmute(data) };\n    // æ‰“å° Vec&amp;lt;T&amp;gt; çš„å †åœ°å€ï¼Œcapacityï¼Œlen\n    println!(&amp;quot;{}: 0x{:x}, 0x{:x}, 0x{:x}&amp;quot;, name, p[0], p[1], p[2]);\n}\n```\n\næ‰“å°ç»“æœï¼ˆåœ°å€åœ¨ä½ æœºå™¨ä¸Šä¼šä¸ä¸€æ ·ï¼‰ï¼š\n\n```bash\nv1: 0x7f962e405e00, 0x8, 0x0\nheap start: 0x7f962e405df0\nnew heap start: 0x7f962e405e20\nv: 0x7f962e405e20, 0x40, 0x21\n```","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631111359,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1046714,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f8/ba/14e05601.jpg","nickname":"çº¦ä¹¦äºš","note":"","ucode":"81EA27ADD9EC1A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":574826,"discussion_content":"ä¸å¤ªèƒ½ç†è§£è¿™é‡Œv1çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿå°è¯•å»æ‰v1ï¼Œheap startå’Œnew startçš„åœ°å€æ˜¯ä¸€æ ·çš„ï¼è¿™é‡Œv1æ˜¯ä¸ºäº†é¿å…ä¸€äº›ç¼–è¯‘å™¨å¯¹vçš„ä¼˜åŒ–å¤„ç†ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1654393185,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1133945,"avatar":"https://static001.geekbang.org/account/avatar/00/11/4d/79/803537db.jpg","nickname":"æ…¢åŠ¨ä½œ","note":"","ucode":"62C944F4A4D8AC","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":392782,"discussion_content":"å—¯ï¼Œç†è§£äº†ã€‚åŸå…ˆåªç›¯ç€å¼•ç”¨çœ‹ï¼Œè§‰å¾—å¼•ç”¨å¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼Œä½†å¼•ç”¨å¯ä»¥ç»™å‡ºåœ°å€ï¼Œåœ°å€æ˜¯ä¸ä¼šè·Ÿç€å˜çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631115652,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":311076,"user_name":"gnu","can_delete":false,"product_type":"c1","uid":1631832,"ip_address":"","ucode":"B598402D9377D9","user_header":"https://static001.geekbang.org/account/avatar/00/18/e6/58/a0f74927.jpg","comment_is_top":false,"comment_ctime":1631064865,"is_pvip":false,"replies":[{"id":"112733","content":"å“ˆå“ˆå¾ˆå¥½çš„å­¦ä¹ ä¹ æƒ¯ï¼Œç­‰ä½ ä¸‹ä¸€ä»½ä½œä¸š","user_name":"ç¼–è¾‘å›å¤","user_name_real":"å¶å¦‚èŠŠ","uid":"2547771","ctime":1631065942,"ip_address":"","comment_id":311076,"utype":2}],"discussion_count":1,"race_medal":0,"score":"5926032161","product_id":100085301,"comment_content":"fn main() {<br>    let mut arr = vec![1, 2, 3];<br>    &#47;&#47; cache the last item<br>    let last = arr.last();<br>    &#47;&#47; consume previously stored last item<br>    println!(&quot;last: {:?}&quot;, last);<br>    arr.push(4);<br>}<br><br><br>çœ‹ç€ rustc --explain E0502 çš„ä¾‹å­ä¿®æ”¹ï¼Œä¸è¿‡å¥½åƒè¿˜æ˜¯æ²¡æœ‰ç†è§£åŸå› ...åœ¨å¬ä¸€é å€Ÿç”¨ çš„éƒ¨åˆ†ğŸ˜‚","like_count":1,"discussions":[{"author":{"id":2547771,"avatar":"https://static001.geekbang.org/account/avatar/00/26/e0/3b/8ec916b2.jpg","nickname":"å¤šå°‘","note":"","ucode":"0A6EF7AA6E4BB7","race_medal":0,"user_type":4,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526464,"discussion_content":"å“ˆå“ˆå¾ˆå¥½çš„å­¦ä¹ ä¹ æƒ¯ï¼Œç­‰ä½ ä¸‹ä¸€ä»½ä½œä¸š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631065942,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":4}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":354929,"user_name":"Qixian","can_delete":false,"product_type":"c1","uid":2078050,"ip_address":"æµ™æ±Ÿ","ucode":"EE4B2A67F44CD4","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/uEO3jibbiaWwYLQAIxV9icKG2E5UiaZj1c3GDlczhRrQy8IJHVmicwPAomJdRpUIWyShZpJqkD20icUMMicic5OnXJCRSQ/132","comment_is_top":false,"comment_ctime":1660889189,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1660889189","product_id":100085301,"comment_content":"å…³äºä»£ç 3ï¼Œæœ‰å‡ ä¸ªç–‘é—®æƒ³è¯·æ•™ä¸€ä¸‹è€å¸ˆã€‚<br>1. data1çš„å€¼æ˜¯ dataåœ¨æ ˆä¸Šçš„åœ°å€ï¼Ÿ<br>2. data1ä¼ å‚çš„æ—¶å€™ åº”è¯¥æ˜¯å‘ç”Ÿäº†å€¼çš„æ‹·è´ï¼Ÿé‚£data1&#39;çš„å€¼ä¹Ÿåº”è¯¥æ˜¯dataåœ¨æ ˆä¸Šçš„åœ°å€ï¼Ÿ<br>3. ä¸ºä»€ä¹ˆsumå‡½æ•°ä¸­è¾“å‡ºdata1&#39;çš„å€¼çš„æ—¶å€™ï¼Œç»“æœç›´æ¥æ˜¯åŠ¨æ€æ•°ç»„åœ¨å †ä¸Šçš„èµ·å§‹åœ°å€ï¼Ÿ","like_count":0},{"had_liked":false,"id":349198,"user_name":"Geek_0ba253","can_delete":false,"product_type":"c1","uid":2612720,"ip_address":"","ucode":"55D6DDECC9AF60","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/QvyPibAqLH5uEr7GNL6Lg9jT9sUs9jtub4LvO575nHuT3viagzmvKLCwGQRicsiadic3n9lM62qQ6n5shHfXUYib8Ktg/132","comment_is_top":false,"comment_ctime":1655794244,"is_pvip":true,"discussion_count":0,"race_medal":5,"score":"1655794244","product_id":100085301,"comment_content":"ç¬¬ä¸€é¢˜ï¼šå¯å˜å¼•ç”¨ä¸éœ€è¦Copyï¼Œå¦‚æœå®ç°Copyä¹‹åï¼Œå˜é‡æ‰€æœ‰æƒ çš„æ‹¥æœ‰è€… åœ¨å€Ÿç”¨å‡ºå»ä¹‹åï¼Œå˜é‡çš„å€¼å˜åŒ–ä¸èƒ½ä½“ç°åˆ° åŸå˜é‡ä¸Šï¼Œå¯å˜å¼•ç”¨å°±æ²¡æœ‰æ„ä¹‰äº†ã€‚<br><br>ç¬¬äºŒé¢˜ï¼šä¸ç›´æ¥è¯»å–å¯å˜å¼•ç”¨çš„å˜é‡ï¼Œé€šè¿‡å¤åˆ¶è¯»å–ä¸å¯å˜å¼•ç”¨çš„å˜é‡ <br>ä»£ç å¦‚ä¸‹<br>```rust<br>fn main() {<br>    let mut arr = vec![1, 2, 3];<br>    &#47;&#47; cache the last item<br>    let temp = arr.clone();<br>    let last = temp.last();<br>    arr.push(4);<br>    &#47;&#47; consume previously stored last item<br>    println!(&quot;last: {:?}&quot;, last);<br>}<br>```","like_count":0},{"had_liked":false,"id":348934,"user_name":"å°æ°","can_delete":false,"product_type":"c1","uid":2853200,"ip_address":"","ucode":"BBDF8E9F348F65","user_header":"https://static001.geekbang.org/account/avatar/00/2b/89/50/aee9fdab.jpg","comment_is_top":false,"comment_ctime":1655568406,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1655568406","product_id":100085301,"comment_content":"&#47;&#47; å¯å˜å€Ÿç”¨æ²¡æœ‰å®ç°Copy traitã€‚ä¸ºä»€ä¹ˆï¼Ÿ<br>è¿™æ ·ä¼šå¯¼è‡´ä¸¤ä¸ªå¯å˜å¼•ç”¨åŒæ—¶å­˜åœ¨ï¼Œæˆ–è€…å¯å˜å¼•ç”¨å’Œåªè¯»å¼•ç”¨åŒæ—¶å­˜åœ¨<br><br>&#47;&#47; é¿å…åŒæ—¶æœ‰åªè¯»å¼•ç”¨å’Œå¯å˜å¼•ç”¨<br>â€˜â€™â€˜rustâ€™â€™â€˜<br>fn main() {<br>    let mut arr = vec![1, 2, 3];<br>    arr.push(4);<br>    &#47;&#47; cache the last item<br>    let last = arr.last();<br>    &#47;&#47; consume previously stored last item<br>    println!(&quot;last: {:?}&quot;, last);<br> }<br>â€˜â€™â€˜å¯ä»¥å°†å…¶ç§»åŠ¨åˆ°ä¸Šé¢ï¼Œè®©å¯å˜å¼•ç”¨å……åˆ†ä½¿ç”¨å®Œï¼Œå†åˆ‡æ¢æˆåªè¯»å¼•ç”¨çš„ä½¿ç”¨â€™â€˜â€™","like_count":0},{"had_liked":false,"id":346981,"user_name":"å»–æˆ","can_delete":false,"product_type":"c1","uid":1015946,"ip_address":"","ucode":"AD98B920AA7DCC","user_header":"https://static001.geekbang.org/account/avatar/00/0f/80/8a/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1653576094,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1653576094","product_id":100085301,"comment_content":"ç¬¬äºŒé¢˜ï¼š<br>fn main() {<br>  let mut arr = vec![1, 2, 3];<br>  &#47;&#47; cache the last item<br>  let last = arr.last();<br>  let v = match arr.last() {<br>    Some(v) =&gt; Some(*v),<br>    None =&gt; None<br>  };<br>  <br>  arr.push(4);<br>  &#47;&#47; consume previously stored last item<br>  println!(&quot;{:?}&quot;, v.unwrap());<br>}<br>","like_count":0},{"had_liked":false,"id":345893,"user_name":"ELSE","can_delete":false,"product_type":"c1","uid":1172907,"ip_address":"","ucode":"72448D7271C8B0","user_header":"https://static001.geekbang.org/account/avatar/00/11/e5/ab/56f348e5.jpg","comment_is_top":false,"comment_ctime":1652681925,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1652681925","product_id":100085301,"comment_content":"åˆ°è¿™é‡Œï¼Œæœ‰ä¸€ä¸ªç–‘é—®ï¼Œæ˜¯ä¸æ˜¯æŠŠæ‰€æœ‰çš„ç±»å‹éƒ½å®ç°äº†â€œcopy traitâ€ï¼Œå°±ä¸‡äº‹å¤§å‰äº†ï¼Ÿ","like_count":0},{"had_liked":false,"id":345750,"user_name":"gavin","can_delete":false,"product_type":"c1","uid":1171879,"ip_address":"","ucode":"8DAC42D1A564D1","user_header":"http://thirdwx.qlogo.cn/mmopen/KFgDEHIEpnT0EXnh02VHqCETJickQpyszbSo5uFBG1ZwdhnzpM2ibFP3v658Pj1ojOHTygibeXMhyFdl0AzSmZuVO4iacUnal8RV/132","comment_is_top":false,"comment_ctime":1652546483,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1652546483","product_id":100085301,"comment_content":"fn main() {<br>  let mut arr = vec![1, 2, 3];<br>  &#47;&#47; cache the last item<br><br>  arr.push(4);<br>  let last = arr.last();<br>  &#47;&#47; consume previously stored last item<br>  println!(&quot;last: {:?}&quot;, last);<br>}<br><br>å…ˆpushåä½¿ç”¨ï¼Œå³å…ˆå†™åè¯»ï¼Œé¿å…åŒä¸€æ—¶å€™æœ‰è¯»å’Œå†™å­˜åœ¨","like_count":0},{"had_liked":false,"id":342343,"user_name":"Gopher","can_delete":false,"product_type":"c1","uid":1206229,"ip_address":"","ucode":"3C1F9012BB486D","user_header":"https://static001.geekbang.org/account/avatar/00/12/67/d5/1b26b725.jpg","comment_is_top":false,"comment_ctime":1650203138,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1650203138","product_id":100085301,"comment_content":"æœ‰ä¸ªç–‘é—®ï¼š<br>let last = arr.last(); è¿™æ®µä»£ç last å¼•ç”¨çš„æ˜¯arr ä¸­çš„ä¸€ä¸ªå…ƒç´  ä¹Ÿç®—æ»¡è¶³â€åªè¯»å’Œå¯å†™å¼•ç”¨ï¼ŒåŒæ—¶åªèƒ½æœ‰ä¸€ä¸ªâ€œä¹ˆï¼Œå¦‚æœæ˜¯çš„è¯ä¸ºä»€ä¹ˆlet last = arr[arr.len()-1]; ä¹Ÿæ˜¯å¼•ç”¨å…¶ä¸­ä¸€ä¸ªå…ƒç´  ä¸ºä»€ä¹ˆå´æ˜¯å¯ä»¥çš„å•Šï¼Œè¿˜è¯·å¤§ä½¬å¸®å¿™è§£ç­”ä¸‹","like_count":0,"discussions":[{"author":{"id":3177536,"avatar":"https://static001.geekbang.org/account/avatar/00/30/7c/40/c1d837b5.jpg","nickname":"åº·å®combo","note":"","ucode":"07672F87CA52AB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":587808,"discussion_content":"pub const fn last(&amp;self) -&gt; Option&lt;&amp;T&gt;ã€‚ lastæ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ªOptionï¼ŒåŒ…è£¹çš„æ˜¯&amp;Tã€‚è€Œa[i]ï¼Œæ˜¯*a.index(i)çš„è¯­æ³•ç³–ï¼Œå› æ­¤è¿”å›çš„æ˜¯åˆ‡ç‰‡ä¸­çš„å…·ä½“ç±»å‹ï¼Œè€Œä¸æ˜¯å¼•ç”¨ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663300311,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":341847,"user_name":"ä¹ æƒ¯","can_delete":false,"product_type":"c1","uid":2183344,"ip_address":"","ucode":"2E61B2C235B6FE","user_header":"https://static001.geekbang.org/account/avatar/00/21/50/b0/9e80e838.jpg","comment_is_top":false,"comment_ctime":1649859542,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1649859542","product_id":100085301,"comment_content":"&amp;*dataæ˜¯ä»€ä¹ˆæ„æ€å•Šï¼Œäº²çˆ±çš„è€å¸ˆ","like_count":0},{"had_liked":false,"id":341054,"user_name":"SolskGaer","can_delete":false,"product_type":"c1","uid":2217642,"ip_address":"","ucode":"31C42B7A85D5AB","user_header":"https://static001.geekbang.org/account/avatar/00/21/d6/aa/ffa0bd0e.jpg","comment_is_top":false,"comment_ctime":1649316486,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1649316486","product_id":100085301,"comment_content":"æƒ³è¯·æ•™ä¸€ä¸‹è€å¸ˆå…³äº&amp;&amp;dataå€¼çš„é—®é¢˜ï¼Œ&amp;dataæ˜¯ä¼šç”Ÿæˆä¸€ä¸ªä¸´æ—¶å˜é‡ï¼Œç„¶å&amp;&amp;dataå–çš„æ˜¯è¿™ä¸ªä¸´æ—¶å˜é‡çš„å€¼å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":335269,"user_name":"2qif49lt","can_delete":false,"product_type":"c1","uid":1061853,"ip_address":"","ucode":"F9AF272776CEDA","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q3auHgzwzM6oiaaIrgh7A3gy0FxVx8kIhUVp9U0ibSxIBCZHK9Ivo4PY1gibmBVicKTBGjaDVCUxObDdrYVwzmmwVA/132","comment_is_top":false,"comment_ctime":1645433860,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1645433860","product_id":100085301,"comment_content":"&quot;è€Œæƒ…å†µ 2 çš„ä»£ç è™½ç„¶åœ¨å †å†…å­˜é‡Œå¼•ç”¨æ ˆå†…å­˜ï¼Œä½†ç”Ÿå‘½å‘¨æœŸæ˜¯ç›¸åŒçš„ï¼Œæ‰€ä»¥æ²¡æœ‰é—®é¢˜ã€‚&quot;<br><br> åœ¨é€€å‡ºå½“å‰å‡½æ•°æ ˆï¼Œå˜é‡è¿›è¡Œææ„æ—¶ï¼Œä¸è¦è€ƒè™‘è°å…ˆè°åå—ï¼Ÿ","like_count":0},{"had_liked":false,"id":333177,"user_name":"nuan","can_delete":false,"product_type":"c1","uid":2905523,"ip_address":"","ucode":"55FF98EB85404D","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIDqHQQByGiaXcAk94MdDn3ftupZLXyR6bAKibxOzMxy5h3uBwZ7QiaCiaIfbCMK0cIQfGNax8iawoiaQAg/132","comment_is_top":false,"comment_ctime":1644160769,"is_pvip":true,"discussion_count":0,"race_medal":5,"score":"1644160769","product_id":100085301,"comment_content":"â€œè€Œ playground æ˜¯ Linux ç¯å¢ƒï¼Œæˆ‘ä¸€ç›´è¯•åˆ° &gt; 128KB å†…å­˜æ‰è®© Vecçš„å †å†…å­˜é‡åˆ†é…ã€‚â€<br>æˆ‘çš„linuxç¯å¢ƒï¼ˆwindows 10 -&gt; vmware workstation -&gt; ubuntu 20.04 x64)åœ¨å¤§äº 32KBï¼ˆå³å°†34å˜ä¸º32770ï¼Œæ­¤æ—¶capacity ä¸º65536ï¼Œlenä¸º32769ï¼‰æ—¶Vecçš„å †å†…å­˜åœ°å€æ‰å˜çš„ï¼Œå°è¯•æ›´æ”¹äº†ç³»ç»Ÿå†…å­˜ï¼Œå€¼ä¹Ÿä¸ä¼šå˜å°ã€‚<br>è¯·é—®è€å¸ˆï¼Œè¿™ä¸ªå€¼æ˜¯å’Œç¼–è¯‘å™¨å®ç°ï¼ˆCPUæ¶æ„ï¼‰æœ‰å…³å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":333097,"user_name":"ä¾¯æ©è®­","can_delete":false,"product_type":"c1","uid":1162376,"ip_address":"","ucode":"F4DC47EECA0F00","user_header":"https://static001.geekbang.org/account/avatar/00/11/bc/88/fbb6022e.jpg","comment_is_top":false,"comment_ctime":1644062756,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1644062756","product_id":100085301,"comment_content":"é—®é¢˜1<br>å¦‚æœå¯å˜å¼•ç”¨å®ç°äº†copy traitï¼Œç›¸å½“äºå¤šä¸ªåœ°æ–¹å¯ä»¥åŒæ—¶ä¿®æ”¹åŒä¸€å—æ•°æ®ï¼Œè¿èƒŒâ€œä¸€ä¸ªå€¼åŒä¸€ä¸ªæ—¶åˆ»åªæœ‰ä¸€ä¸ªæ‰€æœ‰è€…â€","like_count":0},{"had_liked":false,"id":331392,"user_name":"ç‹å½¦éœ–","can_delete":false,"product_type":"c1","uid":2868952,"ip_address":"","ucode":"F9BFDD0C3657AB","user_header":"https://static001.geekbang.org/account/avatar/00/2b/c6/d8/672f1838.jpg","comment_is_top":false,"comment_ctime":1642571718,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1642571718","product_id":100085301,"comment_content":"ç¬¬äºŒé¢˜å…³äºä¸Šä¸‹ç§»åŠ¨pushæ–¹æ³•çš„è§£é¢˜å½¢å¼ï¼Œæˆ‘ä¸æ˜¯å¾ˆç†è§£ï¼šç§»ä¸Šå»ç§»ä¸‹æ¥ä¸éƒ½åœ¨mainé‡Œé¢å—ï¼Ÿ<br>æˆ‘çš„ç†è§£æ˜¯åœ¨â€˜immutable borrowâ€™ usedä¹‹å‰ï¼ˆæˆ–è€…è¯´ç”Ÿå‘½å‘¨æœŸä¹‹å†…ï¼‰ï¼Œä¸èƒ½å­˜åœ¨â€˜mutable borrowâ€™ï¼Ÿ<br>ä½†æ˜¯lastè¿™ä¸ªå˜é‡çš„ç”Ÿå‘½å‘¨æœŸç†è®ºä¸Šå’Œarræ˜¯ä¸€æ ·çš„å‘€","like_count":0},{"had_liked":false,"id":328205,"user_name":"A å‡¡","can_delete":false,"product_type":"c1","uid":1197361,"ip_address":"","ucode":"BDC8DB599B8284","user_header":"https://static001.geekbang.org/account/avatar/00/12/45/31/53910b61.jpg","comment_is_top":false,"comment_ctime":1640605194,"is_pvip":false,"replies":[{"id":"120779","content":"å¯¹","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1079375","ctime":1642309541,"ip_address":"","comment_id":328205,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1640605194","product_id":100085301,"comment_content":"<br>fn main() {<br>  let mut arr = vec![1, 2, 3];<br>  &#47;&#47; cache the last item<br>  let last = arr.last();<br>  arr.push(4);<br>  &#47;&#47; consume previously stored last item<br>  println!(&quot;last: {:?}&quot;, last);<br>}<br>å…³äºè¿™æ®µä»£ç çš„é—®é¢˜æ˜¯å› ä¸º vec ä¸­ pub const fn last(&amp;self) -&gt; Option&lt;&amp;T&gt; ä½¿ç”¨çš„æ˜¯åªè¯»å¼•ç”¨ï¼Œè€Œvec ä¸­çš„pub fn push(&amp;mut self, value: T) ä½¿ç”¨çš„æ˜¯å¯å˜å¼•ç”¨å¯¼è‡´çš„çš„é”™è¯¯ä¹ˆ","like_count":0,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":546418,"discussion_content":"å¯¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642309541,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":325558,"user_name":"è£´æ™“å‹‡","can_delete":false,"product_type":"c1","uid":1689762,"ip_address":"","ucode":"09D179AAF5EB3A","user_header":"https://static001.geekbang.org/account/avatar/00/19/c8/a2/f7f82bf9.jpg","comment_is_top":false,"comment_ctime":1639020594,"is_pvip":false,"replies":[{"id":"118827","content":"ä½ ç†è§£çš„é—®é¢˜ã€‚ç¼–è¯‘å™¨ä¼šå†³å®šå˜é‡åœ¨æ ˆå†…å­˜ä¸­çš„åˆ†é…ï¼Œå®ƒå¹¶ä¸ä¸€å®šæ˜¯æŒ‰ç…§ä»å·¦åˆ°å³ï¼Œä»ä¸Šåˆ°ä¸‹çš„é¡ºåºåˆ†é…ã€‚æ¯”å¦‚è¿™ä¸ªä»£ç ï¼š<br><br>```rust<br>fn main() {<br>    do_it();<br>}<br><br>fn do_it() -&gt; i32 {<br>    let a = 1;<br>    let b = 2;<br>    let c = 3;<br>    let d = 4;<br>    let e = 5;<br>    3 * (a+b) * (d - c) &#47; e<br>}<br>```<br><br>do_it() çš„æ±‡ç¼–ä»£ç å¦‚ä¸‹ï¼ˆä½ å¯ä»¥åœ¨ playground ä¸‹ show assembly çœ‹åˆ°ï¼‰ï¼š<br><br>```asm<br>playground::do_it:<br>\tsubq\t$40, %rsp<br>\tmovl\t$1, 20(%rsp)<br>\tmovl\t$2, 24(%rsp)<br>\tmovl\t$3, 28(%rsp)<br>\tmovl\t$4, 32(%rsp)<br>\tmovl\t$5, 36(%rsp)<br>\tmovl\t$4, %eax<br>\tsubl\t$3, %eax<br>\tmovl\t%eax, 16(%rsp)<br>\tseto\t%al<br>\ttestb\t$1, %al<br>\tjne\t.LBB12_2<br>\tmovl\t16(%rsp), %eax<br>\tmovl\t$9, %ecx<br>\timull\t%ecx, %eax<br>\tmovl\t%eax, 12(%rsp)<br>\tseto\t%al<br>\ttestb\t$1, %al<br>\tjne\t.LBB12_4<br>\tjmp\t.LBB12_3<br>```<br>ä½ å¯ä»¥çœ‹ç¬¬ä¸€å¥ï¼šsubq\t$40, %rspï¼Œå®ƒå°† stack å‘ä¸‹å¢é•¿äº† 40 å­—èŠ‚ï¼ˆsubq æ˜¯å‡æ³•æ“ä½œï¼Œrsp æ˜¯ stack pointerï¼Œè¿™å¥è¯è®© rsp æŒ‡å‘äº† rsp - 40ï¼‰ã€‚å¯ä»¥çœ‹åˆ°æ ˆæ˜¯å‘ä¸‹å¢é•¿çš„ã€‚ç„¶åå˜é‡ a å­˜åœ¨ rsp + 20ï¼Œb å­˜åœ¨ rsp + 24ï¼Œæ‰€ä»¥ä½ ä¼šçœ‹åˆ°ï¼Œåå®šä¹‰çš„å˜é‡ b çš„åœ°å€æ¯”å…ˆå®šä¹‰çš„å˜é‡ a çš„åœ°å€è¿˜é«˜ã€‚<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1079375","ctime":1639807376,"ip_address":"","comment_id":325558,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1639020594","product_id":100085301,"comment_content":"&amp;&amp;dataçš„ç–‘æƒ‘<br>println!ä¸­æ‰“å°&amp;&amp;dataçš„è¯ï¼Œåº”è¯¥æ˜¯æ‰“å°ä¿å­˜&amp;dataä¸´æ—¶å˜é‡çš„åœ°å€<br>æˆ‘çš„ç–‘é—®æ˜¯ï¼Œè¿™ä¸ªåœ°å€åº”è¯¥æ˜¯åœ¨println!çš„æ ˆä¸Šï¼Œåœ°å€åº”è¯¥æ˜¯åœ¨mainçš„æ ˆçš„ä¸‹æ–¹ï¼ˆåœ°å€å˜ä½äº†ï¼‰ï¼Œä½†æ˜¯æˆ‘æ‰“å°å‡ºæ¥çš„è¿™ä¸ªåœ°å€å±…ç„¶æ¯”mainçš„æ ˆçš„åœ°å€è¦é«˜<br>addr of value: 0x7fffffffdcb8(0x7fffffffdcb8), addr of data 0x7fffffffdd78, data1: 0x7fffffffdcd0<br>è¿™æ˜¯ä¸ºä»€ä¹ˆï¼Ÿæ˜¯æˆ‘ç†è§£çš„æœ‰é—®é¢˜ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":539703,"discussion_content":"ä½ ç†è§£çš„é—®é¢˜ã€‚ç¼–è¯‘å™¨ä¼šå†³å®šå˜é‡åœ¨æ ˆå†…å­˜ä¸­çš„åˆ†é…ï¼Œå®ƒå¹¶ä¸ä¸€å®šæ˜¯æŒ‰ç…§ä»å·¦åˆ°å³ï¼Œä»ä¸Šåˆ°ä¸‹çš„é¡ºåºåˆ†é…ã€‚æ¯”å¦‚è¿™ä¸ªä»£ç ï¼š\n\n```rust\nfn main() {\n    do_it();\n}\n\nfn do_it() -&gt; i32 {\n    let a = 1;\n    let b = 2;\n    let c = 3;\n    let d = 4;\n    let e = 5;\n    3 * (a+b) * (d - c) / e\n}\n```\n\ndo_it() çš„æ±‡ç¼–ä»£ç å¦‚ä¸‹ï¼ˆä½ å¯ä»¥åœ¨ playground ä¸‹ show assembly çœ‹åˆ°ï¼‰ï¼š\n\n```asm\nplayground::do_it:\n\tsubq\t$40, %rsp\n\tmovl\t$1, 20(%rsp)\n\tmovl\t$2, 24(%rsp)\n\tmovl\t$3, 28(%rsp)\n\tmovl\t$4, 32(%rsp)\n\tmovl\t$5, 36(%rsp)\n\tmovl\t$4, %eax\n\tsubl\t$3, %eax\n\tmovl\t%eax, 16(%rsp)\n\tseto\t%al\n\ttestb\t$1, %al\n\tjne\t.LBB12_2\n\tmovl\t16(%rsp), %eax\n\tmovl\t$9, %ecx\n\timull\t%ecx, %eax\n\tmovl\t%eax, 12(%rsp)\n\tseto\t%al\n\ttestb\t$1, %al\n\tjne\t.LBB12_4\n\tjmp\t.LBB12_3\n```\nä½ å¯ä»¥çœ‹ç¬¬ä¸€å¥ï¼šsubq\t$40, %rspï¼Œå®ƒå°† stack å‘ä¸‹å¢é•¿äº† 40 å­—èŠ‚ï¼ˆsubq æ˜¯å‡æ³•æ“ä½œï¼Œrsp æ˜¯ stack pointerï¼Œè¿™å¥è¯è®© rsp æŒ‡å‘äº† rsp - 40ï¼‰ã€‚å¯ä»¥çœ‹åˆ°æ ˆæ˜¯å‘ä¸‹å¢é•¿çš„ã€‚ç„¶åå˜é‡ a å­˜åœ¨ rsp + 20ï¼Œb å­˜åœ¨ rsp + 24ï¼Œæ‰€ä»¥ä½ ä¼šçœ‹åˆ°ï¼Œåå®šä¹‰çš„å˜é‡ b çš„åœ°å€æ¯”å…ˆå®šä¹‰çš„å˜é‡ a çš„åœ°å€è¿˜é«˜ã€‚\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639807376,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":322575,"user_name":"Geek_9d1ee1","can_delete":false,"product_type":"c1","uid":2541935,"ip_address":"","ucode":"D09037B4B3EE53","user_header":"","comment_is_top":false,"comment_ctime":1637485722,"is_pvip":false,"replies":[{"id":"118902","content":"å¯ä»¥å•Š","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1079375","ctime":1639851837,"ip_address":"","comment_id":322575,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1637485722","product_id":100085301,"comment_content":"data.iter().fold(0, |acc, x| acc + x) <br><br>ä¸ºä»€ä¹ˆä¸ç›´æ¥ data.iter().sum()?","like_count":0,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":539863,"discussion_content":"å¯ä»¥å•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639851838,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":322481,"user_name":"æ ¸æ¡ƒ","can_delete":false,"product_type":"c1","uid":1385204,"ip_address":"","ucode":"7AB05270CBCCCB","user_header":"https://static001.geekbang.org/account/avatar/00/15/22/f4/9fd6f8f0.jpg","comment_is_top":false,"comment_ctime":1637410055,"is_pvip":false,"replies":[{"id":"118906","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1079375","ctime":1639852004,"ip_address":"","comment_id":322481,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1637410055","product_id":100085301,"comment_content":"ä»Šå¤©é‡æ–°å›çœ‹çš„æ—¶å€™ï¼Œé‡æ–°æ¢³ç†äº†ä¸€ä¸‹copyï¼Œmoveå’Œcloneçš„åŒºåˆ«ï¼Œä¸ºä»€ä¹ˆåªæœ‰ä¸€äº›åŸºæœ¬ç±»å‹å®ç°copy è¯­ä¹‰ï¼Œå› ä¸ºè¿™äº›ç±»å‹å¯ä»¥åœ¨æ ˆä¸Šåˆ†é…ç©ºé—´ç›´æ¥å¤åˆ¶ï¼Œè€Œcloneæ˜¯æ·±æ‹·è´ï¼ŒæŠŠæ•°æ®å’ŒæŒ‡å‘æ•°æ®çš„æŒ‡é’ˆéƒ½æ–°ç”Ÿæˆä¸€ä»½ï¼Œè€Œmoveå°±æ˜¯æŒ‡å‘å †ä¸Šçš„æŒ‡é’ˆæ¯æ—¶åˆ»åªæœ‰ä¸€ä¸ªï¼Œä¿è¯ä¸ä¼šæœ‰å¤šä¸ªåŒæ—¶æŒ‡å‘çš„ã€‚å› æ­¤å¦‚æœåƒvecè¿™äº›æ•°æ®åˆ†é…åœ¨å †ä¸Šçš„ç±»å‹ä¹Ÿå®ç°copyï¼Œé‚£ä¹ˆå°±å‡ºç°å¤šä¸ªæŒ‡é’ˆåŒæ—¶æŒ‡å‘è¯¥å †ä¸Šçš„æ•°æ®äº†ï¼Œè¿åæ‰€æœ‰æƒäº†ã€‚","like_count":0,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":539867,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639852004,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":314254,"user_name":"ä¹±åŒ ","can_delete":false,"product_type":"c1","uid":1197941,"ip_address":"","ucode":"9FAC4E465C3582","user_header":"https://static001.geekbang.org/account/avatar/00/12/47/75/4d59b6b5.jpg","comment_is_top":false,"comment_ctime":1632915380,"is_pvip":false,"replies":[{"id":"113977","content":"å—¯ï¼Œä¹Ÿæ˜¯ä¸€ç§æ–¹æ³•","user_name":"ä½œè€…å›å¤","user_name_real":"Tyr","uid":"1079375","ctime":1633321111,"ip_address":"","comment_id":314254,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1632915380","product_id":100085301,"comment_content":"é€šè¿‡å°†å€¼æ‹·è´èµ°çš„æ–¹å¼è§£å†³ç¬¬äºŒé¢˜<br><br>fn main() {<br>    let mut arr: Vec&lt;i32&gt; = vec![1, 2, 3];<br><br>    let last = if let Some(l) = arr.last() {<br>        Some(*l)<br>    } else {<br>        None<br>    };<br><br>    arr.push(4);<br>    println!(&quot;last: {:?}&quot;, last);<br>}<br>","like_count":0,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527622,"discussion_content":"å—¯ï¼Œä¹Ÿæ˜¯ä¸€ç§æ–¹æ³•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633321111,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":313849,"user_name":"iamasb","can_delete":false,"product_type":"c1","uid":2659298,"ip_address":"","ucode":"EDDAEC1527736A","user_header":"https://static001.geekbang.org/account/avatar/00/28/93/e2/485fb9b9.jpg","comment_is_top":false,"comment_ctime":1632710446,"is_pvip":false,"replies":[{"id":"113631","content":"åº”è¯¥æ˜¯ &amp;*","user_name":"ä½œè€…å›å¤","user_name_real":"Tyr","uid":"1079375","ctime":1632725927,"ip_address":"","comment_id":313849,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1632710446","product_id":100085301,"comment_content":"è€å¸ˆï¼Œåœ¨ä»£ç 2ä¸­ï¼Œprintln!(        &quot;addr of value: {:p}({:p}), addr of data {:p}, data1: {:p}&quot;,        &amp;data, data1, &amp;&amp;data, &amp;data1    ); ç¬¬ä¸‰ä¸ª&amp;&amp;dataï¼Œæ˜¯ä¸æ˜¯å†™å¤šäº†ä¸ª&amp;","like_count":0,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527491,"discussion_content":"åº”è¯¥æ˜¯ &amp;amp;*","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632725927,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1390032,"avatar":"https://static001.geekbang.org/account/avatar/00/15/35/d0/f2ac6d91.jpg","nickname":"é˜¿æˆ","note":"","ucode":"CEC3CD65FB9333","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":408322,"discussion_content":"è¿™é‡Œåº”è¯¥å°±æ˜¯ &amp;&amp; ä¸æ˜¯å¤šå†™äº†ã€‚\næˆ‘ç†è§£å“ˆï¼š\n&amp;data æ˜¯æ‰“å° data çš„åœ°å€\n&amp;&amp;data æ˜¯æ‰“å° &amp;data çš„åœ°å€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635227651,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":313133,"user_name":"é’æ ·å„¿","can_delete":false,"product_type":"c1","uid":1531381,"ip_address":"","ucode":"F9618962B74C25","user_header":"https://static001.geekbang.org/account/avatar/00/17/5d/f5/9c21ec45.jpg","comment_is_top":false,"comment_ctime":1632290253,"is_pvip":false,"replies":[{"id":"113467","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"Tyr","uid":"1079375","ctime":1632357876,"ip_address":"","comment_id":313133,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1632290253","product_id":100085301,"comment_content":"ä½¿ç”¨æ•°ç»„ä¸‹æ ‡å–å€¼ï¼Œæˆ–è€…å…ˆpushåœ¨ä½¿ç”¨last","like_count":0,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527244,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632357876,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":312932,"user_name":"liu shuang","can_delete":false,"product_type":"c1","uid":2764804,"ip_address":"","ucode":"2FDAE12D37FE70","user_header":"https://static001.geekbang.org/account/avatar/00/2a/30/04/0c02f030.jpg","comment_is_top":false,"comment_ctime":1632127267,"is_pvip":false,"replies":[{"id":"113364","content":"&amp;&amp;data è¡¨ç¤ºå¯¹å¼•ç”¨çš„å¼•ç”¨ï¼Œä½ å¯ä»¥è¿™ä¹ˆæƒ³ï¼šå¼•ç”¨æ˜¯ä¸€å±‚ indirectionï¼Œå¼•ç”¨çš„å¼•ç”¨æ˜¯ä¸¤å±‚ indirectionã€‚å®é™…ä¸­ &amp;&amp;data ç”¨çš„å¹¶ä¸å¤šï¼Œä½† &amp;mut &amp;data æ¯”è¾ƒå¸¸è§ã€‚å‚è€ƒè®²ç”Ÿå‘½å‘¨æœŸé‚£å ‚ strtok çš„å®ç°ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Tyr","uid":"1079375","ctime":1632152927,"ip_address":"","comment_id":312932,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1632127267","product_id":100085301,"comment_content":"&#47;&#47; å€¼çš„åœ°å€æ˜¯ä»€ä¹ˆï¼Ÿå¼•ç”¨çš„åœ°å€åˆæ˜¯ä»€ä¹ˆï¼Ÿ <br>println!( &quot;addr of value: {:p}({:p}), addr of data {:p}, data1: {:p}&quot;, &amp;data, data1, &amp;&amp;data, &amp;data1 );<br><br>&amp;&amp;data -&gt;  æœ‰å®é™…çš„å«ä¹‰å—ï¼Ÿå¦‚æœå†™æ³•æœ‰é—®é¢˜ï¼Œéº»çƒ¦è€å¸ˆä¹ŸåŠæ—¶ä¿®æ”¹ä¸‹ã€‚æ„Ÿè°¢ï¼<br>","like_count":0,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527165,"discussion_content":"&amp;amp;&amp;amp;data è¡¨ç¤ºå¯¹å¼•ç”¨çš„å¼•ç”¨ï¼Œä½ å¯ä»¥è¿™ä¹ˆæƒ³ï¼šå¼•ç”¨æ˜¯ä¸€å±‚ indirectionï¼Œå¼•ç”¨çš„å¼•ç”¨æ˜¯ä¸¤å±‚ indirectionã€‚å®é™…ä¸­ &amp;amp;&amp;amp;data ç”¨çš„å¹¶ä¸å¤šï¼Œä½† &amp;amp;mut &amp;amp;data æ¯”è¾ƒå¸¸è§ã€‚å‚è€ƒè®²ç”Ÿå‘½å‘¨æœŸé‚£å ‚ strtok çš„å®ç°ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632152927,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":312008,"user_name":"èƒ¡å°æ¶µ","can_delete":false,"product_type":"c1","uid":2004538,"ip_address":"","ucode":"2E750C65EC282C","user_header":"https://static001.geekbang.org/account/avatar/00/1e/96/3a/e06f8367.jpg","comment_is_top":false,"comment_ctime":1631589658,"is_pvip":false,"replies":[{"id":"113075","content":"æ˜¯çš„","user_name":"ä½œè€…å›å¤","user_name_real":"Tyr","uid":"1079375","ctime":1631601868,"ip_address":"","comment_id":312008,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1631589658","product_id":100085301,"comment_content":"â€œä¸€ä¸ªå€¼åªèƒ½æœ‰ä¸€ä¸ªæ‰€æœ‰è€…â€çš„æ„æ€æ˜¯ä¸æ˜¯ï¼Œä¸€ä¸ªå€¼æ˜¯å¿…é¡»æœ‰ä¸€ä¸ªï¼Œè€Œä¸”åªèƒ½æœ‰ä¸€ä¸ªownerï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526829,"discussion_content":"æ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631601868,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":311928,"user_name":"Ethan Liu","can_delete":false,"product_type":"c1","uid":1070043,"ip_address":"","ucode":"231F944F7CD56A","user_header":"https://static001.geekbang.org/account/avatar/00/10/53/db/858337e3.jpg","comment_is_top":false,"comment_ctime":1631533091,"is_pvip":true,"replies":[{"id":"113076","content":"ä½ å¯ä»¥çœ‹çœ‹æˆ‘åœ¨åˆ«äººçš„ç•™è¨€ä¸‹çš„å›ç­”ï¼Œå¯å˜å¼•ç”¨åœ¨ä½¿ç”¨æ—¶ä¼šè¿›è¡Œ reborrowã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Tyr","uid":"1079375","ctime":1631601922,"ip_address":"","comment_id":311928,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1631533091","product_id":100085301,"comment_content":"å¯å˜å¼•ç”¨æ²¡æœ‰å®ç°copy trait, é‚£å¯å˜å¼•ç”¨å¦‚ä½•è¿›è¡Œå‡½æ•°å‚æ•°ä¼ é€’?","like_count":0,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526803,"discussion_content":"ä½ å¯ä»¥çœ‹çœ‹æˆ‘åœ¨åˆ«äººçš„ç•™è¨€ä¸‹çš„å›ç­”ï¼Œå¯å˜å¼•ç”¨åœ¨ä½¿ç”¨æ—¶ä¼šè¿›è¡Œ reborrowã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631601922,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":311792,"user_name":"bbndd","can_delete":false,"product_type":"c1","uid":1761870,"ip_address":"","ucode":"4333E2E020D4F6","user_header":"https://static001.geekbang.org/account/avatar/00/1a/e2/4e/829f321f.jpg","comment_is_top":false,"comment_ctime":1631460822,"is_pvip":false,"replies":[{"id":"112988","content":"å¯ä»¥ã€‚clone() ä¸æ˜¯å¾ˆå¿…è¦ï¼Œå› ä¸º i32 å®ç°äº† Copyã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Tyr","uid":"1079375","ctime":1631514842,"ip_address":"","comment_id":311792,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1631460822","product_id":100085301,"comment_content":"ç¬¬2é¢˜è¿™æ ·ä¹Ÿå¯ä»¥ç¼–è¯‘é€šè¿‡ï¼Œvec æ¢æˆ String ä¹Ÿå¯ä»¥ï¼š<br>```<br>fn main() {<br>  let mut arr = vec![1, 2, 3];<br>  &#47;&#47; cache the last item<br>  let last = arr.last().unwrap().clone();<br>  arr.push(4);<br>  &#47;&#47; consume previously stored last item<br>  println!(&quot;last: {:?}&quot;, last);<br>}<br>```","like_count":0,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526746,"discussion_content":"å¯ä»¥ã€‚clone() ä¸æ˜¯å¾ˆå¿…è¦ï¼Œå› ä¸º i32 å®ç°äº† Copyã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631514842,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":311412,"user_name":"å³°","can_delete":false,"product_type":"c1","uid":1056019,"ip_address":"","ucode":"C53CB64E8E7D19","user_header":"https://static001.geekbang.org/account/avatar/00/10/1d/13/31ea1b0b.jpg","comment_is_top":false,"comment_ctime":1631231432,"is_pvip":true,"replies":[{"id":"112852","content":"æ­£ç¡®ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"Tyr","uid":"1079375","ctime":1631237711,"ip_address":"","comment_id":311412,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1631231432","product_id":100085301,"comment_content":"1. ä¼šå‡ºç°ä¸€å—å†…å­˜ï¼Œè¢«å¤šä¸ªå¼•ç”¨ä¿®æ”¹çš„æƒ…å†µ<br>2. 4ï¼Œ5è¡Œæ¢ä¸ªä½ç½®ï¼Œè®©arrå…ˆåšå®Œå®ƒçš„æ´»åœ¨è¢«borrowå‡ºå»ã€‚","like_count":0,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526592,"discussion_content":"æ­£ç¡®ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631237711,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":311342,"user_name":"èŠ¥æœ«å°é¾™","can_delete":false,"product_type":"c1","uid":1176417,"ip_address":"","ucode":"387D01880867AC","user_header":"https://static001.geekbang.org/account/avatar/00/11/f3/61/8f7fca5b.jpg","comment_is_top":false,"comment_ctime":1631179230,"is_pvip":false,"replies":[{"id":"112837","content":"æ…¢æ…¢æ¥ï¼ŒæŒæ¡ä¸€äº›çŸ¥è¯†ï¼Œå®è·µï¼›å†æŒæ¡ä¸€äº›ï¼Œå†å®è·µã€‚éšç€ä»£ç å†™å¾—è¶Šæ¥è¶Šå¤šï¼Œå°±ä¼šè¶Šæ¥è¶Šæ˜ç™½çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Tyr","uid":"1079375","ctime":1631196801,"ip_address":"","comment_id":311342,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1631179230","product_id":100085301,"comment_content":"æ¯æ¬¡å­¦å®Œåéƒ½æœ‰ä¸€ç§æˆ‘å­¦äº†å¥½å¤šä¸œè¥¿ï¼Œåˆä»€ä¹ˆä¸œè¥¿éƒ½æ²¡æœ‰å­¦å¥½çš„æ„Ÿè§‰ã€‚ç¬¬äºŒé¢˜ä¸¤ç§å¼•ç”¨çš„ä½ç½®å°±å¯ä»¥ï¼Œå¯å˜å¼•ç”¨ï¼ˆå†™ï¼‰å’Œåªè¯»å¼•ç”¨ï¼ˆè¯»ï¼‰æ˜¯äº’æ–¥çš„å…³ç³»ï¼Œåªè¦ä¿æŒè¿™ä¸¤ç§å¼•ç”¨ä¸äº¤å‰å°±å¯ä»¥ã€‚åœ¨å¤šä¸ªåªè¯»å¼•ç”¨ä¸­ä¸èƒ½äº¤å‰å­˜åœ¨å¯å˜å¼•ç”¨ã€‚","like_count":0,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526566,"discussion_content":"æ…¢æ…¢æ¥ï¼ŒæŒæ¡ä¸€äº›çŸ¥è¯†ï¼Œå®è·µï¼›å†æŒæ¡ä¸€äº›ï¼Œå†å®è·µã€‚éšç€ä»£ç å†™å¾—è¶Šæ¥è¶Šå¤šï¼Œå°±ä¼šè¶Šæ¥è¶Šæ˜ç™½çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631196801,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":311339,"user_name":"äºšä¼¦ç¢è¯­","can_delete":false,"product_type":"c1","uid":1014505,"ip_address":"","ucode":"F32E5E1B63CC90","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7a/e9/da5c0203.jpg","comment_is_top":false,"comment_ctime":1631178157,"is_pvip":false,"replies":[{"id":"112836","content":"å—¯ï¼Œè¿™ä¸ªæ–¹æ³•å¯è¡Œï¼Œä¹Ÿå¯ä»¥ç®€åŒ–æˆï¼š<br><br>```rust<br> let last = arr[arr.len() - 1];<br>```<br><br>ä½†æ³¨æ„è¿™é‡Œå› ä¸º i32 æ˜¯ Copyï¼Œæ‰€ä»¥å¯è¡Œã€‚å¦‚æœæ˜¯ Vec é‡Œæ”¾çš„æ˜¯ Stringï¼Œå°±ä¸èƒ½è¿™ä¹ˆåšäº†ã€‚åªèƒ½ç§»åŠ¨åä¸¤è¡Œçš„é¡ºåºã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Tyr","uid":"1079375","ctime":1631196730,"ip_address":"","comment_id":311339,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1631178157","product_id":100085301,"comment_content":"1. å› ä¸ºå¯å˜å¼•ç”¨éšç€å€¼çš„å˜åŒ–ï¼Œæœ‰å¯èƒ½å‘ç”Ÿå†…å­˜çš„é‡æ–°åˆ†é…å’Œæ‹·è´ï¼Œcopy trait æ˜¯ä¸ªæµ…æ‹·è´ï¼Œå¦‚æœå®ç°äº†ï¼Œå‘ç”Ÿäº†é‡æ–°åˆ†é…çš„è¯ï¼Œå¯¼è‡´æµ…æ‹·è´çš„å¼•ç”¨å¤±æ•ˆã€‚<br><br>2. ç¬¬äºŒé¢˜æ¢äº†å¦å¤–ä¸€ä¸ªæ€è·¯ï¼Œå¦‚æœéè¦printåœ¨åè¾¹ï¼Œé‚£å°±å…ˆæŠŠå€¼å­˜èµ·æ¥ï¼Œåè¾¹å†ç”¨<br>```<br>fn main(){<br>    let mut arr = vec![1,2,3];<br>    let last: i32 = *arr.last().unwrap();<br>    arr.push(4);<br>    println!(&quot;ir:{:?}&quot;, last);<br><br>}<br>```","like_count":0,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526564,"discussion_content":"å—¯ï¼Œè¿™ä¸ªæ–¹æ³•å¯è¡Œï¼Œä¹Ÿå¯ä»¥ç®€åŒ–æˆï¼š\n\n```rust\n let last = arr[arr.len() - 1];\n```\n\nä½†æ³¨æ„è¿™é‡Œå› ä¸º i32 æ˜¯ Copyï¼Œæ‰€ä»¥å¯è¡Œã€‚å¦‚æœæ˜¯ Vec é‡Œæ”¾çš„æ˜¯ Stringï¼Œå°±ä¸èƒ½è¿™ä¹ˆåšäº†ã€‚åªèƒ½ç§»åŠ¨åä¸¤è¡Œçš„é¡ºåºã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631196730,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":311324,"user_name":"noisyes","can_delete":false,"product_type":"c1","uid":2538540,"ip_address":"","ucode":"94EC310B284AD2","user_header":"https://static001.geekbang.org/account/avatar/00/26/bc/2c/963688bb.jpg","comment_is_top":false,"comment_ctime":1631173537,"is_pvip":false,"replies":[{"id":"112835","content":"è¿™é‡Œä¸ºäº†ä»£ç çš„æ’°å†™æ–¹ä¾¿ï¼Œä¼šè‡ªåŠ¨åš reborrowï¼Œä½¿å¾—ä¹‹å‰çš„å¯å˜å¼•ç”¨è¿˜å¯ä»¥å¤ç”¨ã€‚åœ¨å‡½æ•°ä¼ å‚æ—¶ï¼Œä¼ ç»™å‡½æ•°çš„å®é™…æ˜¯ &amp;mut *vï¼Œä½ å¯ä»¥çœ‹çœ‹æˆ‘åœ¨ä¹‹å‰ç•™è¨€ä¸‹çš„å›ç­”ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Tyr","uid":"1079375","ctime":1631196563,"ip_address":"","comment_id":311324,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1631173537","product_id":100085301,"comment_content":"ç¬¬ä¸€é¢˜,å¯å˜å¼•ç”¨æ²¡æœ‰å®ç°copy traitçš„è¯ï¼Œå½“ä¸€ä¸ªå¯å˜å¼•ç”¨ä¼ ç»™ç±»å‹æ˜¯å¯å˜å¼•ç”¨çš„å‡½æ•°å‚æ•°æ—¶ æ˜¯moveå—ï¼Œé‚£ä»å‡½æ•°è¿”å›ååŸæ¥çš„å¯å˜å¼•ç”¨å¤±æ•ˆï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526560,"discussion_content":"è¿™é‡Œä¸ºäº†ä»£ç çš„æ’°å†™æ–¹ä¾¿ï¼Œä¼šè‡ªåŠ¨åš reborrowï¼Œä½¿å¾—ä¹‹å‰çš„å¯å˜å¼•ç”¨è¿˜å¯ä»¥å¤ç”¨ã€‚åœ¨å‡½æ•°ä¼ å‚æ—¶ï¼Œä¼ ç»™å‡½æ•°çš„å®é™…æ˜¯ &amp;amp;mut *vï¼Œä½ å¯ä»¥çœ‹çœ‹æˆ‘åœ¨ä¹‹å‰ç•™è¨€ä¸‹çš„å›ç­”ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631196563,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":311236,"user_name":"kylin","can_delete":false,"product_type":"c1","uid":1351248,"ip_address":"","ucode":"3588B62A4F9534","user_header":"https://static001.geekbang.org/account/avatar/00/14/9e/50/21e0beca.jpg","comment_is_top":false,"comment_ctime":1631113940,"is_pvip":true,"replies":[{"id":"112811","content":"é¦–å…ˆå¼•ç”¨å’Œè£¸æŒ‡é’ˆä¸èƒ½ç”»ç­‰å·ã€‚å¼•ç”¨æœ‰æ›´å¤šçš„ä½¿ç”¨é™åˆ¶ã€‚å¼•ç”¨æ ¹æ®ä¸Šä¸‹æ–‡ï¼Œå¯ä»¥æ˜¯å•ä¸ªæŒ‡é’ˆï¼Œæ¯”å¦‚ &amp;Vec&lt;T&gt;ï¼ˆåœ°å€ï¼‰ï¼Œä¹Ÿå¯ä»¥æ˜¯èƒ–æŒ‡é’ˆï¼Œæ¯”å¦‚ &amp;[u8]ï¼ˆåœ°å€+é•¿åº¦ï¼‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Tyr","uid":"1079375","ctime":1631160039,"ip_address":"","comment_id":311236,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1631113940","product_id":100085301,"comment_content":"è€å¸ˆï¼Œjavaçš„å¼•ç”¨æ˜¯ä¸æ˜¯å¯ä»¥ç†è§£ä¸ºå°±æ˜¯ä¸€ä¸ªè£¸æŒ‡é’ˆï¼Œä¼ å¼•ç”¨å°±ç›¸å½“äºå¤åˆ¶äº†ä¸€ä¸ªè£¸æŒ‡é’ˆï¼Œè¿™æ—¶ä¸¤ä¸ªè£¸æŒ‡é’ˆæŒ‡å‘åŒä¸€å—å †å†…ç©ºé—´ï¼Ÿè€Œrusté€šè¿‡èƒ–æŒ‡é’ˆæŒ‡å‘å †ï¼Œèƒ–æŒ‡é’ˆçš„å¼•ç”¨å¯ä»¥çœ‹åšæ˜¯è£¸æŒ‡é’ˆï¼Œrustä¸­å¼•ç”¨çš„å€¼æ˜¯èƒ–æŒ‡é’ˆçš„åœ°å€ï¼Œå¼•ç”¨çš„å¼•ç”¨å°±æ˜¯è£¸æŒ‡é’ˆçš„åœ°å€ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526534,"discussion_content":"é¦–å…ˆå¼•ç”¨å’Œè£¸æŒ‡é’ˆä¸èƒ½ç”»ç­‰å·ã€‚å¼•ç”¨æœ‰æ›´å¤šçš„ä½¿ç”¨é™åˆ¶ã€‚å¼•ç”¨æ ¹æ®ä¸Šä¸‹æ–‡ï¼Œå¯ä»¥æ˜¯å•ä¸ªæŒ‡é’ˆï¼Œæ¯”å¦‚ &amp;amp;Vec&amp;lt;T&amp;gt;ï¼ˆåœ°å€ï¼‰ï¼Œä¹Ÿå¯ä»¥æ˜¯èƒ–æŒ‡é’ˆï¼Œæ¯”å¦‚ &amp;amp;[u8]ï¼ˆåœ°å€+é•¿åº¦ï¼‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631160039,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":311134,"user_name":"èŒ¶åº•","can_delete":false,"product_type":"c1","uid":1188926,"ip_address":"","ucode":"687DD3686A84D2","user_header":"https://static001.geekbang.org/account/avatar/00/12/24/3e/692a93f7.jpg","comment_is_top":false,"comment_ctime":1631083881,"is_pvip":false,"replies":[{"id":"112775","content":":)","user_name":"ä½œè€…å›å¤","user_name_real":"Tyr","uid":"1079375","ctime":1631148296,"ip_address":"","comment_id":311134,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1631083881","product_id":100085301,"comment_content":"å·²ç„¶æ˜¯æŠ¢ç­”ç¯èŠ‚äº†","like_count":0,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526487,"discussion_content":":)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631148296,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":311073,"user_name":"Custer","can_delete":false,"product_type":"c1","uid":1020822,"ip_address":"","ucode":"8AEA5544C94D57","user_header":"https://static001.geekbang.org/account/avatar/00/0f/93/96/575d42c3.jpg","comment_is_top":false,"comment_ctime":1631064027,"is_pvip":true,"replies":[{"id":"112736","content":"ç¬¬ä¸€é¢˜æ­£ç¡®ï¼<br><br>ç¬¬äºŒé¢˜è¿™ä¸ªè§£æ³•å¯è¡Œï¼Œä½†æ”¹å˜äº†åŸä»£ç çš„éœ€æ±‚ï¼Œå› ä¸ºå®ƒæƒ³æŠŠ 3 è¿™ä¸ªå€¼æ‰“å°å‡ºæ¥ã€‚å¯ä»¥çœ‹çœ‹æˆ‘åœ¨å…¶ä»–ç­”æ¡ˆä¸Šçš„å›å¤ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Tyr","uid":"1079375","ctime":1631070129,"ip_address":"","comment_id":311073,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1631064027","product_id":100085301,"comment_content":"å¦‚æœå¯å˜å¼•ç”¨å®ç°äº†Copy traitï¼Œé‚£ä¹ˆä¸€ä¸ªå€¼å°±æœ‰å¤šä¸ªæ´»è·ƒçš„å¯å˜å¼•ç”¨ï¼Œå°±è¿èƒŒäº†ä¸€ä¸ªå€¼åœ¨åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªæ‰€æœ‰è€…ã€‚<br><br>fn main() {<br>  let mut arr = vec![1, 2, 3];<br>  arr.push(4);<br>  println!(&quot;last: {:?}&quot;, arr.last());<br>arr<br>}","like_count":0,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526461,"discussion_content":"ç¬¬ä¸€é¢˜æ­£ç¡®ï¼\n\nç¬¬äºŒé¢˜è¿™ä¸ªè§£æ³•å¯è¡Œï¼Œä½†æ”¹å˜äº†åŸä»£ç çš„éœ€æ±‚ï¼Œå› ä¸ºå®ƒæƒ³æŠŠ 3 è¿™ä¸ªå€¼æ‰“å°å‡ºæ¥ã€‚å¯ä»¥çœ‹çœ‹æˆ‘åœ¨å…¶ä»–ç­”æ¡ˆä¸Šçš„å›å¤ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631070129,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":311069,"user_name":"Christian","can_delete":false,"product_type":"c1","uid":1089000,"ip_address":"","ucode":"D84F866015BA07","user_header":"https://static001.geekbang.org/account/avatar/00/10/9d/e8/39433235.jpg","comment_is_top":false,"comment_ctime":1631063163,"is_pvip":false,"replies":[{"id":"112737","content":"æ­£ç¡®ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"Tyr","uid":"1079375","ctime":1631070145,"ip_address":"","comment_id":311069,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1631063163","product_id":100085301,"comment_content":"1. å¯å˜å¼•ç”¨ç‹¬å å¯¹å€¼çš„è®¿é—®ã€‚<br>2. è°ƒæ¢ç¬¬ 5 å’Œç¬¬ 7 è¡Œä»£ç ã€‚","like_count":0,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526458,"discussion_content":"æ­£ç¡®ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631070145,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":311063,"user_name":"Joseph","can_delete":false,"product_type":"c1","uid":1085994,"ip_address":"","ucode":"B031FACEBEE273","user_header":"https://static001.geekbang.org/account/avatar/00/10/92/2a/bae66865.jpg","comment_is_top":false,"comment_ctime":1631061523,"is_pvip":true,"replies":[{"id":"112739","content":"ä¼ å€¼ä¼ å¼•ç”¨ç”¨ Java è¿™æ ·äººå°½çš†çŸ¥çš„è¯­è¨€ç±»æ¯”ä¼šæ›´å®¹æ˜“æ‡‚ã€‚C++ æ¯•ç«Ÿä½¿ç”¨çš„äººå°‘ã€‚<br><br>åé¢è®² Box&lt;T&gt; çš„æ—¶å€™ä¼šå’Œ C++ çš„ unique_ptr å¯¹æ¯”ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Tyr","uid":"1079375","ctime":1631070387,"ip_address":"","comment_id":311063,"utype":1}],"discussion_count":5,"race_medal":0,"score":"1631061523","product_id":100085301,"comment_content":"ä½¿ç”¨javaç±»æ¯”rustæœ¬èº«å°±ä¸å¤ªæ°å½“ï¼Œä¸ºå•¥ä¸ç”¨c++","like_count":0,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526454,"discussion_content":"ä¼ å€¼ä¼ å¼•ç”¨ç”¨ Java è¿™æ ·äººå°½çš†çŸ¥çš„è¯­è¨€ç±»æ¯”ä¼šæ›´å®¹æ˜“æ‡‚ã€‚C++ æ¯•ç«Ÿä½¿ç”¨çš„äººå°‘ã€‚\n\nåé¢è®² Box&amp;lt;T&amp;gt; çš„æ—¶å€™ä¼šå’Œ C++ çš„ unique_ptr å¯¹æ¯”ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631070387,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1085994,"avatar":"https://static001.geekbang.org/account/avatar/00/10/92/2a/bae66865.jpg","nickname":"Joseph","note":"","ucode":"B031FACEBEE273","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":392565,"discussion_content":"æˆ‘ä¸ªäººæ›´å€¾å‘äºæŠŠrustçœ‹åšæ”¹è‰¯ç‰ˆæœ¬çš„c++ï¼Œå› ä¸ºå†å²è´Ÿæ‹…å°ï¼Œæ‰€ä»¥å¯ä»¥æ›´å¤§æ”¹è‰¯ï¼Œrustå¦‚ä½•ä»¥äºŒè¿›åˆ¶æ ¼å¼ç»™åˆ«äººå¤ç”¨ï¼Ÿè¿™ä¸ªæˆ‘æœ‰ç‚¹å›°æƒ‘ï¼Œc++æœ‰å¤´æ–‡ä»¶åŠ åº“ï¼Œjavaæ˜¯jarï¼Œéš¾é“rustéƒ½è¦æºä»£ç å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631062686,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1085994,"avatar":"https://static001.geekbang.org/account/avatar/00/10/92/2a/bae66865.jpg","nickname":"Joseph","note":"","ucode":"B031FACEBEE273","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":392617,"discussion_content":"rust å¯ä»¥é€šè¿‡cbindgenç”Ÿæˆcå¤´æ–‡ä»¶ç»™cç³»è¯­è¨€å’ŒSwiftç”¨ã€‚å¯ä»¥é€šè¿‡jniå’ŒJavaäº’æ“ä½œã€‚ç¬¬6è®²å·²ç»æ¼”ç¤ºäº†rustå’ŒJava script/Python3çš„äº’æ“ä½œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631073042,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":392565,"ip_address":""},"score":392617,"extra":""},{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1085994,"avatar":"https://static001.geekbang.org/account/avatar/00/10/92/2a/bae66865.jpg","nickname":"Joseph","note":"","ucode":"B031FACEBEE273","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":392619,"discussion_content":"rustçš„ç¡®æ˜¯æ›´å¥½çš„c++ï¼Œæˆ‘çš„æ„æ€æ˜¯è®²è¯¾çš„æ—¶å€™ä¸å¿…åªå’Œc++çœ‹é½ï¼Œé‚£æ ·å°±ä¹å‘³äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631073139,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":392565,"ip_address":""},"score":392619,"extra":""},{"author":{"id":1085994,"avatar":"https://static001.geekbang.org/account/avatar/00/10/92/2a/bae66865.jpg","nickname":"Joseph","note":"","ucode":"B031FACEBEE273","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":392627,"discussion_content":"è¿™ç§å¤ç”¨æ¨¡å¼æˆ‘çŸ¥é“ï¼Œæˆ‘æ˜¯è¯´åŸç”Ÿruståº“å¤ç”¨æ¨¡å¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631079686,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":392617,"ip_address":""},"score":392627,"extra":""}]}]}]}