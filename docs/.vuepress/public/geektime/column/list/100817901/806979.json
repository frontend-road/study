{"id":806979,"title":"03｜返回结构化数据：构建RAG应用的核心密码之二","content":"<p>你好，我是叶伟民。</p><p>上一节课我们所看到的对话模式返回的结果是人类语言（assistant的部分）。这会带来一个问题，就是程序不能识别这种语言，程序只能够识别结构化数据。</p><p>那什么是结构化数据呢？布尔值、整数、浮点数、数组、json等格式的数据就是结构化数据。人类语言就是非结构化数据。</p><p>除了这个问题之外，还有一个问题是AI只能返回一个结果，不能返回多个结果。而我们的MIS系统，特别是查询部分的代码，如果需要按照多个条件查询，肯定是要输入多个参数的。那么我们如何处理这种情况呢？</p><p>其实这两个问题都涉及同一个基础概念，就是让AI返回结构化数据，这也是我们今天课程的主题。</p><h2>让AI返回结构化数据</h2><p>我们由易到难，从最简单的返回布尔值开始。</p><h3>返回布尔值</h3><p>当我们需要询问大模型一个问题是对是错，例如询问大模型：<strong>老婆饼和老婆是不是同一类东西？</strong>&nbsp;那么大模型很可能会回答：不是，老婆饼和老婆不是同一类东西。</p><p>很显然，程序（例如我们的MIS系统）是无法识别以上回答的。因此我们就需要大模型返回一个布尔值结果，这样程序才能理解。</p><p>那么如何实现呢？我们可以这样设置对话模式里面user角色的content值。</p><pre><code class=\"language-python\">messages=[\n  {\"role\": \"user\", \"content\": f\"\"\"\n  请以布尔值格式返回答案：老婆饼和老婆是不是同一类东西？  \n  \"\"\"},\n  ]\n</code></pre><!-- [[[read_end]]] --><p>如果大模型运行正常，应该会返回 <code>false</code>，显然，程序是可以识别这个结果的。</p><p>我们将会在<strong>第十七节课</strong>里用到这个知识点。</p><h3>返回整数</h3><p>返回一个布尔值只能用来做判断题，但是如果一个问题不是判断题呢？</p><p>例如当我们询问大模型：<strong>老婆饼是什么类型？</strong>&nbsp;那么大模型很可能会回答：老婆饼是食物。</p><p>除了前面返回布尔值一节提到的程序无法处理这个问题之外，还会有另外一个问题。就是如果我们的MIS系统没有食物这种类型，只有点心、水果、菜肴这三种类型，那么该怎么办？</p><p>我们可以给出一系列选项，然后让大模型回答正确选项。这时候比较适合让程序返回整数类型。</p><p>具体如何实现呢？我们可以这样设置对话模式里面user角色的content值。</p><pre><code class=\"language-python\">messages=[\n  {\"role\": \"user\", \"content\": f\"\"\"\n  请以整数格式返回正确选项：老婆饼是什么类型？\n  \n1. 点心\n2. 水果\n3. 菜肴\n  \"\"\"},\n  ]\n</code></pre><p>如果大模型运行正常，应该会返回 <code>1</code>，这样程序不但能够理解结果，而且可以保证结果是程序所需要的。我们将会在**<a href=\"https://time.geekbang.org/column/article/806979\">第五节课</a>**中用到这个知识点。</p><h3>返回浮点数</h3><p>现在我们可以通过返回布尔值来做判断题，通过返回整数来做选择题。但是如果问题是一个开放性的问题呢？</p><p>例如询问大模型：<strong>姚明有多高？</strong>&nbsp;那么大模型很可能会回答：姚明有226cm。</p><p>然而我们的程序需要的是多少米，这时候就需要返回一个浮点数结果，而不是前面的整数结果了。</p><p>实现方式也和前面类似，只需要将对话模式里面user角色的content值修改一下。</p><pre><code class=\"language-python\">messages=[\n  {\"role\": \"user\", \"content\": f\"\"\"\n  请以浮点数格式返回按米计算的答案：姚明有多高？  \n  \"\"\"},\n  ]\n</code></pre><p>如果大模型运行正常，应该会返回 <code>2.26</code>。</p><h3>返回数组</h3><p>我们知道，Python的函数和C#的方法都是支持可变参数的。当我们的程序需要接受可变参数来调用对应的函数或方法时，我们就需要大模型返回数组了。</p><p>结合例子，你更容易理解这一点。例如，我们有这样一个Python函数。</p><pre><code class=\"language-python\">def greet_many(*names):\n    for name in names:\n        print(f\"Hello, {name}!\")\n</code></pre><p>那么我们就需要将对话模式里面user角色的content值设置为如下内容。</p><pre><code class=\"language-python\">messages=[\n  {\"role\": \"user\", \"content\": f\"\"\"\n  请以数组的格式返回答案：请列出唐宋八大家的姓名  \n  \"\"\"},\n  ]\n</code></pre><p>如果大模型运行正常，应该会返回类似下面这样的结果。</p><pre><code class=\"language-python\">[\"韩愈\",\"柳宗元\",\"欧阳修\",\"苏洵\",\"苏轼\",\"苏辙\",\"王安石\",\"曾巩\"]\n</code></pre><p>经过这样的处理，结果就能被程序理解了。</p><h3>返回json</h3><p>当我们的程序（例如MIS系统），特别是查询部分的代码，如果需要按多个条件查询，肯定是要输入多个参数的。比如这样一个场景——我们需要查询A公司到账款项，而程序需要接受一个SQL查询语句。</p><p>这种情况应该如何处理呢？</p><p>我们可以让大模型返回一个json结果。例如将对话模式里面user角色的content值设置为如下内容。</p><pre><code class=\"language-python\">messages=[\n  {\"role\": \"user\", \"content\": f\"\"\"\n  请以json的格式返回答案：我们需要查询A公司到账款项。\n  \n  json格式为：\n  {\n    'name':'A公司',\n    'type':'到账款项',\n  }  \n  \"\"\"},\n  ]\n</code></pre><p>如果大模型运行正常，应该会返回类似后面的结果。</p><pre><code class=\"language-python\">{\n  'name':'A公司',\n  'type':'到账款项',\n }  \n</code></pre><p>经过这样的处理，结果就可以被程序正常处理了么？你可以暂停思考一下，这样解决是否足够完美。</p><p>细心的同学会发现，上述回答中的 <strong>‘type’:‘到账款项’</strong> 会有问题，因为数据库里面不一定有<strong>到账款项</strong>这个type。那么如何解决这个问题呢？</p><h2>组合拳</h2><p>其中一个方法是使用“组合拳”，把前面提到的返回整数结果的方法整合进来。</p><p>那么就需要将对话模式user角色的content值设置为如下内容。</p><pre><code class=\"language-python\">messages=[\n  {\"role\": \"user\", \"content\": f\"\"\"\n  请以json的格式返回答案：我们需要查询A公司到账款项。\n  \n  json格式为：\n  {\n    'name':'A公司',\n    'type':1,\n  }\n  其中type对应的选项和序号是：\n  1. 到账款项\n  2. 剩余款项\n  请返回对应的序号。\n  \"\"\"},\n  ]\n</code></pre><p>如果大模型运行正常，应该会返回类似后面的结果。</p><pre><code class=\"language-python\">{\n  'name':'A公司',\n  'type':1,\n }  \n</code></pre><p>然而这种方法对大模型的能力要求很高。如果我们因为价格原因只能用低版本的大模型（一分价钱一分货嘛），这样的处理可能无法满足要求。那只能换一种要求低一点的方法了，就是分步处理。</p><h2>分步处理</h2><p>我们可以分两步进行。第一步是沿用返回json一节的结果。然后将第一步的结果作为第二步的输入。接着将第二步的输入结果整合进第一步的结果，得到最终结果。</p><p>采用这种方法，我们第二步对话模式里面user角色的content值需要这样设置：</p><pre><code class=\"language-python\">messages=[\n  {\"role\": \"user\", \"content\": f\"\"\"\n  请以整数格式返回正确选项：到账款项\n  \n  1. 到账款项\n  2. 剩余款项\n  \"\"\"},\n  ]\n</code></pre><p>如果大模型运行正常，应该会返回如下类似结果。</p><pre><code class=\"language-python\">1  \n</code></pre><p>然后我们用这个结果替换掉第一步结果中的type。于是我们就得到了最终结果。</p><pre><code class=\"language-python\">{\n  'name':'A公司',\n  'type':1,\n } \n</code></pre><h2>一劳永逸、通用的方法</h2><p>懒惰是人类的天性，程序员更是需要懒惰，因为程序员的职责就是制造自动化工具来减轻人类的劳动。那么有没有一种一劳永逸的通用方法，可以更方便地返回程序需要的结构化数据呢？</p><p>有的，聪明的同学已经发现了，使用返回json的方案就可以一劳永逸地替代前面所有方案。例如返回布尔值可以用返回以下json格式替代。</p><pre><code class=\"language-python\">{'result':false}\n</code></pre><p>返回整数、浮点数可以用返回以下json格式替代。</p><pre><code class=\"language-python\">{'result':1}\n</code></pre><p>返回数组可以用返回以下json格式替代。</p><pre><code class=\"language-python\">{'result':[\"韩愈\",\"柳宗元\",\"欧阳修\",\"苏洵\",\"苏轼\",\"苏辙\",\"王安石\",\"曾巩\"]}\n</code></pre><p>通过这种方式，我们就能一劳永逸地解决所有问题。</p><h2>返回辅助信息</h2><p>有了这个基础，我们还可以添加辅助信息。通过辅助信息我们可以理解大模型为什么会输出这样的结果。例如，我们可以要求大模型输出以下json结果。</p><pre><code class=\"language-python\">{'result':false,'理由':'不是，老婆饼和老婆不是同一类东西'}\n</code></pre><p>然后我们可以把以上结果用日志记录下来，这样在我们诊断问题的时候就十分方便了。我们能清晰地知道程序结果和大模型实际想法之间的关系，以及输出是否正确。</p><h2>提供示例</h2><p>然而在实际应用中，即便按照前面的方法操作，有时候，大模型可能还是无法正常输出结构化数据。</p><p>这时候怎么办呢？我们可以给大模型一个示例，让大模型照葫芦画瓢去输出。提供示例的对话模式如下。</p><pre><code class=\"language-python\">messages=[\n  {\"role\": \"user\", \"content\": f\"\"\"\n  请根据用户的输入返回json格式结果：\n  \n&nbsp; 示例1：\n&nbsp; 用户：客户北京极客邦有限公司的款项到账了多少？\n&nbsp; 系统：\n&nbsp; {{'模块':1,'客户名称':'北京极客邦有限公司'}}\n\n&nbsp; 用户：{用户输入}\n&nbsp; 系统：\n  \"\"\"},\n  ]\n</code></pre><p>其中第5行到第8行就是我们提供的示例。通过这种方法，将会大大提升大模型输出结构化数据的概率。</p><p>细心的同学可能发现，我说的是大大提升了概率，并没有说百分百能够保证。那是为什么呢？又如何解决这个问题呢？我们下一节课继续探讨。</p><p>最后，我想说明一下，今天这节课侧重概念梳理，所以为了理解起来方便，用到的示例代码都做了简化。如果直接沿用，大概率大模型还是无法正常输出。生产环境下的代码是需要根据大模型的能力以及实际场景做调整的，实际代码量会多很多。我们会在后续动手实战的章节中看到实际代码。</p><h2>小结</h2><p>好了，今天这一讲到这里就结束了，最后我们来回顾一下。这一讲我们学会了两件事情。</p><p>第一件事情是对话模式返回的结果是人类语言，并且只有一个输出。所以我们需要AI将这个唯一的输出转换为程序可以识别的结构化数据。而这种结构化数据最好的格式是json。</p><p>第二件事情是AI跟人类一样，有时候需要给他一个样本，他才能够按照这个样本正确输出。</p><p>至此，我们第一个实战案例所需的基础概念都已经讲完，我们下一节课开始动手实战环节。</p><h2>思考题</h2><p>如果给了大模型一个示例，它还是无法正确输出。这时候有什么办法解决呢？</p><p>欢迎你在留言区和我交流互动，如果这节课对你有启发，也推荐分享给身边更多朋友。</p>","neighbors":{"left":{"article_title":"02｜对话模式：构建RAG应用的核心密码之一","id":806130},"right":{"article_title":"04｜动手实战：UI 实现和国产免费大模型接入","id":807070}},"comments":[{"had_liked":false,"id":394030,"user_name":"张申傲","can_delete":false,"product_type":"c1","uid":1182372,"ip_address":"北京","ucode":"22D46BC529BA8A","user_header":"https://static001.geekbang.org/account/avatar/00/12/0a/a4/828a431f.jpg","comment_is_top":false,"comment_ctime":1725592146,"is_pvip":false,"replies":[{"id":143055,"content":"十分赞！你的方法很不错！ 针对第三段我补充一下，相当多甚至可以说绝大部份的MIS系统都是使用ORM查询数据而不是使用SQL去查询，就像实战案例1一样。","user_name":"作者回复","user_name_real":"作者","uid":1337319,"ctime":1725799493,"ip_address":"广东","comment_id":394030,"utype":1}],"discussion_count":1,"race_medal":2,"score":2,"product_id":100817901,"comment_content":"第3讲打卡~\n\n思考题：老师课程中的示例，基本都是在Prompt去做优化，指导LLM生成特定的结构化数据，这种方式在大多数情况下没有问题，但是由于LLM生成的方式本质上是基于概率的，会存在一定的随机性，不一定会完全符合指定的结构。\n\n为了更好地实现格式化输出，可以使用LLM的工具调用(tool-calling&#47;functiom-calling)功能，即在调用LLM的API时，传入可选择的工具列表，并详细描述工具调用参数的格式。这样LLM推理出需要调用工具时，就会生成工具调用的参数，这个参数是完全满足指定的结构(如json)的。通过这种方式，可以让LLM更加稳定地生成结构化数据。目前大多数主流的LLM都支持工具调用功能了。\n\n我在实际的项目中实现过一个基于自然语言的SQL查询代理，就可以利用LLM的tool-calling功能，生成结构化的SQL，并实际执行获取查询结果。感兴趣的同学可以参考我的文章：https:&#47;&#47;blog.csdn.net&#47;weixin_34452850&#47;article&#47;details&#47;141677371 ","like_count":8,"discussions":[{"author":{"id":1337319,"avatar":"https://static001.geekbang.org/account/avatar/00/14/67/e7/0d92745d.jpg","nickname":"Billy火炎焱燚(不羁的风)","note":"","ucode":"63DED1EB2CF6AE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":650877,"discussion_content":"十分赞！你的方法很不错！ 针对第三段我补充一下，相当多甚至可以说绝大部份的MIS系统都是使用ORM查询数据而不是使用SQL去查询，就像实战案例1一样。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1725799493,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":394019,"user_name":"grok","can_delete":false,"product_type":"c1","uid":1341502,"ip_address":"美国","ucode":"4744AB3FA28FE2","user_header":"https://static001.geekbang.org/account/avatar/00/14/78/3e/f60ea472.jpg","comment_is_top":false,"comment_ctime":1725567929,"is_pvip":false,"replies":[{"id":143060,"content":"我们这门课没有用Open AI和微软的GPT，用的是百度文心大模型","user_name":"作者回复","user_name_real":"编辑","uid":1337319,"ctime":1725799792,"ip_address":"广东","comment_id":394019,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100817901,"comment_content":"老师请问这个json schema是否有帮助？\n“Introducing Structured Outputs in the API” -- https:&#47;&#47;openai.com&#47;index&#47;introducing-structured-outputs-in-the-api&#47;","like_count":3,"discussions":[{"author":{"id":1337319,"avatar":"https://static001.geekbang.org/account/avatar/00/14/67/e7/0d92745d.jpg","nickname":"Billy火炎焱燚(不羁的风)","note":"","ucode":"63DED1EB2CF6AE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":650883,"discussion_content":"我们这门课没有用Open AI和微软的GPT，用的是百度文心大模型","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1725799792,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":394211,"user_name":"明辰","can_delete":false,"product_type":"c1","uid":1557878,"ip_address":"浙江","ucode":"0DB5393DF7EC56","user_header":"https://static001.geekbang.org/account/avatar/00/17/c5/76/e269369e.jpg","comment_is_top":false,"comment_ctime":1726126780,"is_pvip":false,"replies":[{"id":143111,"content":"这个问题问得很好！说明您有认真学习和理解这门课！给您点赞👍\n\n首先，整个系统不可能只有一个Prompt，就像我们编程不可能把所有代码写在一个函数或者类里面。我们可以像编程划分模块、类、函数一样按模块、场景划分Prompt，根据不同模块、场景调用不同的Prompt","user_name":"作者回复","user_name_real":"作者","uid":1337319,"ctime":1726234982,"ip_address":"广东","comment_id":394211,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100817901,"comment_content":"老师我有一个问题请教\n我们面对复杂问题的时候，prompt可能会写很长（尤其是增加了例子的情况），那么到线上应用的时候，也是保留完整的prompt嘛，这样把例子放到prompt里是否会增加不必要的成本","like_count":2,"discussions":[{"author":{"id":1337319,"avatar":"https://static001.geekbang.org/account/avatar/00/14/67/e7/0d92745d.jpg","nickname":"Billy火炎焱燚(不羁的风)","note":"","ucode":"63DED1EB2CF6AE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":651117,"discussion_content":"这个问题问得很好！说明您有认真学习和理解这门课！给您点赞👍\n\n首先，整个系统不可能只有一个Prompt，就像我们编程不可能把所有代码写在一个函数或者类里面。我们可以像编程划分模块、类、函数一样按模块、场景划分Prompt，根据不同模块、场景调用不同的Prompt","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1726234983,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":394979,"user_name":"Luo","can_delete":false,"product_type":"c1","uid":1225356,"ip_address":"浙江","ucode":"681DDE1637CE10","user_header":"https://static001.geekbang.org/account/avatar/00/12/b2/8c/662e37fd.jpg","comment_is_top":false,"comment_ctime":1728994561,"is_pvip":false,"replies":[{"id":143607,"content":"赞","user_name":"作者回复","user_name_real":"编辑","uid":1337319,"ctime":1731379257,"ip_address":"江苏","comment_id":394979,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100817901,"comment_content":"我一般在提示词里使用下面的描述：\n&quot;&quot;&quot;\n输出的格式要求如下：\nThe output should be a markdown code snippet formatted in the following schema, including the leading and trailing &quot;```json&quot; and &quot;```&quot;:\n```json\n{\n    &quot;content&quot;: &quot;设计的阅读题内容&quot;, &#47;&#47;使用汉语,控制在250个汉字左右\n    &quot;theme&quot;: &quot;&quot;,\n    &quot;choices&quot;: [{  &#47;&#47;出的3选择题内容\n        &quot;question&quot;: &quot;题目内容&quot; &#47;&#47;根据阅读题内容出的单选题, 使用汉字，控制在100个汉字以内\n        &quot;options&quot;: [\n            &quot;A_option&quot;: &quot;A选项内容&quot;, &#47;&#47;使用汉语,控制在20个汉字以内\n            &quot;B_option&quot;: &quot;B选项内容&quot; &#47;&#47;使用汉语,控制在20个汉字以内\n            &quot;C_option&quot;: &quot;C选项内容&quot; &#47;&#47;使用汉语,控制在20个汉字以内\n            &quot;D_option&quot;: &quot;D选项内容&quot; &#47;&#47;使用汉语,控制在20个汉字以内\n            &quot;correct_option&quot;: &quot;该题目的答案选项&quot; &#47;&#47;该题目的正确选项,内容为&#39;A&#39;,&#39;B&#39;,&#39;C&#39;,&#39;D&#39;中的一个\n            &quot;correct_option_reason&quot;: &quot;解释答案的原因&quot; &#47;&#47;使用汉语,控制在100个汉字以内\n\n        ]\n    }],\n    &quot;difficulty&quot;: &quot;设计的阅读理解的难度&quot; &#47;&#47;分&quot;容易&quot;、&quot;中等&quot;、&quot;难&quot;\n}\n&quot;&quot;&quot;\n返回的JSON格式大概是这样的：\n&quot;&quot;&quot;\n{\n\t&quot;content&quot;: “content1”,\n\t&quot;theme&quot;: &quot;聚会和休闲活动&quot;,\n\t&quot;choices&quot;: [{\n\t\t\t&quot;question&quot;: &quot;小明和朋友们在哪里举行了野餐活动？&quot;,\n\t\t\t&quot;options&quot;: {\n\t\t\t\t&quot;A_option&quot;: &quot;电影院&quot;,\n\t\t\t\t&quot;B_option&quot;: &quot;公园&quot;,\n\t\t\t\t&quot;C_option&quot;: &quot;湖边&quot;,\n\t\t\t\t&quot;D_option&quot;: &quot;家里&quot;,\n\t\t\t\t&quot;correct_option&quot;: &quot;B&quot;,\n\t\t\t\t&quot;correct_option_reason&quot;: &quot;根据阅读内容，小明和朋友们是在公园里举行野餐。&quot;\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t&quot;question&quot;: &quot;他们野餐时享受了哪些活动？&quot;,\n\t\t\t&quot;options&quot;: {\n\t\t\t\t&quot;A_option&quot;: &quot;划船&quot;,\n\t\t\t\t&quot;B_option&quot;: &quot;看电影&quot;,\n\t\t\t\t&quot;C_option&quot;: &quot;品尝美食和聊天&quot;,\n\t\t\t\t&quot;D_option&quot;: &quot;参加音乐会&quot;,\n\t\t\t\t&quot;correct_option&quot;: &quot;C&quot;,\n\t\t\t\t&quot;correct_option_reason&quot;: &quot;阅读内容提到他们在野餐时品尝美食并聊天。&quot;\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t&quot;question&quot;: &quot;小明和朋友们的聚会在一天中的哪个时间段结束？&quot;,\n\t\t\t&quot;options&quot;: {\n\t\t\t\t&quot;A_option&quot;: &quot;中午&quot;,\n\t\t\t\t&quot;B_option&quot;: &quot;傍晚&quot;,\n\t\t\t\t&quot;C_option&quot;: &quot;晚上&quot;,\n\t\t\t\t&quot;D_option&quot;: &quot;早晨&quot;,\n\t\t\t\t&quot;correct_option&quot;: &quot;B&quot;,\n\t\t\t\t&quot;correct_option_reason&quot;: &quot;根据阅读内容，他们傍晚时分去电影院观看电影，说明聚会在傍晚结束。&quot;\n\t\t\t}\n\t\t}\n\t],\n\t&quot;difficulty&quot;: &quot;中等&quot;\n}\n&quot;&quot;&quot;","like_count":0,"discussions":[{"author":{"id":1337319,"avatar":"https://static001.geekbang.org/account/avatar/00/14/67/e7/0d92745d.jpg","nickname":"Billy火炎焱燚(不羁的风)","note":"","ucode":"63DED1EB2CF6AE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":653652,"discussion_content":"赞","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1731379257,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"江苏","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":394075,"user_name":"爬行的蜗牛","can_delete":false,"product_type":"c1","uid":1033956,"ip_address":"四川","ucode":"6623B62DE63CE9","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/QD6bf8hkS5dHrabdW7M7Oo9An1Oo3QSxqoySJMDh7GTraxFRX77VZ2HZ13x3R4EVYddIGXicRRDAc7V9z5cLDlA/132","comment_is_top":false,"comment_ctime":1725720542,"is_pvip":false,"replies":[{"id":143117,"content":"是的，可以增加更多示例。归根到底还是更改提示语","user_name":"作者回复","user_name_real":"编辑","uid":1337319,"ctime":1726235470,"ip_address":"广东","comment_id":394075,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100817901,"comment_content":"更改 prompt","like_count":0,"discussions":[{"author":{"id":1337319,"avatar":"https://static001.geekbang.org/account/avatar/00/14/67/e7/0d92745d.jpg","nickname":"Billy火炎焱燚(不羁的风)","note":"","ucode":"63DED1EB2CF6AE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":651123,"discussion_content":"是的，可以增加更多示例。归根到底还是更改提示语","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1726235470,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":395438,"user_name":"Geek_fbf3a3","can_delete":false,"product_type":"c1","uid":4033130,"ip_address":"四川","ucode":"98ED0656762DE7","user_header":"","comment_is_top":false,"comment_ctime":1730798154,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100817901,"comment_content":"学习到了，比如：LLM的工具调用(tool-calling&#47;functiom-calling)功能，以为数据结构化是个很简单的问题，没想到还有那么多的门道","like_count":0},{"had_liked":false,"id":394980,"user_name":"Luo","can_delete":false,"product_type":"c1","uid":1225356,"ip_address":"浙江","ucode":"681DDE1637CE10","user_header":"https://static001.geekbang.org/account/avatar/00/12/b2/8c/662e37fd.jpg","comment_is_top":false,"comment_ctime":1728994652,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100817901,"comment_content":"我一般在提示词里使用下面的描述：\n&quot;&quot;&quot;\n输出的格式要求如下：\nThe output should be a markdown code snippet formatted in the following schema, including the leading and trailing &quot;```json&quot; and &quot;```&quot;:\n```json\n{\n    &quot;content&quot;: &quot;设计的阅读题内容&quot;, &#47;&#47;使用汉语,控制在250个汉字左右\n    &quot;theme&quot;: &quot;&quot;,\n    &quot;choices&quot;: [{  &#47;&#47;出的3选择题内容\n        &quot;question&quot;: &quot;题目内容&quot; &#47;&#47;根据阅读题内容出的单选题, 使用汉字，控制在100个汉字以内\n        &quot;options&quot;: [\n            &quot;A_option&quot;: &quot;A选项内容&quot;, &#47;&#47;使用汉语,控制在20个汉字以内\n            &quot;B_option&quot;: &quot;B选项内容&quot; &#47;&#47;使用汉语,控制在20个汉字以内\n            &quot;C_option&quot;: &quot;C选项内容&quot; &#47;&#47;使用汉语,控制在20个汉字以内\n            &quot;D_option&quot;: &quot;D选项内容&quot; &#47;&#47;使用汉语,控制在20个汉字以内\n            &quot;correct_option&quot;: &quot;该题目的答案选项&quot; &#47;&#47;该题目的正确选项,内容为&#39;A&#39;,&#39;B&#39;,&#39;C&#39;,&#39;D&#39;中的一个\n            &quot;correct_option_reason&quot;: &quot;解释答案的原因&quot; &#47;&#47;使用汉语,控制在100个汉字以内\n\n        ]\n    }],\n    &quot;difficulty&quot;: &quot;设计的阅读理解的难度&quot; &#47;&#47;分&quot;容易&quot;、&quot;中等&quot;、&quot;难&quot;\n}\n&quot;&quot;&quot;\n返回的JSON格式大概是这样的：\n&quot;&quot;&quot;\n{\n\t&quot;content&quot;: “content1”,\n\t&quot;theme&quot;: &quot;聚会和休闲活动&quot;,\n\t&quot;choices&quot;: [{\n\t\t\t&quot;question&quot;: &quot;小明和朋友们在哪里举行了野餐活动？&quot;,\n\t\t\t&quot;options&quot;: {\n\t\t\t\t&quot;A_option&quot;: &quot;电影院&quot;,\n\t\t\t\t&quot;B_option&quot;: &quot;公园&quot;,\n\t\t\t\t&quot;C_option&quot;: &quot;湖边&quot;,\n\t\t\t\t&quot;D_option&quot;: &quot;家里&quot;,\n\t\t\t\t&quot;correct_option&quot;: &quot;B&quot;,\n\t\t\t\t&quot;correct_option_reason&quot;: &quot;根据阅读内容，小明和朋友们是在公园里举行野餐。&quot;\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t&quot;question&quot;: &quot;他们野餐时享受了哪些活动？&quot;,\n\t\t\t&quot;options&quot;: {\n\t\t\t\t&quot;A_option&quot;: &quot;划船&quot;,\n\t\t\t\t&quot;B_option&quot;: &quot;看电影&quot;,\n\t\t\t\t&quot;C_option&quot;: &quot;品尝美食和聊天&quot;,\n\t\t\t\t&quot;D_option&quot;: &quot;参加音乐会&quot;,\n\t\t\t\t&quot;correct_option&quot;: &quot;C&quot;,\n\t\t\t\t&quot;correct_option_reason&quot;: &quot;阅读内容提到他们在野餐时品尝美食并聊天。&quot;\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t&quot;question&quot;: &quot;小明和朋友们的聚会在一天中的哪个时间段结束？&quot;,\n\t\t\t&quot;options&quot;: {\n\t\t\t\t&quot;A_option&quot;: &quot;中午&quot;,\n\t\t\t\t&quot;B_option&quot;: &quot;傍晚&quot;,\n\t\t\t\t&quot;C_option&quot;: &quot;晚上&quot;,\n\t\t\t\t&quot;D_option&quot;: &quot;早晨&quot;,\n\t\t\t\t&quot;correct_option&quot;: &quot;B&quot;,\n\t\t\t\t&quot;correct_option_reason&quot;: &quot;根据阅读内容，他们傍晚时分去电影院观看电影，说明聚会在傍晚结束。&quot;\n\t\t\t}\n\t\t}\n\t],\n\t&quot;difficulty&quot;: &quot;中等&quot;\n}\n&quot;&quot;&quot;","like_count":0}]}