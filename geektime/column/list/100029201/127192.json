{"id":127192,"title":"37 | 主流的Kafka监控框架","content":"<p>你好，我是胡夕。今天我要和你分享的主题是：那些主流的Kafka监控框架。</p><p>在上一讲中，我们重点讨论了如何监控Kafka集群，主要是侧重于讨论监控原理和监控方法。今天，我们来聊聊具体的监控工具或监控框架。</p><p>令人有些遗憾的是，Kafka社区似乎一直没有在监控框架方面投入太多的精力。目前，Kafka的新功能提议已超过500个，但没有一个提议是有关监控框架的。当然，Kafka的确提供了超多的JMX指标，只是，单独查看这些JMX指标往往不是很方便，我们还是要依赖于框架统一地提供性能监控。</p><p>也许，正是由于社区的这种“不作为”，很多公司和个人都自行着手开发Kafka监控框架，其中并不乏佼佼者。今天我们就来全面地梳理一下主流的监控框架。</p><h2>JMXTool工具</h2><p>首先，我向你推荐JMXTool工具。严格来说，它并不是一个框架，只是社区自带的一个工具罢了。JMXTool工具能够实时查看Kafka JMX指标。倘若你一时找不到合适的框架来做监控，JMXTool可以帮你“临时救急”一下。</p><p>Kafka官网没有JMXTool的任何介绍，你需要运行下面的命令，来获取它的使用方法的完整介绍。</p><pre><code>bin/kafka-run-class.sh kafka.tools.JmxTool\n</code></pre><p>JMXTool工具提供了很多参数，但你不必完全了解所有的参数。我把主要的参数说明列在了下面的表格里，你至少要了解一下这些参数的含义。</p><!-- [[[read_end]]] --><p><img src=\"https://static001.geekbang.org/resource/image/79/d3/795399a24e665c1bf744085b5344f5d3.jpg?wh=1763*1103\" alt=\"\"></p><p>现在，我举一个实际的例子来说明一下如何运行这个命令。</p><p>假设你要查询Broker端每秒入站的流量，即所谓的JMX指标BytesInPerSec，这个JMX指标能帮助你查看Broker端的入站流量负载，如果你发现这个值已经接近了你的网络带宽，这就说明该Broker的入站负载过大。你需要降低该Broker的负载，或者将一部分负载转移到其他Broker上。</p><p>下面这条命令，表示每5秒查询一次过去1分钟的BytesInPerSec均值。</p><pre><code>bin/kafka-run-class.sh kafka.tools.JmxTool --object-name kafka.server:type=BrokerTopicMetrics,name=BytesInPerSec --jmx-url service:jmx:rmi:///jndi/rmi://:9997/jmxrmi --date-format &quot;YYYY-MM-dd HH:mm:ss&quot; --attributes OneMinuteRate --reporting-interval 1000\n</code></pre><p>在这条命令中，有几点需要你注意一下。</p><ul>\n<li>设置 --jmx-url参数的值时，需要指定JMX端口。在这个例子中，端口是9997，在实际操作中，你需要指定你的环境中的端口。</li>\n<li>由于我是直接在Broker端运行的命令，因此就把主机名忽略掉了。如果你是在其他机器上运行这条命令，你要记得带上要连接的主机名。</li>\n<li>关于 --object-name参数值的完整写法，我们可以直接在Kafka官网上查询。我们在前面说过，Kafka提供了超多的JMX指标，你需要去官网学习一下它们的用法。我以ActiveController JMX指标为例，介绍一下学习的方法。你可以在官网上搜索关键词ActiveController，找到它对应的 --object-name，即kafka.controller:type=KafkaController,name=ActiveControllerCount，这样，你就可以执行下面的脚本，来查看当前激活的Controller数量。</li>\n</ul><pre><code>$ bin/kafka-run-class.sh kafka.tools.JmxTool --object-name kafka.controller:type=KafkaController,name=ActiveControllerCount --jmx-url service:jmx:rmi:///jndi/rmi://:9997/jmxrmi --date-format &quot;YYYY-MM-dd HH:mm:ss&quot; --reporting-interval 1000\nTrying to connect to JMX url: service:jmx:rmi:///jndi/rmi://:9997/jmxrmi.\n&quot;time&quot;,&quot;kafka.controller:type=KafkaController,name=ActiveControllerCount:Value&quot;\n2019-08-05 15:08:30,1\n2019-08-05 15:08:31,1\n</code></pre><p>总体来说，JMXTool是社区自带的一个小工具，对于一般简单的监控场景，它还能应付，但是它毕竟功能有限，复杂的监控整体解决方案，还是要依靠监控框架。</p><h2>Kafka Manager</h2><p>说起Kafka监控框架，最有名气的当属Kafka Manager了。Kafka Manager是雅虎公司于2015年开源的一个Kafka监控框架。这个框架用Scala语言开发而成，主要用于管理和监控Kafka集群。</p><p>应该说Kafka Manager是目前众多Kafka监控工具中最好的一个，无论是界面展示内容的丰富程度，还是监控功能的齐全性，它都是首屈一指的。不过，目前该框架已经有4个月没有更新了，而且它的活跃的代码维护者只有三四个人，因此，很多Bug或问题都不能及时得到修复，更重要的是，它无法追上Apache Kafka版本的更迭速度。</p><p>当前，Kafka Manager最新版是2.0.0.2。在其Github官网上下载tar.gz包之后，我们执行解压缩，可以得到kafka-manager-2.0.0.2目录。</p><p>之后，我们需要运行sbt工具来编译Kafka Manager。sbt是专门用于构建Scala项目的编译构建工具，类似于我们熟知的Maven和Gradle。Kafka Manager自带了sbt命令，我们直接运行它构建项目就可以了：</p><pre><code>./sbt clean dist\n</code></pre><p>经过漫长的等待之后，你应该可以看到项目已经被成功构建了。你可以在Kafka Manager的target/universal目录下找到生成的zip文件，把它解压，然后修改里面的conf/application.conf文件中的kafka-manager.zkhosts项，让它指向你环境中的ZooKeeper地址，比如：</p><pre><code>kafka-manager.zkhosts=&quot;localhost:2181&quot;\n</code></pre><p>之后，运行以下命令启动Kafka Manager：</p><pre><code>bin/kafka-manager -Dconfig.file=conf/application.conf -Dhttp.port=8080\n</code></pre><p>该命令指定了要读取的配置文件以及要启动的监听端口。现在，我们打开浏览器，输入对应的IP:8080，就可以访问Kafka Manager了。下面这张图展示了我在Kafka Manager中添加集群的主界面。</p><p><img src=\"https://static001.geekbang.org/resource/image/b4/66/b492ae08e527e295d29da65d07ad9566.png?wh=1950*1785\" alt=\"\"></p><p>注意，要勾选上Enable JMX Polling，这样你才能监控Kafka的各种JMX指标。下图就是Kafka Manager框架的主界面。</p><p><img src=\"https://static001.geekbang.org/resource/image/99/14/990944c78f22adc6f6c836d489eade14.png?wh=1950*1098\" alt=\"\"></p><p>从这张图中，我们可以发现，Kafka Manager清晰地列出了当前监控的Kafka集群的主题数量、Broker数量等信息。你可以点击顶部菜单栏的各个条目去探索其他功能。</p><p>除了丰富的监控功能之外，Kafka Manager还提供了很多运维管理操作，比如执行主题的创建、Preferred Leader选举等。在生产环境中，这可能是一把双刃剑，毕竟这意味着每个访问Kafka Manager的人都能执行这些运维操作。这显然是不能被允许的。因此，很多Kafka Manager用户都有这样一个诉求：把Kafka Manager变成一个纯监控框架，关闭非必要的管理功能。</p><p>庆幸的是，Kafka Manager提供了这样的功能。<strong>你可以修改config下的application.conf文件，删除application.features中的值</strong>。比如，如果我想禁掉Preferred Leader选举功能，那么我就可以删除对应KMPreferredReplicaElectionFeature项。删除完之后，我们重启Kafka Manager，再次进入到主界面，我们就可以发现之前的Preferred Leader Election菜单项已经没有了。</p><p><img src=\"https://static001.geekbang.org/resource/image/16/01/16b5ac5eeb4f32f872265ec91d130401.png?wh=1950*1343\" alt=\"\"></p><p>总之，作为一款非常强大的Kafka开源监控框架，Kafka Manager提供了丰富的实时监控指标以及适当的管理功能，非常适合一般的Kafka集群监控，值得你一试。</p><h2>Burrow</h2><p>我要介绍的第二个Kafka开源监控框架是Burrow。<strong>Burrow是LinkedIn开源的一个专门监控消费者进度的框架</strong>。事实上，当初其开源时，我对它还是挺期待的。毕竟是LinkedIn公司开源的一个框架，而LinkedIn公司又是Kafka创建并发展壮大的地方。Burrow应该是有机会成长为很好的Kafka监控框架的。</p><p>然而令人遗憾的是，它后劲不足，发展非常缓慢，目前已经有几个月没有更新了。而且这个框架是用Go写的，安装时要求必须有Go运行环境，所以，Burrow在普及率上不如其他框架。另外，Burrow没有UI界面，只是开放了一些HTTP Endpoint，这对于“想偷懒”的运维来说，更是一个减分项。</p><p>如果你要安装Burrow，必须要先安装Golang语言环境，然后依次运行下列命令去安装Burrow：</p><pre><code>$ go get github.com/linkedin/Burrow\n$ cd $GOPATH/src/github.com/linkedin/Burrow\n$ dep ensure\n$ go install\n</code></pre><p>等一切准备就绪，执行Burrow启动命令就可以了。</p><pre><code>$GOPATH/bin/Burrow --config-dir /path/containing/config\n</code></pre><p>总体来说，Burrow目前提供的功能还十分有限，普及率和知名度都是比较低的。不过，它的好处是，该项目的主要贡献者是LinkedIn团队维护Kafka集群的主要负责人，所以质量是很有保证的。如果你恰好非常熟悉Go语言生态，那么不妨试用一下Burrow。</p><h2>JMXTrans + InfluxDB + Grafana</h2><p>除了刚刚说到的专属开源Kafka监控框架之外，其实现在更流行的做法是，<strong>在一套通用的监控框架中监控Kafka</strong>，比如使用<strong>JMXTrans + InfluxDB + Grafana的组合</strong>。由于Grafana支持对<strong>JMX指标</strong>的监控，因此很容易将Kafka各种JMX指标集成进来。</p><p>我们来看一张生产环境中的监控截图。图中集中了很多监控指标，比如CPU使用率、GC收集数据、内存使用情况等。除此之外，这个仪表盘面板还囊括了很多关键的Kafka JMX指标，比如BytesIn、BytesOut和每秒消息数等。将这么多数据统一集成进一个面板上直观地呈现出来，是这套框架非常鲜明的特点。</p><p><img src=\"https://static001.geekbang.org/resource/image/22/5a/22f68c477d80919f4170da11c4fc8d5a.jpeg?wh=1950*925\" alt=\"\"></p><p>与Kafka Manager相比，这套监控框架的优势在于，你可以在一套监控框架中同时监控企业的多个关键技术组件。特别是<strong>对于那些已经搭建了该监控组合的企业来说，直接复用这套框架可以极大地节省运维成本，不失为一个好的选择</strong>。</p><h2>Confluent Control Center</h2><p>最后，我们来说说Confluent公司发布的Control Center。这是目前已知的最强大的Kafka监控框架了。</p><p><strong>Control Center不但能够实时地监控Kafka集群，而且还能够帮助你操作和搭建基于Kafka的实时流处理应用。更棒的是，Control Center提供了统一式的主题管理功能。你可以在这里享受到Kafka主题和Schema的一站式管理服务。</strong></p><p>下面这张图展示了Control Center的主题管理主界面。从这张图中，我们可以直观地观测到整个Kafka集群的主题数量、ISR副本数量、各个主题对应的TPS等数据。当然，Control Center提供的功能远不止这些，你能想到的所有Kafka运维管理和监控功能，Control Center几乎都能提供。</p><p><img src=\"https://static001.geekbang.org/resource/image/f0/e2/f067a91f29d24c181ddc19ace163f3e2.png?wh=1193*629\" alt=\"\"></p><p>不过，如果你要使用Control Center，就必须使用Confluent Kafka Platform企业版。换句话说，Control Center不是免费的，你需要付费才能使用。如果你需要一套很强大的监控框架，你可以登录Confluent公司官网，去订购这套真正意义上的企业级Kafka监控框架。</p><h2>小结</h2><p>其实，除了今天我介绍的Kafka Manager、Burrow、Grafana和Control Center之外，市面上还散落着很多开源的Kafka监控框架，比如Kafka Monitor、Kafka Offset Monitor等。不过，这些框架基本上已经停止更新了，有的框架甚至好几年都没有人维护了，因此我就不详细展开了。如果你是一名开源爱好者，可以试着到开源社区中贡献代码，帮助它们重新焕发活力。</p><p>值得一提的是，国内最近有个Kafka Eagle框架非常不错。它是国人维护的，而且目前还在积极地演进着。根据Kafka Eagle官网的描述，它支持最新的Kafka  2.x版本，除了提供常规的监控功能之外，还开放了告警功能（Alert），非常值得一试。</p><p>总之，每个框架都有自己的特点和价值。Kafka Manager框架适用于基本的Kafka监控，Grafana+InfluxDB+JMXTrans的组合适用于已经具有较成熟框架的企业。对于其他的几个监控框架，你可以把它们作为这两个方案的补充，加入到你的监控解决方案中。</p><p><img src=\"https://static001.geekbang.org/resource/image/51/7a/514225120dca48f08b20b09400217b7a.jpg?wh=2069*2560\" alt=\"\"></p><h2>开放讨论</h2><p>如果想知道某台Broker上是否存在请求积压，我们应该监控哪个JMX指标？</p><p>欢迎写下你的思考和答案，我们一起讨论。如果你觉得有所收获，也欢迎把文章分享给你的朋友。</p><p></p>","comments":[{"had_liked":false,"id":128496,"user_name":"许童童","can_delete":false,"product_type":"c1","uid":1003005,"ip_address":"","ucode":"4B799C0C6BC678","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4d/fd/0aa0e39f.jpg","comment_is_top":false,"comment_ctime":1566889578,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"53106497130","product_id":100029201,"comment_content":"感觉Grafana+InfluxDB这一套，可以用于任何语言，还可以自定义接口出来加入监控。","like_count":13,"discussions":[{"author":{"id":1044182,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/ee/d6/a9b34bd3.jpg","nickname":"Joypan","note":"","ucode":"B7298241E7AAAF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":194049,"discussion_content":"kafka manager更多的是运维管理功能","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1583168173,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1134861,"avatar":"https://static001.geekbang.org/account/avatar/00/11/51/0d/fc1652fe.jpg","nickname":"James","note":"","ucode":"48B0F2A334D1C1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":52952,"discussion_content":"马克","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574094890,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":278807,"user_name":"张亮","can_delete":false,"product_type":"c1","uid":1008176,"ip_address":"","ucode":"06868525059967","user_header":"https://static001.geekbang.org/account/avatar/00/0f/62/30/a8df1a4e.jpg","comment_is_top":false,"comment_ctime":1613358712,"is_pvip":false,"replies":[{"id":"101513","content":"👍","user_name":"作者回复","user_name_real":"胡夕","uid":"1288090","ctime":1613780703,"ip_address":"","comment_id":278807,"utype":1}],"discussion_count":3,"race_medal":0,"score":"40268064376","product_id":100029201,"comment_content":"https:&#47;&#47;github.com&#47;didi&#47;Logi-KafkaManager   一站式Apache Kafka集群指标监控与运维管控平台，1600+Star，650+ 用户的选择，绝对的好用的Kafka监控利器！","like_count":10,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"胡夕","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":515509,"discussion_content":"👍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1613780703,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2336705,"avatar":"","nickname":"Geek_ddc224","note":"","ucode":"D50BE37398FF7A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":409136,"discussion_content":"张总，你们的Kafka监控工具已经3500+star了，可以啊👍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635384151,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1008176,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/30/a8df1a4e.jpg","nickname":"张亮","note":"","ucode":"06868525059967","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2336705,"avatar":"","nickname":"Geek_ddc224","note":"","ucode":"D50BE37398FF7A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":413923,"discussion_content":"感谢支持","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636610741,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":409136,"ip_address":""},"score":413923,"extra":""}]}]},{"had_liked":false,"id":257652,"user_name":"李沁","can_delete":false,"product_type":"c1","uid":1042928,"ip_address":"","ucode":"A7239F8C2470B8","user_header":"https://static001.geekbang.org/account/avatar/00/0f/e9/f0/7c8ea410.jpg","comment_is_top":false,"comment_ctime":1604049711,"is_pvip":true,"replies":[{"id":"93976","content":"嗯嗯，各类框架发展得太快了","user_name":"作者回复","user_name_real":"胡夕","uid":"1288090","ctime":1604283794,"ip_address":"","comment_id":257652,"utype":1}],"discussion_count":3,"race_medal":0,"score":"27373853487","product_id":100029201,"comment_content":"搜了一下kafka manager，已经找不到了，最后发现已经改名叫CMAK(Cluster Manager for Apache Kafka)","like_count":6,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"胡夕","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":508404,"discussion_content":"嗯嗯，各类框架发展得太快了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604283794,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2296456,"avatar":"https://static001.geekbang.org/account/avatar/00/23/0a/88/111b632d.jpg","nickname":"萍乡老表","note":"","ucode":"3D464CC54E0C80","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":568758,"discussion_content":"现在都不更新了 3.x 也用不了这个 不知道有没有代替的","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1651224014,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2336705,"avatar":"","nickname":"Geek_ddc224","note":"","ucode":"D50BE37398FF7A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":409137,"discussion_content":"试试这个https://github.com/didi/Logi-KafkaManager ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635384195,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":135810,"user_name":"钱","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1569285316,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"27339089092","product_id":100029201,"comment_content":"kafka集群监控工具，免费的功能少，功能强大的收费。看自己的情况选择了，作为技术关注点还在于这些工具的实现原理。<br>不过任何监控工具，估计都类似，以下是猜测的：<br>1：获取监控数据，通常是日志信息，加埋点或者利用OS的功能获取<br>2：存储监控数据，未经清洗的数据<br>3：清洗数据，格式化数据，聚合数据，汇总数据<br>4：展示监控信息<br>5：功能需求没问题后就是各种优化了，比如：UI展示优化&#47;获取数据不丢消息的优化&#47;展示数据的性能优化&#47;功能优化，可以加各种报警设置，给出问题产生的主要场景和解决思路。","like_count":7,"discussions":[{"author":{"id":2550743,"avatar":"https://static001.geekbang.org/account/avatar/00/26/eb/d7/90391376.jpg","nickname":"if...else...","note":"","ucode":"D0565908C99695","race_medal":4,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":388054,"discussion_content":"厉害了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628570148,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":183956,"user_name":"Joypan","can_delete":false,"product_type":"c1","uid":1044182,"ip_address":"","ucode":"B7298241E7AAAF","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ee/d6/a9b34bd3.jpg","comment_is_top":false,"comment_ctime":1583168212,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14468070100","product_id":100029201,"comment_content":"Grafana监控，kafka manager运维管理","like_count":3},{"had_liked":false,"id":141972,"user_name":"kennyji","can_delete":false,"product_type":"c1","uid":1347446,"ip_address":"","ucode":"DAA1BCBCB9C169","user_header":"https://static001.geekbang.org/account/avatar/00/14/8f/76/1d8be696.jpg","comment_is_top":false,"comment_ctime":1571275522,"is_pvip":false,"replies":[{"id":"54917","content":"hmmmm.... 好像我没有说BytesInPerSec=网卡流量，BytesInPerSec是broker端的入站流量。如果接近带宽，需要调整broker上的负载。","user_name":"作者回复","user_name_real":"huxi_2b","uid":"1288090","ctime":1571361572,"ip_address":"","comment_id":141972,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10161210114","product_id":100029201,"comment_content":"有个地方不太准确 BytesInPerSec是leader副本的入流量 并不等于网卡流量 要关注带宽指标还是需要具体看网卡的流量指标","like_count":2,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"胡夕","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470943,"discussion_content":"hmmmm.... 好像我没有说BytesInPerSec=网卡流量，BytesInPerSec是broker端的入站流量。如果接近带宽，需要调整broker上的负载。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571361572,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":128710,"user_name":"外星人","can_delete":false,"product_type":"c1","uid":1132861,"ip_address":"","ucode":"D8469B13F2AB37","user_header":"https://static001.geekbang.org/account/avatar/00/11/49/3d/4ac37cc2.jpg","comment_is_top":false,"comment_ctime":1566953498,"is_pvip":false,"replies":[{"id":"47871","content":"目前只能监控是否存在请求积压，无法确认到底是那些请求积压的","user_name":"作者回复","user_name_real":"huxi_2b","uid":"1288090","ctime":1566989914,"ip_address":"","comment_id":128710,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10156888090","product_id":100029201,"comment_content":"请求积压，监控两个idle就好吧？但是具体哪些请求积压和哪些ip的请求，这块还不清楚，求指教。","like_count":2,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"胡夕","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465071,"discussion_content":"目前只能监控是否存在请求积压，无法确认到底是那些请求积压的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566989914,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":128497,"user_name":"许童童","can_delete":false,"product_type":"c1","uid":1003005,"ip_address":"","ucode":"4B799C0C6BC678","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4d/fd/0aa0e39f.jpg","comment_is_top":false,"comment_ctime":1566889902,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10156824494","product_id":100029201,"comment_content":"监控records-lag-max 和 records-lead-min，它们分别表示此消费者在测试窗口时间内曾经达到的最大的 Lag 值和最小的 Lead 值。","like_count":2},{"had_liked":false,"id":128268,"user_name":"ykkk88","can_delete":false,"product_type":"c1","uid":1068585,"ip_address":"","ucode":"A1BCFC2F0D1022","user_header":"https://static001.geekbang.org/account/avatar/00/10/4e/29/1be3dd40.jpg","comment_is_top":false,"comment_ctime":1566866799,"is_pvip":false,"replies":[{"id":"47512","content":"confluent免费版不错的，可以用：）","user_name":"作者回复","user_name_real":"huxi_2b","uid":"1288090","ctime":1566868059,"ip_address":"","comment_id":128268,"utype":1}],"discussion_count":1,"race_medal":2,"score":"10156801391","product_id":100029201,"comment_content":"老师 生产环境建议用confluent免费版本的kafka么 比如5.3版本基于apache kafka 2.3的？我们想自己搭kafka 在confluent和apache里面选一个，都是免费的","like_count":2,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"胡夕","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464874,"discussion_content":"confluent免费版不错的，可以用：）","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566868059,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":331395,"user_name":"午月十三","can_delete":false,"product_type":"c1","uid":1655960,"ip_address":"","ucode":"4383EA1DBE959B","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/s3l1cvljHFoibnZEHaLl4IJ1ryRFI0zYePAVdYfhfcoyr20uEaf1ibZhMHb5aze8Fuib8FnoYbsC0mnggIeYIjVzg/132","comment_is_top":false,"comment_ctime":1642572383,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"5937539679","product_id":100029201,"comment_content":"新发现的一款管理工具kafka-console-ui，感觉对初学者使用特别友好，用着挺简单的：https:&#47;&#47;github.com&#47;xxd763795151&#47;kafka-console-ui","like_count":2,"discussions":[{"author":{"id":1139455,"avatar":"https://static001.geekbang.org/account/avatar/00/11/62/ff/f71034e9.jpg","nickname":"悟空WuKong","note":"","ucode":"49AFD2B048C1BA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":570964,"discussion_content":"谢谢推荐，真的好用！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1652013370,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":323232,"user_name":"旋风","can_delete":false,"product_type":"c1","uid":1272591,"ip_address":"","ucode":"B9FF02969F4307","user_header":"https://static001.geekbang.org/account/avatar/00/13/6b/0f/293b999c.jpg","comment_is_top":false,"comment_ctime":1637777011,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5932744307","product_id":100029201,"comment_content":"老师，JMXTrans + InfluxDB + Grafana 的监控方案的grafana的模板可以提供一下吗","like_count":1},{"had_liked":false,"id":203419,"user_name":"张瑞松","can_delete":false,"product_type":"c1","uid":1949479,"ip_address":"","ucode":"EB765ADCBF3049","user_header":"","comment_is_top":false,"comment_ctime":1586187455,"is_pvip":false,"replies":[{"id":"76090","content":"目前监控基本上是找主流的监控框架，支持JMX监控的就行，比如Prometheus","user_name":"作者回复","user_name_real":"huxi_2b","uid":"1288090","ctime":1586242839,"ip_address":"","comment_id":203419,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5881154751","product_id":100029201,"comment_content":"老师你好，我们最近在做kafka数据层面的监控，就是消息情况的监控，包括状态，生产消费时差，消息趋势等，这一方面的工具，老师这边有好的建议吗？","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"胡夕","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490858,"discussion_content":"目前监控基本上是找主流的监控框架，支持JMX监控的就行，比如Prometheus","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586242839,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":128243,"user_name":"稳健的少年","can_delete":false,"product_type":"c1","uid":1047369,"ip_address":"","ucode":"53300B191CB919","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fb/49/e14b1c54.jpg","comment_is_top":false,"comment_ctime":1566865563,"is_pvip":false,"replies":[{"id":"47513","content":"可以支持","user_name":"作者回复","user_name_real":"huxi_2b","uid":"1288090","ctime":1566868063,"ip_address":"","comment_id":128243,"utype":1}],"discussion_count":3,"race_medal":0,"score":"5861832859","product_id":100029201,"comment_content":"老师，Kafka Manager貌似不支持Kafka 2.x版本吧","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"胡夕","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464861,"discussion_content":"可以支持","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566868063,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1182802,"avatar":"https://static001.geekbang.org/account/avatar/00/12/0c/52/f25c3636.jpg","nickname":"长脖子树","note":"","ucode":"D9090EF67EEB1B","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":290327,"discussion_content":"2.4的也可以，现在已经是 CMAK 了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594431622,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1027343,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/ad/0f/cac1535a.jpg","nickname":"大水牛","note":"","ucode":"9CF2B21BA75C0D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6360,"discussion_content":"实测支持，可以自己亲自试试哈，只不过目前最新的为2.2.0","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566868933,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":330059,"user_name":"贝影","can_delete":false,"product_type":"c1","uid":1054827,"ip_address":"","ucode":"19545C8DCBF8A2","user_header":"https://static001.geekbang.org/account/avatar/00/10/18/6b/a1448af1.jpg","comment_is_top":false,"comment_ctime":1641780197,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1641780197","product_id":100029201,"comment_content":"Burrow主要就是用于动态监控lag的，个人感觉其实很不错，也学了其监控算法迁移到自己监控平台上","like_count":1},{"had_liked":false,"id":323149,"user_name":"追风筝的人","can_delete":false,"product_type":"c1","uid":1488020,"ip_address":"","ucode":"2993D60F94C396","user_header":"https://static001.geekbang.org/account/avatar/00/16/b4/94/2796de72.jpg","comment_is_top":false,"comment_ctime":1637744313,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1637744313","product_id":100029201,"comment_content":"Grafana可以监控K8S ,中间件集群redis   kafka  zk, mysql , es, etcd, minio, maogodb的 CPU  内存  磁盘 等数据指标  挺好的","like_count":0},{"had_liked":false,"id":291103,"user_name":"Allan","can_delete":false,"product_type":"c1","uid":1310388,"ip_address":"","ucode":"8DA4DBECC2C45C","user_header":"https://static001.geekbang.org/account/avatar/00/13/fe/b4/295338e7.jpg","comment_is_top":false,"comment_ctime":1620026630,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1620026630","product_id":100029201,"comment_content":"尝试了一把kafka eagle","like_count":0,"discussions":[{"author":{"id":1415619,"avatar":"https://static001.geekbang.org/account/avatar/00/15/99/c3/e4f408d4.jpg","nickname":"陌兮","note":"","ucode":"00CE47CAECD5CD","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":554048,"discussion_content":"我们用的就是这个","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646196767,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1272591,"avatar":"https://static001.geekbang.org/account/avatar/00/13/6b/0f/293b999c.jpg","nickname":"旋风","note":"","ucode":"B9FF02969F4307","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":532837,"discussion_content":"怎么样，能满足需求吗","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637717758,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":289626,"user_name":"A_阿海","can_delete":false,"product_type":"c1","uid":1239200,"ip_address":"","ucode":"5594C992D7E6E9","user_header":"https://static001.geekbang.org/account/avatar/00/12/e8/a0/c2daafdb.jpg","comment_is_top":false,"comment_ctime":1619101729,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1619101729","product_id":100029201,"comment_content":"滴滴新开源了一个，可以参考(https:&#47;&#47;github.com&#47;didi&#47;Logi-KafkaManager)","like_count":1},{"had_liked":false,"id":232248,"user_name":"James","can_delete":false,"product_type":"c1","uid":1134861,"ip_address":"","ucode":"48B0F2A334D1C1","user_header":"https://static001.geekbang.org/account/avatar/00/11/51/0d/fc1652fe.jpg","comment_is_top":false,"comment_ctime":1593934860,"is_pvip":false,"replies":[{"id":"85760","content":"是的。都积压在broker端等待后续处理","user_name":"作者回复","user_name_real":"胡夕","uid":"1288090","ctime":1593997476,"ip_address":"","comment_id":232248,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1593934860","product_id":100029201,"comment_content":"broker存在请求积压是指客户端发送的请求没及时处理吗.","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"胡夕","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":500582,"discussion_content":"是的。都积压在broker端等待后续处理","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593997476,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":221224,"user_name":"行则将至","can_delete":false,"product_type":"c1","uid":1542987,"ip_address":"","ucode":"DB972F2DF059C4","user_header":"https://static001.geekbang.org/account/avatar/00/17/8b/4b/fa52d222.jpg","comment_is_top":false,"comment_ctime":1590450564,"is_pvip":false,"replies":[{"id":"81594","content":"主要是这里：http:&#47;&#47;kafka.apache.org&#47;documentation&#47;#monitoring","user_name":"作者回复","user_name_real":"胡夕","uid":"1288090","ctime":1590457384,"ip_address":"","comment_id":221224,"utype":1}],"discussion_count":1,"race_medal":1,"score":"1590450564","product_id":100029201,"comment_content":"老师，您说的去kafka官网搜索--object-names，这个参数在官网怎么搜索啊？官网左侧的tab都点开搜了，没有看到。☹️","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"胡夕","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496389,"discussion_content":"主要是这里：http://kafka.apache.org/documentation/#monitoring","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590457384,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":158806,"user_name":"婷","can_delete":false,"product_type":"c1","uid":1612372,"ip_address":"","ucode":"1264B8F777B7CD","user_header":"https://static001.geekbang.org/account/avatar/00/18/9a/54/5d51fda4.jpg","comment_is_top":false,"comment_ctime":1575455640,"is_pvip":false,"replies":[{"id":"60894","content":"先确定问题出现在那端吧？比如使用kafka-topics脚本确认下topic数量。","user_name":"作者回复","user_name_real":"huxi_2b","uid":"1288090","ctime":1575594213,"ip_address":"","comment_id":158806,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1575455640","product_id":100029201,"comment_content":"我用kafka-manager链接集群后，topics显示为0。请教老师，该如何去排查问题。","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"胡夕","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476854,"discussion_content":"先确定问题出现在那端吧？比如使用kafka-topics脚本确认下topic数量。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575594213,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":156204,"user_name":"瞿中华","can_delete":false,"product_type":"c1","uid":1566349,"ip_address":"","ucode":"DFFA0D66A1DE52","user_header":"https://static001.geekbang.org/account/avatar/00/17/e6/8d/f3e024e2.jpg","comment_is_top":false,"comment_ctime":1574836015,"is_pvip":false,"replies":[{"id":"60083","content":"kafkaOffsetMonitor已经很久没有维护了。可以使用原生的Kafka命令或kafka-manager","user_name":"作者回复","user_name_real":"huxi_2b","uid":"1288090","ctime":1574902166,"ip_address":"","comment_id":156204,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1574836015","product_id":100029201,"comment_content":"你好，请问kafka Consume 进度的监控工具有哪些？我的版本是kafka_2.11-1.1.0，我使用kafkaOffsetMonitor拿不到consumer数据，查了资料好像kafkaOffsetMonitor不支持0.9以上版本<br>","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"胡夕","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476031,"discussion_content":"kafkaOffsetMonitor已经很久没有维护了。可以使用原生的Kafka命令或kafka-manager","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574902166,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":145744,"user_name":"昀溪","can_delete":false,"product_type":"c1","uid":1493286,"ip_address":"","ucode":"BFAF31542BC24A","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoCl6Nxf9oW9sDOoibA7p8lKf0jqjPeDszqI4e7iavicQHtbtyibHIhLibyXYAaT02l7GRQvM9BJUxh6yQ/132","comment_is_top":false,"comment_ctime":1572358688,"is_pvip":false,"replies":[{"id":"56291","content":"你指的可用是指什么含义呢？从Kafka的角度，只要ISR中依然有副本，理论上数据依然可以正常收发","user_name":"作者回复","user_name_real":"huxi_2b","uid":"1288090","ctime":1572396566,"ip_address":"","comment_id":145744,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1572358688","product_id":100029201,"comment_content":"老师，Kafka集群如果重启的，3台机器，每个主题3个副本，假设A主题的 ISR是 0 1 2 ，如果我同时重启2台broker，那么此时主题A的ISR就剩下一个，这种情况下，集群还可用么？","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"胡夕","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":472558,"discussion_content":"你指的可用是指什么含义呢？从Kafka的角度，只要ISR中依然有副本，理论上数据依然可以正常收发","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572396566,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1493286,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoCl6Nxf9oW9sDOoibA7p8lKf0jqjPeDszqI4e7iavicQHtbtyibHIhLibyXYAaT02l7GRQvM9BJUxh6yQ/132","nickname":"昀溪","note":"","ucode":"BFAF31542BC24A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":41303,"discussion_content":"谢谢老师","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572397929,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":139924,"user_name":"Mick","can_delete":false,"product_type":"c1","uid":1391216,"ip_address":"","ucode":"5CCE3E2BDB110A","user_header":"https://static001.geekbang.org/account/avatar/00/15/3a/70/a874d69c.jpg","comment_is_top":false,"comment_ctime":1570766668,"is_pvip":false,"replies":[{"id":"54181","content":"要确认下这些分区是否正常吧，比如leader是否存在","user_name":"作者回复","user_name_real":"huxi_2b","uid":"1288090","ctime":1570840757,"ip_address":"","comment_id":139924,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1570766668","product_id":100029201,"comment_content":"老师，请问下为什么我的kafka manager 里面的Latest Offset 为空？如图https:&#47;&#47;www.processon.com&#47;view&#47;link&#47;5d9ffd05e4b0893e992642c3","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"胡夕","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470176,"discussion_content":"要确认下这些分区是否正常吧，比如leader是否存在","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570840757,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":128701,"user_name":"外星人","can_delete":false,"product_type":"c1","uid":1132861,"ip_address":"","ucode":"D8469B13F2AB37","user_header":"https://static001.geekbang.org/account/avatar/00/11/49/3d/4ac37cc2.jpg","comment_is_top":false,"comment_ctime":1566952712,"is_pvip":false,"replies":[{"id":"47872","content":"好问题！hmm.... 目前暂时做不到或者非常不方便。你可以启动KafkaApis的TRACE日志，然后汇总统计哪类请求占用了过多的线层","user_name":"作者回复","user_name_real":"huxi_2b","uid":"1288090","ctime":1566990024,"ip_address":"","comment_id":128701,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1566952712","product_id":100029201,"comment_content":"你好，我们生产request handle idle过低的原因找到了，是由于磁盘坏道导致的？能否加些关于kafkaApi的监控？看下请求的分布情况及哪些请求占用requesthandler过多吗？","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"胡夕","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465066,"discussion_content":"好问题！hmm.... 目前暂时做不到或者非常不方便。你可以启动KafkaApis的TRACE日志，然后汇总统计哪类请求占用了过多的线层","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566990024,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1132861,"avatar":"https://static001.geekbang.org/account/avatar/00/11/49/3d/4ac37cc2.jpg","nickname":"外星人","note":"","ucode":"D8469B13F2AB37","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6793,"discussion_content":"现在支持动态开启trace日志吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567125085,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":128614,"user_name":"落霞与孤鹜","can_delete":false,"product_type":"c1","uid":1111004,"ip_address":"","ucode":"1F06EB86DD2E6B","user_header":"https://static001.geekbang.org/account/avatar/00/10/f3/dc/e7e5c159.jpg","comment_is_top":false,"comment_ctime":1566914123,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1566914123","product_id":100029201,"comment_content":"前公司携程grafana用的就很好","like_count":0},{"had_liked":false,"id":128300,"user_name":"一眼万年","can_delete":false,"product_type":"c1","uid":1018200,"ip_address":"","ucode":"7B0823E39AE809","user_header":"","comment_is_top":false,"comment_ctime":1566869582,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1566869582","product_id":100029201,"comment_content":"Kafka Eagle会导致zookeeper连接占满不释放","like_count":1,"discussions":[{"author":{"id":1232334,"avatar":"","nickname":"13761642169","note":"","ucode":"68137695FC2120","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6368,"discussion_content":"这个问题没遇到过，可以给kafka eagle 提供issue","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566871283,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}