{"id":72775,"title":"14 | count(*)è¿™ä¹ˆæ…¢ï¼Œæˆ‘è¯¥æ€ä¹ˆåŠï¼Ÿ","content":"<p>åœ¨å¼€å‘ç³»ç»Ÿçš„æ—¶å€™ï¼Œä½ å¯èƒ½ç»å¸¸éœ€è¦è®¡ç®—ä¸€ä¸ªè¡¨çš„è¡Œæ•°ï¼Œæ¯”å¦‚ä¸€ä¸ªäº¤æ˜“ç³»ç»Ÿçš„æ‰€æœ‰å˜æ›´è®°å½•æ€»æ•°ã€‚è¿™æ—¶å€™ä½ å¯èƒ½ä¼šæƒ³ï¼Œä¸€æ¡select count(*) from t è¯­å¥ä¸å°±è§£å†³äº†å—ï¼Ÿ</p><p>ä½†æ˜¯ï¼Œä½ ä¼šå‘ç°éšç€ç³»ç»Ÿä¸­è®°å½•æ•°è¶Šæ¥è¶Šå¤šï¼Œè¿™æ¡è¯­å¥æ‰§è¡Œå¾—ä¹Ÿä¼šè¶Šæ¥è¶Šæ…¢ã€‚ç„¶åä½ å¯èƒ½å°±æƒ³äº†ï¼ŒMySQLæ€ä¹ˆè¿™ä¹ˆç¬¨å•Šï¼Œè®°ä¸ªæ€»æ•°ï¼Œæ¯æ¬¡è¦æŸ¥çš„æ—¶å€™ç›´æ¥è¯»å‡ºæ¥ï¼Œä¸å°±å¥½äº†å—ã€‚</p><p>é‚£ä¹ˆä»Šå¤©ï¼Œæˆ‘ä»¬å°±æ¥èŠèŠcount(*)è¯­å¥åˆ°åº•æ˜¯æ€æ ·å®ç°çš„ï¼Œä»¥åŠMySQLä¸ºä»€ä¹ˆä¼šè¿™ä¹ˆå®ç°ã€‚ç„¶åï¼Œæˆ‘ä¼šå†å’Œä½ è¯´è¯´ï¼Œå¦‚æœåº”ç”¨ä¸­æœ‰è¿™ç§é¢‘ç¹å˜æ›´å¹¶éœ€è¦ç»Ÿè®¡è¡¨è¡Œæ•°çš„éœ€æ±‚ï¼Œä¸šåŠ¡è®¾è®¡ä¸Šå¯ä»¥æ€ä¹ˆåšã€‚</p><h1>count(*)çš„å®ç°æ–¹å¼</h1><p>ä½ é¦–å…ˆè¦æ˜ç¡®çš„æ˜¯ï¼Œåœ¨ä¸åŒçš„MySQLå¼•æ“ä¸­ï¼Œcount(*)æœ‰ä¸åŒçš„å®ç°æ–¹å¼ã€‚</p><ul>\n<li>MyISAMå¼•æ“æŠŠä¸€ä¸ªè¡¨çš„æ€»è¡Œæ•°å­˜åœ¨äº†ç£ç›˜ä¸Šï¼Œå› æ­¤æ‰§è¡Œcount(*)çš„æ—¶å€™ä¼šç›´æ¥è¿”å›è¿™ä¸ªæ•°ï¼Œæ•ˆç‡å¾ˆé«˜ï¼›</li>\n<li>è€ŒInnoDBå¼•æ“å°±éº»çƒ¦äº†ï¼Œå®ƒæ‰§è¡Œcount(*)çš„æ—¶å€™ï¼Œéœ€è¦æŠŠæ•°æ®ä¸€è¡Œä¸€è¡Œåœ°ä»å¼•æ“é‡Œé¢è¯»å‡ºæ¥ï¼Œç„¶åç´¯ç§¯è®¡æ•°ã€‚</li>\n</ul><p>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬åœ¨è¿™ç¯‡æ–‡ç« é‡Œè®¨è®ºçš„æ˜¯æ²¡æœ‰è¿‡æ»¤æ¡ä»¶çš„count(*)ï¼Œå¦‚æœåŠ äº†where æ¡ä»¶çš„è¯ï¼ŒMyISAMè¡¨ä¹Ÿæ˜¯ä¸èƒ½è¿”å›å¾—è¿™ä¹ˆå¿«çš„ã€‚</p><p>åœ¨å‰é¢çš„æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬ä¸€èµ·åˆ†æäº†ä¸ºä»€ä¹ˆè¦ä½¿ç”¨InnoDBï¼Œå› ä¸ºä¸è®ºæ˜¯åœ¨äº‹åŠ¡æ”¯æŒã€å¹¶å‘èƒ½åŠ›è¿˜æ˜¯åœ¨æ•°æ®å®‰å…¨æ–¹é¢ï¼ŒInnoDBéƒ½ä¼˜äºMyISAMã€‚æˆ‘çŒœä½ çš„è¡¨ä¹Ÿä¸€å®šæ˜¯ç”¨äº†InnoDBå¼•æ“ã€‚è¿™å°±æ˜¯å½“ä½ çš„è®°å½•æ•°è¶Šæ¥è¶Šå¤šçš„æ—¶å€™ï¼Œè®¡ç®—ä¸€ä¸ªè¡¨çš„æ€»è¡Œæ•°ä¼šè¶Šæ¥è¶Šæ…¢çš„åŸå› ã€‚</p><!-- [[[read_end]]] --><p>é‚£<strong>ä¸ºä»€ä¹ˆInnoDBä¸è·ŸMyISAMä¸€æ ·ï¼Œä¹ŸæŠŠæ•°å­—å­˜èµ·æ¥å‘¢ï¼Ÿ</strong></p><p>è¿™æ˜¯å› ä¸ºå³ä½¿æ˜¯åœ¨åŒä¸€ä¸ªæ—¶åˆ»çš„å¤šä¸ªæŸ¥è¯¢ï¼Œç”±äºå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼ˆMVCCï¼‰çš„åŸå› ï¼ŒInnoDBè¡¨â€œåº”è¯¥è¿”å›å¤šå°‘è¡Œâ€ä¹Ÿæ˜¯ä¸ç¡®å®šçš„ã€‚è¿™é‡Œï¼Œæˆ‘ç”¨ä¸€ä¸ªç®—count(*)çš„ä¾‹å­æ¥ä¸ºä½ è§£é‡Šä¸€ä¸‹ã€‚</p><p>å‡è®¾è¡¨tä¸­ç°åœ¨æœ‰10000æ¡è®°å½•ï¼Œæˆ‘ä»¬è®¾è®¡äº†ä¸‰ä¸ªç”¨æˆ·å¹¶è¡Œçš„ä¼šè¯ã€‚</p><ul>\n<li>ä¼šè¯Aå…ˆå¯åŠ¨äº‹åŠ¡å¹¶æŸ¥è¯¢ä¸€æ¬¡è¡¨çš„æ€»è¡Œæ•°ï¼›</li>\n<li>ä¼šè¯Bå¯åŠ¨äº‹åŠ¡ï¼Œæ’å…¥ä¸€è¡Œåè®°å½•åï¼ŒæŸ¥è¯¢è¡¨çš„æ€»è¡Œæ•°ï¼›</li>\n<li>ä¼šè¯Cå…ˆå¯åŠ¨ä¸€ä¸ªå•ç‹¬çš„è¯­å¥ï¼Œæ’å…¥ä¸€è¡Œè®°å½•åï¼ŒæŸ¥è¯¢è¡¨çš„æ€»è¡Œæ•°ã€‚</li>\n</ul><p>æˆ‘ä»¬å‡è®¾ä»ä¸Šåˆ°ä¸‹æ˜¯æŒ‰ç…§æ—¶é—´é¡ºåºæ‰§è¡Œçš„ï¼ŒåŒä¸€è¡Œè¯­å¥æ˜¯åœ¨åŒä¸€æ—¶åˆ»æ‰§è¡Œçš„ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/5e/97/5e716ba1d464c8224c1c1f36135d0e97.png?wh=943*362\" alt=\"\"></p><center><span class=\"reference\">å›¾1 ä¼šè¯Aã€Bã€Cçš„æ‰§è¡Œæµç¨‹</span></center><p>ä½ ä¼šçœ‹åˆ°ï¼Œåœ¨æœ€åä¸€ä¸ªæ—¶åˆ»ï¼Œä¸‰ä¸ªä¼šè¯Aã€Bã€Cä¼šåŒæ—¶æŸ¥è¯¢è¡¨tçš„æ€»è¡Œæ•°ï¼Œä½†æ‹¿åˆ°çš„ç»“æœå´ä¸åŒã€‚</p><p>è¿™å’ŒInnoDBçš„äº‹åŠ¡è®¾è®¡æœ‰å…³ç³»ï¼Œå¯é‡å¤è¯»æ˜¯å®ƒé»˜è®¤çš„éš”ç¦»çº§åˆ«ï¼Œåœ¨ä»£ç ä¸Šå°±æ˜¯é€šè¿‡å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼Œä¹Ÿå°±æ˜¯MVCCæ¥å®ç°çš„ã€‚æ¯ä¸€è¡Œè®°å½•éƒ½è¦åˆ¤æ–­è‡ªå·±æ˜¯å¦å¯¹è¿™ä¸ªä¼šè¯å¯è§ï¼Œå› æ­¤å¯¹äºcount(*)è¯·æ±‚æ¥è¯´ï¼ŒInnoDBåªå¥½æŠŠæ•°æ®ä¸€è¡Œä¸€è¡Œåœ°è¯»å‡ºä¾æ¬¡åˆ¤æ–­ï¼Œå¯è§çš„è¡Œæ‰èƒ½å¤Ÿç”¨äºè®¡ç®—â€œåŸºäºè¿™ä¸ªæŸ¥è¯¢â€çš„è¡¨çš„æ€»è¡Œæ•°ã€‚</p><blockquote>\n<p>å¤‡æ³¨ï¼šå¦‚æœä½ å¯¹MVCCè®°å¿†æ¨¡ç³Šäº†ï¼Œå¯ä»¥å†å›é¡¾ä¸‹ç¬¬3ç¯‡æ–‡ç« <a href=\"https://time.geekbang.org/column/article/68963\">ã€Šäº‹åŠ¡éš”ç¦»ï¼šä¸ºä»€ä¹ˆä½ æ”¹äº†æˆ‘è¿˜çœ‹ä¸è§ï¼Ÿã€‹</a>å’Œç¬¬8ç¯‡æ–‡ç« <a href=\"https://time.geekbang.org/column/article/70562\">ã€Šäº‹åŠ¡åˆ°åº•æ˜¯éš”ç¦»çš„è¿˜æ˜¯ä¸éš”ç¦»çš„ï¼Ÿã€‹</a>ä¸­çš„ç›¸å…³å†…å®¹ã€‚</p>\n</blockquote><p>å½“ç„¶ï¼Œç°åœ¨è¿™ä¸ªçœ‹ä¸Šå»ç¬¨ç¬¨çš„MySQLï¼Œåœ¨æ‰§è¡Œcount(*)æ“ä½œçš„æ—¶å€™è¿˜æ˜¯åšäº†ä¼˜åŒ–çš„ã€‚</p><p>ä½ çŸ¥é“çš„ï¼ŒInnoDBæ˜¯ç´¢å¼•ç»„ç»‡è¡¨ï¼Œä¸»é”®ç´¢å¼•æ ‘çš„å¶å­èŠ‚ç‚¹æ˜¯æ•°æ®ï¼Œè€Œæ™®é€šç´¢å¼•æ ‘çš„å¶å­èŠ‚ç‚¹æ˜¯ä¸»é”®å€¼ã€‚æ‰€ä»¥ï¼Œæ™®é€šç´¢å¼•æ ‘æ¯”ä¸»é”®ç´¢å¼•æ ‘å°å¾ˆå¤šã€‚å¯¹äºcount(*)è¿™æ ·çš„æ“ä½œï¼Œéå†å“ªä¸ªç´¢å¼•æ ‘å¾—åˆ°çš„ç»“æœé€»è¾‘ä¸Šéƒ½æ˜¯ä¸€æ ·çš„ã€‚å› æ­¤ï¼ŒMySQLä¼˜åŒ–å™¨ä¼šæ‰¾åˆ°æœ€å°çš„é‚£æ£µæ ‘æ¥éå†ã€‚<strong>åœ¨ä¿è¯é€»è¾‘æ­£ç¡®çš„å‰æä¸‹ï¼Œå°½é‡å‡å°‘æ‰«æçš„æ•°æ®é‡ï¼Œæ˜¯æ•°æ®åº“ç³»ç»Ÿè®¾è®¡çš„é€šç”¨æ³•åˆ™ä¹‹ä¸€ã€‚</strong></p><p>å¦‚æœä½ ç”¨è¿‡show table status å‘½ä»¤çš„è¯ï¼Œå°±ä¼šå‘ç°è¿™ä¸ªå‘½ä»¤çš„è¾“å‡ºç»“æœé‡Œé¢ä¹Ÿæœ‰ä¸€ä¸ªTABLE_ROWSç”¨äºæ˜¾ç¤ºè¿™ä¸ªè¡¨å½“å‰æœ‰å¤šå°‘è¡Œï¼Œè¿™ä¸ªå‘½ä»¤æ‰§è¡ŒæŒºå¿«çš„ï¼Œé‚£è¿™ä¸ªTABLE_ROWSèƒ½ä»£æ›¿count(*)å—ï¼Ÿ</p><p>ä½ å¯èƒ½è¿˜è®°å¾—åœ¨ç¬¬10ç¯‡æ–‡ç« <a href=\"https://time.geekbang.org/column/article/71173\">ã€Š MySQLä¸ºä»€ä¹ˆæœ‰æ—¶å€™ä¼šé€‰é”™ç´¢å¼•ï¼Ÿã€‹</a>ä¸­æˆ‘æåˆ°è¿‡ï¼Œç´¢å¼•ç»Ÿè®¡çš„å€¼æ˜¯é€šè¿‡é‡‡æ ·æ¥ä¼°ç®—çš„ã€‚å®é™…ä¸Šï¼ŒTABLE_ROWSå°±æ˜¯ä»è¿™ä¸ªé‡‡æ ·ä¼°ç®—å¾—æ¥çš„ï¼Œå› æ­¤å®ƒä¹Ÿå¾ˆä¸å‡†ã€‚æœ‰å¤šä¸å‡†å‘¢ï¼Œå®˜æ–¹æ–‡æ¡£è¯´è¯¯å·®å¯èƒ½è¾¾åˆ°40%åˆ°50%ã€‚<strong>æ‰€ä»¥ï¼Œshow table statuså‘½ä»¤æ˜¾ç¤ºçš„è¡Œæ•°ä¹Ÿä¸èƒ½ç›´æ¥ä½¿ç”¨ã€‚</strong></p><p>åˆ°è¿™é‡Œæˆ‘ä»¬å°ç»“ä¸€ä¸‹ï¼š</p><ul>\n<li>MyISAMè¡¨è™½ç„¶count(*)å¾ˆå¿«ï¼Œä½†æ˜¯ä¸æ”¯æŒäº‹åŠ¡ï¼›</li>\n<li>show table statuså‘½ä»¤è™½ç„¶è¿”å›å¾ˆå¿«ï¼Œä½†æ˜¯ä¸å‡†ç¡®ï¼›</li>\n<li>InnoDBè¡¨ç›´æ¥count(*)ä¼šéå†å…¨è¡¨ï¼Œè™½ç„¶ç»“æœå‡†ç¡®ï¼Œä½†ä¼šå¯¼è‡´æ€§èƒ½é—®é¢˜ã€‚</li>\n</ul><p>é‚£ä¹ˆï¼Œå›åˆ°æ–‡ç« å¼€å¤´çš„é—®é¢˜ï¼Œå¦‚æœä½ ç°åœ¨æœ‰ä¸€ä¸ªé¡µé¢ç»å¸¸è¦æ˜¾ç¤ºäº¤æ˜“ç³»ç»Ÿçš„æ“ä½œè®°å½•æ€»æ•°ï¼Œåˆ°åº•åº”è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿç­”æ¡ˆæ˜¯ï¼Œæˆ‘ä»¬åªèƒ½è‡ªå·±è®¡æ•°ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è®¨è®ºä¸€ä¸‹ï¼Œçœ‹çœ‹è‡ªå·±è®¡æ•°æœ‰å“ªäº›æ–¹æ³•ï¼Œä»¥åŠæ¯ç§æ–¹æ³•çš„ä¼˜ç¼ºç‚¹æœ‰å“ªäº›ã€‚</p><p>è¿™é‡Œï¼Œæˆ‘å…ˆå’Œä½ è¯´ä¸€ä¸‹è¿™äº›æ–¹æ³•çš„åŸºæœ¬æ€è·¯ï¼šä½ éœ€è¦è‡ªå·±æ‰¾ä¸€ä¸ªåœ°æ–¹ï¼ŒæŠŠæ“ä½œè®°å½•è¡¨çš„è¡Œæ•°å­˜èµ·æ¥ã€‚</p><h1>ç”¨ç¼“å­˜ç³»ç»Ÿä¿å­˜è®¡æ•°</h1><p>å¯¹äºæ›´æ–°å¾ˆé¢‘ç¹çš„åº“æ¥è¯´ï¼Œä½ å¯èƒ½ä¼šç¬¬ä¸€æ—¶é—´æƒ³åˆ°ï¼Œç”¨ç¼“å­˜ç³»ç»Ÿæ¥æ”¯æŒã€‚</p><p>ä½ å¯ä»¥ç”¨ä¸€ä¸ªRedisæœåŠ¡æ¥ä¿å­˜è¿™ä¸ªè¡¨çš„æ€»è¡Œæ•°ã€‚è¿™ä¸ªè¡¨æ¯è¢«æ’å…¥ä¸€è¡ŒRedisè®¡æ•°å°±åŠ 1ï¼Œæ¯è¢«åˆ é™¤ä¸€è¡ŒRedisè®¡æ•°å°±å‡1ã€‚è¿™ç§æ–¹å¼ä¸‹ï¼Œè¯»å’Œæ›´æ–°æ“ä½œéƒ½å¾ˆå¿«ï¼Œä½†ä½ å†æƒ³ä¸€ä¸‹è¿™ç§æ–¹å¼å­˜åœ¨ä»€ä¹ˆé—®é¢˜å—ï¼Ÿ</p><p>æ²¡é”™ï¼Œç¼“å­˜ç³»ç»Ÿå¯èƒ½ä¼šä¸¢å¤±æ›´æ–°ã€‚</p><p>Redisçš„æ•°æ®ä¸èƒ½æ°¸ä¹…åœ°ç•™åœ¨å†…å­˜é‡Œï¼Œæ‰€ä»¥ä½ ä¼šæ‰¾ä¸€ä¸ªåœ°æ–¹æŠŠè¿™ä¸ªå€¼å®šæœŸåœ°æŒä¹…åŒ–å­˜å‚¨èµ·æ¥ã€‚ä½†å³ä½¿è¿™æ ·ï¼Œä»ç„¶å¯èƒ½ä¸¢å¤±æ›´æ–°ã€‚è¯•æƒ³å¦‚æœåˆšåˆšåœ¨æ•°æ®è¡¨ä¸­æ’å…¥äº†ä¸€è¡Œï¼ŒRedisä¸­ä¿å­˜çš„å€¼ä¹ŸåŠ äº†1ï¼Œç„¶åRediså¼‚å¸¸é‡å¯äº†ï¼Œé‡å¯åä½ è¦ä»å­˜å‚¨redisæ•°æ®çš„åœ°æ–¹æŠŠè¿™ä¸ªå€¼è¯»å›æ¥ï¼Œè€ŒåˆšåˆšåŠ 1çš„è¿™ä¸ªè®¡æ•°æ“ä½œå´ä¸¢å¤±äº†ã€‚</p><p>å½“ç„¶äº†ï¼Œè¿™è¿˜æ˜¯æœ‰è§£çš„ã€‚æ¯”å¦‚ï¼ŒRediså¼‚å¸¸é‡å¯ä»¥åï¼Œåˆ°æ•°æ®åº“é‡Œé¢å•ç‹¬æ‰§è¡Œä¸€æ¬¡count(*)è·å–çœŸå®çš„è¡Œæ•°ï¼Œå†æŠŠè¿™ä¸ªå€¼å†™å›åˆ°Redisé‡Œå°±å¯ä»¥äº†ã€‚å¼‚å¸¸é‡å¯æ¯•ç«Ÿä¸æ˜¯ç»å¸¸å‡ºç°çš„æƒ…å†µï¼Œè¿™ä¸€æ¬¡å…¨è¡¨æ‰«æçš„æˆæœ¬ï¼Œè¿˜æ˜¯å¯ä»¥æ¥å—çš„ã€‚</p><p>ä½†å®é™…ä¸Šï¼Œ<strong>å°†è®¡æ•°ä¿å­˜åœ¨ç¼“å­˜ç³»ç»Ÿä¸­çš„æ–¹å¼ï¼Œè¿˜ä¸åªæ˜¯ä¸¢å¤±æ›´æ–°çš„é—®é¢˜ã€‚å³ä½¿Redisæ­£å¸¸å·¥ä½œï¼Œè¿™ä¸ªå€¼è¿˜æ˜¯é€»è¾‘ä¸Šä¸ç²¾ç¡®çš„ã€‚</strong></p><p>ä½ å¯ä»¥è®¾æƒ³ä¸€ä¸‹æœ‰è¿™ä¹ˆä¸€ä¸ªé¡µé¢ï¼Œè¦æ˜¾ç¤ºæ“ä½œè®°å½•çš„æ€»æ•°ï¼ŒåŒæ—¶è¿˜è¦æ˜¾ç¤ºæœ€è¿‘æ“ä½œçš„100æ¡è®°å½•ã€‚é‚£ä¹ˆï¼Œè¿™ä¸ªé¡µé¢çš„é€»è¾‘å°±éœ€è¦å…ˆåˆ°Redisé‡Œé¢å–å‡ºè®¡æ•°ï¼Œå†åˆ°æ•°æ®è¡¨é‡Œé¢å–æ•°æ®è®°å½•ã€‚</p><p>æˆ‘ä»¬æ˜¯è¿™ä¹ˆå®šä¹‰ä¸ç²¾ç¡®çš„ï¼š</p><ol>\n<li>\n<p>ä¸€ç§æ˜¯ï¼ŒæŸ¥åˆ°çš„100è¡Œç»“æœé‡Œé¢æœ‰æœ€æ–°æ’å…¥è®°å½•ï¼Œè€ŒRedisçš„è®¡æ•°é‡Œè¿˜æ²¡åŠ 1ï¼›</p>\n</li>\n<li>\n<p>å¦ä¸€ç§æ˜¯ï¼ŒæŸ¥åˆ°çš„100è¡Œç»“æœé‡Œæ²¡æœ‰æœ€æ–°æ’å…¥çš„è®°å½•ï¼Œè€ŒRedisçš„è®¡æ•°é‡Œå·²ç»åŠ äº†1ã€‚</p>\n</li>\n</ol><p>è¿™ä¸¤ç§æƒ…å†µï¼Œéƒ½æ˜¯é€»è¾‘ä¸ä¸€è‡´çš„ã€‚</p><p>æˆ‘ä»¬ä¸€èµ·æ¥çœ‹çœ‹è¿™ä¸ªæ—¶åºå›¾ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/39/33/39898af053695dad37227d71ae288e33.png?wh=731*268\" alt=\"\"></p><center><span class=\"reference\">å›¾2 ä¼šè¯Aã€Bæ‰§è¡Œæ—¶åºå›¾</span></center><p>å›¾2ä¸­ï¼Œä¼šè¯Aæ˜¯ä¸€ä¸ªæ’å…¥äº¤æ˜“è®°å½•çš„é€»è¾‘ï¼Œå¾€æ•°æ®è¡¨é‡Œæ’å…¥ä¸€è¡ŒRï¼Œç„¶åRedisè®¡æ•°åŠ 1ï¼›ä¼šè¯Bå°±æ˜¯æŸ¥è¯¢é¡µé¢æ˜¾ç¤ºæ—¶éœ€è¦çš„æ•°æ®ã€‚</p><p>åœ¨å›¾2çš„è¿™ä¸ªæ—¶åºé‡Œï¼Œåœ¨T3æ—¶åˆ»ä¼šè¯Bæ¥æŸ¥è¯¢çš„æ—¶å€™ï¼Œä¼šæ˜¾ç¤ºå‡ºæ–°æ’å…¥çš„Rè¿™ä¸ªè®°å½•ï¼Œä½†æ˜¯Redisçš„è®¡æ•°è¿˜æ²¡åŠ 1ã€‚è¿™æ—¶å€™ï¼Œå°±ä¼šå‡ºç°æˆ‘ä»¬è¯´çš„æ•°æ®ä¸ä¸€è‡´ã€‚</p><p>ä½ ä¸€å®šä¼šè¯´ï¼Œè¿™æ˜¯å› ä¸ºæˆ‘ä»¬æ‰§è¡Œæ–°å¢è®°å½•é€»è¾‘æ—¶å€™ï¼Œæ˜¯å…ˆå†™æ•°æ®è¡¨ï¼Œå†æ”¹Redisè®¡æ•°ã€‚è€Œè¯»çš„æ—¶å€™æ˜¯å…ˆè¯»Redisï¼Œå†è¯»æ•°æ®è¡¨ï¼Œè¿™ä¸ªé¡ºåºæ˜¯ç›¸åçš„ã€‚é‚£ä¹ˆï¼Œå¦‚æœä¿æŒé¡ºåºä¸€æ ·çš„è¯ï¼Œæ˜¯ä¸æ˜¯å°±æ²¡é—®é¢˜äº†ï¼Ÿæˆ‘ä»¬ç°åœ¨æŠŠä¼šè¯Açš„æ›´æ–°é¡ºåºæ¢ä¸€ä¸‹ï¼Œå†çœ‹çœ‹æ‰§è¡Œç»“æœã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/5c/db/5c2f786beae1d8917cdc5033b7bf0bdb.png?wh=741*323\" alt=\"\"></p><center><span class=\"reference\">å›¾3 è°ƒæ•´é¡ºåºåï¼Œä¼šè¯Aã€Bçš„æ‰§è¡Œæ—¶åºå›¾</span></center><p>ä½ ä¼šå‘ç°ï¼Œè¿™æ—¶å€™åè¿‡æ¥äº†ï¼Œä¼šè¯Båœ¨T3æ—¶åˆ»æŸ¥è¯¢çš„æ—¶å€™ï¼ŒRedisè®¡æ•°åŠ äº†1äº†ï¼Œä½†è¿˜æŸ¥ä¸åˆ°æ–°æ’å…¥çš„Rè¿™ä¸€è¡Œï¼Œä¹Ÿæ˜¯æ•°æ®ä¸ä¸€è‡´çš„æƒ…å†µã€‚</p><p>åœ¨å¹¶å‘ç³»ç»Ÿé‡Œé¢ï¼Œæˆ‘ä»¬æ˜¯æ— æ³•ç²¾ç¡®æ§åˆ¶ä¸åŒçº¿ç¨‹çš„æ‰§è¡Œæ—¶åˆ»çš„ï¼Œå› ä¸ºå­˜åœ¨å›¾ä¸­çš„è¿™ç§æ“ä½œåºåˆ—ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬è¯´å³ä½¿Redisæ­£å¸¸å·¥ä½œï¼Œè¿™ä¸ªè®¡æ•°å€¼è¿˜æ˜¯é€»è¾‘ä¸Šä¸ç²¾ç¡®çš„ã€‚</p><h1>åœ¨æ•°æ®åº“ä¿å­˜è®¡æ•°</h1><p>æ ¹æ®ä¸Šé¢çš„åˆ†æï¼Œç”¨ç¼“å­˜ç³»ç»Ÿä¿å­˜è®¡æ•°æœ‰ä¸¢å¤±æ•°æ®å’Œè®¡æ•°ä¸ç²¾ç¡®çš„é—®é¢˜ã€‚é‚£ä¹ˆï¼Œ<strong>å¦‚æœæˆ‘ä»¬æŠŠè¿™ä¸ªè®¡æ•°ç›´æ¥æ”¾åˆ°æ•°æ®åº“é‡Œå•ç‹¬çš„ä¸€å¼ è®¡æ•°è¡¨Cä¸­ï¼Œåˆä¼šæ€ä¹ˆæ ·å‘¢ï¼Ÿ</strong></p><p>é¦–å…ˆï¼Œè¿™è§£å†³äº†å´©æºƒä¸¢å¤±çš„é—®é¢˜ï¼ŒInnoDBæ˜¯æ”¯æŒå´©æºƒæ¢å¤ä¸ä¸¢æ•°æ®çš„ã€‚</p><blockquote>\n<p>å¤‡æ³¨ï¼šå…³äºInnoDBçš„å´©æºƒæ¢å¤ï¼Œä½ å¯ä»¥å†å›é¡¾ä¸€ä¸‹ç¬¬2ç¯‡æ–‡ç« <a href=\"https://time.geekbang.org/column/article/68633\">ã€Šæ—¥å¿—ç³»ç»Ÿï¼šä¸€æ¡SQLæ›´æ–°è¯­å¥æ˜¯å¦‚ä½•æ‰§è¡Œçš„ï¼Ÿã€‹</a>ä¸­çš„ç›¸å…³å†…å®¹ã€‚</p>\n</blockquote><p>ç„¶åï¼Œæˆ‘ä»¬å†çœ‹çœ‹èƒ½ä¸èƒ½è§£å†³è®¡æ•°ä¸ç²¾ç¡®çš„é—®é¢˜ã€‚</p><p>ä½ ä¼šè¯´ï¼Œè¿™ä¸ä¸€æ ·å—ï¼Ÿæ— éå°±æ˜¯æŠŠå›¾3ä¸­å¯¹Redisçš„æ“ä½œï¼Œæ”¹æˆäº†å¯¹è®¡æ•°è¡¨Cçš„æ“ä½œã€‚åªè¦å‡ºç°å›¾3çš„è¿™ç§æ‰§è¡Œåºåˆ—ï¼Œè¿™ä¸ªé—®é¢˜è¿˜æ˜¯æ— è§£çš„å§ï¼Ÿ</p><p>è¿™ä¸ªé—®é¢˜è¿˜çœŸä¸æ˜¯æ— è§£çš„ã€‚</p><p>æˆ‘ä»¬è¿™ç¯‡æ–‡ç« è¦è§£å†³çš„é—®é¢˜ï¼Œéƒ½æ˜¯ç”±äºInnoDBè¦æ”¯æŒäº‹åŠ¡ï¼Œä»è€Œå¯¼è‡´InnoDBè¡¨ä¸èƒ½æŠŠcount(*)ç›´æ¥å­˜èµ·æ¥ï¼Œç„¶åæŸ¥è¯¢çš„æ—¶å€™ç›´æ¥è¿”å›å½¢æˆçš„ã€‚</p><p>æ‰€è°“ä»¥å­ä¹‹çŸ›æ”»å­ä¹‹ç›¾ï¼Œç°åœ¨æˆ‘ä»¬å°±åˆ©ç”¨â€œäº‹åŠ¡â€è¿™ä¸ªç‰¹æ€§ï¼ŒæŠŠé—®é¢˜è§£å†³æ‰ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/9e/e3/9e4170e2dfca3524eb5e92adb8647de3.png?wh=719*392\" alt=\"\"></p><center><span class=\"reference\">å›¾4 ä¼šè¯Aã€Bçš„æ‰§è¡Œæ—¶åºå›¾</span></center><p>æˆ‘ä»¬æ¥çœ‹ä¸‹ç°åœ¨çš„æ‰§è¡Œç»“æœã€‚è™½ç„¶ä¼šè¯Bçš„è¯»æ“ä½œä»ç„¶æ˜¯åœ¨T3æ‰§è¡Œçš„ï¼Œä½†æ˜¯å› ä¸ºè¿™æ—¶å€™æ›´æ–°äº‹åŠ¡è¿˜æ²¡æœ‰æäº¤ï¼Œæ‰€ä»¥è®¡æ•°å€¼åŠ 1è¿™ä¸ªæ“ä½œå¯¹ä¼šè¯Bè¿˜ä¸å¯è§ã€‚</p><p>å› æ­¤ï¼Œä¼šè¯Bçœ‹åˆ°çš„ç»“æœé‡Œï¼Œ æŸ¥è®¡æ•°å€¼å’Œâ€œæœ€è¿‘100æ¡è®°å½•â€çœ‹åˆ°çš„ç»“æœï¼Œé€»è¾‘ä¸Šå°±æ˜¯ä¸€è‡´çš„ã€‚</p><h1>ä¸åŒçš„countç”¨æ³•</h1><p>åœ¨å‰é¢æ–‡ç« çš„è¯„è®ºåŒºï¼Œæœ‰åŒå­¦ç•™è¨€é—®åˆ°ï¼šåœ¨select count(?) from tè¿™æ ·çš„æŸ¥è¯¢è¯­å¥é‡Œé¢ï¼Œcount(*)ã€count(ä¸»é”®id)ã€count(å­—æ®µ)å’Œcount(1)ç­‰ä¸åŒç”¨æ³•çš„æ€§èƒ½ï¼Œæœ‰å“ªäº›å·®åˆ«ã€‚ä»Šå¤©è°ˆåˆ°äº†count(*)çš„æ€§èƒ½é—®é¢˜ï¼Œæˆ‘å°±å€Ÿæ­¤æœºä¼šå’Œä½ è¯¦ç»†è¯´æ˜ä¸€ä¸‹è¿™å‡ ç§ç”¨æ³•çš„æ€§èƒ½å·®åˆ«ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸‹é¢çš„è®¨è®ºè¿˜æ˜¯åŸºäºInnoDBå¼•æ“çš„ã€‚</p><p>è¿™é‡Œï¼Œé¦–å…ˆä½ è¦å¼„æ¸…æ¥šcount()çš„è¯­ä¹‰ã€‚count()æ˜¯ä¸€ä¸ªèšåˆå‡½æ•°ï¼Œå¯¹äºè¿”å›çš„ç»“æœé›†ï¼Œä¸€è¡Œè¡Œåœ°åˆ¤æ–­ï¼Œå¦‚æœcountå‡½æ•°çš„å‚æ•°ä¸æ˜¯NULLï¼Œç´¯è®¡å€¼å°±åŠ 1ï¼Œå¦åˆ™ä¸åŠ ã€‚æœ€åè¿”å›ç´¯è®¡å€¼ã€‚</p><p>æ‰€ä»¥ï¼Œcount(*)ã€count(ä¸»é”®id)å’Œcount(1) éƒ½è¡¨ç¤ºè¿”å›æ»¡è¶³æ¡ä»¶çš„ç»“æœé›†çš„æ€»è¡Œæ•°ï¼›è€Œcount(å­—æ®µï¼‰ï¼Œåˆ™è¡¨ç¤ºè¿”å›æ»¡è¶³æ¡ä»¶çš„æ•°æ®è¡Œé‡Œé¢ï¼Œå‚æ•°â€œå­—æ®µâ€ä¸ä¸ºNULLçš„æ€»ä¸ªæ•°ã€‚</p><p>è‡³äºåˆ†ææ€§èƒ½å·®åˆ«çš„æ—¶å€™ï¼Œä½ å¯ä»¥è®°ä½è¿™ä¹ˆå‡ ä¸ªåŸåˆ™ï¼š</p><ol>\n<li>\n<p>serverå±‚è¦ä»€ä¹ˆå°±ç»™ä»€ä¹ˆï¼›</p>\n</li>\n<li>\n<p>InnoDBåªç»™å¿…è¦çš„å€¼ï¼›</p>\n</li>\n<li>\n<p>ç°åœ¨çš„ä¼˜åŒ–å™¨åªä¼˜åŒ–äº†count(*)çš„è¯­ä¹‰ä¸ºâ€œå–è¡Œæ•°â€ï¼Œå…¶ä»–â€œæ˜¾è€Œæ˜“è§â€çš„ä¼˜åŒ–å¹¶æ²¡æœ‰åšã€‚</p>\n</li>\n</ol><p>è¿™æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±ä¸€ä¸ªä¸ªåœ°æ¥çœ‹çœ‹ã€‚</p><p><strong>å¯¹äºcount(ä¸»é”®id)æ¥è¯´</strong>ï¼ŒInnoDBå¼•æ“ä¼šéå†æ•´å¼ è¡¨ï¼ŒæŠŠæ¯ä¸€è¡Œçš„idå€¼éƒ½å–å‡ºæ¥ï¼Œè¿”å›ç»™serverå±‚ã€‚serverå±‚æ‹¿åˆ°idåï¼Œåˆ¤æ–­æ˜¯ä¸å¯èƒ½ä¸ºç©ºçš„ï¼Œå°±æŒ‰è¡Œç´¯åŠ ã€‚</p><p><strong>å¯¹äºcount(1)æ¥è¯´</strong>ï¼ŒInnoDBå¼•æ“éå†æ•´å¼ è¡¨ï¼Œä½†ä¸å–å€¼ã€‚serverå±‚å¯¹äºè¿”å›çš„æ¯ä¸€è¡Œï¼Œæ”¾ä¸€ä¸ªæ•°å­—â€œ1â€è¿›å»ï¼Œåˆ¤æ–­æ˜¯ä¸å¯èƒ½ä¸ºç©ºçš„ï¼ŒæŒ‰è¡Œç´¯åŠ ã€‚</p><p>å•çœ‹è¿™ä¸¤ä¸ªç”¨æ³•çš„å·®åˆ«çš„è¯ï¼Œä½ èƒ½å¯¹æ¯”å‡ºæ¥ï¼Œcount(1)æ‰§è¡Œå¾—è¦æ¯”count(ä¸»é”®id)å¿«ã€‚å› ä¸ºä»å¼•æ“è¿”å›idä¼šæ¶‰åŠåˆ°è§£ææ•°æ®è¡Œï¼Œä»¥åŠæ‹·è´å­—æ®µå€¼çš„æ“ä½œã€‚</p><p><strong>å¯¹äºcount(å­—æ®µ)æ¥è¯´</strong>ï¼š</p><ol>\n<li>\n<p>å¦‚æœè¿™ä¸ªâ€œå­—æ®µâ€æ˜¯å®šä¹‰ä¸ºnot nullçš„è¯ï¼Œä¸€è¡Œè¡Œåœ°ä»è®°å½•é‡Œé¢è¯»å‡ºè¿™ä¸ªå­—æ®µï¼Œåˆ¤æ–­ä¸èƒ½ä¸ºnullï¼ŒæŒ‰è¡Œç´¯åŠ ï¼›</p>\n</li>\n<li>\n<p>å¦‚æœè¿™ä¸ªâ€œå­—æ®µâ€å®šä¹‰å…è®¸ä¸ºnullï¼Œé‚£ä¹ˆæ‰§è¡Œçš„æ—¶å€™ï¼Œåˆ¤æ–­åˆ°æœ‰å¯èƒ½æ˜¯nullï¼Œè¿˜è¦æŠŠå€¼å–å‡ºæ¥å†åˆ¤æ–­ä¸€ä¸‹ï¼Œä¸æ˜¯nullæ‰ç´¯åŠ ã€‚</p>\n</li>\n</ol><p>ä¹Ÿå°±æ˜¯å‰é¢çš„ç¬¬ä¸€æ¡åŸåˆ™ï¼Œserverå±‚è¦ä»€ä¹ˆå­—æ®µï¼ŒInnoDBå°±è¿”å›ä»€ä¹ˆå­—æ®µã€‚</p><p><strong>ä½†æ˜¯count(*)æ˜¯ä¾‹å¤–</strong>ï¼Œå¹¶ä¸ä¼šæŠŠå…¨éƒ¨å­—æ®µå–å‡ºæ¥ï¼Œè€Œæ˜¯ä¸“é—¨åšäº†ä¼˜åŒ–ï¼Œä¸å–å€¼ã€‚count(*)è‚¯å®šä¸æ˜¯nullï¼ŒæŒ‰è¡Œç´¯åŠ ã€‚</p><p>çœ‹åˆ°è¿™é‡Œï¼Œä½ ä¸€å®šä¼šè¯´ï¼Œä¼˜åŒ–å™¨å°±ä¸èƒ½è‡ªå·±åˆ¤æ–­ä¸€ä¸‹å—ï¼Œä¸»é”®idè‚¯å®šéç©ºå•Šï¼Œä¸ºä»€ä¹ˆä¸èƒ½æŒ‰ç…§count(*)æ¥å¤„ç†ï¼Œå¤šä¹ˆç®€å•çš„ä¼˜åŒ–å•Šã€‚</p><p>å½“ç„¶ï¼ŒMySQLä¸“é—¨é’ˆå¯¹è¿™ä¸ªè¯­å¥è¿›è¡Œä¼˜åŒ–ï¼Œä¹Ÿä¸æ˜¯ä¸å¯ä»¥ã€‚ä½†æ˜¯è¿™ç§éœ€è¦ä¸“é—¨ä¼˜åŒ–çš„æƒ…å†µå¤ªå¤šäº†ï¼Œè€Œä¸”MySQLå·²ç»ä¼˜åŒ–è¿‡count(*)äº†ï¼Œä½ ç›´æ¥ä½¿ç”¨è¿™ç§ç”¨æ³•å°±å¯ä»¥äº†ã€‚</p><p>æ‰€ä»¥ç»“è®ºæ˜¯ï¼šæŒ‰ç…§æ•ˆç‡æ’åºçš„è¯ï¼Œcount(å­—æ®µ)&lt;count(ä¸»é”®id)&lt;count(1)â‰ˆcount(*)ï¼Œæ‰€ä»¥æˆ‘å»ºè®®ä½ ï¼Œå°½é‡ä½¿ç”¨count(*)ã€‚</p><h1>å°ç»“</h1><p>ä»Šå¤©ï¼Œæˆ‘å’Œä½ èŠäº†èŠMySQLä¸­è·å¾—è¡¨è¡Œæ•°çš„ä¸¤ç§æ–¹æ³•ã€‚æˆ‘ä»¬æåˆ°äº†åœ¨ä¸åŒå¼•æ“ä¸­count(*)çš„å®ç°æ–¹å¼æ˜¯ä¸ä¸€æ ·çš„ï¼Œä¹Ÿåˆ†æäº†ç”¨ç¼“å­˜ç³»ç»Ÿæ¥å­˜å‚¨è®¡æ•°å€¼å­˜åœ¨çš„é—®é¢˜ã€‚</p><p>å…¶å®ï¼ŒæŠŠè®¡æ•°æ”¾åœ¨Redisé‡Œé¢ï¼Œä¸èƒ½å¤Ÿä¿è¯è®¡æ•°å’ŒMySQLè¡¨é‡Œçš„æ•°æ®ç²¾ç¡®ä¸€è‡´çš„åŸå› ï¼Œæ˜¯<strong>è¿™ä¸¤ä¸ªä¸åŒçš„å­˜å‚¨æ„æˆçš„ç³»ç»Ÿï¼Œä¸æ”¯æŒåˆ†å¸ƒå¼äº‹åŠ¡ï¼Œæ— æ³•æ‹¿åˆ°ç²¾ç¡®ä¸€è‡´çš„è§†å›¾ã€‚</strong>è€ŒæŠŠè®¡æ•°å€¼ä¹Ÿæ”¾åœ¨MySQLä¸­ï¼Œå°±è§£å†³äº†ä¸€è‡´æ€§è§†å›¾çš„é—®é¢˜ã€‚</p><p>InnoDBå¼•æ“æ”¯æŒäº‹åŠ¡ï¼Œæˆ‘ä»¬åˆ©ç”¨å¥½äº‹åŠ¡çš„åŸå­æ€§å’Œéš”ç¦»æ€§ï¼Œå°±å¯ä»¥ç®€åŒ–åœ¨ä¸šåŠ¡å¼€å‘æ—¶çš„é€»è¾‘ã€‚è¿™ä¹Ÿæ˜¯InnoDBå¼•æ“å¤‡å—é’ççš„åŸå› ä¹‹ä¸€ã€‚</p><p>æœ€åï¼Œåˆåˆ°äº†ä»Šå¤©çš„æ€è€ƒé¢˜æ—¶é—´äº†ã€‚</p><p>åœ¨åˆšåˆšè®¨è®ºçš„æ–¹æ¡ˆä¸­ï¼Œæˆ‘ä»¬ç”¨äº†äº‹åŠ¡æ¥ç¡®ä¿è®¡æ•°å‡†ç¡®ã€‚ç”±äºäº‹åŠ¡å¯ä»¥ä¿è¯ä¸­é—´ç»“æœä¸è¢«åˆ«çš„äº‹åŠ¡è¯»åˆ°ï¼Œå› æ­¤ä¿®æ”¹è®¡æ•°å€¼å’Œæ’å…¥æ–°è®°å½•çš„é¡ºåºæ˜¯ä¸å½±å“é€»è¾‘ç»“æœçš„ã€‚ä½†æ˜¯ï¼Œä»å¹¶å‘ç³»ç»Ÿæ€§èƒ½çš„è§’åº¦è€ƒè™‘ï¼Œä½ è§‰å¾—åœ¨è¿™ä¸ªäº‹åŠ¡åºåˆ—é‡Œï¼Œåº”è¯¥å…ˆæ’å…¥æ“ä½œè®°å½•ï¼Œè¿˜æ˜¯åº”è¯¥å…ˆæ›´æ–°è®¡æ•°è¡¨å‘¢ï¼Ÿ</p><p>ä½ å¯ä»¥æŠŠä½ çš„æ€è€ƒå’Œè§‚ç‚¹å†™åœ¨ç•™è¨€åŒºé‡Œï¼Œæˆ‘ä¼šåœ¨ä¸‹ä¸€ç¯‡æ–‡ç« çš„æœ«å°¾ç»™å‡ºæˆ‘çš„å‚è€ƒç­”æ¡ˆã€‚æ„Ÿè°¢ä½ çš„æ”¶å¬ï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ä¸€èµ·é˜…è¯»ã€‚</p><h1>ä¸ŠæœŸé—®é¢˜æ—¶é—´</h1><p>ä¸ŠæœŸæˆ‘ç»™ä½ ç•™çš„é—®é¢˜æ˜¯ï¼Œä»€ä¹ˆæ—¶å€™ä½¿ç”¨alter table t engine=InnoDBä¼šè®©ä¸€ä¸ªè¡¨å ç”¨çš„ç©ºé—´åè€Œå˜å¤§ã€‚</p><p>åœ¨è¿™ç¯‡æ–‡ç« çš„è¯„è®ºåŒºé‡Œé¢ï¼Œå¤§å®¶éƒ½æåˆ°äº†ä¸€ä¸ªç‚¹ï¼Œå°±æ˜¯è¿™ä¸ªè¡¨ï¼Œæœ¬èº«å°±å·²ç»æ²¡æœ‰ç©ºæ´çš„äº†ï¼Œæ¯”å¦‚è¯´åˆšåˆšåšè¿‡ä¸€æ¬¡é‡å»ºè¡¨æ“ä½œã€‚</p><p>åœ¨DDLæœŸé—´ï¼Œå¦‚æœåˆšå¥½æœ‰å¤–éƒ¨çš„DMLåœ¨æ‰§è¡Œï¼Œè¿™æœŸé—´å¯èƒ½ä¼šå¼•å…¥ä¸€äº›æ–°çš„ç©ºæ´ã€‚</p><p>@é£ç¿” æåˆ°äº†ä¸€ä¸ªæ›´æ·±åˆ»çš„æœºåˆ¶ï¼Œæ˜¯æˆ‘ä»¬åœ¨æ–‡ç« ä¸­æ²¡è¯´çš„ã€‚åœ¨é‡å»ºè¡¨çš„æ—¶å€™ï¼ŒInnoDBä¸ä¼šæŠŠæ•´å¼ è¡¨å æ»¡ï¼Œæ¯ä¸ªé¡µç•™äº†1/16ç»™åç»­çš„æ›´æ–°ç”¨ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå…¶å®é‡å»ºè¡¨ä¹‹åä¸æ˜¯â€œæœ€â€ç´§å‡‘çš„ã€‚</p><p>å‡å¦‚æ˜¯è¿™ä¹ˆä¸€ä¸ªè¿‡ç¨‹ï¼š</p><ol>\n<li>\n<p>å°†è¡¨té‡å»ºä¸€æ¬¡ï¼›</p>\n</li>\n<li>\n<p>æ’å…¥ä¸€éƒ¨åˆ†æ•°æ®ï¼Œä½†æ˜¯æ’å…¥çš„è¿™äº›æ•°æ®ï¼Œç”¨æ‰äº†ä¸€éƒ¨åˆ†çš„é¢„ç•™ç©ºé—´ï¼›</p>\n</li>\n<li>\n<p>è¿™ç§æƒ…å†µä¸‹ï¼Œå†é‡å»ºä¸€æ¬¡è¡¨tï¼Œå°±å¯èƒ½ä¼šå‡ºç°é—®é¢˜ä¸­çš„ç°è±¡ã€‚</p>\n</li>\n</ol><p>è¯„è®ºåŒºç•™è¨€ç‚¹èµæ¿ï¼š</p><blockquote>\n<p>@W_T ç­‰åŒå­¦æåˆ°äº†æ•°æ®è¡¨æœ¬èº«ç´§å‡‘çš„æƒ…å†µï¼›<br>\n@undifined æäº†ä¸€ä¸ªå¥½é—®é¢˜ï¼Œ @å¸†å¸†å¸†å¸†å¸†å¸†å¸†å¸† åŒå­¦å›ç­”äº†è¿™ä¸ªé—®é¢˜ï¼›<br>\n@é™ˆé£ @éƒœ @wang chen wen éƒ½æäº†å¾ˆä¸é”™çš„é—®é¢˜ï¼Œå¤§å®¶å¯ä»¥å»çœ‹çœ‹ã€‚</p>\n</blockquote><p></p>","comments":[{"had_liked":false,"id":49584,"user_name":"åŒ…åŒ…up","can_delete":false,"product_type":"c1","uid":1073495,"ip_address":"","ucode":"A6F51A62A8B362","user_header":"https://static001.geekbang.org/account/avatar/00/10/61/57/6f3c81dd.jpg","comment_is_top":true,"comment_ctime":1544723076,"is_pvip":false,"replies":[{"id":"17872","content":"å¥½å‡ ä¸ªåŒå­¦è¯´å¯¹ï¼Œä½ ç¬¬ä¸€ä¸ªæ ‡æ˜å‡ºå¤„ğŸ‘ğŸ¿","user_name":"ä½œè€…å›å¤","comment_id":49584,"uid":"1264162","ip_address":"","utype":1,"ctime":1544750424,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":14,"race_medal":0,"score":"9.2233747699987005e+18","product_id":100020801,"comment_content":"ä»å¹¶å‘ç³»ç»Ÿæ€§èƒ½çš„è§’åº¦è€ƒè™‘ï¼Œåº”è¯¥å…ˆæ’å…¥æ“ä½œè®°å½•ï¼Œå†æ›´æ–°è®¡æ•°è¡¨ã€‚<br><br>çŸ¥è¯†ç‚¹åœ¨ã€Šè¡Œé”åŠŸè¿‡ï¼šæ€ä¹ˆå‡å°‘è¡Œé”å¯¹æ€§èƒ½çš„å½±å“ï¼Ÿã€‹<br>å› ä¸ºæ›´æ–°è®¡æ•°è¡¨æ¶‰åŠåˆ°è¡Œé”çš„ç«äº‰ï¼Œå…ˆæ’å…¥å†æ›´æ–°èƒ½æœ€å¤§ç¨‹åº¦åœ°å‡å°‘äº†äº‹åŠ¡ä¹‹é—´çš„é”ç­‰å¾…ï¼Œæå‡äº†å¹¶å‘åº¦ã€‚","like_count":637,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432670,"discussion_content":"å¥½å‡ ä¸ªåŒå­¦è¯´å¯¹ï¼Œä½ ç¬¬ä¸€ä¸ªæ ‡æ˜å‡ºå¤„ğŸ‘ğŸ¿","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544750424,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1489177,"avatar":"https://static001.geekbang.org/account/avatar/00/16/b9/19/f4ef2c9a.jpg","nickname":"ç§¦ç©†ä¹‹","note":"","ucode":"709C49BFCBB776","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":211015,"discussion_content":"è¦æŠŠæœ€å®¹æ˜“å¼•å‘å†²çªçš„é”å¾€åæ”¾","likes_number":32,"is_delete":false,"is_hidden":false,"ctime":1584799546,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1210505,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLUz2nCCzSKibFJibtoAJXo2lP3tmeRUe2EqmQr4kYbCv5q4eexhfN3XicynSx5uZ5EREumRwZxqHjGw/132","nickname":"å°è·³è›™","note":"","ucode":"6C4DADD8414F9D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":223687,"discussion_content":"æˆ‘ä¹Ÿæƒ³åˆ°äº†ï¼Œä½†æ˜¯æˆ‘çœ‹çš„æ™šã€‚éš¾å—","likes_number":20,"is_delete":false,"is_hidden":false,"ctime":1586246060,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":4,"child_discussions":[{"author":{"id":1254801,"avatar":"https://static001.geekbang.org/account/avatar/00/13/25/91/46600294.jpg","nickname":"çŒ´å“¥ä¸€ä¸€ cium","note":"","ucode":"38EC64F8D1A0B4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1210505,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLUz2nCCzSKibFJibtoAJXo2lP3tmeRUe2EqmQr4kYbCv5q4eexhfN3XicynSx5uZ5EREumRwZxqHjGw/132","nickname":"å°è·³è›™","note":"","ucode":"6C4DADD8414F9D","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":312633,"discussion_content":"é‚£æˆ‘ç»™ä½ èµä¸€ä¸ªå§ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1602753954,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":223687,"ip_address":""},"score":312633,"extra":""},{"author":{"id":1058015,"avatar":"https://static001.geekbang.org/account/avatar/00/10/24/df/645f8087.jpg","nickname":"Yayu","note":"","ucode":"5E7842458D8229","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1210505,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLUz2nCCzSKibFJibtoAJXo2lP3tmeRUe2EqmQr4kYbCv5q4eexhfN3XicynSx5uZ5EREumRwZxqHjGw/132","nickname":"å°è·³è›™","note":"","ucode":"6C4DADD8414F9D","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":324236,"discussion_content":"å°è·³è›™çœŸæ£’","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1605076161,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":223687,"ip_address":""},"score":324236,"extra":""},{"author":{"id":1251835,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/oiboHpgukqib2ASXeU0H7W1ibgRMqyrNE5KaWicicPEDy0ia8YdoneZAtvW0EFIiaqZJp2OS4dnweOgXaJ5EjJicicEqic5A/132","nickname":"è¦ƒé’°æ ‹","note":"","ucode":"19080C463658EF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1210505,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLUz2nCCzSKibFJibtoAJXo2lP3tmeRUe2EqmQr4kYbCv5q4eexhfN3XicynSx5uZ5EREumRwZxqHjGw/132","nickname":"å°è·³è›™","note":"","ucode":"6C4DADD8414F9D","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":407384,"discussion_content":"å¹¶åˆ—ç¬¬ä¸€","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1634997173,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":223687,"ip_address":""},"score":407384,"extra":""}]},{"author":{"id":1143536,"avatar":"https://static001.geekbang.org/account/avatar/00/11/72/f0/abb7bfe3.jpg","nickname":"Mcnulty","note":"","ucode":"3DD71D84B58A16","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":377109,"discussion_content":"æ’å…¥æ•°æ®ä¹Ÿä¼šè·å–é—´éš™é”ï¼Œéœ€è¦è¯„ä¼°é—´éš™é”å’Œè¡Œé”çš„åŠ é”æ—¶é—´","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1622510454,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1295609,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJRFRX8kNzNet7FibNvtavbVpAwK09AhIhrib9k762qWtH6mre8ickP7hM5mgZC4ytr8NnmIfmAhxMSQ/132","nickname":"è€å¤§ä¸å°","note":"","ucode":"35BCDD3CB13467","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":586434,"discussion_content":"ä»å¦å¤–ä¸€ä¸ªè§’åº¦æ¥æƒ³ï¼Œä¹Ÿæ˜¯å…ˆæ’å…¥åæ›´æ–°ã€‚å› ä¸ºæ›´æ–°æ˜¯å…ˆåˆ é™¤å†æ’å…¥ï¼Œæ“ä½œæ¯”æ’å…¥å¤šï¼Œæ‰€ä»¥åº”è¯¥æŠŠæ›´æ–°æ”¾åˆ°æœ€åã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1662210558,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1162562,"avatar":"https://static001.geekbang.org/account/avatar/00/11/bd/42/c7120b7f.jpg","nickname":"äººä¸å­¦ä¹ æ˜¯ğŸ·","note":"","ucode":"6B8979F46706FF","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585196,"discussion_content":"æœ€å®¹æ˜“é€ æˆå†²çªçš„æ“ä½œï¼Œå°½é‡é è¿‘äº‹åŠ¡æäº¤æ¥åš","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661392990,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2032894,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/04/fe/60db4684.jpg","nickname":"èœæ³¢","note":"","ucode":"DA7DED66709FA2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":396066,"discussion_content":"æ˜¯çš„ï¼Œè¦æŠŠæœ€å®¹æ˜“å¼•èµ·å†²çªçš„é”å¾€åæ”¾","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632388446,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1255277,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLDVXsv6JOOficLK07867AkAb21eoG5KBgYFmwhMXKJooU5B6iaIZwyDxExicokVQSiaKEwZ4qPicqVFcg/132","nickname":"æ‹¼yinä¸–ç•Œ","note":"","ucode":"9571428A12B72A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":349797,"discussion_content":"ç‰›é€¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1613553381,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1810156,"avatar":"","nickname":"poordickey","note":"","ucode":"2A436EC813AF97","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":334381,"discussion_content":"è¿™ä¸ªæƒ…å†µä¼šä¸ä¼šå¼•èµ·å¤§é‡æ­»é”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607832721,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1015189,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7d/95/dd73022c.jpg","nickname":"æˆ‘æ˜¯æ›¾ç»é‚£ä¸ªå°‘å¹´","note":"","ucode":"9F02F7FF147D14","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1810156,"avatar":"","nickname":"poordickey","note":"","ucode":"2A436EC813AF97","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":334731,"discussion_content":"ä¸ä¼šæ­»é”ï¼Œåªä¼šç­‰å½“æŒæœ‰é”çš„é‚£ä¸ªäº‹åŠ¡ï¼Œæ­»é”æ˜¯å› ä¸ºäº’ç›¸ä¾èµ–æŒæœ‰çš„èµ„æºï¼Œå°±æ˜¯æˆ‘ç­‰ä½ é‡Šæ”¾èµ„æºï¼Œä½ ç­‰æˆ‘é‡Šæ”¾èµ„æºã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1607953473,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":334381,"ip_address":""},"score":334731,"extra":""}]}]},{"had_liked":false,"id":50064,"user_name":"å€ªå¤§äºº","can_delete":false,"product_type":"c1","uid":1193052,"ip_address":"","ucode":"4798D69F3E86FB","user_header":"https://static001.geekbang.org/account/avatar/00/12/34/5c/6b4757a0.jpg","comment_is_top":true,"comment_ctime":1544856594,"is_pvip":false,"replies":[{"id":"18012","content":"è¿™äº›éƒ½ä¸å«å¹»è¯»ï¼Œå¹»è¯»çš„æ„æ€æ˜¯â€œç”¨ä¸€ä¸ªäº‹åŠ¡é‡Œé¢ï¼Œåä¸€ä¸ªè¯·æ±‚çœ‹åˆ°çš„æ¯”ä¹‹å‰ç›¸åŒè¯·æ±‚çœ‹åˆ°çš„ï¼Œå¤šäº†è®°å½•å‡ºæ¥â€ã€‚<br>æ”¹äº†ä¸ç®—<br><br>å¤§å®¶å…³æ³¨ä¸€ä¸‹è¿™ä¸ªé—®é¢˜ã€‚<br>å¥½é—®é¢˜<br>","user_name":"ä½œè€…å›å¤","comment_id":50064,"uid":"1264162","ip_address":"","utype":1,"ctime":1544869444,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":15,"race_medal":0,"score":"9.2233723089825997e+18","product_id":100020801,"comment_content":"çœ‹åˆ°æœ‰åŒå­¦è¯´ä¼šè¯Aæ˜¯å¹»è¯»ï¼Œå…¶å®å›¾ä¸€çš„ä¼šè¯Bæ‰æ˜¯å¹»è¯»å§ï¼Ÿ","like_count":64,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432861,"discussion_content":"è¿™äº›éƒ½ä¸å«å¹»è¯»ï¼Œå¹»è¯»çš„æ„æ€æ˜¯â€œç”¨ä¸€ä¸ªäº‹åŠ¡é‡Œé¢ï¼Œåä¸€ä¸ªè¯·æ±‚çœ‹åˆ°çš„æ¯”ä¹‹å‰ç›¸åŒè¯·æ±‚çœ‹åˆ°çš„ï¼Œå¤šäº†è®°å½•å‡ºæ¥â€ã€‚\næ”¹äº†ä¸ç®—\n\nå¤§å®¶å…³æ³¨ä¸€ä¸‹è¿™ä¸ªé—®é¢˜ã€‚\nå¥½é—®é¢˜\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544869444,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2176736,"avatar":"https://static001.geekbang.org/account/avatar/00/21/36/e0/2d0b4d64.jpg","nickname":"Paranoia Â°","note":"","ucode":"5FC91C698FA145","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":307821,"discussion_content":"å¹»è¯»æ˜¯åè¯»å–æ¯”ä¹‹å‰å¤šäº†æ•°æ®ï¼ˆinsertï¼‰ï¼Œæ•°æ®æ”¹å˜äº†åˆ é™¤å±äºä¸å¯é‡å¤è¯»ï¼ˆupdateå’Œdeleteï¼‰,rrä½¿ç”¨é—´éš™é”è§£å†³äº†å¹»è¯»ï¼Œmvccæ„Ÿè§‰æ˜¯è§£å†³ä¸å¯é‡å¤è¯»çš„","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1600766265,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1014441,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7a/a9/62a71245.jpg","nickname":"latecomer","note":"","ucode":"8D17798AE7D0AF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":171409,"discussion_content":"åŒä¸€ä¸ªäº‹åŠ¡é‡Œé¢ï¼Œåä¸€ä¸ªè¯·æ±‚çœ‹åˆ°çš„æ¯”ä¹‹å‰å°‘äº†è®°å½•ç®—å¹»è¯»ä¹ˆï¼Ÿå¾ˆå¤šåœ°æ–¹è®²åˆ°å¹»è¯»éƒ½å·²å¢åŠ è®°å½•ä¸ºä¾‹ï¼Œæ²¡è°ˆåˆ°è¿‡è®°å½•åˆ é™¤çš„æƒ…å†µã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581696094,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":12,"child_discussions":[{"author":{"id":1335293,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKR3ibELhjgVicCNShZCBwvaDxibnzibggG4wUzVkS2mkDxUBZyIs87nDEdJ7PiahJBVoZcuhQ84RxAziag/132","nickname":"å‘¨æ²»æ…§","note":"","ucode":"7D56C4E66BEE17","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1014441,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7a/a9/62a71245.jpg","nickname":"latecomer","note":"","ucode":"8D17798AE7D0AF","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":187617,"discussion_content":"åˆ é™¤å’Œå¢åŠ éƒ½æ˜¯å¹»è¯»,åœ¨rrä¸‹æ˜¯ä¸ä¼šå­˜åœ¨å¹»è¯»çš„å› ä¸ºæœ‰é—´éš™é”,é—´éš™é—´æ’å…¥ä¸äº†æ•°æ®","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1582756495,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":171409,"ip_address":""},"score":187617,"extra":""},{"author":{"id":1324986,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/sj5FNib6wGL6lZoS9ZlhCyWehRmByToksrJicgJia05iaGEcSp9uthmJKlXuMGn1CUBicfdpj4XoMsgyJibquAGwIqIw/132","nickname":"è‰¾ç‘å…‹","note":"","ucode":"3886599F102FE7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1335293,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKR3ibELhjgVicCNShZCBwvaDxibnzibggG4wUzVkS2mkDxUBZyIs87nDEdJ7PiahJBVoZcuhQ84RxAziag/132","nickname":"å‘¨æ²»æ…§","note":"","ucode":"7D56C4E66BEE17","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":213556,"discussion_content":"rrä¸‹æ²¡æœ‰å®Œå…¨è§£å†³å¹»è¯»å§ï¼Œä¹‹å‰çš„æ–‡ç« é‡Œä¸¾è¿‡ä¾‹å­ï¼Œçº¿ç¨‹AæŸ¥è¯¢æ•°æ®ï¼Œçº¿ç¨‹Bæ’å…¥æ•°æ®4ï¼Œçº¿ç¨‹Aå†æ’å…¥æ•°æ®åæŠ¥é”™ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585105310,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":187617,"ip_address":""},"score":213556,"extra":""},{"author":{"id":1897833,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/f5/69/84987a60.jpg","nickname":"Nevermore","note":"","ucode":"CAAD4D2F285890","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1324986,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/sj5FNib6wGL6lZoS9ZlhCyWehRmByToksrJicgJia05iaGEcSp9uthmJKlXuMGn1CUBicfdpj4XoMsgyJibquAGwIqIw/132","nickname":"è‰¾ç‘å…‹","note":"","ucode":"3886599F102FE7","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":214944,"discussion_content":"çº¿ç¨‹aæŸ¥è¯¢çš„æ—¶å€™ç”¨for updateå³å¯ï¼Œä¼šå¯¹å¯èƒ½insertçš„ä½ç½®åŠ ä¸Šé—´éš™é”ï¼Œé˜²æ­¢äº§ç”Ÿæ–°çš„è®°å½•ã€‚\næ‰€ä»¥å¦‚æœæ˜¯å¿«ç…§è¯»ç¡®å®æ˜¯æ²¡æœ‰è§£å†³ä½ è¯´çš„é‚£ç§æƒ…å†µï¼Œä½†å¦‚æœæ˜¯å½“å‰è¯»ï¼ˆåŠ for updateï¼‰å°±æ˜¯å®Œå…¨è§£å†³äº†å¹»è¯»","likes_number":7,"is_delete":false,"is_hidden":false,"ctime":1585251925,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":213556,"ip_address":""},"score":214944,"extra":""}]}]},{"had_liked":false,"id":49923,"user_name":"æœç„¶å¦‚æ­¤","can_delete":false,"product_type":"c1","uid":1210003,"ip_address":"","ucode":"C7543BD0A67505","user_header":"https://static001.geekbang.org/account/avatar/00/12/76/93/c78a132a.jpg","comment_is_top":true,"comment_ctime":1544789955,"is_pvip":false,"replies":[{"id":"18023","content":"1. å¥½é—®é¢˜ï¼Œä¸ä¼šè¿˜æ˜¯æ²¡è§£å†³æˆ‘ä»¬è¯´çš„ä¸€è‡´æ€§é—®é¢˜ã€‚å¦‚æœåœ¨3ã€4ä¹‹é—´æ’å…¥äº† Session Bçš„é€»è¾‘å‘¢<br><br>2. æˆ‘ä¼°è®¡å°±æ˜¯å¯åŠ¨äº‹åŠ¡ï¼ˆæ‰§è¡Œbegin),ç»“æŸæ—¶æäº¤ï¼ˆæ‰§è¡Œcommit)å§ï¼Œæ²¡æœ‰äº†è§£è¿‡æ‰€æœ‰æ¡†æ¶ï¼Œä¸ç¡®å®šå“ˆ","user_name":"ä½œè€…å›å¤","comment_id":49923,"uid":"1264162","ip_address":"","utype":1,"ctime":1544876376,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":15,"race_medal":0,"score":"9.2233721414787994e+18","product_id":100020801,"comment_content":"ä¸€ã€è¯·é—®è®¡æ•°ç”¨è¿™ä¸ªMySQL+redisæ–¹æ¡ˆå¦‚ä½•ï¼š<br>1.å¼€å¯äº‹åŠ¡ï¼ˆç¨‹åºä¸­çš„äº‹åŠ¡ï¼‰<br>2.MySQLæ’å…¥æ•°æ®<br>3.åŸå­æ›´æ–°redisè®¡æ•°<br>4.å¦‚æœredisæ›´æ–°æˆåŠŸæäº¤äº‹åŠ¡ï¼Œå¦‚æœredisæ›´æ–°å¤±è´¥å›æ»šäº‹åŠ¡ã€‚<br><br>äºŒã€.netå’Œjavaç¨‹åºä»£ç çš„äº‹åŠ¡å’ŒMySQLäº‹åŠ¡æ˜¯ä»€ä¹ˆå…³ç³»ï¼Œæœ‰ä»€ä¹ˆç›¸å…³æ€§ï¼Ÿ","like_count":25,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432800,"discussion_content":"1. å¥½é—®é¢˜ï¼Œä¸ä¼šè¿˜æ˜¯æ²¡è§£å†³æˆ‘ä»¬è¯´çš„ä¸€è‡´æ€§é—®é¢˜ã€‚å¦‚æœåœ¨3ã€4ä¹‹é—´æ’å…¥äº† Session Bçš„é€»è¾‘å‘¢\n\n2. æˆ‘ä¼°è®¡å°±æ˜¯å¯åŠ¨äº‹åŠ¡ï¼ˆæ‰§è¡Œbegin),ç»“æŸæ—¶æäº¤ï¼ˆæ‰§è¡Œcommit)å§ï¼Œæ²¡æœ‰äº†è§£è¿‡æ‰€æœ‰æ¡†æ¶ï¼Œä¸ç¡®å®šå“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544876376,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1644104,"avatar":"https://static001.geekbang.org/account/avatar/00/19/16/48/09493874.jpg","nickname":"èŒ¶æ²¡å–å®Œ","note":"","ucode":"D72D88C42A1258","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":307982,"discussion_content":"æœ€å…³é”®çš„åœ°æ–¹æ˜¯ï¼šredisçš„æ›´æ–°å’Œmysqlçš„æ’å…¥ï¼Œä¸æ˜¯åŸå­çš„ã€‚è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥åŠ åˆ†å¸ƒå¼é”ï¼Œä½†æ˜¯è¿™æ ·å¹¶è¡Œæ•°å°±æ˜¯1äº†ï¼Œéå¸¸å½±å“æ€§èƒ½","likes_number":11,"is_delete":false,"is_hidden":false,"ctime":1600820888,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1780797,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/2c/3d/0bd58aa4.jpg","nickname":"Em","note":"","ucode":"32012A5C603C8A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1986739,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/50/b3/9269cd59.jpg","nickname":"LWD","note":"","ucode":"DDA444DB113C01","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":576984,"discussion_content":"æ‰€ä»¥è¦ä¿è¯åŸå­æ€§ä¸èƒ½ç›´æ¥è®©redisç«‹å³å¯è§....","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655877230,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":557183,"ip_address":""},"score":576984,"extra":""}]},{"author":{"id":1104997,"avatar":"https://static001.geekbang.org/account/avatar/00/10/dc/65/61e5b176.jpg","nickname":"å…«æœˆæŸ’ç§‹å¶åˆå‡‰","note":"","ucode":"615AF90D16A0E2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":215621,"discussion_content":"å’¸é±¼å°±æ˜¯è¿™æ ·å®ç°çš„,å®šæ—¶çš„å°†æ•°æ®å…¨é‡åŒæ­¥åˆ°ç¦»çº¿åº“ä¸­è¿›è¡Œæ‰¹å¤„ç†ï¼Œå®æ—¶åœ¨çº¿ä¸Šå¯¹å¢é‡æ•°æ®ä¿æŒç»Ÿè®¡ï¼Œæœ€ç»ˆåˆå¹¶ä¸¤è€…çš„ç»“æœå¾—åˆ°ç²¾å‡†è®¡æ•°å€¼\nhttp://www.itpub.net/2019/09/27/3252/","likes_number":11,"is_delete":false,"is_hidden":false,"ctime":1585362434,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1970443,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIx1V1QAxC4NHaxYZGyuibBN8lcURJWc5nrnO4yic1kxnDemYV2FJGialf47kYX9qtDnZZOfe1SJeLicg/132","nickname":"lleft","note":"","ucode":"D573EB509455AE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1104997,"avatar":"https://static001.geekbang.org/account/avatar/00/10/dc/65/61e5b176.jpg","nickname":"å…«æœˆæŸ’ç§‹å¶åˆå‡‰","note":"","ucode":"615AF90D16A0E2","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":371400,"discussion_content":"åœºæ™¯ä¸ä¸€æ ·å§","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1619755457,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":215621,"ip_address":""},"score":371400,"extra":""}]},{"author":{"id":2035912,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/10/c8/325f1463.jpg","nickname":"å«ç»ƒ","note":"","ucode":"ABAFDFE0FAFEA2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":287606,"discussion_content":"ä½ è¯´çš„åŸå­æ›´æ–°åªèƒ½ä¿è¯å…±äº«å˜é‡çš„å¯è§æ€§ï¼Œæ¯”å¦‚redisè®¡æ•°ï¼Œä½†æ˜¯ç¨‹åºå¹¶å‘ï¼Œä¸¤ä¸ªsessionå¹¶å‘ï¼Œæ•°æ®çš„ä¸€è‡´æ€§æ²¡åŠæ³•ä¿éšœï¼Œä¹Ÿæ˜¯è€å¸ˆé‚£å¥è¯ï¼Œmysqlå’Œredisç»„æˆçš„åˆ†å¸ƒå¼æ²¡åŠæ³•è¾¾æˆä¸€è‡´æ€§","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1593490914,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1033578,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c5/6a/7f858f1f.jpg","nickname":"ç™½ä¸åƒ","note":"","ucode":"F019914D8819C2","race_medal":4,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":380581,"discussion_content":"æ¡†æ¶æœ¬èº«ä¸æä¾›äº‹ç‰©ï¼Œæ‰€æœ‰æ¡†æ¶çš„äº‹ç‰©éƒ½æ˜¯æ•°æ®åº“æœ¬èº«çš„äº‹ç‰©","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1624591181,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2562181,"avatar":"https://static001.geekbang.org/account/avatar/00/27/18/85/83ac977e.jpg","nickname":"åŠå¹´ 2å·","note":"","ucode":"7F23C4532A5513","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":535446,"discussion_content":"session Aè¿˜æ²¡æäº¤äº‹åŠ¡ï¼Œsession Bå°±è¯»å–åˆ°äº†è®¡æ•°ï¼Œé€ æˆä¸ä¸€è‡´é—®é¢˜","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1638444838,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2219318,"avatar":"https://static001.geekbang.org/account/avatar/00/21/dd/36/d51828e5.jpg","nickname":"é±¼é¦™","note":"","ucode":"CA62DE1768F551","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":545517,"discussion_content":"è®¡æ•°çš„å¼‚å¸¸åœºæ™¯å½±å“äº†æ­£å¸¸ä¸šåŠ¡ï¼Œä½ è§‰çš„åˆç†å—ï¼Œä»è®¾è®¡çš„è§’åº¦ä¸Šæ¥çœ‹ï¼Œè®¡æ•°å’Œä¸šåŠ¡é€»è¾‘åº”è¯¥å®Œå…¨è§£è€¦æ‰å¯¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641980565,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1502074,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKb5BzdGZbSYHxq88kicdDtBh0yBtJpDAD81wruIsTsLdBysDZztrm8tYb4mBYvAI1ZE4lorKuvmgw/132","nickname":"java_lunsong","note":"","ucode":"180EEE6C8BCAA8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":312294,"discussion_content":"å°±æ˜¯redisæ›´æ–°æˆåŠŸäº†ï¼Œæäº¤äº‹åŠ¡æœŸé—´ï¼Œæœ‰å…¶ä»–sessionæ“ä½œï¼Œæ˜¯æ²¡åŠæ³•æ§åˆ¶redisçš„å¯è§æ€§çš„ï¼Œä¹Ÿå°±å›åˆ°äº†å…ˆå†™redisï¼Œå†å†™mysqlçš„é‚£ç§æƒ…å†µ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602655652,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1371646,"avatar":"https://static001.geekbang.org/account/avatar/00/14/ed/fe/83da25ef.jpg","nickname":"å¹¸ç¦ç”±è‡ªå·±å†³å®š","note":"","ucode":"03103F36AE0E3E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":311043,"discussion_content":"æœç„¶å¦‚æ­¤","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602201197,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1622448,"avatar":"https://static001.geekbang.org/account/avatar/00/18/c1/b0/b52d9ade.jpg","nickname":"è‹å½§","note":"","ucode":"C016B28DF7449C","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301331,"discussion_content":"MySQLäº‹åŠ¡å’Œredisä¸å†²çª","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598491270,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1793962,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/5f/aa/63e641c1.jpg","nickname":"H","note":"","ucode":"04D7D030245E27","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":289896,"discussion_content":"æ²¡å¤ªæ‡‚ã€‚äº‹åŠ¡ä¸æ˜¯å¯ä»¥ä¿è¯å…¶ä»–äº‹åŠ¡ä¸å¯è§å—ï¼Œæ–¹ä¾¿è§£æä¸€ä¸‹å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594261203,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1970443,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIx1V1QAxC4NHaxYZGyuibBN8lcURJWc5nrnO4yic1kxnDemYV2FJGialf47kYX9qtDnZZOfe1SJeLicg/132","nickname":"lleft","note":"","ucode":"D573EB509455AE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1793962,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/5f/aa/63e641c1.jpg","nickname":"H","note":"","ucode":"04D7D030245E27","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":371396,"discussion_content":"å¥¹è¯´çš„äº‹åŠ¡æ˜¯ç¨‹åºçš„äº‹åŠ¡ï¼Œè·Ÿmysqlä¸­çš„äº‹åŠ¡ä¸åŒï¼Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619754244,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":289896,"ip_address":""},"score":371396,"extra":""},{"author":{"id":1033578,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c5/6a/7f858f1f.jpg","nickname":"ç™½ä¸åƒ","note":"","ucode":"F019914D8819C2","race_medal":4,"user_type":1,"is_pvip":true},"reply_author":{"id":1970443,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIx1V1QAxC4NHaxYZGyuibBN8lcURJWc5nrnO4yic1kxnDemYV2FJGialf47kYX9qtDnZZOfe1SJeLicg/132","nickname":"lleft","note":"","ucode":"D573EB509455AE","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":380583,"discussion_content":"ç¨‹åºæœ¬èº«æ˜¯æ²¡æœ‰äº‹åŠ¡çš„ï¼Œå°±åƒspringäº‹åŠ¡å…¶å®å°±æ˜¯åˆ©ç”¨aopå›æ»šæ•°æ®åº“çš„äº‹åŠ¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1624591264,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":371396,"ip_address":""},"score":380583,"extra":""}]}]},{"had_liked":false,"id":50072,"user_name":"å‘æ¡æ©™å­ ã€‚","can_delete":false,"product_type":"c1","uid":1259218,"ip_address":"","ucode":"ED076F4534FFED","user_header":"https://static001.geekbang.org/account/avatar/00/13/36/d2/c7357723.jpg","comment_is_top":true,"comment_ctime":1544859139,"is_pvip":false,"replies":[{"id":"18010","content":"1. å¦‚æœæœ‰ç´¢å¼•ç”¨åˆ°è¿™ä¸ªå­—æ®µçš„è¯ï¼Œæ¯”è¾ƒå¤§å¯èƒ½ä¼šç”¨åˆ°è¿™ä¸ªç´¢å¼•ï¼Œæ¯”ä¸»é”®ç´¢å¼•å°<br><br>2. ç´¢å¼•å­—æ®µå°±ç®—æ˜¯NULLï¼Œä¸Šé¢çš„idä¹Ÿä¸æ˜¯çš„<br><br>3.  è¿›äº†Buffer pool çš„åŸå› å§<br><br>4. å—¯ï¼Œrcç”¨å¾—æŒºå¤šçš„ï¼Œä½†æ˜¯åŸå› å¯èƒ½åªæ˜¯å› ä¸ºâ€œä»¥å‰æ˜¯è¿™ä¹ˆç”¨çš„â€ã€‚ ä½¿ç”¨rcå¯èƒ½æœ‰é—®é¢˜ï¼Œä¹Ÿå¯èƒ½æ²¡é—®é¢˜ã€‚ä½†æ˜¯æˆ‘è§‰å¾—DBAä¸çŸ¥é“ä¸ºä»€ä¹ˆè¿™ä¹ˆé€‰ï¼Œè¿™ä¸ªæ˜¯é—®é¢˜ã€‚<br><br>rcæœ¬èº«çš„é—®é¢˜å…¶å®å‰é¢æˆ‘ä»¬è¯´è¿‡ä¸€äº›ï¼Œæ¯”å¦‚ä¸æ˜¯ä¸€è‡´æ€§è¯»ã€‚åé¢ä¹Ÿä¼šæœ‰æ–‡ç« è¯´åˆ°ã€‚","user_name":"ä½œè€…å›å¤","comment_id":50072,"uid":"1264162","ip_address":"","utype":1,"ctime":1544869223,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":14,"race_medal":0,"score":"9.2233721157089997e+18","product_id":100020801,"comment_content":"è€å¸ˆ ï¼Œæˆ‘è¿™è¾¹æœ‰å‡ ä¸ªé—®é¢˜  ï¼š<br><br>1. çœ‹åˆ°è€å¸ˆå›å¤è¯„è®ºè¯´ count(id) ä¹Ÿæ˜¯èµ°æ™®é€šç´¢å¼• ï¼Œé‚£æ˜¯ä¸æ˜¯ä¹Ÿç®—æ˜¯ä¼˜åŒ–äº† ï¼Œ æˆ‘ä»¥ä¸º count(å­—æ®µ) æ˜¯èµ°çš„èšé›†ç´¢å¼• ã€‚è€å¸ˆçš„æ„æ€æ˜¯ count(å­—æ®µ) æ˜¯èµ°äºŒçº§ç´¢å¼•ï¼Œä½†æ˜¯ä¸ä¸€å®šæ˜¯æ•°æ®æœ€å°‘çš„ç´¢å¼•æ ‘çš„æ„æ€æ˜¯ä¹ˆ <br><br>2. count(*) çš„è¯ï¼Œ innodb è¿˜ä¼šæœ‰å–æ•°åˆ¤ç©ºè¿™æ ·çš„åˆ¤æ–­é€»è¾‘ä¹ˆ ï¼Œè¿˜æ˜¯ç›´æ¥å–è¡Œæ•° +1 äº† ï¼Œ è¿˜æ˜¯æŒ‰æ‰€å–ç´¢å¼•ç±»å‹åˆ†æƒ…å†µã€‚ å…è®¸ä¸º null çš„ç´¢å¼•æ˜¯ä¸æ˜¯è¡Œæ•°æ¯”è¾ƒå°‘ï¼Œ å–çš„æ€»æ•°ä¼šä¸ä¼šæœ‰é—®é¢˜å‘¢<br><br>3.  æˆ‘è¿™è¾¹è¯•äº†ä¸€ä¸‹ ï¼Œ åº“é‡Œæ€»å…± 30w æ•°æ® ã€‚ ç¬¬ä¸€æ¬¡ç”¨ count(*) æ˜¯ 120å¤šms , ç¬¬äºŒæ¬¡å°±æ˜¯ 60å¤š ms ã€‚ ç¬¬ä¸‰æ¬¡ç”¨äº† count(1) ï¼Œä¹Ÿæ˜¯60å¤šms ã€‚ è¯·é—® count(*) è¿™ä¸¤æ¬¡çš„å‰åæ—¶é—´å·®æ˜¯ä»€ä¹ˆåŸå› ï¼Œä¹Ÿä¼šèµ°ç¼“å­˜ ï¼Ÿ<br><br>4. å¦ä¸€ä¸ªé—®é¢˜æ˜¯ä¸€ä¸ªé¢˜å¤–è¯ ï¼Œæˆ‘çœ‹è€å¸ˆçš„ä¾‹å­äº‹åŠ¡çº§åˆ«åº”è¯¥éƒ½æ˜¯ rr ã€‚ æˆ‘å¶ç„¶çœ‹åˆ°æˆ‘ä»¬å…¬å¸äº‹åŠ¡éš”ç¦»çº§åˆ«æ˜¯  rc ã€‚ æˆ‘æ¯”è¾ƒæƒŠè®¶ï¼Œå°±å»é—® DBA ä¸ºä»€ä¹ˆæ˜¯ rc è€Œä¸æ˜¯é»˜è®¤çš„ rr ã€‚ å¥¹è¯´ä¸€èˆ¬éƒ½æ˜¯ç”¨çš„ rc  ï¼Œæˆ‘æƒ³é—®ç°åœ¨å…¬å¸ä¸€èˆ¬éƒ½æ˜¯ rc ä¹ˆï¼Œ è¯·é—®è€å¸ˆç°åœ¨ç”¨çš„éš”ç¦»çº§åˆ«æ˜¯ä»€ä¹ˆ ï¼Ÿï¼Ÿ åœ¨æˆ‘çš„å°è±¡é‡Œ ï¼Œrr ä¿è¯äº‹åŠ¡çš„éš”ç¦»æ€§ä¼šæ›´å¥½ä¸€äº›å§ ã€‚ æˆ‘google äº†ä¸€ä¸‹ï¼Œ rc ä¼šä¸ä¼šåœ¨æŸäº›åœºæ™¯ä¸‹å‡ºç°ä¸€äº›é—®é¢˜ï¼Œä½†æ˜¯æ²¡æœ‰æŸ¥å‡ºæ¥ç›¸å…³ç»“æœã€‚è€å¸ˆèƒ½ä¸èƒ½è®²è§£ä¸€ä¸‹ï¼Œrc çš„è¯ä¼šåœ¨å“ªäº›åœºæ™¯ä¸‹ä¼šè¸©å‘ä¹ˆ ã€‚ ï¼ˆæˆ‘ä¹‹å‰ç ä»£ç éƒ½æ˜¯æŒ‰ç…§ rr çº§åˆ«ä¸‹çš„æ€ç»´ç çš„ä»£ç ï¼‰","like_count":19,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432864,"discussion_content":"1. å¦‚æœæœ‰ç´¢å¼•ç”¨åˆ°è¿™ä¸ªå­—æ®µçš„è¯ï¼Œæ¯”è¾ƒå¤§å¯èƒ½ä¼šç”¨åˆ°è¿™ä¸ªç´¢å¼•ï¼Œæ¯”ä¸»é”®ç´¢å¼•å°\n\n2. ç´¢å¼•å­—æ®µå°±ç®—æ˜¯NULLï¼Œä¸Šé¢çš„idä¹Ÿä¸æ˜¯çš„\n\n3.  è¿›äº†Buffer pool çš„åŸå› å§\n\n4. å—¯ï¼Œrcç”¨å¾—æŒºå¤šçš„ï¼Œä½†æ˜¯åŸå› å¯èƒ½åªæ˜¯å› ä¸ºâ€œä»¥å‰æ˜¯è¿™ä¹ˆç”¨çš„â€ã€‚ ä½¿ç”¨rcå¯èƒ½æœ‰é—®é¢˜ï¼Œä¹Ÿå¯èƒ½æ²¡é—®é¢˜ã€‚ä½†æ˜¯æˆ‘è§‰å¾—DBAä¸çŸ¥é“ä¸ºä»€ä¹ˆè¿™ä¹ˆé€‰ï¼Œè¿™ä¸ªæ˜¯é—®é¢˜ã€‚\n\nrcæœ¬èº«çš„é—®é¢˜å…¶å®å‰é¢æˆ‘ä»¬è¯´è¿‡ä¸€äº›ï¼Œæ¯”å¦‚ä¸æ˜¯ä¸€è‡´æ€§è¯»ã€‚åé¢ä¹Ÿä¼šæœ‰æ–‡ç« è¯´åˆ°ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544869223,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1110677,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f2/95/538d0348.jpg","nickname":"wrp000000","note":"","ucode":"4860119F2276FE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":342468,"discussion_content":"DBAä¸çŸ¥é“ä¸ºä»€ä¹ˆè¿™ä¹ˆé€‰ï¼Œè¿™ä¸ªæ˜¯é—®é¢˜  è¿™å¥è¯è¯´å¾—å¥½","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1610690190,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1071601,"avatar":"https://static001.geekbang.org/account/avatar/00/10/59/f1/8909b9e0.jpg","nickname":"å‰æ­ªå‰","note":"","ucode":"2C1AFC6335FF0E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":309300,"discussion_content":"DBAæ˜¯å¥¹ï¼Ÿ","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1601255492,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2033067,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/pbXZL4jicmXCSF7jIDTibuQqGic84SKCMotQjWSh70B7iaicTOI1RTac8ZxrxEqiapIIbJpXyJk7KHbusr6KqoPQY1pg/132","nickname":"æ°å¤«Â·ç‹ç›–èŒ¨","note":"","ucode":"FF4C49D98885AB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1071601,"avatar":"https://static001.geekbang.org/account/avatar/00/10/59/f1/8909b9e0.jpg","nickname":"å‰æ­ªå‰","note":"","ucode":"2C1AFC6335FF0E","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":332928,"discussion_content":"ä½ è¿™æ˜¯ä¸ªå¥½é—®é¢˜","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1607396821,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":309300,"ip_address":""},"score":332928,"extra":""}]},{"author":{"id":2753834,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/05/2a/cfbcb0b2.jpg","nickname":"Donkey","note":"","ucode":"3DB4DFF6D99035","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":558302,"discussion_content":"InnoDB handles SELECT COUNT(*) and SELECT COUNT(1) operations in the same way. There is no performance difference.","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1648199448,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2781015,"avatar":"","nickname":"Geek_082afe","note":"","ucode":"4D867B42DFC550","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":402622,"discussion_content":"oracle,sqlserver,postgresqlçš„é»˜è®¤éš”ç¦»çº§åˆ«æ˜¯RCã€‚RCçº§åˆ«ï¼Œä¸€ä¸ªäº‹åŠ¡ä¸­çš„ä¸¤ä¸ªç›¸åŒçš„è¯»å–æ“ä½œï¼Œå…¶ç»“æœå¯èƒ½ä¸åŒã€‚ä¹Ÿå°±æ˜¯ï¼Œä¼šè¯»å–åˆ°å…¶ä»–äº‹åŠ¡commitçš„æ•°æ®ã€‚mysqlçš„é»˜è®¤éš”ç¦»çº§åˆ«æ˜¯RRï¼Œè¿™æ ·ä¼šæ ·mysqlæ¯”å…¶ä»–æ•°æ®åº“æ›´é«˜çº§å—ï¼Ÿä¸ä¼šçš„ã€‚RRçº§åˆ«çš„å¹¶å‘èƒ½åŠ›æ¯”RCè¦å¼±ä¸€ä¸ªç­‰çº§ã€‚RCå¤Ÿç”¨æ‰æ˜¯å…¶ä»–æ•°æ®åº“é€‰æ‹©ä¸ºé»˜è®¤éš”ç¦»çº§åˆ«çš„åŸå› ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1633923080,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2015438,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/c0/ce/eb1b4ae1.jpg","nickname":"å¯åœˆå¯ä¸¶","note":"","ucode":"EB527E176EDE91","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2781015,"avatar":"","nickname":"Geek_082afe","note":"","ucode":"4D867B42DFC550","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581367,"discussion_content":"å®è·µè¯æ˜ï¼Œé˜¿é‡Œäº‘RDS mysqlç‰ˆçš„éš”ç¦»çº§åˆ«ä¹Ÿæ˜¯RC","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658743868,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":402622,"ip_address":""},"score":581367,"extra":""}]},{"author":{"id":1115724,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLwSoTjHPX5tm4whBSfoZLX6toZxrZGUaLABQywKNf4MDc9toK3QSV7Z99ATcGicFCysoleQ5ISzmw/132","nickname":"ä¹˜é£","note":"","ucode":"0420C5535DACB7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":47072,"discussion_content":"oracle é»˜è®¤å°±æ˜¯rc","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1573268313,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1935838,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/n1gS0knXOF4D8Oo5ocQicCCtwNibmNz4ODrmVg8icobVgap9to11t7ahFm4U81K4MDcavibMNxib39mzm5ibAJR4DdzA/132","nickname":"Ly","note":"","ucode":"0A7A27C8126ACF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":388368,"discussion_content":"count(*)çš„ç»“æœä¼šè¿›buffer poolå—ï¼Œbuffer poolä¸­çš„é“¾è¡¨ä¸æ˜¯ç¼“å­˜çš„æ•°æ®é¡µå—ï¼Œcount(*)çš„ç»“æœä¹Ÿæ²¡åœ¨æ•°æ®é¡µé‡Œå‘€ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628734563,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1780797,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/2c/3d/0bd58aa4.jpg","nickname":"Em","note":"","ucode":"32012A5C603C8A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1935838,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/n1gS0knXOF4D8Oo5ocQicCCtwNibmNz4ODrmVg8icobVgap9to11t7ahFm4U81K4MDcavibMNxib39mzm5ibAJR4DdzA/132","nickname":"Ly","note":"","ucode":"0A7A27C8126ACF","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":576986,"discussion_content":"count(*)æ€»å¾—å…ˆç´¢å¼•B+æ ‘å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655877488,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":388368,"ip_address":""},"score":576986,"extra":""}]},{"author":{"id":2142240,"avatar":"https://static001.geekbang.org/account/avatar/00/20/b0/20/6d0f4587.jpg","nickname":"ç¾å¥½çš„æœªæ¥","note":"","ucode":"2E2432913874D4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":387884,"discussion_content":"æˆ‘è¯´ä¸‹æˆ‘é‡åˆ°çš„ä¸€ä¸ªé—®é¢˜å§ï¼ŒAæœåŠ¡å¼€å¯äº‹åŠ¡ï¼Œåœ¨äº‹åŠ¡ä¸­è°ƒç”¨BæœåŠ¡çš„rpcæ’å…¥äº†æ•°æ®ï¼Œæ›´æ–°å®ŒæˆåAç›´æ¥æŸ¥åº“ï¼ˆè¿˜åœ¨äº‹åŠ¡ä¸­ï¼‰ï¼Œå¦‚æœæ˜¯RRï¼Œå°±ä¼šæŸ¥ä¸åˆ°æ•°æ®ã€‚å› ä¸ºBæœåŠ¡æ’å…¥æ•°æ®çš„äº‹åŠ¡æ¯”AæœåŠ¡çš„äº‹åŠ¡æ–°ï¼ŒMVCCè®©AæœåŠ¡æŸ¥ä¸åˆ°æœ€æ–°çš„æ•°æ®ã€‚\nè¿™ç§é—®é¢˜ä¸€èˆ¬æ˜¯åœ¨ç³»ç»Ÿæ‹†åˆ†å¾®æœåŠ¡çš„æ—¶å€™ä¼šå‡ºç°ï¼Œæ­£å¸¸æƒ…å†µæ˜¯æ²¡æœ‰çš„ï¼Œå› ä¸ºå¦‚æœæ˜¯BæœåŠ¡æä¾›æ’å…¥æ•°æ®çš„èƒ½åŠ›ï¼Œé‚£å¿…ç„¶ä¹Ÿéœ€è¦æä¾›æŸ¥è¯¢æ•°æ®çš„èƒ½åŠ›ã€‚\nå…¶å®æˆ‘ä¸ªäººæ„Ÿè§‰å•Šï¼Œå½“å¾®æœåŠ¡æ‹†åˆ†ä¹‹åï¼ŒåŸæ¥çš„ä¸€ä¸ªäº‹åŠ¡å…¶å®åˆ†æ•£åœ¨å„å¤„ï¼Œä¹Ÿåªèƒ½æ˜¯æ¯æ¬¡è¯»æœ€æ–°çš„æ•°æ®äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628486396,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1461374,"avatar":"https://static001.geekbang.org/account/avatar/00/16/4c/7e/4771d8a4.jpg","nickname":"å½­å‘çº¢","note":"","ucode":"9BAC208700791E","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":305348,"discussion_content":"é¥¿","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599885980,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1115724,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLwSoTjHPX5tm4whBSfoZLX6toZxrZGUaLABQywKNf4MDc9toK3QSV7Z99ATcGicFCysoleQ5ISzmw/132","nickname":"ä¹˜é£","note":"","ucode":"0420C5535DACB7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":47073,"discussion_content":"æ­£å¦‚æ¥¼ä¸Šæ‰€è¯´rcæ²¡æœ‰nkl,ä½†æ˜¯ä¼šå­˜åœ¨ä¸å¯é‡å¤è¯»,å¯¹äºå¼ºä¸€è‡´æ€§çš„ä¸šåŠ¡ä¼šå­˜åœ¨é—®é¢˜,ä½†å¤§éƒ¨åˆ†ä¸šåŠ¡æ²¡è¿™ä¸ªå½±å“","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573268399,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1142674,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6f/92/535160b0.jpg","nickname":"å•†ç¿é€†","note":"","ucode":"FA9522CEDA5635","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":15703,"discussion_content":"rrè¦åŠ gap lockï¼Œå¦‚æœä½ ä»¬å…¬å¸å¤§éƒ¨åˆ†ä¸šåŠ¡rcå°±å¤Ÿäº†çš„è¯ï¼Œæ²¡å¿…è¦ç”¨rrï¼Œrcæœ‰æ›´å¥½çš„æ€§èƒ½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568825277,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":50068,"user_name":"æäºŒæœ¨","can_delete":false,"product_type":"c1","uid":1103091,"ip_address":"","ucode":"30E03BB84ADB27","user_header":"https://static001.geekbang.org/account/avatar/00/10/d4/f3/129d6dfe.jpg","comment_is_top":false,"comment_ctime":1544858788,"is_pvip":true,"replies":[{"id":"18011","content":"ğŸ˜„ æ¥å¾—åŠæ¥å¾—åŠ","user_name":"ä½œè€…å›å¤","comment_id":50068,"uid":"1264162","ip_address":"","utype":1,"ctime":1544869317,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":16,"race_medal":0,"score":"456811392164","product_id":100020801,"comment_content":"ä¸€ç›´ä»¥ä¸ºå¸¦*æŸ¥è¯¢æ•ˆç‡æ˜¯æœ€å·®çš„ï¼Œå¹³æ—¶æŸ¥è¯¢ç‰¹æ„åŠ äº† count(ID) æŸ¥è¯¢ã€‚ç½ªè¿‡å•Šã€‚","like_count":107,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432863,"discussion_content":"ğŸ˜„ æ¥å¾—åŠæ¥å¾—åŠ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544869317,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1454272,"avatar":"https://static001.geekbang.org/account/avatar/00/16/30/c0/761ec683.jpg","nickname":"faker","note":"","ucode":"15212F3641253F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":276100,"discussion_content":"æ¡†æ¶çš„ormä½¿ç”¨ä¸€èˆ¬æ˜¯count(*)ï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1590817137,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1812970,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/a9/ea/5bfce6c5.jpg","nickname":"mgs2002","note":"","ucode":"F5931108BD509B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":218256,"discussion_content":"ä¸€ç›´ç”¨çš„count(*)","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1585638643,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1618289,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b1/71/d5df5dc1.jpg","nickname":"å¼ ç¼˜","note":"","ucode":"8A05C57E46ED87","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":202591,"discussion_content":"æˆ‘ä¸€ç›´ç”¨countï¼ˆ1ï¼‰ï¼Œè§‰å¾—countï¼ˆ*ï¼‰æ˜¯æœ€å·®çš„ã€‚è¢«æˆ‘çš„å…¥é—¨å¸ˆå‚…å¸¦åäº†","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1583935307,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":2369545,"avatar":"https://static001.geekbang.org/account/avatar/00/24/28/09/0ac42cff.jpg","nickname":"æ…•è‹","note":"","ucode":"7ED14D00429C21","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1618289,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b1/71/d5df5dc1.jpg","nickname":"å¼ ç¼˜","note":"","ucode":"8A05C57E46ED87","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":336268,"discussion_content":"ä¹‹å‰å­¦æ ¡è€å¸ˆä¹Ÿè¿™æ ·æ•™è¯´ï¼šcount(*)æœ€å·® ...","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608542919,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":202591,"ip_address":""},"score":336268,"extra":""},{"author":{"id":1649057,"avatar":"https://static001.geekbang.org/account/avatar/00/19/29/a1/41607383.jpg","nickname":"hello","note":"","ucode":"4F42DAA5DB5C38","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1618289,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b1/71/d5df5dc1.jpg","nickname":"å¼ ç¼˜","note":"","ucode":"8A05C57E46ED87","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":341636,"discussion_content":"ä¸çŸ¥é“é‚£æ˜¯å“ªä¸ªç‰ˆæœ¬çš„æ•°æ®åº“äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610467957,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":202591,"ip_address":""},"score":341636,"extra":""}]},{"author":{"id":1986739,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/50/b3/9269cd59.jpg","nickname":"LWD","note":"","ucode":"DDA444DB113C01","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":587452,"discussion_content":"count(1) å’Œ count(*)æ•ˆç‡ä¸€æ ·ï¼›ä½†æ˜¯count(*)æ˜¯é€šç”¨è¯­æ³•ï¼Œæ˜¯è§„èŒƒ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663062805,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1618289,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b1/71/d5df5dc1.jpg","nickname":"å¼ ç¼˜","note":"","ucode":"8A05C57E46ED87","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":368086,"discussion_content":"æˆ‘ä»¥å‰ä»¥ä¸ºcountï¼ˆ1ï¼‰æ•ˆç‡æœ€é«˜ã€‚ã€‚ã€‚ã€‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618563562,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1575571,"avatar":"https://static001.geekbang.org/account/avatar/00/18/0a/93/a189ec16.jpg","nickname":"Eric","note":"","ucode":"7EB511C384BD7B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1618289,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b1/71/d5df5dc1.jpg","nickname":"å¼ ç¼˜","note":"","ucode":"8A05C57E46ED87","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":393862,"discussion_content":"æœ¬æ¥ä¸å°±æ˜¯ä¹ˆã€‚ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1631620487,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":368086,"ip_address":""},"score":393862,"extra":""}]},{"author":{"id":1047537,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/fb/f1/a2cde35e.jpg","nickname":"åºŸæå§‘å¨˜","note":"","ucode":"6AFB48B2A4939A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":323695,"discussion_content":"æˆ‘å’‹è®°å¾—åœ¨å“ªçœ‹è¿‡ä¸è®©ç”¨*ï¼Œè’™åœˆäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604983012,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":2280126,"avatar":"https://static001.geekbang.org/account/avatar/00/22/ca/be/3771706c.jpg","nickname":"å–ç«æŸ´çš„åŠ è²çŒ«","note":"","ucode":"9146C9E232A156","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1047537,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/fb/f1/a2cde35e.jpg","nickname":"åºŸæå§‘å¨˜","note":"","ucode":"6AFB48B2A4939A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":328304,"discussion_content":"ä½ é‚£æ˜¯æŸ¥è¯¢çš„æ—¶å€™ä¸è®©ç”¨*ï¼ŒåªæŸ¥è‡ªå·±éœ€è¦çš„å­—æ®µ","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1606122143,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":323695,"ip_address":""},"score":328304,"extra":""},{"author":{"id":2232546,"avatar":"https://static001.geekbang.org/account/avatar/00/22/10/e2/35f2fc23.jpg","nickname":"å‰æ³•å¸ˆ","note":"","ucode":"F1E3F4F526CA13","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1047537,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/fb/f1/a2cde35e.jpg","nickname":"åºŸæå§‘å¨˜","note":"","ucode":"6AFB48B2A4939A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":345931,"discussion_content":"æŸ¥è¯¢æœ€å¥½ä¸ç”¨*ï¼Œä¸€æ–¹é¢MySQLå¾—éå†è¡¨å»æŸ¥æœ‰å“ªäº›å­—æ®µï¼Œå¦ä¸€æ–¹é¢åˆ«äººè¯»ä½ çš„ä»£ç ä¸çŸ¥é“ä½ åœ¨æŸ¥å“ªäº›å­—æ®µï¼Œç”¨å“ªäº›å­—æ®µ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611817278,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":323695,"ip_address":""},"score":345931,"extra":""},{"author":{"id":2438545,"avatar":"https://static001.geekbang.org/account/avatar/00/25/35/91/d523a803.jpg","nickname":"PRETEXT","note":"","ucode":"BBA18231EE4EDA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2232546,"avatar":"https://static001.geekbang.org/account/avatar/00/22/10/e2/35f2fc23.jpg","nickname":"å‰æ³•å¸ˆ","note":"","ucode":"F1E3F4F526CA13","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":571247,"discussion_content":"ä¸éœ€è¦å§ï¼Œä½ è¿™æ ·è¯´å°±æ„Ÿè§‰count (*)æ•ˆç‡æå…¶ä½äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1652155639,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":345931,"ip_address":""},"score":571247,"extra":""}]},{"author":{"id":2076283,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/ae/7b/47200692.jpg","nickname":"è´ºå­","note":"","ucode":"A64DC9D9CF7CCD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":308863,"discussion_content":"å¦‚æœè¡¨æ²¡æœ‰ä¸»é”®ï¼Œé‚£åº”è¯¥æ˜¯countï¼ˆ1ï¼‰æ¯”count((*)å¥½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1601102080,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":2083033,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/c8/d9/51288e15.jpg","nickname":"å®‰ç•…","note":"","ucode":"03855E154A1AD3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2076283,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/ae/7b/47200692.jpg","nickname":"è´ºå­","note":"","ucode":"A64DC9D9CF7CCD","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":316076,"discussion_content":"countï¼ˆ1ï¼‰æ€ä¹ˆç†è§£å‘€ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603355477,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":308863,"ip_address":""},"score":316076,"extra":""},{"author":{"id":1892268,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q3auHgzwzM6fGV3BcHQHyNibzRhsPr6KqYzOtMF8G9fiaNvYUavdlhdqMugcHWggWGBbIibkYTibIXramEXsvg4aXA/132","nickname":"è‚–æµ·æ¶›","note":"","ucode":"5E4C20D5A69BEC","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":2076283,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/ae/7b/47200692.jpg","nickname":"è´ºå­","note":"","ucode":"A64DC9D9CF7CCD","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":588975,"discussion_content":"å¦‚æœæ²¡æœ‰æŒ‡å®šä¸»é”®ï¼Œå¼•æ“ä¹Ÿä¼šç»™ä½ åˆ›å»ºä¸€ä¸ªå†…ç½®çš„ä¸»é”®ï¼Œæ¢å¥è¯è¯´ï¼Œæ‰€æœ‰çš„è¡¨éƒ½æœ‰ä¸»é”®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1664276027,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":308863,"ip_address":"åŒ—äº¬"},"score":588975,"extra":""}]}]},{"had_liked":false,"id":65057,"user_name":"èœé¸¡ä¸€åª","can_delete":false,"product_type":"c1","uid":1336004,"ip_address":"","ucode":"5FBA9A68E0E9B9","user_header":"https://static001.geekbang.org/account/avatar/00/14/62/c4/98a9e594.jpg","comment_is_top":false,"comment_ctime":1549014360,"is_pvip":false,"replies":[{"id":"23063","content":"count(id)å¯èƒ½ä¼šé€‰æ‹©æœ€å°çš„ç´¢å¼•æ¥éå†<br>è€Œcount(å­—æ®µ)çš„è¯ï¼Œå¦‚æœå­—æ®µä¸Šæ²¡æœ‰ç´¢å¼•ï¼Œå°±åªèƒ½é€‰ä¸»é”®ç´¢å¼•","user_name":"ä½œè€…å›å¤","comment_id":65057,"uid":"1264162","ip_address":"","utype":1,"ctime":1549038395,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":9,"race_medal":0,"score":"345146398040","product_id":100020801,"comment_content":"countï¼ˆidï¼‰å’Œcountï¼ˆè¿™æ®µï¼‰éƒ½æ˜¯è¦æŠŠæ¯ä¸€è¡Œçš„è¯¥å­—æ®µå€¼å–å‡ºæ¥ï¼Œç„¶ååˆ¤æ–­æ˜¯å¦ä¸ºç©ºï¼Œé‚£ä¸ºä»€ä¹ˆcountï¼ˆidï¼‰çš„æ•ˆç‡è¦é«˜ï¼Ÿ","like_count":81,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438301,"discussion_content":"count(id)å¯èƒ½ä¼šé€‰æ‹©æœ€å°çš„ç´¢å¼•æ¥éå†\nè€Œcount(å­—æ®µ)çš„è¯ï¼Œå¦‚æœå­—æ®µä¸Šæ²¡æœ‰ç´¢å¼•ï¼Œå°±åªèƒ½é€‰ä¸»é”®ç´¢å¼•","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1549038395,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1254801,"avatar":"https://static001.geekbang.org/account/avatar/00/13/25/91/46600294.jpg","nickname":"çŒ´å“¥ä¸€ä¸€ cium","note":"","ucode":"38EC64F8D1A0B4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":312636,"discussion_content":"count(id)ä¹Ÿå¯èƒ½ä¼šé€‰æ‹©æœ€å°çš„ç´¢å¼•æ¥éå†çš„å˜›,\né‚£è·Ÿcount(*)ä¸€æ ·äº†?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602754275,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2278559,"avatar":"https://static001.geekbang.org/account/avatar/00/22/c4/9f/a01e4bd1.jpg","nickname":"æµ·æµª","note":"","ucode":"091941B3556B4B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1254801,"avatar":"https://static001.geekbang.org/account/avatar/00/13/25/91/46600294.jpg","nickname":"çŒ´å“¥ä¸€ä¸€ cium","note":"","ucode":"38EC64F8D1A0B4","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":326346,"discussion_content":"ä½†æ˜¯count(*)ä¸ç”¨æŠŠå­—æ®µå–å‡ºæ¥","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1605582073,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":312636,"ip_address":""},"score":326346,"extra":""}]},{"author":{"id":1644104,"avatar":"https://static001.geekbang.org/account/avatar/00/19/16/48/09493874.jpg","nickname":"èŒ¶æ²¡å–å®Œ","note":"","ucode":"D72D88C42A1258","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":307983,"discussion_content":"å¥½é—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600821197,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1066508,"avatar":"https://static001.geekbang.org/account/avatar/00/10/46/0c/773ba2f3.jpg","nickname":"ä¸‹ä¸ªç›®æ ‡45k","note":"","ucode":"193BA8C3AA9A61","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1644104,"avatar":"https://static001.geekbang.org/account/avatar/00/19/16/48/09493874.jpg","nickname":"èŒ¶æ²¡å–å®Œ","note":"","ucode":"D72D88C42A1258","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":334607,"discussion_content":"è¿™æ˜¯ä¸æ˜¯æ„å‘³ç€ä¸€å®šcount (id)ä¸€å®šä¼šèµ°æ™®é€šç´¢å¼•å‘¢ï¼Ÿåªè¦åˆ—æ•°å¤§äº3ä¸»é”®ç´¢å¼•æ•°æ®è‚¯å®šæ¯”æ™®é€šç´¢å¼•å¤§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607916174,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":307983,"ip_address":""},"score":334607,"extra":""},{"author":{"id":2350043,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/sFkJYPdIIjHfxgCxAh1D4Pyk1jAueicu7egY1PUvR8egs12gAXxmO51YT6Bk7NianYRyMRPTpd3kKWXvZ8TEkRyw/132","nickname":"Geek_7794e2","note":"","ucode":"2F749554FEA20D","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1066508,"avatar":"https://static001.geekbang.org/account/avatar/00/10/46/0c/773ba2f3.jpg","nickname":"ä¸‹ä¸ªç›®æ ‡45k","note":"","ucode":"193BA8C3AA9A61","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":411002,"discussion_content":"çœ‹å ç”¨çš„å­—èŠ‚æ•°å•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635823782,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":334607,"ip_address":""},"score":411002,"extra":""}]},{"author":{"id":1307497,"avatar":"https://static001.geekbang.org/account/avatar/00/13/f3/69/7039d03f.jpg","nickname":"ä¹¦ç­–ç¨ æµŠ","note":"","ucode":"A29875CE15FDA3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6025,"discussion_content":"æœ€å°çš„ç´¢å¼•å’Œä¸»é”®ç´¢å¼•æŸ¥å‡ºæ¥çš„æ•°æ®ä¼šä¸ä¼šä¸åŒå‘¢ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566619292,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1453053,"avatar":"https://static001.geekbang.org/account/avatar/00/16/2b/fd/7013289d.jpg","nickname":"æ¸©æ•…è€ŒçŸ¥æ–°å¯ä»¥ä¸ºå¸ˆçŸ£","note":"","ucode":"FADCDFA9F9E5E8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1307497,"avatar":"https://static001.geekbang.org/account/avatar/00/13/f3/69/7039d03f.jpg","nickname":"ä¹¦ç­–ç¨ æµŠ","note":"","ucode":"A29875CE15FDA3","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":120949,"discussion_content":"æœ€ç»ˆéƒ½æ˜¯é‚£äº›æ•°æ®ï¼Œä¸åŒçš„ç»„ç»‡æ–¹å¼è€Œå·²ï¼Œæ‰€ä»¥ä¸ä¼šï¼Œåªæ˜¯é€Ÿåº¦å¿«äº›","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1578306611,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":6025,"ip_address":""},"score":120949,"extra":""},{"author":{"id":1780797,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/2c/3d/0bd58aa4.jpg","nickname":"Em","note":"","ucode":"32012A5C603C8A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1453053,"avatar":"https://static001.geekbang.org/account/avatar/00/16/2b/fd/7013289d.jpg","nickname":"æ¸©æ•…è€ŒçŸ¥æ–°å¯ä»¥ä¸ºå¸ˆçŸ£","note":"","ucode":"FADCDFA9F9E5E8","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":576994,"discussion_content":"ç´¢å¼•å¯èƒ½ä¸ºnullå§   ä¼šä¸ä¼šå°‘æ•°æ®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655877921,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":120949,"ip_address":""},"score":576994,"extra":""}]}]},{"had_liked":false,"id":49589,"user_name":"åŒ—å¤©é­”ç‹¼","can_delete":false,"product_type":"c1","uid":1188144,"ip_address":"","ucode":"C22623ECEB8DBA","user_header":"https://static001.geekbang.org/account/avatar/00/12/21/30/8ecce1e1.jpg","comment_is_top":false,"comment_ctime":1544741456,"is_pvip":true,"discussion_count":3,"race_medal":0,"score":"203408204368","product_id":100020801,"comment_content":"è€å¸ˆè¯´è¿‡ï¼šäº‹åŠ¡å¼€å¯åï¼Œæ›´æ–°æ“ä½œæ”¾åˆ°æœ€åã€‚è¾ƒå°‘é”ç­‰å¾…æ—¶é—´çš„å½±å“","like_count":48,"discussions":[{"author":{"id":1453053,"avatar":"https://static001.geekbang.org/account/avatar/00/16/2b/fd/7013289d.jpg","nickname":"æ¸©æ•…è€ŒçŸ¥æ–°å¯ä»¥ä¸ºå¸ˆçŸ£","note":"","ucode":"FADCDFA9F9E5E8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":120936,"discussion_content":"åº”è¯¥æ˜¯â€œå¯èƒ½äº§ç”Ÿè¡Œé”ç­‰å¾…çš„æ›´æ–°è¯­å¥â€æ”¾åˆ°æœ€ååœ¨æ›´å‡†ç¡®ã€‚","likes_number":12,"is_delete":false,"is_hidden":false,"ctime":1578305790,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2369545,"avatar":"https://static001.geekbang.org/account/avatar/00/24/28/09/0ac42cff.jpg","nickname":"æ…•è‹","note":"","ucode":"7ED14D00429C21","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":336270,"discussion_content":"åº”è¯¥æ˜¯ â€œå®¹æ˜“äº§ç”Ÿè¡Œé”å¯¼è‡´é˜»å¡çš„è¯­å¥â€ æ”¾åœ¨æœ€å","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608543012,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2287841,"avatar":"https://static001.geekbang.org/account/avatar/00/22/e8/e1/6045b299.jpg","nickname":"LPF","note":"","ucode":"036C552D7251E9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":328089,"discussion_content":"åº”è¯¥æ˜¯â€œæ˜“äº§ç”Ÿå†²çªçš„è¯­å¥â€æ”¾åœ¨æœ€å","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606052753,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":109027,"user_name":"é’±","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1561950691,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"139000904163","product_id":100020801,"comment_content":"1ï¼šåˆåˆ·æ–°äº†è®¤çŸ¥ï¼Œå…ˆç»™ç»“è®º(ä¹‹å‰ä¸çŸ¥ä»å“ªçœ‹çš„ï¼Œä»¥ä¸ºcount(ä¸»é”®id)æ€§èƒ½æœ€ä½³)<br>æŒ‰ç…§æ•ˆç‡æ’åºçš„è¯ï¼Œcount(å­—æ®µ)&lt;count(ä¸»é”® id)&lt;count(1)â‰ˆcount(*)ï¼Œæ‰€ä»¥è€å¸ˆå»ºè®®ï¼Œå°½é‡ä½¿ç”¨ count(*)ã€‚<br>2ï¼šcount(*)è¿™ä¹ˆæ…¢ï¼Œæˆ‘è¯¥æ€ä¹ˆåŠï¼Ÿ<br>è¦ä¹ˆå¿ï¼Œè¦ä¹ˆè‡ªå·±åŠ¨æ‰‹è®°å½•ï¼Œå¦‚æœè‡ªå·±è®°å½•çš„è¯ï¼Œè€å¸ˆå»ºè®®ä½¿ç”¨æ•°æ®åº“æ¥å¼„ï¼Œæ„Ÿè§‰ä½¿ç”¨æ•°æ®åº“è‡ªå·±å¼„çš„æ€è·¯å¯ä»¥å»ºè®®MySQLå®ç°ä¸€ä¸‹ï¼Ÿ<br>3ï¼šcount()çš„è¯­ä¹‰æ˜¯å•¥ï¼Ÿ<br>é¦–å…ˆï¼Œä¸åŒçš„å­˜å‚¨å¼•æ“å®ç°æ–¹å¼ä¸åŒ<br>MyISAM å¼•æ“æŠŠä¸€ä¸ªè¡¨çš„æ€»è¡Œæ•°å­˜åœ¨äº†ç£ç›˜ä¸Šï¼Œå› æ­¤æ‰§è¡Œ count(*) çš„æ—¶å€™ä¼šç›´æ¥è¿”å›è¿™ä¸ªæ•°ï¼Œæ•ˆç‡å¾ˆé«˜ï¼›<br>è€Œ InnoDB å¼•æ“å°±éº»çƒ¦äº†ï¼Œå®ƒæ‰§è¡Œ count(*) çš„æ—¶å€™ï¼Œéœ€è¦æŠŠæ•°æ®ä¸€è¡Œä¸€è¡Œåœ°ä»å¼•æ“é‡Œé¢è¯»å‡ºæ¥ï¼Œç„¶åç´¯ç§¯è®¡æ•°ã€‚<br>ä»¥ä¸‹é’ˆå¯¹innodbæ¥è¯´<br>count() æ˜¯ä¸€ä¸ªèšåˆå‡½æ•°ï¼Œå¯¹äºè¿”å›çš„ç»“æœé›†ï¼Œä¸€è¡Œè¡Œåœ°åˆ¤æ–­ï¼Œå¦‚æœ count å‡½æ•°çš„å‚æ•°ä¸æ˜¯ NULLï¼Œç´¯è®¡å€¼å°±åŠ  1ï¼Œå¦åˆ™ä¸åŠ ï¼Œæœ€åè¿”å›ç´¯è®¡å€¼ã€‚<br>4ï¼šcount(å­—æ®µ)æ€ä¹ˆè®¡æ•°ï¼Ÿ<br>4-1ï¼šå¦‚æœè¿™ä¸ªâ€œå­—æ®µâ€æ˜¯å®šä¹‰ä¸º not null çš„è¯ï¼Œä¸€è¡Œè¡Œåœ°ä»è®°å½•é‡Œé¢è¯»å‡ºè¿™ä¸ªå­—æ®µï¼Œåˆ¤æ–­ä¸èƒ½ä¸º nullï¼ŒæŒ‰è¡Œç´¯åŠ ï¼›<br>4-2ï¼šå¦‚æœè¿™ä¸ªâ€œå­—æ®µâ€å®šä¹‰å…è®¸ä¸º nullï¼Œé‚£ä¹ˆæ‰§è¡Œçš„æ—¶å€™ï¼Œåˆ¤æ–­åˆ°æœ‰å¯èƒ½æ˜¯ nullï¼Œè¿˜è¦æŠŠå€¼å–å‡ºæ¥å†åˆ¤æ–­ä¸€ä¸‹ï¼Œä¸æ˜¯ null æ‰ç´¯åŠ ã€‚<br>ä»å¼•æ“è¿”å›çš„å­—æ®µä¼šæ¶‰åŠåˆ°è§£ææ•°æ®è¡Œï¼Œä»¥åŠæ‹·è´å­—æ®µå€¼çš„æ“ä½œã€‚<br>5ï¼šcount(ä¸»é”® id)æ€ä¹ˆè®¡æ•°ï¼Ÿ<br>å¯¹äº count(ä¸»é”® id) æ¥è¯´ï¼ŒInnoDB å¼•æ“ä¼šéå†æ•´å¼ è¡¨ï¼ŒæŠŠæ¯ä¸€è¡Œçš„ id å€¼éƒ½å–å‡ºæ¥ï¼Œè¿”å›ç»™ server å±‚ã€‚server å±‚æ‹¿åˆ° id åï¼Œåˆ¤æ–­æ˜¯ä¸å¯èƒ½ä¸ºç©ºçš„ï¼Œå°±æŒ‰è¡Œç´¯åŠ ã€‚ä»å¼•æ“è¿”å›çš„ ä¸»é”®id ä¼šæ¶‰åŠåˆ°è§£ææ•°æ®è¡Œï¼Œä»¥åŠæ‹·è´å­—æ®µå€¼çš„æ“ä½œã€‚<br>6ï¼šcount(1)æ€ä¹ˆè®¡æ•°ï¼Ÿ<br>å¯¹äº count(1) æ¥è¯´ï¼ŒInnoDB å¼•æ“éå†æ•´å¼ è¡¨ï¼Œä½†ä¸å–å€¼ã€‚server å±‚å¯¹äºè¿”å›çš„æ¯ä¸€è¡Œï¼Œæ”¾ä¸€ä¸ªæ•°å­—â€œ1â€è¿›å»ï¼Œåˆ¤æ–­æ˜¯ä¸å¯èƒ½ä¸ºç©ºçš„ï¼ŒæŒ‰è¡Œç´¯åŠ ã€‚<br>7ï¼šcount(*)æ€ä¹ˆè®¡æ•°ï¼Ÿ<br>å¯¹äºcount(*)æ¥è¯´ï¼Œå¹¶ä¸ä¼šæŠŠå…¨éƒ¨å­—æ®µå–å‡ºæ¥ï¼Œè€Œæ˜¯ä¸“é—¨åšäº†ä¼˜åŒ–ï¼Œä¸å–å€¼ã€‚count(*) è‚¯å®šä¸æ˜¯ nullï¼ŒæŒ‰è¡Œç´¯åŠ ã€‚<br>8ï¼šç°åœ¨ç»ˆäºå¼„æ˜ç™½è¿™äº›count()èƒŒåçš„è®¡ç®—åŸç†å•¦ï¼éå¸¸æ„Ÿè°¢ï¼å¦å¤–ï¼Œåˆ†æè¿™äº›count()çš„åŸåˆ™å¦‚ä¸‹ï¼š<br>8-1ï¼šserver å±‚è¦ä»€ä¹ˆå°±ç»™ä»€ä¹ˆï¼›<br>8-2ï¼šInnoDB åªç»™å¿…è¦çš„å€¼ï¼›<br>8-3ï¼šç°åœ¨çš„ä¼˜åŒ–å™¨åªä¼˜åŒ–äº† count(*) çš„è¯­ä¹‰ä¸ºâ€œå–è¡Œæ•°â€ï¼Œå…¶ä»–â€œæ˜¾è€Œæ˜“è§â€çš„ä¼˜åŒ–å¹¶æ²¡æœ‰åšã€‚<br>è¿™å‡ æ¡åŸåˆ™å¯¹åˆ«çš„æ€§èƒ½å·®åˆ«çš„åˆ†æä¹Ÿæ˜¯OKçš„å§ï¼Ÿ<br>è¾¾åˆ°åŒæ ·çš„ç›®æ ‡ï¼Œè°ç»•çš„å¼¯è¶Šå¤šåšçš„äº‹æƒ…è¶Šå¤šå°±ä¼šè¶Šæ…¢ï¼Œæ€§èƒ½è‡ªç„¶ä¸å’‹æ»´ï¼ä¸è¿‡çŸ¥é“æ¯ç§è¾¾åˆ°ç›®çš„çš„è·¯å¾„è½¨è¿¹æ˜¯ä¸€ä¸ªéš¾ç‚¹ï¼Œå¦‚æœçŸ¥é“è°ä¸å–œæ¬¢èµ°æ·å¾„å‘¢ï¼Ÿ","like_count":32,"discussions":[{"author":{"id":2054611,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEKBENQekdV3e9XwRQ5kpO9Y9d81sEMm52qcwJWbFbWbW2rniaTFYCChoR0ibZ0E3soQqod9rvfmBibmQ/132","nickname":"æ ¡æ­Œ","note":"","ucode":"CD257668BB1A33","race_medal":1,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":339684,"discussion_content":"count(*)åšäº†ä¼˜åŒ–?èƒ½è¯´ä¸‹åšäº†ä»€ä¹ˆä¼˜åŒ–å—ï¼Ÿè·Ÿcount(1)æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609757549,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2290089,"avatar":"","nickname":"äºŒå§","note":"","ucode":"3451748DE3895F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2054611,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEKBENQekdV3e9XwRQ5kpO9Y9d81sEMm52qcwJWbFbWbW2rniaTFYCChoR0ibZ0E3soQqod9rvfmBibmQ/132","nickname":"æ ¡æ­Œ","note":"","ucode":"CD257668BB1A33","race_medal":1,"user_type":1,"is_pvip":true},"discussion":{"id":362065,"discussion_content":"è€ç‰ˆæœ¬çš„count(*)ä¼šæŠŠæ•´è¡Œæ•°æ®å–å‡ºæ¥è¿”å›ç»™serverå±‚ï¼Œè¿™ä¸ªæ•°æ®ä¼ è¾“å’Œè§£æéœ€è¦æ—¶é—´ï¼Œæœ‰æ€§èƒ½å¼€é”€ã€‚ä¼˜åŒ–åçš„count(*)ä¸éœ€è¦å–å‡ºæ•°æ®ï¼Œè€Œä¸”åªè¦èƒ½å–å‡ºè¡Œå°±è‚¯å®šä¸ä¸ºnullï¼Œæ‰€ä»¥å°±æ ¹æœ¬ä¸ç”¨åˆ¤æ–­æ˜¯å¦ä¸ºnullï¼Œæ¯è¡Œç›´æ¥ç´¯åŠ å°±å¥½äº†ã€‚è¿™ä¸ªå°±æ˜¯ä¼˜åŒ–ç‚¹ã€‚","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1616837980,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":339684,"ip_address":""},"score":362065,"extra":""}]}]},{"had_liked":false,"id":49799,"user_name":"æŸã€äºº","can_delete":false,"product_type":"c1","uid":1308784,"ip_address":"","ucode":"ADB42AA12A11C1","user_header":"https://static001.geekbang.org/account/avatar/00/13/f8/70/f3a33a14.jpg","comment_is_top":false,"comment_ctime":1544771457,"is_pvip":false,"replies":[{"id":"17937","content":"1. å¯¹ï¼Œè¿™ä¸ªæ˜¯ä¸ªbug, ä»åº“ä¸Šä¼šå…¨è¡¨æ‰«æã€‚MariaDB çš„ç‰ˆæœ¬æœ‰è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ç”Ÿäº§ä¸Šæˆ‘ä»¬æœ€å¥½ä¸å…è®¸æ²¡æœ‰ä¸»é”®çš„è¡¨<br><br>2. æŒ‰ç…§ä½ é—®çš„,gapé”æ²¡é—®é¢˜äº†ã€‚delete è¢«é”æ˜¯å› ä¸ºè¡Œé”å§ã€‚ä»åº“é‡æ”¾å°±æ˜¯å› ä¸ºèµ°å…¨è¡¨æ‰«ææŒ‰è¡Œé”ä¸‹æ¥è§¦å‘çš„<br><br>3. å‡ºç°è¿™ä¸ªé—®é¢˜è‚¯å®šæ˜¯binlogè®¾ç½®äº†rowæ ¼å¼ã€‚<br>è¿™æ ·binlogé‡Œé¢æœ‰æ‰€æœ‰å€¼ã€‚å¦‚æœä½ æœ‰ä¸»é”®çš„è¯ï¼Œå°±æ˜¯ä¸»é”®æŸ¥ï¼Œæ²¡æœ‰çš„è¯â€¦å°±æ˜¯å…¨è¡¨äº†","user_name":"ä½œè€…å›å¤","comment_id":49799,"uid":"1264162","ip_address":"","utype":1,"ctime":1544772490,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":6,"race_medal":0,"score":"100329019265","product_id":100020801,"comment_content":"è€å¸ˆæˆ‘å…ˆé—®ä¸ªæœ¬ç« ä¹‹å¤–çš„é—®é¢˜:<br>1.rræ¨¡å¼ä¸‹,ä¸€å¼ è¡¨ä¸Šæ²¡æœ‰ä¸»é”®å’Œå”¯ä¸€é”®,æœ‰äºŒçº§ç´¢å¼•c.å¦‚æœæ˜¯ä¸€å¼ å¤§è¡¨,åˆ é™¤ä¸€æ¡æ•°æ®delete t where c=1.<br>åœ¨ä¸»åº“ä¸Šåˆ©ç”¨äºŒçº§ç´¢å¼•,åœ¨æ ¹æ®è™šæ‹Ÿçš„ä¸»é”®åˆ—å›è¡¨åˆ é™¤è¿˜æŒºå¿«.ä½†æ˜¯åœ¨å¤‡åº“ä¸Šå›æ”¾ç‰¹åˆ«æ…¢,è€Œä¸”çŠ¶æ€æ˜¯system lock,æ˜¯å› ä¸ºbinlog eventé‡Œæ²¡æœ‰åŒ…å«è™šæ‹Ÿä¸»é”®åˆ—.å¯¼è‡´åœ¨å¤‡åº“å›æ”¾çš„æ—¶å€™,å¿…é¡»å…¨è¡¨æ‰«æ,è€—æ—¶ç‰¹åˆ«ä¹…?è¿˜æ˜¯å…¶ä»–åŸå› <br><br>2.å›æ”¾è¿‡ç¨‹ä¸­,åœ¨å¤‡åº“deleteä¸€æ¡è¯­å¥æ˜¯è¢«é˜»å¡çš„,insertåˆæ˜¯å¯ä»¥çš„,è¯´æ˜åªåœ¨è®°å½•ä¸Šçš„Xé”æ²¡æœ‰gapé”ã€‚<br>ä½†æ˜¯å¦‚æœåœ¨ä¸»åº“session A begin,delete where c=1.åœ¨å¼€å¯ä¸€ä¸ªsession B,åœ¨ä¸»åº“ä¸Šæ“ä½œä¹Ÿæ˜¯deleteé˜»å¡,insertæ­£å¸¸.ä¸è¿‡ç­‰session Aæ‰§è¡Œå®Œæˆ,ä¸æäº¤.insertéƒ½é˜»å¡äº†,è¯´æ˜æœ€åä¸Šäº†gapé”ã€‚æœ‰ç‚¹æ²¡æ˜ç™½è¿™å„¿çš„ä¸Šé”é€»è¾‘æ˜¯ä»€ä¹ˆï¼Ÿ<br><br>3.è¿˜æœ‰å°±æ˜¯å¤‡åº“å›æ”¾binlog,ç›¸å¯¹äºä¸»åº“çš„ä¸€æ¡updateè¯­å¥æµç¨‹æ¥è¯´,ä»åº“å›æ”¾å“ªäº›æµç¨‹æ˜¯çœç•¥äº†çš„å•Š,<br>serverå±‚çš„åº”è¯¥éƒ½çœç•¥äº†,åº”è¯¥ä¸»è¦æ˜¯å¼•æ“å±‚çš„å›æ”¾,è¿™é‡Œæœ‰ç‚¹æ¨¡ç³Šä»åº“æ˜¯æ€ä¹ˆå›æ”¾çš„binlog event?<br>å› ä¸ºç¬¬ä¸€ä¸ªé—®é¢˜ä»åº“å›æ”¾çš„æ—¶å€™,ä»åº“ä¸Šçš„äºŒçº§ç´¢å¼•è²Œä¼¼æ²¡èµ·ä½œç”¨,ç›´æ¥å°±åœ¨èšç°‡ç´¢å¼•ä¸Šåšçš„æ›´æ–°ã€‚<br><br>æ„Ÿè°¢è€å¸ˆ","like_count":23,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432778,"discussion_content":"1. å¯¹ï¼Œè¿™ä¸ªæ˜¯ä¸ªbug, ä»åº“ä¸Šä¼šå…¨è¡¨æ‰«æã€‚MariaDB çš„ç‰ˆæœ¬æœ‰è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ç”Ÿäº§ä¸Šæˆ‘ä»¬æœ€å¥½ä¸å…è®¸æ²¡æœ‰ä¸»é”®çš„è¡¨\n\n2. æŒ‰ç…§ä½ é—®çš„,gapé”æ²¡é—®é¢˜äº†ã€‚delete è¢«é”æ˜¯å› ä¸ºè¡Œé”å§ã€‚ä»åº“é‡æ”¾å°±æ˜¯å› ä¸ºèµ°å…¨è¡¨æ‰«ææŒ‰è¡Œé”ä¸‹æ¥è§¦å‘çš„\n\n3. å‡ºç°è¿™ä¸ªé—®é¢˜è‚¯å®šæ˜¯binlogè®¾ç½®äº†rowæ ¼å¼ã€‚\nè¿™æ ·binlogé‡Œé¢æœ‰æ‰€æœ‰å€¼ã€‚å¦‚æœä½ æœ‰ä¸»é”®çš„è¯ï¼Œå°±æ˜¯ä¸»é”®æŸ¥ï¼Œæ²¡æœ‰çš„è¯â€¦å°±æ˜¯å…¨è¡¨äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544772490,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1285652,"avatar":"","nickname":"mycat","note":"","ucode":"6878BD32D042F2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":305114,"discussion_content":"æˆ‘ä»¬æœ‰ä¸€ä¸ªä¸»ä»ç¯å¢ƒï¼ŒæŸå¤©å‘ç°ä»æ¯”ä½æ…¢äº†3ä¸ªå°æ—¶ï¼Œç»æ’æŸ¥ï¼Œä¸»åº“æœ‰ä¸€ä¸ªäººè¡¨æ²¡æœ‰ä¸»é”®ï¼Œä¸”è¿™ä¸ªè¡¨å‘ç”Ÿäº†å¤§é‡çš„deleteæ“ä½œï¼Œä½†æ˜¯ä»ä¸Šçœ‹çŠ¶æ€æ˜¯åŒyesï¼Œåªæ˜¯å»¶è¿Ÿå¾ˆä¸¥é‡ã€‚åå’Œä¸šåŠ¡äººå‘˜æ²Ÿé€šåï¼Œå¢åŠ äº†ä¸€ä¸ªå­—å¢ä¸»é”®åœ¨è¿™ä¸ªå‘ç”Ÿdelete çš„è¡¨ä¸Šï¼Œä¸»ä»å»¶è¿Ÿè§£å†³äº†ã€‚è¿™ä¸ªåº”è¯¥å’Œä½ è¯´çš„ç¬¬ä¸€ç‚¹ä¸€æ ·ã€‚","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1599787569,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1692320,"avatar":"https://static001.geekbang.org/account/avatar/00/19/d2/a0/c8714628.jpg","nickname":"ç‹¬ä¸€æ— äºŒ","note":"","ucode":"A7DE0EA2BD8FE3","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":53002,"discussion_content":"è€å¸ˆè¿˜æ˜¯æ²¡æœ‰è¯´rowæ¨¡å¼ä¸‹ä»åº“æ˜¯å¦‚ä½•å›æ”¾çš„ã€‚ğŸ˜‚ğŸ˜‚ğŸ˜‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1574122969,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2677691,"avatar":"https://static001.geekbang.org/account/avatar/00/28/db/bb/ef74f6ba.jpg","nickname":"katahili","note":"","ucode":"7D164E1DC9C9E1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":381965,"discussion_content":"è¯·é—®ä¸»ä»å¤åˆ¶åœ¨å“ªèƒ½å­¦å•Šï¼Ÿæˆ‘ä¸€å¤´é›¾æ°´","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625320434,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1147895,"avatar":"https://static001.geekbang.org/account/avatar/00/11/83/f7/a24b7242.jpg","nickname":"ç®€å•","note":"","ucode":"19A01CB4B9ED8C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":370315,"discussion_content":"æ²¡æœ‰ä¸»é”®çš„è¡¨ç´¢å¼•æ˜¯ä¸æ˜¯æ²¡æœ‰ç”Ÿæ•ˆã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619360838,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1014665,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7b/89/34f2cbcc.jpg","nickname":"æ¨å®‡","note":"","ucode":"EB74DF6E269F03","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":319032,"discussion_content":"å¯¹äºæ— ä¸»é”®çš„è¡¨ï¼Œå…¶é»˜è®¤ä¸»é”®rowidä¸èƒ½èµ·åˆ°ä¸»é”®ç´¢å¼•çš„ä½œç”¨å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603930498,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":50278,"user_name":"WL","can_delete":false,"product_type":"c1","uid":1173771,"ip_address":"","ucode":"6277DCD776B87E","user_header":"https://static001.geekbang.org/account/avatar/00/11/e9/0b/1171ac71.jpg","comment_is_top":false,"comment_ctime":1544942393,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"91739255609","product_id":100020801,"comment_content":"æŠŠè¯¥è®²å†…å®¹æ€»ç»“ä¸ºå‡ ä¸ªé—®é¢˜, å¤§å®¶å¤ä¹ çš„æ—¶å€™å¯ä»¥å…ˆå°è¯•å›ç­”è¿™äº›é—®é¢˜æ£€æŸ¥è‡ªå·±çš„æŒæ¡ç¨‹åº¦:<br>\t1. <br>count(*)çš„å®ç°æ–¹å¼åœ¨MySAMå¼•æ“å’ŒInnoDBå¼•æ“çš„å®ç°æ–¹å¼å„æ˜¯æ€ä¹ˆæ ·çš„? ä¸ºä»€ä¹ˆä¼šæœ‰è¿™ç§ä¸åŒ?<br>\t2. <br>ä½¿ç”¨ç¼“å­˜ä¿å­˜countæ€»æ•°å­˜åœ¨ä»€ä¹ˆé—®é¢˜?<br>\t3. <br>å¦‚æœä½¿ç”¨ä¸€åœºå•ç‹¬çš„è¡¨æ¥è®°å½•å…¶ä»–å„å¼ è¡¨çš„è®°å½•æ•°çš„è¯,æ˜¯æ€ä¹ˆè§£å†³ç»Ÿè®¡ç»“æœä¸ç²¾ç¡®çš„é—®é¢˜çš„?<br>\t4. <br>count(å­—æ®µ),count(id),count(1), count(*)å„è‡ªæ˜¯æ€ä¹ˆæ ·çš„æ‰§è¡Œæœºåˆ¶, æ•ˆç‡æ’åºæ˜¯æ€ä¹ˆæ ·çš„?<br><br>","like_count":22,"discussions":[{"author":{"id":2668694,"avatar":"https://static001.geekbang.org/account/avatar/00/28/b8/96/716ba431.jpg","nickname":"è‹æˆ","note":"","ucode":"80A8E7B243DD73","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":574340,"discussion_content":"WLè€å“¥yyds","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1653984478,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2846808,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/70/58/69e4ae1c.jpg","nickname":"Jav","note":"","ucode":"2562623ADD4BC1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":559011,"discussion_content":"é—®é¢˜æçš„å¤ªå¥½äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1648559316,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":49754,"user_name":"æ–œé¢é•œå­ Bill","can_delete":false,"product_type":"c1","uid":1305242,"ip_address":"","ucode":"B5505F94540D52","user_header":"https://static001.geekbang.org/account/avatar/00/13/ea/9a/02d589f9.jpg","comment_is_top":false,"comment_ctime":1544764083,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"91739077299","product_id":100020801,"comment_content":"å…ˆæ’å…¥æ“ä½œçºªå½•ï¼Œå†æ›´æ–°è®¡æ•°è¡¨ï¼Œå› ä¸ºè®¡æ•°è¡¨ç›¸å½“äºçƒ­ç‚¹è¡Œï¼ŒåŠ é”æ—¶é—´éœ€è¦è€ƒè™‘è¶³å¤ŸçŸ­ï¼","like_count":22},{"had_liked":false,"id":62638,"user_name":"å°åŠ¨ç‰©å¾ˆå›°","can_delete":false,"product_type":"c1","uid":1133936,"ip_address":"","ucode":"49A727277A37E1","user_header":"https://static001.geekbang.org/account/avatar/00/11/4d/70/7d736d5f.jpg","comment_is_top":false,"comment_ctime":1548123416,"is_pvip":false,"replies":[{"id":"22172","content":"æ˜¯çš„ï¼Œå’±ä»¬ä¸“æ 07ç¯‡ä¹Ÿæœ‰ç±»ä¼¼çš„ä»‹ç»ğŸ˜†","user_name":"ä½œè€…å›å¤","comment_id":62638,"uid":"1264162","ip_address":"","utype":1,"ctime":1548128654,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":3,"race_medal":0,"score":"87447469336","product_id":100020801,"comment_content":"æˆ‘è®°å¾—æœ‰ä¸€ä¸ªå¹¶å‘æ’å…¥çš„æ–¹æ³•,å°±æ˜¯è¯´è®¡æ•°è¡¨å¯¹åŒä¸€ä¸ªè¡¨å¼€å¾ˆå¤šè¡Œ,ç„¶åè®¡æ•°å¢åŠ å¯¹è¿™äº›æ•°æ®éšæœºåšåŠ æ³•,å½“åšcountæ“ä½œçš„æ—¶å€™å–sum,è¿™æ ·å¯¹è¡Œé”ç«äº‰ä¼šå‰Šå¼±.","like_count":20,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437284,"discussion_content":"æ˜¯çš„ï¼Œå’±ä»¬ä¸“æ 07ç¯‡ä¹Ÿæœ‰ç±»ä¼¼çš„ä»‹ç»ğŸ˜†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548128654,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1780797,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/2c/3d/0bd58aa4.jpg","nickname":"Em","note":"","ucode":"32012A5C603C8A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":576996,"discussion_content":"å‡å°‘è¡Œç«äº‰, ç»Ÿè®¡æ€»é‡‘é¢      åªå¢ä¸å‡çš„æƒ…å†µå¾ˆé€‚åˆ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1655878374,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":3004698,"avatar":"https://static001.geekbang.org/account/avatar/00/2d/d9/1a/f5bb1a23.jpg","nickname":"LL","note":"","ucode":"1E498475B2D9EC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":575916,"discussion_content":"mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655187327,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":49872,"user_name":"csoulsi","can_delete":false,"product_type":"c1","uid":1227336,"ip_address":"","ucode":"96C9BBE9097FB3","user_header":"https://static001.geekbang.org/account/avatar/00/12/ba/48/c892a35b.jpg","comment_is_top":false,"comment_ctime":1544782790,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"74559226822","product_id":100020801,"comment_content":"è€å¸ˆï¼š<br>1.count(*) ä¸å–å€¼ï¼Œ<br>         InnoDBè¿˜åšéå†è¡¨çš„æ“ä½œå—ï¼Œä¹Ÿä¸ç”¨ç»™serverå±‚è¿”å›å€¼å—ï¼Ÿ<br>2.count(1) ä¸å–å€¼ï¼Œ<br>        ä½†æ˜¯è¦éå†è¡¨ã€‚åŸæ–‡ä¸­ï¼š<br>        â€œserver å±‚å¯¹äºè¿”å›çš„æ¯ä¸€è¡Œï¼Œæ”¾ä¸€ä¸ªæ•°å­—â€œ1â€è¿›å»â€<br>        è¿™ä¸ªâ€œè¿”å›çš„æ¯ä¸€è¡Œâ€ ï¼šåˆ°åº•è¿”å›çš„å•¥ï¼Ÿæ˜¯æ¯ä¸€è¡Œè®°å½•å—ï¼Ÿè¿˜æ˜¯å½¢å¼çš„è¿”å›ç©ºè¡Œï¼Œç„¶åç”¨1å¡«å……ï¼Ÿ<br><br>3. count(1),count(*),count(ä¸»é”®id)<br>       è¿™ä¸‰ä¸ªåšæ¯”è¾ƒï¼Œå“ªä¸ªä¼šå¿«ï¼Ÿæ—¶é—´æ¶ˆè€—åœ¨å“ªä¸ªç¯èŠ‚ï¼Ÿ<br>      æ˜¯å¦éå†è¡¨ï¼›æ˜¯å¦å–å€¼ï¼›è¿”å›ç»™serverå±‚å†…å®¹    ç»†èŠ‚ä¸Šä»å“ªä¸ªè§’åº¦è€ƒè™‘ï¼Ÿ<br>         ","like_count":17,"discussions":[{"author":{"id":2843604,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/63/d4/b63373c3.jpg","nickname":"é‡‘é‡‘","note":"","ucode":"807EDDCDB2E939","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":560302,"discussion_content":"1.innodbè‚¯å®šè¿˜æ˜¯è¦éå†è¡¨çš„ï¼Œå¦åˆ™æ€ä¹ˆçŸ¥é“æœ‰å¤šå°‘è¡Œï¼Œè¿™é‡Œåº”è¯¥è¿”å›çš„ä¹Ÿæ˜¯ç©ºè¡Œ\n2.ç©ºè¡Œ\n3.ä¸‰è€…éƒ½ä¼šéå†è¡¨,count(1)ã€count(*)ä¸å–å€¼ï¼Œcount(ä¸»é”®id)è¦å–å€¼","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1649255031,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":54238,"user_name":"ä¸å¿˜åˆå¿ƒ","can_delete":false,"product_type":"c1","uid":1302204,"ip_address":"","ucode":"5BC8A5DD41012F","user_header":"https://static001.geekbang.org/account/avatar/00/13/de/bc/1245cd12.jpg","comment_is_top":false,"comment_ctime":1545813893,"is_pvip":false,"replies":[{"id":"19611","content":"å—¯ï¼Œä»£ç å°±æ˜¯è¿™ä¹ˆå†™çš„ æˆ‘ä¹Ÿè§‰å¾—å¯ä»¥ä¼˜åŒ–ä¸€ä¸‹â€¦ ä¸è¿‡ç°åœ¨å°±è¿™æ ·ğŸ˜“","user_name":"ä½œè€…å›å¤","comment_id":54238,"uid":"1264162","ip_address":"","utype":1,"ctime":1545815105,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":1,"race_medal":0,"score":"61675356037","product_id":100020801,"comment_content":"å¯¹äº count(ä¸»é”® id) ï¼Œserverå±‚æ‹¿åˆ°IDï¼Œåˆ¤æ–­IDæ˜¯ä¸å¯èƒ½ä¸ºç©ºçš„æŒ‰è¡Œç´¯åŠ ã€‚è¿™ä¸ªåœ°æ–¹ï¼Œæ˜¯ä¸æ˜¯åˆç‚¹é—®é¢˜ï¼Œæ—¢ç„¶æ˜¯ä¸»é”®IDï¼Œæ˜¯ä¸€å®šä¸ä¼šä¸ºç©ºçš„ï¼Œè¿™ä¸ªserverå±‚è¿˜éœ€è¦åˆ¤æ–­ä¸ä¸ºç©ºå—","like_count":14,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":434402,"discussion_content":"å—¯ï¼Œä»£ç å°±æ˜¯è¿™ä¹ˆå†™çš„ æˆ‘ä¹Ÿè§‰å¾—å¯ä»¥ä¼˜åŒ–ä¸€ä¸‹â€¦ ä¸è¿‡ç°åœ¨å°±è¿™æ ·ğŸ˜“","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545815105,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":50275,"user_name":"æŸã€äºº","can_delete":false,"product_type":"c1","uid":1308784,"ip_address":"","ucode":"ADB42AA12A11C1","user_header":"https://static001.geekbang.org/account/avatar/00/13/f8/70/f3a33a14.jpg","comment_is_top":false,"comment_ctime":1544941922,"is_pvip":false,"discussion_count":5,"race_medal":0,"score":"35904680290","product_id":100020801,"comment_content":"è°ˆè°ˆè‡ªå·±çš„ç†è§£,æœ‰ä¸å¯¹ä¹‹å¤„è¿˜è¯·è€å¸ˆæŒ‡å‡º:<br>æ•°æ®ä¸€è‡´æ€§é—®é¢˜ç›®å‰æ¥è¯´ä¸»è¦åˆ†ä¸ºä¸‰ç±»<br>1.ä¸»ä»ä¸ä¸€è‡´<br>è§£å†³åŠæ³•:åŠåŒæ­¥å¤åˆ¶after_commit,after_sync,MGR(after_prepare)ã€‚ä½†æ˜¯éƒ½ä¸èƒ½å®Œæˆæ»¡è¶³å®Œå…¨å®æ—¶ä¸€è‡´,ç”±äºç­‰å¾…çš„ackç‚¹ä¸åŒ,ç›¸å¯¹æ¥è¯´ä¸€è‡´æ€§çš„å¼ºåº¦æ˜¯é€’å¢.<br>2.æ•°æ®åº“ä¸ç¼“å­˜çš„ä¸ä¸€è‡´<br>è§£å†³åŠæ³•:è¯»æ“ä½œç›´æ¥è¯»ç¼“å­˜,å†™æ“ä½œå…ˆæ›´æ–°åˆ°æ•°æ®åº“,æ·˜æ±°ç¼“å­˜(ç¨‹åºéœ€è¦ä¿è¯ä¸¤ä¸ªæ“ä½œçš„åŸå­æ€§).ç”±äºè¯¥keyçš„ç¼“å­˜å·²ç»æ¸…ç†æ‰,é‚£ä¹ˆä¸‹æ¬¡è¯»çš„æ—¶å€™éœ€è¦å…ˆè¯»æ•°æ®åº“,åœ¨é‡å»ºç¼“å­˜.<br>ç”±äºredisæ˜¯å•çº¿ç¨‹,ä¿è¯äº†ä¸€ä¸ªæ“ä½œçš„åŸå­æ€§.å¯ä»¥é€šè¿‡è®¾ç½®appendfsync alwaysæ¥ä¿è¯æ¯æ¬¡æ“ä½œéƒ½æŠŠè¯¥æ“ä½œè®°å½•å¹¶è½ç›˜åˆ°aofæ–‡ä»¶é‡Œ(ä¸è¿‡ä¸€èˆ¬redisè¯¥å€¼ä¸ºeverysec),æ¯•ç«Ÿä½¿ç”¨redisçš„ç›®çš„ä¸æ˜¯ä¸ºäº†ä¿è¯acid.è¿˜æ˜¯è¦æ ¹æ®ä¸šåŠ¡æ¥é€‰æ‹©<br>3.ä¸€ä¸ªäº‹åŠ¡è·¨å¤šä¸ªèŠ‚ç‚¹æˆ–è€…å¤šç§æ•°æ®åº“(åˆ†åº“åˆ†è¡¨å’Œé“¶è¡Œè½¬è´¦è¿™ç§ä¾‹å­)<br>ç›®å‰å¥½åƒéƒ½æ˜¯é€šè¿‡2pc,3pcæ¥ä¿è¯çš„ã€‚<br><br>count(å­—æ®µå€¼):å¦‚æœè¯¥å­—æ®µä¸Šæœ‰nullå€¼.æ¯è¡Œçš„è¡Œå¤´æœ‰ä¸€ä¸ªæ ‡è®°ä½,æ ‡è®°è¯¥è¡Œæ˜¯å¦ä¸ºnull.æ‰€ä»¥å¤šäº†ä¸€å±‚åˆ¤æ–­ã€‚ç›¸å¯¹æ›´è€—æ—¶<br>count(ä¸»é”®id):å³ä¾¿æ˜¯é€‰æ‹©çš„æœ‰nullå€¼çš„äºŒçº§ç´¢å¼•,ä½†æ˜¯ä¹Ÿå¯ä»¥æŒºå¿«çš„æ­£ç¡®è®¡æ•°ã€‚å› ä¸ºnullçš„è¯å­—æ®µå€¼è™½ç„¶ä¸ºnull,ä½†æ˜¯è¯¥è¡Œä¸Šä¸»é”®idä»¥åŠæŒ‡å‘èšç°‡ç´¢å¼•è¯¥idçš„æŒ‡é’ˆè¿˜æ˜¯å­˜åœ¨çš„,æ‰€ä»¥ä¸å½±å“è®¡æ•°,ä¹Ÿä¸ç”¨åšåˆ¤æ–­,ç›´æ¥éå†è¯¥äºŒçº§ç´¢å¼•,å–å‡ºidå€¼,æŒ‰è¡Œç´¯åŠ å°±è¡Œã€‚<br>count(1)å’Œcount(*):çœ‹å®˜æ–¹æ–‡æ¡£ä¸Šè¯´æ˜¯5.7.18ç‰ˆæœ¬ä¹‹å‰æ˜¯æ‰«æèšç°‡ç´¢å¼•,ä¹‹åæ˜¯äºŒçº§ç´¢å¼•ã€‚è™½ç„¶ä¸å–å€¼,åªè®¡æ•°ã€‚ä½†æ˜¯äºŒçº§ç´¢å¼•æ¯”èšç°‡ç´¢å¼•éœ€è¦æ‰«æçš„é¡µæ•°ç›¸å¯¹æ¥è¯´æ›´å°‘,è¿™åº”è¯¥ä¹Ÿæ˜¯ä¸€ç§ä¼˜åŒ–,ä¸è¿‡æˆ‘åšæµ‹è¯•perconaç‰ˆæœ¬çš„5.6éƒ½æ˜¯é€‰æ‹©äº†äºŒçº§ç´¢å¼•<br>è¿™æœŸå¹²è´§æŒºå¤šçš„,å­¦ä¼šäº†å¦‚æœæŸè¡¨ä¸Šæœ‰countæ¯”è¾ƒå¤šçš„æ“ä½œ,æœ€å¥½æ˜¯ç”¨count(1)æˆ–è€…count(*),ç„¶åé€‰æ‹©ä¸€åˆ—å ç”¨å­—èŠ‚æ•°æœ€å°‘çš„å»ºç«‹ç´¢å¼•(æ¯”å¦‚tinyintç±»å‹)<br><br>è¿˜æœ‰ä¸ªé—®é¢˜è¯·æ•™ä¸‹è€å¸ˆ:<br>1.å¦‚æœæŸåˆ—è®¾ç½®ä¸ºnot nullå»ºç«‹ç´¢å¼•.é‚£ä¹ˆæ˜¯ä¸æ˜¯count(id)èµ°è¯¥ç´¢å¼•å’Œcount(è¯¥åˆ—)æ•ˆç‡æ˜¯ä¸æ˜¯ä¸€æ ·çš„ï¼Ÿéƒ½ä¸ç”¨åšåˆ¤æ–­,ä¸¤è€…éƒ½æ˜¯éœ€è¦æŠŠæ•´ä¸ªäºŒçº§ç´¢å¼•ä¼ ç»™serverå±‚è®¡æ•°?è¿˜æ˜¯è¯´count(id)åªéœ€è¦ä¼ id,è€Œcount(å­—æ®µ)åªéœ€è¦ä¼ å­—æ®µå€¼ç»™serverå±‚åšè®¡æ•°ï¼Ÿ","like_count":8,"discussions":[{"author":{"id":1335293,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKR3ibELhjgVicCNShZCBwvaDxibnzibggG4wUzVkS2mkDxUBZyIs87nDEdJ7PiahJBVoZcuhQ84RxAziag/132","nickname":"å‘¨æ²»æ…§","note":"","ucode":"7D56C4E66BEE17","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":187620,"discussion_content":"æ–‡ä¸­é”™è¯¯åœ°æ–¹:\n1.ä¸»ä»åŒæ­¥æ—¶åŠåŒæ­¥å¤åˆ¶æ—¶å¯ä»¥ä¿è¯å®æ—¶çš„ä¸€è‡´æ€§çš„,å› ä¸ºå†™æ—¶å†™ä¸»å’Œä»ä¹‹åæ‰å“åº”åªä¸è¿‡è¿™æ ·å†™çš„å¹¶å‘ä¸Šä¸å»;å…¶ä»–è®¿é—®æœ‰å¼ºåˆ¶è¯»ä¸»,æ¶ˆæ¯ä¸­é—´ä»¶è·¯ç”±è¯»ä¸»,ç¼“å­˜æ˜¯å¦å¤±æ•ˆæ¥è¯»ä¸»\n2.ç¼“å­˜å’Œæ•°æ®åº“ä¸€è‡´æ€§,åº”è¯¥æ˜¯å…ˆåˆ é™¤ç¼“å­˜åœ¨å»æ›´æ–°db,åˆ é™¤ç¼“å­˜å¤±è´¥ç›´æ¥è¿”å›,æ­¤æ—¶ç¼“å­˜å’Œæ•°æ®åº“éƒ½æ˜¯æ—§æ•°æ®ä¸€è‡´æ€§å¾—åˆ°ä¿è¯;åˆ é™¤ç¼“å­˜æˆåŠŸ,æ›´æ–°dbå¤±è´¥,ç›´æ¥è¿”å›æ­¤æ—¶ç¼“å­˜ä¸ºç©ºä¸å½±å“ä¸€è‡´æ€§;åˆ é™¤ç¼“å­˜æˆåŠŸ,dbæ›´æ–°æˆåŠŸ,ç¼“å­˜ä¸ºç©º,dbæˆåŠŸ,ç¼“å­˜ç­‰å¾…ä¸‹ä¸€æ¬¡è¯»æ›´æ–°ä½†æ˜¯è¦é˜²æ­¢è¯»çš„æ˜¯ä»åº“,å¯èƒ½ä¸»ä»ä¹‹é—´è¿˜æœªåŒæ­¥å®Œæˆ\n","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1582757419,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1014665,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7b/89/34f2cbcc.jpg","nickname":"æ¨å®‡","note":"","ucode":"EB74DF6E269F03","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1335293,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKR3ibELhjgVicCNShZCBwvaDxibnzibggG4wUzVkS2mkDxUBZyIs87nDEdJ7PiahJBVoZcuhQ84RxAziag/132","nickname":"å‘¨æ²»æ…§","note":"","ucode":"7D56C4E66BEE17","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":319038,"discussion_content":"å…ˆå†™åº“ï¼Œå†æ·˜æ±°ç¼“å­˜ï¼Œå¦‚æœæ·˜æ±°å¤±è´¥åˆ™å‘ä¸€æ¡æ¶ˆæ¯å¼‚æ­¥æ·˜æ±°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603930926,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":187620,"ip_address":""},"score":319038,"extra":""},{"author":{"id":1986739,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/50/b3/9269cd59.jpg","nickname":"LWD","note":"","ucode":"DDA444DB113C01","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1335293,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKR3ibELhjgVicCNShZCBwvaDxibnzibggG4wUzVkS2mkDxUBZyIs87nDEdJ7PiahJBVoZcuhQ84RxAziag/132","nickname":"å‘¨æ²»æ…§","note":"","ucode":"7D56C4E66BEE17","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":587457,"discussion_content":"åŠåŒæ­¥åªèƒ½ä¿è¯ä¸€ä¸»ä¸€ä»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663064757,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":187620,"ip_address":"å¹¿ä¸œ"},"score":587457,"extra":""}]},{"author":{"id":1115724,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLwSoTjHPX5tm4whBSfoZLX6toZxrZGUaLABQywKNf4MDc9toK3QSV7Z99ATcGicFCysoleQ5ISzmw/132","nickname":"ä¹˜é£","note":"","ucode":"0420C5535DACB7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":47099,"discussion_content":"ä¸­é—´æåˆ°è¿‡innoDBä¸serveräº¤äº’å®šä¹‰:\ninnoDBåªè¿”å›serveréœ€è¦çš„æ•°æ®,æ„å‘³ç€count(id)è¿”å›ç»™serverå±‚çš„æ˜¯idåˆ—,è€Œå…·ä½“åˆ¤æ–­éç©ºæ˜¯serverå»åˆ¤æ–­.\n\n","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1573271386,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":158074,"discussion_content":"count(å­—æ®µï¼‰çš„æ•ˆç‡ä¾æ—§æ¯”count(idï¼‰å·®ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580548611,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":49678,"user_name":"wljs","can_delete":false,"product_type":"c1","uid":1306543,"ip_address":"","ucode":"6B88A664972AD2","user_header":"https://static001.geekbang.org/account/avatar/00/13/ef/af/ba786593.jpg","comment_is_top":false,"comment_ctime":1544751829,"is_pvip":false,"replies":[{"id":"17913","content":"è·Ÿshow table statusæ˜¯ä¸€æ ·çš„","user_name":"ä½œè€…å›å¤","comment_id":49678,"uid":"1264162","ip_address":"","utype":1,"ctime":1544762704,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":1,"race_medal":0,"score":"31609522901","product_id":100020801,"comment_content":"ä¸ºä½•æ²¡è¯´åœ¨information_schema.tablesä¹Ÿå¯ä»¥æŸ¥çœ‹è¡¨è®°å½•æ•°ã€‚","like_count":7,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432716,"discussion_content":"è·Ÿshow table statusæ˜¯ä¸€æ ·çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544762704,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":49637,"user_name":"é™ˆå¤©å¢ƒ","can_delete":false,"product_type":"c1","uid":1100792,"ip_address":"","ucode":"FF9EA3ACAAF864","user_header":"https://static001.geekbang.org/account/avatar/00/10/cb/f8/f4adadcb.jpg","comment_is_top":false,"comment_ctime":1544748842,"is_pvip":true,"replies":[{"id":"17861","content":"ç´¢å¼•æ¡ä»¶è¿‡æ»¤å®Œåè¿˜å¤šå°‘è¡Œï¼Ÿå¦‚æœè¡Œæ•°å°‘ï¼ˆå‡ ç™¾è¡Œï¼Ÿï¼‰å°±æ²¡å…³ç³»ç›´æ¥æ‰§è¡Œäº†","user_name":"ä½œè€…å›å¤","comment_id":49637,"uid":"1264162","ip_address":"","utype":1,"ctime":1544749511,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":5,"race_medal":0,"score":"31609519914","product_id":100020801,"comment_content":"ç¢°åˆ°å¤§éƒ¨åˆ†æƒ…å½¢éƒ½æ˜¯å¸¦æ¡ä»¶æŸ¥è¯¢çš„count,ï¼Œè¿™ä¸ªæ€ä¹ˆè§£ï¼Ÿ","like_count":7,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432697,"discussion_content":"ç´¢å¼•æ¡ä»¶è¿‡æ»¤å®Œåè¿˜å¤šå°‘è¡Œï¼Ÿå¦‚æœè¡Œæ•°å°‘ï¼ˆå‡ ç™¾è¡Œï¼Ÿï¼‰å°±æ²¡å…³ç³»ç›´æ¥æ‰§è¡Œäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544749511,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1986739,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/50/b3/9269cd59.jpg","nickname":"LWD","note":"","ucode":"DDA444DB113C01","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":587458,"discussion_content":"è¿™ä¸ªå¯ä»¥è€ƒè™‘ä¸šåŠ¡ä¸Šå…¥æ‰‹ï¼›å¤§äº1000æ¡æ˜¾ç¤º1000+ï¼›å°äº1000æ‰æ˜¾ç¤ºå…·ä½“æ•°å€¼ï¼›sqlé€šè¿‡limit1000åšé™åˆ¶","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663064854,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1211178,"avatar":"https://static001.geekbang.org/account/avatar/00/12/7b/2a/7d8b5943.jpg","nickname":"LH","note":"","ucode":"819B9B2409E834","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":392902,"discussion_content":"æœ‰æ¡ä»¶å°±ç®—äº†ï¼Œå…³é”®è¿˜æœ‰æ¨¡ç³ŠæŸ¥è¯¢ï¼Œç»“æœè¿˜å‡ ç™¾ä¸‡æ¡ã€‚æ˜¯ä¸æ˜¯è¯¥æ¢æ•°æ®åº“äº†âŠ™ï¹âŠ™","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631172915,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1780797,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/2c/3d/0bd58aa4.jpg","nickname":"Em","note":"","ucode":"32012A5C603C8A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1211178,"avatar":"https://static001.geekbang.org/account/avatar/00/12/7b/2a/7d8b5943.jpg","nickname":"LH","note":"","ucode":"819B9B2409E834","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":576997,"discussion_content":"å­˜rediså§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655878471,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":392902,"ip_address":""},"score":576997,"extra":""}]},{"author":{"id":1669916,"avatar":"","nickname":"è’‹è¶…","note":"","ucode":"BB37A2ED77C06D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":195841,"discussion_content":"å¦‚æœæ˜¯æŸ¥å‡ºæ¥è¡Œæ•°å¾ˆå¤šï¼Œæœ‰æ²¡æœ‰ä»€ä¹ˆåŠæ³•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583314982,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":226384,"user_name":"ã€‚","can_delete":false,"product_type":"c1","uid":1236620,"ip_address":"","ucode":"089148414D59D2","user_header":"https://static001.geekbang.org/account/avatar/00/12/de/8c/bd9d1868.jpg","comment_is_top":false,"comment_ctime":1592058076,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"27361861852","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæ‚¨å¥½ï¼<br>ä»Šå¤©ç¿»äº†ä¸‹æ–‡æ¡£ï¼ŒæŒ‰ç…§MySQL innodbç‰ˆæœ¬æƒ…å†µï¼Œæ–‡æ¡£å·²æ˜ç¡®ç»™å‡ºäº†ä»¥ä¸‹è¯´æ˜ï¼šInnoDB handles SELECT COUNT(*) and SELECT COUNT(1) operations in the same way. There is no performance differenceã€‚<br>ã€https:&#47;&#47;dev.mysql.com&#47;doc&#47;refman&#47;5.7&#47;en&#47;group-by-functions.html#function_countã€‘æ˜¯å¦å¯ä»¥è‡³å°‘è®¤ä¸ºåœ¨5.7.18ç‰ˆæœ¬ä»¥åcount(1)=count(*)å‘¢ã€å› ä¸ºMySQL æ–‡æ¡£æ²¡æœ‰æ˜ç¡®æŒ‡æ˜å…·ä½“ç‰ˆæœ¬ï¼ŒçŒœæµ‹ä¸‹å¤§æ¦‚ç‰ˆæœ¬ã€‘2ä¸ªæ–¹æ³•çš„æ€§èƒ½å®Œå…¨ä¸€è‡´.ä½†æ˜¯å¦‚æœæ˜¯è¿™æ ·ï¼Œé‚£ä¹ˆcount(1)è¿˜æ˜¯åƒè€å¸ˆæ‚¨è¯´çš„é‚£æ ·ï¼šInnoDB å¼•æ“éå†æ•´å¼ è¡¨ï¼Œä½†ä¸å–å€¼ã€‚server å±‚å¯¹äºè¿”å›çš„æ¯ä¸€è¡Œï¼Œæ”¾ä¸€ä¸ªæ•°å­—â€œ1â€è¿›å»ï¼Œåˆ¤æ–­æ˜¯ä¸å¯èƒ½ä¸ºç©ºçš„ï¼ŒæŒ‰è¡Œç´¯åŠ ã€‚è¿˜æˆç«‹å—ï¼Ÿ<br>ç¬¬äºŒé—®é¢˜ï¼Œæƒ³è¯·æ•™æ‚¨ä¸€ä¸‹ï¼Œ2-3ä¸ªè¡¨joinä¹‹åï¼Œæ·»åŠ å„ç§æ¡ä»¶çš„count()è®¡ç®—ä»€ä¹ˆæ–¹æ¡ˆä¼šæ›´å¥½äº›å‘¢ï¼Œå•æ–¹é¢çš„ç¼“å­˜ï¼Œæ„Ÿè§‰å¹¶ä¸æ˜¯ååˆ†æœ‰æ•ˆå•Šï¼Œå› ä¸ºæ¡ä»¶çš„ç»„åˆæ’åˆ—ä¼šå¾ˆå¤š","like_count":6,"discussions":[{"author":{"id":2057210,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/63/fa/cf90b566.jpg","nickname":"æ²‰æ·€","note":"","ucode":"1A87FDA3637D94","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":549871,"discussion_content":"5.6 5.7 8.0éƒ½æœ‰è¿™ä¸€å¥è¯InnoDB handles SELECT COUNT(*) and SELECT COUNT(1) operations in the same way. There is no performance difference.","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644285439,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":107165,"user_name":"2009532140","can_delete":false,"product_type":"c1","uid":1311063,"ip_address":"","ucode":"B642DE795FB5A8","user_header":"https://static001.geekbang.org/account/avatar/00/14/01/57/13fd8e5a.jpg","comment_is_top":false,"comment_ctime":1561471371,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"27331275147","product_id":100020801,"comment_content":"å…³é”®ï¼Œå¾ˆå¤šæŸ¥è¯¢ä¸ä»…ä»…æ˜¯å•è¡¨çš„è®¡æ•°ã€‚å¤§éƒ¨åˆ†æƒ…å†µä¸‹æ˜¯å¯¹è¡¨è”åˆæŸ¥è¯¢çš„è®¡æ•°ã€‚æ˜¯ä¸æ˜¯æ²¡æœ‰ç‰¹æ®Šå¥½çš„æ€è·¯äº†","like_count":6,"discussions":[{"author":{"id":1254801,"avatar":"https://static001.geekbang.org/account/avatar/00/13/25/91/46600294.jpg","nickname":"çŒ´å“¥ä¸€ä¸€ cium","note":"","ucode":"38EC64F8D1A0B4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":312641,"discussion_content":"å—¯,ç»Ÿè®¡çš„æ˜¯æ•°æ®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602754533,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":158071,"discussion_content":"åƒè¿™ç§åŠ æ¡ä»¶çš„ï¼Œä¸€èˆ¬å°±åªèƒ½ç›´æ¥æ‰§è¡Œè®¡æ•°äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580548522,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":105051,"user_name":"æå¨","can_delete":false,"product_type":"c1","uid":1460961,"ip_address":"","ucode":"3409A9390BD1FD","user_header":"https://static001.geekbang.org/account/avatar/00/16/4a/e1/2a498473.jpg","comment_is_top":false,"comment_ctime":1560908759,"is_pvip":false,"discussion_count":4,"race_medal":0,"score":"18740777943","product_id":100020801,"comment_content":"åå°æœ‰å¾ˆå¤šè¡¨æ ¼å½¢å¼çš„æŠ¥è¡¨ï¼Œåˆ†é¡µæ˜¯éœ€è¦å±•ç¤ºæ€»é¡µæ•°çš„ï¼Œå½“æ•°æ®å¾ˆå¤šï¼Œä½†æŸ¥è¯¢æ¡ä»¶è¿‡æ»¤æ‰çš„æ•°æ®æ¯”è¾ƒå°‘æ—¶ï¼ŒæŸ¥è¯¢é€Ÿåº¦å°±å¾ˆæ…¢(10å‡ ç§’)ï¼Œè¿™ä¸ªæ€ä¹ˆè§£ï¼Ÿ","like_count":4,"discussions":[{"author":{"id":1062848,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ersGSic8ib7OguJv6CJiaXY0s4n9C7Z51sWxTTljklFpq3ZAIWXoFTPV5oLo0GMTkqW5sYJRRnibNqOJQ/132","nickname":"walleæ–Œ","note":"","ucode":"0DB3243004951F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":293292,"discussion_content":"åˆ†é¡µä¸€èˆ¬å¯ä»¥åŠ ä¸Šä¸Šæ¬¡é¡µæ•°çš„offset  ä¹Ÿå¯ä»¥æ˜¯æŒ‡idï¼Œä¸‹ä¸€æ¬¡æŸ¥è¯¢å¸¦ä¸Šè¿™ä¸ªid  é€Ÿåº¦ä¼šå¿«å¾ˆå¤šã€‚è¿˜æœ‰å¦‚æœä½ ä»¬é‚£è¯»å†™åˆ†ç¦»ï¼Œå»ºè®®countè®¡ç®—ä¸åˆ†é¡µæŸ¥è¯¢å¹¶è¡ŒæŸ¥è¯¢ï¼Œé€Ÿåº¦ä¼šå¿«å¾ˆå¤šï¼Œå½“ç„¶ç¼ºç‚¹å°±æ˜¯ countåˆ¤æ–­ä¸éœ€è¦ä¸‹ä¸€é¡µçš„æ—¶å€™ï¼Œå¤šä¸€æ¬¡åˆ†é¡µæŸ¥è¯¢ã€‚è¿™äº›éƒ½å¯ä»¥åœ¨ä¸šåŠ¡ä¸Šè§„é¿","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1595499337,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2403312,"avatar":"https://static001.geekbang.org/account/avatar/00/24/ab/f0/12b18bba.jpg","nickname":"Vincentæ®µ","note":"","ucode":"36A764BAEF53A4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1062848,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ersGSic8ib7OguJv6CJiaXY0s4n9C7Z51sWxTTljklFpq3ZAIWXoFTPV5oLo0GMTkqW5sYJRRnibNqOJQ/132","nickname":"walleæ–Œ","note":"","ucode":"0DB3243004951F","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":340061,"discussion_content":"mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609895827,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":293292,"ip_address":""},"score":340061,"extra":""}]},{"author":{"id":1453053,"avatar":"https://static001.geekbang.org/account/avatar/00/16/2b/fd/7013289d.jpg","nickname":"æ¸©æ•…è€ŒçŸ¥æ–°å¯ä»¥ä¸ºå¸ˆçŸ£","note":"","ucode":"FADCDFA9F9E5E8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":121047,"discussion_content":"æ˜¯å¦å¯ä»¥è€ƒè™‘åˆ†æ‰¹è·å–åœ¨å†…å­˜è®¡ç®—æ€»æ¡æ•°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578309979,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1066508,"avatar":"https://static001.geekbang.org/account/avatar/00/10/46/0c/773ba2f3.jpg","nickname":"ä¸‹ä¸ªç›®æ ‡45k","note":"","ucode":"193BA8C3AA9A61","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1453053,"avatar":"https://static001.geekbang.org/account/avatar/00/16/2b/fd/7013289d.jpg","nickname":"æ¸©æ•…è€ŒçŸ¥æ–°å¯ä»¥ä¸ºå¸ˆçŸ£","note":"","ucode":"FADCDFA9F9E5E8","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":334613,"discussion_content":"æŠŠé—®é¢˜å¤æ‚åŒ–äº†ï¼Œä¸€æ¥¼çš„æ–¹æ¡ˆå¯è¡Œã€‚è¦å¿«çš„æœ¬è´¨æ˜¯å‡å°‘æ‰«æè¡Œæ•°ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1607917095,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":121047,"ip_address":""},"score":334613,"extra":""}]}]},{"had_liked":false,"id":72451,"user_name":"XD","can_delete":false,"product_type":"c1","uid":1079293,"ip_address":"","ucode":"DC9DCFB3841A4E","user_header":"https://static001.geekbang.org/account/avatar/00/10/77/fd/c6619535.jpg","comment_is_top":false,"comment_ctime":1551628770,"is_pvip":false,"replies":[{"id":"26247","content":"å¯ä»¥ç†è§£ä¸ºï¼Œè¿”å›äº†ä¸€è¡Œï¼Œä½†æ˜¯0ä¸ªå­—æ®µ","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1551656114,"ip_address":"","comment_id":72451,"utype":1}],"discussion_count":3,"race_medal":0,"score":"18731497954","product_id":100020801,"comment_content":"å¯¹äº count(1) æ¥è¯´ï¼ŒInnoDB å¼•æ“éå†æ•´å¼ è¡¨ï¼Œä½†ä¸å–å€¼ã€‚<br><br>è€å¸ˆï¼Œæœ‰ç‚¹å¥½å¥‡innodbä¸å–å€¼çš„è¯ï¼Œè¿”å›ç»™æ‰§è¡Œå™¨çš„æ•°æ®æ˜¯å•¥ï¼Ÿæˆ‘çŒœæ˜¯ä¸€ä¸ªç±»ä¼¼endOfLineçš„æ ‡è¯†ï¼Ÿ<br>é‚£å¦‚æœè¿”å›æ•°æ®å¸¦å€¼çš„è¯ï¼Œè¿™ä¸ªæ•°æ®æ ¼å¼æ€ä¹ˆæ ·çš„å‘¢ï¼Ÿç±»ä¼¼jsonçš„kvå¯¹ï¼Œè¿˜æ˜¯ç±»ä¼¼excelçš„å…ˆæœ‰ä¸€è¡Œè¡¨å¤´ï¼Œåé¢è·Ÿç€æ•°æ®å‘¢ï¼Ÿ<br><br>æˆ‘æœ¬æ¥è§‰å¾—æ›´åƒåè€…ï¼Œè¿™æ ·åœ¨åšcount(1)å’Œcount(id)çš„æ—¶å€™åªå¼€å¤´å¤šä¸€æ¬¡è¡¨å¤´åˆ¤æ–­å°±å¥½äº†ã€‚ä½†æ˜¯çœ‹æ–‡ç« ä¸­çš„æè¿°å¥½åƒæ˜¯æ¯ä¸€è¡Œéƒ½è¦åˆ¤æ–­ä¸€æ¬¡ï¼Ÿé‚£ä¼¼ä¹æ›´åƒæ˜¯kväº†ã€‚","like_count":4,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441594,"discussion_content":"å¯ä»¥ç†è§£ä¸ºï¼Œè¿”å›äº†ä¸€è¡Œï¼Œä½†æ˜¯0ä¸ªå­—æ®µ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551656114,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1526355,"avatar":"https://static001.geekbang.org/account/avatar/00/17/4a/53/063f9d17.jpg","nickname":"moonfox","note":"","ucode":"902BFF40EFA9FA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":536916,"discussion_content":"&#34;ä½œè€…å›å¤: å¯ä»¥ç†è§£ä¸ºï¼Œè¿”å›äº†ä¸€è¡Œï¼Œä½†æ˜¯0ä¸ªå­—æ®µ&#34; å±…ç„¶å’Œæˆ‘çŒœçš„ä¸€æ ·ï¼Œå“ˆå“ˆå“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638891390,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1543162,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8b/fa/103e6900.jpg","nickname":"å±±é¬¼è°£","note":"","ucode":"E25F498B85A01B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":405202,"discussion_content":"æˆ‘è§‰å¾—ï¼ŒKVæ˜¯ä¸å¯èƒ½çš„ï¼Œå› ä¸ºå ä½ç½®ï¼›æˆ‘ä¼°è®¡æ˜¯æŒ‰ä½ç½®å­˜æ”¾çš„æ•°æ®ï¼Œç¬¬ä¸€ä¸ªæ”¾ä»€ä¹ˆï¼Œç¬¬äºŒä¸ªæ”¾ä»€ä¹ˆï¼›éœ€è¦åˆ¤æ–­çš„å­—æ®µï¼Œç»Ÿä¸€ æ”¾æœ€å‰é¢ æˆ–è€… æœ€åé¢ã€‚\n\nå¯¹è¿”å›ç»™æ‰§è¡Œå™¨çš„æ•°æ®ï¼Œæˆ‘ä¹Ÿæœ‰è¿™æ–¹é¢çš„ç–‘é—®ï¼›ä¸å–å€¼ï¼Œè¿”å›çš„æ˜¯ä»€ä¹ˆæ•°æ®å‘¢ï¼Ÿè€å¸ˆå›å¤ä¸ºç©ºè¡Œï¼Œé‚£ä¹ˆå°±åªèƒ½æƒ³è±¡ä¸ºtxtæ–‡ä»¶é‚£ç§çš„ç©ºè¡Œäº†ã€‚ä¸€ä¸ªè™šæ— çš„æ„Ÿè§‰ï¼Œå“ˆå“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634528612,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":49877,"user_name":"Bin","can_delete":false,"product_type":"c1","uid":1304406,"ip_address":"","ucode":"26BA010D2990C4","user_header":"https://static001.geekbang.org/account/avatar/00/13/e7/56/87f45704.jpg","comment_is_top":false,"comment_ctime":1544783659,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18724652843","product_id":100020801,"comment_content":"ç­”ï¼šå…ˆæ’å…¥æ“ä½œè®°å½•ï¼Œå†æ›´æ–°è®¡æ•°è¡¨ã€‚<br>       åœ¨InnoDBäº‹åŠ¡ä¸­ï¼Œè¡Œé”æ˜¯åœ¨éœ€è¦çš„æ—¶å€™æ‰åŠ ä¸Š, ç­‰åˆ°äº‹åŠ¡ç»“æŸ(commit)çš„æ—¶å€™æ‰é‡Šæ”¾ã€‚<br>       æ¡ˆä¾‹ä¸­çš„æ›´æ–°æ“ä½œå¾ˆå¤šæ—¶å€™éƒ½æ˜¯æ›´æ–°åŒä¸€ä¸ªæ•°æ®å¯¹è±¡, å¦‚æœæ˜¯å…ˆæ›´æ–°è®¡æ•°è¡¨ï¼Œé‚£ä¹ˆæŒæœ‰çš„é”æ—¶é—´ä¼šæ›´é•¿.","like_count":4},{"had_liked":false,"id":54917,"user_name":"Ruian","can_delete":false,"product_type":"c1","uid":1318776,"ip_address":"","ucode":"39112092A920F1","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIyn6s0CNx9F9Uu4nia6z7ZldUo8XdXEF4ia4ojfTRCvMT8IZgjRcpFulYqZjq4IvtrE5yYfzpgzMWA/132","comment_is_top":false,"comment_ctime":1545981553,"is_pvip":false,"replies":[{"id":"19891","content":"ä½ è¿™ä¸ªæ˜¯ç¬›å¡å°”ç§¯è‚¯å®šæ…¢çš„â€¦ä½ çš„ä¸šåŠ¡éœ€æ±‚æ˜¯å•¥ï¼Œè¿™ä¸ªè¯­å¥çš„ä¸šåŠ¡æ„ä¹‰æ˜¯ä»€ä¹ˆ","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1545994730,"ip_address":"","comment_id":54917,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14430883441","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæˆ‘æœ‰ä¸€ä¸ªé—®é¢˜è¯·æ•™ä¸‹æ‚¨ã€‚æˆ‘çš„mysqlæ•°æ®åº“ æœ‰ä¸€å¼ è¡¨project_des (850ä¸‡æ•°æ®) count(1) åªè¦0.05s   å’Œä»è¡¨projectï¼ˆ6500æ¡æ•°æ®ï¼‰å…³è”åéœ€è¦15s       æŸ¥çœ‹æ‰§è¡Œè®¡åˆ’å‘ç°éƒ½èµ°ç´¢å¼•äº†ã€‚ä¸çŸ¥é“ä¸ºå•¥è¿™ä¹ˆæ…¢ï¼Ÿ<br>æŸ¥è¯¢è¯­å¥ select count(1) from project_des a,project b where a.project_id=b.id æˆ‘æ¢exists å’Œin ä¹Ÿè¿™ä¹ˆæ…¢","like_count":3,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":434611,"discussion_content":"ä½ è¿™ä¸ªæ˜¯ç¬›å¡å°”ç§¯è‚¯å®šæ…¢çš„â€¦ä½ çš„ä¸šåŠ¡éœ€æ±‚æ˜¯å•¥ï¼Œè¿™ä¸ªè¯­å¥çš„ä¸šåŠ¡æ„ä¹‰æ˜¯ä»€ä¹ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545994730,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":54211,"user_name":"è§è§æœ¨å¶","can_delete":false,"product_type":"c1","uid":1309279,"ip_address":"","ucode":"F80561580DD40F","user_header":"","comment_is_top":false,"comment_ctime":1545807273,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"14430709161","product_id":100020801,"comment_content":"æ­ªä¸ªæ¥¼è¯·æ•™ä¸ªä¸šåŠ¡ä¸­é‡åˆ°çš„é—®é¢˜ï¼š<br>è¡¨ç»“æ„å¦‚ä¸‹ï¼š<br> CREATE TABLE `tablename` (<br>  `id` int(10) NOT NULL AUTO_INCREMENT,<br>  `uid` bigint(20) NOT NULL DEFAULT &#39;0&#39;,<br>  `status` tinyint(1) NOT NULL DEFAULT &#39;1&#39; ,<br>  `date` varchar(8) NOT NULL DEFAULT &#39;0&#39; COMMENT &#39;æ—¥æœŸ&#39;,<br>  `source` varchar(20) NOT NULL DEFAULT &#39;&#39; COMMENT &#39;æ¥æº&#39;,<br>  `ctime` datetime NOT NULL DEFAULT &#39;0000-00-00 00:00:00&#39; COMMENT &#39;åˆ›å»ºæ—¶é—´&#39;,<br>  `etime` datetime NOT NULL DEFAULT &#39;0000-00-00 00:00:00&#39; COMMENT &#39;æ›´æ–°æ—¶é—´&#39;,<br>  PRIMARY KEY (`id`),<br>  UNIQUE KEY `idx_uid_date` (`uid`,`date`),<br>  KEY `idx_ctime` (`ctime`)<br>) ENGINE=InnoDB AUTO_INCREMENT=685725 DEFAULT CHARSET=utf8<br><br>å…¶ä¸­ UNIQUE KEY `idx_uid_date` (`uid`,`date`)<br><br>æŸ¥è¯¢æŒ‡å®šdateä¸‹uidä¸ªæ•°ï¼š<br>æ–¹å¼ä¸€ï¼šselect count(uid) from tablename where date = &#39;20181201&#39;;<br>+------------+<br>| count(uid) |<br>+------------+<br>|       8330 |<br>+------------+<br>æ–¹å¼äºŒï¼šselect count(distinct uid) from tablename where date = &#39;20181201&#39;;<br>+---------------------+<br>| count(distinct uid) |<br>+---------------------+<br>|                8243         <br>+---------------------+<br>æ–¹å¼ä¸‰ï¼š<br>select count(*) from (select distinct uid from tablename where date = &#39;20181201&#39;) as t;<br>+----------+<br>| count(*) |<br>+----------+<br>|     8330 |<br>+----------+<br>ä¸æ–¹å¼ä¸€æŸ¥è¯¢ç»“æœä¸€è‡´<br><br>é—®é¢˜ï¼šä¸ºä½•æ–¹å¼äºŒå’Œæ–¹å¼ä¸€ã€ä¸‰çš„ç»“æœä¸ä¸€æ ·å‘¢ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1019568,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8e/b0/ef201991.jpg","nickname":"CcczzZ","note":"","ucode":"5F46DA5053D2BB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":319739,"discussion_content":"æ–¹å¼äºŒå’Œæ–¹å¼ä¸‰ç»“æœåº”è¯¥æ˜¯æ˜¯ä¸€æ ·æ‰å¯¹å§ï¼Œéƒ½æ˜¯å»é‡ä¹‹åçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604110570,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":49665,"user_name":"å¸†å¸†å¸†å¸†å¸†å¸†å¸†å¸†","can_delete":false,"product_type":"c1","uid":1304645,"ip_address":"","ucode":"0CB732FFD07463","user_header":"https://static001.geekbang.org/account/avatar/00/13/e8/45/c58cb283.jpg","comment_is_top":false,"comment_ctime":1544751086,"is_pvip":false,"replies":[{"id":"17915","content":"è¿˜æ˜¯çš„ã€‚<br><br>æ³¨æ„ï¼šcount(id)ä¹Ÿæ˜¯å¯ä»¥ä½¿ç”¨æ™®é€šç´¢å¼•çš„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544762806,"ip_address":"","comment_id":49665,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14429652974","product_id":100020801,"comment_content":"å¦‚æœå­—æ®µä¸Šæœ‰ç´¢å¼•ï¼Œä¸”å­—æ®µéç©ºï¼Œcount(å­—æ®µ)çš„æ•ˆç‡å°±ä¸æ˜¯æœ€å·®çš„äº†å§ã€‚","like_count":3,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432710,"discussion_content":"è¿˜æ˜¯çš„ã€‚\n\næ³¨æ„ï¼šcount(id)ä¹Ÿæ˜¯å¯ä»¥ä½¿ç”¨æ™®é€šç´¢å¼•çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544762806,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":49593,"user_name":"æ…§é‘«coming","can_delete":false,"product_type":"c1","uid":1324385,"ip_address":"","ucode":"7BAC9CA255630E","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLE4LYb3jrH63ZV98Zpc8DompwDgb1O3nffMoZCmiaibauRyEFv6NDNsST9RWxZExvMLMWb50zaanoQ/132","comment_is_top":false,"comment_ctime":1544744055,"is_pvip":false,"replies":[{"id":"17871","content":"å¥½é—®é¢˜ï¼Œ<br>ä¸å¯¹â€¦<br>å¦‚æœæ˜¯è¿™æ ·è¿™ä¸ªæ–¹æ¡ˆå°±åºŸäº†ğŸ˜„ å¯ä»¥å¹¶å‘æ‰§è¡Œï¼Œ<br><br>æ²¡æœ‰ä¸€ä¸ªâ€countâ€é”ï¼Œcount å°±æ˜¯ä¸€è¡Œè¡Œè¯»æ•°æ®ï¼Œè¿™ä¸ªæ˜¯ä¸€è‡´æ€§è¯»ï¼ˆæˆ–è€…å«åšå¿«ç…§åº¦ï¼‰ï¼Œä¸åŠ é”çš„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544750379,"ip_address":"","comment_id":49593,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14429645943","product_id":100020801,"comment_content":"æ™“æ–Œè€å¸ˆï¼Œå›¾4ä¸­ä¼šè¯Bä¼šç­‰å¾…ä¼šè¯Aæäº¤åå†æ‰§è¡Œå§ï¼ŸAä¸­æ‹¿äº†countçš„å†™é”ï¼Œæˆ‘åˆ†æçš„å¯¹å§ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432675,"discussion_content":"å¥½é—®é¢˜ï¼Œ\nä¸å¯¹â€¦\nå¦‚æœæ˜¯è¿™æ ·è¿™ä¸ªæ–¹æ¡ˆå°±åºŸäº†ğŸ˜„ å¯ä»¥å¹¶å‘æ‰§è¡Œï¼Œ\n\næ²¡æœ‰ä¸€ä¸ªâ€countâ€é”ï¼Œcount å°±æ˜¯ä¸€è¡Œè¡Œè¯»æ•°æ®ï¼Œè¿™ä¸ªæ˜¯ä¸€è‡´æ€§è¯»ï¼ˆæˆ–è€…å«åšå¿«ç…§åº¦ï¼‰ï¼Œä¸åŠ é”çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544750379,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":62652,"user_name":"Zzz","can_delete":false,"product_type":"c1","uid":1116272,"ip_address":"","ucode":"4AA47797F48315","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIu1n1DhUGGKTjelrQaLYOSVK2rsFeia0G8ASTIftib5PTOx4pTqdnfwb0NiaEFGRgS661nINyZx9sUg/132","comment_is_top":false,"comment_ctime":1548124942,"is_pvip":false,"replies":[{"id":"22176","content":"ä¸ºä»€ä¹ˆä¼šå‘¢ï¼Ÿä¸ä¼šçš„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1548128895,"ip_address":"","comment_id":62652,"utype":1}],"discussion_count":3,"race_medal":0,"score":"10138059534","product_id":100020801,"comment_content":"è€å¸ˆï¼Œå¯¹äºè‡ªå¢ä¸»é”®ï¼Œæ‰¹é‡æ’å…¥æ˜¯å¦ä¼šå­˜åœ¨é˜»å¡çš„æƒ…å†µï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437290,"discussion_content":"ä¸ºä»€ä¹ˆä¼šå‘¢ï¼Ÿä¸ä¼šçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548128895,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1115724,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLwSoTjHPX5tm4whBSfoZLX6toZxrZGUaLABQywKNf4MDc9toK3QSV7Z99ATcGicFCysoleQ5ISzmw/132","nickname":"ä¹˜é£","note":"","ucode":"0420C5535DACB7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":47078,"discussion_content":"æ‰¹é‡æ’å…¥æ˜¯é¡ºåºå–é”,å¹¶å‘æ’å…¥å¯èƒ½ä¼šå­˜åœ¨é˜»å¡,è·å–è®¡æ•°å™¨é”æ—¶å¯¼è‡´çš„ä¸Šè¾¹ç•Œç«äº‰æƒ…å†µ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1573268769,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1127109,"avatar":"https://static001.geekbang.org/account/avatar/00/11/32/c5/38a59795.jpg","nickname":"é€é¥å­","note":"","ucode":"777CF0635970E1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375025,"discussion_content":"æœ‰ä¸ªå‚æ•°å¯ä»¥è®¾ç½® ï¼Œæ˜¯å¦ä¼šäº§ç”Ÿè‡ªå¢é”çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621438268,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":56857,"user_name":"Ivy","can_delete":false,"product_type":"c1","uid":1131135,"ip_address":"","ucode":"78156E0D5DEC52","user_header":"","comment_is_top":false,"comment_ctime":1546569225,"is_pvip":false,"replies":[{"id":"20528","content":"å—¯ï¼Œæˆ‘çš„çœ‹æ³•è·Ÿä½ ä¸€æ ·ï¼Œä¸è¿‡MySQL ç°åœ¨å°±æ˜¯è¿™ä¹ˆåšçš„ğŸ˜“","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1546573353,"ip_address":"","comment_id":56857,"utype":1}],"discussion_count":2,"race_medal":0,"score":"10136503817","product_id":100020801,"comment_content":"è€å¸ˆï¼Œä½ å¥½ï¼Œ<br>å¦‚æœè¿™ä¸ªâ€œå­—æ®µâ€æ˜¯å®šä¹‰ä¸º not null çš„è¯ï¼Œä¸€è¡Œè¡Œåœ°ä»è®°å½•é‡Œé¢è¯»å‡ºè¿™ä¸ªå­—æ®µï¼Œåˆ¤æ–­ä¸èƒ½ä¸º nullï¼ŒæŒ‰è¡Œç´¯åŠ ï¼›<br>è¿™æ®µè¯æ²¡è¯»æ‡‚ï¼Œæ—¢ç„¶å·²ç»çŸ¥é“not nullä¸ºä½•è¿˜è¦å†æ¬¡åˆ¤æ–­ä¸èƒ½ä¸º nullï¼Ÿç›´æ¥è¯»å‡ºæ¥ç´¯åŠ ä¸å°±å¯ä»¥äº†å—ï¼Ÿå¦å¤–æ˜¯å¦æˆ‘å¯¹å¼•æ“å±‚é¢çš„æ•°æ®è¯»å–æœ‰è¯¯è§£ï¼Œæ˜¯å¦è¯´æ— è®ºä½¿ç”¨å“ªç§ count æ–¹å¼ï¼Œå¼•æ“éƒ½ä¸€å®šè¦é€è¡Œå»è¯»åªæ˜¯åœ¨æ˜¯å¦ä½¿ç”¨ç´¢å¼•å’Œæ˜¯å¦è¿”å›ç»™serverå±‚å…·ä½“æ•°æ®çš„åŒºåˆ«ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435281,"discussion_content":"å—¯ï¼Œæˆ‘çš„çœ‹æ³•è·Ÿä½ ä¸€æ ·ï¼Œä¸è¿‡MySQL ç°åœ¨å°±æ˜¯è¿™ä¹ˆåšçš„ğŸ˜“","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1546573353,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1940779,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/9d/2b/6da5a8bf.jpg","nickname":"ç–¯æ¸…ä¿Š","note":"","ucode":"8466D86EC173EE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":540892,"discussion_content":"è€å¸ˆæ‚¨å¥½ï¼è¿™ä¸ªæ€ä¹ˆæŸ¥çœ‹ï¼­ï½™ï¼³ï¼±ï¼¬çš„æ‰§è¡Œæ–¹å¼ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640187976,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":344560,"user_name":"å¥½å¥½å­¦ä¹ ","can_delete":false,"product_type":"c1","uid":1110299,"ip_address":"","ucode":"327552B5924389","user_header":"https://static001.geekbang.org/account/avatar/00/10/f1/1b/d3165de8.jpg","comment_is_top":false,"comment_ctime":1651648672,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5946615968","product_id":100020801,"comment_content":"å¦‚æœé‡‡ç”¨è‡ªå·±åšè®¡æ•°å™¨è¡¨ï¼Œæ˜¯ä¸æ˜¯åº”è¯¥é‡‡ç”¨åŒä¸€ä¸ªè¡¨ç”¨å¤šè¡Œè®°å½•æ±‚å’Œæ¥åšè¿™ä¸ªè®¡æ•°å™¨ï¼Œé¿å…é«˜å¹¶å‘åœºæ™¯ä¸‹é”ç«äº‰æ¿€çƒˆã€‚","like_count":1},{"had_liked":false,"id":344553,"user_name":"å¥½å¥½å­¦ä¹ ","can_delete":false,"product_type":"c1","uid":1110299,"ip_address":"","ucode":"327552B5924389","user_header":"https://static001.geekbang.org/account/avatar/00/10/f1/1b/d3165de8.jpg","comment_is_top":false,"comment_ctime":1651647202,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5946614498","product_id":100020801,"comment_content":"å…³äºinnodbæ²¡æœ‰åƒmyisamä¸€æ ·æœ‰å†…ç½®è®¡æ•°å™¨ï¼Œåº”è¯¥æ˜¯ç»¼åˆå–èˆçš„ç»“æœå§ï¼Œå…‰çœ‹å®ç°çš„è¯ï¼Œä¹Ÿæ˜¯å¯ä»¥å¢åŠ ä¸ªè®¡æ•°å™¨çš„ã€‚æ¯”å¦‚è®¡æ•°å™¨åªè®°å½•å½“å‰æœ€å°æ´»è·ƒäº‹åŠ¡æäº¤åæ€»æ•°ï¼Œå…¶ä»–äº‹åŠ¡è·å–è¿™ä¸ªcountæ—¶ éœ€è¦è¿™ä¸ªè®°å½•+å½“å‰äº‹åŠ¡ä¸­çš„æ“ä½œæ¥æ¨ç®—ã€‚é‚£æ‰§è¡Œæ•ˆç‡è‚¯å®šä¹Ÿä¼šæ¯”ä¸€è¡Œè¡Œè¯»å–è¦é«˜ã€‚","like_count":1},{"had_liked":false,"id":308820,"user_name":"sundy","can_delete":false,"product_type":"c1","uid":1073049,"ip_address":"","ucode":"610A54CEA6CB34","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIyZfj0vzMrnDjAQulSnlXBd1tFQhnf1R8uCfR5ZemHhRWicAHktveTTeqPswPEYfiau5aSyy8QOkXA/132","comment_is_top":false,"comment_ctime":1629811052,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5924778348","product_id":100020801,"comment_content":"countçš„æ—¶å€™ï¼Œå¦‚æœæ•°æ®åªæ˜¯å†™åˆ°äº†redologå’Œbinlogé‡Œé¢ï¼Œè¿™ä¸ªcountæ˜¯æ€ä¹ˆå·¥ä½œçš„","like_count":1,"discussions":[{"author":{"id":1015184,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7d/90/abb7bfe3.jpg","nickname":"fourge","note":"","ucode":"F3E3FFC4990358","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582998,"discussion_content":"å¦‚æœæ²¡æœ‰æäº¤ï¼Œä¸å°±æ˜¯ä¸å¯è§çš„å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659867279,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":307632,"user_name":"Geek_9ee170","can_delete":false,"product_type":"c1","uid":2739334,"ip_address":"","ucode":"273408D8885694","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/CV9kk5M26pdxvFhbrkicjZVuYxSG4vLNcqBzlESUUz2g9mavJ9cf0R4rbow27ZMLXqNted3dKmel8W83Kb2geLw/132","comment_is_top":false,"comment_ctime":1629185159,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5924152455","product_id":100020801,"comment_content":"è¯·æ•™ä¸‹ï¼Œä¸‹é¢çš„è¯­å¥åœ¨å•æœºçš„æƒ…å†µä¸‹è¡¨Cä¸­çš„è®¡æ•°å’Œè¡¨Dçš„è¡Œæ•°æ˜¯ä¸€è‡´çš„ï¼Œä½†æ˜¯åœ¨åˆ†å¸ƒå¼é«˜å¹¶å‘æƒ…å†µä¸‹è¿˜èƒ½ä¿è¯æ•°æ®ä¸€è‡´å—<br>begin;<br>è¡¨Cä¸­è®¡æ•°åŠ 1;<br>è¡¨Dä¸­æ’å…¥ä¸€è¡Œæ•°æ®;<br>commit;","like_count":1},{"had_liked":false,"id":286729,"user_name":"ç½—é€‰ä¸œ","can_delete":false,"product_type":"c1","uid":2015657,"ip_address":"","ucode":"7E844804319E3B","user_header":"https://static001.geekbang.org/account/avatar/00/1e/c1/a9/ece95406.jpg","comment_is_top":false,"comment_ctime":1617528368,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5912495664","product_id":100020801,"comment_content":"<br>æœ‰ä¸ªéš¾ä»¥ç†è§£çš„é—®é¢˜ï¼š<br>countï¼ˆå­—æ®µï¼‰<br>1.å¦‚æœè¿™ä¸ªâ€œå­—æ®µâ€æ˜¯å®šä¹‰ä¸º not null çš„è¯ï¼Œä¸€è¡Œè¡Œåœ°ä»è®°å½•é‡Œé¢è¯»å‡ºè¿™ä¸ªå­—æ®µï¼Œåˆ¤æ–­ä¸èƒ½ä¸º nullï¼ŒæŒ‰è¡Œç´¯åŠ ï¼›<br>2ã€‚å¦‚æœè¿™ä¸ªâ€œå­—æ®µâ€å®šä¹‰å…è®¸ä¸º nullï¼Œé‚£ä¹ˆæ‰§è¡Œçš„æ—¶å€™ï¼Œåˆ¤æ–­åˆ°æœ‰å¯èƒ½æ˜¯ nullï¼Œè¿˜è¦æŠŠå€¼å–å‡ºæ¥å†åˆ¤æ–­ä¸€ä¸‹ï¼Œä¸æ˜¯ null æ‰ç´¯åŠ ã€‚<br><br>é—®é¢˜1ï¼šä¸€è¡Œä¸€è¡Œä»è®°å½•è¯»å‡ºå­—æ®µï¼Œåˆ¤æ–­ä¸èƒ½ä¸ºNullï¼Œè¿™é‡Œæ˜¯åˆ¤æ–­å­—æ®µçš„å€¼ä¸èƒ½ä¸ºNullå—ï¼Ÿä¸ç„¶è¿™ä¸ªè¯»å‡ºçš„å­—æ®µæ˜¯ä»€ä¹ˆï¼Ÿè¯»å‡ºä»€ä¹ˆï¼Ÿ<br>é—®é¢˜2ï¼šå¦‚æœè¿™ä¸ªâ€œå­—æ®µâ€å®šä¹‰å…è®¸ä¸º nullï¼Œé‚£ä¹ˆæ‰§è¡Œçš„æ—¶å€™ï¼Œåˆ¤æ–­åˆ°æœ‰å¯èƒ½æ˜¯ nullï¼Œè¿˜è¦æŠŠå€¼å–å‡ºæ¥å†åˆ¤æ–­ä¸€ä¸‹ï¼Œä¸æ˜¯ null æ‰ç´¯åŠ ã€‚è¿™é‡Œçš„åˆ¤æ–­åˆæ˜¯ä»€ä¹ˆï¼Œï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ<br>é—®é¢˜3ï¼šè¿™é‡Œä¸€è¡Œä¸€è¡Œå–å‡ºè®°å½•ï¼Œæ˜¯éå†ä¸»é”®ç´¢å¼•å—ï¼Ÿå¦‚æœè¿™ä¸ªå­—æ®µæ˜¯ä¸€ä¸ªæ™®é€šç´¢å¼•å‘¢ï¼Ÿ<br><br>","like_count":1},{"had_liked":false,"id":275518,"user_name":"Aibo","can_delete":false,"product_type":"c1","uid":2115387,"ip_address":"","ucode":"2CE3E77BD2D014","user_header":"https://static001.geekbang.org/account/avatar/00/20/47/3b/70198ceb.jpg","comment_is_top":false,"comment_ctime":1611569042,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5906536338","product_id":100020801,"comment_content":"æƒ³è¯·é—®ä¸€ä¸‹ï¼Œå¯¹äºä¸€ä¸ªnot inç­›é€‰ï¼Œnot iné›†åˆä¼šæŒç»­å¢å¤§ï¼›éƒ½æŸ¥å‡ºæ¥ï¼Œæ”¾å†…å­˜é‡Œå¤„ç†å¥½ï¼Œè¿˜æ˜¯å°±ç”¨not inå¥½","like_count":1},{"had_liked":false,"id":271689,"user_name":"æ ¡æ­Œ","can_delete":false,"product_type":"c1","uid":2054611,"ip_address":"","ucode":"CD257668BB1A33","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEKBENQekdV3e9XwRQ5kpO9Y9d81sEMm52qcwJWbFbWbW2rniaTFYCChoR0ibZ0E3soQqod9rvfmBibmQ/132","comment_is_top":false,"comment_ctime":1609758086,"is_pvip":true,"discussion_count":0,"race_medal":1,"score":"5904725382","product_id":100020801,"comment_content":"InnoDB handles SELECT COUNT(*) and SELECT COUNT(1) operations in the same way. There is no performance difference.<br>å‚è€ƒmysqlå®˜ç½‘ï¼š<br>https:&#47;&#47;dev.mysql.com&#47;doc&#47;refman&#47;5.7&#47;en&#47;aggregate-functions.html#function_count","like_count":1},{"had_liked":false,"id":262108,"user_name":"ç„çœŸ","can_delete":false,"product_type":"c1","uid":2237677,"ip_address":"","ucode":"D21A7096AFB816","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLg04lnicnUNWVmohBVoWiaKPpuYu8j0CHVIjjurfO3YcJqicHZBMYFqjoEpiaa3jrNmRzyzXiaPPt29cA/132","comment_is_top":false,"comment_ctime":1605613786,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5900581082","product_id":100020801,"comment_content":"è®°å¾—ä¸Šæ¬¡ä½ è¯´è¦æŠŠå¼•èµ·é”çš„è¯­å¥å°½é‡æ”¾åœ¨äº‹åŠ¡å°¾éƒ¨ï¼Œåº”è¯¥å…ˆæ’å…¥å†ä¿®æ”¹å…¨å±€è®¡æ•°è¡¨å§ã€‚","like_count":1},{"had_liked":false,"id":257954,"user_name":"æ— åé“é•¿","can_delete":false,"product_type":"c1","uid":1387960,"ip_address":"","ucode":"0F694D17459CC0","user_header":"https://static001.geekbang.org/account/avatar/00/15/2d/b8/7e49a241.jpg","comment_is_top":false,"comment_ctime":1604222428,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5899189724","product_id":100020801,"comment_content":"åº”è¯¥å…ˆæ’å…¥æ“ä½œç„¶åæ›´æ–°è®¡æ•°è¡¨ï¼Œå› ä¸ºè¦æŠŠå®¹æ˜“äº§ç”Ÿé”å†²çªçš„è¯­å¥æ”¾åˆ°ç¦»ç»“æŸäº‹åŠ¡æœ€è¿‘çš„åœ°æ–¹ï¼Œç„¶åå¦‚æœå¹¶å‘é‡éå¸¸å¤§çš„è¯è¿™ä¸ªè¯­å¥å¯èƒ½æˆä¸ºç“¶é¢ˆï¼Œå¯ä»¥å°†è¡¨è®¡æ•°æ‹†æˆå¤šè¡Œï¼Œå‡å°‘å•è¡Œå¹¶å‘é‡","like_count":1},{"had_liked":false,"id":217018,"user_name":"LovePeace","can_delete":false,"product_type":"c1","uid":1010319,"ip_address":"","ucode":"5BA5B11FAF953E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6a/8f/5b224f54.jpg","comment_is_top":false,"comment_ctime":1589385657,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5884352953","product_id":100020801,"comment_content":"è¯·æ•™ä¸€ä¸‹ è€å¸ˆæ–‡ä¸­è¯´ï¼šå¯¹äº count(*) è¿™æ ·çš„æ“ä½œï¼Œéå†å“ªä¸ªç´¢å¼•æ ‘å¾—åˆ°çš„ç»“æœé€»è¾‘ä¸Šéƒ½æ˜¯ä¸€æ ·çš„ã€‚å› æ­¤ï¼ŒMySQL ä¼˜åŒ–å™¨ä¼šæ‰¾åˆ°æœ€å°çš„é‚£æ£µæ ‘æ¥éå†ã€‚å¦‚æœä¸€ä¸ªæ™®é€šç´¢å¼•çš„å€¼æœ‰ä¸ºç©ºçš„è¯é‚£å¾—åˆ°çš„æ•°æ®æ˜¯ä¸æ˜¯å°±ä¸å‡†ç¡®äº†å‘¢ï¼Ÿ","like_count":1},{"had_liked":false,"id":189228,"user_name":"å“ˆå¯†é”…å„¿","can_delete":false,"product_type":"c1","uid":1792142,"ip_address":"","ucode":"35B34503F530AB","user_header":"https://static001.geekbang.org/account/avatar/00/1b/58/8e/97b20eb3.jpg","comment_is_top":false,"comment_ctime":1584491148,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5879458444","product_id":100020801,"comment_content":"å…ˆä¸è€ƒè™‘MySQLé€‰æ‹©ç”¨ä»€ä¹ˆä¼˜åŒ–ï¼Œå•çº¯çš„æ¯”è¾ƒå‡ ä¸ªcount()ï¼Œä»æ•ˆç‡ä¸Šæ¥è¯´ï¼Œcount (*)â‰ˆcount(1)&gt;count(äºŒçº§ç´¢å¼•åˆ—)&gt;count(ä¸»é”®)&gt;count(éç´¢å¼•åˆ—)ï¼Œå› ä¸ºæŸ¥è¯¢æ—¶ï¼ŒMySQLéœ€è¦æŠŠç´¢å¼•æ•°æ®è¯»åˆ°å†…å­˜ä¸­ï¼Œä¸»é”®ç´¢å¼•åŒ…å«å­˜å‚¨çš„å®é™…æ•°æ®ï¼Œæ‰€ä»¥ä¸€èˆ¬æ¯”äºŒçº§ç´¢å¼•åˆ—è¦å¤§ï¼Œè¿™æ ·ï¼Œæ€§èƒ½å°±æ¯”ä¸ä¸ŠäºŒçº§ç´¢å¼•åˆ—ï¼Œæ‰€ä»¥MySQLå®˜ç½‘æ‰ä¼šè¯´ä½¿ç”¨ä¸»é”®count çš„æ—¶å€™ï¼Œä¼šä¼˜å…ˆé€‰æ‹©æœ€å°çš„äºŒçº§ç´¢å¼•åˆ—ï¼Œå¦‚æœæ²¡æœ‰ï¼Œå†ç”¨ä¸»é”®count ã€‚å¯¹äºæ²¡æœ‰ç´¢å¼•çš„åˆ—åšcount ï¼Œéœ€è¦æŠŠå…¨è¡¨æ•°æ®è¯»å…¥å†…å­˜ï¼Œç„¶åæ ¹æ®ä¸»é”®å›è¡¨æŸ¥è¯¢è¿™ä¸€åˆ—æ•°æ®åˆ¤æ–­æ˜¯å¦ä¸ºnullï¼Œæ‰€ä»¥æ€§èƒ½æ˜¯æœ€å·®çš„ã€‚è¿™æ ·çš„åˆ†ææœ‰é—®é¢˜å—ï¼Œè€å¸ˆã€‚","like_count":1},{"had_liked":false,"id":130473,"user_name":"alioo","can_delete":false,"product_type":"c1","uid":1022507,"ip_address":"","ucode":"F36A38C1F5FFAB","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqOpANMwDibLmj5IGJh6dTw300sZ1BHM5sG3sZv1A1rvCHOiblPD3jgFOiaMVVujtctWnQbVFoNPpRgw/132","comment_is_top":false,"comment_ctime":1567471590,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"5862438886","product_id":100020801,"comment_content":"çŸ¥è¯†ç‚¹ï¼šcount(id) ä¹Ÿæ˜¯èµ°æ™®é€šç´¢å¼• ï¼Œæ™®é€šç´¢å¼•æ¯”ä¸»é”®ç´¢å¼•è¦å°ï¼Œéå†èµ·æ¥æ›´å¿«","like_count":1,"discussions":[{"author":{"id":1451640,"avatar":"https://static001.geekbang.org/account/avatar/00/16/26/78/ed0252c2.jpg","nickname":"dddddğŸ³","note":"","ucode":"EFEA2FBB27ECFE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":560540,"discussion_content":"æ™®é€šç´¢å¼•é‡Œå¯ä¸ä¸€å®šåŒ…å«å…¨éƒ¨id","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649385292,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2287841,"avatar":"https://static001.geekbang.org/account/avatar/00/22/e8/e1/6045b299.jpg","nickname":"LPF","note":"","ucode":"036C552D7251E9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":328096,"discussion_content":"æ™®é€šç´¢å¼•ä¸­çš„æœ€å°ç´¢å¼•æ ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606053956,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":120280,"user_name":"è¾‰ç…Œç å†œ","can_delete":false,"product_type":"c1","uid":1332799,"ip_address":"","ucode":"09779C2E06EA52","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIy5ULaodUwsLoPuk1wd22hqXsaBbibNEqXM0kgrCTYDGKYQkZICYEyH9wMj4hyUicuQwHdDuOKRj0g/132","comment_is_top":false,"comment_ctime":1564819210,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5859786506","product_id":100020801,"comment_content":"è€å¸ˆ æœ‰ä¸ªé—®é¢˜ï¼Œéœ€è¦æ‚¨è§£ç­”ä¸‹ã€‚ç”±äºæ•°æ®åº“å­˜å‚¨æ€»è¡Œæ•°åœ¨æ›´æ–°è¿‡ç¨‹ä¸­æ²¡åŠæ³•ä¿è¯åŸå­æ€§é€’å¢&#47;é€’å‡ï¼Œéœ€è¦ç”¨åˆ°ä¹è§‚é”ã€‚ä½†å¦‚æœå¹¶å‘ç‰¹åˆ«å¤§ï¼Œä¿®æ”¹è®¡æ•°è¡¨çš„æ“ä½œå°±å¯èƒ½æ‰§è¡Œå¤šæ¬¡æ‰ä¼šæˆåŠŸï¼Œä¼šå½±å“ä¸šåŠ¡è¡¨çš„è¯»å†™æ•ˆç‡å§ã€‚<br>æ•°æ®åº“ä¿å­˜æ€»è¡Œæ•°çš„æ–¹æ³•ç¡®å®å¯ä»¥ä¿è¯å‡†ç¡®æ€§å’Œä¸€è‡´æ€§ï¼Œä½†ä¹Ÿå¯èƒ½ä¼šå¯¹ä¸šåŠ¡è¡¨çš„å†™æ•ˆç‡å‘¢","like_count":1,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":158077,"discussion_content":"é‚£å®åœ¨ä¸è¡Œä½ å°±åŠ ä¸ªæ¶ˆæ¯é˜Ÿåˆ—ï¼Œå°†å¹¶å‘å‹åŠ›å˜æˆé¡ºåºæ“ä½œæ•°æ®åº“ï¼Œè¿™æ ·å°±è¡Œäº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580548775,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":100975,"user_name":"ç‹éº’","can_delete":false,"product_type":"c1","uid":1265260,"ip_address":"","ucode":"330017C5A911B6","user_header":"https://static001.geekbang.org/account/avatar/00/13/4e/6c/71020c59.jpg","comment_is_top":false,"comment_ctime":1559697440,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5854664736","product_id":100020801,"comment_content":"å¦‚æœè¡Œæ•°è¿˜æ˜¯æ¯”è¾ƒå¤šå‘¢ï¼Œæœ‰å…¶ä»–ä¼˜åŒ–æ–¹æ¡ˆå—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1066508,"avatar":"https://static001.geekbang.org/account/avatar/00/10/46/0c/773ba2f3.jpg","nickname":"ä¸‹ä¸ªç›®æ ‡45k","note":"","ucode":"193BA8C3AA9A61","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":334614,"discussion_content":"è¡Œæ•°å¤šçš„è¯å¯ä»¥å¹¶è¡ŒæŸ¥è¯¢ï¼Œæœ€ç»ˆåˆå¹¶ä¸€ä¸‹ã€‚å°†å¤§äº‹åŠ¡æ‹†æˆå°äº‹åŠ¡ã€‚\n\nä½†æ˜¯å¯ä»¥ä»ä¸šåŠ¡è§’åº¦è€ƒè™‘ä¸€ä¸‹æ˜¯ä¸æ˜¯éœ€è¦è¿™ä¹ˆå¤šæ•°æ®å‘¢ï¼ŸæŠ¥è¡¨ä¸šåŠ¡ä¸€èˆ¬ä»å¤§æ•°æ®å¹³å°å‡ºä¸ä¼šç›´æ¥ä»ä¸šåŠ¡åº“å¯¼å‡º","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607917446,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":72905,"user_name":"å¿µä½ å¦‚æ˜”","can_delete":false,"product_type":"c1","uid":1323531,"ip_address":"","ucode":"FCAD88AB57D084","user_header":"https://static001.geekbang.org/account/avatar/00/14/32/0b/981b4e93.jpg","comment_is_top":false,"comment_ctime":1551753259,"is_pvip":false,"replies":[{"id":"26694","content":"æ˜¯çš„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1551876512,"ip_address":"","comment_id":72905,"utype":1}],"discussion_count":3,"race_medal":0,"score":"5846720555","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæˆ‘è¿™è¾¹explain çœ‹ select count(primary_id) count(1) count(*) éƒ½æ˜¯éå†çš„æœ€å°ç´¢å¼•æ ‘ï¼Œæ²¡æœ‰éå†å…¨è¡¨çš„æƒ…å†µã€‚æ˜¯ä¸æ˜¯count(1) å’Œcount(*) è™½éå†æœ€å°ç´¢å¼•æ ‘ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰æ‰«ææ ‘é‡Œçš„æ•°æ®ï¼Œè€Œcountï¼ˆidï¼‰æ‰«æäº†æ ‘é‡Œçš„æ•°æ®ï¼Œæ‰€ä»¥æ¯”ä»–ä¿©æ…¢ï¼Ÿå…³äºè¿™ä¸ªè°å¿«è°æ…¢çš„é—®é¢˜ï¼ŒçœŸçš„æ˜¯ä¼—è¯´çº·çº­ï¼Œï¼Œï¼Œ","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441818,"discussion_content":"æ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551876512,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1209939,"avatar":"https://static001.geekbang.org/account/avatar/00/12/76/53/21d62a23.jpg","nickname":"é²Â·æœ¬","note":"","ucode":"F1DEB30C21B48E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":576967,"discussion_content":"è€å¸ˆ,æœ‰ä¸ªç–‘é—®, å¦‚æœæ‰«æçš„æ˜¯äºŒçº§ç´¢å¼•æ ‘, ä¸è¯»å®é™…çš„æ•°æ®çš„è¯, å¦‚ä½•åˆ¤æ–­å¯è§æ€§å‘¢?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655869827,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1453053,"avatar":"https://static001.geekbang.org/account/avatar/00/16/2b/fd/7013289d.jpg","nickname":"æ¸©æ•…è€ŒçŸ¥æ–°å¯ä»¥ä¸ºå¸ˆçŸ£","note":"","ucode":"FADCDFA9F9E5E8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1209939,"avatar":"https://static001.geekbang.org/account/avatar/00/12/76/53/21d62a23.jpg","nickname":"é²Â·æœ¬","note":"","ucode":"F1DEB30C21B48E","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579220,"discussion_content":"ä¸å–æ•°æ®ï¼Œåº”è¯¥ä¹Ÿè¦å–è¡Œä¸Šçš„trx_idå’Œä¸Šä¸€ä¸ªç‰ˆæœ¬çš„æŒ‡é’ˆå§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657257021,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":576967,"ip_address":""},"score":579220,"extra":""}]}]},{"had_liked":false,"id":72606,"user_name":"Demter","can_delete":false,"product_type":"c1","uid":1158439,"ip_address":"","ucode":"BE3B6F726916CE","user_header":"https://static001.geekbang.org/account/avatar/00/11/ad/27/5556ae50.jpg","comment_is_top":false,"comment_ctime":1551677035,"is_pvip":false,"replies":[{"id":"26826","content":"æ²¡æœ‰è¿”å›â€œæ•´è¡Œâ€æ•°æ®å‘€","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1551940036,"ip_address":"","comment_id":72606,"utype":1}],"discussion_count":3,"race_medal":0,"score":"5846644331","product_id":100020801,"comment_content":"count(1)è™½ç„¶ä¸å–å€¼ï¼Œåˆ°æ—¶è¦è¿”å›æ•´è¡Œæ•°æ®ï¼Œï¼Œè¿™æ ·è¿”å›çš„æ•°æ®é‡å¤§å•Šï¼Œå¯¹æ€§èƒ½æ²¡å½±å“å—??","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441655,"discussion_content":"æ²¡æœ‰è¿”å›â€œæ•´è¡Œâ€æ•°æ®å‘€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551940036,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1970443,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIx1V1QAxC4NHaxYZGyuibBN8lcURJWc5nrnO4yic1kxnDemYV2FJGialf47kYX9qtDnZZOfe1SJeLicg/132","nickname":"lleft","note":"","ucode":"D573EB509455AE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":371430,"discussion_content":"èµ°å“ªä¸ªç´¢å¼•å°±è¿”å›å“ªä¸ªæ•°æ®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619767938,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1762602,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/e5/2a/38e4c07e.jpg","nickname":"ZHI","note":"","ucode":"573BB83EC7086D","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1970443,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIx1V1QAxC4NHaxYZGyuibBN8lcURJWc5nrnO4yic1kxnDemYV2FJGialf47kYX9qtDnZZOfe1SJeLicg/132","nickname":"lleft","note":"","ucode":"D573EB509455AE","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":534084,"discussion_content":"å› è¯¥æ˜¯ç›´æ¥è¿”å›ç»Ÿè®¡ç»“æœå§ï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1638090624,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":371430,"ip_address":""},"score":534084,"extra":""}]}]},{"had_liked":false,"id":64448,"user_name":"è‹¦è¡Œåƒ§","can_delete":false,"product_type":"c1","uid":1055334,"ip_address":"","ucode":"726024A9A9CF44","user_header":"https://static001.geekbang.org/account/avatar/00/10/1a/66/2d9db9ed.jpg","comment_is_top":false,"comment_ctime":1548805324,"is_pvip":false,"replies":[{"id":"22816","content":"å“ˆå“ˆï¼Œå¯¹å¯¹ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1548808577,"ip_address":"","comment_id":64448,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5843772620","product_id":100020801,"comment_content":"äºŒè¯ä¸è¯´ å…ˆæŠŠä»£ç ä¸­countæ”¹æˆcount(* ï¼‰","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438002,"discussion_content":"å“ˆå“ˆï¼Œå¯¹å¯¹ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548808577,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":63248,"user_name":"po","can_delete":false,"product_type":"c1","uid":1234627,"ip_address":"","ucode":"2810E5CF7FC799","user_header":"https://static001.geekbang.org/account/avatar/00/12/d6/c3/09a4b5eb.jpg","comment_is_top":false,"comment_ctime":1548311169,"is_pvip":false,"replies":[{"id":"22400","content":"å®æ—¶æ”¹å˜","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1548313479,"ip_address":"","comment_id":63248,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5843278465","product_id":100020801,"comment_content":"è€å¸ˆä½ è¯´Myisamå¼•æ“çš„æ€»è¡Œæ•°æ˜¯å†™åœ¨ç£ç›˜ä¸Šçš„ï¼Œä½†æ˜¯å¦‚æœæ›´æ–°äº†æ•°æ®ï¼Œè¿™ä¸ªæ€»è¡Œæ•°çš„å€¼æ˜¯ä¼šæ—¶äº‹æ”¹å˜ï¼Œè¿˜æ˜¯ä»–æœ‰ä»€ä¹ˆå…¶ä»–çš„ç­–ç•¥ã€‚","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437519,"discussion_content":"å®æ—¶æ”¹å˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548313479,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":56860,"user_name":"Ivy","can_delete":false,"product_type":"c1","uid":1131135,"ip_address":"","ucode":"78156E0D5DEC52","user_header":"","comment_is_top":false,"comment_ctime":1546569752,"is_pvip":false,"replies":[{"id":"20522","content":"å°±æ˜¯è¿”å›ä¸€ä¸ªç©ºè¡Œï¼Œä½†æ˜¯é«˜åº¦serverå±‚â€œä¸æ˜¯ç©ºå€¼ï¼Œå¯ä»¥è®¡æ•°â€<br><br>è¿‡ç¨‹ä¸Šï¼Œå…¶å®æ˜¯serverå±‚è°ƒç”¨å¼•æ“æ¥å£ï¼Œä¸€è¡Œä¸€è¡Œå–","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1546571211,"ip_address":"","comment_id":56860,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5841537048","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæ–‡ç« ä¸­åå¤å¼ºè°ƒä¸å–å€¼ï¼Œè¿™æ˜¯ä»€ä¹ˆæ¦‚å¿µå‘¢ï¼Ÿå¼•æ“ä¸å–å€¼serveræ€ä¹ˆæ‹¿åˆ°æ•°æ®åˆæ€ä¹ˆè®¡æ•°å‘¢ï¼Ÿèƒ½ä¸èƒ½å¤§æ¦‚è§£é‡Šä¸€ä¸‹å¼•æ“è¯»å–æ•°æ®è¿”å›ç»™serverçš„è¿‡ç¨‹å‘€ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435283,"discussion_content":"å°±æ˜¯è¿”å›ä¸€ä¸ªç©ºè¡Œï¼Œä½†æ˜¯é«˜åº¦serverå±‚â€œä¸æ˜¯ç©ºå€¼ï¼Œå¯ä»¥è®¡æ•°â€\n\nè¿‡ç¨‹ä¸Šï¼Œå…¶å®æ˜¯serverå±‚è°ƒç”¨å¼•æ“æ¥å£ï¼Œä¸€è¡Œä¸€è¡Œå–","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1546571211,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":54617,"user_name":"è¿æ–¤æˆé£","can_delete":false,"product_type":"c1","uid":1350812,"ip_address":"","ucode":"BAFF69C29FDFA5","user_header":"https://static001.geekbang.org/account/avatar/00/14/9c/9c/e02a0daf.jpg","comment_is_top":false,"comment_ctime":1545915122,"is_pvip":false,"replies":[{"id":"19822","content":"æ˜¯çš„ï¼Œä½†æ˜¯ä½ å†™count(*)çš„æ—¶å€™ï¼ŒMySQL è‡ªå·±ä¼šé€‰è¿™ä¸ªåˆç†çš„ç´¢å¼•çš„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1545920077,"ip_address":"","comment_id":54617,"utype":1}],"discussion_count":3,"race_medal":0,"score":"5840882418","product_id":100020801,"comment_content":"è€å¸ˆå¥½ï¼ŒCountï¼ˆå­—æ®µï¼‰ï¼Œè‹¥å­—æ®µæ˜¯äºŒçº§ç´¢å¼•ï¼Œåˆæ·»åŠ äº†éç©ºçº¦æŸã€‚è¿™æ ·çš„è¯åº”è¯¥æ˜¯éå†å°æ ‘ï¼ˆä»…éå†äºŒçº§ç´¢å¼•å°±èƒ½å–å¾—æ­£ç¡®è®°æ•°ï¼‰ï¼Œéå†çš„å¶å­ç»“ç‚¹è¦æ¯”ä¸»é”®çš„å…¨éå°‘å¾ˆå¤šã€‚åº”è¯¥æ•ˆç‡æ¯”ä¸»é”®å¿«å§ï¼Ÿè°¢è°¢","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":434513,"discussion_content":"æ˜¯çš„ï¼Œä½†æ˜¯ä½ å†™count(*)çš„æ—¶å€™ï¼ŒMySQL è‡ªå·±ä¼šé€‰è¿™ä¸ªåˆç†çš„ç´¢å¼•çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545920077,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":158192,"discussion_content":"ä¸ä¼šï¼Œcount(id)ä¹Ÿæ˜¯èµ°æ™®é€šç´¢å¼•ï¼Œæ‰€ä»¥è¿˜æ˜¯æ¯”count(å­—æ®µ)å¿«ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580560481,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2256446,"avatar":"https://static001.geekbang.org/account/avatar/00/22/6e/3e/4e67a110.jpg","nickname":"24k","note":"","ucode":"FFE5B04D0B7BD7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":369811,"discussion_content":"å¦‚æœä»–ä»¬éƒ½é€‰æ‹©äº†åŒä¸€ä¸ªäºŒçº§ç´¢å¼•ï¼Œæ˜¯ä¸æ˜¯æ•ˆç‡å°±ä¸€æ ·äº†ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619162728,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":158192,"ip_address":""},"score":369811,"extra":""}]}]},{"had_liked":false,"id":53194,"user_name":"å¯å‡¡ä¸å‡¡","can_delete":false,"product_type":"c1","uid":1296289,"ip_address":"","ucode":"9D42D6C5274D48","user_header":"https://static001.geekbang.org/account/avatar/00/13/c7/a1/273bff58.jpg","comment_is_top":false,"comment_ctime":1545614975,"is_pvip":false,"replies":[{"id":"19262","content":"æ˜¯é€‰ä¸­ä¸€ä¸ªç´¢å¼•ï¼Œèµ°å…¨ç´¢å¼•çš„æ‰«æ","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1545615979,"ip_address":"","comment_id":53194,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5840582271","product_id":100020801,"comment_content":"è€å¸ˆ count() ä¸ç®¡æœ‰æ²¡æœ‰ç´¢å¼• ä¸€å®šä¼šèµ°å…¨è¡¨æ‰«æå—","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":434060,"discussion_content":"æ˜¯é€‰ä¸­ä¸€ä¸ªç´¢å¼•ï¼Œèµ°å…¨ç´¢å¼•çš„æ‰«æ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545615979,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":52068,"user_name":"é©¬è‹¥é£","can_delete":false,"product_type":"c1","uid":1046394,"ip_address":"","ucode":"3D0327329A10AE","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f7/7a/55618020.jpg","comment_is_top":false,"comment_ctime":1545304724,"is_pvip":false,"replies":[{"id":"18840","content":"å—¯ï¼Œåˆ—å­˜å°¤å…¶ä¸å»ºè®®ç”¨* <br><br>å½“ç„¶è¡Œå­˜ä¹Ÿä¸å»ºè®®","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1545306927,"ip_address":"","comment_id":52068,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5840272020","product_id":100020801,"comment_content":"å¯¹äºinfobrightè¿™ç§åˆ—å¼å­˜å‚¨çš„å¼•æ“ï¼Œæ˜¯ä¸æ˜¯å°±ä¸èƒ½ç”¨*äº†","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":433728,"discussion_content":"å—¯ï¼Œåˆ—å­˜å°¤å…¶ä¸å»ºè®®ç”¨* \n\nå½“ç„¶è¡Œå­˜ä¹Ÿä¸å»ºè®®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545306927,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":50617,"user_name":"Bennet","can_delete":false,"product_type":"c1","uid":1022801,"ip_address":"","ucode":"C85C47A75BA412","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIXYib4bOBtUeLniaqjMNaOY4gDPPbL4hYmv1HYHSPibyHVQlAeWhabABIy0YL7qgOqaa8EibxGSoiaw1w/132","comment_is_top":false,"comment_ctime":1545016907,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"5839984203","product_id":100020801,"comment_content":"count(å­—æ®µ)<br>1. å¦‚æœè¿™ä¸ªâ€œå­—æ®µâ€æ˜¯å®šä¹‰ä¸º not null çš„è¯ï¼Œä¸€è¡Œè¡Œåœ°ä»è®°å½•é‡Œé¢è¯»å‡ºè¿™ä¸ªå­—æ®µï¼Œåˆ¤æ–­ä¸èƒ½ä¸º nullï¼ŒæŒ‰è¡Œç´¯åŠ ï¼›<br>2. å¦‚æœè¿™ä¸ªâ€œå­—æ®µâ€å®šä¹‰å…è®¸ä¸º nullï¼Œé‚£ä¹ˆæ‰§è¡Œçš„æ—¶å€™ï¼Œåˆ¤æ–­åˆ°æœ‰å¯èƒ½æ˜¯ nullï¼Œè¿˜è¦æŠŠå€¼å–å‡ºæ¥å†åˆ¤æ–­ä¸€ä¸‹ï¼Œä¸æ˜¯ null æ‰ç´¯åŠ ã€‚<br>--------------------------------------------<br>æ²¡æœ‰ç†è§£åŒºåˆ«ï¼Œçœ‹ä¸Šå»ä¸ç®¡â€œå­—æ®µâ€æ˜¯å¦ä¸º nullï¼Œéƒ½éœ€è¦è¯»è®°å½•çš„å­—æ®µå€¼ï¼Œåˆ¤æ–­ä¸æ˜¯nullï¼Œç„¶åè®¡æ•°ã€‚","like_count":1,"discussions":[{"author":{"id":1171004,"avatar":"https://static001.geekbang.org/account/avatar/00/11/de/3c/96c1bc62.jpg","nickname":"å¢å»ºæ–‡","note":"","ucode":"900A0CE253F2BF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375300,"discussion_content":"éƒ½éœ€è¦åˆ¤æ–­æ˜¯å¦ä¸ºnullå§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621566799,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":158196,"discussion_content":"æ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580560653,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":354249,"user_name":"åƒæ°´ä¸ç”¨é’±","can_delete":false,"product_type":"c1","uid":1797135,"ip_address":"å¹¿ä¸œ","ucode":"8A5D5978F0D4E5","user_header":"https://static001.geekbang.org/account/avatar/00/1b/6c/0f/7d242cc2.jpg","comment_is_top":false,"comment_ctime":1660215326,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1660215326","product_id":100020801,"comment_content":"å…ˆæ’å…¥æ•°æ®ï¼Œå†æ›´æ–°è®¡æ•°è¡¨ã€‚è®¡æ•°è¡¨å¤šä¸ªäº‹åŠ¡éƒ½è¦ä¿®æ”¹ï¼Œå­˜åœ¨è¡Œé”ï¼ŒæŠŠéœ€è¦åŠ é”çš„è¡Œæ”¾åˆ°æœ€åï¼Œå¯ä»¥é™ä½é”çš„ç«äº‰","like_count":0},{"had_liked":false,"id":352292,"user_name":"å¤å¸†","can_delete":false,"product_type":"c1","uid":3033735,"ip_address":"","ucode":"D4C9DCD01E85AD","user_header":"https://static001.geekbang.org/account/avatar/00/2e/4a/87/791d0f5e.jpg","comment_is_top":false,"comment_ctime":1658504769,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1658504769","product_id":100020801,"comment_content":"ç”¨ç¼“å­˜ç³»ç»Ÿä¿å­˜è®¡æ•°çš„é—®é¢˜ï¼Œè§£å†³é—®é¢˜çš„å…³é”®æ˜¯ä¸æ˜¯è®©æ’å…¥æ•°æ®å’ŒRedisæ•°æ®å˜åŒ–è¿™ä¸¤ä¸ªæ“ä½œæ„æˆä¸€ä¸ªåŸå­æ“ä½œå‘¢ï¼Ÿå¯¹äºå…¶ä»–çº¿ç¨‹æ¥è¯´ï¼Œå°±åªèƒ½çœ‹åˆ°ä»–ä»¬éƒ½æ²¡å®Œæˆå’Œä¸€èµ·å®Œæˆåçš„æ•°æ®äº†","like_count":0},{"had_liked":false,"id":351752,"user_name":"2Years","can_delete":false,"product_type":"c1","uid":2633486,"ip_address":"","ucode":"9CC611009FCA4E","user_header":"https://static001.geekbang.org/account/avatar/00/28/2f/0e/d61a9a47.jpg","comment_is_top":false,"comment_ctime":1658153109,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1658153109","product_id":100020801,"comment_content":"ä¸€ä¸ªå‡ åƒä¸‡çš„è¡¨ï¼Œcount(*)ç¡®å®å¾ˆæ…¢ï¼Œå¯ä»¥æ€ä¹ˆä¼˜åŒ–å‘¢ï¼Ÿ å› ä¸ºmybatisåˆ†é¡µæŸ¥è¯¢ï¼Œæ¯æ¬¡éƒ½ä¼šcount(*)ï¼Œ æ•ˆæœå¾ˆå·®ã€‚è€å¸ˆæœ‰ä»€ä¹ˆè§£å†³åŠæ³•å—ï¼Œ å¦‚æœä¸åˆ†åº“åˆ†è¡¨çš„è¯ã€‚ ","like_count":0},{"had_liked":false,"id":350593,"user_name":"å¾ˆå¤§çš„å‹‡æ°”","can_delete":false,"product_type":"c1","uid":1695608,"ip_address":"","ucode":"7871D1C1E22F3F","user_header":"https://static001.geekbang.org/account/avatar/00/19/df/78/d4946736.jpg","comment_is_top":false,"comment_ctime":1657026625,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1657026625","product_id":100020801,"comment_content":"å…ˆupdataè®¡æ•°è¡¨ï¼Œç„¶ååœ¨insertä¸šåŠ¡è¡¨ã€‚<br>å› ä¸ºinsertæ‰€æ“ä½œçš„è¡¨æ˜¯ä¸€ä¸ªé¢‘ç¹æ‰§è¡Œdmlè¯­å¥çš„è¡¨ï¼Œæ‰€ä»¥å°½å¯èƒ½çš„å°†è¯¥è¡¨çš„æ“ä½œæ”¾åœ¨åé¢ã€‚è€Œè®¡æ•°è¡¨åªæœ‰ä¸šåŠ¡è¡¨å‘ç”Ÿinsertæ˜¯æ‰ä¼šupdataï¼Œæ‰€ä»¥ç›¸å¯¹æ¥è¯´ä¸é¢‘ç¹ï¼Œå› æ­¤å»ºè®®å…ˆupdataè®¡æ•°è¡¨ï¼Œç„¶ååœ¨å¾€ä¸šåŠ¡è¡¨é‡Œæ‰§è¡Œinsertã€‚<br>","like_count":0},{"had_liked":false,"id":350592,"user_name":"Unknown element","can_delete":false,"product_type":"c1","uid":2028277,"ip_address":"","ucode":"34A129800D0238","user_header":"https://static001.geekbang.org/account/avatar/00/1e/f2/f5/b82f410d.jpg","comment_is_top":false,"comment_ctime":1657026342,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1657026342","product_id":100020801,"comment_content":"è€å¸ˆé—®ä¸‹â€œserver å±‚å¯¹äºè¿”å›çš„æ¯ä¸€è¡Œï¼Œæ”¾ä¸€ä¸ªæ•°å­—â€œ1â€è¿›å»ï¼Œåˆ¤æ–­æ˜¯ä¸å¯èƒ½ä¸ºç©ºçš„ï¼ŒæŒ‰è¡Œç´¯åŠ ã€‚â€<br>è¿™é‡Œâ€œæ”¾ä¸€ä¸ªæ•°å­—1è¿›å»â€æ€ä¹ˆç†è§£ï¼Ÿ","like_count":0},{"had_liked":false,"id":349282,"user_name":"é²Â·æœ¬","can_delete":false,"product_type":"c1","uid":1209939,"ip_address":"","ucode":"F1DEB30C21B48E","user_header":"https://static001.geekbang.org/account/avatar/00/12/76/53/21d62a23.jpg","comment_is_top":false,"comment_ctime":1655864587,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1655864587","product_id":100020801,"comment_content":"è€å¸ˆ, å¦‚æœmysql åªæœ‰ä¸»é”®ç´¢å¼•, æ²¡æœ‰å…¶ä»–ç´¢å¼•çš„æƒ…å†µä¸‹, select count(*) åšä¸»é”®ç´¢å¼•çš„æ‰«æ, æ˜¯ä¸æ˜¯å°±ç›¸å½“äºåšäº†å…¨è¡¨æ‰«æäº†?","like_count":0,"discussions":[{"author":{"id":1453053,"avatar":"https://static001.geekbang.org/account/avatar/00/16/2b/fd/7013289d.jpg","nickname":"æ¸©æ•…è€ŒçŸ¥æ–°å¯ä»¥ä¸ºå¸ˆçŸ£","note":"","ucode":"FADCDFA9F9E5E8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579224,"discussion_content":"å¯èƒ½å°±æ˜¯â€œå–ä¸å–æ•°æ®â€çš„å·®åˆ«å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657258053,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":345583,"user_name":"å¹¸ç¦æœµæœµ","can_delete":false,"product_type":"c1","uid":1099834,"ip_address":"","ucode":"A0783D165BE26A","user_header":"https://static001.geekbang.org/account/avatar/00/10/c8/3a/f7359b82.jpg","comment_is_top":false,"comment_ctime":1652412990,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1652412990","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæœ‰ä¸ªåœ°æ–¹ç†è§£ä¸äº†ï¼Œéº»çƒ¦é—®ä¸‹ï¼šæ–‡ç« å‰é¢è¯´innodbè€ƒè™‘ä¸åŒäº‹åŠ¡ä¸­è¯»åˆ°çš„countå¯èƒ½ä¸ä¸€æ ·æ‰€ä»¥innodbæ²¡æœ‰åƒmyisamä¸€æ ·å­˜å‚¨countå€¼ï¼Œâ€œåœ¨æ•°æ®åº“ä¿å­˜è®¡æ•°â€é‡Œè¯´å¯ä»¥å°†countå€¼å­˜å‚¨åœ¨ä¸€å¼ å•ç‹¬çš„è¡¨ä¸­ï¼Œæˆ‘ç†è§£è¡¨è¿˜æ˜¯å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼Œä¸ºä»€ä¹ˆinnodbä¸èƒ½å°†countå€¼å­˜å‚¨åœ¨ç³»ç»Ÿè¡¨ä¸­ï¼Ÿ","like_count":0},{"had_liked":false,"id":345419,"user_name":"whyly","can_delete":false,"product_type":"c1","uid":1798882,"ip_address":"","ucode":"D34D6B7164C982","user_header":"https://static001.geekbang.org/account/avatar/00/1b/72/e2/95b0543c.jpg","comment_is_top":false,"comment_ctime":1652259817,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1652259817","product_id":100020801,"comment_content":"ä»å¹¶å‘çš„è§’åº¦å‡ºå‘ï¼Œåº”è¯¥å…ˆæ’å…¥åæ›´æ–°è®¡æ•°è¡¨ï¼ŒInnoDBè¡Œé”æ”¯æŒä¸¤é˜¶æ®µé”åè®®ï¼Œåœ¨éœ€è¦çš„æ—¶å€™åŠ é”ï¼Œä½†å¹¶ä¸æ˜¯ä¸éœ€è¦å°±é‡Šæ”¾ï¼Œè¦åˆ°äº‹åŠ¡æäº¤åæ‰é‡Šæ”¾ï¼Œæ‰€ä»¥åº”è¯¥æŠŠå®¹æ˜“äº§ç”Ÿèµ„æºç«äº‰çš„æ“ä½œå¾€åæ”¾ã€‚","like_count":0},{"had_liked":false,"id":341804,"user_name":"æ ¸æ¡ƒ","can_delete":false,"product_type":"c1","uid":1385204,"ip_address":"","ucode":"7AB05270CBCCCB","user_header":"https://static001.geekbang.org/account/avatar/00/15/22/f4/9fd6f8f0.jpg","comment_is_top":false,"comment_ctime":1649837341,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1649837341","product_id":100020801,"comment_content":"æ€è€ƒé¢˜é‚£é‡Œï¼Œå¾ˆå¤šäººéƒ½æåˆ°äº†å›ç­”ï¼Œè¿™é‡Œä»å¦å¤–ä¸€ä¸ªè§’åº¦æ¥æ€è€ƒå§ï¼Œé™¤äº†æ•°æ®åº“ï¼Œæ–‡ä»¶ç³»ç»Ÿå…¶å®ä¹Ÿæ˜¯é¢ä¸´è¿™æ ·çš„é—®é¢˜ï¼Œå½“å¾ˆå¤šæ•°æ®å†™å…¥çš„æ—¶å€™ï¼Œè¿™æ—¶å€™æ–‡ä»¶çš„å…ƒæ•°æ®ä¿¡æ¯ä¹Ÿæ˜¯éœ€è¦æ›´æ–°çš„ã€‚å› æ­¤ä¸€èˆ¬éƒ½æ˜¯å…ˆè®©æ•°æ®å†™å…¥ï¼Œä½¿ç”¨cowï¼Œç„¶åå†å®šæ—¶æ›´æ–°æˆ–è€…å®¢æˆ·ç«¯å‘èµ·æ›´æ–°æ¥ä¿®æ”¹æ–‡ä»¶å…ƒæ•°æ®ä¿¡æ¯ã€‚","like_count":0},{"had_liked":false,"id":341653,"user_name":"ëˆˆ_ëˆˆ","can_delete":false,"product_type":"c1","uid":1248249,"ip_address":"","ucode":"8277EC25B39038","user_header":"https://static001.geekbang.org/account/avatar/00/13/0b/f9/471bb35d.jpg","comment_is_top":false,"comment_ctime":1649752615,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1649752615","product_id":100020801,"comment_content":"æƒ³é—®ä¸€ä¸‹ï¼Œå¦‚æœä¸šåŠ¡å¯¹æ•°é‡æœ‰é™åˆ¶ï¼Œä¾‹å¦‚ä¸èƒ½è¶…è¿‡100æ¡æ•°æ®é‚£è¿˜åº”è¯¥å…ˆæ’å…¥è¡Œå—ï¼Ÿå¦‚æœæ’å…¥è¡Œä¹‹åï¼Œæ›´æ–°countï¼Œå‘ç°countå˜äº†ï¼Œæ˜¯å¦è¿˜è¦å†æŸ¥ä¸€ä¸‹countæœ‰æ²¡æœ‰è¶…è¿‡é™åˆ¶ï¼Œå¦‚æœè¶…è¿‡äº†é™åˆ¶ï¼Œè¦è§¦å‘å›æ»šäº‹åŠ¡ï¼Œæ˜¯ä¸æ˜¯æˆæœ¬ç‰¹åˆ«é«˜ï¼Ÿ","like_count":0},{"had_liked":false,"id":337436,"user_name":"æˆ‘ä¸æ˜¯ç å†œ","can_delete":false,"product_type":"c1","uid":1874999,"ip_address":"","ucode":"EB4BB711CC54B6","user_header":"https://static001.geekbang.org/account/avatar/00/1c/9c/37/253ea895.jpg","comment_is_top":false,"comment_ctime":1646823972,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1646823972","product_id":100020801,"comment_content":"è¿™ä¹ˆçœ‹æ¥ï¼Œcountèšåˆå‡½æ•°å…¶å®æ˜¯ç”±serverå±‚å®ç°çš„ã€‚ç›²çŒœå…¶ä»–å‡½æ•°åº”è¯¥ä¹Ÿæ˜¯è¿™æ ·å§ã€‚","like_count":0,"discussions":[{"author":{"id":1453053,"avatar":"https://static001.geekbang.org/account/avatar/00/16/2b/fd/7013289d.jpg","nickname":"æ¸©æ•…è€ŒçŸ¥æ–°å¯ä»¥ä¸ºå¸ˆçŸ£","note":"","ucode":"FADCDFA9F9E5E8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579225,"discussion_content":"å‡½æ•°éƒ½æ˜¯åœ¨serverå±‚ï¼Œå¼•æ“å±‚åªè´Ÿè´£å­˜å–æ•°æ®ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657258235,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2843604,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/63/d4/b63373c3.jpg","nickname":"é‡‘é‡‘","note":"","ucode":"807EDDCDB2E939","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":560307,"discussion_content":"åƒè¿™ç§å‡½æ•°éƒ½æ˜¯ç”±ä¸Šå±‚çš„è®¡ç®—å±‚å®ç°çš„ï¼Œå­˜å‚¨å¼•æ“å®é™…ä¸Šåªæœ‰è¯»æ•°æ®å’Œå†™æ•°æ®çš„åŠŸèƒ½ï¼Œåƒæ‰€è°“çš„äº‹åŠ¡å®é™…ä¸Šä¹Ÿæ˜¯ä¸ºè¯»å†™æ•°æ®è¿›è¡ŒæœåŠ¡çš„ã€‚è€Œå­˜å‚¨å¼•æ“ä¸€èˆ¬æ˜¯æ²¡æœ‰è®¡ç®—åŠŸèƒ½çš„ï¼Œæœ‰çš„è¯ä¹Ÿä¹‹åä¸€äº›æ¯”è¾ƒç®€å•çš„è¿‡æ»¤æ“ä½œï¼Œç›®çš„æ˜¯ä¸ºäº†å‡å°‘è®¡ç®—å±‚å’Œå­˜å‚¨å±‚ä¹‹é—´çš„æ•°æ®é‡äº¤äº’","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649256204,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":337141,"user_name":"æ¸…é£","can_delete":false,"product_type":"c1","uid":1142539,"ip_address":"","ucode":"ED1B6DECC3A102","user_header":"https://static001.geekbang.org/account/avatar/00/11/6f/0b/06480912.jpg","comment_is_top":false,"comment_ctime":1646645316,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1646645316","product_id":100020801,"comment_content":"count(*)ä¸å–æ•°æ®ï¼Œç›´æ¥ç»Ÿè®¡è¡Œæ•°ï¼Œæœ‰ä¸€ä¸ªç–‘é—®ï¼Œåœ¨RRå’ŒRCæ¨¡å¼ä¸‹ï¼Œæœ‰éš”ç¦»æ€§çš„å­˜åœ¨ã€‚ä¸åˆ¤æ–­æ•°æ®ç‰ˆæœ¬å—","like_count":0,"discussions":[{"author":{"id":1015184,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7d/90/abb7bfe3.jpg","nickname":"fourge","note":"","ucode":"F3E3FFC4990358","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582999,"discussion_content":"å°±æ˜¯åœ¨ä¼šè¯ä¸­å¯è§èŒƒå›´å†…çš„ç»Ÿè®¡æ•°é‡çš„å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659867467,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1209939,"avatar":"https://static001.geekbang.org/account/avatar/00/12/76/53/21d62a23.jpg","nickname":"é²Â·æœ¬","note":"","ucode":"F1DEB30C21B48E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":576968,"discussion_content":"åŒé—®?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655869883,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":327610,"user_name":"ç–¯æ¸…ä¿Š","can_delete":false,"product_type":"c1","uid":1940779,"ip_address":"","ucode":"8466D86EC173EE","user_header":"https://static001.geekbang.org/account/avatar/00/1d/9d/2b/6da5a8bf.jpg","comment_is_top":false,"comment_ctime":1640188698,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1640188698","product_id":100020801,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼æ€ä¹ˆæŸ¥çœ‹MySQLä¸­çš„count(?)å…·ä½“æ˜¯å¦‚ä½•æ‰§è¡Œçš„å‘¢ï¼Ÿå•ä»è¯­å¥çš„æ‰§è¡Œæ—¶é—´æ¥çœ‹ã€æ— æ³•çœ‹å‡ºæ‰§è¡Œæ•ˆç‡çš„ä¼˜å…ˆçº§ï¼Ÿ<br><br>SELECT count(*) from test    -- 2145280    0.557s<br>SELECT count(batch_task_id) from test   -- batch_task_id ä¸ºä¸»é”®    2145280  0.420s<br>SELECT count(task_id) from test        -- task_id ä¸ºéç©ºå­—æ®µ      2145280  0.420s<br>SELECT count(execute_type) from test    -- execute å¯ä¸ºç©ºå­—æ®µ      1763328  1.090s","like_count":0},{"had_liked":false,"id":326589,"user_name":"æ—é¹","can_delete":false,"product_type":"c1","uid":2688498,"ip_address":"","ucode":"FC2AA9B8E7DF99","user_header":"https://static001.geekbang.org/account/avatar/00/29/05/f2/3a0f7f60.jpg","comment_is_top":false,"comment_ctime":1639572714,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1639572714","product_id":100020801,"comment_content":"å¯¹äºè®¡æ•°ï¼Œæˆ‘æœ‰ä¸ªç–‘æƒ‘ï¼Œæ—¢ç„¶æˆ‘ä»¬èƒ½å¤Ÿåˆ©ç”¨äº‹åŠ¡ + ç‹¬è‡ªåˆ›å»ºè¡¨æ¥è§£å†³ï¼Œé‚£ä¹ˆMySQLæœ¬èº«æ˜¯ä¸æ˜¯ä¹Ÿå¯ä»¥è¿™æ ·è§£å†³ï¼Ÿ","like_count":0},{"had_liked":false,"id":325846,"user_name":"å»ºå¼º","can_delete":false,"product_type":"c1","uid":1397126,"ip_address":"","ucode":"62B03D0E0C64EC","user_header":"https://static001.geekbang.org/account/avatar/00/15/51/86/b5fd8dd8.jpg","comment_is_top":false,"comment_ctime":1639191372,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1639191372","product_id":100020801,"comment_content":"æ€è€ƒé¢˜ï¼Œå…ˆæ›´æ–°è®¡æ•°è¡¨ï¼Œå†æ’å…¥è®°å½•ï¼Œæ›´æ–°è®¡æ•°è¡¨æ—¶é—´è¾ƒçŸ­ï¼Œæ’å…¥è®°å½•ç›¸å¯¹æ—¶é—´è¾ƒé•¿ï¼Œå…ˆæ‰§è¡Œæ—¶é—´çŸ­çš„ï¼Œå†æ‰§è¡Œæ—¶é—´é•¿çš„ï¼Œå¯ä»¥å°½å¿«é‡Šæ”¾èµ„æºï¼Œæ€§èƒ½ä¹Ÿä¼šæ›´å¥½","like_count":0},{"had_liked":false,"id":324975,"user_name":"å‰å°”ç“¦ä¼¦ä¸","can_delete":false,"product_type":"c1","uid":2714921,"ip_address":"","ucode":"A1D9F8E3FEA089","user_header":"https://static001.geekbang.org/account/avatar/00/29/6d/29/8f0654df.jpg","comment_is_top":false,"comment_ctime":1638764586,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1638764586","product_id":100020801,"comment_content":"å…ˆæ’å…¥æ–°æ•°æ®ï¼Œå†ä¿®æ”¹è®¡æ•°ã€‚<br>å› ä¸ºä¿®æ”¹è®¡æ•°ä¼šæ¶‰åŠåˆ°è¡Œé”çš„ç«äº‰ï¼Œåº”è¯¥æœ€å¤§ç¨‹åº¦é™ä½äº‹åŠ¡ä¹‹é—´çš„é”ç­‰å¾…ï¼Œæé«˜å¹¶å‘ã€‚","like_count":0},{"had_liked":false,"id":324738,"user_name":"å¼ äº‘ç¿”","can_delete":false,"product_type":"c1","uid":1384729,"ip_address":"","ucode":"7D2E7F13B48664","user_header":"https://static001.geekbang.org/account/avatar/00/15/21/19/50085e26.jpg","comment_is_top":false,"comment_ctime":1638596559,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"1638596559","product_id":100020801,"comment_content":"å¦‚æœè¿™å¼ è¡¨çš„ä¸»é”®idè®¾ç½®ä¸ºè‡ªå¢ å¹¶ä¸”æ°¸è¿œä¸åˆ é™¤æ•°æ® é‚£ç›´æ¥max(id) å°±å¯ä»¥è·å¾—å½“å‰çš„è¡Œæ•° ä¸”ä¸æ˜¯å…¨è¡¨æ‰«æ","like_count":0,"discussions":[{"author":{"id":1015184,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7d/90/abb7bfe3.jpg","nickname":"fourge","note":"","ucode":"F3E3FFC4990358","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583000,"discussion_content":"ä½†æ˜¯é€šå¸¸çš„ä¸šåŠ¡æŸ¥è¯¢åœºæ™¯ä¸‹ï¼Œå¹¶ä¸æ˜¯ç›´æ¥countæ•´å¼ è¡¨ï¼Œè€Œæ˜¯å¸¦æœ‰whereæ¡ä»¶çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659867551,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":321155,"user_name":"ä¿¡å¤©æ¸¸","can_delete":false,"product_type":"c1","uid":1678523,"ip_address":"","ucode":"786A45A9139434","user_header":"https://static001.geekbang.org/account/avatar/00/19/9c/bb/88f41cba.jpg","comment_is_top":false,"comment_ctime":1636690973,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1636690973","product_id":100020801,"comment_content":"ä½¿ç”¨mysqlè®¡æ•°è¡¨åœ¨å®é™…åœºæ™¯ä¸­æ˜¯ä¸æ˜¯æ„ä¹‰ä¸å¤§ï¼Œå¾€å¾€æŸ¥è¯¢éƒ½æ˜¯å¸¦æ¡ä»¶çš„","like_count":0},{"had_liked":false,"id":320692,"user_name":"MichaelChen","can_delete":false,"product_type":"c1","uid":1184259,"ip_address":"","ucode":"FAD745F3220AE0","user_header":"https://static001.geekbang.org/account/avatar/00/12/12/03/c657c350.jpg","comment_is_top":false,"comment_ctime":1636453913,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1636453913","product_id":100020801,"comment_content":"è‡ªå·±ç»´æŠ¤è®¡æ•°å™¨ï¼Œåªèƒ½é€‚ç”¨äºæ•´ä¸ªåˆ—è¡¨çš„åˆè®¡ã€‚åŸºäºWHEREçš„COUNT(*)åˆåº”è¯¥å¦‚ä½•ä¼˜åŒ–å‘¢ï¼Ÿæˆ‘ä»¬åœ¨åˆ—è¡¨ä¸­ï¼Œæ€»æ˜¯ä¼šæœ‰å­—æ®µçš„æœç´¢ï¼Œç„¶åé€šç”¨åˆ†é¡µç±»å°±éœ€è¦countç­›é€‰åçš„æ¡æ•°ï¼Œè¿™ç§æƒ…å†µä¸‹æ˜¯å¦çœŸçš„æ— è§£ï¼Ÿ","like_count":0},{"had_liked":false,"id":319439,"user_name":"CJJ","can_delete":false,"product_type":"c1","uid":1194060,"ip_address":"","ucode":"7E02A6A8547559","user_header":"https://static001.geekbang.org/account/avatar/00/12/38/4c/5426e2e0.jpg","comment_is_top":false,"comment_ctime":1635815989,"is_pvip":true,"discussion_count":0,"race_medal":1,"score":"1635815989","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæˆ‘æœ‰ä¸ªé—®é¢˜æƒ³é—®ä¸€ä¸‹ï¼Œè¡¨æ•°æ®å‡ ç™¾ä¸‡å‡ åƒä¸‡çš„è¯ï¼Œç»å¸¸countæ€»æ•°æœ‰ç‚¹æ…¢ï¼Œä½†æ˜¯å¾ˆå¤šæ—¶å€™ä¼šå¸¦ä¸åŒçš„æ¡ä»¶æŸ¥è¯¢ï¼Œé‚£ä¹ˆè¿™ä¸ªcountå°±ä¸èƒ½ä¿å­˜èµ·æ¥äº†å§ï¼Œå› ä¸ºæ¡ä»¶ä¸åŒcountçš„æ•°é‡ä¹Ÿä¸ä¸€æ ·ï¼Œè¿™ç§è¯¥æ€ä¹ˆä¼˜åŒ–å‘€ï¼ŸğŸ˜”","like_count":0},{"had_liked":false,"id":314585,"user_name":"WithSunny","can_delete":false,"product_type":"c1","uid":2679228,"ip_address":"","ucode":"76AE8C4E5CC5FF","user_header":"https://static001.geekbang.org/account/avatar/00/28/e1/bc/fc0cbd08.jpg","comment_is_top":false,"comment_ctime":1633243047,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1633243047","product_id":100020801,"comment_content":"è‹¥åœ¨å¤šç‰ˆæœ¬ä¸­éƒ½å­˜æ”¾è¡Œæ•°ï¼Œæ˜¯å¦å¯ä»¥ä¿è¯æŸ¥è¯¢æ•ˆç‡å‘¢ï¼Ÿä¸è¿‡ä¼šæµªè´¹ä¸€äº›ç©ºé—´ã€‚","like_count":0},{"had_liked":false,"id":310820,"user_name":"Eternal","can_delete":false,"product_type":"c1","uid":1188023,"ip_address":"","ucode":"EA6FE7CC98F740","user_header":"https://static001.geekbang.org/account/avatar/00/12/20/b7/bdb3bcf0.jpg","comment_is_top":false,"comment_ctime":1630922332,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1630922332","product_id":100020801,"comment_content":"å¦‚æœäº‹åŠ¡ä¸­ç¬¬ä¸€æ­¥æ˜¯è®¡æ•°æ›´æ–°ï¼Œç¬¬äºŒæ­¥æ˜¯æ’å…¥ï¼Œå¦‚æœå¤§é‡å¹¶å‘è¯·æ±‚è¿‡æ¥ï¼Œè®¡æ•°æ“ä½œçš„è¡Œé”ç«äº‰ä¼šéå¸¸æ¿€çƒˆï¼›<br>å¦‚æœåè¿‡æ¥ï¼Œç¬¬ä¸€æ­¥æ˜¯æ’å…¥ï¼Œç¬¬äºŒæ­¥æ˜¯æ›´æ–°è®¡æ•°ï¼Œæ’å…¥æ•°æ®ç«äº‰æ²¡æœ‰é‚£ä¹ˆæ¿€çƒˆï¼Œä¸”æ‰§è¡Œçš„æ—¶é—´ä¹Ÿæ˜¯ä¸ä¸€è‡´çš„ï¼Œç­‰å¾…æ’å…¥æ•°æ®å®Œæ¯•åå†æ›´æ–°è®¡æ•°ï¼Œé‚£ä¹ˆå°±å¤§å¤§é™ä½äº†è®¡æ•°æ“ä½œçš„è¡Œé”ç«äº‰ï¼Œå› æ­¤æ•ˆç‡æ›´é«˜","like_count":0},{"had_liked":false,"id":310638,"user_name":"å®™æ–¯","can_delete":false,"product_type":"c1","uid":2041396,"ip_address":"","ucode":"80DF36BAD298AD","user_header":"https://static001.geekbang.org/account/avatar/00/1f/26/34/891dd45b.jpg","comment_is_top":false,"comment_ctime":1630814924,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1630814924","product_id":100020801,"comment_content":"é—®é¢˜ï¼šç”±äºäº‹åŠ¡å¯ä»¥ä¿è¯ä¸­é—´ç»“æœä¸è¢«åˆ«çš„äº‹åŠ¡è¯»åˆ°ï¼Œå› æ­¤ä¿®æ”¹è®¡æ•°å€¼å’Œæ’å…¥æ–°è®°å½•çš„é¡ºåºæ˜¯ä¸å½±å“é€»è¾‘ç»“æœçš„ã€‚ä½†æ˜¯ï¼Œä»å¹¶å‘ç³»ç»Ÿæ€§èƒ½çš„è§’åº¦è€ƒè™‘ï¼Œä½ è§‰å¾—åœ¨è¿™ä¸ªäº‹åŠ¡åºåˆ—é‡Œï¼Œåº”è¯¥å…ˆæ’å…¥æ“ä½œè®°å½•ï¼Œè¿˜æ˜¯åº”è¯¥å…ˆæ›´æ–°è®¡æ•°è¡¨å‘¢ï¼Ÿ<br>å›ç­”ï¼šåº”è¯¥æ”¾åœ¨åé¢ï¼ˆå³å°†é‡Šæ”¾çš„æ—¶å€™ï¼‰ï¼Œäº‹åŠ¡é—´å­˜åœ¨è¯»ä¸€è‡´å’Œå†™å½“å‰çš„æƒ…å†µï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œå†™ä¼šåŠ é”ï¼Œä¸”é”å®šæ—¶é—´ç›´åˆ°äº‹åŠ¡ç‰ˆæœ¬ä¸å†ä½¿ç”¨ï¼ˆé€šå¸¸å¯ä»¥è®¤ä¸ºæ˜¯æäº¤ä»¥åï¼‰ï¼Œè€Œæ€»æ•°å­—æ®µæ˜¯ä¸€ä¸ªçƒ­æ›´å­—æ®µï¼Œè‹¥é å‰è¿™ç§åŠ é”æ—¶é—´æ˜æ˜¾æ›´é•¿ï¼Œå› æ­¤å°†å…¶æ”¾åœ¨é è¿‘äº‹åŠ¡æäº¤æˆ–æ¯”è¾ƒæ¥è¿‘äº‹åŠ¡æäº¤ã€‚<br>","like_count":0},{"had_liked":false,"id":310107,"user_name":"Geek_24d27b","can_delete":false,"product_type":"c1","uid":1625645,"ip_address":"","ucode":"B52AB6E73F6A0E","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Gf2QrwPGnMzia7UbNZvAqDOHZZXFyibnUUsc7JrLggqUC2Mw0UneEBP9KicP8Dic30O22XrOz1cB3DatE4NxGpbIlA/132","comment_is_top":false,"comment_ctime":1630487134,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1630487134","product_id":100020801,"comment_content":"è€å¸ˆï¼š<br>1ï¼Œcount(*)ï¼Œinnodbå¼•æ“æ˜¯ç›´æ¥å°†è¡Œæ•°è¿”å›ç»™serverå±‚ï¼Œè¿˜æ˜¯åƒcount(1)ä¸€æ ·ï¼Œå…ˆå°†æ•°æ®è¿”å›ç»™serverå±‚ï¼Œå†ç”±serverå±‚ç»™æ¯ä¸€è¡Œæ”¾ä¸€ä¸ª1å‘¢ï¼Ÿ<br>2ï¼Œæˆ‘çœ‹mysqlå®˜æ–¹æ–‡æ¡£ï¼ˆ8.0ï¼‰ï¼Œè¯´innodbå¼•æ“å¤„ç†count(*)å’Œcount(1)çš„æ–¹å¼æ˜¯ä¸€æ ·çš„ï¼Œæ²¡æœ‰ä»»ä½•æ€§èƒ½å·®å¼‚ã€‚æ—¢ç„¶è¿™æ ·ï¼Œä¸ºä»€ä¹ˆè¿˜è¦åŒºåˆ†count(*)å’Œcount(1)å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":309517,"user_name":"Geek_24d27b","can_delete":false,"product_type":"c1","uid":1625645,"ip_address":"","ucode":"B52AB6E73F6A0E","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Gf2QrwPGnMzia7UbNZvAqDOHZZXFyibnUUsc7JrLggqUC2Mw0UneEBP9KicP8Dic30O22XrOz1cB3DatE4NxGpbIlA/132","comment_is_top":false,"comment_ctime":1630208106,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1630208106","product_id":100020801,"comment_content":"innodbå¼•æ“ï¼Œä½¿ç”¨count(*),   æ•°æ®åº“å¼•æ“ç»™serverå±‚è¿”å›çš„åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿæ˜¯æ‰€é€‰æ‹©çš„ç´¢å¼•ä¸­çš„ä¸€æ¡è®°å½•ï¼Œè¿˜æ˜¯ï¼Ÿ","like_count":0},{"had_liked":false,"id":308274,"user_name":"è‰è“å‘³çš„æ—ºä»”","can_delete":false,"product_type":"c1","uid":2724523,"ip_address":"","ucode":"4E5D2DA5DF12AC","user_header":"https://static001.geekbang.org/account/avatar/00/29/92/ab/023e2453.jpg","comment_is_top":false,"comment_ctime":1629510640,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1629510640","product_id":100020801,"comment_content":"æŒ‰ç…§æ•ˆç‡æ’åºçš„è¯ï¼Œcount(å­—æ®µ)&lt;count(ä¸»é”® id)&lt;count(1)â‰ˆcount(*)ï¼Œæ‰€ä»¥æˆ‘å»ºè®®ä½ ï¼Œå°½é‡ä½¿ç”¨ count(*)ã€‚<br>------å¯¹äºè¿™ä¸€æ®µï¼Œæˆ‘ä¹‹å‰é‡åˆ°è¿‡ä¸€ä¸ªé—®é¢˜ï¼Œæœ‰ä¸ªè¡¨å¤§æ¦‚å››äº”ç™¾ä¸‡çš„æ•°æ®ï¼Œç”¨count(*)æ˜¯20å¤šç§’ï¼Œç”¨countï¼ˆ1ï¼‰æ˜¯18ç§’ï¼Œä¸ºä»€ä¹ˆcount(1)æ¯”countï¼ˆ*ï¼‰è¿˜å¿«äº†å¥½å‡ ç§’å‘¢","like_count":0},{"had_liked":false,"id":306916,"user_name":"æ¨ä¹‰","can_delete":false,"product_type":"c1","uid":2017649,"ip_address":"","ucode":"9F3FB567FA1D07","user_header":"https://static001.geekbang.org/account/avatar/00/1e/c9/71/83da8abe.jpg","comment_is_top":false,"comment_ctime":1628774943,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1628774943","product_id":100020801,"comment_content":"è€å¸ˆä½ å¥½ï¼Œæœ€è¿‘åœ¨çœ‹8.0çš„æ–‡æ¡£ï¼Œçœ‹åˆ°è¿™å¥InnoDB handles and operations in the same way. There is no performance difference. SELECT COUNT(*)SELECT COUNT(1)ã€‚å’Œè€å¸ˆè®²çš„æœ‰äº›å‡ºå…¥ï¼Œæ˜¯ç‰ˆæœ¬é—®é¢˜é€ æˆçš„ä¹ˆ","like_count":0},{"had_liked":false,"id":305605,"user_name":"å¼ ç´ å","can_delete":false,"product_type":"c1","uid":1944374,"ip_address":"","ucode":"AB2B788B7130C7","user_header":"https://static001.geekbang.org/account/avatar/00/1d/ab/36/106a30d4.jpg","comment_is_top":false,"comment_ctime":1628068165,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1628068165","product_id":100020801,"comment_content":"è€å¸ˆï¼Œå¦‚æœåˆ©ç”¨ä¸€å¼ è¡¨ç”¨æ¥å­˜æ‰€æœ‰è¡¨çš„æ€»è¡Œæ•°ï¼Œæ˜¯ä¸æ˜¯å¯ä»¥åˆ©ç”¨è¿™å¼ è®°å½•æ€»æ•°çš„è¡¨çš„mvccæ€§è´¨ï¼ŒInnoDB å°±å¯ä»¥è·Ÿ MyISAM ä¸€æ ·ï¼Œä¹ŸæŠŠæ•°å­—å­˜èµ·æ¥äº†ã€‚","like_count":0},{"had_liked":false,"id":305495,"user_name":"äºŒå‡¡","can_delete":false,"product_type":"c1","uid":2134167,"ip_address":"","ucode":"97CE9CBE511CBA","user_header":"https://static001.geekbang.org/account/avatar/00/20/90/97/d4bbb6ed.jpg","comment_is_top":false,"comment_ctime":1627996622,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1627996622","product_id":100020801,"comment_content":"æ›´æ–°éœ€è¦åŠ å†™é”ï¼Œæ’å…¥ä¸éœ€è¦åŠ é”ï¼Œæ‰€ä»¥åº”è¯¥å…ˆæ’å…¥æ•°æ®ï¼Œå†æ›´æ–°æŠ€æœ¯ï¼Œè¿™æ ·æ‹¿é”åˆ°äº‹åŠ¡æäº¤é”é‡Šæ”¾æ—¶é—´å˜çŸ­","like_count":0},{"had_liked":false,"id":304961,"user_name":"Rui","can_delete":false,"product_type":"c1","uid":2705422,"ip_address":"","ucode":"995E914B6DFAE5","user_header":"https://static001.geekbang.org/account/avatar/00/29/48/0e/ea42eaf8.jpg","comment_is_top":false,"comment_ctime":1627718457,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1627718457","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæˆ‘æœ‰ä¸ªé—®é¢˜ä¸æ˜¯å¾ˆç†è§£ï¼Œ<br>å°†count(*)å­˜åœ¨innodbé‡Œï¼Œå’Œæˆ‘ä»¬å•ç‹¬æ‰¾ä¸€å¼ è¡¨å¯¸count(*),<br>åè€…æ¯”èµ·å‰è€…ï¼Œé™¤äº†æ€§èƒ½ä¸Šçš„ä¼˜åŠ¿ï¼Œè¿˜è§£å†³äº†ä»€ä¹ˆé—®é¢˜å—ï¼Ÿ<br>å› ä¸ºæˆ‘è§‰å¾—ä»–ä»¬å…¶å®éƒ½æ˜¯é€»è¾‘ä¸€è‡´çš„ï¼Œå¹¶ä¸”å› ä¸ºMVCC,ä»–ä»¬éƒ½ä¸ç¡®å®šåº”è¯¥è¿”å›å¤šå°‘è¡Œ","like_count":0},{"had_liked":false,"id":301531,"user_name":"somenzz","can_delete":false,"product_type":"c1","uid":1187197,"ip_address":"","ucode":"EA59A170DF8910","user_header":"https://static001.geekbang.org/account/avatar/00/12/1d/7d/368df396.jpg","comment_is_top":false,"comment_ctime":1625730323,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1625730323","product_id":100020801,"comment_content":"å…ˆè®¡æ•°åŠ ä¸€ï¼Œå†æ’å…¥è®°å½•ï¼Œå› ä¸ºæ’å…¥è®°å½•ä¼šç”³è¯·å¹¶å æœ‰è¡Œé”æˆ–è¡¨é”ï¼Œå æœ‰çš„æ—¶é—´çº¦å°‘è¶Šå¥½","like_count":0,"discussions":[{"author":{"id":2843604,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/63/d4/b63373c3.jpg","nickname":"é‡‘é‡‘","note":"","ucode":"807EDDCDB2E939","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":560314,"discussion_content":"é”™è¯¯çš„å“Ÿï¼Œè¦å…ˆæ’å…¥è®°å½•å†è®¡æ•°ã€‚åˆ¤æ–­å“ªå¥è¯åº”è¯¥æ”¾åœ¨åé¢éœ€è¦æ ¹æ®å¼•å‘å†²çªçš„æ¦‚ç‡å’Œæ—¶é—´æ¥åˆ¤æ–­ã€‚è®¡æ•°çš„è¡¨ç”±äºæ˜¯è¦æ“ä½œåŒä¸€è¡Œï¼Œåœ¨æœ‰å¤šè¡Œæ’å…¥çš„æ—¶å€™ï¼Œå°±å­˜åœ¨éœ€è¦updateåŒä¸€è¡Œçš„æƒ…å†µï¼Œæ­¤æ—¶è‚¯å®šæ˜¯ä¼šé¢‘ç¹çš„åœ¨è®¡æ•°çš„è¿™ä¸€è¡Œä¸ŠåŠ é”çš„ã€‚ä½†æ˜¯insert intoé™¤éæ˜¯é—´éš™é”è¿™ç§ï¼Œå¦åˆ™å¤šè¡Œæ˜¯ä¸ä¼šæœ‰å¹¶å‘çš„å½±å“çš„ã€‚ä¸çŸ¥é“ä½ æ€ä¹ˆå¾—å‡ºè¿™ä¸ªç»“è®ºçš„ï¼Œä½†å‡¡åšä¸ªå®éªŒå°±ä¼šå‘ç°ï¼Œåœ¨ä¸¤ä¸ªäº‹åŠ¡é‡Œæ˜¯å¯ä»¥åŒæ—¶insert intoçš„ï¼Œè¿™ä¸¤ä¸ªäº‹åŠ¡éƒ½ä¸ä¼šè¢«é˜»å¡ï¼Œä½†æ˜¯ä¿®æ”¹åŒä¸€è¡Œå…¶ä¸­ä¸€ä¸ªäº‹åŠ¡å°±ä¼šè¢«é˜»å¡ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649256760,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":296001,"user_name":"æ²¹çº¸ä¼","can_delete":false,"product_type":"c1","uid":2212143,"ip_address":"","ucode":"C2655B9F8874E2","user_header":"https://static001.geekbang.org/account/avatar/00/21/c1/2f/5c8167aa.jpg","comment_is_top":false,"comment_ctime":1622699490,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1622699490","product_id":100020801,"comment_content":"count(1)æ€ä¹ˆè®¡æ•°ï¼Ÿ<br>å¯¹äº count(1) æ¥è¯´ï¼ŒInnoDB å¼•æ“éå†æ•´å¼ è¡¨ï¼Œä½†ä¸å–å€¼ã€‚server å±‚å¯¹äºè¿”å›çš„æ¯ä¸€è¡Œï¼Œæ”¾ä¸€ä¸ªæ•°å­—â€œ1â€è¿›å»ï¼Œåˆ¤æ–­æ˜¯ä¸å¯èƒ½ä¸ºç©ºçš„ï¼ŒæŒ‰è¡Œç´¯åŠ <br><br>è¿™å¥è¯æ€ä¹ˆç†è§£å‘¢ï¼Ÿinnodbä¸å–å€¼ï¼Œè¿”å›ä»€ä¹ˆï¼Ÿè¿”å›éå†çš„æ¯è¡Œæ•°æ®ï¼Ÿæ•°å­—1æ”¾è¿›å»å“ªé‡Œï¼Ÿå’Œä»€ä¹ˆåˆ¤æ–­ï¼Ÿ<br>","like_count":0,"discussions":[{"author":{"id":2843604,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/63/d4/b63373c3.jpg","nickname":"é‡‘é‡‘","note":"","ucode":"807EDDCDB2E939","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":560316,"discussion_content":"ä½ å¯ä»¥è®¤ä¸ºè¿”å›çš„æ˜¯ä¸€ä¸ªç©ºçš„æ•°ç»„ï¼Œæ¯”å¦‚å‘½åä¸ºtableã€‚è™½ç„¶æ˜¯ç©ºçš„ï¼Œä½†æ˜¯å¯ä»¥éå†è¿™ä¸ªæ•°ç»„ï¼Œå¹¶é’ˆå¯¹æ¯ä¸€è¡Œè¿›è¡Œåˆ¤æ–­ã€‚countåœ¨åˆ¤æ–­çš„æ—¶å€™ä¼šä¾æ¬¡å–å‡ºæ•°ç»„ä¸­çš„å€¼è¿›è¡Œåˆ¤æ–­ã€‚åƒcount(1)ï¼Œserverå±‚å°±ä¼šå¾€æ•°ç»„é‡Œé¢æ”¾1ï¼Œè¿™æ ·åœ¨åˆ¤æ–­çš„æ—¶å€™table[i]åˆ¤æ–­å°±æ˜¯çœŸä¹Ÿå°±ä¸ä¸ºç©ºï¼Œé‚£å°±å¯ä»¥æ‰§è¡Œç´¯åŠ çš„æ“ä½œã€‚å¦‚æœæ˜¯count(å­—æ®µ)è¿™ç§ï¼Œtableæ•°ç»„é‡Œé¢æœ¬èº«å­˜æ”¾çš„å°±æ˜¯å…·ä½“çš„å­—æ®µå€¼ï¼Œè¿™æ ·åœ¨è¿›è¡Œåˆ¤æ–­çš„æ—¶å€™é¦–å…ˆåˆ¤æ–­å­—æ®µæœ¬èº«æ˜¯ä¸æ˜¯ç©ºï¼Œæ¯”å¦‚ageå­—æ®µå°±å…ˆåˆ¤æ–­ageæ˜¯ä¸æ˜¯not nullï¼Œå¦‚æœæ˜¯çš„è¯åé¢çš„åˆ¤æ–­å°±å¯ä»¥ä¸åšäº†ç›´æ¥ç´¯åŠ ï¼›å¦‚æœä¸æ˜¯çš„è¯ï¼Œè¿˜è¦åˆ¤æ–­table[i]æ˜¯ä¸æ˜¯ä¸ºç©ºï¼Œä¹Ÿå°±æ˜¯å–å‡ºæ¯ä¸€è¡Œçš„è¯¥å­—æ®µçš„å€¼æ˜¯ä¸æ˜¯ä¸ºç©ºã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649257266,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":293598,"user_name":"good boby","can_delete":false,"product_type":"c1","uid":2387358,"ip_address":"","ucode":"1471E2E499412C","user_header":"https://static001.geekbang.org/account/avatar/00/24/6d/9e/6a82a5ea.jpg","comment_is_top":false,"comment_ctime":1621439629,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1621439629","product_id":100020801,"comment_content":"ä¸ªäººçœ‹æ³•ï¼š<br>1ã€rediså­˜å‚¨countå¯ä»¥è¾¾åˆ°æœ€ç»ˆä¸€è‡´æ€§ã€‚<br>2ã€mysqläº‹åŠ¡å°†countå­˜å‚¨åœ¨æ•°æ®è¡¨è¾¾åˆ°ç²¾å‡†ä¸€è‡´æ€§ã€‚<br><br>å¯¹äºåˆ†å¸ƒå¼ç³»ç»Ÿï¼Œå¯èƒ½redisæ–¹æ¡ˆä½¿ç”¨çš„åœºæ™¯ä¼šæ›´å¤šã€‚åŸºäºä»¥ä¸‹2æ–¹é¢è€ƒè™‘ã€‚<br>1ã€å¦‚æœæ•°æ®è¡¨æ¶‰åŠå¤§é‡æ•°æ®çš„æ’å…¥ï¼Œæ•°æ®åº“è¡¨ä¸­å­˜å‚¨countä¼šæœ‰æ€§èƒ½æŸå¤±ã€‚(rediså¹¶å‘é‡åœ¨10Wçº§åˆ«ï¼Œè€Œmysqlè¾¾åˆ°3000å·²ç»ç®—å¾ˆå¹¸è¿ã€‚ï¼‰<br>2ã€é’ˆå¯¹é»‘å®¢æ”»å‡»ï¼Œå¤§é‡å¹¶å‘æ€§çš„è·å–æ•°æ®è¡¨è¡Œæ•°ï¼Œåˆ™éå¸¸å¯èƒ½å¯¼è‡´æ•°æ®åº“æŒ‚æ‰ã€‚å¦‚æœrè¡¨è¡Œæ•°å­˜å‚¨åœ¨redisç¼“å­˜ï¼Œåˆ™æ ¹æ®redisç›¸å…³ç­–ç•¥å¯ä»¥é¿å…ï¼Œä¾‹å¦‚å¸ƒéš†è¿‡æ»¤ã€‚<br>3ã€<br>","like_count":0},{"had_liked":false,"id":292939,"user_name":"å¤§è‰åŸ","can_delete":false,"product_type":"c1","uid":1301925,"ip_address":"","ucode":"F2FB4DD3E58694","user_header":"https://static001.geekbang.org/account/avatar/00/13/dd/a5/308c23cb.jpg","comment_is_top":false,"comment_ctime":1621088511,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1621088511","product_id":100020801,"comment_content":"è€å¸ˆï¼Œinnodbå¼•æ“ä¸åƒmyisamå¼•æ“ï¼Œç›´æ¥è®°å½•è¡¨çš„æ€»è¡Œæ•°ï¼Œæ˜¯å› ä¸ºmvccï¼Œæ¯ä¸ªsessionå¾—åˆ°çš„æ€»æ•°å€¼ä¸ä¸€æ ·ã€‚è¿™ç§åœºæ™¯æ˜¯å› ä¸ºcount(*)æ˜¯åŸºäºsessionã€‚æˆ‘ä»¬å‡è®¾count(*)æ˜¯åŸºäºå…¨å±€çš„ï¼ŒåŸºäºRCéš”ç¦»çº§åˆ«ã€‚ä¸ç®¡é‚£ä¸ªsessionåšäº†å†™å…¥ï¼Œåˆ é™¤ï¼Œåªè¦æ²¡æœ‰commitï¼Œæˆ‘å°±ä¸è®¤ä¸ºæ€»æ•°éœ€è¦åŠ 1ã€‚","like_count":0},{"had_liked":false,"id":290779,"user_name":"lleft","can_delete":false,"product_type":"c1","uid":1970443,"ip_address":"","ucode":"D573EB509455AE","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIx1V1QAxC4NHaxYZGyuibBN8lcURJWc5nrnO4yic1kxnDemYV2FJGialf47kYX9qtDnZZOfe1SJeLicg/132","comment_is_top":false,"comment_ctime":1619749868,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1619749868","product_id":100020801,"comment_content":"MyISAMå­˜å‚¨å¼•æ“æŠŠè¡¨çš„æ€»è¡Œæ•°å­˜å‚¨åœ¨ç£ç›˜ä¸Šçš„ä»€ä¹ˆåœ°æ–¹ï¼ŸMYDæ•°æ®æ–‡ä»¶ä¸­è¿˜æ˜¯ibdata1å…±äº«è¡¨ç©ºé—´é‡Œé¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":285489,"user_name":"äºŒå§","can_delete":false,"product_type":"c1","uid":2290089,"ip_address":"","ucode":"3451748DE3895F","user_header":"","comment_is_top":false,"comment_ctime":1616837516,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1616837516","product_id":100020801,"comment_content":"åŸºæœ¬åŸç†ï¼šè¡Œé”æ˜¯äº‹åŠ¡åœ¨éœ€è¦çš„æ—¶å€™å»è·å–çš„ï¼Œå¹¶ä¸æ˜¯äº‹åŠ¡å¼€å¯çš„æ—¶å€™è·å–çš„ï¼ŒåŒæ—¶ä¹Ÿä¸æ˜¯ç”¨å®Œå°±é‡Šæ”¾ï¼Œè€Œæ˜¯äº‹åŠ¡commitäº†ä¹‹åæ‰èƒ½é‡Šæ”¾ã€‚<br>æ ¹æ®å¦‚ä¸ŠåŸºæœ¬åŸç†ï¼Œåº”è¯¥æ˜¯å…ˆæ’å…¥æ“ä½œè®°å½•ï¼Œå†æ›´æ–°è®¡æ•°è¡¨ã€‚åŸå› ï¼šæ›´æ–°è®¡æ•°è¡¨ä¼šæ¶‰åŠè¡Œé”ç«äº‰ï¼Œå¦‚æœå…ˆæ›´æ–°è®¡æ•°è¡¨ï¼ˆæ­¤æ—¶è·å–è¡Œé”ï¼‰ï¼Œå†æ’å…¥æ“ä½œè®°å½•ï¼Œç„¶åæäº¤äº‹åŠ¡ï¼Œè¿™æ ·çš„è¯åœ¨â€œè·å–è¡Œé”â€åˆ°æäº¤äº‹åŠ¡ä¹‹é—´è¿˜æœ‰ä¸€ä¸ªâ€œæ’å…¥æ“ä½œè®°å½•â€çš„æ“ä½œï¼Œè¿™ä¼šå»¶é•¿é”çš„æŒæœ‰æ—¶é—´ã€‚æ‰€ä»¥åº”è¯¥æ˜¯å…ˆæ’å…¥æ“ä½œè®°å½•ï¼Œç„¶åæ›´æ–°è®¡æ•°è¡¨ï¼Œè¿™æ ·æé«˜å¹¶å‘åº¦ã€‚","like_count":0},{"had_liked":false,"id":284819,"user_name":"çº¢é«˜ç²±","can_delete":false,"product_type":"c1","uid":2365564,"ip_address":"","ucode":"0DD331C8E01A81","user_header":"https://static001.geekbang.org/account/avatar/00/24/18/7c/91d6dd83.jpg","comment_is_top":false,"comment_ctime":1616485908,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1616485908","product_id":100020801,"comment_content":"è®²çš„ä¸é”™  çœ‹ç€èˆ’æœã€‚","like_count":0},{"had_liked":false,"id":283642,"user_name":"ä¾é€å¾€æ˜”","can_delete":false,"product_type":"c1","uid":1336581,"ip_address":"","ucode":"5C62D22DD939D2","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJM1M1iboffpY17I2eSJjlcyC4ibCJrNeB1EDMjticKospDeTOvZHdheib1tiadEicxGfyInzvJSn7PPqpA/132","comment_is_top":false,"comment_ctime":1615862866,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1615862866","product_id":100020801,"comment_content":"åœ¨5.7å®˜æ–¹æ–‡æ¡£12.20.1èŠ‚ä¸­ï¼Œè®²count()å‡½æ•°æ—¶ï¼Œæœ‰å¥è¯: InnoDB handles SELECT COUNT(*) and SELECT COUNT(1) operations in the same way. There is no performance difference.å³count(1)å’Œcount(*)æ²¡æœ‰æ€§èƒ½å·®å¼‚ï¼Œæ‰€ä»¥count(1)=count(*),ä¸çŸ¥é“æ–‡ç« ä¸­è¯´çš„æ˜¯ä¸æ˜¯ä¹‹å‰ç‰ˆæœ¬ï¼Ÿ","like_count":0},{"had_liked":false,"id":282981,"user_name":"maybe","can_delete":false,"product_type":"c1","uid":1475528,"ip_address":"","ucode":"93D160F617E750","user_header":"https://static001.geekbang.org/account/avatar/00/16/83/c8/5ce842f6.jpg","comment_is_top":false,"comment_ctime":1615509440,"is_pvip":false,"discussion_count":0,"race_medal":4,"score":"1615509440","product_id":100020801,"comment_content":"åœ¨ InnoDB äº‹åŠ¡ä¸­ï¼Œè¡Œé”æ˜¯åœ¨éœ€è¦çš„æ—¶å€™æ‰åŠ ä¸Šçš„ï¼Œä½†å¹¶ä¸æ˜¯ä¸éœ€è¦äº†å°±ç«‹åˆ»é‡Šæ”¾ï¼Œè€Œæ˜¯è¦ç­‰åˆ°äº‹åŠ¡ç»“æŸæ—¶æ‰é‡Šæ”¾ã€‚è¿™ä¸ªå°±æ˜¯ä¸¤é˜¶æ®µé”åè®®ã€‚<br>çŸ¥é“äº†è¿™ä¸ªè®¾å®šï¼Œå¯¹æˆ‘ä»¬ä½¿ç”¨äº‹åŠ¡æœ‰ä»€ä¹ˆå¸®åŠ©å‘¢ï¼Ÿé‚£å°±æ˜¯ï¼Œå¦‚æœä½ çš„äº‹åŠ¡ä¸­éœ€è¦é”å¤šä¸ªè¡Œï¼Œè¦æŠŠæœ€å¯èƒ½é€ æˆé”å†²çªã€æœ€å¯èƒ½å½±å“å¹¶å‘åº¦çš„é”å°½é‡å¾€åæ”¾ã€‚<br><br>æŒ‰ç…§è¿™ä¸ªæ€è·¯ï¼Œå…ˆæ’å…¥åæ›´æ–°","like_count":0},{"had_liked":false,"id":281858,"user_name":"Yayu","can_delete":false,"product_type":"c1","uid":1058015,"ip_address":"","ucode":"5E7842458D8229","user_header":"https://static001.geekbang.org/account/avatar/00/10/24/df/645f8087.jpg","comment_is_top":false,"comment_ctime":1614928539,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1614928539","product_id":100020801,"comment_content":"å„ä½ä¼šåœ¨ä»€ä¹ˆæƒ…å†µä¸‹ä½¿ç”¨ä¸å¸¦ where æ¡ä»¶æŸ¥è¯¢è¡¨çš„æ€»è¡Œæ•°ï¼Ÿæˆ‘å¹³æ—¥æ¥è§¦çš„éœ€è¦è®¡ç®—è¡Œæ•°çš„å¤§å¤šéœ€è¦æºå¸¦ where æ¡ä»¶ï¼Œè¯·é—®è¿™ç§æƒ…å†µåˆæ”¹å¦‚ä½•æ”¹è¿› count(*) çš„æ€§èƒ½å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":281652,"user_name":"zhangyi","can_delete":false,"product_type":"c1","uid":1507024,"ip_address":"","ucode":"0C4CAE9DA878F3","user_header":"https://static001.geekbang.org/account/avatar/00/16/fe/d0/e80e4a7e.jpg","comment_is_top":false,"comment_ctime":1614840427,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1614840427","product_id":100020801,"comment_content":"å¸¦ç­›é€‰æ¡ä»¶çš„countå€¼,å¦‚ä½•è®°å½•å‘¢","like_count":0},{"had_liked":false,"id":279598,"user_name":"sotondolphin","can_delete":false,"product_type":"c1","uid":1307088,"ip_address":"","ucode":"42198CE9B201FD","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/QZBHia4nXtspEaRibpmMIMVcDA2HHkNypfvVJ2IllQC3FeFCt7f9iaHW7z5yQ4lcB79ibJwia6tNtpuFroufntMhc2g/132","comment_is_top":false,"comment_ctime":1613840203,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1613840203","product_id":100020801,"comment_content":"å½“ç„¶æ˜¯å…ˆæ’å…¥æ“ä½œè®°å½•å†æ›´æ–°è®¡æ•°è¡¨å•¦ï¼Œå› ä¸ºå¦‚æœæ’å…¥æ“ä½œè®°å½•å¤±è´¥çš„è¯ï¼Œæ’å…¥è®¡æ•°è¡¨å°±å˜æˆå¤šä½™å’Œé”™è¯¯çš„æ“ä½œ","like_count":0},{"had_liked":false,"id":278076,"user_name":"è¶…çº§è›‹è›‹é¥­","can_delete":false,"product_type":"c1","uid":1249616,"ip_address":"","ucode":"AD2BECE789B365","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/wiaQmkQdIh84RibSLrDkIA3HtibAR4IibpnP3VEmiaLzvpiaibXJQEb2LLUrCD4dM7DjvOFD65IbdZm2Mn68O71FxiaAow/132","comment_is_top":false,"comment_ctime":1612751302,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1612751302","product_id":100020801,"comment_content":"å›¾4æ›´æ–°cè¡¨ä¸ä¼šåŠ è¡Œé”å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":277256,"user_name":"é›¾æ—","can_delete":false,"product_type":"c1","uid":2312368,"ip_address":"","ucode":"1DD4B1E1676388","user_header":"https://static001.geekbang.org/account/avatar/00/23/48/b0/49a591c2.jpg","comment_is_top":false,"comment_ctime":1612334815,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1612334815","product_id":100020801,"comment_content":"çœ‹å®Œæ–‡ç« åæˆ‘è¿˜æ˜¯ä¸çŸ¥é“å¦‚ä½•é«˜æ•ˆè§£å†³countæŸ¥è¯¢æ…¢çš„é—®é¢˜å•Šï¼Œå»ºä¸€ä¸ªinnodbè¡¨é‡Œé¢ç”¨ä¸€ä¸ªå­—æ®µå•ç‹¬å­˜è¡¨çš„è¡Œæ•°?æ˜¯è¿™ä¹ˆè§£å†³å—ï¼Œinnodbè¡¨å¸¦æ¡ä»¶æŸ¥è¯¢è¡Œæ•°è¿˜æ˜¯å¾ˆæ…¢çš„","like_count":0},{"had_liked":false,"id":276788,"user_name":"å¤å¤©å‡ºèµ°è¿œé£","can_delete":false,"product_type":"c1","uid":2427711,"ip_address":"","ucode":"3D830BB7346E45","user_header":"https://static001.geekbang.org/account/avatar/00/25/0b/3f/0d96b3b3.jpg","comment_is_top":false,"comment_ctime":1612117998,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1612117998","product_id":100020801,"comment_content":"åœ¨æ•°æ®åº“ä¿å­˜è®¡æ•°ï¼Œæ·»åŠ æ•°æ®æ—¶åŠ 1 ï¼Œåˆ é™¤æ—¶å‡1ï¼Œåœ¨è§¦å‘å™¨æ•°æ®æ·»åŠ &#47;åˆ é™¤æ—¶å®ç°å¯ä»¥å—ï¼Ÿè¿™æ ·æ›´æ–°æ˜¯å¦æœ‰è§¦å‘äº‹åŠ¡ï¼Ÿè°¢è°¢ï¼","like_count":0},{"had_liked":false,"id":273892,"user_name":"é¾™æ™“","can_delete":false,"product_type":"c1","uid":1043325,"ip_address":"","ucode":"FAF34F1C65D103","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/c9xpiakQ3OC1AlfCeW03lLnnb7mj5v35Hib8YDs66zpnVib2n2qFichFmFp2Ec4QDPR0dKh38MkBBLyD3bE4NiaanZQ/132","comment_is_top":false,"comment_ctime":1610707707,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1610707707","product_id":100020801,"comment_content":"å¦‚æœå­—æ®µä¸ºnullçš„è¡Œä¼šåŒ…å«åœ¨ç´¢å¼•ä¸­å—ï¼Œoracleæ˜¯ä¸åŒ…å«çš„ï¼Œä»count(*)å¯ä»¥ä»ä»»æ„äºŒçº§ç´¢å¼•è®¡æ•°æ¥ï¼Œmysqlä¸­åº”è¯¥æ˜¯åŒ…å«çš„ï¼Ÿ","like_count":0},{"had_liked":false,"id":268291,"user_name":"ä¸ºæ¢¦ç»ˆé†’","can_delete":false,"product_type":"c1","uid":2008722,"ip_address":"","ucode":"9784EB870F413B","user_header":"","comment_is_top":false,"comment_ctime":1608126662,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1608126662","product_id":100020801,"comment_content":"redisä¹Ÿæ˜¯æ”¯æŒäº‹åŠ¡çš„å§ï¼Œrediså¼€å¯äº‹åŠ¡ä¸ä¹Ÿä¸€æ ·èƒ½è§£å†³é—®é¢˜å—ï¼Ÿæ¯”è¾ƒç–‘é—®","like_count":0},{"had_liked":false,"id":267239,"user_name":"sayiamfun","can_delete":false,"product_type":"c1","uid":1617528,"ip_address":"","ucode":"10AD51C9447498","user_header":"https://static001.geekbang.org/account/avatar/00/18/ae/78/b4f7ef7d.jpg","comment_is_top":false,"comment_ctime":1607656848,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1607656848","product_id":100020801,"comment_content":"è€å¸ˆä½ å¥½ï¼Œæˆ‘ç°åœ¨æœ‰ä¸€å¼ è¡¨ï¼Œè¡¨ä¸­æ•°æ®32Wè¡Œå·¦å³ï¼Œä¸ºä»€ä¹ˆ<br>count(*) å’Œcountï¼ˆ1ï¼‰çš„é€Ÿåº¦ä¸º2ç§’å¤šï¼Œä½†count(status)çš„é€Ÿåº¦åè€Œæ›´å¿«å‘¢åªéœ€è¦é›¶ç‚¹å‡ ç§’ï¼Œexplainç»“æœæ˜¯ä¸€æ¨¡ä¸€æ ·çš„ï¼Œéƒ½æ˜¾ç¤ºç”¨äº†status_indexç´¢å¼•<br>mysql ç‰ˆæœ¬æ˜¯ 8<br>å»ºè¡¨è¯­å¥æ˜¯<br>create table test.user<br>(<br> id bigint auto_increment<br>  primary key,<br> name varchar(25) not null,<br> email varchar(200) not null,<br> age int not null,<br> address varchar(255) null,<br> head_img varchar(255) null,<br> company varchar(200) null,<br> token varchar(255) not null,<br> password varchar(200) not null,<br> create_time datetime default CURRENT_TIMESTAMP null,<br> update_time datetime default CURRENT_TIMESTAMP null on update CURRENT_TIMESTAMP,<br> status tinyint default 0 null<br>);<br><br>create index age_index<br> on test.user (age);<br><br>create index id_index<br> on test.user (age);<br><br>create index status_index<br> on test.user (status);<br><br>å¸Œæœ›è€å¸ˆå¸®å¿™è§£ç­”ä¸€ä¸‹","like_count":0,"discussions":[{"author":{"id":1171004,"avatar":"https://static001.geekbang.org/account/avatar/00/11/de/3c/96c1bc62.jpg","nickname":"å¢å»ºæ–‡","note":"","ucode":"900A0CE253F2BF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375303,"discussion_content":"å› ä¸ºç¼“å†²æ± çš„åŸå› å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621566918,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":265920,"user_name":"ææŠ—","can_delete":false,"product_type":"c1","uid":1473540,"ip_address":"","ucode":"C2DD63CA346839","user_header":"https://static001.geekbang.org/account/avatar/00/16/7c/04/53e75bc7.jpg","comment_is_top":false,"comment_ctime":1607068588,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1607068588","product_id":100020801,"comment_content":"æƒ³è¯·é—®ä¸‹è€å¸ˆï¼Œå¦‚æœæŸä¸ªäºŒçº§ç´¢å¼•ï¼Œé»˜è®¤å¯ä»¥ä¸ºnullï¼Œé‚£ä¹ˆåœ¨è¯¥äºŒçº§ç´¢å¼•æ ‘ä¸­ï¼Œå€¼ä¸ºnullçš„è¿™ä¸€é¡¹æ˜¯å­˜å‚¨åœ¨å“ªé‡Œçš„ï¼Ÿ å¶å­èŠ‚ç‚¹çš„æœ€å·¦è¾¹ï¼Ÿ ","like_count":0},{"had_liked":false,"id":265081,"user_name":"nocturne","can_delete":false,"product_type":"c1","uid":1207810,"ip_address":"","ucode":"7A008066F2D4CB","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/gOLHDzIiaAeOF96qNnmK1CMwibsicsRucsyUknkv9lw2r0amibHynTiaTtQRuPbtk6vmiaBRzpm8SbiclDMZFH6JibyjeA/132","comment_is_top":false,"comment_ctime":1606754605,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1606754605","product_id":100020801,"comment_content":"é¦–å…ˆè¯´ç»“è®ºï¼Œåº”è¯¥é¦–å…ˆæ›´æ–°è®¡æ•°ï¼Œå› ä¸ºinnodbæ˜¯è¡Œé”ï¼Œå¦‚æœé¦–å…ˆæ›´æ–°æ•°æ®ï¼Œåˆ™è¯¥è®°å½•å°±ä¼šé”çš„æ—¶é—´=è¯¥è®°å½•é”çš„æ—¶é—´+æ›´æ–°è®¡æ•°é”çš„æ—¶é—´ï¼Œä¹Ÿå°±æ˜¯è¯´é”çš„æ—¶é—´åŠ é•¿ã€‚","like_count":0},{"had_liked":false,"id":264953,"user_name":"liujinmai","can_delete":false,"product_type":"c1","uid":1204927,"ip_address":"","ucode":"E7CEAB726ABB44","user_header":"https://static001.geekbang.org/account/avatar/00/12/62/bf/ca41b5af.jpg","comment_is_top":false,"comment_ctime":1606719987,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1606719987","product_id":100020801,"comment_content":"è€å¸ˆ   æˆ‘è§‰å¾—è°å‰è°åå¹¶ä¸èƒ½å½±å“æœ€ç»ˆæ‰§è¡Œæ—¶é—´å•Š   å› ä¸ºæœ€ç»ˆéƒ½è¦æ¶‰åŠåˆ°ç«äº‰é”","like_count":0},{"had_liked":false,"id":264836,"user_name":"Geek_2aae91","can_delete":false,"product_type":"c1","uid":2344740,"ip_address":"","ucode":"999EC3BCFBF5A2","user_header":"","comment_is_top":false,"comment_ctime":1606665610,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1606665610","product_id":100020801,"comment_content":"å¦‚æœæ‰«æäºŒçº§ç´¢å¼•countï¼Œä¸€èˆ¬ä¼šUsing indexï¼Œé‚£å¦‚ä½•é€šè¿‡MVCCé¿å…å¹»è¯»ï¼Ÿ","like_count":0},{"had_liked":false,"id":256851,"user_name":"é™ˆç‹„","can_delete":false,"product_type":"c1","uid":2011954,"ip_address":"","ucode":"456F00EB2EB43D","user_header":"https://static001.geekbang.org/account/avatar/00/1e/b3/32/0ee78a1a.jpg","comment_is_top":false,"comment_ctime":1603766233,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1603766233","product_id":100020801,"comment_content":"æ€»ç»“ï¼šå› ä¸ºæœ‰mvccï¼Œcount(*)ç»Ÿè®¡è¡Œæ•°éœ€è¦ä¸€è¡Œä¸€è¡ŒæŒ‰ç…§å½“å‰äº‹åŠ¡çš„å¯ä»¥çœ‹åˆ°çš„è¡Œæ•°æ¥ç»Ÿè®¡ï¼Œæ‰€ä»¥è¡Œæ•°æ²¡åŠæ³•ç›´æ¥ä¿å­˜ï¼Œéœ€è¦åŠ¨æ€è·å–ã€‚<br>count(å­—æ®µ)ä¼šæœ‰ä¸€ä¸ªå­—æ®µè§£æï¼Œåˆ¤æ–­éç©ºçš„è¿‡ç¨‹ï¼Œæ‰€ä»¥æ¯”count(*)è¦æ…¢ã€‚<br>è¯¾åé—®é¢˜ï¼šåº”è¯¥å…ˆæ’å…¥æ–°çºªå½•ï¼Œä¿®æ”¹è®¡æ•°å€¼æ˜¯ä¿®æ”¹åŒä¸€è¡Œè®°å½•ï¼Œä¼šæœ‰ä¸€ä¸ªè¡Œé”ç«äº‰","like_count":0},{"had_liked":false,"id":255125,"user_name":"dbtiger","can_delete":false,"product_type":"c1","uid":1324202,"ip_address":"","ucode":"05E8447593318C","user_header":"https://static001.geekbang.org/account/avatar/00/14/34/aa/431de942.jpg","comment_is_top":false,"comment_ctime":1603270245,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1603270245","product_id":100020801,"comment_content":"redisæ²¡ç”¨è¿‡ï¼Œè¿˜éœ€è¦å­¦ä¹ å­¦ä¹ redisçš„æœºåˆ¶","like_count":0,"discussions":[{"author":{"id":2237677,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLg04lnicnUNWVmohBVoWiaKPpuYu8j0CHVIjjurfO3YcJqicHZBMYFqjoEpiaa3jrNmRzyzXiaPPt29cA/132","nickname":"ç„çœŸ","note":"","ucode":"D21A7096AFB816","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":326542,"discussion_content":"èµµä¹ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605614766,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":253528,"user_name":"äººé—´ä¹å›­","can_delete":false,"product_type":"c1","uid":1350559,"ip_address":"","ucode":"4A203AB47FCF3C","user_header":"https://static001.geekbang.org/account/avatar/00/14/9b/9f/2cbc2a4f.jpg","comment_is_top":false,"comment_ctime":1602765081,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1602765081","product_id":100020801,"comment_content":"ä¸¤é˜¶æ®µé”åè®®ï¼Œå…ˆæ’å…¥æ•°æ®å¯ä»¥å‡å°‘æ›´æ–°è®¡æ•°çš„é”æ—¶é—´ã€‚","like_count":0},{"had_liked":false,"id":252556,"user_name":"î‡ å°¿å¸ƒ","can_delete":false,"product_type":"c1","uid":1476323,"ip_address":"","ucode":"D1C8BDA7540962","user_header":"https://static001.geekbang.org/account/avatar/00/16/86/e3/a31f6869.jpg","comment_is_top":false,"comment_ctime":1602381617,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1602381617","product_id":100020801,"comment_content":"è·ç›ŠåŒªæµ…å•Š","like_count":0},{"had_liked":false,"id":247980,"user_name":"Geek_04168","can_delete":false,"product_type":"c1","uid":2112008,"ip_address":"","ucode":"F125ADD877952E","user_header":"","comment_is_top":false,"comment_ctime":1599966379,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1599966379","product_id":100020801,"comment_content":"è¯·é—®æ—¢ç„¶count(*)æ˜¯éå†ç´¢å¼•ä¸å–å€¼ï¼Œé‚£ç´¢å¼•çš„æ•°æ®é‡æ˜¯å¦‚ä½•å½±å“è¯¥è¯­å¥çš„æ€§èƒ½çš„å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1303322,"avatar":"https://static001.geekbang.org/account/avatar/00/13/e3/1a/061e77b6.jpg","nickname":"äº¢æ˜Ÿä¸œ","note":"","ucode":"5E4063E83B2BB9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":319095,"discussion_content":"æœ‰ä¸»é”®ç´¢å¼• æ™®é€šç´¢å¼• ä¸åŒç´¢å¼•æ ‘å¤§å°ä¸ä¸€æ · ï¼Œå°çš„è‚¯å®šè€—æ—¶å°‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603941321,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":246172,"user_name":"Magic","can_delete":false,"product_type":"c1","uid":1272047,"ip_address":"","ucode":"FD9CEDAA419EB0","user_header":"https://static001.geekbang.org/account/avatar/00/13/68/ef/6264ca3d.jpg","comment_is_top":false,"comment_ctime":1599198432,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1599198432","product_id":100020801,"comment_content":"åº”è¯¥å…ˆæ›´æ–°è®¡æ•°è¡¨å†æ’å…¥æ•°æ®ã€‚å› ä¸ºè®¡æ•°è¡¨æ›´æ–°æ˜¯çƒ­ç‚¹è¡Œï¼Œåº”å°½é‡å‡å°‘é”æŒæœ‰æ—¶é—´","like_count":0},{"had_liked":false,"id":237932,"user_name":"åæ·¡ä¸€ä¸ª","can_delete":false,"product_type":"c1","uid":1118181,"ip_address":"","ucode":"D9C39F4133D9D6","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eplMzkLgvebhLujCZI0DZAWS7MQGvYGHb4yeoDHdITVWpbSicvoVKw0dISm9ib3vYU7BqxrmuTV666g/132","comment_is_top":false,"comment_ctime":1596008851,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1596008851","product_id":100020801,"comment_content":"æŠ¥è¡¨åˆ†é¡µï¼Œéœ€è¦å±•ç¤ºæ€»æ¡æ•°ï¼Œæ€»æ¡æ•°éšæŸ¥è¯¢æ¡ä»¶å˜åŒ–è€Œå˜åŒ–ï¼Œæ•°æ®é‡å¤§çš„æ—¶å€™count(*)ï¼Œæ•ˆç‡å°±å¾ˆä½ï¼Œè¿™ç§æœ‰ä»€ä¹ˆå¥½åŠæ³•å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":236743,"user_name":"hahahhh","can_delete":false,"product_type":"c1","uid":1392326,"ip_address":"","ucode":"ED94DDF526F94D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/7KvTibLByic8Eht03jsera25gTIoJEKnajulAVyRibaFic34rNjCSd3DBpjwWInJ72gBMuo1RNNoFdiay0PUSy8971Q/132","comment_is_top":false,"comment_ctime":1595515163,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1595515163","product_id":100020801,"comment_content":"å…ˆæ’å…¥æ“ä½œè®°å½•ï¼Œå†æ›´æ–°è®¡æ•°ï¼Œå› ä¸ºæ›´æ–°è®¡æ•°ï¼Œéœ€è¦ç«äº‰é”ï¼Œæ”¾åœ¨åé¢ï¼Œå¯ä»¥æŒæœ‰é”çš„æ—¶é—´çŸ­ä¸€ç‚¹","like_count":0},{"had_liked":false,"id":234902,"user_name":"å‘¨","can_delete":false,"product_type":"c1","uid":1269903,"ip_address":"","ucode":"EE475D1CFC46D6","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/qzricN4j5oafQ5MB6pd6uRjhrO05jibuibthBvgFkeQFcedFqKyOXGNj0eNw5KL8kozV1Yty7SWek8hIoyeviaSmXw/132","comment_is_top":false,"comment_ctime":1594823227,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1594823227","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæ‚¨å¥½ï¼Œ æœ€è¿‘æ‰è´­ä¹°äº†æ‚¨çš„è¯¾ç¨‹ï¼Œçœ‹åˆ°è¿™ä¸€ç« èŠ‚çš„æ—¶å€™ï¼Œæœ‰ä¸ªå¦å¤–çš„ç–‘é—®ï¼Œ æœ‰ä¸€å¼ æ—¥å¿—è¡¨ï¼ŒæŸ¥è¯¢çš„æ¡ä»¶æœ‰ç”¨æˆ·åã€æ—¥å¿—å†…å®¹ï¼Œè¿™æ ·çš„åˆ†é¡µå¹¶ç»Ÿè®¡æ€»æ•°ï¼Œè¿˜æœ‰ä»€ä¹ˆæ–¹å¼ä¼˜åŒ–ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1127785,"avatar":"https://static001.geekbang.org/account/avatar/00/11/35/69/8cbab11a.jpg","nickname":"HJW","note":"","ucode":"794E01C5F2B395","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":376573,"discussion_content":"æˆ‘ä¹Ÿé‡åˆ°äº†ï¼ŒåŠ äº†æ¡ä»¶å°±ä¸èƒ½ç›´æ¥ä½¿ç”¨rediså­˜çš„æ€»æ•°äº†ã€‚ä½ é‚£è¾¹è§£å†³äº†å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622197581,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":234539,"user_name":"Garwen","can_delete":false,"product_type":"c1","uid":1045062,"ip_address":"","ucode":"C76346E1734AB8","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f2/46/09c457eb.jpg","comment_is_top":false,"comment_ctime":1594715607,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1594715607","product_id":100020801,"comment_content":"è€å¸ˆè€å¸ˆï¼Œå¯¹äºcountï¼ˆå­—æ®µï¼‰çš„è¿™ä¸¤å¥è¯ï¼Œæˆ‘è¯»äº†å¾ˆä¹…ä¹Ÿæ²¡ç†è§£ï¼Œæ€»è§‰çš„ä»–ä»¬çš„æ„æ€æ˜¯ä¸€æ ·çš„ï¼Œæ‚¨èƒ½å†å¤šè¯´æ˜ä¸€ä¸‹å—ï¼Œè°¢è°¢ã€‚<br>å¦‚æœè¿™ä¸ªâ€œå­—æ®µâ€æ˜¯å®šä¹‰ä¸º not null çš„è¯ï¼Œä¸€è¡Œè¡Œåœ°ä»è®°å½•é‡Œé¢è¯»å‡ºè¿™ä¸ªå­—æ®µï¼Œåˆ¤æ–­ä¸èƒ½ä¸º nullï¼ŒæŒ‰è¡Œç´¯åŠ ï¼›<br>å¦‚æœè¿™ä¸ªâ€œå­—æ®µâ€å®šä¹‰å…è®¸ä¸º nullï¼Œé‚£ä¹ˆæ‰§è¡Œçš„æ—¶å€™ï¼Œåˆ¤æ–­åˆ°æœ‰å¯èƒ½æ˜¯ nullï¼Œè¿˜è¦æŠŠå€¼å–å‡ºæ¥å†åˆ¤æ–­ä¸€ä¸‹ï¼Œä¸æ˜¯ null æ‰ç´¯åŠ ã€‚","like_count":0},{"had_liked":false,"id":233979,"user_name":"ç‹ç‘å¼º","can_delete":false,"product_type":"c1","uid":1829090,"ip_address":"","ucode":"DEE4EB5E23433F","user_header":"https://static001.geekbang.org/account/avatar/00/1b/e8/e2/2bcaef68.jpg","comment_is_top":false,"comment_ctime":1594543712,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1594543712","product_id":100020801,"comment_content":"æ™®é€šç´¢å¼•å­—æ®µå¦‚æœå¯ä»¥ä¸ºç©ºï¼Œcountï¼ˆidï¼‰åº”è¯¥ä¸ä¼šèµ°æ™®é€šç´¢å¼•å§ã€‚è¿›ä¸€æ­¥é—®ä¸€ä¸‹ï¼Œå­—æ®µä¸ºnullåœ¨ç´¢å¼•æ ‘ä¸­æ˜¯å¦‚ä½•å­˜å‚¨çš„","like_count":0},{"had_liked":false,"id":232268,"user_name":"Wch","can_delete":false,"product_type":"c1","uid":1309374,"ip_address":"","ucode":"AC876A96389B65","user_header":"https://static001.geekbang.org/account/avatar/00/13/fa/be/23b540ed.jpg","comment_is_top":false,"comment_ctime":1593939039,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1593939039","product_id":100020801,"comment_content":"redisç»´æŠ¤çš„è®¡æ•°å™¨å’Œè¿‘100æ¡è®°å½•å¯ä»¥ä½¿ç”¨pipelineå®ç°åŸå­æ›´æ–°ï¼Œä»è€Œä¿è¯å…¶ä»–ä¼šè¯çš„è¯»ä¸€è‡´äº†å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":227407,"user_name":"è›¤èŸ†å…ˆç”Ÿ","can_delete":false,"product_type":"c1","uid":1125703,"ip_address":"","ucode":"8353492D68DBBF","user_header":"https://static001.geekbang.org/account/avatar/00/11/2d/47/7c3baa15.jpg","comment_is_top":false,"comment_ctime":1592374647,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1592374647","product_id":100020801,"comment_content":"æœ‰ä¸ªé—®é¢˜è¯·æ•™ä¸‹è€å¸ˆï¼Œç›®å‰ç³»ç»Ÿé‡Œæœ‰ä¸€ä¸ªæŸ¥è¯¢æ¥å£ï¼Œåº•å±‚ SQL æ˜¯: SELECT count(*) from A inner join  B on A.id = B.id where  A.deleted = 0  and B.deleted = 0ã€‚ç›®å‰çš„æƒ…å†µæ˜¯è¿™æ ·çš„ï¼Œæµ‹è¯•ç¯å¢ƒæœ‰ 40W å·¦å³æ•°æ®ï¼ŒæŸ¥è¯¢æ—¶é—´åœ¨ 3 s å·¦å³ï¼Œç”Ÿäº§ç¯å¢ƒ 400W æ•°æ®ï¼ŒæŸ¥è¯¢è€—æ—¶åˆ° 18 s å·¦å³ï¼Œä½†æ˜¯æ„Ÿè§‰æ²¡æœ‰ä»€ä¹ˆåœ°æ–¹å¯ä»¥ä¼˜åŒ–çš„å•Šï¼ˆæ˜¯æˆ‘æ°´å¹³å¤ªä½äº†...ï¼‰","like_count":0},{"had_liked":false,"id":227095,"user_name":"å°è¢","can_delete":false,"product_type":"c1","uid":1811495,"ip_address":"","ucode":"3F5D8721F577D9","user_header":"https://static001.geekbang.org/account/avatar/00/1b/a4/27/15e75982.jpg","comment_is_top":false,"comment_ctime":1592284372,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1592284372","product_id":100020801,"comment_content":"å¦‚æœcount(*)è¦å–ä¸€è¡Œï¼Œå†æŸ¥å¯è§æ€§è§†å›¾çš„è¯ã€‚ä¸ºå•¥ç´¢å¼•èƒ½æ»¡è¶³ç”¨æˆ·çš„selectéœ€æ±‚ï¼Œå› ä¸ºä¸€æ ·æ•°æ®æœ‰å¤šä¸ªç‰ˆæœ¬ï¼Œç´¢å¼•æ ‘æ€ä¹ˆç¡®å®šè¦ç”¨ä»€ä¹ˆkeyæ¥æ­£ç¡®å›è¡¨ï¼Ÿ","like_count":0},{"had_liked":false,"id":226095,"user_name":"å›¾çµæœº","can_delete":false,"product_type":"c1","uid":2034632,"ip_address":"","ucode":"EB02DB653AD591","user_header":"https://static001.geekbang.org/account/avatar/00/1f/0b/c8/15f055d3.jpg","comment_is_top":false,"comment_ctime":1591949722,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1591949722","product_id":100020801,"comment_content":"å…¨è¡¨çš„count(*)å¯ä»¥é€šè¿‡å¢åŠ è¡¨è®°å½•ä¼˜åŒ–ï¼Œå‡å¦‚æœ‰where å¤šæ¡ä»¶çš„count(*)è¯¥æ€ä¹ˆä¼˜åŒ–å•Šï¼Œå¦‚æœèŒƒå›´å†…çš„æ•°æ®é‡ç‰¹åˆ«å¤§ï¼Œè¿™å¥½åƒå°±æ²¡åŠæ³•äº†å‘€","like_count":0},{"had_liked":false,"id":226089,"user_name":"å›¾çµæœº","can_delete":false,"product_type":"c1","uid":2034632,"ip_address":"","ucode":"EB02DB653AD591","user_header":"https://static001.geekbang.org/account/avatar/00/1f/0b/c8/15f055d3.jpg","comment_is_top":false,"comment_ctime":1591948887,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1591948887","product_id":100020801,"comment_content":"æ¿€åŠ¨ï¼Œç»ˆäºçœ‹åˆ°count(*)è®²è§£äº†","like_count":0},{"had_liked":false,"id":223341,"user_name":"Geek_55e386","can_delete":false,"product_type":"c1","uid":1795793,"ip_address":"","ucode":"5A727F1323C2D0","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/zxkns28cIAUZIt3WjDb8G26qiccT84d9GMr9ZpbYR60TU1ibqSj9NoYVHlJvGF1kOltkqNDmEfJCqPuYVkue3WHg/132","comment_is_top":false,"comment_ctime":1591067359,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1591067359","product_id":100020801,"comment_content":"1ã€åœ¨æ›´æ–°æ•°æ®çš„æ—¶å€™å¼€å¯äº‹åŠ¡ï¼Œå…ˆæ’å…¥æ•°æ®åº“ï¼Œç„¶ååœ¨å†™å…¥redisï¼›åœ¨ä¸€ä¸ªäº‹åŠ¡é‡Œé¢ï¼›<br>è¿™æ—¶å€™æ˜¯ä¸æ˜¯å¯ä»¥ä¿è¯ è¯»çš„æ•°æ®ä¸€è‡´äº†","like_count":0},{"had_liked":false,"id":223291,"user_name":"15216769624","can_delete":false,"product_type":"c1","uid":1344208,"ip_address":"","ucode":"C5D6F13F02AC93","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoB0vTIoGqianmDuY7EDHvmmjT96phwxblianV3q0iaib9qtaG9ia8ibTJaWgsQR6WoA0c6xKZicgWrr8LYA/132","comment_is_top":false,"comment_ctime":1591057033,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1591057033","product_id":100020801,"comment_content":"ä½ çŸ¥é“çš„ï¼ŒInnoDB æ˜¯ç´¢å¼•ç»„ç»‡è¡¨ï¼Œä¸»é”®ç´¢å¼•æ ‘çš„å¶å­èŠ‚ç‚¹æ˜¯æ•°æ®ï¼Œè€Œæ™®é€šç´¢å¼•æ ‘çš„å¶å­èŠ‚ç‚¹æ˜¯ä¸»é”®å€¼ã€‚æ‰€ä»¥ï¼Œæ™®é€šç´¢å¼•æ ‘æ¯”ä¸»é”®ç´¢å¼•æ ‘å°å¾ˆå¤šã€‚å¯¹äº count(*) è¿™æ ·çš„æ“ä½œï¼Œéå†å“ªä¸ªç´¢å¼•æ ‘å¾—åˆ°çš„ç»“æœé€»è¾‘ä¸Šéƒ½æ˜¯ä¸€æ ·çš„ã€‚å› æ­¤ï¼ŒMySQL ä¼˜åŒ–å™¨ä¼šæ‰¾åˆ°æœ€å°çš„é‚£æ£µæ ‘æ¥éå†ã€‚åœ¨ä¿è¯é€»è¾‘æ­£ç¡®çš„å‰æä¸‹ï¼Œå°½é‡å‡å°‘æ‰«æçš„æ•°æ®é‡ï¼Œæ˜¯æ•°æ®åº“ç³»ç»Ÿè®¾è®¡çš„é€šç”¨æ³•åˆ™ä¹‹ä¸€ã€‚<br><br>è€å¸ˆï¼Œå…³äºä¸Šé¢é‚£å¥å¯¹äºcount(*)è¿™æ ·çš„æ“ä½œï¼Œéå†å“ªä¸ªç´¢å¼•æ ‘å¾—åˆ°çš„ç»“æœéƒ½æ˜¯ä¸€æ ·çš„ï¼Œå› æ­¤ä¼šé€‰ç”¨æœ€å°æ ‘æ¥éå†ï¼Œæˆ‘æœ‰ä¸ªç–‘é—®ï¼Œæˆ‘ä»¬çš„äº‹åŠ¡éš”ç¦»çº§åˆ«æ˜¯rrï¼Œè€ŒäºŒçº§ç´¢å¼•é‡Œé¢å¹¶æ²¡æœ‰ä¿å­˜æ•°æ®çš„å¤šç‰ˆæœ¬ä¿¡æ¯ï¼Œè¿™ä¸ªåªåœ¨ä¸»é”®é‡Œé¢æ‰æœ‰ï¼Œæ‰€ä»¥å®ƒéœ€è¦å›è¡¨ï¼Œé‚£æ˜¯ä¸æ˜¯æ„å‘³ç€å…¶å®ç›´æ¥æ‰«æä¸»é”®æ‰æ˜¯æœ€å¿«çš„ï¼Œè€Œä¸æ˜¯å…¶ä»–äºŒçº§ç´¢å¼•ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1209939,"avatar":"https://static001.geekbang.org/account/avatar/00/12/76/53/21d62a23.jpg","nickname":"é²Â·æœ¬","note":"","ucode":"F1DEB30C21B48E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":576969,"discussion_content":"åŒé—®, å¸Œæœ›è€å¸ˆå¸®å¿™è§£ç­”ä¸‹!!!!!","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655870288,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":214648,"user_name":"æ—ç‚³å¼º","can_delete":false,"product_type":"c1","uid":1033021,"ip_address":"","ucode":"B1DA2D7D4AC177","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c3/3d/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1588776596,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1588776596","product_id":100020801,"comment_content":"åº”è¯¥æ˜¯å…ˆæ’å…¥è®°å½•ï¼Œç„¶åå†æ›´æ–°è®¡æ•°è¡¨ï¼Œç†ç”±æ˜¯ä¹‹å‰æ–‡ç« é‡Œé¢è¯´è¿‡çš„ï¼Œè¦æŠŠæœ‰èµ„æºç«äº‰çš„è¯­å¥æ”¾åˆ°æœ€åã€‚","like_count":0},{"had_liked":false,"id":214210,"user_name":"æ˜ŸæœŸå…«","can_delete":false,"product_type":"c1","uid":1440429,"ip_address":"","ucode":"D8C66E7F61B0D1","user_header":"https://static001.geekbang.org/account/avatar/00/15/fa/ad/3fa02ac7.jpg","comment_is_top":false,"comment_ctime":1588676767,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1588676767","product_id":100020801,"comment_content":"count å®æ—¶æ•°æ®ä¸€è‡´é—®é¢˜<br>1ã€å•è¡¨count(*),äº‹åŠ¡çº§åˆ«æ˜¯å¯é‡å¤è¯»çº§åˆ«ï¼Œsessionæ•°æ®ä¸ä¸€è‡´<br>2ã€æ–°åŠ ä¸€ä¸ªå¼ è¡¨ç»Ÿè®¡tableNameå’Œå¯¹åº”çš„countï¼Œäº‹åŠ¡çº§åˆ«æ˜¯read commitï¼Œå¯ä»¥ä¿è¯sessionæ•°æ®ä¸€è‡´<br>3ã€ä½¿ç”¨ç¼“å­˜ï¼Œä½†æ˜¯å¿…é¡»ä¿æŒä¸¤ä¸ªäº‹åŠ¡çº§åˆ«æ˜¯read commitï¼Œé€šè¿‡ä¸šåŠ¡æ¥ä¿éšœsessionæ•°æ®ä¸€è‡´","like_count":0},{"had_liked":false,"id":214206,"user_name":"æ˜ŸæœŸå…«","can_delete":false,"product_type":"c1","uid":1440429,"ip_address":"","ucode":"D8C66E7F61B0D1","user_header":"https://static001.geekbang.org/account/avatar/00/15/fa/ad/3fa02ac7.jpg","comment_is_top":false,"comment_ctime":1588676522,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1588676522","product_id":100020801,"comment_content":"countçš„æ•°æ®ä¸€è‡´æ€§<br>1ã€å•è¡¨éš”ç¦»çº§åˆ«æ˜¯rrï¼Œæ‰€ä»¥ä¸èƒ½åšåˆ°å¤šä¸ªsessionä¸€è‡´<br>2ã€å¦‚æœå•ç‹¬ä¸€ä¸ªå¼ è¡¨è®°å½•tablenameå’Œcountï¼Œè¿™æ ·å¯ä»¥ä½¿ç”¨read commitæ§åˆ¶æ•°æ®ä¸€è‡´æ€§ï¼Œä»è€Œè¾¾åˆ°å¤§æ•°æ®é‡çš„å®æ—¶æ•°æ®ä¸€è‡´<br>3ã€ç¼“å­˜ä¸€è‡´<br>å¦‚æœç¼“å­˜äº‹åŠ¡å’Œæ•°æ®åº“æäº¤äº‹åŠ¡èƒ½åšåˆ°read commit çº§åˆ«ï¼Œä¹Ÿæ˜¯å¯ä»¥åšåˆ°å®æ—¶æ•°æ®çš„ä¸€è‡´æ€§çš„ã€‚@","like_count":0},{"had_liked":false,"id":212874,"user_name":"dream","can_delete":false,"product_type":"c1","uid":1117793,"ip_address":"","ucode":"65B33D32FA8BE9","user_header":"https://static001.geekbang.org/account/avatar/00/11/0e/61/ae68f8eb.jpg","comment_is_top":false,"comment_ctime":1588230109,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1588230109","product_id":100020801,"comment_content":"è€å¸ˆåœ¨æ–‡ä¸­æåˆ° â€œä½†æ˜¯ count(*) æ˜¯ä¾‹å¤–ï¼Œå¹¶ä¸ä¼šæŠŠå…¨éƒ¨å­—æ®µå–å‡ºæ¥ï¼Œè€Œæ˜¯ä¸“é—¨åšäº†ä¼˜åŒ–ï¼Œä¸å–å€¼ã€‚â€    ä½†æ˜¯mysqlæ˜¯å…·ä½“æ€ä¹ˆä¼˜åŒ– count(*) çš„å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":212447,"user_name":"è¾¾è¾¾é˜Ÿé•¿","can_delete":false,"product_type":"c1","uid":1117597,"ip_address":"","ucode":"1C3F2E4F6B7637","user_header":"https://static001.geekbang.org/account/avatar/00/11/0d/9d/58d09086.jpg","comment_is_top":false,"comment_ctime":1588125298,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1588125298","product_id":100020801,"comment_content":"è€å¸ˆæ±‚å›ç­”å•Šï¼Œä¸Šç»“è¯¾è¯´åˆ°åˆ é™¤çš„è®°å½•åªæ˜¯å‘ä¸€ä¸ªæ ‡è®°ï¼Œé‚£ä¹ˆcountï¼ˆidï¼‰çš„æ—¶å€™åº”è¯¥å›å»åˆ¤æ–­åˆ é™¤äº†æ²¡ï¼Œä½†æ˜¯äºŒçº§ç´¢å¼•æ²¡æœ‰æ ‡è®°åˆ é™¤å•Šï¼Œé‚£ä¹ˆå¦‚æœcountï¼ˆidï¼‰é€‰æ‹©äº†äºŒçº§ç´¢å¼•ï¼Œä»–æ˜¯æ€ä¹ˆä¿è¯æ²¡æœ‰æŠŠæ ‡è®°ä¸ºåˆ é™¤çš„æ•°æ®å–å‡ºæ¥å‘¢","like_count":0},{"had_liked":false,"id":211421,"user_name":"è·¯äººä½³","can_delete":false,"product_type":"c1","uid":1449346,"ip_address":"","ucode":"2E8E7B8A79B67E","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIFvkUVWscC7rNIIDy79zKPafoYa5Myn3Am8M42Be6kHhCOsup58T88yl9Mm7jPlxaJKTYYP3tMiaQ/132","comment_is_top":false,"comment_ctime":1587960874,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1587960874","product_id":100020801,"comment_content":"è€å¸ˆæˆ‘è¿™ä¸ªè¯­å¥ï¼Œæˆ‘å»ºäº†create_dateå’Œperson_count çš„è”åˆç´¢å¼•ï¼Œä»–åªç”¨åˆ°äº†create_dateéƒ¨åˆ† <br>select a.* from loan_sys_subgroup_record a inner join  (select id from loan_sys_subgroup_record where `algorithm` = 2 and person_count&gt;10 and create_date &gt; &#39;2020-03-01&#39; and create_date &lt;&#39;2020-03-18&#39; order by DATE_FORMAT(create_date,&#39;yyyy-MM-dd&#39;) desc,person_count desc  limit 1001,10 ) b on a.id = b.id <br>æ‰§è¡Œè®¡åˆ’EXTRAæ˜¾ç¤ºwhere index filesort","like_count":0},{"had_liked":false,"id":211374,"user_name":"é™ˆå¹´é£è¤›","can_delete":false,"product_type":"c1","uid":1967573,"ip_address":"","ucode":"D806A6F06D8CD1","user_header":"https://static001.geekbang.org/account/avatar/00/1e/05/d5/ee6f94f5.jpg","comment_is_top":false,"comment_ctime":1587954325,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1587954325","product_id":100020801,"comment_content":"æœ‰ä¸¤ä¸ªé—®é¢˜è¯·æ•™ä¸€ä¸‹:<br>1) æˆ‘è®¤ä¸º, Redisè®¡æ•°+MySQLæ’å…¥æ•°æ®è¡¨è®°å½•çš„æ–¹æ¡ˆä¸­,å¯å‚è€ƒäº‹åŠ¡åœ¨è¿‡ç¨‹ä¸­æ·»åŠ ä¸€ä¸ªä¸¤é˜¶æ®µæäº¤çš„æ“ä½œä¿è¯Rediså’ŒMySQLçš„æ•°æ®ä¸€è‡´æ€§,å…·ä½“è¿‡ç¨‹å¦‚ä¸‹: å…ˆæ›´æ–°Redisè®¡æ•°,å¹¶æ ‡è®°ä¸ºæœªæäº¤çŠ¶æ€,ç„¶åå†æ’å…¥MySQLè¡¨æ•°æ®,æ’å…¥æˆåŠŸ,æ›´æ–°Redisè®¡æ•°çŠ¶æ€ä¸ºcommit,è‹¥æ’å…¥è¡¨å¤±è´¥,åˆ™å›æ»šRedisè®¡æ•°; ä½†æœ‰ä¸ªé—®é¢˜,é«˜å¹¶å‘æƒ…å†µä¸‹,æ— æ³•è§£å†³é«˜å¹¶å‘è¯·æ±‚å¯¼è‡´çš„æ•°æ®ä¸ä¸€è‡´çš„é—®é¢˜; é«˜å¹¶å‘æƒ…å†µä¸‹,æˆ‘ç›®å‰èƒ½æƒ³åˆ°çš„æ˜¯å€ŸåŠ©é”&#47;åˆ†å¸ƒå¼é”(å¦‚å€ŸåŠ©zookeeperç­‰), å¸Œæœ›è€å¸ˆå¯ä»¥è®²è§£ä¸‹é«˜å¹¶å‘ä¸‹æ•°æ®ä¸ä¸€è‡´çš„ä¿è¯æœºåˆ¶å’ŒåŸç†,è°¢è°¢å•¦<br><br>2) ç¬¬äºŒä¸ªé—®é¢˜å’Œä¸Šé¢ç¬¬ä¸€ä¸ªé—®é¢˜çš„ååŠéƒ¨åˆ†ç±»ä¼¼,ä¹Ÿæ˜¯é«˜äºå¹¶å‘æƒ…å†µä¸‹çš„è§£å†³æ–¹æ¡ˆ,å…·ä½“é—®é¢˜å¦‚ä¸‹:<br>è®¡æ•°è¡¨tb_count,è®°å½•æ•°æ®åº“æ‰€æœ‰è¡¨çš„æ€»æ•°,æ¯å¼ è¡¨å ç”¨ä¸€è¡Œ,é«˜å¹¶å‘æ—¶,ä¸Šè¿°çš„è§£å†³æ–¹æ¡ˆä¸­,å¦‚ä½•ä¿è¯äº‹åŠ¡ä¸­çš„ä¸€è‡´æ€§,å› ä¸ºå¤šä¸ªäº‹åŠ¡åŒæ—¶updateæ“ä½œè¡¨tb_userè¡Œæ•°è¿™ä¸€è¡Œæ•°æ®,ä¸”updateæ˜¯å½“å‰è¯»,æ˜¯å¦ä¼šå¯¼è‡´æ›´æ–°åtb_useræ˜¯é”™è¯¯çš„;ä¸Šè¿°æƒ…å†µå¦‚ä½•è§£å†³å‘¢,æ˜¯å¦åªèƒ½å€ŸåŠ©é”é”ä¿è¯å¹¶å‘ä¸‹çš„æ•°æ®ä¸€è‡´æ€§<br><br>è¯·èµæ•™","like_count":0},{"had_liked":false,"id":203395,"user_name":"å¦ææ³°æ¥","can_delete":false,"product_type":"c1","uid":1439355,"ip_address":"","ucode":"C249173266251A","user_header":"https://static001.geekbang.org/account/avatar/00/15/f6/7b/b6abcbbe.jpg","comment_is_top":false,"comment_ctime":1586183870,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1586183870","product_id":100020801,"comment_content":"å…ˆæ’å…¥è®°å½•åœ¨æ›´æ–°å§ï¼Œå› ä¸ºä¹‹å‰è¯´è¿‡æ›´æ–°æ•°æ®ä¼šåŠ è¡Œé”ï¼Œå½“äº‹åŠ¡æäº¤æˆ–è€…å›æ»šçš„æ—¶å€™æ‰ä¼šé‡Šæ”¾é”ï¼Œupdateæ”¾åˆ°æœ€åæ¯”è¾ƒåˆé€‚","like_count":0},{"had_liked":false,"id":198953,"user_name":"ç‹ç«‹","can_delete":false,"product_type":"c1","uid":1904760,"ip_address":"","ucode":"44A4EF95403731","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKWiaZb7a2JAcDQ0kYYy2knpK8sTqicvG2Ukb1HdeE0fMMSINiagU401uibLicbIXVwRG7coDyDTOuYCSA/132","comment_is_top":false,"comment_ctime":1585474312,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585474312","product_id":100020801,"comment_content":"å…ˆæ’å…¥ï¼Œå†æ›´æ–°è®¡æ•°","like_count":0},{"had_liked":false,"id":198830,"user_name":"Ryan","can_delete":false,"product_type":"c1","uid":1667987,"ip_address":"","ucode":"95BBBEE5B23878","user_header":"https://static001.geekbang.org/account/avatar/00/19/73/93/0a3a1e5b.jpg","comment_is_top":false,"comment_ctime":1585469898,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585469898","product_id":100020801,"comment_content":"æŒ‰ç…§æ•ˆç‡æ’åºçš„è¯ï¼Œcount(å­—æ®µ)&lt;count( ä¸»é”®id)&lt;count(1)~~count(*)<br>ä¹‹å‰ä¸€ç›´ä»¥ä¸º count(1)æ•ˆç‡æœ€é«˜","like_count":0},{"had_liked":false,"id":194273,"user_name":"å–»èŒ‚","can_delete":false,"product_type":"c1","uid":1318661,"ip_address":"","ucode":"C8BD8086A17365","user_header":"https://static001.geekbang.org/account/avatar/00/14/1f/05/8a06692e.jpg","comment_is_top":false,"comment_ctime":1585044582,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585044582","product_id":100020801,"comment_content":"å…ˆæ’å…¥è®°å½•ï¼Œå†æ›´æ–°è®¡æ•°è¡¨ã€‚å› ä¸ºè®¡æ•°è¡¨å¤šä¸ªäº‹åŠ¡ä¹‹é—´ä¼šåŠ è¡Œé”","like_count":0},{"had_liked":false,"id":189532,"user_name":"è½¬è§’é‡åˆ°æ©™","can_delete":false,"product_type":"c1","uid":1920727,"ip_address":"","ucode":"08C303C72E0959","user_header":"https://static001.geekbang.org/account/avatar/00/1d/4e/d7/c6152ede.jpg","comment_is_top":false,"comment_ctime":1584525843,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584525843","product_id":100020801,"comment_content":"é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œå¦‚æœæˆ‘æ˜¯é’ˆå¯¹ä¸€ä¸ªæ•°æ®åº“å¸¦æ¡ä»¶æŸ¥è¯¢çš„æ—¶å€™ï¼Œcountæ˜Ÿé—®é¢˜ä¹Ÿæ˜¯è¿™ä¹ˆè§£å†³ä¹ˆï¼Œæ±‚å¤§å¸ˆæŒ‡ç‚¹","like_count":0},{"had_liked":false,"id":187020,"user_name":"ç¼–ç¨‹ç•Œçš„å°å­¦ç”Ÿ","can_delete":false,"product_type":"c1","uid":1593289,"ip_address":"","ucode":"4A5BE9A5E877FA","user_header":"https://static001.geekbang.org/account/avatar/00/18/4f/c9/9f51fd27.jpg","comment_is_top":false,"comment_ctime":1583992550,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1583992550","product_id":100020801,"comment_content":"è¿™ä¸ªCOUNT(*)çš„ä¼˜åŒ–åŒºåˆ†ç‰ˆæœ¬å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":185232,"user_name":"WulalaOlala","can_delete":false,"product_type":"c1","uid":1532794,"ip_address":"","ucode":"39E2501F42D052","user_header":"https://static001.geekbang.org/account/avatar/00/17/63/7a/e91c3771.jpg","comment_is_top":false,"comment_ctime":1583540860,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1583540860","product_id":100020801,"comment_content":"æ–°å¢ä¸€åˆ—ä¹Ÿä¼šalter tableï¼Œä¼šè§¦å‘è¡¨é‡å»ºä¹ˆï¼Ÿ","like_count":0},{"had_liked":false,"id":183939,"user_name":"ä¹”ä¸¹","can_delete":false,"product_type":"c1","uid":1217413,"ip_address":"","ucode":"D832A9F97A0C7E","user_header":"https://static001.geekbang.org/account/avatar/00/12/93/85/f5d9474c.jpg","comment_is_top":false,"comment_ctime":1583164908,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1583164908","product_id":100020801,"comment_content":"æœ‰ä¸ªç–‘é—®ï¼Œå°±æ˜¯mysqlæ•°æ®åº“åˆ é™¤ä¸€æ¡æ•°æ®æ—¶ï¼Œä¸»é”®ç´¢å¼•ä¼šåˆ é™¤æ‰è¿™æ¡æ•°æ®å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":181993,"user_name":"ipofss","can_delete":false,"product_type":"c1","uid":1018620,"ip_address":"","ucode":"DE3061C9259F9E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8a/fc/d1dd57dd.jpg","comment_is_top":false,"comment_ctime":1582689020,"is_pvip":false,"replies":[{"id":"70466","content":"å®˜æ–¹ç‰ˆæœ¬çš„5.6&#47;5.7ç‰ˆæœ¬ï¼ŒåŠ åˆ—éƒ½æ˜¯è¦é‡å»ºä¸»é”®ç´¢å¼•çš„ã€‚<br>åŠ æ™®é€šç´¢å¼•ä¸ç”¨","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1582693642,"ip_address":"","comment_id":181993,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1582689020","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæˆ‘é—®ä¸€ä¸ªé¢˜å¤–è¯ï¼šå¯¹äºä¸€ä¸ªMySQLçš„è¡¨ç»“æ„çš„ä¿®æ”¹ï¼Œéœ€è¦é‡å»ºä¸»é”®ç´¢å¼•å—ï¼Ÿ<br>æˆ‘å¹³æ—¶ç”¨Navicatï¼Œå¯¼å‡ºçš„sqlè¯­å¥ï¼Œä¼šè‡ªåŠ¨å¸¦ä¸Šdropä¸»é”®ç´¢å¼•ï¼Œç„¶ååˆaddä¸»é”®ç´¢å¼•ï¼Œç„¶åç»“åˆä½ å‰é¢è®²çš„ï¼Œæˆ‘è®¤ä¸ºå¯¹äºæ–°åŠ çš„åˆ—ï¼Œå¦‚æœä¸é‡å»ºç´¢å¼•ï¼Œé‚£ä¹ˆå¯¹äºæ—§æ•°æ®ï¼Œä¸»é”®ç´¢å¼•æ ‘ä¸Šçš„å¶å­èŠ‚ç‚¹ï¼Œå°±ä¸ä¼šæœ‰æ–°åŠ çš„åˆ—çš„æ•°æ®ï¼Œæ‰€ä»¥æˆ‘è®¤ä¸ºåº”è¯¥æ˜¯éœ€è¦é‡å»ºä¸»é”®ç´¢å¼•çš„ã€‚<br>æˆ‘çš„ç†è§£å¯¹å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":485191,"discussion_content":"å®˜æ–¹ç‰ˆæœ¬çš„5.6/5.7ç‰ˆæœ¬ï¼ŒåŠ åˆ—éƒ½æ˜¯è¦é‡å»ºä¸»é”®ç´¢å¼•çš„ã€‚\nåŠ æ™®é€šç´¢å¼•ä¸ç”¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582693642,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":176739,"user_name":"torres","can_delete":false,"product_type":"c1","uid":1108761,"ip_address":"","ucode":"34DABCFC7B74EA","user_header":"https://static001.geekbang.org/account/avatar/00/10/eb/19/76b0b98c.jpg","comment_is_top":false,"comment_ctime":1581152685,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1581152685","product_id":100020801,"comment_content":"èŒ…å¡é¡¿å¼€","like_count":0},{"had_liked":false,"id":176516,"user_name":"å¾‹é£›","can_delete":false,"product_type":"c1","uid":1462608,"ip_address":"","ucode":"65394E437AD2DF","user_header":"https://static001.geekbang.org/account/avatar/00/16/51/50/f5f2a121.jpg","comment_is_top":false,"comment_ctime":1581079193,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1581079193","product_id":100020801,"comment_content":"1ï¼šæŒ‰ç…§æ•ˆç‡æ’åºçš„è¯ï¼Œcount(å­—æ®µ)&lt;count(ä¸»é”® id)&lt;count(1)â‰ˆcount(*)ï¼Œæ‰€ä»¥è€å¸ˆå»ºè®®ï¼Œå°½é‡ä½¿ç”¨ count(*)ã€‚<br>2ï¼šcount(*)è¿™ä¹ˆæ…¢ï¼Œæ€ä¹ˆåŠï¼Ÿ<br>è¦ä¹ˆå¿ï¼Œè¦ä¹ˆè‡ªå·±åŠ¨æ‰‹è®°å½•ï¼Œå¦‚æœè‡ªå·±è®°å½•çš„è¯ï¼Œè€å¸ˆå»ºè®®ä½¿ç”¨æ•°æ®åº“æ¥å¼„ï¼Œæ„Ÿè§‰ä½¿ç”¨æ•°æ®åº“è‡ªå·±å¼„çš„æ€è·¯å¯ä»¥å»ºè®®MySQLå®ç°ä¸€ä¸‹ï¼Ÿ<br>3ï¼šcount()çš„è¯­ä¹‰æ˜¯å•¥ï¼Ÿ<br>é¦–å…ˆï¼Œä¸åŒçš„å­˜å‚¨å¼•æ“å®ç°æ–¹å¼ä¸åŒ<br>MyISAM å¼•æ“æŠŠä¸€ä¸ªè¡¨çš„æ€»è¡Œæ•°å­˜åœ¨äº†ç£ç›˜ä¸Šï¼Œå› æ­¤æ‰§è¡Œ count(*) çš„æ—¶å€™ä¼šç›´æ¥è¿”å›è¿™ä¸ªæ•°ï¼Œæ•ˆç‡å¾ˆé«˜ï¼›<br>è€Œ InnoDB å¼•æ“å°±éº»çƒ¦äº†ï¼Œå®ƒæ‰§è¡Œ count(*) çš„æ—¶å€™ï¼Œéœ€è¦æŠŠæ•°æ®ä¸€è¡Œä¸€è¡Œåœ°ä»å¼•æ“é‡Œé¢è¯»å‡ºæ¥ï¼Œç„¶åç´¯ç§¯è®¡æ•°ã€‚<br>ä»¥ä¸‹é’ˆå¯¹innodbæ¥è¯´<br>count() æ˜¯ä¸€ä¸ªèšåˆå‡½æ•°ï¼Œå¯¹äºè¿”å›çš„ç»“æœé›†ï¼Œä¸€è¡Œè¡Œåœ°åˆ¤æ–­ï¼Œå¦‚æœ count å‡½æ•°çš„å‚æ•°ä¸æ˜¯ NULLï¼Œç´¯è®¡å€¼å°±åŠ  1ï¼Œå¦åˆ™ä¸åŠ ï¼Œæœ€åè¿”å›ç´¯è®¡å€¼ã€‚<br>4ï¼šcount(å­—æ®µ)æ€ä¹ˆè®¡æ•°ï¼Ÿ<br>å¦‚æœè¿™ä¸ªâ€œå­—æ®µâ€æ˜¯å®šä¹‰ä¸º not null çš„è¯ï¼Œä¸€è¡Œè¡Œåœ°ä»è®°å½•é‡Œé¢è¯»å‡ºè¿™ä¸ªå­—æ®µï¼Œåˆ¤æ–­ä¸èƒ½ä¸º nullï¼ŒæŒ‰è¡Œç´¯åŠ ï¼›<br>å¦‚æœè¿™ä¸ªâ€œå­—æ®µâ€å®šä¹‰å…è®¸ä¸º nullï¼Œé‚£ä¹ˆæ‰§è¡Œçš„æ—¶å€™ï¼Œåˆ¤æ–­åˆ°æœ‰å¯èƒ½æ˜¯ nullï¼Œè¿˜è¦æŠŠå€¼å–å‡ºæ¥å†åˆ¤æ–­ä¸€ä¸‹ï¼Œä¸æ˜¯ null æ‰ç´¯åŠ ã€‚<br>ä»å¼•æ“è¿”å›çš„å­—æ®µä¼šæ¶‰åŠåˆ°è§£ææ•°æ®è¡Œï¼Œä»¥åŠæ‹·è´å­—æ®µå€¼çš„æ“ä½œã€‚<br>5ï¼šcount(ä¸»é”® id)æ€ä¹ˆè®¡æ•°ï¼Ÿ<br>å¯¹äº count(ä¸»é”® id) æ¥è¯´ï¼ŒInnoDB å¼•æ“ä¼šéå†æ•´å¼ è¡¨ï¼ŒæŠŠæ¯ä¸€è¡Œçš„ id å€¼éƒ½å–å‡ºæ¥ï¼Œè¿”å›ç»™ server å±‚ã€‚server å±‚æ‹¿åˆ° id åï¼Œåˆ¤æ–­æ˜¯ä¸å¯èƒ½ä¸ºç©ºçš„ï¼Œå°±æŒ‰è¡Œç´¯åŠ ã€‚ä»å¼•æ“è¿”å›çš„ ä¸»é”®id ä¼šæ¶‰åŠåˆ°è§£ææ•°æ®è¡Œï¼Œä»¥åŠæ‹·è´å­—æ®µå€¼çš„æ“ä½œã€‚<br>6ï¼šcount(1)æ€ä¹ˆè®¡æ•°ï¼Ÿ<br>å¯¹äº count(1) æ¥è¯´ï¼ŒInnoDB å¼•æ“éå†æ•´å¼ è¡¨ï¼Œä½†ä¸å–å€¼ã€‚server å±‚å¯¹äºè¿”å›çš„æ¯ä¸€è¡Œï¼Œæ”¾ä¸€ä¸ªæ•°å­—â€œ1â€è¿›å»ï¼Œåˆ¤æ–­æ˜¯ä¸å¯èƒ½ä¸ºç©ºçš„ï¼ŒæŒ‰è¡Œç´¯åŠ ã€‚<br>7ï¼šcount(*)æ€ä¹ˆè®¡æ•°ï¼Ÿ<br>å¯¹äºcount(*)æ¥è¯´ï¼Œå¹¶ä¸ä¼šæŠŠå…¨éƒ¨å­—æ®µå–å‡ºæ¥ï¼Œè€Œæ˜¯ä¸“é—¨åšäº†ä¼˜åŒ–ï¼Œä¸å–å€¼ã€‚count(*) è‚¯å®šä¸æ˜¯ nullï¼ŒæŒ‰è¡Œç´¯åŠ ã€‚<br>8ï¼šåˆ†æè¿™äº›count()çš„åŸåˆ™å¦‚ä¸‹ï¼š<br>server å±‚è¦ä»€ä¹ˆå°±ç»™ä»€ä¹ˆï¼›<br>InnoDB åªç»™å¿…è¦çš„å€¼ï¼›<br>ç°åœ¨çš„ä¼˜åŒ–å™¨åªä¼˜åŒ–äº† count(*) çš„è¯­ä¹‰ä¸ºâ€œå–è¡Œæ•°â€ï¼Œå…¶ä»–â€œæ˜¾è€Œæ˜“è§â€çš„ä¼˜åŒ–å¹¶æ²¡æœ‰åšã€‚","like_count":0},{"had_liked":false,"id":171989,"user_name":"Zhaoyang","can_delete":false,"product_type":"c1","uid":1037190,"ip_address":"","ucode":"131D83AC2566D2","user_header":"https://static001.geekbang.org/account/avatar/00/0f/d3/86/b5d72c87.jpg","comment_is_top":false,"comment_ctime":1579063314,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1579063314","product_id":100020801,"comment_content":"æˆ‘è§‰å¾—æ˜¯åº”è¯¥å…ˆå†™redisè®¡æ•°å§ã€‚å¦åˆ™æ˜¯å¦ä¼šå‡ºç°è¶…å–çš„æƒ…å†µå‘¢ï¼Ÿï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1303322,"avatar":"https://static001.geekbang.org/account/avatar/00/13/e3/1a/061e77b6.jpg","nickname":"äº¢æ˜Ÿä¸œ","note":"","ucode":"5E4063E83B2BB9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":319098,"discussion_content":"å¯ä»¥é¢„ç•™ä¸€äº›è´§ç‰©","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1603941526,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":158084,"discussion_content":"çœŸå®ä¸šåŠ¡å…¶å®æ—¢ä¸èƒ½è¶…å–ï¼Œä¹Ÿä¸èƒ½æœ‰äººæƒ³ä¹°ï¼Œä½†å–å®Œäº†ï¼Œä½†å®é™…ä¸Šè¿˜æœ‰å‰©ä½™ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1580549273,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":171988,"user_name":"Zhaoyang","can_delete":false,"product_type":"c1","uid":1037190,"ip_address":"","ucode":"131D83AC2566D2","user_header":"https://static001.geekbang.org/account/avatar/00/0f/d3/86/b5d72c87.jpg","comment_is_top":false,"comment_ctime":1579062958,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1579062958","product_id":100020801,"comment_content":"å…ˆè®¡æ•°ï¼Œæ¯”è¾ƒå¥½å§","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":158088,"discussion_content":"ä¸å¥½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580549506,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":169544,"user_name":"zmysang","can_delete":false,"product_type":"c1","uid":1642663,"ip_address":"","ucode":"8A98057E7819DD","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/tjhOILHBAmlx6YiaTZJzqzxn1uyB6XpdvGDIZhBn127TYEcoLLzxRiaKvtVd3HllQqPx7cqf2YmibyBUgGGGJPDkw/132","comment_is_top":false,"comment_ctime":1578376386,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1578376386","product_id":100020801,"comment_content":"å¯¹äº count(å­—æ®µ) æ¥è¯´ï¼šå¦‚æœè¿™ä¸ªâ€œå­—æ®µâ€æ˜¯å®šä¹‰ä¸º not null çš„è¯ï¼Œä¸€è¡Œè¡Œåœ°ä»è®°å½•é‡Œé¢è¯»å‡ºè¿™ä¸ªå­—æ®µï¼Œåˆ¤æ–­ä¸èƒ½ä¸º nullï¼ŒæŒ‰è¡Œç´¯åŠ ï¼›å¦‚æœè¿™ä¸ªâ€œå­—æ®µâ€å®šä¹‰å…è®¸ä¸º nullï¼Œé‚£ä¹ˆæ‰§è¡Œçš„æ—¶å€™ï¼Œåˆ¤æ–­åˆ°æœ‰å¯èƒ½æ˜¯ nullï¼Œè¿˜è¦æŠŠå€¼å–å‡ºæ¥å†åˆ¤æ–­ä¸€ä¸‹ï¼Œä¸æ˜¯ null æ‰ç´¯åŠ ã€‚<br>å…³äºè¿™ä¸€æ®µï¼Œè¯·é—®ä¸€ä¸‹ï¼Œå¦‚æœå­—æ®µæ—¶å®šä¹‰ä¸ºéç©ºï¼Œè¿™é‡Œåˆ¤æ–­éç©ºçš„æ“ä½œæ˜¯serveråšçš„å—ï¼Ÿå¦‚æœå­—æ®µå®šä¹‰å…è®¸ç©ºæ—¶ï¼Œè¿™æ—¶æ˜¯InnoDBè‡ªå·±ä¼šåšä¸€æ¬¡éç©ºçš„åˆ¤æ–­äº†ï¼Œå†å°†éç©ºçš„æ•°æ®æäº¤åˆ°serverï¼ˆInnoDBåªç»™å¿…è¦çš„å€¼ï¼‰ï¼Œç„¶åserverå†åšä¸€æ¬¡éç©ºåˆ¤æ–­å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":158089,"discussion_content":"åˆ¤æ–­éç©ºæ˜¯åœ¨serverå±‚åšçš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580549549,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":167798,"user_name":"å°ç æ¸£","can_delete":false,"product_type":"c1","uid":1723655,"ip_address":"","ucode":"8432409D9616D1","user_header":"https://static001.geekbang.org/account/avatar/00/1a/4d/07/7d331b04.jpg","comment_is_top":false,"comment_ctime":1577936000,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1577936000","product_id":100020801,"comment_content":"è€å¸ˆ è¿™ä¸€ç« çš„æ ‡é¢˜æ˜¯ â€˜count(*)è¿™ä¹ˆæ…¢ï¼Œæˆ‘è¯¥æ€ä¹ˆåŠï¼Ÿâ€™ ï¼Œä½†æ˜¯æˆ‘çœ‹å®Œæ•´ç¯‡çœ‹åˆ°çš„æ˜¯ countï¼ˆ1ï¼‰ï¼Œcountï¼ˆ*ï¼‰ï¼Œcountï¼ˆå­—æ®µï¼‰ï¼Œcountï¼ˆidï¼‰ çš„å¯¹æ¯”ï¼Œå¥½åƒå¹¶æ²¡æœ‰è®²åˆ° countï¼ˆ*ï¼‰æ…¢çš„è§£å†³åŠæ³•ï¼Œæ˜¯æˆ‘æ²¡ç†è§£åˆ°ä½ç  ï¼Ÿ ","like_count":0,"discussions":[{"author":{"id":1453053,"avatar":"https://static001.geekbang.org/account/avatar/00/16/2b/fd/7013289d.jpg","nickname":"æ¸©æ•…è€ŒçŸ¥æ–°å¯ä»¥ä¸ºå¸ˆçŸ£","note":"","ucode":"FADCDFA9F9E5E8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":121050,"discussion_content":"å¼•å­è€Œå·²ï¼Œä¸ç”¨çº ç»“ï¼Œå¦å¤–æ–‡ç« ä¸ä¹Ÿç»™å‡ºäº†redisï¼ŒmysqlåŠ è®¡æ•°è¡¨çš„æ–¹æ¡ˆäº†å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578310187,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":167022,"user_name":"é˜¿æœ","can_delete":false,"product_type":"c1","uid":1066705,"ip_address":"","ucode":"349D3572F5ABE7","user_header":"https://static001.geekbang.org/account/avatar/00/10/46/d1/a1ddf49f.jpg","comment_is_top":false,"comment_ctime":1577671500,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1577671500","product_id":100020801,"comment_content":"å¹¶å‘æƒ…å†µä¸‹ï¼Œä¸ºäº†å‡å°‘é”ç­‰å¾…çš„æ—¶é—´ï¼Œäº‹ç‰©ä¸­å ç”¨é”æ—¶é—´è¶Šå¤šçš„æ”¾åœ¨è¶Šåæ‰§è¡Œï¼Œæ›´æ–°ç»Ÿè®¡æ•°æ¶‰åŠé”ç«äº‰ï¼Œæ‰€ä»¥ä¼šé”ç­‰å¾…ï¼Œæ•…åœ¨æ’å…¥ä¸€è¡Œæ•°æ®åæ‰§è¡Œã€‚","like_count":0},{"had_liked":false,"id":165055,"user_name":"å¬é›¨","can_delete":false,"product_type":"c1","uid":1254493,"ip_address":"","ucode":"252754F9FCFF0C","user_header":"https://static001.geekbang.org/account/avatar/00/13/24/5d/65e61dcb.jpg","comment_is_top":false,"comment_ctime":1577153641,"is_pvip":false,"replies":[{"id":"62894","content":"ä¸èƒ½ï¼Œexplainæ˜¯ä¼°ç®—å€¼ï¼Œè€Œä¸”å¾ˆä¸å‡†","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1577156247,"ip_address":"","comment_id":165055,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1577153641","product_id":100020801,"comment_content":"è€å¸ˆï¼Œç”Ÿäº§ä¸­å¯ä»¥ç”¨explainæ›¿ä»£countä¼˜åŒ–å—","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479007,"discussion_content":"ä¸èƒ½ï¼Œexplainæ˜¯ä¼°ç®—å€¼ï¼Œè€Œä¸”å¾ˆä¸å‡†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577156247,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":159322,"user_name":"å°èåœ","can_delete":false,"product_type":"c1","uid":1743846,"ip_address":"","ucode":"1E7BD767DBD46C","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI9tOiaKOSA3RakexswPIzAzlwFrJzVhL2icLfyZcPKY0emWh12Bibp2slGTOQuJoUgDVzDXyfROzs6w/132","comment_is_top":false,"comment_ctime":1575598871,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1575598871","product_id":100020801,"comment_content":"åœ¨æ±‚è¡Œæ•°çš„æ—¶å€™èƒ½ä¸èƒ½å•ç‹¬ä¸ºä¸€å¼ è¡¨è®¾ç½®ä¸€ä¸ªå˜é‡,æ¯æ–°å¢ä¸€æ¡æ•°æ®å°±è‡ªå¢ä¸€,æ¥è¾¾åˆ°è·å–æ€»è¡¨çš„è¡Œæ•°","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":158099,"discussion_content":"æƒ³çš„ç¾å¥½ï¼Œè½åœ°æ²¡æœ‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580550855,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":151046,"user_name":"anchor","can_delete":false,"product_type":"c1","uid":1083124,"ip_address":"","ucode":"24EECD40CC54C2","user_header":"https://static001.geekbang.org/account/avatar/00/10/86/f4/331f33a7.jpg","comment_is_top":false,"comment_ctime":1573647347,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1573647347","product_id":100020801,"comment_content":"è¯·é—®è€å¸ˆ  count(distinct å­—æ®µ)çš„åŸç†æ˜¯æ€æ ·çš„","like_count":0,"discussions":[{"author":{"id":1453053,"avatar":"https://static001.geekbang.org/account/avatar/00/16/2b/fd/7013289d.jpg","nickname":"æ¸©æ•…è€ŒçŸ¥æ–°å¯ä»¥ä¸ºå¸ˆçŸ£","note":"","ucode":"FADCDFA9F9E5E8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":121061,"discussion_content":"åŠ ä¸ªhashåˆ¤æ–­æ˜¯å¦å·²è¿”å›ä¹‹ç±»ï¼Ÿä¹Ÿå¯èƒ½æœ‰è¯¸å¦‚â€œå»é‡B+æ ‘â€ä¹‹ç±»çš„ä¸œè¥¿ï¼ŸçŒœæµ‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578310398,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":149889,"user_name":"Flash","can_delete":false,"product_type":"c1","uid":1236163,"ip_address":"","ucode":"E285075C9E0B02","user_header":"https://static001.geekbang.org/account/avatar/00/12/dc/c3/e4ba51d5.jpg","comment_is_top":false,"comment_ctime":1573430202,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1573430202","product_id":100020801,"comment_content":"æ€è€ƒé¢˜:<br>ä»æ€§èƒ½è€ƒè™‘ï¼Œå…ˆæ’å…¥è®°å½•ï¼Œå†æ›´æ–°è®¡æ•°ã€‚<br>å› ä¸ºæ›´æ–°çš„è®¡æ•°åº”è¯¥æ˜¯åŒä¸€è¡Œè®°å½•ï¼Œä¼šç”¨åˆ°è¡Œé”ï¼Œå¹¶å‘æ—¶ï¼Œæ›´æ–°è®¡æ•°æ”¾åé¢ï¼Œå¯ä»¥å‡å°‘è¡Œé”é”ä½çš„æ—¶é—´ï¼Œæé«˜å¹¶å‘åº¦ã€‚<br>æé—®:<br>è€å¸ˆï¼Œè¯·é—®count(*)æ˜¯ä»å“ªä¸ªç‰ˆæœ¬å¼€å§‹ä¼˜åŒ–çš„ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1602218,"avatar":"https://static001.geekbang.org/account/avatar/00/18/72/aa/7b80f622.jpg","nickname":"åœŸè±†ç¨€é¥­","note":"","ucode":"C045CE79B458BF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":69281,"discussion_content":"ä»5.7ç‰ˆæœ¬è¿›è¡Œçš„ä¼˜åŒ–ï¼Œè€ç‰ˆæœ¬mysql è¿˜æ˜¯ç”¨count(1) æ¯”è¾ƒå¿«","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575278533,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":149530,"user_name":"ä¹˜é£","can_delete":false,"product_type":"c1","uid":1115724,"ip_address":"","ucode":"0420C5535DACB7","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLwSoTjHPX5tm4whBSfoZLX6toZxrZGUaLABQywKNf4MDc9toK3QSV7Z99ATcGicFCysoleQ5ISzmw/132","comment_is_top":false,"comment_ctime":1573267821,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1573267821","product_id":100020801,"comment_content":"å…ˆæ’å…¥åæ›´æ–°,å› ä¸ºæ›´æ–°è®¡æ•°è¡¨ä¼šå­˜åœ¨é”,è€Œé”æ˜¯äº‹åŠ¡ç»“æŸåæ‰é‡Šæ”¾.è‹¥é‡åˆ°æ’å…¥æ—¶å› ä¸ºnextkeylockå¯¼è‡´é˜»å¡,åˆ™è®¡æ•°å™¨è¡¨çš„é”ä¹Ÿä¼šè¢«é•¿æœŸæŒæœ‰è€Œä¸è¢«é‡Šæ”¾.<br><br>","like_count":0},{"had_liked":false,"id":148901,"user_name":"Geek_55a272","can_delete":false,"product_type":"c1","uid":1674602,"ip_address":"","ucode":"7B12A9B322B3BF","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJPHfGiaByESiaHPWbfQicjgap3unxDsxlG6JuUCNvEFJNLibNjeX4CQYNtsvXBXqTpBERUIPyiagGBXbg/132","comment_is_top":false,"comment_ctime":1573106638,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1573106638","product_id":100020801,"comment_content":"å…ˆæ’å…¥æ–°è®°å½•å†æ›´æ–°è®¡æ•°å€¼<br>å› ä¸ºå¦‚æœæ›´æ–°è®¡æ•°å€¼äº†<br>é‚£ä¹ˆæ ¹æ®mvcc å…¶ä»–äº‹åŠ¡æ˜¯å¯ä»¥å¾—åˆ°è¿™ä¸ªè®¡æ•°å€¼çš„<br>ä½†æ˜¯ æ–°è®°å½•æ˜¯æ— æ³•æŸ¥è¯¢çš„","like_count":0},{"had_liked":false,"id":144276,"user_name":"å¤©äº®å‰è¯´æ™šå®‰","can_delete":false,"product_type":"c1","uid":1541014,"ip_address":"","ucode":"1D82EE562A7C71","user_header":"https://static001.geekbang.org/account/avatar/00/17/83/96/73ff13a0.jpg","comment_is_top":false,"comment_ctime":1571886281,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1571886281","product_id":100020801,"comment_content":"ä½†æ˜¯å¾ˆå¤šæƒ…å†µä¸‹ï¼Œéƒ½æ˜¯å¸¦æ¡ä»¶çš„å•Šï¼Œè¿™ä¸ªæ—¶å€™æ€ä¹ˆä¼˜åŒ–ï¼Ÿæ¯”å¦‚åˆ†é¡µæŸ¥è¯¢ï¼ŒæŸç§æ¡ä»¶ä¸‹çš„æ€»è®°å½•æ•°ã€‚è¿™ç§è¿˜ä¸èƒ½ä»è¡¨ç»“æ„ä¸Šæ¥åšä¼˜åŒ–ï¼Œå°±åƒæ¡ˆä¾‹ä¸­è¯´çš„ï¼Œä¸“é—¨ä¸€ä¸ªå­—æ®µæ¥å­˜å‚¨ã€‚","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":158102,"discussion_content":"åƒè¿™ç§åŠ æ¡ä»¶çš„ï¼Œä¸€èˆ¬å°±åªèƒ½ç›´æ¥æ‰§è¡Œè®¡æ•°äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580550980,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":140084,"user_name":"å¿ƒæœ‰æ—å¤•","can_delete":false,"product_type":"c1","uid":1172145,"ip_address":"","ucode":"BC6E1AE557BFF4","user_header":"https://static001.geekbang.org/account/avatar/00/11/e2/b1/d00399c0.jpg","comment_is_top":false,"comment_ctime":1570803681,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1570803681","product_id":100020801,"comment_content":"æ™“æ–Œå“¥ï¼Œè¯»äº†å‡ éæ–‡ç« è¿˜æ˜¯æœ‰äº›ä¸æ˜ç™½ï¼Œæƒ³è¯·æ•™ä¸‹ï¼š<br>1.åœ¨ä»‹ç»count()è¯­æ„çš„æ—¶å€™è¯´ï¼Œâ€œå¯¹äºè¿”å›çš„ç»“æœé›†ï¼Œä¸€è¡Œè¡Œåœ°åˆ¤æ–­ï¼Œcount å‡½æ•°çš„å‚æ•°æ˜¯ä¸æ˜¯ NULLã€‚â€<br>åœ¨ä»‹ç»count(*)çš„æ—¶å€™è¯´ï¼Œâ€œä¸ä¼šæŠŠå…¨éƒ¨å­—æ®µå–å‡ºæ¥ï¼Œè€Œæ˜¯ä¸“é—¨åšäº†ä¼˜åŒ–ï¼Œä¸å–å€¼ã€‚count(*) è‚¯å®šä¸æ˜¯ nullï¼ŒæŒ‰è¡Œç´¯åŠ ã€‚â€ æ„Ÿè§‰ä¸¤è€…æœ‰äº›çŸ›ç›¾<br>æƒ³é—®ä¸‹ï¼Œå¯¹count(*)ï¼Œserverå±‚æ˜¯å¦è¿˜éœ€è¦å¯¹æ¯è¡Œï¼Œåˆ¤æ–­not nullè¿™æ­¥æ“ä½œå‘¢ï¼Ÿ<br>2. åœ¨ä»‹ç»count(*)ä¼˜åŒ–çš„æ—¶å€™ï¼Œæåˆ°Mysqlä¼˜åŒ–å™¨ä¼šé€‰æ‹©æœ€å°çš„ç´¢å¼•ã€‚ä½†æ˜¯å¯¹äºcount(*)å‡½æ•°æ¥è¯´ï¼Œinnodbæ˜¯ä¸å–å€¼çš„ï¼Œé‚£è¿™ä¸ªå¶å­èŠ‚ç‚¹å¤§å°å’ŒæŸ¥è¯¢æ•ˆç‡æœ‰å…³ç³»ä¹ˆï¼Ÿè¿™ä¸ªä¼˜åŒ–è¦æ€ä¹ˆç†è§£å‘¢ï¼Ÿ<br><br>æé—®è¾ƒæ™šï¼Œå¸Œæœ›çœ‹åˆ°å¯ä»¥è§£ç­”ä¸‹ï¼Œæ„Ÿè°¢~","like_count":0,"discussions":[{"author":{"id":1453053,"avatar":"https://static001.geekbang.org/account/avatar/00/16/2b/fd/7013289d.jpg","nickname":"æ¸©æ•…è€ŒçŸ¥æ–°å¯ä»¥ä¸ºå¸ˆçŸ£","note":"","ucode":"FADCDFA9F9E5E8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":121081,"discussion_content":"1ï¼šä¸çŸ›ç›¾ï¼Œåˆ¤æ–­NULLæ˜¯é’ˆå¯¹select(æ™®é€šåˆ—)ä¸”æ™®é€šåˆ—å®šä¹‰ä¸ºNULLçš„æƒ…å†µï¼Œcount(*)æ‰¾åˆ°ä¸€è¡Œå°±å¯ä»¥â€œ+1â€äº†ã€‚ï¼ˆæˆ‘è®¤ä¸ºcountï¼ˆ*ï¼‰åªéœ€è¦ç»™serveræœ€ç»ˆçš„ç»“æœå°±è¡Œäº†ä¸ªäººç†è§£ï¼‰ã€‚\n2ï¼šâ€œå°çš„ç´¢å¼•â€æ¯ä¸ªæ•°æ®é¡µçš„æ•°æ®ä¹Ÿå°±å¤šï¼Œå› æ­¤&#34;IO&#34;æ¬¡æ•°å°±ä¹Ÿå°‘ï¼Œå ç”¨å†…å­˜ä¹Ÿå°‘ï¼Œæ¶ˆè€—CPUä¹Ÿå°‘ï¼Œå› æ­¤æ•ˆç‡å°±é«˜ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1578310907,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":139867,"user_name":"â›½ï¸ğŸ¦†","can_delete":false,"product_type":"c1","uid":1674059,"ip_address":"","ucode":"7D952CAFDBBD99","user_header":"https://static001.geekbang.org/account/avatar/00/19/8b/4b/9e0d334f.jpg","comment_is_top":false,"comment_ctime":1570758209,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1570758209","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæœ‰ä¸€ä¸ªé—®é¢˜ã€‚æ¯”å¦‚å¤§é‡çš„è®¡æ•°æ“ä½œï¼Œé‚£ä¹ˆç”¨mysqlçš„è¯ä¼šé¢‘ç¹çš„å†™å…¥ï¼Œè¿™å¯¹æ€§èƒ½æ˜¯ä¸æ˜¯æœ‰å½±å“å•Šã€‚","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":158103,"discussion_content":"è¿˜å¥½å§ï¼Œå¦‚æœå¤ªå¤šï¼Œå¯ä»¥åœ¨æ¶æ„ä¸Šåšæ–‡ç« ï¼Œæ¯”å¦‚åŠ é˜Ÿåˆ—ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580551198,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":139351,"user_name":"happiness","can_delete":false,"product_type":"c1","uid":1026587,"ip_address":"","ucode":"C5F25D57C7A1DC","user_header":"https://static001.geekbang.org/account/avatar/00/0f/aa/1b/b43c8519.jpg","comment_is_top":false,"comment_ctime":1570617762,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1570617762","product_id":100020801,"comment_content":"å…ˆæ’å…¥å†æ›´æ–° æ›´æ–°éœ€è¦æŒæœ‰è¡Œé” æˆ‘ä»¬éœ€è¦å°½é‡å‡å°‘æ¯ä¸ªçº¿ç¨‹æŒé”çš„æ—¶é—´æ¥æå‡æ•´ä½“å¹¶å‘æ€§","like_count":0},{"had_liked":false,"id":135226,"user_name":"è¡Œè€…","can_delete":false,"product_type":"c1","uid":1618607,"ip_address":"","ucode":"8179D167D99CB9","user_header":"https://static001.geekbang.org/account/avatar/00/18/b2/af/81303f5a.jpg","comment_is_top":false,"comment_ctime":1569071347,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1569071347","product_id":100020801,"comment_content":"è®°å¾—è€å¸ˆè¯´è¿‡å…¨è¡¨æ‰«æä¼šèµ°é»˜è®¤ä¸»é”®ç´¢å¼•ï¼Œä½†æ˜¯count(å­—æ®µ)è¿™ä¸ªæ“ä½œï¼Œæˆ‘çš„å®éªŒä¸­å‘ç°è¯¥å­—æ®µæ²¡æœ‰åˆ›å»ºç´¢å¼•ï¼Œç”¨EXPLAINå‘½ä»¤çœ‹åˆ°çš„ç»“æœä¸­keyå€¼ä¸ºç©ºï¼Œè¯´æ˜æ²¡æœ‰ä½¿ç”¨ç´¢å¼•ï¼Œé‚£ä¹ˆæˆ‘çš„ç–‘é—®æ¥äº†ï¼š<br>1ï¼šå…¨è¡¨æ‰«ææ˜¯å¦èµ°ä¸»é”®ç´¢å¼•ï¼Œå¦‚ä½•éªŒè¯å‘¢<br>2ï¼šcountï¼ˆå­—æ®µï¼‰æ“ä½œï¼Œå½“è¿™ä¸ªå­—æ®µæ²¡æœ‰åˆ›å»ºç´¢å¼•çš„æ—¶å€™ï¼ŒMySQLå¦‚ä½•å¤„ç†ï¼Œæ˜¯å…¨è¡¨æ‰«æå—","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":158104,"discussion_content":"1ã€å…¨è¡¨æ‰«æå°±æ˜¯èµ°ä¸»é”®ç´¢å¼•è¡¨å§ã€‚\n2ã€æ˜¯çš„ï¼Œä¸€è¡Œè¡Œæ‰«æï¼Œå¹¶è¿›è¡Œnullåˆ¤æ–­ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580551319,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":134039,"user_name":"#160","can_delete":false,"product_type":"c1","uid":1195835,"ip_address":"","ucode":"0C0A2C5494B252","user_header":"https://static001.geekbang.org/account/avatar/00/12/3f/3b/6f3cf0af.jpg","comment_is_top":false,"comment_ctime":1568727141,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1568727141","product_id":100020801,"comment_content":"è€å¸ˆå¯ä»¥åˆ†æä¸€ä¸‹è¿™ä¸ªè¯­å¥å—ï¼Ÿæ‹¿åˆ°çš„è¡Œæ•°äº†show table statusä¸€æ ·å—ï¼Ÿ<br> &quot;select TABLE_SCHEMA, table_name, table_rows from `TABLES` where TABLE_SCHEMA not in (&#39;information_schema&#39;,&#39;sys&#39;,&#39;test&#39;,&#39;performance_schema&#39;,&#39;mysql&#39;)&quot;","like_count":0},{"had_liked":false,"id":131691,"user_name":"å•å°ç°","can_delete":false,"product_type":"c1","uid":1067354,"ip_address":"","ucode":"59C4523FF1B5DB","user_header":"https://static001.geekbang.org/account/avatar/00/10/49/5a/67b5f0b1.jpg","comment_is_top":false,"comment_ctime":1567847504,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1567847504","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæœ‰ä¸ªé—®é¢˜ï¼Œå¦‚æœåœ¨å›¾4å½“ä¸­ä¼šè¯Açš„æ’å…¥ä¸€è¡Œæ•°æ®Rå’Œcommitå‘ç”Ÿåœ¨ä¼šè¯Bçš„è¯»è¡¨Cè®¡æ•°å€¼å’ŒæŸ¥è¯¢æœ€è¿‘100æ¡è®°å½•ä¹‹é—´ï¼Œé‚£ä¸æ˜¯è¿˜æ˜¯ä¼šå‡ºç°é€»è¾‘ä¸Šä¸ç²¾ç¡®çš„ç°è±¡å—ï¼Ÿå› ä¸ºä¼šè¯Bè¯»åˆ°çš„è®¡æ•°å€¼æ˜¯+1ä¹‹å‰çš„å€¼ï¼Œè€Œè¯»åˆ°çš„æ•°æ®è®°å½•æ˜¯æ’å…¥æ•°æ®ä¹‹åçš„ã€‚","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":158107,"discussion_content":"å¯å†çœ‹ä¸€ä¸‹ç¬¬8ç« ï¼Œç‰ˆæœ¬å·²æäº¤ï¼Œä½†æ˜¯æ˜¯åœ¨è§†å›¾åˆ›å»ºåæäº¤çš„ï¼Œä¸å¯è§ï¼›","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580551580,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":130476,"user_name":"alioo","can_delete":false,"product_type":"c1","uid":1022507,"ip_address":"","ucode":"F36A38C1F5FFAB","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqOpANMwDibLmj5IGJh6dTw300sZ1BHM5sG3sZv1A1rvCHOiblPD3jgFOiaMVVujtctWnQbVFoNPpRgw/132","comment_is_top":false,"comment_ctime":1567472259,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1567472259","product_id":100020801,"comment_content":"è€å¸ˆæåˆ°çš„count(*)ä¼˜åŒ–æ˜¯ä»å“ªä¸ªmysqlç‰ˆæœ¬å¼€å§‹æ”¯æŒçš„å•Šï¼Ÿä¹‹å‰ä¸€ç›´éƒ½æ˜¯ä»¥ä¸ºæ˜¯æœ€æ…¢çš„ï¼Œæƒ­æ„§","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":158108,"discussion_content":"5.7ä¹‹åï¼Œä¹‹å‰count(1)å¿«","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580551605,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":130470,"user_name":"alioo","can_delete":false,"product_type":"c1","uid":1022507,"ip_address":"","ucode":"F36A38C1F5FFAB","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqOpANMwDibLmj5IGJh6dTw300sZ1BHM5sG3sZv1A1rvCHOiblPD3jgFOiaMVVujtctWnQbVFoNPpRgw/132","comment_is_top":false,"comment_ctime":1567471443,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1567471443","product_id":100020801,"comment_content":"ä»å¹¶å‘ç³»ç»Ÿæ€§èƒ½çš„è§’åº¦è€ƒè™‘ï¼Œä½ è§‰å¾—åœ¨è¿™ä¸ªäº‹åŠ¡åºåˆ—é‡Œï¼Œåº”è¯¥å…ˆæ’å…¥æ“ä½œè®°å½•ï¼Œè¿˜æ˜¯åº”è¯¥å…ˆæ›´æ–°è®¡æ•°è¡¨å‘¢ï¼Ÿ<br>&gt;&gt; æ›´æ–°è®¡æ•°è¡¨ä¸€å®šä¼šåŠ é”ï¼Œæ‰€ä»¥è¦æ§åˆ¶é”çš„æ—¶é—´ï¼Œè®©å®ƒè·ç¦»commitæ›´è¿‘ï¼Œå³åæ›´æ–°è®¡æ•°è¡¨æ›´åˆé€‚ï¼ˆæ™šç‚¹æ‰§è¡Œï¼Œå¿«ç‚¹æäº¤ï¼‰","like_count":0},{"had_liked":false,"id":129085,"user_name":"-W.LI-","can_delete":false,"product_type":"c1","uid":1210699,"ip_address":"","ucode":"3556786538664F","user_header":"https://static001.geekbang.org/account/avatar/00/12/79/4b/740f91ca.jpg","comment_is_top":false,"comment_ctime":1567040484,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1567040484","product_id":100020801,"comment_content":"å¸¦whereæ¡ä»¶çš„count(*)mysiamæ˜¯ä¸æ˜¯ä¹Ÿå¾—ä¸€è¡Œä¸€è¡Œç»Ÿè®¡?","like_count":0},{"had_liked":false,"id":127239,"user_name":"ä¹¦ç­–ç¨ æµŠ","can_delete":false,"product_type":"c1","uid":1307497,"ip_address":"","ucode":"A29875CE15FDA3","user_header":"https://static001.geekbang.org/account/avatar/00/13/f3/69/7039d03f.jpg","comment_is_top":false,"comment_ctime":1566618307,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1566618307","product_id":100020801,"comment_content":"countçš„æ—¶å€™éå†æ•´å¼ è¡¨æ˜¯éå†ç´¢å¼•æ ‘å§ï¼Œç„¶åcount1çš„æ—¶å€™ä¸è¿”å›æ•°æ®æ˜¯ä»€ä¹ˆæ„æ€ï¼Œæ€ä¹ˆåšåˆ°ä¸è¿”å›æ•°æ®ï¼Œä½†æ˜¯serverå±‚åˆèƒ½æŒ‰è¡Œç»Ÿè®¡å‘¢ã€‚","like_count":0},{"had_liked":false,"id":125897,"user_name":"Geek_544e36","can_delete":false,"product_type":"c1","uid":1450625,"ip_address":"","ucode":"AE7D01F2BA3D65","user_header":"https://static001.geekbang.org/account/avatar/00/16/22/81/3115e3eb.jpg","comment_is_top":false,"comment_ctime":1566269423,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1566269423","product_id":100020801,"comment_content":"å…ˆæ’å…¥æ“ä½œè®°å½•ï¼Œå†æ›´æ–°è®¡æ•°è¡¨ã€‚å› ä¸ºè®¡æ•°è¡¨æ›´æ–°æ¶‰åŠè¡Œé”ç«äº‰ã€‚åº”è¯¥å°½é‡æŠŠæœ‰è¡Œé”ç«äº‰çš„è¯­å¥æ”¾åœ¨åé¢ï¼Œä»¥å‡å°‘é”å ç”¨æ—¶é—´ï¼Œä»è€Œæé«˜å¹¶å‘åº¦ã€‚","like_count":0},{"had_liked":false,"id":121532,"user_name":"æ¡","can_delete":false,"product_type":"c1","uid":1203836,"ip_address":"","ucode":"6F8679175256E3","user_header":"https://static001.geekbang.org/account/avatar/00/12/5e/7c/94af3f5e.jpg","comment_is_top":false,"comment_ctime":1565154044,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1565154044","product_id":100020801,"comment_content":"è€å¸ˆï¼Œmysqlå¯¹count(*)çš„ä¼˜åŒ–æ˜¯ä»å“ªä¸ªç‰ˆæœ¬å¼•å…¥çš„?","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":158110,"discussion_content":"5.7ä¹‹åï¼Œä¹‹å‰count(1)å¿«","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1580551797,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":119868,"user_name":"å¼ ç‚","can_delete":false,"product_type":"c1","uid":1249512,"ip_address":"","ucode":"E0AFA940BEAC1C","user_header":"https://static001.geekbang.org/account/avatar/00/13/10/e8/172b5915.jpg","comment_is_top":false,"comment_ctime":1564715227,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1564715227","product_id":100020801,"comment_content":"â€œçœ‹åˆ°è¿™é‡Œï¼Œä½ ä¸€å®šä¼šè¯´ï¼Œä¼˜åŒ–å™¨å°±ä¸èƒ½è‡ªå·±åˆ¤æ–­ä¸€ä¸‹å—ï¼Œä¸»é”® idè‚¯å®šéç©ºå•Šï¼Œä¸ºä»€ä¹ˆä¸èƒ½æŒ‰ç…§ count(*) æ¥å¤„ç†ï¼Œå¤šä¹ˆç®€å•çš„ä¼˜åŒ–å•Šã€‚â€<br><br>è€å¸ˆï¼Œè¿™é‡Œçš„å‡è®¾æ¨ç†ï¼Œcount(*)åº”è¯¥æ˜¯count(id)å§ï¼Ÿæˆ–è€…æ”¹æˆcount(1)?è¿™æ ·æ‰ç¬¦åˆæœ‰äº›åŒå­¦çš„æ¨ç†æ€ç»´å§","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":158111,"discussion_content":"ä¸æ˜¯å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580551820,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":114183,"user_name":"lmtoo","can_delete":false,"product_type":"c1","uid":1133918,"ip_address":"","ucode":"FCD5B9C941D448","user_header":"https://static001.geekbang.org/account/avatar/00/11/4d/5e/c5c62933.jpg","comment_is_top":false,"comment_ctime":1563246800,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1563246800","product_id":100020801,"comment_content":"SELECT SQL_CALC_FOUND_ROWS * FROM (table ) temp LIMIT :offset , :pageSize ï¼›SQL_CALC_FOUND_ROWS è¿™ä¸ªæ˜¯ä¸æ˜¯å°±ä¸ç”¨é‡æ–°å‘èµ·è®¡ç®—æ€»æ•°çš„æŸ¥è¯¢äº†","like_count":0},{"had_liked":false,"id":111174,"user_name":"yhui","can_delete":false,"product_type":"c1","uid":1512714,"ip_address":"","ucode":"1AAAF47E41FFB8","user_header":"https://static001.geekbang.org/account/avatar/00/17/15/0a/c450e565.jpg","comment_is_top":false,"comment_ctime":1562498108,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1562498108","product_id":100020801,"comment_content":"å¾ˆå¤šæƒ…å†µä¸‹ï¼Œåªè¦ä¸€ä¸ªé¢„ä¼°çš„æ€»æ•°å°±è¡Œäº† æ˜¯ä¸æ˜¯ç”¨ explain æ¥åˆ†æ rowsè¡Œæ•°æ¥è·å¾—æ€»è¡Œæ•°ä½¿ç”¨å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":158113,"discussion_content":"ä½ è¿™æ ·ä¼šè¢«è€æ¿åŠæ‰“çš„ï¼Œå“ˆå“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580551856,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1453053,"avatar":"https://static001.geekbang.org/account/avatar/00/16/2b/fd/7013289d.jpg","nickname":"æ¸©æ•…è€ŒçŸ¥æ–°å¯ä»¥ä¸ºå¸ˆçŸ£","note":"","ucode":"FADCDFA9F9E5E8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":121091,"discussion_content":"è®°å¾—è€å¸ˆä¹‹å‰çš„ä¸€ä¸ªä¾‹å­å—ï¼Œæœ¬æ¥10000ï¼Œexplainå‡º3ä¸‡å¤šã€‚ã€‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578311215,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":110463,"user_name":"ç‹å¿—æ°","can_delete":false,"product_type":"c1","uid":1074791,"ip_address":"","ucode":"DAC170C33EDDCF","user_header":"https://static001.geekbang.org/account/avatar/00/10/66/67/85709c6b.jpg","comment_is_top":false,"comment_ctime":1562283932,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1562283932","product_id":100020801,"comment_content":"è¦æ˜¯åœ¨å¤§è¡¨ä¸­å¤šæ¡ä»¶æŸ¥è¯¢æ€»æ•°å‘¢ï¼Ÿè¿™ä¸ªåˆè¯¥å¦‚ä½•ä¼˜åŒ–ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":158114,"discussion_content":"åƒè¿™ç§åŠ æ¡ä»¶çš„ï¼Œä¸€èˆ¬å°±åªèƒ½ç›´æ¥æ‰§è¡Œè®¡æ•°äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580551905,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":90687,"user_name":"èµµé‡‘å¸…","can_delete":false,"product_type":"c1","uid":1357392,"ip_address":"","ucode":"158A05AA523990","user_header":"https://static001.geekbang.org/account/avatar/00/14/b6/50/99bfa911.jpg","comment_is_top":false,"comment_ctime":1556610089,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1556610089","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæ‚¨å¥½ï¼š<br>    åœ¨ç°å®çš„ä¸šåŠ¡å½“ä¸­ï¼ŒæŸ¥è¯¢count(*)å¤§éƒ¨åˆ†éƒ½æ˜¯æŒ‰ç…§æ¡ä»¶ï¼Œå¹¶ä¸”è¿è¡¨æŸ¥è¯¢çš„ï¼Œè¿™ç§æƒ…å†µä¸èƒ½å†åƒæ‚¨è¯´çš„é‚£ç§æ”¾åœ¨redisæˆ–è€…æ•°æ®åº“ä¸­äº†å§ï¼Ÿæ‚¨è¯´çš„é‚£ç§æ˜¯æ•´å¼ è¡¨çš„è®¡æ•°æ”¾åœ¨å•ç‹¬çš„æ•°æ®è¡¨ä¸­å§ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":158115,"discussion_content":"åƒè¿™ç§åŠ æ¡ä»¶çš„ï¼Œä¸€èˆ¬å°±åªèƒ½ç›´æ¥æ‰§è¡Œè®¡æ•°äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580551921,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":88813,"user_name":"~ç²ç²ç²~å­~å“¥~","can_delete":false,"product_type":"c1","uid":1302741,"ip_address":"","ucode":"89379F3A0427EA","user_header":"https://static001.geekbang.org/account/avatar/00/13/e0/d5/7485e51f.jpg","comment_is_top":false,"comment_ctime":1556006979,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1556006979","product_id":100020801,"comment_content":"è€å¸ˆæ‚¨å¥½,äºŒåˆ·æ—¶çœ‹äº†å­¦å®Œè¿˜æ˜¯æœ‰äº›ç–‘é—®<br><br>1.count(*)å’Œcount(1)éƒ½æ˜¯ä¸å–å€¼,åŒºåˆ«åªæ˜¯count(1)è¿”å›serverå±‚éœ€è¦åˆ¤æ–­æ˜¯å¦ä¸ä¸ºç©º?<br><br>2.å¦‚æœè¡¨é‡Œæœ‰å”¯ä¸€ç´¢å¼•,ä¹Ÿä¼šæƒ³ä¸»é”®ç´¢å¼•åˆ¤æ–­ä¸ä¸ºç©ºå—? åªæœ‰count(*)æ‰ä¸ä¼šåšéç©ºåˆ¤æ–­?<br><br>3.æ–‡ç« é‡Œcount(ä¸»é”® id),æˆ‘ç†è§£æ˜¯idæ˜¯ä¸»é”®. é‚£count(id)è¿˜ä¼šèµ°åˆ«çš„ç´¢å¼•å—?æ¯”å¦‚é•¿åº¦æœ€å°çš„ç´¢å¼•? ä¸ªäººæ„Ÿè§‰åªèµ°idç´¢å¼•, èµ°åˆ«çš„ç´¢å¼•æ˜¯count(å­—æ®µ)æ¥åˆ¤æ–­è¿™ä¸ªå­—æ®µæ˜¯å¦æœ‰ç´¢å¼•","like_count":0},{"had_liked":false,"id":87922,"user_name":"é€—é€¼å¸ˆçˆ¶","can_delete":false,"product_type":"c1","uid":1017863,"ip_address":"","ucode":"ECC2D82F83CBE6","user_header":"https://static001.geekbang.org/account/avatar/00/0f/88/07/7804f4cc.jpg","comment_is_top":false,"comment_ctime":1555754510,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"1555754510","product_id":100020801,"comment_content":"å®é™…ä¸šåŠ¡é‡Œè¿˜æ˜¯å¸¦whereæ¡ä»¶çš„åœºæ™¯æ¯”è¾ƒå¤šå‘€ï¼Œæ¯”å¦‚åˆ—è¡¨è¿‡æ»¤ï¼Œç„¶åç»™æ€»æ¡æ•°ï¼Œåˆ†é¡µï¼Œè¿™ç§åœºæ™¯æ˜¯ä¸æ˜¯å°±åªèƒ½å¼ºè¡Œcount(*)äº†ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":158116,"discussion_content":"åƒè¿™ç§åŠ æ¡ä»¶çš„ï¼Œä¸€èˆ¬å°±åªèƒ½ç›´æ¥æ‰§è¡Œè®¡æ•°äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580551950,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":84250,"user_name":"Lucus","can_delete":false,"product_type":"c1","uid":1198800,"ip_address":"","ucode":"CE8EB70CB9D9F1","user_header":"https://static001.geekbang.org/account/avatar/00/12/4a/d0/d319c44a.jpg","comment_is_top":false,"comment_ctime":1554812848,"is_pvip":false,"replies":[{"id":"30753","content":"å¤§å®¶æ³¨æ„äº†ï¼Œä¸‹æ¬¡é¢è¯•å®˜å¦‚æœæ˜¯å¾å…ˆç”Ÿï¼Œè¦å¤ä¹ è¿™ä¸ªé¢˜ï¼Œæ‰‹åŠ¨è°ƒçš®ğŸ˜","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1555147789,"ip_address":"","comment_id":84250,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1554812848","product_id":100020801,"comment_content":"ä¸ªäººæ„Ÿè§‰count(*),count(1),count(id)å“ªä¸ªæ•ˆç‡æ›´å¥½æ˜¯ä¸ªå¾ˆå¥½çš„é¢è¯•é¢˜","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446293,"discussion_content":"å¤§å®¶æ³¨æ„äº†ï¼Œä¸‹æ¬¡é¢è¯•å®˜å¦‚æœæ˜¯å¾å…ˆç”Ÿï¼Œè¦å¤ä¹ è¿™ä¸ªé¢˜ï¼Œæ‰‹åŠ¨è°ƒçš®ğŸ˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555147789,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":81708,"user_name":"æ€å¿†","can_delete":false,"product_type":"c1","uid":1199451,"ip_address":"","ucode":"26B307A6C4F35C","user_header":"https://static001.geekbang.org/account/avatar/00/12/4d/5b/3ed7df22.jpg","comment_is_top":false,"comment_ctime":1554015504,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1554015504","product_id":100020801,"comment_content":"å…ˆæ›´æ–°æ•°æ®è¡Œæ•°ï¼Œåœ¨è¿›è¡Œä¸šåŠ¡æ•°æ®çš„ä¿®æ”¹ã€‚ç›®çš„æ˜¯åœ¨å¯é‡å¤è¯»éš”ç¦»çº§åˆ«ä¸‹å¯ä»¥å‡å°‘è¡Œé”ç«äº‰ï¼Œé¿å…äº§ç”Ÿæ­»é”","like_count":0},{"had_liked":false,"id":81495,"user_name":"Eason Tai","can_delete":false,"product_type":"c1","uid":1200676,"ip_address":"","ucode":"4707577CC9C9E9","user_header":"https://static001.geekbang.org/account/avatar/00/12/52/24/bd63c4de.jpg","comment_is_top":false,"comment_ctime":1553927006,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1553927006","product_id":100020801,"comment_content":"è¿™è¾¹çš„æœ€åé€Ÿåº¦æ¯”è¾ƒï¼Œä¼šä¸ä¼šæœ‰ä¸€äº›é—®é¢˜ã€‚æ¯”å¦‚ï¼Œcount(*) ä¼šè¯»å–æ•´è¡Œæ•°æ®ï¼Œä½†æ˜¯ï¼Œä¸ä¼šè¿”å›æ•´è¡Œæ•°æ®count(primaryid)ä¼šè¯»å–ä¸»é”®åˆ—ï¼Œåˆ¤æ–­ä¸€æ¬¡ä¸»é”®ä¸ä¸ºç©ºï¼Œç›´æ¥è¿”å›ä¸»é”®å€¼ã€‚é‚£ä¹ˆï¼Œæˆ‘æƒ³ï¼Œå¦‚æœåˆ—70ä¸ªçš„æ—¶å€™ï¼Œåº”è¯¥æ˜¯count(primaryid)æ•ˆæœæ›´å¥½ä¸€äº›å§ã€‚<br><br>ä¸çŸ¥é“è®¤çŸ¥æ˜¯å¦æœ‰è¯¯ã€‚è¯·æŠ½ç©ºæŒ‡æ­£","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":158118,"discussion_content":"è¿˜æ˜¯count(*)æ•ˆæœå¥½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580552018,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1200676,"avatar":"https://static001.geekbang.org/account/avatar/00/12/52/24/bd63c4de.jpg","nickname":"Eason Tai","note":"","ucode":"4707577CC9C9E9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":252820,"discussion_content":"è¿™ä¸ªç»“è®ºæ˜¯çŒœæµ‹è¿˜æ˜¯æœ‰ä¾æ®ï¼Ÿæœ‰åšè¿›ä¸€æ­¥éªŒè¯å—ï¼Ÿæˆ‘åœ¨ä¸€ä¸ª26gå•è¡¨è¯•äº†è¯•ã€‚count(id)æ˜¾ç„¶æ˜¯å¿«çš„ã€‚å› ä¸ºï¼Œç´¢å¼•ä¹Ÿæ˜¯è¡¨ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588180312,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":158118,"ip_address":""},"score":252820,"extra":""}]}]},{"had_liked":false,"id":77104,"user_name":"é˜³æ˜","can_delete":false,"product_type":"c1","uid":1052818,"ip_address":"","ucode":"BA0F5AF0E5A27A","user_header":"https://static001.geekbang.org/account/avatar/00/10/10/92/760f0964.jpg","comment_is_top":false,"comment_ctime":1552834386,"is_pvip":true,"discussion_count":2,"race_medal":0,"score":"1552834386","product_id":100020801,"comment_content":"æ‰€ä»¥ç»“è®ºæ˜¯ï¼šæŒ‰ç…§æ•ˆç‡æ’åºçš„è¯ï¼Œcount(å­—æ®µ)&lt;count(ä¸»é”® id)&lt;count(1)â‰ˆcount(*)ï¼Œæ‰€ä»¥æˆ‘å»ºè®®ä½ ï¼Œå°½é‡ä½¿ç”¨ count(*)ã€‚è¿™ä¸ªä¸å¤ªç†è§£ï¼Œä½¿ç”¨countï¼ˆAï¼‰ç»Ÿè®¡ï¼Œå¹¶ä¸”Aå­—æ®µæœ‰ç´¢å¼•ï¼Œè€Œä¸”æ˜¯æœ€å°çš„ä¸€ä¸ªç´¢å¼•æ ‘ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œcountï¼ˆAï¼‰çš„æ•ˆç‡ï¼Œåº”è¯¥å¤§äºcountï¼ˆä¸»é”®Idï¼‰çš„æ•ˆç‡å§","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":158121,"discussion_content":"ä¸æ˜¯ï¼Œcount(id) ä¹Ÿæ˜¯èµ°æ™®é€šç´¢å¼• ï¼Œæ™®é€šç´¢å¼•æ¯”ä¸»é”®ç´¢å¼•è¦å°ï¼Œéå†èµ·æ¥æ›´å¿«ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580552112,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1086093,"avatar":"https://static001.geekbang.org/account/avatar/00/10/92/8d/ab469ad5.jpg","nickname":"é»„å¼º","note":"","ucode":"20231AC29CFD53","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":116,"discussion_content":"å¦‚æœä¸æ˜¯å”¯ä¸€ç´¢å¼•ï¼Œä¸€ä¸ªç´¢å¼•é¡¹å¯èƒ½ä¼šå¤šä¸ªè®°å½•çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561110840,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":71420,"user_name":"å“ˆå“ˆå“ˆ","can_delete":false,"product_type":"c1","uid":1248876,"ip_address":"","ucode":"C40ABE7161EFAE","user_header":"https://static001.geekbang.org/account/avatar/00/13/0e/6c/1f3b1372.jpg","comment_is_top":false,"comment_ctime":1551338537,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1551338537","product_id":100020801,"comment_content":"èµğŸ‘ğŸ»","like_count":0},{"had_liked":false,"id":68898,"user_name":"èƒ¡å°çŠ","can_delete":false,"product_type":"c1","uid":1308031,"ip_address":"","ucode":"A367C885310F7E","user_header":"https://static001.geekbang.org/account/avatar/00/13/f5/7f/81b3f5ec.jpg","comment_is_top":false,"comment_ctime":1550626664,"is_pvip":false,"replies":[{"id":"24472","content":"å—¯ï¼Œè¿™ç§ç‰¹åˆ«éš¾åŠï¼Œä¸»è¦æ˜¯çœ‹çœ‹èƒ½ä¸èƒ½é€šè¿‡ä¼˜åŒ–ï¼Œç”¨ç´¢å¼•æå‡æ¡ä»¶çš„è¿‡æ»¤æ€§ï¼Œç´¢å¼•å‘½ä¸­ä»¥åå°‘æ‰«æäº›è¡Œ","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1550640808,"ip_address":"","comment_id":68898,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1550626664","product_id":100020801,"comment_content":"å¦‚æœæ˜¯å¤šè¡¨å…³è”å¹¶æœ‰å¾ˆå¤šwhereæ¡ä»¶æŸ¥è¯¢ï¼Œæ­¤æ—¶countè™½ç„¶èµ°äº†ç´¢å¼•ï¼Œä½†è¿˜æ˜¯ç‰¹åˆ«æ…¢ï¼Œå…·ä½“ä¸šåŠ¡æ˜¯é¡µé¢æŸ¥è¯¢æ¡ä»¶ä¸æ˜¾ç¤ºéœ€è¦å…³è”è¿™äº›è¡¨ï¼Œå¹¶åšæ¡ä»¶æŸ¥è¯¢","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":439864,"discussion_content":"å—¯ï¼Œè¿™ç§ç‰¹åˆ«éš¾åŠï¼Œä¸»è¦æ˜¯çœ‹çœ‹èƒ½ä¸èƒ½é€šè¿‡ä¼˜åŒ–ï¼Œç”¨ç´¢å¼•æå‡æ¡ä»¶çš„è¿‡æ»¤æ€§ï¼Œç´¢å¼•å‘½ä¸­ä»¥åå°‘æ‰«æäº›è¡Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1550640808,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":68467,"user_name":"huolang","can_delete":false,"product_type":"c1","uid":1346708,"ip_address":"","ucode":"FDC4A6B6151C5E","user_header":"https://static001.geekbang.org/account/avatar/00/14/8c/94/5282994c.jpg","comment_is_top":false,"comment_ctime":1550503938,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1550503938","product_id":100020801,"comment_content":"è€å¸ˆä½ å¥½ï¼Œæˆ‘æœ‰ä¸€ä¸ªæ¡ˆä¾‹éœ€è¦è¯·æ•™ï¼Œæœ‰ä»¥ä¸‹è¿™æ ·ä¸€ä¸ªè¡¨<br>CREATE TABLE `cameras` (<br>    `id` int NOT NULL AUTO_INCREMENT,<br>    `uuid` varchar(64) NOT NULL,<br>    `zone_uuid` varchar(64) NOT NULL,<br>    `device_id` varchar(256) NOT NULL,<br>    `platform_id` int DEFAULT &#39;0&#39;,<br>    PRIMARY KEY (`id`),<br>    UNIQUE KEY `index_cameras_on_zone_uuid_and_uuid` (`zone_uuid`, `uuid`),<br>    UNIQUE KEY `index_cameras_on_platform_id_and_device_id` (`platform_id`, `device_id`)<br>) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;<br><br>explain select count(1) from cameras where zone_uuid = &quot;xxx&quot;æ—¶ï¼Œextra æ˜¾ç¤ºçš„æ˜¯&quot;using where;using index&quot;ï¼Œ ç”¨ä¸Šäº†å”¯ä¸€ç´¢å¼•`index_cameras_on_zone_uuid_and_uuid`ã€‚<br><br>explain select count(1) from cameras where platform_id = 1æ—¶ï¼Œ extraæ˜¾ç¤ºçš„æ˜¯using indexï¼Œç”¨ä¸Šäº†å”¯ä¸€ç´¢å¼•`index_cameras_on_platform_id_and_device_id`ã€‚<br><br>ç„¶åä½¿ç”¨platform_idä½œä¸ºæ¡ä»¶select countæ—¶æ¯”ä½¿ç”¨zone_uuidä½œä¸ºæ¡ä»¶select countæ—¶è¦å¿«ä¸å°‘ï¼Œè¿™åº”è¯¥æ˜¯å› ä¸ºä½¿ç”¨zone_uuidä½œä¸ºæ¡ä»¶select countæ—¶éœ€è¦&quot;using where&quot;ã€‚<br><br>ä½†æ˜¯ä¸ºä»€ä¹ˆä½¿ç”¨zone_uuidä½œä¸ºæ¡ä»¶select countæ—¶éœ€è¦&quot;using where&quot;å‘¢ï¼Ÿæˆ‘æ²¡æœ‰æƒ³æ˜ç™½ï¼Œçƒ¦è¯·è€å¸ˆæŒ‡æ•™ä¸€ä¸‹ã€‚","like_count":0},{"had_liked":false,"id":63707,"user_name":"å¼ æ±‰æ¡‚-ä¸œè","can_delete":false,"product_type":"c1","uid":1116277,"ip_address":"","ucode":"38657ABA59382A","user_header":"https://static001.geekbang.org/account/avatar/00/11/08/75/512b9f26.jpg","comment_is_top":false,"comment_ctime":1548470978,"is_pvip":false,"replies":[{"id":"22537","content":"å¦‚æœæ”¾åœ¨äº‹åŠ¡é‡Œé¢ï¼Œå…¶å®å¯¹å…¶ä»–çº¿ç¨‹æ¥è¯´æ˜¯ä¸€æ ·çš„å“¦ ï¼ˆè¿™ä¸¤ä¸ªæ›´æ–°æ˜¯åŒæ—¶å‡ºç°çš„ï¼‰ï¼Œæ‰€ä»¥å…ˆåå…³ç³»å€’ä¸æ˜¯ä¸»è¦çš„è€ƒå¯Ÿå› ç´ ","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1548484028,"ip_address":"","comment_id":63707,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1548470978","product_id":100020801,"comment_content":"æˆ‘è§‰å¾—åº”è¯¥å…ˆæ’å…¥å†æ›´æ–°è®¡æ•°è¡¨ã€‚å› ä¸ºå…ˆæœ‰è®°å½•ï¼Œå†æœ‰ç»Ÿè®¡æ•°ã€‚è¿™æ ·åšé€»è¾‘ä¸Šæ›´åˆç†","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437689,"discussion_content":"å¦‚æœæ”¾åœ¨äº‹åŠ¡é‡Œé¢ï¼Œå…¶å®å¯¹å…¶ä»–çº¿ç¨‹æ¥è¯´æ˜¯ä¸€æ ·çš„å“¦ ï¼ˆè¿™ä¸¤ä¸ªæ›´æ–°æ˜¯åŒæ—¶å‡ºç°çš„ï¼‰ï¼Œæ‰€ä»¥å…ˆåå…³ç³»å€’ä¸æ˜¯ä¸»è¦çš„è€ƒå¯Ÿå› ç´ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548484028,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":55339,"user_name":"å¯‚å¯çº¢å°˜","can_delete":false,"product_type":"c1","uid":1080886,"ip_address":"","ucode":"C17D389D051E51","user_header":"https://static001.geekbang.org/account/avatar/00/10/7e/36/7c5503d9.jpg","comment_is_top":false,"comment_ctime":1546138422,"is_pvip":false,"replies":[{"id":"20054","content":"è¿˜æ˜¯ä¸è¡Œå“¦ã€‚ä½ çœ‹ä¸€ä¸‹æˆ‘ä»¬ä¾‹å­ä¸­çš„åœºæ™¯","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1546171423,"ip_address":"","comment_id":55339,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1546138422","product_id":100020801,"comment_content":"æ’å…¥æ•°æ®çš„æ—¶å€™åŠ å…¥åˆ†å¸ƒå¼é”ï¼Œäº‹åŠ¡å®Œæˆåä¸”redisåŠ ä¸€åå†é‡Šæ”¾é”ï¼›è·å–è®¡æ•°çš„æ—¶å€™ä¹ŸåŒæ ·è·å–ç›¸åŒçš„åˆ†å¸ƒå¼é”ã€‚è¿™æ ·æ˜¯ä¸æ˜¯èƒ½è§£å†³redisè®¡æ•°ä¸å‡†ç¡®çš„é—®é¢˜ã€‚","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":434745,"discussion_content":"è¿˜æ˜¯ä¸è¡Œå“¦ã€‚ä½ çœ‹ä¸€ä¸‹æˆ‘ä»¬ä¾‹å­ä¸­çš„åœºæ™¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1546171423,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":55206,"user_name":"Ruian","can_delete":false,"product_type":"c1","uid":1318776,"ip_address":"","ucode":"39112092A920F1","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIyn6s0CNx9F9Uu4nia6z7ZldUo8XdXEF4ia4ojfTRCvMT8IZgjRcpFulYqZjq4IvtrE5yYfzpgzMWA/132","comment_is_top":false,"comment_ctime":1546066246,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1546066246","product_id":100020801,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œä¸Šæ¬¡æˆ‘è¿™è¾¹é—®äº†æ‚¨ä¸€ä¸ªé—®é¢˜ï¼Œæ‚¨è¿™è¾¹åšäº†å›å¤ï¼Œæˆ‘è¿™è¾¹åšäº†è¡¥å……å’Œå›ç­”ï¼Œå¹¶æœ‰æ–°çš„ç–‘æƒ‘ï¼Œå†æ¬¡è¯·æ•™ä¸‹è€å¸ˆã€‚ã€‚<br><br>è€å¸ˆï¼Œæˆ‘æœ‰ä¸€ä¸ªé—®é¢˜è¯·æ•™ä¸‹æ‚¨ã€‚æˆ‘çš„mysqlæ•°æ®åº“ æœ‰ä¸€å¼ è¡¨project_des (850ä¸‡æ•°æ®) count(1) åªè¦0.05s å’Œä»è¡¨projectï¼ˆ6500æ¡æ•°æ®ï¼‰å…³è”åéœ€è¦15s æŸ¥çœ‹æ‰§è¡Œè®¡åˆ’å‘ç°éƒ½èµ°ç´¢å¼•äº†ã€‚ä¸çŸ¥é“ä¸ºå•¥è¿™ä¹ˆæ…¢ï¼Ÿ<br>æŸ¥è¯¢è¯­å¥ select count(1) from project_des a,project b where a.project_id=b.id æˆ‘æ¢exists å’Œin ä¹Ÿè¿™ä¹ˆæ…¢<br>2018-12-28<br>î˜ˆ ä½œè€…å›å¤<br>ä½ è¿™ä¸ªæ˜¯ç¬›å¡å°”ç§¯è‚¯å®šæ…¢çš„â€¦ä½ çš„ä¸šåŠ¡éœ€æ±‚æ˜¯å•¥ï¼Œè¿™ä¸ªè¯­å¥çš„ä¸šåŠ¡æ„ä¹‰æ˜¯ä»€ä¹ˆ<br><br>ç­”ï¼šä¸šåŠ¡éœ€æ±‚æ˜¯è¿™æ ·çš„ï¼Œé¡µé¢éœ€è¦æ˜¾ç¤ºå‡ºä¸¤å¼ è¡¨å…³è”åçš„æŸäº›å­—æ®µï¼Œè¿˜éœ€è¦æ˜¾ç¤ºå…³è”åçš„æ€»æ•°ã€‚<br>      è€å¸ˆä¸Šé¢è¯´ç¬›å¡å°”ç§¯è‚¯å®šæ˜¯æ…¢çš„ï¼Œæˆ‘è¿™è¾¹æŠŠæ•°æ®å¯¼å…¥oracleæ•°æ®åº“åšäº†æ¯”è¾ƒã€‚ç»“æœå¦‚ä¸‹ï¼š<br>       è¯·æ•™è€å¸ˆmysqlä¸ºå•¥ä¼šæ¯”è¾ƒæ…¢ï¼Œè·Ÿå“ªäº›å› ç´ æœ‰å…³ï¼Ÿ<br><br><br><br>mysql ç¯å¢ƒä¸‹<br>select count(*) from project; --11616æ¡è®°å½•  0.045s<br>select count(*) from project_des; --3712995æ¡è®°å½•  0.045s<br>select count(*) from project_des a, project b where a.project_id=b.id  --3152651æ¡è®°å½•  17.71s<br>select count(*) from project_des a where a.project_id in (select b.id from project b where a.project_id=b.id) --3152651æ¡è®°å½•  17.66s<br>select count(*) from project_des a where  exists(select 1 from project b where a.project_id=b.id)  --3152651æ¡è®°å½•  42.06s<br><br><br>oracle ç¯å¢ƒä¸‹<br>select count(*) from project; --11616æ¡è®°å½•  0.04s<br>select count(*) from project_des; --3712995æ¡è®°å½•  0.16s<br>select count(*) from project_des a, project b where a.project_id=b.id  --3152651æ¡è®°å½•  0.82s<br>select count(*) from project_des a where a.project_id in (select b.id from project b where a.project_id=b.id) --3152651æ¡è®°å½•  0.93s<br>select count(*) from project_des a where  exists(select 1 from project b where a.project_id=b.id)  --3152651æ¡è®°å½•  0.91s","like_count":0},{"had_liked":false,"id":55104,"user_name":"alias cd=rm -rf","can_delete":false,"product_type":"c1","uid":1318325,"ip_address":"","ucode":"E7B27D76305B75","user_header":"https://static001.geekbang.org/account/avatar/00/14/1d/b5/971261fd.jpg","comment_is_top":false,"comment_ctime":1546045099,"is_pvip":false,"replies":[{"id":"19992","content":"å¯¹çš„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1546045983,"ip_address":"","comment_id":55104,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1546045099","product_id":100020801,"comment_content":"å…ˆæ’å…¥ï¼Œåœ¨æ›´æ–°ã€‚å› ä¸ºæ›´æ–°ä¼šé”æ•°æ®å½±å“æ€§èƒ½","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":434673,"discussion_content":"å¯¹çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1546045983,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":54676,"user_name":"æ¯’è‰","can_delete":false,"product_type":"c1","uid":1026090,"ip_address":"","ucode":"DBD67DD3517190","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a8/2a/316b8f17.jpg","comment_is_top":false,"comment_ctime":1545930890,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1545930890","product_id":100020801,"comment_content":"ä¸€ç›´ç”¨count(id)ï¼Œè‡ªä»¥ä¸ºæ•ˆç‡æ¯”*é«˜å‘¢ï¼Œå­¦åˆ°äº†ã€‚","like_count":0},{"had_liked":false,"id":52031,"user_name":"é£ä¸­å¥‡ç¼˜","can_delete":false,"product_type":"c1","uid":1019206,"ip_address":"","ucode":"43DE1F63483411","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8d/46/fd0bd694.jpg","comment_is_top":false,"comment_ctime":1545297776,"is_pvip":false,"replies":[{"id":"18827","content":"å—¯ï¼Œè¿™ä¸ªæ˜¯ç‰¹ä¾‹ï¼Œæ¡ä»¶å¤šï¼Œç¡®å®æ²¡æœ‰é“¶å¼¹çš„æ–¹æ¡ˆ<br>","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1545299149,"ip_address":"","comment_id":52031,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1545297776","product_id":100020801,"comment_content":"æ”¾åˆ°æ•°æ®åº“é‡Œå•ç‹¬çš„ä¸€å¼ è®¡æ•°è¡¨ Cä¹Ÿä¸æ˜¯ä¸€ä¸ªå¥½çš„æ–¹æ¡ˆï¼Œæˆ‘è¿™è¾¹å½“æ—¶æœ‰ä¸ªéœ€æ±‚æ˜¯éœ€è¦æŒ‰ç…§å„ç§æ¡ä»¶æœç´¢æ¥ç»Ÿè®¡æ€»ä¸ªæ•°çš„ï¼Œè®¡æ•°è¡¨Cä¼°è®¡ç½—åˆ—ä¸å®Œå„ç§æ¡ä»¶æœç´¢ã€‚","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":433711,"discussion_content":"å—¯ï¼Œè¿™ä¸ªæ˜¯ç‰¹ä¾‹ï¼Œæ¡ä»¶å¤šï¼Œç¡®å®æ²¡æœ‰é“¶å¼¹çš„æ–¹æ¡ˆ\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545299149,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":51576,"user_name":"æœªæ¥å·²æ¥","can_delete":false,"product_type":"c1","uid":1187130,"ip_address":"","ucode":"3A21ACFD53CB9C","user_header":"https://static001.geekbang.org/account/avatar/00/12/1d/3a/cdf9c55f.jpg","comment_is_top":false,"comment_ctime":1545202429,"is_pvip":false,"replies":[{"id":"18683","content":"å—¯å—¯ï¼Œè¿™æ˜¯ä¸€ç§å¯èƒ½çš„æƒ…å†µ","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1545215336,"ip_address":"","comment_id":51576,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1545202429","product_id":100020801,"comment_content":"ä¸çŸ¥é“æ˜¯ä¸æ˜¯è‡ªå·±ç†è§£é”™äº†ï¼šä¸ŠæœŸçš„é—®é¢˜ï¼Œæ„Ÿè§‰åº”è¯¥æ˜¯ä¸€å¼ è¡¨æ˜¯ç´§å‡‘çš„ï¼Œå¹¶ä¸”ä½¿ç”¨äº†ä¸€éƒ¨åˆ†é¢„ç•™ç©ºé—´ï¼Œç„¶åé‡å»ºè¡¨çš„æ—¶å€™ï¼Œè¿™éƒ¨åˆ†é¢„ç•™ç©ºé—´è¢«é‡æ–°è…¾å‡ºæ¥äº†ï¼Œå¤šä½™çš„æ•°æ®è¢«åŠ åˆ°æ–°çš„é¡µä¸Šï¼Œå¯¼è‡´é‡å»ºè¡¨çš„æ—¶å€™åè€Œå ç”¨äº†æ›´å¤šçš„ç©ºé—´ã€‚","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":433520,"discussion_content":"å—¯å—¯ï¼Œè¿™æ˜¯ä¸€ç§å¯èƒ½çš„æƒ…å†µ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545215336,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":50958,"user_name":"ç‹è™¹å‡¯","can_delete":false,"product_type":"c1","uid":1018862,"ip_address":"","ucode":"CA01E64E125CFF","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8b/ee/56823fd7.jpg","comment_is_top":false,"comment_ctime":1545093531,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1545093531","product_id":100020801,"comment_content":"è¿™ä¸ªredisæˆ–è€…ç”¨è¡¨å­˜æ€»æ•°çš„åŒºåˆ«ï¼Œæˆ‘è§‰å¾—åŒºåˆ«ä¸å¤§ã€‚å¦‚æœå‰è€…ä¸¤ä¸ªæ­¥éª¤èƒ½åšåˆ°ä¸€ä¸ªäº‹åŠ¡ï¼Œè·Ÿè¡¨å­˜æ²¡å•¥åŒºåˆ«ã€‚åªä¸è¿‡ç”¨åè€…å¯ä»¥æœ‰äº›å¼‚å¸¸ç­–ç•¥å·§å¦™åˆ©ç”¨mysqlè§£å†³ï¼Œå‰è€…éœ€è¦è‡ªå·±ç»´æŠ¤ï¼Œè¦æ±‚è¾ƒé«˜äº›ã€‚å½¼æ­¤çš„ä¼˜ç‚¹å…¶å®å°±æ˜¯å¯¹æ–¹çš„ç¼ºç‚¹ã€‚åœ¨ç‰¹å®šçš„åœºæ™¯ï¼Œå¯ä»¥è€ƒè™‘ç›¸åº”çš„æ–¹æ¡ˆã€‚","like_count":0},{"had_liked":false,"id":50876,"user_name":"404","can_delete":false,"product_type":"c1","uid":1313407,"ip_address":"","ucode":"2E7815DDCBA8AB","user_header":"","comment_is_top":false,"comment_ctime":1545059348,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1545059348","product_id":100020801,"comment_content":"è€å¸ˆä½ ä¸¾å¾—è¿™ä¸ªä¾‹å­æ˜¯ä¸æ˜¯å¯ä»¥å¼•ç”³å‡ºæ¥ï¼Œredis å’Œmysql å¦‚ä½•ä¿æŒæ•°æ®åŒæ­¥é—®é¢˜å‘¢ï¼Ÿè¿™ä¸ªä¹Ÿæ˜¯é¢è¯•ç»å¸¸ä¼šé—®çš„ä¸€ä¸ªé—®é¢˜å§ï¼Ÿè€å¸ˆä½ é‡åˆ°è¿‡redis å’Œmysql æ•°æ®åŒæ­¥çš„é—®é¢˜å—ï¼Ÿæ˜¯æ€ä¹ˆè§£å†³çš„ï¼Œæˆ–è€…è¯´è¿™ä¸ªé—®é¢˜æœ‰ä»€ä¹ˆå¥½çš„è§£å†³æ–¹æ¡ˆå‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":50735,"user_name":"è·¯äººå°è‰","can_delete":false,"product_type":"c1","uid":1310400,"ip_address":"","ucode":"B8AA31EB63E172","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLUhiadpGmT6ZJb0CZLm3OjHJQCkHibTkVxVibHUOyWjHS9uOhptEerFxUpHVTEvicDRueya8kEYWXZ1A/132","comment_is_top":false,"comment_ctime":1545036586,"is_pvip":false,"replies":[{"id":"18203","content":"è¿˜æ˜¯å¾—çœ‹æœºå™¨å‹åŠ›ï¼Œcount(*)æ˜¯ä¸€ä¸ªæ¯”è¾ƒç®€å•çš„é€»è¾‘ï¼Œå¯èƒ½è¿˜æ˜¯å› ä¸ºæ•°æ®åº“æ‰€åœ¨æœºå™¨å‹åŠ›å¤§äº†â€¦<br>","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1545041397,"ip_address":"","comment_id":50735,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1545036586","product_id":100020801,"comment_content":"è€å¸ˆï¼Œä½ å¥½ï¼Œä¸ƒåƒå¤šä¸‡æ¡æ•°æ®ä½¿ç”¨countï¼ˆ*ï¼‰ç”¨äº†4åˆ†é’Ÿæ­£å¸¸å—ï¼Ÿæ„Ÿè§‰å¥½æ…¢ã€‚","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":433077,"discussion_content":"è¿˜æ˜¯å¾—çœ‹æœºå™¨å‹åŠ›ï¼Œcount(*)æ˜¯ä¸€ä¸ªæ¯”è¾ƒç®€å•çš„é€»è¾‘ï¼Œå¯èƒ½è¿˜æ˜¯å› ä¸ºæ•°æ®åº“æ‰€åœ¨æœºå™¨å‹åŠ›å¤§äº†â€¦\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545041397,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":50611,"user_name":"éƒ­åˆš","can_delete":false,"product_type":"c1","uid":1292032,"ip_address":"","ucode":"22CB8ECE8E3DCA","user_header":"https://static001.geekbang.org/account/avatar/00/13/b7/00/12149f4e.jpg","comment_is_top":false,"comment_ctime":1545016416,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1545016416","product_id":100020801,"comment_content":"SELECT VERSION();<br>VERSION()  <br>-----------<br>5.6.36  <br>æœ¬åœ°æœ‰ä¸€å¼ è¡¨ï¼Œidä¸ºä¸»é”®ï¼ŒSTART_TIMEä¸Šé¢å»ºäº†ä¸€ä¸ªæ™®é€šç´¢å¼•ï¼Œæ¯”è¾ƒäº†count(*),COUNT(1)å’Œcount(ä¸»é”®)ï¼Œä¸‰è€…çš„æ‰§è¡Œè®¡åˆ’æ˜¯ä¸€æ ·ï¼Œæˆ‘è§‰å¾—ä¸‰ç§æ€§èƒ½æ²¡æœ‰åŒºåˆ«ã€‚<br>EXPLAIN<br>SELECT COUNT(*) FROM ic_order;<br>    id  select_type  TABLE          TYPE    possible_keys  KEY                         key_len  ref       ROWS  Extra        <br>------  -----------  -------------  ------  -------------  --------------------------  -------  ------  ------  -------------<br>     1  SIMPLE       ic_order  INDEX   (NULL)         IDX_ORDER_START_TIME  6        (NULL)  109908  USING INDEX  <br><br>EXPLAIN<br>SELECT COUNT(id) FROM ic_order;<br>    id  select_type  TABLE          TYPE    possible_keys  KEY                         key_len  ref       ROWS  Extra        <br>------  -----------  -------------  ------  -------------  --------------------------  -------  ------  ------  -------------<br>     1  SIMPLE       ic_order  INDEX   (NULL)         IDX_ORDER_START_TIME  6        (NULL)  109908  USING INDEX  <br>EXPLAIN<br>SELECT COUNT(1) FROM ic_order;<br>    id  select_type  TABLE          TYPE    possible_keys  KEY                         key_len  ref       ROWS  Extra        <br>------  -----------  -------------  ------  -------------  --------------------------  -------  ------  ------  -------------<br>     1  SIMPLE       ic_order  INDEX   (NULL)         IDX_ORDER_START_TIME  6        (NULL)  109908  USING INDEX  <br>","like_count":0},{"had_liked":false,"id":50606,"user_name":"éƒ­åˆš","can_delete":false,"product_type":"c1","uid":1292032,"ip_address":"","ucode":"22CB8ECE8E3DCA","user_header":"https://static001.geekbang.org/account/avatar/00/13/b7/00/12149f4e.jpg","comment_is_top":false,"comment_ctime":1545015897,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1545015897","product_id":100020801,"comment_content":"Oracleçš„ç´¢å¼•ä¸ä¼šå­˜nullå€¼ï¼ŒMySQLä¼šå­˜å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":50398,"user_name":"è‡§å¤©éœ¸","can_delete":false,"product_type":"c1","uid":1302804,"ip_address":"","ucode":"F53FB15E7BD17A","user_header":"https://static001.geekbang.org/account/avatar/00/13/e1/14/006e8b9b.jpg","comment_is_top":false,"comment_ctime":1544966506,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1544966506","product_id":100020801,"comment_content":"ä»å¹¶å‘ç³»ç»Ÿæ€§èƒ½çš„è§’åº¦è€ƒè™‘ï¼Œåœ¨è¿™ä¸ªäº‹åŠ¡åºåˆ—é‡Œï¼Œåº”è¯¥å…ˆæ›´æ–°è®¡æ•°è¡¨ã€‚å› ä¸ºè®¡æ•°è¡¨åªæœ‰ä¸€æ¡è®°å½•ï¼Œæˆ–å¾ˆå°‘å‡ æ¡è®°å½•ï¼Œç”±äºç»å¸¸è¢«updateï¼Œæ‰€ä»¥å¯¹åº”çš„æ•°æ®å—è‚¯å®šè¢«cacheåœ¨å†…å­˜ä¸­ï¼Œè¿™æ ·ï¼Œæ¯æ¬¡æ›´æ–°è¿™æ¡è®°å½•æ—¶åªéœ€æ›´æ–°å†…å­˜å—ï¼Œä»£ä»·å¾ˆå°ã€‚","like_count":0},{"had_liked":false,"id":50277,"user_name":"WL","can_delete":false,"product_type":"c1","uid":1173771,"ip_address":"","ucode":"6277DCD776B87E","user_header":"https://static001.geekbang.org/account/avatar/00/11/e9/0b/1171ac71.jpg","comment_is_top":false,"comment_ctime":1544942363,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1544942363","product_id":100020801,"comment_content":"æ€è€ƒé¢˜: æˆ‘è®¤ä¸ºåº”è¯¥æ˜¯å…ˆæ’å…¥, å†æ›´æ–°Cè¡¨, å› ä¸ºCè¡¨å¯èƒ½ä¼šè®°å½•åº“ä¸­æ‰€æœ‰è¡¨çš„æ€»è¡Œæ•°, ä»»ä½•ä¸€å¼ è¡¨æœ‰æ’å…¥éƒ½ä¼šå¯¼è‡´Cè¡¨æ›´æ–°, æ‰€ä»¥Cè¡¨ä¼šæ¯”è¾ƒå®¹æ˜“å‡ºç°ç«äº‰å…³ç³», æ‰€ä»¥å¯¹Cè¡¨çš„æ›´æ–°æ“ä½œåº”è¯¥æ›´åé¢çš„è·å¾—é”.","like_count":0},{"had_liked":false,"id":50246,"user_name":"è·¯è¿‡","can_delete":false,"product_type":"c1","uid":1316401,"ip_address":"","ucode":"7152C19ED024CC","user_header":"https://static001.geekbang.org/account/avatar/00/14/16/31/ae8adf82.jpg","comment_is_top":false,"comment_ctime":1544931711,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1544931711","product_id":100020801,"comment_content":"æˆ‘åœ¨æœåŠ¡å™¨MySQL5.7.17ä¸Šï¼Œä½¿ç”¨ç¬¬10æ¬¡è¯¾ä¸­çš„å­˜å‚¨è¿‡ç¨‹calldata()å‘è¡¨tä¸­å†™å…¥æ•°æ®æ—¶ï¼Œç”¨å¦å¤–ä¸€ä¸ªmysqlå®¢æˆ·ç«¯è¿æ¥åˆ°MySQLä¸Šï¼Œselect * from tå¯ä»¥çœ‹åˆ°è¡¨tä¸­çš„æ•°æ®ä¸€ç›´åœ¨å¢åŠ ã€‚æˆ‘æŸ¥çœ‹éš”ç¦»çº§åˆ«æ˜¯RRï¼Œä¸åŒsessionï¼Œä¸æ˜¯è¦ç­‰åˆ°calldata()ç»“æŸåæ‰èƒ½çœ‹åˆ°æ•°æ®ä¹ˆï¼Ÿ<br>å¦å¤–ï¼Œæˆ‘åœ¨æ‰§è¡Œcalldata()è¿‡ç¨‹ä¸­ï¼Œä½¿ç”¨pkillç›´æ¥ç»“æŸmysqldã€‚é‡å¯MySQLåï¼Œå‘ç°è¡¨tä¸­å·²ç»è¢«æ’å…¥äº†æ•°æ®ï¼Œæ„Ÿè§‰æ²¡æœ‰æ‰§è¡Œå®Œçš„äº‹åŠ¡calldata()å¹¶æ²¡æœ‰å›æ»šã€‚<br>æˆ‘ å†™å…¥æ•°æ®çš„MySQLæ˜¯masterï¼Œé€šè¿‡GTIDå¤åˆ¶åˆ°slaveã€‚åœ¨slaveä¸Šæ‰§è¡Œshow processlistï¼Œæç¤ºå¦‚ä¸‹å†…å®¹ï¼š<br>Waiting for dependent transaction to commit<br>æ­¤æ—¶ï¼Œmasterå’Œslaveä¸Šè¡¨tçš„æ•°æ®ä¸ä¸€è‡´ã€‚å¹¶ä¸”æŸ¥çœ‹show slave status,ä¹Ÿæç¤ºç›¸åŒçš„å†…å®¹ï¼š<br>Slave_SQL_Running_State: Waiting for dependent transaction to commit<br>å¦å¤–ï¼Œmasterå’Œslaveä¹‹é—´ä¹Ÿæ— æ³•è¿›è¡Œæ•°æ®åŒæ­¥äº†ã€‚<br>è¯·è€å¸ˆè§£æƒ‘ï¼Œæ„Ÿè°¢ï¼","like_count":0},{"had_liked":false,"id":50243,"user_name":"è·¯è¿‡","can_delete":false,"product_type":"c1","uid":1316401,"ip_address":"","ucode":"7152C19ED024CC","user_header":"https://static001.geekbang.org/account/avatar/00/14/16/31/ae8adf82.jpg","comment_is_top":false,"comment_ctime":1544931456,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1544931456","product_id":100020801,"comment_content":"æˆ‘åœ¨æœåŠ¡å™¨MySQL5.7.17ä¸Šï¼Œä½¿ç”¨ç¬¬10æ¬¡è¯¾ä¸­çš„å­˜å‚¨è¿‡ç¨‹calldata()å‘è¡¨tä¸­å†™å…¥æ•°æ®æ—¶ï¼Œç”¨å¦å¤–ä¸€ä¸ªmysqlå®¢æˆ·ç«¯è¿æ¥åˆ°MySQLä¸Šï¼Œå¯ä»¥çœ‹åˆ°è¡¨tä¸­çš„æ•°æ®ä¸€ç›´åœ¨å¢åŠ ã€‚æˆ‘æŸ¥çœ‹éš”ç¦»çº§åˆ«æ˜¯RRï¼Œä¸åŒsessionï¼Œä¸æ˜¯è¦ç­‰åˆ°calldata()ç»“æŸåæ‰èƒ½çœ‹åˆ°æ•°æ®ä¹ˆï¼Ÿ<br>å¦å¤–ï¼Œæˆ‘åœ¨æ‰§è¡Œcalldata()è¿‡ç¨‹ä¸­ï¼Œä½¿ç”¨pkillç›´æ¥ç»“æŸmysqldã€‚é‡å¯MySQLåï¼Œå‘ç°è¡¨tä¸­å·²ç»è¢«æ’å…¥äº†æ•°æ®ï¼Œæ„Ÿè§‰æ²¡æœ‰æ‰§è¡Œå®Œçš„äº‹åŠ¡calldata()å¹¶æ²¡æœ‰å›æ»šã€‚<br>","like_count":0},{"had_liked":false,"id":50201,"user_name":"å¤©ç‹","can_delete":false,"product_type":"c1","uid":1239337,"ip_address":"","ucode":"C074B2F9A5F007","user_header":"https://static001.geekbang.org/account/avatar/00/12/e9/29/629d9bb0.jpg","comment_is_top":false,"comment_ctime":1544917385,"is_pvip":false,"replies":[{"id":"18038","content":"å¯¹çš„ï¼Œç£ç›˜ä¹Ÿå°‘è¯»ï¼Œå†…å­˜ä¹Ÿå°‘å ","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544928936,"ip_address":"","comment_id":50201,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1544917385","product_id":100020801,"comment_content":"è¯·æ•™ä¸ªé—®é¢˜1 éèšé›†ç´¢å¼•æ ‘æ¯”èšé›†ç´¢å¼•æ ‘å°ï¼Œcount(*)ä¼šæ‰¾æœ€å°çš„ç´¢å¼•æ ‘ï¼Œæ ¹æœ¬ä¸Šæ˜¯ï¼Œæ¯ä¸€ä¸ªæ•°æ®é¡µä¸Šå­˜å‚¨ä¸€å®šé‡çš„æ•°æ®ï¼Œå› ä¸ºéèšé›†ç´¢å¼•å¶å­å‡ ç‚¹å­˜çš„æ˜¯ä¸»é”®ç´¢å¼•ï¼Œå ç”¨çš„ç©ºé—´æ¯”è¾ƒå°ï¼Œæ¯ä¸€é¡µå­˜çš„æ•°æ®é‡æ¯”è¾ƒå›ºå®šçš„æƒ…å†µä¸‹ï¼Œå ç”¨çš„é¡µæ•°å°‘ï¼Œcount(*)è¯»çš„æ¯”è¾ƒå¿«ï¼Œæˆ‘æ˜¯è¿™æ ·ç†è§£çš„ï¼Œæ˜¯è¿™æ ·å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432914,"discussion_content":"å¯¹çš„ï¼Œç£ç›˜ä¹Ÿå°‘è¯»ï¼Œå†…å­˜ä¹Ÿå°‘å ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544928936,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":50142,"user_name":"bluefantasy3","can_delete":false,"product_type":"c1","uid":1299930,"ip_address":"","ucode":"9D6FF2811F7465","user_header":"","comment_is_top":false,"comment_ctime":1544878209,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1544878209","product_id":100020801,"comment_content":"è€å¸ˆå¥½ï¼šä»€ä¹ˆæ—¶å€™è®²ä¸€ä¸‹MySQLçš„é›†ç¾¤æ–¹æ¡ˆå‘€ï¼Ÿç½‘ä¸Šçœ‹åˆ°é›†ç¾¤æ–¹æ¡ˆæœ‰å¾ˆå¤šï¼Œæ¯ä¸ªæ–¹æ¡ˆéƒ½æœ‰ç¼ºç‚¹ã€‚è€Œä¸”æ„Ÿè§‰ç°åœ¨ä¸€èˆ¬å…¬å¸æ²¡æœ‰ä½¿ç”¨MySQLé›†ç¾¤ã€‚è¯·è€å¸ˆè®²ä¸€ä¸‹ã€‚","like_count":0},{"had_liked":false,"id":50053,"user_name":"ç‹å­é¹","can_delete":false,"product_type":"c1","uid":1296763,"ip_address":"","ucode":"2B0494362E68A8","user_header":"https://static001.geekbang.org/account/avatar/00/13/c9/7b/a89761ce.jpg","comment_is_top":false,"comment_ctime":1544851393,"is_pvip":false,"replies":[{"id":"18015","content":"ä½ é—®ç€äº†ï¼Œ16ã€17å°±æ˜¯è¯´è¿™ä¸ª","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544874599,"ip_address":"","comment_id":50053,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1544851393","product_id":100020801,"comment_content":"æˆ‘æƒ³é—®ä¸‹åé¢çš„è¯¾ç¨‹èƒ½è®²ä¸‹mysqlä»€ä¹ˆæ—¶å€™ä¼šåˆ›å»ºä¸´æ—¶è¡¨å—ï¼Œæœ‰æ—¶å€™order byä¼šåˆ›å»ºä¸´æ—¶è¡¨ï¼Œæœ‰æ—¶å€™åˆä¸ä¼šï¼Œä¸å¤ªæ‡‚","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432859,"discussion_content":"ä½ é—®ç€äº†ï¼Œ16ã€17å°±æ˜¯è¯´è¿™ä¸ª","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544874599,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":49991,"user_name":"å½“ä¸‹","can_delete":false,"product_type":"c1","uid":1304326,"ip_address":"","ucode":"2B8B003F94BC07","user_header":"https://static001.geekbang.org/account/avatar/00/13/e7/06/76ee65a1.jpg","comment_is_top":false,"comment_ctime":1544827751,"is_pvip":false,"replies":[{"id":"18007","content":"å¹¶å‘æ’å…¥ä¹‹é—´å¹¶ä¸ä¼šï¼Œä½†æ˜¯ä¼šå½±å“updateè¯­å¥","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544846206,"ip_address":"","comment_id":49991,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1544827751","product_id":100020801,"comment_content":"å¹¶å‘æ’å…¥ä¼šäº§ç”Ÿé”é˜»å¡å—ï¼Ÿå¦‚æœæœ‰æ˜¯æ€ä¹ˆå¯¼è‡´çš„;å¦‚æœæ²¡æœ‰é”é˜»å¡ï¼Œå¹¶å‘æ’å…¥å¯¹è¡¨çš„å…¶ä»–æ“ä½œæœ‰ä»€ä¹ˆå½±å“?","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432830,"discussion_content":"å¹¶å‘æ’å…¥ä¹‹é—´å¹¶ä¸ä¼šï¼Œä½†æ˜¯ä¼šå½±å“updateè¯­å¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544846206,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":49990,"user_name":"å½“ä¸‹","can_delete":false,"product_type":"c1","uid":1304326,"ip_address":"","ucode":"2B8B003F94BC07","user_header":"https://static001.geekbang.org/account/avatar/00/13/e7/06/76ee65a1.jpg","comment_is_top":false,"comment_ctime":1544827375,"is_pvip":false,"replies":[{"id":"18016","content":"å…¶å®ä¸»è¦å°±æ˜¯ä¸€è‡´æ€§é—®é¢˜","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544874654,"ip_address":"","comment_id":49990,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1544827375","product_id":100020801,"comment_content":"åº”ç”¨ä¸­ç»å¸¸æœ‰å¤šè¡¨è”æ¥ä¸åŒç»´åº¦ä¸ç²’åº¦count,sumæ•°æ®è®¡ç®—å’Œç»Ÿè®¡ï¼Œç²’åº¦è¶Šç»†è®¡ç®—è¶Šå¤æ‚ï¼Œå´åˆè¦æ—¶å®æ€§ã€‚ç”¨redisæˆ–è€…æ•°æ®åº“ç¼“å­˜æ•°æ®è¦æ€ä¹ˆå®ç°ï¼Œåˆè¦æ³¨æ„ä»€ä¹ˆäº‹é¡¹?<br><br>","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432829,"discussion_content":"å…¶å®ä¸»è¦å°±æ˜¯ä¸€è‡´æ€§é—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544874654,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":49959,"user_name":"é“¶å¤ª","can_delete":false,"product_type":"c1","uid":1051765,"ip_address":"","ucode":"B505D15F7CB839","user_header":"https://static001.geekbang.org/account/avatar/00/10/0c/75/e7c6c403.jpg","comment_is_top":false,"comment_ctime":1544798215,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1544798215","product_id":100020801,"comment_content":"å®é™…åœºæ™¯ä¸­åŸºæœ¬æ²¡é‡åˆ°ä¸åŠ æ¡ä»¶æŸ¥è¡Œæ•°çš„ä¸šåŠ¡ï¼Œè¿™ç§æœ‰ä»€ä¹ˆå¥½çš„å»ºè®®å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":158199,"discussion_content":"åƒè¿™ç§åŠ æ¡ä»¶çš„ï¼Œä¸€èˆ¬å°±åªèƒ½ç›´æ¥æ‰§è¡Œè®¡æ•°äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580560949,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":49954,"user_name":"å›å­å¹½å¹½","can_delete":false,"product_type":"c1","uid":1125551,"ip_address":"","ucode":"4C4841813945C4","user_header":"https://static001.geekbang.org/account/avatar/00/11/2c/af/1817e787.jpg","comment_is_top":false,"comment_ctime":1544797417,"is_pvip":false,"replies":[{"id":"17990","content":"ä¸æ˜¯â€¦ è¿™ä¸ªè·Ÿå¹»è¯»æ— å…³å“¦","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544800609,"ip_address":"","comment_id":49954,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1544797417","product_id":100020801,"comment_content":"ä»¥å‰çœ‹ä¹¦è¯´å¯é‡å¤è¿˜æ˜¯ä¼šå‡ºç°å¹»è¯»ã€‚ä½†æ˜¯ç°åœ¨Aä¼šè¯å‰åä¸¤æ¬¡éƒ½è¯»å–1000ã€‚æ˜¯ä¸æ˜¯MySQL çš„å¯é‡å¤è¯»å·²ç»ä¸ä¼šå‡ºç°å¹»è¯»äº†ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432814,"discussion_content":"ä¸æ˜¯â€¦ è¿™ä¸ªè·Ÿå¹»è¯»æ— å…³å“¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544800609,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":49935,"user_name":"é™ˆå¤©å¢ƒ","can_delete":false,"product_type":"c1","uid":1100792,"ip_address":"","ucode":"FF9EA3ACAAF864","user_header":"https://static001.geekbang.org/account/avatar/00/10/cb/f8/f4adadcb.jpg","comment_is_top":false,"comment_ctime":1544792798,"is_pvip":true,"replies":[{"id":"17978","content":"å…¶å®ä¸Šä¸‡è¿˜å¥½ï¼Œå¦‚æœå†æ›´å¤šï¼Œå°±è¦è€ƒè™‘å¦å¤–è®¡æ•°äº†ï¼Œä¸è¿‡è¿™ç§å°±æ²¡æœ‰å›ºå®šæ–¹æ³•äº†â€¦","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544797495,"ip_address":"","comment_id":49935,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1544792798","product_id":100020801,"comment_content":"ç´¢å¼•æ¡ä»¶è¿‡æ»¤å®Œåè¿˜å¤šå°‘è¡Œï¼Ÿå¦‚æœè¡Œæ•°å°‘ï¼ˆå‡ ç™¾è¡Œï¼Ÿï¼‰å°±æ²¡å…³ç³»ç›´æ¥æ‰§è¡Œäº†<br>â€”â€”è¿˜æœ‰ä¸Šä¸‡è¡Œï¼Œè¿™ç§æ€ä¹ˆå¤„ç†ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432808,"discussion_content":"å…¶å®ä¸Šä¸‡è¿˜å¥½ï¼Œå¦‚æœå†æ›´å¤šï¼Œå°±è¦è€ƒè™‘å¦å¤–è®¡æ•°äº†ï¼Œä¸è¿‡è¿™ç§å°±æ²¡æœ‰å›ºå®šæ–¹æ³•äº†â€¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544797495,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":49915,"user_name":"Ryoma","can_delete":false,"product_type":"c1","uid":1130590,"ip_address":"","ucode":"7F692369239692","user_header":"https://static001.geekbang.org/account/avatar/00/11/40/5e/b8fada94.jpg","comment_is_top":false,"comment_ctime":1544788886,"is_pvip":true,"replies":[{"id":"17980","content":"å¯¹ï¼Œåªè¦å°±æ˜¯ä¸å‡†ï¼Œä¸æ»¡è¶³ä¸€è‡´æ€§æ¡ä»¶","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544797562,"ip_address":"","comment_id":49915,"utype":1}],"discussion_count":1,"race_medal":2,"score":"1544788886","product_id":100020801,"comment_content":"æˆ‘çš„æ„æ€æ˜¯InnoDBä¸ºä»€ä¹ˆä¸åƒMyISAMä¸€æ ·ï¼ŒæŠŠcount(*)çš„ç»“æœå­˜å‚¨åœ¨ç£ç›˜ä¸Šï¼›ç„¶åé€šè¿‡äº‹åŠ¡idè¿™ç§æœºåˆ¶ï¼Œåœ¨æŸ¥è¯¢æ—¶èƒ½å¤Ÿè¿”å›å½“å‰äº‹åŠ¡èƒ½çœ‹è§æ•°æ®çš„è¡Œæ•°â€”â€”è¿™ä¸ªåªæ˜¯æˆ‘çš„è„‘æ´<br>æ˜¯ä¸æ˜¯å› ä¸ºè¿™ä¸ªcount(*)çš„æ„ä¹‰ä¸å¤§ï¼Œæ‰€ä»¥åœ¨InnoDBæ²¡æœ‰åšè¿™ä¸ªå®ç°","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432799,"discussion_content":"å¯¹ï¼Œåªè¦å°±æ˜¯ä¸å‡†ï¼Œä¸æ»¡è¶³ä¸€è‡´æ€§æ¡ä»¶","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544797562,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":49874,"user_name":"Justin","can_delete":false,"product_type":"c1","uid":1305601,"ip_address":"","ucode":"D49723FEA66731","user_header":"https://static001.geekbang.org/account/avatar/00/13/ec/01/978d54af.jpg","comment_is_top":false,"comment_ctime":1544782938,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1544782938","product_id":100020801,"comment_content":"ä¸€ç›´æƒ³é—®ä¸€ä¸ªé—®é¢˜ å¦‚æœåœ¨æ•°æ®é‡å¾ˆå¤§çš„è¡¨ä¸­å¢åŠ ä¸€ä¸ªå­—æ®µ innodbåº•å±‚æ˜¯æ€ä¹ˆå¤„ç†çš„å‘¢ ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":158201,"discussion_content":"MDLå†™é”ï¼Œè¡¨é˜»å¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580561085,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":49863,"user_name":"â˜","can_delete":false,"product_type":"c1","uid":1302793,"ip_address":"","ucode":"6FAEF05F234D2A","user_header":"https://static001.geekbang.org/account/avatar/00/13/e1/09/9483f537.jpg","comment_is_top":false,"comment_ctime":1544781229,"is_pvip":false,"replies":[{"id":"18020","content":"æ²¡çœ‹æ‡‚ï¼Œæ–‡ç« åœ°å€å‘ä¸‹","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544875776,"ip_address":"","comment_id":49863,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1544781229","product_id":100020801,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼š<br>      ä¹‹å‰çœ‹åˆ°æ–‡ç« è¯´åœ¨5.7å¯¹äºcount(*)åšäº†ä¸€æ¬¡å†…éƒ¨handlerå‡½æ•°è°ƒç”¨ï¼Œå¯ä»¥å¿«é€Ÿè·å¾—è¡¨æ€»æ•°ï¼Œä¸éœ€è¦å»éå†æ‰€æœ‰è¡Œæ•°ï¼Œè¿™ç§æƒ…å†µèƒ½ç»™æä¸€ä¸‹å—ï¼Œä¹Ÿå’Œcount(1)æ•ˆæœå·®ä¸å¤šå—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432792,"discussion_content":"æ²¡çœ‹æ‡‚ï¼Œæ–‡ç« åœ°å€å‘ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544875776,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":49862,"user_name":"ç‡•ç¾½é˜³","can_delete":false,"product_type":"c1","uid":1015063,"ip_address":"","ucode":"AF9430187F66EE","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7d/17/179b24f4.jpg","comment_is_top":false,"comment_ctime":1544781160,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1544781160","product_id":100020801,"comment_content":"count(*)æ“ä½œ<br>å¦‚æœåªæœ‰ä¸»é”®ç´¢å¼•ï¼Œç”±äºä¸»é”®ç´¢å¼•ä¸‹æ˜¯è¡Œæ•°æ®ï¼Œä¼šå¯¼è‡´å…¨è¡¨æ‰«æï¼Œå¤§é‡è¯»ç›˜ã€‚<br>å¦‚æœæœ‰äºŒçº§ç´¢å¼•ï¼Œç”±äºäºŒçº§ç´¢å¼•ä¸‹æ˜¯ä¸»é”®å’Œè¡Œå­—æ®µï¼Œæ•°æ®é‡å¾ˆå°ã€‚æ­¤æ—¶countä¼šå¾ˆå¿«ã€‚<br>æˆ‘è¿™è¾¹æµ‹è¯•æ²¡åŠ äºŒçº§ç´¢å¼•ï¼Œéœ€è¦4åˆ†åŠ<br>åŠ äº†äºŒçº§ç´¢å¼•ï¼Œåªéœ€è¦0.13ç§’","like_count":0},{"had_liked":false,"id":49853,"user_name":"åæ·¡ä¸€ä¸ª","can_delete":false,"product_type":"c1","uid":1118181,"ip_address":"","ucode":"D9C39F4133D9D6","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eplMzkLgvebhLujCZI0DZAWS7MQGvYGHb4yeoDHdITVWpbSicvoVKw0dISm9ib3vYU7BqxrmuTV666g/132","comment_is_top":false,"comment_ctime":1544779962,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1544779962","product_id":100020801,"comment_content":"å¦‚æœç»è¿‡whereæ¡ä»¶ç­›é€‰çš„æ•°æ®ï¼Œæ•°æ®é‡ä»ç„¶å¾ˆå¤§æ€ä¹ˆåŠå‘¢ï¼Ÿæ¯”å¦‚ç®¡ç†å°æœ‰å¾ˆå¤šæŸ¥è¯¢æ¡ä»¶ï¼Œåƒçœå¸‚å¿ï¼Œåªé€‰äº†æŸä¸ªçœï¼Œè¿˜æœ‰å‡ ç™¾ä¸‡çš„æ•°æ®ï¼Œè™½ç„¶åˆ†é¡µäº†ï¼Œä½†è¿˜éœ€è¦ç»Ÿè®¡æ€»æ•°count(*)ï¼Œé€Ÿåº¦å¾ˆæ…¢æ€ä¹ˆåŠå‘¢ï¼Ÿè¿™ç§æƒ…å†µä¸€ç›´æ²¡æƒ³åˆ°æœ‰ä»€ä¹ˆå®Œç¾çš„è§£å†³æ–¹æ¡ˆï¼Œåªèƒ½ä»ä¸šåŠ¡ä¸Šå…¥æ‰‹å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":49848,"user_name":"ç‡•ç¾½é˜³","can_delete":false,"product_type":"c1","uid":1015063,"ip_address":"","ucode":"AF9430187F66EE","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7d/17/179b24f4.jpg","comment_is_top":false,"comment_ctime":1544779422,"is_pvip":false,"replies":[{"id":"18021","content":"ç»Ÿè®¡ä¸»é”®ç´¢å¼•æ•°ç›® å°±æ˜¯å…¨è¡¨æ‰«æå‘€ğŸ˜„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544875852,"ip_address":"","comment_id":49848,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1544779422","product_id":100020801,"comment_content":"count(*) ä¸å¯ä»¥ç›´æ¥ç»Ÿè®¡ä¸»é”®ç´¢å¼•çš„æ•°é‡ä¹ˆï¼Ÿ ä¸ºä½•è¿˜è¦å…¨è¡¨æ‰«æï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432788,"discussion_content":"ç»Ÿè®¡ä¸»é”®ç´¢å¼•æ•°ç›® å°±æ˜¯å…¨è¡¨æ‰«æå‘€ğŸ˜„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544875852,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":49834,"user_name":"mongo","can_delete":false,"product_type":"c1","uid":1113124,"ip_address":"","ucode":"F39FE783793A17","user_header":"https://static001.geekbang.org/account/avatar/00/10/fc/24/7d43d807.jpg","comment_is_top":false,"comment_ctime":1544777746,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1544777746","product_id":100020801,"comment_content":"è¯·é—®ä¸€ä¸ªé—®é¢˜ï¼šæˆ‘å¾ˆæƒ³ææ˜ç™½mysqlè¿™ä¸ªç¨‹åºçš„ç»„æˆéƒ¨åˆ†ï¼Œæœ€åŸºæœ¬çš„å¢åˆ æ”¹æŸ¥åŠŸèƒ½çš„å®ç°æµç¨‹ï¼Œå†…éƒ¨çš„è¡¨æ–‡ä»¶å’Œç´¢å¼•æ–‡ä»¶ç­‰éƒ½æ˜¯æ€ä¹ˆå­˜å‚¨å’Œæ€ä¹ˆä½¿ç”¨çš„ã€‚è¿™ä¸ªä¸“æ å¾ˆå…¨é¢ï¼Œä½†æ˜¯æˆ‘çœ‹çš„å¾ˆåƒåŠ›ï¼Œå¾ˆå¤šåŸºç¡€çŸ¥è¯†æˆ‘è¿˜æ²¡æœ‰æŒæ¡ï¼Œæˆ‘æƒ³è¯·é—®æœ‰ä»€ä¹ˆå‚è€ƒä¹¦ç±æ¨èï¼Ÿ","like_count":0},{"had_liked":false,"id":49803,"user_name":"å¿µ","can_delete":false,"product_type":"c1","uid":1113818,"ip_address":"","ucode":"866A800D49C498","user_header":"https://static001.geekbang.org/account/avatar/00/10/fe/da/01cfbdc6.jpg","comment_is_top":false,"comment_ctime":1544771811,"is_pvip":false,"replies":[{"id":"17942","content":"é¢å…¶å®æˆ‘æ˜¯ä¸ºäº†å±•å¼€æ–‡ç« è¯´æ˜åé¢çš„æ–¹æ¡ˆï¼Œæ–¹æ³•åº”è¯¥è¿˜æœ‰çš„ï¼Œä½ å»ºè®®ä¸€ä¸ªğŸ˜„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544777647,"ip_address":"","comment_id":49803,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1544771811","product_id":100020801,"comment_content":"è§£å†³æ•ˆç‡é—®é¢˜åªæœ‰ä¸Šé¢è¯´çš„é‚£ç§å†™è¡¨åŠ redisæ–¹æ³•äº†å—ï¼Œæ²¡æœ‰å…¶ä»–çš„æ–¹æ³•äº†å—","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432781,"discussion_content":"é¢å…¶å®æˆ‘æ˜¯ä¸ºäº†å±•å¼€æ–‡ç« è¯´æ˜åé¢çš„æ–¹æ¡ˆï¼Œæ–¹æ³•åº”è¯¥è¿˜æœ‰çš„ï¼Œä½ å»ºè®®ä¸€ä¸ªğŸ˜„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544777647,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":49801,"user_name":"èš‚èšå†…æ¨+v","can_delete":false,"product_type":"c1","uid":1050508,"ip_address":"","ucode":"24B10AEE54B3FD","user_header":"https://static001.geekbang.org/account/avatar/00/10/07/8c/0d886dcc.jpg","comment_is_top":false,"comment_ctime":1544771536,"is_pvip":false,"replies":[{"id":"17943","content":"å°±æ˜¯è·Ÿcount(*)ä¸€æ ·","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544777666,"ip_address":"","comment_id":49801,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1544771536","product_id":100020801,"comment_content":"è€å¸ˆ  conunt(1) çš„ä½œç”¨æ˜¯ä»€ä¹ˆæ–¹ä¾¿è§£é‡Šä¸‹å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432780,"discussion_content":"å°±æ˜¯è·Ÿcount(*)ä¸€æ ·","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544777666,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":49793,"user_name":"å¸ƒè¡£éª‡å®¢","can_delete":false,"product_type":"c1","uid":1256280,"ip_address":"","ucode":"5226B0F67090D1","user_header":"https://static001.geekbang.org/account/avatar/00/13/2b/58/11c05ccb.jpg","comment_is_top":false,"comment_ctime":1544770264,"is_pvip":false,"replies":[{"id":"17945","content":"ğŸ˜ å°è¯äº†å°±å¥½å“ˆ","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544777744,"ip_address":"","comment_id":49793,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1544770264","product_id":100020801,"comment_content":"ç­”æ¡ˆåœ¨è¯„è®ºåŒºï¼Œæƒ³è‡ªå·±å†™ä¸‹çš„ï¼Œçœ‹å®Œå¿ä¸ä½å¾€ä¸‹æ‹‰ï¼Œè¿˜æ˜¯å¤šå¤šçœ‹çœ‹è¯„è®ºäº†ï¼Œå˜¿å˜¿","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432776,"discussion_content":"ğŸ˜ å°è¯äº†å°±å¥½å“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544777744,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":49790,"user_name":"james","can_delete":false,"product_type":"c1","uid":1049208,"ip_address":"","ucode":"5701899403917C","user_header":"https://static001.geekbang.org/account/avatar/00/10/02/78/23c56bce.jpg","comment_is_top":false,"comment_ctime":1544769628,"is_pvip":false,"replies":[{"id":"17946","content":"å“ªæœ¬ä¹¦â€¦ ","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544777761,"ip_address":"","comment_id":49790,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1544769628","product_id":100020801,"comment_content":"è€å¸ˆ, ä¹¦ä¸Šè¯´ count(*) ä¼šé”è¡¨æ˜¯çœŸçš„å—? ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432775,"discussion_content":"å“ªæœ¬ä¹¦â€¦ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544777761,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1970443,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIx1V1QAxC4NHaxYZGyuibBN8lcURJWc5nrnO4yic1kxnDemYV2FJGialf47kYX9qtDnZZOfe1SJeLicg/132","nickname":"lleft","note":"","ucode":"D573EB509455AE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":371438,"discussion_content":"è¿™ä¸ªé”æ˜¯MDLé”å§ï¼Œcount(*)ä¹‹åï¼Œåˆ«çš„ä¼šè¯å°±ä¸èƒ½å¯¹è¡¨è¿›è¡ŒDDLæ“ä½œäº†","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1619768923,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":49786,"user_name":"è€é©¬ä¸–ç•Œ","can_delete":false,"product_type":"c1","uid":1318643,"ip_address":"","ucode":"4DED3B5B36FFA6","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLWew5n1eKsUF308Gzq9LSn3oW029oAwqB8NicaVpZmeVVlDv6ynqaU6nmUCkXAbiaiaZ5nNpHFhNg0Q/132","comment_is_top":false,"comment_ctime":1544769325,"is_pvip":false,"replies":[{"id":"17938","content":"æ²¡æœ‰è¿™ç§è¯´æ³•å‘€ï¼Œå¦‚æœcolä¸Šæœ‰ç´¢å¼•ï¼Œç„¶åæ»¡è¶³=â€˜valueâ€™çš„åˆä¸å¤šçš„è¯ã€‚å—ï¼Œè¿™æ ·å†™æ²¡é—®é¢˜ã€‚<br><br>","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544772590,"ip_address":"","comment_id":49786,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1544769325","product_id":100020801,"comment_content":"è€å¸ˆ èƒ½ä¸èƒ½è®²è§£ä¸€ä¸‹æœ‰æ¡ä»¶çš„count()æŸ¥è¯¢åŸç†ã€‚è¿˜æœ‰å°½é‡å‡å°‘ SELECT COUNT(*) FROM tablename WHERE COL = &#39;valueâ€™ è¿™ç§æŸ¥è¯¢ï¼Œè¿™ç§è¯´æ³•å¯¹å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432772,"discussion_content":"æ²¡æœ‰è¿™ç§è¯´æ³•å‘€ï¼Œå¦‚æœcolä¸Šæœ‰ç´¢å¼•ï¼Œç„¶åæ»¡è¶³=â€˜valueâ€™çš„åˆä¸å¤šçš„è¯ã€‚å—ï¼Œè¿™æ ·å†™æ²¡é—®é¢˜ã€‚\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544772590,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":49783,"user_name":"james","can_delete":false,"product_type":"c1","uid":1049208,"ip_address":"","ucode":"5701899403917C","user_header":"https://static001.geekbang.org/account/avatar/00/10/02/78/23c56bce.jpg","comment_is_top":false,"comment_ctime":1544768833,"is_pvip":false,"replies":[{"id":"17947","content":"å—¯ä½ è¯´çš„æ–¹æ³•å°±æ˜¯æ–‡ç« ä¸­æˆ‘ä»¬è®¨è®ºçš„æ–¹æ³•å‘€ã€‚<br><br>MySQL ä¸å…·å¤‡åŸå­æ›´æ–°æ˜¯å•¥æ„æ€","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544777828,"ip_address":"","comment_id":49783,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1544768833","product_id":100020801,"comment_content":"è®¡æ•°è¡¨åªæœ‰ä¸€è¡Œ, ä¼šæœ‰å¹¶å‘, å¦‚æœæ›´æ–°å, äº‹åŠ¡ä¸æäº¤, é‚£ä¹ˆå°†é˜»å¡åˆ«çš„äº‹åŠ¡æ›´æ–°æ€»æ•°, è€Œå…ˆæ’å…¥æ•°æ®åˆ™ä¸ä¼šæœ‰è¿™ä¸ªé—®é¢˜, åˆ«çš„äº‹åŠ¡ä»ç„¶å¯ä»¥æ’å…¥æ•°æ®åˆ°åŒä¸€å¼ è¡¨, å› æ­¤æˆ‘è®¤ä¸ºå…ˆæ’è¡¨, åæ›´æ–°æ€»æ•°. <br>å¦å¤–: MySQL å¹¶ä¸å…·å¤‡åŸå­æ›´æ–°æ“ä½œ, å› æ­¤ä¸ä¼šæœ‰äººç”¨ mysql æ¥è®°å½•æ€»æ•°, è€Œæ˜¯ç”¨ redis çš„åŸå­è‡ªå¢ incr æ¥å®ç°è¿™ä¸ªä¸šåŠ¡, è€Œä¸” redis çš„ RDB + AOF æ˜¯å¯ä»¥æŒä¹…åŒ–å­˜å‚¨çš„","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432771,"discussion_content":"å—¯ä½ è¯´çš„æ–¹æ³•å°±æ˜¯æ–‡ç« ä¸­æˆ‘ä»¬è®¨è®ºçš„æ–¹æ³•å‘€ã€‚\n\nMySQL ä¸å…·å¤‡åŸå­æ›´æ–°æ˜¯å•¥æ„æ€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544777828,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":49765,"user_name":"wjz1991","can_delete":false,"product_type":"c1","uid":1311687,"ip_address":"","ucode":"D82D744F5A4E6D","user_header":"https://static001.geekbang.org/account/avatar/00/14/03/c7/563345e1.jpg","comment_is_top":false,"comment_ctime":1544765902,"is_pvip":false,"replies":[{"id":"17949","content":"å°±æ˜¯bug ...","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544777902,"ip_address":"","comment_id":49765,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1544765902","product_id":100020801,"comment_content":"è€å¸ˆï¼Œä½ èƒ½è§£é‡Šä¸€ä¸‹ä¸ºä»€ä¹ˆå—ï¼Ÿä¸ºä»€ä¹ˆä¼˜åŒ–å™¨ä¼šé€‰æ‹©é”™è¯¯çš„ç´¢å¼•ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432764,"discussion_content":"å°±æ˜¯bug ...","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544777902,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":49764,"user_name":"æµæµªåœ¨å¯‚å¯å¤åŸ","can_delete":false,"product_type":"c1","uid":1105678,"ip_address":"","ucode":"FE90DCD5DC3A20","user_header":"https://static001.geekbang.org/account/avatar/00/10/df/0e/4e2b06d5.jpg","comment_is_top":false,"comment_ctime":1544765801,"is_pvip":false,"replies":[{"id":"17950","content":"ä½ è¿™ä¸ªé—®é¢˜ä¼šåœ¨åé¢çš„æ–‡ç« ä¸­è¯´åˆ°å“ˆ","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544777944,"ip_address":"","comment_id":49764,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1544765801","product_id":100020801,"comment_content":"é—®æ‚¨ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬æŸ¥è¯¢çš„æ—¶å€™éœ€è¦ç”¨åˆ°è¿è¡¨æŸ¥è¯¢ï¼Œéƒ½æ˜¯æ¯”è¾ƒå¤§çš„è¡¨ã€‚ä¸€ä¸‹å­æŸ¥å‡ºæ¥æ•°é‡å¤ªå¤§äº†ï¼Œå¾ˆæ…¢ï¼Œå†…å­˜ä¹Ÿæ²¡é‚£ä¹ˆå¤§ã€‚äºæ˜¯æˆ‘ä»¬é‡‡å–æŠŠå°çš„è¡¨è¯»åˆ°å†…å­˜ä¸­ï¼Œå¤§çš„ä¸»è¡¨æŒ‰ç…§æ—¶é—´æ¥è¯»ï¼Œä½†è¿˜æ˜¯å¾ˆæ…¢ã€‚è¿™æ ·çš„é—®é¢˜æ€ä¹ˆè§£å†³å‘¢ï¼Ÿå¦‚æœæŠŠæ•´å¼ è¡¨dump åˆ°æœ¬åœ°ï¼Œç„¶åå…¨é‡è‡ªå·±æ’é™¤ä¸æ»¡è¶³æ¡ä»¶çš„ã€‚è¿™æ ·å¯è¡Œå—ï¼Ÿæœ‰æ²¡æœ‰æ›´å¥½çš„åŠæ³•å‘¢<br>","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432763,"discussion_content":"ä½ è¿™ä¸ªé—®é¢˜ä¼šåœ¨åé¢çš„æ–‡ç« ä¸­è¯´åˆ°å“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544777944,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":49756,"user_name":"æ¯›ç«‹å‡¡","can_delete":false,"product_type":"c1","uid":1067251,"ip_address":"","ucode":"7B3BD84187D39D","user_header":"https://static001.geekbang.org/account/avatar/00/10/48/f3/e7f9a26b.jpg","comment_is_top":false,"comment_ctime":1544764211,"is_pvip":false,"replies":[{"id":"17952","content":"é¢ï¼Œæ€•å¼•èµ·æ•°æ®åº“ä¹‹äº‰ï¼Œgeneral çš„å¯¹æ¯”å°±ä¸åšäº†ã€‚<br>å¦‚æœæœ‰å…·ä½“åœºæ™¯æˆ‘ä¼šæåˆ°çš„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544778023,"ip_address":"","comment_id":49756,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1544764211","product_id":100020801,"comment_content":"å·¥ä½œä¸­ä½¿ç”¨è¾ƒå¤šçš„æ˜¯PostgreSQLï¼Œä½†æ˜¯ä¹Ÿèƒ½åœ¨è¿™ä¸ªè¯¾ç¨‹é‡Œå­¦åˆ°å¾ˆå¤šä¸œè¥¿ï¼Œæ¯”å¦‚Innodbçš„ä¸œè¥¿ï¼Œè¿˜æœ‰äº›è®¾è®¡åŸç†ç­‰éƒ½æ˜¯ç›¸é€šçš„ï¼Œè°¢è°¢è€å¸ˆçš„ç²¾å½©è®²è§£ã€‚å¦å¤–å¸Œæœ›è€å¸ˆå¯¹äºmysqlç‹¬æœ‰çš„é‡è¦çš„ç‰¹æ€§ï¼Œå¯ä»¥å¼ºè°ƒä¸€ä¸‹ï¼Œå¦‚æœèƒ½å¯¹æ¯”ä¸€ä¸‹å…¶ä»–æ•°æ®åº“ï¼Œé‚£å°±æ›´å¥½äº†ã€‚","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432760,"discussion_content":"é¢ï¼Œæ€•å¼•èµ·æ•°æ®åº“ä¹‹äº‰ï¼Œgeneral çš„å¯¹æ¯”å°±ä¸åšäº†ã€‚\nå¦‚æœæœ‰å…·ä½“åœºæ™¯æˆ‘ä¼šæåˆ°çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544778023,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":49750,"user_name":"pandas","can_delete":false,"product_type":"c1","uid":1306672,"ip_address":"","ucode":"B680D836D6460E","user_header":"https://static001.geekbang.org/account/avatar/00/13/f0/30/bef112d3.jpg","comment_is_top":false,"comment_ctime":1544762576,"is_pvip":false,"replies":[{"id":"17918","content":"ğŸ˜„ å—¯ï¼Œå¸Œæœ›ä¸åŒå…³æ³¨ç‚¹çš„åŒå­¦éƒ½èƒ½æœ‰æ”¶è·","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544763091,"ip_address":"","comment_id":49750,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1544762576","product_id":100020801,"comment_content":"èœé¸Ÿçš„ä¸‡ç²¾æ²¹:æ‰€ä»¥ç»“è®ºæ˜¯ï¼šæŒ‰ç…§æ•ˆç‡æ’åºçš„è¯ï¼Œcount(å­—æ®µ)&lt;count(ä¸»é”® id)&lt;count(1)â‰ˆcount(*)ï¼Œæ‰€ä»¥æˆ‘å»ºè®®ä½ ï¼Œå°½é‡ä½¿ç”¨ count(*)ã€‚","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432759,"discussion_content":"ğŸ˜„ å—¯ï¼Œå¸Œæœ›ä¸åŒå…³æ³¨ç‚¹çš„åŒå­¦éƒ½èƒ½æœ‰æ”¶è·","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544763091,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":49739,"user_name":"Goal","can_delete":false,"product_type":"c1","uid":1307012,"ip_address":"","ucode":"C337CD4C7E07B0","user_header":"https://static001.geekbang.org/account/avatar/00/13/f1/84/7d21bd9e.jpg","comment_is_top":false,"comment_ctime":1544759552,"is_pvip":false,"replies":[{"id":"17922","content":"ä½ å¯ä»¥ç†è§£ä¸ºè¿”å›ä¸€ä¸ªâ€œç©ºçš„è¡Œâ€","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544763443,"ip_address":"","comment_id":49739,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1544759552","product_id":100020801,"comment_content":"è€å¸ˆå¥½ï¼šæœ‰ä¸ªé—®é¢˜ä¸å¤ªç†è§£ï¼š<br>1.  åœ¨ä¿è¯é€»è¾‘æ­£ç¡®çš„å‰æä¸‹ï¼Œå°½é‡å‡å°‘æ‰«æçš„æ•°æ®é‡ï¼Œæ˜¯æ•°æ®åº“ç³»ç»Ÿè®¾è®¡çš„é€šç”¨æ³•åˆ™ä¹‹ä¸€ã€‚ä¹Ÿå°±æ˜¯æ‰€ count(*) ç›¸æ¯”äºä¸»é”®ç´¢å¼•å»æ‰«æäºŒçº§ç´¢å¼•<br>2.  count(*) æ˜¯ä¾‹å¤–ï¼Œå¹¶ä¸ä¼šæŠŠå…¨éƒ¨å­—æ®µå–å‡ºæ¥ï¼Œè€Œæ˜¯ä¸“é—¨åšäº†ä¼˜åŒ–ï¼Œä¸å–å€¼ã€‚count(*) è‚¯å®šä¸æ˜¯ nullï¼ŒæŒ‰è¡Œç´¯åŠ ã€‚<br><br>è¿™ä¿©å¥è¯ï¼Œæ„Ÿè§‰æœ‰ç‚¹å†²çªï¼Œè¿™é‡Œçš„ä¸å»å–å€¼ï¼Œé‚£æ€ä¹ˆåšåˆ°çš„ç»Ÿè®¡å‘¢ï¼Ÿ<br>","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432752,"discussion_content":"ä½ å¯ä»¥ç†è§£ä¸ºè¿”å›ä¸€ä¸ªâ€œç©ºçš„è¡Œâ€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544763443,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":49736,"user_name":"wjz1991","can_delete":false,"product_type":"c1","uid":1311687,"ip_address":"","ucode":"D82D744F5A4E6D","user_header":"https://static001.geekbang.org/account/avatar/00/14/03/c7/563345e1.jpg","comment_is_top":false,"comment_ctime":1544759076,"is_pvip":false,"replies":[{"id":"17923","content":"å»ºä¸€ä¸ª(is_delete,shop_price)çš„è”åˆç´¢å¼•å§","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544763952,"ip_address":"","comment_id":49736,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1544759076","product_id":100020801,"comment_content":"è€å¸ˆï¼Œè¿˜æ˜¯æƒ³å’¨è¯¢ä¸€ä¸‹mysqlé€‰é”™ç´¢å¼•çš„é—®é¢˜ï¼Œeload_goodsè¡¨æ˜¯æ²¡ä»€ä¹ˆæ›´æ–°çš„ï¼Œä¹Ÿåšäº†alter table eload_goods engine=innodbæ“ä½œï¼Œè¿˜æ˜¯å‡ºç°å¦‚ä¸‹ç°è±¡ï¼Œè€å¸ˆèƒ½å¦å¯¹è¿™ä¸ªé€‰é”™ç´¢å¼•çš„ä¸“é¢˜è¿›è¡Œæ›´å…¨é¢çš„è®²è§£å—ï¼Ÿ<br>is_delete æ˜¯tinyintç±»å‹ï¼Œshop_priceæ˜¯decimalç±»å‹<br>admin@buyinggoods_db 03:26&gt;explain select * from eload_goods where is_delete = 0   AND shop_price between 5 and 9.9 ;<br><br>| id | select_type | table       | type | possible_keys      | key       | key_len | ref   | rows    | Extra       |<br>+----+-------------+-------------+------+--------------------+-----------+---------+-------+---------+-------------+<br>|  1 | SIMPLE      | eload_goods | ref  | is_delete,idx_test | is_delete | 1       | const | 1100043 | Using where |<br><br>1 row in set (0.00 sec)<br><br>admin@buyinggoods_db 03:26&gt;explain select * from eload_goods where shop_price between 5 and 9.9 ;<br><br>| id | select_type | table       | type  | possible_keys | key      | key_len | ref  | rows   | Extra                 |<br>+----+-------------+-------------+-------+---------------+----------+---------+------+--------+-----------------------+<br>|  1 | SIMPLE      | eload_goods | range | idx_test      | idx_test | 5       | NULL | 522330 | Using index condition |<br><br>1 row in set (0.00 sec)<br><br>admin@buyinggoods_db 03:33&gt;select count(1) from eload_goods;<br>+----------+<br>| count(1) |<br>+----------+<br>|  2467784 |<br>+----------+<br>1 row in set (0.45 sec)<br><br>admin@buyinggoods_db 03:34&gt;select count(1) from eload_goods where is_delete = 0;<br><br>| count(1) |<br>+----------+<br>|  2466778 |<br><br>1 row in set (0.60 sec)<br><br>admin@buyinggoods_db 03:34&gt;select count(1) from eload_goods where shop_price between 5 and 9.9 ;<br><br>| count(1) |<br>+----------+<br>|   261113 |<br><br>1 row in set (0.12 sec)<br><br>admin@buyinggoods_db 03:35&gt;select count(1) from eload_goods force index(idx_test)  where is_delete = 0   AND shop_price between 5 and 9.9 ;<br><br>| count(1) |<br>+----------+<br>|   260978 |<br><br>1 row in set (1.30 sec)<br><br>admin@buyinggoods_db 03:38&gt;select count(1) from eload_goods where is_delete = 0   AND shop_price between 5 and 9.9 ;<br><br>| count(1) |<br>+----------+<br>|   260978 |<br><br>1 row in set (7.02 sec)","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432750,"discussion_content":"å»ºä¸€ä¸ª(is_delete,shop_price)çš„è”åˆç´¢å¼•å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544763952,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":49735,"user_name":"user","can_delete":false,"product_type":"c1","uid":1307295,"ip_address":"","ucode":"3AA2D3DA955B4A","user_header":"https://static001.geekbang.org/account/avatar/00/13/f2/9f/b4af181c.jpg","comment_is_top":false,"comment_ctime":1544758788,"is_pvip":false,"replies":[{"id":"17920","content":"æ˜¯å› ä¸ºäºŒçº§ç´¢å¼•å°å‘€ï¼Œè¿™å‡ ä¸ªè¯­å¥ç¡®å®æ˜¯ä¼˜å…ˆé€‰å°çš„ç´¢å¼•","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544763288,"ip_address":"","comment_id":49735,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1544758788","product_id":100020801,"comment_content":"COUNT(*)ï¼ŒCOUNT(id)ï¼Œ COUNT(1) è¿™éƒ¨åˆ†çš„è§£é‡Šæˆ‘æœ‰ç‚¹å„¿ç–‘é—®ï¼Œåœ¨5.7çš„ç¯å¢ƒä¸‹ï¼Œæˆ‘å»countçš„è¿™ä¸‰ç§æƒ…å†µçš„æ‰§è¡Œè®¡åˆ’éƒ½æ˜¯èµ°çš„è¯¥è¡¨ä¸‹é¢çš„ä¸€ä¸ªäºŒçº§ç´¢å¼•ï¼Œç”±äºèšé›†ç´¢å¼•å’Œè¾…åŠ©ç´¢å¼•æ˜¯ä¸€å¯¹ä¸€çš„å…³ç³»ï¼Œnullå€¼åœ¨è¾…åŠ©ç´¢å¼•é‡Œé¢æœ‰ä¸€ä¸ªç‰¹æ®Šçš„æ ‡è®°ï¼Œæ‰€æœ‰åœ¨countçš„æ—¶å€™èµ°äºŒçº§ç´¢å¼•æ˜¯æœ€ä¼˜çš„ã€‚","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432749,"discussion_content":"æ˜¯å› ä¸ºäºŒçº§ç´¢å¼•å°å‘€ï¼Œè¿™å‡ ä¸ªè¯­å¥ç¡®å®æ˜¯ä¼˜å…ˆé€‰å°çš„ç´¢å¼•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544763288,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":49715,"user_name":"WilliamX","can_delete":false,"product_type":"c1","uid":1295476,"ip_address":"","ucode":"E915091A891873","user_header":"https://static001.geekbang.org/account/avatar/00/13/c4/74/27cf551a.jpg","comment_is_top":false,"comment_ctime":1544756562,"is_pvip":false,"replies":[{"id":"17906","content":"è¦æ˜¯ç»†ç©¶çš„è¯ï¼Œè¿˜è¦çœ‹æ˜¯ä¸æ˜¯null, ä»¥åŠå­—æ®µå¤§å°ã€‚<br><br>è¿˜æ˜¯count(*)å§ğŸ˜„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544761372,"ip_address":"","comment_id":49715,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1544756562","product_id":100020801,"comment_content":"å¦‚æœcountçš„å­—æ®µï¼Œæ­£å¥½æœ‰ç´¢å¼•ï¼Œæ˜¯ä¸æ˜¯å¯ä»¥å’Œcountï¼ˆIDï¼‰ç­‰åŒ?","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432741,"discussion_content":"è¦æ˜¯ç»†ç©¶çš„è¯ï¼Œè¿˜è¦çœ‹æ˜¯ä¸æ˜¯null, ä»¥åŠå­—æ®µå¤§å°ã€‚\n\nè¿˜æ˜¯count(*)å§ğŸ˜„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544761372,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":49710,"user_name":"Ryoma","can_delete":false,"product_type":"c1","uid":1130590,"ip_address":"","ucode":"7F692369239692","user_header":"https://static001.geekbang.org/account/avatar/00/11/40/5e/b8fada94.jpg","comment_is_top":false,"comment_ctime":1544756027,"is_pvip":true,"replies":[{"id":"17921","content":"ä½ æ˜¯è¯´æŸ¥è¯¢è¯­å¥é‡Œé¢å¸¦ä¸Šï¼Ÿä¸»è¦æ˜¯å®¢æˆ·ç«¯æ‹¿ä¸åˆ°è¿™ä¸ªäº‹åŠ¡IDâ€¦","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544763389,"ip_address":"","comment_id":49710,"utype":1}],"discussion_count":1,"race_medal":2,"score":"1544756027","product_id":100020801,"comment_content":"æœ‰ä¸€ä¸ªæƒ³æ³•ï¼Œæ•°æ®è¡¨è¡Œæ•°èƒ½ç»“åˆäº‹åŠ¡idä¸€èµ·ä½¿ç”¨ä¹ˆï¼Œè¿™æ ·åœ¨æŸ¥è¯¢è¡Œæ•°çš„æ—¶å€™ï¼Œæ ¹æ®äº‹åŠ¡å½“å‰çš„idåšä¸€ä¸ªé‡æ”¾æ“ä½œ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432737,"discussion_content":"ä½ æ˜¯è¯´æŸ¥è¯¢è¯­å¥é‡Œé¢å¸¦ä¸Šï¼Ÿä¸»è¦æ˜¯å®¢æˆ·ç«¯æ‹¿ä¸åˆ°è¿™ä¸ªäº‹åŠ¡IDâ€¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544763389,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":49705,"user_name":"å¤å¨œæ‹‰é»‘æš—ä¹‹ç¥Â·å·´å•¦å•¦èƒ½é‡Â·å •è½è¾¾","can_delete":false,"product_type":"c1","uid":1185642,"ip_address":"","ucode":"080BBCEF7DE985","user_header":"https://static001.geekbang.org/account/avatar/00/12/17/6a/c979163e.jpg","comment_is_top":false,"comment_ctime":1544755060,"is_pvip":false,"replies":[{"id":"17908","content":"1. åé¢é©¬ä¸Šè·Ÿäº†ä¸€ä¸ªæœ‰æ•ˆæŸ¥è¯¢ï¼Œå°±ç®€åŒ–å†™æˆbeginäº†ï¼Œæ¯”å¦‚session B å°±æ˜¯åœ¨â€œè¯»Cçš„è®°æ•°å€¼â€<br><br>2. ä¸€ç›´å°±æ˜¯è¿™æ ·ï¼Œåˆ¤æ–­çš„è¯ï¼Œåªè¦ä½ ç”¨çš„æ˜¯&gt;=5.5å°±ä¼˜åŒ–çš„ã€‚å¦‚æœç‰ˆæœ¬ä¸æ»¡è¶³ï¼Œé‚£åº”è¯¥å‡çº§äº†ğŸ˜„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544762238,"ip_address":"","comment_id":49705,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1544755060","product_id":100020801,"comment_content":"è€å¸ˆï¼Œçœ‹äº†è¿™èŠ‚è¯¾ä¹‹åï¼Œæœ‰ä¸¤ä¸ªç–‘é—®ï¼Œæœ›èƒ½è§£ç­”ä¸€ä¸‹ï¼š<br>ç¬¬ä¸€ï¼šæ‚¨åœ¨ã€Š08-äº‹åŠ¡åˆ°åº•æ˜¯éš”ç¦»çš„è¿˜æ˜¯ä¸éš”ç¦»çš„ï¼Ÿã€‹ä¸­è®²è¿‡ï¼Œbegin&#47;start transaction;å¹¶ä¸æ˜¯ä¸€ä¸ªäº‹åŠ¡çš„èµ·ç‚¹ï¼Œæ‰€ä»¥æœ¬èŠ‚ å›¾1 ä¸­çš„â€œbegin;â€æ˜¯ä¸æ˜¯åº”è¯¥æ˜¯â€œstart transaction with consistent snapshotâ€è¿™ä¸ªå‘½ä»¤ï¼Ÿ<br>ç¬¬äºŒï¼šMySQLä¸“é—¨é’ˆå¯¹ count(*) åšäº†ä¼˜åŒ–ï¼Œé‚£ä¹ˆè¿™ä¸ªä¼˜åŒ–æ˜¯åœ¨å“ªä¸ªç‰ˆæœ¬åŠ å…¥çš„å‘¢ï¼Ÿå¦‚æœå…¬å¸ä½¿ç”¨çš„æ˜¯ä¼˜åŒ–ä¹‹å‰çš„ç‰ˆæœ¬ï¼Œæ˜¯ä¸æ˜¯è¿˜æ˜¯ count(1) æ•ˆç‡æœ€é«˜ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432734,"discussion_content":"1. åé¢é©¬ä¸Šè·Ÿäº†ä¸€ä¸ªæœ‰æ•ˆæŸ¥è¯¢ï¼Œå°±ç®€åŒ–å†™æˆbeginäº†ï¼Œæ¯”å¦‚session B å°±æ˜¯åœ¨â€œè¯»Cçš„è®°æ•°å€¼â€\n\n2. ä¸€ç›´å°±æ˜¯è¿™æ ·ï¼Œåˆ¤æ–­çš„è¯ï¼Œåªè¦ä½ ç”¨çš„æ˜¯&amp;gt;=5.5å°±ä¼˜åŒ–çš„ã€‚å¦‚æœç‰ˆæœ¬ä¸æ»¡è¶³ï¼Œé‚£åº”è¯¥å‡çº§äº†ğŸ˜„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544762238,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":49693,"user_name":"XD","can_delete":false,"product_type":"c1","uid":1079293,"ip_address":"","ucode":"DC9DCFB3841A4E","user_header":"https://static001.geekbang.org/account/avatar/00/10/77/fd/c6619535.jpg","comment_is_top":false,"comment_ctime":1544753097,"is_pvip":false,"replies":[{"id":"17909","content":"1. åªè¿”å›å¿…é¡»çš„å­—æ®µ<br><br>2. Serverå±‚çŸ¥é“å‘€ï¼Œè¡¨ç»“æ„å°±èƒ½åˆ¤æ–­","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544762306,"ip_address":"","comment_id":49693,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1544753097","product_id":100020801,"comment_content":"å¯¹äº count(å­—æ®µ) æ¥è¯´ï¼š<br><br>å¦‚æœè¿™ä¸ªâ€œå­—æ®µâ€æ˜¯å®šä¹‰ä¸º not null çš„è¯ï¼Œä¸€è¡Œè¡Œåœ°ä»è®°å½•é‡Œé¢è¯»å‡ºè¿™ä¸ªå­—æ®µï¼Œåˆ¤æ–­ä¸èƒ½ä¸º nullï¼ŒæŒ‰è¡Œç´¯åŠ ï¼›<br><br>å¦‚æœè¿™ä¸ªâ€œå­—æ®µâ€å®šä¹‰å…è®¸ä¸º nullï¼Œé‚£ä¹ˆæ‰§è¡Œçš„æ—¶å€™ï¼Œåˆ¤æ–­åˆ°æœ‰å¯èƒ½æ˜¯ nullï¼Œè¿˜è¦æŠŠå€¼å–å‡ºæ¥å†åˆ¤æ–­ä¸€ä¸‹ï¼Œä¸æ˜¯ null æ‰ç´¯åŠ ã€‚<br><br>ä¹Ÿå°±æ˜¯å‰é¢çš„ç¬¬ä¸€æ¡åŸåˆ™ï¼Œserver å±‚è¦ä»€ä¹ˆå­—æ®µï¼ŒInnoDB å°±è¿”å›ä»€ä¹ˆå­—æ®µã€‚<br><br>----<br><br>è€å¸ˆè¯·æ•™2ä¸ªé—®é¢˜ã€‚<br>1ï¼Œinnodbè¿”å›çš„æ¯ä¸€è¡Œè®°å½•é‡Œåªæœ‰æŒ‡å®šå­—æ®µçš„å€¼å¯¹å—ï¼Ÿ<br>2ï¼Œå¦‚æœinnodbåªè¿”å›æ•°æ®çš„è¯ï¼Œseverå±‚å¹¶ä¸çŸ¥é“è¿™ä¸ªå­—æ®µæ˜¯å¦é™åˆ¶äº†not nullï¼Œé‚£å®ƒåœ¨è®¡æ•°çš„æ—¶å€™æ˜¯ä¸æ˜¯åªèƒ½éƒ½å–å‡ºæ¥åˆ¤æ–­ä¸€æ¬¡å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432727,"discussion_content":"1. åªè¿”å›å¿…é¡»çš„å­—æ®µ\n\n2. Serverå±‚çŸ¥é“å‘€ï¼Œè¡¨ç»“æ„å°±èƒ½åˆ¤æ–­","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544762306,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":49690,"user_name":"å³°","can_delete":false,"product_type":"c1","uid":1056019,"ip_address":"","ucode":"C53CB64E8E7D19","user_header":"https://static001.geekbang.org/account/avatar/00/10/1d/13/31ea1b0b.jpg","comment_is_top":false,"comment_ctime":1544752916,"is_pvip":true,"replies":[{"id":"17911","content":"æ²¡ç†è§£ä½ è¯´çš„ï¼Œè¿™æ ·å¢åŠ æŒºå¤§çš„é¢å¤–å­˜å‚¨æˆæœ¬","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544762641,"ip_address":"","comment_id":49690,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1544752916","product_id":100020801,"comment_content":"é—®é¢˜ ä¸ºä»€ä¹ˆä¸å¯ä»¥æ¢ç§æ€è·¯å®ç°è¡¨æ€»ä½“è®°å½•æ€»æ•°çš„æŒä¹…åŒ–å­˜å‚¨å‘¢ï¼Ÿæ¯”å¦‚è¡¨è®°å½•æ˜¯ä¸€ä¸ªåªä¼šåŠ æˆ–å‡çš„ç»Ÿè®¡æŒ‡æ ‡ï¼Œå¹¶ä¸”æ›´æ–°ä¸éœ€è¦å†è¯»å–å®ƒï¼Œæ‰€ä»¥æˆ‘åªéœ€è®°å½•æŸäº‹åŠ¡å¢åŠ ä¸€æ¡è®°å½•ï¼ŒæŸäº‹åŠ¡å‡å°‘å¤šå°‘æ¡è®°å½•ï¼Œcoun(*)åœ¨è¿™ä¸ªåŸºç¡€ä¸Šé‡‡ç”¨mvccå»å¾—åˆ°å½“å‰ä¼šè¯ä¸‹çš„è¡¨è®°å½•æ€»æ•°ä¸æ˜¯ç”¨ä¸ç€æ‰«æå…¨è¡¨ã€‚å½“ç„¶è¿™æ ·åšï¼Œæ— ç–‘å¢åŠ äº†ä»£ç çš„å¤æ‚åº¦ï¼Œç®—æ˜¯ä¸€ç§å®šåˆ¶ä¼˜åŒ–ã€‚è€Œä¸”å¢å¤šäº†æ’å…¥åˆ é™¤çš„æ“ä½œã€‚<br><br>è€å¸ˆï¼Œå¶è§‰å¾—ä¸ä¸€æ ·ï¼Œæ ¸å¿ƒä¸åŒåœ¨äºä¸Šè¯‰æ–¹æ¡ˆä¸ç”¨åŠ é”ï¼Œä¸æ˜¯è¿›è¡Œcount=count+xæ“ä½œï¼Œè€Œæ˜¯è®°å½•+xï¼Œå½“ç„¶åé¢è‚¯å®šè¦åˆå¹¶ï¼Œæ¯”å¦‚é€šè¿‡checkpointã€‚","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432725,"discussion_content":"æ²¡ç†è§£ä½ è¯´çš„ï¼Œè¿™æ ·å¢åŠ æŒºå¤§çš„é¢å¤–å­˜å‚¨æˆæœ¬","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544762641,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":49686,"user_name":"AstonPutting","can_delete":false,"product_type":"c1","uid":1303239,"ip_address":"","ucode":"1DB579A7922964","user_header":"https://static001.geekbang.org/account/avatar/00/13/e2/c7/d6a0927a.jpg","comment_is_top":false,"comment_ctime":1544752516,"is_pvip":false,"replies":[{"id":"17910","content":"éƒ½æœ‰","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544762333,"ip_address":"","comment_id":49686,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1544752516","product_id":100020801,"comment_content":"è€å¸ˆï¼Œè¯·é—®æ™®é€šç´¢å¼•çš„å¶å­èŠ‚ç‚¹æ˜¯åªå¸¦æœ‰ä¸»é”®å€¼è¿˜æ˜¯å¸¦æœ‰ä¸»é”®å€¼å’Œç´¢å¼•æ‰€åœ¨åˆ—çš„æ•°æ®ã€‚","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432722,"discussion_content":"éƒ½æœ‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544762333,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":49680,"user_name":"kafka","can_delete":false,"product_type":"c1","uid":1310147,"ip_address":"","ucode":"D8189D71C0F3C6","user_header":"https://static001.geekbang.org/account/avatar/00/13/fd/c3/565f0c57.jpg","comment_is_top":false,"comment_ctime":1544751994,"is_pvip":false,"replies":[{"id":"17914","content":"é‚£æœ‰ç‚¹å¯æ€•äº†â€¦ ","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544762733,"ip_address":"","comment_id":49680,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1544751994","product_id":100020801,"comment_content":"å› ä¸ºæ¯ä¸ªä¼šè¯æ‰€èƒ½çœ‹åˆ°çš„countï¼ˆ*ï¼‰ä¸ä¸€è‡´ï¼Œæˆ‘ä»¬ç”¨redisç¼“å­˜è®°å½•countï¼ˆ*ï¼‰è®¡æ•°å€¼çš„æ—¶å€™ï¼Œæ˜¯ä¸æ˜¯éœ€è¦å¯¹äºæ¯ä¸ªä¼šè¯éƒ½æœ‰ä¸€ä»½countï¼ˆ*ï¼‰ç¼“å­˜ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432717,"discussion_content":"é‚£æœ‰ç‚¹å¯æ€•äº†â€¦ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544762733,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":49664,"user_name":"æ…§é‘«coming","can_delete":false,"product_type":"c1","uid":1324385,"ip_address":"","ucode":"7BAC9CA255630E","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLE4LYb3jrH63ZV98Zpc8DompwDgb1O3nffMoZCmiaibauRyEFv6NDNsST9RWxZExvMLMWb50zaanoQ/132","comment_is_top":false,"comment_ctime":1544750810,"is_pvip":false,"replies":[{"id":"17916","content":"æ™®é€šselectæŸ¥è¯¢ï¼Œ è¯»ä¸åŠ è¯»é”çš„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544762956,"ip_address":"","comment_id":49664,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1544750810","product_id":100020801,"comment_content":"ä¸å¥½æ„æ€ï¼Œæ™“æ–Œè€å¸ˆï¼Œæ˜¯æˆ‘æ²¡è®²æ¸…æ¥šğŸ˜‚ï¼Œæ˜¯äº‹åŠ¡Aè¦å¯¹è®¡æ•°å€¼è¿™ä¸ªå­—æ®µè¿›è¡Œè¯»æ“ä½œï¼Œè€Œæ­¤æ—¶äº‹åŠ¡Bè¦å¯¹è®¡æ•°å€¼è¿™ä¸ªå­—æ®µè¿›è¡Œï¼‹1æ“ä½œï¼Œ(åº”è¯¥æ˜¯åŒä¸€è¡Œæ•°æ®å§)ï¼Œè¿™æ ·ä¼šä¸ä¼šAæ‹¿äº†è®¡æ•°å€¼è¿™è¡Œçš„è¯»é”ï¼Œäº‹åŠ¡Bè¦ç­‰å¾…å®ƒé‡Šæ”¾","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432709,"discussion_content":"æ™®é€šselectæŸ¥è¯¢ï¼Œ è¯»ä¸åŠ è¯»é”çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544762956,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":49648,"user_name":"éƒ­å¥","can_delete":false,"product_type":"c1","uid":1102204,"ip_address":"","ucode":"169645EBF3B46C","user_header":"https://static001.geekbang.org/account/avatar/00/10/d1/7c/4639f22c.jpg","comment_is_top":false,"comment_ctime":1544749715,"is_pvip":false,"replies":[{"id":"17879","content":"Redisè·ŸMySQL ä¸¤ä¸ªä¸åŒç³»ç»Ÿï¼Œä½ æ˜¯æ€ä¹ˆå®ç°åˆ†å¸ƒå¼äº‹åŠ¡çš„ã€‚è¯´ä¸‹ä½ çš„è®¾è®¡","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544750649,"ip_address":"","comment_id":49648,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1544749715","product_id":100020801,"comment_content":"è€å¸ˆï¼Œredisè®°å½•countçš„æˆ‘æœ‰ç‚¹ç–‘é—®ï¼Œåœ¨ä»£ç å®ç°çš„ï¼Œå°†rediså’Œæ·»åŠ è¯­å¥æ”¾åœ¨ä¸€ä¸ªäº‹åŠ¡é‡Œä¸å¯ä»¥å—ï¼Ÿä¸¤ä¸ªéƒ½æ·»åŠ å®Œåœ¨è¿›è¡Œcommitï¼Œå¤–é¢å°±çœ‹ä¸è§ä¸ä¸€è‡´çš„é—®é¢˜äº†ã€‚","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432701,"discussion_content":"Redisè·ŸMySQL ä¸¤ä¸ªä¸åŒç³»ç»Ÿï¼Œä½ æ˜¯æ€ä¹ˆå®ç°åˆ†å¸ƒå¼äº‹åŠ¡çš„ã€‚è¯´ä¸‹ä½ çš„è®¾è®¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544750649,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":49631,"user_name":"Geek_477c02","can_delete":false,"product_type":"c1","uid":1218578,"ip_address":"","ucode":"CB9A714A50B977","user_header":"https://static001.geekbang.org/account/avatar/00/12/98/12/a169bdcd.jpg","comment_is_top":false,"comment_ctime":1544748464,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1544748464","product_id":100020801,"comment_content":"å…ˆæ’å…¥å†æ›´æ–°","like_count":0},{"had_liked":false,"id":49618,"user_name":"amazon1011","can_delete":false,"product_type":"c1","uid":1001032,"ip_address":"","ucode":"BD745BDCBD7059","user_header":"https://static001.geekbang.org/account/avatar/00/0f/46/48/e959b1e0.jpg","comment_is_top":false,"comment_ctime":1544747443,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1544747443","product_id":100020801,"comment_content":"å…ˆæ’å…¥æ“ä½œè®°å½•å†æ›´æ–°è®°æ•°è¡¨ï¼Œå‡å°‘è®¡æ•°è¡¨è¡Œé”çš„æŒæœ‰æ—¶é—´ï¼Œä½†æ˜¯è¿™ä¸ªè®¡æ•°è¡¨è¿˜æ˜¯é¢ä¸´é˜»å¡é—®é¢˜åœ¨é«˜å¹¶å‘çš„æƒ…å†µä¸‹é™ä½äº†ç³»ç»Ÿçš„ååé‡","like_count":0},{"had_liked":false,"id":49612,"user_name":"handylin","can_delete":false,"product_type":"c1","uid":1318193,"ip_address":"","ucode":"23EC4EFDB5FFE6","user_header":"https://static001.geekbang.org/account/avatar/00/14/1d/31/dc8ea649.jpg","comment_is_top":false,"comment_ctime":1544747024,"is_pvip":false,"replies":[{"id":"17863","content":"é»˜è®¤çš„éš”ç¦»çº§åˆ«æ˜¯å¯é‡å¤è¯»ï¼Œ<br>å½“ç„¶æ˜¯å¯ä»¥æ‰‹åŠ¨æ”¹æˆè¯»æäº¤<br>","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544749706,"ip_address":"","comment_id":49612,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1544747024","product_id":100020801,"comment_content":"ä¸ºä»€ä¹ˆåˆè¯´å¯é‡å¤è¯»æ˜¯innodbäº‹åŠ¡çš„çº§åˆ«å‘¢ï¼Œ ä¸æ˜¯è¯»æäº¤å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432686,"discussion_content":"é»˜è®¤çš„éš”ç¦»çº§åˆ«æ˜¯å¯é‡å¤è¯»ï¼Œ\nå½“ç„¶æ˜¯å¯ä»¥æ‰‹åŠ¨æ”¹æˆè¯»æäº¤\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544749706,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":49607,"user_name":"å³°","can_delete":false,"product_type":"c1","uid":1056019,"ip_address":"","ucode":"C53CB64E8E7D19","user_header":"https://static001.geekbang.org/account/avatar/00/10/1d/13/31ea1b0b.jpg","comment_is_top":false,"comment_ctime":1544746956,"is_pvip":true,"replies":[{"id":"17866","content":"æˆ‘ç»†ç»†æ€è€ƒäº†ä¸€ä¸‹ä½ è¿™ä¸ªæ–¹æ¡ˆï¼Œ<br>æ„Ÿè§‰æœ¬è´¨ä¸Šè·Ÿæˆ‘ä»¬æ–‡ä¸­çš„æ–¹æ¡ˆæ˜¯ä¸€è‡´çš„â€¦<br>","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1544750086,"ip_address":"","comment_id":49607,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1544746956","product_id":100020801,"comment_content":"æ›´æ–°è®¡æ•°åº”è¯¥ååšï¼Œå› ä¸ºå®ƒçš„è®¿é—®æ›´æ–°çš„å¹¶å‘åº¦æ›´å¤§ï¼Œåº”è¯¥å°½é‡ç¼©å‡å é”æ—¶é—´ã€‚<br><br>é—®é¢˜  ä¸ºä»€ä¹ˆä¸å¯ä»¥æ¢ç§æ€è·¯å®ç°è¡¨æ€»ä½“è®°å½•æ€»æ•°çš„æŒä¹…åŒ–å­˜å‚¨å‘¢ï¼Ÿæ¯”å¦‚è¡¨è®°å½•æ˜¯ä¸€ä¸ªåªä¼šåŠ æˆ–å‡çš„ç»Ÿè®¡æŒ‡æ ‡ï¼Œå¹¶ä¸”æ›´æ–°ä¸éœ€è¦å†è¯»å–å®ƒï¼Œæ‰€ä»¥æˆ‘åªéœ€è®°å½•æŸäº‹åŠ¡å¢åŠ ä¸€æ¡è®°å½•ï¼ŒæŸäº‹åŠ¡å‡å°‘å¤šå°‘æ¡è®°å½•ï¼Œcoun(*)åœ¨è¿™ä¸ªåŸºç¡€ä¸Šé‡‡ç”¨mvccå»å¾—åˆ°å½“å‰ä¼šè¯ä¸‹çš„è¡¨è®°å½•æ€»æ•°ä¸æ˜¯ç”¨ä¸ç€æ‰«æå…¨è¡¨ã€‚å½“ç„¶è¿™æ ·åšï¼Œæ— ç–‘å¢åŠ äº†ä»£ç çš„å¤æ‚åº¦ï¼Œç®—æ˜¯ä¸€ç§å®šåˆ¶ä¼˜åŒ–ã€‚è€Œä¸”å¢å¤šäº†æ’å…¥åˆ é™¤çš„æ“ä½œã€‚","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432685,"discussion_content":"æˆ‘ç»†ç»†æ€è€ƒäº†ä¸€ä¸‹ä½ è¿™ä¸ªæ–¹æ¡ˆï¼Œ\næ„Ÿè§‰æœ¬è´¨ä¸Šè·Ÿæˆ‘ä»¬æ–‡ä¸­çš„æ–¹æ¡ˆæ˜¯ä¸€è‡´çš„â€¦\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544750086,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":49595,"user_name":"Geek_06c355","can_delete":false,"product_type":"c1","uid":1181547,"ip_address":"","ucode":"238E29DC994E6F","user_header":"https://static001.geekbang.org/account/avatar/00/12/07/6b/a0a99de6.jpg","comment_is_top":false,"comment_ctime":1544744727,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1544744727","product_id":100020801,"comment_content":"å…ˆå†™å…¥æ•°æ®ï¼Œåæ›´æ–°ï¼Œå› ä¸ºæ›´æ–°è¡¨è®°å½•æ•°æ˜¯è¡¨çº¬åº¦çš„çƒ­ç‚¹æ“ä½œï¼Œå°½é‡å°‘å ç”¨äº‹åŠ¡æ—¶é—´","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":158218,"discussion_content":"å…ˆæ’å…¥å†æ›´æ–°èƒ½æœ€å¤§ç¨‹åº¦å‡å°‘äº‹åŠ¡ä¹‹é—´çš„é”ç­‰å¾…ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1580561978,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}