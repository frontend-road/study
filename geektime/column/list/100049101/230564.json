{"id":230564,"title":"13 | 数据研发就只是写代码吗？","content":"<p>你好，我是郭忆。</p><p>到现在，我已经讲了10几个数据中台的工具产品，除此之外，我还提到了数据产品、数据架构师、数据开发、应用开发、分析师……多个角色。既然数据中台要用到这么多工具，又涉及这么多角色，如果没有配套的协同流程和规范，那也没办法达到数据中台高效、高质量、低成本的建设目标。来看几件有意思的事儿。</p><p>郝有才（数据开发）修改了数据中台一个数据加工任务，变更了产出的数据表字段，因为没有通知到下游数据的负责人，结果影响了10多个任务，大量数据应用出现异常。这属于比较典型的“协作事故”，咱们再接着看一个跨团队之间协作的问题。</p><p>张漂亮（业务系统的服务端开发）今天业务上线，她提交了数据库变更工单，修改了商品交易明细表的商品类型枚举值。但这个升级并没有通知数据部门，结果导致基于商品类型计算的多个指标数值出现错误，严重影响了第二天多个数据产品的数据产出。</p><p>这些教训告诉我们，建设数据中台是一项系统性的工程，<strong>你不但要有技术的思维，更要有管理者的视角。</strong>所以接下来，我会带你了解数据中台中三个最常见的协作流程：数据研发、数据分析、资产管理。<strong>我们一起看一下，不同角色使用场景化的工具产品是如何进行高效协作的？</strong></p><p>因为流程协作涉及的料也很多，我会用两讲的时间来讲这部分内容。今天，我们就先从数据研发的场景讲起，如果你是一名普通的数据开发，你肯定很熟悉下面的这些场景。</p><!-- [[[read_end]]] --><p>当然，在学习的过程中，我建议你关注这样几个重点，因为它们对于你理解一个协作流程如何运转非常关键：</p><ul>\n<li>一个流程中涉及到了哪些环节？</li>\n<li>这些环节涉及到哪些角色参与？</li>\n<li>承载这个场景的工具产品是什么？</li>\n<li>这些环节之间是如何衔接的？</li>\n</ul><p>话不多说，开始今天的内容。</p><p>也许在很多人的印象中，数据研发就是写代码，其实对大规模、标准化的数据建设来说，这远远不够。在网易，标准的数据研发流程包括四个阶段：需求阶段、开发阶段、交付阶段和运维阶段。每个阶段中又涉及多个环节，如果你缺失了这些环节，就很容易出问题，数据也会因此没办法高效、高质量的交付。</p><p><img src=\"https://static001.geekbang.org/resource/image/13/fc/135074b35571f137b6299fcf058d12fc.jpg?wh=1142*465\" alt=\"\"></p><h2>需求阶段</h2><p>需求是数据开发的起点。如果想让后面的流程高效运作，那需求的定义一定要清晰，这样协作者（数据开发、应用开发、数据产品/分析师）对需求的理解才能一致。</p><p>在数据中台中，数据需求通常是以指标的形式出现的，比如李天真提了个需求（计算每日黑卡会员的消费额），而承载这个场景的产品就是我们<a href=\"https://time.geekbang.org/column/article/223715\">05讲</a>的指标系统。</p><p>那什么时候会提需求？又什么时候会频繁用到指标系统呢？</p><p>一般来说，分析师在制作新的报表，数据产品经理在策划新的数据产品时，会提一些新的指标需求，然后就会在指标系统登记指标（包括指标的业务口径、可分析维度、关联的应用、时间周期信息）。这个时候，指标的状态就是待评审状态。</p><p><img src=\"https://static001.geekbang.org/resource/image/1d/60/1db47733f4f29b293afa34485ce00b60.jpg?wh=1142*529\" alt=\"\" title=\"指标系统需求登记示意图\"></p><p>然后，管理指标的数据产品（没有这个角色的，分析师也行）会叫上相关的数据开发、应用开发、提出这个需求的分析师或者数据产品，对指标进行评审：</p><ul>\n<li>指标是新指标还是存在的指标；</li>\n<li>如果是新指标，那么是原子指标还是派生指标；</li>\n<li>确认指标业务口径、计算逻辑和数据来源。</li>\n</ul><p>那评审后的结果又是什么呢？</p><ul>\n<li>如果是新指标，就在指标系统上录入相关信息，指标状态是待开发状态；</li>\n<li>如果是存在的指标，应用开发可以直接找到这个指标所在的表，然后看这个表是否已经有现成的接口可以被直接使用，如果有，就直接申请授权，如果没有，可以基于这张表发布一个新的接口。</li>\n</ul><h2>研发阶段</h2><p>现在，新指标的状态是待开发状态，接下来就要进入开发阶段。在这个阶段，你要秉持“先设计，后开发”的理念。为啥这么说呢？</p><p>因为很多开发都习惯边开发、边设计，想到哪里，代码写到哪里，这其实并不是一个好习惯。这会造成缺少整体的设计，开发过程中经常出现表结构频繁修改、代码返工、整体研发效率不高。</p><p>所以说，我们要先做好模型的设计，而承载这个场景的工具产品就是<a href=\"https://time.geekbang.org/column/article/224516\">06讲</a>的模型设计中心。<strong>这里我再强调一下，</strong>数据开发在设计的过程中，可能要用到一些已经存在的数据，这时就要利用数据地图发现已经存在的表，然后理解这些表中数据的准确含义。</p><p>除此之外，在模型设计过程中，要对模型中每个字段关联前面设计好的指标，以及可分析的维度。比如，我们对下图的account字段，标记为指标“用户消费金额”，user标记为“买家维度”。这个标记会把模型和指标建立关联关系，然后把前面设计的指标落实到了表中。</p><p><img src=\"https://static001.geekbang.org/resource/image/b6/f4/b6acb7c9ce4f37118d8dce82bcbd83f4.jpg?wh=1142*665\" alt=\"\" title=\"模型设计中心，新建模型示意图\"></p><p>到这一步，模型设计还不算完，数据开发还要提交模型上线工单。工单会根据模型所属的主题域，流转到对应域的负责人，并通知对应域负责人进行审批。审批通过后，模型会自动发布到生产环境。</p><p><img src=\"https://static001.geekbang.org/resource/image/2d/78/2dde6ba76dca0bcdb066293c0a279978.jpg?wh=1142*670\" alt=\"\" title=\"模型发布上线工单示意图\"></p><p>这里你要注意一下，数据域的负责人一般是数据架构师，他需要检查数据是不是重复建设，要保证自己管理的域下模型设计的相关复用性、完善度、规范性的相关指标。</p><p>当然了，除了新建模型之外，已有模型也会存在变更的情况（比如增加一个字段或变更字段枚举值）。这个时候，要根据数据血缘，通知所有依赖这个表的下游任务的负责人，在负责人确认以后，才能进行模型变更。</p><p>比如，甄可爱是一名数据开发，她接到需求完成模型设计之后，就要开始模型的开发了。首先她要把数据从业务系统导入数据中台中，那她第一步就要申请对应数据库的权限，然后在数据传输中心建立数据传输任务，把数据同步过来。</p><p><img src=\"https://static001.geekbang.org/resource/image/db/aa/dbb914bcbde0af3a383488d9ff8b48aa.jpg?wh=1142*801\" alt=\"\"></p><p>接下来，要清洗和加工数据，那她要在数据开发中心开发数据的ETL任务，根据之前模型设计，编写对应任务的代码。</p><p>任务代码完成以后，甄可爱要在数据测试中心，验证数据：</p><ul>\n<li>一个是进行数据探查，确定新加工的数据是否符合预期；</li>\n<li>另外一类是对原有模型的重构，新增字段或者更新部分字段。此时不仅要验证新加工数据的正确性，还要确保原有未修改数据与修改前是否有改变，我们管它叫数据的比对。</li>\n</ul><p>数据测试中心还提供了静态SQL 代码检查的功能，主要是发现一些使用固定分区、使用测试环境的库、使用笛卡尔积等代码问题，我们把这个过程叫SQL Scan。 在我们的开发规范中，只有通过SQL Scan的代码才被允许发布上线。</p><p>在数据测试完成后，甄可爱还要在数据质量中心里配置稽核校验规则。目的是对任务产出的数据进行校验，在数据出现问题时第一时间发现问题，快速地恢复故障。</p><p>在开发规范中，主键唯一性监控、表行数绝对值以及波动率监控等属于基础监控，是必须要添加的，另外还需要根据业务过程，添加一些业务规则，比如一个商品只能归属一个类目等。</p><p>配置完稽核规则，甄可爱要任务发布上线了。任务发布上线，要设置调度周期，配置任务依赖，设置报警规则以及报警对象，选择提交的队列。</p><p>任务发布与模型发布一样，也需要进行审核。首先甄可爱需要发起任务发布上线的工单，然后工单会根据产出表所在域流转到对应域负责人贾英俊审批，审批的主要内容：</p><ul>\n<li>确认任务参数设置是否合理，比如Spark Executor 分配内存和CPU资源；</li>\n<li>检查任务依赖、报警设置是否正确，核心任务必须要开启循环报警，同时要开启报警上报；</li>\n<li>重点审核稽核规则是否完备，是否有缺失需要补充。</li>\n</ul><p>在审批通过以后，任务就会发布上线，每天就会有数据源源不断的产生了。</p><p>到这里，甄可爱就完成了所有模型研发的流程了。你看，虽然是一个模型研发的环节，可涉及这么多的工具产品，还包括了多个审批流程，但是这些工具和流程，都是标准化研发不可或缺的。例如如果不测试，就会导致大量的BUG上线，如果没有稽核监控规则配置，就会导致出了BUG还不知道，等着被投诉。</p><p>而数据研发完，接下来就是数据的交付了，如何让数据快速接入到数据应用中呢？</p><h2>交付阶段</h2><p>在数据中台之前，其实并不存在单独的交付阶段，因为数据开发加工好数据应用需要的表，他的工作就已经结束了，剩下的就是应用开发的事儿了。应用开发需要把数据导出到应用所属的数据库，然后开发API接口，供客户端调用。</p><p>数据中台，提出了数据服务化的思想，数据中台暴露的不再直接是数据，而是服务。数据开发不仅需要加工数据，还需要把数据发布成API接口或者其他服务形式，提供给业务系统或者数据产品调用，从而形成了单独的数据交付阶段。</p><p>数据服务承载了数据交付的整个流程。数据开发，可以直接选择一张数据中台的Hive表，然后在数据服务上创建一个数据抽取任务，把数据抽取到中间存储中（中间存储可以是DB，KV，MPP等）。这个过程，数据服务会自动根据中台数据的产出时间，在调度系统中创建数据导出任务，建立到产出任务的依赖。</p><p>接下来，数据开发可以基于中间存储发布API接口，定义输入和输出参数，测试API后发布上线。这个时候，数据开发的工作才算完成。</p><p>最后，应用开发在数据服务上创建应用，然后申请对该接口的授权，等数据开发审批通过后，就可以直接调用该接口获取数据了。</p><p>数据交付完呢，还不算完，接下来数据开发的工作，还需要保证任务的正常运行，这就进入了第四个阶段，运维阶段。</p><h2>运维阶段</h2><p>承载运维阶段的工具产品主要是任务运维中心。</p><p>在这个阶段的第一责任人是任务负责人（一般是这个任务对应的数据开发）。这里有这样几个过程：</p><ul>\n<li>数据开发接到报警后，要第一时间认领报警；</li>\n<li>任务运维中心提供了报警认领的功能，数据开发点击认领，代表数据开发开始处理这个报警；</li>\n<li>如果报警迟迟没有人认领，任务运维中心会每隔5分钟会发起一次电话报警，直到报警认领；</li>\n<li>如果报警一直没有认领，系统会在3次报警，15分钟后进行报警的上报，发送给模型所在域的负责人。</li>\n</ul><p>这样的机制设计，确保了报警能够在第一时间被响应，我们在实施这项机制后，报警的平均响应时间从2个小时缩短到15分钟内。</p><p>那么当数据开发认领报警之后，需要开始排查，首先要确认上游依赖任务稽核规则是否有异常（也就是输入数据是否存在异常）。如果没有异常，数据开发要通过任务运行日志，排查当前任务的问题原因，并进行紧急修复，接下来再重跑该任务，任务重跑完，还要通过数据地图，找到所有依赖该表的下游任务负责人，发送“下游任务需要进行重跑”的通知。</p><p><img src=\"https://static001.geekbang.org/resource/image/b6/98/b6c56a1812116b9961a443ca6e11ab98.jpg?wh=1142*664\" alt=\"\" title=\"数据地图通知下游任务负责人示意图\"></p><p>故障恢复完，还要进行复盘，其中重要的事情就是补充稽核规则，确保不再出现犯过的错误。通过这样不断沉淀和记录，数据中台的数据质量就会越来越高，数据质量问题也会减少。</p><h2>课堂总结</h2><p>你看，数据研发不仅仅只是写代码这么简单吧？在这四个阶段中，你经常容易忽略的是需求阶段和交付阶段，如果需求定义不一致，就很容易导致后面的研发返工，如果没有标准的数据交付流程，就会数据接入慢，同时交付后维护的复杂度会增加。我再强调两个重点：</p><ul>\n<li>数据研发的需求是从指标的规范化定义开始，数据产品、数据开发和应用开发要建立一致的指标业务口径、计算逻辑和数据来源，从而才能确保需求被高质量的交付；</li>\n<li>数据服务承载了数据标准化交付的功能，通过发布成服务API的方式，把数据中台的数据接入到数据产品中。</li>\n</ul><p><img src=\"https://static001.geekbang.org/resource/image/b5/a9/b5dded288ffee1c3b09fdd6b566efda9.jpg?wh=1142*910\" alt=\"\"></p><p>数据研发好之后，数据就要被使用了，下一节课，我们再以数据使用者的角度以及数据资产管理的视角，带你了解后面两个流程：数据分析流程，带你看一下数据是如何被使用的；然后是资产管理流程，看一下如何有效的实现精细化的资产管理。</p><h2>思考时间</h2><p>在你日常的数据建设中，遇到过哪些因为流程协作导致的问题呢？ 欢迎你在留言区与我互动。</p><p>最后，感谢你的阅读，如果这节课让你有所收获，也欢迎你将它分享给更多的朋友。</p>","comments":[{"had_liked":false,"id":213122,"user_name":"吴科🍀","can_delete":false,"product_type":"c1","uid":1112547,"ip_address":"","ucode":"8F2C317887A323","user_header":"https://static001.geekbang.org/account/avatar/00/10/f9/e3/2529c7dd.jpg","comment_is_top":false,"comment_ctime":1588306797,"is_pvip":false,"replies":[{"id":"80215","content":"HI， 吴科，<br>今年之前，网易的离线和实时数据架构，还是采用的Lamda架构，即实时采用kafka+flink的方式，离线采用spark+hdfs的方式，从ods原始数据开始，kafka会归档一份数据到hdfs，然后分别计算，在数据应用场景上，T+1的数据用离线计算的，T+0的数据用实时链路的。历史数据以离线计算为准。<br><br>今年，我们引入的iceburg，正在研发批流一体的实时数据中台架构，iceburg可以实现upsert功能，可以实时更新，避免merge操作。用iceburg统一离线和实时的存储，同时在计算引擎上，主要使用flink，然后辅助用Spark进行校验。目前整套数据湖的方案还在研发中，当然Iceburg也存在一些挑战，比如怎么和现有的impala mpp集成，怎么基于iceburg文件粒度的元数据统计优化计算引擎性能，都是我们目前正在推进的工作。<br><br>感谢你的阅读~祝好~","user_name":"作者回复","user_name_real":"郭忆","uid":"1319022","ctime":1589369957,"ip_address":"","comment_id":213122,"utype":1}],"discussion_count":1,"race_medal":0,"score":"48832947053","product_id":100049101,"comment_content":"五一节，老师还在发布新课，赞！<br>我们业务部门提新需求，首先去标签系统提需求，如果是已有的指标就分配相关的权限。如果是新的指标就分配给数据开发人员进行开发。<br>传统的离线指标，关键上游系统变更沟通好，及时通知数据研发部门，更新元数据管理。数据研发完成后，根据数据依赖配置好调度，并设置报警规则。<br>对实时指标还需要进一步宣导，比如实时计算近三个月的客服拨打各省电话各渠道的排名，范围太大实时计算几乎实现不了。<br>实时计算指标的窗口范围，对应spark&#47;flink的窗口大小，一般不要超过1-2天，否则计算压力会很大。<br>目前的实时计算，还是需要写java或者scala的任务。后续上线实时计算平台，可以写SQL完成实时任务的开发，提高研发效率。<br>老师，你们实时计算与离线计算是怎么分工的，数据开发需要具备怎样的技能呢。","like_count":11,"discussions":[{"author":{"id":1319022,"avatar":"https://static001.geekbang.org/account/avatar/00/14/20/6e/ad4dac0a.jpg","nickname":"郭忆","note":"","ucode":"496AEB07A40140","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":493686,"discussion_content":"HI， 吴科，\n今年之前，网易的离线和实时数据架构，还是采用的Lamda架构，即实时采用kafka+flink的方式，离线采用spark+hdfs的方式，从ods原始数据开始，kafka会归档一份数据到hdfs，然后分别计算，在数据应用场景上，T+1的数据用离线计算的，T+0的数据用实时链路的。历史数据以离线计算为准。\n\n今年，我们引入的iceburg，正在研发批流一体的实时数据中台架构，iceburg可以实现upsert功能，可以实时更新，避免merge操作。用iceburg统一离线和实时的存储，同时在计算引擎上，主要使用flink，然后辅助用Spark进行校验。目前整套数据湖的方案还在研发中，当然Iceburg也存在一些挑战，比如怎么和现有的impala mpp集成，怎么基于iceburg文件粒度的元数据统计优化计算引擎性能，都是我们目前正在推进的工作。\n\n感谢你的阅读~祝好~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589369957,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":213522,"user_name":"leslie","can_delete":false,"product_type":"c1","uid":1324255,"ip_address":"","ucode":"798E7C1CC98CC2","user_header":"https://static001.geekbang.org/account/avatar/00/14/34/df/64e3d533.jpg","comment_is_top":false,"comment_ctime":1588456977,"is_pvip":false,"replies":[{"id":"79199","content":"对的哦，看来你也悟到了，其实数据中台和由微服务构建的技术中台很多技术原理都是相通的，比如数据服务，跟微服务中API网关有异曲同工之妙，这些例子还有很多，我只能说技术的原理都是相通，互相借鉴的，学透了一个，另外一个就会觉得似曾相识，当然，你也可以看看，数据中台中的核心知识点，是不是可以应用到其他的领域，比如AI中台等等，你一定也可以有新的发现。<br><br>很多创新都是把一些其他领域实践过方法论应用在一个新的领域，解决了新领域的某些问题，所以沉淀这些方法论就很重要，这也是每个公司为什么在职级晋升答辩时候，很看重这方面能力的原因。<br><br>这里多说了两句，希望对你有所帮助，感谢你的留言😃","user_name":"作者回复","user_name_real":"郭忆","uid":"1319022","ctime":1588554742,"ip_address":"","comment_id":213522,"utype":1}],"discussion_count":1,"race_medal":0,"score":"40243162641","product_id":100049101,"comment_content":"数据中台之中还是涉及了CICD和SRE的东西，看来某些知识其实现在的边界越来越淡了，没有绝对的界限-都是当下。","like_count":9,"discussions":[{"author":{"id":1319022,"avatar":"https://static001.geekbang.org/account/avatar/00/14/20/6e/ad4dac0a.jpg","nickname":"郭忆","note":"","ucode":"496AEB07A40140","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":493802,"discussion_content":"对的哦，看来你也悟到了，其实数据中台和由微服务构建的技术中台很多技术原理都是相通的，比如数据服务，跟微服务中API网关有异曲同工之妙，这些例子还有很多，我只能说技术的原理都是相通，互相借鉴的，学透了一个，另外一个就会觉得似曾相识，当然，你也可以看看，数据中台中的核心知识点，是不是可以应用到其他的领域，比如AI中台等等，你一定也可以有新的发现。\n\n很多创新都是把一些其他领域实践过方法论应用在一个新的领域，解决了新领域的某些问题，所以沉淀这些方法论就很重要，这也是每个公司为什么在职级晋升答辩时候，很看重这方面能力的原因。\n\n这里多说了两句，希望对你有所帮助，感谢你的留言😃","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588554742,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":221330,"user_name":"Weehua","can_delete":false,"product_type":"c1","uid":1170152,"ip_address":"","ucode":"91C0C2699D4EE4","user_header":"https://static001.geekbang.org/account/avatar/00/11/da/e8/d49dfa94.jpg","comment_is_top":false,"comment_ctime":1590475477,"is_pvip":false,"replies":[{"id":"81655","content":"HI，WeehuaZheng，我在一个分享中，曾经提到过，数据建设过程中存在的效率、质量和成本的问题，背后深层次的原因，其实是流程规范、技术工具以及组织架构跟不上导致的。<br><br>而这三个原因又是环环相扣，息息相关的。组织架构是根本，流程规范和技术工具其实是相关的，流程规范制订的再好，必须要有技术工具帮他落地，否则流程规范就会成为空中楼阁，很难实施。<br><br>祝好~<br><br>","user_name":"作者回复","user_name_real":"郭忆","uid":"1319022","ctime":1590495104,"ip_address":"","comment_id":221330,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14475377365","product_id":100049101,"comment_content":"看了这篇文章，才了解到这么多数据平台工具和产品对数据中台来说是多么重要，完全的标准化开发流程，全部依赖工具自动化加人工审核。有这么一套东西，数据服务肯定质量高，效率高。","like_count":3,"discussions":[{"author":{"id":1319022,"avatar":"https://static001.geekbang.org/account/avatar/00/14/20/6e/ad4dac0a.jpg","nickname":"郭忆","note":"","ucode":"496AEB07A40140","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496425,"discussion_content":"HI，WeehuaZheng，我在一个分享中，曾经提到过，数据建设过程中存在的效率、质量和成本的问题，背后深层次的原因，其实是流程规范、技术工具以及组织架构跟不上导致的。\n\n而这三个原因又是环环相扣，息息相关的。组织架构是根本，流程规范和技术工具其实是相关的，流程规范制订的再好，必须要有技术工具帮他落地，否则流程规范就会成为空中楼阁，很难实施。\n\n祝好~\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590495104,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":213468,"user_name":"aof","can_delete":false,"product_type":"c1","uid":1062864,"ip_address":"","ucode":"5815D63C4926BC","user_header":"https://static001.geekbang.org/account/avatar/00/10/37/d0/26975fba.jpg","comment_is_top":false,"comment_ctime":1588424400,"is_pvip":false,"replies":[{"id":"79200","content":"或者看看是否可以说服自己的老板，建立一套规范化的数据研发，管理，应用流程？😁","user_name":"作者回复","user_name_real":"郭忆","uid":"1319022","ctime":1588554820,"ip_address":"","comment_id":213468,"utype":1}],"discussion_count":6,"race_medal":0,"score":"14473326288","product_id":100049101,"comment_content":"看了这篇，真的想去一个真正在做数据的公司！<br><br>想想自己公司在做的那些东西，真是在瞎搞😂😂","like_count":3,"discussions":[{"author":{"id":1319022,"avatar":"https://static001.geekbang.org/account/avatar/00/14/20/6e/ad4dac0a.jpg","nickname":"郭忆","note":"","ucode":"496AEB07A40140","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":493791,"discussion_content":"或者看看是否可以说服自己的老板，建立一套规范化的数据研发，管理，应用流程？😁","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588554820,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1062864,"avatar":"https://static001.geekbang.org/account/avatar/00/10/37/d0/26975fba.jpg","nickname":"aof","note":"","ucode":"5815D63C4926BC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":257468,"discussion_content":"之前有想过，一来因为自己还没过试用期，二来直属上级都是老板从别的部门拉过来的，啥也不懂，关键是他不懂还自以为懂自以为很简单。所以我就比较纠结…","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1588573685,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1247787,"avatar":"https://static001.geekbang.org/account/avatar/00/13/0a/2b/29536b21.jpg","nickname":"星坠","note":"","ucode":"536398A4BF2F7C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":287349,"discussion_content":"同感   推动不了规范化","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593422559,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1136345,"avatar":"https://static001.geekbang.org/account/avatar/00/11/56/d9/66aa42d6.jpg","nickname":"Nick","note":"","ucode":"2E8CF62EBEBAAB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":278974,"discussion_content":"只能先累积知识，合适的时候一点点推动了\n毕竟我们的想法和利益相关，和老板的相差还是很大的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591266274,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1945987,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/b1/83/c6dd1322.jpg","nickname":"你好","note":"","ucode":"F6ED43EF5FD164","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":271713,"discussion_content":"感同身受，做的内容感觉上升不到这个层次，但是这些东西也确实都是硬性的，恨不得把公司架构推到重来！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590163263,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1674783,"avatar":"https://static001.geekbang.org/account/avatar/00/19/8e/1f/f96bd42d.jpg","nickname":"落空","note":"","ucode":"EC6AD8FC982697","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":257194,"discussion_content":"跟我一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588526573,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":219481,"user_name":"louShang","can_delete":false,"product_type":"c1","uid":1011654,"ip_address":"","ucode":"881541DAB49E5C","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6f/c6/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1590030581,"is_pvip":false,"replies":[{"id":"81537","content":"你好，louShang，<br><br>模型设计完成以后，就进入到ETL开发的阶段，模型设计完成的是任务输入表和输出表的设计建模，ETL 完成的是任务代码的Coding。 当然，我们现在正在尝试的是，根据输入表和输出表，自动构建ETL任务，当然我们还仅仅是在集市层，没有复杂聚合场景下尝试，不过经过初步的测试，已经可以解放很大的数据研发的效能。<br><br>如果一些通过自动化代码构建无法完成的场景，是需要数据开发来构建对应的任务的。模型通过模型设计中心完成设计后，发布到测试环境，然后在测试环境开发对应的ETL任务，测试通过后，模型一键发布到生产环境，任务提交上线即可。<br><br>感谢你的提问，祝好~","user_name":"作者回复","user_name_real":"郭忆","uid":"1319022","ctime":1590409815,"ip_address":"","comment_id":219481,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10179965173","product_id":100049101,"comment_content":"没有看明白, 模型设计开发 、 任务设计开发的关系和衔接 ?   模型设计如果自动代码化, 并不能解决所有的业务分析需求场景,  肯定是需要单独的sql开发的, 这个时候, 模型和任务怎么衔接 ?  ","like_count":2,"discussions":[{"author":{"id":1319022,"avatar":"https://static001.geekbang.org/account/avatar/00/14/20/6e/ad4dac0a.jpg","nickname":"郭忆","note":"","ucode":"496AEB07A40140","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":495822,"discussion_content":"你好，louShang，\n\n模型设计完成以后，就进入到ETL开发的阶段，模型设计完成的是任务输入表和输出表的设计建模，ETL 完成的是任务代码的Coding。 当然，我们现在正在尝试的是，根据输入表和输出表，自动构建ETL任务，当然我们还仅仅是在集市层，没有复杂聚合场景下尝试，不过经过初步的测试，已经可以解放很大的数据研发的效能。\n\n如果一些通过自动化代码构建无法完成的场景，是需要数据开发来构建对应的任务的。模型通过模型设计中心完成设计后，发布到测试环境，然后在测试环境开发对应的ETL任务，测试通过后，模型一键发布到生产环境，任务提交上线即可。\n\n感谢你的提问，祝好~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590409815,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":213168,"user_name":"Sandflass","can_delete":false,"product_type":"c1","uid":1917246,"ip_address":"","ucode":"7B75396EEC92B5","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/ajNVdqHZLLCVPh0bcCMJAwtxBx0cCLlkqB9NckSp3I0LYSTlRezuRV0gpXGB0BCZbFDpvLbhBbzsk8cHvczZ7g/132","comment_is_top":false,"comment_ctime":1588320429,"is_pvip":false,"replies":[{"id":"79791","content":"我自己画图平时用的xmind的，编辑小姐姐会重新改一下，用keynote画的。","user_name":"作者回复","user_name_real":"郭忆","uid":"1319022","ctime":1589016456,"ip_address":"","comment_id":213168,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10178255021","product_id":100049101,"comment_content":"老师五一发课辛苦了，想问一下老师做思维导图的工具是什么呀？又可以画导图又可以画表格并关联多个表格，好赞啊。","like_count":2,"discussions":[{"author":{"id":1319022,"avatar":"https://static001.geekbang.org/account/avatar/00/14/20/6e/ad4dac0a.jpg","nickname":"郭忆","note":"","ucode":"496AEB07A40140","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":493698,"discussion_content":"我自己画图平时用的xmind的，编辑小姐姐会重新改一下，用keynote画的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589016456,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":228800,"user_name":"没什么大不了","can_delete":false,"product_type":"c1","uid":2004169,"ip_address":"","ucode":"0215F9B7D51016","user_header":"https://static001.geekbang.org/account/avatar/00/1e/94/c9/68e08b35.jpg","comment_is_top":false,"comment_ctime":1592812044,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5887779340","product_id":100049101,"comment_content":"提到协作，我有一个问题，经常有这种情况，应用层不愿意使用中台的产出表（现在还没有做到做成提供数据服务的阶段），原因是应用层一旦数据出问题，需要找数据中台的研发核查是什么原因，而数据中台的研发还需要一层一层往上找，甚至找到是业务系统的问题，这样应用层觉得比较麻烦，如果是应用层自己从ods层开发，那出问题后他能快速定位到问题而不需要通过数据中台的研发就能自己解决问题，但是这样的话就会存在数据被重复开发体系不了数据的模型的复用，造成资源的浪费，请问遇到这种情况要怎么协调才好呢？如果是源头数据出问题，那应用层不会管那么多的就会认为是数据中台的责任，数据中台研发又觉得委屈，感觉是吃力不讨好的那种","like_count":1,"discussions":[{"author":{"id":1170152,"avatar":"https://static001.geekbang.org/account/avatar/00/11/da/e8/d49dfa94.jpg","nickname":"Weehua","note":"","ucode":"91C0C2699D4EE4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":315413,"discussion_content":"我认为数据中台首先要对自己的服务和数据质量负责，但是要加强监控，及时发现问题。当然，有时候是上游出现了问题，但我们也要把职责划清楚，催促上游做好稳定性。","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1603271882,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":359769,"user_name":"Matt","can_delete":false,"product_type":"c1","uid":1096276,"ip_address":"北京","ucode":"B3A39DBAB367DC","user_header":"https://static001.geekbang.org/account/avatar/00/10/ba/54/e94ee326.jpg","comment_is_top":false,"comment_ctime":1665849556,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1665849556","product_id":100049101,"comment_content":"郭老师您好，我不确定是否应该在这一讲下面提问哈。但请问：业务role查询某个service的某个主题的数据，最终的SQL语句，底层的SQL，其实都是事先叫专人写好的吧？我冥冥中以为是业务需要的查询，底层是您那边的智能模块自动把需要的多个table join~ group by~~ having~~ where 的？请赐教，谢谢","like_count":0},{"had_liked":false,"id":248830,"user_name":"wang-possible","can_delete":false,"product_type":"c1","uid":1268939,"ip_address":"","ucode":"5639E96CD4F833","user_header":"https://static001.geekbang.org/account/avatar/00/13/5c/cb/65b38e27.jpg","comment_is_top":false,"comment_ctime":1600327909,"is_pvip":false,"replies":[{"id":"91840","content":"目前，这个是我们自研的，没看到有一些开源的工具产品。","user_name":"作者回复","user_name_real":"郭忆","uid":"1319022","ctime":1601381145,"ip_address":"","comment_id":248830,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1600327909","product_id":100049101,"comment_content":"请问，sql静态检查，有哪些开源工具吗？最好是可以自己设置规则的是，比如，关键字之间的相对位置，检查有无使用分区字段，sql嵌套层数","like_count":0,"discussions":[{"author":{"id":1319022,"avatar":"https://static001.geekbang.org/account/avatar/00/14/20/6e/ad4dac0a.jpg","nickname":"郭忆","note":"","ucode":"496AEB07A40140","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":505755,"discussion_content":"目前，这个是我们自研的，没看到有一些开源的工具产品。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1601381145,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":213046,"user_name":"JohnT3e","can_delete":false,"product_type":"c1","uid":1063982,"ip_address":"","ucode":"CF4AAAC933529C","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLdWHFCr66TzHS2CpCkiaRaDIk3tU5sKPry16Q7ic0mZZdy8LOCYc38wOmyv5RZico7icBVeaPX8X2jcw/132","comment_is_top":false,"comment_ctime":1588287297,"is_pvip":false,"replies":[{"id":"80219","content":"你好，能具体再描述一下纵向切分和横向切分分别代表什么含义么？<br><br>一般数据开发团队的人员划分中，是按照主题域进行组织划分的。一个主题域由几个数据开发负责。","user_name":"作者回复","user_name_real":"郭忆","uid":"1319022","ctime":1589370675,"ip_address":"","comment_id":213046,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1588287297","product_id":100049101,"comment_content":"目前遇到的问题：由于部门建设和人员能力原因，会将ETL纵向切成几个过程，每个过程由不同人去完成，导致整体上缺乏统一考虑，一次排查涉及多个人员，协调起来很费劲。个人认为对于数据开发还是横向切ETL，每个人负责一个或者几个ETL流程方便设计和维护，但同时对数据开发有一定的能力要求。","like_count":0,"discussions":[{"author":{"id":1319022,"avatar":"https://static001.geekbang.org/account/avatar/00/14/20/6e/ad4dac0a.jpg","nickname":"郭忆","note":"","ucode":"496AEB07A40140","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":493676,"discussion_content":"你好，能具体再描述一下纵向切分和横向切分分别代表什么含义么？\n\n一般数据开发团队的人员划分中，是按照主题域进行组织划分的。一个主题域由几个数据开发负责。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589370675,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1063982,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLdWHFCr66TzHS2CpCkiaRaDIk3tU5sKPry16Q7ic0mZZdy8LOCYc38wOmyv5RZico7icBVeaPX8X2jcw/132","nickname":"JohnT3e","note":"","ucode":"CF4AAAC933529C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":265060,"discussion_content":"如果数据处理过程是x轴，各个主题域是y轴。按照数据过程进行划分即是纵向，比如数据接入，数据标准化，数据模型构建，主题表生成等；按照主题域进行划分即是横向。由于面向用户的关系，各个地方都是独立的，数据开发研发出一个通用模型固化版本后，在各地部署后，再由现场人员实施其它本地性较强的流程，比如数据接入和标准化。可能会存在定制化或者需求，则走研发流程。这样做主要是减少数据开发的人员成本和各地版本维护更新问题","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1589371563,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2048357,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/41/65/bfe1eaea.jpg","nickname":"Aaron","note":"","ucode":"5985BAA70AD5AD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":287443,"discussion_content":"经常遇到业务系统变更不通知导致下游数据出问题，这个很头疼，有些经常打交道的知道了会通知，来了一波新人又一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593441148,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}