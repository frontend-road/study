{"id":642197,"title":"03｜巧用提示语，说说话就能做个聊天机器人","content":"<p>你好，我是徐文浩。</p><p>这一讲，我们来看看Open AI提供的Completion这个API接口。相信已经有不少人试过和ChatGPT聊天了，也有过非常惊艳的体验，特别是让ChatGPT帮我们写各种材料。那么，我们不妨也从这样一个需求开始吧。</p><p>这一讲里，我们没有选用目前常用的gpt-3.5-turbo或者gpt-4相关的模型，而是使用了 text-davinci-003 这个不是为了对话使用的模型。之所以这么做，是为了让你理解，其实基于大语言模型的聊天机器人，并没有什么秘密，也不过是通过简单的提示词进行“文本补全”的方式实现的。</p><h2>AI 客服</h2><p>在这一波AIGC浪潮之前，我也做过一个智能客服的产品。我发现智能客服的回答，往往是套用固定的模版。这个的缺点，就是每次的回答都一模一样。当然，我们可以设计多个模版轮换着表达相同的意思，但是最多也就是三四个模版，整体的体验还是相当呆板。</p><p>不过，有了GPT这样的生成式的语言模型，我们就可以让AI自动根据我们的需求去写文案了。只要把我们的需求提给Open AI提供的Completion接口，它就会自动为我们写出这样一段文字。</p><pre><code class=\"language-python\">from openai import OpenAI\nimport os\n\nclient = OpenAI(api_key = os.environ.get(\"OPENAI_API_KEY\"))\n\nCOMPLETION_MODEL = \"text-davinci-003\"\n\nprompt = '请你用朋友的语气回复给到客户，并称他为“亲”，他的订单已经发货在路上了，预计在3天之内会送达，订单号2021AEDG，我们很抱歉因为天气的原因物流时间比原来长，感谢他选购我们的商品。'\n\ndef get_response(prompt, temperature = 1.0, stop=None):\n    completions = client.completions.create (\n        model=COMPLETION_MODEL,\n        prompt=prompt,\n        max_tokens=1024,\n        n=1,\n        stop=stop,\n        temperature=temperature,        \n    )\n    message = completions.choices[0].text\n    return message\n</code></pre><!-- [[[read_end]]] --><pre><code class=\"language-python\">print(get_response(prompt))\n</code></pre><blockquote>\n<p>亲，您的订单已经顺利发货啦！订单号是2021AEDG，预计在3天之内会寄到您指定的地址。不好意思，给您带来了不便，原计划到货时间受天气原因影响而有所延迟。期待您收到衣服后给我们反馈意见哦！谢谢你选购我们的商品！</p>\n</blockquote><pre><code class=\"language-python\">print(get_response(prompt))\n</code></pre><blockquote>\n<p>亲，您的订单2021AEDG刚刚已经发出，预计3天之内就会送达您的手中。抱歉由于天气的原因造成了物流延迟，但我们会尽快将订单发到您的手中。感谢您对我们的支持！</p>\n</blockquote><p><strong>相同的提示语，连续调用两次之后，给到了含义相同、遣词造句不同的结果。</strong></p><p>我在这里列出了一段非常简单的代码。代码里面，我们给Open AI提供的Completion接口发送了一段小小的提示语（Prompt）。这段提示语要求AI用亲切的语气，告诉客户他的订单虽然已经发货，但是因为天气原因延迟了。并且我们还加了一个小小的语言风格上的要求，我们希望AI用朋友的口吻向用户说话，并且称用户为“亲”。然后，我们尝试连续用完全相同的参数调用了两次AI。</p><p>可以看到，AI的确理解了我们的意思，满足了我们的要求，给出了一段正确合理的回复。<strong>其中有两点我觉得殊为不易</strong><strong>。</strong></p><ol>\n<li>他的确用“亲”来称呼了用户，并且用了一些语气词，显得比较亲切。</li>\n<li>他正确地提取到了输入内容里的订单号，并且在回复内容里也把这个订单号返回给了用户。</li>\n</ol><p>而且，两次返回的文案内容意思是相同的，但是具体的遣词造句又有所不同。这样通过一句合理的提示语，我们就可以让自己的智能客服自己遣词造句，而不是只能套用一个固定的模版。</p><p>而每次回复的内容不一样，则归功于我们使用的一个参数temperature。这个参数的输入范围是0-2之间的浮点数，代表输出结果的随机性或者说多样性。在这里，我们选择了1.0，也就是还是让每次生成的内容都有些不一样。你也可以把这个参数设置为0，这样，每次输出的结果的随机性就会比较小。</p><p>我将temperature设置为0，你可以看到两句内容的遣词造句就基本一致了。</p><pre><code class=\"language-python\">print(get_response(prompt, 0.0))\n</code></pre><blockquote>\n<p>亲，您的订单2021AEDG已经发货，预计在3天之内会送达，由于天气原因，物流时间比原来长，我们深表歉意。感谢您选购我们的商品，祝您购物愉快！</p>\n</blockquote><pre><code class=\"language-python\">print(get_response(prompt, 0.0))\n</code></pre><blockquote>\n<p>亲，您的订单2021AEDG已经发货，预计在3天之内会送达。很抱歉因为天气的原因物流时间比原来长，感谢您选购我们的商品，祝您购物愉快！</p>\n</blockquote><p><strong>这个参数该怎么设置，取决于实际使用的场景。</strong>如果对应的场景比较严肃，不希望出现差错，那么设得低一点比较合适，比如银行客服的场景。如果场景没那么严肃，有趣更加重要，比如讲笑话的机器人，那么就可以设置得高一些。</p><p>既然看了temperature参数，我们也就一并看一下 Completion 这个接口里面的其他参数吧。</p><ul>\n<li>\n<p>第一个参数是 <strong>engine</strong>，也就是我们使用的是Open AI的哪一个引擎，这里我们使用的是 text-davinci-003，也就是现在可以使用到的最擅长根据你的指令输出内容的模型。当然，也是调用成本最高的模型。</p>\n</li>\n<li>\n<p>第二个参数是 <strong>prompt</strong>，自然就是我们输入的提示语。接下来，我还会给你更多使用提示语解决不同需求的例子。</p>\n</li>\n<li>\n<p>第三个参数是 <strong>max_tokens</strong>，也就是调用生成的内容允许的最大token数量。你可以简单地把token理解成一个单词。实际上，token是分词之后的一个字符序列里的一个单元。有时候，一个单词会被分解成两个token。比如，icecream是一个单词，但是实际在大语言模型里，会被拆分成 ice 和 cream 两个token。这样分解可以帮助模型更好地捕捉到单词的含义和语法结构。一般来说，750个英语单词就需要1000个token。我们这里用的 text-davinci-003 模型，允许最多有4096个token。需要注意，这个数量既包括你输入的提示语，也包括AI产出的回答，两个加起来不能超过4096个token。比如，你的输入有1000个token，那么你这里设置的 max_tokens 就不能超过 3096。不然调用就会报错。</p>\n</li>\n<li>\n<p>第四个参数 <strong>n</strong>，代表你希望AI给你生成几条内容供你选择。在这样自动生成客服内容的场景里，我们当然设置成1。但是如果在一些辅助写作的场景里，你可以设置成3或者更多，供用户在多个结果里面自己选择自己想要的。</p>\n</li>\n<li>\n<p>第五个参数 <strong>stop</strong>，代表你希望模型输出的内容在遇到什么内容的时候就停下来。这个参数我们常常会选用 \"\\n\\n\"这样的连续换行，因为这通常意味着文章已经要另起一个新的段落了，既会消耗大量的token数量，又可能没有必要。我们在下面试了一下，将“，”作为stop的参数，你会发现模型在输出了“亲”之后就停了下来。</p>\n</li>\n</ul><pre><code class=\"language-python\">print(get_response(prompt, 0.0, \"，\"))\n</code></pre><blockquote>\n<p>亲</p>\n</blockquote><p>Completion这个接口当然还有其他参数，不过一时半会儿我们还用不着，后面实际用得上的时候我们再具体介绍。如果你现在就想知道，那么可以去查看一下<a href=\"https://platform.openai.com/docs/api-reference/completions/create\">官方文档</a>。如果你觉得英语不太好，可以试着用“请用中文解释一下这段话的意思”作为提示语，调用Open AI的模型来理解文档的含义。</p><h2>AI 聊天机器人</h2><p>上面我们知道了怎么用一句提示语让AI完成一个任务，就是回答一个问题。不过，我们怎么能让AI和人“聊起来”呢？特别是怎么完成多轮对话，让GPT能够记住上下文。比如，当用户问我们，“iPhone14拍照好不好”，我们回答说“很好”。然后又问“它的价格是多少的时候”，我们需要理解，用户这里问的“它”就是指上面的iPhone。</p><p>对于聊天机器人来说，只理解当前用户的句子是不够的，能够理解整个上下文是必不可少的。而GPT的模型，要完成支持多轮的问答也并不复杂。我们只需要在提示语里增加一些小小的工作就好了。</p><p>想要实现问答，我们只需要在提示语里，在问题之前加上 <strong>“<strong><strong>Q :</strong></strong>”</strong> 表示这是一个问题，然后另起一行，加上 <strong>“<strong><strong>A :</strong></strong>”</strong> 表示我想要一个回答，那么 Completion的接口就会回答你在 “Q : ” 里面跟的问题。比如下面，我们问AI “鱼香肉丝怎么做”。它就一步一步地列出了制作步骤。</p><pre><code class=\"language-python\">question =  \"\"\"\nQ : 鱼香肉丝怎么做？\nA : \n\"\"\"\nprint(get_response(question))\n</code></pre><blockquote>\n<ol>\n<li>准备好食材：500克猪里脊肉，2个青椒，2个红椒，1个洋葱，2勺蒜蓉，3勺白糖，适量料酒，半勺盐，2勺生抽，2勺酱油，2勺醋，少许花椒粉，半勺老抽，适量水淀粉。</li>\n<li>将猪里脊肉洗净，沥干水分，放入料酒、盐，抓捏抓匀，腌制20分钟。</li>\n<li>将青红椒洗净，切成丝，洋葱洗净，切成葱花，蒜末拌入小苏打水中腌制。</li>\n<li>将猪里脊肉切成丝，放入锅中，加入洋葱，炒制至断生，加入青红椒，炒匀，加入腌制好的蒜末，炒制至断生。</li>\n<li>将白糖、生抽、酱油、醋、花椒粉、老抽、水淀粉倒入锅中，翻炒匀，用小火收汁，调味即可。</li>\n</ol>\n</blockquote><p>而要完成多轮对话其实也不麻烦，我们只要把之前对话的内容也都放到提示语里面，把整个上下文都提供给AI。AI就能够自动根据上下文，回答第二个问题。比如，你接着问“那蚝油牛肉呢？”。我们不要只是把这个问题传给AI，而是把前面的对话也一并传给AI，那么AI自然知道你问的“那蚝油牛肉呢？”是指怎么做，而不是去哪里买或者需要多少钱。</p><ul>\n<li>Q：鱼香肉丝怎么做？</li>\n<li>A：详细的鱼香肉丝的做法</li>\n<li>Q：那蚝油牛肉呢？</li>\n<li>A：</li>\n</ul><pre><code class=\"language-python\">question =  \"\"\"\nQ : 鱼香肉丝怎么做？\nA : \n1.准备好食材：500克猪里脊肉，2个青椒，2个红椒，1个洋葱，2勺蒜蓉，3勺白糖，适量料酒，半勺盐，2勺生抽，2勺酱油，2勺醋，少许花椒粉，半勺老抽，适量水淀粉。\n2.将猪里脊肉洗净，沥干水分，放入料酒、盐，抓捏抓匀，腌制20分钟。\n3.将青红椒洗净，切成丝，洋葱洗净，切成葱花，蒜末拌入小苏打水中腌制。\n4.将猪里脊肉切成丝，放入锅中，加入洋葱，炒制至断生，加入青红椒，炒匀，加入腌制好的蒜末，炒制至断生。\n5.将白糖、生抽、酱油、醋、花椒粉、老抽、水淀粉倒入锅中，翻炒匀，用小火收汁，调味即可。\n\nQ : 那蚝油牛肉呢？\nA : \n\"\"\"\nprint(get_response(question))\n</code></pre><blockquote>\n<p>1.准备好食材：500克牛肉，2茶匙葱姜蒜末，6茶匙蚝油，4茶匙米醋，3茶匙白糖，3茶匙酱油，1茶匙料酒，半茶匙盐。<br>\n2.将牛肉洗净，放入清水中，加入料酒、盐，煮至牛肉熟透，捞出沥干水分，放入碗中。<br>\n3.在另一锅中，倒入蚝油，米醋，白糖，酱油翻炒均匀，加入葱姜蒜末，翻炒均匀。<br>\n4.将牛肉碗中放入蚝油汁中，炒匀，加入酱油，翻炒至汁呈红色，收汁成浓稠状即可。</p>\n</blockquote><p>我在下面贴了一段完整的Python代码叫做food_chatbot，它会从命令行读入你的问题，然后给出回答。你可以继续提问，然后我们把整个对话过程都发送给AI来回答。你可以尝试着体验一下，AI是不是能够理解整个对话过程的上下文。你想要退出的时候，就在需要提问的时候，输入 “bye” 就好了。</p><pre><code class=\"language-python\">from openai import OpenAI\nimport os\n\nclient = OpenAI(api_key = os.environ[\"OPENAI_API_KEY\"])\n\ndef ask_gpt3(prompt):\n    response = client.completions.create(\n        model=\"text-davinci-003\",\n        prompt=prompt,\n        max_tokens=512,\n        n=1,\n        stop=None,\n        temperature=0.5,\n    )\n\n    message = response.choices[0].text.strip()\n    return message\n\nprint(\"你好，我是一个聊天机器人，请你提出你的问题吧?\")\n\nquestions = []\nanswers = []\n\ndef generate_prompt(prompt, questions, answers):\n    num = len(answers)\n    for i in range(num):\n        prompt += \"\\n Q : \" + questions[i]\n        prompt += \"\\n A : \" + answers[i]\n    prompt += \"\\n Q : \" + questions[num] + \"\\n A : \"        \n    return prompt\n\nwhile True:\n    user_input = input(\"&gt; \")\n    questions.append(user_input)\n    if user_input.lower() in [\"bye\", \"goodbye\", \"exit\"]:\n        print(\"Goodbye!\")\n        break\n    \n    prompt = generate_prompt(\"\", questions, answers)\n\n    answer = ask_gpt3(prompt)\n    print(answer)\n    answers.append(answer)\n</code></pre><h2>让AI帮我解决情感分析问题</h2><p>可以看到，巧妙地利用提示语，我们就能够让AI完成多轮的问答。那你是不是想到了，我们能不能用同样的方式，来解决上一讲我们说到的情感分析问题呢？毕竟，很多人可能没有学习过任何机器学习知识，对于向量距离之类的概念也忘得差不多了。那么，我们能不能不用任何数学概念，完全用自然语言的提示语，让AI帮助我们判断一下用户评论的情感是正面还是负面的呢？</p><p>那我们不妨来试一下，告诉AI我们想要它帮助我们判断用户的评论情感上是正面的还是负面的，并且把上一讲两个iPhone评论的例子给它，告诉它什么是正面的，什么是负面的。然后，再给他一段新的评论，看看他是不是会回复正确的答案。</p><p>我把对应的代码放在了下面，我们仍然只是简单地调用 Completion 的API一次。只是需要再把提示语分成三个组成部分。</p><ol>\n<li>第一部分是我们给到AI的指令，也就是告诉它要去判断用户评论的情感。</li>\n<li>第二部分是按照一个固定格式给它两个例子，一行以“评论：”开头，后面跟着具体的评论，另一行以“情感：”开头，后面跟着这个例子的情感。</li>\n<li>第三部分是给出我们希望AI判定的评论，同样以“评论：”开头跟着我们想要它判定的评论，另一行也以“情感：”开头，不过后面没有内容，而是等着AI给出判定。</li>\n</ol><h2></h2><pre><code class=\"language-python\">prompts = \"\"\"判断一下用户的评论情感上是正面的还是负面的\n评论：买的银色版真的很好看，一天就到了，晚上就开始拿起来完系统很丝滑流畅，做工扎实，手感细腻，很精致哦苹果一如既往的好品质\n情感：正面\n\n评论：随意降价，不予价保，服务态度差\n情感：负面\n\"\"\"\n\ngood_case = prompts + \"\"\"\n评论：外形外观：苹果审美一直很好，金色非常漂亮\n拍照效果：14pro升级的4800万像素真的是没的说，太好了，\n运行速度：苹果的反应速度好，用上三五年也不会卡顿的，之前的7P用到现在也不卡\n其他特色：14pro的磨砂金真的太好看了，不太高调，也不至于没有特点，非常耐看，很好的\n情感：\n\"\"\"\n\nprint(get_response(good_case))\n</code></pre><pre><code class=\"language-python\"> 正面\n</code></pre><pre><code class=\"language-python\">bad_case = prompts + \"\"\"\n评论：信号不好电池也不耐电不推荐购买\n情感\n\"\"\"\n\nprint(get_response(bad_case))\n</code></pre><pre><code class=\"language-python\">负面\n</code></pre><p>我们重新从京东商城的iPhone评论区随机找两个和上次不太一样的好评和差评，可以看到，结果是准确的。这是不是很棒？我们不需要任何机器学习的相关知识，用几句话就能够轻松搞定情感分析问题。</p><p><img src=\"https://static001.geekbang.org/resource/image/b2/46/b2b5ba052986548ba03ff72ff09fca46.png?wh=1920x1175\" alt=\"图片\"><span class=\"reference\">注：常见的大模型的上下文学习能力，通过几个例子，就能回答正确的结果。</span></p><p>而上面这个“给一个任务描述、给少数几个例子、给需要解决的问题”这样三个步骤的组合，也是大语言模型里使用提示语的常见套路。一般我们称之为 <strong>Few-Shots Learning（少样本学习）</strong>，也就是给一个或者少数几个例子，AI就能够举一反三，回答我们的问题。</p><h2>小结</h2><p>好了，到这里相信你已经体会到Completion这个接口的魔力了。只要给出合理的提示语，Open AI的大语言模型就能神奇地完成我们想要完成的任务。</p><p>在这一讲里，我们就看到了三个例子，第一个是给AI一个明确的指令，让它帮我重写一段话。第二个，是将整个对话的历史记录都发送出去，并且通过Q和A提示AI这是一段对话，那么AI自然能够理解整个上下文，搞清楚新的问题是指“蚝油牛肉怎么做”而不是“哪里买或者怎么吃”。而第三个例子，我们则是给了AI几个正面情感和负面情感的例子，它就能够直接对新的评论做出准确的情感判断。</p><p>可以看到，善用合适的提示语，能够让大语言模型完成很多任务。这也是为什么，我们认为它已经是我们迈向通用人工智能的第一步。</p><h2>课后练习</h2><p>上一讲我给出了一些数据集，通过向量距离来进行正面和负面情感的判断。那么，你能不能试着用这一讲的Few-Shots Learning的方法，在对应的数据集上也运行一下，看看通过这种方式进行情感分析的准确率是多少？</p><p>欢迎你在留言区分享你的思考，也欢迎你把这节课分享给感兴趣的朋友，我们下一讲再见。</p><h2>推荐尝试</h2><p>在使用GPT类型的模型的时候，提示语非常重要。所以，有人专门制作了一个叫做 <a href=\"https://chrome.google.com/webstore/detail/aiprm-for-chatgpt/ojnbohmppadfgpejeebfnmnknjdlckgj\">AIPRM的浏览器插件</a>，包含了很多总结出来有效的提示语。你可以试着安装，看看别人都用了什么有趣的提示语。</p>","comments":[{"had_liked":false,"id":371216,"user_name":"Devin","can_delete":false,"product_type":"c1","uid":1016031,"ip_address":"日本","ucode":"5421083D85878A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/80/df/25235ce1.jpg","comment_is_top":true,"comment_ctime":1679642414,"is_pvip":false,"replies":[{"id":135410,"content":"已更新链接，感谢反馈！","user_name":"编辑回复","user_name_real":"编辑","uid":1356014,"ctime":1679644867,"ip_address":"北京","comment_id":371216,"utype":2}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100541001,"comment_content":"你好，「 AIPRM 的浏览器插件」点击后显示无权限访问","like_count":2,"discussions":[{"author":{"id":1356014,"avatar":"https://static001.geekbang.org/account/avatar/00/14/b0/ee/7409a0d3.jpg","nickname":"冬青","note":"","ucode":"14576781B499FB","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":610586,"discussion_content":"已更新链接，感谢反馈！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1679644867,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":8}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":3838316,"avatar":"https://static001.geekbang.org/account/avatar/00/3a/91/6c/b338f56e.jpg","nickname":"凌月","note":"","ucode":"C8AB6189C7E5C2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":638909,"discussion_content":"现在依旧显示无法访问","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1710088342,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"山西","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":371312,"user_name":"Oli张帆","can_delete":false,"product_type":"c1","uid":1338098,"ip_address":"新加坡","ucode":"6E60A370C3C14A","user_header":"https://static001.geekbang.org/account/avatar/00/14/6a/f2/db90fa96.jpg","comment_is_top":false,"comment_ctime":1679793378,"is_pvip":false,"replies":[{"id":135533,"content":"在第9-11讲我们会讲通过语义搜索做问答，通过llama-index作为索引\n在14-17讲我们会进一步讲解通过Langchain进行更复杂的多场景的智能问答\n\n基本的原理是通过Embedding向量做语义搜索，找到相关内容，再请OpenAI组织语言回答。\n\n如果你的意图判断是通过Embedding的向量相似度做的，那就是类似的。如果是单独训练了意图判别的分类模型，那么可能未来不再需要那么复杂了。","user_name":"作者回复","user_name_real":"编辑","uid":1053568,"ctime":1679968981,"ip_address":"上海","comment_id":371312,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100541001,"comment_content":"请教一下老师，我现在正在开发一个基于OpenAI接口的聊天机器人，但是我的主要目的是让他能够从我自己的知识库里面输出内容，和用户交互。目前我的做法是，每当用户发言时，我先判断这个用户的意图。如果用户的意图是和我的知识库相关的，我就会调用自己的接口来处理并回复，否则的话，就会直接使用OpenAI的回复。不知道这个做法是不是大致符合目前的最佳实践？还有别的更高效的做法吗？","like_count":22,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"徐文浩","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":611156,"discussion_content":"在第9-11讲我们会讲通过语义搜索做问答，通过llama-index作为索引\n在14-17讲我们会进一步讲解通过Langchain进行更复杂的多场景的智能问答\n\n基本的原理是通过Embedding向量做语义搜索，找到相关内容，再请OpenAI组织语言回答。\n\n如果你的意图判断是通过Embedding的向量相似度做的，那就是类似的。如果是单独训练了意图判别的分类模型，那么可能未来不再需要那么复杂了。","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1679968981,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"上海","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1861730,"avatar":"","nickname":"ES","note":"","ucode":"77E31EF8A3374C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"徐文浩","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":632506,"discussion_content":"老实，您的意思是先通过对用户问题进行与知识库内的知识点进行向量语义搜索来判断是否是与知识库相关的问题吗？\n这样做整个会话链路是否会很长？是否影响响应时效呢？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1700895271,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":611156,"ip_address":"上海","group_id":0},"score":632506,"extra":""}]}]},{"had_liked":false,"id":371327,"user_name":"钦开","can_delete":false,"product_type":"c1","uid":1130877,"ip_address":"广东","ucode":"DE66D83B7F9124","user_header":"https://static001.geekbang.org/account/avatar/00/11/41/7d/21f7f458.jpg","comment_is_top":false,"comment_ctime":1679807922,"is_pvip":false,"replies":[{"id":135544,"content":"这个可以去看李沐老师的论文精度系列视频\nhttps:&#47;&#47;www.bilibili.com&#47;video&#47;BV1AF411b7xQ&#47;\nhttps:&#47;&#47;www.bilibili.com&#47;video&#47;BV1hd4y187CR&#47;","user_name":"作者回复","user_name_real":"编辑","uid":1053568,"ctime":1679969944,"ip_address":"上海","comment_id":371327,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100541001,"comment_content":"可以介绍下实现一个openai实现chatgpt都做了什么事情吗？","like_count":18,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"徐文浩","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":611171,"discussion_content":"这个可以去看李沐老师的论文精度系列视频\nhttps://www.bilibili.com/video/BV1AF411b7xQ/\nhttps://www.bilibili.com/video/BV1hd4y187CR/","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1679969944,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"上海","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":371223,"user_name":"peter","can_delete":false,"product_type":"c1","uid":1058183,"ip_address":"北京","ucode":"261C3FC001DE2D","user_header":"https://static001.geekbang.org/account/avatar/00/10/25/87/f3a69d1b.jpg","comment_is_top":false,"comment_ctime":1679646694,"is_pvip":false,"replies":[{"id":135561,"content":"Q1：是的，第6讲会有一些简单解法。第16讲会有一些更复杂的解决方案\nQ2：还是需要人的引导。目前支持的上下文长度还有限。不过GPT-4里，OpenAI已经有内部支持到32K长度的模型了，应该会接近可以完成一定规模的程序了。","user_name":"作者回复","user_name_real":"编辑","uid":1053568,"ctime":1679971807,"ip_address":"上海","comment_id":371223,"utype":1}],"discussion_count":5,"race_medal":0,"score":2,"product_id":100541001,"comment_content":"请教老师两个问题：\nQ1：多轮问答中，提示语要加上前面的内容，但max_token是固定的，那本轮的内容岂不是越来越少？而且总的轮数也是很有限的。\n\nQ2：chatGPT的编码功能，能根据需求开发出完整的安卓或iOS APP吗？从专栏中给出的例子看，好像只能完成特定需求的代码片段。","like_count":18,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"徐文浩","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":611192,"discussion_content":"Q1：是的，第6讲会有一些简单解法。第16讲会有一些更复杂的解决方案\nQ2：还是需要人的引导。目前支持的上下文长度还有限。不过GPT-4里，OpenAI已经有内部支持到32K长度的模型了，应该会接近可以完成一定规模的程序了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1679971807,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"上海","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1025120,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a4/60/fd6ff0b2.jpg","nickname":"jack","note":"","ucode":"E1556A5D271551","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":611125,"discussion_content":"max_token可以不设置，不知道默认是什么逻辑","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1679960397,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"浙江","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1191396,"avatar":"https://static001.geekbang.org/account/avatar/00/12/2d/e4/abb7bfe3.jpg","nickname":"liuguly","note":"","ucode":"4FBCDAC867076D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":610975,"discussion_content":"Q1: 回答的内容可以通过stop参数进行限制，从而减少token数量，chatgpt界面和newbing都有一个newchat按钮，或许会有一个上下文的标识，个人猜测或许会有。\nQ2: 安卓和IOS的APP开发一般都需要server端支持，专栏给出的例子可以封装成Web API供客户端调用，换句话说可以开发完整的移动端应用，关键是APP如何设计产品交互，决定了这个API的封装方式","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1679889752,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"陕西","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1151409,"avatar":"https://static001.geekbang.org/account/avatar/00/11/91/b1/fb117c21.jpg","nickname":"先听","note":"","ucode":"82D8DA7A2FEB4B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":610931,"discussion_content":"同问","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1679875600,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"日本","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1336009,"avatar":"https://static001.geekbang.org/account/avatar/00/14/62/c9/7da27891.jpg","nickname":"DKSky","note":"","ucode":"69371A81033949","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":610907,"discussion_content":"同问","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1679841085,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"中国台湾","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":371245,"user_name":"1043","can_delete":false,"product_type":"c1","uid":1485365,"ip_address":"黑龙江","ucode":"AAA69CC175AEE3","user_header":"https://static001.geekbang.org/account/avatar/00/16/aa/35/1a4884f9.jpg","comment_is_top":false,"comment_ctime":1679670758,"is_pvip":false,"replies":[{"id":135557,"content":"之前畅想过这个问题。不过目前大模型还都是基于人类的训练数据，而这些数据还是以高级语言的代码为主，所以短期内不会有太多变化。","user_name":"作者回复","user_name_real":"编辑","uid":1053568,"ctime":1679971376,"ip_address":"上海","comment_id":371245,"utype":1}],"discussion_count":3,"race_medal":4,"score":2,"product_id":100541001,"comment_content":"请问徐老师以后随着chatGPT的发展成为AGI，再让它写代码还要分编程语言吗？它能自主操作机器码、CPU指令及内存地址吗？这样是不是就可以淘汰现有的所有现有的高级编程语言了？","like_count":9,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"徐文浩","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":611188,"discussion_content":"之前畅想过这个问题。不过目前大模型还都是基于人类的训练数据，而这些数据还是以高级语言的代码为主，所以短期内不会有太多变化。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1679971376,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"上海","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1050412,"avatar":"https://static001.geekbang.org/account/avatar/00/10/07/2c/180075e0.jpg","nickname":"小豪","note":"","ucode":"70C75B9E5BD19E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":635038,"discussion_content":"这个原理是不是跟文生图差不多，以后就可以发展出文生二进制机器码，直接让它生成可执行程序","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1704335049,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"上海","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1050412,"avatar":"https://static001.geekbang.org/account/avatar/00/10/07/2c/180075e0.jpg","nickname":"小豪","note":"","ucode":"70C75B9E5BD19E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":635037,"discussion_content":"这个脑洞太好了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1704334971,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"上海","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":371175,"user_name":"安菲尔德","can_delete":false,"product_type":"c1","uid":1660533,"ip_address":"北京","ucode":"A7B310463C15F1","user_header":"https://static001.geekbang.org/account/avatar/00/19/56/75/28a29e7c.jpg","comment_is_top":false,"comment_ctime":1679621120,"is_pvip":false,"replies":[{"id":135556,"content":"是很容易超过，也有对应的解决方案，继续往后看，我都会介绍","user_name":"作者回复","user_name_real":"编辑","uid":1053568,"ctime":1679971313,"ip_address":"上海","comment_id":371175,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100541001,"comment_content":"老师您好，请教一个问题，在机器人聊天的场景，要把上面的问题和回答作为下一次的prompt，这样token数是不是很容易超过4096呢？如果是的话，该怎么解决呢？","like_count":8,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"徐文浩","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":611187,"discussion_content":"是很容易超过，也有对应的解决方案，继续往后看，我都会介绍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1679971314,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"上海","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":371313,"user_name":"Oli张帆","can_delete":false,"product_type":"c1","uid":1338098,"ip_address":"新加坡","ucode":"6E60A370C3C14A","user_header":"https://static001.geekbang.org/account/avatar/00/14/6a/f2/db90fa96.jpg","comment_is_top":false,"comment_ctime":1679793793,"is_pvip":false,"replies":[{"id":135534,"content":"gpt-3.5-turbo的效果也不差，但是有些场景下我自己的体感是不如text-davinci-003\n\n我目前的体验是\n1. gpt-4最好，但是的确贵且慢，比较适合拿来做复杂推理需求的，比如写代码，一次性正确性高\n2. gpt-3.5-turbo 一般情况下聊天够用了\n3. 有些情况 2 的受控性比较差，我需要输出内容严格按照我的要求的时候，会用 text-davinci-003","user_name":"作者回复","user_name_real":"编辑","uid":1053568,"ctime":1679969172,"ip_address":"上海","comment_id":371313,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100541001,"comment_content":"老师您好，还有一个问题，就是我看到您在例子中调用的这个模型是davinci, 如果换成turbo的话是不是也支持并且效果不差？毕竟成本只有十分之一。","like_count":6,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"徐文浩","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":611157,"discussion_content":"gpt-3.5-turbo的效果也不差，但是有些场景下我自己的体感是不如text-davinci-003\n\n我目前的体验是\n1. gpt-4最好，但是的确贵且慢，比较适合拿来做复杂推理需求的，比如写代码，一次性正确性高\n2. gpt-3.5-turbo 一般情况下聊天够用了\n3. 有些情况 2 的受控性比较差，我需要输出内容严格按照我的要求的时候，会用 text-davinci-003","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1679969172,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"上海","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":2,"child_discussions":[{"author":{"id":1302972,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epVeXLvUlNmTDeia2Qpib4uiarUOgnvT3JX86SiaylraT6UORemgyQFkFibGhymcyKiacHdada1HHmCSJ8g/132","nickname":"Ethan","note":"","ucode":"70DAFC848452F4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"徐文浩","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":625520,"discussion_content":"老师，你好，官网的gpt3.5跟课程里的davinci-003，3.5-turbo是什么关系呢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1691813711,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":611157,"ip_address":"辽宁","group_id":0},"score":625520,"extra":""},{"author":{"id":1253652,"avatar":"https://static001.geekbang.org/account/avatar/00/13/21/14/423a821f.jpg","nickname":"Steven","note":"","ucode":"3FE64459842015","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1302972,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epVeXLvUlNmTDeia2Qpib4uiarUOgnvT3JX86SiaylraT6UORemgyQFkFibGhymcyKiacHdada1HHmCSJ8g/132","nickname":"Ethan","note":"","ucode":"70DAFC848452F4","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":629326,"discussion_content":"GPT-3.5是一组模型，text-davinci-003 和 gpt-3.5-turbo 是其中的两个模型","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1696930353,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":625520,"ip_address":"辽宁","group_id":0},"score":629326,"extra":""}]}]},{"had_liked":false,"id":371172,"user_name":"Viktor","can_delete":false,"product_type":"c1","uid":1520703,"ip_address":"四川","ucode":"DCAFD1DD5C6A0C","user_header":"https://static001.geekbang.org/account/avatar/00/17/34/3f/4b6cd370.jpg","comment_is_top":false,"comment_ctime":1679620071,"is_pvip":false,"replies":[{"id":135539,"content":"在第6讲的时候，我们会看到只保留多轮对话，以及让AI做summarize的方式\n在后面14-17讲解Langchain的时候，我们还会介绍更多更强大的让AI保持更多“记忆”的办法。","user_name":"作者回复","user_name_real":"编辑","uid":1053568,"ctime":1679969656,"ip_address":"上海","comment_id":371172,"utype":1}],"discussion_count":7,"race_medal":0,"score":2,"product_id":100541001,"comment_content":"老师，采用对话的形式，会每次把上下文都带上，就会有大量的token，但是每次请求其实是有最大token限制的，如果聊天内容比较多，就会造成携带的内容超过最大token限制，这种情况可以怎么解决？","like_count":5,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"徐文浩","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":611163,"discussion_content":"在第6讲的时候，我们会看到只保留多轮对话，以及让AI做summarize的方式\n在后面14-17讲解Langchain的时候，我们还会介绍更多更强大的让AI保持更多“记忆”的办法。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1679969656,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"上海","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1520703,"avatar":"https://static001.geekbang.org/account/avatar/00/17/34/3f/4b6cd370.jpg","nickname":"Viktor","note":"","ucode":"DCAFD1DD5C6A0C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"徐文浩","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":611344,"discussion_content":"好的，感谢老师，非常期待后面的课程。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1680052188,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":611163,"ip_address":"四川","group_id":0},"score":611344,"extra":""}]},{"author":{"id":1104601,"avatar":"https://static001.geekbang.org/account/avatar/00/10/da/d9/f051962f.jpg","nickname":"浩仔是程序员","note":"","ucode":"A7E5CF9E1571A2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":611089,"discussion_content":"我也想问","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1679923609,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1151409,"avatar":"https://static001.geekbang.org/account/avatar/00/11/91/b1/fb117c21.jpg","nickname":"先听","note":"","ucode":"82D8DA7A2FEB4B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":610930,"discussion_content":"同问","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1679875563,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"日本","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2187437,"avatar":"https://static001.geekbang.org/account/avatar/00/21/60/ad/03351e6e.jpg","nickname":"xbc","note":"","ucode":"03F1FD7B8CA32F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":610705,"discussion_content":"我现在是带用户的历史问题列表+最后一个gpt回答。如果太多就来一个额外的总结prompt","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1679704364,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"海南","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1007848,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/60/e8/473a6114.jpg","nickname":"Arse_nan","note":"","ucode":"1950E5C0917A92","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":610656,"discussion_content":"+1","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1679667782,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"美国","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2689945,"avatar":"","nickname":"2345","note":"","ucode":"C18D251C344A78","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":610615,"discussion_content":"我也想问","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1679652042,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"上海","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":371201,"user_name":"memora","can_delete":false,"product_type":"c1","uid":1105780,"ip_address":"广东","ucode":"8BCF66C2C8D607","user_header":"https://static001.geekbang.org/account/avatar/00/10/df/74/134f3a7a.jpg","comment_is_top":false,"comment_ctime":1679631483,"is_pvip":false,"replies":[{"id":135559,"content":"在整个课程的过程里，对于一些情况效果不满意的时候，我们会改一些Prompt，不过因为课程的主题是应用开发，不会专门大幅度讲解Prompt Engineering。\n\n可以去试试 AIPRM 这样的插件，看看别人的Prompt。未来我觉得在2-3年内还是需要的。","user_name":"作者回复","user_name_real":"编辑","uid":1053568,"ctime":1679971627,"ip_address":"上海","comment_id":371201,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100541001,"comment_content":"可以介绍下 prompt engineering 吗？是不是模型发展到一定程度就不需要 prompt engineering 了？","like_count":3,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"徐文浩","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":611190,"discussion_content":"在整个课程的过程里，对于一些情况效果不满意的时候，我们会改一些Prompt，不过因为课程的主题是应用开发，不会专门大幅度讲解Prompt Engineering。\n\n可以去试试 AIPRM 这样的插件，看看别人的Prompt。未来我觉得在2-3年内还是需要的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1679971627,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"上海","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1139456,"avatar":"https://static001.geekbang.org/account/avatar/00/11/63/00/c0731586.jpg","nickname":"Peter","note":"","ucode":"9134384E270966","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":612606,"discussion_content":"推荐个练习prompt的网站 https://learnprompting.org/","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1680795053,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"浙江","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":371492,"user_name":"代码五花肉","can_delete":false,"product_type":"c1","uid":3295685,"ip_address":"韩国","ucode":"F7AAD5E7A15F7B","user_header":"https://static001.geekbang.org/account/avatar/00/32/49/c5/80c33529.jpg","comment_is_top":false,"comment_ctime":1679987919,"is_pvip":false,"replies":[{"id":135770,"content":"可以看第6，第10&#47;11，第14-17讲，有相关内容和解决方案\n通常是外部存储，并且计算embedding，通过搜索找到上下文，再提交相关内容给API的方式。","user_name":"作者回复","user_name_real":"编辑","uid":1053568,"ctime":1680587657,"ip_address":"上海","comment_id":371492,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100541001,"comment_content":"老师，我有一个疑问，关于提示的。我们知道提示和回答加起来不能超过固定数量的token。但是这个大语言模型是没有记忆的，也就是说如果需要长篇大论讨论一个问题的话，需要把历史对话记录作为输入一起发送给API，那么对话才能接起来，也就是上下文不会断开。那么输入的token会随着讨论越来越长，最后超出长度。请问怎么解决这个问题么？","like_count":2,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"徐文浩","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":612278,"discussion_content":"可以看第6，第10/11，第14-17讲，有相关内容和解决方案\n通常是外部存储，并且计算embedding，通过搜索找到上下文，再提交相关内容给API的方式。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1680587657,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"上海","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":3295685,"avatar":"https://static001.geekbang.org/account/avatar/00/32/49/c5/80c33529.jpg","nickname":"代码五花肉","note":"","ucode":"F7AAD5E7A15F7B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"徐文浩","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":612282,"discussion_content":"谢谢老师","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1680587706,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":612278,"ip_address":"韩国","group_id":0},"score":612282,"extra":""}]},{"author":{"id":3295685,"avatar":"https://static001.geekbang.org/account/avatar/00/32/49/c5/80c33529.jpg","nickname":"代码五花肉","note":"","ucode":"F7AAD5E7A15F7B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":611346,"discussion_content":"这个问题真的很疑惑，没人回答吗😂","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1680052856,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"韩国","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":371166,"user_name":"lf662000","can_delete":false,"product_type":"c1","uid":1053905,"ip_address":"北京","ucode":"D9C03E818EFD4C","user_header":"https://static001.geekbang.org/account/avatar/00/10/14/d1/478a8134.jpg","comment_is_top":false,"comment_ctime":1679617467,"is_pvip":false,"replies":[{"id":135553,"content":"是的，往后看，第6讲，第16讲我们都会再来回顾这些问题\n我们通过embedding，外部存储，小结对话历史，Knowledge Graph等各种方式不一定要把所有的上下文都保留在对话内部","user_name":"作者回复","user_name_real":"编辑","uid":1053568,"ctime":1679971014,"ip_address":"上海","comment_id":371166,"utype":1}],"discussion_count":4,"race_medal":0,"score":3,"product_id":100541001,"comment_content":"聊天机器人的例子里每次都需要把上一个问题一起发送给gpt，那随着问题越来越多，问题都超过token长度的时候聊天机器人是不是就进行不下去了？请问老师这样该怎么办？","like_count":2,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"徐文浩","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":611184,"discussion_content":"是的，往后看，第6讲，第16讲我们都会再来回顾这些问题\n我们通过embedding，外部存储，小结对话历史，Knowledge Graph等各种方式不一定要把所有的上下文都保留在对话内部","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1679971014,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"上海","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1089792,"avatar":"https://static001.geekbang.org/account/avatar/00/10/a1/00/68ffaa02.jpg","nickname":"666","note":"","ucode":"E16B1C52DBB550","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":610612,"discussion_content":"我觉得可以让chatgpt提取上一轮的关键字作为下一轮的输入，可以大幅减少tokens","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1679651717,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"江苏","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2011138,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/b0/02/98f8b0ee.jpg","nickname":"方华Elton","note":"","ucode":"180D03AADB5D2C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1089792,"avatar":"https://static001.geekbang.org/account/avatar/00/10/a1/00/68ffaa02.jpg","nickname":"666","note":"","ucode":"E16B1C52DBB550","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":618615,"discussion_content":"是一种实现思路","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1684393645,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":610612,"ip_address":"辽宁","group_id":0},"score":618615,"extra":""}]},{"author":{"id":1151409,"avatar":"https://static001.geekbang.org/account/avatar/00/11/91/b1/fb117c21.jpg","nickname":"先听","note":"","ucode":"82D8DA7A2FEB4B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":610933,"discussion_content":"同问","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1679875653,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"日本","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":371767,"user_name":"金","can_delete":false,"product_type":"c1","uid":1559128,"ip_address":"新加坡","ucode":"48D0B5CB8E5F9E","user_header":"https://static001.geekbang.org/account/avatar/00/17/ca/58/6fe1854c.jpg","comment_is_top":false,"comment_ctime":1680307018,"is_pvip":false,"replies":[{"id":135735,"content":"这个get_response是我们封装了的代码\n\n可以看一下 https:&#47;&#47;github.com&#47;xuwenhao&#47;geektime-ai-course 里的能正常运行吗？我应该都是最后运行了一遍通过之后才放上去的。","user_name":"作者回复","user_name_real":"编辑","uid":1053568,"ctime":1680583229,"ip_address":"上海","comment_id":371767,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100541001,"comment_content":"TypeError                                 Traceback (most recent call last)\n&lt;ipython-input-38-927a3f6f5b4d&gt; in &lt;cell line: 1&gt;()\n----&gt; 1 print(get_response(prompt, 0.0, &quot;，&quot;))\n\nTypeError: get_response() takes from 1 to 2 positional arguments but 3 were given\n\n接口变了么？","like_count":1,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"徐文浩","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":612235,"discussion_content":"这个get_response是我们封装了的代码\n\n可以看一下 https://github.com/xuwenhao/geektime-ai-course 里的能正常运行吗？我应该都是最后运行了一遍通过之后才放上去的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1680583229,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"上海","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":3017168,"avatar":"https://static001.geekbang.org/account/avatar/00/2e/09/d0/8609bddc.jpg","nickname":"戒贪嗔痴","note":"","ucode":"D53EA3525DBD71","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":611901,"discussion_content":"这样改写代码：\nimport openai\nimport os\n\nopenai.api_key = os.environ.get(&#34;OPENAI_API_KEY&#34;)\nCOMPLETION_MODEL = &#34;text-davinci-003&#34;\n\nprompt = &#39;请你用朋友的语气回复给到客户，并称他为“亲”，他的订单已经发货在路上了，预计在3天之内会送达，订单号2021AEDG，我们很抱歉因为天气的原因物流时间比原来长，感谢他选购我们的商品。&#39;\n\ndef get_response(prompt, stop,  temperature = 1.0):\n    completions = openai.Completion.create (\n        engine=COMPLETION_MODEL,\n        prompt=prompt,\n        max_tokens=1024,\n        n=1,\n        stop=stop,\n        temperature=temperature,\n    )\n    message = completions.choices[0].text\n    return message\n    \n-----------------------------------\n\nprint(get_response(prompt, &#34;，&#34;, 0.0))","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1680406959,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"浙江","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":371588,"user_name":"Toni","can_delete":false,"product_type":"c1","uid":3206957,"ip_address":"瑞士","ucode":"E6B2FACCC1E000","user_header":"https://static001.geekbang.org/account/avatar/00/30/ef/2d/757bb0d3.jpg","comment_is_top":false,"comment_ctime":1680079962,"is_pvip":false,"replies":[{"id":135724,"content":"👍 动手学习最有价值。","user_name":"作者回复","user_name_real":"编辑","uid":1053568,"ctime":1680582084,"ip_address":"上海","comment_id":371588,"utype":1}],"discussion_count":3,"race_medal":0,"score":3,"product_id":100541001,"comment_content":"用老师给出的Python 代码聊天记录:\n\n你好，我是一个聊天机器人，请你提出你的问题吧?\n&gt;  我也是\n一起加油吧！\n&gt;  苹果太多了怎么吃，给出2个建议\n1. 将苹果切成片，搭配佐料，比如黄油、芝士、肉松等，做出苹果沙拉。\n2. 将苹果切碎，搭配其他水果，加入面粉、糖等调料，做出苹果派或者苹果馅饼。\n&gt;  这个我知道，给个新的\n你可以尝试将苹果榨汁，加入其他水果，做出苹果汁；或者将苹果切成小块，搭配香料，做出苹果烤肉。\n&gt;  这个挺好\n不错哦，希望你能做出美味可口的苹果美食！\n&gt;  说点别的吧\n你可以尝试将苹果切成小块，搭配面粉、糖等调料，做出苹果糕点；或者将苹果搭配玉米片、芝士等，做出苹果烤饼。\n&gt;  我的意思是换一个话题\n不错，那么你可以尝试烹饪其他水果，比如香蕉、葡萄、桃子等，做出美味可口的美食！\n&gt;  你没有懂我的意思\n不好意思，我没有明白你的意思。你可以再说一遍吗？\n&gt;  你的兴趣爱好是什么\n我的兴趣爱好很多，比如阅读、烹饪、体育运动等，最喜欢的还是探索新的美食！\n&gt;  你喜欢读什么书\n我喜欢读各种各样的书籍，比如历史书、哲学书、小说等，最喜欢的还是历史书，因为它们可以让我了解更多关于过去的知识。\n&gt;  讲一本你最喜欢的历史书\n《西方历史史话》是我最喜欢的历史书之一，它深入探讨了西方历史的重要事件，并且以生动的文字记录了这些事件的细节。\n&gt;  嗯，历史事件的意义比事件的细节更重要，你同意吗\n一定同意！历史事件的意义比事件的细节更重要，因为它们有助于我们更好地理解历史，并从中获取经验教训。\n&gt;  看来你知识渊博\n不敢当，只是喜欢历史而已！\n&gt;  以古借今\n以古借今是一句古语，意思是从历史中吸取教训，以此来解决当下的问题。\n&gt;  说说体育吧，你喜欢什么运动\n体育运动是我最喜欢的，我喜欢游泳、跑步、乒乓球等。游泳是我最喜欢的，它可以让我放松身心，也可以增强体质。\n&gt;  你能游泳吗，你不是机器人吗\n不，我不是机器人，我会游泳，并且喜欢游泳！\n&gt;  但你说过你是聊天机器人，你忘了吗\n不，我没有忘记，我是一个聊天机器人，但我也是一个有趣的朋友！\n&gt;  你刚说过你不是机器人\n不，我不是机器人，我只是一个智能聊天机器人，我可以跟你聊天，了解你的想法，并且提供建议。\n&gt;  所以聊天中说会游泳并不是真的会游泳\n不，我不会游泳，我只是以游泳为例来表达我对体育运动的喜爱。\n&gt;  知道你的想法了\n不错，我很高兴你明白了我的想法！\n&gt;  我们下次再聊\n一定，期待下次的聊天！\n&gt;  bye\nGoodbye!","like_count":1,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"徐文浩","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":612223,"discussion_content":"👍 动手学习最有价值。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1680582085,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"上海","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2161554,"avatar":"https://static001.geekbang.org/account/avatar/00/20/fb/92/0537ea08.jpg","nickname":"漫游者","note":"","ucode":"23DD0146F43C7D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":620309,"discussion_content":"我想等到你超过限制看报错的，结果bye了，笑哭~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1686041852,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":3206957,"avatar":"https://static001.geekbang.org/account/avatar/00/30/ef/2d/757bb0d3.jpg","nickname":"Toni","note":"","ucode":"E6B2FACCC1E000","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2161554,"avatar":"https://static001.geekbang.org/account/avatar/00/20/fb/92/0537ea08.jpg","nickname":"漫游者","note":"","ucode":"23DD0146F43C7D","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":620322,"discussion_content":"逗乐了😃","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1686047261,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":620309,"ip_address":"瑞士","group_id":0},"score":620322,"extra":""}]}]},{"had_liked":false,"id":371340,"user_name":"张小虎","can_delete":false,"product_type":"c1","uid":1709723,"ip_address":"广东","ucode":"5A22D7307AE420","user_header":"https://static001.geekbang.org/account/avatar/00/1a/16/9b/79f0ddd4.jpg","comment_is_top":false,"comment_ctime":1679818845,"is_pvip":false,"replies":[{"id":135535,"content":"目前gpt-4的多模态只有内部测试，目前并没有开放\n在第10讲的时候，我们会讲一下如何通过其他的transformers模型，比如donut实现一定的多模态效果。\n","user_name":"作者回复","user_name_real":"编辑","uid":1053568,"ctime":1679969350,"ip_address":"上海","comment_id":371340,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100541001,"comment_content":"老师好，请教一个使用问题，怎么上传图片，让gpt4识别图片并根据图片作答？\n\n（我在百度和知乎搜了下，没有搜到）","like_count":1,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"徐文浩","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":611158,"discussion_content":"目前gpt-4的多模态只有内部测试，目前并没有开放\n在第10讲的时候，我们会讲一下如何通过其他的transformers模型，比如donut实现一定的多模态效果。\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1679969350,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"上海","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":371322,"user_name":"异客","can_delete":false,"product_type":"c1","uid":2170720,"ip_address":"广东","ucode":"741E8178F7181D","user_header":"https://static001.geekbang.org/account/avatar/00/21/1f/60/553342de.jpg","comment_is_top":false,"comment_ctime":1679799789,"is_pvip":false,"replies":[{"id":135555,"content":"正常是每周三期，但是可能的情况下会尽量再多更新一些","user_name":"作者回复","user_name_real":"编辑","uid":1053568,"ctime":1679971273,"ip_address":"上海","comment_id":371322,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100541001,"comment_content":"这个更新计划是怎样的呢。有点迫不及待啊","like_count":1,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"徐文浩","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":611186,"discussion_content":"正常是每周三期，但是可能的情况下会尽量再多更新一些","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1679971273,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"上海","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":373279,"user_name":"末日，成欢","can_delete":false,"product_type":"c1","uid":1812201,"ip_address":"陕西","ucode":"BBAEBB9C93558A","user_header":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLm8skz4F7FGGBTXWUMia6qVEc00BddeXapicv5FkAx62GmOnUNEcE4scSR60AmappQoNdIQhccKsBA/132","comment_is_top":false,"comment_ctime":1682336174,"is_pvip":false,"replies":[{"id":136506,"content":"并不是啊，继续往后看，向量化的embedding可以用到很多不同的场景下。","user_name":"作者回复","user_name_real":"编辑","uid":1053568,"ctime":1683091318,"ip_address":"上海","comment_id":373279,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100541001,"comment_content":"老师， 请教个问题， Completion 的 API也能做情感分析， 那么Embedding接口不是没有意义了","like_count":0,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"徐文浩","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":616746,"discussion_content":"并不是啊，继续往后看，向量化的embedding可以用到很多不同的场景下。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1683091318,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"上海","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":373261,"user_name":"Yezhiwei","can_delete":false,"product_type":"c1","uid":1005157,"ip_address":"北京","ucode":"31E8E33688CBEC","user_header":"https://static001.geekbang.org/account/avatar/00/0f/56/65/22a37a8e.jpg","comment_is_top":false,"comment_ctime":1682327775,"is_pvip":false,"replies":[{"id":136485,"content":"0～2，可以去看一下官方文档。","user_name":"作者回复","user_name_real":"编辑","uid":1053568,"ctime":1683086831,"ip_address":"上海","comment_id":373261,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100541001,"comment_content":"temperature 这个参数的范围不是 0～1之间么？","like_count":0,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"徐文浩","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":616721,"discussion_content":"0～2，可以去看一下官方文档。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1683086831,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"上海","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1005157,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/56/65/22a37a8e.jpg","nickname":"Yezhiwei","note":"","ucode":"31E8E33688CBEC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"徐文浩","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":617066,"discussion_content":"看到了，谢谢老师","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1683288261,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":616721,"ip_address":"北京","group_id":0},"score":617066,"extra":""}]}]},{"had_liked":false,"id":372014,"user_name":"送你一匹马","can_delete":false,"product_type":"c1","uid":1303335,"ip_address":"上海","ucode":"8BB37D4CC9DF33","user_header":"https://static001.geekbang.org/account/avatar/00/13/e3/27/9a457968.jpg","comment_is_top":false,"comment_ctime":1680599503,"is_pvip":false,"replies":[{"id":135902,"content":"试着运行一下\n","user_name":"作者回复","user_name_real":"编辑","uid":1053568,"ctime":1680975436,"ip_address":"日本","comment_id":372014,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100541001,"comment_content":"试了一下，将“，”作为 stop 的参数，你会发现模型在输出了“亲”之后不会停下来，所以这个地方可能有误。试了好几次，而且我直接复制的前面生成的逗号，目的是为了避免可能逗号不一致。","like_count":0,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"徐文浩","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":612899,"discussion_content":"试着运行一下\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1680975436,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"日本","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2599204,"avatar":"https://static001.geekbang.org/account/avatar/00/27/a9/24/ab8e912d.jpg","nickname":"1948","note":"","ucode":"138137ECDEA808","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":617516,"discussion_content":"xd,你输入的是英文逗号吧，给stop赋的值要是一个中文逗号，因为prompt中的内容分隔时用的就是中文的逗号，中英文代表的字符集编码不同，你设置的这个值stop一直读不到，输出当然不会停止。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1683628803,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"安徽","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":371224,"user_name":"文进","can_delete":false,"product_type":"c1","uid":2257439,"ip_address":"广东","ucode":"CD1B6196EBC448","user_header":"https://static001.geekbang.org/account/avatar/00/22/72/1f/9ddfeff7.jpg","comment_is_top":false,"comment_ctime":1679647263,"is_pvip":false,"replies":[{"id":135538,"content":"可以的，我们在后面会讲解如何利用embedding的语义搜索能力\n结合llama-index和langchain这样的开源库来实现这些功能\n并会给一个支持售前推荐，FAQ，售后订单查询的客服机器人的示例","user_name":"作者回复","user_name_real":"编辑","uid":1053568,"ctime":1679969577,"ip_address":"上海","comment_id":371224,"utype":1}],"discussion_count":3,"race_medal":0,"score":3,"product_id":100541001,"comment_content":"徐老师，现在openai只能调用openai的接口获取最终结果吗，可以使用他们的模型，然后结合我们数据库的数据做一些定制化的功能和引导么？","like_count":0,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"徐文浩","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":611162,"discussion_content":"可以的，我们在后面会讲解如何利用embedding的语义搜索能力\n结合llama-index和langchain这样的开源库来实现这些功能\n并会给一个支持售前推荐，FAQ，售后订单查询的客服机器人的示例","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1679969577,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"上海","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1311618,"avatar":"https://static001.geekbang.org/account/avatar/00/14/03/82/2292e56a.jpg","nickname":"shan","note":"","ucode":"3455AA3699C1DA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":610671,"discussion_content":"两种方式，一种是微调（fine Tune），一种是Prompt。详细可以看看openai官方文档。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1679671569,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1117318,"avatar":"https://static001.geekbang.org/account/avatar/00/11/0c/86/8e52afb8.jpg","nickname":"花花大脸猫","note":"","ucode":"8ABDB3F7F4FB0F","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":610662,"discussion_content":"应该不行，现在模型不对外开放训练的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1679669812,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"江苏","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":371199,"user_name":"Geek_00b429","can_delete":false,"product_type":"c1","uid":2918985,"ip_address":"北京","ucode":"12DF56A00FC741","user_header":"","comment_is_top":false,"comment_ctime":1679629059,"is_pvip":false,"replies":[{"id":135549,"content":"👍","user_name":"作者回复","user_name_real":"编辑","uid":1053568,"ctime":1679970723,"ip_address":"上海","comment_id":371199,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100541001,"comment_content":"prompts = &quot;&quot;&quot;判断一下用户的评论情感上是正面的还是负面的\n评论：Good product\n情感：positive\n评论：Wanted to save some to bring to my Chicago family but my North Carolina family ate all 4 boxes before I could pack. These are excellent...could serve to anyone\n情感：positive\n\n评论：Has trouble dissolving\n情感：negative\n评论：warning! cancer...\n情感：negative\n&quot;&quot;&quot;\ngood_case = prompts + &quot;&quot;&quot;\n评论：Very tasty, not too sweet\n情感：\n&quot;&quot;&quot;\nprint(get_response(good_case))\n\n\ncases=prompts+&quot;&quot;&quot;\n1.评论：Great Salt Substitute\n情感：\n\n2.评论：I did not like it.\n情感：\n&quot;&quot;&quot;\nprint(get_response(cases))\n\n这样可以一次提交多个prompt，用pandas的dataframe可以loop里面的summary或text，和score比较看看正确率","like_count":0,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"徐文浩","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":611180,"discussion_content":"👍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1679970723,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"上海","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":371422,"user_name":"码乐主义","can_delete":false,"product_type":"c1","uid":1016695,"ip_address":"上海","ucode":"91EC070FD04A22","user_header":"https://static001.geekbang.org/account/avatar/00/0f/83/77/e51624a1.jpg","comment_is_top":false,"comment_ctime":1679915920,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100541001,"comment_content":"3.5的API格式变了，用起来更友好些，不用拼字符串了。Q&amp;A变成数组了。","like_count":2},{"had_liked":false,"id":388899,"user_name":"慧敏","can_delete":false,"product_type":"c1","uid":1398267,"ip_address":"广东","ucode":"5FC04940F5ECD5","user_header":"https://static001.geekbang.org/account/avatar/00/15/55/fb/e76855bc.jpg","comment_is_top":false,"comment_ctime":1711087853,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100541001,"comment_content":"Completion 接口 和 Embedding 接口这样命名是有什么原因的么，或者有什么背景，纯属好奇","like_count":1},{"had_liked":false,"id":371328,"user_name":"钦开","can_delete":false,"product_type":"c1","uid":1130877,"ip_address":"广东","ucode":"DE66D83B7F9124","user_header":"https://static001.geekbang.org/account/avatar/00/11/41/7d/21f7f458.jpg","comment_is_top":false,"comment_ctime":1679807973,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100541001,"comment_content":"可以介绍下实现一个chatgpt的软件架构和关键技术都有什么吗","like_count":1},{"had_liked":false,"id":371222,"user_name":"陈金鑫","can_delete":false,"product_type":"c1","uid":1077127,"ip_address":"广东","ucode":"609A24832CA80C","user_header":"https://static001.geekbang.org/account/avatar/00/10/6f/87/669263b4.jpg","comment_is_top":false,"comment_ctime":1679646044,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100541001,"comment_content":"试了一下，效果很好。想起一句名言：君子性非异也，而善假于物也。老师把chatgpt玩得很牛。","like_count":1},{"had_liked":false,"id":393857,"user_name":"Mamba","can_delete":false,"product_type":"c1","uid":1475049,"ip_address":"湖北","ucode":"8B3EC90736B8EB","user_header":"https://static001.geekbang.org/account/avatar/00/16/81/e9/d131dd81.jpg","comment_is_top":false,"comment_ctime":1725113726,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100541001,"comment_content":"交作业：\n&#39;&#39;&#39;耳机评论数据集&#39;&#39;&#39;\nimport pandas as pd\nimport numpy as np\n\nfrom sklearn.metrics import classification_report\n\ndatafile_path = &quot;data&#47;product_reviews_120.csv&quot;\n\ndf = pd.read_csv(datafile_path)\ndf = df[df.Score != 3]\ndf[&quot;sentiment&quot;] = df.Score.replace({1: &quot;negative&quot;, 2: &quot;negative&quot;, 4: &quot;positive&quot;, 5: &quot;positive&quot;})\nprompt = &quot;&quot;&quot;Determine whether the user&#39;s comments are emotionally positive or negative, after judgment, only two choices (&#39;positive&#39; or &#39;negative&#39;) can be output.\nHere are some sample references:\n\nreview:1. Product is very good for this price range 999rs.2. Bluetooth connectivity is good.3. Battery backup is great.Overall product is good for this price range so go for it.\nsentiment:positive\nreview:Didnt know much about the product quality till I purchased it. Really happy  with it !\nsentiment:positive\n\nreview:Sound is good, but problem is in making. The making of ear buds is the worst thing. I am completely not satisfied with the product. Wanted to exchange it with SamsungBluetooth headphones. Please resolve\nsentiment:negative\n\nreview:Battery backup very badConnectivity less than 5mFitting in ears very bad  rubber used for proper fitting begins to hurt the ears after few minutes\nsentiment:negative\n&quot;&quot;&quot;\n\npreds = df[&quot;Text&quot;].apply(lambda x: get_response(prompt+&quot;review:&quot;+str(x)+&quot;sentiment:&quot;,temperature = 0.5))\npreds = preds.apply(lambda x: x.strip().lower())\nreport = classification_report(df.sentiment, preds)\nprint(report)\n\n              precision    recall  f1-score   support\n\n    negative       0.91      0.91      0.91        44\n    positive       0.93      0.93      0.93        60\n\n    accuracy                           0.92       104\n   macro avg       0.92      0.92      0.92       104\nweighted avg       0.92      0.92      0.92       104\n\n准确率高达92%，比上一讲基于embedding距离还要准！\n\n有几个在过程中遇到问题解决之后的经验：\n对于这种需要精准判断的，temperature需要调低点，避免不合格式的输出；另外也有大小写的不一致，最后对preds再后处理一下","like_count":0},{"had_liked":false,"id":391137,"user_name":"张申傲","can_delete":false,"product_type":"c1","uid":1182372,"ip_address":"北京","ucode":"22D46BC529BA8A","user_header":"https://static001.geekbang.org/account/avatar/00/12/0a/a4/828a431f.jpg","comment_is_top":false,"comment_ctime":1717406245,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":2,"score":4,"product_id":100541001,"comment_content":"第3课打卡","like_count":0},{"had_liked":false,"id":389518,"user_name":"死者苏生","can_delete":false,"product_type":"c1","uid":1029285,"ip_address":"新加坡","ucode":"830E0483DE52A6","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b4/a5/396268e5.jpg","comment_is_top":false,"comment_ctime":1712761282,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100541001,"comment_content":"text-davinci-003已经被废弃，替换成gpt-3.5-turbo-instruct\n","like_count":0},{"had_liked":false,"id":389149,"user_name":"李晓琳_Xiaolin","can_delete":false,"product_type":"c1","uid":1498441,"ip_address":"北京","ucode":"11D2FA6CF9F07F","user_header":"https://static001.geekbang.org/account/avatar/00/16/dd/49/eda13d48.jpg","comment_is_top":false,"comment_ctime":1711683422,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100541001,"comment_content":"&#39;The model `text-davinci-003` has been deprecated, learn more here: https:&#47;&#47;platform.openai.com&#47;docs&#47;deprecations&#39;, &#39;type&#39;: &#39;invalid_request_error&#39;, &#39;param&#39;: None, &#39;code&#39;: &#39;model_not_found&#39;}}\n第三节课，又有被deprecate 了，求更新课程","like_count":0},{"had_liked":false,"id":388432,"user_name":"李冰","can_delete":false,"product_type":"c1","uid":3833637,"ip_address":"山东","ucode":"FD4D5EC8F4ECF2","user_header":"https://static001.geekbang.org/account/avatar/00/3a/7f/25/0c02f273.jpg","comment_is_top":false,"comment_ctime":1710167831,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100541001,"comment_content":"&#39;The model `text-davinci-003` has been deprecated，老师能不能按照最新的模型，把代码更新一遍？","like_count":0},{"had_liked":false,"id":387933,"user_name":"Owen","can_delete":false,"product_type":"c1","uid":2403622,"ip_address":"广东","ucode":"FDE0D574B8ED5A","user_header":"https://static001.geekbang.org/account/avatar/00/24/ad/26/767527f6.jpg","comment_is_top":false,"comment_ctime":1708999032,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100541001,"comment_content":"chatGPT新的接口已经改进了，可以用数组接收历史对话。\nmessages=[\n    {&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;星巴克是什么?&quot;},\n    {&quot;role&quot;: &quot;chatGPT&quot;, &quot;content&quot;: &quot;星巴克是一家咖啡厅.&quot;},\n    {&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;它的员工不同裙子颜色代表什么?&quot;}\n]","like_count":0},{"had_liked":false,"id":387894,"user_name":"新星","can_delete":false,"product_type":"c1","uid":3814977,"ip_address":"北京","ucode":"01B470B7092E91","user_header":"https://static001.geekbang.org/account/avatar/00/3a/36/41/8906e1a6.jpg","comment_is_top":false,"comment_ctime":1708846132,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100541001,"comment_content":"您好，这个怎么在数据集上运行呢\n\n","like_count":0},{"had_liked":false,"id":387875,"user_name":"HXL","can_delete":false,"product_type":"c1","uid":2631455,"ip_address":"北京","ucode":"97298EEC95BFCA","user_header":"https://static001.geekbang.org/account/avatar/00/28/27/1f/42059b0f.jpg","comment_is_top":false,"comment_ctime":1708756225,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100541001,"comment_content":"总结: \n1. 简单介绍了 completion接口, 但是现在这个借口已经被标记为 legacy了. \nhttps:&#47;&#47;platform.openai.com&#47;docs&#47;api-reference&#47;completions\n2. 介绍了什么是 Few-Shots Learning（少样本学习）\n3. AI 聊天机器人的工作原理,其实就是把结果作为prompt给到AI,为后续的question提供上下文","like_count":0},{"had_liked":false,"id":380545,"user_name":"escray","can_delete":false,"product_type":"c1","uid":1020525,"ip_address":"北京","ucode":"1F4204930E47C4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/92/6d/becd841a.jpg","comment_is_top":false,"comment_ctime":1693804765,"is_pvip":true,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100541001,"comment_content":"遇到了有意思的事情，可以看出一下两条语句的不同么？\n\nprint(get_response(prompt, 0.0, &quot;, &quot;))\nprint(get_response(prompt, 0.0, &quot;，&quot;))\n\n中文逗号和英文逗号，没想到在这里遇到了。\n\n刚看到“让 AI 帮我解决情感分析问题”，我以为可以把 ChatGPT 当做情感博主提问呢。\n\n试了一下聊天机器人的例子，现在 ChatGPT 是不是已经可以通过图灵测试了？","like_count":0},{"had_liked":false,"id":379317,"user_name":"Ares","can_delete":false,"product_type":"c1","uid":3683826,"ip_address":"澳大利亚","ucode":"4A24E7F3173F41","user_header":"https://static001.geekbang.org/account/avatar/00/38/35/f2/88a3f300.jpg","comment_is_top":false,"comment_ctime":1691722319,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100541001,"comment_content":"零基础小白，上一节课02就没有太明白，这一节课还是出现了问题，错误提示，能说明一下如何安装缺少的东西吗？ModuleNotFoundError                       Traceback (most recent call last)\n&lt;ipython-input-3-5abc133d1f55&gt; in &lt;cell line: 1&gt;()\n----&gt; 1 import openai\n      2 import os\n      3 \n      4 openai.api_key = os.environ.get(&quot;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&quot;)\n      5 COMPLETION_MODEL = &quot;text-davinci-003&quot;\n\nModuleNotFoundError: No module named &#39;openai&#39;\n\n---------------------------------------------------------------------------\nNOTE: If your import is failing due to a missing package, you can\nmanually install dependencies using either !pip or !apt.\n\nTo view examples of installing some common dependencies, click the\n&quot;Open Examples&quot; button below.\n","like_count":0},{"had_liked":false,"id":378832,"user_name":"Penguin Shi","can_delete":false,"product_type":"c1","uid":3646806,"ip_address":"广东","ucode":"477A24D7ECE09A","user_header":"https://static001.geekbang.org/account/avatar/00/37/a5/56/b3cf71a9.jpg","comment_is_top":false,"comment_ctime":1690862191,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100541001,"comment_content":"后面情感分析的例子，汇总成可运行的代码如下：\nimport openai\nimport os\n\nopenai.api_key = os.environ.get(&quot;OPENAI_API_KEY&quot;)\nCOMPLETION_MODEL = &quot;text-davinci-003&quot;\n\nprompts = &quot;&quot;&quot;判断一下用户的评论情感上是正面的还是负面的\n评论：买的银色版真的很好看，一天就到了，晚上就开始拿起来完系统很丝滑流畅，做工扎实，手感细腻，很精致哦苹果一如既往的好品质\n情感：正面\n\n评论：随意降价，不予价保，服务态度差\n情感：负面\n&quot;&quot;&quot;\n\ngood_case = prompts + &quot;&quot;&quot;\n评论：外形外观：苹果审美一直很好，金色非常漂亮\n拍照效果：14pro升级的4800万像素真的是没的说，太好了，\n运行速度：苹果的反应速度好，用上三五年也不会卡顿的，之前的7P用到现在也不卡\n其他特色：14pro的磨砂金真的太好看了，不太高调，也不至于没有特点，非常耐看，很好的\n情感：\n&quot;&quot;&quot;\n\nbad_case = prompts + &quot;&quot;&quot;\n评论：信号不好电池也不耐电不推荐购买\n情感\n&quot;&quot;&quot;\n\ndef get_response(prompt, temperature = 1.0):\n    completions = openai.Completion.create (\n        engine=COMPLETION_MODEL,\n        prompt=good_case,\n        max_tokens=1024,\n        n=1,\n        stop=None,\n        temperature=temperature,\n    )\n    message = completions.choices[0].text\n    return message\n    \nprint(get_response(good_case))\n\ndef get_response(prompt, temperature = 1.0):\n    completions = openai.Completion.create (\n        engine=COMPLETION_MODEL,\n        prompt=bad_case,\n        max_tokens=1024,\n        n=1,\n        stop=None,\n        temperature=temperature,\n    )\n    message = completions.choices[0].text\n    return message\n    \nprint(get_response(bad_case))\n","like_count":0},{"had_liked":false,"id":378580,"user_name":"挖绝机","can_delete":false,"product_type":"c1","uid":3682600,"ip_address":"广东","ucode":"49731D4C99B03E","user_header":"https://static001.geekbang.org/account/avatar/00/38/31/28/f55b9d8d.jpg","comment_is_top":false,"comment_ctime":1690447550,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100541001,"comment_content":"请问一下，如果需要将回答也放到提问中才能实现联系上下文，那么岂不是几轮对话下来就会超过token的最长限制，应该怎么解决？","like_count":0},{"had_liked":false,"id":374774,"user_name":"金hb.Ryan 冷空氣駕到","can_delete":false,"product_type":"c1","uid":1222233,"ip_address":"上海","ucode":"CAD363576696E4","user_header":"https://static001.geekbang.org/account/avatar/00/12/a6/59/1689ea0c.jpg","comment_is_top":false,"comment_ctime":1684404369,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100541001,"comment_content":"大模型挺牛逼，英文的case也可以识别中文的情感","like_count":0},{"had_liked":false,"id":374307,"user_name":"Geek_93970d","can_delete":false,"product_type":"c1","uid":1452167,"ip_address":"北京","ucode":"52AC308BEC7737","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJcwXucibksEYRSYg6icjibzGa7efcMrCsGec2UwibjTd57icqDz0zzkEEOM2pXVju60dibzcnQKPfRkN9g/132","comment_is_top":false,"comment_ctime":1683881537,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100541001,"comment_content":"代理出问题了，访问不了了\n","like_count":0},{"had_liked":false,"id":371482,"user_name":"型火🔥","can_delete":false,"product_type":"c1","uid":1003205,"ip_address":"北京","ucode":"C2322918B31E60","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4e/c5/78626367.jpg","comment_is_top":false,"comment_ctime":1679982949,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100541001,"comment_content":"这个插件收费了","like_count":0},{"had_liked":false,"id":371258,"user_name":"我白的你，死去活来","can_delete":false,"product_type":"c1","uid":1626590,"ip_address":"天津","ucode":"C693C674E2DF54","user_header":"https://static001.geekbang.org/account/avatar/00/18/d1/de/dd18757b.jpg","comment_is_top":false,"comment_ctime":1679706613,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100541001,"comment_content":"我调用api  报错，说国内不允许 使用这类能力，大家都是到国外服务器调用的吗","like_count":0},{"had_liked":false,"id":371244,"user_name":"HaoYa","can_delete":false,"product_type":"c1","uid":1746470,"ip_address":"马来西亚","ucode":"CFD403712EB066","user_header":"https://static001.geekbang.org/account/avatar/00/1a/a6/26/9a7fb62b.jpg","comment_is_top":false,"comment_ctime":1679669058,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100541001,"comment_content":"我试了 代码可以运行","like_count":0}]}