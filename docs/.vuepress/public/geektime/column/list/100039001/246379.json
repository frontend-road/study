{"id":246379,"title":"95 | é¡¹ç›®å®æˆ˜äºŒï¼šè®¾è®¡å®ç°ä¸€ä¸ªé€šç”¨çš„æ¥å£å¹‚ç­‰æ¡†æ¶ï¼ˆå®ç°ï¼‰","content":"<p>ä¸Šä¸€èŠ‚è¯¾ï¼Œæˆ‘ä»¬è®²è§£äº†å¹‚ç­‰æ¡†æ¶çš„è®¾è®¡æ€è·¯ã€‚åœ¨æ­£å¸¸æƒ…å†µä¸‹ï¼Œå¹‚ç­‰æ¡†æ¶çš„å¤„ç†æµç¨‹æ˜¯æ¯”è¾ƒç®€å•çš„ã€‚è°ƒç”¨æ–¹ç”Ÿæˆå¹‚ç­‰å·ï¼Œä¼ é€’ç»™å®ç°æ–¹ï¼Œå®ç°æ–¹è®°å½•å¹‚ç­‰å·æˆ–è€…ç”¨å¹‚ç­‰å·åˆ¤é‡ã€‚ä½†æ˜¯ï¼Œå¹‚ç­‰æ¡†æ¶è¦å¤„ç†çš„å¼‚å¸¸æƒ…å†µå¾ˆå¤šï¼Œè¿™ä¹Ÿæ˜¯è®¾è®¡çš„å¤æ‚ä¹‹å¤„å’Œéš¾ç‚¹ä¹‹å¤„ã€‚æ¯”å¦‚ï¼Œä»£ç è¿è¡Œå¼‚å¸¸ã€ä¸šåŠ¡ç³»ç»Ÿå®•æœºã€å¹‚ç­‰æ¡†æ¶å¼‚å¸¸ã€‚</p><p>è™½ç„¶å¹‚ç­‰æ¡†æ¶è¦å¤„ç†çš„å¼‚å¸¸å¾ˆå¤šï¼Œä½†è€ƒè™‘åˆ°å¼€å‘æˆæœ¬ä»¥åŠç®€å•æ˜“ç”¨æ€§ï¼Œæˆ‘ä»¬å¯¹æŸäº›å¼‚å¸¸çš„å¤„ç†åœ¨å·¥ç¨‹ä¸Šåšäº†å¦¥åï¼Œäº¤ç”±ä¸šåŠ¡ç³»ç»Ÿæˆ–è€…äººå·¥ä»‹å…¥å¤„ç†ã€‚è¿™æ ·å°±å¤§å¤§ç®€åŒ–äº†å¹‚ç­‰æ¡†æ¶å¼€å‘çš„å¤æ‚åº¦å’Œéš¾åº¦ã€‚</p><p>ä»Šå¤©ï¼Œæˆ‘ä»¬é’ˆå¯¹å¹‚ç­‰æ¡†æ¶çš„è®¾è®¡æ€è·¯ï¼Œè®²è§£å¦‚ä½•ç¼–ç å®ç°ã€‚è·Ÿé™æµæ¡†æ¶çš„è®²è§£ç›¸åŒï¼Œå¯¹äºå¹‚ç­‰æ¡†æ¶ï¼Œæˆ‘ä»¬ä¹Ÿä¼šè¿˜åŸå®ƒçš„æ•´ä¸ªå¼€å‘è¿‡ç¨‹ï¼Œä»V1ç‰ˆæœ¬éœ€æ±‚ã€æœ€å°åŸå‹ä»£ç è®²èµ·ï¼Œç„¶åè®²è§£å¦‚ä½•reviewä»£ç å‘ç°é—®é¢˜ã€é‡æ„ä»£ç è§£å†³é—®é¢˜ï¼Œæœ€ç»ˆå¾—åˆ°ä¸€ä»½æ˜“è¯»ã€æ˜“æ‰©å±•ã€æ˜“ç»´æŠ¤ã€çµæ´»ã€å¯æµ‹è¯•çš„é«˜è´¨é‡ä»£ç å®ç°ã€‚</p><p>è¯ä¸å¤šè¯´ï¼Œè®©æˆ‘ä»¬æ­£å¼å¼€å§‹ä»Šå¤©çš„å­¦ä¹ å§ï¼</p><h2>V1ç‰ˆæœ¬åŠŸèƒ½éœ€æ±‚</h2><p>ä¸Šä¸€èŠ‚è¯¾ç»™å‡ºçš„è®¾è®¡æ€è·¯æ¯”è¾ƒé›¶æ•£ï¼Œé‡ç‚¹è¿˜æ˜¯åœ¨è®²è®¾è®¡çš„ç¼˜ç”±ï¼Œä¸ºä»€ä¹ˆè¦è¿™ä¹ˆè®¾è®¡ã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬å†é‡æ–°æ•´ç†ä¸€ä¸‹ï¼Œç»è¿‡ä¸Šä¸€èŠ‚è¯¾çš„åˆ†ææ¢³ç†æœ€ç»ˆå¾—åˆ°çš„è®¾è®¡æ€è·¯ã€‚è™½ç„¶ä¸Šä¸€èŠ‚è¯¾çš„åˆ†æå¾ˆå¤æ‚ã€å¾ˆçƒ§è„‘ï¼Œä½†æ€ä»æ·±è€Œè¡Œä»ç®€ï¼Œæœ€ç»ˆå¾—åˆ°çš„å¹‚ç­‰æ¡†æ¶çš„è®¾è®¡æ€è·¯æ˜¯å¾ˆç®€å•çš„ï¼Œä¸»è¦åŒ…å«ä¸‹é¢è¿™æ ·ä¸¤ä¸ªä¸»è¦çš„åŠŸèƒ½å¼€å‘ç‚¹ï¼š</p><!-- [[[read_end]]] --><ul>\n<li>å®ç°ç”Ÿæˆå¹‚ç­‰å·çš„åŠŸèƒ½ï¼›</li>\n<li>å®ç°å­˜å‚¨ã€æŸ¥è¯¢ã€åˆ é™¤å¹‚ç­‰å·çš„åŠŸèƒ½ã€‚</li>\n</ul><p>å› ä¸ºåŠŸèƒ½éå¸¸ç®€å•ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬å°±ä¸å†è¿›ä¸€æ­¥è£å‰ªäº†ã€‚åœ¨V1ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬ä¼šå®ç°ä¸Šé¢ç½—åˆ—çš„æ‰€æœ‰åŠŸèƒ½ã€‚é’ˆå¯¹è¿™ä¸¤ä¸ªåŠŸèƒ½ç‚¹ï¼Œæˆ‘ä»¬å…ˆæ¥è¯´ä¸‹å®ç°æ€è·¯ã€‚</p><p><strong>æˆ‘ä»¬å…ˆæ¥çœ‹ï¼Œå¦‚ä½•ç”Ÿæˆå¹‚ç­‰å·ã€‚</strong></p><p>å¹‚ç­‰å·ç”¨æ¥æ ‡è¯†ä¸¤ä¸ªæ¥å£è¯·æ±‚æ˜¯å¦æ˜¯åŒä¸€ä¸ªä¸šåŠ¡è¯·æ±‚ï¼Œæ¢å¥è¯è¯´ï¼Œä¸¤ä¸ªæ¥å£è¯·æ±‚æ˜¯å¦æ˜¯é‡è¯•å…³ç³»ï¼Œè€Œéç‹¬ç«‹çš„ä¸¤ä¸ªè¯·æ±‚ã€‚æ¥å£è°ƒç”¨æ–¹éœ€è¦åœ¨å‘é€æ¥å£è¯·æ±‚çš„åŒæ—¶ï¼Œå°†å¹‚ç­‰å·ä¸€å—ä¼ é€’ç»™æ¥å£å®ç°æ–¹ã€‚é‚£å¦‚ä½•æ¥ç”Ÿæˆå¹‚ç­‰å·å‘¢ï¼Ÿä¸€èˆ¬æœ‰ä¸¤ç§ç”Ÿæˆæ–¹å¼ã€‚ä¸€ç§æ–¹å¼æ˜¯é›†ä¸­ç”Ÿæˆå¹¶ä¸”åˆ†æ´¾ç»™è°ƒç”¨æ–¹ï¼Œå¦ä¸€ç§æ–¹å¼æ˜¯ç›´æ¥ç”±è°ƒç”¨æ–¹ç”Ÿæˆã€‚</p><p>å¯¹äºç¬¬ä¸€ç§ç”Ÿæˆæ–¹å¼ï¼Œæˆ‘ä»¬éœ€è¦éƒ¨ç½²ä¸€å¥—å¹‚ç­‰å·çš„ç”Ÿæˆç³»ç»Ÿï¼Œå¹¶ä¸”æä¾›ç›¸åº”çš„è¿œç¨‹æ¥å£ï¼ˆRestfulæˆ–è€…RPCæ¥å£ï¼‰ï¼Œè°ƒç”¨æ–¹é€šè¿‡è°ƒç”¨è¿œç¨‹æ¥å£æ¥è·å–å¹‚ç­‰å·ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œå¯¹è°ƒç”¨æ–¹å®Œå…¨éšè—äº†å¹‚ç­‰å·çš„å®ç°ç»†èŠ‚ã€‚å½“æˆ‘ä»¬éœ€è¦æ”¹åŠ¨å¹‚ç­‰å·çš„ç”Ÿæˆç®—æ³•æ—¶ï¼Œè°ƒç”¨æ–¹ä¸éœ€è¦æ”¹åŠ¨ä»»ä½•ä»£ç ã€‚</p><p>å¯¹äºç¬¬äºŒç§ç”Ÿæˆæ–¹å¼ï¼Œè°ƒç”¨æ–¹æŒ‰ç…§è·Ÿæ¥å£å®ç°æ–¹é¢„å…ˆå•†é‡å¥½çš„ç®—æ³•ï¼Œè‡ªå·±æ¥ç”Ÿæˆå¹‚ç­‰å·ã€‚è¿™ç§å®ç°æ–¹å¼çš„å¥½å¤„åœ¨äºï¼Œä¸ç”¨åƒç¬¬ä¸€ç§æ–¹å¼é‚£æ ·è°ƒç”¨è¿œç¨‹æ¥å£ï¼Œæ‰€ä»¥æ‰§è¡Œæ•ˆç‡æ›´é«˜ã€‚ä½†æ˜¯ï¼Œä¸€æ—¦éœ€è¦ä¿®æ”¹å¹‚ç­‰å·çš„ç”Ÿæˆç®—æ³•ï¼Œå°±éœ€è¦ä¿®æ”¹æ¯ä¸ªè°ƒç”¨æ–¹çš„ä»£ç ã€‚</p><p>å¹¶ä¸”ï¼Œæ¯ä¸ªè°ƒç”¨æ–¹è‡ªå·±å®ç°å¹‚ç­‰å·çš„ç”Ÿæˆç®—æ³•ä¹Ÿä¼šæœ‰é—®é¢˜ã€‚ä¸€æ–¹é¢ï¼Œé‡å¤å¼€å‘ï¼Œè¿åDRYåŸåˆ™ã€‚å¦ä¸€æ–¹é¢ï¼Œå·¥ç¨‹å¸ˆçš„å¼€å‘æ°´å¹³å±‚æ¬¡ä¸é½ï¼Œä»£ç éš¾å…ä¼šæœ‰bugã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå¯¹äºå¤æ‚çš„å¹‚ç­‰å·ç”Ÿæˆç®—æ³•ï¼Œæ¯”å¦‚ä¾èµ–å¤–éƒ¨ç³»ç»ŸRedisç­‰ï¼Œæ˜¾ç„¶æ›´åŠ é€‚åˆä¸Šä¸€ç§å®ç°æ–¹å¼ï¼Œå¯ä»¥é¿å…è°ƒç”¨æ–¹ä¸ºäº†ä½¿ç”¨å¹‚ç­‰å·å¼•å…¥æ–°çš„å¤–éƒ¨ç³»ç»Ÿã€‚</p><p>æƒè¡¡æ¥è®²ï¼Œæ—¢è€ƒè™‘åˆ°ç”Ÿæˆå¹‚ç­‰å·çš„æ•ˆç‡ï¼Œåˆè€ƒè™‘åˆ°ä»£ç ç»´æŠ¤çš„æˆæœ¬ï¼Œæˆ‘ä»¬é€‰æ‹©ç¬¬äºŒç§å®ç°æ–¹å¼ï¼Œå¹¶ä¸”åœ¨æ­¤åŸºç¡€ä¸Šåšäº›æ”¹è¿›ï¼Œç”±å¹‚ç­‰æ¡†æ¶æ¥ç»Ÿä¸€æä¾›å¹‚ç­‰å·ç”Ÿæˆç®—æ³•çš„ä»£ç å®ç°ï¼Œå¹¶å°è£…æˆå¼€å‘ç±»åº“ï¼Œæä¾›ç»™å„ä¸ªè°ƒç”¨æ–¹å¤ç”¨ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬å¸Œæœ›ç”Ÿæˆå¹‚ç­‰å·çš„ç®—æ³•å°½å¯èƒ½çš„ç®€å•ï¼Œä¸ä¾èµ–å…¶ä»–å¤–éƒ¨ç³»ç»Ÿã€‚</p><p>å®é™…ä¸Šï¼Œå¯¹äºå¹‚ç­‰å·çš„å”¯ä¸€è¦æ±‚å°±æ˜¯å…¨å±€å”¯ä¸€ã€‚å…¨å±€å”¯ä¸€IDçš„ç”Ÿæˆç®—æ³•æœ‰å¾ˆå¤šã€‚æ¯”å¦‚ï¼Œç®€å•ç‚¹çš„æœ‰å–UUIDï¼Œå¤æ‚ç‚¹çš„å¯ä»¥æŠŠåº”ç”¨åæ‹¼æ¥åœ¨UUIDä¸Šï¼Œæ–¹ä¾¿åšé—®é¢˜æ’æŸ¥ã€‚æ€»ä½“ä¸Šæ¥è®²ï¼Œå¹‚ç­‰å·çš„ç”Ÿæˆç®—æ³•å¹¶ä¸éš¾ã€‚</p><p><strong>æˆ‘ä»¬å†æ¥çœ‹ï¼Œå¦‚ä½•å®ç°å¹‚ç­‰å·çš„å­˜å‚¨ã€æŸ¥è¯¢å’Œåˆ é™¤ã€‚</strong></p><p>ä»ç°åœ¨çš„éœ€æ±‚æ¥çœ‹ï¼Œå¹‚ç­‰å·åªæ˜¯ä¸ºäº†åˆ¤é‡ã€‚åœ¨æ•°æ®åº“ä¸­ï¼Œæˆ‘ä»¬åªéœ€è¦å­˜å‚¨ä¸€ä¸ªå¹‚ç­‰å·å°±å¯ä»¥ï¼Œä¸éœ€è¦å¤ªå¤æ‚çš„å­˜å‚¨ç»“æ„ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬ä¸é€‰æ‹©ä½¿ç”¨å¤æ‚çš„å…³ç³»å‹æ•°æ®åº“ï¼Œè€Œæ˜¯é€‰æ‹©ä½¿ç”¨æ›´åŠ ç®€å•çš„ã€è¯»å†™æ›´åŠ å¿«é€Ÿçš„é”®å€¼æ•°æ®åº“ï¼Œæ¯”å¦‚Redisã€‚</p><p>åœ¨å¹‚ç­‰åˆ¤é‡é€»è¾‘ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å…ˆæ£€æŸ¥å¹‚ç­‰å·æ˜¯å¦å­˜åœ¨ã€‚å¦‚æœæ²¡æœ‰å­˜åœ¨ï¼Œå†å°†å¹‚ç­‰å·å­˜å‚¨è¿›Redisã€‚å¤šä¸ªçº¿ç¨‹ï¼ˆåŒä¸€ä¸ªä¸šåŠ¡å®ä¾‹çš„å¤šä¸ªçº¿ç¨‹ï¼‰æˆ–è€…å¤šè¿›ç¨‹ï¼ˆå¤šä¸ªä¸šåŠ¡å®ä¾‹ï¼‰åŒæ—¶æ‰§è¡Œåˆšåˆšçš„â€œæ£€æŸ¥-è®¾ç½®â€é€»è¾‘æ—¶ï¼Œå°±ä¼šå­˜åœ¨ç«äº‰å…³ç³»ï¼ˆç«æ€ï¼Œrace conditionï¼‰ã€‚æ¯”å¦‚ï¼ŒAçº¿ç¨‹æ£€æŸ¥å¹‚ç­‰å·ä¸å­˜åœ¨ï¼Œåœ¨Açº¿ç¨‹å°†å¹‚ç­‰å·å­˜å‚¨è¿›Redisä¹‹å‰ï¼ŒBçº¿ç¨‹ä¹Ÿæ£€æŸ¥å¹‚ç­‰å·ä¸å­˜åœ¨ï¼Œè¿™æ ·å°±ä¼šå¯¼è‡´ä¸šåŠ¡è¢«é‡å¤æ‰§è¡Œã€‚ä¸ºäº†é¿å…è¿™ç§æƒ…å†µå‘ç”Ÿï¼Œæˆ‘ä»¬è¦ç»™â€œæ£€æŸ¥-è®¾ç½®â€æ“ä½œåŠ é”ï¼Œè®©åŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½æ‰§è¡Œã€‚é™¤æ­¤ä¹‹å¤–ï¼Œä¸ºäº†é¿å…å¤šè¿›ç¨‹ä¹‹é—´çš„ç«äº‰ï¼Œæ™®é€šçš„çº¿ç¨‹é”è¿˜ä¸èµ·ä½œç”¨ï¼Œæˆ‘ä»¬éœ€è¦åˆ†å¸ƒå¼é”ã€‚</p><p>å¼•å…¥åˆ†å¸ƒå¼é”ä¼šå¢åŠ å¼€å‘çš„éš¾åº¦å’Œå¤æ‚åº¦ï¼Œè€ŒRedisæœ¬èº«å°±æä¾›äº†æŠŠâ€œæ£€æŸ¥-è®¾ç½®â€æ“ä½œä½œä¸ºåŸå­æ“ä½œæ‰§è¡Œçš„å‘½ä»¤ï¼šsetnx(key, value)ã€‚å®ƒå…ˆæ£€æŸ¥keyæ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨ï¼Œåˆ™è¿”å›ç»“æœ0ï¼›å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™å°†keyå€¼å­˜ä¸‹æ¥ï¼Œå¹¶å°†å€¼è®¾ç½®ä¸ºvalueï¼Œè¿”å›ç»“æœ1ã€‚å› ä¸ºRedisæœ¬èº«æ˜¯å•çº¿ç¨‹æ‰§è¡Œå‘½ä»¤çš„ï¼Œæ‰€ä»¥ä¸å­˜åœ¨åˆšåˆšè®²åˆ°çš„å¹¶å‘é—®é¢˜ã€‚</p><h2>æœ€å°åŸå‹ä»£ç å®ç°</h2><p>V1ç‰ˆæœ¬è¦å®ç°çš„åŠŸèƒ½å’Œå®ç°æ€è·¯ï¼Œç°åœ¨å·²ç»å¾ˆæ˜ç¡®äº†ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹å…·ä½“çš„ä»£ç å®ç°ã€‚è¿˜æ˜¯è·Ÿé™æµæ¡†æ¶åŒæ ·çš„å®ç°æ–¹æ³•ï¼Œæˆ‘ä»¬å…ˆä¸è€ƒè™‘è®¾è®¡å’Œä»£ç è´¨é‡ï¼Œæ€ä¹ˆç®€å•æ€ä¹ˆæ¥ï¼Œå…ˆå†™å‡ºMVPä»£ç ï¼Œç„¶ååŸºäºè¿™ä¸ªæœ€ç®€é™‹çš„ç‰ˆæœ¬åšä¼˜åŒ–é‡æ„ã€‚</p><p>V1ç‰ˆæœ¬çš„åŠŸèƒ½éå¸¸ç®€å•ï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ªç±»å°±èƒ½æå®šï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºã€‚åªç”¨äº†ä¸åˆ°30è¡Œä»£ç ï¼Œå°±æå®šäº†ä¸€ä¸ªæ¡†æ¶ï¼Œæ˜¯ä¸æ˜¯è§‰å¾—æœ‰ç‚¹ä¸å¯æ€è®®ã€‚å¯¹äºè¿™æ®µä»£ç ï¼Œä½ å¯ä»¥å…ˆæ€è€ƒä¸‹ï¼Œæœ‰å“ªäº›å€¼å¾—ä¼˜åŒ–çš„åœ°æ–¹ã€‚</p><pre><code>public class Idempotence {\n  private JedisCluster jedisCluster;\n\n  public Idempotence(String redisClusterAddress, GenericObjectPoolConfig config) {\n    String[] addressArray= redisClusterAddress.split(&quot;;&quot;);\n    Set&lt;HostAndPort&gt; redisNodes = new HashSet&lt;&gt;();\n    for (String address : addressArray) {\n      String[] hostAndPort = address.split(&quot;:&quot;);\n      redisNodes.add(new HostAndPort(hostAndPort[0], Integer.valueOf(hostAndPort[1])));\n    }\n    this.jedisCluster = new JedisCluster(redisNodes, config);\n  }\n  \n  public String genId() {\n    return UUID.randomUUID().toString();\n  }\n\n  public boolean saveIfAbsent(String idempotenceId) {\n    Long success = jedisCluster.setnx(idempotenceId, &quot;1&quot;);\n    return success == 1;\n  }\n\n  public void delete(String idempotenceId) {\n    jedisCluster.del(idempotenceId);\n  }\n}\n</code></pre><h2>Reviewæœ€å°åŸå‹ä»£ç </h2><p>å°½ç®¡MVPä»£ç å¾ˆå°‘ï¼Œä½†ä»”ç»†æ¨æ•²ï¼Œä¹Ÿæœ‰å¾ˆå¤šå€¼å¾—ä¼˜åŒ–çš„åœ°æ–¹ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬å°±ç«™åœ¨Code Reviewerçš„è§’åº¦ï¼Œåˆ†æä¸€ä¸‹è¿™æ®µä»£ç ã€‚æˆ‘æŠŠæˆ‘çš„æ‰€æœ‰æ„è§éƒ½æ”¾åˆ°ä»£ç æ³¨é‡Šä¸­äº†ï¼Œä½ å¯ä»¥å¯¹ç…§ç€ä»£ç ä¸€å—çœ‹ä¸‹ã€‚</p><pre><code>public class Idempotence {\n  // comment-1: å¦‚æœè¦æ›¿æ¢å­˜å‚¨æ–¹å¼ï¼Œæ˜¯ä¸æ˜¯å¾ˆéº»çƒ¦å‘¢ï¼Ÿ\n  private JedisCluster jedisCluster;\n\n  // comment-2: å¦‚æœå¹‚ç­‰æ¡†æ¶è¦è·Ÿä¸šåŠ¡ç³»ç»Ÿå¤ç”¨jedisClusterè¿æ¥å‘¢ï¼Ÿ\n  // comment-3: æ˜¯ä¸æ˜¯åº”è¯¥æ³¨é‡Šè¯´æ˜ä¸€ä¸‹redisClusterAddressçš„æ ¼å¼ï¼Œä»¥åŠconfigæ˜¯å¦å¯ä»¥ä¼ é€’è¿›nullå‘¢ï¼Ÿ\n  public Idempotence(String redisClusterAddress, GenericObjectPoolConfig config) {\n    // comment-4: è¿™æ®µé€»è¾‘æ”¾åˆ°æ„é€ å‡½æ•°é‡Œï¼Œä¸å®¹æ˜“å†™å•å…ƒæµ‹è¯•å‘¢\n    String[] addressArray= redisClusterAddress.split(&quot;;&quot;);\n    Set&lt;HostAndPort&gt; redisNodes = new HashSet&lt;&gt;();\n    for (String address : addressArray) {\n      String[] hostAndPort = address.split(&quot;:&quot;);\n      redisNodes.add(new HostAndPort(hostAndPort[0], Integer.valueOf(hostAndPort[1])));\n    }\n    this.jedisCluster = new JedisCluster(redisNodes, config);\n  }\n  \n  // comment-5: generateId()æ˜¯ä¸æ˜¯æ¯”ç¼©å†™è¦å¥½ç‚¹ï¼Ÿ\n  // comment-6: æ ¹æ®æ¥å£éš”ç¦»åŸåˆ™ï¼Œè¿™ä¸ªå‡½æ•°è·Ÿå…¶ä»–å‡½æ•°çš„ä½¿ç”¨åœºæ™¯å®Œå…¨ä¸åŒï¼Œè¿™ä¸ªå‡½æ•°ä¸»è¦ç”¨åœ¨è°ƒç”¨æ–¹ï¼Œå…¶ä»–å‡½æ•°ç”¨åœ¨å®ç°æ–¹ï¼Œæ˜¯ä¸æ˜¯åº”è¯¥åˆ†åˆ«æ”¾åˆ°ä¸¤ä¸ªç±»ä¸­ï¼Ÿ\n  public String genId() {\n    return UUID.randomUUID().toString();\n  }\n\n  // comment-7: è¿”å›å€¼çš„æ„ä¹‰æ˜¯ä¸æ˜¯åº”è¯¥æ³¨é‡Šè¯´æ˜ä¸€ä¸‹ï¼Ÿ\n  public boolean saveIfAbsent(String idempotenceId) {\n    Long success = jedisCluster.setnx(idempotenceId, &quot;1&quot;);\n    return success == 1;\n  }\n\n  public void delete(String idempotenceId) {\n    jedisCluster.del(idempotenceId);\n  }\n}\n</code></pre><p>æ€»ç»“ä¸€ä¸‹ï¼ŒMVPä»£ç ä¸»è¦æ¶‰åŠä¸‹é¢è¿™æ ·å‡ ä¸ªé—®é¢˜ã€‚</p><ul>\n<li><strong>ä»£ç å¯è¯»æ€§é—®é¢˜</strong>ï¼šæœ‰äº›å‡½æ•°çš„å‚æ•°å’Œè¿”å›å€¼çš„æ ¼å¼å’Œæ„ä¹‰ä¸å¤Ÿæ˜ç¡®ï¼Œéœ€è¦æ³¨é‡Šè¡¥å……è§£é‡Šä¸€ä¸‹ã€‚genId()å‡½æ•°ä½¿ç”¨äº†ç¼©å†™ï¼Œå…¨æ‹¼generateId()å¯èƒ½æ›´å¥½äº›ï¼</li>\n<li><strong>ä»£ç å¯æ‰©å±•æ€§é—®é¢˜</strong>ï¼šæŒ‰ç…§ç°åœ¨çš„ä»£ç å®ç°æ–¹å¼ï¼Œå¦‚æœæ”¹å˜å¹‚ç­‰å·çš„å­˜å‚¨æ–¹å¼å’Œç”Ÿæˆç®—æ³•ï¼Œä»£ç ä¿®æ”¹èµ·æ¥ä¼šæ¯”è¾ƒéº»çƒ¦ã€‚é™¤æ­¤ä¹‹å¤–ï¼ŒåŸºäºæ¥å£éš”ç¦»åŸåˆ™ï¼Œæˆ‘ä»¬åº”è¯¥å°†genId()å‡½æ•°è·Ÿå…¶ä»–å‡½æ•°åˆ†ç¦»å¼€æ¥ï¼Œæ”¾åˆ°ä¸¤ä¸ªç±»ä¸­ã€‚ç‹¬ç«‹å˜åŒ–ï¼Œéš”ç¦»ä¿®æ”¹ï¼Œæ›´å®¹æ˜“æ‰©å±•ï¼</li>\n<li><strong>ä»£ç å¯æµ‹è¯•æ€§é—®é¢˜</strong>ï¼šè§£æRedis Clusteråœ°å€çš„ä»£ç é€»è¾‘è¾ƒå¤æ‚ï¼Œä½†å› ä¸ºæ”¾åˆ°äº†æ„é€ å‡½æ•°ä¸­ï¼Œæ— æ³•å¯¹å®ƒç¼–å†™å•å…ƒæµ‹è¯•ã€‚</li>\n<li><strong>ä»£ç çµæ´»æ€§é—®é¢˜</strong>ï¼šä¸šåŠ¡ç³»ç»Ÿæœ‰å¯èƒ½å¸Œæœ›å¹‚ç­‰æ¡†æ¶å¤ç”¨å·²ç»å»ºç«‹å¥½çš„jedisClusterï¼Œè€Œä¸æ˜¯å•ç‹¬ç»™å¹‚ç­‰æ¡†æ¶åˆ›å»ºä¸€ä¸ªjedisClusterã€‚</li>\n</ul><h2>é‡æ„æœ€å°åŸå‹ä»£ç </h2><p>å®é™…ä¸Šï¼Œé—®é¢˜æ‰¾åˆ°äº†ï¼Œä¿®æ”¹èµ·æ¥å°±å®¹æ˜“å¤šäº†ã€‚é’ˆå¯¹åˆšåˆšç½—åˆ—çš„å‡ ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯¹MVPä»£ç è¿›è¡Œé‡æ„ï¼Œé‡æ„ä¹‹åçš„ä»£ç å¦‚ä¸‹æ‰€ç¤ºã€‚</p><pre><code>// ä»£ç ç›®å½•ç»“æ„\ncom.xzg.cd.idempotence\n --Idempotence\n --IdempotenceIdGenerator(å¹‚ç­‰å·ç”Ÿæˆç±»)\n --IdempotenceStorage(æ¥å£ï¼šç”¨æ¥è¯»å†™å¹‚ç­‰å·)\n --RedisClusterIdempotenceStorage(IdempotenceStorageçš„å®ç°ç±»)\n\n// æ¯ä¸ªç±»çš„ä»£ç å®ç°\npublic class Idempotence {\n  private IdempotenceStorage storage;\n\n  public Idempotence(IdempotenceStorage storage) {\n    this.storage = storage;\n  }\n\n  public boolean saveIfAbsent(String idempotenceId) {\n    return storage.saveIfAbsent(idempotenceId);\n  }\n\n  public void delete(String idempotenceId) {\n    storage.delete(idempotenceId);\n  }\n}\n\npublic class IdempotenceIdGenerator {\n  public String generateId() {\n    return UUID.randomUUID().toString();\n  }\n}\n\npublic interface IdempotenceStorage {\n  boolean saveIfAbsent(String idempotenceId);\n  void delete(String idempotenceId);\n}\n\npublic class RedisClusterIdempotenceStorage implements IdempotenceStorage {\n  private JedisCluster jedisCluster;\n\n  /**\n   * Constructor\n   * @param redisClusterAddress the format is 128.91.12.1:3455;128.91.12.2:3452;289.13.2.12:8978\n   * @param config should not be null\n   */\n  public RedisIdempotenceStorage(String redisClusterAddress, GenericObjectPoolConfig config) {\n    Set&lt;HostAndPort&gt; redisNodes = parseHostAndPorts(redisClusterAddress);\n    this.jedisCluster = new JedisCluster(redisNodes, config);\n  }\n\n  public RedisIdempotenceStorage(JedisCluster jedisCluster) {\n    this.jedisCluster = jedisCluster;\n  }\n\n  /**\n   * Save {@idempotenceId} into storage if it does not exist.\n   * @param idempotenceId the idempotence ID\n   * @return true if the {@idempotenceId} is saved, otherwise return false\n   */\n  public boolean saveIfAbsent(String idempotenceId) {\n    Long success = jedisCluster.setnx(idempotenceId, &quot;1&quot;);\n    return success == 1;\n  }\n\n  public void delete(String idempotenceId) {\n    jedisCluster.del(idempotenceId);\n  }\n\n  @VisibleForTesting\n  protected Set&lt;HostAndPort&gt; parseHostAndPorts(String redisClusterAddress) {\n    String[] addressArray= redisClusterAddress.split(&quot;;&quot;);\n    Set&lt;HostAndPort&gt; redisNodes = new HashSet&lt;&gt;();\n    for (String address : addressArray) {\n      String[] hostAndPort = address.split(&quot;:&quot;);\n      redisNodes.add(new HostAndPort(hostAndPort[0], Integer.valueOf(hostAndPort[1])));\n    }\n    return redisNodes;\n  }\n}\n</code></pre><p>æ¥ä¸‹æ¥ï¼Œæˆ‘å†æ€»ç»“ç½—åˆ—ä¸€ä¸‹ï¼Œé’ˆå¯¹ä¹‹å‰å‘ç°çš„é—®é¢˜ï¼Œæˆ‘ä»¬éƒ½åšäº†å“ªäº›ä»£ç æ”¹åŠ¨ã€‚ä¸»è¦æœ‰ä¸‹é¢è¿™æ ·å‡ ç‚¹ï¼Œä½ å¯ä»¥ç»“åˆç€ä»£ç ä¸€å—çœ‹ä¸‹ã€‚</p><p><strong>åœ¨ä»£ç å¯è¯»æ€§æ–¹é¢ï¼Œ</strong>æˆ‘ä»¬å¯¹æ„é€ å‡½æ•°ã€saveIfAbsense()å‡½æ•°çš„å‚æ•°å’Œè¿”å›å€¼åšäº†æ³¨é‡Šï¼Œå¹¶ä¸”å°†genId()å‡½æ•°æ”¹ä¸ºå…¨æ‹¼generateId()ã€‚ä¸è¿‡ï¼Œå¯¹äºè¿™ä¸ªå‡½æ•°æ¥è¯´ï¼Œç¼©å†™å®é™…ä¸Šé—®é¢˜ä¹Ÿä¸å¤§ã€‚</p><p><strong>åœ¨ä»£ç å¯æ‰©å±•æ€§æ–¹é¢ï¼Œ</strong>æˆ‘ä»¬æŒ‰ç…§åŸºäºæ¥å£è€Œéå®ç°çš„ç¼–ç¨‹åŸåˆ™ï¼Œå°†å¹‚ç­‰å·çš„è¯»å†™ç‹¬ç«‹å‡ºæ¥ï¼Œè®¾è®¡æˆIdempotenceStorageæ¥å£å’ŒRedisClusterIdempotenceStorageå®ç°ç±»ã€‚RedisClusterIdempotenceStorageå®ç°äº†åŸºäºRedis Clusterçš„å¹‚ç­‰å·è¯»å†™ã€‚å¦‚æœæˆ‘ä»¬éœ€è¦æ›¿æ¢æ–°çš„å¹‚ç­‰å·è¯»å†™æ–¹å¼ï¼Œæ¯”å¦‚åŸºäºå•ä¸ªRedisè€ŒéRedis Clusterï¼Œæˆ‘ä»¬å°±å¯ä»¥å†å®šä¹‰ä¸€ä¸ªå®ç°äº†IdempotenceStorageæ¥å£çš„å®ç°ç±»ï¼šRedisIdempotenceStorageã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼ŒæŒ‰ç…§æ¥å£éš”ç¦»åŸåˆ™ï¼Œæˆ‘ä»¬å°†ç”Ÿæˆå¹‚ç­‰å·çš„ä»£ç æŠ½ç¦»å‡ºæ¥ï¼Œæ”¾åˆ°IdempotenceIdGeneratorç±»ä¸­ã€‚è¿™æ ·ï¼Œè°ƒç”¨æ–¹åªéœ€è¦ä¾èµ–è¿™ä¸ªç±»çš„ä»£ç å°±å¯ä»¥äº†ã€‚å¹‚ç­‰å·ç”Ÿæˆç®—æ³•çš„ä¿®æ”¹ï¼Œè·Ÿå¹‚ç­‰å·å­˜å‚¨é€»è¾‘çš„ä¿®æ”¹ï¼Œä¸¤è€…å®Œå…¨ç‹¬ç«‹ï¼Œä¸€ä¸ªä¿®æ”¹ä¸ä¼šå½±å“å¦å¤–ä¸€ä¸ªã€‚</p><p><strong>åœ¨ä»£ç å¯æµ‹è¯•æ€§æ–¹é¢ï¼Œ</strong>æˆ‘ä»¬æŠŠåŸæœ¬æ”¾åœ¨æ„é€ å‡½æ•°ä¸­çš„é€»è¾‘æŠ½ç¦»å‡ºæ¥ï¼Œæ”¾åˆ°äº†parseHostAndPorts()å‡½æ•°ä¸­ã€‚è¿™ä¸ªå‡½æ•°æœ¬åº”è¯¥æ˜¯Privateè®¿é—®æƒé™çš„ï¼Œä½†ä¸ºäº†æ–¹ä¾¿ç¼–å†™å•å…ƒæµ‹è¯•ï¼Œæˆ‘ä»¬æŠŠå®ƒè®¾ç½®ä¸ºæˆäº†Protectedè®¿é—®æƒé™ï¼Œå¹¶ä¸”é€šè¿‡æ³¨è§£@VisibleForTestingåšäº†æ ‡æ˜ã€‚</p><p><strong>åœ¨ä»£ç çµæ´»æ€§æ–¹é¢ï¼Œ</strong>ä¸ºäº†æ–¹ä¾¿å¤ç”¨ä¸šåŠ¡ç³»ç»Ÿå·²ç»å»ºç«‹å¥½çš„jedisClusterï¼Œæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªæ–°çš„æ„é€ å‡½æ•°ï¼Œæ”¯æŒä¸šåŠ¡ç³»ç»Ÿç›´æ¥ä¼ é€’jedisClusteræ¥åˆ›å»ºIdempotenceå¯¹è±¡ã€‚</p><h2>é‡ç‚¹å›é¡¾</h2><p>å¥½äº†ï¼Œä»Šå¤©çš„å†…å®¹åˆ°æ­¤å°±è®²å®Œäº†ã€‚æˆ‘ä»¬ä¸€å—æ¥æ€»ç»“å›é¡¾ä¸€ä¸‹ï¼Œä½ éœ€è¦é‡ç‚¹æŒæ¡çš„å†…å®¹ã€‚</p><p>æˆ‘ä»¬å‰é¢èŠ±äº†ä¸¤èŠ‚è¯¾çš„æ—¶é—´ï¼Œç”¨å¾ˆå¤§çš„ç¯‡å¹…åœ¨è®²éœ€æ±‚å’Œè®¾è®¡ï¼Œç‰¹åˆ«æ˜¯è®¾è®¡çš„ç¼˜ç”±ã€‚è€ŒçœŸæ­£åˆ°äº†å®ç°ç¯èŠ‚ï¼Œæˆ‘ä»¬åªç”¨äº†ä¸åˆ°30è¡Œä»£ç ï¼Œå°±å®ç°äº†å¹‚ç­‰æ¡†æ¶ã€‚è¿™å°±å¾ˆå¥½ä½“ç°äº†â€œæ€ä»æ·±è€Œè¡Œä»ç®€â€çš„é“ç†ã€‚å¯¹äºä¸åˆ°30è¡Œä»£ç ï¼Œå¾ˆå¤šäººè§‰å¾—ä¸å¤§å¯èƒ½æœ‰å•¥ä¼˜åŒ–ç©ºé—´äº†ï¼Œä½†æˆ‘ä»¬ä»Šå¤©è¿˜æ˜¯æå‡ºäº†7ä¸ªä¼˜åŒ–å»ºè®®ï¼Œå¹¶ä¸”å¯¹ä»£ç ç»“æ„åšäº†æ¯”è¾ƒå¤§çš„è°ƒæ•´ã€‚è¿™è¯´æ˜ï¼Œåªè¦ä»”ç»†æ¨æ•²ï¼Œå†å°çš„ä»£ç éƒ½æœ‰å€¼å¾—ä¼˜åŒ–çš„åœ°æ–¹ã€‚</p><p>ä¸è¿‡ï¼Œä¹‹å‰æœ‰äººå»ºè®®æˆ‘ä¸¾ä¸€äº›å¤§å‹é¡¹ç›®ä¸­çš„ä¾‹å­ï¼Œæœ€å¥½æ˜¯ä¸Šä¸‡è¡Œä»£ç çš„é‚£ç§ï¼Œä¸è¦ä¸¾è¿™ç§å‡ åè¡Œçš„å°ä¾‹å­ã€‚å¤§é¡¹ç›®å’Œå°é¡¹ç›®åœ¨ç¼–ç è¿™ä¸ªå±‚é¢ï¼Œå®é™…ä¸Šæ²¡æœ‰å¤ªå¤§åŒºåˆ«ã€‚å†å®å¤§çš„å·¥ç¨‹ã€å†åºå¤§çš„é¡¹ç›®ï¼Œä¹Ÿæ˜¯ä¸€è¡Œä¸€è¡Œå†™å‡ºæ¥çš„ã€‚é‚£äº›ä¸Šæ¥å°±è¦çœ‹ä¸Šä¸‡è¡Œä»£ç ï¼Œåˆ†æåºå¤§é¡¹ç›®çš„ï¼Œå¤§éƒ¨åˆ†éƒ½è¿˜æ²¡æœ‰ç†è§£ç¼–ç çš„ç²¾é«“ã€‚ç¼–ç æœ¬èº«å°±æ˜¯ä¸€ä¸ªå¾ˆç»†èŠ‚çš„äº‹æƒ…ï¼Œç‰›ä¸ç‰›ä¹Ÿéƒ½éšè—åœ¨ä¸€è¡Œä¸€è¡Œçš„ä»£ç ä¸­ã€‚ç©ºè°ˆæ¶æ„ã€è®¾è®¡ã€å¤§é“ç†ï¼Œå®é™…ä¸Šæ²¡æœ‰å¤ªå¤šæ„ä¹‰ï¼Œå¯¹ä½ å¸®åŠ©ä¸å¤§ã€‚èƒ½æ²‰ä¸‹å¿ƒæ¥æŠŠç»†èŠ‚éƒ½åšå¥½é‚£æ‰æ˜¯çœŸçš„ç‰›ï¼</p><h2>è¯¾å ‚è®¨è®º</h2><ol>\n<li>é’ˆå¯¹MVPä»£ç ï¼Œæˆ‘æœ‰ä¸¤ä¸ªé—®é¢˜ç•™ç»™ä½ æ€è€ƒã€‚å…¶ä¸­ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œdelete()æ˜¯åº”è¯¥è¿”å›voidå€¼è¿˜æ˜¯booleanå€¼ï¼Ÿå¦‚æœåˆ é™¤å‡ºé”™ï¼Œåº”è¯¥å¦‚ä½•å¤„ç†ï¼Ÿå¦ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œéœ€ä¸éœ€è¦ç»™å¹‚ç­‰å·ç”Ÿæˆç®—æ³•æŠ½è±¡å‡ºä¸€ä¸ªæ¥å£å‘¢ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ</li>\n<li>åœ¨åç»­çš„ç‰ˆæœ¬è§„åˆ’ä¸­ï¼Œä½ è§‰å¾—å¹‚ç­‰æ¡†æ¶è¿˜å¯ä»¥ç»§ç»­æ‰©å±•å“ªäº›åŠŸèƒ½ï¼Ÿæˆ–è€…åšå“ªäº›ä¼˜åŒ–ï¼Ÿå¦‚æœè®©ä½ è§„åˆ’ç¬¬äºŒä¸ªç‰ˆæœ¬ï¼Œä½ ä¼šåšå“ªäº›ä¸œè¥¿ï¼Ÿ</li>\n</ol><p>æ¬¢è¿ç•™è¨€å’Œæˆ‘åˆ†äº«ä½ çš„æƒ³æ³•ã€‚å¦‚æœæœ‰æ”¶è·ï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«ç»™ä½ çš„æœ‹å‹ã€‚</p>","comments":[{"had_liked":false,"id":225413,"user_name":"å°æ™å­","can_delete":false,"product_type":"c1","uid":1132337,"ip_address":"","ucode":"3AAA6FB5ACB6AE","user_header":"https://static001.geekbang.org/account/avatar/00/11/47/31/f35367c8.jpg","comment_is_top":false,"comment_ctime":1591752478,"is_pvip":false,"discussion_count":6,"race_medal":1,"score":"139030705950","product_id":100039001,"comment_content":"deleteæ˜¯å¦è¿”å›booleanå’Œå¦‚æœå‡ºé”™è¯¥å¦‚ä½•å¤„ç†è¿™ä¸ªé—®é¢˜ï¼Œè¦çœ‹ä¸šåŠ¡æ–¹æ˜¯å¤„ç†ä¸šåŠ¡å’Œå¹‚ç­‰å·çš„é¡ºåºï¼Œå¦‚æœå…ˆå­˜å‚¨å¹‚ç­‰å·ï¼Œåœ¨åšä¸šåŠ¡ï¼Œé‚£ä¹ˆä¸šåŠ¡æ²¡å¤„ç†æˆåŠŸæ—¶ï¼Œåç»­å¤„ç†å°±è¦åˆ é™¤å¹‚ç­‰å·ï¼Œç„¶åé‡å¤ä¸šåŠ¡å¤„ç†ï¼Œè¿™å°±è¦ä¿è¯åˆ é™¤å¹‚ç­‰å·ä¸€å®šè¦æˆåŠŸï¼Œè¿™æ ·å°±è¦è¿”å›booleanå€¼ï¼›ç›¸åï¼Œå¦‚æœä¸šåŠ¡å¤„ç†æˆåŠŸååœ¨ä¿å­˜å¹‚ç­‰å·ï¼Œé‚£ä¹ˆåˆ é™¤å¹‚ç­‰å·æˆåŠŸä¸å¦éƒ½æ— å…³ï¼Œåˆ é™¤å¹‚ç­‰å·å¯ä»¥ä¸åå›å€¼ã€‚<br>å¹‚ç­‰å·ç”Ÿæˆç®—æ³•æ²¡å¿…è¦å†å¼€ä¸ªæ¥å£ï¼Œå› ä¸ºå¹‚ç­‰å·ç”Ÿæˆç®—æ³•éœ€è¦ç¨³å®šæ€§å…¨å±€æ€§ï¼Œå¦åˆ™ä¸åŒä¸šåŠ¡ç”¨ä¸åŒç®—æ³•ç”Ÿæˆå¹‚ç­‰å·ï¼Œé‚£ä¹ˆå¹‚ç­‰æ¡†æ¶å°±å¯èƒ½æ— æ³•åŒºåˆ†ä¸åŒçš„ä¸šåŠ¡è¯·æ±‚äº†ã€‚<br>åç»­ç‰ˆæœ¬å¯ä»¥è®©å¹‚ç­‰æ¡†æ¶æ›´æ˜“ç”¨ï¼Œä¸éœ€è¦è¿‡å¤šé…ç½®ï¼Œæ¯”å¦‚æä¾›ä¸€ä¸ªæ³¨è§£ï¼Œä½¿ç”¨æ–¹ç›´æ¥åœ¨éœ€è¦å¹‚ç­‰çš„æ¥å£ä¸Šæ·»åŠ ä¸Šè¿™ä¸ªæ³¨è§£ï¼Œé‚£ä¹ˆè¿™ä¸ªè¯·æ±‚å°±ä¸€å®šä¼šä¿è¯å¹‚ç­‰ã€‚","like_count":33,"discussions":[{"author":{"id":1359701,"avatar":"https://static001.geekbang.org/account/avatar/00/14/bf/55/198c6104.jpg","nickname":"å°ä¼Ÿ","note":"","ucode":"124953423491E2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":144524,"discussion_content":"æŠŠè‡ªå·±å†™çš„ä»£ç æ‹¿å‡ºæ¥çœ‹çœ‹å‘½åï¼Œä¸è§„èŒƒçš„æ”¹ä¸€éï¼Œç¬¬äºŒå¤©å†çœ‹çœ‹ï¼Œå†æ”¹ä¸€éï¼Œç¬¬ä¸‰å¤©.....å°±å¤Ÿçœ‹äº†","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1579529314,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1396147,"avatar":"https://static001.geekbang.org/account/avatar/00/15/4d/b3/85828cc4.jpg","nickname":"f","note":"","ucode":"686BD6C21FE02B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":141250,"discussion_content":"çœ‹å®Œæœ‰ä»€ä¹ˆç”¨ è¦ä¼šç”¨å•Š åå¤é˜…è¯»ç›´åˆ°èä¼šè´¯é€š","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1579405356,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":225487,"user_name":"Jxin","can_delete":false,"product_type":"c1","uid":1251111,"ip_address":"","ucode":"4C03928388C413","user_header":"https://static001.geekbang.org/account/avatar/00/13/17/27/ec30d30a.jpg","comment_is_top":false,"comment_ctime":1591765319,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"61721307463","product_id":100039001,"comment_content":"1.é’ˆå¯¹mvpä»£ç ï¼Œdeleteä¸è¯¥è¿”å›booleanï¼Œvoidå³å¯ã€‚å› ä¸ºè¯¥æ–¹æ³•åªæœ‰åœ¨æŠ€æœ¯å¼‚å¸¸ï¼ˆç½‘ç»œè¶…æ—¶ï¼ŒredisèŠ‚ç‚¹æ— æ³•æä¾›æœåŠ¡ï¼‰æ—¶æ‰ä¼šæœ‰å¤±è´¥çš„åœºæ™¯ã€‚è€Œæˆ‘çš„ä¹ æƒ¯ï¼Œæ˜¯æŠŠæŠ€æœ¯å¼‚å¸¸æ”¾åœ¨æœ€å¤–å±‚å¤„ç†ï¼Œæˆ–åˆ™ä»£ç†å±‚å¤„ç†ï¼ˆæŠ€æœ¯å¼‚å¸¸çš„å¤„ç†åº”è¯¥å°½é‡ä¸ä¸šåŠ¡ä»£ç åˆ†ç¦»ï¼‰ã€‚å¦‚æœdeleteé‡Œé¢ä¹Ÿæœ‰ä¸šåŠ¡é€»è¾‘ï¼Œæ¯”å¦‚å…¥å‚æ£€éªŒï¼Œé‚£ä¹ˆæˆ‘ä¼šè¿”å›booleanã€‚å› ä¸ºè¿™æ—¶å€™çš„å¼‚å¸¸æ˜¯ä¸šåŠ¡ä»£ç è¯¥å¤„ç†çš„åœºæ™¯ï¼ŒåŒæ—¶æˆ‘è®¤ä¸ºè°ƒç”¨æ–¹æ— éœ€çŸ¥é“deleteå› ä½•å¤±è´¥ï¼Œåªéœ€è¦çŸ¥é“deleteå¤±è´¥ï¼Œæ‰€ä»¥æ”¶æ•›deleteå†…éƒ¨ä¸šåŠ¡å¼‚å¸¸ï¼Œå¯¹å¤–åªä»¥booleanè¿”å›å€¼åšäº¤äº’ã€‚<br><br>2.å› ä¸ºå”¯ä¸€idçš„éœ€æ±‚æ–¹å¹¶ä¸åªæœ‰å¹‚ç­‰æ¡†æ¶ï¼ŒæŠ½ç¦»å‡ºæ¥åœ¨å…¶ä»–åœºæ™¯ä¹Ÿèƒ½ç”¨ï¼Œæ¯”å¦‚æµæ°´idã€‚æˆ‘è®¤ä¸ºå¹‚ç­‰æœåŠ¡æ–¹æä¾›å¹‚ç­‰idç”Ÿæˆæ¥å£ç»™è°ƒç”¨æ–¹çš„æ–¹å¼å¹¶ä¸åˆé€‚ã€‚è¿™æ ·åšæ˜¯ä¸€ç§èµ„æºçš„æµªè´¹ã€‚åœ¨è¿™ä¸ªåœºæ™¯ï¼Œæˆ‘åªæ˜¯ä¸ºäº†ä¿è¯å¹‚ç­‰idç”Ÿæˆä»£ç çš„å»é‡ï¼Œå¹¶æ²¡æœ‰åŠ¨æ€ä¸Šæ‰©ç¼©èŠ‚ç‚¹è°ƒæ•´è´Ÿè½½çš„è¯‰æ±‚ã€‚æ‰€ä»¥å¹‚ç­‰idç”Ÿæˆä»£ç ä»¥å…¬å…±åŒ…çš„æ–¹å¼è¢«è°ƒç”¨æ–¹é¡¹ç›®ä¾èµ–ï¼Œä»…åšä»£ç çº§çš„å¤ç”¨ä¼šå¥½äº›ã€‚<br><br><br>3.æŠ½æˆå…¬å…±åŒ…ï¼ˆå»é‡ï¼‰ï¼Œæä¾›å£°æ˜å¼æ¥å£ï¼ˆæ˜“ç”¨ï¼‰ï¼Œæä¾›é…ç½®æ¥å£ï¼ˆçµæ´»ï¼‰ã€‚","like_count":15},{"had_liked":false,"id":225361,"user_name":"é«˜æº","can_delete":false,"product_type":"c1","uid":1048887,"ip_address":"","ucode":"751B41FD38EF7D","user_header":"https://static001.geekbang.org/account/avatar/00/10/01/37/12e4c9c9.jpg","comment_is_top":false,"comment_ctime":1591741348,"is_pvip":false,"replies":[{"id":"84000","content":"å¯ä»¥çš„ï¼Œæˆ‘ç°åœ¨æœ‰ç©ºäº†ï¼Œæˆ‘æœ€è¿‘å°±èƒ½è¡¥ä¸Šï¼Œå…³æ³¨æˆ‘çš„githubå§ï¼š<br>https:&#47;&#47;github.com&#47;wangzheng0822","user_name":"ä½œè€…å›å¤","comment_id":225361,"uid":"1190123","ip_address":"","utype":1,"ctime":1592526678,"user_name_real":"ç‹äº‰"}],"discussion_count":3,"race_medal":0,"score":"44541414308","product_id":100039001,"comment_content":"è€å¸ˆè®²çš„çœŸçš„å¥½åæœŸè€å¸ˆæŠŠæ‰€è®²è¯¾ç¨‹é…å¥—ä»£ç æä¾›ä¸Šï¼Œæˆ‘å¯¹ç€å†ä»”ç»†é˜…è¯»ä¸€æ¬¡ç»“åˆå®é™…åº”ç”¨åˆ°å®é™…å¼€å‘ä¸­ï¼Œè°¢è°¢","like_count":10,"discussions":[{"author":{"id":1190123,"avatar":"https://static001.geekbang.org/account/avatar/00/12/28/eb/af064421.jpg","nickname":"ç‹äº‰","note":"","ucode":"2B611BE0E0EDD4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":510515,"discussion_content":"å—¯å—¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606700624,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":225551,"user_name":"Jason","can_delete":false,"product_type":"c1","uid":1053390,"ip_address":"","ucode":"ABB3F1A63E102A","user_header":"https://static001.geekbang.org/account/avatar/00/10/12/ce/a8c8b5e8.jpg","comment_is_top":false,"comment_ctime":1591783391,"is_pvip":false,"replies":[{"id":"84978","content":"å—¯å—¯ å¤šè°¢æŒ‡å‡º~","user_name":"ä½œè€…å›å¤","comment_id":225551,"uid":"1190123","ip_address":"","utype":1,"ctime":1593311045,"user_name_real":"ç‹äº‰"}],"discussion_count":1,"race_medal":0,"score":"35951521759","product_id":100039001,"comment_content":"RedisClusterIdempotenceStorageæ˜¯ä¸æ˜¯å°‘implements IdempotenceStorageï¼Ÿ","like_count":8,"discussions":[{"author":{"id":1190123,"avatar":"https://static001.geekbang.org/account/avatar/00/12/28/eb/af064421.jpg","nickname":"ç‹äº‰","note":"","ucode":"2B611BE0E0EDD4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":510459,"discussion_content":"å—¯å—¯ ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606700658,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":235003,"user_name":"88591","can_delete":false,"product_type":"c1","uid":1254656,"ip_address":"","ucode":"04CE3E46455185","user_header":"https://static001.geekbang.org/account/avatar/00/13/25/00/3afbab43.jpg","comment_is_top":false,"comment_ctime":1594867428,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"23069703908","product_id":100039001,"comment_content":"èƒ½æ²‰ä¸‹å¿ƒæ¥æŠŠç»†èŠ‚éƒ½åšå¥½é‚£æ‰æ˜¯çœŸçš„ç‰›ï¼","like_count":6},{"had_liked":false,"id":225415,"user_name":"Jackey","can_delete":false,"product_type":"c1","uid":1063751,"ip_address":"","ucode":"125DE81993FEDD","user_header":"https://static001.geekbang.org/account/avatar/00/10/3b/47/f6c772a1.jpg","comment_is_top":false,"comment_ctime":1591752684,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18771621868","product_id":100039001,"comment_content":"deleteè¿˜æ˜¯è¿”å›booleanå¥½ä¸€ç‚¹ï¼Œå¯¹åˆ é™¤å‡ºé”™çš„keyå¯ä»¥äººå·¥å¹²é¢„æˆ–è€…è®°å½•ä¸‹æ¥ç»Ÿä¸€å¤„ç†","like_count":4},{"had_liked":false,"id":229844,"user_name":"cricket1981","can_delete":false,"product_type":"c1","uid":1001715,"ip_address":"","ucode":"758262F5958DA4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/48/f3/f1034ffd.jpg","comment_is_top":false,"comment_ctime":1593161759,"is_pvip":false,"replies":[{"id":"84961","content":"ä¸æ˜¯é‡è¯•ä¹‹å‰åˆ é™¤ï¼Œè€Œæ˜¯åœ¨å‡ºé”™ä¹‹ååˆ é™¤ã€‚é‡è¯•çš„æ—¶å€™å¹¶ä¸çŸ¥é“åŸæ¥æ˜¯æ‰§è¡Œæ­£ç¡®è¿˜æ˜¯é”™è¯¯ã€","user_name":"ä½œè€…å›å¤","comment_id":229844,"uid":"1190123","ip_address":"","utype":1,"ctime":1593309244,"user_name_real":"ç‹äº‰"}],"discussion_count":1,"race_medal":0,"score":"14478063647","product_id":100039001,"comment_content":"æœ‰ä¸€ç‚¹ä¸æ˜ç™½ï¼Œæ¡†æ¶ä¸ºä»€ä¹ˆè¦å¯¹å¤–æä¾›deleteæ¥å£å‘¢ï¼Ÿè°ƒç”¨æ–¹ä¹±ç”¨æ€ä¹ˆåŠï¼Ÿå¦‚æœæ˜¯ä¸ºäº†å¤„ç†ç³»ç»Ÿå¼‚å¸¸ï¼Œæˆ‘è§‰å¾—å¯ä»¥è®©è°ƒç”¨æ–¹é‡æ–°ç”Ÿæˆæ–°çš„å¹‚ç­‰å·å†å‘èµ·è¯·æ±‚ï¼Œè€Œä¸æ˜¯ä¾èµ–è°ƒç”¨æ–¹åœ¨é‡è¯•ä¹‹å‰æ­£ç¡®åœ°è°ƒç”¨deleteæ¥å£ã€‚","like_count":3,"discussions":[{"author":{"id":1190123,"avatar":"https://static001.geekbang.org/account/avatar/00/12/28/eb/af064421.jpg","nickname":"ç‹äº‰","note":"","ucode":"2B611BE0E0EDD4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":499665,"discussion_content":"ä¸æ˜¯é‡è¯•ä¹‹å‰åˆ é™¤ï¼Œè€Œæ˜¯åœ¨å‡ºé”™ä¹‹ååˆ é™¤ã€‚é‡è¯•çš„æ—¶å€™å¹¶ä¸çŸ¥é“åŸæ¥æ˜¯æ‰§è¡Œæ­£ç¡®è¿˜æ˜¯é”™è¯¯ã€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593309244,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":226582,"user_name":"Jemmy","can_delete":false,"product_type":"c1","uid":1007330,"ip_address":"","ucode":"A979F4A5210225","user_header":"https://static001.geekbang.org/account/avatar/00/0f/5e/e2/1fad3052.jpg","comment_is_top":false,"comment_ctime":1592145286,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"14477047174","product_id":100039001,"comment_content":"ä¼˜åŒ–ï¼šIdempotenceIdGenerator å¯ä»¥é¢å‘æ¥å£ç¼–ç¨‹ï¼Œæœªæ¥ uuid ç”Ÿæˆæ–¹å¼å¯èƒ½ä¼šå˜ã€‚","like_count":3},{"had_liked":false,"id":225457,"user_name":"Heaven","can_delete":false,"product_type":"c1","uid":1694207,"ip_address":"","ucode":"FA33FBCC66C911","user_header":"https://static001.geekbang.org/account/avatar/00/19/d9/ff/b23018a6.jpg","comment_is_top":false,"comment_ctime":1591759396,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14476661284","product_id":100039001,"comment_content":"1.åœ¨æ¡†æ¶é‡Œ,ä½¿ç”¨åˆ é™¤æ“ä½œçš„æ—¶å€™,åº”è¯¥æ˜¯äººå·¥ä»‹å…¥æ—¶å€™ä½¿ç”¨çš„å§,è¿™æ—¶å€™è¿”å›ä¸€ä¸ªbooleanæ–¹ä¾¿ç›˜æŸ¥,å¯¹äºå¹‚ç­‰å·ç”Ÿæˆç®—æ³•æ¥è¯´,æˆ‘ä»¬æ˜¯æŠ½å–å‡ºæ¥ä½œä¸ºä¸€ä¸ªç±»åº“å»æ”¾åœ¨å®¢æˆ·ç«¯è°ƒç”¨çš„,é‚£ä¹ˆå®¢æˆ·ç«¯ä¼ é€’ç»™æˆ‘ä»¬çš„æ ¼å¼æœ€å¥½ä¸€è‡´,æ‰€ä»¥ä¸åº”è¯¥æŠ½è±¡å‡ºä¸€ä¸ªæ¥å£,åªèƒ½æœ‰ä¸€ä¸ªå®ç°çš„è¯,æ¥å£æ²¡æœ‰ç”šæ„ä¹‰<br>2.åœ¨æ–°ç‰ˆæœ¬,æ”¯æŒé…ç½®æ–‡ä»¶ä¸­,é…ç½®ä¸åŒçš„åç§°æ¥é€‰æ‹©ä¸åŒçš„å¹‚ç­‰è¯»å†™æ–¹æ³•,å¹¶ä¸”,åˆ©ç”¨æ³¨è§£æ¥è¿›è¡ŒAOPçš„åˆ‡é¢ç¼–ç¨‹,è®©ä½¿ç”¨äººå‘˜ä½¿ç”¨æ³¨è§£å°±å¯ä»¥è¿›è¡Œç›¸å…³çš„å¹‚ç­‰æ€§ä¿è¯","like_count":3},{"had_liked":false,"id":225431,"user_name":"test","can_delete":false,"product_type":"c1","uid":1065849,"ip_address":"","ucode":"9A4973E591DD12","user_header":"https://static001.geekbang.org/account/avatar/00/10/43/79/18073134.jpg","comment_is_top":false,"comment_ctime":1591755739,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14476657627","product_id":100039001,"comment_content":"deleteè¿”å›booleanï¼Œè¿™æ ·è°ƒç”¨æ–¹ä¼šçŸ¥é“æ˜¯å¦åˆ é™¤æˆåŠŸï¼Œè°ƒç”¨æ–¹å¯ä»¥è‡ªå·±é‡è¯•ã€‚å¯ä»¥å¹‚ç­‰ç®—æ³•æŠ½è±¡å‡ºä¸€ä¸ªæ¥å£ï¼Œç”¨æˆ·å¯ä»¥é€‰æ‹©è‡ªå·±æƒ³è¦ç”¨çš„å¹‚ç­‰ç®—æ³•å¥—ä»¶ã€‚","like_count":3},{"had_liked":false,"id":287122,"user_name":"walkingonair","can_delete":false,"product_type":"c1","uid":1444748,"ip_address":"","ucode":"0C8BEE064ABF8B","user_header":"https://static001.geekbang.org/account/avatar/00/16/0b/8c/db1ee0a2.jpg","comment_is_top":false,"comment_ctime":1617784391,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10207718983","product_id":100039001,"comment_content":"è¿™ç§ä¾èµ–è¯·æ±‚å‘èµ·æ–¹å®ç°çš„å¹‚ç­‰ä¸æ˜¯çœŸæ­£çš„å¹‚ç­‰ã€‚<br>ä¾‹å¦‚ï¼šå¯¹å¤–çš„apiæ¥å£ï¼Œæ²¡åŠæ³•ä½¿è°ƒç”¨æ–¹è‡ªè¡Œåˆ¤æ–­æ˜¯å¦é‡å¤è¯·æ±‚<br><br>æŠŠé‡ç‚¹æ”¾åœ¨æ¡†æ¶çš„åˆ†æã€è®¾è®¡å’Œå®ç°ä¸Š","like_count":2},{"had_liked":false,"id":231985,"user_name":"Geek_3b1096","can_delete":false,"product_type":"c1","uid":1549364,"ip_address":"","ucode":"A6BD92B79B3632","user_header":"","comment_is_top":false,"comment_ctime":1593811136,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10183745728","product_id":100039001,"comment_content":"Code Reviewçš„æ€ç»´å¾ˆæœ‰å¸®åŠ©","like_count":2},{"had_liked":false,"id":231729,"user_name":"é¢å‘ç™¾åº¦ç¼–ç¨‹","can_delete":false,"product_type":"c1","uid":1732780,"ip_address":"","ucode":"8FE04A019D71D1","user_header":"https://static001.geekbang.org/account/avatar/00/1a/70/ac/83bc14c0.jpg","comment_is_top":false,"comment_ctime":1593760956,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10183695548","product_id":100039001,"comment_content":"æˆ‘è§‰å¾—deleteå¯ä»¥æ ¹æ®ä¸šåŠ¡çš„éœ€è¦æ¥åˆ¤æ–­æ˜¯å¦éœ€è¦ï¼Œå¦‚æœæ˜¯å•çº¯çš„åˆ é™¤é‚£å°±ä¸éœ€è¦ï¼Œå¦‚æœè¿˜éœ€è¦åœ¨åˆ é™¤åè¿›è¡Œä¸€äº›å…¶å®ƒæ“ä½œåˆ™å¯ä»¥è¿”å›ç»“æœï¼Œå¹‚ç­‰å·ç®—æ³•å¯ä»¥é€‰æ‹©ç­–ç•¥æ¨¡å¼è¿›è¡Œåˆ‡æ¢ï¼Œä¸ºåç»­å¦‚æœä¸šåŠ¡æ”¹å˜éœ€è¦ä¸åŒçš„ç”Ÿæˆç®—æ³•çš„è¯ï¼Œå¯ä»¥éšæ—¶æ›¿æ¢","like_count":2},{"had_liked":false,"id":225392,"user_name":"tingye","can_delete":false,"product_type":"c1","uid":1391463,"ip_address":"","ucode":"54F7A44066DF5D","user_header":"https://static001.geekbang.org/account/avatar/00/15/3b/67/c188d3bc.jpg","comment_is_top":false,"comment_ctime":1591750261,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10181684853","product_id":100039001,"comment_content":"deleteæ¥å£è¿˜æ˜¯è¿”å›booleanå¥½ï¼Œè®©è°ƒç”¨æ–¹èƒ½æ„ŸçŸ¥åˆ°å¼‚å¸¸ï¼Œè™½ç„¶è°ƒç”¨æ–¹ä¹Ÿä¸å¥½å¤„ç†ï¼Œä½†èƒ½åšäº›ä¸šåŠ¡è¡¥å¿æˆ–äººå·¥è¡¥æ•‘ã€‚ç”Ÿæˆç®—æ³•ä¹Ÿåº”è¯¥æŠ½è±¡æˆæ¥å£ï¼Œä¾¿äºæ‰©å±•ç”Ÿæˆç®—æ³•ï¼Œç”šè‡³å¼€æ”¾ç»™ä¸šåŠ¡ç«¯å®šåˆ¶ã€‚å¦å¤–å¹‚ç­‰å·ä¸€ç›´å­˜å‚¨åœ¨redisæ•°æ®é‡ä¼šè¶Šæ¥è¶Šå¤§ï¼Œå¯èƒ½è¦è€ƒè™‘è®¾ç½®è¿‡æœŸç­–ç•¥å’Œå®šæœŸæŒä¹…åŒ–æ•°æ®","like_count":2},{"had_liked":false,"id":225387,"user_name":"æˆæ¥ Peter","can_delete":false,"product_type":"c1","uid":1252977,"ip_address":"","ucode":"4D13E7368D8CF2","user_header":"https://static001.geekbang.org/account/avatar/00/13/1e/71/9dcbe6c4.jpg","comment_is_top":false,"comment_ctime":1591750056,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10181684648","product_id":100039001,"comment_content":"æ€è€ƒé¢˜ã€‚<br><br>é—®é¢˜1ï¼Œå¯ä»¥è¿”å›booleanï¼Œåˆ é™¤å‡ºé”™ï¼Œè¿”å›falseï¼Œä¸ç”¨æŠ›å¼‚å¸¸ã€‚åˆ é™¤å¤±è´¥æœ€å¤šå¯¼è‡´redisé‡Œå­˜å‚¨äº†å¤±æ•ˆçš„å¹‚ç­‰å·ã€‚å¹‚ç­‰å·å¯ä»¥æŠ½å‡ºä¸€ä¸ªæ¥å£ï¼ŒåæœŸå¹‚ç­‰ç®—æ³•å¯èƒ½ä¿®æ”¹ï¼Œå„è‡ªçš„ç®—æ³•å®ç°å„è‡ªçš„generateIdã€‚<br><br>é—®é¢˜2ï¼Œå¯ä»¥æ–°å¢ä¸åŒçš„å¹‚ç­‰ç®—æ³•å®ç°ï¼Œå¹‚ç­‰ç®—æ³•è°ƒç”¨æˆåŠŸç‡ä¸å¤±è´¥ç‡ç›‘æ§ï¼Œå…è®¸ä¸šåŠ¡æ–¹æ‰©å±•å¹‚ç­‰ç®—æ³•ç­‰ã€‚ä¸»è¦è¿˜æ˜¯çœ‹ä¸šåŠ¡éœ€æ±‚ï¼Œä»£ç éƒ½æ˜¯æœåŠ¡äºä¸šåŠ¡ï¼Œè¿‡æ—©çš„æ‰©å±•ä¹Ÿæ˜¯ä¸‡æ¶ä¹‹æºã€‚","like_count":2},{"had_liked":false,"id":239861,"user_name":"lengrongfu","can_delete":false,"product_type":"c1","uid":1494681,"ip_address":"","ucode":"FD6F35CA561E0B","user_header":"https://static001.geekbang.org/account/avatar/00/16/ce/99/447c33d4.jpg","comment_is_top":false,"comment_ctime":1596678878,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5891646174","product_id":100039001,"comment_content":"ä½œä¸ºæ¡†æ¶åŠŸèƒ½ï¼Œåº”è¯¥è¦æŠŠå¼‚å¸¸ä¸ŠæŠ›ç»™è°ƒç”¨æ–¹ï¼Œè®©è°ƒç”¨æ–¹è‡ªå·±å†³å®šå¦‚ä½•å¤„ç†ï¼›ç°åœ¨é€šç”¨çš„åŠŸèƒ½æ¡†æ¶å‡ ä¹éƒ½æ˜¯è¿™ä¹ˆåšçš„ã€‚","like_count":1},{"had_liked":false,"id":226686,"user_name":"å›å“¥èŠæŠ€æœ¯","can_delete":false,"product_type":"c1","uid":1325816,"ip_address":"","ucode":"2C9A22BCE4C79E","user_header":"https://static001.geekbang.org/account/avatar/00/14/3a/f8/c1a939e7.jpg","comment_is_top":false,"comment_ctime":1592185326,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5887152622","product_id":100039001,"comment_content":"1.æ˜¯å¦è¿”å›booleanï¼Œè¿˜æ˜¯çœ‹ä¸šåŠ¡åœºæ™¯çš„ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæ˜¯ä¸ç”¨è¿”å›çš„ï¼Œä¸€ä¸ªä¸šåŠ¡æ‰§è¡ŒæˆåŠŸäº†ï¼Œè¿”å›ç»™è°ƒç”¨æ–¹æˆåŠŸï¼Œè°ƒç”¨æ–¹å°±ä¸å¯èƒ½å†æ¬¡è°ƒç”¨äº†ï¼Œè€Œä¸”è¿‡æœŸäº†ï¼Œä¹Ÿä¼šè‡ªåŠ¨åˆ é™¤ã€‚å¦‚æœä¸šåŠ¡ä¸Šæœ‰åˆ«çš„è€ƒè™‘ï¼Œæ¯”å¦‚ä¸€ä¸ªidå¯èƒ½é‡å¤ç”¨ï¼Œé‚£å°±å¿…é¡»åˆ é™¤ï¼Œå¦‚æœåˆ é™¤å¤±è´¥ï¼Œå¯ä»¥è®°å½•ä¸‹æ¥ï¼Œåšè¡¥å¿ã€‚<br>æˆ‘è§‰å¾—è¿˜æ˜¯è¦ä¸ªå¹‚ç­‰å·ç®—æ³•æŠ½è±¡ä¸€ä¸ªæ¥å£çš„ï¼Œä¸ä¸€å®šæ¯ä¸ªå¹‚ç­‰å·éƒ½æ˜¯å®Œå…¨ä¸€æ ·çš„ç”Ÿæˆé€»è¾‘ã€‚æ¯”å¦‚åœ¨é‡‘èå€Ÿæ¬¾çš„åœºæ™¯ï¼Œå¹‚ç­‰å·éœ€è¦åŠ å…¥ä¸€äº›ä¸šåŠ¡å±æ€§ï¼Œæ¯”å¦‚èº«ä»½è¯å·ã€é“¶è¡Œå¡ã€æ‰‹æœºå·ç­‰ï¼Œæœ‰äº›çš„ä¸šåŠ¡åœºæ™¯ï¼Œå¹‚ç­‰å·åˆæœ‰åˆ«çš„å«ä¹‰ã€‚<br>2.ç”Ÿæˆå¹‚ç­‰å·çš„æ¥å£è¦å®Œå–„ï¼Œå…è®¸ç”¨æˆ·ä¼ å…¥å‚æ•°æ¥è·å–å¹‚ç­‰å¥½ï¼›å¢åŠ ä¸€äº›è¡¥å¿æœºåˆ¶ï¼Œæ¯”å¦‚åˆ é™¤å¤±è´¥çš„è¡¥å¿ï¼›é«˜å¯ç”¨éƒ¨ç½²","like_count":1},{"had_liked":false,"id":341992,"user_name":"å¤å¤©","can_delete":false,"product_type":"c1","uid":1285986,"ip_address":"","ucode":"F29D56F9265751","user_header":"https://static001.geekbang.org/account/avatar/00/13/9f/62/960eecc3.jpg","comment_is_top":false,"comment_ctime":1649943437,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1649943437","product_id":100039001,"comment_content":"æ¡†æ¶å’Œä¸šåŠ¡ç³»ç»Ÿæ¥å…¥çš„åŠŸèƒ½å‘¢ï¼Ÿ<br>","like_count":0},{"had_liked":false,"id":328295,"user_name":"å…ƒå“¥","can_delete":false,"product_type":"c1","uid":2007818,"ip_address":"","ucode":"1F457416738746","user_header":"https://static001.geekbang.org/account/avatar/00/1e/a3/0a/c0f6d731.jpg","comment_is_top":false,"comment_ctime":1640656545,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1640656545","product_id":100039001,"comment_content":"@VisibleForTesting è¿™ä¸ªæ ‡æ³¨ä¼šè¢«sonaræ£€æŸ¥å‡ºCode smell","like_count":0},{"had_liked":false,"id":326004,"user_name":"æˆ‘æ˜¯æ›¾ç»é‚£ä¸ªå°‘å¹´","can_delete":false,"product_type":"c1","uid":1015189,"ip_address":"","ucode":"9F02F7FF147D14","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7d/95/dd73022c.jpg","comment_is_top":false,"comment_ctime":1639302990,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1639302990","product_id":100039001,"comment_content":"é—®é¢˜1ï¼šdelete()æ–¹æ³•è¿”å›å€¼çš„é—®é¢˜ï¼Œä¸ªäººæ„Ÿè§‰æ²¡å¿…è¦ï¼Œåªè¦æ²¡æœ‰å¼‚å¸¸è°ƒç”¨æ”¾å°±ä¼šæ­£ç¡®å¤„ç†ã€‚å¹‚ç­‰å·ç”Ÿæˆç®—æ³•æŠ½è±¡å‡ºä¸€ä¸ªæ¥å£ï¼Œä¸ªäººæ„Ÿè§‰æŠ½è±¡æ¥å£è¦è€ƒè™‘æœ‰æ²¡æœ‰æ‰©å±•çš„å¿…è¦æ€§ï¼Œè¿™ä¸ªåªéœ€è¦ä¿è¯å…¨å±€å”¯ä¸€å°±å¥½äº†ï¼Œæ²¡æœ‰ä¸€äº›ä¸šåŠ¡éœ€æ±‚å¯¼è‡´å®ƒçš„å˜åŒ–ã€‚<br>é—®é¢˜2ï¼šè¿­ä»£å’Œä¼˜åŒ–<br>ä¸ªäººæ„Ÿè§‰è°ƒç”¨æ–¹çš„é‡è¯•éœ€è¦æ¡†æ¶æ”¯æŒï¼Œè®©è°ƒç”¨æ–¹å»åˆ¤æ–­æ˜¯å¦é‡è¯•ï¼Œæ˜¯ä¸ªä¼ªéœ€æ±‚ï¼Œå› ä¸ºæˆ‘éƒ½è€ƒè™‘å¹‚ç­‰äº†ï¼Œæˆ‘è‚¯å®šå¸Œæœ›è¢«æ‰§è¡Œæ”¾èƒ½æ­£å¸¸æ‰§è¡Œã€‚è®©è°ƒç”¨æ–¹æ‰§è¡Œå°±å˜æˆäº†æ¯ä¸ªè°ƒç”¨è€…è¦å†™è½®è¯¢å¤„ç†çš„ä»£ç ã€‚è°ƒç”¨å‘çš„é‡è¯•æœºåˆ¶ä¹Ÿä¸å¥½å¤„ç†å‘€ã€‚","like_count":0},{"had_liked":false,"id":313377,"user_name":"ç€šæµ·","can_delete":false,"product_type":"c1","uid":2062203,"ip_address":"","ucode":"E64C22F3F6D285","user_header":"https://static001.geekbang.org/account/avatar/00/1f/77/7b/338c4617.jpg","comment_is_top":false,"comment_ctime":1632401901,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1632401901","product_id":100039001,"comment_content":"è€å¸ˆè®²çš„å¾ˆå¥½          åˆ†æçš„å¾ˆè¯¦ç»†ï¼Œåªæ˜¯å®ç°å†™çš„è¿‡äºç®€å•äº†ç‚¹   çœ‹åŠŸèƒ½æ ¸å¿ƒåªæœ‰ç”Ÿæˆéšæœºidå’Œsetnx         å¦‚æœçœŸæƒ³åœ¨ä¸šåŠ¡ä¸­ä½¿ç”¨ï¼Œéœ€è¦ä¸šåŠ¡æ–¹ä¾èµ–éšæœºidç”Ÿæˆç®—æ³•ï¼Œå¤§å¤šåœºæ™¯ä¸åˆé€‚","like_count":0},{"had_liked":false,"id":305788,"user_name":"Lowic","can_delete":false,"product_type":"c1","uid":2172704,"ip_address":"","ucode":"8D9E3D7C503FC0","user_header":"https://static001.geekbang.org/account/avatar/00/21/27/20/8147351d.jpg","comment_is_top":false,"comment_ctime":1628161554,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1628161554","product_id":100039001,"comment_content":"è€å¸ˆï¼Œç”¨é“¾è·¯è¿½è¸ªçš„traceIdä½œä¸ºå¹‚ç­‰å·æœ‰å¯è¡Œæ€§å˜›ï¼ŸğŸ˜","like_count":0,"discussions":[{"author":{"id":1008517,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/63/85/1dc41622.jpg","nickname":"å§‘å°„ä»™äºº","note":"","ucode":"3EFC1F3E592165","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":537679,"discussion_content":"ä½¿ç”¨æ–¹åœ¨å‘èµ·è¯·æ±‚å‰ï¼Œæ˜¯æ‹¿ä¸åˆ°traceIdï¼ŒtraceIdæ˜¯è¯·æ±‚ä¹‹åæ‰èƒ½æ‹¿åˆ°å§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639141530,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":293536,"user_name":"ç å“¥å­—èŠ‚","can_delete":false,"product_type":"c1","uid":1572356,"ip_address":"","ucode":"362103AD52C8E0","user_header":"https://static001.geekbang.org/account/avatar/00/17/fe/04/bb427e47.jpg","comment_is_top":false,"comment_ctime":1621422448,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1621422448","product_id":100039001,"comment_content":"ç©ºè°ˆæ¶æ„ã€è®¾è®¡ã€å¤§é“ç†ï¼Œå®é™…ä¸Šæ²¡æœ‰å¤ªå¤šæ„ä¹‰ï¼Œå¯¹ä½ å¸®åŠ©ä¸å¤§ã€‚èƒ½æ²‰ä¸‹å¿ƒæ¥æŠŠç»†èŠ‚éƒ½åšå¥½é‚£æ‰æ˜¯çœŸçš„ç‰›ï¼æ·±è¡¨èµåŒ","like_count":0},{"had_liked":false,"id":289911,"user_name":"Geek_89111a","can_delete":false,"product_type":"c1","uid":1367091,"ip_address":"","ucode":"CB60086FD9D3A3","user_header":"","comment_is_top":false,"comment_ctime":1619261117,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1619261117","product_id":100039001,"comment_content":"ç”¨uuidæ¥å¤„ç†å¹‚ç­‰å· ï¼Œuuidæ˜¯éšæœºå€¼ï¼Œæ¯æ¬¡è¯·æ±‚uuidéƒ½ä¸ä¸€æ ·ï¼Œå°±ç®—æ˜¯é‡è¯•ä¹Ÿæ˜¯ä¸ä¸€æ ·ï¼Œuuidæ ¹æœ¬å¤„ç†ä¸äº†è¿™ç§åœºæ™¯ï¼Œæ„Ÿè§‰åœ¨è¯¯äººå­å¼Ÿ","like_count":0,"discussions":[{"author":{"id":2062203,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/77/7b/338c4617.jpg","nickname":"ç€šæµ·","note":"","ucode":"E64C22F3F6D285","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":396181,"discussion_content":"è€å¸ˆçš„æ„æ€æ˜¯    è®©è°ƒç”¨æ–¹æ¥æºå¸¦è¿™ä¸ªuuidï¼Œé‡è¯•æ—¶ï¼Œå¸¦ç€ä¸Šæ¬¡ä¸€æ ·çš„uuidæ¥   å°±å¯ä»¥åˆ¤æ–­æ˜¯é‡è¯•è¯·æ±‚äº†                       æ€€ç–‘è¿™æ ·çš„å®ç°å¯è¡Œæ€§ï¼Œå› ä¸ºè°ƒç”¨æ–¹ä¹Ÿå¯èƒ½ä¸æ¸…æ¥šæ˜¯å¦æ˜¯é‡è¯•è¯·æ±‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632402052,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":253638,"user_name":"æ¨å°‘å›","can_delete":false,"product_type":"c1","uid":1251143,"ip_address":"","ucode":"39AA0AE742D257","user_header":"https://static001.geekbang.org/account/avatar/00/13/17/47/f9e1a563.jpg","comment_is_top":false,"comment_ctime":1602817642,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1602817642","product_id":100039001,"comment_content":"è€å¸ˆï¼Œæ‚¨å¥½ï¼Œåœ¨å¾®æœåŠ¡ä¸­ï¼Œè¿™ä¸ªå¹‚ç­‰æ¡†æ¶æ˜¯ç‹¬ç«‹ä¸ºä¸€ä¸ªå¾®æœåŠ¡ï¼Œè¿˜æ˜¯é›†æˆåœ¨Clientç«¯ï¼Œè¿˜æ˜¯Serverç«¯ï¼Œæ˜¯å¦Serverç«¯è¿˜éœ€è¦å¯¹å¹‚ç­‰æ¥å£å®šä¹‰å¹‚ç­‰æ³¨è§£è¿›è¡Œå¹‚ç­‰æ ¡éªŒï¼Œæ–‡ä¸­åå‘clientç«¯çš„æ“ã€‚å¦‚æœå¹‚ç­‰æ¡†æ¶ç‹¬ç«‹ä¸ºä¸€ä¸ªå¾®æœåŠ¡ï¼Œæä¾›ç”Ÿæˆå¹‚ç­‰å·å’Œå…¥åº“ä½œä¸ºresfulæ¥å£ï¼Œé‚£æœåŠ¡ç«¯çš„å¹‚ç­‰æ ¡éªŒæ˜¯å¦ä¹Ÿå¯ä»¥é›†æˆè¿›æ¥ï¼Œä¸ç„¶æ¯ä¸ªæœåŠ¡ç«¯éœ€è¦é‡å¤ç¼–ç æ ¡éªŒï¼Œæˆ‘ç†è§£ä½œä¸ºä¸€ä¸ªsdkæ˜¯ä¸æ˜¯æ¯”å¾®æœåŠ¡æ›´å¥½ã€‚","like_count":0},{"had_liked":false,"id":247788,"user_name":"aoe","can_delete":false,"product_type":"c1","uid":1121758,"ip_address":"","ucode":"1C6201EDB4E954","user_header":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","comment_is_top":false,"comment_ctime":1599837534,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1599837534","product_id":100039001,"comment_content":"leetcode.comé¢˜è§£ä¸­æœ‰å¾ˆå¤šå‡ åè¡Œç”šè‡³å‡ è¡Œä»£ç è§£é¢˜çš„ä¼˜ç§€çš„ä¸èƒ½åœ¨ä¼˜ç§€çš„ä»£ç ã€‚å¯¹æå‡ç¼–ç èƒ½åŠ›å¾ˆæœ‰å¸®åŠ©","like_count":0},{"had_liked":false,"id":246941,"user_name":"djfhchdh","can_delete":false,"product_type":"c1","uid":1484184,"ip_address":"","ucode":"E71D75328CE398","user_header":"https://static001.geekbang.org/account/avatar/00/16/a5/98/a65ff31a.jpg","comment_is_top":false,"comment_ctime":1599535275,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1599535275","product_id":100039001,"comment_content":"é—®é¢˜1ï¼šdeleteå‡½æ•°æœ€å¥½è¿”å›boolå€¼ï¼Œtrueä¸ºæˆåŠŸï¼Œfalseä¸ºå¤±è´¥ï¼Œè‡³äºåˆ é™¤å¤±è´¥åçš„å¤„ç†ï¼Œå¯ä»¥äº¤ç»™ä¸šåŠ¡è°ƒç”¨æ–¹å¤„ç†ï¼Œå¹‚ç­‰æ¡†æ¶åªè¦è¿”å›æ˜¯å¦åˆ é™¤æˆåŠŸå°±å¯ä»¥äº†ï¼›è€Œå¯¹äºå¹‚ç­‰å·ç”Ÿæˆç®—æ³•æ˜¯å¦éœ€è¦æŠ½è±¡å‡ºä¸€ä¸ªæ¥å£ï¼Œè¿™ä¸ªä¸»è¦çœ‹æ˜¯å¦æœ‰åç»­å¹‚ç­‰å·ç”Ÿæˆç®—æ³•æ‰©å±•çš„éœ€æ±‚ï¼Œå¦‚æœåç»­æœ‰è¿™ä¸ªéœ€æ±‚å¹¶ä¸”ä¸ºäº†æé«˜æ¡†æ¶çš„æ‰©å±•æ€§ï¼Œå¯ä»¥è€ƒè™‘æŠ½è±¡å‡ºä¸€ä¸ªç”Ÿæˆç®—æ³•æ¥å£ï¼›å¦‚æœåç»­æ²¡æœ‰è¿™ç§éœ€æ±‚ï¼Œè€Œä¸”ç”Ÿæˆç®—æ³•ä¹Ÿä¸ä¼šè¿›è¡Œé¢‘ç¹çš„ä¿®æ”¹å’Œæ‰©å……ï¼Œé‚£ä¹ˆä¹Ÿæ²¡å¿…è¦æŠ½è±¡å‡ºä¸€ä¸ªæ¥å£ï¼Œé¿å…è¿‡åº¦è®¾è®¡ï¼›<br>é—®é¢˜2ï¼šåç»­çš„å¹‚ç­‰æ¡†æ¶ä¼˜åŒ–ä¸»è¦é›†ä¸­åœ¨å¼‚å¸¸å¤„ç†å§ï¼Œå¦‚è®¾è®¡ç¯‡ä¸­æ‰€è¯´ï¼Œè¦è€ƒè™‘åˆ°å„ç§å¼‚å¸¸æƒ…å†µï¼Œæ¯”å¦‚å¯ä»¥åœ¨æ¡†æ¶ä¸­å¢åŠ å¼‚å¸¸æ—¥å¿—è®°å½•ï¼›rediså­˜å‚¨ã€åˆ é™¤å‘ç”Ÿå¼‚å¸¸æ—¶ï¼Œæ¥å£å¯ä»¥ç›´æ¥å¤±è´¥ã€‚ã€‚","like_count":0},{"had_liked":false,"id":242721,"user_name":"ä¹ æƒ¯è¯´","can_delete":false,"product_type":"c1","uid":1235385,"ip_address":"","ucode":"5429FAF60E4FBA","user_header":"https://static001.geekbang.org/account/avatar/00/12/d9/b9/e21b699a.jpg","comment_is_top":false,"comment_ctime":1597823697,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1597823697","product_id":100039001,"comment_content":"è¿™ä¸ªèƒ½é˜²æ­¢é‡å¤è¯·æ±‚å¹‚ç­‰å—ï¼Œæ¯”å¦‚æˆ‘æ”¯ä»˜è®¢å•è¿ç»­è¯·æ±‚ä¸¤æ¬¡ä»˜æ¬¾ï¼Œå®Œå…¨å’Œä¸šåŠ¡æ— å…³ä¸æ˜¯ä¼šç”Ÿæˆä¸¤ä¸ªä¸åŒçš„å¹‚ç­‰å·å—","like_count":0},{"had_liked":false,"id":241932,"user_name":"Magic","can_delete":false,"product_type":"c1","uid":1272047,"ip_address":"","ucode":"FD9CEDAA419EB0","user_header":"https://static001.geekbang.org/account/avatar/00/13/68/ef/6264ca3d.jpg","comment_is_top":false,"comment_ctime":1597505455,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1597505455","product_id":100039001,"comment_content":"1 deleteåº”è¯¥è¿”å›boolï¼Œå¤±è´¥åå¯ä»¥å®‰å…¨é‡è¯•<br>","like_count":0},{"had_liked":false,"id":239357,"user_name":"Tobias","can_delete":false,"product_type":"c1","uid":1803858,"ip_address":"","ucode":"F3225639EDA193","user_header":"https://static001.geekbang.org/account/avatar/00/1b/86/52/b92dc111.jpg","comment_is_top":false,"comment_ctime":1596509698,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1596509698","product_id":100039001,"comment_content":"æ€è€ƒé¢˜2ï¼š<br>ï¼ˆ1ï¼‰å¢åŠ å¹‚ç­‰å¼€å…³ï¼Œæ”¯æŒé…ç½®åŒ–çš„å¼€å¯&#47;å…³é—­å¹‚ç­‰åŠŸèƒ½ã€‚<br>","like_count":0},{"had_liked":false,"id":233646,"user_name":"å®ˆæ‹™","can_delete":false,"product_type":"c1","uid":1738326,"ip_address":"","ucode":"F594B2DA3F6D4F","user_header":"https://static001.geekbang.org/account/avatar/00/1a/86/56/509535da.jpg","comment_is_top":false,"comment_ctime":1594374705,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1594374705","product_id":100039001,"comment_content":"1. delete()æ–¹æ³•åº”è¯¥è¿”å›booleanè€Œévoid. è¿”å›booleanæ¸…æ™°å¾—å‘Šè¯‰å®¢æˆ·ç«¯æœ¬æ¬¡æ‰§è¡Œçš„ç»“æœ, å¦‚æœåˆ é™¤å‡ºé”™, å¯ç›´æ¥è¿”å›false.<br>é™¤æ­¤ä¹‹å¤–, å¯ä»¥é€šè¿‡æ¥å£å®ç°çš„æ¨¡æ¿æ–¹æ³•æ¨¡å¼ç¼–å†™void delete(String id, DeleteCallback callback)é€šè¿‡æ¥å£å›è°ƒçš„æ–¹å¼é€šçŸ¥å®¢æˆ·ç«¯æ‰§è¡Œç»“æœ.<br><br>å¹‚ç­‰å·ç”Ÿæˆç®—æ³•ä¸éœ€è¦æŠ½è±¡å‡ºä¸€ä¸ªæ¥å£. å¹‚ç­‰å·æœ¬è´¨æ˜¯å…¨å±€å”¯ä¸€id, åŸºæœ¬æ²¡æœ‰æ›¿æ¢çš„å¿…è¦æ€§.<br><br>2. å‚è€ƒé™æµæ¡†æ¶çš„è®¾è®¡, äºŒæœŸå¯ä»¥è®©å¹‚ç­‰æ¡†æ¶æ”¯æŒSpring, ReactiveX, Redisç­‰å¸¸ç”¨æ¡†æ¶çš„æ‰©å±•ä½¿ç”¨. <br>","like_count":0},{"had_liked":false,"id":232997,"user_name":"åŒ—çº¬8â„ƒ","can_delete":false,"product_type":"c1","uid":1433189,"ip_address":"","ucode":"4999F2E037C93C","user_header":"https://static001.geekbang.org/account/avatar/00/15/de/65/51147fb6.jpg","comment_is_top":false,"comment_ctime":1594187152,"is_pvip":false,"replies":[{"id":"86255","content":"å¹‚ç­‰å·ç›¸åŒå°±æ˜¯åŒä¸€ä¸ªè¯·æ±‚ã€‚ä¸¤ä¸ªè¯·æ±‚æ˜¯å¦æ˜¯åŒä¸€ä¸ªè¯·æ±‚ï¼Œç”±ä¸šåŠ¡å‘èµ·æ–¹æ¥å®šä¹‰ï¼ˆä»–è¯´äº†ç®—ï¼‰ï¼Œä»–è§‰å¾—æŸä¸¤ä¸ªè¯·æ±‚æ˜¯åŒä¸€ä¸ªè¯·æ±‚ï¼Œå°±èµäºˆç›¸åŒçš„å¹‚ç­‰å·ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹äº‰","uid":"1190123","ctime":1594388380,"ip_address":"","comment_id":232997,"utype":1}],"discussion_count":6,"race_medal":0,"score":"1594187152","product_id":100039001,"comment_content":"è€å¸ˆï¼Œèƒ½å¸®èœé¸Ÿè®²è§£ä¸‹å¹‚ç­‰å’‹å°±å®ç°äº†ï¼ŒåŒºåˆ†è¯·æ±‚ï¼Œæ˜¯ä¸€ä¸ªæ–°çš„è¯·æ±‚æˆ–è€…æ˜¯åŒä¸€ä¸ªè¯·æ±‚å†æ¬¡å‘é€","like_count":0,"discussions":[{"author":{"id":1190123,"avatar":"https://static001.geekbang.org/account/avatar/00/12/28/eb/af064421.jpg","nickname":"ç‹äº‰","note":"","ucode":"2B611BE0E0EDD4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":500842,"discussion_content":"å¹‚ç­‰å·ç›¸åŒå°±æ˜¯åŒä¸€ä¸ªè¯·æ±‚ã€‚ä¸¤ä¸ªè¯·æ±‚æ˜¯å¦æ˜¯åŒä¸€ä¸ªè¯·æ±‚ï¼Œç”±ä¸šåŠ¡å‘èµ·æ–¹æ¥å®šä¹‰ï¼ˆä»–è¯´äº†ç®—ï¼‰ï¼Œä»–è§‰å¾—æŸä¸¤ä¸ªè¯·æ±‚æ˜¯åŒä¸€ä¸ªè¯·æ±‚ï¼Œå°±èµäºˆç›¸åŒçš„å¹‚ç­‰å·ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594388380,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1087077,"avatar":"https://static001.geekbang.org/account/avatar/00/10/96/65/aaf5985b.jpg","nickname":"äº‘å·","note":"","ucode":"49EC5972B9EB1C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":545571,"discussion_content":"æ‰€ä»¥è¯´ä»£ç é‡Œå¹‚ç­‰idçš„ç”Ÿæˆæ˜¯åœ¨è°ƒç”¨æ–¹ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641996557,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1179622,"avatar":"https://static001.geekbang.org/account/avatar/00/11/ff/e6/4b0ddfcf.jpg","nickname":"æé£","note":"","ucode":"4B23FF72AA4BA0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":361059,"discussion_content":"æˆ‘ä¹Ÿè§‰å¾—ï¼Œæ¯”å¦‚æˆ‘ä»¬è¯·æ±‚æ–¹æ˜¯appç«¯ï¼Œè®©appç«¯åˆ›å»ºå¹‚ç­‰å·å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616590158,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":2062203,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/77/7b/338c4617.jpg","nickname":"ç€šæµ·","note":"","ucode":"E64C22F3F6D285","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1179622,"avatar":"https://static001.geekbang.org/account/avatar/00/11/ff/e6/4b0ddfcf.jpg","nickname":"æé£","note":"","ucode":"4B23FF72AA4BA0","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":396577,"discussion_content":"å—¯   æ˜¯çš„    ä¸èƒ½ä¾èµ–è¯·æ±‚æ–¹æ¥å®ç°å¹‚ç­‰       ä¸èƒ½ä¿¡ä»»è¯·æ±‚æ–¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632454873,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":361059,"ip_address":""},"score":396577,"extra":""},{"author":{"id":1463834,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Bag6ZX7euicB9BTibY6KyFDmhjCOnI5OrrgTsh3YHUnPPSv8icVgr7ZxAzwjkY6lTRV5UC8bDibucLAm2ndMltsobA/132","nickname":"mapan","note":"","ucode":"3BF62213579291","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2062203,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/77/7b/338c4617.jpg","nickname":"ç€šæµ·","note":"","ucode":"E64C22F3F6D285","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":415089,"discussion_content":"æ¯”å¦‚ç”¨æˆ·ä¸‹è®¢å•ï¼Œè¯·æ±‚äº†ä¸€æ¬¡ç”Ÿæˆäº†å¹‚ç­‰å·æ­¤æ—¶ç½‘ç»œå¡ä½äº†ï¼Œç„¶ååˆç‚¹äº†ä¸€ä¸‹ï¼Œä¸æ˜¯åˆè¯·æ±‚äº†ä¸€æ¬¡å—ï¼Œé‡æ–°ç”Ÿæˆäº†å¹‚ç­‰å·ï¼Œæ€ä¹ˆå°±å¹‚ç­‰äº†ï¼Œéš¾é“ç¬¬äºŒæ¬¡è¯·æ±‚å¸¦çš„è¿˜æ˜¯ç¬¬ä¸€æ¬¡ç”Ÿæˆçš„å¹‚ç­‰å·å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636985893,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":396577,"ip_address":""},"score":415089,"extra":""}]},{"author":{"id":1235385,"avatar":"https://static001.geekbang.org/account/avatar/00/12/d9/b9/e21b699a.jpg","nickname":"ä¹ æƒ¯è¯´","note":"","ucode":"5429FAF60E4FBA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":299798,"discussion_content":"è¿™ä¸ªå¦‚æœç”±è¯·æ±‚æ–¹æ¥å®šä¹‰ï¼Œå¦‚æœè¯·æ±‚æ–¹è‡ªå·±æ— æ— æ„ŸçŸ¥å‘¢ï¼Œä¸èƒ½å®Œå…¨æŠŠä¸»å¯¼æƒäº¤ç»™ä¸Šæ¸¸å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597823882,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}