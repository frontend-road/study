{"id":88885,"title":"29 | 生态篇习题解答（上）","content":"<h1>源代码及课件地址</h1><p><a href=\"https://gitee.com/geektime-geekbang/geektime-vue-1\">https://gitee.com/geektime-geekbang/geektime-vue-1</a></p>","comments":[{"had_liked":false,"id":112618,"user_name":"ただの観です。","can_delete":false,"product_type":"c3","uid":1567745,"ip_address":"","ucode":"D2EF872BEAF4C5","user_header":"https://static001.geekbang.org/account/avatar/00/17/ec/01/7a2d7f84.jpg","comment_is_top":false,"comment_ctime":1562772419,"is_pvip":false,"replies":[{"id":42421,"content":"因为需要 store.state store.getters参数","user_name":"作者回复","user_name_real":"唐","uid":1316874,"ctime":1563780953,"ip_address":"","comment_id":112618,"utype":1}],"discussion_count":4,"race_medal":0,"score":2,"product_id":100024601,"comment_content":"老师你好，我有一个疑问啊。在computed[key]=function(){\n\t\t\treturn fn(store.state,store.getters);\n\t\t}\n这段代码中，为什么不是computed[key]=fn啊，return fn(store.state,store.getters)不是直接返回了fn执行完之后的代码了吗？","like_count":0,"discussions":[{"author":{"id":1316874,"avatar":"https://static001.geekbang.org/account/avatar/00/14/18/0a/28206510.jpg","nickname":"唐金州","note":"","ucode":"563B97D87C66AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":457821,"discussion_content":"因为需要 store.state store.getters参数","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563780953,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1218162,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/72/a517bf25.jpg","nickname":"方舟勇士","note":"","ucode":"53D3D844B08B92","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":295797,"discussion_content":"为什么不是 return fn(store.state); 传入 store.getters 起到什么作用？","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1596348142,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2145095,"avatar":"https://static001.geekbang.org/account/avatar/00/20/bb/47/b60ae3eb.jpg","nickname":"你好，阳光","note":"","ucode":"1A2F487C57F7D9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":347915,"discussion_content":"同问，为何store.getters也要传进去？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612362964,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2286113,"avatar":"https://static001.geekbang.org/account/avatar/00/22/e2/21/60adf96b.jpg","nickname":"stone","note":"","ucode":"65816E57253D0F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2145095,"avatar":"https://static001.geekbang.org/account/avatar/00/20/bb/47/b60ae3eb.jpg","nickname":"你好，阳光","note":"","ucode":"1A2F487C57F7D9","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":366706,"discussion_content":"vuex 官方 getters 里函数的第二个参数就是 getters","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618154230,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":347915,"ip_address":"","group_id":0},"score":366706,"extra":""}]}]},{"had_liked":false,"id":84094,"user_name":"Jason","can_delete":false,"product_type":"c3","uid":1482359,"ip_address":"","ucode":"D370B08F499DD1","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZlG6Z7ibxbJxRH4ByTGN3IcicwWZWY3Uzibo01swktGpa0gC29pv4haFs5nNIjkfnuibbtVlJWaSOIQ/132","comment_is_top":false,"comment_ctime":1554781902,"is_pvip":false,"replies":[{"id":30854,"content":"？ 哪三层，我没有听说这个概念哎 ","user_name":"作者回复","user_name_real":"唐","uid":1316874,"ctime":1555247458,"ip_address":"","comment_id":84094,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100024601,"comment_content":"Vue的三层架构中的服务层，有讲解一下不？","like_count":0,"discussions":[{"author":{"id":1316874,"avatar":"https://static001.geekbang.org/account/avatar/00/14/18/0a/28206510.jpg","nickname":"唐金州","note":"","ucode":"563B97D87C66AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446252,"discussion_content":"？ 哪三层，我没有听说这个概念哎 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555247458,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1461291,"avatar":"https://static001.geekbang.org/account/avatar/00/16/4c/2b/5236d4b0.jpg","nickname":"王连新","note":"","ucode":"7F89D6C3F99DA7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":383030,"discussion_content":"你说的是 数据试图逻辑三层吧","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625835737,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":83121,"user_name":"李军军","can_delete":false,"product_type":"c3","uid":1471616,"ip_address":"","ucode":"6ED3A84560F740","user_header":"https://static001.geekbang.org/account/avatar/00/16/74/80/1cb539c4.jpg","comment_is_top":false,"comment_ctime":1554430152,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":2,"product_id":100024601,"comment_content":"老师您好，我需要多个基础组件共享一段加入业务接口的功能，感觉使用混入不好，强行把业务加给了基础组件，您能讲讲怎么模拟高阶组件吗.","like_count":2,"discussions":[{"author":{"id":1736720,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/80/10/2406a662.jpg","nickname":"希言自然","note":"","ucode":"8D99A82B05636B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":240068,"discussion_content":"我靠我们同名同姓啊","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587334211,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":284694,"user_name":"guopeng1129972","can_delete":false,"product_type":"c3","uid":2143239,"ip_address":"","ucode":"6ABDA16DAFA0CD","user_header":"https://static001.geekbang.org/account/avatar/00/20/b4/07/e51f0fbe.jpg","comment_is_top":false,"comment_ctime":1616418572,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100024601,"comment_content":"为什么我无法运行成功，geektime-vue-1&#47;vuex-demo2_a\n\nUncaught TypeError: Property description must be an object: d\n    at Function.defineProperties (&lt;anonymous&gt;)\n    at _loop (min-vuex.js?dbf4:26)\n    at new Store (min-vuex.js?dbf4:24)\n\n说我参数错误","like_count":0},{"had_liked":false,"id":243773,"user_name":"逆风一战九","can_delete":false,"product_type":"c3","uid":2143900,"ip_address":"","ucode":"83127627F6F37C","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI45zO9GOMquhD0ia1wTBSwtJ1juPcpFTSrOGicGW3jf6JclaudauHicN8OpADArQKL8zPtDicEx4aicgA/132","comment_is_top":false,"comment_ctime":1598271892,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100024601,"comment_content":"这里面install没有做重复安装的判断，源码里面有判断","like_count":0},{"had_liked":false,"id":116566,"user_name":"盆栽","can_delete":false,"product_type":"c3","uid":1374045,"ip_address":"","ucode":"C5B02C4E5C9B75","user_header":"https://static001.geekbang.org/account/avatar/00/14/f7/5d/3fd98765.jpg","comment_is_top":false,"comment_ctime":1563871536,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100024601,"comment_content":"老师，我想问一下，我是直接把整个state，getters放进vue的，可行不。\n初始化成响应式：\n  this._vm = new Vue({\n    data: {\n      $$state: state\n    },\n    computed: {\n      $$getters() {\n        const obj = {}\n        for (const key in getters) {\n          obj[key] = getters[key].call(this, this._data.$$state)\n        }\n        return obj\n      }\n    }\n  })\n设置取值时的操作：\nObject.defineProperty(Store.prototype, &#39;state&#39;, {\n  get: function() {\n    return this._vm._data.$$state\n  }\n})\nObject.defineProperty(Store.prototype, &#39;getters&#39;, {\n  get: function() {\n    return this._vm.$$getters\n  }\n})","like_count":0}]}