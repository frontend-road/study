{"id":116042,"title":"04 | TCPä¸‰æ¬¡æ¡æ‰‹ï¼šæ€ä¹ˆä½¿ç”¨å¥—æ¥å­—æ ¼å¼å»ºç«‹è¿æ¥ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯ç››å»¶æ•ï¼Œè¿™é‡Œæ˜¯ç½‘ç»œç¼–ç¨‹å®æˆ˜ç¬¬4è®²ï¼Œæ¬¢è¿å›æ¥ã€‚</p><p>åœ¨ä¸Šä¸€è®²é‡Œæˆ‘ä»¬ä»‹ç»äº†IPv4ã€IPv6ä»¥åŠæœ¬åœ°å¥—æ¥å­—æ ¼å¼ï¼Œè¿™ä¸€è®²æˆ‘ä»¬æ¥è®²ä¸€è®²æ€ä¹ˆä½¿ç”¨è¿™äº›å¥—æ¥å­—æ ¼å¼å®Œæˆè¿æ¥çš„å»ºç«‹ï¼Œå½“ç„¶ï¼Œç»å…¸çš„TCPä¸‰æ¬¡æ¡æ‰‹ç†è®ºä¹Ÿä¼šè´¯ç©¿å…¶ä¸­ã€‚æˆ‘å¸Œæœ›ç»è¿‡è¿™ä¸€è®²çš„è®²è§£ï¼Œä½ ä¼šç‰¢ç‰¢è®°ä½TCPä¸‰æ¬¡æ¡æ‰‹å’Œå®¢æˆ·ç«¯ã€æœåŠ¡å™¨æ¨¡å‹ã€‚</p><p>è®©æˆ‘ä»¬å…ˆä»æœåŠ¡å™¨ç«¯å¼€å§‹ã€‚</p><h2>æœåŠ¡ç«¯å‡†å¤‡è¿æ¥çš„è¿‡ç¨‹</h2><h3>åˆ›å»ºå¥—æ¥å­—</h3><p>è¦åˆ›å»ºä¸€ä¸ªå¯ç”¨çš„å¥—æ¥å­—ï¼Œéœ€è¦ä½¿ç”¨ä¸‹é¢çš„å‡½æ•°ï¼š</p><pre><code>int socket(int domain, int type, int protocol)\n</code></pre><p>domainå°±æ˜¯æŒ‡PF_INETã€PF_INET6ä»¥åŠPF_LOCALç­‰ï¼Œè¡¨ç¤ºä»€ä¹ˆæ ·çš„å¥—æ¥å­—ã€‚</p><p>typeå¯ç”¨çš„å€¼æ˜¯ï¼š</p><ul>\n<li><strong>SOCK_STREAM: è¡¨ç¤ºçš„æ˜¯å­—èŠ‚æµï¼Œå¯¹åº”TCPï¼›</strong></li>\n<li><strong>SOCK_DGRAMï¼š è¡¨ç¤ºçš„æ˜¯æ•°æ®æŠ¥ï¼Œå¯¹åº”UDPï¼›</strong></li>\n<li><strong>SOCK_RAW: è¡¨ç¤ºçš„æ˜¯åŸå§‹å¥—æ¥å­—ã€‚</strong></li>\n</ul><p>å‚æ•°protocolåŸæœ¬æ˜¯ç”¨æ¥æŒ‡å®šé€šä¿¡åè®®çš„ï¼Œä½†ç°åœ¨åŸºæœ¬åºŸå¼ƒã€‚å› ä¸ºåè®®å·²ç»é€šè¿‡å‰é¢ä¸¤ä¸ªå‚æ•°æŒ‡å®šå®Œæˆã€‚protocolç›®å‰ä¸€èˆ¬å†™æˆ0å³å¯ã€‚</p><h3>bind: è®¾å®šç”µè¯å·ç </h3><p>åˆ›å»ºå‡ºæ¥çš„å¥—æ¥å­—å¦‚æœéœ€è¦è¢«åˆ«äººä½¿ç”¨ï¼Œå°±éœ€è¦è°ƒç”¨bindå‡½æ•°æŠŠå¥—æ¥å­—å’Œå¥—æ¥å­—åœ°å€ç»‘å®šï¼Œå°±åƒå»ç”µä¿¡å±€ç™»è®°æˆ‘ä»¬çš„ç”µè¯å·ç ä¸€æ ·ã€‚</p><p>è°ƒç”¨bindå‡½æ•°çš„æ–¹å¼å¦‚ä¸‹ï¼š</p><pre><code>bind(int fd, sockaddr * addr, socklen_t len)\n</code></pre><p>æˆ‘ä»¬éœ€è¦æ³¨æ„åˆ°bindå‡½æ•°åé¢çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯é€šç”¨åœ°å€æ ¼å¼<code>sockaddr * addr</code>ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªåœ°æ–¹å€¼å¾—æ³¨æ„ï¼Œé‚£å°±æ˜¯è™½ç„¶æ¥æ”¶çš„æ˜¯é€šç”¨åœ°å€æ ¼å¼ï¼Œå®é™…ä¸Šä¼ å…¥çš„å‚æ•°å¯èƒ½æ˜¯IPv4ã€IPv6æˆ–è€…æœ¬åœ°å¥—æ¥å­—æ ¼å¼ã€‚bindå‡½æ•°ä¼šæ ¹æ®lenå­—æ®µåˆ¤æ–­ä¼ å…¥çš„å‚æ•°addrè¯¥æ€ä¹ˆè§£æï¼Œlenå­—æ®µè¡¨ç¤ºçš„å°±æ˜¯ä¼ å…¥çš„åœ°å€é•¿åº¦ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¯å˜å€¼ã€‚</p><!-- [[[read_end]]] --><p>è¿™é‡Œå…¶å®å¯ä»¥æŠŠbindå‡½æ•°ç†è§£æˆè¿™æ ·ï¼š</p><pre><code>bind(int fd, void * addr, socklen_t len)\n</code></pre><p>ä¸è¿‡BSDè®¾è®¡å¥—æ¥å­—çš„æ—¶å€™å¤§çº¦æ˜¯1982å¹´ï¼Œé‚£ä¸ªæ—¶å€™çš„Cè¯­è¨€è¿˜æ²¡æœ‰<code>void *</code>çš„æ”¯æŒï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒBSDçš„è®¾è®¡è€…ä»¬åˆ›é€ æ€§åœ°è®¾è®¡äº†é€šç”¨åœ°å€æ ¼å¼æ¥ä½œä¸ºæ”¯æŒbindå’Œacceptç­‰è¿™äº›å‡½æ•°çš„å‚æ•°ã€‚</p><p>å¯¹äºä½¿ç”¨è€…æ¥è¯´ï¼Œæ¯æ¬¡éœ€è¦å°†IPv4ã€IPv6æˆ–è€…æœ¬åœ°å¥—æ¥å­—æ ¼å¼è½¬åŒ–ä¸ºé€šç”¨å¥—æ¥å­—æ ¼å¼ï¼Œå°±åƒä¸‹é¢çš„IPv4å¥—æ¥å­—åœ°å€æ ¼å¼çš„ä¾‹å­ä¸€æ ·ï¼š</p><pre><code>struct sockaddr_in name;\nbind (sock, (struct sockaddr *) &amp;name, sizeof (name)\n</code></pre><p>å¯¹äºå®ç°è€…æ¥è¯´ï¼Œå¯æ ¹æ®è¯¥åœ°å€ç»“æ„çš„å‰ä¸¤ä¸ªå­—èŠ‚åˆ¤æ–­å‡ºæ˜¯å“ªç§åœ°å€ã€‚ä¸ºäº†å¤„ç†é•¿åº¦å¯å˜çš„ç»“æ„ï¼Œéœ€è¦è¯»å–å‡½æ•°é‡Œçš„ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œä¹Ÿå°±æ˜¯lenå­—æ®µï¼Œè¿™æ ·å°±å¯ä»¥å¯¹åœ°å€è¿›è¡Œè§£æå’Œåˆ¤æ–­äº†ã€‚</p><p>è®¾ç½®bindçš„æ—¶å€™ï¼Œå¯¹åœ°å€å’Œç«¯å£å¯ä»¥æœ‰å¤šç§å¤„ç†æ–¹å¼ã€‚</p><p>æˆ‘ä»¬å¯ä»¥æŠŠåœ°å€è®¾ç½®æˆæœ¬æœºçš„IPåœ°å€ï¼Œè¿™ç›¸å½“å‘Šè¯‰æ“ä½œç³»ç»Ÿå†…æ ¸ï¼Œä»…ä»…å¯¹ç›®æ ‡IPæ˜¯æœ¬æœºIPåœ°å€çš„IPåŒ…è¿›è¡Œå¤„ç†ã€‚ä½†æ˜¯è¿™æ ·å†™çš„ç¨‹åºåœ¨éƒ¨ç½²æ—¶æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬ç¼–å†™åº”ç”¨ç¨‹åºæ—¶å¹¶ä¸æ¸…æ¥šè‡ªå·±çš„åº”ç”¨ç¨‹åºå°†ä¼šè¢«éƒ¨ç½²åˆ°å“ªå°æœºå™¨ä¸Šã€‚è¿™ä¸ªæ—¶å€™ï¼Œå¯ä»¥åˆ©ç”¨<strong>é€šé…åœ°å€</strong>çš„èƒ½åŠ›å¸®åŠ©æˆ‘ä»¬è§£å†³è¿™ä¸ªé—®é¢˜ã€‚é€šé…åœ°å€ç›¸å½“äºå‘Šè¯‰æ“ä½œç³»ç»Ÿå†…æ ¸ï¼šâ€œHiï¼Œæˆ‘å¯ä¸æŒ‘æ´»ï¼Œåªè¦ç›®æ ‡åœ°å€æ˜¯å’±ä»¬çš„éƒ½å¯ä»¥ã€‚â€æ¯”å¦‚ä¸€å°æœºå™¨æœ‰ä¸¤å—ç½‘å¡ï¼ŒIPåœ°å€åˆ†åˆ«æ˜¯202.61.22.55å’Œ192.168.1.11ï¼Œé‚£ä¹ˆå‘è¿™ä¸¤ä¸ªIPè¯·æ±‚çš„è¯·æ±‚åŒ…éƒ½ä¼šè¢«æˆ‘ä»¬ç¼–å†™çš„åº”ç”¨ç¨‹åºå¤„ç†ã€‚</p><p>é‚£ä¹ˆè¯¥å¦‚ä½•è®¾ç½®é€šé…åœ°å€å‘¢ï¼Ÿ</p><p>å¯¹äºIPv4çš„åœ°å€æ¥è¯´ï¼Œä½¿ç”¨INADDR_ANYæ¥å®Œæˆé€šé…åœ°å€çš„è®¾ç½®ï¼›å¯¹äºIPv6çš„åœ°å€æ¥è¯´ï¼Œä½¿ç”¨IN6ADDR_ANYæ¥å®Œæˆé€šé…åœ°å€çš„è®¾ç½®ã€‚</p><pre><code>struct sockaddr_in name;\nname.sin_addr.s_addr = htonl (INADDR_ANY); /* IPV4é€šé…åœ°å€ */\n</code></pre><p>é™¤äº†åœ°å€ï¼Œè¿˜æœ‰ç«¯å£ã€‚å¦‚æœæŠŠç«¯å£è®¾ç½®æˆ0ï¼Œå°±ç›¸å½“äºæŠŠç«¯å£çš„é€‰æ‹©æƒäº¤ç»™æ“ä½œç³»ç»Ÿå†…æ ¸æ¥å¤„ç†ï¼Œæ“ä½œç³»ç»Ÿå†…æ ¸ä¼šæ ¹æ®ä¸€å®šçš„ç®—æ³•é€‰æ‹©ä¸€ä¸ªç©ºé—²çš„ç«¯å£ï¼Œå®Œæˆå¥—æ¥å­—çš„ç»‘å®šã€‚è¿™åœ¨æœåŠ¡å™¨ç«¯ä¸å¸¸ä½¿ç”¨ã€‚</p><p>ä¸€èˆ¬æ¥è¯´ï¼ŒæœåŠ¡å™¨ç«¯çš„ç¨‹åºä¸€å®šè¦ç»‘å®šåˆ°ä¸€ä¸ªä¼—æ‰€å‘¨çŸ¥çš„ç«¯å£ä¸Šã€‚æœåŠ¡å™¨ç«¯çš„IPåœ°å€å’Œç«¯å£æ•°æ®ï¼Œç›¸å½“äºæ‰“ç”µè¯æ‹¨å·æ—¶éœ€è¦çŸ¥é“çš„å¯¹æ–¹å·ç ï¼Œå¦‚æœæ²¡æœ‰ç”µè¯å·ç ï¼Œå°±æ²¡æœ‰åŠæ³•å’Œå¯¹æ–¹å»ºç«‹è¿æ¥ã€‚</p><p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªåˆå§‹åŒ–IPv4 TCP å¥—æ¥å­—çš„ä¾‹å­:</p><pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;netinet/in.h&gt;\n\n\nint make_socket (uint16_t port)\n{\n  int sock;\n  struct sockaddr_in name;\n\n\n  /* åˆ›å»ºå­—èŠ‚æµç±»å‹çš„IPV4 socket. */\n  sock = socket (PF_INET, SOCK_STREAM, 0);\n  if (sock &lt; 0)\n    {\n      perror (&quot;socket&quot;);\n      exit (EXIT_FAILURE);\n    }\n\n\n  /* ç»‘å®šåˆ°portå’Œip. */\n  name.sin_family = AF_INET; /* IPV4 */\n  name.sin_port = htons (port);  /* æŒ‡å®šç«¯å£ */\n  name.sin_addr.s_addr = htonl (INADDR_ANY); /* é€šé…åœ°å€ */\n  /* æŠŠIPV4åœ°å€è½¬æ¢æˆé€šç”¨åœ°å€æ ¼å¼ï¼ŒåŒæ—¶ä¼ é€’é•¿åº¦ */\n  if (bind (sock, (struct sockaddr *) &amp;name, sizeof (name)) &lt; 0)\n    {\n      perror (&quot;bind&quot;);\n      exit (EXIT_FAILURE);\n    }\n\n\n  return sock;\n}\n</code></pre><h3>listenï¼šæ¥ä¸Šç”µè¯çº¿ï¼Œä¸€åˆ‡å‡†å¤‡å°±ç»ª</h3><p>bindå‡½æ•°åªæ˜¯è®©æˆ‘ä»¬çš„å¥—æ¥å­—å’Œåœ°å€å…³è”ï¼Œå¦‚åŒç™»è®°äº†ç”µè¯å·ç ã€‚å¦‚æœè¦è®©åˆ«äººæ‰“é€šç”µè¯ï¼Œè¿˜éœ€è¦æˆ‘ä»¬æŠŠç”µè¯è®¾å¤‡æ¥å…¥ç”µè¯çº¿ï¼Œè®©æœåŠ¡å™¨çœŸæ­£å¤„äºå¯æ¥å¬çš„çŠ¶æ€ï¼Œè¿™ä¸ªè¿‡ç¨‹éœ€è¦ä¾èµ–listenå‡½æ•°ã€‚</p><p>åˆå§‹åŒ–åˆ›å»ºçš„å¥—æ¥å­—ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯ä¸€ä¸ª\"ä¸»åŠ¨\"å¥—æ¥å­—ï¼Œå…¶ç›®çš„æ˜¯ä¹‹åä¸»åŠ¨å‘èµ·è¯·æ±‚ï¼ˆé€šè¿‡è°ƒç”¨connectå‡½æ•°ï¼Œåé¢ä¼šè®²åˆ°ï¼‰ã€‚é€šè¿‡listenå‡½æ•°ï¼Œå¯ä»¥å°†åŸæ¥çš„\"ä¸»åŠ¨\"å¥—æ¥å­—è½¬æ¢ä¸º\"è¢«åŠ¨\"å¥—æ¥å­—ï¼Œå‘Šè¯‰æ“ä½œç³»ç»Ÿå†…æ ¸ï¼šâ€œæˆ‘è¿™ä¸ªå¥—æ¥å­—æ˜¯ç”¨æ¥ç­‰å¾…ç”¨æˆ·è¯·æ±‚çš„ã€‚â€å½“ç„¶ï¼Œæ“ä½œç³»ç»Ÿå†…æ ¸ä¼šä¸ºæ­¤åšå¥½æ¥æ”¶ç”¨æˆ·è¯·æ±‚çš„ä¸€åˆ‡å‡†å¤‡ï¼Œæ¯”å¦‚å®Œæˆè¿æ¥é˜Ÿåˆ—ã€‚</p><p>listenå‡½æ•°çš„åŸå‹æ˜¯è¿™æ ·çš„ï¼š</p><pre><code>int listen (int socketfd, int backlog)\n</code></pre><p>æˆ‘æ¥ç¨å¾®è§£é‡Šä¸€ä¸‹ã€‚ç¬¬ä¸€ä¸ªå‚æ•°socketdfä¸ºå¥—æ¥å­—æè¿°ç¬¦ï¼Œç¬¬äºŒä¸ªå‚æ•°backlogï¼Œåœ¨Linuxä¸­è¡¨ç¤ºå·²å®Œæˆ(ESTABLISHED)ä¸”æœªacceptçš„é˜Ÿåˆ—å¤§å°ï¼Œè¿™ä¸ªå‚æ•°çš„å¤§å°å†³å®šäº†å¯ä»¥æ¥æ”¶çš„å¹¶å‘æ•°ç›®ã€‚è¿™ä¸ªå‚æ•°è¶Šå¤§ï¼Œå¹¶å‘æ•°ç›®ç†è®ºä¸Šä¹Ÿä¼šè¶Šå¤§ã€‚ä½†æ˜¯å‚æ•°è¿‡å¤§ä¹Ÿä¼šå ç”¨è¿‡å¤šçš„ç³»ç»Ÿèµ„æºï¼Œä¸€äº›ç³»ç»Ÿï¼Œæ¯”å¦‚Linuxå¹¶ä¸å…è®¸å¯¹è¿™ä¸ªå‚æ•°è¿›è¡Œæ”¹å˜ã€‚å¯¹äºbacklogæ•´ä¸ªå‚æ•°çš„è®¾ç½®æœ‰ä¸€äº›æœ€ä½³å®è·µï¼Œè¿™é‡Œå°±ä¸å±•å¼€ï¼Œåé¢ç»“åˆå…·ä½“çš„å®ä¾‹è¿›è¡Œè§£è¯»ã€‚</p><h3>accept: ç”µè¯é“ƒå“èµ·äº†â€¦â€¦</h3><p>å½“å®¢æˆ·ç«¯çš„è¿æ¥è¯·æ±‚åˆ°è¾¾æ—¶ï¼ŒæœåŠ¡å™¨ç«¯åº”ç­”æˆåŠŸï¼Œè¿æ¥å»ºç«‹ï¼Œè¿™ä¸ªæ—¶å€™æ“ä½œç³»ç»Ÿå†…æ ¸éœ€è¦æŠŠè¿™ä¸ªäº‹ä»¶é€šçŸ¥åˆ°åº”ç”¨ç¨‹åºï¼Œå¹¶è®©åº”ç”¨ç¨‹åºæ„ŸçŸ¥åˆ°è¿™ä¸ªè¿æ¥ã€‚è¿™ä¸ªè¿‡ç¨‹ï¼Œå°±å¥½æ¯”ç”µä¿¡è¿è¥å•†å®Œæˆäº†ä¸€æ¬¡ç”µè¯è¿æ¥çš„å»ºç«‹, åº”ç­”æ–¹çš„ç”µè¯é“ƒå£°å“èµ·ï¼Œé€šçŸ¥æœ‰äººæ‹¨æ‰“äº†å·ç ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦æ‹¿èµ·ç”µè¯ç­’å¼€å§‹åº”ç­”ã€‚</p><p>è¿æ¥å»ºç«‹ä¹‹åï¼Œä½ å¯ä»¥æŠŠacceptè¿™ä¸ªå‡½æ•°çœ‹æˆæ˜¯æ“ä½œç³»ç»Ÿå†…æ ¸å’Œåº”ç”¨ç¨‹åºä¹‹é—´çš„æ¡¥æ¢ã€‚å®ƒçš„åŸå‹æ˜¯ï¼š</p><pre><code>int accept(int listensockfd, struct sockaddr *cliaddr, socklen_t *addrlen)\n</code></pre><p>å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°listensockfdæ˜¯å¥—æ¥å­—ï¼Œå¯ä»¥å«å®ƒä¸ºlistenå¥—æ¥å­—ï¼Œå› ä¸ºè¿™å°±æ˜¯å‰é¢é€šè¿‡bindï¼Œlistenä¸€ç³»åˆ—æ“ä½œè€Œå¾—åˆ°çš„å¥—æ¥å­—ã€‚å‡½æ•°çš„è¿”å›å€¼æœ‰ä¸¤ä¸ªéƒ¨åˆ†ï¼Œç¬¬ä¸€ä¸ªéƒ¨åˆ†cliaddæ˜¯é€šè¿‡æŒ‡é’ˆæ–¹å¼è·å–çš„å®¢æˆ·ç«¯çš„åœ°å€ï¼Œaddrlenå‘Šè¯‰æˆ‘ä»¬åœ°å€çš„å¤§å°ï¼Œè¿™å¯ä»¥ç†è§£æˆå½“æˆ‘ä»¬æ‹¿èµ·ç”µè¯æœºæ—¶ï¼Œçœ‹åˆ°äº†æ¥ç”µæ˜¾ç¤ºï¼ŒçŸ¥é“äº†å¯¹æ–¹çš„å·ç ï¼›å¦ä¸€ä¸ªéƒ¨åˆ†æ˜¯å‡½æ•°çš„è¿”å›å€¼ï¼Œè¿™ä¸ªè¿”å›å€¼æ˜¯ä¸€ä¸ªå…¨æ–°çš„æè¿°å­—ï¼Œä»£è¡¨äº†ä¸å®¢æˆ·ç«¯çš„è¿æ¥ã€‚</p><p>è¿™é‡Œä¸€å®šè¦æ³¨æ„æœ‰ä¸¤ä¸ªå¥—æ¥å­—æè¿°å­—ï¼Œç¬¬ä¸€ä¸ªæ˜¯ç›‘å¬å¥—æ¥å­—æè¿°å­—listensockfdï¼Œå®ƒæ˜¯ä½œä¸ºè¾“å…¥å‚æ•°å­˜åœ¨çš„ï¼›ç¬¬äºŒä¸ªæ˜¯è¿”å›çš„å·²è¿æ¥å¥—æ¥å­—æè¿°å­—ã€‚</p><p>ä½ å¯èƒ½ä¼šé—®ï¼Œä¸ºä»€ä¹ˆè¦æŠŠä¸¤ä¸ªå¥—æ¥å­—åˆ†å¼€å‘¢ï¼Ÿç”¨ä¸€ä¸ªä¸æ˜¯æŒºå¥½çš„ä¹ˆï¼Ÿ</p><p>è¿™é‡Œå’Œæ‰“ç”µè¯çš„æƒ…å½¢éå¸¸ä¸ä¸€æ ·çš„åœ°æ–¹å°±åœ¨äºï¼Œæ‰“ç”µè¯ä¸€æ—¦æœ‰ä¸€ä¸ªè¿æ¥å»ºç«‹ï¼Œåˆ«äººæ˜¯ä¸èƒ½å†æ‰“è¿›æ¥çš„ï¼Œåªä¼šå¾—åˆ°è¯­éŸ³æ’­æŠ¥ï¼šâ€œæ‚¨æ‹¨çš„ç”µè¯æ­£åœ¨é€šè¯ä¸­ã€‚â€è€Œç½‘ç»œç¨‹åºçš„ä¸€ä¸ªé‡è¦ç‰¹å¾å°±æ˜¯å¹¶å‘å¤„ç†ï¼Œä¸å¯èƒ½ä¸€ä¸ªåº”ç”¨ç¨‹åºè¿è¡Œä¹‹ååªèƒ½æœåŠ¡ä¸€ä¸ªå®¢æˆ·ï¼Œå¦‚æœæ˜¯è¿™æ ·ï¼Œ åŒ11æŠ¢è´­å¾—éœ€è¦å¤šå°‘æœåŠ¡å™¨æ‰èƒ½æ»¡è¶³å…¨å›½ â€œå‰æ‰‹å…š â€ çš„éœ€æ±‚ï¼Ÿ</p><p>æ‰€ä»¥ç›‘å¬å¥—æ¥å­—ä¸€ç›´éƒ½å­˜åœ¨ï¼Œå®ƒæ˜¯è¦ä¸ºæˆåƒä¸Šä¸‡çš„å®¢æˆ·æ¥æœåŠ¡çš„ï¼Œç›´åˆ°è¿™ä¸ªç›‘å¬å¥—æ¥å­—å…³é—­ï¼›è€Œä¸€æ—¦ä¸€ä¸ªå®¢æˆ·å’ŒæœåŠ¡å™¨è¿æ¥æˆåŠŸï¼Œå®Œæˆäº†TCPä¸‰æ¬¡æ¡æ‰‹ï¼Œæ“ä½œç³»ç»Ÿå†…æ ¸å°±ä¸ºè¿™ä¸ªå®¢æˆ·ç”Ÿæˆä¸€ä¸ªå·²è¿æ¥å¥—æ¥å­—ï¼Œè®©åº”ç”¨æœåŠ¡å™¨ä½¿ç”¨è¿™ä¸ª<strong>å·²è¿æ¥å¥—æ¥å­—</strong>å’Œå®¢æˆ·è¿›è¡Œé€šä¿¡å¤„ç†ã€‚å¦‚æœåº”ç”¨æœåŠ¡å™¨å®Œæˆäº†å¯¹è¿™ä¸ªå®¢æˆ·çš„æœåŠ¡ï¼Œæ¯”å¦‚ä¸€æ¬¡ç½‘è´­ä¸‹å•ï¼Œä¸€æ¬¡ä»˜æ¬¾æˆåŠŸï¼Œé‚£ä¹ˆå…³é—­çš„å°±æ˜¯<strong>å·²è¿æ¥å¥—æ¥å­—</strong>ï¼Œè¿™æ ·å°±å®Œæˆäº†TCPè¿æ¥çš„é‡Šæ”¾ã€‚è¯·æ³¨æ„ï¼Œè¿™ä¸ªæ—¶å€™é‡Šæ”¾çš„åªæ˜¯è¿™ä¸€ä¸ªå®¢æˆ·è¿æ¥ï¼Œå…¶å®ƒè¢«æœåŠ¡çš„å®¢æˆ·è¿æ¥å¯èƒ½è¿˜å­˜åœ¨ã€‚æœ€é‡è¦çš„æ˜¯ï¼Œç›‘å¬å¥—æ¥å­—ä¸€ç›´éƒ½å¤„äºâ€œç›‘å¬â€çŠ¶æ€ï¼Œç­‰å¾…æ–°çš„å®¢æˆ·è¯·æ±‚åˆ°è¾¾å¹¶æœåŠ¡ã€‚</p><h2>å®¢æˆ·ç«¯å‘èµ·è¿æ¥çš„è¿‡ç¨‹</h2><p>å‰é¢è®²è¿°çš„bindã€listenä»¥åŠacceptçš„è¿‡ç¨‹ï¼Œæ˜¯å…¸å‹çš„æœåŠ¡å™¨ç«¯çš„è¿‡ç¨‹ã€‚ä¸‹é¢æˆ‘æ¥è®²ä¸‹å®¢æˆ·ç«¯å‘èµ·è¿æ¥è¯·æ±‚çš„è¿‡ç¨‹ã€‚</p><p>ç¬¬ä¸€æ­¥è¿˜æ˜¯å’ŒæœåŠ¡ç«¯ä¸€æ ·ï¼Œè¦å»ºç«‹ä¸€ä¸ªå¥—æ¥å­—ï¼Œæ–¹æ³•å’Œå‰é¢æ˜¯ä¸€æ ·çš„ã€‚</p><p>ä¸ä¸€æ ·çš„æ˜¯å®¢æˆ·ç«¯éœ€è¦è°ƒç”¨connectå‘æœåŠ¡ç«¯å‘èµ·è¯·æ±‚ã€‚</p><h3>connect: æ‹¨æ‰“ç”µè¯</h3><p>å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯çš„è¿æ¥å»ºç«‹ï¼Œæ˜¯é€šè¿‡connectå‡½æ•°å®Œæˆçš„ã€‚è¿™æ˜¯connectçš„æ„å»ºå‡½æ•°ï¼š</p><pre><code>int connect(int sockfd, const struct sockaddr *servaddr, socklen_t addrlen)\n</code></pre><p>å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°sockfdæ˜¯è¿æ¥å¥—æ¥å­—ï¼Œé€šè¿‡å‰é¢è®²è¿°çš„socketå‡½æ•°åˆ›å»ºã€‚ç¬¬äºŒä¸ªã€ç¬¬ä¸‰ä¸ªå‚æ•°servaddrå’Œaddrlenåˆ†åˆ«ä»£è¡¨æŒ‡å‘å¥—æ¥å­—åœ°å€ç»“æ„çš„æŒ‡é’ˆå’Œè¯¥ç»“æ„çš„å¤§å°ã€‚å¥—æ¥å­—åœ°å€ç»“æ„å¿…é¡»å«æœ‰æœåŠ¡å™¨çš„IPåœ°å€å’Œç«¯å£å·ã€‚</p><p>å®¢æˆ·åœ¨è°ƒç”¨å‡½æ•°connectå‰ä¸å¿…éå¾—è°ƒç”¨bindå‡½æ•°ï¼Œå› ä¸ºå¦‚æœéœ€è¦çš„è¯ï¼Œå†…æ ¸ä¼šç¡®å®šæºIPåœ°å€ï¼Œå¹¶æŒ‰ç…§ä¸€å®šçš„ç®—æ³•é€‰æ‹©ä¸€ä¸ªä¸´æ—¶ç«¯å£ä½œä¸ºæºç«¯å£ã€‚</p><p>å¦‚æœæ˜¯TCPå¥—æ¥å­—ï¼Œé‚£ä¹ˆè°ƒç”¨connectå‡½æ•°å°†æ¿€å‘TCPçš„ä¸‰æ¬¡æ¡æ‰‹è¿‡ç¨‹ï¼Œè€Œä¸”ä»…åœ¨è¿æ¥å»ºç«‹æˆåŠŸæˆ–å‡ºé”™æ—¶æ‰è¿”å›ã€‚å…¶ä¸­å‡ºé”™è¿”å›å¯èƒ½æœ‰ä»¥ä¸‹å‡ ç§æƒ…å†µï¼š</p><ol>\n<li>ä¸‰æ¬¡æ¡æ‰‹æ— æ³•å»ºç«‹ï¼Œå®¢æˆ·ç«¯å‘å‡ºçš„SYNåŒ…æ²¡æœ‰ä»»ä½•å“åº”ï¼Œäºæ˜¯è¿”å›TIMEOUTé”™è¯¯ã€‚è¿™ç§æƒ…å†µæ¯”è¾ƒå¸¸è§çš„åŸå› æ˜¯å¯¹åº”çš„æœåŠ¡ç«¯IPå†™é”™ã€‚</li>\n<li>å®¢æˆ·ç«¯æ”¶åˆ°äº†RSTï¼ˆå¤ä½ï¼‰å›ç­”ï¼Œè¿™æ—¶å€™å®¢æˆ·ç«¯ä¼šç«‹å³è¿”å›CONNECTION REFUSEDé”™è¯¯ã€‚è¿™ç§æƒ…å†µæ¯”è¾ƒå¸¸è§äºå®¢æˆ·ç«¯å‘é€è¿æ¥è¯·æ±‚æ—¶çš„è¯·æ±‚ç«¯å£å†™é”™ï¼Œå› ä¸ºRSTæ˜¯TCPåœ¨å‘ç”Ÿé”™è¯¯æ—¶å‘é€çš„ä¸€ç§TCPåˆ†èŠ‚ã€‚äº§ç”ŸRSTçš„ä¸‰ä¸ªæ¡ä»¶æ˜¯ï¼šç›®çš„åœ°ä¸ºæŸç«¯å£çš„SYNåˆ°è¾¾ï¼Œç„¶è€Œè¯¥ç«¯å£ä¸Šæ²¡æœ‰æ­£åœ¨ç›‘å¬çš„æœåŠ¡å™¨ï¼ˆå¦‚å‰æ‰€è¿°ï¼‰ï¼›TCPæƒ³å–æ¶ˆä¸€ä¸ªå·²æœ‰è¿æ¥ï¼›TCPæ¥æ”¶åˆ°ä¸€ä¸ªæ ¹æœ¬ä¸å­˜åœ¨çš„è¿æ¥ä¸Šçš„åˆ†èŠ‚ã€‚</li>\n<li>å®¢æˆ·å‘å‡ºçš„SYNåŒ…åœ¨ç½‘ç»œä¸Šå¼•èµ·äº†\"destination unreachable\"ï¼Œå³ç›®çš„ä¸å¯è¾¾çš„é”™è¯¯ã€‚è¿™ç§æƒ…å†µæ¯”è¾ƒå¸¸è§çš„åŸå› æ˜¯å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯è·¯ç”±ä¸é€šã€‚</li>\n</ol><p>æ ¹æ®ä¸åŒçš„è¿”å›å€¼ï¼Œæˆ‘ä»¬å¯ä»¥åšè¿›ä¸€æ­¥çš„æ’æŸ¥ã€‚</p><h2>è‘—åçš„TCPä¸‰æ¬¡æ¡æ‰‹: è¿™ä¸€æ¬¡ä¸ç”¨èƒŒè®°</h2><p><img src=\"https://static001.geekbang.org/resource/image/65/29/65cef2c44480910871a0b66cac1d5529.png?wh=952*540\" alt=\"\"><br>\nä½ åœ¨å„ä¸ªåœºåˆéƒ½ä¼šäº†è§£åˆ°è‘—åçš„TCPä¸‰æ¬¡æ¡æ‰‹ï¼Œå¯èƒ½è¿˜ä¼šè¢«è¦æ±‚èƒŒä¸‹ä¸‰æ¬¡æ¡æ‰‹æ•´ä¸ªè¿‡ç¨‹ï¼Œä½†èƒŒåçš„åŸç†å’Œè¿‡ç¨‹å¯èƒ½æœªå¿…çœŸæ­£ç†è§£ã€‚æˆ‘ä»¬åˆšåˆšå­¦ä¹ äº†æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯è¿æ¥çš„ä¸»è¦å‡½æ•°ï¼Œä¸‹é¢ç»“åˆè¿™äº›å‡½æ•°è®²è§£ä¸€ä¸‹TCPä¸‰æ¬¡æ¡æ‰‹çš„è¿‡ç¨‹ã€‚è¿™æ ·æˆ‘ç›¸ä¿¡ä½ ä¸ç”¨èƒŒï¼Œä¹Ÿèƒ½æ ¹æ®ç†è§£è½»æ¾æŒæ¡è¿™éƒ¨åˆ†çš„çŸ¥è¯†ã€‚</p><p>è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨çš„ç½‘ç»œç¼–ç¨‹æ¨¡å‹éƒ½æ˜¯é˜»å¡å¼çš„ã€‚æ‰€è°“é˜»å¡å¼ï¼Œå°±æ˜¯è°ƒç”¨å‘èµ·åä¸ä¼šç›´æ¥è¿”å›ï¼Œç”±æ“ä½œç³»ç»Ÿå†…æ ¸å¤„ç†ä¹‹åæ‰ä¼šè¿”å›ã€‚ ç›¸å¯¹çš„ï¼Œè¿˜æœ‰ä¸€ç§å«åšéé˜»å¡å¼çš„ï¼Œæˆ‘ä»¬åœ¨åé¢çš„ç« èŠ‚é‡Œä¼šè®²åˆ°ã€‚</p><h2>TCPä¸‰æ¬¡æ¡æ‰‹çš„è§£è¯»</h2><p>æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹æœ€åˆçš„è¿‡ç¨‹ï¼ŒæœåŠ¡å™¨ç«¯é€šè¿‡socketï¼Œbindå’Œlistenå®Œæˆäº†è¢«åŠ¨å¥—æ¥å­—çš„å‡†å¤‡å·¥ä½œï¼Œè¢«åŠ¨çš„æ„æ€å°±æ˜¯ç­‰ç€åˆ«äººæ¥è¿æ¥ï¼Œç„¶åè°ƒç”¨acceptï¼Œå°±ä¼šé˜»å¡åœ¨è¿™é‡Œï¼Œç­‰å¾…å®¢æˆ·ç«¯çš„è¿æ¥æ¥ä¸´ï¼›å®¢æˆ·ç«¯é€šè¿‡è°ƒç”¨socketå’Œconnectå‡½æ•°ä¹‹åï¼Œä¹Ÿä¼šé˜»å¡ã€‚æ¥ä¸‹æ¥çš„äº‹æƒ…æ˜¯ç”±æ“ä½œç³»ç»Ÿå†…æ ¸å®Œæˆçš„ï¼Œæ›´å…·ä½“ä¸€ç‚¹çš„è¯´ï¼Œæ˜¯æ“ä½œç³»ç»Ÿå†…æ ¸ç½‘ç»œåè®®æ ˆåœ¨å·¥ä½œã€‚</p><p>ä¸‹é¢æ˜¯å…·ä½“çš„è¿‡ç¨‹ï¼š</p><ol>\n<li>å®¢æˆ·ç«¯çš„åè®®æ ˆå‘æœåŠ¡å™¨ç«¯å‘é€äº†SYNåŒ…ï¼Œå¹¶å‘Šè¯‰æœåŠ¡å™¨ç«¯å½“å‰å‘é€åºåˆ—å·jï¼Œå®¢æˆ·ç«¯è¿›å…¥SYNC_SENTçŠ¶æ€ï¼›</li>\n<li>æœåŠ¡å™¨ç«¯çš„åè®®æ ˆæ”¶åˆ°è¿™ä¸ªåŒ…ä¹‹åï¼Œå’Œå®¢æˆ·ç«¯è¿›è¡ŒACKåº”ç­”ï¼Œåº”ç­”çš„å€¼ä¸ºj+1ï¼Œè¡¨ç¤ºå¯¹SYNåŒ…jçš„ç¡®è®¤ï¼ŒåŒæ—¶æœåŠ¡å™¨ä¹Ÿå‘é€ä¸€ä¸ªSYNåŒ…ï¼Œå‘Šè¯‰å®¢æˆ·ç«¯å½“å‰æˆ‘çš„å‘é€åºåˆ—å·ä¸ºkï¼ŒæœåŠ¡å™¨ç«¯è¿›å…¥SYNC_RCVDçŠ¶æ€ï¼›</li>\n<li>å®¢æˆ·ç«¯åè®®æ ˆæ”¶åˆ°ACKä¹‹åï¼Œä½¿å¾—åº”ç”¨ç¨‹åºä»connectè°ƒç”¨è¿”å›ï¼Œè¡¨ç¤ºå®¢æˆ·ç«¯åˆ°æœåŠ¡å™¨ç«¯çš„å•å‘è¿æ¥å»ºç«‹æˆåŠŸï¼Œå®¢æˆ·ç«¯çš„çŠ¶æ€ä¸ºESTABLISHEDï¼ŒåŒæ—¶å®¢æˆ·ç«¯åè®®æ ˆä¹Ÿä¼šå¯¹æœåŠ¡å™¨ç«¯çš„SYNåŒ…è¿›è¡Œåº”ç­”ï¼Œåº”ç­”æ•°æ®ä¸ºk+1ï¼›</li>\n<li>åº”ç­”åŒ…åˆ°è¾¾æœåŠ¡å™¨ç«¯åï¼ŒæœåŠ¡å™¨ç«¯åè®®æ ˆä½¿å¾—accepté˜»å¡è°ƒç”¨è¿”å›ï¼Œè¿™ä¸ªæ—¶å€™æœåŠ¡å™¨ç«¯åˆ°å®¢æˆ·ç«¯çš„å•å‘è¿æ¥ä¹Ÿå»ºç«‹æˆåŠŸï¼ŒæœåŠ¡å™¨ç«¯ä¹Ÿè¿›å…¥ESTABLISHEDçŠ¶æ€ã€‚</li>\n</ol><p>å½¢è±¡ä¸€ç‚¹çš„æ¯”å–»æ˜¯è¿™æ ·çš„ï¼Œæœ‰Aå’ŒBæƒ³è¿›è¡Œé€šè¯ï¼š</p><ul>\n<li>Aå…ˆå¯¹Bè¯´ï¼šâ€œå–‚ï¼Œä½ åœ¨ä¹ˆï¼Ÿæˆ‘åœ¨çš„ï¼Œæˆ‘çš„å£ä»¤æ˜¯jã€‚â€</li>\n<li>Bæ”¶åˆ°ä¹‹åå¤§å£°å›ç­”ï¼šâ€œæˆ‘æ”¶åˆ°ä½ çš„å£ä»¤jå¹¶å‡†å¤‡å¥½äº†ï¼Œä½ å‡†å¤‡å¥½äº†å—ï¼Ÿæˆ‘çš„å£ä»¤æ˜¯kã€‚â€</li>\n<li>Aæ”¶åˆ°ä¹‹åä¹Ÿå¤§å£°å›ç­”ï¼šâ€œæˆ‘æ”¶åˆ°ä½ çš„å£ä»¤kå¹¶å‡†å¤‡å¥½äº†ï¼Œæˆ‘ä»¬å¼€å§‹å§ã€‚â€</li>\n</ul><p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™æ ·çš„åº”ç­”è¿‡ç¨‹æ€»å…±è¿›è¡Œäº†ä¸‰æ¬¡ï¼Œè¿™å°±æ˜¯TCPè¿æ¥å»ºç«‹ä¹‹æ‰€ä»¥è¢«å«ä¸ºâ€œä¸‰æ¬¡æ¡æ‰‹â€çš„åŸå› äº†ã€‚</p><h2>æ€»ç»“</h2><p>è¿™ä¸€è®²æˆ‘ä»¬åˆ†åˆ«ä»æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯çš„è§’åº¦ï¼Œè®²è¿°äº†å¦‚ä½•åˆ›å»ºå¥—æ¥å­—ï¼Œå¹¶åˆ©ç”¨å¥—æ¥å­—å®ŒæˆTCPè¿æ¥çš„å»ºç«‹ã€‚</p><ul>\n<li>æœåŠ¡å™¨ç«¯é€šè¿‡åˆ›å»ºsocketï¼Œbindï¼Œlistenå®Œæˆåˆå§‹åŒ–ï¼Œé€šè¿‡acceptå®Œæˆè¿æ¥çš„å»ºç«‹ã€‚</li>\n<li>å®¢æˆ·ç«¯é€šè¿‡åˆ›å»ºsocketï¼Œconnectå‘èµ·è¿æ¥å»ºç«‹è¯·æ±‚ã€‚</li>\n</ul><p>åœ¨ä¸‹ä¸€è®²é‡Œï¼Œæˆ‘ä»¬å°†çœŸæ­£åœ°å¼€å§‹å®¢æˆ·ç«¯-æœåŠ¡ç«¯æ•°æ®äº¤äº’çš„è¿‡ç¨‹ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>æœ€åç»™ä½ å¸ƒç½®ä¸¤é“æ€è€ƒé¢˜ã€‚</p><p>ç¬¬ä¸€é“æ˜¯å…³äºé˜»å¡è°ƒç”¨çš„ï¼Œæ—¢ç„¶æœ‰é˜»å¡è°ƒç”¨ï¼Œå°±åº”è¯¥æœ‰éé˜»å¡è°ƒç”¨ï¼Œé‚£ä¹ˆå¦‚ä½•ä½¿ç”¨éé˜»å¡è°ƒç”¨å¥—æ¥å­—å‘¢ï¼Ÿä½¿ç”¨çš„åœºæ™¯åˆæ˜¯å“ªé‡Œå‘¢ï¼Ÿ</p><p>ç¬¬äºŒé“æ˜¯å…³äºå®¢æˆ·ç«¯çš„ï¼Œå®¢æˆ·ç«¯å‘èµ·connectè°ƒç”¨ä¹‹å‰ï¼Œå¯ä»¥è°ƒç”¨bindå‡½æ•°ä¹ˆï¼Ÿ</p><p>æ¬¢è¿ä½ åœ¨è¯„è®ºåŒºä¸æˆ‘åˆ†äº«ä½ çš„ç­”æ¡ˆï¼Œå¦‚æœè¿™ç¯‡æ–‡ç« å¸®åŠ©ä½ ç†è§£TCPä¸‰æ¬¡æ¡æ‰‹ï¼Œä¹Ÿæ¬¢è¿ä½ ç‚¹å‡»â€œè¯·æœ‹å‹è¯»â€ï¼ŒæŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«ç»™ä½ çš„æœ‹å‹æˆ–è€…åŒäº‹ã€‚</p>","comments":[{"had_liked":false,"id":122209,"user_name":"ç–¾é£çŸ¥åŠ²è‰","can_delete":false,"product_type":"c1","uid":1184919,"ip_address":"","ucode":"B6E73CA240AA29","user_header":"https://static001.geekbang.org/account/avatar/00/12/14/97/8a3aa317.jpg","comment_is_top":false,"comment_ctime":1565316314,"is_pvip":false,"replies":[{"id":"45141","content":"èµ","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1565576410,"ip_address":"","comment_id":122209,"utype":1}],"discussion_count":15,"race_medal":0,"score":"800429233370","product_id":100032701,"comment_content":"ä¹‹å‰çœ‹è¿‡ä¸€äº›æ–‡ç« è§£é‡Šï¼Œä¸ºä»€ä¹ˆtcpå»ºç«‹è¿æ¥éœ€è¦ä¸‰æ¬¡æ¡æ‰‹ï¼Œè§£é‡Šå¦‚ä¸‹<br><br>tcpè¿æ¥çš„åŒæ–¹è¦ç¡®ä¿å„è‡ªçš„æ”¶å‘æ¶ˆæ¯çš„èƒ½åŠ›éƒ½æ˜¯æ­£å¸¸çš„ã€‚<br>å®¢æˆ·ç«¯ç¬¬ä¸€æ¬¡å‘é€æ¡æ‰‹æ¶ˆæ¯åˆ°æœåŠ¡ç«¯ï¼Œ<br>æœåŠ¡ç«¯æ¥æ”¶åˆ°æ¡æ‰‹æ¶ˆæ¯åæŠŠackå’Œè‡ªå·±çš„synä¸€åŒå‘é€ç»™å®¢æˆ·ç«¯ï¼Œè¿™æ˜¯ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼Œ<br>å½“å®¢æˆ·ç«¯æ¥æ”¶åˆ°æœåŠ¡ç«¯å‘é€æ¥çš„ç¬¬äºŒæ¬¡æ¡æ‰‹æ¶ˆæ¯åï¼Œå®¢æˆ·ç«¯å¯ä»¥ç¡®è®¤â€œæœåŠ¡ç«¯çš„æ”¶å‘èƒ½åŠ›OKï¼Œå®¢æˆ·ç«¯çš„æ”¶å‘èƒ½åŠ›OKâ€ï¼Œä½†æ˜¯æœåŠ¡ç«¯åªèƒ½ç¡®è®¤â€œå®¢æˆ·ç«¯çš„å‘é€OKï¼ŒæœåŠ¡ç«¯çš„æ¥æ”¶OKâ€ï¼Œ<br>æ‰€ä»¥è¿˜éœ€è¦ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼Œå®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡ç«¯çš„ç¬¬äºŒæ¬¡æ¡æ‰‹æ¶ˆæ¯åï¼Œå‘èµ·ç¬¬ä¸‰æ¬¡æ¡æ‰‹æ¶ˆæ¯ï¼ŒæœåŠ¡ç«¯æ”¶åˆ°å®¢æˆ·ç«¯å‘é€çš„ç¬¬ä¸‰æ¬¡æ¡æ‰‹æ¶ˆæ¯åï¼Œå°±èƒ½å¤Ÿç¡®å®šâ€œæœåŠ¡ç«¯çš„å‘é€OKï¼Œå®¢æˆ·ç«¯çš„æ¥æ”¶OKâ€ï¼Œ<br>è‡³æ­¤ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯éƒ½èƒ½å¤Ÿç¡®è®¤è‡ªå·±å’Œå¯¹æ–¹çš„æ”¶å‘èƒ½åŠ›OKï¼Œï¼Œtcpè¿æ¥å»ºç«‹å®Œæˆã€‚","like_count":187,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462150,"discussion_content":"èµ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565576410,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1116630,"avatar":"https://static001.geekbang.org/account/avatar/00/11/09/d6/5f366427.jpg","nickname":"ç å†œKevinäº®","note":"","ucode":"D34562461CA0A1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":7084,"discussion_content":"&#34;ç¡®è®¤åŒæ–¹çš„æ”¶å‘èƒ½åŠ›éƒ½OK&#34;ï¼Œè¿™æ˜¯æˆ‘è§è¿‡å¯¹ä¸‰æ¬¡æ¡æ‰‹å¿…è¦æ€§çš„æœ€å¥½è§£é‡Šï¼èµï¼ï¼ï¼","likes_number":8,"is_delete":false,"is_hidden":false,"ctime":1567345802,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1019254,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8d/76/994a9929.jpg","nickname":"OlafOO","note":"","ucode":"105F8B194ED37B","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":321994,"discussion_content":"\nè¿™ä¹ˆç†è§£æœ‰ç‚¹é—®é¢˜çš„ï¼Œä¸‰æ¬¡æ¡æ‰‹ä¸»è¦æ˜¯ä¸ºäº†é¿å…å»ºç«‹é‡å¤è¿æ¥\n\n> The principle reason for the three-way handshake is to prevent old duplicate connection initiations from causing confusion.","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1604659454,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1299095,"avatar":"https://static001.geekbang.org/account/avatar/00/13/d2/97/5f4cd8da.jpg","nickname":"è™è™ç”Ÿå¨çš„ç¨‹åšå¼º","note":"","ucode":"321C89298D3682","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1019254,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8d/76/994a9929.jpg","nickname":"OlafOO","note":"","ucode":"105F8B194ED37B","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":578708,"discussion_content":"æ˜¯çš„ï¼Œè¿™ä¸ªæ‰æ˜¯æœ€ä¸»è¦çš„ï¼Œæºç é¢å‰ï¼Œäº†æ— ç§˜å¯†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656986795,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":321994,"ip_address":""},"score":578708,"extra":""}]},{"author":{"id":1995515,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/72/fb/e918f97f.jpg","nickname":"coder67","note":"","ucode":"21EB2FAD7952D6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":379019,"discussion_content":"ä¸ºäº†é˜²æ­¢å·²å¤±æ•ˆçš„è¿æ¥è¯·æ±‚æŠ¥æ–‡æ®µçªç„¶åˆä¼ é€åˆ°äº†æœåŠ¡ç«¯ï¼Œå› è€Œäº§ç”Ÿé”™è¯¯ã€‚\nhttps://www.zhihu.com/question/24853633/answer/63668444","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1623597126,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2128686,"avatar":"https://static001.geekbang.org/account/avatar/00/20/7b/2e/e3facf52.jpg","nickname":"CCC","note":"","ucode":"B7064B564F8ECB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":304669,"discussion_content":"ç¡®ä¿å„è‡ªçš„æ”¶å‘æ¶ˆæ¯çš„èƒ½åŠ›ï¼èµ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1599638241,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1834181,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/fc/c5/ff8b770e.jpg","nickname":"BugBean","note":"","ucode":"B51232281AD9BC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":300032,"discussion_content":"è¿™ä¸ªè§£é‡Šæ˜¯æˆ‘çœ‹è¿‡æœ€å®¹æ˜“ç†è§£çš„","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1597915001,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2275516,"avatar":"https://static001.geekbang.org/account/avatar/00/22/b8/bc/d2d547c9.jpg","nickname":"æˆä¸ºä¼˜ç§€çš„ç¨‹åºå‘˜","note":"","ucode":"6D9080A2B225AE","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":563063,"discussion_content":"èµ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649933115,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2119325,"avatar":"https://static001.geekbang.org/account/avatar/00/20/56/9d/4b2a7d29.jpg","nickname":"ryanxw","note":"","ucode":"0B91EAC8D06EED","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":545895,"discussion_content":"è¿›ä¸€æ­¥è§£é‡Šäº†tcpæ˜¯åŒå‘çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642074587,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1147453,"avatar":"https://static001.geekbang.org/account/avatar/00/11/82/3d/356fc3d6.jpg","nickname":"å¿†æ°´å¯’","note":"","ucode":"E3F86BD8AA8903","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":302027,"discussion_content":"https://mp.weixin.qq.com/s/wf1zYOrsbI0T-9cUWMOhKg è¿™ä¸ªé‡Œé¢ä¹Ÿå†™åˆ°äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598763919,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1362659,"avatar":"https://static001.geekbang.org/account/avatar/00/14/ca/e3/447aff89.jpg","nickname":"è®°äº‹æœ¬","note":"","ucode":"76F2CAFA309437","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":91514,"discussion_content":"å…¶å®å°±æ˜¯åŒæ–¹ç¡®è®¤ä¸‹ï¼Œæˆ‘å‘çš„ä½ èƒ½æ”¶åˆ°  ä½ å‘çš„æˆ‘ä¹Ÿèƒ½æ”¶åˆ°ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576837877,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1016905,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/84/49/47d48fd0.jpg","nickname":"è§‚å¼ˆé“äºº","note":"","ucode":"F3BB619A33C605","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":81814,"discussion_content":"è¿™ä¸ªè¯´æ³•åº”è¯¥æ˜¯åˆ˜æ¬£æ–‡ç« æçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576284001,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1350902,"avatar":"https://static001.geekbang.org/account/avatar/00/14/9c/f6/30dfdc9f.jpg","nickname":"Mark","note":"","ucode":"D60E5269080BA9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":9473,"discussion_content":"è¯·æ•™ï¼Œä»€ä¹ˆæƒ…å†µä¸‹å‡ºç°æœ‰å‘é€èƒ½åŠ›æ²¡æœ‰æ¥æ”¶èƒ½åŠ›ï¼Œæˆ–è€…æœ‰æ¥æ”¶èƒ½åŠ›æ²¡æœ‰å‘é€èƒ½åŠ›ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568171830,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1003150,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/4e/8e/f4297447.jpg","nickname":"å´æ–‡æ•","note":"","ucode":"A4303003E547D1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6527,"discussion_content":"èµï¼åˆšæƒ³é—®è€å¸ˆä¸¤æ¬¡æ¡æ‰‹ä¸å°±è¡Œäº†ï¼Œä¸ºå•¥éœ€è¦ç¬¬ä¸‰æ¬¡ã€‚å°±çœ‹åˆ°ç­”æ¡ˆäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566956626,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1621237,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/KlRHXbAWiaqTUgibUF25O0iacTpaQvDfOuLq4I5XTK42ZyrEKojlJyBXXQ7z9G3Fznq7hlNibK7jrjr5xia6BuCYIfg/132","nickname":"Geek_Claire","note":"","ucode":"796686B4E33EA5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4480,"discussion_content":"ç¡®å®å¦‚æ­¤ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯éœ€è¦ç¡®å®šå„è‡ªçš„å‘é€ã€æ¥æ”¶èƒ½åŠ›ï¼Œè¿™åº”è¯¥æ‰æ˜¯ä¸‰æ¬¡æ¡æ‰‹çš„å…³é”®ï¼Œä¸‰æ¬¡ä¹‹åï¼Œå°±ç¡®è®¤okäº†ï¼Œå¤šäº†æµªè´¹ï¼Œå°‘äº†ä¸å¤Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565453541,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122203,"user_name":"é˜¿å¡ç‰›","can_delete":false,"product_type":"c1","uid":1022247,"ip_address":"","ucode":"0BC43A904C3199","user_header":"https://static001.geekbang.org/account/avatar/00/0f/99/27/47aa9dea.jpg","comment_is_top":false,"comment_ctime":1565315759,"is_pvip":false,"replies":[{"id":"45140","content":"èµã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1565576228,"ip_address":"","comment_id":122203,"utype":1}],"discussion_count":4,"race_medal":0,"score":"358047601327","product_id":100032701,"comment_content":"è¿™ä¸ªé—®é¢˜çš„æœ¬è´¨æ˜¯, ä¿¡é“ä¸å¯é , ä½†æ˜¯é€šä¿¡åŒå‘éœ€è¦å°±æŸä¸ªé—®é¢˜è¾¾æˆä¸€è‡´. è€Œè¦è§£å†³è¿™ä¸ªé—®é¢˜, æ— è®ºä½ åœ¨æ¶ˆæ¯ä¸­åŒ…å«ä»€ä¹ˆä¿¡æ¯, ä¸‰æ¬¡é€šä¿¡æ˜¯ç†è®ºä¸Šçš„æœ€å°å€¼. æ‰€ä»¥ä¸‰æ¬¡æ¡æ‰‹ä¸æ˜¯TCPæœ¬èº«çš„è¦æ±‚, è€Œæ˜¯ä¸ºäº†æ»¡è¶³&quot;åœ¨ä¸å¯é ä¿¡é“ä¸Šå¯é åœ°ä¼ è¾“ä¿¡æ¯&quot;è¿™ä¸€éœ€æ±‚æ‰€å¯¼è‡´çš„","like_count":84,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462146,"discussion_content":"èµã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565576228,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1940453,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/9b/e5/bd0be5c3.jpg","nickname":"â¶â‚†â¶â‚†â¶â‚†","note":"","ucode":"25AE3F77318541","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":216656,"discussion_content":"åœ¨ä¸å¯é çš„ä¿¡é“ä¸Šå¯é çš„ä¼ è¾“ä¿¡æ¯ï¼Œç¡®å®æ˜¯å¯¹TCPä¸‰æ¬¡æ¡æ‰‹æœ€ç»å…¸çš„æ€»ç»“","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1585473503,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2184325,"avatar":"https://static001.geekbang.org/account/avatar/00/21/54/85/ab5148ce.jpg","nickname":"duckman","note":"","ucode":"0184C26C4B6C1B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1940453,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/9b/e5/bd0be5c3.jpg","nickname":"â¶â‚†â¶â‚†â¶â‚†","note":"","ucode":"25AE3F77318541","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":331299,"discussion_content":"åœ¨ä¸å¯é çš„ä¿¡é“ä¸Šå®ç°å¯é çš„æ¶ˆæ¯ä¼ è¾“","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606825241,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":216656,"ip_address":""},"score":331299,"extra":""}]},{"author":{"id":1235967,"avatar":"https://static001.geekbang.org/account/avatar/00/12/db/ff/7043a067.jpg","nickname":"ç¼–ç¨‹æŒ‡åŒ—","note":"","ucode":"FDBAEE3500D689","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5042,"discussion_content":"èƒŒå¾—ä¸é”™ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565913365,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122735,"user_name":"å½­ä¿Š","can_delete":false,"product_type":"c1","uid":1054541,"ip_address":"","ucode":"FBEDBCCF22F1D0","user_header":"https://static001.geekbang.org/account/avatar/00/10/17/4d/7e13ec93.jpg","comment_is_top":false,"comment_ctime":1565509408,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"250673612576","product_id":100032701,"comment_content":"å¦‚ä½•ä½¿ç”¨éé˜»å¡è°ƒç”¨å¥—æ¥å­—:ä½¿ç”¨fcntlå‡½æ•°è®¾ç½®å¥—æ¥å­—çš„å±æ€§fcntl(fd, F_SETFL, flags)ï¼›<br>éé˜»å¡è°ƒç”¨çš„ ä½¿ç”¨çš„åœºæ™¯ï¼šç¨‹åºåœ¨è°ƒç”¨è¿”å›ä¹‹å‰ï¼Œéœ€è¦åšå…¶ä»–äº‹æƒ…ï¼Œå¯ä»¥é€‰æ‹©ç”¨å®šæ—¶è½®è¯¢æˆ–äº‹ä»¶é€šçŸ¥çš„æ–¹å¼è·å–è°ƒç”¨ç»“æœã€‚<br>æ˜¯å¦å¯ä»¥è°ƒç”¨bind å‡½æ•°ï¼šå¯ä»¥ï¼Œä½†æ˜¯è°ƒç”¨bindå‡½æ•°ï¼Œä¹Ÿå°±æ˜¯å®¢æˆ·ç«¯æŒ‡å®šäº†ç«¯å£å·ï¼Œè¿™æ ·å®¹æ˜“é€ æˆç«¯å£å†²çªï¼Œæ‰€ä»¥å®¢æˆ·ç«¯ä¸è°ƒç”¨bindå‡½æ•°ï¼Œè®©ç³»ç»Ÿè‡ªåŠ¨é€‰æ‹©ç©ºé—²ç«¯å£æ¯”è¾ƒå¥½","like_count":59,"discussions":[{"author":{"id":2315935,"avatar":"https://static001.geekbang.org/account/avatar/00/23/56/9f/1e724dd0.jpg","nickname":"ã€‚","note":"","ucode":"122B29FADAE570","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":325758,"discussion_content":"éé˜»å¡ä¹Ÿå¯ä»¥é€šè¿‡ç»™socketç³»ç»Ÿè°ƒç”¨çš„ç¬¬äºŒä¸ªå‚æ•°ä¼ é€’SOCK_NONBLOCKæ ‡å¿—å®ç°","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1605426329,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1980201,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/37/29/b3af57a7.jpg","nickname":"å‡¯æ–‡å°çŒª","note":"","ucode":"36D8AD0229547F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":393303,"discussion_content":"å¯¹çš„ å¯¹äºé€šä¿¡äº”å…ƒç»„æ¥è¯´ å®¢æˆ·ç«¯ä¿¡æ¯ä¸­çš„ç«¯å£å·æ˜¯éšæœºç”Ÿæˆçš„ã€‚å½“ç„¶ç¡¬è¦æ‰‹åŠ¨ç»‘å®šä¸€ä¸ªä¹Ÿæ²¡ä»€ä¹ˆé—®é¢˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631347837,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":125589,"user_name":"leesper","can_delete":false,"product_type":"c1","uid":1351104,"ip_address":"","ucode":"CC76320571BECA","user_header":"https://static001.geekbang.org/account/avatar/00/14/9d/c0/cb5341ec.jpg","comment_is_top":false,"comment_ctime":1566207789,"is_pvip":false,"replies":[{"id":"47897","content":"èµï¼Œä¸‹é¢çš„å†…å®¹ä¼šè®²åˆ°è¿™éƒ¨åˆ†äº†","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1567003223,"ip_address":"","comment_id":125589,"utype":1}],"discussion_count":1,"race_medal":0,"score":"207724637997","product_id":100032701,"comment_content":"æ€è€ƒé¢˜1ï¼šéé˜»å¡è°ƒç”¨çš„åœºæ™¯å°±æ˜¯é«˜æ€§èƒ½æœåŠ¡å™¨ç¼–ç¨‹ï¼æˆ‘æ‰€æœ‰çš„è°ƒç”¨éƒ½ä¸éœ€è¦ç­‰å¾…å¯¹æ–¹å‡†å¤‡å¥½äº†å†è¿”å›ï¼Œè€Œæ˜¯ç«‹å³è¿”å›ï¼Œé‚£ä¹ˆæˆ‘æ€ä¹ˆçŸ¥é“æ˜¯å¦å‡†å¤‡å¥½äº†ï¼Ÿå°±æ˜¯æŠŠè¿™äº›fdæ³¨å†Œåˆ°ç±»ä¼¼selectæˆ–è€…epollè¿™æ ·çš„è°ƒç”¨ä¸­ï¼Œå˜å¤šä¸ªfdé˜»å¡ä¸ºä¸€ä¸ªfdé˜»å¡ï¼Œåªè¦æœ‰ä»»ä½•ä¸€ä¸ªfdå‡†å¤‡å¥½äº†ï¼Œselectæˆ–è€…epolléƒ½ä¼šè¿”å›ï¼Œç„¶åæˆ‘ä»¬åœ¨ä»ä¸­å–å‡ºå‡†å¤‡å¥½äº†çš„fdè¿›è¡Œå„ç§IOæ“ä½œï¼Œä»å®¹è‡ªç„¶ ^o^","like_count":49,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463620,"discussion_content":"èµï¼Œä¸‹é¢çš„å†…å®¹ä¼šè®²åˆ°è¿™éƒ¨åˆ†äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567003223,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":130152,"user_name":"é±¼å‘åŒ—æ¸¸","can_delete":false,"product_type":"c1","uid":1439908,"ip_address":"","ucode":"580EC7DCE57E9A","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/IPdZZXuHVMibwfZWmm7NiawzeEFGsaRoWjhuN99iaoj5amcRkiaOePo6rH1KJ3jictmNlic4OibkF4I20vOGfwDqcBxfA/132","comment_is_top":false,"comment_ctime":1567391832,"is_pvip":false,"replies":[{"id":"50838","content":"å¾ˆæ¸…æ¥šï¼Œå¾ˆç®€æ´ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1568196133,"ip_address":"","comment_id":130152,"utype":1}],"discussion_count":1,"race_medal":0,"score":"181956018264","product_id":100032701,"comment_content":"å…³äºä¸‰æ¬¡æ¡æ‰‹<br>å‡ å¥è¯è§£é‡Šæ¸…æ¥š<br>1.ä¿¡é“ä¸å®‰å…¨ ä¿è¯é€šä¿¡éœ€è¦ä¸€æ¥ä¸€å›<br>2.å®¢æˆ·ç«¯çš„æ¥å›å’ŒæœåŠ¡ç«¯çš„æ¥å› å…±å››æ¬¡ è¿™æ˜¯æœ€å¤šå››æ¬¡<br>3.å®¢æˆ·ç«¯çš„å›å’ŒæœåŠ¡ç«¯çš„æ¥åˆå¹¶æˆä¸€ä¸ªï¼Œå°±æ˜¯é‚£ä¸ªsync k ack j+1<br>4.è¿™æ ·å°±æ˜¯ä¸‰æ¬¡æ¡æ‰‹<br>","like_count":42,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465836,"discussion_content":"å¾ˆæ¸…æ¥šï¼Œå¾ˆç®€æ´ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568196133,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":170232,"user_name":"eddy","can_delete":false,"product_type":"c1","uid":1364645,"ip_address":"","ucode":"E71EE2FAD96000","user_header":"https://static001.geekbang.org/account/avatar/00/14/d2/a5/7acbd63a.jpg","comment_is_top":false,"comment_ctime":1578554673,"is_pvip":true,"replies":[{"id":"68061","content":"å®¢æˆ·ç«¯å‘çš„æ¶ˆæ¯æ˜¯ä»€ä¹ˆ?å¦‚æœä¸‰æ¬¡åº”ç­”æœåŠ¡å™¨æ²¡æœ‰æ”¶åˆ°ï¼ŒæœåŠ¡å™¨ç«¯è¿æ¥æ²¡æœ‰å»ºç«‹ï¼Œå®¢æˆ·ç«¯è¯¯è®¤ä¸ºå»ºç«‹äº†ï¼Œå‘é€çš„æŠ¥æ–‡åº”è¯¥ä¼šè¢«è®¾ç½®ä¸ºè¿æ¥RSTã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1580630360,"ip_address":"","comment_id":170232,"utype":1}],"discussion_count":5,"race_medal":0,"score":"113247704369","product_id":100032701,"comment_content":"æœ‰ä¸ªé—®é¢˜, ä¸€æ¬¡é¢è¯•ä¸­é‡åˆ°çš„, å®¢æˆ·ç«¯çš„ç¬¬ä¸‰æ¬¡åº”ç­”, æœåŠ¡å™¨æ²¡æœ‰æ”¶åˆ°, ç„¶åå®¢æˆ·ç«¯å¼€å§‹å‘æ¶ˆæ¯ç»™æœåŠ¡å™¨, è¿™æ—¶å€™æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯çš„è¡¨ç°æ˜¯ä»€ä¹ˆ? å®¢æˆ·ç«¯ä¼šæ”¶åˆ°ä»€ä¹ˆè¿”å›?","like_count":27,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480895,"discussion_content":"å®¢æˆ·ç«¯å‘çš„æ¶ˆæ¯æ˜¯ä»€ä¹ˆ?å¦‚æœä¸‰æ¬¡åº”ç­”æœåŠ¡å™¨æ²¡æœ‰æ”¶åˆ°ï¼ŒæœåŠ¡å™¨ç«¯è¿æ¥æ²¡æœ‰å»ºç«‹ï¼Œå®¢æˆ·ç«¯è¯¯è®¤ä¸ºå»ºç«‹äº†ï¼Œå‘é€çš„æŠ¥æ–‡åº”è¯¥ä¼šè¢«è®¾ç½®ä¸ºè¿æ¥RSTã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580630360,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1625233,"avatar":"https://static001.geekbang.org/account/avatar/00/18/cc/91/d56a81af.jpg","nickname":"CoderArthur","note":"","ucode":"5B591914F0F67C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":279777,"discussion_content":"https://blog.csdn.net/yrx420909/article/details/104483455ï¼š\nå¦‚æœ ç¬¬ä¸‰æ¬¡æ¡æ‰‹ä¸­çš„ACKåŒ…ä¸¢å¤±çš„æƒ…å†µä¸‹ï¼ŒClient å‘ serverç«¯å‘é€æ•°æ®ï¼ŒServerç«¯å°†ä»¥ RSTåŒ…å“åº”ï¼Œæ–¹èƒ½æ„ŸçŸ¥åˆ°Serverçš„é”™è¯¯","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1591414752,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1038449,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/d8/71/d6f79534.jpg","nickname":"ä¸€ä¸ªå·¥åŒ ","note":"","ucode":"2168BA6F926074","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":252167,"discussion_content":"è¿™ä¸ªç›¸å½“äºæŠ¢è·‘ï¼Œç¬¬ä¸‰æ¬¡åº”ç­”æœåŠ¡å™¨æ²¡æœ‰æ”¶åˆ°ï¼Œä½†æ˜¯å´æ”¶åˆ°äº†å®¢æˆ·ç«¯å‘é€è¿‡æ¥çš„æ•°æ®ï¼Œè¿™ä¸ªæ—¶å€™æœåŠ¡å™¨è®¤ä¸ºå®¢æˆ·ç«¯å·²ç»å‘é€äº†ä¸‰æ¬¡åº”ç­”ï¼Œåªæ˜¯åº”ç­”åŒ…æ¯”è¾ƒæ…¢æˆ–è€…ä¸¢äº†ã€‚ä½†æ˜¯å·²ç»æ”¶åˆ°äº†çœŸå®æ•°æ®ï¼Œæ‰€ä»¥è®¤ä¸ºè¿æ¥å·²ç»å»ºç«‹ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1588143948,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2110700,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/48eaCVUquJocEgGic0fa2jBJF4iaFujtKz7YevNfelPeq3DvLXhHJDrGohFcATTw3Bt5YctNTZwVqeT4lqIofXJA/132","nickname":"å¦‚ä½•","note":"","ucode":"BBEC043F5A1998","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":586257,"discussion_content":"å®¢æˆ·ç«¯åœ¨ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼Œæ”¶åˆ°äº†syn+ackåï¼Œconnectå°±ä¼šè¿”å›ï¼Œå®ƒçš„TCPè¿æ¥çŠ¶æ€å°±æ˜¯ESTABLISHEDï¼Œè¿™æ—¶å®ƒå‘æœåŠ¡ç«¯å‘é€æ•°æ®ï¼Œä¼šæ”¶åˆ°RETåŒ…ï¼Œæ„ŸçŸ¥åˆ°æœåŠ¡å™¨çš„é”™è¯¯ï¼›è€ŒæœåŠ¡ç«¯å‘å‘å‡ºç¬¬äºŒæ¬¡æ¡æ‰‹çš„syn+ackåŒ…ï¼Œæ²¡æœ‰æ”¶åˆ°å“åº”ï¼Œä¼šå¯ç”¨TCPè¶…æ—¶é‡ä¼ æœºåˆ¶ï¼Œç»§ç»­å‘é€syn+ackåŒ…ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662082738,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æ¹–å—"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1002005,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/4a/15/106eaaa8.jpg","nickname":"stackWarn","note":"","ucode":"89672E452DEBA5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":292953,"discussion_content":"åº”è¯¥æ˜¯æœåŠ¡ç«¯é‡ä¼ syn ack.","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595395638,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122248,"user_name":"fjpcode","can_delete":false,"product_type":"c1","uid":1306092,"ip_address":"","ucode":"C32C5E3ECB9A90","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ61zTDmLk7IhLJn6seBPOwsVaKIWUWaxk5YmsdYBZUOYMQCsyl9iaQVSg9U5qJVLLOCFUoLUuYnRA/132","comment_is_top":false,"comment_ctime":1565322439,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"78874733767","product_id":100032701,"comment_content":"1. éé˜»å¡å¥—æ¥å­—å¾€å¾€é…åˆå¤šè·¯å¤ç”¨æœºåˆ¶ï¼Œè¾¾åˆ°æé«˜CPUåˆ©ç”¨ç‡ï¼Œå®ç°é«˜å¹¶å‘çš„ç›®çš„ã€‚<br>2. å®¢æˆ·ç«¯åšbindå½“ç„¶æ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯å› ä¸ºè¿æ¥è¯·æ±‚å¾€å¾€æ˜¯ç”±å®¢æˆ·ç«¯ä¸»åŠ¨å‘èµ·çš„ï¼Œæ‰€ä»¥åœ¨å®¢æˆ·ç«¯åšbindæ˜¾å¾—ä¸é‚£ä¹ˆå¿…è¦ï¼Œè¿˜è¦æ‰¿æ‹…ç«¯å£å†²çªçš„é£é™©ã€‚","like_count":19},{"had_liked":false,"id":153290,"user_name":"é’±","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1574211256,"is_pvip":false,"replies":[{"id":"59334","content":"ğŸ‚ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1574498637,"ip_address":"","comment_id":153290,"utype":1}],"discussion_count":1,"race_medal":0,"score":"48818851512","product_id":100032701,"comment_content":"å­¦å®Œè¿™èŠ‚ï¼Œæ„Ÿè§‰TCPçš„ä¸‰æ¬¡æ¡æ‰‹æœºåˆ¶ï¼Œæ›´æ˜ç™½äº†ä¸€äº›ï¼Œç›¸ä¿¡æ­¤ç”Ÿéƒ½ä¼šè®°å¾—ï¼Œå…»æˆäº†ç¿»è¯„è®ºçš„ä¹ æƒ¯ï¼Œæ„Ÿè§‰æœ‰äº›åŒå­¦çš„è§£é‡Šæ¯”è€å¸ˆçš„è¿˜è¦é€šä¿—æ˜“æ‡‚ã€‚<br>æˆ‘çš„å°ç»“å¦‚ä¸‹ï¼Œå‡è®¾åªæœ‰å®¢æˆ·ç«¯Cå’ŒæœåŠ¡ç«¯Sï¼Œä¸¤å°æœºå™¨ï¼š<br>1ï¼šå•¥æ˜¯TCPçš„ä¸‰æ¬¡æ¡æ‰‹æœºåˆ¶ï¼Ÿ<br>TCPçš„ä¸‰æ¬¡æ¡æ‰‹æœºåˆ¶ï¼Œæ˜¯Cå’ŒSä½¿ç”¨TCPåè®®è¿›è¡Œé€šä¿¡ï¼Œä»–ä»¬åœ¨æ­£å¼å»ºç«‹é“¾æ¥å‰ï¼Œå…ˆè¿›è¡Œäº†ä¸‰æ¬¡ç®€å•çš„é€šä¿¡ï¼Œåªæœ‰è¿™ä¸‰æ¬¡ç®€å•çš„åŒå­¦æˆåŠŸäº†ï¼Œæ‰å»ºç«‹æ­£å¼çš„è¿æ¥ï¼Œä¹‹æ‰€ä»¥è¯´æ˜¯ç®€å•çš„é€šä¿¡ï¼Œå› ä¸ºè¿™ä¸‰æ¬¡é€šä¿¡å‘é€çš„æ¶ˆæ¯æ¯”è¾ƒç®€å•ï¼Œå°±æ˜¯å›ºå®šæ ¼å¼çš„åŒæ­¥æŠ¥æ–‡å’Œç¡®è®¤æŠ¥æ–‡<br><br>2ï¼šTCPçš„ä¸‰æ¬¡æ¡æ‰‹æœºåˆ¶çš„ç›®çš„æ˜¯å•¥ï¼Ÿ<br>TCPåè®®çš„è®¾è®¡ç›®æ ‡ä¹‹ä¸€ï¼Œå°±æ˜¯ä¿è¯é€šä¿¡ä¿¡é“çš„å®‰å…¨ï¼Œè€ŒTCPçš„ä¸‰æ¬¡æ¡æ‰‹æœºåˆ¶å°±æ˜¯ç”¨äºç¡®è®¤ä¿¡é“æ˜¯å¦å®‰å…¨çš„æ‰‹æ®µä¹‹ä¸€ï¼Œç¡®è®¤ä¿¡é“å®‰å…¨ï¼Œæœ€åŸºæœ¬çš„é¦–å…ˆè¦ç¡®è®¤Cå’ŒSéƒ½å…·å¤‡ä¿¡æ¯é¦–å‘çš„èƒ½åŠ›å§ï¼ä¹Ÿå°±æ˜¯Cè¦ç¡®å®šSèƒ½æ”¶å‘ä¿¡æ¯ï¼ŒSè¦ç¡®å®šCèƒ½æ”¶å‘ä¿¡æ¯ï¼Œå’‹ç¡®è®¤å‘¢ï¼Ÿé‚£å°±å‘é€ä¸€æ¡æ¶ˆæ¯å®éªŒä¸€ä¸‹å‘—ï¼æ‰€ä»¥ï¼Œå°±æœ‰äº†TCPçš„ä¸‰æ¬¡æ¡æ‰‹æœºåˆ¶ï¼ŒTCPçš„ä¸‰æ¬¡æ¡æ‰‹æœºåˆ¶çš„æ ¸å¿ƒç›®æ ‡å°±æ˜¯è¦ç¡®è®¤Cå’ŒSä¹‹é—´çš„é€šä¿¡ä¿¡é“æ˜¯å®‰å…¨çš„ã€‚<br><br>3ï¼šä¸ºå•¥æ˜¯ä¸‰æ¬¡ï¼Ÿ<br>æŒ‰é“ç†æ¥è®²ï¼ŒCè¦ç¡®è®¤Sæ˜¯å¦èƒ½å¤Ÿæ­£ç¡®çš„æ”¶å‘æ¶ˆæ¯ï¼Œéœ€è¦å‘ç”Ÿä¸€æ¡æ¶ˆæ¯ç»™Sï¼Œç„¶åæ¥æ”¶åˆ°Sçš„ä¸€æ¡ç¡®è®¤æ”¶åˆ°çš„æ¶ˆæ¯æ‰è¡Œï¼Œè¿™ä¸€æ¥ä¸€å›å°±æ˜¯ä¸¤æ¡æ¶ˆæ¯ã€‚åŒç†ï¼ŒSè¦ç¡®è®¤Cæ˜¯å¦èƒ½å¤Ÿæ­£ç¡®çš„æ”¶å‘æ¶ˆæ¯ï¼Œä¹Ÿéœ€è¦è¿™ä¹ˆç©ã€‚è¿™æ ·å°±éœ€è¦ä¸¤è¶Ÿä¸€æ¥ä¸€å›ï¼Œæ€»å…±éœ€è¦å››æ¬¡é€šä¿¡ï¼Œå…¶å®è¿™ä¹ˆç©æ€ç»´ä¸Šä¸€ç‚¹è´Ÿè½½éƒ½æ˜¯æ²¡æœ‰çš„è‡ªç„¶è€Œç„¶ã€‚<br>ä¸è¿‡åªæ˜¯ä¸ºäº†ç¡®è®¤Cå’ŒSèƒ½å¦æ­£å¸¸é€šä¿¡çš„è¯ï¼Œå°±å¦‚æ­¤è®¾è®¡ï¼Œè¢«èªæ˜ä¸€çœ‹åˆ°å°±ä¼šéª‚å‚»Xï¼Œäººç±»å­œå­œä¸å€¦æ‰€è¿½æ±‚æ˜¯æ›´å¿«ã€æ›´é«˜ã€æ›´å¼ºï¼Œè®¡ç®—æœºä¸–ç•Œä¸­è¿™ç§è¿½æ±‚æ›´åŠ çš„å¼ºçƒˆï¼Œå°†Sçš„ç¡®è®¤æ”¶åˆ°Cå‘é€çš„æ¶ˆæ¯å’ŒSèƒ½æ­£å¸¸å‘ç”Ÿçš„æ¶ˆæ¯ä¸€æ¬¡æ€§çš„éƒ½å‘ç»™Cå²‚ä¸æ˜¯æ›´å¥½ï¼Œè™½ç„¶å¢åŠ äº†ç‚¹æ¶ˆæ¯çš„å†…å®¹ï¼Œä½†æ˜¯ç›¸å¯¹äºæ¶ˆæ¯çš„ä¼ è¾“æ¶ˆè€—è€Œè¨€è¿˜æ˜¯éå¸¸å°‘çš„ï¼Œè€Œä¸”ä»æ•´ä½“æ¶ˆè€—ä¸Šçœ‹ï¼Œæ˜¯å‡å°‘äº†ä¸€æ¬¡é€šä¿¡çš„è¿‡ç¨‹ï¼Œæ€§èƒ½æƒ³å¿…ä¼šæ›´å¥½ã€‚<br>å¾ˆæ˜æ˜¾ä¸€æ¬¡æ¡æ‰‹ã€ä¸¤æ¬¡æ¡æ‰‹éƒ½ç¡®è®¤ä¸äº†Cå’ŒSçš„æ”¶å‘æ¶ˆæ¯çš„èƒ½åŠ›æ˜¯å¦OKã€‚ä¸‰æ¬¡æ¡æ‰‹æ˜¯æ¯”è¾ƒç®€æ´æœ‰æ•ˆçš„æ–¹å¼ï¼Œå¤§äºä¸‰æ¬¡ä¹‹ä¸Šçš„æ¡æ‰‹æœºåˆ¶ä¹Ÿå¯ä»¥ç¡®è®¤Cå’ŒSæ˜¯å¦èƒ½å¤Ÿæ­£å¸¸é€šä¿¡ï¼Œä¸è¿‡æœ‰äº›æµªè´¹èµ„æºäº†ï¼Œæ¯•ç«Ÿä¸‰æ¬¡å°±èƒ½æå®šçš„äº‹æƒ…ï¼Œæ²¡å¿…è¦æä¸‰æ¬¡è‡³å°‘ï¼Œæ¯•ç«Ÿå¯¹äºæ€§èƒ½çš„è¿½æ±‚æˆ‘ä»¬æ˜¯çº³ç§’å¿…äº‰çš„ã€‚","like_count":12,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475109,"discussion_content":"ğŸ‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574498637,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":217239,"user_name":"rongyefeng","can_delete":false,"product_type":"c1","uid":1959482,"ip_address":"","ucode":"9A15D947E9D645","user_header":"https://static001.geekbang.org/account/avatar/00/1d/e6/3a/382cf024.jpg","comment_is_top":false,"comment_ctime":1589446043,"is_pvip":false,"replies":[{"id":"80641","content":"æˆ‘æŸ¥çœ‹äº†ä¸€ä¸‹èµ„æ–™ï¼Œåœ¨Linuxä¸­backlogç¡®å®è¡¨ç¤ºçš„æ˜¯å·²å®Œæˆ(ESTABLISHED)ä¸”æœªacceptçš„é˜Ÿåˆ—å¤§å°ã€‚è€ŒFreeBSDçš„å®ç°æ˜¯ä¸åŒçš„ï¼Œå·²ç»å‹˜è¯¯ä¿®æ”¹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1589707452,"ip_address":"","comment_id":217239,"utype":1}],"discussion_count":4,"race_medal":0,"score":"40244151707","product_id":100032701,"comment_content":"Linuxå†…æ ¸2.2ä¹‹åï¼Œsocket backlogå‚æ•°çš„å½¢ä¸ºæ”¹å˜äº†ï¼Œç°åœ¨å®ƒæŒ‡ç­‰å¾…acceptçš„å®Œå…¨å»ºç«‹çš„å¥—æ¥å­—çš„é˜Ÿåˆ—é•¿åº¦ï¼Œè€Œä¸æ˜¯ä¸å®Œå…¨è¿æ¥è¯·æ±‚çš„æ•°é‡ã€‚ ä¸å®Œå…¨è¿æ¥çš„é•¿åº¦å¯ä»¥ä½¿ç”¨&#47;proc&#47;sys&#47;net&#47;ipv4&#47;tcp_max_syn_backlogè®¾ç½®ã€‚<br>è€å¸ˆï¼Œè¿™é‡Œä½ è®²çš„backlogæ˜¯æœªå®Œæˆè¿æ¥çš„é˜Ÿåˆ—ï¼Œæ˜¯ä¸æ˜¯æœ‰è¯¯ï¼Ÿ","like_count":9,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":495087,"discussion_content":"æˆ‘æŸ¥çœ‹äº†ä¸€ä¸‹èµ„æ–™ï¼Œåœ¨Linuxä¸­backlogç¡®å®è¡¨ç¤ºçš„æ˜¯å·²å®Œæˆ(ESTABLISHED)ä¸”æœªacceptçš„é˜Ÿåˆ—å¤§å°ã€‚è€ŒFreeBSDçš„å®ç°æ˜¯ä¸åŒçš„ï¼Œå·²ç»å‹˜è¯¯ä¿®æ”¹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589707452,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1024294,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaELZPnUAiajaR5C25EDLWeJURggyiaOP5GGPe2qlwpQcm5e3ybib8OsP4tvddFDLVRSNNGL5I3SFPJHsA/132","nickname":"null","note":"","ucode":"F9039EFED6B55D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":388014,"discussion_content":"å·²å®Œæˆ(ESTABLISHED)ä¸”æœªacceptï¼Œæ˜¯æŒ‡å®¢æˆ·ç«¯çŠ¶æ€æ˜¯ESTABLISHEDä¹ˆï¼Ÿå³â€œä¸‰æ¬¡æ¡æ‰‹â€çš„æµç¨‹ï¼Œå®Œæˆäº†â€œç¬¬äºŒæ¬¡æ¡æ‰‹â€ã€‚æ­¤æ—¶å®¢æˆ·ç«¯å›å¤ ACKï¼ŒæœåŠ¡ç«¯æ”¶åˆ°åï¼Œå°±è®¤ä¸ºæ˜¯acceptæˆåŠŸäº†ï¼Œæ˜¯è¿™æ ·ä¹ˆï¼Ÿ\nè°¢è°¢ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628556918,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2184325,"avatar":"https://static001.geekbang.org/account/avatar/00/21/54/85/ab5148ce.jpg","nickname":"duckman","note":"","ucode":"0184C26C4B6C1B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":331303,"discussion_content":"backlogå‚æ•°æ˜¯å¦å¯ä»¥ç†è§£ä¸º ç»™æŒ‡å®šè¿›ç¨‹è®¾ç½®çš„ ä¸TCPè¿æ¥ç›¸å…³çš„ ç¼“å­˜é˜Ÿåˆ—çš„å¤§å°?\n\næ“ä½œç³»ç»Ÿè´Ÿè´£å°†æŒ‡å®šçš„TCPè¿æ¥åˆ†é…ç»™æŒ‡å®šçš„è¿›ç¨‹ã€‚ä½†æ˜¯è¿›ç¨‹çš„å¤„ç†èƒ½åŠ›æ˜¯æœ‰é™çš„ï¼Œä¼šæ ¹æ®è‡ªå·±çš„èƒ½åŠ›ä»&#34;TCPè¿æ¥æ± &#34;ä¸­æ‹¿TCPè¿æ¥(é€šè¿‡acceptç³»ç»Ÿè°ƒç”¨)ã€‚\n\nå› ä¸º ç”Ÿäº§è€… å’Œ æ¶ˆè´¹è€…  çš„å¤„ç†é€Ÿåº¦ä¸åŒ¹é… æ‰€ä»¥éœ€è¦ è¿æ¥æ±  æˆ–è€…æ¶ˆæ¯é˜Ÿåˆ— çš„æ¦‚å¿µï¼Œ è€Œbacklog å°±æ˜¯ è¿™ä¸ª è¿æ¥æ±  æˆ–è€… æ¶ˆæ¯é˜Ÿåˆ—çš„å¤§å°ï¼Ÿ\n\nå¦‚æœ è¶…å‡ºäº†backlogçš„å¤§å°ï¼Œé‚£ä¹ˆè¿™ä¸ªå®¢æˆ·ç«¯å‘æ¥çš„TCPè¿æ¥ä¼šå¦‚ä½•å¤„ç†å‘¢ï¼Ÿè¢«ä¸¢å¼ƒå—?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606826005,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1959482,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/e6/3a/382cf024.jpg","nickname":"rongyefeng","note":"","ucode":"9A15D947E9D645","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":267902,"discussion_content":"å¥½çš„ï¼Œè°¢è°¢è€å¸ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589707495,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":184592,"user_name":"dan","can_delete":false,"product_type":"c1","uid":1195044,"ip_address":"","ucode":"515A904FB55FFA","user_header":"https://static001.geekbang.org/account/avatar/00/12/3c/24/ceac00af.jpg","comment_is_top":false,"comment_ctime":1583368001,"is_pvip":false,"replies":[{"id":"71704","content":"è§£è¯´çš„éå¸¸å½¢è±¡ï¼Œç‚¹èµã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1583657670,"ip_address":"","comment_id":184592,"utype":1}],"discussion_count":1,"race_medal":0,"score":"27353171777","product_id":100032701,"comment_content":"&quot;è¯·é—®èƒ½å¬è§å—&quot;&quot;æˆ‘èƒ½å¬è§ä½ çš„å£°éŸ³ï¼Œä½ èƒ½å¬è§æˆ‘çš„å£°éŸ³å—&quot;<br>Aå…ˆå¯¹Bï¼šä½ åœ¨ä¹ˆï¼Ÿæˆ‘åœ¨çš„ï¼Œæˆ‘å‘ä¸€ä¸ªæ¶ˆæ¯çœ‹ä½ èƒ½ä¸èƒ½æ”¶åˆ°ï¼Œæˆ‘å‘Jï¼›<br>Bæ”¶åˆ°åï¼Œå›ç­”ï¼šæˆ‘æ”¶åˆ°äº†ä½ å‘çš„Jï¼Œä½ çš„å‘é€å’Œæˆ‘çš„æ¥æ”¶åŠŸèƒ½æ­£å¸¸,å›ä½ J+1;å¹¶ä¸”ï¼Œæˆ‘ç»™ä½ å‘ä¸ªæ¶ˆæ¯Kï¼Œçœ‹æˆ‘çš„å‘é€å’Œä½ çš„æ¥æ”¶æ˜¯å¦æ­£å¸¸ï¼Ÿ<br>Aæ”¶åˆ°åï¼Œå›ç­”ï¼šæˆ‘æ”¶åˆ°äº†ä½ å‘çš„J+1å’ŒKï¼Œæˆ‘å›ä½ K+1ï¼Œå‘Šè¯‰ä½ çš„å‘é€å’Œæˆ‘çš„æ¥æ”¶æ­£å¸¸ï¼›<br>é€šè¿‡å‰2æ¬¡ï¼Œè¡¨æ˜ï¼šèµ·ç‚¹çš„å‘é€å’Œç»ˆç‚¹çš„æ¥æ”¶ï¼ŒåŠŸèƒ½æ­£å¸¸ï¼›<br>é€šè¿‡å2æ¬¡ï¼Œè¡¨æ˜ï¼šç»ˆç‚¹çš„å‘é€å’Œèµ·ç‚¹çš„æ¥æ”¶ï¼ŒåŠŸèƒ½æ­£å¸¸ï¼›<br>ç”±æ­¤ä¿è¯ï¼šåŒæ–¹å¯ä»¥å‘é€å’Œæ¥æ”¶å¯¹æ–¹çš„ä¿¡æ¯ã€‚","like_count":6,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":486061,"discussion_content":"è§£è¯´çš„éå¸¸å½¢è±¡ï¼Œç‚¹èµã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583657670,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":123387,"user_name":"weeeee","can_delete":false,"product_type":"c1","uid":1276011,"ip_address":"","ucode":"33FB3E22D78B4C","user_header":"https://static001.geekbang.org/account/avatar/00/13/78/6b/9451a800.jpg","comment_is_top":false,"comment_ctime":1565665540,"is_pvip":false,"replies":[{"id":"45934","content":"æˆ‘çš„ç†è§£æ˜¯acceptä¹‹åä¼šè¿”å›ä¸‰æ¬¡æ¡æ‰‹æˆåŠŸè¿›å…¥ESTABLISHEDçŠ¶æ€çš„è¿æ¥ï¼Œç¡®å®æ˜¯å…ˆè¿›å…¥ESTABLISHEDçŠ¶æ€ï¼Œç„¶åä»acceptè¿”å›","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1566129744,"ip_address":"","comment_id":123387,"utype":1}],"discussion_count":2,"race_medal":0,"score":"23040502020","product_id":100032701,"comment_content":"è€å¸ˆå¥½ï¼Œæœ‰ä¸€ä¸ªé—®é¢˜æƒ³è¯·æ•™æ‚¨ä¸€ä¸‹<br>æœåŠ¡å™¨ç«¯çš„è¿æ¥è¿›å…¥ESTABLISHED çŠ¶æ€ï¼Œè¯¾ç¨‹ä¸Šè¯´çš„æ˜¯acceptè¿”å›åæ‰è¿›å…¥ï¼Œä½†æ˜¯æˆ‘è‡ªå·±å®éªŒå‘ç°åªè¦å®¢æˆ·ç«¯å‘é€ackåï¼Œä¹Ÿå°±æ˜¯ç¬¬ä¸‰æ¬¡æ¡æ‰‹å®Œæˆå°±è¿›å…¥äº†ESTABLISHED çŠ¶æ€ï¼Œå’Œacceptæ²¡æœ‰å…³ç³»ï¼Œè¯·é—®ä¸€ä¸‹è€å¸ˆæ˜¯æˆ‘å“ªé‡Œç†è§£é”™äº†å—ï¼Ÿ","like_count":6,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462647,"discussion_content":"æˆ‘çš„ç†è§£æ˜¯acceptä¹‹åä¼šè¿”å›ä¸‰æ¬¡æ¡æ‰‹æˆåŠŸè¿›å…¥ESTABLISHEDçŠ¶æ€çš„è¿æ¥ï¼Œç¡®å®æ˜¯å…ˆè¿›å…¥ESTABLISHEDçŠ¶æ€ï¼Œç„¶åä»acceptè¿”å›","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566129744,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1562826,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eq3opKxGyQia0CQibZU8If7Qv6ia3j4XiaWIdCHxrK0T3uZ5RVUSgwf0IJVRVt0wVLibryycTqv4VnEzbw/132","nickname":"Geek_8c4282","note":"","ucode":"09E13C2DDBA48D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":539371,"discussion_content":"æˆ‘ä¹Ÿè¯•äº†ä¸‹ï¼Œacceptå‰å°±å¯ä»¥ä¸‰æ¬¡æ¡æ‰‹æˆåŠŸï¼Œè¿™å—è®²çš„æœ‰é—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639700885,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122757,"user_name":"KnightÂ²ÂºÂ¹â¸","can_delete":false,"product_type":"c1","uid":1089754,"ip_address":"","ucode":"BDCB830B6A730F","user_header":"https://static001.geekbang.org/account/avatar/00/10/a0/da/4f50f1b2.jpg","comment_is_top":false,"comment_ctime":1565513072,"is_pvip":false,"replies":[{"id":"45174","content":"å°±æ˜¯è¦å’Œæ“ä½œç³»ç»ŸI&#47;Oæ‰“äº¤é“ï¼Œç¼–ç¨‹è¯­è¨€çš„I&#47;Oæ¨¡å‹æ˜¯é€šè¿‡æŠ½è±¡å’Œè®¾è®¡ï¼Œæ€»ç»“å‡ºçš„ä¸€å¥—è§„èŒƒã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1565579096,"ip_address":"","comment_id":122757,"utype":1}],"discussion_count":3,"race_medal":0,"score":"23040349552","product_id":100032701,"comment_content":"è€å¸ˆæˆ‘æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œç¼–ç¨‹è¯­è¨€ä¸­çš„IOæ¨¡å‹å’Œæ“ä½œç³»ç»Ÿä¸­çš„IOå…³ç³»æ˜¯ä»€ä¹ˆï¼Ÿ","like_count":5,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462392,"discussion_content":"å°±æ˜¯è¦å’Œæ“ä½œç³»ç»ŸI/Oæ‰“äº¤é“ï¼Œç¼–ç¨‹è¯­è¨€çš„I/Oæ¨¡å‹æ˜¯é€šè¿‡æŠ½è±¡å’Œè®¾è®¡ï¼Œæ€»ç»“å‡ºçš„ä¸€å¥—è§„èŒƒã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565579096,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1089754,"avatar":"https://static001.geekbang.org/account/avatar/00/10/a0/da/4f50f1b2.jpg","nickname":"KnightÂ²ÂºÂ¹â¸","note":"","ucode":"BDCB830B6A730F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4589,"discussion_content":"æ“ä½œç³»ç»Ÿæ”¯æŒBIO, NIO, AIOç­‰ï¼Œä¸ºä»€ä¹ˆè¿˜éœ€è¦å†ç¼–ç¨‹è¯­è¨€ä¸­å®ç°ä¸€æ¬¡ã€‚å°±æ‹¿javaæ¥è¯´ï¼Œä»–çš„IOæ¨¡å‹ä¸­å®ç°äº†Reactor, Selectorç­‰å¤„ç†æ¨¡å‹ï¼Œä¸ºä»€ä¹ˆè¿™äº›æ¨¡å‹ä¸ç›´æ¥ç”±æ“ä½œç³»ç»Ÿå®ç°ï¼Œç¼–ç¨‹è¯­è¨€åœ¨ä½¿ç”¨çš„è¿‡ç¨‹ä¸­ç›´æ¥è°ƒç”¨å°±å¥½äº†ï¼Œä¸€ç›´ä¸æ˜ç™½ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565579626,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1357623,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJJmBKrLvqOIXDDbj3ocEIJzqsQx2e5VLDBSX6LmofYtprWwKaVAmHUqU2z3mjREHX8n9eLLiavlPg/132","nickname":"wg1993","note":"","ucode":"D5112FEFDB1DF7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1089754,"avatar":"https://static001.geekbang.org/account/avatar/00/10/a0/da/4f50f1b2.jpg","nickname":"KnightÂ²ÂºÂ¹â¸","note":"","ucode":"BDCB830B6A730F","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":51937,"discussion_content":"javaæœ€å¤§çš„ç‰¹ç‚¹å°±æ˜¯ä¸€æ¬¡ç¼–è¯‘åˆ°å¤„è¿è¡Œï¼Œä»–æ˜¯è¿è¡Œåœ¨è‡ªå·±çš„JVMä¸Šé¢çš„ï¼Œjavaå¤§éƒ¨åˆ†æ–¹æ³•éƒ½éæœ¬åœ°æ–¹æ³•ï¼Œå½“ç„¶ä»–ä¹Ÿæœ‰æœ¬åœ°æ–¹æ³•ï¼Œå¦‚æœjavaç›´æ¥è°ƒç”¨æ“ä½œç³»ç»Ÿï¼Œä»–æœ€å¤§çš„ç‰¹ç‚¹å°±æ²¡æœ‰äº†","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1573970645,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":4589,"ip_address":""},"score":51937,"extra":""}]}]},{"had_liked":false,"id":122108,"user_name":"_stuView","can_delete":false,"product_type":"c1","uid":1244561,"ip_address":"","ucode":"C2D4AAB08515F1","user_header":"https://static001.geekbang.org/account/avatar/00/12/fd/91/65ff3154.jpg","comment_is_top":false,"comment_ctime":1565305502,"is_pvip":false,"replies":[{"id":"45131","content":"file descriptionï¼Œæ–‡ä»¶æè¿°ç¬¦ã€‚UNIXä¸–ç•Œé‡Œä¸‡ç‰©çš†æ–‡ä»¶ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1565575620,"ip_address":"","comment_id":122108,"utype":1}],"discussion_count":7,"race_medal":0,"score":"23040141982","product_id":100032701,"comment_content":"sockfdé‡Œçš„è¿™ä¸ªfdä»£è¡¨ä»€ä¹ˆ","like_count":5,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462102,"discussion_content":"file descriptionï¼Œæ–‡ä»¶æè¿°ç¬¦ã€‚UNIXä¸–ç•Œé‡Œä¸‡ç‰©çš†æ–‡ä»¶ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565575620,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1073963,"avatar":"https://static001.geekbang.org/account/avatar/00/10/63/2b/da9c6d66.jpg","nickname":"Joy Young","note":"","ucode":"226F8183D83FE3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4347,"discussion_content":"ç³»ç»Ÿç»™æ¯ä¸ªè¿›ç¨‹ç»´æŠ¤ä¸€å¼ æ‰“å¼€æ–‡ä»¶è¡¨(æ•°ç»„)ï¼ŒSockfdæ˜¯å¥—æ¥å­—æ–‡ä»¶åœ¨è¿™å¼ è¡¨çš„æ•°ç»„ç´¢å¼•æˆ–ä¸‹æ ‡","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1565327790,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1597911,"avatar":"https://static001.geekbang.org/account/avatar/00/18/61/d7/36c13ba0.jpg","nickname":"AAA","note":"","ucode":"DD36EF3A4CBD00","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4311,"discussion_content":"file descriptor æ–‡ä»¶æè¿°ç¬¦","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1565312857,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1244561,"avatar":"https://static001.geekbang.org/account/avatar/00/12/fd/91/65ff3154.jpg","nickname":"_stuView","note":"","ucode":"C2D4AAB08515F1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1597911,"avatar":"https://static001.geekbang.org/account/avatar/00/18/61/d7/36c13ba0.jpg","nickname":"AAA","note":"","ucode":"DD36EF3A4CBD00","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4342,"discussion_content":"é†é†çŒé¡¶ğŸ˜‚è°¢è°¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565322918,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":4311,"ip_address":""},"score":4342,"extra":""}]},{"author":{"id":1619882,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b7/aa/6427f4d8.jpg","nickname":"wlarein","note":"","ucode":"81A6B217700403","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4306,"discussion_content":"yylğŸ˜‚å“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565312000,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1244561,"avatar":"https://static001.geekbang.org/account/avatar/00/12/fd/91/65ff3154.jpg","nickname":"_stuView","note":"","ucode":"C2D4AAB08515F1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1619882,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b7/aa/6427f4d8.jpg","nickname":"wlarein","note":"","ucode":"81A6B217700403","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4343,"discussion_content":"å“ˆå“ˆå“ˆå“ˆå“ªä½å‘€ğŸ˜‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565322940,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":4306,"ip_address":""},"score":4343,"extra":""}]},{"author":{"id":1284592,"avatar":"https://static001.geekbang.org/account/avatar/00/13/99/f0/d9343049.jpg","nickname":"æ˜Ÿäº¦è¾°","note":"","ucode":"B0388FBFFDEE7E","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4301,"discussion_content":"æ–‡ä»¶å¥æŸ„ï¼Œç½‘ç»œèµ„æºæ“ä½œçš„ä¸€ä¸ªæ ‡è®°ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565308362,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122353,"user_name":"ä¸€å‘¨æ€è¿›","can_delete":false,"product_type":"c1","uid":1032125,"ip_address":"","ucode":"00BE5402479B16","user_header":"https://static001.geekbang.org/account/avatar/00/0f/bf/bd/0c40979f.jpg","comment_is_top":false,"comment_ctime":1565346233,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18745215417","product_id":100032701,"comment_content":"åˆšå¥½æœ€è¿‘å†™äº†ä¸ªé€šè¿‡manå¸®åŠ©æ‰‹å†Œç¼–å†™åŸºç¡€tcpæœåŠ¡å™¨<br>https:&#47;&#47;mp.weixin.qq.com&#47;s&#47;bNdfXNQcZ3z_WzDWL5yQfA","like_count":4},{"had_liked":false,"id":122349,"user_name":"æµ¦ä¸Šæ¸…é£","can_delete":false,"product_type":"c1","uid":1619564,"ip_address":"","ucode":"8CD36438A21AE1","user_header":"https://static001.geekbang.org/account/avatar/00/18/b6/6c/bae0461c.jpg","comment_is_top":false,"comment_ctime":1565344152,"is_pvip":false,"replies":[{"id":"45183","content":"1 ä¸æ˜¯ç­‰ä»·çš„<br>2 æ²¡æœ‰å¿…è¦ï¼Œè¿˜å¾’å¢äº†ç«¯å£å†²çªçš„å±é™©ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1565579724,"ip_address":"","comment_id":122349,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18745213336","product_id":100032701,"comment_content":"1. éé˜»å¡ == å¼‚æ­¥é€šä¿¡ ï¼Ÿï¼Ÿï¼Ÿ<br>2. å¯ä»¥æ˜¯å¯ä»¥ï¼Œä½†æ˜¯ä¸å®‰å…¨ï¼Ÿï¼Ÿï¼Ÿ","like_count":4,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462216,"discussion_content":"1 ä¸æ˜¯ç­‰ä»·çš„\n2 æ²¡æœ‰å¿…è¦ï¼Œè¿˜å¾’å¢äº†ç«¯å£å†²çªçš„å±é™©ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565579724,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":201724,"user_name":"Arthur.Li","can_delete":false,"product_type":"c1","uid":1005824,"ip_address":"","ucode":"EC2436A5136C13","user_header":"https://static001.geekbang.org/account/avatar/00/0f/59/00/6d14972a.jpg","comment_is_top":false,"comment_ctime":1585825833,"is_pvip":false,"replies":[{"id":"75768","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1586075739,"ip_address":"","comment_id":201724,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14470727721","product_id":100032701,"comment_content":"SYNï¼šå»ºç«‹è¿æ¥<br>FINï¼šå…³é—­è¿æ¥<br>ACKï¼šå“åº”<br>PSHï¼šæœ‰DATAæ•°æ®ä¼ è¾“<br>RSTï¼šè¿æ¥é‡ç½®","like_count":4,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490402,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586075739,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122124,"user_name":"æ˜Ÿäº¦è¾°","can_delete":false,"product_type":"c1","uid":1284592,"ip_address":"","ucode":"B0388FBFFDEE7E","user_header":"https://static001.geekbang.org/account/avatar/00/13/99/f0/d9343049.jpg","comment_is_top":false,"comment_ctime":1565308085,"is_pvip":true,"replies":[{"id":"45136","content":"æƒ³å¤šäº†ï¼Œå¯ä»¥åŒºåˆ†å‡ºæ¥æ˜¯ä¸æ˜¯æœ¬åœ°ç›‘å¬ç«¯å£(è¢«åŠ¨å¥—æ¥å­—)çš„ï¼Œè€Œä¸”è¿™ä¸ªåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ä¸è¢«å…è®¸çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1565575927,"ip_address":"","comment_id":122124,"utype":1}],"discussion_count":4,"race_medal":0,"score":"14450209973","product_id":100032701,"comment_content":"æ€è€ƒé¢˜2 <br><br>å®¢æˆ·ç«¯å¯ä»¥bind æŒ‡å®šä½¿ç”¨å›ºå®šç«¯å£æ¥è¿æ¥ã€‚ <br>æ²¡æœ‰bind åˆ™ä¼šäº§ç”Ÿä¸€ä¸ªéšæœºçš„ç«¯å£æ¥å®Œæˆè¿æ¥è¯·æ±‚ã€‚<br><br>æƒ³åˆ°ä¸€ä¸ªæ¯”è¾ƒæœ‰æ„æ€çš„äº‹æƒ…ï¼š<br><br>å®¢æˆ·ç«¯bind ä»¥åï¼Œå¯¹å†…ç½‘è¿›è¡Œç«¯å£æ‰«æï¼Œè¡¨è±¡åˆ™æ˜¯ï¼Œè¿œç¨‹éšæœºç«¯å£ï¼Œåˆ°æœ¬åœ°å›ºå®šç«¯å£å®Œæˆé€šä¿¡ã€‚çœ‹ä¼¼ï¼Œæ˜¯æœ¬åœ°å¼€å¯äº†æœåŠ¡ã€‚å¦‚æœbind 80 443 22è¿™äº›å¸¸è§„ç«¯å£ï¼Œåˆ™å¯ä»¥è¿·æƒ‘å®‰å…¨äººå‘˜ ğŸ˜„ ","like_count":3,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462112,"discussion_content":"æƒ³å¤šäº†ï¼Œå¯ä»¥åŒºåˆ†å‡ºæ¥æ˜¯ä¸æ˜¯æœ¬åœ°ç›‘å¬ç«¯å£(è¢«åŠ¨å¥—æ¥å­—)çš„ï¼Œè€Œä¸”è¿™ä¸ªåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ä¸è¢«å…è®¸çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565575927,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1304534,"avatar":"https://static001.geekbang.org/account/avatar/00/13/e7/d6/e023cb98.jpg","nickname":"stupidchen","note":"","ucode":"4D9C5D8F61A5A3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4437,"discussion_content":"æœ‰ç‚¹éªš","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565418658,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1000091,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/42/9b/8830fba9.jpg","nickname":"ä¸Š@å–„","note":"","ucode":"4826A47904C134","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4390,"discussion_content":"åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæ²¡æœ‰ä½“ç°å¾ˆæœ‰è¥å…»çš„çŸ¥è¯†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565346850,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1110218,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f0/ca/4560f06b.jpg","nickname":"zhchnchn","note":"","ucode":"2219E40ED134D4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4336,"discussion_content":"è¿œç¨‹æœåŠ¡å™¨çš„å›ºå®šç«¯å£æ˜¾ç¤ºä¸å‡ºæ¥å—ï¼Ÿé‚£å®ƒæ˜¯æ€ä¹ˆç»™è¿œç¨‹æœåŠ¡å™¨ç«¯å£éšæœºå–å€¼çš„å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565320907,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":181781,"user_name":"å¿†æ°´å¯’","can_delete":false,"product_type":"c1","uid":1147453,"ip_address":"","ucode":"E3F86BD8AA8903","user_header":"https://static001.geekbang.org/account/avatar/00/11/82/3d/356fc3d6.jpg","comment_is_top":false,"comment_ctime":1582633556,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10172568148","product_id":100032701,"comment_content":"1ã€éé˜»å¡è°ƒç”¨ä¸ºäº†æé«˜ç½‘ç»œå¤„ç†æ€§èƒ½ï¼Œåœ¨selectï¼Œpollå’Œepollç­‰IOä¸­ä½¿ç”¨ã€‚<br>2ã€å®¢æˆ·ç«¯å…¶å®å¯ä»¥bindï¼Œä½†æ˜¯æ²¡å¿…è¦bindã€‚å®¢æˆ·ç«¯è°ƒç”¨connectæˆåŠŸåç³»ç»Ÿä¼šéšæœºåˆ†é…ä¸€ä¸ªå¯ç”¨ç«¯å£ã€‚è¿™é‡Œæ¶‰åŠåˆ°ç«¯å£é€‰æ‹©ç®—æ³•å’Œåˆ—ç»´æ¨¡å‹ã€‚<br>","like_count":2},{"had_liked":false,"id":166588,"user_name":"æ—…é€”","can_delete":false,"product_type":"c1","uid":1212902,"ip_address":"","ucode":"5022477E8E9441","user_header":"https://static001.geekbang.org/account/avatar/00/12/81/e6/6cafed37.jpg","comment_is_top":false,"comment_ctime":1577510363,"is_pvip":false,"replies":[{"id":"63876","content":"1.å®¢æˆ·ç«¯ä¸€å®šéœ€è¦é¢„å…ˆçŸ¥é“å¾…è¿æ¥çš„æœåŠ¡å™¨ç«¯çš„åœ°å€å’Œç«¯å£ï¼Œè‡³äºæ€ä¹ˆè®©å®¢æˆ·ç«¯çŸ¥é“ï¼Œé€šè¿‡é…ç½®ï¼Œå¯åŠ¨å‚æ•°ï¼Œéƒ½æ˜¯å¯ä»¥çš„ï¼›<br>2.åŠ 1çš„ç›®çš„æ˜¯ä¸ºäº†å¯¹è¿™ä¸ªæŠ¥æ–‡è¿›è¡Œå”¯ä¸€æ€§ç¡®è®¤ï¼Œé˜²æ­¢æŠ¥æ–‡ä¸²æ‰äº†ï¼Œè¿™æ ·æˆ‘ä»¬å°±æ— æ³•çŸ¥é“è°è·Ÿè°äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1577602078,"ip_address":"","comment_id":166588,"utype":1}],"discussion_count":3,"race_medal":0,"score":"10167444955","product_id":100032701,"comment_content":"è€å¸ˆ ä¸¤ä¸ªé—®é¢˜éº»çƒ¦è§£ç­”ä¸‹<br>1.å¦‚æœæœåŠ¡ç«¯ ä½¿ç”¨éšæœºç«¯å£ é‚£ä¹ˆå®¢æˆ·ç«¯æ—¶æ€ä¹ˆçŸ¥é“çš„ ä¸ä½¿ç”¨éšæœºçš„è¯ æ˜¯å®¢æˆ·ç«¯è¦å…ˆçŸ¥é“æœåŠ¡ç«¯çš„ç«¯å£ç„¶åé…ç½®è¿›å»å—<br>2.ä¸‰æ¬¡æ¡æ‰‹æ—¶ æ¯æ¬¡é€šä¿¡çš„æ¶ˆæ¯éƒ½åŠ ä¸€  è¿™ä¸ªç›®çš„æ˜¯ä»€ä¹ˆ æ¯æ¬¡è¿”å›ä¸€ä¸ª&quot;1&quot; æˆ–è€…&quot;success&quot; æ˜¯ä¸æ˜¯ä¹Ÿè¡Œ?","like_count":2,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479551,"discussion_content":"1.å®¢æˆ·ç«¯ä¸€å®šéœ€è¦é¢„å…ˆçŸ¥é“å¾…è¿æ¥çš„æœåŠ¡å™¨ç«¯çš„åœ°å€å’Œç«¯å£ï¼Œè‡³äºæ€ä¹ˆè®©å®¢æˆ·ç«¯çŸ¥é“ï¼Œé€šè¿‡é…ç½®ï¼Œå¯åŠ¨å‚æ•°ï¼Œéƒ½æ˜¯å¯ä»¥çš„ï¼›\n2.åŠ 1çš„ç›®çš„æ˜¯ä¸ºäº†å¯¹è¿™ä¸ªæŠ¥æ–‡è¿›è¡Œå”¯ä¸€æ€§ç¡®è®¤ï¼Œé˜²æ­¢æŠ¥æ–‡ä¸²æ‰äº†ï¼Œè¿™æ ·æˆ‘ä»¬å°±æ— æ³•çŸ¥é“è°è·Ÿè°äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577602078,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1980201,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/37/29/b3af57a7.jpg","nickname":"å‡¯æ–‡å°çŒª","note":"","ucode":"36D8AD0229547F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":393305,"discussion_content":"æœ€ä¸»è¦çš„æ˜¯åå•†å‡ºä¸€ä¸ªåºåˆ—å· è€Œè¿™ä¸ªåºåˆ—å·å°±æ˜¯è¿æ¥æœ‰åºçš„ä¿è¯ã€‚è¿™éƒ¨åˆ†ä¼šæœ‰ç½‘ç»œåè®®æ ˆæ¥åšåŒ…çš„ç²˜åˆã€‚ä¹Ÿå°±æ˜¯ç²˜åŒ…","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631348012,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2748225,"avatar":"https://static001.geekbang.org/account/avatar/00/29/ef/41/c5b0194b.jpg","nickname":"å°ç™½äº‘æ¸¸è®°","note":"","ucode":"B9C433081FB40D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":390804,"discussion_content":"åŠ ä¸€æ˜¯ä¸ºäº†ç¡®ä¿è¿™ä¸ªåºå·ä¹‹å‰çš„æ‰€æœ‰æ•°æ®éƒ½æ¥æ”¶åˆ°äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630050622,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":123216,"user_name":"å•¦å•¦çš„å°çŒª","can_delete":false,"product_type":"c1","uid":1134766,"ip_address":"","ucode":"13352B41450925","user_header":"https://static001.geekbang.org/account/avatar/00/11/50/ae/11dad6f3.jpg","comment_is_top":false,"comment_ctime":1565628573,"is_pvip":false,"replies":[{"id":"45930","content":"æ¯ä¸ªç³»ç»Ÿçš„å®ç°å’Œè§£é‡Šä¸å°½ç›¸åŒï¼Œä½ è¯´çš„æ˜¯ä¸€ä¸ªå¾ˆå…¸å‹çš„å®ç°ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1566129453,"ip_address":"","comment_id":123216,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10155563165","product_id":100032701,"comment_content":"listençš„ç¬¬äºŒä¸ªå‚æ•°backlogçš„å€¼æ˜¯è§„å®šACCEPTé˜Ÿåˆ—å¤§å°çš„;å½“ACCEPTé˜Ÿåˆ—æ»¡äº†æ—¶åæ¥çš„å®¢æˆ·ç«¯ï¼Œå°±ä¼šè¢«æ”¾åˆ°syné˜Ÿåˆ—ä¸­","like_count":2,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462585,"discussion_content":"æ¯ä¸ªç³»ç»Ÿçš„å®ç°å’Œè§£é‡Šä¸å°½ç›¸åŒï¼Œä½ è¯´çš„æ˜¯ä¸€ä¸ªå¾ˆå…¸å‹çš„å®ç°ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566129453,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122257,"user_name":"å¤šè¥„ä¸¸","can_delete":false,"product_type":"c1","uid":1074310,"ip_address":"","ucode":"1AA1497C5A293C","user_header":"https://static001.geekbang.org/account/avatar/00/10/64/86/f5a9403a.jpg","comment_is_top":false,"comment_ctime":1565325458,"is_pvip":false,"replies":[{"id":"45150","content":"ç‰µæ‰¯åˆ°å…·ä½“çš„å®ç°ç»†èŠ‚ï¼Œæˆ‘å»ºè®®å»çœ‹ä¸‹æºç å®ç°ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1565576713,"ip_address":"","comment_id":122257,"utype":1}],"discussion_count":3,"race_medal":0,"score":"10155260050","product_id":100032701,"comment_content":"1. éé˜»å¡è°ƒç”¨æ˜¯ä¸æ˜¯é€šè¿‡å›è°ƒå‡½æ•°å®Œæˆçš„å‘¢ï¼Ÿ <br><br>å°±æ˜¯æˆ‘è°ƒç”¨å®Œconnectä¹‹åä¸ç­‰ä½ ï¼Œä½ å¤„ç†å®Œäº†é€šçŸ¥æˆ‘ï¼Œæˆ‘å…ˆå»å’Œå…¶ä»–æœåŠ¡ç«¯connectå»äº†ã€‚æ˜¯è¿™æ ·å­å˜›ï¼Ÿ<br><br>é¢˜å¤–è¯:<br>æœç´¢è€å¸ˆå¸ƒç½®çš„é¢˜ç›®çš„è¿‡ç¨‹ä¸­ï¼Œæ— æ„ä¸­çœ‹åˆ°äº†è¿™ä¹ˆä¸€ä¸ªè¯é¢˜ã€‚å®¢æˆ·ç«¯ç«¯å‘èµ·connect,æœåŠ¡ç«¯ä¸è°ƒç”¨acceptèƒ½ä¸èƒ½æˆåŠŸï¼Ÿ<br><br>é¡ºç€é‚£ç¯‡æ–‡ç« çœ‹ä¸‹å»:<br>å®¢æˆ·ç«¯çš„synè¯·æ±‚è¢«å“åº”çš„åŒæ—¶ï¼Œè¢«linuxå†…æ ¸æ”¾åˆ°äº†syné˜Ÿåˆ—ä¸­ï¼Œè€Œå®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘å®Œackä¹‹åï¼Œè¿™ä¸ªsocketæ‰ä¼šè¢«ç§»å…¥accepté˜Ÿåˆ—ä¸­ã€‚(accepté˜Ÿåˆ—é•¿åº¦çš„å¤§å°å°±æ˜¯listenæ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°backlog)<br><br>è¿›å…¥accpeté˜Ÿåˆ—çš„socketä¼šè¢«é€šçŸ¥å…¶ç›¸åº”ç›‘å¬çš„æœåŠ¡ç«¯è¿›ç¨‹ï¼Œç”±æœåŠ¡ç«¯è¿›ç¨‹æ‰§è¡Œacceptæ“ä½œå°†è¿™ä¸ªsocketå–å‡ºæ¥è¿›è¡Œå¤„ç†ã€‚<br><br>ç”±æ­¤å¯è§ï¼ŒæœåŠ¡ç«¯å°†è¿™ä¸ªsocketç§»å…¥accepté˜Ÿåˆ—åï¼Œå°±ç®—è¿æ¥åˆ›å»ºæˆåŠŸäº†ã€‚è€Œacceptæ“ä½œï¼Œæ˜¯ç”±æœåŠ¡è¿›ç¨‹å‘èµ·çš„ã€‚æ‰€ä»¥ï¼Œä¸æ‰§è¡Œacceptæ“ä½œï¼Œè¿æ¥ä¹Ÿå¯ä»¥åˆ›å»ºæˆåŠŸï¼Œåªæ˜¯è¿™ä¸ªsocketè¿˜æ²¡æœ‰è¢«æœåŠ¡è¿›ç¨‹å¤„ç†è€Œç§¯å‹åœ¨äº†accepté˜Ÿåˆ—ä¸­äº†ã€‚<br><br>ä¸çŸ¥é“æˆ‘çœ‹çš„æ–‡ç« å†™çš„å¯¹ä¸å¯¹ï¼Œå¯ä»¥å†çœ‹çœ‹ã€‚å…¶å®æˆ‘å¾ˆæœŸå¾…è€å¸ˆåˆ†æè¿™äº›é—®é¢˜ï¼Œç„¶åæˆ‘ä»¬å°±å¯ä»¥æœ‰æ„æƒ³ä¸åˆ°çš„æ”¶è·!<br><br>(ps:ç›®å‰çœ‹æ¥ï¼Œè¿˜æ²¡é‡åˆ°å¤ªtroubleçš„é—®é¢˜ï¼Œç†è§£èµ·æ¥å¤ªå›°éš¾çš„ç¯‡å¹…ã€‚)","like_count":2,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462177,"discussion_content":"ç‰µæ‰¯åˆ°å…·ä½“çš„å®ç°ç»†èŠ‚ï¼Œæˆ‘å»ºè®®å»çœ‹ä¸‹æºç å®ç°ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565576713,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1270262,"avatar":"https://static001.geekbang.org/account/avatar/00/13/61/f6/1d6b548a.jpg","nickname":"wang","note":"","ucode":"C1A3BCACCB188E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4500,"discussion_content":"æˆ–è€…è¯´è¿™ä¸ªè¿æ¥çš„å«ä¹‰å¯ä»¥æ˜¯å¤šæ ·çš„ï¼Œå¦‚æœè¯´æ˜¯åˆ°è¾¾æœåŠ¡è¿›ç¨‹accept æ„ŸçŸ¥å®¢æˆ·è¿›ç¨‹æ‰ç®—è¿æ¥è¿˜æ˜¯ï¼Œä»…ä»…æœåŠ¡è¿›ç¨‹èƒ½å¤Ÿaccept è¿˜æœªaccept å°±ç®—è¿æ¥ok","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565494429,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1074310,"avatar":"https://static001.geekbang.org/account/avatar/00/10/64/86/f5a9403a.jpg","nickname":"å¤šè¥„ä¸¸","note":"","ucode":"1AA1497C5A293C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1270262,"avatar":"https://static001.geekbang.org/account/avatar/00/13/61/f6/1d6b548a.jpg","nickname":"wang","note":"","ucode":"C1A3BCACCB188E","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4530,"discussion_content":"è¿˜æœªaccept","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565522664,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":4500,"ip_address":""},"score":4530,"extra":""}]}]},{"had_liked":false,"id":226114,"user_name":"éƒ‘ç¥–ç…Œ","can_delete":false,"product_type":"c1","uid":1469608,"ip_address":"","ucode":"49A0D2E3279826","user_header":"https://static001.geekbang.org/account/avatar/00/16/6c/a8/1922a0f5.jpg","comment_is_top":false,"comment_ctime":1591953394,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5886920690","product_id":100032701,"comment_content":"1.å¦‚ä½•ä½¿ç”¨éé˜»å¡è°ƒç”¨å¥—æ¥å­—:ä½¿ç”¨fcntlå‡½æ•°è®¾ç½®å¥—æ¥å­—çš„å±æ€§fcntl(fd, F_SETFL, flags)ï¼›<br>éé˜»å¡è°ƒç”¨çš„ ä½¿ç”¨çš„åœºæ™¯ï¼šç¨‹åºåœ¨è°ƒç”¨è¿”å›ä¹‹å‰ï¼Œéœ€è¦åšå…¶ä»–äº‹æƒ…ï¼Œå¯ä»¥é€‰æ‹©ç”¨å®šæ—¶è½®è¯¢æˆ–äº‹ä»¶é€šçŸ¥çš„æ–¹å¼è·å–è°ƒç”¨ç»“æœã€‚<br>2.æ˜¯å¦å¯ä»¥è°ƒç”¨bind å‡½æ•°ï¼šå¯ä»¥ï¼Œä½†æ˜¯è°ƒç”¨bindå‡½æ•°ï¼Œä¹Ÿå°±æ˜¯å®¢æˆ·ç«¯æŒ‡å®šäº†ç«¯å£å·ï¼Œè¿™æ ·å®¹æ˜“é€ æˆç«¯å£å†²çªï¼Œæ‰€ä»¥å®¢æˆ·ç«¯ä¸è°ƒç”¨bindå‡½æ•°ï¼Œè®©ç³»ç»Ÿè‡ªåŠ¨é€‰æ‹©ç©ºé—²ç«¯å£æ¯”è¾ƒå¥½","like_count":1},{"had_liked":false,"id":171828,"user_name":"è«ç£","can_delete":false,"product_type":"c1","uid":1117933,"ip_address":"","ucode":"CAFE6F2AC5C177","user_header":"https://static001.geekbang.org/account/avatar/00/11/0e/ed/1c662e93.jpg","comment_is_top":false,"comment_ctime":1579022692,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5873989988","product_id":100032701,"comment_content":"æ€è€ƒé¢˜1ï¼šå¯ä»¥é€šè¿‡è®¾ç½®socketçš„å±æ€§æ¥è®¾ç½®socketä¸ºéé˜»å¡ï¼Œè¿™æ ·åœ¨è¯¥socketä¸Šçš„æ‰€æœ‰æ“ä½œéƒ½æ˜¯éé˜»å¡çš„ã€‚Linuxä¸‹æ˜¯fcntl(fd, F_SETFL, flags)ã€‚ä½¿ç”¨åœºæ™¯çš„è¯ï¼Œä¸ªäººç†è§£æ˜¯ä¸ºäº†è§£è€¦å’Œæ€§èƒ½ã€‚<br>æ€è€ƒé¢˜2ï¼šå¯ä»¥è°ƒç”¨bindå‡½æ•°ï¼Œä½†æ˜¯è¿™æ ·ä¸€æ¥å®¢æˆ·ç«¯ä¼šä½¿ç”¨å›ºå®šç«¯å£ï¼Œå®¹æ˜“äº§ç”Ÿå†²çªï¼Œå¦å¤–ï¼Œä¸€èˆ¬è€Œè¨€æˆ‘ä»¬å¸Œæœ›å®¢æˆ·ç«¯å…·å¤‡å¿«é€Ÿå¯åŠ¨çš„èƒ½åŠ›ï¼Œä½†æ˜¯å› ä¸ºTIMEWAITçŠ¶æ€çš„å­˜åœ¨ï¼Œä½¿ç”¨éšæœºç«¯å£ä¼šæ›´å®¹æ˜“å¤„ç†ä¸€äº›ã€‚<br><br>ç„¶åçœ‹åˆ°è¯„è®ºåŒºé‡Œå¾ˆå¤šäººè¯´ä¸‰æ¬¡æ¡æ‰‹çš„äº‹æƒ…ï¼Œä¸ªäººè®¤ä¸ºç†è§£ä¸‰æ¬¡æ¡æ‰‹ä¸ºä»€ä¹ˆæ˜¯ä¸‰æ¬¡ï¼Œå…·ä½“ä¸‰æ¬¡æ¡æ‰‹æ˜¯ä¸ºä»€ä¹ˆï¼Œéœ€è¦ä»â€œTCPæ˜¯å…¨åŒå·¥çš„â€è¿™å¥è¯æ¥ç†è§£ã€‚","like_count":1},{"had_liked":false,"id":163928,"user_name":"Ghost","can_delete":false,"product_type":"c1","uid":1048661,"ip_address":"","ucode":"CC6FD1D460ED10","user_header":"https://static001.geekbang.org/account/avatar/00/10/00/55/3f0bc345.jpg","comment_is_top":false,"comment_ctime":1576829800,"is_pvip":false,"replies":[{"id":"63901","content":"å—¯ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1577604085,"ip_address":"","comment_id":163928,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5871797096","product_id":100032701,"comment_content":"ç®€å•çš„å°±æ˜¯<br>Aï¼šä½ èƒ½å¬åˆ°æˆ‘è¯´è¯å—ï¼Ÿ<br>Bï¼šå¬å¾—åˆ°ï¼Œä½ èƒ½å¬å¾—åˆ°æˆ‘è¯´è¯å—ï¼Ÿ<br>Aï¼šå¬å¾—åˆ°<br><br>ä¿è¯é€šä¿¡çš„åŒæ–¹éƒ½æ˜¯æœ‰æ¥æ”¶è·Ÿå‘é€æ¶ˆæ¯çš„èƒ½åŠ›","like_count":1,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478585,"discussion_content":"å—¯ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577604085,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":132278,"user_name":"äº‘ç«¯","can_delete":false,"product_type":"c1","uid":1625449,"ip_address":"","ucode":"B4E1F270C349B3","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epUgnMApgafcbOicQJYOlApkHf6AzxF5edzeXAtVNhwOZTh3WB5wtIrbf1Algg6Axy5rEfZjj0B6Ng/132","comment_is_top":false,"comment_ctime":1568077941,"is_pvip":false,"replies":[{"id":"50793","content":"æˆ‘çš„ç¨‹åºå’Œç»“æœ ï¼š<br><br>#include &quot;lib&#47;common.h&quot;<br><br>int socket_init()<br>{<br>    struct protoent* protocol = NULL;<br>    protocol=getprotobyname(&quot;icmp&quot;);<br>    int sock=socket(AF_INET,SOCK_RAW,protocol-&gt;p_proto);<br>    if(sock == -1){<br>        error(1,errno,&quot;create socket failed&quot;);<br>    }<br>    return sock;<br>}<br><br>int main(int c, char **v) {<br>    printf(&quot;socket %d \\n&quot;, socket_init());<br>    printf(&quot;socket %d \\n&quot;, socket_init());<br>}<br><br>socket 3<br>socket 4","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1568190490,"ip_address":"","comment_id":132278,"utype":1}],"discussion_count":6,"race_medal":0,"score":"5863045237","product_id":100032701,"comment_content":"<br>æ‚¨å¥½:è€å¸ˆ<br><br>int socket_init()<br>{<br>       struct protoent* protocol = NULL;<br>        protocol=getprotobyname(&quot;icmp&quot;);<br>        int sock=socket(AF_INET,SOCK_RAW,protocol-&gt;p_proto);<br><br>}<br><br>åœ¨å¤–éƒ¨ä¸¤æ¬¡è°ƒç”¨è¯¥å‡½æ•°ï¼Œicmpåè®®åŸå§‹å¥—æ¥å­—è¿”å›æ–‡ä»¶æè¿°ç¬¦ç›¸åŒï¼Œæ¯æ¬¡éƒ½æ˜¯sock=5,ä¸ºä»€ä¹ˆï¼Ÿæ€ä¹ˆæ‰èƒ½åœ¨å¤–éƒ¨å¤šæ¬¡è°ƒç”¨è¯¥å‡½æ•°æ—¶è¿”å›çš„ä¸Šä¸‹æ–‡æè¿°ç¬¦ä¸ä¸€æ ·ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466853,"discussion_content":"æˆ‘çš„ç¨‹åºå’Œç»“æœ ï¼š\n\n#include &amp;quot;lib/common.h&amp;quot;\n\nint socket_init()\n{\n    struct protoent* protocol = NULL;\n    protocol=getprotobyname(&amp;quot;icmp&amp;quot;);\n    int sock=socket(AF_INET,SOCK_RAW,protocol-&amp;gt;p_proto);\n    if(sock == -1){\n        error(1,errno,&amp;quot;create socket failed&amp;quot;);\n    }\n    return sock;\n}\n\nint main(int c, char **v) {\n    printf(&amp;quot;socket %d \\n&amp;quot;, socket_init());\n    printf(&amp;quot;socket %d \\n&amp;quot;, socket_init());\n}\n\nsocket 3\nsocket 4","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568190490,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1625449,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epUgnMApgafcbOicQJYOlApkHf6AzxF5edzeXAtVNhwOZTh3WB5wtIrbf1Algg6Axy5rEfZjj0B6Ng/132","nickname":"äº‘ç«¯","note":"","ucode":"B4E1F270C349B3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":244755,"discussion_content":"î˜\n\nint socket_init()\n{\nÂ Â Â Â struct protoent* protocol = NULL;\nÂ Â Â Â protocol=getprotobyname(&#34;icmp&#34;);\nÂ Â Â Â int sock=socket(AF_INET,SOCK_RAW,protocol->p_proto);\nÂ Â Â Â if(sock == -1){\nÂ Â Â Â Â Â Â Â error(1,errno,&#34;create socket failed&#34;);\nÂ Â Â Â }\nÂ Â Â Â return sock;\n}\n\nint main(int c, char **v) {\nÂ Â Â Â printf(&#34;socket %d \\n&#34;, socket_init());\n\nwhileï¼ˆ1ï¼‰ï½›\n\nï½\n\n\n}\n\nåœ¨ä¸¤ä¸ªå‘½ä»¤è¡ŒåŒæ—¶æ‰§è¡Œå¯æ‰§è¡Œç¨‹åº./main\nç»“æœï¼šsocket fdéƒ½æ˜¯3\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587627480,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1625449,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epUgnMApgafcbOicQJYOlApkHf6AzxF5edzeXAtVNhwOZTh3WB5wtIrbf1Algg6Axy5rEfZjj0B6Ng/132","nickname":"äº‘ç«¯","note":"","ucode":"B4E1F270C349B3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":244751,"discussion_content":"int socket_init()\n{\nÂ Â Â Â struct protoent* protocol = NULL;\nÂ Â Â Â protocol=getprotobyname(&#34;icmp&#34;);\nÂ Â Â Â int sock=socket(AF_INET,SOCK_RAW,protocol->p_proto);\nÂ Â Â Â if(sock == -1){\nÂ Â Â Â Â Â Â Â error(1,errno,&#34;create socket failed&#34;);\nÂ Â Â Â }\nÂ Â Â Â return sock;\n}\n\nint main(int c, char **v) {\nÂ Â Â Â printf(&#34;socket %d \\n&#34;, socket_init());\n}\n\nåœ¨ä¸¤ä¸ªå‘½ä»¤è¡ŒåŒæ—¶æ‰§è¡Œå¯æ‰§è¡Œç¨‹åº./main\nç»“æœï¼šsocket fdéƒ½æ˜¯3\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587627331,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1625449,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epUgnMApgafcbOicQJYOlApkHf6AzxF5edzeXAtVNhwOZTh3WB5wtIrbf1Algg6Axy5rEfZjj0B6Ng/132","nickname":"äº‘ç«¯","note":"","ucode":"B4E1F270C349B3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":244709,"discussion_content":"ç¨‹åºæ”¹ä¸ºï¼šmainå‡½æ•°è°ƒç”¨ä¸€æ¬¡åˆå§‹åŒ–ï¼›\nåœ¨ä¸¤ä¸ªå‘½ä»¤è¡ŒåŒæ—¶æ‰§è¡Œ./main","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587623387,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1625449,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epUgnMApgafcbOicQJYOlApkHf6AzxF5edzeXAtVNhwOZTh3WB5wtIrbf1Algg6Axy5rEfZjj0B6Ng/132","nickname":"äº‘ç«¯","note":"","ucode":"B4E1F270C349B3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":244706,"discussion_content":"è€å¸ˆæ‚¨å¥½ï¼šç”Ÿæˆå¯è¡Œè¡Œç¨‹åºï¼Œåœ¨å‘½ä»¤è¡Œé‡Œæ‰§è¡Œ./main2ï¼Œç»“æœä¸æ‚¨æ‰§è¡Œç»“æœä¸ä¸€æ ·ï¼Œsockeidç›¸åŒ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587622990,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1625449,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epUgnMApgafcbOicQJYOlApkHf6AzxF5edzeXAtVNhwOZTh3WB5wtIrbf1Algg6Axy5rEfZjj0B6Ng/132","nickname":"äº‘ç«¯","note":"","ucode":"B4E1F270C349B3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":15855,"discussion_content":"ä¸å¥½æ„æ€è€å¸ˆï¼Œä¸Šé¢æˆ‘çš„é—®é¢˜æ²¡æœ‰æè¿°æ¸…æ¥šï¼Œæˆ‘æ˜¯icmp socketç”Ÿæˆäº†ä¸€ä¸ª.soåŠ¨æ€åº“ï¼Œè¯¥åŠ¨æ€åº“ç”¨jnaæœ¬åœ°è°ƒç”¨ï¼Œè°ƒç”¨ä¸¤æ¬¡åŠ¨æ€åº“ï¼Œä¸¤æ¬¡sockä¸Šä¸‹æ–‡ç›¸åŒ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568856581,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":130993,"user_name":"æ— å","can_delete":false,"product_type":"c1","uid":1110113,"ip_address":"","ucode":"2D2E877CF97138","user_header":"https://static001.geekbang.org/account/avatar/00/10/f0/61/68462a07.jpg","comment_is_top":false,"comment_ctime":1567591706,"is_pvip":false,"replies":[{"id":"51755","content":"æˆ‘åœ¨ç­”ç–‘ç¯‡é‡Œç»Ÿä¸€å›å¤äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1568960583,"ip_address":"","comment_id":130993,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5862559002","product_id":100032701,"comment_content":"è€å¸ˆï¼Œå…³äºlistenå‡½æ•°çš„å‚æ•°backlogçš„è§£é‡Šï¼Œè¯´æ˜¯æœªå®Œæˆè¿æ¥é˜Ÿåˆ—çš„å¤§å°ï¼Œç„¶åå½±å“å¹¶å‘æ•°ã€‚æœ‰ç‚¹ç–‘é—®ã€‚<br>listenå‡½æ•°ä¸ºæ¯ä¸ªç›‘å¬socketç»´æŠ¤ä¸¤ä¸ªé˜Ÿåˆ—ï¼šæœªå®Œæˆè¿æ¥é˜Ÿåˆ—ï¼ˆSYN_RCVDçŠ¶æ€ï¼‰å’Œå·²å®Œæˆè¿æ¥çš„é˜Ÿåˆ—ï¼ˆESTABLISHEDçŠ¶æ€ï¼‰ã€‚<br>backlogè¡¨ç¤ºçš„æ˜¯æœªå®Œæˆè¿æ¥é˜Ÿåˆ—çš„å¤§å°ï¼Œé‚£å·²å®Œæˆè¿æ¥çš„é˜Ÿåˆ—çš„å¤§å°çš„æœ‰é™åˆ¶å—ï¼Ÿ<br>å…³äºå¹¶å‘çš„å½±å“ï¼Œå¦‚æœéƒ½æ˜¯å·²ç»å»ºç«‹è¿æ¥çš„çŠ¶æ€ï¼Œé‚£ä¹ˆå¹¶å‘è¿˜æ˜¯å–å†³äºå·²å®Œæˆè¿æ¥çš„é˜Ÿåˆ—çš„å¤§å°çš„å§ã€‚<br>","like_count":1,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466231,"discussion_content":"æˆ‘åœ¨ç­”ç–‘ç¯‡é‡Œç»Ÿä¸€å›å¤äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568960583,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1959482,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/e6/3a/382cf024.jpg","nickname":"rongyefeng","note":"","ucode":"9A15D947E9D645","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":265862,"discussion_content":"åœ¨å†…æ ¸ç‰ˆæœ¬2.2ä¹‹å‰çš„Linuxä¸­ï¼Œbacklogå‚æ•°æ˜¯æŒ‡æ‰€æœ‰å¤„äºåŠè¿æ¥çŠ¶æ€ï¼ˆSYN_RCVDï¼‰å’Œå®Œå…¨è¿æ¥çŠ¶æ€ï¼ˆESTABLISHEDï¼‰çš„socketçš„ä¸Šé™ã€‚ä½†è‡ªå†…æ ¸ç‰ˆæœ¬2.2ä¹‹åï¼Œå®ƒåªè¡¨ç¤ºå¤„äºå®Œå…¨è¿æ¥çŠ¶æ€çš„socketçš„ä¸Šé™ï¼Œå¤„äºåŠè¿æ¥çŠ¶æ€çš„socketçš„ä¸Šé™åˆ™ç”±/proc/sys/net/ipv4/tcp_max_syn_backlogå†…æ ¸å‚æ•°å®šä¹‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589448070,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":125278,"user_name":"å¦ä¸€åŠæ£‰èŠ±ç³–","can_delete":false,"product_type":"c1","uid":1593363,"ip_address":"","ucode":"C11266794FBA5B","user_header":"https://static001.geekbang.org/account/avatar/00/18/50/13/104d9501.jpg","comment_is_top":false,"comment_ctime":1566137534,"is_pvip":false,"replies":[{"id":"46106","content":"ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘è§‰å¾—æ˜¯æœ‰ä½œç”¨çš„ï¼Œå¦åˆ™ä¼ å…¥çš„åœ°å€å€¼æ— æ³•ç¡®å®šè¾¹ç•Œï¼Œæ¯”å¦‚ä½ æåˆ°çš„å˜é•¿AF_UNIXã€‚é•¿åº¦å¯ä»¥å¸®åŠ©æˆ‘ä»¬é¿å…&quot;ç¼“å†²åŒºæº¢å‡º&quot;çš„é—®é¢˜ï¼Œåšä¸€å±‚ä¿æŠ¤ã€‚<br><br>ç¬¬äºŒä¸ªé—®é¢˜ï¼Œæ–°çš„socketè¿˜æ˜¯é‚£ä¸ªç›‘å¬ç«¯å£ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1566214375,"ip_address":"","comment_id":125278,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5861104830","product_id":100032701,"comment_content":"æˆ‘è®¤ä¸ºbindå‡½æ•°çš„ç¬¬ä¸‰ä¸ªå‚æ•°å®é™…ä¸Šæ²¡å•¥ç”¨ï¼Œæœ‰å‰ä¸¤ä¸ªå‚æ•°å°±å¯ä»¥ç¡®å®šæ˜¯å“ªç§ç»“æ„äº†ï¼Œç»“æ„çš„æœ€å¤§é•¿åº¦ä¹Ÿå°±ç¡®å®šäº†ï¼Œæ ¹æœ¬ä¸éœ€è¦ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œå³ä¾¿æ˜¯åœ°å€é•¿åº¦å¯å˜çš„AF_UNIXç±»å‹ï¼Œåªè¦å¯¹è·¯å¾„æŒ‰ç…§å­—ç¬¦ä¸²æ¥è§£æå°±è¡Œäº†ã€‚<br><br>æˆ‘ç†è§£bindå‡½æ•°çš„ä½œç”¨å°±æ˜¯æŠŠsocketçš„æ–‡ä»¶æè¿°ç¬¦ä¸ï¼ˆipåœ°å€,ç«¯å£å·ï¼‰è¿™ä¸ªå¯¹å„¿ç»‘å®šåœ¨ä¸€èµ·ï¼Œä½†å¦‚æœè¿™ä¹ˆç†è§£çš„è¯ï¼Œacceptçš„æ—¶å€™ä¼šè¿”å›ä¸€ä¸ªæ–°çš„socketï¼Œè¿™ä¸ªæ–°çš„socketæ˜¯å¦å¯¹åº”ä¸€ä¸ªæ–°çš„ç«¯å£å·å‘¢ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463507,"discussion_content":"ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘è§‰å¾—æ˜¯æœ‰ä½œç”¨çš„ï¼Œå¦åˆ™ä¼ å…¥çš„åœ°å€å€¼æ— æ³•ç¡®å®šè¾¹ç•Œï¼Œæ¯”å¦‚ä½ æåˆ°çš„å˜é•¿AF_UNIXã€‚é•¿åº¦å¯ä»¥å¸®åŠ©æˆ‘ä»¬é¿å…&amp;quot;ç¼“å†²åŒºæº¢å‡º&amp;quot;çš„é—®é¢˜ï¼Œåšä¸€å±‚ä¿æŠ¤ã€‚\n\nç¬¬äºŒä¸ªé—®é¢˜ï¼Œæ–°çš„socketè¿˜æ˜¯é‚£ä¸ªç›‘å¬ç«¯å£ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566214375,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":123693,"user_name":"è‹¦è¡Œåƒ§","can_delete":false,"product_type":"c1","uid":1055334,"ip_address":"","ucode":"726024A9A9CF44","user_header":"https://static001.geekbang.org/account/avatar/00/10/1a/66/2d9db9ed.jpg","comment_is_top":false,"comment_ctime":1565744052,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5860711348","product_id":100032701,"comment_content":"é¡¶ä¸Šçš„ç•™è¨€éå¸¸å®Œç¾çš„è§£é‡Šäº†ä¸ºä»€ä¹ˆæ˜¯ä¸‰æ¬¡æ¡æ‰‹","like_count":1},{"had_liked":false,"id":123684,"user_name":"Cbywy","can_delete":false,"product_type":"c1","uid":1475714,"ip_address":"","ucode":"187B7048902DFD","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epr1aKPQKuSF1icgV3SIDU0rrTnwYgSboiaffldRXbSwh4N9HftVicvKgPJ1PqUpZ6mS1dT2PfXCIsYw/132","comment_is_top":false,"comment_ctime":1565743701,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5860710997","product_id":100032701,"comment_content":"1 éé˜»å¡acceptç«‹å³è¿”å›ï¼Œä½œç”¨å°±æ˜¯å¯ä»¥ä¸é˜»å¡çº¿ç¨‹<br>2 connectä¹‹å‰bindå¯ä»¥ç”¨äºå¤šç½‘å¡çš„æ—¶å€™ï¼Œä½¿ç”¨ä¸åŒç½‘å¡","like_count":1},{"had_liked":false,"id":122280,"user_name":"zhchnchn","can_delete":false,"product_type":"c1","uid":1110218,"ip_address":"","ucode":"2219E40ED134D4","user_header":"https://static001.geekbang.org/account/avatar/00/10/f0/ca/4560f06b.jpg","comment_is_top":false,"comment_ctime":1565329058,"is_pvip":false,"replies":[{"id":"45151","content":"1.ä¸¤ä¸ªä¸æ˜¯ä¸€ä¸ªä¸œè¥¿ï¼Œä¸€ä¸ªæ˜¯å¥—æ¥å­—åœ°å€ï¼Œä¸€ä¸ªæ˜¯å¥—æ¥å­—ï¼Œéƒ½éœ€è¦è®¾ç½®ã€‚<br><br>2.unreachableæ˜¯è¢«åŠ¨æ”¶åˆ°äº†å…¶ä»–ç½‘ç»œæ¶‰ç¬”å‘æ¥çš„ICMPæŠ¥æ–‡ä¿¡æ¯ï¼Œè€Œtimeoutæ˜¯åœ¨å°è¯•ä¸€æ®µæ—¶é—´åä¸»åŠ¨æ”¾å¼ƒçš„ã€‚<br>","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1565576846,"ip_address":"","comment_id":122280,"utype":1}],"discussion_count":4,"race_medal":0,"score":"5860296354","product_id":100032701,"comment_content":"è¿™ç¯‡å¾ˆæ˜¯è§£æƒ‘ï¼Œæ„Ÿè°¢ã€‚æœ‰2ä¸ªé—®é¢˜æƒ³è¯·æ•™è€å¸ˆï¼š<br>1. `socket`å‡½æ•°çš„å‚æ•°`domain`çš„å€¼ï¼Œåœ¨`bind`å‡½æ•°çš„å‚æ•°`addr`çš„`sin_family`ä¸­ä¹Ÿéœ€è¦è®¾ç½®ï¼Œè¿™æ ·ä¸æ˜¯é‡å¤äº†å—ï¼Ÿ<br>2. `connect`å‡½æ•°å‡ºé”™è¿”å›å¯èƒ½çš„3ç§æƒ…å†µä¸­ï¼Œå…¶ä¸­ç¬¬1ç§â€œTIMEOUT é”™è¯¯â€å’Œç¬¬3ç§â€œdestination unreachableâ€ï¼Œæ„Ÿè§‰éƒ½æ˜¯è¿æ¥ä¸åˆ°æœåŠ¡ç«¯çš„IPï¼Œè¿™ä¸¤ç§æƒ…å†µæœ‰ä»€ä¹ˆåŒºåˆ«å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462185,"discussion_content":"1.ä¸¤ä¸ªä¸æ˜¯ä¸€ä¸ªä¸œè¥¿ï¼Œä¸€ä¸ªæ˜¯å¥—æ¥å­—åœ°å€ï¼Œä¸€ä¸ªæ˜¯å¥—æ¥å­—ï¼Œéƒ½éœ€è¦è®¾ç½®ã€‚\n\n2.unreachableæ˜¯è¢«åŠ¨æ”¶åˆ°äº†å…¶ä»–ç½‘ç»œæ¶‰ç¬”å‘æ¥çš„ICMPæŠ¥æ–‡ä¿¡æ¯ï¼Œè€Œtimeoutæ˜¯åœ¨å°è¯•ä¸€æ®µæ—¶é—´åä¸»åŠ¨æ”¾å¼ƒçš„ã€‚\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565576846,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1359701,"avatar":"https://static001.geekbang.org/account/avatar/00/14/bf/55/198c6104.jpg","nickname":"å°ä¼Ÿ","note":"","ucode":"124953423491E2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4905,"discussion_content":"å¥—æ¥å­—å’Œå¥—æ¥å­—åœ°å€å¯¹åº”javaæ¥è¯´ï¼Œå°±æ˜¯å¯¹è±¡æœ¬èº«å’Œå¯¹è±¡å†…å­˜åœ°å€ï¼Œå¯¹è±¡æœ¬èº«æ˜¯æœ‰æˆå‘˜å˜é‡å’Œæ–¹æ³•çš„ï¼Œå¯ä»¥ç›´æ¥ç”¨æ¥è°ƒç”¨æ–¹æ³•ï¼Œè€Œå¯¹è±¡åœ°å€çš„å”¯ä¸€ä½œç”¨æ˜¯æ ‡ç¤ºå‡ºå¯¹è±¡åœ¨å†…å­˜ä¸­çš„ä½ç½®ï¼Œå…¶æœ¬èº«ä¸èƒ½ç›´æ¥ä½¿ç”¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565826341,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1109382,"avatar":"https://static001.geekbang.org/account/avatar/00/10/ed/86/5855aaa4.jpg","nickname":"åˆ˜æ˜","note":"","ucode":"5871C54AAE1A81","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4540,"discussion_content":"TIMEOUTè¡¨ç¤ºå‘å‡ºSYNä¹‹åæ²¡æ”¶åˆ°ä»»ä½•å›å¤ï¼ŒDestination Unrechableåˆ™é€šå¸¸æ˜¯ç”±è·¯ç”±å™¨å›å¤äº†ICMPã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565529900,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1284592,"avatar":"https://static001.geekbang.org/account/avatar/00/13/99/f0/d9343049.jpg","nickname":"æ˜Ÿäº¦è¾°","note":"","ucode":"B0388FBFFDEE7E","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4450,"discussion_content":"Timeout å¯ä»¥ç†è§£ä¸ºï¼Œç«¯å£é€šï¼Œä½†æ˜¯æ²¡æœ‰æœåŠ¡ã€‚\nUnreachable ç›´æ¥ç½‘ç»œä¸å¯è¾¾ï¼Œæˆ–è€…æ²¡å¼€å¯å¯¹åº”ç«¯å£ã€‚\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565428580,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122236,"user_name":"Keep-Moving","can_delete":false,"product_type":"c1","uid":1182631,"ip_address":"","ucode":"76F33C06E07A27","user_header":"https://static001.geekbang.org/account/avatar/00/12/0b/a7/6ef32187.jpg","comment_is_top":false,"comment_ctime":1565320872,"is_pvip":false,"replies":[{"id":"45144","content":"å› ä¸ºä¸‰æ¬¡æ¡æ‰‹æ˜¯æœ€ç®€æ´çš„æ–¹å¼ï¼Œå·²ç»è¶³å¤Ÿå®Œæˆä¿¡æ¯çš„ç¡®è®¤ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1565576534,"ip_address":"","comment_id":122236,"utype":1}],"discussion_count":3,"race_medal":0,"score":"5860288168","product_id":100032701,"comment_content":"è€å¸ˆï¼Œæƒ³é—®ä¸€ä¸‹ï¼Œä¸ºä»€ä¹ˆæ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼Œè€Œä¸æ˜¯å››æ¬¡ã€äº”æ¬¡æ¡æ‰‹ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462165,"discussion_content":"å› ä¸ºä¸‰æ¬¡æ¡æ‰‹æ˜¯æœ€ç®€æ´çš„æ–¹å¼ï¼Œå·²ç»è¶³å¤Ÿå®Œæˆä¿¡æ¯çš„ç¡®è®¤ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565576534,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1101405,"avatar":"https://static001.geekbang.org/account/avatar/00/10/ce/5d/5297717a.jpg","nickname":"åˆè§","note":"","ucode":"06D7952CED37D3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4522,"discussion_content":"æ›¾ç»æˆ‘ä¹Ÿçº ç»“è¿‡è¿™ä¸ªé—®é¢˜~\n\né¦–å…ˆä½ è¦ç†è§£ tcp æ˜¯å¯é çš„é“¾æ¥ï¼Œä¸€ä¸ªé“¾æ¥çš„å¯é æ€§ï¼ŒæŒ‡çš„æ˜¯å®¢æˆ·ç«¯ï¼ˆç®€ç§° Cï¼‰ä¸æœåŠ¡ç«¯ï¼ˆç®€ç§° Sï¼‰çš„æ¥æ”¶èƒ½åŠ›ä¸å‘é€èƒ½åŠ›ã€‚ä»¥ä¸Šå››ç§èƒ½åŠ›éƒ½æ²¡æœ‰é—®é¢˜ï¼Œé‚£ä¹ˆè¿™ä¸ªé“¾æ¥æ˜¯å¯é çš„ã€‚\n\næ‰€ä»¥å†å›åˆ°ä½ çš„é—®é¢˜ï¼Œä¸ºä»€ä¹ˆéœ€è¦ä¸‰æ¬¡æ¡æ‰‹ï¼Ÿ\n\nç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼Œ S æ”¶åˆ°äº† C çš„è¯·æ±‚ï¼Œ S çŸ¥é“äº† C çš„å‘é€æ²¡é—®é¢˜\n \nç¬¬äºŒæ¬¡æ¡æ‰‹ï¼Œ C æ”¶åˆ°äº† S çš„è¯·æ±‚ï¼ŒC çŸ¥é“äº† S çš„å‘é€ã€æ¥æ”¶æ²¡é—®é¢˜\n\nç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼ŒS æ”¶åˆ°äº† C çš„è¯·æ±‚ï¼ŒS çŸ¥é“äº† C çš„æ¥æ”¶æ²¡é—®é¢˜\n\n\nè‡³æ­¤ï¼ŒS ä¸ C ç›¸äº’éƒ½çŸ¥é“äº†å¯¹æ–¹æ²¡é—®é¢˜ï¼Œé“¾æ¥å»ºç«‹æˆåŠŸã€‚ä¸‰æ¬¡è¶³å¤Ÿã€‚","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1565516813,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1146178,"avatar":"https://static001.geekbang.org/account/avatar/00/11/7d/42/c324a7de.jpg","nickname":"å±±é·¹Â·China","note":"","ucode":"1A13AAC813C1C8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4375,"discussion_content":"é˜²æ­¢æ— æ•ˆtcpé“¾æ¥ï¼Œä¸‰æ¬¡å°±å¤Ÿäº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565340813,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122193,"user_name":"æœ¨å°æŸ’","can_delete":false,"product_type":"c1","uid":1000802,"ip_address":"","ucode":"947439CDD0B5B1","user_header":"https://static001.geekbang.org/account/avatar/00/0f/45/62/3c6041e7.jpg","comment_is_top":false,"comment_ctime":1565314723,"is_pvip":false,"replies":[{"id":"45139","content":"è¿™æ˜¯æœ‰åŸå› çš„ï¼Œä¸éœ€è¦æ¯æ¬¡éƒ½æ¢ç«¯å£ï¼Œä¸‹é¢ä¼šé™åˆ°å…·ä½“è§£æ³•ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1565576208,"ip_address":"","comment_id":122193,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5860282019","product_id":100032701,"comment_content":"è®°å¾—å¾ˆä¹…å‰å­¦å¥—æ¥å­—ï¼Œæä¾›çš„ä¾‹å­å°±æ˜¯å®¢æˆ·ç«¯bindç«¯å£ï¼ŒåŸºæœ¬ç¬¬äºŒæ¬¡å’Œä»¥ååœ¨è¿è¡Œï¼Œå°±å‘Šè¯‰ç«¯å£è¢«å ç”¨ï¼Œé‚£æ—¶å€™ä¸æ‡‚ï¼Œå°±æ¢ä¸ªç«¯å£å†æ¥ä¸€æ¬¡","like_count":1,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462140,"discussion_content":"è¿™æ˜¯æœ‰åŸå› çš„ï¼Œä¸éœ€è¦æ¯æ¬¡éƒ½æ¢ç«¯å£ï¼Œä¸‹é¢ä¼šé™åˆ°å…·ä½“è§£æ³•ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565576208,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1284592,"avatar":"https://static001.geekbang.org/account/avatar/00/13/99/f0/d9343049.jpg","nickname":"æ˜Ÿäº¦è¾°","note":"","ucode":"B0388FBFFDEE7E","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4451,"discussion_content":"Socket æœ‰ä¸ªreuse å±æ€§äº†è§£ä¸€ä¸‹ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565428737,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122122,"user_name":"æ˜Ÿäº¦è¾°","can_delete":false,"product_type":"c1","uid":1284592,"ip_address":"","ucode":"B0388FBFFDEE7E","user_header":"https://static001.geekbang.org/account/avatar/00/13/99/f0/d9343049.jpg","comment_is_top":false,"comment_ctime":1565307705,"is_pvip":true,"replies":[{"id":"45135","content":"éé˜»å¡ï¼Œæ˜¯æŒ‡I&#47;Oæ¨¡å‹ï¼Œä¸æ˜¯ç­‰å¾…æ•°æ®æˆ–è¿æ¥ï¼Œè¿˜æ˜¯é€šè¿‡I&#47;Oé€šçŸ¥çš„æ–¹å¼æ¥æ„ŸçŸ¥æ•°æ®æˆ–è¿æ¥ã€‚<br><br>åé¢çš„ç« èŠ‚ä¼šè¯¦ç»†è®²è¿°éé˜»å¡æ¨¡å‹","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1565575815,"ip_address":"","comment_id":122122,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5860275001","product_id":100032701,"comment_content":"éé˜»å¡ï¼Œä¸€èˆ¬æ˜¯æŠŠè¯·æ±‚æ¥æ”¶åˆ°çš„å¥—æ¥å­—ä¼ é€’ç»™å­è¿›ç¨‹æˆ–å­çº¿ç¨‹ï¼Œç„¶åï¼Œä¸»è¿›ç¨‹ï¼Œä¸»çº¿ç¨‹ç»§ç»­ç­‰å¾…ä¸‹ä¸€ä¸ªè¯·æ±‚ã€‚å¤šæ•°ç½‘ç»œæœåŠ¡å™¨éƒ½æ˜¯è¿™ä¸ªè·¯å­å§","like_count":1,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462110,"discussion_content":"éé˜»å¡ï¼Œæ˜¯æŒ‡I/Oæ¨¡å‹ï¼Œä¸æ˜¯ç­‰å¾…æ•°æ®æˆ–è¿æ¥ï¼Œè¿˜æ˜¯é€šè¿‡I/Oé€šçŸ¥çš„æ–¹å¼æ¥æ„ŸçŸ¥æ•°æ®æˆ–è¿æ¥ã€‚\n\nåé¢çš„ç« èŠ‚ä¼šè¯¦ç»†è®²è¿°éé˜»å¡æ¨¡å‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565575815,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":346013,"user_name":"gecko","can_delete":false,"product_type":"c1","uid":1198048,"ip_address":"","ucode":"2B7122536F1A0E","user_header":"https://static001.geekbang.org/account/avatar/00/12/47/e0/1ff26e99.jpg","comment_is_top":false,"comment_ctime":1652768169,"is_pvip":false,"replies":[{"id":"126590","content":"æˆ‘ä¹Ÿè¯•äº†ä¸€ä¸‹ï¼Œç¡®å®å¦‚æ­¤ï¼ŒæŸ¥äº†äº›èµ„æ–™ï¼Œç¬¬ä¸‰ä¸ªpacketçš„ackè®¾ç½®ä¸º1ï¼Œä¸€èˆ¬è¡¨ç¤º&quot;æˆ‘åœ¨ç­‰å¾…ç¬¬ä¸€ä¸ªåŒ…ï¼Œå…¶ä»–çš„éƒ½å·²ç»æ”¶åˆ°äº†&quot;ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1618647","ctime":1653809575,"ip_address":"","comment_id":346013,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1652768169","product_id":100032701,"comment_content":"è¯·æ•™è€å¸ˆ æˆ‘è¿™é‡Œçš„æƒ…å†µ ç¬¬ä¸‰æ¬¡æ¡æ‰‹çš„æ—¶å€™ ä¸æ˜¯k+1 <br>13:27:29.551943 IP 172.16.100.4.33550 &gt; 172.16.100.3.80: Flags [S], seq 2329538722, win 29200, options [mss 1460,sackOK,TS val 27284972 ecr 0,nop,wscale 7], length 0<br><br>13:27:29.551992 IP 172.16.100.3.80 &gt; 172.16.100.4.33550: Flags [S.], seq 2423752282, ack 2329538723, win 28960, options [mss 1460,sackOK,TS val 5204893 ecr 27284972,nop,wscale 7], length 0<br><br>13:27:29.552315 IP 172.16.100.4.33550 &gt; 172.16.100.3.80: Flags [.], ack 1, win 229, options [nop,nop,TS val 27284973 ecr 5204893], length 0<br><br><br>13:27:51.996548 IP 172.16.100.4.33550 &gt; 172.16.100.3.80: Flags [P.], seq 1:7, ack 1, win 229, options [nop,nop,TS val 27307417 ecr 5204893], length 6: HTTP<br>13:27:51.996667 IP 172.16.100.3.80","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":574040,"discussion_content":"æˆ‘ä¹Ÿè¯•äº†ä¸€ä¸‹ï¼Œç¡®å®å¦‚æ­¤ï¼ŒæŸ¥äº†äº›èµ„æ–™ï¼Œç¬¬ä¸‰ä¸ªpacketçš„ackè®¾ç½®ä¸º1ï¼Œä¸€èˆ¬è¡¨ç¤º&#34;æˆ‘åœ¨ç­‰å¾…ç¬¬ä¸€ä¸ªåŒ…ï¼Œå…¶ä»–çš„éƒ½å·²ç»æ”¶åˆ°äº†&#34;ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1653809575,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":336227,"user_name":"Garfield","can_delete":false,"product_type":"c1","uid":2069047,"ip_address":"","ucode":"6F946BB7CA7973","user_header":"https://static001.geekbang.org/account/avatar/00/1f/92/37/49f3982a.jpg","comment_is_top":false,"comment_ctime":1646017211,"is_pvip":false,"replies":[{"id":"123123","content":"æ ¹æ®é”™è¯¯è¿”å›ç æ¥åŒºåˆ†å•Šï¼Œæˆ‘ä¸æ˜¯å¾ˆæ¸…æ¥šä½ çš„é—®é¢˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1618647","ctime":1646487734,"ip_address":"","comment_id":336227,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1646017211","product_id":100032701,"comment_content":"è€å¸ˆï¼Œè¯·é—®å®¢æˆ·ç«¯è°ƒç”¨connectåè¿”å›å¦‚ä¸‹çš„ä¸¤ç§é”™è¯¯æ—¶å¦‚ä½•åŒºåˆ†ï¼Ÿ<br>1. ä¸‰æ¬¡æ¡æ‰‹æ— æ³•å»ºç«‹ï¼Œå®¢æˆ·ç«¯å‘å‡ºçš„ SYN åŒ…æ²¡æœ‰ä»»ä½•å“åº”ï¼Œäºæ˜¯è¿”å› TIMEOUT é”™è¯¯ã€‚è¿™ç§æƒ…å†µæ¯”è¾ƒå¸¸è§çš„åŸå› æ˜¯å¯¹åº”çš„æœåŠ¡ç«¯ IP å†™é”™ã€‚<br>3. å®¢æˆ·å‘å‡ºçš„ SYN åŒ…åœ¨ç½‘ç»œä¸Šå¼•èµ·äº†&quot;destination unreachable&quot;ï¼Œå³ç›®çš„ä¸å¯è¾¾çš„é”™è¯¯ã€‚è¿™ç§æƒ…å†µæ¯”è¾ƒå¸¸è§çš„åŸå› æ˜¯å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯è·¯ç”±ä¸é€šã€‚","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":554609,"discussion_content":"æ ¹æ®é”™è¯¯è¿”å›ç æ¥åŒºåˆ†å•Šï¼Œæˆ‘ä¸æ˜¯å¾ˆæ¸…æ¥šä½ çš„é—®é¢˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646487735,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":331999,"user_name":"æ·¡C","can_delete":false,"product_type":"c1","uid":2696647,"ip_address":"","ucode":"046DE6F5301044","user_header":"https://static001.geekbang.org/account/avatar/00/29/25/c7/edd74dfb.jpg","comment_is_top":false,"comment_ctime":1642953491,"is_pvip":false,"replies":[{"id":"122025","content":"æˆ‘æ„¿æ„~~~","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1618647","ctime":1644729810,"ip_address":"","comment_id":331999,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1642953491","product_id":100032701,"comment_content":"ä¸‰æ¬¡æ¡æ‰‹å¯ä»¥ç®€å•ç†è§£ä¸º<br>å¥³ï¼šä½ æ„¿æ„åšæˆ‘ç”·æœ‹å‹å˜›<br>ç”·ï¼šæˆ‘æ„¿æ„ï¼Œä½ æ„¿æ„åšæˆ‘å¥³æœ‹å‹å˜›<br>å¥³ï¼šæˆ‘æ„¿æ„","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":550775,"discussion_content":"æˆ‘æ„¿æ„~~~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644729811,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":331824,"user_name":"è¥¿é—¨å¹ç‰›","can_delete":false,"product_type":"c1","uid":1508990,"ip_address":"","ucode":"E5D3624DDE1E83","user_header":"https://static001.geekbang.org/account/avatar/00/17/06/7e/735968e2.jpg","comment_is_top":false,"comment_ctime":1642786964,"is_pvip":false,"replies":[{"id":"121288","content":"ä¸‰æ¬¡æ¡æ‰‹çš„æœ¬è´¨ï¼Œæ˜¯ç¡®ç«‹ä¸€æ¡ç¨³å®šçš„é€šä¿¡è¿æ¥ï¼Œåºå·åªæ˜¯è¿™ä¸ªè¿æ¥çš„å®ç°ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1618647","ctime":1642924366,"ip_address":"","comment_id":331824,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1642786964","product_id":100032701,"comment_content":"ä¸‰æ¬¡æ¡æ‰‹çš„æœ¬è´¨ï¼Œå°±æ˜¯éœ€è¦ç¡®å®šä¸€ä¸ªå‡†ç¡®çš„èµ·å§‹åºå·ï¼Œtcp çš„å¯é ä¼ è¾“ï¼Œéƒ½æ˜¯åŸºäºåºå·çš„","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":547894,"discussion_content":"ä¸‰æ¬¡æ¡æ‰‹çš„æœ¬è´¨ï¼Œæ˜¯ç¡®ç«‹ä¸€æ¡ç¨³å®šçš„é€šä¿¡è¿æ¥ï¼Œåºå·åªæ˜¯è¿™ä¸ªè¿æ¥çš„å®ç°ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642924366,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":327632,"user_name":"æ®‹å¤©å™¬é­‚","can_delete":false,"product_type":"c1","uid":1506609,"ip_address":"","ucode":"A2AD8303A4518D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/q2HwchogzNiavKhIB4GfAxH6B88NhSoC7B7keVEUqiaP6JPokDUNJLYehocOyqYqrhA3iaxywyRXLYkYJjDUQESZw/132","comment_is_top":false,"comment_ctime":1640217736,"is_pvip":false,"replies":[{"id":"119413","content":"è¡¨ç¤ºæ˜¯ä¸‹ä¸€ä¸ªåºåˆ—å·ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1618647","ctime":1640402318,"ip_address":"","comment_id":327632,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1640217736","product_id":100032701,"comment_content":"åºåˆ—å·åœ¨ackä¸­ä¸ºä»€ä¹ˆè¦åŠ ä¸€å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":541482,"discussion_content":"è¡¨ç¤ºæ˜¯ä¸‹ä¸€ä¸ªåºåˆ—å·ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1640402318,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":289317,"user_name":"Mark","can_delete":false,"product_type":"c1","uid":1350902,"ip_address":"","ucode":"D60E5269080BA9","user_header":"https://static001.geekbang.org/account/avatar/00/14/9c/f6/30dfdc9f.jpg","comment_is_top":false,"comment_ctime":1618975825,"is_pvip":false,"replies":[{"id":"105520","content":"ä¸€ä¸ªæ˜¯socketï¼Œä¸€ä¸ªæ˜¯socketåœ°å€ï¼Œåº”è¯¥ä¸é‡å¤å•Šã€‚å„æœ‰å„çš„ä½œç”¨ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1620223693,"ip_address":"","comment_id":289317,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1618975825","product_id":100032701,"comment_content":"è€å¸ˆï¼Œåˆ›å»ºsocketæ—¶ï¼Œå·²ç»æŒ‡å®šdomainäº†ï¼Œbindçš„æ—¶å€™åˆå…³è”å¥—æ¥å­—åœ°å€äº†ï¼Œè€Œå¥—æ¥å­—åœ°å€ä¹ŸæŒ‡å®šdomainäº†ï¼Œè¿™æ ·ä¸é‡å¤äº†å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518882,"discussion_content":"ä¸€ä¸ªæ˜¯socketï¼Œä¸€ä¸ªæ˜¯socketåœ°å€ï¼Œåº”è¯¥ä¸é‡å¤å•Šã€‚å„æœ‰å„çš„ä½œç”¨ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620223693,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":279461,"user_name":"æ±Ÿå±±å¦‚ç”»","can_delete":false,"product_type":"c1","uid":1188280,"ip_address":"","ucode":"BEB6228E6135B5","user_header":"https://static001.geekbang.org/account/avatar/00/12/21/b8/aca814dd.jpg","comment_is_top":false,"comment_ctime":1613791861,"is_pvip":false,"replies":[{"id":"101997","content":"è°¢è°¢~","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1614516056,"ip_address":"","comment_id":279461,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1613791861","product_id":100032701,"comment_content":"å­¦ä¹ äº†ï¼å†™çš„å¥½æ£’ ï¼ï¼","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":515746,"discussion_content":"è°¢è°¢~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614516056,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":267916,"user_name":"é‡‘é‘«","can_delete":false,"product_type":"c1","uid":1116257,"ip_address":"","ucode":"8AA30E8DD736FB","user_header":"https://static001.geekbang.org/account/avatar/00/11/08/61/9e0f8b8d.jpg","comment_is_top":false,"comment_ctime":1607995826,"is_pvip":false,"replies":[{"id":"98873","content":"å—¯ï¼Œå“­å§å“­å§ä¸æ˜¯ç½ª:)","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1610285895,"ip_address":"","comment_id":267916,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1607995826","product_id":100032701,"comment_content":"å“­æ³£ï¼Œè¿™ç¯‡è®²çš„è¶…çº§æ¸…æ¥šï¼Œä¹‹å‰æ¨¡ç³Šçš„ç‚¹éƒ½è¸©åˆ°äº†ã€‚","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":511788,"discussion_content":"å—¯ï¼Œå“­å§å“­å§ä¸æ˜¯ç½ª:)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610285895,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":247718,"user_name":"æˆ‘æ˜¯ç®¡å°äº®","can_delete":false,"product_type":"c1","uid":2123892,"ip_address":"","ucode":"A1C624CF9E1CA3","user_header":"https://static001.geekbang.org/account/avatar/00/20/68/74/aea478ba.jpg","comment_is_top":false,"comment_ctime":1599806616,"is_pvip":false,"replies":[{"id":"92047","content":"èµä½ çš„å›å¤ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1601869717,"ip_address":"","comment_id":247718,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1599806616","product_id":100032701,"comment_content":"ä¸‰æ¬¡æ¡æ‰‹æ˜¯ä¸ºäº†é˜²æ­¢<br>- å®¢æˆ·ç«¯çš„è¯·æ±‚æŠ¥æ–‡åœ¨ç½‘ç»œä¸­æ»ç•™ï¼Œå½“å®¢æˆ·ç«¯è¶…æ—¶é‡ä¼ äº†è¯·æ±‚æŠ¥æ–‡ï¼ŒæœåŠ¡ç«¯å»ºç«‹è¿æ¥ï¼Œä¼ è¾“æ•°æ®å¹¶é‡Šæ”¾è¿æ¥ä¹‹åï¼ŒæœåŠ¡ç«¯åˆæ”¶åˆ°äº†å®¢æˆ·ç«¯æ»ç•™çš„è¯·æ±‚æŠ¥æ–‡ï¼Œå»ºç«‹è¿æ¥ä¸€ç›´ç­‰å¾…å®¢æˆ·ç«¯å‘é€æ•°æ®ï¼›<br>- æœåŠ¡ç«¯å¯¹å®¢æˆ·ç«¯çš„è¯·æ±‚è¿›è¡Œå›åº”åï¼ˆç¬¬äºŒæ¬¡æ¡æ‰‹åï¼‰ï¼Œå°±ä¼šç†æ‰€åº”å½“çš„è®¤ä¸ºè¿æ¥å·²ç»å»ºç«‹ï¼Œè€Œå¦‚æœå®¢æˆ·ç«¯æ²¡æœ‰æ”¶åˆ°æœåŠ¡ç«¯çš„å›åº”å‘¢ï¼Ÿæ­¤æ—¶ï¼Œå®¢æˆ·ç«¯è®¤ä¸ºè¿æ¥æœªå»ºç«‹ï¼Œä½†æ˜¯æœåŠ¡ç«¯ä¼šå¯¹å»ºç«‹çš„è¿ä¿å­˜èµ„æºï¼Œå¦‚æœå¤§é‡è¿™ç§æƒ…å†µï¼ŒæœåŠ¡ç«¯å°±ä¼šå´©æºƒï¼›<br>- æœåŠ¡ç«¯ç»™å®¢æˆ·ç«¯å‘é€åŒæ­¥ä»¥åŠç¡®è®¤çš„æŠ¥æ–‡æ˜¯å¯ä»¥åˆå¹¶çš„ï¼Œå››æ¬¡ä¼šæµªè´¹æ—¶é—´ï¼›","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":505478,"discussion_content":"èµä½ çš„å›å¤ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1601869717,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":246970,"user_name":"hammond","can_delete":false,"product_type":"c1","uid":1196480,"ip_address":"","ucode":"AEEE63C5BB00C2","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ereNicKErbtBVroMdvzl1EyXSuAGiaicM6iaumHdKmRQANH3J9UVzV12at2pJ5rraiaObNKpibSDqDfD3lg/132","comment_is_top":false,"comment_ctime":1599546017,"is_pvip":false,"replies":[{"id":"92040","content":"int sock = socket (PF_INET, SOCK_STREAM, 0)ï¼Œæ˜¯è°ƒç”¨ç³»ç»Ÿå‡½æ•°åˆ›å»ºä¸€ä¸ªIPV4åœ°å€çš„socketï¼Œintç±»å‹æ˜¯Linuxå®šä¹‰æ–‡ä»¶æè¿°å­—çš„ç±»å‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1601867223,"ip_address":"","comment_id":246970,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1599546017","product_id":100032701,"comment_content":"æ‚¨å¥½ï¼Œæ–‡ä¸­ä»£ç çš„ int sock æ˜¯ç”¨æ¥æ£€æµ‹ socket å‡½æ•°æ˜¯å¦åˆ›å»ºæˆåŠŸï¼Œ è¿˜æ˜¯è¡¨ç¤º å­—èŠ‚æµç±»å‹çš„ IPV4 socket<br>å®ƒä¸ºä»€ä¹ˆæ˜¯ä¸€ä¸ª int ç±»å‹ ï¼Ÿ æœŸå¾…æ‚¨çš„å›å¤<br>","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":505276,"discussion_content":"int sock = socket (PF_INET, SOCK_STREAM, 0)ï¼Œæ˜¯è°ƒç”¨ç³»ç»Ÿå‡½æ•°åˆ›å»ºä¸€ä¸ªIPV4åœ°å€çš„socketï¼Œintç±»å‹æ˜¯Linuxå®šä¹‰æ–‡ä»¶æè¿°å­—çš„ç±»å‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1601867223,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":235456,"user_name":"å°ä»™å¥³","can_delete":false,"product_type":"c1","uid":2069778,"ip_address":"","ucode":"543DD387C634D0","user_header":"https://static001.geekbang.org/account/avatar/00/1f/95/12/33028a3f.jpg","comment_is_top":false,"comment_ctime":1595043737,"is_pvip":false,"replies":[{"id":"87048","content":"æˆ‘æƒ³ä½ æŒ‡çš„æ˜¯listenå‡½æ•°é‡Œé¢backlogè¡¨ç¤ºçš„é˜Ÿåˆ—ï¼Œè¡¨ç¤ºå·²å®Œæˆçš„è¿æ¥å’Œæœªå®Œæˆçš„è¿æ¥ï¼Œè€Œacceptå‡½æ•°åˆ™æ˜¯è¿”å›å·²å®Œæˆçš„è¿æ¥é˜Ÿåˆ—é‡Œçš„é˜Ÿåˆ—å¤´ï¼Œå³æœ€æ—©çš„è¿æ¥ã€‚<br>æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥è®¤ä¸ºé˜Ÿåˆ—é‡Œå­˜æ”¾çš„æ˜¯è¿æ¥æ•°æ®ï¼Œè¿™ä¸ªè¿æ¥åŒ…æ‹¬äº†å®¢æˆ·ç«¯çš„åœ°å€ã€ç«¯å£ï¼ŒæœåŠ¡ç«¯çš„åœ°å€å’Œç«¯å£ç­‰æ•°æ®ï¼Œè¿˜åŒ…æ‹¬äº†å†…æ ¸å’Œè¿™ä¸ªè¿æ¥ç›¸å…³è”çš„æ•°æ®ç»“æ„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1595165127,"ip_address":"","comment_id":235456,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1595043737","product_id":100032701,"comment_content":"accepté˜Ÿåˆ—ä¸­é‡Œé¢å­˜æ”¾çš„æ˜¯ä»€ä¹ˆ? å››å…ƒç»„ï¼Œè¿˜æ˜¯å®¢æˆ·ç«¯ä¼ æ¥çš„æ•°æ®","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":501729,"discussion_content":"æˆ‘æƒ³ä½ æŒ‡çš„æ˜¯listenå‡½æ•°é‡Œé¢backlogè¡¨ç¤ºçš„é˜Ÿåˆ—ï¼Œè¡¨ç¤ºå·²å®Œæˆçš„è¿æ¥å’Œæœªå®Œæˆçš„è¿æ¥ï¼Œè€Œacceptå‡½æ•°åˆ™æ˜¯è¿”å›å·²å®Œæˆçš„è¿æ¥é˜Ÿåˆ—é‡Œçš„é˜Ÿåˆ—å¤´ï¼Œå³æœ€æ—©çš„è¿æ¥ã€‚\næ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥è®¤ä¸ºé˜Ÿåˆ—é‡Œå­˜æ”¾çš„æ˜¯è¿æ¥æ•°æ®ï¼Œè¿™ä¸ªè¿æ¥åŒ…æ‹¬äº†å®¢æˆ·ç«¯çš„åœ°å€ã€ç«¯å£ï¼ŒæœåŠ¡ç«¯çš„åœ°å€å’Œç«¯å£ç­‰æ•°æ®ï¼Œè¿˜åŒ…æ‹¬äº†å†…æ ¸å’Œè¿™ä¸ªè¿æ¥ç›¸å…³è”çš„æ•°æ®ç»“æ„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595165127,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":232709,"user_name":"Geek_63bb29","can_delete":false,"product_type":"c1","uid":2017041,"ip_address":"","ucode":"65C27FA7531722","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/5kv7IqibneNnMLqtWZQR5f1et8lJmoxiaU43Ttzz3zqW7QzBqMkib8GCtImKsms7PPbWmTB51xRnZQAnRPfA1wVaw/132","comment_is_top":false,"comment_ctime":1594093957,"is_pvip":false,"replies":[{"id":"86793","content":"ä½ è¯´çš„å•è¿›ç¨‹æœåŠ¡å™¨ï¼Œåº”è¯¥æ˜¯æ¯æ¬¡åªèƒ½å¤„ç†ä¸€ä¸ªI&#47;Oè¯·æ±‚çš„æœåŠ¡å™¨ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼ŒæœåŠ¡å™¨ç«¯å¿…é¡»å»ºç«‹ä¸€ç§æœºåˆ¶æ¥å¤„ç†å·²ç»è¿æ¥çš„è¯·æ±‚ï¼Œä¾‹å¦‚forkä¸€ä¸ªå­è¿›ç¨‹ï¼Œè€Œæ–°çš„è¿æ¥åˆ™åœ¨acceptå‡½æ•°ä¸­è¿”å›ï¼Œå®¢æˆ·ç«¯ä»connectå‡½æ•°ä¸­è¿”å›ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1594904269,"ip_address":"","comment_id":232709,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1594093957","product_id":100032701,"comment_content":"è€å¸ˆï¼Œæœ‰ä¸€ä¸ªç–‘æƒ‘æ˜¯ï¼Œå¯¹äºå•è¿›ç¨‹æœåŠ¡å™¨ï¼Œä¸€ä¸ªå®¢æˆ·ç«¯ä¸å…¶å·²ç»å»ºç«‹è¿æ¥äº†ï¼Œå¦ä¸€ä¸ªå®¢æˆ·ç«¯åœ¨å‘èµ·è¿æ¥ï¼Œæ­¤æ—¶ï¼Œå®¢æˆ·ç«¯æ‰§è¡Œåˆ°å“ªä¸€æ­¥ï¼ŸæœåŠ¡ç«¯æ‰§è¡Œåˆ°å“ªä¸€æ­¥ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":500748,"discussion_content":"ä½ è¯´çš„å•è¿›ç¨‹æœåŠ¡å™¨ï¼Œåº”è¯¥æ˜¯æ¯æ¬¡åªèƒ½å¤„ç†ä¸€ä¸ªI/Oè¯·æ±‚çš„æœåŠ¡å™¨ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼ŒæœåŠ¡å™¨ç«¯å¿…é¡»å»ºç«‹ä¸€ç§æœºåˆ¶æ¥å¤„ç†å·²ç»è¿æ¥çš„è¯·æ±‚ï¼Œä¾‹å¦‚forkä¸€ä¸ªå­è¿›ç¨‹ï¼Œè€Œæ–°çš„è¿æ¥åˆ™åœ¨acceptå‡½æ•°ä¸­è¿”å›ï¼Œå®¢æˆ·ç«¯ä»connectå‡½æ•°ä¸­è¿”å›ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594904269,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":232703,"user_name":"Geek_63bb29","can_delete":false,"product_type":"c1","uid":2017041,"ip_address":"","ucode":"65C27FA7531722","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/5kv7IqibneNnMLqtWZQR5f1et8lJmoxiaU43Ttzz3zqW7QzBqMkib8GCtImKsms7PPbWmTB51xRnZQAnRPfA1wVaw/132","comment_is_top":false,"comment_ctime":1594092808,"is_pvip":false,"replies":[{"id":"86791","content":"ä½ çš„æ‰“å°å‡½æ•°å’Œä½ç½®å…·ä½“è´´ä¸Šæ¥çœ‹çœ‹","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1594904041,"ip_address":"","comment_id":232703,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1594092808","product_id":100032701,"comment_content":"è€å¸ˆï¼Œä½ å¥½ï¼Œä»æ–‡ç« ä¸­äº†è§£åˆ°æœåŠ¡ç«¯é˜»å¡åœ¨acceptï¼Œç„¶åæ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼Œæˆ‘åœ¨acceptå‰åŠ å…¥æ‰“å°è¯­å¥ï¼Œå‘ç°ï¼Œæ²¡æœ‰æ‰“å°ä»»ä½•ä¿¡æ¯ï¼Œä½†æ˜¯å®¢æˆ·ç«¯çš„connectå·²ç»è¿”å›äº†ï¼Œè¿™æ˜¯ä»€ä¹ˆåŸå› å‘€ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":500746,"discussion_content":"ä½ çš„æ‰“å°å‡½æ•°å’Œä½ç½®å…·ä½“è´´ä¸Šæ¥çœ‹çœ‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594904041,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2017041,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/5kv7IqibneNnMLqtWZQR5f1et8lJmoxiaU43Ttzz3zqW7QzBqMkib8GCtImKsms7PPbWmTB51xRnZQAnRPfA1wVaw/132","nickname":"Geek_63bb29","note":"","ucode":"65C27FA7531722","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":293804,"discussion_content":"è°¢è°¢è€å¸ˆå›å¸–ğŸ˜œåŸå› æ‰¾åˆ°äº†ï¼Œæ˜¯printfæ˜¯è¡Œç¼“å†²ï¼Œéœ€è¦åŠ \\næ‰ä¼šç«‹å³æ‰“ğŸ˜°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595671860,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":228929,"user_name":"Apprentice*å“","can_delete":false,"product_type":"c1","uid":2006896,"ip_address":"","ucode":"B78B68F963CE01","user_header":"https://static001.geekbang.org/account/avatar/00/1e/9f/70/0ef8a4d9.jpg","comment_is_top":false,"comment_ctime":1592840244,"is_pvip":false,"replies":[{"id":"84803","content":"ç¼–è¯‘çš„æ—¶å€™åŠ -lrt, çœ‹çœ‹æ˜¯å¦å¯ä»¥è§£å†³ä½ çš„é—®é¢˜","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1593173556,"ip_address":"","comment_id":228929,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1592840244","product_id":100032701,"comment_content":"è€å¸ˆï¼Œæ‚¨å¥½<br>æˆ‘å°†ä½ çš„GitHubä¸Šçš„ä»£ç æŒ‰è¦æ±‚ç¼–è¯‘åå‡ºç°ä»¥ä¸‹æŠ¥é”™æ˜¯æ€ä¹ˆå›äº‹å•Š<br>[ 97%] Linking C executable ..&#47;bin&#47;aio01<br>CMakeFiles&#47;aio01.dir&#47;aio01.c.o: In function `main&#39;:<br>aio01.c:(.text+0x197): undefined reference to `aio_write&#39;<br>aio01.c:(.text+0x1ec): undefined reference to `aio_error&#39;<br>aio01.c:(.text+0x200): undefined reference to `aio_error&#39;<br>aio01.c:(.text+0x215): undefined reference to `aio_return&#39;<br>aio01.c:(.text+0x31f): undefined reference to `aio_read&#39;<br>aio01.c:(.text+0x36b): undefined reference to `aio_error&#39;<br>aio01.c:(.text+0x37f): undefined reference to `aio_return&#39;<br>collect2: error: ld returned 1 exit status<br>chap-30&#47;CMakeFiles&#47;aio01.dir&#47;build.make:95: recipe for target &#39;bin&#47;aio01&#39; failed<br>make[2]: *** [bin&#47;aio01] Error 1<br>CMakeFiles&#47;Makefile2:2286: recipe for target &#39;chap-30&#47;CMakeFiles&#47;aio01.dir&#47;all&#39; failed<br>make[1]: *** [chap-30&#47;CMakeFiles&#47;aio01.dir&#47;all] Error 2<br>Makefile:127: recipe for target &#39;all&#39; failed<br>make: *** [all] Error 2","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":499262,"discussion_content":"ç¼–è¯‘çš„æ—¶å€™åŠ -lrt, çœ‹çœ‹æ˜¯å¦å¯ä»¥è§£å†³ä½ çš„é—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593173556,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":223499,"user_name":"ä¸è®°å¹´","can_delete":false,"product_type":"c1","uid":1045945,"ip_address":"","ucode":"287E40C68356DC","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f5/b9/888fe350.jpg","comment_is_top":false,"comment_ctime":1591103255,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1591103255","product_id":100032701,"comment_content":"1. ä¸¤ç‚¹ä¹‹é—´èƒ½å¤ŸåŒå‘é€šä¿¡çš„å¿…è¦æ¡ä»¶æ˜¯åŒæ–¹éƒ½æ˜¯å¯æ”¶å¯å‘çš„<br>2. ç¡®ä¿åŒæ–¹éƒ½æ˜¯å¯æ”¶å¯å‘è‡³å°‘éœ€è¦ä¸‰æ¬¡é€šä¿¡","like_count":0},{"had_liked":false,"id":218513,"user_name":"Geek_stonehan","can_delete":false,"product_type":"c1","uid":2007926,"ip_address":"","ucode":"1745458808B5CB","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKfMp8gO837ge2ibJJzxwgTPxNC02tazEeKCGzgGmicZ6ZAuia9ydC0hFNl5HwjWGjMlOFbuczQOCHPQ/132","comment_is_top":false,"comment_ctime":1589812216,"is_pvip":false,"replies":[{"id":"80984","content":"æ³¨é‡Šå‘Šè¯‰äº†ä¸€åˆ‡ :)<br>&#47;*<br> * Internet address (a structure for historical reasons)<br> *&#47;<br>struct in_addr {<br>\tin_addr_t s_addr;<br>};","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1589977758,"ip_address":"","comment_id":218513,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1589812216","product_id":100032701,"comment_content":"è€å¸ˆä½ å¥½ï¼Œæœ‰ä¸ªé—®é¢˜æƒ³è¯·æ•™ä¸€ä¸‹ï¼Œä¸ºä»€ä¹ˆsockaddr_iné‡Œé¢çš„sin_addrè¦å†™æˆä¸€ä¸ªç»“æ„ä½“è€Œä¸ç›´æ¥å†™æˆ ä¸€ä¸ªå˜é‡unit32_t s_addrå‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":495493,"discussion_content":"æ³¨é‡Šå‘Šè¯‰äº†ä¸€åˆ‡ :)\n/*\n * Internet address (a structure for historical reasons)\n */\nstruct in_addr {\n\tin_addr_t s_addr;\n};","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589977758,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":214828,"user_name":"lisiur","can_delete":false,"product_type":"c1","uid":1201350,"ip_address":"","ucode":"CEB2DBCE29CAA7","user_header":"https://static001.geekbang.org/account/avatar/00/12/54/c6/c2481790.jpg","comment_is_top":false,"comment_ctime":1588826606,"is_pvip":false,"replies":[{"id":"79835","content":"tcpåè®®å‘— ","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1589099767,"ip_address":"","comment_id":214828,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1588826606","product_id":100032701,"comment_content":"æœ‰ä¸ªç–‘æƒ‘ï¼štcpåœ¨ä¸‰æ¬¡æ¡æ‰‹çš„æ—¶å€™å‘é€çš„æŠ¥æ–‡æ˜¯é€šè¿‡ä»€ä¹ˆåè®®å‘é€çš„ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":494215,"discussion_content":"tcpåè®®å‘— ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589099767,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2184325,"avatar":"https://static001.geekbang.org/account/avatar/00/21/54/85/ab5148ce.jpg","nickname":"duckman","note":"","ucode":"0184C26C4B6C1B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":331313,"discussion_content":"tcp åè®®ä¸­è§„å®šäº†å¾ˆå¤šä¸åŒçš„æ ‡è¯†å­—æ®µï¼Œæ ¹æ®æ ‡è¯†å­—æ®µè®¾ç½®çš„ä¸åŒï¼Œè¯­ä¹‰ä¹Ÿä¸åŒã€‚\ntcpçš„3æ¬¡æ¡æ‰‹ å››æ¬¡æŒ¥æ‰‹ ä»¥åŠå…¶ä»–æ“ä½œéƒ½æ˜¯å¯¹åº”æ ‡å¿—ä½è®¾ç½®çš„ç»“æœ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1606826845,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1529249,"avatar":"https://static001.geekbang.org/account/avatar/00/17/55/a1/e77b9612.jpg","nickname":"å³ªäº”","note":"","ucode":"DCF2DC959D0CD7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":286317,"discussion_content":"tcp + ip ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1593133463,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":209320,"user_name":"ABC","can_delete":false,"product_type":"c1","uid":1203803,"ip_address":"","ucode":"B8FCB5FD947E88","user_header":"https://static001.geekbang.org/account/avatar/00/12/5e/5b/c7e9fa5f.jpg","comment_is_top":false,"comment_ctime":1587534916,"is_pvip":false,"replies":[{"id":"78411","content":"è¿™æ®µè¯çš„æ„æ€æ˜¯ä¸€æ®µæŠ¥æ–‡å‘é€å‡ºå»åï¼ŒåŸå…ˆçš„è¿æ¥å·²ç»ä¸å­˜åœ¨ã€‚æ¯”å¦‚æŠŠserverç«¯çš„è¿›ç¨‹killæ‰ï¼Œè¿™æ ·åé¢çš„æŠ¥æ–‡åˆ°è¾¾ä¹‹åï¼Œå‘ç°åŸæ¥çš„è¿æ¥ä¸åœ¨äº†ï¼Œå°±ä¼šæœ‰RSTæŠ¥é”™ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1587803903,"ip_address":"","comment_id":209320,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1587534916","product_id":100032701,"comment_content":"â€TCP æ¥æ”¶åˆ°ä¸€ä¸ªæ ¹æœ¬ä¸å­˜åœ¨çš„è¿æ¥ä¸Šçš„åˆ†èŠ‚â€œã€‚ä»€ä¹ˆæ„æ€ï¼Ÿæ”¶åˆ°ä¸€ä¸ªä¸å±äºè¯¥è¿æ¥çš„æŠ¥æ–‡ï¼Ÿåºåˆ—å·æœ‰è¯¯ï¼Ÿ<br>å¦‚æœè¿™ç§æƒ…å†µä¼šå‘é€rstçš„è¯ï¼Œä¼šè¢«æ¶æ„ddoså§ã€‚æ¯”å¦‚ä¼ªé€ æºipå‘è¯·æ±‚ï¼Œä¼šå¯¼è‡´å¯¼è‡´æœåŠ¡ç«¯å¤§é‡è¿æ¥è¢«æ¶æ„æ–­å¼€ã€‚","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":492771,"discussion_content":"è¿™æ®µè¯çš„æ„æ€æ˜¯ä¸€æ®µæŠ¥æ–‡å‘é€å‡ºå»åï¼ŒåŸå…ˆçš„è¿æ¥å·²ç»ä¸å­˜åœ¨ã€‚æ¯”å¦‚æŠŠserverç«¯çš„è¿›ç¨‹killæ‰ï¼Œè¿™æ ·åé¢çš„æŠ¥æ–‡åˆ°è¾¾ä¹‹åï¼Œå‘ç°åŸæ¥çš„è¿æ¥ä¸åœ¨äº†ï¼Œå°±ä¼šæœ‰RSTæŠ¥é”™ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587803903,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":208154,"user_name":"åˆºå®¢","can_delete":false,"product_type":"c1","uid":1098916,"ip_address":"","ucode":"607ABD2F2B5898","user_header":"https://static001.geekbang.org/account/avatar/00/10/c4/a4/b9b12d71.jpg","comment_is_top":false,"comment_ctime":1587285262,"is_pvip":true,"replies":[{"id":"77722","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1587304550,"ip_address":"","comment_id":208154,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1587285262","product_id":100032701,"comment_content":"ç»“åˆ02ä¸­çš„ç½‘ç»œæ¨¡å‹ï¼Œæ ¹æ®æœ¬èŠ‚çš„çŸ¥è¯†ç‚¹ï¼Œç»ˆäºç†è§£äº†TCPä¸‰æ¬¡æ¡æ‰‹<br><br>å…·ä½“è¿‡ç¨‹<br>1ã€å®¢æˆ·ç«¯çš„åè®®æ ˆå‘æœåŠ¡å™¨ç«¯å‘é€SYNåŒ…ï¼Œå¹¶å‘Šè¯‰æœåŠ¡å™¨ç«¯å½“å‰å‘é€åºåˆ—å·jï¼Œå®¢æˆ·ç«¯è¿›å…¥SYNC_SENTçŠ¶æ€<br>2ã€æœåŠ¡ç«¯çš„åè®®æ”¶åˆ°è¿™ä¸ªåŒ…åï¼Œå’Œå®¢æˆ·ç«¯è¿›è¡ŒACKåº”ç­”ï¼Œåº”ç­”å€¼ä¸ºj+1ï¼Œè¡¨ç¤ºå¯¹SYNåŒ…jçš„ç¡®è®¤ï¼ŒåŒæ—¶æœåŠ¡å™¨ä¹Ÿä¼šå‘é€ä¸€ä¸ªSYNåŒ…ï¼Œå‘Šè¯‰å®¢æˆ·ç«¯å½“å‰å‘é€åºåˆ—å·ä¸ºKï¼ŒæœåŠ¡ç«¯è¿›å…¥SYNC_RECVDçŠ¶æ€<br>3ã€å®¢æˆ·ç«¯åè®®æ”¶åˆ°ACKä¹‹åï¼Œä½¿å¾—åº”ç”¨ä»connectè°ƒç”¨è¿”å›ï¼Œè¡¨ç¤ºå®¢æˆ·ç«¯åˆ°æœåŠ¡å™¨ç«¯çš„å•å‘è¿æ¥å»ºç«‹æˆåŠŸï¼Œå®¢æˆ·ç«¯çŠ¶æ€ä¸ºESTABLISHED,åŒæ—¶å®¢æˆ·ç«¯åè®®æ ˆä¹Ÿä¼šå¯¹æœåŠ¡ç«¯SYNåŒ…è¿›è¡Œåº”ç­”ï¼Œåº”ç­”æ•°æ®ä¸ºk+1<br>4ã€åº”ç­”åŒ…åˆ°è¾¾æœåŠ¡å™¨ç«¯åï¼ŒæœåŠ¡å™¨ç«¯åè®®æ ˆä½¿å¾—accepté˜»å¡è°ƒç”¨è¿”å›ï¼Œè¿™ä¸ªæ—¶å€™æœåŠ¡å™¨ç«¯åˆ°å®¢æˆ·ç«¯å•å‘è¿æ¥ä¹Ÿå»ºç«‹æˆåŠŸï¼ŒæœåŠ¡å™¨ç«¯ä¹Ÿè¿›å…¥ESTABLISHEDçŠ¶æ€<br>","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":492359,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587304550,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":198922,"user_name":"â¶â‚†â¶â‚†â¶â‚†","can_delete":false,"product_type":"c1","uid":1940453,"ip_address":"","ucode":"25AE3F77318541","user_header":"https://static001.geekbang.org/account/avatar/00/1d/9b/e5/bd0be5c3.jpg","comment_is_top":false,"comment_ctime":1585473553,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1585473553","product_id":100032701,"comment_content":"TCPä¸‰æ¬¡æ¡æ‰‹çš„ç›®çš„å°±æ˜¯åœ¨ä¸å¯é çš„ä¿¡é“ä¸Šå®ç°æ•°æ®çš„å¯é ä¼ è¾“","like_count":0},{"had_liked":false,"id":198887,"user_name":"å¾è¡¡","can_delete":false,"product_type":"c1","uid":1881664,"ip_address":"","ucode":"06EBCB2F507603","user_header":"https://static001.geekbang.org/account/avatar/00/1c/b6/40/6060d233.jpg","comment_is_top":false,"comment_ctime":1585471832,"is_pvip":false,"replies":[{"id":"74761","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1585484942,"ip_address":"","comment_id":198887,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1585471832","product_id":100032701,"comment_content":"ä¸ºä»€ä¹ˆæ˜¯å››æ¬¡æŒ¥æ‰‹ï¼Ÿ<br>å› ä¸ºåœ¨å…³é—­è¿æ¥æ—¶ï¼ŒæœåŠ¡å™¨æ”¶åˆ°å¯¹æ–¹çš„FINæŠ¥æ–‡æ—¶ï¼Œä»…ä»…è¡¨ç¤ºå¯¹æ–¹ä¸å†å‘é€æ•°æ®äº†ï¼ˆè¿˜èƒ½æ¥æ”¶æ•°æ®ï¼‰ï¼Œè€Œè‡ªå·±ä¹Ÿæœªå¿…å…¨éƒ¨æ•°æ®éƒ½å‘é€ç»™å¯¹æ–¹äº†ï¼Œæ‰€ä»¥å¯ä»¥å‘é€ä¸€äº›æ•°æ®ç»™å¯¹æ–¹åï¼Œå†å‘é€FINæŠ¥æ–‡ç»™å¯¹æ–¹æ¥è¡¨ç¤ºåŒæ„ç°åœ¨å…³é—­è¿æ¥ï¼Œå› æ­¤ï¼Œå·±æ–¹ACKå’ŒFINä¸€èˆ¬éƒ½ä¼šåˆ†å¼€å‘é€ï¼Œä»è€Œå¯¼è‡´å¤šäº†ä¸€æ¬¡","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":489761,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585484942,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2184325,"avatar":"https://static001.geekbang.org/account/avatar/00/21/54/85/ab5148ce.jpg","nickname":"duckman","note":"","ucode":"0184C26C4B6C1B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":331314,"discussion_content":"ä¸€ä¸ªTCPè¿æ¥è¡¨ç¤ºçš„æ˜¯ç«¯å¯¹ç«¯çš„é€šä¿¡ (ä¸¤ç«¯ 2)\nä¸€ä¸ªTCPè¿æ¥çš„ä¸¤ç«¯éƒ½æœ‰æ”¶å‘æ¶ˆæ¯çš„åŠŸèƒ½(æ”¶å‘ 1+1=2) \n\nTCPéœ€è¦å››æ¬¡æŒ¥æ‰‹è¡¨ç¤ºä¾æ¬¡å›æ”¶æˆ–è€…å…³é—­ä¸¤ç«¯çš„æ”¶å‘èƒ½åŠ› 2 * 2 = 4.\n\nå¦‚æœä¸¤ç«¯åŒæ—¶è¦å…³é—­ å°±å¯ä»¥å‡å°‘åˆ°3æ¬¡ã€‚\n\n1. æˆ‘è¦å…³é—­è‡ªå·±çš„å‘é€èƒ½åŠ›ï¼Œä½†è¿˜å¯ä»¥æ¥å— (åŒæ—¶æ”¶åˆ°å¯¹æ–¹å…³é—­å‘é€èƒ½åŠ›çš„æ¶ˆæ¯)\n2.ç¡®è®¤è¯¥æ¶ˆæ¯ åŒæ—¶å…³é—­è‡ªå·±çš„æ¥å—åŠŸèƒ½ã€‚\n3.ç­‰å¾…2 * MSL å…³é—­","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606827383,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":189844,"user_name":"Geek_wannaBgeek","can_delete":false,"product_type":"c1","uid":1643435,"ip_address":"","ucode":"6F42F4181981C3","user_header":"https://static001.geekbang.org/account/avatar/00/19/13/ab/d73e25de.jpg","comment_is_top":false,"comment_ctime":1584576635,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584576635","product_id":100032701,"comment_content":"æ‰“å¡æ‰“å¡","like_count":0},{"had_liked":false,"id":187408,"user_name":"zxj_gk","can_delete":false,"product_type":"c1","uid":1067763,"ip_address":"","ucode":"C5755160B26C18","user_header":"https://static001.geekbang.org/account/avatar/00/10/4a/f3/3ca6ed87.jpg","comment_is_top":false,"comment_ctime":1584103587,"is_pvip":false,"replies":[{"id":"72370","content":"https:&#47;&#47;github.com&#47;froghui&#47;yolanda","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1584172778,"ip_address":"","comment_id":187408,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1584103587","product_id":100032701,"comment_content":"æœ‰æ²¡æœ‰ å¯ä»¥å®Œæ•´å¯è¿è¡Œçš„ä»£ç  gitåœ°å€ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":487100,"discussion_content":"https://github.com/froghui/yolanda","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584172778,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":187404,"user_name":"zxj_gk","can_delete":false,"product_type":"c1","uid":1067763,"ip_address":"","ucode":"C5755160B26C18","user_header":"https://static001.geekbang.org/account/avatar/00/10/4a/f3/3ca6ed87.jpg","comment_is_top":false,"comment_ctime":1584102979,"is_pvip":false,"replies":[{"id":"72371","content":"é‚£æ˜¯ä¸¤ä¸ªä¸åŒçš„è¿æ¥ï¼Œæ¯ä¸ªè¿æ¥éƒ½æ˜¯å¯ä»¥åŒå‘é€šä¿¡çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1584172819,"ip_address":"","comment_id":187404,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1584102979","product_id":100032701,"comment_content":"ä¸‰æ¬¡æ¡æ‰‹ æ˜¯å®¢æˆ·ç«¯ä¸»åŠ¨è¯·æ±‚é“¾æ¥æœåŠ¡å™¨ç«¯ï¼Œå¦‚æœåŒæ–¹åŒæ—¶è¯·æ±‚é“¾æ¥å¯¹æ–¹å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":487097,"discussion_content":"é‚£æ˜¯ä¸¤ä¸ªä¸åŒçš„è¿æ¥ï¼Œæ¯ä¸ªè¿æ¥éƒ½æ˜¯å¯ä»¥åŒå‘é€šä¿¡çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584172819,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":182781,"user_name":"JDY","can_delete":false,"product_type":"c1","uid":1848474,"ip_address":"","ucode":"4B6F55332BE6DC","user_header":"https://static001.geekbang.org/account/avatar/00/1c/34/9a/1587bc6f.jpg","comment_is_top":false,"comment_ctime":1582865107,"is_pvip":false,"replies":[{"id":"71028","content":"acceptå‡½æ•°è°ƒç”¨ä¹‹åï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¸‰æ¬¡æ¡æ‰‹æˆåŠŸï¼Œè¿”å›ä¸€ä¸ªä»£è¡¨å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯è¿æ¥çš„å¥—æ¥å­—ï¼Œè¿™ä¸ªå¥—æ¥å­—å³ä½¿å·²è¿æ¥å¥—æ¥å­—ã€‚ä¹‹åæœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯çš„æ•°æ®ä¼ è¾“éƒ½æ˜¯é€šè¿‡è¿™ä¸ªå·²è¿æ¥å¥—æ¥å­—æ¥å®Œæˆã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1583052083,"ip_address":"","comment_id":182781,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1582865107","product_id":100032701,"comment_content":"è¿™é‡Œä¸€å®šè¦æ³¨æ„æœ‰ä¸¤ä¸ªå¥—æ¥å­—æè¿°å­—ï¼Œç¬¬ä¸€ä¸ªæ˜¯ç›‘å¬å¥—æ¥å­—æè¿°å­— listensockfdï¼Œå®ƒæ˜¯ä½œä¸ºè¾“å…¥å‚æ•°å­˜åœ¨çš„ï¼›ç¬¬äºŒä¸ªæ˜¯è¿”å›çš„å·²è¿æ¥å¥—æ¥å­—æè¿°å­— ï¼Œacceptå‡½æ•°è¿”å›çš„ç¬¬äºŒä¸ªå¥—æ¥å­—æˆ‘ä¸æ˜¯å¾ˆæ¸…æ¥šï¼Œéº»çƒ¦è€å¸ˆå¸®å¿™åœ¨æŒ‡ç‚¹ä¸€ä¸‹ï¼Œå®ƒåœ¨å“ªä½“ç°çš„ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":485448,"discussion_content":"acceptå‡½æ•°è°ƒç”¨ä¹‹åï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¸‰æ¬¡æ¡æ‰‹æˆåŠŸï¼Œè¿”å›ä¸€ä¸ªä»£è¡¨å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯è¿æ¥çš„å¥—æ¥å­—ï¼Œè¿™ä¸ªå¥—æ¥å­—å³ä½¿å·²è¿æ¥å¥—æ¥å­—ã€‚ä¹‹åæœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯çš„æ•°æ®ä¼ è¾“éƒ½æ˜¯é€šè¿‡è¿™ä¸ªå·²è¿æ¥å¥—æ¥å­—æ¥å®Œæˆã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583052083,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":169792,"user_name":"æ„šäºº","can_delete":false,"product_type":"c1","uid":1355952,"ip_address":"","ucode":"40DE41849EF9EA","user_header":"https://static001.geekbang.org/account/avatar/00/14/b0/b0/30b29949.jpg","comment_is_top":false,"comment_ctime":1578447369,"is_pvip":false,"replies":[{"id":"68068","content":"1. æˆ‘è®¤ä¸ºæ˜¯listenä¼šåˆå§‹åŒ–ä¸€ä¸ªè¿æ¥èµ„æºæ± ï¼›<br>2.æ˜¯çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1580630756,"ip_address":"","comment_id":169792,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1578447369","product_id":100032701,"comment_content":"TCPçŠ¶æ€æœºä¸­ï¼Œç¬¬ä¸€é˜¶æ®µçš„ä¸‰æ¬¡æ¡æ‰‹æ¶‰åŠåˆ°äº†server socketçš„listenå’Œacceptè°ƒç”¨ï¼›ç¬¬äºŒ&#47;ä¸‰é˜¶æ®µæ¶‰åŠåˆ°session socketçš„read&#47;write&#47;closeç­‰è°ƒç”¨ã€‚<br>é—®é¢˜1: TCPè¿æ¥çš„serverç«¯å®ä¾‹æ˜¯ä¸æ˜¯åœ¨server socketçš„acceptæ‰ä¼šè¢«åˆ›å»ºï¼Ÿè¿˜æ˜¯åœ¨server socketçš„listenè°ƒç”¨ä¸­å°±æ ¹æ®backlogå‚æ•°åˆå§‹åŒ–ä¸€ä¸ªTCPè¿æ¥èµ„æºæ± ï¼ˆæ± ä¸­è¿æ¥åˆå§‹çŠ¶æ€ä¸ºLISTENï¼‰ï¼Ÿ<br>é—®é¢˜2: TCPè¿æ¥çš„serverç«¯æ˜¯ä¸æ˜¯åœ¨acceptç³»ç»Ÿè°ƒç”¨ä¸­å®Œæˆä»LISTENåˆ°SYN-RCVDï¼ˆæ”¶åˆ°SYNï¼‰ï¼Œå†åˆ°ESTABLISHEDï¼ˆæ”¶åˆ°ACKï¼‰çš„å˜è¿è¿‡ç¨‹ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480721,"discussion_content":"1. æˆ‘è®¤ä¸ºæ˜¯listenä¼šåˆå§‹åŒ–ä¸€ä¸ªè¿æ¥èµ„æºæ± ï¼›\n2.æ˜¯çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580630756,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":160704,"user_name":"äº‘å¸ˆå…„","can_delete":false,"product_type":"c1","uid":1010459,"ip_address":"","ucode":"4475AF1598FBFD","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6b/1b/4b397b80.jpg","comment_is_top":false,"comment_ctime":1576024218,"is_pvip":false,"replies":[{"id":"63942","content":"ç«¯å£å¦‚ä½•å¼€å‘ï¼Œè€Œä¸å¼€å¯ç›‘å¬ï¼Œè¿™æ˜¯æ€ä¹ˆåšåˆ°çš„å‘¢ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1577605577,"ip_address":"","comment_id":160704,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1576024218","product_id":100032701,"comment_content":"è¯·é—®è€å¸ˆï¼Œå¦‚æœæœåŠ¡ç«¯çš„ç«¯å£å¼€æ”¾ä½†æ˜¯æ²¡æœ‰ç›‘å¬çš„åº”ç”¨ï¼Œå®¢æˆ·ç«¯syncåŒ…åˆ°è¾¾åéƒ½æ˜¯è¿”å›rstå—","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477457,"discussion_content":"ç«¯å£å¦‚ä½•å¼€å‘ï¼Œè€Œä¸å¼€å¯ç›‘å¬ï¼Œè¿™æ˜¯æ€ä¹ˆåšåˆ°çš„å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577605577,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":158676,"user_name":"Geek_68d3d2","can_delete":false,"product_type":"c1","uid":1674369,"ip_address":"","ucode":"EBD6D881AA7A74","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqf54z1ZmqQY1kmJ6t1HAnrqMM3j6WKf0oDeVLhtnA2ZUKY6AX9MK6RjvcO8SiczXy3uU0IzBQ3tpw/132","comment_is_top":false,"comment_ctime":1575431025,"is_pvip":false,"replies":[{"id":"61030","content":"åˆ›å»ºä¸€ä¸ªåŸå§‹å¥—æ¥å­—SOCK_RAWã€‚ç¬¬ä¸‰ä¸ªå‚æ•°ï¼ˆåè®®ï¼‰é€šå¸¸ä¸ä¸º0ï¼Œä¸€èˆ¬ä¸ºå½¢å¦‚IPPROTO_xxxçš„æŸä¸ªå¸¸å€¼ã€‚<br><br>ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ï¼š<br><br>int sockfd;<br>sockfd = socket(AF_INET, SOCK_RAW, IPPROTO_IGMP);","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1575799525,"ip_address":"","comment_id":158676,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1575431025","product_id":100032701,"comment_content":"å½“å¥—æ¥å­—ä¸ºSOCK_RAWçš„æ—¶å€™æ˜¯ä¸æ˜¯å¿…é¡»è¦æŒ‡å®šprotocolçš„å€¼ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476803,"discussion_content":"åˆ›å»ºä¸€ä¸ªåŸå§‹å¥—æ¥å­—SOCK_RAWã€‚ç¬¬ä¸‰ä¸ªå‚æ•°ï¼ˆåè®®ï¼‰é€šå¸¸ä¸ä¸º0ï¼Œä¸€èˆ¬ä¸ºå½¢å¦‚IPPROTO_xxxçš„æŸä¸ªå¸¸å€¼ã€‚\n\nä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ï¼š\n\nint sockfd;\nsockfd = socket(AF_INET, SOCK_RAW, IPPROTO_IGMP);","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575799525,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":152807,"user_name":"Eleven","can_delete":false,"product_type":"c1","uid":1168452,"ip_address":"","ucode":"FB4A0C8CA732BE","user_header":"https://static001.geekbang.org/account/avatar/00/11/d4/44/0ec958f4.jpg","comment_is_top":false,"comment_ctime":1574082857,"is_pvip":false,"replies":[{"id":"59327","content":"å“ˆå“ˆï¼Œå¯ä»¥çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1574498005,"ip_address":"","comment_id":152807,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1574082857","product_id":100032701,"comment_content":"A å…ˆå¯¹ B è¯´ï¼šâ€œå–‚ï¼Œä½ åœ¨ä¹ˆï¼Ÿæˆ‘åœ¨çš„ï¼Œæˆ‘çš„å£ä»¤æ˜¯ jã€‚â€B æ”¶åˆ°ä¹‹åå¤§å£°å›ç­”ï¼šâ€œæˆ‘æ”¶åˆ°ä½ çš„å£ä»¤ j å¹¶å‡†å¤‡å¥½äº†ï¼Œä½ å‡†å¤‡å¥½äº†å—ï¼Ÿæˆ‘çš„å£ä»¤æ˜¯ kã€‚â€A æ”¶åˆ°ä¹‹åä¹Ÿå¤§å£°å›ç­”ï¼šâ€œæˆ‘æ”¶åˆ°ä½ çš„å£ä»¤ k å¹¶å‡†å¤‡å¥½äº†ï¼Œæˆ‘ä»¬å¼€å§‹å§ã€‚â€ è€å¸ˆæˆ‘è§‰å¾—è¿™é‡Œåº”è¯¥å†è¡¥å……ä¸€å¥ï¼ŒBæœ€åæ”¶åˆ°åè¯´ï¼šâ€œå¥½çš„ï¼Œæˆ‘ä»¬å¼€å§‹å§ï¼â€","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":474947,"discussion_content":"å“ˆå“ˆï¼Œå¯ä»¥çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574498005,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":141117,"user_name":"TM","can_delete":false,"product_type":"c1","uid":1691214,"ip_address":"","ucode":"9E03B9D177356A","user_header":"https://static001.geekbang.org/account/avatar/00/19/ce/4e/17fd7195.jpg","comment_is_top":false,"comment_ctime":1571117074,"is_pvip":false,"replies":[{"id":"55092","content":"æ²¡æœ‰ä¸Šä¸‹æ–‡ï¼Œå¾ˆéš¾ç»™å‡ºè¯¦ç»†çš„åˆ¤æ–­ã€‚operation timeoutæˆ‘ç†è§£åº”è¯¥æ˜¯åº”ç”¨ç¨‹åºè‡ªå·±ç»™å‡ºçš„é”™è¯¯ä¿¡æ¯ï¼Œä¸æ˜¯å†…æ ¸çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1571453812,"ip_address":"","comment_id":141117,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1571117074","product_id":100032701,"comment_content":"æœ‰ä¸ªé—®é¢˜æƒ³å’¨è¯¢ä¸‹è€å¸ˆã€‚æŠŠ redis çš„ backlog è®¾ç½®ä¸º 1ï¼Œç„¶ååœ¨ redis é‡Œ debug sleep 70ï¼Œç„¶åå‘èµ·ä¸¤ä¸ªè¯·æ±‚ï¼Œä¸€ä¸ªæˆåŠŸè¿æ¥ï¼Œå¦ä¸€ä¸ªä¼šå‡º opration timeout ï¼Œè€Œä¸æ˜¯ connect timeoutï¼Œç„¶åå¤§æ¦‚æ˜¯ 26 s ï¼Œåå¤è¯•äº†å‡ æ¬¡ã€éƒ½æ˜¯26så·¦å³çš„æ—¶é—´ã€‚å¾ˆå¥‡æ€ªè¿™ä¸ªæŠ¥é”™æ˜¯å†…æ ¸çˆ†å‡ºæ¥çš„å—ï¼Ÿä¸ºä»€ä¹ˆæ˜¯26sè¿™ä¸ªæ—¶é—´å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470673,"discussion_content":"æ²¡æœ‰ä¸Šä¸‹æ–‡ï¼Œå¾ˆéš¾ç»™å‡ºè¯¦ç»†çš„åˆ¤æ–­ã€‚operation timeoutæˆ‘ç†è§£åº”è¯¥æ˜¯åº”ç”¨ç¨‹åºè‡ªå·±ç»™å‡ºçš„é”™è¯¯ä¿¡æ¯ï¼Œä¸æ˜¯å†…æ ¸çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571453812,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1691214,"avatar":"https://static001.geekbang.org/account/avatar/00/19/ce/4e/17fd7195.jpg","nickname":"TM","note":"","ucode":"9E03B9D177356A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":34562,"discussion_content":"è€å¸ˆè¦æ˜¯çœ‹åˆ°äº† è¿˜éº»çƒ¦å›å¤ä¸‹ å¤šè°¢å“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571206187,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":131124,"user_name":"JasonZhi","can_delete":false,"product_type":"c1","uid":1282818,"ip_address":"","ucode":"6C23DCD592636D","user_header":"https://static001.geekbang.org/account/avatar/00/13/93/02/fcab58d1.jpg","comment_is_top":false,"comment_ctime":1567647526,"is_pvip":true,"replies":[{"id":"50825","content":"è·¯ç”±ä¸åŒæ˜¯é€šè¿‡ICMPåŒ…æ¥é€šçŸ¥çš„ï¼Œå¹¶ä¸æ˜¯SYNåŒ…ï¼Œä¸€ä¸ªæ˜¯TCPæ¡æ‰‹åè®®ï¼Œä¸€ä¸ªæ˜¯æ•…éšœæ’æŸ¥åè®®ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1568195327,"ip_address":"","comment_id":131124,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1567647526","product_id":100032701,"comment_content":"è€å¸ˆä½ å¥½ï¼Œæ²¡æœ‰å“åº”SYNåŒ…å’Œè·¯ç”±ä¸é€šçš„é”™è¯¯æ€ä¹ˆåŒºåˆ†ï¼Ÿåœ¨æˆ‘çœ‹æ¥ä¸¤ç§æƒ…å†µéƒ½ä¼šæ²¡æœ‰å“åº”SYNåŒ…ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466297,"discussion_content":"è·¯ç”±ä¸åŒæ˜¯é€šè¿‡ICMPåŒ…æ¥é€šçŸ¥çš„ï¼Œå¹¶ä¸æ˜¯SYNåŒ…ï¼Œä¸€ä¸ªæ˜¯TCPæ¡æ‰‹åè®®ï¼Œä¸€ä¸ªæ˜¯æ•…éšœæ’æŸ¥åè®®ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568195327,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":127419,"user_name":"å¼ ç«‹å","can_delete":false,"product_type":"c1","uid":1231713,"ip_address":"","ucode":"173B938DD9478A","user_header":"https://static001.geekbang.org/account/avatar/00/12/cb/61/b62d8a3b.jpg","comment_is_top":false,"comment_ctime":1566704673,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1566704673","product_id":100032701,"comment_content":"è®¾ç½®ä¸ºéé˜»å¡   <br>int flags = fcntl(socket, F_GETFL, 0);<br>fcntl(socket, F_SETFL, O_NONBLOCK | flags);","like_count":0},{"had_liked":false,"id":126709,"user_name":"Edison","can_delete":false,"product_type":"c1","uid":1135701,"ip_address":"","ucode":"734A561F363720","user_header":"https://static001.geekbang.org/account/avatar/00/11/54/55/613ddc42.jpg","comment_is_top":false,"comment_ctime":1566455365,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1566455365","product_id":100032701,"comment_content":"éé˜»å¡åœ°è°ƒç”¨å¥—æ¥å­—ï¼ŒLinuxå¹³å°ä¸‹ï¼Œå¯ä»¥é€šè¿‡fcntl()æˆ–è€…ioctl()ç»™socketæ·»åŠ éé˜»å¡æ ‡å¿—ï¼›å…·ä½“æ–¹æ³•å¦‚ä¸‹ï¼š<br>  int OldSocketFlag = fcntl(socket, F_GETFL, 0);<br>  int NewSocketFlag = OldSocketFlag | O_NONBLOCK;<br>  fcntl(socket, F_SETFL, NewSoketFlag);<br>  éé˜»å¡çš„socketè°ƒç”¨çš„é€‚ç”¨åœºæ™¯ï¼Œæ¯”å¦‚ï¼šå°†Reactoræ¨¡å¼åº”ç”¨äºEpollæ¨¡å‹ä¸­ï¼Œå°†å®¢æˆ·ç«¯å¥—æ¥å­—è®¾ç½®ä¸ºéé˜»å¡æ¨¡å¼ï¼Œå¦‚æœå¯¹ç«¯çš„TCPçª—å£å¤ªå°å¯¼è‡´æ•°æ®å‘é€å¤±è´¥ï¼Œé‚£ä¹ˆå½“å‰çº¿ç¨‹ä¼šå»æ³¨å†Œä¸€ä¸ªEpollä¾‹ç¨‹ï¼Œç›‘å¬å†™å°±ç»ªäº‹ä»¶ï¼›å½“æœ‰TCPçª—å£èµ„æºå¯ç”¨æ—¶ï¼Œå†æ¬¡å‘å¯¹ç«¯å†™æ•°æ®ã€‚","like_count":0},{"had_liked":false,"id":126413,"user_name":"ç¬è·¯ä¸Š","can_delete":false,"product_type":"c1","uid":1335108,"ip_address":"","ucode":"98C603307CA374","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/iaYibsvL94uobwgXsHVUnFh0AzibQAmWQicibytkmIEvmFhAPBpj8lXnjmYcJySqgDPoIeLAAicQFrIJVS9uNZbD7gmw/132","comment_is_top":false,"comment_ctime":1566384514,"is_pvip":false,"replies":[{"id":"47902","content":"åé¢ç« èŠ‚è®²åˆ°äº†","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1567003674,"ip_address":"","comment_id":126413,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1566384514","product_id":100032701,"comment_content":"è€å¸ˆå››æ¬¡åˆ†æ‰‹æ€ä¹ˆè¯´ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463978,"discussion_content":"åé¢ç« èŠ‚è®²åˆ°äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567003674,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":124448,"user_name":"å°å®½å®½ä¸ä»–çš„ç™½æ—¥æ¢¦","can_delete":false,"product_type":"c1","uid":1618781,"ip_address":"","ucode":"C16F595EE4E11A","user_header":"https://static001.geekbang.org/account/avatar/00/18/b3/5d/a97e5045.jpg","comment_is_top":false,"comment_ctime":1565885922,"is_pvip":false,"replies":[{"id":"45943","content":"ä¸éœ€è¦äº†","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1566130097,"ip_address":"","comment_id":124448,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1565885922","product_id":100032701,"comment_content":"è€å¸ˆæˆ‘è¯·æ•™ä¸€ä¸ªé—®é¢˜ï¼Œtcpè¿æ¥çš„æ—¶å€™æœ‰ä¸‰æ¬¡æ¡æ‰‹ï¼Œé‚£å‘é€å–æ¥æ”¶socketæ¶ˆæ¯å‘¢ï¼Ÿæ¯æ¡æ¶ˆæ¯éƒ½æœ‰ä¸‰æ¬¡æ¡æ‰‹å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463180,"discussion_content":"ä¸éœ€è¦äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566130097,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1618781,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b3/5d/a97e5045.jpg","nickname":"å°å®½å®½ä¸ä»–çš„ç™½æ—¥æ¢¦","note":"","ucode":"C16F595EE4E11A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":11580,"discussion_content":"å¯æ˜¯è€å¸ˆï¼Œå¦‚æœæ”¶å‘æ¶ˆæ¯æ²¡æœ‰ä¸‰æ¬¡æ¡æ‰‹ï¼Œtcpæ€ä¹ˆèƒ½ä¿è¯æ¶ˆæ¯æ­£å¸¸åˆ°è¾¾å‘¢ï¼Ÿä¸å°±æ˜¯è¯´ä¼šåœ¨åè®®å±‚å‡ºç°ä¸¢æ¶ˆæ¯çš„é—®é¢˜å—ï¼Ÿä¸å°±æ˜¯å’Œudpä¸€æ ·äº†ä¹ˆï¼Ÿï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568392668,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":124097,"user_name":"å°ä¼Ÿ","can_delete":false,"product_type":"c1","uid":1359701,"ip_address":"","ucode":"124953423491E2","user_header":"https://static001.geekbang.org/account/avatar/00/14/bf/55/198c6104.jpg","comment_is_top":false,"comment_ctime":1565825970,"is_pvip":false,"replies":[{"id":"45947","content":"æ˜¯è¿™ä¸ªé“ç†","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1566130223,"ip_address":"","comment_id":124097,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1565825970","product_id":100032701,"comment_content":"ç»ˆäºæ˜ç™½ä¸ºä»€ä¹ˆtcpè¦ä¸‰æ¬¡æ¡æ‰‹äº†ï¼Œè€Œä¸æ˜¯2æ¬¡æˆ–4æ¬¡ã€‚å› ä¸ºtcpè¦ä¿è¯åŒå‘é€šé“å»ºç«‹ï¼Œä¸‰æ¬¡æ˜¯ä¿è¯åŒæ–¹éƒ½æ”¶åˆ°å¯¹æ–¹åº”ç­”çš„æœ€å°‘æ¬¡æ•°ã€‚ç¬¬ä¸€æ¬¡ç”±ä¸€æ–¹å‘èµ·è¯·æ±‚ï¼Œç¬¬äºŒæ¬¡åº”ç­”æ–¹æ”¶åˆ°è¯·æ±‚ååº”ç­”ï¼Œç¬¬ä¸‰æ¬¡åº”ç­”æ–¹æ”¶åˆ°è¯·æ±‚æ–¹å‘é€çš„æ”¶åˆ°åº”ç­”å›æ‰§ã€‚å°‘ä¸€æ¬¡ä¸è¡Œï¼Œå¤šä¸€æ¬¡å¤šä½™ã€‚","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463010,"discussion_content":"æ˜¯è¿™ä¸ªé“ç†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566130223,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":123984,"user_name":"ç™½é—¹","can_delete":false,"product_type":"c1","uid":1374384,"ip_address":"","ucode":"AF321E099DB942","user_header":"https://wx.qlogo.cn/mmopen/vi_32/939UMupJ7ZK5KicphfW7HnPfmOsMxdll2LibR0aSIhldKdjaJsiba4akvLibwFtVxWSpb4fUTAK2Nkib8UQgKE5E8GA/132","comment_is_top":false,"comment_ctime":1565788121,"is_pvip":false,"replies":[{"id":"45950","content":"åŒæ­¥æŠ¥æ–‡ï¼Œç¡®è®¤æŠ¥æ–‡ï¼Œä¸¤ç§ç‰¹æ®Šæ ¼å¼çš„TCPæŠ¥æ–‡","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1566130311,"ip_address":"","comment_id":123984,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1565788121","product_id":100032701,"comment_content":"ä»€ä¹ˆæ˜¯synå’Œackï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462940,"discussion_content":"åŒæ­¥æŠ¥æ–‡ï¼Œç¡®è®¤æŠ¥æ–‡ï¼Œä¸¤ç§ç‰¹æ®Šæ ¼å¼çš„TCPæŠ¥æ–‡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566130311,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":123654,"user_name":"äº•åº•ä¹‹è›™","can_delete":false,"product_type":"c1","uid":1624505,"ip_address":"","ucode":"DAEE283B210B23","user_header":"https://static001.geekbang.org/account/avatar/00/18/c9/b9/aff32d3c.jpg","comment_is_top":false,"comment_ctime":1565741150,"is_pvip":false,"replies":[{"id":"45941","content":"ç­”ç–‘ç¯‡ç»Ÿä¸€å›å¤","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1566130008,"ip_address":"","comment_id":123654,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1565741150","product_id":100032701,"comment_content":"è€å¸ˆï¼Œæƒ³åœ¨ubantuä¸‹ç»ƒä¹ å¥—æ¥å­—ç¼–ç¨‹ï¼Œéœ€è¦è£…å“ªäº›è½¯ä»¶ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462759,"discussion_content":"ç­”ç–‘ç¯‡ç»Ÿä¸€å›å¤","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566130008,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":123219,"user_name":"å•¦å•¦çš„å°çŒª","can_delete":false,"product_type":"c1","uid":1134766,"ip_address":"","ucode":"13352B41450925","user_header":"https://static001.geekbang.org/account/avatar/00/11/50/ae/11dad6f3.jpg","comment_is_top":false,"comment_ctime":1565628986,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1565628986","product_id":100032701,"comment_content":"å…³äºç¬¬ä¸€é“é¢˜æˆ‘çš„æƒ³æ³•æ˜¯   æ„Ÿè§‰epollæ˜¯éé˜»å¡çš„","like_count":0},{"had_liked":false,"id":123169,"user_name":"wusiration","can_delete":false,"product_type":"c1","uid":1104438,"ip_address":"","ucode":"A9403377054F1E","user_header":"https://static001.geekbang.org/account/avatar/00/10/da/36/ac0ff6a7.jpg","comment_is_top":false,"comment_ctime":1565619429,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1565619429","product_id":100032701,"comment_content":"é—®é¢˜1ï¼šä½¿ç”¨fcntlå‡½æ•°è®¾ç½®å¥—æ¥å­—çš„å±æ€§fcntl(fd, F_SETFL, flags)ï¼›æ™®é€šçš„å¥—æ¥å­—ä¸€æ¬¡åªèƒ½æœåŠ¡ä¸€ä¸ªå®¢æˆ·ç«¯ï¼Œè‹¥ä»»åŠ¡è€—æ—¶è¿‡é•¿ï¼Œä¼šé˜»å¡ç½‘ç»œæµé‡ï¼Œéé˜»å¡å¥—æ¥å­—ä¸»è¦ç”¨äºé«˜å¹¶å‘åœºæ™¯ã€‚<br>é—®é¢˜2ï¼šå¯ä»¥è°ƒç”¨bindå‡½æ•°ï¼Œä¼šç»‘å®šå›ºå®šç«¯å£ï¼Œæœ‰æ—¶å€™ä¼šå¼•èµ·ç«¯å£å†²çª","like_count":0},{"had_liked":false,"id":122995,"user_name":"nil","can_delete":false,"product_type":"c1","uid":1507193,"ip_address":"","ucode":"0F5D298C1CBB74","user_header":"https://static001.geekbang.org/account/avatar/00/16/ff/79/3b38c9e1.jpg","comment_is_top":false,"comment_ctime":1565584747,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1565584747","product_id":100032701,"comment_content":"è°ˆä¸‹è‡ªå·±å…³äºä¸‰æ¬¡æ¡æ‰‹çš„ç†è§£ï¼Œä¸‰æ¬¡æ¡æ‰‹ä¸»è¦è§£å†³çš„æ˜¯å¦‚ä½•åœ¨ä¿¡é“ä¸å¯é çš„æƒ…å†µä¸‹å»ºç«‹åŒå‘è¿æ¥ã€‚é‚£ä¸ºä½•ååæ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼Œä¸¤æ¬¡ä¸è¡Œå—ï¼Ÿå››æ¬¡ä¸è¡Œå—ï¼Ÿå…¶å®ä¸‰æ¬¡ä»¥ä¸Šéƒ½æ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯å¤šäºä¸‰æ¬¡çš„æ¡æ‰‹å±äºéå¿…è¦æ“ä½œã€‚ä¸¤æ¬¡æ˜¯æ— æ³•ä¿è¯åŒå‘é€šä¿¡çš„å»ºç«‹ï¼Œä¸‰ä¸ªæ¡æ‰‹ä¸­çš„ç¬¬äºŒæ¬¡é€šä¿¡æ—¢æ˜¯å¯¹ç¬¬ä¸€æ¬¡é€šä¿¡çš„å›åº”ï¼Œåˆæ˜¯ä¸ºäº†ç¬¬ä¸‰æ¬¡æ¡æ‰‹å‘èµ·è¯·æ±‚ï¼Œèµ·åˆ°æ‰¿ä¸Šå¯ä¸‹çš„ä½œç”¨ã€‚ä¸‰æ¬¡æ¡æ‰‹æˆåŠŸä¹‹åï¼Œé€šä¿¡åŒæ–¹çš„ä¿¡é“åŸºæœ¬å¯é ï¼Œä¹‹åå°±è¦é tcpåè®®ä¿è¯æ•´ä¸ªä¼ è¾“çš„å¯é æ€§ã€‚","like_count":0},{"had_liked":false,"id":122896,"user_name":"å¹³å°‘","can_delete":false,"product_type":"c1","uid":1218742,"ip_address":"","ucode":"EC76D35D0C2CBA","user_header":"https://static001.geekbang.org/account/avatar/00/12/98/b6/0c0ed771.jpg","comment_is_top":false,"comment_ctime":1565571516,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1565571516","product_id":100032701,"comment_content":"æ‰“å¡","like_count":0},{"had_liked":false,"id":122867,"user_name":"æœ‰ç‚¹æ„æ€","can_delete":false,"product_type":"c1","uid":1399454,"ip_address":"","ucode":"67F55604E8A548","user_header":"https://static001.geekbang.org/account/avatar/00/15/5a/9e/8f2ccc1d.jpg","comment_is_top":false,"comment_ctime":1565564356,"is_pvip":true,"replies":[{"id":"45178","content":"ä¸éœ€è¦ï¼Œè¯»å’Œå†™æ˜¯ä¸¤ä¸ªä¸åŒçš„ç¼“å†²åŒºã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1565579396,"ip_address":"","comment_id":122867,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1565564356","product_id":100032701,"comment_content":"è€å¸ˆä½ å¥½<br>æˆ‘çœ‹æœ‰çš„ä¹¦ä¸Š åšå®¢æˆ·ç«¯ç¼–ç¨‹çš„æ—¶å€™  å»ºç«‹socketè¿æ¥åä¼šå¯ç”¨ä¸¤ä¸ªçº¿ç¨‹ ä¸€ä¸ªçº¿ç¨‹ç”¨æ¥è¯» ä¸€ä¸ªçº¿ç¨‹ç”¨æ¥å†™ ç°åœ¨æœ‰ç‚¹ç–‘é—® ä¸€ä¸ªsocketè¿™æ ·ç»™ä¸¤ä¸ªçº¿ç¨‹ç”¨ ä¸éœ€è¦åŠ é”ä¹ˆï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462434,"discussion_content":"ä¸éœ€è¦ï¼Œè¯»å’Œå†™æ˜¯ä¸¤ä¸ªä¸åŒçš„ç¼“å†²åŒºã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565579396,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122771,"user_name":"åˆè§","can_delete":false,"product_type":"c1","uid":1101405,"ip_address":"","ucode":"06D7952CED37D3","user_header":"https://static001.geekbang.org/account/avatar/00/10/ce/5d/5297717a.jpg","comment_is_top":false,"comment_ctime":1565517273,"is_pvip":false,"replies":[{"id":"45175","content":"ä¸èƒ½å®Œå…¨è®¡ç®—å‡ºæ¥ï¼Œæ¯”å¦‚å˜é•¿åœ°å€ï¼Œä¸çŸ¥é“lenï¼Œæ˜¯æ²¡æœ‰åŠæ³•çŸ¥é“addrç¡®åˆ‡å€¼çš„è¾¹ç•Œçš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1565579256,"ip_address":"","comment_id":122771,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1565517273","product_id":100032701,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œä¸€ä¸ªå°é—®é¢˜~ <br><br>bind çš„ç¬¬ä¸‰ä¸ªå‚æ•° lenï¼Œå‡½æ•°æœ¬èº«æ˜¯å¯ä»¥æ ¹æ®ç¬¬äºŒä¸ªå­—æ®µ addr è®¡ç®—å‡ºæ¥ï¼Œä¸ºä»€ä¹ˆæ¯æ¬¡éè¦è®©è°ƒç”¨è€…å¤šæ­¤ä¸€ä¸¾ç®—å®Œä¼ è¿›æ¥å‘¢ï¼Ÿ<br><br>è¿™ä¸ª len å­—æ®µï¼Œè®¾è®¡ä¸Šæ˜¯ä¸æ˜¯æœ‰ç‚¹å†—ä½™äº†ï¼Ÿï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462397,"discussion_content":"ä¸èƒ½å®Œå…¨è®¡ç®—å‡ºæ¥ï¼Œæ¯”å¦‚å˜é•¿åœ°å€ï¼Œä¸çŸ¥é“lenï¼Œæ˜¯æ²¡æœ‰åŠæ³•çŸ¥é“addrç¡®åˆ‡å€¼çš„è¾¹ç•Œçš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565579256,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1233780,"avatar":"https://static001.geekbang.org/account/avatar/00/12/d3/74/578b169d.jpg","nickname":"Yuuuuu","note":"","ucode":"64FD04761D2111","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4555,"discussion_content":"ä¼ çš„æ˜¯æŒ‡é’ˆï¼Œæ— æ³•è·å–åˆ°åŸå§‹æ•°æ®å¤§å°ã€‚å°±åƒæˆ‘ä»¬ä»¥æ•°ç»„ä½œä¸ºå‚æ•°æ—¶ï¼Œæˆ‘ä»¬æ€»è¦ä¼ é€’æ•°ç»„çš„é•¿åº¦ä¸€æ ·ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565540275,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122752,"user_name":"æœ‰ç‚¹æ„æ€","can_delete":false,"product_type":"c1","uid":1399454,"ip_address":"","ucode":"67F55604E8A548","user_header":"https://static001.geekbang.org/account/avatar/00/15/5a/9e/8f2ccc1d.jpg","comment_is_top":false,"comment_ctime":1565512017,"is_pvip":true,"replies":[{"id":"45160","content":"å¾€ä¸‹çœ‹ï¼Œå¾ˆå¿«è®²åˆ°è¿™éƒ¨åˆ†å†…å®¹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1565577291,"ip_address":"","comment_id":122752,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1565512017","product_id":100032701,"comment_content":"è€å¸ˆå¥½<br>ç°åœ¨åœ¨åšc++ç½‘ç»œç¼–ç¨‹è¿™å— linuxå’Œwindowsä¸‹éƒ½è¦ç”¨<br>ç°åœ¨é‡åˆ°ä¸€ä¸ªé—®é¢˜ å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„å¿ƒè·³æ£€æµ‹æ€ä¹ˆåšï¼Ÿ<br>ç”¨keepliveå¥½ä¹ˆï¼Ÿè¿˜æœ‰å…¶ä»–æ›´å¥½çš„æ–¹æ¡ˆä¹ˆï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462388,"discussion_content":"å¾€ä¸‹çœ‹ï¼Œå¾ˆå¿«è®²åˆ°è¿™éƒ¨åˆ†å†…å®¹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565577291,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122719,"user_name":"æ˜Ÿäº¦è¾°","can_delete":false,"product_type":"c1","uid":1284592,"ip_address":"","ucode":"B0388FBFFDEE7E","user_header":"https://static001.geekbang.org/account/avatar/00/13/99/f0/d9343049.jpg","comment_is_top":false,"comment_ctime":1565503529,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1565503529","product_id":100032701,"comment_content":"https:&#47;&#47;github.com&#47;v1xingyue&#47;geeknetwork&#47;tree&#47;master&#47;simpletcp ","like_count":0},{"had_liked":false,"id":122690,"user_name":"wang","can_delete":false,"product_type":"c1","uid":1270262,"ip_address":"","ucode":"C1A3BCACCB188E","user_header":"https://static001.geekbang.org/account/avatar/00/13/61/f6/1d6b548a.jpg","comment_is_top":false,"comment_ctime":1565492067,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1565492067","product_id":100032701,"comment_content":"1. éé˜»å¡è°ƒç”¨ï¼Œæ„æ€ä¹Ÿå°±æ˜¯åœ¨æœåŠ¡å™¨è¿›ç¨‹åœ¨accept æˆ–è€… connect å‡½æ•°ä¸­ç›´æ¥returnï¼Œè€Œæ²¡æœ‰ä¸€å®šè¦è¿™æ¬¡è¿æ¥åº”ç­”æˆåŠŸç„¶åæ‰èƒ½return<br>2. å®¢æˆ·ç«¯å½“ç„¶å¯ä»¥ä½¿ç”¨bind å‡½æ•°ï¼Œæ˜¾ç¤ºè®©å†…æ ¸ä¸éšæœºåˆ†é…ç«¯å£å·","like_count":0},{"had_liked":false,"id":122649,"user_name":"Better me","can_delete":false,"product_type":"c1","uid":1261959,"ip_address":"","ucode":"CADF08D357489A","user_header":"https://static001.geekbang.org/account/avatar/00/13/41/87/46d7e1c2.jpg","comment_is_top":false,"comment_ctime":1565451339,"is_pvip":true,"replies":[{"id":"45155","content":"ä½ å¯ä»¥ç†è§£é€šé…åœ°å€ä¸º*ï¼Œæ„æ€å°±æ˜¯è¿™å°æœºå™¨ä¸Šçš„æ‰€æœ‰IPåœ°å€éƒ½å¯ä»¥å½’æˆ‘ç®¡ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1565576999,"ip_address":"","comment_id":122649,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1565451339","product_id":100032701,"comment_content":"è€å¸ˆé€šé…åœ°å€é‚£å—æœ‰ç‚¹ä¸ç†è§£ï¼Œå•ç‹¬è®¾ç½®ipåœ°å€çš„è¯ï¼Œæ˜¯éœ€è¦æå‰çŸ¥é“è¯¥åº”ç”¨ç¨‹åºå°†éƒ¨ç½²åˆ°é‚£å°æœåŠ¡å™¨ä¸Šï¼Œè€Œé€šé…åœ°å€ä¸éœ€è¦é‚£æ ·æ˜¯å› ä¸ºå¯ä»¥è‡ªåŠ¨è¯†åˆ«åˆ°æœåŠ¡å™¨ä¸Šæ¯ä¸ªç½‘å¡çš„ipåœ°å€å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462343,"discussion_content":"ä½ å¯ä»¥ç†è§£é€šé…åœ°å€ä¸º*ï¼Œæ„æ€å°±æ˜¯è¿™å°æœºå™¨ä¸Šçš„æ‰€æœ‰IPåœ°å€éƒ½å¯ä»¥å½’æˆ‘ç®¡ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565576999,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122633,"user_name":"æ˜Ÿäº¦è¾°","can_delete":false,"product_type":"c1","uid":1284592,"ip_address":"","ucode":"B0388FBFFDEE7E","user_header":"https://static001.geekbang.org/account/avatar/00/13/99/f0/d9343049.jpg","comment_is_top":false,"comment_ctime":1565447441,"is_pvip":true,"replies":[{"id":"45156","content":"localhosté…ç½®äº†åˆ«åæ²¡ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1565577079,"ip_address":"","comment_id":122633,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1565447441","product_id":100032701,"comment_content":"å‘ç°ä¸€ä¸ªé—®é¢˜ã€‚<br><br>æˆ‘çš„server ç«¯bind çš„æ˜¯0.0.0.0 çš„åœ°å€ ã€‚<br>ä½†æ˜¯ï¼Œæˆ‘çš„client è¿æ¥ localhost ä¸èƒ½è¿æ¥åˆ°ï¼Œä½†æ˜¯ è¿æ¥ 127.0.0.1 å¯ä»¥ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ ","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462336,"discussion_content":"localhosté…ç½®äº†åˆ«åæ²¡ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565577079,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122524,"user_name":"insist","can_delete":false,"product_type":"c1","uid":1054536,"ip_address":"","ucode":"1EE2800A900BA7","user_header":"https://static001.geekbang.org/account/avatar/00/10/17/48/3ab39c86.jpg","comment_is_top":false,"comment_ctime":1565415631,"is_pvip":false,"replies":[{"id":"45169","content":"æ˜¯å“åº”æœåŠ¡å™¨ç«¯çš„SYNåŒ…ï¼ŒACKåŒ…ä¸éœ€è¦ACKçš„ï¼Œå¦åˆ™ä¸‹å»æ²¡å®Œæ²¡äº†","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1565578695,"ip_address":"","comment_id":122524,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1565415631","product_id":100032701,"comment_content":"1ã€é˜»å¡è°ƒç”¨ï¼Œçº¿ç¨‹éœ€è¦åœ¨ä¸€ç›´ç­‰å¾…å¯¹æ–¹æ•°æ®çš„åˆ°æ¥ï¼Œæ²¡æ³•å»å¹²åˆ«çš„äº‹ã€‚éé˜»å¡ï¼Œçº¿ç¨‹åœ¨è°ƒç”¨åï¼Œå¯ä»¥å»å¹²åˆ«çš„äº‹ï¼Œç­‰åˆ°æ•°æ®åˆ°æ¥äº†ï¼Œé€šçŸ¥çº¿ç¨‹å›æ¥å·¥ä½œã€‚<br>2ã€å®¢æˆ·ç«¯connectä¹‹åå¯ä»¥è°ƒç”¨bindï¼Œä½†å¹¶ä¸æ˜¯ä¸€å®šéœ€è¦ï¼Œå¦‚æœæ²¡æœ‰ä¸»åŠ¨è°ƒç”¨bindï¼Œæ“ä½œç³»ç»Ÿå†…æ ¸ä¼šä¸ºåˆ†é…ä¸€ä¸ªç«¯å£ã€‚<br>å¦å¤–ï¼Œtcpä¸‰æ¬¡æ¡æ‰‹çš„ç¬¬3æ­¥æ˜¯ä¸æ˜¯æœ‰è¯¯ï¼Œå®¢æˆ·ç«¯åº”è¯¥æ˜¯å“åº”ACKåŒ…ï¼Œè€Œä¸æ˜¯SYNåŒ…ã€‚","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462289,"discussion_content":"æ˜¯å“åº”æœåŠ¡å™¨ç«¯çš„SYNåŒ…ï¼ŒACKåŒ…ä¸éœ€è¦ACKçš„ï¼Œå¦åˆ™ä¸‹å»æ²¡å®Œæ²¡äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565578695,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122506,"user_name":"å¤šè¥„ä¸¸","can_delete":false,"product_type":"c1","uid":1074310,"ip_address":"","ucode":"1AA1497C5A293C","user_header":"https://static001.geekbang.org/account/avatar/00/10/64/86/f5a9403a.jpg","comment_is_top":false,"comment_ctime":1565409371,"is_pvip":false,"replies":[{"id":"45165","content":"Javaå¯¹socketè¿›è¡Œäº†ä¸€å±‚å°è£…ï¼Œè¿™é‡Œ Socketç±»å’ŒServerSocketç±»åˆ†åˆ«ç”¨æ¥åˆ›å»ºå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯socketï¼Œå€ŸåŠ©çš„å®ç°éƒ½æ˜¯SocketImplã€‚ä½ å¯ä»¥è¿™æ ·ç†è§£ï¼ŒJavaåœ¨åŸºæœ¬çš„socketåŸºç¡€ä¸Šï¼Œå®ç°äº†make_server_socketå’Œmake_client_socketä¸¤ä¸ªä¸åŒçš„æŠ½è±¡ï¼ŒæŠŠæœ¬æ¥æ¯æ¬¡éœ€è¦é‡å¤åšçš„äº‹æƒ…éƒ½æ”¶åˆ°ä¸åŒçš„ç±»ä¸­äº†ã€‚<br><br>è¿™é‡Œçš„Socketå’ŒServerSocketå¯ä»¥ç†è§£æˆé˜»å¡å¼çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1565577989,"ip_address":"","comment_id":122506,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1565409371","product_id":100032701,"comment_content":"è€å¸ˆï¼Œæˆ‘å…ˆæŠŠæˆ‘çœ‹åˆ°çš„è´´å‡ºæ¥ï¼š<br><br>public abstract class SocketImpl implements SocketOptions {<br>    &#47;**<br>     * The actual Socket object.<br>     *&#47;<br>    Socket socket = null;<br>    ServerSocket serverSocket = null;<br><br>    &#47;**<br>     * The file descriptor object for this socket.<br>     *&#47;<br>    protected FileDescriptor fd;<br><br>    &#47;**<br>     * The IP address of the remote end of this socket.<br>     *&#47;<br>    protected InetAddress address;<br><br>    &#47;**<br>     * The port number on the remote host to which this socket is connected.<br>     *&#47;<br>    protected int port;<br><br>    &#47;**<br>     * The local port number to which this socket is connected.<br>     *&#47;<br>    protected int localport;<br>}<br><br>è€å¸ˆï¼ŒåŸè°…æˆ‘æ˜¯ä¸ªå·®ç”Ÿã€‚ <br><br>çœ‹å®Œäº†æ‚¨å†™çš„ç¬¬ä¸€è®²,é˜»å¡å¼çš„ç½‘ç»œè¿æ¥ã€‚ <br><br>æˆ‘æ™“å¾—è¿™æ˜¯åŸºç¡€ï¼Œä½†æ˜¯å¾ˆé‡è¦ã€‚<br><br>æˆ‘æƒ³å»çœ‹çœ‹ java.net.Socket  ä¸ java.net.ServerSocketçš„åŒºåˆ«ï¼Œ<br><br>å‘ç° socket å’Œ serverSocket åœ¨è®¾è®¡ä¸Š å¥½åƒä¸€ç‚¹å…³ç³»éƒ½æœ‰å•Šï¼Ÿ<br><br>éƒ½æ˜¯é€šè¿‡ java.net.SocketImpl æ¥å®ç°<br><br>java.net.SocketImpl#bind<br><br>java.net.SocketImpl#connect(java.net.InetAddress, int)<br><br>java.net.SocketImpl#listen<br><br>java.net.SocketImpl#accept<br><br>java.net.SocketImpl#close<br><br>è¿™ä¸€ç³»åˆ—çš„ç³»ç»Ÿè°ƒç”¨ï¼Œæ˜¯è¿™æ ·å­å˜›ï¼Ÿ<br><br>å¦å¤–ï¼Œè¿™ä¸¤ä¸ª  java.net.Socket  ä¸ java.net.ServerSocket éƒ½æ˜¯åœ¨java.netåŒ…ä¸‹ï¼Œå´æ˜¯é˜»å¡å¼çš„ã€‚æ˜¯è¿™æ ·å­å˜›ï¼Ÿ<br><br>æ³è¯·è€å¸ˆå›ç­”ã€‚","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462281,"discussion_content":"Javaå¯¹socketè¿›è¡Œäº†ä¸€å±‚å°è£…ï¼Œè¿™é‡Œ Socketç±»å’ŒServerSocketç±»åˆ†åˆ«ç”¨æ¥åˆ›å»ºå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯socketï¼Œå€ŸåŠ©çš„å®ç°éƒ½æ˜¯SocketImplã€‚ä½ å¯ä»¥è¿™æ ·ç†è§£ï¼ŒJavaåœ¨åŸºæœ¬çš„socketåŸºç¡€ä¸Šï¼Œå®ç°äº†make_server_socketå’Œmake_client_socketä¸¤ä¸ªä¸åŒçš„æŠ½è±¡ï¼ŒæŠŠæœ¬æ¥æ¯æ¬¡éœ€è¦é‡å¤åšçš„äº‹æƒ…éƒ½æ”¶åˆ°ä¸åŒçš„ç±»ä¸­äº†ã€‚\n\nè¿™é‡Œçš„Socketå’ŒServerSocketå¯ä»¥ç†è§£æˆé˜»å¡å¼çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565577989,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122497,"user_name":"Alery","can_delete":false,"product_type":"c1","uid":1156557,"ip_address":"","ucode":"08F3F49181E67B","user_header":"https://static001.geekbang.org/account/avatar/00/11/a5/cd/3aff5d57.jpg","comment_is_top":false,"comment_ctime":1565408268,"is_pvip":false,"replies":[{"id":"45164","content":"æœåŠ¡ç«¯è®°ä¸‹å››å…ƒç»„ &lt;å®¢æˆ·ç«¯ip,å®¢æˆ·ç«¯port, æœåŠ¡ç«¯ipï¼ŒæœåŠ¡ç«¯port&gt;ï¼ŒæŠŠè¿™ä¸ªå››å…ƒç»„å’ŒæœåŠ¡å™¨ç«¯å»ºç«‹çš„connectionå¥—æ¥å­—å…³è”ï¼Œè¿™æ ·å°±å¯ä»¥ç›´æ¥æŸ¥è¯¢å¾—åˆ°äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1565577584,"ip_address":"","comment_id":122497,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1565408268","product_id":100032701,"comment_content":"ä¸€ç›´æœ‰ä¸€ä¸ªç–‘æƒ‘ï¼Œå®¢æˆ·ç«¯é€šè¿‡æŒ‡å®šæœåŠ¡ç«¯çš„ip+port(10.10.88.99:80)å¹¶åˆ›å»ºä¸€ä¸ªsocketå»connectæœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯æ¥å—åˆ°å®¢æˆ·ç«¯çš„è¯·æ±‚å¹¶åˆ›å»ºä¸€ä¸ªæ–°çš„è¿æ¥socketå»å’Œå®¢æˆ·ç«¯è¿›è¡Œé€šä¿¡ï¼Œé‚£å®¢æˆ·ç«¯é€šè¿‡ä¹‹å‰åˆ›å»ºçš„å®¢æˆ·ç«¯socketç»™æœåŠ¡ç«¯å‘é€ä¿¡æ¯æ—¶è¿˜æ˜¯ä¼šå¾€ip+port(10.10.88.99:80)ä¸Šå‘é€ï¼Œæˆ‘çš„é—®é¢˜æ˜¯æœåŠ¡ç«¯å¦‚ä½•å¾—çŸ¥å½“å‰å‘é€æ¶ˆæ¯è¿‡æ¥çš„å®¢æˆ·ç«¯æ˜¯ä¸ä¹‹å‰åˆ›å»ºçš„è¿æ¥socketé€šä¿¡ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462277,"discussion_content":"æœåŠ¡ç«¯è®°ä¸‹å››å…ƒç»„ &amp;lt;å®¢æˆ·ç«¯ip,å®¢æˆ·ç«¯port, æœåŠ¡ç«¯ipï¼ŒæœåŠ¡ç«¯port&amp;gt;ï¼ŒæŠŠè¿™ä¸ªå››å…ƒç»„å’ŒæœåŠ¡å™¨ç«¯å»ºç«‹çš„connectionå¥—æ¥å­—å…³è”ï¼Œè¿™æ ·å°±å¯ä»¥ç›´æ¥æŸ¥è¯¢å¾—åˆ°äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565577584,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1156557,"avatar":"https://static001.geekbang.org/account/avatar/00/11/a5/cd/3aff5d57.jpg","nickname":"Alery","note":"","ucode":"08F3F49181E67B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4422,"discussion_content":"è¿˜æ˜¯è¯´æœåŠ¡ç«¯ç›‘å¬socketæ”¶åˆ°ä¸€ä¸ªå®¢æˆ·ç«¯è¿æ¥è¯·æ±‚ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„è¿æ¥socketä¸å®¢æˆ·ç«¯é€šä¿¡ï¼Œè¿™ä¸ªæ–°çš„è¿æ¥socketä¼šç›‘å¬ä¸€ä¸ªä¸ç›‘å¬socketä¸åŒçš„ç«¯å£å·ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565408479,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122495,"user_name":"ly","can_delete":false,"product_type":"c1","uid":1221628,"ip_address":"","ucode":"5E2B85252DABF3","user_header":"https://static001.geekbang.org/account/avatar/00/12/a3/fc/379387a4.jpg","comment_is_top":false,"comment_ctime":1565408237,"is_pvip":false,"replies":[{"id":"45162","content":"SOCK_RAWä½¿ç”¨åœ¨æ˜¯éœ€è¦å¯¹ç½‘ç»œæŠ¥æ–‡è¿›è¡Œç›´æ¥è§£æçš„åœºæ™¯ï¼Œé’ˆå¯¹æ¯æ¬¡ACKæµªè´¹å¸¦å®½çš„ç°è±¡TCPå®ç°æ˜¯ä¼˜åŒ–å®ç°çš„ï¼Œæ¯”å¦‚å»¶è¿ŸACKï¼Œä¸ç®¡æ€ä¹ˆæ ·éƒ½éœ€è¦ACKçš„ï¼Œå¦åˆ™å°±æ²¡åŠæ³•è¾¾åˆ°å¯é çš„æŠ•é€’äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1565577450,"ip_address":"","comment_id":122495,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1565408237","product_id":100032701,"comment_content":"è¯»äº†è¿™ç¯‡æ–‡ç« åŠ ä¸Šè‡ªå·±ç”¨ä»¥ä¸Šå‡½æ•°å†™çš„ä»£ç å®è·µï¼Œæœ‰å‡ ä¸ªç–‘é—®ï¼š<br>1. åˆ›å»ºsocketçš„æ—¶å€™ï¼Œé‚£ä¸ªåŸå§‹å¥—æ¥å­—é€‰é¡¹SOCK_RAWæ˜¯ä¸ªä»€ä¹ˆä¸œä¸œï¼Ÿå“ªä¸ªåœ°æ–¹ä½¿ç”¨å‘¢ï¼Ÿ<br>2. æˆ‘åœ¨ç½‘ä¸Šæ‰¾äº†å‡ ä¸ªç®€å•çš„demoï¼Œä¹Ÿæ˜¯ä»¥ä¸Šå‡ ä¸ªå‡½æ•°æ¥å®ç°ç®€å•çš„æœåŠ¡ç«¯ç¨‹åºï¼Œç„¶åç”¨wiresharkæ¥æŠ“åŒ…ï¼Œå‘ç°æ¯ä¸€æ¬¡å®¢æˆ·ç«¯å‘é€çš„æ¶ˆæ¯ï¼ˆPSH+ACKæŒ‡ä»¤ï¼‰ï¼ŒæœåŠ¡ç«¯éƒ½ä¼šå›é€ä¸€ä¸ªACKæŒ‡ä»¤ï¼Œä¹Ÿå°±æ˜¯ä¸€æ¬¡å‘ä¸€æ¬¡ç¡®è®¤çš„æ¨¡å¼ï¼Œæˆ‘æƒ³é—®æ˜¯ä¸æ˜¯TCP&#47;IPåè®®é’ˆå¯¹æ¯ä¸€ä¸ªæ¶ˆæ¯ï¼Œæ¥æ”¶ç«¯éƒ½ä¼šè¿›è¡Œä¸€æ¬¡ACKç¡®è®¤ï¼ˆä»£è¡¨æˆ‘æ”¶åˆ°äº†ï¼‰ï¼Ÿå¦‚æœæ˜¯ï¼Œä¸ªäººæ„Ÿè§‰å¥½æµªè´¹æµé‡ã€‚<br>å¦å¤–å¯¹äºè€å¸ˆçš„æé—®ï¼š<br>å®¢æˆ·ç«¯å‘èµ· connect è°ƒç”¨ä¹‹å‰ï¼Œåº”è¯¥æ˜¯å¯ä»¥è°ƒç”¨ bind å‡½æ•°çš„ï¼›æœåŠ¡ç«¯ç”¨bindå‡½æ•°ç¡®è®¤ipåœ°å€å’Œç«¯å£ï¼Œä¸€èˆ¬è¯´æ¥ipåœ°å€å°±æ˜¯é»˜è®¤ï¼Œç«¯å£æ˜¯ä¸€ä¸ªå›ºå®šç«¯å£ï¼Œå¦‚80ï¼›å¦‚æœå®¢æˆ·ç«¯å»bindçš„è¯ï¼Œåº”è¯¥ç”¨å¤„ä¹Ÿæ˜¯å·®ä¸å¤šçš„ï¼Œipåœ°å€æ˜¯é€šå¸¸æ˜¯æœ¬æœºipï¼ŒæŒ‡å®šæŸä¸ªå®¢æˆ·ç«¯ç«¯å£ï¼ˆä½†é€šå¸¸ä¸éœ€è¦ï¼Œæ“ä½œç³»ç»Ÿä¼šè‡ªå·±åˆ†é…ï¼‰ã€‚<br>å…³äºéé˜»å¡å¥—æ¥å­—ï¼Œæˆ‘æ„Ÿè§‰å’Œä¹‹å‰å¬è¿‡çš„å¤šè·¯å¤ç”¨è¿™ä¸ªæ¦‚å¿µåº”è¯¥å·®ä¸å¤šï¼Œéé˜»å¡ï¼Œæ‰€æœ‰çš„æ–¹æ³•è°ƒç”¨éƒ½æ˜¯è°ƒç”¨å³è¿”å›ï¼Œä¸ä¼šé˜»å¡çº¿ç¨‹ï¼›åº•å±‚æ“ä½œç³»ç»Ÿä¼šç»´æŠ¤socketçš„è¿æ¥ï¼Œå½“æŸäº›socketæœ‰è¯»ã€å†™ç­‰æ“ä½œçš„æ—¶å€™ï¼Œæ“ä½œç³»ç»Ÿå°±å°†socketå‘ç»™ä¸Šå±‚ç¨‹åºï¼›å¦‚æœæ˜¯é˜»å¡ï¼Œä¸€æ—¦æœ‰socketè¿æ¥ï¼Œæ“ä½œç³»ç»Ÿå°±æŠŠsocketæ‰”ç»™ä¸Šå±‚ç¨‹åºï¼Œä¸Šå±‚ç¨‹åºå¦‚æœæƒ³å¾—åˆ°socketçš„å†…å®¹ï¼Œå°±å»readï¼Œç»“æœå¯èƒ½socketçš„æ¶ˆæ¯è¿˜æ²¡æœ‰åˆ°ï¼Œç„¶åå°±é˜»å¡äº†ï¼Œçº¿ç¨‹ä¹Ÿåœæ»ã€‚æ€»ä¹‹ï¼Œéé˜»å¡ä¼šä½¿ç”¨æ›´å°‘çš„çº¿ç¨‹æ¥æœåŠ¡ï¼Œæ•ˆç‡é«˜ï¼›åœºæ™¯çš„è¯åº”è¯¥å°±æ˜¯æ‰€è°“çš„å®¢æˆ·ç«¯è¾ƒå¤šï¼Œä½†æ˜¯åŒä¸€æ—¶é—´çš„æ¶ˆæ¯é‡ä¸å¤§çš„é‚£ç§ã€‚","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462276,"discussion_content":"SOCK_RAWä½¿ç”¨åœ¨æ˜¯éœ€è¦å¯¹ç½‘ç»œæŠ¥æ–‡è¿›è¡Œç›´æ¥è§£æçš„åœºæ™¯ï¼Œé’ˆå¯¹æ¯æ¬¡ACKæµªè´¹å¸¦å®½çš„ç°è±¡TCPå®ç°æ˜¯ä¼˜åŒ–å®ç°çš„ï¼Œæ¯”å¦‚å»¶è¿ŸACKï¼Œä¸ç®¡æ€ä¹ˆæ ·éƒ½éœ€è¦ACKçš„ï¼Œå¦åˆ™å°±æ²¡åŠæ³•è¾¾åˆ°å¯é çš„æŠ•é€’äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565577450,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122427,"user_name":"æ²‰æ·€çš„æ¢¦æƒ³","can_delete":false,"product_type":"c1","uid":1177315,"ip_address":"","ucode":"BCB7C26F9D214B","user_header":"https://static001.geekbang.org/account/avatar/00/11/f6/e3/e4bcd69e.jpg","comment_is_top":false,"comment_ctime":1565364107,"is_pvip":false,"replies":[{"id":"45188","content":"æœªå®Œæˆè¿æ¥æ˜¯æŒ‡æŸä¸ªå®¢æˆ·å·²ç»å‘å‡ºéƒ¨åˆ†TCPè¿æ¥è¯·æ±‚çš„æŠ¥æ–‡ï¼Œè€ŒæœåŠ¡å™¨è¿˜åœ¨ç­‰å¾…å®ŒæˆTCPä¸‰æ¬¡æ¡æ‰‹çš„è¿™éƒ¨åˆ†è¿æ¥","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1565581725,"ip_address":"","comment_id":122427,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1565364107","product_id":100032701,"comment_content":"listenå‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°backlogè¡¨ç¤ºæœªå®Œæˆè¿æ¥é˜Ÿåˆ—çš„å¤§å°ã€‚æ‰€è°“&quot;æœªå®Œæˆè¿æ¥&quot;æ˜¯ä»€ä¹ˆå«ä¹‰ï¼Ÿæ˜¯å°šæœªå®Œå…¨å»ºç«‹çš„è¿æ¥ï¼Ÿè¿˜æ˜¯å°šæœªå…³é—­çš„è¿æ¥ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462246,"discussion_content":"æœªå®Œæˆè¿æ¥æ˜¯æŒ‡æŸä¸ªå®¢æˆ·å·²ç»å‘å‡ºéƒ¨åˆ†TCPè¿æ¥è¯·æ±‚çš„æŠ¥æ–‡ï¼Œè€ŒæœåŠ¡å™¨è¿˜åœ¨ç­‰å¾…å®ŒæˆTCPä¸‰æ¬¡æ¡æ‰‹çš„è¿™éƒ¨åˆ†è¿æ¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565581725,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122362,"user_name":"æ˜Ÿäº¦è¾°","can_delete":false,"product_type":"c1","uid":1284592,"ip_address":"","ucode":"B0388FBFFDEE7E","user_header":"https://static001.geekbang.org/account/avatar/00/13/99/f0/d9343049.jpg","comment_is_top":false,"comment_ctime":1565348897,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1565348897","product_id":100032701,"comment_content":"ç›‘å¬åœ°å€ï¼Œç»‘å®šçš„æ—¶å€™ï¼Œå¯ä»¥é€šè¿‡ arpa&#47;inet.h ä¸­çš„ inet_addr åˆå§‹åŒ–åœ°å€ï¼š<br><br>æ³¨ï¼š ç»‘å®š 127.0.0.1 çš„ 1~1023 ç«¯å£ï¼Œå¯èƒ½ éœ€è¦ root æƒé™","like_count":0},{"had_liked":false,"id":122337,"user_name":"ä¼ è¯´ä¸­çš„æˆå¤§å¤§","can_delete":false,"product_type":"c1","uid":1236766,"ip_address":"","ucode":"103543D6E706BF","user_header":"https://static001.geekbang.org/account/avatar/00/12/df/1e/cea897e8.jpg","comment_is_top":false,"comment_ctime":1565342526,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1565342526","product_id":100032701,"comment_content":"ç¬¬ä¸€é—®. é€šè¿‡fcntlè®¾ç½®ä¸ºO_NONBLOCKéé˜»å¡å¥—æ¥å­—<br>ç¬¬äºŒé—®. è‡ªå·±çŒœæƒ³å®¢æˆ·ç«¯å¯ä»¥è°ƒç”¨bindå› ä¸ºåªæ˜¯å¯¹å¥—æ¥å­—å’Œipåœ°å€å’Œç«¯å£è¿›è¡Œbindè€Œå·²,ä½†æ˜¯å®é™…ä¸Šæ²¡å¿…è¦æœåŠ¡å™¨éœ€è¦é€šè¿‡bindä¸€ä¸ªipåœ°å€å’Œç«¯å£ä¾›å®¢æˆ·ç«¯è¿æ¥ï¼Œå®¢æˆ·ç«¯ä¸éœ€è¦è¿™ä¸ªè¿‡ç¨‹ï¼Œæ‰€ä»¥æ²¡å¿…è¦bind,å®ƒçš„ç«¯å£æ˜¯ç”±å†…æ ¸åˆ†é…çš„","like_count":0,"discussions":[{"author":{"id":1074310,"avatar":"https://static001.geekbang.org/account/avatar/00/10/64/86/f5a9403a.jpg","nickname":"å¤šè¥„ä¸¸","note":"","ucode":"1AA1497C5A293C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4391,"discussion_content":"å¼±å¼±çš„é—®ä¸€ä¸‹ï¼Œfcntlæ˜¯å•¥å•Šï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565347292,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122310,"user_name":"Sweety","can_delete":false,"product_type":"c1","uid":1228667,"ip_address":"","ucode":"DC90C959AE147F","user_header":"https://static001.geekbang.org/account/avatar/00/12/bf/7b/e9592637.jpg","comment_is_top":false,"comment_ctime":1565336529,"is_pvip":false,"replies":[{"id":"45154","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1565576945,"ip_address":"","comment_id":122310,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1565336529","product_id":100032701,"comment_content":"æ‰“å¡.<br>ç»ˆäºç†è§£äº†ä¸‰æ¬¡æ¡æ‰‹.å‘å‡ºå¹¶æ”¶åˆ°å›åº”è¡¨ç¤ºä¸€æ¬¡æˆåŠŸçš„è¿æ¥,æœåŠ¡ç«¯ä¸å®¢æˆ·ç«¯éƒ½éœ€è¦éªŒè¯,æœåŠ¡ç«¯å°†å›åº”ä¸å‘å‡ºä½œä¸ºä¸€æ¬¡è¯·æ±‚,æ‰€ä»¥ä»å››æ¬¡å˜æˆäº†ä¸‰æ¬¡,ç¡®ä¿äº†è¿æ¥çš„å‡†ç¡®æ€§.<br>å®¢æˆ·ç«¯å¯ä»¥è°ƒç”¨bindå‡½æ•°,ä½†æ˜¯æ„Ÿè§‰å¦‚æœæ˜¯ä¸€ä¸¤æ¬¡çš„è¯·æ±‚,æ²¡å¿…è¦ç»‘å®šç‰¹å®šçš„ç«¯å£.","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462201,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565576945,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122252,"user_name":"fjpcode","can_delete":false,"product_type":"c1","uid":1306092,"ip_address":"","ucode":"C32C5E3ECB9A90","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ61zTDmLk7IhLJn6seBPOwsVaKIWUWaxk5YmsdYBZUOYMQCsyl9iaQVSg9U5qJVLLOCFUoLUuYnRA/132","comment_is_top":false,"comment_ctime":1565323111,"is_pvip":false,"replies":[{"id":"45147","content":"ç†è§£åˆ°ä½","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1565576601,"ip_address":"","comment_id":122252,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1565323111","product_id":100032701,"comment_content":"ä¸‰æ¬¡æ¡æ‰‹æˆ‘çš„ç†è§£æ˜¯é™¤äº†å‘ŠçŸ¥å¯¹æ–¹è‡ªå·±çš„åˆå§‹åºå·å¤–ï¼Œæœ€ä¸»è¦çš„ç›®çš„æ˜¯ç¡®ä¿é€šä¿¡åŒæ–¹éƒ½æœ‰æ­£å¸¸çš„æ”¶å‘èƒ½åŠ›ã€‚ä»å‘é€syncåˆ°æ”¶åˆ°æœåŠ¡ç«¯çš„ack + syncï¼Œå®¢æˆ·ç«¯å°±å¯ä»¥ç¡®è®¤æœåŠ¡ç«¯çš„æ”¶å‘èƒ½åŠ›æ˜¯æ²¡é—®é¢˜çš„ã€‚è‡³äºä¸ºä»€ä¹ˆä¸æ˜¯ä¸¤æ¬¡æ¡æ‰‹ï¼Œæ˜¯å› ä¸ºæ­¤æ—¶æœåŠ¡ç«¯åªèƒ½ç¡®ä¿å®¢æˆ·ç«¯çš„å‘é€èƒ½åŠ›æ²¡æœ‰é—®é¢˜ï¼Œæ²¡æ³•ç¡®è®¤æ¥æ”¶èƒ½åŠ›æ˜¯å¦æœ‰é—®é¢˜, å½“æ”¶åˆ°å®¢æˆ·ç«¯è¿”å›ackæ—¶è¿™è¯´æ˜å®¢æˆ·ç«¯å·²ç»æ”¶åˆ°äº†æœåŠ¡å™¨çš„sync+ackåŒ…,ä»è€Œè¯æ˜å®¢æˆ·ç«¯çš„æ¥æ”¶èƒ½åŠ›ä¹Ÿæ˜¯æ­£å¸¸çš„ã€‚","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462175,"discussion_content":"ç†è§£åˆ°ä½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565576601,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122244,"user_name":"è®¸ç«¥ç«¥","can_delete":false,"product_type":"c1","uid":1003005,"ip_address":"","ucode":"4B799C0C6BC678","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4d/fd/0aa0e39f.jpg","comment_is_top":false,"comment_ctime":1565321654,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1565321654","product_id":100032701,"comment_content":"TCPä¸‰æ¬¡æ¡æ‰‹çš„æ„ä¹‰åœ¨äºï¼Œå»ºç«‹å¯é çš„è¿æ¥ï¼ŒåŒæ–¹å»ºç«‹å¥½æ•°æ®ç»“æ„ï¼Œä¸ºæ¥ä¸‹æ¥æ•°æ®ä¼ è¾“åšå¥½å‡†å¤‡ã€‚<br>è‡³äºä¸ºä»€ä¹ˆæ˜¯ä¸‰æ¬¡ä¸æ˜¯å››æ¬¡äº”æ¬¡ï¼Œæ˜¯å› ä¸ºä¸‰æ¬¡æ¡æ‰‹å¯ä»¥æ°åˆ°å¥½å¤„çš„ç¡®å®šåŒæ–¹é€šä¿¡èƒ½åŠ›éƒ½æ²¡æœ‰é—®é¢˜ï¼Œç¬¬ä¸‰æ¬¡æ¡æ‰‹æ˜¯é˜»æ­¢å·²å¤±æ•ˆçš„ç¬¬ä¸€æ¬¡æ¡æ‰‹åˆä¼ è¾“å›æ¥äº†ï¼Œä»è€Œé€ æˆé”™è¯¯çš„è¿æ¥ã€‚","like_count":0},{"had_liked":false,"id":122240,"user_name":"Allen","can_delete":false,"product_type":"c1","uid":1252639,"ip_address":"","ucode":"2F3959A717BE10","user_header":"https://static001.geekbang.org/account/avatar/00/13/1d/1f/6bc10297.jpg","comment_is_top":false,"comment_ctime":1565321116,"is_pvip":false,"replies":[{"id":"45146","content":"èµ","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1565576570,"ip_address":"","comment_id":122240,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1565321116","product_id":100032701,"comment_content":"å®¢æˆ·ç«¯åœ¨connectä¹‹å‰å¯ä»¥è°ƒç”¨bindå‡½æ•°ç»‘å®šä¸€ä¸ªå›ºå®šç«¯å£ã€‚ä½†æ˜¯é€šå¸¸ï¼Œä¸å»ºè®®è¿™æ ·åšï¼Œå› ä¸ºæ“ä½œç³»ç»Ÿè‡ªå·±éšæœºåˆ†é…ç«¯å£ï¼Œé¿å…äº†è‡ªå·±åˆ†é…ç«¯å£å¸¦æ¥ç«¯å£å†²çªçš„é—®é¢˜ï¼›<br><br>====================================<br>","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462168,"discussion_content":"èµ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565576570,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122230,"user_name":"å¤šè¥„ä¸¸","can_delete":false,"product_type":"c1","uid":1074310,"ip_address":"","ucode":"1AA1497C5A293C","user_header":"https://static001.geekbang.org/account/avatar/00/10/64/86/f5a9403a.jpg","comment_is_top":false,"comment_ctime":1565319902,"is_pvip":false,"replies":[{"id":"45143","content":"è¿™åªæ˜¯ä¸€ä¸ªä¾‹å­ï¼Œç°å®ç½‘ç»œåè®®å¯èƒ½ä¼šé€‰ç”¨éšæœºåºåˆ—å·æ¥å®Œæˆè¿æ¥å»ºç«‹ã€‚æ‰€ä»¥ï¼Œå†²çªçš„å‡ ç‡æ˜¯å¾ˆå°çš„ã€‚è€Œä¸”ï¼Œæ­£å¦‚ä½ æ‰€è¯´ï¼Œå¯ä»¥æ ¹æ®è¿æ¥ä¿¡æ¯è½»æ¾åŒºåˆ«ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1565576512,"ip_address":"","comment_id":122230,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1565319902","product_id":100032701,"comment_content":"è€å¸ˆï¼Œæˆ‘é—®å‡ ä¸ªåŸºç¡€é—®é¢˜å“ˆ:<br><br>1.å®¢æˆ·ç«¯å‘é€çš„ç³»åˆ—å·ä¸ºjçš„synåŒ…ä¼šä¸ä¼šè¢«å‘é€åˆ°ä¸¤ä¸ªä¸åŒçš„æœåŠ¡å™¨ä¸Šï¼Œæ˜¯ä¸æ˜¯ç›®æ ‡åœ°å€ä¸ä¸€æ ·ï¼Œæ‰€ä»¥å°½ç®¡ç³»åˆ—å·ç›¸åŒï¼Œä¹Ÿä¸ä¼šæœ‰ä»€ä¹ˆå½±å“å“‡ï¼Ÿ<br><br>2. åŒæ ·çš„ æœåŠ¡å™¨ç«¯ æœ‰æ²¡æœ‰å¯èƒ½åŒæ—¶æ”¶åˆ°ä¸¤ä¸ªåºåˆ—å·ç›¸åŒçš„synåŒ…ï¼Ÿ è¿˜æ˜¯è¯´å°½ç®¡synåŒ…çš„åºåˆ—å·éƒ½æ˜¯jï¼Œä½†æ˜¯å®¢æˆ·ç«¯çš„socketåœ°å€ä¸åŒï¼Œæ‰€ä»¥ä¹Ÿæ˜¯æ²¡ä»€ä¹ˆå½±å“ã€‚æ˜¯è¿™æ ·å­å˜›ï¼Ÿ<br><br>3. è€å¸ˆï¼Œå®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡ç«¯å¯¹å®¢æˆ·ç«¯synåŒ…(j)çš„ack(j+1)å“åº”ï¼Œæ ‡å¿—ç€å®¢æˆ·ç«¯å¯¹æœåŠ¡ç«¯å•å‘è¿æ¥çš„establishedï¼Œå®¢æˆ·ç«¯çš„cennocté˜»å¡ç»“æŸã€‚<br><br>4. åŒæ ·çš„ï¼Œ æœåŠ¡ç«¯è¦æ”¶åˆ°å®¢æˆ·ç«¯å¯¹æœåŠ¡ç«¯syn(k)åŒ…çš„ack(k+1)å“åº”ï¼Œæ ‡å¿—ç€æœåŠ¡ç«¯å¯¹å®¢æˆ·ç«¯å•å‘è¿æ¥çš„established,æœåŠ¡ç«¯çš„accepté˜»å¡ç»“æŸã€‚ <br><br>ä¸è®ºæ˜¯å®¢æˆ·ç«¯ï¼Œè¿˜æ˜¯æœåŠ¡ç«¯å¯¹äºé˜»å¡å¼çš„ç½‘ç»œè¿æ¥ï¼Œåªæœ‰æ”¶åˆ°å¯¹æ–¹çš„ackåŒ…ï¼Œå‘é€synçš„é˜»å¡æ–¹æ³•æ‰ç»“æŸå¹¶ä¸”connectionæ‰å¤„äºestablishedã€‚<br><br>","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462162,"discussion_content":"è¿™åªæ˜¯ä¸€ä¸ªä¾‹å­ï¼Œç°å®ç½‘ç»œåè®®å¯èƒ½ä¼šé€‰ç”¨éšæœºåºåˆ—å·æ¥å®Œæˆè¿æ¥å»ºç«‹ã€‚æ‰€ä»¥ï¼Œå†²çªçš„å‡ ç‡æ˜¯å¾ˆå°çš„ã€‚è€Œä¸”ï¼Œæ­£å¦‚ä½ æ‰€è¯´ï¼Œå¯ä»¥æ ¹æ®è¿æ¥ä¿¡æ¯è½»æ¾åŒºåˆ«ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565576512,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122181,"user_name":"å–ä¸€ä¸ªé•¿é•¿é•¿é•¿çš„åå­—","can_delete":false,"product_type":"c1","uid":1387521,"ip_address":"","ucode":"8C39641B6EBCA1","user_header":"https://static001.geekbang.org/account/avatar/00/15/2c/01/636452b4.jpg","comment_is_top":false,"comment_ctime":1565313456,"is_pvip":false,"replies":[{"id":"45138","content":"ä¸æ˜¯ï¼Œéé˜»å¡æ˜¯æ„ŸçŸ¥I&#47;Oäº‹ä»¶çš„æ–¹å¼ä¸åŒï¼Œå¾ˆå¿«å°±ä¼šå±•å¼€è®²ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1565576164,"ip_address":"","comment_id":122181,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1565313456","product_id":100032701,"comment_content":"éé˜»å¡åº”è¯¥æ˜¯æŠŠæ•°æ®æ”¾åœ¨tcpç¼“å†²åŒºåç«‹å³è¿”å›å§ã€‚","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462135,"discussion_content":"ä¸æ˜¯ï¼Œéé˜»å¡æ˜¯æ„ŸçŸ¥I/Oäº‹ä»¶çš„æ–¹å¼ä¸åŒï¼Œå¾ˆå¿«å°±ä¼šå±•å¼€è®²ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565576164,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122174,"user_name":"åˆ˜æ˜","can_delete":false,"product_type":"c1","uid":1109382,"ip_address":"","ucode":"5871C54AAE1A81","user_header":"https://static001.geekbang.org/account/avatar/00/10/ed/86/5855aaa4.jpg","comment_is_top":false,"comment_ctime":1565313079,"is_pvip":false,"replies":[{"id":"45137","content":"èµ‹å€¼çš„è¯è¿˜æ˜¯IPv4æˆ–IPV6åœ°å€ï¼Œåªä¸è¿‡éœ€è¦å¼ºåˆ¶è½¬åŒ–ä¸ºé€šç”¨åœ°å€æ ¼å¼ã€‚<br><br>SCTPç”¨å¾—æ¯”è¾ƒå°‘ï¼Œæ‰€ä»¥æ²¡å±•å¼€è¯´ã€‚æ„Ÿè°¢æŒ‡å‡ºé”™è¯¯ï¼Œå·²ç»ä¿®æ­£ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1565576110,"ip_address":"","comment_id":122174,"utype":1}],"discussion_count":6,"race_medal":0,"score":"1565313079","product_id":100032701,"comment_content":"2ä¸ªç–‘é—®ï¼š<br>1)acceptæ—¶ç¬¬ä¸‰ä¸ªå‚æ•°åœ°å€é•¿åº¦ï¼Œåº”è¯¥æ˜¯ä¸€ä¸ªä¼ å…¥-ä¼ å‡ºå‚æ•°(å€¼-ç»“æœå‚æ•°)ï¼Œè€ƒè™‘åˆ°IPv4ä¸IPv6åœ°å€é•¿åº¦ä¸åŒï¼Œä¸”é€šç”¨åœ°å€é•¿åº¦ä¹Ÿå­˜ä¸ä¸‹IPv6åœ°å€ã€‚ä¼ å…¥æ—¶åº”è¯¥ä¸ºå®ƒèµ‹ä»€ä¹ˆå€¼å‘¢ï¼Ÿ<br>2)ä¹¦ä¸Šè¯´å»ºç«‹TCPè¿æ¥æœ‰ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼ŒåŒæ–¹åŒæ—¶ä¸»åŠ¨å‘å¯¹æ–¹å‘é€SYNå»ºç«‹è¿æ¥ï¼Œè¯·é—®è¿™ç§åœºæ™¯å¯ä»¥ç”¨æœ¬æ–‡è¿™ç§æ–¹å¼æ¥æ¨¡æ‹Ÿå®ç°å—ï¼Ÿ<br><br>2é“æ€è€ƒé¢˜ï¼š<br>1)éé˜»å¡çš„ä¸€ç§åœºæ™¯ä¸¾ä¾‹ï¼šå®¢æˆ·ç«¯å‘æœåŠ¡å™¨å»ºç«‹è¿æ¥è¿‡ç¨‹ä¸­ï¼Œå®¢æˆ·ç«¯æƒ³è¦ç«‹å³å…³é—­ï¼Œå°±è¦ä½¿ç”¨éé˜»å¡çš„connectã€‚å¦‚æœä½¿ç”¨é˜»å¡æ–¹å¼ï¼Œåªèƒ½ç­‰å¾…connectè¿”å›ä¹‹å(æˆåŠŸæˆ–å¤±è´¥)æ‰èƒ½å…³é—­ï¼Œç­‰å¾…è¿”å›åœ¨ä¸€äº›åœºæ™¯ä¸‹ä¼šéœ€è¦è¾ƒé•¿çš„æ—¶é—´ã€‚<br>2)å®¢æˆ·ç«¯ä¹Ÿå¯ä»¥bindï¼Œè¯´æ˜åªèƒ½ä½¿ç”¨ç‰¹å®šçš„IP(è‹¥æŒ‡å®šäº†éé€šé…IP)ã€ç‰¹å®šçš„ç«¯å£(è‹¥æŒ‡å®šäº†é0ç«¯å£)ä¸æœåŠ¡å™¨é€šä¿¡ã€‚<br><br>3ä¸ªå°é”™è¯¯ï¼š<br>1)socketçš„ç¬¬ä¸‰ä¸ªå‚æ•°protocolè¿˜æ˜¯æœ‰ç”¨çš„ï¼Œæ¯”å¦‚åˆ›å»ºSCTPåè®®å¥—æ¥å­—æ—¶ï¼Œå‰ä¸¤ä¸ªå‚æ•°ä¸TCPéƒ½ä¸€æ ·ï¼Œä½¿ç”¨ç¬¬ä¸‰ä¸ªå‚æ•°æ¥åŒºåˆ†ã€‚<br>2)ç¬¬äºŒæ®µç»“å°¾â€œå®¢æˆ·ç«¯ã€æœåŠ¡å™¨æ¨¡å‹æ¨¡å‹â€ï¼Œâ€œæ¨¡å‹â€é‡å¤äº†ã€‚<br>3)make_socketé‚£æ®µä»£ç ï¼Œå°‘äº†ä¸€ä¸ªå‡½æ•°ç»“å°¾çš„å¤§æ‹¬å·}ã€‚","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462132,"discussion_content":"èµ‹å€¼çš„è¯è¿˜æ˜¯IPv4æˆ–IPV6åœ°å€ï¼Œåªä¸è¿‡éœ€è¦å¼ºåˆ¶è½¬åŒ–ä¸ºé€šç”¨åœ°å€æ ¼å¼ã€‚\n\nSCTPç”¨å¾—æ¯”è¾ƒå°‘ï¼Œæ‰€ä»¥æ²¡å±•å¼€è¯´ã€‚æ„Ÿè°¢æŒ‡å‡ºé”™è¯¯ï¼Œå·²ç»ä¿®æ­£ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565576110,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1043484,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/ec/1c/d323b066.jpg","nickname":"knull","note":"","ucode":"3BFECF3D29F40C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4322,"discussion_content":"ipv4åœ°å€åº”è¯¥ä¸èƒ½æ¥å—ipv6çš„å®¢æˆ·ç«¯\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565314633,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1043484,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/ec/1c/d323b066.jpg","nickname":"knull","note":"","ucode":"3BFECF3D29F40C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4321,"discussion_content":"æ‰€ä»¥ï¼Œipv6æœåŠ¡å™¨ï¼Œacceptçš„éƒ½æ˜¯ipv6åœ°å€ï¼ˆå³ä½¿å®¢æˆ·ç«¯æ˜¯ipv4ï¼Œä¹Ÿä¼šè½¬ä¸ºipv6ï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565314605,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1109382,"avatar":"https://static001.geekbang.org/account/avatar/00/10/ed/86/5855aaa4.jpg","nickname":"åˆ˜æ˜","note":"","ucode":"5871C54AAE1A81","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1043484,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/ec/1c/d323b066.jpg","nickname":"knull","note":"","ucode":"3BFECF3D29F40C","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4325,"discussion_content":"æ‰€ä»¥ï¼Œä¼ å…¥çš„é•¿åº¦æ˜¯sizeof(struct sockaddr_in6)ï¼Œæ˜¯è¿™æ ·å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565315678,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":4321,"ip_address":""},"score":4325,"extra":""},{"author":{"id":1043484,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/ec/1c/d323b066.jpg","nickname":"knull","note":"","ucode":"3BFECF3D29F40C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1109382,"avatar":"https://static001.geekbang.org/account/avatar/00/10/ed/86/5855aaa4.jpg","nickname":"åˆ˜æ˜","note":"","ucode":"5871C54AAE1A81","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4365,"discussion_content":"æ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565338471,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":4325,"ip_address":""},"score":4365,"extra":""}]},{"author":{"id":1043484,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/ec/1c/d323b066.jpg","nickname":"knull","note":"","ucode":"3BFECF3D29F40C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4320,"discussion_content":"ç–‘é—®1ï¼šä¸€èˆ¬æœ‰ä¸“é—¨çš„ipv4ï¼Œipv6æœåŠ¡å™¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565314545,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122116,"user_name":"HDZ","can_delete":false,"product_type":"c1","uid":1239063,"ip_address":"","ucode":"5E0E5ECDF86F61","user_header":"https://static001.geekbang.org/account/avatar/00/12/e8/17/6c9a12c6.jpg","comment_is_top":false,"comment_ctime":1565307083,"is_pvip":false,"replies":[{"id":"45133","content":"socketfd == socket file description","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1565575688,"ip_address":"","comment_id":122116,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1565307083","product_id":100032701,"comment_content":"int listen (int socketfd, int backlog)<br>è¿™é‡Œæ˜¯socketfdè¿˜æ˜¯socketdf","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462106,"discussion_content":"socketfd == socket file description","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565575688,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1146178,"avatar":"https://static001.geekbang.org/account/avatar/00/11/7d/42/c324a7de.jpg","nickname":"å±±é·¹Â·China","note":"","ucode":"1A13AAC813C1C8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4376,"discussion_content":"scoketåˆ›å»ºçš„fd","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565340938,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122114,"user_name":"Codingå°å…ˆ","can_delete":false,"product_type":"c1","uid":1051563,"ip_address":"","ucode":"965B1CC757E026","user_header":"https://static001.geekbang.org/account/avatar/00/10/0b/ab/0e2857e5.jpg","comment_is_top":false,"comment_ctime":1565306873,"is_pvip":false,"replies":[{"id":"45132","content":"éé˜»å¡æ˜¯ä¸€ç§I&#47;Oæ¨¡å‹ï¼Œå’Œåè®®(TCPæˆ–UDP)å…³ç³»ä¸å¤§ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1565575663,"ip_address":"","comment_id":122114,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1565306873","product_id":100032701,"comment_content":"éé˜»å¡æ˜¯åœ¨UDPä½¿ç”¨å—ï¼Ÿ<br><br>å®¢æˆ·ç«¯åœ¨connectè¦bind listenï¼Œç»‘å®šè‡ªå·±çš„åœ°å€ä¸ç«¯å£ï¼Œåœ¨connectçš„æ—¶å€™å‘Šè¯‰æœåŠ¡ç«¯ã€‚","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462105,"discussion_content":"éé˜»å¡æ˜¯ä¸€ç§I/Oæ¨¡å‹ï¼Œå’Œåè®®(TCPæˆ–UDP)å…³ç³»ä¸å¤§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565575663,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}