{"id":218093,"title":"20 | åŸºäºRaftçš„åˆ†å¸ƒå¼KVç³»ç»Ÿå¼€å‘å®æˆ˜ï¼ˆäºŒï¼‰ï¼šå¦‚ä½•å®ç°ä»£ç ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯éŸ©å¥ã€‚</p><p>å­¦å®Œ<a href=\"https://time.geekbang.org/column/article/217049\">ä¸Šä¸€è®²</a>åï¼Œç›¸ä¿¡ä½ å·²ç»äº†è§£äº†åˆ†å¸ƒå¼KVç³»ç»Ÿçš„æ¶æ„è®¾è®¡ï¼ŒåŒæ—¶åº”è¯¥ä¹Ÿå¾ˆå¥½å¥‡ï¼Œæ¶æ„èƒŒåçš„ç»†èŠ‚ä»£ç æ˜¯æ€ä¹ˆå®ç°çš„å‘¢ï¼Ÿ</p><p>åˆ«ç€æ€¥ï¼Œä»Šå¤©è¿™èŠ‚è¯¾ï¼Œæˆ‘ä¼šå¸¦ä½ å¼„æ˜ç™½è¿™ä¸ªé—®é¢˜ã€‚æˆ‘ä¼šå…·ä½“è®²è§£<a href=\"https://github.com/hanj4096/raftdb\">åˆ†å¸ƒå¼KVç³»ç»Ÿ</a>æ ¸å¿ƒåŠŸèƒ½ç‚¹çš„å®ç°ç»†èŠ‚ã€‚æ¯”å¦‚ï¼Œå¦‚ä½•å®ç°è¯»æ“ä½œå¯¹åº”çš„3ç§ä¸€è‡´æ€§æ¨¡å‹ã€‚è€Œæˆ‘å¸Œæœ›ä½ èƒ½åœ¨è¯¾ä¸‹åå¤è¿è¡Œç¨‹åºï¼Œå¤šé˜…è¯»æºç ï¼ŒæŒæ¡æ‰€æœ‰çš„ç»†èŠ‚å®ç°ã€‚</p><p>è¯ä¸å¤šè¯´ï¼Œæˆ‘ä»¬å¼€å§‹ä»Šå¤©çš„å­¦ä¹ ã€‚</p><p>åœ¨ä¸Šä¸€è®²ä¸­ï¼Œå’±ä»¬å°†ç³»ç»Ÿåˆ’åˆ†ä¸ºä¸‰å¤§åŠŸèƒ½å—ï¼ˆæ¥å…¥åè®®ã€KVæ“ä½œã€åˆ†å¸ƒå¼é›†ç¾¤ï¼‰ï¼Œé‚£ä¹ˆä»Šå¤©æˆ‘ä¼šæŒ‰é¡ºåºå…·ä½“è¯´ä¸€è¯´æ¯å—åŠŸèƒ½çš„å®ç°ï¼Œå¸®åŠ©ä½ æŒæ¡æ¶æ„èƒŒåçš„ç»†èŠ‚ä»£ç ã€‚é¦–å…ˆï¼Œå…ˆæ¥äº†è§£ä¸€ä¸‹ï¼Œå¦‚ä½•å®ç°æ¥å…¥åè®®ã€‚</p><h2>å¦‚ä½•å®ç°æ¥å…¥åè®®ï¼Ÿ</h2><p>åœ¨19è®²æåˆ°ï¼Œæˆ‘ä»¬é€‰æ‹©äº†HTTPåè®®ä½œä¸ºé€šè®¯åè®®ï¼Œå¹¶è®¾è®¡äº†\"/key\"å’Œ\"/join\"2ä¸ªHTTP RESTful APIï¼Œåˆ†åˆ«ç”¨äºæ”¯æŒKVæ“ä½œå’Œå¢åŠ èŠ‚ç‚¹çš„æ“ä½œï¼Œé‚£ä¹ˆï¼Œå®ƒä»¬æ˜¯å¦‚ä½•å®ç°çš„å‘¢ï¼Ÿ</p><p>æ¥å…¥åè®®çš„æ ¸å¿ƒå®ç°ï¼Œå°±æ˜¯ä¸‹é¢çš„æ ·å­ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/b7/56/b72754232480fadd7d8eeb9bfdd15e56.jpg?wh=1142*369\" alt=\"\" title=\"å›¾1\"></p><p>æˆ‘å¸¦ä½ èµ°ä¸€éè¿™ä¸‰ä¸ªæ­¥éª¤ï¼Œä¾¿äºä½ åŠ æ·±å°è±¡ã€‚</p><ol>\n<li>åœ¨ServeHTTP()ä¸­ï¼Œä¼šæ ¹æ®URLè·¯å¾„è®¾ç½®ç›¸å…³çš„è·¯ç”±ä¿¡æ¯ã€‚æ¯”å¦‚ï¼Œä¼šåœ¨handlerKeyRequest()ä¸­å¤„ç†URLè·¯å¾„å‰ç¼€ä¸º\"/key\"çš„è¯·æ±‚ï¼Œä¼šåœ¨handleJoin()ä¸­å¤„ç†URLè·¯å¾„ä¸º\"/join\"çš„è¯·æ±‚ã€‚</li>\n<li>åœ¨handleKeyRequest()ä¸­ï¼Œå¤„ç†æ¥è‡ªå®¢æˆ·ç«¯çš„KVæ“ä½œè¯·æ±‚ï¼Œä¹Ÿå°±æ˜¯åŸºäºHTTP POSTè¯·æ±‚çš„èµ‹å€¼æ“ä½œã€åŸºäºHTTP GETè¯·æ±‚çš„æŸ¥è¯¢æ“ä½œã€åŸºäºHTTP DELETEè¯·æ±‚çš„åˆ é™¤æ“ä½œã€‚</li>\n<li>åœ¨handleJoin()ä¸­ï¼Œå¤„ç†å¢åŠ èŠ‚ç‚¹çš„è¯·æ±‚ï¼Œæœ€ç»ˆè°ƒç”¨raft.AddVoter()å‡½æ•°ï¼Œå°†æ–°èŠ‚ç‚¹åŠ å…¥åˆ°é›†ç¾¤ä¸­ã€‚</li>\n</ol><!-- [[[read_end]]] --><p>åœ¨è¿™é‡Œï¼Œéœ€è¦ä½ æ³¨æ„çš„æ˜¯ï¼Œåœ¨æ ¹æ®URLè®¾ç½®ç›¸å…³è·¯ç”±ä¿¡æ¯æ—¶ï¼Œä½ éœ€è¦è€ƒè™‘æ˜¯è·¯å¾„å‰ç¼€åŒ¹é…ï¼ˆæ¯”å¦‚strings.HasPrefix(r.URL.Path, â€œ/keyâ€)ï¼‰ï¼Œè¿˜æ˜¯å®Œæ•´åŒ¹é…ï¼ˆæ¯”å¦‚r.URL.Path == â€œ/joinâ€ï¼‰ï¼Œé¿å…åœ¨å®é™…è¿è¡Œæ—¶ï¼Œè·¯å¾„åŒ¹é…å‡ºé”™ã€‚æ¯”å¦‚ï¼Œå¦‚æœå¯¹\"/key\"åšå®Œæ•´åŒ¹é…ï¼ˆæ¯”å¦‚r.URL.Path == â€œ/keyâ€ï¼‰ï¼Œé‚£ä¹ˆä¸‹é¢çš„æŸ¥è¯¢æ“ä½œä¼šå› ä¸ºè·¯å¾„åŒ¹é…å‡ºé”™ï¼Œæ— æ³•æ‰¾åˆ°è·¯ç”±ä¿¡æ¯ï¼Œè€Œæ‰§è¡Œå¤±è´¥ã€‚</p><pre><code>curl -XGET raft-cluster-host01:8091/key/foo\n</code></pre><p>å¦å¤–ï¼Œè¿˜éœ€è¦ä½ æ³¨æ„çš„æ˜¯ï¼Œåªæœ‰é¢†å¯¼è€…èŠ‚ç‚¹æ‰èƒ½æ‰§è¡Œraft.AddVoter()å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒhandleJoin()å‡½æ•°ï¼Œåªèƒ½åœ¨é¢†å¯¼è€…èŠ‚ç‚¹ä¸Šæ‰§è¡Œã€‚</p><p>è¯´å®Œæ¥å…¥åè®®åï¼Œæ¥ä¸‹æ¥å’±ä»¬æ¥åˆ†æä¸€ä¸‹ç¬¬äºŒå—åŠŸèƒ½çš„å®ç°ï¼Œä¹Ÿå°±æ˜¯ï¼Œå¦‚ä½•å®ç°KVæ“ä½œã€‚</p><h2>å¦‚ä½•å®ç°KVæ“ä½œï¼Ÿ</h2><p>ä¸Šä¸€èŠ‚è¯¾ï¼Œæˆ‘æåˆ°è¿™ä¸ªåˆ†å¸ƒå¼KVç³»ç»Ÿä¼šå®ç°èµ‹å€¼ã€æŸ¥è¯¢ã€åˆ é™¤3ç±»æ“ä½œï¼Œé‚£å…·ä½“æ€ä¹ˆå®ç°å‘¢ï¼Ÿä½ åº”è¯¥çŸ¥é“ï¼Œèµ‹å€¼æ“ä½œæ˜¯åŸºäºHTTP POSTè¯·æ±‚æ¥å®ç°çš„ï¼Œå°±åƒä¸‹é¢çš„æ ·å­ã€‚</p><pre><code>curl -XPOST http://raft-cluster-host01:8091/key -d '{&quot;foo&quot;: &quot;bar&quot;}'\n</code></pre><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬æ˜¯é€šè¿‡HTTP POSTè¯·æ±‚ï¼Œå®ç°äº†èµ‹å€¼æ“ä½œã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/ad/91/ad3f4c3955f721fe60d7f041ea9aae91.jpg?wh=1142*970\" alt=\"\" title=\"å›¾2\"></p><p>åŒæ ·çš„ï¼Œæˆ‘ä»¬èµ°ä¸€éè¿™ä¸ªè¿‡ç¨‹ï¼ŒåŠ æ·±ä¸€ä¸‹å°è±¡ã€‚</p><ol>\n<li>å½“æ¥æ”¶åˆ°KVæ“ä½œçš„è¯·æ±‚æ—¶ï¼Œç³»ç»Ÿå°†è°ƒç”¨handleKeyRequest()è¿›è¡Œå¤„ç†ã€‚</li>\n<li>åœ¨handleKeyRequest()å‡½æ•°ä¸­ï¼Œæ£€æµ‹åˆ°HTTPè¯·æ±‚ç±»å‹ä¸ºPOSTè¯·æ±‚æ—¶ï¼Œç¡®è®¤äº†è¿™æ˜¯ä¸€ä¸ªèµ‹å€¼æ“ä½œï¼Œå°†æ‰§è¡Œstore.Set()å‡½æ•°ã€‚</li>\n<li>åœ¨Set()å‡½æ•°ä¸­ï¼Œå°†åˆ›å»ºæŒ‡ä»¤ï¼Œå¹¶é€šè¿‡raft.Apply()å‡½æ•°å°†æŒ‡ä»¤æäº¤ç»™Raftã€‚æœ€ç»ˆæŒ‡ä»¤å°†è¢«åº”ç”¨åˆ°çŠ¶æ€æœºã€‚</li>\n<li>å½“Raftå°†æŒ‡ä»¤åº”ç”¨åˆ°çŠ¶æ€æœºåï¼Œæœ€ç»ˆå°†æ‰§è¡ŒapplySet()å‡½æ•°ï¼Œåˆ›å»ºç›¸åº”çš„keyå’Œå€¼åˆ°å†…å­˜ä¸­ã€‚</li>\n</ol><p>åœ¨è¿™é‡Œï¼Œæˆ‘æƒ³è¡¥å……ä¸€ä¸‹ï¼ŒFSMç»“æ„å¤ç”¨äº†Storeç»“æ„ä½“ï¼Œå¹¶å®ç°äº†fsm.Apply()ã€fsm.Snapshot()ã€fsm.Restore()3ä¸ªå‡½æ•°ã€‚æœ€ç»ˆåº”ç”¨åˆ°çŠ¶æ€æœºçš„æ•°æ®ï¼Œä»¥map[string]stringçš„å½¢å¼ï¼Œå­˜æ”¾åœ¨Store.mä¸­ã€‚</p><p>é‚£æŸ¥è¯¢æ“ä½œæ˜¯æ€ä¹ˆå®ç°çš„å‘¢ï¼Ÿå®ƒæ˜¯åŸºäºHTTP GETè¯·æ±‚æ¥å®ç°çš„ã€‚</p><pre><code>curl -XGET http://raft-cluster-host01:8091/key/foo\n</code></pre><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬æ˜¯é€šè¿‡HTTP GETè¯·æ±‚å®ç°äº†æŸ¥è¯¢æ“ä½œã€‚åœ¨è¿™é‡Œæˆ‘æƒ³å¼ºè°ƒä¸€ä¸‹ï¼Œç›¸æ¯”éœ€è¦å°†æŒ‡ä»¤åº”ç”¨åˆ°çŠ¶æ€æœºçš„èµ‹å€¼æ“ä½œï¼ŒæŸ¥è¯¢æ“ä½œè¦ç®€å•å¤šäº†ï¼Œå› ä¸ºç³»ç»Ÿåªéœ€è¦æŸ¥è¯¢å†…å­˜ä¸­çš„æ•°æ®å°±å¯ä»¥äº†ï¼Œä¸æ¶‰åŠçŠ¶æ€æœºã€‚å…·ä½“çš„ä»£ç æµç¨‹å¦‚å›¾æ‰€ç¤ºã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/c7/b4/c70b009d5abd3b3f63c0d1d419ede9b4.jpg?wh=1142*721\" alt=\"\" title=\"å›¾3\"></p><p>æˆ‘ä»¬èµ°ä¸€éè¿™ä¸ªè¿‡ç¨‹ï¼ŒåŠ æ·±ä¸€ä¸‹å°è±¡ã€‚</p><ol>\n<li>å½“æ¥æ”¶åˆ°KVæ“ä½œçš„è¯·æ±‚æ—¶ï¼Œç³»ç»Ÿå°†è°ƒç”¨handleKeyRequest()è¿›è¡Œå¤„ç†ã€‚</li>\n<li>åœ¨handleKeyRequest()å‡½æ•°ä¸­ï¼Œæ£€æµ‹åˆ°HTTPè¯·æ±‚ç±»å‹ä¸ºGETè¯·æ±‚æ—¶ï¼Œç¡®è®¤äº†è¿™æ˜¯ä¸€ä¸ªèµ‹å€¼æ“ä½œï¼Œå°†æ‰§è¡Œstore.Get()å‡½æ•°ã€‚</li>\n<li>Get()å‡½æ•°åœ¨å†…å­˜ä¸­æŸ¥è¯¢æŒ‡å®škeyå¯¹åº”çš„å€¼ã€‚</li>\n</ol><p>è€Œæœ€åä¸€ä¸ªåˆ é™¤æ“ä½œï¼Œæ˜¯åŸºäºHTTP DELETEè¯·æ±‚æ¥å®ç°çš„ã€‚</p><pre><code>curl -XDELETE http://raft-cluster-host01:8091/key/foo\n</code></pre><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬æ˜¯é€šè¿‡HTTP DELETEè¯·æ±‚ï¼Œå®ç°äº†åˆ é™¤æ“ä½œã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/90/4e/90f99bc9c4aebb50c39f05412fa4594e.jpg?wh=1142*940\" alt=\"\" title=\"å›¾4\"></p><p>åŒæ ·çš„ï¼Œæˆ‘ä»¬èµ°ä¸€éè¿™ä¸ªè¿‡ç¨‹ã€‚</p><ol>\n<li>å½“æ¥æ”¶åˆ°KVæ“ä½œçš„è¯·æ±‚æ—¶ï¼Œç³»ç»Ÿå°†è°ƒç”¨handleKeyRequest()è¿›è¡Œå¤„ç†ã€‚</li>\n<li>åœ¨handleKeyRequest()å‡½æ•°ä¸­ï¼Œæ£€æµ‹åˆ°HTTPè¯·æ±‚ç±»å‹ä¸ºDELETEè¯·æ±‚æ—¶ï¼Œç¡®è®¤äº†è¿™æ˜¯ä¸€ä¸ªåˆ é™¤æ“ä½œï¼Œå°†æ‰§è¡Œstore.Delete()å‡½æ•°ã€‚</li>\n<li>åœ¨Delete()å‡½æ•°ä¸­ï¼Œå°†åˆ›å»ºæŒ‡ä»¤ï¼Œå¹¶é€šè¿‡raft.Apply()å‡½æ•°ï¼Œå°†æŒ‡ä»¤æäº¤ç»™Raftã€‚æœ€ç»ˆæŒ‡ä»¤å°†è¢«åº”ç”¨åˆ°çŠ¶æ€æœºã€‚</li>\n<li>å½“å‰Raftå°†æŒ‡ä»¤åº”ç”¨åˆ°çŠ¶æ€æœºåï¼Œæœ€ç»ˆæ‰§è¡ŒapplyDelete()å‡½æ•°ï¼Œåˆ é™¤keyå’Œå€¼ã€‚</li>\n</ol><p>å­¦ä¹ è¿™éƒ¨åˆ†å†…å®¹çš„æ—¶å€™ï¼Œæœ‰ä¸€äº›åŒå­¦å¯èƒ½ä¼šé‡åˆ°ï¼Œä¸çŸ¥é“å¦‚ä½•åˆ¤æ–­æŒ‡å®šçš„æ“ä½œæ˜¯å¦éœ€è¦åœ¨é¢†å¯¼è€…èŠ‚ç‚¹ä¸Šæ‰§è¡Œçš„é—®é¢˜ï¼Œæˆ‘ç»™çš„å»ºè®®æ˜¯è¿™æ ·çš„ã€‚</p><ul>\n<li>éœ€è¦å‘RaftçŠ¶æ€æœºä¸­æäº¤æŒ‡ä»¤çš„æ“ä½œï¼Œæ˜¯å¿…é¡»è¦åœ¨é¢†å¯¼è€…èŠ‚ç‚¹ä¸Šæ‰§è¡Œçš„ï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„å†™è¯·æ±‚ï¼Œæ¯”å¦‚èµ‹å€¼æ“ä½œå’Œåˆ é™¤æ“ä½œã€‚</li>\n<li>éœ€è¦è¯»å–æœ€æ–°æ•°æ®çš„æŸ¥è¯¢æ“ä½œï¼ˆæ¯”å¦‚å®¢æˆ·ç«¯è®¾ç½®æŸ¥è¯¢æ“ä½œçš„è¯»ä¸€è‡´æ€§çº§åˆ«ä¸ºconsistentï¼‰ï¼Œæ˜¯å¿…é¡»åœ¨é¢†å¯¼è€…èŠ‚ç‚¹ä¸Šæ‰§è¡Œçš„ã€‚</li>\n</ul><p>è¯´å®Œäº†å¦‚ä½•å®ç°KVæ“ä½œåï¼Œæ¥çœ‹ä¸€ä¸‹æœ€åä¸€å—åŠŸèƒ½ï¼Œå¦‚ä½•å®ç°åˆ†å¸ƒå¼é›†ç¾¤ã€‚</p><h2>å¦‚ä½•å®ç°åˆ†å¸ƒå¼é›†ç¾¤ï¼Ÿ</h2><h3>åˆ›å»ºé›†ç¾¤</h3><p>å®ç°ä¸€ä¸ªRafté›†ç¾¤ï¼Œé¦–å…ˆæˆ‘ä»¬è¦åšçš„å°±æ˜¯åˆ›å»ºé›†ç¾¤ï¼Œåˆ›å»ºRafté›†ç¾¤ï¼Œä¸»è¦åˆ†ä¸ºä¸¤æ­¥ã€‚é¦–å…ˆï¼Œç¬¬ä¸€ä¸ªèŠ‚ç‚¹é€šè¿‡Bootstrapçš„æ–¹å¼å¯åŠ¨ï¼Œå¹¶ä½œä¸ºé¢†å¯¼è€…èŠ‚ç‚¹ã€‚å¯åŠ¨å‘½ä»¤å°±åƒä¸‹é¢çš„æ ·å­ã€‚</p><pre><code>$GOPATH/bin/raftdb -id node01  -haddr raft-cluster-host01:8091 -raddr raft-cluster-host01:8089 ~/.raftdb\n</code></pre><p>è¿™æ—¶å°†åœ¨Store.Open()å‡½æ•°ä¸­ï¼Œè°ƒç”¨BootstrapCluster()å‡½æ•°å°†èŠ‚ç‚¹å¯åŠ¨èµ·æ¥ã€‚</p><p>æ¥ç€ï¼Œå…¶ä»–èŠ‚ç‚¹ä¼šé€šè¿‡-joinå‚æ•°æŒ‡å®šé¢†å¯¼è€…èŠ‚ç‚¹çš„åœ°å€ä¿¡æ¯ï¼Œå¹¶å‘é¢†å¯¼è€…èŠ‚ç‚¹å‘é€ï¼ŒåŒ…å«å½“å‰èŠ‚ç‚¹é…ç½®ä¿¡æ¯çš„å¢åŠ èŠ‚ç‚¹è¯·æ±‚ã€‚å¯åŠ¨å‘½ä»¤å°±åƒä¸‹é¢çš„æ ·å­ã€‚</p><pre><code>$GOPATH/bin/raftdb -id node02 -haddr raft-cluster-host02:8091 -raddr raft-cluster-host02:8089 -join raft-cluster-host01:8091 ~/.raftdb\n</code></pre><p>å½“é¢†å¯¼è€…èŠ‚ç‚¹æ¥æ”¶åˆ°æ¥è‡ªå…¶ä»–èŠ‚ç‚¹çš„å¢åŠ èŠ‚ç‚¹è¯·æ±‚åï¼Œå°†è°ƒç”¨handleJoin()å‡½æ•°è¿›è¡Œå¤„ç†ï¼Œå¹¶æœ€ç»ˆè°ƒç”¨raft.AddVoter()å‡½æ•°ï¼Œå°†æ–°èŠ‚ç‚¹åŠ å…¥åˆ°é›†ç¾¤ä¸­ã€‚</p><p>åœ¨è¿™é‡Œï¼Œéœ€è¦ä½ æ³¨æ„çš„æ˜¯ï¼Œåªæœ‰åœ¨å‘é›†ç¾¤ä¸­æ·»åŠ æ–°èŠ‚ç‚¹æ—¶ï¼Œæ‰éœ€è¦ä½¿ç”¨-joinå‚æ•°ã€‚å½“èŠ‚ç‚¹åŠ å…¥é›†ç¾¤åï¼Œå°±å¯ä»¥åƒä¸‹é¢è¿™æ ·ï¼Œæ­£å¸¸å¯åŠ¨è¿›ç¨‹å°±å¯ä»¥äº†ã€‚</p><pre><code>$GOPATH/bin/raftdb -id node02 -haddr raft-cluster-host02:8091 -raddr raft-cluster-host02:8089  ~/.raftdb\n</code></pre><p>é›†ç¾¤è¿è¡Œèµ·æ¥åï¼Œå› ä¸ºé¢†å¯¼è€…æ˜¯å¯èƒ½ä¼šå˜çš„ï¼Œé‚£ä¹ˆå¦‚ä½•å®ç°å†™æ“ä½œï¼Œæ¥ä¿è¯å†™è¯·æ±‚éƒ½åœ¨é¢†å¯¼è€…èŠ‚ç‚¹ä¸Šæ‰§è¡Œå‘¢ï¼Ÿ</p><h3>å†™æ“ä½œ</h3><p>åœ¨19è®²ä¸­ï¼Œæˆ‘ä»¬é€‰æ‹©äº†æ–¹æ³•2æ¥å®ç°å†™æ“ä½œã€‚ä¹Ÿå°±æ˜¯ï¼Œå½“è·Ÿéšè€…æ¥æ”¶åˆ°å†™è¯·æ±‚åï¼Œå°†æ‹’ç»å¤„ç†è¯¥è¯·æ±‚ï¼Œå¹¶å°†é¢†å¯¼è€…çš„åœ°å€ä¿¡æ¯è½¬å‘ç»™å®¢æˆ·ç«¯ã€‚åç»­å®¢æˆ·ç«¯å°±å¯ä»¥ç›´æ¥è®¿é—®é¢†å¯¼è€…ï¼ˆä¸ºäº†æ¼”ç¤ºæ–¹ä¾¿ï¼Œæˆ‘ä»¬ä»¥èµ‹å€¼æ“ä½œä¸ºä¾‹ï¼‰ã€‚<br>\n<img src=\"https://static001.geekbang.org/resource/image/0a/58/0a79be9a402addd226c0df170268a658.jpg?wh=1142*429\" alt=\"\" title=\"å›¾5\"></p><p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å…·ä½“çš„å†…å®¹ã€‚</p><ol>\n<li>è°ƒç”¨Set()å‡½æ•°æ‰§è¡Œèµ‹å€¼æ“ä½œã€‚</li>\n<li>å¦‚æœæ‰§è¡ŒSet()å‡½æ•°æˆåŠŸï¼Œå°†æ‰§è¡Œæ­¥éª¤3ï¼›å¦‚æœæ‰§è¡ŒSet()å‡½æ•°å‡ºé”™ï¼Œä¸”æç¤ºå‡ºé”™çš„åŸå› æ˜¯å½“å‰èŠ‚ç‚¹ä¸æ˜¯é¢†å¯¼è€…ï¼Œé‚£è¿™å°±è¯´æ˜äº†å½“å‰èŠ‚ç‚¹ä¸æ˜¯é¢†å¯¼è€…ï¼Œä¸èƒ½æ‰§è¡Œå†™æ“ä½œï¼Œå°†æ‰§è¡Œæ­¥éª¤4ï¼›å¦‚æœæ‰§è¡ŒSet()å‡½æ•°å‡ºé”™ï¼Œä¸”æç¤ºå‡ºé”™çš„åŸå› ä¸æ˜¯å› ä¸ºå½“å‰èŠ‚ç‚¹ä¸æ˜¯é¢†å¯¼è€…ï¼Œå°†æ‰§è¡Œæ­¥éª¤5ã€‚</li>\n<li>èµ‹å€¼æ“ä½œæ‰§è¡ŒæˆåŠŸï¼Œæ­£å¸¸è¿”å›ã€‚</li>\n<li>èŠ‚ç‚¹å°†æ„é€ åŒ…å«é¢†å¯¼è€…åœ°å€ä¿¡æ¯çš„é‡å®šå‘å“åº”ï¼Œå¹¶è¿”å›ç»™å®¢æˆ·ç«¯ã€‚ç„¶åå®¢æˆ·ç«¯ç›´æ¥è®¿é—®é¢†å¯¼è€…èŠ‚ç‚¹æ‰§è¡Œèµ‹å€¼æ“ä½œã€‚</li>\n<li>ç³»ç»Ÿè¿è¡Œå‡ºé”™ï¼Œè¿”å›é”™è¯¯ä¿¡æ¯ç»™å®¢æˆ·ç«¯ã€‚</li>\n</ol><p>éœ€è¦ä½ æ³¨æ„çš„æ˜¯ï¼Œèµ‹å€¼æ“ä½œå’Œåˆ é™¤æ“ä½œå±äºå†™æ“ä½œï¼Œå¿…é¡»åœ¨é¢†å¯¼è€…èŠ‚ç‚¹ä¸Šæ‰§è¡Œã€‚è€ŒæŸ¥è¯¢æ“ä½œï¼Œåªæ˜¯æŸ¥è¯¢å†…å­˜ä¸­çš„æ•°æ®ï¼Œä¸æ¶‰åŠæŒ‡ä»¤æäº¤ï¼Œå¯ä»¥åœ¨ä»»ä½•èŠ‚ç‚¹ä¸Šæ‰§è¡Œã€‚</p><p>è€Œä¸ºäº†æ›´å¥½çš„åˆ©ç”¨curlå®¢æˆ·ç«¯çš„HTTPé‡å®šå‘åŠŸèƒ½ï¼Œæˆ‘å®ç°äº†HTTP 307é‡å®šå‘ï¼Œè¿™æ ·ï¼Œä½ åœ¨æ‰§è¡Œèµ‹å€¼æ“ä½œæ—¶ï¼Œå°±ä¸éœ€è¦å…³å¿ƒè®¿é—®èŠ‚ç‚¹æ˜¯å¦æ˜¯é¢†å¯¼è€…èŠ‚ç‚¹äº†ã€‚æ¯”å¦‚ï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ï¼Œè®¿é—®èŠ‚ç‚¹2ï¼ˆä¹Ÿå°±æ˜¯raft-cluster-host02ï¼Œ192.168.0.20ï¼‰æ‰§è¡Œèµ‹å€¼æ“ä½œã€‚</p><pre><code>curl -XPOST raft-cluster-host02:8091/key -d '{&quot;foo&quot;: &quot;bar&quot;}' -L\n</code></pre><p>å¦‚æœå½“å‰èŠ‚ç‚¹ï¼ˆä¹Ÿå°±æ˜¯èŠ‚ç‚¹2ï¼‰ä¸æ˜¯é¢†å¯¼è€…ï¼Œå®ƒå°†è¿”å›åŒ…å«é¢†å¯¼è€…åœ°å€ä¿¡æ¯çš„HTTP 307é‡å®šå‘å“åº”ç»™curlã€‚è¿™æ—¶ï¼Œcurlæ ¹æ®å“åº”ä¿¡æ¯ï¼Œé‡æ–°å‘èµ·èµ‹å€¼æ“ä½œè¯·æ±‚ï¼Œå¹¶ç›´æ¥è®¿é—®é¢†å¯¼è€…èŠ‚ç‚¹ï¼ˆä¹Ÿå°±æ˜¯èŠ‚ç‚¹1ï¼Œ192.168.0.10ï¼‰ã€‚å…·ä½“çš„è¿‡ç¨‹ï¼Œå°±åƒä¸‹é¢çš„Wiresharkæˆªå›¾ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/27/fe/27b9005d47f65ca9d231da6e5bddbafe.jpg?wh=1142*118\" alt=\"\" title=\"å›¾6\"></p><p>ç›¸æ¯”å†™è¯·æ±‚å¿…é¡»åœ¨é¢†å¯¼è€…èŠ‚ç‚¹ä¸Šæ‰§è¡Œï¼Œè™½ç„¶æŸ¥è¯¢æ“ä½œå±äºè¯»æ“ä½œï¼Œå¯ä»¥åœ¨ä»»ä½•èŠ‚ç‚¹ä¸Šæ‰§è¡Œï¼Œä½†æ˜¯å¦‚ä½•å®ç°å´æ›´åŠ å¤æ‚ï¼Œå› ä¸ºè¯»æ“ä½œçš„å®ç°å…³ä¹ç€ä¸€è‡´æ€§çš„å®ç°ã€‚é‚£ä¹ˆï¼Œå…·ä½“æ€ä¹ˆå®ç°å‘¢ï¼Ÿ</p><h3>è¯»æ“ä½œ</h3><p>æˆ‘æƒ³è¯´çš„æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°3ç§ä¸€è‡´æ€§æ¨¡å‹ï¼ˆä¹Ÿå°±æ˜¯staleã€defaultã€consistentï¼‰ï¼Œè¿™æ ·ï¼Œç”¨æˆ·å°±å¯ä»¥æ ¹æ®åœºæ™¯ç‰¹ç‚¹ï¼ŒæŒ‰éœ€é€‰æ‹©ç›¸åº”çš„ä¸€è‡´æ€§çº§åˆ«ï¼Œæ˜¯ä¸æ˜¯å¾ˆçµæ´»å‘¢ï¼Ÿ</p><p>å…·ä½“çš„è¯»æ“ä½œçš„ä»£ç å®ç°ï¼Œå°±åƒä¸‹é¢çš„æ ·å­ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/42/97/42cdc5944e200f20f0cdcfef6891cc97.jpg?wh=1142*477\" alt=\"\" title=\"å›¾7\"></p><p>æˆ‘ä»¬èµ°ä¸€éè¿™ä¸ªè¿‡ç¨‹ã€‚</p><ol>\n<li>å½“æ¥æ”¶åˆ°HTTP GETçš„æŸ¥è¯¢è¯·æ±‚æ—¶ï¼Œç³»ç»Ÿä¼šå…ˆè°ƒç”¨level()å‡½æ•°ï¼Œæ¥è·å–å½“å‰è¯·æ±‚çš„è¯»ä¸€è‡´æ€§çº§åˆ«ã€‚</li>\n<li>è°ƒç”¨Get()å‡½æ•°ï¼ŒæŸ¥è¯¢æŒ‡å®škeyå’Œè¯»ä¸€è‡´æ€§çº§åˆ«å¯¹åº”çš„æ•°æ®ã€‚</li>\n<li>å¦‚æœæ‰§è¡ŒGet()å‡½æ•°æˆåŠŸï¼Œå°†æ‰§è¡Œæ­¥éª¤4ï¼›å¦‚æœæ‰§è¡ŒGet()å‡½æ•°å‡ºé”™ï¼Œä¸”æç¤ºå‡ºé”™çš„åŸå› æ˜¯å½“å‰èŠ‚ç‚¹ä¸æ˜¯é¢†å¯¼è€…èŠ‚ç‚¹ï¼Œé‚£ä¹ˆè¿™å°±è¯´æ˜äº†ï¼Œåœ¨å½“å‰èŠ‚ç‚¹ä¸Šæ‰§è¡ŒæŸ¥è¯¢æ“ä½œä¸æ»¡è¶³è¯»ä¸€è‡´æ€§çº§åˆ«ï¼Œå¿…é¡»è¦åˆ°é¢†å¯¼è€…èŠ‚ç‚¹ä¸Šæ‰§è¡ŒæŸ¥è¯¢æ“ä½œï¼Œå°†æ‰§è¡Œæ­¥éª¤5ï¼›å¦‚æœæ‰§è¡ŒGet()å‡½æ•°å‡ºé”™ï¼Œä¸”æç¤ºå‡ºé”™çš„åŸå› ä¸æ˜¯å› ä¸ºå½“å‰èŠ‚ç‚¹ä¸æ˜¯é¢†å¯¼è€…ï¼Œå°†æ‰§è¡Œæ­¥éª¤6ã€‚</li>\n<li>æŸ¥è¯¢æ“ä½œæ‰§è¡ŒæˆåŠŸï¼Œè¿”å›æŸ¥è¯¢åˆ°çš„å€¼ç»™å®¢æˆ·ç«¯ã€‚</li>\n<li>èŠ‚ç‚¹å°†æ„é€ ï¼ŒåŒ…å«é¢†å¯¼è€…åœ°å€ä¿¡æ¯çš„é‡å®šå‘å“åº”ï¼Œå¹¶è¿”å›ç»™å®¢æˆ·ç«¯ã€‚ç„¶åå®¢æˆ·ç«¯ç›´æ¥è®¿é—®é¢†å¯¼è€…èŠ‚ç‚¹æŸ¥è¯¢æ•°æ®ã€‚</li>\n<li>ç³»ç»Ÿè¿è¡Œå‡ºé”™ï¼Œè¿”å›é”™è¯¯ä¿¡æ¯ç»™å®¢æˆ·ç«¯ã€‚</li>\n</ol><p>åœ¨è¿™é‡Œï¼Œä¸ºäº†æ›´å¥½åœ°åˆ©ç”¨curlå®¢æˆ·ç«¯çš„HTTPé‡å®šå‘åŠŸèƒ½ï¼Œæˆ‘åŒæ ·å®ç°äº†HTTP 307é‡å®šå‘ï¼ˆå…·ä½“åŸç†ï¼Œå‰é¢å·²ç»ä»‹ç»äº†ï¼Œè¿™é‡Œå°±ä¸å•°å—¦äº†ï¼‰ã€‚æ¯”å¦‚ï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ï¼Œæ¥å®ç°ä¸€è‡´æ€§çº§åˆ«ä¸ºconsistentçš„æŸ¥è¯¢æ“ä½œï¼Œä¸éœ€è¦å…³å¿ƒè®¿é—®èŠ‚ç‚¹ï¼ˆraft-cluster-host02ï¼‰æ˜¯å¦æ˜¯é¢†å¯¼è€…èŠ‚ç‚¹ã€‚</p><pre><code>curl -XGET raft-cluster-host02:8091/key/foo?level=consistent  -L\n</code></pre><h2>å†…å®¹å°ç»“</h2><p>æœ¬èŠ‚è¯¾æˆ‘ä¸»è¦å¸¦ä½ äº†è§£äº†æ¥å…¥åè®®ã€KVæ“ä½œã€åˆ†å¸ƒå¼é›†ç¾¤çš„å®ç°ï¼Œæˆ‘å¸Œæœ›ä½ è®°ä½ä¸‹é¢ä¸‰ä¸ªé‡ç‚¹å†…å®¹ï¼š</p><ol>\n<li>\n<p>æˆ‘ä»¬å¯ä»¥å€ŸåŠ©HTTPè¯·æ±‚ç±»å‹ï¼Œæ¥å®ç°ç›¸å…³çš„æ“ä½œï¼Œæ¯”å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡HTTP GETè¯·æ±‚å®ç°æŸ¥è¯¢æ“ä½œï¼Œé€šè¿‡HTTP DELETEè¯·æ±‚å®ç°åˆ é™¤æ“ä½œã€‚</p>\n</li>\n<li>\n<p>ä½ å¯ä»¥é€šè¿‡HTTP 307 é‡å®šå‘å“åº”ï¼Œæ¥è¿”å›é¢†å¯¼è€…çš„åœ°å€ä¿¡æ¯ç»™å®¢æˆ·ç«¯ï¼Œéœ€è¦ä½ æ³¨æ„çš„æ˜¯ï¼Œcurlå·²æ”¯æŒHTTP 307é‡å®šå‘ï¼Œä½¿ç”¨èµ·æ¥å¾ˆæ–¹ä¾¿ï¼Œæ‰€ä»¥æ¨èä½ ä¼˜å…ˆè€ƒè™‘curlï¼Œåœ¨æ—¥å¸¸ä¸­æ‰§è¡ŒKVæ“ä½œã€‚</p>\n</li>\n<li>\n<p>åœ¨Raftä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡raft.VerifyLeader()æ¥ç¡®è®¤å½“å‰é¢†å¯¼è€…ï¼Œæ˜¯å¦ä»æ˜¯é¢†å¯¼è€…ã€‚</p>\n</li>\n</ol><p>åœ¨è¿™é‡Œï¼Œæˆ‘è¿˜æƒ³å¼ºè°ƒçš„ä¸€ç‚¹ï¼Œä»»ä½•å¤§ç³»ç»Ÿéƒ½æ˜¯ç”±å°ç³»ç»Ÿå’Œå…·ä½“çš„æŠ€æœ¯ç»„æˆçš„ï¼Œæ¯”å¦‚èƒ½æ— é™æ‰©å±•å’Œæ”¯æ’‘æµ·é‡æœåŠ¡çš„QQåå°ï¼Œæ˜¯ç”±å¤šä¸ªç»„ä»¶ï¼ˆåè®®æ¥å…¥ç»„ä»¶ã€åå­—æœåŠ¡ã€å­˜å‚¨ç»„ä»¶ç­‰ï¼‰ç»„æˆçš„ã€‚è€ŒåšæŠ€æœ¯æœ€ä¸ºé‡è¦çš„å°±æ˜¯è„šè¸å®åœ°å½»åº•åƒé€å’ŒæŒæ¡æŠ€æœ¯æœ¬è´¨ï¼Œå°ç³»ç»Ÿçš„å…³é”®æ˜¯ç»†èŠ‚æŠ€æœ¯ï¼Œå¤§ç³»ç»Ÿçš„å…³é”®æ˜¯æ¶æ„ã€‚æ‰€ä»¥ï¼Œåœ¨è¯¾ç¨‹ç»“æŸåï¼Œæˆ‘ä¼šæ ¹æ®ä½ çš„åé¦ˆæ„è§ï¼Œå†å»¶ä¼¸æ€§åœ°è®²è§£å¤§ç³»ç»Ÿï¼ˆå¤§å‹äº’è”ç½‘åå°ï¼‰çš„æ¶æ„è®¾è®¡æŠ€å·§ï¼Œå’Œæˆ‘ä¹‹å‰æ”¯æ’‘æµ·é‡æœåŠ¡çš„ç»éªŒã€‚</p><p>è¿™æ ·ä¸€æ¥ï¼Œæˆ‘å¸Œæœ›èƒ½å¸®ä½ ä»æŠ€æœ¯åˆ°ä»£ç ã€ä»ä»£ç åˆ°æ¶æ„ã€ä»å°ç³»ç»Ÿåˆ°å¤§ç³»ç»Ÿï¼Œå½»åº•æŒæ¡å®æˆ˜èƒ½åŠ›ï¼Œè·¨è¿‡æŠ€æœ¯å’Œå®æˆ˜çš„é¸¿æ²Ÿã€‚</p><p>è™½ç„¶è¿™ä¸ªåˆ†å¸ƒå¼KVç³»ç»Ÿæ¯”è¾ƒç®€å•ï¼Œä½†å®ƒç›¸å¯¹çº¯ç²¹èšç„¦åœ¨æŠ€æœ¯ï¼Œèƒ½å¸®åŠ©ä½ å¾ˆå¥½çš„ç†è§£Raftç®—æ³•ã€Hashicorp Raftå®ç°ã€åˆ†å¸ƒå¼ç³»ç»Ÿå¼€å‘å®æˆ˜ç­‰ã€‚æ‰€ä»¥ï¼Œæˆ‘å¸Œæœ›ä½ ä¸æ‡‚å°±é—®ï¼Œæœ‰é—®é¢˜å¤šç•™è¨€ï¼Œå’±ä»¬ä¸€èµ·è®¨è®ºè§£å†³ï¼Œä¸è¦ç•™ä¸‹ç›²åŒºã€‚</p><p>å¦å¤–ï¼Œæˆ‘ä¼šæŒç»­ç»´æŠ¤å’Œä¼˜åŒ–è¿™ä¸ªé¡¹ç›®ï¼Œå¹¶ä¼šé’ˆå¯¹å¤§å®¶å…±æ€§çš„ç–‘é—®ï¼Œå¼€å‘å®ç°ç›¸å…³ä»£ç ï¼Œä»ä»£ç å’Œç†è®º2ä¸ªè§’åº¦ï¼Œå¸®åŠ©ä½ æ›´é€å½»çš„ç†è§£æŠ€æœ¯ã€‚æˆ‘å¸Œæœ›ä½ èƒ½åœ¨è¯¾ä¸‹é‡‡ç”¨è‡ªå·±ç†Ÿæ‚‰çš„ç¼–ç¨‹è¯­è¨€ï¼Œå°†è¿™ä¸ªç³»ç»Ÿé‡æ–°å®ç°ä¸€éï¼Œåœ¨å®æˆ˜ä¸­ï¼ŒåŠ æ·±è‡ªå·±å¯¹æŠ€æœ¯çš„ç†è§£ã€‚å¦‚æœæ¡ä»¶å…è®¸ï¼Œä½ å¯ä»¥å°†è‡ªå·±çš„åˆ†å¸ƒå¼KVç³»ç»Ÿï¼Œä»¥â€œé…ç½®ä¸­å¿ƒâ€ã€â€œåå­—æœåŠ¡â€ç­‰å½¢å¼ï¼Œåœ¨å®é™…åœºæ™¯ä¸­è½åœ°å’Œç»´æŠ¤èµ·æ¥ï¼Œä¸æ–­åŠ æ·±è‡ªå·±å¯¹æŠ€æœ¯çš„ç†è§£ã€‚</p><h2>è¯¾å ‚æ€è€ƒ</h2><p>æˆ‘æåˆ°äº†é€šè¿‡-joinå‚æ•°ï¼Œå°†æ–°èŠ‚ç‚¹åŠ å…¥åˆ°é›†ç¾¤ä¸­ï¼Œé‚£ä¹ˆï¼Œä½ ä¸å¦¨æ€è€ƒä¸€ä¸‹ï¼Œå¦‚ä½•å®ç°ä»£ç ç§»é™¤ä¸€ä¸ªèŠ‚ç‚¹å‘¢ï¼Ÿæ¬¢è¿åœ¨ç•™è¨€åŒºåˆ†äº«ä½ çš„çœ‹æ³•ï¼Œä¸æˆ‘ä¸€åŒè®¨è®ºã€‚</p><p>æœ€åï¼Œæ„Ÿè°¢ä½ çš„é˜…è¯»ï¼Œå¦‚æœè¿™ç¯‡æ–‡ç« è®©ä½ æœ‰æ‰€æ”¶è·ï¼Œä¹Ÿæ¬¢è¿ä½ å°†å®ƒåˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ã€‚</p>","comments":[{"had_liked":false,"id":200221,"user_name":"wjh_all_in","can_delete":false,"product_type":"c1","uid":1501209,"ip_address":"","ucode":"0480A53AD46C97","user_header":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIC2Ww3swYiaMalnpA1f87xgzV8Hs1Y27M2CbNQqgR27Il72hibXn5FvhU7mbr3XKsxYDZdjY4GMDbg/132","comment_is_top":false,"comment_ctime":1585560361,"is_pvip":false,"replies":[{"id":"77179","content":"åŠ ä¸€é¢—æ˜Ÿ:)ï¼ŒRaftå’ŒQuorum NWRæ˜¯ä¸åŒæ—¶ä½¿ç”¨çš„ï¼Œç›¸äº’ç‹¬ç«‹çš„ç®—æ³•ï¼ŒQuorum NWRä¸€èˆ¬ç”¨äºAPå‹ç³»ç»Ÿä¸­ï¼Œä¸´æ—¶æä¾›å¼ºä¸€è‡´æ€§ã€‚æ˜¯å­˜åœ¨ç“¶é¢ˆè¿™ä¸ªé—®é¢˜ï¼Œä½†å¯ä»¥é€šè¿‡åˆ†é›†ç¾¤ï¼Œä¹Ÿå°±æ˜¯multi raftç­‰æ–¹æ³•æ¥è§£å†³ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"hanj4096","uid":"1642497","ctime":1586886772,"ip_address":"","comment_id":200221,"utype":1}],"discussion_count":1,"race_medal":0,"score":"40240266025","product_id":100046101,"comment_content":"è¿™é‡Œå®ç°ä¸€è‡´æ€§ï¼Œæ²¡æœ‰é‡‡ç”¨Quorum NWRï¼Œè€Œæ˜¯æŠŠæ‰€æœ‰è¯»è¯·æ±‚éƒ½è½¬ç§»åˆ°ä¸»èŠ‚ç‚¹ï¼Œè¿™åœ¨å®é™…çš„ç”Ÿäº§ç³»ç»Ÿä¼šæˆä¸ºç“¶é¢ˆå§ï¼Ÿ","like_count":10,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":489961,"discussion_content":"åŠ ä¸€é¢—æ˜Ÿ:)ï¼ŒRaftå’ŒQuorum NWRæ˜¯ä¸åŒæ—¶ä½¿ç”¨çš„ï¼Œç›¸äº’ç‹¬ç«‹çš„ç®—æ³•ï¼ŒQuorum NWRä¸€èˆ¬ç”¨äºAPå‹ç³»ç»Ÿä¸­ï¼Œä¸´æ—¶æä¾›å¼ºä¸€è‡´æ€§ã€‚æ˜¯å­˜åœ¨ç“¶é¢ˆè¿™ä¸ªé—®é¢˜ï¼Œä½†å¯ä»¥é€šè¿‡åˆ†é›†ç¾¤ï¼Œä¹Ÿå°±æ˜¯multi raftç­‰æ–¹æ³•æ¥è§£å†³ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586886772,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":201346,"user_name":"æ–¹å—ç¡è¡£","can_delete":false,"product_type":"c1","uid":1074569,"ip_address":"","ucode":"1D355D7FEE5F8C","user_header":"https://static001.geekbang.org/account/avatar/00/10/65/89/e2ceca70.jpg","comment_is_top":false,"comment_ctime":1585753980,"is_pvip":false,"replies":[{"id":"75423","content":"æ–‡ç« é‡Œæœ‰é“¾æ¥ï¼Œåœ¨è¿™é‡Œï¼Œæˆ‘å†è´´ä¸‹ï¼Œhttps:&#47;&#47;github.com&#47;hanj4096&#47;raftdb","user_name":"ä½œè€…å›å¤","user_name_real":"hanj4096","uid":"1642497","ctime":1585838349,"ip_address":"","comment_id":201346,"utype":1}],"discussion_count":1,"race_medal":0,"score":"27355557756","product_id":100046101,"comment_content":"è€å¸ˆè¯·ç•™æ„ä¸‹é¡¹ç›®åœ°å€","like_count":6,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490307,"discussion_content":"æ–‡ç« é‡Œæœ‰é“¾æ¥ï¼Œåœ¨è¿™é‡Œï¼Œæˆ‘å†è´´ä¸‹ï¼Œhttps://github.com/hanj4096/raftdb","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585838349,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":200349,"user_name":"å°æ™å­","can_delete":false,"product_type":"c1","uid":1132337,"ip_address":"","ucode":"3AAA6FB5ACB6AE","user_header":"https://static001.geekbang.org/account/avatar/00/11/47/31/f35367c8.jpg","comment_is_top":false,"comment_ctime":1585575305,"is_pvip":false,"replies":[{"id":"75549","content":"åŠ ä¸€é¢—æ˜Ÿ:)ï¼Œå¦‚æœæ˜¯é¢†å¯¼è€…èŠ‚ç‚¹ï¼Œå¯ä»¥å…ˆkillæ‰ç›¸å…³è¿›ç¨‹ï¼Œè§¦å‘é¢†å¯¼è€…å¿ƒè·³è¶…æ—¶å’Œé¢†å¯¼è€…é€‰ä¸¾ï¼Œå°†é¢†å¯¼è€…å˜æˆè·Ÿéšè€…ï¼Œå†ç§»é™¤èŠ‚ç‚¹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"hanj4096","uid":"1642497","ctime":1585933421,"ip_address":"","comment_id":200349,"utype":1}],"discussion_count":2,"race_medal":1,"score":"18765444489","product_id":100046101,"comment_content":"å¦‚æœç§»é™¤èŠ‚ç‚¹ï¼Œé‚£è¦è€ƒè™‘æ˜¯ç§»é™¤ä¸»èŠ‚ç‚¹è¿˜æ˜¯éä¸»èŠ‚ç‚¹å§ï¼Œå¦‚æœæ˜¯ä¸»èŠ‚ç‚¹é‚£ä¹ˆéœ€è¦é‡æ–°å‘èµ·é€‰ä¸»æµç¨‹ï¼Œå¹¶å°†ä¸»èŠ‚ç‚¹æ•°æ®åŒæ­¥åˆ°å…¶ä»–èŠ‚ç‚¹ï¼Œå¦‚æœæ˜¯éä¸»èŠ‚ç‚¹ï¼Œé‚£ä¹ˆè¦é€šçŸ¥ä¸»èŠ‚ç‚¹è¯¥èŠ‚ç‚¹ç§»é™¤ä¸éœ€è¦åœ¨å‘é€æ—¥å¿—ç»™å®ƒäº†ã€‚","like_count":5,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490000,"discussion_content":"åŠ ä¸€é¢—æ˜Ÿ:)ï¼Œå¦‚æœæ˜¯é¢†å¯¼è€…èŠ‚ç‚¹ï¼Œå¯ä»¥å…ˆkillæ‰ç›¸å…³è¿›ç¨‹ï¼Œè§¦å‘é¢†å¯¼è€…å¿ƒè·³è¶…æ—¶å’Œé¢†å¯¼è€…é€‰ä¸¾ï¼Œå°†é¢†å¯¼è€…å˜æˆè·Ÿéšè€…ï¼Œå†ç§»é™¤èŠ‚ç‚¹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585933421,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1643779,"avatar":"https://static001.geekbang.org/account/avatar/00/19/15/03/682bd618.jpg","nickname":"DavidJiang","note":"","ucode":"92EBF337569A1B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":397572,"discussion_content":"1ã€killæ‰è€çš„leaderä¹‹å,ä¼šé€‰ä¸¾æ–°çš„leader,æ•´ä¸ªé›†ç¾¤æ˜¯å¯ä»¥æ­£å¸¸å·¥ä½œçš„. ä½†æ˜¯æ–°çš„leaderä¸€ç›´ä¼šheartè€leaderæ‰€åœ¨çš„æœºå™¨(raft: rejecting vote request since we have a leader: from=127.0.0.1:8089 leader=127.0.0.1:10089),ç›´åˆ°é‡æ–°å¯åŠ¨è€çš„leaderæœåŠ¡(å¯åŠ¨å,å°†å˜ä¸ºè·Ÿéšè€…).","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632641847,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":199914,"user_name":"è¿˜æœ‰è¿™ç§æ“ä½œ","can_delete":false,"product_type":"c1","uid":1099671,"ip_address":"","ucode":"78D36F5224F974","user_header":"https://static001.geekbang.org/account/avatar/00/10/c7/97/e88b94da.jpg","comment_is_top":false,"comment_ctime":1585498747,"is_pvip":false,"replies":[{"id":"75451","content":"æ„Ÿè°¢å””å¤šå¿—åŒå­¦å¸®å¿™å›å¤:)ã€‚<br>ä¸ºäº†æ–¹ä¾¿å…¶ä»–åŒå­¦çœ‹åˆ°ï¼Œåœ¨è¿™é‡Œï¼Œæˆ‘å†è´´ä¸‹é“¾æ¥åœ°å€ï¼Œhttps:&#47;&#47;github.com&#47;hanj4096&#47;raftdb<br>","user_name":"ä½œè€…å›å¤","user_name_real":"hanj4096","uid":"1642497","ctime":1585844347,"ip_address":"","comment_id":199914,"utype":1}],"discussion_count":2,"race_medal":0,"score":"14470400635","product_id":100046101,"comment_content":"è€å¸ˆæœ‰æ²¡æœ‰ä»£ç ç¤ºä¾‹ï¼Œæˆ–è€…é¡¹ç›®ç¤ºä¾‹","like_count":3,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":489893,"discussion_content":"æ„Ÿè°¢å””å¤šå¿—åŒå­¦å¸®å¿™å›å¤:)ã€‚\nä¸ºäº†æ–¹ä¾¿å…¶ä»–åŒå­¦çœ‹åˆ°ï¼Œåœ¨è¿™é‡Œï¼Œæˆ‘å†è´´ä¸‹é“¾æ¥åœ°å€ï¼Œhttps://github.com/hanj4096/raftdb\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585844347,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1310798,"avatar":"https://static001.geekbang.org/account/avatar/00/14/00/4e/be2b206b.jpg","nickname":"å´å°æ™º","note":"","ucode":"C7C9F58B5C9F7B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":217274,"discussion_content":"https://github.com/hanj4096/raftdb","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1585536077,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":286509,"user_name":"æœäº«å¹³","can_delete":false,"product_type":"c1","uid":1445251,"ip_address":"","ucode":"62288B8984275A","user_header":"https://static001.geekbang.org/account/avatar/00/16/0d/83/9f4bc7eb.jpg","comment_is_top":false,"comment_ctime":1617350847,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5912318143","product_id":100046101,"comment_content":"å¯ä»¥å†ä¸°å¯Œä¸€ä¸‹ï¼Œå¦‚æœæ•°æ®é‡æ¯”è¾ƒå¤§ï¼Œå•æœºå­˜ä¸ä¸‹ï¼Œå¿…é¡»å¯¹æ•°æ®åšåˆ†ç‰‡å¤„ç†ï¼Œè¿™ä¸ªæ—¶å€™åº”è¯¥æ€ä¹ˆè®¾è®¡","like_count":1,"discussions":[{"author":{"id":2036705,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/13/e1/6939ae4f.jpg","nickname":"knightåŠ‰å…ˆç”Ÿ","note":"","ucode":"CEE9BFC8D3D969","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582119,"discussion_content":"hashä¸€è‡´æ€§","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1659243292,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ä¸Šæµ·"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":200774,"user_name":"ç¾½ç¿¼1982","can_delete":false,"product_type":"c1","uid":1130194,"ip_address":"","ucode":"1C7362888B7E3D","user_header":"https://static001.geekbang.org/account/avatar/00/11/3e/d2/5f9d3fa7.jpg","comment_is_top":false,"comment_ctime":1585649333,"is_pvip":false,"replies":[{"id":"75448","content":"æ„Ÿè°¢ä¸€è·¯ç›¸ä¼´ï¼Œå¤šäº¤æµ:)ã€‚å¦å¤–ï¼Œæ„Ÿè°¢åé¦ˆï¼Œåé¦ˆæˆ‘è®°ä¸‹äº†ï¼Œåé¢ä¼šç»¼åˆå¤§å®¶çš„å…±æ€§é—®é¢˜ï¼Œåšè¡¥å……ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"hanj4096","uid":"1642497","ctime":1585843800,"ip_address":"","comment_id":200774,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5880616629","product_id":100046101,"comment_content":"ä¸€è·¯è¿‡æ¥è¿½è€å¸ˆçš„è¯¾ï¼Œæ”¶è·è¿˜æ˜¯è›®å¤šçš„ï¼›ä¸è¿‡æ¯”èµ·å®ç°çš„ç»†èŠ‚ï¼Œæˆ‘è¿˜æ˜¯æƒ³æ›´å¤šäº†è§£è®¾è®¡å’Œæ¶æ„ä¸Šçš„çŸ¥è¯†ï¼Œç‰¹åˆ«æ˜¯è¿™äº›ç†è®ºåœ¨æˆç†Ÿçš„å¼€æºåˆ†å¸ƒå¼ç³»ç»Ÿä¸Šåº”ç”¨ï¼ˆKafkaï¼ŒTiDBï¼ŒETCDï¼ŒCassandraç­‰ç­‰ï¼‰ï¼Œå¸Œæœ›è€å¸ˆèƒ½å¤ŸåŒé€šè¿‡åŠ é¤çš„å½¢å¼è¡¥å……è¿™äº›å†…å®¹","like_count":1,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490134,"discussion_content":"æ„Ÿè°¢ä¸€è·¯ç›¸ä¼´ï¼Œå¤šäº¤æµ:)ã€‚å¦å¤–ï¼Œæ„Ÿè°¢åé¦ˆï¼Œåé¦ˆæˆ‘è®°ä¸‹äº†ï¼Œåé¢ä¼šç»¼åˆå¤§å®¶çš„å…±æ€§é—®é¢˜ï¼Œåšè¡¥å……ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585843800,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":343307,"user_name":"ç‹åº”å‘","can_delete":false,"product_type":"c1","uid":2768731,"ip_address":"","ucode":"EF597BADCC526B","user_header":"","comment_is_top":false,"comment_ctime":1650775845,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1650775845","product_id":100046101,"comment_content":"è¯»å†™éƒ½åœ¨ä¸»èŠ‚ç‚¹ä¸Šé¢ï¼Œé‚£æ€§èƒ½å’Œå•ä»¶å·®ä¸å¤šäº†","like_count":0},{"had_liked":false,"id":314769,"user_name":"å§‘å°„ä»™äºº","can_delete":false,"product_type":"c1","uid":1008517,"ip_address":"","ucode":"3EFC1F3E592165","user_header":"https://static001.geekbang.org/account/avatar/00/0f/63/85/1dc41622.jpg","comment_is_top":false,"comment_ctime":1633414589,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1633414589","product_id":100046101,"comment_content":"è€å¸ˆï¼ŒStoreä¸­çš„må°±ä»£è¡¨å®ç°çš„å­˜å‚¨ç³»ç»Ÿå®é™…çš„æ•°æ®è½½ä½“ï¼Œä¸ºä»€ä¹ˆè¦åœ¨å†…å­˜ä¸­ç”¨mapè¡¨ç¤ºã€‚å®é™…åœºæ™¯ä¸­æ­¤å¤„æ˜¯å¦å¯ä»¥æ›¿æ¢æˆè‡ªå·±éœ€è¦çš„ï¼Œæ¯”å¦‚åŸºäºæ•°æ®åº“çš„å­˜å‚¨ï¼Ÿå¦‚æœå¯ä»¥çš„è¯ï¼Œé‚£ä¹ˆSnapshotä¸ºä»€ä¹ˆè¿˜è¦Restoreåˆ°å†…å­˜ä¸­çš„mapä¸­å»ï¼Œå¦‚æœæ•°æ®é‡ç‰¹åˆ«å¤§ï¼ŒRestoreåˆ°å­˜ä¸­çš„mapä¼šç‰¹åˆ«è€—æ—¶ï¼Œè€Œä¸”è¿˜ä¼šå’Œåº•å±‚å­˜å‚¨äº§ç”Ÿä¸€è‡´æ€§é—®é¢˜ã€‚","like_count":0},{"had_liked":false,"id":275030,"user_name":"Geek4329","can_delete":false,"product_type":"c1","uid":2028951,"ip_address":"","ucode":"D6FB8D1B2D5DAC","user_header":"https://static001.geekbang.org/account/avatar/00/1e/f5/97/9a7ee7b3.jpg","comment_is_top":false,"comment_ctime":1611281526,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1611281526","product_id":100046101,"comment_content":"å½“raftå°†æŒ‡ä»¤åº”ç”¨åˆ°çŠ¶æ€æœºåï¼Œå°†æ‰§è¡ŒapplySetåŠŸèƒ½ï¼Œåˆ›å»ºkeyå’Œvalueåˆ°å†…å­˜ä¸­ã€‚è¿™ä¸€ç‚¹æ²¡çœ‹æ˜ç™½ï¼Œæˆ‘ç†è§£Raftä¸»è¦ç®¡ç†å¤åˆ¶æ—¥å¿—ï¼Œä½†æ˜¯æ—¥å¿—å¦‚ä½•åº”ç”¨åˆ°çŠ¶æ€æœºè¿™ä¸ªéœ€è¦åº”ç”¨è‡ªå·±å®ç°fsmçš„å‡ ä¸ªæ¥å£ã€‚çŠ¶æ€æœºå­˜å‚¨è¿™ä¸ªä¹Ÿæ˜¯åº”ç”¨è‡ªå·±å†³å®šï¼Œå¯ä»¥é€‰æ‹©å†…å­˜ï¼Œæ–‡ä»¶ç­‰ã€‚è¿™ä¸ªåœ°æ–¹åº”ç”¨åˆ°çŠ¶æ€æœºå®Œæˆåå†…å­˜ä¸­å·²ç»æœ‰äº†kvï¼Œåé¢ä¸ºä»€ä¹ˆè¿˜è¦æ‰§è¡Œå…¶ä»–æ“ä½œå‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":261029,"user_name":"ğŸ¤” 2âƒ£ 0âƒ£ 1âƒ£ 9âƒ£ğŸ™„ ğŸ¤¥","can_delete":false,"product_type":"c1","uid":2306143,"ip_address":"","ucode":"FA023FA7287EFC","user_header":"https://static001.geekbang.org/account/avatar/00/23/30/5f/69e63a33.jpg","comment_is_top":false,"comment_ctime":1605175191,"is_pvip":false,"replies":[{"id":"95495","content":"åŠ ä¸€é¢—æ˜Ÿ:ï¼‰ï¼Œä¸éœ€è¦ï¼Œç¬¬ä¸€æ¡å‘½ä»¤æ˜¯åˆ›å»ºæ–°èŠ‚ç‚¹å¹¶å¯åŠ¨ï¼Œåœ¨åˆ›å»ºæ–°èŠ‚ç‚¹æ—¶æ‰§è¡Œè¿™æ¡å‘½ä»¤ï¼›ç¬¬äºŒæ¡å‘½ä»¤æ˜¯å¯åŠ¨èŠ‚ç‚¹ï¼ŒèŠ‚ç‚¹åˆ›å»ºåï¼Œæ¯æ¬¡å¯åŠ¨èŠ‚ç‚¹ï¼Œæ‰§è¡Œè¿™æ¡å‘½ä»¤å°±å¯ä»¥äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"hanj4096","uid":"1642497","ctime":1606024279,"ip_address":"","comment_id":261029,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1605175191","product_id":100046101,"comment_content":"$GOPATH&#47;bin&#47;raftdb -id node02 -haddr raft-cluster-host02:8091 -raddr raft-cluster-host02:8089 -join raft-cluster-host01:8091 ~&#47;.raftdb<br><br>$GOPATH&#47;bin&#47;raftdb -id node02 -haddr raft-cluster-host02:8091 -raddr raft-cluster-host02:8089  ~&#47;.raftdb<br>è€å¸ˆï¼Œæ·»åŠ ç¬¬äºŒä¸ªèŠ‚ç‚¹ï¼Œè¿™ä¸¤æ¡å‘½ä»¤éƒ½è¦æ‰§è¡Œä¸€éå—ï¼Ÿæˆ‘æ‰§è¡Œç¬¬ä¸€æ¡å°±è¢«é˜»å¡äº†","like_count":0,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":509352,"discussion_content":"åŠ ä¸€é¢—æ˜Ÿ:ï¼‰ï¼Œä¸éœ€è¦ï¼Œç¬¬ä¸€æ¡å‘½ä»¤æ˜¯åˆ›å»ºæ–°èŠ‚ç‚¹å¹¶å¯åŠ¨ï¼Œåœ¨åˆ›å»ºæ–°èŠ‚ç‚¹æ—¶æ‰§è¡Œè¿™æ¡å‘½ä»¤ï¼›ç¬¬äºŒæ¡å‘½ä»¤æ˜¯å¯åŠ¨èŠ‚ç‚¹ï¼ŒèŠ‚ç‚¹åˆ›å»ºåï¼Œæ¯æ¬¡å¯åŠ¨èŠ‚ç‚¹ï¼Œæ‰§è¡Œè¿™æ¡å‘½ä»¤å°±å¯ä»¥äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606024279,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":261027,"user_name":"ğŸ¤” 2âƒ£ 0âƒ£ 1âƒ£ 9âƒ£ğŸ™„ ğŸ¤¥","can_delete":false,"product_type":"c1","uid":2306143,"ip_address":"","ucode":"FA023FA7287EFC","user_header":"https://static001.geekbang.org/account/avatar/00/23/30/5f/69e63a33.jpg","comment_is_top":false,"comment_ctime":1605175111,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1605175111","product_id":100046101,"comment_content":"$GOPATH&#47;bin&#47;raftdb -id node02 -haddr raft-cluster-host02:8091 -raddr raft-cluster-host02:8089 -join raft-cluster-host01:8091 ~&#47;.raftdb","like_count":0},{"had_liked":false,"id":244189,"user_name":"Heaven","can_delete":false,"product_type":"c1","uid":1694207,"ip_address":"","ucode":"FA33FBCC66C911","user_header":"https://static001.geekbang.org/account/avatar/00/19/d9/ff/b23018a6.jpg","comment_is_top":false,"comment_ctime":1598422659,"is_pvip":false,"replies":[{"id":"96353","content":"åŠ ä¸€é¢—æ˜Ÿ:)ï¼Œæ˜¯çš„ï¼Œé‡å¯é¢†å¯¼è€…èŠ‚ç‚¹è¿›ç¨‹ï¼Œé›†ç¾¤ä¼šé‡æ–°é€‰ä¸¾é¢†å¯¼è€…ï¼Œè¿™ä¸ªé¢†å¯¼è€…å°†â€œä¸‹å°â€ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"hanj4096","uid":"1642497","ctime":1606821985,"ip_address":"","comment_id":244189,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1598422659","product_id":100046101,"comment_content":"é‚£ä¹ˆæ•´ä½“æµç¨‹è¿˜æ˜¯æŒ‰ç…§å†™æ“ä½œçš„æµç¨‹<br>è·å–åˆ°storeä¸­è¿›è¡Œæ‰§è¡Œ<br>å¦‚æœä¸æŠ¥é”™,å°±è¯´è¿›è¡Œäº†RemoveServer()<br>æŠ¥é”™äº†,æŸ¥çœ‹æŠ¥é”™ä¿¡æ¯,å¦‚æœæ˜¯å› ä¸ºä¸æ˜¯é¢†å¯¼è€…èŠ‚ç‚¹,é‚£ä¹ˆç›´æ¥è¿”å›å®¢æˆ·ç«¯é¢†å¯¼è€…çš„åœ°å€,è®©å…¶è¿›è¡Œé‡å®šå‘<br>å¦‚æœæ˜¯å› ä¸ºåˆ é™¤èŠ‚ç‚¹æ˜¯é¢†å¯¼è€…èŠ‚ç‚¹,æ— æ³•åˆ é™¤å¯¼è‡´çš„,é‚£ä¹ˆç›´æ¥è¿”å›å®¢æˆ·ç«¯é”™è¯¯ä¿¡æ¯<br>(æˆ‘è¿™é‡Œè®¤ä¸ºæ˜¯æ— æ³•åˆ é™¤é¢†å¯¼è€…èŠ‚ç‚¹çš„,åº”è¯¥ç”±ç®¡ç†äººå‘˜ç›´æ¥æ€æ­»é¢†å¯¼è€…èŠ‚ç‚¹çš„è¿›ç¨‹)","like_count":0,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504512,"discussion_content":"åŠ ä¸€é¢—æ˜Ÿ:)ï¼Œæ˜¯çš„ï¼Œé‡å¯é¢†å¯¼è€…èŠ‚ç‚¹è¿›ç¨‹ï¼Œé›†ç¾¤ä¼šé‡æ–°é€‰ä¸¾é¢†å¯¼è€…ï¼Œè¿™ä¸ªé¢†å¯¼è€…å°†â€œä¸‹å°â€ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606821985,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":244187,"user_name":"Heaven","can_delete":false,"product_type":"c1","uid":1694207,"ip_address":"","ucode":"FA33FBCC66C911","user_header":"https://static001.geekbang.org/account/avatar/00/19/d9/ff/b23018a6.jpg","comment_is_top":false,"comment_ctime":1598422490,"is_pvip":false,"replies":[{"id":"96354","content":"åŠ ä¸€é¢—æ˜Ÿ:)ï¼Œæ˜¯çš„ï¼Œé‡å¯é¢†å¯¼è€…èŠ‚ç‚¹è¿›ç¨‹ï¼Œé›†ç¾¤ä¼šé‡æ–°é€‰ä¸¾é¢†å¯¼è€…ï¼Œè¿™ä¸ªé¢†å¯¼è€…å°†â€œä¸‹å°â€ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"hanj4096","uid":"1642497","ctime":1606822003,"ip_address":"","comment_id":244187,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1598422490","product_id":100046101,"comment_content":"é‚£ä¹ˆæ•´ä½“æµç¨‹è¿˜æ˜¯æŒ‰ç…§å†™æ“ä½œçš„æµç¨‹<br>è·å–åˆ°storeä¸­è¿›è¡Œæ‰§è¡Œ<br>å¦‚æœä¸æŠ¥é”™,å°±è¯´è¿›è¡Œäº†RemoveServer()<br>æŠ¥é”™äº†,æŸ¥çœ‹æŠ¥é”™ä¿¡æ¯,å¦‚æœæ˜¯å› ä¸ºä¸æ˜¯é¢†å¯¼è€…èŠ‚ç‚¹,é‚£ä¹ˆç›´æ¥è¿”å›å®¢æˆ·ç«¯é¢†å¯¼è€…çš„åœ°å€,è®©å…¶è¿›è¡Œé‡å®šå‘<br>å¦‚æœæ˜¯å› ä¸ºåˆ é™¤èŠ‚ç‚¹æ˜¯é¢†å¯¼è€…èŠ‚ç‚¹,æ— æ³•åˆ é™¤å¯¼è‡´çš„,é‚£ä¹ˆç›´æ¥è¿”å›å®¢æˆ·ç«¯é”™è¯¯ä¿¡æ¯<br>(æˆ‘è¿™é‡Œè®¤ä¸ºæ˜¯æ— æ³•åˆ é™¤é¢†å¯¼è€…èŠ‚ç‚¹çš„,åº”è¯¥ç”±ç®¡ç†äººå‘˜ç›´æ¥æ€æ­»é¢†å¯¼è€…èŠ‚ç‚¹çš„è¿›ç¨‹)","like_count":0,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504511,"discussion_content":"åŠ ä¸€é¢—æ˜Ÿ:)ï¼Œæ˜¯çš„ï¼Œé‡å¯é¢†å¯¼è€…èŠ‚ç‚¹è¿›ç¨‹ï¼Œé›†ç¾¤ä¼šé‡æ–°é€‰ä¸¾é¢†å¯¼è€…ï¼Œè¿™ä¸ªé¢†å¯¼è€…å°†â€œä¸‹å°â€ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606822003,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":239674,"user_name":"å‘æ°¸ä¿Š","can_delete":false,"product_type":"c1","uid":1170721,"ip_address":"","ucode":"840F8912E6B9E9","user_header":"https://static001.geekbang.org/account/avatar/00/11/dd/21/382ec2bf.jpg","comment_is_top":false,"comment_ctime":1596612894,"is_pvip":false,"replies":[{"id":"97184","content":"åŠ ä¸€é¢—æ˜Ÿ:)ï¼Œæ¯”è¾ƒå¹¶äº¤æ¢ï¼Œæ˜¯ä¸€ç§æŠ€æœ¯ï¼ŒåŸºäºraftå®ç°è¿™ç§æŠ€æœ¯ï¼Ÿæ²¡çœ‹æ˜ç™½ï¼Œèƒ½å…·ä½“è¯´è¯´å—ï¼Ÿè¡¥å……ä¸‹ä¿¡æ¯ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"hanj4096","uid":"1642497","ctime":1607850048,"ip_address":"","comment_id":239674,"utype":1}],"discussion_count":4,"race_medal":0,"score":"1596612894","product_id":100046101,"comment_content":"åŸºäºHashicorpï¼Œå¦‚æœåœ¨åˆ†å¸ƒå¼kvç³»ç»Ÿä¸­ï¼Œéœ€è¦å®ç°casåŠŸèƒ½ï¼Œåº”è¯¥æ€ä¹ˆå®ç°","like_count":0,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":503183,"discussion_content":"åŠ ä¸€é¢—æ˜Ÿ:)ï¼Œæ¯”è¾ƒå¹¶äº¤æ¢ï¼Œæ˜¯ä¸€ç§æŠ€æœ¯ï¼ŒåŸºäºraftå®ç°è¿™ç§æŠ€æœ¯ï¼Ÿæ²¡çœ‹æ˜ç™½ï¼Œèƒ½å…·ä½“è¯´è¯´å—ï¼Ÿè¡¥å……ä¸‹ä¿¡æ¯ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607850048,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1170721,"avatar":"https://static001.geekbang.org/account/avatar/00/11/dd/21/382ec2bf.jpg","nickname":"å‘æ°¸ä¿Š","note":"","ucode":"840F8912E6B9E9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":349376,"discussion_content":"åŸºäºraftå®ç°ä¸€ä¸ªç³»ç»Ÿï¼Œè¯¥ç³»ç»Ÿå®ç°ä¸€ä¸ªåŠŸèƒ½ï¼Œè¯¥åŠŸèƒ½ä¸ºcas","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1613141482,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":2733281,"avatar":"","nickname":"Geek_f4512f","note":"","ucode":"3CB387D2943590","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1170721,"avatar":"https://static001.geekbang.org/account/avatar/00/11/dd/21/382ec2bf.jpg","nickname":"å‘æ°¸ä¿Š","note":"","ucode":"840F8912E6B9E9","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":389017,"discussion_content":"æ— é”å¾ªç¯ åŸå­æ€§ï¼Ÿ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629093921,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":349376,"ip_address":""},"score":389017,"extra":""},{"author":{"id":1109389,"avatar":"https://static001.geekbang.org/account/avatar/00/10/ed/8d/377c106a.jpg","nickname":"KWğŸ’¤","note":"","ucode":"290DD7016F4EE0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1170721,"avatar":"https://static001.geekbang.org/account/avatar/00/11/dd/21/382ec2bf.jpg","nickname":"å‘æ°¸ä¿Š","note":"","ucode":"840F8912E6B9E9","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":548627,"discussion_content":"å…±è¯†ç®—æ³•è·ŸåŸå­æ€§æ²¡æœ‰åŠæ¯›é’±å…³ç³»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643281827,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":349376,"ip_address":""},"score":548627,"extra":""}]}]},{"had_liked":false,"id":210055,"user_name":"Geek_5735ca","can_delete":false,"product_type":"c1","uid":1608999,"ip_address":"","ucode":"366F8DEF7118AF","user_header":"","comment_is_top":false,"comment_ctime":1587658456,"is_pvip":false,"replies":[{"id":"79083","content":"åŠ ä¸€é¢—æ˜Ÿ:)ï¼Œé—®é¢˜1ï¼šhddræ˜¯HTTPæœåŠ¡çš„é€šè®¯åœ°å€ï¼Œrddræ˜¯raftæœåŠ¡ç›¸äº’é€šè®¯çš„åœ°å€ï¼Œæ¯”å¦‚å¿ƒè·³ã€æ—¥å¿—å¤åˆ¶ç­‰ã€‚é—®é¢˜2ï¼šå¯ä»¥çš„ï¼Œé…ç½®ä¸åŒçš„ç«¯å£å’Œæ•°æ®å­˜å‚¨ç›®å½•ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"hanj4096","uid":"1642497","ctime":1588280674,"ip_address":"","comment_id":210055,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1587658456","product_id":100046101,"comment_content":"1.hddrå’Œrddrä»£è¡¨ä»€ä¹ˆå«ä¹‰?<br>2.å•æœºä¸Šæ€ä¹ˆæ¨¡æ‹Ÿå¤šä¸ªipåœ°å€?","like_count":0,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":492928,"discussion_content":"åŠ ä¸€é¢—æ˜Ÿ:)ï¼Œé—®é¢˜1ï¼šhddræ˜¯HTTPæœåŠ¡çš„é€šè®¯åœ°å€ï¼Œrddræ˜¯raftæœåŠ¡ç›¸äº’é€šè®¯çš„åœ°å€ï¼Œæ¯”å¦‚å¿ƒè·³ã€æ—¥å¿—å¤åˆ¶ç­‰ã€‚é—®é¢˜2ï¼šå¯ä»¥çš„ï¼Œé…ç½®ä¸åŒçš„ç«¯å£å’Œæ•°æ®å­˜å‚¨ç›®å½•ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588280674,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":200898,"user_name":"æ²‰æ·€çš„æ¢¦æƒ³","can_delete":false,"product_type":"c1","uid":1177315,"ip_address":"","ucode":"BCB7C26F9D214B","user_header":"https://static001.geekbang.org/account/avatar/00/11/f6/e3/e4bcd69e.jpg","comment_is_top":false,"comment_ctime":1585670166,"is_pvip":false,"replies":[{"id":"75986","content":"æ„Ÿè°¢ä¸€æ­¥åŒå­¦å¸®å¿™è¡¥å……é¡¹ç›®åœ°å€ã€‚éœ€è¦è‡ªå·±è®¾è®¡æµ‹è¯•ç”¨ä¾‹ï¼Œè€ƒè™‘Safetyå’ŒLivenessï¼Œåšæ•°æ®ä¸€è‡´æ€§æ£€æŸ¥ç­‰ï¼Œä»¥åŠåœ¨ç”Ÿäº§ç¯å¢ƒä¸­åšç›‘æ§å’Œè§‚å¯Ÿç³»ç»Ÿè¿è¡Œï¼Œè¿™ä¹Ÿæ˜¯å®ç°ç®—æ³•æœ€å¤æ‚çš„åœ°æ–¹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"hanj4096","uid":"1642497","ctime":1586190373,"ip_address":"","comment_id":200898,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1585670166","product_id":100046101,"comment_content":"é¡¹ç›®åœ°å€åœ¨å“ªé‡Œï¼Ÿè‡ªå·±å®ç° Raft çš„è¯ï¼Œæ­£ç¡®æ€§è¦å¦‚ä½•æµ‹è¯•å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490170,"discussion_content":"æ„Ÿè°¢ä¸€æ­¥åŒå­¦å¸®å¿™è¡¥å……é¡¹ç›®åœ°å€ã€‚éœ€è¦è‡ªå·±è®¾è®¡æµ‹è¯•ç”¨ä¾‹ï¼Œè€ƒè™‘Safetyå’ŒLivenessï¼Œåšæ•°æ®ä¸€è‡´æ€§æ£€æŸ¥ç­‰ï¼Œä»¥åŠåœ¨ç”Ÿäº§ç¯å¢ƒä¸­åšç›‘æ§å’Œè§‚å¯Ÿç³»ç»Ÿè¿è¡Œï¼Œè¿™ä¹Ÿæ˜¯å®ç°ç®—æ³•æœ€å¤æ‚çš„åœ°æ–¹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586190373,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1005391,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","nickname":"ä¸€æ­¥","note":"","ucode":"73CEA468CE70C3","race_medal":1,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":219358,"discussion_content":"é¡¹ç›®åœ°å€ï¼šhttps://github.com/hanj4096/raftdb","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585752425,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":200860,"user_name":"Michael Tesla","can_delete":false,"product_type":"c1","uid":1033053,"ip_address":"","ucode":"C627F090293608","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c3/5d/ced9b5c2.jpg","comment_is_top":false,"comment_ctime":1585663449,"is_pvip":false,"replies":[{"id":"75446","content":"è¿­æˆˆÂ·å®‰åŠ ç½—ï¼ˆDiego Ongaroï¼‰çš„åšå£«è®ºæ–‡ï¼Œã€ŠPaxos Made Liveã€‹ï¼Œå¯ä»¥å¤šå¤šçœ‹çœ‹ï¼Œå¦å¤–ï¼Œå»ºè®®åœ¨å®æˆ˜ä¸­ç†è§£æŠ€æœ¯ï¼Œå› ä¸ºæ–‡å­—å’Œä»£ç ä¹‹é—´æœ‰é¸¿æ²Ÿï¼Œå®æˆ˜èƒ½å¸®åŠ©æˆ‘ä»¬ç†è§£ç†è®ºã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"hanj4096","uid":"1642497","ctime":1585842005,"ip_address":"","comment_id":200860,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1585663449","product_id":100046101,"comment_content":"è€å¸ˆèƒ½ä¸èƒ½æ¨èä¸€äº›è¯¾å¤–çš„ç›¸å…³èµ„æ–™å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490157,"discussion_content":"è¿­æˆˆÂ·å®‰åŠ ç½—ï¼ˆDiego Ongaroï¼‰çš„åšå£«è®ºæ–‡ï¼Œã€ŠPaxos Made Liveã€‹ï¼Œå¯ä»¥å¤šå¤šçœ‹çœ‹ï¼Œå¦å¤–ï¼Œå»ºè®®åœ¨å®æˆ˜ä¸­ç†è§£æŠ€æœ¯ï¼Œå› ä¸ºæ–‡å­—å’Œä»£ç ä¹‹é—´æœ‰é¸¿æ²Ÿï¼Œå®æˆ˜èƒ½å¸®åŠ©æˆ‘ä»¬ç†è§£ç†è®ºã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585842005,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1033053,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c3/5d/ced9b5c2.jpg","nickname":"Michael Tesla","note":"","ucode":"C627F090293608","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":221100,"discussion_content":"è°¢è°¢è€å¸ˆçš„å»ºè®®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585974386,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}