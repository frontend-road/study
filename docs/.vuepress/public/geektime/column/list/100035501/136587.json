{"id":136587,"title":"03 | æ¢ä¸ªè§’åº¦è§£å†³é—®é¢˜ï¼šæœåŠ¡ç«¯æ¨é€æŠ€æœ¯","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯å››ç«ã€‚</p><p>ä»Šå¤©æˆ‘ä»¬ç»§ç»­å’Œ HTTPâ€œè¿‡ä¸å»â€ã€‚åœ¨ä¸Šä¸€è®²ï¼Œæˆ‘ä»¬è®²åˆ°äº† HTTP åœ¨å®‰å…¨ä¼ è¾“æ–¹é¢çš„å±€é™ï¼Œå¹¶ä»‹ç»äº†æ€æ ·ä½¿ç”¨ç»è¿‡ TLS åŠ å¯†çš„ HTTPS è¿æ¥æ¥è§£å†³è¿™æ ·çš„å¼Šç«¯ã€‚</p><p>ä»Šå¤©ï¼Œæˆ‘è¦ç»™ä½ è®²è®²ä¼ ç»Ÿ HTTPçš„å¦ä¸€ä¸ªåœ¨äº¤äº’æ¨¡å¼ä¸Šçš„å±€é™ï¼Œå°±æ˜¯åªèƒ½ç”±å®¢æˆ·ç«¯ä¸»åŠ¨å‘èµ·æ¶ˆæ¯ä¼ é€’ï¼Œè€ŒæœåŠ¡ç«¯åªèƒ½è¢«åŠ¨å“åº”æ¶ˆæ¯çš„å±€é™ï¼Œå¹¶ä»‹ç»å®ƒçš„è§£å†³åŠæ³•ã€‚</p><h2>Pull æ¨¡å‹çš„é—®é¢˜</h2><p>è®©æˆ‘ä»¬æ¥æ€è€ƒè¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼Œå‡è®¾ä½ è®¾è®¡äº†ä¸€æ¬¾ç½‘é¡µç‰ˆçš„å³æ—¶èŠå¤©å·¥å…·ï¼Œç°åœ¨ä½ ä½¿ç”¨æµè§ˆå™¨æ‰“å¼€äº†èŠå¤©é¡µé¢ï¼Œæ­£åœ¨å’Œæœ‹å‹æ„‰å¿«åœ°èŠå¤©ã€‚è¿™æ—¶æœ‰æœ‹å‹ç»™ä½ å‘é€äº†ä¸€æ¡æ¶ˆæ¯ï¼Œå¯æ˜¯ç”±äº HTTP æœ¬èº«æœºåˆ¶çš„é™åˆ¶ï¼ŒæœåŠ¡ç«¯æ— æ³•ä¸»åŠ¨æ¨é€æ¶ˆæ¯ï¼Œå‘ŠçŸ¥æµè§ˆå™¨ä¸Šçš„èŠå¤©é¡µé¢â€œä½ æœ‰ä¸€æ¡æ¶ˆæ¯â€ï¼Œè¿›è€Œå½±å“åˆ°äº†æ¶ˆæ¯çš„å³æ—¶é€è¾¾ã€‚é‚£ä¹ˆï¼Œè¿™ä¸ªé—®é¢˜æ€ä¹ˆè§£å†³ï¼Ÿ</p><p>ä½ å¯èƒ½ä¼šç«‹å³æƒ³åˆ°<strong>è½®è¯¢ï¼ˆPollï¼‰</strong>ï¼Œæ¯”å¦‚æµè§ˆå™¨æ¯éš”åç§’é’Ÿå»é—®ä¸€ä¸‹æœåŠ¡ç«¯æ˜¯ä¸æ˜¯æœ‰æ–°æ¶ˆæ¯ä¸å°±å®Œäº†å˜›ã€‚è¿™çœ‹èµ·æ¥æ˜¯ä¸ªå¥½æ€è·¯ï¼Œä½†æ˜æ˜¾å­˜åœ¨è¿™æ ·ä¸¤ä¸ªé—®é¢˜ï¼š</p><ul>\n<li>æ¶ˆæ¯è¿˜æ˜¯ä¸å¤Ÿå³æ—¶ã€‚æ¢è¨€ä¹‹ï¼Œå‡å¦‚æ­£å¥½åœ¨æŸæ¬¡è¯¢é—®ä¹‹åæœåŠ¡å™¨æ”¶åˆ°äº†æ¶ˆæ¯ï¼Œé‚£ä¹ˆè¿™æ¡æ¶ˆæ¯çš„è·å–å»¶è¿Ÿå¯èƒ½è¾¾åˆ°è‡³å°‘åç§’ã€‚</li>\n<li>å¤§é‡çš„è¯·æ±‚-å“åº”ï¼Œå¸¦å®½å’ŒæœåŠ¡å™¨èµ„æºæµªè´¹ã€‚å¦‚æœä½ å¼€ç€èŠå¤©å·¥å…·é¡µé¢ä¸€ä¸ªå°æ—¶ï¼Œé™¤äº†è¿™ä¸€æ¡æ¶ˆæ¯ï¼Œå´æ²¡æœ‰è¿›ä¸€æ­¥çš„èŠå¤©è¡Œä¸ºï¼Œäºæ˜¯æŒ‰ç…§æ¯åç§’å‘é€ä¸€æ¬¡è¯·æ±‚è®¡ç®—ï¼Œä¸€å…±å‘èµ·äº† 360 æ¬¡è¯·æ±‚ï¼Œè€Œå…¶ä¸­å±…ç„¶åªæœ‰ 1 æ¬¡è¿”å›äº†èŠå¤©æ¶ˆæ¯æ˜¯æœ‰å®é™…æ„ä¹‰çš„ã€‚</li>\n</ul><!-- [[[read_end]]] --><p>æ˜¾ç„¶ï¼Œè½®è¯¢è¿™ä¸ªæ–¹æ¡ˆä¸å¥½ã€‚è¯´åˆ°åº•ï¼Œå…¶å®æˆ‘ä»¬å¹¶æ²¡æœ‰æŠ›å¼€å¯¹ HTTP çš„å·²æœ‰å°è±¡ï¼Œä»é—®é¢˜æœ¬èº«å‡ºå‘å»æ€è€ƒè§£å†³é—®é¢˜çš„æœ€ä½³æ–¹å¼ï¼Œè€Œæ˜¯æ½œæ„è¯†åœ°å—é™äº HTTP çš„ä¼ ç»Ÿäº¤äº’æ¨¡å¼ï¼Œè€ƒè™‘å…¶ä¸­çš„å˜é€šæ–¹æ³•ã€‚</p><p>åœ¨è¿›ä¸€æ­¥åˆ†æä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸¤ä¸ªå®¹æ˜“å¼„æ··çš„æ¦‚å¿µï¼šPull å’Œ Pollã€‚</p><p>â€œPullâ€æŒ‡çš„æ˜¯å»ä¸»åŠ¨å‘èµ·è¡Œä¸ºè·å–æ¶ˆæ¯ï¼Œä¸€èˆ¬åœ¨å®¢æˆ·ç«¯/æœåŠ¡å™¨ï¼ˆC/Sï¼ŒClient/Serverï¼‰æˆ–æµè§ˆå™¨/æœåŠ¡å™¨ï¼ˆB/Sï¼ŒBrowser/Serverï¼‰äº¤äº’ä¸­ï¼Œå®¢æˆ·ç«¯æˆ–æµè§ˆå™¨ä¸»åŠ¨å‘èµ·çš„ç½‘ç»œè¯·æ±‚æ•°æ®çš„è¡Œä¸ºã€‚</p><p>è€Œâ€œPollâ€ï¼Œå°½ç®¡åœ¨æŸäº›åœºæ™¯ä¸‹ä¹Ÿå’Œ Pull é€šç”¨äº†ï¼Œä½†åœ¨è®¡ç®—æœºç½‘ç»œçš„é¢†åŸŸé‡Œï¼Œé€šå¸¸æŠŠå®ƒè§£é‡Šä¸ºâ€œè½®è¯¢â€ï¼Œæˆ–è€…â€œå‘¨æœŸæ€§æŸ¥è¯¢â€ï¼Œåœ¨ Pull çš„åŸºç¡€ä¸Šå¢åŠ äº†â€œå‘¨æœŸæ€§â€çš„æ¦‚å¿µï¼Œè¿™ä¹Ÿæ˜¯å®ƒå’Œ Pull ç›¸æ¯”æœ€æœ¬è´¨çš„åŒºåˆ«ã€‚</p><p>ç›¸åº”åœ°ï¼Œå’Œ Pull  è¡Œä¸ºç›¸å¯¹çš„ï¼Œä»æœåŠ¡ç«¯ä¸»åŠ¨å‘èµ·ï¼Œå‘é€æ•°æ®åˆ°å®¢æˆ·ç«¯çš„è¡Œä¸ºå«åšâ€œPushâ€ã€‚Push ç›¸æ¯” Pull è€Œè¨€ï¼Œå…·å¤‡è¿™æ ·ä¸¤ä¸ªæ˜æ˜¾çš„ä¼˜åŠ¿ï¼š</p><ul>\n<li><strong>é«˜æ•ˆæ€§</strong>ã€‚å¦‚æœæ²¡æœ‰æ›´æ–°å‘ç”Ÿï¼Œå°±ä¸ä¼šæœ‰ä»»ä½•æ›´æ–°æ¶ˆæ¯æ¨é€çš„åŠ¨ä½œï¼Œå³æ¯æ¬¡æ¶ˆæ¯æ¨é€éƒ½å‘ç”Ÿåœ¨ç¡®ç¡®å®å®çš„æ›´æ–°äº‹ä»¶ä¹‹åï¼Œéƒ½æ˜¯æœ‰æ„ä¹‰çš„ï¼Œä¸ä¼šå‡ºç°è¯·æ±‚å’Œå“åº”çš„èµ„æºæµªè´¹ã€‚</li>\n<li><strong>å®æ—¶æ€§</strong>ã€‚äº‹ä»¶å‘ç”Ÿåçš„ç¬¬ä¸€æ—¶é—´å³å¯è§¦å‘é€šçŸ¥æ“ä½œï¼Œç†è®ºä¸Šä¸å­˜åœ¨ä»»ä½•å¯èƒ½å¯¼è‡´é€šçŸ¥å»¶è¿Ÿçš„ç¡¬ä¼¤ã€‚</li>\n</ul><p>å¯æ˜¯ï¼Œæœ‰è¶£çš„æ˜¯ï¼Œäº‹å®ä¸Š Pull çš„åº”ç”¨å´è¿œæ¯” Push æ›´å¹¿æ³›ï¼Œç‰¹åˆ«æ˜¯åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ã€‚è¿™é‡Œæœ‰å¤šä¸ªåŸå› ï¼Œå…¶ä¸­å¾ˆé‡è¦çš„ä¸€æ¡æ˜¯ï¼š</p><p>æœåŠ¡ç«¯ä¸éœ€è¦ç»´æŠ¤å®¢æˆ·ç«¯çš„åˆ—è¡¨ï¼Œä¸éœ€è¦çŸ¥æ™“å®¢æˆ·ç«¯çš„æƒ…å†µï¼Œä¸éœ€è¦äº†è§£å®¢æˆ·ç«¯æŸ¥è¯¢çš„ç­–ç•¥ã€‚<strong>è¿™æœ‰åŠ©äºæŠŠæœåŠ¡ç«¯ä»å¯¹å®¢æˆ·ç«¯ç¹é‡çš„ç®¡ç†å·¥ä½œä¸­è§£æ”¾å‡ºæ¥ï¼Œè€Œæˆä¸ºæ— çŠ¶æ€çš„ç®€å•æœåŠ¡ï¼Œå˜å¾—å…·å¤‡å¹‚ç­‰æ€§ï¼ˆidempotentï¼ŒæŒ‡æ‰§è¡Œå¤šæ¬¡å’Œæ‰§è¡Œä¸€æ¬¡çš„ç»“æœä¸€æ ·ï¼‰ï¼Œæ›´å®¹æ˜“æ¨ªå‘æ‰©å±•ã€‚</strong></p><p>å°¤å…¶åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼ŒçŠ¶æ€ç»å¸¸æˆä¸ºæ¯’è¯ï¼Œæœ‰äº†çŠ¶æ€ï¼Œå°±ä¸å¾—ä¸è€ƒè™‘çŠ¶æ€çš„ä¿å­˜ã€ä¸¢å¤±ã€ä¸€è‡´æ€§ç­‰é—®é¢˜ï¼Œå› æ­¤è¿™ç§æ— çŠ¶æ€å¾€å¾€å¯ä»¥å¾ˆå¤§ç¨‹åº¦åœ°ç®€åŒ–ç³»ç»Ÿçš„è®¾è®¡ã€‚</p><h2>æœåŠ¡ç«¯æ¨é€æŠ€æœ¯</h2><p>æœ‰äº†è¿™äº›åŸºç¡€çŸ¥è¯†ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ¥è°ˆè°ˆå®é™…çš„æœåŠ¡ç«¯æ¨é€æŠ€æœ¯äº†ï¼Œè¿™äº›éƒ½ä»ä¸€å®šç¨‹åº¦ä¸Šè§£å†³äº† HTTP ä¼ ç»Ÿæ–¹å¼ Pull çš„å¼Šç«¯ã€‚</p><h3>1. Comet</h3><p>ä¸¥æ ¼è¯´ï¼ŒComet æ˜¯ä¸€ç§ Web åº”ç”¨å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯äº¤äº’çš„æ¨¡å‹ï¼Œå®ƒæœ‰å‡ ç§æœåŠ¡ç«¯æ¨é€çš„å…·ä½“å®ç°ï¼Œä½†æ˜¯ï¼Œå®ƒä»¬çš„å¤§è‡´åŸç†æ˜¯ä¸€æ ·çš„ï¼š<strong>å®¢æˆ·ç«¯å‘é€ä¸€ä¸ªæ™®é€šçš„ HTTP è¯·æ±‚åˆ°æœåŠ¡ç«¯ä»¥åï¼ŒæœåŠ¡ç«¯ä¸åƒä»¥å¾€ä¸€æ ·åœ¨å¤„ç†åç«‹å³è¿”å›æ•°æ®ï¼Œè€Œæ˜¯ä¿æŒä½è¿æ¥ä¸é‡Šæ”¾ï¼Œæ¯å½“æœ‰æ›´æ–°äº‹ä»¶å‘ç”Ÿï¼Œå°±ä½¿ç”¨åˆ†å—ä¼ è¾“çš„æ–¹å¼è¿”å›æ•°æ®</strong>ï¼ˆå¦‚æœä½ å¿˜è®°äº†å—ä¼ è¾“çš„æ–¹å¼ï¼Œè¯·å›çœ‹ <a href=\"https://time.geekbang.org/column/article/134752\">[ç¬¬1è®²]</a>ï¼‰ã€‚</p><p>è‹¥å¹²æ¬¡æ•°æ®è¿”å›ä»¥åå¯ä»¥å®Œæˆæ­¤æ¬¡è¯·æ±‚å“åº”è¿‡ç¨‹ï¼ˆåˆ†å—ä¼ è¾“è¿”å›é•¿åº¦ä¸º0çš„å—ï¼Œè¡¨ç¤ºä¼ è¾“ç»“æŸï¼‰ï¼Œç­‰å¾…å®¢æˆ·ç«¯ä¸‹ä¸€æ¬¡è¯·æ±‚å‘é€ã€‚è¿™ç§è¿‡ç¨‹çœ‹èµ·æ¥ä¹Ÿå±äºè½®è¯¢ï¼Œä½†æ˜¯æ¯ä¸ªå‘¨æœŸå¯åŒ…å«å¤šæ¬¡æœåŠ¡ç«¯æ•°æ®è¿”å›ï¼Œå› è€Œä¹Ÿè¢«å½¢è±¡åœ°ç§°ä¸ºâ€œé•¿è½®è¯¢â€ï¼ˆLong Pollingï¼‰ã€‚</p><p>åœ¨æœåŠ¡ç«¯æ¨é€æŠ€æœ¯ä¸­ï¼ŒComet æœ€å¤§çš„å¥½å¤„æ˜¯ï¼Œå®ƒ 100% ç”± HTTP åè®®å®ç°ï¼Œå½“ç„¶ï¼Œåˆ†å—ä¼ è¾“è¦æ±‚ HTTP è‡³å°‘æ˜¯ 1.1 ç‰ˆæœ¬ã€‚ä½†ä¹Ÿæ­£å› ä¸ºè¿™ç‚¹ï¼Œå®ƒä¹Ÿå­˜åœ¨ä¸€äº›å¼Šç«¯ï¼Œæ¯”å¦‚ï¼Œå®¢æˆ·ç«¯å¿…é¡»åœ¨æœåŠ¡ç«¯ç»“æŸå½“æ¬¡ä¼ è¾“åæ‰èƒ½å‘æœåŠ¡ç«¯å‘é€æ¶ˆæ¯ï¼›HTTP åè®®é™åˆ¶äº†å®ƒåœ¨æ¯æ¬¡è¯·æ±‚å’Œå“åº”ä¸­å¿…é¡»æºå¸¦å®Œæ•´çš„å¤´éƒ¨ï¼Œè¿™åœ¨ä¸€å®šç¨‹åº¦ä¸Šä¹Ÿé€ æˆäº†æµªè´¹ï¼ˆè¿™ç§ä¸ºäº†ä¼ è¾“å®é™…æ•°æ®è€Œä½¿ç”¨çš„é¢å¤–å¼€é”€å«åš overheadï¼‰ã€‚</p><p>ä¸‹é¢æˆ‘ç»™å‡ºäº†ä¸€ä¸ª Comet å®ç°çš„ç¤ºä¾‹å›¾ã€‚æµè§ˆå™¨åœ¨å‘å‡º 1 å·è¯·æ±‚è¦æ±‚æ•°æ®ï¼Œè¿æ¥ä¿æŒï¼Œæ¥ç€é™†ç»­æ”¶åˆ°å‡ ä¸ªä¸åŒå¤§å°çš„å“åº”æ•°æ®ï¼Œå¹¶ä¸”æœ€åä¸€ä¸ªå¤§å°ä¸º0ï¼Œæµè§ˆå™¨è¢«å‘ŠçŸ¥æ­¤æ¬¡ä¼ è¾“å®Œæˆã€‚è¿‡äº†ä¸€ä¼šå„¿ï¼Œæµè§ˆå™¨åˆå‘å‡º 2 å·è¯·æ±‚ï¼Œå¼€å§‹ç¬¬äºŒè½®çš„ç±»ä¼¼äº¤äº’ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/f1/9d/f148cfbe65a6a0e98214095c46e0169d.png?wh=1156*1272\" alt=\"\"></p><p>åœ¨ Comet æ–¹å¼ä¸‹ï¼Œ<strong>çœ‹èµ·æ¥æœåŠ¡ç«¯æœ‰äº†æ¨é€è¡Œä¸ºï¼Œå…¶å®åªæ˜¯å¯¹äºå®¢æˆ·ç«¯è¯·æ±‚æœ‰æ¡ä»¶ã€è®²æ—¶æœºçš„å¤šæ¬¡è¿”å›</strong>ï¼Œå› æ­¤æˆ‘ä»¬æŠŠå®ƒç§°ä¸ºæœåŠ¡ç«¯â€œå‡ Pushâ€ã€‚</p><h3>2. WebSocket</h3><p>HTML 5 è§„èŒƒå®šä¹‰äº† WebSocket åè®®ï¼Œå®ƒå¯ä»¥é€šè¿‡ HTTP çš„ç«¯å£ï¼ˆæˆ–è€… HTTPS çš„ç«¯å£ï¼‰æ¥å®Œæˆï¼Œä»è€Œæœ€å¤§ç¨‹åº¦ä¸Šå¯¹ HTTP åè®®é€šé€çš„é˜²ç«å¢™ä¿æŒå‹å¥½ã€‚ä½†æ˜¯ï¼Œ<strong>å®ƒæ˜¯çœŸæ­£çš„åŒå‘ã€å…¨åŒå·¥åè®®ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯éƒ½å¯ä»¥ä¸»åŠ¨å‘èµ·è¯·æ±‚ï¼Œå›å¤å“åº”ï¼Œè€Œä¸”ä¸¤è¾¹çš„ä¼ è¾“éƒ½äº’ç›¸ç‹¬ç«‹ã€‚</strong></p><p>å’Œä¸Šæ–‡çš„ Comet ä¸åŒï¼ŒWebSocket çš„æœåŠ¡ç«¯æ¨é€æ˜¯å®Œå…¨å¯ä»¥ç”±æœåŠ¡ç«¯ç‹¬ç«‹ã€ä¸»åŠ¨å‘èµ·çš„ï¼Œå› æ­¤å®ƒæ˜¯æœåŠ¡ç«¯çš„â€œçœŸ Pushâ€ã€‚</p><p>WebSocket æ˜¯ä¸€ä¸ªå¯è°“â€œç§‘ç­å‡ºèº«â€çš„äºŒè¿›åˆ¶åè®®ï¼Œä¹Ÿæ²¡æœ‰é‚£ä¹ˆå¤§çš„å¤´éƒ¨å¼€é”€ï¼Œå› æ­¤å®ƒçš„ä¼ è¾“æ•ˆç‡æ›´é«˜ã€‚åŒæ—¶ï¼Œå’Œ HTTP ä¸ä¸€æ ·çš„æ˜¯ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¸¦æœ‰çŠ¶æ€çš„åè®®ï¼ŒåŒæ–¹å¯ä»¥çº¦å®šå¥½ä¸€äº›çŠ¶æ€ï¼Œè€Œä¸ç”¨åœ¨ä¼ è¾“çš„è¿‡ç¨‹ä¸­å¸¦æ¥å¸¦å»ã€‚è€Œä¸”ï¼ŒWebSocket ç›¸æ¯”äº HTTPï¼Œå®ƒæ²¡æœ‰åŒæºçš„é™åˆ¶ï¼ŒæœåŠ¡ç«¯çš„åœ°å€å¯ä»¥å®Œå…¨å’Œæºé¡µé¢åœ°å€æ— å…³ï¼Œå³ä¸ä¼šå‡ºç°è‡­åæ˜­è‘—çš„æµè§ˆå™¨â€œè·¨åŸŸé—®é¢˜â€ã€‚</p><p>å¦å¤–ï¼Œå®ƒå’Œæˆ‘ä»¬ä¹‹å‰å­¦ä¹ çš„åŠ å¯†ä¼ è¾“ä¹Ÿä¸æ¯«ä¸å†²çªï¼Œç”±äºå®ƒåœ¨ç½‘ç»œåˆ†å±‚æ¨¡å‹ä¸­ä½äº TLS ä¸Šæ–¹ï¼Œå› æ­¤ä»–å¯ä»¥ä½¿ç”¨å’Œ HTTP ä¸€æ ·çš„åŠ å¯†æ–¹å¼ä¼ è¾“ï¼š</p><blockquote>\n<p>HTTP â†’ WS<br>\nHTTPS â†’ WSS</p>\n</blockquote><p>æœ€åï¼Œæœ€æœ‰æ„æ€çš„äº‹æƒ…åœ¨äºï¼Œå’Œæˆ‘ä»¬ä¹‹å‰çš„è®¤è¯†ä¸åŒï¼ŒWebSocket æ˜¯ä½¿ç”¨ HTTP åè®®â€œå‡çº§â€çš„æ–¹æ³•æ¥å¸®åŠ©å»ºç«‹è¿æ¥çš„ï¼Œä¸‹é¢æˆ‘ä»¬åŠ¨æ‰‹æ¥è¯•ä¸€è¯•ã€‚</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦æ‰¾åˆ°ä¸€ä¸ªå¯ä»¥æ”¯æŒ WebSocket æµ‹è¯•çš„ç½‘ç«™ï¼Œæ¯”å¦‚ websocket.orgï¼Œç„¶åæˆ‘ä»¬å°†ä½¿ç”¨ Chrome çš„ç½‘ç»œå·¥å…·æ¥æ•è·å’Œæ˜¾ç¤ºé€šè¿‡æµè§ˆå™¨å‘é€å’Œæ¥æ”¶çš„æ¶ˆæ¯ã€‚å¦‚æœè¿™æ˜¯ä½ ç¬¬ä¸€æ¬¡ä½¿ç”¨ Chrome çš„å¼€å‘è€…å·¥å…·ï¼Œé‚£ä¹ˆä½ éœ€è¦å¥½å¥½ç†Ÿæ‚‰å®ƒäº†ï¼Œå› ä¸ºå®ƒå°†åœ¨ä½ ä»Šåå…¨æ ˆçš„é“è·¯ä¸Šæ´¾ä¸Šå¤§ç”¨åœºã€‚</p><p>ä½¿ç”¨ Chrome æ‰“å¼€ <a href=\"https://www.websocket.org/echo.html\">Echo Test</a> é¡µé¢ï¼Œåœ¨è¿™é‡Œä½ å¯ä»¥å‘é€å»ºç«‹ä¸€ä¸ª WebSocket è¿æ¥ã€‚ä½†æ˜¯åˆ«æ€¥ï¼Œæˆ‘ä»¬å…ˆæ‰“å¼€ Chrome çš„å¼€å‘è€…å·¥å…·ï¼Œå¹¶é€‰ä¸­ Network  æ ‡ç­¾ï¼Œæ¥ç€ç‚¹å‡»å·¦ä¸Šè§’çš„æ¸…é™¤æŒ‰é’®ï¼ŒæŠŠå·²æœ‰é¡µé¢åŠ è½½çš„ç½‘ç»œæ¶ˆæ¯æ¸…é™¤æ‰ï¼Œä»¥è·å¾—ä¸€ä¸ªæ¸…çˆ½çš„ç½‘ç»œæŠ¥æ–‡ç›‘è§†ç•Œé¢ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/ea/ae/ea65ac03047615ba8aafe1d7118d5dae.png?wh=2068*950\" alt=\"\"></p><p>æ¥ç€ï¼Œç¡®ä¿é¡µé¢ä¸Šå»ºç«‹ WebSocket è¿æ¥çš„å¯¹ç«¯åœ°å€å’Œä¼ é€’çš„ä¿¡æ¯éƒ½å·²ç»å¡«å†™ï¼Œæ¯”å¦‚ï¼š</p><pre><code>Location:\nwss://echo.websocket.org\nMessage:\nRock it with HTML5 WebSocket\n</code></pre><p>äºæ˜¯å°±å¯ä»¥ç‚¹å‡»â€œConnectâ€æŒ‰é’®äº†ï¼Œæ—è¾¹çš„æ—¥å¿—æ¡†å°†å‡ºç°â€œCONNECTEDâ€å­—æ ·ï¼ŒåŒæ—¶ï¼ŒChrome å¼€å‘è€…å·¥å…·å°†æ•è·è¿™æ ·çš„è¯·æ±‚ï¼ˆå¦‚æœåœ¨å¼€å‘è€…å·¥å…·ä¸­ç½‘ç»œç›‘è§†ç•Œé¢ä¸Šï¼Œé€‰ä¸­æ¶ˆæ¯çš„æ¶ˆæ¯å¤´å¤„äºâ€œparsedâ€å±•ç¤ºæ¨¡å¼ï¼Œä½ éœ€è¦ç‚¹å‡» Request Headers å³ä¾§çš„ â€œview sourceâ€ é“¾æ¥æ¥æŸ¥çœ‹åŸå§‹æ¶ˆæ¯å¤´ï¼‰ï¼š</p><pre><code>GET wss://echo.websocket.org/?encoding=text HTTP/1.1\nHost: echo.websocket.org\nOrigin: https://www.websocket.org\nConnection: Upgrade\nUpgrade: websocket\nSec-WebSocket-Version: 13\nSec-WebSocket-Key: xxx\n... (çœç•¥å…¶å®ƒ HTTP å¤´)\n</code></pre><p>å¥½ï¼Œä½ å¯ä»¥çœ‹åˆ°ï¼Œè¿™æ˜¯ä¸€ä¸ªæ™®æ™®é€šé€šçš„ HTTP GET è¯·æ±‚ï¼Œä½†æ˜¯ URL æ˜¯ä»¥åŠ å¯†è¿æ¥â€œwssâ€å¼€å¤´çš„ï¼Œå¹¶ä¸”æœ‰å‡ ä¸ªç‰¹æ®Šçš„ HTTP å¤´ï¼šOrigin æŒ‡å‡ºäº†è¯·æ±‚æ˜¯ä»å“ªä¸ªé¡µé¢å‘èµ·çš„ï¼ŒConnection: Upgrade å’Œ Upgrade: websocket è¿™ä¸¤ä¸ªè¡¨ç¤ºå®¢æˆ·ç«¯è¦æ±‚å‡çº§ HTTP åè®®ä¸º WebSocketã€‚</p><p>å¥½ï¼Œå†æ¥çœ‹å“åº”ï¼Œæ¶ˆæ¯çš„å¤´éƒ¨ä¸ºï¼š</p><pre><code>HTTP/1.1 101 Web Socket Protocol Handshake\nConnection: Upgrade\nSec-WebSocket-Accept: xxx\nUpgrade: websocket\n... (çœç•¥å…¶å®ƒ HTTP å¤´)\n</code></pre><p>å—¯ï¼Œè¿”å›ç æ˜¯ 101ï¼Œæè¿°æ˜¯â€œWeb Socket Protocol Handshakeâ€ï¼Œå¹¶ä¸”ï¼Œå®ƒç¡®è®¤äº†è¿æ¥å‡çº§ä¸ºâ€œwebsocketâ€çš„äº‹å®ã€‚</p><h3>3. æ›´å¤šæ¨é€æŠ€æœ¯</h3><p>åˆ°è¿™é‡Œï¼Œæˆ‘å·²ç»ä»‹ç»äº†å‡ ç§æœåŠ¡ç«¯çš„æ¨é€æŠ€æœ¯ï¼Œäº‹å®ä¸Šè¿˜æœ‰æ›´å¤šï¼Œä½†æ˜¯ï¼Œ<strong>å¦‚æœä½ ä¾æ¬¡äº†è§£ä»¥åè®¤çœŸæ€è€ƒï¼Œå°±ä¼šå‘ç°ï¼Œè¿™äº›åŸç†å±…ç„¶éƒ½åœ¨æŸç§ç¨‹åº¦ä¸Šå’Œæˆ‘ä»‹ç»çš„ Comet å’Œ WebSocket è¿™ä¸¤ç§ç±»ä¼¼ï¼Œæœ‰çš„ç”šè‡³æ¥è‡ªäºå®ƒä»¬ã€‚</strong></p><p>è¿™äº›æŠ€æœ¯åŒ…æ‹¬ï¼š</p><ul>\n<li>SSEï¼Œå³ Server-Sent Eventsï¼Œåˆå« EventSourceï¼Œæ˜¯ä¸€ç§å·²è¢«å†™å…¥ HTML 5 æ ‡å‡†çš„æœåŠ¡ç«¯äº‹ä»¶æ¨é€æŠ€æœ¯ï¼Œå®ƒå…è®¸å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¹‹é—´å»ºç«‹ä¸€ä¸ªå•å‘é€šé“ï¼Œä»¥è®©æœåŠ¡ç«¯å‘å®¢æˆ·ç«¯å•æ–¹å‘æŒç»­æ¨é€äº‹ä»¶æ¶ˆæ¯ï¼›</li>\n<li>ä¸ºäº†æé«˜æ€§èƒ½ï¼ŒHTTP/2 è§„èŒƒä¸­æ–°æ·»åŠ çš„æœåŠ¡ç«¯æ¨é€æœºåˆ¶ï¼Œæˆ‘ä»¬åœ¨ <a href=\"https://time.geekbang.org/column/article/134752\">[ç¬¬ 01 è®²]</a> ä¸­æåˆ°è¿‡ï¼Œå¹¶åœ¨è¯¥è®²çš„æ‰©å±•é˜…è¯»ä¸­æœ‰å®ƒçš„åŸç†ä»‹ç»ï¼›</li>\n<li>WebRTCï¼Œå³ Web Real-Time Communicationï¼Œå®ƒæ˜¯ä¸€ä¸ªæ”¯æŒç½‘é¡µè¿›è¡Œè§†é¢‘ã€è¯­éŸ³é€šä¿¡çš„åè®®æ ‡å‡†ï¼Œä¸ä¹…å‰å·²è¢«åŠ å…¥ W3C æ ‡å‡†ï¼Œæœ€æ–°çš„ Chrome å’Œ Firefox ç­‰ä¸»æµæµè§ˆå™¨éƒ½æ”¯æŒï¼›</li>\n<li>è¿˜æœ‰ä¸€äº›åˆ©ç”¨æµè§ˆå™¨æ’ä»¶å’Œæ‰©å±•è¾¾æˆçš„æœåŠ¡ç«¯æ¨é€æŠ€æœ¯ï¼Œæ¯”å¦‚ä½¿ç”¨ Flash çš„ XMLSocketï¼Œæ¯”å¦‚ä½¿ç”¨ Java çš„ Appletï¼Œä½†è¿™äº›éšç€ HTML 5 çš„æ™®åŠï¼Œæ­£æ…¢æ…¢è¢«æ·˜æ±°ã€‚</li>\n</ul><p>ä½ çœ‹ï¼Œé€šè¿‡å­¦ä¹ ä¸€ä¸¤ä¸ªå…¸å‹çš„æŠ€æœ¯ï¼Œå†æ‹“å±•å¼€ï¼Œå»ç±»æ¯”äº†è§£å’Œåˆ†ææ€è€ƒåŒä¸€é¢†åŸŸå†…çš„å…¶å®ƒæŠ€æœ¯ï¼Œå°±èƒ½æŒæ¡åˆ°æœ€æ ¸å¿ƒçš„ä¸œè¥¿ï¼Œè¿™å°±æ˜¯æˆ‘æ¨èçš„ä¸€ç§å­¦ä¹ å…¨æ ˆæŠ€æœ¯çš„æ–¹å¼ã€‚</p><h2>æ€»ç»“æ€è€ƒ</h2><p>ä»Šå¤©æˆ‘ä»¬ä» HTTP çš„äº¤äº’å±€é™æ€§å¼•å‡ºäº†ç½‘ç»œäº¤äº’ä¸­ Pull å’Œ Push çš„ä¸¤å¤§æ¨¡å‹ï¼Œæ¯”è¾ƒäº†å®ƒä»¬çš„ä¼˜åŠ£ã€‚æœåŠ¡ç«¯ Push çš„æ–¹å¼å…·å¤‡é«˜æ•ˆæ€§å’Œå®æ—¶æ€§çš„ä¼˜åŠ¿ï¼Œè€Œå®¢æˆ·ç«¯ Pull çš„æ–¹å¼ä»¤æœåŠ¡ç«¯å…å»çŠ¶æ€çš„ç»´æŠ¤ï¼Œä»æ ¹æœ¬ä¸Šç®€åŒ–äº†ç³»ç»Ÿã€‚</p><p>ä¹‹åæˆ‘ä»¬ä»¥ Comet å’Œ WebSocket ä¸ºé‡ç‚¹ï¼Œä»‹ç»äº†æœåŠ¡ç«¯æ¨é€çš„ä¸åŒæ–¹å¼ï¼Œå°¤å…¶æ˜¯ç”¨äº†å®é™…æŠ“åŒ…åˆ†æï¼Œä»‹ç»äº†é€šè¿‡ HTTP â€œå‡çº§â€çš„æ–¹å¼æ¥å»ºç«‹ WebSocket è¿æ¥çš„åŸç†ã€‚</p><p>ä»Šå¤©å­¦ä¹ å¾—æ€æ ·å‘¢ï¼Ÿæ¥çœ‹è¿™æ ·ä¸¤ä¸ªé—®é¢˜ï¼š</p><ul>\n<li>æ–‡ä¸­ä»‹ç»äº† Push å’Œ Pull åœ¨åŸç†ä¸Šçš„ä¸åŒï¼Œåœ¨ä½ çš„å®é™…é¡¹ç›®ä¸­ï¼Œæ˜¯å¦åº”ç”¨äº† Push æˆ– Pull çš„æ¨¡å‹å‘¢ï¼Ÿ</li>\n<li>æ–‡ä¸­ä»‹ç»äº† Push æ¯” Pull å…·å¤‡é«˜æ•ˆæ€§å’Œå®æ—¶æ€§çš„ä¼˜åŠ¿ï¼Œè€Œ Pull æ¯” Push åˆ™å…·å¤‡ä½¿å¾—æœåŠ¡å˜å¾—æ— çŠ¶æ€çš„ä¼˜åŠ¿ï¼Œé™¤äº†æœ€é‡è¦çš„è¿™å‡ ä¸ªï¼Œä½ è¿˜èƒ½è¯´å‡ºæ›´å¤šå®ƒä»¬å„è‡ªçš„ä¼˜åŠ¿å—ï¼Ÿ</li>\n</ul><p>ä»Šå¤©çš„å†…å®¹å°±åˆ°è¿™é‡Œã€‚ä»¥ HTTP åè®®ä¸ºæ ¸å¿ƒï¼Œä»‹ç»ç½‘ç»œåè®®çš„ä¸‰è®²æ–‡ç« å·²ç»æ›´æ–°å®Œæ¯•äº†ï¼Œä½ æ˜¯å¦å¯¹äºå…¨æ ˆæŠ€æœ¯æœ¬èº«ï¼Œè¿˜æœ‰é€‚åˆè‡ªå·±çš„å­¦ä¹ æ–¹æ³•ï¼Œæœ‰äº†æ–°çš„ç†è§£å‘¢ï¼Ÿæ¬¢è¿ç•™è¨€å’Œæˆ‘è®¨è®ºã€‚</p><h2>æ‰©å±•é˜…è¯»</h2><ul>\n<li>æ–‡ä¸­æåˆ°äº†è·¨åŸŸé—®é¢˜ï¼Œå¦‚æœæ„Ÿå…´è¶£ï¼Œæ¨èä½ é˜…è¯» MDN çš„ <a href=\"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS\">HTTPè®¿é—®æ§åˆ¶ï¼ˆCORSï¼‰</a>è¿™ç¯‡æ–‡ç« ã€‚</li>\n<li>TutorialsPoint çš„ <a href=\"https://www.tutorialspoint.com/websockets/\">WebSocket ç³»ç»Ÿæ•™ç¨‹</a>ï¼Œå¯¹äºæœ¬æ–‡ä»‹ç»çš„ WebSocket åè®®ï¼Œéœ€è¦è¿›ä¸€æ­¥äº†è§£çš„ä¸€ä¸ªå¥½å»å¤„ã€‚</li>\n<li>å…³äº HTTP Update å¤´çš„ <a href=\"https://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.42\">RFC 2616 åè®®ç‰‡æ®µ</a>å’Œ WebSocket çš„ <a href=\"https://tools.ietf.org/html/rfc6455\">RFC 6445</a>ï¼Œä½ ä¹Ÿè®¸å¯¹å“åº”å’Œè¯·æ±‚ä¸­çš„å…¶å®ƒ HTTP å¤´å¿ƒå­˜ç–‘é—®ï¼Œå’Œä¹‹å‰ä»‹ç»çš„ HTTP çš„ RFC åè®®ä¸€æ ·ï¼Œä½ é€šå¸¸ä¸éœ€è¦ä»”ç»†é˜…è¯»ï¼Œä½†å®ƒæ˜¯å¯¹åè®®æœ‰é—®é¢˜æ—¶çš„æœ€ç»ˆå»å¤„ã€‚</li>\n<li><a href=\"https://www.html5rocks.com/en/tutorials/eventsource/basics/\">Stream Updates with Server-Sent Events</a>ï¼Œä¸€ç¯‡éå¸¸å¥½çš„ä»‹ç» SSE åŸºç¡€ï¼Œå’ŒåŒç±»æŠ€æœ¯æ¯”è¾ƒä¼˜åŠ£ï¼Œå¹¶ç»™å‡ºä»£ç ç¤ºä¾‹çš„æ–‡ç« ï¼›å¦‚æœä½ å¯¹ WebRTC æ„Ÿå…´è¶£ï¼Œé‚£ä¹ˆå¯ä»¥å…ˆçœ‹çœ‹è¿™ä¸ª<a href=\"http://io13webrtc.appspot.com/#1\">èƒ¶ç‰‡</a>ï¼Œå†é˜…è¯»è¿™ç¯‡åŸºç¡€çŸ¥è¯† <a href=\"https://www.html5rocks.com/en/tutorials/webrtc/basics/\">Getting Started with WebRTC</a>ã€‚</li>\n</ul><p></p>","comments":[{"had_liked":false,"id":170230,"user_name":"LiYanbin","can_delete":false,"product_type":"c1","uid":1129976,"ip_address":"","ucode":"2F50493F818909","user_header":"https://static001.geekbang.org/account/avatar/00/11/3d/f8/b13674e6.jpg","comment_is_top":false,"comment_ctime":1578554221,"is_pvip":false,"replies":[{"id":"66063","content":"æˆ‘æ˜¯è¿™æ ·è®¤ä¸ºçš„ï¼š<br><br>å°±åƒä½ è¯´çš„ï¼Œæ¯”å¦‚å¯é æ€§ï¼Œä¿åºæ€§ï¼Œæ‹¥å¡æ§åˆ¶ç­‰ç­‰ï¼Œå®Œå…¨æ˜¯å¯ä»¥æ”¾åˆ°åº”ç”¨å±‚æ¥åšçš„ã€‚<br><br>ä½†æ˜¯ï¼Œå¯¹åº”ç”¨å±‚æ¥è¯´ï¼Œå®ƒä»¬å…³å¿ƒçš„å†…å®¹ï¼Œä¸éœ€è¦ï¼Œä¹Ÿä¸åº”è¯¥åŒ…æ‹¬è¿™äº›ä¼ è¾“æ–¹é¢çš„åŸºæœ¬ç‰¹æ€§ï¼Œæˆ–è€…è¯´ï¼Œå·²ç»æœ‰ä¼ è¾“å±‚çš„TCPæŠŠè¿™äº›äº‹åšå¥½äº†ã€‚è€Œåè®®çš„è®¾è®¡è€…ï¼Œå…³å¿ƒä»–&#47;å¥¹è®¾è®¡çš„åè®®æƒ³è§£å†³çš„é—®é¢˜ï¼Œè¿™äº›ä¼ è¾“æ–¹é¢çš„ç‰¹æ€§ï¼Œæ‹¿æ¥ç”¨å°±å¯ä»¥äº†ï¼Œè€Œä¸éœ€è¦å†å®ç°ä¸€éã€‚<br><br>å¾€å¤§äº†è¯´ï¼Œè½¯ä»¶åˆ†å±‚çš„ç›®çš„æœ€å¤§ç›®çš„ï¼Œå°±æ˜¯è§£è€¦ã€‚è§£è€¦ä¹‹åâ€œè°â€åšâ€œä»€ä¹ˆäº‹â€å°±æ˜¯æ¯ä¸€å±‚çš„èŒè´£ï¼Œ7å±‚&#47;5å±‚æ¨¡å‹é‡Œçš„ä¼ è¾“å±‚ä¹Ÿä¸€æ ·ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å››ç«","uid":"1580075","ctime":1578588410,"ip_address":"","comment_id":170230,"utype":1}],"discussion_count":2,"race_medal":0,"score":"10168488813","product_id":100035501,"comment_content":"æ„Ÿè°¢å›ç­”ï¼æˆ‘çš„è¡¨è¿°æœ‰è¯¯ï¼Œå…¶å®æˆ‘æ˜¯æƒ³çŸ¥é“ï¼ŒæœåŠ¡å™¨æ¨é€æŠ€æœ¯ï¼Œåƒwebsockè¿™ç§æŠ€æœ¯ï¼Œå…¶å®å°±æ˜¯æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯å»ºç«‹ä¸€æ¡è¿æ¥ï¼Œå»ºç«‹è¿æ¥å¯ä»¥åŸºäºTCPä¹Ÿå¯ä»¥åŸºäºUDPï¼Œä½†æ˜¯å´å¾ˆå°‘è§åˆ°åŸºäºUDPçš„ä¸Šå±‚åº”ç”¨åè®®ã€‚<br>    å¦‚æœè¯´æ˜¯å› ä¸ºTCPå¯é æ€§ï¼Œæ—¶åºæ€§ï¼Œä¿æ´»è¿™äº›ç‰¹æ€§æ‰é€‰æ‹©TCPï¼Œé‚£è¿™äº›ç‰¹æ€§è½¬ç§»åˆ°åº”ç”¨å±‚è¿™ä¸€å±‚æ¥ç»´æŠ¤ä¹Ÿéä¸å¯ã€‚<br>    é‚£ç©¶ç«Ÿæ˜¯ä½•åŸå› å¯¼è‡´åœ¨æœåŠ¡å™¨æ¨é€æŠ€æœ¯é¢†åŸŸä¸­ï¼Œæ²¡æœ‰å¹¿æ³›åº”ç”¨çš„åŸºäºUDPçš„ä¸Šå±‚åº”ç”¨åè®®å‘¢ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1580075,"avatar":"https://static001.geekbang.org/account/avatar/00/18/1c/2b/2069abe6.jpg","nickname":"å››ç«","note":"","ucode":"E4BED7DCAADD99","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480893,"discussion_content":"æˆ‘æ˜¯è¿™æ ·è®¤ä¸ºçš„ï¼š\n\nå°±åƒä½ è¯´çš„ï¼Œæ¯”å¦‚å¯é æ€§ï¼Œä¿åºæ€§ï¼Œæ‹¥å¡æ§åˆ¶ç­‰ç­‰ï¼Œå®Œå…¨æ˜¯å¯ä»¥æ”¾åˆ°åº”ç”¨å±‚æ¥åšçš„ã€‚\n\nä½†æ˜¯ï¼Œå¯¹åº”ç”¨å±‚æ¥è¯´ï¼Œå®ƒä»¬å…³å¿ƒçš„å†…å®¹ï¼Œä¸éœ€è¦ï¼Œä¹Ÿä¸åº”è¯¥åŒ…æ‹¬è¿™äº›ä¼ è¾“æ–¹é¢çš„åŸºæœ¬ç‰¹æ€§ï¼Œæˆ–è€…è¯´ï¼Œå·²ç»æœ‰ä¼ è¾“å±‚çš„TCPæŠŠè¿™äº›äº‹åšå¥½äº†ã€‚è€Œåè®®çš„è®¾è®¡è€…ï¼Œå…³å¿ƒä»–/å¥¹è®¾è®¡çš„åè®®æƒ³è§£å†³çš„é—®é¢˜ï¼Œè¿™äº›ä¼ è¾“æ–¹é¢çš„ç‰¹æ€§ï¼Œæ‹¿æ¥ç”¨å°±å¯ä»¥äº†ï¼Œè€Œä¸éœ€è¦å†å®ç°ä¸€éã€‚\n\nå¾€å¤§äº†è¯´ï¼Œè½¯ä»¶åˆ†å±‚çš„ç›®çš„æœ€å¤§ç›®çš„ï¼Œå°±æ˜¯è§£è€¦ã€‚è§£è€¦ä¹‹åâ€œè°â€åšâ€œä»€ä¹ˆäº‹â€å°±æ˜¯æ¯ä¸€å±‚çš„èŒè´£ï¼Œ7å±‚/5å±‚æ¨¡å‹é‡Œçš„ä¼ è¾“å±‚ä¹Ÿä¸€æ ·ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578588410,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1129976,"avatar":"https://static001.geekbang.org/account/avatar/00/11/3d/f8/b13674e6.jpg","nickname":"LiYanbin","note":"","ucode":"2F50493F818909","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":128177,"discussion_content":"æ„Ÿè°¢å›ç­”ï¼å›ç­”ä¸­çš„è§’åº¦æ˜¯ä¸€ä¸ªéå¸¸æ£’çš„è§’åº¦ã€‚æ˜¯çš„ï¼Œå¦‚æœæ²¡æœ‰æ€§èƒ½ï¼Œæ•ˆç‡ï¼Œèµ„æºé™åˆ¶ç­‰é—®é¢˜ï¼Œæ²¡æœ‰å¿…è¦å†å»åº”ç”¨å±‚å»è‡ªå·±å®ç°ä¸€éã€‚å…·ä½“åº”ç”¨è¦æ ¹æ®å…·ä½“çš„åº”ç”¨åœºæ™¯å»é€‰æ‹©ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578618912,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":169226,"user_name":"LiYanbin","can_delete":false,"product_type":"c1","uid":1129976,"ip_address":"","ucode":"2F50493F818909","user_header":"https://static001.geekbang.org/account/avatar/00/11/3d/f8/b13674e6.jpg","comment_is_top":false,"comment_ctime":1578297381,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10168231973","product_id":100035501,"comment_content":"æœåŠ¡ç«¯èƒ½å¤Ÿæ¨é€æ¶ˆæ¯ç»™å®¢æˆ·ç«¯ï¼Œå°±éœ€è¦äº‹å…ˆçŸ¥é“å®¢æˆ·ç«¯å¼€æ”¾çš„ç«¯å£ã€‚è¿™å°±ä¸éš¾ç†è§£å„ç§æœåŠ¡ç«¯æ¨é€æŠ€æœ¯äº†ã€‚","like_count":3},{"had_liked":false,"id":137407,"user_name":"å­¦ä¸åŠ¨äº†","can_delete":false,"product_type":"c1","uid":1235562,"ip_address":"","ucode":"6855C982ECC3A8","user_header":"https://static001.geekbang.org/account/avatar/00/12/da/6a/6b96edbd.jpg","comment_is_top":false,"comment_ctime":1569733479,"is_pvip":true,"replies":[{"id":"52895","content":"å¥½é—®é¢˜ï¼Œæ˜¯è¿™æ ·çš„ï¼ŒHTTP&#47;1.1 Comet çš„ä¸€ä¸ªå±€é™æ€§å°±åœ¨è¿™é‡Œï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¼ è¾“æ˜¯å•å·¥çš„ï¼Œä»åè®®çš„è§’åº¦æ¥è¯´ï¼ŒæœåŠ¡ç«¯çš„å“åº”åˆ†å¤šæ¬¡è¿”å›ï¼Œå› æ­¤è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œè¿”å›å¹¶æ²¡æœ‰ä¼ è¾“å®Œï¼Œé‚£ä¹ˆå¯¹äºè¯¥æ¬¡ HTTP è¿æ¥æ¥è¯´ï¼Œå®¢æˆ·ç«¯ä¹Ÿå°±æ— æ³•å‘é€æ–°çš„è¯·æ±‚ã€‚<br><br>å½“ç„¶ï¼Œé™¤äº†å‡çº§åˆ° HTTP&#47;2 æˆ–è€…é‡‡ç”¨å…¶ä»–æŠ€æœ¯ä»¥å¤–ï¼Œå¯¹äºè¿™ä¸ªé—®é¢˜æœ¬èº«ï¼Œè¿˜æ˜¯æœ‰ä¸€äº›æ”¹è¿›åŠæ³•çš„ï¼Œä½ å¯ä»¥æ€è€ƒä¸€ä¸‹ã€‚:)","user_name":"ä½œè€…å›å¤","user_name_real":"å››ç«","uid":"1580075","ctime":1569816620,"ip_address":"","comment_id":137407,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5864700775","product_id":100035501,"comment_content":"è€å¸ˆä½ å¥½ï¼Œæˆ‘æœ‰ä¸ªç–‘é—®ï¼Œæ˜¯å…³äºcomet: å®¢æˆ·ç«¯å¿…é¡»åœ¨æœåŠ¡ç«¯ç»“æŸå½“æ¬¡ä¼ è¾“åæ‰èƒ½å‘æœåŠ¡ç«¯å‘é€æ¶ˆæ¯ï¼ŒæœåŠ¡ç«¯ä¼šé‡‡ç”¨åˆ†å—ä¼ è¾“ï¼Œä¹Ÿå°±æ˜¯&quot;æˆ‘è¯´å®Œä½ å†è¯´&quot;ï¼Œå®¢æˆ·ç«¯è¿™æ—¶å€™æœ‰æ–°çš„è¯·æ±‚å°±åªèƒ½ç­‰ç€æ‰èƒ½å‘é€ï¼Ÿè¦æ˜¯é•¿æ—¶é—´ä¸ç»“æŸå®¢æˆ·ç«¯çš„è¯·æ±‚å°±æ²¡æ³•å‘é€äº†å˜›ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1580075,"avatar":"https://static001.geekbang.org/account/avatar/00/18/1c/2b/2069abe6.jpg","nickname":"å››ç«","note":"","ucode":"E4BED7DCAADD99","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":469074,"discussion_content":"å¥½é—®é¢˜ï¼Œæ˜¯è¿™æ ·çš„ï¼ŒHTTP/1.1 Comet çš„ä¸€ä¸ªå±€é™æ€§å°±åœ¨è¿™é‡Œï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¼ è¾“æ˜¯å•å·¥çš„ï¼Œä»åè®®çš„è§’åº¦æ¥è¯´ï¼ŒæœåŠ¡ç«¯çš„å“åº”åˆ†å¤šæ¬¡è¿”å›ï¼Œå› æ­¤è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œè¿”å›å¹¶æ²¡æœ‰ä¼ è¾“å®Œï¼Œé‚£ä¹ˆå¯¹äºè¯¥æ¬¡ HTTP è¿æ¥æ¥è¯´ï¼Œå®¢æˆ·ç«¯ä¹Ÿå°±æ— æ³•å‘é€æ–°çš„è¯·æ±‚ã€‚\n\nå½“ç„¶ï¼Œé™¤äº†å‡çº§åˆ° HTTP/2 æˆ–è€…é‡‡ç”¨å…¶ä»–æŠ€æœ¯ä»¥å¤–ï¼Œå¯¹äºè¿™ä¸ªé—®é¢˜æœ¬èº«ï¼Œè¿˜æ˜¯æœ‰ä¸€äº›æ”¹è¿›åŠæ³•çš„ï¼Œä½ å¯ä»¥æ€è€ƒä¸€ä¸‹ã€‚:)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569816620,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2063114,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/7b/0a/b65e1fae.jpg","nickname":"ä¸è¦æŒ‘æˆ˜è‡ªå·±çš„æ™ºå•†","note":"","ucode":"4910FF07C35DC5","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":296742,"discussion_content":"æ”¹è¿›åŠæ³•å¯ä»¥è¿™æ ·å—ï¼Ÿå®¢æˆ·ç«¯è¿™æ—¶ä¸»åŠ¨ç»“æŸæ­¤æ¬¡è¿æ¥ï¼Œç„¶åå†é‡æ–°å‘èµ·æ¥ä¸€ä¸ªæ–°è¿æ¥æ¥å‘é€è¿™æ¬¡è¯·æ±‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596637531,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":133765,"user_name":"Chocolate","can_delete":false,"product_type":"c1","uid":1013822,"ip_address":"","ucode":"242CF0E3C10E97","user_header":"https://static001.geekbang.org/account/avatar/00/0f/78/3e/c39d86f1.jpg","comment_is_top":false,"comment_ctime":1568648221,"is_pvip":false,"replies":[{"id":"51365","content":"å¯¹äºå¤§å¤šæ•°åˆ†å¸ƒå¼çš„ç³»ç»Ÿæ¥è¯´ï¼ŒPull ç¡®å®è¦æ¯” Push å®ç°èµ·æ¥æ–¹ä¾¿ä¸€äº›ï¼Œä½†æ˜¯ä¹Ÿä¸ç»å¯¹ã€‚è‡³äºä½ è¯´çš„â€œæ˜¯å¦å¼•å…¥æ–°çš„æ¡†æ¶â€è¿™ä¸ªæè¿°æ¯”è¾ƒæ¨¡ç³Šï¼Œä¸¤ç§æ–¹å¼å’Œæ˜¯å¦å¼•å…¥æ¡†æ¶æ²¡æœ‰å¿…ç„¶è”ç³»ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å››ç«","uid":"1580075","ctime":1568692536,"ip_address":"","comment_id":133765,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5863615517","product_id":100035501,"comment_content":"ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬çš„åå°ç³»ç»Ÿé‡Œçš„äºŒç»´ç æ‰«ç ç™»å½•ç”¨çš„å°±æ˜¯ Pull çš„å½¢å¼ï¼Œæ¯éš”ä¸€æ®µæ—¶é—´å°±å»è½®è¯¢æœ‰æ²¡æœ‰æ‰«ç ï¼Œæœ‰æ²¡æœ‰ç¡®è®¤ç™»å½•ï¼Œå¯¹äºåå°è¿™ç±»ç³»ç»Ÿæ˜¯å¯ä»¥æ»¡è¶³éœ€æ±‚çš„ï¼›åœ¨è°ƒåº¦ç³»ç»Ÿé‡Œçš„çŠ¶æ€å®æ—¶æ¨é€é‡Œç”¨åˆ°äº† WebSocket æŠ€æœ¯ï¼Œå¯ä»¥å®æ—¶åé¦ˆä»»åŠ¡çš„æ‰§è¡Œæƒ…å†µã€‚<br><br>ç¬¬äºŒä¸ªé—®é¢˜ï¼ŒPush æ¨¡å‹çš„ä¼˜åŠ¿æ˜¯é«˜æ•ˆæ€§å’Œå®æ—¶æ€§ï¼ŒPull æ¨¡å‹çš„ä¼˜ç‚¹é™¤äº†æ— çŠ¶æ€å¤–ï¼Œä¼˜åŠ¿å¯èƒ½æ˜¯å®ç°èµ·æ¥æ›´æ–¹ä¾¿ï¼Œä¸ç”¨å¼•å…¥æ–°çš„æ¡†æ¶<br><br>","like_count":1,"discussions":[{"author":{"id":1580075,"avatar":"https://static001.geekbang.org/account/avatar/00/18/1c/2b/2069abe6.jpg","nickname":"å››ç«","note":"","ucode":"E4BED7DCAADD99","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467499,"discussion_content":"å¯¹äºå¤§å¤šæ•°åˆ†å¸ƒå¼çš„ç³»ç»Ÿæ¥è¯´ï¼ŒPull ç¡®å®è¦æ¯” Push å®ç°èµ·æ¥æ–¹ä¾¿ä¸€äº›ï¼Œä½†æ˜¯ä¹Ÿä¸ç»å¯¹ã€‚è‡³äºä½ è¯´çš„â€œæ˜¯å¦å¼•å…¥æ–°çš„æ¡†æ¶â€è¿™ä¸ªæè¿°æ¯”è¾ƒæ¨¡ç³Šï¼Œä¸¤ç§æ–¹å¼å’Œæ˜¯å¦å¼•å…¥æ¡†æ¶æ²¡æœ‰å¿…ç„¶è”ç³»ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568692536,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2063114,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/7b/0a/b65e1fae.jpg","nickname":"ä¸è¦æŒ‘æˆ˜è‡ªå·±çš„æ™ºå•†","note":"","ucode":"4910FF07C35DC5","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":296738,"discussion_content":"å¯¹äºå¤§å¤šæ•°åˆ†å¸ƒå¼çš„ç³»ç»Ÿæ¥è¯´ï¼ŒPull ç¡®å®è¦æ¯” Push å®ç°èµ·æ¥æ–¹ä¾¿ä¸€äº›. è€å¸ˆèƒ½ä¸¾ä¾‹å…·ä½“è§£é‡Šä¸€ä¸‹å—ï¼Ÿè¿˜æ˜¯å¸Œæœ›å¬æ›´å¤šçš„è¿‡ç¨‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596636820,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":133669,"user_name":"è®°å¿†çŠ¹å­˜","can_delete":false,"product_type":"c1","uid":1084441,"ip_address":"","ucode":"8ACCA77CF83F91","user_header":"https://static001.geekbang.org/account/avatar/00/10/8c/19/4e1989bf.jpg","comment_is_top":false,"comment_ctime":1568631103,"is_pvip":false,"replies":[{"id":"51358","content":"æ„Ÿè°¢åˆ†äº«ï¼<br><br>å¯¹äº Push æ¨¡å‹ï¼Œä½ è¯´çš„å†…å®¹éƒ½æ˜¯æ­£ç¡®çš„ï¼Œå°±æä¸€ç‚¹ï¼Œå¯¹äºä½ æåˆ°çš„æ•°æ®åŒ…å †ç§¯å’Œæµæ§çš„é—®é¢˜ï¼Œå¯ä»¥å¼•å…¥ç¬¬ä¸‰æ–¹çš„æ¶ˆæ¯é˜Ÿåˆ—æœåŠ¡æ¥åè°ƒæ¶ˆæ¯å‘å¸ƒè€…å’Œè®¢é˜…è€…ï¼Œæ¥ç¼“è§£ä½ è¯´çš„é—®é¢˜ã€‚<br><br>å¯¹äº Pull æ¨¡å‹ï¼Œâ€œä¼ è¾“å¤±è´¥ä¸ç”¨é‡è¯•â€è¿™ä¸ªä¸å¯¹ï¼Œå› ä¸ºæ˜¯ä¸æ˜¯é‡è¯•å¹¶é Push æˆ– Pull çš„åŒºåˆ«ï¼ŒäºŒè€…éƒ½å¯ä»¥é‡è¯•ï¼Œä¹Ÿéƒ½å¯ä»¥ä¸é‡è¯•ï¼Œå–å†³äºè®¾è®¡ã€‚å…¶å®ƒæ­£ç¡®ã€‚<br><br>å½“ç„¶ï¼Œè¿™æ˜¯ä¸€ä¸ªå¼€æ”¾æ€§é—®é¢˜ï¼Œè¿˜æœ‰å…¶å®ƒçš„ä¼˜ç¼ºç‚¹ï¼Œä½ ä¹Ÿå¯ä»¥çœ‹çœ‹å…¶ä»–äººçš„ç­”å¤ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å››ç«","uid":"1580075","ctime":1568690697,"ip_address":"","comment_id":133669,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5863598399","product_id":100035501,"comment_content":"Push çš„æ¨¡å‹<br>ä¼˜ç‚¹ï¼šå“åº”åŠæ—¶<br>ç¼ºç‚¹ï¼š<br>a.å¦‚æœå®¢æˆ·ç«¯æ¥æ”¶ä¸åŠæ—¶ï¼Œé€ æˆæ•°æ®åŒ…å †ç§¯ï¼›<br>b. éœ€è¦å®¢æˆ·ç«¯åšæµæ§å¤„ç†ï¼›<br><br>Pullæ¨¡å‹<br>ä¼˜ç‚¹ï¼š<br>a. æå–æ¶ˆæ¯æ–¹ä¾¿<br>b. ä¼ è¾“å¤±è´¥ä¸ç”¨é‡è¯•<br>ç¼ºç‚¹ï¼šå®æ—¶æ€§å·®","like_count":1,"discussions":[{"author":{"id":1580075,"avatar":"https://static001.geekbang.org/account/avatar/00/18/1c/2b/2069abe6.jpg","nickname":"å››ç«","note":"","ucode":"E4BED7DCAADD99","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467471,"discussion_content":"æ„Ÿè°¢åˆ†äº«ï¼\n\nå¯¹äº Push æ¨¡å‹ï¼Œä½ è¯´çš„å†…å®¹éƒ½æ˜¯æ­£ç¡®çš„ï¼Œå°±æä¸€ç‚¹ï¼Œå¯¹äºä½ æåˆ°çš„æ•°æ®åŒ…å †ç§¯å’Œæµæ§çš„é—®é¢˜ï¼Œå¯ä»¥å¼•å…¥ç¬¬ä¸‰æ–¹çš„æ¶ˆæ¯é˜Ÿåˆ—æœåŠ¡æ¥åè°ƒæ¶ˆæ¯å‘å¸ƒè€…å’Œè®¢é˜…è€…ï¼Œæ¥ç¼“è§£ä½ è¯´çš„é—®é¢˜ã€‚\n\nå¯¹äº Pull æ¨¡å‹ï¼Œâ€œä¼ è¾“å¤±è´¥ä¸ç”¨é‡è¯•â€è¿™ä¸ªä¸å¯¹ï¼Œå› ä¸ºæ˜¯ä¸æ˜¯é‡è¯•å¹¶é Push æˆ– Pull çš„åŒºåˆ«ï¼ŒäºŒè€…éƒ½å¯ä»¥é‡è¯•ï¼Œä¹Ÿéƒ½å¯ä»¥ä¸é‡è¯•ï¼Œå–å†³äºè®¾è®¡ã€‚å…¶å®ƒæ­£ç¡®ã€‚\n\nå½“ç„¶ï¼Œè¿™æ˜¯ä¸€ä¸ªå¼€æ”¾æ€§é—®é¢˜ï¼Œè¿˜æœ‰å…¶å®ƒçš„ä¼˜ç¼ºç‚¹ï¼Œä½ ä¹Ÿå¯ä»¥çœ‹çœ‹å…¶ä»–äººçš„ç­”å¤ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568690697,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":133466,"user_name":"è¨±æ•²æ•²","can_delete":false,"product_type":"c1","uid":1046681,"ip_address":"","ucode":"6486466820E7BF","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f8/99/8e760987.jpg","comment_is_top":false,"comment_ctime":1568588587,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5863555883","product_id":100035501,"comment_content":"è°¢è°¢è€å¸ˆç»™è¿™ä¹ˆå¤šèµ„æ–™","like_count":1},{"had_liked":false,"id":271191,"user_name":"richie","can_delete":false,"product_type":"c1","uid":1924421,"ip_address":"","ucode":"6923B8707088B8","user_header":"https://static001.geekbang.org/account/avatar/00/1d/5d/45/705dd53c.jpg","comment_is_top":false,"comment_ctime":1609460001,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1609460001","product_id":100035501,"comment_content":"çƒ­æƒ…ä¼¼ç«çš„ä¼˜ç§€","like_count":0},{"had_liked":false,"id":245449,"user_name":"Geek_02f3e8","can_delete":false,"product_type":"c1","uid":2068129,"ip_address":"","ucode":"0DD51EF79A4952","user_header":"","comment_is_top":false,"comment_ctime":1598947228,"is_pvip":false,"replies":[{"id":"90348","content":"èµ","user_name":"ä½œè€…å›å¤","user_name_real":"å››ç«","uid":"1580075","ctime":1599024616,"ip_address":"","comment_id":245449,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1598947228","product_id":100035501,"comment_content":"è€å¸ˆè®²çš„éå¸¸è¯¦ç»†ï¼Œæˆ‘è¿˜æƒ³é¢å¤–è¡¥å……ä¸€ä¸ªæ—¥å¸¸ä½¿ç”¨webcosketæ—¶éœ€è¦æ³¨æ„çš„ç‚¹ã€‚<br>websocketåœ¨è§£é™¤è·¨åŸŸé™åˆ¶çš„åŒæ—¶ï¼Œä¹Ÿäº§ç”Ÿäº†æ–°çš„å®‰å…¨é—®é¢˜ï¼šåœ¨upgradeåˆ°wsåè®®æ—¶ï¼ŒæœåŠ¡ç«¯å¯¹äºoriginå­—æ®µæ ¡éªŒçš„ç¼ºå¤±å¯èƒ½ä¼šå¯¼è‡´websocketè·¨åŸŸåŠ«æŒçš„å®‰å…¨é—®é¢˜ã€‚<br>æ”»å‡»è€…è¯±å¯¼å—å®³è€…ç‚¹å‡»åŒ…å«ä¸€æ®µä»¥wsåè®®å‘é€æŒ‡å®šæ¶æ„å†…å®¹çš„jsçš„é’“é±¼é¡µé¢ï¼Œå³å¯ä»¥å—å®³è€…èº«ä»½å‘é€è¯¥wsæ•°æ®ï¼Œè¿™æ˜¯ä¸€ä¸ªç±»ä¼¼HTTP CSRFçš„é—®é¢˜ï¼šCSWH(Cross-site websocket-hijacking)ã€‚","like_count":1,"discussions":[{"author":{"id":1580075,"avatar":"https://static001.geekbang.org/account/avatar/00/18/1c/2b/2069abe6.jpg","nickname":"å››ç«","note":"","ucode":"E4BED7DCAADD99","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504882,"discussion_content":"èµ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599024616,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":169200,"user_name":"LiYanbin","can_delete":false,"product_type":"c1","uid":1129976,"ip_address":"","ucode":"2F50493F818909","user_header":"https://static001.geekbang.org/account/avatar/00/11/3d/f8/b13674e6.jpg","comment_is_top":false,"comment_ctime":1578291918,"is_pvip":false,"replies":[{"id":"65864","content":"å…¶å®åŸºäº UDP çš„åº”ç”¨å±‚åè®®ä¹Ÿæœ‰ä¸€äº›ï¼Œå¸¸å¬è¯´çš„æ¯”å¦‚æœ‰ DHCPã€‚ä¹‹æ‰€ä»¥æˆ‘ä»¬å¹³æ—¶æ¥è§¦çš„ä¸å¤šï¼Œä¸»è¦è¿˜æ˜¯ç”±å®ƒä»¬çš„ç‰¹ç‚¹æ‰€å†³å®šçš„ï¼Œä½ å¯ä»¥çœ‹ä¸€ä¸‹ https:&#47;&#47;en.wikipedia.org&#47;wiki&#47;User_Datagram_Protocol#Comparison_of_UDP_and_TCP æ¯”å¦‚å…¶ä¸­æåˆ°çš„å¯é æ€§å’Œæœ‰åºæ€§å°±æ˜¯æˆ‘ä»¬ä¸€èˆ¬åº”ç”¨å±‚çš„åŸºæœ¬é€šä¿¡è¦æ±‚ã€‚<br><br>å¦å¤–ä¸€ä¸ªï¼ŒHTTP&#47;3 ä¹Ÿä¼šä½¿ç”¨ UDP ä»£æ›¿ TCPï¼Œä¸»è¦åŸå› è¿˜æ˜¯åœ¨ç‰©ç†è®¾å¤‡æ”¹è¿›ï¼Œä¼ è¾“è´¨é‡æå‡äº†ä»¥åï¼Œå‡ºäºæ€§èƒ½çš„è€ƒè™‘ã€‚å¯ä»¥å‚è§ï¼šhttps:&#47;&#47;thenewstack.io&#47;http-3-replaces-tcp-with-udp-to-boost-network-speed-reliability&#47;","user_name":"ä½œè€…å›å¤","user_name_real":"å››ç«","uid":"1580075","ctime":1578438247,"ip_address":"","comment_id":169200,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1578291918","product_id":100035501,"comment_content":"å¯¹äºæœåŠ¡ç«¯æ¨é€æŠ€æœ¯ï¼Œä¹‹å‰æœ‰è€ƒè™‘è¿‡ï¼Œæœ‰ä¸€ä¸ªç–‘é—®ï¼Œä¸ºä½•å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯ä¸ºä½•ä¸ç›´æ¥é€šè¿‡UDPè¿›è¡Œé€šä¿¡å‘¢ï¼Ÿæ¢å¥è¯è¯´ï¼Œä¸ºä½•åœ¨æœåŠ¡å™¨æ¨é€æŠ€æœ¯ä¸­æ²¡æœ‰ä¸€ç§ æ¯”è¾ƒè¢«å¹¿æ³›åº”ç”¨çš„+åŸºäºUDPçš„ åº”ç”¨å±‚åè®®å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1580075,"avatar":"https://static001.geekbang.org/account/avatar/00/18/1c/2b/2069abe6.jpg","nickname":"å››ç«","note":"","ucode":"E4BED7DCAADD99","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480453,"discussion_content":"å…¶å®åŸºäº UDP çš„åº”ç”¨å±‚åè®®ä¹Ÿæœ‰ä¸€äº›ï¼Œå¸¸å¬è¯´çš„æ¯”å¦‚æœ‰ DHCPã€‚ä¹‹æ‰€ä»¥æˆ‘ä»¬å¹³æ—¶æ¥è§¦çš„ä¸å¤šï¼Œä¸»è¦è¿˜æ˜¯ç”±å®ƒä»¬çš„ç‰¹ç‚¹æ‰€å†³å®šçš„ï¼Œä½ å¯ä»¥çœ‹ä¸€ä¸‹ https://en.wikipedia.org/wiki/User_Datagram_Protocol#Comparison_of_UDP_and_TCP æ¯”å¦‚å…¶ä¸­æåˆ°çš„å¯é æ€§å’Œæœ‰åºæ€§å°±æ˜¯æˆ‘ä»¬ä¸€èˆ¬åº”ç”¨å±‚çš„åŸºæœ¬é€šä¿¡è¦æ±‚ã€‚\n\nå¦å¤–ä¸€ä¸ªï¼ŒHTTP/3 ä¹Ÿä¼šä½¿ç”¨ UDP ä»£æ›¿ TCPï¼Œä¸»è¦åŸå› è¿˜æ˜¯åœ¨ç‰©ç†è®¾å¤‡æ”¹è¿›ï¼Œä¼ è¾“è´¨é‡æå‡äº†ä»¥åï¼Œå‡ºäºæ€§èƒ½çš„è€ƒè™‘ã€‚å¯ä»¥å‚è§ï¼šhttps://thenewstack.io/http-3-replaces-tcp-with-udp-to-boost-network-speed-reliability/","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578438247,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":151988,"user_name":"ğŸ’¢ æ˜Ÿæ˜ŸğŸ’¢","can_delete":false,"product_type":"c1","uid":1254392,"ip_address":"","ucode":"A402B765222C35","user_header":"https://static001.geekbang.org/account/avatar/00/13/23/f8/24fcccea.jpg","comment_is_top":false,"comment_ctime":1573828946,"is_pvip":false,"replies":[{"id":"58436","content":"æœ€ä½³å®è·µé‚£ä¸€ç« çš„æœ€åä¸€ç¯‡ç‰¹åˆ«æ”¾é€ï¼Œæˆ‘ä¼šè®²ä¸€è®²ç¨‹åºå‘˜æ€ä¹ˆå­¦è‹±è¯­ã€‚å¯ä»¥æœŸå¾…ä¸€ä¸‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å››ç«","uid":"1580075","ctime":1573841712,"ip_address":"","comment_id":151988,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1573828946","product_id":100035501,"comment_content":"è€å¸ˆæˆ‘çœ‹ä¸æ‡‚è‹±æ–‡èµ„æ–™ï¼Œæ˜¯ä¸æ˜¯å¤šçœ‹çœ‹å°±ä¼šæœ‰æ„Ÿè§‰äº†ï¼Ÿæœ‰æ²¡æœ‰å•¥ç§˜è¯€ã€‚ã€‚ã€‚","like_count":0,"discussions":[{"author":{"id":1580075,"avatar":"https://static001.geekbang.org/account/avatar/00/18/1c/2b/2069abe6.jpg","nickname":"å››ç«","note":"","ucode":"E4BED7DCAADD99","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":474679,"discussion_content":"æœ€ä½³å®è·µé‚£ä¸€ç« çš„æœ€åä¸€ç¯‡ç‰¹åˆ«æ”¾é€ï¼Œæˆ‘ä¼šè®²ä¸€è®²ç¨‹åºå‘˜æ€ä¹ˆå­¦è‹±è¯­ã€‚å¯ä»¥æœŸå¾…ä¸€ä¸‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573841712,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":143688,"user_name":"liansng","can_delete":false,"product_type":"c1","uid":1013051,"ip_address":"","ucode":"6BA073817E5D08","user_header":"https://static001.geekbang.org/account/avatar/00/0f/75/3b/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1571756292,"is_pvip":false,"replies":[{"id":"55656","content":"è¿™æ˜¯ä½ æ‰“å¼€ https:&#47;&#47;www.websocket.org&#47;echo.html çš„æ—¶å€™ï¼Œå®ƒå·²ç»é»˜è®¤å¸®ä½ å¡«å¥½çš„å†…å®¹","user_name":"ä½œè€…å›å¤","user_name_real":"å››ç«","uid":"1580075","ctime":1571894467,"ip_address":"","comment_id":143688,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1571756292","product_id":100035501,"comment_content":"<br>Location:<br>wss:&#47;&#47;echo.websocket.org<br>Message:<br>Rock it with HTML5 WebSocket<br><br>è¿™ä¸ªçš„æ“ä½œæ–¹å¼æˆ‘æ²¡å¤ªçœ‹æ‡‚ï¼Œè€å¸ˆå¯ä»¥å¸®å¿™è§£é‡Šä¸€ä¸‹å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1580075,"avatar":"https://static001.geekbang.org/account/avatar/00/18/1c/2b/2069abe6.jpg","nickname":"å››ç«","note":"","ucode":"E4BED7DCAADD99","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":471653,"discussion_content":"è¿™æ˜¯ä½ æ‰“å¼€ https://www.websocket.org/echo.html çš„æ—¶å€™ï¼Œå®ƒå·²ç»é»˜è®¤å¸®ä½ å¡«å¥½çš„å†…å®¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571894467,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":141560,"user_name":"vip3","can_delete":false,"product_type":"c1","uid":1317600,"ip_address":"","ucode":"2523A7625E0D92","user_header":"","comment_is_top":false,"comment_ctime":1571191082,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1571191082","product_id":100035501,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œè¯·æ•™ä¸ªé—®é¢˜ã€‚<br><br>æˆ‘æƒ³è®©padå’ŒPCä¹‹ä¸Šçš„ä¸¤ä¸ªåº”ç”¨å…¨åŒå·¥é€šä¿¡ï¼Œæƒ³åˆ°ä¸¤ç§åŠæ³•ã€‚<br><br>ä¸€æ˜¯å’ŒæœåŠ¡å™¨å»ºç«‹websocketè¿æ¥ï¼Œè®©å…¶ä½œä¸ºé€šè®¯çš„ä¸­è½¬ï¼Œä½†æ˜¯è¿™ç§æ–¹æ³•ç½‘ç»œä¸å¥½çš„æƒ…å†µä¸‹å®¹æ˜“æŒ‚æ‰ï¼›<br><br>ä¸ºäº†è§£å†³åŠæ³•ä¸€çš„é—®é¢˜ï¼Œæƒ³äº†ç¬¬äºŒä¸ªæ–¹æ³•ï¼Œåœ¨PCä¸Šå¯åŠ¨ä¸€ä¸ªwebsocket serverï¼Œè®©padåº”ç”¨ä¸PCåº”ç”¨å†…å¯çš„è¿™ä¸ªserverå»ºç«‹è¿æ¥ï¼Œå®ç°å±€åŸŸç½‘å†…éƒ¨å…¨åŒå·¥é€šä¿¡ï¼Œä½†è¿™æœ‰ä¸ªé™åˆ¶ï¼Œå¿…é¡»è¦æ±‚padå’ŒPCè¿åˆ°åŒä¸€å±€åŸŸç½‘ä¸‹ã€‚ä½†æ˜¯å› ä¸ºPCå¯èƒ½è¿æ¥ç€ç½‘çº¿ï¼Œä¹Ÿå¯èƒ½åœ¨ç”¨æ— çº¿ç½‘ç»œï¼Œä¸”æ— çº¿ç½‘ç»œä¸æ­¢ä¸€ä¸ªï¼Œæˆ‘æ£€æµ‹ä¸å‡ºæ¥PCå’Œpadè¿æ¥çš„æ˜¯å¦æ˜¯åŒä¸€å­ç½‘ã€‚<br><br>æ‰€ä»¥æƒ³é—®é—®è€å¸ˆï¼Œæœ‰æ²¡æœ‰ä»€ä¹ˆåŠæ³•èƒ½è§£å†³ä¸Šè¿°ä¸¤ä¸ªåŠæ³•çš„é—®é¢˜ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1435733,"avatar":"https://static001.geekbang.org/account/avatar/00/15/e8/55/92f82281.jpg","nickname":"MClink","note":"","ucode":"F479190923355C","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":289890,"discussion_content":"æ ¹æ®IPä¸å°±å¯ä»¥åˆ¤æ–­äº†å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594259371,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":136170,"user_name":"CC","can_delete":false,"product_type":"c1","uid":1021014,"ip_address":"","ucode":"2B732860C4231B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/94/56/4b8395f6.jpg","comment_is_top":false,"comment_ctime":1569376689,"is_pvip":true,"replies":[{"id":"52464","content":"ğŸ‘ï¼Œä½ ä¹Ÿå¯ä»¥çœ‹çœ‹å…¶ä»–å›ç­”","user_name":"ä½œè€…å›å¤","user_name_real":"å››ç«","uid":"1580075","ctime":1569510619,"ip_address":"","comment_id":136170,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1569376689","product_id":100035501,"comment_content":"æ€è€ƒé¢˜ 1ï¼š<br><br>å·¥ä½œä¸­ä¸»è¦ç”¨åˆ° Pullï¼Œè¿˜æ²¡æœ‰ä½¿ç”¨åˆ° Pushã€‚<br><br><br><br>æ€è€ƒé¢˜ 2ï¼š<br><br>Push çš„ä¼˜åŠ¿è¿˜æœ‰ï¼š<br>- å®¢æˆ·ç«¯å¯ä»¥æå‰ cache push è¿‡æ¥çš„å†…å®¹ï¼Œåœ¨å…¶ä»–é¡µé¢ä¸Šä½¿ç”¨ã€‚<br>- æœåŠ¡ç«¯å¯ä»¥å†³å®š push çš„ä¼˜å…ˆçº§ï¼ŒæŠŠå½±å“ performance çš„é‡è¦èµ„æºä¼˜å…ˆ pushã€‚<br>- å®¢æˆ·ç«¯å¯ä»¥æ ¹æ®è‡ªå·±çš„æƒ…å†µï¼Œé€‰æ‹©æ˜¯å¦æ¥å— pushï¼Œæˆ–è€…é™åˆ¶æ•°é‡ã€‚<br><br><br>Pull çš„ stateless å¸¦æ¥çš„ä¼˜åŠ¿å¼ºå¤§ï¼Œå…¶ä»–çš„ä¼˜åŠ¿è¿˜æ²¡æœ‰æŸ¥åˆ°ã€‚<br><br>","like_count":0,"discussions":[{"author":{"id":1580075,"avatar":"https://static001.geekbang.org/account/avatar/00/18/1c/2b/2069abe6.jpg","nickname":"å››ç«","note":"","ucode":"E4BED7DCAADD99","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468492,"discussion_content":"ğŸ‘ï¼Œä½ ä¹Ÿå¯ä»¥çœ‹çœ‹å…¶ä»–å›ç­”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569510619,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":135793,"user_name":"pyhhou","can_delete":false,"product_type":"c1","uid":1256496,"ip_address":"","ucode":"31EF8D50CF91A5","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/ibZVAmmdAibBeVpUjzwId8ibgRzNk7fkuR5pgVicB5mFSjjmt2eNadlykVLKCyGA0GxGffbhqLsHnhDRgyzxcKUhjg/132","comment_is_top":false,"comment_ctime":1569281232,"is_pvip":false,"replies":[{"id":"52090","content":"æ„Ÿè°¢å›å¤ã€‚<br><br>1. æ­£ç¡®ã€‚<br><br>2. ä¸ä¸€å®šã€‚è€Œä¸”å³ä¾¿å®¢æˆ·ç«¯éœ€è¦ä¿æŒæœåŠ¡ç«¯çŠ¶æ€ï¼Œä¹Ÿæ¯”æœåŠ¡ç«¯ä¿æŒå®¢æˆ·ç«¯çŠ¶æ€ï¼Œè¦ç®€å•å¾—å¤šï¼ˆæ•°é‡ä¸Šæ˜¯ 1 å’Œ N çš„å…³ç³»ï¼Œåœ¨æ¨ªå‘æ‰©å±•çš„æ—¶å€™ï¼Œè¿™ä¸ª N å°±å¯èƒ½æˆä¸ºç“¶é¢ˆï¼‰<br><br>ä½ è¯´çš„è¿™ä¸ª push-pull ç»“åˆçš„æ–¹å¼å¾ˆå¥½ï¼Œå…¶å®å®ƒæ˜¯ä¸€ç§éå¸¸å¸¸è§çš„å®ç°æ–¹å¼ï¼Œä½ å¯ä»¥æƒ³æƒ³äº’è”ç½‘æœ‰å“ªäº›åº”ç”¨ã€‚:)","user_name":"ä½œè€…å›å¤","user_name_real":"å››ç«","uid":"1580075","ctime":1569298743,"ip_address":"","comment_id":135793,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1569281232","product_id":100035501,"comment_content":"æ€è€ƒé¢˜ï¼š<br>1. åœ¨å®é™…çš„é¡¹ç›®ä¸­ç”¨ pull çš„ä¾‹å­æ¯”è¾ƒå¤šï¼Œæ²¡æ€ä¹ˆæ¥è§¦è¿‡ pushï¼Œæ„Ÿè§‰ä¸Š push çš„è¯æ˜¯ä¸æ˜¯ä¼šç›¸å¯¹æ¥è¯´å¤æ‚äº›ï¼Œå› ä¸ºè¦ç»´æŠ¤ä¸åŒ client çš„çŠ¶æ€ï¼›ç›¸å¯¹æ¥è¯´ pull çš„è¯ï¼Œåªç”¨åŸºäº request å‚æ•°åšç›¸åº”çš„ response å³å¯<br><br>2. è¿™é‡Œæˆ‘åœ¨æƒ³ï¼Œpull çš„æ— çŠ¶æ€ä¼˜åŠ¿åªæ˜¯å¯¹äºæœåŠ¡å™¨ç«¯æ¥è¯´çš„ï¼Œå¦‚æœåœ¨å®¢æˆ·ç«¯ï¼Œå¯¹äº pull æ¥è¯´ï¼Œæ˜¯ä¸æ˜¯éœ€è¦ä¿å­˜æœåŠ¡å™¨çš„çŠ¶æ€ï¼Ÿå¦å¤–ï¼Œç”±äº push æ˜¯æœ‰çŠ¶æ€çš„ï¼Œé‚£ä¹ˆçŠ¶æ€åœ¨æœåŠ¡å™¨ä¸Šçš„å­˜å‚¨ä¼šä¸ä¼šæˆä¸ºä¸€ä¸ªéš¾é¢˜ï¼Ÿä»åˆ†ææ¥çœ‹ï¼Œpull çš„ç¼ºç‚¹æ˜¯ push çš„ä¼˜ç‚¹ï¼Œpush çš„ç¼ºç‚¹åˆæ˜¯ pull çš„ä¼˜ç‚¹ï¼Œæˆ‘æƒ³åˆ°äº†å‰ä¸€ç« æˆ‘ä»¬è®²è¿‡å¯¹ç§°åŠ å¯†å’Œéå¯¹ç§°åŠ å¯†ï¼Œå¯¹ç§°åŠ å¯†é«˜æ•ˆä½†æ˜¯ key ä¸æ˜“åˆ†äº«ï¼Œéå¯¹ç§°åŠ å¯† key æ˜“åˆ†äº«ä½†æ˜¯ä¸é«˜æ•ˆï¼Œå› æ­¤ HTTPS å°†ä»–ä»¬ä¸¤ä¸ªåšäº†ä¸ªç»“åˆã€‚è¿™é‡Œæˆ–è®¸æˆ‘ä»¬ä¹Ÿå¯ä»¥å°† push å’Œ pull ç»“åˆèµ·æ¥ä½¿ç”¨ï¼Œæ¯”å¦‚ï¼Œæ¶ˆæ¯æ›´æ–°çš„æ—¶å€™ï¼ŒæœåŠ¡å™¨ç«¯ä½¿ç”¨ push é€šçŸ¥å®¢æˆ·ç«¯æ›´æ–°èµ„æºï¼Œç„¶åå®¢æˆ·ç«¯ä½¿ç”¨ pull è·å–èµ„æºï¼Œè¿™æ ·ä¼šä¸ä¼šæ¯”å•ä¸€ä½¿ç”¨ pull æˆ– push æ›´å¥½ï¼Ÿ<br><br>å¾ˆèµåŒè€å¸ˆè¯´çš„ï¼Œå­¦ä¹ å°±æ˜¯éœ€è¦å»ç”¨è‡ªå·±å­¦è¿‡çš„ä¸œè¥¿å¯¹æ¯”ç†è§£å’Œåˆ†ææ–°å­¦çš„ä¸œè¥¿ï¼Œæ·±åº¦ç†è§£ä»–ä»¬çš„æœ¬è´¨æ€æƒ³ï¼Œä»¥åŠåŒºåˆ«å’Œå…±åŒç‚¹ï¼Œè¿™æ ·æ‰èƒ½å½¢æˆçŸ¥è¯†ä½“ç³»ï¼Œè¿™ä¼šå¯¹æ–°çŸ¥è¯†çš„æŒæ¡æ›´å¿«ï¼Œå¯¹æŠ€æœ¯ä¹Ÿä¼šæœ‰æ›´é«˜ç»´åº¦çš„è®¤è¯†<br><br>å…³äºå­¦ä¹ å…¨æ ˆä¸“æ çš„è®¤è¯†ï¼š<br>å­¦å®Œäº†è¿™å‡ ç« ï¼Œæ„Ÿè§‰è‡ªå·±çŸ¥é“çš„ä¸œè¥¿è¿˜æ˜¯å¤ªå°‘ï¼Œè€å¸ˆæ¨èçš„æ–‡ç« éƒ½å¾ˆå¥½ï¼Œä¹Ÿå¾ˆæœ‰æ·±åº¦ï¼Œä½†æ˜¯æœ‰äº›æ–‡ç« çœŸçš„æ²¡æœ‰æ—¶é—´å»ä»”ç»†æ¨æ•²ï¼Œæˆ‘åœ¨æƒ³ï¼Œå…ˆæŠŠæ•´ä¸ªä¸“æ è·Ÿä¸‹æ¥ï¼Œå¯¹å…¨æ ˆçŸ¥è¯†æœ‰ä¸ªå®è§‚çš„è®¤è¯†ï¼Œç„¶ååœ¨ä»”ç»†é˜…è¯»è¿™äº›è‘—ä½œï¼Œè€å¸ˆä½ è§‰å¾—è¿™æ ·æ˜¯å¦å¯è¡Œå‘¢ï¼Ÿ<br><br>æ”¶è·å¾ˆå¤šï¼Œè°¢è°¢è€å¸ˆ","like_count":0,"discussions":[{"author":{"id":1580075,"avatar":"https://static001.geekbang.org/account/avatar/00/18/1c/2b/2069abe6.jpg","nickname":"å››ç«","note":"","ucode":"E4BED7DCAADD99","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468344,"discussion_content":"æ„Ÿè°¢å›å¤ã€‚\n\n1. æ­£ç¡®ã€‚\n\n2. ä¸ä¸€å®šã€‚è€Œä¸”å³ä¾¿å®¢æˆ·ç«¯éœ€è¦ä¿æŒæœåŠ¡ç«¯çŠ¶æ€ï¼Œä¹Ÿæ¯”æœåŠ¡ç«¯ä¿æŒå®¢æˆ·ç«¯çŠ¶æ€ï¼Œè¦ç®€å•å¾—å¤šï¼ˆæ•°é‡ä¸Šæ˜¯ 1 å’Œ N çš„å…³ç³»ï¼Œåœ¨æ¨ªå‘æ‰©å±•çš„æ—¶å€™ï¼Œè¿™ä¸ª N å°±å¯èƒ½æˆä¸ºç“¶é¢ˆï¼‰\n\nä½ è¯´çš„è¿™ä¸ª push-pull ç»“åˆçš„æ–¹å¼å¾ˆå¥½ï¼Œå…¶å®å®ƒæ˜¯ä¸€ç§éå¸¸å¸¸è§çš„å®ç°æ–¹å¼ï¼Œä½ å¯ä»¥æƒ³æƒ³äº’è”ç½‘æœ‰å“ªäº›åº”ç”¨ã€‚:)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569298743,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1256496,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/ibZVAmmdAibBeVpUjzwId8ibgRzNk7fkuR5pgVicB5mFSjjmt2eNadlykVLKCyGA0GxGffbhqLsHnhDRgyzxcKUhjg/132","nickname":"pyhhou","note":"","ucode":"31EF8D50CF91A5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":20713,"discussion_content":"ä¸€ä¸ªä¹‹å‰çœ‹åˆ°çš„å¾®åšçš„ä¾‹å­ï¼Œå¾®åšä¸­æœ‰å…³æ³¨è€…ï¼ˆç²‰ä¸ï¼‰å’Œè¢«å…³æ³¨è€…ï¼Œpush å°±æ˜¯è¯´è¢«å…³æ³¨è€…æ¯å‘ä¸€ä¸ªåŠ¨æ€ï¼ŒæœåŠ¡å™¨å°±ä¼šå°†åŠ¨æ€æ¨é€åˆ°å…³æ³¨è€…è¿™è¾¹ï¼›pull å°±æ˜¯å…³æ³¨è€…ä¸»åŠ¨å»å–è¢«å…³æ³¨è€…çš„åŠ¨æ€ã€‚å¯¹äºæ˜æ˜Ÿç”¨æˆ·æ¥è¯´ï¼Œå…³æ³¨è€…ç‰¹åˆ«å¤šï¼Œpush åœ¨è¿™ä¸ªæ—¶å€™å®ç°åŠ¨æ€æ›´æ–°çš„å‘é€å°±ä¼šé‡åˆ°éš¾é¢˜ï¼Œå¦ä¸€æ–¹é¢ï¼Œå¯¹äº pull æ¥è¯´ï¼Œå¦‚æœç”¨æˆ·é‡ä¸Šæ¥çš„è¯ï¼Œä¼šæœ‰ä¸€ä¸ªæœåŠ¡å™¨æ•°æ®åº“é«˜é¢‘ç‡è¯»å–çš„é—®é¢˜ï¼Œæœ‰æ—¶å€™å®æ—¶æ€§æ²¡æœ‰åŠæ³•ä¿è¯ã€‚æˆ–è®¸åœ¨è¿™ä¸ªæ—¶å€™ push + pull ä¸å¤±ä¸ºä¸€ä¸ªå¯ä»¥è€ƒè™‘çš„æ–¹å‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569351828,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":135303,"user_name":"jxs1211","can_delete":false,"product_type":"c1","uid":1101006,"ip_address":"","ucode":"B7F1F2D84389E7","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKELX1Rd1vmLRWibHib8P95NA87F4zcj8GrHKYQL2RcLDVnxNy1ia2geTWgW6L2pWn2kazrPNZMRVrIg/132","comment_is_top":false,"comment_ctime":1569121552,"is_pvip":false,"replies":[{"id":"51925","content":"ä½ å¯ä»¥è‡ªå·±å°è¯•å®ç°ä¸€ä¸ªæœ€ç®€å•çš„ Cometï¼š<br><br>å®¢æˆ·ç«¯ï¼Œä½ ç”šè‡³éƒ½ä¸ç”¨å†™ JavaScriptï¼Œä¸€ä¸ªæ™®é€šçš„ get è¯·æ±‚å³å¯â€”â€”æµè§ˆå™¨ç›´æ¥è®¿é—®æŸä¸€ä¸ªæœåŠ¡ç«¯æš´éœ²çš„æ¥å£ï¼ˆURLï¼‰ã€‚<br><br>æœåŠ¡ç«¯åˆ™æ˜¯å¾€å“åº”ä¸­å†™æ•°æ®ï¼Œä½¿ç”¨æŒ‰å—ä¼ è¾“ï¼Œè¿”å›ç±»å‹è®¾ç½®ä¸º plain&#47;textï¼Œéšä¾¿å†™ä¸€ç‚¹æ•°æ®å¹¶ flushï¼Œç„¶å sleep 10 ç§’ï¼Œå†å†™ä¸€ç‚¹å¹¶ flushï¼Œå† sleep 10 ç§’ï¼Œå¦‚æ˜¯å¤šæ¬¡ï¼Œè¿™æ ·å¯ä»¥æ¨¡æ‹Ÿå¤šæ¬¡è¿”å›ã€‚<br><br>è¿™æ ·ï¼Œä½ ä¼šçœ‹åˆ°æµè§ˆå™¨ä¸€ç›´åœ¨åŠ è½½ï¼Œé¡µé¢åç§’åç§’åœ°æ–°å¢æ–°çš„å†…å®¹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å››ç«","uid":"1580075","ctime":1569174767,"ip_address":"","comment_id":135303,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1569121552","product_id":100035501,"comment_content":"è¯·é—®ä»Šå¤©çš„è¯¾å ‚å®ä¾‹å¦‚æœè¦è‡ªå·±ç”¨ä»£ç æ¥å®ç°ï¼Œå‰åæ®µä»£ç æ˜¯å¦æœ‰ç›¸å…³çš„å®ä¾‹ä»£ç å¯ä»¥åšå‚è€ƒï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1580075,"avatar":"https://static001.geekbang.org/account/avatar/00/18/1c/2b/2069abe6.jpg","nickname":"å››ç«","note":"","ucode":"E4BED7DCAADD99","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468134,"discussion_content":"ä½ å¯ä»¥è‡ªå·±å°è¯•å®ç°ä¸€ä¸ªæœ€ç®€å•çš„ Cometï¼š\n\nå®¢æˆ·ç«¯ï¼Œä½ ç”šè‡³éƒ½ä¸ç”¨å†™ JavaScriptï¼Œä¸€ä¸ªæ™®é€šçš„ get è¯·æ±‚å³å¯â€”â€”æµè§ˆå™¨ç›´æ¥è®¿é—®æŸä¸€ä¸ªæœåŠ¡ç«¯æš´éœ²çš„æ¥å£ï¼ˆURLï¼‰ã€‚\n\næœåŠ¡ç«¯åˆ™æ˜¯å¾€å“åº”ä¸­å†™æ•°æ®ï¼Œä½¿ç”¨æŒ‰å—ä¼ è¾“ï¼Œè¿”å›ç±»å‹è®¾ç½®ä¸º plain/textï¼Œéšä¾¿å†™ä¸€ç‚¹æ•°æ®å¹¶ flushï¼Œç„¶å sleep 10 ç§’ï¼Œå†å†™ä¸€ç‚¹å¹¶ flushï¼Œå† sleep 10 ç§’ï¼Œå¦‚æ˜¯å¤šæ¬¡ï¼Œè¿™æ ·å¯ä»¥æ¨¡æ‹Ÿå¤šæ¬¡è¿”å›ã€‚\n\nè¿™æ ·ï¼Œä½ ä¼šçœ‹åˆ°æµè§ˆå™¨ä¸€ç›´åœ¨åŠ è½½ï¼Œé¡µé¢åç§’åç§’åœ°æ–°å¢æ–°çš„å†…å®¹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569174767,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":134363,"user_name":"sky","can_delete":false,"product_type":"c1","uid":1583321,"ip_address":"","ucode":"29692959077496","user_header":"https://static001.geekbang.org/account/avatar/00/18/28/d9/78dfd983.jpg","comment_is_top":false,"comment_ctime":1568813403,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1568813403","product_id":100035501,"comment_content":"ä¹‹å‰ä¸€ä¸ªé¡¹ç›®ä¸­IMæ˜¯ç”¨websocketå®ç°çš„ã€‚","like_count":0},{"had_liked":false,"id":133885,"user_name":"é äººå“å»èµ¢","can_delete":false,"product_type":"c1","uid":1301286,"ip_address":"","ucode":"7A20F9EBE847E1","user_header":"https://static001.geekbang.org/account/avatar/00/13/db/26/54f2c164.jpg","comment_is_top":false,"comment_ctime":1568690741,"is_pvip":false,"replies":[{"id":"51368","content":"HTTP&#47;2 ç¡®å®æœ‰äº†ä¸“é—¨çš„ server pushï¼Œä½†è¿™ä¸ªæœ€ä¸»è¦ç”¨æ¥è§£å†³èµ„æºçš„é¢„åŠ è½½é—®é¢˜ã€‚å› æ­¤ï¼Œå¦‚æœè¦å®Œå…¨æ›¿ä»£ Cometï¼Œå®ç°ä»»æ„æ—¶åˆ»çš„æ¨é€ï¼Œå¯ä»¥ä½¿ç”¨ SSE ç­‰æŠ€æœ¯ï¼Œæˆ–è€…æ˜¯å°† server push å’Œ SSE ç­‰æŠ€æœ¯ç»“åˆèµ·æ¥ï¼ˆå³è®©æµè§ˆå™¨ç«¯é¢„ç•™ä¸€ä¸ªå›è°ƒæ¥å“åº”æœåŠ¡ç«¯çš„æ¨é€ï¼‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å››ç«","uid":"1580075","ctime":1568695588,"ip_address":"","comment_id":133885,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1568690741","product_id":100035501,"comment_content":"è€å¸ˆä½ å¥½ï¼Œæ–‡ç« å†™çš„çœŸå¥½ï¼Ÿä½†æ˜¯æˆ‘æœ‰ç‚¹ç–‘é—®ï¼Œå°±æ˜¯çœ‹cometæ˜¯ä¸€ä¸ªå•å·¥çš„ï¼Œä¹Ÿå°±æ˜¯â€œæˆ‘è¯´å®Œäº†ï¼Œä½ å†è¯´â€ã€‚ä½†æ˜¯ä»–è¿˜æ˜¯ä¸€ä¸ªåŸºäºHTTPåè®®çš„ï¼Œæˆ‘çš„ç†è§£å°±æ˜¯keep-aliveã€‚é‚£é—®é¢˜æ¥äº†æˆ‘è¦æ˜¯ç”¨HTTP2.0çš„è¯æ˜¯ä¸æ˜¯å¯ä»¥æŠŠcometè½¬åŒ–ä¸ºåŒå·¥çš„å‘¢ï¼Œå› ä¸ºHTTP2.0æ˜¯åŒå·¥é€šè®¯ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1580075,"avatar":"https://static001.geekbang.org/account/avatar/00/18/1c/2b/2069abe6.jpg","nickname":"å››ç«","note":"","ucode":"E4BED7DCAADD99","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467544,"discussion_content":"HTTP/2 ç¡®å®æœ‰äº†ä¸“é—¨çš„ server pushï¼Œä½†è¿™ä¸ªæœ€ä¸»è¦ç”¨æ¥è§£å†³èµ„æºçš„é¢„åŠ è½½é—®é¢˜ã€‚å› æ­¤ï¼Œå¦‚æœè¦å®Œå…¨æ›¿ä»£ Cometï¼Œå®ç°ä»»æ„æ—¶åˆ»çš„æ¨é€ï¼Œå¯ä»¥ä½¿ç”¨ SSE ç­‰æŠ€æœ¯ï¼Œæˆ–è€…æ˜¯å°† server push å’Œ SSE ç­‰æŠ€æœ¯ç»“åˆèµ·æ¥ï¼ˆå³è®©æµè§ˆå™¨ç«¯é¢„ç•™ä¸€ä¸ªå›è°ƒæ¥å“åº”æœåŠ¡ç«¯çš„æ¨é€ï¼‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568695588,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":133696,"user_name":"å››å–œ","can_delete":false,"product_type":"c1","uid":1071389,"ip_address":"","ucode":"C5EBED19C0F332","user_header":"https://static001.geekbang.org/account/avatar/00/10/59/1d/c89abcd8.jpg","comment_is_top":false,"comment_ctime":1568638170,"is_pvip":false,"replies":[{"id":"51359","content":"éå¸¸å¥½çš„é—®é¢˜ï¼<br><br>æ˜¯çš„ï¼Œå®Œå…¨æ­£ç¡®ã€‚ä½ å¯ä»¥è€ƒè™‘è¿™æ ·å‡ ç‚¹ï¼š<br>1. å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ï¼Œè¿˜æœ‰ç½‘å…³ç­‰ä¸­é—´èŠ‚ç‚¹ï¼Œéƒ½è¦å•†å®šå¥½ä¸€ä¸ªæœ€å¤§çš„è¶…æ—¶æ—¶é—´ã€‚å¹¶ä¸”ï¼Œä¸šåŠ¡ç«¯é…ç½®çš„è¶…æ—¶æ—¶é—´è¦ç¨çŸ­äºå…¶å®ƒï¼Œä»¥ç•™è¶³ä½™é‡ã€‚<br>2. æœåŠ¡ç«¯å³ä¾¿æ²¡æœ‰æ¶ˆæ¯éœ€è¦æ¨é€ï¼Œä¹Ÿè¦å®šæœŸè¿”å›ä¸€ä¸ªæ— ä¸šåŠ¡æ„ä¹‰çš„æ¶ˆæ¯ï¼Œä»¥é¿å…è¶…æ—¶å‘ç”Ÿã€‚<br>3. å®¢æˆ·ç«¯å¦‚æœåœ¨è‹¥å¹²ä¸ªæ¨é€å‘¨æœŸåï¼Œå¯ä»¥ç»“æŸè¿æ¥ï¼Œä¼‘æ¯ä¸€æ®µæ—¶é—´ï¼Œå†é‡æ–°è¿æ¥ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å››ç«","uid":"1580075","ctime":1568691028,"ip_address":"","comment_id":133696,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1568638170","product_id":100035501,"comment_content":"è€å¸ˆè®²å¾—çœŸå¥½ã€‚<br><br>æé—®ğŸ™‹ï¼ŒCometè¿™ç§å‡PUSHæ–¹å¼ï¼Œç”±å®¢æˆ·ç«¯å‘èµ·çš„HTTPè¯·æ±‚æœåŠ¡å™¨ä¸é‡Šæ”¾ï¼Œä½†æ˜¯ä¼šå—è¶…æ—¶é™åˆ¶å§ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1580075,"avatar":"https://static001.geekbang.org/account/avatar/00/18/1c/2b/2069abe6.jpg","nickname":"å››ç«","note":"","ucode":"E4BED7DCAADD99","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467475,"discussion_content":"éå¸¸å¥½çš„é—®é¢˜ï¼\n\næ˜¯çš„ï¼Œå®Œå…¨æ­£ç¡®ã€‚ä½ å¯ä»¥è€ƒè™‘è¿™æ ·å‡ ç‚¹ï¼š\n1. å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ï¼Œè¿˜æœ‰ç½‘å…³ç­‰ä¸­é—´èŠ‚ç‚¹ï¼Œéƒ½è¦å•†å®šå¥½ä¸€ä¸ªæœ€å¤§çš„è¶…æ—¶æ—¶é—´ã€‚å¹¶ä¸”ï¼Œä¸šåŠ¡ç«¯é…ç½®çš„è¶…æ—¶æ—¶é—´è¦ç¨çŸ­äºå…¶å®ƒï¼Œä»¥ç•™è¶³ä½™é‡ã€‚\n2. æœåŠ¡ç«¯å³ä¾¿æ²¡æœ‰æ¶ˆæ¯éœ€è¦æ¨é€ï¼Œä¹Ÿè¦å®šæœŸè¿”å›ä¸€ä¸ªæ— ä¸šåŠ¡æ„ä¹‰çš„æ¶ˆæ¯ï¼Œä»¥é¿å…è¶…æ—¶å‘ç”Ÿã€‚\n3. å®¢æˆ·ç«¯å¦‚æœåœ¨è‹¥å¹²ä¸ªæ¨é€å‘¨æœŸåï¼Œå¯ä»¥ç»“æŸè¿æ¥ï¼Œä¼‘æ¯ä¸€æ®µæ—¶é—´ï¼Œå†é‡æ–°è¿æ¥ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568691028,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":133551,"user_name":"è®¸ç«¥ç«¥","can_delete":false,"product_type":"c1","uid":1003005,"ip_address":"","ucode":"4B799C0C6BC678","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4d/fd/0aa0e39f.jpg","comment_is_top":false,"comment_ctime":1568603143,"is_pvip":false,"replies":[{"id":"51333","content":"è°¢è°¢ã€‚<br>å¾ˆå¤šæŠ€æœ¯éƒ½æ˜¯ç›¸é€šçš„ï¼Œå­¦ä¹ å…¨æ ˆæŠ€æœ¯éƒ½æ˜¯å¯ä»¥ç”¨ç±»æ¯”çš„æ–¹å¼è¿›è¡Œçš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å››ç«","uid":"1580075","ctime":1568675719,"ip_address":"","comment_id":133551,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1568603143","product_id":100035501,"comment_content":"å››ç«è€å¸ˆè®²å¾—çœŸå¥½ï¼ŒæœåŠ¡ç«¯æ¨é€æ¨¡å‹æœ€åéƒ½å¯ä»¥çœ‹ä½œæ˜¯Cometå’ŒWebSocketçš„å˜å½¢ã€‚","like_count":0,"discussions":[{"author":{"id":1580075,"avatar":"https://static001.geekbang.org/account/avatar/00/18/1c/2b/2069abe6.jpg","nickname":"å››ç«","note":"","ucode":"E4BED7DCAADD99","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467424,"discussion_content":"è°¢è°¢ã€‚\nå¾ˆå¤šæŠ€æœ¯éƒ½æ˜¯ç›¸é€šçš„ï¼Œå­¦ä¹ å…¨æ ˆæŠ€æœ¯éƒ½æ˜¯å¯ä»¥ç”¨ç±»æ¯”çš„æ–¹å¼è¿›è¡Œçš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568675719,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":133527,"user_name":"é¥­å›¢","can_delete":false,"product_type":"c1","uid":1332557,"ip_address":"","ucode":"E24F240CC91BE8","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erbY9UsqHZhhVoI69yXNibBBg0TRdUVsKLMg2UZ1R3NJxXdMicqceI5yhdKZ5Ad6CJYO0XpFHlJzIYQ/132","comment_is_top":false,"comment_ctime":1568597140,"is_pvip":false,"replies":[{"id":"51357","content":"æ„Ÿè°¢åˆ†äº«ï¼<br>å…³äºç¬¬ 2) ä¸ªç­”å¤ï¼šè§£åŒ…å’Œå°åŒ…å…¶å®å¹¶ä¸æ˜¯ push å’Œ poll çš„æœ¬è´¨åŒºåˆ«ï¼Œpoll ä¹Ÿå¯ä»¥ç”±è§£åŒ…å°åŒ…ï¼Œä¹Ÿå¯ä»¥å®šä¹‰ä¸€å¥—æ¶ˆæ¯ç»“æ„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å››ç«","uid":"1580075","ctime":1568690187,"ip_address":"","comment_id":133527,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1568597140","product_id":100035501,"comment_content":"1)å…¬å¸ä¸€ä¸ªç®€å•çš„èŠå¤©ä¸šåŠ¡ç³»ç»Ÿï¼å°±ç”¨äº†pushæ¨¡å‹ï¼<br>2)pushæ¨¡å‹å¤„ç†ä¿¡æ¯æ¯”pollç¨å¾®å¤æ‚ä¸€äº›ï¼å­˜åœ¨è§£åŒ…å°åŒ…ï¼éœ€è¦å®šä¸€å¥—æ¶ˆæ¯ç»“æ„ï¼<br>","like_count":0,"discussions":[{"author":{"id":1580075,"avatar":"https://static001.geekbang.org/account/avatar/00/18/1c/2b/2069abe6.jpg","nickname":"å››ç«","note":"","ucode":"E4BED7DCAADD99","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467415,"discussion_content":"æ„Ÿè°¢åˆ†äº«ï¼\nå…³äºç¬¬ 2) ä¸ªç­”å¤ï¼šè§£åŒ…å’Œå°åŒ…å…¶å®å¹¶ä¸æ˜¯ push å’Œ poll çš„æœ¬è´¨åŒºåˆ«ï¼Œpoll ä¹Ÿå¯ä»¥ç”±è§£åŒ…å°åŒ…ï¼Œä¹Ÿå¯ä»¥å®šä¹‰ä¸€å¥—æ¶ˆæ¯ç»“æ„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568690187,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1332557,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erbY9UsqHZhhVoI69yXNibBBg0TRdUVsKLMg2UZ1R3NJxXdMicqceI5yhdKZ5Ad6CJYO0XpFHlJzIYQ/132","nickname":"é¥­å›¢","note":"","ucode":"E24F240CC91BE8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":13741,"discussion_content":"å—¯å—¯ï¼Œæ˜ç™½äº†ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568696908,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}