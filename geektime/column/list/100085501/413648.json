{"id":413648,"title":"02｜工具准备：安装并使用Jupyter Notebook","content":"<p>你好，我是黄佳。</p><p>欢迎来到零基础实战机器学习。工欲善其事，必先利其器，好的环境让我们事半功倍。今天我要讲的就是怎么来搭建机器学习运行的环境。</p><p>你也许听说过机器学习项目对配置要求高，硬件上需要带GPU的显卡，软件上面需要在Server 中搭建 PyTorch 和 TensorFlow 2.0 什么的。这些东西是不是听起来就挺麻烦的。</p><p>其实没有那么复杂。我觉得对于初学者来说，你不必过于纠结上面的工具。我们只是要进行一些简单的实战项目。而这些简单的项目，在本机上完全可以跑通。所以我建议你就用你手头上的笔记本电脑，装个Jupyter Notebook就足够了。</p><p>你听到这可能会想问什么是Jupyter Notebook呀？你可以把它想象成一个类似于网页的多媒体文档，但是，比普通网页更高一筹的是，它还能直接通过浏览器运行代码块，在代码块下方展示运行结果，就像下图中这样：</p><p><img src=\"https://static001.geekbang.org/resource/image/a3/eb/a38f6f907c83e1cbb30dec791ef265eb.png?wh=1261x792\" alt=\"\"></p><p>Jupyter Notebook可以交互式开发，再加上拥有富文本格式，可以显示图文，非常直观，所以它能迅速地展现数据分析师的想法，是我们上手机器学习的最佳工具。</p><p>选好了工具之后，我们还得确定要用什么语言。我们课程选的是Python，所有源代码都是用Python实现的。之所以选Python是因为Python在AI开发中是最常用的语言了，而且Python非常简单，只要你稍微有些编程方面的基础知识，就能看懂我们的代码。而我们推荐使用的工具Jupyter Notebook可以支持多种语言，其中就包括Python。</p><!-- [[[read_end]]] --><p>在这一讲，我会带着你把Jupyter Notebook安装好，并把其中的Python程序跑起来。这个Python程序，我不会带着你跑Hello World，那个太过于简单了，我会带着你画个图，让你了解一下Jupyter Notebook的运行过程，方便你之后上手用它。</p><h1><strong>安装和启动Jupyter Notebook</strong></h1><p>要在本机搭建Jupyter Notebook平台进行机器学习项目，有一种最简单的方法，就是下载并安装Anaconda。Anaconda是一个免费的开发环境，能帮你管理众多的Python库，并支持Jupyter Notebook、JupyterLab、Spyder等工具。</p><p>Python + Anaconda + Jupyter Notebook这三样东西加在一起，基本上就是机器学习工程师的标配。如果你还是对这哥仨的关系不太明白，可以看看下面的图：</p><p><img src=\"https://static001.geekbang.org/resource/image/56/72/56e2b3f30dc856867f58578db2171d72.jpg?wh=2284x1285\" alt=\"\"></p><p>虽然我说了我们需要的是这哥仨，但是别紧张，其实你只需要安装Anaconda就行啦，剩下的两样是Anaconda打包自带的。</p><p>Anaconda的安装其实非常简单。首先，我们到<a href=\"https://www.anaconda.com/products/individual\">Anaconda官网</a>下载最新的个人版本。对于我们初学者来说，个人版本就够用了。选择好适合本机电脑系统的版本下载后，我们直接选择所有的默认选项就行了。Anaconda是跨平台的，Windows，Linux，Mac OS上都可以装。</p><p>成功安装之后，我们就可以在Anaconda中启动Jupyter Notebook了。启动Jupyter Notebook有两种方法：你可以直接Anaconda初始界面里启动它；也可以在开始菜单栏的Anaconda3目录中找到Jupyter Notebook来启动它。这两种启动如下图所示：</p><p><img src=\"https://static001.geekbang.org/resource/image/46/f2/46cd4e2cb7d8727dd2bcb37589dfd2f2.jpg?wh=2284x1038\" alt=\"\"></p><p>在上面这两种启动方式中，我推荐第二种方法。因为直接启动Jupyter Notebook可以占用较少系统资源，因此启动起来也比较快。</p><p>Jupyter Notebook是我们课程的主要编辑工具。你初次接触它，可能对它还比较陌生。没关系，接下来，我会通过画一个图，来给你讲讲Jupyter Notebook是怎么运行的。其中涉及的一些操作和工具，我们会在后续的项目中频繁使用。</p><h1><strong>实战Jupyter Notebook</strong></h1><p>我想带你画的图是这样一个漏斗图：</p><p><img src=\"https://static001.geekbang.org/resource/image/72/6f/725fc62ed91abc471f8e61e74b1bf36f.png?wh=1007x460\" alt=\"\"></p><p>“漏斗图”听起来好像有点专业，但它其实就是一个呈现用户流失情况的图。上面这个图的最上面一层，展现的是有多少人浏览这个网页，接下来的几层分别展示的是有多少人下载这个App、注册App、搜索商品、下单购买鲜花。每层的人数是我们早就统计好的。</p><p>如果你没听懂漏斗图是做什么的，其实没关系。我们是想通过画这个图来学习怎么使用Jupyter Notebook的，所以你只要知道我们是要通过一些已知数据来画这个图的就行了。</p><p>那么怎么画出这个漏斗？</p><p>你可能会觉得我们需要写很复杂的代码，去定义这个漏斗绘图的规则。其实是不用的。因为我们用的是Python，而Python的一大特点就是可以通过import语句导入各种各样的包和模块，来帮助我们用他人已经整理好的函数、方法和算法解决问题。Python里已经有画图的包了，我们直接调用就好了。</p><p>所以画漏斗图听起来很复杂，但总结起来就三步：先安装一个可以画漏斗图的包，然后导入它，最后把数据放到这个包里运行就行啦。而在这个过程中，我想教你的是怎么安装包，调用包。这些都是我们未来会常常用到的操作。</p><p>当然了，在做任何项目之前，你都需要新建一个Notebook（这里我们就把Jupyter Notebook文件简称为Notebook吧）。所以我们先来看看怎么新建Notebook。</p><p>新建Notebook很简单，启动Jupyter Notebook后，在你的默认浏览器（我用的是Chrome）中就会显示本机默认目录页面，就像下图中这样，选择任意一个你想放Notebook的目录，就可以新建了。</p><p><img src=\"https://static001.geekbang.org/resource/image/5b/74/5bae160f13cd7dfe7a62065ce0c83174.png?wh=982x676\" alt=\"\"></p><p>除了新建自己的Notebook，你也可以把我在<a href=\"https://github.com/huangjia2019/geektime/blob/main/%E5%87%86%E5%A4%87%E7%AF%8702/%E6%BC%8F%E6%96%97%E5%88%86%E6%9E%90.ipynb\">GitHub上面的Notebook</a>，也就是后缀名为ipynb的文件下载下来，直接修改它。</p><p>接下来，我们正式开始画图，我们的第一步就是安装可以画漏斗的包。这里我们选择的包是plotly，它是一个数据可视化工具包，里面含有漏斗图的绘制工具。在Anaconda中，很多机器学习相关的工具包都是预装好了的，但是Plotly不在其中，所以需要我们手动安装下。那具体怎么安装呢？pip install是我们会经常使用的包安装语句：</p><pre><code>pip install plotly #安装Plotly包\n</code></pre><p>在Jupyter Notebook中，代码是以一个个单元格的形式组织的，所以在Notebook的第一个单元格中写好这个pip install语句后，我们选择红框中所示的Run按钮，就能执行这段代码了。</p><p><img src=\"https://static001.geekbang.org/resource/image/7b/e3/7b4b463cb5ab064ba0d40c0a0739bae3.png?wh=947x308\" alt=\"\"></p><p>我们知道，Python代码和输出都是一段段的，我们随时能查看每段代码的运行结果。运行这句之后，从上图的运行结果中可以看到，在我的安装语句后，输出显示这个包已经装过了，不需要重复安装。如果你是第一次用，就需要安装。那么在后续课程中，不是Anaconda默认预装的工具包，我都会提醒你先用pip install来安装。</p><p>因为我们只需要安装一次，所以这个语句跑完之后，就可以在前面加一个“#”把它注释掉。</p><pre><code>#pip install plotly #安装Plotly包\n</code></pre><p>安装好了以后，第二步就该导入Plotly包了。这时候你要注意，Plotly包里有很多模块，全部导入的话，会占用更多的内存，所以我们直接导入这里要用的模块express。express是个简易的绘图模块，导入它要通过Import语句来实现。在下面的语句中，我把express命名为px：</p><pre><code>import plotly.express as px #导入Plotly.express工具，命名为px\n</code></pre><p>再次选择Run按钮运行这段代码后，就会看到下图所示的情况：</p><p><img src=\"https://static001.geekbang.org/resource/image/26/97/262a80d1479c863f0449d3f359b72997.png?wh=897x420\" alt=\"\"></p><p>你会发现，这段代码并没有输出结果。其实只要没有报错，就说明我们成功导入了plotly.express工具。不过，你可能会问我，除了刚才的两段代码之外，Notebook中标下划线的那一段字是怎么回事呢？</p><p>其实，这段文字是我在Notebook的代码之间添加的一段笔记。Jupyter Notebook有两种主要类型单元格，选中当前单元格之后，就可以通过上图红框中的选项进行单元格类型的切换：</p><ul>\n<li>Code类型的单元格里是可执行的程序代码，它的输出会显示在本单元格下方。</li>\n<li>Markdown类型的单元格里是富文本格式的内容，你可以在这随时选择添加代码的说明文字或者学习心得。</li>\n</ul><p>你可能会想说，那我为什么要了解它的单元格类型呢？这是因为，如果不了解单元格的类型，把一段代码不小心弄成了富文本格式，那就跑不出来结果了。这两种单元格类型你可以看看下图：</p><p><img src=\"https://static001.geekbang.org/resource/image/df/fe/df6377e389d264dyy1c13a583a73effe.png?wh=883x408\" alt=\"\"><br>\n<img src=\"https://static001.geekbang.org/resource/image/24/2a/24ab3ce88205513b059eb1d3f78d492a.png?wh=886x405\" alt=\"\"></p><p>那如果你刚用Jupyter Notebook，还是有点搞不明白你编辑的单元格是程序还是富文本的话，你看看单元格左边，<strong>如果没有In字，那就是富文本了</strong>。</p><p>如果选择命令行中的双箭头图标从头执行代码，代码会按照单元格的顺序由上至下执行。不过，我们也可以单独执行某一个单元格中的代码，因为单元格是可以反复运行的。所以，Code类型的单元格左侧[ ]中的编号，才表示真正的执行顺序。假如我现在选择单箭头Run重新执行In [1]的单元格，那么这个单元格的执行顺序编号就会变为[3]，如下图所示：<br>\n<img src=\"https://static001.geekbang.org/resource/image/70/c3/70d6de03e16a4a6ce91de1055ef7c7c3.png?wh=901x441\" alt=\"\"></p><p>好，下面再回到我们刚才的项目。</p><p>在完成了express模块的导入之后，第三步，我们要开始使用刚才导入的plotly.express绘制漏斗了，就是要把我们的数据放进去运行起来。这个过程分为3个小步骤：建立数据、调用漏斗和显示漏斗。</p><p>下面的代码里，我创建了一个字典格式的Python数据对象，并且把我统计好的“访问数”、“下载数”、“注册数”、“搜索数”、“付款数”都放进了这个字典之中；然后，我用px.funnel调用漏斗工具，并把这些数据传入漏斗；最后，又用了fig.show显示漏斗。</p><pre><code>data = dict( #准备漏斗数据\n    number=[59, 32, 18, 9, 2],\n    stage=[&quot;访问数&quot;, &quot;下载数&quot;, &quot;注册数&quot;, &quot;搜索数&quot;, &quot;付款数&quot;])\nfig = px.funnel(data, x='number', y='stage') #把数据传进漏斗图\nfig.show() #显示漏斗图\n</code></pre><p>运行后输出如下：</p><p><img src=\"https://static001.geekbang.org/resource/image/ec/32/ec6c383b1b8932649eyyafe879414b32.png?wh=1152x875\" alt=\"\"></p><p>就这么简单的几行代码，就成功地把我们的数据进行了非常漂亮的可视化！别小看这个漏斗，它能够让我们看出每个环节，客户流失的多少。</p><p>比如说，你可以分析一下，为什么18个用户注册了App，只有9个人进行了鲜花的搜索，是不是App的搜索页设计的不好呢？这就是漏斗图的意义，<strong>它能启发你聚焦于某个具体的运营环节去思考</strong>。</p><p>上面的整个过程，完全没有任何难于理解的地方。不过，如果你细心地观察上面的图片，你可能还会想问，为什么执行顺序为[3]的单元格有一个绿框呢？</p><p>这是一个很好的问题，你会看到选中一个单元格时，不仅有时边框是绿色，还有时是蓝色呢。其实这里的绿色和蓝色，代表Jupyter Notebook的两种输入模式。</p><p>那么为什么要有两种模式呢？简单地说，绿色编辑模式是为了写代码，而蓝色的命令模式是为了使用单元格键盘操作快捷键。你了解这两种模式后就能在之后的编程中方便地用键盘快捷键了。</p><p>比如说，在命令模式里，你可以用M键，把单元格就变成了Markdown单元格，也可以用Y键把它变成代码单元格。还有下面这些常用的快捷键，也只能在命令模式下使用：</p><p><img src=\"https://static001.geekbang.org/resource/image/5d/26/5d3a0449cyy1f962614f6c171407d426.jpg?wh=2284x1285\" alt=\"\"></p><p>但是，也有一些在命令模式或编辑模式下都可以直接使用的快捷键：</p><p><img src=\"https://static001.geekbang.org/resource/image/86/1d/86fac26dc0a456a24cfe7dd046c0331d.jpg?wh=2284x795\" alt=\"\"></p><p>这些快捷键，你不用刻意去背，点击运行界面上的键盘图标就可以随时查询它们。这里面写着“command mode ”的快捷键就是专门在命令模式下使用的。</p><p><img src=\"https://static001.geekbang.org/resource/image/7b/34/7b065283535ab1d97e2b1273e6eb5434.png?wh=1023x319\" alt=\"\"></p><p>除此之外，在编辑模式下，你如果在对象后面输入点号，再按下Tab键，还会出现这个对象的所有API，也就是方法和函数的列表供你选择。就像下图这样：</p><p><img src=\"https://static001.geekbang.org/resource/image/c6/12/c68383255e4a4109a0976436f929b612.png?wh=332x241\" alt=\"\"></p><p>单击单元格的内部输入区域，你就可以进入编辑模式，也可以通过Enter键进入编辑模式。而单击单元格外侧区域或者按Esc键，你就可以进入命令模式了。有了这些键盘快捷键，你编辑Notebook的速度就会更快。</p><h1><strong>总结一下</strong></h1><p>好了，关于Jupyter Notebook的知识我就介绍到这里。今天我给你讲了Python + Anaconda + Jupyter Notebook这三样工具，你可以通过Anaconda同时安装它们。然后我带着你创建并运行了第一个Jupyter Notebook，我带着你用pip install安装了Plotly包，import了包中的模块，并画了个简单的漏斗图。</p><p>在使用Jupyter Notebook时，需要你注意单元格的类型是代码还是Markdown文档。运行代码时，Jupyter Notebook会给出每个单元格的执行顺序，而且各单元格都可以反复执行。最后我还给你介绍了Jupyter Notebook的输入模式以及几个重要的键盘快捷键。</p><p>因为Jupyter Notebook很容易用，掌握了上面的内容，你就应该算得上是半个专家了，而轻量级的机器学习实战，Jupyter Notebook完全搞得定。</p><p>当然，如果你真的接触到比较复杂的深度学习，要构建深度网络处理大量的数据的时候，你确实会需要配置要求更高的环境。不过针对这个情况，我也有个简单的解决方案。</p><p>事实上，有很多平台会给你提供这方面的工具。比如说Kaggle在线Jupyter Notebook平台，还有Google Colaboratory，以及国内的阿里云天池实验室，就都提供GPU甚至TPU给你免费使用。所以你现在不用担心，以后学到深度学习的时候，我会带着你去撸一撸这些网站的羊毛的。</p><h1><strong>思考题</strong></h1><p>今天的内容超级简单，但是需要动动手，我这里给你一个小项目。我在前面画的漏斗，没有显示出性别，也就是文章开始是有男生，女生信息的那种组合型漏斗：</p><p><img src=\"https://static001.geekbang.org/resource/image/28/58/288e103ca59f473be2fc1a1dc1361758.png?wh=1033x455\" alt=\"\"></p><p>我给你准备了数据，你能不能想想怎么画出这种细分漏斗呢？</p><p>数据：</p><p>男生：“访问数-30”, “下载数-15”, “注册数-10”, “搜索数-6”, “付款数-1”<br>\n女生：“访问数-29”, “下载数-17”, “注册数-8”, “搜索数-3”, “付款数-1”</p><p>部分提示代码：</p><pre><code>import pandas as pd # 导入Pandas\nstages = [&quot;访问数&quot;, &quot;下载数&quot;, &quot;注册数&quot;, &quot;搜索数&quot;, &quot;付款数&quot;] # 漏斗的阶段\n# 漏斗的数据\ndf_male = pd.DataFrame(dict(number=[30, 15, 10, 6, 1], stage=stages))\ndf_male['性别'] = '男'\n...省略部分代码...\ndf = pd.concat([df_male, df_female], axis=0) # 把男生女生的数据连接至一个新的Dataframe对象df\nfig = px.funnel(df, x='number', y='stage', color='性别') # 把df中的数据传进漏斗\n...省略部分代码...\n</code></pre><p>我这个提示已经太给力了，其中的重点是两个DataFrame对象通过pd.concat()的连接部分，下面看你的了！</p><p>欢迎你在留言区里分享你画这个细分图时的收获和遇到的问题，我在留言区等你。如果这节课帮到了你的话，也欢迎你把这节课分享给自己的朋友。</p>","comments":[{"had_liked":false,"id":310050,"user_name":"在路上","can_delete":false,"product_type":"c1","uid":1402511,"ip_address":"","ucode":"6E31908EFE1107","user_header":"https://static001.geekbang.org/account/avatar/00/15/66/8f/02be926d.jpg","comment_is_top":true,"comment_ctime":1630470639,"is_pvip":false,"replies":[{"id":"112353","content":"这是特别深入细致的建议。学习就是要知其然，知其所以然。手动点赞。","user_name":"作者回复","user_name_real":"黄佳","uid":"1809833","ctime":1630475981,"ip_address":"","comment_id":310050,"utype":1}],"discussion_count":1,"race_medal":0,"score":"9.2233720642550006e+18","product_id":100085501,"comment_content":"AIK同学已经给出了正确答案，不过在实验的过程中，可以输出df_male和df数据集，看看pandas是如何合并数据集df_male和df_female，plotly.express是将什么样的数据集绘制成图形的。","like_count":7,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"黄佳","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526112,"discussion_content":"这是特别深入细致的建议。学习就是要知其然，知其所以然。手动点赞。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630475981,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":310029,"user_name":"GAC·DU","can_delete":false,"product_type":"c1","uid":1385403,"ip_address":"","ucode":"7847FBE1C13740","user_header":"https://static001.geekbang.org/account/avatar/00/15/23/bb/a1a61f7c.jpg","comment_is_top":true,"comment_ctime":1630462347,"is_pvip":true,"replies":[{"id":"112328","content":"优秀。💪","user_name":"作者回复","user_name_real":"黄佳","uid":"1809833","ctime":1630467878,"ip_address":"","comment_id":310029,"utype":1}],"discussion_count":1,"race_medal":0,"score":"9.2233720599601009e+18","product_id":100085501,"comment_content":"import pandas as pd <br><br>stages = [&quot;访问数&quot;, &quot;下载数&quot;, &quot;注册数&quot;, &quot;搜索数&quot;, &quot;付款数&quot;]<br><br>df_male = pd.DataFrame(dict(number=[30, 15, 10, 6, 1], stage=stages))<br>df_male[&#39;性别&#39;] = &#39;男&#39;<br><br>df_female = pd.DataFrame(dict(number=[29, 17, 8, 3, 1], stage=stages))<br>df_female[&#39;性别&#39;] = &#39;女&#39;<br><br>df = pd.concat([df_male, df_female], axis=0) <br>fig = px.funnel(df, x=&#39;number&#39;, y=&#39;stage&#39;, color=&#39;性别&#39;)<br><br>fig.show()","like_count":5,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"黄佳","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526105,"discussion_content":"优秀。💪","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630467878,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":311785,"user_name":"蝶舞清风寒","can_delete":false,"product_type":"c1","uid":2753090,"ip_address":"","ucode":"2818B4BE7DCC16","user_header":"https://static001.geekbang.org/account/avatar/00/2a/02/42/e8ef9639.jpg","comment_is_top":true,"comment_ctime":1631458890,"is_pvip":false,"replies":[{"id":"112971","content":"谢谢👍","user_name":"作者回复","user_name_real":"黄佳","uid":"1809833","ctime":1631498528,"ip_address":"","comment_id":311785,"utype":1}],"discussion_count":1,"race_medal":0,"score":"9.2233720513711002e+18","product_id":100085501,"comment_content":"1、 plotlPlotly工具是基于浏览器的交互工具，其绘图结果html网页文件，因此与jupter notebook更匹配；<br>2、若是在spyder下运行的时候，console运行时是空白；<br>3、若要解决spyder运行问题，需要以下步骤<br>import plotly.io as pio<br>#如果您想在浏览器中显示您的图形作为完全交互式版本<br>pio.renderers.default=&#39;browser&#39;<br>#要切换回在 Spyder 中生成图形<br>pio.renderers.default=&#39;svg&#39;<br>在脱机模式下，通过浏览器显示图形或者运行结果<br>详细解释需要看：https:&#47;&#47;stackoverflow.com&#47;questions&#47;35315726&#47;plotly-how-to-display-charts-in-spyder","like_count":3,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"黄佳","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526742,"discussion_content":"谢谢👍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631498528,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":310792,"user_name":"u","can_delete":false,"product_type":"c1","uid":1178201,"ip_address":"","ucode":"6FDCEA63AE67C3","user_header":"https://static001.geekbang.org/account/avatar/00/11/fa/59/52a504f6.jpg","comment_is_top":true,"comment_ctime":1630912858,"is_pvip":false,"replies":[{"id":"112630","content":"👍","user_name":"作者回复","user_name_real":"黄佳","uid":"1809833","ctime":1630922752,"ip_address":"","comment_id":310792,"utype":1}],"discussion_count":1,"race_medal":0,"score":"9.2233720427807007e+18","product_id":100085501,"comment_content":"import plotly.express as px<br>import pandas as pd<br><br>if __name__ == &#39;__main__&#39; :<br>    stages = [&quot;访问数&quot;, &quot;下载数&quot;, &quot;注册数&quot;, &quot;搜索数&quot;, &quot;付款数&quot;]<br>    dataMale = dict(number=[59, 32, 18, 9, 2],stage=stages)<br>    dataFemale = dict(number=[29,17,8,3,1],stage=stages)<br><br>    df_male = pd.DataFrame(dataMale)<br>    df_male[&#39;性别&#39;] = &#39;男&#39;<br>    df_female = pd.DataFrame(dataFemale)<br>    df_female[&#39;性别&#39;] = &#39;女&#39;<br><br>    df_total = pd.concat(objs=[df_male,df_female],axis=0)<br>    fig = px.funnel(df_total,x=&quot;number&quot;,y=&quot;stage&quot;,color=&quot;性别&quot;)<br>    fig.show()","like_count":1,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"黄佳","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526355,"discussion_content":"👍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630922752,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":310415,"user_name":"茜茜","can_delete":false,"product_type":"c1","uid":2652053,"ip_address":"","ucode":"8861DD63536EEF","user_header":"https://static001.geekbang.org/account/avatar/00/28/77/95/0d10d4b2.jpg","comment_is_top":true,"comment_ctime":1630647481,"is_pvip":false,"replies":[{"id":"112470","content":"很棒","user_name":"作者回复","user_name_real":"黄佳","uid":"1809833","ctime":1630665543,"ip_address":"","comment_id":310415,"utype":1}],"discussion_count":1,"race_medal":0,"score":"9.2233720427803996e+18","product_id":100085501,"comment_content":"import plotly.express as px<br>import pandas as pd<br>stages = [&quot;访问数&quot;, &quot;下载数&quot;, &quot;注册数&quot;, &quot;搜索数&quot;, &quot;付款数&quot;]<br>df_male = pd.DataFrame(dict(number = [59,32,18,9,2], stage = stages, gender = &#39;男性&#39;))<br>df_female = pd.DataFrame(dict(number = [66,34,20,12,4], stage = stages, gender = &#39;女性&#39;))<br>df = pd.concat([df_male, df_female], axis = 0)<br>fig = px.funnel(df, x = &#39;number&#39;, y = &#39;stage&#39;, color = &#39;gender&#39;)<br>fig.show()","like_count":1,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"黄佳","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526227,"discussion_content":"很棒","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630665543,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":310411,"user_name":"阿文","can_delete":false,"product_type":"c1","uid":1467219,"ip_address":"","ucode":"B53454CA52BD7E","user_header":"https://static001.geekbang.org/account/avatar/00/16/63/53/b4590ccc.jpg","comment_is_top":true,"comment_ctime":1630645939,"is_pvip":false,"replies":[{"id":"112462","content":"我没有遇到过类似情况。猜测是否是Plotly包安装的问题，或者是浏览器的问题。我看到微信群里有些同学已经绘制出了漏斗，也可以入群询问一下看看没有没其它同学有类似情况，是怎么解决的。","user_name":"作者回复","user_name_real":"黄佳","uid":"1809833","ctime":1630651546,"ip_address":"","comment_id":310411,"utype":1}],"discussion_count":2,"race_medal":0,"score":"9.2233720384853996e+18","product_id":100085501,"comment_content":"我这漏斗图出不来，出现了一块空白区域。这是啥情况啊","like_count":0,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"黄佳","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526226,"discussion_content":"我没有遇到过类似情况。猜测是否是Plotly包安装的问题，或者是浏览器的问题。我看到微信群里有些同学已经绘制出了漏斗，也可以入群询问一下看看没有没其它同学有类似情况，是怎么解决的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630651546,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1315656,"avatar":"https://static001.geekbang.org/account/avatar/00/14/13/48/55be9797.jpg","nickname":"Joney Hsiao","note":"","ucode":"FD296AB95EF9E7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":393355,"discussion_content":"安装完后需要重启jupyter","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1631372622,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":310028,"user_name":"黄佳","can_delete":false,"product_type":"c1","uid":1809833,"ip_address":"","ucode":"8EC41D2EAB0E3C","user_header":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","comment_is_top":true,"comment_ctime":1630462166,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"9.2233720384852009e+18","product_id":100085501,"comment_content":"如果大家在安装Plotly包的时候遇到障碍，也可以尝试用这个语句pip install plotly==5.3.1，安装它当前的最新版本。","like_count":0,"discussions":[{"author":{"id":2755497,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/0b/a9/ccacdd57.jpg","nickname":"夏日🍉情缘","note":"","ucode":"0BD258E390E537","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":533638,"discussion_content":"我很奇怪：#pip install plotly #安装Plotly包 这个不行\n去掉了：#安装Plotly包  就可以运行了。难不成是 注释语句不能+后面吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637921182,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":310011,"user_name":"青松","can_delete":false,"product_type":"c1","uid":2746821,"ip_address":"","ucode":"B98F744AF1135B","user_header":"https://static001.geekbang.org/account/avatar/00/29/e9/c5/7ecb497f.jpg","comment_is_top":false,"comment_ctime":1630456998,"is_pvip":false,"replies":[{"id":"112310","content":"欢迎加群，一起学习！","user_name":"编辑回复","user_name_real":"李慧文","uid":"1949604","ctime":1630461504,"ip_address":"","comment_id":310011,"utype":2}],"discussion_count":5,"race_medal":0,"score":"10220391590","product_id":100085501,"comment_content":"坐等更新！","like_count":2,"discussions":[{"author":{"id":1949604,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/MpF5Hia4Qwibdice7Qibk3iamUVZY3KglCymK67n5YEvZjX8GbFY1J2f1RGTbNibpnvicxYZGoJL7oicfbpBIfWTCe7Gbw/132","nickname":"李慧文","note":"","ucode":"F1DCB7262CCE8F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526099,"discussion_content":"欢迎加群，一起学习！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630461504,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":4}","child_discussion_number":1,"child_discussions":[{"author":{"id":2451028,"avatar":"https://static001.geekbang.org/account/avatar/00/25/66/54/bf48d656.jpg","nickname":"RoninssWang","note":"","ucode":"FF039EF3200758","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1949604,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/MpF5Hia4Qwibdice7Qibk3iamUVZY3KglCymK67n5YEvZjX8GbFY1J2f1RGTbNibpnvicxYZGoJL7oicfbpBIfWTCe7Gbw/132","nickname":"李慧文","note":"","ucode":"F1DCB7262CCE8F","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":576497,"discussion_content":"群在哪呢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655607312,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":526099,"ip_address":""},"score":576497,"extra":""}]},{"author":{"id":2755497,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/0b/a9/ccacdd57.jpg","nickname":"夏日🍉情缘","note":"","ucode":"0BD258E390E537","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":533639,"discussion_content":"同求+群","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637921204,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"黄佳","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":391984,"discussion_content":"https://time.geekbang.org/column/intro/100085501  这个链接中，点简介，或者课程介绍栏，就可以看看微信入群链接。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630744991,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1058183,"avatar":"https://static001.geekbang.org/account/avatar/00/10/25/87/f3a69d1b.jpg","nickname":"peter","note":"","ucode":"261C3FC001DE2D","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":391629,"discussion_content":"请问：本课程有微信学习群吗？ 有的话怎么加入啊？（听说要找到课程简介，但课程简介在哪里啊）","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630558264,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":329020,"user_name":"TWJ","can_delete":false,"product_type":"c1","uid":2019025,"ip_address":"","ucode":"D45F7F43F231BE","user_header":"https://static001.geekbang.org/account/avatar/00/1e/ce/d1/25b26edb.jpg","comment_is_top":false,"comment_ctime":1641029347,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5935996643","product_id":100085501,"comment_content":"分享一下。安装pip install plotly过程中报了一堆错，最后显示“ValueError: check_hostname requires server_hostname”，关掉类似VPN的软件，重新执行安装就可以了。","like_count":1},{"had_liked":false,"id":317296,"user_name":"抓白兔的大猪文","can_delete":false,"product_type":"c1","uid":2630199,"ip_address":"","ucode":"09F3F2C4C9E43B","user_header":"https://static001.geekbang.org/account/avatar/00/28/22/37/61e24c86.jpg","comment_is_top":false,"comment_ctime":1634735751,"is_pvip":false,"replies":[{"id":"116872","content":"Jupyter Notebook运行不了pip命令的话，那么就在Command Line中运行吧。毕竟这是一条Command Line命令。还要确保已经装了pip工具了。我的Jupyter是可以直接跑pip的，但是有的环境不行。","user_name":"作者回复","user_name_real":"编辑","uid":"1809833","ctime":1637074457,"ip_address":"","comment_id":317296,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5929703047","product_id":100085501,"comment_content":"黄老师 在Jupyter中运行代码 pip install plotly 安装模块显示如下报错，是什么原因？<br>File &quot;C:\\Users\\APPLE\\AppData\\Local\\Temp&#47;ipykernel_1520&#47;347750890.py&quot;, line 2<br>    pip install plotly<br>        ^<br>SyntaxError: invalid syntax","like_count":1,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"黄佳","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":530448,"discussion_content":"Jupyter Notebook运行不了pip命令的话，那么就在Command Line中运行吧。毕竟这是一条Command Line命令。还要确保已经装了pip工具了。我的Jupyter是可以直接跑pip的，但是有的环境不行。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637074457,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1347609,"avatar":"https://static001.geekbang.org/account/avatar/00/14/90/19/b3403815.jpg","nickname":"Juha","note":"","ucode":"5B9301CC960D84","race_medal":1,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":552018,"discussion_content":"这个实际上在最前面加一个!就可以了，表示的是命令行模式","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645236712,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":315368,"user_name":"Null","can_delete":false,"product_type":"c1","uid":1979700,"ip_address":"","ucode":"C557F807ACDCE9","user_header":"https://static001.geekbang.org/account/avatar/00/1e/35/34/18caeb26.jpg","comment_is_top":false,"comment_ctime":1633863410,"is_pvip":false,"replies":[{"id":"114223","content":"谢谢分享！🌱 ","user_name":"作者回复","user_name_real":"黄佳","uid":"1809833","ctime":1633927430,"ip_address":"","comment_id":315368,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5928830706","product_id":100085501,"comment_content":"不显示绘图的解决：<br>pip install cufflinks<br>import cufflinks as cf<br>#这两句是离线生成图片的设置<br>cf.go_offline()<br>cf.set_config_file(offline=True, world_readable=True)","like_count":1,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"黄佳","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527945,"discussion_content":"谢谢分享！🌱 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633927430,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":350845,"user_name":"一颗红心","can_delete":false,"product_type":"c1","uid":2540587,"ip_address":"","ucode":"9CAB419062DAC2","user_header":"https://static001.geekbang.org/account/avatar/00/26/c4/2b/b3f917ec.jpg","comment_is_top":false,"comment_ctime":1657255788,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1657255788","product_id":100085501,"comment_content":"简单易学，很有成就感。点赞","like_count":0},{"had_liked":false,"id":349856,"user_name":"Geek_ad8af6","can_delete":false,"product_type":"c1","uid":3037827,"ip_address":"","ucode":"46DC424FC26DDD","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLSYbuvZOUtOddqCVrktJu4uQaeYjJIEnDXkexCFW6FFYv9fUnhJbr1cvzuiaChgsoN6icEKXPmJfUA/132","comment_is_top":false,"comment_ctime":1656387458,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1656387458","product_id":100085501,"comment_content":"import pandas as pd # 导入Pandas<br>stages = [&quot;访问数&quot;, &quot;下载数&quot;, &quot;注册数&quot;, &quot;搜索数&quot;, &quot;付款数&quot;] # 漏斗的阶段<br># 漏斗的数据<br>df_male = pd.DataFrame(dict(number=[30, 15, 10, 6, 1], stage=stages))<br>df_male[&#39;性别&#39;] = &#39;男&#39;<br>df_female = pd.DataFrame(dict(number=[20, 14, 8, 5, 3], stage=stages))<br>df_female[&#39;性别&#39;] = &#39;女&#39;<br>df = pd.concat([df_male, df_female], axis=0) # 把男生女生的数据连接至一个新的Dataframe对象df<br>fig = px.funnel(df, x=&#39;number&#39;, y=&#39;stage&#39;, color=&#39;性别&#39;) # 把df中的数据传进漏斗<br>fig.show()","like_count":0},{"had_liked":false,"id":346154,"user_name":"Geek_bdfd93","can_delete":false,"product_type":"c1","uid":2216660,"ip_address":"","ucode":"84FB5381B829A6","user_header":"","comment_is_top":false,"comment_ctime":1652861043,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1652861043","product_id":100085501,"comment_content":"请问老师在jupyter notebook launch的时候发生-10673的错误是怎么回事","like_count":0},{"had_liked":false,"id":344780,"user_name":"海滨","can_delete":false,"product_type":"c1","uid":1009518,"ip_address":"","ucode":"F1B94D2DB944DC","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/6e/f5ee46e8.jpg","comment_is_top":false,"comment_ctime":1651763363,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1651763363","product_id":100085501,"comment_content":"不知道有没有使用visual studio code来编写jupyter notebook，最后在显示漏斗图出现这种报错的情况？No renderer could be found for MIME type: application&#47;vnd.plotly.v1+json<br>我贴下我的解决方案，在import ploty包前面添加如下代码<br># 解决vs code报错找不到render无法直接显示plotly图表问题<br>import plotly.io as pio<br>pio.renderers.default = &quot;notebook_connected&quot;","like_count":0},{"had_liked":false,"id":340208,"user_name":"ryan","can_delete":false,"product_type":"c1","uid":1596005,"ip_address":"","ucode":"845DAC632BF51B","user_header":"https://static001.geekbang.org/account/avatar/00/18/5a/65/b80035a6.jpg","comment_is_top":false,"comment_ctime":1648657016,"is_pvip":true,"discussion_count":0,"race_medal":1,"score":"1648657016","product_id":100085501,"comment_content":"真的很基础😁适合入门","like_count":0},{"had_liked":false,"id":337658,"user_name":"松饼Muffin","can_delete":false,"product_type":"c1","uid":2938616,"ip_address":"","ucode":"1FCE9E6E4F9C8C","user_header":"https://static001.geekbang.org/account/avatar/00/2c/d6/f8/cb21b43c.jpg","comment_is_top":false,"comment_ctime":1646959725,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1646959725","product_id":100085501,"comment_content":"stages = [&quot;访问数&quot;, &quot;下载数&quot;, &quot;注册数&quot;, &quot;搜索数&quot;, &quot;付款数&quot;] # 漏斗的阶段<br># 漏斗的数据<br>df_male = pd.DataFrame(dict(number=[30, 15, 10, 6, 1], stage=stages, gender=&#39;male&#39;))<br>df_female = pd.DataFrame(dict(number=[29, 17, 8, 3, 1], stage=stages, gender=&#39;female&#39;))<br>df = pd.concat([df_male, df_female], axis=0) # 把男生女生的数据连接至一个新的Dataframe对象df<br>fig = px.funnel(df, x=&#39;number&#39;, y=&#39;stage&#39;, color=&#39;gender&#39;) # 把df中的数据传进漏斗<br>fig.show()","like_count":0},{"had_liked":false,"id":337430,"user_name":"Eazow","can_delete":false,"product_type":"c1","uid":1346402,"ip_address":"","ucode":"D81D8FF2B2FF0D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/bmgpp5wc8GLmOdHNQccSgrunK0VdIicB6rpTHXCTF5xEkm2YvPHOX2DwNt2EqTzJ70JD41h0u5qW4R0yXRY1ZCg/132","comment_is_top":false,"comment_ctime":1646818361,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1646818361","product_id":100085501,"comment_content":"stages = [&quot;访问数&quot;, &quot;下载数&quot;, &quot;注册数&quot;, &quot;搜索数&quot;, &quot;付款数&quot;]<br>df_male = pd.DataFrame(dict(number=[59, 32, 18, 9, 2], stage=stages, gender=[&quot;男&quot;] * 5))<br>df_female = pd.DataFrame(dict(number=[29, 17, 8, 3, 1], stage=stages, gender=[&quot;女&quot;] * 5))<br><br>px.funnel(pd.concat([df_male, df_female]), x=&quot;number&quot;, y=&quot;stage&quot;, color=&quot;gender&quot;).show()","like_count":0},{"had_liked":false,"id":332838,"user_name":"Cal","can_delete":false,"product_type":"c1","uid":1582137,"ip_address":"","ucode":"9F2EF46687D18F","user_header":"https://static001.geekbang.org/account/avatar/00/18/24/39/5300ca6f.jpg","comment_is_top":false,"comment_ctime":1643719742,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1643719742","product_id":100085501,"comment_content":"import pandas as pd<br>import plotly.express as px #导入Plotly.express工具，命名为px<br>stages = [&quot;访问数&quot;, &quot;下载数&quot;, &quot;注册数&quot;, &quot;搜索数&quot;, &quot;付款数&quot;]<br>df_male = pd.DataFrame(dict(number=[59, 32, 18, 9, 2], stage=stages))<br>df_male[&#39;性别&#39;] = &#39;男&#39;<br>df_female = pd.DataFrame(dict(number=[37, 41, 18, 6, 5], stage=stages))<br>df_female[&#39;性别&#39;] = &#39;女&#39;<br>df = pd.concat([df_male, df_female],axis=0)<br>fig = px.funnel(df, x=&#39;number&#39;, y=&#39;stage&#39;, color=&#39;性别&#39;)<br>fig.show()","like_count":0},{"had_liked":false,"id":327240,"user_name":"小宝","can_delete":false,"product_type":"c1","uid":1402330,"ip_address":"","ucode":"A7223A477C60C9","user_header":"https://static001.geekbang.org/account/avatar/00/15/65/da/29fe3dde.jpg","comment_is_top":false,"comment_ctime":1640002505,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1640002505","product_id":100085501,"comment_content":"import pandas as pd<br>stages = [&quot;访问数&quot;, &quot;下载数&quot;, &quot;注册数&quot;, &quot;搜索数&quot;, &quot;付款数&quot;] <br>data_male = dict(number=[30, 15, 10, 6, 1], stage=stages)<br>df_male = pd.DataFrame(data_male)<br>df_male[&#39;性别&#39;] = &#39;男&#39;<br><br>data_female = dict(number=[29, 17, 8, 3, 1], stage=stages)<br>df_female = pd.DataFrame(data_female)<br>df_female[&#39;性别&#39;] = &#39;女&#39;<br><br>df = pd.concat([df_male, df_female], axis=0)<br>fig = px.funnel(df, x=&#39;number&#39;, y=&#39;stage&#39;, color=&#39;性别&#39;)<br><br>fig.show()","like_count":0},{"had_liked":false,"id":327088,"user_name":"Geek_b8d28c","can_delete":false,"product_type":"c1","uid":2601508,"ip_address":"","ucode":"CA4E525295A91E","user_header":"https://static001.geekbang.org/account/avatar/00/27/b2/24/3b1d2755.jpg","comment_is_top":false,"comment_ctime":1639909419,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1639909419","product_id":100085501,"comment_content":"import pandas as pd # 导入Pandas<br>stages = [&quot;访问数&quot;, &quot;下载数&quot;, &quot;注册数&quot;, &quot;搜索数&quot;, &quot;付款数&quot;] # 漏斗的阶段<br># 漏斗的数据<br>df_male = pd.DataFrame(dict(number=[30, 15, 10, 6, 1], stage=stages))<br>df_male[&#39;性别&#39;] = &#39;男&#39;<br>df_female = pd.DataFrame(dict(number=[29,17,8,3,1],stage=stages))<br>df_female[&#39;性别&#39;]=&#39;女&#39;<br>df = pd.concat([df_male, df_female], axis=0) # 把男生女生的数据连接至一个新的Dataframe对象df<br>fig = px.funnel(df, x=&#39;number&#39;, y=&#39;stage&#39;, color=&#39;性别&#39;) # 把df中的数据传进漏斗<br>fig.show()","like_count":0},{"had_liked":false,"id":323478,"user_name":"夏日🍉情缘","can_delete":false,"product_type":"c1","uid":2755497,"ip_address":"","ucode":"0BD258E390E537","user_header":"https://static001.geekbang.org/account/avatar/00/2a/0b/a9/ccacdd57.jpg","comment_is_top":false,"comment_ctime":1637921084,"is_pvip":false,"replies":[{"id":"117526","content":"🍻","user_name":"作者回复","user_name_real":"编辑","uid":"1809833","ctime":1638171607,"ip_address":"","comment_id":323478,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1637921084","product_id":100085501,"comment_content":"import pandas as pd # 导入Pandas<br>stages = [&quot;访问数&quot;, &quot;下载数&quot;, &quot;注册数&quot;, &quot;搜索数&quot;, &quot;付款数&quot;] # 漏斗的阶段<br># 漏斗的数据<br>df_male = pd.DataFrame(dict(number=[30, 15, 10, 6, 1], stage=stages))<br>df_male[&#39;性别&#39;] = &#39;男&#39;<br>df_female = pd.DataFrame(dict(number=[29, 17, 8, 3, 1], stage=stages))<br>df_female[&#39;性别&#39;] = &#39;女&#39;<br>df = pd.concat([df_male, df_female], axis=0) # 把男生女生的数据连接至一个新的Dataframe对象df<br>fig = px.funnel(df, x=&#39;number&#39;, y=&#39;stage&#39;, color=&#39;性别&#39;) # 把df中的数据传进漏斗<br>fig.show() #显示漏斗图","like_count":0,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"黄佳","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":534363,"discussion_content":"🍻","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638171607,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":320826,"user_name":"Geek_80f43d","can_delete":false,"product_type":"c1","uid":2840591,"ip_address":"","ucode":"223EDD7511470C","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLgWP0AWxax7DR8zh7Pd1U8UqzX4lAlkvMGCBgAOzpnvpgD1FxLwqQoH3T5vVcd7j8RRdpETjPB1w/132","comment_is_top":false,"comment_ctime":1636524183,"is_pvip":false,"replies":[{"id":"116879","content":"🤞","user_name":"作者回复","user_name_real":"编辑","uid":"1809833","ctime":1637075556,"ip_address":"","comment_id":320826,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1636524183","product_id":100085501,"comment_content":"level = [&#39;访问数&#39;,&#39;下载数&#39;,&#39;注册数&#39;,&#39;搜索数&#39;,&#39;付款数&#39;]<br>df_male = pd.DataFrame({&#39;number&#39;:[25,19,14,7,3] ,&#39;stage&#39; : level})<br>df_male[&#39;性别&#39;]=&#39;男性&#39;<br>df_female = pd.DataFrame({&#39;number&#39;:[22,16,12,6,2] ,&#39;stage&#39; : level})<br>df_female[&#39;性别&#39;]=&#39;女性&#39;<br>df = pd.concat([df_male,df_female],axis= 0)<br>px.funnel(df,x = &#39;number&#39;, y =&#39;stage&#39;,color = &#39;性别&#39;).show()","like_count":0,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"黄佳","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":530463,"discussion_content":"🤞","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637075556,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":318046,"user_name":"小强","can_delete":false,"product_type":"c1","uid":2034712,"ip_address":"","ucode":"D1B0DA58E4D969","user_header":"https://static001.geekbang.org/account/avatar/00/1f/0c/18/298a0eab.jpg","comment_is_top":false,"comment_ctime":1635131082,"is_pvip":false,"replies":[{"id":"116894","content":"谢谢分享","user_name":"作者回复","user_name_real":"编辑","uid":"1809833","ctime":1637079382,"ip_address":"","comment_id":318046,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1635131082","product_id":100085501,"comment_content":"#若出现Bad file descriptor (C:\\projects\\libzmq\\src\\epoll.cpp:100)<br>#可将现有的 pyzmq 库进行卸载<br>#pip uninstall pyzmq<br>#然后安装低版本的 pyzmq==19.0.2<br>#pip install pyzmq==19.0.2<br>#我是使用此方式解决的。<br>","like_count":0,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"黄佳","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":530532,"discussion_content":"谢谢分享","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637079382,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":317509,"user_name":"抓白兔的大猪文","can_delete":false,"product_type":"c1","uid":2630199,"ip_address":"","ucode":"09F3F2C4C9E43B","user_header":"https://static001.geekbang.org/account/avatar/00/28/22/37/61e24c86.jpg","comment_is_top":false,"comment_ctime":1634819616,"is_pvip":false,"replies":[{"id":"116873","content":"👌","user_name":"作者回复","user_name_real":"编辑","uid":"1809833","ctime":1637074718,"ip_address":"","comment_id":317509,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1634819616","product_id":100085501,"comment_content":"# 导入数据分析模块<br>import numpy as np<br>import pandas as pd<br>import plotly.express as px<br># 准备数据<br>data_male = pd.DataFrame(data = dict(stage = [&#39;访问数&#39;,&#39;下载数&#39;,&#39;注册数&#39;,&#39;搜索数&#39;,&#39;付款数&#39;],<br>                                     number = [30,15,10,6,1],<br>                                     gender = &#39;男&#39;))<br>data_female = pd.DataFrame(data = dict(stage = [&#39;访问数&#39;,&#39;下载数&#39;,&#39;注册数&#39;,&#39;搜索数&#39;,&#39;付款数&#39;],<br>                                       number = [29,17,8,3,1],<br>                                       gender = &#39;女&#39;))<br>data = pd.concat([data_male, data_female], axis = 0)<br><br># 绘制漏斗图<br>fig = px.funnel(data_frame = data, x =&#39;number&#39;, y = &#39;stage&#39;, color = &#39;gender&#39;)<br>fig.show()<br>","like_count":0,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"黄佳","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":530451,"discussion_content":"👌","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637074718,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":314905,"user_name":"！null","can_delete":false,"product_type":"c1","uid":1242483,"ip_address":"","ucode":"4E5B7922980397","user_header":"https://static001.geekbang.org/account/avatar/00/12/f5/73/f7d3a996.jpg","comment_is_top":false,"comment_ctime":1633569581,"is_pvip":false,"replies":[{"id":"114071","content":"这是专栏课哈，图文+音频的形式","user_name":"编辑回复","user_name_real":"王晓青","uid":"1743208","ctime":1633661289,"ip_address":"","comment_id":314905,"utype":2}],"discussion_count":2,"race_medal":0,"score":"1633569581","product_id":100085501,"comment_content":"咋不做成视频课？","like_count":0,"discussions":[{"author":{"id":1743208,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/99/68/62a3e325.jpg","nickname":"阿拉星","note":"","ucode":"B5FB18E4A9D408","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527830,"discussion_content":"这是专栏课哈，图文+音频的形式","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633661289,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":4}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1087879,"avatar":"https://static001.geekbang.org/account/avatar/00/10/99/87/98ebb20e.jpg","nickname":"dao","note":"","ucode":"4181FB270462CF","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":401462,"discussion_content":"各有所爱吧，我喜欢图文版。视频版，查找很困难。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633677721,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":313933,"user_name":"河宣潮广","can_delete":false,"product_type":"c1","uid":2778064,"ip_address":"","ucode":"CD5B4AA2EF263D","user_header":"https://static001.geekbang.org/account/avatar/00/2a/63/d0/a0cc950d.jpg","comment_is_top":false,"comment_ctime":1632747228,"is_pvip":false,"replies":[{"id":"113656","content":"✔️","user_name":"作者回复","user_name_real":"黄佳","uid":"1809833","ctime":1632757252,"ip_address":"","comment_id":313933,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1632747228","product_id":100085501,"comment_content":"import pandas as pd # 导入Pandas<br>stages = [&quot;访问数&quot;, &quot;下载数&quot;, &quot;注册数&quot;, &quot;搜索数&quot;, &quot;付款数&quot;] # 漏斗的阶段<br># 漏斗的数据<br>df_male = pd.DataFrame(dict(number=[30,15, 10, 6, 1], stage=stages))<br>df_male[&#39;性别&#39;] = &#39;男&#39;<br>df_female=pd.DataFrame(dict(number=[29,17,8,3,-1],stage=stages))<br>df_female[&#39;性别&#39;] = &#39;女&#39;<br>df=pd.concat([df_male, df_female], axis=0) # 把男生女生的数据连接至一个新的Dataframe对象df<br>fig = px.funnel(df, x=&#39;number&#39;, y=&#39;stage&#39;, color=&#39;性别&#39;) # 把df中的数据传进漏斗<br>fig.show()","like_count":0,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"黄佳","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527523,"discussion_content":"✔️","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632757252,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":313726,"user_name":"Lindsay","can_delete":false,"product_type":"c1","uid":2235114,"ip_address":"","ucode":"0CF5D7EEC7CD9F","user_header":"https://static001.geekbang.org/account/avatar/00/22/1a/ea/a9c665dc.jpg","comment_is_top":false,"comment_ctime":1632639146,"is_pvip":false,"replies":[{"id":"113618","content":"Plotly漏斗图和HTML网页结合的比较好。<br><br>在spyder是不是也可以显示，但是好像结合的不那么好，试着搜索一下解决方案。或者参考这个链接试试。<br><br>https:&#47;&#47;stackoverflow.com&#47;questions&#47;35315726&#47;plotly-how-to-display-charts-in-spyder","user_name":"作者回复","user_name_real":"黄佳","uid":"1809833","ctime":1632657307,"ip_address":"","comment_id":313726,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1632639146","product_id":100085501,"comment_content":"老师，请问以下代码在jupyter中可以运行成功并显示漏斗图，但在anaconda的spyder中运行成功确不能显示出漏斗图，是什么原因呀？<br>import pandas as pd # 导入Pandas<br>import plotly.express as px<br>stages = [&quot;访问数&quot;, &quot;下载数&quot;, &quot;注册数&quot;, &quot;搜索数&quot;, &quot;付款数&quot;] # 漏斗的阶段<br># 漏斗的数据<br>df_male = pd.DataFrame(dict(number=[30, 15, 10, 6, 1], stage=stages))<br>df_male[&#39;性别&#39;] = &#39;男&#39;<br>df_female = pd.DataFrame(dict(number=[29,17,8,3,1],stage=stages))<br>df_female[&#39;性别&#39;] = &#39;女&#39;<br>df = pd.concat([df_male, df_female], axis=0) # 把男生女生的数据连接至一个新的Dataframe对象df<br>fig = px.funnel(df, x=&#39;number&#39;, y=&#39;stage&#39;, color=&#39;性别&#39;) # 把df中的数据传进漏斗<br>fig.show()<br>","like_count":0,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"黄佳","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527452,"discussion_content":"Plotly漏斗图和HTML网页结合的比较好。\n\n在spyder是不是也可以显示，但是好像结合的不那么好，试着搜索一下解决方案。或者参考这个链接试试。\n\nhttps://stackoverflow.com/questions/35315726/plotly-how-to-display-charts-in-spyder","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632657307,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":312732,"user_name":"shatu","can_delete":false,"product_type":"c1","uid":2760732,"ip_address":"","ucode":"27077AA35B8C22","user_header":"https://static001.geekbang.org/account/avatar/00/2a/20/1c/de379ed1.jpg","comment_is_top":false,"comment_ctime":1631955719,"is_pvip":false,"replies":[{"id":"113354","content":"✔️","user_name":"作者回复","user_name_real":"黄佳","uid":"1809833","ctime":1632068106,"ip_address":"","comment_id":312732,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1631955719","product_id":100085501,"comment_content":"import pandas as pd <br>stages = [&quot;访问数&quot;, &quot;下载数&quot;, &quot;注册数&quot;, &quot;搜索数&quot;, &quot;付款数&quot;] # 漏斗的阶段<br><br>df_male = pd.DataFrame(dict(number=[30, 15, 10, 6, 1], stage=stages))<br>df_male[&#39;性别&#39;] = &#39;男&#39;<br>df_female = pd.DataFrame(dict(number=[29, 17, 8, 3, 1], stage=stages))<br>df_female[&#39;性别&#39;] = &#39;女&#39;<br><br>df = pd.concat([df_male, df_female], axis=0) # 把男生女生的数据连接至一个新的Dataframe对象df<br>fig = px.funnel(df, x=&#39;number&#39;, y=&#39;stage&#39;, color=&#39;性别&#39;) # 把df中的数据传进漏斗<br>fig.show()","like_count":0,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"黄佳","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527092,"discussion_content":"✔️","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632068106,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":312669,"user_name":"罗辑","can_delete":false,"product_type":"c1","uid":1539649,"ip_address":"","ucode":"06AB60316B51C4","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/OwZuBRbVUkziazePs2xTKskNpZachRtCBZLHlv4dAUgaBC5qHI292xaxvg3atGnHlDwjIOXPKEbc7zOrtMyicSNg/132","comment_is_top":false,"comment_ctime":1631934258,"is_pvip":false,"replies":[{"id":"113352","content":"好的，加油！","user_name":"作者回复","user_name_real":"黄佳","uid":"1809833","ctime":1632068032,"ip_address":"","comment_id":312669,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1631934258","product_id":100085501,"comment_content":"手动交作业：<br><br>from plotly import express as px<br>name=[&#39;visit&#39;,&#39;download&#39;,&#39;register&#39;,&#39;search&#39;,&#39;pay&#39;,&#39;vip&#39;]<br>male=[100,50,20,10,5,2]<br>female=[120,80,40,25,9,4]<br>dict_male=dict(name=name,data=male)<br>male_data =pd.DataFrame(dict_male)<br>male_data[&#39;sex&#39;]=&#39;male&#39;<br><br>dict_female=dict(name=name,data=female)<br>female_data =pd.DataFrame(dict_female)<br>female_data[&#39;sex&#39;]=&#39;female&#39;<br><br>all = pd.concat(objs=[male_data,female_data],axis=0)<br><br>fig = px.funnel(all,x=&#39;data&#39;,y=&#39;name&#39;,color=&#39;sex&#39;)<br>fig.show()<br><br>跟着老师的步伐学习","like_count":0,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"黄佳","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527071,"discussion_content":"好的，加油！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632068032,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":312076,"user_name":"宏伟","can_delete":false,"product_type":"c1","uid":2764948,"ip_address":"","ucode":"82EFC7D18CBFB8","user_header":"https://static001.geekbang.org/account/avatar/00/2a/30/94/12c20983.jpg","comment_is_top":false,"comment_ctime":1631613754,"is_pvip":false,"replies":[{"id":"113082","content":"＊是正在运行中。Plotly包安装好了吗？入群和其它同学交流一下吧。","user_name":"作者回复","user_name_real":"黄佳","uid":"1809833","ctime":1631622011,"ip_address":"","comment_id":312076,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1631613754","product_id":100085501,"comment_content":"用notebook执行讲义中的代码后，没有显示漏斗图，前面的in的括号里是*，不是数字的序号，怎么解决呢？<br>","like_count":0,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"黄佳","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526854,"discussion_content":"＊是正在运行中。Plotly包安装好了吗？入群和其它同学交流一下吧。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631622011,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":310550,"user_name":"KL宇","can_delete":false,"product_type":"c1","uid":1013659,"ip_address":"","ucode":"8ED3B2BB07AE17","user_header":"https://static001.geekbang.org/account/avatar/00/0f/77/9b/c18f4047.jpg","comment_is_top":false,"comment_ctime":1630738460,"is_pvip":true,"replies":[{"id":"112502","content":"感谢👍👍","user_name":"作者回复","user_name_real":"黄佳","uid":"1809833","ctime":1630745641,"ip_address":"","comment_id":310550,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1630738460","product_id":100085501,"comment_content":"安装报错的可以用这个镜像,pip install -i https:&#47;&#47;pypi.tuna.tsinghua.edu.cn&#47;simple plotly","like_count":0,"discussions":[{"author":{"id":1809833,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/a9/4602808f.jpg","nickname":"黄佳","note":"","ucode":"8EC41D2EAB0E3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526271,"discussion_content":"感谢👍👍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630745641,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2630199,"avatar":"https://static001.geekbang.org/account/avatar/00/28/22/37/61e24c86.jpg","nickname":"抓白兔的大猪文","note":"","ucode":"09F3F2C4C9E43B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":406291,"discussion_content":"感谢师兄的代码 在jupter中可以运行安装模块代码了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634735914,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}