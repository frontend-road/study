{"id":104643,"title":"71 | iPhone X适配","content":"<p><strong>PDF 课件和源代码下载地址：</strong></p><p><a href=\"https://gitee.com/geektime-geekbang/geektime-ios-course\">https://gitee.com/geektime-geekbang/geektime-ios-course</a></p>","comments":[{"had_liked":false,"id":157541,"user_name":"欢欢","can_delete":false,"product_type":"c3","uid":1647448,"ip_address":"","ucode":"D459202D508011","user_header":"https://static001.geekbang.org/account/avatar/00/19/23/58/9ac72c2c.jpg","comment_is_top":false,"comment_ctime":1575190558,"is_pvip":false,"replies":[{"id":62115,"content":"首先statusBarOrientation在iOS13中标记了API_DEPRECATED，其实大部分App都要兼容iOS13以前的版本，所以对于一般的App来说是不需要修改的。在iOS13中，由于UIWindowScene的引入，UIApplication的职责发生了变化，UI相关的逻辑都拆分到了UIWindowScene中，所以对于读取，我们直接读取UIWindowScene.interfaceOrientation即可；同时由于statusBarOrientation是readwrite的(虽然文档中建议在iOS6之后就不在使用了，iOS9已经标记DEPRECATED)，好多项目仍然配合controller的shouldAutorotate使用这种方式进行旋转，这部分不是iOS13的问题，解决的办法一般是设置UIDevice&#47;隐藏掉statusbar&#47;自定义transform等。","user_name":"作者回复","user_name_real":"zzz","uid":1041455,"ctime":1576724744,"ip_address":"","comment_id":157541,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100025901,"comment_content":"老师你好，iOS13中statusBarOrientation被废弃了，要用interfaceOrientation替代，请问怎么用新方法适配","like_count":2,"discussions":[{"author":{"id":1041455,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKJ3dLlYr6tznfnZXJNsD7Jw48BVnFSib3RO3VWEN0pgebRY1jaR8YXLQ6iaAjTsFiamOWSA3UPAa37A/132","nickname":"Geek_e7jq8k","note":"","ucode":"352964E5D793DA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476459,"discussion_content":"首先statusBarOrientation在iOS13中标记了API_DEPRECATED，其实大部分App都要兼容iOS13以前的版本，所以对于一般的App来说是不需要修改的。在iOS13中，由于UIWindowScene的引入，UIApplication的职责发生了变化，UI相关的逻辑都拆分到了UIWindowScene中，所以对于读取，我们直接读取UIWindowScene.interfaceOrientation即可；同时由于statusBarOrientation是readwrite的(虽然文档中建议在iOS6之后就不在使用了，iOS9已经标记DEPRECATED)，好多项目仍然配合controller的shouldAutorotate使用这种方式进行旋转，这部分不是iOS13的问题，解决的办法一般是设置UIDevice/隐藏掉statusbar/自定义transform等。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576724744,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":160855,"user_name":"姜浩远","can_delete":false,"product_type":"c3","uid":1236739,"ip_address":"","ucode":"6ED5CA8283858B","user_header":"https://static001.geekbang.org/account/avatar/00/12/df/03/6613bd63.jpg","comment_is_top":false,"comment_ctime":1576047469,"is_pvip":false,"replies":[{"id":62009,"content":"虽然AutoLayout系统不断的优化，但是性能上相对Frame还是差一些。同时对于单一的场景（非横竖屏等），基于目前App的常规样式设计，其实AutoLayout的代码不见得比Frame代码少。 而最重要的，无论从需求的复杂程度、组件的封装复用、性能的深入优化、以及各种动画效果等，frame都会带来很多的便利。所以主流的App，都是Frame为主实现，辅助部分页面autoLayout混合。那么对于iPhoneX适配这种底层功能，我们需要的就是普世的方案，能支持可能的各种布局方式的实现，所以在课程中主要介绍了Frame的方式。","user_name":"作者回复","user_name_real":"zzz","uid":1041455,"ctime":1576675954,"ip_address":"","comment_id":160855,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100025901,"comment_content":"为什么要用 Frame 布局呢？使用 Auto Layout 布局再对 iPhone X 进行适配不是更简单么？","like_count":1,"discussions":[{"author":{"id":1041455,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKJ3dLlYr6tznfnZXJNsD7Jw48BVnFSib3RO3VWEN0pgebRY1jaR8YXLQ6iaAjTsFiamOWSA3UPAa37A/132","nickname":"Geek_e7jq8k","note":"","ucode":"352964E5D793DA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477505,"discussion_content":"虽然AutoLayout系统不断的优化，但是性能上相对Frame还是差一些。同时对于单一的场景（非横竖屏等），基于目前App的常规样式设计，其实AutoLayout的代码不见得比Frame代码少。 而最重要的，无论从需求的复杂程度、组件的封装复用、性能的深入优化、以及各种动画效果等，frame都会带来很多的便利。所以主流的App，都是Frame为主实现，辅助部分页面autoLayout混合。那么对于iPhoneX适配这种底层功能，我们需要的就是普世的方案，能支持可能的各种布局方式的实现，所以在课程中主要介绍了Frame的方式。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576675954,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":114643,"user_name":"起风了001","can_delete":false,"product_type":"c3","uid":1529929,"ip_address":"","ucode":"8DCDBA40B8CC9F","user_header":"","comment_is_top":false,"comment_ctime":1563355366,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100025901,"comment_content":"之前一般用约束适配, 这样遇到自定义的视图或者直接运算frame的场景下就很麻烦, 所以这几个宏是必不可少的, 不管是约束适配还是frame适配, 都有可能用到.","like_count":3},{"had_liked":false,"id":200779,"user_name":"Harry","can_delete":false,"product_type":"c3","uid":1471061,"ip_address":"","ucode":"6F78815044BBC6","user_header":"","comment_is_top":false,"comment_ctime":1585649726,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100025901,"comment_content":"老师，关于苹果强制要求使用LaunchScreen 来设置启动页，类似于8p  iphoneX 这种都是@3x的尺寸，怎么来更好的适配刘海屏和非刘海屏，使启动页不至于拉伸变形。","like_count":1},{"had_liked":false,"id":295359,"user_name":"皮特尔","can_delete":false,"product_type":"c3","uid":1017161,"ip_address":"","ucode":"313862C91DD325","user_header":"https://static001.geekbang.org/account/avatar/00/0f/85/49/585c69c4.jpg","comment_is_top":false,"comment_ctime":1622383766,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100025901,"comment_content":"用屏幕尺寸来判断刘海机型并不靠谱，将来有新的屏幕尺寸出来就不适配了。\n其实UIDevice 有方法可以判断当前是否是刘海屏。","like_count":0},{"had_liked":false,"id":258199,"user_name":"用户","can_delete":false,"product_type":"c3","uid":2266972,"ip_address":"","ucode":"52D639FB1ABCE7","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83er6XOX1f5g3RJFznbPQdO4j1iaRISEVR6Xn4BviaehPOoqAjfrDswIIsaKPA5DNs9iaHeG3tCGd1icbNQ/132","comment_is_top":false,"comment_ctime":1604325067,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100025901,"comment_content":"为什么不用safeAreaInsets，来获取上方非安全区域的高度呢？","like_count":0}]}