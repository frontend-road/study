{"id":110859,"title":"13 | 经典控件（二）：UITableView/ListView在Flutter中是什么？","content":"<p>你好，我是陈航。</p><p>在上一篇文章中，我和你一起学习了文本、图片和按钮这3大经典组件在Flutter中的使用方法，以及如何在实际开发中根据不同的场景，去自定义展示样式。</p><p>文本、图片和按钮这些基本元素，需要进行排列组合，才能构成我们看到的UI视图。那么，当这些基本元素的排列布局超过屏幕显示尺寸（即超过一屏）时，我们就需要引入列表控件来展示视图的完整内容，并根据元素的多少进行自适应滚动展示。</p><p>这样的需求，在Android中是由ListView或RecyclerView实现的，在iOS中是用UITableView实现的；而在Flutter中，实现这种需求的则是列表控件ListView。</p><h2>ListView</h2><p>在Flutter中，ListView可以沿一个方向（垂直或水平方向）来排列其所有子Widget，因此常被用于需要展示一组连续视图元素的场景，比如通信录、优惠券、商家列表等。</p><p>我们先来看看ListView怎么用。<strong>ListView提供了一个默认构造函数ListView</strong>，我们可以通过设置它的children参数，很方便地将所有的子Widget包含到ListView中。</p><p>不过，这种创建方式要求提前将所有子Widget一次性创建好，而不是等到它们真正在屏幕上需要显示时才创建，所以有一个很明显的缺点，就是性能不好。因此，<strong>这种方式仅适用于列表中含有少量元素的场景</strong>。</p><!-- [[[read_end]]] --><p>如下所示，我定义了一组列表项组件，并将它们放在了垂直滚动的ListView中：</p><pre><code>ListView(\n  children: &lt;Widget&gt;[\n    //设置ListTile组件的标题与图标 \n    ListTile(leading: Icon(Icons.map),  title: Text('Map')),\n    ListTile(leading: Icon(Icons.mail), title: Text('Mail')),\n    ListTile(leading: Icon(Icons.message), title: Text('Message')),\n  ]);\n</code></pre><blockquote>\n<p>备注：ListTile是Flutter提供的用于快速构建列表项元素的一个小组件单元，用于1~3行（leading、title、subtitle）展示文本、图标等视图元素的场景，通常与ListView配合使用。<br>\n上面这段代码中用到ListTile，是为了演示ListView的能力。关于ListTile的具体使用细节，并不是本篇文章的重点，如果你想深入了解的话，可以参考<a href=\"https://api.flutter.dev/flutter/material/ListTile-class.html\">官方文档</a>。</p>\n</blockquote><p>运行效果，如下图所示：</p><p><img src=\"https://static001.geekbang.org/resource/image/b1/01/b152f47246c851c3c1878564f07de101.png?wh=828*1792\" alt=\"\"></p><center><span class=\"reference\">图1 ListView默认构造函数</span></center><p>除了默认的垂直方向布局外，ListView还可以通过设置scrollDirection参数支持水平方向布局。如下所示，我定义了一组不同颜色背景的组件，将它们的宽度设置为140，并包在了水平布局的ListView中，让它们可以横向滚动：</p><pre><code>ListView(\n    scrollDirection: Axis.horizontal,\n    itemExtent: 140, //item延展尺寸(宽度)\n    children: &lt;Widget&gt;[\n      Container(color: Colors.black),\n      Container(color: Colors.red),\n      Container(color: Colors.blue),\n      Container(color: Colors.green),\n      Container(color: Colors.yellow),\n      Container(color: Colors.orange),\n    ]);\n</code></pre><p>运行效果，如下图所示：</p><p><img src=\"https://static001.geekbang.org/resource/image/df/ac/df382224daeca7067d3a9c5acc5febac.gif?wh=640*1136\" alt=\"\"></p><center><span class=\"reference\">图2 水平滚动的ListView</span></center><p>在这个例子中，我们一次性创建了6个子Widget。但从图2的运行效果可以看到，由于屏幕的宽高有限，同一时间用户只能看到3个Widget。也就是说，是否一次性提前构建出所有要展示的子Widget，与用户而言并没有什么视觉上的差异。</p><p>所以，考虑到创建子Widget产生的性能问题，更好的方法是抽象出创建子Widget的方法，交由ListView统一管理，在真正需要展示该子Widget时再去创建。</p><p><strong>ListView的另一个构造函数ListView.builder，则适用于子Widget比较多的场景</strong>。这个构造函数有两个关键参数：</p><ul>\n<li>itemBuilder，是列表项的创建方法。当列表滚动到相应位置时，ListView会调用该方法创建对应的子Widget。</li>\n<li>itemCount，表示列表项的数量，如果为空，则表示ListView为无限列表。</li>\n</ul><p>同样地，我通过一个案例，与你说明itemBuilder与itemCount这两个参数的具体用法。</p><p>我定义了一个拥有100个列表元素的ListView，在列表项的创建方法中，分别将index的值设置为ListTile的标题与子标题。比如，第一行列表项会展示title 0 body 0：</p><pre><code>ListView.builder(\n    itemCount: 100, //元素个数\n    itemExtent: 50.0, //列表项高度\n    itemBuilder: (BuildContext context, int index) =&gt; ListTile(title: Text(&quot;title $index&quot;), subtitle: Text(&quot;body $index&quot;))\n);\n</code></pre><p>这里需要注意的是，<strong>itemExtent并不是一个必填参数。但，对于定高的列表项元素，我强烈建议你提前设置好这个参数的值。</strong></p><p>因为如果这个参数为null，ListView会动态地根据子Widget创建完成的结果，决定自身的视图高度，以及子Widget在ListView中的相对位置。在滚动发生变化而列表项又很多时，这样的计算就会非常频繁。</p><p>但如果提前设置好itemExtent，ListView则可以提前计算好每一个列表项元素的相对位置，以及自身的视图高度，省去了无谓的计算。</p><p>因此，在ListView中，指定itemExtent比让子Widget自己决定自身高度会更高效。</p><p>运行这个示例，效果如下所示：</p><p><img src=\"https://static001.geekbang.org/resource/image/d6/5a/d654c5a28056afc017fe3f085230745a.png?wh=828*1792\" alt=\"\"></p><center><span class=\"reference\">图3 ListView.builder构造函数</span></center><p>可能你已经发现了，我们的列表还缺少分割线。在ListView中，有两种方式支持分割线：</p><ul>\n<li>一种是，在itemBuilder中，根据index的值动态创建分割线，也就是将分割线视为列表项的一部分；</li>\n<li>另一种是，使用ListView的另一个构造方法ListView.separated，单独设置分割线的样式。</li>\n</ul><p>第一种方式实际上是视图的组合，之前的分享中我们已经多次提及，对你来说应该已经比较熟悉了，这里我就不再过多地介绍了。接下来，我和你演示一下<strong>如何使用ListView.separated设置分割线。</strong></p><p>与ListView.builder抽离出了子Widget的构建方法类似，ListView.separated抽离出了分割线的创建方法separatorBuilder，以便根据index设置不同样式的分割线。</p><p>如下所示，我针对index为偶数的场景，创建了绿色的分割线，而针对index为奇数的场景，创建了红色的分割线：</p><pre><code>//使用ListView.separated设置分割线\nListView.separated(\n    itemCount: 100,\n    separatorBuilder: (BuildContext context, int index) =&gt; index %2 ==0? Divider(color: Colors.green) : Divider(color: Colors.red),//index为偶数，创建绿色分割线；index为奇数，则创建红色分割线\n    itemBuilder: (BuildContext context, int index) =&gt; ListTile(title: Text(&quot;title $index&quot;), subtitle: Text(&quot;body $index&quot;))//创建子Widget\n)\n</code></pre><p>运行效果，如下所示：</p><p><img src=\"https://static001.geekbang.org/resource/image/5e/3b/5e1ef0977150346fa95f23232d628e3b.png?wh=828*1792\" alt=\"\"></p><center><span class=\"reference\">图4 ListView.separated构造函数</span></center><p>好了，我已经与你分享完了ListView的常见构造函数。接下来，我准备了一张表格，总结了ListView常见的构造方法及其适用场景，供你参考，以便理解与记忆：</p><p><img src=\"https://static001.geekbang.org/resource/image/00/18/00e6c9f8724fcf50757b4a76fa4c9b18.png?wh=932*340\" alt=\"\"></p><center><span class=\"reference\">图5 ListView常见的构造方法及其适用场景</span></center><h2>CustomScrollView</h2><p>好了，ListView实现了单一视图下可滚动Widget的交互模型，同时也包含了UI显示相关的控制逻辑和布局模型。但是，对于某些特殊交互场景，比如多个效果联动、嵌套滚动、精细滑动、视图跟随手势操作等，还需要嵌套多个ListView来实现。这时，各自视图的滚动和布局模型就是相互独立、分离的，就很难保证整个页面统一一致的滑动效果。</p><p>那么，<strong>Flutter是如何解决多ListView嵌套时，页面滑动效果不一致的问题的呢？</strong></p><p>在Flutter中有一个专门的控件CustomScrollView，用来处理多个需要自定义滚动效果的Widget。在CustomScrollView中，<strong>这些彼此独立的、可滚动的Widget被统称为Sliver</strong>。</p><p>比如，ListView的Sliver实现为SliverList，AppBar的Sliver实现为SliverAppBar。这些Sliver不再维护各自的滚动状态，而是交由CustomScrollView统一管理，最终实现滑动效果的一致性。</p><p>接下来，我通过一个滚动视差的例子，与你演示CustomScrollView的使用方法。</p><p><strong>视差滚动</strong>是指让多层背景以不同的速度移动，在形成立体滚动效果的同时，还能保证良好的视觉体验。 作为移动应用交互设计的热点趋势，越来越多的移动应用使用了这项技术。</p><p>以一个有着封面头图的列表为例，我们希望封面头图和列表这两层视图的滚动联动起来，当用户滚动列表时，头图会根据用户的滚动手势，进行缩小和展开。</p><p>经分析得出，要实现这样的需求，我们需要两个Sliver：作为头图的SliverAppBar，与作为列表的SliverList。具体的实现思路是：</p><ul>\n<li>在创建SliverAppBar时，把flexibleSpace参数设置为悬浮头图背景。flexibleSpace可以让背景图显示在AppBar下方，高度和SliverAppBar一样；</li>\n<li>而在创建SliverList时，通过SliverChildBuilderDelegate参数实现列表项元素的创建；</li>\n<li>最后，将它们一并交由CustomScrollView的slivers参数统一管理。</li>\n</ul><p>具体的示例代码如下所示：</p><pre><code>CustomScrollView(\n  slivers: &lt;Widget&gt;[\n    SliverAppBar(//SliverAppBar作为头图控件\n      title: Text('CustomScrollView Demo'),//标题\n      floating: true,//设置悬浮样式\n      flexibleSpace: Image.network(&quot;https://xx.jpg&quot;,fit:BoxFit.cover),//设置悬浮头图背景\n      expandedHeight: 300,//头图控件高度\n    ),\n    SliverList(//SliverList作为列表控件\n      delegate: SliverChildBuilderDelegate(\n            (context, index) =&gt; ListTile(title: Text('Item #$index')),//列表项创建方法\n        childCount: 100,//列表元素个数\n      ),\n    ),\n  ]);\n</code></pre><p>运行一下，视差滚动效果如下所示：</p><p><img src=\"https://static001.geekbang.org/resource/image/dc/21/dcf89204e537f828d197dc3b916ca321.gif?wh=776*1592\" alt=\"\"></p><center><span class=\"reference\">图6 CustomScrollView示例</span></center><h2>ScrollController与ScrollNotification</h2><p>现在，你应该已经知道如何实现滚动视图的视觉和交互效果了。接下来，我再与你分享一个更为复杂的问题：在某些情况下，我们希望获取视图的滚动信息，并进行相应的控制。比如，列表是否已经滑到底（顶）了？如何快速回到列表顶部？列表滚动是否已经开始，或者是否已经停下来了？</p><p>对于前两个问题，我们可以使用ScrollController进行滚动信息的监听，以及相应的滚动控制；而最后一个问题，则需要接收ScrollNotification通知进行滚动事件的获取。下面我将分别与你介绍。</p><p>在Flutter中，因为Widget并不是渲染到屏幕的最终视觉元素（RenderObject才是），所以我们无法像原生的Android或iOS系统那样，向持有的Widget对象获取或设置最终渲染相关的视觉信息，而必须通过对应的组件控制器才能实现。</p><p>ListView的组件控制器则是ScrollControler，我们可以通过它来获取视图的滚动信息，更新视图的滚动位置。</p><p>一般而言，获取视图的滚动信息往往是为了进行界面的状态控制，因此ScrollController的初始化、监听及销毁需要与StatefulWidget的状态保持同步。</p><p>如下代码所示，我们声明了一个有着100个元素的列表项，当滚动视图到特定位置后，用户可以点击按钮返回列表顶部：</p><ul>\n<li>首先，我们在State的初始化方法里，创建了ScrollController，并通过_controller.addListener注册了滚动监听方法回调，根据当前视图的滚动位置，判断当前是否需要展示“Top”按钮。</li>\n<li>随后，在视图构建方法build中，我们将ScrollController对象与ListView进行了关联，并且在RaisedButton中注册了对应的回调方法，可以在点击按钮时通过_controller.animateTo方法返回列表顶部。</li>\n<li>最后，在State的销毁方法中，我们对ScrollController进行了资源释放。</li>\n</ul><pre><code>class MyAPPState extends State&lt;MyApp&gt; {\n  ScrollController _controller;//ListView控制器\n  bool isToTop = false;//标示目前是否需要启用&quot;Top&quot;按钮\n  @override\n  void initState() {\n    _controller = ScrollController();\n    _controller.addListener(() {//为控制器注册滚动监听方法\n      if(_controller.offset &gt; 1000) {//如果ListView已经向下滚动了1000，则启用Top按钮\n        setState(() {isToTop = true;});\n      } else if(_controller.offset &lt; 300) {//如果ListView向下滚动距离不足300，则禁用Top按钮\n        setState(() {isToTop = false;});\n      }\n    });\n    super.initState();\n  }\n\n  Widget build(BuildContext context) {\n    return MaterialApp(\n        ...\n        //顶部Top按钮，根据isToTop变量判断是否需要注册滚动到顶部的方法\n        RaisedButton(onPressed: (isToTop ? () {\n                  if(isToTop) {\n                    _controller.animateTo(.0,\n                        duration: Duration(milliseconds: 200),\n                        curve: Curves.ease\n                    );//做一个滚动到顶部的动画\n                  }\n                }:null),child: Text(&quot;Top&quot;),)\n        ...\n        ListView.builder(\n                controller: _controller,//初始化传入控制器\n                itemCount: 100,//列表元素总数\n                itemBuilder: (context, index) =&gt; ListTile(title: Text(&quot;Index : $index&quot;)),//列表项构造方法\n               )      \n        ...   \n    );\n\n  @override\n  void dispose() {\n    _controller.dispose(); //销毁控制器\n    super.dispose();\n  }\n}\n</code></pre><p>ScrollController的运行效果如下所示：</p><p><img src=\"https://static001.geekbang.org/resource/image/61/1b/61533dc0e445bd529879698ad3491b1b.gif?wh=768*1592\" alt=\"\"></p><center><span class=\"reference\">图7 ScrollController示例</span></center><p>介绍完了如何通过ScrollController来监听ListView滚动信息，以及怎样进行滚动控制之后，接下来我们再看看<strong>如何获取ScrollNotification通知，从而感知ListView的各类滚动事件</strong>。</p><p>在Flutter中，ScrollNotification通知的获取是通过NotificationListener来实现的。与ScrollController不同的是，NotificationListener是一个Widget，为了监听滚动类型的事件，我们需要将NotificationListener添加为ListView的父容器，从而捕获ListView中的通知。而这些通知，需要通过onNotification回调函数实现监听逻辑：</p><pre><code>Widget build(BuildContext context) {\n  return MaterialApp(\n    title: 'ScrollController Demo',\n    home: Scaffold(\n      appBar: AppBar(title: Text('ScrollController Demo')),\n      body: NotificationListener&lt;ScrollNotification&gt;(//添加NotificationListener作为父容器\n        onNotification: (scrollNotification) {//注册通知回调\n          if (scrollNotification is ScrollStartNotification) {//滚动开始\n            print('Scroll Start');\n          } else if (scrollNotification is ScrollUpdateNotification) {//滚动位置更新\n            print('Scroll Update');\n          } else if (scrollNotification is ScrollEndNotification) {//滚动结束\n            print('Scroll End');\n          }\n        },\n        child: ListView.builder(\n          itemCount: 30,//列表元素个数\n          itemBuilder: (context, index) =&gt; ListTile(title: Text(&quot;Index : $index&quot;)),//列表项创建方法\n        ),\n      )\n    )\n  );\n}\n</code></pre><p>相比于ScrollController只能和具体的ListView关联后才可以监听到滚动信息；通过NotificationListener则可以监听其子Widget中的任意ListView，不仅可以得到这些ListView的当前滚动位置信息，还可以获取当前的滚动事件信息 。</p><h2>总结</h2><p>在处理用于展示一组连续、可滚动的视图元素的场景，Flutter提供了比原生Android、iOS系统更加强大的列表组件ListView与CustomScrollView，不仅可以支持单一视图下可滚动Widget的交互模型及UI控制模型，对于某些特殊交互，需要嵌套多重可滚动Widget的场景，也提供了统一管理的机制，最终实现体验一致的滑动效果。这些强大的组件，使得我们不仅可以开发出样式丰富的界面，更可以实现复杂的交互。</p><p>接下来，我们简单回顾一下今天的内容，以便加深你的理解与记忆。</p><p>首先，我们认识了ListView组件。它同时支持垂直方向和水平方向滚动，不仅提供了少量一次性创建子视图的默认构造方式，也提供了大量按需创建子视图的ListView.builder机制，并且支持自定义分割线。为了节省性能，对于定高的列表项视图，提前指定itemExtent比让子Widget自己决定要更高效。</p><p>随后，我带你学习了CustomScrollView组件。它引入了Sliver的概念，将多重嵌套的可滚动视图的交互与布局进行统一接管，使得像视差滚动这样的高级交互变得更加容易。</p><p>最后，我们学习了ScrollController与NotificationListener，前者与ListView绑定，进行滚动信息的监听，进行相应的滚动控制；而后者，通过将ListView纳入子Widget，实现滚动事件的获取。</p><p>我把今天分享讲的三个例子（视差、ScrollController、ScrollNotification）放到了<a href=\"https://github.com/cyndibaby905/13_listview_demo\">GitHub</a>上，你可以下载后在工程中实际运行，并对照着今天的知识点进行学习，体会ListView的一些高级用法。</p><h2>思考题</h2><p>最后，我给你留下两个小作业吧：</p><ol>\n<li>在ListView.builder方法中，ListView根据Widget是否将要出现在可视区域内，按需创建。对于一些场景，为了避免Widget渲染时间过长（比如图片下载），我们需要提前将可视区域上下一定区域内的Widget提前创建好。那么，在Flutter中，如何才能实现呢？</li>\n<li>请你使用NotificationListener，来实现图7 ScrollController示例中同样的功能。</li>\n</ol><p>欢迎你在评论区给我留言分享你的观点，我会在下一篇文章中等待你！感谢你的收听，也欢迎你把这篇文章分享给更多的朋友一起阅读。</p><p></p>","neighbors":{"left":{"article_title":"12 | 经典控件（一）：文本、图片和按钮在Flutter中怎么用？","id":110292},"right":{"article_title":"14 | 经典布局：如何定义子控件在父容器中排版的位置？","id":110848}},"comments":[{"had_liked":false,"id":117973,"user_name":"大土豆","can_delete":false,"product_type":"c1","uid":1121636,"ip_address":"","ucode":"67445DC3EC9DB0","user_header":"https://static001.geekbang.org/account/avatar/00/11/1d/64/52a5863b.jpg","comment_is_top":false,"comment_ctime":1564201170,"is_pvip":true,"replies":[{"id":"43329","content":"后者","user_name":"作者回复","user_name_real":"土豆盒子","uid":"1088582","ctime":1564335828,"ip_address":"","comment_id":117973,"utype":1}],"discussion_count":3,"race_medal":0,"score":"44513874130","product_id":100031001,"comment_content":"我想问的最关键的一点是，flutter的列表有重用的概念吗？1000条数据，是会渲染出1000个视图对象还是像Androd或者iOS原生的那样重用机制，就渲染屏幕当中的的视图对象","like_count":10,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"土豆盒子","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460205,"discussion_content":"后者","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564335828,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1594671,"avatar":"","nickname":"Miracle_","note":"","ucode":"5B885163D73439","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3264,"discussion_content":"希望讲讲复用机制","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1564364507,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1048789,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q3auHgzwzM6Hj1lqJCmTpLMomONpG7jWA1ubqia12dyOcYoG1y2tEgRlicS88KqB3JfBenuluvtlNLM2DVR0lcoQ/132","nickname":"yabin","note":"","ucode":"65B0F25E30CAF1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3260,"discussion_content":"Flutter的复用机制,可以讲讲吗","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1564360993,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":161111,"user_name":"arronK","can_delete":false,"product_type":"c1","uid":1192961,"ip_address":"","ucode":"58DC6FBF2CF0C1","user_header":"https://static001.geekbang.org/account/avatar/00/12/34/01/30ca98e6.jpg","comment_is_top":false,"comment_ctime":1576120231,"is_pvip":true,"replies":[{"id":"61637","content":"赞👍","user_name":"作者回复","user_name_real":"土豆盒子","uid":"1088582","ctime":1576385566,"ip_address":"","comment_id":161111,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23050956711","product_id":100031001,"comment_content":"1. cacheExtent<br>2. notification.metrics","like_count":5,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"土豆盒子","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477602,"discussion_content":"赞👍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576385566,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":118000,"user_name":"季末灬离殇","can_delete":false,"product_type":"c1","uid":1454312,"ip_address":"","ucode":"A40E9146C371FA","user_header":"https://static001.geekbang.org/account/avatar/00/16/30/e8/6898e576.jpg","comment_is_top":false,"comment_ctime":1564209566,"is_pvip":false,"replies":[{"id":"43496","content":"赞","user_name":"作者回复","user_name_real":"土豆盒子","uid":"1088582","ctime":1564422265,"ip_address":"","comment_id":118000,"utype":1}],"discussion_count":5,"race_medal":0,"score":"23039046046","product_id":100031001,"comment_content":"double offsetY = scrollNotification.metrics.pixels;<br>滚动过程中通过偏移量更改isTop即可。","like_count":5,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"土豆盒子","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460217,"discussion_content":"赞","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564422265,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1404451,"avatar":"https://static001.geekbang.org/account/avatar/00/15/6e/23/9fce5f72.jpg","nickname":"毛哥来了","note":"","ucode":"5A3D61FD29EE69","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":38514,"discussion_content":"但是点击返回顶部的功能还是得用controller吧？有什么其他方法么","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571798137,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1454312,"avatar":"https://static001.geekbang.org/account/avatar/00/16/30/e8/6898e576.jpg","nickname":"季末灬离殇","note":"","ucode":"A40E9146C371FA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1404451,"avatar":"https://static001.geekbang.org/account/avatar/00/15/6e/23/9fce5f72.jpg","nickname":"毛哥来了","note":"","ucode":"5A3D61FD29EE69","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":38914,"discussion_content":"这个不太清楚，不敢妄下结论，最近忙项目后面的更新还没来得及看。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571845418,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":38514,"ip_address":""},"score":38914,"extra":""}]},{"author":{"id":1272321,"avatar":"https://static001.geekbang.org/account/avatar/00/13/6a/01/d9cb531d.jpg","nickname":"这得从我捡到一个鼠标垫开始说起","note":"","ucode":"2FF4347B4E7A9B","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6275,"discussion_content":"没看懂，能多解说一下吗","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566819478,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1180727,"avatar":"https://static001.geekbang.org/account/avatar/00/12/04/37/aa04f997.jpg","nickname":"和小胖","note":"","ucode":"406BD7AB987EBF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1272321,"avatar":"https://static001.geekbang.org/account/avatar/00/13/6a/01/d9cb531d.jpg","nickname":"这得从我捡到一个鼠标垫开始说起","note":"","ucode":"2FF4347B4E7A9B","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":6598,"discussion_content":"原来的实现逻辑是通过 ScrollController 监听到 ListView 的滚动信息而实现的，而现在这部分逻辑需要移动到 NotificationListener 的 onNotification 对应的回调里面了，而这个里面的回调参数 scrollNotification 的 metrics 属性的 pixels 属性跟之前的 _controller.offset 代表的意思是一致的。\n\n这样你应该懂了吧。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566987959,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":6275,"ip_address":""},"score":6598,"extra":""}]}]},{"had_liked":false,"id":118884,"user_name":"NASA","can_delete":false,"product_type":"c1","uid":1120958,"ip_address":"","ucode":"AC1BCBDCD95B16","user_header":"https://static001.geekbang.org/account/avatar/00/11/1a/be/18c99af2.jpg","comment_is_top":false,"comment_ctime":1564457720,"is_pvip":false,"replies":[{"id":"43759","content":"更新了github链接","user_name":"作者回复","user_name_real":"土豆盒子","uid":"1088582","ctime":1564551372,"ip_address":"","comment_id":118884,"utype":1}],"discussion_count":2,"race_medal":0,"score":"18744326904","product_id":100031001,"comment_content":"希望每节能配有小demo，毕竟每个人水平都不同","like_count":4,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"土豆盒子","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460637,"discussion_content":"更新了github链接","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564551372,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1194659,"avatar":"https://static001.geekbang.org/account/avatar/00/12/3a/a3/47a0c3c6.jpg","nickname":"zhangls","note":"","ucode":"E3E2840EA4BDB1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3423,"discussion_content":"如果从第一课认真看过来，每一节课都自己敲代码实践过的话，其实也不需要 demo 了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564474321,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":131787,"user_name":"有妖气","can_delete":false,"product_type":"c1","uid":1298460,"ip_address":"","ucode":"0E7698D3C89122","user_header":"https://static001.geekbang.org/account/avatar/00/13/d0/1c/509e54ba.jpg","comment_is_top":false,"comment_ctime":1567907064,"is_pvip":false,"replies":[{"id":"51209","content":"通过NotificationListener的metrics：<br><br>NotificationListener&lt;ScrollNotification&gt;(<br>  onNotification: (ScrollNotification scrollInfo) {<br>    if (scrollInfo.metrics.pixels ==<br>        scrollInfo.metrics.maxScrollExtent) {<br>      loadMore();<br>    }<br>  },<br>  child: ListView.builder(<br>    &#47;&#47; ...<br>  ),<br>),<br>","user_name":"作者回复","user_name_real":"土豆盒子","uid":"1088582","ctime":1568561219,"ip_address":"","comment_id":131787,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14452808952","product_id":100031001,"comment_content":"老师，NestedScrollView中body是一个customScrollview。这个customScrollview中包含一个listview，那么怎么知道listview已经滑动到了底部，目前想在内部的listview中做一个上拉刷新的操作。","like_count":3,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"土豆盒子","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466620,"discussion_content":"通过NotificationListener的metrics：\n\nNotificationListener&amp;lt;ScrollNotification&amp;gt;(\n  onNotification: (ScrollNotification scrollInfo) {\n    if (scrollInfo.metrics.pixels ==\n        scrollInfo.metrics.maxScrollExtent) {\n      loadMore();\n    }\n  },\n  child: ListView.builder(\n    // ...\n  ),\n),\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568561219,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117990,"user_name":"许童童","can_delete":false,"product_type":"c1","uid":1003005,"ip_address":"","ucode":"4B799C0C6BC678","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4d/fd/0aa0e39f.jpg","comment_is_top":false,"comment_ctime":1564207471,"is_pvip":false,"replies":[{"id":"43497","content":"可以看看这个https:&#47;&#47;medium.com&#47;@greg.perry&#47;decode-customscrollview-d5a60fcfb9fb","user_name":"作者回复","user_name_real":"土豆盒子","uid":"1088582","ctime":1564422401,"ip_address":"","comment_id":117990,"utype":1}],"discussion_count":4,"race_medal":0,"score":"10154142063","product_id":100031001,"comment_content":"老师你好，CustomScrollView 的sliver还是不是特别理解，可以再给点参考资料吗？","like_count":2,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"土豆盒子","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460214,"discussion_content":"可以看看这个https://medium.com/@greg.perry/decode-customscrollview-d5a60fcfb9fb","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564422401,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1558747,"avatar":"https://static001.geekbang.org/account/avatar/00/17/c8/db/44a3b5c3.jpg","nickname":"小石头若海","note":"","ucode":"7D5CD03A7879D4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3377,"discussion_content":"Sliver的我也有写一篇：https://juejin.im/post/5d3e5b65e51d45775f516b6e","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564447612,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1457983,"avatar":"https://static001.geekbang.org/account/avatar/00/16/3f/3f/3ed9119b.jpg","nickname":"Eagle~","note":"","ucode":"83987CED72594E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1558747,"avatar":"https://static001.geekbang.org/account/avatar/00/17/c8/db/44a3b5c3.jpg","nickname":"小石头若海","note":"","ucode":"7D5CD03A7879D4","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":12460,"discussion_content":"发现你写的文章更加通俗易懂啊。感觉极客这个专栏文章有点简略了，描述的不够到位。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568534284,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":3377,"ip_address":""},"score":12460,"extra":""},{"author":{"id":1558747,"avatar":"https://static001.geekbang.org/account/avatar/00/17/c8/db/44a3b5c3.jpg","nickname":"小石头若海","note":"","ucode":"7D5CD03A7879D4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1457983,"avatar":"https://static001.geekbang.org/account/avatar/00/16/3f/3f/3ed9119b.jpg","nickname":"Eagle~","note":"","ucode":"83987CED72594E","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":12980,"discussion_content":"哈哈，多谢夸奖，可能是切入点不一样吧，写的那肯定还是作者更好~~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568623627,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":12460,"ip_address":""},"score":12980,"extra":""}]}]},{"had_liked":false,"id":244981,"user_name":"mersa","can_delete":false,"product_type":"c1","uid":1330156,"ip_address":"","ucode":"A9F0B2FF9457C9","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epzwbJGbUmgEC77J6QY6A5pLPdPbw7sqk4DcsHK8qPw7OiaiaMD7pjzb8uHlkY5uLZRibWVvPDDAgM5A/132","comment_is_top":false,"comment_ctime":1598772696,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5893739992","product_id":100031001,"comment_content":"有两个问题想请教一下<br>1.listView滚动动画效果和原生的iOS差太多了，感觉阻尼系数很大，很缓慢，不像在用iOS的App。现在这个效果和webview自己写js的那种scroll很类似。可以调整这种系数么？或者有什么第三方库<br>2.ScrollNotification和ScrollController 怎么设置让它可以点击状态栏回到顶部。","like_count":1},{"had_liked":false,"id":169578,"user_name":"jianwei","can_delete":false,"product_type":"c1","uid":1621006,"ip_address":"","ucode":"B62E46E862AF6D","user_header":"https://static001.geekbang.org/account/avatar/00/18/bc/0e/c76861eb.jpg","comment_is_top":false,"comment_ctime":1578382123,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5873349419","product_id":100031001,"comment_content":"if (scrollNotification.metrics.pixels &gt; 500) {<br> setState(() {<br>   isToTop = true;<br> });<br>} else if (scrollNotification.metrics.pixels &lt; 300) {<br> setState(() {<br>   isToTop = false;<br> });<br>}","like_count":1,"discussions":[{"author":{"id":2161498,"avatar":"","nickname":"七七不说话","note":"","ucode":"B62B9A517CD7FE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":304942,"discussion_content":"Top按钮，返回的动画部分，依旧用ScrollController去控制吗?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599718885,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":130245,"user_name":"咖啡凉了","can_delete":false,"product_type":"c1","uid":1251569,"ip_address":"","ucode":"E41F3C8715AA6B","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/ODicJCxia34EqbeBCwQeyWxcc0F25RP9fnI1r3o1Nt7S3ibRCvQI6zUlUKORL0kZic0PmCGX912bCZ5ERXPE785ZTw/132","comment_is_top":false,"comment_ctime":1567412160,"is_pvip":false,"replies":[{"id":"48896","content":"是会重复调用，因为Element与Renderboject会复用，所以整体渲染性能不受影响。但Widget确实会频繁重建，可以考虑在外层做一个简单判断，不重复设置。","user_name":"作者回复","user_name_real":"土豆盒子","uid":"1088582","ctime":1567510158,"ip_address":"","comment_id":130245,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5862379456","product_id":100031001,"comment_content":"    _controller.addListener(() {&#47;&#47; 为控制器注册滚动监听方法<br><br>      if(_controller.offset &gt; 1000) {&#47;&#47; 如果 ListView 已经向下滚动了 1000，则启用 Top 按钮<br><br>        setState(() {isToTop = true;});<br><br>      } else if(_controller.offset &lt; 300) {&#47;&#47; 如果 ListView 向下滚动距离不足 300，则禁用 Top 按钮<br><br>        setState(() {isToTop = false;});<br><br>      }<br><br>    });<br>这里的setstate在滚动中会一直重复调用吧，会不会影响性能呢","like_count":1,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"土豆盒子","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465873,"discussion_content":"是会重复调用，因为Element与Renderboject会复用，所以整体渲染性能不受影响。但Widget确实会频繁重建，可以考虑在外层做一个简单判断，不重复设置。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567510158,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":119260,"user_name":"Dominic","can_delete":false,"product_type":"c1","uid":1244322,"ip_address":"","ucode":"995261D2D3EF7F","user_header":"https://static001.geekbang.org/account/avatar/00/12/fc/a2/7da62426.jpg","comment_is_top":false,"comment_ctime":1564545127,"is_pvip":false,"replies":[{"id":"43758","content":"更新了github链接","user_name":"作者回复","user_name_real":"土豆盒子","uid":"1088582","ctime":1564551369,"ip_address":"","comment_id":119260,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5859512423","product_id":100031001,"comment_content":"有没有完整的代码放github上，后端程序表示片段代码，运行不起来","like_count":1,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"土豆盒子","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460811,"discussion_content":"更新了github链接","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564551369,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1025321,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a5/29/a85c2853.jpg","nickname":"汪帅","note":"","ucode":"87374288E390B9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5221,"discussion_content":"在哪里更新了呢？找不到","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566063582,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":118577,"user_name":"杨闯","can_delete":false,"product_type":"c1","uid":1023548,"ip_address":"","ucode":"726092363717E1","user_header":"https://static001.geekbang.org/account/avatar/00/0f/9e/3c/0e2a08b1.jpg","comment_is_top":false,"comment_ctime":1564391601,"is_pvip":true,"replies":[{"id":"43506","content":"1.试试assert<br>2.你可以把这个库的所有依赖都完全展开，放到dev_dependencies中","user_name":"作者回复","user_name_real":"土豆盒子","uid":"1088582","ctime":1564423617,"ip_address":"","comment_id":118577,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5859358897","product_id":100031001,"comment_content":"你好，我们现在需要在debug的时候引用一些库，而在release的时候不引用一些库，而这个库使用了fmdb，因此有以下两个问题<br>1、在dart代码中，如何通过判断来决定要不要将import这个库和使用这个库的相关方法，而现在不能完成编译。<br>2、如果将这个库放到dev_dependencies里面，在编译release的时候，这个库没有被引入进来，但是fmdb被引入进来了，怎么避免fmdb给引用进来，是哪里出现问题了吗，还是哪里需要进行特别的设置","like_count":1,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"土豆盒子","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460465,"discussion_content":"1.试试assert\n2.你可以把这个库的所有依赖都完全展开，放到dev_dependencies中","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564423617,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1023548,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/9e/3c/0e2a08b1.jpg","nickname":"杨闯","note":"","ucode":"726092363717E1","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3327,"discussion_content":"3、另外看dev_dependencies里面的时候，实际上debug也是不能编译成功的，实际上不是区分release和debug的，怎么能够真正的在yaml和dart文件中进行区分","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564395729,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":118167,"user_name":"Longwei243","can_delete":false,"product_type":"c1","uid":1023476,"ip_address":"","ucode":"3326F04A3DFD35","user_header":"https://static001.geekbang.org/account/avatar/00/0f/9d/f4/7d74c9bb.jpg","comment_is_top":false,"comment_ctime":1564281899,"is_pvip":false,"replies":[{"id":"43500","content":"自己实现一个吧","user_name":"作者回复","user_name_real":"土豆盒子","uid":"1088582","ctime":1564422636,"ip_address":"","comment_id":118167,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5859249195","product_id":100031001,"comment_content":"这个sliver里面想要一个可折叠的多级列表有对应的控件吗？还是需要自己来实现一个","like_count":1,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"土豆盒子","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460287,"discussion_content":"自己实现一个吧","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564422636,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1456728,"avatar":"https://static001.geekbang.org/account/avatar/00/16/3a/58/494a6aca.jpg","nickname":"Paradise","note":"","ucode":"BF960407E87878","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3262,"discussion_content":"Flutter 官方demo项目Gallery中，Material模块有两个例子，Expand list 和 Expansion panels可以看看","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564364255,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":356758,"user_name":"CoderAndy","can_delete":false,"product_type":"c1","uid":1330506,"ip_address":"上海","ucode":"497112D94DE297","user_header":"https://static001.geekbang.org/account/avatar/00/14/4d/4a/e13779af.jpg","comment_is_top":false,"comment_ctime":1662559507,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1662559507","product_id":100031001,"comment_content":"关于作者说的，为了性能，固定元素的高度。但是，如果列表中要有好几种元素，他们的高度各不相同，应该如何处理？","like_count":0},{"had_liked":false,"id":342886,"user_name":"NFT","can_delete":false,"product_type":"c1","uid":1398386,"ip_address":"","ucode":"8AB92E5EF51EB3","user_header":"https://static001.geekbang.org/account/avatar/00/15/56/72/9bb38c81.jpg","comment_is_top":false,"comment_ctime":1650521197,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1650521197","product_id":100031001,"comment_content":"Expanded(<br>            child: NotificationListener&lt;ScrollNotification&gt;(<br>                onNotification: (scrollNotification) {<br>                  if (scrollNotification is ScrollEndNotification) {<br>                    print(&#39;Scroll End&#39;);<br>                    if (_controller.offset &gt; 1000) {<br>                      setState(() {<br>                        isToTop = true;<br>                      });<br>                    } else if (_controller.offset &lt; 300) {<br>                      setState(() {<br>                        isToTop = false;<br>                      });<br>                    }<br>                  }<br>                  return true;<br>                },<br>                child: ListView.builder(<br>                  controller: _controller,<br>                  itemCount: 100,<br>                  itemBuilder: (context, index) =&gt;<br>                      ListTile(title: Text(&quot;Index : $index&quot;)), <br>                )),<br>          ),","like_count":0},{"had_liked":false,"id":313993,"user_name":"Lgh","can_delete":false,"product_type":"c1","uid":2633163,"ip_address":"","ucode":"FB09D6E4ACA118","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/uyyCHGeo0gayHkjPqr5wlcB0BulhNwkSHkvq0vWOvRlArTBb4dGTE8kvtJzAbbNkwZreiab3Mq1BibayhfujU4Ww/132","comment_is_top":false,"comment_ctime":1632793277,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1632793277","product_id":100031001,"comment_content":"为什么ScrollController是个普通对象，而NotificationListener是个控件？","like_count":0},{"had_liked":false,"id":313737,"user_name":"张平（研一）","can_delete":false,"product_type":"c1","uid":2712658,"ip_address":"","ucode":"040E9408DFACAA","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLamEuaeZHo2oAnWLiajpmv3icHnyQJLpZrWKAeUHibVMMZkI30pvic9seRtXRoHhib7tpH61mSfIql59w/132","comment_is_top":false,"comment_ctime":1632641854,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1632641854","product_id":100031001,"comment_content":"有点感觉了啊<br>","like_count":0},{"had_liked":false,"id":292973,"user_name":"毛成方","can_delete":false,"product_type":"c1","uid":1459289,"ip_address":"","ucode":"DFBF3D464D8D7C","user_header":"https://static001.geekbang.org/account/avatar/00/16/44/59/9cc7d8cd.jpg","comment_is_top":false,"comment_ctime":1621133555,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1621133555","product_id":100031001,"comment_content":"动手加动脑 ","like_count":0},{"had_liked":false,"id":231806,"user_name":"王子晨","can_delete":false,"product_type":"c1","uid":1390005,"ip_address":"","ucode":"4A207E2AB34253","user_header":"https://static001.geekbang.org/account/avatar/00/15/35/b5/a139a821.jpg","comment_is_top":false,"comment_ctime":1593773535,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1593773535","product_id":100031001,"comment_content":"老师不知道为什么你这节课的demo，我在运行时，点击tab切换时，控制台会报：The getter “focusScopeNode” was called on null！<br>不知道哪里出的报错，希望老师能讲解一下","like_count":0},{"had_liked":false,"id":210526,"user_name":"展飞","can_delete":false,"product_type":"c1","uid":1265637,"ip_address":"","ucode":"8799F60131C291","user_header":"https://static001.geekbang.org/account/avatar/00/13/4f/e5/381ca282.jpg","comment_is_top":false,"comment_ctime":1587783963,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1587783963","product_id":100031001,"comment_content":"请问一下，在哪儿可以看flutter的开发文档（Api以及各种类的文档）。http:&#47;&#47;flutter.io&#47;docs这个是不是被墙了，都打不开。","like_count":0,"discussions":[{"author":{"id":1471383,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/x0xV7KicUyevKSqo8pNbyQ3NA2cJ8gBgw8iaFA5hwS1WBrxJxmyZRZ8uEhhsGXC7lvxkNnWccPojKbve1tiaOKcZw/132","nickname":"YangSir","note":"","ucode":"F718302B147DE2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":295047,"discussion_content":"http://laomengit.com/flutter/widgets/widgets_structure.html","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596074728,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":169069,"user_name":"木乃伊","can_delete":false,"product_type":"c1","uid":1173789,"ip_address":"","ucode":"CD63B29412D698","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJjkibwInXV0IDWMF4aaN7rzrEXs1bVJVP26RUKVAA3gWm4suplQq9icd6F6SR5EySd2QlDS14G0ibLQ/132","comment_is_top":false,"comment_ctime":1578270721,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1578270721","product_id":100031001,"comment_content":"老师，请教你一个问题，类似于聊天页面初始化进入的时候，都会从最后一条数据开始展示，但是如果数据比较少，又需要从上到下展示，所以reverse不能用。在测试scollercontroller的时候直接滚到到底部发现会有卡顿，有什么优化建议吗？","like_count":0,"discussions":[{"author":{"id":1812731,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLUjgGGIh1BH4wtK5tS1QLSRdp5D9rw25zz42YmH9ib3S5HjaGibiaicRlXZd03rkib5OIIFMxgRftv6hA/132","nickname":"Geek_d7f31b","note":"","ucode":"51FE4CB10C71FD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":141656,"discussion_content":"同问","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579436727,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":162988,"user_name":"cv0cv0","can_delete":false,"product_type":"c1","uid":1360093,"ip_address":"","ucode":"93FF9277F03FD0","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLEIsgI4ub1VOKWtVOfouAzSqx8Yt8ibQEsAnwNJsJHmuJzzpQqG79HullvYwpic8hgiclgON2GwXSjw/132","comment_is_top":false,"comment_ctime":1576638165,"is_pvip":false,"replies":[{"id":"63405","content":"试试CustomScrollView构造方法的physics参数","user_name":"作者回复","user_name_real":"土豆盒子","uid":"1088582","ctime":1577439765,"ip_address":"","comment_id":162988,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1576638165","product_id":100031001,"comment_content":"视差那个怎么设置滚动速度比率？","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"土豆盒子","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478200,"discussion_content":"试试CustomScrollView构造方法的physics参数","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577439765,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":145780,"user_name":"狗子不要喝奶茶","can_delete":false,"product_type":"c1","uid":1348475,"ip_address":"","ucode":"CFA6E96B5F9D0C","user_header":"https://static001.geekbang.org/account/avatar/00/14/93/7b/97d45363.jpg","comment_is_top":false,"comment_ctime":1572363940,"is_pvip":false,"replies":[{"id":"57732","content":"赞","user_name":"作者回复","user_name_real":"土豆盒子","uid":"1088582","ctime":1573456631,"ip_address":"","comment_id":145780,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1572363940","product_id":100031001,"comment_content":"课后小作业的预加载：是否使用cacheExtent呢","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"土豆盒子","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":472577,"discussion_content":"赞","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573456631,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":144405,"user_name":"赤茗","can_delete":false,"product_type":"c1","uid":1596136,"ip_address":"","ucode":"A9AFD1F718C6E5","user_header":"https://static001.geekbang.org/account/avatar/00/18/5a/e8/c31e06a8.jpg","comment_is_top":false,"comment_ctime":1571912298,"is_pvip":false,"replies":[{"id":"58636","content":"因为Scafford是构建页面的脚手架呀，其他的组件大都依赖这个结构","user_name":"作者回复","user_name_real":"土豆盒子","uid":"1088582","ctime":1574052377,"ip_address":"","comment_id":144405,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1571912298","product_id":100031001,"comment_content":"问一下问什么ListView和SliverList（其他 list没试）为什么一定要以Scaffold作为根布局？我直接 return  CustomScrollView的话，只有SliverAppBar部分是正常的，下边的SliverList显示是错误的","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"土豆盒子","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":471924,"discussion_content":"因为Scafford是构建页面的脚手架呀，其他的组件大都依赖这个结构","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574052377,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":139669,"user_name":"微笑美男😄","can_delete":false,"product_type":"c1","uid":1010774,"ip_address":"","ucode":"E188923723703B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6c/56/07920099.jpg","comment_is_top":false,"comment_ctime":1570701638,"is_pvip":false,"replies":[{"id":"54835","content":"是","user_name":"作者回复","user_name_real":"土豆盒子","uid":"1088582","ctime":1571290433,"ip_address":"","comment_id":139669,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1570701638","product_id":100031001,"comment_content":"老师 ,separated 在分割线里面没法设置itemExtent 是吧<br>","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"土豆盒子","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470046,"discussion_content":"是","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571290433,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":138357,"user_name":"巫山老妖","can_delete":false,"product_type":"c1","uid":1056037,"ip_address":"","ucode":"B35E2CF1B3B04E","user_header":"https://static001.geekbang.org/account/avatar/00/10/1d/25/c4cc1e9f.jpg","comment_is_top":false,"comment_ctime":1570177628,"is_pvip":true,"replies":[{"id":"54811","content":"是的，不过这几个内容的基本方向在本次分享都已经覆盖到了，高阶的一些用法除了下拉刷新涉及到滚动监听+自定义视图更新之外，其他的通过Flutter提供的基本API实现，也不复杂<br>","user_name":"作者回复","user_name_real":"土豆盒子","uid":"1088582","ctime":1571283240,"ip_address":"","comment_id":138357,"utype":1}],"discussion_count":1,"race_medal":1,"score":"1570177628","product_id":100031001,"comment_content":"如果要用Flutter来实现ListView，其实可以讲的东西很多，比如item复用、item事件点击、下拉刷新实现，滚动底部刷新。","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"土豆盒子","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":469497,"discussion_content":"是的，不过这几个内容的基本方向在本次分享都已经覆盖到了，高阶的一些用法除了下拉刷新涉及到滚动监听+自定义视图更新之外，其他的通过Flutter提供的基本API实现，也不复杂\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571283240,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":136918,"user_name":"钱钱钱我爱钱","can_delete":false,"product_type":"c1","uid":1599309,"ip_address":"","ucode":"EC7B7982613B52","user_header":"https://static001.geekbang.org/account/avatar/00/18/67/4d/f0d1b920.jpg","comment_is_top":false,"comment_ctime":1569554041,"is_pvip":false,"replies":[{"id":"52561","content":"最后一个item的边界是ListView的边框，设计上就不应该存在分割线。如果你想实现分割线的效果，可以自己画一个","user_name":"作者回复","user_name_real":"土豆盒子","uid":"1088582","ctime":1569582524,"ip_address":"","comment_id":136918,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1569554041","product_id":100031001,"comment_content":"老师，我发现example里的ListView UI异常了，因为这里没办法上传图片，我写在了博客里。<br>https:&#47;&#47;blog.csdn.net&#47;aprilcuhk&#47;article&#47;details&#47;101520028<br>希望老师可以解答一下，谢谢！！！","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"土豆盒子","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468863,"discussion_content":"最后一个item的边界是ListView的边框，设计上就不应该存在分割线。如果你想实现分割线的效果，可以自己画一个","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569582524,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":128002,"user_name":"这得从我捡到一个鼠标垫开始说起","can_delete":false,"product_type":"c1","uid":1272321,"ip_address":"","ucode":"2FF4347B4E7A9B","user_header":"https://static001.geekbang.org/account/avatar/00/13/6a/01/d9cb531d.jpg","comment_is_top":false,"comment_ctime":1566819596,"is_pvip":true,"replies":[{"id":"47425","content":"对","user_name":"作者回复","user_name_real":"土豆盒子","uid":"1088582","ctime":1566822048,"ip_address":"","comment_id":128002,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1566819596","product_id":100031001,"comment_content":"cacheExtent是用这个参数实现预加载的对吧？","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"土豆盒子","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464746,"discussion_content":"对","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566822048,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":126343,"user_name":"Geek_614bf3","can_delete":false,"product_type":"c1","uid":1630793,"ip_address":"","ucode":"6C02B0CCC98EF8","user_header":"https://static001.geekbang.org/account/avatar/00/18/e2/49/0c5eea4c.jpg","comment_is_top":false,"comment_ctime":1566368535,"is_pvip":false,"replies":[{"id":"46775","content":"哈哈","user_name":"作者回复","user_name_real":"土豆盒子","uid":"1088582","ctime":1566394280,"ip_address":"","comment_id":126343,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1566368535","product_id":100031001,"comment_content":"航哥把经典的iOS效果带入了flutter","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"土豆盒子","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463947,"discussion_content":"哈哈","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566394280,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":125574,"user_name":"右手边","can_delete":false,"product_type":"c1","uid":1334575,"ip_address":"","ucode":"74B3DCECA856D5","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIR6WDJVpJ103eeu54rLia1uhJO8sWUW1QJRZQqDCbgfSsSBYFWZFB7EleVmSUvZfhEbx6eLkzRhNA/132","comment_is_top":false,"comment_ctime":1566205613,"is_pvip":false,"replies":[{"id":"46279","content":"后面有一节会专门介绍调试","user_name":"作者回复","user_name_real":"土豆盒子","uid":"1088582","ctime":1566280872,"ip_address":"","comment_id":125574,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1566205613","product_id":100031001,"comment_content":"老师您好！会讲调试相关的内容吗？","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"土豆盒子","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463613,"discussion_content":"后面有一节会专门介绍调试","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566280872,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":125450,"user_name":"🌙","can_delete":false,"product_type":"c1","uid":1606578,"ip_address":"","ucode":"D70F6C3AF8AA1B","user_header":"https://static001.geekbang.org/account/avatar/00/18/83/b2/e83dd93c.jpg","comment_is_top":false,"comment_ctime":1566186483,"is_pvip":false,"replies":[{"id":"46313","content":"可以自己通过ScrollController的监听器去定义滚动期间的行为","user_name":"作者回复","user_name_real":"土豆盒子","uid":"1088582","ctime":1566286234,"ip_address":"","comment_id":125450,"utype":1}],"discussion_count":0,"race_medal":0,"score":"1566186483","product_id":100031001,"comment_content":"如果我不需要这种效果呢？比如上滑图片马上消失，或者上滑时变换图片","like_count":0},{"had_liked":false,"id":124963,"user_name":"C","can_delete":false,"product_type":"c1","uid":1599441,"ip_address":"","ucode":"C5845E7EC389EC","user_header":"https://static001.geekbang.org/account/avatar/00/18/67/d1/1c69ad22.jpg","comment_is_top":false,"comment_ctime":1566029066,"is_pvip":false,"replies":[{"id":"47645","content":"你确认下你的Widget树中有没有其他的ScrollView","user_name":"作者回复","user_name_real":"土豆盒子","uid":"1088582","ctime":1566893045,"ip_address":"","comment_id":124963,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1566029066","product_id":100031001,"comment_content":"为什么 ScrollNotification 滚动停止时回调 ScrollEndNotification 之后又回调了一次 UserScrollNotification 呢？","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"土豆盒子","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463382,"discussion_content":"你确认下你的Widget树中有没有其他的ScrollView","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566893045,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":124599,"user_name":"🌙","can_delete":false,"product_type":"c1","uid":1606578,"ip_address":"","ucode":"D70F6C3AF8AA1B","user_header":"https://static001.geekbang.org/account/avatar/00/18/83/b2/e83dd93c.jpg","comment_is_top":false,"comment_ctime":1565925983,"is_pvip":false,"replies":[{"id":"45843","content":"滚动视差就是联动效果的一种体现<br>","user_name":"作者回复","user_name_real":"土豆盒子","uid":"1088582","ctime":1566040694,"ip_address":"","comment_id":124599,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1565925983","product_id":100031001,"comment_content":"联动的操作在哪呢？是否是使用sliver就一定是这个效果？","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"土豆盒子","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463243,"discussion_content":"滚动视差就是联动效果的一种体现\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566040694,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1606578,"avatar":"https://static001.geekbang.org/account/avatar/00/18/83/b2/e83dd93c.jpg","nickname":"🌙","note":"","ucode":"D70F6C3AF8AA1B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5223,"discussion_content":"需要设置吗？还是这个控件就是这种效果？如果我不需要这种效果呢？比如上滑图片马上消失，或者上滑时变换图片","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566092110,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":123892,"user_name":"矮个子先生😝","can_delete":false,"product_type":"c1","uid":1147205,"ip_address":"","ucode":"2242A457B0E10D","user_header":"https://static001.geekbang.org/account/avatar/00/11/81/45/9aa91b75.jpg","comment_is_top":false,"comment_ctime":1565777976,"is_pvip":false,"replies":[{"id":"45388","content":"true就取消后续的通知冒泡了；false表示继续让通知向更远的父节点冒泡","user_name":"作者回复","user_name_real":"土豆盒子","uid":"1088582","ctime":1565779565,"ip_address":"","comment_id":123892,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1565777976","product_id":100031001,"comment_content":"onNotification监听回调方法的返回值bool有什么用呢,flutter文档注释不太理解,我返回true、false都会执行回调","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"土豆盒子","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462874,"discussion_content":"true就取消后续的通知冒泡了；false表示继续让通知向更远的父节点冒泡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565779565,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":123620,"user_name":"邓志强","can_delete":false,"product_type":"c1","uid":1599980,"ip_address":"","ucode":"41C300A5EB77A3","user_header":"https://static001.geekbang.org/account/avatar/00/18/69/ec/df7fc14a.jpg","comment_is_top":false,"comment_ctime":1565714215,"is_pvip":true,"replies":[{"id":"45357","content":"赞","user_name":"作者回复","user_name_real":"土豆盒子","uid":"1088582","ctime":1565753107,"ip_address":"","comment_id":123620,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1565714215","product_id":100031001,"comment_content":"关于第一个问题，试了一下cacheExtent能提前加载设置的区域，不知道是不是这个答案。","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"土豆盒子","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462749,"discussion_content":"赞","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565753107,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":118822,"user_name":"Geek_60d7a7","can_delete":false,"product_type":"c1","uid":1613692,"ip_address":"","ucode":"076BD229E3136F","user_header":"","comment_is_top":false,"comment_ctime":1564449895,"is_pvip":false,"replies":[{"id":"44440","content":"这个工作量还好吧","user_name":"作者回复","user_name_real":"土豆盒子","uid":"1088582","ctime":1565018916,"ip_address":"","comment_id":118822,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1564449895","product_id":100031001,"comment_content":"关于listview，官方demo在实现 item选中收藏功能时候，需要开发者额外维护一套item（状态）的数据，感觉略微麻烦些大家有什么解决办法么","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"土豆盒子","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460597,"discussion_content":"这个工作量还好吧","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565018916,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1332463,"avatar":"https://static001.geekbang.org/account/avatar/00/14/54/ef/3cdfd916.jpg","nickname":"yuhao0x0628","note":"","ucode":"BFD472974828A5","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3480,"discussion_content":"直上 Provide 狀態管理","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564529967,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":118650,"user_name":"ptlCoder","can_delete":false,"product_type":"c1","uid":1029656,"ip_address":"","ucode":"B7CF1C4A5970B9","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b6/18/ede273fe.jpg","comment_is_top":false,"comment_ctime":1564406168,"is_pvip":false,"replies":[{"id":"43507","content":"根据index判断生成何种Widget","user_name":"作者回复","user_name_real":"土豆盒子","uid":"1088582","ctime":1564423690,"ip_address":"","comment_id":118650,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1564406168","product_id":100031001,"comment_content":"listview 怎么去设置组头组尾，当每行row不一致的情况中 该怎么设置itembuild","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"土豆盒子","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460508,"discussion_content":"根据index判断生成何种Widget","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564423690,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1459413,"avatar":"https://static001.geekbang.org/account/avatar/00/16/44/d5/ca522e83.jpg","nickname":"爱吃胡萝卜","note":"","ucode":"35FCF84D1E04C5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4338,"discussion_content":"由于ListView没有 Section的概念，所以我觉得应该做个map操作，把ios的 [Section], Section = [header, [cell],footer,] ,  建立为[Index]的映射，应该能比较好的解决这个问题","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565321517,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":118508,"user_name":"吴小安","can_delete":false,"product_type":"c1","uid":1371398,"ip_address":"","ucode":"EDF8E04F867069","user_header":"https://wx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqr5ibqxYwcSgqPA7s49MZb1vEKKXT4mPTojwiclXkJf3ug26NuzTa6A5gbicR2rAUHdEkUAn13Rr2KQ/132","comment_is_top":false,"comment_ctime":1564377930,"is_pvip":false,"replies":[{"id":"43503","content":"1.结合 Editor UI Guides<br>2.拆成更小的Widet","user_name":"作者回复","user_name_real":"土豆盒子","uid":"1088582","ctime":1564422941,"ip_address":"","comment_id":118508,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1564377930","product_id":100031001,"comment_content":"按照dart的语法这界面布局和控件一起会出现嵌套很深的代码，怎样可以写起来更优雅呢","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"土豆盒子","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460437,"discussion_content":"1.结合 Editor UI Guides\n2.拆成更小的Widet","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564422941,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":118223,"user_name":"Yolo七夜","can_delete":false,"product_type":"c1","uid":1040071,"ip_address":"","ucode":"7CB74C0A1DF785","user_header":"https://static001.geekbang.org/account/avatar/00/0f/de/c7/26485903.jpg","comment_is_top":false,"comment_ctime":1564296220,"is_pvip":false,"replies":[{"id":"43499","content":"有最小化demo么","user_name":"作者回复","user_name_real":"土豆盒子","uid":"1088582","ctime":1564422498,"ip_address":"","comment_id":118223,"utype":1}],"discussion_count":5,"race_medal":0,"score":"1564296220","product_id":100031001,"comment_content":"陈哥，我现在遇到了一个困扰我很久的问题，native工程调用flutter页面时，即使我设置了initialRoute为其他值，但flutter那边没能接收到，从而无法跳到我想要的页面，Google了一些资料，按照上面的说法也试过，还是无效，所以想咨询一下您，看是否能找到问题的答案（https:&#47;&#47;github.com&#47;flutter&#47;flutter&#47;issues&#47;27216","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"土豆盒子","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460310,"discussion_content":"有最小化demo么","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564422498,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1251569,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/ODicJCxia34EqbeBCwQeyWxcc0F25RP9fnI1r3o1Nt7S3ibRCvQI6zUlUKORL0kZic0PmCGX912bCZ5ERXPE785ZTw/132","nickname":"咖啡凉了","note":"","ucode":"E41F3C8715AA6B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":7320,"discussion_content":"使用pushRoute","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567491573,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1040071,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/de/c7/26485903.jpg","nickname":"Yolo七夜","note":"","ucode":"7CB74C0A1DF785","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3407,"discussion_content":"谢谢老师，问题已经解决，问题就在于不能按照官方说的用带engine的初始化方法创建VC，而是得用project的那个，那个issue里也有网友遇到这样的情况","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564460730,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1262728,"avatar":"https://static001.geekbang.org/account/avatar/00/13/44/88/69580101.jpg","nickname":"长方体混凝土移动工程师","note":"","ucode":"00CB4C4AB4D119","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3261,"discussion_content":"在iOS中flutter使用FlutterViewController时不能单独创建引擎,由Controller创建就可以路由。或者你还可以看一下flutter_boost","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564363039,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1040071,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/de/c7/26485903.jpg","nickname":"Yolo七夜","note":"","ucode":"7CB74C0A1DF785","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1262728,"avatar":"https://static001.geekbang.org/account/avatar/00/13/44/88/69580101.jpg","nickname":"长方体混凝土移动工程师","note":"","ucode":"00CB4C4AB4D119","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3408,"discussion_content":"嗯嗯，谢谢，之后研究下flutter_boost，群里也有几个朋友推荐","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564460820,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":3261,"ip_address":""},"score":3408,"extra":""}]}]},{"had_liked":false,"id":118052,"user_name":"小米","can_delete":false,"product_type":"c1","uid":1057652,"ip_address":"","ucode":"7E71CF665B981E","user_header":"https://static001.geekbang.org/account/avatar/00/10/23/74/e0b9807f.jpg","comment_is_top":false,"comment_ctime":1564218945,"is_pvip":false,"replies":[{"id":"43326","content":"最后几节会讲架构","user_name":"作者回复","user_name_real":"土豆盒子","uid":"1088582","ctime":1564335635,"ip_address":"","comment_id":118052,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1564218945","product_id":100031001,"comment_content":"老师，架构方面会讲到吗？有没有相关开源项目可以推荐看一下的？","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"土豆盒子","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460240,"discussion_content":"最后几节会讲架构","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564335635,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1380360,"avatar":"https://static001.geekbang.org/account/avatar/00/15/10/08/1cfdd902.jpg","nickname":"李斌","note":"","ucode":"8EEE01B8E5A8B9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3156,"discussion_content":"Flutter项目example中的flutter_gallery","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564231067,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}