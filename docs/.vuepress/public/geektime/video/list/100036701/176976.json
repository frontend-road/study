{"id":176976,"title":"56 | Dubbo如何使用Netty ？","content":"<p><strong>课件和Demo地址</strong><br>\n<a href=\"https://gitee.com/geektime-geekbang/geek_netty\">https://gitee.com/geektime-geekbang/geek_netty</a></p>","comments":[{"had_liked":false,"id":160971,"user_name":"欧阳田","can_delete":false,"product_type":"c3","uid":1054491,"ip_address":"","ucode":"24004916354446","user_header":"https://static001.geekbang.org/account/avatar/00/10/17/1b/4a088e67.jpg","comment_is_top":false,"comment_ctime":1576071731,"is_pvip":false,"replies":[{"id":61369,"content":"这个很赞，正好我也学习下，做到举一反四，哈","user_name":"作者回复","user_name_real":"stroller","uid":1638649,"ctime":1576090609,"ip_address":"","comment_id":160971,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"学着老师的分析思路，尝试着分析一个区块链项目Corda对Netty的使用过程。\n\nCorda是如何使用Netty? 地址：https:&#47;&#47;blog.csdn.net&#47;outsanding&#47;article&#47;details&#47;103498445\n\n1,   Corda是什么？\n2，Corda使用Netty概况？\n3，Corda使用Netty的技巧？\n4，Corda使用Netty可以优化的地方？\n\n谢谢老师的课程，一路终于学完了，写了很多笔记，也画了很多UML图。","like_count":7,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"傅健","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477549,"discussion_content":"这个很赞，正好我也学习下，做到举一反四，哈","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576090609,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":167784,"user_name":"可爱的小奶狗","can_delete":false,"product_type":"c3","uid":1178236,"ip_address":"","ucode":"DC810503571DD2","user_header":"https://static001.geekbang.org/account/avatar/00/11/fa/7c/f8f38ad0.jpg","comment_is_top":false,"comment_ctime":1577933847,"is_pvip":false,"replies":[{"id":65170,"content":"1 你好像颠倒了关系，websocket本来就是长连接的，而长连接的问题就是，有可能连接已死而上层未为可知，所以才需要ping-pong（websocket协议格式中自带了）这种keepalive来检查，如果发现不行了，就断开（这个描述和你说的一样的）。如果用“保持”这词，那应该有idle check自动断连的实现才用这个词比较合适，这里你并无提及。\n2 我没有用过netty的websocket开发过产品级的项目（用的spring websocket），所以不敢说分享值得借鉴的经验，我粗略看了下他的实现，基本功能（编解码等）应该是可以的，主要还是你自己去实现你自己的业务。你去试一试，至少对web socket协议的理解要好多了，其他的一些web socket框架，比较好用，但是实现不够“透明”。谈到具体实现业务可以参考：\nio.netty.example.http.websocketx.benchmarkserver.WebSocketServerHandler#handleWebSocketFrame\n\n谢谢！","user_name":"作者回复","user_name_real":"stroller","uid":1638649,"ctime":1577956763,"ip_address":"","comment_id":167784,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"老师，浏览器客户端websocket是怎么保持长连接的？是通过心跳机制(比如每隔60s，客户端向服务器发送一个报文，然后服务端就保持连接，否则就断开连接)吗？如果要用netty来做websocket的服务端应该注意些啥呢？","like_count":3,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"傅健","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479990,"discussion_content":"1 你好像颠倒了关系，websocket本来就是长连接的，而长连接的问题就是，有可能连接已死而上层未为可知，所以才需要ping-pong（websocket协议格式中自带了）这种keepalive来检查，如果发现不行了，就断开（这个描述和你说的一样的）。如果用“保持”这词，那应该有idle check自动断连的实现才用这个词比较合适，这里你并无提及。\n2 我没有用过netty的websocket开发过产品级的项目（用的spring websocket），所以不敢说分享值得借鉴的经验，我粗略看了下他的实现，基本功能（编解码等）应该是可以的，主要还是你自己去实现你自己的业务。你去试一试，至少对web socket协议的理解要好多了，其他的一些web socket框架，比较好用，但是实现不够“透明”。谈到具体实现业务可以参考：\nio.netty.example.http.websocketx.benchmarkserver.WebSocketServerHandler#handleWebSocketFrame\n\n谢谢！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577956763,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1259675,"avatar":"https://static001.geekbang.org/account/avatar/00/13/38/9b/c1d55b87.jpg","nickname":"Mr.Lonely","note":"","ucode":"CF815AD29D5489","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":127525,"discussion_content":"注意点就是channel.writeAndFlush(textFrame)的时候，最好用textFrame(byteBuf)这种构造方法，避免后续写出消息的时候又从heapByteBuf转到directByteBuf","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578580566,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":184101,"user_name":"可爱的小奶狗","can_delete":false,"product_type":"c3","uid":1178236,"ip_address":"","ucode":"DC810503571DD2","user_header":"https://static001.geekbang.org/account/avatar/00/11/fa/7c/f8f38ad0.jpg","comment_is_top":false,"comment_ctime":1583223258,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"老师，dubbo数据结构中第一个字节为jdk的魔数，是不是说明其他非java语言是不能用dubbo的？也就是说dubbo不跨语言平台？","like_count":0}]}