{"id":181636,"title":"14 | SFINAEï¼šä¸æ˜¯é”™è¯¯çš„æ›¿æ¢å¤±è´¥æ˜¯æ€ä¹ˆå›äº‹?","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯å´å’ç‚œã€‚</p><p>æˆ‘ä»¬å·²ç»è¿ç»­è®²äº†ä¸¤è®²æ¨¡æ¿å’Œç¼–è¯‘æœŸç¼–ç¨‹äº†ã€‚ä»Šå¤©æˆ‘ä»¬è¿˜æ˜¯ç»§ç»­è¿™ä¸ªè¯é¢˜ï¼Œè®²çš„å†…å®¹æ˜¯æ¨¡æ¿é‡Œçš„ä¸€ä¸ªç‰¹æ®Šæ¦‚å¿µâ€”â€”æ›¿æ¢å¤±è´¥éé”™ï¼ˆsubstitution failure is not an errorï¼‰ï¼Œè‹±æ–‡ç®€ç§°ä¸º SFINAEã€‚</p><h2>å‡½æ•°æ¨¡æ¿çš„é‡è½½å†³è®®</h2><p>æˆ‘ä»¬ä¹‹å‰å·²ç»è®¨è®ºäº†ä¸å°‘æ¨¡æ¿ç‰¹åŒ–ã€‚æˆ‘ä»¬ä»Šå¤©æ¥ç€é‡çœ‹ä¸€ä¸ªå‡½æ•°æ¨¡æ¿çš„æƒ…å†µã€‚å½“ä¸€ä¸ªå‡½æ•°åç§°å’ŒæŸä¸ªå‡½æ•°æ¨¡æ¿åç§°åŒ¹é…æ—¶ï¼Œé‡è½½å†³è®®è¿‡ç¨‹å¤§è‡´å¦‚ä¸‹ï¼š</p><ul>\n<li>æ ¹æ®åç§°æ‰¾å‡ºæ‰€æœ‰é€‚ç”¨çš„å‡½æ•°å’Œå‡½æ•°æ¨¡æ¿</li>\n<li>å¯¹äºé€‚ç”¨çš„å‡½æ•°æ¨¡æ¿ï¼Œè¦æ ¹æ®å®é™…æƒ…å†µå¯¹æ¨¡æ¿å½¢å‚è¿›è¡Œæ›¿æ¢ï¼›æ›¿æ¢è¿‡ç¨‹ä¸­å¦‚æœå‘ç”Ÿé”™è¯¯ï¼Œè¿™ä¸ªæ¨¡æ¿ä¼šè¢«ä¸¢å¼ƒ</li>\n<li>åœ¨ä¸Šé¢ä¸¤æ­¥ç”Ÿæˆçš„å¯è¡Œå‡½æ•°é›†åˆä¸­ï¼Œç¼–è¯‘å™¨ä¼šå¯»æ‰¾ä¸€ä¸ªæœ€ä½³åŒ¹é…ï¼Œäº§ç”Ÿå¯¹è¯¥å‡½æ•°çš„è°ƒç”¨</li>\n<li>å¦‚æœæ²¡æœ‰æ‰¾åˆ°æœ€ä½³åŒ¹é…ï¼Œæˆ–è€…æ‰¾åˆ°å¤šä¸ªåŒ¹é…ç¨‹åº¦ç›¸å½“çš„å‡½æ•°ï¼Œåˆ™ç¼–è¯‘å™¨éœ€è¦æŠ¥é”™</li>\n</ul><p>æˆ‘ä»¬è¿˜æ˜¯æ¥çœ‹ä¸€ä¸ªå…·ä½“çš„ä¾‹å­ï¼ˆæ”¹ç¼–è‡ªå‚è€ƒèµ„æ–™ <span class=\"orange\">[1]</span>ï¼‰ã€‚è™½ç„¶è¿™ä¾‹å­ä¸é‚£ä¹ˆå®ç”¨ï¼Œä½†è¿˜æ˜¯æ¯”è¾ƒç®€å•ï¼Œèƒ½å¤Ÿåˆæ­¥è¯´æ˜ä¸€ä¸‹ã€‚</p><pre><code class=\"language-c++\">#include &lt;stdio.h&gt;\n\nstruct Test {\n  typedef int foo;\n};\n\ntemplate &lt;typename T&gt;\nvoid f(typename T::foo)\n{\n  puts(\"1\");\n}\n\ntemplate &lt;typename T&gt;\nvoid f(T)\n{\n  puts(\"2\");\n}\n\nint main()\n{\n  f&lt;Test&gt;(10);\n  f&lt;int&gt;(10);\n}\n</code></pre><!-- [[[read_end]]] --><p>è¾“å‡ºä¸ºï¼š</p><blockquote>\n<p><code>1</code><br>\n<code>2</code></p>\n</blockquote><p>æˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹ã€‚é¦–å…ˆçœ‹ <code>f&lt;Test&gt;(10);</code> çš„æƒ…å†µï¼š</p><ul>\n<li>æˆ‘ä»¬æœ‰ä¸¤ä¸ªæ¨¡æ¿ç¬¦åˆåå­— <code>f</code></li>\n<li>æ›¿æ¢ç»“æœä¸º <code>f(Test::foo)</code> å’Œ <code>f(Test)</code></li>\n<li>ä½¿ç”¨å‚æ•° <code>10</code> å»åŒ¹é…ï¼Œåªæœ‰å‰è€…å‚æ•°å¯ä»¥åŒ¹é…ï¼Œå› è€Œç¬¬ä¸€ä¸ªæ¨¡æ¿è¢«é€‰æ‹©</li>\n</ul><p>å†çœ‹ä¸€ä¸‹ <code>f&lt;int&gt;(10)</code> çš„æƒ…å†µï¼š</p><ul>\n<li>è¿˜æ˜¯ä¸¤ä¸ªæ¨¡æ¿ç¬¦åˆåå­— <code>f</code></li>\n<li>æ›¿æ¢ç»“æœä¸º <code>f(int::foo)</code> å’Œ <code>f(int)</code>ï¼›æ˜¾ç„¶å‰è€…ä¸æ˜¯ä¸ªåˆæ³•çš„ç±»å‹ï¼Œè¢«æŠ›å¼ƒ</li>\n<li>ä½¿ç”¨å‚æ•° <code>10</code> å»åŒ¹é… <code>f(int)</code>ï¼Œæ²¡æœ‰é—®é¢˜ï¼Œé‚£å°±ä½¿ç”¨è¿™ä¸ªæ¨¡æ¿å®ä¾‹äº†</li>\n</ul><p>åœ¨è¿™å„¿ï¼Œä½“ç°çš„æ˜¯ SFINAE è®¾è®¡çš„æœ€åˆç”¨æ³•ï¼šå¦‚æœæ¨¡æ¿å®ä¾‹åŒ–ä¸­å‘ç”Ÿäº†å¤±è´¥ï¼Œæ²¡æœ‰ç†ç”±ç¼–è¯‘å°±æ­¤å‡ºé”™ç»ˆæ­¢ï¼Œå› ä¸ºè¿˜æ˜¯å¯èƒ½æœ‰å…¶ä»–å¯ç”¨çš„å‡½æ•°é‡è½½çš„ã€‚</p><p>è¿™å„¿çš„å¤±è´¥ä»…æŒ‡å‡½æ•°æ¨¡æ¿çš„åŸå‹å£°æ˜ï¼Œå³å‚æ•°å’Œè¿”å›å€¼ã€‚å‡½æ•°ä½“å†…çš„å¤±è´¥ä¸è€ƒè™‘åœ¨å†…ã€‚å¦‚æœé‡è½½å†³è®®é€‰æ‹©äº†æŸä¸ªå‡½æ•°æ¨¡æ¿ï¼Œè€Œå‡½æ•°ä½“åœ¨å®ä¾‹åŒ–çš„è¿‡ç¨‹ä¸­å‡ºé”™ï¼Œé‚£æˆ‘ä»¬ä»ç„¶ä¼šå¾—åˆ°ä¸€ä¸ªç¼–è¯‘é”™è¯¯ã€‚</p><h2>ç¼–è¯‘æœŸæˆå‘˜æ£€æµ‹</h2><p>ä¸è¿‡ï¼Œå¾ˆå¿«äººä»¬å°±å‘ç° SFINAE å¯ä»¥ç”¨äºå…¶ä»–ç”¨é€”ã€‚æ¯”å¦‚ï¼Œæ ¹æ®æŸä¸ªå®ä¾‹åŒ–çš„æˆåŠŸæˆ–å¤±è´¥æ¥åœ¨ç¼–è¯‘æœŸæ£€æµ‹ç±»çš„ç‰¹æ€§ã€‚ä¸‹é¢è¿™ä¸ªæ¨¡æ¿ï¼Œå°±å¯ä»¥æ£€æµ‹ä¸€ä¸ªç±»æ˜¯å¦æœ‰ä¸€ä¸ªåå« <code>reserve</code>ã€å‚æ•°ç±»å‹ä¸º <code>size_t</code> çš„æˆå‘˜å‡½æ•°ï¼š</p><pre><code class=\"language-c++\">template &lt;typename T&gt;\nstruct has_reserve {\n  struct good { char dummy; };\n  struct bad { char dummy[2]; };\n  template &lt;class U,\n            void (U::*)(size_t)&gt;\n  struct SFINAE {};\n  template &lt;class U&gt;\n  static good\n  reserve(SFINAE&lt;U, &amp;U::reserve&gt;*);\n  template &lt;class U&gt;\n  static bad reserve(...);\n  static const bool value =\n    sizeof(reserve&lt;T&gt;(nullptr))\n    == sizeof(good);\n};\n</code></pre><p>åœ¨è¿™ä¸ªæ¨¡æ¿é‡Œï¼š</p><ul>\n<li>æˆ‘ä»¬é¦–å…ˆå®šä¹‰äº†ä¸¤ä¸ªç»“æ„ <code>good</code> å’Œ <code>bad</code>ï¼›å®ƒä»¬çš„å†…å®¹ä¸é‡è¦ï¼Œæˆ‘ä»¬åªå…³å¿ƒå®ƒä»¬çš„å¤§å°å¿…é¡»ä¸ä¸€æ ·ã€‚</li>\n<li>ç„¶åæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª <code>SFINAE</code> æ¨¡æ¿ï¼Œå†…å®¹ä¹ŸåŒæ ·ä¸é‡è¦ï¼Œä½†æ¨¡æ¿çš„ç¬¬äºŒä¸ªå‚æ•°éœ€è¦æ˜¯ç¬¬ä¸€ä¸ªå‚æ•°çš„æˆå‘˜å‡½æ•°æŒ‡é’ˆï¼Œå¹¶ä¸”å‚æ•°ç±»å‹æ˜¯ <code>size_t</code>ï¼Œè¿”å›å€¼æ˜¯ <code>void</code>ã€‚</li>\n<li>éšåï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªè¦æ±‚ <code>SFINAE*</code> ç±»å‹çš„ <code>reserve</code> æˆå‘˜å‡½æ•°æ¨¡æ¿ï¼Œè¿”å›å€¼æ˜¯ <code>good</code>ï¼›å†å®šä¹‰äº†ä¸€ä¸ªå¯¹å‚æ•°ç±»å‹æ— è¦æ±‚çš„ <code>reserve</code> æˆå‘˜å‡½æ•°æ¨¡æ¿ï¼ˆä¸ç†Ÿæ‚‰ <code>...</code> è¯­æ³•çš„ï¼Œå¯ä»¥çœ‹å‚è€ƒèµ„æ–™ <span class=\"orange\">[2]</span>ï¼‰ï¼Œè¿”å›å€¼æ˜¯ <code>bad</code>ã€‚</li>\n<li>æœ€åï¼Œæˆ‘ä»¬å®šä¹‰å¸¸æ•´å‹å¸ƒå°”å€¼ <code>value</code>ï¼Œç»“æœæ˜¯ <code>true</code> è¿˜æ˜¯ <code>false</code>ï¼Œå–å†³äº <code>nullptr</code> èƒ½ä¸èƒ½å’Œ <code>SFINAE*</code> åŒ¹é…æˆåŠŸï¼Œè€Œè¿™åˆå–å†³äºæ¨¡æ¿å‚æ•° <code>T</code> æœ‰æ²¡æœ‰è¿”å›ç±»å‹æ˜¯ <code>void</code>ã€æ¥å—ä¸€ä¸ªå‚æ•°å¹¶ä¸”ç±»å‹ä¸º <code>size_t</code> çš„æˆå‘˜å‡½æ•° <code>reserve</code>ã€‚</li>\n</ul><p>é‚£è¿™æ ·çš„æ¨¡æ¿æœ‰ä»€ä¹ˆç”¨å¤„å‘¢ï¼Ÿæˆ‘ä»¬ç»§ç»­å¾€ä¸‹çœ‹ã€‚</p><h2>SFINAE æ¨¡æ¿æŠ€å·§</h2><h3>enable_if</h3><p>C++11 å¼€å§‹ï¼Œæ ‡å‡†åº“é‡Œæœ‰äº†ä¸€ä¸ªå« <code>enable_if</code> çš„æ¨¡æ¿ï¼ˆå®šä¹‰åœ¨ &lt;type_traits&gt; é‡Œï¼‰ï¼Œå¯ä»¥ç”¨å®ƒæ¥é€‰æ‹©æ€§åœ°å¯ç”¨æŸä¸ªå‡½æ•°çš„é‡è½½ã€‚</p><p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªå‡½æ•°ï¼Œç”¨æ¥å¾€ä¸€ä¸ªå®¹å™¨å°¾éƒ¨è¿½åŠ å…ƒç´ ã€‚æˆ‘ä»¬å¸Œæœ›åŸå‹æ˜¯è¿™ä¸ªæ ·å­çš„ï¼š</p><pre><code class=\"language-c++\">template &lt;typename C, typename T&gt;\nvoid append(C&amp; container, T* ptr,\n            size_t size);\n</code></pre><p>æ˜¾ç„¶ï¼Œ<code>container</code> æœ‰æ²¡æœ‰ <code>reserve</code> æˆå‘˜å‡½æ•°ï¼Œæ˜¯å¯¹æ€§èƒ½æœ‰å½±å“çš„â€”â€”å¦‚æœæœ‰çš„è¯ï¼Œæˆ‘ä»¬é€šå¸¸åº”è¯¥é¢„ç•™å¥½å†…å­˜ç©ºé—´ï¼Œä»¥å…äº§ç”Ÿä¸å¿…è¦çš„å¯¹è±¡ç§»åŠ¨ç”šè‡³æ‹·è´æ“ä½œã€‚åˆ©ç”¨ <code>enable_if</code> å’Œä¸Šé¢çš„ <code>has_reserve</code> æ¨¡æ¿ï¼Œæˆ‘ä»¬å°±å¯ä»¥è¿™ä¹ˆå†™ï¼š</p><pre><code class=\"language-c++\">template &lt;typename C, typename T&gt;\nenable_if_t&lt;has_reserve&lt;C&gt;::value,\n            void&gt;\nappend(C&amp; container, T* ptr,\n       size_t size)\n{\n  container.reserve(\n    container.size() + size);\n  for (size_t i = 0; i &lt; size;\n       ++i) {\n    container.push_back(ptr[i]);\n  }\n}\n\ntemplate &lt;typename C, typename T&gt;\nenable_if_t&lt;!has_reserve&lt;C&gt;::value,\n            void&gt;\nappend(C&amp; container, T* ptr,\n       size_t size)\n{\n  for (size_t i = 0; i &lt; size;\n       ++i) {\n    container.push_back(ptr[i]);\n  }\n}\n</code></pre><p>è¦è®°å¾—ä¹‹å‰æˆ‘è¯´è¿‡ï¼Œå¯¹äºæŸä¸ª type traitï¼Œæ·»åŠ  <code>_t</code> çš„åç¼€ç­‰ä»·äºå…¶ <code>type</code> æˆå‘˜ç±»å‹ã€‚å› è€Œï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ <code>enable_if_t</code> æ¥å–åˆ°ç»“æœçš„ç±»å‹ã€‚<code>enable_if_t&lt;has_reserve&lt;C&gt;::value, void&gt;</code> çš„æ„æ€å¯ä»¥ç†è§£æˆï¼šå¦‚æœç±»å‹ <code>C</code> æœ‰ <code>reserve</code> æˆå‘˜çš„è¯ï¼Œé‚£æˆ‘ä»¬å¯ç”¨ä¸‹é¢çš„æˆå‘˜å‡½æ•°ï¼Œå®ƒçš„è¿”å›ç±»å‹ä¸º <code>void</code>ã€‚</p><p><code>enable_if</code> çš„å®šä¹‰ï¼ˆå…¶å®éå¸¸ç®€å•ï¼‰å’Œå®ƒçš„è¿›ä¸€æ­¥è¯´æ˜ï¼Œè¯·æŸ¥çœ‹å‚è€ƒèµ„æ–™ <span class=\"orange\">[3]</span>ã€‚å‚è€ƒèµ„æ–™é‡ŒåŒæ—¶å±•ç¤ºäº†ä¸€ä¸ªé€šç”¨æŠ€å·§ï¼Œå¯ä»¥ç”¨åœ¨æ„é€ å‡½æ•°ï¼ˆæ— è¿”å›å€¼ï¼‰æˆ–ä¸æƒ³æ‰‹å†™è¿”å›å€¼ç±»å‹çš„æƒ…å†µä¸‹ã€‚ä½†é‚£ä¸ªå†™æ³•æ›´ç»•ä¸€äº›ï¼Œä¸æ˜¯å¿…éœ€è¦ç”¨çš„è¯ï¼Œå°±é‡‡ç”¨ä¸Šé¢é‚£ä¸ªå†™å‡ºè¿”å›å€¼ç±»å‹çš„å†™æ³•å§ã€‚</p><h3>decltype è¿”å›å€¼</h3><p>å¦‚æœåªéœ€è¦åœ¨æŸä¸ªæ“ä½œæœ‰æ•ˆçš„æƒ…å†µä¸‹å¯ç”¨æŸä¸ªå‡½æ•°ï¼Œè€Œä¸éœ€è¦è€ƒè™‘ç›¸åçš„æƒ…å†µçš„è¯ï¼Œæœ‰å¦å¤–ä¸€ä¸ªæŠ€å·§å¯ä»¥ç”¨ã€‚å¯¹äºä¸Šé¢çš„ <code>append</code> çš„æƒ…å†µï¼Œå¦‚æœæˆ‘ä»¬æƒ³é™åˆ¶åªæœ‰å…·æœ‰ <code>reserve</code> æˆå‘˜å‡½æ•°çš„ç±»å¯ä»¥ä½¿ç”¨è¿™ä¸ªé‡è½½ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠä»£ç ç®€åŒ–æˆï¼š</p><pre><code class=\"language-c++\">template &lt;typename C, typename T&gt;\nauto append(C&amp; container, T* ptr,\n            size_t size)\n  -&gt; decltype(\n    declval&lt;C&amp;&gt;().reserve(1U),\n    void())\n{\n  container.reserve(\n    container.size() + size);\n  for (size_t i = 0; i &lt; size;\n       ++i) {\n    container.push_back(ptr[i]);\n  }\n}\n</code></pre><p>è¿™æ˜¯æˆ‘ä»¬ç¬¬ä¸€æ¬¡ç”¨åˆ° <code>declval</code> <span class=\"orange\">[4]</span>ï¼Œéœ€è¦ç®€å•ä»‹ç»ä¸€ä¸‹ã€‚è¿™ä¸ªæ¨¡æ¿ç”¨æ¥å£°æ˜ä¸€ä¸ªæŸä¸ªç±»å‹çš„å‚æ•°ï¼Œä½†è¿™ä¸ªå‚æ•°åªæ˜¯ç”¨æ¥å‚åŠ æ¨¡æ¿çš„åŒ¹é…ï¼Œä¸å…è®¸å®é™…ä½¿ç”¨ã€‚ä½¿ç”¨è¿™ä¸ªæ¨¡æ¿ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æŸç±»å‹æ²¡æœ‰é»˜è®¤æ„é€ å‡½æ•°çš„æƒ…å†µä¸‹ï¼Œå‡æƒ³å‡ºä¸€ä¸ªè¯¥ç±»çš„å¯¹è±¡æ¥è¿›è¡Œç±»å‹æ¨å¯¼ã€‚<code>declval&lt;C&amp;&gt;().reserve(1U)</code> ç”¨æ¥æµ‹è¯• <code>C&amp;</code> ç±»å‹çš„å¯¹è±¡æ˜¯ä¸æ˜¯å¯ä»¥æ‹¿ <code>1U</code> ä½œä¸ºå‚æ•°æ¥è°ƒç”¨ <code>reserve</code> æˆå‘˜å‡½æ•°ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬éœ€è¦è®°å¾—ï¼ŒC++ é‡Œçš„é€—å·è¡¨è¾¾å¼çš„æ„æ€æ˜¯æŒ‰é¡ºåºé€ä¸ªä¼°å€¼ï¼Œå¹¶è¿”å›æœ€åä¸€é¡¹ã€‚æ‰€ä»¥ï¼Œä¸Šé¢è¿™ä¸ªå‡½æ•°çš„è¿”å›å€¼ç±»å‹æ˜¯ <code>void</code>ã€‚</p><p>è¿™ä¸ªæ–¹å¼å’Œ <code>enable_if</code> ä¸åŒï¼Œå¾ˆéš¾è¡¨ç¤ºå¦å®šçš„æ¡ä»¶ã€‚å¦‚æœè¦æä¾›ä¸€ä¸ªä¸“é—¨ç»™<strong>æ²¡æœ‰</strong> <code>reserve</code> æˆå‘˜å‡½æ•°çš„ <code>C</code> ç±»å‹çš„ <code>append</code> é‡è½½ï¼Œè¿™ç§æ–¹å¼å°±ä¸å¤ªæ–¹ä¾¿äº†ã€‚å› è€Œï¼Œè¿™ç§æ–¹å¼çš„ä¸»è¦ç”¨é€”æ˜¯é¿å…é”™è¯¯çš„é‡è½½ã€‚</p><h3>void_t</h3><p><code>void_t</code> æ˜¯ C++17 æ–°å¼•å…¥çš„ä¸€ä¸ªæ¨¡æ¿ <span class=\"orange\">[5]</span>ã€‚å®ƒçš„å®šä¹‰ç®€å•å¾—ä»¤äººåƒæƒŠï¼š</p><pre><code class=\"language-c++\">template &lt;typename...&gt;\nusing void_t = void;\n</code></pre><p>æ¢å¥è¯è¯´ï¼Œè¿™ä¸ªç±»å‹æ¨¡æ¿ä¼šæŠŠä»»æ„ç±»å‹æ˜ å°„åˆ° <code>void</code>ã€‚å®ƒçš„ç‰¹æ®Šæ€§åœ¨äºï¼Œåœ¨è¿™ä¸ªçœ‹ä¼¼æ— èŠçš„è¿‡ç¨‹ä¸­ï¼Œç¼–è¯‘å™¨ä¼šæ£€æŸ¥é‚£ä¸ªâ€œä»»æ„ç±»å‹â€çš„æœ‰æ•ˆæ€§ã€‚åˆ©ç”¨ <code>decltype</code>ã€<code>declval</code> å’Œæ¨¡æ¿ç‰¹åŒ–ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠ <code>has_reserve</code> çš„å®šä¹‰å¤§å¤§ç®€åŒ–ï¼š</p><pre><code class=\"language-c++\">template &lt;typename T,\n          typename = void_t&lt;&gt;&gt;\nstruct has_reserve : false_type {};\n\ntemplate &lt;typename T&gt;\nstruct has_reserve&lt;\n  T, void_t&lt;decltype(\n       declval&lt;T&amp;&gt;().reserve(1U))&gt;&gt;\n  : true_type {};\n</code></pre><p>è¿™é‡Œç¬¬äºŒä¸ª <code>has_reserve</code> æ¨¡æ¿çš„å®šä¹‰å®é™…ä¸Šæ˜¯ä¸€ä¸ªåç‰¹åŒ– <span class=\"orange\">[6]</span>ã€‚åç‰¹åŒ–æ˜¯ç±»æ¨¡æ¿çš„ç‰¹æœ‰åŠŸèƒ½ï¼Œè·Ÿå‡½æ•°é‡è½½æœ‰äº›ç›¸ä¼¼ã€‚ç¼–è¯‘å™¨ä¼šæ‰¾å‡ºæ‰€æœ‰çš„å¯ç”¨æ¨¡æ¿ï¼Œç„¶åé€‰æ‹©å…¶ä¸­æœ€â€œç‰¹åˆ«â€çš„ä¸€ä¸ªã€‚åƒä¸Šé¢çš„ä¾‹å­ï¼Œæ‰€æœ‰ç±»å‹éƒ½èƒ½æ»¡è¶³ç¬¬ä¸€ä¸ªæ¨¡æ¿ï¼Œä½†ä¸æ˜¯æ‰€æœ‰çš„ç±»å‹éƒ½èƒ½æ»¡è¶³ç¬¬äºŒä¸ªæ¨¡æ¿ï¼Œæ‰€ä»¥ç¬¬äºŒä¸ªæ›´ç‰¹åˆ«ã€‚å½“ç¬¬äºŒä¸ªæ¨¡æ¿èƒ½è¢«æ»¡è¶³æ—¶ï¼Œç¼–è¯‘å™¨å°±ä¼šé€‰æ‹©ç¬¬äºŒä¸ªç‰¹åŒ–çš„æ¨¡æ¿ï¼›è€Œåªæœ‰ç¬¬äºŒä¸ªæ¨¡æ¿ä¸èƒ½è¢«æ»¡è¶³æ—¶ï¼Œæ‰ä¼šå›åˆ°ç¬¬ä¸€ä¸ªæ¨¡æ¿çš„é€šç”¨æƒ…å†µã€‚</p><p>æœ‰äº†è¿™ä¸ª <code>has_reserve</code> æ¨¡æ¿ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç»§ç»­ä½¿ç”¨å…¶ä»–çš„æŠ€å·§ï¼Œå¦‚ <code>enable_if</code> å’Œä¸‹é¢çš„æ ‡ç­¾åˆ†å‘ï¼Œæ¥å¯¹é‡è½½è¿›è¡Œé™åˆ¶ã€‚</p><h3>æ ‡ç­¾åˆ†å‘</h3><p>åœ¨ä¸Šä¸€è®²ï¼Œæˆ‘ä»¬æåˆ°äº†ç”¨ <code>true_type</code> å’Œ <code>false_type</code> æ¥é€‰æ‹©åˆé€‚çš„é‡è½½ã€‚è¿™ç§æŠ€å·§æœ‰ä¸ªä¸“é—¨çš„åå­—ï¼Œå«æ ‡ç­¾åˆ†å‘ï¼ˆtag dispatchï¼‰ã€‚æˆ‘ä»¬çš„ <code>append</code> ä¹Ÿå¯ä»¥ç”¨æ ‡ç­¾åˆ†å‘æ¥å®ç°ï¼š</p><pre><code class=\"language-c++\">template &lt;typename C, typename T&gt;\nvoid _append(C&amp; container, T* ptr,\n             size_t size,\n             true_type)\n{\n  container.reserve(\n    container.size() + size);\n  for (size_t i = 0; i &lt; size;\n       ++i) {\n    container.push_back(ptr[i]);\n  }\n}\n\ntemplate &lt;typename C, typename T&gt;\nvoid _append(C&amp; container, T* ptr,\n             size_t size,\n             false_type)\n{\n  for (size_t i = 0; i &lt; size;\n       ++i) {\n    container.push_back(ptr[i]);\n  }\n}\n\ntemplate &lt;typename C, typename T&gt;\nvoid append(C&amp; container, T* ptr,\n            size_t size)\n{\n  _append(\n    container, ptr, size,\n    integral_constant&lt;\n      bool,\n      has_reserve&lt;C&gt;::value&gt;{});\n}\n</code></pre><p>å›æƒ³èµ·ä¸Šä¸€è®²é‡Œ <code>true_type</code> å’Œ <code>false_type</code> çš„å®šä¹‰ï¼Œä½ åº”è¯¥å¾ˆå®¹æ˜“çœ‹å‡ºè¿™ä¸ªä»£ç è·Ÿä½¿ç”¨ <code>enable_if</code> æ˜¯ç­‰ä»·çš„ã€‚å½“ç„¶ï¼Œåœ¨è¿™ä¸ªä¾‹å­ï¼Œæ ‡ç­¾åˆ†å‘å¹¶æ²¡æœ‰ä½¿ç”¨ <code>enable_if</code> æ˜¾å¾—æ–¹ä¾¿ã€‚ä½œä¸ºä¸€ç§å¯ä»¥æ›¿ä»£ <code>enable_if</code> çš„é€šç”¨æƒ¯ç”¨æ³•ï¼Œä½ è¿˜æ˜¯éœ€è¦äº†è§£ä¸€ä¸‹ã€‚</p><p>å¦å¤–ï¼Œå¦‚æœæˆ‘ä»¬ç”¨ <code>void_t</code> é‚£ä¸ªç‰ˆæœ¬çš„ <code>has_reserve</code> æ¨¡æ¿çš„è¯ï¼Œç”±äºæ¨¡æ¿çš„å®ä¾‹ä¼šç»§æ‰¿ <code>false_type</code> æˆ– <code>true_type</code> ä¹‹ä¸€ï¼Œä»£ç å¯ä»¥è¿›ä¸€æ­¥ç®€åŒ–ä¸ºï¼š</p><pre><code class=\"language-c++\">template &lt;typename C, typename T&gt;\nvoid append(C&amp; container, T* ptr,\n            size_t size)\n{\n  _append(\n    container, ptr, size,\n    has_reserve&lt;C&gt;{});\n}\n</code></pre><h3>é™æ€å¤šæ€çš„é™åˆ¶ï¼Ÿ</h3><p>çœ‹åˆ°è¿™å„¿ï¼Œä½ å¯èƒ½ä¼šæ€€ç–‘ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸èƒ½åƒåœ¨ Python ä¹‹ç±»çš„è¯­è¨€é‡Œä¸€æ ·ï¼Œç›´æ¥å†™ä¸‹é¢è¿™æ ·çš„ä»£ç å‘¢ï¼Ÿ</p><pre><code class=\"language-c++\">template &lt;typename C, typename T&gt;\nvoid append(C&amp; container, T* ptr,\n            size_t size)\n{\n  if (has_reserve&lt;C&gt;::value) {\n    container.reserve(\n      container.size() + size);\n  }\n  for (size_t i = 0; i &lt; size;\n       ++i) {\n    container.push_back(ptr[i]);\n  }\n}\n</code></pre><p>å¦‚æœä½ è¯•éªŒä¸€ä¸‹ï¼Œå°±ä¼šå‘ç°ï¼Œåœ¨ <code>C</code> ç±»å‹æ²¡æœ‰ <code>reserve</code> æˆå‘˜å‡½æ•°çš„æƒ…å†µä¸‹ï¼Œç¼–è¯‘æ˜¯ä¸èƒ½é€šè¿‡çš„ï¼Œä¼šæŠ¥é”™ã€‚è¿™æ˜¯å› ä¸º C++ æ˜¯é™æ€ç±»å‹çš„è¯­è¨€ï¼Œæ‰€æœ‰çš„å‡½æ•°ã€åå­—å¿…é¡»åœ¨ç¼–è¯‘æ—¶è¢«æˆåŠŸè§£æã€ç¡®å®šã€‚åœ¨åŠ¨æ€ç±»å‹çš„è¯­è¨€é‡Œï¼Œåªè¦è¯­æ³•æ²¡é—®é¢˜ï¼Œç¼ºæˆå‘˜å‡½æ•°è¦æ‰§è¡Œåˆ°é‚£ä¸€è¡Œä¸Šæ‰ä¼šè¢«å‘ç°ã€‚è¿™èµ‹äºˆäº†åŠ¨æ€ç±»å‹è¯­è¨€ç›¸å½“å¤§çš„çµæ´»æ€§ï¼›åªä¸è¿‡ï¼Œä¸èƒ½åœ¨ç¼–è¯‘æ—¶æ£€æŸ¥é”™è¯¯ï¼ŒåŒæ ·ä¹Ÿæ˜¯å¾ˆå¤šäººå¯¹åŠ¨æ€ç±»å‹è¯­è¨€çš„æŠ±æ€¨æ‰€åœ¨â€¦â€¦</p><p>é‚£åœ¨ C++ é‡Œï¼Œæˆ‘ä»¬æœ‰æ²¡æœ‰æ›´å¥½çš„åŠæ³•å‘¢ï¼Ÿå®é™…ä¸Šæ˜¯æœ‰çš„ã€‚å…·ä½“æ–¹æ³•ï¼Œä¸‹å›åˆ†è§£ã€‚</p><h2>å†…å®¹å°ç»“</h2><p>ä»Šå¤©æˆ‘ä»¬ä»‹ç»äº† SFINAE å’Œå®ƒçš„ä¸€äº›ä¸»è¦æƒ¯ç”¨æ³•ã€‚è™½ç„¶éšç€ C++ çš„æ¼”åŒ–ï¼ŒSFINAE çš„é‡è¦æ€§æœ‰é™ä½çš„è¶‹åŠ¿ï¼Œä½†æˆ‘ä»¬ä»éœ€æŒæ¡å…¶åŸºæœ¬æ¦‚å¿µï¼Œæ‰èƒ½ç†è§£ä½¿ç”¨äº†è¿™ä¸€æŠ€å·§çš„æ¨¡æ¿ä»£ç ã€‚</p><h2>è¯¾åæ€è€ƒ</h2><p>è¿™ä¸€è®²çš„å†…å®¹åº”è¯¥ä»ç„¶æ˜¯å¾ˆçƒ§è„‘çš„ã€‚è¯·ä½ åŠ¡å¿…è¯•éªŒä¸€ä¸‹æ–‡ä¸­çš„ä»£ç ï¼ŒåŠ æ·±å¯¹è¿™äº›æ¦‚å¿µçš„ç†è§£ã€‚åŒæ ·ï¼Œæœ‰ä»»ä½•é—®é¢˜å’Œæƒ³æ³•ï¼Œå¯ä»¥ç•™è¨€ä¸æˆ‘äº¤æµã€‚</p><h2><span class=\"reference\">å‚è€ƒèµ„æ–™</span></h2><p><span class=\"reference\">[1] Wikipedia, â€œSubstitution failure is not an errorâ€. <a href=\"https://en.wikipedia.org/wiki/Substitution_failure_is_not_an_error\">https://en.wikipedia.org/wiki/Substitution_failure_is_not_an_error</a> </span></p><p><span class=\"reference\">[2] cppreference.com, â€œVariadic functionsâ€. <a href=\"https://en.cppreference.com/w/c/variadic\">https://en.cppreference.com/w/c/variadic</a> </span></p><p><span class=\"reference\">[2a] cppreference.com, â€œå˜å‚æ•°å‡½æ•°â€. <a href=\"https://zh.cppreference.com/w/c/variadic\">https://zh.cppreference.com/w/c/variadic</a> </span></p><p><span class=\"reference\">[3] cppreference.com, â€œstd::enable_ifâ€. <a href=\"https://en.cppreference.com/w/cpp/types/enable_if\">https://en.cppreference.com/w/cpp/types/enable_if</a> </span></p><p><span class=\"reference\">[3a] cppreference.com, â€œstd::enable_ifâ€. <a href=\"https://zh.cppreference.com/w/cpp/types/enable_if\">https://zh.cppreference.com/w/cpp/types/enable_if</a> </span></p><p><span class=\"reference\">[4] cppreference.com, â€œstd::declvalâ€. <a href=\"https://en.cppreference.com/w/cpp/utility/declval\">https://en.cppreference.com/w/cpp/utility/declval</a> </span></p><p><span class=\"reference\">[4a] cppreference.com, â€œstd::declvalâ€. <a href=\"https://zh.cppreference.com/w/cpp/utility/declval\">https://zh.cppreference.com/w/cpp/utility/declval</a> </span></p><p><span class=\"reference\">[5] cppreference.com, â€œstd::void_tâ€. <a href=\"https://en.cppreference.com/w/cpp/types/void_t\">https://en.cppreference.com/w/cpp/types/void_t</a> </span></p><p><span class=\"reference\">[5a] cppreference.com, â€œstd::void_tâ€. <a href=\"https://zh.cppreference.com/w/cpp/types/void_t\">https://zh.cppreference.com/w/cpp/types/void_t</a> </span></p><p><span class=\"reference\">[6] cppreference.com, â€œPartial template specializationâ€. <a href=\"https://en.cppreference.com/w/cpp/language/partial_specialization\">https://en.cppreference.com/w/cpp/language/partial_specialization</a> </span></p><p><span class=\"reference\">[6a] cppreference.com, â€œéƒ¨åˆ†æ¨¡æ¿ç‰¹åŒ–â€. <a href=\"https://zh.cppreference.com/w/cpp/language/partial_specialization\">https://zh.cppreference.com/w/cpp/language/partial_specialization</a> </span></p>","neighbors":{"left":{"article_title":"13 | ç¼–è¯‘æœŸèƒ½åšäº›ä»€ä¹ˆï¼Ÿä¸€ä¸ªå®Œæ•´çš„è®¡ç®—ä¸–ç•Œ","id":181608},"right":{"article_title":"15 | constexprï¼šä¸€ä¸ªå¸¸æ€çš„ä¸–ç•Œ","id":182902}},"comments":[{"had_liked":false,"id":167109,"user_name":"ä¸‰å‘³","can_delete":false,"product_type":"c1","uid":1362403,"ip_address":"","ucode":"A580F715D1CC96","user_header":"https://static001.geekbang.org/account/avatar/00/14/c9/e3/28c16afa.jpg","comment_is_top":false,"comment_ctime":1577693193,"is_pvip":false,"replies":[{"id":64990,"content":"æˆ‘å–œæ¬¢è¿™æ ·çš„ç•™è¨€ã€‚å“ˆå“ˆï¼Œå†™ä¸“æ å°±æ˜¯å¸Œæœ›èƒ½ç»™å¤§å®¶å¸®åŠ©çš„ã€‚ğŸ˜‡","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1577800738,"ip_address":"","comment_id":167109,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"emmmm....\nè¿™ä¸€èŠ‚å†…å®¹å¦‚æœæ˜¯åŠå¹´å‰çœ‹åˆ°ï¼Œåº”è¯¥èƒ½èŠ‚çœæˆ‘å¥½å¤šæ—¶é—´å»å†™åºåˆ—åŒ–ï¼ŒçœŸæ˜¯æˆ‘å®å®åœ¨åœ¨çš„éœ€æ±‚å•Šï¼\næˆ‘è‡ªå·±åœ¨å†™æ•°æ®åºåˆ—åŒ–ä¸ºjsonæ–‡æœ¬çš„æ—¶å€™ï¼Œå°±é‡åˆ°äº†è¿™æ ·å¤´ç–¼çš„é—®é¢˜ï¼šå¦‚ä½•æ ¹æ®ç±»å‹ï¼Œå»è°ƒç”¨å¯¹åº”çš„å‡½æ•°ã€‚\nå¦‚æœæ˜¯ç®€å•çš„intï¼Œboolï¼Œfloatï¼Œç›´æ¥ç‰¹åŒ–å°±å¥½äº†ã€‚\nå¦‚æœæ˜¯è‡ªå®šä¹‰çš„ç»“æ„ä½“å‘¢ï¼Ÿæˆ‘çš„åšæ³•å°±æ˜¯åˆ¤æ–­è‡ªå®šä¹‰ç»“æ„ä½“ä¸­æ˜¯å¦æœ‰serializableå’Œdeserializableå‡½æ•°ï¼Œå°±ç”¨åˆ°äº†æ–‡ä¸­æœ€å¼€å§‹çš„æ–¹æ³•åˆ¤æ–­ã€‚\nç„¶è€Œé‚£ä¼šå„¿æˆ‘å†™å¾—è¿˜æ˜¯å¤ªç®€å•ç²—æš´ï¼Œåœ¨ä»£ç ä¸­ç”¨çš„æ˜¯ifå»åˆ¤æ–­ï¼Œå¯¹äºä¸æ”¯æŒçš„ç±»å‹ï¼Œç›´æ¥æŠ¥é”™ï¼Œå¹¶ä¸èƒ½åšåˆ°å¿½ç•¥ã€‚\nçœ‹äº†æœ¬æ–‡ä¹‹åï¼ŒçœŸæ˜¯å—ç›Šé¢‡å¤šå•Šï¼ç•™è¨€äºæ­¤ï¼Œå‘Šè¯‰å¤§å®¶ï¼Œåˆ«ä»¥ä¸ºç”¨ä¸åˆ°è¿™äº›å†…å®¹ï¼Œéƒ½æ˜¯å®å®åœ¨åœ¨çš„å¹²è´§ï¼","like_count":37},{"had_liked":false,"id":166116,"user_name":"ç¦¾æ¡ƒ","can_delete":false,"product_type":"c1","uid":1477855,"ip_address":"","ucode":"9FE85C34A9E9E0","user_header":"https://static001.geekbang.org/account/avatar/00/16/8c/df/77acb793.jpg","comment_is_top":false,"comment_ctime":1577406577,"is_pvip":false,"replies":[{"id":63322,"content":"æ–°å‘ç°ä¸€ä¸ªå·¥å…·ï¼Œå¯ä»¥å±•ç¤ºå®ä¾‹åŒ–çš„è¿‡ç¨‹ã€‚ä½ å¯ä»¥å»çœ‹ä¸€ä¸‹ï¼š\n\nhttps:&#47;&#47;cppinsights.io&#47;","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1577407868,"ip_address":"","comment_id":166116,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"è¯·é—®æœ‰ç¼–è¯‘å™¨æœ¬èº«ä»€ä¹ˆå·¥å…·æˆ–è€…æ—¥å¿—æ¨¡å¼ï¼Œå¯ä»¥æ˜¾ç¤ºæ¨¡ç‰ˆå®ä¾‹åŒ–çš„è¿‡ç¨‹ï¼Ÿ","like_count":16,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479404,"discussion_content":"æ–°å‘ç°ä¸€ä¸ªå·¥å…·ï¼Œå¯ä»¥å±•ç¤ºå®ä¾‹åŒ–çš„è¿‡ç¨‹ã€‚ä½ å¯ä»¥å»çœ‹ä¸€ä¸‹ï¼š\n\nhttps://cppinsights.io/","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1577407868,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2105908,"avatar":"","nickname":"Geek_bc99a2","note":"","ucode":"B820CDFF4370D3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":547756,"discussion_content":"cppinsightså¯¹äºå¤æ‚ç‚¹çš„å·¥ç¨‹è¿˜æ˜¯å¥½å¤šæä¸å®šï¼Œcevelopä¹Ÿä¸å¤ªçµå…‰ï¼Œçœ‹èµ·æ¥è¿˜æ˜¯templightå¼ºå¤§äº›","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642855016,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":204459,"user_name":"_å‘±å¤ª_","can_delete":false,"product_type":"c1","uid":1739226,"ip_address":"","ucode":"6B96DC7CF66094","user_header":"https://static001.geekbang.org/account/avatar/00/1a/89/da/e86b9932.jpg","comment_is_top":false,"comment_ctime":1586402731,"is_pvip":false,"replies":[{"id":76498,"content":"æ¬¢è¿èµ°ä¸Šä¸€ä¸ªå°é˜¶ã€‚å­¦ä¹ æ— æ­¢å¢ƒâ€¦â€¦","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1586437263,"ip_address":"","comment_id":204459,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"åˆšæ›´æ–°çš„æ—¶å€™çœ‹å¾—å¤´æ™•ç›®çœ©ï¼Œå‘ç°åŸºç¡€ä¸å¤Ÿã€‚å›å¤´æŠ½ç©ºæ’¸å®Œäº† STL æ ‡å‡†åº“ å’Œ effective modern C++ï¼Œå›è¿‡å¤´æ¥çœ‹è±ç„¶å¼€æœ—ï¼ŒçœŸå®å—ç›ŠåŒªæµ…","like_count":6,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479404,"discussion_content":"æ–°å‘ç°ä¸€ä¸ªå·¥å…·ï¼Œå¯ä»¥å±•ç¤ºå®ä¾‹åŒ–çš„è¿‡ç¨‹ã€‚ä½ å¯ä»¥å»çœ‹ä¸€ä¸‹ï¼š\n\nhttps://cppinsights.io/","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1577407868,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2105908,"avatar":"","nickname":"Geek_bc99a2","note":"","ucode":"B820CDFF4370D3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":547756,"discussion_content":"cppinsightså¯¹äºå¤æ‚ç‚¹çš„å·¥ç¨‹è¿˜æ˜¯å¥½å¤šæä¸å®šï¼Œcevelopä¹Ÿä¸å¤ªçµå…‰ï¼Œçœ‹èµ·æ¥è¿˜æ˜¯templightå¼ºå¤§äº›","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642855016,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":172523,"user_name":"å¥½å¥½è™šåº¦æ—¶å…‰","can_delete":false,"product_type":"c1","uid":1359941,"ip_address":"","ucode":"8079C01665C63F","user_header":"https://static001.geekbang.org/account/avatar/00/14/c0/45/069cd477.jpg","comment_is_top":false,"comment_ctime":1579218813,"is_pvip":false,"replies":[{"id":66931,"content":"è¿™ä¸ªç½‘ç«™ä¹Ÿè®¸å¯ä»¥å¸®ä½ ï¼š\n\nhttps:&#47;&#47;cppinsights.io&#47;","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1579238415,"ip_address":"","comment_id":172523,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"è¡¨ç¤ºçœŸçš„å¤ªçƒ§è„‘äº†","like_count":6,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481766,"discussion_content":"è¿™ä¸ªç½‘ç«™ä¹Ÿè®¸å¯ä»¥å¸®ä½ ï¼š\n\nhttps://cppinsights.io/","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579238415,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1055296,"avatar":"https://static001.geekbang.org/account/avatar/00/10/1a/40/f10493ef.jpg","nickname":"ä¸­å±±æµªå­","note":"","ucode":"25D0F8462473D3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":289211,"discussion_content":"è¿™ä¸ªç½‘å€å¾ˆèµ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594027113,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":315987,"user_name":"å¸¸æŒ¯å","can_delete":false,"product_type":"c1","uid":2062252,"ip_address":"","ucode":"D61B40E1CCEFD5","user_header":"","comment_is_top":false,"comment_ctime":1634095655,"is_pvip":false,"replies":[{"id":114480,"content":"çœ‹çœ‹ä¸‹é¢çš„ä¾‹å­ï¼Œæ˜¯ä¸æ˜¯å¯ä»¥äº†ï¼Ÿ\n\nintegral_constant&lt;int, 1&gt;::value == 1\nintegral_constant&lt;int, 2&gt;::value == 2\ntrue_type::value == integral_constant&lt;bool, true&gt;::value == true","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1634101969,"ip_address":"","comment_id":315987,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"æ ‡ç­¾åˆ†å‘é‚£é‡Œçš„ï¼š\ntemplate void append(C&amp; container, T* ptr, size_t size)\n{ _append( container, ptr, size, integral_constant&lt; bool, has_reserve&lt;C&gt;::value&gt;{});}\nè¿™ä¸ªintegral_constant&lt; bool, has_reserve&lt;C&gt;::value&gt;{}çœ‹ä¸æ˜ç™½\nintegral_constantæ˜¯ä¸Šä¸€è®²çš„\ntemplate &lt;class T, T v&gt;\nstruct integral_constant {\n  static const T value = v;\n  typedef T value_type;\n  typedef integral_constant type;\n};\nå§ï¼Ÿ\nhas_reserve&lt;C&gt;::valueçš„::valueæ˜¯å•¥æ„æ€ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481766,"discussion_content":"è¿™ä¸ªç½‘ç«™ä¹Ÿè®¸å¯ä»¥å¸®ä½ ï¼š\n\nhttps://cppinsights.io/","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579238415,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1055296,"avatar":"https://static001.geekbang.org/account/avatar/00/10/1a/40/f10493ef.jpg","nickname":"ä¸­å±±æµªå­","note":"","ucode":"25D0F8462473D3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":289211,"discussion_content":"è¿™ä¸ªç½‘å€å¾ˆèµ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594027113,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":217675,"user_name":"è¥¿åŠ åŠ ","can_delete":false,"product_type":"c1","uid":1144416,"ip_address":"","ucode":"727238758A7F3D","user_header":"https://static001.geekbang.org/account/avatar/00/11/76/60/8ea658a9.jpg","comment_is_top":false,"comment_ctime":1589580350,"is_pvip":false,"replies":[{"id":80556,"content":"åœ¨åˆé€‚çš„åœ°æ–¹ä½¿ç”¨ï¼Œè®°ä½ç›®æ ‡æ˜¯ç®€åŒ–æœ€ç»ˆä»£ç å°±è¡Œã€‚æ¨¡æ¿ä»£ç å®¹æ˜“è®©äººè„‘è¢‹ç–¼æ˜¯äº‹å®ï¼Œé™åˆ¶ä¸»è¦ç”¨åœ¨åº•å±‚çš„æ”¯æŒä»£ç é‡Œã€‚ä¸Šå±‚çš„ä½¿ç”¨ä»£ç ä¸€å®šè¦ç®€å•ä¸ºå¥½ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1589640568,"ip_address":"","comment_id":217675,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"çœ‹å®Œäº†ä¸¤è¯¾ä¹‹åï¼Œæ­£å„¿å…«ç»çš„æƒ³æŠŠå„ç§ type_traits ç”¨èµ·æ¥äº†ã€‚","like_count":3,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":495215,"discussion_content":"åœ¨åˆé€‚çš„åœ°æ–¹ä½¿ç”¨ï¼Œè®°ä½ç›®æ ‡æ˜¯ç®€åŒ–æœ€ç»ˆä»£ç å°±è¡Œã€‚æ¨¡æ¿ä»£ç å®¹æ˜“è®©äººè„‘è¢‹ç–¼æ˜¯äº‹å®ï¼Œé™åˆ¶ä¸»è¦ç”¨åœ¨åº•å±‚çš„æ”¯æŒä»£ç é‡Œã€‚ä¸Šå±‚çš„ä½¿ç”¨ä»£ç ä¸€å®šè¦ç®€å•ä¸ºå¥½ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589640568,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":282313,"user_name":"geek","can_delete":false,"product_type":"c1","uid":2401422,"ip_address":"","ucode":"FF0845140D72A9","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/NyFOEueITjaGLpakMEuWAqVQjo1uDIXlpDdpCxXGfaWiaXzibLQ3WgOFCe8D9FvCmyjsGT7jDsLUbkt8jt2aVs9g/132","comment_is_top":false,"comment_ctime":1615194216,"is_pvip":false,"replies":[{"id":102536,"content":"ä¸æ˜¯æ‰€æœ‰ç±»å‹éƒ½èƒ½æ»¡è¶³ç¬¬äºŒä¸ªæ¨¡æ¿ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1615216550,"ip_address":"","comment_id":282313,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"è€å¸ˆï¼Œ\ntemplate &lt;typename T,\n          typename = void_t&lt;&gt;&gt;\nstruct has_reserve : false_type {};\n\ntemplate &lt;typename T&gt;\nstruct has_reserve&lt;\n  T, void_t&lt;decltype(\n       declval&lt;T&amp;&gt;().reserve(1U))&gt;&gt;\n  : true_type {};\nç¬¬äºŒä¸ªæ˜¯ä¸€ä¸ªç±»ç‰¹åŒ–ï¼Œä½†æˆ‘ç†è§£ï¼Œç¬¬äºŒä¸ªä¸­voidçš„æ¨¡æ¿å‚æ•°çš„æ¨å¯¼ç»“æœå’Œç¬¬ä¸€ä¸ªæ˜¯ä¸€æ ·çš„ã€‚é‚£æ­¤å¤„ æ›´ç‰¹æ®Š è¿™ä¸ªæ„æ€æ˜¯ä½“ç°åœ¨ voidçš„æ¨¡æ¿å‚æ•°æ¨å¯¼è¿‡ç¨‹ï¼ˆæ— é”™ï¼‰å—ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":495215,"discussion_content":"åœ¨åˆé€‚çš„åœ°æ–¹ä½¿ç”¨ï¼Œè®°ä½ç›®æ ‡æ˜¯ç®€åŒ–æœ€ç»ˆä»£ç å°±è¡Œã€‚æ¨¡æ¿ä»£ç å®¹æ˜“è®©äººè„‘è¢‹ç–¼æ˜¯äº‹å®ï¼Œé™åˆ¶ä¸»è¦ç”¨åœ¨åº•å±‚çš„æ”¯æŒä»£ç é‡Œã€‚ä¸Šå±‚çš„ä½¿ç”¨ä»£ç ä¸€å®šè¦ç®€å•ä¸ºå¥½ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589640568,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":353267,"user_name":"Simon","can_delete":false,"product_type":"c1","uid":1914504,"ip_address":"å¹¿ä¸œ","ucode":"A8A2E3E57BD029","user_header":"https://static001.geekbang.org/account/avatar/00/1d/36/88/20b6a6ee.jpg","comment_is_top":false,"comment_ctime":1659323916,"is_pvip":false,"replies":[{"id":128553,"content":"ç­‰æ•ˆäº typename = voidã€‚ç±»å‹å‚æ•°åä¸é‡è¦ã€‚è¿™æ ·ï¼Œç‰¹åŒ–çš„ç‰ˆæœ¬å’Œé€šç”¨çš„ç‰ˆæœ¬ï¼Œåä¸€é¡¹éƒ½æ˜¯ voidï¼Œä¸ç”¨è°ƒç”¨è€…æä¾›ã€‚\n\né€šç”¨æ¨¡æ¿å½¢å¼çš„ç¬¬äºŒä¸ªå‚æ•°å¦‚æœä¸æ˜¯ voidï¼Œé‚£ç‰¹åŒ–å½¢å¼å°±æ°¸è¿œä¸èƒ½åŒ¹é…æˆåŠŸäº†ï¼Œé™¤éè°ƒç”¨è€…æ‰‹å·¥æä¾›ç¬¬äºŒé¡¹ voidï¼ˆç¬¬äºŒé¡¹ void_t çš„ç»“æœä»æ˜¯ voidï¼‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1659539807,"ip_address":"å¹¿ä¸œ","comment_id":353267,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"typename = void_t&lt;&gt; è¿™ä¸ªå†™æ³•æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿç±»å‹åæ˜¯ä¸é‡è¦çš„ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582627,"discussion_content":"ç­‰æ•ˆäº typename = voidã€‚ç±»å‹å‚æ•°åä¸é‡è¦ã€‚è¿™æ ·ï¼Œç‰¹åŒ–çš„ç‰ˆæœ¬å’Œé€šç”¨çš„ç‰ˆæœ¬ï¼Œåä¸€é¡¹éƒ½æ˜¯ voidï¼Œä¸ç”¨è°ƒç”¨è€…æä¾›ã€‚\n\né€šç”¨æ¨¡æ¿å½¢å¼çš„ç¬¬äºŒä¸ªå‚æ•°å¦‚æœä¸æ˜¯ voidï¼Œé‚£ç‰¹åŒ–å½¢å¼å°±æ°¸è¿œä¸èƒ½åŒ¹é…æˆåŠŸäº†ï¼Œé™¤éè°ƒç”¨è€…æ‰‹å·¥æä¾›ç¬¬äºŒé¡¹ voidï¼ˆç¬¬äºŒé¡¹ void_t çš„ç»“æœä»æ˜¯ voidï¼‰ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1659539807,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":167026,"user_name":"æäº®äº®","can_delete":false,"product_type":"c1","uid":1116508,"ip_address":"","ucode":"290907F930B261","user_header":"https://static001.geekbang.org/account/avatar/00/11/09/5c/b5d79d20.jpg","comment_is_top":false,"comment_ctime":1577672603,"is_pvip":false,"replies":[{"id":64980,"content":"ç»§æ‰¿å•Šã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1577791316,"ip_address":"","comment_id":167026,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"\ntemplate &lt;typename T,\n          typename = void_t&lt;&gt;&gt;\nstruct has_reserve : false_type {};\nè¿™é‡Œçš„å†’å·æ˜¯ä»€ä¹ˆè¯­æ³•ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479719,"discussion_content":"ç»§æ‰¿å•Šã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577791316,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1331396,"avatar":"https://static001.geekbang.org/account/avatar/00/14/50/c4/71d9745f.jpg","nickname":"é£","note":"","ucode":"48701F74729E5E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":109327,"discussion_content":"è¿™é‡Œæ˜¯ç»§æ‰¿äº†false_type","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1577684029,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":388372,"user_name":"ã€‚","can_delete":false,"product_type":"c1","uid":2270504,"ip_address":"åŒ—äº¬","ucode":"90D4F0497629E0","user_header":"https://static001.geekbang.org/account/avatar/00/22/a5/28/125b172a.jpg","comment_is_top":false,"comment_ctime":1710056361,"is_pvip":false,"replies":[{"id":141510,"content":"çœ‹ä½ å…³å¿ƒä»€ä¹ˆäº†ã€‚æˆ‘ä¸å…³å¿ƒ&#47;è¦æ±‚ reserve æ²¡æœ‰è¿”å›å€¼ã€‚\n\nå¦å¤–ï¼Œä¸è¦ä½¿ç”¨ __void_tã€‚è¿™ä¸æ˜¯æ ‡å‡†çš„ä¸€éƒ¨åˆ†ï¼ˆæ˜¯æŸäº›ç¼–è¯‘å™¨ç§ç”¨çš„ï¼‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1710822855,"ip_address":"ä¸Šæµ·","comment_id":388372,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"ç”¨ void_t å®ç°çš„ has_reserve å‡½æ•°æœ‰ä¸€äº›é—®é¢˜ï¼Œå®ƒæ²¡æ³•åˆ¤æ–­ç±»å‹çš„reserve æ–¹æ³•çš„è¿”å›å€¼æ˜¯å¦æ˜¯ voidï¼Œæ‰€ä»¥å¯ä»¥ä¿®æ”¹ä¸€ä¸‹ï¼š\n\ntemplate &lt;typename T, typename = void&gt;\nstruct has_reserve : std::false_type {};\n\ntemplate &lt;typename T&gt;\nstruct has_reserve&lt;T, std::__void_t&lt;decltype(std::declval&lt;T&amp;&gt;().reserve(1U))&gt;&gt;\n    : std::is_void&lt;decltype(std::declval&lt;T&amp;&gt;().reserve(1U))&gt; {};","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479719,"discussion_content":"ç»§æ‰¿å•Šã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577791316,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1331396,"avatar":"https://static001.geekbang.org/account/avatar/00/14/50/c4/71d9745f.jpg","nickname":"é£","note":"","ucode":"48701F74729E5E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":109327,"discussion_content":"è¿™é‡Œæ˜¯ç»§æ‰¿äº†false_type","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1577684029,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":167109,"user_name":"ä¸‰å‘³","can_delete":false,"product_type":"c1","uid":1362403,"ip_address":"","ucode":"A580F715D1CC96","user_header":"https://static001.geekbang.org/account/avatar/00/14/c9/e3/28c16afa.jpg","comment_is_top":false,"comment_ctime":1577693193,"is_pvip":false,"replies":[{"id":64990,"content":"æˆ‘å–œæ¬¢è¿™æ ·çš„ç•™è¨€ã€‚å“ˆå“ˆï¼Œå†™ä¸“æ å°±æ˜¯å¸Œæœ›èƒ½ç»™å¤§å®¶å¸®åŠ©çš„ã€‚ğŸ˜‡","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1577800738,"ip_address":"","comment_id":167109,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"emmmm....\nè¿™ä¸€èŠ‚å†…å®¹å¦‚æœæ˜¯åŠå¹´å‰çœ‹åˆ°ï¼Œåº”è¯¥èƒ½èŠ‚çœæˆ‘å¥½å¤šæ—¶é—´å»å†™åºåˆ—åŒ–ï¼ŒçœŸæ˜¯æˆ‘å®å®åœ¨åœ¨çš„éœ€æ±‚å•Šï¼\næˆ‘è‡ªå·±åœ¨å†™æ•°æ®åºåˆ—åŒ–ä¸ºjsonæ–‡æœ¬çš„æ—¶å€™ï¼Œå°±é‡åˆ°äº†è¿™æ ·å¤´ç–¼çš„é—®é¢˜ï¼šå¦‚ä½•æ ¹æ®ç±»å‹ï¼Œå»è°ƒç”¨å¯¹åº”çš„å‡½æ•°ã€‚\nå¦‚æœæ˜¯ç®€å•çš„intï¼Œboolï¼Œfloatï¼Œç›´æ¥ç‰¹åŒ–å°±å¥½äº†ã€‚\nå¦‚æœæ˜¯è‡ªå®šä¹‰çš„ç»“æ„ä½“å‘¢ï¼Ÿæˆ‘çš„åšæ³•å°±æ˜¯åˆ¤æ–­è‡ªå®šä¹‰ç»“æ„ä½“ä¸­æ˜¯å¦æœ‰serializableå’Œdeserializableå‡½æ•°ï¼Œå°±ç”¨åˆ°äº†æ–‡ä¸­æœ€å¼€å§‹çš„æ–¹æ³•åˆ¤æ–­ã€‚\nç„¶è€Œé‚£ä¼šå„¿æˆ‘å†™å¾—è¿˜æ˜¯å¤ªç®€å•ç²—æš´ï¼Œåœ¨ä»£ç ä¸­ç”¨çš„æ˜¯ifå»åˆ¤æ–­ï¼Œå¯¹äºä¸æ”¯æŒçš„ç±»å‹ï¼Œç›´æ¥æŠ¥é”™ï¼Œå¹¶ä¸èƒ½åšåˆ°å¿½ç•¥ã€‚\nçœ‹äº†æœ¬æ–‡ä¹‹åï¼ŒçœŸæ˜¯å—ç›Šé¢‡å¤šå•Šï¼ç•™è¨€äºæ­¤ï¼Œå‘Šè¯‰å¤§å®¶ï¼Œåˆ«ä»¥ä¸ºç”¨ä¸åˆ°è¿™äº›å†…å®¹ï¼Œéƒ½æ˜¯å®å®åœ¨åœ¨çš„å¹²è´§ï¼","like_count":37,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479748,"discussion_content":"æˆ‘å–œæ¬¢è¿™æ ·çš„ç•™è¨€ã€‚å“ˆå“ˆï¼Œå†™ä¸“æ å°±æ˜¯å¸Œæœ›èƒ½ç»™å¤§å®¶å¸®åŠ©çš„ã€‚ğŸ˜‡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577800738,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":166116,"user_name":"ç¦¾æ¡ƒ","can_delete":false,"product_type":"c1","uid":1477855,"ip_address":"","ucode":"9FE85C34A9E9E0","user_header":"https://static001.geekbang.org/account/avatar/00/16/8c/df/77acb793.jpg","comment_is_top":false,"comment_ctime":1577406577,"is_pvip":false,"replies":[{"id":63322,"content":"æ–°å‘ç°ä¸€ä¸ªå·¥å…·ï¼Œå¯ä»¥å±•ç¤ºå®ä¾‹åŒ–çš„è¿‡ç¨‹ã€‚ä½ å¯ä»¥å»çœ‹ä¸€ä¸‹ï¼š\n\nhttps:&#47;&#47;cppinsights.io&#47;","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1577407868,"ip_address":"","comment_id":166116,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"è¯·é—®æœ‰ç¼–è¯‘å™¨æœ¬èº«ä»€ä¹ˆå·¥å…·æˆ–è€…æ—¥å¿—æ¨¡å¼ï¼Œå¯ä»¥æ˜¾ç¤ºæ¨¡ç‰ˆå®ä¾‹åŒ–çš„è¿‡ç¨‹ï¼Ÿ","like_count":16,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479748,"discussion_content":"æˆ‘å–œæ¬¢è¿™æ ·çš„ç•™è¨€ã€‚å“ˆå“ˆï¼Œå†™ä¸“æ å°±æ˜¯å¸Œæœ›èƒ½ç»™å¤§å®¶å¸®åŠ©çš„ã€‚ğŸ˜‡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577800738,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":204459,"user_name":"_å‘±å¤ª_","can_delete":false,"product_type":"c1","uid":1739226,"ip_address":"","ucode":"6B96DC7CF66094","user_header":"https://static001.geekbang.org/account/avatar/00/1a/89/da/e86b9932.jpg","comment_is_top":false,"comment_ctime":1586402731,"is_pvip":false,"replies":[{"id":76498,"content":"æ¬¢è¿èµ°ä¸Šä¸€ä¸ªå°é˜¶ã€‚å­¦ä¹ æ— æ­¢å¢ƒâ€¦â€¦","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1586437263,"ip_address":"","comment_id":204459,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"åˆšæ›´æ–°çš„æ—¶å€™çœ‹å¾—å¤´æ™•ç›®çœ©ï¼Œå‘ç°åŸºç¡€ä¸å¤Ÿã€‚å›å¤´æŠ½ç©ºæ’¸å®Œäº† STL æ ‡å‡†åº“ å’Œ effective modern C++ï¼Œå›è¿‡å¤´æ¥çœ‹è±ç„¶å¼€æœ—ï¼ŒçœŸå®å—ç›ŠåŒªæµ…","like_count":6,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":491188,"discussion_content":"æ¬¢è¿èµ°ä¸Šä¸€ä¸ªå°é˜¶ã€‚å­¦ä¹ æ— æ­¢å¢ƒâ€¦â€¦","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1586437263,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":172523,"user_name":"å¥½å¥½è™šåº¦æ—¶å…‰","can_delete":false,"product_type":"c1","uid":1359941,"ip_address":"","ucode":"8079C01665C63F","user_header":"https://static001.geekbang.org/account/avatar/00/14/c0/45/069cd477.jpg","comment_is_top":false,"comment_ctime":1579218813,"is_pvip":false,"replies":[{"id":66931,"content":"è¿™ä¸ªç½‘ç«™ä¹Ÿè®¸å¯ä»¥å¸®ä½ ï¼š\n\nhttps:&#47;&#47;cppinsights.io&#47;","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1579238415,"ip_address":"","comment_id":172523,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"è¡¨ç¤ºçœŸçš„å¤ªçƒ§è„‘äº†","like_count":6,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":491188,"discussion_content":"æ¬¢è¿èµ°ä¸Šä¸€ä¸ªå°é˜¶ã€‚å­¦ä¹ æ— æ­¢å¢ƒâ€¦â€¦","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1586437263,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":315987,"user_name":"å¸¸æŒ¯å","can_delete":false,"product_type":"c1","uid":2062252,"ip_address":"","ucode":"D61B40E1CCEFD5","user_header":"","comment_is_top":false,"comment_ctime":1634095655,"is_pvip":false,"replies":[{"id":114480,"content":"çœ‹çœ‹ä¸‹é¢çš„ä¾‹å­ï¼Œæ˜¯ä¸æ˜¯å¯ä»¥äº†ï¼Ÿ\n\nintegral_constant&lt;int, 1&gt;::value == 1\nintegral_constant&lt;int, 2&gt;::value == 2\ntrue_type::value == integral_constant&lt;bool, true&gt;::value == true","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1634101969,"ip_address":"","comment_id":315987,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"æ ‡ç­¾åˆ†å‘é‚£é‡Œçš„ï¼š\ntemplate void append(C&amp; container, T* ptr, size_t size)\n{ _append( container, ptr, size, integral_constant&lt; bool, has_reserve&lt;C&gt;::value&gt;{});}\nè¿™ä¸ªintegral_constant&lt; bool, has_reserve&lt;C&gt;::value&gt;{}çœ‹ä¸æ˜ç™½\nintegral_constantæ˜¯ä¸Šä¸€è®²çš„\ntemplate &lt;class T, T v&gt;\nstruct integral_constant {\n  static const T value = v;\n  typedef T value_type;\n  typedef integral_constant type;\n};\nå§ï¼Ÿ\nhas_reserve&lt;C&gt;::valueçš„::valueæ˜¯å•¥æ„æ€ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":528226,"discussion_content":"çœ‹çœ‹ä¸‹é¢çš„ä¾‹å­ï¼Œæ˜¯ä¸æ˜¯å¯ä»¥äº†ï¼Ÿ\n\nintegral_constant&amp;lt;int, 1&amp;gt;::value == 1\nintegral_constant&amp;lt;int, 2&amp;gt;::value == 2\ntrue_type::value == integral_constant&amp;lt;bool, true&amp;gt;::value == true","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634101969,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":217675,"user_name":"è¥¿åŠ åŠ ","can_delete":false,"product_type":"c1","uid":1144416,"ip_address":"","ucode":"727238758A7F3D","user_header":"https://static001.geekbang.org/account/avatar/00/11/76/60/8ea658a9.jpg","comment_is_top":false,"comment_ctime":1589580350,"is_pvip":false,"replies":[{"id":80556,"content":"åœ¨åˆé€‚çš„åœ°æ–¹ä½¿ç”¨ï¼Œè®°ä½ç›®æ ‡æ˜¯ç®€åŒ–æœ€ç»ˆä»£ç å°±è¡Œã€‚æ¨¡æ¿ä»£ç å®¹æ˜“è®©äººè„‘è¢‹ç–¼æ˜¯äº‹å®ï¼Œé™åˆ¶ä¸»è¦ç”¨åœ¨åº•å±‚çš„æ”¯æŒä»£ç é‡Œã€‚ä¸Šå±‚çš„ä½¿ç”¨ä»£ç ä¸€å®šè¦ç®€å•ä¸ºå¥½ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1589640568,"ip_address":"","comment_id":217675,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"çœ‹å®Œäº†ä¸¤è¯¾ä¹‹åï¼Œæ­£å„¿å…«ç»çš„æƒ³æŠŠå„ç§ type_traits ç”¨èµ·æ¥äº†ã€‚","like_count":3,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":528226,"discussion_content":"çœ‹çœ‹ä¸‹é¢çš„ä¾‹å­ï¼Œæ˜¯ä¸æ˜¯å¯ä»¥äº†ï¼Ÿ\n\nintegral_constant&amp;lt;int, 1&amp;gt;::value == 1\nintegral_constant&amp;lt;int, 2&amp;gt;::value == 2\ntrue_type::value == integral_constant&amp;lt;bool, true&amp;gt;::value == true","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634101969,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":282313,"user_name":"geek","can_delete":false,"product_type":"c1","uid":2401422,"ip_address":"","ucode":"FF0845140D72A9","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/NyFOEueITjaGLpakMEuWAqVQjo1uDIXlpDdpCxXGfaWiaXzibLQ3WgOFCe8D9FvCmyjsGT7jDsLUbkt8jt2aVs9g/132","comment_is_top":false,"comment_ctime":1615194216,"is_pvip":false,"replies":[{"id":102536,"content":"ä¸æ˜¯æ‰€æœ‰ç±»å‹éƒ½èƒ½æ»¡è¶³ç¬¬äºŒä¸ªæ¨¡æ¿ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1615216550,"ip_address":"","comment_id":282313,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"è€å¸ˆï¼Œ\ntemplate &lt;typename T,\n          typename = void_t&lt;&gt;&gt;\nstruct has_reserve : false_type {};\n\ntemplate &lt;typename T&gt;\nstruct has_reserve&lt;\n  T, void_t&lt;decltype(\n       declval&lt;T&amp;&gt;().reserve(1U))&gt;&gt;\n  : true_type {};\nç¬¬äºŒä¸ªæ˜¯ä¸€ä¸ªç±»ç‰¹åŒ–ï¼Œä½†æˆ‘ç†è§£ï¼Œç¬¬äºŒä¸ªä¸­voidçš„æ¨¡æ¿å‚æ•°çš„æ¨å¯¼ç»“æœå’Œç¬¬ä¸€ä¸ªæ˜¯ä¸€æ ·çš„ã€‚é‚£æ­¤å¤„ æ›´ç‰¹æ®Š è¿™ä¸ªæ„æ€æ˜¯ä½“ç°åœ¨ voidçš„æ¨¡æ¿å‚æ•°æ¨å¯¼è¿‡ç¨‹ï¼ˆæ— é”™ï¼‰å—ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":516697,"discussion_content":"ä¸æ˜¯æ‰€æœ‰ç±»å‹éƒ½èƒ½æ»¡è¶³ç¬¬äºŒä¸ªæ¨¡æ¿ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615216550,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":353267,"user_name":"Simon","can_delete":false,"product_type":"c1","uid":1914504,"ip_address":"å¹¿ä¸œ","ucode":"A8A2E3E57BD029","user_header":"https://static001.geekbang.org/account/avatar/00/1d/36/88/20b6a6ee.jpg","comment_is_top":false,"comment_ctime":1659323916,"is_pvip":false,"replies":[{"id":128553,"content":"ç­‰æ•ˆäº typename = voidã€‚ç±»å‹å‚æ•°åä¸é‡è¦ã€‚è¿™æ ·ï¼Œç‰¹åŒ–çš„ç‰ˆæœ¬å’Œé€šç”¨çš„ç‰ˆæœ¬ï¼Œåä¸€é¡¹éƒ½æ˜¯ voidï¼Œä¸ç”¨è°ƒç”¨è€…æä¾›ã€‚\n\né€šç”¨æ¨¡æ¿å½¢å¼çš„ç¬¬äºŒä¸ªå‚æ•°å¦‚æœä¸æ˜¯ voidï¼Œé‚£ç‰¹åŒ–å½¢å¼å°±æ°¸è¿œä¸èƒ½åŒ¹é…æˆåŠŸäº†ï¼Œé™¤éè°ƒç”¨è€…æ‰‹å·¥æä¾›ç¬¬äºŒé¡¹ voidï¼ˆç¬¬äºŒé¡¹ void_t çš„ç»“æœä»æ˜¯ voidï¼‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1659539807,"ip_address":"å¹¿ä¸œ","comment_id":353267,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"typename = void_t&lt;&gt; è¿™ä¸ªå†™æ³•æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿç±»å‹åæ˜¯ä¸é‡è¦çš„ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":516697,"discussion_content":"ä¸æ˜¯æ‰€æœ‰ç±»å‹éƒ½èƒ½æ»¡è¶³ç¬¬äºŒä¸ªæ¨¡æ¿ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615216550,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":167026,"user_name":"æäº®äº®","can_delete":false,"product_type":"c1","uid":1116508,"ip_address":"","ucode":"290907F930B261","user_header":"https://static001.geekbang.org/account/avatar/00/11/09/5c/b5d79d20.jpg","comment_is_top":false,"comment_ctime":1577672603,"is_pvip":false,"replies":[{"id":64980,"content":"ç»§æ‰¿å•Šã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1577791316,"ip_address":"","comment_id":167026,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"\ntemplate &lt;typename T,\n          typename = void_t&lt;&gt;&gt;\nstruct has_reserve : false_type {};\nè¿™é‡Œçš„å†’å·æ˜¯ä»€ä¹ˆè¯­æ³•ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582627,"discussion_content":"ç­‰æ•ˆäº typename = voidã€‚ç±»å‹å‚æ•°åä¸é‡è¦ã€‚è¿™æ ·ï¼Œç‰¹åŒ–çš„ç‰ˆæœ¬å’Œé€šç”¨çš„ç‰ˆæœ¬ï¼Œåä¸€é¡¹éƒ½æ˜¯ voidï¼Œä¸ç”¨è°ƒç”¨è€…æä¾›ã€‚\n\né€šç”¨æ¨¡æ¿å½¢å¼çš„ç¬¬äºŒä¸ªå‚æ•°å¦‚æœä¸æ˜¯ voidï¼Œé‚£ç‰¹åŒ–å½¢å¼å°±æ°¸è¿œä¸èƒ½åŒ¹é…æˆåŠŸäº†ï¼Œé™¤éè°ƒç”¨è€…æ‰‹å·¥æä¾›ç¬¬äºŒé¡¹ voidï¼ˆç¬¬äºŒé¡¹ void_t çš„ç»“æœä»æ˜¯ voidï¼‰ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1659539807,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":388372,"user_name":"ã€‚","can_delete":false,"product_type":"c1","uid":2270504,"ip_address":"åŒ—äº¬","ucode":"90D4F0497629E0","user_header":"https://static001.geekbang.org/account/avatar/00/22/a5/28/125b172a.jpg","comment_is_top":false,"comment_ctime":1710056361,"is_pvip":false,"replies":[{"id":141510,"content":"çœ‹ä½ å…³å¿ƒä»€ä¹ˆäº†ã€‚æˆ‘ä¸å…³å¿ƒ&#47;è¦æ±‚ reserve æ²¡æœ‰è¿”å›å€¼ã€‚\n\nå¦å¤–ï¼Œä¸è¦ä½¿ç”¨ __void_tã€‚è¿™ä¸æ˜¯æ ‡å‡†çš„ä¸€éƒ¨åˆ†ï¼ˆæ˜¯æŸäº›ç¼–è¯‘å™¨ç§ç”¨çš„ï¼‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1710822855,"ip_address":"ä¸Šæµ·","comment_id":388372,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"ç”¨ void_t å®ç°çš„ has_reserve å‡½æ•°æœ‰ä¸€äº›é—®é¢˜ï¼Œå®ƒæ²¡æ³•åˆ¤æ–­ç±»å‹çš„reserve æ–¹æ³•çš„è¿”å›å€¼æ˜¯å¦æ˜¯ voidï¼Œæ‰€ä»¥å¯ä»¥ä¿®æ”¹ä¸€ä¸‹ï¼š\n\ntemplate &lt;typename T, typename = void&gt;\nstruct has_reserve : std::false_type {};\n\ntemplate &lt;typename T&gt;\nstruct has_reserve&lt;T, std::__void_t&lt;decltype(std::declval&lt;T&amp;&gt;().reserve(1U))&gt;&gt;\n    : std::is_void&lt;decltype(std::declval&lt;T&amp;&gt;().reserve(1U))&gt; {};","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":639672,"discussion_content":"çœ‹ä½ å…³å¿ƒä»€ä¹ˆäº†ã€‚æˆ‘ä¸å…³å¿ƒ/è¦æ±‚ reserve æ²¡æœ‰è¿”å›å€¼ã€‚\n\nå¦å¤–ï¼Œä¸è¦ä½¿ç”¨ __void_tã€‚è¿™ä¸æ˜¯æ ‡å‡†çš„ä¸€éƒ¨åˆ†ï¼ˆæ˜¯æŸäº›ç¼–è¯‘å™¨ç§ç”¨çš„ï¼‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1710822855,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":379041,"user_name":"ï¼null","can_delete":false,"product_type":"c1","uid":1242483,"ip_address":"åŒ—äº¬","ucode":"4E5B7922980397","user_header":"https://static001.geekbang.org/account/avatar/00/12/f5/73/f7d3a996.jpg","comment_is_top":false,"comment_ctime":1691202633,"is_pvip":false,"replies":[{"id":138155,"content":"å½“ä½ å†™ä¸‹ has_reserve&lt;vector&lt;int&gt;&gt;ï¼Œç¼–è¯‘å™¨é¦–å…ˆæŒ‰ç…§ä¸»æ¨¡æ¿çš„é»˜è®¤æ¨¡æ¿å‚æ•°å½¢å¼ï¼Œè¡¥ä¸º has_reserve&lt;vector&lt;int&gt;, void_t&lt;&gt;&gt;ã€‚void_t&lt;&gt; åªæ˜¯ void çš„å¦å¤–ä¸€ç§å†™æ³•ï¼ˆå½“æ—¶è¿™ä¹ˆå†™æ˜¯ä¸ºäº†è·Ÿä¸‹é¢çš„ç‰¹åŒ–çœ‹èµ·æ¥æ›´å¯¹ç§°ï¼‰ã€‚\n\nå¦‚æœ vector æ²¡æœ‰ reserve æˆå‘˜å‡½æ•°ï¼Œé‚£ç¼–è¯‘å™¨ä¼šåœ¨å°è¯•å¦ä¸€ä¸ªåç‰¹åŒ–æ—¶æ›¿æ¢å¤±è´¥ï¼Œè¿™æ ·å°±åªæœ‰ä¸»æ¨¡æ¿å¯ä»¥ç”¨ï¼Œå¾—åˆ° false_type çš„å­ç±»ã€‚å¦‚æœ vector æœ‰ reserve æˆå‘˜å‡½æ•°ï¼Œé‚£ç¼–è¯‘å™¨å°è¯•åç‰¹åŒ–å°±ä¼šæˆåŠŸï¼Œå®Œç¾åŒ¹é…ï¼šæ›¿æ¢æˆåŠŸï¼Œä¸”éšå¼æä¾›çš„ç¬¬äºŒä¸ªæ¨¡æ¿å‚æ•°è·Ÿ void_t&lt;â€¦&gt; ä¹Ÿèƒ½åŒ¹é…ã€‚å› æ­¤ç¼–è¯‘å™¨ä½¿ç”¨äº†è¿™ç¬¬äºŒä¸ªæ›´ç‰¹åˆ«çš„ç‰¹åŒ–å½¢å¼ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1691473486,"ip_address":"å¹¿ä¸œ","comment_id":379041,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"void_tä»£ç ä¾‹å­åè¾¹æ²¡æœ‰è§£é‡Švoid_tçš„ä½œç”¨ï¼Œæˆ–è€…æ²¡æœ‰typename=void_t&lt;&gt;è¿™éƒ¨åˆ† ä¸ºä»€ä¹ˆä¸è¡Œã€‚\nå¦å¤–typename=void_t&lt;&gt;è¿™ä¸ªæ˜¯ä»€ä¹ˆç¥ä»™è¯­æ³•ï¼Ÿ","like_count":0},{"had_liked":false,"id":376550,"user_name":"yuchen","can_delete":false,"product_type":"c1","uid":1605025,"ip_address":"ä¸Šæµ·","ucode":"D4B55B57D218CB","user_header":"https://static001.geekbang.org/account/avatar/00/18/7d/a1/46c5293c.jpg","comment_is_top":false,"comment_ctime":1686910476,"is_pvip":false,"replies":[{"id":137274,"content":"è¿™æ˜¯æ¨¡æ‹ŸçœŸå®çš„åœºæ™¯ï¼Œç”¨å·¦å€¼å¼•ç”¨å»è°ƒç”¨å‡½æ•°ã€‚åœ¨ç›®å‰çš„æƒ…å†µä¸‹ä¸é€ æˆå®é™…åŒºåˆ«ã€‚\n\nä¸€ä¸ªæˆå‘˜å‡½æ•°æ˜¯å¯ä»¥æœ‰å·¦å€¼å¼•ç”¨&#47;å³å€¼å¼•ç”¨ç‰ˆæœ¬çš„ï¼Œä¹Ÿå¯ä»¥æœ‰constç‰ˆæœ¬ï¼Œè¿˜å¯ä»¥ç»„åˆã€‚å°½é‡æ¨¡æ‹Ÿå®é™…è°ƒç”¨çš„åœºæ™¯æœ€ä¸å®¹æ˜“å‡ºé—®é¢˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1687010565,"ip_address":"å¹¿ä¸œ","comment_id":376550,"utype":1}],"discussion_count":3,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"è¯·é—®ï¼Œä¸ºä»€ä¹ˆ â€˜declval&lt;T&amp;&gt;().reserve(1U)â€™ä¸­ä¸ºä»€ä¹ˆè¦ä½¿ç”¨T&amp;è€Œä¸æ˜¯Tï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":621268,"discussion_content":"è¿™æ˜¯æ¨¡æ‹ŸçœŸå®çš„åœºæ™¯ï¼Œç”¨å·¦å€¼å¼•ç”¨å»è°ƒç”¨å‡½æ•°ã€‚åœ¨ç›®å‰çš„æƒ…å†µä¸‹ä¸é€ æˆå®é™…åŒºåˆ«ã€‚\n\nä¸€ä¸ªæˆå‘˜å‡½æ•°æ˜¯å¯ä»¥æœ‰å·¦å€¼å¼•ç”¨/å³å€¼å¼•ç”¨ç‰ˆæœ¬çš„ï¼Œä¹Ÿå¯ä»¥æœ‰constç‰ˆæœ¬ï¼Œè¿˜å¯ä»¥ç»„åˆã€‚å°½é‡æ¨¡æ‹Ÿå®é™…è°ƒç”¨çš„åœºæ™¯æœ€ä¸å®¹æ˜“å‡ºé—®é¢˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1687010566,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1605025,"avatar":"https://static001.geekbang.org/account/avatar/00/18/7d/a1/46c5293c.jpg","nickname":"yuchen","note":"","ucode":"D4B55B57D218CB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":621437,"discussion_content":"æ‚¨å¥½ï¼Œè€å¸ˆã€‚constæˆå‘˜å‡½æ•°ç‰ˆæœ¬å’Œéconst æˆå‘˜å‡½æ•°ç‰ˆæœ¬æˆ‘èƒ½ç†è§£ï¼Œä½†å·¦å€¼å¼•ç”¨ç‰ˆæœ¬å’Œå³å€¼å¼•ç”¨ç‰ˆæœ¬æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿéš¾é“å­˜åœ¨ä¸€äº›æˆå‘˜å‡½æ•°åªèƒ½å·¦å€¼å¼•ç”¨è°ƒç”¨ï¼Œè€Œå³å€¼å¼•ç”¨ä¸èƒ½è°ƒç”¨å—ï¼Ÿå¯å¦ä¸¾ä¸ªä¾‹å­å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1687229926,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1605025,"avatar":"https://static001.geekbang.org/account/avatar/00/18/7d/a1/46c5293c.jpg","nickname":"yuchen","note":"","ucode":"D4B55B57D218CB","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":621619,"discussion_content":"æ˜¯å•Šã€‚æœ‰ä¸€ç§æ¨èçš„æ–¹å¼å®šä¹‰æ‹·è´èµ‹å€¼è¿ç®—ç¬¦è¿™ä¹ˆå†™ï¼š\n\nObj operator=(const Obj&amp;) &amp;\n{ ... }\n\nç»“å°¾çš„ &amp; å°±è¡¨ç¤º = å·¦ä¾§å¿…é¡»æ˜¯ä¸ªå·¦å€¼ï¼ˆæ˜¯çš„ï¼Œå¤§éƒ¨åˆ†æˆ‘ä»¬çš„ç±»çš„å³å€¼å¯¹è±¡æ˜¯å¯ä»¥æ”¾ç­‰å·å·¦ä¾§çš„ğŸ˜‚ï¼‰ã€‚\n\nè¯·æœç´¢ member functions with ref-qualifierã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1687352681,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":621437,"ip_address":"å¹¿ä¸œ","group_id":0},"score":621619,"extra":""}]}]},{"had_liked":false,"id":358603,"user_name":"Roblaboy","can_delete":false,"product_type":"c1","uid":2979544,"ip_address":"æ±Ÿè‹","ucode":"801AB12DBE521B","user_header":"","comment_is_top":false,"comment_ctime":1664461717,"is_pvip":false,"replies":[{"id":130660,"content":"è¯·ç»™å‡ºè¯¦ç»†çš„é”™è¯¯ä»£ç ã€ç¼–è¯‘å‘½ä»¤è¡Œå’Œé”™è¯¯ä¿¡æ¯ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1665379010,"ip_address":"æ±Ÿè‹","comment_id":358603,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"æˆ‘è¿™è¾¹æç¤º enable_if_t ä¸æ˜¯æ¨¡æ¿C&#47;C++(864) æ˜¯ä¸ºä»€ä¹ˆï¼Œæˆ‘è¿™è¾¹ç”¨çš„æ˜¯C++17","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":621268,"discussion_content":"è¿™æ˜¯æ¨¡æ‹ŸçœŸå®çš„åœºæ™¯ï¼Œç”¨å·¦å€¼å¼•ç”¨å»è°ƒç”¨å‡½æ•°ã€‚åœ¨ç›®å‰çš„æƒ…å†µä¸‹ä¸é€ æˆå®é™…åŒºåˆ«ã€‚\n\nä¸€ä¸ªæˆå‘˜å‡½æ•°æ˜¯å¯ä»¥æœ‰å·¦å€¼å¼•ç”¨/å³å€¼å¼•ç”¨ç‰ˆæœ¬çš„ï¼Œä¹Ÿå¯ä»¥æœ‰constç‰ˆæœ¬ï¼Œè¿˜å¯ä»¥ç»„åˆã€‚å°½é‡æ¨¡æ‹Ÿå®é™…è°ƒç”¨çš„åœºæ™¯æœ€ä¸å®¹æ˜“å‡ºé—®é¢˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1687010566,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1605025,"avatar":"https://static001.geekbang.org/account/avatar/00/18/7d/a1/46c5293c.jpg","nickname":"yuchen","note":"","ucode":"D4B55B57D218CB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":621437,"discussion_content":"æ‚¨å¥½ï¼Œè€å¸ˆã€‚constæˆå‘˜å‡½æ•°ç‰ˆæœ¬å’Œéconst æˆå‘˜å‡½æ•°ç‰ˆæœ¬æˆ‘èƒ½ç†è§£ï¼Œä½†å·¦å€¼å¼•ç”¨ç‰ˆæœ¬å’Œå³å€¼å¼•ç”¨ç‰ˆæœ¬æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿéš¾é“å­˜åœ¨ä¸€äº›æˆå‘˜å‡½æ•°åªèƒ½å·¦å€¼å¼•ç”¨è°ƒç”¨ï¼Œè€Œå³å€¼å¼•ç”¨ä¸èƒ½è°ƒç”¨å—ï¼Ÿå¯å¦ä¸¾ä¸ªä¾‹å­å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1687229926,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1605025,"avatar":"https://static001.geekbang.org/account/avatar/00/18/7d/a1/46c5293c.jpg","nickname":"yuchen","note":"","ucode":"D4B55B57D218CB","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":621619,"discussion_content":"æ˜¯å•Šã€‚æœ‰ä¸€ç§æ¨èçš„æ–¹å¼å®šä¹‰æ‹·è´èµ‹å€¼è¿ç®—ç¬¦è¿™ä¹ˆå†™ï¼š\n\nObj operator=(const Obj&amp;) &amp;\n{ ... }\n\nç»“å°¾çš„ &amp; å°±è¡¨ç¤º = å·¦ä¾§å¿…é¡»æ˜¯ä¸ªå·¦å€¼ï¼ˆæ˜¯çš„ï¼Œå¤§éƒ¨åˆ†æˆ‘ä»¬çš„ç±»çš„å³å€¼å¯¹è±¡æ˜¯å¯ä»¥æ”¾ç­‰å·å·¦ä¾§çš„ğŸ˜‚ï¼‰ã€‚\n\nè¯·æœç´¢ member functions with ref-qualifierã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1687352681,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":621437,"ip_address":"å¹¿ä¸œ","group_id":0},"score":621619,"extra":""}]}]},{"had_liked":false,"id":358499,"user_name":"Geek_fa7226","can_delete":false,"product_type":"c1","uid":3184848,"ip_address":"æ±Ÿè‹","ucode":"B7780A449FAC27","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK418DKQ4eFh00D6vwqE7nJEX1Ou9DWDHKV2Zj21lq00qK6RzpY6SP3ic0I1hMnbvxQBQSCzzOomNg/132","comment_is_top":false,"comment_ctime":1664364470,"is_pvip":false,"replies":[{"id":130659,"content":"åç½®è¿”å›å€¼å£°æ˜ã€‚æ­¤å¤„ä¸»è¦æ˜¯åˆ©ç”¨åŸå‹çš„ SFINAEï¼ˆå‡½æ•°ä½“ä¸­çš„å†…å®¹ä¸å‚ä¸SFINAEï¼Œå¤±è´¥äº†ä¼šçœŸç¼–è¯‘å¤±è´¥ï¼Œè€Œä¸æ˜¯è·³è¿‡å½“å‰å‡½æ•°ï¼‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1665378971,"ip_address":"æ±Ÿè‹","comment_id":358499,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"auto append(C&amp; container, T* ptr, size_t size) -&gt; decltypeï¼ˆ...ï¼‰ä¸­çš„-&gt;æ˜¯ä»€ä¹ˆè¯­æ³•ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":589873,"discussion_content":"åç½®è¿”å›å€¼å£°æ˜ã€‚æ­¤å¤„ä¸»è¦æ˜¯åˆ©ç”¨åŸå‹çš„ SFINAEï¼ˆå‡½æ•°ä½“ä¸­çš„å†…å®¹ä¸å‚ä¸SFINAEï¼Œå¤±è´¥äº†ä¼šçœŸç¼–è¯‘å¤±è´¥ï¼Œè€Œä¸æ˜¯è·³è¿‡å½“å‰å‡½æ•°ï¼‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1665378972,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ±Ÿè‹","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":350062,"user_name":"Geek_fd78c0","can_delete":false,"product_type":"c1","uid":1126540,"ip_address":"","ucode":"8C95427F348352","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/JWoFanyWDk7lWL7g8rLYI0icH1XOVoCyjR9HoMzliauxggPSWWeYVleqKwiaUnBEChfIctoFzVoBqqVT3Lot18Srg/132","comment_is_top":false,"comment_ctime":1656551924,"is_pvip":false,"replies":[{"id":127428,"content":"å‚è§ https:&#47;&#47;zh.cppreference.com&#47;w&#47;cpp&#47;language&#47;function\n\nã€Œå°¾éšè¿”å›ç±»å‹\t-\t(C++11 èµ·) å°¾éšè¿”å›ç±»å‹ï¼Œå½“è¿”å›ç±»å‹å–å†³äºå®å‚åæ—¶ï¼Œä¾‹å¦‚ template &lt;class T, class U&gt; auto add(T t, U u) -&gt; decltype(t + u);ï¼Œæˆ–å½“è¿”å›ç±»å‹å¤æ‚æ—¶ï¼Œä¾‹å¦‚åœ¨ auto fpif(int)-&gt;int(*)(int) ä¸­ï¼Œå°¾éšè¿”å›ç±»å‹å¾ˆæœ‰ç”¨ã€","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1656814809,"ip_address":"","comment_id":350062,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"\n\nè¯·é—®è€å¸ˆè¿™ä¸ª-&gt;æ˜¯ä»€ä¹ˆæ„æ€ï¼Œä¸å¤ªæ‡‚è¿™ä¸ªè¯­æ³•ï¼Ÿ\ntemplate &lt;typename C, typename T&gt;\nauto append(C&amp; container, T* ptr,\n            size_t size)\n  -&gt; decltype(\n    declval&lt;C&amp;&gt;().reserve(1U),\n    void())\n","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":589873,"discussion_content":"åç½®è¿”å›å€¼å£°æ˜ã€‚æ­¤å¤„ä¸»è¦æ˜¯åˆ©ç”¨åŸå‹çš„ SFINAEï¼ˆå‡½æ•°ä½“ä¸­çš„å†…å®¹ä¸å‚ä¸SFINAEï¼Œå¤±è´¥äº†ä¼šçœŸç¼–è¯‘å¤±è´¥ï¼Œè€Œä¸æ˜¯è·³è¿‡å½“å‰å‡½æ•°ï¼‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1665378972,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ±Ÿè‹","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":325598,"user_name":"Geek_7ce030","can_delete":false,"product_type":"c1","uid":2848838,"ip_address":"","ucode":"EFABCA83ECE8E6","user_header":"","comment_is_top":false,"comment_ctime":1639035722,"is_pvip":false,"replies":[{"id":118174,"content":"æ²¡äººä¸¥è‚ƒåœ°æå‡ºè¿™æ ·çš„ææ¡ˆã€‚ä½ çš„æƒ³æ³•ä¸­çš„å¤æ‚æ€§ææ€•ä½ ä¹Ÿæ²¡æœ‰è®¤çœŸè€ƒè™‘ã€‚ä»Šå¤©å°±æ›´æ²¡æœ‰æ„ä¹‰äº†â€”â€”å› ä¸ºæˆ‘ä»¬å¯ä»¥ç”¨C++çš„ä¼ ç»Ÿæ–¹å¼å†™ç¼–è¯‘æœŸè®¡ç®—çš„ä»£ç ã€‚ç»§ç»­å¾€ä¸‹çœ‹constexprã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1639132007,"ip_address":"","comment_id":325598,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"æ¨¡æ¿æœ¬èº«å›¾çµå®Œå¤‡ä½†æ˜¯è¯­æ³•æå…¶æ™¦æ¶©ä¸‘é™‹ï¼Œæ—¢ç„¶å¦‚æ­¤ï¼Œä¸ºä½•ä¸ç”¨Pythonè¯­æ³•ä»£æ›¿ç°æœ‰æ¨¡æ¿è¯­æ³•ï¼Œæœ¬è´¨ä¸Šæ˜¯æš´éœ²ç¼–è¯‘æœŸæ¥å£ï¼Œå½“å‰ç”¨æ¨¡æ¿æš´éœ²ï¼Œä¹Ÿå¯ä»¥ç”¨æ­£å¸¸çš„è¯­è¨€æš´éœ²ï¼Œè®©ç”¨æˆ·æ›´è½»æ¾åœ°æ§åˆ¶ç¼–è¯‘è¿‡ç¨‹ã€‚å¯èƒ½æ˜¯ç§¯é‡éš¾è¿”å§ã€‚","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":578480,"discussion_content":"å‚è§ https://zh.cppreference.com/w/cpp/language/function\n\nã€Œå°¾éšè¿”å›ç±»å‹\t-\t(C++11 èµ·) å°¾éšè¿”å›ç±»å‹ï¼Œå½“è¿”å›ç±»å‹å–å†³äºå®å‚åæ—¶ï¼Œä¾‹å¦‚ template &lt;class T, class U&gt; auto add(T t, U u) -&gt; decltype(t + u);ï¼Œæˆ–å½“è¿”å›ç±»å‹å¤æ‚æ—¶ï¼Œä¾‹å¦‚åœ¨ auto fpif(int)-&gt;int(*)(int) ä¸­ï¼Œå°¾éšè¿”å›ç±»å‹å¾ˆæœ‰ç”¨ã€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656814809,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":317262,"user_name":"ano","can_delete":false,"product_type":"c1","uid":1783342,"ip_address":"","ucode":"7DE64BDFA78550","user_header":"https://static001.geekbang.org/account/avatar/00/1b/36/2e/376a3551.jpg","comment_is_top":false,"comment_ctime":1634725898,"is_pvip":false,"replies":[{"id":115162,"content":"å‡½æ•°ä¸­çš„æ™®é€šä»£ç æ€»ä¼šè¢«ç¼–è¯‘ï¼Œå“ªæ€•è¿™ä¸ªæ¡ä»¶æ‰§è¡Œä¸åˆ°ã€‚\n\nåŒæ—¶å‚è€ƒä¸‹ä¸€è®²çš„å†…å®¹ã€‚ğŸ˜","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1634909419,"ip_address":"","comment_id":317262,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"è€å¸ˆï¼Œæˆ‘æœ‰ä¸ªç–‘é—®ï¼Œå…³äºè¿™ä¸€å¥\né™æ€å¤šæ€çš„é™åˆ¶ï¼Ÿ\nâ€œåœ¨ C ç±»å‹æ²¡æœ‰ reserve æˆå‘˜å‡½æ•°çš„æƒ…å†µä¸‹ï¼Œç¼–è¯‘æ˜¯ä¸èƒ½é€šè¿‡çš„ï¼Œä¼šæŠ¥é”™ã€‚è¿™æ˜¯å› ä¸º C++ æ˜¯é™æ€ç±»å‹çš„è¯­è¨€ï¼Œæ‰€æœ‰çš„å‡½æ•°ã€åå­—å¿…é¡»åœ¨ç¼–è¯‘æ—¶è¢«æˆåŠŸè§£æã€ç¡®å®šâ€\nif (has_reserve&lt;C&gt;::value)\n\næˆ‘çš„ç†è§£æ˜¯ï¼Œåœ¨ç¼–è¯‘æ—¶ï¼Œif è¯­å¥ä¸­çš„ has_reserve è¿›è¡Œæ¨¡æ¿åŒ¹é…ï¼Œå†³è®®ï¼Œå‘ç°é‚£ä¸ªç‰¹åŒ–çš„ true_type has_reserve, äº§ç”Ÿ substitution failure, ç„¶åå°±ä¼šå›åˆ°é‚£ä¸ª false_type çš„ has_reserve, æœ€ç»ˆå®ä¾‹åŒ–æˆ false_type çš„ has_reserveï¼Œç„¶å value æ˜¯ false, æ‰€ä»¥è¿™ä¸ª if è¯­å¥ä¸­å§‹ç»ˆä¸º falseï¼Œä½†æ˜¯ä¸åº”è¯¥ä¼šç¼–è¯‘é”™è¯¯å‘€ã€‚\nä¸çŸ¥é“æˆ‘å“ªé‡Œç†è§£çš„ä¸å¯¹ï¼Ÿ\n","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":537661,"discussion_content":"æ²¡äººä¸¥è‚ƒåœ°æå‡ºè¿™æ ·çš„ææ¡ˆã€‚ä½ çš„æƒ³æ³•ä¸­çš„å¤æ‚æ€§ææ€•ä½ ä¹Ÿæ²¡æœ‰è®¤çœŸè€ƒè™‘ã€‚ä»Šå¤©å°±æ›´æ²¡æœ‰æ„ä¹‰äº†â€”â€”å› ä¸ºæˆ‘ä»¬å¯ä»¥ç”¨C++çš„ä¼ ç»Ÿæ–¹å¼å†™ç¼–è¯‘æœŸè®¡ç®—çš„ä»£ç ã€‚ç»§ç»­å¾€ä¸‹çœ‹constexprã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639132008,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1370959,"avatar":"https://static001.geekbang.org/account/avatar/00/14/eb/4f/6a97b1cd.jpg","nickname":"çŒªå°æ“","note":"","ucode":"D9552746AE3327","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":584888,"discussion_content":"å»ºè®®å¤šçœ‹çœ‹cppconï¼Œæ•´ä¸ªæœºå™¨æœºä½“ç³»éƒ½æ˜¯å»ºç«‹åœ¨cï¼Œcppä¹‹ä¸Šï¼Œè®¾è®¡é”™è¯¯éƒ½åªèƒ½ç»§ç»­ä¿ç•™é‚£ä¸ªé”™è¯¯ï¼Œæ— æ³•ä¿®æ”¹ï¼Œä½ çš„ä¿®æ”¹è®©ä¸€äº›è€é¡¹ç›®æ— æ³•ç¼–è¯‘ï¼Œé‚£æ˜¯ä¸èƒ½æ¥å—çš„ï¼Œè¿˜èƒ½æ”¹è¯­æ³•ï¼Ÿå½“æ˜¯javaæˆ–è€…goå‘¢ï¼Ÿcï¼Œcppçš„å†å²åŒ…è¢±éš¾ä»¥æƒ³è±¡ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661183472,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":296425,"user_name":"chang","can_delete":false,"product_type":"c1","uid":2596026,"ip_address":"","ucode":"594EF8CB4477BD","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/2ibrq71Y5Ww3KDRibDxF1gt9YDEPuZkv4ITHEP1u4vvjpPDukkLoK4ngQy1hKKzccnsicLkUAda7sPpibR6Kyb0cfQ/132","comment_is_top":false,"comment_ctime":1622968778,"is_pvip":false,"replies":[{"id":107755,"content":"åˆæµ‹äº†ä¸€éï¼Œç”¨ä¸‹é¢çš„è¯­å¥å¯ä»¥è¾“å‡º 1ï¼Œåº”è¯¥æ²¡é—®é¢˜ï¼š\n\ncout &lt;&lt; has_reserve&lt;vector&lt;int&gt;&gt;::value;","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1623114898,"ip_address":"","comment_id":296425,"utype":1}],"discussion_count":4,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"\ntemplate &lt;typename T&gt;\nstruct has_reserve {\n  struct good { char dummy; };\n  struct bad { char dummy[2]; };\n  template &lt;class U,\n            void (U::*)(size_t)&gt;\n  struct SFINAE {};\n  template &lt;class U&gt;\n  static good\n  reserve(SFINAE&lt;U, &amp;U::reserve&gt;*);\n  template &lt;class U&gt;\n  static bad reserve(...);\n  static const bool value =\n    sizeof(reserve&lt;T&gt;(nullptr))\n    == sizeof(good);\n};\n\nè¿™ä¸ªè²Œä¼¼å¯¹æ ‡å‡†åº“çš„vectoræ— æ•ˆï¼Ÿå› ä¸ºå‚æ•°ç±»å‹ä¸åŒ¹é…ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":528740,"discussion_content":"å‡½æ•°ä¸­çš„æ™®é€šä»£ç æ€»ä¼šè¢«ç¼–è¯‘ï¼Œå“ªæ€•è¿™ä¸ªæ¡ä»¶æ‰§è¡Œä¸åˆ°ã€‚\n\nåŒæ—¶å‚è€ƒä¸‹ä¸€è®²çš„å†…å®¹ã€‚ğŸ˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634909419,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":289900,"user_name":"ä¹æ„è‡³æ","can_delete":false,"product_type":"c1","uid":2340308,"ip_address":"","ucode":"7AC6778D854482","user_header":"https://static001.geekbang.org/account/avatar/00/23/b5/d4/147abdaa.jpg","comment_is_top":false,"comment_ctime":1619256713,"is_pvip":false,"replies":[{"id":105164,"content":"å“¦ï¼ŒåŸå› å®é™…å¾ˆç®€å•ï¼Œå¤–é¢ï¼ˆåŒ…æ‹¬ has_reserveï¼‰è®¿é—®ä¸åˆ° GoodClass::reserveâ€”â€”ä½ æ²¡æœ‰æ ‡ publicã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1619342741,"ip_address":"","comment_id":289900,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"class GoodClass {\n    void reserve(size_t x);\n};\n\nclass BadClass {\n};\n\n    std::cout &lt;&lt; has_reserve&lt;BadClass&gt;::value &lt;&lt; std::endl;\n    std::cout &lt;&lt; has_reserve&lt;GoodClass&gt;::value &lt;&lt; std::endl;\n\n\ntemplate &lt;typename T&gt;\nstruct has_reserve {\n  struct good { char dummy; };\n  struct bad { char dummy[2]; };\n  template &lt;class U,\n            void (U::*)(size_t)&gt;\n  struct SFINAE {};\n  template &lt;class U&gt;\n  static good\n  reserve(SFINAE&lt;U, &amp;U::reserve&gt;*);\n  template &lt;class U&gt;\n  static bad reserve(...);\n  static const bool value =\n    sizeof(reserve&lt;T&gt;(nullptr))\n    == sizeof(good);\n};\n\nè€å¸ˆï¼Œè¯·é—®has_reserveè¯¥æ€ä¹ˆç”¨å‘¢ï¼Ÿä¸¤è€…è¾“å‡ºéƒ½æ˜¯0å•Š","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":521437,"discussion_content":"åˆæµ‹äº†ä¸€éï¼Œç”¨ä¸‹é¢çš„è¯­å¥å¯ä»¥è¾“å‡º 1ï¼Œåº”è¯¥æ²¡é—®é¢˜ï¼š\n\ncout &amp;lt;&amp;lt; has_reserve&amp;lt;vector&amp;lt;int&amp;gt;&amp;gt;::value;","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623114898,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2596026,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/2ibrq71Y5Ww3KDRibDxF1gt9YDEPuZkv4ITHEP1u4vvjpPDukkLoK4ngQy1hKKzccnsicLkUAda7sPpibR6Kyb0cfQ/132","nickname":"chang","note":"","ucode":"594EF8CB4477BD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":378295,"discussion_content":"å¦å¤–è¿˜æœ‰ä¸ªç–‘é—®ï¼šä¸ºä»€ä¹ˆ static good\n  reserve(SFINAE<U, &amp;U::reserve>*);  ä¸å®šä¹‰å‡½æ•°ä½“ä¹Ÿè¡Œï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623152783,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":2596026,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/2ibrq71Y5Ww3KDRibDxF1gt9YDEPuZkv4ITHEP1u4vvjpPDukkLoK4ngQy1hKKzccnsicLkUAda7sPpibR6Kyb0cfQ/132","nickname":"chang","note":"","ucode":"594EF8CB4477BD","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":378338,"discussion_content":"å› ä¸ºæ²¡äººè°ƒç”¨å®ƒä»¬ã€‚æˆ‘åªåˆ©ç”¨äº†å®ƒä»¬çš„åŸå‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623165465,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":378295,"ip_address":"","group_id":0},"score":378338,"extra":""}]},{"author":{"id":2596026,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/2ibrq71Y5Ww3KDRibDxF1gt9YDEPuZkv4ITHEP1u4vvjpPDukkLoK4ngQy1hKKzccnsicLkUAda7sPpibR6Kyb0cfQ/132","nickname":"chang","note":"","ucode":"594EF8CB4477BD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":378294,"discussion_content":"æƒ­æ„§ï¼Œè‡ªå·±æŠŠstatic good\n  reserve(SFINAE<U, &amp;U::reserve>*); ä¸­çš„&amp;Uè¯¯å†™æˆ*Uäº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623152664,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":230484,"user_name":"AlphaCat","can_delete":false,"product_type":"c1","uid":1059159,"ip_address":"","ucode":"69538BE935B32C","user_header":"https://static001.geekbang.org/account/avatar/00/10/29/57/aaa8612e.jpg","comment_is_top":false,"comment_ctime":1593398755,"is_pvip":false,"replies":[{"id":85132,"content":"å—¯ï¼Œè°¢è°¢ã€‚å·²ç»è”ç³»ç¼–è¾‘ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1593437875,"ip_address":"","comment_id":230484,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"è€å¸ˆï¼Œæ›¿æ¢å¤±è´¥éé”™ï¼ˆsubstituion failure is not an errorï¼‰ï¼Œ &quot;substituion&quot; æ‰äº†ä¸€ä¸ª tï¼Œåº”è¯¥æ˜¯ Substitution ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":519049,"discussion_content":"å“¦ï¼ŒåŸå› å®é™…å¾ˆç®€å•ï¼Œå¤–é¢ï¼ˆåŒ…æ‹¬ has_reserveï¼‰è®¿é—®ä¸åˆ° GoodClass::reserveâ€”â€”ä½ æ²¡æœ‰æ ‡ publicã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619342741,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2340308,"avatar":"https://static001.geekbang.org/account/avatar/00/23/b5/d4/147abdaa.jpg","nickname":"ä¹æ„è‡³æ","note":"","ucode":"7AC6778D854482","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":370243,"discussion_content":"ã€‚ã€‚ã€‚å­¦ä¹ äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619343474,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":379041,"user_name":"ï¼null","can_delete":false,"product_type":"c1","uid":1242483,"ip_address":"åŒ—äº¬","ucode":"4E5B7922980397","user_header":"https://static001.geekbang.org/account/avatar/00/12/f5/73/f7d3a996.jpg","comment_is_top":false,"comment_ctime":1691202633,"is_pvip":false,"replies":[{"id":138155,"content":"å½“ä½ å†™ä¸‹ has_reserve&lt;vector&lt;int&gt;&gt;ï¼Œç¼–è¯‘å™¨é¦–å…ˆæŒ‰ç…§ä¸»æ¨¡æ¿çš„é»˜è®¤æ¨¡æ¿å‚æ•°å½¢å¼ï¼Œè¡¥ä¸º has_reserve&lt;vector&lt;int&gt;, void_t&lt;&gt;&gt;ã€‚void_t&lt;&gt; åªæ˜¯ void çš„å¦å¤–ä¸€ç§å†™æ³•ï¼ˆå½“æ—¶è¿™ä¹ˆå†™æ˜¯ä¸ºäº†è·Ÿä¸‹é¢çš„ç‰¹åŒ–çœ‹èµ·æ¥æ›´å¯¹ç§°ï¼‰ã€‚\n\nå¦‚æœ vector æ²¡æœ‰ reserve æˆå‘˜å‡½æ•°ï¼Œé‚£ç¼–è¯‘å™¨ä¼šåœ¨å°è¯•å¦ä¸€ä¸ªåç‰¹åŒ–æ—¶æ›¿æ¢å¤±è´¥ï¼Œè¿™æ ·å°±åªæœ‰ä¸»æ¨¡æ¿å¯ä»¥ç”¨ï¼Œå¾—åˆ° false_type çš„å­ç±»ã€‚å¦‚æœ vector æœ‰ reserve æˆå‘˜å‡½æ•°ï¼Œé‚£ç¼–è¯‘å™¨å°è¯•åç‰¹åŒ–å°±ä¼šæˆåŠŸï¼Œå®Œç¾åŒ¹é…ï¼šæ›¿æ¢æˆåŠŸï¼Œä¸”éšå¼æä¾›çš„ç¬¬äºŒä¸ªæ¨¡æ¿å‚æ•°è·Ÿ void_t&lt;â€¦&gt; ä¹Ÿèƒ½åŒ¹é…ã€‚å› æ­¤ç¼–è¯‘å™¨ä½¿ç”¨äº†è¿™ç¬¬äºŒä¸ªæ›´ç‰¹åˆ«çš„ç‰¹åŒ–å½¢å¼ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1691473486,"ip_address":"å¹¿ä¸œ","comment_id":379041,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"void_tä»£ç ä¾‹å­åè¾¹æ²¡æœ‰è§£é‡Švoid_tçš„ä½œç”¨ï¼Œæˆ–è€…æ²¡æœ‰typename=void_t&lt;&gt;è¿™éƒ¨åˆ† ä¸ºä»€ä¹ˆä¸è¡Œã€‚\nå¦å¤–typename=void_t&lt;&gt;è¿™ä¸ªæ˜¯ä»€ä¹ˆç¥ä»™è¯­æ³•ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":625231,"discussion_content":"å½“ä½ å†™ä¸‹ has_reserve&lt;vector&lt;int&gt;&gt;ï¼Œç¼–è¯‘å™¨é¦–å…ˆæŒ‰ç…§ä¸»æ¨¡æ¿çš„é»˜è®¤æ¨¡æ¿å‚æ•°å½¢å¼ï¼Œè¡¥ä¸º has_reserve&lt;vector&lt;int&gt;, void_t&lt;&gt;&gt;ã€‚void_t&lt;&gt; åªæ˜¯ void çš„å¦å¤–ä¸€ç§å†™æ³•ï¼ˆå½“æ—¶è¿™ä¹ˆå†™æ˜¯ä¸ºäº†è·Ÿä¸‹é¢çš„ç‰¹åŒ–çœ‹èµ·æ¥æ›´å¯¹ç§°ï¼‰ã€‚\n\nå¦‚æœ vector æ²¡æœ‰ reserve æˆå‘˜å‡½æ•°ï¼Œé‚£ç¼–è¯‘å™¨ä¼šåœ¨å°è¯•å¦ä¸€ä¸ªåç‰¹åŒ–æ—¶æ›¿æ¢å¤±è´¥ï¼Œè¿™æ ·å°±åªæœ‰ä¸»æ¨¡æ¿å¯ä»¥ç”¨ï¼Œå¾—åˆ° false_type çš„å­ç±»ã€‚å¦‚æœ vector æœ‰ reserve æˆå‘˜å‡½æ•°ï¼Œé‚£ç¼–è¯‘å™¨å°è¯•åç‰¹åŒ–å°±ä¼šæˆåŠŸï¼Œå®Œç¾åŒ¹é…ï¼šæ›¿æ¢æˆåŠŸï¼Œä¸”éšå¼æä¾›çš„ç¬¬äºŒä¸ªæ¨¡æ¿å‚æ•°è·Ÿ void_t&lt;â€¦&gt; ä¹Ÿèƒ½åŒ¹é…ã€‚å› æ­¤ç¼–è¯‘å™¨ä½¿ç”¨äº†è¿™ç¬¬äºŒä¸ªæ›´ç‰¹åˆ«çš„ç‰¹åŒ–å½¢å¼ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1691473486,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1242483,"avatar":"https://static001.geekbang.org/account/avatar/00/12/f5/73/f7d3a996.jpg","nickname":"ï¼null","note":"","ucode":"4E5B7922980397","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":625253,"discussion_content":"è°¢è°¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1691489293,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":625231,"ip_address":"åŒ—äº¬","group_id":0},"score":625253,"extra":""}]}]},{"had_liked":false,"id":376550,"user_name":"yuchen","can_delete":false,"product_type":"c1","uid":1605025,"ip_address":"ä¸Šæµ·","ucode":"D4B55B57D218CB","user_header":"https://static001.geekbang.org/account/avatar/00/18/7d/a1/46c5293c.jpg","comment_is_top":false,"comment_ctime":1686910476,"is_pvip":false,"replies":[{"id":137274,"content":"è¿™æ˜¯æ¨¡æ‹ŸçœŸå®çš„åœºæ™¯ï¼Œç”¨å·¦å€¼å¼•ç”¨å»è°ƒç”¨å‡½æ•°ã€‚åœ¨ç›®å‰çš„æƒ…å†µä¸‹ä¸é€ æˆå®é™…åŒºåˆ«ã€‚\n\nä¸€ä¸ªæˆå‘˜å‡½æ•°æ˜¯å¯ä»¥æœ‰å·¦å€¼å¼•ç”¨&#47;å³å€¼å¼•ç”¨ç‰ˆæœ¬çš„ï¼Œä¹Ÿå¯ä»¥æœ‰constç‰ˆæœ¬ï¼Œè¿˜å¯ä»¥ç»„åˆã€‚å°½é‡æ¨¡æ‹Ÿå®é™…è°ƒç”¨çš„åœºæ™¯æœ€ä¸å®¹æ˜“å‡ºé—®é¢˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1687010565,"ip_address":"å¹¿ä¸œ","comment_id":376550,"utype":1}],"discussion_count":3,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"è¯·é—®ï¼Œä¸ºä»€ä¹ˆ â€˜declval&lt;T&amp;&gt;().reserve(1U)â€™ä¸­ä¸ºä»€ä¹ˆè¦ä½¿ç”¨T&amp;è€Œä¸æ˜¯Tï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":625231,"discussion_content":"å½“ä½ å†™ä¸‹ has_reserve&lt;vector&lt;int&gt;&gt;ï¼Œç¼–è¯‘å™¨é¦–å…ˆæŒ‰ç…§ä¸»æ¨¡æ¿çš„é»˜è®¤æ¨¡æ¿å‚æ•°å½¢å¼ï¼Œè¡¥ä¸º has_reserve&lt;vector&lt;int&gt;, void_t&lt;&gt;&gt;ã€‚void_t&lt;&gt; åªæ˜¯ void çš„å¦å¤–ä¸€ç§å†™æ³•ï¼ˆå½“æ—¶è¿™ä¹ˆå†™æ˜¯ä¸ºäº†è·Ÿä¸‹é¢çš„ç‰¹åŒ–çœ‹èµ·æ¥æ›´å¯¹ç§°ï¼‰ã€‚\n\nå¦‚æœ vector æ²¡æœ‰ reserve æˆå‘˜å‡½æ•°ï¼Œé‚£ç¼–è¯‘å™¨ä¼šåœ¨å°è¯•å¦ä¸€ä¸ªåç‰¹åŒ–æ—¶æ›¿æ¢å¤±è´¥ï¼Œè¿™æ ·å°±åªæœ‰ä¸»æ¨¡æ¿å¯ä»¥ç”¨ï¼Œå¾—åˆ° false_type çš„å­ç±»ã€‚å¦‚æœ vector æœ‰ reserve æˆå‘˜å‡½æ•°ï¼Œé‚£ç¼–è¯‘å™¨å°è¯•åç‰¹åŒ–å°±ä¼šæˆåŠŸï¼Œå®Œç¾åŒ¹é…ï¼šæ›¿æ¢æˆåŠŸï¼Œä¸”éšå¼æä¾›çš„ç¬¬äºŒä¸ªæ¨¡æ¿å‚æ•°è·Ÿ void_t&lt;â€¦&gt; ä¹Ÿèƒ½åŒ¹é…ã€‚å› æ­¤ç¼–è¯‘å™¨ä½¿ç”¨äº†è¿™ç¬¬äºŒä¸ªæ›´ç‰¹åˆ«çš„ç‰¹åŒ–å½¢å¼ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1691473486,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1242483,"avatar":"https://static001.geekbang.org/account/avatar/00/12/f5/73/f7d3a996.jpg","nickname":"ï¼null","note":"","ucode":"4E5B7922980397","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":625253,"discussion_content":"è°¢è°¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1691489293,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":625231,"ip_address":"åŒ—äº¬","group_id":0},"score":625253,"extra":""}]}]},{"had_liked":false,"id":358603,"user_name":"Roblaboy","can_delete":false,"product_type":"c1","uid":2979544,"ip_address":"æ±Ÿè‹","ucode":"801AB12DBE521B","user_header":"","comment_is_top":false,"comment_ctime":1664461717,"is_pvip":false,"replies":[{"id":130660,"content":"è¯·ç»™å‡ºè¯¦ç»†çš„é”™è¯¯ä»£ç ã€ç¼–è¯‘å‘½ä»¤è¡Œå’Œé”™è¯¯ä¿¡æ¯ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1665379010,"ip_address":"æ±Ÿè‹","comment_id":358603,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"æˆ‘è¿™è¾¹æç¤º enable_if_t ä¸æ˜¯æ¨¡æ¿C&#47;C++(864) æ˜¯ä¸ºä»€ä¹ˆï¼Œæˆ‘è¿™è¾¹ç”¨çš„æ˜¯C++17","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":589874,"discussion_content":"è¯·ç»™å‡ºè¯¦ç»†çš„é”™è¯¯ä»£ç ã€ç¼–è¯‘å‘½ä»¤è¡Œå’Œé”™è¯¯ä¿¡æ¯ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1665379010,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ±Ÿè‹","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":358499,"user_name":"Geek_fa7226","can_delete":false,"product_type":"c1","uid":3184848,"ip_address":"æ±Ÿè‹","ucode":"B7780A449FAC27","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK418DKQ4eFh00D6vwqE7nJEX1Ou9DWDHKV2Zj21lq00qK6RzpY6SP3ic0I1hMnbvxQBQSCzzOomNg/132","comment_is_top":false,"comment_ctime":1664364470,"is_pvip":false,"replies":[{"id":130659,"content":"åç½®è¿”å›å€¼å£°æ˜ã€‚æ­¤å¤„ä¸»è¦æ˜¯åˆ©ç”¨åŸå‹çš„ SFINAEï¼ˆå‡½æ•°ä½“ä¸­çš„å†…å®¹ä¸å‚ä¸SFINAEï¼Œå¤±è´¥äº†ä¼šçœŸç¼–è¯‘å¤±è´¥ï¼Œè€Œä¸æ˜¯è·³è¿‡å½“å‰å‡½æ•°ï¼‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1665378971,"ip_address":"æ±Ÿè‹","comment_id":358499,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"auto append(C&amp; container, T* ptr, size_t size) -&gt; decltypeï¼ˆ...ï¼‰ä¸­çš„-&gt;æ˜¯ä»€ä¹ˆè¯­æ³•ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":589874,"discussion_content":"è¯·ç»™å‡ºè¯¦ç»†çš„é”™è¯¯ä»£ç ã€ç¼–è¯‘å‘½ä»¤è¡Œå’Œé”™è¯¯ä¿¡æ¯ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1665379010,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ±Ÿè‹","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":350062,"user_name":"Geek_fd78c0","can_delete":false,"product_type":"c1","uid":1126540,"ip_address":"","ucode":"8C95427F348352","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/JWoFanyWDk7lWL7g8rLYI0icH1XOVoCyjR9HoMzliauxggPSWWeYVleqKwiaUnBEChfIctoFzVoBqqVT3Lot18Srg/132","comment_is_top":false,"comment_ctime":1656551924,"is_pvip":false,"replies":[{"id":127428,"content":"å‚è§ https:&#47;&#47;zh.cppreference.com&#47;w&#47;cpp&#47;language&#47;function\n\nã€Œå°¾éšè¿”å›ç±»å‹\t-\t(C++11 èµ·) å°¾éšè¿”å›ç±»å‹ï¼Œå½“è¿”å›ç±»å‹å–å†³äºå®å‚åæ—¶ï¼Œä¾‹å¦‚ template &lt;class T, class U&gt; auto add(T t, U u) -&gt; decltype(t + u);ï¼Œæˆ–å½“è¿”å›ç±»å‹å¤æ‚æ—¶ï¼Œä¾‹å¦‚åœ¨ auto fpif(int)-&gt;int(*)(int) ä¸­ï¼Œå°¾éšè¿”å›ç±»å‹å¾ˆæœ‰ç”¨ã€","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1656814809,"ip_address":"","comment_id":350062,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"\n\nè¯·é—®è€å¸ˆè¿™ä¸ª-&gt;æ˜¯ä»€ä¹ˆæ„æ€ï¼Œä¸å¤ªæ‡‚è¿™ä¸ªè¯­æ³•ï¼Ÿ\ntemplate &lt;typename C, typename T&gt;\nauto append(C&amp; container, T* ptr,\n            size_t size)\n  -&gt; decltype(\n    declval&lt;C&amp;&gt;().reserve(1U),\n    void())\n","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":578480,"discussion_content":"å‚è§ https://zh.cppreference.com/w/cpp/language/function\n\nã€Œå°¾éšè¿”å›ç±»å‹\t-\t(C++11 èµ·) å°¾éšè¿”å›ç±»å‹ï¼Œå½“è¿”å›ç±»å‹å–å†³äºå®å‚åæ—¶ï¼Œä¾‹å¦‚ template &lt;class T, class U&gt; auto add(T t, U u) -&gt; decltype(t + u);ï¼Œæˆ–å½“è¿”å›ç±»å‹å¤æ‚æ—¶ï¼Œä¾‹å¦‚åœ¨ auto fpif(int)-&gt;int(*)(int) ä¸­ï¼Œå°¾éšè¿”å›ç±»å‹å¾ˆæœ‰ç”¨ã€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656814809,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":325598,"user_name":"Geek_7ce030","can_delete":false,"product_type":"c1","uid":2848838,"ip_address":"","ucode":"EFABCA83ECE8E6","user_header":"","comment_is_top":false,"comment_ctime":1639035722,"is_pvip":false,"replies":[{"id":118174,"content":"æ²¡äººä¸¥è‚ƒåœ°æå‡ºè¿™æ ·çš„ææ¡ˆã€‚ä½ çš„æƒ³æ³•ä¸­çš„å¤æ‚æ€§ææ€•ä½ ä¹Ÿæ²¡æœ‰è®¤çœŸè€ƒè™‘ã€‚ä»Šå¤©å°±æ›´æ²¡æœ‰æ„ä¹‰äº†â€”â€”å› ä¸ºæˆ‘ä»¬å¯ä»¥ç”¨C++çš„ä¼ ç»Ÿæ–¹å¼å†™ç¼–è¯‘æœŸè®¡ç®—çš„ä»£ç ã€‚ç»§ç»­å¾€ä¸‹çœ‹constexprã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1639132007,"ip_address":"","comment_id":325598,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"æ¨¡æ¿æœ¬èº«å›¾çµå®Œå¤‡ä½†æ˜¯è¯­æ³•æå…¶æ™¦æ¶©ä¸‘é™‹ï¼Œæ—¢ç„¶å¦‚æ­¤ï¼Œä¸ºä½•ä¸ç”¨Pythonè¯­æ³•ä»£æ›¿ç°æœ‰æ¨¡æ¿è¯­æ³•ï¼Œæœ¬è´¨ä¸Šæ˜¯æš´éœ²ç¼–è¯‘æœŸæ¥å£ï¼Œå½“å‰ç”¨æ¨¡æ¿æš´éœ²ï¼Œä¹Ÿå¯ä»¥ç”¨æ­£å¸¸çš„è¯­è¨€æš´éœ²ï¼Œè®©ç”¨æˆ·æ›´è½»æ¾åœ°æ§åˆ¶ç¼–è¯‘è¿‡ç¨‹ã€‚å¯èƒ½æ˜¯ç§¯é‡éš¾è¿”å§ã€‚","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":537661,"discussion_content":"æ²¡äººä¸¥è‚ƒåœ°æå‡ºè¿™æ ·çš„ææ¡ˆã€‚ä½ çš„æƒ³æ³•ä¸­çš„å¤æ‚æ€§ææ€•ä½ ä¹Ÿæ²¡æœ‰è®¤çœŸè€ƒè™‘ã€‚ä»Šå¤©å°±æ›´æ²¡æœ‰æ„ä¹‰äº†â€”â€”å› ä¸ºæˆ‘ä»¬å¯ä»¥ç”¨C++çš„ä¼ ç»Ÿæ–¹å¼å†™ç¼–è¯‘æœŸè®¡ç®—çš„ä»£ç ã€‚ç»§ç»­å¾€ä¸‹çœ‹constexprã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639132008,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1370959,"avatar":"https://static001.geekbang.org/account/avatar/00/14/eb/4f/6a97b1cd.jpg","nickname":"çŒªå°æ“","note":"","ucode":"D9552746AE3327","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":584888,"discussion_content":"å»ºè®®å¤šçœ‹çœ‹cppconï¼Œæ•´ä¸ªæœºå™¨æœºä½“ç³»éƒ½æ˜¯å»ºç«‹åœ¨cï¼Œcppä¹‹ä¸Šï¼Œè®¾è®¡é”™è¯¯éƒ½åªèƒ½ç»§ç»­ä¿ç•™é‚£ä¸ªé”™è¯¯ï¼Œæ— æ³•ä¿®æ”¹ï¼Œä½ çš„ä¿®æ”¹è®©ä¸€äº›è€é¡¹ç›®æ— æ³•ç¼–è¯‘ï¼Œé‚£æ˜¯ä¸èƒ½æ¥å—çš„ï¼Œè¿˜èƒ½æ”¹è¯­æ³•ï¼Ÿå½“æ˜¯javaæˆ–è€…goå‘¢ï¼Ÿcï¼Œcppçš„å†å²åŒ…è¢±éš¾ä»¥æƒ³è±¡ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661183472,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":317262,"user_name":"ano","can_delete":false,"product_type":"c1","uid":1783342,"ip_address":"","ucode":"7DE64BDFA78550","user_header":"https://static001.geekbang.org/account/avatar/00/1b/36/2e/376a3551.jpg","comment_is_top":false,"comment_ctime":1634725898,"is_pvip":false,"replies":[{"id":115162,"content":"å‡½æ•°ä¸­çš„æ™®é€šä»£ç æ€»ä¼šè¢«ç¼–è¯‘ï¼Œå“ªæ€•è¿™ä¸ªæ¡ä»¶æ‰§è¡Œä¸åˆ°ã€‚\n\nåŒæ—¶å‚è€ƒä¸‹ä¸€è®²çš„å†…å®¹ã€‚ğŸ˜","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1634909419,"ip_address":"","comment_id":317262,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"è€å¸ˆï¼Œæˆ‘æœ‰ä¸ªç–‘é—®ï¼Œå…³äºè¿™ä¸€å¥\né™æ€å¤šæ€çš„é™åˆ¶ï¼Ÿ\nâ€œåœ¨ C ç±»å‹æ²¡æœ‰ reserve æˆå‘˜å‡½æ•°çš„æƒ…å†µä¸‹ï¼Œç¼–è¯‘æ˜¯ä¸èƒ½é€šè¿‡çš„ï¼Œä¼šæŠ¥é”™ã€‚è¿™æ˜¯å› ä¸º C++ æ˜¯é™æ€ç±»å‹çš„è¯­è¨€ï¼Œæ‰€æœ‰çš„å‡½æ•°ã€åå­—å¿…é¡»åœ¨ç¼–è¯‘æ—¶è¢«æˆåŠŸè§£æã€ç¡®å®šâ€\nif (has_reserve&lt;C&gt;::value)\n\næˆ‘çš„ç†è§£æ˜¯ï¼Œåœ¨ç¼–è¯‘æ—¶ï¼Œif è¯­å¥ä¸­çš„ has_reserve è¿›è¡Œæ¨¡æ¿åŒ¹é…ï¼Œå†³è®®ï¼Œå‘ç°é‚£ä¸ªç‰¹åŒ–çš„ true_type has_reserve, äº§ç”Ÿ substitution failure, ç„¶åå°±ä¼šå›åˆ°é‚£ä¸ª false_type çš„ has_reserve, æœ€ç»ˆå®ä¾‹åŒ–æˆ false_type çš„ has_reserveï¼Œç„¶å value æ˜¯ false, æ‰€ä»¥è¿™ä¸ª if è¯­å¥ä¸­å§‹ç»ˆä¸º falseï¼Œä½†æ˜¯ä¸åº”è¯¥ä¼šç¼–è¯‘é”™è¯¯å‘€ã€‚\nä¸çŸ¥é“æˆ‘å“ªé‡Œç†è§£çš„ä¸å¯¹ï¼Ÿ\n","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":528740,"discussion_content":"å‡½æ•°ä¸­çš„æ™®é€šä»£ç æ€»ä¼šè¢«ç¼–è¯‘ï¼Œå“ªæ€•è¿™ä¸ªæ¡ä»¶æ‰§è¡Œä¸åˆ°ã€‚\n\nåŒæ—¶å‚è€ƒä¸‹ä¸€è®²çš„å†…å®¹ã€‚ğŸ˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634909419,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":296425,"user_name":"chang","can_delete":false,"product_type":"c1","uid":2596026,"ip_address":"","ucode":"594EF8CB4477BD","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/2ibrq71Y5Ww3KDRibDxF1gt9YDEPuZkv4ITHEP1u4vvjpPDukkLoK4ngQy1hKKzccnsicLkUAda7sPpibR6Kyb0cfQ/132","comment_is_top":false,"comment_ctime":1622968778,"is_pvip":false,"replies":[{"id":107755,"content":"åˆæµ‹äº†ä¸€éï¼Œç”¨ä¸‹é¢çš„è¯­å¥å¯ä»¥è¾“å‡º 1ï¼Œåº”è¯¥æ²¡é—®é¢˜ï¼š\n\ncout &lt;&lt; has_reserve&lt;vector&lt;int&gt;&gt;::value;","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1623114898,"ip_address":"","comment_id":296425,"utype":1}],"discussion_count":4,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"\ntemplate &lt;typename T&gt;\nstruct has_reserve {\n  struct good { char dummy; };\n  struct bad { char dummy[2]; };\n  template &lt;class U,\n            void (U::*)(size_t)&gt;\n  struct SFINAE {};\n  template &lt;class U&gt;\n  static good\n  reserve(SFINAE&lt;U, &amp;U::reserve&gt;*);\n  template &lt;class U&gt;\n  static bad reserve(...);\n  static const bool value =\n    sizeof(reserve&lt;T&gt;(nullptr))\n    == sizeof(good);\n};\n\nè¿™ä¸ªè²Œä¼¼å¯¹æ ‡å‡†åº“çš„vectoræ— æ•ˆï¼Ÿå› ä¸ºå‚æ•°ç±»å‹ä¸åŒ¹é…ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":521437,"discussion_content":"åˆæµ‹äº†ä¸€éï¼Œç”¨ä¸‹é¢çš„è¯­å¥å¯ä»¥è¾“å‡º 1ï¼Œåº”è¯¥æ²¡é—®é¢˜ï¼š\n\ncout &amp;lt;&amp;lt; has_reserve&amp;lt;vector&amp;lt;int&amp;gt;&amp;gt;::value;","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623114898,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2596026,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/2ibrq71Y5Ww3KDRibDxF1gt9YDEPuZkv4ITHEP1u4vvjpPDukkLoK4ngQy1hKKzccnsicLkUAda7sPpibR6Kyb0cfQ/132","nickname":"chang","note":"","ucode":"594EF8CB4477BD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":378295,"discussion_content":"å¦å¤–è¿˜æœ‰ä¸ªç–‘é—®ï¼šä¸ºä»€ä¹ˆ static good\n  reserve(SFINAE<U, &amp;U::reserve>*);  ä¸å®šä¹‰å‡½æ•°ä½“ä¹Ÿè¡Œï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623152783,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":2596026,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/2ibrq71Y5Ww3KDRibDxF1gt9YDEPuZkv4ITHEP1u4vvjpPDukkLoK4ngQy1hKKzccnsicLkUAda7sPpibR6Kyb0cfQ/132","nickname":"chang","note":"","ucode":"594EF8CB4477BD","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":378338,"discussion_content":"å› ä¸ºæ²¡äººè°ƒç”¨å®ƒä»¬ã€‚æˆ‘åªåˆ©ç”¨äº†å®ƒä»¬çš„åŸå‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623165465,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":378295,"ip_address":"","group_id":0},"score":378338,"extra":""}]},{"author":{"id":2596026,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/2ibrq71Y5Ww3KDRibDxF1gt9YDEPuZkv4ITHEP1u4vvjpPDukkLoK4ngQy1hKKzccnsicLkUAda7sPpibR6Kyb0cfQ/132","nickname":"chang","note":"","ucode":"594EF8CB4477BD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":378294,"discussion_content":"æƒ­æ„§ï¼Œè‡ªå·±æŠŠstatic good\n  reserve(SFINAE<U, &amp;U::reserve>*); ä¸­çš„&amp;Uè¯¯å†™æˆ*Uäº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623152664,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":289900,"user_name":"ä¹æ„è‡³æ","can_delete":false,"product_type":"c1","uid":2340308,"ip_address":"","ucode":"7AC6778D854482","user_header":"https://static001.geekbang.org/account/avatar/00/23/b5/d4/147abdaa.jpg","comment_is_top":false,"comment_ctime":1619256713,"is_pvip":false,"replies":[{"id":105164,"content":"å“¦ï¼ŒåŸå› å®é™…å¾ˆç®€å•ï¼Œå¤–é¢ï¼ˆåŒ…æ‹¬ has_reserveï¼‰è®¿é—®ä¸åˆ° GoodClass::reserveâ€”â€”ä½ æ²¡æœ‰æ ‡ publicã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1619342741,"ip_address":"","comment_id":289900,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"class GoodClass {\n    void reserve(size_t x);\n};\n\nclass BadClass {\n};\n\n    std::cout &lt;&lt; has_reserve&lt;BadClass&gt;::value &lt;&lt; std::endl;\n    std::cout &lt;&lt; has_reserve&lt;GoodClass&gt;::value &lt;&lt; std::endl;\n\n\ntemplate &lt;typename T&gt;\nstruct has_reserve {\n  struct good { char dummy; };\n  struct bad { char dummy[2]; };\n  template &lt;class U,\n            void (U::*)(size_t)&gt;\n  struct SFINAE {};\n  template &lt;class U&gt;\n  static good\n  reserve(SFINAE&lt;U, &amp;U::reserve&gt;*);\n  template &lt;class U&gt;\n  static bad reserve(...);\n  static const bool value =\n    sizeof(reserve&lt;T&gt;(nullptr))\n    == sizeof(good);\n};\n\nè€å¸ˆï¼Œè¯·é—®has_reserveè¯¥æ€ä¹ˆç”¨å‘¢ï¼Ÿä¸¤è€…è¾“å‡ºéƒ½æ˜¯0å•Š","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":519049,"discussion_content":"å“¦ï¼ŒåŸå› å®é™…å¾ˆç®€å•ï¼Œå¤–é¢ï¼ˆåŒ…æ‹¬ has_reserveï¼‰è®¿é—®ä¸åˆ° GoodClass::reserveâ€”â€”ä½ æ²¡æœ‰æ ‡ publicã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619342741,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2340308,"avatar":"https://static001.geekbang.org/account/avatar/00/23/b5/d4/147abdaa.jpg","nickname":"ä¹æ„è‡³æ","note":"","ucode":"7AC6778D854482","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":370243,"discussion_content":"ã€‚ã€‚ã€‚å­¦ä¹ äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619343474,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":230484,"user_name":"AlphaCat","can_delete":false,"product_type":"c1","uid":1059159,"ip_address":"","ucode":"69538BE935B32C","user_header":"https://static001.geekbang.org/account/avatar/00/10/29/57/aaa8612e.jpg","comment_is_top":false,"comment_ctime":1593398755,"is_pvip":false,"replies":[{"id":85132,"content":"å—¯ï¼Œè°¢è°¢ã€‚å·²ç»è”ç³»ç¼–è¾‘ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1593437875,"ip_address":"","comment_id":230484,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"è€å¸ˆï¼Œæ›¿æ¢å¤±è´¥éé”™ï¼ˆsubstituion failure is not an errorï¼‰ï¼Œ &quot;substituion&quot; æ‰äº†ä¸€ä¸ª tï¼Œåº”è¯¥æ˜¯ Substitution ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":499909,"discussion_content":"å—¯ï¼Œè°¢è°¢ã€‚å·²ç»è”ç³»ç¼–è¾‘ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593437875,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":217900,"user_name":"è¥¿åŠ åŠ ","can_delete":false,"product_type":"c1","uid":1144416,"ip_address":"","ucode":"727238758A7F3D","user_header":"https://static001.geekbang.org/account/avatar/00/11/76/60/8ea658a9.jpg","comment_is_top":false,"comment_ctime":1589641192,"is_pvip":false,"replies":[{"id":80760,"content":"çœ‹èµ·æ¥ä½ å¯¹æ¨¡æ¿æ¨å¯¼æœ‰ç‚¹è¯¯è§£ï¼Œç¬¬äºŒä¸ªå¼å­å®Œå…¨æ²¡æœ‰ç”¨å¤„ã€‚ä½ æ²¡æœ‰åœ¨ä»»ä½•åœ°æ–¹æä¾›ç¬¬äºŒä¸ªå‚æ•°ã€‚\n\nå¦‚æœ get ä¼šå¯¼è‡´æ¨¡æ¿æ¨å¯¼å¤±è´¥çš„è¯ï¼Œé‚£è¿™ä¸ªä¾‹å­é‡Œå°±å¯ä»¥ä½¿ç”¨ç±»ä¼¼äºè¯¾ä¸­ void_t çš„æ–¹æ³•äº†ã€‚ä¸è¿‡ï¼Œå¯¹ä¸å­˜åœ¨çš„æˆå‘˜è¿›è¡Œ get è™½ç„¶ä¼šäº§ç”Ÿç¼–è¯‘å¤±è´¥ï¼Œè¿™ä¸ªå¤±è´¥ä¸æ˜¯æ¨å¯¼å¤±è´¥ï¼Œè€Œæ˜¯é™æ€æ–­è¨€ã€‚å› è€Œ void_t ä¹Ÿè§£å†³ä¸äº†é—®é¢˜ã€‚\n\nè‡³äºä½ è¯´çš„é€—å·è¡¨è¾¾å¼ï¼Œæˆ‘çœ‹ä¸å‡ºè§£å†³äº†ä»€ä¹ˆé—®é¢˜ã€‚æˆ‘è¯•éªŒä¸‹æ¥ä¹Ÿæ²¡çœ‹åˆ°é 1 çš„ç»“æœã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1589806442,"ip_address":"","comment_id":217900,"utype":1}],"discussion_count":2,"race_medal":0,"score":4,"product_id":100040501,"comment_content":"åˆ©ç”¨ variant çš„ std::get æ–¹æ³•ï¼Œå†™ä¸€ä¸ª sfine ç”¨äºåˆ¤æ–­ä¸€ä¸ª variant ç±»å‹é‡Œæ˜¯å¦è”åˆäº† float. ä»£ç å’Œé—®é¢˜å¦‚ä¸‹ï¼š\ntemplate &lt;typename T, typename ...&gt;\nstruct CheckVariant {\n    static constexpr int value =  1;\n};\ntemplate &lt;typename T&gt;\nstruct CheckVariant&lt;T,\n    decltype(get&lt;float&gt;( declval&lt;T&gt;() ))\n    &gt;\n{\n    static constexpr int value = 2;\n};\n...\n    if constexpr (CheckVariant&lt;decltype(v)&gt;::value == 1) {\n        cout &lt;&lt; get&lt;float&gt;(v) &lt;&lt; endl;\n    }\n...\n\nå¯æ˜¯å‘ç°è¿™æ ·çš„ SFINAE ä¸èµ·ä½œç”¨ï¼ŒæŠŠæ¨¡æ¿ç‰¹åŒ–ä»£ç æ”¹ä¸ºåˆ©ç”¨ é€—å·è¡¨è¾¾å¼ï¼Œè®© decltype å–å€¼å°±å¯ä»¥äº†ï¼š\n\ntemplate &lt;typename T&gt;\nstruct CheckVariant&lt;T,\n    decltype((get&lt;float&gt;( declval&lt;T&gt;() ), void()))\n    &gt;\n{\n    static constexpr int value = 2;\n};\n\nè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ  \n","like_count":0},{"had_liked":false,"id":178964,"user_name":"ç¦¾æ¡ƒ","can_delete":false,"product_type":"c1","uid":1477855,"ip_address":"","ucode":"9FE85C34A9E9E0","user_header":"https://static001.geekbang.org/account/avatar/00/16/8c/df/77acb793.jpg","comment_is_top":false,"comment_ctime":1581864279,"is_pvip":false,"replies":[{"id":69503,"content":"æˆ‘è§‰å¾—åº”è¯¥è¿™ä¹ˆç†è§£ï¼š\n\nä½ ç»™å‡ºçš„è¡¨è¾¾å¼æ˜¯\n\ntypename std::enable_if&lt;std::is_same&lt;T, int&gt;::value&gt;::type\n\nä¼°å€¼åå¾—åˆ°\n\ntypename std::enable_if&lt;true&gt;::type\n\nå®ä¾‹åŒ–æ—¶ï¼Œç¼–è¯‘å™¨çœ‹åˆ°æ²¡æœ‰æä¾›ç¬¬äºŒä¸ªå‚æ•°ï¼ŒåŠ ä¸Šç¼ºçœå‚æ•°æŒ‰ std::enable_if&lt;true, void&gt; å®ä¾‹åŒ–ï¼Œå†åç‰¹åŒ–å¾—åˆ°\n\ntemplate&lt;&gt;\nstruct enable_if&lt;true, void&gt;\n{\n  typedef void type;\n};\n","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1581918448,"ip_address":"","comment_id":178964,"utype":1}],"discussion_count":2,"race_medal":0,"score":4,"product_id":100040501,"comment_content":"https:&#47;&#47;en.cppreference.com&#47;w&#47;cpp&#47;types&#47;enable_if\n&quot;\nPossible implementation\ntemplate&lt;bool B, class T = void&gt;\nstruct enable_if {};\n \ntemplate&lt;class T&gt;\nstruct enable_if&lt;true, T&gt; { typedef T type; };\n&quot;\n\nä¸‹åˆ—çš„æµ‹è¯•ä»£ç å¯ä»¥ç¼–è¯‘ï¼Œè¿è¡Œ\n&quot;\n#include &lt;type_traits&gt;\n#include &lt;iostream&gt;\n\ntemplate &lt;typename X, typename T, typename Y&gt;\ntypename std::enable_if&lt;std::is_same&lt;T, int&gt;::value&gt;::type update(X x, T t, Y y)\n{\n    std::cout &lt;&lt; &quot;int&quot; &lt;&lt; std::endl;\n}\n\nint main () {\n    float a = 1.4;\n    int b = 1;\n    double c =2.2;\n    update(a, b, c);\n}\n&quot;\n\nå…¶ä¸­æˆ‘ç”¨çš„æ˜¯std::enable_if&lt;std::is_same&lt;T, int&gt;::value&gt;ï¼Œ å¹¶æ²¡æœ‰æä¾›å‚æ•°æ¥æ¨å¯¼Tï¼Œ\nè¿™æ˜¯ä¸æ˜¯æ„å‘³ç€å¯¹äºtrueè¿™ç§æƒ…å†µçš„åç‰¹åŒ–implementationæ˜¯\ntemplate&lt;class T = void&gt;\nstruct enable_if&lt;true, T&gt; { typedef T type; };\n\nè€Œä¸æ˜¯\n\ntemplate&lt;class T&gt;\nstruct enable_if&lt;true, T&gt; { typedef T type; };\n\nè°¢è°¢ï¼","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484040,"discussion_content":"æˆ‘è§‰å¾—åº”è¯¥è¿™ä¹ˆç†è§£ï¼š\n\nä½ ç»™å‡ºçš„è¡¨è¾¾å¼æ˜¯\n\ntypename std::enable_if&amp;lt;std::is_same&amp;lt;T, int&amp;gt;::value&amp;gt;::type\n\nä¼°å€¼åå¾—åˆ°\n\ntypename std::enable_if&amp;lt;true&amp;gt;::type\n\nå®ä¾‹åŒ–æ—¶ï¼Œç¼–è¯‘å™¨çœ‹åˆ°æ²¡æœ‰æä¾›ç¬¬äºŒä¸ªå‚æ•°ï¼ŒåŠ ä¸Šç¼ºçœå‚æ•°æŒ‰ std::enable_if&amp;lt;true, void&amp;gt; å®ä¾‹åŒ–ï¼Œå†åç‰¹åŒ–å¾—åˆ°\n\ntemplate&amp;lt;&amp;gt;\nstruct enable_if&amp;lt;true, void&amp;gt;\n{\n  typedef void type;\n};\n","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1581918448,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1477855,"avatar":"https://static001.geekbang.org/account/avatar/00/16/8c/df/77acb793.jpg","nickname":"ç¦¾æ¡ƒ","note":"","ucode":"9FE85C34A9E9E0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":175245,"discussion_content":"æœ‰æ„æ€ã€‚\næˆ‘åŸä»¥ä¸ºå®ä¾‹åŒ–çš„è¿‡ç¨‹ï¼Œåªä¼šé€‰æ‹©ä¸€ä¸ªæ¨¡ç‰ˆè¿›è¡Œã€‚\nè¿™ä¸ªå®ä¾‹åŒ–çš„è¿‡ç¨‹ï¼Œ\n\nå…ˆæ˜¯ç”¨äº†ç¬¬ä¸€ä¸ªæ¨¡ç‰ˆï¼Œ\ntemplate<bool B, class T = void>\nstruct enable_if {};\n \n\nç„¶åå†ç”¨äº†ç¬¬äºŒä¸ªåç‰¹åŒ–çš„æ¨¡ç‰ˆã€‚\ntemplate<class T>\nstruct enable_if<true, T> { typedef T type; };\n\nå¤šè°¢ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581952468,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":178429,"user_name":"è´¾é™†å","can_delete":false,"product_type":"c1","uid":1321408,"ip_address":"","ucode":"2722C422077EE0","user_header":"https://static001.geekbang.org/account/avatar/00/14/29/c0/86fa3e92.jpg","comment_is_top":false,"comment_ctime":1581688048,"is_pvip":false,"replies":[{"id":69240,"content":"æ¨¡æ¿ç»å¯¹æ˜¯ C++ çš„ä¸€å¤§ç‰¹ç‚¹ã€‚è™½è¯´æœ‰äº›æŠ€å·§ä¼šè¿‡æ—¶ï¼ˆSFINAE åˆ° C++20 ä¹Ÿä¼šå˜å¾—æœ‰ç‚¹è¿‡æ—¶ï¼›çœ‹å®Œå…¨éƒ¨ä½ å°±çŸ¥é“äº†ï¼‰ï¼Œä½†æ¨¡æ¿å’Œé™æ€é¸­å­ç±»å‹è¿™æ ·çš„ç”¨æ³•åœ¨ç›®å‰çš„å…¶ä»–ä¸»æµè¯­è¨€é‡Œæ˜¯æ²¡æœ‰çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1581733086,"ip_address":"","comment_id":178429,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100040501,"comment_content":"å´è€å¸ˆï¼Œå†™çš„æ»¡æ»¡å¹²è´§ï¼Œä¹‹å‰æ¨¡æ¿å¹¶æ²¡æœ‰æ·±å…¥å­¦ä¹ ï¼Œæ‰çŸ¥é“æ¨¡æ¿å¯ä»¥è¿™ä¹ˆèŠ±ï¼Œç”¨é€”å¯ä»¥è¿™ä¹ˆå¤š","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":483817,"discussion_content":"æ¨¡æ¿ç»å¯¹æ˜¯ C++ çš„ä¸€å¤§ç‰¹ç‚¹ã€‚è™½è¯´æœ‰äº›æŠ€å·§ä¼šè¿‡æ—¶ï¼ˆSFINAE åˆ° C++20 ä¹Ÿä¼šå˜å¾—æœ‰ç‚¹è¿‡æ—¶ï¼›çœ‹å®Œå…¨éƒ¨ä½ å°±çŸ¥é“äº†ï¼‰ï¼Œä½†æ¨¡æ¿å’Œé™æ€é¸­å­ç±»å‹è¿™æ ·çš„ç”¨æ³•åœ¨ç›®å‰çš„å…¶ä»–ä¸»æµè¯­è¨€é‡Œæ˜¯æ²¡æœ‰çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581733086,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":169492,"user_name":"å…‰åŸ~å…´","can_delete":false,"product_type":"c1","uid":1188173,"ip_address":"","ucode":"55A0D25BFCDD47","user_header":"https://static001.geekbang.org/account/avatar/00/12/21/4d/90ea92f8.jpg","comment_is_top":false,"comment_ctime":1578365325,"is_pvip":false,"replies":[{"id":65782,"content":"ä½ çš„é—®é¢˜ä¸é‚£ä¹ˆæ¸…æ¥šå•Šã€‚\n\nU::* ä¸æ˜¯å®Œæ•´ç±»å‹ï¼Œvoid (U::*)() æ‰æ˜¯ä¸€ä¸ªç±»å‹ã€‚U::foo æ˜¯ä¸€ä¸ªå…·ä½“çš„å‡½æ•°ï¼Œ&amp;U::foo æ˜¯å‡½æ•°æŒ‡é’ˆã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1578391640,"ip_address":"","comment_id":169492,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100040501,"comment_content":"å‡è®¾Uæ˜¯ä¸€ä¸ªClass,å†…éƒ¨æœ‰fooæ–¹æ³•ä¸baræ–¹æ³•ï¼Œé‚£ä¹ˆU::*è¡¨ç¤ºçš„æ˜¯æ‰€æœ‰æˆå‘˜å‡½æ•°çš„æŒ‡é’ˆå§ï¼Œè€ŒU::foo*æ˜¯fooæˆå‘˜å‡½æ•°æŒ‡é’ˆï¼Œè¿˜è¯·è€å¸ˆæŒ‡ç‚¹ã€‚","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480581,"discussion_content":"ä½ çš„é—®é¢˜ä¸é‚£ä¹ˆæ¸…æ¥šå•Šã€‚\n\nU::* ä¸æ˜¯å®Œæ•´ç±»å‹ï¼Œvoid (U::*)() æ‰æ˜¯ä¸€ä¸ªç±»å‹ã€‚U::foo æ˜¯ä¸€ä¸ªå…·ä½“çš„å‡½æ•°ï¼Œ&amp;amp;U::foo æ˜¯å‡½æ•°æŒ‡é’ˆã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1578391640,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":167717,"user_name":"æœ¨ç“œ777","can_delete":false,"product_type":"c1","uid":1512537,"ip_address":"","ucode":"FC52A499AF6374","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/aFAYPyw7ywC1xE9h1qibnTBwtWn2ClJqlicy5cMomhZVaruMyqSq76wMkS279mUaGhrLGwWo9ZnW0WCWfmMovlXw/132","comment_is_top":false,"comment_ctime":1577922493,"is_pvip":false,"replies":[{"id":65176,"content":"å†™è¿™ä¸€è®²æ—¶ï¼Œæˆ‘è‡ªå·±ä¹Ÿè§‰å¾—å¾ˆèˆ’å¿ƒâ€”â€”æ­£å¥½æŠŠç›¸å…³çš„æŠ€å·§æ•´ç†ä¸€éã€‚è¿™éƒ¨åˆ†è¿˜æ˜¯æŒºå¤æ‚çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1577962638,"ip_address":"","comment_id":167717,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100040501,"comment_content":"æ²¡çœ‹è¿™å‡ ç¯‡æ–‡ç« å‰ï¼Œä»¥ä¸ºç†è§£æ¨¡æ¿äº†ï¼Œç°åœ¨æ‰çŸ¥é“æ¨¡æ¿åšå¤§ç²¾æ·±ğŸ‘","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480581,"discussion_content":"ä½ çš„é—®é¢˜ä¸é‚£ä¹ˆæ¸…æ¥šå•Šã€‚\n\nU::* ä¸æ˜¯å®Œæ•´ç±»å‹ï¼Œvoid (U::*)() æ‰æ˜¯ä¸€ä¸ªç±»å‹ã€‚U::foo æ˜¯ä¸€ä¸ªå…·ä½“çš„å‡½æ•°ï¼Œ&amp;amp;U::foo æ˜¯å‡½æ•°æŒ‡é’ˆã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1578391640,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":166868,"user_name":"æ€»ç»Ÿè€å”","can_delete":false,"product_type":"c1","uid":1490070,"ip_address":"","ucode":"F2CC66E5BB4871","user_header":"https://static001.geekbang.org/account/avatar/00/16/bc/96/c679bb3d.jpg","comment_is_top":false,"comment_ctime":1577618983,"is_pvip":false,"replies":[{"id":64869,"content":"1. ä¸€ä¸ªå‡½æ•°æ²¡æœ‰çœŸæ­£è¢«è°ƒç”¨ï¼Œä»£ç é‡Œå°±ä¸ä¼šäº§ç”Ÿå¯¹å®ƒçš„å¼•ç”¨ï¼Œé“¾æ¥æ²¡æœ‰ä¹Ÿå°±ä¸ä¼šå‡ºé—®é¢˜ã€‚\n\n2. ä¸æ˜¯ç‰¹åŒ–ï¼Œè€Œæ˜¯è‡ªåŠ¨æ¨æ–­åè¿›è¡Œè‡ªåŠ¨å®ä¾‹åŒ–ã€‚ç‰¹åŒ–æ˜¯éœ€è¦æœ‰èƒ½çœ‹å¾—åˆ°çš„ç‰¹åŒ–å®šä¹‰çš„ã€‚\n\n3. ä¸»è¦æ˜¯å’Œä¸‹é¢çš„å®šä¹‰å¯¹ç§°ã€‚å› ä¸ºè¿™å„¿çš„ç±»å‹ä¸å®é™…ä½¿ç”¨ï¼Œå†™ä»»ä½•çš„åˆæ³•ç±»å‹éƒ½æ˜¯å¯ä»¥çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1577674533,"ip_address":"","comment_id":166868,"utype":1}],"discussion_count":2,"race_medal":0,"score":4,"product_id":100040501,"comment_content":"å´è€å¸ˆï¼Œå…³äºè¿™ä¸€è¯¾ï¼Œæœ‰ 3 ä¸ªé—®é¢˜\n1ï¼Œåœ¨æœ€å¼€å§‹å®šä¹‰ has_reserve ç±»æ—¶ï¼Œä¸¤ä¸ª reserve æ¨¡æ¿å‡½æ•°å®é™…ä¸Šåªæ˜¯å£°æ˜äº†ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰çœŸæ­£çš„å‡½æ•°ä½“ï¼Œè€Œæœ€åçš„ value æˆå‘˜å®é™…ä¸Šæ˜¯ç”¨ nullptr è°ƒç”¨äº† reserve å‡½æ•°ï¼Œè¿™å°±ç›¸å½“äºè°ƒç”¨ä¸€ä¸ªæ²¡æœ‰åªæœ‰å£°æ˜æ²¡æœ‰å®šä¹‰çš„å‡½æ•°ï¼Œä¸ºä»€ä¹ˆæ²¡æœ‰æŠ¥é”™ï¼Ÿ\n2ï¼Œå…³äºæ¨¡æ¿å‡½æ•°çš„è°ƒç”¨\nå‡è®¾æœ‰å¦‚ä¸‹æ¨¡æ¿\ntemplate &lt;typename T1, typename T2&gt;\nint add(T1 a, T2 b);\næ—¢å¯ä»¥add&lt;int, double&gt;(1, 2.5)è°ƒç”¨ï¼Œä¹Ÿå¯ä»¥add(1, 2.5)è°ƒç”¨ï¼Œä¸¤è€…çš„å·®åˆ«æ˜¯ä¸æ˜¯ç¬¬ä¸€ç§æ–¹å¼ç›¸å½“äºå…ˆå£°æ˜äº†ä¸€ä¸ªç‰¹åŒ–ç‰ˆæœ¬ï¼Œåœ¨ç”¨è¿™ä¸ªç‰¹åŒ–ç‰ˆæœ¬æ¥è°ƒç”¨ï¼Œåä¸€ç§æ–¹å¼æ˜¯ç¼–è¯‘å™¨è‡ªè¡Œæ¨æ–­ï¼Ÿä½†è‹¥æ˜¯æ²¡æœ‰å®šä¹‰å¯¹åº”çš„ç‰¹åŒ–ç‰ˆæœ¬ï¼Œç¬¬ä¸€ç§æ–¹å¼å’Œç¬¬äºŒç§æ–¹å¼æ˜¯ä¸æ˜¯å®Œå…¨æ²¡æœ‰åŒºåˆ«ï¼Ÿ\n3ï¼Œåœ¨ void_t çš„éƒ¨åˆ†ï¼Œæ¨¡æ¿å®šä¹‰æ—¶ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯è¿™æ ·å†™çš„ï¼štypename = void_t&lt;&gt;ï¼Œ æˆ‘è¯•äº†ä¸€ä¸‹ï¼Œç›´æ¥å†™æˆ typename = voidï¼Œä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œä½ é‡‡ç”¨è¿™ç§å†™æ³•æ˜¯æœ‰ä»€ä¹ˆç‰¹æ®Šè€ƒè™‘å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479659,"discussion_content":"1. ä¸€ä¸ªå‡½æ•°æ²¡æœ‰çœŸæ­£è¢«è°ƒç”¨ï¼Œä»£ç é‡Œå°±ä¸ä¼šäº§ç”Ÿå¯¹å®ƒçš„å¼•ç”¨ï¼Œé“¾æ¥æ²¡æœ‰ä¹Ÿå°±ä¸ä¼šå‡ºé—®é¢˜ã€‚\n\n2. ä¸æ˜¯ç‰¹åŒ–ï¼Œè€Œæ˜¯è‡ªåŠ¨æ¨æ–­åè¿›è¡Œè‡ªåŠ¨å®ä¾‹åŒ–ã€‚ç‰¹åŒ–æ˜¯éœ€è¦æœ‰èƒ½çœ‹å¾—åˆ°çš„ç‰¹åŒ–å®šä¹‰çš„ã€‚\n\n3. ä¸»è¦æ˜¯å’Œä¸‹é¢çš„å®šä¹‰å¯¹ç§°ã€‚å› ä¸ºè¿™å„¿çš„ç±»å‹ä¸å®é™…ä½¿ç”¨ï¼Œå†™ä»»ä½•çš„åˆæ³•ç±»å‹éƒ½æ˜¯å¯ä»¥çš„ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1577674533,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1096781,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJe0esddRVdG689MicU5zMibMtkyLpYkX4MtiamKP8eFf7KUoMlfU7ficrciakyVS06jHVdskYT67JKtdg/132","nickname":"æ¹–æµ·æ•£äºº","note":"","ucode":"74C0C825D74CC1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":217466,"discussion_content":"å¯¹äºé—®é¢˜1ï¼Œæˆ‘ä¹Ÿæœ‰ç–‘æƒ‘ï¼ŒæŒ‰ç…§è€å¸ˆçš„ç­”å¤ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™ä¸ªæ²¡æœ‰äº§ç”ŸçœŸæ­£çš„è°ƒç”¨ï¼Ÿ è¿™æ˜¯ä¸ºå•¥å‘€ï¼Œä¸æ˜¯å¯¹å‡½æ•°è°ƒç”¨åçš„è¿”å›å€¼å–äº†sizeof ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585562583,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":166273,"user_name":"ç¦¾æ¡ƒ","can_delete":false,"product_type":"c1","uid":1477855,"ip_address":"","ucode":"9FE85C34A9E9E0","user_header":"https://static001.geekbang.org/account/avatar/00/16/8c/df/77acb793.jpg","comment_is_top":false,"comment_ctime":1577430232,"is_pvip":false,"replies":[{"id":63432,"content":"ä¸æ˜¯è¯´äº†å—ï¼ŒæŠŠä»»æ„ç±»å‹æ˜ å°„åˆ°voidã€‚ä»»æ„ç±»å‹å“¦â€¦â€¦åªè¦è¡¨è¾¾å¼åˆæ³•å°±è¡Œã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1577454475,"ip_address":"","comment_id":166273,"utype":1}],"discussion_count":3,"race_medal":0,"score":4,"product_id":100040501,"comment_content":"â€œ\ntemplate &lt;typename T, typename = void_t&lt;&gt;&gt;\nstruct has_reserve : false_type {};\n\ntemplate &lt;typename T&gt;\nstruct has_reserve&lt;T, void_t&lt;decltype(declval&lt;T&amp;&gt;().reserve(1U))&gt;&gt; : true_type {};\n\ndeclval().reserve(1U) ç”¨æ¥æµ‹è¯• C&amp; ç±»å‹çš„å¯¹è±¡æ˜¯ä¸æ˜¯å¯ä»¥æ‹¿ 1U ä½œä¸ºå‚æ•°æ¥è°ƒç”¨ reserve æˆå‘˜å‡½æ•°\nâ€œ\nè¯·é—®\n- å¦‚æœæ˜¯, decltype(declval&lt;T&amp;&gt;().reserve(1U))&gt; è¿”å›çš„æ˜¯voidï¼Œè¿™ä¸ªå¥½ç†è§£ï¼Œå› ä¸ºvoid_tä¼šæŠŠä»»ä½•æ•°ç›®ï¼ˆåŒ…æ‹¬é›¶ä¸ªï¼‰çš„ç±»å‹è½¬æ¢ä¸ºç±»å‹void\n- å¦‚æœä¸æ˜¯, ç¼–è¯‘å™¨çœ‹åˆ°decltype(declval&lt;T&amp;&gt;().reserve(1U))&gt; ä¼šåšä»€ä¹ˆï¼Ÿ\n                  ç„¶åç¼–è¯‘å™¨çœ‹åˆ°void_t&lt;decltype(declval&lt;T&amp;&gt;().reserve(1U))&gt; åˆä¼šåšä»€ä¹ˆï¼Ÿ\n","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479659,"discussion_content":"1. ä¸€ä¸ªå‡½æ•°æ²¡æœ‰çœŸæ­£è¢«è°ƒç”¨ï¼Œä»£ç é‡Œå°±ä¸ä¼šäº§ç”Ÿå¯¹å®ƒçš„å¼•ç”¨ï¼Œé“¾æ¥æ²¡æœ‰ä¹Ÿå°±ä¸ä¼šå‡ºé—®é¢˜ã€‚\n\n2. ä¸æ˜¯ç‰¹åŒ–ï¼Œè€Œæ˜¯è‡ªåŠ¨æ¨æ–­åè¿›è¡Œè‡ªåŠ¨å®ä¾‹åŒ–ã€‚ç‰¹åŒ–æ˜¯éœ€è¦æœ‰èƒ½çœ‹å¾—åˆ°çš„ç‰¹åŒ–å®šä¹‰çš„ã€‚\n\n3. ä¸»è¦æ˜¯å’Œä¸‹é¢çš„å®šä¹‰å¯¹ç§°ã€‚å› ä¸ºè¿™å„¿çš„ç±»å‹ä¸å®é™…ä½¿ç”¨ï¼Œå†™ä»»ä½•çš„åˆæ³•ç±»å‹éƒ½æ˜¯å¯ä»¥çš„ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1577674533,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1096781,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJe0esddRVdG689MicU5zMibMtkyLpYkX4MtiamKP8eFf7KUoMlfU7ficrciakyVS06jHVdskYT67JKtdg/132","nickname":"æ¹–æµ·æ•£äºº","note":"","ucode":"74C0C825D74CC1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":217466,"discussion_content":"å¯¹äºé—®é¢˜1ï¼Œæˆ‘ä¹Ÿæœ‰ç–‘æƒ‘ï¼ŒæŒ‰ç…§è€å¸ˆçš„ç­”å¤ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™ä¸ªæ²¡æœ‰äº§ç”ŸçœŸæ­£çš„è°ƒç”¨ï¼Ÿ è¿™æ˜¯ä¸ºå•¥å‘€ï¼Œä¸æ˜¯å¯¹å‡½æ•°è°ƒç”¨åçš„è¿”å›å€¼å–äº†sizeof ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585562583,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":370415,"user_name":"ğŸ¶çš„å·´æ™®æ´›å¤«","can_delete":false,"product_type":"c1","uid":3542569,"ip_address":"åŒ—äº¬","ucode":"1213DD5A056674","user_header":"https://static001.geekbang.org/account/avatar/00/36/0e/29/fa3601d3.jpg","comment_is_top":false,"comment_ctime":1678796374,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100040501,"comment_content":"äººç”Ÿè‹¦çŸ­ï¼Œæˆ‘ä¸ä¼šç”¨C++","like_count":0},{"had_liked":false,"id":355137,"user_name":"HI","can_delete":false,"product_type":"c1","uid":1238921,"ip_address":"å¹¿ä¸œ","ucode":"C65218113883E6","user_header":"https://static001.geekbang.org/account/avatar/00/12/e7/89/207cc841.jpg","comment_is_top":false,"comment_ctime":1661132040,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100040501,"comment_content":"666","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479470,"discussion_content":"ä¸æ˜¯è¯´äº†å—ï¼ŒæŠŠä»»æ„ç±»å‹æ˜ å°„åˆ°voidã€‚ä»»æ„ç±»å‹å“¦â€¦â€¦åªè¦è¡¨è¾¾å¼åˆæ³•å°±è¡Œã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577454475,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1477855,"avatar":"https://static001.geekbang.org/account/avatar/00/16/8c/df/77acb793.jpg","nickname":"ç¦¾æ¡ƒ","note":"","ucode":"9FE85C34A9E9E0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":105793,"discussion_content":"å“ˆå“ˆï¼Œä¸ç”¨å›ç­”äº†ï¼Œæ‰¾åˆ°ç­”æ¡ˆäº†ã€‚\n\nâ€œå®ƒçš„ç‰¹æ®Šæ€§åœ¨äºï¼Œåœ¨è¿™ä¸ªçœ‹ä¼¼æ— èŠçš„è¿‡ç¨‹ä¸­ï¼Œç¼–è¯‘å™¨ä¼šæ£€æŸ¥é‚£ä¸ªâ€œä»»æ„ç±»å‹â€çš„æœ‰æ•ˆæ€§ã€‚â€\n\nâ€œè¿™é‡Œç¬¬äºŒä¸ª has_reserve æ¨¡æ¿çš„å®šä¹‰å®é™…ä¸Šæ˜¯ä¸€ä¸ªåç‰¹åŒ– [6]ã€‚åç‰¹åŒ–æ˜¯ç±»æ¨¡æ¿çš„ç‰¹æœ‰åŠŸèƒ½ï¼Œè·Ÿå‡½æ•°é‡è½½æœ‰äº›ç›¸ä¼¼ã€‚ç¼–è¯‘å™¨ä¼šæ‰¾å‡ºæ‰€æœ‰çš„å¯ç”¨æ¨¡æ¿ï¼Œç„¶åé€‰æ‹©å…¶ä¸­æœ€â€œç‰¹åˆ«â€çš„ä¸€ä¸ªã€‚åƒä¸Šé¢çš„ä¾‹å­ï¼Œæ‰€æœ‰ç±»å‹éƒ½èƒ½æ»¡è¶³ç¬¬ä¸€ä¸ªæ¨¡æ¿ï¼Œä½†ä¸æ˜¯æ‰€æœ‰çš„ç±»å‹éƒ½èƒ½æ»¡è¶³ç¬¬äºŒä¸ªæ¨¡æ¿ï¼Œæ‰€ä»¥ç¬¬äºŒä¸ªæ›´ç‰¹åˆ«ã€‚å½“ç¬¬äºŒä¸ªæ¨¡æ¿èƒ½è¢«æ»¡è¶³æ—¶ï¼Œç¼–è¯‘å™¨å°±ä¼šé€‰æ‹©ç¬¬äºŒä¸ªç‰¹åŒ–çš„æ¨¡æ¿ï¼›è€Œåªæœ‰ç¬¬äºŒä¸ªæ¨¡æ¿ä¸èƒ½è¢«æ»¡è¶³æ—¶ï¼Œæ‰ä¼šå›åˆ°ç¬¬ä¸€ä¸ªæ¨¡æ¿çš„é€šç”¨æƒ…å†µã€‚â€\n\n\nâ€œå½“ç¬¬äºŒä¸ªæ¨¡æ¿èƒ½è¢«æ»¡è¶³æ—¶ï¼Œç¼–è¯‘å™¨å°±ä¼šé€‰æ‹©ç¬¬äºŒä¸ªç‰¹åŒ–çš„æ¨¡æ¿â€\nâ€”â€”> â€œç¼–è¯‘å™¨ä¼šæ£€æŸ¥é‚£ä¸ªâ€œä»»æ„ç±»å‹â€çš„æœ‰æ•ˆæ€§â€\n\n","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1577489583,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1477855,"avatar":"https://static001.geekbang.org/account/avatar/00/16/8c/df/77acb793.jpg","nickname":"ç¦¾æ¡ƒ","note":"","ucode":"9FE85C34A9E9E0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":105442,"discussion_content":"å—¯ï¼Œè½¬æ¢æˆvoidçœ‹æ˜ç™½äº†ã€‚\næˆ‘ä¹‹å‰çš„çš„é—®é¢˜æœ‰ç‚¹æ¨¡ç³Šã€‚\n\næˆ‘çš„é—®é¢˜æ˜¯ï¼Œæ—¢ç„¶æ˜¯å’Œä¸æ˜¯ï¼Œéƒ½è½¬æˆäº†voidï¼Œç¼–è¯‘å™¨ä¸ºä»€ä¹ˆèƒ½æ­£ç¡®é€‰æ‹©ç¬¬äºŒä¸ªç±»æ¨¡ç‰ˆï¼ˆç»§æ‰¿true_typeé‚£ä¸ªï¼‰è¿›è¡Œç‰¹åŒ–ï¼Ÿ\n\nè°¢è°¢ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577461069,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":217900,"user_name":"è¥¿åŠ åŠ ","can_delete":false,"product_type":"c1","uid":1144416,"ip_address":"","ucode":"727238758A7F3D","user_header":"https://static001.geekbang.org/account/avatar/00/11/76/60/8ea658a9.jpg","comment_is_top":false,"comment_ctime":1589641192,"is_pvip":false,"replies":[{"id":80760,"content":"çœ‹èµ·æ¥ä½ å¯¹æ¨¡æ¿æ¨å¯¼æœ‰ç‚¹è¯¯è§£ï¼Œç¬¬äºŒä¸ªå¼å­å®Œå…¨æ²¡æœ‰ç”¨å¤„ã€‚ä½ æ²¡æœ‰åœ¨ä»»ä½•åœ°æ–¹æä¾›ç¬¬äºŒä¸ªå‚æ•°ã€‚\n\nå¦‚æœ get ä¼šå¯¼è‡´æ¨¡æ¿æ¨å¯¼å¤±è´¥çš„è¯ï¼Œé‚£è¿™ä¸ªä¾‹å­é‡Œå°±å¯ä»¥ä½¿ç”¨ç±»ä¼¼äºè¯¾ä¸­ void_t çš„æ–¹æ³•äº†ã€‚ä¸è¿‡ï¼Œå¯¹ä¸å­˜åœ¨çš„æˆå‘˜è¿›è¡Œ get è™½ç„¶ä¼šäº§ç”Ÿç¼–è¯‘å¤±è´¥ï¼Œè¿™ä¸ªå¤±è´¥ä¸æ˜¯æ¨å¯¼å¤±è´¥ï¼Œè€Œæ˜¯é™æ€æ–­è¨€ã€‚å› è€Œ void_t ä¹Ÿè§£å†³ä¸äº†é—®é¢˜ã€‚\n\nè‡³äºä½ è¯´çš„é€—å·è¡¨è¾¾å¼ï¼Œæˆ‘çœ‹ä¸å‡ºè§£å†³äº†ä»€ä¹ˆé—®é¢˜ã€‚æˆ‘è¯•éªŒä¸‹æ¥ä¹Ÿæ²¡çœ‹åˆ°é 1 çš„ç»“æœã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1589806442,"ip_address":"","comment_id":217900,"utype":1}],"discussion_count":2,"race_medal":0,"score":4,"product_id":100040501,"comment_content":"åˆ©ç”¨ variant çš„ std::get æ–¹æ³•ï¼Œå†™ä¸€ä¸ª sfine ç”¨äºåˆ¤æ–­ä¸€ä¸ª variant ç±»å‹é‡Œæ˜¯å¦è”åˆäº† float. ä»£ç å’Œé—®é¢˜å¦‚ä¸‹ï¼š\ntemplate &lt;typename T, typename ...&gt;\nstruct CheckVariant {\n    static constexpr int value =  1;\n};\ntemplate &lt;typename T&gt;\nstruct CheckVariant&lt;T,\n    decltype(get&lt;float&gt;( declval&lt;T&gt;() ))\n    &gt;\n{\n    static constexpr int value = 2;\n};\n...\n    if constexpr (CheckVariant&lt;decltype(v)&gt;::value == 1) {\n        cout &lt;&lt; get&lt;float&gt;(v) &lt;&lt; endl;\n    }\n...\n\nå¯æ˜¯å‘ç°è¿™æ ·çš„ SFINAE ä¸èµ·ä½œç”¨ï¼ŒæŠŠæ¨¡æ¿ç‰¹åŒ–ä»£ç æ”¹ä¸ºåˆ©ç”¨ é€—å·è¡¨è¾¾å¼ï¼Œè®© decltype å–å€¼å°±å¯ä»¥äº†ï¼š\n\ntemplate &lt;typename T&gt;\nstruct CheckVariant&lt;T,\n    decltype((get&lt;float&gt;( declval&lt;T&gt;() ), void()))\n    &gt;\n{\n    static constexpr int value = 2;\n};\n\nè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ  \n","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":495285,"discussion_content":"çœ‹èµ·æ¥ä½ å¯¹æ¨¡æ¿æ¨å¯¼æœ‰ç‚¹è¯¯è§£ï¼Œç¬¬äºŒä¸ªå¼å­å®Œå…¨æ²¡æœ‰ç”¨å¤„ã€‚ä½ æ²¡æœ‰åœ¨ä»»ä½•åœ°æ–¹æä¾›ç¬¬äºŒä¸ªå‚æ•°ã€‚\n\nå¦‚æœ get ä¼šå¯¼è‡´æ¨¡æ¿æ¨å¯¼å¤±è´¥çš„è¯ï¼Œé‚£è¿™ä¸ªä¾‹å­é‡Œå°±å¯ä»¥ä½¿ç”¨ç±»ä¼¼äºè¯¾ä¸­ void_t çš„æ–¹æ³•äº†ã€‚ä¸è¿‡ï¼Œå¯¹ä¸å­˜åœ¨çš„æˆå‘˜è¿›è¡Œ get è™½ç„¶ä¼šäº§ç”Ÿç¼–è¯‘å¤±è´¥ï¼Œè¿™ä¸ªå¤±è´¥ä¸æ˜¯æ¨å¯¼å¤±è´¥ï¼Œè€Œæ˜¯é™æ€æ–­è¨€ã€‚å› è€Œ void_t ä¹Ÿè§£å†³ä¸äº†é—®é¢˜ã€‚\n\nè‡³äºä½ è¯´çš„é€—å·è¡¨è¾¾å¼ï¼Œæˆ‘çœ‹ä¸å‡ºè§£å†³äº†ä»€ä¹ˆé—®é¢˜ã€‚æˆ‘è¯•éªŒä¸‹æ¥ä¹Ÿæ²¡çœ‹åˆ°é 1 çš„ç»“æœã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589806442,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1144416,"avatar":"https://static001.geekbang.org/account/avatar/00/11/76/60/8ea658a9.jpg","nickname":"è¥¿åŠ åŠ ","note":"","ucode":"727238758A7F3D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":267727,"discussion_content":"æ›´æ–°ä¸€ä¸‹ï¼Œåœ¨ decltype ä¸­ä½¿ç”¨ é€—å·è¡¨è¾¾å¼ä¾ç„¶ä¸èµ·ä½œç”¨ã€‚æ˜¨å¤©åº”è¯¥æ˜¯çœ‹é”™äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589681465,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":178964,"user_name":"ç¦¾æ¡ƒ","can_delete":false,"product_type":"c1","uid":1477855,"ip_address":"","ucode":"9FE85C34A9E9E0","user_header":"https://static001.geekbang.org/account/avatar/00/16/8c/df/77acb793.jpg","comment_is_top":false,"comment_ctime":1581864279,"is_pvip":false,"replies":[{"id":69503,"content":"æˆ‘è§‰å¾—åº”è¯¥è¿™ä¹ˆç†è§£ï¼š\n\nä½ ç»™å‡ºçš„è¡¨è¾¾å¼æ˜¯\n\ntypename std::enable_if&lt;std::is_same&lt;T, int&gt;::value&gt;::type\n\nä¼°å€¼åå¾—åˆ°\n\ntypename std::enable_if&lt;true&gt;::type\n\nå®ä¾‹åŒ–æ—¶ï¼Œç¼–è¯‘å™¨çœ‹åˆ°æ²¡æœ‰æä¾›ç¬¬äºŒä¸ªå‚æ•°ï¼ŒåŠ ä¸Šç¼ºçœå‚æ•°æŒ‰ std::enable_if&lt;true, void&gt; å®ä¾‹åŒ–ï¼Œå†åç‰¹åŒ–å¾—åˆ°\n\ntemplate&lt;&gt;\nstruct enable_if&lt;true, void&gt;\n{\n  typedef void type;\n};\n","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1581918448,"ip_address":"","comment_id":178964,"utype":1}],"discussion_count":2,"race_medal":0,"score":4,"product_id":100040501,"comment_content":"https:&#47;&#47;en.cppreference.com&#47;w&#47;cpp&#47;types&#47;enable_if\n&quot;\nPossible implementation\ntemplate&lt;bool B, class T = void&gt;\nstruct enable_if {};\n \ntemplate&lt;class T&gt;\nstruct enable_if&lt;true, T&gt; { typedef T type; };\n&quot;\n\nä¸‹åˆ—çš„æµ‹è¯•ä»£ç å¯ä»¥ç¼–è¯‘ï¼Œè¿è¡Œ\n&quot;\n#include &lt;type_traits&gt;\n#include &lt;iostream&gt;\n\ntemplate &lt;typename X, typename T, typename Y&gt;\ntypename std::enable_if&lt;std::is_same&lt;T, int&gt;::value&gt;::type update(X x, T t, Y y)\n{\n    std::cout &lt;&lt; &quot;int&quot; &lt;&lt; std::endl;\n}\n\nint main () {\n    float a = 1.4;\n    int b = 1;\n    double c =2.2;\n    update(a, b, c);\n}\n&quot;\n\nå…¶ä¸­æˆ‘ç”¨çš„æ˜¯std::enable_if&lt;std::is_same&lt;T, int&gt;::value&gt;ï¼Œ å¹¶æ²¡æœ‰æä¾›å‚æ•°æ¥æ¨å¯¼Tï¼Œ\nè¿™æ˜¯ä¸æ˜¯æ„å‘³ç€å¯¹äºtrueè¿™ç§æƒ…å†µçš„åç‰¹åŒ–implementationæ˜¯\ntemplate&lt;class T = void&gt;\nstruct enable_if&lt;true, T&gt; { typedef T type; };\n\nè€Œä¸æ˜¯\n\ntemplate&lt;class T&gt;\nstruct enable_if&lt;true, T&gt; { typedef T type; };\n\nè°¢è°¢ï¼","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":495285,"discussion_content":"çœ‹èµ·æ¥ä½ å¯¹æ¨¡æ¿æ¨å¯¼æœ‰ç‚¹è¯¯è§£ï¼Œç¬¬äºŒä¸ªå¼å­å®Œå…¨æ²¡æœ‰ç”¨å¤„ã€‚ä½ æ²¡æœ‰åœ¨ä»»ä½•åœ°æ–¹æä¾›ç¬¬äºŒä¸ªå‚æ•°ã€‚\n\nå¦‚æœ get ä¼šå¯¼è‡´æ¨¡æ¿æ¨å¯¼å¤±è´¥çš„è¯ï¼Œé‚£è¿™ä¸ªä¾‹å­é‡Œå°±å¯ä»¥ä½¿ç”¨ç±»ä¼¼äºè¯¾ä¸­ void_t çš„æ–¹æ³•äº†ã€‚ä¸è¿‡ï¼Œå¯¹ä¸å­˜åœ¨çš„æˆå‘˜è¿›è¡Œ get è™½ç„¶ä¼šäº§ç”Ÿç¼–è¯‘å¤±è´¥ï¼Œè¿™ä¸ªå¤±è´¥ä¸æ˜¯æ¨å¯¼å¤±è´¥ï¼Œè€Œæ˜¯é™æ€æ–­è¨€ã€‚å› è€Œ void_t ä¹Ÿè§£å†³ä¸äº†é—®é¢˜ã€‚\n\nè‡³äºä½ è¯´çš„é€—å·è¡¨è¾¾å¼ï¼Œæˆ‘çœ‹ä¸å‡ºè§£å†³äº†ä»€ä¹ˆé—®é¢˜ã€‚æˆ‘è¯•éªŒä¸‹æ¥ä¹Ÿæ²¡çœ‹åˆ°é 1 çš„ç»“æœã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589806442,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1144416,"avatar":"https://static001.geekbang.org/account/avatar/00/11/76/60/8ea658a9.jpg","nickname":"è¥¿åŠ åŠ ","note":"","ucode":"727238758A7F3D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":267727,"discussion_content":"æ›´æ–°ä¸€ä¸‹ï¼Œåœ¨ decltype ä¸­ä½¿ç”¨ é€—å·è¡¨è¾¾å¼ä¾ç„¶ä¸èµ·ä½œç”¨ã€‚æ˜¨å¤©åº”è¯¥æ˜¯çœ‹é”™äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589681465,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":178429,"user_name":"è´¾é™†å","can_delete":false,"product_type":"c1","uid":1321408,"ip_address":"","ucode":"2722C422077EE0","user_header":"https://static001.geekbang.org/account/avatar/00/14/29/c0/86fa3e92.jpg","comment_is_top":false,"comment_ctime":1581688048,"is_pvip":false,"replies":[{"id":69240,"content":"æ¨¡æ¿ç»å¯¹æ˜¯ C++ çš„ä¸€å¤§ç‰¹ç‚¹ã€‚è™½è¯´æœ‰äº›æŠ€å·§ä¼šè¿‡æ—¶ï¼ˆSFINAE åˆ° C++20 ä¹Ÿä¼šå˜å¾—æœ‰ç‚¹è¿‡æ—¶ï¼›çœ‹å®Œå…¨éƒ¨ä½ å°±çŸ¥é“äº†ï¼‰ï¼Œä½†æ¨¡æ¿å’Œé™æ€é¸­å­ç±»å‹è¿™æ ·çš„ç”¨æ³•åœ¨ç›®å‰çš„å…¶ä»–ä¸»æµè¯­è¨€é‡Œæ˜¯æ²¡æœ‰çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1581733086,"ip_address":"","comment_id":178429,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100040501,"comment_content":"å´è€å¸ˆï¼Œå†™çš„æ»¡æ»¡å¹²è´§ï¼Œä¹‹å‰æ¨¡æ¿å¹¶æ²¡æœ‰æ·±å…¥å­¦ä¹ ï¼Œæ‰çŸ¥é“æ¨¡æ¿å¯ä»¥è¿™ä¹ˆèŠ±ï¼Œç”¨é€”å¯ä»¥è¿™ä¹ˆå¤š","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484040,"discussion_content":"æˆ‘è§‰å¾—åº”è¯¥è¿™ä¹ˆç†è§£ï¼š\n\nä½ ç»™å‡ºçš„è¡¨è¾¾å¼æ˜¯\n\ntypename std::enable_if&amp;lt;std::is_same&amp;lt;T, int&amp;gt;::value&amp;gt;::type\n\nä¼°å€¼åå¾—åˆ°\n\ntypename std::enable_if&amp;lt;true&amp;gt;::type\n\nå®ä¾‹åŒ–æ—¶ï¼Œç¼–è¯‘å™¨çœ‹åˆ°æ²¡æœ‰æä¾›ç¬¬äºŒä¸ªå‚æ•°ï¼ŒåŠ ä¸Šç¼ºçœå‚æ•°æŒ‰ std::enable_if&amp;lt;true, void&amp;gt; å®ä¾‹åŒ–ï¼Œå†åç‰¹åŒ–å¾—åˆ°\n\ntemplate&amp;lt;&amp;gt;\nstruct enable_if&amp;lt;true, void&amp;gt;\n{\n  typedef void type;\n};\n","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1581918448,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1477855,"avatar":"https://static001.geekbang.org/account/avatar/00/16/8c/df/77acb793.jpg","nickname":"ç¦¾æ¡ƒ","note":"","ucode":"9FE85C34A9E9E0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":175245,"discussion_content":"æœ‰æ„æ€ã€‚\næˆ‘åŸä»¥ä¸ºå®ä¾‹åŒ–çš„è¿‡ç¨‹ï¼Œåªä¼šé€‰æ‹©ä¸€ä¸ªæ¨¡ç‰ˆè¿›è¡Œã€‚\nè¿™ä¸ªå®ä¾‹åŒ–çš„è¿‡ç¨‹ï¼Œ\n\nå…ˆæ˜¯ç”¨äº†ç¬¬ä¸€ä¸ªæ¨¡ç‰ˆï¼Œ\ntemplate<bool B, class T = void>\nstruct enable_if {};\n \n\nç„¶åå†ç”¨äº†ç¬¬äºŒä¸ªåç‰¹åŒ–çš„æ¨¡ç‰ˆã€‚\ntemplate<class T>\nstruct enable_if<true, T> { typedef T type; };\n\nå¤šè°¢ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581952468,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":169492,"user_name":"å…‰åŸ~å…´","can_delete":false,"product_type":"c1","uid":1188173,"ip_address":"","ucode":"55A0D25BFCDD47","user_header":"https://static001.geekbang.org/account/avatar/00/12/21/4d/90ea92f8.jpg","comment_is_top":false,"comment_ctime":1578365325,"is_pvip":false,"replies":[{"id":65782,"content":"ä½ çš„é—®é¢˜ä¸é‚£ä¹ˆæ¸…æ¥šå•Šã€‚\n\nU::* ä¸æ˜¯å®Œæ•´ç±»å‹ï¼Œvoid (U::*)() æ‰æ˜¯ä¸€ä¸ªç±»å‹ã€‚U::foo æ˜¯ä¸€ä¸ªå…·ä½“çš„å‡½æ•°ï¼Œ&amp;U::foo æ˜¯å‡½æ•°æŒ‡é’ˆã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1578391640,"ip_address":"","comment_id":169492,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100040501,"comment_content":"å‡è®¾Uæ˜¯ä¸€ä¸ªClass,å†…éƒ¨æœ‰fooæ–¹æ³•ä¸baræ–¹æ³•ï¼Œé‚£ä¹ˆU::*è¡¨ç¤ºçš„æ˜¯æ‰€æœ‰æˆå‘˜å‡½æ•°çš„æŒ‡é’ˆå§ï¼Œè€ŒU::foo*æ˜¯fooæˆå‘˜å‡½æ•°æŒ‡é’ˆï¼Œè¿˜è¯·è€å¸ˆæŒ‡ç‚¹ã€‚","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":483817,"discussion_content":"æ¨¡æ¿ç»å¯¹æ˜¯ C++ çš„ä¸€å¤§ç‰¹ç‚¹ã€‚è™½è¯´æœ‰äº›æŠ€å·§ä¼šè¿‡æ—¶ï¼ˆSFINAE åˆ° C++20 ä¹Ÿä¼šå˜å¾—æœ‰ç‚¹è¿‡æ—¶ï¼›çœ‹å®Œå…¨éƒ¨ä½ å°±çŸ¥é“äº†ï¼‰ï¼Œä½†æ¨¡æ¿å’Œé™æ€é¸­å­ç±»å‹è¿™æ ·çš„ç”¨æ³•åœ¨ç›®å‰çš„å…¶ä»–ä¸»æµè¯­è¨€é‡Œæ˜¯æ²¡æœ‰çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581733086,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":167717,"user_name":"æœ¨ç“œ777","can_delete":false,"product_type":"c1","uid":1512537,"ip_address":"","ucode":"FC52A499AF6374","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/aFAYPyw7ywC1xE9h1qibnTBwtWn2ClJqlicy5cMomhZVaruMyqSq76wMkS279mUaGhrLGwWo9ZnW0WCWfmMovlXw/132","comment_is_top":false,"comment_ctime":1577922493,"is_pvip":false,"replies":[{"id":65176,"content":"å†™è¿™ä¸€è®²æ—¶ï¼Œæˆ‘è‡ªå·±ä¹Ÿè§‰å¾—å¾ˆèˆ’å¿ƒâ€”â€”æ­£å¥½æŠŠç›¸å…³çš„æŠ€å·§æ•´ç†ä¸€éã€‚è¿™éƒ¨åˆ†è¿˜æ˜¯æŒºå¤æ‚çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1577962638,"ip_address":"","comment_id":167717,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100040501,"comment_content":"æ²¡çœ‹è¿™å‡ ç¯‡æ–‡ç« å‰ï¼Œä»¥ä¸ºç†è§£æ¨¡æ¿äº†ï¼Œç°åœ¨æ‰çŸ¥é“æ¨¡æ¿åšå¤§ç²¾æ·±ğŸ‘","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479960,"discussion_content":"å†™è¿™ä¸€è®²æ—¶ï¼Œæˆ‘è‡ªå·±ä¹Ÿè§‰å¾—å¾ˆèˆ’å¿ƒâ€”â€”æ­£å¥½æŠŠç›¸å…³çš„æŠ€å·§æ•´ç†ä¸€éã€‚è¿™éƒ¨åˆ†è¿˜æ˜¯æŒºå¤æ‚çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577962638,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":166868,"user_name":"æ€»ç»Ÿè€å”","can_delete":false,"product_type":"c1","uid":1490070,"ip_address":"","ucode":"F2CC66E5BB4871","user_header":"https://static001.geekbang.org/account/avatar/00/16/bc/96/c679bb3d.jpg","comment_is_top":false,"comment_ctime":1577618983,"is_pvip":false,"replies":[{"id":64869,"content":"1. ä¸€ä¸ªå‡½æ•°æ²¡æœ‰çœŸæ­£è¢«è°ƒç”¨ï¼Œä»£ç é‡Œå°±ä¸ä¼šäº§ç”Ÿå¯¹å®ƒçš„å¼•ç”¨ï¼Œé“¾æ¥æ²¡æœ‰ä¹Ÿå°±ä¸ä¼šå‡ºé—®é¢˜ã€‚\n\n2. ä¸æ˜¯ç‰¹åŒ–ï¼Œè€Œæ˜¯è‡ªåŠ¨æ¨æ–­åè¿›è¡Œè‡ªåŠ¨å®ä¾‹åŒ–ã€‚ç‰¹åŒ–æ˜¯éœ€è¦æœ‰èƒ½çœ‹å¾—åˆ°çš„ç‰¹åŒ–å®šä¹‰çš„ã€‚\n\n3. ä¸»è¦æ˜¯å’Œä¸‹é¢çš„å®šä¹‰å¯¹ç§°ã€‚å› ä¸ºè¿™å„¿çš„ç±»å‹ä¸å®é™…ä½¿ç”¨ï¼Œå†™ä»»ä½•çš„åˆæ³•ç±»å‹éƒ½æ˜¯å¯ä»¥çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1577674533,"ip_address":"","comment_id":166868,"utype":1}],"discussion_count":2,"race_medal":0,"score":4,"product_id":100040501,"comment_content":"å´è€å¸ˆï¼Œå…³äºè¿™ä¸€è¯¾ï¼Œæœ‰ 3 ä¸ªé—®é¢˜\n1ï¼Œåœ¨æœ€å¼€å§‹å®šä¹‰ has_reserve ç±»æ—¶ï¼Œä¸¤ä¸ª reserve æ¨¡æ¿å‡½æ•°å®é™…ä¸Šåªæ˜¯å£°æ˜äº†ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰çœŸæ­£çš„å‡½æ•°ä½“ï¼Œè€Œæœ€åçš„ value æˆå‘˜å®é™…ä¸Šæ˜¯ç”¨ nullptr è°ƒç”¨äº† reserve å‡½æ•°ï¼Œè¿™å°±ç›¸å½“äºè°ƒç”¨ä¸€ä¸ªæ²¡æœ‰åªæœ‰å£°æ˜æ²¡æœ‰å®šä¹‰çš„å‡½æ•°ï¼Œä¸ºä»€ä¹ˆæ²¡æœ‰æŠ¥é”™ï¼Ÿ\n2ï¼Œå…³äºæ¨¡æ¿å‡½æ•°çš„è°ƒç”¨\nå‡è®¾æœ‰å¦‚ä¸‹æ¨¡æ¿\ntemplate &lt;typename T1, typename T2&gt;\nint add(T1 a, T2 b);\næ—¢å¯ä»¥add&lt;int, double&gt;(1, 2.5)è°ƒç”¨ï¼Œä¹Ÿå¯ä»¥add(1, 2.5)è°ƒç”¨ï¼Œä¸¤è€…çš„å·®åˆ«æ˜¯ä¸æ˜¯ç¬¬ä¸€ç§æ–¹å¼ç›¸å½“äºå…ˆå£°æ˜äº†ä¸€ä¸ªç‰¹åŒ–ç‰ˆæœ¬ï¼Œåœ¨ç”¨è¿™ä¸ªç‰¹åŒ–ç‰ˆæœ¬æ¥è°ƒç”¨ï¼Œåä¸€ç§æ–¹å¼æ˜¯ç¼–è¯‘å™¨è‡ªè¡Œæ¨æ–­ï¼Ÿä½†è‹¥æ˜¯æ²¡æœ‰å®šä¹‰å¯¹åº”çš„ç‰¹åŒ–ç‰ˆæœ¬ï¼Œç¬¬ä¸€ç§æ–¹å¼å’Œç¬¬äºŒç§æ–¹å¼æ˜¯ä¸æ˜¯å®Œå…¨æ²¡æœ‰åŒºåˆ«ï¼Ÿ\n3ï¼Œåœ¨ void_t çš„éƒ¨åˆ†ï¼Œæ¨¡æ¿å®šä¹‰æ—¶ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯è¿™æ ·å†™çš„ï¼štypename = void_t&lt;&gt;ï¼Œ æˆ‘è¯•äº†ä¸€ä¸‹ï¼Œç›´æ¥å†™æˆ typename = voidï¼Œä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œä½ é‡‡ç”¨è¿™ç§å†™æ³•æ˜¯æœ‰ä»€ä¹ˆç‰¹æ®Šè€ƒè™‘å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479960,"discussion_content":"å†™è¿™ä¸€è®²æ—¶ï¼Œæˆ‘è‡ªå·±ä¹Ÿè§‰å¾—å¾ˆèˆ’å¿ƒâ€”â€”æ­£å¥½æŠŠç›¸å…³çš„æŠ€å·§æ•´ç†ä¸€éã€‚è¿™éƒ¨åˆ†è¿˜æ˜¯æŒºå¤æ‚çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577962638,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":166273,"user_name":"ç¦¾æ¡ƒ","can_delete":false,"product_type":"c1","uid":1477855,"ip_address":"","ucode":"9FE85C34A9E9E0","user_header":"https://static001.geekbang.org/account/avatar/00/16/8c/df/77acb793.jpg","comment_is_top":false,"comment_ctime":1577430232,"is_pvip":false,"replies":[{"id":63432,"content":"ä¸æ˜¯è¯´äº†å—ï¼ŒæŠŠä»»æ„ç±»å‹æ˜ å°„åˆ°voidã€‚ä»»æ„ç±»å‹å“¦â€¦â€¦åªè¦è¡¨è¾¾å¼åˆæ³•å°±è¡Œã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1577454475,"ip_address":"","comment_id":166273,"utype":1}],"discussion_count":3,"race_medal":0,"score":4,"product_id":100040501,"comment_content":"â€œ\ntemplate &lt;typename T, typename = void_t&lt;&gt;&gt;\nstruct has_reserve : false_type {};\n\ntemplate &lt;typename T&gt;\nstruct has_reserve&lt;T, void_t&lt;decltype(declval&lt;T&amp;&gt;().reserve(1U))&gt;&gt; : true_type {};\n\ndeclval().reserve(1U) ç”¨æ¥æµ‹è¯• C&amp; ç±»å‹çš„å¯¹è±¡æ˜¯ä¸æ˜¯å¯ä»¥æ‹¿ 1U ä½œä¸ºå‚æ•°æ¥è°ƒç”¨ reserve æˆå‘˜å‡½æ•°\nâ€œ\nè¯·é—®\n- å¦‚æœæ˜¯, decltype(declval&lt;T&amp;&gt;().reserve(1U))&gt; è¿”å›çš„æ˜¯voidï¼Œè¿™ä¸ªå¥½ç†è§£ï¼Œå› ä¸ºvoid_tä¼šæŠŠä»»ä½•æ•°ç›®ï¼ˆåŒ…æ‹¬é›¶ä¸ªï¼‰çš„ç±»å‹è½¬æ¢ä¸ºç±»å‹void\n- å¦‚æœä¸æ˜¯, ç¼–è¯‘å™¨çœ‹åˆ°decltype(declval&lt;T&amp;&gt;().reserve(1U))&gt; ä¼šåšä»€ä¹ˆï¼Ÿ\n                  ç„¶åç¼–è¯‘å™¨çœ‹åˆ°void_t&lt;decltype(declval&lt;T&amp;&gt;().reserve(1U))&gt; åˆä¼šåšä»€ä¹ˆï¼Ÿ\n","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479470,"discussion_content":"ä¸æ˜¯è¯´äº†å—ï¼ŒæŠŠä»»æ„ç±»å‹æ˜ å°„åˆ°voidã€‚ä»»æ„ç±»å‹å“¦â€¦â€¦åªè¦è¡¨è¾¾å¼åˆæ³•å°±è¡Œã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577454475,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1477855,"avatar":"https://static001.geekbang.org/account/avatar/00/16/8c/df/77acb793.jpg","nickname":"ç¦¾æ¡ƒ","note":"","ucode":"9FE85C34A9E9E0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":105793,"discussion_content":"å“ˆå“ˆï¼Œä¸ç”¨å›ç­”äº†ï¼Œæ‰¾åˆ°ç­”æ¡ˆäº†ã€‚\n\nâ€œå®ƒçš„ç‰¹æ®Šæ€§åœ¨äºï¼Œåœ¨è¿™ä¸ªçœ‹ä¼¼æ— èŠçš„è¿‡ç¨‹ä¸­ï¼Œç¼–è¯‘å™¨ä¼šæ£€æŸ¥é‚£ä¸ªâ€œä»»æ„ç±»å‹â€çš„æœ‰æ•ˆæ€§ã€‚â€\n\nâ€œè¿™é‡Œç¬¬äºŒä¸ª has_reserve æ¨¡æ¿çš„å®šä¹‰å®é™…ä¸Šæ˜¯ä¸€ä¸ªåç‰¹åŒ– [6]ã€‚åç‰¹åŒ–æ˜¯ç±»æ¨¡æ¿çš„ç‰¹æœ‰åŠŸèƒ½ï¼Œè·Ÿå‡½æ•°é‡è½½æœ‰äº›ç›¸ä¼¼ã€‚ç¼–è¯‘å™¨ä¼šæ‰¾å‡ºæ‰€æœ‰çš„å¯ç”¨æ¨¡æ¿ï¼Œç„¶åé€‰æ‹©å…¶ä¸­æœ€â€œç‰¹åˆ«â€çš„ä¸€ä¸ªã€‚åƒä¸Šé¢çš„ä¾‹å­ï¼Œæ‰€æœ‰ç±»å‹éƒ½èƒ½æ»¡è¶³ç¬¬ä¸€ä¸ªæ¨¡æ¿ï¼Œä½†ä¸æ˜¯æ‰€æœ‰çš„ç±»å‹éƒ½èƒ½æ»¡è¶³ç¬¬äºŒä¸ªæ¨¡æ¿ï¼Œæ‰€ä»¥ç¬¬äºŒä¸ªæ›´ç‰¹åˆ«ã€‚å½“ç¬¬äºŒä¸ªæ¨¡æ¿èƒ½è¢«æ»¡è¶³æ—¶ï¼Œç¼–è¯‘å™¨å°±ä¼šé€‰æ‹©ç¬¬äºŒä¸ªç‰¹åŒ–çš„æ¨¡æ¿ï¼›è€Œåªæœ‰ç¬¬äºŒä¸ªæ¨¡æ¿ä¸èƒ½è¢«æ»¡è¶³æ—¶ï¼Œæ‰ä¼šå›åˆ°ç¬¬ä¸€ä¸ªæ¨¡æ¿çš„é€šç”¨æƒ…å†µã€‚â€\n\n\nâ€œå½“ç¬¬äºŒä¸ªæ¨¡æ¿èƒ½è¢«æ»¡è¶³æ—¶ï¼Œç¼–è¯‘å™¨å°±ä¼šé€‰æ‹©ç¬¬äºŒä¸ªç‰¹åŒ–çš„æ¨¡æ¿â€\nâ€”â€”> â€œç¼–è¯‘å™¨ä¼šæ£€æŸ¥é‚£ä¸ªâ€œä»»æ„ç±»å‹â€çš„æœ‰æ•ˆæ€§â€\n\n","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1577489583,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1477855,"avatar":"https://static001.geekbang.org/account/avatar/00/16/8c/df/77acb793.jpg","nickname":"ç¦¾æ¡ƒ","note":"","ucode":"9FE85C34A9E9E0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":105442,"discussion_content":"å—¯ï¼Œè½¬æ¢æˆvoidçœ‹æ˜ç™½äº†ã€‚\næˆ‘ä¹‹å‰çš„çš„é—®é¢˜æœ‰ç‚¹æ¨¡ç³Šã€‚\n\næˆ‘çš„é—®é¢˜æ˜¯ï¼Œæ—¢ç„¶æ˜¯å’Œä¸æ˜¯ï¼Œéƒ½è½¬æˆäº†voidï¼Œç¼–è¯‘å™¨ä¸ºä»€ä¹ˆèƒ½æ­£ç¡®é€‰æ‹©ç¬¬äºŒä¸ªç±»æ¨¡ç‰ˆï¼ˆç»§æ‰¿true_typeé‚£ä¸ªï¼‰è¿›è¡Œç‰¹åŒ–ï¼Ÿ\n\nè°¢è°¢ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577461069,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":370415,"user_name":"ğŸ¶çš„å·´æ™®æ´›å¤«","can_delete":false,"product_type":"c1","uid":3542569,"ip_address":"åŒ—äº¬","ucode":"1213DD5A056674","user_header":"https://static001.geekbang.org/account/avatar/00/36/0e/29/fa3601d3.jpg","comment_is_top":false,"comment_ctime":1678796374,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100040501,"comment_content":"äººç”Ÿè‹¦çŸ­ï¼Œæˆ‘ä¸ä¼šç”¨C++","like_count":0},{"had_liked":false,"id":355137,"user_name":"HI","can_delete":false,"product_type":"c1","uid":1238921,"ip_address":"å¹¿ä¸œ","ucode":"C65218113883E6","user_header":"https://static001.geekbang.org/account/avatar/00/12/e7/89/207cc841.jpg","comment_is_top":false,"comment_ctime":1661132040,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100040501,"comment_content":"666","like_count":0}]}