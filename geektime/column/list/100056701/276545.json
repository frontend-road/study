{"id":276545,"title":"09 | åˆ‡ç‰‡é›†ç¾¤ï¼šæ•°æ®å¢å¤šäº†ï¼Œæ˜¯è¯¥åŠ å†…å­˜è¿˜æ˜¯åŠ å®ä¾‹ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯è’‹å¾·é’§ã€‚ä»Šå¤©æˆ‘ä»¬æ¥å­¦ä¹ åˆ‡ç‰‡é›†ç¾¤ã€‚</p><p>æˆ‘æ›¾é‡åˆ°è¿‡è¿™ä¹ˆä¸€ä¸ªéœ€æ±‚ï¼šè¦ç”¨Redisä¿å­˜5000ä¸‡ä¸ªé”®å€¼å¯¹ï¼Œæ¯ä¸ªé”®å€¼å¯¹å¤§çº¦æ˜¯512Bï¼Œä¸ºäº†èƒ½å¿«é€Ÿéƒ¨ç½²å¹¶å¯¹å¤–æä¾›æœåŠ¡ï¼Œæˆ‘ä»¬é‡‡ç”¨äº‘ä¸»æœºæ¥è¿è¡ŒRediså®ä¾‹ï¼Œé‚£ä¹ˆï¼Œè¯¥å¦‚ä½•é€‰æ‹©äº‘ä¸»æœºçš„å†…å­˜å®¹é‡å‘¢ï¼Ÿ</p><p>æˆ‘ç²—ç•¥åœ°è®¡ç®—äº†ä¸€ä¸‹ï¼Œè¿™äº›é”®å€¼å¯¹æ‰€å çš„å†…å­˜ç©ºé—´å¤§çº¦æ˜¯25GBï¼ˆ5000ä¸‡*512Bï¼‰ã€‚æ‰€ä»¥ï¼Œå½“æ—¶ï¼Œæˆ‘æƒ³åˆ°çš„ç¬¬ä¸€ä¸ªæ–¹æ¡ˆå°±æ˜¯ï¼šé€‰æ‹©ä¸€å°32GBå†…å­˜çš„äº‘ä¸»æœºæ¥éƒ¨ç½²Redisã€‚å› ä¸º32GBçš„å†…å­˜èƒ½ä¿å­˜æ‰€æœ‰æ•°æ®ï¼Œè€Œä¸”è¿˜ç•™æœ‰7GBï¼Œå¯ä»¥ä¿è¯ç³»ç»Ÿçš„æ­£å¸¸è¿è¡Œã€‚åŒæ—¶ï¼Œæˆ‘è¿˜é‡‡ç”¨RDBå¯¹æ•°æ®åšæŒä¹…åŒ–ï¼Œä»¥ç¡®ä¿Rediså®ä¾‹æ•…éšœåï¼Œè¿˜èƒ½ä»RDBæ¢å¤æ•°æ®ã€‚</p><p>ä½†æ˜¯ï¼Œåœ¨ä½¿ç”¨çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘å‘ç°ï¼ŒRedisçš„å“åº”æœ‰æ—¶ä¼šéå¸¸æ…¢ã€‚åæ¥ï¼Œæˆ‘ä»¬ä½¿ç”¨INFOå‘½ä»¤æŸ¥çœ‹Redisçš„latest_fork_usecæŒ‡æ ‡å€¼ï¼ˆè¡¨ç¤ºæœ€è¿‘ä¸€æ¬¡forkçš„è€—æ—¶ï¼‰ï¼Œç»“æœæ˜¾ç¤ºè¿™ä¸ªæŒ‡æ ‡å€¼ç‰¹åˆ«é«˜ï¼Œå¿«åˆ°ç§’çº§åˆ«äº†ã€‚</p><p>è¿™è·ŸRedisçš„æŒä¹…åŒ–æœºåˆ¶æœ‰å…³ç³»ã€‚åœ¨ä½¿ç”¨RDBè¿›è¡ŒæŒä¹…åŒ–æ—¶ï¼ŒRedisä¼šforkå­è¿›ç¨‹æ¥å®Œæˆï¼Œforkæ“ä½œçš„ç”¨æ—¶å’ŒRedisçš„æ•°æ®é‡æ˜¯æ­£ç›¸å…³çš„ï¼Œè€Œforkåœ¨æ‰§è¡Œæ—¶ä¼šé˜»å¡ä¸»çº¿ç¨‹ã€‚æ•°æ®é‡è¶Šå¤§ï¼Œforkæ“ä½œé€ æˆçš„ä¸»çº¿ç¨‹é˜»å¡çš„æ—¶é—´è¶Šé•¿ã€‚æ‰€ä»¥ï¼Œåœ¨ä½¿ç”¨RDBå¯¹25GBçš„æ•°æ®è¿›è¡ŒæŒä¹…åŒ–æ—¶ï¼Œæ•°æ®é‡è¾ƒå¤§ï¼Œåå°è¿è¡Œçš„å­è¿›ç¨‹åœ¨forkåˆ›å»ºæ—¶é˜»å¡äº†ä¸»çº¿ç¨‹ï¼Œäºæ˜¯å°±å¯¼è‡´Rediså“åº”å˜æ…¢äº†ã€‚</p><!-- [[[read_end]]] --><p>çœ‹æ¥ï¼Œç¬¬ä¸€ä¸ªæ–¹æ¡ˆæ˜¾ç„¶æ˜¯ä¸å¯è¡Œçš„ï¼Œæˆ‘ä»¬å¿…é¡»è¦å¯»æ‰¾å…¶ä»–çš„æ–¹æ¡ˆã€‚è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬æ³¨æ„åˆ°äº†Redisçš„åˆ‡ç‰‡é›†ç¾¤ã€‚è™½ç„¶ç»„å»ºåˆ‡ç‰‡é›†ç¾¤æ¯”è¾ƒéº»çƒ¦ï¼Œä½†æ˜¯å®ƒå¯ä»¥ä¿å­˜å¤§é‡æ•°æ®ï¼Œè€Œä¸”å¯¹Redisä¸»çº¿ç¨‹çš„é˜»å¡å½±å“è¾ƒå°ã€‚</p><p>åˆ‡ç‰‡é›†ç¾¤ï¼Œä¹Ÿå«åˆ†ç‰‡é›†ç¾¤ï¼Œå°±æ˜¯æŒ‡å¯åŠ¨å¤šä¸ªRediså®ä¾‹ç»„æˆä¸€ä¸ªé›†ç¾¤ï¼Œç„¶åæŒ‰ç…§ä¸€å®šçš„è§„åˆ™ï¼ŒæŠŠæ”¶åˆ°çš„æ•°æ®åˆ’åˆ†æˆå¤šä»½ï¼Œæ¯ä¸€ä»½ç”¨ä¸€ä¸ªå®ä¾‹æ¥ä¿å­˜ã€‚å›åˆ°æˆ‘ä»¬åˆšåˆšçš„åœºæ™¯ä¸­ï¼Œå¦‚æœæŠŠ25GBçš„æ•°æ®å¹³å‡åˆ†æˆ5ä»½ï¼ˆå½“ç„¶ï¼Œä¹Ÿå¯ä»¥ä¸åšå‡åˆ†ï¼‰ï¼Œä½¿ç”¨5ä¸ªå®ä¾‹æ¥ä¿å­˜ï¼Œæ¯ä¸ªå®ä¾‹åªéœ€è¦ä¿å­˜5GBæ•°æ®ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/79/26/793251ca784yyf6ac37fe46389094b26.jpg?wh=2501*1342\" alt=\"\" title=\"åˆ‡ç‰‡é›†ç¾¤æ¶æ„å›¾\"></p><p>é‚£ä¹ˆï¼Œåœ¨åˆ‡ç‰‡é›†ç¾¤ä¸­ï¼Œå®ä¾‹åœ¨ä¸º5GBæ•°æ®ç”ŸæˆRDBæ—¶ï¼Œæ•°æ®é‡å°±å°äº†å¾ˆå¤šï¼Œforkå­è¿›ç¨‹ä¸€èˆ¬ä¸ä¼šç»™ä¸»çº¿ç¨‹å¸¦æ¥è¾ƒé•¿æ—¶é—´çš„é˜»å¡ã€‚é‡‡ç”¨å¤šä¸ªå®ä¾‹ä¿å­˜æ•°æ®åˆ‡ç‰‡åï¼Œæˆ‘ä»¬æ—¢èƒ½ä¿å­˜25GBæ•°æ®ï¼Œåˆé¿å…äº†forkå­è¿›ç¨‹é˜»å¡ä¸»çº¿ç¨‹è€Œå¯¼è‡´çš„å“åº”çªç„¶å˜æ…¢ã€‚</p><p>åœ¨å®é™…åº”ç”¨Redisæ—¶ï¼Œéšç€ç”¨æˆ·æˆ–ä¸šåŠ¡è§„æ¨¡çš„æ‰©å±•ï¼Œä¿å­˜å¤§é‡æ•°æ®çš„æƒ…å†µé€šå¸¸æ˜¯æ— æ³•é¿å…çš„ã€‚è€Œåˆ‡ç‰‡é›†ç¾¤ï¼Œå°±æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„è§£å†³æ–¹æ¡ˆã€‚è¿™èŠ‚è¯¾ï¼Œæˆ‘ä»¬å°±æ¥å­¦ä¹ ä¸€ä¸‹ã€‚</p><h2>å¦‚ä½•ä¿å­˜æ›´å¤šæ•°æ®ï¼Ÿ</h2><p>åœ¨åˆšåˆšçš„æ¡ˆä¾‹é‡Œï¼Œä¸ºäº†ä¿å­˜å¤§é‡æ•°æ®ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†å¤§å†…å­˜äº‘ä¸»æœºå’Œåˆ‡ç‰‡é›†ç¾¤ä¸¤ç§æ–¹æ³•ã€‚å®é™…ä¸Šï¼Œè¿™ä¸¤ç§æ–¹æ³•åˆ†åˆ«å¯¹åº”ç€Redisåº”å¯¹æ•°æ®é‡å¢å¤šçš„ä¸¤ç§æ–¹æ¡ˆï¼šçºµå‘æ‰©å±•ï¼ˆscale upï¼‰å’Œæ¨ªå‘æ‰©å±•ï¼ˆscale outï¼‰ã€‚</p><ul>\n<li><strong>çºµå‘æ‰©å±•</strong>ï¼šå‡çº§å•ä¸ªRediså®ä¾‹çš„èµ„æºé…ç½®ï¼ŒåŒ…æ‹¬å¢åŠ å†…å­˜å®¹é‡ã€å¢åŠ ç£ç›˜å®¹é‡ã€ä½¿ç”¨æ›´é«˜é…ç½®çš„CPUã€‚å°±åƒä¸‹å›¾ä¸­ï¼ŒåŸæ¥çš„å®ä¾‹å†…å­˜æ˜¯8GBï¼Œç¡¬ç›˜æ˜¯50GBï¼Œçºµå‘æ‰©å±•åï¼Œå†…å­˜å¢åŠ åˆ°24GBï¼Œç£ç›˜å¢åŠ åˆ°150GBã€‚</li>\n<li><strong>æ¨ªå‘æ‰©å±•</strong>ï¼šæ¨ªå‘å¢åŠ å½“å‰Rediså®ä¾‹çš„ä¸ªæ•°ï¼Œå°±åƒä¸‹å›¾ä¸­ï¼ŒåŸæ¥ä½¿ç”¨1ä¸ª8GBå†…å­˜ã€50GBç£ç›˜çš„å®ä¾‹ï¼Œç°åœ¨ä½¿ç”¨ä¸‰ä¸ªç›¸åŒé…ç½®çš„å®ä¾‹ã€‚</li>\n</ul><p><img src=\"https://static001.geekbang.org/resource/image/7a/1a/7a512fec7eba789c6d098b834929701a.jpg?wh=2745*1365\" alt=\"\" title=\"çºµå‘æ‰©å±•å’Œæ¨ªå‘æ‰©å±•å¯¹æ¯”å›¾\"></p><p>é‚£ä¹ˆï¼Œè¿™ä¸¤ç§æ–¹å¼çš„ä¼˜ç¼ºç‚¹åˆ†åˆ«æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p><p>é¦–å…ˆï¼Œçºµå‘æ‰©å±•çš„å¥½å¤„æ˜¯ï¼Œ<strong>å®æ–½èµ·æ¥ç®€å•ã€ç›´æ¥</strong>ã€‚ä¸è¿‡ï¼Œè¿™ä¸ªæ–¹æ¡ˆä¹Ÿé¢ä¸´ä¸¤ä¸ªæ½œåœ¨çš„é—®é¢˜ã€‚</p><p>ç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œå½“ä½¿ç”¨RDBå¯¹æ•°æ®è¿›è¡ŒæŒä¹…åŒ–æ—¶ï¼Œå¦‚æœæ•°æ®é‡å¢åŠ ï¼Œéœ€è¦çš„å†…å­˜ä¹Ÿä¼šå¢åŠ ï¼Œä¸»çº¿ç¨‹forkå­è¿›ç¨‹æ—¶å°±å¯èƒ½ä¼šé˜»å¡ï¼ˆæ¯”å¦‚åˆšåˆšçš„ä¾‹å­ä¸­çš„æƒ…å†µï¼‰ã€‚ä¸è¿‡ï¼Œå¦‚æœä½ ä¸è¦æ±‚æŒä¹…åŒ–ä¿å­˜Redisæ•°æ®ï¼Œé‚£ä¹ˆï¼Œçºµå‘æ‰©å±•ä¼šæ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚</p><p>ä¸è¿‡ï¼Œè¿™æ—¶ï¼Œä½ è¿˜è¦é¢å¯¹ç¬¬äºŒä¸ªé—®é¢˜ï¼š<strong>çºµå‘æ‰©å±•ä¼šå—åˆ°ç¡¬ä»¶å’Œæˆæœ¬çš„é™åˆ¶</strong>ã€‚è¿™å¾ˆå®¹æ˜“ç†è§£ï¼Œæ¯•ç«Ÿï¼ŒæŠŠå†…å­˜ä»32GBæ‰©å±•åˆ°64GBè¿˜ç®—å®¹æ˜“ï¼Œä½†æ˜¯ï¼Œè¦æƒ³æ‰©å……åˆ°1TBï¼Œå°±ä¼šé¢ä¸´ç¡¬ä»¶å®¹é‡å’Œæˆæœ¬ä¸Šçš„é™åˆ¶äº†ã€‚</p><p>ä¸çºµå‘æ‰©å±•ç›¸æ¯”ï¼Œæ¨ªå‘æ‰©å±•æ˜¯ä¸€ä¸ªæ‰©å±•æ€§æ›´å¥½çš„æ–¹æ¡ˆã€‚è¿™æ˜¯å› ä¸ºï¼Œè¦æƒ³ä¿å­˜æ›´å¤šçš„æ•°æ®ï¼Œé‡‡ç”¨è¿™ç§æ–¹æ¡ˆçš„è¯ï¼Œåªç”¨å¢åŠ Redisçš„å®ä¾‹ä¸ªæ•°å°±è¡Œäº†ï¼Œä¸ç”¨æ‹…å¿ƒå•ä¸ªå®ä¾‹çš„ç¡¬ä»¶å’Œæˆæœ¬é™åˆ¶ã€‚<strong>åœ¨é¢å‘ç™¾ä¸‡ã€åƒä¸‡çº§åˆ«çš„ç”¨æˆ·è§„æ¨¡æ—¶ï¼Œæ¨ªå‘æ‰©å±•çš„Redisåˆ‡ç‰‡é›†ç¾¤ä¼šæ˜¯ä¸€ä¸ªéå¸¸å¥½çš„é€‰æ‹©</strong>ã€‚</p><p>ä¸è¿‡ï¼Œåœ¨åªä½¿ç”¨å•ä¸ªå®ä¾‹çš„æ—¶å€™ï¼Œæ•°æ®å­˜åœ¨å“ªå„¿ï¼Œå®¢æˆ·ç«¯è®¿é—®å“ªå„¿ï¼Œéƒ½æ˜¯éå¸¸æ˜ç¡®çš„ï¼Œä½†æ˜¯ï¼Œåˆ‡ç‰‡é›†ç¾¤ä¸å¯é¿å…åœ°æ¶‰åŠåˆ°å¤šä¸ªå®ä¾‹çš„åˆ†å¸ƒå¼ç®¡ç†é—®é¢˜ã€‚è¦æƒ³æŠŠåˆ‡ç‰‡é›†ç¾¤ç”¨èµ·æ¥ï¼Œæˆ‘ä»¬å°±éœ€è¦è§£å†³ä¸¤å¤§é—®é¢˜ï¼š</p><ul>\n<li>æ•°æ®åˆ‡ç‰‡åï¼Œåœ¨å¤šä¸ªå®ä¾‹ä¹‹é—´å¦‚ä½•åˆ†å¸ƒï¼Ÿ</li>\n<li>å®¢æˆ·ç«¯æ€ä¹ˆç¡®å®šæƒ³è¦è®¿é—®çš„æ•°æ®åœ¨å“ªä¸ªå®ä¾‹ä¸Šï¼Ÿ</li>\n</ul><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±ä¸€ä¸ªä¸ªåœ°è§£å†³ã€‚</p><h2>æ•°æ®åˆ‡ç‰‡å’Œå®ä¾‹çš„å¯¹åº”åˆ†å¸ƒå…³ç³»</h2><p>åœ¨åˆ‡ç‰‡é›†ç¾¤ä¸­ï¼Œæ•°æ®éœ€è¦åˆ†å¸ƒåœ¨ä¸åŒå®ä¾‹ä¸Šï¼Œé‚£ä¹ˆï¼Œæ•°æ®å’Œå®ä¾‹ä¹‹é—´å¦‚ä½•å¯¹åº”å‘¢ï¼Ÿè¿™å°±å’Œæ¥ä¸‹æ¥æˆ‘è¦è®²çš„Redis Clusteræ–¹æ¡ˆæœ‰å…³äº†ã€‚ä¸è¿‡ï¼Œæˆ‘ä»¬è¦å…ˆå¼„æ˜ç™½åˆ‡ç‰‡é›†ç¾¤å’ŒRedis Clusterçš„è”ç³»ä¸åŒºåˆ«ã€‚</p><p>å®é™…ä¸Šï¼Œåˆ‡ç‰‡é›†ç¾¤æ˜¯ä¸€ç§ä¿å­˜å¤§é‡æ•°æ®çš„é€šç”¨æœºåˆ¶ï¼Œè¿™ä¸ªæœºåˆ¶å¯ä»¥æœ‰ä¸åŒçš„å®ç°æ–¹æ¡ˆã€‚åœ¨Redis 3.0ä¹‹å‰ï¼Œå®˜æ–¹å¹¶æ²¡æœ‰é’ˆå¯¹åˆ‡ç‰‡é›†ç¾¤æä¾›å…·ä½“çš„æ–¹æ¡ˆã€‚ä»3.0å¼€å§‹ï¼Œå®˜æ–¹æä¾›äº†ä¸€ä¸ªåä¸ºRedis Clusterçš„æ–¹æ¡ˆï¼Œç”¨äºå®ç°åˆ‡ç‰‡é›†ç¾¤ã€‚Redis Clusteræ–¹æ¡ˆä¸­å°±è§„å®šäº†æ•°æ®å’Œå®ä¾‹çš„å¯¹åº”è§„åˆ™ã€‚</p><p>å…·ä½“æ¥è¯´ï¼ŒRedis Clusteræ–¹æ¡ˆé‡‡ç”¨å“ˆå¸Œæ§½ï¼ˆHash Slotï¼Œæ¥ä¸‹æ¥æˆ‘ä¼šç›´æ¥ç§°ä¹‹ä¸ºSlotï¼‰ï¼Œæ¥å¤„ç†æ•°æ®å’Œå®ä¾‹ä¹‹é—´çš„æ˜ å°„å…³ç³»ã€‚åœ¨Redis Clusteræ–¹æ¡ˆä¸­ï¼Œä¸€ä¸ªåˆ‡ç‰‡é›†ç¾¤å…±æœ‰16384ä¸ªå“ˆå¸Œæ§½ï¼Œè¿™äº›å“ˆå¸Œæ§½ç±»ä¼¼äºæ•°æ®åˆ†åŒºï¼Œæ¯ä¸ªé”®å€¼å¯¹éƒ½ä¼šæ ¹æ®å®ƒçš„keyï¼Œè¢«æ˜ å°„åˆ°ä¸€ä¸ªå“ˆå¸Œæ§½ä¸­ã€‚</p><p>å…·ä½“çš„æ˜ å°„è¿‡ç¨‹åˆ†ä¸ºä¸¤å¤§æ­¥ï¼šé¦–å…ˆæ ¹æ®é”®å€¼å¯¹çš„keyï¼ŒæŒ‰ç…§<a href=\"https://en.wikipedia.org/wiki/Cyclic_redundancy_check\">CRC16ç®—æ³•</a>è®¡ç®—ä¸€ä¸ª16 bitçš„å€¼ï¼›ç„¶åï¼Œå†ç”¨è¿™ä¸ª16bitå€¼å¯¹16384å–æ¨¡ï¼Œå¾—åˆ°0~16383èŒƒå›´å†…çš„æ¨¡æ•°ï¼Œæ¯ä¸ªæ¨¡æ•°ä»£è¡¨ä¸€ä¸ªç›¸åº”ç¼–å·çš„å“ˆå¸Œæ§½ã€‚å…³äºCRC16ç®—æ³•ï¼Œä¸æ˜¯è¿™èŠ‚è¯¾çš„é‡ç‚¹ï¼Œä½ ç®€å•çœ‹ä¸‹é“¾æ¥ä¸­çš„èµ„æ–™å°±å¯ä»¥äº†ã€‚</p><p>é‚£ä¹ˆï¼Œè¿™äº›å“ˆå¸Œæ§½åˆæ˜¯å¦‚ä½•è¢«æ˜ å°„åˆ°å…·ä½“çš„Rediså®ä¾‹ä¸Šçš„å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬åœ¨éƒ¨ç½²Redis Clusteræ–¹æ¡ˆæ—¶ï¼Œå¯ä»¥ä½¿ç”¨cluster createå‘½ä»¤åˆ›å»ºé›†ç¾¤ï¼Œæ­¤æ—¶ï¼ŒRedisä¼šè‡ªåŠ¨æŠŠè¿™äº›æ§½å¹³å‡åˆ†å¸ƒåœ¨é›†ç¾¤å®ä¾‹ä¸Šã€‚ä¾‹å¦‚ï¼Œå¦‚æœé›†ç¾¤ä¸­æœ‰Nä¸ªå®ä¾‹ï¼Œé‚£ä¹ˆï¼Œæ¯ä¸ªå®ä¾‹ä¸Šçš„æ§½ä¸ªæ•°ä¸º16384/Nä¸ªã€‚</p><p>å½“ç„¶ï¼Œ æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨cluster meetå‘½ä»¤æ‰‹åŠ¨å»ºç«‹å®ä¾‹é—´çš„è¿æ¥ï¼Œå½¢æˆé›†ç¾¤ï¼Œå†ä½¿ç”¨cluster addslotså‘½ä»¤ï¼ŒæŒ‡å®šæ¯ä¸ªå®ä¾‹ä¸Šçš„å“ˆå¸Œæ§½ä¸ªæ•°ã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾é›†ç¾¤ä¸­ä¸åŒRediså®ä¾‹çš„å†…å­˜å¤§å°é…ç½®ä¸ä¸€ï¼Œå¦‚æœæŠŠå“ˆå¸Œæ§½å‡åˆ†åœ¨å„ä¸ªå®ä¾‹ä¸Šï¼Œåœ¨ä¿å­˜ç›¸åŒæ•°é‡çš„é”®å€¼å¯¹æ—¶ï¼Œå’Œå†…å­˜å¤§çš„å®ä¾‹ç›¸æ¯”ï¼Œå†…å­˜å°çš„å®ä¾‹å°±ä¼šæœ‰æ›´å¤§çš„å®¹é‡å‹åŠ›ã€‚é‡åˆ°è¿™ç§æƒ…å†µæ—¶ï¼Œä½ å¯ä»¥æ ¹æ®ä¸åŒå®ä¾‹çš„èµ„æºé…ç½®æƒ…å†µï¼Œä½¿ç”¨cluster addslotså‘½ä»¤æ‰‹åŠ¨åˆ†é…å“ˆå¸Œæ§½ã€‚</p><p>ä¸ºäº†ä¾¿äºä½ ç†è§£ï¼Œæˆ‘ç”»ä¸€å¼ ç¤ºæ„å›¾æ¥è§£é‡Šä¸€ä¸‹ï¼Œæ•°æ®ã€å“ˆå¸Œæ§½ã€å®ä¾‹è¿™ä¸‰è€…çš„æ˜ å°„åˆ†å¸ƒæƒ…å†µã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/7d/ab/7d070c8b19730b308bfaabbe82c2f1ab.jpg?wh=2486*1266\" alt=\"\"></p><p>ç¤ºæ„å›¾ä¸­çš„åˆ‡ç‰‡é›†ç¾¤ä¸€å…±æœ‰3ä¸ªå®ä¾‹ï¼ŒåŒæ—¶å‡è®¾æœ‰5ä¸ªå“ˆå¸Œæ§½ï¼Œæˆ‘ä»¬é¦–å…ˆå¯ä»¥é€šè¿‡ä¸‹é¢çš„å‘½ä»¤æ‰‹åŠ¨åˆ†é…å“ˆå¸Œæ§½ï¼šå®ä¾‹1ä¿å­˜å“ˆå¸Œæ§½0å’Œ1ï¼Œå®ä¾‹2ä¿å­˜å“ˆå¸Œæ§½2å’Œ3ï¼Œå®ä¾‹3ä¿å­˜å“ˆå¸Œæ§½4ã€‚</p><pre><code>redis-cli -h 172.16.19.3 â€“p 6379 cluster addslots 0,1\nredis-cli -h 172.16.19.4 â€“p 6379 cluster addslots 2,3\nredis-cli -h 172.16.19.5 â€“p 6379 cluster addslots 4\n</code></pre><p>åœ¨é›†ç¾¤è¿è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œkey1å’Œkey2è®¡ç®—å®ŒCRC16å€¼åï¼Œå¯¹å“ˆå¸Œæ§½æ€»ä¸ªæ•°5å–æ¨¡ï¼Œå†æ ¹æ®å„è‡ªçš„æ¨¡æ•°ç»“æœï¼Œå°±å¯ä»¥è¢«æ˜ å°„åˆ°å¯¹åº”çš„å®ä¾‹1å’Œå®ä¾‹3ä¸Šäº†ã€‚</p><p>å¦å¤–ï¼Œæˆ‘å†ç»™ä½ ä¸€ä¸ªå°æé†’ï¼Œ<strong>åœ¨æ‰‹åŠ¨åˆ†é…å“ˆå¸Œæ§½æ—¶ï¼Œéœ€è¦æŠŠ16384ä¸ªæ§½éƒ½åˆ†é…å®Œï¼Œå¦åˆ™Redisé›†ç¾¤æ— æ³•æ­£å¸¸å·¥ä½œ</strong>ã€‚</p><p>å¥½äº†ï¼Œé€šè¿‡å“ˆå¸Œæ§½ï¼Œåˆ‡ç‰‡é›†ç¾¤å°±å®ç°äº†æ•°æ®åˆ°å“ˆå¸Œæ§½ã€å“ˆå¸Œæ§½å†åˆ°å®ä¾‹çš„åˆ†é…ã€‚ä½†æ˜¯ï¼Œå³ä½¿å®ä¾‹æœ‰äº†å“ˆå¸Œæ§½çš„æ˜ å°„ä¿¡æ¯ï¼Œå®¢æˆ·ç«¯åˆæ˜¯æ€ä¹ˆçŸ¥é“è¦è®¿é—®çš„æ•°æ®åœ¨å“ªä¸ªå®ä¾‹ä¸Šå‘¢ï¼Ÿæ¥ä¸‹æ¥ï¼Œæˆ‘å°±æ¥å’Œä½ èŠèŠã€‚</p><h2>å®¢æˆ·ç«¯å¦‚ä½•å®šä½æ•°æ®ï¼Ÿ</h2><p>åœ¨å®šä½é”®å€¼å¯¹æ•°æ®æ—¶ï¼Œå®ƒæ‰€å¤„çš„å“ˆå¸Œæ§½æ˜¯å¯ä»¥é€šè¿‡è®¡ç®—å¾—åˆ°çš„ï¼Œè¿™ä¸ªè®¡ç®—å¯ä»¥åœ¨å®¢æˆ·ç«¯å‘é€è¯·æ±‚æ—¶æ¥æ‰§è¡Œã€‚ä½†æ˜¯ï¼Œè¦è¿›ä¸€æ­¥å®šä½åˆ°å®ä¾‹ï¼Œè¿˜éœ€è¦çŸ¥é“å“ˆå¸Œæ§½åˆ†å¸ƒåœ¨å“ªä¸ªå®ä¾‹ä¸Šã€‚</p><p>ä¸€èˆ¬æ¥è¯´ï¼Œå®¢æˆ·ç«¯å’Œé›†ç¾¤å®ä¾‹å»ºç«‹è¿æ¥åï¼Œå®ä¾‹å°±ä¼šæŠŠå“ˆå¸Œæ§½çš„åˆ†é…ä¿¡æ¯å‘ç»™å®¢æˆ·ç«¯ã€‚ä½†æ˜¯ï¼Œåœ¨é›†ç¾¤åˆšåˆšåˆ›å»ºçš„æ—¶å€™ï¼Œæ¯ä¸ªå®ä¾‹åªçŸ¥é“è‡ªå·±è¢«åˆ†é…äº†å“ªäº›å“ˆå¸Œæ§½ï¼Œæ˜¯ä¸çŸ¥é“å…¶ä»–å®ä¾‹æ‹¥æœ‰çš„å“ˆå¸Œæ§½ä¿¡æ¯çš„ã€‚</p><p>é‚£ä¹ˆï¼Œå®¢æˆ·ç«¯ä¸ºä»€ä¹ˆå¯ä»¥åœ¨è®¿é—®ä»»ä½•ä¸€ä¸ªå®ä¾‹æ—¶ï¼Œéƒ½èƒ½è·å¾—æ‰€æœ‰çš„å“ˆå¸Œæ§½ä¿¡æ¯å‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºï¼ŒRediså®ä¾‹ä¼šæŠŠè‡ªå·±çš„å“ˆå¸Œæ§½ä¿¡æ¯å‘ç»™å’Œå®ƒç›¸è¿æ¥çš„å…¶å®ƒå®ä¾‹ï¼Œæ¥å®Œæˆå“ˆå¸Œæ§½åˆ†é…ä¿¡æ¯çš„æ‰©æ•£ã€‚å½“å®ä¾‹ä¹‹é—´ç›¸äº’è¿æ¥åï¼Œæ¯ä¸ªå®ä¾‹å°±æœ‰æ‰€æœ‰å“ˆå¸Œæ§½çš„æ˜ å°„å…³ç³»äº†ã€‚</p><p>å®¢æˆ·ç«¯æ”¶åˆ°å“ˆå¸Œæ§½ä¿¡æ¯åï¼Œä¼šæŠŠå“ˆå¸Œæ§½ä¿¡æ¯ç¼“å­˜åœ¨æœ¬åœ°ã€‚å½“å®¢æˆ·ç«¯è¯·æ±‚é”®å€¼å¯¹æ—¶ï¼Œä¼šå…ˆè®¡ç®—é”®æ‰€å¯¹åº”çš„å“ˆå¸Œæ§½ï¼Œç„¶åå°±å¯ä»¥ç»™ç›¸åº”çš„å®ä¾‹å‘é€è¯·æ±‚äº†ã€‚</p><p>ä½†æ˜¯ï¼Œåœ¨é›†ç¾¤ä¸­ï¼Œå®ä¾‹å’Œå“ˆå¸Œæ§½çš„å¯¹åº”å…³ç³»å¹¶ä¸æ˜¯ä¸€æˆä¸å˜çš„ï¼Œæœ€å¸¸è§çš„å˜åŒ–æœ‰ä¸¤ä¸ªï¼š</p><ul>\n<li>åœ¨é›†ç¾¤ä¸­ï¼Œå®ä¾‹æœ‰æ–°å¢æˆ–åˆ é™¤ï¼ŒRediséœ€è¦é‡æ–°åˆ†é…å“ˆå¸Œæ§½ï¼›</li>\n<li>ä¸ºäº†è´Ÿè½½å‡è¡¡ï¼ŒRediséœ€è¦æŠŠå“ˆå¸Œæ§½åœ¨æ‰€æœ‰å®ä¾‹ä¸Šé‡æ–°åˆ†å¸ƒä¸€éã€‚</li>\n</ul><p>æ­¤æ—¶ï¼Œå®ä¾‹ä¹‹é—´è¿˜å¯ä»¥é€šè¿‡ç›¸äº’ä¼ é€’æ¶ˆæ¯ï¼Œè·å¾—æœ€æ–°çš„å“ˆå¸Œæ§½åˆ†é…ä¿¡æ¯ï¼Œä½†æ˜¯ï¼Œå®¢æˆ·ç«¯æ˜¯æ— æ³•ä¸»åŠ¨æ„ŸçŸ¥è¿™äº›å˜åŒ–çš„ã€‚è¿™å°±ä¼šå¯¼è‡´ï¼Œå®ƒç¼“å­˜çš„åˆ†é…ä¿¡æ¯å’Œæœ€æ–°çš„åˆ†é…ä¿¡æ¯å°±ä¸ä¸€è‡´äº†ï¼Œé‚£è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ</p><p>Redis Clusteræ–¹æ¡ˆæä¾›äº†ä¸€ç§<strong>é‡å®šå‘æœºåˆ¶ï¼Œ</strong>æ‰€è°“çš„â€œé‡å®šå‘â€ï¼Œå°±æ˜¯æŒ‡ï¼Œå®¢æˆ·ç«¯ç»™ä¸€ä¸ªå®ä¾‹å‘é€æ•°æ®è¯»å†™æ“ä½œæ—¶ï¼Œè¿™ä¸ªå®ä¾‹ä¸Šå¹¶æ²¡æœ‰ç›¸åº”çš„æ•°æ®ï¼Œå®¢æˆ·ç«¯è¦å†ç»™ä¸€ä¸ªæ–°å®ä¾‹å‘é€æ“ä½œå‘½ä»¤ã€‚</p><p>é‚£å®¢æˆ·ç«¯åˆæ˜¯æ€ä¹ˆçŸ¥é“é‡å®šå‘æ—¶çš„æ–°å®ä¾‹çš„è®¿é—®åœ°å€å‘¢ï¼Ÿå½“å®¢æˆ·ç«¯æŠŠä¸€ä¸ªé”®å€¼å¯¹çš„æ“ä½œè¯·æ±‚å‘ç»™ä¸€ä¸ªå®ä¾‹æ—¶ï¼Œå¦‚æœè¿™ä¸ªå®ä¾‹ä¸Šå¹¶æ²¡æœ‰è¿™ä¸ªé”®å€¼å¯¹æ˜ å°„çš„å“ˆå¸Œæ§½ï¼Œé‚£ä¹ˆï¼Œè¿™ä¸ªå®ä¾‹å°±ä¼šç»™å®¢æˆ·ç«¯è¿”å›ä¸‹é¢çš„MOVEDå‘½ä»¤å“åº”ç»“æœï¼Œè¿™ä¸ªç»“æœä¸­å°±åŒ…å«äº†æ–°å®ä¾‹çš„è®¿é—®åœ°å€ã€‚</p><pre><code>GET hello:key\n(error) MOVED 13320 172.16.19.5:6379\n</code></pre><p>å…¶ä¸­ï¼ŒMOVEDå‘½ä»¤è¡¨ç¤ºï¼Œå®¢æˆ·ç«¯è¯·æ±‚çš„é”®å€¼å¯¹æ‰€åœ¨çš„å“ˆå¸Œæ§½13320ï¼Œå®é™…æ˜¯åœ¨172.16.19.5è¿™ä¸ªå®ä¾‹ä¸Šã€‚é€šè¿‡è¿”å›çš„MOVEDå‘½ä»¤ï¼Œå°±ç›¸å½“äºæŠŠå“ˆå¸Œæ§½æ‰€åœ¨çš„æ–°å®ä¾‹çš„ä¿¡æ¯å‘Šè¯‰ç»™å®¢æˆ·ç«¯äº†ã€‚è¿™æ ·ä¸€æ¥ï¼Œå®¢æˆ·ç«¯å°±å¯ä»¥ç›´æ¥å’Œ172.16.19.5è¿æ¥ï¼Œå¹¶å‘é€æ“ä½œè¯·æ±‚äº†ã€‚</p><p>æˆ‘ç”»ä¸€å¼ å›¾æ¥è¯´æ˜ä¸€ä¸‹ï¼ŒMOVEDé‡å®šå‘å‘½ä»¤çš„ä½¿ç”¨æ–¹æ³•ã€‚å¯ä»¥çœ‹åˆ°ï¼Œç”±äºè´Ÿè½½å‡è¡¡ï¼ŒSlot  2ä¸­çš„æ•°æ®å·²ç»ä»å®ä¾‹2è¿ç§»åˆ°äº†å®ä¾‹3ï¼Œä½†æ˜¯ï¼Œå®¢æˆ·ç«¯ç¼“å­˜ä»ç„¶è®°å½•ç€â€œSlot 2åœ¨å®ä¾‹2â€çš„ä¿¡æ¯ï¼Œæ‰€ä»¥ä¼šç»™å®ä¾‹2å‘é€å‘½ä»¤ã€‚å®ä¾‹2ç»™å®¢æˆ·ç«¯è¿”å›ä¸€æ¡MOVEDå‘½ä»¤ï¼ŒæŠŠSlot  2çš„æœ€æ–°ä½ç½®ï¼ˆä¹Ÿå°±æ˜¯åœ¨å®ä¾‹3ä¸Šï¼‰ï¼Œè¿”å›ç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯å°±ä¼šå†æ¬¡å‘å®ä¾‹3å‘é€è¯·æ±‚ï¼ŒåŒæ—¶è¿˜ä¼šæ›´æ–°æœ¬åœ°ç¼“å­˜ï¼ŒæŠŠSlot  2ä¸å®ä¾‹çš„å¯¹åº”å…³ç³»æ›´æ–°è¿‡æ¥ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/35/09/350abedefcdbc39d6a8a8f1874eb0809.jpg?wh=2818*2250\" alt=\"\" title=\"å®¢æˆ·ç«¯MOVEDé‡å®šå‘å‘½ä»¤\"></p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ä¸Šå›¾ä¸­ï¼Œå½“å®¢æˆ·ç«¯ç»™å®ä¾‹2å‘é€å‘½ä»¤æ—¶ï¼ŒSlot 2ä¸­çš„æ•°æ®å·²ç»å…¨éƒ¨è¿ç§»åˆ°äº†å®ä¾‹3ã€‚åœ¨å®é™…åº”ç”¨æ—¶ï¼Œå¦‚æœSlot 2ä¸­çš„æ•°æ®æ¯”è¾ƒå¤šï¼Œå°±å¯èƒ½ä¼šå‡ºç°ä¸€ç§æƒ…å†µï¼šå®¢æˆ·ç«¯å‘å®ä¾‹2å‘é€è¯·æ±‚ï¼Œä½†æ­¤æ—¶ï¼ŒSlot 2ä¸­çš„æ•°æ®åªæœ‰ä¸€éƒ¨åˆ†è¿ç§»åˆ°äº†å®ä¾‹3ï¼Œè¿˜æœ‰éƒ¨åˆ†æ•°æ®æ²¡æœ‰è¿ç§»ã€‚åœ¨è¿™ç§è¿ç§»éƒ¨åˆ†å®Œæˆçš„æƒ…å†µä¸‹ï¼Œå®¢æˆ·ç«¯å°±ä¼šæ”¶åˆ°ä¸€æ¡ASKæŠ¥é”™ä¿¡æ¯ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>GET hello:key\n(error) ASK 13320 172.16.19.5:6379\n</code></pre><p>è¿™ä¸ªç»“æœä¸­çš„ASKå‘½ä»¤å°±è¡¨ç¤ºï¼Œå®¢æˆ·ç«¯è¯·æ±‚çš„é”®å€¼å¯¹æ‰€åœ¨çš„å“ˆå¸Œæ§½13320ï¼Œåœ¨172.16.19.5è¿™ä¸ªå®ä¾‹ä¸Šï¼Œä½†æ˜¯è¿™ä¸ªå“ˆå¸Œæ§½æ­£åœ¨è¿ç§»ã€‚æ­¤æ—¶ï¼Œå®¢æˆ·ç«¯éœ€è¦å…ˆç»™172.16.19.5è¿™ä¸ªå®ä¾‹å‘é€ä¸€ä¸ªASKINGå‘½ä»¤ã€‚è¿™ä¸ªå‘½ä»¤çš„æ„æ€æ˜¯ï¼Œè®©è¿™ä¸ªå®ä¾‹å…è®¸æ‰§è¡Œå®¢æˆ·ç«¯æ¥ä¸‹æ¥å‘é€çš„å‘½ä»¤ã€‚ç„¶åï¼Œå®¢æˆ·ç«¯å†å‘è¿™ä¸ªå®ä¾‹å‘é€GETå‘½ä»¤ï¼Œä»¥è¯»å–æ•°æ®ã€‚</p><p>çœ‹èµ·æ¥å¥½åƒæœ‰ç‚¹å¤æ‚ï¼Œæˆ‘å†å€ŸåŠ©å›¾ç‰‡æ¥è§£é‡Šä¸€ä¸‹ã€‚</p><p>åœ¨ä¸‹å›¾ä¸­ï¼ŒSlot 2æ­£åœ¨ä»å®ä¾‹2å¾€å®ä¾‹3è¿ç§»ï¼Œkey1å’Œkey2å·²ç»è¿ç§»è¿‡å»ï¼Œkey3å’Œkey4è¿˜åœ¨å®ä¾‹2ã€‚å®¢æˆ·ç«¯å‘å®ä¾‹2è¯·æ±‚key2åï¼Œå°±ä¼šæ”¶åˆ°å®ä¾‹2è¿”å›çš„ASKå‘½ä»¤ã€‚</p><p>ASKå‘½ä»¤è¡¨ç¤ºä¸¤å±‚å«ä¹‰ï¼šç¬¬ä¸€ï¼Œè¡¨æ˜Slotæ•°æ®è¿˜åœ¨è¿ç§»ä¸­ï¼›ç¬¬äºŒï¼ŒASKå‘½ä»¤æŠŠå®¢æˆ·ç«¯æ‰€è¯·æ±‚æ•°æ®çš„æœ€æ–°å®ä¾‹åœ°å€è¿”å›ç»™å®¢æˆ·ç«¯ï¼Œæ­¤æ—¶ï¼Œå®¢æˆ·ç«¯éœ€è¦ç»™å®ä¾‹3å‘é€ASKINGå‘½ä»¤ï¼Œç„¶åå†å‘é€æ“ä½œå‘½ä»¤ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/e9/b0/e93ae7f4edf30724d58bf68yy714eeb0.jpg?wh=3000*2250\" alt=\"\" title=\"å®¢æˆ·ç«¯ASKé‡å®šå‘å‘½ä»¤\"></p><p>å’ŒMOVEDå‘½ä»¤ä¸åŒï¼Œ<strong>ASKå‘½ä»¤å¹¶ä¸ä¼šæ›´æ–°å®¢æˆ·ç«¯ç¼“å­˜çš„å“ˆå¸Œæ§½åˆ†é…ä¿¡æ¯</strong>ã€‚æ‰€ä»¥ï¼Œåœ¨ä¸Šå›¾ä¸­ï¼Œå¦‚æœå®¢æˆ·ç«¯å†æ¬¡è¯·æ±‚Slot 2ä¸­çš„æ•°æ®ï¼Œå®ƒè¿˜æ˜¯ä¼šç»™å®ä¾‹2å‘é€è¯·æ±‚ã€‚è¿™ä¹Ÿå°±æ˜¯è¯´ï¼ŒASKå‘½ä»¤çš„ä½œç”¨åªæ˜¯è®©å®¢æˆ·ç«¯èƒ½ç»™æ–°å®ä¾‹å‘é€ä¸€æ¬¡è¯·æ±‚ï¼Œè€Œä¸åƒMOVEDå‘½ä»¤é‚£æ ·ï¼Œä¼šæ›´æ”¹æœ¬åœ°ç¼“å­˜ï¼Œè®©åç»­æ‰€æœ‰å‘½ä»¤éƒ½å‘å¾€æ–°å®ä¾‹ã€‚</p><h2>å°ç»“</h2><p>è¿™èŠ‚è¯¾ï¼Œæˆ‘ä»¬å­¦ä¹ äº†åˆ‡ç‰‡é›†ç¾¤åœ¨ä¿å­˜å¤§é‡æ•°æ®æ–¹é¢çš„ä¼˜åŠ¿ï¼Œä»¥åŠåŸºäºå“ˆå¸Œæ§½çš„æ•°æ®åˆ†å¸ƒæœºåˆ¶å’Œå®¢æˆ·ç«¯å®šä½é”®å€¼å¯¹çš„æ–¹æ³•ã€‚</p><p>åœ¨åº”å¯¹æ•°æ®é‡æ‰©å®¹æ—¶ï¼Œè™½ç„¶å¢åŠ å†…å­˜è¿™ç§çºµå‘æ‰©å±•çš„æ–¹æ³•ç®€å•ç›´æ¥ï¼Œä½†æ˜¯ä¼šé€ æˆæ•°æ®åº“çš„å†…å­˜è¿‡å¤§ï¼Œå¯¼è‡´æ€§èƒ½å˜æ…¢ã€‚Redisåˆ‡ç‰‡é›†ç¾¤æä¾›äº†æ¨ªå‘æ‰©å±•çš„æ¨¡å¼ï¼Œä¹Ÿå°±æ˜¯ä½¿ç”¨å¤šä¸ªå®ä¾‹ï¼Œå¹¶ç»™æ¯ä¸ªå®ä¾‹é…ç½®ä¸€å®šæ•°é‡çš„å“ˆå¸Œæ§½ï¼Œæ•°æ®å¯ä»¥é€šè¿‡é”®çš„å“ˆå¸Œå€¼æ˜ å°„åˆ°å“ˆå¸Œæ§½ï¼Œå†é€šè¿‡å“ˆå¸Œæ§½åˆ†æ•£ä¿å­˜åˆ°ä¸åŒçš„å®ä¾‹ä¸Šã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯æ‰©å±•æ€§å¥½ï¼Œä¸ç®¡æœ‰å¤šå°‘æ•°æ®ï¼Œåˆ‡ç‰‡é›†ç¾¤éƒ½èƒ½åº”å¯¹ã€‚</p><p>å¦å¤–ï¼Œé›†ç¾¤çš„å®ä¾‹å¢å‡ï¼Œæˆ–è€…æ˜¯ä¸ºäº†å®ç°è´Ÿè½½å‡è¡¡è€Œè¿›è¡Œçš„æ•°æ®é‡æ–°åˆ†å¸ƒï¼Œä¼šå¯¼è‡´å“ˆå¸Œæ§½å’Œå®ä¾‹çš„æ˜ å°„å…³ç³»å‘ç”Ÿå˜åŒ–ï¼Œå®¢æˆ·ç«¯å‘é€è¯·æ±‚æ—¶ï¼Œä¼šæ”¶åˆ°å‘½ä»¤æ‰§è¡ŒæŠ¥é”™ä¿¡æ¯ã€‚äº†è§£äº†MOVEDå’ŒASKå‘½ä»¤ï¼Œä½ å°±ä¸ä¼šä¸ºè¿™ç±»æŠ¥é”™è€Œå¤´ç–¼äº†ã€‚</p><p>æˆ‘åˆšåˆšè¯´è¿‡ï¼Œåœ¨Redis 3.0 ä¹‹å‰ï¼ŒRediså®˜æ–¹å¹¶æ²¡æœ‰æä¾›åˆ‡ç‰‡é›†ç¾¤æ–¹æ¡ˆï¼Œä½†æ˜¯ï¼Œå…¶å®å½“æ—¶ä¸šç•Œå·²ç»æœ‰äº†ä¸€äº›åˆ‡ç‰‡é›†ç¾¤çš„æ–¹æ¡ˆï¼Œä¾‹å¦‚åŸºäºå®¢æˆ·ç«¯åˆ†åŒºçš„ShardedJedisï¼ŒåŸºäºä»£ç†çš„Codisã€Twemproxyç­‰ã€‚è¿™äº›æ–¹æ¡ˆçš„åº”ç”¨æ—©äºRedis Clusteræ–¹æ¡ˆï¼Œåœ¨æ”¯æ’‘çš„é›†ç¾¤å®ä¾‹è§„æ¨¡ã€é›†ç¾¤ç¨³å®šæ€§ã€å®¢æˆ·ç«¯å‹å¥½æ€§æ–¹é¢ä¹Ÿéƒ½æœ‰ç€å„è‡ªçš„ä¼˜åŠ¿ï¼Œæˆ‘ä¼šåœ¨åé¢çš„è¯¾ç¨‹ä¸­ï¼Œä¸“é—¨å’Œä½ èŠèŠè¿™äº›æ–¹æ¡ˆçš„å®ç°æœºåˆ¶ï¼Œä»¥åŠå®è·µç»éªŒã€‚è¿™æ ·ä¸€æ¥ï¼Œå½“ä½ å†ç¢°åˆ°ä¸šåŠ¡å‘å±•å¸¦æ¥çš„æ•°æ®é‡å·¨å¤§çš„éš¾é¢˜æ—¶ï¼Œå°±å¯ä»¥æ ¹æ®è¿™äº›æ–¹æ¡ˆçš„ç‰¹ç‚¹ï¼Œé€‰æ‹©åˆé€‚çš„æ–¹æ¡ˆå®ç°åˆ‡ç‰‡é›†ç¾¤ï¼Œä»¥åº”å¯¹ä¸šåŠ¡éœ€æ±‚äº†ã€‚</p><h2>æ¯è¯¾ä¸€é—®</h2><p>æŒ‰ç…§æƒ¯ä¾‹ï¼Œç»™ä½ æä¸€ä¸ªå°é—®é¢˜ï¼šRedis Clusteræ–¹æ¡ˆé€šè¿‡å“ˆå¸Œæ§½çš„æ–¹å¼æŠŠé”®å€¼å¯¹åˆ†é…åˆ°ä¸åŒçš„å®ä¾‹ä¸Šï¼Œè¿™ä¸ªè¿‡ç¨‹éœ€è¦å¯¹é”®å€¼å¯¹çš„keyåšCRCè®¡ç®—ï¼Œç„¶åå†å’Œå“ˆå¸Œæ§½åšæ˜ å°„ï¼Œè¿™æ ·åšæœ‰ä»€ä¹ˆå¥½å¤„å—ï¼Ÿå¦‚æœç”¨ä¸€ä¸ªè¡¨ç›´æ¥æŠŠé”®å€¼å¯¹å’Œå®ä¾‹çš„å¯¹åº”å…³ç³»è®°å½•ä¸‹æ¥ï¼ˆä¾‹å¦‚é”®å€¼å¯¹1åœ¨å®ä¾‹2ä¸Šï¼Œé”®å€¼å¯¹2åœ¨å®ä¾‹1ä¸Šï¼‰ï¼Œè¿™æ ·å°±ä¸ç”¨è®¡ç®—keyå’Œå“ˆå¸Œæ§½çš„å¯¹åº”å…³ç³»äº†ï¼Œåªç”¨æŸ¥è¡¨å°±è¡Œäº†ï¼ŒRedisä¸ºä»€ä¹ˆä¸è¿™ä¹ˆåšå‘¢ï¼Ÿ</p><p>æ¬¢è¿ä½ åœ¨ç•™è¨€åŒºç•…æ‰€æ¬²è¨€ï¼Œå¦‚æœä½ è§‰å¾—æœ‰æ”¶è·ï¼Œä¹Ÿå¸Œæœ›ä½ èƒ½å¸®æˆ‘æŠŠä»Šå¤©çš„å†…å®¹åˆ†äº«ç»™ä½ çš„æœ‹å‹ï¼Œå¸®åŠ©æ›´å¤šäººè§£å†³åˆ‡ç‰‡é›†ç¾¤çš„é—®é¢˜ã€‚</p>","comments":[{"had_liked":false,"id":243679,"user_name":"Kaito","can_delete":false,"product_type":"c1","uid":1020042,"ip_address":"","ucode":"79775FA35A95F2","user_header":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","comment_is_top":false,"comment_ctime":1598248609,"is_pvip":true,"discussion_count":92,"race_medal":0,"score":"3579306006177","product_id":100056701,"comment_content":"Redis Clusterä¸é‡‡ç”¨æŠŠkeyç›´æ¥æ˜ å°„åˆ°å®ä¾‹çš„æ–¹å¼ï¼Œè€Œé‡‡ç”¨å“ˆå¸Œæ§½çš„æ–¹å¼åŸå› ï¼š<br><br>1ã€æ•´ä¸ªé›†ç¾¤å­˜å‚¨keyçš„æ•°é‡æ˜¯æ— æ³•é¢„ä¼°çš„ï¼Œkeyçš„æ•°é‡éå¸¸å¤šæ—¶ï¼Œç›´æ¥è®°å½•æ¯ä¸ªkeyå¯¹åº”çš„å®ä¾‹æ˜ å°„å…³ç³»ï¼Œè¿™ä¸ªæ˜ å°„è¡¨ä¼šéå¸¸åºå¤§ï¼Œè¿™ä¸ªæ˜ å°„è¡¨æ— è®ºæ˜¯å­˜å‚¨åœ¨æœåŠ¡ç«¯è¿˜æ˜¯å®¢æˆ·ç«¯éƒ½å ç”¨äº†éå¸¸å¤§çš„å†…å­˜ç©ºé—´ã€‚<br><br>2ã€Redis Clusteré‡‡ç”¨æ— ä¸­å¿ƒåŒ–çš„æ¨¡å¼ï¼ˆæ— proxyï¼Œå®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯ç›´è¿ï¼‰ï¼Œå®¢æˆ·ç«¯åœ¨æŸä¸ªèŠ‚ç‚¹è®¿é—®ä¸€ä¸ªkeyï¼Œå¦‚æœè¿™ä¸ªkeyä¸åœ¨è¿™ä¸ªèŠ‚ç‚¹ä¸Šï¼Œè¿™ä¸ªèŠ‚ç‚¹éœ€è¦æœ‰çº æ­£å®¢æˆ·ç«¯è·¯ç”±åˆ°æ­£ç¡®èŠ‚ç‚¹çš„èƒ½åŠ›ï¼ˆMOVEDå“åº”ï¼‰ï¼Œè¿™å°±éœ€è¦èŠ‚ç‚¹ä¹‹é—´äº’ç›¸äº¤æ¢è·¯ç”±è¡¨ï¼Œæ¯ä¸ªèŠ‚ç‚¹æ‹¥æœ‰æ•´ä¸ªé›†ç¾¤å®Œæ•´çš„è·¯ç”±å…³ç³»ã€‚å¦‚æœå­˜å‚¨çš„éƒ½æ˜¯keyä¸å®ä¾‹çš„å¯¹åº”å…³ç³»ï¼ŒèŠ‚ç‚¹ä¹‹é—´äº¤æ¢ä¿¡æ¯ä¹Ÿä¼šå˜å¾—éå¸¸åºå¤§ï¼Œæ¶ˆè€—è¿‡å¤šçš„ç½‘ç»œèµ„æºï¼Œè€Œä¸”å°±ç®—äº¤æ¢å®Œæˆï¼Œç›¸å½“äºæ¯ä¸ªèŠ‚ç‚¹éƒ½éœ€è¦é¢å¤–å­˜å‚¨å…¶ä»–èŠ‚ç‚¹çš„è·¯ç”±è¡¨ï¼Œå†…å­˜å ç”¨è¿‡å¤§é€ æˆèµ„æºæµªè´¹ã€‚<br><br>3ã€å½“é›†ç¾¤åœ¨æ‰©å®¹ã€ç¼©å®¹ã€æ•°æ®å‡è¡¡æ—¶ï¼ŒèŠ‚ç‚¹ä¹‹é—´ä¼šå‘ç”Ÿæ•°æ®è¿ç§»ï¼Œè¿ç§»æ—¶éœ€è¦ä¿®æ”¹æ¯ä¸ªkeyçš„æ˜ å°„å…³ç³»ï¼Œç»´æŠ¤æˆæœ¬é«˜ã€‚<br><br>4ã€è€Œåœ¨ä¸­é—´å¢åŠ ä¸€å±‚å“ˆå¸Œæ§½ï¼Œå¯ä»¥æŠŠæ•°æ®å’ŒèŠ‚ç‚¹è§£è€¦ï¼Œkeyé€šè¿‡Hashè®¡ç®—ï¼Œåªéœ€è¦å…³å¿ƒæ˜ å°„åˆ°äº†å“ªä¸ªå“ˆå¸Œæ§½ï¼Œç„¶åå†é€šè¿‡å“ˆå¸Œæ§½å’ŒèŠ‚ç‚¹çš„æ˜ å°„è¡¨æ‰¾åˆ°èŠ‚ç‚¹ï¼Œç›¸å½“äºæ¶ˆè€—äº†å¾ˆå°‘çš„CPUèµ„æºï¼Œä¸ä½†è®©æ•°æ®åˆ†å¸ƒæ›´å‡åŒ€ï¼Œè¿˜å¯ä»¥è®©è¿™ä¸ªæ˜ å°„è¡¨å˜å¾—å¾ˆå°ï¼Œåˆ©äºå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¿å­˜ï¼ŒèŠ‚ç‚¹ä¹‹é—´äº¤æ¢ä¿¡æ¯æ—¶ä¹Ÿå˜å¾—è½»é‡ã€‚<br><br>5ã€å½“é›†ç¾¤åœ¨æ‰©å®¹ã€ç¼©å®¹ã€æ•°æ®å‡è¡¡æ—¶ï¼ŒèŠ‚ç‚¹ä¹‹é—´çš„æ“ä½œä¾‹å¦‚æ•°æ®è¿ç§»ï¼Œéƒ½ä»¥å“ˆå¸Œæ§½ä¸ºåŸºæœ¬å•ä½è¿›è¡Œæ“ä½œï¼Œç®€åŒ–äº†èŠ‚ç‚¹æ‰©å®¹ã€ç¼©å®¹çš„éš¾åº¦ï¼Œä¾¿äºé›†ç¾¤çš„ç»´æŠ¤å’Œç®¡ç†ã€‚<br><br>å¦å¤–ï¼Œæˆ‘æƒ³è¡¥å……ä¸€ä¸‹Redisé›†ç¾¤ç›¸å…³çš„çŸ¥è¯†ï¼Œä»¥åŠæˆ‘çš„ç†è§£ï¼š<br><br>Redisä½¿ç”¨é›†ç¾¤æ–¹æ¡ˆå°±æ˜¯ä¸ºäº†è§£å†³å•ä¸ªèŠ‚ç‚¹æ•°æ®é‡å¤§ã€å†™å…¥é‡å¤§äº§ç”Ÿçš„æ€§èƒ½ç“¶é¢ˆçš„é—®é¢˜ã€‚å¤šä¸ªèŠ‚ç‚¹ç»„æˆä¸€ä¸ªé›†ç¾¤ï¼Œå¯ä»¥æé«˜é›†ç¾¤çš„æ€§èƒ½å’Œå¯é æ€§ï¼Œä½†éšä¹‹è€Œæ¥çš„å°±æ˜¯é›†ç¾¤çš„ç®¡ç†é—®é¢˜ï¼Œæœ€æ ¸å¿ƒé—®é¢˜æœ‰2ä¸ªï¼šè¯·æ±‚è·¯ç”±ã€æ•°æ®è¿ç§»ï¼ˆæ‰©å®¹&#47;ç¼©å®¹&#47;æ•°æ®å¹³è¡¡ï¼‰ã€‚<br><br>1ã€è¯·æ±‚è·¯ç”±ï¼šä¸€èˆ¬éƒ½æ˜¯é‡‡ç”¨å“ˆå¸Œæ§½çš„æ˜ å°„å…³ç³»è¡¨æ‰¾åˆ°æŒ‡å®šèŠ‚ç‚¹ï¼Œç„¶ååœ¨è¿™ä¸ªèŠ‚ç‚¹ä¸Šæ“ä½œçš„æ–¹æ¡ˆã€‚<br><br>Redis Clusteråœ¨æ¯ä¸ªèŠ‚ç‚¹è®°å½•å®Œæ•´çš„æ˜ å°„å…³ç³»(ä¾¿äºçº æ­£å®¢æˆ·ç«¯çš„é”™è¯¯è·¯ç”±è¯·æ±‚)ï¼ŒåŒæ—¶ä¹Ÿå‘ç»™å®¢æˆ·ç«¯è®©å®¢æˆ·ç«¯ç¼“å­˜ä¸€ä»½ï¼Œä¾¿äºå®¢æˆ·ç«¯ç›´æ¥æ‰¾åˆ°æŒ‡å®šèŠ‚ç‚¹ï¼Œå®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯é…åˆå®Œæˆæ•°æ®çš„è·¯ç”±ï¼Œè¿™éœ€è¦ä¸šåŠ¡åœ¨ä½¿ç”¨Redis Clusteræ—¶ï¼Œå¿…é¡»å‡çº§ä¸ºé›†ç¾¤ç‰ˆçš„SDKæ‰æ”¯æŒå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„åè®®äº¤äº’ã€‚<br><br>å…¶ä»–Redisé›†ç¾¤åŒ–æ–¹æ¡ˆä¾‹å¦‚Twemproxyã€Codiséƒ½æ˜¯ä¸­å¿ƒåŒ–æ¨¡å¼ï¼ˆå¢åŠ Proxyå±‚ï¼‰ï¼Œå®¢æˆ·ç«¯é€šè¿‡Proxyå¯¹æ•´ä¸ªé›†ç¾¤è¿›è¡Œæ“ä½œï¼ŒProxyåé¢å¯ä»¥æŒ‚Nå¤šä¸ªRediså®ä¾‹ï¼ŒProxyå±‚ç»´æŠ¤äº†è·¯ç”±çš„è½¬å‘é€»è¾‘ã€‚æ“ä½œProxyå°±åƒæ˜¯æ“ä½œä¸€ä¸ªæ™®é€šRedisä¸€æ ·ï¼Œå®¢æˆ·ç«¯ä¹Ÿä¸éœ€è¦æ›´æ¢SDKï¼Œè€ŒRedis Clusteræ˜¯æŠŠè¿™äº›è·¯ç”±é€»è¾‘åšåœ¨äº†SDKä¸­ã€‚å½“ç„¶ï¼Œå¢åŠ ä¸€å±‚Proxyä¹Ÿä¼šå¸¦æ¥ä¸€å®šçš„æ€§èƒ½æŸè€—ã€‚<br><br>2ã€æ•°æ®è¿ç§»ï¼šå½“é›†ç¾¤èŠ‚ç‚¹ä¸è¶³ä»¥æ”¯æ’‘ä¸šåŠ¡éœ€æ±‚æ—¶ï¼Œå°±éœ€è¦æ‰©å®¹èŠ‚ç‚¹ï¼Œæ‰©å®¹å°±æ„å‘³ç€èŠ‚ç‚¹ä¹‹é—´çš„æ•°æ®éœ€è¦åšè¿ç§»ï¼Œè€Œè¿ç§»è¿‡ç¨‹ä¸­æ˜¯å¦ä¼šå½±å“åˆ°ä¸šåŠ¡ï¼Œè¿™ä¹Ÿæ˜¯åˆ¤å®šä¸€ä¸ªé›†ç¾¤æ–¹æ¡ˆæ˜¯å¦æˆç†Ÿçš„æ ‡å‡†ã€‚<br><br>Twemproxyä¸æ”¯æŒåœ¨çº¿æ‰©å®¹ï¼Œå®ƒåªè§£å†³äº†è¯·æ±‚è·¯ç”±çš„é—®é¢˜ï¼Œæ‰©å®¹æ—¶éœ€è¦åœæœºåšæ•°æ®é‡æ–°åˆ†é…ã€‚è€ŒRedis Clusterå’ŒCodiséƒ½åšåˆ°äº†åœ¨çº¿æ‰©å®¹ï¼ˆä¸å½±å“ä¸šåŠ¡æˆ–å¯¹ä¸šåŠ¡çš„å½±å“éå¸¸å°ï¼‰ï¼Œé‡ç‚¹å°±æ˜¯åœ¨æ•°æ®è¿ç§»è¿‡ç¨‹ä¸­ï¼Œå®¢æˆ·ç«¯å¯¹äºæ­£åœ¨è¿ç§»çš„keyè¿›è¡Œæ“ä½œæ—¶ï¼Œé›†ç¾¤å¦‚ä½•å¤„ç†ï¼Ÿè¿˜è¦ä¿è¯å“åº”æ­£ç¡®çš„ç»“æœï¼Ÿ<br><br>Redis Clusterå’ŒCodiséƒ½éœ€è¦æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯&#47;Proxyå±‚äº’ç›¸é…åˆï¼Œè¿ç§»è¿‡ç¨‹ä¸­ï¼ŒæœåŠ¡ç«¯é’ˆå¯¹æ­£åœ¨è¿ç§»çš„keyï¼Œéœ€è¦è®©å®¢æˆ·ç«¯æˆ–Proxyå»æ–°èŠ‚ç‚¹è®¿é—®ï¼ˆé‡å®šå‘ï¼‰ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±æ˜¯ä¸ºäº†ä¿è¯ä¸šåŠ¡åœ¨è®¿é—®è¿™äº›keyæ—¶ä¾æ—§ä¸å—å½±å“ï¼Œè€Œä¸”å¯ä»¥å¾—åˆ°æ­£ç¡®çš„ç»“æœã€‚ç”±äºé‡å®šå‘çš„å­˜åœ¨ï¼Œæ‰€ä»¥è¿™ä¸ªæœŸé—´çš„è®¿é—®å»¶è¿Ÿä¼šå˜å¤§ã€‚ç­‰è¿ç§»å®Œæˆä¹‹åï¼ŒRedis Clusteræ¯ä¸ªèŠ‚ç‚¹ä¼šæ›´æ–°è·¯ç”±æ˜ å°„è¡¨ï¼ŒåŒæ—¶ä¹Ÿä¼šè®©å®¢æˆ·ç«¯æ„ŸçŸ¥åˆ°ï¼Œæ›´æ–°å®¢æˆ·ç«¯ç¼“å­˜ã€‚Codisä¼šåœ¨Proxyå±‚æ›´æ–°è·¯ç”±è¡¨ï¼Œå®¢æˆ·ç«¯åœ¨æ•´ä¸ªè¿‡ç¨‹ä¸­æ— æ„ŸçŸ¥ã€‚<br><br>é™¤äº†è®¿é—®æ­£ç¡®çš„èŠ‚ç‚¹ä¹‹å¤–ï¼Œæ•°æ®è¿ç§»è¿‡ç¨‹ä¸­è¿˜éœ€è¦è§£å†³å¼‚å¸¸æƒ…å†µï¼ˆè¿ç§»è¶…æ—¶ã€è¿ç§»å¤±è´¥ï¼‰ã€æ€§èƒ½é—®é¢˜ï¼ˆå¦‚ä½•è®©æ•°æ®è¿ç§»æ›´å¿«ã€bigkeyå¦‚ä½•å¤„ç†ï¼‰ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­çš„ç»†èŠ‚ä¹Ÿå¾ˆå¤šã€‚<br><br>Redis Clusterçš„æ•°æ®è¿ç§»æ˜¯åŒæ­¥çš„ï¼Œè¿ç§»ä¸€ä¸ªkeyä¼šåŒæ—¶é˜»å¡æºèŠ‚ç‚¹å’Œç›®æ ‡èŠ‚ç‚¹ï¼Œè¿ç§»è¿‡ç¨‹ä¸­ä¼šæœ‰æ€§èƒ½é—®é¢˜ã€‚è€ŒCodisæä¾›äº†å¼‚æ­¥è¿ç§»æ•°æ®çš„æ–¹æ¡ˆï¼Œè¿ç§»é€Ÿåº¦æ›´å¿«ï¼Œå¯¹æ€§èƒ½å½±å“æœ€å°ï¼Œå½“ç„¶ï¼Œå®ç°æ–¹æ¡ˆä¹Ÿæ¯”è¾ƒå¤æ‚ã€‚","like_count":834,"discussions":[{"author":{"id":1529249,"avatar":"https://static001.geekbang.org/account/avatar/00/17/55/a1/e77b9612.jpg","nickname":"å³ªäº”","note":"","ucode":"DCF2DC959D0CD7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":340667,"discussion_content":"ä½œè€…è¯´ï¼šè¦ä¸ä½ æ¥è®²å§","likes_number":48,"is_delete":false,"is_hidden":false,"ctime":1610091771,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1111032,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoGNavHX8buPVrwfPnrCuz57NbKynXF6ZtHkX4icpgQ3R2LdXussnJgO1Kic3G4aFLPvDaRfFia00Sjg/132","nickname":"dennis","note":"","ucode":"8E82B8257A1A20","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1529249,"avatar":"https://static001.geekbang.org/account/avatar/00/17/55/a1/e77b9612.jpg","nickname":"å³ªäº”","note":"","ucode":"DCF2DC959D0CD7","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":377380,"discussion_content":"ä¸Šå­¦æ—¶ï¼Œæˆ‘æ²¡å°‘å¬è¿™å¥è¯","likes_number":14,"is_delete":false,"is_hidden":false,"ctime":1622622280,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":340667,"ip_address":""},"score":377380,"extra":""}]},{"author":{"id":1635531,"avatar":"https://static001.geekbang.org/account/avatar/00/18/f4/cb/0028f467.jpg","nickname":"å°å¤ªé˜³","note":"","ucode":"82FD62E147CD7B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":337325,"discussion_content":"è¯¾ä»£è¡¨ï¼Œè¯·é—®ä¸‹redisé›†ç¾¤æ¨¡å¼ä¸ºä»€ä¹ˆä¸é‡‡ç”¨ä¸€è‡´æ€§hashï¼Œè€Œæ˜¯ç”¨è¿™ç§æ§½çš„æ–¹å¼ï¼Ÿ\nRedis Cluster does not use consistent hashing, but a different form of sharding where every key is conceptually part of what we call a hash slot.","likes_number":9,"is_delete":false,"is_hidden":false,"ctime":1608875397,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":6,"child_discussions":[{"author":{"id":1434196,"avatar":"https://static001.geekbang.org/account/avatar/00/15/e2/54/ccd36eda.jpg","nickname":"æˆ‘çˆ±å­¦ä¹ ","note":"","ucode":"8B850B794272C5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1635531,"avatar":"https://static001.geekbang.org/account/avatar/00/18/f4/cb/0028f467.jpg","nickname":"å°å¤ªé˜³","note":"","ucode":"82FD62E147CD7B","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":337889,"discussion_content":"æˆ‘è¯•ç€å›ç­”ä¸€ä¸‹ã€‚\nä¸€è‡´æ€§hashé€šå¸¸ç”¨æ¥è§£å†³å½“é›†ç¾¤èŠ‚ç‚¹æ•°å˜åŒ–æ—¶ï¼Œå¤§é‡ç¼“å­˜æ— æ³•å‘½ä¸­çš„æƒ…å†µï¼Œå› ä¸ºhashcode/èŠ‚ç‚¹æ•°ï¼ŒèŠ‚ç‚¹æ•°çš„å˜åŒ–ä½¿å¾—å¤§éƒ¨åˆ†è®¡ç®—ç»“æœéƒ½å‘ç”Ÿäº†å˜åŒ–ã€‚ä¸€è‡´æ€§hashå¯ä»¥ä¿è¯åŒä¸€ä¸ªkeyåœ¨èŠ‚ç‚¹æ•°å˜åŒ–çš„æ—¶å€™ï¼Œå¤§éƒ¨åˆ†â€œhashcode/èŠ‚ç‚¹æ•°â€ä»ç„¶èƒ½è®¡ç®—å‡ºç›¸åŒç»“æœã€‚\nè€Œredisçš„æ§½è®¾è®¡ï¼Œå°†èŠ‚ç‚¹æ•°è®¾å®šä¸º16384ï¼Œæ¯ä¸ªèŠ‚ç‚¹åˆ†é…ä¸€å®šçš„æ§½æ•°ï¼Œå®¢æˆ·ç«¯ä¹Ÿå¯ä»¥ç¼“å­˜æ§½ä¸èŠ‚ç‚¹çš„å¯¹åº”å…³ç³»ï¼ŒèŠ‚ç‚¹ä¸èŠ‚ç‚¹ä¹‹é—´ä¹ŸçŸ¥é“æ§½ä¸èŠ‚ç‚¹çš„å¯¹åº”å…³ç³»ã€‚æ§½çš„è®¾è®¡å°±åƒæ˜¯å®¢æˆ·ç«¯ä¸redisé›†ç¾¤çš„ä¸€ä¸ªä¸­é—´å±‚ï¼Œå®ƒå°†é›†ç¾¤ä¸­å­˜å‚¨ç©ºé—´çš„åˆ†é…å…·è±¡åŒ–äº†ã€‚ä½ å¯ä»¥è®©èŠ‚ç‚¹Aå¤šåˆ†é…å‡ ä¸ªæ§½ï¼Œä»¥å¢å¤§èŠ‚ç‚¹Aæ‰¿å—çš„å‹åŠ›ï¼Œä¹Ÿå¯ä»¥å¯¹èŠ‚ç‚¹Bå°‘åˆ†é…å‡ ä¸ªæ§½ï¼Œä»¥é™ä½èŠ‚ç‚¹Bæ‰¿å—çš„å‹åŠ›ï¼Œå½“ç„¶ï¼Œä¸€è‡´æ€§hashä¹Ÿå¯ä»¥å®ç°ï¼Œä½†æ²¡æœ‰æ§½æ¥å¾—è¿™ä¹ˆå…·ä½“ã€‚\næƒ³è±¡ä¸€ä¸‹æ²¡æœ‰æ§½çš„è®¾è®¡ï¼Œå®¢æˆ·ç«¯éœ€è¦å»æœåŠ¡å™¨è·å–ä¸€ä¸ªkeyï¼Œé¦–å…ˆéœ€è¦è®¡ç®—keyçš„hashå€¼ï¼Œç„¶åè·å–hashç¯ï¼Œå®šä½keyæ‰€åœ¨çš„redisèŠ‚ç‚¹ï¼ˆå¦‚æœéœ€è¦å¢åŠ å¹³è¡¡åº¦ï¼Œå¯èƒ½è¿˜éœ€è¦å¼•å…¥è™šæ‹ŸèŠ‚ç‚¹ï¼Œæ ¹æ®è™šæ‹ŸèŠ‚ç‚¹å†æ‰¾çœŸå®èŠ‚ç‚¹ï¼‰ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæ§½æ¯”hashç¯çš„è®¾è®¡ï¼Œæ€§èƒ½æ˜¯æ›´é«˜çš„ï¼ŒåŒæ—¶åœ¨å‹åŠ›åˆ†é…é—®é¢˜ä¸Šä¹Ÿæ›´åŠ çµæ´»ã€‚\n\næˆ‘çš„ç»“è®ºæ˜¯ï¼šéƒ½å¯ä»¥ï¼Œä½†æ§½æ›´åŠ åˆé€‚ã€‚ä¸ç®¡æ˜¯æ€§èƒ½ä¸Šï¼Œè¿˜æ˜¯å¯ç»´æŠ¤æ€§ï¼Œçµæ´»æ€§éƒ½æ›´é«˜ã€‚","likes_number":37,"is_delete":false,"is_hidden":false,"ctime":1609117894,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":337325,"ip_address":""},"score":337889,"extra":""},{"author":{"id":1641326,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJDdmHm6txEVtEXEDibSdIsRLEpghOoMt2kfZHetY9QLWHygicKCfhVoYiaylAZJoXbcCMBhXqMF4icgw/132","nickname":"æ´—æ´—ç¡å§","note":"","ucode":"DE7F8B4CA512F6","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1434196,"avatar":"https://static001.geekbang.org/account/avatar/00/15/e2/54/ccd36eda.jpg","nickname":"æˆ‘çˆ±å­¦ä¹ ","note":"","ucode":"8B850B794272C5","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":368085,"discussion_content":"redisæ˜¯16384ä¸ªæ§½ï¼Œä¸€è‡´æ€§hashæ˜¯2^32-1ä¸ªæ§½ï¼Œæ„Ÿè§‰æ²¡ä»€ä¹ˆåŒºåˆ«ã€‚ç”¨ä¸€è‡´æ€§hashå®ç°çš„è¯ï¼Œæ¯ä¸ªèŠ‚ç‚¹åŒæ ·ä¿å­˜æ•´ä¸ªé›†ç¾¤æ§½ä¸èŠ‚ç‚¹çš„å¯¹åº”å…³ç³»ï¼Œä¹Ÿæ²¡æœ‰åŒºåˆ«ã€‚ä½†2^32-1æ•°é‡å¤ªå¤šï¼Œå¯¹åº”å…³ç³»åº”è¯¥ç”¨èŒƒå›´è¡¨ç¤ºæ›´åˆé€‚","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1618562465,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":337889,"ip_address":""},"score":368085,"extra":""},{"author":{"id":1980201,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/37/29/b3af57a7.jpg","nickname":"å‡¯æ–‡å°çŒª","note":"","ucode":"36D8AD0229547F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1635531,"avatar":"https://static001.geekbang.org/account/avatar/00/18/f4/cb/0028f467.jpg","nickname":"å°å¤ªé˜³","note":"","ucode":"82FD62E147CD7B","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375790,"discussion_content":"å¯ä»¥æ¨æ¼”ä¸€ä¸‹ åˆ’å®š16384ä¸ªæ§½ ä½†è¿™äº›æ§½å¿…é¡»è¦ç»‘å®šåˆ°ç‰¹å®šçš„å®ä¾‹a b cä¸Šã€‚é‚£ä¹ˆå°±æ„å‘³ç€æ§½å’Œå®ä¾‹æ˜¯æœ‰çŠ¶æ€çš„ å¦åˆ™å½“æ§½è¿ç§»æˆ–ä¸¢å¤±æ—¶å°±éœ€è¦è§£å†³å¾€å“ªä¸ªæ§½æ¼‚ç§»çš„é—®é¢˜ã€‚è€Œredisé›†ç¾¤çš„æ–¹æ¡ˆæ§½å’Œå®ä¾‹æ˜¯å¼±ç»‘å®šçš„ ä½ å¯ä»¥ä½¿ç”¨luaè„šæœ¬å‡åˆ† ä¹Ÿå¯ä»¥è‡ªå·±addcluster","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1621850071,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":337325,"ip_address":""},"score":375790,"extra":""}]},{"author":{"id":1738493,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Qn1PDx7xA7jKFZr4vHibmsvoZ7bwUCzHTg3uywiaESCgFTTMibPpKdZOfrqTXtdQXxUJqFqmLAj5NoIFMJpYibbcOQ/132","nickname":"happy learn","note":"","ucode":"BCE08C8E64A23E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":306026,"discussion_content":"è¯·é—®è¯¾ä»£è¡¨ï¼Œåœ¨é‡å®šå‘çš„æœºåˆ¶ä¸­ï¼Œåƒä¾‹å­é‡Œçš„æƒ…å†µkey1 key2å·²ç»è¿ç§»åˆ°æ–°çš„å®ä¾‹3ï¼Œkey3 key4è¿˜åœ¨å®ä¾‹2çš„æ—¶å€™ï¼Œå¦‚æœå®¢æˆ·ç«¯è¯·æ±‚çš„æ˜¯key3çš„è¯ï¼Œå®ƒæ˜¯ä¼šå¾—åˆ°å®ä¾‹2ç›´æ¥è¿”å›key3çš„valueè¿˜æ˜¯å¾—åˆ°ASKï¼Ÿå¦‚æœæ˜¯ASKé‚£ä¹ˆå®¢æˆ·ç«¯å»ASKING å®ä¾‹3çš„æ—¶å€™ä¼šä¸ä¼šé˜»å¡åˆ°key3è¿ç§»å®Œæˆï¼Ÿè°¢è°¢","likes_number":8,"is_delete":false,"is_hidden":false,"ctime":1600150514,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1134895,"avatar":"https://static001.geekbang.org/account/avatar/00/11/51/2f/7b04140c.jpg","nickname":"å­«ã‚„ã•ã‚“","note":"","ucode":"C60877C1C71685","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1738493,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Qn1PDx7xA7jKFZr4vHibmsvoZ7bwUCzHTg3uywiaESCgFTTMibPpKdZOfrqTXtdQXxUJqFqmLAj5NoIFMJpYibbcOQ/132","nickname":"happy learn","note":"","ucode":"BCE08C8E64A23E","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":537129,"discussion_content":"è¿™è¿˜ç”¨é—®å—å“¥å“¥ï¼Œè‚¯å®šæ˜¯ç›´æ¥è¿”å›ç»“æœå•¦ï¼Œè®©ä½ è®¾è®¡çš„è¯ä½ éš¾é“ä¸ç›´æ¥è¿”å›å—ï¼Ÿå¦å¤–ä½œè€…è€å¸ˆä¹Ÿè¯´äº†ï¼Œæ¯æ¬¡éƒ½ä¼šè®¿é—®å®ä¾‹2ï¼Œè¿™å°±è¶³å¤Ÿè¯´æ˜é—®é¢˜äº†ï¼Œè¦å­¦ä¼šæ€è€ƒğŸ§","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1638964797,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":306026,"ip_address":""},"score":537129,"extra":""},{"author":{"id":1361159,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqJobg767PUeqrqQQ4B6YvMatj2SRyOicKZZ4gWTf30dMketiaj58Gc3RFTmckGxAXlL9ERSxGovq9g/132","nickname":"æ¶›å“¥å“¥","note":"","ucode":"329A1384E3AB5E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1134895,"avatar":"https://static001.geekbang.org/account/avatar/00/11/51/2f/7b04140c.jpg","nickname":"å­«ã‚„ã•ã‚“","note":"","ucode":"C60877C1C71685","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":570635,"discussion_content":"å“ˆå“ˆå“ˆå“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651843393,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":537129,"ip_address":""},"score":570635,"extra":""}]},{"author":{"id":1481811,"avatar":"https://static001.geekbang.org/account/avatar/00/16/9c/53/ade0afb0.jpg","nickname":"ub8","note":"","ucode":"0D937C3EAEB781","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":384216,"discussion_content":"åœ¨é›†ç¾¤æ¨¡å¼ä¸‹ï¼Œå“¨å…µæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ","likes_number":6,"is_delete":false,"is_hidden":false,"ctime":1626428893,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":2757673,"avatar":"","nickname":"ä¼Šç”¸","note":"","ucode":"E2BE2411619DBD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1481811,"avatar":"https://static001.geekbang.org/account/avatar/00/16/9c/53/ade0afb0.jpg","nickname":"ub8","note":"","ucode":"0D937C3EAEB781","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":409250,"discussion_content":"ä¸¤ç§æ¨¡å¼å§ï¼Ÿé›†ç¾¤ä¸­æ²¡æœ‰å“¨å…µ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635402443,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":384216,"ip_address":""},"score":409250,"extra":""},{"author":{"id":2729003,"avatar":"https://static001.geekbang.org/account/avatar/00/29/a4/2b/0e1bab59.jpg","nickname":"senda","note":"","ucode":"74541011088AFB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1481811,"avatar":"https://static001.geekbang.org/account/avatar/00/16/9c/53/ade0afb0.jpg","nickname":"ub8","note":"","ucode":"0D937C3EAEB781","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":541538,"discussion_content":"å“¨å…µæ˜¯æœ‰ä¸»ä»åº“çš„æ¨¡å¼ä¸‹ä½¿ç”¨çš„å§ï¼Œå½“ç„¶é›†ç¾¤æ¨¡å¼ä¸‹çš„æ¯ä¸ªåˆ†ç‰‡éƒ½æ˜¯å¯ä»¥åšä¸»ä»åº“çš„ï¼Œè¿™æ—¶å€™å“¨å…µå°±å‡ºæ¥é…åˆå·¥ä½œäº†","likes_number":6,"is_delete":false,"is_hidden":false,"ctime":1640438884,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":384216,"ip_address":""},"score":541538,"extra":""},{"author":{"id":1252813,"avatar":"https://static001.geekbang.org/account/avatar/00/13/1d/cd/3819726f.jpg","nickname":"å¾åŒå­¦å‘€","note":"","ucode":"03383EE820514D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1481811,"avatar":"https://static001.geekbang.org/account/avatar/00/16/9c/53/ade0afb0.jpg","nickname":"ub8","note":"","ucode":"0D937C3EAEB781","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":558261,"discussion_content":"å¦‚æœredis cluster ä¸­çš„ä¸»èŠ‚ç‚¹æœ‰ä»èŠ‚ç‚¹ï¼Œé‚£ä¹ˆå…¶ä»–ä¸»èŠ‚ç‚¹å°±å½“å……å½“sentinelï¼Œäº’ç›¸æ£€æµ‹å…¶ä»–ä¸»èŠ‚ç‚¹æ˜¯å¦åœ¨çº¿","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1648179997,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":384216,"ip_address":""},"score":558261,"extra":""}]},{"author":{"id":1815374,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK4ibibOsboHycltqqicSIkm9eibSBu86BRNc0LQnTRTMEPGDvJXYpBicWOW4srMt7c9iaUT7b5mTmicgkjw/132","nickname":"Geek_6a58c7","note":"","ucode":"37900229ED9B3C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":374976,"discussion_content":"è¯·æ•™å¤§ä½¬ï¼Œredisä¸ºä»€ä¹ˆæœ‰16åº“ï¼Œä½†é›†ç¾¤åˆæ”¯æŒï¼Œè¿™16ä¸ªåº“ä½¿ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1621426740,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2239839,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/u1Zr9yTrTibSWicFFophCK9KvSkt5ETLfxoL4eejFoPOZJTYorjibK3y0s4odHmUphHwcrHtDfYiag4bId4Cr6zfuw/132","nickname":"solk","note":"","ucode":"7246DBAED4ABB5","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1815374,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK4ibibOsboHycltqqicSIkm9eibSBu86BRNc0LQnTRTMEPGDvJXYpBicWOW4srMt7c9iaUT7b5mTmicgkjw/132","nickname":"Geek_6a58c7","note":"","ucode":"37900229ED9B3C","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":542528,"discussion_content":"é›†ç¾¤æ˜¯ä¸ºäº†è§£å†³æ•°æ®é‡å¤§ã€å¹¶å‘é‡å¤§çš„é—®é¢˜ã€‚å¤šä¸ªåº“æ˜¯è§£å†³ä¸åŒä¸šåŠ¡å¤ç”¨åŒä¸€ä¸ªredisæœåŠ¡ï¼Œæ•°æ®ä¹‹é—´å†²çªçš„é—®é¢˜ã€‚æ²¡æœ‰å¿…ç„¶çš„è”ç³»ã€‚","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1640775378,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":374976,"ip_address":""},"score":542528,"extra":""}]},{"author":{"id":1235106,"avatar":"https://static001.geekbang.org/account/avatar/00/12/d8/a2/68ff5bca.jpg","nickname":"å“¦å“¦","note":"","ucode":"0E72B89C30522B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":331888,"discussion_content":"è¿™æ˜¯ä¸ªå·¨ä½¬","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1607001463,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1277081,"avatar":"https://static001.geekbang.org/account/avatar/00/13/7c/99/4dac6ce6.jpg","nickname":"lakeslove","note":"","ucode":"65E14D29D3C981","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":361903,"discussion_content":"è¿˜ä¸€ä¸ªåŸå› ï¼Œç”¨æ˜ å°„è¡¨å¯èƒ½ä¼šå¯¼è‡´æ•°æ®åˆ†å¸ƒä¸å‡åŒ€ã€‚\nå› ä¸ºå¦‚æœè¦åˆ†å¸ƒå‡åŒ€ï¼Œæœ‰ä¸‰ç§æ–¹æ¡ˆï¼š\nä¸€ä¸ªæ˜¯å–ä½™æ”¾å…¥ï¼Œä¸€ä¸ªæ˜¯å…ˆå“ˆå¸Œhashå†å–ä½™æ”¾å…¥ï¼ˆç›®å‰redisç”¨æ­¤æ–¹æ¡ˆï¼‰ï¼Œè¿˜ä¸€ä¸ªæ˜¯éšæœºæ”¾å…¥ï¼Œ\nå› ä¸ºå­—ç¬¦ä¸²çš„å­˜åœ¨ï¼Œæ— æ³•ç›´æ¥å–ä½™ï¼Œè€Œéšæœºæ”¾å…¥çš„æ•ˆæœä¸å¦‚hashå–ä½™ç¨³å®šã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1616777048,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1283052,"avatar":"https://static001.geekbang.org/account/avatar/00/13/93/ec/985675c8.jpg","nickname":"å°é«˜","note":"","ucode":"FCD422249F7355","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":335953,"discussion_content":"å­¦ä¹ å§”å‘˜","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1608425361,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2056201,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/60/09/a8e7913b.jpg","nickname":"SandCarving","note":"","ucode":"6B97DB71613A46","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":323588,"discussion_content":"è¯¾ä»£è¡¨ï¼Œæˆ‘æƒ³é—®ä¸€ä¸‹Redisä¼šåœ¨ä»€ä¹ˆæƒ…å†µä¸‹è¿›è¡Œè´Ÿè½½å‡è¡¡å’Œæ•°æ®è¿ç§»ï¼Ÿ","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1604971252,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":2056201,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/60/09/a8e7913b.jpg","nickname":"SandCarving","note":"","ucode":"6B97DB71613A46","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":323601,"discussion_content":"ä¸æ˜¯è‡ªåŠ¨çš„ï¼Œè¿ç»´éœ€æ‰‹åŠ¨è§¦å‘ã€‚","likes_number":11,"is_delete":false,"is_hidden":false,"ctime":1604973438,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":323588,"ip_address":""},"score":323601,"extra":""}]},{"author":{"id":2056201,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/60/09/a8e7913b.jpg","nickname":"SandCarving","note":"","ucode":"6B97DB71613A46","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":323573,"discussion_content":"å·¨ä½¬","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1604970394,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1175329,"avatar":"https://static001.geekbang.org/account/avatar/00/11/ef/21/69c181b8.jpg","nickname":"Rain","note":"","ucode":"603DFFAC6A3755","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":302701,"discussion_content":"ä¸€å…¥é›†ç¾¤æ·±ä¼¼æµ·å•Šï¼Œäº†è§£ceph çš„è¯ï¼Œredisè¿™ä¸ªè®¾è®¡æœºåˆ¶è·ŸcephæŒºåƒçš„ï¼Œå»ä¸­å¿ƒåŒ–ï¼Œå®¢æˆ·ç«¯ç›´è¿ï¼Œè‡ªåŠ¨æ•°æ®å‡è¡¡ï¼Œä¸è¿‡ceph è¦æˆç†Ÿçš„å¤šã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1599011664,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1214893,"avatar":"https://static001.geekbang.org/account/avatar/00/12/89/ad/4efd929a.jpg","nickname":"è€è€","note":"","ucode":"C32E743518DECD","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":379076,"discussion_content":"è¯¾ä»£è¡¨","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1623664495,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1192724,"avatar":"https://static001.geekbang.org/account/avatar/00/12/33/14/78104f1f.jpg","nickname":"Just Do IT","note":"","ucode":"1EAD92510FA7BE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":353771,"discussion_content":"å®åœ¨æ˜¯å¤ªå¼ºæ‚äº†","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1615203635,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1229254,"avatar":"https://static001.geekbang.org/account/avatar/00/12/c1/c6/1456274a.jpg","nickname":"éº¦å‘†å°çŸ³å¤´","note":"","ucode":"1F21C9FBE2057C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":330150,"discussion_content":"è¿™æ‰åƒä¸€ä¸ªçœŸæ­£æ‡‚redisçš„äº’è”ç½‘è€å¸æœºã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1606538974,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1097042,"avatar":"https://static001.geekbang.org/account/avatar/00/10/bd/52/5994ad51.jpg","nickname":"å“ˆå§†","note":"","ucode":"B40EFE58BD2D20","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":329665,"discussion_content":"ä½ å¥½ï¼Œè¯¾ä»£è¡¨","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1606445617,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1300285,"avatar":"https://static001.geekbang.org/account/avatar/00/13/d7/3d/a076faf1.jpg","nickname":"èœ—ç‰›","note":"","ucode":"A99C9C890F95E4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":329368,"discussion_content":"ç°åœ¨æ¯æ¬¡åšç¬”è®°ï¼Œä¹Ÿä¼šæŠŠè¯¾ä»£è¡¨çš„ è®°è¿›å»ï¼ å“ˆå“ˆ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1606372678,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":300741,"discussion_content":"å…³äºRedisé›†ç¾¤çš„ç»†èŠ‚éå¸¸å¤šï¼ŒæœŸå¾…è€å¸ˆåç»­å¸¦æ¥æ›´å¤šè¿™æ–¹é¢çš„è®²è§£ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1598252211,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":8,"child_discussions":[{"author":{"id":1411281,"avatar":"https://static001.geekbang.org/account/avatar/00/15/88/d1/43ebb68c.jpg","nickname":"ä¸€æ¡æœ‰æ¢¦æƒ³çš„å’¸é±¼","note":"","ucode":"15BA7CA2C08EFF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":300819,"discussion_content":"æˆ‘çœ‹ã€Šredisè®¾è®¡ä¸å®ç°ã€‹ä¸­è¯´ï¼Œå¦‚æœé›†ç¾¤ä¸­æŸä¸ªèŠ‚ç‚¹ä¸‹çº¿äº†ï¼Œè¿™ä¸ªèŠ‚ç‚¹è´Ÿè´£æ§½ä¼šç»™å®ƒçš„ä»èŠ‚ç‚¹ã€‚å¦‚æœå®ƒæ²¡æœ‰ä»èŠ‚ç‚¹ï¼Œè¿™äº›æ§½ä¼šæ€ä¹ˆåŠå‘¢ï¼Ÿè‡ªåŠ¨é¡ºæ—¶é’ˆè¿ç§»ç»™ä¸‹ä¸€ä¸ªèŠ‚ç‚¹å—ï¼Ÿ\nè¿˜æœ‰å¦‚æœåœ¨é›†ç¾¤ä¸­æ–°å¢ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæ˜¯è¦æ‰‹åŠ¨å…¨éƒ¨é‡å†™åˆ†é…æ§½ï¼Œè¿˜æ˜¯æ€ä¹ˆæ ·å‘¢ï¼Ÿ","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1598271294,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":300741,"ip_address":""},"score":300819,"extra":""},{"author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1411281,"avatar":"https://static001.geekbang.org/account/avatar/00/15/88/d1/43ebb68c.jpg","nickname":"ä¸€æ¡æœ‰æ¢¦æƒ³çš„å’¸é±¼","note":"","ucode":"15BA7CA2C08EFF","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":300866,"discussion_content":"æ²¡æœ‰ä»èŠ‚ç‚¹ï¼Œé‚£è¿™ä¸ªèŠ‚ç‚¹å°±ç›¸å½“äºæ•…éšœäº†ï¼Œå†…å­˜æ•°æ®ä¼šä¸¢å¤±ï¼Œåªèƒ½ä»RDBæˆ–AOFæ–‡ä»¶ä¸­æ¢å¤æ•°æ®ï¼Œä¸ä¼šè‡ªåŠ¨è½¬ç§»åˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ã€‚\n\næ–°å¢èŠ‚ç‚¹ï¼Œå¯ä»¥é€‰æ‹©åªè¿ç§»æŸä¸€ä¸ªèŠ‚ç‚¹çš„æ•°æ®ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©è‡ªåŠ¨å¹³è¡¡æ•°æ®ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½è¿ç§»ä¸€éƒ¨åˆ†åˆ°æ–°èŠ‚ç‚¹ï¼Œè¿™æ˜¯å¯é…ç½®çš„ã€‚","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1598283718,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":300819,"ip_address":""},"score":300866,"extra":""},{"author":{"id":1103091,"avatar":"https://static001.geekbang.org/account/avatar/00/10/d4/f3/129d6dfe.jpg","nickname":"æäºŒæœ¨","note":"","ucode":"30E03BB84ADB27","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":301100,"discussion_content":"å‡å¦‚å¤šä¸ªrediså®åˆ—é…ç½®çš„å†…å­˜å¤§å°ä¸ä¸€è‡´ï¼Œä¼šå¯¹è®¡ç®—æ§½ä½æœ‰å½±å“å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598407409,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":300866,"ip_address":""},"score":301100,"extra":""}]},{"author":{"id":1021825,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/97/81/e1eaf621.jpg","nickname":"David","note":"","ucode":"22CBBC13FC97A9","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":587947,"discussion_content":"çœŸå¼º é€šé€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663399266,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬"},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1019375,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8d/ef/f7e29b0f.jpg","nickname":"baohao","note":"","ucode":"0CCC4AAF07650A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579588,"discussion_content":"æƒ³è¯·æ•™ä¸€ä¸‹ï¼Œå¦‚æœclusterå…¶ä¸­ä¸€ä¸ªèŠ‚ç‚¹çš„ä¸»ä»å…¨éƒ½æŒ‚äº†ï¼Œé‚£è¿™ä¸ªé›†ç¾¤è¿˜å¯ç”¨ä¹ˆï¼Ÿæ˜¯ä¼šç”±äºç¼ºå°‘slotå¯¼è‡´æ•´ä½“é›†ç¾¤éƒ½ä¸å¯ç”¨ï¼Œè¿˜æ˜¯æŒ‚æ‰çš„èŠ‚ç‚¹è´Ÿè´£çš„slotå¤„ç†çš„è¯·æ±‚éƒ¨åˆ†ä¸å¯ç”¨ï¼Ÿä¼šä¸ä¼šè§¦å‘è‡ªåŠ¨rebalanceå‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657538577,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1792714,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/5a/ca/4d5d23d1.jpg","nickname":"Im me","note":"","ucode":"FF7DEED4BB4C37","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":556985,"discussion_content":"å†æ¬¡å‘è¯¾ä»£è¡¨è‡´æ•¬","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647594627,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1415619,"avatar":"https://static001.geekbang.org/account/avatar/00/15/99/c3/e4f408d4.jpg","nickname":"é™Œå…®","note":"","ucode":"00CE47CAECD5CD","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":553362,"discussion_content":"mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645861856,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":4,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1213078,"avatar":"https://static001.geekbang.org/account/avatar/00/12/82/96/aa795685.jpg","nickname":"mghio","note":"","ucode":"74883EDE4FD0DC","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":551696,"discussion_content":"é™ˆç‹¬ç§€åŒå­¦ï¼Œä½ åä¸‹ï¼ï¼ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645085712,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":4,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1891334,"avatar":"","nickname":"ispark","note":"","ucode":"4676C45E485117","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":534615,"discussion_content":"ä¸ºä»€ä¹ˆè¦ç”¨slotå‘¢,ç›´æ¥ä»¥èŠ‚ç‚¹å»åškeyçš„è·¯ç”±å¥½åƒä¹Ÿå¯ä»¥,è€Œä¸”é›†ç¾¤å°çš„çš„æ—¶å€™æ˜ å°„å…³ç³»ç®€å•,é›†ç¾¤å¤šçš„æ—¶å€™ä¹Ÿä¸ä¼šæœ‰16384çš„é™åˆ¶","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638242624,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":4,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2617418,"avatar":"","nickname":"DCtest3","note":"","ucode":"E86369E784A52F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":411153,"discussion_content":"å¯ä»¥é€šè¿‡ç¨‹åºé…ç½®ï¼Œå°†æ‰€æœ‰çš„é›†ç¾¤IPé…ç½®åœ¨ç¨‹åºé‡Œé¢ï¼Œå°±ä¸éœ€è¦moveçš„æ–¹å¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635858966,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":4,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2804690,"avatar":"","nickname":"å‘µå‘µå“’","note":"","ucode":"C08AA79F71D193","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":403651,"discussion_content":"å‡è®¾ä¸»åŠ¨ä¸‹çº¿äº†ä¸€ä¸ªèŠ‚ç‚¹ï¼ŒæŠŠæ§½è¿ç§»åˆ°å…¶ä»–èŠ‚ç‚¹äº†ã€‚å®¢æˆ·ç«¯ä¸çŸ¥é“å˜æ›´ï¼ŒæŸ¥è¯¢å°±æŠ¥é”™äº†ï¼Œä¸ä¼šé‡å®šå‘ï¼Œæ‰€ä»¥ä¸‹çº¿æ—¶æ€ä¹ˆè®©å®¢æˆ·ç«¯çŸ¥é“ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634125691,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":4,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2105175,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/40ab8h1zbSUZmzxARyicDuXECYwtQNDd9jxAbys5LMnVLJMmibTCHd1icrRZMnMSvTJ27UdITA0439hAaVIxcOkGQ/132","nickname":"Geek_72b9a7","note":"","ucode":"4C26B79F9F15A9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":386521,"discussion_content":"codisé›†ç¾¤ä¸­ä¸ºå•¥è¦å¼•å…¥zkï¼Œæ²¡çœ‹æ‡‚ã€‚ æœ‰æœ‹å‹å¯ä»¥è§£é‡Šä¸€ä¸‹å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627626344,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":4,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1126593,"avatar":"https://static001.geekbang.org/account/avatar/00/11/30/c1/2dde6700.jpg","nickname":"å¯†ç 123456","note":"","ucode":"9889463CC0EA71","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":382194,"discussion_content":"é—®ä¸‹å¤§ä½¬ï¼Œredisåˆ‡ç‰‡åªé’ˆå¯¹keyå—ï¼Ÿæ¯”å¦‚æ•°ç»„æ•°æ®ï¼Œhashæ•°æ®æ”¯æŒåˆ‡ç‰‡å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625469862,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":4,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2293155,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKug7j7FSiaWwGzQKWXPbHA9teGtx4TncVUyxbSUTgxVXH1jESD44FRQJZspF5CrvU7ib0tNJ7Stoag/132","nickname":"Geek_de5d8e","note":"","ucode":"A9D7017CA8E7E9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1126593,"avatar":"https://static001.geekbang.org/account/avatar/00/11/30/c1/2dde6700.jpg","nickname":"å¯†ç 123456","note":"","ucode":"9889463CC0EA71","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":392060,"discussion_content":"è¿˜ä¸æ˜¯æœ‰ä¸ªkey","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1630808873,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":382194,"ip_address":""},"score":392060,"extra":""}]},{"author":{"id":2550743,"avatar":"https://static001.geekbang.org/account/avatar/00/26/eb/d7/90391376.jpg","nickname":"if...else...","note":"","ucode":"D0565908C99695","race_medal":4,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":381919,"discussion_content":"ğŸ‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625295908,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":4,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2063920,"avatar":"","nickname":"Geek_7bb784","note":"","ucode":"5DF4B955A266F3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":376803,"discussion_content":"å‡å¦‚ä¸€ä¸ªé›†ç¾¤æœ‰ä¸‰ä¸ªå®ä¾‹ï¼Œç°åœ¨æ•°æ®é‡å¢é•¿ï¼Œæ–°å¢äº†ä¸€ä¸ªå®ä¾‹ï¼Œè¿™æ—¶å€™æœ‰äº›æ§½ä¸­çš„æ•°æ®æ­£åœ¨è¿ç§»ã€‚\n\nä½†å‘ç°æ­¤æ—¶æ•°æ®é‡åˆæ¶¨äº†ï¼Œéœ€è¦å†å¢åŠ ä¸€ä¸ªå®ä¾‹ï¼Œè¿™æ—¶å€™è¯¥æ€ä¹ˆåŠï¼Ÿç­‰æ§½ä¸­æ•°æ®è¿ç§»å®Œå†å¢åŠ å®ä¾‹ï¼Ÿè¿˜æ˜¯å¯ä»¥ç›´æ¥å¢åŠ å®ä¾‹ï¼Ÿ\n\nå¦‚æœç­‰æ§½ä¸­æ•°æ®è¿ç§»å®Œï¼Œé‚£ä¹ˆå½“å‰4ä¸ªå®ä¾‹æ— æ³•æ”¯æ’‘æ–°å¢æ•°æ®é‡ã€‚ä½†ç›´æ¥æ–°å¢å®ä¾‹ï¼Œæ­£åœ¨è¿ç§»çš„æ§½åˆé¢ä¸´é‡æ–°åˆ†é…ã€‚æœ‰åˆé€‚çš„è§£å†³æ–¹å¼å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622358502,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":4,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1234273,"avatar":"https://static001.geekbang.org/account/avatar/00/12/d5/61/8ad99e09.jpg","nickname":"åˆ˜ç™¾ä¸‡","note":"","ucode":"692E23D070641A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2063920,"avatar":"","nickname":"Geek_7bb784","note":"","ucode":"5DF4B955A266F3","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":376839,"discussion_content":"åªèƒ½ç­‰è¿ç§»å®Œäº†å†æã€‚ å¦å¤– è¿ç§»ä¹‹å‰è¦é¢„åˆ¤èƒ½ä¸èƒ½æ’‘å¾—ä½ã€‚ ä½ è¯´çš„è¿™ç§æƒ…å†µleader ä¸è¡Œå•Šã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622374632,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":376803,"ip_address":""},"score":376839,"extra":""},{"author":{"id":1116403,"avatar":"https://static001.geekbang.org/account/avatar/00/11/08/f3/35773693.jpg","nickname":"éå¸¸éå¸¸éå¸¸éå¸¸çš„æ™®é€šä¸­ä¸‹","note":"","ucode":"4D15549F5055D2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2063920,"avatar":"","nickname":"Geek_7bb784","note":"","ucode":"5DF4B955A266F3","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":381312,"discussion_content":"æ²¡å¬è¯´æ‰©å®¹ä¸€ä¸ªçš„ä¸€èˆ¬éƒ½æ˜¯æ‰©å®¹ä¸€å€æŠŠï¼Œ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1625011651,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":376803,"ip_address":""},"score":381312,"extra":""}]},{"author":{"id":1980201,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/37/29/b3af57a7.jpg","nickname":"å‡¯æ–‡å°çŒª","note":"","ucode":"36D8AD0229547F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375791,"discussion_content":"è¿™é‡Œè¿˜æ¼äº†ä¸€ä¸ªç‚¹ å°±æ˜¯tryagainã€‚å› ä¸ºæˆ‘ä»¬å†è¿ç§»æ—¶å€™æœ‰ä¸€éƒ¨åˆ†keyè¿˜ç•™åœ¨è€å®ä¾‹ä¸Š ä½†å¦‚æœæ¥æ”¶åˆ°æ‰¹é‡key æ­¤æ—¶redisæ€ä¹ˆåŠå‘¢ï¼Ÿç­”æ¡ˆæ˜¯ç”¨tryagainæŠ¥é”™å¤„ç†ã€‚å½“ç„¶rediså†…éƒ¨éƒ½æ˜¯æŒ‰ç…§addReplySds()æ¥å¤„ç†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621850199,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":4,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1003205,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/4e/c5/78626367.jpg","nickname":"å‹ç«ğŸ”¥","note":"","ucode":"C2322918B31E60","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375209,"discussion_content":"é—®ä¸‹å¤§ä½¬, redis cluster é›†ç¾¤ä¸­, å®¢æˆ·ç«¯æ˜¯ä¸æ¯ä¸€ä¸ªèŠ‚ç‚¹å»ºç«‹è¿æ¥è¿˜æ˜¯åªè¿æ¥æŸä¸€ä¸ªèŠ‚ç‚¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621515504,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":5,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2737140,"avatar":"","nickname":"Geek_0d08a4","note":"","ucode":"9B7675CF3FE9E5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1003205,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/4e/c5/78626367.jpg","nickname":"å‹ç«ğŸ”¥","note":"","ucode":"C2322918B31E60","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":388797,"discussion_content":"æ‰€æœ‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628959136,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":375209,"ip_address":""},"score":388797,"extra":""}]},{"author":{"id":1246664,"avatar":"https://static001.geekbang.org/account/avatar/00/13/05/c8/2f849dfb.jpg","nickname":"å±±é¡¶çš„æ´","note":"","ucode":"D3E9E928A3FA62","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":367537,"discussion_content":"ğŸ‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618389110,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":5,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1252612,"avatar":"https://static001.geekbang.org/account/avatar/00/13/1d/04/377b3f79.jpg","nickname":"é«˜å¨","note":"","ucode":"CFAD8818E5ACEC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":351808,"discussion_content":"è¿™æ˜¯å¤§ä½¬ä¸­çš„å¤§ä½¬","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614450961,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":5,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1203114,"avatar":"https://static001.geekbang.org/account/avatar/00/12/5b/aa/777d7f88.jpg","nickname":"è°è°","note":"","ucode":"9651913B7B7ECC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":330291,"discussion_content":"åˆ‡ç‰‡é›†ç¾¤æœ‰ä¸»ä»å—ï¼Ÿå¦‚æœæœ‰çš„è¯ï¼Œé‚£æ˜¯ä¸æ˜¯åˆæˆäº†å“¨å…µé›†ç¾¤é‚£ä¸€å¥—äº†ï¼Ÿå¦‚æœæ²¡æœ‰çš„è¯ï¼Œé‚£å²‚ä¸æ˜¯ä¸€ä¸ªèŠ‚ç‚¹æŒ‚äº†ï¼Œæ•°æ®éƒ½ä¸¢å¤±äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606557586,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":5,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1203114,"avatar":"https://static001.geekbang.org/account/avatar/00/12/5b/aa/777d7f88.jpg","nickname":"è°è°","note":"","ucode":"9651913B7B7ECC","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":330301,"discussion_content":"æœ‰ä¸»ä»ï¼Œå…³äºæ•…éšœæ¢å¤ä½ çœ‹çœ‹æ–‡æ¡£ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606561159,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":330291,"ip_address":""},"score":330301,"extra":""},{"author":{"id":1613760,"avatar":"https://static001.geekbang.org/account/avatar/00/18/9f/c0/86febfff.jpg","nickname":"Master","note":"","ucode":"79D0145B853C9E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1203114,"avatar":"https://static001.geekbang.org/account/avatar/00/12/5b/aa/777d7f88.jpg","nickname":"è°è°","note":"","ucode":"9651913B7B7ECC","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":334758,"discussion_content":"ä¸€èˆ¬æ˜¯ä¸‰ä¸»ä¸‰ä»","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1607960639,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":330291,"ip_address":""},"score":334758,"extra":""}]},{"author":{"id":2308831,"avatar":"https://static001.geekbang.org/account/avatar/00/23/3a/df/ea0fc831.jpg","nickname":"å‘¨å¤©èˆª","note":"","ucode":"B28D84594679A6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":325337,"discussion_content":"è¯¾ä»£è¡¨ä½ å¥½ï¼Œå¦‚æœé›†ç¾¤æ¨¡å¼æ–°å¢èŠ‚ç‚¹ï¼Œé‡æ–°åˆ†é…hashæ§½ä½çš„æ—¶å€™ï¼ŒåŸæ¥æ§½ä½é‡Œé¢æœ‰æ•°æ®æ˜¯ä¸æ˜¯é‡æ–°åˆ†é…åï¼Œæ•°æ®ä¸€èµ·åˆ†é…è¿‡å»äº†ï¼Ÿæˆ‘ä»¥å‰ä»¥ä¸ºæœ‰æ•°æ®æ˜¯ä¸å¯ä»¥åˆ†é…æ§½ä½çš„ï¼Œå¿…é¡»è¦æ¸…ç©ºredisé›†ç¾¤æ‰èƒ½æ–°å¢èŠ‚ç‚¹åˆ†é…æ§½ä½ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605275144,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":5,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":2308831,"avatar":"https://static001.geekbang.org/account/avatar/00/23/3a/df/ea0fc831.jpg","nickname":"å‘¨å¤©èˆª","note":"","ucode":"B28D84594679A6","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":325350,"discussion_content":"æ²¡çœ‹æ‡‚ä½ æè¿°çš„é—®é¢˜ã€‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605276972,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":325337,"ip_address":""},"score":325350,"extra":""},{"author":{"id":2308831,"avatar":"https://static001.geekbang.org/account/avatar/00/23/3a/df/ea0fc831.jpg","nickname":"å‘¨å¤©èˆª","note":"","ucode":"B28D84594679A6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":325777,"discussion_content":"å°±æ˜¯ä¸€ä¸ª3ä¸»3ä»çš„é›†ç¾¤ï¼Œé‡Œé¢å·²ç»æœ‰æ•°æ®äº†ã€‚æ­¤æ—¶å¯ä»¥ä¸åˆ é™¤æ•°æ®ï¼Œç›´æ¥æ‰©å®¹åˆ°4ä¸»4ä»å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605429051,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":325350,"ip_address":""},"score":325777,"extra":""},{"author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":2308831,"avatar":"https://static001.geekbang.org/account/avatar/00/23/3a/df/ea0fc831.jpg","nickname":"å‘¨å¤©èˆª","note":"","ucode":"B28D84594679A6","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":325785,"discussion_content":"å½“ç„¶å¯ä»¥ï¼Œæ‰©å®¹ä¸ä¼šåˆ æ•°æ®ï¼Œä½†éœ€è¦è¿ç§»æ•°æ®ã€‚","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1605430751,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":325777,"ip_address":""},"score":325785,"extra":""}]},{"author":{"id":1479923,"avatar":"https://static001.geekbang.org/account/avatar/00/16/94/f3/4f88b0e6.jpg","nickname":"Hardy","note":"","ucode":"A4599A50D2573F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":316705,"discussion_content":"@Kaito è¯¾ä»£è¡¨, askæˆ‘ç†è§£æ˜¯ä¸´æ—¶çš„ï¼Œä½†æ˜¯moveæ°¸ä¹…çš„ï¼Œä½†æ˜¯ä¸€ä¸ªèŠ‚ç‚¹ä¸€èˆ¬å¯¹åº”ä¸€æ®µsoltå€¼ï¼Œæˆ‘çœ‹moveåªä¼šè¿”å›ä¸€ä¸ªæ˜ å°„ï¼Œå®¢æˆ·ç«¯ä»€ä¹ˆæ—¶å€™å»æ›´æ–°ipå’Œsoltæ®µå€¼æ˜ å°„å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603443222,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":5,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1397058,"avatar":"https://static001.geekbang.org/account/avatar/00/15/51/42/47808b22.jpg","nickname":"HALOXIAO","note":"","ucode":"8EC17EC85EF2D4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":308620,"discussion_content":"å¦‚æœä¸€ä¸ªä¸»èŠ‚ç‚¹å’Œå®ƒçš„ä»èŠ‚ç‚¹å…¨æŒ‚äº†ï¼Œæ•´ä¸ªé›†ç¾¤å¥½åƒä¼šä¸å¯ç”¨ï¼Œä¸ºä»€ä¹ˆæ˜¯æ•´ä¸ªé›†ç¾¤ä¸å¯ä»¥ï¼Œè€Œä¸æ˜¯å…¶ä»–èŠ‚ç‚¹è§†å®ƒä¸ºä¸‹çº¿ï¼Œæˆ‘å¯¹äºè¿™ç‚¹å¾ˆä¸æ˜ç™½ï¼Œå¸Œæœ›Kaitoå¤§ä½¬èƒ½æŒ‡ç‚¹æŒ‡ç‚¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1601010724,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":5,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1397058,"avatar":"https://static001.geekbang.org/account/avatar/00/15/51/42/47808b22.jpg","nickname":"HALOXIAO","note":"","ucode":"8EC17EC85EF2D4","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":308852,"discussion_content":"ä¸€ä¸ªèŠ‚ç‚¹ä¸»ä»éƒ½æŒ‚äº†ï¼Œæ„å‘³ç€è¿™ä¸ªèŠ‚ç‚¹æ•°æ®ä¸¢å¤±äº†ã€‚é›†ç¾¤æ˜¯å¦ç»§ç»­å¯ç”¨ï¼Œæ˜¯æœ‰é…ç½®å¯ä»¥æ§åˆ¶çš„ï¼Œå¯ä»¥ç»§ç»­æä¾›æœåŠ¡ä¹Ÿå¯ä»¥åœæ­¢æœåŠ¡ï¼Œä½ çœ‹ä¸‹é…ç½®æ–‡ä»¶ã€‚","likes_number":7,"is_delete":false,"is_hidden":false,"ctime":1601096434,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":308620,"ip_address":""},"score":308852,"extra":""}]},{"author":{"id":1024128,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a0/80/2349287c.jpg","nickname":"ç®€çº¦é£ä¸¶","note":"","ucode":"4F1541223C7ED5","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":303276,"discussion_content":"è¯¾ä»£è¡¨ï¼Œä½ çŸ¥é“hashæ§½é‡Œé¢ä¼šå­˜å‚¨ä»€ä¹ˆå—ï¼Œæ¯”å¦‚è¯´ä¼šå­˜keyså—ï¼Œç§»åŠ¨æ§½çš„æ—¶å€™æ€ä¹ˆçŸ¥é“æœ‰å“ªäº›æ•°æ®è¦è¿ç§»å‘¢ï¼Ÿæˆ–è€…è¯´æ¯ä¸ªslotåœ¨å†…å­˜ä¸­æœ‰ä¸€ä¸ªå›ºå®šåŒºåŸŸå—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599207421,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":5,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1019568,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8e/b0/ef201991.jpg","nickname":"CcczzZ","note":"","ucode":"5F46DA5053D2BB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1024128,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a0/80/2349287c.jpg","nickname":"ç®€çº¦é£ä¸¶","note":"","ucode":"4F1541223C7ED5","race_medal":1,"user_type":1,"is_pvip":false},"discussion":{"id":303326,"discussion_content":"æ¯ä¸ªå“ˆå¸Œæ§½ä¼šè®°å½•è‡ªå·±å¤„ç†ï¼ˆå æœ‰ï¼‰å“ªäº›æ§½ slotsï¼Œè¿˜æœ‰ä¸€ä¸ª slots_to_keys è·³è·ƒè¡¨è®°å½•äº†æ§½å’Œé”®ä¹‹é—´çš„å…³ç³»ï¼ˆscoreæ˜¯æ§½å·ï¼Œmemberæ˜¯é”®ï¼‰ï¼Œè¿™æ ·å°±èƒ½æ‰¾åˆ°è¿™ä¸ªæ§½/æ•°æ®åº“å¯¹åº”çš„æ‰€æœ‰æ•°æ®","likes_number":15,"is_delete":false,"is_hidden":false,"ctime":1599212042,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":303276,"ip_address":""},"score":303326,"extra":""}]},{"author":{"id":1727355,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/5b/7b/1ee6ec86.jpg","nickname":"Lionheart","note":"","ucode":"CA2E83FE4EAD18","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301824,"discussion_content":"16384ä¸ªæ§½æ˜¯å›ºå®šä¸å˜çš„å—ï¼Ÿå®¢æˆ·ç«¯æ±‚æ¨¡å–ä½™è®¡ç®—slotç”¨16384ï¼Œè¿™ä¸ªå‚æ•°æ˜¯å®¢æˆ·ç«¯SDKå†™æ­»äº†ï¼Œè¿˜æ˜¯æœåŠ¡å™¨å‘Šè¯‰å®¢æˆ·ç«¯çš„ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598672611,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":5,"extra":"","child_discussion_number":5,"child_discussions":[{"author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1727355,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/5b/7b/1ee6ec86.jpg","nickname":"Lionheart","note":"","ucode":"CA2E83FE4EAD18","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301837,"discussion_content":"å›ºå®šä¸å˜ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯éƒ½æ˜¯å†™æ­»çš„ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1598675957,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":301824,"ip_address":""},"score":301837,"extra":""},{"author":{"id":1727355,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/5b/7b/1ee6ec86.jpg","nickname":"Lionheart","note":"","ucode":"CA2E83FE4EAD18","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":301849,"discussion_content":"è¿™ä¹ˆè¯´ä¸€ä¸ªRedisé›†ç¾¤ï¼Œæœ€å¤šåªèƒ½æœ‰16384ä¸ªå®ä¾‹ï¼Œè¾¾åˆ°è¿™ä¸ªä¸Šé™åå°±ä¸èƒ½æ°´å¹³æ‰©å®¹äº†ã€‚16384è¿™ä¸ªæ•°å­—æ˜¯æ€ä¹ˆå®šå‡ºæ¥çš„ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598683969,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":301837,"ip_address":""},"score":301849,"extra":""},{"author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1727355,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/5b/7b/1ee6ec86.jpg","nickname":"Lionheart","note":"","ucode":"CA2E83FE4EAD18","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301853,"discussion_content":"å› ä¸ºé›†ç¾¤ä¸­æ¯ä¸ªèŠ‚ç‚¹éœ€è¦äº¤æ¢å„è‡ªçš„è·¯ç”±ä¿¡æ¯ï¼Œä¹Ÿå°±æ˜¯æ§½ä½ä¿¡æ¯ï¼ŒRedisä¹Ÿéœ€è¦è€ƒè™‘äº¤æ¢çš„æˆæœ¬ï¼Œå ç”¨çš„ç½‘ç»œèµ„æºã€‚\n\nè¿‡å¤šçš„æ§½ä½åœ¨äº¤æ¢ä¿¡æ¯æ—¶ä¹Ÿä¼šå˜å¾—å¾ˆé‡ï¼Œæ‰€ä»¥Redisä½œè€…åœ¨è®¾è®¡æ—¶åšäº†æƒè¡¡ï¼Œå°½é‡ä½¿ç”¨å°‘çš„å†…å­˜å®Œæˆä¿¡æ¯äº¤æ¢ï¼Œåœ¨è®¾è®¡å†…å­˜å­˜å‚¨æ—¶å®šçš„16384ï¼Œä½œè€…é¢„ä¼°ä¸€ä¸ªé›†ç¾¤ä¸ä¼šè¶…è¿‡1000ä¸ªå®ä¾‹ã€‚githubä¸Šä½œè€…æœ‰è§£é‡Šï¼Œä½ å¯ä»¥æŸ¥ä¸€ä¸‹ã€‚","likes_number":25,"is_delete":false,"is_hidden":false,"ctime":1598685811,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":301849,"ip_address":""},"score":301853,"extra":""}]},{"author":{"id":2120879,"avatar":"https://static001.geekbang.org/account/avatar/00/20/5c/af/2215f3b6.jpg","nickname":"å¾å°ç†Š","note":"","ucode":"673D3C055AE5B5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301217,"discussion_content":"æ–°å¢èŠ‚ç‚¹æ˜¯ä¸ä¼šé‡æ–°åˆ†é…hashæ§½çš„å—ï¼Ÿä¾‹å¦‚è€å¸ˆä¸Šé¢è®²çš„16384ä¸ªhashæ§½é™¤å®ä¾‹ä¸ªæ•°ï¼Œå°±æ˜¯æ¯ä¸ªå®ä¾‹ä¸Šåˆ†é…çš„hashæ§½ï¼Œä½†æ˜¯å¢åŠ äº†æ€ä¹ˆé‡æ–°åˆ†é…hashæ§½å‘¢ã€‚è¿™æ ·ä¸ä¼šæ¶‰åŠåˆ°ä¹‹å‰æ•°æ®æ˜ å°„å¾—hashæ§½çš„ä½ç½®å—ï¼Ÿ\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598442892,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":5,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":2120879,"avatar":"https://static001.geekbang.org/account/avatar/00/20/5c/af/2215f3b6.jpg","nickname":"å¾å°ç†Š","note":"","ucode":"673D3C055AE5B5","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301248,"discussion_content":"æ–°å¢å®ä¾‹ä¼šé‡æ–°æ˜ å°„å“ˆå¸Œæ§½åˆ°æ–°çš„å®ä¾‹ä¸Šï¼Œè¿™ä¹Ÿæ„å‘³ç€è¦è¿ç§»æ•°æ®åˆ°æ–°å®ä¾‹ä¸Šã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1598451389,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":301217,"ip_address":""},"score":301248,"extra":""},{"author":{"id":2370506,"avatar":"","nickname":"Geek_774ef4","note":"","ucode":"9838717F36D085","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":335093,"discussion_content":"é‡æ–°æ˜ å°„æ§½ä½è¿™ä¸ªè¿‡ç¨‹åº”è¯¥æ˜¯æ‰‹åŠ¨æ“ä½œï¼Œéœ€è¦è¿ç»´æ“ä½œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608090271,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":301248,"ip_address":""},"score":335093,"extra":""}]},{"author":{"id":1315517,"avatar":"https://static001.geekbang.org/account/avatar/00/14/12/bd/19d31e64.jpg","nickname":"Leslie_Lamport","note":"","ucode":"62997381D754A9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301200,"discussion_content":"è¿™ä¸ªhashçš„æ–¹æ¡ˆ è·Ÿconsistent hashingå¾ˆåƒï¼ˆcassandraä¹Ÿåœ¨ç”¨ï¼‰ä¸è¿‡æ„Ÿè§‰è€å¸ˆæ²¡æœ‰æŠŠè¿™ä¸ªè®²å‡ºæ¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598437202,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":6,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1315517,"avatar":"https://static001.geekbang.org/account/avatar/00/14/12/bd/19d31e64.jpg","nickname":"Leslie_Lamport","note":"","ucode":"62997381D754A9","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301249,"discussion_content":"è¿™ä¸ªå¹¶ä¸æ˜¯ä¸€è‡´æ€§å“ˆå¸Œã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598451405,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":301200,"ip_address":""},"score":301249,"extra":""},{"author":{"id":1388092,"avatar":"https://static001.geekbang.org/account/avatar/00/15/2e/3c/eae43616.jpg","nickname":"sid","note":"","ucode":"3D1F9169A19D29","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1315517,"avatar":"https://static001.geekbang.org/account/avatar/00/14/12/bd/19d31e64.jpg","nickname":"Leslie_Lamport","note":"","ucode":"62997381D754A9","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":304371,"discussion_content":"https://www.cnblogs.com/abc-begin/p/8203613.html","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599555775,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":301200,"ip_address":""},"score":304371,"extra":""}]},{"author":{"id":1179028,"avatar":"https://static001.geekbang.org/account/avatar/00/11/fd/94/0247f945.jpg","nickname":"å’¸é±¼","note":"","ucode":"5E79636DE48155","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":300911,"discussion_content":"è¿˜æœ‰å¦‚æœå•ä¸ªproxyçš„è¯ï¼ŒIOä¼šä¸ä¼šæˆä¸ºç“¶é¢ˆï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598318258,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":6,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1179028,"avatar":"https://static001.geekbang.org/account/avatar/00/11/fd/94/0247f945.jpg","nickname":"å’¸é±¼","note":"","ucode":"5E79636DE48155","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":300914,"discussion_content":"ä¸€èˆ¬proxyåªæ˜¯åšè·¯ç”±è½¬å‘ï¼Œä½¿ç”¨IOå¤šè·¯å¤ç”¨æœºåˆ¶æ€§èƒ½éå¸¸é«˜ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥éƒ¨ç½²å¤šä¸ªproxyåˆ†æ‹…å‹åŠ›ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1598319051,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":300911,"ip_address":""},"score":300914,"extra":""}]},{"author":{"id":1179028,"avatar":"https://static001.geekbang.org/account/avatar/00/11/fd/94/0247f945.jpg","nickname":"å’¸é±¼","note":"","ucode":"5E79636DE48155","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":300908,"discussion_content":"proxyå±‚ä¼šå­˜åœ¨å•ç‚¹é—®é¢˜å§ï¼Ÿè¿™æ ·ä¸€æ¥æ•´ä½“æ¶æ„å°±ä¼šæ›´å¤æ‚äº†å¯¹å›¢é˜Ÿè¦æ±‚ä¹Ÿæ›´é«˜äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598318166,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":6,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1179028,"avatar":"https://static001.geekbang.org/account/avatar/00/11/fd/94/0247f945.jpg","nickname":"å’¸é±¼","note":"","ucode":"5E79636DE48155","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":300910,"discussion_content":"å¯ä»¥éƒ¨ç½²å¤šä¸ªproxyæé«˜å¯é æ€§çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598318248,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":300908,"ip_address":""},"score":300910,"extra":""},{"author":{"id":1797883,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/6e/fb/d7c9814d.jpg","nickname":"peng_gy","note":"","ucode":"4F34793B7FF04F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":340534,"discussion_content":"åƒæˆç†Ÿçš„sdkéƒ½ä¼šæä¾›è¿™å±‚çš„è½¬æ¢ï¼Œåœ¨å…·ä½“ä¸šåŠ¡çš„åˆå§‹åŒ–å»ºç«‹è¿æ¥å³å¯ï¼Œä¹Ÿå¯ä»¥è®¤ä¸ºæ˜¯æ— æ„ŸçŸ¥çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610030836,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":300910,"ip_address":""},"score":340534,"extra":""}]},{"author":{"id":1525225,"avatar":"https://static001.geekbang.org/account/avatar/00/17/45/e9/9bc2f2da.jpg","nickname":"ç‹é’ŸåŸ","note":"","ucode":"828AFD04AEB8B1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":300768,"discussion_content":"è¯¾ä»£è¡¨æ¥äº†,å¤§ç¥å¯¹rediséƒ½ç†è§£è¿™ä¹ˆé€å½»äº†,ä¸ºå•¥è¿˜è¦å­¦...å’±ä»¬éƒ½æ˜¯å°ç™½æ¥å­¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598260011,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":6,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1525225,"avatar":"https://static001.geekbang.org/account/avatar/00/17/45/e9/9bc2f2da.jpg","nickname":"ç‹é’ŸåŸ","note":"","ucode":"828AFD04AEB8B1","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":300780,"discussion_content":"ä¸æ˜¯å¤§ç¥å•Š...ä¹Ÿæœ‰å¾ˆå¤šçŸ¥è¯†ç›²åŒºéœ€è¦ç ”ç©¶ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1598262879,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":300768,"ip_address":""},"score":300780,"extra":""},{"author":{"id":1062070,"avatar":"https://static001.geekbang.org/account/avatar/00/10/34/b6/0feb574b.jpg","nickname":"æˆ‘çš„é»„é‡‘æ—¶ä»£","note":"","ucode":"D7825B45B372F4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":301215,"discussion_content":"ä½ è¿™çŸ¥è¯†ç›²åŒºæ˜æ˜¾ä¸åœ¨Redisè¿™é‡Œå•Š ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598441631,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":300780,"ip_address":""},"score":301215,"extra":""},{"author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1062070,"avatar":"https://static001.geekbang.org/account/avatar/00/10/34/b6/0feb574b.jpg","nickname":"æˆ‘çš„é»„é‡‘æ—¶ä»£","note":"","ucode":"D7825B45B372F4","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301246,"discussion_content":"ä¸‹å‘¨å°±å¼€å§‹éš¾äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598451273,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":301215,"ip_address":""},"score":301246,"extra":""}]}]},{"had_liked":false,"id":246662,"user_name":"æ³¨å®šéå‡¡","can_delete":false,"product_type":"c1","uid":1113597,"ip_address":"","ucode":"80673056E131B7","user_header":"https://static001.geekbang.org/account/avatar/00/10/fd/fd/326be9bb.jpg","comment_is_top":false,"comment_ctime":1599448290,"is_pvip":true,"discussion_count":8,"race_medal":0,"score":"370966635746","product_id":100056701,"comment_content":"1ï¼Œä½œè€…è®²äº†ä»€ä¹ˆï¼Ÿ<br>    åˆ‡ç‰‡é›†ç¾¤<br><br>2ï¼Œä½œè€…æ˜¯æ€ä¹ˆæŠŠäº‹ç»™è®²æ˜ç™½çš„ï¼Ÿ<br>        ä»ä¸€ä¸ªæ¡ˆä¾‹å…¥æ‰‹ï¼Œè®²åˆ°å•å®ä¾‹å†…å­˜è¿‡å¤§åœ¨æ•°æ®å¤‡ä»½æ—¶ä¼šå¯¼è‡´Redisæ€§èƒ½ä¸‹é™ï¼Œ<br>        å¼•å‡ºredisåˆ†ç‰‡é›†ç¾¤æ¥è§£å†³å¤§æ•°æ®é‡ï¼Œé«˜æ€§èƒ½çš„è®¾è®¡<br>        æå‡ºä¸¤ä¸ªå…³é”®é—®é¢˜ï¼šæ•°æ®åˆ†ç‰‡ä¸å®ä¾‹é—´å¦‚ä½•å»ºç«‹å¯¹åº”å…³ç³»ï¼Œ2ï¼Œå®¢æˆ·ç«¯å¦‚ä½•çŸ¥æ™“å»å“ªä¸ªå®ä¾‹ä¸­è·å–æ•°æ®<br><br>3ï¼Œä¸ºäº†è®²æ˜ç™½ï¼Œä½œè€…è®²äº†å“ªäº›è¦ç‚¹ï¼Ÿæœ‰å“ªäº›äº®ç‚¹ï¼Ÿ<br>       1ï¼Œäº®ç‚¹1ï¼šè¿™ä¸€è¯¾æˆ‘æ›´åŠ æ¸…æ™°çš„æ˜ç™½äº†ä¹‹å‰åˆ«äººèŠRedisæ‰©å®¹ä¸­çš„çºµå‘æ‰©å®¹å’Œæ¨ªå‘æ‰©å®¹çš„çœŸå®å«ä¹‰å’ŒåŒºåˆ«<br>       2ï¼Œè¦ç‚¹1ï¼šæ•°æ®åˆ†ç‰‡å’Œå®ä¾‹çš„å¯¹åº”å…³ç³»å»ºç«‹ï¼šæŒ‰ç…§CRC16ç®—æ³•è®¡ç®—ä¸€ä¸ªkeyçš„16bitçš„å€¼ï¼Œåœ¨å°†è¿™å€¼å¯¹16384å–æ¨¡<br>       3ï¼Œè¦ç‚¹2ï¼šä¸€ä¸ªåˆ‡ç‰‡é›†ç¾¤çš„æ§½ä½æ˜¯å›ºå®šçš„16384ä¸ªï¼Œå¯æ‰‹åŠ¨åˆ†é…æ¯ä¸ªå®ä¾‹çš„æ§½ä½ï¼Œä½†å¿…é¡»å°†æ§½ä½å…¨éƒ¨åˆ†å®Œ<br>       4ï¼Œè¦ç‚¹3ï¼šå®¢æˆ·ç«¯å¦‚ä½•ç¡®å®šè¦è®¿é—®é‚£ä¸ªå®ä¾‹è·å–æ•°æ®ï¼š1ä»ä»»æ„ä¸ªå®ä¾‹è·å–å¹¶ç¼“å­˜åœ¨è‡ªå·±æœ¬åœ°ï¼Œ2ï¼Œé‡å®šå‘æœºåˆ¶<br>        5ï¼Œè¦ç‚¹4ï¼šé‡å®šå‘æœºåˆ¶ï¼šå®¢æˆ·ç«¯è®¿é—®çš„å®ä¾‹æ²¡æœ‰æ•°æ®ï¼Œè¢«è®¿é—®å®ä¾‹å“åº”moveå‘½ä»¤ï¼Œå‘Šè¯‰å®¢æˆ·ç«¯æŒ‡å‘æ–°çš„å®ä¾‹åœ°å€<br>         6ï¼Œè¦ç‚¹5ï¼šASKå‘½ä»¤ï¼š1ï¼Œè¡¨æ˜æ•°æ®æ­£åœ¨è¿ç§» 2ï¼Œå‘ŠçŸ¥å®¢æˆ·ç«¯æ•°æ®æ‰€åœ¨çš„å®ä¾‹<br>          7ï¼Œè¦ç‚¹6ï¼šASKå‘½ä»¤å’ŒMOVEå‘½ä»¤çš„åŒºåˆ«ï¼š<br>                    moveå‘½ä»¤æ˜¯åœ¨æ•°æ®è¿ç§»å®Œæ¯•åè¢«å“åº”ï¼Œå®¢æˆ·ç«¯ä¼šæ›´æ–°æœ¬åœ°ç¼“å­˜ã€‚<br>                    ASKå‘½ä»¤æ˜¯åœ¨æ•°æ®è¿ç§»ä¸­è¢«å“åº”ï¼Œä¸ä¼šè®©å®¢æˆ·ç«¯æ›´æ–°ç¼“å­˜<br><br>4ï¼Œå¯¹ä½œè€…æ‰€è®²ï¼Œæˆ‘æœ‰å“ªäº›å‘æ•£æ€§æ€è€ƒï¼Ÿ<br>      å¯¹äºCRC16ç®—æ³•ï¼Œåº”è¯¥å¯ä»¥ç”¨åˆ°æˆ‘ä»¬ç³»ç»Ÿå½“ä¸­ï¼Œå¯¹æ‰€æœ‰æ‰‹æœºçš„è®¾å¤‡å·è¿›è¡Œè®¡ç®—å–æ¨¡ï¼Œç”¨äºåˆ†è¡¨å­˜å‚¨æ•°æ®<br>    åœ¨ç³»ç»Ÿè®¾è®¡æ—¶ï¼Œå¯ä»¥é€šè¿‡åˆ†å±‚æˆ–å¢åŠ ä¸€å±‚æ¥æå‡ç³»ç»Ÿè®¾è®¡çš„å¼¹æ€§<br><br>5ï¼Œåœ¨å°†æ¥çš„é‚£äº›åœºæ™¯ä¸­ï¼Œæˆ‘èƒ½å¤Ÿä½¿ç”¨å®ƒï¼Ÿ<br>    <br>6ï¼Œç•™è¨€åŒºçš„æ”¶è·ï¼ˆæ¥è‡ª @Kaito å¤§ç¥ï¼‰<br>      1ï¼ŒRedis Clusterä¸é‡‡ç”¨ç›´æ¥æŠŠkeyæ˜ å°„åˆ°å®ä¾‹ï¼Œè€Œé‡‡ç”¨å“ˆå¸Œæ§½çš„æ–¹å¼åŸå› ï¼šå¯ç”¨ä½¿Redisé›†ç¾¤è®¾è®¡ï¼šç®€æ´ï¼Œé«˜æ•ˆï¼Œæœ‰å¼¹æ€§<br>              ä¸ä½¿ç”¨çš„åŠ£åŠ¿<br>                â‘ ï¼šé›†ç¾¤ä¸­çš„keyæ— æ³•é¢„ä¼°ï¼Œç›´æ¥å­˜keyå¯¹åº”å®ä¾‹çš„æ˜ å°„å…³ç³»ï¼Œéœ€å ç”¨çš„å†…å­˜ç©ºé—´ä¸å¯æ§<br>                â‘¡ï¼šClusteræ˜¯å»ä¸­å¿ƒåŒ–è®¾è®¡ï¼Œæ‰€æœ‰å®ä¾‹éƒ½éœ€ä¿å­˜å®Œæ•´çš„æ˜ å°„å…³ç³»ï¼Œ<br>                            é‡‡ç”¨ç›´æ¥çš„æ˜ å°„ï¼Œä¼šå¯¼è‡´èŠ‚ç‚¹é—´ä¿¡æ¯äº¤æ¢æˆæœ¬é«˜æ˜‚<br>                â‘¢ï¼škeyä¸å®ä¾‹ç›´æ¥æ˜ å°„ï¼Œåœ¨é›†ç¾¤æ‰©ç¼©å®¹æ—¶ï¼Œéœ€è¦æ•°æ®è¿ç§»ï¼Œæ‰€æœ‰çš„keyéƒ½éœ€è¦é‡æ–°æ˜ å°„<br>              ä½¿ç”¨çš„å¥½å¤„<br>                â‘ ï¼šåœ¨ä¸­é—´å¢åŠ ä¸€å±‚å“ˆå¸Œæ§½ï¼Œå¯ä»¥å°†æ•°æ®ä¸èŠ‚ç‚¹è§£è€¦ï¼Œä½¿æ•°æ®åˆ†é…å‡åŒ€<br>                        keyé€šè¿‡hsahè®¡ç®—åœ¨å–æ¨¡ï¼Œå¯ä»¥æŠŠæ•°æ®æ‰“çš„æ›´æ•£ï¼Œ<br>                        åªéœ€è¦å…³å¿ƒæ˜ å°„åˆ°äº†å“ªä¸ªå“ˆå¸Œæ§½ï¼Œé€šè¿‡å“ˆå¸Œæ§½æ˜ å°„è¡¨æ‰¾åˆ°å¯¹åº”çš„å®ä¾‹<br>                â‘¡ï¼šå¢åŠ å“ˆå¸Œæ§½å¯ä»¥ä½¿å¾—æ˜ å°„è¡¨æ¯”è¾ƒå°ï¼Œæœ‰åˆ©äºå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¿å­˜ï¼ŒèŠ‚ç‚¹é—´ä¿¡æ¯äº¤æ¢<br>                â‘¢ï¼šé›†ç¾¤æ‰©ç¼©å®¹ï¼Œæ•°æ®å‡è¡¡æ—¶ï¼Œæ“ä½œå•ä½æ˜¯å“ˆå¸Œæ§½ï¼Œå¯ä»¥ç®€åŒ–æ“ä½œéš¾åº¦<br>    <br>    2ï¼ŒRedisé›†ç¾¤æ–¹æ¡ˆçš„ä¸¤ä¸ªå…³é”®é—®é¢˜ï¼š<br>        â‘ ï¼šè¯·æ±‚è·¯ç”±<br>        â‘¡ï¼šæ•°æ®è¿ç§»","like_count":87,"discussions":[{"author":{"id":2561782,"avatar":"https://static001.geekbang.org/account/avatar/00/27/16/f6/97a2d38f.jpg","nickname":"å¹³å¸¸å¿ƒ","note":"","ucode":"22DBB6661AAD1A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":367648,"discussion_content":"ä¸¤å¤§å­¦ä¹ å§”å‘˜ä¹‹ä¸€","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1618412597,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1524285,"avatar":"https://static001.geekbang.org/account/avatar/00/17/42/3d/c58c776e.jpg","nickname":"Devin","note":"","ucode":"B0E62321365240","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":304587,"discussion_content":"æ¯ç¯‡å¿…çœ‹éå‡¡å“¥çš„æ€»ç»“","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1599620629,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1113597,"avatar":"https://static001.geekbang.org/account/avatar/00/10/fd/fd/326be9bb.jpg","nickname":"æ³¨å®šéå‡¡","note":"","ucode":"80673056E131B7","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1524285,"avatar":"https://static001.geekbang.org/account/avatar/00/17/42/3d/c58c776e.jpg","nickname":"Devin","note":"","ucode":"B0E62321365240","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":304621,"discussion_content":"è°¢è°¢ä½ çš„å¤¸èµï¼Œå¾ˆå¼€å¿ƒï¼Œä¸€èµ·åŠªåŠ›å­¦ä¹ è¿›æ­¥","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1599630067,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":304587,"ip_address":""},"score":304621,"extra":""}]},{"author":{"id":1507783,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/c7/549b5616.jpg","nickname":"å¤œæ¶›","note":"","ucode":"672CC53663710B","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":389301,"discussion_content":"ç¨‹åºå‘˜æœ€éœ€è¦çœ‹çš„ä¸€æœ¬ä¹¦ï¼Œä¼°è®¡å°±æ˜¯é‡‘å­—å¡”åŸç†äº†ã€‚ã€‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629209395,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2144915,"avatar":"https://static001.geekbang.org/account/avatar/00/20/ba/93/7d58263a.jpg","nickname":"æ¢¦ä¹‹å…‰","note":"","ucode":"2E808240409BDD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1507783,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/c7/549b5616.jpg","nickname":"å¤œæ¶›","note":"","ucode":"672CC53663710B","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":578216,"discussion_content":"ä¸ºå•¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656581714,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":389301,"ip_address":""},"score":578216,"extra":""}]},{"author":{"id":1253310,"avatar":"https://static001.geekbang.org/account/avatar/00/13/1f/be/551454e0.jpg","nickname":"zxy","note":"","ucode":"FFAA3F6667305D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":364925,"discussion_content":"mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617666303,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1388092,"avatar":"https://static001.geekbang.org/account/avatar/00/15/2e/3c/eae43616.jpg","nickname":"sid","note":"","ucode":"3D1F9169A19D29","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":304372,"discussion_content":"éå‡¡å“¥æ¥çš„æœ‰ç‚¹æ™šå•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599555912,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1113597,"avatar":"https://static001.geekbang.org/account/avatar/00/10/fd/fd/326be9bb.jpg","nickname":"æ³¨å®šéå‡¡","note":"","ucode":"80673056E131B7","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1388092,"avatar":"https://static001.geekbang.org/account/avatar/00/15/2e/3c/eae43616.jpg","nickname":"sid","note":"","ucode":"3D1F9169A19D29","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":304619,"discussion_content":"æœ€è¿‘åŠ ç­åŠ åˆ°å","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1599629928,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":304372,"ip_address":""},"score":304619,"extra":""}]}]},{"had_liked":false,"id":243791,"user_name":"æ‰©æ•£æ€§ç™¾ä¸‡å’¸é¢åŒ…","can_delete":false,"product_type":"c1","uid":1905171,"ip_address":"","ucode":"6D703D51553B42","user_header":"https://static001.geekbang.org/account/avatar/00/1d/12/13/e103a6e3.jpg","comment_is_top":false,"comment_ctime":1598277320,"is_pvip":false,"replies":[{"id":"89802","content":"å¦‚æœæ˜¯æ ¹æ®æŸä¸ªå­—æ®µçš„å–å€¼èŒƒå›´è¿›è¡Œrange-basedåˆ†ç‰‡ï¼Œæœ‰å¯èƒ½çš„ä¸€ä¸ªé—®é¢˜æ˜¯ï¼šæŸä¸ªrangeå†…çš„è®°å½•æ•°é‡å¾ˆå¤šï¼Œè¿™å°±ä¼šå¯¼è‡´ç›¸åº”çš„æ•°æ®åˆ†ç‰‡æ¯”è¾ƒå¤§ï¼Œä¸€èˆ¬ä¹Ÿå«åšæ•°æ®å€¾æ–œã€‚å¯¹è¿™ä¸ªæ•°æ®åˆ†ç‰‡çš„è®¿é—®é‡ä¹Ÿå¯èƒ½å¤§ï¼Œå¯¼è‡´è´Ÿè½½ä¸å‡è¡¡ã€‚<br><br>åŸºäºè®°å½•keyè¿›è¡Œå“ˆå¸Œåå†å–æ¨¡ï¼Œå¥½å¤„æ˜¯èƒ½æŠŠæ•°æ®æ‰“å¾—æ¯”è¾ƒæ•£ï¼Œä¸å¤ªå®¹æ˜“å¼•èµ·æ•°æ®å€¾æ–œï¼Œè¿˜æ˜¯ä¸ºäº†è®¿é—®æ—¶è¯·æ±‚è´Ÿè½½èƒ½åœ¨ä¸åŒæ•°æ®åˆ†ç‰‡åˆ†å¸ƒåœ°å‡è¡¡äº›ï¼Œæé«˜è®¿é—®æ€§èƒ½ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"è’‹å¾·é’§","uid":"1609687","ctime":1598282913,"ip_address":"","comment_id":243791,"utype":1}],"discussion_count":9,"race_medal":0,"score":"220641609416","product_id":100056701,"comment_content":"éš”å£åˆ†å¸ƒå¼æ•°æ®åº“ä¹Ÿè®²åˆ°äº†åˆ†ç‰‡ï¼Œä½†æ˜¯å®ƒé‡Œé¢æåˆ°ç°ä»£çš„åˆ†å¸ƒå¼æ•°æ®åº“å®ç°åˆ†ç‰‡åŸºæœ¬éƒ½æ˜¯Range-basedçš„ï¼Œèƒ½å¤Ÿå®ç°åˆ†ç‰‡çš„åŠ¨æ€è°ƒåº¦ï¼Œé€‚åˆäº’è”ç½‘çš„åœºæ™¯ã€‚é‚£ä¸ºä»€ä¹ˆRedisä¾æ—§è¦ç”¨Hash-basedçš„è®¾è®¡æ–¹å¼å‘¢ï¼Ÿæ˜¯ä¸ºäº†æ›´é«˜å¹¶å‘çš„å†™å…¥æ€§èƒ½å—ï¼Ÿ","like_count":51,"discussions":[{"author":{"id":1012839,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/74/67/46bb05de.jpg","nickname":"æ€€åˆš","note":"","ucode":"F778DDE910918E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":340745,"discussion_content":"ä¸ªäººè®¤ä¸ºrediså‡ ä¹æ˜¯æŒ‰ç…§keyçš„ç‚¹æŸ¥æ›´é€‚åˆå“ˆå¸Œï¼Œåˆ†å¸ƒå¼æ•°æ®åº“è¦ç»¼åˆè€ƒè™‘ç‚¹æŸ¥å’ŒèŒƒå›´æ‰«æï¼Œrangeåˆ†åŒºå­˜åœ¨å†™å…¥çƒ­ç‚¹å¼Šç«¯ï¼Œä½†èƒ½å¤Ÿæ›´å¥½çš„æ”¯æŒåŠ¨æ€è°ƒåº¦æ¥å¹³è¡¡è®¿é—®è´Ÿè½½","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1610115644,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1226968,"avatar":"https://static001.geekbang.org/account/avatar/00/12/b8/d8/f81b5604.jpg","nickname":"hcyycb","note":"","ucode":"77FF6CA41F9E66","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1012839,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/74/67/46bb05de.jpg","nickname":"æ€€åˆš","note":"","ucode":"F778DDE910918E","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":539983,"discussion_content":"range + hash çš„æ–¹æ³•å¯ä»¥æ—¢è§£å†³æ•°æ®ä¸æ–­æ–°å¢ï¼Œå’Œåœ¨èŒƒå›´å†…çš„çƒ­ç‚¹æ•°æ®ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639909726,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":340745,"ip_address":""},"score":539983,"extra":""}]},{"author":{"id":1609687,"avatar":"https://static001.geekbang.org/account/avatar/00/18/8f/d7/fb60129d.jpg","nickname":"è’‹å¾·é’§","note":"","ucode":"833985C2C37C0A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504397,"discussion_content":"å¦‚æœæ˜¯æ ¹æ®æŸä¸ªå­—æ®µçš„å–å€¼èŒƒå›´è¿›è¡Œrange-basedåˆ†ç‰‡ï¼Œæœ‰å¯èƒ½çš„ä¸€ä¸ªé—®é¢˜æ˜¯ï¼šæŸä¸ªrangeå†…çš„è®°å½•æ•°é‡å¾ˆå¤šï¼Œè¿™å°±ä¼šå¯¼è‡´ç›¸åº”çš„æ•°æ®åˆ†ç‰‡æ¯”è¾ƒå¤§ï¼Œä¸€èˆ¬ä¹Ÿå«åšæ•°æ®å€¾æ–œã€‚å¯¹è¿™ä¸ªæ•°æ®åˆ†ç‰‡çš„è®¿é—®é‡ä¹Ÿå¯èƒ½å¤§ï¼Œå¯¼è‡´è´Ÿè½½ä¸å‡è¡¡ã€‚\n\nåŸºäºè®°å½•keyè¿›è¡Œå“ˆå¸Œåå†å–æ¨¡ï¼Œå¥½å¤„æ˜¯èƒ½æŠŠæ•°æ®æ‰“å¾—æ¯”è¾ƒæ•£ï¼Œä¸å¤ªå®¹æ˜“å¼•èµ·æ•°æ®å€¾æ–œï¼Œè¿˜æ˜¯ä¸ºäº†è®¿é—®æ—¶è¯·æ±‚è´Ÿè½½èƒ½åœ¨ä¸åŒæ•°æ®åˆ†ç‰‡åˆ†å¸ƒåœ°å‡è¡¡äº›ï¼Œæé«˜è®¿é—®æ€§èƒ½ã€‚","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1598282913,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1381384,"avatar":"https://static001.geekbang.org/account/avatar/00/15/14/08/ac323169.jpg","nickname":"Forsaken","note":"","ucode":"F69EB2FBE48A37","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":366347,"discussion_content":"ä¸ªäººè§‚ç‚¹ï¼šrange-basedåˆ†ç‰‡é€‚åˆæ¡ä»¶æŸ¥è¯¢åœºæ™¯ï¼Œæ¯”å¦‚ç”µå•†ä¸­ï¼ŒæŠŠè®¢å•æ•°æ®åˆ†ç‰‡ï¼ŒæŸ¥è¯¢æŸä¸ªå•†å®¶ï¼ŒæŸä¸ªåœ°åŒºçš„å‡ºè´§é‡ï¼Œé€šè¿‡range-basedåˆ†ç‰‡ï¼ˆæŠŠèº«ä»½è¯å·æ¯”ä½œè®¢å•ç¼–å· ï¼Œèº«ä»½è¯çš„ä¸€ä½éƒ½æ˜¯æœ‰å«ä¹‰çš„ï¼‰ï¼Œæµ·é‡æ•°æ®æŸ¥è¯¢æ€§èƒ½ä¸Šæ›´å¥½ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1618040665,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1395913,"avatar":"https://static001.geekbang.org/account/avatar/00/15/4c/c9/ae464069.jpg","nickname":"å°ç™½","note":"","ucode":"31371AF6336B9F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":310359,"discussion_content":"æˆ‘è§‰å¾—é‡‡ç”¨slotå…¶å®å°±æ˜¯ä¸€è‡´æ€§hashçš„è™šæ‹ŸèŠ‚ç‚¹ï¼Œé™¤äº†å¯ä»¥è§£å†³æ•°æ®å€¾æ–œé—®é¢˜ä¹‹å¤–ï¼Œè¿˜å¯ä»¥è®©é›†ç¾¤å‡å°‘èŠ‚ç‚¹çš„æ—¶å€™ï¼Œå¯ä»¥è®©æ‰€æœ‰å‰©ä½™èŠ‚ç‚¹å‡æ‘Šå‹åŠ›ï¼","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1601797643,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1905171,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/12/13/e103a6e3.jpg","nickname":"æ‰©æ•£æ€§ç™¾ä¸‡å’¸é¢åŒ…","note":"","ucode":"6D703D51553B42","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1395913,"avatar":"https://static001.geekbang.org/account/avatar/00/15/4c/c9/ae464069.jpg","nickname":"å°ç™½","note":"","ucode":"31371AF6336B9F","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":310436,"discussion_content":"è¿™æ˜¯ä¸€è‡´æ€§å“ˆå¸Œçš„ä¼˜åŒ–æ–¹å¼ã€‚ä½†æ˜¯ä¸èƒ½è§£é‡Šä¸ºä»€ä¹ˆä¸ç”¨range based","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1601827123,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":310359,"ip_address":""},"score":310436,"extra":""}]},{"author":{"id":1197455,"avatar":"https://static001.geekbang.org/account/avatar/00/12/45/8f/a56b2214.jpg","nickname":"innocent","note":"","ucode":"368659A0DDE7E4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":347479,"discussion_content":"å› ä¸ºRedis keyä¸éœ€è¦Scan","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1612240022,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1246664,"avatar":"https://static001.geekbang.org/account/avatar/00/13/05/c8/2f849dfb.jpg","nickname":"å±±é¡¶çš„æ´","note":"","ucode":"D3E9E928A3FA62","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301429,"discussion_content":"å“ªä¸ªéš”å£ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598523043,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1012839,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/74/67/46bb05de.jpg","nickname":"æ€€åˆš","note":"","ucode":"F778DDE910918E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1246664,"avatar":"https://static001.geekbang.org/account/avatar/00/13/05/c8/2f849dfb.jpg","nickname":"å±±é¡¶çš„æ´","note":"","ucode":"D3E9E928A3FA62","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":340746,"discussion_content":"ç‹ç£Šè€å¸ˆçš„ã€Šåˆ†å¸ƒå¼æ•°æ®åº“30è®²ã€‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610116298,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":301429,"ip_address":""},"score":340746,"extra":""}]}]},{"had_liked":false,"id":243730,"user_name":"æµæµªåœ°çƒ","can_delete":false,"product_type":"c1","uid":1498137,"ip_address":"","ucode":"25210DCD353F97","user_header":"https://static001.geekbang.org/account/avatar/00/16/dc/19/c058bcbf.jpg","comment_is_top":false,"comment_ctime":1598259736,"is_pvip":false,"replies":[{"id":"89805","content":"åˆ‡ç‰‡é›†ç¾¤ä¸­æ¯ä¸ªåˆ‡ç‰‡å¯ä»¥é…ç½®ä»åº“ï¼Œä¹Ÿå¯ä»¥ä¸é…ç½®ã€‚ä¸è¿‡ä¸€èˆ¬ç”Ÿäº§ç¯å¢ƒä¸­è¿˜æ˜¯å»ºè®®å¯¹æ¯ä¸ªåˆ‡ç‰‡åšä¸»ä»é…ç½®ã€‚<br><br>å¯ä»¥ä½¿ç”¨cluster replicateå‘½ä»¤è¿›è¡Œé…ç½®ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"è’‹å¾·é’§","uid":"1609687","ctime":1598284187,"ip_address":"","comment_id":243730,"utype":1}],"discussion_count":6,"race_medal":0,"score":"104677474840","product_id":100056701,"comment_content":"è¯·é—®è€å¸ˆï¼Œé›†ç¾¤ä¸­çš„æ¯ä¸ªåˆ‡ç‰‡éƒ½æ˜¯ä¸»ä»é…ç½®çš„å—ï¼Ÿ","like_count":24,"discussions":[{"author":{"id":1609687,"avatar":"https://static001.geekbang.org/account/avatar/00/18/8f/d7/fb60129d.jpg","nickname":"è’‹å¾·é’§","note":"","ucode":"833985C2C37C0A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504375,"discussion_content":"åˆ‡ç‰‡é›†ç¾¤ä¸­æ¯ä¸ªåˆ‡ç‰‡å¯ä»¥é…ç½®ä»åº“ï¼Œä¹Ÿå¯ä»¥ä¸é…ç½®ã€‚ä¸è¿‡ä¸€èˆ¬ç”Ÿäº§ç¯å¢ƒä¸­è¿˜æ˜¯å»ºè®®å¯¹æ¯ä¸ªåˆ‡ç‰‡åšä¸»ä»é…ç½®ã€‚\n\nå¯ä»¥ä½¿ç”¨cluster replicateå‘½ä»¤è¿›è¡Œé…ç½®ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1598284187,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2295880,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/SYxHx9k1fVAZGanCk5cFVdzFyhx2pkNk45RdH1Yo3ITBH7dCWjwzEzibAnZaXayqF1TibW6ynBkCqIOd6p1Yhlew/132","nickname":"å»ºé”‹","note":"","ucode":"50E4AF68BE4488","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":576883,"discussion_content":"ä¸»è¦æ˜¯ä¸ºäº†æ¯ä¸ªåˆ†ç‰‡çš„é«˜å¯ç”¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655824275,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1365359,"avatar":"https://static001.geekbang.org/account/avatar/00/14/d5/6f/2d47868a.jpg","nickname":"æ—‹é£","note":"","ucode":"E1EE2EC4159326","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":382057,"discussion_content":"å¦‚æœåˆ‡ç‰‡ä¹Ÿé…ç½®ä¸»ä»ï¼Œ å¦‚ä½•å°†è¯»è¯·æ±‚è·¯ç”±åˆ°ä»èŠ‚ç‚¹å‘¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625391807,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":2721944,"avatar":"","nickname":"zhu_zhu","note":"","ucode":"ABBCC7F05AFA5B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1365359,"avatar":"https://static001.geekbang.org/account/avatar/00/14/d5/6f/2d47868a.jpg","nickname":"æ—‹é£","note":"","ucode":"E1EE2EC4159326","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":390642,"discussion_content":"ä¸ç”¨å•Šï¼Œä»èŠ‚ç‚¹å¹³æ—¶ä¹Ÿä¸ç”¨ï¼Œå½“ä¸»å‡ºé—®é¢˜çš„æ—¶å€™æ‰å½“ä¸»èŠ‚ç‚¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629948882,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":382057,"ip_address":""},"score":390642,"extra":""},{"author":{"id":2924014,"avatar":"https://static001.geekbang.org/account/avatar/00/2c/9d/ee/a58e330a.jpg","nickname":"åˆ˜è¶Šé˜³","note":"","ucode":"FC3EE6E01D8C92","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2721944,"avatar":"","nickname":"zhu_zhu","note":"","ucode":"ABBCC7F05AFA5B","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":553298,"discussion_content":"ä½ çš„è¯´æ³•ä¸å¯¹å‘€ï¼Œä¸»ä»ä¹Ÿæ˜¯ä¸ºäº†åˆ†æ‘Šè¯»å†™å‹åŠ›ï¼Œè¯»è¯·æ±‚å½“ç„¶å¯ä»¥å»ä»è¯»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645836816,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":390642,"ip_address":""},"score":553298,"extra":""},{"author":{"id":2982554,"avatar":"https://static001.geekbang.org/account/avatar/00/2d/82/9a/930e343e.jpg","nickname":"nowinkey","note":"","ucode":"80388CD3C919B4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2924014,"avatar":"https://static001.geekbang.org/account/avatar/00/2c/9d/ee/a58e330a.jpg","nickname":"åˆ˜è¶Šé˜³","note":"","ucode":"FC3EE6E01D8C92","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":567535,"discussion_content":"æˆ‘è§‰å¾—åˆ†æ‹…è¯»å‹åŠ›ä¹Ÿå¯ä»¥ï¼Œä¸è¿‡åˆ‡ç‰‡çš„ä¸»ä»åº”è¯¥ä¹Ÿæ˜¯ä¸ºäº†ä¸»å®•æœºï¼Œä»èƒ½ç›´æ¥ç»§æ‰¿å“ˆå¸Œæ§½ï¼Œè€Œä¸éœ€è¦æ•°æ®è¿ç§»æ“ä½œ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1650937748,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":553298,"ip_address":""},"score":567535,"extra":""}]}]},{"had_liked":false,"id":243625,"user_name":"Darren","can_delete":false,"product_type":"c1","uid":1254968,"ip_address":"","ucode":"CCD2B2C492BE9A","user_header":"https://static001.geekbang.org/account/avatar/00/13/26/38/ef063dc2.jpg","comment_is_top":false,"comment_ctime":1598233860,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"66022743300","product_id":100056701,"comment_content":"æˆ‘è®¤ä¸ºæœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š<br>1ã€å­˜åœ¨è¡¨çš„è¯ï¼Œå­˜åœ¨å•ç‚¹é—®é¢˜ï¼Œå³ä½¿éƒ¨ç½²å¤šä»½ï¼Œå­˜åœ¨æ•°æ®ä¸€è‡´æ€§é—®é¢˜ï¼Œæé«˜äº†å¤æ‚åº¦ï¼›<br>2ã€å³ä½¿è§£å†³äº†ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œä½†æ˜¯Redisä¸»æ‰“çš„æ˜¯å¿«ï¼Œè¡¨çš„è¯»å†™å¹¶å‘é—®é¢˜å¤„ç†ï¼›<br>3ã€keyå¯¹åº”çš„æ˜¯å®ä¾‹ï¼Œå¯¹åº”å…³ç³»ç²’åº¦å¤ªå¤§ï¼›<br><br>4ã€ç”¨keyåšhashé¿å…ä¾èµ–åˆ«çš„åŠŸèƒ½æˆ–è€…æœåŠ¡ï¼Œæä¾›äº†æ•´ä½“çš„å†…èšæ€§ï¼›<br>5ã€åœ¨åšRedisé›†ç¾¤ï¼Œä¸ºäº†æ•°æ®åˆ†é…å‡åŒ€ï¼Œè¿›è¡Œä¸€è‡´æ€§å“ˆå¸Œçš„æ—¶å€™ï¼Œè™šæ‹ŸèŠ‚ç‚¹å’ŒçœŸå®èŠ‚ç‚¹ä¹‹é—´è¿˜æœ‰å¯¹åº”å…³ç³»ï¼Œå­˜åœ¨å¤šçº§æ˜ å°„å…³ç³»ï¼Œå¢åŠ äº†è€—æ—¶ï¼Œå½±å“Redisä¸»çº¿ç¨‹çš„æ‰§è¡Œé€Ÿåº¦ã€‚","like_count":15,"discussions":[{"author":{"id":1937062,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/8e/a6/c3286b61.jpg","nickname":"Javaå’å¢™å·¥ç¨‹å¸ˆ","note":"","ucode":"E76AE44A9C76AE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":314341,"discussion_content":"å¯¹äº1ï¼Œåˆ†ç‰‡å’Œå¤‡ä»½æ˜¯ä¸¤ç äº‹ï¼›\nå¯¹äº5ï¼Œredisè¿™ä¸ªä¸å«ä¸€è‡´æ€§hash","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1603152557,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":246430,"user_name":"å¤©æ•Œ","can_delete":false,"product_type":"c1","uid":1059944,"ip_address":"","ucode":"CD29A622197197","user_header":"https://static001.geekbang.org/account/avatar/00/10/2c/68/c299bc71.jpg","comment_is_top":false,"comment_ctime":1599323219,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"57433898067","product_id":100056701,"comment_content":"åœ¨æ‰‹åŠ¨åˆ†é…å“ˆå¸Œæ§½æ—¶ï¼Œéœ€è¦æŠŠ 16384 ä¸ªæ§½éƒ½åˆ†é…å®Œï¼Œå¦åˆ™ Redis é›†ç¾¤æ— æ³•æ­£å¸¸å·¥ä½œã€‚ è€å¸ˆï¼Œæ‚¨æ‰‹åŠ¨åˆ†é…çš„ä¾‹å­ä¹Ÿåªåˆ†é…äº†5ä¸ªå“ˆå¸Œæ§½ï¼Œè¿™åªæ˜¯ä¸ºäº†æ•™å­¦æ–¹ä¾¿å—ï¼Ÿ<br>æˆ‘ç”¨çš„æ—¶å€™æ˜¯ä¸æ˜¯åº”è¯¥ ä»0å†™åˆ°16383, å°±åƒä¸‹é¢è¿™æ ·ï¼Ÿ<br>redis-cli -h 172.16.19.3 â€“p 6379 cluster addslots 0,1<br>redis-cli -h 172.16.19.4 â€“p 6379 cluster addslots 2,3<br>redis-cli -h 172.16.19.5 â€“p 6379 cluster addslots 4,5,6,7,8,...,16383","like_count":13,"discussions":[{"author":{"id":1048367,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/ff/2f/172b942b.jpg","nickname":"æ‰¬å¸†èµ·èˆª","note":"","ucode":"708B686F19B8DE","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":534402,"discussion_content":"æ˜¯çš„, ä¸Šé¢åªæ˜¯ä¸¾ä¾‹","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1638180398,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1926222,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/64/4e/83c61c7f.jpg","nickname":"é“ä»”","note":"","ucode":"077A290A2DCF42","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579037,"discussion_content":"redis-cli -h 172.16.19.3 â€“p 6379 cluster addslots 0-1000\nredis-cli -h 172.16.19.3 â€“p 6379 cluster addslots 1001-2000\nå¥½åƒæ˜¯å¯ä»¥è¿™æ ·çš„ èŒƒå›´çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657156678,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":243929,"user_name":"yyl","can_delete":false,"product_type":"c1","uid":1170843,"ip_address":"","ucode":"1741DACDFCA9AF","user_header":"https://static001.geekbang.org/account/avatar/00/11/dd/9b/0bc44a78.jpg","comment_is_top":false,"comment_ctime":1598329690,"is_pvip":false,"replies":[{"id":"89866","content":"å›ç­”çš„æŒºå¥½ï¼Œå¯¹hashç®—æ³•å¯ç”¨äºæ‰“æ•£é”®å€¼å¯¹åˆ†å¸ƒçš„ç†è§£åˆ°ä½ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"è’‹å¾·é’§","uid":"1609687","ctime":1598403533,"ip_address":"","comment_id":243929,"utype":1}],"discussion_count":1,"race_medal":0,"score":"57432904538","product_id":100056701,"comment_content":"è§£ç­”ï¼š<br>1. å¼•å…¥å“ˆå¸Œæ§½ï¼Œå°†keyçš„åˆ†å¸ƒä¸å…·ä½“çš„Rediså®ä¾‹è§£è€¦ï¼Œæœ‰åˆ©äºRedisæ•°æ®çš„å‡è¡¡åˆ†å¸ƒã€‚<br>2. ä¸é‡‡ç”¨å“ˆå¸Œæ§½çš„è¯ï¼ŒRediså®ä¾‹çš„æ‰©å®¹å’Œç¼©å®¹ï¼Œéœ€è¦é’ˆå¯¹æ— è§„åˆ™çš„keyè¿›è¡Œå¤„ç†ï¼Œå®ç°æ•°æ®è¿ç§»ã€‚æ­¤å¤–ï¼Œéœ€è¦å¼•å…¥è´Ÿè½½å‡è¡¡ä¸­é—´ä»¶æ¥åè°ƒå„ä¸ªRediså®ä¾‹çš„å‡è¡¡å“åº”ï¼Œç¡®ä¿æ•°æ®çš„å‡åŒ€åˆ†å¸ƒï¼›ä¸­é—´ä»¶éœ€è¦ä¿å­˜keyçš„åˆ†å¸ƒçŠ¶æ€ï¼Œä¿è¯keyçš„æŸ¥è¯¢èƒ½å¤Ÿå¾—åˆ°å“åº”ã€‚<br>å¢åŠ äº†Redisç³»ç»Ÿçš„å¤æ‚æ€§ ä¸ å¯ç»´æŠ¤æ€§ã€‚<br><br>çœ‹åˆ°é—®é¢˜åçš„ç¬¬ä¸€ååº”ï¼Œç†è§£ä¸å¤Ÿæ·±åˆ»ï¼Œè®²è¿°ä¸å¤Ÿæ¸…æ¥šã€‚è´µåœ¨æ€è€ƒå•¦ğŸ˜œ","like_count":13,"discussions":[{"author":{"id":1609687,"avatar":"https://static001.geekbang.org/account/avatar/00/18/8f/d7/fb60129d.jpg","nickname":"è’‹å¾·é’§","note":"","ucode":"833985C2C37C0A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504435,"discussion_content":"å›ç­”çš„æŒºå¥½ï¼Œå¯¹hashç®—æ³•å¯ç”¨äºæ‰“æ•£é”®å€¼å¯¹åˆ†å¸ƒçš„ç†è§£åˆ°ä½ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598403533,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":245867,"user_name":"Geek1560","can_delete":false,"product_type":"c1","uid":2028949,"ip_address":"","ucode":"5F27A28B8002E6","user_header":"https://static001.geekbang.org/account/avatar/00/1e/f5/95/a362f01b.jpg","comment_is_top":false,"comment_ctime":1599098640,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"40253804304","product_id":100056701,"comment_content":"å½“Redis Cluster åˆ†ç‰‡ä¸Šè§„æ¨¡åï¼Œæ¯”å¦‚ä¸Šç™¾ã€å‡ ç™¾åï¼Œgossipçš„é€šä¿¡å¼€é”€å°±æ˜¯é›†ç¾¤çš„ç“¶é¢ˆï¼Œè€å¸ˆè¿™å—æœ‰å¾ˆå¥½çš„æ–¹æ¡ˆå—ï¼Ÿ","like_count":10,"discussions":[{"author":{"id":1253652,"avatar":"https://static001.geekbang.org/account/avatar/00/13/21/14/423a821f.jpg","nickname":"Steven","note":"","ucode":"3FE64459842015","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":384091,"discussion_content":"å®˜æ–¹æ¨èä¸è¶…è¿‡ 1000 ä¸ªèŠ‚ç‚¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626359228,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1109527,"avatar":"https://static001.geekbang.org/account/avatar/00/10/ee/17/32183260.jpg","nickname":"é€é¥é­”å›","note":"","ucode":"6EDD906634D7CB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":367782,"discussion_content":"ä¸šåŠ¡æ‹†åˆ†æ§åˆ¶é›†ç¾¤è§„æ¨¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618468773,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1062848,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ersGSic8ib7OguJv6CJiaXY0s4n9C7Z51sWxTTljklFpq3ZAIWXoFTPV5oLo0GMTkqW5sYJRRnibNqOJQ/132","nickname":"walleæ–Œ","note":"","ucode":"0DB3243004951F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":331699,"discussion_content":"æ‰€ä»¥ ä¸€èˆ¬ é‡‡ç”¨ redis åŸç”Ÿé›†ç¾¤çš„ä¸€èˆ¬ä¸è¶…è¿‡1 200ä¸ªã€‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606956494,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":274792,"user_name":"CityAnimal","can_delete":false,"product_type":"c1","uid":1139902,"ip_address":"","ucode":"206491F70572AE","user_header":"https://static001.geekbang.org/account/avatar/00/11/64/be/12c37d15.jpg","comment_is_top":false,"comment_ctime":1611157396,"is_pvip":true,"replies":[{"id":"100462","content":"è¿™ä¸ªç¬”è®°æ•´ç†å¾—ä¸é”™ï¼Œå±‚æ¬¡åˆ†æ˜ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"è’‹å¾·é’§","uid":"1609687","ctime":1612144017,"ip_address":"","comment_id":274792,"utype":1}],"discussion_count":1,"race_medal":0,"score":"31675928468","product_id":100056701,"comment_content":"ç¬”è®°æ‰“å¡<br>    * [ ] å¤šä¸ª Redis å®ä¾‹ç»„æˆä¸€ä¸ªé›†ç¾¤<br>    * [ ] æ‰©å±•<br>        * [ ] çºµå‘æ‰©å±•ï¼ˆscale upï¼‰<br>            * [ ] ä¼˜åŠ¿<br>                * [ ] ç®€å•<br>                * [ ] ç›´æ¥<br>            * [ ] é—®é¢˜<br>                * [ ] å½“ä½¿ç”¨RDBæ—¶ï¼Œå†…å­˜è¶Šå¤§ï¼Œä¸»çº¿ç¨‹forkå°±è¶Šæœ‰å¯èƒ½é˜»å¡<br>                * [ ] å—åˆ°ç¡¬ä»¶å’Œæˆæœ¬çš„é™åˆ¶<br>        * [ ] æ¨ªå‘æ‰©å±•ï¼ˆscale outï¼‰<br>    * [ ] æ•°æ®åˆ‡ç‰‡å’Œå®ä¾‹çš„å¯¹åº”åˆ†å¸ƒå…³ç³»<br>        * [ ] Redis Cluster æ–¹æ¡ˆï¼šæ— ä¸­å¿ƒåŒ–<br>            * [ ] é‡‡ç”¨å“ˆå¸Œæ§½ï¼ˆHash Slotï¼‰æ¥å¤„ç†æ•°æ®å’Œå®ä¾‹ä¹‹é—´çš„æ˜ å°„å…³ç³»<br>            * [ ] ä¸€ä¸ªåˆ‡ç‰‡é›†ç¾¤å…±æœ‰ 16384 ä¸ªå“ˆå¸Œæ§½<br>            * [ ] å…·ä½“çš„æ˜ å°„è¿‡ç¨‹<br>                * [ ] 1. æ ¹æ®é”®å€¼å¯¹çš„ keyï¼ŒæŒ‰ç…§CRC16 ç®—æ³•è®¡ç®—ä¸€ä¸ª 16 bit çš„å€¼ï¼›<br>                * [ ] 2. å†ç”¨è¿™ä¸ª 16bit å€¼å¯¹ 16384 å–æ¨¡ï¼Œå¾—åˆ° 0~16383 èŒƒå›´å†…çš„æ¨¡æ•°ï¼Œæ¯ä¸ªæ¨¡æ•°ä»£è¡¨ä¸€ä¸ªç›¸åº”ç¼–å·çš„å“ˆå¸Œæ§½<br>            * [ ] å“ˆå¸Œæ§½æ˜ å°„åˆ°å…·ä½“çš„ Redis å®ä¾‹ä¸Š<br>                * [ ] 1. ç”¨ cluster create å‘½ä»¤åˆ›å»ºé›†ç¾¤<br>                    * [ ] Redis ä¼šè‡ªåŠ¨æŠŠè¿™äº›æ§½å¹³å‡åˆ†å¸ƒåœ¨é›†ç¾¤å®ä¾‹ä¸Š<br>                * [ ] 2. ä½¿ç”¨ cluster meet å‘½ä»¤æ‰‹åŠ¨å»ºç«‹å®ä¾‹é—´çš„è¿æ¥ï¼Œå½¢æˆé›†ç¾¤ï¼Œå†ä½¿ç”¨ cluster addslots å‘½ä»¤ï¼ŒæŒ‡å®šæ¯ä¸ªå®ä¾‹ä¸Šçš„å“ˆå¸Œæ§½ä¸ªæ•°<br>                    * [ ] å°æé†’ï¼Œéœ€è¦æŠŠ 16384 ä¸ªæ§½éƒ½åˆ†é…å®Œï¼Œå¦åˆ™ Redis é›†ç¾¤æ— æ³•æ­£å¸¸å·¥ä½œ<br>        * [ ] ShardedJedisï¼šåŸºäºå®¢æˆ·ç«¯åˆ†åŒº<br>        * [ ] Codisã€Twemproxy ï¼šåŸºäºä»£ç†<br>    * [ ] å®¢æˆ·ç«¯å¦‚ä½•å®šä½æ•°æ®<br>        * [ ] Redis å®ä¾‹ä¼šæŠŠè‡ªå·±çš„å“ˆå¸Œæ§½ä¿¡æ¯å‘ç»™å’Œå®ƒç›¸è¿æ¥çš„å…¶å®ƒå®ä¾‹ï¼Œæ¥å®Œæˆå“ˆå¸Œæ§½åˆ†é…ä¿¡æ¯çš„æ‰©æ•£<br>        * [ ] å®¢æˆ·ç«¯å’Œé›†ç¾¤å®ä¾‹å»ºç«‹è¿æ¥åï¼Œå®ä¾‹å°±ä¼šæŠŠå“ˆå¸Œæ§½çš„åˆ†é…ä¿¡æ¯å‘ç»™å®¢æˆ·ç«¯<br>        * [ ] å®¢æˆ·ç«¯ä¼šæŠŠå“ˆå¸Œæ§½ä¿¡æ¯ç¼“å­˜åœ¨æœ¬åœ°ã€‚å½“è¯·æ±‚é”®å€¼å¯¹æ—¶ï¼Œä¼šå…ˆè®¡ç®—é”®æ‰€å¯¹åº”çš„å“ˆå¸Œæ§½<br>        * [ ] ä½†é›†ç¾¤ä¸­ï¼Œå®ä¾‹å’Œå“ˆå¸Œæ§½çš„å¯¹åº”å…³ç³»å¹¶ä¸æ˜¯ä¸€æˆä¸å˜çš„<br>            * [ ] å®ä¾‹æ–°å¢æˆ–åˆ é™¤<br>            * [ ] è´Ÿè½½å‡è¡¡<br>        * [ ] å®ä¾‹ä¹‹é—´å¯ä»¥é€šè¿‡ç›¸äº’ä¼ é€’æ¶ˆæ¯ï¼Œè·å¾—æœ€æ–°çš„å“ˆå¸Œæ§½åˆ†é…ä¿¡æ¯ï¼Œä½†å®¢æˆ·ç«¯æ˜¯æ— æ³•ä¸»åŠ¨æ„ŸçŸ¥è¿™äº›å˜åŒ–<br>        * [ ] **é‡å®šå‘æœºåˆ¶**<br>            * [ ] 1. å¦‚æœå®ä¾‹ä¸Šæ²¡æœ‰è¯¥é”®å€¼å¯¹æ˜ å°„çš„å“ˆå¸Œæ§½ï¼Œå°±ä¼šè¿”å› MOVED å‘½ä»¤<br>                * [ ] å®¢æˆ·ç«¯ä¼šæ›´æ–°æœ¬åœ°ç¼“å­˜<br>            * [ ] 2. åœ¨**è¿ç§»éƒ¨åˆ†å®Œæˆ**æƒ…å†µä¸‹ï¼Œè¿”å›ASK<br>                * [ ] è¡¨æ˜ Slot æ•°æ®è¿˜åœ¨è¿ç§»ä¸­<br>                * [ ] ASK å‘½ä»¤æŠŠå®¢æˆ·ç«¯æ‰€è¯·æ±‚æ•°æ®çš„æœ€æ–°å®ä¾‹åœ°å€è¿”å›ç»™å®¢æˆ·ç«¯<br>                * [ ] å¹¶ä¸ä¼šæ›´æ–°å®¢æˆ·ç«¯ç¼“å­˜çš„å“ˆå¸Œæ§½åˆ†é…ä¿¡æ¯","like_count":7,"discussions":[{"author":{"id":1609687,"avatar":"https://static001.geekbang.org/account/avatar/00/18/8f/d7/fb60129d.jpg","nickname":"è’‹å¾·é’§","note":"","ucode":"833985C2C37C0A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":514126,"discussion_content":"è¿™ä¸ªç¬”è®°æ•´ç†å¾—ä¸é”™ï¼Œå±‚æ¬¡åˆ†æ˜ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612144017,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":243601,"user_name":"å°å®‡å­2B","can_delete":false,"product_type":"c1","uid":1254615,"ip_address":"","ucode":"E360188C65EAEA","user_header":"https://static001.geekbang.org/account/avatar/00/13/24/d7/146f484b.jpg","comment_is_top":false,"comment_ctime":1598227053,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"31662998125","product_id":100056701,"comment_content":"1.è®©keyåœ¨å¤šä¸ªå®ä¾‹ä¸Šåˆ†å¸ƒæ›´å‡åŒ€<br>2.éœ€è¦rehashçš„æ—¶å€™ï¼Œè¿˜è¦å»ä¿®æ”¹è¿™ä¸ªå¯¹åº”å…³ç³»è¡¨ï¼Œä»£ä»·æœ‰ç‚¹å¤§<br>3.å­˜åœ¨è¡¨é‡Œï¼Œkeyçš„æ•°é‡å¤ªå¤§ï¼Œè¡¨çš„ç»´æŠ¤æ˜¯ä¸ªé—®é¢˜","like_count":7},{"had_liked":false,"id":243621,"user_name":"å†™ç‚¹å•¥å‘¢","can_delete":false,"product_type":"c1","uid":1065272,"ip_address":"","ucode":"C19032CF1C41BA","user_header":"https://static001.geekbang.org/account/avatar/00/10/41/38/4f89095b.jpg","comment_is_top":false,"comment_ctime":1598233227,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"23073069707","product_id":100056701,"comment_content":"è¯·é—®è€å¸ˆï¼Œåœ¨é‡å®šå‘çš„æœºåˆ¶ä¸­ï¼Œåƒä¾‹å­é‡Œçš„æƒ…å†µkey1 key2å·²ç»è¿ç§»åˆ°æ–°çš„å®ä¾‹3ï¼Œkey3 key4è¿˜åœ¨å®ä¾‹2çš„æ—¶å€™ï¼Œå¦‚æœå®¢æˆ·ç«¯è¯·æ±‚çš„æ˜¯key3çš„è¯ï¼Œå®ƒæ˜¯ä¼šå¾—åˆ°å®ä¾‹2ç›´æ¥è¿”å›key3çš„valueè¿˜æ˜¯å¾—åˆ°ASKï¼Ÿå¦‚æœæ˜¯ASKé‚£ä¹ˆå®¢æˆ·ç«¯å»ASKING å®ä¾‹3çš„æ—¶å€™ä¼šä¸ä¼šé˜»å¡åˆ°key3è¿ç§»å®Œæˆï¼Ÿè°¢è°¢","like_count":5,"discussions":[{"author":{"id":1357937,"avatar":"https://static001.geekbang.org/account/avatar/00/14/b8/71/552e4afb.jpg","nickname":"next station","note":"","ucode":"ABF39067778FD6","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":313875,"discussion_content":"1. æºèŠ‚ç‚¹ä¼šå…ˆåœ¨è‡ªå·±çš„æ•°æ®åº“é‡Œé¢æŸ¥æ‰¾æŒ‡å®šçš„é”®ï¼Œå¦‚æœæ‰¾åˆ°çš„è¯ï¼Œå°±ç›´æ¥æ‰§è¡Œå®¢æˆ·ç«¯å‘é€çš„å‘½ä»¤\n2. å¦‚æœæºèŠ‚ç‚¹æ²¡èƒ½åœ¨è‡ªå·±çš„æ•°æ®åº“é‡Œé¢æ‰¾åˆ°æŒ‡å®šçš„é”®ï¼Œé‚£ä¹ˆè¿™ä¸ªé”®æœ‰å¯èƒ½å·²ç»è¢«è¿ç§»åˆ°äº†ç›®æ ‡èŠ‚ç‚¹ï¼ŒæºèŠ‚ç‚¹å°†å‘å®¢æˆ·ç«¯è¿”å›ä¸€ä¸ªASKé”™è¯¯","likes_number":9,"is_delete":false,"is_hidden":false,"ctime":1603101360,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1226196,"avatar":"https://static001.geekbang.org/account/avatar/00/12/b5/d4/3bd5b77b.jpg","nickname":"ä½‘å„¿","note":"","ucode":"0629888E7A5E16","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":312709,"discussion_content":"åŒé—®åŒé—®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602775613,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1738493,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Qn1PDx7xA7jKFZr4vHibmsvoZ7bwUCzHTg3uywiaESCgFTTMibPpKdZOfrqTXtdQXxUJqFqmLAj5NoIFMJpYibbcOQ/132","nickname":"happy learn","note":"","ucode":"BCE08C8E64A23E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":306025,"discussion_content":"åŒé—®å•Šï¼ï¼ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600150488,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":276010,"user_name":"é©¬å¬","can_delete":false,"product_type":"c1","uid":1430132,"ip_address":"","ucode":"93D83CB5FAE5AD","user_header":"https://static001.geekbang.org/account/avatar/00/15/d2/74/7861f504.jpg","comment_is_top":false,"comment_ctime":1611744026,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"18791613210","product_id":100056701,"comment_content":"æ€»ç»“<br>1 key å’Œæ§½å…·ä½“çš„æ˜ å°„è¿‡ç¨‹åˆ†ä¸ºä¸¤å¤§æ­¥ï¼š<br>é¦–å…ˆæ ¹æ®é”®å€¼å¯¹çš„ keyï¼ŒæŒ‰ç…§CRC16 ç®—æ³•è®¡ç®—ä¸€ä¸ª 16 bit çš„å€¼ï¼›å†ç”¨è¿™ä¸ª 16bit å€¼å¯¹ 16384 å–æ¨¡ï¼Œå¾—åˆ° 0~16383 èŒƒå›´å†…çš„æ¨¡æ•°ï¼Œæ¯ä¸ªæ¨¡æ•°ä»£è¡¨ä¸€ä¸ªç›¸åº”ç¼–å·çš„å“ˆå¸Œæ§½ã€‚<br><br>2 å®šä½åˆ°é”®å€¼å¯¹çš„æ§½ï¼Œä¹Ÿæ˜¯é€šè¿‡CRC16 ç®—æ³•è®¡ç®—ä¸€ä¸ªå€¼ï¼Œå†å¯¹16384 å–æ¨¡è®¡ç®—å‡ºæ¥çš„ã€‚<br><br>3 è€Œå“ˆå¸Œæ§½å…·ä½“åœ¨å“ªä¸ªå®ä¾‹ä¸Šï¼Œæ˜¯ç¼“å­˜åœ¨å®¢æˆ·ç«¯æœ¬åœ°<br><br>4 ä½†æ˜¯å®ä¾‹å’Œå“ˆå¸Œæ§½çš„å¯¹åº”å…³ç³»å¯èƒ½ä¼šå› ä¸ºä»¥ä¸‹åŸå› å‘é€å˜åŒ–ï¼š<br>aã€å¢åˆ å®ä¾‹<br>bã€è´Ÿè½½å‡è¡¡<br><br>5 å½“å®ä¾‹å’Œå“ˆå¸Œæ§½å¯¹åº”å…³ç³»å‘é€å˜åŒ–æ˜¯ï¼Œå°±ä¼šä½¿ç”¨é‡å®šå‘æœºåˆ¶<br><br>6 é‡å®šå‘æœºåˆ¶ï¼šå®¢æˆ·ç«¯æŠŠæ“ä½œè¯·æ±‚å‘ç»™æŸä¸ªå®ä¾‹ï¼Œå¦‚æœè¿™ä¸ªå®ä¾‹ä¸Šå¹¶æ²¡æœ‰è¿™ä¸ªé”®å€¼å¯¹æ˜ å°„çš„å“ˆå¸Œæ§½ï¼Œåˆ™ä¼šç»™å®¢æˆ·ç«¯è¿”å› MOVED å‘½ä»¤ï¼Œè¿™ä¸ªå‘½ä»¤åŒ…å«äº†æ–°å®ä¾‹çš„è®¿é—®åœ°å€ï¼Œå®¢æˆ·ç«¯ä¼šå†æ¬¡å‘èµ·è¯·æ±‚ï¼ŒåŒæ—¶è¿˜ä¼šæ›´æ–°æœ¬åœ°ç¼“å­˜ã€‚<br><br>7 å¦‚æœ slot æ­£åœ¨è¿ç§»ï¼Œåˆ™å®¢æˆ·ç«¯ä¼šæ”¶åˆ°ä¸€æ¡ ASK æŠ¥é”™ä¿¡æ¯ï¼Œå‘Šè¯‰å®¢æˆ·ç«¯æ­£åœ¨è¿ç§»ï¼ˆASK å‘½ä»¤å¹¶ä¸ä¼šæ›´æ–°å®¢æˆ·ç«¯ç¼“å­˜çš„å“ˆå¸Œæ§½åˆ†é…ä¿¡æ¯ï¼‰ï¼Œæ­¤æ—¶ï¼Œå®¢æˆ·ç«¯éœ€è¦å…ˆç»™ slot æ‰€åœ¨çš„å®ä¾‹å‘é€ä¸€ä¸ª ASKING å‘½ä»¤ï¼Œè¡¨ç¤ºè®©è¿™ä¸ªå®ä¾‹è¿è¡Œæ‰§è¡Œå®¢æˆ·ç«¯æ¥ä¸‹æ¥å‘é€çš„å‘½ä»¤ï¼Œç„¶åå®¢æˆ·ç«¯å†å‘è¿™ä¸ªå®ä¾‹å‘é€å¯¹åº”çš„æ“ä½œå‘½ä»¤","like_count":4},{"had_liked":false,"id":301918,"user_name":"Inno","can_delete":false,"product_type":"c1","uid":2142543,"ip_address":"","ucode":"8CB14D9A54CC9B","user_header":"https://static001.geekbang.org/account/avatar/00/20/b1/4f/f0b9b11d.jpg","comment_is_top":false,"comment_ctime":1625974987,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14510876875","product_id":100056701,"comment_content":"å¦‚æœåˆ‡ç‰‡é›†ç¾¤ä¸­çš„ä¸€ä¸ªå®ä¾‹ä»é›†ç¾¤ç§»é™¤ï¼Œå®¢æˆ·ç«¯è®¿é—®æ—¶ï¼Œå¾—ä¸åˆ°MOVEDä¿¡æ¯ï¼Œé‡å®šå‘æ— æ³•è¿›è¡Œï¼Œæ€ä¹ˆè¿›è¡Œæ•°æ®è®¿é—®å‘¢ï¼Ÿ","like_count":3},{"had_liked":false,"id":243612,"user_name":"bookå°¾æ±","can_delete":false,"product_type":"c1","uid":1446375,"ip_address":"","ucode":"AE2B8DFC643ACC","user_header":"https://static001.geekbang.org/account/avatar/00/16/11/e7/044a9a6c.jpg","comment_is_top":false,"comment_ctime":1598230951,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"14483132839","product_id":100056701,"comment_content":"æ§½ç›¸å½“äºè™šæ‹ŸèŠ‚ç‚¹ï¼Œè¿™æ ·å¯ä»¥çµæ´»çš„æ‰©ç¼©å®¹ï¼Œå› ä¸ºæ˜¯æŒ‰æ§½æ•°åˆ†çš„keyï¼Œè¿™æ˜¯ä¸»è¦çš„ä¼˜ç‚¹ï¼Œè€Œä¸”åªéœ€è¦å­˜æ§½ä¸æœºå™¨å®ä¾‹çš„å¯¹åº”å…³ç³»ï¼Œä¸ç”¨æ¯ä¸ªå®ä¾‹éƒ½å­˜ä¸€ä»½æ‰€æœ‰çš„é”®å¯¹åº”çš„å®ä¾‹ï¼ŒèŠ‚çœå†…å­˜","like_count":3},{"had_liked":false,"id":261922,"user_name":"Geek_be0aff","can_delete":false,"product_type":"c1","uid":1902223,"ip_address":"","ucode":"C14ABF4146A2CF","user_header":"","comment_is_top":false,"comment_ctime":1605579813,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10195514405","product_id":100056701,"comment_content":"redis clusterçš„å‰¯æœ¬æœºåˆ¶æ˜¯æ€æ ·çš„ï¼Œå¦‚ä½•ä¿éšœå¯é æ€§çš„ï¼Œä»ç„¶éœ€è¦ä¾èµ–redis sentinelå—ï¼Ÿ","like_count":2},{"had_liked":false,"id":243824,"user_name":"Monday","can_delete":false,"product_type":"c1","uid":1250907,"ip_address":"","ucode":"77B9BACC783598","user_header":"https://static001.geekbang.org/account/avatar/00/13/16/5b/83a35681.jpg","comment_is_top":false,"comment_ctime":1598283278,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"10188217870","product_id":100056701,"comment_content":"æ€è€ƒé¢˜ï¼š<br>1ã€ä½¿ç”¨CRCè¿™ä¸ªhashå‡½æ•°åŸå› <br>1ï¼‰hashä»æŸ¥è¯¢slotçš„æ—¶é—´å¤æ‚åº¦ä¸Šè®²ï¼ŒCRCä¸ºO(1)ï¼›å­˜è¡¨ï¼ˆç†è§£ä¸ºæœ‰åºæ•°ç»„æˆ–è·³è¡¨ï¼‰ï¼Œå†å¿«ä¹Ÿå°±æ˜¯O(Log n)<br>2ï¼‰hashä»å­˜å‚¨æ˜ å°„å…³ç³»çš„ç©ºé—´å¤æ‚åº¦ä¸Šè®²ï¼ŒCRCä¸ºO(1)ï¼›å­˜è¡¨ï¼Œè‡³å°‘ä¹Ÿå¾—O(n)ï¼Œè‹¥æ˜¯è·³è¡¨è¿˜å¾—å­˜é¢å¤–çš„ç´¢å¼•<br><br>å¦å¤–æˆ‘æœ‰ä¸¤ä¸ªé—®é¢˜å’¨è¯¢ä¸‹è€å¸ˆï¼Œæœ›ç­”å¤ï¼Œè°¢è°¢ï¼<br>1ã€Redisåˆ‡ç‰‡é›†ç¾¤ä½¿ç”¨CRCè¿™ä¸ªhashå‡½æ•°å…ˆè·å–åˆ°å…·ä½“çš„slotï¼Œç„¶ååœ¨å…·ä½“çš„slotä¸­ï¼Œæ˜¯ä¸æ˜¯å†é€šè¿‡å¦ä¸€ä¸ªhashå‡½æ•°è®¿é—®Keyå¯¹åº”çš„å€¼ï¼Ÿç±»ä¼¼äºJavaç»“æ„ï¼šHashMap&lt;String, HashMap&lt;String,Object&gt;&gt;<br>2ã€Redisçš„slotæ•°é‡ä¸ºä»€ä¹ˆæ˜¯16384=2^14ä¸ªï¼Œå¦‚æœç”¨2Bæ¥å­˜é•¿åº¦ä¹Ÿæ˜¯2^16=65536ä¸ªå•Šï¼Ÿ<br><br>","like_count":2,"discussions":[{"author":{"id":1102245,"avatar":"https://static001.geekbang.org/account/avatar/00/10/d1/a5/2bbedc3b.jpg","nickname":"over","note":"","ucode":"FE272AC19842D3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":377381,"discussion_content":"ç¬¬äºŒé—®ï¼Œå› ä¸º2.14æ˜¯æƒ…äººèŠ‚ï¼Œä½œè€…æƒ³æµªæ¼«ä¸€ä¸‹","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1622622692,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1926642,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/65/f2/24e48aae.jpg","nickname":"é£ç™½","note":"","ucode":"2586407256F3B3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":353160,"discussion_content":"redisé›†ç¾¤å®ä¾‹äº¤æ¢slotä¿¡æ¯ï¼Œä¼šå ç”¨ç½‘ç»œå¸¦å®½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615039007,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2068684,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eotIianb3beTzsGIte6BZxlIhEwc2ryrNBGxZy8ibKbfibVJyUS8d3ZxybAdfJwHPm13ydPC4VJP7Lbw/132","nickname":"taku","note":"","ucode":"B22DA9A4A9DC91","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":341651,"discussion_content":"ç¬¬äºŒé—®redisä½œè€…æœ‰å›ç­”è¿‡ï¼Œä»–è§‰å¾—2@14å¤Ÿç”¨ï¼Œä»…æ­¤è€Œå·²ï¼Œä½ å¯ä»¥æŸ¥ä¸€ä¸‹åŸæ–‡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610496156,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":243667,"user_name":"williamcai","can_delete":false,"product_type":"c1","uid":1158294,"ip_address":"","ucode":"B158F52C2D39BC","user_header":"https://static001.geekbang.org/account/avatar/00/11/ac/96/46b13896.jpg","comment_is_top":false,"comment_ctime":1598244082,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10188178674","product_id":100056701,"comment_content":"å¦‚æœæŒ‰ç…§é”®å€¼å­˜å‚¨çš„è¯ï¼Œæ•°æ®é‡å¾ˆå¤§ï¼Œå¯¼è‡´è¯¥æ˜ å°„å ç”¨ç©ºé—´ä¼šå¾ˆå¤§ï¼Œè¿›è€Œå½±å“æŸ¥è¯¢é€Ÿåº¦ï¼Œé‡‡ç”¨æ˜ å°„å¡æ“¦çš„æ–¹å¼æœ‰äº›ä¸å¤šçº§ç›®å½•æœ‰å¼‚æ›²åŒå·¥ä¹‹å¦™","like_count":2},{"had_liked":false,"id":352198,"user_name":"going","can_delete":false,"product_type":"c1","uid":2313353,"ip_address":"","ucode":"3AA83F9B07BE8B","user_header":"https://static001.geekbang.org/account/avatar/00/23/4c/89/82a3ee04.jpg","comment_is_top":false,"comment_ctime":1658452761,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5953420057","product_id":100056701,"comment_content":"æˆ‘æ„Ÿè§‰ä¹‹æ‰€ä»¥ä¸é‡‡ç”¨ç›´æ¥æ˜ å°„çš„åŸå› ï¼Œæ˜¯å› ä¸ºå†…å­˜é™åˆ¶ã€‚è€å¸ˆæˆ‘æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œä¸ºä»€ä¹ˆåœ¨æ§½å†åˆ†é…çš„æ—¶å€™ï¼Œä¸ä¼šå°†å®¢æˆ·ç«¯çš„æ§½åˆ†å¸ƒç¼“å­˜ä¸€æ¬¡æ›´æ–°æˆ–è€…ç›´æ¥å‘å®¢æˆ·ç«¯pushï¼Œå¦‚æœæ§½æ”¹åŠ¨æ¯”è¾ƒå¤§ï¼Œå²‚ä¸æ˜¯æ¯æ¬¡éƒ½éœ€è¦è¿›è¡Œé‡å®šå‘ã€‚å½“ç„¶ä¹Ÿè¦è€ƒè™‘åˆ°æ§½å†åˆ†é…çš„é¢‘ç¹ç¨‹åº¦ä¼šå½±å“æ›´æ–°æ•ˆç‡ï¼Œæ¯•ç«Ÿæ›´æ–°ä¸€æ¡è¦æ¯”å…¨éƒ¨æ›´æ–°æ•ˆç‡é«˜ã€‚","like_count":1},{"had_liked":false,"id":344468,"user_name":"å¯¥è‹¥æ™¨æ˜Ÿ","can_delete":false,"product_type":"c1","uid":1447739,"ip_address":"","ucode":"2E87E43687DE72","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eou1BMETumU21ZI4yiaLenOMSibzkAgkw944npIpsJRicmdicxlVQcgibyoQ00rdGk9Htp1j0dM5CP2Fibw/132","comment_is_top":false,"comment_ctime":1651571990,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5946539286","product_id":100056701,"comment_content":"ä¸ºå•¥è¦å…ˆç»™æ–°å®ä¾‹å‘é€ä¸€æ¬¡ASKINGå‘½ä»¤å‘¢ï¼Œæ„Ÿè§‰è¿™ä¸€æ­¥æœ‰ç‚¹å¤šä½™","like_count":1},{"had_liked":false,"id":305579,"user_name":"æ„ç¦è¡Œ","can_delete":false,"product_type":"c1","uid":1637619,"ip_address":"","ucode":"B940AA60B5CCEE","user_header":"https://static001.geekbang.org/account/avatar/00/18/fc/f3/28fe16cf.jpg","comment_is_top":false,"comment_ctime":1628057642,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5923024938","product_id":100056701,"comment_content":"æ„Ÿè§‰ slot å’Œä¸€è‡´æ€§å“ˆå¸Œé‡Œè™šæ‹ŸèŠ‚ç‚¹æœ‰ç‚¹åƒï¼Œå¯ä»¥é˜²æ­¢èŠ‚ç‚¹å¤ªå°‘å¯¼è‡´hashç»“æœåˆ†å¸ƒä¸å‡çš„é—®é¢˜ã€‚ç„¶åé‡å®šå‘å’ŒHTTPçš„é‡å®šå‘åŸºæœ¬ä¸€è‡´ï¼ŒMOVED=301 æ°¸ä¹…é‡å®šå‘ ASK=302 ä¸´æ—¶é‡å®šå‘ã€‚","like_count":1},{"had_liked":false,"id":302403,"user_name":"redo","can_delete":false,"product_type":"c1","uid":1722762,"ip_address":"","ucode":"88661F4DE68373","user_header":"https://static001.geekbang.org/account/avatar/00/1a/49/8a/315c9ca3.jpg","comment_is_top":false,"comment_ctime":1626192268,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5921159564","product_id":100056701,"comment_content":"æœ‰ä¸€ä¸ªé—®é¢˜æƒ³è¯·å‡ä¸‹å„ä½å¤§ä½¬ï¼Œå½“é›†ç¾¤ä¸­å‘ç”ŸSloté‡æ–°åˆ†é…æ—¶ï¼Œä¸ºä»€ä¹ˆæ²¡æœ‰åŠæ³•å‘ŠçŸ¥å®¢æˆ·ç«¯å‘¢ï¼Œæˆ‘è®°å¾—åœ¨å“¨å…µæ¨¡å¼ä¸­ï¼Œå“¨å…µå¯ä»¥é€šçŸ¥å®¢æˆ·ç«¯ä¸»èŠ‚ç‚¹å·²ç»åˆ‡æ¢ï¼Œæ„å‘³ç€æœåŠ¡ç«¯æ˜¯èƒ½å¤Ÿé€šçŸ¥åˆ°å®¢æˆ·ç«¯çš„ï¼Œåœ¨é‡æ–°åˆ†é…åé©¬ä¸Šé€šçŸ¥ç»™å®¢æˆ·ç«¯ï¼Œä¸æ˜¯å¯ä»¥å‡å°‘é‡å®šå‘äº§ç”Ÿçš„æŸè€—äº†å—","like_count":1,"discussions":[{"author":{"id":1123146,"avatar":"https://static001.geekbang.org/account/avatar/00/11/23/4a/c608bdf6.jpg","nickname":"ä¸‰çŸ³","note":"","ucode":"734DCECABC3BEC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":389240,"discussion_content":"é€šçŸ¥åº”è¯¥å¯ä»¥é€šçŸ¥ï¼Œä½†æ˜¯é‡æ–°åˆ†é…æ˜¯è¦æœ‰ä¸ªè¿‡ç¨‹çš„ï¼Œäº‹å‰äº‹ä¸­äº‹åéƒ½ä¸å¤ªåˆé€‚ï¼Œä¸å¦‚è¿™ç§é‡å®šå‘æ¥çš„å®é™…","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629188365,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":301664,"user_name":"Ryan","can_delete":false,"product_type":"c1","uid":2665674,"ip_address":"","ucode":"D0DA57BC2783AC","user_header":"https://static001.geekbang.org/account/avatar/00/28/ac/ca/70eceba3.jpg","comment_is_top":false,"comment_ctime":1625803939,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"5920771235","product_id":100056701,"comment_content":"Redis å®ä¾‹ä¼šæŠŠè‡ªå·±çš„å“ˆå¸Œæ§½ä¿¡æ¯å‘ç»™å’Œå®ƒç›¸è¿æ¥çš„å…¶å®ƒå®ä¾‹ï¼Œè¿™ä¸ªæ€ä¹ˆå‘ç»™å…¶ä»–çš„å®ä¾‹å‘¢ï¼Ÿé€šè¿‡pub&#47;subå—","like_count":1,"discussions":[{"author":{"id":2420294,"avatar":"https://static001.geekbang.org/account/avatar/00/24/ee/46/7d65ae37.jpg","nickname":"æœ¨å‡ ä¸¶","note":"","ucode":"FFDB958DA64F8C","race_medal":5,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":553732,"discussion_content":"å‘é€PINGå‘½ä»¤ï¼ŒåŸºäºgossipåè®®è¾¾åˆ°æœ€ç»ˆä¸€è‡´æ€§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646043290,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":297983,"user_name":"Geek_a4a442","can_delete":false,"product_type":"c1","uid":2647928,"ip_address":"","ucode":"05E9CF00EE2666","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/wHrIiaTTLw3HuciaHIQJNZZk3Tlj8eljoSHd3Ctt7Zka7SeuGA8WkQ91to4Bmm8t6RKl5hoUWIS7icwOoQWmI8tBg/132","comment_is_top":false,"comment_ctime":1623859034,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"5918826330","product_id":100056701,"comment_content":"forkçš„æ—¶å€™å¤åˆ¶çš„æ˜¯è¿›ç¨‹é¡µè¡¨ï¼Œè€Œ25GBå†…å­˜æ‰€éœ€è¦çš„è¿›ç¨‹é¡µè¡¨å¹¶ä¸å¤§ï¼Œä¸ºä»€ä¹ˆéœ€è¦æ¥è¿‘ç§’çº§çš„æ—¶é—´å‘¢ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1186048,"avatar":"https://static001.geekbang.org/account/avatar/00/12/19/00/82d6bb18.jpg","nickname":"å¨„","note":"","ucode":"8B7909A1E78604","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":552005,"discussion_content":"åŒé—®è¿™ä¸ªï¼Œè¿™é‡Œçš„è®²è§£æ˜¯æœ‰é—®é¢˜çš„ï¼Œforkå¹¶ä¸ä¼šäº§ç”Ÿæ‰“çš„é˜»å¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645232040,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2420294,"avatar":"https://static001.geekbang.org/account/avatar/00/24/ee/46/7d65ae37.jpg","nickname":"æœ¨å‡ ä¸¶","note":"","ucode":"FFDB958DA64F8C","race_medal":5,"user_type":1,"is_pvip":true},"reply_author":{"id":1186048,"avatar":"https://static001.geekbang.org/account/avatar/00/12/19/00/82d6bb18.jpg","nickname":"å¨„","note":"","ucode":"8B7909A1E78604","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":553733,"discussion_content":"çº¿ä¸Šç”Ÿäº§ç¯å¢ƒå®æµ‹ï¼Œ15Gå†…å­˜forkè€—æ—¶800msï¼Œè¿™æœŸé—´æ˜¯é˜»å¡çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646043398,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":552005,"ip_address":""},"score":553733,"extra":""}]}]},{"had_liked":false,"id":287921,"user_name":"acupple","can_delete":false,"product_type":"c1","uid":1086927,"ip_address":"","ucode":"D3E908E2EB59B1","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJByKiaE1TUInTDdemFvJib3s1iahmYWGddf4R9bFRlPRI5hPP70DhqhNN2gJEKj2njIX7g0ULHg8Ojw/132","comment_is_top":false,"comment_ctime":1618216212,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5913183508","product_id":100056701,"comment_content":"ä¸ºäº†è§£å†³è¯»å†™æ–°èƒ½ï¼Œå’Œæ•°æ®é«˜å¯ç”¨ï¼Œå‰æ–‡æåˆ°äº†ä¸»ä»æ¨¡å¼å’Œå“¨å…µæ¨¡å¼ï¼Œä»¥åŠå“¨å…µé›†ç¾¤ï¼Œè€Œè§£å†³æ•°æ®é‡å’Œæ‰©å®¹é—®é¢˜ï¼Œé‡‡ç”¨æ•°æ®åˆ†ç‰‡ï¼Œé‚£æ¯ä¸ªåˆ†ç‰‡å®ä¾‹ï¼Œæ˜¯ä¸æ˜¯ä¹Ÿè¦é…ç½®ä¸»ä»å’Œå“¨å…µé›†ç¾¤ï¼Œæ¥ä¿è¯é«˜å¯ç”¨å‘¢","like_count":1},{"had_liked":false,"id":277257,"user_name":"Pisces","can_delete":false,"product_type":"c1","uid":1504705,"ip_address":"","ucode":"B1E98AC36BDD0C","user_header":"https://static001.geekbang.org/account/avatar/00/16/f5/c1/b92153c6.jpg","comment_is_top":false,"comment_ctime":1612336778,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5907304074","product_id":100056701,"comment_content":"æ§½çš„ä¸ªæ•°ä¸ºä»€ä¹ˆæ˜¯16384ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1004727,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/54/b7/abb7bfe3.jpg","nickname":"Elon","note":"","ucode":"DB5BE4DA9A1690","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":372618,"discussion_content":"å¯ä»¥å‚è€ƒè¿™ä¸ªï¼šhttps://zhuanlan.zhihu.com/p/80335611","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620393787,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":276209,"user_name":"python","can_delete":false,"product_type":"c1","uid":1870014,"ip_address":"","ucode":"2226125EBC99A5","user_header":"https://static001.geekbang.org/account/avatar/00/1c/88/be/cc6a7c11.jpg","comment_is_top":false,"comment_ctime":1611832958,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5906800254","product_id":100056701,"comment_content":"è€å¸ˆï¼Œè¯·é—®redisé‡Œé¢åˆ‡ç‰‡é›†ç¾¤å¦‚æœåšäº†ä¸»ä»ï¼Œå®ƒçš„ä¸»ä»æ˜¯åŸºäºä¸»ä»å¤åˆ¶çš„ï¼Œé‚£ä¹ˆå®ƒçš„æ•…éšœæ¢å¤æ˜¯å¦‚ä½•åšçš„ï¼Ÿä¹ŸåŠ äº†å“¨å…µå—ï¼Ÿ","like_count":1},{"had_liked":false,"id":270005,"user_name":"å°å¤ªé˜³","can_delete":false,"product_type":"c1","uid":1635531,"ip_address":"","ucode":"82FD62E147CD7B","user_header":"https://static001.geekbang.org/account/avatar/00/18/f4/cb/0028f467.jpg","comment_is_top":false,"comment_ctime":1608872605,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5903839901","product_id":100056701,"comment_content":"redisä¸ºä»€ä¹ˆæ²¡æœ‰ä½¿ç”¨ä¸€è‡´æ€§hashæ¥å®ç°æ•°æ®çš„æ•°æ®çš„åˆ†å¸ƒå¼éƒ¨ç½²ï¼Œè€Œæ˜¯ç”¨hashæ§½ï¼Ÿå®˜ç½‘è¯´èŠ‚ç‚¹å˜åŠ¨å®¹æ˜“ï¼ŒçœŸçš„å®¹æ˜“å—ï¼Ÿ<br>Redis Cluster does not use consistent hashing, but a different form of sharding where every key is conceptually part of what we call a hash slot.<br><br>There are 16384 hash slots in Redis Cluster, and to compute what is the hash slot of a given key, we simply take the CRC16 of the key modulo 16384.<br><br>Every node in a Redis Cluster is responsible for a subset of the hash slots, so for example you may have a cluster with 3 nodes, where:<br><br>Node A contains hash slots from 0 to 5500.<br>Node B contains hash slots from 5501 to 11000.<br>Node C contains hash slots from 11001 to 16383.<br>This allows to add and remove nodes in the cluster easily. For example if I want to add a new node D, I need to move some hash slot from nodes A, B, C to D. Similarly if I want to remove node A from the cluster I can just move the hash slots served by A to B and C. When the node A will be empty I can remove it from the cluster completely.","like_count":1,"discussions":[{"author":{"id":1123146,"avatar":"https://static001.geekbang.org/account/avatar/00/11/23/4a/c608bdf6.jpg","nickname":"ä¸‰çŸ³","note":"","ucode":"734DCECABC3BEC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":389248,"discussion_content":"keyå€¼crc16ä»¥åå¾—åˆ°çš„æœ€å¤§å€¼ä¹Ÿå°±65536ï¼Œç”¨ä¸€è‡´æ€§hashæ˜¯ä¸æ˜¯æœ‰ç‚¹è¶…çº²","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629192093,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":257961,"user_name":"çŸ³å°å¤©","can_delete":false,"product_type":"c1","uid":1484861,"ip_address":"","ucode":"BB965629AD7BB3","user_header":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJzvM4MKTUJULLl6LESKLun90dPx33OZiaNJ3U5QvAicjDLib6akk52dMHgLwmRTBJ1VicSeKobSeopJA/132","comment_is_top":false,"comment_ctime":1604225229,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"5899192525","product_id":100056701,"comment_content":"è€å¸ˆï¼Œ<br>1 é›†ç¾¤å­˜åœ¨é«˜å¯ç”¨çš„é—®é¢˜å—ï¼Œè¿˜éœ€è¦å“¨å…µå—ï¼Ÿ<br>2 é‡å®šå‘æœºåˆ¶ï¼Œç”±redisèŠ‚ç‚¹è‡ªåŠ¨å®Œæˆä¸æ›´å¥½å—ï¼Ÿ<br>","like_count":1,"discussions":[{"author":{"id":1400806,"avatar":"https://static001.geekbang.org/account/avatar/00/15/5f/e6/19778e70.jpg","nickname":"Mr.åŸƒå…‹æ–¯","note":"","ucode":"855BE5DFD2BB0B","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":356996,"discussion_content":"ç”±èŠ‚ç‚¹æ¥å®Œæˆçš„è¯ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½è¦å»å¤„ç†ä¸åœ¨è¿™ä¸ªèŠ‚ç‚¹ä¸Šçš„è¯·æ±‚ï¼Œæ€§èƒ½ä¸Šæœ‰æå¤§çš„å¼€é”€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615722696,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1904021,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/0d/95/a04bf5c4.jpg","nickname":"èŠ±é‡Œæ¹–ï¼Œæ¹–é‡ŒéŸ¶","note":"","ucode":"795CB158E0FE4F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":349056,"discussion_content":"é›†ç¾¤çš„æ¯ä¸ªèŠ‚ç‚¹ä¸Šéƒ½ä¼šç»™ä»–é…ä¸€ä¸ªä»èŠ‚ç‚¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612863073,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":248756,"user_name":"å‡¯æ–‡1985","can_delete":false,"product_type":"c1","uid":1036921,"ip_address":"","ucode":"9A42344649072B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/d2/79/0a432fde.jpg","comment_is_top":false,"comment_ctime":1600304619,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5895271915","product_id":100056701,"comment_content":"åœ¨æ°´å¹³æ‰©å®¹æ—¶ï¼Œæ•°æ®æ˜¯æ€ä¹ˆåœ¨ä¸åŒredisåˆ†ç‰‡é—´è¿›è¡Œè¿ç§»çš„ï¼Ÿ","like_count":1},{"had_liked":false,"id":244158,"user_name":"èŒƒé—²","can_delete":false,"product_type":"c1","uid":1073125,"ip_address":"","ucode":"F21FD7DF6BA53C","user_header":"https://static001.geekbang.org/account/avatar/00/10/5f/e5/54325854.jpg","comment_is_top":false,"comment_ctime":1598413346,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"5893380642","product_id":100056701,"comment_content":"å¯¹äºRedisè€Œè¨€ï¼Œåˆ‡ç‰‡ç®¡ç†æœ‰ä¸¤ç§æ–¹å¼<br>1.ä¸­å¿ƒåŒ–æ–¹å¼ï¼Œå…¸å‹çš„Codis.Codisæ˜¯é¦–å…ˆå¯¹keyè¿›è¡Œcrc32çš„è®¡ç®—,ç„¶åå¯¹äº1024æ±‚æ¨¡(è¿™ä¸ªå€¼å¯é…ç½®)å¾—åˆ°æ§½ä½æ‰€åœ¨Rediså®ä¾‹ä¿¡æ¯,ç„¶åè¿›è¡Œå¤„ç†~~æ‰€æœ‰çš„æ§½ä½ä¿¡æ¯éƒ½æ˜¯ä¿å­˜åœ¨zookeeper&#47;etcdçš„ä¸­é—´ä»¶ï¼Œå‘ç”Ÿå˜æ›´çš„æ—¶å€™ä¼šåŒæ­¥åˆ°proxyä¸­. å¦å¤–å¯¹äºæ•°æ®è¿ç§»è€Œè¨€ï¼Œä¼šæœ‰migratingçš„çŠ¶æ€åšç®¡ç†, codisæœ¬èº«å»ºè®®çš„keyçš„valueå¤§å°å°äº1M,è¿™æ ·å¯ä»¥åŠ é€Ÿæ•°æ®è¿ç§»~~å¤§keyä¼šæœ‰é˜»å¡æƒ…å†µ<br>2.å»ä¸­å¿ƒåŒ–æ–¹å¼ï¼Œå…¸å‹çš„Redis Cluster.redis clusterç”±Nodeç»„æˆï¼ŒNodeä¸­ä¼šä¿å­˜æ§½ä½çš„å®ä¾‹ä¿¡æ¯ã€‚å¦‚æœè¯·æ±‚ä¸åœ¨å½“å‰Nodeä¸­ï¼Œä¼šå‡ºç°Movedå“åº”ï¼Œå‘Šè¯‰å®¢æˆ·ç«¯åº”è¯¥å»è¯·æ±‚keyæ‰€åœ¨çš„èŠ‚ç‚¹ã€‚slot = crc16(key)%16384.<br>","like_count":1,"discussions":[{"author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301521,"discussion_content":"1ã€Codisçš„slotæ˜¯å›ºå®š1024ä¸ªï¼Œä¸å¯ä»¥ä¿®æ”¹ã€‚\n\n2ã€Codisé’ˆå¯¹bigkeyçš„è¿ç§»åšäº†ä¼˜åŒ–ï¼Œé‡‡ç”¨å¼‚æ­¥è¿ç§»çš„æ–¹å¼è¿›è¡Œï¼Œå¾ˆå¤§ç¨‹åº¦é™ä½äº†é˜»å¡é£é™©ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1598543643,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1073125,"avatar":"https://static001.geekbang.org/account/avatar/00/10/5f/e5/54325854.jpg","nickname":"èŒƒé—²","note":"","ucode":"F21FD7DF6BA53C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":301553,"discussion_content":"è¿™ä¸¤ç‚¹æˆ‘ç¡®è®¤ä¸‹ï¼Œcodisçœ‹çš„æ¯”è¾ƒä¹…äº†ã€‚æ„Ÿè§‰è€å“¥åœ¨dbè¿™å—ç»éªŒä¸°å¯Œå•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598575182,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":301521,"ip_address":""},"score":301553,"extra":""},{"author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1073125,"avatar":"https://static001.geekbang.org/account/avatar/00/10/5f/e5/54325854.jpg","nickname":"èŒƒé—²","note":"","ucode":"F21FD7DF6BA53C","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301561,"discussion_content":"æˆ‘ç°åœ¨è´Ÿè´£å…¬å¸å†…çš„Codiså®šåˆ¶å¼€å‘ï¼Œæ‰€ä»¥äº†è§£çš„æ¯”è¾ƒå¤šã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598575988,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":301553,"ip_address":""},"score":301561,"extra":""}]}]},{"had_liked":false,"id":243628,"user_name":"å°å–µå–µ","can_delete":false,"product_type":"c1","uid":1062444,"ip_address":"","ucode":"FDBBB2A59DB8B6","user_header":"https://static001.geekbang.org/account/avatar/00/10/36/2c/8bd4be3a.jpg","comment_is_top":false,"comment_ctime":1598233998,"is_pvip":false,"replies":[{"id":"89807","content":"å…¶å®ï¼Œå¦‚æœç”¨è¡¨æ¥è®°å½•æ˜ å°„å…³ç³»çš„è¯ï¼Œå°±ä¸ç”¨è®¡ç®—å“ˆå¸Œå€¼äº†ï¼Œæ‰€ä»¥è¿™ä¸ªæ—¶å€™å€’æ²¡æœ‰hashå†²çªäº†ã€‚ä¸è¿‡ï¼Œå¦‚æœæœ‰å®ä¾‹ä¸‹çº¿ï¼Œçš„ç¡®ä¼šæ¶‰åŠå¤§é‡æ•°æ®è¿ç§»ï¼Œå’Œæ˜ å°„å…³ç³»å˜åŒ–ï¼Œå¦‚æœç”¨è¡¨è®°å½•çš„è¯ï¼Œå¯¹è¡¨çš„ä¿®æ”¹å°±ä¼šæ¯”è¾ƒéº»çƒ¦ã€‚<br><br>æ„Ÿè§‰ä½ è¯´çš„hashå†²çªï¼Œæ˜¯ä¸æ˜¯å’ŒRedis Clusteré‡Œçš„å“ˆå¸Œæ§½ä½¿ç”¨æœ‰äº›æ··æ·†äº†ï¼Ÿ :)","user_name":"ä½œè€…å›å¤","user_name_real":"è’‹å¾·é’§","uid":"1609687","ctime":1598286348,"ip_address":"","comment_id":243628,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5893201294","product_id":100056701,"comment_content":"Redisæœ¬èº«æ˜¯åŸºäºå†…å­˜æ“ä½œçš„ï¼Œå¦‚æœæ•°æ®é‡å¤§ï¼ŒåŸºäºæŸ¥è¡¨æ³•æ¥åšï¼Œä¼šæ¶ˆè€—å¤ªå¤šçš„å†…å­˜ç©ºé—´ï¼Œæˆæœ¬ä¸Šä¸å…è®¸ã€‚è¿˜æœ‰å†æœ‰hashå†²çªçš„æ—¶å€™ï¼Œä¼šæœ‰å¤§é‡æ•°æ®è¿ç§»ï¼Œç»´æŠ¤èµ·æ¥å›°éš¾å¤šäº†ã€‚","like_count":1,"discussions":[{"author":{"id":1609687,"avatar":"https://static001.geekbang.org/account/avatar/00/18/8f/d7/fb60129d.jpg","nickname":"è’‹å¾·é’§","note":"","ucode":"833985C2C37C0A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504340,"discussion_content":"å…¶å®ï¼Œå¦‚æœç”¨è¡¨æ¥è®°å½•æ˜ å°„å…³ç³»çš„è¯ï¼Œå°±ä¸ç”¨è®¡ç®—å“ˆå¸Œå€¼äº†ï¼Œæ‰€ä»¥è¿™ä¸ªæ—¶å€™å€’æ²¡æœ‰hashå†²çªäº†ã€‚ä¸è¿‡ï¼Œå¦‚æœæœ‰å®ä¾‹ä¸‹çº¿ï¼Œçš„ç¡®ä¼šæ¶‰åŠå¤§é‡æ•°æ®è¿ç§»ï¼Œå’Œæ˜ å°„å…³ç³»å˜åŒ–ï¼Œå¦‚æœç”¨è¡¨è®°å½•çš„è¯ï¼Œå¯¹è¡¨çš„ä¿®æ”¹å°±ä¼šæ¯”è¾ƒéº»çƒ¦ã€‚\n\næ„Ÿè§‰ä½ è¯´çš„hashå†²çªï¼Œæ˜¯ä¸æ˜¯å’ŒRedis Clusteré‡Œçš„å“ˆå¸Œæ§½ä½¿ç”¨æœ‰äº›æ··æ·†äº†ï¼Ÿ :)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598286348,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1062444,"avatar":"https://static001.geekbang.org/account/avatar/00/10/36/2c/8bd4be3a.jpg","nickname":"å°å–µå–µ","note":"","ucode":"FDBBB2A59DB8B6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301298,"discussion_content":"è°¢è°¢è€å¸ˆçš„è§£æƒ‘ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598486342,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":243611,"user_name":"test","can_delete":false,"product_type":"c1","uid":1065849,"ip_address":"","ucode":"9A4973E591DD12","user_header":"https://static001.geekbang.org/account/avatar/00/10/43/79/18073134.jpg","comment_is_top":false,"comment_ctime":1598230497,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5893197793","product_id":100056701,"comment_content":"ç”¨è¡¨ä¿å­˜keyå’Œå®ä¾‹å¯¹åº”å…³ç³»çš„è¯è¡¨æ•°æ®é‡å¤ªå¤§äº†ï¼Œè€Œä¸”ä¸çµæ´»ã€‚","like_count":1},{"had_liked":false,"id":355097,"user_name":"è”¡æ¬§","can_delete":false,"product_type":"c1","uid":1317604,"ip_address":"å¹¿ä¸œ","ucode":"39470A1DCAA7A9","user_header":"https://static001.geekbang.org/account/avatar/00/14/1a/e4/5e2a8190.jpg","comment_is_top":false,"comment_ctime":1661076289,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1661076289","product_id":100056701,"comment_content":"Redis Cluster å®ç°åŸç†ï¼šä¸­é—´ä½¿ç”¨hashæ§½ï¼Œä¿å­˜keyä¸å®ä¾‹çš„æ˜ å°„å…³ç³»è¿›è¡Œè·¯ç”±<br>é›†ç¾¤å®ä¾‹å¢åˆ æˆ–è€…é›†ç¾¤é‡æ–°åˆ†é…hashæ§½ï¼Œå®¢æˆ·ç«¯æ˜¯å¦‚ä½•å‡†ç¡®å®šä½çš„ï¼ŒåŸç†æ˜¯ä»€ä¹ˆï¼šé›†ç¾¤å¯¹hashæ§½çš„é‡æ–°åˆ†é…ï¼ŒæœåŠ¡ç«¯ä¼šé‡æ–°ç”Ÿæˆhashæ§½ï¼Œä½†æ˜¯å®¢æˆ·ç«¯æ— æ³•æ„Ÿåº”æ›´æ–°ï¼Œå¦‚æœå®¢æˆ·ç«¯è¯·æ±‚hashæ§½å®ä¾‹æ²¡æœ‰å‘½ä¸­ï¼Œåˆ™è¿”å›keyæ‰€åœ¨æ–°å®ä¾‹åœ°å€å¹¶æ›´æ–°æœ¬åœ°hashæ§½ï¼Œå¦‚æœé›†ç¾¤hashæ§½æ­£åœ¨è¿ç§»è¿‡ç¨‹ä¸­ï¼Œåˆ™ç›¸åº”askï¼Œéœ€è¦ç»§ç»­è¯·æ±‚åˆ™ä½¿ç”¨askingå‘½ä»¤ï¼Œæœ¬åœ°hashæ§½ä¸ä¼šæ›´æ–°<br>ä¸ºä»€ä¹ˆä¸ä½¿ç”¨keyç›´æ¥æ˜ å°„å®ä¾‹ï¼šè·¯ç”±è¡¨è¿‡å¤§ï¼Œç»´æŠ¤ã€æˆæœ¬è¿‡å¤§<br>","like_count":0},{"had_liked":false,"id":354334,"user_name":"æ—è“","can_delete":false,"product_type":"c1","uid":2340552,"ip_address":"åŒ—äº¬","ucode":"36E4445613E1C3","user_header":"https://static001.geekbang.org/account/avatar/00/23/b6/c8/35948bf5.jpg","comment_is_top":false,"comment_ctime":1660288978,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1660288978","product_id":100056701,"comment_content":"å­¦åˆ°è¿™é‡Œï¼ŒåŸºæœ¬ç¯‡å°±å­¦å®Œäº†ã€‚æœ€å¤§çš„ç–‘é—®æ˜¯ï¼Œä¸æ‡‚å¦‚ä½•éƒ¨ç½²ä¸»ä»ã€åˆ‡ç‰‡é›†ç¾¤ä»¥åŠæ–‡ä¸­çš„çŸ¥è¯†ç‚¹æ˜¯å…·ä½“æ€ä¹ˆå®ç°çš„ã€‚","like_count":0},{"had_liked":false,"id":351089,"user_name":"baohao","can_delete":false,"product_type":"c1","uid":1019375,"ip_address":"","ucode":"0CCC4AAF07650A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8d/ef/f7e29b0f.jpg","comment_is_top":false,"comment_ctime":1657519386,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1657519386","product_id":100056701,"comment_content":"æƒ³è¯·æ•™ä¸€ä¸‹ï¼Œå¦‚æœclusterå…¶ä¸­ä¸€ä¸ªèŠ‚ç‚¹çš„ä¸»ä»å…¨éƒ½æŒ‚äº†ï¼Œé‚£è¿™ä¸ªé›†ç¾¤è¿˜å¯ç”¨ä¹ˆï¼Ÿæ˜¯ä¼šç”±äºç¼ºå°‘slotå¯¼è‡´æ•´ä½“é›†ç¾¤éƒ½ä¸å¯ç”¨ï¼Œè¿˜æ˜¯æŒ‚æ‰çš„èŠ‚ç‚¹è´Ÿè´£çš„slotå¤„ç†çš„è¯·æ±‚éƒ¨åˆ†ä¸å¯ç”¨ï¼Ÿä¼šä¸ä¼šè§¦å‘è‡ªåŠ¨rebalanceå‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":2012750,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/b6/4e/1172776e.jpg","nickname":"chump","note":"","ucode":"62A618CFF3D266","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":580014,"discussion_content":"å¤§ä½¬ï¼Œæˆ‘ä¹Ÿæœ‰è¿™ä¸ªå›°æƒ‘ï¼Œæˆ‘æ„Ÿè§‰å°±æ²¡åŠæ³•ç”¨äº†ï¼Œvalueéƒ½æ²¡äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657807207,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":350350,"user_name":"Kepler","can_delete":false,"product_type":"c1","uid":1214303,"ip_address":"","ucode":"0C9CA3DB8B3CF0","user_header":"https://static001.geekbang.org/account/avatar/00/12/87/5f/6bf8b74a.jpg","comment_is_top":false,"comment_ctime":1656841550,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1656841550","product_id":100056701,"comment_content":"è·å–é”®å€¼å¯¹å’Œå“ˆå¸Œæ§½çš„æ˜ å°„å…³ç³»ï¼Œé‡‡ç”¨crc16 + mod 16384ç›¸æ¯”ç›´æ¥å­˜å‚¨åœ¨redisé”®å€¼å¯¹å­—å…¸ï¼Œå‰è€…æ˜¯O(1)çš„æ—¶é—´å¤æ‚åº¦å’ŒO(1)çš„ç©ºé—´å¤æ‚åº¦ï¼Œåè€…æ˜¯O(n)çš„ç©ºé—´å¤æ‚åº¦ã€‚","like_count":0},{"had_liked":false,"id":348703,"user_name":"ã€‚ã€‚","can_delete":false,"product_type":"c1","uid":2853618,"ip_address":"","ucode":"A52A6043D27D87","user_header":"https://static001.geekbang.org/account/avatar/00/2b/8a/f2/6c6f7886.jpg","comment_is_top":false,"comment_ctime":1655313341,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1655313341","product_id":100056701,"comment_content":"1.åˆ‡ç‰‡é›†ç¾¤å¯¹äºæ•°æ®å€¾æ–œé—®é¢˜å¦‚ä½•è§£å†³å‘¢ï¼Ÿ<br><br>2.é›†ç¾¤çš„æ‰©å®¹ã€ç¼©å®¹é—®é¢˜å¿…ç„¶ä¼šå¸¦æ¥æ•°æ®è¿ç§»ï¼Œå¦‚ä½•èƒ½ä¿è¯æ•ˆç‡ï¼Œè¿™æœŸé—´è¿˜èƒ½å¯¹å¤–æä¾›æœåŠ¡å—ï¼Ÿå‡è®¾è¦å¯¹å®ä¾‹Aä¸­çš„æ•°æ®è¿›è¡Œè¿ç§»ï¼ŒAä¸‹é¢è¿˜æœ‰å­èŠ‚ç‚¹ï¼Œå­èŠ‚ç‚¹ä¸­çš„æ•°æ®å¦‚ä½•å¤„ç†å‘¢ï¼Ÿ <br><br>3.åˆ‡ç‰‡é›†ç¾¤ä¸éœ€è¦å“¨å…µå—ï¼Ÿå½“ä¸»åº“å®•æœºåï¼Œä»åº“ä¼šè¡¥ä¸Šï¼ˆæˆ‘è¯•è¿‡ï¼Œæ²¡æœ‰å“¨å…µé›†ç¾¤ï¼Œå®ƒä¼šè‡ªåŠ¨æŠŠä»åº“å‡çº§æˆä¸»åº“ï¼‰æ²¡æœ‰å“¨å…µæ˜¯å¦‚æœåšåˆ°æ•…éšœè¿ç§»çš„å‘¢ï¼Ÿ<br><br>4.ä¸ºä»€ä¹ˆé‡‡ç”¨çš„æ˜¯å“ˆå¸Œæ§½å‘¢ï¼Ÿæ„Ÿè§‰ä¸€è‡´æ€§hashæ›´å¥½ä¸€äº›å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":348280,"user_name":"èµ°è·¯é¡ºæ‹","can_delete":false,"product_type":"c1","uid":1987040,"ip_address":"","ucode":"82D19A53DCB14E","user_header":"","comment_is_top":false,"comment_ctime":1654930017,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1654930017","product_id":100056701,"comment_content":"åˆ‡ç‰‡é›†ç¾¤ï¼Œå¦‚æœæœ‰å°æœºå™¨æŒ‚äº†ï¼Œæ­¤æ—¶å®¢æˆ·ç«¯æ˜¯æ€ä¹ˆè·Ÿredis<br>äº¤äº’çš„ï¼Ÿ","like_count":0},{"had_liked":false,"id":347719,"user_name":"æ¨±æ¡ƒæ±ã€‚","can_delete":false,"product_type":"c1","uid":2907715,"ip_address":"","ucode":"36EE9D8B9C5122","user_header":"https://static001.geekbang.org/account/avatar/00/2c/5e/43/004a52fa.jpg","comment_is_top":false,"comment_ctime":1654345965,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1654345965","product_id":100056701,"comment_content":"å“ˆå¸Œæ§½èµ·ä¸€ä¸ªç›®å½•ä½œç”¨ï¼ŒåŒæ—¶ç»™é”®å€¼å¯¹åšäº†ä¸€ä¸ªåˆ†é…è§„åˆ™æ¥æ˜ å°„ï¼Œå¯ä»¥æŒ‰æ§½åˆ†è£…æ•°æ®ã€‚ç›´æ¥è®°å½•å®ä¾‹å’Œé”®å€¼å¯¹æ— æ³•æ§åˆ¶å®ä¾‹é‡Œé¢åº”è¯¥æ”¾å“ªäº›æ”¾å¤šå°‘é”®å€¼å¯¹","like_count":0},{"had_liked":false,"id":343734,"user_name":"å¼ R","can_delete":false,"product_type":"c1","uid":2268019,"ip_address":"","ucode":"7ECD7101EB4818","user_header":"https://static001.geekbang.org/account/avatar/00/22/9b/73/67844995.jpg","comment_is_top":false,"comment_ctime":1651029114,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1651029114","product_id":100056701,"comment_content":"æ•°æ®åˆ†ç‰‡ï¼Œè¿ç§»æ§½ä½æ—¶å‘ç”Ÿæ•…éšœï¼Œå¦‚ä½•å¤„ç†ï¼Ÿ<br>","like_count":0},{"had_liked":false,"id":343512,"user_name":"ub8","can_delete":false,"product_type":"c1","uid":1481811,"ip_address":"","ucode":"0D937C3EAEB781","user_header":"https://static001.geekbang.org/account/avatar/00/16/9c/53/ade0afb0.jpg","comment_is_top":false,"comment_ctime":1650884945,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1650884945","product_id":100056701,"comment_content":"æœ‰ä¸ªé—®é¢˜ï¼š å¦‚æœ åœ¨ cluster  ä¸­ â€œå®ä¾‹1â€å®•æœºäº†ï¼Œé‚£ä¹‹å‰åˆ†é…åˆ°â€œå®ä¾‹1â€ä¸Šé¢çš„ æ§½ä½å˜åŒ–å¦‚ä½•é€šçŸ¥ç»™å®¢æˆ·ç«¯ï¼Ÿ","like_count":0},{"had_liked":false,"id":342289,"user_name":"Tattoo","can_delete":false,"product_type":"c1","uid":1036503,"ip_address":"","ucode":"CE926AC8582C96","user_header":"https://static001.geekbang.org/account/avatar/00/0f/d0/d7/a09ef784.jpg","comment_is_top":false,"comment_ctime":1650172719,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1650172719","product_id":100056701,"comment_content":"è€å¸ˆï¼Œè¯·æ•™ä¸€ä¸‹ï¼ŒRedis é›†ç¾¤çš„æ¨¡å¼æ˜¯å±äºCPç³»ç»Ÿè¿˜æ˜¯APç³»ç»Ÿï¼Ÿ","like_count":0},{"had_liked":false,"id":341375,"user_name":"é˜¿æ˜•","can_delete":false,"product_type":"c1","uid":1012906,"ip_address":"","ucode":"F3AD093B68E074","user_header":"https://static001.geekbang.org/account/avatar/00/0f/74/aa/178a6797.jpg","comment_is_top":false,"comment_ctime":1649570881,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1649570881","product_id":100056701,"comment_content":"ç›´æ¥CRCè®¡ç®—æ•ˆç‡æ›´é«˜ï¼Œæ— éœ€å­˜å‚¨æˆæœ¬ï¼Œä»¥åŠè§£å†³æ•°æ®ä¸€è‡´æ€§ç­‰é—®é¢˜","like_count":0},{"had_liked":false,"id":339765,"user_name":"å‰‘å…«","can_delete":false,"product_type":"c1","uid":1297630,"ip_address":"","ucode":"0A09F41DB8A4E7","user_header":"https://static001.geekbang.org/account/avatar/00/13/cc/de/e28c01e1.jpg","comment_is_top":false,"comment_ctime":1648368558,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1648368558","product_id":100056701,"comment_content":"ç”¨æ§½çš„å¥½å¤„æ˜¯ï¼š<br>å‡å°‘ç©ºé—´å­˜å‚¨keyä¸ç»“ç‚¹çš„å…³ç³»ï¼Œå¢åŠ æ€§èƒ½(å«å‡å°‘ç½‘ç»œäº¤äº’keyä¸ç»“ç‚¹å…³ç³»çš„æ•°æ®ä¼ è¾“é‡)<br>keyå¦‚æœç”¨äºç»´æŠ¤ä¸ç»“ç‚¹çš„å…³ç³»ï¼Œkeyæ˜¯æ— ç©·çš„ï¼Œè¿™æ—¶åœ¨æ‰©å®¹ï¼Œè´Ÿè½½ç­‰æƒ…å†µä¸‹ï¼Œæ€§èƒ½è¾ƒå·®ã€‚æ¯”å¦‚ç°åœ¨æœ‰5000ä¸‡ä¸ªkeyï¼Œå¢åŠ 2å°rediså®ä¾‹ï¼Œé‚£ä¹ˆå°±éœ€è¦å°†5000ä¸‡ä¸ªkeyæŠ½å–ä¸€éƒ¨åˆ†ç§»åˆ°è¿™2å°ã€‚è¿™ä¸ªé‡æ˜¯æ¯”è¾ƒå¤§çš„ï¼Œå¦‚æœæ˜¯é‡‡ç”¨æ§½åˆ™ä¼šæ¯”è¾ƒå°‘ã€‚<br>","like_count":0},{"had_liked":false,"id":334729,"user_name":"è–›å®šè°”çš„ç–¯å…”å­","can_delete":false,"product_type":"c1","uid":1904140,"ip_address":"","ucode":"BEF678D50400F5","user_header":"https://static001.geekbang.org/account/avatar/00/1d/0e/0c/4ec2075f.jpg","comment_is_top":false,"comment_ctime":1645091910,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1645091910","product_id":100056701,"comment_content":"åˆ†é…çš„å“ˆå¸Œæ§½æœ‰å¯èƒ½ä¼šå†²çªå—","like_count":0},{"had_liked":false,"id":332666,"user_name":"æ—¥æœˆæ˜Ÿè¾°","can_delete":false,"product_type":"c1","uid":1796332,"ip_address":"","ucode":"4E9F48153B2D8B","user_header":"https://static001.geekbang.org/account/avatar/00/1b/68/ec/eb0ebbb6.jpg","comment_is_top":false,"comment_ctime":1643445237,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1643445237","product_id":100056701,"comment_content":"cluster é…ç½®è¯´æ˜ï¼š<br><br># æ˜¯å¦å¼€å¯ clusterï¼Œyes è¡¨ç¤ºå¼€å¯ï¼Œno è¡¨ç¤ºæ™®é€šçš„ redis å®ä¾‹<br>cluster-enabled yes<br># è¯¥æ–‡ä»¶åˆ—å‡ºäº†é›†ç¾¤ä¸­çš„å…¶ä»–èŠ‚ç‚¹ï¼Œå®ƒä»¬çš„çŠ¶æ€ã€æŒä¹…å˜é‡ç­‰å†…å®¹ã€‚ç”±äºæŸäº›æ¶ˆæ¯æ¥æ”¶ï¼Œæ­¤æ–‡ä»¶é€šå¸¸ä¼šè¢«é‡å†™å¹¶åˆ·æ–°åˆ°ç£ç›˜ä¸Šã€‚<br># ä¿å­˜é›†ç¾¤ä¸­å…¶ä»–èŠ‚ç‚¹ä¿¡æ¯çš„æ–‡ä»¶ï¼Œé»˜è®¤ä¸º nodes.conf ï¼Œéœ€è¦ä¸ºæ¯ä¸ªèŠ‚ç‚¹è®¾ç½®å•ç‹¬çš„æ–‡ä»¶åã€‚<br># è¯¥æ–‡ä»¶æ— éœ€æ‰‹åŠ¨é…ç½®ï¼ŒRedis Cluster è‡ªåŠ¨ç»´æŠ¤<br>cluster-config-file nodes.conf<br># èŠ‚ç‚¹äº’è¿è¶…æ—¶æ—¶é—´ï¼Œæ¯«ç§’ä¸ºå•ä½ã€‚å¦‚æœè¶…æ—¶ï¼Œåˆ™è®¤ä¸ºæ­¤èŠ‚ç‚¹ä¸å¯ç”¨ï¼Œå°†ç”±å…¶ä»èŠ‚ç‚¹è¿›è¡Œæ•…éšœè½¬ç§»ï¼Œä¹Ÿå°±æ˜¯ç”±å…¶ä»èŠ‚ç‚¹æˆä¸ºä¸»èŠ‚ç‚¹ã€‚<br># è¿™ä¸ªå‚æ•°æ§åˆ¶ Redis Cluster ä¸­çš„å…¶ä»–é‡è¦å†…å®¹ã€‚<br># å¦‚æœä¸»èŠ‚ç‚¹è¶…æ—¶ï¼Œåˆ™ä¸»èŠ‚ç‚¹å¯¹æŸ¥è¯¢æœåŠ¡ä¹Ÿä¸å†å“åº”ã€‚<br>cluster-node-timeout 5000<br># å½“å‰èŠ‚ç‚¹æ˜¯ä»èŠ‚ç‚¹ä¸”åœ¨æ•…éšœè½¬ç§»æ—¶ä½¿ç”¨<br># å¦‚æœè®¾ç½®ä¸ºé›¶ï¼Œåˆ™å‰¯æœ¬å°†å§‹ç»ˆè®¤ä¸ºè‡ªå·±æœ‰æ•ˆï¼Œå› æ­¤å°†å§‹ç»ˆå°è¯•å¯¹ä¸»èŠ‚ç‚¹è¿›è¡Œæ•…éšœè½¬ç§»ï¼Œæ— è®ºä¸»èŠ‚ç‚¹å’Œå‰¯æœ¬èŠ‚ç‚¹ä¹‹é—´æ–­å¼€è¿æ¥æœ‰å¤šä¹…ã€‚<br># å¦‚æœè®¾ç½®ä¸ºæ­£æ•°ï¼ŒRedis ä¼šè®¡ç®—å½“å‰ä»èŠ‚ç‚¹æ˜¯å¦å¯ä»¥è¿›è¡Œæ•…éšœè½¬ç§»ã€‚è®¡ç®—å…¬å¼ä¸ºï¼š(cluster-node-timeout é…ç½®çš„æ¯«ç§’æ•° * cluster-slave-validity-factor)<br># ä¾‹å¦‚ cluster-node-timeout é…ç½®ä¸º 5000ï¼Œcluster-slave-validity-factor é…ç½®ä¸º 10ï¼Œå¦‚æœå½“å‰ä»èŠ‚ç‚¹å’Œä¸»èŠ‚ç‚¹æ–­å¼€æ—¶é—´è¶…è¿‡ 50 ç§’ï¼Œåˆ™ä¸å¯ç”¨äºæ•…éšœè½¬ç§»ã€‚<br># è¯·æ³¨æ„ï¼Œå¦‚æœæ²¡æœ‰èƒ½å¤Ÿå¯¹ä¸»èŠ‚ç‚¹è¿›è¡Œæ•…éšœè½¬ç§»çš„ä»èŠ‚ç‚¹ï¼Œåˆ™ä»»ä½•éé›¶å€¼éƒ½å¯èƒ½å¯¼è‡´å½“å‰ Redis Cluster ç¤ºä¾‹ä¸å¯ç”¨ã€‚<br># åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œåªæœ‰å½“åŸå§‹ä¸»èŠ‚ç‚¹é‡æ–°åŠ å…¥é›†ç¾¤æ—¶ï¼Œé›†ç¾¤æ‰ä¼šæ¢å¤å¯ç”¨ã€‚<br>cluster-slave-validity-factor 10<br># ä»èŠ‚ç‚¹è‡ªåŠ¨è¿ç§»æ—¶ä½¿ç”¨<br># å½“ä¸€ä¸ªä¸»èŠ‚ç‚¹æœ‰å¤šä¸ªä»èŠ‚ç‚¹ï¼Œè€Œå¦å¤–ä¸€ä¸ªä¸»èŠ‚ç‚¹æ²¡æœ‰ä»èŠ‚ç‚¹æ—¶ï¼ŒCluster ä¼šè‡ªåŠ¨è¿›è¡Œä»èŠ‚ç‚¹è¿ç§»ã€‚<br># è¿™ä¸ªé…ç½®å°±æ˜¯ç”¨æ¥è®¾ç½®å½“ä¸€ä¸ªä¸»èŠ‚ç‚¹æœ€å°‘æœ‰å¤šå°‘ä¸ªä»èŠ‚ç‚¹æ—¶ï¼Œå…¶ä½™çš„ä»èŠ‚ç‚¹å¯ä»¥è¿ç§»åˆ°åˆ«çš„ä¸»èŠ‚ç‚¹ã€‚<br>cluster-migration-barrier 1<br># è®¾ç½®ä¸º yes è¡¨ç¤ºæœ‰ä¸€ä¸ªä¸»èŠ‚ç‚¹ä¸å¯ç”¨ä¸”æ²¡æœ‰å¯¹åº”çš„ä»èŠ‚ç‚¹è¿›è¡Œæ•…éšœè½¬ç§»æ—¶ï¼Œåˆ™æ•´ä¸ªé›†ç¾¤ä¸å¯ç”¨ã€‚<br># è®¾ç½®ä¸º no è¡¨ç¤ºæœ‰ä¸€ä¸ªä¸»èŠ‚ç‚¹ä¸å¯ç”¨ä¸”æ²¡æœ‰å¯¹åº”çš„ä»èŠ‚ç‚¹è¿›è¡Œæ•…éšœè½¬ç§»æ—¶ï¼Œæ•´ä¸ªé›†ç¾¤ä»ç„¶å¯ç”¨ï¼Œæ­¤æ—¶ç”±å…¶ä»–ä¸»èŠ‚ç‚¹æä¾›æœåŠ¡ï¼Œå½“ç„¶ä¸‹çº¿ä¸»èŠ‚ç‚¹å¯¹åº”çš„å“ˆå¸Œæ§½æ˜¯ä¸å¯ç”¨çš„<br># é»˜è®¤ä¸º yesï¼Œå»ºè®®è®¾ç½®ä¸º no<br>cluster-require-full-coverage yes<br># é»˜è®¤æ˜¯noï¼Œå½“é›†ç¾¤è®¤ä¸ºæœ‰èŠ‚ç‚¹å‡ºç°æ•…éšœæ—¶ï¼Œè¯¥æ•…éšœå¯èƒ½æ˜¯å› ä¸ºç½‘ç»œåˆ†åŒºå¯¼è‡´è¯¥èŠ‚ç‚¹ä¸é›†ç¾¤éš”ç¦»å¼€ï¼Œæˆ–è€…è¯¥èŠ‚ç‚¹æ— æ³•å¾—åˆ°é›†ç¾¤å¤§å¤šæ•°èŠ‚ç‚¹çš„è®¤åŒæ—¶ï¼Œ<br># æ­¤æ—¶è¯¥æ•…éšœèŠ‚ç‚¹å°†ä¼šæ‹’ç»ä»»ä½•è¯»å†™è¯·æ±‚ï¼Œè¿™æ ·çš„å¥½å¤„æ˜¯å°†é˜»æ­¢å®¢æˆ·ç«¯ä»è¯¥èŠ‚ç‚¹è¯»å–åˆ°ä¸ä¸€è‡´çš„æ•°æ®ã€‚<br># è¯¥å‚æ•°ä¹Ÿå¯ä»¥è¢«é…ç½®ä¸ºyesï¼Œå³ä½¿è¯¥èŠ‚ç‚¹æ•…éšœä¹Ÿå…è®¸è¯»æ“ä½œï¼Œè¿™åœ¨åº”ç”¨è¦æ±‚ä¼˜å…ˆè¿›è¡Œè¯»å–æ“ä½œä½†æ˜¯å¯ä»¥é˜»æ­¢ä¸ä¸€è‡´æ€§å†™å…¥çš„æƒ…å†µä¸‹æ¯”è¾ƒæœ‰ç”¨ï¼Œ<br># å½“Redisé›†ç¾¤ä»…æœ‰å°‘é‡åˆ‡ç‰‡æƒ…å†µä¸‹ä¸”æ²¡æœ‰ä»èŠ‚ç‚¹æ‰§è¡Œæ•…éšœè½¬ç§»æ—¶å¯ä»¥è€ƒè™‘ä½¿ç”¨ã€‚<br>cluster-allow-reads-when-down no","like_count":0},{"had_liked":false,"id":326723,"user_name":"Goal","can_delete":false,"product_type":"c1","uid":1307012,"ip_address":"","ucode":"C337CD4C7E07B0","user_header":"https://static001.geekbang.org/account/avatar/00/13/f1/84/7d21bd9e.jpg","comment_is_top":false,"comment_ctime":1639646339,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1639646339","product_id":100056701,"comment_content":"Redis cluster  çš„ 16384 ä¸ªslot å’Œ redis å¯¹keyçš„å…¨å±€hashè¡¨ï¼Œæœ‰ä»€ä¹ˆåŒºåˆ«å’Œè”ç³»å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":2420294,"avatar":"https://static001.geekbang.org/account/avatar/00/24/ee/46/7d65ae37.jpg","nickname":"æœ¨å‡ ä¸¶","note":"","ucode":"FFDB958DA64F8C","race_medal":5,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":553692,"discussion_content":"ä¸¤ä¸ªå±‚é¢çš„ä¸œè¥¿ï¼ŒRedis clusterçš„slotç”¨äºå®šä½keyå±äºå“ªä¸ªèŠ‚ç‚¹ï¼Œè€Œå…¨å±€å“ˆå¸Œè¡¨åˆ™æ˜¯å•æœºRediså­˜å‚¨keyçš„åŸºæœ¬æ•°æ®ç»“æ„ã€‚å¯ä»¥ç®€å•è¿™ä¹ˆç¼•ï¼ŒæŸ¥è¯¢ä¸€ä¸ªkeyæ—¶çš„é€»è¾‘æ˜¯ï¼škey -&gt; slot -&gt; èŠ‚ç‚¹ -&gt; å…¨å±€å“ˆå¸Œè¡¨ -&gt; æ•°æ®","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1646031145,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":326573,"user_name":"æ ‘å¿ƒ","can_delete":false,"product_type":"c1","uid":1589523,"ip_address":"","ucode":"6C329F0FF798B9","user_header":"https://static001.geekbang.org/account/avatar/00/18/41/13/ab14ad25.jpg","comment_is_top":false,"comment_ctime":1639568153,"is_pvip":true,"discussion_count":1,"race_medal":1,"score":"1639568153","product_id":100056701,"comment_content":"ä¸»ä»é›†ç¾¤å’Œåˆ‡ç‰‡é›†ç¾¤çš„å…³ç³»æ˜¯ä»€ä¹ˆï¼Ÿæ˜¯æ— è®ºæ˜¯ä¸»åº“è¿˜æ˜¯å¤‡åº“éƒ½å¯ä»¥æ˜¯åˆ‡ç‰‡é›†ç¾¤å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":2420294,"avatar":"https://static001.geekbang.org/account/avatar/00/24/ee/46/7d65ae37.jpg","nickname":"æœ¨å‡ ä¸¶","note":"","ucode":"FFDB958DA64F8C","race_medal":5,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":553691,"discussion_content":"åº”è¯¥åè¿‡æ¥è¯´ï¼Œåˆ‡ç‰‡é›†ç¾¤ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½èƒ½å„è‡ªé…æˆä¸»å¤‡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646030789,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":325432,"user_name":"æ ‘å¿ƒ","can_delete":false,"product_type":"c1","uid":1589523,"ip_address":"","ucode":"6C329F0FF798B9","user_header":"https://static001.geekbang.org/account/avatar/00/18/41/13/ab14ad25.jpg","comment_is_top":false,"comment_ctime":1638956104,"is_pvip":true,"discussion_count":0,"race_medal":1,"score":"1638956104","product_id":100056701,"comment_content":"ç¬¬6-9å°èŠ‚è®²è§£äº†å¦‚ä½•é€šè¿‡å‡å°‘æœåŠ¡ä¸­æ–­æé«˜rediså¯é æ€§ã€‚<br>é¦–å…ˆæ˜¯é€šè¿‡ä¸»ä»åº“æ¨¡å¼ï¼ˆç¬¬6èŠ‚ï¼‰ï¼Œå¢åŠ ä»åº“å†—ä½™å¤‡ä»½ï¼Œä¸»ä»ä¹‹é—´å¯ä»¥å¢é‡å¤‡ä»½ã€‚<br>ä½†æ˜¯ä¸»åº“å¯èƒ½ä¼šæŒ‚æ‰ï¼Œé‚£ä¹ˆå°±éœ€è¦ä¸»ä»åˆ‡æ¢ï¼Œè¿™æ—¶éœ€è¦å“¨å…µï¼ˆç¬¬7èŠ‚ï¼‰åˆ¤æ–­ä¸»åº“ä¸‹çº¿ã€é€‰å‡ºæ–°ä¸»åº“å¹¶é€šçŸ¥ä»åº“ã€‚<br>æ¶æ„æ¼”è¿›åˆ°è¿™ä¸€æ­¥å‘ç°å“¨å…µä¹Ÿå¯èƒ½ä¼šæŒ‚æ‰ï¼Œé‚£ä¹ˆæä¾›å“¨å…µé›†ç¾¤æœºåˆ¶ï¼ˆç¬¬8èŠ‚ï¼‰ã€‚å“¨å…µä¸å“¨å…µä¹‹é—´ã€å“¨å…µå’Œä»åº“ä¹‹é—´ã€å“¨å…µå’Œå®¢æˆ·ç«¯ä¹‹é—´é€šè¿‡pub&#47;subæœºåˆ¶å»ºç«‹è¿æ¥ã€‚ç¡®å®šå“ªä¸ªå“¨å…µæ‰§è¡Œä¸»ä»åˆ‡æ¢ä¹Ÿæ˜¯ä¸€ä¸ªâ€œæŠ•ç¥¨ä»²è£â€çš„è¿‡ç¨‹ã€‚æœ€åï¼Œè€å¸ˆåˆ†äº«äº†ä¸€ä¸ªç»éªŒï¼šè¦ä¿è¯æ‰€æœ‰å“¨å…µå®ä¾‹çš„é…ç½®æ˜¯ä¸€è‡´çš„ï¼Œå°¤å…¶æ˜¯ä¸»è§‚ä¸‹çº¿çš„åˆ¤æ–­å€¼ down-after-millisecondsã€‚<br>é›†ç¾¤è¿˜æ¶‰åŠæ‰©å±•é—®é¢˜ï¼ˆç¬¬9èŠ‚ï¼‰ï¼Œredisé‡‡ç”¨äº†æ°´å¹³ï¼ˆæ¨ªå‘ï¼‰æ‰©å±•æ–¹æ¡ˆ-Redis Clusterï¼ˆåˆ‡ç‰‡é›†ç¾¤ &#47; åˆ†ç‰‡é›†ç¾¤ï¼‰ã€‚æ­¤æ–¹æ¡ˆå®ç°åŸºäºå“ˆå¸Œæ§½ï¼Œå®¢æˆ·ç«¯å®šä½èŠ‚ç‚¹æ¶‰åŠMOVEDå’ŒASKå‘½ä»¤çš„ä½¿ç”¨ã€‚<br>å¦å¤–ï¼Œæˆ‘è§‰å¾—å¯ä»¥é»˜å†™Kaitoè¯¾ä»£è¡¨çš„ç­”æ¡ˆäº†ï¼Œç°å¸¸å…¨é¢ğŸ‘¨ğŸ»â€ğŸ’»","like_count":0},{"had_liked":false,"id":324648,"user_name":"Geek_368c5a","can_delete":false,"product_type":"c1","uid":2105937,"ip_address":"","ucode":"0F45D022AF611E","user_header":"","comment_is_top":false,"comment_ctime":1638525596,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1638525596","product_id":100056701,"comment_content":"è¯·é—®ä¸‹è€å¸ˆï¼Œredis cluster æ¨¡å¼ï¼Œä¸€ä¸ªå®ä¾‹ çªç„¶å®•æœºäº†ï¼Œå¦‚ä½•ä¿è¯è¿™ä¸ªå®ä¾‹æ‰€æ‹¥æœ‰çš„æ§½ä½æ•°æ®ä¸ä¸¢å‘¢","like_count":0,"discussions":[{"author":{"id":1183380,"avatar":"https://static001.geekbang.org/account/avatar/00/12/0e/94/67fffed1.jpg","nickname":"æœè¶…","note":"","ucode":"8123F1E13D6A68","race_medal":1,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":555076,"discussion_content":"é‚£å¦‚ä½•å®Œæˆä¸»ä»åˆ‡æ¢å‘¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646733853,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2420294,"avatar":"https://static001.geekbang.org/account/avatar/00/24/ee/46/7d65ae37.jpg","nickname":"æœ¨å‡ ä¸¶","note":"","ucode":"FFDB958DA64F8C","race_medal":5,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":553690,"discussion_content":"æ¯ä¸ªåˆ†ç‰‡èŠ‚ç‚¹å†é…ç½®ä¸»ä»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646030695,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":324490,"user_name":"Sam Fu","can_delete":false,"product_type":"c1","uid":1112676,"ip_address":"","ucode":"EA285A4943271F","user_header":"https://static001.geekbang.org/account/avatar/00/10/fa/64/457325e6.jpg","comment_is_top":false,"comment_ctime":1638455697,"is_pvip":true,"discussion_count":0,"race_medal":1,"score":"1638455697","product_id":100056701,"comment_content":"æˆ‘è§‰å¾—ä¸»è¦æ˜¯å› ä¸ºhashæ§½çš„ä¸ªæ•°åªæœ‰16384ä¸ª è€Œkeyçš„ä¸ªæ•°ä¸ç¡®å®šã€‚ç»´æŠ¤èµ·æ¥å†…å­˜å ç”¨ä¸å¥½é¢„ä¼°ã€‚","like_count":0},{"had_liked":false,"id":320757,"user_name":"æå¼º","can_delete":false,"product_type":"c1","uid":1276652,"ip_address":"","ucode":"EE1F99E12D212E","user_header":"https://static001.geekbang.org/account/avatar/00/13/7a/ec/19104a37.jpg","comment_is_top":false,"comment_ctime":1636505884,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"1636505884","product_id":100056701,"comment_content":"å¦‚æœå®¢æˆ·ç«¯è®¿é—®çš„å®ä¾‹æŒ‚äº†ï¼Œredisæ€æ ·å¤„ç†å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":2420294,"avatar":"https://static001.geekbang.org/account/avatar/00/24/ee/46/7d65ae37.jpg","nickname":"æœ¨å‡ ä¸¶","note":"","ucode":"FFDB958DA64F8C","race_medal":5,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":553693,"discussion_content":"æ¯ä¸ªåˆ†ç‰‡é…ç½®ä¸»ä»ï¼Œå¦‚æœæ²¡æœ‰æˆ–è€…ä¸»ä»éƒ½æŒ‚äº†ï¼Œé‚£ä¹ˆé›†ç¾¤æ•…éšœ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646031205,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":318868,"user_name":"å—è¶…å‡¡","can_delete":false,"product_type":"c1","uid":2678558,"ip_address":"","ucode":"A2A160D483BBB0","user_header":"","comment_is_top":false,"comment_ctime":1635471564,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1635471564","product_id":100056701,"comment_content":"å®¢æˆ·ç«¯ä¼šç¼“å­˜æ¯ä¸ªkeyå’Œå®ä¾‹é—´çš„å…³ç³»ï¼Œå¦‚æœkeyç‰¹åˆ«å¤šçš„æƒ…å†µä¸‹ï¼Œä¼šä¸ä¼šæ¶ˆè€—æ¯”è¾ƒå¤šçš„å†…å­˜å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":316081,"user_name":"å‘µå‘µå“’","can_delete":false,"product_type":"c1","uid":2804690,"ip_address":"","ucode":"C08AA79F71D193","user_header":"","comment_is_top":false,"comment_ctime":1634125709,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1634125709","product_id":100056701,"comment_content":"å‡è®¾ä¸»åŠ¨ä¸‹çº¿äº†ä¸€ä¸ªèŠ‚ç‚¹ï¼ŒæŠŠæ§½è¿ç§»åˆ°å…¶ä»–èŠ‚ç‚¹äº†ã€‚å®¢æˆ·ç«¯ä¸çŸ¥é“å˜æ›´ï¼ŒæŸ¥è¯¢å°±æŠ¥é”™äº†ï¼Œä¸ä¼šé‡å®šå‘ï¼Œæ‰€ä»¥ä¸‹çº¿æ—¶æ€ä¹ˆè®©å®¢æˆ·ç«¯çŸ¥é“ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":2420294,"avatar":"https://static001.geekbang.org/account/avatar/00/24/ee/46/7d65ae37.jpg","nickname":"æœ¨å‡ ä¸¶","note":"","ucode":"FFDB958DA64F8C","race_medal":5,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":553734,"discussion_content":"å®¢æˆ·ç«¯è‡ªè¡Œå¤„ç†ï¼Œæ­£å¸¸æ¥è¯´ï¼ŒæŸ¥è¯¢æŠ¥é”™è§¦å‘é‡è¯•ä¹‹å‰ä¼šæ›´æ–°ä¸€ä¸‹ç¼“å­˜ã€‚å®ç°ç»†èŠ‚ä¸åŒå®¢æˆ·ç«¯ç•¥æœ‰ä¸åŒ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646043556,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":314567,"user_name":"leo.li","can_delete":false,"product_type":"c1","uid":2169337,"ip_address":"","ucode":"916204A614FDD4","user_header":"","comment_is_top":false,"comment_ctime":1633230681,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1633230681","product_id":100056701,"comment_content":"ä½¿ç”¨hashæ§½æŸ¥æ‰¾å¿«ï¼Œè®°å½•æ˜ å°„è¡¨æ€ä¹ˆæŸ¥æ‰¾","like_count":0},{"had_liked":false,"id":314026,"user_name":"ä¿¯ç°é£æ™¯.","can_delete":false,"product_type":"c1","uid":1044166,"ip_address":"","ucode":"A6DB68B7B84AEE","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ee/c6/bebcbcf0.jpg","comment_is_top":false,"comment_ctime":1632811723,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1632811723","product_id":100056701,"comment_content":"éšç€Redis å®ä¾‹ä¸­å­˜å‚¨çš„æ•°æ®é‡ä¸æ–­å¢å¤§ï¼Œå•å®ä¾‹çš„Redisæ€§èƒ½ç“¶é¢ˆè¶Šæ¥è¶Šå¤§ï¼Œä¸»è¦è¡¨ç°åœ¨ï¼š<br>  1ã€éšç€å•å®ä¾‹æ•°æ®é‡å¢å¤§ï¼Œå¢åˆ æ”¹æŸ¥çš„æ•ˆç‡éƒ½ä¼šé™ä½<br>  2ã€RDBæ–‡ä»¶ä¹Ÿä¼šä¸æ–­å¢å¤§ï¼Œé€ æˆforkå­è¿›ç¨‹çš„å¼€é”€å˜å¤§<br><br>è€Œé‡‡ç”¨åˆ‡ç‰‡é›†ç¾¤çš„æ–¹å¼ï¼Œæ‰©å±•æ€§å¥½ï¼Œå¹¶ä¸”æ²¡æœ‰å•å®ä¾‹æ•°æ®é‡è¿‡å¤§äº§ç”Ÿçš„æ€§èƒ½é—®é¢˜ï¼Œä¸ç®¡æœ‰å¤šå°‘æ•°æ®ï¼Œåˆ‡ç‰‡é›†ç¾¤éƒ½èƒ½åº”å¯¹ã€‚<br><br>ä¸è¿‡å¼•å…¥åˆ‡ç‰‡é›†ç¾¤çš„è§£å†³æ–¹æ¡ˆçš„åŒæ—¶ï¼Œä¹Ÿå¼•å…¥é›†ç¾¤çš„ç®¡ç†é—®é¢˜ï¼Œé—®é¢˜çš„æ ¸å¿ƒï¼š<br>  1ã€è¯·æ±‚è·¯ç”±<br>  2ã€æ•°æ®è¿ç§»<br><br>Redis çš„åˆ‡ç‰‡é›†ç¾¤æ–¹æ¡ˆæ˜¯é€šè¿‡æŠ½è±¡å±‚(å“ˆå¸Œæ§½)æ¥æ”¯æŒå®ä¾‹çš„æ‰©å®¹ç¼©å®¹çš„ï¼Œéšç€é›†ç¾¤çš„å®ä¾‹å¢å‡ï¼Œæ•°æ®ä¼šé‡æ–°åˆ†å¸ƒï¼Œå“ˆå¸Œæ§½å’Œå®ä¾‹çš„æ˜ å°„å…³ç³»ä¼šå‘ç”Ÿå˜åŒ–ã€‚<br><br>å®¢æˆ·ç«¯å‘é€è¯·æ±‚æ—¶ï¼Œä¼šæ”¶åˆ°å‘½ä»¤æ‰§è¡ŒæŠ¥é”™ä¿¡æ¯ã€‚å…¶ä¸­MOVED çš„å‘½ä»¤è¡¨ç¤ºæ•°æ®å·²å®Œæˆè¿ç§»ï¼Œå®¢æˆ·ç«¯ä¼šæ›´æ–°è¯·æ±‚è·¯ç”±çš„ç¼“å­˜ï¼›è€Œ ASK å‘½ä»¤è¡¨ç¤ºæ•°æ®æ­£åœ¨è¿ç§»ä¸­ï¼Œä¼šè¿”å›å“ˆå¸Œæ§½å½“ä¸‹æ‰€åœ¨çš„å®ä¾‹åœ°å€ï¼Œå®¢æˆ·ç«¯ä¸ä¼šè¯·æ±‚è·¯ç”±çš„ç¼“å­˜ã€‚<br><br>å½“å®ä¾‹è¿›è¡Œæ‰©å®¹ç¼©å®¹æ—¶ï¼ŒRedisä¸ºäº†è´Ÿè½½å‡è¡¡ï¼Œéœ€è¦é‡æ–°åˆ†é…å“ˆå¸Œæ§½ï¼Œä¼šæŠŠå“ˆå¸Œæ§½åœ¨æ‰€æœ‰å®ä¾‹ä¸Šé‡æ–°åˆ†å¸ƒä¸€éã€‚","like_count":0},{"had_liked":false,"id":313720,"user_name":"CCC","can_delete":false,"product_type":"c1","uid":2775773,"ip_address":"","ucode":"118FD2D69BE2F2","user_header":"https://static001.geekbang.org/account/avatar/00/2a/5a/dd/11405c87.jpg","comment_is_top":false,"comment_ctime":1632633472,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1632633472","product_id":100056701,"comment_content":"æœ‰ä¸€ç‚¹ä¸å¤ªæ‡‚å¸Œæœ›å¯ä»¥å¾—åˆ°è§£ç­”ï¼Œæ–‡ä¸­ä¸€å¼€å§‹çš„ä¾‹å­ä¸­æ— è®ºæ˜¯æ¨ªå‘æ‰©å±•è¿˜æ˜¯å’Œçºµå‘æ‰©å±•ï¼Œæ•°æ®çš„å®é™…å­˜å‚¨é‡éƒ½æ˜¯25G+RDBå¿«ç…§å¤§å°ï¼Œè™½ç„¶æ¨ªå‘æ‹“å±•è§£å†³äº†æ€§èƒ½é—®é¢˜ï¼Œä½†æ˜¯å¦‚æœä¸çºµå‘æ‹“å±•çš„è¯ï¼Œæ˜¯ä¸æ˜¯è¿˜æ˜¯ä¼šé¢ä¸´å†…å­˜ä¸è¶³çš„é—®é¢˜ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":2420294,"avatar":"https://static001.geekbang.org/account/avatar/00/24/ee/46/7d65ae37.jpg","nickname":"æœ¨å‡ ä¸¶","note":"","ucode":"FFDB958DA64F8C","race_medal":5,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":553698,"discussion_content":"åˆ†æˆ5ä¸ªåˆ†ç‰‡ä»¥åï¼Œæ¯ä¸ªèŠ‚ç‚¹å°±åªæœ‰5Gäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646032784,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":309355,"user_name":"tonytan","can_delete":false,"product_type":"c1","uid":1239843,"ip_address":"","ucode":"DF567668CEA540","user_header":"https://static001.geekbang.org/account/avatar/00/12/eb/23/1f16f906.jpg","comment_is_top":false,"comment_ctime":1630060514,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1630060514","product_id":100056701,"comment_content":"ä¸ºä»€ä¹ˆè¯´ fork ä¼šé˜»å¡ä¸»çº¿ç¨‹ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":2420294,"avatar":"https://static001.geekbang.org/account/avatar/00/24/ee/46/7d65ae37.jpg","nickname":"æœ¨å‡ ä¸¶","note":"","ucode":"FFDB958DA64F8C","race_medal":5,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":553695,"discussion_content":"å› ä¸ºforkå­è¿›ç¨‹éœ€è¦æ‹·è´ä¸»è¿›ç¨‹çš„å†…å­˜é¡µè¡¨ï¼Œè¿™æ­¥æ“ä½œæ˜¯é˜»å¡çš„ï¼Œä¸»è¿›ç¨‹å†…å­˜è¶Šå¤§å†…å­˜é¡µè¡¨è¶Šå¤§ï¼Œforkæ—¶é—´è¶Šé•¿","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646031590,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":306641,"user_name":"ç‹ä¹è£","can_delete":false,"product_type":"c1","uid":1110189,"ip_address":"","ucode":"3C87DF4F7CEE10","user_header":"https://static001.geekbang.org/account/avatar/00/10/f0/ad/653db0f4.jpg","comment_is_top":false,"comment_ctime":1628654726,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1628654726","product_id":100056701,"comment_content":"è¿™æ ·å½“rediså®ä¾‹å‡å°‘æˆ–è€…å¢åŠ å‘ç”Ÿäº†å˜åŒ–ï¼Œè¿™å¼ è¡¨å°±éœ€è¦é‡æ–°ç»´æŠ¤","like_count":0},{"had_liked":false,"id":306611,"user_name":"Geek_51f7f1","can_delete":false,"product_type":"c1","uid":1750221,"ip_address":"","ucode":"C055C2BEF78BCB","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/E3vGFse0gcpic1tkmYkrzJSW0p8VqBiaZUREwkCicysrk5n4T0omg3DoTZe2rHiaDNibtJOd0L6hakY4zDOvs4fyWJA/132","comment_is_top":false,"comment_ctime":1628645310,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1628645310","product_id":100056701,"comment_content":"è¿™è·Ÿ Redis çš„æŒä¹…åŒ–æœºåˆ¶æœ‰å…³ç³»ã€‚åœ¨ä½¿ç”¨ RDB è¿›è¡ŒæŒä¹…åŒ–æ—¶ï¼ŒRedis ä¼š fork å­è¿›ç¨‹æ¥å®Œæˆï¼Œfork æ“ä½œçš„ç”¨æ—¶å’Œ Redis çš„æ•°æ®é‡æ˜¯æ­£ç›¸å…³çš„ï¼Œè€Œ fork åœ¨æ‰§è¡Œæ—¶ä¼šé˜»å¡ä¸»çº¿ç¨‹ã€‚æ•°æ®é‡è¶Šå¤§ï¼Œfork æ“ä½œé€ æˆçš„ä¸»çº¿ç¨‹é˜»å¡çš„æ—¶é—´è¶Šé•¿ã€‚æ‰€ä»¥ï¼Œåœ¨ä½¿ç”¨ RDB å¯¹ 25GB çš„æ•°æ®è¿›è¡ŒæŒä¹…åŒ–æ—¶ï¼Œæ•°æ®é‡è¾ƒå¤§ï¼Œåå°è¿è¡Œçš„å­è¿›ç¨‹åœ¨ fork åˆ›å»ºæ—¶é˜»å¡äº†ä¸»çº¿ç¨‹ï¼Œäºæ˜¯å°±å¯¼è‡´ Redis å“åº”å˜æ…¢äº†<br>è¯·æ•™ä¸‹è€å¸ˆ, è¿™é‡Œåªæ˜¯é¢„å…ˆåˆ›å»ºä¸€ä¸ªå­è¿›ç¨‹, æ€ä¹ˆä¼šä¸æ•°æ®é‡æœ‰å…³ç³»å‘¢. æ•°æ®é‡å¤§, å­è¿›ç¨‹åœ¨è¿›è¡ŒRDBå¿«ç…§æ—¶å³ä¾¿é€Ÿåº¦å¾ˆæ…¢, ç†è®ºä¸Šä¹Ÿä¸å½±å“ä¸»è¿›ç¨‹å§.","like_count":0,"discussions":[{"author":{"id":2420294,"avatar":"https://static001.geekbang.org/account/avatar/00/24/ee/46/7d65ae37.jpg","nickname":"æœ¨å‡ ä¸¶","note":"","ucode":"FFDB958DA64F8C","race_medal":5,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":553694,"discussion_content":"forkæ…¢çš„ç‚¹å°±æ˜¯ä½ è¯´çš„â€œé¢„å…ˆåˆ›å»ºä¸€ä¸ªå­è¿›ç¨‹â€ï¼Œä¸»è¿›ç¨‹å†…å­˜è¶Šå¤§åˆ›å»ºå­è¿›ç¨‹å°±è¶Šæ…¢ï¼Œå› ä¸ºéœ€è¦æ‹·è´æ›´å¤šçš„å†…å­˜é¡µè¡¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646031511,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":306162,"user_name":"Geek_f71330","can_delete":false,"product_type":"c1","uid":1617615,"ip_address":"","ucode":"40F8CD661E8F59","user_header":"https://static001.geekbang.org/account/avatar/00/18/ae/cf/6186d936.jpg","comment_is_top":false,"comment_ctime":1628413213,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1628413213","product_id":100056701,"comment_content":"â€œè¿™äº›é”®å€¼å¯¹æ‰€å çš„å†…å­˜ç©ºé—´å¤§çº¦æ˜¯ 25GBï¼ˆ5000 ä¸‡ *512Bï¼‰ã€‚æ‰€ä»¥ï¼Œå½“æ—¶ï¼Œæˆ‘æƒ³åˆ°çš„ç¬¬ä¸€ä¸ªæ–¹æ¡ˆå°±æ˜¯ï¼šé€‰æ‹©ä¸€å° 32GB å†…å­˜çš„äº‘ä¸»æœºæ¥éƒ¨ç½² Redisã€‚å› ä¸º 32GB çš„å†…å­˜èƒ½ä¿å­˜æ‰€æœ‰æ•°æ®ï¼Œè€Œä¸”è¿˜ç•™æœ‰ 7GBâ€<br><br>è¯·é—®è€å¸ˆï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒæœåŠ¡å™¨ä»…å‰©7GBçš„å†…å­˜ï¼Œè¿˜å¯ä»¥fork å­è¿›ç¨‹å¯¹25GBçš„å†…å­˜è¿›è¡ŒæŒä¹…åŒ–å—ï¼Ÿå­è¿›ç¨‹éš¾é“ä¸éœ€è¦å ç”¨25GBå—ï¼Ÿ è¿™ä¸€ç‚¹å¾ˆå›°æ‰°æˆ‘ã€‚ å¦‚æœæœåŠ¡å™¨æ²¡æœ‰å¼€å¯swapç©ºé—´ï¼Œé‚£ä¹ˆå†…å­˜è¶³å¤Ÿè¿›è¡Œforkå­è¿›ç¨‹å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1123146,"avatar":"https://static001.geekbang.org/account/avatar/00/11/23/4a/c608bdf6.jpg","nickname":"ä¸‰çŸ³","note":"","ucode":"734DCECABC3BEC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":389249,"discussion_content":"å¯ä»¥çœ‹çœ‹å‰é¢ä¸¤ç« ä»‹ç»çš„rdbå’Œaofï¼Œforkå­çº¿ç¨‹æ˜¯æ‹·è´çš„å†…å­˜è¡¨è€Œä¸æ˜¯æ•°æ®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629192304,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":305834,"user_name":"silence","can_delete":false,"product_type":"c1","uid":2461058,"ip_address":"","ucode":"D22041E776C238","user_header":"https://static001.geekbang.org/account/avatar/00/25/8d/82/55be8390.jpg","comment_is_top":false,"comment_ctime":1628184827,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1628184827","product_id":100056701,"comment_content":"æ¯ç¯‡éƒ½èƒ½åŠæ—¶çœ‹åˆ°ä¸¤å¤§å­¦ä¹ å§”å‘˜çš„ç²¾å½©è§£ç­”ä¸æ€»ç»“ï¼Œæ˜¯çœŸçš„å¼º","like_count":0},{"had_liked":false,"id":305520,"user_name":"èŒ¶æ²¡å–å®Œ","can_delete":false,"product_type":"c1","uid":1644104,"ip_address":"","ucode":"D72D88C42A1258","user_header":"https://static001.geekbang.org/account/avatar/00/19/16/48/09493874.jpg","comment_is_top":false,"comment_ctime":1628008008,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1628008008","product_id":100056701,"comment_content":"è¯¾åé—®é¢˜ï¼šä½¿ç”¨äº†hash slotï¼Œredis clusterå°±æ˜¯ä¸€è‡´æ€§hashç®—æ³•äº†ï¼Œå¢å‡å®ä¾‹ä¼šè‡ªåŠ¨åˆ†é…slotï¼Œå¯¹é›†ç¾¤é€ æˆçš„å½±å“æœ€å°","like_count":0},{"had_liked":false,"id":305199,"user_name":"Heaven","can_delete":false,"product_type":"c1","uid":1694207,"ip_address":"","ucode":"FA33FBCC66C911","user_header":"https://static001.geekbang.org/account/avatar/00/19/d9/ff/b23018a6.jpg","comment_is_top":false,"comment_ctime":1627874315,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1627874315","product_id":100056701,"comment_content":"åˆ«å¿˜äº†,å¦‚æœä½¿ç”¨å“ˆå¸Œè¡¨ä½œä¸ºæ˜ å°„å…³ç³»çš„ç»´æŠ¤æ–¹å¼,é‚£ä¹ˆè¿™ä¸ªå“ˆå¸Œè¡¨çš„ç»´æŠ¤å°†æ˜¯ä¸€ä¸ªéå¸¸åºå¤§çš„å·¥ä½œé‡,ä¸€ä¸ªå®ä¾‹çš„ä¸Šä¸‹çº¿,éƒ½å°†ä¿®æ”¹å¤§é‡çš„hashè¡¨å†…æ•°æ®,è¿™ä¸€æ­¥å¯ä»¥åˆ©ç”¨åç†µç­‰æœºåˆ¶æ¥å®ç°ç»´æŠ¤,ä½†æ˜¯åç†µå¸¦æ¥çš„é¢å¤–è€—æ—¶,éƒ½æ˜¯æ–°å‡ºç°çš„é—®é¢˜","like_count":0},{"had_liked":false,"id":304377,"user_name":"Geek_60e402","can_delete":false,"product_type":"c1","uid":2685772,"ip_address":"","ucode":"2BA18B57249600","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/MRPyUwu5UQohFRm505mO9KEh4rhmhCABwhVgYDFg9XnoiaUlvmqoQyzsWNdPEd8JHSK8NErN066RdFOyeINK04A/132","comment_is_top":false,"comment_ctime":1627376112,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1627376112","product_id":100056701,"comment_content":"æˆ‘æ„Ÿè§‰è¿™ç§æ–¹æ¡ˆä¹Ÿæ˜¯æœ‰ç¼ºç‚¹çš„ï¼Œè¦æ˜¯æˆ‘çš„keyç»è¿‡hashä»¥åå…¨éƒ¨æ‰“åˆ°ä¸€ä¸ªæ§½ä½ä¸Šå‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1507783,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/c7/549b5616.jpg","nickname":"å¤œæ¶›","note":"","ucode":"672CC53663710B","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":389299,"discussion_content":"åŸºæœ¬ä¸Šä½¿ç”¨äº†ç®—æ³•å°±ä¸ç”¨æ‹…å¿ƒè¿™ä¸ªé—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629209207,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1123146,"avatar":"https://static001.geekbang.org/account/avatar/00/11/23/4a/c608bdf6.jpg","nickname":"ä¸‰çŸ³","note":"","ucode":"734DCECABC3BEC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":389250,"discussion_content":"hashå°±æ˜¯ä¸ºäº†æ‰“æ•£æ•°æ®çš„ï¼Œé‡è¶Šå¤§è¶Šå‡è¡¡ã€‚å¦‚æœé‡å¾ˆå°‘å³ä½¿æ‰“åˆ°ä¸€ä¸ªæ§½ä¸Šä¹Ÿæ²¡å•¥å…³ç³»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629192451,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":304373,"user_name":"Geek_60e402","can_delete":false,"product_type":"c1","uid":2685772,"ip_address":"","ucode":"2BA18B57249600","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/MRPyUwu5UQohFRm505mO9KEh4rhmhCABwhVgYDFg9XnoiaUlvmqoQyzsWNdPEd8JHSK8NErN066RdFOyeINK04A/132","comment_is_top":false,"comment_ctime":1627375826,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1627375826","product_id":100056701,"comment_content":"å¦‚æœæ§½ä½åœ¨è¿ç§»è¿‡ç¨‹ä¸­ï¼Œçªç„¶æ–­ç½‘äº†ï¼Œæ§½ä½ä¸Šçš„æ•°æ®ä¼šä¸¢å¤±å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":303693,"user_name":"å¿«ä¹å°±å¥½","can_delete":false,"product_type":"c1","uid":1205376,"ip_address":"","ucode":"5F4806B050FA46","user_header":"https://static001.geekbang.org/account/avatar/00/12/64/80/61107e24.jpg","comment_is_top":false,"comment_ctime":1626934884,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1626934884","product_id":100056701,"comment_content":"è¯·é—®ä¸€ä¸‹redis 4.0.14ç‰ˆæœ¬ï¼Œéƒ¨ç½²é›†ç¾¤æ¨¡å¼3ä¸»3ä»ï¼Œä¸»èŠ‚ç‚¹æ•…éšœï¼Œä¸»ä»åˆ‡æ¢ä¸äº†ï¼Œä¸‹çº¿èŠ‚ç‚¹ä¸€ç›´å¤„äºhandshakeçŠ¶æ€ï¼Œæ¯15s nodeâ€”idå˜åŒ–ä¸€æ¬¡ï¼Œåœ¨15sä¹‹å†…æ‰‹åŠ¨forget nodeâ€”idä¹Ÿå˜åŒ–ä¸€æ¬¡ã€‚","like_count":0},{"had_liked":false,"id":303551,"user_name":"Just Do IT","can_delete":false,"product_type":"c1","uid":1192724,"ip_address":"","ucode":"1EAD92510FA7BE","user_header":"https://static001.geekbang.org/account/avatar/00/12/33/14/78104f1f.jpg","comment_is_top":false,"comment_ctime":1626852762,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1626852762","product_id":100056701,"comment_content":"å¦‚æœè¿”å›äº†askï¼Œé‡å®šå‘åˆ°æ–°åœ°å€åä¾ç„¶æ²¡æœ‰è¯»å–åˆ°æ€ä¹ˆåŠï¼Ÿï¼ˆå› ä¸ºè¿ç§»æ¯•ç«Ÿéœ€è¦æ—¶é—´ï¼Œé‡å®šå‘åï¼Œæƒ³è®¿é—®çš„æ•°æ®æ²¡æœ‰è¿ç§»å®Œæ€ä¹ˆåŠï¼Ÿæ˜¯ä¸€ç›´åœ¨æ–°åœ°å€é˜»å¡ç­‰å¾…ä¹ˆï¼Ÿï¼‰<br><br><br>â€œè¿™ä¸ªç»“æœä¸­çš„ ASK å‘½ä»¤å°±è¡¨ç¤ºï¼Œå®¢æˆ·ç«¯è¯·æ±‚çš„é”®å€¼å¯¹æ‰€åœ¨çš„å“ˆå¸Œæ§½ 13320ï¼Œåœ¨ 172.16.19.5 è¿™ä¸ªå®ä¾‹ä¸Šï¼Œä½†æ˜¯è¿™ä¸ªå“ˆå¸Œæ§½æ­£åœ¨è¿ç§»ã€‚æ­¤æ—¶ï¼Œå®¢æˆ·ç«¯éœ€è¦å…ˆç»™ 172.16.19.5 è¿™ä¸ªå®ä¾‹å‘é€ä¸€ä¸ª ASKING å‘½ä»¤ã€‚è¿™ä¸ªå‘½ä»¤çš„æ„æ€æ˜¯ï¼Œè®©è¿™ä¸ªå®ä¾‹å…è®¸æ‰§è¡Œå®¢æˆ·ç«¯æ¥ä¸‹æ¥å‘é€çš„å‘½ä»¤ã€‚ç„¶åï¼Œå®¢æˆ·ç«¯å†å‘è¿™ä¸ªå®ä¾‹å‘é€ GET å‘½ä»¤ï¼Œä»¥è¯»å–æ•°æ®ã€‚â€","like_count":0,"discussions":[{"author":{"id":2420294,"avatar":"https://static001.geekbang.org/account/avatar/00/24/ee/46/7d65ae37.jpg","nickname":"æœ¨å‡ ä¸¶","note":"","ucode":"FFDB958DA64F8C","race_medal":5,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":553867,"discussion_content":"é¦–å…ˆï¼Œkeyè¿ç§»æ˜¯é˜»å¡çš„æˆ–è€…è¯´æ˜¯åŸå­çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªkeyè¦ä¹ˆå­˜åœ¨äºæºèŠ‚ç‚¹è¦ä¹ˆå­˜åœ¨äºç›®æ ‡èŠ‚ç‚¹\næ‰€ä»¥å¦‚æœå­˜åœ¨äºæºèŠ‚ç‚¹ä¼šç›´æ¥è¿”å›ï¼Œä¸å­˜åœ¨äºæºèŠ‚ç‚¹askåˆ°ç›®æ ‡èŠ‚ç‚¹å¿…å®šèƒ½æŸ¥åˆ°ã€‚å¦‚æœæŸ¥è¯¢çš„æ—¶å€™æ­£å¥½åœ¨è¿ç§»åˆ™ä¼šåœ¨æºèŠ‚ç‚¹é˜»å¡ï¼Œé˜»å¡ç»“æŸåå†askåˆ°ç›®æ ‡èŠ‚ç‚¹ï¼Œå› æ­¤ä¸€æ¬¡è¿ç§»çš„keyä¸è¦å¤ªå¤šå¤ªå¤§ å¦åˆ™è¿ç§»æ—¶ä¼šé€ æˆé•¿æ—¶é—´é˜»å¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646121722,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":302905,"user_name":"ub8","can_delete":false,"product_type":"c1","uid":1481811,"ip_address":"","ucode":"0D937C3EAEB781","user_header":"https://static001.geekbang.org/account/avatar/00/16/9c/53/ade0afb0.jpg","comment_is_top":false,"comment_ctime":1626428746,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1626428746","product_id":100056701,"comment_content":"åœ¨è¿™ç§é›†ç¾¤æ¨¡å¼ä¸‹ï¼Œå“¨å…µæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1507783,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/c7/549b5616.jpg","nickname":"å¤œæ¶›","note":"","ucode":"672CC53663710B","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":389300,"discussion_content":"åˆ‡ç‰‡é›†ç¾¤å°±æ²¡å“¨å…µäº†ï¼Œå›¾éƒ½æ²¡ç”»äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629209255,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":300392,"user_name":"zachary","can_delete":false,"product_type":"c1","uid":2640551,"ip_address":"","ucode":"B22B95FCECD6E7","user_header":"https://static001.geekbang.org/account/avatar/00/28/4a/a7/ab7998b1.jpg","comment_is_top":false,"comment_ctime":1625137831,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1625137831","product_id":100056701,"comment_content":"çœ‹äº†ä¸‹è¯„è®ºï¼Œæœ‰è¯»è€…æå‡ºä¸€ä¸ªé—®é¢˜æˆ‘æ¯”è¾ƒæ„Ÿå…´è¶£ã€‚å°±æ˜¯redisåˆ†ç‰‡é›†ç¾¤çš„å®˜æ–¹è§£å†³æ–¹æ¡ˆredis clusterä¸ºä»€ä¹ˆä¸é‡‡ç”¨ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•ã€‚è®°å¾—memcachedçš„é›†ç¾¤å°±æ˜¯ç”¨ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•ï¼Œè€Œredis clusteré‡‡ç”¨å“ˆå¸Œæ§½çš„è§£å†³æ–¹æ¡ˆã€‚ä½¿ç”¨å“ˆå¸Œæ§½æ–¹æ¡ˆå¯ä»¥å®ç°é”®å€¼å¯¹ä¸åˆ†ç‰‡èŠ‚ç‚¹é—´å¼±è€¦åˆã€‚è¿˜æœ‰æ¯æ¬¡æ‰©å®¹çš„æ—¶å€™ï¼Œé”®å€¼å¯¹çš„è¿ç§»å¯ä»¥åšåˆ°äººä¸ºå¯æ§ï¼Œå› ä¸ºå“ˆå¸Œæ§½å¯ä»¥äººä¸ºå»åˆ†é…ã€‚æ¯”å¦‚è¯´ï¼ŒæŸä¸€ä¸ªåˆ†ç‰‡æœ‰ä¸ªçƒ­ç‚¹é”®å€¼å¯¹ï¼Œåœ¨æ‰©å®¹çš„æ—¶å€™ï¼Œæˆ‘æƒ³æŠŠå®ƒè¿ç§»åˆ°æ–°çš„åˆ†ç‰‡èŠ‚ç‚¹ä¸Šï¼Œå¦‚æœé‡‡ç”¨å“ˆå¸Œæ§½çš„æ–¹å¼ï¼Œå°±å¾ˆå®¹æ˜“åšåˆ°ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå“ˆå¸Œæ§½æ–¹å¼è¿˜æœ‰å“ªäº›ä¼˜ç‚¹ï¼ŒæœŸå¾…è€å¸ˆç»™ä¸ªå…¨é¢çš„æ€»ç»“ï¼Ÿ","like_count":0},{"had_liked":false,"id":299151,"user_name":"JaneWu5","can_delete":false,"product_type":"c1","uid":1388757,"ip_address":"","ucode":"6D77C09911FAF6","user_header":"https://static001.geekbang.org/account/avatar/00/15/30/d5/e25d2d32.jpg","comment_is_top":false,"comment_ctime":1624493846,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1624493846","product_id":100056701,"comment_content":"åˆ†æ§½å¤‡ä»½çš„æ—¶å€™å’‹åŠï¼Ÿ åˆ†ç‰‡çš„æƒ…å†µä¸‹æ€ä¹ˆç¡®å®šmaster- slaveï¼Ÿè¿˜æ˜¯å°±æ²¡æœ‰äº†ï¼Ÿï¼Ÿ","like_count":0},{"had_liked":false,"id":298772,"user_name":"jisilu","can_delete":false,"product_type":"c1","uid":2266671,"ip_address":"","ucode":"DF4907D2FF23FE","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erND96otTr4MA09mOXdFwHaXcicjnAPfmRfbUr2gZ5qFV1KfYBoSQmwibIWG1GgYsYiaWhCL9qe1GCuQ/132","comment_is_top":false,"comment_ctime":1624323820,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1624323820","product_id":100056701,"comment_content":"åº”ç”¨ä¸­å¦‚ä½•åƒè®¿é—®å•ä¸€Rediså®ä¾‹ä¸€æ ·è®¿é—®é›†ç¾¤å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":292274,"user_name":"null","can_delete":false,"product_type":"c1","uid":1024294,"ip_address":"","ucode":"F9039EFED6B55D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaELZPnUAiajaR5C25EDLWeJURggyiaOP5GGPe2qlwpQcm5e3ybib8OsP4tvddFDLVRSNNGL5I3SFPJHsA/132","comment_is_top":false,"comment_ctime":1620748695,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1620748695","product_id":100056701,"comment_content":"å› ä¸ºCRC16(key) ï¼… 16384ï¼Œ<br>æ‰€ä»¥ä¸ç®¡æ˜¯æ–°å¢æˆ–åˆ é™¤å®ä¾‹ï¼Œåˆæˆ–è€… rebalance å®ä¾‹çš„æ•°æ®ï¼Œkey-slot çš„æ˜ å°„å§‹ç»ˆä¸å˜ã€‚å˜çš„æ˜¯ slot-instance çš„æ˜ å°„å…³ç³»ï¼Œæ˜¯ä¹ˆï¼Ÿ<br>è°¢è°¢è€å¸ˆï¼","like_count":0},{"had_liked":false,"id":291961,"user_name":"BertGeek","can_delete":false,"product_type":"c1","uid":1452799,"ip_address":"","ucode":"8E1D72C9F9778C","user_header":"https://static001.geekbang.org/account/avatar/00/16/2a/ff/a9d72102.jpg","comment_is_top":false,"comment_ctime":1620626723,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1620626723","product_id":100056701,"comment_content":"1. åœ¨é‡å®šå‘çš„æœºåˆ¶ä¸­ï¼Œåƒä¾‹å­é‡Œçš„æƒ…å†µkey1 key2å·²ç»è¿ç§»åˆ°æ–°çš„å®ä¾‹3ï¼Œ<br>key3key4è¿˜åœ¨å®ä¾‹2çš„æ—¶å€™ï¼Œå¦‚æœå®¢æˆ·ç«¯è¯·æ±‚çš„æ˜¯key3çš„è¯ï¼Œå®ƒæ˜¯ä¼šåˆ°å®ä¾‹2ç›´æ¥è¿”å›key3çš„valueè¿˜æ˜¯å…ˆå¾—åˆ°ASKï¼Ÿ<br><br>2. å¦‚æœæ˜¯ASKé‚£ä¹ˆå®¢æˆ·ç«¯å»ASKING å®ä¾‹3çš„æ—¶å€™ä¼šä¸ä¼šé˜»å¡åˆ°key3è¿ç§»æ—¶é—´ç‰‡ï¼Ÿ<br><br>3. Redis Clusteré›†ç¾¤ï¼Œæ¯ä¸ªå®ä¾‹éƒ½ä¿å­˜ä¸€ä»½æ‰€æœ‰æ§½ä½å’Œå®ä¾‹çš„å¯¹åº”å…³ç³»ï¼Œå¦‚æœå®ä¾‹1ä¸»ä»èŠ‚ç‚¹éƒ½å¼‚å¸¸æˆ–è€…å®•æœºäº†ï¼Œé‚£ä¹ˆè¿™å—æ§½ä½æ•°æ®åº”è¯¥æ˜¯ä¼šä¸¢å¤±çš„ä¹ˆï¼Ÿ<br> å®¢æˆ·ç«¯è®¿é—®å®ä¾‹ä¸Šçš„æ•°æ®åº”è¯¥æ˜¯æŠ¥é”™çŠ¶æ€ï¼Ÿ<br><br>4. å¯¹äºæ­£åœ¨è¿ç§»çš„æ§½ä½æ•°æ®è®¿é—®ï¼Œå¦‚ä½•å¤„ç†ï¼Ÿç­‰å¾…è¿ç§»å®Œè¿˜æ˜¯æŠ¥é”™ï¼Ÿ<br><br> <br>5. redisé›†ç¾¤åˆ†ç‰‡åï¼Œåˆ†ç‰‡åçš„ä»èŠ‚ç‚¹å¯ä»¥æ”¯æŒè¯»æ“ä½œå—ï¼Ÿ","like_count":0},{"had_liked":false,"id":291910,"user_name":"æ‚Ÿç©ºèŠæ¶æ„","can_delete":false,"product_type":"c1","uid":1123163,"ip_address":"","ucode":"C2F482A0CF8AF1","user_header":"https://static001.geekbang.org/account/avatar/00/11/23/5b/983408b9.jpg","comment_is_top":false,"comment_ctime":1620603181,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1620603181","product_id":100056701,"comment_content":"slotå’ŒèŠ‚ç‚¹çš„æ˜ å°„å¯ä»¥è€ƒè™‘ç”¨ä¸€è‡´æ€§hashï¼Œå¦å¤–é€šè¿‡è™šæ‹ŸèŠ‚ç‚¹æ˜ å°„è¾¾åˆ°æœ€å°åŒ–è¿ç§»ã€‚<br>å¦å¤–è·¯ç”±è¡¨ä¿¡æ¯çš„ä¼ æ’­æ˜¯ä¸æ˜¯é‡‡ç”¨çš„Gossipä¼ æ’­åè®®å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":288939,"user_name":"return","can_delete":false,"product_type":"c1","uid":1135528,"ip_address":"","ucode":"42B8A3380DF04B","user_header":"https://static001.geekbang.org/account/avatar/00/11/53/a8/abc96f70.jpg","comment_is_top":false,"comment_ctime":1618794262,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1618794262","product_id":100056701,"comment_content":"è€å¸ˆè®²çš„çœŸç»†ï¼Œä¸æ„§æ˜¯æ•™æˆã€‚","like_count":0},{"had_liked":false,"id":288825,"user_name":"ä¸€ç²’","can_delete":false,"product_type":"c1","uid":1582813,"ip_address":"","ucode":"FB5F583CC6AE3C","user_header":"https://static001.geekbang.org/account/avatar/00/18/26/dd/d58156b1.jpg","comment_is_top":false,"comment_ctime":1618718166,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1618718166","product_id":100056701,"comment_content":"è€å¸ˆï¼Œæƒ³é—®ä¸€ä¸‹æ•°æ®è¿ç§»çš„ç»†èŠ‚ï¼Œåˆ‡ç‰‡Aä»å®ä¾‹1è¿ç§»åˆ°å®ä¾‹2ï¼Œæ˜¯å…ˆè¯»å–é”®å€¼å¯¹å†å†™å…¥å®ä¾‹2ä¸­å—ï¼Œè¿˜æ˜¯æ–‡ä»¶çº§çš„æ‹·è´ï¼Ÿå·²ç»è¿ç§»çš„æ•°æ®å°±ä¸å­˜åœ¨å®ä¾‹1ä¸­äº†å—ï¼Ÿä¸ºä»€ä¹ˆä¸é‡‡ç”¨â€œå¤åˆ¶â€çš„æ–¹å¼ï¼Œå³è¿ç§»è¿‡ç¨‹ä¸­å®ä¾‹1ä¸­çš„æ•°æ®å‡å¯è®¿é—®ï¼Œå¾…è¿ç§»å®Œæˆå†å°†å®ä¾‹1ä¸­çš„åˆ‡ç‰‡Aæ ‡è®°ä¸ºä¸å¯ç”¨ï¼Œç„¶åæ¸…ç†æ‰ï¼Ÿ","like_count":0},{"had_liked":false,"id":288446,"user_name":"del","can_delete":false,"product_type":"c1","uid":1198870,"ip_address":"","ucode":"96C732A55B3837","user_header":"https://static001.geekbang.org/account/avatar/00/12/4b/16/e78d527e.jpg","comment_is_top":false,"comment_ctime":1618471355,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1618471355","product_id":100056701,"comment_content":"å¦‚æœæˆ‘åŸæœ¬æœ‰5ä¸ªåˆ†ç‰‡å®ä¾‹  è¿™ä¸ªæ—¶å€™æˆ‘è¦åŠ 5å°æœºå™¨ã€‚è¿™æ—¶å€™åŸ5å°æœºå™¨ä¸Šçš„æ•°æ®  éœ€è¦ä»æ–°åˆ†é…åˆ°10å°æœºå™¨ä¸Šä¹ˆï¼Ÿå¦‚æœæ˜¯è¿™æ ·çš„è¯ é‚£æ—¶å€™ä¸€æ—¦æ¶‰åŠåˆ° åˆ†ç‰‡å®ä¾‹å‘ç”Ÿæ”¹å˜çš„æ—¶å€™ï¼Œé‚£é›†ç¾¤é‡Œæ‰€æœ‰çš„æ•°æ®éƒ½éœ€è¦ä»æ–°åˆ†é…åŠ è½½ä¹ˆ è¿™ç§å¦‚æœé‡åˆ°é«˜å¹¶å‘è®¿é—®çš„æ—¶å€™ ä¼šä¸ä¼šå­˜åœ¨è¾ƒé•¿æ—¶é—´çš„ASKé”™è¯¯ï¼Ÿ","like_count":0},{"had_liked":false,"id":287490,"user_name":"Geek_e74c15","can_delete":false,"product_type":"c1","uid":2544946,"ip_address":"","ucode":"DC678F5A987D9A","user_header":"","comment_is_top":false,"comment_ctime":1617975479,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1617975479","product_id":100056701,"comment_content":"åˆ†ç‰‡é›†ç¾¤è·Ÿä¸»ä»å“¨å…µæ¨¡å¼æœ‰å•¥å…³ç³»åŒºåˆ«","like_count":0,"discussions":[{"author":{"id":2295880,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/SYxHx9k1fVAZGanCk5cFVdzFyhx2pkNk45RdH1Yo3ITBH7dCWjwzEzibAnZaXayqF1TibW6ynBkCqIOd6p1Yhlew/132","nickname":"å»ºé”‹","note":"","ucode":"50E4AF68BE4488","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":577624,"discussion_content":"å“¨å…µæ¨¡å¼ä¸­ï¼Œæ¯ä¸ªrediså­˜å‚¨çš„æ˜¯å…¨é‡çš„æ•°æ®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656237556,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":286526,"user_name":"Saitama","can_delete":false,"product_type":"c1","uid":2419770,"ip_address":"","ucode":"94735DA32C22B1","user_header":"https://static001.geekbang.org/account/avatar/00/24/ec/3a/75bc138d.jpg","comment_is_top":false,"comment_ctime":1617356650,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1617356650","product_id":100056701,"comment_content":"æ·»åŠ èŠ‚ç‚¹ï¼Œæ•°æ®è¿ç§»è¿™é‡Œæœ‰ç‚¹æ‡µã€‚æˆ‘ç†è§£æ˜¯ï¼Œä¾‹å¦‚æœ‰ä¸‰ä¸ªèŠ‚ç‚¹ï¼Œ12ä¸ªæ§½ï¼Œæ¯ä¸ªèŠ‚ç‚¹è´Ÿè´£4ä¸ªæ§½ã€‚é‚£ä¹ˆå†æ·»åŠ ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæ¯ä¸ªèŠ‚ç‚¹è´Ÿè´£4ä¸ªæ§½ï¼Œé‚£ä¹ˆåªéœ€è¦å°†éƒ¨åˆ†æ§½åˆ†é…ç»™æ–°èŠ‚ç‚¹ï¼Œä»¥å‡å°‘æ•°æ®è¿ç§»ä»£ä»·ï¼Ÿ","like_count":0},{"had_liked":false,"id":286385,"user_name":"æœ¨å¤´äºº","can_delete":false,"product_type":"c1","uid":1550296,"ip_address":"","ucode":"AB40DDCACE986B","user_header":"https://static001.geekbang.org/account/avatar/00/17/a7/d8/9cdb4896.jpg","comment_is_top":false,"comment_ctime":1617275870,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1617275870","product_id":100056701,"comment_content":"å¯¹â€œå®¢æˆ·ç«¯ASKé‡å®šå‘å‘½ä»¤â€è¿™ä¸ªä¾‹å­æœ‰ç‚¹è¿·ç³Šï¼Œå¯¹äºè¿™ä¸ªä¾‹å­ï¼Œæˆ‘çš„ç†è§£æ˜¯clientè¯·æ±‚key2ï¼Œç”±äºslot2åœ¨è¿ç§»ä¸­ï¼Œå®ä¾‹2ç»™å®¢æˆ·ç«¯ASKå‘½ä»¤ï¼ŒASKå‘½ä»¤å¸¦äº†key2æ‰€åœ¨çš„å®ä¾‹3çš„åœ°å€ï¼Œclientç»™å®ä¾‹3å‘é€ASKINGï¼Œç„¶åå†ç»™å®ä¾‹3å‘é€Getè¯·æ±‚ï¼Œä¸”åœ¨ä¸‹ä¸€æ¬¡clientè¯·æ±‚key2æ—¶ï¼Œä¾ç„¶ä¼šå‘å®ä¾‹2å‘è¯·æ±‚ã€‚ç–‘æƒ‘åœ¨äºï¼Œä¹Ÿå°±æ˜¯è¯´slot2åœ¨è¿ç§»è¿‡ç¨‹ä¸­ï¼Œrediså®ä¾‹ä¾ç„¶èƒ½æä¾›æœåŠ¡ï¼Ÿå¦‚æœclientè¯·æ±‚çš„æ˜¯key3ï¼Œå®ƒä¼šä¾æ®å†…å­˜ä¸­çš„ç¼“å­˜ï¼Œä¾æ—§è®¿é—®å®ä¾‹2ï¼Œæ­¤æ—¶slot2åœ¨è¿ç§»ä¸­ï¼Œå®ä¾‹2ä¼šè¿”å›å®¢æˆ·ç«¯ASKå‘½ä»¤ï¼Ÿè¿˜æ˜¯ç›´æ¥æŠŠkey3è¿”ç»™å®¢æˆ·ç«¯ï¼Ÿè¿”å›ASKå‘½ä»¤çš„æ¡ä»¶æ˜¯ä»€ä¹ˆï¼Ÿæ˜¯æŸä¸ªslotå‘ç”Ÿè¿ç§»ï¼Œä¸”è¯·æ±‚çš„æ•°æ®ä¸åœ¨æœ¬å®ä¾‹å—ï¼Ÿæ„Ÿè°¢è’‹è€å¸ˆå¸®å¿™å›ç­”ä¸€ä¸‹ã€‚","like_count":0,"discussions":[{"author":{"id":2420294,"avatar":"https://static001.geekbang.org/account/avatar/00/24/ee/46/7d65ae37.jpg","nickname":"æœ¨å‡ ä¸¶","note":"","ucode":"FFDB958DA64F8C","race_medal":5,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":553855,"discussion_content":"1ã€ä¹Ÿå°±æ˜¯è¯´slot2åœ¨è¿ç§»è¿‡ç¨‹ä¸­ï¼Œrediså®ä¾‹ä¾ç„¶èƒ½æä¾›æœåŠ¡ï¼Ÿæ˜¯çš„ï¼Œè¿ç§»å¹¶ä¸æ˜¯ä¸€æ­¥æ“ä½œ\n2ã€å¦‚æœclientè¯·æ±‚çš„æ˜¯key3ï¼Œå®ƒä¼šä¾æ®å†…å­˜ä¸­çš„ç¼“å­˜ï¼Œä¾æ—§è®¿é—®å®ä¾‹2ï¼Œæ­¤æ—¶slot2åœ¨è¿ç§»ä¸­ï¼Œå®ä¾‹2ä¼šè¿”å›å®¢æˆ·ç«¯ASKå‘½ä»¤ï¼Ÿkey3è¿˜æ²¡è¿ç§»ï¼Œä¼šç›´æ¥è¿”å›\n3ã€è¿”å›ASKå‘½ä»¤çš„æ¡ä»¶æ˜¯ä»€ä¹ˆï¼Ÿkeyåœ¨æœ¬èŠ‚ç‚¹æ‰¾ä¸åˆ°ï¼Œä¸”slotæ­£åœ¨è¿ç§»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646118316,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":285898,"user_name":"sgl","can_delete":false,"product_type":"c1","uid":1252243,"ip_address":"","ucode":"D73875BA22954F","user_header":"https://static001.geekbang.org/account/avatar/00/13/1b/93/e3b44969.jpg","comment_is_top":false,"comment_ctime":1617068227,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1617068227","product_id":100056701,"comment_content":"ä½¿ç”¨pipelineçš„æ—¶å€™ï¼Œåˆ‡ç‰‡é›†ç¾¤è¿˜èƒ½ç”¨å—","like_count":0,"discussions":[{"author":{"id":2420294,"avatar":"https://static001.geekbang.org/account/avatar/00/24/ee/46/7d65ae37.jpg","nickname":"æœ¨å‡ ä¸¶","note":"","ucode":"FFDB958DA64F8C","race_medal":5,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":553728,"discussion_content":"èƒ½ï¼Œå‰ææ˜¯ä½ ç”¨çš„å®¢æˆ·ç«¯æ”¯æŒï¼Œå› ä¸ºpipelineä¸»è¦æ˜¯å®¢æˆ·ç«¯å®ç°çš„ã€‚å¦‚æœæ˜¯Javaï¼Œspringboot 2.0é»˜è®¤å®¢æˆ·ç«¯lettuceæ˜¯æ”¯æŒçš„","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1646041937,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":285124,"user_name":"Geek_926921","can_delete":false,"product_type":"c1","uid":2532285,"ip_address":"","ucode":"51C3B0178D77E1","user_header":"","comment_is_top":false,"comment_ctime":1616635449,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1616635449","product_id":100056701,"comment_content":"è€å¸ˆè¯·é—®åˆ‡ç‰‡é›†ç¾¤çš„æ¯ä¸ªå®ä¾‹éƒ½æ˜¯ä¸»åº“å—ï¼Œä¸ŠèŠ‚è¯¾è®²åˆ°ä¸»ä»æ¨¡å¼ï¼Œå¦‚æœåˆ‡ç‰‡é›†ç¾¤æƒ³å¼„æˆä¸»ä»ï¼Œæ˜¯ä¸æ˜¯æ¯ä¸ªå®ä¾‹å„è‡ªä¸ºä¸€ä¸ªä¸»åº“ï¼Œåœ¨æ¯ä¸ªå®ä¾‹ä¸‹é¢è®¾ç½®å„è‡ªå¯¹åº”çš„ä»åº“ï¼Œç„¶åå„è‡ªå¤‡ä»½è‡ªå·±å®ä¾‹çš„æ•°æ®ï¼Œä¸»åº“æŒ‚äº†åï¼Œåªè¦ä»å¯¹åº”çš„å®ä¾‹é‡Œé¢é‡æ–°é€‰ä¸¾ä¸»åº“å°±è¡Œäº†ï¼Œè¯·é—®æ˜¯è¿™æ ·å­çš„å— : )","like_count":0},{"had_liked":false,"id":283985,"user_name":"è‹æ ¼æ‹‰æ²¡åº•","can_delete":false,"product_type":"c1","uid":1476300,"ip_address":"","ucode":"282B56405AE1B9","user_header":"https://static001.geekbang.org/account/avatar/00/16/86/cc/d63bb0f2.jpg","comment_is_top":false,"comment_ctime":1616030199,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1616030199","product_id":100056701,"comment_content":"è’‹è€å¸ˆ,æ‚¨å¥½,æœ‰ä¸¤ä¸ªé—®é¢˜æƒ³è¯·æ•™ä¸€ä¸‹:<br>1.æ‚¨è¯´å½“æœ‰å†™åˆ å‘½ä»¤æ“ä½œæ—¶,é›†ç¾¤å®ä¾‹çš„å­˜å‚¨è¦ç›¸å¯¹åº”çš„æ‰©ç¼©å®¹,é‚£ä¹ˆå®ƒçš„è§¦å‘æ¡ä»¶æ˜¯ä»€ä¹ˆå‘¢?<br>2.è¿›è¡Œæ‰©ç¼©æ—¶æ˜¯åœ¨ä¸»çº¿ç¨‹ä¸­è¿›è¡Œ,è¿˜æ˜¯forkå‡ºå­è¿›ç¨‹?å…¶ä¸­æœ‰å“ªäº›ç»†èŠ‚ç‚¹?è¿‡ç¨‹ä¸­æ˜¯å¦ä¼šæœ‰é˜»å¡å‘¢?<br>å¸Œæœ›è€å¸ˆçœ‹åˆ°åˆ°,åœ¨æœ‰æ—¶é—´çš„æƒ…å†µä¸‹,ç­”ç–‘ä¸€ä¸‹,è°¢è°¢!","like_count":0},{"had_liked":false,"id":283190,"user_name":"Geek_0727b3","can_delete":false,"product_type":"c1","uid":1244919,"ip_address":"","ucode":"7ABDB7E5CC9469","user_header":"https://static001.geekbang.org/account/avatar/00/12/fe/f7/75dee350.jpg","comment_is_top":false,"comment_ctime":1615612511,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"1615612511","product_id":100056701,"comment_content":"ä¸»çº¿ç¨‹ fork å­è¿›ç¨‹æ—¶å°±å¯èƒ½ä¼šé˜»å¡è¿™ä¸ªé—®é¢˜ <br>1.å†™æ—¶æ‹·è´æœºåˆ¶ ä¸ºä»€ä¹ˆ å¯¹forkå­è¿›ç¨‹å½±å“é‚£ä¹ˆå¤§<br>æˆ‘ç†è§£ ä¸»çº¿ç¨‹ åšä¸¤ä¸ªäº‹æƒ… <br>1.fork 2.æ‹·è´å†™æ“ä½œå†…å­˜<br>","like_count":0},{"had_liked":false,"id":281810,"user_name":"æš®é›¨","can_delete":false,"product_type":"c1","uid":1176426,"ip_address":"","ucode":"4B7F4932446EF7","user_header":"https://static001.geekbang.org/account/avatar/00/11/f3/6a/6d82e7a3.jpg","comment_is_top":false,"comment_ctime":1614910724,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1614910724","product_id":100056701,"comment_content":"åœ¨æ•°æ®è¿ç§»æœªå®Œæˆæ—¶ï¼Œä¸ºä»€ä¹ˆå®¢æˆ·ç«¯å…ˆå‘é€askingï¼Œåœ¨å‘é€è¯·æ±‚å‘½ä»¤ï¼Œè¿™ä¸ªaskingçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Œä¸èƒ½ç›´æ¥å‘é€è¯·æ±‚å‘½ä»¤ä¹ˆï¼Ÿ","like_count":0,"discussions":[{"author":{"id":2420294,"avatar":"https://static001.geekbang.org/account/avatar/00/24/ee/46/7d65ae37.jpg","nickname":"æœ¨å‡ ä¸¶","note":"","ucode":"FFDB958DA64F8C","race_medal":5,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":553854,"discussion_content":"è®¾ç½®ä¸ªæ ‡è®°ï¼Œå…è®¸æŸ¥ä¸€æ¬¡ï¼Œå¦åˆ™å°±ä¼šè¿”å›MOVEDé”™è¯¯ï¼Œåˆå›åˆ°åŸæ¥é‚£ä¸ªèŠ‚ç‚¹äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646117907,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":277261,"user_name":"Pisces","can_delete":false,"product_type":"c1","uid":1504705,"ip_address":"","ucode":"B1E98AC36BDD0C","user_header":"https://static001.geekbang.org/account/avatar/00/16/f5/c1/b92153c6.jpg","comment_is_top":false,"comment_ctime":1612337302,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1612337302","product_id":100056701,"comment_content":"æ§½ä½é‡æ–°åˆ†é…åï¼Œæ•°æ®å¦‚ä½•è¿ç§»çš„ï¼Ÿæ¯”å¦‚å®ä¾‹2ä¸Šåˆ†é…äº†æ§½ä½3 4ï¼Œé‡æ–°åˆ†é…åï¼Œ3 4 æ§½ä½åˆ†é…åˆ°äº†å®å€’1ä¸Šï¼Œä½†å®ä¾‹2ä¸Šçš„ä¿å­˜çš„æ•°æ®äººå¦‚ä½•ç§»åŠ¨åˆ°å®ä¾‹1ä¸Šï¼Ÿ","like_count":0},{"had_liked":false,"id":275905,"user_name":"python","can_delete":false,"product_type":"c1","uid":1870014,"ip_address":"","ucode":"2226125EBC99A5","user_header":"https://static001.geekbang.org/account/avatar/00/1c/88/be/cc6a7c11.jpg","comment_is_top":false,"comment_ctime":1611715544,"is_pvip":false,"replies":[{"id":"100449","content":"å¯¹äºå¤æ‚ç±»å‹çš„valueæ¥è¯´ï¼Œkeyä¹Ÿä¸€æ ·ä¼šåšåˆ†ç‰‡çš„ã€‚è¿™ä¸ªkeyæ˜¯æŒ‡å¤æ‚ç±»å‹æœ¬èº«çš„keyï¼Œå¹¶ä¸æ˜¯valueé›†åˆå†…éƒ¨çš„keyï¼ˆä¾‹å¦‚Hashé›†åˆå†…éƒ¨çš„keyï¼‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"è’‹å¾·é’§","uid":"1609687","ctime":1612143087,"ip_address":"","comment_id":275905,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1611715544","product_id":100056701,"comment_content":"è€å¸ˆï¼Œè¯·é—®rediså¯¹keyåšåˆ†ç‰‡å­˜å‚¨åœ¨ä¸é€šçš„å“ˆå¸Œæ§½ï¼Œè¿™æ˜¯å…¨å±€key-valueã€‚é‚£ä¹ˆå¯¹äºhashè¿™ç§å¤æ‚ç±»å‹çš„valueçš„keyä¹Ÿä¼šåšåˆ†ç‰‡å­˜å‚¨å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1609687,"avatar":"https://static001.geekbang.org/account/avatar/00/18/8f/d7/fb60129d.jpg","nickname":"è’‹å¾·é’§","note":"","ucode":"833985C2C37C0A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":514523,"discussion_content":"å¯¹äºå¤æ‚ç±»å‹çš„valueæ¥è¯´ï¼Œkeyä¹Ÿä¸€æ ·ä¼šåšåˆ†ç‰‡çš„ã€‚è¿™ä¸ªkeyæ˜¯æŒ‡å¤æ‚ç±»å‹æœ¬èº«çš„keyï¼Œå¹¶ä¸æ˜¯valueé›†åˆå†…éƒ¨çš„keyï¼ˆä¾‹å¦‚Hashé›†åˆå†…éƒ¨çš„keyï¼‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612143087,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":271673,"user_name":"Gopher","can_delete":false,"product_type":"c1","uid":1206229,"ip_address":"","ucode":"3C1F9012BB486D","user_header":"https://static001.geekbang.org/account/avatar/00/12/67/d5/1b26b725.jpg","comment_is_top":false,"comment_ctime":1609752896,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1609752896","product_id":100056701,"comment_content":"ä¸ºä»€ä¹ˆæ§½ç‚¹æ•°æ˜¯16383","like_count":0,"discussions":[{"author":{"id":1109527,"avatar":"https://static001.geekbang.org/account/avatar/00/10/ee/17/32183260.jpg","nickname":"é€é¥é­”å›","note":"","ucode":"6EDD906634D7CB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":370229,"discussion_content":"2^16","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619339498,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":271443,"user_name":"Johar","can_delete":false,"product_type":"c1","uid":1101969,"ip_address":"","ucode":"834136A6F64CDC","user_header":"https://static001.geekbang.org/account/avatar/00/10/d0/91/89123507.jpg","comment_is_top":false,"comment_ctime":1609642289,"is_pvip":false,"discussion_count":0,"race_medal":2,"score":"1609642289","product_id":100056701,"comment_content":"åœ¨æ–‡ä¸­æåˆ°ï¼Œå¢åˆ åˆ†ç‰‡èŠ‚ç‚¹ï¼Œæˆ–è€…è´Ÿè½½å‡è¡¡çš„æ—¶å€™ï¼Œä¼šæœ‰æ•°æ®è¿å¾™.1.è´Ÿè½½å‡è¡¡ä»€ä¹ˆæ—¶å€™å‘ç”Ÿï¼Ÿ2.è€ƒè™‘ä¸Šè¿°çš„æƒ…å†µï¼Œæ¯ä¸ªåˆ†ç‰‡èŠ‚ç‚¹çš„å†…å­˜ï¼Œç£ç›˜éœ€è¦è€ƒè™‘å¢åŠ å®¹é‡ï¼Œè€å¸ˆï¼Œè§„åˆ’rediså®¹é‡å¤šå°‘æ¯”è¾ƒåˆé€‚ï¼Ÿ","like_count":0},{"had_liked":false,"id":261579,"user_name":"è¢ä¸œæ˜Šçš„ç”µä¿¡æ‰‹æœº","can_delete":false,"product_type":"c1","uid":2300724,"ip_address":"","ucode":"938393B2C47702","user_header":"","comment_is_top":false,"comment_ctime":1605428419,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1605428419","product_id":100056701,"comment_content":"èŠ‚çœå†…å­˜ç©ºé—´","like_count":0},{"had_liked":false,"id":261335,"user_name":"å‘¨å¤©èˆª","can_delete":false,"product_type":"c1","uid":2308831,"ip_address":"","ucode":"B28D84594679A6","user_header":"https://static001.geekbang.org/account/avatar/00/23/3a/df/ea0fc831.jpg","comment_is_top":false,"comment_ctime":1605274953,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1605274953","product_id":100056701,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œå¦‚æœå¯¹é›†ç¾¤è¿›è¡Œåœ¨çº¿æ‰©åˆ—ç‚¹ï¼Œé‡æ–°åˆ†é…hashæ§½ä½åï¼ŒåŸæ¥æ§½ä½çš„æ•°æ®å’‹åŠï¼Ÿä¹Ÿä¼šè‡ªåŠ¨è¿‡æ¥å—ï¼Ÿæˆ‘ä»¥å‰è®°å¾—åœ¨é‡æ–°åˆ†é…æ§½ä½çš„æ—¶å€™ï¼Œè¦ä¿è¯æ§½ä½æ²¡æœ‰æ•°æ®æ‰è¡Œï¼Œä¼°è®¡æˆ‘å¼„é”™äº†ã€‚","like_count":0},{"had_liked":false,"id":260681,"user_name":"Kevin","can_delete":false,"product_type":"c1","uid":1796510,"ip_address":"","ucode":"C23E3390995D95","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKo5jCPQW87sFySwXiaLxibak0qQYuFRTyy8RlNsO9JDyxBk1AYDrsphRskxzXPLPOW8ibWicWlRAnzwg/132","comment_is_top":false,"comment_ctime":1605082355,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1605082355","product_id":100056701,"comment_content":"é‡‡ç”¨ç›´æ¥æ˜ å°„ï¼Œç›¸å½“äºæ—¶é—´å¤æ‚åº¦O(n)ï¼Œé‡‡ç”¨CRCå–æ¨¡ï¼Œç›¸å½“äºå°†æ—¶é—´å¤æ‚åº¦è°ƒæ•´ä¸ºO(log N) ","like_count":0},{"had_liked":false,"id":260406,"user_name":"æ˜æœˆå‡ æ—¶","can_delete":false,"product_type":"c1","uid":1675716,"ip_address":"","ucode":"E46C844EAB2CD0","user_header":"https://static001.geekbang.org/account/avatar/00/19/91/c4/bcdcda65.jpg","comment_is_top":false,"comment_ctime":1604999158,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1604999158","product_id":100056701,"comment_content":"Redis Clusterä¸é‡‡ç”¨ç›´æ¥æŠŠkeyæ˜ å°„åˆ°å®ä¾‹ï¼Œè€Œé‡‡ç”¨å“ˆå¸Œæ§½çš„æ–¹å¼åŸå› ï¼šå¯ç”¨ä½¿Redisé›†ç¾¤è®¾è®¡ï¼šç®€æ´ï¼Œé«˜æ•ˆï¼Œæœ‰å¼¹æ€§<br>","like_count":0},{"had_liked":false,"id":260405,"user_name":"æ˜æœˆå‡ æ—¶","can_delete":false,"product_type":"c1","uid":1675716,"ip_address":"","ucode":"E46C844EAB2CD0","user_header":"https://static001.geekbang.org/account/avatar/00/19/91/c4/bcdcda65.jpg","comment_is_top":false,"comment_ctime":1604999074,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1604999074","product_id":100056701,"comment_content":"åœ¨ Redis 3.0 ä¹‹å‰ï¼ŒRedis å®˜æ–¹å¹¶æ²¡æœ‰æä¾›åˆ‡ç‰‡é›†ç¾¤æ–¹æ¡ˆï¼Œä½†æ˜¯ï¼Œå…¶å®å½“æ—¶ä¸šç•Œå·²ç»æœ‰äº†ä¸€äº›åˆ‡ç‰‡é›†ç¾¤çš„æ–¹æ¡ˆï¼Œä¾‹å¦‚åŸºäºå®¢æˆ·ç«¯åˆ†åŒºçš„ ShardedJedisï¼ŒåŸºäºä»£ç†çš„ Codisã€Twemproxy ç­‰ã€‚è¿™äº›æ–¹æ¡ˆçš„åº”ç”¨æ—©äº Redis Cluster æ–¹æ¡ˆï¼Œåœ¨æ”¯æ’‘çš„é›†ç¾¤å®ä¾‹è§„æ¨¡ã€é›†ç¾¤ç¨³å®šæ€§ã€å®¢æˆ·ç«¯å‹å¥½æ€§æ–¹é¢ä¹Ÿéƒ½æœ‰ç€å„è‡ªçš„ä¼˜åŠ¿ï¼Œæˆ‘ä¼šåœ¨åé¢çš„è¯¾ç¨‹ä¸­ï¼Œä¸“é—¨å’Œä½ èŠèŠè¿™äº›æ–¹æ¡ˆçš„å®ç°æœºåˆ¶ï¼Œä»¥åŠå®è·µç»éªŒã€‚è¿™æ ·ä¸€æ¥ï¼Œå½“ä½ å†ç¢°åˆ°ä¸šåŠ¡å‘å±•å¸¦æ¥çš„æ•°æ®é‡å·¨å¤§çš„éš¾é¢˜æ—¶ï¼Œå°±å¯ä»¥æ ¹æ®è¿™äº›æ–¹æ¡ˆçš„ç‰¹ç‚¹ï¼Œé€‰æ‹©åˆé€‚çš„æ–¹æ¡ˆå®ç°åˆ‡ç‰‡é›†ç¾¤ï¼Œä»¥åº”å¯¹ä¸šåŠ¡éœ€æ±‚äº†ã€‚","like_count":0},{"had_liked":false,"id":260306,"user_name":"duckman","can_delete":false,"product_type":"c1","uid":2184325,"ip_address":"","ucode":"0184C26C4B6C1B","user_header":"https://static001.geekbang.org/account/avatar/00/21/54/85/ab5148ce.jpg","comment_is_top":false,"comment_ctime":1604980798,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"1604980798","product_id":100056701,"comment_content":"å“ˆå¸Œæ§½æ•°æ®è¿ç§»è¿™é‡Œæ²¡æœ‰ææ‡‚:<br>key1, key2, key3, key4 ä»  node2 è¿è‡³ node3, æ­¤æ—¶ key1, key2 å·²è¿è‡³ node3.<br><br>æ­¤æ—¶ï¼Œnode2æ”¶åˆ°ä¸€ä¸ªè¯·æ±‚ get key3, è¯¥å¦‚ä½•å¤„ç†?<br><br>æˆ‘çš„ç†è§£: å› ä¸º key3 è¿˜åœ¨ node2ä¸Š, æ‰€ä»¥è¿”å› val3. å¦‚æœä¸åœ¨ node2 ä¸Šï¼Œ è¿”å› ASKING slot_val node3.<br><br>ç®€å•è¯´å°±æ˜¯ï¼Œæˆ‘æœ‰è¿™ä¸ªå€¼ï¼Œå°±ç›´æ¥è¿”å›ç»™ä½ ï¼›æ²¡æœ‰ï¼Œå°±è¿”å› ASKING ... è®©ä½ å»è¿™ä¸ªèŠ‚ç‚¹ä¸Šæ‰¾ï¼Œä½†æ˜¯å› ä¸ºè¿˜æ²¡æœ‰è¿ç§»å®Œï¼Œä¸è¦ä¿®æ”¹ä½ æœ¬åœ°çš„è·¯ç”±è¡¨ã€‚<br><br>è¯·æ•™å¤§å®¶ï¼Œæˆ‘çš„ç†è§£å¯¹ä¸ï¼Ÿ<br><br><br>","like_count":0,"discussions":[{"author":{"id":2420294,"avatar":"https://static001.geekbang.org/account/avatar/00/24/ee/46/7d65ae37.jpg","nickname":"æœ¨å‡ ä¸¶","note":"","ucode":"FFDB958DA64F8C","race_medal":5,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":553851,"discussion_content":"ç†è§£çš„æ²¡é”™ï¼Œçº æ­£ä¸ªå°é”™è¯¯ï¼Œæ˜¯è¿”å›ASKä¸æ˜¯ASKINGï¼ŒASKINGæ˜¯å®¢æˆ·ç«¯å‘é€çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646117636,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1452799,"avatar":"https://static001.geekbang.org/account/avatar/00/16/2a/ff/a9d72102.jpg","nickname":"BertGeek","note":"","ucode":"8E1D72C9F9778C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":373126,"discussion_content":"è¯·ä½œè€…ç»™äºæƒå¨è§£ç­”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620625822,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2028947,"avatar":"","nickname":"Geek5350","note":"","ucode":"6EB4553707C357","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":372292,"discussion_content":"æˆ‘ä¹Ÿæ˜¯è¿™æ ·ç†è§£","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620273266,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":259813,"user_name":"æ˜æœˆå‡ æ—¶","can_delete":false,"product_type":"c1","uid":1675716,"ip_address":"","ucode":"E46C844EAB2CD0","user_header":"https://static001.geekbang.org/account/avatar/00/19/91/c4/bcdcda65.jpg","comment_is_top":false,"comment_ctime":1604845624,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1604845624","product_id":100056701,"comment_content":"åœ¨ Redis 3.0 ä¹‹å‰ï¼ŒRedis å®˜æ–¹å¹¶æ²¡æœ‰æä¾›åˆ‡ç‰‡é›†ç¾¤æ–¹æ¡ˆï¼Œä½†æ˜¯ï¼Œå…¶å®å½“æ—¶ä¸šç•Œå·²ç»æœ‰äº†ä¸€äº›åˆ‡ç‰‡é›†ç¾¤çš„æ–¹æ¡ˆï¼Œä¾‹å¦‚åŸºäºå®¢æˆ·ç«¯åˆ†åŒºçš„ ShardedJedisï¼ŒåŸºäºä»£ç†çš„ Codisã€Twemproxy ç­‰ã€‚è¿™äº›æ–¹æ¡ˆçš„åº”ç”¨æ—©äº Redis Cluster æ–¹æ¡ˆï¼Œåœ¨æ”¯æ’‘çš„é›†ç¾¤å®ä¾‹è§„æ¨¡ã€é›†ç¾¤ç¨³å®šæ€§ã€å®¢æˆ·ç«¯å‹å¥½æ€§æ–¹é¢ä¹Ÿéƒ½æœ‰ç€å„è‡ªçš„ä¼˜åŠ¿ã€‚è¿™æ ·ä¸€æ¥ï¼Œå½“å†ç¢°åˆ°ä¸šåŠ¡å‘å±•å¸¦æ¥çš„æ•°æ®é‡å·¨å¤§çš„éš¾é¢˜æ—¶ï¼Œå°±å¯ä»¥æ ¹æ®è¿™äº›æ–¹æ¡ˆçš„ç‰¹ç‚¹ï¼Œé€‰æ‹©åˆé€‚çš„æ–¹æ¡ˆå®ç°åˆ‡ç‰‡é›†ç¾¤ï¼Œä»¥åº”å¯¹ä¸šåŠ¡éœ€æ±‚äº†ã€‚","like_count":0},{"had_liked":false,"id":259812,"user_name":"æ˜æœˆå‡ æ—¶","can_delete":false,"product_type":"c1","uid":1675716,"ip_address":"","ucode":"E46C844EAB2CD0","user_header":"https://static001.geekbang.org/account/avatar/00/19/91/c4/bcdcda65.jpg","comment_is_top":false,"comment_ctime":1604845580,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1604845580","product_id":100056701,"comment_content":"å­¦ä¹ äº†åˆ‡ç‰‡é›†ç¾¤åœ¨ä¿å­˜å¤§é‡æ•°æ®æ–¹é¢çš„ä¼˜åŠ¿ï¼Œä»¥åŠåŸºäºå“ˆå¸Œæ§½çš„æ•°æ®åˆ†å¸ƒæœºåˆ¶å’Œå®¢æˆ·ç«¯å®šä½é”®å€¼å¯¹çš„æ–¹æ³•ã€‚","like_count":0},{"had_liked":false,"id":256117,"user_name":"wei","can_delete":false,"product_type":"c1","uid":1032000,"ip_address":"","ucode":"8B14D27AE7C54E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/bf/40/94eaca1b.jpg","comment_is_top":false,"comment_ctime":1603531068,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1603531068","product_id":100056701,"comment_content":"å¸Œæœ›è€å¸ˆæˆ–è€…è¯¾ä»£è¡¨@Kaito ç¿»ç‰Œå›ç­”ï½  èŸ¹èŸ¹ï½","like_count":0},{"had_liked":false,"id":256115,"user_name":"wei","can_delete":false,"product_type":"c1","uid":1032000,"ip_address":"","ucode":"8B14D27AE7C54E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/bf/40/94eaca1b.jpg","comment_is_top":false,"comment_ctime":1603531027,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1603531027","product_id":100056701,"comment_content":"é—®é¢˜ä¸€ï¼šRedis Cluster æ²¡æœ‰å¯¹äº æ‰¹é‡å¤„ç†å‘½ä»¤ å’Œ äº‹åŠ¡å¤„ç†çš„è¯¦ç»†ä»‹ç»ï¼›è€å¸ˆå¯ä»¥è¡¥å……ä¸‹ä¹ˆï¼Ÿ<br>åƒmget è¿™æ ·çš„å‘½ä»¤æ˜¯ä¸æ˜¯åªèƒ½æ”¯æŒåˆ†é…åœ¨åŒä¸€ä¸ªæ§½ä¸­çš„ï¼Ÿ è¿˜æ˜¯å¹²è„†ä¸æ”¯æŒï¼Ÿ<br>é—®é¢˜äºŒï¼šä¸Šé¢ä»‹ç»åœ¨æ•°æ®è¿ç§»è¿‡ç¨‹ä¸­ï¼Œè®¿é—®æ­£åœ¨è¿ç§»çš„æ§½çš„æ—¶å€™ï¼Œå¯ä»¥é€šè¿‡ASKå‘½ä»¤ å‘ŠçŸ¥å®¢æˆ·ç«¯è¿›è¡Œé‡å®šå‘ï¼›æˆ‘çœ‹åªä¸¾ä¾‹äº†è®¿é—®å·²ç»è¿ç§»å®Œæˆkey2, é‚£å¦‚æœè®¿é—®è¿˜æ²¡æœ‰è¿ç§»åˆ°çš„key3å‘¢ï¼Ÿæˆ–è€…è®¿é—®çš„keyæ­£åœ¨è¿ç§»ä¸­å‘¢ï¼Ÿè¿˜æœ‰è¿™ä¸ªæ•°æ®è¿ç§»å±äºè¿ç§»ä¸€ä¸ªåˆ é™¤ä¸€ä¸ªä¹ˆï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1022411,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/99/cb/8964faab.jpg","nickname":"-åªæ˜¯å°å°é…è§’_","note":"","ucode":"EFC1CD54A23F39","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":348421,"discussion_content":"mgetå‘½ä»¤åªæ”¯æŒåˆ†é…åœ¨åŒä¸€ä¸ªæ§½ä¸­çš„\nå¦‚æœè®¿é—®çš„keyæ²¡æœ‰è¢«è¿ç§»ï¼Œåˆ™å°±èŠ‚ç‚¹æ­£å¸¸å¤„ç†ï¼Œå¦‚æœæ—§èŠ‚ç‚¹ä¸­æ²¡æœ‰è¿™ä¸ªkeyï¼Œè¿™ä¼šå‘èµ·askingçš„é‡å®šå‘\nç®—æ˜¯è¿ç§»ä¸€ä¸ªåˆ é™¤ä¸€ä¸ªå§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612540287,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":253064,"user_name":"ä¸Šç¥æ¢µä¿®","can_delete":false,"product_type":"c1","uid":1324307,"ip_address":"","ucode":"77A5BED0911A87","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoU91kd8RZO5hg2w9cpnL4yTcfemDFJH3GfiaNRgOe7nQyQF7xBDc5Yq2Aue5KuHaEGOCMM9RUkUpQ/132","comment_is_top":false,"comment_ctime":1602582757,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1602582757","product_id":100056701,"comment_content":"å“ˆå–½ ä¸€ç›´æœ‰ä¸ªé—®é¢˜è¯·æ•™ä¸€ä¸‹ï¼šredisçš„å“ˆå¸Œæ§½æ˜¯16384ä¸ª é‚£ä¸ºä»€ä¹ˆæ˜¯è¿™ä¸ªæ•°å­—å‘¢  ä»…ä»…æ˜¯å› ä¸ºè¿™ä¹ˆå¤šå¤Ÿç”¨å—","like_count":0},{"had_liked":false,"id":252345,"user_name":"wyf2317","can_delete":false,"product_type":"c1","uid":1236837,"ip_address":"","ucode":"7F3E61A6188B39","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/ub4icibeRLzff8Nf6ORsolib9KHtmeu3d4cCCAFd3Xgah3v78WfDYQB7WKq9iaIPXPwHBxw7mkBP9wYxDGMT9m1Rbw/132","comment_is_top":false,"comment_ctime":1602246910,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1602246910","product_id":100056701,"comment_content":"å“ˆå¸Œæ§½çš„å¥½å¤„åœ¨äºå¯ä»¥è®©ç¼“å­˜ä¸é›†ä¸­åœ¨æŸä¸ªèŠ‚ç‚¹ä¸Šã€‚é¿å…é€ æˆçƒ­ç‚¹keyé›†ä¸­å’Œä¸Šçº¿ä¸‹çº¿é€ æˆçš„æœåŠ¡æ³¢åŠ¨","like_count":0},{"had_liked":false,"id":251411,"user_name":"è‹—","can_delete":false,"product_type":"c1","uid":1088710,"ip_address":"","ucode":"5ECCC6C855E541","user_header":"https://static001.geekbang.org/account/avatar/00/10/9c/c6/05a6798f.jpg","comment_is_top":false,"comment_ctime":1601535535,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1601535535","product_id":100056701,"comment_content":"è€å¸ˆï¼Œredis clusterå¦‚ä½•åšä¿è¯æ•°æ®ä¸ä¸¢å¤±ï¼Ÿ","like_count":0},{"had_liked":false,"id":251215,"user_name":"å”æœé¦–éƒ½","can_delete":false,"product_type":"c1","uid":1081233,"ip_address":"","ucode":"F72655AE0AE4CA","user_header":"https://static001.geekbang.org/account/avatar/00/10/7f/91/962eba1a.jpg","comment_is_top":false,"comment_ctime":1601426249,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1601426249","product_id":100056701,"comment_content":"ï¼ˆ1ï¼‰keyçš„æ•°é‡æ˜¯æ— æ³•é¢„ä¼°çš„ï¼Œå¦‚æœæ”¾ç½®åœ¨ä¸€å¼ è¡¨ä¸­å¯èƒ½å°†å ç”¨å¤§é‡å†…å­˜ï¼›<br>ï¼ˆ2ï¼‰Redisçš„å®ä¾‹çš„å¢åˆ ä¼šå˜å¾—æ›´åŠ å›°éš¾ï¼Œå®ä¾‹çš„å¢åˆ ä¸€å®šä¼šäº§ç”Ÿæ•°æ®è¿ç§»ï¼Œä¼šäº§ç”Ÿå¤§é‡çš„keyä¸å®ä¾‹å…³ç³»çš„é‡æ–°æ˜ å°„ï¼›","like_count":0},{"had_liked":false,"id":250746,"user_name":"å°è¥¿å‡ ","can_delete":false,"product_type":"c1","uid":1286375,"ip_address":"","ucode":"ED1DDE17534508","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJjzTQ6HPGw2LWLiaiciaibfdMMlmxEwBkBjxOPxeYynZlBKCf6U1b0ezM9IZYibB6yKR7HpRuAOdtj29Q/132","comment_is_top":false,"comment_ctime":1601208047,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1601208047","product_id":100056701,"comment_content":"è€å¸ˆï¼Œä½ å¥½ï¼Œç¢°åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œå½“java å®¢æˆ·ç«¯ï¼ˆjedisï¼‰è¿æ¥redis cluster é›†ç¾¤ç«¯æ—¶å€™ã€‚å¦‚æœæœ‰ä¸€ä¸ªèŠ‚ç‚¹æŒ‚äº†ï¼Œå½“ç¨‹åºå†æ¥æŸ¥è¯¢å­˜åœ¨è¿™ä¸ªèŠ‚ç‚¹ä¸Šçš„æ•°æ®æ—¶ï¼Œæç¤ºæ— æ³•è¿æ¥ï¼Œå®¢æˆ·ç«¯å¹¶ä¸èƒ½æ™ºèƒ½çš„è¿æ¥åˆ°å…¶ä»–åˆ°èŠ‚ç‚¹ä¸Šã€‚è¿™æ ·ä¼šä¸€ç›´ä¸å¯ç”¨ï¼ˆappé¡µé¢ä¸Šå¤§é‡å›¾ç‰‡å› ä½¿ç”¨rediså¯¼è‡´æ— æ³•æ˜¾ç¤ºï¼‰ã€‚ç›®å‰æ‰¾åˆ°çš„åŠæ³•æ˜¯é‡å¯javaæœåŠ¡æˆ–è€…æŠŠæŒ‚æ‰çš„èŠ‚ç‚¹èµ·æ¥ï¼Œä½†è¿™æ˜¾ç„¶ä¸å¤Ÿæ™ºèƒ½ï¼Œå¹¶ä¸”æ²¡æœ‰é«˜å¯ç”¨äº†ã€‚ã€‚è€å¸ˆï¼Œæ‚¨æœ‰æ²¡æœ‰å¥½çš„åŠæ³•å»è§£å†³è¿™ä¸ªé—®é¢˜ã€‚æ„Ÿè°¢æ‚¨çš„å›å¤","like_count":0,"discussions":[{"author":{"id":1286375,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJjzTQ6HPGw2LWLiaiciaibfdMMlmxEwBkBjxOPxeYynZlBKCf6U1b0ezM9IZYibB6yKR7HpRuAOdtj29Q/132","nickname":"å°è¥¿å‡ ","note":"","ucode":"ED1DDE17534508","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":309297,"discussion_content":"ä¹Ÿå°±æ˜¯æ–‡ä¸­è¯´çš„moveï¼Œaskï¼Œä½†æ˜¯å½“è¿æ¥çš„èŠ‚ç‚¹å·²ç»æŒ‚æ‰äº†ï¼Œè¯¥å»å“ªä¸ªèŠ‚ç‚¹moveå’Œask..å› ä¸ºå®¢æˆ·ç«¯å·²ç»ç¼“å­˜äº†è¿™ä¸ªèŠ‚ç‚¹çš„ä¿¡æ¯ï¼Œè¿˜æ˜¯ä¼šæ¥è¿™ä¸ªå·²ç»æŒ‚æ‰çš„èŠ‚ç‚¹ä¸Šæ“ä½œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1601255067,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":249704,"user_name":"è§","can_delete":false,"product_type":"c1","uid":1229143,"ip_address":"","ucode":"0C2239867AFF5F","user_header":"https://static001.geekbang.org/account/avatar/00/12/c1/57/27de274f.jpg","comment_is_top":false,"comment_ctime":1600764622,"is_pvip":true,"discussion_count":0,"race_medal":5,"score":"1600764622","product_id":100056701,"comment_content":"### Redisåˆ‡ç‰‡é›†ç¾¤<br>æ ¹æ®CRC16ç®—æ³•çš„å€¼å¯¹16384å–æ¨¡ï¼Œå¾—åˆ°0~16383èŒƒå›´å†…çš„æ¨¡æ•°ï¼Œæ¯ä¸ªæ¨¡æ•°ä»£è¡¨ä¸€ä¸ªå“ˆå¸Œæ§½ï¼Œåˆ›å»ºé›†ç¾¤åé»˜è®¤å¹³å‡åˆ†é…åˆ°å„ä¸ªç¤ºä¾‹ä¸Š<br><br>rediså®ä¾‹ä¼šå¯¹è‡ªå·±çš„å“ˆå¸Œæ§½ä¿¡æ¯è¿›å¹¿æ’­ï¼Œåˆ™æ‰€æœ‰å®ä¾‹éƒ½æœ‰æ§½å’Œå®ä¾‹çš„å¯¹åº”å…³ç³»<br>å®¢æˆ·ç«¯ä¼šç¼“å­˜å“ˆå¸Œæ§½ä¿¡æ¯<br>æ–°å¢å’Œåˆ é™¤ï¼›è´Ÿè½½å‡è¡¡ï¼›éƒ½ä¼šå¯¼è‡´å“ˆå¸Œæ§½é‡æ–°åˆ†é…<br><br>é‡å®šå‘ï¼š<br>- MOVEDï¼šè¿”å›æ•°æ®å­˜æ”¾åœ°å€ï¼Œå¹¶æ›´æ–°å®¢æˆ·ç«¯ç¼“å­˜<br>- ASKï¼šè¿”å›æ•°æ®å­˜æ”¾åœ°å€ï¼Œä½†ä¸æ›´æ–°å®¢æˆ·ç«¯ç¼“å­˜","like_count":0},{"had_liked":false,"id":249600,"user_name":"Geek_383ffd","can_delete":false,"product_type":"c1","uid":1834097,"ip_address":"","ucode":"C3E15ED58CB6DB","user_header":"","comment_is_top":false,"comment_ctime":1600700896,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1600700896","product_id":100056701,"comment_content":"î˜<br>è¯·é—®ä¸‹è€å¸ˆï¼Œåœ¨é‡å®šå‘çš„æœºåˆ¶ä¸­ï¼Œåƒä¾‹å­é‡Œçš„æƒ…å†µkey1 key2å·²ç»è¿ç§»åˆ°æ–°çš„å®ä¾‹3ï¼Œkey3 key4è¿˜åœ¨å®ä¾‹2çš„æ—¶å€™ï¼Œå¦‚æœå®¢æˆ·ç«¯è¯·æ±‚çš„æ˜¯key3çš„è¯ï¼Œå®ƒæ˜¯ä¼šå¾—åˆ°å®ä¾‹2ç›´æ¥è¿”å›key3çš„valueè¿˜æ˜¯å¾—åˆ°ASKï¼Ÿå¦‚æœæ˜¯ASKé‚£ä¹ˆå®¢æˆ·ç«¯å»ASKING å®ä¾‹3çš„æ—¶å€™ä¼šä¸ä¼šé˜»å¡åˆ°key3è¿ç§»å®Œæˆï¼Ÿè°¢è°¢","like_count":0,"discussions":[{"author":{"id":2420294,"avatar":"https://static001.geekbang.org/account/avatar/00/24/ee/46/7d65ae37.jpg","nickname":"æœ¨å‡ ä¸¶","note":"","ucode":"FFDB958DA64F8C","race_medal":5,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":553852,"discussion_content":"ç›´æ¥è¿”å›","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646117668,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":248975,"user_name":"å´”åˆš","can_delete":false,"product_type":"c1","uid":1701963,"ip_address":"","ucode":"EC9ADF0C53ADF4","user_header":"https://static001.geekbang.org/account/avatar/00/19/f8/4b/4f7ccc25.jpg","comment_is_top":false,"comment_ctime":1600393570,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1600393570","product_id":100056701,"comment_content":"Twemproxyä¸‹é…ç½®çš„å¤šä¸ªrediså®ä¾‹ï¼Œæ•°æ®åœ¨è¿™äº›redisä¸­æ˜¯åˆ†ç‰‡å­˜å‚¨è¿˜æ˜¯å…¨éƒ¨çš„å­˜å‚¨ï¼Ÿ","like_count":0},{"had_liked":false,"id":248070,"user_name":"å­¦ä¹ å­¦ä¸ªå±","can_delete":false,"product_type":"c1","uid":1049017,"ip_address":"","ucode":"DF2D61E6FB2FCE","user_header":"https://static001.geekbang.org/account/avatar/00/10/01/b9/73435279.jpg","comment_is_top":false,"comment_ctime":1600000221,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1600000221","product_id":100056701,"comment_content":"å½“keyéå¸¸å¤§çš„æ—¶å€™,è¿™ä¸ªè¡¨ä¹Ÿéšä¹‹å¢å¤§,æŒ‡æ ‡ä¸æ²»æœ¬, redisè¿™æ ·å­åšçš„ç›®çš„æ˜¯æ€§èƒ½,åŒæ—¶å¯¹å¤–æä¾›æ›´å¥½çš„æ‰©å±•æ€§,å½“æ–°çš„æœºå™¨åŠ å…¥è¿›æ¥çš„æ—¶å€™,ç›´æ¥é‡æ–°åˆ†é…æ–°çš„hashæ§½ä»¥åŠæ•°æ®; å¦‚æœç”¨è¡¨æ¥ä¿å­˜çš„è¯,ä¸€æ–¹é¢è¯»å–æ•°æ®ä¹Ÿè¦ç»è¿‡è¿™ä¸ªè¡¨,å¹¶å‘æ¯”è¾ƒå¤§,å¯èƒ½ä¼šå‡ºç°é˜»å¡æƒ…å†µ;","like_count":0},{"had_liked":false,"id":247173,"user_name":"å¿µå½±","can_delete":false,"product_type":"c1","uid":1222742,"ip_address":"","ucode":"E8688E06B033C4","user_header":"https://static001.geekbang.org/account/avatar/00/12/a8/56/9e9594d5.jpg","comment_is_top":false,"comment_ctime":1599624203,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1599624203","product_id":100056701,"comment_content":"è€å¸ˆï¼Œé—®ä¸€ä¸‹redisé›†ç¾¤åˆ†ç‰‡åï¼Œåˆ†ç‰‡åçš„ä»èŠ‚ç‚¹å¯ä»¥æ”¯æŒè¯»æ“ä½œå—ï¼Ÿ","like_count":0},{"had_liked":false,"id":246318,"user_name":"dfuru","can_delete":false,"product_type":"c1","uid":2110772,"ip_address":"","ucode":"0222FADA093D95","user_header":"","comment_is_top":false,"comment_ctime":1599276384,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1599276384","product_id":100056701,"comment_content":"1. é€šè¿‡å¯¹keyæ‰§è¡ŒCRCè®¡ç®—ï¼Œå†å¯¹16384å–æ¨¡ï¼Œä½¿å¾—keyåœ¨å“ˆå¸Œæ§½åˆ†é…æ›´åŠ å‡åŒ€ï¼›<br>2. ä½¿ç”¨æŸ¥è¡¨æ³•ï¼š<br>1ï¼‰æ•°æ®é‡å¤§ï¼Œæ¶ˆè€—å†…å­˜ï¼›ä½¿ç”¨CRCè®¡ç®—æ—¶é—´æ¢ç©ºé—´ï¼›<br>2ï¼‰è¡¨å¤§å°ä¸æ˜“ç¡®å®šï¼Œå¢åŠ æ•°æ®ï¼Œè¡¨éœ€è¦éšä¹‹æ‰©å¤§ï¼›<br>3ï¼‰æ•°æ®åœ¨å®ä¾‹é—´å‡è¡¡ï¼Œä¹Ÿéœ€è¦ä¿®æ”¹è¡¨ï¼Œéœ€è¦å¯¹è¡¨åŠ é”ï¼›<br>4ï¼‰è¡¨æ•°æ®å˜æ›´éƒ½éœ€è¦å®æ—¶æ›´æ–°åˆ°å„ä¸ªå®¢æˆ·ç«¯ï¼Œéœ€è¦è¡¨å’Œå®ä¾‹ä¿æŒå¼ºä¸€è‡´ï¼›","like_count":0},{"had_liked":false,"id":246070,"user_name":"æµªé‡Œä¸ªç‹¼","can_delete":false,"product_type":"c1","uid":1107772,"ip_address":"","ucode":"2085BB3632DCAF","user_header":"https://static001.geekbang.org/account/avatar/00/10/e7/3c/366c15ca.jpg","comment_is_top":false,"comment_ctime":1599151724,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1599151724","product_id":100056701,"comment_content":"è€å¸ˆï¼Œåœ¨Redis Clusterä¸­çš„æŸä¸ªèŠ‚ç‚¹å‘ç”Ÿæ•…éšœï¼Œæ€ä¹ˆè¿›è¡Œæ•…éšœè½¬ç§»çš„ï¼Ÿæˆ–è€…è¯´é›†ç¾¤æ€ä¹ˆå¤„ç†ï¼Ÿ","like_count":0},{"had_liked":false,"id":245355,"user_name":"Jusfly","can_delete":false,"product_type":"c1","uid":1474065,"ip_address":"","ucode":"ABF1590CFA38A4","user_header":"https://static001.geekbang.org/account/avatar/00/16/7e/11/ffe4db7d.jpg","comment_is_top":false,"comment_ctime":1598922862,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"1598922862","product_id":100056701,"comment_content":"è¯·é—®Rediså®¹é‡å¤§æ—¶ï¼Œä½¿ç”¨aofæŒä¹…åŒ–æ˜¯å¦èƒ½é¿å…rdbæŒä¹…åŒ–forkå¯¼è‡´çš„å»¶è¿Ÿå˜é«˜çš„é—®é¢˜","like_count":0,"discussions":[{"author":{"id":1221953,"avatar":"https://static001.geekbang.org/account/avatar/00/12/a5/41/f480323c.jpg","nickname":"é½å“¥å“¥","note":"","ucode":"867D3EBB5BD608","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":310405,"discussion_content":"ä½†æ˜¯åˆä¼šå¯¼è‡´æ•°æ®æ¢å¤æ—¶è½½å…¥æ—¶é—´å˜é•¿","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1601817679,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":244915,"user_name":"silverhawk","can_delete":false,"product_type":"c1","uid":1018649,"ip_address":"","ucode":"BFBC8AF32868DA","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8b/19/a15d060d.jpg","comment_is_top":false,"comment_ctime":1598750869,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1598750869","product_id":100056701,"comment_content":"å¯¹äºè¿™ç§å¢åŠ å®ä¾‹çš„ç­–ç•¥çš„repartitionï¼Œå­¦æœ¯ä¸Šå¾ˆå¤šéƒ½è®¤ä¸ºæ˜¯consistent hashï¼Œä½†æ˜¯åœ¨å¤šä¸ªreplicationçš„å®è·µä¸­ï¼Œå¾ˆå¤šéƒ½ä¸é‡‡ç”¨consistent hashï¼Œèƒ½å¦åˆ†æä¸€ä¸‹ï¼Ÿ","like_count":0},{"had_liked":false,"id":244801,"user_name":"æ›¾è½¼éºŸ","can_delete":false,"product_type":"c1","uid":1451391,"ip_address":"","ucode":"D418371AC11270","user_header":"https://static001.geekbang.org/account/avatar/00/16/25/7f/473d5a77.jpg","comment_is_top":false,"comment_ctime":1598684584,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1598684584","product_id":100056701,"comment_content":"é›†ç¾¤å®ä¾‹æœ¬èº«æ˜¯å¯èƒ½ä¼šå˜åŒ–çš„ï¼Œè€Œå…³ç³»è¡¨å½“é›†ç¾¤ä¸­çš„å®ä¾‹æ•°é‡æ”¹å˜æˆ–è€…slotåˆ†å¸ƒå‘ç”Ÿå˜åŒ–çš„æ—¶å€™å…³ç³»è¡¨æ— æ³•å‡†ç¡®æ˜ å°„æ•°æ®çš„çœŸå®ä½ç½®ï¼Œå› ä¸ºå®¢æˆ·ç«¯å¯ä»¥ç›´æ¥è®¿é—®ä¸åŒçš„Rediså®ä¾‹<br><br><br>æ­¤å¤–å¢åŠ ä¸€ç‚¹ï¼ŒRedisé›†ç¾¤çš„æ¯ä¸ªå®ä¾‹æ˜¯å¯ä»¥æ­å»ºå“¨å…µçš„ï¼Œå…¶ä¸­è¿˜æ¶‰åŠåˆ†ç‰‡é›†ç¾¤çš„å‰¯æœ¬æ¼‚ç§»ç­–ç•¥ï¼Œæ¬¢è¿è€å¸ˆè®²è§£ä¸€ä¸‹","like_count":0},{"had_liked":false,"id":244652,"user_name":"å¶å­ã€‚","can_delete":false,"product_type":"c1","uid":1393004,"ip_address":"","ucode":"3EF2CC36F0D09A","user_header":"https://static001.geekbang.org/account/avatar/00/15/41/6c/687c5dfb.jpg","comment_is_top":false,"comment_ctime":1598604814,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1598604814","product_id":100056701,"comment_content":"è€å¸ˆè¯·æ•™ä¸ªé—®é¢˜ï¼Œä¸ºä»€ä¹ˆRedis Clusteré›†ç¾¤è¦è‡³å°‘3ä¸»3ä»å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":244541,"user_name":"å°è´¤","can_delete":false,"product_type":"c1","uid":1045642,"ip_address":"","ucode":"BF81E83E5CCEF2","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f4/8a/ab9e3028.jpg","comment_is_top":false,"comment_ctime":1598574801,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1598574801","product_id":100056701,"comment_content":"è¯·é—®åˆ‡ç‰‡é›†ç¾¤ä¸å“¨å…µé›†ç¾¤çš„å…³ç³»æ˜¯ï¼Ÿåˆ‡ç‰‡é›†ç¾¤å¯ä»¥ç”±å“¨å…µæ¨¡å¼çš„é›†ç¾¤æ¼”å˜ï¼Ÿè¿˜æ˜¯è¯´éœ€è¦redisé›†ç¾¤æ¨¡å¼æ¥æ¼”å˜åˆ‡ç‰‡é›†ç¾¤","like_count":0},{"had_liked":false,"id":244500,"user_name":"Geek_e0ee48","can_delete":false,"product_type":"c1","uid":1904256,"ip_address":"","ucode":"11D10A0F5892AB","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIgDicRj9LAvWSejVc6v34R6dR1yRHzqBgEpABeRwDvNcpoFW6zmiavwV5cP1fCKJiaQPiafP9E7Puqnw/132","comment_is_top":false,"comment_ctime":1598540055,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1598540055","product_id":100056701,"comment_content":"è€å¸ˆï¼Œæ‚¨å¥½ï¼š<br>  æœ‰äº›ç–‘é—®æƒ³è¯·æ•™ä¸‹ï¼š<br>  1ã€redis cluster æ•°æ®åˆ†ç‰‡å­˜å‚¨ä»¥åï¼Œè·Ÿä»¥å‰çš„å“¨å…µæ˜¯æ€ä¹ˆé…åˆç®¡ç†çš„ï¼Ÿæ¶æ„æ˜¯æ€æ ·çš„ï¼Ÿ<br>  2ã€æ¯ä¸ªåˆ†ç‰‡çš„rediså®ä¾‹ä¹‹é—´æ˜¯ä»€ä¹ˆå…³ç³»ï¼Ÿéƒ½æ˜¯ä¸»èŠ‚ç‚¹ï¼Ÿ æˆ‘è§‰å¾—ä»–ä»¬ä¸åº”è¯¥æ˜¯ä»èŠ‚ç‚¹çš„å…³ç³»ã€‚<br>   3ã€ æ¯ä¸ªåˆ†ç‰‡çš„redis, åº”è¯¥ä¹Ÿæ˜¯å¯ä»¥æŒ‚å¤šä¸ªä»èŠ‚ç‚¹è¿›è¡Œè¯»å†™åˆ†ç¦»å§ï¼Ÿ","like_count":0},{"had_liked":false,"id":244296,"user_name":"ä¸ªå¤§å¤§","can_delete":false,"product_type":"c1","uid":2107122,"ip_address":"","ucode":"A7AC95E950BD97","user_header":"https://static001.geekbang.org/account/avatar/00/20/26/f2/27e8a33a.jpg","comment_is_top":false,"comment_ctime":1598452668,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1598452668","product_id":100056701,"comment_content":"å’¨è¯¢è€å¸ˆä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘çš„ç†è§£16384ä¸ªæ§½ï¼Œæ¯ä¸ªæ§½ç›¸å½“äºå“ˆå¸Œè¡¨çš„ä¸€ä¸ªæ¡¶ï¼Œå¦‚æœå½“åˆ‡ç‰‡é›†ç¾¤çš„é”®å€¼å¯¹è¾¾åˆ°å‡ åä¸‡ç”šè‡³æ›´å¤šçš„æ—¶å€™ï¼Œå“ˆå¸Œç¢°æ’æ˜¯ä¸æ˜¯æ— æ³•é¿å…ï¼Œå¯¼è‡´é“¾å¼å­˜å‚¨æ•°æ®è¿‡é•¿ï¼Œå•æœºè¿˜å¯ä»¥é€šè¿‡æ‰©å®¹rehashè§£å†³ï¼Œåˆ‡ç‰‡é›†ç¾¤æœ‰æ²¡æœ‰ä»€ä¹ˆè§£å†³æ–¹å¼å‘¢ï¼Ÿå¸Œæœ›è€å¸ˆå¯ä»¥è§£å†³ä¸€ä¸‹ç–‘æƒ‘ï¼Œè°¢è°¢ã€‚","like_count":0,"discussions":[{"author":{"id":1235894,"avatar":"https://static001.geekbang.org/account/avatar/00/12/db/b6/695882c7.jpg","nickname":"å‡¯","note":"","ucode":"48D8A93B1BFC0E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301332,"discussion_content":"è¿™ä¸ªå“ˆå¸Œæ§½åªæ˜¯åˆ¤æ–­keyæ˜¯åœ¨å“ªä¸ªrediså®ä¾‹ä¸Šé¢ï¼Œä¸ä¼šæœ‰ä»€ä¹ˆé“¾å¼ç»“æ„å‘€","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1598491291,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":244151,"user_name":"riryoutexi","can_delete":false,"product_type":"c1","uid":2112144,"ip_address":"","ucode":"2A3C7060F4D677","user_header":"https://static001.geekbang.org/account/avatar/00/20/3a/90/2ab62cd9.jpg","comment_is_top":false,"comment_ctime":1598412073,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1598412073","product_id":100056701,"comment_content":"è¯·é—® redis Clusterï¼Œæ‰©å®¹çš„æ—¶å€™ï¼Œè¿ç§»çš„ç­–ç•¥æ˜¯ä»€ä¹ˆï¼Ÿè¿ç§»çš„è¿‡ç¨‹ä¸­æ€ä¹ˆè®¿é—®è¿™äº›æ­£åœ¨è¿ç§»ä¸­çš„key ï¼Ÿ","like_count":0},{"had_liked":false,"id":244134,"user_name":"æäºŒæœ¨","can_delete":false,"product_type":"c1","uid":1103091,"ip_address":"","ucode":"30E03BB84ADB27","user_header":"https://static001.geekbang.org/account/avatar/00/10/d4/f3/129d6dfe.jpg","comment_is_top":false,"comment_ctime":1598407648,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1598407648","product_id":100056701,"comment_content":"å¦‚æœç”¨ä¸€ä¸ªè¡¨ç›´æ¥æŠŠé”®å€¼å¯¹å’Œå®ä¾‹çš„å¯¹åº”å…³ç³»è®°å½•ä¸‹æ¥ï¼Œè¿™æ ·å°±ä¼šæ¶ˆè€—ä¸€å®šçš„ç©ºé—´å­˜æ”¾ã€‚","like_count":0},{"had_liked":false,"id":244066,"user_name":"Mr.èœœ","can_delete":false,"product_type":"c1","uid":1035257,"ip_address":"","ucode":"C911B81198B3F5","user_header":"https://static001.geekbang.org/account/avatar/00/0f/cb/f9/75d08ccf.jpg","comment_is_top":false,"comment_ctime":1598370073,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1598370073","product_id":100056701,"comment_content":"keyçš„æ•°é‡å¹¶ä¸å›ºå®šï¼Œæ‰€ä»¥keyè¡¨çš„ç»´æŠ¤ã€é›†ç¾¤é—´çš„keyè¡¨åŒæ­¥éƒ½ä¼šæ¯”è¾ƒå¤æ‚ï¼Œå¢åŠ äº†keyä¸æ•´ä¸ªé›†ç¾¤çš„è€¦åˆåº¦ï¼Œæ— ç”¨å¼€é”€ä¹Ÿå¤ªå¤§ã€‚<br>åŒæ—¶æœ‰ä¸ªé—®é¢˜æƒ³è¯·æ•™è€å¸ˆï¼Œä¸ºä»€ä¹ˆslotæ˜¯16384ä¸ªï¼Ÿ<br>","like_count":0,"discussions":[{"author":{"id":2108046,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLoAicus6PVAO7SJzBmPMsQ4AISV0IZTvFkQ5fzicA3VJ8GZbAFhtqZZkOCrnSiaPkYgTianK5gvmLsuQ/132","nickname":"Geek_dac7ff","note":"","ucode":"CA90CDD5AA0077","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301786,"discussion_content":"https://github.com/antirez/redis/issues/2576","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598637169,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":243821,"user_name":"Vincent","can_delete":false,"product_type":"c1","uid":1241581,"ip_address":"","ucode":"9B70BE6908EB3B","user_header":"https://static001.geekbang.org/account/avatar/00/12/f1/ed/4e249c6b.jpg","comment_is_top":false,"comment_ctime":1598282233,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1598282233","product_id":100056701,"comment_content":"è¯·é—®è€å¸ˆä¸¤ä¸ªé—®é¢˜<br>1.ä¸ºä»€ä¹ˆè¦é‡‡ç”¨crc16<br>2.å„ä¸ªèŠ‚ç‚¹çš„ping&#47;pongæ¶ˆæ¯å¤§å°å¤§æ¦‚ä¼šæœ‰å¤šå¤§å‘¢ï¼Œæ€ä¹ˆæ¥è®¡ç®—å‘¢","like_count":0},{"had_liked":false,"id":243737,"user_name":"MrPolo","can_delete":false,"product_type":"c1","uid":1449101,"ip_address":"","ucode":"1B08F61A7099F8","user_header":"","comment_is_top":false,"comment_ctime":1598261316,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1598261316","product_id":100056701,"comment_content":"å…ˆå‰åœ¨ç ”ç©¶ redis cluster æ™‚æœ‰æ³¨æ„åˆ°,è‹¥æ”¹ç‚º cluster mode å¾Œæœ‰äº› command æœƒç„¡æ³•ä½¿ç”¨,é€™éƒ¨åˆ†è«‹å•è€å¸«æœƒåœ¨å¾Œé¢èª²ç¨‹è¬›è§£å—?","like_count":0},{"had_liked":false,"id":243729,"user_name":"ç¯®çƒä¸æ˜¯è¿™ä¹ˆæ‰“çš„","can_delete":false,"product_type":"c1","uid":1749078,"ip_address":"","ucode":"5DC354E8541C6B","user_header":"https://static001.geekbang.org/account/avatar/00/1a/b0/56/fc077ef8.jpg","comment_is_top":false,"comment_ctime":1598259725,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1598259725","product_id":100056701,"comment_content":"ä½ å¥½è€å¸ˆï¼Œè¯·é—®ä¸‹å¦‚ä½•ç®—çš„Redisä¸­æ¯ä¸ªé”®å€¼å¯¹çš„å¤§å°","like_count":0},{"had_liked":false,"id":243719,"user_name":"é‚£æ—¶åˆ»","can_delete":false,"product_type":"c1","uid":1150927,"ip_address":"","ucode":"B0D150856C3A4A","user_header":"https://static001.geekbang.org/account/avatar/00/11/8f/cf/890f82d6.jpg","comment_is_top":false,"comment_ctime":1598256214,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"1598256214","product_id":100056701,"comment_content":"è€å¸ˆï¼Œè¯·é—®ä¸€ä¸ªRediså»¶è¿Ÿçš„é—®é¢˜ã€‚<br><br>Redisæƒ…å†µï¼š<br>å•å®ä¾‹Redisï¼Œå†…å­˜10Gï¼Œæœ€å¤§ååé‡åœ¨25000ops&#47;secondã€‚æ•°æ®æŒä¹…åŒ–æ–¹å¼ï¼šAOF - æ¯ç§’fsyncä¸€æ¬¡ã€‚<br>é«˜å³°æœŸçš„opsæ˜¯æ¯ç§’8000ï¼Œkeyçš„æ•°é‡æ˜¯4ä¸‡ï¼Œå†…å­˜å ç”¨é‡æ˜¯2.5Gã€‚<br><br>é‡åˆ°çš„é—®é¢˜ï¼š<br>ä½å³°æœŸRediså»¶è¿Ÿ0.125mså·¦å³ï¼Œä½†æ˜¯åœ¨é«˜å³°æœŸçš„æ—¶å€™ï¼Œå»¶è¿Ÿæ¯”è¾ƒå¤§ï¼Œæœ‰1mså·¦å³ã€‚<br><br>é€šè¿‡INFOå‘½ä»¤ï¼Œçœ‹åˆ°latest_fork_usecæ˜¯0ã€‚INFOå‘½ä»¤å…¶å®ƒçš„ä¿¡æ¯ï¼Œæˆ‘ä¹Ÿçœ‹äº†ä¸‹ï¼Œæ„Ÿè§‰éƒ½è¿˜æ­£å¸¸ã€‚<br><br>æˆ‘èƒ½æƒ³åˆ°çš„æ˜¯é€šè¿‡å¢åŠ Redisåˆ†ç‰‡æœºåˆ¶ï¼Œæ¥ç¼“è§£å‹åŠ›ã€‚<br><br>è¯·é—®è€å¸ˆï¼Œé’ˆå¯¹è¿™ç§æƒ…å†µï¼Œå…¶ä¸€ï¼Œå¦‚ä½•æ¥è¯Šæ–­Rediså»¶è¿Ÿé«˜çš„æƒ…å†µå‘¢ï¼Ÿå…¶äºŒï¼Œå¦‚ä½•æ¥ç¼“è§£Rediså»¶è¿Ÿé«˜ï¼Ÿ","like_count":0},{"had_liked":false,"id":243645,"user_name":"å°å–µå–µ","can_delete":false,"product_type":"c1","uid":1062444,"ip_address":"","ucode":"FDBBB2A59DB8B6","user_header":"https://static001.geekbang.org/account/avatar/00/10/36/2c/8bd4be3a.jpg","comment_is_top":false,"comment_ctime":1598239108,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1598239108","product_id":100056701,"comment_content":"è¯·æ•™å°è€å¸ˆï¼Œæˆ‘å¯¹ASKINGå‘½ä»¤ä¸å¤ªç†è§£ï¼Œæˆ‘è§‰å¾—ä¼šè¿”å›ä¸€ä¸ªåŒ…å«boolå€¼çš„ä¿¡æ¯ï¼Œå‘Šè¯‰å®¢æˆ·ç«¯æ˜¯å¦å¯ä»¥ä»è¿™ä¸ªå®ä¾‹ä¸­è·å–æ•°æ®ï¼Œè‹¥å¯ä»¥ï¼Œç„¶åå®¢æˆ·ç«¯é‡æ–°å‘é€è¯·æ±‚æ¥è·å–æ•°æ®ï¼Œä¸çŸ¥é“è¿™ä¹ˆç†è§£å¯¹ä¸å¯¹ï¼Œè¯·è€å¸ˆè§£æƒ‘ã€‚è°¢è°¢ã€‚","like_count":0,"discussions":[{"author":{"id":2108046,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLoAicus6PVAO7SJzBmPMsQ4AISV0IZTvFkQ5fzicA3VJ8GZbAFhtqZZkOCrnSiaPkYgTianK5gvmLsuQ/132","nickname":"Geek_dac7ff","note":"","ucode":"CA90CDD5AA0077","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301656,"discussion_content":"å¿«é€’å°å“¥Aæ‹‰äº†ä¸€è½¦å¿«é€’æ­£åœ¨å¾€èœ‚å·¢é‡Œæ”¾ï¼ŒBæ‰¾Aå–è‡ªå·±çš„å¿«é€’ï¼Œå¿«é€’å°å“¥è¯´åˆšæ”¾è¿›å»ï¼Œä½ å»å¿«é€’ç®±çœ‹çœ‹å§ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1598599748,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2420294,"avatar":"https://static001.geekbang.org/account/avatar/00/24/ee/46/7d65ae37.jpg","nickname":"æœ¨å‡ ä¸¶","note":"","ucode":"FFDB958DA64F8C","race_medal":5,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":553849,"discussion_content":"å¹¶ä¸ä¼šï¼ŒASKINGåªæ˜¯è®¾ç½®ä¸ªæ ‡è¯†ï¼Œä¸ä¼šåˆ¤æ–­æ˜¯å¦æœ‰è¿™ä¸ªæ•°æ®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646117121,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":243636,"user_name":"zhou","can_delete":false,"product_type":"c1","uid":1065310,"ip_address":"","ucode":"E5D21F2A3359CB","user_header":"https://static001.geekbang.org/account/avatar/00/10/41/5e/9d2953a3.jpg","comment_is_top":false,"comment_ctime":1598235492,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1598235492","product_id":100056701,"comment_content":"å¦‚æœåœ¨å®¢æˆ·ç«¯è®¡ç®—å¥½ CRC å€¼ï¼ŒREDIS é›†ç¾¤æ˜¯ä¸æ˜¯å°±ä¸ç”¨åšè®¡ç®—äº†","like_count":0,"discussions":[{"author":{"id":1388092,"avatar":"https://static001.geekbang.org/account/avatar/00/15/2e/3c/eae43616.jpg","nickname":"sid","note":"","ucode":"3D1F9169A19D29","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":304377,"discussion_content":"æœ‰å¯èƒ½æœ‰ä¼ªé€ è¯·æ±‚çš„é£é™©","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599556740,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":243629,"user_name":"Jackey","can_delete":false,"product_type":"c1","uid":1063751,"ip_address":"","ucode":"125DE81993FEDD","user_header":"https://static001.geekbang.org/account/avatar/00/10/3b/47/f6c772a1.jpg","comment_is_top":false,"comment_ctime":1598234106,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1598234106","product_id":100056701,"comment_content":"å…³äºASKINGçš„ä¸€ç‚¹æƒ³æ³•ï¼šåœ¨è¿ç§»è¿‡ç¨‹ä¸­ï¼Œå·²è¿ç§»çš„slotä¹Ÿè¿˜æ²¡æœ‰çœŸæ­£å½’æ–°çš„å®ä¾‹ç®¡ç†ï¼Œå¦‚æœä¸åŠ ASKINGï¼Œé‚£ä¹ˆç›®æ ‡å®ä¾‹è¿˜ä¼šè¿”å›MOVEDé”™è¯¯ã€‚å°±ä¼šå‡ºç°å¾ªç¯è¯·æ±‚çš„æƒ…å†µ","like_count":0},{"had_liked":false,"id":243619,"user_name":"Hugh","can_delete":false,"product_type":"c1","uid":1444656,"ip_address":"","ucode":"72CEF669801F26","user_header":"https://static001.geekbang.org/account/avatar/00/16/0b/30/08dfab98.jpg","comment_is_top":false,"comment_ctime":1598233087,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1598233087","product_id":100056701,"comment_content":"ä¸ºä»€ä¹ˆä¸ä¿å­˜é”®å€¼å¯¹çš„ä¸»è¦å…³é”®ç‚¹åœ¨äºï¼Œå½“è¦æ‰©å®¹æˆ–æ—¶ï¼Œéœ€è¦æ”¹å˜é”®å€¼å¯¹çš„å…³ç³»ï¼Œè¿™é‡Œå°±éœ€è¦é¢å¤–çš„è®°å½•å“ªäº›å€¼åœ¨å“ªä¸ªå®ä¾‹ä¸Šï¼Œç›¸å½“äºè¦è®°å½•ä¸¤ä»½æ•°æ®ï¼Œé€ æˆé¢å¤–çš„å¼€é”€ã€‚ä¸çŸ¥é“æˆ‘è¿™æ ·ç†è§£å¯¹ä¸å¯¹ã€‚ã€‚","like_count":0},{"had_liked":false,"id":243605,"user_name":"ç­‰é£æ¥ğŸ§","can_delete":false,"product_type":"c1","uid":1804087,"ip_address":"","ucode":"B6BB8714A0B019","user_header":"https://static001.geekbang.org/account/avatar/00/1b/87/37/b071398c.jpg","comment_is_top":false,"comment_ctime":1598228968,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1598228968","product_id":100056701,"comment_content":"è€å¸ˆï¼Œå¯¹äºslotæ§½ä½å‘ç”Ÿå˜åŒ–ï¼Œæ•°æ®è¿ç§»è¿™ä¸ªåŠ¨ä½œï¼Œæ˜¯forkå­è¿›ç¨‹æ¥åšçš„å—ï¼Ÿè¿ç§»çš„è¿‡ç¨‹ä¸­éœ€è¦å¯¹é”®å€¼é‡æ–°å†åšCRC16çš„å“ˆå¸Œè¿ç®—ï¼Œå†è®¡ç®—å‡ºæ§½ä½å—","like_count":0,"discussions":[{"author":{"id":1622109,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erPMtAfnQdpx1yOZQ2ic7icqUs3tvibEjUXQMUXKiaakyuIho6k6vmdl46nrdWjXIjPIRg9Pmco00tR5w/132","nickname":"å°æ°˜","note":"","ucode":"DA55B9A02D9EE0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":300670,"discussion_content":"ä¸€ä¸ªç¡®å®šçš„é”®ç»è¿‡CRC16åå¾—åˆ°ä¸€ä¸ªç¡®å®šçš„16ä½æ•°ï¼Œç„¶åå¯¹16384å–æ¨¡å¾—åˆ°å›ºå®šçš„æ§½ä½ï¼Œæ‰€ä»¥æˆ‘è®¤ä¸ºä¸€ä¸ªé”®å¯¹åº”æŸä¸ªæ§½ä½æ˜¯ç¡®å®šçš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598230692,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1336009,"avatar":"https://static001.geekbang.org/account/avatar/00/14/62/c9/7da27891.jpg","nickname":"DKSky","note":"","ucode":"69371A81033949","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1622109,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erPMtAfnQdpx1yOZQ2ic7icqUs3tvibEjUXQMUXKiaakyuIho6k6vmdl46nrdWjXIjPIRg9Pmco00tR5w/132","nickname":"å°æ°˜","note":"","ucode":"DA55B9A02D9EE0","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":300834,"discussion_content":"keyå’Œslotçš„æ˜ å°„æ˜¯ç¡®å®šçš„ï¼Œåªéœ€è¦ç¼“å­˜slotå’Œå®ä¾‹çš„æ˜ å°„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598277936,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":300670,"ip_address":""},"score":300834,"extra":""}]}]},{"had_liked":false,"id":243597,"user_name":"pedro","can_delete":false,"product_type":"c1","uid":1200704,"ip_address":"","ucode":"F40C839DDFD599","user_header":"https://static001.geekbang.org/account/avatar/00/12/52/40/e57a736e.jpg","comment_is_top":false,"comment_ctime":1598223773,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1598223773","product_id":100056701,"comment_content":"é—®é¢˜: å½“åˆ†ç‰‡é›†ç¾¤éå¸¸å¤§ï¼Œä¾‹å¦‚ 1000 ä¸ªå®ä¾‹ï¼Œé›†ç¾¤ä¹‹å‰åŒæ­¥ä¼šæ¯”è¾ƒå›°éš¾ï¼Œå‡å¦‚å®¢æˆ·ç«¯è®¿é—®çš„æŸä¸ª keyï¼Œè¯·æ±‚åˆ°å®ä¾‹1æ—¶ï¼Œå®ä¾‹1å¹¶ä¸çŸ¥é“è¯¥ key æ‰€åœ¨çš„ä½ç½®ï¼Œé‚£ä¹ˆæ­¤æ—¶è¯¥å¦‚ä½•å“åº” moved æŒ‡ä»¤äº†ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1304565,"avatar":"https://static001.geekbang.org/account/avatar/00/13/e7/f5/77d2c9b8.jpg","nickname":"QQ|AUTO","note":"","ucode":"B7D31D03DA1EAC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":300699,"discussion_content":"é›†ç¾¤å¯åŠ¨äº†ï¼Œå„ä¸ªå®ä¾‹å°±çŸ¥é“æ§½ä½åˆ†å¸ƒåœ¨é‚£ä¸ªå®ä¾‹ä¸Šäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598235701,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":243594,"user_name":"Litt1eQ","can_delete":false,"product_type":"c1","uid":2083695,"ip_address":"","ucode":"D80D0B14F3B312","user_header":"https://static001.geekbang.org/account/avatar/00/1f/cb/6f/b6693f43.jpg","comment_is_top":false,"comment_ctime":1598219394,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1598219394","product_id":100056701,"comment_content":"æ„Ÿè§‰å¦‚æœå­˜ä¸€ä¸ªè¡¨çš„è¯ å¦‚æœé”®å€¼å¯¹æ•°ç›®å¤ªå¤š è¿™ä¸ªè¡¨çš„å¼€é”€ä¹Ÿä¼šéå¸¸å¤§ å¦‚æœåŒæ ·æ˜¯å¯¹é”®å€¼å¯¹å–æ¨¡çš„è¯ é‚£ä¹ˆç›¸ä¼¼çš„é”®å€¼å¯¹ä¼šå¤§æ¦‚ç‡åˆ†é…åˆ°ä¸€ä¸ªå®ä¾‹ä¸Šé¢ é€ æˆåˆ†é…ä¸å‡","like_count":0},{"had_liked":false,"id":243590,"user_name":"åˆ€æ–§æ‰‹ä½•åœ¨","can_delete":false,"product_type":"c1","uid":1202572,"ip_address":"","ucode":"B99D7ECC3EE954","user_header":"https://static001.geekbang.org/account/avatar/00/12/59/8c/ba81a832.jpg","comment_is_top":false,"comment_ctime":1598201793,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"1598201793","product_id":100056701,"comment_content":"å¥½å¤„æ˜¯æ–¹ä¾¿åç»­æ‰©å±•ã€‚è¿™ç§æ–¹å¼å®é™…ä¸Šæ˜¯ä¸€è‡´æ€§å“ˆå¸Œã€‚æ–¹ä¾¿èŠ‚ç‚¹å¢åŠ ä¿®æ”¹ é‡æ–°è°ƒæ•´åˆ†é…çš„æ•°æ®é‡å°½å¯èƒ½å°‘","like_count":0,"discussions":[{"author":{"id":2253496,"avatar":"","nickname":"Geek_3d87cb","note":"","ucode":"F09334D60C3BC8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":336815,"discussion_content":"clusterä¸æ˜¯ä¸€è‡´æ€§hashå§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608708407,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1111974,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f7/a6/c863c65b.jpg","nickname":"è¥¿ç“œåˆ€","note":"","ucode":"3978348547499D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":300744,"discussion_content":"æˆ‘æ€ä¹ˆæ„Ÿè§‰ä»Šå¤©çš„è¯¾ç¨‹é‡Œé¢ï¼Œå°‘äº†å¢åŠ èŠ‚ç‚¹å’Œåˆ é™¤èŠ‚ç‚¹slotå¦‚ä½•åˆ†å¸ƒçš„æ“ä½œå•Š\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598253518,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1388092,"avatar":"https://static001.geekbang.org/account/avatar/00/15/2e/3c/eae43616.jpg","nickname":"sid","note":"","ucode":"3D1F9169A19D29","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1111974,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f7/a6/c863c65b.jpg","nickname":"è¥¿ç“œåˆ€","note":"","ucode":"3978348547499D","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":304378,"discussion_content":"å…ˆå…³æ³¨é¢ï¼Œåœ¨æ·±å…¥ç‚¹ï¼Œç‚¹å¯ä»¥è‡ªå·±å»æ·±å…¥ï¼Œè€å¸ˆåœ¨ç¬¬ä¸€èŠ‚è¯¾è®²è¿‡è¿™ä¸ªå­¦ä¹ æ–¹æ³•ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599556817,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":300744,"ip_address":""},"score":304378,"extra":""}]}]}]}