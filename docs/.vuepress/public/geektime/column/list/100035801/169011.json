{"id":169011,"title":"26 | è´Ÿè½½å‡è¡¡ï¼šæ€æ ·æå‡ç³»ç»Ÿçš„æ¨ªå‘æ‰©å±•èƒ½åŠ›ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯å”æ‰¬ã€‚</p><p>åœ¨åŸºç¡€ç¯‡ä¸­ï¼Œæˆ‘æåˆ°äº†é«˜å¹¶å‘ç³»ç»Ÿè®¾è®¡çš„ä¸‰ä¸ªé€šç”¨æ–¹æ³•ï¼šç¼“å­˜ã€å¼‚æ­¥å’Œæ¨ªå‘æ‰©å±•ã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä½ æ¥è§¦åˆ°äº†ç¼“å­˜çš„ä½¿ç”¨å§¿åŠ¿ï¼Œä¹Ÿäº†è§£äº†å¦‚ä½•ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—å¼‚æ­¥å¤„ç†ä¸šåŠ¡é€»è¾‘ã€‚é‚£ä¹ˆæœ¬èŠ‚è¯¾ï¼Œæˆ‘å°†å¸¦ä½ äº†è§£ä¸€ä¸‹å¦‚ä½•æå‡ç³»ç»Ÿçš„æ¨ªå‘æ‰©å±•èƒ½åŠ›ã€‚</p><p>åœ¨ä¹‹å‰çš„è¯¾ç¨‹ä¸­ï¼Œæˆ‘ä¹Ÿæåˆ°è¿‡æå‡ç³»ç»Ÿæ¨ªå‘æ‰©å±•èƒ½åŠ›çš„ä¸€äº›æ¡ˆä¾‹ã€‚æ¯”å¦‚ï¼Œ<a href=\"https://time.geekbang.org/column/article/145095\">08è®²</a>æåˆ°å¯ä»¥é€šè¿‡éƒ¨ç½²å¤šä¸ªä»åº“çš„æ–¹å¼ï¼Œæ¥æå‡æ•°æ®åº“çš„æ‰©å±•èƒ½åŠ›ï¼Œä»è€Œæå‡æ•°æ®åº“çš„æŸ¥è¯¢æ€§èƒ½ï¼Œé‚£ä¹ˆå°±éœ€è¦å€ŸåŠ©ç»„ä»¶ï¼Œå°†æŸ¥è¯¢æ•°æ®åº“çš„è¯·æ±‚æŒ‰ç…§ä¸€äº›æ—¢å®šçš„ç­–ç•¥åˆ†é…åˆ°å¤šä¸ªä»åº“ä¸Šï¼Œè¿™æ˜¯è´Ÿè½½å‡è¡¡æœåŠ¡å™¨æ‰€èµ·çš„ä½œç”¨ï¼Œè€Œæˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨DNSæœåŠ¡å™¨æ¥æ‰¿æ‹…è¿™ä¸ªè§’è‰²ã€‚</p><p>ä¸è¿‡åœ¨å®é™…çš„å·¥ä½œä¸­ï¼Œä½ ç»å¸¸ä½¿ç”¨çš„è´Ÿè½½å‡è¡¡çš„ç»„ä»¶åº”è¯¥ç®—æ˜¯Nginxï¼Œå®ƒçš„ä½œç”¨æ˜¯æ‰¿æ¥å‰ç«¯çš„HTTPè¯·æ±‚ï¼Œç„¶åå°†å®ƒä»¬æŒ‰ç…§å¤šç§ç­–ç•¥åˆ†å‘ç»™åç«¯çš„å¤šä¸ªä¸šåŠ¡æœåŠ¡å™¨ä¸Šã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å¯ä»¥éšæ—¶é€šè¿‡æ‰©å®¹ä¸šåŠ¡æœåŠ¡å™¨çš„æ–¹å¼æ¥æŠµæŒ¡çªå‘çš„æµé‡é«˜å³°ã€‚ä¸DNSä¸åŒçš„æ˜¯ï¼ŒNginxå¯ä»¥åœ¨åŸŸåå’Œè¯·æ±‚URLåœ°å€çš„å±‚é¢åšæ›´ç»†è‡´çš„æµé‡åˆ†é…ï¼Œä¹Ÿæä¾›æ›´å¤æ‚çš„è´Ÿè½½å‡è¡¡ç­–ç•¥ã€‚</p><p>ä½ å¯èƒ½ä¼šæƒ³åˆ°ï¼Œåœ¨å¾®æœåŠ¡æ¶æ„ä¸­æˆ‘ä»¬ä¹Ÿä¼šå¯åŠ¨å¤šä¸ªæœåŠ¡èŠ‚ç‚¹æ‰¿æ¥ä»ç”¨æˆ·ç«¯åˆ°åº”ç”¨æœåŠ¡å™¨çš„è¯·æ±‚ï¼Œè‡ªç„¶ä¼šéœ€è¦ä¸€ä¸ªè´Ÿè½½å‡è¡¡æœåŠ¡å™¨ä½œä¸ºæµé‡çš„å…¥å£ï¼Œå®ç°æµé‡çš„åˆ†å‘ã€‚é‚£ä¹ˆåœ¨å¾®æœåŠ¡æ¶æ„ä¸­ï¼Œå¦‚ä½•ä½¿ç”¨è´Ÿè½½å‡è¡¡æœåŠ¡å™¨å‘¢ï¼Ÿ</p><!-- [[[read_end]]] --><p>åœ¨å›ç­”è¿™äº›é—®é¢˜ä¹‹å‰ï¼Œæˆ‘å…ˆå¸¦ä½ äº†è§£ä¸€ä¸‹å¸¸è§çš„è´Ÿè½½å‡è¡¡æœåŠ¡å™¨éƒ½æœ‰å“ªå‡ ç±»ï¼Œå› ä¸ºè¿™æ ·ï¼Œä½ å°±å¯ä»¥æ ¹æ®ä¸åŒç±»å‹è´Ÿè½½å‡è¡¡æœåŠ¡å™¨çš„ç‰¹ç‚¹åšé€‰æ‹©äº†ã€‚</p><h2>è´Ÿè½½å‡è¡¡æœåŠ¡å™¨çš„ç§ç±»</h2><p><strong>è´Ÿè½½å‡è¡¡çš„å«ä¹‰æ˜¯ï¼š</strong>å°†è´Ÿè½½ï¼ˆè®¿é—®çš„è¯·æ±‚ï¼‰â€œå‡è¡¡â€åœ°åˆ†é…åˆ°å¤šä¸ªå¤„ç†èŠ‚ç‚¹ä¸Šã€‚è¿™æ ·å¯ä»¥å‡å°‘å•ä¸ªå¤„ç†èŠ‚ç‚¹çš„è¯·æ±‚é‡ï¼Œæå‡æ•´ä½“ç³»ç»Ÿçš„æ€§èƒ½ã€‚</p><p>åŒæ—¶ï¼Œè´Ÿè½½å‡è¡¡æœåŠ¡å™¨ä½œä¸ºæµé‡å…¥å£ï¼Œå¯ä»¥å¯¹è¯·æ±‚æ–¹å±è”½æœåŠ¡èŠ‚ç‚¹çš„éƒ¨ç½²ç»†èŠ‚ï¼Œå®ç°å¯¹äºä¸šåŠ¡æ–¹æ— æ„ŸçŸ¥çš„æ‰©å®¹ã€‚å®ƒå°±åƒäº¤é€šè­¦å¯Ÿï¼Œä¸æ–­åœ°ç–æ•£äº¤é€šï¼Œå°†æ±½è½¦å¼•å…¥åˆé€‚çš„é“è·¯ä¸Šã€‚</p><p><strong>è€Œåœ¨æˆ‘çœ‹æ¥ï¼Œ</strong>è´Ÿè½½å‡è¡¡æœåŠ¡å¤§ä½“ä¸Šå¯ä»¥åˆ†ä¸ºä¸¤å¤§ç±»ï¼šä¸€ç±»æ˜¯ä»£ç†ç±»çš„è´Ÿè½½å‡è¡¡æœåŠ¡ï¼›å¦ä¸€ç±»æ˜¯å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡æœåŠ¡ã€‚</p><p>ä»£ç†ç±»çš„è´Ÿè½½å‡è¡¡æœåŠ¡ä»¥å•ç‹¬çš„æœåŠ¡æ–¹å¼éƒ¨ç½²ï¼Œæ‰€æœ‰çš„è¯·æ±‚éƒ½è¦å…ˆç»è¿‡è´Ÿè½½å‡è¡¡æœåŠ¡ï¼Œåœ¨è´Ÿè½½å‡è¡¡æœåŠ¡ä¸­é€‰å‡ºä¸€ä¸ªåˆé€‚çš„æœåŠ¡èŠ‚ç‚¹åï¼Œå†ç”±è´Ÿè½½å‡è¡¡æœåŠ¡è°ƒç”¨è¿™ä¸ªæœåŠ¡èŠ‚ç‚¹æ¥å®ç°æµé‡çš„åˆ†å‘ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/7a/c9/7a76b0b7c6e3fc4b60cfcda8dbd93dc9.jpg?wh=1142*726\" alt=\"\"></p><p>ç”±äºè¿™ç±»æœåŠ¡éœ€è¦æ‰¿æ‹…å…¨é‡çš„è¯·æ±‚ï¼Œæ‰€ä»¥å¯¹äºæ€§èƒ½çš„è¦æ±‚æé«˜ã€‚ä»£ç†ç±»çš„è´Ÿè½½å‡è¡¡æœåŠ¡æœ‰å¾ˆå¤šå¼€æºå®ç°ï¼Œæ¯”è¾ƒè‘—åçš„æœ‰LVSã€Nginxç­‰ç­‰ã€‚LVSåœ¨OSIç½‘ç»œæ¨¡å‹ä¸­çš„ç¬¬å››å±‚ï¼Œä¼ è¾“å±‚å·¥ä½œï¼Œæ‰€ä»¥LVSåˆå¯ä»¥ç§°ä¸ºå››å±‚è´Ÿè½½ï¼›è€ŒNginxè¿è¡Œåœ¨OSIç½‘ç»œæ¨¡å‹ä¸­çš„ç¬¬ä¸ƒå±‚ï¼Œåº”ç”¨å±‚ï¼Œæ‰€ä»¥åˆå¯ä»¥ç§°å®ƒä¸ºä¸ƒå±‚è´Ÿè½½ï¼ˆä½ å¯ä»¥å›é¡¾ä¸€ä¸‹<a href=\"https://time.geekbang.org/column/article/138331\">02è®²</a>çš„å†…å®¹ï¼‰ã€‚</p><p>åœ¨é¡¹ç›®çš„æ¶æ„ä¸­ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šåŒæ—¶éƒ¨ç½²LVSå’ŒNginxæ¥åšHTTPåº”ç”¨æœåŠ¡çš„è´Ÿè½½å‡è¡¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨å…¥å£å¤„éƒ¨ç½²LVSå°†æµé‡åˆ†å‘åˆ°å¤šä¸ªNginxæœåŠ¡å™¨ä¸Šï¼Œå†ç”±NginxæœåŠ¡å™¨åˆ†å‘åˆ°åº”ç”¨æœåŠ¡å™¨ä¸Šï¼Œ<strong>ä¸ºä»€ä¹ˆè¿™ä¹ˆåšå‘¢ï¼Ÿ</strong></p><p>ä¸»è¦å’ŒLVSå’ŒNginxçš„ç‰¹ç‚¹æœ‰å…³ï¼ŒLVSæ˜¯åœ¨ç½‘ç»œæ ˆçš„å››å±‚åšè¯·æ±‚åŒ…çš„è½¬å‘ï¼Œè¯·æ±‚åŒ…è½¬å‘ä¹‹åï¼Œç”±å®¢æˆ·ç«¯å’Œåç«¯æœåŠ¡ç›´æ¥å»ºç«‹è¿æ¥ï¼Œåç»­çš„å“åº”åŒ…ä¸ä¼šå†ç»è¿‡LVSæœåŠ¡å™¨ï¼Œæ‰€ä»¥ç›¸æ¯”Nginxæ€§èƒ½ä¼šæ›´é«˜ï¼Œä¹Ÿèƒ½å¤Ÿæ‰¿æ‹…æ›´é«˜çš„å¹¶å‘ã€‚</p><p>å¯LVSç¼ºé™·æ˜¯å·¥ä½œåœ¨å››å±‚ï¼Œè€Œè¯·æ±‚çš„URLæ˜¯ä¸ƒå±‚çš„æ¦‚å¿µï¼Œä¸èƒ½é’ˆå¯¹URLåšæ›´ç»†è‡´çš„è¯·æ±‚åˆ†å‘ï¼Œè€Œä¸”LVSä¹Ÿæ²¡æœ‰æä¾›æ¢æµ‹åç«¯æœåŠ¡æ˜¯å¦å­˜æ´»çš„æœºåˆ¶ï¼›è€ŒNginxè™½ç„¶æ¯”LVSçš„æ€§èƒ½å·®å¾ˆå¤šï¼Œä½†ä¹Ÿå¯ä»¥æ‰¿æ‹…æ¯ç§’å‡ ä¸‡æ¬¡çš„è¯·æ±‚ï¼Œå¹¶ä¸”å®ƒåœ¨é…ç½®ä¸Šæ›´åŠ çµæ´»ï¼Œè¿˜å¯ä»¥æ„ŸçŸ¥åç«¯æœåŠ¡æ˜¯å¦å‡ºç°é—®é¢˜ã€‚</p><p>å› æ­¤ï¼ŒLVSé€‚åˆåœ¨å…¥å£å¤„æ‰¿æ‹…å¤§æµé‡çš„è¯·æ±‚åˆ†å‘ï¼Œè€ŒNginxè¦éƒ¨ç½²åœ¨ä¸šåŠ¡æœåŠ¡å™¨ä¹‹å‰åšæ›´ç»†ç»´åº¦çš„è¯·æ±‚åˆ†å‘ã€‚<strong>æˆ‘ç»™ä½ çš„å»ºè®®æ˜¯ï¼Œ</strong>å¦‚æœä½ çš„QPSåœ¨åä¸‡ä»¥å†…ï¼Œé‚£ä¹ˆå¯ä»¥è€ƒè™‘ä¸å¼•å…¥LVSè€Œç›´æ¥ä½¿ç”¨Nginxä½œä¸ºå”¯ä¸€çš„è´Ÿè½½å‡è¡¡æœåŠ¡å™¨ï¼Œè¿™æ ·å°‘ç»´æŠ¤ä¸€ä¸ªç»„ä»¶ï¼Œä¹Ÿä¼šå‡å°‘ç³»ç»Ÿçš„ç»´æŠ¤æˆæœ¬ã€‚</p><p>ä¸è¿‡è¿™ä¸¤ä¸ªè´Ÿè½½å‡è¡¡æœåŠ¡é€‚ç”¨äºæ™®é€šçš„WebæœåŠ¡ï¼Œå¯¹äºå¾®æœåŠ¡æ¶æ„æ¥è¯´ï¼Œå®ƒä»¬æ˜¯ä¸åˆé€‚çš„ã€‚å› ä¸ºå¾®æœåŠ¡æ¶æ„ä¸­çš„æœåŠ¡èŠ‚ç‚¹å­˜å‚¨åœ¨æ³¨å†Œä¸­å¿ƒé‡Œï¼Œä½¿ç”¨LVSå°±å¾ˆéš¾å’Œæ³¨å†Œä¸­å¿ƒäº¤äº’è·å–å…¨é‡çš„æœåŠ¡èŠ‚ç‚¹åˆ—è¡¨ã€‚å¦å¤–ï¼Œä¸€èˆ¬å¾®æœåŠ¡æ¶æ„ä¸­ï¼Œä½¿ç”¨çš„æ˜¯RPCåè®®è€Œä¸æ˜¯HTTPåè®®ï¼Œæ‰€ä»¥Nginxä¹Ÿä¸èƒ½æ»¡è¶³è¦æ±‚ã€‚</p><p><strong>æ‰€ä»¥ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨å¦ä¸€ç±»çš„è´Ÿè½½å‡è¡¡æœåŠ¡ï¼Œå®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡æœåŠ¡ï¼Œä¹Ÿå°±æ˜¯æŠŠè´Ÿè½½å‡è¡¡çš„æœåŠ¡å†…åµŒåœ¨RPCå®¢æˆ·ç«¯ä¸­ã€‚</strong></p><p>å®ƒä¸€èˆ¬å’Œå®¢æˆ·ç«¯åº”ç”¨éƒ¨ç½²åœ¨ä¸€ä¸ªè¿›ç¨‹ä¸­ï¼Œæä¾›å¤šç§é€‰æ‹©èŠ‚ç‚¹çš„ç­–ç•¥ï¼Œæœ€ç»ˆä¸ºå®¢æˆ·ç«¯åº”ç”¨æä¾›ä¸€ä¸ªæœ€ä½³çš„ã€å¯ç”¨çš„æœåŠ¡ç«¯èŠ‚ç‚¹ã€‚è¿™ç±»æœåŠ¡ä¸€èˆ¬ä¼šç»“åˆæ³¨å†Œä¸­å¿ƒæ¥ä½¿ç”¨ï¼Œæ³¨å†Œä¸­å¿ƒæä¾›æœåŠ¡èŠ‚ç‚¹çš„å®Œæ•´åˆ—è¡¨ï¼Œå®¢æˆ·ç«¯æ‹¿åˆ°åˆ—è¡¨ä¹‹åä½¿ç”¨è´Ÿè½½å‡è¡¡æœåŠ¡çš„ç­–ç•¥é€‰å–ä¸€ä¸ªåˆé€‚çš„èŠ‚ç‚¹ï¼Œç„¶åå°†è¯·æ±‚å‘åˆ°è¿™ä¸ªèŠ‚ç‚¹ä¸Šã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/53/c1/539f9fd7196c3c0b17eba55584d4c6c1.jpg?wh=1142*385\" alt=\"\"></p><p>äº†è§£è´Ÿè½½å‡è¡¡æœåŠ¡çš„åˆ†ç±»æ˜¯ä½ å­¦ä¹ è´Ÿè½½å‡è¡¡æœåŠ¡çš„ç¬¬ä¸€æ­¥ï¼Œæ¥ä¸‹æ¥ï¼Œä½ éœ€è¦æŒæ¡è´Ÿè½½å‡è¡¡ç­–ç•¥ï¼Œè¿™æ ·ä¸€æ¥ï¼Œä½ åœ¨å®é™…å·¥ä½œä¸­é…ç½®è´Ÿè½½å‡è¡¡æœåŠ¡çš„æ—¶å€™ï¼Œå¯ä»¥å¯¹åŸç†æœ‰æ›´æ·±åˆ»çš„äº†è§£ã€‚</p><h2>å¸¸è§çš„è´Ÿè½½å‡è¡¡ç­–ç•¥æœ‰å“ªäº›</h2><p>è´Ÿè½½å‡è¡¡ç­–ç•¥ä»å¤§ä½“ä¸Šæ¥çœ‹å¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼š</p><ul>\n<li>ä¸€ç±»æ˜¯é™æ€ç­–ç•¥ï¼Œä¹Ÿå°±æ˜¯è¯´è´Ÿè½½å‡è¡¡æœåŠ¡å™¨åœ¨é€‰æ‹©æœåŠ¡èŠ‚ç‚¹æ—¶ï¼Œä¸ä¼šå‚è€ƒåç«¯æœåŠ¡çš„å®é™…è¿è¡Œçš„çŠ¶æ€ï¼›</li>\n<li>ä¸€ç±»æ˜¯åŠ¨æ€ç­–ç•¥ï¼Œä¹Ÿå°±æ˜¯è¯´è´Ÿè½½å‡è¡¡æœåŠ¡å™¨ä¼šä¾æ®åç«¯æœåŠ¡çš„ä¸€äº›è´Ÿè½½ç‰¹æ€§ï¼Œæ¥å†³å®šè¦é€‰æ‹©å“ªä¸€ä¸ªæœåŠ¡èŠ‚ç‚¹ã€‚</li>\n</ul><p>å¸¸è§çš„é™æ€ç­–ç•¥æœ‰å‡ ç§ï¼Œå…¶ä¸­ä½¿ç”¨æœ€å¹¿æ³›çš„æ˜¯<strong>è½®è¯¢çš„ç­–ç•¥ï¼ˆRoundRobinï¼ŒRRï¼‰ï¼Œ</strong>è¿™ç§ç­–ç•¥ä¼šè®°å½•ä¸Šæ¬¡è¯·æ±‚åç«¯æœåŠ¡çš„åœ°å€æˆ–è€…åºå·ï¼Œç„¶ååœ¨è¯·æ±‚æ—¶æŒ‰ç…§æœåŠ¡åˆ—è¡¨çš„é¡ºåºï¼Œè¯·æ±‚ä¸‹ä¸€ä¸ªåç«¯æœåŠ¡èŠ‚ç‚¹ã€‚ä¼ªä»£ç å¦‚ä¸‹ï¼š</p><pre><code>AtomicInteger lastCounter = getLastCounter();//è·å–ä¸Šæ¬¡è¯·æ±‚çš„æœåŠ¡èŠ‚ç‚¹çš„åºå· \nList&lt;String&gt; serverList = getServerList(); // è·å–æœåŠ¡åˆ—è¡¨\nint currentIndex = lastCounter.addAndGet(); //å¢åŠ åºåˆ—å·\nif(currentIndex &gt;= serverList.size()) {\n  currentIndex = 0;\n}\nsetLastCounter(currentIndex);\nreturn serverList.get(currentIndex);\n</code></pre><p>å®ƒå…¶å®æ˜¯ä¸€ç§é€šç”¨çš„ç­–ç•¥ï¼ŒåŸºæœ¬ä¸Šï¼Œå¤§éƒ¨åˆ†çš„è´Ÿè½½å‡è¡¡æœåŠ¡å™¨éƒ½æ”¯æŒã€‚è½®è¯¢çš„ç­–ç•¥å¯ä»¥åšåˆ°å°†è¯·æ±‚å°½é‡å¹³å‡åœ°åˆ†é…åˆ°æ‰€æœ‰æœåŠ¡èŠ‚ç‚¹ä¸Šï¼Œä½†æ˜¯ï¼Œå®ƒæ²¡æœ‰è€ƒè™‘æœåŠ¡èŠ‚ç‚¹çš„å…·ä½“é…ç½®æƒ…å†µã€‚æ¯”å¦‚ï¼Œä½ æœ‰ä¸‰ä¸ªæœåŠ¡èŠ‚ç‚¹ï¼Œå…¶ä¸­ä¸€ä¸ªæœåŠ¡èŠ‚ç‚¹çš„é…ç½®æ˜¯8æ ¸8Gï¼Œå¦å¤–ä¸¤ä¸ªèŠ‚ç‚¹çš„é…ç½®æ˜¯4æ ¸4Gï¼Œé‚£ä¹ˆå¦‚æœä½¿ç”¨è½®è¯¢çš„æ–¹å¼æ¥å¹³å‡åˆ†é…è¯·æ±‚çš„è¯ï¼Œ8æ ¸8Gçš„èŠ‚ç‚¹åˆ†åˆ°çš„è¯·æ±‚æ•°é‡å’Œ4æ ¸4Gçš„ä¸€æ ·å¤šï¼Œå°±ä¸èƒ½å‘æŒ¥æ€§èƒ½ä¸Šçš„ä¼˜åŠ¿äº†</p><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬è€ƒè™‘ç»™èŠ‚ç‚¹åŠ ä¸Šæƒé‡å€¼ï¼Œæ¯”å¦‚ç»™8æ ¸8Gçš„æœºå™¨é…ç½®æƒé‡ä¸º2ï¼Œé‚£ä¹ˆå°±ä¼šç»™å®ƒåˆ†é…åŒå€çš„æµé‡ï¼Œ<strong>è¿™ç§ç­–ç•¥å°±æ˜¯å¸¦æœ‰æƒé‡çš„è½®è¯¢ç­–ç•¥ã€‚</strong></p><p>é™¤äº†è¿™ä¸¤ç§ç­–ç•¥ä¹‹å¤–ï¼Œç›®å‰å¼€æºçš„è´Ÿè½½å‡è¡¡æœåŠ¡è¿˜æä¾›äº†å¾ˆå¤šé™æ€ç­–ç•¥ï¼š</p><ul>\n<li>Nginxæä¾›äº†ip_hashå’Œurl_hashç®—æ³•ï¼›</li>\n<li>LVSæä¾›äº†æŒ‰ç…§è¯·æ±‚çš„æºåœ°å€å’Œç›®çš„åœ°å€åšHashçš„ç­–ç•¥ï¼›</li>\n<li>Dubboä¹Ÿæä¾›äº†éšæœºé€‰å–ç­–ç•¥ä»¥åŠä¸€è‡´æ€§Hashçš„ç­–ç•¥ã€‚</li>\n</ul><p><strong>ä½†æ˜¯åœ¨æˆ‘çœ‹æ¥ï¼Œ</strong>è½®è¯¢å’Œå¸¦æœ‰æƒé‡çš„è½®è¯¢ç­–ç•¥èƒ½å¤Ÿå°†è¯·æ±‚å°½é‡å¹³å‡åœ°åˆ†é…åˆ°åç«¯æœåŠ¡èŠ‚ç‚¹ä¸Šï¼Œä¹Ÿå°±èƒ½å¤Ÿåšåˆ°å¯¹äºè´Ÿè½½çš„å‡è¡¡åˆ†é…ã€‚åœ¨æ²¡æœ‰æ›´å¥½çš„åŠ¨æ€ç­–ç•¥ä¹‹å‰ï¼Œåº”è¯¥ä¼˜å…ˆä½¿ç”¨è¿™ä¸¤ç§ç­–ç•¥ï¼Œæ¯”å¦‚Nginxå°±ä¼šä¼˜å…ˆä½¿ç”¨è½®è¯¢çš„ç­–ç•¥ã€‚</p><p>è€Œç›®å‰å¼€æºçš„è´Ÿè½½å‡è¡¡æœåŠ¡ä¸­ï¼Œä¹Ÿä¼šæä¾›ä¸€äº›åŠ¨æ€ç­–ç•¥ï¼Œæˆ‘å¼ºè°ƒä¸€ä¸‹å®ƒä»¬çš„åŸç†ã€‚</p><p>åœ¨è´Ÿè½½å‡è¡¡æœåŠ¡å™¨ä¸Šä¼šæ”¶é›†å¯¹åç«¯æœåŠ¡çš„è°ƒç”¨ä¿¡æ¯ï¼Œæ¯”å¦‚ä»è´Ÿè½½å‡è¡¡ç«¯åˆ°åç«¯æœåŠ¡çš„æ´»è·ƒè¿æ¥æ•°ï¼Œæˆ–è€…æ˜¯è°ƒç”¨çš„å“åº”æ—¶é—´ï¼Œç„¶åä»ä¸­é€‰æ‹©è¿æ¥æ•°æœ€å°‘çš„æœåŠ¡ï¼Œæˆ–è€…å“åº”æ—¶é—´æœ€çŸ­çš„åç«¯æœåŠ¡ã€‚<strong>æˆ‘ä¸¾å‡ ä¸ªå…·ä½“çš„ä¾‹å­ï¼š</strong></p><ul>\n<li>Dubboæä¾›çš„LeastAciveç­–ç•¥ï¼Œå°±æ˜¯ä¼˜å…ˆé€‰æ‹©æ´»è·ƒè¿æ¥æ•°æœ€å°‘çš„æœåŠ¡ï¼›</li>\n<li>Spring Cloudå…¨å®¶æ¡¶ä¸­çš„Ribbonæä¾›äº†WeightedResponseTimeRuleæ˜¯ä½¿ç”¨å“åº”æ—¶é—´ç»™æ¯ä¸ªæœåŠ¡èŠ‚ç‚¹è®¡ç®—ä¸€ä¸ªæƒé‡ï¼Œç„¶åä¾æ®è¿™ä¸ªæƒé‡ï¼Œæ¥ç»™è°ƒç”¨æ–¹åˆ†é…æœåŠ¡èŠ‚ç‚¹ã€‚</li>\n</ul><p><strong>è¿™äº›ç­–ç•¥çš„æ€è€ƒç‚¹</strong>æ˜¯ä»è°ƒç”¨æ–¹çš„è§’åº¦å‡ºå‘ï¼Œé€‰æ‹©è´Ÿè½½æœ€å°ã€èµ„æºæœ€ç©ºé—²çš„æœåŠ¡æ¥è°ƒç”¨ï¼Œä»¥æœŸæœ›èƒ½å¾—åˆ°æ›´é«˜çš„æœåŠ¡è°ƒç”¨æ€§èƒ½ï¼Œä¹Ÿå°±èƒ½æœ€å¤§åŒ–åœ°ä½¿ç”¨æœåŠ¡å™¨çš„ç©ºé—²èµ„æºï¼Œè¯·æ±‚ä¹Ÿä¼šå“åº”å¾—æ›´è¿…é€Ÿã€‚<strong>æ‰€ä»¥æˆ‘å»ºè®®ä½ ï¼Œ</strong>åœ¨å®é™…å¼€å‘ä¸­ï¼Œä¼˜å…ˆè€ƒè™‘ä½¿ç”¨åŠ¨æ€çš„ç­–ç•¥ã€‚</p><p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä½ å·²ç»å¯ä»¥æ ¹æ®ä¸Šé¢çš„åˆ†æï¼Œé€‰æ‹©é€‚åˆè‡ªå·±çš„è´Ÿè½½å‡è¡¡ç­–ç•¥ï¼Œå¹¶é€‰æ‹©ä¸€ä¸ªæœ€ä¼˜çš„æœåŠ¡èŠ‚ç‚¹ã€‚<strong>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼š</strong>ä½ æ€ä¹ˆä¿è¯é€‰æ‹©å‡ºæ¥çš„è¿™ä¸ªèŠ‚ç‚¹ï¼Œä¸€å®šæ˜¯ä¸€ä¸ªå¯ä»¥æ­£å¸¸æœåŠ¡çš„èŠ‚ç‚¹å‘¢ï¼Ÿå¦‚æœä½ é‡‡ç”¨çš„æ˜¯è½®è¯¢çš„ç­–ç•¥ï¼Œé€‰æ‹©å‡ºæ¥çš„æ˜¯ä¸€ä¸ªæ•…éšœèŠ‚ç‚¹åˆè¦æ€ä¹ˆåŠå‘¢ï¼Ÿæ‰€ä»¥ï¼Œä¸ºäº†é™ä½è¯·æ±‚è¢«åˆ†é…åˆ°ä¸€ä¸ªæ•…éšœèŠ‚ç‚¹çš„å‡ ç‡ï¼Œæœ‰äº›è´Ÿè½½å‡è¡¡æœåŠ¡å™¨è¿˜æä¾›äº†å¯¹æœåŠ¡èŠ‚ç‚¹çš„æ•…éšœæ£€æµ‹åŠŸèƒ½ã€‚</p><h2>å¦‚ä½•æ£€æµ‹èŠ‚ç‚¹æ˜¯å¦æ•…éšœ</h2><p><a href=\"https://time.geekbang.org/column/article/167151\">24è®²</a>ä¸­ï¼Œæˆ‘å¸¦ä½ äº†è§£åˆ°åœ¨å¾®æœåŠ¡åŒ–æ¶æ„ä¸­ï¼ŒæœåŠ¡èŠ‚ç‚¹ä¼šå®šæœŸåœ°å‘æ³¨å†Œä¸­å¿ƒå‘é€å¿ƒè·³åŒ…ï¼Œè¿™æ ·æ³¨å†Œä¸­å¿ƒå°±èƒ½å¤ŸçŸ¥æ™“æœåŠ¡èŠ‚ç‚¹æ˜¯å¦æ•…éšœï¼Œä¹Ÿå°±å¯ä»¥ç¡®è®¤ä¼ é€’ç»™è´Ÿè½½å‡è¡¡æœåŠ¡çš„èŠ‚ç‚¹ä¸€å®šæ˜¯å¯ç”¨çš„ã€‚</p><p>ä½†å¯¹äºNginxæ¥è¯´ï¼Œ<strong>æˆ‘ä»¬è¦å¦‚ä½•ä¿è¯é…ç½®çš„æœåŠ¡èŠ‚ç‚¹æ˜¯å¯ç”¨çš„å‘¢ï¼Ÿ</strong></p><p>è¿™å°±è¦æ„Ÿè°¢æ·˜å®å¼€æºçš„Nginxæ¨¡å—<a href=\"https://github.com/yaoweibin/nginx_upstream_check_module\">nginx_upstream_check_module</a>äº†ï¼Œè¿™ä¸ªæ¨¡å—å¯ä»¥è®©Nginxå®šæœŸåœ°æ¢æµ‹åç«¯æœåŠ¡çš„ä¸€ä¸ªæŒ‡å®šçš„æ¥å£ï¼Œç„¶åæ ¹æ®è¿”å›çš„çŠ¶æ€ç æ¥åˆ¤æ–­æœåŠ¡æ˜¯å¦è¿˜å­˜æ´»ã€‚å½“æ¢æµ‹ä¸å­˜æ´»çš„æ¬¡æ•°è¾¾åˆ°ä¸€å®šé˜ˆå€¼æ—¶ï¼Œå°±è‡ªåŠ¨å°†è¿™ä¸ªåç«¯æœåŠ¡ä»è´Ÿè½½å‡è¡¡æœåŠ¡å™¨ä¸­æ‘˜é™¤ã€‚<strong>å®ƒçš„é…ç½®æ ·ä¾‹å¦‚ä¸‹ï¼š</strong></p><pre><code>upstream server {\n        server 192.168.1.1:8080;\n        server 192.168.1.2:8080;\n        check interval=3000 rise=2 fall=5 timeout=1000 type=http default_down=true;//æ£€æµ‹é—´éš”ä¸º3ç§’ï¼Œæ£€æµ‹è¶…æ—¶æ—¶é—´æ˜¯1ç§’ï¼Œä½¿ç”¨httpåè®®ã€‚å¦‚æœè¿ç»­å¤±è´¥æ¬¡æ•°è¾¾åˆ°5æ¬¡å°±è®¤ä¸ºæœåŠ¡ä¸å¯ç”¨ï¼›å¦‚æœè¿ç»­æˆåŠŸæ¬¡æ•°è¾¾åˆ°2æ¬¡ï¼Œåˆ™è®¤ä¸ºæœåŠ¡å¯ç”¨ã€‚åç«¯æœåŠ¡åˆšå¯åŠ¨æ—¶çŠ¶æ€æ˜¯ä¸å¯ç”¨çš„\n        check_http_send &quot;GET /health_check HTTP/1.0\\r\\n\\r\\n&quot;; //æ£€æµ‹URL\n        check_http_expect_alive http_2xx; //æ£€æµ‹è¿”å›çŠ¶æ€ç ä¸º200æ—¶è®¤ä¸ºæ£€æµ‹æˆåŠŸ\n}\n</code></pre><p>NginxæŒ‰ç…§ä¸Šé¢çš„æ–¹å¼é…ç½®ä¹‹åï¼Œä½ çš„ä¸šåŠ¡æœåŠ¡å™¨ä¹Ÿè¦å®ç°ä¸€ä¸ªâ€œ/health_checkâ€çš„æ¥å£ï¼Œåœ¨è¿™ä¸ªæ¥å£ä¸­è¿”å›çš„HTTPçŠ¶æ€ç ï¼Œè¿™ä¸ªè¿”å›çš„çŠ¶æ€ç å¯ä»¥å­˜å‚¨åœ¨é…ç½®ä¸­å¿ƒä¸­ï¼Œè¿™æ ·åœ¨å˜æ›´çŠ¶æ€ç æ—¶ï¼Œå°±ä¸éœ€è¦é‡å¯æœåŠ¡äº†ï¼ˆé…ç½®ä¸­å¿ƒåœ¨ç¬¬33èŠ‚è¯¾ä¸­ä¼šè®²åˆ°ï¼‰ã€‚</p><p>èŠ‚ç‚¹æ£€æµ‹çš„åŠŸèƒ½ï¼Œè¿˜èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬å®ç°WebæœåŠ¡çš„ä¼˜é›…å…³é—­ã€‚åœ¨<a href=\"https://time.geekbang.org/column/article/167151\">24è®²</a>ä¸­ä»‹ç»æ³¨å†Œä¸­å¿ƒæ—¶ï¼Œæˆ‘æ›¾ç»æåˆ°ï¼ŒæœåŠ¡çš„ä¼˜é›…å…³é—­éœ€è¦å…ˆåˆ‡é™¤æµé‡å†å…³é—­æœåŠ¡ï¼Œä½¿ç”¨äº†æ³¨å†Œä¸­å¿ƒä¹‹åï¼Œå°±å¯ä»¥å…ˆä»æ³¨å†Œä¸­å¿ƒä¸­æ‘˜é™¤èŠ‚ç‚¹ï¼Œå†é‡å¯æœåŠ¡ï¼Œä»¥ä¾¿è¾¾åˆ°ä¼˜é›…å…³é—­çš„ç›®çš„ã€‚é‚£ä¹ˆWebæœåŠ¡è¦å¦‚ä½•å®ç°ä¼˜é›…å…³é—­å‘¢ï¼Ÿæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬äº†è§£ä¸€ä¸‹æœ‰äº†èŠ‚ç‚¹æ£€æµ‹åŠŸèƒ½ä¹‹åï¼ŒæœåŠ¡æ˜¯å¦‚ä½•å¯åŠ¨å’Œå…³é—­çš„ã€‚</p><p><strong>åœ¨æœåŠ¡åˆšåˆšå¯åŠ¨æ—¶ï¼Œ</strong>å¯ä»¥åˆå§‹åŒ–é»˜è®¤çš„HTTPçŠ¶æ€ç æ˜¯500ï¼Œè¿™æ ·Nginxå°±ä¸ä¼šå¾ˆå¿«å°†è¿™ä¸ªæœåŠ¡èŠ‚ç‚¹æ ‡è®°ä¸ºå¯ç”¨ï¼Œä¹Ÿå°±å¯ä»¥ç­‰å¾…æœåŠ¡ä¸­ä¾èµ–çš„èµ„æºåˆå§‹åŒ–å®Œæˆï¼Œé¿å…æœåŠ¡åˆå§‹å¯åŠ¨æ—¶çš„æ³¢åŠ¨ã€‚</p><p><strong>åœ¨å®Œå…¨åˆå§‹åŒ–ä¹‹åï¼Œ</strong>å†å°†HTTPçŠ¶æ€ç å˜æ›´ä¸º200ï¼ŒNginxç»è¿‡ä¸¤æ¬¡æ¢æµ‹åï¼Œå°±ä¼šæ ‡è®°æœåŠ¡ä¸ºå¯ç”¨ã€‚åœ¨æœåŠ¡å…³é—­æ—¶ï¼Œä¹Ÿåº”è¯¥å…ˆå°†HTTPçŠ¶æ€ç å˜æ›´ä¸º500ï¼Œç­‰å¾…Nginxæ¢æµ‹å°†æœåŠ¡æ ‡è®°ä¸ºä¸å¯ç”¨åï¼Œå‰ç«¯çš„æµé‡ä¹Ÿå°±ä¸ä¼šç»§ç»­å‘å¾€è¿™ä¸ªæœåŠ¡èŠ‚ç‚¹ã€‚åœ¨ç­‰å¾…æœåŠ¡æ­£åœ¨å¤„ç†çš„è¯·æ±‚å…¨éƒ¨å¤„ç†å®Œæ¯•ä¹‹åï¼Œå†å¯¹æœåŠ¡åšé‡å¯ï¼Œå¯ä»¥é¿å…ç›´æ¥é‡å¯å¯¼è‡´æ­£åœ¨å¤„ç†çš„è¯·æ±‚å¤±è´¥çš„é—®é¢˜ã€‚<strong>è¿™æ˜¯å¯åŠ¨å’Œå…³é—­çº¿ä¸ŠWebæœåŠ¡æ—¶çš„æ ‡å‡†å§¿åŠ¿ï¼Œä½ å¯ä»¥åœ¨é¡¹ç›®ä¸­å‚è€ƒä½¿ç”¨ã€‚</strong></p><h2>è¯¾ç¨‹å°ç»“</h2><p>æœ¬èŠ‚è¯¾ï¼Œæˆ‘å¸¦ä½ äº†è§£äº†ä¸è´Ÿè½½å‡è¡¡æœåŠ¡ç›¸å…³çš„ä¸€äº›çŸ¥è¯†ç‚¹ï¼Œä»¥åŠåœ¨å®é™…å·¥ä½œä¸­çš„è¿ç”¨æŠ€å·§ã€‚æˆ‘æƒ³å¼ºè°ƒå‡ ä¸ªé‡ç‚¹ï¼š</p><ul>\n<li>\n<p>ç½‘ç«™è´Ÿè½½å‡è¡¡æœåŠ¡çš„éƒ¨ç½²ï¼Œæ˜¯ä»¥LVSæ‰¿æ¥å…¥å£æµé‡ï¼Œåœ¨åº”ç”¨æœåŠ¡å™¨ä¹‹å‰ï¼Œéƒ¨ç½²Nginxåšç»†åŒ–çš„æµé‡åˆ†å‘å’Œæ•…éšœèŠ‚ç‚¹æ£€æµ‹ã€‚å½“ç„¶ï¼Œå¦‚æœä½ çš„ç½‘ç«™çš„å¹¶å‘ä¸é«˜ï¼Œä¹Ÿå¯ä»¥è€ƒè™‘ä¸å¼•å…¥LVSã€‚</p>\n</li>\n<li>\n<p>è´Ÿè½½å‡è¡¡çš„ç­–ç•¥å¯ä»¥ä¼˜å…ˆé€‰æ‹©åŠ¨æ€ç­–ç•¥ï¼Œä¿è¯è¯·æ±‚å‘é€åˆ°æ€§èƒ½æœ€ä¼˜çš„èŠ‚ç‚¹ä¸Šï¼›å¦‚æœæ²¡æœ‰åˆé€‚çš„åŠ¨æ€ç­–ç•¥ï¼Œé‚£ä¹ˆå¯ä»¥é€‰æ‹©è½®è¯¢çš„ç­–ç•¥ï¼Œè®©è¯·æ±‚å¹³å‡åˆ†é…åˆ°æ‰€æœ‰çš„æœåŠ¡èŠ‚ç‚¹ä¸Šã€‚</p>\n</li>\n<li>\n<p>Nginxå¯ä»¥å¼•å…¥nginx_upstream_check_moduleï¼Œå¯¹åç«¯æœåŠ¡åšå®šæœŸçš„å­˜æ´»æ£€æµ‹ï¼Œåç«¯çš„æœåŠ¡èŠ‚ç‚¹åœ¨é‡å¯æ—¶ï¼Œä¹Ÿè¦ç§‰æ‰¿ç€â€œå…ˆåˆ‡æµé‡åé‡å¯â€çš„åŸåˆ™ï¼Œå°½é‡å‡å°‘èŠ‚ç‚¹é‡å¯å¯¹äºæ•´ä½“ç³»ç»Ÿçš„å½±å“ã€‚</p>\n</li>\n</ul><p>ä½ å¯èƒ½ä¼šè®¤ä¸ºï¼ŒåƒNginxã€LVSåº”è¯¥æ˜¯è¿ç»´æ‰€å…³å¿ƒçš„ç»„ä»¶ï¼Œä½œä¸ºå¼€å‘äººå‘˜ä¸ç”¨æ“å¿ƒç»´æŠ¤ã€‚<strong>ä¸è¿‡é€šè¿‡ä»Šå¤©çš„å­¦ä¹ ä½ åº”è¯¥å¯ä»¥çœ‹åˆ°ï¼š</strong>è´Ÿè½½å‡è¡¡æœåŠ¡æ˜¯æå‡ç³»ç»Ÿæ‰©å±•æ€§å’Œæ€§èƒ½çš„é‡è¦ç»„ä»¶ï¼Œåœ¨é«˜å¹¶å‘ç³»ç»Ÿè®¾è®¡ä¸­ï¼Œå®ƒå‘æŒ¥çš„ä½œç”¨æ˜¯æ— æ³•æ›¿ä»£çš„ã€‚ç†è§£å®ƒçš„åŸç†ï¼ŒæŒæ¡ä½¿ç”¨å®ƒçš„æ­£ç¡®å§¿åŠ¿ï¼Œåº”è¯¥æ˜¯æ¯ä¸€ä¸ªåç«¯å¼€å‘åŒå­¦çš„å¿…ä¿®è¯¾ã€‚</p><h2>ä¸€è¯¾ä¸€æ€</h2><p>åœ¨å®é™…çš„å·¥ä½œä¸­ï¼Œä½ ä¸€å®šä¹Ÿç”¨è¿‡å¾ˆå¤šçš„è´Ÿè½½å‡è¡¡çš„æœåŠ¡å’Œç»„ä»¶ï¼Œé‚£ä¹ˆåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ä½ é‡åˆ°è¿‡å“ªäº›é—®é¢˜å‘¢ï¼Œæœ‰å“ªäº›æ³¨æ„çš„ç‚¹å‘¢ï¼Ÿæ¬¢è¿åœ¨ç•™è¨€åŒºä¸æˆ‘åˆ†äº«ä½ çš„ç»éªŒã€‚</p><p>æœ€åï¼Œæ„Ÿè°¢ä½ çš„é˜…è¯»ï¼Œå¦‚æœè¿™ç¯‡æ–‡ç« è®©ä½ æœ‰æ‰€æ”¶è·ï¼Œä¹Ÿæ¬¢è¿ä½ å°†å®ƒåˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ã€‚</p>","neighbors":{"left":{"article_title":"25 | åˆ†å¸ƒå¼Traceï¼šæ¨ªè·¨å‡ åä¸ªåˆ†å¸ƒå¼ç»„ä»¶çš„æ…¢è¯·æ±‚è¦å¦‚ä½•æ’æŸ¥ï¼Ÿ","id":167979},"right":{"article_title":"27 | APIç½‘å…³ï¼šç³»ç»Ÿçš„é—¨é¢è¦å¦‚ä½•åšå‘¢ï¼Ÿ","id":169944}},"comments":[{"had_liked":false,"id":154276,"user_name":"é¢è¯•å®˜é—®","can_delete":false,"product_type":"c1","uid":1009375,"ip_address":"","ucode":"F9CE89589772F4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/66/df/501ba989.jpg","comment_is_top":false,"comment_ctime":1574402958,"is_pvip":true,"replies":[{"id":"59487","content":"æ˜¯çš„","user_name":"ä½œè€…å›å¤","comment_id":154276,"uid":"1448977","ip_address":"","utype":1,"ctime":1574642854,"user_name_real":"å”æ‰¬"}],"discussion_count":1,"race_medal":0,"score":"147603291022","product_id":100035801,"comment_content":"æ˜¯å¦ä½¿ç”¨å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡ï¼Œè·Ÿå¾®æœåŠ¡æ¡†æ¶ä¸­æœåŠ¡ä¹‹é—´é€šä¿¡æ˜¯ä½¿ç”¨ RPC åè®®è¿˜æ˜¯ HTTP åè®®æ— å…³ï¼Œä¾‹å¦‚Spring Cloud ä¸­çš„ Ribbon å°±æ˜¯ç”¨æ¥è¿›è¡Œå®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡çš„ï¼›ä¸€èˆ¬æ¥è¯´ï¼Œåœ¨ç³»ç»Ÿæ¥å…¥å±‚ï¼Œä½¿ç”¨çš„æ˜¯æœåŠ¡ç«¯è´Ÿè½½å‡è¡¡ï¼Œè€Œå¾®æœåŠ¡ä¹‹é—´çš„å†…éƒ¨è°ƒç”¨ï¼Œä½¿ç”¨çš„æ˜¯å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡ã€‚","like_count":35,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475423,"discussion_content":"æ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574642854,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":194805,"user_name":"è™šç«¹","can_delete":false,"product_type":"c1","uid":1691109,"ip_address":"","ucode":"8D8C96C793724E","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJIocn8OMjfSGqyeSJEV3ID2rquLR0S6xo0ibdNYQgzicib6L6VlqWjhgxOqD2iaicX1KhbWXWCsmBTskA/132","comment_is_top":false,"comment_ctime":1585107262,"is_pvip":false,"replies":[{"id":"75836","content":"æ˜¯çš„","user_name":"ä½œè€…å›å¤","comment_id":194805,"uid":"1448977","ip_address":"","utype":1,"ctime":1586088740,"user_name_real":"å”æ‰¬"}],"discussion_count":2,"race_medal":0,"score":"61714649406","product_id":100035801,"comment_content":"è€å¸ˆæœ€åè¯´çš„nginxå¯åœæœåŠ¡æ—¶åˆ‡æµé‡éƒ¨åˆ†ï¼Œåœ¨åˆšåˆšå¯åŠ¨æ—¶è¿”å›500ï¼Œå®Œå…¨åˆå§‹åŒ–åè¿”å›200ï¼Œæ˜¯æŒ‡health_checkæ¥å£è¿”å›çš„çŠ¶æ€ç æ˜¯é€šè¿‡é…ç½®ä¸­å¿ƒé…ç½®è·å–çš„ï¼Œé‡å¯ä¹‹å‰æ”¹ä¸º500ï¼Œçœ‹å®ä¾‹æ—¥å¿—å…¨å®Œå¯åŠ¨æˆåŠŸä¹‹åå†æ”¹ä¸º200ï¼Ÿ","like_count":15,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488906,"discussion_content":"æ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586088740,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1103556,"avatar":"https://static001.geekbang.org/account/avatar/00/10/d6/c4/27343f76.jpg","nickname":"SHift","note":"","ucode":"36BD4A38F7FA2C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":409105,"discussion_content":"é‚£è¿™æ ·å°±æ„Ÿè§‰ä¸å¤Ÿçµæ´»äº†ï¼Œæ¯æ¬¡éƒ½å¾—äººå·¥å¤„ç†å•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635382413,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":172289,"user_name":"jc9090kkk","can_delete":false,"product_type":"c1","uid":1338831,"ip_address":"","ucode":"6C992D07A2E78F","user_header":"https://static001.geekbang.org/account/avatar/00/14/6d/cf/ec335526.jpg","comment_is_top":false,"comment_ctime":1579145254,"is_pvip":false,"replies":[{"id":"66900","content":"æ˜¯LVSï¼ŒLVSçš„æ‰¿è½½èƒ½åŠ›è¦å¤§å¾ˆå¤š","user_name":"ä½œè€…å›å¤","comment_id":172289,"uid":"1448977","ip_address":"","utype":1,"ctime":1579228116,"user_name_real":"å”æ‰¬"}],"discussion_count":4,"race_medal":0,"score":"40233850918","product_id":100035801,"comment_content":"æ„Ÿè°¢è€å¸ˆåˆ†äº«ï¼Œè¿™ä¸€åˆ»çœ‹å®Œæœ‰ä¸€ä¸ªç–‘é—®ï¼Œå¯¹äºè´Ÿè½½å‡è¡¡çš„ä¸€äº›ç­–ç•¥éƒ½æ¸…æ¥šäº†ï¼Œä½†æ˜¯å¯¹äºè´Ÿè½½å‡è¡¡å™¨çš„æ‰¿è½½å®¹é‡æœ‰ç‚¹ç–‘é—®ï¼Œæ¯”å¦‚è¯´é€šè¿‡nginxæ¥ä½œä¸ºè´Ÿè½½å‡è¡¡å™¨ï¼Œä½†æ˜¯å®ƒæœ¬èº«çš„æ‰¿è½½å®¹é‡æ˜¯æœ‰æé™çš„ï¼Œå¦‚æœå½“å‰nginxçš„è½¬å‘å®¹é‡åªèƒ½æ”¯æ’‘10w&#47;sçš„è®¿é—®è¯·æ±‚ï¼Œä½†æ˜¯æµé‡å¦‚æœè¾¾åˆ°20w&#47;sï¼Œé‚£ä¹ˆnginxä½œä¸ºè´Ÿè½½å‡è¡¡å™¨æ¥è®²ï¼Œæ˜¯å¦éœ€è¦å¢åŠ æ–°çš„è´Ÿè½½å‡è¡¡å™¨ä¸€èµ·åè°ƒå·¥ä½œï¼Œé‚£ä¹ˆåŒæ—¶å­˜åœ¨ä¸¤ä¸ªè´Ÿè½½å‡è¡¡å™¨çš„è¯ï¼Œå·¥ä½œäºå®ƒä¸Šä¸€å±‚çš„ä»»åŠ¡ç”±è°æ¥å¤„ç†å‘¢ï¼Ÿlvsï¼Ÿè¿˜æ˜¯dnsï¼Ÿæˆ–è€…æ˜¯å…¶ä»–ï¼Ÿè´Ÿè½½å‡è¡¡å™¨ä¸å¯èƒ½æ²¡æœ‰æé™å§ï¼Ÿ","like_count":10,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481686,"discussion_content":"æ˜¯LVSï¼ŒLVSçš„æ‰¿è½½èƒ½åŠ›è¦å¤§å¾ˆå¤š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579228116,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2403557,"avatar":"","nickname":"å¤æ•å®‰","note":"","ucode":"7966113C968872","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":578923,"discussion_content":"å¦‚æœæµé‡åªæœ‰å‡ åä¸‡ï¼Œæ˜¯ä¸æ˜¯å¯ä»¥é€šè¿‡å®¤å‹å¤šå°nginxæœåŠ¡å™¨ï¼Œç„¶ååœ¨DNSç«¯å‡è¡¡åˆ°è¿™äº›æœåŠ¡å™¨ä¸Šï¼Œä¹Ÿçœå»äº†LVS","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657092704,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1450462,"avatar":"https://static001.geekbang.org/account/avatar/00/16/21/de/c935d3bd.jpg","nickname":"æ–‡åŸ¹","note":"","ucode":"D8BC9BD6F2B261","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":539262,"discussion_content":"æ˜æ˜¾å°±æ˜¯æ²¡æœ‰ä»”ç»†çœ‹è¿‡æ–‡ç« æé—®çš„ï¼Œè€å¸ˆè¯´çš„å¾ˆæ˜ç™½å¤§æµé‡ç”¨LVS","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639650037,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1015754,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7f/ca/ea85bfdd.jpg","nickname":"helloworld","note":"","ucode":"00DF2FEC58D2E6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":290695,"discussion_content":"å¥½é—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594566365,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":155682,"user_name":"è“é­”ä¸¶","can_delete":false,"product_type":"c1","uid":1219438,"ip_address":"","ucode":"2AE4359E263558","user_header":"https://static001.geekbang.org/account/avatar/00/12/9b/6e/edd2da0c.jpg","comment_is_top":false,"comment_ctime":1574735872,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"31639506944","product_id":100035801,"comment_content":"1.nginxç±»çš„è´Ÿè½½ç»„ä»¶åªæ”¯æŒé™æ€é…ç½®ï¼Œæ— æ³•åŠ¨æ€æ„ŸçŸ¥é…ç½®ï¼Œä½¿ç”¨openrestryä»£æ›¿nginxå¥½å¾ˆå¤šï¼Œä¸ä»…å¯ä»¥åŠ¨æ€é…ç½®ï¼Œè€Œä¸”æ¯”nginxæä¾›äº†æ›´å¤šæ‰©å±•æ¨¡å—<br>2.åœ¨dockerå®¹å™¨çš„k8sç¯å¢ƒä¸­ä¹Ÿä½¿ç”¨è¿‡nginx-controllerä»£ç†ç»„ä»¶ï¼Œä½†æ˜¯è¿™ä¸ªç»„ä»¶è™½ç„¶å¯ä»¥å®ç°åŠ¨æ€é…ç½®å‚æ•°ï¼Œä½†æ˜¯è·¯ç”±å’Œæ²»ç†èƒ½åŠ›éƒ½åå¼±ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨istioç­‰servicemeshç½‘å…³","like_count":8},{"had_liked":false,"id":154188,"user_name":"sdjdd","can_delete":false,"product_type":"c1","uid":1211987,"ip_address":"","ucode":"512F2338DFF793","user_header":"https://static001.geekbang.org/account/avatar/00/12/7e/53/c29c2fc9.jpg","comment_is_top":false,"comment_ctime":1574388814,"is_pvip":false,"replies":[{"id":"59490","content":"æ˜¯çš„ï¼Œæˆ‘çš„æ„æ€æ˜¯è¿™æ ·çš„","user_name":"ä½œè€…å›å¤","comment_id":154188,"uid":"1448977","ip_address":"","utype":1,"ctime":1574642906,"user_name_real":"å”æ‰¬"}],"discussion_count":1,"race_medal":0,"score":"27344192590","product_id":100035801,"comment_content":"å…³é—­æœåŠ¡ä¹‹å‰ï¼Œç”¨ 503 çŠ¶æ€ç å“åº”å¥åº·æ£€æŸ¥æ˜¯ä¸æ˜¯è¯­ä¹‰æ›´æ˜ç¡®ä¸€äº›ã€‚","like_count":7,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475400,"discussion_content":"æ˜¯çš„ï¼Œæˆ‘çš„æ„æ€æ˜¯è¿™æ ·çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574642906,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":169125,"user_name":"å¤å¾·","can_delete":false,"product_type":"c1","uid":1037755,"ip_address":"","ucode":"E3F646BB73F60E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/d5/bb/98b93862.jpg","comment_is_top":false,"comment_ctime":1578277797,"is_pvip":false,"replies":[{"id":"66183","content":"ä¹Ÿå¯ä»¥ï¼Œzuulä½œä¸º7å±‚è´Ÿè½½","user_name":"ä½œè€…å›å¤","comment_id":169125,"uid":"1448977","ip_address":"","utype":1,"ctime":1578727747,"user_name_real":"å”æ‰¬"}],"discussion_count":1,"race_medal":0,"score":"23053114277","product_id":100035801,"comment_content":"ä»¥å‰ç”¨é˜¿é‡Œäº‘çš„æ—¶å€™ï¼Œæˆ‘ä»¬çš„æ¶æ„æ˜¯ä½¿ç”¨é˜¿é‡Œäº‘çš„SLBï¼Œç›´æ¥è½¬å‘åˆ°å¾®æœåŠ¡ç½‘å…³zuulä¸Šï¼Œå†æ ¹æ®urlå»åˆ†å‘åˆ°å¯¹åº”æœåŠ¡ã€‚","like_count":6,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480432,"discussion_content":"ä¹Ÿå¯ä»¥ï¼Œzuulä½œä¸º7å±‚è´Ÿè½½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578727747,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":154189,"user_name":"M","can_delete":false,"product_type":"c1","uid":1437769,"ip_address":"","ucode":"1A756D9AFCEB48","user_header":"https://static001.geekbang.org/account/avatar/00/15/f0/49/889f9ef6.jpg","comment_is_top":false,"comment_ctime":1574388938,"is_pvip":false,"replies":[{"id":"59488","content":"nginxå¯ä»¥æ”¯æŒwebsocketåè®®çš„<br>","user_name":"ä½œè€…å›å¤","comment_id":154189,"uid":"1448977","ip_address":"","utype":1,"ctime":1574642890,"user_name_real":"å”æ‰¬"}],"discussion_count":3,"race_medal":0,"score":"23049225418","product_id":100035801,"comment_content":"è¯·æ•™ä¸‹è€å¸ˆï¼Œappä¸æœåŠ¡å™¨ä¹‹é—´ä½¿ç”¨websocketåè®®è¿æ¥ï¼Œå¦‚ä½•ä½¿ç”¨è´Ÿè½½å‡è¡¡å‘¢ï¼Ÿ","like_count":5,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475401,"discussion_content":"nginxå¯ä»¥æ”¯æŒwebsocketåè®®çš„\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574642890,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1437769,"avatar":"https://static001.geekbang.org/account/avatar/00/15/f0/49/889f9ef6.jpg","nickname":"M","note":"","ucode":"1A756D9AFCEB48","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":57772,"discussion_content":"è°¢è°¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574642925,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1125909,"avatar":"https://static001.geekbang.org/account/avatar/00/11/2e/15/f1cd59c9.jpg","nickname":"ä¸œé£å¹æ¢¦ä¸¶æ˜“æ•£","note":"","ucode":"0CB8D4C04505D4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":56895,"discussion_content":"åŒé—®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574522459,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":197094,"user_name":"å¦‚æ­Œ","can_delete":false,"product_type":"c1","uid":1292419,"ip_address":"","ucode":"727C90CA52CD73","user_header":"https://static001.geekbang.org/account/avatar/00/13/b8/83/7c1ed918.jpg","comment_is_top":false,"comment_ctime":1585357779,"is_pvip":false,"replies":[{"id":"74923","content":"åŠ æ²¹ğŸ’ª","user_name":"ä½œè€…å›å¤","comment_id":197094,"uid":"1448977","ip_address":"","utype":1,"ctime":1585553401,"user_name_real":"å”æ‰¬"}],"discussion_count":2,"race_medal":0,"score":"14470259667","product_id":100035801,"comment_content":"åˆ·ç¬¬äºŒéäº† ä»æ“ä½œç³»ç»Ÿåˆ°ç½‘ç»œåˆ°è¿™æœ¬ä¹¦","like_count":3,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":489448,"discussion_content":"åŠ æ²¹ğŸ’ª","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585553401,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1006424,"avatar":"","nickname":"é—¨çª—å°äºŒ","note":"","ucode":"0BF3780C247F22","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":574050,"discussion_content":"è¿™æ˜¯ä¹¦åï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1653813197,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":266962,"user_name":"Geek_4d0d3e","can_delete":false,"product_type":"c1","uid":1629551,"ip_address":"","ucode":"0CC37554D47359","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epEIGtJsxNCr9mUD8stzOg5icKcwYHMPVjJhXqYY4icsc6BSIqszsibWFP2wUetDwJsibyhdhbTgXNNibg/132","comment_is_top":false,"comment_ctime":1607556115,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10197490707","product_id":100035801,"comment_content":"æˆ‘ä»¬ç”¨kongåšK8Sé›†ç¾¤ä¸šåŠ¡çš„è´Ÿè½½å‡è¡¡","like_count":2},{"had_liked":false,"id":168049,"user_name":"ã„åŒ—é£","can_delete":false,"product_type":"c1","uid":1763285,"ip_address":"","ucode":"11AB6AA95DE2EF","user_header":"https://static001.geekbang.org/account/avatar/00/1a/e7/d5/f4bb9ccf.jpg","comment_is_top":false,"comment_ctime":1578006381,"is_pvip":false,"replies":[{"id":"66185","content":"æˆ‘æƒ³é¢è¯•å®˜æƒ³äº†è§£çš„æ˜¯  ä½ æ˜¯å¦å¯ä»¥æ ¹æ®ä¸šåŠ¡ç‰¹ç‚¹æ¥é€‰å–æœåŠ¡å™¨ï¼Œæ¯”å¦‚æ•°æ®åº“è¦é€‰å–å¤§å†…å­˜ã€å¤§ç£ç›˜çš„å­˜å‚¨å‹çš„æœåŠ¡å™¨ï¼›è®¡ç®—æ¯”è¾ƒå¤šçš„ä¸šåŠ¡è¦é€‰å–CPUæ€§èƒ½æ¯”è¾ƒå¥½çš„","user_name":"ä½œè€…å›å¤","comment_id":168049,"uid":"1448977","ip_address":"","utype":1,"ctime":1578727886,"user_name_real":"å”æ‰¬"}],"discussion_count":3,"race_medal":0,"score":"10167940973","product_id":100035801,"comment_content":"è€å¸ˆï¼Œæˆ‘åœ¨ä¹‹å‰çš„é¢è¯•é‡åˆ°è¿‡ä¸€ä¸ªé—®é¢˜ã€‚çŸ¥é“å·²æœ‰åŠŸèƒ½ï¼Œå¦‚ä½•é€‰å–æœåŠ¡å™¨ã€‚å»è´­ä¹°æœåŠ¡å™¨çš„é…ç½®å‘¢ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480118,"discussion_content":"æˆ‘æƒ³é¢è¯•å®˜æƒ³äº†è§£çš„æ˜¯  ä½ æ˜¯å¦å¯ä»¥æ ¹æ®ä¸šåŠ¡ç‰¹ç‚¹æ¥é€‰å–æœåŠ¡å™¨ï¼Œæ¯”å¦‚æ•°æ®åº“è¦é€‰å–å¤§å†…å­˜ã€å¤§ç£ç›˜çš„å­˜å‚¨å‹çš„æœåŠ¡å™¨ï¼›è®¡ç®—æ¯”è¾ƒå¤šçš„ä¸šåŠ¡è¦é€‰å–CPUæ€§èƒ½æ¯”è¾ƒå¥½çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578727886,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1584786,"avatar":"https://static001.geekbang.org/account/avatar/00/18/2e/92/e1c38ca6.jpg","nickname":"KamTo  Hung","note":"","ucode":"00D5A6479DB784","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":364128,"discussion_content":"éŸ©ä¿¡ç‚¹å…µï¼Œå¤šå¤šç›Šå–„ï¼ˆæ‰‹åŠ¨ç‹—å¤´ï¼‰","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1617369456,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1763285,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/e7/d5/f4bb9ccf.jpg","nickname":"ã„åŒ—é£","note":"","ucode":"11AB6AA95DE2EF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":129945,"discussion_content":"è€å¸ˆï¼Œèƒ½ä¸èƒ½å…·ä½“ä¸‹ï¼Ÿå¥½æ¯”omséœ€é€‰å–ä»€ä¹ˆæ ·çš„æœåŠ¡å™¨ï¼Œtns(è¿å•è½¨è¿¹)å¦‚ä½•é€‰å–ã€‚æˆ‘çŸ¥é“å¯èƒ½è·Ÿæ•°æ®ï¼Œç”¨æˆ·é‡ï¼Œè¯·æ±‚æœ‰å…³ã€‚é‚£è¯¥å¦‚ä½•å›ç­”è¿™æ ·çš„é—®é¢˜å‘¢ï¼Ÿè¿˜æ˜¯å…ˆé€‰ä¸€ä¸ªå·®ä¸å¤šçš„ï¼Œç„¶åå¾€ä¸Šé¢åŠ ï¼Ÿé‚£å¾—æœ‰ä¸€ä¸ªé‡å§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578745701,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":156433,"user_name":"é˜¿åœŸ","can_delete":false,"product_type":"c1","uid":1183019,"ip_address":"","ucode":"2DBEAD80B0CA3C","user_header":"https://static001.geekbang.org/account/avatar/00/12/0d/2b/4814d3db.jpg","comment_is_top":false,"comment_ctime":1574870464,"is_pvip":false,"replies":[{"id":"60231","content":"æ–‡ä¸­æåˆ°çš„nginxçš„ä¾‹å­ï¼Œå°±æ˜¯ä¸€ä¸ªæ¡ˆä¾‹<br>é™¤æ­¤ä¹‹å¤–ï¼Œåœ¨å¾®æœåŠ¡åœ¨é‡å¯æ—¶ï¼Œå…ˆä»æ³¨å†Œä¸­å¿ƒä¸­æ‘˜æ‰èŠ‚ç‚¹ï¼Œç„¶åè§‚å¯Ÿæµé‡æ²¡æœ‰äº†ä¹‹åå†é‡å¯ã€‚<br><br>å…¶å®ï¼Œæ€»çš„ä¸€ç‚¹å°±æ˜¯å…ˆåˆ‡æµé‡ï¼Œå†é‡å¯","user_name":"ä½œè€…å›å¤","comment_id":156433,"uid":"1448977","ip_address":"","utype":1,"ctime":1575015099,"user_name_real":"å”æ‰¬"}],"discussion_count":3,"race_medal":0,"score":"10164805056","product_id":100035801,"comment_content":"ä¼˜é›…å…³æœºä¸å¯åŠ¨æœ‰æ¡ˆä¾‹ä¹ˆï¼Ÿç†è§£äº†åŸç†ï¼Œå…·ä½“æ€ä¹ˆå®ç°å‘¢ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476105,"discussion_content":"æ–‡ä¸­æåˆ°çš„nginxçš„ä¾‹å­ï¼Œå°±æ˜¯ä¸€ä¸ªæ¡ˆä¾‹\né™¤æ­¤ä¹‹å¤–ï¼Œåœ¨å¾®æœåŠ¡åœ¨é‡å¯æ—¶ï¼Œå…ˆä»æ³¨å†Œä¸­å¿ƒä¸­æ‘˜æ‰èŠ‚ç‚¹ï¼Œç„¶åè§‚å¯Ÿæµé‡æ²¡æœ‰äº†ä¹‹åå†é‡å¯ã€‚\n\nå…¶å®ï¼Œæ€»çš„ä¸€ç‚¹å°±æ˜¯å…ˆåˆ‡æµé‡ï¼Œå†é‡å¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575015099,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1674708,"avatar":"https://static001.geekbang.org/account/avatar/00/19/8d/d4/64eae0b3.jpg","nickname":"æ—¶å…‰æœºå™¨","note":"","ucode":"E1FC3FCFF3203F","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":65780,"discussion_content":"@ä½œè€… è¯·é—®è€å¸ˆï¼Œä¼˜é›…å…³é—­ï¼Œæ€ä¹ˆä¿è¯æœåŠ¡ä¸­è¿è¡Œçš„è¯·æ±‚å·²ç»è¯·æ±‚å®Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575028341,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1307497,"avatar":"https://static001.geekbang.org/account/avatar/00/13/f3/69/7039d03f.jpg","nickname":"ä¹¦ç­–ç¨ æµŠ","note":"","ucode":"A29875CE15FDA3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1674708,"avatar":"https://static001.geekbang.org/account/avatar/00/19/8d/d4/64eae0b3.jpg","nickname":"æ—¶å…‰æœºå™¨","note":"","ucode":"E1FC3FCFF3203F","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":398628,"discussion_content":"çœ‹æœåŠ¡å™¨çš„èµ„æºä½¿ç”¨æƒ…å†µæˆ–è€…æ—¥å¿—éƒ½è¡Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632823287,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":65780,"ip_address":""},"score":398628,"extra":""}]}]},{"had_liked":false,"id":155471,"user_name":"longslee","can_delete":false,"product_type":"c1","uid":1465986,"ip_address":"","ucode":"C24E32E5B1B6F5","user_header":"https://static001.geekbang.org/account/avatar/00/16/5e/82/438c8534.jpg","comment_is_top":false,"comment_ctime":1574691259,"is_pvip":false,"replies":[{"id":"60243","content":"æ–‡ä¸­æœ‰æåˆ°ï¼Œä¸€èˆ¬æ˜¯åœ¨RPCå®¢æˆ·ç«¯é‡Œé¢ç»Ÿè®¡å¯¹æœåŠ¡ç«¯çš„è¿æ¥æ•°æˆ–è€…å“åº”æ—¶é—´ï¼Œè¿™æ ·å¯ä»¥é€‰æ‹©è¿æ¥æ•°æœ€å°‘ï¼Œæˆ–è€…å“åº”æ—¶é—´æœ€çŸ­çš„æœåŠ¡ç«¯","user_name":"ä½œè€…å›å¤","comment_id":155471,"uid":"1448977","ip_address":"","utype":1,"ctime":1575015852,"user_name_real":"å”æ‰¬"}],"discussion_count":1,"race_medal":0,"score":"10164625851","product_id":100035801,"comment_content":"æ‰“å¡ã€‚ æ¶¨å§¿åŠ¿äº†ã€‚<br>æ›¾ç»é¡¹ç›®ä½¿ç”¨ä¸€å±‚ IBM WebSphere ç®€å•è·¯ç”±ï¼Œä½†æ˜¯å®¢æˆ·ç«¯å­¦èªæ˜äº†ï¼Œéƒ½æ‰‹åŠ¨ç»‘å®š hosts ï¼Œè´Ÿè½½ä¸å‡è¡¡äº†ã€‚æ‰€ä»¥è¿˜æ˜¯å¤šå±‚ä¸æš´éœ²æ¯”è¾ƒå¥½ã€‚<br>æé—®ï¼šè€å¸ˆï¼Œæ‚¨è®²åˆ°ç»“åˆæ³¨å†Œä¸­å¿ƒçš„å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡ï¼Œå®ƒåˆæ˜¯æ€ä¹ˆåšåˆ°â€œåŠ¨æ€ç­–ç•¥â€çš„å‘¢ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475762,"discussion_content":"æ–‡ä¸­æœ‰æåˆ°ï¼Œä¸€èˆ¬æ˜¯åœ¨RPCå®¢æˆ·ç«¯é‡Œé¢ç»Ÿè®¡å¯¹æœåŠ¡ç«¯çš„è¿æ¥æ•°æˆ–è€…å“åº”æ—¶é—´ï¼Œè¿™æ ·å¯ä»¥é€‰æ‹©è¿æ¥æ•°æœ€å°‘ï¼Œæˆ–è€…å“åº”æ—¶é—´æœ€çŸ­çš„æœåŠ¡ç«¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575015852,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":154791,"user_name":"å•Šå•Šå•Šå“¦å“¦","can_delete":false,"product_type":"c1","uid":1309877,"ip_address":"","ucode":"68C7153ECAAC57","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/RNO4yZyBvic914hewmNNE8iblYDcfv5yGHZ9OnKuCuZXNmGR0F5qV3icKLT2xpMt66GyEpicZVvrmz8A6TIqt92MQg/132","comment_is_top":false,"comment_ctime":1574565872,"is_pvip":false,"replies":[{"id":"59479","content":"LVSèƒ½æŠ—æ›´é«˜çš„å¹¶å‘","user_name":"ä½œè€…å›å¤","comment_id":154791,"uid":"1448977","ip_address":"","utype":1,"ctime":1574642360,"user_name_real":"å”æ‰¬"}],"discussion_count":1,"race_medal":0,"score":"10164500464","product_id":100035801,"comment_content":"nginx ä¸Šä¸ºä»€ä¹ˆè¦é˜¶lvsã€‚ ä¸€èˆ¬dnsæœåŠ¡å™¨ä¹Ÿå¯ä»¥å®ç°è½®è®­åˆ†å‘åˆ°ä¸åŒçš„nginxä¸Šå•Šã€‚  ","like_count":2,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475578,"discussion_content":"LVSèƒ½æŠ—æ›´é«˜çš„å¹¶å‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574642360,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":248550,"user_name":"null","can_delete":false,"product_type":"c1","uid":1024294,"ip_address":"","ucode":"F9039EFED6B55D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaELZPnUAiajaR5C25EDLWeJURggyiaOP5GGPe2qlwpQcm5e3ybib8OsP4tvddFDLVRSNNGL5I3SFPJHsA/132","comment_is_top":false,"comment_ctime":1600220183,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5895187479","product_id":100035801,"comment_content":"åŸæ–‡ï¼šæ¯”å¦‚ä»è´Ÿè½½å‡è¡¡ç«¯åˆ°åç«¯æœåŠ¡çš„æ´»è·ƒè¿æ¥æ•°ï¼Œç„¶åä»ä¸­é€‰æ‹©è¿æ¥æ•°æœ€å°‘çš„æœåŠ¡ã€‚<br><br>æ€ä¹ˆçŸ¥é“å“ªä¸ªåç«¯æœåŠ¡çš„æ´»è·ƒè¿æ¥æ•°æœ€å°‘ï¼Ÿè´Ÿè½½å‡è¡¡æœåŠ¡ä¸æ˜¯å†…åµŒåœ¨å®¢æˆ·ç«¯çš„ä¹ˆï¼Ÿå„å„å®¢æˆ·ç«¯çš„è´Ÿè½½å‡è¡¡æ•°æ®æ²¡æœ‰å…±äº«å§ã€‚","like_count":1},{"had_liked":false,"id":155119,"user_name":"Lucianoæé‘«","can_delete":false,"product_type":"c1","uid":1329995,"ip_address":"","ucode":"5FBE5F86FD5B2C","user_header":"https://static001.geekbang.org/account/avatar/00/14/4b/4b/97926cba.jpg","comment_is_top":false,"comment_ctime":1574648288,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"5869615584","product_id":100035801,"comment_content":"è´Ÿè½½å‡è¡¡åº”è¯¥åˆ†ä¸ºï¼š <br>å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡<br>åç«¯è´Ÿè½½å‡è¡¡<br>   DNSè´Ÿè½½å‡è¡¡<br>   IPè´Ÿè½½å‡è¡¡<br>   åå‘ä»£ç†è´Ÿè½½å‡è¡¡","like_count":1,"discussions":[{"author":{"id":1584786,"avatar":"https://static001.geekbang.org/account/avatar/00/18/2e/92/e1c38ca6.jpg","nickname":"KamTo  Hung","note":"","ucode":"00D5A6479DB784","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":364129,"discussion_content":"ç¡¬ä»¶è´Ÿè½½å‡è¡¡F5","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617369526,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1674298,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK6JnM4HA6sk0j6HFaA0RMRmQzEXOQqsMjHOnU8Z8D8qiccOn7sYbdyMu8ic4heq7JhGWlcV1Mq5Ntw/132","nickname":"Aloe","note":"","ucode":"B3852A416623EC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":304707,"discussion_content":"çœ‹äº†è¿™æ¡è¯„è®ºå¿½ç„¶å°±å¼€æœ—äº†. æ˜¯æˆ‘æ°´å¹³ä¸å¤Ÿä¹ˆ,ä¸€ç¯‡æ–‡ç« ä¸‹æ¥å¿ƒé‡Œéƒ½æ²¡ä¸ªæ¡†æ¶?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599645616,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":154326,"user_name":"å°å–µå–µ","can_delete":false,"product_type":"c1","uid":1062444,"ip_address":"","ucode":"FDBBB2A59DB8B6","user_header":"https://static001.geekbang.org/account/avatar/00/10/36/2c/8bd4be3a.jpg","comment_is_top":false,"comment_ctime":1574409935,"is_pvip":false,"replies":[{"id":"59484","content":"1. æ˜¯å¯ä»¥çš„<br>2. æ˜¯çš„ï¼Œè¿™ä¸ªåœ¨äºä½ è¢«æ¢æµ‹æ¥å£çš„å®ç°","user_name":"ä½œè€…å›å¤","comment_id":154326,"uid":"1448977","ip_address":"","utype":1,"ctime":1574642786,"user_name_real":"å”æ‰¬"}],"discussion_count":1,"race_medal":0,"score":"5869377231","product_id":100035801,"comment_content":"1.Nginxå’ŒLVSéƒ½å¯ä»¥åšè´Ÿè½½å‡è¡¡ï¼Œè¿™äº›ç»„ä»¶ä¹Ÿéƒ½å¯ä»¥åº”ç”¨äºC&#47;Sç³»ç»Ÿå—ï¼Ÿ<br>2.health_checkåªèƒ½æ£€æµ‹åˆ°æœåŠ¡å™¨å’ŒèŠ‚ç‚¹æŒ‡ç‚¹æ˜¯å¦å¯ç”¨ï¼ŒèŠ‚ç‚¹å¯ç”¨ä½†æ˜¯å¹¶ä¸èƒ½ä»£è¡¨å†…éƒ¨æœåŠ¡æ¥å£æ˜¯å¯ç”¨çš„ï¼Œè¿™ä¸ªæœ‰ä»€ä¹ˆå¥½çš„æ–¹æ¡ˆå‘¢ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475438,"discussion_content":"1. æ˜¯å¯ä»¥çš„\n2. æ˜¯çš„ï¼Œè¿™ä¸ªåœ¨äºä½ è¢«æ¢æµ‹æ¥å£çš„å®ç°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574642786,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":154297,"user_name":"leesir","can_delete":false,"product_type":"c1","uid":1116673,"ip_address":"","ucode":"D720A0966666D9","user_header":"https://static001.geekbang.org/account/avatar/00/11/0a/01/3bd45e1e.jpg","comment_is_top":false,"comment_ctime":1574405711,"is_pvip":false,"replies":[{"id":"59486","content":"å¯ä»¥å‘€ï¼Œæœ‰ä¸€ç§consul + nginxæ–¹æ¡ˆï¼Œå°±æ˜¯æŠŠèŠ‚ç‚¹ä¿¡æ¯å†™åœ¨consulé‡Œé¢ï¼Œè¿™æ ·å½“èŠ‚ç‚¹å˜åŒ–æ—¶ï¼Œnginxå¯ä»¥å¾—åˆ°é€šçŸ¥","user_name":"ä½œè€…å›å¤","comment_id":154297,"uid":"1448977","ip_address":"","utype":1,"ctime":1574642839,"user_name_real":"å”æ‰¬"}],"discussion_count":1,"race_medal":0,"score":"5869373007","product_id":100035801,"comment_content":"æ±‚æ•™ï¼Œå¯¹äºæ™®é€šwebæœåŠ¡ï¼Œnginxæœ‰åŠæ³•æ„ŸçŸ¥æ–°å¢ç»“ç‚¹å—ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475428,"discussion_content":"å¯ä»¥å‘€ï¼Œæœ‰ä¸€ç§consul + nginxæ–¹æ¡ˆï¼Œå°±æ˜¯æŠŠèŠ‚ç‚¹ä¿¡æ¯å†™åœ¨consulé‡Œé¢ï¼Œè¿™æ ·å½“èŠ‚ç‚¹å˜åŒ–æ—¶ï¼Œnginxå¯ä»¥å¾—åˆ°é€šçŸ¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574642839,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":324594,"user_name":"ææ˜","can_delete":false,"product_type":"c1","uid":1250952,"ip_address":"","ucode":"A3BC428EA02D76","user_header":"https://static001.geekbang.org/account/avatar/00/13/16/88/2ebded78.jpg","comment_is_top":false,"comment_ctime":1638513455,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1638513455","product_id":100035801,"comment_content":"nginxä»£ç†çš„åç«¯æœåŠ¡ï¼Œå¦‚æœæŸä¸ªæ­£åœ¨å¤„ç†è¯·æ±‚çš„åç«¯æœåŠ¡è¢«nginxæ‘˜é™¤äº†ï¼Œé‚£ä¹ˆè¢«æ‘˜é™¤çš„åç«¯æœåŠ¡è¿˜æ²¡æ¥çš„åŠè¿”å›ç»™å®¢æˆ·ç«¯çš„å“åº”ï¼Œè¿˜èƒ½æ­£å¸¸è¿”å›ä¸","like_count":0,"discussions":[{"author":{"id":2756576,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/0f/e0/b53a7701.jpg","nickname":"éª‘è½¦ä¸Šå¤©ç©º","note":"","ucode":"364365E2721122","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583030,"discussion_content":"åšé™çº§å¤„ç†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659878707,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":308321,"user_name":"é¸ æ‘©Â·æ™º","can_delete":false,"product_type":"c1","uid":1211909,"ip_address":"","ucode":"6CD93CD1DB6955","user_header":"https://static001.geekbang.org/account/avatar/00/12/7e/05/431d380f.jpg","comment_is_top":false,"comment_ctime":1629533550,"is_pvip":false,"discussion_count":1,"race_medal":5,"score":"1629533550","product_id":100035801,"comment_content":"è€å¸ˆï¼Œçƒ¦åŠ³æœ‰ç©ºè§£ç­”ä¸€ä¸‹å¿ƒä¸­ç–‘æƒ‘ã€‚<br><br>åŸæ–‡ï¼šLVS æ˜¯åœ¨ç½‘ç»œæ ˆçš„å››å±‚åšè¯·æ±‚åŒ…çš„è½¬å‘ï¼Œè¯·æ±‚åŒ…è½¬å‘ä¹‹åï¼Œç”±å®¢æˆ·ç«¯å’Œåç«¯æœåŠ¡ç›´æ¥å»ºç«‹è¿æ¥ï¼Œåç»­çš„å“åº”åŒ…ä¸ä¼šå†ç»è¿‡ LVS æœåŠ¡å™¨ã€‚<br><br>1.å¦‚æœlvsæ˜¯å·¥ä½œåœ¨å››å±‚ï¼ˆä¼ è¾“å±‚)ï¼Œå¯¹äºtcpåè®®ï¼Œæ„Ÿè§‰lvsæ˜¯æœ‰çŠ¶æ€çš„ï¼Œéœ€è¦ç»´æŠ¤å®¢æˆ·ç«¯å’ŒæœåŠ¡è¿æ¥çš„å§ï¼Ÿå¦å¤–ï¼Œå¦‚æœlvsåªåšåŒ…è½¬å‘ï¼Œç”±å®¢æˆ·ç«¯å’ŒæœåŠ¡ç›´æ¥å»ºç«‹è¿æ¥ï¼Œåˆæ„Ÿè§‰lvsæ˜¯å·¥ä½œåœ¨ipç½‘ç»œå±‚ã€‚<br>2.åç»­çš„å“åº”åŒ…ä¸ç»è¿‡lvsã€‚<br><br>è€å¸ˆï¼Œç”±ä¸Šé¢1å’Œ2ï¼Œæˆ‘çŒœæƒ³æ˜¯ä¸æ˜¯ï¼Œlvsç¡®å®å·¥ä½œåœ¨ä¼ è¾“å±‚ï¼Œä½†æ˜¯lvsåªç»´æŠ¤å®¢æˆ·ç«¯åˆ°æœåŠ¡çš„å•å‘è¿æ¥å—ï¼Ÿ<br>å¤„ç†å®¢æˆ·ç«¯åˆ°æœåŠ¡å•å‘è¿æ¥çš„æ„æ€æ˜¯ï¼Œlvsåªå¤„ç†synï¼Œä»è€Œä¿æŒå®¢æˆ·ç«¯ä¸æœåŠ¡çš„å¯¹åº”å…³ç³»ï¼Œè€Œä¸å¤„ç†ä¼ è¾“å±‚å…¶ä»–ç»†èŠ‚ï¼Œæ¯”å¦‚ä¹±åºã€ä¸¢åŒ…ã€æ‹¥å¡ç­‰ã€‚è¿™é‡Œçš„èµ„æºå ç”¨å¼€é”€å¾ˆå°ï¼Œæ‰€ä»¥ä»lvså®ç°å±‚é¢æ˜¯ä¿æŒè¿æ¥ï¼Œè€Œä»lvsä½¿ç”¨å±‚é¢æ¥è®²å°±æ¥è¿‘æ— çŠ¶æ€ï¼Œæ¥è¿‘ä¿®æ”¹ç›®æ ‡åœ°å€ç›´æ¥è½¬å‘åŒ…ï¼Œä»è€Œè¯´æˆä¸å¤„ç†å®¢æˆ·ç«¯å’ŒæœåŠ¡çš„è¿æ¥äº†ã€‚<br><br>ç›¼å¤ï¼Œè°¢è°¢ï¼","like_count":0,"discussions":[{"author":{"id":2675399,"avatar":"https://static001.geekbang.org/account/avatar/00/28/d2/c7/b7f52df2.jpg","nickname":"é›¨é‡Œ","note":"","ucode":"C475DE8B5375AB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":570826,"discussion_content":"LVSå«å››å±‚è´Ÿè½½å‡è¡¡å™¨ï¼Œå°±æ˜¯åªåšè·¯ç”±è½¬å‘ï¼Œè·Ÿè·¯ç”±å™¨æ˜¯ä¸€ä¸ªåŠŸèƒ½ï¼Œä½†æ˜¯å…‰æœ‰å››å±‚ä¸è¡Œçš„ï¼Œå› ä¸ºè¦æ ¹æ®urlè¯·æ±‚åˆ°æœåŠ¡ç«¯ï¼Œæ‰€ä»¥è¦åšurlè§£æï¼Œè¿™ä¸ªåªèƒ½nginxæ¥åšï¼Œæ€»ç»“ï¼Œlvsåªåšè·¯ç”±è½¬å‘ï¼Œæ‰¿æ‹…å¼€å§‹çš„æµé‡ï¼Œå‡å°‘nginxçš„å‹åŠ›ï¼Œå¦å¤–LVSçš„å®ç°ä¸»è¦ç”±å†…æ ¸æ¥åšçš„ï¼Œæ•ˆç‡è¾ƒå¥½ï¼Œå¯ä»¥å¾ˆå¥½å‡è½»ç”¨æˆ·æ€çš„å‹åŠ›","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651928579,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":289943,"user_name":"çŸ³å¤´","can_delete":false,"product_type":"c1","uid":2586341,"ip_address":"","ucode":"EB3C9A277C7B0C","user_header":"","comment_is_top":false,"comment_ctime":1619273292,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1619273292","product_id":100035801,"comment_content":"zkå®é™…ç”¨çš„æ˜¯zabï¼Œconsulç”¨raftï¼Œå¦‚æœæ¢ç©¶ä¸€ä¸‹raftçš„åŸç†ä¼šæŒºæœ‰æ„æ€çš„ï¼Œå¤§å¤§ç®€åŒ–äº†paxos","like_count":0},{"had_liked":false,"id":284877,"user_name":"é±¼","can_delete":false,"product_type":"c1","uid":1487584,"ip_address":"","ucode":"89EC9CE3AD0281","user_header":"https://static001.geekbang.org/account/avatar/00/16/b2/e0/d856f5a4.jpg","comment_is_top":false,"comment_ctime":1616506717,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1616506717","product_id":100035801,"comment_content":"LVSåªåœ¨ä½¿ç”¨DRæ¨¡å¼ï¼ˆåªä¿®æ”¹ç›®æ ‡MACåœ°å€ï¼‰ï¼Œå“åº”ä¸éœ€è¦ç»è¿‡LVSã€‚åœ¨ä½¿ç”¨NATæ¨¡å¼ï¼ˆåŒæ—¶ç›®æ ‡ä¿®æ”¹IPå’ŒMACåœ°å€æ—¶ï¼‰ï¼Œè¿”å›ä»ç„¶è¦ç»è¿‡LVSï¼Œè¿™ä¸ªæ—¶å€™LVSçš„åŠŸèƒ½ç±»ä¼¼äºç½‘å…³ã€‚","like_count":0},{"had_liked":false,"id":252767,"user_name":"Demter","can_delete":false,"product_type":"c1","uid":1158439,"ip_address":"","ucode":"BE3B6F726916CE","user_header":"https://static001.geekbang.org/account/avatar/00/11/ad/27/5556ae50.jpg","comment_is_top":false,"comment_ctime":1602482487,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1602482487","product_id":100035801,"comment_content":"ç›´æ¥éƒ¨ç½²è¶³å¤Ÿå¤šçš„nginxå°±è¡Œäº†ï¼Œä¸ºä»€ä¹ˆè¿˜è¦lvså‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1886331,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/c8/7b/153181d7.jpg","nickname":"å¤œè¾‰","note":"","ucode":"9421385F51FF9E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":364810,"discussion_content":"å…¥å£åœ¨LVSï¼Œç”±LVSå†è´Ÿè½½å‡åŒ€åˆ†é…ç»™æ¯ä¸ªnginx","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617614640,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1487584,"avatar":"https://static001.geekbang.org/account/avatar/00/16/b2/e0/d856f5a4.jpg","nickname":"é±¼","note":"","ucode":"89EC9CE3AD0281","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":347908,"discussion_content":"ä½ çš„è¯·æ±‚æ€ä¹ˆåˆ†é…ä½ éƒ¨ç½²çš„å¤šä¸ªNginxï¼Œä½ å¯ä»¥å§LVSå½“åšNginxä¸­çš„Nginx","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612361319,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":250496,"user_name":"null","can_delete":false,"product_type":"c1","uid":1024294,"ip_address":"","ucode":"F9039EFED6B55D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaELZPnUAiajaR5C25EDLWeJURggyiaOP5GGPe2qlwpQcm5e3ybib8OsP4tvddFDLVRSNNGL5I3SFPJHsA/132","comment_is_top":false,"comment_ctime":1601104282,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1601104282","product_id":100035801,"comment_content":"åŸæ–‡ï¼šLVS æ˜¯åœ¨ç½‘ç»œæ ˆçš„å››å±‚åšè¯·æ±‚åŒ…çš„è½¬å‘ï¼Œè¯·æ±‚åŒ…è½¬å‘ä¹‹åï¼Œç”±å®¢æˆ·ç«¯å’Œåç«¯æœåŠ¡ç›´æ¥å»ºç«‹è¿æ¥ï¼Œåç»­çš„å“åº”åŒ…ä¸ä¼šå†ç»è¿‡ LVS æœåŠ¡å™¨ã€‚<br><br><br>é—®é¢˜ï¼šå»ºç«‹è¿æ¥åç”±å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ç›´æ¥é€šä¿¡ï¼Œå’‹å®ç°çš„ï¼Ÿ æ˜¯å®¢æˆ·ç«¯è¯·æ±‚ LVS æœåŠ¡å™¨ï¼ŒLVS è¿”å›ip port ç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯å†å‘èµ·ä¸æœåŠ¡ç«¯å»ºç«‹çš„è¿æ¥ä¹ˆï¼Ÿ <br><br>è°¢è°¢è€å¸ˆ","like_count":0,"discussions":[{"author":{"id":1886331,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/c8/7b/153181d7.jpg","nickname":"å¤œè¾‰","note":"","ucode":"9421385F51FF9E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":364812,"discussion_content":"LVSä»¥ç¬¬å››å±‚ï¼Œç½‘ç»œåŒ…ç›´æ¥è½¬å‘ï¼Œæ‰€ä»¥æ€§èƒ½é«˜\nè€ŒNginxæ ¹æ®è¯·æ±‚ï¼ˆurlï¼‰è¿›è¡Œè½¬å‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617614826,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":249378,"user_name":"å¾åŒå­¦","can_delete":false,"product_type":"c1","uid":1027740,"ip_address":"","ucode":"0EF0A8E28C2E91","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ae/9c/b1ef4502.jpg","comment_is_top":false,"comment_ctime":1600614231,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1600614231","product_id":100035801,"comment_content":"ä¹‹å‰æœ‰é‡åˆ°è¿‡Nginxè¶…æ—¶è½¬å‘çš„é—®é¢˜ã€‚å½“æ—¶å¹‚ç­‰æ²¡åšå¥½ï¼Œå¯¼è‡´äº†é‡å¤æ‰§è¡Œã€‚","like_count":0},{"had_liked":false,"id":211877,"user_name":"é’±","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1588033888,"is_pvip":false,"replies":[{"id":"78852","content":"è¿™ã€‚ã€‚ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1588069873,"ip_address":"","comment_id":211877,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1588033888","product_id":100035801,"comment_content":"æ‰“å¡ï¼Œè´Ÿè½½å‡è¡¡å¿…ç„¶ç”¨åˆ°è¿‡ï¼Œä¸è¿‡ç¡®å®æ²¡æ€ä¹ˆæ‘¸è¿‡ï¼ŒåŸç†åŸºæœ¬äº†è§£ï¼Œé‡åˆ°é—®é¢˜è¿˜éœ€å†æ¢ç´¢ã€‚ä¹‹å‰æœ‰é‡åˆ°ï¼Œå› nginxç¼“å­˜å‡ºç°çš„é—®é¢˜ï¼Œç›´æ¥ç²—æš´é‡å¯ï¼Œæ¥è§£å†³çš„ã€‚ğŸ˜¬","like_count":0,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":493386,"discussion_content":"è¿™ã€‚ã€‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588069873,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1213078,"avatar":"https://static001.geekbang.org/account/avatar/00/12/82/96/aa795685.jpg","nickname":"mghio","note":"","ucode":"74883EDE4FD0DC","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":260080,"discussion_content":"é‡å¯å¤§æ³•å¥½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588846368,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":195327,"user_name":"å®‰æ’","can_delete":false,"product_type":"c1","uid":1260026,"ip_address":"","ucode":"F78CFA9624CAEF","user_header":"https://static001.geekbang.org/account/avatar/00/13/39/fa/a7edbc72.jpg","comment_is_top":false,"comment_ctime":1585180332,"is_pvip":false,"replies":[{"id":"75195","content":"rpcåè®®çš„è¯ï¼Œå®¢æˆ·ç«¯æŒ‡çš„æ˜¯rpcå®¢æˆ·ç«¯","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1585703172,"ip_address":"","comment_id":195327,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1585180332","product_id":100035801,"comment_content":"æ–‡ä¸­è¯´çš„å®¢æˆ·ç«¯åº”è¯¥ä¸æ˜¯appæˆ–è€…æµè§ˆå™¨å§ï¼Ÿappæˆ–è€…æµè§ˆå™¨å»è®¿é—®ä¸€ä¸ªç½‘ç«™æ—¶ä¼šç”¨rpcåè®®å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":489030,"discussion_content":"rpcåè®®çš„è¯ï¼Œå®¢æˆ·ç«¯æŒ‡çš„æ˜¯rpcå®¢æˆ·ç«¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585703172,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":182232,"user_name":"ä¸å°æ˜","can_delete":false,"product_type":"c1","uid":1207622,"ip_address":"","ucode":"CC23857B8D75D5","user_header":"https://static001.geekbang.org/account/avatar/00/12/6d/46/e16291f8.jpg","comment_is_top":false,"comment_ctime":1582730972,"is_pvip":false,"replies":[{"id":"71100","content":"dnsæˆ‘è¿™è¾¹ä¸»è¦ç»™å†…éƒ¨èµ„æºï¼Œæ¯”å¦‚mysqlåšè´Ÿè½½å‡è¡¡","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1583115131,"ip_address":"","comment_id":182232,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1582730972","product_id":100035801,"comment_content":"æˆ‘ä»¬è¿˜æœ‰dnsè´Ÿè½½å‡è¡¡ä¸€å±‚ï¼Œä¹‹ånginxè¿˜é…åˆkeeperliveåšäº†é«˜å¯ç”¨","like_count":0,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":485262,"discussion_content":"dnsæˆ‘è¿™è¾¹ä¸»è¦ç»™å†…éƒ¨èµ„æºï¼Œæ¯”å¦‚mysqlåšè´Ÿè½½å‡è¡¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583115131,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":158451,"user_name":"è‰¯è®°","can_delete":false,"product_type":"c1","uid":1033503,"ip_address":"","ucode":"F78CC56BB32D8F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c5/1f/485fcff9.jpg","comment_is_top":false,"comment_ctime":1575375029,"is_pvip":true,"replies":[{"id":"61449","content":"ä¸æ˜¯çš„ï¼Œåªæ˜¯æœ‰äº›ç»„ä»¶æ²¡æœ‰åœ¨å®é™…é¡¹ç›®ä¸­ç”¨è¿‡ï¼Œä¸æ•¢éšä¾¿è¯´~","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1576132999,"ip_address":"","comment_id":158451,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1575375029","product_id":100035801,"comment_content":"è€å¸ˆå¥½åƒå¾ˆå°‘è¯´åˆ°Spring Cloudç›¸å…³çš„ç»„ä»¶ï¼Œæœ‰çš„è¯ä¹Ÿæ˜¯ä¸€ç¬”å¸¦è¿‡ï¼Œè¯·é—®æ˜¯è¿™äº›ç»„ä»¶çš„æ€§èƒ½ä¸å¥½å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476730,"discussion_content":"ä¸æ˜¯çš„ï¼Œåªæ˜¯æœ‰äº›ç»„ä»¶æ²¡æœ‰åœ¨å®é™…é¡¹ç›®ä¸­ç”¨è¿‡ï¼Œä¸æ•¢éšä¾¿è¯´~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576132999,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157769,"user_name":"Geek_33c134","can_delete":false,"product_type":"c1","uid":1596647,"ip_address":"","ucode":"C5BBA83AABD2AC","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Ir1EdhB29109UhH7SGnVLEfEcKcGPDViaTpbS7BYXngqFghThYc093oFCTwsTLjVR7nHPokXJIPm7rbmPAU7TdQ/132","comment_is_top":false,"comment_ctime":1575256986,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"1575256986","product_id":100035801,"comment_content":"nginxèƒ½å¦å·²é›†ç¾¤çš„æ–¹å¼åŒæ—¶æä¾›å‘¢ï¼Ÿä¹Ÿå°±æ˜¯å¦‚æœæœ€å¤–å±‚ç”¨nginxæ¥åšä»£ç†çš„è¯ï¼Œç†è®ºä¸Šnginxèƒ½å¤Ÿæ‰¿å—çš„å¹¶å‘é‡ä¸º5Wï¼Œå¦‚æœ7çš„å¹¶å‘é‡æ¥çš„è¯ï¼Œæ˜¯å¦å¯ä»¥é‡‡ç”¨ä¸¤å°nginxåŒæ—¶æä¾›æœåŠ¡å‘¢ï¼Ÿï¼ˆå¦‚æœä¸å¯ä»¥nginxå½“æœ€å¤–å±‚åŒæ—¶æä¾›æœåŠ¡ï¼Œè§£å†³è¿™ç§æ–¹æ³•æ˜¯åº”è¯¥é€šè¿‡lvsæ¥æä¾›æœ€å¤–å±‚ï¼Œç„¶åè½¬å‘åˆ°ä¸¤å°nginxï¼Œä½†æ˜¯å¦‚æœlvsä¹Ÿè¾¾åˆ°äº†ç“¶é¢ˆé‚£ä¹ˆå¦‚æœæ¥è§£å†³å‘¢ï¼Ÿï¼‰","like_count":0,"discussions":[{"author":{"id":1113737,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI2icbib62icXtibTkThtyRksbuJLoTLMts7zook2S30MiaBtbz0f5JskwYicwqXkhpYfvCpuYkcvPTibEaQ/132","nickname":"xuanyuan","note":"","ucode":"1EC79B9372868F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":289377,"discussion_content":"è´Ÿè½½å‡è¡¡ä¹Ÿæœ‰é›†ç¾¤æ¨¡å¼çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594083670,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1661872,"avatar":"https://static001.geekbang.org/account/avatar/00/19/5b/b0/50bc0dd7.jpg","nickname":"å­Ÿè§å¤§ä¾ ","note":"","ucode":"428C84FB5332DF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":227869,"discussion_content":"å¯ä»¥è´­ä¹°ç¡¬ä»¶è´Ÿè½½å‡è¡¡å™¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586517196,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1033240,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJkwbyTYtSCx6Qc7cQPnnRWv38Jybh3etziaPmuP8gHcgS6FMxcdftrKgWiamH6fc2iciaicDKDVEwcEibQ/132","nickname":"sami","note":"","ucode":"9A66FCA00D8A37","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":208627,"discussion_content":"å¯ä»¥åŠ dnsè½®è¯¢å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584568309,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":156070,"user_name":"å¯’æºª","can_delete":false,"product_type":"c1","uid":1001970,"ip_address":"","ucode":"67B9F1A1C15A20","user_header":"https://static001.geekbang.org/account/avatar/00/0f/49/f2/25cfa472.jpg","comment_is_top":false,"comment_ctime":1574816964,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"1574816964","product_id":100035801,"comment_content":"è´Ÿè½½å‡è¡¡è¿˜æœ‰ä¸€ç§ç­–ç•¥ï¼šç²˜æ€§è¿æ¥ã€‚åŒä¸€å®¢æˆ·çš„è¯·æ±‚ä¼šè¢«åˆ†å‘åˆ°åŒä¸€ä¸ªæœåŠ¡å®ä¾‹ã€‚å¦‚F5çš„cookieä¸­poolå°±æ˜¯å¯¹ç›®æ ‡æœåŠ¡çš„è®°å¿†ï¼Œè¿˜æœ‰ngçš„stickyç­–ç•¥ä¹Ÿæ˜¯è¿™æ ·ã€‚","like_count":0},{"had_liked":false,"id":155218,"user_name":"æ˜Ÿç©º123","can_delete":false,"product_type":"c1","uid":1596920,"ip_address":"","ucode":"E998A7C585671B","user_header":"https://static001.geekbang.org/account/avatar/00/18/5d/f8/7de2c1cc.jpg","comment_is_top":false,"comment_ctime":1574665680,"is_pvip":false,"replies":[{"id":"60255","content":"è¿™ä¸ªæ˜¯æ ‡é…çš„ï¼Œå¯ä»¥çœ‹çœ‹~","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1575016501,"ip_address":"","comment_id":155218,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1574665680","product_id":100035801,"comment_content":"è€å¸ˆæä¾›çš„nginx_upstream_check_module æˆ‘è¦è‡ªå·±ç ”ç©¶ä¸‹ï¼Œæœ‰äº›ä¸œè¥¿ç¡®å®å…¬å¸é™åˆ¶å¤šï¼Œéƒ½æ²¡ç”¨è¿‡","like_count":0,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475694,"discussion_content":"è¿™ä¸ªæ˜¯æ ‡é…çš„ï¼Œå¯ä»¥çœ‹çœ‹~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575016501,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1596920,"avatar":"https://static001.geekbang.org/account/avatar/00/18/5d/f8/7de2c1cc.jpg","nickname":"æ˜Ÿç©º123","note":"","ucode":"E998A7C585671B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":65642,"discussion_content":"å¥½çš„ï¼Œè€å¸ˆï¼Œå·²ç»åœ¨è‡ªå·±ä¹°çš„æœåŠ¡å™¨ä¸Šè¯•äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575017992,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":154664,"user_name":"çº¦ä¹¦äºš","can_delete":false,"product_type":"c1","uid":1046714,"ip_address":"","ucode":"81EA27ADD9EC1A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f8/ba/14e05601.jpg","comment_is_top":false,"comment_ctime":1574503377,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1574503377","product_id":100035801,"comment_content":"&quot;è¯·æ±‚åŒ…è½¬å‘ä¹‹åï¼Œç”±å®¢æˆ·ç«¯å’Œåç«¯æœåŠ¡ç›´æ¥å»ºç«‹è¿æ¥...&quot;<br>è¿™é‡Œçš„å»ºç«‹è¿æ¥è¿™ä¸ªæè¿°ä¼¼ä¹ä¸å¤ªä¸¥è°¨ï¼Œå®é™…æ²¡æœ‰â€œè¿æ¥â€å¯¹å§ã€‚<br>è´Ÿè½½å‡è¡¡é™¤äº†F5è¿™ç§ç¡¬ä»¶çš„åŸºæœ¬éƒ½æ¥è§¦è¿‡äº†ï¼Œåœ¨å„ä¸ªç»´åº¦æœ‰å„ä¸ªç»´åº¦è´Ÿè½½å‡è¡¡ï¼Œæ›¾ç»æ”¹è¿‡ribbonçš„è´Ÿè½½ï¼ŒåŸç”Ÿçš„weighted responseå¤ªç®€é™‹äº†<br>å…¶å®ä¸€ç›´æœ‰ç–‘é—®ï¼Œä¸ºä»€ä¹ˆæŠŠå“åº”æ—¶é—´ä½œä¸ºæƒé‡çš„è´Ÿè½½ç®—æ³•ï¼Œè™½ç„¶æœ‰ï¼Œä½†å‡ºç°çš„ç›¸å¯¹è¾ƒå°‘ï¼Œéš¾é“ä¸å®ç”¨ï¼Œè¿˜æ˜¯è€—è´¹è®¡ç®—èµ„æºï¼Ÿ","like_count":0},{"had_liked":false,"id":154269,"user_name":"é™ˆî„ äº‰","can_delete":false,"product_type":"c1","uid":1207155,"ip_address":"","ucode":"A2A1FAC8E32F03","user_header":"https://static001.geekbang.org/account/avatar/00/12/6b/73/fbff84b5.jpg","comment_is_top":false,"comment_ctime":1574400708,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1574400708","product_id":100035801,"comment_content":"æ°å·§æœ€è¿‘åœ¨ç ”ç©¶æ€æ ·ä¼˜é›…çš„å…³é—­æœåŠ¡èŠ‚ç‚¹ï¼Œè€å¸ˆçš„è®²è§£ç»™äº†æˆ‘å¾ˆå¤šå¯å‘ã€‚<br>çœ‹æ¥nginx_upstream_check_moduleéœ€è¦æèµ·æ¥äº†(â‰–á´—â‰–)âœ§","like_count":0},{"had_liked":false,"id":154190,"user_name":"XD","can_delete":false,"product_type":"c1","uid":1079293,"ip_address":"","ucode":"DC9DCFB3841A4E","user_header":"https://static001.geekbang.org/account/avatar/00/10/77/fd/c6619535.jpg","comment_is_top":false,"comment_ctime":1574389390,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1574389390","product_id":100035801,"comment_content":"ä¸€å£æ°”è¯»å®Œã€‚å¹²è´§è¿˜æ˜¯å¾ˆå¤šçš„ã€‚","like_count":0},{"had_liked":false,"id":154063,"user_name":"Demter","can_delete":false,"product_type":"c1","uid":1158439,"ip_address":"","ucode":"BE3B6F726916CE","user_header":"https://static001.geekbang.org/account/avatar/00/11/ad/27/5556ae50.jpg","comment_is_top":false,"comment_ctime":1574372425,"is_pvip":false,"replies":[{"id":"59492","content":"æµè§ˆå™¨æˆ–è€…app","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1574642938,"ip_address":"","comment_id":154063,"utype":1}],"discussion_count":4,"race_medal":0,"score":"1574372425","product_id":100035801,"comment_content":"è¿™é‡Œè¯´çš„å®¢æˆ·ç«¯æ˜¯å•¥ï¼Œæ˜¯ç”¨æˆ·çš„æµè§ˆå™¨å—ã€‚ã€‚ã€‚","like_count":0,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475366,"discussion_content":"æµè§ˆå™¨æˆ–è€…app","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574642938,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1003104,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/4e/60/0d5aa340.jpg","nickname":"gogo","note":"","ucode":"E8F0F3B000020A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":55757,"discussion_content":"è¿™é‡Œçš„å®¢æˆ·ç«¯æŒ‡çš„å°±æ˜¯å¾®æœåŠ¡é‡Œçš„æœåŠ¡è°ƒç”¨æ–¹","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1574395414,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1158439,"avatar":"https://static001.geekbang.org/account/avatar/00/11/ad/27/5556ae50.jpg","nickname":"Demter","note":"","ucode":"BE3B6F726916CE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":55718,"discussion_content":"è°¢è°¢å¸®è§£ç­”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574392067,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1274495,"avatar":"https://static001.geekbang.org/account/avatar/00/13/72/7f/5da093c5.jpg","nickname":"æ°´ç›®æ²¾","note":"","ucode":"FDD1D15C277D58","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":55564,"discussion_content":"ä¸æ˜¯ï¼Œæµè§ˆå™¨æ€ä¹ˆå¯èƒ½è¢«ä½ çš„åº”ç”¨ç¨‹åºæ§åˆ¶ã€‚è¿™é‡Œçš„å®¢æˆ·ç«¯æ˜¯æŒ‡è¦è¿›è¡ŒRPCè°ƒç”¨çš„ç¨‹åºã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574384373,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}