{"id":381423,"title":"06ï½œè‡ªå®šä¹‰Hooks ï¼šå››ä¸ªå…¸å‹çš„ä½¿ç”¨åœºæ™¯","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯ç‹æ²›ã€‚</p><p>æˆ‘åœ¨å¼€ç¯‡è¯å°±è¯´è¿‡ï¼Œè¦ç”¨å¥½ React Hooksï¼Œå¾ˆé‡è¦çš„ä¸€ç‚¹ï¼Œå°±æ˜¯è¦èƒ½å¤Ÿä» Hooks çš„è§’åº¦å»æ€è€ƒé—®é¢˜ã€‚è¦åšåˆ°è¿™ä¸€ç‚¹å…¶å®ä¹Ÿä¸éš¾ï¼Œå°±æ˜¯åœ¨é‡åˆ°ä¸€ä¸ªåŠŸèƒ½å¼€å‘çš„éœ€æ±‚æ—¶ï¼Œé¦–å…ˆé—®è‡ªå·±ä¸€ä¸ªé—®é¢˜ï¼š<strong>è¿™ä¸ªåŠŸèƒ½ä¸­çš„å“ªäº›é€»è¾‘å¯ä»¥æŠ½å‡ºæ¥æˆä¸ºç‹¬ç«‹çš„ Hooksï¼Ÿ</strong></p><p>è¿™ä¹ˆé—®çš„ç›®çš„ï¼Œæ˜¯ä¸ºäº†è®©æˆ‘ä»¬å°½å¯èƒ½åœ°æŠŠä¸šåŠ¡é€»è¾‘æ‹†æˆç‹¬ç«‹çš„ Hooks ï¼Œè¿™æ ·æœ‰åŠ©äºå®ç°ä»£ç çš„æ¨¡å—åŒ–å’Œè§£è€¦ï¼ŒåŒæ—¶ä¹Ÿæ–¹ä¾¿åé¢çš„ç»´æŠ¤ã€‚å¦‚æœä½ åŸºç¡€ç¯‡çš„çŸ¥è¯†æŒæ¡å¾—ç‰¢å›ºçš„è¯ï¼Œå°±ä¼šå‘ç°ï¼Œè¿™æ˜¯å› ä¸º Hooks æœ‰ä¸¤ä¸ªéå¸¸æ ¸å¿ƒçš„ä¼˜ç‚¹ï¼š</p><ul>\n<li>ä¸€æ˜¯æ–¹ä¾¿è¿›è¡Œé€»è¾‘å¤ç”¨ï¼›</li>\n<li>äºŒæ˜¯å¸®åŠ©å…³æ³¨åˆ†ç¦»ã€‚</li>\n</ul><p>æ¥ä¸‹æ¥æˆ‘å°±é€šè¿‡ä¸€ä¸ªæ¡ˆä¾‹ï¼Œæ¥å¸¦ä½ è®¤è¯†ä»€ä¹ˆæ˜¯è‡ªå®šä¹‰Hooksï¼Œä»¥åŠå¦‚ä½•åˆ›å»ºã€‚ç„¶åï¼Œæˆ‘ä»¬å†é€šè¿‡å…¶å®ƒ3ä¸ªå…¸å‹æ¡ˆä¾‹ï¼Œæ¥çœ‹çœ‹è‡ªå®šä¹‰Hooks å…·ä½“æœ‰ä»€ä¹ˆç”¨ï¼Œä»è€Œå¸®ä½ æŒæ¡ä» Hooks è§’åº¦å»è§£å†³é—®é¢˜çš„æ€è€ƒæ–¹å¼ã€‚</p><h1>å¦‚ä½•åˆ›å»ºè‡ªå®šä¹‰ Hooksï¼Ÿ</h1><p>è‡ªå®šä¹‰ Hooks åœ¨å½¢å¼ä¸Šå…¶å®éå¸¸ç®€å•ï¼Œå°±æ˜¯<strong>å£°æ˜ä¸€ä¸ªåå­—ä»¥ use å¼€å¤´çš„å‡½æ•°</strong>ï¼Œæ¯”å¦‚ useCounterã€‚è¿™ä¸ªå‡½æ•°åœ¨å½¢å¼ä¸Šå’Œæ™®é€šçš„ JavaScript å‡½æ•°æ²¡æœ‰ä»»ä½•åŒºåˆ«ï¼Œä½ å¯ä»¥ä¼ é€’ä»»æ„å‚æ•°ç»™è¿™ä¸ª Hookï¼Œä¹Ÿå¯ä»¥è¿”å›ä»»ä½•å€¼ã€‚</p><p>ä½†æ˜¯è¦æ³¨æ„ï¼ŒHooks å’Œæ™®é€šå‡½æ•°åœ¨è¯­ä¹‰ä¸Šæ˜¯æœ‰åŒºåˆ«çš„ï¼Œå°±åœ¨äº<strong>å‡½æ•°ä¸­æœ‰æ²¡æœ‰ç”¨åˆ°å…¶å®ƒ Hooksã€‚</strong></p><!-- [[[read_end]]] --><p>ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿå°±æ˜¯è¯´å¦‚æœä½ åˆ›å»ºäº†ä¸€ä¸ª useXXX çš„å‡½æ•°ï¼Œä½†æ˜¯å†…éƒ¨å¹¶æ²¡æœ‰ç”¨ä»»ä½•å…¶å®ƒ Hooksï¼Œé‚£ä¹ˆè¿™ä¸ªå‡½æ•°å°±ä¸æ˜¯ä¸€ä¸ª Hookï¼Œè€Œåªæ˜¯ä¸€ä¸ªæ™®é€šçš„å‡½æ•°ã€‚ä½†æ˜¯å¦‚æœç”¨äº†å…¶å®ƒ Hooks ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯ä¸€ä¸ª Hookã€‚</p><p>ä¸¾ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œåœ¨ç¬¬3è®²ä¸­æˆ‘ä»¬çœ‹åˆ°è¿‡ä¸€ä¸ªç®€å•è®¡æ•°å™¨çš„å®ç°ï¼Œå½“æ—¶æŠŠä¸šåŠ¡é€»è¾‘éƒ½å†™åœ¨äº†å‡½æ•°ç»„ä»¶å†…éƒ¨ï¼Œä½†å…¶å®æ˜¯å¯ä»¥æŠŠä¸šåŠ¡é€»è¾‘æå–å‡ºæ¥æˆä¸ºä¸€ä¸ª Hookã€‚æ¯”å¦‚ä¸‹é¢çš„ä»£ç ï¼š</p><pre><code>import { useState, useCallback }from 'react';\n \nfunction useCounter() {\n  // å®šä¹‰ count è¿™ä¸ª state ç”¨äºä¿å­˜å½“å‰æ•°å€¼\n  const [count, setCount] = useState(0);\n  // å®ç°åŠ  1 çš„æ“ä½œ\n  const increment = useCallback(() =&gt; setCount(count + 1), [count]);\n  // å®ç°å‡ 1 çš„æ“ä½œ\n  const decrement = useCallback(() =&gt; setCount(count - 1), [count]);\n  // é‡ç½®è®¡æ•°å™¨\n  const reset = useCallback(() =&gt; setCount(0), []);\n  \n  // å°†ä¸šåŠ¡é€»è¾‘çš„æ“ä½œ export å‡ºå»ä¾›è°ƒç”¨è€…ä½¿ç”¨\n  return { count, increment, decrement, reset };\n}\n</code></pre><p>æœ‰äº†è¿™ä¸ª Hookï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨ç»„ä»¶ä¸­ä½¿ç”¨å®ƒï¼Œæ¯”å¦‚ä¸‹é¢çš„ä»£ç ï¼š</p><pre><code>import React from 'react';\n\nfunction Counter() {\n  // è°ƒç”¨è‡ªå®šä¹‰ Hook\n  const { count, increment, decrement, reset } = useCounter();\n\n  // æ¸²æŸ“ UI\n  return (\n    &lt;div&gt;\n      &lt;button onClick={decrement}&gt; - &lt;/button&gt;\n      &lt;p&gt;{count}&lt;/p&gt;\n      &lt;button onClick={increment}&gt; + &lt;/button&gt;\n      &lt;button onClick={reset}&gt; reset &lt;/button&gt;\n    &lt;/div&gt;\n  );\n}\n</code></pre><p>åœ¨è¿™æ®µä»£ç ä¸­ï¼Œæˆ‘ä»¬æŠŠåŸæ¥åœ¨å‡½æ•°ç»„ä»¶ä¸­å®ç°çš„é€»è¾‘æå–äº†å‡ºæ¥ï¼Œæˆä¸ºä¸€ä¸ªå•ç‹¬çš„ Hookï¼Œ<strong>ä¸€æ–¹é¢èƒ½è®©è¿™ä¸ªé€»è¾‘å¾—åˆ°é‡ç”¨ï¼Œå¦å¤–ä¸€æ–¹é¢ä¹Ÿèƒ½è®©ä»£ç æ›´åŠ è¯­ä¹‰åŒ–</strong>ï¼Œ<strong>å¹¶ä¸”æ˜“äºç†è§£å’Œç»´æŠ¤ã€‚</strong></p><p>ä»è¿™ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è‡ªå®šä¹‰ Hooks çš„ä¸¤ä¸ªç‰¹ç‚¹ï¼š</p><ol>\n<li>åå­—ä¸€å®šæ˜¯ä»¥ use å¼€å¤´çš„å‡½æ•°ï¼Œè¿™æ · React æ‰èƒ½å¤ŸçŸ¥é“è¿™ä¸ªå‡½æ•°æ˜¯ä¸€ä¸ª Hookï¼›</li>\n<li>å‡½æ•°å†…éƒ¨ä¸€å®šè°ƒç”¨äº†å…¶å®ƒçš„ Hooksï¼Œå¯ä»¥æ˜¯å†…ç½®çš„ Hooksï¼Œä¹Ÿå¯ä»¥æ˜¯å…¶å®ƒè‡ªå®šä¹‰ Hooksã€‚è¿™æ ·æ‰èƒ½å¤Ÿè®©ç»„ä»¶åˆ·æ–°ï¼Œæˆ–è€…å»äº§ç”Ÿå‰¯ä½œç”¨ã€‚</li>\n</ol><p>å½“ç„¶ï¼Œè¿™åªæ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„ä¾‹å­ï¼Œå®ç°äº†è®¡æ•°å™¨ä¸šåŠ¡é€»è¾‘çš„æ‹†åˆ†å’Œé‡ç”¨ã€‚ä¸è¿‡é€šè¿‡è¿™ä¸ªä¾‹å­ï¼Œä½ ä¹Ÿçœ‹åˆ°äº†åˆ›å»ºè‡ªå®šä¹‰ Hook æ˜¯å¦‚æ­¤ä¹‹ç®€å•ï¼Œå’Œè¿‡å»çš„é«˜é˜¶ç»„ä»¶è®¾è®¡æ¨¡å¼ç›¸æ¯”ï¼Œç®€ç›´æ˜¯å¤©ä¸Šåœ°ä¸‹çš„åŒºåˆ«ã€‚ä¹Ÿæ­£å› å¦‚æ­¤ï¼ŒHooks å‡ºç°åå°±å¾—åˆ°äº†è¿…é€Ÿçš„æ™®åŠã€‚</p><p>é‚£ä¹ˆï¼Œåœ¨æ—¥å¸¸å¼€å‘çš„æ—¶å€™ï¼Œé™¤äº†è§£è€¦ä¸šåŠ¡ç›¸å…³çš„é€»è¾‘ï¼Œè¿˜æœ‰å“ªäº›åœºæ™¯éœ€è¦å»åˆ›å»ºè‡ªå®šä¹‰ Hooks å‘¢ï¼Ÿä¸‹é¢æˆ‘å°±å†ç»™ä½ ä»‹ç»ä¸‰ä¸ªå…¸å‹çš„ä¸šåŠ¡åœºæ™¯ã€‚</p><h1>å°è£…é€šç”¨é€»è¾‘ï¼šuseAsync</h1><p>åœ¨ç»„ä»¶çš„å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæœ‰ä¸€äº›å¸¸ç”¨çš„é€šç”¨é€»è¾‘ã€‚è¿‡å»å¯èƒ½ä¼šå› ä¸ºé€»è¾‘é‡ç”¨æ¯”è¾ƒç¹çï¼Œè€Œç»å¸¸åœ¨æ¯ä¸ªç»„ä»¶ä¸­å»è‡ªå·±å®ç°ï¼Œé€ æˆç»´æŠ¤çš„å›°éš¾ã€‚ä½†ç°åœ¨æœ‰äº† Hooksï¼Œå°±å¯ä»¥å°†æ›´å¤šçš„é€šç”¨é€»è¾‘é€šè¿‡ Hooks çš„å½¢å¼è¿›è¡Œå°è£…ï¼Œæ–¹ä¾¿è¢«ä¸åŒçš„ç»„ä»¶é‡ç”¨ã€‚</p><p>æ¯”å¦‚è¯´ï¼Œåœ¨æ—¥å¸¸ UI çš„å¼€å‘ä¸­ï¼Œæœ‰ä¸€ä¸ªæœ€å¸¸è§çš„éœ€æ±‚ï¼š<strong>å‘èµ·å¼‚æ­¥è¯·æ±‚è·å–æ•°æ®å¹¶æ˜¾ç¤ºåœ¨ç•Œé¢ä¸Š</strong>ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¸ä»…è¦å…³å¿ƒè¯·æ±‚æ­£ç¡®è¿”å›æ—¶ï¼ŒUI ä¼šå¦‚ä½•å±•ç°æ•°æ®ï¼›è¿˜éœ€è¦å¤„ç†è¯·æ±‚å‡ºé”™ï¼Œä»¥åŠå…³æ³¨ Loading çŠ¶æ€åœ¨ UI ä¸Šå¦‚ä½•æ˜¾ç¤ºã€‚</p><p>æˆ‘ä»¬å¯ä»¥é‡æ–°çœ‹ä¸‹åœ¨ç¬¬1è®²ä¸­çœ‹åˆ°çš„å¼‚æ­¥è¯·æ±‚çš„ä¾‹å­ï¼Œä» Server ç«¯è·å–ç”¨æˆ·åˆ—è¡¨ï¼Œå¹¶æ˜¾ç¤ºåœ¨ç•Œé¢ä¸Šï¼š</p><pre><code>import React from &quot;react&quot;;\n\nexport default function UserList() {\n  // ä½¿ç”¨ä¸‰ä¸ª state åˆ†åˆ«ä¿å­˜ç”¨æˆ·åˆ—è¡¨ï¼Œloading çŠ¶æ€å’Œé”™è¯¯çŠ¶æ€\n  const [users, setUsers] = React.useState([]);\n  const [loading, setLoading] = React.useState(false);\n  const [error, setError] = React.useState(null);\n\n  // å®šä¹‰è·å–ç”¨æˆ·çš„å›è°ƒå‡½æ•°\n  const fetchUsers = async () =&gt; {\n    setLoading(true);\n    try {\n      const res = await fetch(&quot;https://reqres.in/api/users/&quot;);\n      const json = await res.json();\n      // è¯·æ±‚æˆåŠŸåå°†ç”¨æˆ·æ•°æ®æ”¾å…¥ state\n      setUsers(json.data);\n    } catch (err) {\n      // è¯·æ±‚å¤±è´¥å°†é”™è¯¯çŠ¶æ€æ”¾å…¥ state\n      setError(err);\n    }\n    setLoading(false);\n  };\n\n  return (\n    &lt;div className=&quot;user-list&quot;&gt;\n      &lt;button onClick={fetchUsers} disabled={loading}&gt;\n        {loading ? &quot;Loading...&quot; : &quot;Show Users&quot;}\n      &lt;/button&gt;\n      {error &amp;&amp; \n        &lt;div style={{ color: &quot;red&quot; }}&gt;Failed: {String(error)}&lt;/div&gt;\n      }\n      &lt;br /&gt;\n      &lt;ul&gt;\n        {users &amp;&amp; users.length &gt; 0 &amp;&amp;\n          users.map((user) =&gt; {\n            return &lt;li key={user.id}&gt;{user.first_name}&lt;/li&gt;;\n          })}\n      &lt;/ul&gt;\n    &lt;/div&gt;\n  );\n}\n</code></pre><p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å®šä¹‰äº† usersã€loading å’Œ error ä¸‰ä¸ªçŠ¶æ€ã€‚å¦‚æœæˆ‘ä»¬åœ¨å¼‚æ­¥è¯·æ±‚çš„ä¸åŒé˜¶æ®µå»è®¾ç½®ä¸åŒçš„çŠ¶æ€ï¼Œè¿™æ · UI æœ€ç»ˆèƒ½å¤Ÿæ ¹æ®è¿™äº›çŠ¶æ€å±•ç°å‡ºæ¥ã€‚åœ¨æ¯ä¸ªéœ€è¦å¼‚æ­¥è¯·æ±‚çš„ç»„ä»¶ä¸­ï¼Œå…¶å®éƒ½éœ€è¦é‡å¤ç›¸åŒçš„é€»è¾‘ã€‚</p><p>äº‹å®ä¸Šï¼Œåœ¨å¤„ç†è¿™ç±»è¯·æ±‚çš„æ—¶å€™ï¼Œæ¨¡å¼éƒ½æ˜¯ç±»ä¼¼çš„ï¼Œé€šå¸¸éƒ½ä¼šéµå¾ªä¸‹é¢æ­¥éª¤ï¼š</p><ol>\n<li>åˆ›å»º dataï¼Œloadingï¼Œerror è¿™3ä¸ª stateï¼›</li>\n<li>è¯·æ±‚å‘å‡ºåï¼Œè®¾ç½® loading state ä¸º trueï¼›</li>\n<li>è¯·æ±‚æˆåŠŸåï¼Œå°†è¿”å›çš„æ•°æ®æ”¾åˆ°æŸä¸ª state ä¸­ï¼Œå¹¶å°† loading state è®¾ä¸º falseï¼›</li>\n<li>è¯·æ±‚å¤±è´¥åï¼Œè®¾ç½® error state ä¸º trueï¼Œå¹¶å°† loading state è®¾ä¸º falseã€‚</li>\n</ol><p>æœ€åï¼ŒåŸºäº dataã€loadingã€error è¿™3ä¸ª state çš„æ•°æ®ï¼ŒUI å°±å¯ä»¥æ­£ç¡®åœ°æ˜¾ç¤ºæ•°æ®ï¼Œæˆ–è€… loadingã€error è¿™äº›åé¦ˆç»™ç”¨æˆ·äº†ã€‚</p><p>æ‰€ä»¥ï¼Œé€šè¿‡åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰ Hookï¼Œå¯ä»¥å¾ˆå¥½åœ°å°†è¿™æ ·çš„é€»è¾‘æå–å‡ºæ¥ï¼Œæˆä¸ºä¸€ä¸ªå¯é‡ç”¨çš„æ¨¡å—ã€‚æ¯”å¦‚ä»£ç å¯ä»¥è¿™æ ·å®ç°ï¼š</p><pre><code>import { useState } from 'react';\n\nconst useAsync = (asyncFunction) =&gt; {\n  // è®¾ç½®ä¸‰ä¸ªå¼‚æ­¥é€»è¾‘ç›¸å…³çš„ state\n  const [data, setData] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  // å®šä¹‰ä¸€ä¸ª callback ç”¨äºæ‰§è¡Œå¼‚æ­¥é€»è¾‘\n  const execute = useCallback(() =&gt; {\n    // è¯·æ±‚å¼€å§‹æ—¶ï¼Œè®¾ç½® loading ä¸º trueï¼Œæ¸…é™¤å·²æœ‰æ•°æ®å’Œ error çŠ¶æ€\n    setLoading(true);\n    setData(null);\n    setError(null);\n    return asyncFunction()\n      .then((response) =&gt; {\n        // è¯·æ±‚æˆåŠŸæ—¶ï¼Œå°†æ•°æ®å†™è¿› stateï¼Œè®¾ç½® loading ä¸º false\n        setData(response);\n        setLoading(false);\n      })\n      .catch((error) =&gt; {\n        // è¯·æ±‚å¤±è´¥æ—¶ï¼Œè®¾ç½® loading ä¸º falseï¼Œå¹¶è®¾ç½®é”™è¯¯çŠ¶æ€\n        setError(error);\n        setLoading(false);\n      });\n  }, [asyncFunction]);\n\n  return { execute, loading, data, error };\n};\n</code></pre><p>é‚£ä¹ˆæœ‰äº†è¿™ä¸ª Hookï¼Œæˆ‘ä»¬åœ¨ç»„ä»¶ä¸­å°±åªéœ€è¦å…³å¿ƒä¸ä¸šåŠ¡é€»è¾‘ç›¸å…³çš„éƒ¨åˆ†ã€‚æ¯”å¦‚ä»£ç å¯ä»¥ç®€åŒ–æˆè¿™æ ·çš„å½¢å¼ï¼š</p><pre><code>import React from &quot;react&quot;;\nimport useAsync from './useAsync';\n\nexport default function UserList() {\n  // é€šè¿‡ useAsync è¿™ä¸ªå‡½æ•°ï¼Œåªéœ€è¦æä¾›å¼‚æ­¥é€»è¾‘çš„å®ç°\n  const {\n    execute: fetchUsers,\n    data: users,\n    loading,\n    error,\n  } = useAsync(async () =&gt; {\n    const res = await fetch(&quot;https://reqres.in/api/users/&quot;);\n    const json = await res.json();\n    return json.data;\n  });\n  \n  return (\n    // æ ¹æ®çŠ¶æ€æ¸²æŸ“ UI...\n  );\n}\n</code></pre><p>é€šè¿‡è¿™ä¸ªä¾‹å­å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬<strong>åˆ©ç”¨äº† Hooks èƒ½å¤Ÿç®¡ç† React ç»„ä»¶çŠ¶æ€çš„èƒ½åŠ›ï¼Œå°†ä¸€ä¸ªç»„ä»¶ä¸­çš„æŸä¸€éƒ¨åˆ†çŠ¶æ€ç‹¬ç«‹å‡ºæ¥ï¼Œä»è€Œå®ç°äº†é€šç”¨é€»è¾‘çš„é‡ç”¨</strong>ã€‚</p><p>ä¸è¿‡åœ¨è¿™é‡Œä½ å¯èƒ½ä¼šæœ‰ä¸€ä¸ªç–‘é—®ï¼šè¿™ç§ç±»å‹çš„å°è£…æˆ‘å†™ä¸€ä¸ªå·¥å…·ç±»ä¸å°±å¯ä»¥äº†ï¼Ÿä¸ºä»€ä¹ˆä¸€å®šè¦é€šè¿‡ Hooks è¿›è¡Œå°è£…å‘¢ï¼Ÿ</p><p>ç­”æ¡ˆå¾ˆå®¹æ˜“å°±èƒ½æƒ³åˆ°ã€‚å› ä¸ºåœ¨ Hooks ä¸­ï¼Œä½ å¯ä»¥ç®¡ç†å½“å‰ç»„ä»¶çš„ stateï¼Œä»è€Œå°†æ›´å¤šçš„é€»è¾‘å†™åœ¨å¯é‡ç”¨çš„ Hooks ä¸­ã€‚ä½†æ˜¯è¦çŸ¥é“ï¼Œåœ¨æ™®é€šçš„å·¥å…·ç±»ä¸­æ˜¯æ— æ³•ç›´æ¥ä¿®æ”¹ç»„ä»¶ state çš„ï¼Œé‚£ä¹ˆä¹Ÿå°±æ— æ³•åœ¨æ•°æ®æ”¹å˜çš„æ—¶å€™è§¦å‘ç»„ä»¶çš„é‡æ–°æ¸²æŸ“ã€‚</p><h1>ç›‘å¬æµè§ˆå™¨çŠ¶æ€ï¼šuseScroll</h1><p>è™½ç„¶ React ç»„ä»¶åŸºæœ¬ä¸Šä¸éœ€è¦å…³å¿ƒå¤ªå¤šçš„æµè§ˆå™¨ APIï¼Œä½†æ˜¯æœ‰æ—¶å€™å´æ˜¯å¿…é¡»çš„ï¼š</p><ul>\n<li>ç•Œé¢éœ€è¦æ ¹æ®åœ¨çª—å£å¤§å°å˜åŒ–é‡æ–°å¸ƒå±€ï¼›</li>\n<li>åœ¨é¡µé¢æ»šåŠ¨æ—¶ï¼Œéœ€è¦æ ¹æ®æ»šåŠ¨æ¡ä½ç½®ï¼Œæ¥å†³å®šæ˜¯å¦æ˜¾ç¤ºä¸€ä¸ªâ€œè¿”å›é¡¶éƒ¨â€çš„æŒ‰é’®ã€‚</li>\n</ul><p>è¿™éƒ½éœ€è¦ç”¨åˆ°æµè§ˆå™¨çš„ API æ¥ç›‘å¬è¿™äº›çŠ¶æ€çš„å˜åŒ–ã€‚é‚£ä¹ˆæˆ‘ä»¬å°±ä»¥æ»šåŠ¨æ¡ä½ç½®çš„åœºæ™¯ä¸ºä¾‹ï¼Œæ¥çœ‹çœ‹åº”è¯¥å¦‚ä½•ç”¨ Hooks ä¼˜é›…åœ°ç›‘å¬æµè§ˆå™¨çŠ¶æ€ã€‚</p><p>æ­£å¦‚ Hooks çš„å­—é¢æ„æ€æ˜¯â€œé’©å­â€ï¼Œå®ƒå¸¦æ¥çš„ä¸€å¤§å¥½å¤„å°±æ˜¯ï¼š<strong>å¯ä»¥è®© React çš„ç»„ä»¶ç»‘å®šåœ¨ä»»ä½•å¯èƒ½çš„æ•°æ®æºä¸Šã€‚è¿™æ ·å½“æ•°æ®æºå‘ç”Ÿå˜åŒ–æ—¶ï¼Œç»„ä»¶èƒ½å¤Ÿè‡ªåŠ¨åˆ·æ–°</strong>ã€‚æŠŠè¿™ä¸ªå¥½å¤„å¯¹åº”åˆ°æ»šåŠ¨æ¡ä½ç½®è¿™ä¸ªåœºæ™¯å°±æ˜¯ï¼šç»„ä»¶éœ€è¦ç»‘å®šåˆ°å½“å‰æ»šåŠ¨æ¡çš„ä½ç½®æ•°æ®ä¸Šã€‚</p><p>è™½ç„¶è¿™ä¸ªé€»è¾‘åœ¨å‡½æ•°ç»„ä»¶ä¸­å¯ä»¥ç›´æ¥å®ç°ï¼Œä½†æ˜¯æŠŠè¿™ä¸ªé€»è¾‘å®ç°ä¸ºä¸€ä¸ªç‹¬ç«‹çš„Hooksï¼Œæ—¢å¯ä»¥è¾¾åˆ°é€»è¾‘é‡ç”¨ï¼Œåœ¨è¯­ä¹‰ä¸Šä¹Ÿæ›´åŠ æ¸…æ™°ã€‚è¿™ä¸ªå’Œä¸Šé¢çš„ useAsync çš„ä½œç”¨æ˜¯éå¸¸ç±»ä¼¼çš„ã€‚</p><p>æˆ‘ä»¬å¯ä»¥ç›´æ¥æ¥çœ‹è¿™ä¸ª Hooks åº”è¯¥å¦‚ä½•å®ç°ï¼š</p><pre><code>import { useState, useEffect } from 'react';\n\n// è·å–æ¨ªå‘ï¼Œçºµå‘æ»šåŠ¨æ¡ä½ç½®\nconst getPosition = () =&gt; {\n  return {\n    x: document.body.scrollLeft,\n    y: document.body.scrollTop,\n  };\n};\nconst useScroll = () =&gt; {\n  // å®šä¸€ä¸ª position è¿™ä¸ª state ä¿å­˜æ»šåŠ¨æ¡ä½ç½®\n  const [position, setPosition] = useState(getPosition());\n  useEffect(() =&gt; {\n    const handler = () =&gt; {\n      setPosition(getPosition(document));\n    };\n    // ç›‘å¬ scroll äº‹ä»¶ï¼Œæ›´æ–°æ»šåŠ¨æ¡ä½ç½®\n    document.addEventListener(&quot;scroll&quot;, handler);\n    return () =&gt; {\n      // ç»„ä»¶é”€æ¯æ—¶ï¼Œå–æ¶ˆäº‹ä»¶ç›‘å¬\n      document.removeEventListener(&quot;scroll&quot;, handler);\n    };\n  }, []);\n  return position;\n};\n\n</code></pre><p>æœ‰äº†è¿™ä¸ª Hookï¼Œä½ å°±å¯ä»¥éå¸¸æ–¹ä¾¿åœ°ç›‘å¬å½“å‰æµè§ˆå™¨çª—å£çš„æ»šåŠ¨æ¡ä½ç½®äº†ã€‚æ¯”å¦‚ä¸‹é¢çš„ä»£ç å°±å±•ç¤ºäº†â€œè¿”å›é¡¶éƒ¨â€è¿™æ ·ä¸€ä¸ªåŠŸèƒ½çš„å®ç°ï¼š</p><pre><code>import React, { useCallback } from 'react';\nimport useScroll from './useScroll';\n\nfunction ScrollTop() {\n  const { y } = useScroll();\n\n  const goTop = useCallback(() =&gt; {\n    document.body.scrollTop = 0;\n  }, []);\n\n  const style = {\n    position: &quot;fixed&quot;,\n    right: &quot;10px&quot;,\n    bottom: &quot;10px&quot;,\n  };\n  // å½“æ»šåŠ¨æ¡ä½ç½®çºµå‘è¶…è¿‡ 300 æ—¶ï¼Œæ˜¾ç¤ºè¿”å›é¡¶éƒ¨æŒ‰é’®\n  if (y &gt; 300) {\n    return (\n      &lt;button onClick={goTop} style={style}&gt;\n        Back to Top\n      &lt;/button&gt;\n    );\n  }\n  // å¦åˆ™ä¸ render ä»»ä½• UI\n  return null;\n}\n\n</code></pre><p>é€šè¿‡è¿™ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†å¦‚ä½•å°†æµè§ˆå™¨çŠ¶æ€å˜æˆå¯è¢« React ç»„ä»¶ç»‘å®šçš„æ•°æ®æºï¼Œä»è€Œåœ¨ä½¿ç”¨ä¸Šæ›´åŠ ä¾¿æ·å’Œç›´è§‚ã€‚å½“ç„¶ï¼Œé™¤äº†çª—å£å¤§å°ã€æ»šåŠ¨æ¡ä½ç½®è¿™äº›çŠ¶æ€ï¼Œè¿˜æœ‰å…¶å®ƒä¸€äº›æ•°æ®ä¹Ÿå¯ä»¥è¿™æ ·æ“ä½œï¼Œæ¯”å¦‚ cookiesï¼ŒlocalStorage, URLï¼Œç­‰ç­‰ã€‚ä½ éƒ½å¯ä»¥é€šè¿‡è¿™æ ·çš„æ–¹æ³•æ¥å®ç°ã€‚</p><h1>æ‹†åˆ†å¤æ‚ç»„ä»¶</h1><p>å‡½æ•°ç»„ä»¶è™½ç„¶å¾ˆå®¹æ˜“ä¸Šæ‰‹ï¼Œä½†æ˜¯å½“æŸä¸ªç»„ä»¶åŠŸèƒ½è¶Šæ¥è¶Šå¤æ‚çš„æ—¶å€™ï¼Œæˆ‘å‘ç°å¾ˆå¤šåŒå­¦ä¼šå‡ºç°ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯ç»„ä»¶ä»£ç å¾ˆå®¹æ˜“å˜å¾—ç‰¹åˆ«é•¿ï¼Œæ¯”å¦‚è¶…è¿‡500è¡Œï¼Œç”šè‡³1000è¡Œã€‚è¿™å°±å˜å¾—éå¸¸éš¾ç»´æŠ¤äº†ã€‚</p><p>è®¾æƒ³å½“ä½ æ¥æ‰‹æŸä¸ªé¡¹ç›®ï¼Œå‘ç°ä¸€ä¸ªå‡½æ•°åŠ¨è¾„å°±è¶…è¿‡äº†500è¡Œï¼Œé‚£ä¼šæ˜¯ä»€ä¹ˆæ„Ÿå—ï¼Ÿæ‰€ä»¥<strong>â€œä¿æŒæ¯ä¸ªå‡½æ•°çš„çŸ­å°â€</strong>è¿™æ ·é€šç”¨çš„æœ€ä½³å®è·µï¼ŒåŒæ ·é€‚ç”¨äºå‡½æ•°ç»„ä»¶ã€‚åªæœ‰è¿™æ ·ï¼Œæ‰èƒ½è®©ä»£ç å§‹ç»ˆæ˜“äºç†è§£å’Œç»´æŠ¤ã€‚</p><p>é‚£ä¹ˆç°åœ¨çš„å…³é”®é—®é¢˜å°±æ˜¯ï¼Œæ€ä¹ˆæ‰èƒ½è®©å‡½æ•°ç»„ä»¶ä¸ä¼šå¤ªè¿‡å†—é•¿å‘¢ï¼Ÿåšæ³•å¾ˆç®€å•ï¼Œå°±æ˜¯<strong>å°½é‡å°†ç›¸å…³çš„é€»è¾‘åšæˆç‹¬ç«‹çš„ Hooksï¼Œç„¶ååœ¨å‡½æ•°ç»„ä¸­ä½¿ç”¨è¿™äº› Hooksï¼Œé€šè¿‡å‚æ•°ä¼ é€’å’Œè¿”å›å€¼è®© Hooks ä¹‹é—´å®Œæˆäº¤äº’</strong>ã€‚</p><p>è¿™é‡Œå¯ä»¥æ³¨æ„ä¸€ç‚¹ï¼Œæ‹†åˆ†é€»è¾‘çš„ç›®çš„ä¸ä¸€å®šæ˜¯ä¸ºäº†é‡ç”¨ï¼Œè€Œå¯ä»¥æ˜¯ä»…ä»…ä¸ºäº†ä¸šåŠ¡é€»è¾‘çš„éš”ç¦»ã€‚æ‰€ä»¥åœ¨è¿™ä¸ªåœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬ä¸ä¸€å®šè¦æŠŠ Hooks æ”¾åˆ°ç‹¬ç«‹çš„æ–‡ä»¶ä¸­ï¼Œè€Œæ˜¯å¯ä»¥å’Œå‡½æ•°ç»„ä»¶å†™åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ã€‚è¿™ä¹ˆåšçš„åŸå› å°±åœ¨äºï¼Œè¿™äº› Hooks æ˜¯å’Œå½“å‰å‡½æ•°ç»„ä»¶ç´§å¯†ç›¸å…³çš„ï¼Œæ‰€ä»¥å†™åˆ°ä¸€èµ·ï¼Œåè€Œæ›´å®¹æ˜“é˜…è¯»å’Œç†è§£ã€‚</p><p>ä¸ºäº†è®©ä½ å¯¹è¿™ä¸€ç‚¹æœ‰æ›´ç›´è§‚çš„æ„Ÿå—ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä¾‹å­ã€‚è®¾æƒ³ç°åœ¨æœ‰è¿™æ ·ä¸€ä¸ªéœ€æ±‚ï¼šæˆ‘ä»¬éœ€è¦å±•ç¤ºä¸€ä¸ªåšå®¢æ–‡ç« çš„åˆ—è¡¨ï¼Œå¹¶ä¸”æœ‰ä¸€åˆ—è¦æ˜¾ç¤ºæ–‡ç« çš„åˆ†ç±»ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬è¿˜éœ€è¦æä¾›è¡¨æ ¼è¿‡æ»¤åŠŸèƒ½ï¼Œä»¥ä¾¿èƒ½å¤Ÿåªæ˜¾ç¤ºæŸä¸ªåˆ†ç±»çš„æ–‡ç« ã€‚</p><p>ä¸ºäº†æ”¯æŒè¿‡æ»¤åŠŸèƒ½ï¼Œåç«¯æä¾›äº†ä¸¤ä¸ª APIï¼šä¸€ä¸ªç”¨äºè·å–æ–‡ç« çš„åˆ—è¡¨ï¼Œå¦ä¸€ä¸ªç”¨äºè·å–æ‰€æœ‰çš„åˆ†ç±»ã€‚è¿™å°±éœ€è¦æˆ‘ä»¬åœ¨å‰ç«¯å°†æ–‡ç« åˆ—è¡¨è¿”å›çš„æ•°æ®åˆ†ç±» ID æ˜ å°„åˆ°åˆ†ç±»çš„åå­—ï¼Œä»¥ä¾¿æ˜¾ç¤ºåœ¨åˆ—è¡¨é‡Œã€‚</p><p>è¿™æ—¶å€™ï¼Œå¦‚æœæŒ‰ç…§ç›´è§‚çš„æ€è·¯å»å®ç°ï¼Œé€šå¸¸éƒ½ä¼šæŠŠé€»è¾‘éƒ½å†™åœ¨ä¸€ä¸ªç»„ä»¶é‡Œï¼Œæ¯”å¦‚ç±»ä¼¼ä¸‹é¢çš„ä»£ç ï¼š</p><pre><code>function BlogList() {\n  // è·å–æ–‡ç« åˆ—è¡¨...\n  // è·å–åˆ†ç±»åˆ—è¡¨...\n  // ç»„åˆæ–‡ç« æ•°æ®å’Œåˆ†ç±»æ•°æ®...\n  // æ ¹æ®é€‰æ‹©çš„åˆ†ç±»è¿‡æ»¤æ–‡ç« ...\n  \n  // æ¸²æŸ“ UI ...\n}\n</code></pre><p>ä½ å¯ä»¥æƒ³ä¸€ä¸‹ï¼Œå¦‚æœä½ æ˜¯åœ¨å†™ä¸€ä¸ªå…¶å®ƒçš„æ™®é€šå‡½æ•°ï¼Œä¼šä¸ä¼šå°†å…¶ä¸­ä¸€äº›é€»è¾‘å†™æˆå•ç‹¬çš„å‡½æ•°å‘¢ï¼Ÿç›¸ä¿¡ç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œå› ä¸ºè¿™æ ·åšå¯ä»¥éš”ç¦»ä¸šåŠ¡é€»è¾‘ï¼Œè®©ä»£ç æ›´åŠ æ¸…æ¥šã€‚</p><p>ä½†æˆ‘å´å‘ç°å¾ˆå¤šåŒå­¦åœ¨å†™å‡½æ•°ç»„ä»¶æ—¶æ²¡æœ‰æ„è¯†åˆ° Hooks å°±æ˜¯æ™®é€šçš„å‡½æ•°ï¼Œæ‰€ä»¥é€šå¸¸ä¸ä¼šè¿™ä¹ˆå»åšéš”ç¦»ï¼Œè€Œæ˜¯ä¹ æƒ¯äºä¸€è·¯å†™ä¸‹æ¥ï¼Œè¿™å°±ä¼šé€ æˆæŸä¸ªå‡½æ•°ç»„ä»¶ç‰¹åˆ«é•¿ã€‚è¿˜æ˜¯è€ç”Ÿå¸¸è°ˆçš„é‚£å¥è¯ï¼Œ<strong>æ”¹å˜è¿™ä¸ªçŠ¶å†µçš„å…³é”®ä»ç„¶åœ¨äºå¼€å‘æ€è·¯çš„è½¬å˜</strong>ã€‚æˆ‘ä»¬è¦çœŸæ­£<strong>æŠŠ Hooks å°±çœ‹æˆæ™®é€šçš„å‡½æ•°ï¼Œèƒ½éš”ç¦»çš„å°½é‡å»åšéš”ç¦»</strong>ï¼Œä»è€Œè®©ä»£ç æ›´åŠ æ¨¡å—åŒ–ï¼Œæ›´æ˜“äºç†è§£å’Œç»´æŠ¤ã€‚</p><p>é‚£ä¹ˆé’ˆå¯¹è¿™æ ·ä¸€ä¸ªåŠŸèƒ½ï¼Œæˆ‘ä»¬ç”šè‡³å¯ä»¥å°†å…¶æ‹†åˆ†æˆ4ä¸ª Hooksï¼Œæ¯ä¸€ä¸ª Hook éƒ½å°½é‡å°ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><pre><code>import React, { useEffect, useCallback, useMemo, useState } from &quot;react&quot;;\nimport { Select, Table } from &quot;antd&quot;;\nimport _ from &quot;lodash&quot;;\nimport useAsync from &quot;./useAsync&quot;;\n\nconst endpoint = &quot;https://myserver.com/api/&quot;;\nconst useArticles = () =&gt; {\n  // ä½¿ç”¨ä¸Šé¢åˆ›å»ºçš„ useAsync è·å–æ–‡ç« åˆ—è¡¨\n  const { execute, data, loading, error } = useAsync(\n    useCallback(async () =&gt; {\n      const res = await fetch(`${endpoint}/posts`);\n      return await res.json();\n    }, []),\n  );\n  // æ‰§è¡Œå¼‚æ­¥è°ƒç”¨\n  useEffect(() =&gt; execute(), [execute]);\n  // è¿”å›è¯­ä¹‰åŒ–çš„æ•°æ®ç»“æ„\n  return {\n    articles: data,\n    articlesLoading: loading,\n    articlesError: error,\n  };\n};\nconst useCategories = () =&gt; {\n  // ä½¿ç”¨ä¸Šé¢åˆ›å»ºçš„ useAsync è·å–åˆ†ç±»åˆ—è¡¨\n  const { execute, data, loading, error } = useAsync(\n    useCallback(async () =&gt; {\n      const res = await fetch(`${endpoint}/categories`);\n      return await res.json();\n    }, []),\n  );\n  // æ‰§è¡Œå¼‚æ­¥è°ƒç”¨\n  useEffect(() =&gt; execute(), [execute]);\n\n  // è¿”å›è¯­ä¹‰åŒ–çš„æ•°æ®ç»“æ„\n  return {\n    categories: data,\n    categoriesLoading: loading,\n    categoriesError: error,\n  };\n};\nconst useCombinedArticles = (articles, categories) =&gt; {\n  // å°†æ–‡ç« æ•°æ®å’Œåˆ†ç±»æ•°æ®ç»„åˆåˆ°ä¸€èµ·\n  return useMemo(() =&gt; {\n    // å¦‚æœæ²¡æœ‰æ–‡ç« æˆ–è€…åˆ†ç±»æ•°æ®åˆ™è¿”å› null\n    if (!articles || !categories) return null;\n    return articles.map((article) =&gt; {\n      return {\n        ...article,\n        category: categories.find(\n          (c) =&gt; String(c.id) === String(article.categoryId),\n        ),\n      };\n    });\n  }, [articles, categories]);\n};\nconst useFilteredArticles = (articles, selectedCategory) =&gt; {\n  // å®ç°æŒ‰ç…§åˆ†ç±»è¿‡æ»¤\n  return useMemo(() =&gt; {\n    if (!articles) return null;\n    if (!selectedCategory) return articles;\n    return articles.filter((article) =&gt; {\n      console.log(&quot;filter: &quot;, article.categoryId, selectedCategory);\n      return String(article?.category?.name) === String(selectedCategory);\n    });\n  }, [articles, selectedCategory]);\n};\n\nconst columns = [\n  { dataIndex: &quot;title&quot;, title: &quot;Title&quot; },\n  { dataIndex: [&quot;category&quot;, &quot;name&quot;], title: &quot;Category&quot; },\n];\n\nexport default function BlogList() {\n  const [selectedCategory, setSelectedCategory] = useState(null);\n  // è·å–æ–‡ç« åˆ—è¡¨\n  const { articles, articlesError } = useArticles();\n  // è·å–åˆ†ç±»åˆ—è¡¨\n  const { categories, categoriesError } = useCategories();\n  // ç»„åˆæ•°æ®\n  const combined = useCombinedArticles(articles, categories);\n  // å®ç°è¿‡æ»¤\n  const result = useFilteredArticles(combined, selectedCategory);\n\n  // åˆ†ç±»ä¸‹æ‹‰æ¡†é€‰é¡¹ç”¨äºè¿‡æ»¤\n  const options = useMemo(() =&gt; {\n    const arr = _.uniqBy(categories, (c) =&gt; c.name).map((c) =&gt; ({\n      value: c.name,\n      label: c.name,\n    }));\n    arr.unshift({ value: null, label: &quot;All&quot; });\n    return arr;\n  }, [categories]);\n\n  // å¦‚æœå‡ºé”™ï¼Œç®€å•è¿”å› Failed\n  if (articlesError || categoriesError) return &quot;Failed&quot;;\n\n  // å¦‚æœæ²¡æœ‰ç»“æœï¼Œè¯´æ˜æ­£åœ¨åŠ è½½\n  if (!result) return &quot;Loading...&quot;;\n\n  return (\n    &lt;div&gt;\n      &lt;Select\n        value={selectedCategory}\n        onChange={(value) =&gt; setSelectedCategory(value)}\n        options={options}\n        style={{ width: &quot;200px&quot; }}\n        placeholder=&quot;Select a category&quot;\n      /&gt;\n      &lt;Table dataSource={result} columns={columns} /&gt;\n    &lt;/div&gt;\n  );\n}\n</code></pre><p>é€šè¿‡è¿™æ ·çš„æ–¹å¼ï¼Œæˆ‘ä»¬å°±æŠŠä¸€ä¸ªè¾ƒä¸ºå¤æ‚çš„é€»è¾‘æ‹†åˆ†æˆä¸€ä¸ªä¸ªç‹¬ç«‹çš„ Hook äº†ï¼Œä¸ä»…éš”ç¦»äº†ä¸šåŠ¡é€»è¾‘ï¼Œä¹Ÿè®©ä»£ç åœ¨è¯­ä¹‰ä¸Šæ›´åŠ æ˜ç¡®ã€‚æ¯”å¦‚è¯´æœ‰ useArticlesã€useCategories è¿™æ ·ä¸ä¸šåŠ¡ç›¸å…³çš„åå­—ï¼Œå°±éå¸¸æ˜“äºç†è§£ã€‚</p><p>è™½ç„¶è¿™ä¸ªä¾‹å­ä¸­æŠ½å–å‡ºæ¥çš„ Hooks éƒ½éå¸¸ç®€å•ï¼Œç”šè‡³çœ‹ä¸Šå»æ²¡æœ‰å¿…è¦ã€‚ä½†æ˜¯å®é™…çš„å¼€å‘åœºæ™¯ä¸€å®šæ˜¯æ¯”è¿™ä¸ªå¤æ‚çš„ï¼Œæ¯”å¦‚å¯¹äº API è¿”å›çš„æ•°æ®éœ€è¦åšä¸€äº›æ•°æ®çš„è½¬æ¢ï¼Œè¿›è¡Œæ•°æ®çš„ç¼“å­˜ï¼Œç­‰ç­‰ã€‚é‚£ä¹ˆè¿™æ—¶å°±è¦é¿å…æŠŠè¿™äº›é€»è¾‘éƒ½æ”¾åˆ°ä¸€èµ·ï¼Œè€Œæ˜¯å°±è¦æ‹†åˆ†åˆ°ç‹¬ç«‹çš„ Hooksï¼Œä»¥å…äº§ç”Ÿè¿‡äºå¤æ‚çš„ç»„ä»¶ã€‚åˆ°æ—¶å€™ä½ ä¹Ÿå°±æ›´èƒ½æ›´ä½“ä¼šåˆ° Hooks å¸¦ç»™ä½ çš„æƒŠå–œäº†ã€‚</p><h1>å°ç»“</h1><p>å¥½äº†ï¼Œè¿™ä¸€è®²æˆ‘ä¸»è¦ç»™ä½ ä»‹ç»äº†è‡ªå®šä¹‰ Hooks çš„æ¦‚å¿µï¼Œä»¥åŠå…¸å‹çš„å››ä¸ªä½¿ç”¨åœºæ™¯ï¼š</p><ol>\n<li>æŠ½å–ä¸šåŠ¡é€»è¾‘ï¼›</li>\n<li>å°è£…é€šç”¨é€»è¾‘ï¼›</li>\n<li>ç›‘å¬æµè§ˆå™¨çŠ¶æ€ï¼›</li>\n<li>æ‹†åˆ†å¤æ‚ç»„ä»¶ã€‚</li>\n</ol><p>å…¶ä¸­ï¼Œæˆ‘é€šè¿‡å››ä¸ªæ¡ˆä¾‹æ¥å¸®åŠ©ä½ çœŸæ­£ç†è§£ Hooks ï¼Œå¹¶ç†Ÿç»ƒæŒæ¡è‡ªå®šä¹‰ Hooks çš„ç”¨æ³•ã€‚åº”å§‹ç»ˆè®°å¾—ï¼Œè¦ç”¨Hooks çš„æ€è·¯å»è§£å†³é—®é¢˜ï¼Œå‘æŒ¥ Hooks çš„æœ€å¤§ä»·å€¼ï¼Œå°±æ˜¯è¦ç»å¸¸å»æ€è€ƒå“ªäº›é€»è¾‘åº”è¯¥å°è£…åˆ°ä¸€ä¸ªç‹¬ç«‹çš„ Hookï¼Œä¿è¯æ¯ä¸ª Hook çš„çŸ­å°ç²¾æ‚ï¼Œä»è€Œè®©ä»£ç æ›´åŠ æ¸…æ™°ï¼Œæ˜“äºç†è§£å’Œç»´æŠ¤ã€‚</p><h1>æ€è€ƒé¢˜</h1><p>åœ¨ useCounter è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æ˜¯å›ºå®šè®©æ•°å­—æ¯æ¬¡åŠ ä¸€ã€‚å‡å¦‚è¦åšä¸€ä¸ªæ”¹è¿›ï¼Œå…è®¸çµæ´»é…ç½®ç‚¹å‡»åŠ å·æ—¶åº”è¯¥åŠ å‡ ï¼Œæ¯”å¦‚è¯´æ¯æ¬¡åŠ 10ï¼Œé‚£ä¹ˆåº”è¯¥å¦‚ä½•å®ç°ï¼Ÿ</p><p>æ¬¢è¿åœ¨ç•™è¨€åŒºåˆ†äº«ä½ çš„æ€è€ƒå’Œæƒ³æ³•ï¼Œæˆ‘ä¼šå’Œä½ äº¤æµè®¨è®ºã€‚æˆ‘ä»¬ä¸‹èŠ‚è¯¾å†è§ï¼</p>","neighbors":{"left":{"article_title":"05ï½œè¿›ä¸€æ­¥è®¤è¯† Hooks ï¼šå¦‚ä½•æ­£ç¡®ç†è§£å‡½æ•°ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸï¼Ÿ","id":380891},"right":{"article_title":"07ï½œå…¨å±€çŠ¶æ€ç®¡ç†ï¼šå¦‚ä½•åœ¨å‡½æ•°ç»„ä»¶ä¸­ä½¿ç”¨ Reduxï¼Ÿ","id":382459}},"comments":[{"had_liked":false,"id":296480,"user_name":"Bugèˆ¬çš„å­˜åœ¨","can_delete":false,"product_type":"c1","uid":1573766,"ip_address":"","ucode":"7A61F7AA3B49A3","user_header":"https://static001.geekbang.org/account/avatar/00/18/03/86/c9051c6a.jpg","comment_is_top":false,"comment_ctime":1622994208,"is_pvip":false,"replies":[{"id":"107751","content":"ğŸ‘ğŸ»","user_name":"ä½œè€…å›å¤","comment_id":296480,"uid":"1018676","ip_address":"","utype":1,"ctime":1623082221,"user_name_real":"Nate"}],"discussion_count":1,"race_medal":0,"score":"104702209312","product_id":100079901,"comment_content":"ã€Šæ‹†åˆ†å¤æ‚ç»„ä»¶ã€‹ è¿™ä¸ªä¾‹å­ï¼Œæœ‰ç§é†é†çŒé¡¶çš„æ„Ÿè§‰ï¼Œè±ç„¶å¼€æœ—ï¼Œæ„Ÿè°¢-","like_count":24},{"had_liked":false,"id":296250,"user_name":"å‡¡å‡¡","can_delete":false,"product_type":"c1","uid":1374266,"ip_address":"","ucode":"CAEA596A037D9A","user_header":"https://static001.geekbang.org/account/avatar/00/14/f8/3a/dbf7bdee.jpg","comment_is_top":false,"comment_ctime":1622862936,"is_pvip":true,"replies":[{"id":"107744","content":"èµï¼Hooks ä½œä¸ºæ™®é€šå‡½æ•°ï¼Œæ˜¯å¯ä»¥ä¼ é€’ä»»ä½•å‚æ•°çš„ã€‚","user_name":"ä½œè€…å›å¤","comment_id":296250,"uid":"1018676","ip_address":"","utype":1,"ctime":1623081577,"user_name_real":"Nate"}],"discussion_count":1,"race_medal":0,"score":"57457437784","product_id":100079901,"comment_content":"import { useState, useCallback } from &#39;react&#39;;<br><br>const useCounter = (step) =&gt; {<br>  const [counter, setCounter] = useState(0);<br>  const increment = useCallback(() =&gt; setCounter(counter + step), [counter, step]);<br>  const decrement = useCallback(() =&gt; setCounter(counter - step), [counter, step]);<br>  const reset = useCallback(() =&gt; setCounter(0), []);<br>  <br>  return {counter, increment, decrement, reset};<br>}<br><br>export default useCounter;","like_count":13},{"had_liked":false,"id":299709,"user_name":"ä½™ç†™","can_delete":false,"product_type":"c1","uid":1240802,"ip_address":"","ucode":"7F98DCFB899CB7","user_header":"https://static001.geekbang.org/account/avatar/00/12/ee/e2/23e44221.jpg","comment_is_top":false,"comment_ctime":1624809561,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"31689580633","product_id":100079901,"comment_content":"è¿™ä¸€èŠ‚æ€»ç»“å¾—éå¸¸å¥½ï¼Œå®˜æ–¹æ–‡æ¡£å’Œç½‘ä¸Šæ–‡ç« æ²¡å†™å‡ºæ¥çš„å¹²è´§ğŸ‘","like_count":7},{"had_liked":false,"id":296873,"user_name":"å±±åŸæ—§å®¢","can_delete":false,"product_type":"c1","uid":2642370,"ip_address":"","ucode":"A3CC05224DCA98","user_header":"https://static001.geekbang.org/account/avatar/00/28/51/c2/90a959d2.jpg","comment_is_top":false,"comment_ctime":1623208086,"is_pvip":false,"discussion_count":4,"race_medal":0,"score":"14508109974","product_id":100079901,"comment_content":"<br>import React from &quot;react&quot;;<br>import useAsync from &#39;.&#47;useAsync&#39;;<br><br>export default function UserList() {<br>  &#47;&#47; é€šè¿‡ useAsync è¿™ä¸ªå‡½æ•°ï¼Œåªéœ€è¦æä¾›å¼‚æ­¥é€»è¾‘çš„å®ç°<br>  const {<br>    execute: fetchUsers,<br>    data: users,<br>    loading,<br>    error,<br>  } = useAsync(async () =&gt; {<br>    const res = await fetch(&quot;https:&#47;&#47;reqres.in&#47;api&#47;users&#47;&quot;);<br>    const json = await res.json();<br>    return json.data;<br>  });<br>  <br>  return (<br>    &#47;&#47; æ ¹æ®çŠ¶æ€æ¸²æŸ“ UI...<br>  );<br>}<br><br>æˆ‘éªŒè¯äº†è¿™ä¸ªæ¡ˆä¾‹å¿…é¡»æ‰§è¡Œå‰¯ä½œç”¨useEffect(() =&gt; fetchUsers(), []);æ‰èƒ½å‘èµ·å¼‚æ­¥æ•°æ®è¯·æ±‚ï¼Œå¦‚æœåœ¨ä¾èµ–é¡¹æ•°ç»„ä¸­å†ä¼ å…¥useEffect(() =&gt; fetchUsers(), [fetchUsers]);ä¼šé™·å…¥å¼‚æ­¥æ•°æ®è¯·æ±‚æ­»å¾ªç¯ã€‚","like_count":3,"discussions":[{"author":{"id":1200447,"avatar":"https://static001.geekbang.org/account/avatar/00/12/51/3f/41c68054.jpg","nickname":"æˆ‘è¦çš„é£ç¿”","note":"","ucode":"41C51DBC8372BF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":381427,"discussion_content":"æ˜¯å› ä¸ºä½ useAsyncä¼ çš„asyncå‡½æ•°æ²¡ç»è¿‡useCallbackå¤„ç†å•¦ï½\nå› ä¸ºasyncFunctionå˜åŒ–å¯¼è‡´fetchUsersæ¯æ¬¡éƒ½æ˜¯ä¸€ä¸ªæ–°çš„function","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1625048198,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1555361,"avatar":"https://static001.geekbang.org/account/avatar/00/17/bb/a1/08ae0611.jpg","nickname":"é€†é£é£æ‰¬","note":"","ucode":"FA4C58D3D3FDA5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":571975,"discussion_content":"æˆ‘çš„ç†è§£æ˜¯useAsyncåªæ˜¯å°è£…äº†æ¥å£è¿”å›æ•°æ®çš„å¤„ç†é€»è¾‘ï¼Œè‡³äºä»€ä¹ˆæ—¶å€™è°ƒç”¨æ¥å£ï¼Œå°±éœ€è¦ä½¿ç”¨è¿™ä¸ªhookçš„ç»„ä»¶è‡ªè¡Œå†³å®šã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1652518706,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1672018,"avatar":"https://static001.geekbang.org/account/avatar/00/19/83/52/47dc4d5c.jpg","nickname":"Claus Wong","note":"","ucode":"E07685C4E7B07F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":380407,"discussion_content":"ä¼ ä¸ä¼ ä¸å¦ï¼Œè¦ç»“åˆåˆé€‚ä¸šåŠ¡åœºæ™¯ï¼Œä¸èƒ½å­¦æŠ€æœ¯è€Œå­¦æŠ€æœ¯ã€‚è€å¸ˆåœ¨å°è£…é‡Œé¢å°†asyncFunctionä½œä¸ºä¾èµ–å°±æŒºçªå…€è´¹è§£çš„ï¼Œåº”è¯¥ä¼ ç©ºçš„å˜›","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1624493492,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1200447,"avatar":"https://static001.geekbang.org/account/avatar/00/12/51/3f/41c68054.jpg","nickname":"æˆ‘è¦çš„é£ç¿”","note":"","ucode":"41C51DBC8372BF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1672018,"avatar":"https://static001.geekbang.org/account/avatar/00/19/83/52/47dc4d5c.jpg","nickname":"Claus Wong","note":"","ucode":"E07685C4E7B07F","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":381428,"discussion_content":"maybeæ˜¯è€ƒè™‘åˆ°asyncFunctionå¯èƒ½æ˜¯åŠ¨æ€çš„ï¼Œå¯¹åŒä¸€ä¸ªç»„ä»¶é‡Œçš„åŒä¸€ä¸ªhookå‘è¯·æ±‚æœ‰æ—¶å€™æ˜¯asyncAï¼Œæœ‰æ—¶å€™æ˜¯asyncB","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625048369,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":380407,"ip_address":""},"score":381428,"extra":""}]}]},{"had_liked":false,"id":324545,"user_name":"å‚»å­æ¥äº†å¿«è·‘ä¸¶","can_delete":false,"product_type":"c1","uid":1282777,"ip_address":"","ucode":"662624121A1DFA","user_header":"https://static001.geekbang.org/account/avatar/00/13/92/d9/84c1de45.jpg","comment_is_top":false,"comment_ctime":1638497050,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10228431642","product_id":100079901,"comment_content":"è€å¸ˆï¼Œåé¢çš„è¯¾ç¨‹èƒ½ä¸èƒ½å‡ºé—¨æ›´æ·±å…¥çš„ï¼Œæ¯”å¦‚fibierï¼Œhooksçš„åº•å±‚å®ç°å•Šï¼Œè¿™ç§ï¼Œä»¥åŠfiberçš„å„ç§è°ƒåº¦ï¼Œå•¥çš„","like_count":2},{"had_liked":false,"id":312091,"user_name":"æå…‹å‹¤","can_delete":false,"product_type":"c1","uid":2660079,"ip_address":"","ucode":"78917017E984FB","user_header":"","comment_is_top":false,"comment_ctime":1631619681,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10221554273","product_id":100079901,"comment_content":"function useCounter() {<br><br>    const [count,setCount] = useState(0);<br>    const [step ,setStep] =useState(1)  <br><br>    const changeStep = useCallback((value) =&gt; {<br>        setStep(value);<br>    },[]);<br>    const increment = useCallback(() =&gt; {<br>        setCount(count+step);<br>    },[count,step]);<br>    const decrement = useCallback(() =&gt; {<br>        setCount(count-step);<br>    },[count,step]);<br>    <br>    const reset = useCallback(() =&gt; {<br>        setCount(0);<br>    },[])<br><br>    return {count,increment,decrement,reset,changeStep};<br><br>}<br>export default function Counter () {<br><br>   <br>   const {count,increment,decrement,reset,changeStep} = useCounter();<br><br>   return(<br>       &lt;div&gt;<br>           &lt;button onClick={decrement}&gt;-&lt;&#47;button&gt;<br>           &lt;p&gt;count:{count}&lt;&#47;p&gt;<br>           &lt;button onClick={increment}&gt;+&lt;&#47;button&gt;<br>           &lt;button onClick={reset}&gt;Reset&lt;&#47;button&gt;<br>           &lt;div&gt;<br>               &lt;InputNumber defaultValue={1} onChange={(v) =&gt; changeStep(v)}&#47;&gt;<br>           &lt;&#47;div&gt;<br>       &lt;&#47;div&gt;<br>   )<br>}","like_count":2},{"had_liked":false,"id":301709,"user_name":"åˆ«æ‹¦æˆ‘è®©æˆ‘å­¦","can_delete":false,"product_type":"c1","uid":2613324,"ip_address":"","ucode":"7FBDEB867A68AE","user_header":"https://static001.geekbang.org/account/avatar/00/27/e0/4c/e6042c6c.jpg","comment_is_top":false,"comment_ctime":1625819619,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10215754211","product_id":100079901,"comment_content":"useScrollä¸­getPositionä¸­åº”è¯¥å°†document.body.scrollTopæ”¹ä¸ºdocument.documentElement.scrollTopã€‚","like_count":2},{"had_liked":false,"id":296739,"user_name":"å¯‡äº‘","can_delete":false,"product_type":"c1","uid":1001332,"ip_address":"","ucode":"87181F16F83543","user_header":"https://static001.geekbang.org/account/avatar/00/0f/47/74/5e292ded.jpg","comment_is_top":false,"comment_ctime":1623140264,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10213074856","product_id":100079901,"comment_content":"æ„Ÿè°¢è€å¸ˆï¼Œä¹‹å‰å¯¹äºhooks åªåœç•™åœ¨å¦‚ä½•ä½¿ç”¨çš„å±‚é¢ã€‚ æ…¢æ…¢çš„ä¼šæŠŠå•æ–‡ä»¶ä¸­å¼•å…¥å¾ˆå¤šçš„useStateï¼Œé€šè¿‡è¿™èŠ‚è¯¾ï¼ŒçŸ¥é“äº†åº”è¯¥å¦‚ä½•åˆ›å»ºè‡ªå·±çš„ hooks æ¥ä¼˜åŒ–ä»£ç ã€‚","like_count":2},{"had_liked":false,"id":296412,"user_name":"Geek1560","can_delete":false,"product_type":"c1","uid":2028949,"ip_address":"","ucode":"5F27A28B8002E6","user_header":"https://static001.geekbang.org/account/avatar/00/1e/f5/95/a362f01b.jpg","comment_is_top":false,"comment_ctime":1622965424,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"10212900016","product_id":100079901,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼ŒuesAsync è¿™ä¸ªä¾‹å­ä¸­ï¼Œexecute ä½¿ç”¨äº† useCallbackï¼Œä½†å®é™…ä¼ å…¥çš„å‡½æ•°æ¯æ¬¡éƒ½æ˜¯é‡æ–°åˆ›å»ºçš„ï¼Œæµ…æ¯”è¾ƒç»“æœæ˜¯ä¸ç›¸åŒï¼Œç¼“å­˜ä¾ç„¶ä¼šæ›´æ–°ï¼Œå¦‚æœè¦ä½¿ç”¨uesCallbackï¼Œæ˜¯å¦æ˜¯åº”è¯¥åœ¨å¤–å±‚ç¼“å­˜ä¼ å…¥çš„asyncFunction","like_count":2},{"had_liked":false,"id":313111,"user_name":"æ³·æ²å¿ƒ","can_delete":false,"product_type":"c1","uid":1293186,"ip_address":"","ucode":"E811D9F1A17689","user_header":"https://static001.geekbang.org/account/avatar/00/13/bb/82/5a32de87.jpg","comment_is_top":false,"comment_ctime":1632281828,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5927249124","product_id":100079901,"comment_content":"å†™äº†è¿™ä¹ˆä¹…Hooksï¼Œä¸€ç›´ä»¥é€»è¾‘+UIä½œä¸ºåŸºæœ¬åŒºåˆ†ï¼Œçœ‹åˆ°è¿™é‡Œè€å¸ˆçš„å‡ ä¸ªä¾‹å­ï¼Œæ›´åŠ å¯¹Hookså¦çœ¼ç›¸çœ‹äº†ï¼Œæ„Ÿè°¢è€å¸ˆï¼Œå¤§èµï¼ï¼ï¼","like_count":1},{"had_liked":false,"id":307685,"user_name":"æ±Ÿè°¢æœ¨","can_delete":false,"product_type":"c1","uid":1563403,"ip_address":"","ucode":"E1B1B0F0F03D41","user_header":"https://static001.geekbang.org/account/avatar/00/17/db/0b/f0ded153.jpg","comment_is_top":false,"comment_ctime":1629200716,"is_pvip":false,"replies":[{"id":"111731","content":"åªæ˜¯å¼•ç”¨æ¯”è¾ƒã€‚åªè¦å¼•ç”¨æ²¡å˜ï¼Œå¯¹è±¡å†…éƒ¨ç»“æ„æ€ä¹ˆå˜åŒ–éƒ½ä¸ä¼šè¢«è®¤ä¸ºä¾èµ–é¡¹å˜åŒ–äº†ã€‚æ‰€ä»¥ react ä¸­éƒ½æ˜¯ç”¨ immutable çš„æ•°æ®ç»“æ„ã€‚","user_name":"ä½œè€…å›å¤","comment_id":307685,"uid":"1018676","ip_address":"","utype":1,"ctime":1629726322,"user_name_real":"Nate"}],"discussion_count":1,"race_medal":0,"score":"5924168012","product_id":100079901,"comment_content":"è€å¸ˆï¼ŒuseMemoã€useCallbackå¯¹æ•°æ®è¿›è¡Œç¼“å­˜æ—¶ï¼Œä¾èµ–é¡¹æ˜¯è¿›è¡Œæµ…æ¯”è¾ƒï¼Ÿ å¦‚æœå­˜åœ¨ä¾èµ–é¡¹æ˜¯æ·±å±‚å¯¹è±¡çš„æ•°æ®å‘ç”Ÿå˜åŒ–ä¼šå½±å“ç¼“å­˜è®¡ç®—ç»“æœï¼Ÿ","like_count":1},{"had_liked":false,"id":304590,"user_name":"Tristan","can_delete":false,"product_type":"c1","uid":1359476,"ip_address":"","ucode":"DC454E16AAA66A","user_header":"https://static001.geekbang.org/account/avatar/00/14/be/74/0d900ed9.jpg","comment_is_top":false,"comment_ctime":1627489758,"is_pvip":false,"replies":[{"id":"110259","content":"ç¥–ä¼ ç§˜æ–¹ï¼Œä¸å¯å¤–ä¼ ~","user_name":"ä½œè€…å›å¤","comment_id":304590,"uid":"1018676","ip_address":"","utype":1,"ctime":1627634425,"user_name_real":"Nate"}],"discussion_count":1,"race_medal":0,"score":"5922457054","product_id":100079901,"comment_content":"é†é†çŒé¡¶å•Šï¼Œæ•¢é—®å¦‚ä½•ä¿å…»å¤´å‘ï¼Ÿ","like_count":1},{"had_liked":false,"id":356034,"user_name":"elune3344","can_delete":false,"product_type":"c1","uid":2908775,"ip_address":"ä¸Šæµ·","ucode":"90183038A77E6A","user_header":"https://static001.geekbang.org/account/avatar/00/2c/62/67/cd17dabe.jpg","comment_is_top":false,"comment_ctime":1661930025,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1661930025","product_id":100079901,"comment_content":"useEffect(() =&gt; execute(), [execute]);<br>ä¸ºå•¥ä¸æŠŠè¿™ä¸ªæ‰§è¡Œçš„é€»è¾‘å°åœ¨useAsyncé‡Œé¢å‘¢","like_count":0},{"had_liked":false,"id":356033,"user_name":"elune3344","can_delete":false,"product_type":"c1","uid":2908775,"ip_address":"ä¸Šæµ·","ucode":"90183038A77E6A","user_header":"https://static001.geekbang.org/account/avatar/00/2c/62/67/cd17dabe.jpg","comment_is_top":false,"comment_ctime":1661929982,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1661929982","product_id":100079901,"comment_content":"useEffect(() =&gt; execute(), [execute]);<br>è¿™ä¸€å¥ä¸ºä»€ä¹ˆä¸åœ¨useAsync ç›´æ¥æ‰§è¡Œå‘¢","like_count":0},{"had_liked":false,"id":348311,"user_name":"æ—èŠŠèŠŠ","can_delete":false,"product_type":"c1","uid":3023492,"ip_address":"","ucode":"08B487A9F44A7A","user_header":"","comment_is_top":false,"comment_ctime":1654951826,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1654951826","product_id":100079901,"comment_content":"reactæ ¹æœ¬ä¸å…³å¿ƒ åå­—æ˜¯å¦æ˜¯usexxx ã€‚ ","like_count":0},{"had_liked":false,"id":339862,"user_name":"siegfried","can_delete":false,"product_type":"c1","uid":1007931,"ip_address":"","ucode":"31673819DD2605","user_header":"https://static001.geekbang.org/account/avatar/00/0f/61/3b/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1648438933,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1648438933","product_id":100079901,"comment_content":"æ€è€ƒé¢˜ã€‚åœ¨useCounterçš„functionå†…æ·»åŠ å‚æ•°ã€‚","like_count":0},{"had_liked":false,"id":337277,"user_name":"Geek_983da8","can_delete":false,"product_type":"c1","uid":2937788,"ip_address":"","ucode":"D276FDB24F29A9","user_header":"https://static001.geekbang.org/account/avatar/00/2c/d3/bc/51c1029f.jpg","comment_is_top":false,"comment_ctime":1646730832,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1646730832","product_id":100079901,"comment_content":"åŸæ¥è¿™å°±æ˜¯èŠ±é’±çš„æ‰èƒ½æ„Ÿå—åˆ°çš„é­…åŠ›","like_count":0},{"had_liked":false,"id":334423,"user_name":"é™ˆå† å—","can_delete":false,"product_type":"c1","uid":2735318,"ip_address":"","ucode":"89AB86B1BFA242","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqdH1VzVC9fJySwZib0vGSTS6EQib1JMtXb0TeHmWhdibASnnx5RqEGoreVT6005LnY4iaXOprwHtMp6A/132","comment_is_top":false,"comment_ctime":1644928596,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1644928596","product_id":100079901,"comment_content":"é†é†çŒé¡¶ï¼Œè¿™å°±æŠŠä¹‹å‰åœ¨å…¬å¸å†™çš„å¾ˆéš¾ç»´æŠ¤çš„ä»£ç ç”¨è‡ªå®šä¹‰hooksæ‹†åˆ†ä¸€ä¸‹ï½ è°¢è°¢è€å¸ˆï¼","like_count":0},{"had_liked":false,"id":331897,"user_name":"uinging","can_delete":false,"product_type":"c1","uid":1025345,"ip_address":"","ucode":"5D0FDB5EADB756","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a5/41/9ae89188.jpg","comment_is_top":false,"comment_ctime":1642858578,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1642858578","product_id":100079901,"comment_content":"æ¸…æ™°åˆç®€æ´ï¼Œè€å¸ˆå¤šå‡ºå‡ é—¨è¯¾å§ã€‚","like_count":0},{"had_liked":false,"id":331257,"user_name":"é¦é¦æ±‰å®","can_delete":false,"product_type":"c1","uid":2727971,"ip_address":"","ucode":"D46DC76AF6674C","user_header":"https://static001.geekbang.org/account/avatar/00/29/a0/23/4668496b.jpg","comment_is_top":false,"comment_ctime":1642508070,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1642508070","product_id":100079901,"comment_content":"å¤ªæ£’äº†è¿™èŠ‚ï¼Œå­¦åˆ°å¾ˆå¤š","like_count":0},{"had_liked":false,"id":328062,"user_name":"Light èƒ–è™","can_delete":false,"product_type":"c1","uid":2876591,"ip_address":"","ucode":"D5FCFE14172D31","user_header":"https://static001.geekbang.org/account/avatar/00/2b/e4/af/f8cf4bc2.jpg","comment_is_top":false,"comment_ctime":1640510288,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1640510288","product_id":100079901,"comment_content":"è€å¸ˆï¼Œåœ¨é˜…è¯»è¿‡æ‹†åˆ†æ–¹æ³•çš„è¿™é‡Œå‘ç°äº†ä¸€ä¸ªé—®é¢˜ï¼Œæ˜¯ä¸æ˜¯æ™®éçš„å¦‚æœè¯¥è‡ªå®šä¹‰hooksæœ‰å‚æ•°é‡Œé¢hooksçš„ä¾èµ–é¡¹å¿…é¡»æœ‰å‚æ•°ï¼Œå¦‚æœè¯¥è‡ªå®šä¹‰hooksä¸éœ€è¦å‚æ•°åˆ™ä¸€èˆ¬ä¾èµ–é¡¹ä¸ºç©ºæ•°ç»„å°±å¯ä»¥","like_count":0},{"had_liked":false,"id":322189,"user_name":"æ›¹æ˜Œé­","can_delete":false,"product_type":"c1","uid":1127384,"ip_address":"","ucode":"426CF942C5DD38","user_header":"https://static001.geekbang.org/account/avatar/00/11/33/d8/28858704.jpg","comment_is_top":false,"comment_ctime":1637226684,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1637226684","product_id":100079901,"comment_content":"è€å¸ˆå¥½ï¼Œè¯·é—®useAsyncä¸­çš„executeå¦‚ä½•ä¼ å‚æ•°ï¼Ÿ","like_count":0},{"had_liked":false,"id":314363,"user_name":"é˜¿é˜³","can_delete":false,"product_type":"c1","uid":1165817,"ip_address":"","ucode":"20A35FB86B1C5C","user_header":"https://static001.geekbang.org/account/avatar/00/11/c9/f9/39492855.jpg","comment_is_top":false,"comment_ctime":1632986452,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1632986452","product_id":100079901,"comment_content":"è¿™èŠ‚è¯¾çš„å…¸å‹ä¾‹å­ï¼ŒçœŸçš„éœ€è¦ä¸æ–­å­¦ä¹ ï¼Œä¸æ–­å®è·µï¼Œä¸æ–­ä½“ä¼šï¼ŒçœŸçš„æ˜¯çªç ´å·²æœ‰çš„è®¤çŸ¥ï¼Œæå‡æ°´å¹³ã€‚","like_count":0},{"had_liked":false,"id":306374,"user_name":"rookie","can_delete":false,"product_type":"c1","uid":1686457,"ip_address":"","ucode":"F6CCC3EEE2A96E","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoeOax1CZKbFicWib6Eicl7WHVpFG269qQCes0wbiawJsqPs45B8sAgF7eGyjhJJkibXTjtApNicnmicPh1g/132","comment_is_top":false,"comment_ctime":1628518980,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1628518980","product_id":100079901,"comment_content":"import { useState, useCallback } from &quot;react&quot;;<br>import { InputNumber } from &quot;antd&quot;;<br><br>function useCounter() {<br>  &#47;&#47; å®šä¹‰ count è¿™ä¸ª state ç”¨äºä¿å­˜å½“å‰æ•°å€¼<br>  const [count, setCount] = useState(0);<br><br>  const [step, setStep] = useState(1);<br>  &#47;&#47; å®ç°åŠ  1 çš„æ“ä½œ<br>  const increment = useCallback(() =&gt; setCount(count + step), [count]);<br>  &#47;&#47; å®ç°å‡ 1 çš„æ“ä½œ<br>  const decrement = useCallback(() =&gt; {<br>    setCount(count - step);<br>  }, [count]);<br>  &#47;&#47; é‡ç½®è®¡æ•°å™¨<br>  const reset = useCallback(() =&gt; setCount(0), []);<br><br>  const change = useCallback((value) =&gt; {<br>    setStep(value);<br>  }, []);<br><br>  &#47;&#47; å°†ä¸šåŠ¡é€»è¾‘çš„æ“ä½œ export å‡ºå»ä¾›è°ƒç”¨è€…ä½¿ç”¨<br>  return { count, increment, decrement, reset, change, step };<br>}<br><br>export default function Counter() {<br>  &#47;&#47; è°ƒç”¨è‡ªå®šä¹‰ Hook<br>  const { count, increment, decrement, reset, change, step } = useCounter();<br><br>  &#47;&#47; æ¸²æŸ“ UI<br>  return (<br>    &lt;div&gt;<br>      &lt;h1&gt;Use Counter&lt;&#47;h1&gt;<br>      &lt;button onClick={decrement}&gt; - &lt;&#47;button&gt;<br>      &lt;span<br>        style={{ display: &quot;inline-block&quot;, width: &quot;40px&quot;, textAlign: &quot;center&quot; }}<br>      &gt;<br>        {count}<br>      &lt;&#47;span&gt;<br>      &lt;button onClick={increment}&gt; + &lt;&#47;button&gt;<br>      &lt;button onClick={reset}&gt; reset &lt;&#47;button&gt;<br>      &lt;InputNumber defaultValue={step} onChange={change} &#47;&gt;<br>    &lt;&#47;div&gt;<br>  );<br>}<br>","like_count":0},{"had_liked":false,"id":301493,"user_name":"Roy Liang","can_delete":false,"product_type":"c1","uid":1098898,"ip_address":"","ucode":"1DF5FC831A35DA","user_header":"https://static001.geekbang.org/account/avatar/00/10/c4/92/338b5609.jpg","comment_is_top":false,"comment_ctime":1625714766,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1625714766","product_id":100079901,"comment_content":"è€å¸ˆï¼Œå¦‚æœfetchUsersæ–¹æ³•å¸¦å‚æ•°ï¼Œè¯¥æ€ä¹ˆå†™ï¼Ÿ","like_count":0},{"had_liked":false,"id":298869,"user_name":"å‘èŠ½çš„ç´«èœ","can_delete":false,"product_type":"c1","uid":1055836,"ip_address":"","ucode":"49450F3287DF28","user_header":"https://static001.geekbang.org/account/avatar/00/10/1c/5c/f5f24221.jpg","comment_is_top":false,"comment_ctime":1624352245,"is_pvip":false,"discussion_count":4,"race_medal":0,"score":"1624352245","product_id":100079901,"comment_content":"è¿˜æ˜¯ä¸å¤ªç†è§£è‡ªå®šä¹‰hooksï¼Œè‡ªå®šä¹‰hooks useCounterç”¨åˆ°äº†useStateï¼Œé‚£ä¹ˆæˆ‘åœ¨ä½¿ç”¨è‡ªå®šä¹‰hooks useCounterçš„æ—¶å€™ï¼Œå¯ä»¥ç†è§£ä¸ºè·Ÿä½¿ç”¨useStateå·®ä¸å¤šå—ï¼Ÿ<br><br>ä½†æ˜¯è¿™ä¸ªçŠ¶æ€countæ˜¯åœ¨useCounterçš„å‡½æ•°é‡Œï¼Œä»€ä¹ˆä½¿ç”¨è‡ªå®šä¹‰hooksçš„å¤–å±‚å‡½æ•°ç»„ä»¶Counterä¹Ÿä¼šæ›´æ–°å‘¢ï¼Ÿè¿™ä¸ªåº•å±‚åŸç†æ˜¯ä»€ä¹ˆï¼Ÿæ˜¯Reactåšäº†ä»€ä¹ˆå¤„ç†å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1200447,"avatar":"https://static001.geekbang.org/account/avatar/00/12/51/3f/41c68054.jpg","nickname":"æˆ‘è¦çš„é£ç¿”","note":"","ucode":"41C51DBC8372BF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":381431,"discussion_content":"æˆ‘è§‰å¾—å°±æ˜¯è€å¸ˆä¸€ç›´å¼ºè°ƒçš„  hookå°±æ˜¯å‡½æ•°  hookçš„æ‰§è¡Œå°±æ˜¯å‡½æ•°çš„æ‰§è¡Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625048596,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1385324,"avatar":"https://static001.geekbang.org/account/avatar/00/15/23/6c/e5a88f14.jpg","nickname":"èƒ¡å“¥æœ‰è¯è¯´","note":"","ucode":"5046D968D448E5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":380605,"discussion_content":"reactå¯¹ä»¥useå¼€å¤´çš„å‡½æ•°ï¼Œè¯†åˆ«ä¸ºç”¨æˆ·è‡ªå®šä¹‰Hooksï¼Œå¤„ç†ä¸Šä¸useStateä¼šä¿æŒä¸€è‡´ã€‚\nä¹Ÿå¯ä»¥ç®€å•çš„è®¤ä¸ºï¼Œreactåœ¨è¯†åˆ«æ˜¯å¦æ˜¯Hookså‡½æ•°æ—¶ï¼Œçš„åˆ¤æ–­æ ‡å‡†æ˜¯useå¼€å¤´\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1624602663,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1200447,"avatar":"https://static001.geekbang.org/account/avatar/00/12/51/3f/41c68054.jpg","nickname":"æˆ‘è¦çš„é£ç¿”","note":"","ucode":"41C51DBC8372BF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1385324,"avatar":"https://static001.geekbang.org/account/avatar/00/15/23/6c/e5a88f14.jpg","nickname":"èƒ¡å“¥æœ‰è¯è¯´","note":"","ucode":"5046D968D448E5","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":381432,"discussion_content":"å…¶å®reactä¸ä¼šåˆ¤æ–­æ˜¯ä¸æ˜¯useå¼€å¤´ï¼Œä¸¥æ ¼æ¥è®²ä¸æ˜¯useå¼€å¤´çš„å‡½æ•°ä¾ç„¶å¯ä»¥ä½œä¸ºhookä½¿ç”¨ï¼Œé‡Œé¢å¯ä»¥useState/useEffectï¼Œåªè¦è¿™ä¸ªå‡½æ•°æ˜¯åœ¨å‡½æ•°ç»„ä»¶æˆ–è€…å…¶ä»–è‡ªå®šä¹‰hookä¸­ä½¿ç”¨\nä½†æ˜¯ï¼è¿™æ›´åƒæ˜¯ä¸€ç§è§„èŒƒï¼Œä»¥åŠåœ¨eslintæ£€æŸ¥ä¸­ä¼šå¯¹æ­¤è¿›è¡Œæ£€æŸ¥","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1625048794,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":380605,"ip_address":""},"score":381432,"extra":""}]},{"author":{"id":1672018,"avatar":"https://static001.geekbang.org/account/avatar/00/19/83/52/47dc4d5c.jpg","nickname":"Claus Wong","note":"","ucode":"E07685C4E7B07F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":380335,"discussion_content":"åŒé—®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1624444464,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":298794,"user_name":"Geek_5104b1","can_delete":false,"product_type":"c1","uid":2649750,"ip_address":"","ucode":"97B26557EC7823","user_header":"","comment_is_top":false,"comment_ctime":1624327392,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1624327392","product_id":100079901,"comment_content":"è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯åœ¨useAsyncå†…éƒ¨ï¼Œreturn asyncFunction()è¿™ä¸ªåœ°æ–¹çš„returnæœ‰ä»€ä¹ˆæ„ä¹‰å˜›ï¼ŸuseCallbackä¸æ˜¯å°†æ•´ä¸ªçš„å›è°ƒå‡½æ•°åšç¼“å­˜å˜›ï¼Ÿä¸æ˜¯å¾ˆç†è§£ï¼Œå·®äº†ç›¸å…³èµ„æ–™ä¹Ÿæ²¡æœ‰è§£å†³ï¼Œæœ›è€å¸ˆç»™è§£ç­”ä¸€ä¸‹","like_count":0,"discussions":[{"author":{"id":1672018,"avatar":"https://static001.geekbang.org/account/avatar/00/19/83/52/47dc4d5c.jpg","nickname":"Claus Wong","note":"","ucode":"E07685C4E7B07F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":380417,"discussion_content":"å†…å±‚(å°è£…)returnä¸å¦å–å†³äºå¤–å±‚(è°ƒç”¨)çš„ç»†è…»åº¦ï¼Œå¦‚æœè°ƒç”¨ç”¨åˆ°promise fetchUsers().then().catch()ï¼Œé‚£å¯ä»¥returnï¼›ä½†æ­¤å¤„å³ä½¿returnï¼ŒfetchUsers().then().catch()å› ä¸ºå†…å±‚ï¼ˆå°è£…ï¼‰åªæ˜¯setData/setLoading/setErrorï¼Œå¹¶æ²¡æœ‰å†æ¬¡returnæ•°æ®ï¼Œå› æ­¤æ— ç”¨ï¼Œè¦ç»“åˆå…·ä½“ä¸šåŠ¡åœºæ™¯ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1624497101,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2649750,"avatar":"","nickname":"Geek_5104b1","note":"","ucode":"97B26557EC7823","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1672018,"avatar":"https://static001.geekbang.org/account/avatar/00/19/83/52/47dc4d5c.jpg","nickname":"Claus Wong","note":"","ucode":"E07685C4E7B07F","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":380574,"discussion_content":"ç†è§£äº†ï¼Œæ„Ÿè°¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1624589070,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":380417,"ip_address":""},"score":380574,"extra":""}]}]},{"had_liked":false,"id":298337,"user_name":"é‡ç”Ÿ","can_delete":false,"product_type":"c1","uid":1173049,"ip_address":"","ucode":"8ABFEAD785184A","user_header":"https://static001.geekbang.org/account/avatar/00/11/e6/39/16208644.jpg","comment_is_top":false,"comment_ctime":1624022670,"is_pvip":false,"replies":[{"id":"108269","content":"ä¸€èˆ¬æˆ‘ä¼šå•ç‹¬ç”¨ä¸€ä¸ª hooks æ–‡ä»¶å¤¹æ”¾è‡ªå®šä¹‰çš„ hooksã€‚å…³äºæ–‡ä»¶å¤¹ç»“æ„å¯ä»¥å‚è€ƒç¬¬10è¯¾å“¦ï¼","user_name":"ä½œè€…å›å¤","comment_id":298337,"uid":"1018676","ip_address":"","utype":1,"ctime":1624086723,"user_name_real":"Nate"}],"discussion_count":1,"race_medal":0,"score":"1624022670","product_id":100079901,"comment_content":"è‡ªå®šä¹‰hooksä¸€èˆ¬æ”¾åœ¨å“ªä¸ªæ–‡ä»¶å¤¹ä¸‹","like_count":0},{"had_liked":false,"id":297531,"user_name":"Neil é™ˆè£","can_delete":false,"product_type":"c1","uid":1018719,"ip_address":"","ucode":"CE66700BE7E225","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8b/5f/ecf0e687.jpg","comment_is_top":false,"comment_ctime":1623601450,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1623601450","product_id":100079901,"comment_content":"useAsync å‘½åæˆ useFetch æ˜¯å¦è´´åˆ‡äº›","like_count":0},{"had_liked":false,"id":296882,"user_name":"Isaac","can_delete":false,"product_type":"c1","uid":1110607,"ip_address":"","ucode":"038C349AB508AB","user_header":"https://static001.geekbang.org/account/avatar/00/10/f2/4f/59bd4141.jpg","comment_is_top":false,"comment_ctime":1623209714,"is_pvip":false,"replies":[{"id":"107976","content":"æ˜¯çš„ã€‚","user_name":"ä½œè€…å›å¤","comment_id":296882,"uid":"1018676","ip_address":"","utype":1,"ctime":1623470379,"user_name_real":"Nate"}],"discussion_count":2,"race_medal":0,"score":"1623209714","product_id":100079901,"comment_content":"è€å¸ˆï¼Œè‡ªå®šä¹‰ hooks å¿…é¡»è¦ä»¥ usexxxå¼€å¤´å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1018676,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8b/34/61035278.jpg","nickname":"Nate","note":"","ucode":"844B4C20BB3D6E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":521626,"discussion_content":"æ˜¯çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623470379,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2876591,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/e4/af/f8cf4bc2.jpg","nickname":"Light èƒ–è™","note":"","ucode":"D5FCFE14172D31","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":541667,"discussion_content":"å†ç»†é—®ä¸€ä¸‹å¿…é¡»æ˜¯useå¼€å¤´çš„é©¼å³°å†™æ³•å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640510394,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":296782,"user_name":"å°ä¸ªå­å¤–æ˜Ÿäººï¼šï¼‰","can_delete":false,"product_type":"c1","uid":2642842,"ip_address":"","ucode":"AC8925E536DD58","user_header":"https://static001.geekbang.org/account/avatar/00/28/53/9a/2eddfce2.jpg","comment_is_top":false,"comment_ctime":1623158286,"is_pvip":false,"replies":[{"id":"107954","content":"è°¢è°¢~","user_name":"ä½œè€…å›å¤","comment_id":296782,"uid":"1018676","ip_address":"","utype":1,"ctime":1623388996,"user_name_real":"Nate"}],"discussion_count":1,"race_medal":0,"score":"1623158286","product_id":100079901,"comment_content":"è¿™èŠ‚è¯¾è¶…çº§æ£’ï¼è°¢è°¢è€å¸ˆã€‚åŠªåŠ›åœ¨å®è·µä¸­ï¼Œä½¿ç”¨è¿™èŠ‚è¯¾çš„å†…å®¹","like_count":0},{"had_liked":false,"id":296478,"user_name":"Bugèˆ¬çš„å­˜åœ¨","can_delete":false,"product_type":"c1","uid":1573766,"ip_address":"","ucode":"7A61F7AA3B49A3","user_header":"https://static001.geekbang.org/account/avatar/00/18/03/86/c9051c6a.jpg","comment_is_top":false,"comment_ctime":1622993719,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1622993719","product_id":100079901,"comment_content":" const increment = useCallback((step = 1) =&gt; setCounter(counter + step), [counter]);","like_count":0},{"had_liked":false,"id":296402,"user_name":"æ»¡æœˆ","can_delete":false,"product_type":"c1","uid":1380258,"ip_address":"","ucode":"5D4F8B769E79F6","user_header":"https://static001.geekbang.org/account/avatar/00/15/0f/a2/2bb7df25.jpg","comment_is_top":false,"comment_ctime":1622956965,"is_pvip":false,"replies":[{"id":"107946","content":"èµ~ ä¹Ÿå¯ä»¥åœ¨ useCounter çš„æ—¶å€™ä¼ å‚æ•°ã€‚","user_name":"ä½œè€…å›å¤","comment_id":296402,"uid":"1018676","ip_address":"","utype":1,"ctime":1623388132,"user_name_real":"Nate"}],"discussion_count":1,"race_medal":0,"score":"1622956965","product_id":100079901,"comment_content":"import React, { useState, useCallback } from &#39;react&#39;;<br><br>function useCounter() {<br>  const [count, setCount] = useState(0);<br>  const increment = useCallback(<br>    (delta = 1) =&gt; setCount(count + delta),<br>    [count],<br>  );<br>  const decrement = useCallback(<br>    (delta = 1) =&gt; setCount(count - delta),<br>    [count],<br>  );<br>  const reset = useCallback(() =&gt; setCount(0), []);<br>  return {<br>    count,<br>    increment,<br>    decrement,<br>    reset,<br>  };<br>}<br><br>export default function Counter() {<br>  &#47;&#47; è°ƒç”¨è‡ªå®šä¹‰ Hook<br>  const { count, increment, decrement, reset } = useCounter();<br><br>  &#47;&#47; æ¸²æŸ“ UI<br>  return (<br>    &lt;div&gt;<br>      &lt;button onClick={() =&gt; decrement()}&gt; - &lt;&#47;button&gt;<br>      &lt;p&gt;{count}&lt;&#47;p&gt;<br>      &lt;button onClick={() =&gt; increment(2)}&gt; + &lt;&#47;button&gt;<br>      &lt;button onClick={reset}&gt; reset &lt;&#47;button&gt;<br>    &lt;&#47;div&gt;<br>  );<br>}","like_count":0},{"had_liked":false,"id":296399,"user_name":"Geek_71adef","can_delete":false,"product_type":"c1","uid":2643315,"ip_address":"","ucode":"E3CC6F6FBB1468","user_header":"","comment_is_top":false,"comment_ctime":1622954387,"is_pvip":false,"replies":[{"id":"107945","content":"è‡ªå®šä¹‰çš„ useHooks ä¸ä¸€å®šè¿”å›ä¸€ä¸ªæ–¹æ³•ï¼Œå¯èƒ½åªæ˜¯æœ¬èº«éœ€è¦ä¸€äº›å‚æ•°ï¼Œåœºæ™¯æ˜¯ä¸ä¸€æ ·çš„ã€‚","user_name":"ä½œè€…å›å¤","comment_id":296399,"uid":"1018676","ip_address":"","utype":1,"ctime":1623388080,"user_name_real":"Nate"}],"discussion_count":1,"race_medal":0,"score":"1622954387","product_id":100079901,"comment_content":"è¯·é—®å¦‚ä½•åŒºåˆ« è‡ªå®šä¹‰hookæ˜¯åœ¨usehookä¼ å‚ï¼Œè¿˜æ˜¯åœ¨usehooké‡Œé¢çš„æ–¹æ³•ä¼ å‚ï¼Ÿ","like_count":0},{"had_liked":false,"id":296335,"user_name":"xgqfrms","can_delete":false,"product_type":"c1","uid":1436879,"ip_address":"","ucode":"7858A74FEEBE7D","user_header":"https://static001.geekbang.org/account/avatar/00/15/ec/cf/8c1f8d38.jpg","comment_is_top":false,"comment_ctime":1622903133,"is_pvip":false,"replies":[{"id":"107748","content":"res.json() è¿”å›çš„æ˜¯ä¸€ä¸ª promiseï¼Œæ‰€ä»¥è¦ await å“¦ã€‚","user_name":"ä½œè€…å›å¤","comment_id":296335,"uid":"1018676","ip_address":"","utype":1,"ctime":1623082131,"user_name_real":"Nate"}],"discussion_count":7,"race_medal":0,"score":"1622903133","product_id":100079901,"comment_content":"å®Œå…¨æ²¡æœ‰å¿…è¦ä½¿ç”¨ await å¤„ç† res å‘€<br><br>```js<br>&#47;&#47; return await res.json();<br><br> return res.json();<br><br>```","like_count":0,"discussions":[{"author":{"id":1018676,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8b/34/61035278.jpg","nickname":"Nate","note":"","ucode":"844B4C20BB3D6E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":521401,"discussion_content":"res.json() è¿”å›çš„æ˜¯ä¸€ä¸ª promiseï¼Œæ‰€ä»¥è¦ await å“¦ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623082131,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1123263,"avatar":"https://static001.geekbang.org/account/avatar/00/11/23/bf/071dbb60.jpg","nickname":"Nodreame","note":"","ucode":"E2CF7D8B1341E9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":377908,"discussion_content":"Body.json()è¿”å›çš„æ˜¯promise","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1622958828,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2995803,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/icDTEyU8lQ5bQJYnp7SAJicR3Nf3P8k18JcNkxib4xeuOCxEAx5OV4Eq5IFIytOHTkbSCaicPTDcZFQUKAcpFeyqIA/132","nickname":"Geek_f3ceca","note":"","ucode":"6EBAF9DBCF3923","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":574163,"discussion_content":"æˆ‘è¿˜æ˜¯èµæˆxgqfrmsï¼Œä¸éœ€è¦awaitã€‚async è¿”å›é»˜è®¤ä¼šè½¬promiseçš„ï¼Œç›´æ¥returnä¸ªpromiseä¸€æ ·çš„æ•ˆæœã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1653880124,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1672018,"avatar":"https://static001.geekbang.org/account/avatar/00/19/83/52/47dc4d5c.jpg","nickname":"Claus Wong","note":"","ucode":"E07685C4E7B07F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":380420,"discussion_content":"https://developer.mozilla.org/zh-CN/docs/Web/API/Body/json","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1624498159,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1436879,"avatar":"https://static001.geekbang.org/account/avatar/00/15/ec/cf/8c1f8d38.jpg","nickname":"xgqfrms","note":"","ucode":"7858A74FEEBE7D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":378530,"discussion_content":"```js\n\nasync () => { \n  const res = await fetch(`${endpoint}/posts`); \n  return await res.json(); \n}\n\nasync () => { \n  const res = await fetch(`${endpoint}/posts`); \n  // res å·²ç» await æˆåŠŸäº†ï¼Œä¸éœ€è¦å†æ¬¡ await\n  return res.json(); \n}\n\n```","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623260423,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1436879,"avatar":"https://static001.geekbang.org/account/avatar/00/15/ec/cf/8c1f8d38.jpg","nickname":"xgqfrms","note":"","ucode":"7858A74FEEBE7D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":378529,"discussion_content":"res å·²ç» await äº†å‘€ï¼Œæ‰€ä»¥ res.json() ä¸éœ€è¦ å†æ¬¡ await è¿˜æ˜¯æ²¡çœ‹æ˜ç™½å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623260309,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1195144,"avatar":"https://static001.geekbang.org/account/avatar/00/12/3c/88/6bef27d6.jpg","nickname":"å¤§ç¥åšå£«","note":"","ucode":"8C4318095949F0","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1436879,"avatar":"https://static001.geekbang.org/account/avatar/00/15/ec/cf/8c1f8d38.jpg","nickname":"xgqfrms","note":"","ucode":"7858A74FEEBE7D","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":379967,"discussion_content":"Body.json()è¿”å›çš„æ˜¯promiseï¼Œæ‰€ä»¥ res.json éœ€è¦ å†æ¬¡ await è¿˜æ˜¯æ²¡çœ‹æ˜ç™½å—ï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1624264473,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":378529,"ip_address":""},"score":379967,"extra":""}]}]},{"had_liked":false,"id":296282,"user_name":"Free fall","can_delete":false,"product_type":"c1","uid":2637054,"ip_address":"","ucode":"8DBF73CD0F423F","user_header":"","comment_is_top":false,"comment_ctime":1622880543,"is_pvip":false,"replies":[{"id":"107747","content":"ä¸é”™ï¼Œè¿™æ ·å¯ä»¥åœ¨è°ƒç”¨æ–¹æ³•çš„æ—¶å€™æŒ‡å®šå…·ä½“åŠ å‡ ~","user_name":"ä½œè€…å›å¤","comment_id":296282,"uid":"1018676","ip_address":"","utype":1,"ctime":1623081944,"user_name_real":"Nate"}],"discussion_count":1,"race_medal":0,"score":"1622880543","product_id":100079901,"comment_content":"const useCounter = (initCount = 0) =&gt; {<br>  const [count, setCount] = useState(initCount)<br><br>  const increase = useCallback((body) =&gt; {<br>    setCount((count) =&gt; (count += body))<br>  }, [])<br><br>  return [count, increase]<br>}","like_count":0}]}