{"id":87477,"title":"07 | Clangã€Infer å’Œ OCLint ï¼Œæˆ‘ä»¬åº”è¯¥ä½¿ç”¨è°æ¥åšé™æ€åˆ†æï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯æˆ´é“­ã€‚</p><p>éšç€ä¸šåŠ¡å¼€å‘è¿­ä»£é€Ÿåº¦è¶Šæ¥è¶Šå¿«ï¼Œå®Œå…¨ä¾èµ–äººå·¥ä¿è¯å·¥ç¨‹è´¨é‡ä¹Ÿå˜å¾—è¶Šæ¥è¶Šä¸ç‰¢é ã€‚æ‰€ä»¥ï¼Œé™æ€åˆ†æï¼Œè¿™ç§å¯ä»¥å¸®åŠ©æˆ‘ä»¬åœ¨ç¼–å†™ä»£ç çš„é˜¶æ®µå°±èƒ½åŠæ—¶å‘ç°ä»£ç é”™è¯¯ï¼Œä»è€Œåœ¨æ ¹å„¿ä¸Šä¿è¯å·¥ç¨‹è´¨é‡çš„æŠ€æœ¯ï¼Œå°±æˆä¸ºäº†iOSå¼€å‘è€…æœ€å¸¸ç”¨åˆ°çš„ä¸€ç§ä»£ç è°ƒè¯•æŠ€æœ¯ã€‚</p><p>Xcode è‡ªå¸¦çš„é™æ€åˆ†æå·¥å…· Analyzeï¼Œé€šè¿‡é™æ€è¯­æ³•åˆ†æèƒ½å¤Ÿæ‰¾å‡ºåœ¨ä»£ç å±‚é¢å°±èƒ½å‘ç°çš„å†…å­˜æ³„éœ²é—®é¢˜ï¼Œè¿˜å¯ä»¥é€šè¿‡ä¸Šä¸‹æ–‡åˆ†æå‡ºæ˜¯å¦å­˜åœ¨å˜é‡æ— ç”¨ç­‰é—®é¢˜ã€‚ä½†æ˜¯ï¼ŒAnalyze çš„åŠŸèƒ½è¿˜æ˜¯æœ‰é™ï¼Œè¿˜æ˜¯æ— æ³•å¸®åŠ©æˆ‘ä»¬åœ¨ç¼–å†™ä»£ç çš„é˜¶æ®µå‘ç°æ›´å¤šçš„é—®é¢˜ã€‚æ‰€ä»¥ï¼Œè¿™æ‰è¯ç”Ÿå‡ºäº†åŠŸèƒ½æ›´å…¨ã€å®šåˆ¶åŒ–é«˜ã€æ•ˆç‡é«˜çš„ç¬¬ä¸‰æ–¹é™æ€æ£€æŸ¥å·¥å…·ã€‚æ¯”å¦‚ï¼ŒOCLintã€Inferã€Clangé™æ€åˆ†æå™¨ç­‰ã€‚</p><p>ä¸€æ¬¾ä¼˜ç§€çš„é™æ€åˆ†æå™¨ï¼Œèƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬æ›´åŠ å…¨é¢çš„å‘ç°äººå·¥æµ‹è¯•ä¸­çš„ç›²ç‚¹ï¼Œæé«˜æ£€æŸ¥é—®é¢˜çš„æ•ˆç‡ï¼Œå¯»æ‰¾æ½œåœ¨çš„å¯ç”¨æ€§é—®é¢˜ï¼Œæ¯”å¦‚ç©ºæŒ‡é’ˆè®¿é—®ã€èµ„æºå’Œå†…å­˜æ³„éœ²ç­‰ç­‰ã€‚</p><p>åŒæ—¶ï¼Œé™æ€åˆ†æå™¨è¿˜å¯ä»¥æ£€æŸ¥ä»£ç è§„èŒƒå’Œä»£ç å¯ç»´æŠ¤æ€§çš„é—®é¢˜ï¼Œæ ¹æ®ä¸€äº›æŒ‡æ ‡å°±èƒ½å¤Ÿæ‰¾å‡ºå“ªäº›ä»£ç éœ€è¦ä¼˜åŒ–å’Œé‡æ„ã€‚è¿™é‡Œæœ‰ä¸‰ä¸ªå¸¸ç”¨çš„å¤æ‚åº¦æŒ‡æ ‡ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬åº¦é‡æ˜¯å¦éœ€è¦ä¼˜åŒ–å’Œé‡æ„ä»£ç ã€‚</p><ul>\n<li>\n<p>åœˆå¤æ‚åº¦é«˜ã€‚åœˆå¤æ‚åº¦ï¼ŒæŒ‡çš„æ˜¯éå†ä¸€ä¸ªæ¨¡å—æ—¶çš„å¤æ‚åº¦ï¼Œè¿™ä¸ªå¤æ‚åº¦æ˜¯ç”±åˆ†æ”¯è¯­å¥æ¯”å¦‚ ifã€caseã€whileã€forï¼Œè¿˜æœ‰è¿ç®—ç¬¦æ¯”å¦‚ &amp;&amp;ã€||ï¼Œä»¥åŠå†³ç­–ç‚¹ï¼Œå…±åŒç¡®å®šçš„ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œåœˆå¤æ‚åº¦åœ¨ä»¥ 4 ä»¥å†…æ˜¯ä½å¤æ‚åº¦ï¼Œ5åˆ°7æ˜¯ä¸­å¤æ‚åº¦ï¼Œ8åˆ°10æ˜¯é«˜å¤æ‚åº¦ï¼Œ11ä»¥ä¸Šæ—¶å¤æ‚åº¦å°±éå¸¸é«˜äº†ï¼Œè¿™æ—¶éœ€è¦è€ƒè™‘é‡æ„ï¼Œä¸ç„¶å°±ä¼šå› ä¸ºæµ‹è¯•ç”¨ä¾‹çš„æ•°é‡è¿‡é«˜è€Œéš¾ä»¥ç»´æŠ¤ã€‚<br>\nè€Œè¿™ä¸ªåœˆå¤æ‚åº¦çš„å€¼ï¼Œæ˜¯å¾ˆéš¾é€šè¿‡äººå·¥åˆ†æå‡ºæ¥çš„ã€‚è€Œé™æ€åˆ†æå™¨å°±å¯ä»¥æ ¹æ®åœˆå¤æ‚åº¦è§„åˆ™ï¼Œæ¥ç›‘æ§åœˆå¤æ‚åº¦ï¼ŒåŠæ—¶å‘ç°ä»£ç æ˜¯å¦è¿‡äºå¤æ‚ï¼Œå‘ç°é—®é¢˜ååŠæ—©è§£å†³ï¼Œä»¥å…é€ æˆä»£ç è¿‡äºå¤æ‚éš¾ä»¥ç»´æŠ¤ã€‚</p>\n</li>\n<li>\n<p>NPath å¤æ‚åº¦é«˜ã€‚NPath åº¦é‡æ˜¯æŒ‡ä¸€ä¸ªæ–¹æ³•æ‰€æœ‰å¯èƒ½æ‰§è¡Œçš„è·¯å¾„æ•°é‡ã€‚ä¸€èˆ¬é«˜äº200å°±éœ€è¦è€ƒè™‘é™ä½å¤æ‚åº¦äº†ã€‚</p>\n</li>\n<li>\n<p>NCSS åº¦é‡é«˜ã€‚NCSS åº¦é‡æ˜¯æŒ‡ä¸åŒ…å«æ³¨é‡Šçš„æºç è¡Œæ•°ï¼Œæ–¹æ³•å’Œç±»è¿‡å¤§ä¼šå¯¼è‡´ä»£ç ç»´æŠ¤æ—¶é˜…è¯»å›°éš¾ï¼Œå¤§çš„ NCSS å€¼è¡¨ç¤ºæ–¹æ³•æˆ–ç±»åšçš„äº‹æƒ…å¤ªå¤šï¼Œåº”è¯¥æ‹†åˆ†æˆ–é‡æ„ã€‚ä¸€èˆ¬æ–¹æ³•è¡Œæ•°ä¸è¿‡ç™¾ï¼Œç±»çš„è¡Œæ•°ä¸è¿‡åƒã€‚</p>\n</li>\n</ul><!-- [[[read_end]]] --><p>ä½†æ˜¯ï¼Œä½¿ç”¨é™æ€åˆ†ææŠ€æœ¯æ¥ä¿è¯å·¥ç¨‹è´¨é‡ï¼Œä¹Ÿå¹¶ä¸å°½å¦‚äººæ„ï¼Œè¿˜æœ‰å¦‚ä¸‹<strong>ä¸¤å¤§ç¼ºé™·</strong>ï¼š</p><ol>\n<li>\n<p>éœ€è¦è€—è´¹æ›´é•¿çš„æ—¶é—´ã€‚ç›¸æ¯”äºç¼–è¯‘è¿‡ç¨‹ï¼Œä½¿ç”¨é™æ€åˆ†ææŠ€æœ¯å‘ç°æ·±å±‚æ¬¡ç¨‹åºé”™è¯¯æ—¶ï¼Œä¼šå¯¹å½“å‰åˆ†æçš„æ–¹æ³•ã€å‚æ•°ã€å˜é‡å»å’Œæ•´ä¸ªå·¥ç¨‹å…³è”ä»£ç ä¸€èµ·åšåˆ†æã€‚æ‰€ä»¥ï¼Œéšç€å·¥ç¨‹ä»£ç é‡çš„å¢åŠ ï¼Œæ¯ä¸€æ­¥åˆ†ææ‰€ä¾èµ–çš„å½±å“é¢éƒ½ä¼šå¢å¤§ï¼Œæ‰€éœ€è€—æ—¶å°±æ›´é•¿ã€‚<br>\nè™½ç„¶æˆ‘ä»¬åœ¨è®¾è®¡é™æ€åˆ†æå™¨æ—¶ï¼Œå°±å·²ç»å¯¹å…¶é€Ÿåº¦åšäº†å¾ˆå¤šä¼˜åŒ–ï¼Œä½†è¿˜æ˜¯è¾¾ä¸åˆ°ç¨‹åºç¼–è¯‘çš„é€Ÿåº¦ã€‚å› ä¸ºé™æ€åˆ†ææœ¬èº«å°±åŒ…å«äº†ç¼–è¯‘æœ€è€—æ—¶çš„ IO å’Œè¯­æ³•åˆ†æé˜¶æ®µï¼Œè€Œä¸”é™æ€åˆ†æçš„å†…å®¹å¤šäºç¼–è¯‘ï¼Œæ‰€ä»¥å†æ€ä¹ˆä¼˜åŒ–ï¼Œå³ä½¿æ˜¯æœ€å¥½çš„æƒ…å†µä¹Ÿä¼šæ¯”ç¼–è¯‘è¿‡ç¨‹æ¥å¾—è¦æ…¢ã€‚</p>\n</li>\n<li>\n<p>é™æ€åˆ†æå™¨åªèƒ½æ£€æŸ¥å‡ºé‚£äº›ä¸“é—¨è®¾è®¡å¥½çš„ã€å¯æŸ¥æ‰¾çš„é”™è¯¯ã€‚å¯¹äºç‰¹å®šç±»å‹çš„é”™è¯¯åˆ†æï¼Œè¿˜éœ€è¦å¼€å‘è€…é è‡ªå·±çš„èƒ½åŠ›å†™ä¸€äº›æ’ä»¶å¹¶æ·»åŠ è¿›å»ã€‚</p>\n</li>\n</ol><p>å¥½äº†ï¼Œç°åœ¨æˆ‘ä»¬å·²ç»äº†è§£äº†é™æ€åˆ†æå™¨çš„ä¼˜ç¼ºç‚¹ï¼Œé‚£ä¹ˆé¢å¯¹ç¹å¤šçš„iOS çš„é™æ€ä»£ç æ£€æŸ¥å·¥å…·ï¼Œæˆ‘ä»¬åˆ°åº•åº”è¯¥é€‰æ‹©å“ªä¸€ä¸ªå‘¢ï¼Ÿ</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘é€‰æ‹©äº†3æ¬¾ä¸»æµçš„é™æ€åˆ†æå·¥å…·OCLintã€Clangé™æ€åˆ†æå™¨ã€Inferï¼Œå’Œä½ è¯´è¯´å¦‚ä½•é€‰æ‹©çš„é—®é¢˜ã€‚</p><h2>OCLint</h2><p>OCLint æ˜¯åŸºäº Clang Tooling å¼€å‘çš„é™æ€åˆ†æå·¥å…·ï¼Œä¸»è¦ç”¨æ¥å‘ç°ç¼–è¯‘å™¨æ£€æŸ¥ä¸åˆ°çš„é‚£äº›æ½œåœ¨çš„å…³é”®æŠ€æœ¯é—®é¢˜ã€‚2017å¹´9æœˆä»½æ–°å‘å¸ƒçš„ OCLint 0.13ç‰ˆæœ¬ä¸­ï¼ŒåŒ…å«äº†71æ¡è§„åˆ™ã€‚</p><p>è¿™äº›è§„åˆ™å·²ç»åŸºæœ¬è¦†ç›–äº†å…·æœ‰é€šç”¨æ€§çš„è§„åˆ™ï¼Œä¸»è¦åŒ…æ‹¬è¯­æ³•ä¸Šçš„åŸºç¡€è§„åˆ™ã€Cocoa åº“ç›¸å…³è§„åˆ™ã€ä¸€äº›çº¦å®šä¿—æˆçš„è§„åˆ™ã€å„ç§ç©ºè¯­å¥æ£€æŸ¥ã€æ˜¯å¦æŒ‰æ–°è¯­æ³•æ”¹å†™çš„æ£€æŸ¥ã€å‘½åä¸Šé•¿å˜é‡åçŸ­å˜é‡åæ£€æŸ¥ã€æ— ç”¨çš„è¯­å¥å˜é‡å’Œå‚æ•°çš„æ£€æŸ¥ã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜åŒ…æ‹¬äº†å’Œä»£ç é‡å¤§å°æ˜¯å¦åˆç†ç›¸å…³çš„ä¸€äº›è§„åˆ™ï¼Œæ¯”å¦‚è¿‡å¤§çš„ç±»ã€ç±»é‡Œæ–¹æ³•æ˜¯å¦å¤ªå¤šã€å‚æ•°æ˜¯å¦è¿‡å¤šã€Block åµŒå¥—æ˜¯å¦å¤ªæ·±ã€æ–¹æ³•é‡Œä»£ç æ˜¯å¦è¿‡å¤šã€åœˆå¤æ‚åº¦çš„æ£€æŸ¥ç­‰ã€‚</p><p>ä½ å¯ä»¥åœ¨<a href=\"http://docs.oclint.org/en/stable/rules/index.html\">å®˜æ–¹è§„åˆ™ç´¢å¼•</a>ä¸­ï¼ŒæŸ¥çœ‹å®Œæ•´çš„è§„åˆ™è¯´æ˜ã€‚</p><p>è¿™äº›è§„åˆ™å¯ä»¥åœ¨è¿è¡Œæ—¶è¢«åŠ¨æ€åœ°åŠ è½½åˆ°ç³»ç»Ÿä¸­ï¼Œè§„åˆ™é…ç½®çµæ´»ã€å¯æ‰©å±•æ€§å¥½ã€æ–¹ä¾¿è‡ªå®šä¹‰ã€‚</p><p>è¯´åˆ°OCLintçš„å®‰è£…æ–¹å¼ï¼Œæˆ‘å»ºè®®ä½ ä½¿ç”¨ Homebrewçš„æ–¹å¼ã€‚Homebrew æ˜¯ macOS ä¸‹ä¸“é—¨ç”¨æ¥è¿›è¡Œè½¯ä»¶åŒ…ç®¡ç†çš„ä¸€ä¸ªå·¥å…·ï¼Œä½¿ç”¨èµ·æ¥å¾ˆæ–¹ä¾¿ï¼Œè®©ä½ æ— éœ€å…³å¿ƒä¸€äº›ä¾èµ–å’Œè·¯å¾„é…ç½®ã€‚</p><p>ä½¿ç”¨ Homebrewçš„æ–¹å¼å®‰è£…æ—¶ï¼Œæˆ‘ä»¬éœ€è¦é¦–å…ˆè®¾ç½®brewçš„ç¬¬ä¸‰æ–¹ä»“åº“ï¼Œç„¶åå®‰è£…OCLintã€‚å®‰è£…æ–¹æ³•æ˜¯åœ¨ç»ˆç«¯è¾“å…¥ï¼š</p><pre><code>brew tap oclint/formulae\nbrew install oclint\n</code></pre><p>å®‰è£…å®Œæˆï¼Œå…ˆç¼–å†™ä¸€ä¸ª Hello world ä»£ç æ¥æµ‹è¯•ä¸‹ï¼Œåˆ›å»ºä¸€ä¸ª Hello.m æ–‡ä»¶æ¥ç¼–å†™ä»£ç ï¼Œä½¿ç”¨ OCLint æ¥æ£€æŸ¥ä¸‹å‰é¢ç¼–å†™çš„ Hello.m ï¼Œåœ¨ç»ˆç«¯è¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼š</p><pre><code>oclint Hello.m\n</code></pre><p>ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ï¼Œå°†æ£€æŸ¥ç»“æœç”Ÿæˆä¸ºä¸€ä¸ªHTMLæ ¼å¼çš„æŠ¥å‘Šï¼š</p><pre><code>oclint -report-type html -o report.html Hello.m\n</code></pre><h2>Clang é™æ€åˆ†æå™¨</h2><p>Clang é™æ€åˆ†æå™¨ï¼ˆClang Static Analyzerï¼‰æ˜¯ä¸€ä¸ªç”¨ C++ å¼€å‘çš„ï¼Œç”¨æ¥åˆ†æ Cã€C++ å’Œ Objective-C çš„å¼€æºå·¥å…·ï¼Œæ˜¯ Clang é¡¹ç›®çš„ä¸€éƒ¨åˆ†ï¼Œæ„å»ºåœ¨ Clang å’Œ LLVM ä¹‹ä¸Šã€‚Clang é™æ€åˆ†æå™¨çš„åˆ†æå¼•æ“ç”¨çš„å°±æ˜¯ Clang çš„åº“ã€‚</p><p>Clang é™æ€åˆ†æå™¨ä¸“é—¨ä¸ºé€Ÿåº¦åšè¿‡ä¼˜åŒ–ï¼Œå¯ä»¥åœ¨ä¿è¯æŸ¥å‡ºé”™è¯¯çš„å‰æä¸‹ï¼Œä½¿ç”¨æ›´èªæ˜çš„ç®—æ³•å‡å°‘æ£€æŸ¥çš„å·¥ä½œé‡ã€‚</p><p>ä½ å¯ä»¥ç‚¹å‡»<a href=\"http://clang-analyzer.llvm.org/release_notes.html\">è¿™é‡Œä¸‹è½½</a>Clangé™æ€åˆ†æå™¨ï¼Œç„¶åè§£å‹å°±å¯ä»¥äº†ï¼Œä¸éœ€è¦æ”¾åˆ°ç‰¹å®šç›®å½•ä¸‹ã€‚è€Œå¸è½½å®ƒçš„è¯ï¼Œåˆ é™¤è¿™ä¸ªè§£å‹åçš„ç›®å½•å³å¯ã€‚</p><p><strong>åœ¨Clangé™æ€åˆ†æå™¨ä¸­ï¼Œå¸¸ç”¨çš„å°±æ˜¯ scan-build å’Œ scan-viewè¿™ä¸¤ä¸ªå·¥å…·ã€‚</strong></p><p>scan-build å’Œ scan-view æ‰€åœ¨çš„ç›®å½•è·¯å¾„ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/2e/a1/2e6f1b41292b3744ddc3e0dbb960a1a1.png?wh=1256*430\" alt=\"\"></p><center><span class=\"reference\">å›¾1 scan-build å’Œ scan-view æ‰€åœ¨çš„ç›®å½•è·¯å¾„</span></center><p>scan-build æ˜¯ç”¨æ¥è¿è¡Œåˆ†æå™¨çš„å‘½ä»¤è¡Œå·¥å…·ï¼›scan-view åŒ…å«äº† scan-build å·¥å…·ï¼Œä¼šåœ¨ scan-build æ‰§è¡Œå®Œåå°†ç»“æœå¯è§†åŒ–ã€‚</p><p>scan-build çš„åŸç†æ˜¯ï¼Œå°†ç¼–è¯‘å™¨æ„å»ºæ”¹æˆå¦ä¸€ä¸ªâ€œå‡çš„â€ç¼–è¯‘å™¨æ¥æ„å»ºï¼Œè¿™ä¸ªâ€œå‡çš„â€ç¼–è¯‘å™¨ä¼šæ‰§è¡Œ Clang æ¥ç¼–è¯‘ï¼Œç„¶åæ‰§è¡Œé™æ€åˆ†æå™¨åˆ†æä½ çš„ä»£ç ã€‚</p><p>scan-buildçš„ä½¿ç”¨æ–¹æ³•ï¼Œä¹Ÿå¾ˆç®€å•ï¼Œä½ åªéœ€è¦åˆ°é¡¹ç›®ç›®å½•ä¸‹ï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å³å¯ï¼š</p><pre><code>\\yourpath\\scan-build -k -V make\n</code></pre><p>å…³äºscan-buildçš„æ›´å¤šå‚æ•°å’Œä½¿ç”¨è¯´æ˜ï¼Œä½ å¯ä»¥ç‚¹å‡»<a href=\"http://clang-analyzer.llvm.org/scan-build\">è¿™ä¸ªé“¾æ¥</a>æŸ¥çœ‹ã€‚</p><p><strong>Clang é™æ€åˆ†æå™¨æ˜¯ç”±åˆ†æå¼•æ“(analyzer core)å’Œ checkers ç»„æˆçš„ã€‚</strong>æ‰€æœ‰çš„ checker éƒ½æ˜¯åŸºäºåº•å±‚åˆ†æå¼•æ“ä¹‹ä¸Šçš„ã€‚é€šè¿‡åˆ†æå¼•æ“æä¾›çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥ç¼–å†™æ–°çš„ checkerã€‚</p><p>checker æ¶æ„èƒ½å¤Ÿæ–¹ä¾¿ç”¨æˆ·æ‰©å±•ä»£ç æ£€æŸ¥çš„è§„åˆ™ï¼Œæˆ–è€…é€šè¿‡è‡ªå®šä¹‰æ¥æ‰©å±•bug ç±»å‹ã€‚å¦‚æœä½ æƒ³ç¼–å†™è‡ªå·±çš„ checkerï¼Œå¯ä»¥åœ¨ Clang é¡¹ç›®çš„ lib/StaticAnalyzer/Checkers ç›®å½•ä¸‹æ‰¾åˆ°ç¤ºä¾‹å‚è€ƒï¼Œæ¯”å¦‚ ObjCUnusedIVarsChecker.cpp å°±æ˜¯ç”¨æ¥æ£€æŸ¥æ˜¯å¦æœ‰å®šä¹‰äº†ï¼Œä½†æ˜¯ä»æœªä½¿ç”¨è¿‡çš„å˜é‡ã€‚</p><p>å½“ç„¶ï¼Œå¦‚æœä¸ºäº†ç¼–å†™è‡ªå®šä¹‰çš„ checker ä¸€å¼€å§‹å°±åŸ‹å¤´è¿›å»çœ‹é‚£äº›ç¤ºä¾‹ä»£ç æ˜¯å¾ˆéš¾çœ‹æ‡‚çš„ï¼Œä½ ç”šè‡³éƒ½ä¸èƒ½çŸ¥é“ç¼–å†™ checker æ—¶æœ‰å“ªäº›æ–¹æ³•å¯ä»¥ä¸ºæˆ‘æ‰€ç”¨ã€‚æ‰€ä»¥ï¼Œä½ éœ€è¦å…ˆäº†è§£ Clang é™æ€åˆ†æå™¨æä¾›äº†å“ªäº›åŠŸèƒ½æ¥å£ï¼Œç„¶åå†å‚è€ƒå®˜æ–¹çš„å¤§é‡å®ä¾‹ï¼Œå»äº†è§£æ€ä¹ˆä½¿ç”¨è¿™äº›åŠŸèƒ½æ¥å£ï¼Œåœ¨è¿™ä¹‹åå†åŠ¨æ‰‹å¼€å‘æ‰ä¼šäº‹åŠåŠŸå€ã€‚</p><p><strong>æ¥ä¸‹æ¥ï¼Œæˆ‘å°±è·Ÿä½ èŠèŠå¼€å‘ checker æ—¶éœ€è¦äº†è§£çš„ Clang é™æ€åˆ†æå™¨æä¾›çš„ä¸€äº›åŠŸèƒ½æ¥å£ã€‚</strong></p><p>checker çš„å®˜æ–¹ç¤ºä¾‹ä»£ç é‡Œæœ‰ä¸€ä¸ªéå¸¸å®ç”¨çš„ï¼Œä¹Ÿå°±æ˜¯å†…å­˜æ³„éœ²æ£€æŸ¥ç¤ºä¾‹ MallocCheckerï¼Œä½ å¯ä»¥ç‚¹å‡»<a href=\"http://clang.llvm.org/doxygen/MallocChecker_8cpp_source.html\">è¿™ä¸ªé“¾æ¥</a>æŸ¥çœ‹ä»£ç ã€‚</p><p>åœ¨è¿™æ®µä»£ç å¼€å¤´ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¼•å…¥äº† clang/AST/ å’Œ clang/StaticAnalyzer/Core/PathSensitive/ ç›®å½•ä¸‹çš„å¤´æ–‡ä»¶ã€‚è¿™ä¸¤ä¸ªç›®å½•ä¸‹å®šä¹‰çš„æ¥å£åŠŸèƒ½éå¸¸å¼ºå¤§ï¼Œå¤§éƒ¨åˆ† checker éƒ½æ˜¯åŸºäºæ­¤å¼€å‘çš„ã€‚</p><p>clang/AST/ ç›®å½•ä¸­ï¼Œæœ‰è¯­æ³•æ ‘éå† RecursiveASTVisitorï¼Œè¿˜æœ‰è¯­æ³•æ ‘å±‚çº§éå† StmtVisitorï¼Œéå†è¿‡ç¨‹ä¸­ï¼Œä¼šæœ‰å¾ˆå¤šå›è°ƒå‡½æ•°å¯ä»¥è®© Checker è¿›è¡Œæ£€æŸ¥ã€‚æ¯”å¦‚ï¼Œæ–¹æ³•è°ƒç”¨å‰çš„å›è°ƒ checkPreCallã€æ–¹æ³•è°ƒç”¨åçš„å›è°ƒ checkPostCallï¼ŒCFGï¼ˆControl Flow Graph æ§åˆ¶æµç¨‹å›¾ï¼‰ åˆ†æ”¯è°ƒç”¨æ—¶çš„å›è°ƒ checkBranchConditionã€CFG è·¯å¾„åˆ†æç»“æŸæ—¶çš„å›è°ƒ checkEndAnalysis ç­‰ç­‰ã€‚æœ‰äº†è¿™äº›å›è°ƒï¼Œæˆ‘ä»¬å°±å¯ä»¥ä»è¯­æ³•æ ‘å±‚çº§å’Œè·¯å¾„ä¸Šå»åšé™æ€æ£€æŸ¥çš„å·¥ä½œäº†ã€‚</p><p>clang/StaticAnalyzer/Core/PathSensitive/ ç›®å½•é‡Œï¼Œå¯ä»¥è®© checker æ£€æŸ¥å˜é‡å’Œå€¼ä¸Šçš„æ›´å¤šå˜åŒ–ã€‚ä»ç›®å½• PathSensitiveï¼Œæˆ‘ä»¬ä¹Ÿèƒ½çœ‹å‡ºè¿™äº›åŠŸèƒ½å«åšè·¯å¾„æ•æ„Ÿåˆ†æï¼ˆPath-Sensitive Analysesï¼‰ï¼Œæ˜¯ä»æ¡ä»¶åˆ†æ”¯ä¸Šå»è·Ÿè¸ªï¼Œè€Œè¿™ç§è·Ÿè¸ªæ˜¯è·Ÿè¸ªæ¯ä¸€ç§åˆ†æ”¯å»åšåˆ†æã€‚</p><p>ä½†æ˜¯ï¼Œè¦å»è¿½è¸ªæ‰€æœ‰è·¯å¾„çš„è¯ï¼Œå°±å¯èƒ½ä¼šç¢°åˆ°å¾ˆå¤šå¤æ‚æƒ…å†µï¼Œç‰¹åˆ«æ˜¯æ‰§è¡Œå¾ªç¯åï¼Œé—®é¢˜ä¼šæ›´å¤æ‚ï¼Œéœ€è¦é€šè¿‡è·¯å¾„åˆå¹¶æ¥ç®€åŒ–å¤æ‚çš„æƒ…å†µï¼Œä½†æ˜¯ç®€åŒ–åå¯èƒ½å°±ä¸ä¼šåˆ†æå‡ºæ‰€æœ‰çš„è·¯å¾„ã€‚æ‰€ä»¥ï¼Œè€ƒè™‘åˆ°åˆç†æ€§é—®é¢˜çš„è¯ï¼Œæˆ‘ä»¬è¿˜æ˜¯éœ€è¦åšäº›å–èˆï¼Œè®©å…¶æ›´åŠ åˆç†ï¼Œè¾¾åˆ°å°½é‡è¾“å‡ºæ›´å¤šä¿¡æ¯çš„ç›®çš„ï¼Œæ¥æ–¹ä¾¿æˆ‘ä»¬å¼€å‘ checkerï¼Œæ£€æŸ¥å‡ºæ›´å¤šçš„ bug ã€‚</p><p>è·¯å¾„æ•æ„Ÿåˆ†æä¹ŸåŒ…å«äº†æ¨¡æ‹Ÿå†…å­˜ç®¡ç†ï¼ŒSymbolManager ç¬¦å·ç®¡ç†é‡Œç»´æŠ¤ç€å˜é‡çš„ç”Ÿå‘½å‘¨æœŸåˆ†æã€‚æƒ³è¦äº†è§£å…·ä½“å®ç°çš„è¯ï¼Œä½ å¯ä»¥ç‚¹å‡»<a href=\"http://clang.llvm.org/doxygen/SymbolManager_8h_source.html\">è¿™ä¸ªé“¾æ¥</a>å‚çœ‹æºç å®ç°ã€‚</p><p>è¿™ä¸ªå†…å­˜æ³„éœ²æ£€æŸ¥ç¤ºä¾‹ MallocChecker é‡Œï¼Œè¿ç”¨äº† Clang é™æ€åˆ†æå™¨æä¾›çš„è¯­æ³•æ ‘å±‚çº§èŠ‚ç‚¹æ£€æŸ¥ã€å˜é‡å€¼è·¯å¾„è¿½è¸ªä»¥åŠå†…å­˜ç®¡ç†åˆ†æåŠŸèƒ½æ¥å£ï¼Œå¯¹æˆ‘ä»¬ç¼–å†™è‡ªå®šä¹‰çš„ checker æ˜¯ä¸€ä¸ªå¾ˆå…¨é¢ã€å…¸å‹çš„ç¤ºä¾‹ã€‚</p><p>è¿½å…¶æ ¹æœ¬ï¼Œç¼–å†™è‡ªå·±çš„ checker ï¼Œå…¶æ ¸å¿ƒè¿˜æ˜¯è¦æ›´å¤šåœ°æŒæ¡ Clang é™æ€åˆ†æå™¨çš„å†…åœ¨åŸç†ã€‚å¾ˆæ—©ä¹‹å‰ï¼Œè‹¹æœå…¬å¸å°±åœ¨ <a href=\"https://www.youtube.com/watch?v=4lUJTY373og&amp;t=102s\">LLVM Developers Meeting</a> ä¸Šï¼Œå’Œæˆ‘ä»¬åˆ†äº«è¿‡æ€æ ·é€šè¿‡ Clang é™æ€åˆ†æå™¨å»æ‰¾ bugã€‚ä½ å¯ä»¥ç‚¹å‡»<a href=\"http://llvm.org/devmtg/2008-08/Kremenek_StaticAnalyzer.pdf\">è¿™ä¸ªé“¾æ¥</a>ï¼ŒæŸ¥çœ‹ç›¸åº”çš„PPTï¼Œè¿™å¯¹æˆ‘ä»¬äº†è§£ Clang é™æ€åˆ†æå™¨çš„åŸç†æœ‰å¾ˆå¤§çš„å¸®åŠ©ã€‚</p><p>ä¸è¿‡ï¼Œchecker æ¶æ„ä¹Ÿæœ‰ä¸å®Œç¾çš„åœ°æ–¹ï¼Œæ¯”å¦‚æ¯æ‰§è¡Œå®Œä¸€æ¡è¯­å¥ï¼Œåˆ†æå¼•æ“éœ€è¦å›å»éå†æ‰€æœ‰ checker ä¸­çš„å›è°ƒå‡½æ•°ã€‚è¿™æ ·çš„è¯ï¼Œéšç€ checker æ•°é‡çš„å¢åŠ ï¼Œæ•´ä½“æ£€æŸ¥çš„é€Ÿåº¦ä¹Ÿä¼šå˜å¾—è¶Šæ¥è¶Šæ…¢ã€‚</p><p>å¦‚æœä½ æƒ³åˆ—å‡ºå½“å‰ Clang ç‰ˆæœ¬ä¸‹çš„æ‰€æœ‰ checkerï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼š</p><pre><code>clang â€”analyze -Xclang -analyzer-checker-help\n</code></pre><p>ä¸‹é¢æ˜¾ç¤ºçš„å°±æ˜¯å¸¸ç”¨çš„ checkerï¼š</p><pre><code>debug.ConfigDumper              é…ç½®è¡¨\ndebug.DumpCFG                   æ˜¾ç¤ºæ§åˆ¶æµç¨‹å›¾\ndebug.DumpCallGraph             æ˜¾ç¤ºè°ƒç”¨å›¾\ndebug.DumpCalls                 æ‰“å°å¼•æ“éå†çš„è°ƒç”¨\ndebug.DumpDominators            æ‰“å°æ§åˆ¶æµç¨‹å›¾çš„ dominance tree\ndebug.DumpLiveVars              æ‰“å°å®æ—¶å˜é‡åˆ†æç»“æœ\ndebug.DumpTraversal             æ‰“å°å¼•æ“éå†çš„åˆ†æ”¯æ¡ä»¶\ndebug.ExprInspection            æ£€æŸ¥åˆ†æå™¨å¯¹è¡¨è¾¾å¼çš„ç†è§£\ndebug.Stats                     ä½¿ç”¨åˆ†æå™¨ç»Ÿè®¡ä¿¡æ¯å‘å‡ºè­¦å‘Š\ndebug.TaintTest                 æ ‡è®°æ±¡æŸ“çš„ç¬¦å·\ndebug.ViewCFG                   æŸ¥çœ‹æ§åˆ¶æµç¨‹å›¾\ndebug.ViewCallGraph             ä½¿ç”¨ GraphViz æŸ¥çœ‹è°ƒç”¨å›¾\ndebug.ViewExplodedGraph         ä½¿ç”¨ GraphViz æŸ¥çœ‹åˆ†è§£å›¾\n</code></pre><p>æ¥ä¸‹æ¥ï¼Œ<strong>æˆ‘å’Œä½ ä¸¾ä¸ªä¾‹å­æ¥è¯´æ˜å¦‚ä½•ä½¿ç”¨ checker</strong> ã€‚æˆ‘ä»¬å…ˆå†™ä¸€æ®µä»£ç ï¼š</p><pre><code>int main()\n{\n\tint a;\n\tint b = 10;\n\ta = b;\n\treturn a;\n}\n</code></pre><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸‹é¢è¿™æ¡å‘½ä»¤ï¼Œè°ƒç”¨ DumpCFG è¿™ä¸ª checker å¯¹ä¸Šé¢ä»£ç è¿›è¡Œåˆ†æï¼š</p><pre><code>clang -cc1 -analyze -analyzer-checker=debug.DumpCFG\n</code></pre><p>æ˜¾ç¤ºç»“æœå¦‚ä¸‹ï¼š</p><pre><code>int main()\n [B2 (ENTRY)]\n   Succs (1): B1\n\n [B1]\n   1: int a;\n   2: 10\n   3: int b = 10;\n   4: b\n   5: [B1.4] (ImplicitCastExpr, LValueToRValue, int)\n   6: a\n   7: [B1.6] = [B1.5]\n   8: a\n   9: [B1.8] (ImplicitCastExpr, LValueToRValue, int)\n  10: return [B1.9];\n   Preds (1): B2\n   Succs (1): B0\n\n [B0 (EXIT)]\n   Preds (1): B\n</code></pre><p>å¯ä»¥çœ‹å‡ºï¼Œä»£ç çš„æ§åˆ¶æµç¨‹å›¾è¢«æ‰“å°äº†å‡ºæ¥ã€‚æ§åˆ¶æµç¨‹å›¾ä¼šæŠŠç¨‹åºæ‹†å¾—æ›´ç»†ï¼Œå¯ä»¥æŠŠæ‰§è¡Œè¿‡ç¨‹è¡¨ç°å¾—æ›´ç›´è§‚ï¼Œæœ‰åŠ©äºæˆ‘ä»¬åšé™æ€åˆ†æã€‚</p><h2>Infer</h2><p>Inferæ˜¯Facebook å¼€æºçš„ã€ä½¿ç”¨ OCaml è¯­è¨€ç¼–å†™çš„é™æ€åˆ†æå·¥å…·ï¼Œå¯ä»¥å¯¹ Cã€Java å’Œ Objective-C ä»£ç è¿›è¡Œé™æ€åˆ†æï¼Œå¯ä»¥æ£€æŸ¥å‡ºç©ºæŒ‡é’ˆè®¿é—®ã€èµ„æºæ³„éœ²ä»¥åŠå†…å­˜æ³„éœ²ã€‚</p><p>Infer çš„å®‰è£…ï¼Œæœ‰ä»æºç å®‰è£…å’Œç›´æ¥å®‰è£… binary releases ä¸¤ç§æ–¹å¼ã€‚</p><p>å¦‚æœæƒ³åœ¨ macOS ä¸Šç¼–è¯‘æºç è¿›è¡Œå®‰è£…çš„è¯ï¼Œä½ éœ€è¦é¢„å…ˆå®‰è£…ä¸€äº›å·¥å…·ï¼Œè¿™äº›å·¥å…·åœ¨åé¢ç¼–è¯‘æ—¶ä¼šç”¨åˆ°ï¼Œå‘½ä»¤è¡ŒæŒ‡ä»¤å¦‚ä¸‹ï¼š</p><pre><code>brew install autoconf automake cmake opam pkg-config sqlite gmp mpfr\nbrew cask install java\n</code></pre><p>ä½ å¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ‰€ç¤ºçš„å‘½ä»¤ï¼Œé€šè¿‡ç¼–è¯‘æºç æ¥å®‰è£…ï¼š</p><pre><code># Checkout Infer\ngit clone https://github.com/facebook/infer.git\ncd infer\n# Compile Infer\n./build-infer.sh clang\n# install Infer system-wide...\nsudo make install\n# ...or, alternatively, install Infer into your PATH\nexport PATH=`pwd`/infer/bin:$PATH\n</code></pre><p>ä½¿ç”¨æºç å®‰è£…æ‰€éœ€çš„æ—¶é—´ä¼šæ¯”è¾ƒé•¿ï¼Œå› ä¸ºä¼šç¼–è¯‘ä¸€ä¸ªç‰¹å®šçš„ Clang ç‰ˆæœ¬ï¼Œè€Œ Clang æ˜¯ä¸ªåºå¤§çš„å·¥ç¨‹ï¼Œç‰¹åˆ«æ˜¯ç¬¬ä¸€æ¬¡ç¼–è¯‘çš„è€—æ—¶ä¼šæ¯”è¾ƒé•¿ã€‚æˆ‘åœ¨ç¬¬ä¸€æ¬¡ç¼–è¯‘æ—¶ï¼Œå°±å¤§æ¦‚èŠ±äº†ä¸€ä¸ªå¤šå°æ—¶ã€‚æ‰€ä»¥ï¼Œç›´æ¥å®‰è£… binary releases ä¼šæ›´å¿«äº›ï¼Œåœ¨ç»ˆç«¯è¾“å…¥ï¼š</p><pre><code>brew install infer\n</code></pre><p>Inferå°±å®‰è£…å¥½äº†ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘é€šè¿‡ä¸€ä¸ªç¤ºä¾‹å’Œä½ åˆ†äº«ä¸‹<strong>å¦‚ä½•ä½¿ç”¨ Infer</strong>ã€‚æˆ‘ä»¬å¯ä»¥å…ˆå†™ä¸€æ®µObjective-C ä»£ç ï¼š</p><pre><code>#import &lt;Foundation/Foundation.h&gt;\n\n@interface Hello: NSObject\n@property NSString* s;\n@end\n\n@implementation Hello\nNSString* m() {\n    Hello* hello = nil;\n    return hello-&gt;_s;\n}\n@end\n</code></pre><p>åœ¨ç»ˆç«¯è¾“å…¥ï¼š</p><pre><code>infer -- clang -c Hello.m\n</code></pre><p>ç»“æœå¦‚ä¸‹ï¼š</p><pre><code>Capturing in make/cc mode...\nFound 1 source file to analyze in /Users/ming/Downloads/jikeshijian/infer-out\nStarting analysis...\n\nlegend:\n  &quot;F&quot; analyzing a file\n  &quot;.&quot; analyzing a procedure\n\nF.\n*Found 5 issues*\n\nhello.m:10: error: NULL_DEREFERENCE\n  pointer `hello` last assigned on line 9 could be null and is dereferenced at line 10, column 12.\n  8.   NSString* m() {\n  9.       Hello* hello = nil;\n  10. *&gt;*    return hello-&gt;_s;\n  11.   }\n\nhello.m:10: warning: DIRECT_ATOMIC_PROPERTY_ACCESS\n  Direct access to ivar `_s` of an atomic property at line 10, column 12. Accessing an ivar of an atomic property makes the property nonatomic.\n  8.   NSString* m() {\n  9.       Hello* hello = nil;\n  10. *&gt;*    return hello-&gt;_s;\n  11.   }\n\nhello.m:4: warning: ASSIGN_POINTER_WARNING\n  Property `s` is a pointer type marked with the `assign` attribute at line 4, column 1. Use a different attribute like `strong` or `weak`.\n  2.   \n  3.   @interface Hello: NSObject\n  4. *&gt;*@property NSString* s;\n  5.   @end\n  6.   \n\nhello.m:10: warning: DIRECT_ATOMIC_PROPERTY_ACCESS\n  Direct access to ivar `_s` of an atomic property at line 10, column 12. Accessing an ivar of an atomic property makes the property nonatomic.\n  8.   NSString* m() {\n  9.       Hello* hello = nil;\n  10. *&gt;*    return hello-&gt;_s;\n  11.   }\n\nhello.m:4: warning: ASSIGN_POINTER_WARNING\n  Property `s` is a pointer type marked with the `assign` attribute at line 4, column 1. Use a different attribute like `strong` or `weak`.\n  2.   \n  3.   @interface Hello: NSObject\n  4. *&gt;*@property NSString* s;\n  5.   @end\n  6.   \n\n\n*Summary of the reports*\n\n  DIRECT_ATOMIC_PROPERTY_ACCESS: 2\n         ASSIGN_POINTER_WARNING: 2\n               NULL_DEREF\n</code></pre><p>å¯ä»¥çœ‹å‡ºï¼Œæˆ‘ä»¬å‰é¢çš„ hello.m ä»£ç é‡Œä¸€å…±æœ‰äº”ä¸ªé—®é¢˜ï¼Œå…¶ä¸­åŒ…æ‹¬ä¸€ä¸ªé”™è¯¯ã€å››ä¸ªè­¦å‘Šã€‚ç¬¬ä¸€ä¸ªé”™è¯¯å¦‚ä¸‹ï¼š</p><pre><code>hello.m:10: error: NULL_DEREFERENCE\n  pointer `hello` last assigned on line 9 could be null and is dereferenced at line 10, column 12.\n  8.   NSString* m() {\n  9.       Hello* hello = nil;\n  10. *&gt;*    return hello-&gt;_s;\n  11.   }\n</code></pre><p>è¿™ä¸ªé”™è¯¯çš„æ„æ€æ˜¯ï¼Œ hello å¯èƒ½ä¸ºç©ºï¼Œéœ€è¦å»æ‰ç¬¬10è¡Œ12åˆ—çš„å¼•ç”¨ã€‚æˆ‘æŠŠè¿™è¡Œä»£ç åšä¸‹ä¿®æ”¹ï¼Œå»æ‰å¼•ç”¨ï¼š</p><pre><code>return hello.s;\n</code></pre><p>å†åˆ°ç»ˆç«¯è¿è¡Œä¸€é infer å‘½ä»¤ï¼š</p><pre><code>infer -- clang -c Hello.m\n</code></pre><p>ç„¶åï¼Œå°±å‘ç°åªå‰©ä¸‹äº†ä¸€ä¸ªè­¦å‘Š:</p><pre><code>hello.m:4: warning: ASSIGN_POINTER_WARNING\n  Property `s` is a pointer type marked with the `assign` attribute at line 4, column 1. Use a different attribute like `strong` or `weak`.\n  2.   \n  3.   @interface Hello: NSObject\n  4. *&gt;*@property NSString* s;\n  5.   @end\n  6.  \n</code></pre><p>è¿™ä¸ªè­¦å‘Šçš„æ„æ€æ˜¯è¯´ï¼Œå±æ€§ s æ˜¯æŒ‡é’ˆç±»å‹ï¼Œéœ€è¦ä½¿ç”¨ strong æˆ– weak å±æ€§ã€‚è¿™æ—¶ï¼Œæˆ‘å°†s çš„å±æ€§ä¿®æ”¹ä¸º strongï¼š</p><pre><code>@property(nonatomic, strong) NSString* s;\n</code></pre><p>è¿è¡Œ Infer åï¼Œå‘ç°æ²¡æœ‰é—®é¢˜äº†ã€‚</p><pre><code>Capturing in make/cc mode...\nFound 1 source file to analyze in /Users/ming/Downloads/jikeshijian/infer-out\nStarting analysis...\n\nlegend:\n  &quot;F&quot; analyzing a file\n  &quot;.&quot; analyzing a procedure\n\nF.\n*No issues found\n</code></pre><p>æ¥ä¸‹æ¥ï¼Œä¸ºäº†å¸®åŠ©ä½ ç†è§£Inferçš„å·¥ä½œåŸç†ï¼Œæˆ‘æ¥æ¢³ç†ä¸‹<strong>Infer å·¥ä½œçš„æµç¨‹</strong>ï¼š</p><ul>\n<li>\n<p>ç¬¬ä¸€ä¸ªé˜¶æ®µæ˜¯è½¬åŒ–é˜¶æ®µï¼Œå°†æºä»£ç è½¬æˆ Infer å†…éƒ¨çš„ä¸­é—´è¯­è¨€ã€‚ç±» Cè¯­è¨€ä½¿ç”¨ Clang è¿›è¡Œç¼–è¯‘ï¼ŒJavaè¯­è¨€ä½¿ç”¨ javac è¿›è¡Œç¼–è¯‘ï¼Œç¼–è¯‘çš„åŒæ—¶è½¬æˆä¸­é—´è¯­è¨€ï¼Œè¾“å‡ºåˆ° infer-out ç›®å½•ã€‚</p>\n</li>\n<li>\n<p>ç¬¬äºŒä¸ªé˜¶æ®µæ˜¯åˆ†æé˜¶æ®µï¼Œåˆ†æinfer-out ç›®å½•ä¸‹çš„æ–‡ä»¶ã€‚åˆ†ææ¯ä¸ªæ–¹æ³•ï¼Œå¦‚æœå‡ºç°é”™è¯¯çš„è¯ä¼šç»§ç»­åˆ†æä¸‹ä¸€ä¸ªæ–¹æ³•ï¼Œä¸ä¼šè¢«ä¸­æ–­ï¼Œä½†æ˜¯ä¼šè®°å½•ä¸‹å‡ºé”™çš„ä½ç½®ï¼Œæœ€åå°†æ‰€æœ‰å‡ºé”™çš„åœ°æ–¹è¿›è¡Œæ±‡æ€»è¾“å‡ºã€‚<br>\né»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯æ¬¡è¿è¡Œinferå‘½ä»¤éƒ½ä¼šåˆ é™¤ä¹‹å‰çš„ infer-out æ–‡ä»¶å¤¹ã€‚ä½ å¯ä»¥é€šè¿‡ --incremental å‚æ•°ä½¿ç”¨å¢é‡æ¨¡å¼ã€‚å¢é‡æ¨¡å¼ä¸‹ï¼Œè¿è¡Œinferå‘½ä»¤ä¸ä¼šåˆ é™¤ infer-out æ–‡ä»¶å¤¹ï¼Œä½†æ˜¯ä¼šåˆ©ç”¨è¿™ä¸ªæ–‡ä»¶å¤¹è¿›è¡Œ diffï¼Œå‡å°‘åˆ†æé‡ã€‚<br>\nä¸€èˆ¬è¿›è¡Œå…¨æ–°ä¸€è½®åˆ†ææ—¶ç›´æ¥ä½¿ç”¨é»˜è®¤çš„éå¢é‡æ¨¡å¼ï¼Œè€Œå¯¹äºåªæƒ³åˆ†æä¿®æ”¹éƒ¨åˆ†æƒ…å†µæ—¶ï¼Œå°±ä½¿ç”¨å¢é‡æ¨¡å¼ã€‚</p>\n</li>\n</ul><p>Infer æ£€æŸ¥çš„ç»“æœï¼Œåœ¨ infer-out ç›®å½•ä¸‹ï¼Œæ˜¯ JSON æ ¼å¼çš„ï¼Œåå­—å«åš report.json ã€‚ç”ŸæˆJSONæ ¼å¼çš„ç»“æœï¼Œé€šç”¨æ€§ä¼šæ›´å¼ºï¼Œé›†æˆåˆ°å…¶ä»–ç³»ç»Ÿæ—¶ä¼šæ›´æ–¹ä¾¿ã€‚</p><p>Infer çš„å·¥ä½œæµç¨‹å›¾å¦‚ä¸‹ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/6b/b2/6b1b328c130552f899c2f8cdc504fab2.png?wh=1920*1080\" alt=\"\"></p><center><span class=\"reference\">å›¾2 Infer çš„å·¥ä½œæµç¨‹å›¾</span></center><h2>å°ç»“</h2><p>åœ¨ä»Šå¤©è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å’Œä½ ä¸€ä¸€åˆ†æäº†Clang é™æ€åˆ†æå™¨ã€Inferå’ŒOCLint è¿™ä¸‰ä¸ª iOS é™æ€åˆ†æå·¥å…·ã€‚å¯¹äº iOS çš„é™æ€åˆ†æï¼Œè¿™ä¸‰ä¸ªå·¥å…·éƒ½æ˜¯åŸºäº Clang åº“å¼€å‘çš„ã€‚</p><p>å…¶ä¸­ Clang é™æ€åˆ†æå™¨å’Œ Xcodeçš„é›†æˆåº¦é«˜ï¼Œä¹Ÿæ”¯æŒå‘½ä»¤è¡Œã€‚ä¸è¿‡ï¼Œå®ƒä»¬æ£€æŸ¥çš„è§„åˆ™å°‘ï¼ŒåŸºæœ¬éƒ½æ˜¯åªèƒ½æ£€æŸ¥å‡ºè¾ƒå¤§çš„é—®é¢˜ï¼Œæ¯”å¦‚ç±»å‹è½¬æ¢é—®é¢˜ï¼Œè€Œå¯¹å†…å­˜æ³„éœ²é—®é¢˜æ£€æŸ¥çš„ä¾§é‡ç‚¹åˆ™åœ¨äºå¯ç”¨æ€§ã€‚</p><p>OCLint æ£€æŸ¥è§„åˆ™å¤šã€å®šåˆ¶æ€§å¼ºï¼Œèƒ½å¤Ÿå‘ç°å¾ˆå¤šæ½œåœ¨é—®é¢˜ã€‚ä½†ç¼ºç‚¹ä¹Ÿæ˜¯æ£€æŸ¥è§„åˆ™å¤ªå¤šï¼Œåè€Œå®¹æ˜“æ‰¾ä¸åˆ°é‡ç‚¹ï¼›å¯å®šåˆ¶åº¦è¿‡é«˜ï¼Œå¯¼è‡´æ˜“ç”¨æ€§å˜å·®ã€‚</p><p>Infer çš„æ•ˆç‡é«˜ï¼Œæ”¯æŒå¢é‡åˆ†æï¼Œå¯å°èŒƒå›´åˆ†æã€‚å¯å®šåˆ¶æ€§ä¸ç®—æœ€å¼ºï¼Œå±äºä¸­ç­‰ã€‚</p><p>ç»¼åˆæ¥çœ‹ï¼ŒInfer åœ¨å‡†ç¡®æ€§ã€æ€§èƒ½æ•ˆç‡ã€è§„åˆ™ã€æ‰©å±•æ€§ã€æ˜“ç”¨æ€§æ•´ä½“åº¦ä¸Šçš„æŠŠæ¡æ˜¯åšå¾—æœ€å¥½çš„ï¼Œæˆ‘è®¤ä¸ºè¿™äº›æ˜¯å†³å®šé™æ€åˆ†æå™¨å¥½ä¸å¥½æœ€é‡è¦çš„å‡ ç‚¹ã€‚æ‰€ä»¥ï¼Œæˆ‘æ¯”è¾ƒæ¨èçš„æ˜¯ä½¿ç”¨ Infer æ¥è¿›è¡Œä»£ç é™æ€åˆ†æã€‚</p><h2>è¯¾åä½œä¸š</h2><p>æˆ‘ä»¬ä»Šå¤©æåˆ°çš„ä¸‰æ¬¾é™æ€åˆ†æå·¥å…·éƒ½æ˜¯åŸºäº Clang åº“æ¥å¼€å‘çš„ã€‚é‚£ä¹ˆè¯·ä½ æ¥è¯´ä¸‹ï¼ŒClang ç»™è¿™ä¸‰æ¬¾å·¥å…·æä¾›äº†ä»€ä¹ˆèƒ½åŠ›å‘¢ï¼Ÿ</p><p>æ„Ÿè°¢ä½ çš„æ”¶å¬ï¼Œæ¬¢è¿ä½ åœ¨è¯„è®ºåŒºç»™æˆ‘ç•™è¨€åˆ†äº«ä½ çš„è§‚ç‚¹ï¼Œä¹Ÿæ¬¢è¿æŠŠå®ƒåˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ä¸€èµ·é˜…è¯»ã€‚</p><p></p>","neighbors":{"left":{"article_title":"06 | App å¦‚ä½•é€šè¿‡æ³¨å…¥åŠ¨æ€åº“çš„æ–¹å¼å®ç°æé€Ÿç¼–è¯‘è°ƒè¯•ï¼Ÿ","id":87188},"right":{"article_title":"08 | å¦‚ä½•åˆ©ç”¨ Clang ä¸º App æè´¨ï¼Ÿ","id":87844}},"comments":[{"had_liked":false,"id":79745,"user_name":"Roger","can_delete":false,"product_type":"c1","uid":1398367,"ip_address":"","ucode":"20C05442E0C0DE","user_header":"https://static001.geekbang.org/account/avatar/00/15/56/5f/b3f3d82e.jpg","comment_is_top":false,"comment_ctime":1553529974,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"138992483446","product_id":100024501,"comment_content":"ç»™å®å®å–‚å¤œå¥¶ï¼Œé¡ºä¾¿æ¥çœ‹çœ‹æ–°çš„ä¸€è¯¾è®²ä»€ä¹ˆ","like_count":33,"discussions":[{"author":{"id":2107980,"avatar":"https://static001.geekbang.org/account/avatar/00/20/2a/4c/17993652.jpg","nickname":"Jesse","note":"","ucode":"ACB308497AF747","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":343143,"discussion_content":"åˆ«è®©å®å®å†å½“ç¨‹åºå‘˜äº†","likes_number":8,"is_delete":false,"is_hidden":false,"ctime":1610955298,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":80543,"user_name":"drunkenMouse","can_delete":false,"product_type":"c1","uid":1454037,"ip_address":"","ucode":"AA8CEA703ECBE8","user_header":"","comment_is_top":false,"comment_ctime":1553678236,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"83158056860","product_id":100024501,"comment_content":"1. OClint æƒ³æ‰§è¡Œè‡ªå·±æŒ‡å®šçš„é¡¹ç›®ï¼Œè¿˜æ˜¯ä¸ä¼šã€‚ã€‚æœ€åæŸ¥äº†åˆ«çš„èµ„æ–™ï¼Œè¯´æ˜¯è¦å†™è„šæœ¬å®‰è£…xcprettyï¼Œè€Œä¸”è¯´æ˜¯ä¸ç»´æŠ¤äº†ã€‚<br><br>2. CLang é™æ€åˆ†æå™¨çš„clang â€”analyze -Xclang -analyzer-checker-help æˆ‘æ‰§è¡Œä¹‹åï¼Œå¹¶æ²¡æœ‰æˆåŠŸæ˜¾ç¤ºå¸¸ç”¨çš„Checkerã€‚ã€‚<br><br>3. Clang é™æ€åˆ†æå™¨çš„lib&#47;StaticAnalyzer&#47;Checkersè¿™ä¸ªè·¯å¾„ä¹Ÿæ²¡æœ‰æ‰¾åˆ°ï¼Œæ˜¯ä¸æ˜¯æ¢åœ°æ–¹äº†ï¼Ÿ<br><br>4. OClintã€Clangé™æ€åˆ†æå™¨ä¸Infer éƒ½éœ€è¦Clangç¼–è¯‘å™¨çš„LLVMå¯¹æºç åšè¯æ³•ã€è¯­æ³•ä¸Šçš„åˆ†æç”ŸæˆASTï¼ˆä¸€ç§é™æ€è¯­æ³•æ ‘ï¼Œä»£ç æ›´ç²¾ç®€ï¼Œéå†æ›´è½»æ¾ï¼‰ï¼Œç„¶åå¯¹ç”Ÿæˆçš„ASTåšé™æ€åˆ†æï¼Œè¾¾åˆ°ç¼–è¯‘ä»£ç å±‚é¢çš„åˆ†æã€‚<br><br>5. OCLintè¯´æ˜¯ä¸ç»´æŠ¤äº†ï¼Œæ‰€ä»¥é™¤äº†è§„åˆ™å¤ªå¤šå¯¼è‡´çš„é‡ç‚¹æ‰¾ä¸åˆ°ï¼Œå¯å®šåˆ¶æ€§è¿‡é«˜å¯¼è‡´çš„æ˜“ç”¨æ€§å˜å·®å¤–ï¼Œä¹ŸPASSï¼ˆå…¶å®æˆ‘å¯¹è¿™å¥è§„åˆ™å¤šæ‰€ä»¥XXçš„ç†è§£æ„Ÿå—ä¸æ˜¯å¾ˆæ·±ã€‚ã€‚ï¼‰<br><br>Clangé™æ€åˆ†æå™¨ï¼Œè§„åˆ™å°‘åªèƒ½æ£€ç­–è¾ƒå¤§é—®é¢˜ï¼Œå¯¹å†…å­˜æ³„æ¼ä¸€ç±»é—®é¢˜è‹¥æ— é”™è¯¯ä¹Ÿä¸æç¤ºå¤–ï¼Œå›è°ƒæ¬¡æ•°ä¹Ÿå¤šã€‚æ¯æ‰§è¡Œä¸€å¥ï¼Œéƒ½è¦å›è°ƒæ‰€æœ‰çš„Checkerçš„å›è°ƒå‡½æ•°ã€‚æ‰€ä»¥PASS<br><br>Infer å®šåˆ¶æ€§ä¸æ˜¯æœ€é«˜ï¼Œä½†æ˜¯ä¸å·®ã€‚å¯ä»¥å°èŒƒå›´åˆ†æï¼Œæ‰€ä»¥æ•ˆç‡é«˜ã€‚è¿˜æ”¯æŒå¢é‡åˆ†æï¼ˆä½¿ç”¨å·²ç¼“å­˜æ•°æ®ï¼Œéå¢é‡ä¼šæ¸…æ¥šç¼“å­˜ï¼‰ã€‚æ‰€ä»¥ï¼Œå»ºè®®Infer<br>","like_count":20},{"had_liked":false,"id":79751,"user_name":"iLearn","can_delete":false,"product_type":"c1","uid":1220165,"ip_address":"","ucode":"BDDD3E94D9D94D","user_header":"https://static001.geekbang.org/account/avatar/00/12/9e/45/d2d2f005.jpg","comment_is_top":false,"comment_ctime":1553532077,"is_pvip":false,"replies":[{"id":"29537","content":"SwiftLint","user_name":"ä½œè€…å›å¤","user_name_real":"æˆ´é“­","uid":"1140280","ctime":1553941816,"ip_address":"","comment_id":79751,"utype":1}],"discussion_count":4,"race_medal":0,"score":"83157910701","product_id":100024501,"comment_content":"è€å¸ˆï¼ŒSwiftçš„è¦æ€ä¹ˆæï¼Ÿ","like_count":20,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"æˆ´é“­","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":444608,"discussion_content":"SwiftLint","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553941816,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1785940,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/rWMGIQG1z13nekorr9I4PY1w7rlskssf949IQ24SvIewpM7mmZoH2QEZ2aKHu5tkmicGQ7KTGrN9vFYhrDsdp9w/132","nickname":"Geek_9dbcb4","note":"","ucode":"BB92D5E844A743","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":230749,"discussion_content":"ç”¨sonarå§ï¼Œæ”¯æŒocå’Œswiftï¼Œå¯ä»¥æŒ‡å®šæ‰«æå·¥å…·","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1586768673,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1785940,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/rWMGIQG1z13nekorr9I4PY1w7rlskssf949IQ24SvIewpM7mmZoH2QEZ2aKHu5tkmicGQ7KTGrN9vFYhrDsdp9w/132","nickname":"Geek_9dbcb4","note":"","ucode":"BB92D5E844A743","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":230746,"discussion_content":"ç”¨2ä¸ªå·¥å…·ï¼Œè¯•è¯•å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586768570,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1459935,"avatar":"https://static001.geekbang.org/account/avatar/00/16/46/df/2f0e8551.jpg","nickname":"Mirror","note":"","ucode":"A262361AFC523D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":213883,"discussion_content":"Objective-C å’Œ Swiftæ··åˆçš„å·¥ç¨‹ï¼Œæ€ä¹ˆå¤„ç†å¥½å‘¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585131035,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":79835,"user_name":"ybåè›‹biubiu","can_delete":false,"product_type":"c1","uid":1236680,"ip_address":"","ucode":"30E10E4CC41309","user_header":"https://static001.geekbang.org/account/avatar/00/12/de/c8/ef0d6c86.jpg","comment_is_top":false,"comment_ctime":1553562363,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"40208268027","product_id":100024501,"comment_content":"clangä½œä¸ºllvmç¼–è¯‘å™¨å‰ç«¯ï¼Œè¿›è¡Œé¢„ç¼–è¯‘ã€è¯æ³•åˆ†æç”Ÿæˆtokenç‰‡ã€è¯­æ³•åˆ†æç”ŸæˆASTåï¼Œæä¾›ä¸€ä¸ªåˆ‡é¢ï¼Œå¼€å‘è€…å¯ä»¥åœ¨è¿™é‡Œåˆ©ç”¨clangç”Ÿæˆçš„ASTè¯­æ³•æ ‘è¿›è¡Œè‡ªå®šä¹‰è§„åˆ™éå†åˆ†æï¼Œclangä¹Ÿæä¾›äº†ç›¸åº”çš„checkerå’ŒæŠ›å‡ºè¯Šæ–­å¼‚å¸¸çš„diagnosisã€‚","like_count":9},{"had_liked":false,"id":84175,"user_name":"Yest","can_delete":false,"product_type":"c1","uid":1409087,"ip_address":"","ucode":"1E82B6355890C0","user_header":"https://static001.geekbang.org/account/avatar/00/15/80/3f/bc65b009.jpg","comment_is_top":false,"comment_ctime":1554798032,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"23029634512","product_id":100024501,"comment_content":"fatal error: &#39;Foundation&#47;Foundation.h&#39; file not found è¿™ä¹ˆè§£å†³ğŸ‘‡<br>infer -- clang -c -isysroot &#47;Applications&#47;Xcode.app&#47;Contents&#47;Developer&#47;Platforms&#47;iPhoneSimulator.platform&#47;Developer&#47;SDKs&#47;iPhoneSimulator.sdk Hello.m","like_count":5},{"had_liked":false,"id":82892,"user_name":"å¯»å¿ƒ","can_delete":false,"product_type":"c1","uid":1455101,"ip_address":"","ucode":"67B76ED0844DD9","user_header":"https://static001.geekbang.org/account/avatar/00/16/33/fd/01a8e1f3.jpg","comment_is_top":false,"comment_ctime":1554344318,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"23029180798","product_id":100024501,"comment_content":"è¿™ä¸ªé—®é¢˜æœ‰è°é‡åˆ°å—ï¼Ÿ<br>æ€ä¹ˆè§£å†³ï¼Ÿ<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br><br>Internal Error:   &#47;usr&#47;local&#47;Cellar&#47;infer&#47;0.15.0&#47;lib&#47;infer&#47;infer&#47;bin&#47;..&#47;lib&#47;python&#47;infer.py<br>  -j 4 --project-root &#47;Users&#47;yy&#47;å·¥ä½œ&#47;é¡¹ç›®&#47;test --out<br>  &#47;Users&#47;yy&#47;å·¥ä½œ&#47;é¡¹ç›®&#47;test&#47;infer-out -- xcodebuild build -scheme test<br>  -workspace test.xcworkspace -configuration Debug -sdk iphonesimulator:<br>  exited with code 1<br>Error backtrace:<br>Raised at file &quot;base&#47;Die.ml&quot; (inlined), line 25, characters 6-36<br>Called from file &quot;base&#47;Logging.ml&quot;, line 314, characters 58-80<br>Called from file &quot;integration&#47;Driver.ml&quot;, line 159, characters 2-16<br>Called from file &quot;integration&#47;Driver.ml&quot;, line 280, characters 6-420<br>Called from file &quot;infer.ml&quot;, line 20, characters 2-36<br>Called from file &quot;infer.ml&quot;, line 130, characters 8-54<br><br>&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;","like_count":5,"discussions":[{"author":{"id":1038845,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/d9/fd/389ef92f.jpg","nickname":"å©ç¬","note":"","ucode":"7FE8DB33A40172","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":377554,"discussion_content":"å¤§å…„å¼Ÿï¼Œè¿™é—®é¢˜è§£å†³äº†å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622708180,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1247696,"avatar":"https://static001.geekbang.org/account/avatar/00/13/09/d0/baa520ac.jpg","nickname":"æ— é—®è¥¿ä¸œ","note":"","ucode":"903803D0A5E2F8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":336727,"discussion_content":"å¤§å…„å¼Ÿ, æˆ‘çš„ä¹Ÿé‡åˆ°è¿™ä¸ªé—®é¢˜, æœ‰è§£å†³äº†å—?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608689357,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":81514,"user_name":"ç®€ç”Ÿ","can_delete":false,"product_type":"c1","uid":1245345,"ip_address":"","ucode":"AE0EFF92406E17","user_header":"https://static001.geekbang.org/account/avatar/00/13/00/a1/e943773e.jpg","comment_is_top":false,"comment_ctime":1553932643,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"18733801827","product_id":100024501,"comment_content":"ä¸ªäººè§‰å¾—è™½ç„¶OCLintæ£€æµ‹è§„åˆ™å¤šï¼Œæ˜“ç”¨æ€§æ²¡æœ‰Inferå¥½ã€‚ä½†æ˜¯Sonar+OCLintå¯ä»¥å¯¹æ£€æµ‹ç»“æœè¿›è¡Œä¸€ä¸ªå¯è§†åŒ–çš„ç®¡ç†ï¼Œè¿˜æ˜¯ä¼šåå‘äºé€‰æ‹©OCLintã€‚ğŸ˜Š","like_count":5,"discussions":[{"author":{"id":1229594,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJuQocTOGrXzPb8fgDibrdH5jBAtrdWckiaKjvner6OT1DeKtRm43Wo2jFqTuiaqmsKNqvfbxj25H4bg/132","nickname":"Geek_14b699","note":"","ucode":"02AC3773765AB9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":557886,"discussion_content":"infer æœ‰è¯¯æŠ¥å•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1648017609,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1785940,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/rWMGIQG1z13nekorr9I4PY1w7rlskssf949IQ24SvIewpM7mmZoH2QEZ2aKHu5tkmicGQ7KTGrN9vFYhrDsdp9w/132","nickname":"Geek_9dbcb4","note":"","ucode":"BB92D5E844A743","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":240351,"discussion_content":"æˆ‘ä»¬ä¹Ÿç”¨çš„è¿™ä¸ª","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587354589,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":87622,"user_name":"å¿«åˆ°ç¢—é‡Œæ¥","can_delete":false,"product_type":"c1","uid":1454751,"ip_address":"","ucode":"D3EE7B9064DD7E","user_header":"https://static001.geekbang.org/account/avatar/00/16/32/9f/46ac03ad.jpg","comment_is_top":false,"comment_ctime":1555643628,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14440545516","product_id":100024501,"comment_content":"inferæ‰«æå•ä¸ªæ–‡ä»¶ æŠ¥é”™<br>7 errors generated.<br>Error: the following clang command did not run successfully:<br>    &#47;usr&#47;local&#47;Cellar&#47;infer&#47;0.15.0&#47;lib&#47;infer&#47;facebook-clang-plugins&#47;clang&#47;install&#47;bin&#47;clang<br>    @&#47;var&#47;folders&#47;j_&#47;tb3f_ly50rj_qylmtk1h8k2w0000gn&#47;T&#47;clang_command_.tmp.11b92e.txt<br>  ++Contents of &#39;&#47;var&#47;folders&#47;j_&#47;tb3f_ly50rj_qylmtk1h8k2w0000gn&#47;T&#47;clang_command_.tmp.11b92e.txt&#39;:<br>    &quot;-cc1&quot; &quot;-load&quot;<br>    &quot;&#47;usr&#47;local&#47;Cellar&#47;infer&#47;0.15.0&#47;lib&#47;infer&#47;infer&#47;bin&#47;..&#47;..&#47;facebook-clang-plugins&#47;libtooling&#47;build&#47;FacebookClangPlugin.dylib&quot;<br>    &quot;-add-plugin&quot; &quot;BiniouASTExporter&quot; &quot;-plugin-arg-BiniouASTExporter&quot; &quot;-&quot;<br>    &quot;-plugin-arg-BiniouASTExporter&quot; &quot;PREPEND_CURRENT_DIR=1&quot;<br>    &quot;-plugin-arg-BiniouASTExporter&quot; &quot;MAX_STRING_SIZE=65535&quot; &quot;-cc1&quot; &quot;-triple&quot;<br>    &quot;x86_64-apple-macosx10.14.0&quot; &quot;-Wdeprecated-objc-isa-usage&quot;<br>    &quot;-Werror=deprecated-objc-isa-usage&quot; &quot;-emit-obj&quot; &quot;-mrelax-all&quot;<br>    &quot;-disable-free&quot; &quot;-disable-llvm-verifier&quot; &quot;-discard-value-names&quot;<br>    &quot;-main-file-name&quot; &quot;RootVC.m&quot; &quot;-mrelocation-model&quot; &quot;pic&quot; &quot;-pic-level&quot; &quot;2&quot;<br>    &quot;-mthread-model&quot; &quot;posix&quot; &quot;-mdisable-fp-elim&quot; &quot;-masm-verbose&quot;<br>    &quot;-munwind-tables&quot; &quot;-target-cpu&quot; &quot;penryn&quot; &quot;-dwarf-column-info&quot;<br>    &quot;-debugger-tuning=lldb&quot; &quot;-target-linker-version&quot; &quot;351.8&quot;<br><br>    &quot;&#47;Applications&#47;Xcode.app&#47;Contents&#47;Developer&#47;Platforms&#47;iPhoneSimulator.platform&#47;Developer&#47;SDKs&#47;iPhoneSimulator.sdk&quot;<br>    &quot;-include&quot;<br>    &quot;&#47;usr&#47;local&#47;Cellar&#47;infer&#47;0.15.0&#47;lib&#47;infer&#47;infer&#47;bin&#47;..&#47;lib&#47;clang_wrappers&#47;global_defines.h&quot;<br>    &quot;-Wno-ignored-optimization-argument&quot; &quot;-Wno-everything&quot;<br>    &quot;-fdebug-compilation-dir&quot; &quot;&#47;Users&#47;mingzhi.liu&#47;Desktop&#47;TON&#47;TON&quot;<br>    &quot;-ferror-limit&quot; &quot;19&quot; &quot;-fmessage-length&quot; &quot;0&quot; &quot;-stack-protector&quot; &quot;1&quot;<br>    &quot;-fblocks&quot; &quot;-fencode-extended-block-signature&quot;<br>    &quot;-fobjc-runtime=macosx-10.14.0&quot; &quot;-fobjc-exceptions&quot; &quot;-fexceptions&quot;<br>    &quot;-fmax-type-align=16&quot; &quot;-fdiagnostics-show-option&quot; &quot;-o&quot; &quot;RootVC.o&quot; &quot;-x&quot;<br>    &quot;objective-c&quot; &quot;RootVC.m&quot; &quot;-O0&quot; &quot;-include&quot;<br>    &quot;&#47;usr&#47;local&#47;Cellar&#47;infer&#47;0.15.0&#47;lib&#47;infer&#47;infer&#47;bin&#47;..&#47;lib&#47;clang_wrappers&#47;global_defines.h&quot;<br>    &quot;-Wno-everything&quot;","like_count":3},{"had_liked":false,"id":81250,"user_name":"å´å°å®‰","can_delete":false,"product_type":"c1","uid":1371398,"ip_address":"","ucode":"EDF8E04F867069","user_header":"https://wx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqr5ibqxYwcSgqPA7s49MZb1vEKKXT4mPTojwiclXkJf3ug26NuzTa6A5gbicR2rAUHdEkUAn13Rr2KQ/132","comment_is_top":false,"comment_ctime":1553842268,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14438744156","product_id":100024501,"comment_content":"infer æ‰«ææ€ä¹ˆè¿‡æ»¤ä¸æƒ³æ‰«æçš„æ–‡ä»¶å‘¢ï¼Œä¾‹å¦‚pod","like_count":4},{"had_liked":false,"id":83909,"user_name":"mosn","can_delete":false,"product_type":"c1","uid":1454761,"ip_address":"","ucode":"0FD6967D15DB64","user_header":"https://static001.geekbang.org/account/avatar/00/16/32/a9/ce5d2609.jpg","comment_is_top":false,"comment_ctime":1554731856,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10144666448","product_id":100024501,"comment_content":"infer --skip-analysis-in-path Pods ","like_count":2},{"had_liked":false,"id":81111,"user_name":"scorpiozj","can_delete":false,"product_type":"c1","uid":1031677,"ip_address":"","ucode":"C66EA76809F9BF","user_header":"https://static001.geekbang.org/account/avatar/00/0f/bd/fd/3f5d5db5.jpg","comment_is_top":false,"comment_ctime":1553818633,"is_pvip":false,"replies":[{"id":"29452","content":"æ˜¯çš„","user_name":"ä½œè€…å›å¤","user_name_real":"æˆ´é“­","uid":"1140280","ctime":1553830680,"ip_address":"","comment_id":81111,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10143753225","product_id":100024501,"comment_content":"è¯·é—®Xcodeä¸­çš„é™æ€æ£€æŸ¥å°±æ˜¯clang é™æ€æ£€æŸ¥å—ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"æˆ´é“­","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445084,"discussion_content":"æ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553830680,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":80852,"user_name":"Geek","can_delete":false,"product_type":"c1","uid":1456901,"ip_address":"","ucode":"8C1AD026C1AC84","user_header":"https://static001.geekbang.org/account/avatar/00/16/3b/05/b2776d73.jpg","comment_is_top":false,"comment_ctime":1553742496,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10143677088","product_id":100024501,"comment_content":"ä¼ ç»Ÿç¼–è¯‘å™¨çš„å·¥ä½œåŸç†ï¼ŒåŸºæœ¬ä¸Šéƒ½æ˜¯ä¸‰æ®µå¼çš„ï¼Œå¯ä»¥åˆ†ä¸ºå‰ç«¯ã€ä¼˜åŒ–å™¨å’Œåç«¯ã€‚å‰ç«¯è´Ÿè´£è§£ææºä»£ç ï¼Œæ£€æŸ¥è¯­æ³•é”™è¯¯ï¼Œå¹¶å°†å…¶ç¿»è¯‘ä¸ºæŠ½è±¡çš„è¯­æ³•æ ‘ï¼›ä¼˜åŒ–å™¨å¯¹è¿™ä¸€ä¸­é—´ä»£ç è¿›è¡Œä¼˜åŒ–ï¼Œè¯•å›¾ä½¿ä»£ç æ›´é«˜æ•ˆï¼›åç«¯åˆ™è´Ÿè´£å°†ä¼˜åŒ–å™¨ä¼˜åŒ–åçš„ä¸­é—´ä»£ç è½¬æ¢ä¸ºç›®æ ‡æœºå™¨çš„ä»£ç ï¼Œè¿™ä¸€è¿‡ç¨‹åç«¯ä¼šæœ€å¤§åŒ–çš„åˆ©ç”¨ç›®æ ‡æœºå™¨çš„ç‰¹æ®ŠæŒ‡ä»¤ï¼Œä»¥æé«˜ä»£ç çš„æ€§èƒ½ã€‚åŸºäºè¿™ä¸ªè®¤çŸ¥ï¼Œæˆ‘ä»¬å¯ä»¥è®¤ä¸º LLVM åŒ…æ‹¬äº†ä¸¤ä¸ªæ¦‚å¿µï¼šä¸€ä¸ªå¹¿ä¹‰çš„ LLVM å’Œä¸€ä¸ªç‹­ä¹‰çš„ LLVM ã€‚å¹¿ä¹‰çš„ LLVM æŒ‡çš„æ˜¯ä¸€ä¸ªå®Œæ•´çš„ LLVM ç¼–è¯‘å™¨æ¡†æ¶ç³»ç»Ÿï¼ŒåŒ…æ‹¬äº†å‰ç«¯ã€ä¼˜åŒ–å™¨ã€åç«¯ã€ä¼—å¤šçš„åº“å‡½æ•°ä»¥åŠå¾ˆå¤šçš„æ¨¡å—ï¼›è€Œç‹­ä¹‰çš„ LLVM åˆ™æ˜¯èšç„¦äºç¼–è¯‘å™¨åç«¯åŠŸèƒ½çš„ä¸€ç³»åˆ—æ¨¡å—å’Œåº“ï¼ŒåŒ…æ‹¬ä»£ç ä¼˜åŒ–ã€ä»£ç ç”Ÿæˆã€JIT ç­‰ã€‚<br>--------------------- <br>ä½œè€…ï¼šè‰¾è”“è‰ <br>æ¥æºï¼šCSDN <br>åŸæ–‡ï¼šhttps:&#47;&#47;blog.csdn.net&#47;xhhjin&#47;article&#47;details&#47;81164076 <br>ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºåšä¸»åŸåˆ›æ–‡ç« ï¼Œè½¬è½½è¯·é™„ä¸Šåšæ–‡é“¾æ¥ï¼","like_count":2},{"had_liked":false,"id":82037,"user_name":"é ‘ å¼µ","can_delete":false,"product_type":"c1","uid":1459378,"ip_address":"","ucode":"EA05345481FBB4","user_header":"https://static001.geekbang.org/account/avatar/00/16/44/b2/8a3e8c28.jpg","comment_is_top":false,"comment_ctime":1554108135,"is_pvip":false,"replies":[{"id":"29812","content":"èµ","user_name":"ä½œè€…å›å¤","user_name_real":"æˆ´é“­","uid":"1140280","ctime":1554198766,"ip_address":"","comment_id":82037,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5849075431","product_id":100024501,"comment_content":"inferè·‘ä¸èµ·æ¥çš„ å¸Œæœ›è¿™ç¯‡èƒ½å¸®åˆ°https:&#47;&#47;blog.csdn.net&#47;elisa1988&#47;article&#47;details&#47;46531745?utm_source=blogxgwz7","like_count":1,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"æˆ´é“­","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445437,"discussion_content":"èµ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554198766,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1457909,"avatar":"https://static001.geekbang.org/account/avatar/00/16/3e/f5/055362e6.jpg","nickname":"Yvan_Den","note":"","ucode":"2670121B3AECC9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":52743,"discussion_content":"404 not Found","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574082504,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":80962,"user_name":"drunkenMouse","can_delete":false,"product_type":"c1","uid":1454037,"ip_address":"","ucode":"AA8CEA703ECBE8","user_header":"","comment_is_top":false,"comment_ctime":1553764851,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5848732147","product_id":100024501,"comment_content":"å…³äºbrewï¼Œå› ä¸ºæˆ‘ä¹‹å‰æ˜¯åœ¨å¾ˆä¹…ä¹‹å‰å°±å®‰è£…äº†ï¼Œæ‰€ä»¥ç°åœ¨åœ¨å®‰è£…inferçš„æ—¶å€™ä¼šå‡ºç°éƒ¨åˆ†æ‰€éœ€æ’ä»¶ç‰ˆæœ¬è¿‡ä½çš„æƒ…å†µã€‚ç„¶åæˆ‘æƒ³å‡çº§æ’ä»¶ï¼Œä¹Ÿéœ€è¦å…ˆæ›´æ–°brewï¼Œä½†æˆ‘çš„brewæ›´æ–°ä¹Ÿæ˜¯å¤±è´¥ï¼šError: &#47;usr&#47;local must be writable! é”™è¯¯<br><br>è¿™ç§æƒ…å†µä¸‹ï¼Œè¿˜æƒ³æ˜¯ä½¿ç”¨Brewè¿›è¡Œå®‰è£…çš„è¯ï¼Œéœ€è¦å¦‚ä¸‹æ“ä½œ:<br>1.å¸è½½æ—§çš„brew<br>```<br>&#47;usr&#47;bin&#47;ruby -e &quot;$(curl -fsSL https:&#47;&#47;raw.githubusercontent.com&#47;Homebrew&#47;install&#47;master&#47;uninstall)â€<br><br>```<br>2.å®‰è£…æ–°çš„brew<br>```<br>&#47;usr&#47;bin&#47;ruby -e &quot;$(curl -fsSL https:&#47;&#47;raw.githubusercontent.com&#47;Homebrew&#47;install&#47;master&#47;install)&quot;<br>```<br>ä¹‹åï¼Œå†æŒ‰ç…§inferçš„å®‰è£…æç¤ºä¸€æ­¥æ­¥å®‰è£…ã€‚","like_count":1},{"had_liked":false,"id":80383,"user_name":"jimmy","can_delete":false,"product_type":"c1","uid":1100293,"ip_address":"","ucode":"A7838754D1B427","user_header":"https://static001.geekbang.org/account/avatar/00/10/ca/05/19f2f8a3.jpg","comment_is_top":false,"comment_ctime":1553653914,"is_pvip":false,"replies":[{"id":"29265","content":"èµ","user_name":"ä½œè€…å›å¤","user_name_real":"æˆ´é“­","uid":"1140280","ctime":1553656718,"ip_address":"","comment_id":80383,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5848621210","product_id":100024501,"comment_content":"oclintçš„ä¸€äº›ç ”ç©¶ https:&#47;&#47;xiaozhuanlan.com&#47;topic&#47;9647358012","like_count":2,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"æˆ´é“­","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":444843,"discussion_content":"èµ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553656718,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":79837,"user_name":"Geek_1ce2e0","can_delete":false,"product_type":"c1","uid":1454005,"ip_address":"","ucode":"77C7BE2FFEF9F7","user_header":"","comment_is_top":false,"comment_ctime":1553562478,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5848529774","product_id":100024501,"comment_content":"Swiftlintå°±è¡Œ","like_count":1},{"had_liked":false,"id":79816,"user_name":"Nevermore","can_delete":false,"product_type":"c1","uid":1454179,"ip_address":"","ucode":"E6F3A4BE67A19F","user_header":"https://static001.geekbang.org/account/avatar/00/16/30/63/6c387163.jpg","comment_is_top":false,"comment_ctime":1553560884,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5848528180","product_id":100024501,"comment_content":"SwiftLint","like_count":1},{"had_liked":false,"id":289517,"user_name":"Mr.C","can_delete":false,"product_type":"c1","uid":1004020,"ip_address":"","ucode":"4FA9EF30A894F7","user_header":"https://static001.geekbang.org/account/avatar/00/0f/51/f4/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1619059594,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1619059594","product_id":100024501,"comment_content":"æ‚¨å¥½ï¼æˆ‘å°†è‡ªå®šä¹‰çš„æ’ä»¶é›†æˆåˆ°Xcodeåï¼Œå‘ç°Xcodeçš„è‡ªåŠ¨è¡¥å…¨åŠŸèƒ½å¤±æ•ˆäº†ï¼Œè¯·é—®æœ‰è§£å†³çš„åŠæ³•å—ï¼Ÿè°¢è°¢ï¼","like_count":0},{"had_liked":false,"id":277813,"user_name":"é»„è‹—ç‚œ","can_delete":false,"product_type":"c1","uid":2253935,"ip_address":"","ucode":"37FE43DBCA2234","user_header":"https://static001.geekbang.org/account/avatar/00/22/64/6f/2ce61440.jpg","comment_is_top":false,"comment_ctime":1612600593,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1612600593","product_id":100024501,"comment_content":"è€å¸ˆï¼Œæˆ‘æƒ³è¦git commit æäº¤ä¹‹å‰ï¼Œè¿›è¡Œoclintæˆ–è€…inferï¼Œæˆ‘æƒ³åˆ°æ˜¯è§¦å‘pre-commit é’©å­ï¼Œæ‰§è¡Œå¯¹åº”çš„è„šæœ¬ï¼Œè¾“å‡ºä¸€ä¸ªhtmlæŠ¥å‘Šã€‚ä½†æ˜¯æˆ‘æ€ä¹ˆä»æŠ¥å‘Šä¸­æå–ä¿¡æ¯å‘Šè¯‰å¼€å‘å·¥ç¨‹å¸ˆï¼Œä»£ç æœ‰é—®é¢˜ï¼Œæ‹’ç»å½“æ¬¡commit","like_count":0},{"had_liked":false,"id":275628,"user_name":"å¾®ç¬‘ç¾ç”·ğŸ˜„","can_delete":false,"product_type":"c1","uid":1010774,"ip_address":"","ucode":"E188923723703B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6c/56/07920099.jpg","comment_is_top":false,"comment_ctime":1611625500,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1611625500","product_id":100024501,"comment_content":"è€å¸ˆ Inferå¯ä»¥ç”¨äºswiftå—","like_count":0},{"had_liked":false,"id":269797,"user_name":"æ— é—®è¥¿ä¸œ","can_delete":false,"product_type":"c1","uid":1247696,"ip_address":"","ucode":"903803D0A5E2F8","user_header":"https://static001.geekbang.org/account/avatar/00/13/09/d0/baa520ac.jpg","comment_is_top":false,"comment_ctime":1608789211,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1608789211","product_id":100024501,"comment_content":"ç”¨inferåˆ†ææ²¡cocoapod ç®¡ç†çš„é¡¹ç›®, å†™ä¸ªstrong çš„ä»£ç†éƒ½æ£€æµ‹ä¸å‡ºæ¥é—®é¢˜, cocoapod ç®¡ç†å, ä¸€ç›´å„ç§æŠ¥é”™, ç™¾åº¦æ‰¾äº†å¾ˆä¹…ä¹Ÿæ²¡æ‰¾åˆ°ä¸ºä»€ä¹ˆ, èœé¸¡è·¯è¿‡..., æœ‰å¤§ä½¬è·¯è¿‡æŒ‡ç‚¹ä¸€ä¸‹å—?<br>","like_count":0,"discussions":[{"author":{"id":2029233,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/f6/b1/f9490fec.jpg","nickname":"C__","note":"","ucode":"0C9F9CEA4B5439","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":337359,"discussion_content":"çœ‹æ¥æœ‰è·Ÿæˆ‘ä¸€æ ·èœçš„ï¼Œä»Šå¤©æ•´äº†ä¸€å¤©ä¹Ÿæ²¡è·‘èµ·æ¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608883507,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":262305,"user_name":"xixi","can_delete":false,"product_type":"c1","uid":1202368,"ip_address":"","ucode":"B83B85F10E0C07","user_header":"https://static001.geekbang.org/account/avatar/00/12/58/c0/8d7dcaea.jpg","comment_is_top":false,"comment_ctime":1605689098,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1605689098","product_id":100024501,"comment_content":"APPCode ä¹Ÿæœ‰ä¸€ä¸ªä¸é”™çš„","like_count":1},{"had_liked":false,"id":230571,"user_name":"è´¹åŸ","can_delete":false,"product_type":"c1","uid":1651522,"ip_address":"","ucode":"0009EA55E63DC5","user_header":"https://static001.geekbang.org/account/avatar/00/19/33/42/a981ef2e.jpg","comment_is_top":false,"comment_ctime":1593421270,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1593421270","product_id":100024501,"comment_content":"OCLintçš„æœ€æ–°å®‰è£…ä½¿ç”¨ï¼Œæ„Ÿè§‰ä¹Ÿå¯ä»¥å‚è€ƒè¿™ä¸ªï¼šhttps:&#47;&#47;juejin.im&#47;post&#47;5ce9f477f265da1b7c60f4fe#heading-4","like_count":0},{"had_liked":false,"id":111130,"user_name":"ç–¯ç‹‚çš„çŸ³å¤´","can_delete":false,"product_type":"c1","uid":1240468,"ip_address":"","ucode":"235844A1FCEE40","user_header":"https://static001.geekbang.org/account/avatar/00/12/ed/94/5058c24f.jpg","comment_is_top":false,"comment_ctime":1562485163,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1562485163","product_id":100024501,"comment_content":"é‡è§è¿™ä¸ªé—®é¢˜çš„ç«¥é‹<br>Error: the following clang command did not run successfully:<br>    &#47;usr&#47;local&#47;Cellar&#47;infer&#47;0.15.0&#47;lib&#47;infer&#47;facebook-clang-plugins&#47;clang&#47;install&#47;bin&#47;clang <br>å»&#47;Library&#47;Developer&#47;CommandLineTools&#47;Packagesè¿™ä¸ªç›®å½•ï¼Œå®‰è£…pkgå¯ä»¥è§£å†³","like_count":0},{"had_liked":false,"id":98894,"user_name":"çƒˆäºº","can_delete":false,"product_type":"c1","uid":1345292,"ip_address":"","ucode":"A680CA490206A3","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erhzZ8J7EZm0s94p1RTibOBzpqsbCajKYmkjX35Clfdvpv8ZdSKGicT2A4VyicIhy9yNjJjJcTeJX7rQ/132","comment_is_top":false,"comment_ctime":1559113722,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1559113722","product_id":100024501,"comment_content":"ä½¿ç”¨homebrewå®‰è£…inferåï¼Œç›´æ¥infer -- clang xx.m ï¼ŒæŠ¥å¤´æ–‡ä»¶æ‰¾ä¸åˆ°ã€‚æˆ‘ä¹Ÿæ˜¯æ— è¯­ã€‚xcode10ã€‚ç„¶åæ‰«ææ•´ä¸ªå·¥ç¨‹åˆæ˜¯æ­£å¸¸çš„ã€‚","like_count":0},{"had_liked":false,"id":98291,"user_name":"GODV","can_delete":false,"product_type":"c1","uid":1454163,"ip_address":"","ucode":"DB311A5D9EE770","user_header":"https://static001.geekbang.org/account/avatar/00/16/30/53/01a6c4da.jpg","comment_is_top":false,"comment_ctime":1558949076,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1558949076","product_id":100024501,"comment_content":"Error while trying to load a compilation database:<br>Could not auto-detect compilation database for file &quot;Hello.m&quot;<br>No compilation database found in &#47;Users&#47;***&#47;Desktop&#47;OCLintTest or any parent directory<br>ç”¨OCLintåˆ›å»ºåº”è¯¥æ”¾åœ¨é‚£ä¸ªç›®å½•ä¸‹ï¼Œä¸å¤ªæ˜ç™½","like_count":0},{"had_liked":false,"id":89276,"user_name":"CalvinGao","can_delete":false,"product_type":"c1","uid":1509637,"ip_address":"","ucode":"A807E0E5B563A2","user_header":"https://static001.geekbang.org/account/avatar/00/17/09/05/c3eb8fa9.jpg","comment_is_top":false,"comment_ctime":1556131775,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1556131775","product_id":100024501,"comment_content":"è€å¸ˆï¼Œ-bash: scan-build: command not found æ˜¯ä»€ä¹ˆåŸå› å‘¢ï¼Œèµ„æºä¹Ÿä¸‹äº†ï¼Œä¸ºä»€ä¹ˆä¼šæŠ¥è¿™æ ·çš„é”™è¯¯å‘¢","like_count":0},{"had_liked":false,"id":87620,"user_name":"å¿«åˆ°ç¢—é‡Œæ¥","can_delete":false,"product_type":"c1","uid":1454751,"ip_address":"","ucode":"D3EE7B9064DD7E","user_header":"https://static001.geekbang.org/account/avatar/00/16/32/9f/46ac03ad.jpg","comment_is_top":false,"comment_ctime":1555643226,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1555643226","product_id":100024501,"comment_content":"inferæ‰«æiOSå•ä¸ªæ–‡ä»¶æŠ¥é”™ æ€ä¹ˆå›äº‹å•Š","like_count":0},{"had_liked":false,"id":83756,"user_name":"é’å†ˆ","can_delete":false,"product_type":"c1","uid":1080446,"ip_address":"","ucode":"8E54B939937E6D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoYBX95GZxEdKz9LQJVwohUiaRxNge5WpHRbeOC2tGc2rsdpfYKCTKdQicBn8MvSrlZTX7HY2jS3YFA/132","comment_is_top":false,"comment_ctime":1554710819,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554710819","product_id":100024501,"comment_content":"ä¸çŸ¥é“æœ‰äººçŸ¥é“infer æ€ä¹ˆé…ç½®é»‘åå•æ¥è¿‡æ»¤ä¸æƒ³æ‰«æçš„æ–‡ä»¶ï¼Œå¦‚podå¼•å…¥çš„AFNç­‰ä¸‰æ–¹åº“ï¼Ÿ","like_count":0},{"had_liked":false,"id":82392,"user_name":"Geek_5b16d1","can_delete":false,"product_type":"c1","uid":1456902,"ip_address":"","ucode":"5DF7488DDAC89A","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLjlxsaEpOUWvD8A2IGBLppo95IlzcVPOibfuOtMk3ltCEJqwMcNriatxNv6mvkX12JqK9MKuZ61FWg/132","comment_is_top":false,"comment_ctime":1554200205,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554200205","product_id":100024501,"comment_content":"infer -- xcodebuild -target JapanVillage -configuration Debug -sdk iphonesimulator<br>-bash: infer: command not foundä¸€ç›´æŠ¥æ‰¾ä¸åˆ°","like_count":0},{"had_liked":false,"id":81412,"user_name":"å¤©å±±é›ªè²","can_delete":false,"product_type":"c1","uid":1249818,"ip_address":"","ucode":"6B3A9CDDF2AAF2","user_header":"https://static001.geekbang.org/account/avatar/00/13/12/1a/0749cce3.jpg","comment_is_top":false,"comment_ctime":1553907839,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1553907839","product_id":100024501,"comment_content":"å­¦ä¹ äº†","like_count":0},{"had_liked":false,"id":81285,"user_name":"å´å°å®‰","can_delete":false,"product_type":"c1","uid":1371398,"ip_address":"","ucode":"EDF8E04F867069","user_header":"https://wx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqr5ibqxYwcSgqPA7s49MZb1vEKKXT4mPTojwiclXkJf3ug26NuzTa6A5gbicR2rAUHdEkUAn13Rr2KQ/132","comment_is_top":false,"comment_ctime":1553849190,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1553849190","product_id":100024501,"comment_content":"è¿™äº›é™æ€åˆ†æèƒ½åˆ†æå‡ºæ¥çš„ä¸å¤Ÿå‘¢ï¼Œåƒä¸€äº›å¾ªç¯å¼•ç”¨çš„ï¼Œ<br>NSBlockOperation *op = [NSBlockOperation blockOperationWithBlock:^{<br>        &#47;&#47; Blockä¸­å‡ºç°self .Block å¯¹ self æ˜¯å¼ºå¼•ç”¨.<br>        self.view.backgroundColor = [UIColor whiteColor];<br>        <br>    }];    &#47;&#47; å°†æ“ä½œæ·»åŠ åˆ°é˜Ÿåˆ—ä¸­.    &#47;&#47; self.queue å¯¹ op å°±æ˜¯å¼ºå¼•ç”¨.<br>    [self.queue addOperation:op];<br>è¿™ç§æ¯”è¾ƒç®€å•çš„é™æ€åˆ†æä¹Ÿåˆ†æä¸å‡ºæ¥ï¼Œè¿˜æœ‰æ²¡æœ‰å…¶ä»–å·¥å…·å¯ä»¥åšå‘¢ï¼Œå¦‚æœé¡¹ç›®å¤§ï¼Œè¿™ç§å¾ªç¯å¼•ç”¨è¦æ‰¾å‡ºæ¥è¿˜æ˜¯å¾ˆè´¹æ—¶é—´","like_count":0},{"had_liked":false,"id":80957,"user_name":"å¤§å¤§ç›†å­","can_delete":false,"product_type":"c1","uid":1454522,"ip_address":"","ucode":"276E3F40C82A8B","user_header":"https://static001.geekbang.org/account/avatar/00/16/31/ba/694ae5e5.jpg","comment_is_top":false,"comment_ctime":1553763921,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1553763921","product_id":100024501,"comment_content":"infer --keep-going --no-xcpretty -- xcodebuild -workspace xxx.xcworkspace -scheme xxx -configuration Debug -sdk iphonesimulator<br>è¯•äº†å¥½å¤šå‘½ä»¤ï¼Œè¿™ä¸ªå¯ä»¥åˆ†æå®Œæˆï¼Œçœ‹åˆ†æç»“æœbugs.txtæ–‡ä»¶ï¼Œé‡Œé¢æœ‰å¾ˆå¤šcocoapodså¼•å…¥çš„ç¬¬ä¸‰æ–¹åº“çš„é—®é¢˜ï¼Œæ¯”å¦‚Masonry  RACä¹‹ç±»çš„ï¼Œå¤ªå¤šäº†ï¼Œè¦æ€ä¹ˆå±è”½æ‰","like_count":0},{"had_liked":false,"id":80412,"user_name":"1","can_delete":false,"product_type":"c1","uid":1456843,"ip_address":"","ucode":"00E3AFA14D2B61","user_header":"https://static001.geekbang.org/account/avatar/00/16/3a/cb/0235b9bd.jpg","comment_is_top":false,"comment_ctime":1553657703,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1553657703","product_id":100024501,"comment_content":"cd  &#47;Users&#47;apple&#47;Downloads&#47;infer-master&#47;examples&#47;ios_hello<br>infer -- xcodebuild -target HelloWorldApp -configuration Debug -sdk iphonesimulator<br>å‡ºç°<br>xcode-select: error: tool &#39;xcodebuild&#39; requires Xcode, but active developer directory &#39;&#47;Library&#47;Developer&#47;CommandLineTools&#39; is a command line tools instance<br>æ˜¯ä¸æ˜¯éœ€è¦é‡è£…xcode","like_count":0},{"had_liked":false,"id":80304,"user_name":"æ‹©ä¸€åŸç»ˆè€","can_delete":false,"product_type":"c1","uid":1454070,"ip_address":"","ucode":"3213B85A06DA6F","user_header":"https://static001.geekbang.org/account/avatar/00/16/2f/f6/1f7dcc7c.jpg","comment_is_top":false,"comment_ctime":1553648191,"is_pvip":false,"replies":[{"id":"29267","content":"å¯ä»¥ç”¨ç”¨ï¼ŒåŠ¨æ‰‹è¯•è¯•çœ‹","user_name":"ä½œè€…å›å¤","user_name_real":"æˆ´é“­","uid":"1140280","ctime":1553656856,"ip_address":"","comment_id":80304,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1553648191","product_id":100024501,"comment_content":"ä»æ¥æ²¡æœ‰ç”¨è¿‡ï¼Œæ„Ÿè§‰å¬å¤©ä¹¦ä¸€æ ·ï¼Œå“ˆå“ˆï¼ä¸è¿‡å¤§è‡´äº†è§£äº†å…¶åŠŸèƒ½ï¼Œä½†æ˜¯åŸç†è¿˜çœŸä¸å¥½æ‡‚","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"æˆ´é“­","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":444814,"discussion_content":"å¯ä»¥ç”¨ç”¨ï¼ŒåŠ¨æ‰‹è¯•è¯•çœ‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553656856,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":79869,"user_name":"lion","can_delete":false,"product_type":"c1","uid":1119389,"ip_address":"","ucode":"E99F9F9B074834","user_header":"https://static001.geekbang.org/account/avatar/00/11/14/9d/459bdda9.jpg","comment_is_top":false,"comment_ctime":1553566300,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1553566300","product_id":100024501,"comment_content":"æ„Ÿè°¢è€å¸ˆçš„åˆ†äº«ï¼Œå‰ä¸¤å¤©åˆšåˆšç ”ç©¶å¹¶å°è¯•äº†OCLintï¼Œè§‰å¾—æ•ˆæœæŒºä¸é”™çš„ï¼Œè€å¸ˆè¯´çš„è§„åˆ™å¤ªå¤šæˆ‘è§‰å¾—å¯ä»¥é€šè¿‡ç¦ç”¨ä¸æƒ³ç”¨çš„è§„åˆ™æ¥è¿›è¡Œè§„é¿ã€‚å¯å®šåˆ¶åº¦è¿‡é«˜å¯¼è‡´çš„æ˜“ç”¨æ€§å˜å·®è¿™ç‚¹æˆ‘è¿˜ä¸æ˜¯å¾ˆèƒ½ç†è§£ï¼Œå¸Œæœ›è€å¸ˆèƒ½å¤Ÿè§£æƒ‘ã€‚ç„¶ååé¢ä¹Ÿä¼šå°è¯•ä½¿ç”¨è€å¸ˆæ¨èçš„Inferï¼Œå†æ¥ç»¼åˆè¿›è¡Œæ¯”è¾ƒä¸€ä¸‹ã€‚","like_count":0},{"had_liked":false,"id":79868,"user_name":"mÎ±najay","can_delete":false,"product_type":"c1","uid":1067450,"ip_address":"","ucode":"6DE9FBD1BEC8AD","user_header":"https://static001.geekbang.org/account/avatar/00/10/49/ba/23c9246a.jpg","comment_is_top":false,"comment_ctime":1553566264,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1553566264","product_id":100024501,"comment_content":"1. ç¼–è¯‘ é“¾æ¥ï¼Œç„¶å è¯æ³• è¯­æ³•åˆ†æç”Ÿæˆ AST è¯­æ³•æ ‘ã€‚ <br>2. è€Œåƒinferæœ‰ç”Ÿæˆ inferå†…éƒ¨çš„ä¸­é—´è¯­è¨€ï¼Œæ˜¯ä¸æ˜¯ä¹Ÿå°±æ˜¯è·¨å¹³å°é€šç”¨çš„ IRä»£ç ã€‚<br><br>æ–‡ä¸­è¯´çš„checker çš„å›è°ƒé—®é¢˜ï¼Œé‚£æ˜¯å¦æœ‰äº›å¯ä»¥æ”¹ä¸ºéƒ¨åˆ†å¼‚æ­¥è°ƒç”¨ç­‰è®¾è®¡ï¼ŒğŸ§","like_count":0},{"had_liked":false,"id":79830,"user_name":"æ™“é¾™","can_delete":false,"product_type":"c1","uid":1004576,"ip_address":"","ucode":"78CDCEBD183D3A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/54/20/93c79f7c.jpg","comment_is_top":false,"comment_ctime":1553562189,"is_pvip":false,"replies":[{"id":"29481","content":"å½“ç„¶ä¸æ˜¯","user_name":"ä½œè€…å›å¤","user_name_real":"æˆ´é“­","uid":"1140280","ctime":1553869635,"ip_address":"","comment_id":79830,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1553562189","product_id":100024501,"comment_content":"clangæ˜¯ä¸€ä¸ªc c++ oc ç¼–è¯‘å™¨ï¼Œé™æ€åˆ†æåˆ©ç”¨clangåšä»£ç ç¼–è¯‘å±‚é¢çš„äº‹æƒ…ï¼Œå†…å­˜æ³„éœ²ï¼Œå¼ºå¼±å¼•ç”¨ï¼Œæ–¹æ³•è°ƒç”¨æ·±åº¦ç­‰åˆ†æå·¥ä½œäº¤ç»™åˆ†æå™¨æœ¬èº«ã€‚ <br><br>Clangæ˜¯ä¸æ˜¯ç±»ä¼¼äºocä¸­çš„runtimeï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"æˆ´é“­","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":444644,"discussion_content":"å½“ç„¶ä¸æ˜¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553869635,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":79817,"user_name":"æ«æ—","can_delete":false,"product_type":"c1","uid":1236190,"ip_address":"","ucode":"6BB5534162CBDB","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/xVcA2wzqLYZaeTo7cSA2k3cJVylT3sibmcauzQRUVpJqfxkIJetkCUV7iaVWQuSuCSBICV2AfF2AS5xl1Fgo0pcw/132","comment_is_top":false,"comment_ctime":1553560922,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1553560922","product_id":100024501,"comment_content":"è¯æ³•åˆ†æï¼Œè¯­æ³•åˆ†æï¼Œç”ŸæˆAST","like_count":0},{"had_liked":false,"id":79811,"user_name":"lyle","can_delete":false,"product_type":"c1","uid":1247482,"ip_address":"","ucode":"B1DEC7463E5013","user_header":"","comment_is_top":false,"comment_ctime":1553560492,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1553560492","product_id":100024501,"comment_content":"æ˜¯ä¸æ˜¯ç”¨clangæŠŠä»£ç è½¬æ¢ä¸ºAST,åˆ†æå™¨é€šè¿‡å®šä¹‰å¥½çš„è§„åˆ™åœ¨ASTä¸­æ¥æ‰¾ä»£ç çš„é—®é¢˜ã€‚","like_count":0},{"had_liked":false,"id":79801,"user_name":"è°¢çŸ¥è¡Œ","can_delete":false,"product_type":"c1","uid":1168573,"ip_address":"","ucode":"0E1BBF3B917FBC","user_header":"https://static001.geekbang.org/account/avatar/00/11/d4/bd/7ca98113.jpg","comment_is_top":false,"comment_ctime":1553559402,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1553559402","product_id":100024501,"comment_content":"æä¾›è¯­æ³•æ ‘å—ï¼Ÿ","like_count":0}]}