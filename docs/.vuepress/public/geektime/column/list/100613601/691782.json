{"id":691782,"title":"05ï½œæœºå™¨ä¸è¯­è¨€ï¼šJVM ä¸­çš„å­—èŠ‚ç ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯åº·æ¨ã€‚ä»Šå¤©æˆ‘ä»¬æ¥èŠèŠJVMçš„è¯­è¨€â€”â€”å­—èŠ‚ç ã€‚</p><p>åœ¨å‰é¢çš„ä»‹ç»ä¸­ï¼Œæˆ‘ä»¬æåˆ°è¿‡Javaè¯­è¨€çš„å¹³å°æ— å…³æ€§ï¼Œè¿™ä¹Ÿæ˜¯Javaèƒ½å¤Ÿå¿«é€Ÿå´›èµ·çš„åŸå› ä¹‹ä¸€ã€‚æˆ‘ä»¬åªéœ€è¦ç”¨Javaè¯­è¨€å®Œæˆä¸šåŠ¡é€»è¾‘çš„å¼€å‘ï¼ŒJVMå°±ä¼šå¸®åŠ©æˆ‘ä»¬å®Œæˆåœ¨ç‰©ç†æœåŠ¡å™¨ä¸Šçš„è¿è¡Œï¼Œè€Œä¸ç”¨å»å…³å¿ƒåº•å±‚ç¡¬ä»¶å¹³å°çš„å·®å¼‚æ€§ï¼Œèƒ½å¤Ÿè¾¾æˆè¿™ç§æ•ˆæœçš„å…³é”®è§’è‰²å°±æ˜¯å­—èŠ‚ç ã€‚</p><p>å€ŸåŠ©å­—èŠ‚ç ï¼ŒJVMå±è”½äº†ä¸Šå±‚ç¼–ç¨‹è¯­è¨€ï¼ˆJavaã€Scala ï¼‰å’Œä¸‹å±‚ç¡¬ä»¶å¹³å°çš„å¤šæ ·æ€§ã€‚è€ŒJVMè¢«è®¤ä¸ºæ˜¯å­—èŠ‚ç çš„è¿è¡Œæ—¶ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/3b/c8/3b1c14f56ed0784ba781dc5894963dc8.png?wh=1920x595\" alt=\"å›¾ç‰‡\"></p><h2>å­—èŠ‚ç æ˜¯ä»€ä¹ˆ?</h2><p>Javaæºä»£ç ç»è¿‡ç¼–è¯‘å™¨ç¼–è¯‘åï¼Œå°±ä¼šç”ŸæˆJVMå­—èŠ‚ç ï¼Œå®ƒæ˜¯Javaç¨‹åºåœ¨JVMä¸Šæ‰§è¡Œçš„ä¸­é—´è¡¨ç¤ºå½¢å¼ã€‚JVMå­—èŠ‚ç æ˜¯ä¸€ç§åŸºäºæ ˆçš„æŒ‡ä»¤é›†æ¶æ„ï¼ˆStack-based Instruction Set Architectureï¼‰ã€‚æ¯ä¸ªå­—èŠ‚ç æŒ‡ä»¤éƒ½ä¼šåœ¨JVMä¸Šæ‰§è¡Œä¸€ç³»åˆ—çš„æ“ä½œï¼Œå¦‚åŠ è½½ã€å­˜å‚¨ã€è¿ç®—ã€è·³è½¬ç­‰ã€‚</p><p>å®ƒä½¿ç”¨åŸºäºæ“ä½œæ•°æ ˆå’Œå±€éƒ¨å˜é‡è¡¨çš„æ‰§è¡Œæ¨¡å‹ã€‚å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p><ul>\n<li>ç‹¬ç«‹äºå…·ä½“çš„ç¡¬ä»¶å’Œæ“ä½œç³»ç»Ÿï¼Œä¸åŒå¹³å°ä¸Šçš„JVMå¯ä»¥è§£é‡Šå’Œæ‰§è¡Œç›¸åŒçš„å­—èŠ‚ç æ–‡ä»¶ã€‚</li>\n<li>ç›¸å¯¹äºæœºå™¨ç å’Œæºä»£ç ï¼ŒJVMå­—èŠ‚ç æ˜¯ä¸€ç§æ›´é«˜çº§åˆ«çš„æŠ½è±¡ï¼Œå¹¶ä¸”æ¯”æœºå™¨ç æ›´å®¹æ˜“é˜…è¯»å’Œç¼–å†™ï¼ˆç†è§£ï¼‰ã€‚</li>\n<li>JVMå­—èŠ‚ç é€šè¿‡è¿è¡Œæ—¶çš„å³æ—¶ç¼–è¯‘å™¨æˆ–è§£é‡Šå™¨æ‰§è¡Œã€‚</li>\n</ul><!-- [[[read_end]]] --><p>JVMå­—èŠ‚ç ä½¿Javaè¯­è¨€å…·å¤‡äº†è·¨å¹³å°çš„èƒ½åŠ›ï¼Œåªéœ€ç¼–å†™ä¸€æ¬¡Javaç¨‹åºï¼Œç„¶ååœ¨ä¸åŒå¹³å°ä¸Šå®‰è£…ç›¸åº”çš„JVMï¼Œå°±èƒ½åœ¨è¿™äº›å¹³å°ä¸Šè¿è¡Œç›¸åŒçš„å­—èŠ‚ç ã€‚è¿™ç§ç‰¹æ€§ä¸ºJavaç¨‹åºæä¾›äº†å¾ˆé«˜çš„å¯ç§»æ¤æ€§å’Œå…¼å®¹æ€§ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå…¶ä»–ç¼–ç¨‹è¯­è¨€ä¹Ÿå¯ä»¥ç¼–è¯‘æˆJVMå­—èŠ‚ç ï¼Œåˆ©ç”¨JVMçš„ä¼˜åŠ¿ã€‚è¿™äº›ç¼–ç¨‹è¯­è¨€å«åšåŸºäºJVMçš„è¯­è¨€ï¼Œä¾‹å¦‚Kotlinã€Groovyç­‰ã€‚</p><p>è¿™äº›è¯­è¨€çš„ä»£ç ç¼–è¯‘åä¹Ÿä¼šç”Ÿæˆå’ŒJavaç¨‹åºç›¸åŒçš„JVMå­—èŠ‚ç ã€‚</p><h2>è·å–å­—èŠ‚ç </h2><p>æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬çœ‹ä¸€ä¸‹å­—èŠ‚ç åˆ°åº•é•¿ä»€ä¹ˆæ ·ã€‚æˆ‘ä»¬å…ˆç¼–å†™ä¸€ä¸ªç®€å•çš„Javaç±»ä½œä¸ºç¤ºä¾‹ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º <code>HelloWorld</code> çš„Javaæ–‡ä»¶ï¼Œå°†ä»¥ä¸‹ä»£ç æ·»åŠ åˆ°æ–‡ä»¶é‡Œã€‚</p><pre><code class=\"language-java\">public class HelloWorld {\n&nbsp;&nbsp;&nbsp; public static void main(String[] args) {\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.out.println(\"Hello, World!\");\n&nbsp;&nbsp;&nbsp; }\n}\n</code></pre><p>æ¥ä¸‹æ¥ï¼Œç¼–è¯‘Javaæºä»£ç ã€‚ä½¿ç”¨Javaç¼–è¯‘å™¨æŠŠJavaæºä»£ç ç¼–è¯‘æˆå­—èŠ‚ç æ–‡ä»¶ã€‚åœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œ <code>javac HelloWorld.java</code> å‘½ä»¤ï¼Œä¼šç”Ÿæˆä¸€ä¸ªåå« HelloWorld.class çš„å­—èŠ‚ç æ–‡ä»¶ã€‚</p><h2>æŸ¥çœ‹å­—èŠ‚ç æ–‡ä»¶</h2><p>æˆ‘ä»¬ä½¿ç”¨Javaåç¼–è¯‘å·¥å…·ï¼Œå¦‚ <code>javap</code>ï¼Œæ¥æŸ¥çœ‹å­—èŠ‚ç æ–‡ä»¶çš„å†…å®¹ã€‚åœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œ <code>javap -c HelloWorld</code> å‘½ä»¤ï¼Œä¼šæ˜¾ç¤º HelloWorld ç±»çš„å­—èŠ‚ç å†…å®¹ï¼ŒåŒ…æ‹¬æ–¹æ³•å’ŒæŒ‡ä»¤ã€‚</p><pre><code class=\"language-java\">public class HelloWorld {\n&nbsp; public HelloWorld();&nbsp; // æ„é€ å‡½æ•°\n&nbsp;&nbsp;&nbsp; Code:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0: aload_0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // å°†å±€éƒ¨å˜é‡è¡¨ä¸­çš„thisåŠ è½½åˆ°æ“ä½œæ•°æ ˆä¸Š\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1: invokespecial #1 // è°ƒç”¨java/lang/Objectç±»çš„æ„é€ å‡½æ•°\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4: return&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // è¿”å›\n&nbsp; public static void main(java.lang.String[]);&nbsp; // ä¸»æ–¹æ³•\n&nbsp;&nbsp;&nbsp; Code:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0: getstatic &nbsp;&nbsp;&nbsp; #2 // è·å–java/lang/System.outçš„é™æ€å­—æ®µ\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3: ldc &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #3 // åŠ è½½å­—ç¬¦ä¸²\"Hello, World!\"åˆ°æ“ä½œæ•°æ ˆä¸Š\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5: invokevirtual #4 // è°ƒç”¨java/io/PrintStreamç±»çš„printlnæ–¹æ³•\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 8: return&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // è¿”å›\n}\n</code></pre><p>åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œä½ å¯ä»¥çœ‹åˆ° <code>HelloWorld</code> ç±»çš„æ„é€ å‡½æ•°å’Œ <code>main</code> æ–¹æ³•çš„å­—èŠ‚ç ã€‚æ¯ä¸ªæ–¹æ³•éƒ½ä»¥ <code>Code:</code> å¼€å¤´ï¼Œåé¢å°±æ˜¯ä¸€ç³»åˆ—çš„æŒ‡ä»¤ã€‚</p><h2>å­—èŠ‚ç æŒ‡ä»¤é›†</h2><p>è¿™äº›å­—èŠ‚ç æŒ‡ä»¤éƒ½ä¼šåœ¨JVMä¸Šæ‰§è¡Œä¸€ç³»åˆ—çš„æ“ä½œï¼Œå¦‚åŠ è½½ã€å­˜å‚¨ã€è¿ç®—ã€è·³è½¬ç­‰ã€‚ä¸‹é¢æˆ‘ä»¬å°±ä¸€ä¸€æ¥çœ‹ä¸‹è¿™äº›æŒ‡ä»¤ã€‚</p><h3>æ ˆæ“ä½œæŒ‡ä»¤</h3><p>æ“ä½œæ•°æ ˆæ˜¯ JVM ä¸­çš„ä¸€ä¸ªä¸´æ—¶æ•°æ®å­˜å‚¨åŒºåŸŸï¼Œç”¨æ¥å­˜å‚¨å±€éƒ¨å˜é‡å’Œä¸­é—´è®¡ç®—ç»“æœã€‚æ ˆæ“ä½œæŒ‡ä»¤ä¸»è¦è´Ÿè´£æ“ä½œè¿™ä¸ªæ“ä½œæ•°æ ˆï¼ŒåŒ…æ‹¬pushã€popã€swapã€dupç­‰ã€‚</p><p>ä¸è¿‡ä¸ºäº†æé«˜ä»£ç çš„æ€§èƒ½ï¼Œæˆ‘ä»¬åº”è¯¥å°½é‡å‡å°‘å¯¹æ ˆçš„æ“ä½œï¼Œå› ä¸ºæ¯æ¬¡å‹å…¥æˆ–å¼¹å‡ºæ ˆå¸§éƒ½éœ€è¦æ¶ˆè€—ä¸€å®šçš„æ—¶é—´å’Œç©ºé—´ã€‚è€Œä¸”åœ¨ç¼–å†™å­—èŠ‚ç çš„æ—¶å€™ï¼Œè¦ç¡®ä¿æ“ä½œæ•°æ ˆçš„æ·±åº¦æ²¡æœ‰è¶…è¿‡ç±»æ–‡ä»¶çš„æœ€å¤§æ ˆæ·±åº¦ï¼Œå¦åˆ™å°†ä¼šæŠ›å‡ºStackOverflowErrorå¼‚å¸¸ï¼Œè¿™ä¸ªå¼‚å¸¸è¡¨ç¤ºæ“ä½œæ•°æ ˆæº¢å‡ºã€‚</p><h3>åŠ è½½å’Œå­˜å‚¨æŒ‡ä»¤</h3><p>åŠ è½½å’Œå­˜å‚¨æŒ‡ä»¤ç”¨æ¥åœ¨æ“ä½œæ•°æ ˆå’Œå±€éƒ¨å˜é‡è¡¨ä¹‹é—´ä¼ é€’æ•°æ®ã€‚åŠ è½½æŒ‡ä»¤æŠŠæ•°æ®ä»å±€éƒ¨å˜é‡è¡¨åŠ è½½åˆ°æ“ä½œæ•°æ ˆï¼Œè€Œå­˜å‚¨æŒ‡ä»¤åˆ™å°†æ“ä½œæ•°æ ˆé¡¶çš„æ•°æ®å­˜å‚¨åˆ°å±€éƒ¨å˜é‡è¡¨ã€‚</p><p>åœ¨æ“ä½œå±€éƒ¨å˜é‡çš„æ—¶å€™ï¼Œå°½é‡ä½¿ç”¨ç´¢å¼•ä¸º0ï½3çš„å˜é‡ï¼Œè¿™æ ·å¯ä»¥ä½¿ç”¨æ›´ç´§å‡‘çš„å­—èŠ‚ç æŒ‡ä»¤ï¼Œå¦‚ iload_0ã€iload_1 ç­‰ã€‚</p><h3>æ•°å­¦æŒ‡ä»¤</h3><p>æ•°å­¦æŒ‡ä»¤ä¸»è¦ç”¨äºæ‰§è¡ŒåŸºæœ¬çš„ç®—æœ¯è¿ç®—ï¼ŒåŠ ã€å‡ã€ä¹˜ã€é™¤ã€æ¨¡ç­‰ï¼Œå¯ä»¥æ ¹æ®æ“ä½œæ•°çš„ç±»å‹ï¼Œæ¯”å¦‚intã€longã€floatã€doubleç­‰ï¼Œé€‰æ‹©ç›¸åº”çš„æ•°å­¦æŒ‡ä»¤ï¼Œé¿å…åœ¨å¾ªç¯ä¸­è¿›è¡Œé‡å¤è®¡ç®—ï¼Œå°½é‡æŠŠè®¡ç®—ç»“æœç¼“å­˜èµ·æ¥ä»¥æé«˜æ€§èƒ½ã€‚</p><h3>ç±»å‹è½¬æ¢æŒ‡ä»¤</h3><p>ç±»å‹è½¬æ¢æŒ‡ä»¤ç”¨æ¥æŠŠä¸€ç§æ•°å€¼ç±»å‹è½¬æ¢æˆå¦ä¸€ç§ç±»å‹ã€‚æ¯”å¦‚ï¼Œä½¿ç”¨ i2f æŒ‡ä»¤æŠŠ int ç±»å‹è½¬æ¢æˆ float ç±»å‹ã€‚åªåœ¨ç¡®å®éœ€è¦çš„æ—¶å€™æ‰§è¡Œç±»å‹è½¬æ¢ï¼Œå¹¶å°½é‡å‡å°‘ä¸å¿…è¦çš„ç±»å‹è½¬æ¢æ“ä½œï¼Œä»¥é¿å…æ€§èƒ½æŸå¤±ã€‚</p><h3>å¯¹è±¡å’Œæ•°ç»„æ“ä½œæŒ‡ä»¤</h3><p>å¯¹è±¡å’Œæ•°ç»„æ“ä½œæŒ‡ä»¤æ¶‰åŠå¯¹è±¡å’Œæ•°ç»„çš„åˆ›å»ºã€è®¿é—®å’Œæ›´æ–°ã€‚è¿™äº›æŒ‡ä»¤åŒ…æ‹¬ newã€getfieldã€putfieldã€getstaticã€putstatic ç­‰ã€‚ ç¼–å†™ä»£ç çš„æ—¶å€™è¦éµå®ˆå°è£…åŸåˆ™ï¼Œä¿æŠ¤å¯¹è±¡çš„çŠ¶æ€å’Œè¡Œä¸ºï¼Œé¿å…ç›´æ¥è®¿é—®å¯¹è±¡çš„æˆå‘˜å˜é‡ã€‚ä½¿ç”¨æ•°ç»„æ—¶ï¼Œç¡®ä¿æ•°ç»„ç´¢å¼•åœ¨æœ‰æ•ˆèŒƒå›´å†…ï¼Œä»¥é¿å…æ•°ç»„è®¿é—®å¼‚å¸¸ã€‚</p><h3>æ§åˆ¶è½¬ç§»æŒ‡ä»¤</h3><p>æ§åˆ¶è½¬ç§»æŒ‡ä»¤ç”¨äºæ›´æ”¹ç¨‹åºçš„æ‰§è¡Œé¡ºåºã€‚æ ¹æ®ä¸åŒçš„æ¡ä»¶ï¼Œå¯ä»¥é€‰æ‹©ç›¸åº”çš„æŒ‡ä»¤ï¼Œä¾‹å¦‚ ifeqã€ifgtã€gotoã€tableswitch ç­‰ã€‚ åœ¨æ¡ä»¶åˆ†æ”¯è¾ƒå¤šçš„æƒ…å†µä¸‹ï¼Œå°½é‡ä½¿ç”¨ tableswitch æˆ– lookupswitch æŒ‡ä»¤ã€‚ä½¿ç”¨ç®€æ´çš„æ§åˆ¶è¯­å¥ï¼Œå‡å°‘åµŒå¥—çš„æ·±åº¦ã€‚</p><h3>æ–¹æ³•è°ƒç”¨å’Œè¿”å›æŒ‡ä»¤</h3><p>æ–¹æ³•è°ƒç”¨å’Œè¿”å›æŒ‡ä»¤å¤„ç†æ–¹æ³•çš„è°ƒç”¨å’Œè¿”å›è¿‡ç¨‹ã€‚è¿™äº›æŒ‡ä»¤åŒ…æ‹¬ invokevirtualã€invokespecialã€invokestaticã€invokeinterfaceã€invokedynamicã€returnç­‰ã€‚å‡å°‘æ²¡æœ‰æ„ä¹‰çš„æ–¹æ³•è°ƒç”¨ï¼Œä¾‹å¦‚ä¸å¿…è¦çš„ getter å’Œ setterã€‚å¯¹äºå·²çŸ¥ç›®æ ‡æ–¹æ³•çš„è°ƒç”¨ï¼Œå°½é‡ä½¿ç”¨ invokevirtual å’Œ invokestaticï¼Œè€Œä¸æ˜¯ invokeinterfaceã€‚</p><h3>å¼‚å¸¸å¤„ç†æŒ‡ä»¤</h3><p>å¼‚å¸¸å¤„ç†æŒ‡ä»¤ç”¨æ¥åˆ›å»ºã€æŠ›å‡ºå’Œå¤„ç†å¼‚å¸¸ã€‚è¿™äº›æŒ‡ä»¤åŒ…æ‹¬ athrowã€catchç­‰ã€‚ å°½é‡å‡å°‘å¼‚å¸¸æŠ›å‡ºï¼Œé€šè¿‡åˆç†çš„æ£€æŸ¥å’Œå¤„ç†é¿å…å¼‚å¸¸å‡ºç°ã€‚å¯¹äºå·²çŸ¥çš„å¼‚å¸¸æƒ…å†µï¼Œå°½é‡ä½¿ç”¨æ­£å¸¸çš„æ§åˆ¶æµç¨‹è¿›è¡Œå¤„ç†ï¼Œè€Œä¸æ˜¯ä¾èµ–å¼‚å¸¸ã€‚</p><h2>å­—èŠ‚ç æ˜¯å¦‚ä½•æ‰§è¡Œçš„ï¼Ÿ</h2><p>åœ¨Javaå¼€å‘ä¸­ï¼Œç†è§£JVMå¦‚ä½•æ‰§è¡Œå­—èŠ‚ç å¯¹äºæ€§èƒ½ä¼˜åŒ–ã€é—®é¢˜æ’æŸ¥å…·æœ‰é‡è¦æ„ä¹‰ã€‚ä¸‹é¢æˆ‘å°†é€šè¿‡ä¸€ä¸ªåŒ…å«ä¹˜æ³•å’Œé™¤æ³•è¿ç®—çš„ç®€å•Javaç¨‹åºï¼Œæ·±å…¥è§£æJVMæ˜¯å¦‚ä½•æ‰§è¡Œå­—èŠ‚ç çš„ï¼Œè¿˜æœ‰å­—èŠ‚ç è¿ç®—çš„æœ€ä½³å®è·µã€éœ€è¦æ³¨æ„çš„ç‚¹ã€å¯ä»¥ä¼˜åŒ–çš„ç‚¹ï¼Œä»¥åŠåœ¨ç°å®ç¯å¢ƒä¸­çš„åº”ç”¨å®ä¾‹ã€‚</p><p>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p><pre><code class=\"language-java\">public class Calculator {\n&nbsp; &nbsp; public static void main(String[] args) {\n&nbsp; &nbsp; &nbsp; &nbsp; int a = 6;\n&nbsp; &nbsp; &nbsp; &nbsp; int b = 2;\n&nbsp; &nbsp; &nbsp; &nbsp; int multiply = a * b;\n&nbsp; &nbsp; &nbsp; &nbsp; int divide = a / b;\n&nbsp;\n&nbsp; &nbsp; &nbsp; &nbsp; System.out.println(\"The result of multiplication is: \" + multiply);\n&nbsp; &nbsp; &nbsp; &nbsp; System.out.println(\"The result of division is: \" + divide);\n&nbsp; &nbsp; }\n}\n</code></pre><p>åœ¨è¿™æ®µç¤ºä¾‹ä»£ç ä¸­ï¼Œæˆ‘å®šä¹‰äº†ä¸¤ä¸ªæ•´å‹å˜é‡aå’Œbï¼Œè¿›è¡Œäº†ä¸€æ¬¡ä¹˜æ³•è¿ç®—å’Œä¸€æ¬¡é™¤æ³•è¿ç®—ï¼Œç„¶åè¾“å‡ºäº†ç»“æœã€‚æ¥ä¸‹æ¥æˆ‘ä»¬è¯¦ç»†äº†è§£ä¸€ä¸‹JVMæ˜¯æ€ä¹ˆæ‰§è¡Œä¹˜æ³•å’Œé™¤æ³•è¿ç®—çš„å­—èŠ‚ç çš„ã€‚</p><p>é¦–å…ˆï¼Œä½¿ç”¨ <code>javap -c Calculator</code> å‘½ä»¤è·å–å­—èŠ‚ç ã€‚</p><pre><code class=\"language-java\">public static void main(java.lang.String[]);\n&nbsp; &nbsp; Code:\n&nbsp;&nbsp; &nbsp; &nbsp; 0: bipush&nbsp; &nbsp; &nbsp; &nbsp; 6\n&nbsp;&nbsp; &nbsp; &nbsp; 2: istore_1\n&nbsp;&nbsp; &nbsp; &nbsp; 3: iconst_2\n&nbsp;&nbsp; &nbsp; &nbsp; 4: istore_2\n&nbsp;&nbsp; &nbsp; &nbsp; 5: iload_1\n&nbsp;&nbsp; &nbsp; &nbsp; 6: iload_2\n&nbsp;&nbsp; &nbsp; &nbsp; 7: imul\n&nbsp;&nbsp; &nbsp; &nbsp; 8: istore_3\n&nbsp;&nbsp; &nbsp; &nbsp; 9: iload_1\n&nbsp; &nbsp; &nbsp; 10: iload_2\n&nbsp; &nbsp; &nbsp; 11: idiv\n&nbsp; &nbsp; &nbsp; 12: istore 4\n&nbsp; &nbsp; &nbsp; 14: getstatic &nbsp; &nbsp; #2\n&nbsp; &nbsp; &nbsp; 17: new &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #3\n&nbsp; &nbsp; &nbsp; 20: dup\n&nbsp; &nbsp; &nbsp; 21: invokespecial #4\n&nbsp; &nbsp; &nbsp; 24: ldc &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #5\n&nbsp; &nbsp; &nbsp; 26: invokevirtual #6\n&nbsp; &nbsp; &nbsp; 29: invokevirtual #7\n&nbsp; &nbsp; &nbsp; 32: return\n</code></pre><p>æˆ‘ä»¬æ¥è§£æä¸€ä¸‹è¿™äº›å­—èŠ‚ç ã€‚</p><ul>\n<li>0ã€2ï¼š<code>bipush 6</code> å’Œ <code>iconst_2</code>ï¼ŒæŠŠå¸¸æ•°6å’Œ2åˆ†åˆ«å‹å…¥æ“ä½œæ•°æ ˆï¼Œ <code>istore_1</code> å’Œ <code>istore_2</code> æŠŠè¿™ä¸¤ä¸ªå¸¸æ•°å­˜å‚¨åˆ°æœ¬åœ°å˜é‡è¡¨å¯¹åº”çš„ç´¢å¼•ä½ç½®1å’Œ2é‡Œï¼Œç›¸å½“äºæ‰§è¡Œä»£ç  <code>int a = 6; int b = 2</code>ã€‚</li>\n<li>5ã€6ã€7ï¼š <code>iload_1</code> å’Œ <code>iload_2</code> å°†æœ¬åœ°å˜é‡è¡¨ä¸­çš„å˜é‡aå’ŒbåŠ è½½åˆ°æ“ä½œæ•°æ ˆï¼Œ<code>imul</code> æ“ä½œç¬¦æ‰§è¡Œæ ˆé¡¶ä¸¤ä¸ªå…ƒç´ çš„ä¹˜æ³•ï¼Œ<code>istore_3</code> å°†ä¹˜æ³•ç»“æœå­˜å‚¨åˆ°æœ¬åœ°å˜é‡è¡¨ç´¢å¼•3çš„ä½ç½®ï¼Œç›¸å½“äºæ‰§è¡Œä»£ç  <code>int multiply = a * b</code>ã€‚</li>\n<li>9ã€10ã€11ï¼šä¸ä¹˜æ³•æ“ä½œç±»ä¼¼ï¼Œæ‰§è¡Œé™¤æ³•åï¼Œç”¨ <code>istore 4</code> å°†ç»“æœå­˜å‚¨åˆ°æœ¬åœ°å˜é‡è¡¨ç´¢å¼•4ä½ç½®ï¼Œç›¸å½“äºæ‰§è¡Œä»£ç  <code>int divide = a / b</code>ã€‚</li>\n<li>14-32ï¼šè·å–å¯æ‰“å°è¾“å‡ºçš„å¯¹è±¡ï¼Œè¾“å‡ºä¹˜é™¤è¿ç®—ç»“æœã€‚</li>\n</ul><h3>éœ€è¦æ³¨æ„çš„ç‚¹</h3><p>å†™Javaä»£ç çš„æ—¶å€™è¦é¿å…ç”¨å¤§æ•°åšé™¤æ³•ï¼Œæ¯”å¦‚Integerè‡ªåŠ¨æ‹†è£…ç®±å¯¼è‡´çš„NPEé—®é¢˜ï¼Œåœ¨è¿›è¡Œé™¤æ³•è¿ç®—æ—¶åŠ¡å¿…åšé™¤æ•°ä¸º0çš„åˆ¤æ–­ã€‚</p><h3>ä¼˜åŒ–ç‚¹</h3><p>é‡‡ç”¨ä¹˜ä»¥åæ•°çš„æ–¹å¼æ›¿ä»£é™¤æ³•è®¡ç®—å¯ä»¥æé«˜è¿ç®—æ•ˆç‡ï¼Œä¾‹å¦‚ <code>a / 2</code> å¯ä»¥ä¼˜åŒ–ä¸º <code>a * 0.5</code>ã€‚æˆ‘ä»¬å¯¹äºJavaä»£ç éœ€è¦æœ‰æ·±åº¦çš„ç†è§£ï¼Œæ›´å¥½åœ°åˆ©ç”¨JVMå­—èŠ‚ç èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬å¿«é€Ÿæ’æŸ¥é—®é¢˜ï¼Œä¼˜åŒ–ç¨‹åºçš„æ€§èƒ½ã€‚åƒSpringã€MyBatisç­‰æ¡†æ¶åº•å±‚ä¹Ÿå¤§é‡ä½¿ç”¨å­—èŠ‚ç ç”ŸæˆæŠ€æœ¯æ¥æé«˜ä»£ç æ‰§è¡Œæ•ˆç‡ã€‚</p><h2>å¦‚ä½•ä¼˜åŒ–å­—èŠ‚ç ï¼Ÿ</h2><p>å‡è®¾æˆ‘ä»¬éœ€è¦æ“ä½œä¸€ä¸ªå¤§çš„å­—ç¬¦ä¸²æ•°ç»„ï¼Œå¯èƒ½ä¼šä½¿ç”¨ä¸‹é¢çš„æ¨¡å¼ã€‚</p><pre><code class=\"language-java\">public class StringProcessor {\n&nbsp; &nbsp; public static void main(String[] args) {&nbsp;\n&nbsp; &nbsp; &nbsp; &nbsp; String[] words = {\"big str\" ,\"big str \"} ; //å¤§å­—ç¬¦ä¸²æ•°ç»„\n&nbsp; &nbsp; &nbsp; &nbsp; for (String word : words) {\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (word != null &amp;&amp; !word.isEmpty()) {\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; System.out.println(word.toUpperCase());\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }\n&nbsp; &nbsp; &nbsp; &nbsp; }\n&nbsp; &nbsp; }\n}\n</code></pre><p>è¿™ç§å†™æ³•çš„é—®é¢˜åœ¨äºå½“æ•°ç»„éå¸¸å¤§ï¼Œè€Œä¸”å…ƒç´ æœ‰å¾ˆå¤šä¸ºç©ºæˆ–ä¸ºç©ºä¸²çš„æ—¶å€™ï¼Œå¯èƒ½ä¼šæœ‰æ€§èƒ½é—®é¢˜ã€‚åŸå› æ˜¯å®ƒä»éœ€è¦éå†æ¯ä¸ªå•è¯ï¼Œæ£€æŸ¥æ˜¯å¦ä¸ºç©ºæˆ–ç©ºå­—ç¬¦ä¸²ï¼Œè¿™æ˜¯ä¸å¿…è¦çš„ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡JVMå­—èŠ‚ç åŠ¨æ€ç”Ÿæˆä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²æ•°ç»„ï¼ŒæŠŠç©ºçš„å’Œç©ºå­—ç¬¦ä¸²å‰”é™¤å†è¿›è¡Œæ“ä½œã€‚</p><pre><code class=\"language-java\">import java.lang.reflect.*;\nimport java.util.*;\nimport java.util.stream.Collectors;\nimport java.util.stream.Stream;\npublic class OptimizedStringProcessor {\n&nbsp; &nbsp; public static void main(String[] args) {\n&nbsp; &nbsp; &nbsp; &nbsp; List&lt;String&gt; words = Stream.of(\"big str\").collect(Collectors.toList()); //\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; List&lt;String&gt; filteredWords = (List&lt;String&gt;) Proxy.newProxyInstance(words.getClass().getClassLoader(), new Class[]{List.class}, (proxy, method, methodArgs) -&gt; {\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (method.getName().equals(\"get\")) {\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; String word = (String) method.invoke(words, methodArgs);\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (word == null || word.isEmpty()) {\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return null;\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return word.toUpperCase();\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return method.invoke(words, methodArgs);\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; });\n&nbsp;\n&nbsp; &nbsp; &nbsp; &nbsp; for (String word : filteredWords) {\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (word != null) {\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; System.out.println(word);\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }\n&nbsp; &nbsp; &nbsp; &nbsp; }\n&nbsp; &nbsp; }\n}\n</code></pre><p>ä½¿ç”¨è¿™ç§æ–¹å¼ï¼ŒåŸå§‹çš„å­—ç¬¦ä¸²æ•°ç»„ä¼šå…ˆç»è¿‡åŠ¨æ€ä»£ç†çš„å¤„ç†ï¼Œä¹Ÿå°±æ˜¯åˆ©ç”¨åŠ¨æ€ä»£ç†ç”Ÿæˆç±»çš„å­—èŠ‚ç ï¼Œé‡æ–°å®šä¹‰è·å–å…ƒç´ çš„æ–¹æ³•ï¼Œå‰”é™¤ç©ºå…ƒç´ ï¼Œå°†éç©ºå…ƒç´ è½¬ä¸ºå¤§å†™ï¼Œå¤§å¤§æå‡äº†æ€§èƒ½ï¼Œè¿˜èƒ½ä½¿ä»£ç æ›´åŠ æ•´æ´ã€‚åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œç‰¹åˆ«æ˜¯å¤§æ•°æ®å¤„ç†åœºæ™¯ï¼Œäº†è§£å¹¶æ°å½“åº”ç”¨å­—èŠ‚ç æŠ€æœ¯å¯ä»¥å¸¦æ¥å·¨å¤§çš„æ€§èƒ½ä¼˜åŠ¿ã€‚</p><h2>é‡ç‚¹å›é¡¾</h2><p>JVMå­—èŠ‚ç æ˜¯JVMå¯ç›´æ¥æ‰§è¡Œçš„æœºå™¨ç å½¢å¼ï¼Œå®ƒæ˜¯Javaæºç ç¼–è¯‘è€Œæ¥çš„ï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªå­—èŠ‚åºåˆ—ã€‚å› ä¸ºå®ƒå±è”½äº†ä¸Šå±‚ç¼–ç¨‹è¯­è¨€å’Œä¸‹å±‚ç¡¬ä»¶å¹³å°çš„å·®å¼‚æ€§ï¼Œæ‰€ä»¥Javaè¯­è¨€å€ŸåŠ©å®ƒæ‹¥æœ‰äº†è·¨å¹³å°çš„èƒ½åŠ›ã€‚æ­¤å¤–å®ƒä½¿ç”¨æ“ä½œæ•°æ ˆå’Œå±€éƒ¨å˜é‡è¡¨çš„æ‰§è¡Œæ¨¡å‹ï¼Œä½¿Javaå…·æœ‰äº†å¾ˆé«˜çš„å¯ç§»æ¤æ€§å’Œå…¼å®¹æ€§ã€‚é™¤äº†Javaï¼Œå…¶ä»–åŸºäºJVMçš„è¯­è¨€ä¹Ÿå¯ä»¥ç¼–è¯‘ä¸ºJVMå­—èŠ‚ç ã€‚</p><p>äº†è§£å¹¶æ°å½“åº”ç”¨å­—èŠ‚ç æŠ€æœ¯å¯ä»¥ä¼˜åŒ–æ€§èƒ½ï¼Œæå‡ä»£ç çš„ç®€æ´æ€§ã€‚æœ€ä½³å®è·µåŒ…æ‹¬å‡å°‘æ ˆæ“ä½œã€åˆç†ä½¿ç”¨åŠ è½½å’Œå­˜å‚¨æŒ‡ä»¤ã€é¿å…é‡å¤è®¡ç®—ã€å‡å°‘ç±»å‹è½¬æ¢ã€å°è£…åŸåˆ™ã€æ§åˆ¶è½¬ç§»çš„ç®€æ´æ€§ã€å‡å°‘ä¸å¿…è¦çš„æ–¹æ³•è°ƒç”¨å’Œå¼‚å¸¸å¤„ç†ã€‚åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œäº†è§£JVMå¦‚ä½•æ‰§è¡Œå­—èŠ‚ç å¯¹äºæ€§èƒ½ä¼˜åŒ–å’Œé—®é¢˜æ’æŸ¥å…·æœ‰é‡è¦æ„ä¹‰ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>å¦‚ä½•åˆ©ç”¨å­—èŠ‚ç è¿›è¡Œç¨‹åºä¼˜åŒ–ï¼Ÿè¯·æŠŠä½ çš„æƒ³æ³•åˆ†äº«åˆ°è¯„è®ºåŒºï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠè¿™èŠ‚è¯¾çš„å†…å®¹åˆ†äº«ç»™å…¶ä»–æœ‹å‹ï¼Œæˆ‘ä»¬ä¸‹èŠ‚è¯¾å†è§ï¼</p><h2>ğŸ’¡ ç‚¹äº®ä½ çš„çŸ¥è¯†æ¡†æ¶å›¾</h2><p><img src=\"https://static001.geekbang.org/resource/image/a8/bd/a80736e1ac925314c1965aa6e69b0ebd.jpg?wh=6093x4342\" alt=\"\"></p>","neighbors":{"left":{"article_title":"04ï½œä»JITåˆ°AOTï¼šJVMç¼–è¯‘å™¨çš„äº‘åŸç”Ÿæ¼”è¿›ä¹‹è·¯","id":690327},"right":{"article_title":"06ï½œç±»åŠ è½½å­ç³»ç»Ÿ ï¼ˆä¸Šï¼‰ï¼šç±»åŠ è½½çš„æµç¨‹ä¸æœºåˆ¶","id":692897}},"comments":[{"had_liked":false,"id":380355,"user_name":"æµ©ä»”æ˜¯ç¨‹åºå‘˜","can_delete":false,"product_type":"c1","uid":1104601,"ip_address":"å¹¿ä¸œ","ucode":"A7E5CF9E1571A2","user_header":"https://static001.geekbang.org/account/avatar/00/10/da/d9/f051962f.jpg","comment_is_top":false,"comment_ctime":1693409089,"is_pvip":false,"replies":[{"id":139125,"content":"æ¯”å¦‚é‚£äº›éƒ¨åˆ†æ²¡æœ‰çœ‹æ˜ç™½å‘¢","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1366588,"ctime":1696512966,"ip_address":"åŒ—äº¬","comment_id":380355,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100613601,"comment_content":"é‚£ä¸ªä¾‹å­æœ‰ç‚¹çœ‹ä¸æ‡‚","like_count":6,"discussions":[{"author":{"id":1366588,"avatar":"https://static001.geekbang.org/account/avatar/00/14/da/3c/6ca50139.jpg","nickname":"Arthur king å¾®ä¿¡è¶…ç´šæœƒå“¡","note":"","ucode":"79637F55F0ED85","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":629005,"discussion_content":"æ¯”å¦‚é‚£äº›éƒ¨åˆ†æ²¡æœ‰çœ‹æ˜ç™½å‘¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1696512966,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1444698,"avatar":"https://static001.geekbang.org/account/avatar/00/16/0b/5a/453ad411.jpg","nickname":"C.","note":"","ucode":"5AE269220EFD73","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":627298,"discussion_content":"åˆ¤æ–­çš„æ˜¯Listçš„getæ–¹æ³•,æŠŠä¸‹é¢çš„forå¾ªç¯æ”¹ä¸ºfilteredWords.get(0)å°±çŸ¥é“äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1693980220,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æ±Ÿè‹","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":380354,"user_name":"ä¸´é£","can_delete":false,"product_type":"c1","uid":1145430,"ip_address":"å¹¿ä¸œ","ucode":"59A7F3DDD94D76","user_header":"https://static001.geekbang.org/account/avatar/00/11/7a/56/29877cb9.jpg","comment_is_top":false,"comment_ctime":1693408331,"is_pvip":true,"replies":[{"id":139152,"content":"\nåŠ¨æ€ä»£ç†ç”Ÿæˆçš„Listæ¯”åŸæ¥çš„æ€§èƒ½æ›´å¥½ï¼Œå…¶ä¸»è¦åŸå› åœ¨äºåŠ¨æ€ä»£ç†å¯ä»¥åœ¨è¿è¡Œæ—¶ç”Ÿæˆä»£ç†å¯¹è±¡ï¼Œå¹¶åŠ¨æ€åœ°å†³å®šä½•æ—¶ã€å¦‚ä½•å’Œå“ªäº›æ–¹æ³•å»æ‰§è¡Œï¼Œé¿å…äº†ä¸å¿…è¦çš„é€»è¾‘åˆ¤æ–­ã€‚\næ¯”å¦‚æˆ‘ä»¬åœ¨ä»£ç†getæ–¹æ³•æ—¶ï¼Œæœ¬æ¥éœ€è¦æ£€æµ‹å‚æ•°æ˜¯å¦ä¸ºnullï¼Œä»£ç†åæˆ‘ä»¬å¯ä»¥é¢„å…ˆè®¾å®šnullæ— æ•ˆåŒ–ï¼Œå¹¶åœ¨ä»£ç†ä»£ç ä¸­ç›´æ¥è·³è¿‡è¿™ä¸ªé€»è¾‘ï¼Œé¿å…è¿›è¡Œnullåˆ¤æ–­ï¼Œè¿™æ ·å°±å¯ä»¥æå‡æ‰§è¡Œæ•ˆç‡ã€‚\nè‡³äºå­—èŠ‚ç åº”ç”¨çš„ä¾‹å­ï¼Œä½ çš„ç†è§£å®Œå…¨æ­£ç¡®ã€‚åƒSkyWalkingè¿™æ ·çš„æ€§èƒ½ç›‘æ§å·¥å…·å°±æ˜¯é€šè¿‡å­—èŠ‚ç æ³¨å…¥æŠ€æœ¯ï¼Œå°†è¿½è¸ªä»£ç æ³¨å…¥åˆ°ç›®æ ‡æ–¹æ³•ä¸­ï¼Œä»è€Œè·å–æ–¹æ³•çš„è°ƒç”¨é“¾è·¯ã€è°ƒç”¨æ—¶é•¿ç­‰ä¿¡æ¯ã€‚å…·ä½“åˆ°SkyWalkingï¼Œå…¶å®ä½¿ç”¨æ­¤ç§æŠ€æœ¯ä¸»è¦æ˜¯ä¸ºäº†å®Œæˆå¯¹åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªçš„åŠŸèƒ½ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1366588,"ctime":1696592017,"ip_address":"åŒ—äº¬","comment_id":380354,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100613601,"comment_content":"è€å¸ˆï¼Œæœ‰ä¸ªåœ°æ–¹ä¸å¤ªç†è§£ï¼Œä¸ºä»€ä¹ˆé€šè¿‡åŠ¨æ€ä»£ç†ç”Ÿæˆçš„Listå°±æ¯”åŸæ¥çš„æ€§èƒ½æ›´å¥½ï¼Œä»£ç†getæ–¹æ³•åï¼Œä¸æ˜¯ä¹Ÿè¦æ‰§è¡Œåˆ¤ç©ºé€»è¾‘å—ï¼Ÿ\n\nå¯¹äºå­—èŠ‚ç çš„åº”ç”¨ï¼Œæˆ‘æƒ³åˆ°çš„ä¸€ä¸ªæ˜¯æ€§èƒ½ç›‘æ§ï¼Œå¤§æ¦‚äº†è§£äº†ä¸€ä¸‹ï¼Œåƒskywalkingå°±æ˜¯é€šè¿‡æ³¨å…¥å­—èŠ‚ç ï¼Œå°†trace IDä¿å­˜åˆ°threadLocalä¸­å»ï¼Œå¹¶åœ¨è°ƒç”¨å…¶ä»–æ¥å£æ—¶è®¾ç½®åˆ°headerä¸­å»ï¼Œç”±æ­¤å®Œæˆäº†é“¾è·¯è·Ÿè¸ªçš„åŠŸèƒ½ã€‚\n\n","like_count":1,"discussions":[{"author":{"id":1366588,"avatar":"https://static001.geekbang.org/account/avatar/00/14/da/3c/6ca50139.jpg","nickname":"Arthur king å¾®ä¿¡è¶…ç´šæœƒå“¡","note":"","ucode":"79637F55F0ED85","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":629056,"discussion_content":"\nåŠ¨æ€ä»£ç†ç”Ÿæˆçš„Listæ¯”åŸæ¥çš„æ€§èƒ½æ›´å¥½ï¼Œå…¶ä¸»è¦åŸå› åœ¨äºåŠ¨æ€ä»£ç†å¯ä»¥åœ¨è¿è¡Œæ—¶ç”Ÿæˆä»£ç†å¯¹è±¡ï¼Œå¹¶åŠ¨æ€åœ°å†³å®šä½•æ—¶ã€å¦‚ä½•å’Œå“ªäº›æ–¹æ³•å»æ‰§è¡Œï¼Œé¿å…äº†ä¸å¿…è¦çš„é€»è¾‘åˆ¤æ–­ã€‚\næ¯”å¦‚æˆ‘ä»¬åœ¨ä»£ç†getæ–¹æ³•æ—¶ï¼Œæœ¬æ¥éœ€è¦æ£€æµ‹å‚æ•°æ˜¯å¦ä¸ºnullï¼Œä»£ç†åæˆ‘ä»¬å¯ä»¥é¢„å…ˆè®¾å®šnullæ— æ•ˆåŒ–ï¼Œå¹¶åœ¨ä»£ç†ä»£ç ä¸­ç›´æ¥è·³è¿‡è¿™ä¸ªé€»è¾‘ï¼Œé¿å…è¿›è¡Œnullåˆ¤æ–­ï¼Œè¿™æ ·å°±å¯ä»¥æå‡æ‰§è¡Œæ•ˆç‡ã€‚\nè‡³äºå­—èŠ‚ç åº”ç”¨çš„ä¾‹å­ï¼Œä½ çš„ç†è§£å®Œå…¨æ­£ç¡®ã€‚åƒSkyWalkingè¿™æ ·çš„æ€§èƒ½ç›‘æ§å·¥å…·å°±æ˜¯é€šè¿‡å­—èŠ‚ç æ³¨å…¥æŠ€æœ¯ï¼Œå°†è¿½è¸ªä»£ç æ³¨å…¥åˆ°ç›®æ ‡æ–¹æ³•ä¸­ï¼Œä»è€Œè·å–æ–¹æ³•çš„è°ƒç”¨é“¾è·¯ã€è°ƒç”¨æ—¶é•¿ç­‰ä¿¡æ¯ã€‚å…·ä½“åˆ°SkyWalkingï¼Œå…¶å®ä½¿ç”¨æ­¤ç§æŠ€æœ¯ä¸»è¦æ˜¯ä¸ºäº†å®Œæˆå¯¹åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªçš„åŠŸèƒ½ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1696592017,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1182516,"avatar":"https://static001.geekbang.org/account/avatar/00/12/0b/34/f41d73a4.jpg","nickname":"ç‹ç››æ­¦","note":"","ucode":"DE7EF246D3DCE8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1366588,"avatar":"https://static001.geekbang.org/account/avatar/00/14/da/3c/6ca50139.jpg","nickname":"Arthur king å¾®ä¿¡è¶…ç´šæœƒå“¡","note":"","ucode":"79637F55F0ED85","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":630171,"discussion_content":"åŠ¨æ€ä»£ç†é‚£æ®µä»£ç  çœ‹ä¸Šå»ä¹Ÿæœ‰nullåˆ¤æ–­å’Œisemptyåˆ¤æ–­ï¼Œ å“ªé‡ŒèŠ‚çœäº†ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1698147995,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":629056,"ip_address":"å¹¿ä¸œ","group_id":0},"score":630171,"extra":""}]},{"author":{"id":1051938,"avatar":"https://static001.geekbang.org/account/avatar/00/10/0d/22/fe6b9642.jpg","nickname":"twang","note":"","ucode":"44B8325E6DF106","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":635736,"discussion_content":"æœ‰è°ææ¸…æ¥šäº†å—ï¼Œå¸Œæœ›åˆ†äº«ä¸€ä¸‹ã€‚\næˆ‘è§‰å¾—è¿™ä¸ªä¾‹å­å¯èƒ½é”™äº†ï¼Œæˆ‘ç†è§£ä½¿ç”¨ä»£ç†ç›¸æ¯”åŸæ¥å¼€é”€åªå¤šä¸å°‘ï¼Œä¸å¯èƒ½æ›´å¿«ã€‚\nä¾‹å­ä¸­ä¹Ÿæœ‰ä¸€ä¸ªé”™è¯¯ï¼Œfor-each å¾ªç¯ä½¿ç”¨çš„æ˜¯ iteratorï¼Œæ²¡æœ‰è°ƒç”¨ getï¼Œæ‰€ä»¥ä»£ç†ä¸­çš„ä»£ç æ²¡æœ‰æ‰§è¡Œï¼Œè¿™ä¹ˆç¡®å®æ›´å¿«ï¼Œä½†ä¹Ÿæ²¡æœ‰è½¬æˆå¤§å†™ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1705073338,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æµ™æ±Ÿ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":380828,"user_name":"Geek_f46b9e","can_delete":false,"product_type":"c1","uid":3705971,"ip_address":"å¹¿ä¸œ","ucode":"DD89BC5C720209","user_header":"","comment_is_top":false,"comment_ctime":1694249502,"is_pvip":false,"replies":[{"id":139128,"content":"è¿™æ˜¯å› ä¸ºåœ¨ç¡¬ä»¶æˆ–åº•å±‚è½¯ä»¶ä¸­å®ç°é™¤æ³•è¿ç®—ï¼Œéœ€è¦è¿›è¡Œæ›´å¤æ‚çš„ç®—æ³•å’Œæ•°å­¦è®¡ç®—ã€‚å› æ­¤ï¼Œå¦‚æœæœ‰å¯èƒ½ï¼Œç¨‹åºå‘˜å€¾å‘äºä½¿ç”¨å…¶ä»–æ–¹å¼ï¼ˆå¦‚ä¹˜æ³•æˆ–ä½è¿ç®—ï¼‰æ¥é¿å…é™¤æ³•è¿ç®—ï¼Œä»¥æé«˜ç¨‹åºçš„è¿è¡Œæ•ˆç‡","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1366588,"ctime":1696514327,"ip_address":"åŒ—äº¬","comment_id":380828,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100613601,"comment_content":"ä¸ºä»€ä¹ˆ  é‡‡ç”¨ä¹˜ä»¥åæ•°çš„æ–¹å¼æ›¿ä»£é™¤æ³•è®¡ç®—å¯ä»¥æé«˜è¿ç®—æ•ˆç‡å‘¢","like_count":0,"discussions":[{"author":{"id":1366588,"avatar":"https://static001.geekbang.org/account/avatar/00/14/da/3c/6ca50139.jpg","nickname":"Arthur king å¾®ä¿¡è¶…ç´šæœƒå“¡","note":"","ucode":"79637F55F0ED85","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":629009,"discussion_content":"è¿™æ˜¯å› ä¸ºåœ¨ç¡¬ä»¶æˆ–åº•å±‚è½¯ä»¶ä¸­å®ç°é™¤æ³•è¿ç®—ï¼Œéœ€è¦è¿›è¡Œæ›´å¤æ‚çš„ç®—æ³•å’Œæ•°å­¦è®¡ç®—ã€‚å› æ­¤ï¼Œå¦‚æœæœ‰å¯èƒ½ï¼Œç¨‹åºå‘˜å€¾å‘äºä½¿ç”¨å…¶ä»–æ–¹å¼ï¼ˆå¦‚ä¹˜æ³•æˆ–ä½è¿ç®—ï¼‰æ¥é¿å…é™¤æ³•è¿ç®—ï¼Œä»¥æé«˜ç¨‹åºçš„è¿è¡Œæ•ˆç‡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1696514328,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":380957,"user_name":"éæ´²é»‘çŒ´å­","can_delete":false,"product_type":"c1","uid":2639724,"ip_address":"ç¾å›½","ucode":"F5FEAC07D562E0","user_header":"https://static001.geekbang.org/account/avatar/00/28/47/6c/78184d19.jpg","comment_is_top":false,"comment_ctime":1694507490,"is_pvip":true,"replies":null,"discussion_count":0,"race_medal":1,"score":2,"product_id":100613601,"comment_content":"æœ€åè¿™ä¸ªä¾‹å­ä¸å¤ªæ˜ç™½, OptimizedStringProcessoræ€ä¹ˆå°±å¿«äº†? è°¢è°¢","like_count":2},{"had_liked":false,"id":388236,"user_name":"JavaBit","can_delete":false,"product_type":"c1","uid":1185496,"ip_address":"ä¸Šæµ·","ucode":"9A03A5400C5B1E","user_header":"https://static001.geekbang.org/account/avatar/00/12/16/d8/f15be64d.jpg","comment_is_top":false,"comment_ctime":1709691167,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100613601,"comment_content":"OptimizedStringProcessorè¿™ä¸ªä¾‹å­å‡ºé”™äº†å§ï¼Œæˆ‘æµ‹è¯•äº†ä¸‹æ²¡æœ‰è°ƒç”¨getæ–¹æ³•ï¼Œä½¿ç”¨çš„æ˜¯iteratorçš„æ–¹æ³•ï¼Œå­—ç¬¦ä¸²å¹¶æ²¡æœ‰å˜æˆå¤§å†™ã€‚\n\nå¦å¤–ï¼Œè¿™ä¸ªä¾‹å­å“ªé‡Œå¯ä»¥ä½“ç°æ€§èƒ½çš„ä¼˜åŒ–å‘¢ï¼Œæœ‰æ²¡æœ‰å¤§æ‰¹é‡çš„æ•°æ®éªŒè¯å‘¢","like_count":1},{"had_liked":false,"id":380347,"user_name":"peter","can_delete":false,"product_type":"c1","uid":1058183,"ip_address":"åŒ—äº¬","ucode":"261C3FC001DE2D","user_header":"https://static001.geekbang.org/account/avatar/00/10/25/87/f3a69d1b.jpg","comment_is_top":false,"comment_ctime":1693404076,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100613601,"comment_content":"è¯·æ•™è€å¸ˆå‡ ä¸ªé—®é¢˜ï¼š\nQ1ï¼šâ€œåˆ©ç”¨åŠ¨æ€ä»£ç†ç”Ÿæˆç±»çš„å­—èŠ‚ç â€ï¼Œè¿™å¥è¯ä¸å¤ªç†è§£ï¼šæ–‡ä¸­æ˜¯Javaä»£ç å•Šï¼Œä»€ä¹ˆæ—¶å€™ç”Ÿæˆå­—èŠ‚ç ï¼Ÿç±»ç¼–è¯‘åå°±æ˜¯å­—èŠ‚ç ï¼Œè¿˜éœ€è¦äºŒæ¬¡ç”Ÿæˆå­—èŠ‚ç ï¼Ÿ\nQ2ï¼š#åé¢è·Ÿä¸€ä¸ªæ•°å­—ï¼Œæ¯”å¦‚#2è¡¨ç¤ºä»€ä¹ˆæ„æ€ï¼Ÿ\nQ3ï¼šåœ¨è¿›è¡Œåº•å±‚è¿ç®—ä¹‹å‰ï¼ŒJVMè¿›è¡Œäº†è‡ªå·±çš„å­—èŠ‚ç è¿ç®—ï¼Œæ˜¯å—ï¼Ÿ\nå¦‚æœæ˜¯è¿™æ ·ï¼Œç›¸å½“äºæœ‰ä¸¤æ¬¡è¿ç®—ï¼Œé¦–å…ˆåœ¨JVMä¸­è¿›è¡Œäº†å­—èŠ‚ç çº§åˆ«çš„è¿ç®—ï¼Œç„¶åäº¤ç»™ç³»ç»ŸCPUè¿›è¡Œç¬¬äºŒæ¬¡è¿ç®—ï¼Œæ˜¯å—ï¼Ÿï¼ˆæˆ‘åŸæ¥ä¸€ç›´è®¤ä¸ºæ˜¯æŠŠå­—èŠ‚ç ç¿»è¯‘ä¸ºæœºå™¨ç ï¼Œç„¶åè¿è¡Œï¼‰","like_count":1}]}