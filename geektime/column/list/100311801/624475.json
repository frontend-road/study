{"id":624475,"title":"加餐3｜这些书里，藏着高手们的“不传之秘”","content":"<p>你好，我是钟敬。</p><p>虽然春节长假转瞬即逝，但今天我们还是给春节策划收个尾，继续说说能帮你落地 DDD 的相关图书。下节课，我们再继续更新正文内容，也给没跟上学习步伐的同学一点缓冲时间。</p><h2>架构相关</h2><p>落地DDD，除了领域建模以外，也离不开架构设计，近年说的比较多的是微服务架构。</p><h3>《演进式架构》和《软件架构》</h3><p><img src=\"https://static001.geekbang.org/resource/image/ab/8c/abfda5b98a57e2b15cb01954096d938c.jpg?wh=1920x1444\" alt=\"图片\" title=\"Neal Ford, Rebecca Parsons, Patrick Kua, 2017\"></p><p><img src=\"https://static001.geekbang.org/resource/image/9b/92/9b56de4a678c82ffab299cfcd9e6c192.jpg?wh=1920x1444\" alt=\"图片\" title=\"Mark Richards, Neal Ford, 2020\"></p><p>关于架构，先说两本书，《演进式架构》和《软件架构 —— 架构模式、特征及实践指南》。之所以放在一起说，是因为他们作者都有 Neal Ford，他是 Thoughtworks 的技术总监。</p><p>DDD强调领域模型要不断演进，集中体现在《领域驱动设计》一书的第三部分“通过重构来加深理解”。领域模型的演进，很可能导致架构的演进，这是一件比较困难的事情。</p><p>《演进式架构》就是讲架构演进的原理和技巧。这本书里提到了架构的质量属性、架构模式、演进策略等内容，但展开得还不够充分。估计作者是意犹未尽吧，于是又和人合写了另一本《软件架构》，深入讨论了在云时代软件的架构思维、架构风格、架构模式以及软技能等话题。</p><p>在微服务和分布式架构方面有三本可以参考。</p><h3>《微服务设计》</h3><p><img src=\"https://static001.geekbang.org/resource/image/85/67/85cc1e333b9cd75f4172bb0d80b01167.jpg?wh=1920x1444\" alt=\"图片\" title=\"Sam Newman, 2015\"></p><p>《微服务设计》是比较早的全面介绍微服务的书籍，包含了微服务的概念、设计、集成、部署、运维、开发过程以及人员组织等多方面的内容，还是很有参考价值的。</p><!-- [[[read_end]]] --><h3>《微服务架构设计模式》</h3><p><img src=\"https://static001.geekbang.org/resource/image/62/4e/6207b18069a35f136365ee11da8ccc4e.jpg?wh=1920x1444\" alt=\"图片\" title=\"Chris Richardson,  2019\"></p><p>《微服务架构设计模式》从模式的角度，介绍了微服务架构的方方面面。我多年前读过作者的另一本书《POJO in Action》，留下了不错的印象。这本书还有一个特点，就是用一个贯穿始终的案例来讲，而不像多数讲模式的书那样，每个模式都是独立讲解的。</p><h3>《凤凰架构》</h3><p><img src=\"https://static001.geekbang.org/resource/image/03/aa/0308086035316201aaf4e30e4953fbaa.jpg?wh=1920x1444\" alt=\"图片\" title=\"周志明，2021\"></p><p>《凤凰架构》是周志明老师写的，也是我这次推荐的书里面唯一一本国人的作品（我也不想这样呀）。你即使没听说过这本书，大概也听说过他写的《深入理解Java虚拟机》吧。</p><p>《凤凰架构》分析了构建可靠的大型分布式系统的各种架构问题，理论上说，比微服务架构的概念要宽泛一些。</p><p>这本书的特点在于实践派和学院派的结合。一方面，很多内容都是来源于作者在实践中的经验之谈。另一方面，身为博士的周志明老师，谈到每个内容时，总是会从原理讲起，也会从历史的角度梳理某个技术点的来龙去脉，甚至最早的出处。这样的书读起来放心呀。</p><p>另外，极客时间有一门公开课<a href=\"https://time.geekbang.org/opencourse/intro/100064201\">《周志明的软件架构课》</a>，看内容应该就是《凤凰架构》的前身。这门课是免费的，如果你有兴趣的话，也可以看一看。</p><h2>编程实践</h2><p>领域模型的演进，牵涉到架构的演进。而架构的演进，最终是由代码层面的演进实现的。所以如果编程功力不足，也不能很好地实践DDD。在编程实践方面，这里推荐三本书。</p><h3>《重构》</h3><p><img src=\"https://static001.geekbang.org/resource/image/ea/b5/ea0bca0531a67cc336841950be3601b5.jpg?wh=1920x1444\" alt=\"图片\" title=\"Martin Fowler, 2019\"></p><p>第一本是《重构》。前面介绍了Martin Fowler写的《分析模式》，而这本书也是怹老人家写的，而且影响更大。如果你没听说过重构的概念，只需要知道它是专门用来拯救烂代码的就可以了。</p><p>尽管老马不是第一个提出重构的人，但重构的技术得以在业界普及，则是拜本书所赐。另外，不论你是用 Eclipse 还是 IDEA，都会发现有一个“重构”菜单，其实也是由这本书来的，甚至菜单项的名称，多数都是来源于书中的重构手法，可见这本书影响之深远。</p><p>这本书的第一版是2000年出版的，目前大家能买到的是第二版。这本书有一个特点，就是如果只是“读”的话，是绝对学不会的，必须一边看书一边敲代码。</p><p>本书第一版用的是Java，第二版用的是JavaScript。不过这本书讲的实际上是普遍原理，而不局限于某种语言。你不一定要用 JavaScript 来实践，看着JavaScript，按照同样的原理，转换成你熟悉的语言来做一遍，一般也是没问题的。</p><h3>《测试驱动开发》</h3><p><img src=\"https://static001.geekbang.org/resource/image/bc/af/bc21c8de6fe679dced0451384cac01af.jpg?wh=1920x1444\" alt=\"图片\" title=\"Kent Beck，2002\"></p><p>第二本是《测试驱动开发》，作者是 Kent Beck。他是和 Martin Fowler 齐名的敏捷奠基人，也是极限编程的发明人之一。《测试驱动开发》是他的代表作。那么，为什么在编程实践方面，我会推荐一本讲“测试”的书呢？</p><p>测试驱动开发简称 TDD，是重要的敏捷技术实践。而 TDD 中所谓的“测试”，和我们之前理解的写完代码再做的测试，不是一个概念。与其说 TDD 是一种测试技术，不如说是一种详述需求和代码设计的技术。</p><p>在 TDD 的过程中，测试、设计、编码是融合在一起的不可分的过程。TDD 和代码重构的关联在于，重构代码时是很容易出错的，而 TDD 为程序编织了一张安全网，能够及时发现重构中的错误，从而极大地降低了重构的风险；另一方面，TDD 中又有一个专门的步骤就是“重构”。所以 TDD 和重构是两个互相依存，互为补充的技术。和《重构》一样，这本书也是一边读，一边敲代码才容易学会。</p><p>如果你希望有一位老师手把手地教你 TDD，也可以了解一下极客时间上的《<a href=\"https://time.geekbang.org/column/intro/100109401\">徐昊 · TDD 项目实战 70 讲</a>》这门课，跟一位真正懂得 TDD 的专家一起写代码，更容易精进技术。</p><h3>《代码整洁之道》</h3><p><img src=\"https://static001.geekbang.org/resource/image/bb/a0/bbfcdbayyf4672e1da6e783069ca57a0.jpg?wh=1920x1444\" alt=\"图片\" title=\"Robert C Martin, 2008\"></p><p>第三本书是《代码整洁之道》，讲的是怎样开发出容易理解，容易维护的代码。作者是 Robert C Martin，业内管他叫 Bob 大叔。他是和 Martin Fowler、Kent Beck 齐名的敏捷软件开发大师。</p><p>关于整洁代码，本来也可以看《代码大全》。不过那本书厚得可以作武器了，而《代码整洁之道》篇幅比较适中，可以节省大家的时间。当然，有时间的话，翻翻《代码大全》也是不错的。</p><p>上面三本书，虽然会用特定的语言来写例子，但讲的都是不局限于编程语言的普遍原理。至于特定语言的编程技巧，我们今天没有提太多。如果有兴趣，课后自己找找《Effective C++》《Effective Java》《Effective Python》之类的书就可以了。</p><h2>读书心得</h2><p>最后，再分享两点读书的心得。</p><h3>“经”和“传”的关系</h3><p>首先说说“经”和“传”的关系。在中国古代，把公认的权威著作称为“经”，把解释经的书称为“传”。比如说《春秋》是经，《春秋左氏传》（也就是《左传》）是传。《易经》是经，《系辞传》是传。古人强调经和传的地位是不同的，读“传”时，不要忘了读“经”。</p><p>不太恰当地类比一下，《领域驱动设计》原书好比是经，后来讲的 DDD 书好比是传。之所以 DDD 的很多概念众说纷纭，就是因为很多人只读过各种二手三手的资料，而没有通过读原著建立共同的概念基础。而且，我发现原书中的一些思想精华，似乎没有被后来的书充分发扬光大。所以我强调首先读原典，把其他的书作参考，哪怕开始时不容易读懂，也要迎难而上。当然，对原典也要本着“尽信书不如无书”的态度。</p><h3>关于模式</h3><p>下面再谈两句“模式”。你可能已经发现了，这两期特别策划里，我推荐的好几本书都牵涉到“模式”。《领域驱动设计》本身其实也是按模式的套路来写的，一共有四十多个模式。</p><p>软件开发的高手往往比新手能够更快，更优质地完成任务。那么，这些高手必然知道一些新手不知道的东西。这些东西过去常常是只可意会不可言传的。但是后来，有各路专家，把高手们的这些“不传之秘”，分门别类地总结出来，成为处理特定问题的既定解决方案。这就是“模式”。其中最早对软件开发产生重大影响的是《设计模式》，后来就掀起了轰轰烈烈的“模式运动”。</p><p>不论是分析模式、架构模式还是设计模式，凡是讲模式的书，都是提炼了大量实践中的精华才得来的。</p><p>读模式的书，难度和收获都会倍增。这类书读起来一般都会比较困难，因为里面的知识密度太大。但是另一方面，又好像同时有好几个专家给你上课，逼着你快速提高。而且，国外的学术风气比较严谨，敢写“模式”书的人，都是有自己的“金刚钻”的，否则也不敢在人前出丑。所以你可以有意识地多看看关于模式的书，只要肯下功夫，这是提高水平的捷径。</p><h2>思考题</h2><p>虽说是加餐，也给你留一道思考题吧。</p><p>发现没有，这两节课列的讲方法学和领域建模的书，年份普遍比较“老”，而讲架构的书，多数都比较“新”。你觉得这说明了什么呢？</p><p>下一节课，我们继续回到 DDD 专栏的主线，开始学习“泛化”，敬请期待。</p>","comments":[{"had_liked":false,"id":367271,"user_name":"escray","can_delete":false,"product_type":"c1","uid":1020525,"ip_address":"北京","ucode":"1F4204930E47C4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/92/6d/becd841a.jpg","comment_is_top":false,"comment_ctime":1675086434,"is_pvip":true,"replies":[{"id":133822,"content":"是这么个意思。共同学习！","user_name":"作者回复","user_name_real":"编辑","uid":1288110,"ctime":1675180886,"ip_address":"广东","comment_id":367271,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100311801,"comment_content":"这里面推荐的几本书看完，应该至少是一个“理论上“的架构师了。\n\n周志明老师的《凤凰架构》有一个开源版本，https:&#47;&#47;icyfenix.cn&#47; 看上去不错；极客时间的免费专栏也很棒。\n\n编程实践方面，还是推荐极客时间的专栏《徐昊 · TDD 项目实战 70 讲》，去年没能学完，希望 2023 年能够继续，这个真的是宝藏级别的。\n\n《代码整洁之道》、《架构整洁之道》、《敏捷整洁之道》、《匠艺整洁之道》……Bob 大叔实在是太能写了，比我看的还要快。\n\n我们现在不但不读经，甚至也不读传，只从公众号里看个片段而已。\n\n《领域驱动设计》里面有四十多个模式？我之前以为只有三个，AGGREGATES、FACTORIES 和 REPOSITORIES，还是得去读原著。\n\n对于思考题，讲方法学和领域建模的书，年份比较老，是因为这一部分东西”变化“比较少，经典永流传；而架构是在不断演进变化的，所以书比较新，”树小墙新画不古“。","like_count":8,"discussions":[{"author":{"id":1288110,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/VBLEAcychgbs5CicUczSYcibicoicZmyk1JHHFiae94KuvVsibAKtcQAvnOPWp0C4yvia8mzvQAORiazjWSoc1XQ9QkLrQ/132","nickname":"钟敬","note":"","ucode":"20B3D31A2C8C86","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":601292,"discussion_content":"是这么个意思。共同学习！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1675180887,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":3784804,"avatar":"","nickname":"Geek_6dfefb","note":"","ucode":"A4148AB5A1FCF5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":649644,"discussion_content":"那确实，理论架构师，哈哈","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1723690486,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"湖南","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":367307,"user_name":"AngryShoes","can_delete":false,"product_type":"c1","uid":2094062,"ip_address":"湖南","ucode":"28E4485EE997AA","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIgXlnRwqBvzlSWTrv4eZ4hSOhXnr6NOKzVFUIHJbhIEjpkvSjlJEg3xf3Th7uKcUw9I200QDpbdg/132","comment_is_top":false,"comment_ctime":1675130802,"is_pvip":false,"replies":[{"id":133821,"content":"嗯嗯，是这么个意思","user_name":"作者回复","user_name_real":"编辑","uid":1288110,"ctime":1675180781,"ip_address":"广东","comment_id":367307,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100311801,"comment_content":"方法学和领域建模的书，年份普遍比较“老”，而讲架构的书，多数都比较“新”。你觉得这说明了什么呢？\n\n我的理解方法学是一种&quot;道&quot; ，虽然行业不同但是道是公认的基础理论，架构是建立在道上的一种&quot;术&quot;，&quot;术&quot;需要应对变化，架构需要随着实践不断演进来适应变化。方法学是一种认识，架构是可以落地的实践，认识是实践的基础。所以方法学和领域建模的书，年份普遍比较“老”，而讲架构的书，多数都比较“新”。一家之言，姑妄听之😄。","like_count":2,"discussions":[{"author":{"id":1288110,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/VBLEAcychgbs5CicUczSYcibicoicZmyk1JHHFiae94KuvVsibAKtcQAvnOPWp0C4yvia8mzvQAORiazjWSoc1XQ9QkLrQ/132","nickname":"钟敬","note":"","ucode":"20B3D31A2C8C86","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":601291,"discussion_content":"嗯嗯，是这么个意思","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1675180781,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":367057,"user_name":"aoe","can_delete":false,"product_type":"c1","uid":1121758,"ip_address":"浙江","ucode":"1C6201EDB4E954","user_header":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","comment_is_top":false,"comment_ctime":1674884906,"is_pvip":false,"replies":[{"id":133751,"content":"有 TDD，稳了 ：）","user_name":"作者回复","user_name_real":"编辑","uid":1288110,"ctime":1674913567,"ip_address":"广东","comment_id":367057,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100311801,"comment_content":"今年的学习目标是跟着钟老师学习 DDD：\n1. 每月读完一本书单里没读过的书，不管能不能看懂，看完再说；\n2. 跟着课程画 UML 图、写代码；\n3. 找一个自己感兴趣的项目，实战 DDD。\n\n还好之前跟着 8X 老师的专栏学习了 TDD，不用担心在「重构」时瑟瑟发抖不敢改代码了。","like_count":1,"discussions":[{"author":{"id":1288110,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/VBLEAcychgbs5CicUczSYcibicoicZmyk1JHHFiae94KuvVsibAKtcQAvnOPWp0C4yvia8mzvQAORiazjWSoc1XQ9QkLrQ/132","nickname":"钟敬","note":"","ucode":"20B3D31A2C8C86","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":600863,"discussion_content":"有 TDD，稳了 ：）","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1674913567,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":367052,"user_name":"kkxue","can_delete":false,"product_type":"c1","uid":1159904,"ip_address":"广东","ucode":"0DCB861D5543D6","user_header":"https://static001.geekbang.org/account/avatar/00/11/b2/e0/bf56878a.jpg","comment_is_top":false,"comment_ctime":1674879559,"is_pvip":false,"replies":[{"id":133752,"content":"我猜测周老师的意思大概是和《DDD》原书里第 4 章各层的名称不完全一样把。比如说原书的展现层是 user interface （Evans 的实际代码例子中是interfaces）, 周老师的代码里是 reource。其实并没有本质的区别，周老师强调 Domain 层对领域的封装，抓住这一点就没问题了。其实按照周老师的标准，我们课程也没有完全和《DDD》书里的一致。","user_name":"作者回复","user_name_real":"编辑","uid":1288110,"ctime":1674914694,"ip_address":"广东","comment_id":367052,"utype":1}],"discussion_count":2,"race_medal":5,"score":2,"product_id":100311801,"comment_content":"周志明博士的书中配套示例代码说没有完全按照DDD来，老师知道是哪些点没有参照么？","like_count":0,"discussions":[{"author":{"id":1288110,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/VBLEAcychgbs5CicUczSYcibicoicZmyk1JHHFiae94KuvVsibAKtcQAvnOPWp0C4yvia8mzvQAORiazjWSoc1XQ9QkLrQ/132","nickname":"钟敬","note":"","ucode":"20B3D31A2C8C86","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":600869,"discussion_content":"我猜测周老师的意思大概是和《DDD》原书里第 4 章各层的名称不完全一样把。比如说原书的展现层是 user interface （Evans 的实际代码例子中是interfaces）, 周老师的代码里是 reource。其实并没有本质的区别，周老师强调 Domain 层对领域的封装，抓住这一点就没问题了。其实按照周老师的标准，我们课程也没有完全和《DDD》书里的一致。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1674914694,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1159904,"avatar":"https://static001.geekbang.org/account/avatar/00/11/b2/e0/bf56878a.jpg","nickname":"kkxue","note":"","ucode":"0DCB861D5543D6","race_medal":5,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":600795,"discussion_content":"就是在单体架构实现的README.md中：后端参考（并未完全遵循）了DDD的分层模式和设计原则 这句","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1674887880,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":367118,"user_name":"Jxin","can_delete":false,"product_type":"c1","uid":1251111,"ip_address":"山东","ucode":"4C03928388C413","user_header":"https://static001.geekbang.org/account/avatar/00/13/17/27/ec30d30a.jpg","comment_is_top":false,"comment_ctime":1674959558,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":2,"product_id":100311801,"comment_content":"其实就译本来说。iddd比原著ddd更迷。","like_count":0,"discussions":[{"author":{"id":1588683,"avatar":"https://static001.geekbang.org/account/avatar/00/18/3d/cb/791d0f5e.jpg","nickname":"猴哥","note":"","ucode":"63A1BFDF13D85D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":650166,"discussion_content":"是嘛，哈哈哈 🤷‍♂️","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1724487112,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"浙江","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}