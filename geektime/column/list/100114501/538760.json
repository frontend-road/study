{"id":538760,"title":"21ï½œIngressï¼šé›†ç¾¤è¿›å‡ºæµé‡çš„æ€»ç®¡","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯Chronoã€‚</p><p>ä¸Šæ¬¡è¯¾é‡Œæˆ‘ä»¬å­¦ä¹ äº†Serviceå¯¹è±¡ï¼Œå®ƒæ˜¯Kuberneteså†…ç½®çš„è´Ÿè½½å‡è¡¡æœºåˆ¶ï¼Œä½¿ç”¨é™æ€IPåœ°å€ä»£ç†åŠ¨æ€å˜åŒ–çš„Podï¼Œæ”¯æŒåŸŸåè®¿é—®å’ŒæœåŠ¡å‘ç°ï¼Œæ˜¯å¾®æœåŠ¡æ¶æ„å¿…éœ€çš„åŸºç¡€è®¾æ–½ã€‚</p><p>Serviceå¾ˆæœ‰ç”¨ï¼Œä½†ä¹Ÿåªèƒ½è¯´æ˜¯â€œåŸºç¡€è®¾æ–½â€ï¼Œå®ƒå¯¹ç½‘ç»œæµé‡çš„ç®¡ç†æ–¹æ¡ˆè¿˜æ˜¯å¤ªç®€å•ï¼Œç¦»å¤æ‚çš„ç°ä»£åº”ç”¨æ¶æ„éœ€æ±‚è¿˜æœ‰å¾ˆå¤§çš„å·®è·ï¼Œæ‰€ä»¥Kuberneteså°±åœ¨Serviceä¹‹ä¸Šåˆæå‡ºäº†ä¸€ä¸ªæ–°çš„æ¦‚å¿µï¼šIngressã€‚</p><p>æ¯”èµ·Serviceï¼ŒIngressæ›´æ¥è¿‘å®é™…ä¸šåŠ¡ï¼Œå¯¹å®ƒçš„å¼€å‘ã€åº”ç”¨å’Œè®¨è®ºä¹Ÿæ˜¯ç¤¾åŒºé‡Œæœ€ç«çˆ†çš„ï¼Œä»Šå¤©æˆ‘ä»¬å°±æ¥çœ‹çœ‹Ingressï¼Œè¿˜æœ‰ä¸å®ƒå…³è”çš„Ingress Controllerã€Ingress Classç­‰å¯¹è±¡ã€‚</p><h2>ä¸ºä»€ä¹ˆè¦æœ‰Ingress</h2><p>é€šè¿‡ä¸Šæ¬¡è¯¾ç¨‹çš„è®²è§£ï¼Œæˆ‘ä»¬çŸ¥é“äº†Serviceçš„åŠŸèƒ½å’Œè¿è¡Œæœºåˆ¶ï¼Œå®ƒæœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªç”±kube-proxyæ§åˆ¶çš„å››å±‚è´Ÿè½½å‡è¡¡ï¼Œåœ¨TCP/IPåè®®æ ˆä¸Šè½¬å‘æµé‡ï¼ˆ<a href=\"https://kubernetes.io/zh/docs/concepts/services-networking/service/\">Serviceå·¥ä½œåŸç†ç¤ºæ„å›¾</a>ï¼‰ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/03/74/0347a0b3bae55fb9ef6c07469e964b74.png?wh=1622x1214\" alt=\"å›¾ç‰‡\"></p><p>ä½†åœ¨å››å±‚ä¸Šçš„è´Ÿè½½å‡è¡¡åŠŸèƒ½è¿˜æ˜¯å¤ªæœ‰é™äº†ï¼Œåªèƒ½å¤Ÿä¾æ®IPåœ°å€å’Œç«¯å£å·åšä¸€äº›ç®€å•çš„åˆ¤æ–­å’Œç»„åˆï¼Œè€Œæˆ‘ä»¬ç°åœ¨çš„ç»å¤§å¤šæ•°åº”ç”¨éƒ½æ˜¯è·‘åœ¨ä¸ƒå±‚çš„HTTP/HTTPSåè®®ä¸Šçš„ï¼Œæœ‰æ›´å¤šçš„é«˜çº§è·¯ç”±æ¡ä»¶ï¼Œæ¯”å¦‚ä¸»æœºåã€URIã€è¯·æ±‚å¤´ã€è¯ä¹¦ç­‰ç­‰ï¼Œè€Œè¿™äº›åœ¨TCP/IPç½‘ç»œæ ˆé‡Œæ˜¯æ ¹æœ¬çœ‹ä¸è§çš„ã€‚</p><!-- [[[read_end]]] --><p>Serviceè¿˜æœ‰ä¸€ä¸ªç¼ºç‚¹ï¼Œå®ƒæ¯”è¾ƒé€‚åˆä»£ç†é›†ç¾¤å†…éƒ¨çš„æœåŠ¡ã€‚å¦‚æœæƒ³è¦æŠŠæœåŠ¡æš´éœ²åˆ°é›†ç¾¤å¤–éƒ¨ï¼Œå°±åªèƒ½ä½¿ç”¨NodePortæˆ–è€…LoadBalancerè¿™ä¸¤ç§æ–¹å¼ï¼Œè€Œå®ƒä»¬éƒ½ç¼ºä¹è¶³å¤Ÿçš„çµæ´»æ€§ï¼Œéš¾ä»¥ç®¡æ§ï¼Œè¿™å°±å¯¼è‡´äº†ä¸€ç§å¾ˆæ— å¥ˆçš„å±€é¢ï¼šæˆ‘ä»¬çš„æœåŠ¡ç©ºæœ‰ä¸€èº«æœ¬é¢†ï¼Œå´æ²¡æœ‰åˆé€‚çš„æœºä¼šèµ°å‡ºå»å¤§å±•æ‹³è„šã€‚</p><p>è¯¥æ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ</p><p>Kubernetesè¿˜æ˜¯æ²¿ç”¨äº†Serviceçš„æ€è·¯ï¼Œæ—¢ç„¶Serviceæ˜¯å››å±‚çš„è´Ÿè½½å‡è¡¡ï¼Œé‚£ä¹ˆæˆ‘å†å¼•å…¥ä¸€ä¸ªæ–°çš„APIå¯¹è±¡ï¼Œåœ¨ä¸ƒå±‚ä¸Šåšè´Ÿè½½å‡è¡¡æ˜¯ä¸æ˜¯å°±å¯ä»¥äº†å‘¢ï¼Ÿ</p><p><strong>ä¸è¿‡é™¤äº†ä¸ƒå±‚è´Ÿè½½å‡è¡¡ï¼Œè¿™ä¸ªå¯¹è±¡è¿˜åº”è¯¥æ‰¿æ‹…æ›´å¤šçš„èŒè´£ï¼Œä¹Ÿå°±æ˜¯ä½œä¸ºæµé‡çš„æ€»å…¥å£ï¼Œç»Ÿç®¡é›†ç¾¤çš„è¿›å‡ºå£æ•°æ®</strong>ï¼Œâ€œæ‰‡å…¥â€â€œæ‰‡å‡ºâ€æµé‡ï¼ˆä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„â€œå—åŒ—å‘â€ï¼‰ï¼Œè®©å¤–éƒ¨ç”¨æˆ·èƒ½å¤Ÿå®‰å…¨ã€é¡ºç•…ã€ä¾¿æ·åœ°è®¿é—®å†…éƒ¨æœåŠ¡ï¼ˆ<a href=\"https://bishoylabib.com/exposing-your-application-to-the-public-ingress/\">å›¾ç‰‡æ¥æº</a>ï¼‰ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/e6/55/e6ce31b027ba2a8d94cdc553a2c97255.png?wh=1288x834\" alt=\"å›¾ç‰‡\"></p><p>æ‰€ä»¥ï¼Œè¿™ä¸ªAPIå¯¹è±¡å°±é¡ºç†æˆç« åœ°è¢«å‘½åä¸º <code>Ingress</code>ï¼Œæ„æ€å°±æ˜¯é›†ç¾¤å†…å¤–è¾¹ç•Œä¸Šçš„å…¥å£ã€‚</p><h2>ä¸ºä»€ä¹ˆè¦æœ‰Ingress Controller</h2><p>å†å¯¹æ¯”ä¸€ä¸‹Serviceæˆ‘ä»¬å°±èƒ½æ›´é€å½»åœ°ç†è§£Ingressã€‚</p><p>Ingresså¯ä»¥è¯´æ˜¯åœ¨ä¸ƒå±‚ä¸Šå¦ä¸€ç§å½¢å¼çš„Serviceï¼Œå®ƒåŒæ ·ä¼šä»£ç†ä¸€äº›åç«¯çš„Podï¼Œä¹Ÿæœ‰ä¸€äº›è·¯ç”±è§„åˆ™æ¥å®šä¹‰æµé‡åº”è¯¥å¦‚ä½•åˆ†é…ã€è½¬å‘ï¼Œåªä¸è¿‡è¿™äº›è§„åˆ™éƒ½ä½¿ç”¨çš„æ˜¯HTTP/HTTPSåè®®ã€‚</p><p>ä½ åº”è¯¥çŸ¥é“ï¼ŒServiceæœ¬èº«æ˜¯æ²¡æœ‰æœåŠ¡èƒ½åŠ›çš„ï¼Œå®ƒåªæ˜¯ä¸€äº›iptablesè§„åˆ™ï¼Œ<strong>çœŸæ­£é…ç½®ã€åº”ç”¨è¿™äº›è§„åˆ™çš„å®é™…ä¸Šæ˜¯èŠ‚ç‚¹é‡Œçš„kube-proxyç»„ä»¶</strong>ã€‚å¦‚æœæ²¡æœ‰kube-proxyï¼ŒServiceå®šä¹‰å¾—å†å®Œå–„ä¹Ÿæ²¡æœ‰ç”¨ã€‚</p><p>åŒæ ·çš„ï¼ŒIngressä¹Ÿåªæ˜¯ä¸€äº›HTTPè·¯ç”±è§„åˆ™çš„é›†åˆï¼Œç›¸å½“äºä¸€ä»½é™æ€çš„æè¿°æ–‡ä»¶ï¼ŒçœŸæ­£è¦æŠŠè¿™äº›è§„åˆ™åœ¨é›†ç¾¤é‡Œå®æ–½è¿è¡Œï¼Œè¿˜éœ€è¦æœ‰å¦å¤–ä¸€ä¸ªä¸œè¥¿ï¼Œè¿™å°±æ˜¯ <code>Ingress Controller</code>ï¼Œå®ƒçš„ä½œç”¨å°±ç›¸å½“äºServiceçš„kube-proxyï¼Œèƒ½å¤Ÿè¯»å–ã€åº”ç”¨Ingressè§„åˆ™ï¼Œå¤„ç†ã€è°ƒåº¦æµé‡ã€‚</p><p>æŒ‰ç†æ¥è¯´ï¼ŒKubernetesåº”è¯¥æŠŠIngress Controllerå†…ç½®å®ç°ï¼Œä½œä¸ºåŸºç¡€è®¾æ–½çš„ä¸€éƒ¨åˆ†ï¼Œå°±åƒkube-proxyä¸€æ ·ã€‚</p><p><strong>ä¸è¿‡Ingress Controllerè¦åšçš„äº‹æƒ…å¤ªå¤šï¼Œä¸ä¸Šå±‚ä¸šåŠ¡è”ç³»å¤ªå¯†åˆ‡ï¼Œæ‰€ä»¥KubernetesæŠŠIngress Controllerçš„å®ç°äº¤ç»™äº†ç¤¾åŒº</strong>ï¼Œä»»ä½•äººéƒ½å¯ä»¥å¼€å‘Ingress Controllerï¼Œåªè¦éµå®ˆIngressè§„åˆ™å°±å¥½ã€‚</p><p>è¿™å°±é€ æˆäº†Ingress Controllerâ€œç™¾èŠ±é½æ”¾â€çš„ç››å†µã€‚</p><p>ç”±äºIngress ControlleræŠŠå®ˆäº†é›†ç¾¤æµé‡çš„å…³é”®å…¥å£ï¼ŒæŒæ¡äº†å®ƒå°±æ‹¥æœ‰äº†æ§åˆ¶é›†ç¾¤åº”ç”¨çš„â€œè¯è¯­æƒâ€ï¼Œæ‰€ä»¥ä¼—å¤šå…¬å¸çº·çº·å…¥åœºï¼Œç²¾å¿ƒæ‰“é€ è‡ªå·±çš„Ingress Controllerï¼Œæ„å›¾åœ¨Kubernetesæµé‡è¿›å‡ºç®¡ç†è¿™ä¸ªé¢†åŸŸå æœ‰ä¸€å¸­ä¹‹åœ°ã€‚</p><p>è¿™äº›å®ç°ä¸­æœ€è‘—åçš„ï¼Œå°±æ˜¯è€ç‰Œçš„åå‘ä»£ç†å’Œè´Ÿè½½å‡è¡¡è½¯ä»¶Nginxäº†ã€‚ä»Ingress Controllerçš„æè¿°ä¸Šæˆ‘ä»¬ä¹Ÿå¯ä»¥çœ‹åˆ°ï¼ŒHTTPå±‚é¢çš„æµé‡ç®¡ç†ã€å®‰å…¨æ§åˆ¶ç­‰åŠŸèƒ½å…¶å®å°±æ˜¯ç»å…¸çš„åå‘ä»£ç†ï¼Œè€ŒNginxåˆ™æ˜¯å…¶ä¸­ç¨³å®šæ€§æœ€å¥½ã€æ€§èƒ½æœ€é«˜çš„äº§å“ï¼Œæ‰€ä»¥å®ƒä¹Ÿç†æ‰€å½“ç„¶æˆä¸ºäº†Kubernetesé‡Œåº”ç”¨å¾—æœ€å¹¿æ³›çš„Ingress Controllerã€‚</p><p>ä¸è¿‡ï¼Œå› ä¸ºNginxæ˜¯å¼€æºçš„ï¼Œè°éƒ½å¯ä»¥åŸºäºæºç åšäºŒæ¬¡å¼€å‘ï¼Œæ‰€ä»¥å®ƒåˆæœ‰å¾ˆå¤šçš„å˜ç§ï¼Œæ¯”å¦‚ç¤¾åŒºçš„Kubernetes Ingress Controllerï¼ˆ<a href=\"https://github.com/kubernetes/ingress-nginx\">https://github.com/kubernetes/ingress-nginx</a>ï¼‰ã€Nginxå…¬å¸è‡ªå·±çš„Nginx Ingress Controllerï¼ˆ<a href=\"https://github.com/nginxinc/kubernetes-ingress\">https://github.com/nginxinc/kubernetes-ingress</a>ï¼‰ã€è¿˜æœ‰åŸºäºOpenRestyçš„Kong Ingress Controllerï¼ˆ<a href=\"https://github.com/Kong/kubernetes-ingress-controller\">https://github.com/Kong/kubernetes-ingress-controller</a>ï¼‰ç­‰ç­‰ã€‚</p><p>æ ¹æ®Docker Hubä¸Šçš„ç»Ÿè®¡ï¼Œ<strong>Nginxå…¬å¸çš„å¼€å‘å®ç°æ˜¯ä¸‹è½½é‡æœ€å¤šçš„Ingress Controller</strong>ï¼Œæ‰€ä»¥æˆ‘å°†ä»¥å®ƒä¸ºä¾‹ï¼Œè®²è§£Ingresså’ŒIngress Controllerçš„ç”¨æ³•ã€‚</p><p>ä¸‹é¢çš„<a href=\"https://www.nginx.com/products/nginx-ingress-controller/\">è¿™å¼ å›¾</a>å°±æ¥è‡ªNginxå®˜ç½‘ï¼Œæ¯”è¾ƒæ¸…æ¥šåœ°å±•ç¤ºäº†Ingress Controlleråœ¨Kubernetesé›†ç¾¤é‡Œçš„åœ°ä½ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/eb/f8/ebebd12312fa5e6eb1ea90c930bd5ef8.png?wh=1920x706\" alt=\"å›¾ç‰‡\"></p><h2>ä¸ºä»€ä¹ˆè¦æœ‰IngressClass</h2><p>é‚£ä¹ˆåˆ°ç°åœ¨ï¼Œæœ‰äº†Ingresså’ŒIngress Controllerï¼Œæˆ‘ä»¬æ˜¯ä¸æ˜¯å°±å¯ä»¥å®Œç¾åœ°ç®¡ç†é›†ç¾¤çš„è¿›å‡ºæµé‡äº†å‘¢ï¼Ÿ</p><p>æœ€åˆKubernetesä¹Ÿæ˜¯è¿™ä¹ˆæƒ³çš„ï¼Œä¸€ä¸ªé›†ç¾¤é‡Œæœ‰ä¸€ä¸ªIngress Controllerï¼Œå†ç»™å®ƒé…ä¸Šè®¸å¤šä¸åŒçš„Ingressè§„åˆ™ï¼Œåº”è¯¥å°±å¯ä»¥è§£å†³è¯·æ±‚çš„è·¯ç”±å’Œåˆ†å‘é—®é¢˜äº†ã€‚</p><p>ä½†éšç€Ingressåœ¨å®è·µä¸­çš„å¤§é‡åº”ç”¨ï¼Œå¾ˆå¤šç”¨æˆ·å‘ç°è¿™ç§ç”¨æ³•ä¼šå¸¦æ¥ä¸€äº›é—®é¢˜ï¼Œæ¯”å¦‚ï¼š</p><ul>\n<li>ç”±äºæŸäº›åŸå› ï¼Œé¡¹ç›®ç»„éœ€è¦å¼•å…¥ä¸åŒçš„Ingress Controllerï¼Œä½†Kubernetesä¸å…è®¸è¿™æ ·åšï¼›</li>\n<li>Ingressè§„åˆ™å¤ªå¤šï¼Œéƒ½äº¤ç»™ä¸€ä¸ªIngress Controllerå¤„ç†ä¼šè®©å®ƒä¸å ªé‡è´Ÿï¼›</li>\n<li>å¤šä¸ªIngresså¯¹è±¡æ²¡æœ‰å¾ˆå¥½çš„é€»è¾‘åˆ†ç»„æ–¹å¼ï¼Œç®¡ç†å’Œç»´æŠ¤æˆæœ¬å¾ˆé«˜ï¼›</li>\n<li>é›†ç¾¤é‡Œæœ‰ä¸åŒçš„ç§Ÿæˆ·ï¼Œä»–ä»¬å¯¹Ingressçš„éœ€æ±‚å·®å¼‚å¾ˆå¤§ç”šè‡³æœ‰å†²çªï¼Œæ— æ³•éƒ¨ç½²åœ¨åŒä¸€ä¸ªIngress Controllerä¸Šã€‚</li>\n</ul><p>æ‰€ä»¥ï¼ŒKuberneteså°±åˆæå‡ºäº†ä¸€ä¸ª <code>Ingress Class</code> çš„æ¦‚å¿µï¼Œè®©å®ƒæ’åœ¨Ingresså’ŒIngress Controllerä¸­é—´ï¼Œä½œä¸ºæµé‡è§„åˆ™å’Œæ§åˆ¶å™¨çš„åè°ƒäººï¼Œè§£é™¤äº†Ingresså’ŒIngress Controllerçš„å¼ºç»‘å®šå…³ç³»ã€‚</p><p>ç°åœ¨ï¼Œ<strong>Kubernetesç”¨æˆ·å¯ä»¥è½¬å‘ç®¡ç†Ingress Classï¼Œç”¨å®ƒæ¥å®šä¹‰ä¸åŒçš„ä¸šåŠ¡é€»è¾‘åˆ†ç»„ï¼Œç®€åŒ–Ingressè§„åˆ™çš„å¤æ‚åº¦</strong>ã€‚æ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨Class Aå¤„ç†åšå®¢æµé‡ã€Class Bå¤„ç†çŸ­è§†é¢‘æµé‡ã€Class Cå¤„ç†è´­ç‰©æµé‡ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/88/0e/8843704c6314706c9b6f4f2399ca940e.jpg?wh=1920x1306\" alt=\"å›¾ç‰‡\"></p><p>è¿™äº›Ingresså’ŒIngress Controllerå½¼æ­¤ç‹¬ç«‹ï¼Œä¸ä¼šå‘ç”Ÿå†²çªï¼Œæ‰€ä»¥ä¸Šé¢çš„é‚£äº›é—®é¢˜ä¹Ÿå°±éšç€Ingress Classçš„å¼•å…¥è¿åˆƒè€Œè§£äº†ã€‚</p><h2>å¦‚ä½•ä½¿ç”¨YAMLæè¿°Ingress/Ingress Class</h2><p>æˆ‘ä»¬èŠ±äº†æ¯”è¾ƒå¤šçš„ç¯‡å¹…å­¦ä¹ Ingressã€ Ingress Controllerã€Ingress Classè¿™ä¸‰ä¸ªå¯¹è±¡ï¼Œå…¨æ˜¯ç†è®ºï¼Œä½ å¯èƒ½è§‰å¾—å­¦å¾—æœ‰ç‚¹ç´¯ã€‚ä½†è¿™ä¹Ÿæ˜¯æ²¡åŠæ³•çš„äº‹æƒ…ï¼Œæ¯•ç«Ÿç°å®çš„ä¸šåŠ¡å°±æ˜¯è¿™ä¹ˆå¤æ‚ï¼Œè€Œä¸”è¿™ä¸ªè®¾è®¡æ¶æ„ä¹Ÿæ˜¯ç¤¾åŒºç»è¿‡é•¿æœŸè®¨è®ºåè¾¾æˆçš„ä¸€è‡´ç»“è®ºï¼Œæ˜¯æˆ‘ä»¬ç›®å‰èƒ½è·å¾—çš„æœ€ä½³è§£å†³æ–¹æ¡ˆã€‚</p><p>å¥½ï¼Œäº†è§£äº†è¿™ä¸‰ä¸ªæ¦‚å¿µä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥æ¥çœ‹çœ‹å¦‚ä½•ä¸ºå®ƒä»¬ç¼–å†™YAMLæè¿°æ–‡ä»¶äº†ã€‚</p><p>å’Œä¹‹å‰å­¦ä¹ Deploymentã€Serviceå¯¹è±¡ä¸€æ ·ï¼Œé¦–å…ˆåº”å½“ç”¨å‘½ä»¤ <code>kubectl api-resources</code> æŸ¥çœ‹å®ƒä»¬çš„åŸºæœ¬ä¿¡æ¯ï¼Œè¾“å‡ºåˆ—åœ¨è¿™é‡Œäº†ï¼š</p><pre><code class=\"language-plain\">kubectl api-resources\n\nNAME&nbsp; &nbsp; &nbsp; \t\tSHORTNAMES&nbsp; &nbsp;APIVERSION&nbsp; &nbsp; &nbsp; &nbsp;\t\tNAMESPACED&nbsp; &nbsp;KIND\ningresses&nbsp; &nbsp; &nbsp; &nbsp;ing&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; networking.k8s.io/v1&nbsp; &nbsp;true&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Ingress\ningressclasses&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;networking.k8s.io/v1&nbsp; &nbsp;false&nbsp; &nbsp; &nbsp; &nbsp; IngressClass\n</code></pre><p>ä½ å¯ä»¥çœ‹åˆ°ï¼ŒIngresså’ŒIngress Classçš„apiVersionéƒ½æ˜¯â€œ<strong>networking.k8s.io/v1</strong>â€ï¼Œè€Œä¸”Ingressæœ‰ä¸€ä¸ªç®€å†™â€œ<strong>ing</strong>â€ï¼Œä½†Ingress Controlleræ€ä¹ˆæ‰¾ä¸åˆ°å‘¢ï¼Ÿ</p><p>è¿™æ˜¯å› ä¸ºIngress Controllerå’Œå…¶ä»–ä¸¤ä¸ªå¯¹è±¡ä¸å¤ªä¸€æ ·ï¼Œå®ƒä¸åªæ˜¯æè¿°æ–‡ä»¶ï¼Œæ˜¯ä¸€ä¸ªè¦å®é™…å¹²æ´»ã€å¤„ç†æµé‡çš„åº”ç”¨ç¨‹åºï¼Œè€Œåº”ç”¨ç¨‹åºåœ¨Kubernetesé‡Œæ—©å°±æœ‰å¯¹è±¡æ¥ç®¡ç†äº†ï¼Œé‚£å°±æ˜¯Deploymentå’ŒDaemonSetï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦å†å­¦ä¹ Ingresså’ŒIngress Classçš„çš„ç”¨æ³•å°±å¯ä»¥äº†ã€‚</p><p>å…ˆçœ‹Ingressã€‚</p><p>Ingressä¹Ÿæ˜¯å¯ä»¥ä½¿ç”¨ <code>kubectl create</code> æ¥åˆ›å»ºæ ·æ¿æ–‡ä»¶çš„ï¼Œå’ŒServiceç±»ä¼¼ï¼Œå®ƒä¹Ÿéœ€è¦ç”¨ä¸¤ä¸ªé™„åŠ å‚æ•°ï¼š</p><ul>\n<li><code>--class</code>ï¼ŒæŒ‡å®šIngressä»å±çš„Ingress Classå¯¹è±¡ã€‚</li>\n<li><code>--rule</code>ï¼ŒæŒ‡å®šè·¯ç”±è§„åˆ™ï¼ŒåŸºæœ¬å½¢å¼æ˜¯â€œURI=Serviceâ€ï¼Œä¹Ÿå°±æ˜¯è¯´æ˜¯è®¿é—®HTTPè·¯å¾„å°±è½¬å‘åˆ°å¯¹åº”çš„Serviceå¯¹è±¡ï¼Œå†ç”±Serviceå¯¹è±¡è½¬å‘ç»™åç«¯çš„Podã€‚</li>\n</ul><p>å¥½ï¼Œç°åœ¨æˆ‘ä»¬å°±æ‰§è¡Œå‘½ä»¤ï¼Œçœ‹çœ‹Ingressåˆ°åº•é•¿ä»€ä¹ˆæ ·ï¼š</p><pre><code class=\"language-plain\">export out=\"--dry-run=client -o yaml\"\nkubectl create ing ngx-ing --rule=\"ngx.test/=ngx-svc:80\" --class=ngx-ink $out\n</code></pre><pre><code class=\"language-yaml\">apiVersion: networking.k8s.io/v1\nkind: Ingress\nmetadata:\n&nbsp; name: ngx-ing\n&nbsp;&nbsp;\nspec:\n\n&nbsp; ingressClassName: ngx-ink\n&nbsp;&nbsp;\n&nbsp; rules:\n&nbsp; - host: ngx.test\n&nbsp; &nbsp; http:\n&nbsp; &nbsp; &nbsp; paths:\n      - path: /\n        pathType: Exact\n&nbsp; &nbsp; &nbsp;   backend:\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; service:\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; name: ngx-svc\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; port:\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; number: 80\n</code></pre><p>åœ¨è¿™ä»½Ingressçš„YAMLé‡Œï¼Œæœ‰ä¸¤ä¸ªå…³é”®å­—æ®µï¼šâ€œ<strong>ingressClassName</strong>â€å’Œâ€œ<strong>rules</strong>â€ï¼Œåˆ†åˆ«å¯¹åº”äº†å‘½ä»¤è¡Œå‚æ•°ï¼Œå«ä¹‰è¿˜æ˜¯æ¯”è¾ƒå¥½ç†è§£çš„ã€‚</p><p>åªæ˜¯â€œrulesâ€çš„æ ¼å¼æ¯”è¾ƒå¤æ‚ï¼ŒåµŒå¥—å±‚æ¬¡å¾ˆæ·±ã€‚ä¸è¿‡ä»”ç»†ç‚¹çœ‹å°±ä¼šå‘ç°å®ƒæ˜¯æŠŠè·¯ç”±è§„åˆ™æ‹†æ•£äº†ï¼Œæœ‰hostå’Œhttp pathï¼Œåœ¨pathé‡ŒåˆæŒ‡å®šäº†è·¯å¾„çš„åŒ¹é…æ–¹å¼ï¼Œå¯ä»¥æ˜¯ç²¾ç¡®åŒ¹é…ï¼ˆExactï¼‰æˆ–è€…æ˜¯å‰ç¼€åŒ¹é…ï¼ˆPrefixï¼‰ï¼Œå†ç”¨backendæ¥æŒ‡å®šè½¬å‘çš„ç›®æ ‡Serviceå¯¹è±¡ã€‚</p><p>ä¸è¿‡æˆ‘ä¸ªäººè§‰å¾—ï¼ŒIngress YAMLé‡Œçš„æè¿°è¿˜ä¸å¦‚ <code>kubectl create</code> å‘½ä»¤è¡Œé‡Œçš„ <code>--rule</code> å‚æ•°æ¥å¾—ç›´è§‚æ˜“æ‡‚ï¼Œè€Œä¸”YAMLé‡Œçš„å­—æ®µå¤ªå¤šä¹Ÿå¾ˆå®¹æ˜“å¼„é”™ï¼Œå»ºè®®ä½ è¿˜æ˜¯è®©kubectlæ¥è‡ªåŠ¨ç”Ÿæˆè§„åˆ™ï¼Œç„¶åå†ç•¥ä½œä¿®æ”¹æ¯”è¾ƒå¥½ã€‚</p><p>æœ‰äº†Ingresså¯¹è±¡ï¼Œé‚£ä¹ˆä¸å®ƒå…³è”çš„Ingress Classæ˜¯ä»€ä¹ˆæ ·çš„å‘¢ï¼Ÿ</p><p>å…¶å®Ingress Classæœ¬èº«å¹¶æ²¡æœ‰ä»€ä¹ˆå®é™…çš„åŠŸèƒ½ï¼Œåªæ˜¯èµ·åˆ°è”ç³»Ingresså’ŒIngress Controllerçš„ä½œç”¨ï¼Œæ‰€ä»¥å®ƒçš„å®šä¹‰éå¸¸ç®€å•ï¼Œåœ¨â€œ<strong>spec</strong>â€é‡Œåªæœ‰ä¸€ä¸ªå¿…éœ€çš„å­—æ®µâ€œ<strong>controller</strong>â€ï¼Œè¡¨ç¤ºè¦ä½¿ç”¨å“ªä¸ªIngress Controllerï¼Œå…·ä½“çš„åå­—å°±è¦çœ‹å®ç°æ–‡æ¡£äº†ã€‚</p><p>æ¯”å¦‚ï¼Œå¦‚æœæˆ‘è¦ç”¨Nginxå¼€å‘çš„Ingress Controllerï¼Œé‚£ä¹ˆå°±è¦ç”¨åå­—â€œ<strong>nginx.org/ingress-controller</strong>â€ï¼š</p><pre><code class=\"language-yaml\">apiVersion: networking.k8s.io/v1\nkind: IngressClass\nmetadata:\n&nbsp; name: ngx-ink\n\nspec:\n&nbsp; controller: nginx.org/ingress-controller\n</code></pre><p>Ingresså’ŒServiceã€Ingress Classçš„å…³ç³»æˆ‘ä¹Ÿç”»æˆäº†ä¸€å¼ å›¾ï¼Œæ–¹ä¾¿ä½ å‚è€ƒï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/6b/af/6bd934a9c8c81a9f194d2d90ede172af.jpg?wh=1920x1005\" alt=\"å›¾ç‰‡\"></p><h2>å¦‚ä½•åœ¨Kubernetesé‡Œä½¿ç”¨Ingress/Ingress Class</h2><p>å› ä¸ºIngress Classå¾ˆå°ï¼Œæ‰€ä»¥æˆ‘æŠŠå®ƒä¸Ingressåˆæˆäº†ä¸€ä¸ªYAMLæ–‡ä»¶ï¼Œè®©æˆ‘ä»¬ç”¨ <code>kubectl apply</code> åˆ›å»ºè¿™ä¸¤ä¸ªå¯¹è±¡ï¼š</p><pre><code class=\"language-plain\">kubectl apply -f ingress.yml\n</code></pre><p>ç„¶åæˆ‘ä»¬ç”¨ <code>kubectl get</code> æ¥æŸ¥çœ‹å¯¹è±¡çš„çŠ¶æ€ï¼š</p><pre><code class=\"language-plain\">kubectl get ingressclass\nkubectl get ing\n</code></pre><p><img src=\"https://static001.geekbang.org/resource/image/f9/b9/f9396112f84076528d9072e358d1ebb9.png?wh=1510x366\" alt=\"å›¾ç‰‡\"></p><p>å‘½ä»¤ <code>kubectl describe</code> å¯ä»¥çœ‹åˆ°æ›´è¯¦ç»†çš„Ingressä¿¡æ¯ï¼š</p><pre><code class=\"language-plain\">kubectl describe ing ngx-ing\n</code></pre><p><img src=\"https://static001.geekbang.org/resource/image/b7/13/b708b7d41ef44844af7bf02cbb334313.png?wh=1576x664\" alt=\"å›¾ç‰‡\"></p><p>å¯ä»¥çœ‹åˆ°ï¼ŒIngresså¯¹è±¡çš„è·¯ç”±è§„åˆ™Host/Pathå°±æ˜¯åœ¨YAMLé‡Œè®¾ç½®çš„åŸŸåâ€œngx.test/â€ï¼Œè€Œä¸”å·²ç»å…³è”äº†ç¬¬20è®²é‡Œåˆ›å»ºçš„Serviceå¯¹è±¡ï¼Œè¿˜æœ‰Serviceåé¢çš„ä¸¤ä¸ªPodã€‚</p><p>å¦å¤–ï¼Œä¸è¦å¯¹Ingressé‡Œâ€œDefault backendâ€çš„é”™è¯¯æç¤ºæ„Ÿåˆ°æƒŠè®¶ï¼Œåœ¨æ‰¾ä¸åˆ°è·¯ç”±çš„æ—¶å€™ï¼Œå®ƒè¢«è®¾è®¡ç”¨æ¥æä¾›ä¸€ä¸ªé»˜è®¤çš„åç«¯æœåŠ¡ï¼Œä½†ä¸è®¾ç½®ä¹Ÿä¸ä¼šæœ‰ä»€ä¹ˆé—®é¢˜ï¼Œæ‰€ä»¥å¤§å¤šæ•°æ—¶å€™æˆ‘ä»¬éƒ½å¿½ç•¥å®ƒã€‚</p><h2>å¦‚ä½•åœ¨Kubernetesé‡Œä½¿ç”¨Ingress Controller</h2><p>å‡†å¤‡å¥½äº†Ingresså’ŒIngress Classï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±éœ€è¦éƒ¨ç½²çœŸæ­£å¤„ç†è·¯ç”±è§„åˆ™çš„Ingress Controllerã€‚</p><p>ä½ å¯ä»¥åœ¨GitHubä¸Šæ‰¾åˆ°Nginx Ingress Controllerçš„é¡¹ç›®ï¼ˆ<a href=\"https://github.com/nginxinc/kubernetes-ingress\">https://github.com/nginxinc/kubernetes-ingress</a>ï¼‰ï¼Œå› ä¸ºå®ƒä»¥Podçš„å½¢å¼è¿è¡Œåœ¨Kubernetesé‡Œï¼Œæ‰€ä»¥åŒæ—¶æ”¯æŒDeploymentå’ŒDaemonSetä¸¤ç§éƒ¨ç½²æ–¹å¼ã€‚è¿™é‡Œæˆ‘é€‰æ‹©çš„æ˜¯Deploymentï¼Œç›¸å…³çš„YAMLä¹Ÿéƒ½åœ¨æˆ‘ä»¬è¯¾ç¨‹çš„é¡¹ç›®ï¼ˆ<a href=\"https://github.com/chronolaw/k8s_study/tree/master/ingress\">https://github.com/chronolaw/k8s_study/tree/master/ingress</a>ï¼‰é‡Œå¤åˆ¶äº†ä¸€ä»½ã€‚</p><p>Nginx Ingress Controllerçš„å®‰è£…ç•¥å¾®éº»çƒ¦ä¸€äº›ï¼Œæœ‰å¾ˆå¤šä¸ªYAMLéœ€è¦æ‰§è¡Œï¼Œä½†å¦‚æœåªæ˜¯åšç®€å•çš„è¯•éªŒï¼Œå°±åªéœ€è¦ç”¨åˆ°4ä¸ªYAMLï¼š</p><pre><code class=\"language-plain\">kubectl apply -f common/ns-and-sa.yaml\nkubectl apply -f rbac/rbac.yaml\nkubectl apply -f common/nginx-config.yaml\nkubectl apply -f common/default-server-secret.yaml\n</code></pre><p>å‰ä¸¤æ¡å‘½ä»¤ä¸ºIngress Controlleråˆ›å»ºäº†ä¸€ä¸ªç‹¬ç«‹çš„åå­—ç©ºé—´â€œnginx-ingressâ€ï¼Œè¿˜æœ‰ç›¸åº”çš„è´¦å·å’Œæƒé™ï¼Œè¿™æ˜¯ä¸ºäº†è®¿é—®apiserverè·å–Serviceã€Endpointä¿¡æ¯ç”¨çš„ï¼›åä¸¤æ¡åˆ™æ˜¯åˆ›å»ºäº†ä¸€ä¸ªConfigMapå’ŒSecretï¼Œç”¨æ¥é…ç½®HTTP/HTTPSæœåŠ¡ã€‚</p><p>éƒ¨ç½²Ingress Controllerä¸éœ€è¦æˆ‘ä»¬è‡ªå·±ä»å¤´ç¼–å†™Deploymentï¼ŒNginxå·²ç»ä¸ºæˆ‘ä»¬æä¾›äº†ç¤ºä¾‹YAMLï¼Œä½†åˆ›å»ºä¹‹å‰ä¸ºäº†é€‚é…æˆ‘ä»¬è‡ªå·±çš„åº”ç”¨è¿˜å¿…é¡»è¦åšå‡ å¤„å°æ”¹åŠ¨ï¼š</p><ul>\n<li>metadataé‡Œçš„nameè¦æ”¹æˆè‡ªå·±çš„åå­—ï¼Œæ¯”å¦‚ <code>ngx-kic-dep</code>ã€‚</li>\n<li>spec.selectorå’Œtemplate.metadata.labelsä¹Ÿè¦ä¿®æ”¹æˆè‡ªå·±çš„åå­—ï¼Œæ¯”å¦‚è¿˜æ˜¯ç”¨ <code>ngx-kic-dep</code>ã€‚</li>\n<li>containers.imageå¯ä»¥æ”¹ç”¨aplineç‰ˆæœ¬ï¼ŒåŠ å¿«ä¸‹è½½é€Ÿåº¦ï¼Œæ¯”å¦‚ <code>nginx/nginx-ingress:2.2-alpine</code>ã€‚</li>\n<li>æœ€ä¸‹é¢çš„argsè¦åŠ ä¸Š <code>-ingress-class=ngx-ink</code>ï¼Œä¹Ÿå°±æ˜¯å‰é¢åˆ›å»ºçš„Ingress Classçš„åå­—ï¼Œè¿™æ˜¯è®©Ingress Controllerç®¡ç†Ingressçš„å…³é”®ã€‚</li>\n</ul><p>ä¿®æ”¹å®Œä¹‹åï¼ŒIngress Controllerçš„YAMLå¤§æ¦‚æ˜¯è¿™ä¸ªæ ·å­ï¼š</p><pre><code class=\"language-yaml\">apiVersion: apps/v1\nkind: Deployment\nmetadata:\n&nbsp; name: ngx-kic-dep\n&nbsp; namespace: nginx-ingress\n\nspec:\n&nbsp; replicas: 1\n&nbsp; selector:\n&nbsp; &nbsp; matchLabels:\n&nbsp; &nbsp; &nbsp; app: ngx-kic-dep\n\n&nbsp; template:\n&nbsp; &nbsp; metadata:\n&nbsp; &nbsp; &nbsp; labels:\n&nbsp; &nbsp; &nbsp; &nbsp; app: ngx-kic-dep\n    ...\n&nbsp; &nbsp; spec:\n&nbsp; &nbsp; &nbsp; containers:\n&nbsp; &nbsp; &nbsp; - image: nginx/nginx-ingress:2.2-alpine\n        ...\n&nbsp; &nbsp; &nbsp; &nbsp; args:\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; - -ingress-class=ngx-ink\n</code></pre><p>æœ‰äº†Ingress Controllerï¼Œè¿™äº›APIå¯¹è±¡çš„å…³è”å°±æ›´å¤æ‚äº†ï¼Œä½ å¯ä»¥ç”¨ä¸‹é¢çš„è¿™å¼ å›¾æ¥çœ‹å‡ºå®ƒä»¬æ˜¯å¦‚ä½•ä½¿ç”¨å¯¹è±¡åå­—è”ç³»èµ·æ¥çš„ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/bb/14/bb7a911e10c103fb839e01438e184914.jpg?wh=1920x736\" alt=\"å›¾ç‰‡\"></p><p>ç¡®è®¤Ingress Controller çš„YAMLä¿®æ”¹å®Œæ¯•ä¹‹åï¼Œå°±å¯ä»¥ç”¨ <code>kubectl apply</code> åˆ›å»ºå¯¹è±¡ï¼š</p><pre><code class=\"language-plain\">kubectl apply -f kic.yml\n</code></pre><p>æ³¨æ„Ingress Controllerä½äºåå­—ç©ºé—´â€œ<strong>nginx-ingress</strong>â€ï¼Œæ‰€ä»¥æŸ¥çœ‹çŠ¶æ€éœ€è¦ç”¨â€œ<strong>-n</strong>â€å‚æ•°æ˜¾å¼æŒ‡å®šï¼Œå¦åˆ™æˆ‘ä»¬åªèƒ½çœ‹åˆ°â€œdefaultâ€åå­—ç©ºé—´é‡Œçš„Podï¼š</p><pre><code class=\"language-plain\">kubectl get deploy -n nginx-ingress\nkubectl get pod -n nginx-ingress\n</code></pre><p><img src=\"https://static001.geekbang.org/resource/image/63/a6/6389033863c8f809b4c0048be44903a6.png?wh=1476x364\" alt=\"å›¾ç‰‡\"></p><p>ç°åœ¨Ingress Controllerå°±ç®—æ˜¯è¿è¡Œèµ·æ¥äº†ã€‚</p><p>ä¸è¿‡è¿˜æœ‰æœ€åä¸€é“å·¥åºï¼Œå› ä¸ºIngress Controlleræœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªPodï¼Œæƒ³è¦å‘å¤–æä¾›æœåŠ¡è¿˜æ˜¯è¦ä¾èµ–äºServiceå¯¹è±¡ã€‚æ‰€ä»¥ä½ è‡³å°‘è¿˜è¦å†ä¸ºå®ƒå®šä¹‰ä¸€ä¸ªServiceï¼Œä½¿ç”¨NodePortæˆ–è€…LoadBalanceræš´éœ²ç«¯å£ï¼Œæ‰èƒ½çœŸæ­£æŠŠé›†ç¾¤çš„å†…å¤–æµé‡æ‰“é€šã€‚è¿™ä¸ªå·¥ä½œå°±äº¤ç»™ä½ è¯¾ä¸‹è‡ªå·±å»å®Œæˆäº†ã€‚</p><p>è¿™é‡Œï¼Œæˆ‘å°±ç”¨<a href=\"https://time.geekbang.org/column/article/534644\">ç¬¬15è®²</a>é‡Œæåˆ°çš„<strong>å‘½ä»¤</strong><code>kubectl port-forward</code><strong>ï¼Œå®ƒå¯ä»¥ç›´æ¥æŠŠæœ¬åœ°çš„ç«¯å£æ˜ å°„åˆ°Kubernetesé›†ç¾¤çš„æŸä¸ªPodé‡Œ</strong>ï¼Œåœ¨æµ‹è¯•éªŒè¯çš„æ—¶å€™éå¸¸æ–¹ä¾¿ã€‚</p><p>ä¸‹é¢è¿™æ¡å‘½ä»¤å°±æŠŠæœ¬åœ°çš„8080ç«¯å£æ˜ å°„åˆ°äº†Ingress Controller Podçš„80ç«¯å£ï¼š</p><pre><code class=\"language-plain\">kubectl port-forward -n nginx-ingress ngx-kic-dep-8859b7b86-cplgp 8080:80 &amp;\n</code></pre><p><img src=\"https://static001.geekbang.org/resource/image/1f/67/1f9cyy6e78d19e23db9594a272fa4267.png?wh=1920x349\" alt=\"å›¾ç‰‡\"></p><p>æˆ‘ä»¬åœ¨curlå‘æµ‹è¯•è¯·æ±‚çš„æ—¶å€™éœ€è¦æ³¨æ„ï¼Œå› ä¸ºIngressçš„è·¯ç”±è§„åˆ™æ˜¯HTTPåè®®ï¼Œæ‰€ä»¥å°±ä¸èƒ½ç”¨IPåœ°å€çš„æ–¹å¼è®¿é—®ï¼Œå¿…é¡»è¦ç”¨åŸŸåã€URIã€‚</p><p>ä½ å¯ä»¥ä¿®æ”¹ <code>/etc/hosts</code> æ¥æ‰‹å·¥æ·»åŠ åŸŸåè§£æï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ <code>--resolve</code> å‚æ•°ï¼ŒæŒ‡å®šåŸŸåçš„è§£æè§„åˆ™ï¼Œæ¯”å¦‚åœ¨è¿™é‡Œæˆ‘å°±æŠŠâ€œngx.testâ€å¼ºåˆ¶è§£æåˆ°â€œ127.0.0.1â€ï¼Œä¹Ÿå°±æ˜¯è¢« <code>kubectl port-forward</code> è½¬å‘çš„æœ¬åœ°åœ°å€ï¼š</p><pre><code class=\"language-plain\">curl --resolve ngx.test:8080:127.0.0.1 http://ngx.test:8080\n</code></pre><p><img src=\"https://static001.geekbang.org/resource/image/24/ec/2410bb40faa73be25e8d9b3c46c6deec.png?wh=1920x767\" alt=\"å›¾ç‰‡\"></p><p>æŠŠè¿™ä¸ªè®¿é—®ç»“æœå’Œä¸Šä¸€èŠ‚è¯¾é‡Œçš„Serviceå¯¹æ¯”ä¸€ä¸‹ï¼Œä½ ä¼šå‘ç°æœ€ç»ˆæ•ˆæœæ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯æŠŠè¯·æ±‚è½¬å‘åˆ°äº†é›†ç¾¤å†…éƒ¨çš„Podï¼Œä½†Ingressçš„è·¯ç”±è§„åˆ™ä¸å†æ˜¯IPåœ°å€ï¼Œè€Œæ˜¯HTTPåè®®é‡Œçš„åŸŸåã€URIç­‰è¦ç´ ã€‚</p><h2>å°ç»“</h2><p>å¥½äº†ï¼Œä»Šå¤©å°±è®²åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å­¦ä¹ äº†Kubernetesé‡Œä¸ƒå±‚çš„åå‘ä»£ç†å’Œè´Ÿè½½å‡è¡¡å¯¹è±¡ï¼ŒåŒ…æ‹¬Ingressã€Ingress Controllerã€Ingress Classï¼Œå®ƒä»¬è”åˆèµ·æ¥ç®¡ç†äº†é›†ç¾¤çš„è¿›å‡ºæµé‡ï¼Œæ˜¯é›†ç¾¤å…¥å£çš„æ€»ç®¡ã€‚</p><p>å°ç»“ä¸€ä¸‹ä»Šå¤©çš„ä¸»è¦å†…å®¹ï¼š</p><ol>\n<li>Serviceæ˜¯å››å±‚è´Ÿè½½å‡è¡¡ï¼Œèƒ½åŠ›æœ‰é™ï¼Œæ‰€ä»¥å°±å‡ºç°äº†Ingressï¼Œå®ƒåŸºäºHTTP/HTTPSåè®®å®šä¹‰è·¯ç”±è§„åˆ™ã€‚</li>\n<li>Ingressåªæ˜¯è§„åˆ™çš„é›†åˆï¼Œè‡ªèº«ä¸å…·å¤‡æµé‡ç®¡ç†èƒ½åŠ›ï¼Œéœ€è¦Ingress Controlleråº”ç”¨Ingressè§„åˆ™æ‰èƒ½çœŸæ­£å‘æŒ¥ä½œç”¨ã€‚</li>\n<li>Ingress Classè§£è€¦äº†Ingresså’ŒIngress Controllerï¼Œæˆ‘ä»¬åº”å½“ä½¿ç”¨Ingress Classæ¥ç®¡ç†Ingressèµ„æºã€‚</li>\n<li>æœ€æµè¡Œçš„Ingress Controlleræ˜¯Nginx Ingress Controllerï¼Œå®ƒåŸºäºç»å…¸åå‘ä»£ç†è½¯ä»¶Nginxã€‚</li>\n</ol><p>å†è¡¥å……ä¸€ç‚¹ï¼Œç›®å‰çš„Kubernetesæµé‡ç®¡ç†åŠŸèƒ½ä¸»è¦é›†ä¸­åœ¨Ingress Controllerä¸Šï¼Œå·²ç»è¿œä¸æ­¢äºç®¡ç†â€œå…¥å£æµé‡â€äº†ï¼Œå®ƒè¿˜èƒ½ç®¡ç†â€œå‡ºå£æµé‡â€ï¼Œä¹Ÿå°±æ˜¯ <code>egress</code>ï¼Œç”šè‡³è¿˜å¯ä»¥ç®¡ç†é›†ç¾¤å†…éƒ¨æœåŠ¡ä¹‹é—´çš„â€œä¸œè¥¿å‘æµé‡â€ã€‚</p><p>æ­¤å¤–ï¼ŒIngress Controlleré€šå¸¸è¿˜æœ‰å¾ˆå¤šçš„å…¶ä»–åŠŸèƒ½ï¼Œæ¯”å¦‚TLSç»ˆæ­¢ã€ç½‘ç»œåº”ç”¨é˜²ç«å¢™ã€é™æµé™é€Ÿã€æµé‡æ‹†åˆ†ã€èº«ä»½è®¤è¯ã€è®¿é—®æ§åˆ¶ç­‰ç­‰ï¼Œå®Œå…¨å¯ä»¥è®¤ä¸ºå®ƒæ˜¯ä¸€ä¸ªå…¨åŠŸèƒ½çš„åå‘ä»£ç†æˆ–è€…ç½‘å…³ï¼Œæ„Ÿå…´è¶£çš„è¯ä½ å¯ä»¥æ‰¾æ‰¾è¿™æ–¹é¢çš„èµ„æ–™ã€‚</p><h2>è¯¾ä¸‹ä½œä¸š</h2><p>æœ€åæ˜¯è¯¾ä¸‹ä½œä¸šæ—¶é—´ï¼Œç»™ä½ ç•™ä¸¤ä¸ªæ€è€ƒé¢˜ï¼š</p><ol>\n<li>å››å±‚è´Ÿè½½å‡è¡¡ï¼ˆServiceï¼‰ä¸ä¸ƒå±‚è´Ÿè½½å‡è¡¡ï¼ˆIngressï¼‰æœ‰å“ªäº›å¼‚åŒç‚¹ï¼Ÿ</li>\n<li>ä½ è®¤ä¸ºIngress Controllerä½œä¸ºé›†ç¾¤çš„æµé‡å…¥å£è¿˜åº”è¯¥åšå“ªäº›äº‹æƒ…ï¼Ÿ</li>\n</ol><p>æ¬¢è¿ç•™è¨€å†™ä¸‹ä½ çš„æƒ³æ³•ï¼Œæ€è€ƒé¢˜é—­ç¯æ˜¯ä½ å·©å›ºæ‰€å­¦çš„ç¬¬ä¸€æ­¥ï¼Œè¿›æ­¥ä»å®Œæˆå¼€å§‹ã€‚</p><p>ä¸‹èŠ‚è¯¾æ˜¯æˆ‘ä»¬è¿™ä¸ªç« èŠ‚çš„å®æˆ˜æ¼”ç»ƒè¯¾ï¼Œæˆ‘ä»¬ä¸‹èŠ‚è¯¾å†è§ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/6a/08/6a373b5b5e8c0869f6b77bc8d5b35708.jpg?wh=1920x2856\" alt=\"\"></p>","comments":[{"had_liked":false,"id":353918,"user_name":"Jasper","can_delete":false,"product_type":"c1","uid":1316025,"ip_address":"åŒ—äº¬","ucode":"06640157207187","user_header":"https://static001.geekbang.org/account/avatar/00/14/14/b9/47377590.jpg","comment_is_top":false,"comment_ctime":1659926461,"is_pvip":false,"replies":[{"id":128710,"content":"good","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1659929530,"ip_address":"åŒ—äº¬","comment_id":353918,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100114501,"comment_content":"å››å±‚æ¶æ„ç®€å•ï¼Œæ— éœ€è§£ææ¶ˆæ¯å†…å®¹ï¼Œåœ¨ç½‘ç»œååé‡åŠå¤„ç†æ€§èƒ½ä¸Šé«˜äºä¸ƒå±‚ã€‚\nè€Œä¸ƒå±‚è´Ÿè½½ä¼˜åŠ¿åœ¨äºåŠŸèƒ½å¤šï¼Œæ§åˆ¶çµæ´»å¼ºå¤§ã€‚","like_count":29,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583142,"discussion_content":"good","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659929530,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":360289,"user_name":"Xu.","can_delete":false,"product_type":"c1","uid":1817449,"ip_address":"ä¸Šæµ·","ucode":"7163195EA638FA","user_header":"https://static001.geekbang.org/account/avatar/00/1b/bb/69/a8bb7a4a.jpg","comment_is_top":false,"comment_ctime":1666406392,"is_pvip":false,"replies":[{"id":131100,"content":"good solutionï¼ ","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1666583327,"ip_address":"ä¸Šæµ·","comment_id":360289,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100114501,"comment_content":"è€å¸ˆï¼Œæˆ‘åœ¨å®‰è£…æ–‡æ¡£é‡Œæ‰¾åˆ°äº†å¤§å¤šæ•°åŒå­¦é‡åˆ°çš„é—®é¢˜çš„è§£å†³æ–¹æ³•ï¼š\nhttps:&#47;&#47;docs.nginx.com&#47;nginx-ingress-controller&#47;installation&#47;installation-with-manifests&#47;\nCreate Custom Resources è¿™ä¸€èŠ‚\n\næ³¨æ„ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œéœ€è¦ä¸º VirtualServer, VirtualServerRoute, TransportServer and Policy åˆ›å»ºè‡ªå®šä¹‰èµ„æºçš„å®šä¹‰ã€‚å¦åˆ™ï¼ŒIngress Controller Pod å°†ä¸ä¼šå˜ä¸º Ready çŠ¶æ€ã€‚å¦‚æœè¦ç¦ç”¨è¯¥è¦æ±‚ï¼Œè¯·å°† -enable-custom-resources å‘½ä»¤è¡Œå‚æ•°é…ç½®ä¸º Readyfalse å¹¶è·³è¿‡æ­¤éƒ¨åˆ†ã€‚\n\nä¹Ÿå°±æ˜¯è¯´å¯ä»¥ kubectl apply -f ä¸‹é¢å‡ ä¸ªæ–‡ä»¶ï¼š\n\n$ kubectl apply -f common&#47;crds&#47;k8s.nginx.org_virtualservers.yaml\n$ kubectl apply -f common&#47;crds&#47;k8s.nginx.org_virtualserverroutes.yaml\n$ kubectl apply -f common&#47;crds&#47;k8s.nginx.org_transportservers.yaml\n$ kubectl apply -f common&#47;crds&#47;k8s.nginx.org_policies.yaml\n\nç„¶åå°±å¯åŠ¨æˆåŠŸäº†ã€‚\n\nä¹Ÿå¯ä»¥å°† -enable-custom-resources å‘½ä»¤è¡Œå‚æ•°é…ç½®ä¸º Readyfalse ","like_count":17,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":591398,"discussion_content":"good solutionï¼ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1666583327,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1958092,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/e0/cc/a8c26fb2.jpg","nickname":"okkkkk","note":"","ucode":"FEA6F454376F6D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":634775,"discussion_content":"å¤šè°¢å¤šè°¢ï¼ŒPodå¯åŠ¨ä¸äº†ï¼Œçœ‹logæ˜¯è¿™æ ·E1230 09:44:20.513304       1 reflector.go:138] pkg/mod/k8s.io/client-go@v0.22.2/tools/cache/reflector.go:167: Failed to watch *v1alpha1.TransportServer: failed to list *v1alpha1.TransportServer: the server could not find the requested resource (get transportservers.k8s.nginx.org)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1703929713,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æ±Ÿè‹","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2409553,"avatar":"https://static001.geekbang.org/account/avatar/00/24/c4/51/5bca1604.jpg","nickname":"aLong","note":"","ucode":"11DB1B9C579811","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":599433,"discussion_content":"æ„Ÿè°¢ï¼Œä½ è¿™è®©æˆ‘çŸ¥é“é—®é¢˜å‡ºå“ªäº†ã€‚æˆ‘çœ‹ä¸‹é¢è®©æ‰§è¡Œcrdsä¸‹å†…å®¹å°±applyäº†ã€‚è¿˜ä»¥ä¸ºè¯¾ç¨‹æ¼äº†ã€‚ çŸ¥é“å…·ä½“é—®é¢˜äº†ï¼ŒğŸ‘ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1673517480,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":353990,"user_name":"æ–°æ—¶ä»£å†œæ°‘å·¥","can_delete":false,"product_type":"c1","uid":1225689,"ip_address":"ä¸Šæµ·","ucode":"0AA60DEDF6C062","user_header":"https://static001.geekbang.org/account/avatar/00/12/b3/d9/cf061262.jpg","comment_is_top":false,"comment_ctime":1659974507,"is_pvip":false,"replies":[{"id":128749,"content":"good","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1660011251,"ip_address":"ä¸Šæµ·","comment_id":353990,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100114501,"comment_content":"æ–‡æœ«çš„kic.ymlæ˜¯æ¥è‡ª https:&#47;&#47;github.com&#47;nginxinc&#47;kubernetes-ingress&#47;blob&#47;main&#47;deployments&#47;deployment&#47;nginx-ingress.yaml","like_count":12,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583271,"discussion_content":"good","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660011251,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":358914,"user_name":"å°æ±Ÿçˆ±å­¦æœ¯","can_delete":false,"product_type":"c1","uid":2628601,"ip_address":"åŒ—äº¬","ucode":"554F40C6627AF4","user_header":"https://static001.geekbang.org/account/avatar/00/28/1b/f9/018197f1.jpg","comment_is_top":false,"comment_ctime":1665022061,"is_pvip":false,"replies":[{"id":130540,"content":"IngressåŸºäºhttpåè®®ï¼Œæœ‰æ›´ä¸°å¯Œçš„è·¯ç”±è§„åˆ™ï¼Œèƒ½å¤Ÿæ›´ç²¾ç»†åœ°ç®¡ç†æµé‡ã€‚è€Œä¸”æœ‰äº†Ingressï¼Œåªéœ€è¦å¯¹å¤–æš´éœ²ä¸€ä¸ªServiceå¯¹è±¡å°±å¯ä»¥äº†ï¼Œä¹Ÿæ›´åŠ å®‰å…¨ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1665059586,"ip_address":"åŒ—äº¬","comment_id":358914,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100114501,"comment_content":"ä¸€ä¸ªå°é—®é¢˜è€å¸ˆï¼ŒserviceåŸºäºå››å±‚è½¬å‘ï¼Œä¼šæš´éœ²ipã€‚åŸºäºè¿™äº›ç¼ºç‚¹æˆ‘ä»¬å¼•å…¥äº†ingressï¼ŒåŸºäºä¸ƒå±‚ç½‘ç»œåè®®è½¬å‘ï¼Œä½†æ˜¯ä¸ºäº†å¤–éƒ¨æœåŠ¡è®¿é—®ï¼Œéœ€è¦åœ¨ingresså‰å†æš´éœ²ä¸€ä¸ªnodeportç±»å‹çš„serviceï¼Œé‚£æˆ‘ä»¬è¿™ä¹ˆåšçš„æ„ä¹‰åœ¨å“ªé‡Œæï¼Œæœ€å¤–å±‚çš„å…¥å£å¤„ä¸è¿˜æ˜¯serviceå—ã€‚","like_count":9,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":589519,"discussion_content":"IngressåŸºäºhttpåè®®ï¼Œæœ‰æ›´ä¸°å¯Œçš„è·¯ç”±è§„åˆ™ï¼Œèƒ½å¤Ÿæ›´ç²¾ç»†åœ°ç®¡ç†æµé‡ã€‚è€Œä¸”æœ‰äº†Ingressï¼Œåªéœ€è¦å¯¹å¤–æš´éœ²ä¸€ä¸ªServiceå¯¹è±¡å°±å¯ä»¥äº†ï¼Œä¹Ÿæ›´åŠ å®‰å…¨ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1665059586,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1071974,"avatar":"https://static001.geekbang.org/account/avatar/00/10/5b/66/ad35bc68.jpg","nickname":"å…š","note":"","ucode":"EE531DB3EA124D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":639193,"discussion_content":"ç°åœ¨å„ç§webæ¡†æ¶éƒ½æœ‰è‡ªå·±çš„è·¯ç”± æ™®é€šnginxä¹Ÿèƒ½é…ç½®è·¯ç”±è§„åˆ™ ç›´æ¥æš´æ¼ä¸€ä¸ªå¯¹å¤–serviceåè¾¹æ¥è¿™æ ·çš„podä¸ä¹Ÿä¸€æ ·ä¹ˆ ä¸ºä»€ä¹ˆè¿˜è¦ç»•ç€åœˆå»å®ç°ï¼Ÿå®åœ¨æ²¡æœ‰çœ‹åˆ°è¿™é‡Œè¾¹ä»·å€¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1710370268,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æ²³åŒ—","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1087243,"avatar":"https://static001.geekbang.org/account/avatar/00/10/97/0b/a943bcb3.jpg","nickname":"zhou","note":"","ucode":"E1CE8575B3F106","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":592013,"discussion_content":"å¦‚æœä»¥nodePordçš„æ–¹å¼æš´éœ²Ingressï¼Œæ˜¯å¦çœŸå®æƒ…å†µå‰é¢è¿˜æ˜¯è¦åŠ ä¸€å±‚nginxåšè´Ÿè½½å‡è¡¡ï¼Œä¸ç„¶å•èŠ‚ç‚¹æŒ‚äº†æ€ä¹ˆåŠ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1667029974,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æµ™æ±Ÿ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":355735,"user_name":"stefen","can_delete":false,"product_type":"c1","uid":1202047,"ip_address":"ä¸Šæµ·","ucode":"7C9AAE829E7802","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/oib0a89lqtOhJL1UvfUp4uTsRLrDbhoGk9jLiciazxMu0COibJsFCZDypK1ZFcHEJc9d9qgbjvgR41ImL6FNPoVlWA/132","comment_is_top":false,"comment_ctime":1661701224,"is_pvip":false,"replies":[{"id":129474,"content":"å¯ä»¥çš„ï¼Œåé¢çš„å®æˆ˜å°±æ˜¯è¿™ä¹ˆåšçš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1661743949,"ip_address":"ä¸Šæµ·","comment_id":355735,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100114501,"comment_content":"æœ€åingress-controllerè¿è¡Œèµ·æ¥çš„pod å¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªpodçš„nginxåå‘ä»£ç†çš„VIPï¼Œ ç”±äºpodç½‘ç»œéš”ç¦»çš„åŸå› ï¼Œéœ€è¦è¿˜å¥—å¨ƒä¸€ä¸ªservice, å¯¹å¤–æä¾›ç»Ÿä¸€çš„ç®¡ç†å…¥å£ï¼Œæ˜¯å¦å¯ä»¥æ¢ç§æ€è·¯ï¼Œ åœ¨å¯åŠ¨è¿™ç§ingress-controllerè¿è¡Œèµ·æ¥çš„podçš„ï¼Œè®¾ç½®podçš„ç½‘ç»œä¸ºhostï¼Œå°±æ˜¯å…¬ç”¨å®¿ä¸»æœºç½‘å¡ï¼Œè¿™æ ·å°±ä¸ç”¨å¥—å¨ƒserviceäº†.","like_count":7,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585644,"discussion_content":"å¯ä»¥çš„ï¼Œåé¢çš„å®æˆ˜å°±æ˜¯è¿™ä¹ˆåšçš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661743949,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":354521,"user_name":"Grey","can_delete":false,"product_type":"c1","uid":1663898,"ip_address":"åŒ—äº¬","ucode":"D63D36C9A7F16B","user_header":"https://static001.geekbang.org/account/avatar/00/19/63/9a/6872c932.jpg","comment_is_top":false,"comment_ctime":1660485331,"is_pvip":false,"replies":[{"id":128942,"content":"è„šæœ¬é‡Œç”¨çš„YAML æ¯”è¾ƒå¤šï¼Œè¿˜åˆ›å»ºäº†crdèµ„æºã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ä½œè€…","uid":1181974,"ctime":1660519181,"ip_address":"åŒ—äº¬","comment_id":354521,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100114501,"comment_content":"Nginx Ingress Controller åªç”¨é‚£4ä¸ªä¸è¡Œï¼Œçœ‹äº†23èŠ‚ï¼Œè·Ÿç€è€å¸ˆç”¨bashè„šæœ¬å…¨éƒ¨å¼„è¿›å»äº†æ‰æŠŠkicèµ·äº†èµ·æ¥","like_count":7,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583940,"discussion_content":"è„šæœ¬é‡Œç”¨çš„YAML æ¯”è¾ƒå¤šï¼Œè¿˜åˆ›å»ºäº†crdèµ„æºã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660519181,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":3171798,"avatar":"https://static001.geekbang.org/account/avatar/00/30/65/d6/20670fd5.jpg","nickname":"Obscure","note":"","ucode":"8A7464990F4178","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":586631,"discussion_content":"å®˜ç½‘ä¸Šå¥½åƒæåˆ°äº†ï¼Œé»˜è®¤æ˜¯å¿…é¡»åˆ›å»ºcrdï¼ˆè‡ªå®šä¹‰èµ„æºå®šä¹‰ï¼‰çš„ï¼Œå¦åˆ™podä¸€ç›´ä¸ä¼šREADYã€‚é™¤éåœ¨kic.ymlä¸­ï¼Œå°†-enable-custom-resourceså‘½ä»¤è¡Œå‚æ•°é…ç½®ä¸ºfalseã€‚","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1662384174,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":583940,"ip_address":"æµ™æ±Ÿ","group_id":0},"score":586631,"extra":""}]}]},{"had_liked":false,"id":353927,"user_name":"æä¸€","can_delete":false,"product_type":"c1","uid":1524952,"ip_address":"åŒ—äº¬","ucode":"EEB7C5099C566C","user_header":"https://static001.geekbang.org/account/avatar/00/17/44/d8/708a0932.jpg","comment_is_top":false,"comment_ctime":1659929372,"is_pvip":true,"replies":[{"id":128709,"content":"å››å±‚åè®®å¯ä»¥ç”±Ingress Controllerçš„crdèµ„æºæ¥å®šä¹‰ï¼Œæ¯”å¦‚Nginx Ingress Controllerçš„Transport Serverï¼Œå¯ä»¥å‚è€ƒå®ƒä»¬çš„ç›¸å…³æ–‡æ¡£ï¼Œæ¯”å¦‚ï¼šhttps:&#47;&#47;docs.nginx.com&#47;nginx-ingress-controller&#47;configuration&#47;transportserver-resource&#47;","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1659929521,"ip_address":"åŒ—äº¬","comment_id":353927,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100114501,"comment_content":"è€å¸ˆï¼Œè¯·é—® Ingress å·¥ä½œåœ¨7å±‚åè®®ä¸­ï¼ŒæŒ‡é’ˆå¯¹http(s)åº”ç”¨å±‚åè®®è¿›è¡Œæ§åˆ¶ï¼Œé‚£å¦‚æœ æˆ‘çš„åº”ç”¨æ˜¯éœ€è¦é•¿é“¾æ¥çš„ ä¸å¦‚IMé€šè®¯ç›¸å…³ï¼Œé‚£æ˜¯ä¸æ˜¯Ingresså°±æ— æ³•æ»¡è¶³äº†ï¼Œåªèƒ½é€šè¿‡service å®šä¹‰å—ï¼Ÿ","like_count":5,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583141,"discussion_content":"å››å±‚åè®®å¯ä»¥ç”±Ingress Controllerçš„crdèµ„æºæ¥å®šä¹‰ï¼Œæ¯”å¦‚Nginx Ingress Controllerçš„Transport Serverï¼Œå¯ä»¥å‚è€ƒå®ƒä»¬çš„ç›¸å…³æ–‡æ¡£ï¼Œæ¯”å¦‚ï¼šhttps://docs.nginx.com/nginx-ingress-controller/configuration/transportserver-resource/","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659929521,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":374042,"user_name":"æ‹“å±±","can_delete":false,"product_type":"c1","uid":1545647,"ip_address":"æµ™æ±Ÿ","ucode":"11FE9CF3821898","user_header":"https://static001.geekbang.org/account/avatar/00/17/95/af/b7f8dc43.jpg","comment_is_top":false,"comment_ctime":1683531501,"is_pvip":false,"replies":[{"id":136634,"content":"æ˜¯çš„ï¼Œä¸€å¼€å§‹å¹¶æ²¡æœ‰Ingress classï¼Œåæ¥ä¸ºäº†æ–¹ä¾¿ç®¡ç†Ingress controlleræ‰æå‡ºäº†è¿™ä¸ªæ¦‚å¿µã€‚\n\nå¯ä»¥æŠŠIngress classå’Œstorage classå¯¹æ¯”æ¥ç†è§£ï¼Œå°±æ˜¯ä¸ºäº†é€»è¾‘åˆ†ç»„åˆ†ç±»ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1683533094,"ip_address":"ä¸Šæµ·","comment_id":374042,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100114501,"comment_content":"è¯´ä¸€ä¸‹æˆ‘çš„æ„Ÿå—ï¼ŒæŒ‰ç…§æœ€æ–°çš„ç†è®ºæ¥çœ‹ï¼Œè°ƒç”¨é“¾è·¯é¡ºåºæ˜¯  ingress-control. ---&gt; ingress-class --&gt; ingressã€‚\n\nä½†å®é™…ä¸Šé…ç½®çš„æ—¶å€™ï¼Œå¯ä»¥çœ‹åˆ° ingress-control é…ç½®äº† ingress-classçš„å¼•ç”¨ï¼Œä½†ingress-classé‡Œå´æ²¡æœ‰é…ç½®ingressï¼Œåè€Œæ˜¯ingressåå‘å¼•ç”¨äº†ingress-classï¼Œå³ä¸º  ingress-control. ---&gt; ingress-class &lt;--- ingressã€‚\n\nè¿™ç§æƒ…å†µç¡®å®æ˜¯åç›´è§‰çš„ï¼Œæˆ‘åˆ†æå¯èƒ½æ˜¯  ingress-class æ˜¯åæ¥æå‡ºçš„æ¦‚å¿µï¼Œä¸ºäº†å…¼å®¹ä»¥å‰çš„  ingress-control --&gt; ingress æ¨¡å‹ï¼Œæ‰æäº†ingress-class è¿™ä¸ªç¼åˆæ€ªã€‚","like_count":4,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":617372,"discussion_content":"æ˜¯çš„ï¼Œä¸€å¼€å§‹å¹¶æ²¡æœ‰Ingress classï¼Œåæ¥ä¸ºäº†æ–¹ä¾¿ç®¡ç†Ingress controlleræ‰æå‡ºäº†è¿™ä¸ªæ¦‚å¿µã€‚\n\nå¯ä»¥æŠŠIngress classå’Œstorage classå¯¹æ¯”æ¥ç†è§£ï¼Œå°±æ˜¯ä¸ºäº†é€»è¾‘åˆ†ç»„åˆ†ç±»ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1683533094,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":368175,"user_name":"æå®¢é…±é…±","can_delete":false,"product_type":"c1","uid":2934665,"ip_address":"å››å·","ucode":"18CDC1DB754D58","user_header":"https://static001.geekbang.org/account/avatar/00/2c/c7/89/16437396.jpg","comment_is_top":false,"comment_ctime":1675955639,"is_pvip":false,"replies":[{"id":134053,"content":"great","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1675988074,"ip_address":"ä¸Šæµ·","comment_id":368175,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100114501,"comment_content":"ä¸ºingres-controllerè®¾ç½®Service:\nâœ  ingress kubectl expose deploy nginx-kic-dep -n nginx-ingress --port=80 --target-port=80 $=out&gt;ingress-svc.yml\n\nâœ  ingress cat ingress-svc.yml     \n\napiVersion: v1\nkind: Service\nmetadata:\n  name: nginx-kic-svc\n  namespace: nginx-ingress\nspec:\n  ports:\n  - port: 80\n    protocol: TCP\n    targetPort: 80\n  selector:\n    app: nginx-kic-dep\n  type: NodePort\n\nâœ  ingress kubectl get svc -n nginx-ingress\nNAME            TYPE       CLUSTER-IP       EXTERNAL-IP   PORT(S)        AGE\nnginx-kic-svc   NodePort   10.105.174.176   &lt;none&gt;        80:32519&#47;TCP   3m41s\n\nâœ  ingress kubectl get node -o wide        \nNAME     STATUS   ROLES                  AGE   VERSION   INTERNAL-IP   EXTERNAL-IP   OS-IMAGE           KERNEL-VERSION      CONTAINER-RUNTIME\nubuntu   Ready    control-plane,master   4d    v1.23.3   10.211.55.5   &lt;none&gt;        Ubuntu 22.04 LTS   5.15.0-58-generic   docker:&#47;&#47;20.10.12\nworker   Ready    &lt;none&gt;                 4d    v1.23.3   10.211.55.6   &lt;none&gt;        Ubuntu 22.04 LTS   5.15.0-58-generic   docker:&#47;&#47;20.10.12\n\nâœ  ingress curl --resolve ngx.test:32519:10.211.55.5 http:&#47;&#47;ngx.test:32519\nsrv : 10.10.1.10:80\nhost: ngx-dep-6796688696-867dm\nuri : GET ngx.test &#47;\ndate: 2023-02-09T15:10:48+00:00\n\nâœ  ingress curl --resolve ngx.test:32519:10.211.55.5 http:&#47;&#47;ngx.test:32519\nsrv : 10.10.1.11:80\nhost: ngx-dep-6796688696-psp5v\nuri : GET ngx.test &#47;\ndate: 2023-02-09T15:10:50+00:00","like_count":4,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":603144,"discussion_content":"great","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1675988074,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":3134450,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/sm5IXHKibVUAloJG9EIp7x49f5BttGhsibzgpo1ILyH1VA3cRVib2ewKE7evcZ98cExKLDD4aXNJvqlmVoh5FdYAg/132","nickname":"Geek_c53032","note":"","ucode":"C84C5FCFF78141","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":630557,"discussion_content":"å¯¹è¿™ä¸ªç«¯å£æ˜ å°„å…³ç³»è¿˜æ˜¯æ¯”è¾ƒä¹±","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1698650588,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":354366,"user_name":"YueShi","can_delete":false,"product_type":"c1","uid":1625530,"ip_address":"åŒ—äº¬","ucode":"8F7AFAE4641A7D","user_header":"https://static001.geekbang.org/account/avatar/00/18/cd/ba/3a348f2d.jpg","comment_is_top":false,"comment_ctime":1660300826,"is_pvip":true,"replies":[{"id":128889,"content":"great","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1660307014,"ip_address":"åŒ—äº¬","comment_id":354366,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100114501,"comment_content":"serviceæ–¹å¼å¦‚ä¸‹ï¼š\n\napiVersion: v1\nkind: Service\nmetadata:\n  name: ingress-svc\n  namespace: nginx-ingress\nspec:\n  selector:\n    app: ngx-kic-dep\n  ports:\n  - port: 80\n    targetPort: 80\n  type: NodePort\n\n\nè¯·æ±‚ åé¢çš„ç«¯å£è¦æ ¹æ®kubectl get svc -n nginx-ingress æŸ¥çœ‹\n\ncurl --resolve ngx.test:31967:127.0.0.1 http:&#47;&#47;ngx.test:31967","like_count":4,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583715,"discussion_content":"great","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660307014,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":3566269,"avatar":"","nickname":"Geek_e46db2","note":"","ucode":"3EAE3780D689F1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":610920,"discussion_content":"çœŸå®ä¸šåŠ¡åœºæ™¯ä¸‹ï¼ŒIngress Controller deploymentçš„ replicas å¯ä»¥é…ç½®ä¸ºå¤šä¸ªä¹ˆï¼Ÿå¦‚æœæˆ‘çš„åº”ç”¨æ˜¯è®¡ç®—å¯†é›†å‹çš„è‚¯å®šè¦å¤šé…ç½®å®é™…å·¥ä½œçš„app podæ•°é‡ï¼Œå½“æ—¶æ˜¯ä¸æ˜¯Ingress Controller podä¹Ÿæ˜¯æœ‰ç“¶é¢ˆçš„ï¼Œå¿…è¦æ—¶å€™æ˜¯ä¸æ˜¯ä¹Ÿè¦é…ç½®å¤šä¸ªreplicas\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1679847758,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":583715,"ip_address":"åŒ—äº¬","group_id":0},"score":610920,"extra":""}]},{"author":{"id":1165831,"avatar":"https://static001.geekbang.org/account/avatar/00/11/ca/07/22dd76bf.jpg","nickname":"kobe","note":"","ucode":"AB8B599F3D5521","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":612119,"discussion_content":"curl --resolve ngx.test:31967:127.0.0.1 http://ngx.test:31967\næˆ‘æ‰§è¡Œè¿™ä¸ªçš„æ—¶å€™ æç¤ºæˆ‘ï¼š\ncurl: (7) Failed to connect to ngx.test port 32341 after 0 ms: Connection refused","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1680518317,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æµ™æ±Ÿ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":373212,"user_name":"Albert","can_delete":false,"product_type":"c1","uid":1047856,"ip_address":"åŒ—äº¬","ucode":"0BE897D3EE9271","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fd/30/83badcc2.jpg","comment_is_top":false,"comment_ctime":1682247984,"is_pvip":false,"replies":[{"id":136338,"content":"good","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1682307364,"ip_address":"ä¸Šæµ·","comment_id":373212,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100114501,"comment_content":"serviceæ–‡ä»¶\napiVersion: v1\nkind: Service\nmetadata:\n  name: ngx-kic-svc\n  namespace: nginx-ingress\n\nspec:\n  selector:\n    app: ngx-kic-dep\n  type: NodePort\n  ports:\n  - port: 8082\n    targetPort: 80\n    protocol: TCP\n~                   \n\næŸ¥çœ‹svcçš„ipåè®¿é—®ï¼š\ncurl -H &quot;Host: ngx.test&quot; &quot;http:&#47;&#47;10.103.79.195:8082&quot;\n","like_count":2,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":615506,"discussion_content":"good","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1682307365,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1122447,"avatar":"","nickname":"sunney","note":"","ucode":"901A1A4C0C0F48","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":652072,"discussion_content":"ä½¿ç”¨kubectl port-forwardè½¬å‘ç«¯å£åï¼Œcurl --resolve æ–¹å¼åšåŸŸåæ˜ å°„è®¿é—®æ— æ•ˆã€‚\nä½¿ç”¨ curl -H &#34;Host:ngx.test&#34; &#34;http://127.0.0.1:8021&#34; åè®¿é—®æˆåŠŸ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1728210657,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":371309,"user_name":"GeekNeo","can_delete":false,"product_type":"c1","uid":1146405,"ip_address":"æµ™æ±Ÿ","ucode":"1D355A9BEB8BEA","user_header":"https://static001.geekbang.org/account/avatar/00/11/7e/25/3932dafd.jpg","comment_is_top":false,"comment_ctime":1679768447,"is_pvip":false,"replies":[{"id":135464,"content":"æ˜¯çš„ï¼Œé•œåƒå’ŒYAML å¿…é¡»å¯¹åº”ï¼Œå¦åˆ™ä¼šç‰ˆæœ¬ä¸åŒ¹é…ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1679901169,"ip_address":"ä¸Šæµ·","comment_id":371309,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100114501,"comment_content":"æˆ‘å‘ç°äº†ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘æ˜¯ç”¨äº†æœ€æ–°ç‰ˆçš„ymlï¼Œä»githubæ‹‰çš„ï¼Œæ²¡æœ‰ç›´æ¥ç”¨è€å¸ˆçš„ï¼Œä½†æ˜¯kic.ymlæ–‡ä»¶å°±æ˜¯ä½¿ç”¨è€å¸ˆè´´å‡ºæ¥çš„ï¼Œç„¶åè¿è¡Œèµ·æ¥ï¼Œpodä¸€ç›´éƒ½æ˜¯æœªREADYå’ŒAVAILABLEï¼ŒæŸ¥çœ‹æ—¥å¿—logsï¼ŒæŠ¥é”™ï¼š\nFailed to watch *v1.Endpoints: failed to list *v1.Endpoints: endpoints is forbidden: User &quot;system:serviceaccount:nginx-ingress:nginx-ingress&quot; cannot list resource &quot;endpoints&quot; in API group &quot;&quot; at the cluster scope\n\næˆ‘æ’æŸ¥äº†å¾ˆä¹…ï¼Œæœ€åå‘ç°rabcæ–‡ä»¶è§„åˆ™å¼‚åŒï¼Œå¯¼è‡´ç‰ˆæœ¬ä¸å…¼å®¹ï¼Œä¸çŸ¥é“æˆ‘çŒœæµ‹çš„å¯¹ä¸å¯¹ï¼Ÿ\næŠŠè€å¸ˆçš„é•œåƒæ–‡ä»¶ nginx&#47;nginx-ingress:2.2-alpineæ›´æ¢ä¸ºnginx&#47;nginx-ingress:3.0.2\nå†æ¬¡applyåï¼Œå°±ä¸€åˆ‡æ­£å¸¸OKäº†ï¼Œæ²¡é—®é¢˜äº†ã€‚\næ€»ç»“ï¼šå› æ²¡æœ‰æ‹‰è€å¸ˆæä¾›çš„ymlæ¸…å•ç”Ÿæˆå¯¹åº”çš„å¯¹è±¡ï¼Œè€Œæ˜¯è‡ªå·±å»githubæ‹‰æœ€æ–°ç‰ˆæœ¬çš„ymlç”Ÿæˆå¯¹è±¡ï¼Œè€Œé•œåƒæ–‡ä»¶ä½¿ç”¨äº†è€å¸ˆæä¾›ï¼Œå¯¼è‡´podèµ·ä¸æ¥ã€‚ç›®æµ‹æ˜¯ç‰ˆæœ¬å¯¹rabcè§„åˆ™çš„ä¸å…¼å®¹å¯¼è‡´ï¼Œä¸çŸ¥é“è€å¸ˆå¯ä»¥è§£ç­”ä¸‹å—ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":611000,"discussion_content":"æ˜¯çš„ï¼Œé•œåƒå’ŒYAML å¿…é¡»å¯¹åº”ï¼Œå¦åˆ™ä¼šç‰ˆæœ¬ä¸åŒ¹é…ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1679901169,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":356780,"user_name":"pyhhou","can_delete":false,"product_type":"c1","uid":1256496,"ip_address":"ä¸Šæµ·","ucode":"31EF8D50CF91A5","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/ibZVAmmdAibBeVpUjzwId8ibgRzNk7fkuR5pgVicB5mFSjjmt2eNadlykVLKCyGA0GxGffbhqLsHnhDRgyzxcKUhjg/132","comment_is_top":false,"comment_ctime":1662589648,"is_pvip":false,"replies":[{"id":129848,"content":"åº”è¯¥å…ˆåˆ›å»ºIngress Classå¯¹è±¡å§ï¼Œå¯ä»¥å‚è€ƒä¸€ä¸‹åé¢çš„è§†é¢‘è¯¾ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1662603044,"ip_address":"ä¸Šæµ·","comment_id":356780,"utype":1}],"discussion_count":4,"race_medal":0,"score":3,"product_id":100114501,"comment_content":"è€å¸ˆï¼Œsetup Ingress Controller é‚£é‡Œæœ‰ä¸ªé—®é¢˜ä¸çŸ¥é“å¦‚ä½•è§£å†³ï¼Œçœ‹åˆ°è¯„è®ºåŒºé‡Œä¹Ÿæœ‰å¾ˆå¤šåŒå­¦æœ‰ä¸€æ ·çš„é—®é¢˜\n\n$ kubectl logs ngx-kic-dep-75f4f5c7c-v9lt8 -n nginx-ingress\nI0907 22:10:01.222921       1 main.go:213] Starting NGINX Ingress Controller Version=2.2.2 GitCommit=a88b7fe6dbde5df79593ac161749afc1e9a009c6 Date=2022-05-24T00:33:34Z Arch=linux&#47;arm64 PlusFlag=false\nI0907 22:10:01.233010       1 main.go:344] Kubernetes version: 1.23.3\nF0907 22:10:01.233818       1 main.go:357] Error when getting IngressClass ngx-ink: ingressclasses.networking.k8s.io &quot;ngx-ink&quot; is forbidden: User &quot;system:serviceaccount:nginx-ingress:default&quot; cannot get resource &quot;ingressclasses&quot; in API group &quot;networking.k8s.io&quot; at the cluster scope\n\npod çš„çŠ¶æ€æ˜¯ CrashLoopBackOff\n\næˆ‘æ˜¯ç›´æ¥æ‰§è¡Œä½  GitHub ä¸Šé¢çš„ setup.sh è„šæœ¬çš„ï¼Œç„¶åå†æ‰§è¡Œ kic.yaml çš„ï¼Œæ‰€ä»¥ rbac.yaml ä¹Ÿæ˜¯æ‰§è¡Œäº†çš„ã€‚æˆ–è€…è¯´ rbac.yaml æ–‡ä»¶ä¸­çš„å‚æ•°éœ€è¦æ›´æ”¹ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":586908,"discussion_content":"åº”è¯¥å…ˆåˆ›å»ºIngress Classå¯¹è±¡å§ï¼Œå¯ä»¥å‚è€ƒä¸€ä¸‹åé¢çš„è§†é¢‘è¯¾ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662603044,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1140265,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/29/8b471f9d.jpg","nickname":"åŠç¼˜å›","note":"","ucode":"1266C4E35180A2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":589651,"discussion_content":"åœ¨ing-controller.yamlä¸­æ²¡æœ‰æŒ‡å®šserviceAccountName: nginx-ingressï¼Œä½¿ç”¨äº†é»˜è®¤çš„ngx-ingress:defaultï¼Œå› æ­¤æ²¡æœ‰æƒé™","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1665220339,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":617008,"discussion_content":"https://github.com/chronolaw/k8s_study","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1683257139,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":3218150,"avatar":"https://static001.geekbang.org/account/avatar/00/31/1a/e6/6f850892.jpg","nickname":"å°äº•","note":"","ucode":"629DAF3BB3AE73","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":596550,"discussion_content":"è¿™ä¸ªè€å¸ˆæ‚¨çš„githuabé“¾æ¥åœ¨å“ªå‘€\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1671082795,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":354860,"user_name":"è®¸é£","can_delete":false,"product_type":"c1","uid":2789963,"ip_address":"ä¸Šæµ·","ucode":"2579B1A828D8BC","user_header":"https://static001.geekbang.org/account/avatar/00/2a/92/4b/1262f052.jpg","comment_is_top":false,"comment_ctime":1660826265,"is_pvip":false,"replies":[{"id":129103,"content":"å¥½åƒæ˜¯æ²¡æœ‰å®‰è£…Nginx Ingress Controllerçš„rbacï¼Œå†æŠŠå®ƒç›¸å…³çš„å®‰è£…YAML éƒ½æ‰§è¡Œä¸€ä¸‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1660890663,"ip_address":"ä¸Šæµ·","comment_id":354860,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100114501,"comment_content":"F0818 12:36:23.718350       1 main.go:357] Error when getting IngressClass ngx-ink: ingressclasses.networking.k8s.io &quot;ngx-ink&quot; is forbidden: User &quot;system:serviceaccount:nginx-ingress:default&quot; cannot get resource &quot;ingressclasses&quot; in API group &quot;networking.k8s.io&quot; at the cluster scope\nè€å¸ˆè¿™æŠ¥é”™æ˜¯ä¸ºå•¥","like_count":2,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":584518,"discussion_content":"å¥½åƒæ˜¯æ²¡æœ‰å®‰è£…Nginx Ingress Controllerçš„rbacï¼Œå†æŠŠå®ƒç›¸å…³çš„å®‰è£…YAML éƒ½æ‰§è¡Œä¸€ä¸‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660890663,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1061671,"avatar":"https://static001.geekbang.org/account/avatar/00/10/33/27/e5a74107.jpg","nickname":"Da Vinci","note":"","ucode":"DB3B7F6A6028C1","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":610293,"discussion_content":"é‡è¯•äº†å‡ æ¬¡ï¼Œè¿˜æ˜¯ä¸å¾—ã€‚ã€‚ä¸çŸ¥é“æ˜¯æ€ä¹ˆå›äº‹ã€‚ã€‚\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1679495261,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":354078,"user_name":"æ‚Ÿè¿œ","can_delete":false,"product_type":"c1","uid":1912923,"ip_address":"åŒ—äº¬","ucode":"3BD9C748698888","user_header":"https://static001.geekbang.org/account/avatar/00/1d/30/5b/4f4b0a40.jpg","comment_is_top":false,"comment_ctime":1660060504,"is_pvip":false,"replies":[{"id":128788,"content":"Ingressåªæ”¯æŒhttp&#47;1.1ï¼Œå…¶ä»–çš„åè®®éœ€è¦ç”¨Ingress Controllerçš„CRDæ¥å®šä¹‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1660092369,"ip_address":"åŒ—äº¬","comment_id":354078,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100114501,"comment_content":"è€å¸ˆï¼Œè¯·é—®Ingresså¯ä»¥é’ˆå¯¹http2.0è¿›è¡Œæ§åˆ¶å—ï¼Ÿå¦‚gRPCï¼Œæˆ‘è¯•éªŒgPRCæ—¶é€šè¿‡kubectl port-forwardæ˜ å°„åˆ°æœ¬åœ°ï¼Œå†åŠ hostsï¼Œè®¿é—®gRPCæ—¶å¤±è´¥äº†","like_count":2,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583384,"discussion_content":"Ingressåªæ”¯æŒhttp/1.1ï¼Œå…¶ä»–çš„åè®®éœ€è¦ç”¨Ingress Controllerçš„CRDæ¥å®šä¹‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660092369,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1912923,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/30/5b/4f4b0a40.jpg","nickname":"æ‚Ÿè¿œ","note":"","ucode":"3BD9C748698888","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583394,"discussion_content":"Kubernetes Ingress Controlleræ˜¯æ”¯æŒçš„å—ï¼Ÿæˆ‘çœ‹è¿™é‡Œhttps://kubernetes.github.io/ingress-nginx/examples/grpc/æ˜¯æœ‰ä¾‹å­çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660094068,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":354057,"user_name":"peter","can_delete":false,"product_type":"c1","uid":1058183,"ip_address":"åŒ—äº¬","ucode":"261C3FC001DE2D","user_header":"https://static001.geekbang.org/account/avatar/00/10/25/87/f3a69d1b.jpg","comment_is_top":false,"comment_ctime":1660049517,"is_pvip":false,"replies":[{"id":128793,"content":"\n1. taintæ˜¯å¯¹podç”Ÿæ•ˆçš„ï¼Œæ‰€ä»¥ä¹Ÿä¼šå½±å“Deploymentã€‚\n\n2.å‰é¢4ä¸ªæ˜¯å®‰è£…Nginx Ingress Controllerï¼Œæ˜¯å¿…é¡»è¦åšçš„ï¼Œæœ‰é¡ºåºè¦æ±‚ã€‚\n\n3.ç”¨git cloneï¼ŒæŠŠè¿™ä¸ªé¡¹ç›®ä¸‹è½½ä¸‹æ¥ã€‚\n\n4.ç”¨kubectl describe&#47;logsçœ‹åŸå› ã€‚\n\né‡åˆ°é”™è¯¯æ˜¯å¥½äº‹ï¼Œæ’æŸ¥é”™è¯¯çš„è¿‡ç¨‹å°±èƒ½å¤Ÿæ¶¨ç»éªŒã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1660092693,"ip_address":"åŒ—äº¬","comment_id":354057,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100114501,"comment_content":"è¯·æ•™è€å¸ˆå‡ ä¸ªé—®é¢˜ï¼š\nQ1ï¼štaintæ˜¯åœ¨daemonsetéƒ¨åˆ†è®²çš„ï¼ŒèŠ‚ç‚¹çš„taintä¼šå½±å“podæ˜¯å¦ä¼šéƒ¨ç½²åˆ°èŠ‚ç‚¹ä¸Šã€‚\nä½†æ˜¯ï¼Œå¯¹äºdeploymentï¼Œtaintä¼šå½±å“å—ï¼Ÿ\n\nQ2ï¼šç¬¬21è®²æœ€åä¸€éƒ¨åˆ†æ˜¯æ­å»ºingress controllerã€‚ è¿™éƒ¨åˆ†æåˆ°äº†äº”ä¸ªymlæ–‡ä»¶ã€‚ æ˜¯å…ˆæ‰§è¡Œå‰é¢å››ä¸ªï¼Œç„¶åå†æ‰§è¡Œæœ€åä¸€ä¸ªæ¥åˆ›å»ºingress controllerå—ï¼Ÿ è¿˜æ˜¯åªæ‰§è¡Œâ€œkubectl apply -f kic.ymlâ€ï¼Ÿ ï¼ˆå¦‚æœå…ˆæ‰§è¡Œå‰é¢å››ä¸ªæ–‡ä»¶ï¼Œè¿™å››ä¸ªæ–‡ä»¶æœ‰é¡ºåºå—ï¼Ÿï¼‰\n\nQ3ï¼šgithubä¸Šçš„å››ä¸ªæ–‡ä»¶ï¼Œçœ‹ä¸åˆ°ä¸‹è½½æŒ‰é’®ã€‚æ˜¯å› ä¸ºæ²¡æœ‰ç™»å½•å—ï¼Ÿ å¦‚æœä¸æ˜¯å› ä¸ºç™»å½•ï¼Œæ˜¯å¦èƒ½æä¾›ä¸‹è½½æŒ‰é’®ï¼Ÿï¼ˆç°åœ¨çš„æ–¹æ³•æ˜¯æ‹·è´æ–‡ä»¶å†…å®¹ï¼Œæ¯”è¾ƒéº»çƒ¦ï¼‰\n\nQ4ï¼šè¿è¡Œcontrolleråï¼ŒæŸ¥çœ‹deployå’ŒPODçš„çŠ¶æ€éƒ½ä¸æ­£å¸¸ã€‚\nå…ˆæ‰§è¡Œgithubä¸Šçš„å››ä¸ªæ–‡ä»¶ï¼Œé¡ºåºæ˜¯æ–‡ä¸­åˆ—å‡ºçš„é¡ºåºï¼Œåˆ›å»ºéƒ½æˆåŠŸäº†ã€‚ç„¶åå¯åŠ¨controllerã€‚\næŸ¥çœ‹ç»“æœå¦‚ä¸‹ï¼š\nkubectl get pod -n nginx-ingressï¼ŒçŠ¶æ€æ˜¯ï¼šCrashLoopBackOff\nkubectl get deploy -n nginx-ingressï¼š Readyæ˜¯ 0&#47;1\nå¯èƒ½æ˜¯ä»€ä¹ˆåŸå› ï¼Ÿ ï¼ˆè¿™ä¸ªé—®é¢˜æœ‰ç‚¹ç¬¼ç»Ÿï¼Œä¸å¤ªå…·ä½“ï¼Œè€å¸ˆç»™å‡ºä¸€ç‚¹å»ºè®®å³å¯ã€‚ï¼‰","like_count":2,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583389,"discussion_content":"\n1. taintæ˜¯å¯¹podç”Ÿæ•ˆçš„ï¼Œæ‰€ä»¥ä¹Ÿä¼šå½±å“Deploymentã€‚\n\n2.å‰é¢4ä¸ªæ˜¯å®‰è£…Nginx Ingress Controllerï¼Œæ˜¯å¿…é¡»è¦åšçš„ï¼Œæœ‰é¡ºåºè¦æ±‚ã€‚\n\n3.ç”¨git cloneï¼ŒæŠŠè¿™ä¸ªé¡¹ç›®ä¸‹è½½ä¸‹æ¥ã€‚\n\n4.ç”¨kubectl describe/logsçœ‹åŸå› ã€‚\n\né‡åˆ°é”™è¯¯æ˜¯å¥½äº‹ï¼Œæ’æŸ¥é”™è¯¯çš„è¿‡ç¨‹å°±èƒ½å¤Ÿæ¶¨ç»éªŒã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660092693,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":353902,"user_name":"æ½œå…‰éšè€€","can_delete":false,"product_type":"c1","uid":1809457,"ip_address":"ä¸Šæµ·","ucode":"8A2FDDEFCB1863","user_header":"https://static001.geekbang.org/account/avatar/00/1b/9c/31/e4677275.jpg","comment_is_top":false,"comment_ctime":1659921063,"is_pvip":false,"replies":[{"id":128699,"content":"ç°åœ¨Gateway å·²ç»æ˜¯betaç‰ˆäº†ï¼Œå¯èƒ½ä¼šä»¥åŠ é¤çš„å½¢å¼ï¼Œ","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1659924801,"ip_address":"ä¸Šæµ·","comment_id":353902,"utype":1}],"discussion_count":4,"race_medal":0,"score":3,"product_id":100114501,"comment_content":"è¯·é—®ä¸‹ï¼Œä¼šä¸ä¼šä»‹ç»ä¸‹gateway apiï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583126,"discussion_content":"ç°åœ¨Gateway å·²ç»æ˜¯betaç‰ˆäº†ï¼Œå¯èƒ½ä¼šä»¥åŠ é¤çš„å½¢å¼ï¼Œ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1659924801,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583139,"discussion_content":"æ˜¯çš„ï¼ŒYAML å¤ªå¤šç¡®å®ä¸å¥½ç®¡ç†ï¼Œä½†helmä¹Ÿä¸æ˜¯ä¸‡èƒ½çš„ï¼Œå…·ä½“è¦æ€ä¹ˆç”¨è¿˜æ˜¯å¾—æ ¹æ®è‡ªå·±çš„å®é™…æƒ…å†µæ¥é€‰æ‹©ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659928339,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1013728,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/77/e0/81db900c.jpg","nickname":"Null","note":"","ucode":"3A0BC281632DD9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583138,"discussion_content":"è€å¸ˆï¼Œé—®ä½ ä»¬ç”Ÿç”Ÿäº§ç¯å¢ƒéƒ½æ˜¯æ€ä¹ˆä½¿ç”¨K8sçš„ã€‚ä¸»è¦æƒ³é—®çš„æœåŠ¡ç®¡ç†æ–¹é¢ï¼Œæ„Ÿè§‰æœåŠ¡ç¨å¾®ä¸€å¤šå°±éœ€è¦å†™å¾ˆå¤šyaml ï¼Œç‰¹åˆ«ä¸æ–¹ä¾¿ï¼Œé‚£ä¹ˆç±»ä¼¼helmåŒ…ç®¡ç†å·¥å…·æ­£å¼ç”Ÿäº§ç¯å¢ƒçš„ä½¿ç”¨çš„å¤šå—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659927308,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æµ™æ±Ÿ","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1087243,"avatar":"https://static001.geekbang.org/account/avatar/00/10/97/0b/a943bcb3.jpg","nickname":"zhou","note":"","ucode":"E1CE8575B3F106","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1013728,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/77/e0/81db900c.jpg","nickname":"Null","note":"","ucode":"3A0BC281632DD9","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":591884,"discussion_content":"ç”Ÿäº§ç¯å¢ƒï¼Œä¸€èˆ¬å°±ç›´æ¥æ‹‰uatçš„é•œåƒéƒ¨ç½²äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1666915764,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":583138,"ip_address":"æµ™æ±Ÿ","group_id":0},"score":591884,"extra":""}]}]},{"had_liked":false,"id":380182,"user_name":"lesserror","can_delete":false,"product_type":"c1","uid":1351076,"ip_address":"å¹¿ä¸œ","ucode":"25A54D1165FCF6","user_header":"https://static001.geekbang.org/account/avatar/00/14/9d/a4/e481ae48.jpg","comment_is_top":false,"comment_ctime":1693170365,"is_pvip":false,"replies":[{"id":138469,"content":"\n1. Kubernetes Ingress Controller\n\n2. -n  nginx-ingress æ˜¯Nginx ingress controllerçš„åå­—ç©ºé—´ï¼Œä¸æ˜¯æœåŠ¡ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1693266051,"ip_address":"åŒ—äº¬","comment_id":380182,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100114501,"comment_content":"Chrono è€å¸ˆï¼Œæœ‰ä¸¤ä¸ªå°é—®é¢˜ï¼š\n\n1.  ic çš„ç¼©å†™å¥½ç†è§£ï¼Œkic è¿™ä¸ªç¼©å†™è¯¥æ€ä¹ˆç†è§£å‘¢ï¼Ÿ\n\n2. kubectl port-forward -n nginx-ingress ngx-kic-dep-8859b7b86-cplgp 8080:80 &amp; ã€‚è¿™ä¸ªå‘½ä»¤çš„ -n  nginx-ingress ä»£è¡¨çš„æ˜¯å“ªä¸ªæœåŠ¡å‘¢ï¼Ÿngx-kic-dep-8859b7b86-cplgp æ˜¯ ingress- controller ä»£è¡¨çš„å®¹æ˜“åç§°ã€‚","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":626667,"discussion_content":"\n1. Kubernetes Ingress Controller\n\n2. -n  nginx-ingress æ˜¯Nginx ingress controllerçš„åå­—ç©ºé—´ï¼Œä¸æ˜¯æœåŠ¡ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1693266051,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":379278,"user_name":"Hank_Yan","can_delete":false,"product_type":"c1","uid":1110662,"ip_address":"åŒ—äº¬","ucode":"86899B561C502B","user_header":"https://static001.geekbang.org/account/avatar/00/10/f2/86/d689f77e.jpg","comment_is_top":false,"comment_ctime":1691652398,"is_pvip":false,"replies":[{"id":138203,"content":"good. Kubernetesåº”ç”¨ç‰ˆæœ¬æ›´æ–°çš„å¾ˆå¿«ï¼Œæ‰€ä»¥å®Œå…¨ç…§ä¹¦æœ¬è‚¯å®šä¸è¡Œï¼Œè¦æœ‰è‡ªå·±åŠ¨æ‰‹çš„èƒ½åŠ›ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1691664538,"ip_address":"ä¸Šæµ·","comment_id":379278,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100114501,"comment_content":"å¦‚æœå‚è€ƒäº†å®˜ç½‘çš„æ­¥éª¤: https:&#47;&#47;docs.nginx.com&#47;nginx-ingress-controller&#47;installation&#47;installation-with-manifests&#47;   æ²¡æœ‰ä½¿ç”¨è€å¸ˆçš„ setup è„šæœ¬ï¼Œé‚£ä¹ˆæ­¥éª¤è¦ä¸¥æ ¼æŒ‰ç…§å®˜ç½‘æ¥ã€‚ \n\nåŒ…æ‹¬ nginx&#47;nginx-ingress ç‰ˆæœ¬ã€‚  ç”¨è€å¸ˆçš„ nginx&#47;nginx-ingress:2.2-alpine  ã€‚é‡åˆ°503 é”™è¯¯ï¼ŒreadinessProbe  åœ°å€ &#47;nginx-ready æ— æ³•è®¿é—®åˆ°ã€‚ \n\næœ€åå…¨éƒ¨æŒ‰ç…§å®˜ç½‘æ“ä½œï¼Œç‰ˆæœ¬ç”¨ nginx&#47;nginx-ingress:3.2.0ï¼Œé—®é¢˜è§£å†³äº†ã€‚","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":625427,"discussion_content":"good. Kubernetesåº”ç”¨ç‰ˆæœ¬æ›´æ–°çš„å¾ˆå¿«ï¼Œæ‰€ä»¥å®Œå…¨ç…§ä¹¦æœ¬è‚¯å®šä¸è¡Œï¼Œè¦æœ‰è‡ªå·±åŠ¨æ‰‹çš„èƒ½åŠ›ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1691664538,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":378945,"user_name":"InfoQ_15df24517cff","can_delete":false,"product_type":"c1","uid":2060082,"ip_address":"å¹¿ä¸œ","ucode":"89E5A22D49A37A","user_header":"","comment_is_top":false,"comment_ctime":1691030481,"is_pvip":false,"replies":[{"id":138114,"content":"å¯ä»¥æŒ‡å®šï¼Œç”¨kubectl explain ingress.metadataçœ‹å®ƒçš„è¯¦ç»†è¯´æ˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1691135026,"ip_address":"ä¸Šæµ·","comment_id":378945,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100114501,"comment_content":"ingresså’Œingressclassä¸éœ€è¦æŒ‡å®šnamespaceå—","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":624982,"discussion_content":"å¯ä»¥æŒ‡å®šï¼Œç”¨kubectl explain ingress.metadataçœ‹å®ƒçš„è¯¦ç»†è¯´æ˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1691135026,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":377643,"user_name":"éƒ‘ç«¥æ–‡","can_delete":false,"product_type":"c1","uid":1030733,"ip_address":"å››å·","ucode":"3D193715CB8549","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ba/4d/7ba09ff0.jpg","comment_is_top":false,"comment_ctime":1688952298,"is_pvip":false,"replies":[{"id":137631,"content":"ä¸€ç§Ingress controllerå¯ä»¥ç”¨äºå¤šä¸ªä¸åŒçš„Ingress Classï¼Œæ‰€ä»¥ä¸€ä¸ªå…·ä½“çš„Ingress controllerå®ä¾‹å°±å¿…é¡»è¦æŒ‡å®šè¢«ç”¨äºå“ªä¸ªå…·ä½“çš„Ingress Classã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1688970187,"ip_address":"åŒ—äº¬","comment_id":377643,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100114501,"comment_content":"è¯·é—®è€å¸ˆï¼Œ æ—¢ç„¶å·²ç»åœ¨ingress class é‡Œé¢æŒ‡å®šäº† controller, ä¸ºä»€ä¹ˆåœ¨controlleré‡Œé¢è¿˜è¦æŒ‡å®šingress classå‘¢ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":623044,"discussion_content":"ä¸€ç§Ingress controllerå¯ä»¥ç”¨äºå¤šä¸ªä¸åŒçš„Ingress Classï¼Œæ‰€ä»¥ä¸€ä¸ªå…·ä½“çš„Ingress controllerå®ä¾‹å°±å¿…é¡»è¦æŒ‡å®šè¢«ç”¨äºå“ªä¸ªå…·ä½“çš„Ingress Classã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1688970187,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":376589,"user_name":"Arrow","can_delete":false,"product_type":"c1","uid":1925571,"ip_address":"ä¸Šæµ·","ucode":"FB9F997225B1ED","user_header":"https://static001.geekbang.org/account/avatar/00/1d/61/c3/791d0f5e.jpg","comment_is_top":false,"comment_ctime":1687014721,"is_pvip":false,"replies":[{"id":137288,"content":"å¦‚æœæ˜¯Nginx Ingress controllerï¼Œå¯ä»¥-it è¿›å…¥podå†…éƒ¨ï¼Œçœ‹ä¸€ä¸‹ç”Ÿæˆçš„Nginxé…ç½®æ–‡ä»¶æ˜¯å¦æœ‰äº†Ingresså¯¹åº”çš„upstreamå®šä¹‰ï¼Œå¦‚æœæ²¡æœ‰å¯èƒ½è¿˜æ˜¯Ingresså’ŒIngress controlleræ²¡æœ‰å…³è”å¥½ã€‚\n\nå¯ä»¥å…ˆç”¨è¯¾ç¨‹é‡Œç¤ºä¾‹çš„Ingress controllerï¼Œæœ‰ä¸€ä¸ªèƒ½ç”¨çš„å®ä¾‹ï¼Œå†å¯¹ç…§çœ‹çœ‹å·®åœ¨å“ªé‡Œã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1687143064,"ip_address":"åŒ—äº¬","comment_id":376589,"utype":1}],"discussion_count":2,"race_medal":0,"score":4,"product_id":100114501,"comment_content":"è¯·é—®è€å¸ˆï¼Œæˆ‘ingress çš„è§„åˆ™ä¼¼ä¹æ€»æ˜¯ä¸ç”Ÿæ•ˆï¼Œè®¿é—®svcä¹‹åéƒ½æ˜¯è¿”å›404ï¼Œè¿›controllerçš„podæŸ¥çœ‹ä¹Ÿåªæœ‰ä¸ªé»˜è®¤çš„é…ç½®ï¼Œæ²¡æœ‰æˆ‘ingresså®šä¹‰çš„è§„åˆ™ï¼Œè¯·é—®è¿™ä¸ªæ€ä¹ˆæ’æŸ¥è§£å†³","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":621321,"discussion_content":"å¦‚æœæ˜¯Nginx Ingress controllerï¼Œå¯ä»¥-it è¿›å…¥podå†…éƒ¨ï¼Œçœ‹ä¸€ä¸‹ç”Ÿæˆçš„Nginxé…ç½®æ–‡ä»¶æ˜¯å¦æœ‰äº†Ingresså¯¹åº”çš„upstreamå®šä¹‰ï¼Œå¦‚æœæ²¡æœ‰å¯èƒ½è¿˜æ˜¯Ingresså’ŒIngress controlleræ²¡æœ‰å…³è”å¥½ã€‚\n\nå¯ä»¥å…ˆç”¨è¯¾ç¨‹é‡Œç¤ºä¾‹çš„Ingress controllerï¼Œæœ‰ä¸€ä¸ªèƒ½ç”¨çš„å®ä¾‹ï¼Œå†å¯¹ç…§çœ‹çœ‹å·®åœ¨å“ªé‡Œã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1687143064,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1255198,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erRCf8vWbWibajdSaMtCM1OzPQ6uPhblgL4zXJvKoaQYVmialqFqr0NIdD6Dlm1F5icOBxiaXvUcQs4BA/132","nickname":"sgcls","note":"","ucode":"F359E943BF6D14","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":649958,"discussion_content":"$ kubectl exec -it -n nginx-ingress ngx-kic-dep-8859b7b86-kt9br -- sh\n$ vi /etc/nginx/nginx.conf","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1724173498,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":376229,"user_name":"Geek_c16d38","can_delete":false,"product_type":"c1","uid":2726606,"ip_address":"ä¸­å›½å°æ¹¾","ucode":"A8B1EB366FCD98","user_header":"","comment_is_top":false,"comment_ctime":1686562592,"is_pvip":false,"replies":[{"id":137228,"content":"å¯ä»¥ç›´æ¥å»Nginx Ingress controllerå®˜æ–¹ä¸‹è½½YAMLï¼ŒGitHubä¸Šä¹Ÿæœ‰ä¸€ä»½ï¼Œå¤šå‡ ä¸ªæ¥æºæ–¹ä¾¿å¤§å®¶è·å–ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1686612410,"ip_address":"ä¸Šæµ·","comment_id":376229,"utype":1}],"discussion_count":2,"race_medal":0,"score":4,"product_id":100114501,"comment_content":"ç‚ºä»€éº¼æœ‰é»è·³ä¾†è·³å»çœ‹ä¸å¤ªæ‡‚ ï¼Ÿï¼Ÿï¼Ÿ\n\næ˜¯è¦å¾githubä¸‹è¼‰ æ–‡ä»¶é‚„æ˜¯ï¼Ÿï¼Ÿ\n\nå› ç‚ºæœ¬ä¾†å°±ä¸å¥½ç†è§£äº† \nåˆè·³ä¾†è·³å» ä¸æ˜¯å¾ˆæ‡‚ã€‚ã€‚ã€‚ï¼Ÿï¼Ÿ\n","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":620844,"discussion_content":"å¯ä»¥ç›´æ¥å»Nginx Ingress controllerå®˜æ–¹ä¸‹è½½YAMLï¼ŒGitHubä¸Šä¹Ÿæœ‰ä¸€ä»½ï¼Œå¤šå‡ ä¸ªæ¥æºæ–¹ä¾¿å¤§å®¶è·å–ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1686612410,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1800818,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/7a/72/a86c521e.jpg","nickname":"å…­æœˆ","note":"","ucode":"D94CD05F648A7B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":623202,"discussion_content":"å¯ä»¥å»k8så®˜ç½‘ï¼Œæœ‰æ ·ä¾‹å’Œé“¾æ¥ï¼Œç›´æ¥èƒ½è·‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1689151713,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":376107,"user_name":"shuff1e","can_delete":false,"product_type":"c1","uid":1756280,"ip_address":"åŒ—äº¬","ucode":"85601271951B5A","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ep075ibtmxMf3eOYlBJ96CE9TEelLUwePaLqp8M75gWHEcM3za0voylA0oe9y3NiaboPB891rypRt7w/132","comment_is_top":false,"comment_ctime":1686298669,"is_pvip":false,"replies":[{"id":137193,"content":"Nginx Ingress controllerå¼€å‘è€…å®šä¹‰çš„åå­—ï¼Œå†™åœ¨ä»£ç é‡Œçš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1686399870,"ip_address":"åŒ—äº¬","comment_id":376107,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100114501,"comment_content":"æ¯”å¦‚ï¼Œå¦‚æœæˆ‘è¦ç”¨ Nginx å¼€å‘çš„ Ingress Controllerï¼Œé‚£ä¹ˆå°±è¦ç”¨åå­—â€œnginx.org&#47;ingress-controllerâ€ï¼Œè¿™é‡Œçš„nginx.org&#47;ingress-controlleræ˜¯æ€ä¹ˆç¡®å®šçš„ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":620659,"discussion_content":"Nginx Ingress controllerå¼€å‘è€…å®šä¹‰çš„åå­—ï¼Œå†™åœ¨ä»£ç é‡Œçš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1686399870,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":374982,"user_name":"Geek_9d43c0","can_delete":false,"product_type":"c1","uid":3051841,"ip_address":"åŒ—äº¬","ucode":"68EEFAC76D921B","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Gtf3tMDmYRoCL9Eico52ciatacq4PUHfQ8icQIYKV6KLDAJyTa8ZnLXMKf05pEice5RnEagocFobca5zv8jwyPhNKA/132","comment_is_top":false,"comment_ctime":1684749040,"is_pvip":false,"replies":[{"id":136895,"content":"podçš„IPåœ°å€åº”è¯¥æ˜¯kubernetesçš„é›†ç¾¤å†…éƒ¨IPåœ°å€æ‰å¯¹ï¼Œå’ŒèŠ‚ç‚¹IPæ²¡æœ‰å…³ç³»ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªç®€å•çš„Nginx podï¼Œé…ç½®æ¢é’ˆè¯•è¯•ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1684913055,"ip_address":"ä¸Šæµ·","comment_id":374982,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100114501,"comment_content":"è€å¸ˆ æˆ‘çš„node1èŠ‚ç‚¹çš„ipæ˜¯10.0.4.14 å› ä¸ºæˆ‘æ˜¯å…¬ç½‘éƒ¨ç½²çš„æ‰€ä»¥è¿™ä¸ªipåšäº†è½¬å‘ è½¬å‘åˆ°äº†æˆ‘çš„node1çš„å…¬ç½‘ip æˆ‘çœ‹æˆ‘æ‰€æœ‰çš„podåªè¦éƒ¨ç½²åœ¨node1ä¸Šçš„ kubectl get pod -o wide éƒ½æ˜¯ 10.0.4.14 åªæœ‰ingressçš„pod ip å¦‚ä¸‹\n nginx-ingress      ngx-kic-dep-5455fd7846-spglq              0&#47;1     CrashLoopBackOff   5 (71s ago)   7m14s   10.244.36.118    k8s-node1   \n describe podä¹‹åçœ‹åˆ°çš„æ˜¯   Warning  Unhealthy  2m27s (x22 over 2m47s)  kubelet            Readiness probe failed: Get &quot;http:&#47;&#47;10.244.36.118:8081&#47;nginx-ready&quot;: dial tcp 10.244.36.118:8081: connect: connection refused\n æˆ‘ç†è§£æ˜¯è®¿é—®å¤±è´¥äº† æˆ‘å¼€äº†node1çš„è…¾è®¯äº‘çš„é˜²ç«å¢™8081 ä½†æ˜¯è¿˜æ˜¯å¤±è´¥  æŸ¥äº†ä¸€ä¸‹è·¯ç”±è¡¨å‘ç°masterçš„è·¯ç”±è¡¨æ²¡æœ‰10.244.36.118 è¿™ä¸ªè·¯ç”± æƒ³é—®ä¸€ä¸‹æˆ‘è¿™ç§æƒ…å†µè€å¸ˆæœ‰ä»€ä¹ˆè§£å†³ç»éªŒå— ipä¸æ˜¯nodeçš„ipæ˜¯å› ä¸ºingressæœ¬èº«çš„ç‰¹æ€§å¯¼è‡´çš„å—","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":619246,"discussion_content":"podçš„IPåœ°å€åº”è¯¥æ˜¯kubernetesçš„é›†ç¾¤å†…éƒ¨IPåœ°å€æ‰å¯¹ï¼Œå’ŒèŠ‚ç‚¹IPæ²¡æœ‰å…³ç³»ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªç®€å•çš„Nginx podï¼Œé…ç½®æ¢é’ˆè¯•è¯•ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1684913055,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":374773,"user_name":"So what?","can_delete":false,"product_type":"c1","uid":3602392,"ip_address":"é™•è¥¿","ucode":"A15C7E39BF16A8","user_header":"https://static001.geekbang.org/account/avatar/00/36/f7/d8/dc437147.jpg","comment_is_top":false,"comment_ctime":1684403747,"is_pvip":false,"replies":[{"id":136762,"content":"æ˜¯çš„ï¼Œæ³¨æ„æ¯ä¸ªYAMLå¯¹è±¡ä¹‹é—´è¦ç”¨â€œ---â€åˆ†éš”å¼€ï¼Œå¦åˆ™å°±æ˜¯è¯­æ³•é”™è¯¯äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1684484149,"ip_address":"ä¸Šæµ·","comment_id":374773,"utype":1}],"discussion_count":3,"race_medal":0,"score":4,"product_id":100114501,"comment_content":"å› ä¸º Ingress Class å¾ˆå°ï¼Œæ‰€ä»¥æˆ‘æŠŠå®ƒä¸ Ingress åˆæˆäº†ä¸€ä¸ª YAML æ–‡ä»¶\n\nè€å¸ˆï¼Œè¿™ä¸ªæ„æ€æ˜¯è¯´æŠŠä¸¤ä¸ªæ–‡ä»¶å¤åˆ¶åˆ°ä¸€ä¸ªæ–‡ä»¶é‡Œå°±å¯ä»¥äº†å˜›","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":618723,"discussion_content":"æ˜¯çš„ï¼Œæ³¨æ„æ¯ä¸ªYAMLå¯¹è±¡ä¹‹é—´è¦ç”¨â€œ---â€åˆ†éš”å¼€ï¼Œå¦åˆ™å°±æ˜¯è¯­æ³•é”™è¯¯äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1684484149,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":3602392,"avatar":"https://static001.geekbang.org/account/avatar/00/36/f7/d8/dc437147.jpg","nickname":"So what?","note":"","ucode":"A15C7E39BF16A8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":618724,"discussion_content":"å¥½çš„ï¼Œè°¢è°¢è€å¸ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1684484184,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":618723,"ip_address":"é™•è¥¿","group_id":0},"score":618724,"extra":""}]},{"author":{"id":1255198,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erRCf8vWbWibajdSaMtCM1OzPQ6uPhblgL4zXJvKoaQYVmialqFqr0NIdD6Dlm1F5icOBxiaXvUcQs4BA/132","nickname":"sgcls","note":"","ucode":"F359E943BF6D14","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":649959,"discussion_content":"$ cat ingress.yml\n---\napiVersion: networking.k8s.io/v1\nkind: Ingress\nmetadata:\n  name: ngx-ing\n\nspec:\n\n  ingressClassName: ngx-ink\n\n  rules:\n  - host: ngx.test\n    http:\n      paths:\n      - path: /\n        pathType: Exact\n        backend:\n          service:\n            name: ngx-svc\n            port:\n              number: 80\n---\napiVersion: networking.k8s.io/v1\nkind: IngressClass\nmetadata:\n  name: ngx-ink\n\nspec:\n  controller: nginx.org/ingress-controller","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1724173803,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":373823,"user_name":"æ‹“å±±","can_delete":false,"product_type":"c1","uid":1545647,"ip_address":"æµ™æ±Ÿ","ucode":"11FE9CF3821898","user_header":"https://static001.geekbang.org/account/avatar/00/17/95/af/b7f8dc43.jpg","comment_is_top":false,"comment_ctime":1683203382,"is_pvip":false,"replies":[{"id":136581,"content":"1.ä¸å¤ªä¸€æ ·ã€‚å®‰è£…ä¸€èˆ¬æ˜¯æŒ‡åœ¨kubernetesé‡Œå¼•å…¥Ingress controllerï¼Œéƒ¨ç½²æ˜¯æŒ‡å¯¹æŸä¸ªåº”ç”¨é…ç½®Ingress controllerã€‚ä¸è¿‡æˆ‘è§‰å¾—ä¸å¿…å¤ªçº ç»“è¿™äº›è¯æ±‡ã€‚\n2.ç†è§£åŸºæœ¬æ­£ç¡®ã€‚\n3.æ˜¯çš„ã€‚\n4.å¯ä»¥è¯´æ˜¯è¿è¡Œäº†å¤šä¸ªsetup.shå®‰è£…çš„Ingress controllerçš„å®ä¾‹ã€‚\n5.åº”è¯¥å…ˆå®‰è£…ï¼Œå…·å¤‡äº†Ingress controlleréœ€è¦çš„å¤šä¸ªèµ„æºåæ‰èƒ½éƒ¨ç½²ã€‚\n6.Ingress controlleræ˜¯ä¸€ä¸ªå¤§çš„æ¦‚å¿µï¼Œ nginx Ingress controlleræ˜¯å®ƒçš„ä¸€ä¸ªå…·ä½“å®ç°ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1683243641,"ip_address":"ä¸Šæµ·","comment_id":373823,"utype":1}],"discussion_count":2,"race_medal":0,"score":4,"product_id":100114501,"comment_content":"è€å¸ˆï¼Œè¿™èŠ‚çš„ingressæˆ‘åå¤å­¦ä¹ ï¼Œä½†ä¸€äº›æ¦‚å¿µè¿˜æ˜¯æ¯”è¾ƒæ¨¡ç³Šï¼Œéº»çƒ¦æŒ‡ç‚¹ä¸€ä¸‹ï¼š\n1ã€ã€Nginx Ingress Controllerã€‘çš„å®‰è£…å’Œ ã€Ingress Controllerã€‘çš„éƒ¨ç½²æ˜¯ä¸€å›äº‹å—ï¼Ÿ\n2ã€æ˜¯å¦ ã€Nginx Ingress Controllerã€‘ å…¨å±€åªç”¨å®‰è£…ä¸€æ¬¡ï¼Œã€Ingress Controllerã€‘å¯ä»¥æ ¹æ®ä¸åŒçš„æœåŠ¡éƒ¨ç½²å¤šä»½ï¼Ÿ\n3ã€æ˜¯å¦ https:&#47;&#47;github.com&#47;chronolaw&#47;k8s_study&#47;blob&#47;master&#47;ingress&#47;setup.sh å‘½ä»¤åªæ˜¯å®‰è£… ã€Nginx Ingress Controllerã€‘ï¼Ÿ\n4ã€æ˜¯å¦ã€kind: Deploymentã€‘çš„ingress yamlæ–‡ä»¶å¯ä»¥éƒ¨ç½²ä¸åŒæœåŠ¡çš„ ingress-controlï¼Ÿä½†å®ƒä»¬éƒ½æŒ‡å‘setup.shé‡Œé…ç½®çš„ã€Nginx Ingress Controllerã€‘ï¼Ÿ\n\n5ã€æ˜¯ä¸æ˜¯åªéƒ¨ç½² ã€kind: Deploymentã€‘çš„ingress yaml ï¼ˆé…ç½®çš„namespaceè‡ªå®šä¹‰ï¼‰å°±å¯ä»¥äº†ï¼Œè€Œæ— éœ€å®‰è£… ã€Nginx Ingress Controllerã€‘ï¼Ÿ\n\næœ‰ç‚¹ç»•å“ˆï¼Œä½†ã€Nginx Ingress Controllerã€‘ã€ã€Ingress Controllerã€‘ è¿™ä¸¤ä¸ªæ¦‚å¿µæˆ‘æ„Ÿè§‰æ˜¯ä¸ä¸€è‡´çš„ã€‚","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":616985,"discussion_content":"1.ä¸å¤ªä¸€æ ·ã€‚å®‰è£…ä¸€èˆ¬æ˜¯æŒ‡åœ¨kubernetesé‡Œå¼•å…¥Ingress controllerï¼Œéƒ¨ç½²æ˜¯æŒ‡å¯¹æŸä¸ªåº”ç”¨é…ç½®Ingress controllerã€‚ä¸è¿‡æˆ‘è§‰å¾—ä¸å¿…å¤ªçº ç»“è¿™äº›è¯æ±‡ã€‚\n2.ç†è§£åŸºæœ¬æ­£ç¡®ã€‚\n3.æ˜¯çš„ã€‚\n4.å¯ä»¥è¯´æ˜¯è¿è¡Œäº†å¤šä¸ªsetup.shå®‰è£…çš„Ingress controllerçš„å®ä¾‹ã€‚\n5.åº”è¯¥å…ˆå®‰è£…ï¼Œå…·å¤‡äº†Ingress controlleréœ€è¦çš„å¤šä¸ªèµ„æºåæ‰èƒ½éƒ¨ç½²ã€‚\n6.Ingress controlleræ˜¯ä¸€ä¸ªå¤§çš„æ¦‚å¿µï¼Œ nginx Ingress controlleræ˜¯å®ƒçš„ä¸€ä¸ªå…·ä½“å®ç°ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1683243642,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1545647,"avatar":"https://static001.geekbang.org/account/avatar/00/17/95/af/b7f8dc43.jpg","nickname":"æ‹“å±±","note":"","ucode":"11FE9CF3821898","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":617364,"discussion_content":"å“ˆå“ˆ è°¢è°¢è€å¸ˆï¼Œææ‡‚è¿™äº›æ¦‚è§ˆåï¼Œæˆ‘å·²ç»æˆåŠŸé…ç½®æ•°ä¸ªingress-controläº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1683531249,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æµ™æ±Ÿ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":373206,"user_name":"Albert","can_delete":false,"product_type":"c1","uid":1047856,"ip_address":"åŒ—äº¬","ucode":"0BE897D3EE9271","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fd/30/83badcc2.jpg","comment_is_top":false,"comment_ctime":1682242793,"is_pvip":false,"replies":[{"id":136333,"content":"great","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1682307158,"ip_address":"ä¸Šæµ·","comment_id":373206,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100114501,"comment_content":"å¯èƒ½ç‰ˆæœ¬æ›´æ–°ï¼Œå»ºè®®æŒ‰ç…§å®˜æ–¹æ•™ç¨‹æ¥ï¼šhttps:&#47;&#47;docs.nginx.com&#47;nginx-ingress-controller&#47;installation&#47;installation-with-manifests&#47;\n\néœ€è¦8ä¸ªæ–‡ä»¶\n\nkubectl apply -f common&#47;ns-and-sa.yaml\nkubectl apply -f rbac&#47;rbac.yaml\nkubectl apply -f common&#47;nginx-config.yaml\nkubectl apply -f common&#47;default-server-secret.yaml\n\nkubectl apply -f common&#47;crds&#47;k8s.nginx.org_virtualservers.yaml\nkubectl apply -f common&#47;crds&#47;k8s.nginx.org_virtualserverroutes.yaml\nkubectl apply -f common&#47;crds&#47;k8s.nginx.org_transportservers.yaml\nkubectl apply -f common&#47;crds&#47;k8s.nginx.org_policies.yaml\n\nå…¶ä¸­rbac&#47;rbac.yamlå»ºè®®ä½¿ç”¨æœ€æ–°ç‰ˆhttps:&#47;&#47;github.com&#47;nginxinc&#47;kubernetes-ingress&#47;blob&#47;main&#47;deployments&#47;rbac&#47;rbac.yamlï¼Œå¦åˆ™podæ— æ³•å¯åŠ¨ï¼ŒæŠ¥é”™ï¼šendpointslices.discovery.k8s.io is forbidden\n","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":615499,"discussion_content":"great","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1682307159,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":371283,"user_name":"wu526","can_delete":false,"product_type":"c1","uid":1022129,"ip_address":"é‡åº†","ucode":"69282EB175B48E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/98/b1/f89a84d0.jpg","comment_is_top":false,"comment_ctime":1679740497,"is_pvip":false,"replies":[{"id":135470,"content":"åœ¨stackoverflowä¸Šæœåˆ°äº†ä¸€ä¸ªç±»ä¼¼çš„é—®é¢˜ï¼Œå¯ä»¥å‚è€ƒã€‚\nhttps:&#47;&#47;stackoverflow.com&#47;questions&#47;51154911&#47;kubectl-exec-results-in-error-unable-to-upgrade-connection-pod-does-not-exi","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1679901463,"ip_address":"ä¸Šæµ·","comment_id":371283,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100114501,"comment_content":"ç½—è€å¸ˆï¼Œæˆ‘ç°åœ¨é‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œä½¿ç”¨ kubectl get pod æ˜¯å¯ä»¥çœ‹åˆ°podçš„, å‡è®¾è¯¥podçš„åç§°æ˜¯poda, ä½¿ç”¨ kubectl describe pod poda ä¹Ÿæ˜¯å¯ä»¥çœ‹åˆ°æ­£å¸¸ä¿¡æ¯çš„ï¼Œä½¿ç”¨docker exec -ti &lt;container-id&gt; sh æ˜¯å¯ä»¥è¿›å…¥è¯¥å®¹å™¨çš„ï¼Œ ä½†æ˜¯ä½¿ç”¨ kubectl exec poda -- sh æç¤º error: unable to upgrade connection: pod does not exist\n\næˆ‘çš„ç¯å¢ƒæ˜¯: Virtualbox è¿è¡Œçš„ä¸¤å° ubuntu 22.04, ä½¿ç”¨çš„æ˜¯ kubeadm, k8s=v1.23.3ï¼›\nå¸Œæœ›è€å¸ˆèƒ½ç»™ä¸ªæ€è·¯ï¼Œå¦‚ä½•è§£å†³å‘¢ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":611006,"discussion_content":"åœ¨stackoverflowä¸Šæœåˆ°äº†ä¸€ä¸ªç±»ä¼¼çš„é—®é¢˜ï¼Œå¯ä»¥å‚è€ƒã€‚\nhttps://stackoverflow.com/questions/51154911/kubectl-exec-results-in-error-unable-to-upgrade-connection-pod-does-not-exi","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1679901463,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":370280,"user_name":"åŠç¼˜å›","can_delete":false,"product_type":"c1","uid":1140265,"ip_address":"ä¸Šæµ·","ucode":"1266C4E35180A2","user_header":"https://static001.geekbang.org/account/avatar/00/11/66/29/8b471f9d.jpg","comment_is_top":false,"comment_ctime":1678673167,"is_pvip":false,"replies":[{"id":135032,"content":"éƒ¨ç½²æ¯”è¾ƒç®€å•ï¼Œæ²¡æœ‰ç‰¹åˆ«çš„ï¼Œå°±æŒ‰ç…§æ­£æ–‡é‡Œçš„æ­¥éª¤ä½¿ç”¨YAMLï¼Œå®ç°çš„è¯å°±æ¯”è¾ƒéº»çƒ¦äº†ï¼Œä¸šç•ŒçŸ¥åçš„Ingress controller éƒ½æ˜¯åŸºäºNginxå¼€å‘çš„ï¼Œå¯ä»¥çœ‹çœ‹GitHubé¡¹ç›®ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1678701066,"ip_address":"ä¸Šæµ·","comment_id":370280,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100114501,"comment_content":"æ¯æ¬¡éƒ½æ˜¯åœ¨ignressControllerè¿™é‡Œå¡ä½ï¼Œè€å¸ˆèƒ½è¯¦ç»†è®²ä¸€ä¸‹å—ï¼Œå…³äºéƒ¨ç½²ä»¥åŠå¦‚ä½•è‡ªå·±å®ç°ä¸€ä¸ªç®€å•çš„ingressControllerã€‚","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":608855,"discussion_content":"éƒ¨ç½²æ¯”è¾ƒç®€å•ï¼Œæ²¡æœ‰ç‰¹åˆ«çš„ï¼Œå°±æŒ‰ç…§æ­£æ–‡é‡Œçš„æ­¥éª¤ä½¿ç”¨YAMLï¼Œå®ç°çš„è¯å°±æ¯”è¾ƒéº»çƒ¦äº†ï¼Œä¸šç•ŒçŸ¥åçš„Ingress controller éƒ½æ˜¯åŸºäºNginxå¼€å‘çš„ï¼Œå¯ä»¥çœ‹çœ‹GitHubé¡¹ç›®ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1678701066,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":368141,"user_name":"æå®¢é…±é…±","can_delete":false,"product_type":"c1","uid":2934665,"ip_address":"å››å·","ucode":"18CDC1DB754D58","user_header":"https://static001.geekbang.org/account/avatar/00/2c/c7/89/16437396.jpg","comment_is_top":false,"comment_ctime":1675931607,"is_pvip":false,"replies":[{"id":134056,"content":"good","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1675988095,"ip_address":"ä¸Šæµ·","comment_id":368141,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100114501,"comment_content":"kic.ymlæ–‡ä»¶åœ¨è¿™é‡Œï¼šhttps:&#47;&#47;github.com&#47;nginxinc&#47;kubernetes-ingress&#47;blob&#47;main&#47;deployments&#47;deployment&#47;nginx-ingress.yaml\nå‚è€ƒæ–‡æ¡£ï¼šhttps:&#47;&#47;docs.nginx.com&#47;nginx-ingress-controller&#47;installation&#47;installation-with-manifests\nä¿®æ”¹éƒ¨åˆ†ï¼š\n\napiVersion: apps&#47;v1\nkind: Deployment\nmetadata:\n  name: ngx-kic-dep\n  namespace: nginx-ingress\n\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app: ngx-kic-dep\n\n  template:\n    metadata:\n      labels:\n        app: ngx-kic-dep\n    ...\n    spec:\n      containers:\n      - image: nginx&#47;nginx-ingress:2.2-alpine\n        ...\n        args:\n          - -ingress-class=ngx-ink\n          - -enable-custom-resources=false\n          - -nginx-configmaps=nginx-ingress&#47;nginx-config","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":603147,"discussion_content":"good","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1675988095,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":367645,"user_name":"ä¸€è¡Œ","can_delete":false,"product_type":"c1","uid":1305810,"ip_address":"æ²³å—","ucode":"849B58C31455DC","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/prLO6VIcvsXMibOichyNgeMmgDlh8nS7q4F9a0PCkrL0OypFj0dQicDMRH0El7sdOF6srhJyKsfRNQJe10IJwHhoQ/132","comment_is_top":false,"comment_ctime":1675397339,"is_pvip":false,"replies":[{"id":133878,"content":"great","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1675408423,"ip_address":"æ¾³å¤§åˆ©äºš","comment_id":367645,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100114501,"comment_content":"1. å››å±‚è´Ÿè½½å‡è¡¡ï¼ˆServiceï¼‰ä¸ä¸ƒå±‚è´Ÿè½½å‡è¡¡ï¼ˆIngressï¼‰æœ‰å“ªäº›å¼‚åŒç‚¹ï¼Ÿ\n\nç­”ï¼šå››å±‚ä¸ä¸ƒå±‚ï¼Œå¯¹åº”OSIç½‘ç»œå‚è€ƒæ¨¡å‹é‡Œçš„å±‚æ¬¡ã€‚ å››å±‚ä¸ä¼šè§£ææ•°æ®åŒ…å†…å®¹ï¼Œåªåšæ•°æ®åŒ…çš„å¯»å€è½¬å‘ï¼Œåœ¨æ•ˆç‡ä¸Šæ¯”ä¸ƒå±‚è¦é«˜ã€‚ ä½†æ­£æ˜¯ç”±äºä¸è§£ææ•°æ®åŒ…çš„å†…å®¹ï¼Œæ‰€ä»¥å››å±‚è´Ÿè½½å‡è¡¡èƒ½åšçš„äº‹ç›¸æ¯”ä¸ƒå±‚è¦å°‘å¾ˆå¤šã€‚ ä¸ƒå±‚ç›¸æ¯”å››å±‚ï¼Œæ›´åŠ è´´è¿‘ä¸šåŠ¡ï¼Œé€šè¿‡è§£å†³æ•°æ®åŒ…çš„å†…å®¹ï¼Œæˆ‘ä»¬å¯ä»¥åšçš„äº‹ï¼Œä¹Ÿå°±æ›´å¤šã€‚ ä½†æ•ˆç‡ä¹Ÿå°±æ›´å·®ä¸€äº›ã€‚ \n\næˆ‘è§‰å¾—å¯ä»¥æŠŠå››å±‚çš„è´Ÿè½½å‡è¡¡ç†è§£ä¸ºåŸºç¡€è®¾æ–½èµ„æºï¼Œä¸ƒå±‚ç†è§£ä¸ºä¸šåŠ¡ä¸­é—´ä»¶èµ„æºã€‚ \n\n2. ä½ è®¤ä¸º Ingress Controller ä½œä¸ºé›†ç¾¤çš„æµé‡å…¥å£è¿˜åº”è¯¥åšå“ªäº›äº‹æƒ…ï¼Ÿ\n\né™¤äº†æµé‡çš„è½¬å‘ï¼Œæˆ‘è§‰å¾—Ingress Controllerä½œä¸ºç½‘å…³å…¥å£ï¼Œä¹Ÿèƒ½åšä¸€äº›å®‰å…¨æ–¹é¢çš„å·¥ä½œã€‚","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":601769,"discussion_content":"great","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1675408423,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ¾³å¤§åˆ©äºš","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":366941,"user_name":"Lorry","can_delete":false,"product_type":"c1","uid":1066409,"ip_address":"è¾½å®","ucode":"BD4754D0F1D786","user_header":"https://static001.geekbang.org/account/avatar/00/10/45/a9/3d48d6a2.jpg","comment_is_top":false,"comment_ctime":1674640168,"is_pvip":false,"replies":[{"id":133704,"content":"ç”¨â€œkubectl optionsâ€å¯ä»¥çœ‹åˆ°å¯¹dry-runçš„è§£é‡Šï¼Œè´´ä¸€ä¸‹åŸæ–‡ï¼š\n      --dry-run=&#39;none&#39;: Must be &quot;none&quot;, &quot;server&quot;, or &quot;client&quot;. If client strategy, only print the object that would be\nsent, without sending it. If server strategy, submit server-side request without persisting the resource.","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1674652047,"ip_address":"åŒ—äº¬","comment_id":366941,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100114501,"comment_content":"è¯·é—®å„ä½å¤§ä½¬ï¼Œâ€--dry-run=client&quot;æ€ä¹ˆç†è§£ï¼Œçœ‹äº†å®˜ç½‘çš„è§£é‡Šä»¥åŠä¸€äº›å¸–å­æ„Ÿè§‰çœ‹çš„äº‘é‡Œé›¾é‡Œï¼Œdry-runé€‰é¡¹ä¸ºclientå’Œserveræœ‰ä»€ä¹ˆåŒºåˆ«çš„ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":600635,"discussion_content":"ç”¨â€œkubectl optionsâ€å¯ä»¥çœ‹åˆ°å¯¹dry-runçš„è§£é‡Šï¼Œè´´ä¸€ä¸‹åŸæ–‡ï¼š\n      --dry-run=&#39;none&#39;: Must be &#34;none&#34;, &#34;server&#34;, or &#34;client&#34;. If client strategy, only print the object that would be\nsent, without sending it. If server strategy, submit server-side request without persisting the resource.","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1674652047,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":366872,"user_name":"Geek_60e02d","can_delete":false,"product_type":"c1","uid":3388109,"ip_address":"ç”˜è‚ƒ","ucode":"99C0849CD1981E","user_header":"","comment_is_top":false,"comment_ctime":1674489526,"is_pvip":false,"replies":[{"id":133700,"content":"namespaceçš„ä½œç”¨å°±æ˜¯éš”ç¦»ï¼Œé¿å…æŠŠå¯¹è±¡éƒ½æ”¾åœ¨ä¸€èµ·ï¼Œæ–¹ä¾¿ç®¡ç†ï¼Œå‡å°‘æ··ä¹±ã€‚\n\nå¦‚æœæ„¿æ„ï¼ŒæŠŠIngress Classå’ŒIngressæ”¾åˆ°å…¶ä»–namespaceä¹Ÿæ˜¯å®Œå…¨å¯ä»¥çš„ï¼Œä½¿ç”¨defaultåªæ˜¯çœäº‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1674604397,"ip_address":"åŒ—äº¬","comment_id":366872,"utype":1}],"discussion_count":2,"race_medal":0,"score":5,"product_id":100114501,"comment_content":"namespaceçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆingress controllerè¦å•ç‹¬ä½¿ç”¨ä¸€ä¸ªnamespaceå‘¢ï¼Ÿè€Œingress classå’Œingresså´ä»ç„¶æ˜¯default namespace","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":600599,"discussion_content":"namespaceçš„ä½œç”¨å°±æ˜¯éš”ç¦»ï¼Œé¿å…æŠŠå¯¹è±¡éƒ½æ”¾åœ¨ä¸€èµ·ï¼Œæ–¹ä¾¿ç®¡ç†ï¼Œå‡å°‘æ··ä¹±ã€‚\n\nå¦‚æœæ„¿æ„ï¼ŒæŠŠIngress Classå’ŒIngressæ”¾åˆ°å…¶ä»–namespaceä¹Ÿæ˜¯å®Œå…¨å¯ä»¥çš„ï¼Œä½¿ç”¨defaultåªæ˜¯çœäº‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1674604397,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1066409,"avatar":"https://static001.geekbang.org/account/avatar/00/10/45/a9/3d48d6a2.jpg","nickname":"Lorry","note":"","ucode":"BD4754D0F1D786","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":600592,"discussion_content":"é€»è¾‘ä¸Šå¯¹äºå¯¹è±¡è¿›è¡Œåˆ’åˆ†ï¼Œæ¯”å¦‚ä¸¤ä¸ªåŒåçš„ç»„ä»¶ï¼Œå¯ä»¥åˆ†é…åˆ°ä¸åŒçš„å‘½åç©ºé—´åŠ ä»¥åŒºåˆ†ï¼›æ²¡æœ‰åˆ†é…å‘½åç©ºé—´çš„åˆ†æ‰¹åˆ°defaultå‘½åç©ºé—´ã€‚\n\nå‘ç°ç¬¬ä¸‰æ–¹çš„å¾ˆå¤šæœåŠ¡éƒ½æ˜¯ä¼šæœ‰æ˜ç¡®çš„å‘½åç©ºé—´ï¼Œæ¯”å¦‚Flannelï¼Œnginx-ingress-controllerï¼›K8så†…ç½®çš„æœåŠ¡åˆ™å¾ˆå¤šéƒ½æ˜¯æ²¡æœ‰æ˜¾å¼çš„æŒ‡å®šå‘½åç©ºé—´ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1674570079,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"è¾½å®","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":366380,"user_name":"Geek_710b43","can_delete":false,"product_type":"c1","uid":3215309,"ip_address":"åŒ—äº¬","ucode":"187EFF9E3CB325","user_header":"","comment_is_top":false,"comment_ctime":1673669831,"is_pvip":false,"replies":[{"id":133501,"content":"çœ‹æ¥è¿™æ˜¯å½“åˆå†™ä½œæ—¶çš„å¤±è¯¯äº†ï¼ŒæŠ±æ­‰ã€‚\n\nGitHubä¸Šæœ‰ä¸€ä¸ªè„šæœ¬ï¼Œè¿è¡Œå®ƒå°±å¯ä»¥å®‰è£…æ‰€æœ‰çš„YAML äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1673684990,"ip_address":"åŒ—äº¬","comment_id":366380,"utype":1}],"discussion_count":2,"race_medal":0,"score":5,"product_id":100114501,"comment_content":"ingree-controlleråœ¨è€å¸ˆæ‰§è¡Œçš„4ä¸ªåŸºç¡€ä¸Šè¿˜éœ€è¦æ‰§è¡Œå¦‚ä¸‹çš„,ä¸ç„¶Nginx-ingress ä¼šæŠ¥router...,policy...ä¹‹ç±»çš„èµ„æºæ‰¾ä¸åˆ°é”™è¯¯ï¼š\n    dongyunqi@mongodaddy:~&#47;k8s&#47;teacher&#47;k8s_study&#47;ingress&#47;common$ tree\n.\nâ”œâ”€â”€ crds\nâ”‚Â Â  â”œâ”€â”€ k8s.nginx.org_globalconfigurations.yaml\nâ”‚Â Â  â”œâ”€â”€ k8s.nginx.org_policies.yaml\nâ”‚Â Â  â”œâ”€â”€ k8s.nginx.org_transportservers.yaml\nâ”‚Â Â  â”œâ”€â”€ k8s.nginx.org_virtualserverroutes.yaml\nâ”‚Â Â  â””â”€â”€ k8s.nginx.org_virtualservers.yaml\nâ”œâ”€â”€ default-server-secret.yaml\nâ”œâ”€â”€ nginx-config.yaml\nâ””â”€â”€ ns-and-sa.yaml\n\n1 directory, 8 files\ndongyunqi@mongodaddy:~&#47;k8s&#47;teacher&#47;k8s_study&#47;ingress&#47;common$ kubectl apply -f crds&#47;k8s.nginx.org_globalconfigurations.yaml\ncustomresourcedefinition.apiextensions.k8s.io&#47;globalconfigurations.k8s.nginx.org created\ndongyunqi@mongodaddy:~&#47;k8s&#47;teacher&#47;k8s_study&#47;ingress&#47;common$ kubectl apply -f crds&#47;k8s.nginx.org_policies.yaml\ncustomresourcedefinition.apiextensions.k8s.io&#47;policies.k8s.nginx.org created\ndongyunqi@mongodaddy:~&#47;k8s&#47;teacher&#47;k8s_study&#47;ingress&#47;common$ kubectl apply -f crds&#47;k8s.nginx.org_transportservers.yaml\ncustomresourcedefinition.apiextensions.k8s.io&#47;transportservers.k8s.nginx.org created\ndongyunqi@mongodaddy:~&#47;k8s&#47;teacher&#47;k8s_study&#47;ingress&#47;common$ kubectl apply -f crds&#47;k8s.nginx.org_virtualserverroutes.yaml\ncustomresourcedefinition.apiextensions.k8s.io&#47;virtualserverroutes.k8s.nginx.org created\ndongyunqi@mongodaddy:~&#47;k8s&#47;teacher&#47;k8s_study&#47;ingress&#47;common$ kubectl apply -f crds&#47;k8s.nginx.org_virtualservers.yaml\ncustomresourcedefinition.apiextensions.k8s.io&#47;virtualservers.k8s.nginx.org created\n\u0000","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":599664,"discussion_content":"çœ‹æ¥è¿™æ˜¯å½“åˆå†™ä½œæ—¶çš„å¤±è¯¯äº†ï¼ŒæŠ±æ­‰ã€‚\n\nGitHubä¸Šæœ‰ä¸€ä¸ªè„šæœ¬ï¼Œè¿è¡Œå®ƒå°±å¯ä»¥å®‰è£…æ‰€æœ‰çš„YAML äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1673684990,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":3215309,"avatar":"","nickname":"Geek_710b43","note":"","ucode":"187EFF9E3CB325","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":599672,"discussion_content":"å…¶å®è¿™æŒºå¥½ï¼Œä¸€è·¯cvä¸‹æ¥ä¹Ÿæœªå¿…æ˜¯å¥½äº‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1673689118,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":599664,"ip_address":"åŒ—äº¬","group_id":0},"score":599672,"extra":""}]}]},{"had_liked":false,"id":366332,"user_name":"aLong","can_delete":false,"product_type":"c1","uid":2409553,"ip_address":"åŒ—äº¬","ucode":"11DB1B9C579811","user_header":"https://static001.geekbang.org/account/avatar/00/24/c4/51/5bca1604.jpg","comment_is_top":false,"comment_ctime":1673587120,"is_pvip":false,"replies":[{"id":133483,"content":"ä»å¤±è´¥ä¸­å¸å–ç»éªŒï¼Œæ›´å¿«æˆé•¿ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1673588966,"ip_address":"åŒ—äº¬","comment_id":366332,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100114501,"comment_content":"ç»™ingress controllerå†™serviceé—¹äº†ä¸€ä¸ªä¹Œé¾™ï¼Œä¸ŠèŠ‚è¯¾å­¦serviceæ—¶å€™ï¼Œæˆ‘ä¸»æœºå†™äº†ä¸€ä¸ªhostæŒ‡å‘masterã€‚è¿™æ ·ä¸ŠèŠ‚è¯¾çš„serviceæš´éœ²çš„ç«¯å£å°±åœ¨ç¬”è®°æœ¬æµè§ˆå™¨è®¿é—®åˆ°ã€‚ä½†æ˜¯æˆ‘åˆ›å»ºçš„ingress controllerçš„serviceæ²¡æœ‰é…ç½®hostã€‚ ä½¿ç”¨ä¹‹å‰çš„åœ°å€è™½ç„¶èƒ½è§£æåˆ°ä¸»æœºä½†æ˜¯uriä¸å¯¹ã€‚ä½¿ç”¨ä¹‹å‰çš„uriè®¿é—®ingress controllerçš„ç«¯å£å·404ã€‚çœ‹äº†å¥½å‡ éç»ˆäºçŸ¥é“äº†ï¼Œhostå†™äº†ä¸€ä¸ªngx.testçš„å°±å¯ä»¥äº†ã€‚ğŸ˜„é©¬è™äº†ã€‚ çœ‹åˆ°é‚£å¥ä¸èƒ½é€šè¿‡IPè®¿é—®æ‰æƒ³èµ·æ¥æˆ‘æ²¡å†™ã€‚","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":599556,"discussion_content":"ä»å¤±è´¥ä¸­å¸å–ç»éªŒï¼Œæ›´å¿«æˆé•¿ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1673588966,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":364714,"user_name":"ArcheanEon","can_delete":false,"product_type":"c1","uid":1989760,"ip_address":"åŒ—äº¬","ucode":"02831EE928823C","user_header":"https://static001.geekbang.org/account/avatar/00/1e/5c/80/d90e0151.jpg","comment_is_top":false,"comment_ctime":1671375562,"is_pvip":false,"replies":[{"id":132764,"content":"ingressç®¡ç†åªèƒ½åˆ°Serviceçº§åˆ«ï¼Œä¸èƒ½æŒ‡å®špodã€‚\n\nå¦‚æœä¸ç”¨NodePortå°±å¾—ç”¨loadbalanceräº†ï¼Œæˆ‘ä»¬çš„å®éªŒç¯å¢ƒæš‚æ—¶åšä¸åˆ°ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1671406307,"ip_address":"åŒ—äº¬","comment_id":364714,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100114501,"comment_content":"è¯·é—®è€å¸ˆé…ç½®äº†Ingressä¹‹åï¼Œå¦‚æœè®¾ç½®ä¸åŒçš„äºŒçº§åŸŸå,æ€ä¹ˆæ ·è®¾ç½®æ‰èƒ½å¯¹åº”ä¸åŒçš„pod. æ¯”å¦‚ç°åœ¨é…ç½®å¥½ä¹‹åçš„è®¿é—®æ–¹å¼æ˜¯  äºŒçº§åŸŸå.åŸŸå:NodePortçš„ç«¯å£, ä½†æ˜¯æœ‰åŠæ³•ç›´æ¥è¾“å…¥ äºŒçº§åŸŸå.åŸŸå  è¿™ç§éšè—ç«¯å£å·çš„æ–¹å¼å—. å°±åƒnginxé‡Œé…ç½®å¤šä¸ªä¸€æ ·.","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":597037,"discussion_content":"ingressç®¡ç†åªèƒ½åˆ°Serviceçº§åˆ«ï¼Œä¸èƒ½æŒ‡å®špodã€‚\n\nå¦‚æœä¸ç”¨NodePortå°±å¾—ç”¨loadbalanceräº†ï¼Œæˆ‘ä»¬çš„å®éªŒç¯å¢ƒæš‚æ—¶åšä¸åˆ°ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1671406307,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":363912,"user_name":"Apple_d39574","can_delete":false,"product_type":"c1","uid":3038791,"ip_address":"ä¸Šæµ·","ucode":"5CC841D6F69B82","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/mvvjzu4D1gJl8c9lnMMTatOou2EUsWCe4XiclyUOwk2rUawwqd6KKV8z9bSRMnD3ibQPUCIZUQOAkKAaKX0Ncaibw/132","comment_is_top":false,"comment_ctime":1670335005,"is_pvip":false,"replies":[{"id":132287,"content":"éƒ½åœ¨GitHubé¡¹ç›®é‡Œï¼Œåº”è¯¥æ˜¯æœ‰çš„ï¼Œçœ‹ä¸€ä¸‹è¯¾å‰å‡†å¤‡é‚£ä¸€èŠ‚ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1670381146,"ip_address":"ä¸Šæµ·","comment_id":363912,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100114501,"comment_content":"è€å¸ˆï¼Œkic.yml è¿™ä¸ªæ–‡ä»¶æ‰¾ä¸åˆ°ï¼Œçœ‹äº†ä¸Šé¢åŒå­¦å‘çš„é“¾æ¥ï¼Œä¹Ÿæ²¡æœ‰äº†","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":595799,"discussion_content":"éƒ½åœ¨GitHubé¡¹ç›®é‡Œï¼Œåº”è¯¥æ˜¯æœ‰çš„ï¼Œçœ‹ä¸€ä¸‹è¯¾å‰å‡†å¤‡é‚£ä¸€èŠ‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1670381146,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":363892,"user_name":"æ³½","can_delete":false,"product_type":"c1","uid":2858725,"ip_address":"ä¸Šæµ·","ucode":"44A1D076F59D60","user_header":"https://static001.geekbang.org/account/avatar/00/2b/9e/e5/9e732ec1.jpg","comment_is_top":false,"comment_ctime":1670316810,"is_pvip":false,"replies":[{"id":132269,"content":"goodã€‚\n\nIngressç›®å½•é‡Œè¿˜æœ‰ä¸€ä¸ªsetup.shï¼Œè¿è¡Œå®ƒæ›´æ–¹ä¾¿ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1670318149,"ip_address":"ä¸Šæµ·","comment_id":363892,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100114501,"comment_content":"çŠ¶æ€å§‹ç»ˆä¸æ˜¯readyçš„å°ä¼™ä¼´æ³¨æ„äº†\nä¸‹è½½è€å¸ˆçš„githubæä¾›çš„æ–‡ä»¶ æ‰¾åˆ° ingressç›®å½•æ•´ä¸ªæ‹‰å€’æœåŠ¡å™¨ä¸­å¹¶åˆ‡æ¢åˆ°ingressç›®å½•\næ‰§è¡Œä¸‹é¢çš„å‘½ä»¤å°±okäº†\nkubectl apply -f common&#47;crds","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":595724,"discussion_content":"goodã€‚\n\nIngressç›®å½•é‡Œè¿˜æœ‰ä¸€ä¸ªsetup.shï¼Œè¿è¡Œå®ƒæ›´æ–¹ä¾¿ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1670318150,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":363237,"user_name":"-Damon","can_delete":false,"product_type":"c1","uid":3213788,"ip_address":"åŒ—äº¬","ucode":"2F929375714996","user_header":"https://static001.geekbang.org/account/avatar/00/31/09/dc/656bd4dd.jpg","comment_is_top":false,"comment_ctime":1669386892,"is_pvip":false,"replies":[{"id":132067,"content":"å¾ˆå¥½çš„æé†’ï¼ŒæŒæ¡äº†åŸºæœ¬çš„Ingressç”¨æ³•åè¿˜è¦ä»”ç»†å¼„æ‡‚å®ƒé‡Œé¢çš„å„ä¸ªå­—æ®µã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1669419877,"ip_address":"åŒ—äº¬","comment_id":363237,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100114501,"comment_content":"å¦‚æœä¸æ˜¯ç²¾ç¡®åŒ¹é… URL è·¯å¾„ï¼ŒpathTypeè¦æ”¹æˆPrefixï¼Œä¸ç„¶è®¿é—®ä¼šè¸©å‘ï¼Œæ—¥å¿—æç¤ºï¼šopen() &quot;&#47;etc&#47;nginx&#47;html&#47;ä½ è®¿é—®çš„path&quot; failed (2: No such file or directory)","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":594799,"discussion_content":"å¾ˆå¥½çš„æé†’ï¼ŒæŒæ¡äº†åŸºæœ¬çš„Ingressç”¨æ³•åè¿˜è¦ä»”ç»†å¼„æ‡‚å®ƒé‡Œé¢çš„å„ä¸ªå­—æ®µã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1669419877,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":362968,"user_name":"...","can_delete":false,"product_type":"c1","uid":1896681,"ip_address":"ä¸Šæµ·","ucode":"E3694D4CED77E0","user_header":"https://static001.geekbang.org/account/avatar/00/1c/f0/e9/1ff0a3d5.jpg","comment_is_top":false,"comment_ctime":1669086136,"is_pvip":false,"replies":[{"id":132024,"content":"è¿™ä¸ªæ˜¯çœç•¥çš„å†…å®¹ï¼Œå®é™…çš„YAML å†…å®¹å¤ªå¤šï¼Œå°±æ²¡æœ‰å®Œå…¨è´´å‡ºæ¥ï¼Œè¦å»GitHubä¸Šæ‰¾åˆ°å®Œæ•´ç‰ˆã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1669094137,"ip_address":"ä¸Šæµ·","comment_id":362968,"utype":1}],"discussion_count":3,"race_medal":0,"score":6,"product_id":100114501,"comment_content":"Ingress Controller  ymlé‡Œçš„...ä¸‰ä¸ªç‚¹è¡¨ç¤ºä»€ä¹ˆç‰¹æ®Šå«ä¹‰å‘€ã€‚","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":594488,"discussion_content":"è¿™ä¸ªæ˜¯çœç•¥çš„å†…å®¹ï¼Œå®é™…çš„YAML å†…å®¹å¤ªå¤šï¼Œå°±æ²¡æœ‰å®Œå…¨è´´å‡ºæ¥ï¼Œè¦å»GitHubä¸Šæ‰¾åˆ°å®Œæ•´ç‰ˆã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1669094137,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":594802,"discussion_content":"éƒ½åœ¨GitHubé¡¹ç›®é‡Œã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1669426066,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1896681,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/f0/e9/1ff0a3d5.jpg","nickname":"...","note":"","ucode":"E3694D4CED77E0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":594489,"discussion_content":"è€å¸ˆï¼Œéº»çƒ¦ç»™ä¸€ä¸‹é“¾æ¥ï¼Œå¡è¿™é‡Œäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1669094196,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":362963,"user_name":"...","can_delete":false,"product_type":"c1","uid":1896681,"ip_address":"ä¸Šæµ·","ucode":"E3694D4CED77E0","user_header":"https://static001.geekbang.org/account/avatar/00/1c/f0/e9/1ff0a3d5.jpg","comment_is_top":false,"comment_ctime":1669083436,"is_pvip":false,"replies":[{"id":132023,"content":"æ­£æ–‡é‡Œçš„Ingress Controllerä»£ç åªæ˜¯ç¤ºä¾‹ï¼Œæœ‰çœç•¥çš„ï¼Œåº”è¯¥ä¸ŠGitHubä¸Šæ‰¾åˆ°å®Œæ•´çš„YAMLï¼Œ æˆ–è€…ä»Nginxå®˜æ–¹YAML é‡Œæˆªå–ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1669094089,"ip_address":"ä¸Šæµ·","comment_id":362963,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100114501,"comment_content":"è€å¸ˆï¼Œé‚£ä¸ªcontrolä»£ç ï¼Œæˆ‘æ‹·è´ä¸‹æ¥åï¼Œæ‰§è¡Œä¸€ç›´æç¤ºæˆ‘è¯­æ³•é”™è¯¯ã€‚æ€ä¹ˆè§£å†³ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":594487,"discussion_content":"æ­£æ–‡é‡Œçš„Ingress Controllerä»£ç åªæ˜¯ç¤ºä¾‹ï¼Œæœ‰çœç•¥çš„ï¼Œåº”è¯¥ä¸ŠGitHubä¸Šæ‰¾åˆ°å®Œæ•´çš„YAMLï¼Œ æˆ–è€…ä»Nginxå®˜æ–¹YAML é‡Œæˆªå–ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1669094089,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":362933,"user_name":"...","can_delete":false,"product_type":"c1","uid":1896681,"ip_address":"ä¸Šæµ·","ucode":"E3694D4CED77E0","user_header":"https://static001.geekbang.org/account/avatar/00/1c/f0/e9/1ff0a3d5.jpg","comment_is_top":false,"comment_ctime":1669044349,"is_pvip":false,"replies":[{"id":132021,"content":"æœ‰çš„ï¼Œåœ¨ç›®å½•ch3é‡Œï¼Œå†æ‰¾æ‰¾çœ‹ï¼Œåº”è¯¥æ˜¯kic.ymlå§ã€‚\n\nçœ‹é”™è¯¯æç¤ºåº”è¯¥æ˜¯yamlæ ¼å¼çš„é—®é¢˜ï¼Œå¯ä»¥è‡ªå·±å°è¯•ä¿®æ­£ä¸€ä¸‹ï¼Œå†…å®¹åº”è¯¥æ˜¯æ­£ç¡®çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1669085605,"ip_address":"ä¸Šæµ·","comment_id":362933,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100114501,"comment_content":"è€å¸ˆï¼Œæ‚¨è¿™ä¸ªIngress Controller çš„ YAMLï¼Œdemoæˆ‘æ‹·è´æ‰§è¡Œå¤±è´¥ï¼ŸæŠ¥é”™\n error converting YAML to JSON: yaml: line 18: could not find expected &#39;:&#39;    è¿™ç§è¯­æ³•é—®é¢˜ä¸çŸ¥é“æ€ä¹ˆdebugã€‚ \n\nå¦å¤–ï¼Œåœ¨æ‚¨çš„githubä¸Šæ²¡æœ‰æ‰¾åˆ°æºæ–‡ä»¶ï¼Œå¯¼è‡´ä¸€ç›´è¿‡ä¸å»äº†ã€‚ã€‚ç›¼å¤ã€‚","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":594480,"discussion_content":"æœ‰çš„ï¼Œåœ¨ç›®å½•ch3é‡Œï¼Œå†æ‰¾æ‰¾çœ‹ï¼Œåº”è¯¥æ˜¯kic.ymlå§ã€‚\n\nçœ‹é”™è¯¯æç¤ºåº”è¯¥æ˜¯yamlæ ¼å¼çš„é—®é¢˜ï¼Œå¯ä»¥è‡ªå·±å°è¯•ä¿®æ­£ä¸€ä¸‹ï¼Œå†…å®¹åº”è¯¥æ˜¯æ­£ç¡®çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1669085605,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":362698,"user_name":"Bachue Zhou","can_delete":false,"product_type":"c1","uid":1494491,"ip_address":"ä¸Šæµ·","ucode":"3175754775CA32","user_header":"https://static001.geekbang.org/account/avatar/00/16/cd/db/7467ad23.jpg","comment_is_top":false,"comment_ctime":1668761973,"is_pvip":false,"replies":[{"id":131888,"content":"NodePorté»˜è®¤å°±åªèƒ½ç”¨è¿™ä¸ªåŒºé—´ï¼Œè¿™æ˜¯ä¸ºäº†é¿å…ä¸å¸¸ç”¨ç«¯å£çš„å†²çªï¼Œæ‰€ä»¥ä¸€èˆ¬è¿˜ä¼šåœ¨Kubernetesé›†ç¾¤å‰é¢å†åŠ ä¸€ä¸ªåå‘ä»£ç†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1668763571,"ip_address":"ä¸Šæµ·","comment_id":362698,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100114501,"comment_content":"ç”¨äº† Service æ¥ expose ingress-controller çš„ç«¯å£ï¼Œç»“æœç«¯å£èŒƒå›´è¿˜æ˜¯ 30000~32767 ","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":594084,"discussion_content":"NodePorté»˜è®¤å°±åªèƒ½ç”¨è¿™ä¸ªåŒºé—´ï¼Œè¿™æ˜¯ä¸ºäº†é¿å…ä¸å¸¸ç”¨ç«¯å£çš„å†²çªï¼Œæ‰€ä»¥ä¸€èˆ¬è¿˜ä¼šåœ¨Kubernetesé›†ç¾¤å‰é¢å†åŠ ä¸€ä¸ªåå‘ä»£ç†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1668763571,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":362689,"user_name":"Geek_fc4e0b","can_delete":false,"product_type":"c1","uid":2894152,"ip_address":"åŒ—äº¬","ucode":"67A7F1D7A896FF","user_header":"","comment_is_top":false,"comment_ctime":1668755887,"is_pvip":false,"replies":[{"id":131882,"content":"å¯èƒ½è¿˜æ˜¯ç¯å¢ƒå˜é‡$outçš„é—®é¢˜ï¼Œå…ˆä¸ç”¨å®ƒï¼Œç›´æ¥åœ¨å‘½ä»¤åé¢è·Ÿ--dry-run=client -o yamlã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1668757975,"ip_address":"åŒ—äº¬","comment_id":362689,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100114501,"comment_content":"è€å¸ˆå¥½ï¼šåˆ›å»ºå¤±è´¥æ˜¯æ€ä¹ˆå›äº‹ï¼Œä¸æ”¯æŒrule\n[root@master k8s]# export out=&quot;--dry-run=client -o yaml&quot;\n[root@master k8s]# kubectl create ing ngx-ing --rule=&quot;ngx.test&#47;=ngx-svc:80&quot; --class=ngx-ink $out\nError: unknown flag: --rule\nSee &#39;kubectl create --help&#39; for usage.","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":594065,"discussion_content":"å¯èƒ½è¿˜æ˜¯ç¯å¢ƒå˜é‡$outçš„é—®é¢˜ï¼Œå…ˆä¸ç”¨å®ƒï¼Œç›´æ¥åœ¨å‘½ä»¤åé¢è·Ÿ--dry-run=client -o yamlã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1668757975,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":361404,"user_name":"ç¾å¦™çš„ä»£ç ","can_delete":false,"product_type":"c1","uid":1111985,"ip_address":"ä¸Šæµ·","ucode":"9DADD72C193296","user_header":"https://static001.geekbang.org/account/avatar/00/10/f7/b1/982ea185.jpg","comment_is_top":false,"comment_ctime":1667468353,"is_pvip":true,"replies":[{"id":131438,"content":"ç†è®ºä¸Šä»»ä½•Kuberneteså¯¹è±¡çš„YAML éƒ½æ˜¯æ‰‹å†™çš„ï¼Œå¯ä»¥çœ‹æ–‡æ¡£è‡ªå·±å†™ï¼Œä¸è¿‡ä¸€èˆ¬ä¸ºäº†çœäº‹éƒ½å¯ä»¥æ‰¾ä¸ªæ¨¡æ¿æ”¹ã€‚\n\næ³¨æ„Ingress Class å’ŒIngresså¯¹è±¡ä¸ä¸€æ ·ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1667474586,"ip_address":"ä¸Šæµ·","comment_id":361404,"utype":1}],"discussion_count":1,"race_medal":1,"score":6,"product_id":100114501,"comment_content":"è€å¸ˆï¼ŒingressClass çš„ymal æ–‡ä»¶æ˜¯æ€ä¹ˆåˆ›å»ºçš„å‘¢ï¼Ÿ  æ˜¯ç”¨ingress  yamlæ–‡ä»¶ç›´æ¥æ”¹çš„å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":592543,"discussion_content":"ç†è®ºä¸Šä»»ä½•Kuberneteså¯¹è±¡çš„YAML éƒ½æ˜¯æ‰‹å†™çš„ï¼Œå¯ä»¥çœ‹æ–‡æ¡£è‡ªå·±å†™ï¼Œä¸è¿‡ä¸€èˆ¬ä¸ºäº†çœäº‹éƒ½å¯ä»¥æ‰¾ä¸ªæ¨¡æ¿æ”¹ã€‚\n\næ³¨æ„Ingress Class å’ŒIngresså¯¹è±¡ä¸ä¸€æ ·ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1667474586,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":361240,"user_name":"Demon.Lee","can_delete":false,"product_type":"c1","uid":1052859,"ip_address":"ä¸Šæµ·","ucode":"7F0E5493A8E345","user_header":"https://static001.geekbang.org/account/avatar/00/10/10/bb/f1061601.jpg","comment_is_top":false,"comment_ctime":1667357258,"is_pvip":false,"replies":[{"id":131380,"content":"åœ¨åº”ç”¨éƒ¨ç½²æ–¹é¢æˆ‘ä¸æ˜¯ä¸“å®¶ï¼Œå¯èƒ½è¿˜æ˜¯çœ‹è‡ªå·±çš„å®é™…æƒ…å†µï¼Œæˆ‘ä¸ªäººçœ‹æ³•æ˜¯å‰ç«¯åœ¨é›†ç¾¤ä¹‹å¤–ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1667369181,"ip_address":"ä¸Šæµ·","comment_id":361240,"utype":1}],"discussion_count":2,"race_medal":0,"score":6,"product_id":100114501,"comment_content":"è¯·æ•™è€å¸ˆä¸€ä¸ªéƒ¨ç½²çš„é—®é¢˜ï¼šå‰ç«¯ä»£ç ä¸åç«¯ä»£ç åœ¨k8sä½“ç³»ä¸‹æ€ä¹ˆéƒ¨ç½²æ‰æ˜¯æœ€ä½³å®è·µã€‚\n\næ¯”å¦‚æˆ‘ä»¬ç°åœ¨æœ‰ä¸€å¥— spring cloud æ¶æ„çš„å¾®æœåŠ¡åº”ç”¨ï¼Œæƒ³æ”¹é€ æˆäº‘åŸç”Ÿéƒ¨ç½²ï¼Œå…¶ä¸­å‰ç«¯å‡ ä¸ªå·¥ç¨‹ä»£ç æ”¾åœ¨ nginx ä¹‹ä¸­ï¼Œå‰ç«¯ä»£ç ç»Ÿä¸€è°ƒç”¨åç«¯çš„ xxx-gateway-service ç½‘å…³æœåŠ¡ï¼Œè¿™ä¸ªç½‘å…³æœåŠ¡å†å»è°ƒç”¨å„ç§åç«¯å¾®æœåŠ¡ã€‚\n\n1ã€ç½‘å…³æœåŠ¡å’Œåç«¯å¾®æœåŠ¡éƒ½éƒ¨ç½²åˆ° Kubernetesï¼Œç„¶åæš´éœ² serviceï¼›\n2ã€å‰ç«¯ä»£ç å‘¢ï¼Œæ”¾åˆ° Kubernetes é›†ç¾¤ä¹‹ä¸­ï¼Œè¿˜æ˜¯é›†ç¾¤ä¹‹å¤–ï¼Ÿ\n\nå‚è€ƒå®˜ç½‘ä¸Šçš„ä¾‹å­ï¼ˆhttps:&#47;&#47;kubernetes.io&#47;zh&#47;docs&#47;tasks&#47;access-application-cluster&#47;connecting-frontend-backend&#47;ï¼‰ï¼Œæˆ‘ç†è§£æ˜¯å°†å‰ç«¯ä»£ç æ”¾åœ¨nginxé‡Œé¢ï¼ŒåŒæ—¶åœ¨ nginx.conf ä¸­é…ç½®åå° api çš„åå‘ä»£ç†ï¼ˆæˆ‘çš„ç†è§£æ˜¯è§£å†³è·¨åŸŸé—®é¢˜ï¼‰ï¼Œç„¶åå°†å…¶éƒ¨ç½²ä¸ºä¸€ä¸ª podï¼Œå¹¶æš´éœ²å‡ºè¯¥å‰ç«¯å·¥ç¨‹çš„ service ip å’Œ nodePortã€‚\n1ï¼‰å¦‚æœè¿™é‡Œä¸ç›´æ¥æš´éœ²å‰ç«¯æœåŠ¡ ip å’Œ nodePortï¼Œè€Œèµ°ingressï¼Œæ˜¯å¦æœ‰å¿…è¦ï¼Œä¸ªäººæ„Ÿè§‰åˆç»•äº†ä¸€å±‚ï¼Œåº”è¯¥æ˜¯æ²¡å¿…è¦ã€‚\n2ï¼‰nginx.conf ä¸­è¦é…ç½®ç½‘å…³æœåŠ¡çš„ service åœ°å€å’Œç«¯å£ã€‚\n\nå¦‚æœæŠŠå‰ç«¯ä»£ç ä¸åŠ¨ï¼Œè¿˜æ”¾åœ¨é›†ç¾¤ä¹‹å¤–ï¼Œnginx.conf ä¸­å°±æ˜¯é…ç½®ç½‘å…³æœåŠ¡çš„ ingress åœ°å€äº†ã€‚\n\næƒ³äº†è§£è¿™ä¸€å—çš„æœ€ä½³å®è·µï¼Œéº»çƒ¦è€å¸ˆäº†ã€‚","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":592378,"discussion_content":"åœ¨åº”ç”¨éƒ¨ç½²æ–¹é¢æˆ‘ä¸æ˜¯ä¸“å®¶ï¼Œå¯èƒ½è¿˜æ˜¯çœ‹è‡ªå·±çš„å®é™…æƒ…å†µï¼Œæˆ‘ä¸ªäººçœ‹æ³•æ˜¯å‰ç«¯åœ¨é›†ç¾¤ä¹‹å¤–ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1667369182,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1052859,"avatar":"https://static001.geekbang.org/account/avatar/00/10/10/bb/f1061601.jpg","nickname":"Demon.Lee","note":"","ucode":"7F0E5493A8E345","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":592379,"discussion_content":"è°¢è°¢è€å¸ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1667369882,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":592378,"ip_address":"å®‰å¾½","group_id":0},"score":592379,"extra":""}]}]},{"had_liked":false,"id":361113,"user_name":"ybc","can_delete":false,"product_type":"c1","uid":2685834,"ip_address":"ä¸Šæµ·","ucode":"F3CD0B857B1524","user_header":"https://static001.geekbang.org/account/avatar/00/28/fb/8a/3e8f42f1.jpg","comment_is_top":false,"comment_ctime":1667230011,"is_pvip":false,"replies":[{"id":131354,"content":"great!","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1667272460,"ip_address":"ä¸Šæµ·","comment_id":361113,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100114501,"comment_content":"å¯¹äºåœ¨éƒ¨ç½²ingressä¸­é‡åˆ°ç±»ä¼¼ã€Œerror retrieving resource lock ingress-dotdev&#47;ingress-controller-leader: leases.coordination.k8s.io &quot;ingress-controller-leader&quot; is forbidden: User &quot;xxx&quot; cannot get resource &quot;leases&quot; in API group &quot;coordination.k8s.io&quot; in the namespace &quot;xxx&quot;ã€ æŠ¥é”™çš„æœ‹å‹ï¼Œå¯ä»¥åœ¨rbac.yamlæ–‡ä»¶ä¸­çš„å¯¹åº”ä½ç½®å¢åŠ ä»¥ä¸‹é…ç½®ï¼Œç„¶åé‡æ–°kubectl apply\n\n- apiGroups:\n  - coordination.k8s.io\n  resources:\n  - leases\n  verbs:\n  - get\n  - update\n  - create\n  - list\n  - watch","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":592267,"discussion_content":"great!","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1667272460,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":358476,"user_name":"alexgreenbar","can_delete":false,"product_type":"c1","uid":1003655,"ip_address":"åŒ—äº¬","ucode":"87ED7233E2767C","user_header":"https://static001.geekbang.org/account/avatar/00/0f/50/87/dde718fa.jpg","comment_is_top":false,"comment_ctime":1664348005,"is_pvip":false,"replies":[{"id":130448,"content":"æ˜¯çš„ï¼Œæ‰€ä»¥æˆ‘æ„Ÿè§‰è¿™æ–¹é¢Kubernetesè®¾è®¡çš„è¿˜æ˜¯ä¸å¤ªå®Œç¾ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1664406328,"ip_address":"åŒ—äº¬","comment_id":358476,"utype":1}],"discussion_count":1,"race_medal":0,"score":6,"product_id":100114501,"comment_content":"serviceå¯¹å¤–æš´éœ²æœåŠ¡é€šè¿‡NodePortæ–¹å¼ä¸å¤ªå¥½ï¼Œç„¶åå¼•å…¥äº†ingressï¼Œä½†æ˜¯ingressæœ¬èº«æ˜¯deploymentçš„è¯ï¼Œè¿˜å¾—å†ç»™é…ç½®ä¸€ä¸ªé’ˆå¯¹ingressçš„serviceï¼Œæš´éœ²æœåŠ¡ä¾ç„¶ä¸æ–¹ä¾¿ï¼Œè™½ç„¶çš„ç¡®é€šè¿‡ingresså¢å¼ºäº†è·¯ç”±é…ç½®","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":589087,"discussion_content":"æ˜¯çš„ï¼Œæ‰€ä»¥æˆ‘æ„Ÿè§‰è¿™æ–¹é¢Kubernetesè®¾è®¡çš„è¿˜æ˜¯ä¸å¤ªå®Œç¾ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1664406328,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":358450,"user_name":"é™ˆæ–¯ä½³","can_delete":false,"product_type":"c1","uid":1259323,"ip_address":"åŒ—äº¬","ucode":"C236F874FC767A","user_header":"https://static001.geekbang.org/account/avatar/00/13/37/3b/495e2ce6.jpg","comment_is_top":false,"comment_ctime":1664330397,"is_pvip":false,"replies":[{"id":130429,"content":"helmå¾ˆæµè¡Œï¼Œä¸è¿‡å› ä¸ºæˆ‘ä¸æ˜¯åšè¿ç»´ç®¡ç†ï¼Œæ‰€ä»¥ç”¨çš„ä¸å¤šï¼Œå®ƒæœ¬è´¨ä¸Šè¿˜æ˜¯ç”¨çš„YAML ï¼Œæ˜¯å¦ç”¨è¿˜æ˜¯è¦çœ‹è‡ªå·±å…¬å¸çš„å†³ç­–ã€‚\n\nä¸ªäººæ„Ÿè§‰helmæ¯”è¾ƒç®€å•ï¼Œå’Œdebå®‰è£…åŒ…ç±»ä¼¼ï¼Œä¼šäº†Kuberneteså­¦helmè¿˜æ˜¯æŒºå®¹æ˜“çš„ã€‚\n\nä»¥åæœ‰æœºä¼šå¯ä»¥è®²è®²æˆ‘è‡ªå·±çš„ä½“ä¼šã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1664338566,"ip_address":"åŒ—äº¬","comment_id":358450,"utype":1}],"discussion_count":3,"race_medal":0,"score":6,"product_id":100114501,"comment_content":"è€å¸ˆ ç°åœ¨nginxçš„éƒ¨ç½²æ˜¯ä¸æ˜¯æœ€å¥½éƒ½ç”¨helmæ¥éƒ¨ç½²å‘¢ï¼Ÿæ˜¯çš„è¯éœ€è¦å¦‚ä½•å­¦ä¹ Helmå‘¢ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":589016,"discussion_content":"helmå¾ˆæµè¡Œï¼Œä¸è¿‡å› ä¸ºæˆ‘ä¸æ˜¯åšè¿ç»´ç®¡ç†ï¼Œæ‰€ä»¥ç”¨çš„ä¸å¤šï¼Œå®ƒæœ¬è´¨ä¸Šè¿˜æ˜¯ç”¨çš„YAML ï¼Œæ˜¯å¦ç”¨è¿˜æ˜¯è¦çœ‹è‡ªå·±å…¬å¸çš„å†³ç­–ã€‚\n\nä¸ªäººæ„Ÿè§‰helmæ¯”è¾ƒç®€å•ï¼Œå’Œdebå®‰è£…åŒ…ç±»ä¼¼ï¼Œä¼šäº†Kuberneteså­¦helmè¿˜æ˜¯æŒºå®¹æ˜“çš„ã€‚\n\nä»¥åæœ‰æœºä¼šå¯ä»¥è®²è®²æˆ‘è‡ªå·±çš„ä½“ä¼šã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1664338566,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1259323,"avatar":"https://static001.geekbang.org/account/avatar/00/13/37/3b/495e2ce6.jpg","nickname":"é™ˆæ–¯ä½³","note":"","ucode":"C236F874FC767A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":589188,"discussion_content":"æœŸå¾…æ‚¨çš„åˆ†äº«ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1664505712,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":589016,"ip_address":"åŠ æ‹¿å¤§","group_id":0},"score":589188,"extra":""}]},{"author":{"id":1110662,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f2/86/d689f77e.jpg","nickname":"Hank_Yan","note":"","ucode":"86899B561C502B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":627179,"discussion_content":"æœŸå¾…è€å¸ˆåˆ†äº« helm","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1693882436,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":358382,"user_name":"alexgreenbar","can_delete":false,"product_type":"c1","uid":1003655,"ip_address":"åŒ—äº¬","ucode":"87ED7233E2767C","user_header":"https://static001.geekbang.org/account/avatar/00/0f/50/87/dde718fa.jpg","comment_is_top":false,"comment_ctime":1664262257,"is_pvip":false,"replies":[{"id":130419,"content":"å¥½åƒæ˜¯æ²¡æœ‰å®‰è£…VirtualServerRoute ã€TransportServerç­‰crdèµ„æºï¼Œå¯ä»¥ç”¨GitHubé¡¹ç›®é‡Œçš„setupè„šæœ¬å®Œå…¨å®‰è£…ä¸€ä¸‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1664319324,"ip_address":"åŒ—äº¬","comment_id":358382,"utype":1}],"discussion_count":2,"race_medal":0,"score":7,"product_id":100114501,"comment_content":"nginx ingress controller æ€»æ˜¯ä¸ready, çœ‹äº†ä¸‹logï¼Œå‘ç°é”™è¯¯å¦‚ä¸‹ï¼Œæ¢æˆç‰ˆæœ¬ 2.3.1ä¹Ÿæ˜¯åŒæ ·é”™è¯¯\n\n2022&#47;09&#47;27 07:01:20 [notice] 12#12: getrlimit(RLIMIT_NOFILE): 1048576:1048576\n2022&#47;09&#47;27 07:01:20 [notice] 12#12: start worker processes\n2022&#47;09&#47;27 07:01:20 [notice] 12#12: start worker process 13\nI0927 07:01:20.820385       1 leaderelection.go:248] attempting to acquire leader lease nginx-ingress&#47;nginx-ingress-leader-election...\nW0927 07:01:20.842772       1 reflector.go:324] pkg&#47;mod&#47;k8s.io&#47;client-go@v0.23.11&#47;tools&#47;cache&#47;reflector.go:167: failed to list *v1.VirtualServerRoute: the server could not find the requested resource (get virtualserverroutes.k8s.nginx.org)\nE0927 07:01:20.843127       1 reflector.go:138] pkg&#47;mod&#47;k8s.io&#47;client-go@v0.23.11&#47;tools&#47;cache&#47;reflector.go:167: Failed to watch *v1.VirtualServerRoute: failed to list *v1.VirtualServerRoute: the server could not find the requested resource (get virtualserverroutes.k8s.nginx.org)\nW0927 07:01:20.846511       1 reflector.go:324] pkg&#47;mod&#47;k8s.io&#47;client-go@v0.23.11&#47;tools&#47;cache&#47;reflector.go:167: failed to list *v1alpha1.TransportServer: the server could not find the requested resource (get transportservers.k8s.nginx.org)","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":588993,"discussion_content":"å¥½åƒæ˜¯æ²¡æœ‰å®‰è£…VirtualServerRoute ã€TransportServerç­‰crdèµ„æºï¼Œå¯ä»¥ç”¨GitHubé¡¹ç›®é‡Œçš„setupè„šæœ¬å®Œå…¨å®‰è£…ä¸€ä¸‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1664319325,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1003655,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/87/dde718fa.jpg","nickname":"alexgreenbar","note":"","ucode":"87ED7233E2767C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":589015,"discussion_content":"æˆ‘çš„æƒ…å†µä¸‹ï¼Œæ–‡ä¸­æåˆ°çš„4ä¸ªyamlæ˜¯ä¸å¤Ÿçš„ï¼Œéœ€è¦é¢å¤–é…ç½®crdï¼Œä¹Ÿéƒ½åœ¨é¡¹ç›®çš„common/crdsç›®å½•ä¸‹\n\n&gt; kubectl get crd\nNAME                                CREATED AT\npolicies.k8s.nginx.org              2022-09-28T03:42:28Z\ntransportservers.k8s.nginx.org      2022-09-28T03:37:19Z\nvirtualserverroutes.k8s.nginx.org   2022-09-28T03:37:46Z\nvirtualservers.k8s.nginx.org        2022-09-28T03:37:33Z","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1664336827,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":357749,"user_name":"Sam.å¼ æœ","can_delete":false,"product_type":"c1","uid":1132448,"ip_address":"åŒ—äº¬","ucode":"FB20554D94B250","user_header":"https://static001.geekbang.org/account/avatar/00/11/47/a0/f12115b7.jpg","comment_is_top":false,"comment_ctime":1663597265,"is_pvip":true,"replies":[{"id":130227,"content":"Nginx Ingress Controlleræ”¯æŒç°åº¦å‘å¸ƒï¼Œå¯ä»¥å‚è€ƒå®ƒçš„å®˜æ–¹æ–‡æ¡£ï¼Œç”¨CRDå®ç°ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1663639355,"ip_address":"åŒ—äº¬","comment_id":357749,"utype":1}],"discussion_count":1,"race_medal":0,"score":7,"product_id":100114501,"comment_content":" æˆ‘ä»¬k8s é‡Œæœ‰è‡ªå·±çš„å…¨å±€ç½‘å…³ï¼Œapp-&gt;é€šè¿‡åŸŸåè¯·æ±‚-&gt;ç»è¿‡ç½‘å…³ç”¨æˆ·tokenéªŒè¯-&gt;åˆ†å‘åˆ°æœ€ç»ˆçš„æœåŠ¡ ã€‚è¿™ç§æƒ…å†µç”¨ ingress nginx å®ç°ç°åº¦å‘å¸ƒï¼Œè€å¸ˆæœ‰å¥½çš„è®¾è®¡æ€è·¯ä¹ˆï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":588262,"discussion_content":"Nginx Ingress Controlleræ”¯æŒç°åº¦å‘å¸ƒï¼Œå¯ä»¥å‚è€ƒå®ƒçš„å®˜æ–¹æ–‡æ¡£ï¼Œç”¨CRDå®ç°ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663639355,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":357562,"user_name":"Sam.å¼ æœ","can_delete":false,"product_type":"c1","uid":1132448,"ip_address":"åŒ—äº¬","ucode":"FB20554D94B250","user_header":"https://static001.geekbang.org/account/avatar/00/11/47/a0/f12115b7.jpg","comment_is_top":false,"comment_ctime":1663396328,"is_pvip":true,"replies":[{"id":130157,"content":"åº”è¯¥ä¸ä¼šå§ï¼Œminikubeå’Œæ ‡å‡†çš„Kubernetesæ²¡æœ‰ä¸åŒï¼Œç…§ç€è¯¾ç¨‹é‡Œæ“ä½œå°±è¡Œäº†ï¼Œä¸è¦ç”¨å®ƒè‡ªå·±çš„addonã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1663456475,"ip_address":"åŒ—äº¬","comment_id":357562,"utype":1}],"discussion_count":1,"race_medal":0,"score":7,"product_id":100114501,"comment_content":"minikube å®‰è£… ingress-nginx çœŸéš¾\naddons.go:383] Verifying addon ingress=true in &quot;minikube&quot;\nI0917 13:49:04.897142   37252 out.go:177] ğŸ”  Verifying ingress addon...\nI0917 13:49:04.899186   37252 kapi.go:75] Waiting for pod with label &quot;app.kubernetes.io&#47;name=ingress-nginx&quot; in ns &quot;ingress-nginx&quot; ...\nI0917 13:49:04.916151   37252 kapi.go:86] Found 3 Pods for label selector app.kubernetes.io&#47;name=ingress-nginx\nI0917 13:49:04.916164   37252 kapi.go:96] waiting for pod &quot;app.kubernetes.io&#47;name=ingress-nginx&quot;, current state: Pending: [&lt;nil&gt;]","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":588008,"discussion_content":"åº”è¯¥ä¸ä¼šå§ï¼Œminikubeå’Œæ ‡å‡†çš„Kubernetesæ²¡æœ‰ä¸åŒï¼Œç…§ç€è¯¾ç¨‹é‡Œæ“ä½œå°±è¡Œäº†ï¼Œä¸è¦ç”¨å®ƒè‡ªå·±çš„addonã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663456475,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":357516,"user_name":"ç‹æœ","can_delete":false,"product_type":"c1","uid":1313316,"ip_address":"åŒ—äº¬","ucode":"073DBCB52CC570","user_header":"https://static001.geekbang.org/account/avatar/00/14/0a/24/f283ec40.jpg","comment_is_top":false,"comment_ctime":1663323970,"is_pvip":false,"replies":[{"id":130113,"content":"å½“ç„¶äº†ï¼Œè¿™ä¸ªæ˜¯Ingressçš„è·¯ç”±è§„åˆ™ï¼Œåªæœ‰åŒ¹é…äº†æ¡ä»¶æ‰ä¼šè½¬å‘åˆ°åé¢çš„æœåŠ¡ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1663332829,"ip_address":"åŒ—äº¬","comment_id":357516,"utype":1}],"discussion_count":2,"race_medal":0,"score":7,"product_id":100114501,"comment_content":"è€å¸ˆä½ å¥½ï¼Œè¯·é—®å¤–ç•Œé€šè¿‡ingressè®¿é—®æœåŠ¡æ—¶ï¼Œå¿…é¡»è¦é€šè¿‡ingressè§„åˆ™é‡Œå®šä¹‰çš„hostå—?","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":587876,"discussion_content":"å½“ç„¶äº†ï¼Œè¿™ä¸ªæ˜¯Ingressçš„è·¯ç”±è§„åˆ™ï¼Œåªæœ‰åŒ¹é…äº†æ¡ä»¶æ‰ä¼šè½¬å‘åˆ°åé¢çš„æœåŠ¡ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663332829,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1313316,"avatar":"https://static001.geekbang.org/account/avatar/00/14/0a/24/f283ec40.jpg","nickname":"ç‹æœ","note":"","ucode":"073DBCB52CC570","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":587878,"discussion_content":"é‚£ä¹ˆå…¬ç½‘è°ƒç”¨ä¸€å®šè¦èƒ½å¤ŸåŸŸåè§£æè¿™ä¸ªhostï¼Œå¦åˆ™å°±è¦æŒ‡å®šèŠ‚ç‚¹ip:portï¼Œæ˜¯è¿™æ ·å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663333050,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":587876,"ip_address":"åŒ—äº¬","group_id":0},"score":587878,"extra":""}]}]},{"had_liked":false,"id":356582,"user_name":"Obscure","can_delete":false,"product_type":"c1","uid":3171798,"ip_address":"åŒ—äº¬","ucode":"8A7464990F4178","user_header":"https://static001.geekbang.org/account/avatar/00/30/65/d6/20670fd5.jpg","comment_is_top":false,"comment_ctime":1662437420,"is_pvip":false,"replies":[{"id":129808,"content":"æ³¨æ„è¿™ä¸ªæ˜¯Nginxå…¬å¸çš„Ingress Controllerï¼Œä¸æ˜¯Kubernetesç¤¾åŒºçš„ã€‚\n\næ–‡æ¡£åœ¨è¿™é‡Œï¼šhttps:&#47;&#47;docs.nginx.com&#47;nginx-ingress-controller&#47;configuration&#47;global-configuration&#47;command-line-arguments&#47;#-ingress-class-string","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1662457200,"ip_address":"åŒ—äº¬","comment_id":356582,"utype":1}],"discussion_count":2,"race_medal":0,"score":7,"product_id":100114501,"comment_content":"è€å¸ˆï¼Œè¿™å¥è¯â€œæœ€ä¸‹é¢çš„ args è¦åŠ ä¸Š -ingress-class=ngx-inkï¼Œä¹Ÿå°±æ˜¯å‰é¢åˆ›å»ºçš„ Ingress Class çš„åå­—ï¼Œè¿™æ˜¯è®© Ingress Controller ç®¡ç† Ingress çš„å…³é”®ã€‚â€çš„å‡ºå¤„åœ¨å“ªé‡Œå•Šï¼Ÿæˆ‘çœ‹äº†å®˜ç½‘ä¸Šçš„å®‰è£…æŒ‡å—ï¼Œæ²¡æ‰¾åˆ°ã€‚ã€‚ã€‚","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":586717,"discussion_content":"æ³¨æ„è¿™ä¸ªæ˜¯Nginxå…¬å¸çš„Ingress Controllerï¼Œä¸æ˜¯Kubernetesç¤¾åŒºçš„ã€‚\n\næ–‡æ¡£åœ¨è¿™é‡Œï¼šhttps://docs.nginx.com/nginx-ingress-controller/configuration/global-configuration/command-line-arguments/#-ingress-class-string","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662457200,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":3171798,"avatar":"https://static001.geekbang.org/account/avatar/00/30/65/d6/20670fd5.jpg","nickname":"Obscure","note":"","ucode":"8A7464990F4178","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":586796,"discussion_content":"å¥½çš„ï¼Œè°¢è°¢è€å¸ˆã€‚æˆ‘æ˜¯æŒ‰ç…§https://docs.nginx.com/nginx-ingress-controller/installation/installation-with-manifests/å®‰è£…çš„ã€‚åŸæ¥è¿™å‡ ä¸ªå‚æ•°éƒ½æœ‰é»˜è®¤ å€¼å•Šï¼Œæ„Ÿè§‰è¿˜æ˜¯éƒ½ç”¨é»˜è®¤å€¼ï¼Œæœ€æ–¹ä¾¿äº†ã€‚ingress controllerçš„yamlä¸­å‘½ä»¤è¡Œå‚æ•° -ingress-classä¸å†™ï¼Œä¿æŒé»˜è®¤ï¼Œingress calssçš„yamlä¹Ÿä¿æŒå®˜æ–¹ç»™çš„ï¼Œèµ„æºçš„åå­—å°±å«nginxï¼Œä¸åšä¿®æ”¹ã€‚ingressçš„yamlä¸­ç”šè‡³éƒ½å¯ä»¥å¿½ç•¥ingressClassNameè¿™ä¸ªå­—æ®µäº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662519210,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":586717,"ip_address":"æµ™æ±Ÿ","group_id":0},"score":586796,"extra":""}]}]},{"had_liked":false,"id":354981,"user_name":"Matthew","can_delete":false,"product_type":"c1","uid":2843865,"ip_address":"åŒ—äº¬","ucode":"96093089773740","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEKSVuNarJuDhBSvHY0giaq6yriceEBKiaKuc04wCYWOuso50noqDexaPJJibJN7PHwvcQppnzsDia1icZkw/132","comment_is_top":false,"comment_ctime":1660931145,"is_pvip":false,"replies":[{"id":129123,"content":"503æ˜¯åç«¯æœåŠ¡æœ‰é—®é¢˜å§ï¼Œç”¨kubectl logsçœ‹çœ‹Nginxçš„æ—¥å¿—ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1660956930,"ip_address":"åŒ—äº¬","comment_id":354981,"utype":1}],"discussion_count":2,"race_medal":0,"score":7,"product_id":100114501,"comment_content":"æŒ‰ç…§è€å¸ˆæ–‡ä¸­çš„æ–¹æ³•ä¸€æ­¥ä¸€æ­¥æ‰§è¡Œï¼Œåœ¨æˆåŠŸåˆ›å»º Ingress Controller åï¼Œæ‰§è¡Œï¼š\nkubectl get deploy -n nginx-ingress\nkubectl get pod -n nginx-ingress\nå‘ç°ï¼š\nNAME          READY   UP-TO-DATE   AVAILABLE   AGE\nngx-kic-dep   0&#47;1     1            0           17s\n\nNAME                          READY   STATUS    RESTARTS   AGE\nngx-kic-dep-8859b7b86-s5b4l   0&#47;1     Running   0          43s\n\nç„¶åæ‰§è¡Œï¼š\nkubectl describe pod ngx-kic-dep-8859b7b86-s5b4l -n nginx-ingress\nå‘ç°ï¼š\nEvents:\n  Type     Reason     Age                 From               Message\n  ----     ------     ----                ----               -------\n  Normal   Scheduled  103s                default-scheduler  Successfully assigned nginx-ingress&#47;ngx-kic-dep-8859b7b86-s5b4l to worker\n  Normal   Pulling    102s                kubelet            Pulling image &quot;nginx&#47;nginx-ingress:2.2-alpine&quot;\n  Normal   Pulled     82s                 kubelet            Successfully pulled image &quot;nginx&#47;nginx-ingress:2.2-alpine&quot; in 19.632847723s\n  Normal   Created    81s                 kubelet            Created container nginx-ingress\n  Normal   Started    81s                 kubelet            Started container nginx-ingress\n  Warning  Unhealthy  61s (x21 over 80s)  kubelet            Readiness probe failed: HTTP probe failed with statuscode: 503\n\næœ€åçš„ Warning æ˜¾ç¤ºï¼šReadiness probe failed: HTTP probe failed with statuscode: 503\nè¿™æ˜¯ä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":584584,"discussion_content":"503æ˜¯åç«¯æœåŠ¡æœ‰é—®é¢˜å§ï¼Œç”¨kubectl logsçœ‹çœ‹Nginxçš„æ—¥å¿—ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660956930,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2843865,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEKSVuNarJuDhBSvHY0giaq6yriceEBKiaKuc04wCYWOuso50noqDexaPJJibJN7PHwvcQppnzsDia1icZkw/132","nickname":"Matthew","note":"","ucode":"96093089773740","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":584769,"discussion_content":"æ‰§è¡Œäº†è€å¸ˆgithubä¸Šçš„setup.shå°±å¥½äº†ï¼Œåº”è¯¥æ˜¯è¦æŠŠcrdé‡Œçš„èµ„æºéƒ½åˆ›å»ºæ‰èƒ½ï¼ŒåªæŒ‰ç…§è¯¾ç¨‹é‡Œçš„è¯­å¥æ‰§è¡Œè¿˜ä¸å¤Ÿã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661098923,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æ±Ÿè‹","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":354812,"user_name":"å¥•","can_delete":false,"product_type":"c1","uid":1005391,"ip_address":"åŒ—äº¬","ucode":"73CEA468CE70C3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","comment_is_top":false,"comment_ctime":1660800835,"is_pvip":false,"replies":[{"id":129083,"content":"åº”è¯¥æ˜¯å®‰è£…çš„æ—¶å€™å‘Kubernetesæ³¨å†Œçš„ï¼Œå…·ä½“å¯èƒ½è¦çœ‹æºç äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1660813342,"ip_address":"åŒ—äº¬","comment_id":354812,"utype":1}],"discussion_count":1,"race_medal":0,"score":7,"product_id":100114501,"comment_content":"Ingressclass é‡Œé¢çš„ spec.controller çš„å€¼ nginx.org&#47;ingress-controller æ˜¯æ€ä¹ˆ å’Œ ingress controller  å…³è”èµ·æ¥çš„ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":584431,"discussion_content":"åº”è¯¥æ˜¯å®‰è£…çš„æ—¶å€™å‘Kubernetesæ³¨å†Œçš„ï¼Œå…·ä½“å¯èƒ½è¦çœ‹æºç äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660813342,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":354622,"user_name":"é©¬ä»¥","can_delete":false,"product_type":"c1","uid":1344431,"ip_address":"åŒ—äº¬","ucode":"3FEA06CA14DE28","user_header":"https://static001.geekbang.org/account/avatar/00/14/83/af/1cb42cd3.jpg","comment_is_top":false,"comment_ctime":1660618283,"is_pvip":false,"replies":[{"id":128965,"content":"å¯èƒ½Nginx Ingress Controllerçš„è¡Œä¸ºæœ‰æ”¹å˜ï¼Œé‚£å°±æŠŠcrdé‡Œçš„èµ„æºä¹Ÿéƒ½åˆ›å»ºäº†å§ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1660623004,"ip_address":"åŒ—äº¬","comment_id":354622,"utype":1}],"discussion_count":1,"race_medal":0,"score":7,"product_id":100114501,"comment_content":"æˆ‘æ˜¯æ­åœ¨äº‘æœåŠ¡å™¨ä¸­çš„ï¼Œè¿™é‡Œæ­å»ºnginx-ingressçš„æ—¶å€™ï¼Œè¦åˆ›å»ºcrdsæ‰è¡Œï¼Œä¸ç„¶æˆåŠŸä¸äº†","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":584077,"discussion_content":"å¯èƒ½Nginx Ingress Controllerçš„è¡Œä¸ºæœ‰æ”¹å˜ï¼Œé‚£å°±æŠŠcrdé‡Œçš„èµ„æºä¹Ÿéƒ½åˆ›å»ºäº†å§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660623004,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":354557,"user_name":"dao","can_delete":false,"product_type":"c1","uid":1087879,"ip_address":"åŒ—äº¬","ucode":"4181FB270462CF","user_header":"https://static001.geekbang.org/account/avatar/00/10/99/87/5066026c.jpg","comment_is_top":false,"comment_ctime":1660543185,"is_pvip":false,"replies":[{"id":128958,"content":"crdä¸æ˜¯å¿…é¡»çš„ï¼Œä¸å®‰è£…ä¹Ÿå¯ä»¥ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1660546826,"ip_address":"åŒ—äº¬","comment_id":354557,"utype":1}],"discussion_count":2,"race_medal":0,"score":7,"product_id":100114501,"comment_content":"è¡¥å……ä¸€ä¸‹ï¼Œåœ¨æ–‡ç¨¿é‡Œå®‰è£… Nginx Ingress Controller å¤„ï¼Œé™¤äº†å››ä¸ª YAML å¤–ï¼Œè¿˜éœ€è¦å®‰è£…å®ƒä½¿ç”¨çš„ å®šåˆ¶èµ„æºï¼ˆcrdsï¼‰ã€‚ ","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583983,"discussion_content":"crdä¸æ˜¯å¿…é¡»çš„ï¼Œä¸å®‰è£…ä¹Ÿå¯ä»¥ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660546826,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1087879,"avatar":"https://static001.geekbang.org/account/avatar/00/10/99/87/5066026c.jpg","nickname":"dao","note":"","ucode":"4181FB270462CF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583992,"discussion_content":"ä¸å®‰è£… crds ï¼Œingress controller pod è·‘ä¸èµ·æ¥ï¼Œä¼šæŠ›å‡ºç±»ä¼¼ä¸‹é¢çš„é”™è¯¯ï¼ˆå¦‚æœæ²¡æœ‰é”™è¯¯ï¼Œæ˜¯å› ä¸ºæœºå™¨å·²ç»è£…äº† :) ï¼‰\nFailed to watch *v1.VirtualServerRoute: failed to list *v1.VirtualServerRoute: the server could not find the requested resource","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660550984,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æ–°åŠ å¡","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":354463,"user_name":"ppd0705","can_delete":false,"product_type":"c1","uid":1155646,"ip_address":"åŒ—äº¬","ucode":"EB63D4E3FD1E9A","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKotsBr2icbYNYlRSlicGUD1H7lulSTQUAiclsEz9gnG5kCW9qeDwdYtlRMXic3V6sj9UrfKLPJnQojag/132","comment_is_top":false,"comment_ctime":1660442472,"is_pvip":false,"replies":[{"id":128938,"content":"setup.shé‡Œçš„kubectlå‘½ä»¤ä¹Ÿéƒ½å†™åœ¨æ­£æ–‡é‡Œäº†ï¼Œå¯ä»¥ç”¨è„šæœ¬ï¼Œä¹Ÿå¯ä»¥æ‰‹åŠ¨æ‰§è¡Œå‘½ä»¤ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1660519073,"ip_address":"åŒ—äº¬","comment_id":354463,"utype":1}],"discussion_count":2,"race_medal":0,"score":7,"product_id":100114501,"comment_content":"è€å¸ˆï¼Œæ–‡ç« ä¸­è¿˜æ˜¯éœ€è¦æä¸€ä¸‹ éœ€è¦æ‰§è¡Œ ingressç›®å½• setup.sh è„šæœ¬ï¼Œ è¿™ä¸€æ­¥å¾ˆå…³é”®å‘€ï¼","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583936,"discussion_content":"setup.shé‡Œçš„kubectlå‘½ä»¤ä¹Ÿéƒ½å†™åœ¨æ­£æ–‡é‡Œäº†ï¼Œå¯ä»¥ç”¨è„šæœ¬ï¼Œä¹Ÿå¯ä»¥æ‰‹åŠ¨æ‰§è¡Œå‘½ä»¤ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660519073,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1155646,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKotsBr2icbYNYlRSlicGUD1H7lulSTQUAiclsEz9gnG5kCW9qeDwdYtlRMXic3V6sj9UrfKLPJnQojag/132","nickname":"ppd0705","note":"","ucode":"EB63D4E3FD1E9A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":583941,"discussion_content":"æ–‡ç« é‡Œé¢è¯´åªè¦å››ä¸ªæ–‡ä»¶ï¼Œä½†æ˜¯crdsç›®å½•çš„æ–‡ä»¶å¥½åƒä¹Ÿæ˜¯å¿…éœ€çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660520144,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":583936,"ip_address":"æ¹–å—","group_id":0},"score":583941,"extra":""}]}]},{"had_liked":false,"id":354273,"user_name":"éä¸»æµç å†œ","can_delete":false,"product_type":"c1","uid":2709653,"ip_address":"åŒ—äº¬","ucode":"47F137CF78A849","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/ygRfx93LO1ziazydV4eZRGWfnxc6ZJUo0dUcboASfduibJByytVyhKvLd7suhmPYernHv1C1jy8sOtlRTzuO36iag/132","comment_is_top":false,"comment_ctime":1660232589,"is_pvip":false,"replies":[{"id":128873,"content":"å…ˆçœ‹ä¸€ä¸‹Ingress Controllerçš„æ—¥å¿—ï¼Œæ„Ÿè§‰åƒæ˜¯Ingressæ²¡æœ‰é…ç½®å¥½ï¼ŒNginxæ‰¾ä¸åˆ°è½¬å‘çš„è·¯ç”±ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1660283662,"ip_address":"åŒ—äº¬","comment_id":354273,"utype":1}],"discussion_count":3,"race_medal":0,"score":8,"product_id":100114501,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œæˆ‘è¿è¡Œäº†curl --resolve ngx.test:8080:127.0.0.1 http:&#47;&#47;ngx.test:8080åæç¤ºï¼š\nHandling connection for 8080\n&lt;html&gt;\n&lt;head&gt;&lt;title&gt;404 Not Found&lt;&#47;title&gt;&lt;&#47;head&gt;\n&lt;body&gt;\n&lt;center&gt;&lt;h1&gt;404 Not Found&lt;&#47;h1&gt;&lt;&#47;center&gt;\n&lt;hr&gt;&lt;center&gt;nginx&#47;1.21.6&lt;&#47;center&gt;\n&lt;&#47;body&gt;\n&lt;&#47;html&gt;\næŠ¥404æ˜¯å“ªä¸ªæ­¥éª¤å‡ºäº†é—®é¢˜å‘¢ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583668,"discussion_content":"å…ˆçœ‹ä¸€ä¸‹Ingress Controllerçš„æ—¥å¿—ï¼Œæ„Ÿè§‰åƒæ˜¯Ingressæ²¡æœ‰é…ç½®å¥½ï¼ŒNginxæ‰¾ä¸åˆ°è½¬å‘çš„è·¯ç”±ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660283662,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1087879,"avatar":"https://static001.geekbang.org/account/avatar/00/10/99/87/5066026c.jpg","nickname":"dao","note":"","ucode":"4181FB270462CF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583976,"discussion_content":"curl --resolve ngx.test:8080:127.0.0.1 http://ngx.test:8080\nè¿™ä¸ª ngx.test è¦å’Œ ingress é‡Œ host ç›¸åŒã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660542470,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æ–°åŠ å¡","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2709653,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/ygRfx93LO1ziazydV4eZRGWfnxc6ZJUo0dUcboASfduibJByytVyhKvLd7suhmPYernHv1C1jy8sOtlRTzuO36iag/132","nickname":"éä¸»æµç å†œ","note":"","ucode":"47F137CF78A849","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583669,"discussion_content":"æ„Ÿè°¢è€å¸ˆç™¾å¿™ä¸­çš„å›å¤ï¼Œæˆ‘å†ç ”ç©¶ç ”ç©¶","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660283865,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"é‡åº†","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":354082,"user_name":"è¥¿é—¨å¹ç‰›","can_delete":false,"product_type":"c1","uid":1508990,"ip_address":"åŒ—äº¬","ucode":"E5D3624DDE1E83","user_header":"https://static001.geekbang.org/account/avatar/00/17/06/7e/735968e2.jpg","comment_is_top":false,"comment_ctime":1660088827,"is_pvip":false,"replies":[{"id":128791,"content":"è¯´çš„å¾ˆå¥½ï¼Œä¸è¿‡åœ¨ä¸ƒå±‚é‡Œä¸æ˜¯â€œå¤šäº†ä¸€æ¬¡æ¡æ‰‹æ“ä½œâ€ï¼Œè€Œæ˜¯å¤šäº†ä¸€å±‚åè®®çš„å¤„ç†ï¼Œå®ƒåº•å±‚è¿˜æ˜¯åŸºäºtcp&#47;ipçš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1660092497,"ip_address":"åŒ—äº¬","comment_id":354082,"utype":1}],"discussion_count":1,"race_medal":0,"score":8,"product_id":100114501,"comment_content":"ä¸ƒå±‚è´Ÿè½½æ›´åŠ çµæ´»ï¼Œå»ºç«‹åœ¨åº”ç”¨å±‚ä¹‹ä¸Šï¼Œèƒ½æ‹¿åˆ°åº”ç”¨ç¨‹åºç›¸å…³çš„ä¿¡æ¯ï¼Œå¯ä»¥æ ¹æ®åº”ç”¨ä¿¡æ¯ä¸ºä¾æ®åšè´Ÿè½½ï¼Œä½†æ€§èƒ½è‚¯å®šä¸å¦‚å››å±‚ï¼Œç›¸æ¯”å››å±‚è´Ÿè½½æ¯•ç«Ÿå¤šäº†ä¸€æ¬¡æ¡æ‰‹æ“ä½œã€‚\nå››å±‚çµæ´»æ€§ä¸å¥½ï¼Œæ ¹æ®ip æ´»Mac åœ°å€è´Ÿè½½ï¼Œä½†æ€§èƒ½å¥½ï¼Œåªæ˜¯ç®€å•çš„æ¢ä¸ªip æˆ–Macåœ°å€ï¼Œè¶Šç®€å•æ€§èƒ½è¶Šå¥½ï¼Œä½†æ˜¯æ¢ip ï¼Œæ„å‘³ç€è¦èµ°nat ç½‘å…³","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583387,"discussion_content":"è¯´çš„å¾ˆå¥½ï¼Œä¸è¿‡åœ¨ä¸ƒå±‚é‡Œä¸æ˜¯â€œå¤šäº†ä¸€æ¬¡æ¡æ‰‹æ“ä½œâ€ï¼Œè€Œæ˜¯å¤šäº†ä¸€å±‚åè®®çš„å¤„ç†ï¼Œå®ƒåº•å±‚è¿˜æ˜¯åŸºäºtcp/ipçš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660092498,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":354050,"user_name":"å•Šæ ‘","can_delete":false,"product_type":"c1","uid":1281551,"ip_address":"åŒ—äº¬","ucode":"F1072F4610B6F8","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/pZ5ibu3jOPTfWVtzTeNTiaL2PiabGT2Y2yKd2TNDcZMkIY34T5fhGcSnBjgpkd54Q3S6b3gRW3yYTxZk0QHYB0qnw/132","comment_is_top":false,"comment_ctime":1660042188,"is_pvip":true,"replies":[{"id":128786,"content":"Ingressæ—©å°±æ˜¯ç”Ÿäº§ç¯å¢ƒçš„æ ‡é…äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1660092319,"ip_address":"åŒ—äº¬","comment_id":354050,"utype":1}],"discussion_count":1,"race_medal":0,"score":8,"product_id":100114501,"comment_content":"ç°åœ¨å•†ç”¨ç¯å¢ƒæ˜¯å¦é€‚ç”¨Ingressäº†ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583382,"discussion_content":"Ingressæ—©å°±æ˜¯ç”Ÿäº§ç¯å¢ƒçš„æ ‡é…äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660092319,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":354030,"user_name":"æä¸€","can_delete":false,"product_type":"c1","uid":1524952,"ip_address":"ä¸Šæµ·","ucode":"EEB7C5099C566C","user_header":"https://static001.geekbang.org/account/avatar/00/17/44/d8/708a0932.jpg","comment_is_top":false,"comment_ctime":1660031911,"is_pvip":true,"replies":[{"id":128778,"content":"å¥½åƒæ˜¯æ²¡æœ‰åˆ›å»ºå¥½RBACï¼Œå¯èƒ½æ˜¯Nginxç›¸å…³çš„yamlæ²¡æœ‰éƒ¨ç½²å¥½ï¼Œç¡®ä¿å®ƒçš„é‚£å‡ ä¸ªYAML éƒ½å·²ç»æ‰§è¡Œäº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1660036579,"ip_address":"ä¸Šæµ·","comment_id":354030,"utype":1}],"discussion_count":8,"race_medal":0,"score":8,"product_id":100114501,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œä¸€æ­¥æ­¥è·Ÿè¸ªæ“ä½œï¼Œä½†åˆ›å»ºingressControllerçš„æ—¶å€™æŠ¥é”™äº† Error when getting IngressClass ngx-ink: ingressclasses.networking.k8s.io &quot;ngx-ink&quot; is forbidden: User &quot;system:serviceaccount:nginx-ingress:default&quot; cannot get resource &quot;ingressclasses&quot; in API group &quot;networking.k8s.io&quot; at the cluster scope","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583328,"discussion_content":"å¥½åƒæ˜¯æ²¡æœ‰åˆ›å»ºå¥½RBACï¼Œå¯èƒ½æ˜¯Nginxç›¸å…³çš„yamlæ²¡æœ‰éƒ¨ç½²å¥½ï¼Œç¡®ä¿å®ƒçš„é‚£å‡ ä¸ªYAML éƒ½å·²ç»æ‰§è¡Œäº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660036579,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1142029,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6d/0d/f5665845.jpg","nickname":"ğŸ‡¨ğŸ‡³ğŸ‡©ğŸ‡ªHolgerè‚¥å·´å“¥","note":"","ucode":"34C7CCDB923E90","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":598480,"discussion_content":"åŒé—®ï¼Œä»”ç»†çœ‹äº†è¯„è®ºåŒºè¿™ä¸ªé—®é¢˜ä¸€ç›´æ²¡æœ‰éªŒè¯é€šè¿‡çš„è§£å†³æ–¹æ¡ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1672847593,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1235690,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEJ47Wh1RiazQVR3egTUV2dXV3MLibic1bdg7UV0tDoAfYxDUypF9t2VChMHib3kSEzITzuGSE5HFqYBeA/132","nickname":"Geek_207554","note":"","ucode":"F8C5A81328A4AF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583858,"discussion_content":"å­˜åœ¨åŒæ ·çš„é—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660450621,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1155646,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKotsBr2icbYNYlRSlicGUD1H7lulSTQUAiclsEz9gnG5kCW9qeDwdYtlRMXic3V6sj9UrfKLPJnQojag/132","nickname":"ppd0705","note":"","ucode":"EB63D4E3FD1E9A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583521,"discussion_content":"æˆ‘ä¹Ÿé‡åˆ°è¿™ä¸ªé—®é¢˜äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660179810,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æ¹–å—","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1524952,"avatar":"https://static001.geekbang.org/account/avatar/00/17/44/d8/708a0932.jpg","nickname":"æä¸€","note":"","ucode":"EEB7C5099C566C","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583395,"discussion_content":"è€å¸ˆï¼Œå¥½åƒå¤§å®¶éƒ½å­˜åœ¨è¿™ä¸ªé—®é¢˜ã€‚æœ‰åŒå­¦æ”¹äº† rbac.yaml é‡Œé¢çš„å†…å®¹æ‰å¯åŠ¨çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660095563,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1126593,"avatar":"https://static001.geekbang.org/account/avatar/00/11/30/c1/2dde6700.jpg","nickname":"å¯†ç 123456","note":"","ucode":"9889463CC0EA71","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1524952,"avatar":"https://static001.geekbang.org/account/avatar/00/17/44/d8/708a0932.jpg","nickname":"æä¸€","note":"","ucode":"EEB7C5099C566C","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":583432,"discussion_content":"æ€ä¹ˆæ”¹çš„ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660115676,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":583395,"ip_address":"æ±Ÿè‹","group_id":0},"score":583432,"extra":""}]},{"author":{"id":1126593,"avatar":"https://static001.geekbang.org/account/avatar/00/11/30/c1/2dde6700.jpg","nickname":"å¯†ç 123456","note":"","ucode":"9889463CC0EA71","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583347,"discussion_content":"é‡æ–°æ‰§è¡Œå¥½åƒæ²¡ç”¨ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660046344,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æ±Ÿè‹","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1126593,"avatar":"https://static001.geekbang.org/account/avatar/00/11/30/c1/2dde6700.jpg","nickname":"å¯†ç 123456","note":"","ucode":"9889463CC0EA71","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583346,"discussion_content":"æˆ‘ä¹Ÿæœ‰è¿™ä¸ªé—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660046309,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æ±Ÿè‹","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":354021,"user_name":"èŠ±èŠ±å¤§è„¸çŒ«","can_delete":false,"product_type":"c1","uid":1117318,"ip_address":"ä¸Šæµ·","ucode":"8ABDB3F7F4FB0F","user_header":"https://static001.geekbang.org/account/avatar/00/11/0c/86/8e52afb8.jpg","comment_is_top":false,"comment_ctime":1660024491,"is_pvip":true,"replies":[{"id":128777,"content":"Ingress Controlleræœ‰å¾ˆå¤šå®ç°ï¼Œapisixä¹Ÿå¯ä»¥é€‚é…è¿›Kubernetesä½œä¸ºIngress Controllerã€‚\n\nä¸œè¥¿å‘æ˜¯æŒ‡é›†ç¾¤å†…éƒ¨Podçš„æµé‡ï¼Œæœ€å¸¸è§çš„å°±æ˜¯Service Meshã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1660035591,"ip_address":"ä¸Šæµ·","comment_id":354021,"utype":1}],"discussion_count":1,"race_medal":0,"score":8,"product_id":100114501,"comment_content":"è€å¸ˆï¼Œé—®ä¸ªé—®é¢˜ï¼Œç°åœ¨å¸‚é¢ä¸Šçš„APISIXæ˜¯ä¸æ˜¯ä¹Ÿæ˜¯Ingress Controllerçš„ä¸€ä¸ªå®ç°ï¼Ÿ è¿˜æœ‰å—åŒ—å‘çš„æµé‡æˆ‘èƒ½æ˜ç™½ï¼Œä¸œè¥¿å‘ä¸»è¦æ˜¯å¤„ç†å“ªç§æƒ…å†µä¸‹çš„é€»è¾‘çš„ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583327,"discussion_content":"Ingress Controlleræœ‰å¾ˆå¤šå®ç°ï¼Œapisixä¹Ÿå¯ä»¥é€‚é…è¿›Kubernetesä½œä¸ºIngress Controllerã€‚\n\nä¸œè¥¿å‘æ˜¯æŒ‡é›†ç¾¤å†…éƒ¨Podçš„æµé‡ï¼Œæœ€å¸¸è§çš„å°±æ˜¯Service Meshã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660035591,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":392424,"user_name":"ç‹æ—§ä¸š","can_delete":false,"product_type":"c1","uid":1013076,"ip_address":"é™•è¥¿","ucode":"A8DEC38430D007","user_header":"https://static001.geekbang.org/account/avatar/00/0f/75/54/73cc7f73.jpg","comment_is_top":false,"comment_ctime":1720881728,"is_pvip":false,"replies":[{"id":142648,"content":"è¿™ä¸¤ä¸ªå¯¹è±¡çš„ç”¨æ³•å°±æ˜¯è¿™ä¹ˆè§„å®šçš„ï¼ŒIngress ClassæŒ‡å®šingress controllerå®ä¾‹ï¼Œingress controlleræŒ‡å®šä»å±çš„ingress classï¼Œå…¶å®ä¹Ÿè¿˜ç®—å¥½ç†è§£å§ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1720957881,"ip_address":"ä¸Šæµ·","comment_id":392424,"utype":1}],"discussion_count":1,"race_medal":0,"score":8,"product_id":100114501,"comment_content":"è€å¸ˆä¸ºä»€ä¹ˆIngress Controller å’ŒIngress Classçš„yamlåœ¨ç›¸äº’å¼•ç”¨ï¼Œ æ˜¯æˆ‘æŒ‡å‘ä½ ä½ æŒ‡å‘æˆ‘è¿™ç§ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":648028,"discussion_content":"è¿™ä¸¤ä¸ªå¯¹è±¡çš„ç”¨æ³•å°±æ˜¯è¿™ä¹ˆè§„å®šçš„ï¼ŒIngress ClassæŒ‡å®šingress controllerå®ä¾‹ï¼Œingress controlleræŒ‡å®šä»å±çš„ingress classï¼Œå…¶å®ä¹Ÿè¿˜ç®—å¥½ç†è§£å§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1720957882,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":390080,"user_name":"Thread-main","can_delete":false,"product_type":"c1","uid":3664303,"ip_address":"æµ™æ±Ÿ","ucode":"84BA1CC78C9866","user_header":"https://static001.geekbang.org/account/avatar/00/37/e9/af/791d0f5e.jpg","comment_is_top":false,"comment_ctime":1714294377,"is_pvip":false,"replies":[{"id":141906,"content":"å¥½åƒæ˜¯kubeletæ— æ³•ä¸apiserveræ­£å¸¸é€šä¿¡ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1714379885,"ip_address":"ä¸Šæµ·","comment_id":390080,"utype":1}],"discussion_count":1,"race_medal":0,"score":8,"product_id":100114501,"comment_content":"è€å¸ˆï¼Œæˆ‘åœ¨æ‰§è¡Œkubectl exec -it ngx-dep-6796688696-m7jx7 -- bashåä¼šå‡ºç°\nError from server: error dialing backend: dial tcp 10.0.16.10:10250: i&#47;o timeout\næ‰¾äº†åŠå¤©èµ„æ–™æ²¡è§£å†³ï¼Œè¯·é—®æ˜¯å•¥é—®é¢˜\n","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":643508,"discussion_content":"å¥½åƒæ˜¯kubeletæ— æ³•ä¸apiserveræ­£å¸¸é€šä¿¡ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1714379885,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":388363,"user_name":"å…š","can_delete":false,"product_type":"c1","uid":1071974,"ip_address":"æ²³åŒ—","ucode":"EE531DB3EA124D","user_header":"https://static001.geekbang.org/account/avatar/00/10/5b/66/ad35bc68.jpg","comment_is_top":false,"comment_ctime":1710028198,"is_pvip":false,"replies":[{"id":141433,"content":"è¿™å±äºè¶…çº²é¢˜ï¼Œè·ŸmasterèŠ‚ç‚¹ä¹Ÿæ²¡æœ‰å…³ç³»ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1710147973,"ip_address":"åŒ—äº¬","comment_id":388363,"utype":1}],"discussion_count":1,"race_medal":0,"score":8,"product_id":100114501,"comment_content":"æµé‡ç®¡ç†è¦æ¯”podç®¡ç†å¤æ‚å¤šäº†ï¼Œåœ¨k8så¤–éƒ¨ æ€ä¹ˆç¡®å®šé›†ç¾¤çš„å…¥å£IP? å‡è®¾é›†ç¾¤æœ‰å¤šä¸ªmaster","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":638970,"discussion_content":"è¿™å±äºè¶…çº²é¢˜ï¼Œè·ŸmasterèŠ‚ç‚¹ä¹Ÿæ²¡æœ‰å…³ç³»ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1710147973,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":380519,"user_name":"æœªæ¥å·²æ¥","can_delete":false,"product_type":"c1","uid":1187130,"ip_address":"å¹¿ä¸œ","ucode":"3A21ACFD53CB9C","user_header":"https://static001.geekbang.org/account/avatar/00/12/1d/3a/cdf9c55f.jpg","comment_is_top":false,"comment_ctime":1693751680,"is_pvip":false,"replies":[{"id":138585,"content":"åœ¨è¯¾ç¨‹GitHubé¡¹ç›®é‡Œä¹Ÿæä¾›å®Œæ•´çš„YAMLï¼Œå¯ä»¥å‚è€ƒã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1693820702,"ip_address":"åŒ—äº¬","comment_id":380519,"utype":1}],"discussion_count":1,"race_medal":0,"score":8,"product_id":100114501,"comment_content":"kic.yml ç›´æ¥æŒ‰ç…§è€å¸ˆç»˜å›¾çš„å†…å®¹è¿›è¡Œé…ç½®ï¼Œç»“æœ Ingress Controller çš„ Pod ä¸€ç›´åœ¨ Crash...ï¼Œå°´å°¬ï¼Œè¿™é‡Œè¦ä¸‹è½½å®˜ç½‘çš„å®Œæ•´ç‰ˆè¿›è¡Œä¿®æ”¹ï¼šhttps:&#47;&#47;github.com&#47;nginxinc&#47;kubernetes-ingress&#47;blob&#47;main&#47;deployments&#47;deployment&#47;nginx-ingress.yaml","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":627128,"discussion_content":"åœ¨è¯¾ç¨‹GitHubé¡¹ç›®é‡Œä¹Ÿæä¾›å®Œæ•´çš„YAMLï¼Œå¯ä»¥å‚è€ƒã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1693820702,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":373580,"user_name":"èªæ˜çš„ç¬¨è›‹","can_delete":false,"product_type":"c1","uid":3019074,"ip_address":"å®‰å¾½","ucode":"1BAFE54A1A1DBD","user_header":"https://static001.geekbang.org/account/avatar/00/2e/11/42/0308b90d.jpg","comment_is_top":false,"comment_ctime":1682679690,"is_pvip":false,"replies":[{"id":136551,"content":"æ˜¯çš„ï¼Œçœ‹Ingress controllerçš„å®šä¹‰å°±æ¸…æ¥šäº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1683160367,"ip_address":"ä¸Šæµ·","comment_id":373580,"utype":1}],"discussion_count":1,"race_medal":0,"score":8,"product_id":100114501,"comment_content":"è€å¸ˆï¼Œè¯·é—®ä¸€ä¸ªingress controlleråªèƒ½å¯¹åº”ä¸€ä¸ªingressclasså—","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":616861,"discussion_content":"æ˜¯çš„ï¼Œçœ‹Ingress controllerçš„å®šä¹‰å°±æ¸…æ¥šäº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1683160367,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":371369,"user_name":"Geek_e46db2","can_delete":false,"product_type":"c1","uid":3566269,"ip_address":"åŒ—äº¬","ucode":"3EAE3780D689F1","user_header":"","comment_is_top":false,"comment_ctime":1679846232,"is_pvip":false,"replies":[{"id":135466,"content":"great","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1679901227,"ip_address":"ä¸Šæµ·","comment_id":371369,"utype":1}],"discussion_count":1,"race_medal":0,"score":9,"product_id":100114501,"comment_content":"å¦‚æœå¤§å®¶é‡åˆ°apply kic.ymlæ— æ³•readyï¼Œpodæ—¥å¿—æ˜¾ç¤ºï¼š manager.go:335] Failed to get nginx version: fork&#47;exec &#47;usr&#47;sbin&#47;nginx: operation not permittedï¼Œæ—¶å€™ã€‚å¯ä»¥çœ‹ä¸‹è€å¸ˆåé¢å®æ“è§†é¢‘ï¼Œéœ€è¦ä¿®æ”¹å®¹å™¨capabilitiesé…ç½®ï¼Œæ·»åŠ NET_BIND_SERVICEå±æ€§ã€‚\ncapabilities:\n            drop:\n            - ALL\n            add:\n            - NET_BIND_SERVICE","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":611002,"discussion_content":"great","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1679901227,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":371367,"user_name":"Geek_e46db2","can_delete":false,"product_type":"c1","uid":3566269,"ip_address":"åŒ—äº¬","ucode":"3EAE3780D689F1","user_header":"","comment_is_top":false,"comment_ctime":1679844585,"is_pvip":false,"replies":[{"id":135468,"content":"å¥½åƒè‡ªå·±è§£å†³äº†ï¼Œgood","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1679901302,"ip_address":"ä¸Šæµ·","comment_id":371367,"utype":1}],"discussion_count":1,"race_medal":0,"score":9,"product_id":100114501,"comment_content":"kubectl logs ngx-kic-dep-79797d5ccf-crw7k -n nginx-ingress\nNGINX Ingress Controller Version=3.0.2 Commit=40e3a2bc24a0b158938c1e1c5e5f8db5feec624e Date=2023-02-14T11:27:05Z DirtyState=false Arch=linux&#47;amd64 Go=go1.19.7\nI0326 15:28:47.288487       1 flags.go:294] Starting with flags: [&quot;-ingress-class=ngx-ink&quot; &quot;-enable-custom-resources=false&quot; &quot;-nginx-configmaps=nginx-ingress&#47;nginx-config&quot;]\nI0326 15:28:47.302018       1 main.go:227] Kubernetes version: 1.23.3\nF0326 15:28:47.303848       1 manager.go:339] Failed to get nginx version: fork&#47;exec &#47;usr&#47;sbin&#47;nginx: operation not permitted\n\n---\nè¿™ä¸ªé—®é¢˜æ˜¯ä¸ºå•¥å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":611004,"discussion_content":"å¥½åƒè‡ªå·±è§£å†³äº†ï¼Œgood","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1679901302,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":371331,"user_name":"GeekNeo","can_delete":false,"product_type":"c1","uid":1146405,"ip_address":"æµ™æ±Ÿ","ucode":"1D355A9BEB8BEA","user_header":"https://static001.geekbang.org/account/avatar/00/11/7e/25/3932dafd.jpg","comment_is_top":false,"comment_ctime":1679810589,"is_pvip":false,"replies":[{"id":135469,"content":"Nginxé»˜è®¤ä½¿ç”¨round robinç®—æ³•ï¼Œå¯ä»¥åœ¨YAML é‡Œæ”¹æˆå…¶ä»–çš„ç®—æ³•ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1679901353,"ip_address":"ä¸Šæµ·","comment_id":371331,"utype":1}],"discussion_count":1,"race_medal":0,"score":9,"product_id":100114501,"comment_content":"ä¹‹å‰çš„Serviceçš„ngx-svcä¿®æ”¹ä¸ºClusterIPï¼Œç„¶åæŠŠingress-svcçš„typeä¿®æ”¹ä¸ºNodePortï¼Œingress-svcå¦‚ä¸‹ï¼š\napiVersion: v1\nkind: Service\nmetadata:\n  name: ingress-svc\n  namespace: nginx-ingress\nspec:\n  type: NodePort\n  selector:\n    app: ngx-kic-dep\n  ports:\n  - port: 80\n    protocol: TCP\n    targetPort: 80\n\næŸ¥çœ‹ç”Ÿæˆçš„Serviceå‘½ä»¤ï¼škubectl get svc -n nginx-ingress  å¯ä»¥çœ‹åˆ°æ˜ å°„ç«¯å£31404 å¤–éƒ¨ç«¯å£æ˜¯31404ã€‚\ncurlæ¨¡æ‹Ÿè®¿é—®ï¼š\ncurl --resolve ngx.test:31404:127.0.0.1 http:&#47;&#47;ngx.test:31404\næ­£ç¡®è¿”å›ç»“æœï¼šä¹‹å‰å®šä¹‰çš„cmå¯¹è±¡å†™å…¥çš„nginx locationå®šä¹‰çš„ä¿¡æ¯\nsrv : 10.10.1.8:80\nhost: ngx-dep-67c5b96797-r8kjm\nuri : GET ngx.test &#47;\ndate: 2023-03-26T05:56:28+00:00\næˆ–è€…ï¼š\nsrv : 10.10.2.8:80\nhost: ngx-dep-67c5b96797-vspwr\nuri : GET ngx.test &#47;\ndate: 2023-03-26T05:56:28+00:00\n\nè¿”å›çš„podä¿¡æ¯æ˜¯ä¹‹å‰åˆ›å»ºçš„2å°podï¼Œè´Ÿè½½å‡è¡¡åº”è¯¥æ˜¯è¿˜æ˜¯è½®è¯¢ï¼Œè™½ç„¶å‰é¢åŠ äº†nginx-ingressï¼Œä½†æ˜¯åç«¯å¯¹åº”çš„Serviceè¿˜æ˜¯ä¸€ä¸ªï¼Œæ‰€ä»¥æœ€ç»ˆè¿˜æ˜¯RRï¼Œè€å¸ˆä¸çŸ¥é“æˆ‘è¯´çš„å¯å¯¹ï¼Ÿ\n","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":611005,"discussion_content":"Nginxé»˜è®¤ä½¿ç”¨round robinç®—æ³•ï¼Œå¯ä»¥åœ¨YAML é‡Œæ”¹æˆå…¶ä»–çš„ç®—æ³•ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1679901353,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":369086,"user_name":"Lorry","can_delete":false,"product_type":"c1","uid":1066409,"ip_address":"å››å·","ucode":"BD4754D0F1D786","user_header":"https://static001.geekbang.org/account/avatar/00/10/45/a9/3d48d6a2.jpg","comment_is_top":false,"comment_ctime":1677077884,"is_pvip":false,"replies":[{"id":134463,"content":"ingressåªæ˜¯ä¸€äº›è§„åˆ™é›†åˆï¼Œä¸€æ—¦å‘ç”Ÿå˜åŠ¨ï¼Œkuberneteså°±ä¼šé€šçŸ¥ingress controllerï¼Œè¿™æ ·å°±å¯ä»¥æ‹¿åˆ°æ–°è§„åˆ™ï¼Œé‡æ–°é…ç½®è·¯ç”±ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1677122149,"ip_address":"ä¸Šæµ·","comment_id":369086,"utype":1}],"discussion_count":1,"race_medal":0,"score":9,"product_id":100114501,"comment_content":"è€å¸ˆï¼Œè¯·é—®ingress Controlleræ˜¯æ€ä¹ˆæŒ‡å¯¼ingressçš„é…ç½®çš„ï¼Ÿæ˜¯ingressä¸»åŠ¨é€šçŸ¥ingress controllerçš„å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":606394,"discussion_content":"ingressåªæ˜¯ä¸€äº›è§„åˆ™é›†åˆï¼Œä¸€æ—¦å‘ç”Ÿå˜åŠ¨ï¼Œkuberneteså°±ä¼šé€šçŸ¥ingress controllerï¼Œè¿™æ ·å°±å¯ä»¥æ‹¿åˆ°æ–°è§„åˆ™ï¼Œé‡æ–°é…ç½®è·¯ç”±ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1677122149,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":360263,"user_name":"chuanshen","can_delete":false,"product_type":"c1","uid":1401511,"ip_address":"ä¸Šæµ·","ucode":"02B565DFA534A6","user_header":"https://static001.geekbang.org/account/avatar/00/15/62/a7/595b36f8.jpg","comment_is_top":false,"comment_ctime":1666354383,"is_pvip":false,"replies":[{"id":131149,"content":"è¿™ä¸ªæ˜¯Kubernetesä¹‹å¤–çš„é—®é¢˜äº†ï¼Œå±äºä¼ ç»Ÿçš„è´Ÿè½½å‡è¡¡è§£å†³æ–¹æ¡ˆï¼Œä¹Ÿå°±æ˜¯å¥åº·æ£€æŸ¥ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1666588561,"ip_address":"ä¸Šæµ·","comment_id":360263,"utype":1}],"discussion_count":1,"race_medal":0,"score":9,"product_id":100114501,"comment_content":"é›†ç¾¤å¤–éƒ¨è®¿é—®é›†ç¾¤å†…éƒ¨ï¼Œä¸ç®¡ä½¿ç”¨ Ingress è¿˜æ˜¯ Serviceï¼Œå¤–éƒ¨è¯·æ±‚éƒ½æ˜¯é èŠ‚ç‚¹çš„ NodeIP æ¥è®¿é—®é›†ç¾¤å†…éƒ¨çš„æœåŠ¡çš„ã€‚ä¸ºäº†é«˜å¯ç”¨ï¼Œå¯ä»¥åœ¨å¤šä¸ªèŠ‚ç‚¹ä¸Šä½¿ç”¨å¤šä¸ªNodeIP å¯¹å¤–æš´éœ²æœåŠ¡ã€‚ä½†å¦‚æœå…¶ä¸­ä¸€ä¸ªèŠ‚ç‚¹æ•…éšœäº†ï¼Œå®¢æˆ·ç«¯å¹¶ä¸çŸ¥é“ï¼Œé€šè¿‡åŸŸåæˆ–node IP è¿˜å‘è¿™ä¸ªèŠ‚ç‚¹å‘æŠ¥ï¼Œè·¯ç”±åˆ°è¿™ä¸ª NodeIP çš„æ•°æ®éƒ½ä¼šä¸¢å¤±. è¿™æ—¶åº”å¦‚ä½•å¤„ç†ï¼Œæ˜¯åœ¨é›†ç¾¤å¤–éƒ¨åœ¨ä½¿ç”¨ Nginxçš„ upstream åœ¨ä»£ç†ä¸€ä¸‹ä¸¤ä¸ªåœ°å€ä¹ˆï¼Œæˆ–è€…ä½¿ç”¨è´Ÿè½½å‡è¡¡ï¼Œæœ‰ä»€ä¹ˆæ›´å¥½çš„æ–¹æ³•ä¹ˆï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":591453,"discussion_content":"è¿™ä¸ªæ˜¯Kubernetesä¹‹å¤–çš„é—®é¢˜äº†ï¼Œå±äºä¼ ç»Ÿçš„è´Ÿè½½å‡è¡¡è§£å†³æ–¹æ¡ˆï¼Œä¹Ÿå°±æ˜¯å¥åº·æ£€æŸ¥ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1666588561,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":360260,"user_name":"ç¾å¦™çš„ä»£ç ","can_delete":false,"product_type":"c1","uid":1111985,"ip_address":"ä¸Šæµ·","ucode":"9DADD72C193296","user_header":"https://static001.geekbang.org/account/avatar/00/10/f7/b1/982ea185.jpg","comment_is_top":false,"comment_ctime":1666350206,"is_pvip":true,"replies":[{"id":131152,"content":"ç›´æ¥ç”¨å°±è¡Œï¼Œè¿™ä¸ªdefault serverå…¶å®æ²¡å¤ªå¤§ä½œç”¨ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1666588709,"ip_address":"ä¸Šæµ·","comment_id":360260,"utype":1}],"discussion_count":1,"race_medal":1,"score":9,"product_id":100114501,"comment_content":"kubectl apply -f common&#47;default-server-secret.yaml   é‡Œé¢data tls.crt , tls.key éœ€è¦é…ç½®æœ¬æœºçš„å—ï¼Ÿè¿˜æ˜¯ç›´æ¥ä½¿ç”¨yamlé‡Œé¢çš„å“¦ã€‚","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":591456,"discussion_content":"ç›´æ¥ç”¨å°±è¡Œï¼Œè¿™ä¸ªdefault serverå…¶å®æ²¡å¤ªå¤§ä½œç”¨ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1666588709,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":354045,"user_name":"yhtyht308","can_delete":false,"product_type":"c1","uid":1230354,"ip_address":"åŒ—äº¬","ucode":"9A054290B8B284","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/dotGbXAlAZg0bhCq4P96A40mdyavzR33jSqIHk8xLlic4B5PYNDIP5MEa1Fk9yxzdz9scHUM7IUNR71nVZNoV7Q/132","comment_is_top":false,"comment_ctime":1660039691,"is_pvip":false,"replies":[{"id":128782,"content":"kubectl logs -n nginx-ingress xxxçœ‹çœ‹æ—¥å¿—ï¼Œç„¶åå†å¯¹ç…§ä¸€ä¸‹è¯¾ç¨‹æ­£æ–‡ï¼Œæ˜¯å¦æ¼äº†ä»€ä¹ˆæ­¥éª¤ã€‚\n\n503å¥½åƒæ˜¯åå°æœåŠ¡æ²¡èµ·æ¥ï¼Œæ˜¯å¦æ²¡æœ‰åˆ›å»ºä¹‹å‰çš„Deploymentã€Serviceå¯¹è±¡ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"ä½œè€…","uid":1181974,"ctime":1660042687,"ip_address":"åŒ—äº¬","comment_id":354045,"utype":1}],"discussion_count":3,"race_medal":0,"score":9,"product_id":100114501,"comment_content":"è€å¸ˆï¼šæ‰§è¡Œ\nkubectl apply -f kic.ymlåï¼Œä¸€ç›´æ²¡æœ‰èµ·æ¥ï¼Œkubectl describe pod nginx-kic-ï¼ˆå°±æ˜¯ä½ podåå­—ï¼‰ -n nginx-ingressé‡Œï¼Œçœ‹åˆ°é”™è¯¯ä¿¡æ¯ï¼š Warning  Unhealthy  1s (x5 over 4s)         kubelet            Readiness probe failed: HTTP probe failed with statuscode: 503,è¯·é—®è¿™æ€ä¹ˆå¤„ç†ï¼Ÿ\n\n","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583342,"discussion_content":"kubectl logs -n nginx-ingress xxxçœ‹çœ‹æ—¥å¿—ï¼Œç„¶åå†å¯¹ç…§ä¸€ä¸‹è¯¾ç¨‹æ­£æ–‡ï¼Œæ˜¯å¦æ¼äº†ä»€ä¹ˆæ­¥éª¤ã€‚\n\n503å¥½åƒæ˜¯åå°æœåŠ¡æ²¡èµ·æ¥ï¼Œæ˜¯å¦æ²¡æœ‰åˆ›å»ºä¹‹å‰çš„Deploymentã€Serviceå¯¹è±¡ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660042688,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2409553,"avatar":"https://static001.geekbang.org/account/avatar/00/24/c4/51/5bca1604.jpg","nickname":"aLong","note":"","ucode":"11DB1B9C579811","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":599431,"discussion_content":"åŒæ ·é—®é¢˜ï¼ŒæŒ‰æµç¨‹ä¸‹æ¥æ²¡çœ‹åˆ°æ¼ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1673516891,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1087879,"avatar":"https://static001.geekbang.org/account/avatar/00/10/99/87/5066026c.jpg","nickname":"dao","note":"","ucode":"4181FB270462CF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583969,"discussion_content":"æˆ‘ä¹Ÿå‡ºç°è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘çš„åŸå› æ˜¯æ²¡æœ‰å®‰è£… ingress/common/crds ,å®‰è£…å nginx-ingress å°±è¿è¡Œäº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660538346,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æ–°åŠ å¡","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":353910,"user_name":"Cue","can_delete":false,"product_type":"c1","uid":1516991,"ip_address":"ä¸Šæµ·","ucode":"A5CB460B54FDB0","user_header":"https://static001.geekbang.org/account/avatar/00/17/25/bf/1e9c853f.jpg","comment_is_top":false,"comment_ctime":1659922381,"is_pvip":false,"replies":[{"id":128704,"content":"\n1. ingressè®¾è®¡åªæ”¯æŒhttpï¼Œä½†ç°åœ¨çš„Ingress Controlleréƒ½æœ‰æ‰©å±•ï¼Œé€šè¿‡crdæ¥æ”¯æŒtcpã€‚\n\n2.æ„Ÿè§‰è¿™ä¸ªç†è§£ä¸å¤ªæ­£ç¡®ï¼ŒIngressåªæ˜¯å®šä¹‰äº†æµé‡çš„åˆ†é…è§„åˆ™ï¼ŒåŸºäºhttpé‚£å°±å¾—ç”¨ä¸ƒå±‚é‡Œçš„ä¿¡æ¯å»åˆ†æµï¼Œæœ¬è´¨ä¸Šè¿˜æ˜¯tcp&#47;ipåè®®æ ˆã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1181974,"ctime":1659925743,"ip_address":"ä¸Šæµ·","comment_id":353910,"utype":1}],"discussion_count":1,"race_medal":0,"score":9,"product_id":100114501,"comment_content":"è€å¸ˆï¼Œä¸¤ä¸ªç–‘é—®ã€‚\n1ã€å¦‚æœéƒ¨ç½²çš„podå°±æ˜¯å››å±‚TCPæœåŠ¡ï¼Œä¸æ˜¯HTTPçš„ï¼Œé‚£ä¹ˆingressè¿˜é€‚ç”¨å—ï¼Ÿ\n2ã€ä¸ºä»€ä¹ˆä¼ ç»Ÿæ¶æ„æ¯”å¦‚ä¸€ä¸ªhttpè¯·æ±‚æ˜¯å…ˆåˆ°lvsï¼ˆå››å±‚ï¼‰-&gt;nginxï¼ˆä¸ƒå±‚ï¼‰ï¼Œåœ¨k8sæ¶æ„é‡Œé¢å°±æ˜¯å…ˆåˆ°ä¸ƒå±‚ï¼Œå†åˆ°å››å±‚ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583131,"discussion_content":"\n1. ingressè®¾è®¡åªæ”¯æŒhttpï¼Œä½†ç°åœ¨çš„Ingress Controlleréƒ½æœ‰æ‰©å±•ï¼Œé€šè¿‡crdæ¥æ”¯æŒtcpã€‚\n\n2.æ„Ÿè§‰è¿™ä¸ªç†è§£ä¸å¤ªæ­£ç¡®ï¼ŒIngressåªæ˜¯å®šä¹‰äº†æµé‡çš„åˆ†é…è§„åˆ™ï¼ŒåŸºäºhttpé‚£å°±å¾—ç”¨ä¸ƒå±‚é‡Œçš„ä¿¡æ¯å»åˆ†æµï¼Œæœ¬è´¨ä¸Šè¿˜æ˜¯tcp/ipåè®®æ ˆã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659925743,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}