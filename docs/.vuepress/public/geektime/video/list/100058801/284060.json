{"id":284060,"title":"18 | Flink高可用配置实操演示","content":"<p><strong>课件和Demo地址</strong><br>\n<a href=\"https://gitee.com/geektime-geekbang/geektime-Flink\">https://gitee.com/geektime-geekbang/geektime-Flink</a></p>","comments":[{"had_liked":false,"id":248247,"user_name":"鱼","can_delete":false,"product_type":"c3","uid":1030615,"ip_address":"","ucode":"6BCC544FF89D9C","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b9/d7/fceacbd8.jpg","comment_is_top":false,"comment_ctime":1600078868,"is_pvip":false,"replies":[{"id":91402,"content":"Flink中的ZK是单独启动的，和集群没关系","user_name":"作者回复","user_name_real":"张利兵","uid":1119779,"ctime":1600481525,"ip_address":"","comment_id":248247,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100058801,"comment_content":"Flink内部自带的zk是一个session&#47;per-job一个吗？如果这个任务或者session挂了是不是就没有用了呢？","like_count":0,"discussions":[{"author":{"id":1119779,"avatar":"https://static001.geekbang.org/account/avatar/00/11/16/23/99c7ede5.jpg","nickname":"张利兵","note":"","ucode":"DBAE17970AB143","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":505596,"discussion_content":"Flink中的ZK是单独启动的，和集群没关系","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600481525,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":248008,"user_name":"Allan","can_delete":false,"product_type":"c3","uid":1310388,"ip_address":"","ucode":"8DA4DBECC2C45C","user_header":"https://static001.geekbang.org/account/avatar/00/13/fe/b4/295338e7.jpg","comment_is_top":false,"comment_ctime":1599979551,"is_pvip":false,"replies":[{"id":91403,"content":"具体情况要具体看了，主要还是根据数据处理量来","user_name":"作者回复","user_name_real":"张利兵","uid":1119779,"ctime":1600481559,"ip_address":"","comment_id":248008,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100058801,"comment_content":"我们集群直接就没有配置master和worker，通过flink run yarn-cluster分配到yarn集群结点运行的。这种per-job方式，我想知道老师一般大厂都是怎么配置，怎么去运行的？","like_count":0,"discussions":[{"author":{"id":1119779,"avatar":"https://static001.geekbang.org/account/avatar/00/11/16/23/99c7ede5.jpg","nickname":"张利兵","note":"","ucode":"DBAE17970AB143","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":505550,"discussion_content":"具体情况要具体看了，主要还是根据数据处理量来","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600481559,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":247738,"user_name":"温馨提示","can_delete":false,"product_type":"c3","uid":1080405,"ip_address":"","ucode":"DACC2FC99C1C68","user_header":"https://static001.geekbang.org/account/avatar/00/10/7c/55/44a7ec8d.jpg","comment_is_top":false,"comment_ctime":1599812985,"is_pvip":false,"replies":[{"id":91406,"content":"不太理解你问的问题，Flink On Yarn和Standalone没有直接的关系","user_name":"作者回复","user_name_real":"张利兵","uid":1119779,"ctime":1600481725,"ip_address":"","comment_id":247738,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100058801,"comment_content":"老师，请问一下，flink on yarn 是不是一定要建立在 flink standlone 之上？如果仅仅是单节点的 flink 可以么？","like_count":0,"discussions":[{"author":{"id":1119779,"avatar":"https://static001.geekbang.org/account/avatar/00/11/16/23/99c7ede5.jpg","nickname":"张利兵","note":"","ucode":"DBAE17970AB143","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":505481,"discussion_content":"不太理解你问的问题，Flink On Yarn和Standalone没有直接的关系","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600481725,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1751214,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/b8/ae/085484e7.jpg","nickname":"Insomnia","note":"","ucode":"5986A48988D6E3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":340594,"discussion_content":"flink on yarn 和 spark on yarn 不一样, flink on yarn 模式, flink 只是一个客户端, 它只是用来解析用户 user.jar 生成 JobGraph, 然后将你本地客户端的 flink 配置读取出来,  然后将这些全部交给 Yarn 集群去调度, 之后的事情可以说跟你本地客户端没有关系了, 所以 on yarn 模式不需要配置 flink 集群, 只需要配置好一个 flink 客户端就 OK 了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610073243,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":288413,"user_name":"平头哥","can_delete":false,"product_type":"c3","uid":1977380,"ip_address":"","ucode":"A26580A30D13C7","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/C34zKborjMCkDd1hWiaBlh7KNM9xxLPQcxJLKh3Ho4Ij88sRNT2n1HZmkLPScc0wen8ExQXWp3U5VIhkyw1ibqcw/132","comment_is_top":false,"comment_ctime":1618460641,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100058801,"comment_content":"per-job 模式下是不需要高可用的吧，只需要设置作业重启策略就行吧，因为job manager 是独享的？老师求解惑","like_count":2},{"had_liked":false,"id":387608,"user_name":"张爽","can_delete":false,"product_type":"c3","uid":1819530,"ip_address":"上海","ucode":"C83A60FB08ADAE","user_header":"https://static001.geekbang.org/account/avatar/00/1b/c3/8a/fb3faf41.jpg","comment_is_top":false,"comment_ctime":1708243302,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100058801,"comment_content":"hdfs可以用本地目录地址替代嘛 ？","like_count":0},{"had_liked":false,"id":330920,"user_name":"伏流","can_delete":false,"product_type":"c3","uid":1349254,"ip_address":"","ucode":"A7473AB97E7E39","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoM7qRSToX2H3DAADTJEdqVEZUIbOz4Yic4eicYNR6C1lAia5hCexYxzflDf3oCaozQvDzhtbbOPRRGQ/132","comment_is_top":false,"comment_ctime":1642301070,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100058801,"comment_content":"老师，请问一下，per-job模式是不是不需要配置高可用？","like_count":0},{"had_liked":false,"id":318666,"user_name":"周钱","can_delete":false,"product_type":"c3","uid":2733434,"ip_address":"","ucode":"C3FF251C2B26D7","user_header":"","comment_is_top":false,"comment_ctime":1635385454,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":2,"product_id":100058801,"comment_content":"老师使用的 终端工具是什么呀","like_count":0,"discussions":[{"author":{"id":1931030,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/77/16/96ef147f.jpg","nickname":"王欢","note":"","ucode":"A2D5C3AF6F6D7F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":532748,"discussion_content":"vscode","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637677041,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":308043,"user_name":"Geek_164e25","can_delete":false,"product_type":"c3","uid":2741241,"ip_address":"","ucode":"8581E1EF328D8E","user_header":"","comment_is_top":false,"comment_ctime":1629366641,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":2,"product_id":100058801,"comment_content":"high-availability.storageDir 可以写成本机得一个目录吗","like_count":0,"discussions":[{"author":{"id":2015837,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/eLco0zzPFg7oyiaia1uoMJ1gQKB6QVn69Nlvc07UD7ltpIVfsamMR4ExejkYlicxcue6Ft9Mo4Kumb6BUTtvWiaejQ/132","nickname":"钟洋洋","note":"","ucode":"8D8119921F2A70","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":389902,"discussion_content":"请问你解决了吗，我也遇到了类似的问题","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629474736,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":268298,"user_name":"扭高达💨🌪","can_delete":false,"product_type":"c3","uid":1906054,"ip_address":"","ucode":"3737A3DCD58EA3","user_header":"https://static001.geekbang.org/account/avatar/00/1d/15/86/15b942d6.jpg","comment_is_top":false,"comment_ctime":1608128152,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":2,"product_id":100058801,"comment_content":"Per job模式高可用是在flink的配置文件里面像flink on yarn session里配置好后直接flink run就可以了吗","like_count":0,"discussions":[{"author":{"id":1310388,"avatar":"https://static001.geekbang.org/account/avatar/00/13/fe/b4/295338e7.jpg","nickname":"Allan","note":"","ucode":"8DA4DBECC2C45C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":349788,"discussion_content":"可以的 per job直接flink run 就可以了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1613543177,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":266674,"user_name":"也无名","can_delete":false,"product_type":"c3","uid":1847908,"ip_address":"","ucode":"174E6122E9B947","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKZicicibGibtR5zMkY5ia9Mn8sFJxHACMwtPfdstWLhXWPVTO1h6EMMo9KgVE8gb6aIzR7mDrUAZZpSNQ/132","comment_is_top":false,"comment_ctime":1607435039,"is_pvip":false,"replies":null,"discussion_count":2,"race_medal":0,"score":2,"product_id":100058801,"comment_content":"老师，master的配置怎吗是node01,node02而不是具体ip，包括worker的配置，网络中是怎吗找到node01 02 03... 的？","like_count":0,"discussions":[{"author":{"id":1609530,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/l4nngwyggBGqeMXC0micwO8bM1hSttgQXa1Y5frJSqWa8NibDhia5icwPcHM5wOpV3hfsf0UicDY0ypFqnQ3iarG0T1w/132","nickname":"Trident","note":"","ucode":"53E6788CF33398","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":577822,"discussion_content":"对的，配置hosts即可","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656373361,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1532409,"avatar":"","nickname":"supreme","note":"","ucode":"AD87586C006848","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":336062,"discussion_content":"配置了host吧，就不需要ip了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608466246,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}