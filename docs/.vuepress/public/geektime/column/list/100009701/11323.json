{"id":11323,"title":"07 |  “两个披萨”团队的代码管理实际案例","content":"<p>在亚马逊内部有所谓的“两个披萨”团队，指的是团队的人数不能多到两个披萨饼还不够吃的地步。也就是说，<strong>团队要小到让每个成员都能做出显著贡献，并且相互依赖，有共同目标，以及统一的成功标准，这样团队的工作效率才会高。</strong></p>\n<p>现在有很多互联网公司喜欢采用“两个匹萨”团队的模式，你可能很好奇，这些团队通常是如何实施代码管理的？</p>\n<p>当前国内互联网公司通常采用特性分支开发的模式，我在第四篇文章《一切的源头，代码分支策略的选择》中，为你详细介绍了这种模式，下面我就以这种模式为例，为你解开困惑。</p>\n<p>以迭代周期为一周的项目为例，我将按照从周一到周五的时间顺序，通过整个团队在每天的工作内容，跟你分享项目任务分配，分支创建、集成与分支合并、上线，包括分支删除的关系。你可以从中了解互联网公司研发团队日常代码管理的真实情况，体会团队为了提高研发效率，在代码管理上做出的创新与改进。</p>\n<h2>背景</h2>\n<p>周一上午 11：30，“复仇者” 团队的周会结束，会议室里陆续走出了6名工程师：</p>\n<ul>\n<li>“钢铁侠”：5年一线开发经验，现任“复仇者”项目经理及产品负责人；</li>\n<li>“美国队长”：6年开发经验，负责“复仇者”项目的技术架构，兼开发工作；</li>\n<li>“绿巨人”：3年开发经验，全栈开发；</li>\n<li>“雷神”：3年开发经验，全栈开发；</li>\n<li>“蜘蛛侠”：1年开发经验，负责几个成熟模块的维护；</li>\n<li>“黑寡妇”：资深测试工程师，负责系统集成与测试。</li>\n</ul><!-- [[[read_end]]] -->\n<p>其他同事泡咖啡喝茶的时候，“钢铁侠”在公司的GitLab 上已经把  issue 分配给了团队成员，预示着忙碌又充实的一周要开始了。</p>\n<h2>周一下午</h2>\n<p>“美国队长”“绿巨人”“雷神”“蜘蛛侠”这4名开发人员早已熟悉团队的工作流程，午休之后，他们纷纷打开 GitLab 界面，在待办事项上找到自己的 issue，查看无误后，直接根据 issue 建好了新的特性分支。</p>\n<p>每个新分支代表了一个具体的任务，待四人建好新分支后，“钢铁侠”不由得微微一笑，心想：哈哈，任务都被大伙儿认领了，看样子，他们下午就要开工啦。这4名开发人员新建的4个分支，如图1所示。</p>\n<p><img src=\"https://static001.geekbang.org/resource/image/66/4d/6637c70899f06eba1d85e384c9e3404d.png?wh=1740*733\" alt=\"\" /></p>\n<center>图1 开发人员新建的4个分支</center>\n<p>这时，资深测试工程师“黑寡妇”也没闲着，开始查看起本周计划完成的issue，整理出功能点、性能要求和粗粒度的接口列表，基本明确了测试范围。随后，她在公司GitLab平台上为本周迭代设置好了“Smart  Merge”，如图2所示。</p>\n<p><img src=\"https://static001.geekbang.org/resource/image/91/28/913cdf0e0217a8f139e45e3efa8d1528.png?wh=1740*733\" alt=\"\" /></p>\n<center>图2  配置Smart  Merge</center>\n<p>要是有新人加入团队，“黑寡妇”肯定会向他推荐这个“Smart  Merge”（<a href=\"https://github.com/gitlab-extra/smart_merge\">Smart  Merge</a>是我和几个好友一同开发的GitLab插件，其作用是高效地解决分支合并的一系列问题）。高效的工作习惯使得“黑寡妇”早已整理好了说明文档，以便随时分享给其他同事。</p>\n<p>有了Smart  Merge，任何一个分支的变更会自动触发合并，一旦出现冲突，开发人员就会立刻收到邮件通知。</p>\n<p>周一下班前，4位开发人员分别把各自的本地分支push到了 GitLab 平台。集成后没有冲突，大家开开心心回家了。</p>\n<h2>周二</h2>\n<p>“美国队长”起了个大早，9点半就到公司了，昨天他已经实现了核心功能，今天要完善这些功能并升级 API。他忙了个把小时，本地开发自测完成，并把本地 feature/captain 分支push 到了 GitLab 服务器。</p>\n<p>一分钟不到，“美国队长”的邮箱收到了 GitLab 发来的通知，告诉他刚提交的某两个文件和 feature/hulk 分支发生了冲突。</p>\n<p>“美国队长”知道肯定是黑寡妇创建的 Smart  Merge 帮助自己快速发现了冲突，他直接用 GitLab 的 compare 功能对比了 feature/captain 和 feature/hulk 这两个分支，找到了冲突所在的行。</p>\n<p>通过分析，“美国队长”判断出feature/hulk的变更是合适的，这个冲突应该由他解决掉。</p>\n<p>“美国队长”选择在本地对自己的分支执行 git rebase -i ，把引入冲突的commit进行了变更，自测通过后，再次把 feature/captain 分支push到了 GitLab 。为了确保冲突的问题已经被解决，他打开了Smart  Merge，发现状态是“已合并”（Merged） ，这才端起杯子泡咖啡去了。</p>\n<p>上午10:00前后，“绿巨人”等人也陆陆续续到公司了。团队已经约好了协作节奏：每周四下班前完成一个迭代的上线。</p>\n<p>通常周二下午开发人员要把每个 issue 的基本功能开发好，“黑寡妇”周二下午会给 Smart  Merge 配置好持续交付的环境，一旦某个分支 push 后，自动完成分支合并，然后自动编译、打包，并部署到测试环境。</p>\n<p>在测试环境上，除了跑自动化测试外，“黑寡妇”也会手工做一些集成测试和性能测试。</p>\n<p>周二下午，“美国队长”开始 review 大家的代码，他把本周开发的4个分支，在GitLab上分别创建了4个merge request，目标分支都是 master 。</p>\n<p>“美国队长”觉得 GitLab 的 review 功能很完善，交互也很便捷。这时，其他3名开发人员，忙着写代码和自测。“黑寡妇”除了搭建测试环境外，还补充了自动化测试的用例。</p>\n<h2>周三</h2>\n<p>经过周一和周二的努力，本周的基本功能均已实现，“黑寡妇”开始对系统实施集成测试，并做一些压力测试。</p>\n<p>上午测试时，“黑寡妇”发现在某些场景下系统存在较大的延迟，这个问题在上周的版本中并不存在。她判断是本周新引入的功能导致了这个问题，但一下子又很难确定是怎么引起的。</p>\n<p>于是，“黑寡妇”决定修改 Smart  Merge 的配置，把嫌疑最大的分支剔除掉后再打包测试。通过这样的方式，最后查出是 feature/thor 这个分支引入的问题，她把测试情况详尽地告诉了“雷神”。</p>\n<p>大半个下午雷神都在查问题，到下午四点钟时，问题终于被“雷神”修复了，他把 feature/thor 分支做了 push，然后向“黑寡妇”求助，请她合入自己的分支后再帮忙做测试。</p>\n<p>“黑寡妇”把“雷神”的分支重新加回到 Smart  Merge 中，并把编译包重新部署到了测试环境。经过测试验证：延时大的问题真的不见了。</p>\n<p>下班前，“黑寡妇”召集项目组开了个简短的质量会议，大家商量后认为本周计划内的四个开发任务集成后没有大的质量问题，周四可以一起上线。</p>\n<p>会后，“黑寡妇”看了看本周的四个合并请求，“美国队长”对四个请求意见都是赞成合入 master，Sonar 检查也都合格，加上自己测下来质量也过关，于是，她果断地接受了四个合并申请。</p>\n<p>在回家前，master 对应的最新 commit 已经顺利地编译、打包后被发到用户验收测试环境，“黑寡妇”对这个环境启动了自动化测试服务。</p>\n<p>至此，测试加修复Bug，忙碌了一整天，大家终于可以回家休息了。</p>\n<h2>周四</h2>\n<p>“黑寡妇”一早上班时，首先查看了自动化测试的结果，显示 master 分支构建出的包符合质量要求。于是，她又对没有设计自动化测试用例的部分，进行了手工测试，发现几个界面上存在文字描述的问题，随后通知开发做修复。</p>\n<p>开发在本地分支上修复问题后 push 到 GitLab，再次发起合并请求，“黑寡妇”逐个接受了这几个 Fix 的请求。</p>\n<p>到中午时分，用于上线的产品包终于生成了。</p>\n<p>等到发布窗口开启时，“黑寡妇”通过公司的发布系统把合格的产品包发布到了线上。观察一段时间，线上运行都正常。</p>\n<p>对应本次上线，“黑寡妇”及时给 master 打了tag，然后把本周成功发布的消息通知到项目组，并向“钢铁侠”做了汇报。</p>\n<p>“钢铁侠”看大伙儿忙碌了这么多天，豪爽地请大家喝果汁，并告诉大家他又有几个紧急的用户需求，嘱咐大伙下周继续努力。</p>\n<h2>周五</h2>\n<p>通常在这一天，项目组会一起清理过期的分支，删除本周已合并到 master 的分支。而对于下周开发的新分支，项目组约定统一从 master 上拉取。另外，利用这一天，项目组也会召开回顾和改进会议，以讨论解决目前的一些已有问题的方案，这些讨论即包含工作流程问题，也包含代码和系统等问题。</p>\n<h2>总结</h2>\n<p>我介绍了由6人组成的“两个披萨”团队代码管理的实践，通过周一到周五的具体活动，你可以看到采用特性分支开发的团队是如何创建分支、集成分支和删除分支的，希望能对你的日常工作也有所帮助。</p>\n<h2>思考题</h2>\n<p>假设有A、B、C三个功能依次被合并到master并准备上线，此时发现A功能有问题，不能上线，而B和C则必须上线，此时你会采取什么办法来解决？</p>\n<p>欢迎你给我留言。</p>\n<p></p>\n","neighbors":{"left":{"article_title":"06 | 代码回滚，你真的理解吗？","id":11042},"right":{"article_title":"08 | 测试环境要多少？从现实需求说起","id":11468}},"comments":[{"had_liked":false,"id":16576,"user_name":"Nick~毓","can_delete":false,"product_type":"c1","uid":1126880,"ip_address":"","ucode":"BBD6225507B10E","user_header":"https://static001.geekbang.org/account/avatar/00/11/31/e0/543d3a1d.jpg","comment_is_top":false,"comment_ctime":1532045138,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"61661587282","product_id":100009701,"comment_content":"多说一些 devops 持续交付 持续部署 持续集成 相关的理论 流程 标准 和实战经验吧","like_count":15},{"had_liked":false,"id":16545,"user_name":"破晓","can_delete":false,"product_type":"c1","uid":1153316,"ip_address":"","ucode":"13C33DE0CFD43B","user_header":"https://static001.geekbang.org/account/avatar/00/11/99/24/e1cb609e.jpg","comment_is_top":false,"comment_ctime":1532014799,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"40186720463","product_id":100009701,"comment_content":"回滚到提交abc前，重新上bc。","like_count":10},{"had_liked":false,"id":21660,"user_name":"军秋","can_delete":false,"product_type":"c1","uid":1108456,"ip_address":"","ucode":"D73025209CBFAE","user_header":"https://static001.geekbang.org/account/avatar/00/10/e9/e8/31df61df.jpg","comment_is_top":false,"comment_ctime":1535212579,"is_pvip":false,"replies":[{"id":"7759","content":"行得通，但是这类问题多了就会造成很多并无实际价值的业务开关，本身业务开关的管理也不是那么简单，因此此方法可以应急，但不推荐铺开使用","user_name":"作者回复","user_name_real":"潇俊","uid":"1004285","ctime":1535337485,"ip_address":"","comment_id":21660,"utype":1}],"discussion_count":2,"race_medal":0,"score":"18715081763","product_id":100009701,"comment_content":"看B C是否有依赖A的功能，没有依赖撤回A，上线后两个，若有依赖，做个业务开关关闭A的功能保留BC依赖的功能，保证BC上线，A功能延期到下一个版本","like_count":4,"discussions":[{"author":{"id":1004285,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/52/fd/abb7bfe3.jpg","nickname":"潇俊","note":"","ucode":"D5DFD3E2119D95","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":422790,"discussion_content":"行得通，但是这类问题多了就会造成很多并无实际价值的业务开关，本身业务开关的管理也不是那么简单，因此此方法可以应急，但不推荐铺开使用","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1535337485,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2063114,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/7b/0a/b65e1fae.jpg","nickname":"不要挑战自己的智商","note":"","ucode":"4910FF07C35DC5","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1004285,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/52/fd/abb7bfe3.jpg","nickname":"潇俊","note":"","ucode":"D5DFD3E2119D95","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":555414,"discussion_content":"同意，既然A功能有问题，就不应该放到生产代码上去。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646897221,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":422790,"ip_address":""},"score":555414,"extra":""}]}]},{"had_liked":false,"id":36246,"user_name":"陈文涛","can_delete":false,"product_type":"c1","uid":1275215,"ip_address":"","ucode":"2B52230E2D69EB","user_header":"https://static001.geekbang.org/account/avatar/00/13/75/4f/2edbb97e.jpg","comment_is_top":false,"comment_ctime":1540993030,"is_pvip":false,"replies":[{"id":"12903","content":"当然要做啊，只是不限制形式，减少没有必要的paper works，比如以backlog，story等代替需求文档等，增加沟通，当然必要的设计说明也是要做的","user_name":"作者回复","user_name_real":"潇俊","uid":"1004285","ctime":1541041500,"ip_address":"","comment_id":36246,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14425894918","product_id":100009701,"comment_content":"老师我很好奇，大厂不写设计文档，不做设计评审，不做需求评审么，还是这场景忽略掉了。。。。","like_count":4,"discussions":[{"author":{"id":1004285,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/52/fd/abb7bfe3.jpg","nickname":"潇俊","note":"","ucode":"D5DFD3E2119D95","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":427797,"discussion_content":"当然要做啊，只是不限制形式，减少没有必要的paper works，比如以backlog，story等代替需求文档等，增加沟通，当然必要的设计说明也是要做的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1541041500,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":21572,"user_name":"james","can_delete":false,"product_type":"c1","uid":1049208,"ip_address":"","ucode":"5701899403917C","user_header":"https://static001.geekbang.org/account/avatar/00/10/02/78/23c56bce.jpg","comment_is_top":false,"comment_ctime":1535171394,"is_pvip":false,"replies":[{"id":"7758","content":"应该说是整个group中的所有分支都会被合并到一个临时的，虚拟的分支里","user_name":"作者回复","user_name_real":"潇俊","uid":"1004285","ctime":1535337304,"ip_address":"","comment_id":21572,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14420073282","product_id":100009701,"comment_content":"老师，smart merge 的作用是不是, 先选定 N 个分支组成一个 group, 之后 group 中任何一个分支变更, 都合并到 group 中另外的几个分支中?","like_count":4,"discussions":[{"author":{"id":1004285,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/52/fd/abb7bfe3.jpg","nickname":"潇俊","note":"","ucode":"D5DFD3E2119D95","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":422748,"discussion_content":"应该说是整个group中的所有分支都会被合并到一个临时的，虚拟的分支里","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1535337304,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":17746,"user_name":"alan","can_delete":false,"product_type":"c1","uid":1083425,"ip_address":"","ucode":"2CA8D0B6B7D5A9","user_header":"https://static001.geekbang.org/account/avatar/00/10/88/21/50b2418a.jpg","comment_is_top":false,"comment_ctime":1532924280,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14417826168","product_id":100009701,"comment_content":"非常需要这篇文章的经验，感谢！","like_count":3},{"had_liked":false,"id":16583,"user_name":"心在飞","can_delete":false,"product_type":"c1","uid":1001630,"ip_address":"","ucode":"80551D24593175","user_header":"https://static001.geekbang.org/account/avatar/00/0f/48/9e/99cb0a7a.jpg","comment_is_top":false,"comment_ctime":1532046937,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"10121981529","product_id":100009701,"comment_content":"1. 做个业务快关，关闭A功能。 需要提交新的commit  D<br>2. 删除A功能，在A的MR中点击revert，gitlab会自动产生新的commit D，不过这时候还需要做B，C的测试，确保他们功能没受影响。","like_count":2,"discussions":[{"author":{"id":1242455,"avatar":"https://static001.geekbang.org/account/avatar/00/12/f5/57/ce10fb1b.jpg","nickname":"天天向上","note":"","ucode":"0CCCA6F4DCC480","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":68650,"discussion_content":"问个问题哈，如果地A进行了revert，之后A再次向master进行MR，由于revert过，代码就会丢失啊，请问这种怎么解决呢？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575214023,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":16520,"user_name":"王浩槟","can_delete":false,"product_type":"c1","uid":1170413,"ip_address":"","ucode":"C7571671413E01","user_header":"https://static001.geekbang.org/account/avatar/00/11/db/ed/106a8ec9.jpg","comment_is_top":false,"comment_ctime":1532001310,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10121935902","product_id":100009701,"comment_content":"好羡慕好喜欢这个开发流程，一定要搭建出这个环境😻 ","like_count":2},{"had_liked":false,"id":16424,"user_name":"mgxian","can_delete":false,"product_type":"c1","uid":1014806,"ip_address":"","ucode":"7B7E77E6A83B87","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7c/16/4d1e5cc1.jpg","comment_is_top":false,"comment_ctime":1531958481,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10121893073","product_id":100009701,"comment_content":"使用gitlab合并请求页面的revert功能 撤销a功能的合并","like_count":2},{"had_liked":false,"id":144111,"user_name":"Linton","can_delete":false,"product_type":"c1","uid":1046562,"ip_address":"","ucode":"7918113F03FD44","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f8/22/a59136c2.jpg","comment_is_top":false,"comment_ctime":1571843980,"is_pvip":false,"replies":[{"id":"57366","content":"是个gitlab service，不需要重新安装，但可能有版本要求，","user_name":"作者回复","user_name_real":"潇俊","uid":"1004285","ctime":1573183111,"ip_address":"","comment_id":144111,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5866811276","product_id":100009701,"comment_content":"smart_merge是需要Gitlab通过源码方式一并安装吗? ","like_count":1,"discussions":[{"author":{"id":1004285,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/52/fd/abb7bfe3.jpg","nickname":"潇俊","note":"","ucode":"D5DFD3E2119D95","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":471815,"discussion_content":"是个gitlab service，不需要重新安装，但可能有版本要求，","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573183111,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":21573,"user_name":"james","can_delete":false,"product_type":"c1","uid":1049208,"ip_address":"","ucode":"5701899403917C","user_header":"https://static001.geekbang.org/account/avatar/00/10/02/78/23c56bce.jpg","comment_is_top":false,"comment_ctime":1535171415,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5830138711","product_id":100009701,"comment_content":"smart merge 的作用是不是, 先选定 N 个分支组成一个 group, 之后 group 中任何一个分支变更, 都合并到 group 中另外的几个分支中?","like_count":1},{"had_liked":false,"id":18048,"user_name":"柠檬水","can_delete":false,"product_type":"c1","uid":1133649,"ip_address":"","ucode":"B105855D7FF8FB","user_header":"https://static001.geekbang.org/account/avatar/00/11/4c/51/a339d363.jpg","comment_is_top":false,"comment_ctime":1533107467,"is_pvip":false,"replies":[{"id":"6613","content":"可以提issue到项目，我们会跟进的：）","user_name":"作者回复","user_name_real":"潇俊","uid":"1004285","ctime":1533692179,"ip_address":"","comment_id":18048,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5828074763","product_id":100009701,"comment_content":"您好，看过你们在Github上的smart_merge工具了，但是文档不像是Gitlab的一个插件，安装过程也和Gitlab的插件安装不同，能指点一下方向吗？谢谢。","like_count":1,"discussions":[{"author":{"id":1004285,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/52/fd/abb7bfe3.jpg","nickname":"潇俊","note":"","ucode":"D5DFD3E2119D95","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":421371,"discussion_content":"可以提issue到项目，我们会跟进的：）","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1533692179,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":17480,"user_name":"手指饼干","can_delete":false,"product_type":"c1","uid":1048607,"ip_address":"","ucode":"1AC502D2B782F0","user_header":"","comment_is_top":false,"comment_ctime":1532675372,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5827642668","product_id":100009701,"comment_content":"请问smart_merge是不是从master创建sprint26分支？如果feature分支往sprint26分支合并有冲突，到后面往master分支合并是不是要解决同样的冲突？","like_count":1},{"had_liked":false,"id":16533,"user_name":"lee🙃","can_delete":false,"product_type":"c1","uid":1169467,"ip_address":"","ucode":"02E8C4C0B7CF40","user_header":"https://static001.geekbang.org/account/avatar/00/11/d8/3b/b77b78c1.jpg","comment_is_top":false,"comment_ctime":1532009237,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5826976533","product_id":100009701,"comment_content":"撤回a分支的合并，保留b、C分支的合并","like_count":1},{"had_liked":false,"id":16522,"user_name":"图·美克尔","can_delete":false,"product_type":"c1","uid":1076720,"ip_address":"","ucode":"021FB5AE110066","user_header":"https://wx.qlogo.cn/mmopen/vi_32/DYAIOgq83eppQqDE6TNibvr3DNdxG323AruicIgWo5DpVr6U7yZVNkbF2rKluyDfhdpgAEcYEOZTAnbrMdTzFkUw/0","comment_is_top":false,"comment_ctime":1532005123,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5826972419","product_id":100009701,"comment_content":"在gitlab上找到a的合并请求，revert。","like_count":1},{"had_liked":false,"id":304145,"user_name":"花灰","can_delete":false,"product_type":"c1","uid":1077731,"ip_address":"","ucode":"CA1474945A2A7E","user_header":"https://static001.geekbang.org/account/avatar/00/10/71/e3/afdc92e1.jpg","comment_is_top":false,"comment_ctime":1627271953,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1627271953","product_id":100009701,"comment_content":"qa啥时候写的自动化case呀？","like_count":0},{"had_liked":false,"id":280442,"user_name":"小寞子。(≥3≤)","can_delete":false,"product_type":"c1","uid":1206545,"ip_address":"","ucode":"6D978BDCBB2862","user_header":"https://static001.geekbang.org/account/avatar/00/12/69/11/831cec7d.jpg","comment_is_top":false,"comment_ctime":1614217835,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1614217835","product_id":100009701,"comment_content":"和我们差不多 但是我对于个人branch 而不是feature branch 这种操作还是有点不赞同。 ","like_count":0,"discussions":[{"author":{"id":1220775,"avatar":"https://static001.geekbang.org/account/avatar/00/12/a0/a7/db7a7c50.jpg","nickname":"送普选","note":"","ucode":"AB2C98BB9C3A5D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":366177,"discussion_content":"个人branch分支会比较少，有啥不好么？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617975719,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":244878,"user_name":"Geek_745c15","can_delete":false,"product_type":"c1","uid":2151860,"ip_address":"","ucode":"0355072C1D223A","user_header":"","comment_is_top":false,"comment_ctime":1598713552,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1598713552","product_id":100009701,"comment_content":"大家项目多久一个版本，如果是APP项目，如何划分版本周期","like_count":0},{"had_liked":false,"id":230932,"user_name":"coco張","can_delete":false,"product_type":"c1","uid":1522583,"ip_address":"","ucode":"48712CAC9FE4EC","user_header":"https://static001.geekbang.org/account/avatar/00/17/3b/97/ce00cd8d.jpg","comment_is_top":false,"comment_ctime":1593525264,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1593525264","product_id":100009701,"comment_content":"我们都是monorepo的模式，fork代码再从自己的repo往原始库提交代码","like_count":0},{"had_liked":false,"id":212093,"user_name":"howei","can_delete":false,"product_type":"c1","uid":1301215,"ip_address":"","ucode":"D4D0A9C99AB0B7","user_header":"https://static001.geekbang.org/account/avatar/00/13/da/df/3739e120.jpg","comment_is_top":false,"comment_ctime":1588060286,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1588060286","product_id":100009701,"comment_content":"我们都是主干开发，没有那么多分支，看的烦，合并什么的，所以分支相关的我不看了","like_count":0},{"had_liked":false,"id":121919,"user_name":"猩猩","can_delete":false,"product_type":"c1","uid":1193852,"ip_address":"","ucode":"102ADA39C145CF","user_header":"https://static001.geekbang.org/account/avatar/00/12/37/7c/ffa62584.jpg","comment_is_top":false,"comment_ctime":1565249063,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1565249063","product_id":100009701,"comment_content":"没有看懂smart merge的作用。是自动往master合并吗？那周二下午”美国队长“做的merge request又是什么？","like_count":0},{"had_liked":false,"id":118739,"user_name":"Triton","can_delete":false,"product_type":"c1","uid":1103776,"ip_address":"","ucode":"B6C7C2AEF2B649","user_header":"https://static001.geekbang.org/account/avatar/00/10/d7/a0/15c82d8b.jpg","comment_is_top":false,"comment_ctime":1564444181,"is_pvip":false,"replies":[{"id":"57411","content":"如果是hotfix，那也是需要独立建分支的","user_name":"作者回复","user_name_real":"潇俊","uid":"1004285","ctime":1573194704,"ip_address":"","comment_id":118739,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1564444181","product_id":100009701,"comment_content":"如果是BUG也需要创建分支吗？","like_count":0,"discussions":[{"author":{"id":1004285,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/52/fd/abb7bfe3.jpg","nickname":"潇俊","note":"","ucode":"D5DFD3E2119D95","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460553,"discussion_content":"如果是hotfix，那也是需要独立建分支的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573194704,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":101645,"user_name":"春之绿野","can_delete":false,"product_type":"c1","uid":1057216,"ip_address":"","ucode":"296003F7D2B086","user_header":"https://static001.geekbang.org/account/avatar/00/10/21/c0/38816c31.jpg","comment_is_top":false,"comment_ctime":1559898701,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1559898701","product_id":100009701,"comment_content":"Revert掉A不就行了吗？<br>最后合进去的fix不测试吗？","like_count":0},{"had_liked":false,"id":60583,"user_name":"Jessica","can_delete":false,"product_type":"c1","uid":1312356,"ip_address":"","ucode":"5FE1DF30B115DB","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erTZ0G0Kf5LcKaItbic4f0d2TFlVqQfdg2o9qC4zLmExQl49w6cWpc0O11guwt3xdpRax1XzQ8Sh6g/132","comment_is_top":false,"comment_ctime":1547516059,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1547516059","product_id":100009701,"comment_content":"老师，我公司目前用的是GitHub管理代码，有办法在GitHub上使用Smart Merge插件吗？","like_count":0},{"had_liked":false,"id":54700,"user_name":"红娟","can_delete":false,"product_type":"c1","uid":1164879,"ip_address":"","ucode":"F5988451FC91A6","user_header":"https://static001.geekbang.org/account/avatar/00/11/c6/4f/0c215abf.jpg","comment_is_top":false,"comment_ctime":1545955291,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1545955291","product_id":100009701,"comment_content":"合作很流畅啊 ","like_count":0},{"had_liked":false,"id":38562,"user_name":"frankie","can_delete":false,"product_type":"c1","uid":1021805,"ip_address":"","ucode":"162F203BE0CC6D","user_header":"https://static001.geekbang.org/account/avatar/00/0f/97/6d/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1542075049,"is_pvip":false,"replies":[{"id":"13824","content":"是的，但是却不会污染主干","user_name":"作者回复","user_name_real":"潇俊","uid":"1004285","ctime":1542080845,"ip_address":"","comment_id":38562,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1542075049","product_id":100009701,"comment_content":"有了 Smart Merge，任何一个分支的变更会自动触发合并----那这个跟主干开发似乎差不多吧？","like_count":0,"discussions":[{"author":{"id":1004285,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/52/fd/abb7bfe3.jpg","nickname":"潇俊","note":"","ucode":"D5DFD3E2119D95","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":428749,"discussion_content":"是的，但是却不会污染主干","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1542080845,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":17753,"user_name":"Guti","can_delete":false,"product_type":"c1","uid":1055173,"ip_address":"","ucode":"59D3FE47A62156","user_header":"https://static001.geekbang.org/account/avatar/00/10/19/c5/c941c9be.jpg","comment_is_top":false,"comment_ctime":1532927612,"is_pvip":false,"replies":[{"id":"6194","content":"pull request是github的功能，我们基于开源的gitlab处理的代码平台，所以使用的是merge request，两者还是有一定区别<br><br>至于smart merge插件，对于大型团队，并行开发多的就会看出它的价值了","user_name":"作者回复","user_name_real":"潇俊","uid":"1004285","ctime":1533010037,"ip_address":"","comment_id":17753,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1532927612","product_id":100009701,"comment_content":"感觉不怎么专业啊，连pull request都不用？携程自己开发的smart啥没看出多大作用","like_count":0,"discussions":[{"author":{"id":1004285,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/52/fd/abb7bfe3.jpg","nickname":"潇俊","note":"","ucode":"D5DFD3E2119D95","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":421259,"discussion_content":"pull request是github的功能，我们基于开源的gitlab处理的代码平台，所以使用的是merge request，两者还是有一定区别\n\n至于smart merge插件，对于大型团队，并行开发多的就会看出它的价值了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1533010037,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":16632,"user_name":"李志博","can_delete":false,"product_type":"c1","uid":1009109,"ip_address":"","ucode":"F3C72573B3C112","user_header":"https://static001.geekbang.org/account/avatar/00/0f/65/d5/88beb15a.jpg","comment_is_top":false,"comment_ctime":1532057595,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1532057595","product_id":100009701,"comment_content":"携程邮轮服务一点也不好，哼","like_count":0},{"had_liked":false,"id":16494,"user_name":"weineel","can_delete":false,"product_type":"c1","uid":1049741,"ip_address":"","ucode":"6DC6EF4F256A53","user_header":"https://static001.geekbang.org/account/avatar/00/10/04/8d/005c2ff3.jpg","comment_is_top":false,"comment_ctime":1531984195,"is_pvip":true,"discussion_count":0,"race_medal":1,"score":"1531984195","product_id":100009701,"comment_content":"老师您好，最后的思考题已经困惑了好久了，期待解答。","like_count":0}]}