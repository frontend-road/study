{"id":181916,"title":"05丨指标关系：你知道并发用户数应该怎么算吗？","content":"<p>我在性能综述的那三篇文章中，描述了各种指标，比如TPS、RPS、QPS、HPS、CPM等。我也强调了，我们在实际工作的时候，应该对这些概念有统一的认识。</p><p><img src=\"https://static001.geekbang.org/resource/image/d4/5d/d46c772ccce3e8270e5f7be7e915755d.jpg?wh=1694*383\" alt=\"\"></p><p>这样的话，在使用过程中，一个团队或企业从上到下都具有同样的概念意识，就可以避免出现沟通上的偏差。</p><p>我说一个故事。</p><p>我以前接触过一个咨询项目。在我接触之前，性能测试团队一直给老板汇报着一个数据，那就是10000TPS。并且在每个版本之后，都会出一个性能测试报告，老板一看，这个数据并没有少于10000TPS，很好。 后来，我进去一看，他们一直提的这个10000TPS指的是单业务的订单，并且是最基础的订单逻辑。那么问题来了，如果混合起来会怎么样呢？于是我就让他们做个混合容量场景，显然，提容量不提混合，只说单接口的容量是不能满足生产环境要求的。</p><p>结果怎么样呢？只能测试到6000TPS。于是我就要去跟老板解释说系统达到的指标是6000TPS。老板就恼火了呀，同样的系统，以前报的一直是10000TPS，现在怎么只有6000TPS了？不行，你们开发的这个版本肯定是有问题的。于是老板找到了研发VP，研发VP找到了研发经理，研发经理找了研发组长，研发组长又找到了开发工程师，开发工程师找到了我。我说之前不是混合场景的结果，现在混合容量场景最多达到6000TPS，你们可以自己来测。</p><!-- [[[read_end]]] --><p>然后证明，TPS确实只能达到6000。然后就是一轮又一轮的向上解释。</p><p>说这个故事是为了告诉你，你用TPS也好，RPS也好，QPS也好，甚至用西夏文来定义也不是不可以，只要在一个团队中，大家都懂就可以了。</p><p>但是，在性能市场上，我们总要用具有普适性的指标说明，而不是用混乱的体系。</p><p>在这里，我建议用TPS做为关键的性能指标。那么在今天的内容里，我们就要说明白TPS到底是什么。在第3篇文章中，我提到过在不同的测试目标中设置不同的事务，也就是TPS中的T要根据实际的业务产生变化。</p><p>那么问题又来了，TPS和并发数是什么关系呢？ 在并发中谁来承载”并发“这个概念呢？</p><p>说到这个，我们先说一下所谓的“绝对并发”和“相对并发”这两个概念。绝对并发指的是同一时刻的并发数；相对并发指的是一个时间段内发生的事情。</p><p>你能详细说一下这两个概念之间的区别吗？如果说不出来那简直太正常了，因为这两个概念把事情说得更复杂了。</p><h2>什么是并发</h2><p>下面我们就来说一下“并发”这个概念。</p><p><img src=\"https://static001.geekbang.org/resource/image/0e/96/0ef2fca88f59342a64084e147b33af96.jpg?wh=790*303\" alt=\"\"></p><p>我们假设上图中的这些小人是严格按照这个逻辑到达系统的，那显然，系统的绝对并发用户数是4。如果描述1秒内的并发用户数，那就是16。是不是显而易见？</p><p>但是，在实际的系统中，用户通常是这样分配的：</p><p><img src=\"https://static001.geekbang.org/resource/image/1e/23/1e42cc116598acb7c703eec95a7c6723.png?wh=790*303\" alt=\"\"></p><p>也就是说，这些用户会分布在系统中不同的服务、网络等对象中。这时候”绝对并发“这个概念就难描述了，你说的是哪部分的绝对并发呢？</p><p>要说积分服务，那是2；要说库存服务，那是5；要说订单服务，它自己是5个请求正在处理，但同时它又hold住了5个到库存服务的链接，因为要等着它返回之后，再返回给前端。所以将绝对并发细分下去之后，你会发现头都大了，不知道要描述什么了。</p><p>有人说，我们可以通过CPU啊，I/O啊，或者内存来描述绝对并发，来看CPU在同一时刻处理的任务数。如果是这样的话，绝对并发还用算吗？那肯定是CPU的个数呀。有人说CPU 1ns就可以处理好多个任务了，这里的1ns也是时间段呀。要说绝对的某个时刻，任务数肯定不会大于CPU物理个数。</p><p>所以“绝对并发”这个概念，不管是用来描述硬件细化的层面，还是用来描述业务逻辑的层面，都是没什么意义的。</p><p>我们只要描述并发就好了，不用有“相对”和“绝对”的概念，这样可以简化沟通，也不会出错。</p><p>那么如何来描述上面的并发用户数呢？在这里我建议用TPS来承载“并发”这个概念。</p><p>并发数是16TPS，就是1秒内整个系统处理了16个事务。</p><p>这样描述就够了，别纠结。</p><h2>在线用户数、并发用户数怎么计算</h2><p>那么新问题又来了，在线用户数和并发用户数应该如何算呢？下面我们接着来看示意图：</p><p><img src=\"https://static001.geekbang.org/resource/image/1b/99/1beff8afb0116c72dd428eba9d329299.jpg?wh=1110*303\" alt=\"\"></p><p>如上图所示，总共有32个用户进入了系统，但是绿色的用户并没有任何动作，那么显然，在线用户数是32个，并发用户数是16个，这时的并发度就是50%。</p><p>但在一个系统中，通常都是下面这个样子的。</p><p><img src=\"https://static001.geekbang.org/resource/image/59/1c/59fd25efa2fdd259b4fc0b6b462a031c.jpg?wh=1110*345\" alt=\"\"></p><p>为了能hold住更多的用户，我们通常都会把一些数据放到Redis这样的缓存服务器中。所以在线用户数怎么算呢，如果仅从上面这种简单的图来看的话，其实就是缓存服务器能有多大，能hold住多少用户需要的数据。</p><p>最多再加上在超时路上的用户数。如下所示：</p><p><img src=\"https://static001.geekbang.org/resource/image/4b/10/4bbf31a73fd4ccf6245634b8c7eb2910.jpg?wh=1247*345\" alt=\"\"></p><p>所以我们要是想知道在线的最大的用户数是多少，对于一个设计逻辑清晰的系统来说，不用测试就可以知道，直接拿缓存的内存来算就可以了。</p><p>假设一个用户进入系统之后，需要用10k内存来维护一个用户的信息，那么10G的内存就能hold住1,048,576个用户的数据，这就是最大在线用户数了。在实际的项目中，我们还会将超时放在一起来考虑。</p><p>但并发用户数不同，他们需要在系统中执行某个动作。我们要测试的重中之重，就是统计这些正在执行动作的并发用户数。</p><p>当我们统计生产环境中的在线用户数时，并发用户数也是要同时统计的。这里会涉及到一个概念：<strong>并发度</strong>。</p><p>要想计算并发用户和在线用户数之间的关系，都需要有并发度。</p><p>做性能的人都知道，我们有时会接到一个需求，那就是一定要测试出来<strong>系统最大在线用户数是多少</strong>。这个需求怎么做呢？</p><p>很多人都是通过加思考时间（有的压力工具中叫等待时间，Sleep时间）来保持用户与系统之间的session不断，但实际上的并发度非常非常低。</p><p>我曾经看到一个小伙，在一台4C8G的笔记本上用LoadRunner跑了1万个用户，里面的error疯狂上涨，当然正常的事务也有。我问他，你这个场景有什么意义，这么多错？他说，老板要一个最大在线用户数。我说你这些都错了呀。他说，没事，我要的是Running User能达到最大就行，给老板交差。我只能默默地离开了。</p><p>这里有一个比较严重的理解误区，那就是压力工具中的线程或用户数到底是不是用来描述性能表现的？我们通过一个示意图来说明：</p><p><img src=\"https://static001.geekbang.org/resource/image/08/3c/0814da6123f7a7fefedc3a24f364ac3c.jpg?wh=3084*497\" alt=\"\"></p><p>通过这个图，我们可以看到一个简单的计算逻辑：</p><ol>\n<li>如果有10000个在线用户数，同时并发度是1%，那显然并发用户数就是100。</li>\n<li>如果每个线程的20TPS，显然只需要5个线程就够了（请注意，这里说的线程指的是压力机的线程数）。</li>\n<li>这时对Server来说，它处理的就是100TPS，平均响应时间是50ms。50ms就是根据1000ms/20TPS得来的（请注意，这里说的平均响应时间会在一个区间内浮动，但只要TPS不变，这个平均响应时间就不会变）。</li>\n<li>如果我们有两个Server线程来处理，那么一个线程就是50TPS，这个很直接吧。</li>\n<li>请大家注意，这里我有一个转换的细节，那就是<strong>并发用户数到压力机的并发线程数</strong>。这一步，我们通常怎么做呢？就是基准测试的第一步。关于这一点，我们在后续的场景中交待。</li>\n</ol><p>而我们通常说的“并发”这个词，依赖TPS来承载的时候，指的都是Server端的处理能力，并不是压力工具上的并发线程数。在上面的例子中，我们说的并发就是指服务器上100TPS的处理能力，而不是指5个压力机的并发线程数。<strong>请你切记这一点，以免沟通障碍</strong>。</p><p>在我带过的所有项目中，这都是一个沟通的前提。</p><p>所以，我一直在强调一点，这是一个基础的知识：<strong>不要在意你用的是什么压力工具，只要在意你服务端的处理能力就可以了</strong>。</p><h2>示例</h2><p>上面说了这么多，我们现在来看一个实例。这个例子很简单，就是：</p><p>JMeter（1个线程） - Nginx - Tomcat - MySQL</p><p>通过上面的逻辑，我们先来看看JMeter的处理情况：</p><pre><code>summary +   5922 in 00:00:30 =  197.4/s Avg:     4 Min:     0 Max:    26 Err:     0 (0.00%) Active: 1 Started: 1 Finished: 0\nsummary =  35463 in 00:03:05 =  192.0/s Avg:     5 Min:     0 Max:   147 Err:     0 (0.00%)\nsummary +   5922 in 00:00:30 =  197.5/s Avg:     4 Min:     0 Max:    24 Err:     0 (0.00%) Active: 1 Started: 1 Finished: 0\nsummary =  41385 in 00:03:35 =  192.8/s Avg:     5 Min:     0 Max:   147 Err:     0 (0.00%)\nsummary +   5808 in 00:00:30 =  193.6/s Avg:     5 Min:     0 Max:    25 Err:     0 (0.00%) Active: 1 Started: 1 Finished: 0\nsummary =  47193 in 00:04:05 =  192.9/s Avg:     5 Min:     0 Max:   147 Err:     0 (0.00%)\n</code></pre><p>我们可以看到，JMeter的平均响应时间基本都在5ms，因为只有一个压力机线程，所以它的TPS应该接近1000ms/5ms=200TPS。从测试结果上来看，也确实是接近的。有人说为什么会少一点？因为这里算的是平均数，并且这个数据是30s刷新一次，用30秒的时间内完成的事务数除以30s得到的，但是如果事务还没有完成，就不会计算在内了；同时，如果在这段时间内有一两个时间长的事务，也会拉低TPS。</p><p>那么对于服务端呢，我们来看看服务端线程的工作情况。</p><p><img src=\"https://static001.geekbang.org/resource/image/bd/55/bdce20f34b2e0689c21977859f54e155.png?wh=1607*106\" alt=\"\"></p><p>可以看到在服务端，我开了5个线程，但是服务端并没有一直干活，只有一个在干活的，其他的都处于空闲状态。</p><p>这是一种很合理的状态。但是你需要注意的是，这种合理的状态并不一定是对的性能状态。</p><ol>\n<li>并发用户数（TPS）是193.6TPS。如果并发度为5%，在线用户数就是193.6/5%=3872。</li>\n<li>响应时间是5ms。</li>\n<li>压力机并发线程数是1。这一条，我们通常也不对非专业人士描述，只要性能测试工程师自己知道就可以了。</li>\n</ol><p>下面我们换一下场景，在压力机上启动10个线程。结果如下：</p><pre><code>summary +  11742 in 00:00:30 =  391.3/s Avg:    25 Min:     0 Max:   335 Err:     0 (0.00%) Active: 10 Started: 10 Finished: 0\nsummary =  55761 in 00:02:24 =  386.6/s Avg:    25 Min:     0 Max:   346 Err:     0 (0.00%)\nsummary +  11924 in 00:00:30 =  397.5/s Avg:    25 Min:     0 Max:    80 Err:     0 (0.00%) Active: 10 Started: 10 Finished: 0\nsummary =  67685 in 00:02:54 =  388.5/s Avg:    25 Min:     0 Max:   346 Err:     0 (0.00%)\nsummary +  11884 in 00:00:30 =  396.2/s Avg:    25 Min:     0 Max:   240 Err:     0 (0.00%) Active: 10 Started: 10 Finished: 0\nsummary =  79569 in 00:03:24 =  389.6/s Avg:    25 Min:     0 Max:   346 Err:     0 (0.00%)\n</code></pre><p>平均响应时间在25ms，我们来计算一处，(1000ms/25ms)*10=400TPS，而最新刷出来的一条是396.2，是不是非常合理？</p><p>再回来看看服务端的线程：</p><p><img src=\"https://static001.geekbang.org/resource/image/59/90/596564dd3186769bdf546bfdc5bdae90.png?wh=1621*105\" alt=\"\"></p><p>同样是5个线程，现在就忙了很多。</p><ol>\n<li>并发用户数（TPS）是396.2TPS。如果并发度为5%，在线用户数就是396.2/5%=7924。</li>\n<li>响应时间是25ms。</li>\n<li>压力机并发线程数是10。这一条，我们通常也不对非专业人士描述，只要性能测试工程师自己知道就可以了。</li>\n</ol><p>如果要有公式的话，这个计算公式将非常简单：</p><p>$TPS = \\frac{1000ms}{响应时间(单位ms)}*压力机线程数$</p><p>我不打算再将此公式复杂化，所以就不再用字母替代了。</p><p>这就是我经常提到的，<strong>对于压力工具来说，只要不报错，我们就关心TPS和响应时间就可以了，因为TPS反应出来的是和服务器对应的处理能力，至少压力线程数是多少，并不关键</strong>。我想这时会有人能想起来JMeter的BIO和AIO之争吧。</p><p>你也许会说，这个我理解了，服务端有多少个线程，就可以支持多少个压力机上的并发线程。但是这取决于TPS有多少，如果服务端处理的快，那压力机的并发线程就可以更多一些。</p><p>这个逻辑看似很合理，但是通常服务端都是有业务逻辑的，既然有业务逻辑，显然不会比压力机快。</p><p>应该说，服务端需要更多的线程来处理压力机线程发过来的请求。所以我们用几台压力机就可以压几十台服务端的性能了。</p><p>如果在一个微服务的系统中，因为每个服务都只做一件事情，拆分得很细，我们要注意整个系统的容量水位，而不是看某一个服务的能力，这就是拉平整个系统的容量。</p><p>我曾经看一个人做压力的时候，压力工具中要使用4000个线程，结果给服务端的Tomcat上也配置了4000个线程，结果Tomcat一启动，稍微有点访问，CS就特别高，结果导致请求没处理多少，自己倒浪费了不少CPU。</p><h2>总结</h2><p>通过示意图和示例，我描述了在线用户数、并发用户数、TPS（这里我们假设了一个用户只对应一个事务）、响应时间之间的关系。有几点需要强调：</p><ol>\n<li>通常所说的并发都是指服务端的并发，而不是指压力机上的并发线程数，因为服务端的并发才是服务器的处理能力。</li>\n<li>性能中常说的并发，是用TPS这样的概念来承载具体数值的。</li>\n<li>压力工具中的线程数、响应时间和TPS之间是有对应关系的。</li>\n</ol><p>这里既没有复杂的逻辑，也没有复杂的公式。希望你在性能项目中，能简化概念，注重实用性。</p><h2>思考题</h2><p>如果你吸收了今天的内容，不妨思考一下这几个问题：</p><p>如何理解“服务端的并发能力”这一描述？我为什么不提倡使用“绝对并发”和“相对并发”的概念呢？以及，我们为什么不推荐用CPU来计算并发数？</p>","comments":[{"had_liked":false,"id":165532,"user_name":"zuozewei","can_delete":false,"product_type":"c1","uid":1039631,"ip_address":"","ucode":"D594C9CBAF15A5","user_header":"https://static001.geekbang.org/account/avatar/00/0f/dd/0f/ee37a7fe.jpg","comment_is_top":false,"comment_ctime":1577254391,"is_pvip":false,"replies":[{"id":"63110","content":"不仅深得真传，还扩展了。 我看好你哦。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1577263054,"ip_address":"","comment_id":165532,"utype":1}],"discussion_count":11,"race_medal":0,"score":"246390390263","product_id":100042501,"comment_content":"第一个问题：如何理解“服务端的并发能力”这一描述？<br><br>首先我们从数据视角来理解，可以把服务端程序用一个模型来看待，即由「网络 API 请求」所驱动的。<br>服务端的领域特征是大规模的用户请求，以及 24 小时不间断的服务。但某种意义上来说更重要的原则是：坚决不能丢失用户的数据，即他认为已经完成的业务状态。服务端必须保证其业务状态的可靠性，这时业务状态才持久化写入到外存。所以对于服务端来说，存储至关重要。它不只是极大地解放了处理效率，也是服务端的性能瓶颈所在。几乎所有服务端程序扛不住压力，往往都是因为存储没有扛住压力。<br><br>在衡量服务端的性能，我们还是要服务端视角来看，主要以 TPS 为主来衡量系统的吞吐量，如果有必要用并发用户数来衡量的话，需要一个前提，即响应时间（RT），因为在系统压力不高的情况下，将思考时间（等待时间）加到场景链路中，并发用户数基本还可以增加一倍，因此用并发用户数来衡量系统的性能没太大的意义，也不专业。<br><br><br>第二个问题：我为什么不提倡使用“绝对并发”和“相对并发”的概念呢？<br><br>我觉得一切的前提是业务价值需要。如果没有足够的价值，那么可读性才是第一，对这种难懂的概念很反感，要知道的其会加重内部沟通的难度，得不偿失。如果没那个价值，简单才是王道。<br><br><br>第三个问题：我们为什么不推荐用 CPU 来计算并发数？<br><br>比如单核CPU情况，实际上是只有一个的，在一个特定时刻也只可能有一个程序跑在一个CPU上(因为寄存器只有一组)，但是我们在上层观察到的却是系统上好像同时运行着那么多的程序，这实际上是操作系统用进程这个概念对CPU做的抽象。<br><br>同时如果你了解「阿姆达尔定律」，就知道多处理器并行加速，总体程序受限于程序所需的串行时间百分比，超过一定的并行度后，就很难进行进一步的速度提升了。并不符合线性关系，也无法估算的。<br><br>再说服务端程序性能依赖不仅仅是底层的硬件，其依赖的基础软件还包括：操作系统、编程语言、负载均衡、中间件、数据库或其他形式的存储等。在第一个问题中提到了几乎所有服务端程序扛不住压力，往往都是因为存储没有扛住压力。<br><br>最后，还是需要回到第一个问题，即由「网络 API 请求」所驱动的模型上来。","like_count":57,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479195,"discussion_content":"不仅深得真传，还扩展了。 我看好你哦。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577263054,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1798489,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/71/59/642cd27a.jpg","nickname":"小呆呆","note":"","ucode":"6A04486F1FC932","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":202429,"discussion_content":"zzw每次评论都好专业 竟然还在学习 我这种整天打酱油的好惭愧","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1583917424,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1411721,"avatar":"https://static001.geekbang.org/account/avatar/00/15/8a/89/12bd04d3.jpg","nickname":"smitten","note":"","ucode":"FB0E91439F18E5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":411089,"discussion_content":"有一种老师在自问自答的感觉","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635846539,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2448114,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/oMLAiclDvJxTu7JcBFzF4cYB4u3gu2J8SKH0BrGO8iaAtUCnnIdGMZRTrmW1UZkIaQuCdD1iaASKL5PTxUcsl8uww/132","nickname":"Geek_8b5b66","note":"","ucode":"2C6E86157B8E1F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":350432,"discussion_content":"初学者表示有点高深，看不懂","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1613874448,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1170955,"avatar":"https://static001.geekbang.org/account/avatar/00/11/de/0b/485945f1.jpg","nickname":"lostmango","note":"","ucode":"CA50FBD69E6DBB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":173683,"discussion_content":"很透彻，很清晰。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581862088,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1498273,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKbt3JKCxyeRvkfXMSlkbHlwFqPjXw5kZAXxzKhC8aRtNUyUl7nfmMdnZh88oibfOChuNPCODPMyibQ/132","nickname":"陈诚","note":"","ucode":"BF0905C6539C06","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":166120,"discussion_content":"如果可以拜你为师就好了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581348758,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1785899,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIOzMhSUEsHKuo94TOSvsibaV2DHB2zd3aHxmkY9zz4Z5G1ibxwOFAbHoIwuaHfqUjb93HpQjZCkzsA/132","nickname":"加盐的咖啡","note":"","ucode":"80EF2C9833A446","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":102723,"discussion_content":"听君一言，茅塞顿开","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577362258,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1785899,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIOzMhSUEsHKuo94TOSvsibaV2DHB2zd3aHxmkY9zz4Z5G1ibxwOFAbHoIwuaHfqUjb93HpQjZCkzsA/132","nickname":"加盐的咖啡","note":"","ucode":"80EF2C9833A446","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":102570,"discussion_content":"这个是不是老师小号啊2333","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577354705,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1039631,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/dd/0f/ee37a7fe.jpg","nickname":"zuozewei","note":"","ucode":"D594C9CBAF15A5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1785899,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIOzMhSUEsHKuo94TOSvsibaV2DHB2zd3aHxmkY9zz4Z5G1ibxwOFAbHoIwuaHfqUjb93HpQjZCkzsA/132","nickname":"加盐的咖啡","note":"","ucode":"80EF2C9833A446","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":102635,"discussion_content":"不是呀😓","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577357760,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":102570,"ip_address":""},"score":102635,"extra":""},{"author":{"id":1749498,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/b1/fa/e2f49759.jpg","nickname":"绿茵豪情","note":"","ucode":"95061B215F6A74","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1785899,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIOzMhSUEsHKuo94TOSvsibaV2DHB2zd3aHxmkY9zz4Z5G1ibxwOFAbHoIwuaHfqUjb93HpQjZCkzsA/132","nickname":"加盐的咖啡","note":"","ucode":"80EF2C9833A446","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":106095,"discussion_content":"我感觉是老师的大徒弟！","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1577513373,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":102570,"ip_address":""},"score":106095,"extra":""},{"author":{"id":1050444,"avatar":"https://static001.geekbang.org/account/avatar/00/10/07/4c/1eec5844.jpg","nickname":"Duxuebing","note":"","ucode":"3902E4B0C9F63E","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1039631,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/dd/0f/ee37a7fe.jpg","nickname":"zuozewei","note":"","ucode":"D594C9CBAF15A5","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":571802,"discussion_content":"您是如何学到那么多么 求教","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1652412534,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":102635,"ip_address":""},"score":571802,"extra":""}]}]},{"had_liked":false,"id":172643,"user_name":"葛葛","can_delete":false,"product_type":"c1","uid":1786374,"ip_address":"","ucode":"E157179A1A92ED","user_header":"https://static001.geekbang.org/account/avatar/00/1b/42/06/d6043184.jpg","comment_is_top":false,"comment_ctime":1579242641,"is_pvip":false,"replies":[{"id":"67023","content":"我觉得这个会是比较简单直接的过程，所以就没有细写。逻辑如下：<br>1. 统计某时段的当前在线用户数；<br>2. 统计同一时段的操作某个功能的用户数；<br>3. 把所有功能操作的用户数都统计出来；<br>4. 将统计出来的用户数除以在线用户数就知道并发度了。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1579278641,"ip_address":"","comment_id":172643,"utype":1}],"discussion_count":5,"race_medal":0,"score":"91773555857","product_id":100042501,"comment_content":"对于并发度还不太理解。请问有历史线上数据的情况如何计算并发度，没有的情况又如何估算呢？能否分别举例说明一下。","like_count":21,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481803,"discussion_content":"我觉得这个会是比较简单直接的过程，所以就没有细写。逻辑如下：\n1. 统计某时段的当前在线用户数；\n2. 统计同一时段的操作某个功能的用户数；\n3. 把所有功能操作的用户数都统计出来；\n4. 将统计出来的用户数除以在线用户数就知道并发度了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579278641,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":2,"child_discussions":[{"author":{"id":1333151,"avatar":"https://static001.geekbang.org/account/avatar/00/14/57/9f/94128044.jpg","nickname":"lerame","note":"","ucode":"2089858F7BBF97","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":556063,"discussion_content":"http协议这种是怎么定义在线用户数的？还是说要加上业务对于在线的定义，比如登录接口的访问？还是说看tomcat或其他什么的连接数？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647183969,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":481803,"ip_address":""},"score":556063,"extra":""},{"author":{"id":1038245,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/d7/a5/6e047fbc.jpg","nickname":"Olivia","note":"","ucode":"BE840A032F1DF4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":587179,"discussion_content":"假设用户使用系统都集中在上班时间8小时，并且登陆后至少操作一项功能，如果把统计时间段拉长到8小时，并发度就大于等于1了。那这个统计时间段应该取多长，并且应该采样多次吧","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662868441,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":481803,"ip_address":"上海"},"score":587179,"extra":""}]},{"author":{"id":1132839,"avatar":"https://static001.geekbang.org/account/avatar/00/11/49/27/3a3abdfb.jpg","nickname":"ajin","note":"","ucode":"CBF3591F67E72D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":366812,"discussion_content":"不明白 第二点的作用","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618197240,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1780398,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/2a/ae/0328e8ef.jpg","nickname":"大锐","note":"","ucode":"AF12C4D3339AE6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":293710,"discussion_content":"这里操作某个功能的用户数，还是假定他只是完成了一个事务吧，？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595646688,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":165719,"user_name":"律飛","can_delete":false,"product_type":"c1","uid":1462608,"ip_address":"","ucode":"65394E437AD2DF","user_header":"https://static001.geekbang.org/account/avatar/00/16/51/50/f5f2a121.jpg","comment_is_top":false,"comment_ctime":1577288474,"is_pvip":false,"replies":[{"id":"63216","content":"这个理解太正确了。比我写的好。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1577327001,"ip_address":"","comment_id":165719,"utype":1}],"discussion_count":3,"race_medal":0,"score":"91771601690","product_id":100042501,"comment_content":"问题一，如何理解“服务端的并发能力”这一描述。对于web项目而言，服务端是整个项目的关键，是咽喉要道，因此也是性能测试的重点。测试目的当然是要摸清这个要道能同时走多少人（注意这里的人不是在线用户数并发用户数，而是服务器能处理的事务），因此TPS最能描述服务端的并发能力。虽然老师一直强调压力机并发线程数不是关键，但是公式表明其与TPS、响应时间有着不可分割的联系，还需要好好体会并运用。很期待基准测试以及如何判断响应时间、TPS合理的后续讲解。<br>问题二，为什么不提倡使用“绝对并发”和“相对并发”的概念呢？老师讲得很清楚了，这两个概念对于我们关心的性能并没有太多的帮助，反而让人有点无从使用。在线人数，并发数，并发度简洁明了，很好理解，有利于沟通，是性能测试必备指标之一。<br>问题三，为什么不推荐用 CPU 来计算并发数？并发数是业务逻辑层面的，而CPU只是众多软硬件环节中的一环，即使可以借鉴，肯定也是很粗略的估计，在实践中使用价值不大，没有推广使用的必要。","like_count":21,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479266,"discussion_content":"这个理解太正确了。比我写的好。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577327001,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1165886,"avatar":"https://static001.geekbang.org/account/avatar/00/11/ca/3e/abb7bfe3.jpg","nickname":"浅浅","note":"","ucode":"1D2416A168F548","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":197042,"discussion_content":"按照曲线图，响应时间不是趋于增加的吗？那这个计算TIPS的公式，响应时间取平均值计算么？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583399344,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1038245,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/d7/a5/6e047fbc.jpg","nickname":"Olivia","note":"","ucode":"BE840A032F1DF4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1165886,"avatar":"https://static001.geekbang.org/account/avatar/00/11/ca/3e/abb7bfe3.jpg","nickname":"浅浅","note":"","ucode":"1D2416A168F548","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":587174,"discussion_content":"你说的响应时间趋于增加是在增加并发线程数的情况下响应时间是上升趋势，公式里响应时间是在指定并发线程数下运行一段时间下的平均响应时间","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662867844,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":197042,"ip_address":"上海"},"score":587174,"extra":""}]}]},{"had_liked":false,"id":165606,"user_name":"月亮和六便士","can_delete":false,"product_type":"c1","uid":1080894,"ip_address":"","ucode":"EFFCB9171D4B4E","user_header":"https://static001.geekbang.org/account/avatar/00/10/7e/3e/82202cc8.jpg","comment_is_top":false,"comment_ctime":1577267458,"is_pvip":false,"replies":[{"id":"63147","content":"通过统计每秒的业务请求数以及比例就可以知道并发度了呀。<br>可不能把脑袋拍坏了。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1577274474,"ip_address":"","comment_id":165606,"utype":1}],"discussion_count":10,"race_medal":0,"score":"31642038530","product_id":100042501,"comment_content":"老师，我们一般根据日志可以拿到在线用户数，但是并发度是百分之一还是百分之十这是全靠拍脑袋算的吗？","like_count":7,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479224,"discussion_content":"通过统计每秒的业务请求数以及比例就可以知道并发度了呀。\n可不能把脑袋拍坏了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577274474,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1050444,"avatar":"https://static001.geekbang.org/account/avatar/00/10/07/4c/1eec5844.jpg","nickname":"Duxuebing","note":"","ucode":"3902E4B0C9F63E","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":571805,"discussion_content":"同这个问题下的所有评论一样，没明白是怎么算","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1652412848,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":479224,"ip_address":""},"score":571805,"extra":""}]},{"author":{"id":1786203,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/41/5b/aa3ca816.jpg","nickname":"Cathy","note":"","ucode":"9C474FE2C70F38","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":351080,"discussion_content":"并发度= 每秒的业务请求数/当前在线用户数 * 100%，我理解就是计算这个比例吧","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1614147593,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1170955,"avatar":"https://static001.geekbang.org/account/avatar/00/11/de/0b/485945f1.jpg","nickname":"lostmango","note":"","ucode":"CA50FBD69E6DBB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":173757,"discussion_content":"我的了解是  如果每秒有10个用户请求进来，落在实际的测试场景中的如果只有2个，并发度就只有0.2了，然后就可以去推演出如果响应时间为1s，则TPS为2。如果此时有1000个用户，响应时间为100ms，则TPS为1000*0.2/0.1=2000。\n当然这个并发度要去不断的测试求其平均。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1581863736,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1619847,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b7/87/a49eea43.jpg","nickname":"靓仔","note":"","ucode":"A6D0799C6CDBC5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1170955,"avatar":"https://static001.geekbang.org/account/avatar/00/11/de/0b/485945f1.jpg","nickname":"lostmango","note":"","ucode":"CA50FBD69E6DBB","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":537550,"discussion_content":"这个好像不对吧，并发用户数（TPS）是 396.2TPS。如果并发度为 5%，在线用户数就是 396.2/5%=7924。那反过来，在线用户是1000，并发度是20%，那TPS不就等于：1000*0.2 =200 么，你这蹦出个2000来了","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1639101836,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":173757,"ip_address":""},"score":537550,"extra":""}]},{"author":{"id":1268976,"avatar":"https://static001.geekbang.org/account/avatar/00/13/5c/f0/b89ed81e.jpg","nickname":"余","note":"","ucode":"6B97A57525FAF0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":100927,"discussion_content":"还是不太明白，&#34;通过统计每秒的业务请求数以及比例。。。&#34;，这个比例是怎么得到的呢？","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1577281366,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1052892,"avatar":"https://static001.geekbang.org/account/avatar/00/10/10/dc/96476998.jpg","nickname":"Hulk","note":"","ucode":"8D6EDC6E370E21","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":171890,"discussion_content":"还是不明白","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581756182,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1799862,"avatar":"","nickname":"Geek_f580eb","note":"","ucode":"4382AB9D1F970B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":112838,"discussion_content":"同问 同问 这个可以举例子说一下么 高老师","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577884882,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1787426,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/46/22/eef377f6.jpg","nickname":"千层酥","note":"","ucode":"E5A59577DC2E29","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":111020,"discussion_content":"同问，还是不怎么明白这个比例是这么算的，期待老师后面能给详细的解答","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577772537,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1333092,"avatar":"https://static001.geekbang.org/account/avatar/00/14/57/64/9a729a58.jpg","nickname":"Eight Baby","note":"","ucode":"1AB70D1E698E79","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":101186,"discussion_content":"加1。同问","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577285125,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":183138,"user_name":"hou","can_delete":false,"product_type":"c1","uid":1818999,"ip_address":"","ucode":"B86FDAE03B1C61","user_header":"https://static001.geekbang.org/account/avatar/00/1b/c1/77/bee24d2d.jpg","comment_is_top":false,"comment_ctime":1582959435,"is_pvip":false,"replies":[{"id":"70894","content":"TPS是完成的事务数。<br>你说的20tps是一个线程的。<br><br>你后面的这句话，里面有好几个概念，我们简化一下：500tps就是并发数。这样是不是简单些？<br><br>我这里写到的都是有请求有响应的才叫一个T，只请求不响应，那是半个T。 ","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1582982768,"ip_address":"","comment_id":183138,"utype":1}],"discussion_count":1,"race_medal":0,"score":"27352763211","product_id":100042501,"comment_content":"‘’这时对 Server 来说，它处理的就是 100TPS，平均响应时间是 50ms。50ms 就是根据 1000ms&#47;20TPS 得来的（请注意，这里说的平均响应时间会在一个区间内浮动，但只要 TPS 不变，这个平均响应时间就不会变）。‘’<br><br>这里不太明白一点，tps是每秒完成的事物数，还是每秒在处理的事物数，还是每秒请求的事物数？<br><br>如果按照引用文中所示，1000&#47;20=50的响应时间，我理解为20tps为每秒完成的事物数。<br><br>在前一章例子中，在线10000人，并发度5%，算出的500个tps，又让我感觉tps是指每秒的事物并发请求数。 <br><br>在我的理解中，请求数和完成请求数是不同的","like_count":6,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":485569,"discussion_content":"TPS是完成的事务数。\n你说的20tps是一个线程的。\n\n你后面的这句话，里面有好几个概念，我们简化一下：500tps就是并发数。这样是不是简单些？\n\n我这里写到的都是有请求有响应的才叫一个T，只请求不响应，那是半个T。 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582982768,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":219230,"user_name":"凯","can_delete":false,"product_type":"c1","uid":1405256,"ip_address":"","ucode":"60DB11CF72C7B0","user_header":"https://static001.geekbang.org/account/avatar/00/15/71/48/44df7f4e.jpg","comment_is_top":false,"comment_ctime":1589969153,"is_pvip":false,"replies":[{"id":"81903","content":"对的。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1590716980,"ip_address":"","comment_id":219230,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23064805633","product_id":100042501,"comment_content":"老师，看一下以下的推导是不是正确<br><br>对公式TPS计算公式总结：<br>TPS就是单位时间处理事务的数量，<br><br>server TPS = △事务数 &#47; △t = 线程数 * 单个线程的事务数 &#47; △t  <br><br>JMeter上给的时间是单个事务的平均时间","like_count":5,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":495727,"discussion_content":"对的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590716980,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":186162,"user_name":"JK","can_delete":false,"product_type":"c1","uid":1167503,"ip_address":"","ucode":"93DB44A9E5ECC7","user_header":"https://static001.geekbang.org/account/avatar/00/11/d0/8f/818a5481.jpg","comment_is_top":false,"comment_ctime":1583768317,"is_pvip":false,"replies":[{"id":"71933","content":"理解的有问题哦。<br><br>“学习本节后，将TPS概念投射进来。假如使用TPS理解衡量并发能力的话，原文中的并发800是否等价于800TPS吗？”<br>答：显然不是的，你如果用压力线程800的话，就得看响应时间是多少、TPS是多少，这个压力线程数显然不是TPS。 <br><br>”参照文中例子，指服务器的TPS是100，线程TPS是20，因此推算出压测只需要发起5个线程进行负载即可“<br><br>答：这个理解的对。<br><br>”切换到开头的例子，是否可理解服务器的期望TPS是800，而单个线程TPS是0.5（接口调用的rt是2000ms），按此验算的话压测需要发起1600线程负载才能达到原定TPS（0.5*1600=800？）。而1600个线程是否等价于N个线程*循环M次呢“<br>答：如果接口调用的响应时间是2s，那显然一个线程的TPS就是0.5。假设响应时间不会随着线程的增加而增加，那你就需要1600个线程才能达到800tps的要求。而这1600个压力线程，显然不能等价于N个线程*循环M次，而是1600个压力线程才对。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1583809260,"ip_address":"","comment_id":186162,"utype":1}],"discussion_count":8,"race_medal":0,"score":"23058604797","product_id":100042501,"comment_content":"高老师您好，仍有些疑问冒昧咨询。<br><br>某项目进行接口压测，提出需满足并发800且响应时间&lt;5秒，当时的场景设置就直接发起800线程进行负载，结果出现大量超时异常。<br><br>学习本节后，将TPS概念投射进来。假如使用TPS理解衡量并发能力的话，原文中的并发800是否等价于800TPS吗？<br><br>参照文中例子，指服务器的TPS是100，线程TPS是20，因此推算出压测只需要发起5个线程进行负载即可。<br><br>切换到开头的例子，是否可理解服务器的期望TPS是800，而单个线程TPS是0.5（接口调用的rt是2000ms），按此验算的话压测需要发起1600线程负载才能达到原定TPS（0.5*1600=800？）。而1600个线程是否等价于N个线程*循环M次呢？<br><br>","like_count":5,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":486653,"discussion_content":"理解的有问题哦。\n\n“学习本节后，将TPS概念投射进来。假如使用TPS理解衡量并发能力的话，原文中的并发800是否等价于800TPS吗？”\n答：显然不是的，你如果用压力线程800的话，就得看响应时间是多少、TPS是多少，这个压力线程数显然不是TPS。 \n\n”参照文中例子，指服务器的TPS是100，线程TPS是20，因此推算出压测只需要发起5个线程进行负载即可“\n\n答：这个理解的对。\n\n”切换到开头的例子，是否可理解服务器的期望TPS是800，而单个线程TPS是0.5（接口调用的rt是2000ms），按此验算的话压测需要发起1600线程负载才能达到原定TPS（0.5*1600=800？）。而1600个线程是否等价于N个线程*循环M次呢“\n答：如果接口调用的响应时间是2s，那显然一个线程的TPS就是0.5。假设响应时间不会随着线程的增加而增加，那你就需要1600个线程才能达到800tps的要求。而这1600个压力线程，显然不能等价于N个线程*循环M次，而是1600个压力线程才对。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583809260,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":2,"child_discussions":[{"author":{"id":1787221,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/45/55/97c25ffc.jpg","nickname":"薄荷微凉ζ","note":"","ucode":"F4F7508F515E9F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":531169,"discussion_content":"老师：你好\n假设响应时间不会随着线程的增加而增加----实际情况是响应时间大概率会上升，此时线程数是不是要增加","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637243922,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":486653,"ip_address":""},"score":531169,"extra":"{\"user_type\":1}"},{"author":{"id":1410056,"avatar":"https://static001.geekbang.org/account/avatar/00/15/84/08/c88a9683.jpg","nickname":"hello. world","note":"","ucode":"3579A0BE22C0A8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":565821,"discussion_content":"老师这里讲的概念有点模糊，引用文中说的“并发”这个词，依赖 TPS 来承载的时候，指的都是 Server 端的处理能力，并不是压力工具上的并发线程数。例子中所说的并发就是指服务器TPS 的处理能力，而不是指 800个压力机的并发线程数，那么请问这里说的800并发是指800Tps吗？","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1650547142,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":486653,"ip_address":""},"score":565821,"extra":""}]},{"author":{"id":2673745,"avatar":"","nickname":"章鱼","note":"","ucode":"D44893DC2526D4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":556988,"discussion_content":"我也不太理解为啥不能用N*M来进行线程并发","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647596068,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1167503,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d0/8f/818a5481.jpg","nickname":"JK","note":"","ucode":"93DB44A9E5ECC7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":202787,"discussion_content":"感谢老师耐心答复。\n\n第一个问题:  我表述有误，愿意想表达，接到一任务，只提出要达到性能标准是的&#34;800并发，响应时间少于5秒&#34;。而学习本节了解到，应该用TPS开衡量服务器的性能，所以才提出&#34;使用800并发响应5秒的需求&#34; 如引导其校准为 &#34;服务器的TPS能达到800&#34;，是否更好。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583942664,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":2394537,"avatar":"","nickname":"Geek_cc2c97","note":"","ucode":"64746FF105F468","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1167503,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d0/8f/818a5481.jpg","nickname":"JK","note":"","ucode":"93DB44A9E5ECC7","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":338375,"discussion_content":"我的理解是tps需要大于800/5","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609251762,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":202787,"ip_address":""},"score":338375,"extra":""},{"author":{"id":2453806,"avatar":"https://static001.geekbang.org/account/avatar/00/25/71/2e/9caf2a70.jpg","nickname":"SHATAN CLASS","note":"","ucode":"902454A660FA3A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1167503,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d0/8f/818a5481.jpg","nickname":"JK","note":"","ucode":"93DB44A9E5ECC7","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":391332,"discussion_content":"你好，看到你的评论了，想问最后你理解透了吗？ 因为我也有你同样的疑问。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630402652,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":202787,"ip_address":""},"score":391332,"extra":""},{"author":{"id":1983334,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/43/66/48fecdf4.jpg","nickname":"爱雪一辈子","note":"","ucode":"D3123CA44DC4CB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2394537,"avatar":"","nickname":"Geek_cc2c97","note":"","ucode":"64746FF105F468","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":404098,"discussion_content":"我也这么觉得\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634222667,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":338375,"ip_address":""},"score":404098,"extra":""}]}]},{"had_liked":false,"id":173500,"user_name":"顺利","can_delete":false,"product_type":"c1","uid":1618652,"ip_address":"","ucode":"C904941C8BA6DA","user_header":"https://static001.geekbang.org/account/avatar/00/18/b2/dc/67e0e985.jpg","comment_is_top":false,"comment_ctime":1579578335,"is_pvip":false,"replies":[{"id":"67296","content":"java的可以用jvisuamvm之类的工具看。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1579611631,"ip_address":"","comment_id":173500,"utype":1}],"discussion_count":2,"race_medal":0,"score":"23054414815","product_id":100042501,"comment_content":"服务端线程的工作情况图在哪里看呢老师？linux服务器上还是jmeter有监控插件","like_count":5,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":482087,"discussion_content":"java的可以用jvisuamvm之类的工具看。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579611631,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1911709,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/2b/9d/81e6941c.jpg","nickname":"小丸子MAX丶","note":"","ucode":"1BFF000F2B8785","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":347714,"discussion_content":"果然有人跟我有一样的疑问😁","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612314868,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":206349,"user_name":"柚子","can_delete":false,"product_type":"c1","uid":1574171,"ip_address":"","ucode":"27E34113E1977B","user_header":"https://static001.geekbang.org/account/avatar/00/18/05/1b/43518d02.jpg","comment_is_top":false,"comment_ctime":1586845633,"is_pvip":false,"replies":[{"id":"77261","content":"没法计算，只能蒙了。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1586958716,"ip_address":"","comment_id":206349,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18766714817","product_id":100042501,"comment_content":"老师，我有个问题想问下，如果只知道在线用户数，不知道并发度和相应时间，怎么计算并发用户呢？","like_count":4,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":491761,"discussion_content":"没法计算，只能蒙了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586958716,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":185834,"user_name":"秋刀鱼滋味","can_delete":false,"product_type":"c1","uid":1834020,"ip_address":"","ucode":"3D7ADD82452B4D","user_header":"","comment_is_top":false,"comment_ctime":1583697093,"is_pvip":false,"replies":[{"id":"71794","content":"不需要。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1583713982,"ip_address":"","comment_id":185834,"utype":1}],"discussion_count":4,"race_medal":0,"score":"18763566277","product_id":100042501,"comment_content":"就是说算好并发度就不需要设置思考时间之类的了吗","like_count":4,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":486521,"discussion_content":"不需要。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583713982,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2069304,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/93/38/efb7eb38.jpg","nickname":"安静。。。","note":"","ucode":"4366269948B006","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":313294,"discussion_content":"这样会不会影响实际的测试结果呢？为什么很多贴子建议设置思考时间呢？\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603025982,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1005391,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","nickname":"一步","note":"","ucode":"73CEA468CE70C3","race_medal":1,"user_type":1,"is_pvip":true},"reply_author":{"id":2069304,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/93/38/efb7eb38.jpg","nickname":"安静。。。","note":"","ucode":"4366269948B006","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":338378,"discussion_content":"思考时间 代表什么意思？ 非专业的测试来学习","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609252142,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":313294,"ip_address":""},"score":338378,"extra":""}]},{"author":{"id":2069304,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/93/38/efb7eb38.jpg","nickname":"安静。。。","note":"","ucode":"4366269948B006","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":313293,"discussion_content":"所以在实际压测过程中，并不需要设置思考时间吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603025950,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":171354,"user_name":"木头人","can_delete":false,"product_type":"c1","uid":1165554,"ip_address":"","ucode":"0B2746334522A1","user_header":"https://static001.geekbang.org/account/avatar/00/11/c8/f2/c1dff942.jpg","comment_is_top":false,"comment_ctime":1578907035,"is_pvip":false,"replies":[{"id":"66509","content":"这个如果要详细说下来有点复杂。等我把这个专栏全部完成了。我考虑下做个实例出来描述具体的过程吧。<br>如果只是空口白牙的解释，我觉得怎么解释都显得空洞。<br>等我。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1578975692,"ip_address":"","comment_id":171354,"utype":1}],"discussion_count":4,"race_medal":0,"score":"18758776219","product_id":100042501,"comment_content":"老师好，请问并发度是怎么算的呢？<br>您给的回复“通过统计每秒的业务请求数以及比例就可以知道并发度了”<br>请问这个可以举例吗？这个比例是什么呢？还是不太明白","like_count":4,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481311,"discussion_content":"这个如果要详细说下来有点复杂。等我把这个专栏全部完成了。我考虑下做个实例出来描述具体的过程吧。\n如果只是空口白牙的解释，我觉得怎么解释都显得空洞。\n等我。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578975692,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2009742,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/e9R9ZFtSS3FqmliaVGty8K38GCsHx91dic2kzO9S9y2UFUAAdDTltGxhKNRjb1xHPbEfFUdveFzs7o2j7CicRgictg/132","nickname":"永夜","note":"","ucode":"A774AE72299DDA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":391413,"discussion_content":"老师，实例出了吗","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630457537,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1253772,"avatar":"https://static001.geekbang.org/account/avatar/00/13/21/8c/489792fd.jpg","nickname":"Z","note":"","ucode":"A0ADA997048FC8","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":372429,"discussion_content":"什么时候能讲讲并发度的计算呢？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620314274,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1525339,"avatar":"https://static001.geekbang.org/account/avatar/00/17/46/5b/2b58f595.jpg","nickname":"George","note":"","ucode":"564D6E0D881E00","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":293563,"discussion_content":"老师，实例什么时候出来呢？一直在线等。。。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595582602,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":186548,"user_name":"呆熊","can_delete":false,"product_type":"c1","uid":1231364,"ip_address":"","ucode":"3735C673EFBCDC","user_header":"https://static001.geekbang.org/account/avatar/00/12/ca/04/06e8fe7c.jpg","comment_is_top":false,"comment_ctime":1583864386,"is_pvip":false,"replies":[{"id":"72032","content":"这种方式可以大体看一下，请注意在压力过程中，单线程的TPS会随着压力的增加而降低。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1583885627,"ip_address":"","comment_id":186548,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14468766274","product_id":100042501,"comment_content":"算压力机线程数，看平均每秒tps还是就1个线程跑一次","like_count":3,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":486799,"discussion_content":"这种方式可以大体看一下，请注意在压力过程中，单线程的TPS会随着压力的增加而降低。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583885627,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":169365,"user_name":"夏文兵","can_delete":false,"product_type":"c1","uid":1366118,"ip_address":"","ucode":"038FA2102DA4C1","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJBVPzcO55PyLPeicoZ6zuaZNryYK7OnAkgz0jV6Tl9vOLIrkEGDgen8E9NwamAsTckS1D2Wl2prCQ/132","comment_is_top":false,"comment_ctime":1578322848,"is_pvip":false,"replies":[{"id":"65692","content":"去掉ramp up。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1578360256,"ip_address":"","comment_id":169365,"utype":1}],"discussion_count":2,"race_medal":0,"score":"14463224736","product_id":100042501,"comment_content":"针对吞吐量，根据你的公式， 我没计算出跟jmeter一样的值。我用jmeter 去压测(http:&#47;&#47;example.com&#47;)，number of threads: 3, Ramp-Up:1, Loop Count:50, 平均响应时间：679ms, Throughput: 3.6&#47;sec, 但是根据您的计算公式 1000&#47;679 * 3 = 4.4。请高老师赐教。","like_count":3,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480528,"discussion_content":"去掉ramp up。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578360256,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1027571,"avatar":"","nickname":"明宙","note":"","ucode":"D55688362CDDDD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":319161,"discussion_content":"请问下为什么要循环 50 次？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603954136,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":168912,"user_name":"zxs","can_delete":false,"product_type":"c1","uid":1798266,"ip_address":"","ucode":"F0ED945AA1C345","user_header":"https://static001.geekbang.org/account/avatar/00/1b/70/7a/352a28fd.jpg","comment_is_top":false,"comment_ctime":1578215510,"is_pvip":false,"replies":[{"id":"65497","content":"不可以。<br>再看一遍。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1578219879,"ip_address":"","comment_id":168912,"utype":1}],"discussion_count":3,"race_medal":0,"score":"10168150102","product_id":100042501,"comment_content":"老师你好，问个问题:<br>以前测试，项目上要求测出最佳并发用户数，我这边测出一个最大Tps，这个Tps对应的jmeter设置线程数就是最佳并发用户数。现在看了这篇文档，我现在可以认为Tps就是并发用户数吗？<br>","like_count":2,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480370,"discussion_content":"不可以。\n再看一遍。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578219879,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1122311,"avatar":"https://static001.geekbang.org/account/avatar/00/11/20/07/aef14454.jpg","nickname":"hoppaz","note":"","ucode":"2CBA5C1784AC6D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":203880,"discussion_content":"老师，我认为原因是：zxs同学测试得到的最大TPS是压力机端的值，但是我们应该看服务器端监控得到的TPS值，对吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584095381,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1786203,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/41/5b/aa3ca816.jpg","nickname":"Cathy","note":"","ucode":"9C474FE2C70F38","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1122311,"avatar":"https://static001.geekbang.org/account/avatar/00/11/20/07/aef14454.jpg","nickname":"hoppaz","note":"","ucode":"2CBA5C1784AC6D","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":351071,"discussion_content":"要看T的具体定义，当T的定义是业务级的，一个用户只对应一个业务时，TPS就是并发用户数","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1614145693,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":203880,"ip_address":""},"score":351071,"extra":""}]}]},{"had_liked":false,"id":347134,"user_name":"静水潜流，润物无声","can_delete":false,"product_type":"c1","uid":1460672,"ip_address":"","ucode":"BA6B9636DAEA2A","user_header":"https://wx.qlogo.cn/mmopen/vi_32/ibXbRJ3yOT48IHc6mayIRxibutDz2bWHxBdicNoeJBG9EG6AXpuRMhtBRmjpFvmGPBIAYNrnq6nP9okwk5oU36GSA/132","comment_is_top":false,"comment_ctime":1653737913,"is_pvip":false,"replies":[{"id":"126605","content":"1. 是以TPS1曲线最大值为准。<br>2. jmeter平常拟定的TPS曲线应该是TPS1的曲线，这个我不知道你说的是在哪里看到的。<br>3. summary + 30 在属性文件中配置。<br>4. GUI版本是通过TPS曲线颗粒设置，如果是自带的控件，是一致的。 ","user_name":"作者回复","user_name_real":"编辑","uid":"1785562","ctime":1653833576,"ip_address":"","comment_id":347134,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5948705209","product_id":100042501,"comment_content":"老师您好！summary + 有一个TPS1；summary = 也有一个TPS2；前面TPS1是某时间段内的均值TPS；TPS2是从开始到截止当前的累计平均TPS；将TPS1按时间戳顺寻拟TPS曲线，与按TPS2依时间拟TPS曲线；如果是阶梯压力测试，前者的TPS曲线会陡，后者的TPS会平缓；获取最大TPS，应该是以TPS1的曲线最大值为准吧；jmeter平常拟定的TPS曲线应该是TPS1的曲线？请问summary + 30 秒这个是在哪里设置的？GUI版本是通过TPS曲线颗粒设置吗？两者是一回事吗？","like_count":1,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":574097,"discussion_content":"1. 是以TPS1曲线最大值为准。\n2. jmeter平常拟定的TPS曲线应该是TPS1的曲线，这个我不知道你说的是在哪里看到的。\n3. summary + 30 在属性文件中配置。\n4. GUI版本是通过TPS曲线颗粒设置，如果是自带的控件，是一致的。 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1653833576,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":323183,"user_name":"Ahern","can_delete":false,"product_type":"c1","uid":2830484,"ip_address":"","ucode":"2938F48A98CC10","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/8gKCwcHPP5qZpZpAhITAumSVvZh2MyChib1ZYNj2FTCqYE0kSncFbw0zdcVlCrg57rxHShLytLg2qyibIxh91mZg/132","comment_is_top":false,"comment_ctime":1637754161,"is_pvip":false,"replies":[{"id":"117397","content":"这三个方你来回倒腾呀？<br>1000ms&#47;20TPS不就直接得到线程数了吗？为啥还乘以线程数？","user_name":"作者回复","user_name_real":"编辑","uid":"1785562","ctime":1637945115,"ip_address":"","comment_id":323183,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5932721457","product_id":100042501,"comment_content":"老师，根据公式TPS=1000ms&#47;​响应时间(单位ms)∗压力机线程<br><br>但是前面又提到：<br>如果每个线程的 20TPS，显然只需要 5 个线程就够了（请注意，这里说的线程指的是压力机的线程数）。这时对 Server 来说，它处理的就是 100TPS，平均响应时间是 50ms。50ms 就是根据 1000ms&#47;20TPS 得来的   按照公式的话，为什么这里的平均响应时间计算1000ms&#47;20TPS 不用乘以线程数","like_count":1,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":533765,"discussion_content":"这三个方你来回倒腾呀？\n1000ms/20TPS不就直接得到线程数了吗？为啥还乘以线程数？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637945115,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":305590,"user_name":"SHATAN CLASS","can_delete":false,"product_type":"c1","uid":2453806,"ip_address":"","ucode":"902454A660FA3A","user_header":"https://static001.geekbang.org/account/avatar/00/25/71/2e/9caf2a70.jpg","comment_is_top":false,"comment_ctime":1628061519,"is_pvip":false,"replies":[{"id":"110617","content":"这种算法有问题。这个公式只对瞬间数据有效，对统计之后平均的数据无效。 ","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1628152105,"ip_address":"","comment_id":305590,"utype":1}],"discussion_count":4,"race_medal":0,"score":"5923028815","product_id":100042501,"comment_content":"用jmeter对单个接口跑10个线程，Ramp-up time = 1s ,<br>聚合报告结果为：Average=87，Throughput=10&#47;s  <br><br>按照这张的知识计算 ：<br>并发用户数（TPS）=1000 &#47; 87 * 10 = 115TPS  如果并发度为5%，在线用户数就是115 &#47; 5% = 2299 <br><br>老师，我有两个疑问:<br>1、这里的计算和Ramp-up time 有关系吗？<br>2、jmeter聚合报告里的Throughput 和 上面计算的 并发用户数（TPS） 怎么去区别和理解呢？<br><br>如果Ramp-up time = 2s，则 Average=58，Throughput=5&#47;s ，<br>并发用户数（TPS）还是= 1000  &#47; 58 * 10 = 172TPS 吗？","like_count":1,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":524442,"discussion_content":"这种算法有问题。这个公式只对瞬间数据有效，对统计之后平均的数据无效。 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628152105,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2453806,"avatar":"https://static001.geekbang.org/account/avatar/00/25/71/2e/9caf2a70.jpg","nickname":"SHATAN CLASS","note":"","ucode":"902454A660FA3A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":387410,"discussion_content":"老师，我又看了一遍，这里的计算跟Ramp-up time 没有关系，但是jmeter聚合报告里的Throughput是平均值，那这个值对最后去定义系统的性能结论 ，怎么做才有参考价值呢？\n\n像这种单接口的基准性能场景验证只是为了验证它不扯容量场景的后退。那要如何利用工具跑容量场景后给出的指标值去计算或者定义性能结论呢？","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1628154562,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1168516,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d4/84/7f584cb2.jpg","nickname":"杜艳","note":"","ucode":"8D46A8CF33E9C7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2453806,"avatar":"https://static001.geekbang.org/account/avatar/00/25/71/2e/9caf2a70.jpg","nickname":"SHATAN CLASS","note":"","ucode":"902454A660FA3A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":406176,"discussion_content":"你解决了嘛？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634717476,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":387410,"ip_address":""},"score":406176,"extra":""}]},{"author":{"id":1168516,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d4/84/7f584cb2.jpg","nickname":"杜艳","note":"","ucode":"8D46A8CF33E9C7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":406175,"discussion_content":"我也有这个疑问 ，那用jmeter压出来的数据，怎么算他的并发用户数","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634717462,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":290110,"user_name":"^_^","can_delete":false,"product_type":"c1","uid":2170871,"ip_address":"","ucode":"2CF5A4DB792821","user_header":"https://static001.geekbang.org/account/avatar/00/21/1f/f7/5a010799.jpg","comment_is_top":false,"comment_ctime":1619364788,"is_pvip":false,"replies":[{"id":"105221","content":"这是一个意思呀。对于从时刻的角度来看并发的话，那必然不会高过CPU的物理个数呀。如果是多线程的8核，就得看有几个物理核了呀。 ","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1619492323,"ip_address":"","comment_id":290110,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5914332084","product_id":100042501,"comment_content":"在【什么是并发】那个段落中，“如果是这样的话，绝对并发还用算吗？那肯定是 CPU 的个数呀”。请问这里的cpu的个数怎么理解，比如8核的cpu，难道个数是8吗？如果是这样理解，后面那句话“要说绝对的某个时刻，任务数肯定不会大于 CPU 物理个数。” 又怎么理解呢","like_count":1,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":519117,"discussion_content":"这是一个意思呀。对于从时刻的角度来看并发的话，那必然不会高过CPU的物理个数呀。如果是多线程的8核，就得看有几个物理核了呀。 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619492323,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1069269,"avatar":"https://static001.geekbang.org/account/avatar/00/10/50/d5/73334a95.jpg","nickname":"doos","note":"","ucode":"7C9AF67F90E65C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":567573,"discussion_content":"你要是2个物理cpu，每颗物理cpu是8核那就是2*8=16*2 逻辑cpu就是32，16后面的2是超线程","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650944711,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":282539,"user_name":"孙灿","can_delete":false,"product_type":"c1","uid":2285679,"ip_address":"","ucode":"FF63EF87003ABB","user_header":"https://static001.geekbang.org/account/avatar/00/22/e0/6f/8610fa57.jpg","comment_is_top":false,"comment_ctime":1615294271,"is_pvip":false,"replies":[{"id":"103242","content":"是期望达到的。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1616422582,"ip_address":"","comment_id":282539,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5910261567","product_id":100042501,"comment_content":"高老师你好，实际测试中遇到一个问题，想请教您。<br>jmeter的Throughput Shaping Timer这个元件中的RPS设置，是代表客户端每秒实际发送的请求数，还是每秒期望达到的请求数？<br>接口测试场景：<br>\t1. 200并发，RPS分别设置为6000，8000和10000<br>\t2. 增加并发数，RPS设置为6000<br>测试结果：<br>    1. 200并发，RPS分别设置为6000，8000和10000，三种情况下最终统计的响应时间、QPS（5000+）、samples都一样，且无错误率。<br>\t2. 增加并发数量，最终统计的QPS也只达到5000+，且响应时间很明显增加，可以确定不是因为并发数不够才造成QPS达不到6000<br>问题：<br>\t1. 上述测试是否可以说明服务器最大QPS是5000+？<br>\t2. 假定问题1成立（最大QPS确实只能达到5000+）<br>\t   如果RPS代表每秒实际发送的请求数，RPS分别设置为6000，8000和10000的时候，响应时间和samples应该会逐渐变大，测试结果1就解释不通了。<br>\t   如果RPS代表每秒期望达到的请求数，为什么一直达不到期望值呢？jmeter是怎么去发送请求的？是等到第一次并发后，服务器给客户端响应了请求之后再发送另一波请求？还是不理会服务是否给响应，自顾发送请求（这种情况应该能达到期望值）？<br>\t   <br>我个人偏向于RPS代表每秒期望达到的请求数，且jmeter是在服务器给客户端响应了请求之后才会再发送另一波请求，所以会造成：即使RPS设置很高，但服务器每秒只能处理5000+，没有给客户端响应，所以客户端不会继续发送请求，最终不管RPS设置多少，并发一样的情况下，sample是一样的。但这只是我个人猜测的解释，查询资料也没有找到官方解释，期望高老师给予解答，感谢！","like_count":1,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":516775,"discussion_content":"是期望达到的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616422582,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":203257,"user_name":"路人甲","can_delete":false,"product_type":"c1","uid":1546563,"ip_address":"","ucode":"A1B749C7559112","user_header":"https://static001.geekbang.org/account/avatar/00/17/99/43/01c0b28d.jpg","comment_is_top":false,"comment_ctime":1586161791,"is_pvip":false,"replies":[{"id":"76154","content":"大概想了一下，你的这个逻辑是对的。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1586267208,"ip_address":"","comment_id":203257,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5881129087","product_id":100042501,"comment_content":"生产有连接数的监控，所以如果并发度=（活跃用户数&#47;在线用户数）*100%，<br>活跃用户数=课堂业务连接数，<br>在线用户数=443连接去重后的ip数，<br>并发度=（课堂业务连接数&#47;去重ip数）*100%  可以这么理解吗老师","like_count":1,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490810,"discussion_content":"大概想了一下，你的这个逻辑是对的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586267208,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2641571,"avatar":"https://static001.geekbang.org/account/avatar/00/28/4e/a3/d76ab5a0.jpg","nickname":"。小妖","note":"","ucode":"372EDDC302083E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":377102,"discussion_content":"什么是课堂业务连接数？😂","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622509173,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":186691,"user_name":"王明","can_delete":false,"product_type":"c1","uid":1447314,"ip_address":"","ucode":"73A0C5432A2163","user_header":"https://static001.geekbang.org/account/avatar/00/16/15/92/f00c47db.jpg","comment_is_top":false,"comment_ctime":1583902946,"is_pvip":false,"replies":[{"id":"72075","content":"是的。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1583925137,"ip_address":"","comment_id":186691,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5878870242","product_id":100042501,"comment_content":"老师请教个问题，课程里提到这个计算：并发用户数（TPS）是 193.6TPS。如果并发度为 5%，在线用户数就是 193.6&#47;5%=3872。   这里的在线用户数字是指根据例子中的TPS=193.6的时候，服务端就有能力支持3872个在线用户同时在线？","like_count":1,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":486841,"discussion_content":"是的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583925137,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1447314,"avatar":"https://static001.geekbang.org/account/avatar/00/16/15/92/f00c47db.jpg","nickname":"王明","note":"","ucode":"73A0C5432A2163","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":202383,"discussion_content":"纠结中，求老师指点迷津","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583909827,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":185094,"user_name":"Abe","can_delete":false,"product_type":"c1","uid":1716115,"ip_address":"","ucode":"440611DA6F99F9","user_header":"https://static001.geekbang.org/account/avatar/00/1a/2f/93/8a22c475.jpg","comment_is_top":false,"comment_ctime":1583480740,"is_pvip":false,"replies":[{"id":"71529","content":"并发度是从生产环境中，按年、月、日、时、分、秒，统计出来的。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1583505508,"ip_address":"","comment_id":185094,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5878448036","product_id":100042501,"comment_content":"看的不是很明白，并发度到底怎么来的。","like_count":1,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":486249,"discussion_content":"并发度是从生产环境中，按年、月、日、时、分、秒，统计出来的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583505508,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":172292,"user_name":"姓小 名黄 字笨蛋","can_delete":false,"product_type":"c1","uid":1736397,"ip_address":"","ucode":"F9D7B60CA08BB4","user_header":"https://static001.geekbang.org/account/avatar/00/1a/7e/cd/ef220399.jpg","comment_is_top":false,"comment_ctime":1579145537,"is_pvip":false,"replies":[{"id":"66879","content":"不是的。并发度肯定是通过线上的数据统计计算得来的。<br>任何一个新系统，要说完全没有容量的预期，这个是不可能的。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1579185952,"ip_address":"","comment_id":172292,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5874112833","product_id":100042501,"comment_content":"老师，这个并发度怎么来的，文中并没有详细解释，一个新的系统，或者一个未压测过的系统，怎么来计算这个并发度呢？<br>我的理解是这样的请老师指教：<br>新系统的话，一直添加线程数，直到返回超时或者开始报错了，用这个值当做最大在线用户数，然后用TPS&#47;最大在线用户数  然后得到并发度，这样计算是否正确","like_count":1,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481688,"discussion_content":"不是的。并发度肯定是通过线上的数据统计计算得来的。\n任何一个新系统，要说完全没有容量的预期，这个是不可能的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579185952,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":168671,"user_name":"、H","can_delete":false,"product_type":"c1","uid":1164928,"ip_address":"","ucode":"841D9D872CCBC6","user_header":"https://static001.geekbang.org/account/avatar/00/11/c6/80/fa8a8476.jpg","comment_is_top":false,"comment_ctime":1578135235,"is_pvip":false,"replies":[{"id":"65387","content":"这个要看业务指标了。<br>在要求严格的业务指标中错误率会要求为零。像和钱相关的业务。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1578138507,"ip_address":"","comment_id":168671,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5873102531","product_id":100042501,"comment_content":"请教下，例如Jmeter压测，错误率一般达到多少时，TPS,RT那些参数就没了参考意义<br>","like_count":1,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480288,"discussion_content":"这个要看业务指标了。\n在要求严格的业务指标中错误率会要求为零。像和钱相关的业务。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578138507,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":166794,"user_name":"童话","can_delete":false,"product_type":"c1","uid":1790517,"ip_address":"","ucode":"663286537E4EBA","user_header":"https://static001.geekbang.org/account/avatar/00/1b/52/35/b8f75b6a.jpg","comment_is_top":false,"comment_ctime":1577599032,"is_pvip":false,"replies":[{"id":"64302","content":"根据场景目标和递增的策略设置来的。 ","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1577616396,"ip_address":"","comment_id":166794,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5872566328","product_id":100042501,"comment_content":"压力机线程的是怎么来的呢","like_count":1,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479626,"discussion_content":"根据场景目标和递增的策略设置来的。 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577616396,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1799862,"avatar":"","nickname":"Geek_f580eb","note":"","ucode":"4382AB9D1F970B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":112842,"discussion_content":"这个递增策略怎么计算，压测场景中一次加载的线程数量这个怎么设计呢？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577884966,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":360768,"user_name":"阿甘","can_delete":false,"product_type":"c1","uid":1057843,"ip_address":"中国香港","ucode":"BC93175B70E05D","user_header":"https://static001.geekbang.org/account/avatar/00/10/24/33/bcf37f50.jpg","comment_is_top":false,"comment_ctime":1666837920,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1666837920","product_id":100042501,"comment_content":"TPS=响应时间(单位ms)1000ms​∗压力机线程数，这个公式不对吧。不是线程数越多TPS就越高的，还有一个阻塞系数，对于CPU密集型的，如果CPU已经100%了，再增加线程数TPS反而会下降。","like_count":0},{"had_liked":false,"id":360712,"user_name":"付林彬","can_delete":false,"product_type":"c1","uid":3081327,"ip_address":"上海","ucode":"643B7C83DFAFCF","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaELLDiacricicdjKK9SChNu9VUnPGfK8peJkCYRibApCLwVpceeiazJg1mO1AmVU5g82eJONPJUayGxw5Ow/132","comment_is_top":false,"comment_ctime":1666774985,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1666774985","product_id":100042501,"comment_content":"这里的1000ms 是指什么意思呢？","like_count":0},{"had_liked":false,"id":356326,"user_name":"刘小样","can_delete":false,"product_type":"c1","uid":2897064,"ip_address":"北京","ucode":"B910BD29168400","user_header":"https://static001.geekbang.org/account/avatar/00/2c/34/a8/791d0f5e.jpg","comment_is_top":false,"comment_ctime":1662168282,"is_pvip":false,"replies":[{"id":"130286","content":"根据场景需要选择。这个并不是看你描述的配置就能知道是怎么选择。","user_name":"作者回复","user_name_real":"编辑","uid":"1785562","ctime":1663808342,"ip_address":"北京","comment_id":356326,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1662168282","product_id":100042501,"comment_content":"你好、我想请教一下你。用jmeter有两种配置方式<br>第一种：线程数600、Ramp-Up：1S、 循环1次。<br>第二种：线程数100、Ramp-Up：1S、循环6次。<br>最终发出的请求都是600个。但是吞吐量是不一样的。想问一下这二种方式怎么选择。","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":588512,"discussion_content":"根据场景需要选择。这个并不是看你描述的配置就能知道是怎么选择。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663808343,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":355316,"user_name":"挺好的","can_delete":false,"product_type":"c1","uid":3015165,"ip_address":"北京","ucode":"9C8F24830A00A8","user_header":"","comment_is_top":false,"comment_ctime":1661263642,"is_pvip":true,"replies":[{"id":"129295","content":"这个文档中使用的是jvisualvm。","user_name":"作者回复","user_name_real":"编辑","uid":"1785562","ctime":1661330403,"ip_address":"北京","comment_id":355316,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1661263642","product_id":100042501,"comment_content":"老师好，请问文中查看后端线程的使用情况是通过什么工具观察的","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585085,"discussion_content":"这个文档中使用的是jvisualvm。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661330403,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":351316,"user_name":"galsangflower","can_delete":false,"product_type":"c1","uid":2982443,"ip_address":"北京","ucode":"93FF130C9ED3EA","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/cJwhYkXicLBFezDEU6PibfNNXnkPGHpc11AqgKXppSUWstkmB8RZiag3OWvZBlXo8sPMy6XnZs1rFu1shX0HpCeOA/132","comment_is_top":false,"comment_ctime":1657696510,"is_pvip":false,"replies":[{"id":"129316","content":"你要给我具体的数据我才知道知道。你这样的描述明显是不正常的。 ","user_name":"作者回复","user_name_real":"编辑","uid":"1785562","ctime":1661333102,"ip_address":"北京","comment_id":351316,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1657696510","product_id":100042501,"comment_content":"学习您的课程受益匪浅，我这有个小疑问向老师请教下。TPS=1000ms&#47;响应时间(单位ms)∗压力机线程数。我jmeter性能压测时，线程数增加，响应时间没有变，但TPS没有增加。老师这可能的原因是什么呀","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585108,"discussion_content":"你要给我具体的数据我才知道知道。你这样的描述明显是不正常的。 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661333102,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":347380,"user_name":"追风筝的人","can_delete":false,"product_type":"c1","uid":1488020,"ip_address":"","ucode":"2993D60F94C396","user_header":"https://static001.geekbang.org/account/avatar/00/16/b4/94/2796de72.jpg","comment_is_top":false,"comment_ctime":1653979996,"is_pvip":false,"replies":[{"id":"127155","content":"是这个意思。这计算不是挺合理吗？","user_name":"作者回复","user_name_real":"编辑","uid":"1785562","ctime":1655906991,"ip_address":"","comment_id":347380,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1653979996","product_id":100042501,"comment_content":"老师 用cosbench 工具对minio 3节点集群做性能测试，工具打印的吞吐量（单位op&#47;s) 可以看做 TPS数据吗？<br>用老师的公式算了下 级别符合  。，压力机线程50，工具打印的数据  AVG响应时间1294.43ms， 吞吐量38.62op&#47;s，  （1000&#47;1294.43ms)*50=38.62","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":577069,"discussion_content":"是这个意思。这计算不是挺合理吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655906992,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":347378,"user_name":"追风筝的人","can_delete":false,"product_type":"c1","uid":1488020,"ip_address":"","ucode":"2993D60F94C396","user_header":"https://static001.geekbang.org/account/avatar/00/16/b4/94/2796de72.jpg","comment_is_top":false,"comment_ctime":1653979082,"is_pvip":false,"replies":[{"id":"127156","content":"不知道写的啥。","user_name":"作者回复","user_name_real":"编辑","uid":"1785562","ctime":1655907034,"ip_address":"","comment_id":347378,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1653979082","product_id":100042501,"comment_content":"TPS=响应时间(单位ms)1000ms​∗压力机线程数","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":577070,"discussion_content":"不知道写的啥。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655907035,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":346862,"user_name":"静水潜流，润物无声","can_delete":false,"product_type":"c1","uid":1460672,"ip_address":"","ucode":"BA6B9636DAEA2A","user_header":"https://wx.qlogo.cn/mmopen/vi_32/ibXbRJ3yOT48IHc6mayIRxibutDz2bWHxBdicNoeJBG9EG6AXpuRMhtBRmjpFvmGPBIAYNrnq6nP9okwk5oU36GSA/132","comment_is_top":false,"comment_ctime":1653476824,"is_pvip":false,"replies":[{"id":"126612","content":"理解的对。 ","user_name":"作者回复","user_name_real":"编辑","uid":"1785562","ctime":1653834089,"ip_address":"","comment_id":346862,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1653476824","product_id":100042501,"comment_content":"老师好，请问能否这样解读：单线程并发数TPS = 1000ms&#47;响应时间；代表1s时间内，向服务端发送的请求的最大值？压力机的线程创建链接的时候，与服务端发送的所有性能测试应该都是同步消息吧，即客户端线程需要等待当前的请求响应接收到后，才模拟发送下一条请求的消息。如果这样解读是正确的话，在绝对“某一时刻”，服务器处理的“T”的个数应该是小于或等于“压力器线程数”。请教一下老师，上面的理解是否准确，多谢！","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":574106,"discussion_content":"理解的对。 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1653834089,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":346255,"user_name":"牛牛","can_delete":false,"product_type":"c1","uid":2279379,"ip_address":"","ucode":"9EB7E39FDA6F0E","user_header":"https://static001.geekbang.org/account/avatar/00/22/c7/d3/0db20722.jpg","comment_is_top":false,"comment_ctime":1652948773,"is_pvip":false,"replies":[{"id":"126614","content":"我有点被绕蒙了，可以微信上沟通一下。","user_name":"作者回复","user_name_real":"编辑","uid":"1785562","ctime":1653834197,"ip_address":"","comment_id":346255,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1652948773","product_id":100042501,"comment_content":"高楼老师，有一个问题我比较困惑，希望您看到能帮忙解答下呢：<br>我们产品 在每一个业务场景的响应时间都约定不要超过3秒，比如我在加压的过程中有一个业务场景的压测数据如下：<br>1、jmeter线程数：5，TPS：100，响应时间：50ms;<br>2、jmeter线程数：20，TPS：100，响应时间：200ms;<br>3、jmeter线程数：100，TPS：100，响应时间：1000ms;<br>4、jmeter线程数：300，TPS：100，响应时间：3000ms;<br><br>达到3秒时这时候我就会终止测试，然后计算：<br>最大并发用户数 = TPS * 3(秒) = 300<br>最大在线用户数 = 最大并发用户数 &#47; 并发度<br><br>您的文章我都看了一遍，您强调 并发用TPS来表示，但我觉得在达到最大TPS后，再增加并发线程数对应会增长响应时间，可以理解为：场景同时操作用户增加，每个用户等待的时间会变长，如果达到3秒时同时操作的用户数就是我理解的最大并发用户数，这个阈值3秒如果换成 2秒、5秒、8秒 对应不同的最大并发用户数。如果用TPS就不会体现并发用户增加的过程了。<br>我的理解是不是有啥误区呀？","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":574109,"discussion_content":"我有点被绕蒙了，可以微信上沟通一下。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1653834197,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":342172,"user_name":"林夕","can_delete":false,"product_type":"c1","uid":2355476,"ip_address":"","ucode":"9B94FFED6BF24A","user_header":"https://static001.geekbang.org/account/avatar/00/23/f1/14/7306a747.jpg","comment_is_top":false,"comment_ctime":1650082956,"is_pvip":true,"replies":[{"id":"125328","content":"这里的并发数是什么？","user_name":"作者回复","user_name_real":"编辑","uid":"1785562","ctime":1650709468,"ip_address":"","comment_id":342172,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1650082956","product_id":100042501,"comment_content":"高老师，你好。我看到网上有些文章里说：TPS=并发数&#47;平均响应时间，您觉得这个公式有道理吗？<br>我的理解是：TPS = 并发数 &#47; 总处理时间 才对啊。","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":566521,"discussion_content":"这里的并发数是什么？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650709468,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2355476,"avatar":"https://static001.geekbang.org/account/avatar/00/23/f1/14/7306a747.jpg","nickname":"林夕","note":"","ucode":"9B94FFED6BF24A","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":566541,"discussion_content":"我们领导跟我说，比如一秒钟有四十万的并发请求系统，而系统是200ms平均响应时间，那么系统qps要达到2000才可以承受住压力，我不是很赞同，或者理解不了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650710620,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":566521,"ip_address":""},"score":566541,"extra":""}]}]},{"had_liked":false,"id":340699,"user_name":"Geek_a5ffcf","can_delete":false,"product_type":"c1","uid":2533317,"ip_address":"","ucode":"B06AAD12C740CC","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKU8b6w5Y9WYgLH0as5P6XS69A0kFPZmXEiaSChlFgHUGjgo3lTflhV1B4PXOgU6wd4kKbjdoUqSIg/132","comment_is_top":false,"comment_ctime":1649057220,"is_pvip":false,"replies":[{"id":"124641","content":"第一：如果把事务作为用户级别层面的操作,那tps=在线用户数&#47;并发度，这里应该是 tps=在线用户数x并发度。<br>第二：正解。<br>第三：正解。 ","user_name":"作者回复","user_name_real":"编辑","uid":"1785562","ctime":1649228733,"ip_address":"","comment_id":340699,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1649057220","product_id":100042501,"comment_content":"第一个问题,服务端的并发能力其实就是tps,指服务端每秒处理事务的个数,如果把事务作为用户级别层面的操作,那tps=在线用户数&#47;并发度 ,第二个问题,我理解在实际业务中,每个服务的并发用户数是不一样的,所以通过绝对和相对的概念来定义是不准确的,第三个问题,若用cpu来计算并发数,cpu的容量只是硬件层面的东西,你只会得知最大能支持的容量,但实际业务不一定适用","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":560205,"discussion_content":"第一：如果把事务作为用户级别层面的操作,那tps=在线用户数/并发度，这里应该是 tps=在线用户数x并发度。\n第二：正解。\n第三：正解。 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649228734,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":339275,"user_name":"Geek_b83fff","can_delete":false,"product_type":"c1","uid":2902752,"ip_address":"","ucode":"AFA20C90BCBF02","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJaaRiaBo5xtYPib3az6lBtSG8ibebDUVGgSMRPD3nGn9hr0Iz8dDZXxMzsUV2M7uiaicBg9HdBxcSFic7g/132","comment_is_top":false,"comment_ctime":1648019125,"is_pvip":true,"replies":[{"id":"124348","content":"这个说的应该是数据库里的QPS。包括增删改查。","user_name":"作者回复","user_name_real":"编辑","uid":"1785562","ctime":1648600742,"ip_address":"","comment_id":339275,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1648019125","product_id":100042501,"comment_content":"老手，还有个问题，淘宝双十一说的支持100w级别TPS，这个意思是1秒内能处理100w个用户的下单请求吗？","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":559056,"discussion_content":"这个说的应该是数据库里的QPS。包括增删改查。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1648600743,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":339272,"user_name":"Geek_b83fff","can_delete":false,"product_type":"c1","uid":2902752,"ip_address":"","ucode":"AFA20C90BCBF02","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJaaRiaBo5xtYPib3az6lBtSG8ibebDUVGgSMRPD3nGn9hr0Iz8dDZXxMzsUV2M7uiaicBg9HdBxcSFic7g/132","comment_is_top":false,"comment_ctime":1648018636,"is_pvip":true,"replies":[{"id":"124349","content":"相当高了呀。","user_name":"作者回复","user_name_real":"编辑","uid":"1785562","ctime":1648600787,"ip_address":"","comment_id":339272,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1648018636","product_id":100042501,"comment_content":"老师好，上交所新一代交易系统峰值订单处理能力约８００００笔&#47;秒，平均订单时延比现用交易系统缩短３０％以上；这里的80000笔&#47;秒， TPS的T就定义为订单级别，是不是说上交所的后台服务器的tps = 80000，tps80000 在您看来是高还是低呢？","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":559057,"discussion_content":"相当高了呀。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1648600787,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":338598,"user_name":"章鱼","can_delete":false,"product_type":"c1","uid":2673745,"ip_address":"","ucode":"D44893DC2526D4","user_header":"","comment_is_top":false,"comment_ctime":1647589522,"is_pvip":false,"replies":[{"id":"123799","content":"评论区才是出人才的地方。 ","user_name":"作者回复","user_name_real":"编辑","uid":"1785562","ctime":1647665768,"ip_address":"","comment_id":338598,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1647589522","product_id":100042501,"comment_content":"评论区的大神们，真的太牛了，我每一篇文章下面的问题都要看一个小时，才能看完","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":557113,"discussion_content":"评论区才是出人才的地方。 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647665768,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":336542,"user_name":"Nicole","can_delete":false,"product_type":"c1","uid":1166860,"ip_address":"","ucode":"5C4C13EB1A15D1","user_header":"https://static001.geekbang.org/account/avatar/00/11/ce/0c/91fb485b.jpg","comment_is_top":false,"comment_ctime":1646206867,"is_pvip":false,"replies":[{"id":"123012","content":"如果把T一定要定义为各个服务的单个接口这个层级，那确实是要把每个接口的tps都要加起来。<br>但是如果把T定义在业务接口的级别，那只要统计入口不就行了。 ","user_name":"作者回复","user_name_real":"编辑","uid":"1785562","ctime":1646270796,"ip_address":"","comment_id":336542,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1646206867","product_id":100042501,"comment_content":"这里有个疑问。混合容量的TPS不应该是几个接口加起来的tps吗（比如一个下单到支付的流程会涉及多个接口）。难道会比单接口tps更低","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":554205,"discussion_content":"如果把T一定要定义为各个服务的单个接口这个层级，那确实是要把每个接口的tps都要加起来。\n但是如果把T定义在业务接口的级别，那只要统计入口不就行了。 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646270796,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":336264,"user_name":"天天向上","can_delete":false,"product_type":"c1","uid":1336966,"ip_address":"","ucode":"A54227DD997643","user_header":"https://static001.geekbang.org/account/avatar/00/14/66/86/47184fdf.jpg","comment_is_top":false,"comment_ctime":1646040329,"is_pvip":false,"replies":[{"id":"122984","content":"1. 一般不懂性能逻辑的，说的都是并发用户数。懂性能逻辑的说的都是TPS。<br>2. 那取决于这个T是什么。","user_name":"作者回复","user_name_real":"编辑","uid":"1785562","ctime":1646188763,"ip_address":"","comment_id":336264,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1646040329","product_id":100042501,"comment_content":"老师好，有如下问题麻烦帮忙回答下:<br>1、面试官常问 你们系统的并发多少？  面试官说的这个并发是指 并发用户数还是tps ?<br>2、周围同事计算tps的方法是  并发数&#47;响应时间，这个正确吗","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":554025,"discussion_content":"1. 一般不懂性能逻辑的，说的都是并发用户数。懂性能逻辑的说的都是TPS。\n2. 那取决于这个T是什么。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646188763,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2902752,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJaaRiaBo5xtYPib3az6lBtSG8ibebDUVGgSMRPD3nGn9hr0Iz8dDZXxMzsUV2M7uiaicBg9HdBxcSFic7g/132","nickname":"Geek_b83fff","note":"","ucode":"AFA20C90BCBF02","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":557880,"discussion_content":"并发用户数就是TPS吧，很多面试官问的你们系统并发是多少是指在线用户数吧","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1648016436,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":554025,"ip_address":""},"score":557880,"extra":""}]}]},{"had_liked":false,"id":332240,"user_name":"Cathy","can_delete":false,"product_type":"c1","uid":1786203,"ip_address":"","ucode":"9C474FE2C70F38","user_header":"https://static001.geekbang.org/account/avatar/00/1b/41/5b/aa3ca816.jpg","comment_is_top":false,"comment_ctime":1643106219,"is_pvip":false,"replies":[{"id":"121762","content":"总结的不错哦。 ","user_name":"作者回复","user_name_real":"编辑","uid":"1785562","ctime":1644243994,"ip_address":"","comment_id":332240,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1643106219","product_id":100042501,"comment_content":"05讲：并发能力指服务端的并发，而不是压力机线程数。 <br>          TPS = （1000ms &#47; 响应时间（ms） ）  * 压力机线程数  <br>04讲：2个星期把JMeter工具用熟<br>03讲：并发用户数， TPS， 响应时间， 趋势<br>02讲：基准场景、容量场景、稳定性场景、异常场景<br>01讲：性能指标、性能模型、性能场景、性能监控、性能实施、性能报告","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":549804,"discussion_content":"总结的不错哦。 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644243994,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":325713,"user_name":"靓仔","can_delete":false,"product_type":"c1","uid":1619847,"ip_address":"","ucode":"A6D0799C6CDBC5","user_header":"https://static001.geekbang.org/account/avatar/00/18/b7/87/a49eea43.jpg","comment_is_top":false,"comment_ctime":1639103692,"is_pvip":false,"replies":[{"id":"118178","content":"当T定义在用户级时，是对的。","user_name":"作者回复","user_name_real":"编辑","uid":"1785562","ctime":1639144967,"ip_address":"","comment_id":325713,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1639103692","product_id":100042501,"comment_content":"高老师不好意思，刚刚发表了一个评论，里面有个逻辑错误了，就是<br>我个人理解的是：<br>理论TPS计算：<br>TPS=在线用户数*并发度<br><br> <br><br>实际压测结果去计算TPS：<br><br>TPS=1000ms​&#47;响应时间(单位ms)∗压力机线程数","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":537685,"discussion_content":"当T定义在用户级时，是对的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639144967,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2902752,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJaaRiaBo5xtYPib3az6lBtSG8ibebDUVGgSMRPD3nGn9hr0Iz8dDZXxMzsUV2M7uiaicBg9HdBxcSFic7g/132","nickname":"Geek_b83fff","note":"","ucode":"AFA20C90BCBF02","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":557881,"discussion_content":"我也是这么理解的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1648016483,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":325709,"user_name":"靓仔","can_delete":false,"product_type":"c1","uid":1619847,"ip_address":"","ucode":"A6D0799C6CDBC5","user_header":"https://static001.geekbang.org/account/avatar/00/18/b7/87/a49eea43.jpg","comment_is_top":false,"comment_ctime":1639103419,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1639103419","product_id":100042501,"comment_content":"高老师好，看了这篇文章感觉自己对用户数，TPS，压力机线程数，有了比较清晰认识。<br>我的理解如下：<br>服务端的理论TPS：当前在线用户数&#47;并发度 ，比如当前在线用户数1000&#47;并发度是5%，服务端理论并发数（TPS）就是50<br>实际压测结果TPS：TPS=1000ms​&#47;响应时间(单位ms)∗压力机线程数  <br>不知道这样理解TPS（也就是并发用户数，也是代表一个用户的完整的业务操作）<br>恳请高老师指点！！！","like_count":0},{"had_liked":false,"id":321772,"user_name":"七月的雨","can_delete":false,"product_type":"c1","uid":2839126,"ip_address":"","ucode":"7B3829576985D4","user_header":"https://static001.geekbang.org/account/avatar/00/2b/52/56/6ac8be3c.jpg","comment_is_top":false,"comment_ctime":1637038117,"is_pvip":false,"replies":[{"id":"116927","content":"这要看你测试的具体项目中的具体业务路径了。 ","user_name":"作者回复","user_name_real":"编辑","uid":"1785562","ctime":1637124854,"ip_address":"","comment_id":321772,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1637038117","product_id":100042501,"comment_content":"老师，服务端的TPS包括哪些服务咧，一个项目包括前端，中间件，再到后端服务，具体看哪个应用的TPS的处理能力","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":530679,"discussion_content":"这要看你测试的具体项目中的具体业务路径了。 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637124854,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":317444,"user_name":"potato","can_delete":false,"product_type":"c1","uid":1712675,"ip_address":"","ucode":"C3544C7F4BBDF4","user_header":"https://static001.geekbang.org/account/avatar/00/1a/22/23/5bf30be6.jpg","comment_is_top":false,"comment_ctime":1634800143,"is_pvip":false,"replies":[{"id":"115040","content":"在我的逻辑里，并发是用TPS来承载的。 ","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1634808530,"ip_address":"","comment_id":317444,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1634800143","product_id":100042501,"comment_content":"不明白，在线用户数 为什么是 tps&#47;5%(并发度)，tps不是每秒处理事务吗？","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":528818,"discussion_content":"在我的逻辑里，并发是用TPS来承载的。 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634808530,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":314804,"user_name":"碎碎念","can_delete":false,"product_type":"c1","uid":1211688,"ip_address":"","ucode":"122AE5282B31E6","user_header":"https://static001.geekbang.org/account/avatar/00/12/7d/28/423df492.jpg","comment_is_top":false,"comment_ctime":1633442837,"is_pvip":false,"replies":[{"id":"114812","content":"就是jmeter的线程数呀。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1634690341,"ip_address":"","comment_id":314804,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1633442837","product_id":100042501,"comment_content":"老师，有个疑问，压力机线程数是指什么，和jmeter中设置的线程数有什么关系","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527793,"discussion_content":"就是jmeter的线程数呀。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634690341,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":312050,"user_name":"颜颜","can_delete":false,"product_type":"c1","uid":2718104,"ip_address":"","ucode":"2AE3A10A51EFC1","user_header":"https://static001.geekbang.org/account/avatar/00/29/79/98/fb1bf6c7.jpg","comment_is_top":false,"comment_ctime":1631606958,"is_pvip":false,"replies":[{"id":"114824","content":"1，并发，我只用tps来承载。通常我们不会说压垮之后的tps，而是压垮之前。<br>2，压垮不是目的，满足线上tps要求才是目标。不混合就不是真实场景，不是真实场景，就没有办法说明线上情况。<br>3，先做被依赖接口，后串起来做。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1634690911,"ip_address":"","comment_id":312050,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1631606958","product_id":100042501,"comment_content":"老师，请帮忙解答一下哈：<br>1、如果并发用户数是用TPS承载的，比如我现在是100个压力线程压测达到最大TPS是200了，再继续增加压力线程tps保持恒定不变了或开始下降了，但是响应时间虽然再上升但还在预期范围内，也没有报错，我现在想知道把系统压垮的最大并发用户数，现在还是可以继续增加压力线程数的，比如我加到300线程数的时候已经开始超时了，那现在把系统压垮的最大并发数是多少？这时不能用tps里表示了吧，用300线程数吗？<br>2、基准测试只是测出单业务的最大tps就行了吗？不用再继续加压测试把系统搞垮吗？我们项目都是只对某个接口或多个接口组成的事物做压测，完了对每个接口或事物给个最大并发数的报告就行了，没有做过混合容量场景测试，这个是不是不行，必须得加上混合容量测试？<br>3、基准测试中，测试一个接口时需要依赖另一个接口，那我是分别对这两个接口做基准测试，还是将这两个接口作为一个事物整体做基准测试？","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526843,"discussion_content":"1，并发，我只用tps来承载。通常我们不会说压垮之后的tps，而是压垮之前。\n2，压垮不是目的，满足线上tps要求才是目标。不混合就不是真实场景，不是真实场景，就没有办法说明线上情况。\n3，先做被依赖接口，后串起来做。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634690911,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1880702,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIq2blbuavicUc8ibicIGicoUV0KkaibtMbN8790qDY60kzKSXwaGjqa9Hppk0icMNuHF4oibzYKe2VrgGsA/132","nickname":"刘高艺","note":"","ucode":"A5BC9399CFF153","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":398101,"discussion_content":"个人理解：1.应该是压垮系统的最小并发数吧，我感觉这个值没啥实际参考意义吧，\n2.混合容量测试肯定得依据实际生产业务比例来测，不然性能测试没有实际意义\n3.具体按照实际的业务划分吧，看实际的需求","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632735215,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":309978,"user_name":"学员141","can_delete":false,"product_type":"c1","uid":2559600,"ip_address":"","ucode":"8BC79DC3D7AF44","user_header":"","comment_is_top":false,"comment_ctime":1630422557,"is_pvip":false,"replies":[{"id":"112343","content":"对系统来说，肯定是混合容量场景的tps才是真实的生产场景。<br>所以一定是汇报总的TPS，单个接口的tps只是基准场景。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1630473124,"ip_address":"","comment_id":309978,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1630422557","product_id":100042501,"comment_content":"如果一个事务由三个接口组成 ，压测的tps应该是三个接口一起组合压测的总和吗？假设系统就N个需要进行性能的接口，那系统容量是不是就是这些接口组合后，压测的总的TPS？我有时候分不清楚怎么汇报这个，都是全部列举各个接口的tps","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526082,"discussion_content":"对系统来说，肯定是混合容量场景的tps才是真实的生产场景。\n所以一定是汇报总的TPS，单个接口的tps只是基准场景。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630473124,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":308620,"user_name":"Geek_697d33","can_delete":false,"product_type":"c1","uid":2739475,"ip_address":"","ucode":"448FD244C79048","user_header":"","comment_is_top":false,"comment_ctime":1629706981,"is_pvip":false,"replies":[{"id":"111997","content":"公式对瞬间数据是有效的。但Grafana看到的是根据粒度计算的。 ","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1630068288,"ip_address":"","comment_id":308620,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1629706981","product_id":100042501,"comment_content":"高老师，正常情况下tps、并发数、rt的计算应该是符合文章中总结的那个公式的对吗？（tps=（1000ms&#47;响应时间）*并发线程数），为什么我压测出来的结果，tps都是高于理想值的？我用的是jmeter+influxdb+grafana","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":525563,"discussion_content":"公式对瞬间数据是有效的。但Grafana看到的是根据粒度计算的。 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630068288,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1168516,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d4/84/7f584cb2.jpg","nickname":"杜艳","note":"","ucode":"8D46A8CF33E9C7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":406177,"discussion_content":"公式对瞬间有效，那怎么去看瞬间的数据呢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634717580,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":304694,"user_name":"颜颜","can_delete":false,"product_type":"c1","uid":2718104,"ip_address":"","ucode":"2AE3A10A51EFC1","user_header":"https://static001.geekbang.org/account/avatar/00/29/79/98/fb1bf6c7.jpg","comment_is_top":false,"comment_ctime":1627552558,"is_pvip":false,"replies":[{"id":"110302","content":"会影响。但这也是符合真实的业务场景的。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1627704434,"ip_address":"","comment_id":304694,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1627552558","product_id":100042501,"comment_content":"老师，我是测试小白，我想问一下，我们要对一个接口压测，这个接口需要获取上传图片后的url，那我得压两个接口，一个是上传图片，一个是提交接口，如果上传图片接口比较慢是不是影响到我的提交接口了","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":524123,"discussion_content":"会影响。但这也是符合真实的业务场景的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627704434,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":298198,"user_name":"学员141","can_delete":false,"product_type":"c1","uid":2559600,"ip_address":"","ucode":"8BC79DC3D7AF44","user_header":"","comment_is_top":false,"comment_ctime":1623942279,"is_pvip":false,"replies":[{"id":"108236","content":"看接口关系以及怎么定义T了。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1624004438,"ip_address":"","comment_id":298198,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1623942279","product_id":100042501,"comment_content":"老师，如果业务场景涉及3个接口，服务器tps是不是三个接口的汇总？","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":522053,"discussion_content":"看接口关系以及怎么定义T了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1624004438,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":294980,"user_name":"batman","can_delete":false,"product_type":"c1","uid":1266482,"ip_address":"","ucode":"73C30ACFC0D612","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/IIkdC2gohpcibib0AJvSdnJQefAuQYGlLySQOticThpF7Ck9WuDUQLJlgZ7ic13LIFnGBXXbMsSP3nZsbibBN98ZjGA/132","comment_is_top":false,"comment_ctime":1622170740,"is_pvip":true,"replies":[{"id":"107132","content":"对滴。业务级别的并发靠CPU是算不出来滴。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1622216414,"ip_address":"","comment_id":294980,"utype":1}],"discussion_count":1,"race_medal":1,"score":"1622170740","product_id":100042501,"comment_content":"如果用CPU 来计算并发数的话，计算的是CPU的并发性能，而不是系统级别的并发。","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":520903,"discussion_content":"对滴。业务级别的并发靠CPU是算不出来滴。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622216414,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":294155,"user_name":"Sruby","can_delete":false,"product_type":"c1","uid":1016232,"ip_address":"","ucode":"A7D1B93F41DA0F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/81/a8/559afe8b.jpg","comment_is_top":false,"comment_ctime":1621789646,"is_pvip":false,"replies":[{"id":"106869","content":"对滴。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1622004363,"ip_address":"","comment_id":294155,"utype":1}],"discussion_count":1,"race_medal":1,"score":"1621789646","product_id":100042501,"comment_content":"用户并发度的定义是同一秒内正在执行操作的用户吗？","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":520534,"discussion_content":"对滴。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622004363,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":291429,"user_name":"吾本端庄，奈何骚气","can_delete":false,"product_type":"c1","uid":2608046,"ip_address":"","ucode":"7106AA1A520F78","user_header":"https://static001.geekbang.org/account/avatar/00/27/cb/ae/ea1117ea.jpg","comment_is_top":false,"comment_ctime":1620284972,"is_pvip":false,"replies":[{"id":"105643","content":"你要是得到的平均响应时间是10ms就拿10ms来算呀。我这里只是举个例子嘛，所以用“如果”。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1620452449,"ip_address":"","comment_id":291429,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1620284972","product_id":100042501,"comment_content":"原文：<br>如果每个线程的 20TPS，显然只需要 5 个线程就够了<br>50ms 就是根据 1000ms&#47;20TPS 得来的<br><br>问题：<br>100个TPS，假设客户机每个线程负责20个TPS，则需要5个TPS，换种说法也就是一个线程1s内需要产生20个事务，每个事务最大允许响应时间是1000ms&#47;20=50ms，如果这种说法是对的。我有个疑问：<br>假设服务器单个事务处理非常快，如10ms，而且相对稳定（在100个tps的范围下），那怎么能说服务器的平均响应时间是50ms呢？请老师帮忙看看<br><br>","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":519468,"discussion_content":"你要是得到的平均响应时间是10ms就拿10ms来算呀。我这里只是举个例子嘛，所以用“如果”。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620452449,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":287933,"user_name":"T","can_delete":false,"product_type":"c1","uid":2385685,"ip_address":"","ucode":"DAD03A56187EF8","user_header":"https://static001.geekbang.org/account/avatar/00/24/67/15/3fcfe08f.jpg","comment_is_top":false,"comment_ctime":1618221971,"is_pvip":false,"replies":[{"id":"104577","content":"你这样描述，我也没法算。因为我不懂你的业务和具体的实现细节。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1618287450,"ip_address":"","comment_id":287933,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1618221971","product_id":100042501,"comment_content":"老师你好，得到一个任务，用户并发数200的情况下看响应时间tps等指标，这个用户并发数200 应该不是指jmeter工具的线程数吧，jmeter中 应该如何设置呢，或者说如何实现这个任务","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518465,"discussion_content":"你这样描述，我也没法算。因为我不懂你的业务和具体的实现细节。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618287450,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":285444,"user_name":"EASY","can_delete":false,"product_type":"c1","uid":2539111,"ip_address":"","ucode":"0235521986D5B7","user_header":"https://static001.geekbang.org/account/avatar/00/26/be/67/b89ce223.jpg","comment_is_top":false,"comment_ctime":1616815485,"is_pvip":false,"replies":[{"id":"103621","content":"那只能靠经验了。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1616909643,"ip_address":"","comment_id":285444,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1616815485","product_id":100042501,"comment_content":"系统还没上线，就没有数据去分析并发度了吧","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":517676,"discussion_content":"那只能靠经验了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616909643,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":284759,"user_name":"Geek_b1874f","can_delete":false,"product_type":"c1","uid":2535890,"ip_address":"","ucode":"D3005FC221B2CB","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83er3rtkVMmnZANicr4ArpwcibqyklQibicrMsk8zXd5XBR1W9Rur493YA8h4xAHB0GzWL7c3taSqpvQicng/132","comment_is_top":false,"comment_ctime":1616462463,"is_pvip":false,"replies":[{"id":"103336","content":"对的。没有视频。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1616506080,"ip_address":"","comment_id":284759,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1616462463","product_id":100042501,"comment_content":"老师，您这是没有视频，只是音频吗？，<br>","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":517459,"discussion_content":"对的。没有视频。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616506080,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":282932,"user_name":"Geek_d49601","can_delete":false,"product_type":"c1","uid":1712419,"ip_address":"","ucode":"ADE36F59BB740A","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Rccaya3zw31Pxu1fRSiakK7Jw9JJyZphXLvGUpqSicFRPsCt3EbziaibvkCibgIjXBonEMrjZpe08HRgxYzsyvia2hxg/132","comment_is_top":false,"comment_ctime":1615469371,"is_pvip":false,"replies":[{"id":"103237","content":"这个你得有数据拿给我分析下才能知道了。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1616422369,"ip_address":"","comment_id":282932,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1615469371","product_id":100042501,"comment_content":"老师，你好，看完之后感觉还是有点懵，我一直做自动化的，最近才接触性能方面的测试，现在公司分配下来的项目，设计容量是200万人，线上一般最大同时在线60万人每天，每小时的最大在线数在10万左右，这样我要怎么来预估这个系统的指标是多少呢？新搭建的系统，接口级的TPS要达到多少才能满足使用要求呢？","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":516882,"discussion_content":"这个你得有数据拿给我分析下才能知道了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616422369,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":279355,"user_name":"闲鱼超人","can_delete":false,"product_type":"c1","uid":1919774,"ip_address":"","ucode":"F517AC728D01CB","user_header":"https://static001.geekbang.org/account/avatar/00/1d/4b/1e/107db99f.jpg","comment_is_top":false,"comment_ctime":1613727952,"is_pvip":false,"replies":[{"id":"103265","content":"对的。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1616423181,"ip_address":"","comment_id":279355,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1613727952","product_id":100042501,"comment_content":"所谓的服务并发能力也只是一个抽象概念，便于量化和沟通服务器处理性能。<br>所以还是要从现实出发，在既定的场景条件下，响应时间和容量是否能满足实际需求，转化过来那么便是我们说的TPS。也就不必拘泥于去说绝对和相对并发了。","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":515707,"discussion_content":"对的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616423181,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":276843,"user_name":"Geek_a8d2eb","can_delete":false,"product_type":"c1","uid":2169031,"ip_address":"","ucode":"B3EA4F3318B307","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLx577ko7FBh90vfSFM4oqSz8wFBW4ztau8PUxY18R7yKJnRD4WB4sF7ibOmlqBYAZqwNsEbWT6bbg/132","comment_is_top":false,"comment_ctime":1612151409,"is_pvip":false,"replies":[{"id":"103279","content":"不是。这个还要说明t是什么。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1616423552,"ip_address":"","comment_id":276843,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1612151409","product_id":100042501,"comment_content":"老师，如果已知某业务的在网量x，并且可以通过现网监控看到某一时刻的tps为y，那么这一时刻的并发度就等于y&#47;x吧？","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":514835,"discussion_content":"不是。这个还要说明t是什么。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616423552,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":276839,"user_name":"Geek_88dbc9","can_delete":false,"product_type":"c1","uid":2417658,"ip_address":"","ucode":"371480D559ACC5","user_header":"","comment_is_top":false,"comment_ctime":1612149482,"is_pvip":false,"replies":[{"id":"103280","content":"这个说法就是不理智的。在我的项目中，通常都不说压力工具中的线程数是多少。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1616423592,"ip_address":"","comment_id":276839,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1612149482","product_id":100042501,"comment_content":"对于压力工具来说，只要不报错，只需关心 TPS 和响应时间，因为 TPS 反应出来的是和服务器对应的处理能力，至少压力线程数是多少，并不关键。<br><br>对后半句“至少压力线程数是多少，并不关键。” 有疑惑，一般性能压测时有要求多少线程数~<br>假设 单一场景下，10个线程数可以达到预期指标；而100个线程数反而不能达标，这时候该如何处理？--老师可以解惑一下吗","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":514833,"discussion_content":"这个说法就是不理智的。在我的项目中，通常都不说压力工具中的线程数是多少。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616423592,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":275244,"user_name":"彬彬ieeeeemily","can_delete":false,"product_type":"c1","uid":1171509,"ip_address":"","ucode":"E8B257B12EBF77","user_header":"https://static001.geekbang.org/account/avatar/00/11/e0/35/cd9c5653.jpg","comment_is_top":false,"comment_ctime":1611406521,"is_pvip":false,"replies":[{"id":"99903","content":"如果tps单压力上的，算出来自然就是单压力机的线程数。<br><br>如果压力机是汇总的，下面这个公式目测是正确的。就是简单的除法，不会有啥疑惑。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1611462684,"ip_address":"","comment_id":275244,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1611406521","product_id":100042501,"comment_content":"TPS =（ 1000&#47;响应时间 ）*  压力机线程数<br>公式里的压力机线程数 是单台压力机的线程数吧。<br><br>压测设置压测工具线程数，是不是这样计算：<br>单台压测机线程数 =  TPS &#47; (1000ms&#47;响应时间) ／ 压力机台数","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":514279,"discussion_content":"如果tps单压力上的，算出来自然就是单压力机的线程数。\n\n如果压力机是汇总的，下面这个公式目测是正确的。就是简单的除法，不会有啥疑惑。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611462684,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":274299,"user_name":"Asily","can_delete":false,"product_type":"c1","uid":1571164,"ip_address":"","ucode":"C15A4F157AC8A4","user_header":"https://static001.geekbang.org/account/avatar/00/17/f9/5c/4040d5ac.jpg","comment_is_top":false,"comment_ctime":1610958664,"is_pvip":false,"replies":[{"id":"99803","content":"那要看你们定义的并发是不是tps了。这个和T的定义有关。<br>通常情况下，我们在项目中会先有约定。并发就是tps。 ","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1611311413,"ip_address":"","comment_id":274299,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1610958664","product_id":100042501,"comment_content":"在项目中要求支持并发800，是tps800吗","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":513969,"discussion_content":"那要看你们定义的并发是不是tps了。这个和T的定义有关。\n通常情况下，我们在项目中会先有约定。并发就是tps。 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611311413,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":272149,"user_name":"香辣鸡腿堡","can_delete":false,"product_type":"c1","uid":1954926,"ip_address":"","ucode":"DF88CC1CAB0E9E","user_header":"","comment_is_top":false,"comment_ctime":1609948328,"is_pvip":false,"replies":[{"id":"98704","content":"你的这个事务是定义到什么级别的？","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1610016314,"ip_address":"","comment_id":272149,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1609948328","product_id":100042501,"comment_content":"新人提个问题:<br>最近有一个压测需求:产品给我的要求仅是系统可以支持500人同时在线考试。按照我的理解这是一个业务级的场景。我按照用户登录，进入在线考试菜单（查询考试列表），点击考试按钮返回试题，答题保存，提交答卷的操作步骤拼接了五个接口。根据单线程执行下来，除了返回试题的接口在2s左右外，其余接口的响应时间都在40ms上下。<br>    按照课里说的&quot;并发是需要具体的指标来承载的&quot;。我是否可以根据500人的需求来设定以下场景来推出我的压力机并发数呢？<br>①1000TPS，响应时间500ms，推出并发线程数500；<br>②1000TPS，响应时间1000ms，推出并发线程数1000；<br>③1000TPS，响应时间300ms，推出并发线程数300<br>④500TPS，响应时间1000ms，推出并发线程数500；<br>⑤500TPS，响应时间500ms，推出并发线程数250；<br>⑥500TPS，响应时间300ms，推出并发线程数150；","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":513176,"discussion_content":"你的这个事务是定义到什么级别的？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610016314,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1954926,"avatar":"","nickname":"香辣鸡腿堡","note":"","ucode":"DF88CC1CAB0E9E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":340586,"discussion_content":"业务级接口层，也就是用户会在一个规定时间一起登录系统，然后等待一段时间，待考试开始后统一点击考试进行答题。核心就是确保500用户在进行这一整个业务流程时不会出现异常。这五个接口我已经按照实际场景模拟了等待时间及异步调用其他服务的接口。但是在设计压力线程数出现了疑问，是按照上面列的6种来呢？还是按我以前的理解，分别设计100，200……500的压力线程数，看每次执行时的各接口响应时间和tps呢？（由于没有明确的响应时间需求，我暂时认定低于1000ms即可）","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610068170,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":271788,"user_name":"*回眸*·wdlcoke","can_delete":false,"product_type":"c1","uid":1499362,"ip_address":"","ucode":"8D5ECCD274601F","user_header":"https://static001.geekbang.org/account/avatar/00/16/e0/e2/6054de3f.jpg","comment_is_top":false,"comment_ctime":1609809962,"is_pvip":true,"replies":[{"id":"98578","content":"公式只是理解原理的过程。<br>对性能工具的结果，我们就要看趋势才能分析合理性。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1609831645,"ip_address":"","comment_id":271788,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1609809962","product_id":100042501,"comment_content":"问：场景中很多配置元素都会有影响，像ramp up，sleep之类的。这公式对每个瞬间的数据都是有效的。但对结果的平均值就得考虑很多因素了，那么使用工具的测试结果和公式怎么想结合使用？","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":513041,"discussion_content":"公式只是理解原理的过程。\n对性能工具的结果，我们就要看趋势才能分析合理性。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609831645,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":271309,"user_name":"wfw001","can_delete":false,"product_type":"c1","uid":2352165,"ip_address":"","ucode":"0DA8A08367C3F8","user_header":"","comment_is_top":false,"comment_ctime":1609547056,"is_pvip":false,"replies":[{"id":"98356","content":"线性增长可以这样大概计算下。但是实际结果还是要测试才行。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1609551029,"ip_address":"","comment_id":271309,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1609547056","product_id":100042501,"comment_content":"例如 单台服务器 单个线程，tps=10，我再加一台服务器，单个线程，这时候tps应该20，此时我2个线程，2台服务器，tps应该是40 这样算对吗","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":512895,"discussion_content":"线性增长可以这样大概计算下。但是实际结果还是要测试才行。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609551029,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":271247,"user_name":"蔚来懿","can_delete":false,"product_type":"c1","uid":2363304,"ip_address":"","ucode":"815144E42094C3","user_header":"https://static001.geekbang.org/account/avatar/00/24/0f/a8/956452cd.jpg","comment_is_top":false,"comment_ctime":1609490677,"is_pvip":false,"replies":[{"id":"98357","content":"这样描述过于平面了。我得先知道什么场景什么业务，要回答的是什么问题才行。不同角度看的东西不一样，T的范围也不一样。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1609551126,"ip_address":"","comment_id":271247,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1609490677","product_id":100042501,"comment_content":"老师，请问混合场景（有ABC三个接口）的TPS 具体应该怎么计算？是所有的接口的TPS的总合，还是每个接口的TPS表示出来？出报告的时候，总是有这个问题。","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":512877,"discussion_content":"这样描述过于平面了。我得先知道什么场景什么业务，要回答的是什么问题才行。不同角度看的东西不一样，T的范围也不一样。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609551126,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2363304,"avatar":"https://static001.geekbang.org/account/avatar/00/24/0f/a8/956452cd.jpg","nickname":"蔚来懿","note":"","ucode":"815144E42094C3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":339254,"discussion_content":"三个不同的业务接口，放在一起是模拟生产的压力情况，这种去计算tps的时候，应该如何计算。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609580611,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1410056,"avatar":"https://static001.geekbang.org/account/avatar/00/15/84/08/c88a9683.jpg","nickname":"hello. world","note":"","ucode":"3579A0BE22C0A8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2363304,"avatar":"https://static001.geekbang.org/account/avatar/00/24/0f/a8/956452cd.jpg","nickname":"蔚来懿","note":"","ucode":"815144E42094C3","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":565959,"discussion_content":"组合场景按所有接口total来计算tps，因为你计算的是完成这个业务流需要支持多少tps","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650561710,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":339254,"ip_address":""},"score":565959,"extra":""}]}]},{"had_liked":false,"id":269530,"user_name":"勼乄児亓","can_delete":false,"product_type":"c1","uid":2379844,"ip_address":"","ucode":"D33120C9B88D26","user_header":"https://static001.geekbang.org/account/avatar/00/24/50/44/aab77728.jpg","comment_is_top":false,"comment_ctime":1608692620,"is_pvip":false,"replies":[{"id":"97797","content":"我觉得和非专业的人员沟通，就用他们能听懂的语言。<br>比如说，他们想知道的是知道最大并发用户数多少，那就直接告诉他们这一个数字就可以了，计算过程和方法不用跟他们解释。<br>我反复在强调的一点是，并发并不是一个技术概念，到具体的技术层面，必须有一个承载的技术概念，那就是具有业务含义的T的定义。<br>有了这样的概念转换，才能在同一层面沟通。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1608769278,"ip_address":"","comment_id":269530,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1608692620","product_id":100042501,"comment_content":"假如老板的需求是测试A系统能支撑最大并发数(混合场景 业务级脚本)，报告中能这样写吗？<br>A系统的重点交易(如：提现)，性能情况如下：<br>1,服务器并发支撑能力为100(即100tps)<br>2,响应时间不超过3s<br>3,可支撑同时在线用户数100(tps)&#47;5%(并发度)=2000<br><br>那这样子 就必须先算出并发度了，我担心这样一说，他们会认为最大能支撑2000个并发用户数。。好纠结的问题","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":512310,"discussion_content":"我觉得和非专业的人员沟通，就用他们能听懂的语言。\n比如说，他们想知道的是知道最大并发用户数多少，那就直接告诉他们这一个数字就可以了，计算过程和方法不用跟他们解释。\n我反复在强调的一点是，并发并不是一个技术概念，到具体的技术层面，必须有一个承载的技术概念，那就是具有业务含义的T的定义。\n有了这样的概念转换，才能在同一层面沟通。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608769278,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":268991,"user_name":"喵疯人","can_delete":false,"product_type":"c1","uid":1798746,"ip_address":"","ucode":"5CD35D736D3AB1","user_header":"https://static001.geekbang.org/account/avatar/00/1b/72/5a/61b6c2ac.jpg","comment_is_top":false,"comment_ctime":1608464551,"is_pvip":false,"replies":[{"id":"97684","content":"不是。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1608613520,"ip_address":"","comment_id":268991,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1608464551","product_id":100042501,"comment_content":"老师 不知道我这么理解有没有问题：<br>对于单接口来说，其实不存在一个并发度的问题，也就是可以用当前Jmeter压出的TPS的线程数来作为用户数，而对于一个业务来讲，内部是存在并发度的，对于这种场景才需要涉及并发度计算，","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":512108,"discussion_content":"不是。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608613520,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":267463,"user_name":"alley","can_delete":false,"product_type":"c1","uid":1129217,"ip_address":"","ucode":"C46DB6F84DB74F","user_header":"https://static001.geekbang.org/account/avatar/00/11/3b/01/7a0bfa9a.jpg","comment_is_top":false,"comment_ctime":1607756810,"is_pvip":false,"replies":[{"id":"97168","content":"1，用户和tps之间要转化一下。<br>2，正解。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1607828910,"ip_address":"","comment_id":267463,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1607756810","product_id":100042501,"comment_content":"1、服务端的并发能力，用TPS来衡量；我们在jmeter中设置的线程数，是业务基线要求的并发用户数；然后关注每个接口和业务对应的耗时，超出基线时间让优化；是不是需要用TPS指标来衡量比较合理<br>2、不推荐用CPU来计算并发用户数？单核CPU同一时间只有一个进程在运行，由于CPU的时间片轮转机制，导致我们肉眼看到的是一个CPU在同时处理我们多个业务。希望老师多多指正。","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":511650,"discussion_content":"1，用户和tps之间要转化一下。\n2，正解。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607828910,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":254810,"user_name":"合肥人真帅","can_delete":false,"product_type":"c1","uid":2094654,"ip_address":"","ucode":"C22D797AAE1006","user_header":"https://static001.geekbang.org/account/avatar/00/1f/f6/3e/07fafbe4.jpg","comment_is_top":false,"comment_ctime":1603189693,"is_pvip":false,"replies":[{"id":"93934","content":"不能。这里涉及到并发度计算的问题，是一个大话题。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1604281298,"ip_address":"","comment_id":254810,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1603189693","product_id":100042501,"comment_content":"我用jmeter测试，目前，我这个场景，就定义了一个接口。所以TPS=吞吐量。<br>一共10个线程，TPS是246个&#47;秒。可以理解成2460个用户并发吗","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":507521,"discussion_content":"不能。这里涉及到并发度计算的问题，是一个大话题。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604281298,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":247756,"user_name":"晶儿","can_delete":false,"product_type":"c1","uid":1458209,"ip_address":"","ucode":"6B4ABC33EBDEE6","user_header":"https://static001.geekbang.org/account/avatar/00/16/40/21/ab9865c7.jpg","comment_is_top":false,"comment_ctime":1599819653,"is_pvip":false,"replies":[{"id":"93968","content":"你这个数据已经比较准确了。至少不是拍脑袋来的。<br>第二个疑问，我就不好猜了，如果有详细的数据可以发给我分析一下。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1604283494,"ip_address":"","comment_id":247756,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1599819653","product_id":100042501,"comment_content":"高老师，您好！望百忙之中能回复<br>系统架构：分布式微服务化架构，以往高频服务，内部都是通过扩充节点的方式保障高峰的稳定性，也是会初步进行压测，却都不是很专业。<br>今年压测需求：领导要求十一高频接口参考七夕情人节，峰值达到3倍量，服务是稳定运行的。<br>性能需求数据调查与准备：1.搜集8.25那天线上高频接口的高峰值，ELK日志显示，（查询座位图：queryShowSeats     线上部署 20个节点    算出 每秒请求数 = 353656&#47;180=1965 次；如果  十一按3倍量每秒并发达到6000个请求数；）直接把算出来的请求数当作线程数进行压测，这样分析是否准确，还需要考虑哪些吗？<br>目前执行结果遇到的问题：压测脚本准备的是用的关联动态数据，每次压这个接口的时候，需要关联另一个接口，所以压测的时候是同时进行的。试行了100个并发线程，TPS大概在261.然后在压了200并发线程数，TPS达到了300.对于这个结果很是疑惑，为啥并发数越大，TPS会越高，响应时间非常接近。遇到这种情况，不知道如何分析，希望老师能帮忙解答一下。十分感谢","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":505488,"discussion_content":"你这个数据已经比较准确了。至少不是拍脑袋来的。\n第二个疑问，我就不好猜了，如果有详细的数据可以发给我分析一下。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604283494,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":240937,"user_name":"free","can_delete":false,"product_type":"c1","uid":1887961,"ip_address":"","ucode":"9B1338AE62610A","user_header":"https://static001.geekbang.org/account/avatar/00/1c/ce/d9/b1ad3b0d.jpg","comment_is_top":false,"comment_ctime":1597126804,"is_pvip":false,"replies":[{"id":"93983","content":"混江湖总得有几把刷子。要不然怎么好意思写东西呢。哈哈。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1604283958,"ip_address":"","comment_id":240937,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1597126804","product_id":100042501,"comment_content":"一直迷惑“并发”这个概念，听老师这么一说还挺有道理，哈哈哈","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":503598,"discussion_content":"混江湖总得有几把刷子。要不然怎么好意思写东西呢。哈哈。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604283958,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":234550,"user_name":"George","can_delete":false,"product_type":"c1","uid":1525339,"ip_address":"","ucode":"564D6E0D881E00","user_header":"https://static001.geekbang.org/account/avatar/00/17/46/5b/2b58f595.jpg","comment_is_top":false,"comment_ctime":1594718110,"is_pvip":false,"replies":[{"id":"86635","content":"这个值是个统计后的摘要值，不是原始数据。所以对这个公式是不成立的。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1594786244,"ip_address":"","comment_id":234550,"utype":1}],"discussion_count":4,"race_medal":0,"score":"1594718110","product_id":100042501,"comment_content":"summary + 9564 in 00:00:30 = 318.8&#47;s Avg: 3 Min: 1 Max: 20 Err: 0 (0.00%) Active: 100 Started: 100 Finished: 0   <br>老师，想请教下，上面这个数据是我实际压测结果数据。<br>按这篇文章里写的公式，如果用1000毫秒&#47;3毫秒*线程数的100，这样算下来并不等于这里的TPS：318，我这里哪有问题呢？","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":501421,"discussion_content":"这个值是个统计后的摘要值，不是原始数据。所以对这个公式是不成立的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594786244,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1786203,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/41/5b/aa3ca816.jpg","nickname":"Cathy","note":"","ucode":"9C474FE2C70F38","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":351068,"discussion_content":"公式是对瞬时值有效","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614144410,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1168516,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d4/84/7f584cb2.jpg","nickname":"杜艳","note":"","ucode":"8D46A8CF33E9C7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1786203,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/41/5b/aa3ca816.jpg","nickname":"Cathy","note":"","ucode":"9C474FE2C70F38","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":406181,"discussion_content":"那我们用这个工具的意义是啥呢，工具中显示的TPS代表啥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634717978,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":351068,"ip_address":""},"score":406181,"extra":""}]},{"author":{"id":2044922,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/33/fa/e68e62e5.jpg","nickname":"菲吖","note":"","ucode":"5374A42DB06D31","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":295096,"discussion_content":"同样的问题，为什么jmeter压测结果数据套用这个公式不成立并且差得远呢 老师的回复没看懂 ┭┮﹏┭┮","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596088705,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":228306,"user_name":"水浴清风","can_delete":false,"product_type":"c1","uid":1133926,"ip_address":"","ucode":"36EF5179E6F952","user_header":"https://static001.geekbang.org/account/avatar/00/11/4d/66/28742ad4.jpg","comment_is_top":false,"comment_ctime":1592638769,"is_pvip":false,"replies":[{"id":"84267","content":"context switch","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1592741701,"ip_address":"","comment_id":228306,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1592638769","product_id":100042501,"comment_content":"这章节里的cs指的是什么？","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":498993,"discussion_content":"context switch","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592741701,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":227173,"user_name":"牺牲","can_delete":false,"product_type":"c1","uid":1619402,"ip_address":"","ucode":"5780E562A43494","user_header":"https://static001.geekbang.org/account/avatar/00/18/b5/ca/bba4d696.jpg","comment_is_top":false,"comment_ctime":1592304585,"is_pvip":false,"replies":[{"id":"84026","content":"jmeter gui执行就有哇。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1592529415,"ip_address":"","comment_id":227173,"utype":1}],"discussion_count":1,"race_medal":2,"score":"1592304585","product_id":100042501,"comment_content":"<br>summary +  11742 in 00:00:30 =  391.3&#47;s Avg:    25 Min:     0 Max:   335 Err:     0 (0.00%) Active: 10 Started: 10 Finished: 0<br>summary =  55761 in 00:02:24 =  386.6&#47;s Avg:    25 Min:     0 Max:   346 Err:     0 (0.00%)<br>summary +  11924 in 00:00:30 =  397.5&#47;s Avg:    25 Min:     0 Max:    80 Err:     0 (0.00%) Active: 10 Started: 10 Finished: 0<br>summary =  67685 in 00:02:54 =  388.5&#47;s Avg:    25 Min:     0 Max:   346 Err:     0 (0.00%)<br>summary +  11884 in 00:00:30 =  396.2&#47;s Avg:    25 Min:     0 Max:   240 Err:     0 (0.00%) Active: 10 Started: 10 Finished: 0<br>summary =  79569 in 00:03:24 =  389.6&#47;s Avg:    25 Min:     0 Max:   346 Err:     0 (0.00%)<br>这个结果是在哪看的呢","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":498523,"discussion_content":"jmeter gui执行就有哇。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592529415,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":225441,"user_name":"长衫造纸农","can_delete":false,"product_type":"c1","uid":2008630,"ip_address":"","ucode":"A05B360E437C6A","user_header":"https://static001.geekbang.org/account/avatar/00/1e/a6/36/c0b8396f.jpg","comment_is_top":false,"comment_ctime":1591757091,"is_pvip":true,"replies":[{"id":"84037","content":"没有压力机的线程数哪来的发出的请求呢？","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1592532842,"ip_address":"","comment_id":225441,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1591757091","product_id":100042501,"comment_content":"老师您好，那个TPS计算公式我不是很懂为什么要乘压力机线程数。我认为对于服务端来说压力机的线程数量没有意义，只有压力机发起的请求总数是有意义的数值","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497850,"discussion_content":"没有压力机的线程数哪来的发出的请求呢？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592532842,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2034061,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLaVg4ibQT3CztmMLYMGOEVyXav4SJDl3ktB20AXMpwSFEMnzmibECEl1icViaibrN8wWwkdV9kP1Xiabaw/132","nickname":"windy","note":"","ucode":"BD27CA4A4894BA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301144,"discussion_content":"压力机的线程数，不用除以ramp-up 时间吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598423453,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":221325,"user_name":"HE明伟","can_delete":false,"product_type":"c1","uid":1211663,"ip_address":"","ucode":"DC302021D4250A","user_header":"https://static001.geekbang.org/account/avatar/00/12/7d/0f/26c38307.jpg","comment_is_top":false,"comment_ctime":1590474208,"is_pvip":false,"replies":[{"id":"81879","content":"我全文中的并发都是用TPS来承载的。如果一个事务响应时间是250毫秒，则一秒内一个线程就是4TPS。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1590712598,"ip_address":"","comment_id":221325,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1590474208","product_id":100042501,"comment_content":"老师，请教几个问题，一个线程数等于4个并发？这个是怎么来的，<br>jmeter中的线程数跟并发数是同一个？或者有什么关系？","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496423,"discussion_content":"我全文中的并发都是用TPS来承载的。如果一个事务响应时间是250毫秒，则一秒内一个线程就是4TPS。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590712598,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":219971,"user_name":"深深的人","can_delete":false,"product_type":"c1","uid":1010362,"ip_address":"","ucode":"415DD0A53CC15D","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6a/ba/5788408e.jpg","comment_is_top":false,"comment_ctime":1590127484,"is_pvip":false,"replies":[{"id":"81900","content":"我全文都是用TPS来承载并发这个概念的。不用多做计算。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1590716923,"ip_address":"","comment_id":219971,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1590127484","product_id":100042501,"comment_content":"这时对 Server 来说，它处理的就是 100TPS，平均响应时间是 50ms。50ms 就是根据 1000ms&#47;20TPS 得来的（请注意，这里说的平均响应时间会在一个区间内浮动，但只要 TPS 不变，这个平均响应时间就不会变）<br>这个和网上的公司有点不同,qps = 并发数&#47;平均响应时间，目前的并发数为是1000呢.","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496010,"discussion_content":"我全文都是用TPS来承载并发这个概念的。不用多做计算。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590716923,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":218510,"user_name":"钱","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1589812130,"is_pvip":false,"replies":[{"id":"81908","content":"对的。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1590717318,"ip_address":"","comment_id":218510,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1589812130","product_id":100042501,"comment_content":"这个很认同，对于服务端TPS＋TP99，是最核心的两个指标，一个越大越好一个越小越好。","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":495491,"discussion_content":"对的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590717318,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":218084,"user_name":"山头","can_delete":false,"product_type":"c1","uid":1610142,"ip_address":"","ucode":"9CD45A7966F37E","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/1R7lHGBvwPTVfb3BAQrPX3AhsYWnXyicbUJUYDgWagWxMGTnsNFvKibzeJ8v7fF2vJLQGf2EY9dV07rnn5Mhv9Uw/132","comment_is_top":false,"comment_ctime":1589710190,"is_pvip":false,"replies":[{"id":"81912","content":"根据响应时间推算tps。在一单位时间内如果响应时间确定，tps肯定是确定的。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1590717512,"ip_address":"","comment_id":218084,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1589710190","product_id":100042501,"comment_content":"如果每个线程的 20TPS，显然只需要 5 个线程就够了（请注意，这里说的线程指的是压力机的线程数）。<br>这时对 Server 来说，它处理的就是 100TPS，平均响应时间是 50ms。50ms 就是根据 1000ms&#47;20TPS 得来的（请注意，这里说的平均响应时间会在一个区间内浮动，但只要 TPS 不变，这个平均响应时间就不会变）。<br>如果我们有两个 Server 线程来处理，那么一个线程就是 50TPS，这个很直接吧。<br>这里是根据tps推算响应时间还是根据响应时间推tps，看晕了，请给解释下，感谢","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":495347,"discussion_content":"根据响应时间推算tps。在一单位时间内如果响应时间确定，tps肯定是确定的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590717512,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2008630,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/a6/36/c0b8396f.jpg","nickname":"长衫造纸农","note":"","ucode":"A05B360E437C6A","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":269976,"discussion_content":"同问","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589970030,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":218079,"user_name":"丹","can_delete":false,"product_type":"c1","uid":1167671,"ip_address":"","ucode":"FC5BB2D441467B","user_header":"https://static001.geekbang.org/account/avatar/00/11/d1/37/e087a4ee.jpg","comment_is_top":false,"comment_ctime":1589708992,"is_pvip":false,"replies":[{"id":"81913","content":"你这个就比较难了。微服务的话建议把每个节点的资源调整为和生产一致，即使量没有那么多，只要单节点资源一致，也可以大体推算，但是肯定不会精准了。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1590717580,"ip_address":"","comment_id":218079,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1589708992","product_id":100042501,"comment_content":"老师，我们的测试环境只有1台服务器，正式环境有十几台，虽然是微服务，但是性能差很多，我应该如何根据正式的数据去指定测试环境的tps 或者并发数呢？","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":495344,"discussion_content":"你这个就比较难了。微服务的话建议把每个节点的资源调整为和生产一致，即使量没有那么多，只要单节点资源一致，也可以大体推算，但是肯定不会精准了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590717580,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":215764,"user_name":"jy","can_delete":false,"product_type":"c1","uid":1785172,"ip_address":"","ucode":"F4E179C435451B","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJJ6G2xZvNRmhyXBjmGbI5G8icGCCMPupr6yxZ1IcURwp7GTRHcpWGWpg9A0fLlyicmVdDwzqZqwiaOQ/132","comment_is_top":false,"comment_ctime":1589099536,"is_pvip":false,"replies":[{"id":"81964","content":"我说的是“绝对”的某个时刻。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1590743751,"ip_address":"","comment_id":215764,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1589099536","product_id":100042501,"comment_content":"要说绝对的某个时刻，任务数肯定不会大于 CPU 物理个数。<br><br>应该是cpu逻辑个数吧？现在很多都超线程了。","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":494546,"discussion_content":"我说的是“绝对”的某个时刻。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590743751,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":214854,"user_name":"而立斋","can_delete":false,"product_type":"c1","uid":1087258,"ip_address":"","ucode":"5FED6E9E148195","user_header":"https://static001.geekbang.org/account/avatar/00/10/97/1a/389eab84.jpg","comment_is_top":false,"comment_ctime":1588833127,"is_pvip":false,"replies":[{"id":"81977","content":"你这个只要考虑并发度就可以了。这个只能根据实际的场景来换算。比如，80W中有5%的并发度，那就是80W*5%=4W。如果每个用户上传文件100K，那就是4W*100K=3.8G.","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1590747945,"ip_address":"","comment_id":214854,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1588833127","product_id":100042501,"comment_content":"老师请教一个问题：<br>我们现在要新建一个系统，只知道系统的大致情况如下：总用户量大约是80w,使用的高峰期是每个月末十10天，除了提交的数据之外还有大量的文件传上来。现在我们规划了600M的带宽来满足这个需求，但是想在想要估算并发用户数和TPS的话，该从哪方面入手呢？","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":494219,"discussion_content":"你这个只要考虑并发度就可以了。这个只能根据实际的场景来换算。比如，80W中有5%的并发度，那就是80W*5%=4W。如果每个用户上传文件100K，那就是4W*100K=3.8G.","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590747945,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":208784,"user_name":"从一","can_delete":false,"product_type":"c1","uid":1713019,"ip_address":"","ucode":"E80924B260CBA5","user_header":"https://static001.geekbang.org/account/avatar/00/1a/23/7b/1fbf68e5.jpg","comment_is_top":false,"comment_ctime":1587437859,"is_pvip":false,"replies":[{"id":"82009","content":"很多工具都能做到。我这里用的是jvisualvm.","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1590754358,"ip_address":"","comment_id":208784,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1587437859","product_id":100042501,"comment_content":"弱弱问下老师 服务端线程的工作情况 这个图表是通过什么查看的呢","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":492619,"discussion_content":"很多工具都能做到。我这里用的是jvisualvm.","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590754358,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":208776,"user_name":"从一","can_delete":false,"product_type":"c1","uid":1713019,"ip_address":"","ucode":"E80924B260CBA5","user_header":"https://static001.geekbang.org/account/avatar/00/1a/23/7b/1fbf68e5.jpg","comment_is_top":false,"comment_ctime":1587437012,"is_pvip":false,"replies":[{"id":"82011","content":"这个公式在每个时刻都是有效的。但是它不能描述曲线。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1590754445,"ip_address":"","comment_id":208776,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1587437012","product_id":100042501,"comment_content":"老师，有个疑问，公式TPS=1000ms​&#47;响应时间(单位ms)∗压力机线程数，这个公式成立的情况应该是系统还没有达到饱和吧。如果系统已经饱和，响应时间及TPS都稳定了，压力机线程数虽然一直在增长，但是其实系统已经承载不了。","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":492616,"discussion_content":"这个公式在每个时刻都是有效的。但是它不能描述曲线。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590754445,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1010362,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/6a/ba/5788408e.jpg","nickname":"深深的人","note":"","ucode":"415DD0A53CC15D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":271387,"discussion_content":"为什么需要压力机线程数呢。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590126058,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1395457,"avatar":"https://static001.geekbang.org/account/avatar/00/15/4b/01/9e7629f7.jpg","nickname":"微笑_passed","note":"","ucode":"9438B9990F3FA8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":258112,"discussion_content":"TPS稳定达到最大值了，继续增加压力机线程数，那系统接受的请求就会不断增加，由于TPS一定，造成很多请求都在等待状态，响应时间自然会不断增加，直到超时；个人理解是这样的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588648426,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":204519,"user_name":"李金涛","can_delete":false,"product_type":"c1","uid":1163417,"ip_address":"","ucode":"7F5461940141B3","user_header":"https://static001.geekbang.org/account/avatar/00/11/c0/99/ae61f7c6.jpg","comment_is_top":false,"comment_ctime":1586416196,"is_pvip":false,"replies":[{"id":"77272","content":"对的。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1586959390,"ip_address":"","comment_id":204519,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1586416196","product_id":100042501,"comment_content":"老师您好 你说的压力机线程数就是压力机上压力工具设置的线程数是吧？","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":491206,"discussion_content":"对的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586959390,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":204217,"user_name":"Hant","can_delete":false,"product_type":"c1","uid":1168990,"ip_address":"","ucode":"5999AF9B7D7C95","user_header":"https://static001.geekbang.org/account/avatar/00/11/d6/5e/fa1b9072.jpg","comment_is_top":false,"comment_ctime":1586352656,"is_pvip":true,"replies":[{"id":"76412","content":"在真实的系统中，直接看统计数据就行了，不用算。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1586398533,"ip_address":"","comment_id":204217,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1586352656","product_id":100042501,"comment_content":"高老师您好，想请教下在线用户数是怎么算出来的？是按照您本文中的缓存估算出来？","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":491107,"discussion_content":"在真实的系统中，直接看统计数据就行了，不用算。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586398533,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":202891,"user_name":"路人甲","can_delete":false,"product_type":"c1","uid":1546563,"ip_address":"","ucode":"A1B749C7559112","user_header":"https://static001.geekbang.org/account/avatar/00/17/99/43/01c0b28d.jpg","comment_is_top":false,"comment_ctime":1586080338,"is_pvip":false,"replies":[{"id":"75858","content":"你这个有没有监控数据？有监控数据就可以计算并发度了。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1586089724,"ip_address":"","comment_id":202891,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1586080338","product_id":100042501,"comment_content":"老师您说有些业务的并发度不足5%。我想了下我们的在线课堂的业务，比如课程卖出5000份，都集中在晚上7点半上课，一般到课率是80%多，也就是晚上七点半左右会有4200多人同时进课堂上课，那这个并发度是不是可以算84%了？","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490707,"discussion_content":"你这个有没有监控数据？有监控数据就可以计算并发度了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586089724,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":202366,"user_name":"joseph.herder💭.","can_delete":false,"product_type":"c1","uid":1006963,"ip_address":"","ucode":"632A743D6B7355","user_header":"https://static001.geekbang.org/account/avatar/00/0f/5d/73/742097e2.jpg","comment_is_top":false,"comment_ctime":1585976985,"is_pvip":true,"replies":[{"id":"75764","content":"1. 这个要看系统有什么监控工具了。<br>2. 响应时间能只关心哪里就可以了，要看哪里有问题。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1586075240,"ip_address":"","comment_id":202366,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1585976985","product_id":100042501,"comment_content":"高老师，请教一个问题，<br>1. 线上环境如何在监控里看并发用户数和在线用户数？<br>2. 是否只要关心页面和接口的相应时间就可以了？","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490570,"discussion_content":"1. 这个要看系统有什么监控工具了。\n2. 响应时间能只关心哪里就可以了，要看哪里有问题。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586075240,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":201424,"user_name":"wanj","can_delete":false,"product_type":"c1","uid":1259549,"ip_address":"","ucode":"BE9ECC67ABC004","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLnYfSUc8hJ3oLfa39qkNiaXNibs3VyAbgT7ZXasZXp89fRL7YBakIZdNNEE7kClOjN2KpBUuGpacfQ/132","comment_is_top":false,"comment_ctime":1585787324,"is_pvip":false,"replies":[{"id":"75388","content":"没看懂这个问题。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1585808325,"ip_address":"","comment_id":201424,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1585787324","product_id":100042501,"comment_content":"为什么增加并发线程，响应时间还减少了一半啊？","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490327,"discussion_content":"没看懂这个问题。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585808325,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":199343,"user_name":"路人甲","can_delete":false,"product_type":"c1","uid":1546563,"ip_address":"","ucode":"A1B749C7559112","user_header":"https://static001.geekbang.org/account/avatar/00/17/99/43/01c0b28d.jpg","comment_is_top":false,"comment_ctime":1585487265,"is_pvip":false,"replies":[{"id":"74776","content":"因为这个公式反应不出趋势。只对数据点有效。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1585527246,"ip_address":"","comment_id":199343,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1585487265","product_id":100042501,"comment_content":"summary +      7 in 00:00:04 =    1.8&#47;s Avg:    55 Min:    37 Max:    94 Err:     0 (0.00%) Active: 74 Started: 74 Finished: 0<br>summary +    407 in 00:00:10 =   40.7&#47;s Avg:    57 Min:    25 Max:   185 Err:     0 (0.00%) Active: 271 Started: 271 Finished: 0<br>summary +    824 in 00:00:10 =   82.4&#47;s Avg:    45 Min:     0 Max:   136 Err:     0 (0.00%) Active: 470 Started: 470 Finished: 0<br>summary +   1344 in 00:00:10 =  134.4&#47;s Avg:    28 Min:     0 Max:   132 Err:     0 (0.00%) Active: 520 Started: 666 Finished: 146<br>summary +   1380 in 00:00:10 =  138.1&#47;s Avg:    26 Min:     0 Max:   143 Err:     0 (0.00%) Active: 522 Started: 867 Finished: 345<br>老师我这脚本是websocket协议的连接，1000个线程50秒内启动，截了一段概要报告，怎么跟您那个公式对不上呢","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":489822,"discussion_content":"因为这个公式反应不出趋势。只对数据点有效。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585527246,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":197188,"user_name":"Geek_80a533","can_delete":false,"product_type":"c1","uid":1657080,"ip_address":"","ucode":"67CF71420FC475","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/GbZRicqbu1QJmlcOlfLyW42dYMUryxDkZbIRqHPFdqzUhGSAVVbPkaY9d9UP1hWGcxUKOBJmywPpl1nPXBeicgnA/132","comment_is_top":false,"comment_ctime":1585362417,"is_pvip":false,"replies":[{"id":"74720","content":"1秒呀。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1585469054,"ip_address":"","comment_id":197188,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1585362417","product_id":100042501,"comment_content":"老师我想问一下计算公式里面的1000ms具体指的是什么呢","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":489470,"discussion_content":"1秒呀。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585469054,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":195532,"user_name":"阳雅莉","can_delete":false,"product_type":"c1","uid":1860697,"ip_address":"","ucode":"F0950F3C2149DE","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI4S1hv2icZRS7IVrsibhMBRP4Eo8rpN0fY9YLLywV1VFcI1czZibpFqbTU4JFwTIswk2lauKhPgYe6w/132","comment_is_top":false,"comment_ctime":1585194126,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585194126","product_id":100042501,"comment_content":"最佳的并发用户数*（1000ms&#47;平均响应时间）=最佳TPS","like_count":0},{"had_liked":false,"id":195530,"user_name":"阳雅莉","can_delete":false,"product_type":"c1","uid":1860697,"ip_address":"","ucode":"F0950F3C2149DE","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI4S1hv2icZRS7IVrsibhMBRP4Eo8rpN0fY9YLLywV1VFcI1czZibpFqbTU4JFwTIswk2lauKhPgYe6w/132","comment_is_top":false,"comment_ctime":1585194117,"is_pvip":false,"replies":[{"id":"74290","content":"看T的定义是什么，","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1585199643,"ip_address":"","comment_id":195530,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1585194117","product_id":100042501,"comment_content":"老师，想请问下，如果经过测试，我得出了最大的TPS，那是否可以根据下面的公式计算出最佳的并发用户数呢","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":489100,"discussion_content":"看T的定义是什么，","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585199643,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":191738,"user_name":"骆俊","can_delete":false,"product_type":"c1","uid":1025557,"ip_address":"","ucode":"6468AA909E606D","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a6/15/0246a2f4.jpg","comment_is_top":false,"comment_ctime":1584793449,"is_pvip":false,"replies":[{"id":"73476","content":"这个要分析架构组件中使用到的内存，比如说redis, tomcat之类的。再结合要存放的数据，就可以计算。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1584805766,"ip_address":"","comment_id":191738,"utype":1}],"discussion_count":1,"race_medal":1,"score":"1584793449","product_id":100042501,"comment_content":"对于一个设计逻辑清晰的系统来说，不用测试就可以知道，直接拿缓存的内存来算就可以了。想问一下老师：这个内存指的是服务器的内存吗？","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488244,"discussion_content":"这个要分析架构组件中使用到的内存，比如说redis, tomcat之类的。再结合要存放的数据，就可以计算。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584805766,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":188995,"user_name":"Geek_70990e","can_delete":false,"product_type":"c1","uid":1713957,"ip_address":"","ucode":"E3C42E3EC79EDF","user_header":"https://static001.geekbang.org/account/avatar/00/1a/27/25/14d6c358.jpg","comment_is_top":false,"comment_ctime":1584443471,"is_pvip":false,"replies":[{"id":"72913","content":"没有。不过最近我打算写一下这个逻辑的。等我写出来再广而告之一下。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1584449717,"ip_address":"","comment_id":188995,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1584443471","product_id":100042501,"comment_content":"高老师，你好:文章中提到的并发度，有没有所谓的关于并发度的逻辑计算公式啊！","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":487583,"discussion_content":"没有。不过最近我打算写一下这个逻辑的。等我写出来再广而告之一下。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584449717,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":188575,"user_name":"要不要菜","can_delete":false,"product_type":"c1","uid":1786221,"ip_address":"","ucode":"8675F6C9859E65","user_header":"https://static001.geekbang.org/account/avatar/00/1b/41/6d/e8a6f9e3.jpg","comment_is_top":false,"comment_ctime":1584370370,"is_pvip":false,"replies":[{"id":"72763","content":"这个.....你就得先学习一下jmeter基础了。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1584406061,"ip_address":"","comment_id":188575,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1584370370","product_id":100042501,"comment_content":"压力机的线程数是在哪看的，需要测试人员配置吗？","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":487455,"discussion_content":"这个.....你就得先学习一下jmeter基础了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584406061,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":187458,"user_name":"小呀么小二郎","can_delete":false,"product_type":"c1","uid":1326905,"ip_address":"","ucode":"149540DCFDF43E","user_header":"https://static001.geekbang.org/account/avatar/00/14/3f/39/b1558fc9.jpg","comment_is_top":false,"comment_ctime":1584114059,"is_pvip":false,"replies":[{"id":"72345","content":"真是太认真的同学了。基本上都自己理清楚了。<br>TPS是用户级的时候才跟并发用户有关，如果是接口级，那就无关了，得拼成用户级才行。<br>","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1584141914,"ip_address":"","comment_id":187458,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1584114059","product_id":100042501,"comment_content":"思考题：<br>如何理解“服务端的并发能力”这一描述？<br>大概只有当压力机的一个线程的TPS是1的时候，压力机的线程数才等于并发用户数（TPS）。但是这种情况很极端，不能以偏概全。<br>并且，最终所有的请求都是要服务器来处理并返回给客户端的，因此我们在做性能测试的时候，重点测试的是服务端的处理能力。<br><br><br>为什么不提倡使用“绝对并发”和“相对并发”的概念呢？<br>首先，由于真实环境下，很难控制“绝对”的出现；<br>其次，这两个概念对于我们做性能测试没有什么实际帮助。<br><br><br>为什么不推荐用 CPU 来计算并发数？<br>前面说了并发指的是服务端的并发，服务器也不是只有CPU一个硬件。服务器的处理能力与CPU有关，但又不是只由CPU决定。以偏概全不可取。比如买电脑的时候，即便CPU是最好的，内存很小的话，这个电脑也会卡。<br><br><br>我的感悟：<br>还记得上次问了一个很蠢的问题“并发用户数是否等于并发线程数？”，原来答案在这一节。<br><br>结合之前老师讲的，性能指标分两类，业务指标和技术指标。在线用户数、并发用户数其实算是业务指标层面的；而TPS、响应时间是技术指标层面的。技术指标不能脱离业务指标。<br><br>本来看完文章我还有些疑惑，但是翻了留言，基本都解决啦。还是有一个疑问：<br>文中最后的结论有一句话“通过示意图和示例，我描述了在线用户数、并发用户数、TPS（这里我们假设了一个用户只对应一个事务）、响应时间之间的关系。”<br>我的疑问是：如果一个用户不止对应一个事务，那时的并发用户数和TPS是什么关系呢？<br><br><br>今天工作任务比较多，学的有点晚。感觉好像明白了，但有感觉好像差了点什么。我觉得老师的专栏需要反反复复的看，才能真正的消化吸收。（大概是以前脑子里乱七八糟的性能知识太多了，一时半会儿清理不完）","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":487111,"discussion_content":"真是太认真的同学了。基本上都自己理清楚了。\nTPS是用户级的时候才跟并发用户有关，如果是接口级，那就无关了，得拼成用户级才行。\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584141914,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":186544,"user_name":"呆熊","can_delete":false,"product_type":"c1","uid":1231364,"ip_address":"","ucode":"3735C673EFBCDC","user_header":"https://static001.geekbang.org/account/avatar/00/12/ca/04/06e8fe7c.jpg","comment_is_top":false,"comment_ctime":1583863259,"is_pvip":false,"replies":[{"id":"72031","content":"没看懂问题。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1583885552,"ip_address":"","comment_id":186544,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1583863259","product_id":100042501,"comment_content":"c的怎么看线程","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":486796,"discussion_content":"没看懂问题。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583885552,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":186483,"user_name":"George","can_delete":false,"product_type":"c1","uid":1525339,"ip_address":"","ucode":"564D6E0D881E00","user_header":"https://static001.geekbang.org/account/avatar/00/17/46/5b/2b58f595.jpg","comment_is_top":false,"comment_ctime":1583851959,"is_pvip":false,"replies":[{"id":"72030","content":"举例假设。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1583885537,"ip_address":"","comment_id":186483,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1583851959","product_id":100042501,"comment_content":"如果每个线程的 20TPS，显然只需要 5 个线程就够了（请注意，这里说的线程指的是压力机的线程数）。<br><br>这里的20TPS， 是举例假设为20，还是根据什么算出来的呢？","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":486774,"discussion_content":"举例假设。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583885537,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2007757,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/a2/cd/d26a4a31.jpg","nickname":"narcissu 🏃","note":"","ucode":"05A42017E5F6F0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":267896,"discussion_content":"请问我怎么知道每个线程的tps呢。。。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589706711,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":185547,"user_name":"大道","can_delete":false,"product_type":"c1","uid":1079157,"ip_address":"","ucode":"DBA590B7E93B70","user_header":"https://static001.geekbang.org/account/avatar/00/10/77/75/106d6df6.jpg","comment_is_top":false,"comment_ctime":1583627708,"is_pvip":false,"replies":[{"id":"71682","content":"这样量级基本上不合理。哪有能跑出来1万线程的4c8g的机器呢。 ","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1583646155,"ip_address":"","comment_id":185547,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1583627708","product_id":100042501,"comment_content":"高老师好，<br>一台压力机启动线程数多少为合理，比如单机设置10000线程数，4c8g的机器可以在1s内启动么？如何保证测试结果的准确？","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":486410,"discussion_content":"这样量级基本上不合理。哪有能跑出来1万线程的4c8g的机器呢。 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583646155,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1217842,"avatar":"https://static001.geekbang.org/account/avatar/00/12/95/32/8c6dc643.jpg","nickname":"jonnypppp","note":"","ucode":"C5914232420950","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":276865,"discussion_content":"Go的可以，但不是一秒","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590945978,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":183142,"user_name":"hou","can_delete":false,"product_type":"c1","uid":1818999,"ip_address":"","ucode":"B86FDAE03B1C61","user_header":"https://static001.geekbang.org/account/avatar/00/1b/c1/77/bee24d2d.jpg","comment_is_top":false,"comment_ctime":1582960817,"is_pvip":false,"replies":[{"id":"70893","content":"在我这个逻辑中，TPS就是并发用户数。因为这里我的前提是一个T就是一个用户的完整业务操作。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1582982582,"ip_address":"","comment_id":183142,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1582960817","product_id":100042501,"comment_content":"‘’并发用户数（TPS）是 193.6TPS。如果并发度为 5%，在线用户数就是 193.6&#47;5%=3872。‘<br><br>这里我也不理解，tps是每秒事物处理数，很多时候的解释包含用户请求服务器+服务器处理+返回给用户，但用来表述并发用户的时候，我有点混淆<br><br>","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":485572,"discussion_content":"在我这个逻辑中，TPS就是并发用户数。因为这里我的前提是一个T就是一个用户的完整业务操作。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582982582,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":182634,"user_name":"神陨时代","can_delete":false,"product_type":"c1","uid":1216102,"ip_address":"","ucode":"FA775517045E12","user_header":"https://static001.geekbang.org/account/avatar/00/12/8e/66/1f4a79d1.jpg","comment_is_top":false,"comment_ctime":1582818432,"is_pvip":false,"replies":[{"id":"70660","content":"从用户的视角来分析技术链，技术链才是有用的。不然就是技术说技术的，用户说用户的。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1582844196,"ip_address":"","comment_id":182634,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1582818432","product_id":100042501,"comment_content":"和我认知有很大的不同，以往认知的并发数就以为是压力机启动的线程数了","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":485392,"discussion_content":"从用户的视角来分析技术链，技术链才是有用的。不然就是技术说技术的，用户说用户的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582844196,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":181836,"user_name":"亮","can_delete":false,"product_type":"c1","uid":1031695,"ip_address":"","ucode":"4F8B9F5ABA2D52","user_header":"https://static001.geekbang.org/account/avatar/00/0f/be/0f/82db5e65.jpg","comment_is_top":false,"comment_ctime":1582641371,"is_pvip":false,"replies":[{"id":"70428","content":"从两端计算都可以。服务端处理多少，肯定压力端要接收多少。<br>记住算线程数哦。<br>","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1582674558,"ip_address":"","comment_id":181836,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1582641371","product_id":100042501,"comment_content":"老师好，问个关心的问题。关于这段讲的“这时对 Server 来说，它处理的就是 100TPS，平均响应时间是 50ms。50ms 就是根据 1000ms&#47;20TPS 得来的”，为什么平均响应是根据压测端的数据算出来的，而不是根据server端来算的，比如，1000ms&#47;100TPS=10ms？因为我理解的平均响应时间是server端的平均处理时间。谢谢。还是说我们不应该从这个角度去理解？谢谢","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":485137,"discussion_content":"从两端计算都可以。服务端处理多少，肯定压力端要接收多少。\n记住算线程数哦。\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582674558,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1949612,"avatar":"","nickname":"岁月轻狂","note":"","ucode":"E91182A8D1A5A3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":249431,"discussion_content":"我也有这个疑问，平均响应时间是浮动的状态，TPS也是浮动的状态，两者之间只能大致的反比关系，可能高老师想用平均响应时间=1/TPS的简单结论，来归纳两者关系，但是我觉得不是很严谨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587919084,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":180601,"user_name":"胖虫子","can_delete":false,"product_type":"c1","uid":1100956,"ip_address":"","ucode":"21FC09D0121B4F","user_header":"https://static001.geekbang.org/account/avatar/00/10/cc/9c/ec71155f.jpg","comment_is_top":false,"comment_ctime":1582347798,"is_pvip":false,"replies":[{"id":"70086","content":"所以需要专业的从业人员的布道。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1582350139,"ip_address":"","comment_id":180601,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1582347798","product_id":100042501,"comment_content":"可惜老板直接说，来测下最大支持多少并发用户，没了","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484729,"discussion_content":"所以需要专业的从业人员的布道。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582350139,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1786114,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/41/02/5b6322ce.jpg","nickname":"Yalongli","note":"","ucode":"A404990A62E0EF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":342154,"discussion_content":"我也经常遇到这样的问题","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610600147,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":179614,"user_name":"筱の简單","can_delete":false,"product_type":"c1","uid":1539341,"ip_address":"","ucode":"B2E922D534A893","user_header":"https://static001.geekbang.org/account/avatar/00/17/7d/0d/c753174e.jpg","comment_is_top":false,"comment_ctime":1582039315,"is_pvip":false,"replies":[{"id":"69743","content":"理解到位。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1582043676,"ip_address":"","comment_id":179614,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1582039315","product_id":100042501,"comment_content":"1、如何理解“服务端的并发能力”这一描述？<br>服务端的并发能力指的是服务端端的处理能力，并不是压力工具上的并发线程数。并发，是用 TPS 这样的概念来承载具体数值的。<br>2、我为什么不提倡使用“绝对并发”和“相对并发”的概念呢？<br>因为绝对并发和相对并发很难描述清楚。绝对并发指的是同一时刻的并发数；相对并发指的是一个时间段内发生的事情。<br>绝对并发指理想化的并发数；而实际场景中，用户会分布在系统中不同的服务、网络等对象中，这时候”绝对并发“这个概念就难描述了，你说的是哪部分的绝对并发呢？<br>3、以及，我们为什么不推荐用 CPU 来计算并发数？<br>CPU来计算并发数的话就是CPU的个数，这个没有描述的意义。并发任务数肯定不会大于 CPU 物理个数。故不推荐使用CPU来计算并发数。","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484326,"discussion_content":"理解到位。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582043676,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":179493,"user_name":"zwm","can_delete":false,"product_type":"c1","uid":1787187,"ip_address":"","ucode":"BDF98B3A1CD406","user_header":"https://static001.geekbang.org/account/avatar/00/1b/45/33/cdea4bca.jpg","comment_is_top":false,"comment_ctime":1582015178,"is_pvip":false,"replies":[{"id":"69702","content":"你的收获就是我的动力。😀😀😀","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1582019886,"ip_address":"","comment_id":179493,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1582015178","product_id":100042501,"comment_content":"感谢楼哥，受益匪浅，之前公司一直描述这个系统最大并发，用的jmeter并发数；<br>虽然也结合了响应时间、TPS，但是并发数一直放在了首位<br>现在听来原来之前的都存在严重的概念问题","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484281,"discussion_content":"你的收获就是我的动力。😀😀😀","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582019886,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":178036,"user_name":"盛贤","can_delete":false,"product_type":"c1","uid":1494020,"ip_address":"","ucode":"CBFEE10504B070","user_header":"https://static001.geekbang.org/account/avatar/00/16/cc/04/f96e3d2a.jpg","comment_is_top":false,"comment_ctime":1581576027,"is_pvip":false,"replies":[{"id":"69167","content":"什么场景下都是要关注TPS的。只是这个事务是什么，自己定义好就行了。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1581670341,"ip_address":"","comment_id":178036,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1581576027","product_id":100042501,"comment_content":"老师，请问对于查询类系统，系统主要功能做查询分析汇总，有的汇总查询可能要几分钟，这种也要关注TPS吗？还是并发用户数？","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":483641,"discussion_content":"什么场景下都是要关注TPS的。只是这个事务是什么，自己定义好就行了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581670341,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":173595,"user_name":"浅浅","can_delete":false,"product_type":"c1","uid":1165886,"ip_address":"","ucode":"1D2416A168F548","user_header":"https://static001.geekbang.org/account/avatar/00/11/ca/3e/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1579606444,"is_pvip":false,"replies":[{"id":"67294","content":"多谢支持。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1579611567,"ip_address":"","comment_id":173595,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1579606444","product_id":100042501,"comment_content":"老师，这篇文章学到了很多以前概念认知偏差的盲点，期待后续课程，文章写的特别好，虽然有些地方还是有点难理解，需要多看几次😊 😊 ","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":482127,"discussion_content":"多谢支持。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579611567,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":172032,"user_name":"shadowfree","can_delete":false,"product_type":"c1","uid":1183216,"ip_address":"","ucode":"4B86F53EA02F37","user_header":"https://static001.geekbang.org/account/avatar/00/12/0d/f0/43efc292.jpg","comment_is_top":false,"comment_ctime":1579075555,"is_pvip":false,"replies":[{"id":"66698","content":"算瞬间值试试。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1579080411,"ip_address":"","comment_id":172032,"utype":1}],"discussion_count":4,"race_medal":0,"score":"1579075555","product_id":100042501,"comment_content":"老师您好，我使用Jmeter设置的线程数为100，循环2次，未设置Ramp-Up，聚合报告输出平均响应时间（Average）为118；使用你的公式计算得到的TPS为84.7；但是我看聚合报告的Received KB&#47;sec为62.78。公式：TPS=（1000&#47;Average）*10","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481593,"discussion_content":"算瞬间值试试。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579080411,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1027571,"avatar":"","nickname":"明宙","note":"","ucode":"D55688362CDDDD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":319216,"discussion_content":"这里为什么是乘以 10，而不是 100？\n\n为什么我这里不管乘以 10 还是 100 ，都得不到跟 throughput 相近的值呢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603964592,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1122311,"avatar":"https://static001.geekbang.org/account/avatar/00/11/20/07/aef14454.jpg","nickname":"hoppaz","note":"","ucode":"2CBA5C1784AC6D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":203869,"discussion_content":"Received KB/sec是表示每秒接受的千字节数目，TPS是每秒事务数，估计你这里的事务应该是指一个请求吧？所以你应该看聚合报告的Throughput字段，默认情况下它表示每秒完成的请求数（Request per Second）","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584094411,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1183216,"avatar":"https://static001.geekbang.org/account/avatar/00/12/0d/f0/43efc292.jpg","nickname":"shadowfree","note":"","ucode":"4B86F53EA02F37","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":135289,"discussion_content":"瞬间值？ 学生不懂。老师能详细说一下不？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579082899,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":171652,"user_name":"莫西 👫 小妞儿 👼 🎵","can_delete":false,"product_type":"c1","uid":1165199,"ip_address":"","ucode":"553BF89ED22111","user_header":"https://static001.geekbang.org/account/avatar/00/11/c7/8f/fcfaf45a.jpg","comment_is_top":false,"comment_ctime":1578987038,"is_pvip":false,"replies":[{"id":"66636","content":"场景中很多配置元素都会有影响，像ramp up，sleep之类的。这公式对每个瞬间的数据都是有效的。但对结果的平均值就得考虑很多因素了。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1579047159,"ip_address":"","comment_id":171652,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1578987038","product_id":100042501,"comment_content":"老师，看完您的讲解，我返回去看了一下之前测试过的一个聚合报告。我对一个线程组的测了100线程组的并发，该线程组下有两个接口，接口1平均响应时间83ms，接口2平均响应时间505ms，总的平均响应时间293ms。接口1吞吐量27.2，接口2吞吐量27，总吞吐量53.8。和您上面的这个公式是对不上的（TPS=响应时间(单位ms)1000ms​∗压力机线程数）。想问下可能的原因是在哪里呢？","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481454,"discussion_content":"场景中很多配置元素都会有影响，像ramp up，sleep之类的。这公式对每个瞬间的数据都是有效的。但对结果的平均值就得考虑很多因素了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579047159,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1122311,"avatar":"https://static001.geekbang.org/account/avatar/00/11/20/07/aef14454.jpg","nickname":"hoppaz","note":"","ucode":"2CBA5C1784AC6D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":203876,"discussion_content":"1. 我们在jmeter里如何看到瞬间值呢？    2.聚合报告展示的几乎都是平均值，如果公式只对瞬时值起作用，那聚合报告岂不是没有可参考的价值？    3.文中样例给出的jmeter运行结果也是响应时间的avg一列的数据(即平均响应时间)，用的是老师给的公式，这是用平均值套用瞬时值的公式，算出来TPS对吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584094995,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1168516,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d4/84/7f584cb2.jpg","nickname":"杜艳","note":"","ucode":"8D46A8CF33E9C7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1122311,"avatar":"https://static001.geekbang.org/account/avatar/00/11/20/07/aef14454.jpg","nickname":"hoppaz","note":"","ucode":"2CBA5C1784AC6D","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":406187,"discussion_content":"你这个问题解决了吗？我也在困惑呢，那用jmeter的用处在哪里呢。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634718611,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":203876,"ip_address":""},"score":406187,"extra":""}]}]},{"had_liked":false,"id":170713,"user_name":"songyy","can_delete":false,"product_type":"c1","uid":1007201,"ip_address":"","ucode":"34D6443B91676D","user_header":"https://static001.geekbang.org/account/avatar/00/0f/5e/61/985f3eb7.jpg","comment_is_top":false,"comment_ctime":1578671259,"is_pvip":false,"replies":[{"id":"66215","content":"理解的基本没啥问题。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1578752872,"ip_address":"","comment_id":170713,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1578671259","product_id":100042501,"comment_content":"思考题：<br> • 如何理解“服务端的并发能力”这一描述：服务端并发，指的是从服务器真实处理的请求并发数量<br> • 我为什么不提倡使用“绝对并发”和“相对并发”的概念呢：并发要依附于场景而存在。脱离场景谈并发，可能性太多，无法实际衡量<br> • 以及，我们为什么不推荐用 CPU 来计算并发数：CPU数量和实际的并发数量持平。实际上，“并发”强调的是每秒处理的请求数，讲究 分时复用","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481079,"discussion_content":"理解的基本没啥问题。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578752872,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":170095,"user_name":"土耳其小土豆","can_delete":false,"product_type":"c1","uid":1785659,"ip_address":"","ucode":"B16574EF28525E","user_header":"https://static001.geekbang.org/account/avatar/00/1b/3f/3b/119fd0ef.jpg","comment_is_top":false,"comment_ctime":1578530138,"is_pvip":false,"replies":[{"id":"66233","content":"理论上是对的。只是实际上由于资源的调度会有稍微的降低。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1578754106,"ip_address":"","comment_id":170095,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1578530138","product_id":100042501,"comment_content":"单个线程的tps是10、按照并发度计算的话、如果要求tps是1000的话、线程设置100就可以了，如果100个线程的tps达不到1000是不是就有瓶颈了？","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480838,"discussion_content":"理论上是对的。只是实际上由于资源的调度会有稍微的降低。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578754106,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1856958,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/55/be/23b0fa67.jpg","nickname":"babala","note":"","ucode":"F0F06865D328A6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":204264,"discussion_content":"综合场景的话也麻烦些吧","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584148927,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":169965,"user_name":"Geek_0849d2","can_delete":false,"product_type":"c1","uid":1795967,"ip_address":"","ucode":"D903C928B10DA4","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/20ic9dve9ysLva9LVzImmque2LG9jXrDR0P6VUdepicFedKfrFU0TnKJLWGQ62lNs8xtddrrSdYlbdF4I8zFsqow/132","comment_is_top":false,"comment_ctime":1578484807,"is_pvip":false,"replies":[{"id":"66235","content":"只是T的内容会不同，而不是T在这时有局限性。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1578754364,"ip_address":"","comment_id":169965,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1578484807","product_id":100042501,"comment_content":"对于视频类app，怎么衡量tps，感觉用tps衡量性能指标，也能局限性。","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480788,"discussion_content":"只是T的内容会不同，而不是T在这时有局限性。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578754364,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":169961,"user_name":"Geek_0849d2","can_delete":false,"product_type":"c1","uid":1795967,"ip_address":"","ucode":"D903C928B10DA4","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/20ic9dve9ysLva9LVzImmque2LG9jXrDR0P6VUdepicFedKfrFU0TnKJLWGQ62lNs8xtddrrSdYlbdF4I8zFsqow/132","comment_is_top":false,"comment_ctime":1578484251,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1578484251","product_id":100042501,"comment_content":"并发度这个值应该怎么得出？估计除了已经上线系统看运维日志，其他情况拍脑袋居多","like_count":0},{"had_liked":false,"id":169958,"user_name":"Geek_0849d2","can_delete":false,"product_type":"c1","uid":1795967,"ip_address":"","ucode":"D903C928B10DA4","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/20ic9dve9ysLva9LVzImmque2LG9jXrDR0P6VUdepicFedKfrFU0TnKJLWGQ62lNs8xtddrrSdYlbdF4I8zFsqow/132","comment_is_top":false,"comment_ctime":1578483684,"is_pvip":false,"replies":[{"id":"66236","content":"没看懂描述的问题。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1578754420,"ip_address":"","comment_id":169958,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1578483684","product_id":100042501,"comment_content":"楼主，如果用jmeter作为压测工具，jmeter默认以线程替代了vugen，当刚开始压测时，连系统tps都得不到，怎么将并发用户数转化线程数了？","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480787,"discussion_content":"没看懂描述的问题。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578754420,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":169505,"user_name":"一只小宥子","can_delete":false,"product_type":"c1","uid":1786049,"ip_address":"","ucode":"8B9917D1B5008E","user_header":"https://static001.geekbang.org/account/avatar/00/1b/40/c1/0825c6ac.jpg","comment_is_top":false,"comment_ctime":1578366767,"is_pvip":false,"replies":[{"id":"65813","content":"压力机中的并发线程数是产生请求的。它和tps是强相关的。<br>之所以我不建议用压力机中的并发线程数来承载服务器端的性能指标，是因为并发线程数即不能描述并发用户数，也不能描述在线用户数。<br>我们通常在说服务端支持的并发用户数是指每秒能处理多少个用户的业务（也就是TPS）。 <br>","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1578395972,"ip_address":"","comment_id":169505,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1578366767","product_id":100042501,"comment_content":"Tps就是并发用户数，那压力机的并发线程数对于性能测试结论中又是处于什么地位呐？<br>不知道老师能不能理解我的意思，有些表达不清。","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480587,"discussion_content":"压力机中的并发线程数是产生请求的。它和tps是强相关的。\n之所以我不建议用压力机中的并发线程数来承载服务器端的性能指标，是因为并发线程数即不能描述并发用户数，也不能描述在线用户数。\n我们通常在说服务端支持的并发用户数是指每秒能处理多少个用户的业务（也就是TPS）。 \n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578395972,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":168068,"user_name":"博弈","can_delete":false,"product_type":"c1","uid":1433344,"ip_address":"","ucode":"B1A69837E41972","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/EcYNib1bnDf5dz6JcrE8AoyZYMdqic2VNmbBtCcVZTO9EoDZZxqlQDEqQKo6klCCmklOtN9m0dTd2AOXqSneJYLw/132","comment_is_top":false,"comment_ctime":1578010715,"is_pvip":false,"replies":[{"id":"65290","content":"一个线程迭代发送请求，这本来就是压力机的逻辑呀。 <br>一个线程发一次是5ms。那1s就是发200次。不就是200tps嘛。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1578021220,"ip_address":"","comment_id":168068,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1578010715","product_id":100042501,"comment_content":"根据文中描述，一个压力机线程，能测出来TPS是200，这个是怎么测算出的？需要用一个线程重复发送同一个请求多次？","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480124,"discussion_content":"一个线程迭代发送请求，这本来就是压力机的逻辑呀。 \n一个线程发一次是5ms。那1s就是发200次。不就是200tps嘛。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578021220,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":167800,"user_name":"小老鼠","can_delete":false,"product_type":"c1","uid":1257460,"ip_address":"","ucode":"C663A0C863A515","user_header":"https://static001.geekbang.org/account/avatar/00/13/2f/f4/2dede51a.jpg","comment_is_top":false,"comment_ctime":1577936253,"is_pvip":false,"replies":[{"id":"65145","content":"理解的有问题，再仔细看看文章。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1577950662,"ip_address":"","comment_id":167800,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1577936253","product_id":100042501,"comment_content":"并发率大小对性能影响有多大？比如同样跑查询商品1000个并发，并发率10%与50％的对响应时间有什么影响？假设error与fail均为0","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479999,"discussion_content":"理解的有问题，再仔细看看文章。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577950662,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":167787,"user_name":"牺牲","can_delete":false,"product_type":"c1","uid":1619402,"ip_address":"","ucode":"5780E562A43494","user_header":"https://static001.geekbang.org/account/avatar/00/18/b5/ca/bba4d696.jpg","comment_is_top":false,"comment_ctime":1577934629,"is_pvip":false,"replies":[{"id":"65146","content":"动手操作就知道了。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1577950683,"ip_address":"","comment_id":167787,"utype":1}],"discussion_count":1,"race_medal":2,"score":"1577934629","product_id":100042501,"comment_content":"看得云里雾里，我需要多看几遍琢磨琢磨","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479991,"discussion_content":"动手操作就知道了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577950683,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":167639,"user_name":"嘟嘟爱学习","can_delete":false,"product_type":"c1","uid":1785994,"ip_address":"","ucode":"EAD8D5FDCD6261","user_header":"","comment_is_top":false,"comment_ctime":1577884968,"is_pvip":false,"replies":[{"id":"65150","content":"jvisualvm","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1577950823,"ip_address":"","comment_id":167639,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1577884968","product_id":100042501,"comment_content":"高楼老师，请问你本课中用到的监控线程状态的工具是哪个？","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479928,"discussion_content":"jvisualvm","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577950823,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":167621,"user_name":"Geek_f580eb","can_delete":false,"product_type":"c1","uid":1799862,"ip_address":"","ucode":"4382AB9D1F970B","user_header":"","comment_is_top":false,"comment_ctime":1577880905,"is_pvip":false,"replies":[{"id":"65154","content":"根据历史线上数据计算。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1577950922,"ip_address":"","comment_id":167621,"utype":1}],"discussion_count":4,"race_medal":0,"score":"1577880905","product_id":100042501,"comment_content":"高楼老师请问下，<br>例子的在线用户数是10000，同时并发度是1%，这种并发度是怎么计算？有公式有么？如果是“拍脑袋”拍出的结果，怎么设定这个值更合理？请老师解答","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479919,"discussion_content":"根据历史线上数据计算。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577950922,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1786374,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/42/06/d6043184.jpg","nickname":"葛葛","note":"","ucode":"E157179A1A92ED","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":138432,"discussion_content":"同样有疑问。请问具体该如何计算，能举例详细说明一下吗","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579242393,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1637292,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/z5OUcd5RD7jVxKTnqsokibptjib5sgO9fP4dg0I7kCI2ncvuxX99vM958ickdgthziaviajWGAIzI9tcZOwbNxxLBcw/132","nickname":"Geek_a98085","note":"","ucode":"33BD817345C0C9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":120446,"discussion_content":"同样这里看了很疑惑，有历史线上数据的情况如何计算并发度，没有的情况又如何估算呢？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578276215,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1799862,"avatar":"","nickname":"Geek_f580eb","note":"","ucode":"4382AB9D1F970B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":120121,"discussion_content":"没有历史数据或者没有统计的历史数据那怎么计算呢？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578243227,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":167081,"user_name":"快乐一生","can_delete":false,"product_type":"c1","uid":1371565,"ip_address":"","ucode":"E3F99C4BA093DE","user_header":"https://static001.geekbang.org/account/avatar/00/14/ed/ad/894e616c.jpg","comment_is_top":false,"comment_ctime":1577687855,"is_pvip":false,"replies":[{"id":"64915","content":"争取让你满意。<br>不过我们会以性能测试分析的角度来写，并不会单纯讲IO。那就不是测试的专栏了。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1577709656,"ip_address":"","comment_id":167081,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1577687855","product_id":100042501,"comment_content":"老师讲的很不错，期望后续有关于网络io，磁盘io的讲解","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479738,"discussion_content":"争取让你满意。\n不过我们会以性能测试分析的角度来写，并不会单纯讲IO。那就不是测试的专栏了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577709656,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":166192,"user_name":"💋💋💋","can_delete":false,"product_type":"c1","uid":1787715,"ip_address":"","ucode":"1830A7008859C2","user_header":"https://static001.geekbang.org/account/avatar/00/1b/47/43/771e653b.jpg","comment_is_top":false,"comment_ctime":1577413977,"is_pvip":false,"replies":[{"id":"63348","content":"你这个结果看起来是不太对。要不你加我微信发详细点的数据我看看：Zee_7D<br><br>第二次回复：根据这位同学的反馈，他加了定时器。这样就导致了压力工具中真正的并发线程数不再是设置的线程数了。<br>吓了我一跳，我还以为久经杀场的最简单的计算逻辑出了大漏洞呢。哈哈。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1577427356,"ip_address":"","comment_id":166192,"utype":1}],"discussion_count":4,"race_medal":0,"score":"1577413977","product_id":100042501,"comment_content":"<br>针对吞吐量，根据你的公式， 我没计算出跟jmeter一样的值。我用jmeter 去压测，并发数200，平均响应时间是1655.65ms， jmeter最后的吞吐量给的是20.71&#47;s，由于留言不能发图片，我只能用文字了。<br>针对这个课程，老师能不能创建一个微信群，这样更加方便沟通。","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479435,"discussion_content":"你这个结果看起来是不太对。要不你加我微信发详细点的数据我看看：Zee_7D\n\n第二次回复：根据这位同学的反馈，他加了定时器。这样就导致了压力工具中真正的并发线程数不再是设置的线程数了。\n吓了我一跳，我还以为久经杀场的最简单的计算逻辑出了大漏洞呢。哈哈。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577427356,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1025557,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a6/15/0246a2f4.jpg","nickname":"骆俊","note":"","ucode":"6468AA909E606D","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":207314,"discussion_content":"如果是因为加了定时器，那么如果真实场景中就是需要用到定时器，最终的并发用户数该怎么算呢，毕竟业务里面是蛮复杂的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584491158,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1366118,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJBVPzcO55PyLPeicoZ6zuaZNryYK7OnAkgz0jV6Tl9vOLIrkEGDgen8E9NwamAsTckS1D2Wl2prCQ/132","nickname":"夏文兵","note":"","ucode":"038FA2102DA4C1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":121773,"discussion_content":"针对吞吐量，根据你的公式， 我没计算出跟jmeter一样的值。我用jmeter 去压测(http://example.com/)，number of threads: 3, Ramp-Up:1, Loop Count:50, 平均响应时间：679ms, Throughput: 3.6/sec, 但是根据您的计算公式 1000/679 * 3 = 4.4。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578322887,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1787715,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/47/43/771e653b.jpg","nickname":"💋💋💋","note":"","ucode":"1830A7008859C2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":105889,"discussion_content":"老师已经加您了，三个嘴唇","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577497313,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":165985,"user_name":"心怡","can_delete":false,"product_type":"c1","uid":1796174,"ip_address":"","ucode":"A9CF2FB1564BA9","user_header":"https://static001.geekbang.org/account/avatar/00/1b/68/4e/695d47ab.jpg","comment_is_top":false,"comment_ctime":1577358098,"is_pvip":false,"replies":[{"id":"63279","content":"后面有几篇讲到录制脚本，编写脚本。如果你要非常完整的，那就看帮助就行。不会的可以问，毕竟这个专栏不是工具类的。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1577360499,"ip_address":"","comment_id":165985,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1577358098","product_id":100042501,"comment_content":"老师我们不讲性能测试的基础吗？录制脚本，写脚本及案例这些吗？","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479341,"discussion_content":"后面有几篇讲到录制脚本，编写脚本。如果你要非常完整的，那就看帮助就行。不会的可以问，毕竟这个专栏不是工具类的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577360499,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1786203,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/41/5b/aa3ca816.jpg","nickname":"Cathy","note":"","ucode":"9C474FE2C70F38","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":351058,"discussion_content":"工具自带的帮助或在线帮助","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614139589,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1796174,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/68/4e/695d47ab.jpg","nickname":"心怡","note":"","ucode":"A9CF2FB1564BA9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":110949,"discussion_content":" 帮助是啥，老师，我准备进攻jmter","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577767977,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":165837,"user_name":"吴小喵","can_delete":false,"product_type":"c1","uid":1392780,"ip_address":"","ucode":"A8CB5407A89593","user_header":"https://static001.geekbang.org/account/avatar/00/15/40/8c/bc76ecd3.jpg","comment_is_top":false,"comment_ctime":1577329789,"is_pvip":false,"replies":[{"id":"63243","content":"在另一条留言中已经回复。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1577337377,"ip_address":"","comment_id":165837,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1577329789","product_id":100042501,"comment_content":"TPS计算公式中的压力机线程数是指压力机并发线程数吧，而不是开了几个线程的数量","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479289,"discussion_content":"在另一条留言中已经回复。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577337377,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":165836,"user_name":"吴小喵","can_delete":false,"product_type":"c1","uid":1392780,"ip_address":"","ucode":"A8CB5407A89593","user_header":"https://static001.geekbang.org/account/avatar/00/15/40/8c/bc76ecd3.jpg","comment_is_top":false,"comment_ctime":1577329654,"is_pvip":false,"replies":[{"id":"63242","content":"10个是压力机上的线程数。<br><br>前面说的5是服务端开的tomcat线程数。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1577337356,"ip_address":"","comment_id":165836,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1577329654","product_id":100042501,"comment_content":"第二个例子中的压力机线程数为什么是10啊，之前不是说是5吗","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479288,"discussion_content":"10个是压力机上的线程数。\n\n前面说的5是服务端开的tomcat线程数。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577337356,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":165704,"user_name":"Eight Baby","can_delete":false,"product_type":"c1","uid":1333092,"ip_address":"","ucode":"1AB70D1E698E79","user_header":"https://static001.geekbang.org/account/avatar/00/14/57/64/9a729a58.jpg","comment_is_top":false,"comment_ctime":1577285672,"is_pvip":false,"replies":[{"id":"63217","content":"对应到真实场景是说现在有7924个用户在线，而同时在执行登录这个操作的只有196.2个人。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1577327093,"ip_address":"","comment_id":165704,"utype":1}],"discussion_count":4,"race_medal":0,"score":"1577285672","product_id":100042501,"comment_content":"并发用户数（TPS）是 396.2TPS。如果并发度为 5%，在线用户数就是 396.2&#47;5%=7924。这句话我不太明白。假设这是登录场景，对应我的真实场景就是7924的用户同时登录？但是1秒可以处理约400个请求。那不是某在排队了？","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479263,"discussion_content":"对应到真实场景是说现在有7924个用户在线，而同时在执行登录这个操作的只有196.2个人。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577327093,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1790517,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/52/35/b8f75b6a.jpg","nickname":"童话","note":"","ucode":"663286537E4EBA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":104352,"discussion_content":"执行登陆用户数是396.2个吧","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1577426246,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1447314,"avatar":"https://static001.geekbang.org/account/avatar/00/16/15/92/f00c47db.jpg","nickname":"王明","note":"","ucode":"73A0C5432A2163","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":202387,"discussion_content":"@高老师，是否可以理解为当并发用户数为396.2并且并发度为5%的时候，服务器可支撑的最大在线用户数为7924呢（此时在线用户数是不占用资源吗还是？还是此时在线用户数的资源需要另外计算）","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583910843,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1333092,"avatar":"https://static001.geekbang.org/account/avatar/00/14/57/64/9a729a58.jpg","nickname":"Eight Baby","note":"","ucode":"1AB70D1E698E79","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":102507,"discussion_content":"所谓的并发度 是怎么计算的？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577351030,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":165674,"user_name":"悦霖","can_delete":false,"product_type":"c1","uid":1786180,"ip_address":"","ucode":"6707B62806147F","user_header":"https://static001.geekbang.org/account/avatar/00/1b/41/44/00ea2279.jpg","comment_is_top":false,"comment_ctime":1577281582,"is_pvip":false,"replies":[{"id":"63175","content":"这个非常简单，压力过程中观察线程的使用率和上下文切换频率就阔以啦。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1577284845,"ip_address":"","comment_id":165674,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1577281582","product_id":100042501,"comment_content":"测试时把tps调到最大，依据什么来调中间件的线程数为合理值了","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479255,"discussion_content":"这个非常简单，压力过程中观察线程的使用率和上下文切换频率就阔以啦。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577284845,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":165673,"user_name":"余","can_delete":false,"product_type":"c1","uid":1268976,"ip_address":"","ucode":"6B97A57525FAF0","user_header":"https://static001.geekbang.org/account/avatar/00/13/5c/f0/b89ed81e.jpg","comment_is_top":false,"comment_ctime":1577281405,"is_pvip":false,"replies":[{"id":"63173","content":"后续篇幅中有详细的推演过程。😀<br>我已经为你这样的问题做好了准备。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1577284436,"ip_address":"","comment_id":165673,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1577281405","product_id":100042501,"comment_content":"还是不太明白，&quot;通过统计每秒的业务请求数以及比例。。。&quot;，这个比例是怎么得到的呢？","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479254,"discussion_content":"后续篇幅中有详细的推演过程。😀\n我已经为你这样的问题做好了准备。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577284436,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":165632,"user_name":"无心","can_delete":false,"product_type":"c1","uid":1036884,"ip_address":"","ucode":"D1C3EBA4DF798E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/d2/54/3fa394b4.jpg","comment_is_top":false,"comment_ctime":1577273396,"is_pvip":false,"replies":[{"id":"63159","content":"tps中的s就是秒呀。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1577280819,"ip_address":"","comment_id":165632,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1577273396","product_id":100042501,"comment_content":"1000ms是怎么来的","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479239,"discussion_content":"tps中的s就是秒呀。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577280819,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":165629,"user_name":"奔跑的栗子","can_delete":false,"product_type":"c1","uid":1783629,"ip_address":"","ucode":"576E92AE571434","user_header":"https://static001.geekbang.org/account/avatar/00/1b/37/4d/6d9af68e.jpg","comment_is_top":false,"comment_ctime":1577272167,"is_pvip":false,"replies":[{"id":"63146","content":"基本正确。第3个主要是CPU不能代表系统的综合能力。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1577274419,"ip_address":"","comment_id":165629,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1577272167","product_id":100042501,"comment_content":"1.如何理解服务端的并发能力：对于新手容易误解工具上的并发即常说的并发概念；因此延伸并发是服务端的并发能力，也是最确切的衡量依据，而非工具上的数值；<br>2.为什么不提倡使用绝对并发和相对并发：同上，统一简单易理解的指标即可，最终结果也不需要去区分相对和绝对，徒增烦恼<br>3.为什么不推荐用cpu来计算并发数：额，这道题不是特别清晰；强答一波：除了预期被测请求要用到cpu，还有其他计划外不可避免的cpu消耗；因此cpu不能完美诠释并发数","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479237,"discussion_content":"基本正确。第3个主要是CPU不能代表系统的综合能力。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577274419,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":165534,"user_name":"简凡","can_delete":false,"product_type":"c1","uid":1271818,"ip_address":"","ucode":"6CD4DE0436FA18","user_header":"https://static001.geekbang.org/account/avatar/00/13/68/0a/dae687c0.jpg","comment_is_top":false,"comment_ctime":1577254860,"is_pvip":false,"replies":[{"id":"63109","content":"第三点需要稍微纠正，不是没有理论依据。是这个依据还不足以支撑计算业务的性能TPS。 ","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1577262963,"ip_address":"","comment_id":165534,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1577254860","product_id":100042501,"comment_content":"如何理解“服务端的并发能力”这一描述？<br>--- 个人理解，服务端的并发能力就是说服务处理的能力，即其可以处理的请求量；<br>为什么不提倡使用“绝对并发”和“相对并发”的概念呢？<br>--- 概念容易使大家混乱，不利于团队之间的沟通；再者，没必要去纠结绝对并发还是相对并发，我们关心的使服务端处理的请求量；<br>为什么不推荐用 CPU 来计算并发数？<br>--- 用cpu计算并发数，感觉没有理论依据","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479196,"discussion_content":"第三点需要稍微纠正，不是没有理论依据。是这个依据还不足以支撑计算业务的性能TPS。 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577262963,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1271818,"avatar":"https://static001.geekbang.org/account/avatar/00/13/68/0a/dae687c0.jpg","nickname":"简凡","note":"","ucode":"6CD4DE0436FA18","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":100503,"discussion_content":"谢高老师纠正～","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577265005,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":165467,"user_name":"kangny","can_delete":false,"product_type":"c1","uid":1708486,"ip_address":"","ucode":"F74A265EA476EA","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erjU9ibn8gdeWS8ibJTNPGuNWDChrRicT5KDRkMdY3SxY6MbW06vToncfiaYVUdpFaoR8uVqxB7icUXc9A/132","comment_is_top":false,"comment_ctime":1577241284,"is_pvip":true,"replies":[{"id":"63126","content":"把TPS调到最高就好。压力大，响应时间长了，tps下降了，那服务端的处理能力明显是下降了嘛。<br>不是用TPS来定义并发用户线程数，这两者的关联关系，只有在执行过程中确定，没有谁定义谁。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1577264809,"ip_address":"","comment_id":165467,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1577241284","product_id":100042501,"comment_content":"有个疑惑请教下老师，按照tps算服务器的压力话，这个tps的数值依据怎么定呢，因为压力线程数增加，可能会导致tps的下降，那应该按照多少tps来定义并发用户线程数呢？","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479171,"discussion_content":"把TPS调到最高就好。压力大，响应时间长了，tps下降了，那服务端的处理能力明显是下降了嘛。\n不是用TPS来定义并发用户线程数，这两者的关联关系，只有在执行过程中确定，没有谁定义谁。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577264809,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":165446,"user_name":"@权志宇","can_delete":false,"product_type":"c1","uid":1786409,"ip_address":"","ucode":"5C1A8D22354971","user_header":"https://static001.geekbang.org/account/avatar/00/1b/42/29/82673eb7.jpg","comment_is_top":false,"comment_ctime":1577238924,"is_pvip":false,"replies":[{"id":"63130","content":"这也不是绝对并发的意思。<br>而是秒杀场景。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1577264896,"ip_address":"","comment_id":165446,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1577238924","product_id":100042501,"comment_content":"我认为绝对并会有一种误解的测试案例，就是指定时间堆积大量线程测试瞬时流量高峰场景。这个不足以证明系统实际并发能力","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479162,"discussion_content":"这也不是绝对并发的意思。\n而是秒杀场景。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577264896,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":165445,"user_name":"@权志宇","can_delete":false,"product_type":"c1","uid":1786409,"ip_address":"","ucode":"5C1A8D22354971","user_header":"https://static001.geekbang.org/account/avatar/00/1b/42/29/82673eb7.jpg","comment_is_top":false,"comment_ctime":1577238776,"is_pvip":false,"replies":[{"id":"63131","content":"阔以滴。","user_name":"作者回复","user_name_real":"高楼(Zee)","uid":"1785562","ctime":1577264925,"ip_address":"","comment_id":165445,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1577238776","product_id":100042501,"comment_content":"服务端的并发能力 我认为是指在具体业务场景下，整体服务的可支持的并发量，其中并发量不等于在线用户量。具体多少并发我认为可以取自线上真实流量高峰李全","like_count":0,"discussions":[{"author":{"id":1785562,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/da/e686a72b.jpg","nickname":"高楼(Zee)","note":"","ucode":"149202404A5ABC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479161,"discussion_content":"阔以滴。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577264925,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":165431,"user_name":"大拇哥","can_delete":false,"product_type":"c1","uid":1167218,"ip_address":"","ucode":"77EAA268C6B4C8","user_header":"https://static001.geekbang.org/account/avatar/00/11/cf/72/72a8bcfd.jpg","comment_is_top":false,"comment_ctime":1577237153,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1577237153","product_id":100042501,"comment_content":"刷新了认知，等待后续的干货","like_count":0}]}