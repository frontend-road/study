{"id":378311,"title":"02ï½œç†è§£ Hooksï¼šReact ä¸ºä»€ä¹ˆè¦å‘æ˜ Hooksï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯ç‹æ²›ã€‚</p><p>React ä½œä¸ºç›®å‰æœ€ä¸ºä¸»æµçš„å‰ç«¯æ¡†æ¶ï¼Œè‡ª2013å¹´è¯ç”Ÿè‡³ä»Šå·²ç»æœ‰è¿‘8å¹´çš„æ—¶é—´äº†ã€‚è¿™8å¹´æ¥ï¼Œåœ¨å…¶ä»–å‰ç«¯æ¡†æ¶å‘ç”Ÿç¿»å¤©è¦†åœ°å˜åŒ–çš„åŒæ—¶ï¼ŒReact çš„ API åˆ™éå¸¸ç¨³å®šï¼Œå‡ ä¹ä»æ¥æ²¡æœ‰å‡ºç°è¿‡é‡å¤§çš„å‘åå…¼å®¹çš„é—®é¢˜ï¼Œè€Œä¸”æ¯ä¸€æ¬¡ç‰ˆæœ¬çš„å‡çº§ä¹Ÿéƒ½éå¸¸é¡ºæ»‘ã€‚</p><p>è¿™ä¸ä»…è¯´æ˜React åœ¨ API çš„è®¾è®¡ä¸Šç»å—ä½äº†è€ƒéªŒï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥çœ‹åˆ° React å›¢é˜Ÿåœ¨ç¨³å®š API ä¸Šæ‰€åšçš„åŠªåŠ›ã€‚</p><p>ä½†æ˜¯å³ä½¿åœ¨è¿™æ ·ç¨³å®šçš„èƒŒæ™¯ä¸‹ï¼ŒReact è¿˜æ˜¯åœ¨ä¸¤å¹´å‰çš„ 16.8 ç‰ˆæœ¬ä¸­æ¨å‡ºäº†ä¸€å¥—å…¨æ–°çš„ Hooks æœºåˆ¶ã€‚æ–°ç‰ˆæœ¬çš„å‘å¸ƒï¼Œåœ¨è®©äººè€³ç›®ä¸€æ–°çš„åŒæ—¶ï¼Œä¹Ÿè®©å¹¿å¤§æ—©å°±ææƒ§äºå„ç§æ–°è½®å­çš„å‰ç«¯åŒå­¦å¿ƒå¤´ä¸€ç´§ï¼Œäº§ç”Ÿæœ¬èƒ½çš„æŠ—æ‹’ï¼šè¿™æ˜¯ä»€ä¹ˆä¸œè¥¿ï¼Ÿæœ‰ä»€ä¹ˆç”¨ï¼Ÿéš¾é“ç°åœ¨çš„ API ä¸å¥½å—ï¼Ÿ</p><p>å¦‚æœä½ ä¹Ÿæœ‰è¿™æ ·çš„ç–‘é—®ï¼Œé‚£æˆ‘è¦å…ˆç»™ä½ åƒä¸€é¢—å®šå¿ƒä¸¸ï¼Œè¿™æ ·çš„æ‹…å¿§æ˜¯æ²¡æœ‰å¿…è¦çš„ã€‚</p><p>å…¶å®å¯¹äº React å¼€å‘è€Œè¨€ï¼Œè¿™åªæ˜¯å¤šäº†ä¸€ä¸ªé€‰æ‹©ã€‚å› ä¸º<strong>åŸæ¥çš„åŸºäºClassçš„ç»„ä»¶å®Œå…¨å¯ä»¥ç»§ç»­ä½¿ç”¨</strong>ï¼Œè¿™æ„å‘³ç€è¿™ä¸¤ç§å¼€å‘æ–¹å¼å¯ä»¥å¹¶å­˜ï¼Œå·²æœ‰ä»£ç ä¸éœ€è¦åšä»»ä½•æ”¹åŠ¨ï¼Œè€Œæ–°çš„ä»£ç å¯ä»¥æ ¹æ®å…·ä½“æƒ…å†µé‡‡ç”¨ Hooks çš„æ–¹å¼æ¥å®ç°å°±è¡Œäº†ã€‚</p><p>é‚£ä¹ˆï¼Œæ—¢ç„¶åœ¨è¿½æ±‚æè‡´å‘åå…¼å®¹æ€§çš„åŸåˆ™ä¸‹ï¼ŒReact è¿˜æ˜¯æ¨å‡ºäº†æ–°çš„ Hooks APIï¼Œä¸€å®šæœ‰å…¶è¿‡äººçš„ä¸€é¢ã€‚æ‰€ä»¥ä»Šå¤©è¿™èŠ‚è¯¾ï¼Œæˆ‘å°±è·Ÿä½ ä¸€èµ·æ¢è®¨å®ƒçš„è¿‡äººä¹‹å¤„ç©¶ç«Ÿæ˜¯ä»€ä¹ˆï¼›ä¸ºä»€ä¹ˆè¦å‘æ˜ Hooksï¼›ä»¥åŠå®ƒæ‰€è§£å†³çš„é—®é¢˜æ˜¯ä»€ä¹ˆã€‚</p><!-- [[[read_end]]] --><h2>é‡æ–°æ€è€ƒ React ç»„ä»¶çš„æœ¬è´¨</h2><p>React ç»„ä»¶çš„æ¨¡å‹å…¶å®å¾ˆç›´è§‚ï¼Œå°±æ˜¯ä» Model åˆ° View çš„æ˜ å°„ï¼Œè¿™é‡Œçš„ Model å¯¹åº”åˆ° React ä¸­å°±æ˜¯ state å’Œ propsã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/a2/5b/a29c89ffd7c2ce101183407fe7d90e5b.png?wh=766*304\" alt=\"\"></p><p>åœ¨è¿‡å»ï¼Œæˆ‘ä»¬éœ€è¦å¤„ç†å½“ Model å˜åŒ–æ—¶ï¼ŒDOM èŠ‚ç‚¹åº”è¯¥å¦‚ä½•å˜åŒ–çš„ç»†èŠ‚é—®é¢˜ã€‚è€Œç°åœ¨ï¼Œæˆ‘ä»¬åªéœ€è¦é€šè¿‡ JSXï¼Œæ ¹æ® Model çš„æ•°æ®ç”¨å£°æ˜çš„æ–¹å¼å»æè¿° UI çš„æœ€ç»ˆå±•ç°å°±å¯ä»¥äº†ï¼Œå› ä¸ºReact ä¼šå¸®åŠ©ä½ å¤„ç†æ‰€æœ‰ DOM å˜åŒ–çš„ç»†èŠ‚ã€‚è€Œä¸”ï¼Œå½“ Model ä¸­çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒUI ä¼šè‡ªåŠ¨å˜åŒ–ï¼Œå³<strong>æ‰€è°“çš„æ•°æ®ç»‘å®š</strong>ã€‚</p><p>æ‰€ä»¥å‘¢ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠUI çš„å±•ç°çœ‹æˆä¸€ä¸ªå‡½æ•°çš„æ‰§è¡Œè¿‡ç¨‹ã€‚å…¶ä¸­ï¼ŒModel æ˜¯è¾“å…¥å‚æ•°ï¼Œå‡½æ•°çš„æ‰§è¡Œç»“æœæ˜¯ DOM æ ‘ï¼Œä¹Ÿå°±æ˜¯ Viewã€‚è€ŒReact è¦ä¿è¯çš„ï¼Œå°±æ˜¯æ¯å½“ Model å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå‡½æ•°ä¼šé‡æ–°æ‰§è¡Œï¼Œå¹¶ä¸”ç”Ÿæˆæ–°çš„ DOM æ ‘ï¼Œç„¶åReact å†æŠŠæ–°çš„ DOM æ ‘ä»¥æœ€ä¼˜çš„æ–¹å¼æ›´æ–°åˆ°æµè§ˆå™¨ã€‚</p><p>æ—¢ç„¶å¦‚æ­¤ï¼Œä½¿ç”¨ Class ä½œä¸ºç»„ä»¶æ˜¯å¦çœŸçš„åˆé€‚å‘¢ï¼ŸClass åœ¨ä½œä¸º React ç»„ä»¶çš„è½½ä½“æ—¶ï¼Œæ˜¯å¦ç”¨äº†å®ƒæ‰€æœ‰çš„åŠŸèƒ½å‘¢ï¼Ÿå¦‚æœä½ ä»”ç»†æ€è€ƒï¼Œä¼šå‘ç°ä½¿ç”¨ Class å…¶å®æ˜¯æœ‰ç‚¹ç‰µå¼ºçš„ï¼Œä¸»è¦æœ‰ä¸¤æ–¹é¢çš„åŸå› ã€‚</p><p>ä¸€æ–¹é¢ï¼ŒReact ç»„ä»¶ä¹‹é—´æ˜¯ä¸ä¼šäº’ç›¸ç»§æ‰¿çš„ã€‚æ¯”å¦‚è¯´ï¼Œä½ ä¸ä¼šåˆ›å»ºä¸€ä¸ª Button ç»„ä»¶ï¼Œç„¶åå†åˆ›å»ºä¸€ä¸ª DropdownButton æ¥ç»§æ‰¿ Buttonã€‚æ‰€ä»¥è¯´ï¼ŒReact ä¸­å…¶å®æ˜¯æ²¡æœ‰åˆ©ç”¨åˆ° Class çš„ç»§æ‰¿ç‰¹æ€§çš„ã€‚</p><p>å¦ä¸€æ–¹é¢ï¼Œå› ä¸ºæ‰€æœ‰ UI éƒ½æ˜¯ç”±çŠ¶æ€é©±åŠ¨çš„ï¼Œå› æ­¤å¾ˆå°‘ä¼šåœ¨å¤–éƒ¨å»è°ƒç”¨ä¸€ä¸ªç±»å®ä¾‹ï¼ˆå³ç»„ä»¶ï¼‰çš„æ–¹æ³•ã€‚è¦çŸ¥é“ï¼Œç»„ä»¶çš„æ‰€æœ‰æ–¹æ³•éƒ½æ˜¯åœ¨å†…éƒ¨è°ƒç”¨ï¼Œæˆ–è€…ä½œä¸ºç”Ÿå‘½å‘¨æœŸæ–¹æ³•è¢«è‡ªåŠ¨è°ƒç”¨çš„ã€‚</p><p>æ‰€ä»¥ä½ çœ‹ï¼Œè¿™ä¸¤ä¸ª Class æœ€é‡è¦çš„ç‰¹æ€§å…¶å®éƒ½æ²¡æœ‰ç”¨åˆ°ã€‚è€Œåœ¨ React å‡ºç°ä¹‹æ—¶ï¼Œä¸»æµçš„æ–¹å¼è¿˜æ˜¯åŸºäºå¯¹è±¡å»è€ƒè™‘é—®é¢˜ã€‚ä¾‹å¦‚è·å¾—ä¸€ä¸ªå¯¹è¯æ¡†çš„å®ä¾‹ï¼Œç„¶åé€šè¿‡ dialog.show(), dialog.hide() è¿™æ ·çš„æ–¹å¼ç»†ç²’åº¦åœ°å»æ§åˆ¶ UI çš„å˜åŒ–ã€‚</p><p>è€Œè¿™åœ¨ React ä¸­å…¶å®æ˜¯æ²¡æœ‰å¿…è¦çš„ï¼Œå› ä¸ºæ‰€æœ‰çš„ UI éƒ½æ˜¯å£°æ˜å‡ºæ¥çš„ï¼Œä¸ç”¨å¤„ç†ç»†èŠ‚çš„å˜åŒ–è¿‡ç¨‹ã€‚å› æ­¤ï¼Œé€šè¿‡å‡½æ•°å»æè¿°ä¸€ä¸ªç»„ä»¶æ‰æ˜¯æœ€ä¸ºè‡ªç„¶çš„æ–¹å¼ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆ React å¾ˆæ—©å°±æä¾›äº†å‡½æ•°ç»„ä»¶çš„æœºåˆ¶ã€‚</p><p>åªæ˜¯å½“æ—¶æœ‰ä¸€ä¸ªå±€é™æ˜¯ï¼Œå‡½æ•°ç»„ä»¶æ— æ³•å­˜åœ¨å†…éƒ¨çŠ¶æ€ï¼Œå¿…é¡»æ˜¯çº¯å‡½æ•°ï¼Œè€Œä¸”ä¹Ÿæ— æ³•æä¾›å®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸæœºåˆ¶ã€‚è¿™å°±æå¤§é™åˆ¶äº†å‡½æ•°ç»„ä»¶çš„å¤§è§„æ¨¡ä½¿ç”¨ã€‚</p><p>é‚£ä¹ˆæˆ‘ä»¬è‡ªç„¶å°±çŸ¥é“äº†ï¼ŒClass ä½œä¸º React ç»„ä»¶çš„è½½ä½“ï¼Œä¹Ÿè®¸å¹¶ä¸æ˜¯æœ€é€‚åˆï¼Œåè€Œå‡½æ•°æ˜¯æ›´é€‚åˆå»æè¿° State =&gt; View è¿™æ ·çš„ä¸€ä¸ªæ˜ å°„ï¼Œä½†æ˜¯å‡½æ•°ç»„ä»¶åˆæ²¡æœ‰ State ï¼Œä¹Ÿæ²¡æœ‰ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚ä»¥æ­¤æ¥çœ‹ï¼Œæˆ‘ä»¬åº”è¯¥å¦‚ä½•å»æ”¹è¿›å‘¢ï¼Ÿ</p><h2>Hooks æ˜¯å¦‚ä½•è¯ç”Ÿçš„ï¼Ÿ</h2><p>å…¶å®é¡ºç€å‡½æ•°ç»„ä»¶çš„æ€è·¯ç»§ç»­æ€è€ƒï¼Œå°±ä¼šå‘ç°ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦è®©å‡½æ•°ç»„ä»¶æ›´æœ‰ç”¨ï¼Œç›®æ ‡å°±æ˜¯ç»™å‡½æ•°ç»„ä»¶åŠ ä¸ŠçŠ¶æ€ã€‚è¿™çœ‹ä¸Šå»ä¼¼ä¹å¹¶ä¸æ˜¯éš¾äº‹ã€‚</p><p>ç®€å•æƒ³ä¸€ä¸‹ï¼Œå‡½æ•°å’Œå¯¹è±¡ä¸åŒï¼Œå¹¶æ²¡æœ‰ä¸€ä¸ªå®ä¾‹çš„å¯¹è±¡èƒ½å¤Ÿåœ¨å¤šæ¬¡æ‰§è¡Œä¹‹é—´ä¿å­˜çŠ¶æ€ï¼Œé‚£åŠ¿å¿…éœ€è¦ä¸€ä¸ªå‡½æ•°ä¹‹å¤–çš„ç©ºé—´æ¥ä¿å­˜è¿™ä¸ªçŠ¶æ€ï¼Œè€Œä¸”è¦èƒ½å¤Ÿæ£€æµ‹å…¶å˜åŒ–ï¼Œä»è€Œèƒ½å¤Ÿè§¦å‘å‡½æ•°ç»„ä»¶çš„é‡æ–°æ¸²æŸ“ã€‚</p><p>å†è¿›ä¸€æ­¥æƒ³ï¼Œé‚£æˆ‘ä»¬æ˜¯ä¸æ˜¯å°±æ˜¯éœ€è¦è¿™æ ·ä¸€ä¸ªæœºåˆ¶ï¼Œèƒ½å¤ŸæŠŠä¸€ä¸ªå¤–éƒ¨çš„æ•°æ®ç»‘å®šåˆ°å‡½æ•°çš„æ‰§è¡Œã€‚å½“æ•°æ®å˜åŒ–æ—¶ï¼Œå‡½æ•°èƒ½å¤Ÿè‡ªåŠ¨é‡æ–°æ‰§è¡Œã€‚è¿™æ ·çš„è¯ï¼Œä»»ä½•ä¼šå½±å“ UI å±•ç°çš„å¤–éƒ¨æ•°æ®ï¼Œéƒ½å¯ä»¥é€šè¿‡è¿™ä¸ªæœºåˆ¶ç»‘å®šåˆ° React çš„å‡½æ•°ç»„ä»¶ã€‚</p><p>åœ¨ React ä¸­ï¼Œè¿™ä¸ªæœºåˆ¶å°±æ˜¯ Hooksã€‚</p><p>æ‰€ä»¥æˆ‘ä»¬ç°åœ¨ä¹Ÿèƒ½å¤Ÿç†è§£è¿™ä¸ªæœºåˆ¶ä¸ºä»€ä¹ˆå« Hooksäº†ã€‚é¡¾åæ€ä¹‰ï¼ŒHook å°±æ˜¯â€œé’©å­â€çš„æ„æ€ã€‚åœ¨ React ä¸­ï¼ŒHooks å°±æ˜¯<strong>æŠŠæŸä¸ªç›®æ ‡ç»“æœé’©åˆ°æŸä¸ªå¯èƒ½ä¼šå˜åŒ–çš„æ•°æ®æºæˆ–è€…äº‹ä»¶æºä¸Šï¼Œé‚£ä¹ˆå½“è¢«é’©åˆ°çš„æ•°æ®æˆ–äº‹ä»¶å‘ç”Ÿå˜åŒ–æ—¶ï¼Œäº§ç”Ÿè¿™ä¸ªç›®æ ‡ç»“æœçš„ä»£ç ä¼šé‡æ–°æ‰§è¡Œï¼Œäº§ç”Ÿæ›´æ–°åçš„ç»“æœ</strong>ã€‚</p><p>å¯¹äºå‡½æ•°ç»„ä»¶ï¼Œè¿™ä¸ªç»“æœæ˜¯æœ€ç»ˆçš„ DOM æ ‘ï¼›å¯¹äº useCallbackã€useMemo è¿™æ ·ä¸ç¼“å­˜ç›¸å…³çš„ç»„ä»¶ï¼Œåˆ™æ˜¯åœ¨ä¾èµ–é¡¹å‘ç”Ÿå˜åŒ–æ—¶å»æ›´æ–°ç¼“å­˜ã€‚æ‰€ä»¥ Hooks çš„ç»“æ„å¯ä»¥å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/f7/1d/f764a904bba8836597e441884804b41d.png?wh=1110*552\" alt=\"\"></p><p>ä»å›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼Œä¸€ä¸ªæ‰§è¡Œè¿‡ç¨‹ï¼ˆExecutionï¼‰ï¼Œä¾‹å¦‚æ˜¯å‡½æ•°ç»„ä»¶æœ¬èº«ï¼Œå¯ä»¥ç»‘å®šåœ¨ï¼ˆé’©åœ¨ï¼‰ä¼ ç»Ÿæ„ä¹‰çš„ Stateï¼Œæˆ–è€… URLï¼Œç”šè‡³å¯ä»¥æ˜¯çª—å£çš„å¤§å°ã€‚è¿™æ ·å½“Stateã€URLã€çª—å£å¤§å°å‘ç”Ÿå˜åŒ–æ—¶ï¼Œéƒ½ä¼šé‡æ–°æ‰§è¡ŒæŸä¸ªå‡½æ•°ï¼Œäº§ç”Ÿæ›´æ–°åçš„ç»“æœã€‚</p><p>å½“ç„¶ï¼Œæ—¢ç„¶æˆ‘ä»¬çš„åˆè¡·æ˜¯ä¸ºäº†å®ç° UI ç»„ä»¶çš„æ¸²æŸ“ï¼Œé‚£ä¹ˆåœ¨ React ä¸­ï¼Œå…¶å®æ‰€æœ‰çš„ Hooks çš„æœ€ç»ˆç»“æœéƒ½æ˜¯å¯¼è‡´ UI çš„å˜åŒ–ã€‚ä½†æ˜¯æ­£å¦‚ React å®˜æ–¹æ›¾ç»æåˆ°è¿‡çš„ï¼Œ<strong>Hooks çš„æ€æƒ³å…¶å®ä¸ä»…å¯ä»¥ç”¨åœ¨ Reactï¼Œåœ¨å…¶å®ƒä¸€äº›åœºæ™¯ä¹Ÿå¯ä»¥è¢«åˆ©ç”¨</strong>ã€‚</p><p>é€šè¿‡è¿™æ ·çš„æ€è€ƒï¼Œä½ åº”è¯¥èƒ½å¤Ÿç†è§£ Hooks è¯ç”Ÿçš„æ¥é¾™å»è„‰äº†ã€‚æ¯”èµ· Class ç»„ä»¶ï¼Œå‡½æ•°ç»„ä»¶æ˜¯æ›´é€‚åˆå»è¡¨è¾¾ React ç»„ä»¶çš„æ‰§è¡Œçš„ï¼Œå› ä¸ºå®ƒæ›´ç¬¦åˆ State =&gt; View è¿™æ ·çš„ä¸€ä¸ªé€»è¾‘å…³ç³»ã€‚ä½†æ˜¯å› ä¸ºç¼ºå°‘çŠ¶æ€ã€ç”Ÿå‘½å‘¨æœŸç­‰æœºåˆ¶ï¼Œè®©å®ƒä¸€ç›´åŠŸèƒ½å—é™ã€‚è€Œç°åœ¨æœ‰äº† Hooksï¼Œå‡½æ•°ç»„ä»¶çš„åŠ›é‡ç»ˆäºèƒ½çœŸæ­£å‘æŒ¥å‡ºæ¥äº†ï¼</p><p>ä¸è¿‡è¿™é‡Œæœ‰ä¸€ç‚¹éœ€è¦ç‰¹åˆ«æ³¨æ„ï¼ŒHooks ä¸­è¢«é’©çš„å¯¹è±¡ï¼Œä¸ä»…å¯ä»¥æ˜¯æŸä¸ªç‹¬ç«‹çš„æ•°æ®æºï¼Œä¹Ÿå¯ä»¥æ˜¯å¦ä¸€ä¸ª Hook æ‰§è¡Œçš„ç»“æœï¼Œè¿™å°±å¸¦æ¥äº† Hooks çš„æœ€å¤§å¥½å¤„ï¼š<strong>é€»è¾‘çš„å¤ç”¨</strong>ã€‚</p><h2>Hooks å¸¦æ¥çš„æœ€å¤§å¥½å¤„ï¼šé€»è¾‘å¤ç”¨</h2><p>åœ¨ä¹‹å‰çš„ React ä½¿ç”¨ä¸­ï¼Œæœ‰ä¸€ç‚¹ç»å¸¸è¢«å¤§å®¶è¯Ÿç—…ï¼Œå°±æ˜¯éå¸¸éš¾ä»¥å®ç°é€»è¾‘çš„å¤ç”¨ï¼Œå¿…é¡»å€ŸåŠ©äºé«˜é˜¶ç»„ä»¶ç­‰å¤æ‚çš„è®¾è®¡æ¨¡å¼ã€‚ä½†æ˜¯é«˜é˜¶ç»„ä»¶ä¼šäº§ç”Ÿå†—ä½™çš„ç»„ä»¶èŠ‚ç‚¹ï¼Œè®©è°ƒè¯•å˜å¾—å›°éš¾ã€‚ä¸è¿‡è¿™äº›é—®é¢˜å¯ä»¥é€šè¿‡ Hooks å¾—åˆ°å¾ˆå¥½çš„è§£å†³ã€‚æ‰€ä»¥å¦‚æœæœ‰äººé—®ä½  Hooks æœ‰ä»€ä¹ˆå¥½å¤„ï¼Œé‚£ä¹ˆæœ€å…³é”®çš„ç­”æ¡ˆå°±æ˜¯<strong>ç®€åŒ–äº†é€»è¾‘å¤ç”¨</strong>ã€‚</p><p>å°±ä»¥åˆšæ‰æˆ‘ä»¬æåˆ°çš„ç»‘å®šçª—å£å¤§å°çš„åœºæ™¯ä¸ºä¾‹ã€‚å¦‚æœæœ‰å¤šä¸ªç»„ä»¶éœ€è¦åœ¨ç”¨æˆ·è°ƒæ•´æµè§ˆå™¨çª—å£å¤§å°æ—¶ï¼Œé‡æ–°è°ƒæ•´å¸ƒå±€ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦æŠŠè¿™æ ·çš„é€»è¾‘æå–æˆä¸€ä¸ªå…¬å…±çš„æ¨¡å—ä¾›å¤šä¸ªç»„ä»¶ä½¿ç”¨ã€‚ä»¥ React æ€æƒ³ï¼Œåœ¨ JSX ä¸­æˆ‘ä»¬ä¼šæ ¹æ® Size å¤§å°æ¥æ¸²æŸ“ä¸åŒçš„ç»„ä»¶ï¼Œä¾‹å¦‚ï¼š</p><pre><code>function render() {\n  if (size === &quot;small&quot;) return &lt;SmallComponent /&gt;;\n  else return &lt;LargeComponent /&gt;;\n}\n</code></pre><p>è¿™æ®µä»£ç çœ‹ä¸Šå»ç®€å•ï¼Œä½†å¦‚æœåœ¨è¿‡å»çš„ Class ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬ç”šè‡³éœ€è¦ä¸€ä¸ªæ¯”è¾ƒå¤æ‚çš„è®¾è®¡æ¨¡å¼æ¥è§£å†³ï¼Œè¿™å°±æ˜¯é«˜é˜¶ç»„ä»¶ã€‚æ‰€ä»¥æ¥ä¸‹æ¥æˆ‘ä»¬ä¸å¦¨é€šè¿‡å®é™…çš„ä»£ç æ¥è¿›è¡Œä¸€ä¸‹æ¯”è¾ƒï¼Œå¦‚æœä¹‹å‰æ²¡æœ‰ç”¨è¿‡ React ä¹Ÿæ²¡æœ‰å…³ç³»ï¼Œä½ åªéœ€æ ¹æ®å­—é¢å«ä¹‰è¿›è¡Œå¤§æ¦‚çš„ç†è§£å³å¯ã€‚</p><p>åœ¨ Class ç»„ä»¶çš„åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦å®šä¹‰ä¸€ä¸ªé«˜é˜¶ç»„ä»¶ï¼Œè´Ÿè´£ç›‘å¬çª—å£å¤§å°å˜åŒ–ï¼Œå¹¶å°†å˜åŒ–åçš„å€¼ä½œä¸º props ä¼ ç»™ä¸‹ä¸€ä¸ªç»„ä»¶ã€‚</p><pre><code>const withWindowSize = Component =&gt; {\n  // äº§ç”Ÿä¸€ä¸ªé«˜é˜¶ç»„ä»¶ WrappedComponentï¼ŒåªåŒ…å«ç›‘å¬çª—å£å¤§å°çš„é€»è¾‘\n  class WrappedComponent extends React.PureComponent {\n    constructor(props) {\n      super(props);\n      this.state = {\n        size: this.getSize()\n      };\n    }\n    componentDidMount() {\n      window.addEventListener(&quot;resize&quot;, this.handleResize); \n    }\n    componentWillUnmount() {\n      window.removeEventListener(&quot;resize&quot;, this.handleResize);\n    }\n    getSize() {\n      return window.innerWidth &gt; 1000 ? &quot;large&quot; ï¼š&quot;small&quot;;\n    }\n    handleResize = ()=&gt; {\n      const currentSize = this.getSize();\n      this.setState({\n        size: this.getSize()\n      });\n    }\n    render() {\n      // å°†çª—å£å¤§å°ä¼ é€’ç»™çœŸæ­£çš„ä¸šåŠ¡é€»è¾‘ç»„ä»¶\n      return &lt;Component size={this.state.size} /&gt;;\n    }\n  }\n  return WrappedComponent;\n};\n</code></pre><p>è¿™æ ·ï¼Œåœ¨ä½ çš„è‡ªå®šä¹‰ç»„ä»¶ä¸­å¯ä»¥è°ƒç”¨ withWindowSize è¿™æ ·çš„å‡½æ•°æ¥äº§ç”Ÿä¸€ä¸ªæ–°ç»„ä»¶ï¼Œå¹¶è‡ªå¸¦ size å±æ€§ï¼Œä¾‹å¦‚ï¼š</p><pre><code>class MyComponent extends React.Component{\n  render() {\n    const { size } = this.props;\n    if (size === &quot;small&quot;) return &lt;SmallComponent /&gt;;\n    else return &lt;LargeComponent /&gt;;\n  }\n}\n// ä½¿ç”¨ withWindowSize äº§ç”Ÿé«˜é˜¶ç»„ä»¶ï¼Œç”¨äºäº§ç”Ÿ size å±æ€§ä¼ é€’ç»™çœŸæ­£çš„ä¸šåŠ¡ç»„ä»¶\nexport default withWindowSize(MyComponent); \n</code></pre><p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œä¸ºäº†ä¼ é€’ä¸€ä¸ªå¤–éƒ¨çš„çŠ¶æ€ï¼Œæˆ‘ä»¬ä¸å¾—ä¸å®šä¹‰ä¸€ä¸ªæ²¡æœ‰UI çš„å¤–å±‚ç»„ä»¶ï¼Œè€Œè¿™ä¸ªç»„ä»¶åªæ˜¯ä¸ºäº†å°è£…ä¸€æ®µå¯é‡ç”¨çš„é€»è¾‘ã€‚æ›´ä¸ºç³Ÿç³•çš„æ˜¯ï¼Œé«˜é˜¶ç»„ä»¶å‡ ä¹æ˜¯ Class ç»„ä»¶ä¸­å®ç°ä»£ç é€»è¾‘å¤ç”¨çš„å”¯ä¸€æ–¹å¼ï¼Œå…¶ç¼ºç‚¹å…¶å®æ¯”è¾ƒæ˜¾ç„¶ï¼š</p><ol>\n<li>ä»£ç éš¾ç†è§£ï¼Œä¸ç›´è§‚ï¼Œå¾ˆå¤šäººç”šè‡³å®æ„¿é‡å¤ä»£ç ï¼Œä¹Ÿä¸æ„¿ç”¨é«˜é˜¶ç»„ä»¶ï¼›</li>\n<li>ä¼šå¢åŠ å¾ˆå¤šé¢å¤–çš„ç»„ä»¶èŠ‚ç‚¹ã€‚æ¯ä¸€ä¸ªé«˜é˜¶ç»„ä»¶éƒ½ä¼šå¤šä¸€å±‚èŠ‚ç‚¹ï¼Œè¿™å°±ä¼šç»™è°ƒè¯•å¸¦æ¥å¾ˆå¤§çš„è´Ÿæ‹…ã€‚</li>\n</ol><p>å¯ä»¥è¯´ï¼Œæ­£å› ä¸ºè¿™äº›ç¼ºç‚¹è¢«æŠ±æ€¨å·²ä¹…ï¼ŒReact å›¢é˜Ÿæ‰ç»ˆäºæå‡ºäº† Hooks è¿™æ ·ä¸€ä¸ªå…¨æ–°çš„æ–¹æ¡ˆã€‚é‚£ä¹ˆç°åœ¨æˆ‘ä»¬ä¸å¦¨çœ‹ä¸€ä¸‹ï¼ŒåŒæ ·çš„é€»è¾‘å¦‚æœç”¨ Hooks å’Œå‡½æ•°ç»„ä»¶è¯¥å¦‚ä½•å®ç°ã€‚é¦–å…ˆæˆ‘ä»¬éœ€è¦å®ç°ä¸€ä¸ª Hooksï¼š</p><pre><code>const getSize = () =&gt; {\n  return window.innerWidth &gt; 1000 ? &quot;large&quot; : &quot;small&quot;;\n}\nconst useWindowSize = () =&gt; {\n  const [size, setSize] = useState(getSize());\n  useEffect(() =&gt; {\n\tconst handler = () =&gt; {\n      setSize(getSize())\n    };\n    window.addEventListener('resize', handler);\n    return () =&gt; {\n      window.removeEventListener('resize', handler);\n    };\n  }, []);\n\t\n  return size;\n};\n</code></pre><p>è¿™æ ·ï¼Œæˆ‘ä»¬åœ¨ç»„ä»¶ä¸­ä½¿ç”¨çª—å£å¤§å°å°±ä¼šéå¸¸ç®€å•ï¼š</p><pre><code>const Demo = () =&gt; {\n  const size = useWindowSize();\n  if (size === &quot;small&quot;) return &lt;SmallComponent /&gt;;\n  else return &lt;LargeComponent /&gt;;\n};\n</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œçª—å£å¤§å°æ˜¯ä¸€ä¸ªå¤–éƒ¨çš„ä¸€ä¸ªæ•°æ®çŠ¶æ€ï¼Œæˆ‘ä»¬é€šè¿‡ Hooks çš„æ–¹å¼å¯¹å…¶è¿›è¡Œäº†å°è£…ï¼Œä»è€Œå°†å…¶å˜æˆä¸€ä¸ªå¯ç»‘å®šçš„æ•°æ®æºã€‚è¿™æ ·å½“çª—å£å¤§å°å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä½¿ç”¨è¿™ä¸ª Hook çš„ç»„ä»¶å°±éƒ½ä¼šé‡æ–°æ¸²æŸ“ã€‚è€Œä¸”ä»£ç ä¹Ÿæ›´åŠ ç®€æ´å’Œç›´è§‚ï¼Œä¸ä¼šäº§ç”Ÿé¢å¤–çš„ç»„ä»¶èŠ‚ç‚¹ã€‚</p><h2>Hooks çš„å¦ä¸€å¤§å¥½å¤„ï¼šæœ‰åŠ©äºå…³æ³¨åˆ†ç¦»</h2><p>é™¤äº†é€»è¾‘å¤ç”¨ä¹‹å¤–ï¼ŒHooks èƒ½å¤Ÿå¸¦æ¥çš„å¦å¤–ä¸€å¤§å¥½å¤„å°±æ˜¯<strong>æœ‰åŠ©äºå…³æ³¨åˆ†ç¦»</strong>ï¼Œæ„æ€æ˜¯è¯´Hooks èƒ½å¤Ÿè®©é’ˆå¯¹åŒä¸€ä¸ªä¸šåŠ¡é€»è¾‘çš„ä»£ç å°½å¯èƒ½èšåˆåœ¨ä¸€å—å„¿ã€‚è¿™æ˜¯è¿‡å»åœ¨ Class ç»„ä»¶ä¸­å¾ˆéš¾åšåˆ°çš„ã€‚å› ä¸ºåœ¨ Class ç»„ä»¶ä¸­ï¼Œä½ ä¸å¾—ä¸æŠŠåŒä¸€ä¸ªä¸šåŠ¡é€»è¾‘çš„ä»£ç åˆ†æ•£åœ¨ç±»ç»„ä»¶çš„ä¸åŒç”Ÿå‘½å‘¨æœŸçš„æ–¹æ³•ä¸­ã€‚</p><p>æ‰€ä»¥é€šè¿‡ Hooks çš„æ–¹å¼ï¼ŒæŠŠä¸šåŠ¡é€»è¾‘æ¸…æ™°åœ°éš”ç¦»å¼€ï¼Œèƒ½å¤Ÿè®©ä»£ç æ›´åŠ å®¹æ˜“ç†è§£å’Œç»´æŠ¤ã€‚</p><p>ä»ç„¶ä»¥ä¸Šé¢ç›‘å¬æµè§ˆå™¨çª—å£å¤§å°çš„å˜åŒ–ä¸ºä¾‹ï¼Œæˆ‘ä»¬æ¥çœ‹ Hooks æ˜¯å¦‚ä½•åšåˆ°å…³æ³¨åˆ†ç¦»çš„ã€‚åœ¨è¿‡å»çš„ Class ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ componentDidMount ä¸­ç›‘å¬äº‹ä»¶ï¼Œåœ¨ componentWillUnmount ä¸­å»è§£ç»‘äº‹ä»¶ã€‚è€Œåœ¨å‡½æ•°ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæ‰€æœ‰é€»è¾‘å†™åœ¨ä¸€èµ·ã€‚</p><p>React ç¤¾åŒºæ›¾ç”¨ä¸€å¼ å›¾ç›´è§‚åœ°å±•ç°äº†å¯¹æ¯”ç»“æœï¼š<br>\n<img src=\"https://static001.geekbang.org/resource/image/f8/d5/f8a255ca1ec737a8ff5a40160e789fd5.png?wh=1236*950\" alt=\"\"><br>\nå›¾çš„å·¦ä¾§æ˜¯ Class ç»„ä»¶ï¼Œå³ä¾§æ˜¯å‡½æ•°ç»„ä»¶ç»“åˆ Hooksã€‚è“è‰²å’Œé»„è‰²ä»£è¡¨ä¸åŒçš„ä¸šåŠ¡åŠŸèƒ½ã€‚å¯ä»¥çœ‹åˆ°ï¼Œåœ¨ Class ç»„ä»¶ä¸­ï¼Œä»£ç æ˜¯ä»æŠ€æœ¯è§’åº¦ç»„ç»‡åœ¨ä¸€èµ·çš„ï¼Œä¾‹å¦‚åœ¨ componentDidMount ä¸­éƒ½å»åšä¸€äº›åˆå§‹åŒ–çš„äº‹æƒ…ã€‚è€Œåœ¨å‡½æ•°ç»„ä»¶ä¸­ï¼Œä»£ç æ˜¯ä»ä¸šåŠ¡è§’åº¦ç»„ç»‡åœ¨ä¸€èµ·çš„ï¼Œç›¸å…³ä»£ç èƒ½å¤Ÿå‡ºç°åœ¨é›†ä¸­çš„åœ°æ–¹ï¼Œä»è€Œæ›´å®¹æ˜“ç†è§£å’Œç»´æŠ¤ã€‚</p><h2>å°ç»“</h2><p>Hooks ä½œä¸º React è‡ªè¯ç”Ÿä»¥æ¥æœ€å¤§çš„ä¸€ä¸ªæ–°åŠŸèƒ½ï¼Œå¯ä»¥è¯´å¾—åˆ°äº†æ™®éå¥½è¯„ï¼Œæˆä¸ºäº† React å¼€å‘çš„ä¸»æµæ–¹å¼ã€‚è€Œå®ƒä¹Ÿåœ¨ä¸€å®šç¨‹åº¦ä¸Š<strong>æ›´å¥½åœ°ä½“ç°äº† React çš„å¼€å‘æ€æƒ³ï¼Œå³ä» State =&gt; View çš„å‡½æ•°å¼æ˜ å°„</strong>ã€‚</p><p>æ­¤å¤–ï¼Œ <strong>Hooks ä¹Ÿè§£å†³äº† Class ç»„ä»¶å­˜åœ¨çš„ä¸€äº›ä»£ç å†—ä½™ã€éš¾ä»¥é€»è¾‘å¤ç”¨çš„é—®é¢˜</strong>ã€‚ä½†æ˜¯æ­£å¦‚æˆ‘åœ¨è¿™èŠ‚è¯¾å¼€å¤´æåˆ°çš„ï¼Œä¸¤ç§æ–¹å¼åœ¨ React å¼€å‘ä¸­å‡ ä¹æ˜¯å®Œå…¨ç­‰ä»·çš„ï¼Œæ²¡æœ‰ç»å¯¹çš„ä¼˜åŠ£ã€‚å¦‚æœä½ å†³å®šå¼€å§‹ä½¿ç”¨ Hooksï¼Œé‚£ä¹ˆå¯¹äºå·²æœ‰çš„ Class ç»„ä»¶ï¼Œå…¶å®æ˜¯å®Œå…¨æ²¡å¿…è¦è¿›è¡Œç«‹åˆ»é‡æ„çš„ã€‚åªè¦åœ¨æ–°çš„åŠŸèƒ½ä¸Šï¼Œå†æ¥ä½¿ç”¨å‡½æ•°ç»„ä»¶å’Œ Hooks å°±å¯ä»¥äº†ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>æ–‡ä¸­ä¸¾äº†çª—å£å¤§å°ä½œä¸º Hooks çš„æ•°æ®æºçš„ä¾‹å­ï¼Œä½ è¿˜èƒ½æƒ³åˆ°å“ªäº›å¯èƒ½éœ€è¦ç»‘å®šåˆ° React ç»„ä»¶çš„æ•°æ®æºï¼Ÿ</p><p>æ¬¢è¿åœ¨è¯„è®ºåŒºå†™ä¸‹ä½ çš„æƒ³æ³•å’Œæ€è€ƒï¼Œæˆ‘ä»¬ä¸€èµ·äº¤æµè®¨è®ºã€‚å¦‚æœä»Šå¤©è¿™èŠ‚è¯¾è®©ä½ æœ‰æ‰€æ”¶è·çš„è¯ï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠè¯¾ç¨‹åˆ†äº«ç»™ä½ çš„åŒäº‹ã€æœ‹å‹ï¼Œæˆ‘ä»¬ä¸€èµ·å…±åŒè¿›æ­¥ã€‚</p>","neighbors":{"left":{"article_title":"01ï½œè®¤è¯† Reactï¼šå¦‚ä½•åˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ª React åº”ç”¨ï¼Ÿ","id":376532},"right":{"article_title":"03ï½œå†…ç½® Hooksï¼ˆ1ï¼‰ï¼šå¦‚ä½•ä¿å­˜ç»„ä»¶çŠ¶æ€å’Œä½¿ç”¨ç”Ÿå‘½å‘¨æœŸï¼Ÿ","id":379299}},"comments":[[{"had_liked":false,"id":295246,"user_name":"å¼€å¼€ä¹‹ä¹‹","can_delete":false,"product_type":"c1","uid":1152069,"ip_address":"","ucode":"2B7FC13D6F32C4","user_header":"https://static001.geekbang.org/account/avatar/00/11/94/45/7ea3dd47.jpg","comment_is_top":false,"comment_ctime":1622330261,"is_pvip":false,"replies":[{"id":"107181","content":"ç»„åˆçš„è¯ç»„ä»¶ä¹‹é—´å°±ä»…ä»…éœ€è¦é€šè¿‡ props çš„æ–¹å¼æ¥äº’ç›¸äº¤äº’ï¼Œä¾èµ–å…³ç³»æ›´åŠ æ¸…æ¥šï¼Œç»„ä»¶å†…èšæ€§æ›´å¥½ã€‚ç»§æ‰¿ä¼šè®©ä¸¤ä¸ªç»„ä»¶ç´§å¯†è€¦åˆåˆ°ä¸€èµ·ã€‚ç»§æ‰¿ä¹Ÿä¸æ˜¯å®Œå…¨ä¸èƒ½ç”¨ï¼Œåªæ˜¯éå¸¸ä¸æ¨èã€‚åœ¨ React ä¸­ï¼Œç»§æ‰¿è¦è¾¾åˆ°çš„ç›®çš„ç”¨ç»„åˆå®Œå…¨å¯ä»¥ coverã€‚","user_name":"ä½œè€…å›å¤","comment_id":295246,"uid":"1018676","ip_address":"","utype":1,"ctime":1622360869,"user_name_real":"Nate"}],"discussion_count":10,"race_medal":0,"score":"96111610773","product_id":100079901,"comment_content":"è€å¸ˆï¼Œä¸ºä»€ä¹ˆè¯´reactç»„ä»¶ä¸ä¼šç›¸äº’ç»§æ‰¿ï¼Ÿæˆ‘ä¹‹å‰åšè¿‡ä¸€ä¸ªé¡¹ç›®ï¼Œå°±æ˜¯é€šè¿‡ç»§æ‰¿æ¥å®ç°ä»£ç å¤ç”¨çš„","like_count":23,"discussions":[{"author":{"id":1018676,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8b/34/61035278.jpg","nickname":"Nate","note":"","ucode":"844B4C20BB3D6E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":521006,"discussion_content":"ç»„åˆçš„è¯ç»„ä»¶ä¹‹é—´å°±ä»…ä»…éœ€è¦é€šè¿‡ props çš„æ–¹å¼æ¥äº’ç›¸äº¤äº’ï¼Œä¾èµ–å…³ç³»æ›´åŠ æ¸…æ¥šï¼Œç»„ä»¶å†…èšæ€§æ›´å¥½ã€‚ç»§æ‰¿ä¼šè®©ä¸¤ä¸ªç»„ä»¶ç´§å¯†è€¦åˆåˆ°ä¸€èµ·ã€‚ç»§æ‰¿ä¹Ÿä¸æ˜¯å®Œå…¨ä¸èƒ½ç”¨ï¼Œåªæ˜¯éå¸¸ä¸æ¨èã€‚åœ¨ React ä¸­ï¼Œç»§æ‰¿è¦è¾¾åˆ°çš„ç›®çš„ç”¨ç»„åˆå®Œå…¨å¯ä»¥ coverã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1622360869,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1001556,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/54/710626c2.jpg","nickname":"Jinjing Wu","note":"","ucode":"0848B436C64D87","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":577555,"discussion_content":"ä¸€åˆ‡éœ€è¦é€šè¿‡ç»§æ‰¿æ¥å®ç°çš„ï¼Œéƒ½è¯·åœä¸‹æ¥æƒ³æƒ³æ˜¯å¦é€šè¿‡ç»„åˆçš„æ–¹å¼æ¥è§£ä¼šæ›´ä¼˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656177985,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1915533,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/3a/8d/f5e7a20d.jpg","nickname":"ä½•ä»¥è§£å¿§","note":"","ucode":"4DFE2BDBAF4919","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":563090,"discussion_content":"åŠŸèƒ½å¤ç”¨åç«¯ç°åœ¨ä¹Ÿå€¾å‘äºç»„åˆäº†ï¼Œç»§æ‰¿æ›´å¤šçš„æ˜¯æ¥å£ç»§æ‰¿","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649939418,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1028704,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erdd1KOUnW6yErToiaN4iaU4qHPn9PtU0fspzkzSKLqEyGG5383MBgHu1SEgzuibnMEiaHHGR31seHvNA/132","nickname":"ç‹¬é’“å¯’æ±Ÿé›ª","note":"","ucode":"1B2E3A7B8D6627","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":407901,"discussion_content":"ç»„ä»¶ç»§æ‰¿å¾ˆå¸¸è§å§ã€‚æ¯”å¦‚ä¸€ä¸ªé»˜è®¤çš„é¡µé¢ç»„ä»¶ã€‚å› ä¸ºå‡ ä¸ªä¸šåŠ¡ï¼ŒæŒ‰é’®å®ç°ä¸åŒï¼Œè‚¯å®šå°±ç›´æ¥é›†æˆè¿™ä¸ªç»„ä»¶ï¼Œé‡è½½ä¸‹è¿™ä¸ªæŒ‰é’®çš„æ–¹æ³•å°±å¥½äº†å‘€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635147464,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2728170,"avatar":"","nickname":"é™ˆåº†ä¹‹","note":"","ucode":"0D8FB96037F475","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":387542,"discussion_content":"webpackä¸­çš„Tabpableç±»ï¼ŒHOOK, asynchookï¼Œsynchook è¿™äº›ä¸éƒ½æ˜¯ç”¨ç±»ç»§æ‰¿å»å®ç°çš„å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628237923,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2000254,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/85/7e/dc5ee66c.jpg","nickname":"å¤©å¤©","note":"","ucode":"2B9414A72EB338","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2728170,"avatar":"","nickname":"é™ˆåº†ä¹‹","note":"","ucode":"0D8FB96037F475","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":406799,"discussion_content":"è¿™é‡Œè¯´çš„æ˜¯ç±»ç»„ä»¶ï¼Œä¸æ˜¯ç±»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634830701,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":387542,"ip_address":""},"score":406799,"extra":""}]},{"author":{"id":1334751,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/qzPPBIl5ydsxKfSEgrjo8FxO4sMYgxyxTlOiakNI4bDz2cgdsqYias3wAndrriahztr0TcVUqeJZ8asj9PA22ZXaA/132","nickname":"Lucas","note":"","ucode":"677EEA40E973B5","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":379321,"discussion_content":"æˆ‘æƒ³çŸ¥é“å¦‚ä½•ç»§æ‰¿çš„ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623828648,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1764429,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/ec/4d/1551ed5f.jpg","nickname":"å‰ç«¯å°çŒª","note":"","ucode":"DDC0F702986274","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":376847,"discussion_content":"æˆ‘ä¹Ÿæœ‰ç›¸å…³çš„ç–‘é—®ï¼Œè€å¸ˆçš„å›ç­”å¤ªæ£’äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622379355,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1707743,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/0e/df/a64b3146.jpg","nickname":"Forest","note":"","ucode":"B75CB4919FF25A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1764429,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/ec/4d/1551ed5f.jpg","nickname":"å‰ç«¯å°çŒª","note":"","ucode":"DDC0F702986274","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":377593,"discussion_content":"æˆ‘å¾ˆå¥½å¥‡æ˜¯åœ¨ä»€ä¹ˆæ ·çš„åœºæ™¯ä¸‹ä¼šç”¨åˆ°ç»§æ‰¿","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622721171,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":376847,"ip_address":""},"score":377593,"extra":""},{"author":{"id":1152069,"avatar":"https://static001.geekbang.org/account/avatar/00/11/94/45/7ea3dd47.jpg","nickname":"å¼€å¼€ä¹‹ä¹‹","note":"","ucode":"2B7FC13D6F32C4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1707743,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/0e/df/a64b3146.jpg","nickname":"Forest","note":"","ucode":"B75CB4919FF25A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":377641,"discussion_content":"æ¯”å¦‚ï¼Œä¸€ä¸ªaæ ‡ç­¾çš„é“¾æ¥ç‚¹å‡»åä¼šå‘é€google analysis, ä¸€ä¸ªæŒ‰é’®ä¹Ÿä¼šï¼Œç„¶åå°±é€šè¿‡è®©æŒ‰é’®ç»§æ‰¿aæ ‡ç­¾å»å¤ç”¨ä»£ç ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622736605,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":377593,"ip_address":""},"score":377641,"extra":""}]}]},{"had_liked":false,"id":295551,"user_name":"é—²é—²","can_delete":false,"product_type":"c1","uid":1637571,"ip_address":"","ucode":"B2099BDCFF6191","user_header":"https://static001.geekbang.org/account/avatar/00/18/fc/c3/0991edfc.jpg","comment_is_top":false,"comment_ctime":1622473168,"is_pvip":false,"replies":[{"id":"107318","content":"å¾ˆå¥½çš„é—®é¢˜ã€‚è‡ªå®šä¹‰ Hooks è§¦å‘ç»„ä»¶æ›´æ–°çš„æœºåˆ¶æ˜¯è°ƒç”¨ useState è¿™ä¸€ç±»å†…ç½®çš„ï¼Œèƒ½è§¦å‘ç»„ä»¶æ›´æ–°çš„ Hooksã€‚æ‰€ä»¥åœ¨çª—å£å¤§å°å˜åŒ–çš„ä¾‹å­ä¸­ï¼Œåœ¨äº‹ä»¶ç›‘å¬ä¸­é€šè¿‡ setSize è¿™ä¸ª useState å¾—åˆ°çš„æ–¹æ³•å»è®¾ç½® sizeï¼Œä»è€Œç»„ä»¶å°±æ›´æ–°äº†ã€‚","user_name":"ä½œè€…å›å¤","comment_id":295551,"uid":"1018676","ip_address":"","utype":1,"ctime":1622475993,"user_name_real":"Nate"}],"discussion_count":4,"race_medal":0,"score":"61752015312","product_id":100079901,"comment_content":"è€å¸ˆæˆ‘æœ‰ä¸ªç–‘é—®ï¼Œéº»çƒ¦çœ‹åˆ°å¸®å¿™è§£ç­”ä¸€ä¸‹ï¼š<br><br>ä¸Šé¢çš„ä¾‹å­é‡Œé¢è¯´æ˜¯çª—å£å¤§å°å‘ç”Ÿå˜åŒ–ï¼Œç»„ä»¶å°±ä¼šæ›´æ–°ï¼Œå¯¹äºè¿™ä¸€ç‚¹æˆ‘ä¸å¤ªç†è§£ï¼Œclasså°è£…çš„è¿˜å¯ä»¥ç†è§£ä¸ºï¼Œstateå‘ç”Ÿæ”¹å˜äº†ï¼Œå¯¼è‡´é‡æ–°renderäº†ï¼Œä½†æ˜¯hookæ„Ÿè§‰è¿™ä¹ˆç†è§£ä¸é€šé¡ºï¼Œhookå“ªé‡Œå†™çš„å°±ç±»ä¼¼ä¸€ä¸ªçº¯å‡½æ•°è°ƒç”¨ï¼Œæ˜¯æ€ä¹ˆé©±åŠ¨ç»„ä»¶é‡æ–°æ›´æ–°çš„å‘¢ï¼Ÿ","like_count":15,"discussions":[{"author":{"id":1018676,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8b/34/61035278.jpg","nickname":"Nate","note":"","ucode":"844B4C20BB3D6E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":521125,"discussion_content":"å¾ˆå¥½çš„é—®é¢˜ã€‚è‡ªå®šä¹‰ Hooks è§¦å‘ç»„ä»¶æ›´æ–°çš„æœºåˆ¶æ˜¯è°ƒç”¨ useState è¿™ä¸€ç±»å†…ç½®çš„ï¼Œèƒ½è§¦å‘ç»„ä»¶æ›´æ–°çš„ Hooksã€‚æ‰€ä»¥åœ¨çª—å£å¤§å°å˜åŒ–çš„ä¾‹å­ä¸­ï¼Œåœ¨äº‹ä»¶ç›‘å¬ä¸­é€šè¿‡ setSize è¿™ä¸ª useState å¾—åˆ°çš„æ–¹æ³•å»è®¾ç½® sizeï¼Œä»è€Œç»„ä»¶å°±æ›´æ–°äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622475993,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1915533,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/3a/8d/f5e7a20d.jpg","nickname":"ä½•ä»¥è§£å¿§","note":"","ucode":"4DFE2BDBAF4919","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":563098,"discussion_content":"ç°åœ¨çœ‹æ¥è¿˜æ˜¯æœ‰äº›ç–‘é—®çš„ï¼Œè‡ªå®šä¹‰hookå¦‚æœç†è§£ä¸ºå­ç»„ä»¶ä¼šç‰¹åˆ«åˆ«æ‰­ï¼Œæ„Ÿè§‰è¿˜æ˜¯åƒè¢«å‡½æ•°åŒ…äº†ä¸€å±‚çš„usestateï¼Œä½†æ˜¯å†…éƒ¨ä¹Ÿæœ‰è‡ªå·±çš„useeffectè¿˜æ˜¯æœ‰ç‚¹åƒå­ç»„ä»¶ï¼Œå­ç»„ä»¶çš„stateå˜åŒ–å¼•èµ·çˆ¶ç»„ä»¶é‡æ–°renderï¼Œä¼¼ä¹è¯´çš„é€š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649939805,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1915533,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/3a/8d/f5e7a20d.jpg","nickname":"ä½•ä»¥è§£å¿§","note":"","ucode":"4DFE2BDBAF4919","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":378417,"discussion_content":"useWindowSize è¿™ä¸ªè‡ªå®šä¹‰hook ä¸­çš„useState å¯ä»¥ç†è§£ä¸ºDemoä¸­çš„useStateï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623215087,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1431110,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ1IdxyfYWRERClTxbYAqdE81VjsBe0lkKSLQ7wia2ibx9y7LgTX68CPGw7WJEGM0S5vkStxxwzUARQ/132","nickname":"å¾®æ¼¾æ— ç—•","note":"","ucode":"05C6472A53DCD7","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1915533,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/3a/8d/f5e7a20d.jpg","nickname":"ä½•ä»¥è§£å¿§","note":"","ucode":"4DFE2BDBAF4919","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":582856,"discussion_content":"è‡ªå®šä¹‰hookä¸­çš„useStateä¸Demoçš„useStateå®Œå…¨ç­‰ä»·ã€‚å› ä¸ºreactå¯¹æ‰€æœ‰å†…ç½®åŒ…æ‹¬è‡ªå®šä¹‰çš„hookséƒ½æ˜¯ä¸¥æ ¼æŒ‰ç…§ä»£ç å®šä¹‰æ—¶çš„é¡ºåºâ€œé’©å…¥â€è¯»å–çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659709619,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":378417,"ip_address":"å››å·"},"score":582856,"extra":""}]}]},{"had_liked":false,"id":294778,"user_name":"å‡¡å‡¡","can_delete":false,"product_type":"c1","uid":1374266,"ip_address":"","ucode":"CAEA596A037D9A","user_header":"https://static001.geekbang.org/account/avatar/00/14/f8/3a/dbf7bdee.jpg","comment_is_top":false,"comment_ctime":1622086852,"is_pvip":true,"replies":[{"id":"107045","content":"å¯ä»¥çš„ï¼Œåƒ react router å°±æä¾›äº†è¿™ä¸ª Hookï¼Œä¹Ÿæœ‰ä¸€äº›ç¬¬ä¸‰æ–¹ library ä¹Ÿæä¾›äº†ï¼Œæ¯”å¦‚ï¼šhttps:&#47;&#47;github.com&#47;streamich&#47;react-use&#47;blob&#47;master&#47;src&#47;useLocation.ts å°±æ˜¯ä¸€ä¸ªå®ç°ã€‚","user_name":"ä½œè€…å›å¤","comment_id":294778,"uid":"1018676","ip_address":"","utype":1,"ctime":1622118589,"user_name_real":"Nate"}],"discussion_count":1,"race_medal":0,"score":"40276792516","product_id":100079901,"comment_content":"è·¯ç”±å˜åŒ–å¯ä»¥ä½œä¸ºæ•°æ®æºå—","like_count":9},{"had_liked":false,"id":302167,"user_name":"Geek_d221bc","can_delete":false,"product_type":"c1","uid":2652102,"ip_address":"","ucode":"DB6B2581688624","user_header":"","comment_is_top":false,"comment_ctime":1626103144,"is_pvip":false,"replies":[{"id":"110079","content":"ä¸éœ€è¦è¯»æºç ã€‚Hooks è®©ç»„ä»¶åˆ·æ–°å’Œä¼ ç»Ÿ class ç»„ä»¶è§¦å‘åˆ·æ–°çš„æœºåˆ¶æ˜¯å®Œå…¨ä¸€æ ·çš„ï¼Œéƒ½æ˜¯ç”± state æˆ–è€… props å˜åŒ–è§¦å‘ã€‚Hooks ä¸­çš„ useState å’Œ class ä¸­çš„ setStateï¼ŒèƒŒåæ˜¯åŒä¸€å¥—å®ç°ï¼Œç†è§£è¿™ä¸€ç‚¹å°±å¯ä»¥äº†ã€‚","user_name":"ä½œè€…å›å¤","comment_id":302167,"uid":"1018676","ip_address":"","utype":1,"ctime":1627306555,"user_name_real":"Nate"}],"discussion_count":1,"race_medal":0,"score":"23100939624","product_id":100079901,"comment_content":"ç‹è€å¸ˆï¼Œä½ å¥½ï¼Œæƒ³è¯·æ•™hooksæ˜¯å¦‚ä½•è®©å‡½æ•°ç»„ä»¶å…·å¤‡éšçŠ¶æ€å˜åŒ–è§¦å‘ç»„ä»¶é‡æ–°æ‰§è¡Œè¿”å›æ›´æ–°çš„å‘¢ï¼Ÿè¿™æ˜¯è¦å»è¯»hooksç›¸å…³æºç ï¼Ÿ","like_count":5},{"had_liked":false,"id":294744,"user_name":"åˆ˜æ´‹","can_delete":false,"product_type":"c1","uid":1366840,"ip_address":"","ucode":"909AE90A43E762","user_header":"https://static001.geekbang.org/account/avatar/00/14/db/38/9df8992e.jpg","comment_is_top":false,"comment_ctime":1622079919,"is_pvip":true,"replies":[{"id":"106987","content":"æ¯å‘¨äºŒå››å…­æ›´æ–°ï¼Œé¢„è®¡7æœˆ13æ—¥æ›´æ–°å®Œæ¯•","user_name":"ç¼–è¾‘å›å¤","comment_id":294744,"uid":"2189689","ip_address":"","utype":2,"ctime":1622085974,"user_name_real":"æè¾°æ´‹"}],"discussion_count":1,"race_medal":0,"score":"18801949103","product_id":100079901,"comment_content":"å¤šä¹…æ›´æ–°å®Œå•Š","like_count":4},{"had_liked":false,"id":294770,"user_name":"ç‹¬ç™½","can_delete":false,"product_type":"c1","uid":1700211,"ip_address":"","ucode":"EDC477BD20B032","user_header":"https://static001.geekbang.org/account/avatar/00/19/f1/73/6f7e3b35.jpg","comment_is_top":false,"comment_ctime":1622085661,"is_pvip":false,"replies":[{"id":"107044","content":"è¯´çš„å¾ˆå¥½å•Š~ useReducer æ˜¯ä¸ªæ¯”è¾ƒé€šç”¨çš„ï¼Œç±»ä¼¼äº useState ä½†æ˜¯æŒ‰ç…§ Redux çš„æ¨¡å¼æä¾›äº†ä¸€å®šçš„ç»Ÿä¸€ state ç®¡ç†æœºåˆ¶ã€‚æ»šåŠ¨æ¡ä½ç½®ç¡®å®æ˜¯ä¸ªå¾ˆå¥½çš„ä¾‹å­ï¼Œå¼€å‘ä¸­ä¹Ÿç»å¸¸ç”¨åˆ°ï¼Œåœ¨ç¬¬6è¯¾å°±ä¼šè®²åˆ°è¿™ä¸ªä¾‹å­ã€‚","user_name":"ä½œè€…å›å¤","comment_id":294770,"uid":"1018676","ip_address":"","utype":1,"ctime":1622118543,"user_name_real":"Nate"}],"discussion_count":1,"race_medal":0,"score":"14506987549","product_id":100079901,"comment_content":"æ€è€ƒé¢˜ï¼šé¦–å…ˆæƒ³åˆ°çš„æ˜¯å®˜æ–¹çš„ä¸€ä¸ªapi  useReducerã€‚è¿˜æœ‰çš„è¯ï¼Œå°±æ˜¯ç›‘å¬æ»šåŠ¨æ¡å‘ä¸Šå‘ä¸‹å‘€ã€‚<br>çœ‹äº†è€å¸ˆè¿™èŠ‚è¯¾ï¼Œæ‰å¼„æ¸…é™¤hooksçœŸæ­£é‡è¦çš„ä¸œè¥¿æ˜¯å•¥ã€‚","like_count":3},{"had_liked":false,"id":296398,"user_name":"Geek_9878c1","can_delete":false,"product_type":"c1","uid":1667697,"ip_address":"","ucode":"647183DE9376CF","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIcOPgba5hadxiawicnLjSpRjlskQ22hnLEw1iayU5xibQ2YoqngJ2r6Sjp8RcoW6ODuLBr6dibiascz0vA/132","comment_is_top":false,"comment_ctime":1622954351,"is_pvip":false,"replies":[{"id":"107944","content":"ç¡®å®å¦‚æ­¤~ è¯´æ˜ API ç»å—ä½äº†è€ƒéªŒï¼Œèƒ½æ»¡è¶³ä¸æ–­å‘å±•çš„éœ€æ±‚å˜åŒ–ï¼š-ï¼‰","user_name":"ä½œè€…å›å¤","comment_id":296398,"uid":"1018676","ip_address":"","utype":1,"ctime":1623388016,"user_name_real":"Nate"}],"discussion_count":2,"race_medal":0,"score":"10212888943","product_id":100079901,"comment_content":"æœ€å–œæ¬¢çš„Reactåœ°æ–¹å°±æ˜¯  â€œåœ¨å…¶ä»–å‰ç«¯æ¡†æ¶å‘ç”Ÿç¿»å¤©è¦†åœ°å˜åŒ–çš„åŒæ—¶ï¼ŒReact çš„ API åˆ™éå¸¸ç¨³å®šï¼Œå‡ ä¹ä»æ¥æ²¡æœ‰å‡ºç°è¿‡é‡å¤§çš„å‘åå…¼å®¹çš„é—®é¢˜ï¼Œè€Œä¸”æ¯ä¸€æ¬¡ç‰ˆæœ¬çš„å‡çº§ä¹Ÿéƒ½éå¸¸é¡ºæ»‘ã€‚â€œ ï¼Œ éš”å¤šä¹…éƒ½æ²¡æœ‰éš”é˜‚","like_count":2,"discussions":[{"author":{"id":1018676,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8b/34/61035278.jpg","nickname":"Nate","note":"","ucode":"844B4C20BB3D6E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":521426,"discussion_content":"ç¡®å®å¦‚æ­¤~ è¯´æ˜ API ç»å—ä½äº†è€ƒéªŒï¼Œèƒ½æ»¡è¶³ä¸æ–­å‘å±•çš„éœ€æ±‚å˜åŒ–ï¼š-ï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623388016,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2028938,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/f5/8a/dc9a23a1.jpg","nickname":"ç»­è´¹ä¸“ç”¨","note":"","ucode":"1B585A131B64B4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":378411,"discussion_content":"è¿˜æ˜¯æœ‰å˜åŒ–çš„,æ¯”å¦‚\n1. ç»„ä»¶çš„ç¼–å†™æ–¹å¼ React.createClass -> Class Component.\n2. ç”Ÿå‘½å‘¨æœŸå˜åŒ–äº†3ç‰ˆ.\n3. é€»è¾‘é‡ç”¨æ–¹å¼ä¹Ÿç»å†äº†minxin,HOC,renderProps,hooksç­‰æ–¹å¼.\nå…¶ä»–æš‚æ—¶æ²¡æƒ³åˆ°.\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623214117,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":295720,"user_name":"å°é¦‹çŒ«","can_delete":false,"product_type":"c1","uid":1387206,"ip_address":"","ucode":"9A4AF648E9D60E","user_header":"https://static001.geekbang.org/account/avatar/00/15/2a/c6/fab94c55.jpg","comment_is_top":false,"comment_ctime":1622558035,"is_pvip":false,"replies":[{"id":"107452","content":"æ˜¯çš„ï¼Œè¿˜æœ‰ render props æ¨¡å¼ï¼Œåé¢ä¼šæœ‰ä»‹ç»~","user_name":"ä½œè€…å›å¤","comment_id":295720,"uid":"1018676","ip_address":"","utype":1,"ctime":1622727308,"user_name_real":"Nate"}],"discussion_count":2,"race_medal":0,"score":"10212492627","product_id":100079901,"comment_content":"hooksæ²¡æœ‰å‡ºç°ä¹‹å‰å¦‚æœæƒ³å®ç°é€»è¾‘å¤ç”¨åªèƒ½é€šè¿‡é«˜é˜¶ç»„ä»¶çš„æ–¹å¼æ¥å®ç°","like_count":2,"discussions":[{"author":{"id":1018676,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8b/34/61035278.jpg","nickname":"Nate","note":"","ucode":"844B4C20BB3D6E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":521192,"discussion_content":"æ˜¯çš„ï¼Œè¿˜æœ‰ render props æ¨¡å¼ï¼Œåé¢ä¼šæœ‰ä»‹ç»~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622727308,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1630502,"avatar":"https://static001.geekbang.org/account/avatar/00/18/e1/26/a5bae6c3.jpg","nickname":"ã€‚ä¸‘","note":"","ucode":"F1006EBF13E95F","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":378282,"discussion_content":"æˆ‘å®ä¹ çš„æ—¶å€™ï¼Œé¢†å¯¼å°±å»ºè®®æˆ‘ä¸è¦ä½¿ç”¨é«˜é˜¶ç»„ä»¶ï¼Œ èƒ½propsçš„ å°±props","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623146285,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":320624,"user_name":"Geek_0b2691","can_delete":false,"product_type":"c1","uid":1146048,"ip_address":"","ucode":"5994F60D796E44","user_header":"https://static001.geekbang.org/account/avatar/00/11/7c/c0/09fd07c2.jpg","comment_is_top":false,"comment_ctime":1636426570,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5931393866","product_id":100079901,"comment_content":"1.å›ç­”æ€è€ƒé¢˜ï¼š <br>å¼‚æ­¥è·å–çš„æ•°æ®ï¼Œå¯èƒ½æœ‰ç‚¹æ˜¾è€Œæ˜“è§ï¼Œä½†å¾ˆå¸¸è§ï¼Œæ•°æ®ä¸€å¼€å§‹æ˜¯æ²¡æœ‰çš„ï¼Œä½†æ˜¯è·å–ä¹‹åï¼Œéœ€è¦è§¦å‘hookså»æ›´æ–°ç»„ä»¶ï¼Œå†æ¸²æŸ“ä¸€æ¬¡ã€‚<br>è¿˜æœ‰å°±æ˜¯äº¤äº’äº§ç”Ÿçš„çŠ¶æ€æ”¹å˜ï¼Œæ¯”å¦‚ç‚¹å‡»æŒ‰é’®å¼¹çª—å‡ºæ¥ï¼Œå¼¹çª—åŸæœ¬æ˜¯ä¸å‡ºæ¥çš„çŠ¶æ€ï¼Œç‚¹å‡»ä¸€ä¸‹æŒ‰é’®ï¼Œæ›´æ–°ä¸€ä¸‹å¼¹çª—çš„æ˜¾ç¤ºçŠ¶æ€ï¼Œå¼¹çª—ç»„ä»¶æ”¶åˆ°çŠ¶æ€æ”¹å˜ï¼Œå°±è¿›è¡Œé‡ç»˜ï¼Œå°±å¼¹å‡ºæ¥äº†ã€‚<br>2. è·Ÿè€å¸ˆè¯·æ•™ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯åˆšæ¥è§¦hooksçš„æ—¶å€™ï¼Œæœ‰ä¸¤ä¸ªåœºæ™¯è¡¨ç¤ºå¾ˆç–‘æƒ‘ï¼Œ<br>ä¸€ä¸ªæ˜¯ç”¨ä¸€ä¸ªuseEffectå»ç®¡ç†ä¸€ä¸ªå‡½æ•°Açš„æ‰§è¡Œï¼Œæˆ‘æŠŠå¤šä¸ªä¾èµ–çŠ¶æ€éƒ½å†™åœ¨useEffecté‡Œé¢äº†ï¼Œæ²¡æœ‰ç”¨useCallbackåŒ…è£¹å¤„ç†å‡½æ•°Aï¼Œå°±ä¼šå‘ç°å¦‚æœæŸä¸ªæ“ä½œï¼Œå¯¼è‡´ä¾èµ–é‡Œé¢çš„å¤šä¸ªçŠ¶æ€å‘ç”Ÿäº†å˜åŒ–ï¼Œè¿™ä¸ªå‡½æ•°å°±ä¼šæ‰§è¡Œå¤šæ¬¡ï¼Œè¿™æ­£å¸¸å—? é‚£æ—¶æˆ‘ä¸€ç›´ä»¥ä¸ºè¿™ç§æƒ…å†µä¸åº”è¯¥ç­‰æ‰€æœ‰ä¾èµ–é¡¹éƒ½ç¨³å®šåå†å»è§¦å‘ä¸€æ¬¡å‡½æ•°æ‰§è¡Œå—ï¼Ÿä¸ºå•¥ä¼šæ‰§è¡Œå¤šæ¬¡ï¼Ÿè¿™ä¸ªé—®é¢˜å½“æ—¶ä¹Ÿä¸çŸ¥é“è¯¥ä»å“ªé‡Œå¯»æ‰¾ç­”æ¡ˆï¼Œå°±å§‘ä¸”è®¤ä¸ºæ˜¯ï¼Œåªè¦ä¸€ä¸ªä¾èµ–å‘ç”Ÿå˜åŒ–å°±æ‰§è¡Œä¸€æ¬¡å‡½æ•°äº†ï¼Œè€å¸ˆè¿™æ ·ç†è§£å¯¹å—ï¼Ÿ<br>å¦å¤–ä¸€ä¸ªåœºæ™¯æ˜¯ï¼Œæˆ‘è¿˜æ˜¯è®©useEffectå¸®æˆ‘å»æ‰§è¡Œå‡½æ•°Bï¼Œè®©useEffectä¹Ÿä¾èµ–çŠ¶æ€äº†ï¼Œä½†ä¾èµ–çš„çŠ¶æ€ä¸æ˜¯å‡½æ•°Bé‡Œé¢ç”¨åˆ°çš„æ‰€æœ‰çŠ¶æ€ï¼Œæ˜¯å…¶ä¸­æŸä¸€ä¸ªï¼Œå½“åˆè®¾è®¡çš„æ€æƒ³å°±æ˜¯ï¼Œä¸æ˜¯ä¾èµ–çš„çŠ¶æ€ï¼Œæ¯ä¸€ä¸ªå˜å®ƒéƒ½æ‰§è¡Œå˜›ï¼Œé‚£æˆ‘åªä¾èµ–ä¸€ä¸ªï¼Œé‚£æ˜¯ä¸æ˜¯åªä¼šåœ¨ä¾èµ–çš„çŠ¶æ€å˜åŒ–æ—¶æ‰ä¼šæ‰§è¡Œï¼Œå‡½æ•°Bé‡Œç”¨åˆ°çš„å…¶ä»–çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶å°±ä¸æ‰§è¡Œäº†ï¼Œè¿™æ ·å‡½æ•°å°±ä¼šå°‘é‡å¤æ‰§è¡Œå¤šæ¬¡äº†ï¼Œæ˜¯ä¸æ˜¯å°±èƒ½ææ•ˆä¸€äº›äº†å‘¢ï¼Ÿè¿™æ ·çš„ç¡®æ˜¯åªä¼šå› ä¸ºä¾èµ–çš„çŠ¶æ€å˜åŒ–è€Œæ‰§è¡Œå‡½æ•°ï¼Œç°åœ¨çœ‹æ¥å¸¦æ¥çš„åæœå°±æ˜¯ï¼Œå‡½æ•°Bä¸­ç”¨åˆ°çš„å…¶ä»–çŠ¶æ€å€¼ï¼Œä¸æ˜¯æœ€æ–°çš„ï¼Œæƒ³é—®è€å¸ˆï¼Œè¿™ç§è®¾è®¡æ€è·¯æ˜¯ä¸æ˜¯æœ¬èº«å°±æ˜¯æœ‰é—®é¢˜çš„ï¼Ÿæˆ‘ä¸€å¼€å§‹å°±é”™äº†ï¼Œé‚£å‡å°‘å‡½æ•°Bæ‰§è¡Œæ¬¡æ•°çš„æ–¹æ¡ˆï¼Œç”¨usaCallbackåŒ…ä¸€ä¸‹å‡½æ•°Bï¼Œå…¶å®è¿™æ ·ä¹Ÿä¼šæ‰§è¡Œå¤šæ¬¡ï¼Œæœ‰ä»€ä¹ˆæ›´å¥½çš„è§£å†³æ–¹æ¡ˆå—ï¼Ÿæ˜¯ä¸æ˜¯ä¸åº”è¯¥ä»è¿™ä¸ªè§’åº¦å»æƒ³ææ•ˆçš„é—®é¢˜ï¼Ÿå‡½æ•°çš„å¤šæ¬¡æ‰§è¡Œæ˜¯é¿å…ä¸äº†çš„ï¼Ÿ","like_count":1},{"had_liked":false,"id":303621,"user_name":"å“ˆå“ˆå“ˆ[åƒç“œ]","can_delete":false,"product_type":"c1","uid":2709931,"ip_address":"","ucode":"B17298B22A200F","user_header":"https://static001.geekbang.org/account/avatar/00/29/59/ab/1f6d9ad8.jpg","comment_is_top":false,"comment_ctime":1626880241,"is_pvip":false,"replies":[{"id":"110077","content":"ç†è§£å‡½æ•°ç»„ä»¶æœ‰ç‚¹åƒç†è§£æ˜¾ç¤ºå™¨çš„å·¥ä½œåŸç†ï¼Œä½ å¯ä»¥è®¤ä¸ºå‡½æ•°ç»„ä»¶çš„ä¸€æ¬¡æ‰§è¡Œå°±æ˜¯ä¸€æ¬¡å±å¹•çš„åˆ·æ–°é‡ç»˜ã€‚æˆ‘ä»¬è¦æ§åˆ¶çš„å°±æ˜¯ä½•æ—¶è§¦å‘åˆ·æ–°ã€‚<br><br>useEffect å¯ä»¥å†™å¤šä¸ªï¼Œä»è€ŒæŠŠå¤šä¸ªä¸šåŠ¡é€»è¾‘åˆ†å¼€æ¥ï¼Œæ¯ä¸€ä¸ªåšè‡ªå·±çš„äº‹æƒ…ã€‚<br><br>ä» jq è½¬è¿‡æ¥ï¼Œä¸»è¦å°±æ˜¯æŠŠ UI å®Œå…¨çœ‹æˆçŠ¶æ€é©±åŠ¨ã€‚","user_name":"ä½œè€…å›å¤","comment_id":303621,"uid":"1018676","ip_address":"","utype":1,"ctime":1627306109,"user_name_real":"Nate"}],"discussion_count":1,"race_medal":0,"score":"5921847537","product_id":100079901,"comment_content":"æ±‚æ•™ æˆ‘è¿˜æ˜¯å¯¹hookçš„æƒ³æ³•æœ‰ä¸€äº›ç–‘é—® ä¸»è¦æ˜¯å¼€å‘æ€æƒ³ä¸Š ä¹‹å‰ä¸€ç›´ç”¨jq æœ€è¿‘æ‰çœ‹react æ€»æ˜¯æ„Ÿè§‰æœ‰ç‚¹åˆ«æ‰­ã€‚<br><br>ç”¨hookçš„æ—¶å€™æ€»æ˜¯æƒ³ setStateäº†ä¹‹å å‡½æ•°å†è¿è¡Œä¸€éä¼šæœ‰ä»€ä¹ˆç»“æœ æ€»æ˜¯åœ¨è„‘è¡¥å‡½æ•°ç»„ä»¶å†…éƒ¨çš„è¿è¡Œé¡ºåº æ„Ÿè§‰ä¸€ç›´åœ¨å‡½æ•°ç»„ä»¶å†…éƒ¨æ‰“è½¬ã€‚<br><br>è“é»„å¯¹æ¯”é‚£ä¸ªå›¾ useEffectä¸ºä»€ä¹ˆè¦å†™ä¸¤ä¸ª <br><br>å¦å¤–æ€ä¹ˆèƒ½æ›´å¥½çš„ä»jqè¿™ç§å¯ä»¥å¾ˆç»†çš„å»æ“ä½œdmoçš„å¼€å‘æ€æƒ³ä¸Šè½¬å˜åˆ°reactä¸Šæ¥å‘¢ï¼Ÿ","like_count":1},{"had_liked":false,"id":301060,"user_name":"Levon","can_delete":false,"product_type":"c1","uid":1472097,"ip_address":"","ucode":"F112832F5FDC73","user_header":"https://static001.geekbang.org/account/avatar/00/16/76/61/33d13087.jpg","comment_is_top":false,"comment_ctime":1625499319,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"5920466615","product_id":100079901,"comment_content":"è€å¸ˆï¼Œreactç»„ä»¶åœ¨é¡µé¢åˆ‡æ¢æ—¶ï¼Œå¦‚æœé¡µé¢å®ä¾‹å·²ç»é”€æ¯åï¼Œæœ‰è¯·æ±‚è¿”å›å»æ‰§è¡Œäº†setStateï¼Œä¼šæŠ¥é”™ï¼Œè¿™ä¸ªé”™è¯¯æœ‰æœ€ä½³çš„å®è·µè§£å†³å—","like_count":1,"discussions":[{"author":{"id":2728170,"avatar":"","nickname":"é™ˆåº†ä¹‹","note":"","ucode":"0D8FB96037F475","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":387544,"discussion_content":"æŒ‚è½½æ—¶è®¾ç½®ä¸€ä¸ªæ ‡è¯†ï¼Œå¸è½½æ—¶æ”¹å˜è¿™ä¸ªæ ‡è¯†ï¼Œå¼‚æ­¥è¯·æ±‚æˆåŠŸå›è°ƒéœ€è¦setæ—¶åˆ¤æ–­ç»„ä»¶æ˜¯å¦é”€æ¯ã€‚å¯ä»¥å°è£…ä¸ºè‡ªå®šä¹‰hook. useSafeState\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628238239,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1038558,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/d8/de/712a2343.jpg","nickname":"ä¸€åƒå¹´çš„æ±¤","note":"","ucode":"930B4C9E435163","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":384295,"discussion_content":"åˆ‡æ¢å–æ¶ˆè¯·æ±‚ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626488874,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":295719,"user_name":"å°é¦‹çŒ«","can_delete":false,"product_type":"c1","uid":1387206,"ip_address":"","ucode":"9A4AF648E9D60E","user_header":"https://static001.geekbang.org/account/avatar/00/15/2a/c6/fab94c55.jpg","comment_is_top":false,"comment_ctime":1622557939,"is_pvip":false,"replies":[{"id":"107451","content":"ğŸ‘ğŸ»","user_name":"ä½œè€…å›å¤","comment_id":295719,"uid":"1018676","ip_address":"","utype":1,"ctime":1622727285,"user_name_real":"Nate"}],"discussion_count":1,"race_medal":0,"score":"5917525235","product_id":100079901,"comment_content":"å‡½æ•°ç»„ä»¶æ²¡æœ‰è‡ªå·±çš„stateåŠç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œhooksä½¿reactåœ¨å‡½æ•°ç»„ä»¶ä¸­å¯ä»¥ä½¿ç”¨stateå’Œç”Ÿå‘½å‘¨æœŸæ–¹æ³•ç§°ä¸ºå¯èƒ½ï¼Œhooksçš„æœ€å¤§çš„ä¼˜ç‚¹æ˜¯é€»è¾‘å¯å¤ç”¨ï¼Œ","like_count":1},{"had_liked":false,"id":351525,"user_name":"Andrew","can_delete":false,"product_type":"c1","uid":1856849,"ip_address":"","ucode":"B1598E1E447EC6","user_header":"https://static001.geekbang.org/account/avatar/00/1c/55/51/c7bffc64.jpg","comment_is_top":false,"comment_ctime":1657865124,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1657865124","product_id":100079901,"comment_content":"å‡½æ•°ç»„ä»¶æ²¡æœ‰ State, é€šè¿‡Hooksä½¿å¾—å‡½æ•°ç»„ä»¶èƒ½å¤Ÿæœ‰Stateï¼Œå…¶å®æ˜¯é€šè¿‡é—­åŒ…çš„æœºåˆ¶ä¿ç•™Stateå—ï¼Ÿ","like_count":0},{"had_liked":false,"id":351517,"user_name":"Andrew","can_delete":false,"product_type":"c1","uid":1856849,"ip_address":"","ucode":"B1598E1E447EC6","user_header":"https://static001.geekbang.org/account/avatar/00/1c/55/51/c7bffc64.jpg","comment_is_top":false,"comment_ctime":1657861169,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1657861169","product_id":100079901,"comment_content":"å¦‚æœæ˜¯å¤ç”¨çš„è¯ï¼Œé™¤äº†é«˜é˜¶ç»„ä»¶å¤–ï¼Œæ˜¯å¦è¿˜å¯ä»¥é‡‡ç”¨ç»§æ‰¿çš„æ–¹å¼? è¿™æ ·åœ¨å­ç±»ä¸­ä¹Ÿèƒ½å¤Ÿè°ƒç”¨çˆ¶ç±»å®šä¹‰çš„sizeæˆå‘˜<br>MyComponent extends WindowSizeComponent extends React.component","like_count":0},{"had_liked":false,"id":348577,"user_name":"åˆ˜é—¯","can_delete":false,"product_type":"c1","uid":3008249,"ip_address":"","ucode":"8A3761294FEE7B","user_header":"","comment_is_top":false,"comment_ctime":1655206006,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1655206006","product_id":100079901,"comment_content":"useWindowSizeæ˜¯ä¸æ˜¯å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªutilså‡½æ•°å‘¢ï¼Ÿå¦‚æœæ²¡æœ‰hooksï¼Œå¤–éƒ¨å¼•å…¥ä¸€ä¸ªutilså‡½æ•°è²Œä¼¼ä¹Ÿå¯ä»¥è§£å†³æ­¤é€»è¾‘å¤ç”¨çš„é—®é¢˜ã€‚","like_count":0},{"had_liked":false,"id":348257,"user_name":"JUST","can_delete":false,"product_type":"c1","uid":1039657,"ip_address":"","ucode":"F513793EBC0C06","user_header":"https://static001.geekbang.org/account/avatar/00/0f/dd/29/d2b5af6c.jpg","comment_is_top":false,"comment_ctime":1654907062,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1654907062","product_id":100079901,"comment_content":"è¿˜èƒ½æƒ³åˆ°çš„æœ‰ï¼šæµè§ˆå™¨å±æ€§ï¼ŒPCè¿˜æ˜¯ç§»åŠ¨ç«¯","like_count":0},{"had_liked":false,"id":339953,"user_name":"ä¸–ç•Œå¾ˆå¤§","can_delete":false,"product_type":"c1","uid":2598682,"ip_address":"","ucode":"FB18CBA94A89CE","user_header":"https://static001.geekbang.org/account/avatar/00/27/a7/1a/efb17bff.jpg","comment_is_top":false,"comment_ctime":1648483938,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1648483938","product_id":100079901,"comment_content":"è¯·æ•™ æœ€è¿‘å¼€å§‹ä½¿ç”¨hooksï¼Œæœ‰æ—¶éœ€è¦æ‰¹é‡æ›´æ–°å¤šä¸ªstateåæ‰è§¦å‘æŸæ®µé€»è¾‘ï¼Œè¿™ç”¨hooks è¯¥æ€ä¹ˆå¤„ç†å‘¢ï¼Œç±»ä¼¼setState çš„callbackï¼Ÿæ„Ÿè°¢ï½","like_count":0},{"had_liked":false,"id":333694,"user_name":"è‚é¹","can_delete":false,"product_type":"c1","uid":1005479,"ip_address":"","ucode":"98AA4D9E9BF9F1","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJQLfPbnibuQwaXIgyr3hxUdVAuaZfsn4pjic3lDvUmlpfPqvMJ2aSfetI18lKpRyzLuIbYeY2K15ibg/132","comment_is_top":false,"comment_ctime":1644476366,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1644476366","product_id":100079901,"comment_content":"é«˜é˜¶ç»„ä»¶åŠ è£…é¥°å™¨æ¨¡å¼","like_count":0},{"had_liked":false,"id":333670,"user_name":"å…¶å®","can_delete":false,"product_type":"c1","uid":1540172,"ip_address":"","ucode":"E63B588D7609AD","user_header":"https://static001.geekbang.org/account/avatar/00/17/80/4c/4090e19d.jpg","comment_is_top":false,"comment_ctime":1644465427,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1644465427","product_id":100079901,"comment_content":"ä¸ºä»€ä¹ˆè¯´ å‡½æ•°ç»„ä»¶æ— æ³•å­˜åœ¨å†…éƒ¨çŠ¶æ€å‘¢ï¼Œç›´æ¥å®šä¹‰ä¸€ä¸ªconst stateåœ¨å‡½æ•°ç»„ä»¶ä¸­ä½¿ç”¨ï¼Œå’Œclassçš„this.stateæœ‰ä»€ä¹ˆåŒºåˆ«å‘¢","like_count":0},{"had_liked":false,"id":331849,"user_name":"å¹¼å„¿å›­å›­é•¿","can_delete":false,"product_type":"c1","uid":2425048,"ip_address":"","ucode":"CB1731B3060D9A","user_header":"https://static001.geekbang.org/account/avatar/00/25/00/d8/e1132b1c.jpg","comment_is_top":false,"comment_ctime":1642833404,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1642833404","product_id":100079901,"comment_content":"ä¸¥æ ¼æ„ä¹‰ä¸Šæ¥è¯´ï¼ˆï¼‰=&gt; {return Math.random()} å¹¶ä¸æ˜¯ä¸€ä¸ªçº¯å‡½æ•°ï¼Œå› ä¸ºçº¯å‡½æ•°çš„ç»“æœæ˜¯ç¡®å®šè¾“å…¥çš„æƒ…å†µä¸‹å…·æœ‰ç¡®å®šè¾“å‡ºï¼Œä½†æ˜¯è¿™ç§ç”¨æ³•åœ¨æ—©æœŸreactä¸­æ˜¯è¢«å…è®¸çš„","like_count":0},{"had_liked":false,"id":318130,"user_name":"ht","can_delete":false,"product_type":"c1","uid":2463655,"ip_address":"","ucode":"44A3103588D500","user_header":"https://static001.geekbang.org/account/avatar/00/25/97/a7/ee26b781.jpg","comment_is_top":false,"comment_ctime":1635158212,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1635158212","product_id":100079901,"comment_content":"è€å¸ˆï¼Œreact hooksç®—æ˜¯ä¸€ä¸ªé—­åŒ…å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1195144,"avatar":"https://static001.geekbang.org/account/avatar/00/12/3c/88/6bef27d6.jpg","nickname":"å¤§ç¥åšå£«","note":"","ucode":"8C4318095949F0","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":551189,"discussion_content":"Javascript å‡½æ•°æ˜¯é—­åŒ…çš„ï¼Œåªæ˜¯ä½œä¸ºä¸€èˆ¬å‡½æ•°ï¼Œæˆ‘ä»¬ä¸ä¼šå»è®¨è®ºè€Œå·²ï¼Œæ™®é€šå‡½æ•°å°±æ˜¯é—­åŒ…äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644921271,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1922965,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/57/95/20812ff4.jpg","nickname":"iVan","note":"","ucode":"E5D363BF05B695","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":410691,"discussion_content":"ç®—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635759603,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":314798,"user_name":"ggbdpq","can_delete":false,"product_type":"c1","uid":2585019,"ip_address":"","ucode":"70BCCBA6245B8D","user_header":"https://static001.geekbang.org/account/avatar/00/27/71/bb/d219f46b.jpg","comment_is_top":false,"comment_ctime":1633440813,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1633440813","product_id":100079901,"comment_content":"å¯¹äºå¯ä»¥ä½œä¸ºReactç»„ä»¶çš„æ•°æ®æºï¼Œæˆ‘å°±æƒ³åˆ°äº†ä¸¤ä¸ªã€‚å› ä¸ºå·¥ä½œä¸‰ä¸ªæœˆåªåšäº†ä¸€ä¸ªè´¢åŠ¡ç®¡ç†ç³»ç»Ÿçš„å®é™…é¡¹ç›®ï¼Œé™¤äº†æ§åˆ¶ç»„ä»¶çš„æ˜¾ç¤ºä¸å¦ï¼ˆè®¾ç½®ä¸€ä¸ªå˜é‡æ¥æ¥æ”¶é»˜è®¤çš„trueæˆ–è€…flaseï¼Œæˆ–è€…åŠ è½½çŠ¶æ€ï¼‰ï¼Œè¿˜æœ‰å°±æ˜¯å‘é€å¼‚æ­¥è¯·æ±‚ï¼Œæ¥æ”¶åå°æ¥å£è¿”å›çš„æ•°æ®ï¼Œæš‚æ—¶æƒ³åˆ°äº†è¿™ä¸¤ä¸ªã€‚","like_count":0},{"had_liked":false,"id":313492,"user_name":"arronK","can_delete":false,"product_type":"c1","uid":1192961,"ip_address":"","ucode":"58DC6FBF2CF0C1","user_header":"https://static001.geekbang.org/account/avatar/00/12/34/01/30ca98e6.jpg","comment_is_top":false,"comment_ctime":1632464032,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1632464032","product_id":100079901,"comment_content":"åŸæ¥ Hooks çš„æ¥é¾™å»è„‰åœ¨è¿™å„¿ã€‚class ç»„ä»¶çš„æ–¹å¼å®é™…å¹¶ä¸ä¼šåº”ç”¨åˆ° class çœŸæ­£çš„èƒ½åŠ›ï¼ŒReact ç»„ä»¶çš„æ€æƒ³ä¹Ÿå¹¶é OOP çš„æ€æƒ³ï¼Œè€Œæ˜¯ç±»ä¼¼å‡½æ•°çš„æ€æƒ³ React(state) = UI ã€‚<br><br>æ—©æœŸçš„é—®é¢˜åœ¨äºçº¯å‡½æ•°å¹¶ä¸èƒ½æ‹¥æœ‰è‡ªå·±çš„çŠ¶æ€æ•°æ®ï¼Œæ‰€ä»¥é€‰æ‹© classï¼Œè€Œ class ä½¿ç”¨è¿‡ç¨‹ä¸­ä¹Ÿç¡®å®æš´éœ²äº†å¾ˆå¤šé—®é¢˜ã€‚è€Œå½“ Hooks çš„å¼•å…¥è®©å‡½æ•°æ‹¥æœ‰è‡ªå·±çš„çŠ¶æ€åï¼Œç”¨å‡½æ•°å¼ç¼–å†™ React ç»„ä»¶çš„æ–¹å¼å°±æ˜¾å¾—æ›´åŠ æ¸…æ™°äº†ï¼Œä¸”èƒ½æ›´å¥½çš„åšé€»è¾‘å¤ç”¨å’Œå…³æ³¨ç‚¹çš„åˆ†ç¦»ã€‚ç¡®å®æ˜¯å¾ˆä¼˜ç§€çš„è®¾è®¡ã€‚","like_count":0},{"had_liked":false,"id":297836,"user_name":"GK","can_delete":false,"product_type":"c1","uid":2293871,"ip_address":"","ucode":"A332094D6A7C99","user_header":"","comment_is_top":false,"comment_ctime":1623808070,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1623808070","product_id":100079901,"comment_content":"è€å¸ˆï¼Œè¯·é—®ã€ŒReact ç¤¾åŒºæ›¾ç”¨ä¸€å¼ å›¾ç›´è§‚åœ°å±•ç°äº†å¯¹æ¯”ç»“æœã€è¿™ä¸ªå›¾æ˜¯æ¥æºå“ªé‡Œçš„ï¼Ÿæœ‰ä¸ªç–‘é—®ç¬¬ä¸€ä¸ª useEffect ä¸å†™æ˜ä¾èµ–  name surname ä¹ˆï¼Ÿ","like_count":0},{"had_liked":false,"id":297208,"user_name":"Torres_07","can_delete":false,"product_type":"c1","uid":1086692,"ip_address":"","ucode":"737E002669834C","user_header":"https://static001.geekbang.org/account/avatar/00/10/94/e4/528de862.jpg","comment_is_top":false,"comment_ctime":1623377261,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1623377261","product_id":100079901,"comment_content":"è®ºæ–‡æ­£åœ¨å†™çš„å°±æ˜¯classåˆ°hooksçš„é‡æ„ï¼Œé‡ç‚¹æ”¾åœ¨äº†é‡æ„åçš„ç»„ä»¶çŠ¶æ€ç®¡ç†ï¼Œæœ€åçš„ç»“æœclassåˆhooksç»„ä»¶æ•°æ®å¯¹æ¯”ä¸Šæƒ³æ¥æƒ³å»åªæœ‰ä»£ç è¡Œæ•°å¯ä»¥ç›´è§‚çš„è¿›è¡Œå¯¹æ¯”ï¼Œè€å¸ˆæœ‰ä»€ä¹ˆæƒ³æ³•å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":296722,"user_name":"ç›¼ç›¼","can_delete":false,"product_type":"c1","uid":1517650,"ip_address":"","ucode":"BF3AABFFEB4F41","user_header":"https://static001.geekbang.org/account/avatar/00/17/28/52/cbe829cb.jpg","comment_is_top":false,"comment_ctime":1623131640,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1623131640","product_id":100079901,"comment_content":"ä¹‹å‰ç”¨classå°è£…é«˜é˜¶ç»„ä»¶å®ç°å¤ç”¨ï¼Œä¸€ç›´è®©æˆ‘è§‰å¾—ç‰¹åˆ«éš¾ç†è§£ï¼Œè°ƒè¯•ä¸æ–¹ä¾¿ï¼Œæœ‰äº†hooksä¹‹åç”¨èµ·æ¥å¥½èˆ’æœ","like_count":0},{"had_liked":false,"id":296265,"user_name":"é™¶ä½³ä½³","can_delete":false,"product_type":"c1","uid":2649341,"ip_address":"","ucode":"650FA8DE051B1C","user_header":"https://static001.geekbang.org/account/avatar/00/28/6c/fd/0c5c254e.jpg","comment_is_top":false,"comment_ctime":1622868139,"is_pvip":false,"replies":[{"id":"107746","content":"ç®€å•æ¥è¯´ï¼Œç»„åˆè®©ç»„ä»¶äº¤äº’æ–¹å¼æ›´åŠ ç®€å•ï¼Œåªæœ‰ propsã€‚è€Œç»§æ‰¿åˆ™æ¯”è¾ƒå¤æ‚ï¼Œå› ä¸ºå­˜åœ¨çˆ¶æ–¹æ³•è°ƒç”¨æˆ–è€…è¦†ç›–ç­‰åœºæ™¯ã€‚ä¸è¿‡å› ä¸ºç°åœ¨éƒ½æ˜¯å‡½æ•°ç»„ä»¶ï¼Œæ‰€ä»¥å°±ä¸€å®šæ˜¯ç»„åˆçš„æ–¹å¼äº†~ ","user_name":"ä½œè€…å›å¤","comment_id":296265,"uid":"1018676","ip_address":"","utype":1,"ctime":1623081895,"user_name_real":"Nate"}],"discussion_count":1,"race_medal":0,"score":"1622868139","product_id":100079901,"comment_content":"æ‚¨å¥½ï¼Œè€å¸ˆï¼Œæˆ‘æƒ³å’¨è¯¢ä¸€ä¸‹ï¼Œç»„åˆå’Œç»§æ‰¿çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ","like_count":0},{"had_liked":false,"id":296198,"user_name":"å¯‡äº‘","can_delete":false,"product_type":"c1","uid":1001332,"ip_address":"","ucode":"87181F16F83543","user_header":"https://static001.geekbang.org/account/avatar/00/0f/47/74/5e292ded.jpg","comment_is_top":false,"comment_ctime":1622800837,"is_pvip":false,"replies":[{"id":"107741","content":"ğŸ‘ğŸ»","user_name":"ä½œè€…å›å¤","comment_id":296198,"uid":"1018676","ip_address":"","utype":1,"ctime":1623081306,"user_name_real":"Nate"}],"discussion_count":1,"race_medal":0,"score":"1622800837","product_id":100079901,"comment_content":"å®šæ—¶å™¨ï¼Œç›‘å¬æ»šåŠ¨ï¼Œé”®ç›˜äº‹ä»¶ï¼Œå¤ç”¨Fetchã€‚","like_count":0},{"had_liked":false,"id":295834,"user_name":"Ada","can_delete":false,"product_type":"c1","uid":1565813,"ip_address":"","ucode":"C52BDD0DBF618D","user_header":"https://static001.geekbang.org/account/avatar/00/17/e4/75/57809f30.jpg","comment_is_top":false,"comment_ctime":1622615501,"is_pvip":false,"replies":[{"id":"107458","content":"æ˜¯çš„ï¼Œçˆ¶ç»„ä»¶ä¼ è¿‡æ¥çš„å°±æ˜¯ propsã€‚props å˜äº†ä¹Ÿä¼šé‡æ–°æ¸²æŸ“ã€‚","user_name":"ä½œè€…å›å¤","comment_id":295834,"uid":"1018676","ip_address":"","utype":1,"ctime":1622727533,"user_name_real":"Nate"}],"discussion_count":1,"race_medal":0,"score":"1622615501","product_id":100079901,"comment_content":"æ•°æ®æºï¼Œçˆ¶ç»„ä»¶ä¼ é€’ä¸‹æ¥çš„ä¹Ÿæ˜¯å§ï¼Ÿ","like_count":0},{"had_liked":false,"id":295534,"user_name":"å¸…æ°”å°ç†ŠçŒ«","can_delete":false,"product_type":"c1","uid":1022199,"ip_address":"","ucode":"88FE6B57F55063","user_header":"https://static001.geekbang.org/account/avatar/00/0f/98/f7/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1622465758,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1622465758","product_id":100079901,"comment_content":"pathname  æœ€è¿‘éœ€æ±‚é‡Œå°±ç”¨åˆ°äº†","like_count":0},{"had_liked":false,"id":295224,"user_name":"L","can_delete":false,"product_type":"c1","uid":1228268,"ip_address":"","ucode":"26BB686671F7D4","user_header":"https://static001.geekbang.org/account/avatar/00/12/bd/ec/cc7abf0b.jpg","comment_is_top":false,"comment_ctime":1622304184,"is_pvip":true,"replies":[{"id":"107183","content":"æ˜¯çš„ï¼Œç»„åˆæ›´é€‚åˆ React ç»„ä»¶~","user_name":"ä½œè€…å›å¤","comment_id":295224,"uid":"1018676","ip_address":"","utype":1,"ctime":1622362401,"user_name_real":"Nate"}],"discussion_count":1,"race_medal":0,"score":"1622304184","product_id":100079901,"comment_content":"ç»„åˆå¤§äºç»§æ‰¿ï¼Œç‰¹åˆ«æ˜¯å¯¹ç»„ä»¶è¿™ç§å¤§éƒ¨åˆ†éƒ½æ˜¯ç»„åˆè€Œæˆçš„å†…å®¹æ¥è¯´å°±æ›´æ˜¯è¿™ä¸ªæ ·å­äº†","like_count":0},{"had_liked":false,"id":294898,"user_name":"Forest","can_delete":false,"product_type":"c1","uid":1707743,"ip_address":"","ucode":"B75CB4919FF25A","user_header":"https://static001.geekbang.org/account/avatar/00/1a/0e/df/a64b3146.jpg","comment_is_top":false,"comment_ctime":1622125402,"is_pvip":false,"replies":[{"id":"107106","content":"æ²¡é”™ï¼","user_name":"ä½œè€…å›å¤","comment_id":294898,"uid":"1018676","ip_address":"","utype":1,"ctime":1622189329,"user_name_real":"Nate"}],"discussion_count":1,"race_medal":0,"score":"1622125402","product_id":100079901,"comment_content":"é€»è¾‘å¤ç”¨åº”è¯¥æ˜¯hookçš„æœ€å¤§ä¼˜ç‚¹å§","like_count":0},{"had_liked":false,"id":294724,"user_name":"Geeker","can_delete":false,"product_type":"c1","uid":1032345,"ip_address":"","ucode":"9937127DE96D78","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c0/99/259a412f.jpg","comment_is_top":false,"comment_ctime":1622074110,"is_pvip":true,"replies":[{"id":"107046","content":"ä¸é”™å“ˆ~","user_name":"ä½œè€…å›å¤","comment_id":294724,"uid":"1018676","ip_address":"","utype":1,"ctime":1622118600,"user_name_real":"Nate"}],"discussion_count":1,"race_medal":0,"score":"1622074110","product_id":100079901,"comment_content":"åŠ æ·±äº†æˆ‘å¯¹ hooks çš„ç†è§£","like_count":0}]]}