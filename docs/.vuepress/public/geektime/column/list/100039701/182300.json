{"id":182300,"title":"19 | a + bï¼šåŠ¨æ€ç±»å‹æ˜¯ç¾éš¾ä¹‹æºè¿˜æ˜¯æœ€å¥½çš„ç‰¹æ€§ï¼Ÿï¼ˆä¸‹ï¼‰","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯å‘¨çˆ±æ°‘ã€‚</p><p>ä¸Šä¸€è®²ï¼Œæˆ‘ä»¬è¯´åˆ°å¦‚ä½•å°†å¤æ‚çš„ç±»å‹è½¬æ¢ç¼©å‡åˆ°ä¸¤æ¡ç®€å•çš„è§„åˆ™ï¼Œä»¥åŠä¸¤ç§ä¸»è¦ç±»å‹ã€‚è¿™ä¸¤æ¡ç®€å•è§„åˆ™æ˜¯ï¼š</p><ol>\n<li>ä»å€¼xåˆ°å¼•ç”¨ï¼šè°ƒç”¨Object(x)å‡½æ•°ã€‚</li>\n<li>ä»å¼•ç”¨xåˆ°å€¼ï¼šè°ƒç”¨x.valueOf()æ–¹æ³•ï¼›æˆ–ï¼Œè°ƒç”¨å››ç§å€¼ç±»å‹çš„åŒ…è£…ç±»å‡½æ•°ï¼Œä¾‹å¦‚Number(x)ï¼Œæˆ–è€…String(x)ç­‰ç­‰ã€‚</li>\n</ol><p>ä¸¤ç§ä¸»è¦ç±»å‹åˆ™æ˜¯<strong>å­—ç¬¦ä¸²</strong>å’Œ<strong>æ•°å­—å€¼</strong>ã€‚</p><p>å½“ç±»å‹è½¬æ¢ç³»ç»Ÿè¢«ç¼©å‡æˆè¿™æ ·ä¹‹åï¼Œæœ‰äº›é—®é¢˜å°±å˜å¾—å¥½è§£é‡Šäº†ï¼Œä½†ä¹Ÿç¡®å®æœ‰äº›é—®é¢˜å˜å¾—æ›´åŠ éš¾è§£ã€‚ä¾‹å¦‚@graybernhardt åœ¨è®²æ¼”ä¸­æå‡ºçš„çµé­‚å‘é—®ï¼Œå°±æ˜¯ï¼š</p><ul>\n<li>å¦‚æœå°†æ•°ç»„è·Ÿå¯¹è±¡ç›¸åŠ ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</li>\n</ul><p>å¦‚æœä½ å¿˜äº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ä¸€èµ·æ¥å›é¡¾ä¸€ä¸‹è¿™å››ä¸ªç›´å‡»ä½ çµé­‚æ·±å¤„çš„ç¤ºä¾‹ï¼Œç®€å•åœ°è¯´ï¼Œè¿™äº›ç¤ºä¾‹å°±æ˜¯â€œæ•°ç»„ä¸å¯¹è±¡â€ç›¸åŠ çš„å››ç§æƒ…å†µï¼Œç»“æœéƒ½å®Œå…¨ä¸åŒã€‚</p><pre><code>&gt; [] + {}\n'[object Object]'\n\n&gt; {} + []\n0\n\n&gt; {} + {}\nNaN\n\n&gt; [] + []\n''\n</code></pre><p>è€Œè¿™ä¸ªé—®é¢˜ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸¤è®²çš„æ ‡é¢˜ä¸­â€œa + bâ€è¿™ä¸ªè¡¨è¾¾å¼çš„ç”±æ¥ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚ä½•å‡†ç¡®åœ°è§£é‡Šâ€œä¸¤ä¸ªæ“ä½œæ•°ç›¸åŠ â€ï¼Œä¸å¦‚ä½•å…¨é¢ç†è§£JavaScriptçš„ç±»å‹ç³»ç»Ÿçš„è½¬æ¢è§„åˆ™ï¼Œå…³ç³»åŒªæµ…ï¼</p><h2>é›†ä¸­ç²¾åŠ›åŠå¤§äº‹</h2><p>ä¸€èˆ¬æ¥è¯´ï¼Œè¿ç®—ç¬¦å¾ˆå®¹æ˜“çŸ¥é“æ“ä½œæ•°çš„ç±»å‹ï¼Œä¾‹å¦‚â€œa - bâ€ä¸­çš„å‡å·ï¼Œæˆ‘ä»¬ä¸€çœ‹å°±çŸ¥é“æ„å›¾ï¼Œæ˜¯ä¸¤ä¸ªæ•°å€¼æ±‚å·®ï¼Œæ‰€ä»¥aå’Œbéƒ½åº”è¯¥æ˜¯æ•°å€¼ï¼›åˆä¾‹å¦‚â€œobj.xâ€ä¸­çš„ç‚¹å·ï¼Œæˆ‘ä»¬ä¸€çœ‹ä¹ŸçŸ¥é“ï¼Œæ˜¯å–<strong>å¯¹è±¡obj</strong>çš„å±æ€§å<strong>å­—ç¬¦ä¸²x</strong>ã€‚</p><!-- [[[read_end]]] --><p>å½“éœ€è¦å¼•æ“â€œæ¨æ–­ç›®çš„â€æ—¶ï¼ŒJavaScriptè®¾å®šæ¨æ–­ç»“æœå¿…ç„¶æ˜¯ä¸‰ç§åŸºç¡€å€¼ï¼ˆbooleanã€numberå’Œstringï¼‰ã€‚ç”±äºå…¶ä¸­çš„booleanæ˜¯é€šè¿‡æŸ¥è¡¨æ¥è¿›è¡Œçš„ï¼Œæ‰€ä»¥å°±åªå‰©ä¸‹äº†numberå’Œstringç±»å‹éœ€è¦â€œè‡ªåŠ¨åœ°ã€éšå¼åœ°è½¬æ¢â€ã€‚</p><p>ä½†æ˜¯åœ¨JavaScriptä¸­ï¼Œâ€œåŠ å·ï¼ˆ+ï¼‰â€æ˜¯ä¸€ä¸ªéå¸¸ç‰¹åˆ«çš„è¿ç®—ç¬¦ã€‚åƒä¸Šé¢é‚£æ ·ç®€å•çš„åˆ¤æ–­ï¼Œåœ¨åŠ å·ï¼ˆ+ï¼‰ä¸Šé¢å°±ä¸è¡Œï¼Œå› ä¸ºå®ƒåœ¨JavaScriptä¸­æ—¢å¯èƒ½æ˜¯å­—ç¬¦ä¸²è¿ç»“ï¼Œä¹Ÿå¯èƒ½æ˜¯æ•°å€¼æ±‚å’Œã€‚å¦å¤–è¿˜æœ‰ä¸€ä¸ªä¸æ­¤ç›¸å…³çš„æƒ…å†µï¼Œå°±æ˜¯<code>object[x]</code>ä¸­çš„<code>x</code>ï¼Œå…¶å®ä¹Ÿå¾ˆéš¾æ˜ç¡®åœ°è¯´å®ƒæ˜¯å­—ç¬¦ä¸²è¿˜æ˜¯æ•°å€¼ã€‚å› ä¸ºè®¡ç®—å±æ€§ï¼ˆcomputed propertyï¼‰çš„åå­—å¹¶ä¸èƒ½ç¡®å®šæ˜¯å­—ç¬¦ä¸²è¿˜æ˜¯æ•°å€¼ï¼›å°¤å…¶æ˜¯ç°åœ¨ï¼Œå®ƒè¿˜å¯èƒ½æ˜¯ç¬¦å·ç±»å‹ï¼ˆsymbolï¼‰ã€‚</p><blockquote>\n<p>NOTEï¼šåœ¨è®¨è®ºè®¡ç®—å±æ€§åï¼ˆcomputed property nameï¼‰æ—¶ï¼ŒJavaScriptå°†å®ƒä½œä¸ºé¢„æœŸä¸ºå­—ç¬¦ä¸²çš„ä¸€ä¸ªå€¼æ¥å¤„ç†ï¼Œå³<code>r = ToPrimitive(x, String)</code>ã€‚ä½†æ˜¯è¿™ä¸ªè½¬æ¢çš„ç»“æœä»ç„¶å¯èƒ½æ˜¯5ç§å€¼ç±»å‹ä¹‹ä¸€ï¼Œå› æ­¤åœ¨å¾—åˆ°æœ€ç»ˆå±æ€§åçš„æ—¶å€™ï¼ŒJavaScriptè¿˜ä¼šå†è°ƒç”¨ä¸€æ¬¡<code>ToString(r)</code>ã€‚</p>\n</blockquote><p>ç”±äºâ€œåŠ å·ï¼ˆ+ï¼‰â€ä¸èƒ½é€šè¿‡ä»£ç å­—é¢æ¥åˆ¤æ–­æ„å›¾ï¼Œå› æ­¤åªèƒ½åœ¨è¿ç®—è¿‡ç¨‹ä¸­å®æ—¶åœ°æ£€æŸ¥æ“ä½œæ•°çš„ç±»å‹ã€‚å¹¶ä¸”ï¼Œè¿™äº›ç±»å‹æ£€æŸ¥éƒ½å¿…é¡»æ˜¯åŸºäºâ€œåŠ å·ï¼ˆ+ï¼‰è¿ç®—å¿…ç„¶æ“ä½œä¸¤ä¸ªå€¼æ•°æ®â€è¿™ä¸ªå‡è®¾æ¥è¿›è¡Œã€‚äºæ˜¯ï¼ŒJavaScriptä¼šå…ˆè°ƒç”¨<code>ToPrimitive()</code>å†…éƒ¨æ“ä½œæ¥åˆ†åˆ«å¾—åˆ°â€œaå’Œbä¸¤ä¸ªæ“ä½œæ•°â€å¯èƒ½çš„åŸå§‹å€¼ç±»å‹ã€‚</p><p>æ‰€ä»¥ï¼Œé—®é¢˜å°±åˆå›åˆ°äº†åœ¨ä¸Šé¢è®²çš„<code>Value vs. Primitive values</code>è¿™ä¸ªä¸œè¥¿ä¸Šé¢ã€‚å¯¹è±¡åˆ°åº•ä¼šè½¬æ¢æˆä»€ä¹ˆï¼Ÿè¿™ä¸ªè½¬æ¢è¿‡ç¨‹æ˜¯å¦‚ä½•å†³å®šçš„å‘¢ï¼Ÿ</p><p>è¿™ä¸ªè¿‡ç¨‹åŒ…æ‹¬å¦‚ä¸‹çš„å››ä¸ªæ­¥éª¤ã€‚</p><h3>æ­¥éª¤ä¸€</h3><p>é¦–å…ˆï¼ŒJavaScriptçº¦å®šï¼šå¦‚æœ<code>x</code>åŸæœ¬å°±æ˜¯åŸå§‹å€¼ï¼Œé‚£ä¹ˆ<code>ToPrimitive(x)</code>è¿™ä¸ªæ“ä½œç›´æ¥å°±è¿”å›<code>x</code>æœ¬èº«ã€‚è¿™ä¸ªå¾ˆå¥½ç†è§£ï¼Œå› ä¸ºå®ƒä¸éœ€è¦è½¬æ¢ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ˆå¦‚ä¸‹ä»£ç æ˜¯ä¸èƒ½ç›´æ¥æ‰§è¡Œçš„ï¼‰ï¼š</p><pre><code># 1. å¦‚æœxæ˜¯éå¯¹è±¡ï¼Œåˆ™è¿”å›x\n&gt; _ToPrimitive(5)\n5\n</code></pre><h3>æ­¥éª¤äºŒ</h3><p>æ¥ä¸‹æ¥çš„çº¦å®šæ˜¯ï¼šå¦‚æœ<code>x</code>æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä¸”å®ƒæœ‰å¯¹åº”çš„äº”ç§<code>PrimitiveValue</code>å†…éƒ¨æ§½ä¹‹ä¸€ï¼Œé‚£ä¹ˆå°±ç›´æ¥è¿”å›è¿™ä¸ªå†…éƒ¨æ§½ä¸­çš„åŸå§‹å€¼ã€‚ç”±äºè¿™äº›å¯¹è±¡çš„<code>valueOf()</code>å°±å¯ä»¥è¾¾æˆè¿™ä¸ªç›®çš„ï¼Œå› æ­¤è¿™ç§æƒ…å†µä¸‹ä¹Ÿå°±æ˜¯ç›´æ¥è°ƒç”¨è¯¥æ–¹æ³•ï¼ˆæ­¥éª¤ä¸‰ï¼‰ã€‚ç›¸å½“äºå¦‚ä¸‹ä»£ç ï¼š</p><pre><code># 2. å¦‚æœxæ˜¯å¯¹è±¡ï¼Œåˆ™å°è¯•å¾—åˆ°ç”±x.valueOf()è¿”å›çš„åŸå§‹å€¼\n&gt; Object(5).valueOf()\n5\n</code></pre><p>ä½†æ˜¯åœ¨å¤„ç†è¿™ä¸ªçº¦å®šçš„æ—¶å€™ï¼ŒJavaScriptæœ‰ä¸€é¡¹ç‰¹åˆ«çš„è®¾å®šï¼Œå°±æ˜¯å¯¹â€œå¼•æ“æ¨æ–­ç›®çš„â€è¿™ä¸€è¡Œä¸ºåšä¸€ä¸ªé¢„è®¾ã€‚å¦‚æœæŸä¸ªè¿ç®—æ²¡æœ‰é¢„è®¾ç›®çš„ï¼Œè€ŒJavaScriptä¹Ÿä¸èƒ½æ¨æ–­ç›®çš„ï¼Œé‚£ä¹ˆJavaScriptå°±ä¼šå¼ºåˆ¶å°†è¿™ä¸ªé¢„è®¾ä¸ºâ€œnumberâ€ï¼Œå¹¶è¿›å…¥â€œä¼ ç»Ÿçš„â€ç±»å‹è½¬æ¢é€»è¾‘ï¼ˆæ­¥éª¤å››ï¼‰ã€‚</p><p>æ‰€ä»¥ï¼Œç®€å•åœ°è¯´ï¼ˆ<strong>è¿™æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„ç»“è®º</strong>ï¼‰ï¼š</p><p><span class=\"orange\">å¦‚æœä¸€ä¸ªè¿ç®—æ— æ³•ç¡®å®šç±»å‹ï¼Œé‚£ä¹ˆåœ¨ç±»å‹è½¬æ¢å‰ï¼Œå®ƒçš„è¿ç®—æ•°å°†è¢«é¢„è®¾ä¸ºnumberã€‚</span></p><blockquote>\n<p>NOTE1ï¼šé¢„è®¾ç±»å‹åœ¨ECMAScriptç§°ä¸ºPreferredTypeï¼Œå®ƒå¯ä»¥ä¸ºundefinedæˆ–\"default\"ã€‚ä½†æ˜¯â€œdefaultâ€å€¼æ˜¯â€œä¼ ç»Ÿçš„â€ç±»å‹è½¬æ¢é€»è¾‘æ‰€ä¸èƒ½å¤„ç†çš„ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼ŒJavaScriptä¼šå…ˆå°†å®ƒé‡ç½®ä¸ºâ€œnumberâ€ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ä¼ ç»Ÿçš„è½¬æ¢æ¨¡å¼ä¸­ï¼Œâ€œnumberâ€æ˜¯ä¼˜å…ˆçš„ã€‚<br>\nNOTE2ï¼šäº‹å®ä¸Šï¼Œåªæœ‰å¯¹è±¡çš„ç¬¦å·å±æ€§Symbol.toPrimitiveæ‰€è®¾ç½®çš„å‡½æ•°æ‰ä¼šè¢«è¦æ±‚å¤„ç†â€œdefaultâ€è¿™ä¸ªé¢„è®¾ã€‚è¿™ä¹Ÿæ˜¯åœ¨Proxy/Reflectä¸­å¹¶æ²¡æœ‰ä¸ç±»å‹è½¬æ¢ç›¸å…³çš„é™·é˜±æˆ–æ–¹æ³•çš„åŸå› ã€‚</p>\n</blockquote><p>äºæ˜¯ï¼Œè¿™é‡Œä¼šå‘ç”Ÿä¸¤ç§æƒ…å†µï¼Œä¹Ÿå°±æ˜¯æ¥ä¸‹æ¥çš„æ­¥éª¤ä¸‰å’Œæ­¥éª¤å››ã€‚</p><h3>æ­¥éª¤ä¸‰ï¼šä½œä¸ºåŸå§‹å€¼å¤„ç†</h3><p>å¦‚æœæ˜¯ä¸Šè¿°çš„äº”ç§åŒ…è£…ç±»çš„å¯¹è±¡å®ä¾‹ï¼ˆå®ƒä»¬æœ‰äº”ç§<code>PrimitiveValue</code>å†…éƒ¨æ§½ä¹‹ä¸€ï¼‰ï¼Œé‚£ä¹ˆå®ƒä»¬çš„<code>valueOf()</code>æ–¹æ³•æ€»æ˜¯ä¼šå¿½ç•¥æ‰â€œnumberâ€è¿™æ ·çš„é¢„è®¾ï¼Œå¹¶è¿”å›å®ƒä»¬å†…éƒ¨ç¡®å®šï¼ˆå³å†…éƒ¨æ§½ä¸­æ‰€ä¿ç•™çš„ï¼‰çš„åŸå§‹å€¼ã€‚</p><p>æ‰€ä»¥ï¼Œå¦‚æœæˆ‘ä»¬ä¸ºç¬¦å·åˆ›å»ºä¸€ä¸ªå®ƒçš„åŒ…è£…ç±»å¯¹è±¡å®ä¾‹ï¼Œé‚£ä¹ˆä¹Ÿå¯ä»¥åœ¨è¿™ç§æƒ…å†µä¸‹è§£å‡ºå®ƒçš„å€¼ã€‚ä¾‹å¦‚ï¼š</p><pre><code>&gt; x = Symbol()\n\n&gt; obj = Object(x)\n\n&gt; obj.valueOf() === x\ntrue\n</code></pre><p>æ­£æ˜¯å› ä¸ºå¯¹è±¡ï¼ˆå¦‚æœå®ƒæ˜¯åŸå§‹å€¼çš„åŒ…è£…ç±»ï¼‰ä¸­çš„åŸå§‹å€¼æ€»æ˜¯è¢«è§£å‡ºæ¥ï¼Œæ‰€ä»¥ï¼Œä½ è¦å°†æ•°å­—å€¼<code>5</code>è½¬æ¢æˆä¸¤ä¸ªå¯¹è±¡ç±»å‹ï¼Œå¹¶ä¸”å†å°†è¿™ä¸¤ä¸ªå¯¹è±¡ç›¸åŠ ï¼Œé‚£ä¹ˆå…¶ç»“æœä¹Ÿä¼šæ˜¯æ•°å€¼10ã€‚</p><pre><code>&gt; Object(5) + Object(5)\n10\n</code></pre><p>è¿™ä¸ªä»£ç çœ‹èµ·æ¥æ˜¯ä¸¤ä¸ªå¯¹è±¡â€œç›¸åŠ â€ï¼Œä½†æ˜¯å´ç­‰æ•ˆäºå®ƒä»¬çš„åŸå§‹å€¼ç›´æ¥ç›¸åŠ ã€‚</p><p>ä½†æ˜¯å¦‚æœè€ƒè™‘â€œå¯¹è±¡å±æ€§å­˜å–â€è¿™æ ·çš„ä¾‹å­æƒ…å†µå°±å‘ç”Ÿäº†å˜åŒ–ï¼Œç”±äºâ€œå¯¹è±¡å±æ€§å­˜å–â€æ˜¯ä¸€ä¸ªâ€œæœ‰é¢„æœŸâ€çš„è¿ç®—â€”â€”å®ƒçš„é¢„æœŸæ˜¯â€œå­—ç¬¦ä¸²â€ï¼Œå› æ­¤ä¼šæœ‰ç¬¬äºŒç§æƒ…å†µâ€”â€”æ­¥éª¤å››ã€‚</p><h3>æ­¥éª¤å››ï¼šè¿›å…¥â€œä¼ ç»Ÿçš„ç±»å‹è½¬æ¢é€»è¾‘â€</h3><p>è¿™éœ€è¦åˆ©ç”¨åˆ°å¯¹è±¡çš„<code>valueOf()</code>å’Œ<code>toString()</code>æ–¹æ³•ï¼šå½“é¢„æœŸæ˜¯â€œnumberâ€æ—¶ï¼Œ<code>valueOf()</code>æ–¹æ³•ä¼˜å…ˆè°ƒç”¨ï¼›å¦åˆ™å°±ä»¥<code>toString()</code>ä¸ºä¼˜å…ˆã€‚å¹¶ä¸”ï¼Œé‡è¦çš„æ˜¯ï¼Œä¸Šé¢çš„é¢„æœŸåªå†³å®šäº†ä¸Šè¿°çš„ä¼˜å…ˆçº§ï¼Œè€Œå½“è°ƒç”¨ä¼˜å…ˆæ–¹æ³•ä»ç„¶å¾—ä¸åˆ°éå¯¹è±¡å€¼æ—¶ï¼Œè¿˜ä¼šé¡ºåºè°ƒç”¨å¦ä¸€æ–¹æ³•ã€‚</p><p>è¿™å¸¦æ¥äº†ä¸€ä¸ªç»“æœï¼Œå³ï¼šå¦‚æœç”¨æˆ·ä»£ç è¯•å›¾å¾—åˆ°â€œnumberâ€ç±»å‹ï¼Œä½†<code>x.valueOf()</code>è¿”å›çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆå°±è¿˜ä¼šè°ƒç”¨<code>x.toString()</code>ï¼Œå¹¶æœ€ç»ˆå¾—åˆ°ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚</p><p>åˆ°è¿™é‡Œï¼Œå°±å¯ä»¥è§£é‡Šå‰é¢å››ç§å¯¹è±¡ä¸æ•°ç»„ç›¸åŠ æ‰€å¸¦æ¥çš„ç‰¹æ®Šæ•ˆæœäº†ã€‚</p><h2>è§£é¢˜1ï¼šä»å¯¹è±¡åˆ°åŸå§‹å€¼</h2><p>åœ¨<code>a + b</code>çš„è¡¨è¾¾å¼ä¸­ï¼Œ<code>a</code>å’Œ<code>b</code>æ˜¯å¯¹è±¡ç±»å‹æ—¶ï¼Œç”±äºâ€œåŠ å·ï¼ˆ+ï¼‰â€è¿ç®—ç¬¦å¹¶ä¸èƒ½åˆ¤åˆ«ä¸¤ä¸ªæ“ä½œæ•°çš„é¢„æœŸç±»å‹ï¼Œå› æ­¤å®ƒä»¬è¢«â€œä¼˜å…ˆåœ°â€å‡è®¾ä¸ºæ•°å­—å€¼ï¼ˆnumberï¼‰è¿›è¡Œç±»å‹è½¬æ¢ã€‚è¿™æ ·ä¸€æ¥ï¼Œæ— è®ºæ˜¯å¯¹è±¡ï¼Œè¿˜æ˜¯æ•°ç»„ï¼Œå®ƒä»¬çš„.valueOf()æ–¹æ³•è°ƒç”¨çš„ç»“æœéƒ½å°†å¾—åˆ°å®ƒä»¬æœ¬èº«ã€‚å¦‚æœç”¨typeof()çœ‹ä¸€ä¸‹ï¼Œç»“æœè¿˜ä»ç„¶æ˜¯<code>object</code>ç±»å‹ã€‚æ¥ä¸‹æ¥ï¼Œç”±äºè¿™ä¸ªè°ƒç”¨.valueOf()æ–¹æ³•çš„ç»“æœä¸æ˜¯å€¼ç±»å‹ï¼Œæ‰€ä»¥å°±ä¼šå†å°è¯•ä¸€ä¸‹è°ƒç”¨.toString()è¿™ä¸ªæ–¹æ³•ã€‚</p><pre><code># åœ¨é¢„æœŸæ˜¯'number'æ—¶ï¼Œå…ˆè°ƒç”¨`valueOf()`æ–¹æ³•ï¼Œä½†å¾—åˆ°çš„ç»“æœä»ç„¶æ˜¯å¯¹è±¡ç±»å‹ï¼›\n&gt; [typeof ([].valueOf()), typeof ({}.valueOf())]\n[ 'object', 'object' ]\n\n# ç”±äºä¸Šè¿°çš„ç»“æœæ˜¯å¯¹è±¡ç±»å‹ï¼ˆè€Œéå€¼ï¼‰ï¼Œäºæ˜¯å†å°è¯•`toString()`æ–¹æ³•æ¥å¾—åˆ°å­—ç¬¦ä¸²\n&gt; [[].toString(), {}.toString()]\n[ ''ï¼Œ '[object Object]' ]\n</code></pre><p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°±ä¼šçœ‹åˆ°æœ‰ä¸€ç‚¹ç‚¹å·®å¼‚äº†ã€‚ç©ºæ•°ç»„è½¬æ¢å‡ºæ¥ï¼Œæ˜¯ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ï¼Œè€Œå¯¹è±¡çš„è½¬æ¢æˆå­—ç¬¦ä¸²æ—¶æ˜¯â€™[object Object]â€™ã€‚</p><p>æ‰€ä»¥æ¥ä¸‹æ¥çš„å››ç§è¿ç®—å˜æˆäº†ä¸‹é¢è¿™ä¸ªæ ·å­ï¼Œå®ƒä»¬å…¶å®æ˜¯å¯¹å­—ç¬¦ä¸²ç›¸åŠ ï¼Œä¹Ÿå°±æ˜¯å­—ç¬¦ä¸²è¿æ¥çš„ç»“æœã€‚</p><pre><code># [] + {}\n&gt; '' + '[object Object]'\n'[object Object]'\n\n# {} + []\n&gt; ???\n0\n\n# {} + {}\n&gt; ???\nNaN\n\n# [] + []\n&gt; '' + ''\n''\n</code></pre><p>å¥½çš„ï¼Œä½ åº”è¯¥å·²ç»æ³¨æ„åˆ°äº†ï¼Œåœ¨ç¬¬äºŒå’Œç¬¬ä¸‰ç§è½¬æ¢çš„æ—¶å€™æˆ‘æ‰“äº†ä¸‰ä¸ªé—®å·â€œ???â€ã€‚å› ä¸ºå¦‚æœæŒ‰ç…§ä¸Šé¢çš„è½¬æ¢è¿‡ç¨‹ï¼Œå®ƒä»¬æ— éæ˜¯å­—ç¬¦ä¸²æ‹¼æ¥ï¼Œä½†ç»“æœå®ƒä»¬å´æ˜¯ä¸¤ä¸ªæ•°å­—å€¼ï¼Œåˆ†åˆ«æ˜¯0ï¼Œè¿˜æœ‰NaNã€‚</p><p>æ€ä¹ˆä¼šè¿™æ ·ï¼Ÿï¼ï¼</p><h2>è§£é¢˜2ï¼šâ€œåŠ å·ï¼ˆ+ï¼‰â€è¿ç®—çš„æˆåˆ†å¾ˆå¤š</h2><p>ç°åœ¨çœ‹çœ‹è¿™ä¸¤ä¸ªè¡¨è¾¾å¼ã€‚</p><pre><code>{} + []\n{} + {}\n</code></pre><p>ä½ æœ‰æ²¡æœ‰ä¸€ç‚¹ç†Ÿæ‚‰æ„Ÿï¼Ÿå—¯ï¼Œå¾ˆä¸å¹¸ï¼Œå®ƒä»¬çš„å·¦ä¾§æ˜¯ä¸€å¯¹å¤§æ‹¬å·ï¼Œè€Œå½“å®ƒä»¬ä½œä¸ºè¯­å¥æ‰§è¡Œçš„æ—¶å€™ï¼Œä¼šè¢«ä¼˜å…ˆè§£ææˆâ€”â€”å—è¯­å¥ï¼å¹¶ä¸”å¤§æ‹¬å·ä½œä¸ºç»“å°¾çš„æ—¶å€™ï¼Œæ˜¯å¯ä»¥çœç•¥æ‰è¯­å¥ç»“æŸç¬¦â€œåˆ†å·ï¼ˆ;ï¼‰â€çš„ã€‚</p><p>æ‰€ä»¥ï¼Œä½ ç¢°åˆ°äº†JavaScriptè¯­è¨€è®¾è®¡å†å²ä¸­æœ€å¤§çš„ä¸€å—é“æ¿ï¼å°±æ˜¯æ‰€è°“â€œè‡ªåŠ¨åˆ†å·æ’å…¥ï¼ˆASIï¼‰â€ã€‚è¿™ä¸ªä¸œè¥¿çš„ç»†èŠ‚æˆ‘è¿™é‡Œå°±ä¸è®²äº†ï¼Œä½†å®ƒçš„ç»“æœæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿä¸Šé¢çš„ä»£ç å˜æˆä¸‹é¢è¿™ä¸ªæ ·å­ï¼š</p><ul>\n<li><code>{}; +[]</code></li>\n<li><code>{}; +{}</code></li>\n</ul><p>å®åœ¨æ˜¯ä¸å¹¸å•Šï¼è¿™æ ·çš„ä»£ç ä»ç„¶æ˜¯å¯ä»¥é€šè¿‡è¯­æ³•è§£æï¼Œå¹¶ä¸”ä»ç„¶æ˜¯å¯ä»¥è¿›è¡Œè¡¨è¾¾å¼è®¡ç®—æ±‚å€¼çš„ï¼</p><p>äºæ˜¯åç»­çš„ç»“è®ºå°±æ¯”è¾ƒæ˜¾è€Œæ˜“è§äº†ã€‚</p><p>ç”±äºâ€œ+â€å·åŒæ—¶ä¹Ÿæ˜¯â€œæ­£å€¼è¿ç®—ç¬¦â€ï¼Œå¹¶ä¸”å®ƒå¾ˆæ˜æ˜¾å¯ä»¥å‡†ç¡®åœ°é¢„æœŸåç»­æ“ä½œæ•°æ˜¯ä¸€ä¸ªæ•°å€¼ï¼Œæ‰€ä»¥å®ƒå¹¶ä¸éœ€è¦è°ƒç”¨<code>ToPrimitive()</code>å†…éƒ¨æ“ä½œæ¥å¾—åˆ°åŸå§‹å€¼ï¼Œè€Œæ˜¯ç›´æ¥ä½¿ç”¨â€œToNumber(x)â€æ¥å°è¯•å°†<code>x</code>è½¬æ¢ä¸ºæ•°å­—å€¼ã€‚è€Œä¸Šé¢ä¹Ÿè®²åˆ°ï¼Œâ€œå°†å¯¹è±¡è½¬æ¢ä¸ºæ•°å­—å€¼ï¼Œç­‰æ•ˆäºä½¿ç”¨å®ƒçš„åŒ…è£…ç±»æ¥è½¬æ¢ï¼Œä¹Ÿå°±æ˜¯Number(x)â€ã€‚æ‰€ä»¥ï¼Œä¸Šè¿°ä¸¤ç§è¿ç®—çš„ç»“æœå°±å˜æˆäº†ä¸‹é¢çš„æ ·å­ï¼š</p><pre><code># +[] å°†ç­‰ä¹‰äº\n&gt; + Number([])\n0\n\n# +{} å°†ç­‰ä¹‰äº\n&gt; + Number({})\nNaN\n</code></pre><h2>è§£é¢˜3ï¼šé¢„æœŸ vs. éé¢„æœŸ</h2><p>ä½†æ˜¯ä½ å¯èƒ½ä¼šæ³¨æ„åˆ°ï¼šå½“ä½¿ç”¨â€œâ€¦ + {}â€æ—¶ï¼Œ<code>ToPrimitive()</code>è½¬æ¢å‡ºæ¥çš„ï¼Œæ˜¯å­—ç¬¦ä¸²â€œ[object Object]â€ï¼›è€Œåœ¨ä½¿ç”¨â€œ+ {}â€æ—¶ï¼Œ<code>ToNumber(x)</code>è½¬æ¢å‡ºæ¥çš„å´æ˜¯å€¼NaNã€‚æ‰€ä»¥ï¼Œåœ¨ä¸åŒçš„é¢„æœŸä¸‹é¢ï¼Œâ€œå¯¹è±¡-&gt;å€¼â€è½¬æ¢çš„ç»“æœå´å¹¶ä¸ç›¸åŒã€‚</p><p>è¿™ä¹‹é—´æœ‰ä»€ä¹ˆè§„å¾‹å—ï¼Ÿ</p><p>æˆ‘ä»¬å¾—å…ˆç†è§£å“ªäº›æƒ…å†µä¸‹ï¼ŒJavaScriptæ˜¯ä¸èƒ½ç¡®å®šç”¨æˆ·ä»£ç çš„é¢„æœŸçš„ã€‚æ€»ç»“èµ·æ¥ï¼Œè¿™å…¶å®å¾ˆæœ‰é™ï¼ŒåŒ…æ‹¬ï¼š</p><ol>\n<li>â€œåŠ å·ï¼ˆ+ï¼‰â€è¿ç®—ä¸­ï¼Œä¸èƒ½ç¡®å®šå·¦ã€å³æ“ä½œæ•°çš„ç±»å‹ï¼›</li>\n<li>â€œç­‰å€¼ï¼ˆ==ï¼‰â€è¿ç®—ä¸­ï¼Œä¸èƒ½ç¡®å®šå·¦ã€å³æ“ä½œæ•°çš„ç±»å‹ï¼›ï¼ˆJavaScriptè®¤ä¸ºï¼Œå¦‚æœå·¦ã€å³æ“ä½œæ•°ä¹‹ä¸€ä¸ºstringã€numberã€bigintå’Œsymbolå››ç§åŸºç¡€ç±»å‹ä¹‹ä¸€ï¼Œè€Œå¦ä¸€ä¸ªæ“ä½œæ•°æ˜¯å¯¹è±¡ç±»å‹(x)ï¼Œé‚£ä¹ˆå°±éœ€è¦å°†å¯¹è±¡ç±»å‹â€œè½¬æ¢æˆåŸºç¡€ç±»å‹ï¼ˆToPrimitive(x)ï¼‰â€æ¥è¿›è¡Œæ¯”è¾ƒã€‚æ“ä½œæ•°å°†å°½é‡è½¬æ¢ä¸ºæ•°å­—æ¥è¿›è¡Œæ¯”è¾ƒï¼Œå³æœ€ç»ˆç»“æœå°†ç­‰æ•ˆäºï¼šNumber(x) == Number(y)ã€‚ï¼‰</li>\n<li>â€œnew Date(x)â€ä¸­ï¼Œå¦‚æœxæ˜¯ä¸€ä¸ªéDate()å®ä¾‹çš„å¯¹è±¡ï¼Œé‚£ä¹ˆå°†å°è¯•æŠŠxè½¬æ¢ä¸ºåŸºç¡€ç±»å‹x1ï¼›å¦‚æœx1æ˜¯å­—ç¬¦ä¸²ï¼Œå°è¯•ä»å­—ç¬¦ä¸²ä¸­parserå‡ºæ—¥æœŸå€¼ï¼›å¦åˆ™å°è¯•x2 = Number(x1)ï¼Œå¦‚æœèƒ½å¾—åˆ°æœ‰æ•ˆçš„æ•°å­—å€¼ï¼Œåˆ™ç”¨x2æ¥åˆ›å»ºæ—¥æœŸå¯¹è±¡ã€‚</li>\n<li>åŒæ ·æ˜¯åœ¨Date()çš„å¤„ç†ä¸­ï¼Œï¼ˆç›¸å¯¹äºç¼ºçœæ—¶ä¼˜å…ˆnumberç±»å‹æ¥è¯´ï¼Œï¼‰JavaScriptå†…éƒ¨è°ƒæ•´äº†Dateåœ¨è½¬æ¢ä¸ºå€¼ç±»å‹æ—¶çš„é¢„æœŸã€‚ä¸€ä¸ªDateç±»å‹çš„å¯¹è±¡(x)è½¬æ¢ä¸ºå€¼æ—¶ï¼Œå°†ä¼˜å…ˆå°†å®ƒè§†ä¸ºå­—ç¬¦ä¸²ï¼Œä¹Ÿå°±æ˜¯å…ˆè°ƒç”¨x.toString()ï¼Œä¹‹åå†è°ƒç”¨x.valueOf()ã€‚</li>\n</ol><p>å…¶ä»–æƒ…å†µä¸‹ï¼ŒJavaScriptä¸ä¼šä¸ºç”¨æˆ·ä»£ç è°ƒæ•´æˆ–å‡è®¾é¢„æœŸå€¼ã€‚è¿™ä¹Ÿå°±æ˜¯è¯´ï¼ŒæŒ‰ç…§ECMAScriptå†…éƒ¨çš„é€»è¾‘ä¸å¤„ç†è¿‡ç¨‹ï¼Œå…¶ä»–çš„è¿ç®—ï¼ˆè¿ç®—ç¬¦æˆ–å…¶ä»–å†…ç½®æ“ä½œï¼‰å¯¹äºâ€œå¯¹è±¡xâ€ï¼Œéƒ½æ˜¯æœ‰ç›®æ ‡ç±»å‹æ˜ç¡®çš„ã€æµç¨‹ç¡®å®šçš„æ–¹æ³•æ¥è½¬æ¢ä¸ºâ€œï¼ˆå€¼ç±»å‹çš„ï¼‰å€¼â€çš„ã€‚</p><h2>å…¶ä»–</h2><h3>æ˜¾å¼çš„ vs. éšå¼çš„è½¬æ¢</h3><p>å¾ˆå¤§ç¨‹åº¦ä¸Šæ¥è¯´ï¼Œæ˜¾å¼çš„è½¬æ¢å…¶å®åªå†³å®šäº†â€œè½¬æ¢çš„é¢„æœŸâ€ï¼Œè€Œå®ƒå†…éƒ¨çš„è½¬æ¢è¿‡ç¨‹ï¼Œä»ç„¶æ˜¯éœ€è¦â€œéšå¼è½¬æ¢è¿‡ç¨‹â€æ¥å‚ä¸çš„ã€‚ä¾‹å¦‚ï¼Œä½ è°ƒç”¨Number()å‡½æ•°æ¥è½¬æ¢å¯¹è±¡<code>x</code>ï¼š</p><pre><code>&gt; x = new Object\n&gt; Number(x)\nNaN\n</code></pre><p>å¯¹äºè¿™æ ·çš„ä¸€ä¸ªæ˜¾å¼è½¬æ¢ï¼ŒNumber()åªå†³å®šå®ƒé¢„æœŸçš„ç›®æ ‡æ˜¯â€™numberâ€™ç±»å‹ï¼Œå¹¶æœ€ç»ˆå°†è°ƒç”¨<code>ToPrimitive(x, 'Number')</code>æ¥å¾—åˆ°ç»“æœã€‚ç„¶è€Œï¼Œä¸€å¦‚ä¹‹å‰æ‰€è¯´çš„ï¼ŒToPrimitive()ä¼šæ¥å—ä»»ä½•ä¸€ä¸ªâ€œåŸå§‹å€¼â€ä½œä¸ºç»“æœ<code>x1</code>è¿”å›ï¼ˆå¹¶ä¸”è¦ç•™æ„çš„æ˜¯ï¼Œåœ¨è¿™é‡Œnullå€¼ä¹Ÿæ˜¯åŸå§‹å€¼ï¼‰ï¼Œå› æ­¤å®ƒå¹¶ä¸ä¿è¯ç»“æœç¬¦åˆé¢„æœŸ<code>'number'</code>ã€‚</p><p>æ‰€ä»¥ï¼Œæœ€ç»ˆNumber()è¿˜ä¼šå†è°ƒç”¨ä¸€æ¬¡è½¬æ¢è¿‡ç¨‹ï¼Œå°è¯•å°†<code>x1</code>è½¬æ¢ä¸ºæ•°å­—ã€‚</p><h3>å­—ç¬¦ä¸²åœ¨â€œ+â€å·ä¸­çš„ä¼˜å…ˆæƒ</h3><p>å¦ä¸€æ–¹é¢ï¼Œåœ¨â€œ+â€å·è¿ç®—ä¸­ï¼Œç”±äºå¯èƒ½çš„è¿ç®—åŒ…æ‹¬æ•°æ®å’Œå­—ç¬¦ä¸²ï¼Œæ‰€ä»¥æŒ‰ç…§éšå¼è½¬æ¢è§„åˆ™ï¼Œåœ¨ä¸ç¡®å®šçš„æƒ…å†µä¸‹ï¼Œä¼˜å…ˆå°†è¿ç®—æ•°ä½œä¸ºæ•°å­—å¤„ç†ã€‚é‚£ä¹ˆå°±æ˜¯é»˜è®¤â€œ+â€å·æ˜¯åšæ±‚å’Œè¿ç®—çš„ã€‚</p><p>ä½†æ˜¯ï¼Œåœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œç»“æœå¾€å¾€ä¼šæ˜¯å­—ç¬¦ä¸²å€¼ã€‚</p><p>è¿™æ˜¯å› ä¸ºå­—ç¬¦ä¸²åœ¨â€œ+â€å·è¿ç®—ä¸­è¿˜æœ‰å¦ä¸€å±‚é¢çš„ä¼˜å…ˆçº§ï¼Œè¿™æ˜¯ç”±â€œ+â€å·è¿ç®—ç¬¦è‡ªå·²å†³å®šçš„ï¼Œå› è€Œå¹¶ä¸æ˜¯ç±»å‹è½¬æ¢ä¸­çš„æ™®éè§„åˆ™ã€‚</p><p>â€œ+â€å·è¿ç®—ç¬¦çº¦å®šï¼Œå¯¹äºå®ƒçš„ä¸¤ä¸ªæ“ä½œæ•°ï¼Œåœ¨é€šè¿‡<code>ToPrimitive()</code>å¾—åˆ°ä¸¤ä¸ªç›¸åº”çš„åŸå§‹å€¼ä¹‹åï¼ŒäºŒè€…ä¹‹ä»»ä¸€æ˜¯å­—ç¬¦ä¸²çš„è¯ï¼Œå°±ä¼˜å…ˆè¿›è¡Œå­—ç¬¦ä¸²è¿æ¥æ“ä½œã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ç§æƒ…å†µä¸‹å¦ä¸€ä¸ªæ“ä½œæ•°ä¼šå‘ç”Ÿä¸€æ¬¡â€œå€¼-&gt;å€¼â€çš„è½¬æ¢ï¼Œå¹¶æœ€ç»ˆè¿æ¥ä¸¤ä¸ªå­—ç¬¦ä¸²ä»¥ä½œä¸ºç»“æœè¿”å›ã€‚</p><p>é‚£ä¹ˆï¼Œæˆ‘ä»¬æ€ä¹ˆç†è§£è¿™ä¸ªè¡Œä¸ºå‘¢ï¼Ÿæ¯”å¦‚è¯´ï¼Œå¦‚æœå¯¹è±¡xè½¬æ¢æˆæ•°å­—å’Œå­—ç¬¦ä¸²çš„æ•ˆæœå¦‚ä¸‹ï¼š</p><pre><code>x = {\n  valueOf() { console.log('Call valueOf'); return Symbol() },\n  toString() { console.log('Call toString'); return 'abc' }\n}\n</code></pre><p>æˆ‘å£°æ˜äº†ä¸€ä¸ªå¯¹è±¡xï¼Œå®ƒå¸¦æœ‰ä¸¤ä¸ªå®šåˆ¶çš„toString()å’ŒvalueOf()æ–¹æ³•ï¼Œç”¨æ¥è§‚å¯Ÿç±»å‹è½¬æ¢çš„è¿‡ç¨‹ï¼›å¹¶ä¸”ï¼Œå…¶ä¸­valueOf()ä¼šè¿”å›ä¸€ä¸ªsymbolç¬¦å·ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒæ˜¯â€œå€¼ç±»å‹â€ï¼Œä½†æ—¢ä¸æ˜¯å­—ç¬¦ä¸²ï¼Œä¹Ÿä¸æ˜¯æ•°å­—å€¼ã€‚</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬å°è¯•ç”¨å®ƒè·Ÿä¸€ä¸ªä»»æ„å€¼åšâ€œ+â€å·è¿ç®—ï¼Œä¾‹å¦‚ï¼š</p><pre><code># ä¾‹1ï¼šä¸éå­—ç¬¦ä¸²åšâ€œ+â€è¿ç®—æ—¶\n&gt; true + x\nCall valueOf\nTypeError: Cannot convert a Symbol value to a number\n</code></pre><p>â€œ+â€å·è¿ç®—åœ¨å¤„ç†è¿™ç§æƒ…å†µï¼ˆç”¨å¯¹è±¡ä¸éå­—ç¬¦ä¸²å€¼åšåŠ å·è¿ç®—ï¼‰æ—¶ï¼Œä¼šå…ˆè°ƒç”¨<code>x</code>çš„valueOf()æ–¹æ³•ï¼Œç„¶åç”±äºâ€œ+â€å·çš„ä¸¤ä¸ªæ“ä½œæ•°éƒ½ä¸æ˜¯å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥å°†å†æ¬¡å°è¯•å°†å®ƒä»¬è½¬æ¢æˆæ•°å­—å¹¶æ±‚å’Œã€‚åˆä¾‹å¦‚ï¼š</p><pre><code># ä¾‹2ï¼šä¸å­—ç¬¦ä¸²åšâ€œ+â€è¿ç®—æ—¶\n&gt; 'OK, ' + x\nCall valueOf\nTypeError: Cannot convert a Symbol value to a string\n</code></pre><p>è¿™ç§æƒ…å†µä¸‹ï¼Œç”±äºå­˜åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²æ“ä½œæ•°ï¼Œå› æ­¤â€œå­—ç¬¦ä¸²è¿æ¥â€è¿ç®—è¢«ä¼˜å…ˆï¼Œäºæ˜¯ä¼šå°è¯•å°†<code>x</code>è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚</p><p>ç„¶è€Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸Šè¿°ä¸¤ä¸ªæ“ä½œä¸­éƒ½å¹¶æ²¡æœ‰è°ƒç”¨x.toString()ï¼Œè€Œâ€œéƒ½ä»…ä»…æ˜¯â€åœ¨ToPrimitive()å†…éƒ¨æ“ä½œä¸­è°ƒç”¨äº†x.valueOf()ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨æ£€æµ‹æ“ä½œæ•°çš„å€¼ç±»å‹â€œæ˜¯å¦æ˜¯å­—ç¬¦ä¸²â€ä¹‹åï¼Œå†æ¬¡è¿›è¡Œçš„â€œå€¼-&gt;å€¼â€çš„è½¬æ¢æ“ä½œæ˜¯åŸºäºToPrimitive()çš„ç»“æœï¼Œè€ŒéåŸå¯¹è±¡<code>x</code>çš„ã€‚</p><p>è¿™ä¹Ÿæ˜¯ä¹‹å‰åœ¨â€œè§£é¢˜3â€ä¸­ç‰¹åˆ«è®²è¿°Date()å¯¹è±¡è¿™ä¸€ç‰¹ä¾‹çš„åŸå› ã€‚å› ä¸ºDate()åœ¨â€œè°ƒç”¨ToPrimitive()â€è¿™ä¸ªé˜¶æ®µçš„å¤„ç†é¡ºåºæ˜¯åçš„ï¼Œæ‰€ä»¥å®ƒä¼šå…ˆè°ƒç”¨x.toStringï¼Œä»è€Œäº§ç”Ÿä¸ä¸€æ ·çš„æ•ˆæœã€‚ä¾‹å¦‚ï¼š</p><pre><code>// åˆ›å»ºMyDateç±»ï¼Œè¦†ç›–valueOf()å’ŒtoString()æ–¹æ³•\nclass MyDate extends Date {\n  valueOf() { console.log('Call valueOf'); return Symbol() }\n  toString() { console.log('Call toString'); return 'abc' }\n}\n</code></pre><p>æµ‹è¯•å¦‚ä¸‹ï¼š</p><pre><code># ç¤ºä¾‹\n&gt; x = new MyDate;\n\n# ä¸éå­—ç¬¦ä¸²åšâ€œ+â€è¿ç®—æ—¶\n&gt; true + x\nCall toString\ntrueabc\n\n# ä¸éå­—ç¬¦ä¸²åšâ€œ+â€è¿ç®—æ—¶\n&gt; 'OK, ' + x\nCall toString\nOK, abc\n</code></pre><p>é‚£ä¹ˆå¯¹äºDate()è¿™ä¸ªç±»æ¥è¯´ï¼Œè¿™åˆæ˜¯å¦‚ä½•åšåˆ°çš„å‘¢ï¼Ÿ</p><h3>Symbol.toPrimitiveçš„å¤„ç†</h3><p>ç®€å•åœ°è¯´ï¼ŒDateç±»é‡å†™äº†åŸå‹å¯¹è±¡Date.prototypeä¸Šçš„ç¬¦å·å±æ€§<code>Symbol.toPrimitive</code>ã€‚ä»»ä½•æƒ…å†µä¸‹ï¼Œå¦‚æœç”¨æˆ·ä»£ç é‡å†™äº†å¯¹è±¡çš„<code>Symbol.toPrimitive</code>ç¬¦å·å±æ€§ï¼Œé‚£ä¹ˆ<code>ToPrimitive()</code>è¿™ä¸ªè½¬æ¢è¿‡ç¨‹å°±å°†ç”±ç”¨æˆ·ä»£ç è´Ÿè´£ï¼Œè€ŒåŸæœ‰çš„é¡ºåºä¸è§„åˆ™å°±å¤±æ•ˆäº†ã€‚</p><p>æˆ‘ä»¬çŸ¥é“ï¼Œç”±äºè°ƒç”¨<code>ToPrimitive(hint)</code>æ—¶çš„å…¥å£å‚æ•°hintå¯èƒ½ä¸º<code>default/string/number</code>è¿™ä¸‰ç§å€¼ä¹‹ä¸€ï¼Œè€Œå®ƒè¦æ±‚è¿”å›çš„åªæ˜¯â€œå€¼ç±»å‹â€ç»“æœï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œç»“æœå¯ä»¥æ˜¯æ‰€æœ‰5ç§å€¼ç±»å‹ä¹‹ä»»ä¸€ã€‚å› æ­¤ï¼Œç”¨æˆ·ä»£ç å¯¹<code>ToPrimitive(hint)</code>çš„é‡å†™å¯ä»¥â€œå‚è€ƒâ€è¿™ä¸ªhintå€¼ï¼Œä¹Ÿå¯ä»¥æ— è§†ä¹‹ï¼Œä¹Ÿå¯ä»¥åœ¨è®¸å¯èŒƒå›´å†…è¿”å›ä»»ä½•ä¸€ç§å€¼ã€‚</p><p>ç®€å•åœ°è¯´ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªè¶…å¼ºç‰ˆçš„<code>valueOf()</code>ã€‚</p><p>äº‹å®ä¸Šï¼Œä¸€æ—¦ç”¨æˆ·ä»£ç å£°æ˜äº†ç¬¦å·å±æ€§<code>Symbol.toPrimitive</code>ï¼Œé‚£ä¹ˆvalueOf()å°±å¤±æ•ˆäº†ï¼ŒECMAScripté‡‡ç”¨è¿™ä¸ªæ–¹å¼â€œä¸€ä¸¾â€æ‘§æ¯äº†åŸæœ‰çš„éšå¼è½¬æ¢çš„å…¨éƒ¨é€»è¾‘ã€‚è¿™æ ·ä¸€æ¥ï¼ŒåŒ…æ‹¬é¢„æœŸçš„é¡ºåºä¸é‡ç½®ï¼Œä»¥åŠtoStringå’ŒvalueOfè°ƒç”¨ç­‰ç­‰éƒ½â€œä¸å¤å­˜ç„‰â€ã€‚</p><p>ä¸€åˆ‡é‡å½’äºé›¶ï¼šå®šåˆ¶<code>Symbol.toPrimitive</code>ï¼Œè¿”å›<code>å€¼ç±»å‹</code>ï¼›å¦åˆ™æŠ›å‡ºå¼‚å¸¸ã€‚</p><blockquote>\n<p>NOTEï¼šDate()ç±»ä¸­ä»ç„¶æ˜¯ä¼šè°ƒç”¨toStringæˆ–valueOfçš„ï¼Œè¿™æ˜¯å› ä¸ºåœ¨å®ƒçš„<code>Symbol.toPrimitive</code>å®ç°ä¸­ä»…æ˜¯è°ƒæ•´äº†ä¸¤ä¸ªæ–¹æ³•çš„è°ƒç”¨é¡ºåºï¼Œè€Œä¹‹åä»ç„¶æ˜¯è°ƒç”¨åŸå§‹çš„ã€å†…ç½®çš„<code>ToPrimitive()</code>æ–¹æ³•çš„ã€‚å¯¹äºç”¨æˆ·ä»£ç æ¥è¯´ï¼Œå¯ä»¥è‡ªè¡Œå†³å®šè¯¥ç¬¦å·å±æ€§ï¼ˆæ–¹æ³•ï¼‰çš„è°ƒç”¨ç»“æœï¼Œæ— éœ€ä¾èµ–<code>ToPrimitive()</code>æ–¹æ³•ã€‚</p>\n</blockquote><h2>ç»“è¯­ä¸æ€è€ƒ</h2><p>ä»Šå¤©æˆ‘ä»¬æ›´æ·±å…¥åœ°è®²è¿°äº†ç±»å‹è½¬æ¢çš„è¯¸å¤šç»†èŠ‚ï¼Œé™¤äº†è¿™ä¸€è®²çš„ç®€å•é¢˜è§£ä¹‹å¤–ï¼Œå¯¹äºâ€œ+â€å·è¿ç®—ä¹Ÿåšäº†ä¸€äº›è¡¥å……ã€‚</p><p>æ€»åœ°æ¥è®²ï¼Œæˆ‘ä»¬æ˜¯åœ¨è®¨è®ºJavaScriptè¯­è¨€æ‰€è°“â€œåŠ¨æ€ç±»å‹â€çš„éƒ¨åˆ†ï¼Œä½†æ˜¯åŠ¨æ€ç±»å‹å¹¶ä¸ä»…é™äºæ­¤ã€‚ä¹Ÿå°±æ˜¯è¯´JavaScriptä¸­å¹¶ä¸ä»…ä»…æ˜¯â€œç±»å‹è½¬æ¢â€è¡¨ç°å‡ºæ¥åŠ¨æ€ç±»å‹çš„ç‰¹æ€§ã€‚ä¾‹å¦‚ä¸€ä¸ªæ›´ç®€å•çš„é—®é¢˜ï¼š</p><p><span class=\"orange\">â€œx === xâ€åœ¨å“ªäº›æƒ…å†µä¸‹ä¸ä¸ºtrueï¼Ÿ</span></p><p>è¿™åŸæœ¬æ˜¯è¿™ä¸¤è®²çš„å¦ä¸€ä¸ªå¤‡é€‰çš„æ ‡é¢˜ï¼Œå®ƒä¹Ÿæ˜¯è®¨è®ºåŠ¨æ€ç±»å‹é—®é¢˜çš„ã€‚åªä¸è¿‡è¿™ä¸ªé—®é¢˜æ‰€æ¶‰åŠçš„èŒƒå›´å¤ªçª„ï¼Œå¹¶ä¸é€‚åˆå±•å¼€åˆ°è¿™ä¸¤è®²æ‰€æ¶µç›–çš„å†…å®¹ï¼Œå› æ­¤è¢«å¼ƒç”¨äº†ã€‚è¿™é‡ŒæŠŠå®ƒä½œä¸ºä¸€ä¸ªå°å°çš„æ€è€ƒé¢˜ç•™ç»™ä½ ï¼Œä½ å¯ä»¥è¯•ç€æ‰¾æ‰¾ç­”æ¡ˆã€‚</p><blockquote>\n<p>NOTE1ï¼šæˆ‘å¯ä»¥å‘Šè¯‰ä½ ç­”æ¡ˆä¸åªä¸€ä¸ªï¼Œä¾‹å¦‚â€œxæ˜¯NaNâ€ã€‚^^.<br>\nNOTE2ï¼šâ€œxæ˜¯NaNâ€è¿™æ ·çš„ç­”æ¡ˆä¸åŠ¨æ€ç±»å‹æˆ–åŠ¨æ€è¯­è¨€è¿™ä¸ªä½“ç³»æ²¡ä»€ä¹ˆå…³ç³»ï¼Œæ‰€ä»¥å®ƒä¸æ˜¯æˆ‘åœ¨è¿™é‡Œæƒ³ä¸ä½ è®¨è®ºçš„ä¸»è¦è¯é¢˜ã€‚</p>\n</blockquote><p>æ¬¢è¿ä½ åœ¨è¿›è¡Œæ·±å…¥æ€è€ƒåï¼Œä¸å…¶ä»–åŒå­¦åˆ†äº«è‡ªå·±çš„æƒ³æ³•ï¼Œä¹Ÿè®©æˆ‘æœ‰æœºä¼šèƒ½å¬å¬ä½ çš„æ”¶è·ã€‚</p>","neighbors":{"left":{"article_title":"18 | a + bï¼šåŠ¨æ€ç±»å‹æ˜¯ç¾éš¾ä¹‹æºè¿˜æ˜¯æœ€å¥½çš„ç‰¹æ€§ï¼Ÿï¼ˆä¸Šï¼‰","id":181952},"right":{"article_title":"20 | (0, eval)(\"x = 100\") ï¼šä¸€è¡Œè®©ä¸¥æ ¼æ¨¡å¼å½¢åŒè™šè®¾çš„ç ´åæ€§è®¾è®¡ï¼ˆä¸Šï¼‰","id":183440}},"comments":[{"had_liked":false,"id":166515,"user_name":"weineel","can_delete":false,"product_type":"c1","uid":1049741,"ip_address":"","ucode":"6DC6EF4F256A53","user_header":"https://static001.geekbang.org/account/avatar/00/10/04/8d/005c2ff3.jpg","comment_is_top":false,"comment_ctime":1577462367,"is_pvip":true,"replies":[{"id":"63841","content":"èµï¼<br><br>çš„ç¡®ï¼Œè¿™æ˜¯é™¤NaNä¹‹å¤–æˆ‘è®¤ä¸ºæœ€å¯è¡Œçš„ä¸€ä¸ªç­”æ¡ˆã€‚äº‹å®ä¸Šï¼Œè¿™ä¹Ÿæ˜¯æˆ‘åœ¨è¯¾ç¨‹ä¸­æå‡â€œåŠ¨æ€è¯­è¨€ç‰¹æ€§â€è¿™ä¸ªæ–¹å‘çš„åŸå› ï¼šä¸€éƒ¨åˆ†åŠ¨æ€ç‰¹æ€§æ˜¯åŸºäºOOPæ¥å®ç°çš„ï¼Œè¿™æ­£æ˜¯JavaScriptçš„æ··åˆè¯­è¨€ç‰¹æ€§çš„åº”ç”¨ã€‚<br><br>ä¸è¿‡è¿™ä¸ªä¾‹å­å…¶å®å¯ä»¥å˜æˆæ›´ç®€å•ã€‚ä¾‹å¦‚ï¼š<br><br>```<br>Object.defineProperty(global, &#39;x&#39;, { get: Symbol })<br><br>&#47;&#47; æˆ–<br>Object.defineProperty(global, &#39;x&#39;, { get: Math.random })<br>```<br><br>AND, @æ™“å°ä¸œ ç»™å‡ºçš„Symbol()æ–¹æ¡ˆå¯¹è¿™ä¸ªgetteræ–¹æ³•æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„è¡¥å……ï¼Œå¾ˆå¥½åœ°åˆ©ç”¨äº†â€œsymbolæ€»æ˜¯å”¯ä¸€â€çš„ç‰¹æ€§ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Aiming","uid":"1521669","ctime":1577559256,"ip_address":"","comment_id":166515,"utype":1}],"discussion_count":2,"race_medal":2,"score":"44527135327","product_id":100039701,"comment_content":"å¼ºè¡Œæ‰¾åˆ°ä¸€ç§æ–¹æ³•, ä½†å’Œæœ¬èŠ‚æ‰€è®²æ²¡å•¥å…³ç³»ï¼š<br><br>Object.defineProperty(global, &#39;x&#39;, {<br>    get: function() {<br>        return Math.random();<br>    }<br>})<br><br>x === x &#47;&#47; false","like_count":10,"discussions":[{"author":{"id":1521669,"avatar":"https://static001.geekbang.org/account/avatar/00/17/38/05/7beecd5d.jpg","nickname":"Aiming","note":"","ucode":"66292B32F9960A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479523,"discussion_content":"èµï¼\n\nçš„ç¡®ï¼Œè¿™æ˜¯é™¤NaNä¹‹å¤–æˆ‘è®¤ä¸ºæœ€å¯è¡Œçš„ä¸€ä¸ªç­”æ¡ˆã€‚äº‹å®ä¸Šï¼Œè¿™ä¹Ÿæ˜¯æˆ‘åœ¨è¯¾ç¨‹ä¸­æå‡â€œåŠ¨æ€è¯­è¨€ç‰¹æ€§â€è¿™ä¸ªæ–¹å‘çš„åŸå› ï¼šä¸€éƒ¨åˆ†åŠ¨æ€ç‰¹æ€§æ˜¯åŸºäºOOPæ¥å®ç°çš„ï¼Œè¿™æ­£æ˜¯JavaScriptçš„æ··åˆè¯­è¨€ç‰¹æ€§çš„åº”ç”¨ã€‚\n\nä¸è¿‡è¿™ä¸ªä¾‹å­å…¶å®å¯ä»¥å˜æˆæ›´ç®€å•ã€‚ä¾‹å¦‚ï¼š\n\n```\nObject.defineProperty(global, &amp;#39;x&amp;#39;, { get: Symbol })\n\n// æˆ–\nObject.defineProperty(global, &amp;#39;x&amp;#39;, { get: Math.random })\n```\n\nAND, @æ™“å°ä¸œ ç»™å‡ºçš„Symbol()æ–¹æ¡ˆå¯¹è¿™ä¸ªgetteræ–¹æ³•æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„è¡¥å……ï¼Œå¾ˆå¥½åœ°åˆ©ç”¨äº†â€œsymbolæ€»æ˜¯å”¯ä¸€â€çš„ç‰¹æ€§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577559256,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1565909,"avatar":"https://static001.geekbang.org/account/avatar/00/17/e4/d5/579615e2.jpg","nickname":"ä»¿ç”Ÿç‹®å­","note":"","ucode":"ECB2726F7E8F2F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":338078,"discussion_content":"åœ¨ JavaScript Question @Github é‚£ä¸ªé¡¹ç›®é‡Œæœ‰ä¸€ä¸ªé—®é¢˜æ˜¯ï¼šè¯·é—® function sum(a, b) { return a + b } æ˜¯å¦æ˜¯ä¸€ä¸ªçº¯å‡½æ•°ã€‚ç­”æ¡ˆæ˜¯â€œæ˜¯â€ã€‚\n\né‚£ä¼šå„¿æ­£å¥½çœ‹åˆ° ToPrimitive è¿™ç©æ„å„¿ï¼Œäºæ˜¯æ‰¾äº†ä¸ªåä¾‹ï¼š\nvar a = b = {}\na[Symbol.toPrimitive] = b[Symbol.toPrimitive] = Math.random\nsum(a, b) // Uncertain\n\nå“ˆå“ˆ ä¹Ÿæ˜¯ç”¨çš„ Math.random ~~~~","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1609165728,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":204298,"user_name":"é™ˆå¼º","can_delete":false,"product_type":"c1","uid":1740346,"ip_address":"","ucode":"BEE4B208F27DC1","user_header":"https://static001.geekbang.org/account/avatar/00/1a/8e/3a/6b76f2f5.jpg","comment_is_top":false,"comment_ctime":1586361208,"is_pvip":false,"replies":[{"id":"76418","content":"è°¢è°¢ ğŸ‘+3","user_name":"ä½œè€…å›å¤","user_name_real":"Aiming","uid":"1521669","ctime":1586398816,"ip_address":"","comment_id":204298,"utype":1}],"discussion_count":1,"race_medal":0,"score":"35946099576","product_id":100039701,"comment_content":"è¿™é‡Œæ˜¯ä¸€ä¸ªæ‹“å±•é˜…è¯»ï¼šhttps:&#47;&#47;2ality.com&#47;2012&#47;01&#47;object-plus-object.html<br><br>ä¸ºä»€ä¹ˆ{} + {} åœ¨æµè§ˆå™¨ä¸­æ‰“å°çš„æ˜¯ &quot;[object Object][object Object]&quot;<br>å› ä¸ºâ€œthe Node.js REPL parses its input differently from either Firefox or Chrome (which even uses the same V8 JavaScript engine as Node.js). The following input is parsed as expressions and the results are less surprising:â€<br>å®é™…ä¸Šchromeè‡ªå·±åŠ äº†console.log()ï¼Œç›¸å½“äº({} + {})ï¼Œfirefoxçš„æ§åˆ¶å°ä¼šè¾“å‡ºNaNã€‚<br>&#47;&#47; test in chrome<br>{} + {} &#47;&#47; &quot;[object Object][object Object]&quot;<br>{} + {} === &quot;[object Object][object Object]&quot; &#47;&#47; false<br>({} + {}) === &quot;[object Object][object Object]&quot; &#47;&#47; true","like_count":8,"discussions":[{"author":{"id":1521669,"avatar":"https://static001.geekbang.org/account/avatar/00/17/38/05/7beecd5d.jpg","nickname":"Aiming","note":"","ucode":"66292B32F9960A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":491135,"discussion_content":"è°¢è°¢ ğŸ‘+3","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586398816,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":173036,"user_name":"Geek_185c7d","can_delete":false,"product_type":"c1","uid":1698771,"ip_address":"","ucode":"CDA0FCBF99D54B","user_header":"https://static001.geekbang.org/account/avatar/00/19/eb/d3/92573feb.jpg","comment_is_top":false,"comment_ctime":1579415942,"is_pvip":false,"replies":[{"id":"67111","content":"æµè§ˆå™¨æŠŠå¼•æ“åŒ…äº†ä¸€å±‚ï¼Œä½ æ‰§è¡Œçš„ä¸æ˜¯çœŸæ­£çš„å¼•æ“ç¯å¢ƒã€‚<br><br>åœ¨nodeä¸­ç”¨å¦‚ä¸‹å‘½ä»¤è¡Œè¯•è¯•ï¼š<br>```<br>&gt; node -p -e &#39;{} + {}&#39;<br>NaN<br><br>&gt; node -p -e &#39;{} + []&#39;<br>0<br>```","user_name":"ä½œè€…å›å¤","user_name_real":"Aiming","uid":"1521669","ctime":1579424648,"ip_address":"","comment_id":173036,"utype":1}],"discussion_count":3,"race_medal":0,"score":"18759285126","product_id":100039701,"comment_content":"è¯·é—®è€å¸ˆï¼Œä¸ºä»€ä¹ˆ{} + {} åœ¨æµè§ˆå™¨ä¸­æ‰“å°çš„æ˜¯ &quot;[object Object][object Object]&quot;","like_count":4,"discussions":[{"author":{"id":1521669,"avatar":"https://static001.geekbang.org/account/avatar/00/17/38/05/7beecd5d.jpg","nickname":"Aiming","note":"","ucode":"66292B32F9960A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481935,"discussion_content":"æµè§ˆå™¨æŠŠå¼•æ“åŒ…äº†ä¸€å±‚ï¼Œä½ æ‰§è¡Œçš„ä¸æ˜¯çœŸæ­£çš„å¼•æ“ç¯å¢ƒã€‚\n\nåœ¨nodeä¸­ç”¨å¦‚ä¸‹å‘½ä»¤è¡Œè¯•è¯•ï¼š\n```\n&amp;gt; node -p -e &amp;#39;{} + {}&amp;#39;\nNaN\n\n&amp;gt; node -p -e &amp;#39;{} + []&amp;#39;\n0\n```","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579424648,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2396284,"avatar":"https://static001.geekbang.org/account/avatar/00/24/90/7c/1545dcc6.jpg","nickname":"XM","note":"","ucode":"A8B5CD008CF32B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":350795,"discussion_content":"çœ‹åˆ°è€å¸ˆè¯´çš„ï¼Œæ‰€ä»¥åœ¨æµè§ˆå™¨ä¸­æ‰§è¡Œeval(&#39;{}+{}&#39;)ï¼Œå…¶å®ä¹Ÿå°±æ˜¯åœ¨å¼•æ“å±‚é¢æ‰§è¡Œçš„ä»£ç ï¼Œæ‰€ä»¥ç»“æœå°±æ˜¯NaN","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614007283,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1740346,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/8e/3a/6b76f2f5.jpg","nickname":"é™ˆå¼º","note":"","ucode":"BEE4B208F27DC1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":225538,"discussion_content":"Interestingly, the Node.js REPL parses its input differently from either Firefox or Chrome (which even uses the same V8 JavaScript engine as Node.js). The following input is parsed as expressions and the results are less surprising:\n    > {} + {}\n    &#39;[object Object][object Object]&#39;\n    > {} + []\n    &#39;[object Object]&#39;\nThis has the advantage of being more like the results you get when using the input as arguments of console.log(). But it is also less like using the input as statements in programs.","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586361416,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":278081,"user_name":"westfall","can_delete":false,"product_type":"c1","uid":1632773,"ip_address":"","ucode":"F3F5CB7DF695FC","user_header":"https://static001.geekbang.org/account/avatar/00/18/ea/05/b164dc15.jpg","comment_is_top":false,"comment_ctime":1612753265,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14497655153","product_id":100039701,"comment_content":"å…³äº chrome æ§åˆ¶å° {} + {} æ‰“å°å‡º &quot;[object Object][object Object]&quot;ï¼Œæ‰¾åˆ°ä¸€ä¸ªè§£é‡Šï¼Œchrome ä¼šå°†æ‰€æœ‰å·² &#39;{&#39; å¼€å¤´ï¼Œå·² &#39;}&#39; ç»“å°¾çš„è¾“å…¥å¼ºè¡Œç”¨ () åŒ…èµ·æ¥ï¼Œå› æ­¤è¾“å…¥ {} å¾—åˆ°çš„æ˜¯ä¸€ä¸ªå¯¹è±¡å­—é¢é‡çš„æ±‚å€¼ ({})ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªè¯­å¥å—ï¼ŒåŒæ · {} + {} å¾—åˆ°çš„æ˜¯ ({} + {})ã€‚æºç åœ¨æ­¤ï¼šhttps:&#47;&#47;chromium.googlesource.com&#47;chromium&#47;src.git&#47;+&#47;4fd348fdb9c0b3842829acdfb2b82c86dacd8e0a%5E!&#47;#F2","like_count":3},{"had_liked":false,"id":166528,"user_name":"æ™“å°ä¸œ","can_delete":false,"product_type":"c1","uid":1194643,"ip_address":"","ucode":"93F9462EAAA63C","user_header":"https://static001.geekbang.org/account/avatar/00/12/3a/93/d7be8a1a.jpg","comment_is_top":false,"comment_ctime":1577466369,"is_pvip":true,"replies":[{"id":"63842","content":"å‚è§ @sprinty çš„ç­”æ¡ˆã€‚å‘µå‘µï¼Œæˆ‘è‡ªå·±ä¹Ÿä¸çŸ¥é“æœ‰æ²¡æœ‰æ›´å¤šçš„å¯èƒ½äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Aiming","uid":"1521669","ctime":1577559366,"ip_address":"","comment_id":166528,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10167400961","product_id":100039701,"comment_content":"éš¾é“æ˜¯è¿™ä¸ªå—ï¼Œ \bå¦‚æœä½œä¸ºæ ‡è¯†ç¬¦var  x ç¡®å®æ²¡æƒ³å‡ºã€‚<br>&gt;&gt; Symbol() === Symbol() &#47;&#47; false","like_count":2,"discussions":[{"author":{"id":1521669,"avatar":"https://static001.geekbang.org/account/avatar/00/17/38/05/7beecd5d.jpg","nickname":"Aiming","note":"","ucode":"66292B32F9960A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479527,"discussion_content":"å‚è§ @sprinty çš„ç­”æ¡ˆã€‚å‘µå‘µï¼Œæˆ‘è‡ªå·±ä¹Ÿä¸çŸ¥é“æœ‰æ²¡æœ‰æ›´å¤šçš„å¯èƒ½äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577559366,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":290775,"user_name":"undefined","can_delete":false,"product_type":"c1","uid":1100750,"ip_address":"","ucode":"768098DBDBE333","user_header":"https://static001.geekbang.org/account/avatar/00/10/cb/ce/d9e00eb5.jpg","comment_is_top":false,"comment_ctime":1619749610,"is_pvip":false,"replies":[{"id":"105390","content":"è¿™ä¸ªï¼Ÿé—®é¢˜æ˜¯ï¼Ÿ<br><br>1ã€3æ˜¯æŒ‰è¯­å¥æ‰§è¡Œï¼Œæ‰€ä»¥æ˜¯NaNï¼›2ã€4æ˜¯æŒ‰è¡¨è¾¾å¼æ‰§è¡Œï¼Œæ‰€ä»¥æ˜¯[object Object]*2ã€‚<br><br>æ­£æ–‡ä¸­ï¼ˆè§£é¢˜2ï¼‰è¯´çš„éƒ½æ˜¯ç¬¬ä¸€ç§æƒ…å†µã€‚è€Œç¬¬äºŒç§æƒ…å†µçš„åˆ†æè·¯å¾„åœ¨æ­£æ–‡ä¸­ä¹Ÿæ˜¯äº¤å¾…äº†çš„å“¦ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Aiming","uid":"1521669","ctime":1619804011,"ip_address":"","comment_id":290775,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5914716906","product_id":100039701,"comment_content":"&gt; node -v<br>v12.20.1<br><br>&gt; node -p &#39;{} + {}&#39;<br>NaN<br><br>&gt; node -p &#39;({} + {})&#39;<br>[object Object][object Object]<br><br>&gt; node -p &quot;eval(&#39;{} + {}&#39;)&quot;<br>NaN<br><br>&gt; node -p &quot;eval(&#39;({} + {})&#39;)&quot;<br>[object Object][object Object]<br>","like_count":1,"discussions":[{"author":{"id":1521669,"avatar":"https://static001.geekbang.org/account/avatar/00/17/38/05/7beecd5d.jpg","nickname":"Aiming","note":"","ucode":"66292B32F9960A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":519285,"discussion_content":"è¿™ä¸ªï¼Ÿé—®é¢˜æ˜¯ï¼Ÿ\n\n1ã€3æ˜¯æŒ‰è¯­å¥æ‰§è¡Œï¼Œæ‰€ä»¥æ˜¯NaNï¼›2ã€4æ˜¯æŒ‰è¡¨è¾¾å¼æ‰§è¡Œï¼Œæ‰€ä»¥æ˜¯[object Object]*2ã€‚\n\næ­£æ–‡ä¸­ï¼ˆè§£é¢˜2ï¼‰è¯´çš„éƒ½æ˜¯ç¬¬ä¸€ç§æƒ…å†µã€‚è€Œç¬¬äºŒç§æƒ…å†µçš„åˆ†æè·¯å¾„åœ¨æ­£æ–‡ä¸­ä¹Ÿæ˜¯äº¤å¾…äº†çš„å“¦ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619804011,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":225544,"user_name":"wheatup","can_delete":false,"product_type":"c1","uid":2032945,"ip_address":"","ucode":"43B4791A9A6AD4","user_header":"https://static001.geekbang.org/account/avatar/00/1f/05/31/6370001e.jpg","comment_is_top":false,"comment_ctime":1591781989,"is_pvip":false,"replies":[{"id":"83237","content":"+1","user_name":"ä½œè€…å›å¤","user_name_real":"Aiming","uid":"1521669","ctime":1591905989,"ip_address":"","comment_id":225544,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5886749285","product_id":100039701,"comment_content":"å’Œsprintyçš„æ–¹æ³•ç±»ä¼¼ï¼Œåªä¸è¿‡é¿å…äº†æ±¡æŸ“å…¨å±€ä½œç”¨åŸŸï¼š<br><br>with ({ get x() { return Symbol() } }) {<br>\tconsole.log(x === x);  &#47;&#47; false<br>}<br>è¿™ä¸ªèƒ½æˆåŠŸçš„åŸå› æ˜¯è¿™é‡Œçš„ x å…¶å®æ˜¯æœ‰ [withObj].x å–å€¼çš„ä¸€ä¸ªæ“ä½œï¼Œç„¶ååˆ©ç”¨getterè¿”å›ä¸åŒçš„å€¼é€ æˆçš„ã€‚<br><br>---<br><br>çœŸè¦è¯´åˆ©ç”¨æœ¬èŠ‚è¯¾å­¦åˆ°çš„å†…å®¹çš„è¯ï¼Œå¯ä»¥æŠŠé¢˜ç›®çš„ x === x æ¢æˆ x &gt;= xï¼Œå•çº¯çš„x === xæ˜¯ä¸ä¼šè§¦å‘éšå¼ç±»å‹è½¬æ¢çš„ï¼Œè€Œjsåœ¨æ¯”è¾ƒå¤§å°æ—¶ä¸€å®šä¼šå°†å¯¹è±¡è½¬æ¢æˆæ•°å€¼å†è¿›è¡Œæ¯”è¾ƒï¼Œæ‰€ä»¥è¿™é‡Œå°±ä¼šè°ƒç”¨[Symbol.toPrimitive]ï¼Œè¿™æ—¶å€™å°±å¯ä»¥é‡å†™è¿™ä¸ªæ–¹æ³•åšäº›æ‰‹è„šï¼š<br><br>let x = {<br>\t[Symbol.toPrimitive]() {<br>\t\treturn Math.random();<br>\t}<br>};<br><br>console.log(x &gt;= x); &#47;&#47; trueå’Œfalseéƒ½æœ‰å¯èƒ½","like_count":1,"discussions":[{"author":{"id":1521669,"avatar":"https://static001.geekbang.org/account/avatar/00/17/38/05/7beecd5d.jpg","nickname":"Aiming","note":"","ucode":"66292B32F9960A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497887,"discussion_content":"+1","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591905989,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":339565,"user_name":"ğŸ‘£","can_delete":false,"product_type":"c1","uid":2195962,"ip_address":"","ucode":"0998E775EC1957","user_header":"https://static001.geekbang.org/account/avatar/00/21/81/fa/542577c8.jpg","comment_is_top":false,"comment_ctime":1648191169,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1648191169","product_id":100039701,"comment_content":"new Object === new Object","like_count":0},{"had_liked":false,"id":329813,"user_name":"æ³¢å“¥","can_delete":false,"product_type":"c1","uid":1998183,"ip_address":"","ucode":"373D587C2BD8AB","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIoYNYqumlObe08Gjq5PoHKn1gnKhoajZ1sc9AQ3xdJuXhnnLQ9HwPxTFSDo8G7YdL2Pk1rkiaibbNg/132","comment_is_top":false,"comment_ctime":1641547547,"is_pvip":false,"replies":[{"id":"120151","content":"è¯„è®ºä¸­æœ‰è§£è¯´è¿‡è¿™ä¸ªé—®é¢˜ï¼Œæ˜¯node&#47;æ§åˆ¶å°åŒ…è¿‡ä¸€æ¬¡ã€‚å¯ä»¥ç”¨ç”¨å¦‚ä¸‹å‘½ä»¤è¡Œè¯•è¯•ï¼š<br>```<br>&gt; node -p -e &#39;{} + {}&#39;<br>NaN<br><br>&gt; node -p -e &#39;{} + []&#39;<br>0<br>```","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1521669","ctime":1641606297,"ip_address":"","comment_id":329813,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1641547547","product_id":100039701,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œæˆ‘åœ¨æµè§ˆå™¨æ§åˆ¶å°ï¼Œnodeç¯å¢ƒæ§åˆ¶å°æˆ–è€…ä»£ç ä¸­ï¼š{} + {}çš„æ‰§è¡Œç»“æœéƒ½æ˜¯&quot;[object Object][object Object]&quot;ï¼Œä½†æ˜¯æ•™ç¨‹ä¸­çš„ç»“æœæ˜¯NaNï¼Œæ˜¯ä¸æ˜¯è¿˜æœ‰å…¶ä»–ç†è§£æ–¹å¼ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1521669,"avatar":"https://static001.geekbang.org/account/avatar/00/17/38/05/7beecd5d.jpg","nickname":"Aiming","note":"","ucode":"66292B32F9960A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":544609,"discussion_content":"è¯„è®ºä¸­æœ‰è§£è¯´è¿‡è¿™ä¸ªé—®é¢˜ï¼Œæ˜¯node/æ§åˆ¶å°åŒ…è¿‡ä¸€æ¬¡ã€‚å¯ä»¥ç”¨ç”¨å¦‚ä¸‹å‘½ä»¤è¡Œè¯•è¯•ï¼š\n```\n&gt; node -p -e &#39;{} + {}&#39;\nNaN\n\n&gt; node -p -e &#39;{} + []&#39;\n0\n```","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641606297,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":262615,"user_name":"æ²¹èœ","can_delete":false,"product_type":"c1","uid":2263588,"ip_address":"","ucode":"DB3334BC1720F1","user_header":"","comment_is_top":false,"comment_ctime":1605780406,"is_pvip":false,"replies":[{"id":"95309","content":"å¯¹äº`Number([])`æ¥è¯´ï¼Œè¿‡ç¨‹å¦‚ä¸‹ï¼š<br>====<br>Number([]) =&gt;<br><br>Number(ToNumber(ToPrimitive([]))) =&gt;<br><br>Number(ToNumber([].valueOf())) =&gt;<br><br>Number(ToNumber(&#39;&#39;)) =&gt;<br><br>Number(0) =&gt;<br><br>0<br>====<br>æ³¨æ„è¿™é‡Œçš„ç»“æœå€¼æ˜¯ä¸€ä¸ªå€¼ç±»å‹ï¼Œè€Œä¸æ˜¯å¯¹è±¡ç±»å‹ï¼Œæ‰€ä»¥`typeof Number([])`çš„å€¼å°†æ˜¯&quot;number&quot;ã€‚æ‰€ä»¥ï¼Œç¬¬ä¸€ä¸ªå¼å­ç­‰ä¹‰äº`0 == 0`ï¼Œå½“ç„¶æ˜¯trueã€‚<br><br>å¯¹äº`[] == []`æ¥è¯´ï¼Œä¸¤ä¸ªå¯¹è±¡å®ä¾‹çš„æ¯”è¾ƒæ€»æ˜¯falseã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Aiming","uid":"1521669","ctime":1605804014,"ip_address":"","comment_id":262615,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1605780406","product_id":100039701,"comment_content":"è€å¸ˆï¼ŒNumber([]) == Number([]) æ˜¯trueï¼Œä½†[] == [] æ˜¯falseï¼ŒåŠ¨æ€ç±»å‹è½¬æ¢å¦‚ä½•è§£é‡Šè¿™ä¸ªæ¡ˆä¾‹å‘¢ï¼Ÿ<br>------------<br>var x = [];<br>x === x &#47;&#47; true;<br>x === [] &#47;&#47; false;<br>[] === x &#47;&#47; false;<br>[] === [] &#47;&#47;false;","like_count":0,"discussions":[{"author":{"id":1521669,"avatar":"https://static001.geekbang.org/account/avatar/00/17/38/05/7beecd5d.jpg","nickname":"Aiming","note":"","ucode":"66292B32F9960A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":509898,"discussion_content":"å¯¹äº`Number([])`æ¥è¯´ï¼Œè¿‡ç¨‹å¦‚ä¸‹ï¼š\n====\nNumber([]) =&amp;gt;\n\nNumber(ToNumber(ToPrimitive([]))) =&amp;gt;\n\nNumber(ToNumber([].valueOf())) =&amp;gt;\n\nNumber(ToNumber(&amp;#39;&amp;#39;)) =&amp;gt;\n\nNumber(0) =&amp;gt;\n\n0\n====\næ³¨æ„è¿™é‡Œçš„ç»“æœå€¼æ˜¯ä¸€ä¸ªå€¼ç±»å‹ï¼Œè€Œä¸æ˜¯å¯¹è±¡ç±»å‹ï¼Œæ‰€ä»¥`typeof Number([])`çš„å€¼å°†æ˜¯&amp;quot;number&amp;quot;ã€‚æ‰€ä»¥ï¼Œç¬¬ä¸€ä¸ªå¼å­ç­‰ä¹‰äº`0 == 0`ï¼Œå½“ç„¶æ˜¯trueã€‚\n\nå¯¹äº`[] == []`æ¥è¯´ï¼Œä¸¤ä¸ªå¯¹è±¡å®ä¾‹çš„æ¯”è¾ƒæ€»æ˜¯falseã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605804014,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":221161,"user_name":"HoSalt","can_delete":false,"product_type":"c1","uid":1156074,"ip_address":"","ucode":"610B03E2A002D1","user_header":"https://static001.geekbang.org/account/avatar/00/11/a3/ea/53333dd5.jpg","comment_is_top":false,"comment_ctime":1590419053,"is_pvip":false,"replies":[{"id":"81603","content":"æ˜¯ã€‚å¦‚æœhintä¸æ˜¯defaultï¼Œé‚£ä¹ˆå°±ç›¸å½“äºæŒ‡å®šé¡ºåºäº†ã€‚<br><br>https:&#47;&#47;tc39.es&#47;ecma262&#47;#sec-toprimitive","user_name":"ä½œè€…å›å¤","user_name_real":"Aiming","uid":"1521669","ctime":1590460589,"ip_address":"","comment_id":221161,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1590419053","product_id":100039701,"comment_content":"ã€ŒDate() ç±»ä¸­ä»ç„¶æ˜¯ä¼šè°ƒç”¨ toString æˆ– valueOf çš„ï¼Œè¿™æ˜¯å› ä¸ºåœ¨å®ƒçš„Symbol.toPrimitiveå®ç°ä¸­ä»…æ˜¯è°ƒæ•´äº†ä¸¤ä¸ªæ–¹æ³•çš„è°ƒç”¨é¡ºåºï¼Œè€Œä¹‹åä»ç„¶æ˜¯è°ƒç”¨åŸå§‹çš„ã€å†…ç½®çš„ToPrimitive()æ–¹æ³•çš„ã€<br>è°ƒæ•´é¡ºåºæ˜¯å€¼hintå€¼ä¸ºdefaultçš„æƒ…å†µä¸‹ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1521669,"avatar":"https://static001.geekbang.org/account/avatar/00/17/38/05/7beecd5d.jpg","nickname":"Aiming","note":"","ucode":"66292B32F9960A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496360,"discussion_content":"æ˜¯ã€‚å¦‚æœhintä¸æ˜¯defaultï¼Œé‚£ä¹ˆå°±ç›¸å½“äºæŒ‡å®šé¡ºåºäº†ã€‚\n\nhttps://tc39.es/ecma262/#sec-toprimitive","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590460589,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":196951,"user_name":"K4SHIFZ","can_delete":false,"product_type":"c1","uid":1293057,"ip_address":"","ucode":"BFB49AAC0E4C74","user_header":"https://static001.geekbang.org/account/avatar/00/13/bb/01/568ac2d6.jpg","comment_is_top":false,"comment_ctime":1585324887,"is_pvip":false,"replies":[{"id":"74576","content":"ä¼šçš„ã€‚:)","user_name":"ä½œè€…å›å¤","user_name_real":"Aiming","uid":"1521669","ctime":1585375022,"ip_address":"","comment_id":196951,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1585324887","product_id":100039701,"comment_content":"è‡ªåŠ¨åˆ†å·æ’å…¥å¹¶ä¸ä¼šå°†{}+{} å˜æˆ{};+{} å§ï¼Ÿå› ä¸ºæ²¡æœ‰è¡Œç»“æŸç¬¦ã€‚","like_count":0,"discussions":[{"author":{"id":1521669,"avatar":"https://static001.geekbang.org/account/avatar/00/17/38/05/7beecd5d.jpg","nickname":"Aiming","note":"","ucode":"66292B32F9960A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":489421,"discussion_content":"ä¼šçš„ã€‚:)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585375022,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1293057,"avatar":"https://static001.geekbang.org/account/avatar/00/13/bb/01/568ac2d6.jpg","nickname":"K4SHIFZ","note":"","ucode":"BFB49AAC0E4C74","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":215816,"discussion_content":"æŠ±æ­‰è€å¸ˆæˆ‘æ ä¸€ä¸‹ï¼Œè§„èŒƒ11.9ç« ï¼šWhen, as the source text is parsed from left to right, a token (called the offending token) is encountered that is not allowed by any production of the grammar, then a semicolon is automatically inserted before the offending token if one or more of the following conditions is true:\n\nThe offending token is separated from the previous token by at least one LineTerminator.\nThe offending token is }.\nThe previous token is ) and the inserted semicolon would then be parsed as the terminating semicolon of a do-while statement (13.7.2).\n\nå®ƒè¯´æ˜¯before the offending tokenï¼Œåœ¨}ä¹‹å‰æ’å…¥ï¼Œæ‰€ä»¥åº”è¯¥å˜ä¸º{;}+{}ã€‚è¿™ä¹ˆç†è§£å¯¹å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585385943,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":166384,"user_name":"æ™“å°ä¸œ","can_delete":false,"product_type":"c1","uid":1194643,"ip_address":"","ucode":"93F9462EAAA63C","user_header":"https://static001.geekbang.org/account/avatar/00/12/3a/93/d7be8a1a.jpg","comment_is_top":false,"comment_ctime":1577440011,"is_pvip":true,"replies":[{"id":"63442","content":"æ˜¯çš„å‘€ã€‚<br><br>&gt; æ€»ç»“æ˜¯ï¼š åœ¨toPrimitiveï¼ˆï¼‰ä¸­è¦è·å–äº”ç§å€¼ç±»å‹æ•°æ®åŒ…æ‹¬undefined å’Œ nullï¼Œ ...<br>------<br><br>åœ¨ä¸Šä¸€å°èŠ‚é‡Œä¸æ˜¯è®²è¿‡äº†ä¹ˆï¼ŸåŸæ–‡æ˜¯ï¼š<br>&gt; &gt;  ä¸€ç§å…³äºâ€œåŸå§‹å€¼â€çš„ç®€å•è§£é‡Šæ˜¯ï¼šæ‰€æœ‰ 5 ç§èƒ½æ”¾å…¥ç§æœ‰æ§½ï¼ˆäº¦å³æ˜¯è¯´å®ƒä»¬æœ‰ç›¸åº”çš„åŒ…è£…ç±»ï¼‰çš„å€¼ï¼ˆValuesï¼‰ï¼Œéƒ½æ˜¯åŸå§‹å€¼ï¼›å¹¶ä¸”ï¼Œå†åŠ ä¸Šä¸¤ä¸ªç‰¹æ®Šå€¼ undefined å’Œ nullï¼Œé‚£ä¹ˆå°±æ˜¯æ‰€è°“åŸå§‹å€¼ï¼ˆPrimitive valuesï¼‰çš„å®Œæ•´é›†åˆäº†ã€‚<br><br>&gt; åªè¦valueOf è¿”å›äº”ç§å€¼ç±»å‹æ•°æ®ï¼Œ å°±ä¸ä¼štoString()æ–¹æ³•ï¼Œ åä¹‹å¦‚æœè¿˜æ˜¯å¯¹è±¡ç±»å‹ï¼Œå³ä½¿æ˜¯åŒ…è£…å¯¹è±¡å®ä¾‹ï¼Œè¿˜æ˜¯ä¼šè°ƒç”¨toStringæ–¹æ³•...<br>----<br>è¿™åœ¨è¿™ä¸€è®²çš„â€œæ­¥éª¤4â€ä¸­ä¹Ÿè®²åˆ°äº†ã€‚åŸæ–‡æ˜¯ï¼š<br>&gt; &gt; è¿™éœ€è¦åˆ©ç”¨åˆ°å¯¹è±¡çš„valueOf()å’ŒtoString()æ–¹æ³•ï¼šå½“é¢„æœŸæ˜¯â€œnumberâ€æ—¶ï¼ŒvalueOf()æ–¹æ³•ä¼˜å…ˆè°ƒç”¨ï¼›å¦åˆ™å°±ä»¥toString()ä¸ºä¼˜å…ˆã€‚å¹¶ä¸”ï¼Œé‡è¦çš„æ˜¯ï¼Œä¸Šé¢çš„é¢„æœŸåªå†³å®šäº†ä¸Šè¿°çš„ä¼˜å…ˆçº§ï¼Œè€Œå½“è°ƒç”¨ä¼˜å…ˆæ–¹æ³•ä»ç„¶å¾—ä¸åˆ°éå¯¹è±¡å€¼æ—¶ï¼Œè¿˜ä¼šé¡ºåºè°ƒç”¨å¦ä¸€æ–¹æ³•ã€‚<br><br>æœ€åï¼Œå…³äºDate()ç±»å‹ä¸­é¡ºåºç›¸åçš„é—®é¢˜ï¼Œæœ¬è®²é‡Œä¹Ÿæ˜¯è§£é‡Šäº†çš„å“Ÿå“Ÿå“Ÿå“Ÿ~ ^^.","user_name":"ä½œè€…å›å¤","user_name_real":"Aiming","uid":"1521669","ctime":1577459082,"ip_address":"","comment_id":166384,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1577440011","product_id":100039701,"comment_content":"è€å¸ˆæˆ‘æµ‹å¾ˆå¤šä»£ç å¾—å‡ºä¸€ä¸ªæ€»ç»“ï¼š<br>å‚ä¸ + æˆ– - è¿ç®— + - åªè®¤é‚£äº”ç§å€¼ç±»å‹æ•°æ®ï¼Œ<br>ä»åŒ…è£…å¯¹è±¡å®ä¾‹ï¼ˆStringï¼Œ Numberï¼Œ Boolean, Symbolï¼‰ï¼Œå’Œæ•°ç»„Object å¯¹è±¡è°ƒç”¨valueOfå¯ä»¥çœ‹å‡º<br>åªè¦valueOf è¿”å›äº”ç§å€¼ç±»å‹æ•°æ®ï¼Œ å°±ä¸ä¼štoString()æ–¹æ³•ï¼Œ åä¹‹å¦‚æœè¿˜æ˜¯å¯¹è±¡ç±»å‹ï¼Œå³ä½¿æ˜¯åŒ…è£…å¯¹è±¡å®ä¾‹ï¼Œè¿˜æ˜¯ä¼šè°ƒç”¨toStringæ–¹æ³•<br>æ€»ç»“æ˜¯ï¼š åœ¨toPrimitiveï¼ˆï¼‰ä¸­è¦è·å–äº”ç§å€¼ç±»å‹æ•°æ®åŒ…æ‹¬undefined å’Œ nullï¼Œ å¤§éƒ¨åˆ†æƒ…å†µä¸‹å¼•æ“éƒ½æ˜¯æŒ‰æ•°æ®å€¼ç±»å‹è¿›è¡Œé¢„æµ‹ï¼š å¦‚ä¸‹ï¼š<br>{}; + []<br>String(1) + [];<br>1 - [];<br>éƒ½æ˜¯valueOf -&gt; toString è¿‡ç¨‹<br><br>æœ€ç»ˆåœ¨toPrimitivie() ä¸­ æ ¹æ® + æˆ–è€… - ä»¥åŠè¿ç®—ç¬¦ä¸¤ä¾§å€¼ç±»å‹ è°ƒç”¨ç›¸åº”String æˆ–è€…Number è¿›è¡Œè½¬æ¢ æ±‚å€¼<br>æ‰€ä»¥æœ€ç»ˆçš„ç»“æœåªæœ‰ä¸‰ç§ å­—ç¬¦ä¸²ã€æ•°å€¼ã€å’Œ NaN<br><br>ç›´æ¥toStringå°±æ˜¯åœ¨æ¨¡æ¿å­—ç¬¦ä¸²ä¸­(ç›®å‰å‘ç°è¿™ä¸€ç§é™¤äº†Date)<br>`${x}`<br><br>æµ‹è¯•ä»£ç å¦‚ä¸‹ <br>ä»£ç é“¾æ¥ https:&#47;&#47;repl.it&#47;@XiaoDHuang&#47;MadEuphoricTabs<br><br>let valueOf = Array.prototype.valueOf<br>let toString = Array.prototype.toString;<br><br>Array.prototype.valueOf = function() {<br>    console.log(this.flag + &quot; valueOf&quot;)<br>    return valueOf.call(this);<br>}<br><br>Array.prototype.toString = function() {<br>    console.log(this.flag + &#39; toString&#39;);<br>    return toString.call(this);<br>}<br><br>var x = [];<br><br>x.flag = &#39;{}; + []&#39;;<br>{}; + x;<br><br>x.flag = &#39;String(1) + []&#39;;<br>console.log(1 + x);<br><br>x.flag = &#39;1 - []&#39;;<br>console.log(1 - x);<br><br>x.flag = &#39;`${x}`&#39;<br>console.log(`${x}`);","like_count":0,"discussions":[{"author":{"id":1521669,"avatar":"https://static001.geekbang.org/account/avatar/00/17/38/05/7beecd5d.jpg","nickname":"Aiming","note":"","ucode":"66292B32F9960A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479496,"discussion_content":"æ˜¯çš„å‘€ã€‚\n\n&amp;gt; æ€»ç»“æ˜¯ï¼š åœ¨toPrimitiveï¼ˆï¼‰ä¸­è¦è·å–äº”ç§å€¼ç±»å‹æ•°æ®åŒ…æ‹¬undefined å’Œ nullï¼Œ ...\n------\n\nåœ¨ä¸Šä¸€å°èŠ‚é‡Œä¸æ˜¯è®²è¿‡äº†ä¹ˆï¼ŸåŸæ–‡æ˜¯ï¼š\n&amp;gt; &amp;gt;  ä¸€ç§å…³äºâ€œåŸå§‹å€¼â€çš„ç®€å•è§£é‡Šæ˜¯ï¼šæ‰€æœ‰ 5 ç§èƒ½æ”¾å…¥ç§æœ‰æ§½ï¼ˆäº¦å³æ˜¯è¯´å®ƒä»¬æœ‰ç›¸åº”çš„åŒ…è£…ç±»ï¼‰çš„å€¼ï¼ˆValuesï¼‰ï¼Œéƒ½æ˜¯åŸå§‹å€¼ï¼›å¹¶ä¸”ï¼Œå†åŠ ä¸Šä¸¤ä¸ªç‰¹æ®Šå€¼ undefined å’Œ nullï¼Œé‚£ä¹ˆå°±æ˜¯æ‰€è°“åŸå§‹å€¼ï¼ˆPrimitive valuesï¼‰çš„å®Œæ•´é›†åˆäº†ã€‚\n\n&amp;gt; åªè¦valueOf è¿”å›äº”ç§å€¼ç±»å‹æ•°æ®ï¼Œ å°±ä¸ä¼štoString()æ–¹æ³•ï¼Œ åä¹‹å¦‚æœè¿˜æ˜¯å¯¹è±¡ç±»å‹ï¼Œå³ä½¿æ˜¯åŒ…è£…å¯¹è±¡å®ä¾‹ï¼Œè¿˜æ˜¯ä¼šè°ƒç”¨toStringæ–¹æ³•...\n----\nè¿™åœ¨è¿™ä¸€è®²çš„â€œæ­¥éª¤4â€ä¸­ä¹Ÿè®²åˆ°äº†ã€‚åŸæ–‡æ˜¯ï¼š\n&amp;gt; &amp;gt; è¿™éœ€è¦åˆ©ç”¨åˆ°å¯¹è±¡çš„valueOf()å’ŒtoString()æ–¹æ³•ï¼šå½“é¢„æœŸæ˜¯â€œnumberâ€æ—¶ï¼ŒvalueOf()æ–¹æ³•ä¼˜å…ˆè°ƒç”¨ï¼›å¦åˆ™å°±ä»¥toString()ä¸ºä¼˜å…ˆã€‚å¹¶ä¸”ï¼Œé‡è¦çš„æ˜¯ï¼Œä¸Šé¢çš„é¢„æœŸåªå†³å®šäº†ä¸Šè¿°çš„ä¼˜å…ˆçº§ï¼Œè€Œå½“è°ƒç”¨ä¼˜å…ˆæ–¹æ³•ä»ç„¶å¾—ä¸åˆ°éå¯¹è±¡å€¼æ—¶ï¼Œè¿˜ä¼šé¡ºåºè°ƒç”¨å¦ä¸€æ–¹æ³•ã€‚\n\næœ€åï¼Œå…³äºDate()ç±»å‹ä¸­é¡ºåºç›¸åçš„é—®é¢˜ï¼Œæœ¬è®²é‡Œä¹Ÿæ˜¯è§£é‡Šäº†çš„å“Ÿå“Ÿå“Ÿå“Ÿ~ ^^.","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577459082,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":166360,"user_name":"Astrogladiator-åŸƒè’‚çº³åº¦æ–¯","can_delete":false,"product_type":"c1","uid":1381243,"ip_address":"","ucode":"85015092B8E12A","user_header":"https://static001.geekbang.org/account/avatar/00/15/13/7b/74e90531.jpg","comment_is_top":false,"comment_ctime":1577438848,"is_pvip":true,"replies":[{"id":"63443","content":"ç»å¯¹æ˜¯è¿˜æœ‰çš„ã€‚è‡³å°‘ä¸€ä¸ªã€‚^^.","user_name":"ä½œè€…å›å¤","user_name_real":"Aiming","uid":"1521669","ctime":1577459109,"ip_address":"","comment_id":166360,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1577438848","product_id":100039701,"comment_content":"https:&#47;&#47;developer.mozilla.org&#47;en-US&#47;docs&#47;Web&#47;JavaScript&#47;Equality_comparisons_and_sameness<br><br>çœ‹äº†ä¸‹mdnï¼Œè¿˜çœŸæ˜¯åªæœ‰NaNè¿™ä¹ˆä¸€ç§æƒ…å†µã€‚<br><br>If Type(x) is different from Type(y), return false.<br>If Type(x) is Number or BigInt, then<br>Return ! Type(x)::equal(x, y).<br>Return ! SameValueNonNumeric(x, y).<br><br>Assert: Type(x) is not Number or BigInt.<br>Assert: Type(x) is the same as Type(y).<br>If Type(x) is Undefined, return true.<br>If Type(x) is Null, return true.<br>If Type(x) is String, then<br>If x and y are exactly the same sequence of code units (same length and same code units at corresponding indices), return true; otherwise, return false.<br>If Type(x) is Boolean, then<br>If x and y are both true or both false, return true; otherwise, return false.<br>If Type(x) is Symbol, then<br>If x and y are both the same Symbol value, return true; otherwise, return false.<br>If x and y are the same Object value, return true. Otherwise, return false.<br><br>æŒ‰ç…§https:&#47;&#47;tc39.es&#47;ecma262&#47;#sec-samevaluenonnumericçš„è¯´æ˜æµ‹è¯•äº†ä¸‹ä¹Ÿæ²¡æœ‰æ‰¾åˆ°å…¶ä»–çš„å¯èƒ½<br><br>å¥½å¥‡è¿™ä¸ªç­”æ¡ˆæ˜¯ä»€ä¹ˆ<br>","like_count":0,"discussions":[{"author":{"id":1521669,"avatar":"https://static001.geekbang.org/account/avatar/00/17/38/05/7beecd5d.jpg","nickname":"Aiming","note":"","ucode":"66292B32F9960A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479492,"discussion_content":"ç»å¯¹æ˜¯è¿˜æœ‰çš„ã€‚è‡³å°‘ä¸€ä¸ªã€‚^^.","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577459109,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1194643,"avatar":"https://static001.geekbang.org/account/avatar/00/12/3a/93/d7be8a1a.jpg","nickname":"æ™“å°ä¸œ","note":"","ucode":"93F9462EAAA63C","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":105696,"discussion_content":"æˆ‘ä¹Ÿæ²¡æ‰¾åˆ° æˆ‘è¯•å›¾æŸ¥çœ‹ === è¿ç®—æ˜¯è¿›è¡Œç›¸åº”toP Rimitive ä½†éƒ½æ²¡æˆåŠŸï¼Œ=== ä¸¤ä¾§ä¸è¿›è¡Œç±»å‹è½¬æ¢ï¼Œåˆ°åº•æ˜¯å•¥å‘¢ï¼Ÿï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577462925,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":166167,"user_name":"æ™“å°ä¸œ","can_delete":false,"product_type":"c1","uid":1194643,"ip_address":"","ucode":"93F9462EAAA63C","user_header":"https://static001.geekbang.org/account/avatar/00/12/3a/93/d7be8a1a.jpg","comment_is_top":false,"comment_ctime":1577410274,"is_pvip":true,"replies":[{"id":"63341","content":"Here:<br><br>https:&#47;&#47;tc39.es&#47;ecma262&#47;#sec-toboolean","user_name":"ä½œè€…å›å¤","user_name_real":"Aiming","uid":"1521669","ctime":1577421119,"ip_address":"","comment_id":166167,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1577410274","product_id":100039701,"comment_content":"è€å¸ˆè¿™ä¸ªâ€œå…¶ä¸­çš„ boolean æ˜¯é€šè¿‡æŸ¥è¡¨æ¥è¿›è¡Œçš„â€œ  è¿™ä¸ªæŸ¥è¡¨è¯¥å¦‚ä½•ç†è§£ï¼Ÿï¼Ÿï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1521669,"avatar":"https://static001.geekbang.org/account/avatar/00/17/38/05/7beecd5d.jpg","nickname":"Aiming","note":"","ucode":"66292B32F9960A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479427,"discussion_content":"Here:\n\nhttps://tc39.es/ecma262/#sec-toboolean","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577421119,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":166147,"user_name":"æ½‡æ½‡é›¨æ­‡","can_delete":false,"product_type":"c1","uid":1251429,"ip_address":"","ucode":"4BD52BF0F0A084","user_header":"https://static001.geekbang.org/account/avatar/00/13/18/65/35361f02.jpg","comment_is_top":false,"comment_ctime":1577409095,"is_pvip":false,"replies":[{"id":"63843","content":"å‚è§ @sprinty çš„ç­”æ¡ˆå“Ÿã€‚æ€»ç®—æœ‰äººç»™å‡ºæ¥è¿™ä¸ªæ ‡å‡†ç­”æ¡ˆäº†ã€‚å‘µå‘µ~","user_name":"ä½œè€…å›å¤","user_name_real":"Aiming","uid":"1521669","ctime":1577559403,"ip_address":"","comment_id":166147,"utype":1}],"discussion_count":7,"race_medal":0,"score":"1577409095","product_id":100039701,"comment_content":"æƒ³ä¸å‡ºå•¦â€¦â€¦NaNä¸æ˜¯å”¯ä¸€çš„å—","like_count":0,"discussions":[{"author":{"id":1521669,"avatar":"https://static001.geekbang.org/account/avatar/00/17/38/05/7beecd5d.jpg","nickname":"Aiming","note":"","ucode":"66292B32F9960A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479419,"discussion_content":"å‚è§ @sprinty çš„ç­”æ¡ˆå“Ÿã€‚æ€»ç®—æœ‰äººç»™å‡ºæ¥è¿™ä¸ªæ ‡å‡†ç­”æ¡ˆäº†ã€‚å‘µå‘µ~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577559403,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1251429,"avatar":"https://static001.geekbang.org/account/avatar/00/13/18/65/35361f02.jpg","nickname":"æ½‡æ½‡é›¨æ­‡","note":"","ucode":"4BD52BF0F0A084","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":107435,"discussion_content":"æƒ³è¿‡symbol","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577581116,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1521669,"avatar":"https://static001.geekbang.org/account/avatar/00/17/38/05/7beecd5d.jpg","nickname":"Aiming","note":"","ucode":"66292B32F9960A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":105293,"discussion_content":"ç»§ç»­ç»§ç»­~ å“ˆå“ˆ~ ^^.","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577459898,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1521669,"avatar":"https://static001.geekbang.org/account/avatar/00/17/38/05/7beecd5d.jpg","nickname":"Aiming","note":"","ucode":"66292B32F9960A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":104315,"discussion_content":"ç»§ç»­åŠªåŠ›ğŸ’ª","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577423719,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1251429,"avatar":"https://static001.geekbang.org/account/avatar/00/13/18/65/35361f02.jpg","nickname":"æ½‡æ½‡é›¨æ­‡","note":"","ucode":"4BD52BF0F0A084","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1521669,"avatar":"https://static001.geekbang.org/account/avatar/00/17/38/05/7beecd5d.jpg","nickname":"Aiming","note":"","ucode":"66292B32F9960A","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":104319,"discussion_content":"å“ˆå“ˆï¼ŒğŸ’ª","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577424070,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":104315,"ip_address":""},"score":104319,"extra":""},{"author":{"id":1251429,"avatar":"https://static001.geekbang.org/account/avatar/00/13/18/65/35361f02.jpg","nickname":"æ½‡æ½‡é›¨æ­‡","note":"","ucode":"4BD52BF0F0A084","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1521669,"avatar":"https://static001.geekbang.org/account/avatar/00/17/38/05/7beecd5d.jpg","nickname":"Aiming","note":"","ucode":"66292B32F9960A","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":104320,"discussion_content":"ä¸€èµ·åŠ æ²¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577424151,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":104315,"ip_address":""},"score":104320,"extra":""}]},{"author":{"id":1251429,"avatar":"https://static001.geekbang.org/account/avatar/00/13/18/65/35361f02.jpg","nickname":"æ½‡æ½‡é›¨æ­‡","note":"","ucode":"4BD52BF0F0A084","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":104297,"discussion_content":"æƒ³ä¸å‡ºæ¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577422360,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}