{"id":195329,"title":"16 | 选项数据热更新：让服务感知配置的变化","content":"<p><strong>课件和Demo地址</strong><br>\n<a href=\"https://gitee.com/geektime-geekbang/NET-Core\">https://gitee.com/geektime-geekbang/NET-Core</a></p>","comments":[{"had_liked":false,"id":180387,"user_name":"木风","can_delete":false,"product_type":"c3","uid":1339677,"ip_address":"","ucode":"3BAA80C2F1FB68","user_header":"https://static001.geekbang.org/account/avatar/00/14/71/1d/8d1d27b2.jpg","comment_is_top":false,"comment_ctime":1582273334,"is_pvip":false,"replies":[{"id":70455,"content":"直接在服务中读取json，就意味着服务依赖了整个配置文件，而服务只应该关注它依赖的部分，因此它应该依赖的是自己的Options。\n使用Options另外一个好处是强类型，可以除了可以承载基础类型的数据外，还可以承载Action动作的，意味着你可以为服务配置一些动态逻辑进去。","user_name":"作者回复","user_name_real":"肖伟宇","uid":1756585,"ctime":1582691071,"ip_address":"","comment_id":180387,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100044601,"comment_content":"边看边冒出一堆问题，直接在服务里读json或ini文件不行吗？为什么需要用Option呢？ 为什么单例服务才使用IOptionsMonitor？ 在那有相关文档说明？...我想肖老师，如果除了讲解代码外，要是能介绍多一些这功能使用场景，和这么写代码有什么好处，就更好了，谢谢。","like_count":5,"discussions":[{"author":{"id":1756585,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cd/a9/791d0f5e.jpg","nickname":"老肖想当外语大佬","note":"","ucode":"F662D1BF671E92","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484640,"discussion_content":"直接在服务中读取json，就意味着服务依赖了整个配置文件，而服务只应该关注它依赖的部分，因此它应该依赖的是自己的Options。\n使用Options另外一个好处是强类型，可以除了可以承载基础类型的数据外，还可以承载Action动作的，意味着你可以为服务配置一些动态逻辑进去。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582691071,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2055628,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/gy2iczMib1M8hjwZAjvTGSlpRrteBcbs2C8KYNTqELt4DiaWLhJXTEYLHiaJaiapArFGYjyx05xawGysaX5Xmrtj3lQ/132","nickname":"匿名上神","note":"","ucode":"E4C6D44A0C268A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":288591,"discussion_content":"Options让服务更专注自身的配置操作以及业务实现，不关心配置源（或配置文件）具体长什么样，如何Build出来的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593813160,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1015235,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7d/c3/f7588426.jpg","nickname":"Null","note":"","ucode":"24C5BAD847D88D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":210802,"discussion_content":"这个不是代码行不行的问题，而是我们要做到服务不依赖具体的配置，做到“解耦”。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584776468,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":184060,"user_name":"landon","can_delete":false,"product_type":"c3","uid":1128240,"ip_address":"","ucode":"806A68001FD079","user_header":"https://static001.geekbang.org/account/avatar/00/11/37/30/4c07e83f.jpg","comment_is_top":false,"comment_ctime":1583215605,"is_pvip":false,"replies":[{"id":71576,"content":"使用IOptionsMonitor&lt;T&gt;来读取配置，将数据库链接的构造注册为Scope且使用。或者注册工厂方法，类似这样：\nservices.AddScoped&lt;IDbConnection&gt;(provider =&gt; new MySqlConnection(Configuration[&quot;MySql&quot;]));\n\n这样当配置变化后，后续的请求会读到新配置","user_name":"作者回复","user_name_real":"肖伟宇","uid":1756585,"ctime":1583564054,"ip_address":"","comment_id":184060,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100044601,"comment_content":"老师，这里如果我使用FreeSql&#47;SqlSugar这类的ORM，我要怎样才能配置成感知配置变化呢？我试了，好像有问题，但是如果是其他配置是没问题的，数据库这一块还是搞不清","like_count":2,"discussions":[{"author":{"id":1756585,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cd/a9/791d0f5e.jpg","nickname":"老肖想当外语大佬","note":"","ucode":"F662D1BF671E92","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":485873,"discussion_content":"使用IOptionsMonitor&amp;lt;T&amp;gt;来读取配置，将数据库链接的构造注册为Scope且使用。或者注册工厂方法，类似这样：\nservices.AddScoped&amp;lt;IDbConnection&amp;gt;(provider =&amp;gt; new MySqlConnection(Configuration[&amp;quot;MySql&amp;quot;]));\n\n这样当配置变化后，后续的请求会读到新配置","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583564054,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1015235,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7d/c3/f7588426.jpg","nickname":"Null","note":"","ucode":"24C5BAD847D88D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":210801,"discussion_content":"肖老师这个例子举的非常好，数据库连接字符串，当成options，动态感知变化，就可以实时改变数据库对应的连接","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584776315,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":184051,"user_name":"landon","can_delete":false,"product_type":"c3","uid":1128240,"ip_address":"","ucode":"806A68001FD079","user_header":"https://static001.geekbang.org/account/avatar/00/11/37/30/4c07e83f.jpg","comment_is_top":false,"comment_ctime":1583212704,"is_pvip":false,"replies":[{"id":71577,"content":"将connectionString 获取逻辑写在Builder的逻辑中即可：\n\npublic static IServiceCollection AddMySqlDomainContext(this IServiceCollection services, IConfiguration configuration)\n        {\n            return services.AddDomainContext(builder =&gt;\n            {\n                var connectionString = configuration.GetValue&lt;string&gt;(&quot;Mysql&quot;);\n                builder.UseMySql(connectionString);\n            });\n        }","user_name":"作者回复","user_name_real":"肖伟宇","uid":1756585,"ctime":1583564600,"ip_address":"","comment_id":184051,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100044601,"comment_content":"肖老师，有个问题想问问，就是如果我再webapi中想将数据库的配置设置成感知变化，那我是讲OnChanges写在public void ConfigureServices(IServiceCollection services) 方法里吗？比如我前面已经将Db的配置设置了，后面直接覆盖可以吗？这个代码是否可以呢？\n            services.Configure&lt;OptionConfig&gt;(Configuration.GetSection(&quot;DbConfig&quot;));\n\n\n            IChangeToken token = Configuration.GetReloadToken();\n            ChangeToken.OnChange(() =&gt; Configuration.GetReloadToken(), () =&gt;\n            {\n                services.Configure&lt;OptionConfig&gt;(Configuration.GetSection(&quot;DbConfig&quot;));\n            });\n","like_count":1,"discussions":[{"author":{"id":1756585,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cd/a9/791d0f5e.jpg","nickname":"老肖想当外语大佬","note":"","ucode":"F662D1BF671E92","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":485868,"discussion_content":"将connectionString 获取逻辑写在Builder的逻辑中即可：\n\npublic static IServiceCollection AddMySqlDomainContext(this IServiceCollection services, IConfiguration configuration)\n        {\n            return services.AddDomainContext(builder =&amp;gt;\n            {\n                var connectionString = configuration.GetValue&amp;lt;string&amp;gt;(&amp;quot;Mysql&amp;quot;);\n                builder.UseMySql(connectionString);\n            });\n        }","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583564600,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1160522,"avatar":"https://static001.geekbang.org/account/avatar/00/11/b5/4a/f5a9a8d1.jpg","nickname":"静坐听雨","note":"","ucode":"AE48B6393EC048","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":293279,"discussion_content":"这个 builder 能否提供完整的代码\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595497128,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":215627,"discussion_content":"Configure默认是ReloadOnChange=true","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585363138,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":216964,"user_name":"向洪林","can_delete":false,"product_type":"c3","uid":1997325,"ip_address":"","ucode":"F3DF7D8D3B9186","user_header":"https://static001.geekbang.org/account/avatar/00/1e/7a/0d/27413925.jpg","comment_is_top":false,"comment_ctime":1589378120,"is_pvip":false,"replies":[{"id":80574,"content":"ASP.NET Core类型的项目，调试模式下被优化了","user_name":"作者回复","user_name_real":"肖伟宇","uid":1756585,"ctime":1589682062,"ip_address":"","comment_id":216964,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100044601,"comment_content":"这里有个疑惑。debug模式不是调用的bin&#47;debug文件下的app setting. json文件的配置吗？为啥在解决方案里直接改配置能够生效？","like_count":0,"discussions":[{"author":{"id":1756585,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cd/a9/791d0f5e.jpg","nickname":"老肖想当外语大佬","note":"","ucode":"F662D1BF671E92","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":494995,"discussion_content":"ASP.NET Core类型的项目，调试模式下被优化了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589682062,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1997325,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/7a/0d/27413925.jpg","nickname":"向洪林","note":"","ucode":"F3DF7D8D3B9186","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":267736,"discussion_content":"好的，我测试下！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589682128,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":203085,"user_name":"药王","can_delete":false,"product_type":"c3","uid":1124237,"ip_address":"","ucode":"18C8DCC35834F4","user_header":"https://static001.geekbang.org/account/avatar/00/11/27/8d/5a507812.jpg","comment_is_top":false,"comment_ctime":1586138073,"is_pvip":false,"replies":[{"id":77426,"content":"组件并未提供反向变更数据源的能力，从设计上也不建议这么做。\n\n更好的做法是，专门为配置数据源设计修改它的类（或者组件）","user_name":"作者回复","user_name_real":"肖伟宇","uid":1756585,"ctime":1587041437,"ip_address":"","comment_id":203085,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100044601,"comment_content":"肖老师，我想问一下怎么样实现：在代码中修改Options的值，然后用修改后的值更新配置文件。配置源是xml或json。","like_count":0,"discussions":[{"author":{"id":1756585,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cd/a9/791d0f5e.jpg","nickname":"老肖想当外语大佬","note":"","ucode":"F662D1BF671E92","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490757,"discussion_content":"组件并未提供反向变更数据源的能力，从设计上也不建议这么做。\n\n更好的做法是，专门为配置数据源设计修改它的类（或者组件）","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587041437,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":194790,"user_name":"人间有妖气","can_delete":false,"product_type":"c3","uid":1916587,"ip_address":"","ucode":"1E98DFCAB3BADD","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eq9Kq8OPa3fzicibQS7OKYkC08QuhmMDmkQ0zX5rDUQeKMsOIDibq42vKVqAcIYqCoM2b5p0vTvO14iaA/132","comment_is_top":false,"comment_ctime":1585106571,"is_pvip":false,"replies":[{"id":77438,"content":"IOption&lt;&gt;是单例的，它不跟踪配置更新，读不到更新后的值。\nIOptionMonitor &lt;&gt;是单例的，它跟踪配置更新，总是读到最新的值。\n\nIOptionSnapshot&lt;&gt;是范围的，它在范围的生命周期中，不会更新，但它会读到范围生命周期创建前的变更。","user_name":"作者回复","user_name_real":"肖伟宇","uid":1756585,"ctime":1587043332,"ip_address":"","comment_id":194790,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100044601,"comment_content":"IOptionMonitor 发现注册Singleton，Scoped，Transient都可以获取改动的配置，为什么还要区分IOptionSnapshot和IOptionMonitor呢？ 还有 IOption 在Singleton，Scoped，Transient下都不会获取到改变的配置，那为什还用他和配置文件绑定呢？ 什么情况会用到IOption？","like_count":0,"discussions":[{"author":{"id":1756585,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cd/a9/791d0f5e.jpg","nickname":"老肖想当外语大佬","note":"","ucode":"F662D1BF671E92","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488901,"discussion_content":"IOption&amp;lt;&amp;gt;是单例的，它不跟踪配置更新，读不到更新后的值。\nIOptionMonitor &amp;lt;&amp;gt;是单例的，它跟踪配置更新，总是读到最新的值。\n\nIOptionSnapshot&amp;lt;&amp;gt;是范围的，它在范围的生命周期中，不会更新，但它会读到范围生命周期创建前的变更。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587043332,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":215628,"discussion_content":" IOptions<T> 和IOptionsMonitor<T> 都是单例。IOptions<T>读取到的值永远不会变。\nIOptionsMonitor<T>读取到的值，会是配置变化后的值，也就是会保持是新值。\nIOptionSnapshot是适用于Scoped服务的，不能被单例服务依赖。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585363237,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":183255,"user_name":"WEDO","can_delete":false,"product_type":"c3","uid":1812018,"ip_address":"","ucode":"6E33273FBAF8F1","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJScl4XnKfaibJ1vgp8BMPzO4v18xo4XWX8hjS7kbqnRkiac8wBVsflt2df78rhpdU5kNep3YDaPblg/132","comment_is_top":false,"comment_ctime":1582982862,"is_pvip":false,"replies":[{"id":70983,"content":"直接用ILogger记录日志即可，在配置文件配置Console的输出级别","user_name":"作者回复","user_name_real":"肖伟宇","uid":1756585,"ctime":1583044212,"ip_address":"","comment_id":183255,"utype":1}],"discussion_count":4,"race_medal":0,"score":2,"product_id":100044601,"comment_content":"请问一下在启动mvc web程序后，同时可以显示命令行窗口，Console.WriteLine输出的内容，可以在窗口中显示出来。","like_count":0,"discussions":[{"author":{"id":1756585,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cd/a9/791d0f5e.jpg","nickname":"老肖想当外语大佬","note":"","ucode":"F662D1BF671E92","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":485619,"discussion_content":"直接用ILogger记录日志即可，在配置文件配置Console的输出级别","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583044212,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":215633,"discussion_content":"试试如下：\nservices.AddLogging(logging=>\n{\n        logging.AddConfiguration(Configuration.GetSection(&#34;Logging&#34;));\n        logging.AddConsole();\n});","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585363565,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1812018,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJScl4XnKfaibJ1vgp8BMPzO4v18xo4XWX8hjS7kbqnRkiac8wBVsflt2df78rhpdU5kNep3YDaPblg/132","nickname":"WEDO","note":"","ucode":"6E33273FBAF8F1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":193347,"discussion_content":"我看到你演示的时候，不是ILogger 输出的，你是代码里Console. WriteLine输出的。可以介绍一下方法吗","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583148486,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1809686,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/16/a2fb8136.jpg","nickname":"季某人","note":"","ucode":"1EEF2A58C3BD79","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1812018,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJScl4XnKfaibJ1vgp8BMPzO4v18xo4XWX8hjS7kbqnRkiac8wBVsflt2df78rhpdU5kNep3YDaPblg/132","nickname":"WEDO","note":"","ucode":"6E33273FBAF8F1","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":193806,"discussion_content":"直接Console. WriteLine就行，本质是一个控制台程序","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583162256,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":193347,"ip_address":"","group_id":0},"score":193806,"extra":""}]}]},{"had_liked":false,"id":396039,"user_name":"岁如","can_delete":false,"product_type":"c3","uid":2415917,"ip_address":"日本","ucode":"686E4CA4D24701","user_header":"https://static001.geekbang.org/account/avatar/00/24/dd/2d/9ed11e6f.jpg","comment_is_top":false,"comment_ctime":1732782334,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100044601,"comment_content":"不错  了解到了更多的细节技巧","like_count":0},{"had_liked":false,"id":304033,"user_name":"Geek_Zhengyu","can_delete":false,"product_type":"c3","uid":2705491,"ip_address":"","ucode":"FFD9E0BBEE0293","user_header":"","comment_is_top":false,"comment_ctime":1627199279,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100044601,"comment_content":"感觉这一节真有用！","like_count":0},{"had_liked":false,"id":299355,"user_name":"吴华杰","can_delete":false,"product_type":"c3","uid":1809103,"ip_address":"","ucode":"614C9784F93981","user_header":"","comment_is_top":false,"comment_ctime":1624591782,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100044601,"comment_content":"肖老师，请问下 这些选项配置相关框架，在.net framework中支持吗？","like_count":0},{"had_liked":false,"id":263384,"user_name":"背包客","can_delete":false,"product_type":"c3","uid":1671740,"ip_address":"","ucode":"C07A0F137C5CB5","user_header":"https://static001.geekbang.org/account/avatar/00/19/82/3c/8a0cacd4.jpg","comment_is_top":false,"comment_ctime":1606121874,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100044601,"comment_content":"老师你好：\n _orderOption.OnChange(orderOption=&gt;\n            {\n                Console.WriteLine(orderOption.MaxCount);\n            });\n\n我想把这里监听的值，怎么赋给其他对象","like_count":0},{"had_liked":false,"id":258625,"user_name":"一杯Latte","can_delete":false,"product_type":"c3","uid":1981333,"ip_address":"","ucode":"ED6BDD4BBC6BA2","user_header":"https://static001.geekbang.org/account/avatar/00/1e/3b/95/4b3d05b0.jpg","comment_is_top":false,"comment_ctime":1604508599,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100044601,"comment_content":"services.AddOptions&lt;OrderServiceOptions&gt;().Configure(options =&gt;\n            {\n                configuration.Bind(options);\n            });   老师您好，我使用这种方式，如果是单例模式下，热更新不起作用，但是用services.Configure&lt;OrderServiceOptions&gt;(configuration)这种方式热更新就起作用，这是因为啥？","like_count":0},{"had_liked":false,"id":252382,"user_name":"Kwok","can_delete":false,"product_type":"c3","uid":2052404,"ip_address":"","ucode":"514D59DFB6B1E0","user_header":"https://static001.geekbang.org/account/avatar/00/1f/51/34/dd1d4e85.jpg","comment_is_top":false,"comment_ctime":1602259604,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100044601,"comment_content":"肖老师，请问下：\nScoped范围作用域模式，需要使用IOptionsSnapshot，\n单例模式，需要使用IOptionsMonitor，\n那么Transient瞬时模式下，使用IOptionsSnapshot、IOptionsMonitor中的哪种？","like_count":0}]}