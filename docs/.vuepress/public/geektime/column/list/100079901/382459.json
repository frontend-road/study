{"id":382459,"title":"07ï½œå…¨å±€çŠ¶æ€ç®¡ç†ï¼šå¦‚ä½•åœ¨å‡½æ•°ç»„ä»¶ä¸­ä½¿ç”¨ Reduxï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯ç‹æ²›ã€‚ä»Šå¤©æˆ‘ä»¬æ¥èŠèŠæ€ä¹ˆåœ¨å‡½æ•°ç»„ä»¶ä¸­ä½¿ç”¨Reduxã€‚</p><p>Redux ä½œä¸ºä¸€æ¬¾çŠ¶æ€ç®¡ç†æ¡†æ¶å•Šï¼Œæ˜¯å…¬è®¤çš„React å¼€å‘ä¸­æœ€å¤§çš„ä¸€ä¸ªé—¨æ§›ï¼Œä½†åŒæ—¶å‘¢ï¼Œå®ƒä¹Ÿæ˜¯ React å¼€å‘äººå‘˜å¿…é¡»æŒæ¡çš„ä¸€é¡¹æŠ€èƒ½ã€‚å› ä¸ºåªæœ‰ç†Ÿç»ƒåº”ç”¨ Reduxï¼Œä½ æ‰èƒ½æ›´åŠ çµæ´»åœ°ä½¿ç”¨ Reactï¼Œæ¥ä»å®¹åº”å¯¹å¤§å‹é¡¹ç›®çš„å¼€å‘éš¾é¢˜ã€‚</p><p>è¿™é‡Œæˆ‘è¦è¯´å¥é¢˜å¤–è¯ã€‚Reduxè¯ç”Ÿäº 2015 å¹´ï¼Œä¹Ÿå°±æ˜¯React å‡ºç°ä¹‹åä¸€å¹´å¤šã€‚è™½ç„¶ä¸€å¼€å§‹æ˜¯ç”±ç¬¬ä¸‰æ–¹å¼€å‘è€…å¼€æºï¼Œä¸æ˜¯ Facebook å®˜æ–¹ï¼Œä½†æ˜¯ä¹Ÿè¿…é€Ÿæˆä¸ºäº†æœ€ä¸ºä¸»æµçš„ React çŠ¶æ€ç®¡ç†åº“ã€‚è€Œä¸”ï¼Œä¹‹å Redux è·Ÿå®ƒçš„å¼€å‘è€… Dan Abbramov å’Œ Andrew Clark ä¸€èµ·ï¼Œéƒ½è¢« Facebook æ”¶ç¼–ï¼Œæˆä¸º React å®˜æ–¹ç”Ÿæ€çš„ä¸€éƒ¨åˆ†ã€‚ä¾§é¢å¯ä»¥çœ‹åˆ° Redux åœ¨React ä¸­çš„é‡è¦ä½œç”¨ã€‚</p><p>éœ€è¦è¯´æ˜çš„æ˜¯ï¼ŒRedux ä½œä¸ºä¸€å¥—ç‹¬ç«‹çš„æ¡†æ¶ï¼Œè™½ç„¶å¯ä»¥å’Œä»»ä½• UI æ¡†æ¶ç»“åˆèµ·æ¥ä½¿ç”¨ã€‚ä½†æ˜¯å› ä¸ºå®ƒåŸºäºä¸å¯å˜æ•°æ®çš„æœºåˆ¶ï¼Œå¯ä»¥è¯´ï¼ŒåŸºæœ¬ä¸Šå°±æ˜¯ä¸º React é‡èº«å®šåˆ¶çš„ã€‚</p><p>ä¸è¿‡ä½ å¯èƒ½ä¼šè¯´ï¼ŒRedux ä¸Šæ‰‹æ¯”è¾ƒéš¾ï¼Œè¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿçš„ç¡®æ˜¯è¿™æ ·ï¼Œå› Reduxå¼•å…¥äº†ä¸€äº›æ–°çš„ç¼–ç¨‹æ€æƒ³ï¼Œè¿˜æœ‰æ¯”è¾ƒç¹ççš„æ ·æ¿ä»£ç ï¼Œç¡®å®å¸¦æ¥äº†ä¸€å®šçš„ä¸Šæ‰‹éš¾åº¦ã€‚</p><p>ä½†æ˜¯ä½ ä¸è¦æ‹…å¿ƒï¼Œä»Šå¤©è¿™èŠ‚è¯¾ï¼Œæˆ‘ä¼šé€šè¿‡å…·ä½“çš„ä¾‹å­å¸¦ä½ ä¸Šæ‰‹Reduxã€‚è€Œä¸”æˆ‘ä¼šè®²è§£ Redux è¦è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Œå¼•å…¥äº†ä»€ä¹ˆæ ·çš„æ–°æ¦‚å¿µï¼Œäº‰å–èƒ½ä»æœ¬è´¨ä¸Šå»ç†è§£ Redux çš„ç†å¿µå’Œä½¿ç”¨æ–¹æ³•ï¼Œæé«˜ä½ ä¸¾ä¸€åä¸‰çš„èƒ½åŠ›ã€‚</p><!-- [[[read_end]]] --><h1>Redux å‡ºç°çš„èƒŒæ™¯</h1><p>å¾ˆå¤šåŒå­¦ä¸€å¼€å§‹å¯èƒ½ä¸å¤ªæ˜ç™½çŠ¶æ€ç®¡ç†æ¡†æ¶çš„ä½œç”¨ã€‚ä½†æ˜¯å¦‚æœéšç€å¯¹ React ä½¿ç”¨çš„æ·±å…¥ï¼Œä½ ä¼šå‘ç°ç»„ä»¶çº§åˆ«çš„ stateï¼Œå’Œä»ä¸Šè€Œä¸‹ä¼ é€’çš„ props è¿™ä¸¤ä¸ªçŠ¶æ€æœºåˆ¶ï¼Œæ— æ³•æ»¡è¶³å¤æ‚åŠŸèƒ½çš„éœ€è¦ã€‚ä¾‹å¦‚è·¨å±‚çº§ä¹‹é—´çš„ç»„ä»¶çš„æ•°æ®å…±äº«å’Œä¼ é€’ã€‚æˆ‘ä»¬å¯ä»¥ä»ä¸‹å›¾çš„å¯¹æ¯”å»ç†è§£ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/f3/46/f3ba61ff5de2c3c6fbd658a22c00bf46.png?wh=2640*1100\" alt=\"\"></p><p>å…¶ä¸­å·¦å›¾æ˜¯å•ä¸ª React ç»„ä»¶ï¼Œå®ƒçš„çŠ¶æ€å¯ä»¥ç”¨å†…éƒ¨çš„ state æ¥ç»´æŠ¤ï¼Œè€Œä¸”è¿™ä¸ª state åœ¨ç»„ä»¶å¤–éƒ¨æ˜¯æ— æ³•è®¿é—®çš„ã€‚è€Œå³å›¾åˆ™æ˜¯ä½¿ç”¨ Redux çš„åœºæ™¯ï¼Œç”¨å…¨å±€å”¯ä¸€çš„ Store ç»´æŠ¤äº†æ•´ä¸ªåº”ç”¨ç¨‹åºçš„çŠ¶æ€ã€‚å¯ä»¥è¯´ï¼Œå¯¹äºé¡µé¢çš„å¤šä¸ªç»„ä»¶ï¼Œéƒ½æ˜¯ä»è¿™ä¸ª Store æ¥è·å–çŠ¶æ€çš„ï¼Œä¿è¯ç»„ä»¶ä¹‹é—´èƒ½å¤Ÿå…±äº«çŠ¶æ€ã€‚</p><p>æ‰€ä»¥ä»è¿™å¼ å¯¹æ¯”å›¾ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ° Redux Store çš„ä¸¤ä¸ªç‰¹ç‚¹ï¼š</p><ol>\n<li><strong>Redux Store æ˜¯å…¨å±€å”¯ä¸€çš„</strong>ã€‚å³æ•´ä¸ªåº”ç”¨ç¨‹åºä¸€èˆ¬åªæœ‰ä¸€ä¸ª Storeã€‚</li>\n<li><strong>Redux Store æ˜¯æ ‘çŠ¶ç»“æ„</strong>ï¼Œå¯ä»¥æ›´å¤©ç„¶åœ°æ˜ å°„åˆ°ç»„ä»¶æ ‘çš„ç»“æ„ï¼Œè™½ç„¶ä¸æ˜¯å¿…é¡»çš„ã€‚</li>\n</ol><p>æˆ‘ä»¬é€šè¿‡æŠŠçŠ¶æ€æ”¾åœ¨ç»„ä»¶ä¹‹å¤–ï¼Œå°±å¯ä»¥è®© React ç»„ä»¶æˆä¸ºæ›´åŠ çº¯ç²¹çš„è¡¨ç°å±‚ï¼Œé‚£ä¹ˆå¾ˆå¤šå¯¹äºä¸šåŠ¡æ•°æ®å’ŒçŠ¶æ€æ•°æ®çš„ç®¡ç†ï¼Œå°±éƒ½å¯ä»¥åœ¨ç»„ä»¶ä¹‹å¤–å»å®Œæˆï¼ˆåé¢è¯¾ç¨‹ä¼šä»‹ç»çš„ Reducer å’Œ Actionï¼‰ã€‚åŒæ—¶è¿™ä¹Ÿå¤©ç„¶æä¾›äº†çŠ¶æ€å…±äº«çš„èƒ½åŠ›ï¼Œæœ‰ä¸¤ä¸ªåœºæ™¯å¯ä»¥å…¸å‹åœ°ä½“ç°å‡ºè¿™ä¸€ç‚¹ã€‚</p><ol>\n<li>è·¨ç»„ä»¶çš„çŠ¶æ€å…±äº«ï¼šå½“æŸä¸ªç»„ä»¶å‘èµ·ä¸€ä¸ªè¯·æ±‚æ—¶ï¼Œå°†æŸä¸ª Loading çš„æ•°æ®çŠ¶æ€è®¾ä¸º Trueï¼Œå¦ä¸€ä¸ªå…¨å±€çŠ¶æ€ç»„ä»¶åˆ™æ˜¾ç¤º Loading çš„çŠ¶æ€ã€‚</li>\n<li>åŒç»„ä»¶å¤šä¸ªå®ä¾‹çš„çŠ¶æ€å…±äº«ï¼šæŸä¸ªé¡µé¢ç»„ä»¶åˆæ¬¡åŠ è½½æ—¶ï¼Œä¼šå‘é€è¯·æ±‚æ‹¿å›äº†ä¸€ä¸ªæ•°æ®ï¼Œåˆ‡æ¢åˆ°å¦å¤–ä¸€ä¸ªé¡µé¢ååˆè¿”å›ã€‚è¿™æ—¶æ•°æ®å·²ç»å­˜åœ¨ï¼Œæ— éœ€é‡æ–°åŠ è½½ã€‚è®¾æƒ³å¦‚æœæ˜¯æœ¬åœ°çš„ç»„ä»¶ stateï¼Œé‚£ä¹ˆç»„ä»¶é”€æ¯åé‡æ–°åˆ›å»ºï¼Œstate ä¹Ÿä¼šè¢«é‡ç½®ï¼Œå°±è¿˜éœ€è¦é‡æ–°è·å–æ•°æ®ã€‚</li>\n</ol><p>å› æ­¤ï¼Œå­¦ä¼š Redux ï¼Œæ‰èƒ½çœŸæ­£ç”¨ React å»çµæ´»è§£å†³é—®é¢˜ã€‚ä¸‹é¢æˆ‘ä»¬å°±æ¥äº†è§£ä¸‹ Redux ä¸­çš„ä¸€äº›åŸºæœ¬æ¦‚å¿µã€‚</p><h1>ç†è§£ Redux çš„ä¸‰ä¸ªåŸºæœ¬æ¦‚å¿µ</h1><p>Redux å¼•å…¥çš„æ¦‚å¿µå…¶å®å¹¶ä¸å¤šï¼Œä¸»è¦å°±æ˜¯ä¸‰ä¸ªï¼šStateã€Action å’Œ Reducerã€‚</p><ul>\n<li>å…¶ä¸­ State å³ Storeï¼Œä¸€èˆ¬å°±æ˜¯ä¸€ä¸ªçº¯ JavaScript Objectã€‚</li>\n<li>Action ä¹Ÿæ˜¯ä¸€ä¸ª Objectï¼Œç”¨äºæè¿°å‘ç”Ÿçš„åŠ¨ä½œã€‚</li>\n<li>è€Œ Reducer åˆ™æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ¥æ”¶ Action å’Œ State å¹¶ä½œä¸ºå‚æ•°ï¼Œé€šè¿‡è®¡ç®—å¾—åˆ°æ–°çš„ Storeã€‚</li>\n</ul><p>å®ƒä»¬ä¸‰è€…ä¹‹é—´çš„å…³ç³»å¯ä»¥ç”¨ä¸‹å›¾æ¥è¡¨ç¤ºï¼š<br>\n<img src=\"https://static001.geekbang.org/resource/image/91/2c/9193e33b6d1715b845e1ed01cc348d2c.png?wh=932*354\" alt=\"\"></p><p>åœ¨ Redux ä¸­ï¼Œæ‰€æœ‰å¯¹äº Store çš„ä¿®æ”¹éƒ½å¿…é¡»é€šè¿‡è¿™æ ·ä¸€ä¸ªå…¬å¼å»å®Œæˆï¼Œå³é€šè¿‡ Reducer å®Œæˆï¼Œè€Œä¸æ˜¯ç›´æ¥ä¿®æ”¹ Storeã€‚è¿™æ ·çš„è¯ï¼Œä¸€æ–¹é¢å¯ä»¥ä¿è¯æ•°æ®çš„ä¸å¯å˜æ€§ï¼ˆImmutableï¼‰ï¼ŒåŒæ—¶ä¹Ÿèƒ½å¸¦æ¥ä¸¤ä¸ªéå¸¸å¤§çš„å¥½å¤„ã€‚</p><ol>\n<li>å¯é¢„æµ‹æ€§ï¼ˆPredictableï¼‰ï¼šå³ç»™å®šä¸€ä¸ªåˆå§‹çŠ¶æ€å’Œä¸€ç³»åˆ—çš„ Actionï¼Œä¸€å®šèƒ½å¾—åˆ°ä¸€è‡´çš„ç»“æœï¼ŒåŒæ—¶è¿™ä¹Ÿè®©ä»£ç æ›´å®¹æ˜“æµ‹è¯•ã€‚</li>\n<li>æ˜“äºè°ƒè¯•ï¼šå¯ä»¥è·Ÿè¸ª Store ä¸­æ•°æ®çš„å˜åŒ–ï¼Œç”šè‡³æš‚åœå’Œå›æ”¾ã€‚å› ä¸ºæ¯æ¬¡ Action äº§ç”Ÿçš„å˜åŒ–éƒ½ä¼šäº§ç”Ÿæ–°çš„å¯¹è±¡ï¼Œè€Œæˆ‘ä»¬å¯ä»¥ç¼“å­˜è¿™äº›å¯¹è±¡ç”¨äºè°ƒè¯•ã€‚Redux çš„åŸºäºæµè§ˆå™¨æ’ä»¶çš„å¼€å‘å·¥å…·å°±æ˜¯åŸºäºè¿™ä¸ªæœºåˆ¶ï¼Œéå¸¸æœ‰åˆ©äºè°ƒè¯•ã€‚</li>\n</ol><p>è¿™ä¹ˆæŠ½è±¡çš„è§£é‡Šï¼Œä½ å¯èƒ½ä¸å¥½ç†è§£ï¼Œåˆ«ç€æ€¥ï¼Œæˆ‘ç»™ä½ ä¸¾ä¸ªä¾‹å­ï¼Œæ¥å¸®åŠ©ä½ ç†è§£è¿™å‡ ä¸ªæ¦‚å¿µã€‚è¿™ä¸ªä¾‹å­æ˜¯å¼€å‘ä¸€ä¸ªè®¡æ•°å™¨çš„é€»è¾‘ã€‚æ¯”å¦‚è¯´è¦å®ç°â€œåŠ ä¸€â€å’Œâ€œå‡ä¸€â€è¿™ä¸¤ä¸ªåŠŸèƒ½ï¼Œå¯¹äº Redux æ¥è¯´ï¼Œæˆ‘ä»¬éœ€è¦å¦‚ä¸‹ä»£ç ï¼š</p><pre><code>import { createStore } from 'redux'\n\n// å®šä¹‰ Store çš„åˆå§‹å€¼\nconst initialState = { value: 0 }\n\n// Reducerï¼Œå¤„ç† Action è¿”å›æ–°çš„ State\nfunction counterReducer(state = initialState, action) {\n  switch (action.type) {\n    case 'counter/incremented':\n      return { value: state.value + 1 }\n    case 'counter/decremented':\n      return { value: state.value - 1 }\n    default:\n      return state\n  }\n}\n\n// åˆ©ç”¨ Redux API åˆ›å»ºä¸€ä¸ª Storeï¼Œå‚æ•°å°±æ˜¯ Reducer\nconst store = createStore(counterReducer)\n\n// Store æä¾›äº† subscribe ç”¨äºç›‘å¬æ•°æ®å˜åŒ–\nstore.subscribe(() =&gt; console.log(store.getState()))\n\n// è®¡æ•°å™¨åŠ  1ï¼Œç”¨ Store çš„ dispatch æ–¹æ³•åˆ†å‘ä¸€ä¸ª Actionï¼Œç”± Reducer å¤„ç†\nconst incrementAction = { type: 'counter/incremented' };\nstore.dispatch(incrementAction);\n// ç›‘å¬å‡½æ•°è¾“å‡ºï¼š{value: 1}\n\n// è®¡æ•°å™¨å‡ 1\nconst decrementAction = { type: 'counter/decremented' };\nstore.dispatch(decrementAction)\n// ç›‘å¬å‡½æ•°è¾“å‡ºï¼š{value: 0}\n</code></pre><p>é€šè¿‡è¿™æ®µä»£ç ï¼Œæˆ‘ä»¬å°±ç”¨ä¸‰ä¸ªæ­¥éª¤å®Œæˆäº†ä¸€ä¸ªå®Œæ•´çš„ Redux çš„é€»è¾‘ï¼š</p><ol>\n<li>å…ˆåˆ›å»º Storeï¼›</li>\n<li>å†åˆ©ç”¨ Action å’Œ Reducer ä¿®æ”¹ Storeï¼›</li>\n<li>æœ€ååˆ©ç”¨ subscribe ç›‘å¬ Store çš„å˜åŒ–ã€‚</li>\n</ol><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ Reducer ä¸­ï¼Œæˆ‘ä»¬æ¯æ¬¡éƒ½å¿…é¡»è¿”å›ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œç¡®ä¿ä¸å¯å˜æ•°æ®ï¼ˆImmutableï¼‰çš„åŸåˆ™ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å»¶å±•æ“ä½œç¬¦ï¼ˆSpread Operatorï¼‰æ¥ç®€å•åœ°å®ç°ä¸å¯å˜æ•°æ®çš„æ“ä½œï¼Œä¾‹å¦‚ï¼š</p><pre><code>return {\n  ...state, // å¤åˆ¶åŸæœ‰çš„æ•°æ®ç»“æ„\n  value: state.value + 1, // å˜åŒ– value å€¼ä½¿å…¶ + 1\n}\n</code></pre><p>è¿™åœ¨å¤§å¤šæ•°åœºæ™¯ä¸‹å·²ç»è¶³å¤Ÿä½¿ç”¨ã€‚å½“ç„¶å¯¹äºå¤æ‚çš„æ•°æ®ç»“æ„ï¼Œä¹Ÿæœ‰ä¸€äº›ç¬¬ä¸‰æ–¹çš„åº“å¯ä»¥å¸®åŠ©æ“ä½œä¸å¯å˜æ•°æ®ï¼Œæ¯”å¦‚ Immutableã€Immer ç­‰ç­‰ã€‚</p><p>é€šè¿‡è¿™ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†çº¯ Redux ä½¿ç”¨çš„åœºæ™¯ï¼Œä»è€Œæ›´åŠ æ¸…æ¥šåœ°çœ‹åˆ°äº† Storeã€Action å’Œ Reducer è¿™ä¸‰ä¸ªåŸºæœ¬æ¦‚å¿µï¼Œä¹Ÿå°±èƒ½ç†è§£ State + Action =&gt; New State è¿™æ ·ä¸€ä¸ªç®€å•å´æ ¸å¿ƒçš„æœºåˆ¶ã€‚</p><h1>å¦‚ä½•åœ¨ React ä¸­ä½¿ç”¨ Redux</h1><p>åœ¨åˆšæ‰çš„è®²è§£å’Œå…·ä½“ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰æŠŠ Redux å’Œ React å»ºç«‹è”ç³»ï¼Œè¿™ä¸»è¦æ˜¯ä¸ºäº†å¸®åŠ©ä½ å…ˆç†è§£æ¦‚å¿µã€‚è¦çŸ¥é“ï¼Œåœ¨å®é™…åœºæ™¯ä¸­ï¼ŒRedux Store ä¸­çš„çŠ¶æ€æœ€ç»ˆä¸€å®šæ˜¯ä¼šä½“ç°åœ¨ UI ä¸Šçš„ï¼Œå³é€šè¿‡ React ç»„ä»¶å±•ç¤ºç»™ç”¨æˆ·ã€‚é‚£ä¹ˆå¦‚ä½•å»ºç«‹Redux å’Œ React çš„è”ç³»å‘¢ï¼Ÿ</p><p>ä¸»è¦æ˜¯ä¸¤ç‚¹ï¼š</p><ol>\n<li>React ç»„ä»¶èƒ½å¤Ÿåœ¨ä¾èµ–çš„ Store çš„æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œé‡æ–° Renderï¼›</li>\n<li>åœ¨ React ç»„ä»¶ä¸­ï¼Œèƒ½å¤Ÿåœ¨æŸäº›æ—¶æœºå» dispatch ä¸€ä¸ª actionï¼Œä»è€Œè§¦å‘ Store çš„æ›´æ–°ã€‚</li>\n</ol><p>è¦å®ç°è¿™ä¸¤ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦å¼•å…¥ Facebook æä¾›çš„ <code>react-redux</code> è¿™æ ·ä¸€ä¸ªå·¥å…·åº“ï¼Œå·¥å…·åº“çš„ä½œç”¨å°±æ˜¯å»ºç«‹ä¸€ä¸ªæ¡¥æ¢ï¼Œè®© React å’Œ Redux å®ç°äº’é€šã€‚</p><p>åœ¨ <code>react-redux</code> çš„å®ç°ä¸­ï¼Œä¸ºäº†ç¡®ä¿éœ€è¦ç»‘å®šçš„ç»„ä»¶èƒ½å¤Ÿè®¿é—®åˆ°å…¨å±€å”¯ä¸€çš„ Redux Storeï¼Œåˆ©ç”¨äº† React çš„ Context æœºåˆ¶å»å­˜æ”¾ Store çš„ä¿¡æ¯ã€‚é€šå¸¸æˆ‘ä»¬ä¼šå°†è¿™ä¸ª Context ä½œä¸ºæ•´ä¸ª React åº”ç”¨ç¨‹åºçš„æ ¹èŠ‚ç‚¹ã€‚å› æ­¤ï¼Œä½œä¸º Redux çš„é…ç½®çš„ä¸€éƒ¨åˆ†ï¼Œæˆ‘ä»¬é€šå¸¸éœ€è¦å¦‚ä¸‹çš„ä»£ç ï¼š</p><pre><code>import React from 'react'\nimport ReactDOM from 'react-dom'\n\nimport { Provider } from 'react-redux'\nimport store from './store'\n\nimport App from './App'\n\nconst rootElement = document.getElementById('root')\nReactDOM.render(\n  &lt;Provider store={store}&gt;\n    &lt;App /&gt;\n  &lt;/Provider&gt;,\n  rootElement\n)\n</code></pre><p>è¿™é‡Œä½¿ç”¨äº† Provider è¿™æ ·ä¸€ä¸ªç»„ä»¶æ¥ä½œä¸ºæ•´ä¸ªåº”ç”¨ç¨‹åºçš„æ ¹èŠ‚ç‚¹ï¼Œå¹¶å°† Store ä½œä¸ºå±æ€§ä¼ ç»™äº†è¿™ä¸ªç»„ä»¶ï¼Œè¿™æ ·æ‰€æœ‰ä¸‹å±‚çš„ç»„ä»¶å°±éƒ½èƒ½å¤Ÿä½¿ç”¨ Redux äº†ã€‚</p><p>å®Œæˆäº†è¿™æ ·çš„é…ç½®ä¹‹åï¼Œåœ¨å‡½æ•°ç»„ä»¶ä¸­ä½¿ç”¨ Redux å°±éå¸¸ç®€å•äº†ï¼šåˆ©ç”¨ react-redux æä¾›çš„ useSelector å’Œ useDispatch è¿™ä¸¤ä¸ª Hooksã€‚</p><p>åœ¨ç¬¬äºŒè®²æˆ‘ä»¬å·²ç»æåˆ°ï¼ŒHooks çš„æœ¬è´¨å°±æ˜¯æä¾›äº†è®© React ç»„ä»¶èƒ½å¤Ÿç»‘å®šåˆ°æŸä¸ªå¯å˜çš„æ•°æ®æºçš„èƒ½åŠ›ã€‚åœ¨è¿™é‡Œï¼Œå½“ Hooks ç”¨åˆ° Redux æ—¶å¯å˜çš„å¯¹è±¡å°±æ˜¯ Storeï¼Œè€Œ useSelector åˆ™è®©ä¸€ä¸ªç»„ä»¶èƒ½å¤Ÿåœ¨ Store çš„æŸäº›æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶é‡æ–° renderã€‚</p><p>æˆ‘åœ¨è¿™é‡Œä»ç„¶ä»¥å®˜æ–¹ç»™çš„è®¡æ•°å™¨ä¾‹å­ä¸ºä¾‹ï¼Œæ¥ç»™ä½ è®²è§£å¦‚ä½•åœ¨ React ä¸­ä½¿ç”¨ Reduxï¼š</p><pre><code>import React from 'react'\nimport { useSelector, useDispatch } from 'react-redux'\n\nexport function Counter() {\n  // ä» state ä¸­è·å–å½“å‰çš„è®¡æ•°å€¼\n  const count = useSelector(state =&gt; state.value)\n\n  // è·å¾—å½“å‰ store çš„ dispatch æ–¹æ³•\n  const dispatch = useDispatch()\n\n  // åœ¨æŒ‰é’®çš„ click æ—¶é—´ä¸­å»åˆ†å‘ action æ¥ä¿®æ”¹ store\n  return (\n    &lt;div&gt;\n      &lt;button\n        onClick={() =&gt; dispatch({ type: 'counter/incremented' })}\n      &gt;+&lt;/button&gt;\n      &lt;span&gt;{count}&lt;/span&gt;\n      &lt;button\n        onClick={() =&gt; dispatch({ type: 'counter/decremented' })}\n      &gt;-&lt;/button&gt;\n    &lt;/div&gt;\n  )\n}\n\n</code></pre><p>æ­¤å¤–ï¼Œé€šè¿‡è®¡æ•°å™¨è¿™ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥çœ‹åˆ° React å’Œ Redux å…±åŒä½¿ç”¨æ—¶çš„å•å‘æ•°æ®æµï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/b6/e0/b6991fd03d27ee987b1cd29ae16552e0.png?wh=752*412\" alt=\"\"></p><p>éœ€è¦å¼ºè°ƒçš„æ˜¯ï¼Œåœ¨å®é™…çš„ä½¿ç”¨ä¸­ï¼Œæˆ‘ä»¬æ— éœ€å…³å¿ƒ View æ˜¯å¦‚ä½•ç»‘å®šåˆ° Store çš„æŸä¸€éƒ¨åˆ†æ•°æ®çš„ï¼Œå› ä¸ºReact-Redux å¸®æˆ‘ä»¬åšäº†è¿™ä»¶äº‹æƒ…ã€‚æ€»ç»“æ¥è¯´ï¼Œé€šè¿‡è¿™æ ·ä¸€ç§ç®€å•çš„æœºåˆ¶ï¼ŒRedux ç»Ÿä¸€äº†æ›´æ–°æ•°æ®çŠ¶æ€çš„æ–¹å¼ï¼Œè®©æ•´ä¸ªåº”ç”¨ç¨‹åºæ›´åŠ å®¹æ˜“å¼€å‘ã€ç»´æŠ¤ã€è°ƒè¯•å’Œæµ‹è¯•ã€‚</p><h1>ä½¿ç”¨ Redux å¤„ç†å¼‚æ­¥é€»è¾‘</h1><p>å­¦å®Œäº†å¦‚ä½•åœ¨React ä¸­ä½¿ç”¨Reduxï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±è¿›å…¥åˆ°Reduxçš„è¿›é˜¶åœºæ™¯ä¸­ã€‚</p><p>åœ¨ Redux ä¸­ï¼Œå¤„ç†å¼‚æ­¥é€»è¾‘ä¹Ÿå¸¸å¸¸è¢«ç§°ä¸º<strong>å¼‚æ­¥ Action</strong>ï¼Œå®ƒå‡ ä¹æ˜¯ React é¢è¯•ä¸­å¿…é—®çš„ä¸€é“é¢˜ï¼Œå¯ä»¥è®¤ä¸ºè¿™æ˜¯ Redux ä½¿ç”¨çš„è¿›é˜¶åœºæ™¯ã€‚</p><p>è™½ç„¶ Redux çš„å®˜æ–¹æ–‡æ¡£ä¸­å·²ç»å°†å¼‚æ­¥é€»è¾‘çš„åŸç†å†™å¾—å¾ˆæ¸…æ¥šï¼Œä½†æ˜¯å¤§éƒ¨åˆ†åŒå­¦ä»ç„¶åªèƒ½è¯´ä¸ªå¤§æ¦‚ï¼Œæˆ–è€…è¹¦å‡º Thunkã€Saga ä¹‹ç±»çš„å‡ ä¸ªå•è¯ã€‚é€ æˆè¿™ç§ç°è±¡çš„å¾ˆå¤§ä¸€éƒ¨åˆ†åŸå› å¯èƒ½åœ¨äºï¼Œä»…æ»¡è¶³äºæ ¹æ®å‚è€ƒç¤ºä¾‹å†™å‡ºå¯è¿è¡Œçš„ä»£ç ï¼Œè€Œæ²¡æœ‰æ·±ç©¶èƒŒåçš„åŸç†ã€‚</p><p>ä½†æ˜¯è¦æ˜ç™½ä¸€ç‚¹ï¼Œåªæœ‰èƒ½å¤Ÿè§£é‡Šæ¸…æ¥šå¼‚æ­¥ Actionï¼Œæ‰ç®—æ˜¯çœŸæ­£ç†è§£äº† Reduxï¼Œæ‰èƒ½åœ¨å®é™…å¼€å‘ä¸­çµæ´»åº”ç”¨ã€‚</p><p>åœ¨ Redux çš„ Store ä¸­ï¼Œæˆ‘ä»¬ä¸ä»…ç»´æŠ¤ç€ä¸šåŠ¡æ•°æ®ï¼ŒåŒæ—¶ç»´æŠ¤ç€åº”ç”¨ç¨‹åºçš„çŠ¶æ€ã€‚æ¯”å¦‚å¯¹äºå‘é€è¯·æ±‚è·å–æ•°æ®è¿™æ ·ä¸€ä¸ªå¼‚æ­¥çš„åœºæ™¯ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹æ¶‰åŠåˆ° Store æ•°æ®ä¼šæœ‰å“ªäº›å˜åŒ–ï¼š</p><ol>\n<li>è¯·æ±‚å‘é€å‡ºå»æ—¶ï¼šè®¾ç½® state.pending = trueï¼Œç”¨äº UI æ˜¾ç¤ºåŠ è½½ä¸­çš„çŠ¶æ€ï¼›</li>\n<li>è¯·æ±‚å‘é€æˆåŠŸæ—¶ï¼šè®¾ç½® state.pending = false, state.data = resultã€‚å³å–æ¶ˆ UI çš„åŠ è½½çŠ¶æ€ï¼ŒåŒæ—¶å°†è·å–çš„æ•°æ®æ”¾åˆ° store ä¸­ç”¨äº UI çš„æ˜¾ç¤ºã€‚</li>\n<li>è¯·æ±‚å‘é€å¤±è´¥æ—¶ï¼šè®¾ç½® state.pending = false, state.error = errorã€‚å³å–æ¶ˆ UI çš„åŠ è½½çŠ¶æ€ï¼ŒåŒæ—¶è®¾ç½®é”™è¯¯çš„çŠ¶æ€ï¼Œç”¨äº UI æ˜¾ç¤ºé”™è¯¯çš„å†…å®¹ã€‚</li>\n</ol><p>å‰é¢æåˆ°ï¼Œä»»ä½•å¯¹ Store çš„ä¿®æ”¹éƒ½æ˜¯ç”± action å®Œæˆçš„ã€‚é‚£ä¹ˆå¯¹äºä¸€ä¸ªå¼‚æ­¥è¯·æ±‚ï¼Œä¸Šé¢çš„ä¸‰æ¬¡æ•°æ®ä¿®æ”¹æ˜¾ç„¶å¿…é¡»è¦ä¸‰ä¸ª action æ‰èƒ½å®Œæˆã€‚é‚£ä¹ˆå‡è®¾æˆ‘ä»¬åœ¨ React ç»„ä»¶ä¸­å»åšè¿™ä¸ªå‘èµ·è¯·æ±‚çš„åŠ¨ä½œï¼Œä»£ç é€»è¾‘åº”è¯¥ç±»ä¼¼å¦‚ä¸‹ï¼š</p><pre><code>function DataList() {\n  const dispatch = useDispatch();\n  // åœ¨ç»„ä»¶åˆæ¬¡åŠ è½½æ—¶å‘èµ·è¯·æ±‚\n  useEffect(() =&gt; {\n    // è¯·æ±‚å‘é€æ—¶\n    dispatch({ type: 'FETCH_DATA_BEGIN' });\n    fetch('/some-url').then(res =&gt; {\n      // è¯·æ±‚æˆåŠŸæ—¶\n      dispatch({ type: 'FETCH_DATA_SUCCESS', data: res });\n    }).catch(err =&gt; {\n      // è¯·æ±‚å¤±è´¥æ—¶\n      dispatch({ type: 'FETCH_DATA_FAILURE', error: err });\n    })\n  }, []);\n  \n  // ç»‘å®šåˆ° state çš„å˜åŒ–\n  const data = useSelector(state =&gt; state.data);\n  const pending = useSelector(state =&gt; state.pending);\n  const error = useSelector(state =&gt; state.error);\n  \n  // æ ¹æ® state æ˜¾ç¤ºä¸åŒçš„çŠ¶æ€\n  if (error) return 'Error.';\n  if (pending) return 'Loading...';\n  return &lt;Table data={data} /&gt;;\n}\n</code></pre><p>ä»è¿™æ®µä»£ç å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸‰ä¸ªï¼ˆåŒæ­¥ï¼‰Actionå®Œæˆäº†è¿™ä¸ªå¼‚æ­¥è¯·æ±‚çš„åœºæ™¯ã€‚è¿™é‡Œæˆ‘ä»¬å°† Store å®Œå…¨ä½œä¸ºä¸€ä¸ªå­˜æ”¾æ•°æ®çš„åœ°æ–¹ï¼Œè‡³äºæ•°æ®å“ªé‡Œæ¥ï¼Œ Redux å¹¶ä¸å…³å¿ƒã€‚å°½ç®¡è¿™æ ·åšæ˜¯å¯è¡Œçš„ã€‚</p><p>ä½†æ˜¯å¾ˆæ˜¾ç„¶ï¼Œå‘é€è¯·æ±‚è·å–æ•°æ®å¹¶è¿›è¡Œé”™è¯¯å¤„ç†è¿™ä¸ªé€»è¾‘æ˜¯ä¸å¯é‡ç”¨çš„ã€‚å‡è®¾æˆ‘ä»¬å¸Œæœ›åœ¨å¦å¤–ä¸€ä¸ªç»„ä»¶ä¸­ä¹Ÿèƒ½å‘é€åŒæ ·çš„è¯·æ±‚ï¼Œå°±ä¸å¾—ä¸å°†è¿™æ®µä»£ç é‡æ–°å®ç°ä¸€éã€‚å› æ­¤ï¼ŒRedux ä¸­æä¾›äº† middleware è¿™æ ·ä¸€ä¸ªæœºåˆ¶ï¼Œè®©æˆ‘ä»¬å¯ä»¥å·§å¦™åœ°å®ç°æ‰€è°“å¼‚æ­¥ Action çš„æ¦‚å¿µã€‚</p><p>ç®€å•æ¥è¯´ï¼Œmiddleware å¯ä»¥è®©ä½ æä¾›ä¸€ä¸ªæ‹¦æˆªå™¨åœ¨ reducer å¤„ç† action ä¹‹å‰è¢«è°ƒç”¨ã€‚åœ¨è¿™ä¸ªæ‹¦æˆªå™¨ä¸­ï¼Œä½ å¯ä»¥è‡ªç”±å¤„ç†è·å¾—çš„ actionã€‚æ— è®ºæ˜¯æŠŠè¿™ä¸ª action ç›´æ¥ä¼ é€’åˆ° reducerï¼Œæˆ–è€…æ„å»ºæ–°çš„ action å‘é€åˆ° reducerï¼Œéƒ½æ˜¯å¯ä»¥çš„ã€‚</p><p>ä»ä¸‹é¢è¿™å¼ å›¾å¯ä»¥çœ‹åˆ°ï¼ŒMiddleware æ­£æ˜¯åœ¨ Action çœŸæ­£åˆ°è¾¾ Reducer ä¹‹å‰æä¾›çš„ä¸€ä¸ªé¢å¤–å¤„ç† Action çš„æœºä¼šï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/b4/3a/b438a3e944c5f15911637868e78cd13a.png?wh=1042*210\" alt=\"\"></p><p>æˆ‘ä»¬åˆšæ‰ä¹Ÿæåˆ°äº†ï¼ŒRedux ä¸­çš„ Action ä¸ä»…ä»…å¯ä»¥æ˜¯ä¸€ä¸ª Objectï¼Œå®ƒå¯ä»¥æ˜¯ä»»ä½•ä¸œè¥¿ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚åˆ©ç”¨è¿™ä¸ªæœºåˆ¶ï¼ŒRedux æä¾›äº† <code>redux-thunk</code> è¿™æ ·ä¸€ä¸ªä¸­é—´ä»¶ï¼Œå®ƒå¦‚æœå‘ç°æ¥å—åˆ°çš„ action æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œé‚£ä¹ˆå°±ä¸ä¼šä¼ é€’ç»™ Reducerï¼Œè€Œæ˜¯æ‰§è¡Œè¿™ä¸ªå‡½æ•°ï¼Œå¹¶æŠŠ dispatch ä½œä¸ºå‚æ•°ä¼ ç»™è¿™ä¸ªå‡½æ•°ï¼Œä»è€Œåœ¨è¿™ä¸ªå‡½æ•°ä¸­ä½ å¯ä»¥è‡ªç”±å†³å®šä½•æ—¶ï¼Œå¦‚ä½•å‘é€ Actionã€‚</p><p>ä¾‹å¦‚å¯¹äºä¸Šé¢çš„åœºæ™¯ï¼Œå‡è®¾æˆ‘ä»¬åœ¨åˆ›å»º Redux Store æ—¶æŒ‡å®šäº† redux-thunk è¿™ä¸ªä¸­é—´ä»¶ï¼š</p><pre><code>import { createStore, applyMiddleware } from 'redux'\nimport thunkMiddleware from 'redux-thunk'\nimport rootReducer from './reducer'\n\nconst composedEnhancer = applyMiddleware(thunkMiddleware)\nconst store = createStore(rootReducer, composedEnhancer)\n</code></pre><p>é‚£ä¹ˆåœ¨æˆ‘ä»¬dispatch action æ—¶å°±å¯ä»¥ dispatch ä¸€ä¸ªå‡½æ•°ç”¨äºæ¥å‘é€è¯·æ±‚ï¼Œé€šå¸¸ï¼Œæˆ‘ä»¬ä¼šå†™æˆå¦‚ä¸‹çš„ç»“æ„ï¼š</p><pre><code>function fetchData() {\n  return dispatch =&gt; {\n    dispatch({ type: 'FETCH_DATA_BEGIN' });\n    fetch('/some-url').then(res =&gt; {\n      dispatch({ type: 'FETCH_DATA_SUCCESS', data: res });\n    }).catch(err =&gt; {\n      dispatch({ type: 'FETCH_DATA_FAILURE', error: err });\n    })\n  }\n}\n</code></pre><p>é‚£ä¹ˆåœ¨æˆ‘ä»¬dispatch action æ—¶å°±å¯ä»¥ dispatch ä¸€ä¸ªå‡½æ•°ç”¨äºæ¥å‘é€è¯·æ±‚ï¼Œé€šå¸¸ï¼Œæˆ‘ä»¬ä¼šå†™æˆå¦‚ä¸‹çš„ç»“æ„ï¼š</p><pre><code>import fetchData from './fetchData';\n\nfunction DataList() {\n  const dispatch = useDispatch();\n  // dispatch äº†ä¸€ä¸ªå‡½æ•°ç”± redux-thunk ä¸­é—´ä»¶å»æ‰§è¡Œ\n  dispatch(fetchData());\n}\n</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œé€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬å°±å®ç°äº†å¼‚æ­¥è¯·æ±‚é€»è¾‘çš„é‡ç”¨ã€‚é‚£ä¹ˆè¿™ä¸€å¥—ç»“åˆ <code>redux-thunk</code> ä¸­é—´ä»¶çš„æœºåˆ¶ï¼Œæˆ‘ä»¬å°±ç§°ä¹‹ä¸ºå¼‚æ­¥ Actionã€‚</p><p>æ‰€ä»¥è¯´å¼‚æ­¥ Action å¹¶ä¸æ˜¯ä¸€ä¸ªå…·ä½“çš„æ¦‚å¿µï¼Œè€Œå¯ä»¥æŠŠå®ƒçœ‹ä½œæ˜¯ Redux çš„ä¸€ä¸ªä½¿ç”¨æ¨¡å¼ã€‚å®ƒé€šè¿‡ç»„åˆä½¿ç”¨åŒæ­¥ Action ï¼Œåœ¨æ²¡æœ‰å¼•å…¥æ–°æ¦‚å¿µçš„åŒæ—¶ï¼Œç”¨ä¸€è‡´çš„æ–¹å¼æä¾›äº†å¤„ç†å¼‚æ­¥é€»è¾‘çš„æ–¹æ¡ˆã€‚</p><h1>å°ç»“</h1><p>å°½ç®¡ Redux æœ‰ä»¤äººè¯Ÿç—…çš„åœ°æ–¹ï¼Œä¾‹å¦‚å‡½æ•°å¼çš„æ¦‚å¿µæ¯”è¾ƒéš¾ä»¥ç†è§£ï¼Œæ ·æ¿ä»£ç è¿‡å¤šç­‰é—®é¢˜ã€‚ä½†å…¶å¸¦æ¥çš„å¥½å¤„ä¹Ÿæ˜¯å¾ˆæ˜æ˜¾çš„ï¼Œæ¯”å¦‚å¯ä»¥è®©ä»£ç æ›´å®¹æ˜“ç†è§£ï¼Œç»´æŠ¤å’Œæµ‹è¯•ã€‚å› æ­¤æœ‰è¶…è¿‡60%çš„ React åº”ç”¨éƒ½ä½¿ç”¨äº† Reduxã€‚</p><p>æ‰€ä»¥å³ä½¿å¯¹äºä¸€äº›å°å‹çš„åº”ç”¨ï¼Œä¸ä¸€å®šéœ€è¦ä½¿ç”¨ Reduxã€‚ä½†æ˜¯å¯¹äºå¼€å‘äººå‘˜æ¥è¯´ï¼Œå­¦ä¼šå’Œç†è§£ Redux ä»ç„¶æ˜¯ä¸€é¡¹å¿…é¡»æŒæ¡çš„æ—¢èƒ½ã€‚</p><h1>æ€è€ƒé¢˜</h1><p>åªè€ƒè™‘ Redux éƒ¨åˆ†ï¼Œå¯¹äºè®¡æ•°å™¨åº”ç”¨ï¼Œç›®å‰æ¯æ¬¡æ˜¯å›ºå®šåŠ å‡1ï¼Œå¦‚æœè¦èƒ½å¤Ÿåœ¨æ¯æ¬¡è°ƒç”¨æ—¶å¢åŠ æˆ–å‡å°‘æŒ‡å®šçš„å˜é‡å€¼ï¼Œåº”è¯¥å¦‚ä½•å®ç°ï¼Ÿ</p><p>æ¬¢è¿æŠŠä½ çš„æ€è€ƒå’Œæƒ³æ³•åˆ†äº«åœ¨ç•™è¨€åŒºï¼Œæˆ‘ä¼šå’Œä½ äº¤æµè®¨è®ºã€‚ä¹Ÿæ¬¢è¿ä½ æŠŠè¯¾ç¨‹åˆ†äº«ç»™ä½ çš„æœ‹å‹å’ŒåŒäº‹ï¼Œæˆ‘ä»¬å…±åŒè¿›æ­¥ï¼</p>","neighbors":{"left":{"article_title":"06ï½œè‡ªå®šä¹‰Hooks ï¼šå››ä¸ªå…¸å‹çš„ä½¿ç”¨åœºæ™¯","id":381423},"right":{"article_title":"08ï½œå¤æ‚çŠ¶æ€å¤„ç†ï¼šå¦‚ä½•ä¿è¯çŠ¶æ€ä¸€è‡´æ€§ï¼Ÿ","id":383084}},"comments":[{"had_liked":false,"id":296926,"user_name":"Isaac","can_delete":false,"product_type":"c1","uid":1110607,"ip_address":"","ucode":"038C349AB508AB","user_header":"https://static001.geekbang.org/account/avatar/00/10/f2/4f/59bd4141.jpg","comment_is_top":true,"comment_ctime":1623226650,"is_pvip":false,"replies":[{"id":"107978","content":"ç»™ä½ çœ‹ä¸€ä¸ªå®é™…çš„ä¾‹å­ï¼Œä½ å¯èƒ½å°±å¯ä»¥ç†è§£äº†ã€‚å…³é”®åœ¨äºï¼ŒuseEffect ä¸­åˆ¤æ–­æ˜¯å¦è¦å»è·å–æ•°æ®ã€‚è¿™ä¸ªåˆ¤æ–­æ¡ä»¶å¯èƒ½å› åœºæ™¯è€Œå¼‚ï¼Œæ¯”å¦‚ä¸‹é¢çš„ä»£ç ï¼Œåªåœ¨ admins ä¸å­˜åœ¨ï¼Œå¹¶ä¸”æ²¡æœ‰ error ä¸åœ¨ pending çš„æƒ…å†µä¸‹ï¼Œæ‰è°ƒç”¨æ¥å£ã€‚<br><br>export function useFetchAdmins() {<br>  const dispatch = useDispatch();<br><br>  const { admins, fetchAdminsPending, fetchAdminsError } = useSelector(<br>    state =&gt; ({<br>      admins: state.pluginPluginManager.home.admins,<br>      fetchAdminsPending: state.pluginPluginManager.home.fetchAdminsPending,<br>      fetchAdminsError: state.pluginPluginManager.home.fetchAdminsError,<br>    }),<br>    shallowEqual,<br>  );<br><br>  const boundAction = useCallback(<br>    (...args) =&gt; {<br>      return dispatch(fetchAdmins(...args));<br>    },<br>    [dispatch],<br>  );<br><br>  useEffect(() =&gt; {<br>    if (!admins &amp;&amp; !fetchAdminsPending &amp;&amp; !fetchAdminsError) boundAction();<br>  }, [admins, fetchAdminsPending, fetchAdminsError, boundAction]);<br><br>  return {<br>    admins,<br>    fetchAdmins: boundAction,<br>    fetchAdminsPending,<br>    fetchAdminsError,<br>  };<br>}","user_name":"ä½œè€…å›å¤","comment_id":296926,"uid":"1018676","ip_address":"","utype":1,"ctime":1623470671,"user_name_real":"Nate"}],"discussion_count":7,"race_medal":0,"score":"9.2233720685427999e+18","product_id":100079901,"comment_content":"è€å¸ˆï¼Œredux å¦‚ä½•å’Œè‡ªå®šä¹‰ hooks å¾ˆå¥½çš„ç»“åˆèµ·æ¥ï¼Ÿ<br>æ¯”å¦‚å¸¸è§çš„è·å–ä¸€ä¸ªåˆ—è¡¨ï¼Œæˆ‘å°è£…æˆä¸€ä¸ª useList çš„è‡ªå®šä¹‰ hookï¼Œé‚£ä¹ˆå°±å¯ä»¥åœ¨å¤šä¸ªç»„ä»¶ä¸­ä½¿ç”¨ useListã€‚ä½†æ˜¯æ¯æ¬¡ useList() çš„æ—¶å€™ï¼Œéƒ½ä¼šè§¦å‘æ¥å£è°ƒç”¨ï¼Œè·å–åˆ°çš„æ•°æ®æºç»„ä»¶ä¹‹é—´æ— æ³•å…±äº«ã€‚<br>","like_count":8,"discussions":[{"author":{"id":1018676,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8b/34/61035278.jpg","nickname":"Nate","note":"","ucode":"844B4C20BB3D6E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":521650,"discussion_content":"ç»™ä½ çœ‹ä¸€ä¸ªå®é™…çš„ä¾‹å­ï¼Œä½ å¯èƒ½å°±å¯ä»¥ç†è§£äº†ã€‚å…³é”®åœ¨äºï¼ŒuseEffect ä¸­åˆ¤æ–­æ˜¯å¦è¦å»è·å–æ•°æ®ã€‚è¿™ä¸ªåˆ¤æ–­æ¡ä»¶å¯èƒ½å› åœºæ™¯è€Œå¼‚ï¼Œæ¯”å¦‚ä¸‹é¢çš„ä»£ç ï¼Œåªåœ¨ admins ä¸å­˜åœ¨ï¼Œå¹¶ä¸”æ²¡æœ‰ error ä¸åœ¨ pending çš„æƒ…å†µä¸‹ï¼Œæ‰è°ƒç”¨æ¥å£ã€‚\n\nexport function useFetchAdmins() {\n  const dispatch = useDispatch();\n\n  const { admins, fetchAdminsPending, fetchAdminsError } = useSelector(\n    state =&amp;gt; ({\n      admins: state.pluginPluginManager.home.admins,\n      fetchAdminsPending: state.pluginPluginManager.home.fetchAdminsPending,\n      fetchAdminsError: state.pluginPluginManager.home.fetchAdminsError,\n    }),\n    shallowEqual,\n  );\n\n  const boundAction = useCallback(\n    (...args) =&amp;gt; {\n      return dispatch(fetchAdmins(...args));\n    },\n    [dispatch],\n  );\n\n  useEffect(() =&amp;gt; {\n    if (!admins &amp;amp;&amp;amp; !fetchAdminsPending &amp;amp;&amp;amp; !fetchAdminsError) boundAction();\n  }, [admins, fetchAdminsPending, fetchAdminsError, boundAction]);\n\n  return {\n    admins,\n    fetchAdmins: boundAction,\n    fetchAdminsPending,\n    fetchAdminsError,\n  };\n}","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1623470671,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2036145,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/11/b1/4379e143.jpg","nickname":"H","note":"","ucode":"99558A1CF3DF4F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":379805,"discussion_content":"è€å¸ˆï¼Œæˆ‘ç›®å‰å¯¹æ‚¨ç»™å‡ºçš„è§£å†³æ–¹æ¡ˆç†è§£æ˜¯ï¼šå¦‚æœæƒ³è¦å…±äº«å…¶ä»–ç»„ä»¶å·²ç»è·å–åˆ°çš„å¼‚æ­¥æ•°æ®ï¼Œéœ€è¦å†ä¸€æ¬¡è°ƒç”¨æ¥å£ã€‚\nè€å¸ˆï¼Œä¸çŸ¥é“ç›®å‰ç†è§£çš„å¯¹ä¸å¯¹ã€‚\nä½†æˆ‘çŒœæƒ³æˆ‘å’Œé¢˜ä¸»ä¸€æ ·ï¼Œç›®å‰çš„å›°æƒ‘ï¼šå¦‚ä½•å¾ˆå¥½åœ°ç»“åˆä¸­é—´ä»¶å’Œè‡ªå®šä¹‰hooks   ä»¥é¿å…å†æ¬¡è§¦å‘å¼‚æ­¥   å°±å¯ä»¥  å…±äº«  å…¶ä»–ç»„ä»¶å·²ç»è·å–åˆ°çš„å¼‚æ­¥æ•°æ®ã€‚\nä¸çŸ¥æˆ‘çš„ç†è§£ ä»¥åŠ çŒœæƒ³  å¯¹ä¸å¯¹ï¼Œæ³è¯·è€å¸ˆä¸é¢˜ä¸»æŒ‡æ­£ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1624166065,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":2885242,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLCEsLNSXFBaT1s1tRU0bVmWc0ekGvMpicFmZdiaSM5IdpibltMh4BvFaYM9rtq8sRafLX1kJCZcjNSg/132","nickname":"zyzxrj","note":"","ucode":"44C9B0F43A43C2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2036145,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/11/b1/4379e143.jpg","nickname":"H","note":"","ucode":"99558A1CF3DF4F","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":554338,"discussion_content":"ä¸å¯¹å•Šï¼Œè€å¸ˆæ˜¯æœ‰åˆ¤æ–­çš„å•Šï¼Œ if (!admins &amp;&amp; !fetchAdminsPending &amp;&amp; !fetchAdminsError) boundAction(); å‡å¦‚æœ‰æ•°æ®çš„æƒ…å†µä¸‹å°±ä¸éœ€è¦è¯·æ±‚äº†å‘€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646324893,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":379805,"ip_address":""},"score":554338,"extra":""},{"author":{"id":2885242,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLCEsLNSXFBaT1s1tRU0bVmWc0ekGvMpicFmZdiaSM5IdpibltMh4BvFaYM9rtq8sRafLX1kJCZcjNSg/132","nickname":"zyzxrj","note":"","ucode":"44C9B0F43A43C2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2036145,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/11/b1/4379e143.jpg","nickname":"H","note":"","ucode":"99558A1CF3DF4F","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":554339,"discussion_content":"è€å¸ˆç»™çš„ä»£ç æ„æ€æ˜¯å…ˆä»storeé‡Œé¢å–ï¼Œå‡å¦‚æ²¡æœ‰çš„æƒ…å†µä¸‹å°±å»ç½‘ç»œè¯·æ±‚è·å–ï¼Œå¹¶ä¸æ˜¯æ¯æ¬¡éƒ½è°ƒç”¨ï¼Œç†è§£äº†å—","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1646324946,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":379805,"ip_address":""},"score":554339,"extra":""}]},{"author":{"id":2593484,"avatar":"https://static001.geekbang.org/account/avatar/00/27/92/cc/65613a30.jpg","nickname":"CyTsui","note":"","ucode":"42B31E90771305","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":378509,"discussion_content":"reduxå®˜ç½‘æœ‰ä¸ªæ–¹æ¡ˆæ˜¯ RTK QUERYï¼Œæä¾›äº†ä¸€ä¸ªcreateApiè¿™ä¸ªæ–¹æ³•ï¼Œè¿˜æœ‰åˆ©ç”¨ createAsyncThunk","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623250684,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2637054,"avatar":"","nickname":"Free fall","note":"","ucode":"8DBF73CD0F423F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":378494,"discussion_content":"é‚£ä½ å¯ä»¥åœ¨useListé‡Œé¢æŠ›å‡ºä¸€ä¸ªå¼‚æ­¥å‡½æ•° åªæœ‰è°ƒç”¨è¿™ä¸ªå‡½æ•°çš„æ—¶å€™æ‰ä¼šè°ƒæ¥å£ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623245948,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2221924,"avatar":"https://static001.geekbang.org/account/avatar/00/21/e7/64/c6cbf46f.jpg","nickname":"èœ‚èœœ","note":"","ucode":"6BFE89D3668063","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2637054,"avatar":"","nickname":"Free fall","note":"","ucode":"8DBF73CD0F423F","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":542749,"discussion_content":"æ— æ³•æ ¹æœ¬åœ°è§£å†³é—®é¢˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640833471,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":378494,"ip_address":""},"score":542749,"extra":""}]}]},{"had_liked":false,"id":296724,"user_name":"è…¾æŒª","can_delete":false,"product_type":"c1","uid":1003853,"ip_address":"","ucode":"E80661F2235344","user_header":"https://static001.geekbang.org/account/avatar/00/0f/51/4d/0aceadde.jpg","comment_is_top":false,"comment_ctime":1623132024,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"108997314424","product_id":100079901,"comment_content":"ç»™æå®¢æ—¶é—´ç½‘é¡µç‰ˆæä¸€ä¸ªå»ºè®®ï¼Œå¼ºçƒˆå»ºè®®ç½‘é¡µç‰ˆä¹Ÿèƒ½åƒæ‰‹æœºç«¯ä¸€æ ·ï¼Œå¯¹å†™å¾—å¥½çš„æ–‡ç« è¿›è¡Œç‚¹èµğŸ‘ã€‚æœ¬æ–‡å†™å¾—é€šä¿—æ˜“æ‡‚ï¼Œè¯´æ˜ç‹è€å¸ˆæ°´å¹³å¾ˆé«˜ï¼Œå€¼å¾—èµã€‚","like_count":26},{"had_liked":false,"id":298515,"user_name":"H","can_delete":false,"product_type":"c1","uid":2036145,"ip_address":"","ucode":"99558A1CF3DF4F","user_header":"https://static001.geekbang.org/account/avatar/00/1f/11/b1/4379e143.jpg","comment_is_top":false,"comment_ctime":1624166924,"is_pvip":false,"replies":[{"id":"108332","content":"è°¢è°¢æ”¯æŒï¼Œè¿‡å¥–äº†~~ ç›®å‰å…ˆæŠŠè¿™æ¬¡è¯¾ç¨‹å®Œç»“äº†å“¦ï¼Œæš‚æ—¶æ²¡æœ‰åç»­è®¡åˆ’","user_name":"ä½œè€…å›å¤","comment_id":298515,"uid":"1018676","ip_address":"","utype":1,"ctime":1624246824,"user_name_real":"Nate"}],"discussion_count":2,"race_medal":0,"score":"27393970700","product_id":100079901,"comment_content":"è¯·é—®è€å¸ˆåœ¨è¿™ä¸ªä¸“æ æ›´æ–°å®Œä¹‹åè¿˜æœ‰æ²¡æœ‰å…¶ä»–çš„è®¡åˆ’ã€‹<br>å­¦ä¹ è€å¸ˆçš„æ¯ä¸€ç¯‡æ–‡ç« ä»¥åŠè§†é¢‘éƒ½æœ‰é†é†çŒé¡¶ï¼Œä»»è„‰æ‰“é€šçš„æ„Ÿè§‰ã€‚<br>å¾ˆæœŸå¾…è€å¸ˆæ¥ç€å‡ºä¸€ä¸ªå…³äºè§£è¯»reactæºç çš„è¯¾ç¨‹ï¼Œå¾ˆæœŸå¾…ï¼Œå¾ˆæœŸå¾…ã€‚<br>ä¸çŸ¥é“è€å¸ˆé™¤äº†reactçš„ä¸“æ å’Œè§†å±è¿˜æœ‰æ²¡æœ‰å…¶å®ƒçš„è¯¾ç¨‹ï¼Œå¾ˆæƒ³å¾ˆæƒ³è·Ÿç€å»å­¦ä¹ å­¦ä¹ ã€‚","like_count":7,"discussions":[{"author":{"id":1018676,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8b/34/61035278.jpg","nickname":"Nate","note":"","ucode":"844B4C20BB3D6E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":522163,"discussion_content":"è°¢è°¢æ”¯æŒï¼Œè¿‡å¥–äº†~~ ç›®å‰å…ˆæŠŠè¿™æ¬¡è¯¾ç¨‹å®Œç»“äº†å“¦ï¼Œæš‚æ—¶æ²¡æœ‰åç»­è®¡åˆ’","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1624246824,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2036145,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/11/b1/4379e143.jpg","nickname":"H","note":"","ucode":"99558A1CF3DF4F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":380240,"discussion_content":"è€å¸ˆï¼Œreact18å¿«å‡ºæ¥äº†ï¼ŒåæœŸè¯¾ç¨‹ä¼šæ›´æ–°å—ï¼Œå¥½æœŸå¾…ï¼","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1624410729,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":296798,"user_name":"kotumato","can_delete":false,"product_type":"c1","uid":1067671,"ip_address":"","ucode":"8A32B5EA0338A9","user_header":"https://static001.geekbang.org/account/avatar/00/10/4a/97/414d0e39.jpg","comment_is_top":false,"comment_ctime":1623163933,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18803033117","product_id":100079901,"comment_content":"function counterReducer(state = initialState, action) {<br>    switch (action.type) {<br>        case &#39;counter&#47;incremented&#39;: return {value: state.value + action.payload}<br>        case &#39;counter&#47;decremented&#39;: return {value: state.value - action.payload}<br>        default: return state<br>    }<br>}<br>const incrementAction = { type: &#39;counter&#47;incremented&#39;, payload: 10 };<br>store.dispatch(incrementAction); &#47;&#47; è®¡æ•°å™¨åŠ  10<br>const decrementAction = { type: &#39;counter&#47;decremented&#39;,  payload: 10 };<br>store.dispatch(decrementAction); &#47;&#47; è®¡æ•°å™¨å‡ 10","like_count":3},{"had_liked":false,"id":296676,"user_name":"Aaron","can_delete":false,"product_type":"c1","uid":1203490,"ip_address":"","ucode":"05B21694762045","user_header":"https://static001.geekbang.org/account/avatar/00/12/5d/22/5aed3202.jpg","comment_is_top":false,"comment_ctime":1623115408,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"18802984592","product_id":100079901,"comment_content":"å¯ä»¥é€šè¿‡åœ¨actionæ·»åŠ å…¶ä»–å­—æ®µï¼Œå¦‚payloadæ¥ä¼ é€’éœ€è¦åŠ å‡çš„æ•°å€¼","like_count":4},{"had_liked":false,"id":298284,"user_name":"Change","can_delete":false,"product_type":"c1","uid":1161260,"ip_address":"","ucode":"FB60D2378C9F02","user_header":"https://static001.geekbang.org/account/avatar/00/11/b8/2c/0f7baf3a.jpg","comment_is_top":false,"comment_ctime":1623999264,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"10213933856","product_id":100079901,"comment_content":"è€å¸ˆé—®ä¸ªé—®é¢˜ï¼Œredux toolkitå’Œreduxæœ‰å•¥åŒºåˆ«ï¼Œåœ¨é¡¹ç›®ç”¨å“ªä¸ªæ›´æ–¹ä¾¿ä¸€äº›","like_count":3},{"had_liked":false,"id":297342,"user_name":"L","can_delete":false,"product_type":"c1","uid":1228268,"ip_address":"","ucode":"26BB686671F7D4","user_header":"https://static001.geekbang.org/account/avatar/00/12/bd/ec/cc7abf0b.jpg","comment_is_top":false,"comment_ctime":1623469776,"is_pvip":true,"discussion_count":2,"race_medal":0,"score":"10213404368","product_id":100079901,"comment_content":"æ€»æ„Ÿè§‰reduxè¿™å¥—å·²ç»è¿‡æ—¶äº†ã€‚æ ·æ¿ä»£ç ä¹‹ç±»çš„å®åœ¨æ˜¯å¤ªå¤šå¤ªç¹çäº†ã€‚åŒæ ·æ˜¯è¿™ç§ç»Ÿä¸€ç®¡ç†æ•°æ®çš„æ–¹å¼ï¼Œvuexå°±æ¯”ä»–å¥½å¾ˆå¤šã€‚æ„Ÿè§‰ç°åœ¨å¾ˆå¤šç©çš„éƒ½æ˜¯çº¦å®šå¼","like_count":3,"discussions":[{"author":{"id":1644983,"avatar":"","nickname":"weiwei.mo","note":"","ucode":"DA130336171AE8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":380551,"discussion_content":"mobx å°±æ¯” redux ç®€å•å¤ªå¤š","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1624552562,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1630502,"avatar":"https://static001.geekbang.org/account/avatar/00/18/e1/26/a5bae6c3.jpg","nickname":"ã€‚ä¸‘","note":"","ucode":"F1006EBF13E95F","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":379289,"discussion_content":"ä¸ä¸€å®šå§ï¼Œå¦‚æœä½ è¦æ˜¯è¯´reduxä½¿ç”¨ç¹çï¼Œæœ‰åŸºäºreduxçš„rematch ä»–çš„ä½¿ç”¨æ–¹å¼å°±æ¯”è¾ƒç®€å•ã€‚æ€»çš„æ¥è¯´reduxæä¾›çš„æ˜¯ä¸€ç§æ€è·¯ï¼Œè¿™ç§æ€è·¯æ˜¯å¯æ‰©å±•çš„","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1623811673,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":303401,"user_name":"Redmi_18117543951","can_delete":false,"product_type":"c1","uid":2636611,"ip_address":"","ucode":"2B67750848B39A","user_header":"https://static001.geekbang.org/account/avatar/00/28/3b/43/dedbfc4c.jpg","comment_is_top":false,"comment_ctime":1626769239,"is_pvip":false,"replies":[{"id":"109862","content":"æ˜¯çš„ï¼Œå¾ˆå¤šå…¶å®æŒºç®€å•çš„ä¸œè¥¿ï¼Œéœ€è¦å¾ˆé•¿çš„æ–‡æ¡£æ¥è¯´æ˜åœºæ™¯å’Œç”¨æ³•ï¼Œé€ æˆäº†çœ‹ä¸Šå»å¾ˆå¤æ‚çš„ç°è±¡ã€‚","user_name":"ä½œè€…å›å¤","comment_id":303401,"uid":"1018676","ip_address":"","utype":1,"ctime":1626854143,"user_name_real":"Nate"}],"discussion_count":1,"race_medal":0,"score":"5921736535","product_id":100079901,"comment_content":"ç»ˆäºçŸ¥é“å•¥æ˜¯å¼‚æ­¥Actionäº†ï¼Œä¹‹å‰è¢«åå­—å“ä½ï¼Œå­¦è¿‡æ‰å‘ç°åŸæ¥å®é™…ä¸Šå¾ˆç®€å•å‘€","like_count":1},{"had_liked":false,"id":298283,"user_name":"81","can_delete":false,"product_type":"c1","uid":2647765,"ip_address":"","ucode":"C8E83CBA1A1E8D","user_header":"https://static001.geekbang.org/account/avatar/00/28/66/d5/f36495bd.jpg","comment_is_top":false,"comment_ctime":1623998486,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5918965782","product_id":100079901,"comment_content":"å¼‚æ­¥æ“ä½œéœ€è¦ä¼ é€’æ•°æ®çš„æ—¶å€™ï¼Œå¯ä»¥è¿™æ ·æ“ä½œå˜›ï¼Ÿdispath((dispatch,playload)=&gt;{fetch(&quot;&#47;some-url&quot;ï¼Œ{playload}).then(dispatth({type:&quot;&#47;update&#47;msg&quot;,playload}))})ï¼›ã€‚ æ˜¯åœ¨dipatchæ´¾å‘çš„å‡½æ•°ä¸­çš„ç¬¬äºŒä¸ªå‚æ•°ä½ç½®ä¼ æ•°æ®  ç¬¬ä¸€ä¸ªå‚æ•°ä½ç½® å†™dispatchï¼Ÿ","like_count":1},{"had_liked":false,"id":296789,"user_name":"å°ç°","can_delete":false,"product_type":"c1","uid":2161679,"ip_address":"","ucode":"3A11181B738F7E","user_header":"https://static001.geekbang.org/account/avatar/00/20/fc/0f/df9edecd.jpg","comment_is_top":false,"comment_ctime":1623161276,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5918128572","product_id":100079901,"comment_content":"<br>import { createStore } from &#39;redux&#39;<br><br>&#47;&#47; å®šä¹‰ Store çš„åˆå§‹å€¼<br>const initialState = { value: 0 }<br><br>&#47;&#47; Reducerï¼Œå¤„ç† Action è¿”å›æ–°çš„ State<br>function counterReducer(state = initialState, action) {<br>  switch (action.type) {<br>    case &#39;counter&#47;incremented&#39;:<br>      return { value: state.value + 1 }<br>    case &#39;counter&#47;decremented&#39;:<br>      return { value: state.value - 1 }<br>    case &#39;counter&#47;add&#39;: <br>      return {<br>          ...state,<br>          value: stat.value + action.data<br>      }<br>    default:<br>      return state<br>  }<br>}<br><br>&#47;&#47; åˆ©ç”¨ Redux API åˆ›å»ºä¸€ä¸ª Storeï¼Œå‚æ•°å°±æ˜¯ Reducer<br>const store = createStore(counterReducer)<br><br>&#47;&#47; Store æä¾›äº† subscribe ç”¨äºç›‘å¬æ•°æ®å˜åŒ–<br>store.subscribe(() =&gt; console.log(store.getState()))<br><br>&#47;&#47; è®¡æ•°å™¨åŠ  1ï¼Œç”¨ Store çš„ dispatch æ–¹æ³•åˆ†å‘ä¸€ä¸ª Actionï¼Œç”± Reducer å¤„ç†<br>const incrementAction = { type: &#39;counter&#47;incremented&#39; };<br><br>store.dispatch(incrementAction);<br>&#47;&#47; ç›‘å¬å‡½æ•°è¾“å‡ºï¼š{value: 1}<br><br>&#47;&#47; è®¡æ•°å™¨å‡ 1<br>const decrementAction = { type: &#39;counter&#47;decremented&#39; };<br>store.dispatch(decrementAction)<br>&#47;&#47; ç›‘å¬å‡½æ•°è¾“å‡ºï¼š{value: 0}<br><br>const add = (data)=&gt;({type: &#39;counter&#47;add&#39;, data});<br>store.dispatch(add(5));","like_count":1},{"had_liked":false,"id":337656,"user_name":"å°é£ä¾ î­","can_delete":false,"product_type":"c1","uid":1233325,"ip_address":"","ucode":"55650D7AB15AAF","user_header":"https://static001.geekbang.org/account/avatar/00/12/d1/ad/1aed3dec.jpg","comment_is_top":false,"comment_ctime":1646958899,"is_pvip":false,"replies":[{"id":"123862","content":"æ„Ÿè°¢åé¦ˆï¼Œé©¬ä¸Šä¿®æ­£","user_name":"ç¼–è¾‘å›å¤","comment_id":337656,"uid":"2189689","ip_address":"","utype":2,"ctime":1647823355,"user_name_real":"ç¼–è¾‘"}],"discussion_count":2,"race_medal":0,"score":"1646958899","product_id":100079901,"comment_content":"å°ç»“é‡Œé¢ï¼Œæœ€åä¸€ä¸ªè¯æœ‰é”™åˆ«å­—ï¼ˆâˆ©â–½âˆ©ï¼‰ï¼Œæ—¢èƒ½=&gt;æŠ€èƒ½","like_count":0,"discussions":[{"author":{"id":2189689,"avatar":"https://static001.geekbang.org/account/avatar/00/21/69/79/b4132042.jpg","nickname":"ğŸ‘","note":"","ucode":"DE34B3B14287D1","race_medal":0,"user_type":4,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":557439,"discussion_content":"æ„Ÿè°¢åé¦ˆï¼Œé©¬ä¸Šä¿®æ­£","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647823355,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":4}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1326801,"avatar":"https://static001.geekbang.org/account/avatar/00/14/3e/d1/17f3160c.jpg","nickname":"å†›","note":"","ucode":"7D4DE0E435BF21","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":587483,"discussion_content":"è¿™ä¸ªå›å¤æ˜¯æç¬‘çš„å§ï¼Œç‰¹æ„çœ‹äº†ä¸€ä¸‹ï¼Œè¿˜æ˜¯æ²¡æ”¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663084344,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":337102,"user_name":"Geek_9b9b7e","can_delete":false,"product_type":"c1","uid":2342122,"ip_address":"","ucode":"6F6EECC5DCB58A","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJVpGfkkH8rqC7nTmX8DlTZ3lMQpCic3a7rjUTXqnzv5bhXfQwQ15SxJF5CETbVegcHFbQNc4XfGyA/132","comment_is_top":false,"comment_ctime":1646623236,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1646623236","product_id":100079901,"comment_content":"ä¸ºä»€ä¹ˆè¦å¼‚æ­¥action?è€å¸ˆçš„ç­”æ¡ˆæ˜¯ï¼šâ€œå‘é€è¯·æ±‚è·å–æ•°æ®å¹¶è¿›è¡Œé”™è¯¯å¤„ç†è¿™ä¸ªé€»è¾‘æ˜¯ä¸å¯é‡ç”¨çš„ã€‚å‡è®¾æˆ‘ä»¬å¸Œæœ›åœ¨å¦å¤–ä¸€ä¸ªç»„ä»¶ä¸­ä¹Ÿèƒ½å‘é€åŒæ ·çš„è¯·æ±‚ï¼Œå°±ä¸å¾—ä¸å°†è¿™æ®µä»£ç é‡æ–°å®ç°ä¸€éã€‚â€œ<br><br>ä¹Ÿå°±æ˜¯è¯´ï¼Œredux-thunk è¦åšçš„å°±æ˜¯ã€æŠŠè¿™æ®µä»£ç å®ç°ä¸€éã€‘ã€‚<br><br>å°±æ˜¯ä¸‹é¢è¿™æ®µä»£ç ï¼š<br>    &#47;&#47; è¯·æ±‚å‘é€æ—¶<br>    dispatch({ type: &#39;FETCH_DATA_BEGIN&#39; });<br>    fetch(&#39;&#47;some-url&#39;).then(res =&gt; {<br>      &#47;&#47; è¯·æ±‚æˆåŠŸæ—¶<br>      dispatch({ type: &#39;FETCH_DATA_SUCCESS&#39;, data: res });<br>    }).catch(err =&gt; {<br>      &#47;&#47; è¯·æ±‚å¤±è´¥æ—¶<br>      dispatch({ type: &#39;FETCH_DATA_FAILURE&#39;, error: err });<br>    });<br><br>ä¸ºäº†redux-thunkèƒ½é‡å¤ä½¿ç”¨è¿™æ®µä»£ç ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å®šä¹‰ä¸€ä¸ª actionCreator å‡½æ•°ï¼Œç”¨æ¥è¿”å›è¿™æ®µä»£ç ã€‚<br><br>æˆ‘ä»¬ä¸ºå•¥ä¸ç›´æ¥ä½¿ç”¨è‡ªå®šä¹‰hookså‘¢ï¼Œhooksçš„ä¸»è¦åŠŸèƒ½ä¸å°±æ˜¯â€ä»£ç å¤ç”¨â€œã€‚<br><br>ä¾‹å¦‚ï¼š<br>useUserList(dispatch =&gt; {<br>    return useCallback(() =&gt; {<br>        &#47;&#47; è¯·æ±‚å‘é€æ—¶<br>    dispatch({ type: &#39;FETCH_DATA_BEGIN&#39; });<br>    fetch(&#39;&#47;some-url&#39;).then(res =&gt; {<br>      &#47;&#47; è¯·æ±‚æˆåŠŸæ—¶<br>      dispatch({ type: &#39;FETCH_DATA_SUCCESS&#39;, data: res });<br>    }).catch(err =&gt; {<br>      &#47;&#47; è¯·æ±‚å¤±è´¥æ—¶<br>      dispatch({ type: &#39;FETCH_DATA_FAILURE&#39;, error: err });<br>    }), [dispatch]);<br>    });<br>}) ","like_count":0},{"had_liked":false,"id":331980,"user_name":"å±±ä¸˜smith18651579836","can_delete":false,"product_type":"c1","uid":1240355,"ip_address":"","ucode":"82A9E997D81801","user_header":"https://static001.geekbang.org/account/avatar/00/12/ed/23/73af9e5c.jpg","comment_is_top":false,"comment_ctime":1642938882,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1642938882","product_id":100079901,"comment_content":"ä¸ºä»€ä¹ˆä¸ç”¨usecontext","like_count":0},{"had_liked":false,"id":328379,"user_name":"Light èƒ–è™","can_delete":false,"product_type":"c1","uid":2876591,"ip_address":"","ucode":"D5FCFE14172D31","user_header":"https://static001.geekbang.org/account/avatar/00/2b/e4/af/f8cf4bc2.jpg","comment_is_top":false,"comment_ctime":1640696510,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1640696510","product_id":100079901,"comment_content":"è¿™æ ·å†™å¯ä»¥å—ï¼Œè€å¸ˆã€‚åœ¨å®šä¹‰actionå¯¹è±¡çš„æ—¶å€™å¢åŠ ä¸€ä¸ªå­—æ®µç”¨æ¥å­˜å‚¨æ¯æ¬¡è®¡ç®—çš„æ­¥é•¿ï¼ˆé»˜è®¤ä¸º1ï¼‰<br>&#47;&#47; å®šä¹‰ Store çš„åˆå§‹å€¼const initialState = { value: 0ï¼Œstep: 1 }<br>function counterReducer(state = initialState, action) <br>{ switch (action.type) { <br>case &#39;counter&#47;incremented&#39;: return { value: state.value + action.step || 1} <br>case &#39;counter&#47;decremented&#39;: return { value: state.value - action.step || 1 } <br>default: return state <br>}}<br><br><br>return (<br> dispatch({ type: &#39;counter&#47;incremented&#39;,action: 2 })} &gt;+ {count}<br> dispatch({ type: &#39;counter&#47;decremented&#39; })} &gt;-<br>)}","like_count":0},{"had_liked":false,"id":315248,"user_name":"Geek_dbfc78","can_delete":false,"product_type":"c1","uid":2753348,"ip_address":"","ucode":"8A8FA71B21499B","user_header":"","comment_is_top":false,"comment_ctime":1633767600,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1633767600","product_id":100079901,"comment_content":"ä½¿ç”¨actionå¯¹è±¡å±æ€§ä½œä¸º è¡¨ç°å±‚ -&gt; æ•°æ®å±‚ å‚æ•°ä¼ é€’çš„å…¥å£ï¼Œå®ç°åŠ¨æ€å€¼çš„åŠ å‡","like_count":0},{"had_liked":false,"id":305549,"user_name":"Vongola","can_delete":false,"product_type":"c1","uid":1047073,"ip_address":"","ucode":"F2FDAEBC049CBC","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fa/21/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1628042823,"is_pvip":true,"replies":[{"id":"110625","content":"æ„Ÿè°¢æŒ‡å‡ºï¼Œå·²æäº¤ä¿®æ”¹ã€‚","user_name":"ä½œè€…å›å¤","comment_id":305549,"uid":"1018676","ip_address":"","utype":1,"ctime":1628154690,"user_name_real":"Nate"}],"discussion_count":1,"race_medal":1,"score":"1628042823","product_id":100079901,"comment_content":"const data = useSelectore(state =&gt; state.data);<br>è¿™é‡Œåº”è¯¥æ˜¯useSelectorå§ï¼Ÿ","like_count":0},{"had_liked":false,"id":303948,"user_name":"é™ˆèŠ³","can_delete":false,"product_type":"c1","uid":1249332,"ip_address":"","ucode":"07534108E098DA","user_header":"https://static001.geekbang.org/account/avatar/00/13/10/34/705572e6.jpg","comment_is_top":false,"comment_ctime":1627118536,"is_pvip":false,"replies":[{"id":"110291","content":"è°¢è°¢æŒ‡å‡ºï¼ä¼šæ›´æ–°ä¸€ä¸‹ã€‚","user_name":"ä½œè€…å›å¤","comment_id":303948,"uid":"1018676","ip_address":"","utype":1,"ctime":1627699462,"user_name_real":"Nate"}],"discussion_count":1,"race_medal":0,"score":"1627118536","product_id":100079901,"comment_content":"åœ¨ react-redux çš„å®ç°ä¸­ï¼Œä¸ºäº†ç¡®ä¿éœ€è¦ç»‘å®šçš„ç»„ä»¶èƒ½å¤Ÿè®¿é—®åˆ°å…¨å±€å”¯ä¸€çš„ Redux Storeï¼Œåˆ©ç”¨äº† React çš„ Conext æœºåˆ¶å»å­˜æ”¾ Store çš„ä¿¡æ¯ã€‚<br>åº”è¯¥æ˜¯Context","like_count":0},{"had_liked":false,"id":301234,"user_name":"å›","can_delete":false,"product_type":"c1","uid":2688367,"ip_address":"","ucode":"D15FAFAA80A8FF","user_header":"https://static001.geekbang.org/account/avatar/00/29/05/6f/6a47d5b7.jpg","comment_is_top":false,"comment_ctime":1625583457,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1625583457","product_id":100079901,"comment_content":"æœ‰ä¸ªé—®é¢˜<br>å‡è®¾æˆ‘é¡µé¢æœ‰è¡¨å•<br>è¡¨å•æ§ä»¶å¤ç”¨ç¨‹åº¦å¾ˆå¤§<br>å¦‚ä½•æ›´ä¼˜é›…çš„ç®¡ç†<br>1ã€è¡¨å•æ•°æ®æº<br>2ã€è¡¨å•é‰´æƒ<br>3ã€è¡¨å•é‰´æƒåçš„æ•°æ®å†æ¬¡è¿‡æ»¤åº”å¯¹ä¸åŒåœºæ™¯<br>4ã€è¡¨å•åˆå§‹å€¼ç¡®å®šï¼ŒåŒæ­¥å’Œå¼‚æ­¥çš„æƒ…å†µ<br>5ã€ç»´æŠ¤ä¸€ä¸ªè¡¨å•å€¼å‡†å¤‡å¥½çš„çŠ¶æ€å¹¶ä»¥æ­¤ä¸ºå‡†ç•Œå®šåˆå§‹æŸ¥è¯¢<br><br>æ„Ÿè§‰è¡¨å•è¿™ä¸€å—è¿˜æ˜¯è›®å¥½ç©çš„","like_count":0},{"had_liked":false,"id":298911,"user_name":"JuntÃ­ng","can_delete":false,"product_type":"c1","uid":1039290,"ip_address":"","ucode":"F6A3B528D6F3FD","user_header":"https://static001.geekbang.org/account/avatar/00/0f/db/ba/304a9a4a.jpg","comment_is_top":false,"comment_ctime":1624368068,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1624368068","product_id":100079901,"comment_content":"Hooks çš„å‡ºç°ï¼Œç»“åˆ context APIï¼Œç”¨ç®¡ç†å…¨å±€çŠ¶æ€æ›´åŠ ç®€æ´æ˜“æ‡‚ï¼Œåªæ˜¯åœ¨æ•°æ®æµå˜æ›´æœºåˆ¶ä¸Šä¸å®¹æ˜“æ•è·ï¼Œä½†æ˜¯å´æ¯” Redux å¸¦æ¥çš„ä»£ç å¤æ‚åº¦çš„å¢åŠ ã€æ ·æ¿ä»£ç è¿‡å¤šï¼Œä¸æ˜“äºé˜…è¯»ä¸Šæ¥è¯´æˆ‘æ›´åŠ åçˆ± hooks + ContextAPI ã€‚","like_count":0},{"had_liked":false,"id":296795,"user_name":"é—²é—²","can_delete":false,"product_type":"c1","uid":1637571,"ip_address":"","ucode":"B2099BDCFF6191","user_header":"https://static001.geekbang.org/account/avatar/00/18/fc/c3/0991edfc.jpg","comment_is_top":false,"comment_ctime":1623163080,"is_pvip":false,"replies":[{"id":"107981","content":"1. æ¯ä¸ªç»„ä»¶ç”¨åˆ° redux ä¸Šå“ªäº› stateï¼Œä¸€å®šè¦å…·ä½“ï¼Œä¸è¦ç»‘å®šåœ¨ä¸€ä¸ªå¤ªå¤§çš„èŠ‚ç‚¹ä¸Šã€‚<br>2. ç¬¬9è¯¾ä¼šè®²å“¦ã€‚","user_name":"ä½œè€…å›å¤","comment_id":296795,"uid":"1018676","ip_address":"","utype":1,"ctime":1623470940,"user_name_real":"Nate"}],"discussion_count":1,"race_medal":0,"score":"1623163080","product_id":100079901,"comment_content":"è€å¸ˆæˆ‘æœ‰ä¸¤ä¸ªé—®é¢˜éº»çƒ¦é—®ä¸‹ï¼Œ<br>1ã€å¦‚æœé¡¹ç›®é‡Œé¢çŠ¶æ€å€¼ç‰¹åˆ«å¤šï¼Œä¸šåŠ¡æ¯”è¾ƒå¤æ‚ï¼Œæ„Ÿè§‰reduxå°±å¾ˆå®¹æ˜“é€ æˆä¸€äº›ä¸çŸ¥é“å“ªé‡Œå¼•èµ·çš„é‡å¤æ¸²æŸ“ï¼Œå¯¼è‡´ç»„ä»¶é¢‘ç¹æ¸²æŸ“ï¼Œè¿™ä¸ªé—®é¢˜æœ‰å•¥å¥½çš„åŠæ³•å—ï¼Ÿ<br>2ã€ä½¿ç”¨reduxï¼Œæ€ä¹ˆå®ç°Aè¯·æ±‚å®Œäº†å†å‘Bè¯·æ±‚å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":296666,"user_name":"Geeker","can_delete":false,"product_type":"c1","uid":1032345,"ip_address":"","ucode":"9937127DE96D78","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c0/99/259a412f.jpg","comment_is_top":false,"comment_ctime":1623111398,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1623111398","product_id":100079901,"comment_content":"ç†è§£äº†å¼‚æ­¥ action","like_count":0},{"had_liked":false,"id":296664,"user_name":"çæƒœçœ¼å‰äºº","can_delete":false,"product_type":"c1","uid":1387988,"ip_address":"","ucode":"7443DA4F24E35B","user_header":"https://static001.geekbang.org/account/avatar/00/15/2d/d4/76ffbdfc.jpg","comment_is_top":false,"comment_ctime":1623111255,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1623111255","product_id":100079901,"comment_content":"è€å¸ˆï¼Œè¯·æ•™ä¸‹ï¼šâ€˜â€™åŒç»„ä»¶å¤šä¸ªå®ä¾‹çš„çŠ¶æ€å…±äº«ï¼šæŸä¸ªé¡µé¢ç»„ä»¶åˆæ¬¡åŠ è½½æ—¶ï¼Œä¼šå‘é€è¯·æ±‚æ‹¿å›äº†ä¸€ä¸ªæ•°æ®ï¼Œåˆ‡æ¢åˆ°å¦å¤–ä¸€ä¸ªé¡µé¢ååˆè¿”å›ã€‚è¿™æ—¶æ•°æ®å·²ç»å­˜åœ¨ï¼Œæ— éœ€é‡æ–°åŠ è½½ã€‚è®¾æƒ³å¦‚æœæ˜¯æœ¬åœ°çš„ç»„ä»¶ stateï¼Œé‚£ä¹ˆç»„ä»¶é”€æ¯åé‡æ–°åˆ›å»ºï¼Œstate ä¹Ÿä¼šè¢«é‡ç½®ï¼Œå°±è¿˜éœ€è¦é‡æ–°è·å–æ•°æ®ã€‚â€˜â€™<br><br>å…³äºè¿™ç‚¹ï¼Œæˆ‘è§‰å¾—å¦‚æœåˆ‡æ¢é¡µé¢è¿”å›åï¼Œç›¸å½“äºé‡æ–°åŠ è½½è¿™ä¸ªé¡µé¢ï¼Œåˆä¼šè¿›å…¥åˆ°åˆå§‹åŒ–çš„çŠ¶æ€ï¼Œå°±ä¼šé‡æ–°è¯·æ±‚æ•°æ®å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1387988,"avatar":"https://static001.geekbang.org/account/avatar/00/15/2d/d4/76ffbdfc.jpg","nickname":"çæƒœçœ¼å‰äºº","note":"","ucode":"7443DA4F24E35B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":378343,"discussion_content":"æ˜ç™½ä½ çš„æ„æ€äº†ï¼Œæˆ‘è®¾æƒ³äº†è¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼Œå¤§æ¦‚èƒ½ç¬¦åˆè¿™ä¸ªè¯´æ³•ï¼Œç»„ä»¶åˆå§‹åŒ–-ã€‹reduxå­˜å‚¨æ•°æ®-ã€‰è¿”å›é¡µé¢å-ã€‹åˆ¤æ–­reduxä¸­æ˜¯å¦æœ‰å­˜å‚¨çš„æ•°æ®-ã€‰æœ‰å°±ä¸è¯·æ±‚äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623167079,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2311402,"avatar":"https://static001.geekbang.org/account/avatar/00/23/44/ea/8a9b868d.jpg","nickname":"ç¼æ–¯åŸºäºš","note":"","ucode":"24892258DF0CC2","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":378285,"discussion_content":"æˆ‘è¯´ä¸€ä¸‹æˆ‘çš„çœ‹æ³•æœ‰äº†reduxåšä¸ºç¼“å­˜ï¼Œè™½ç„¶ç»„ä»¶é”€æ¯äº†é‡æ–°æ¸²æŸ“äº†ä½†æ˜¯æ•°æ®è¿˜åœ¨ã€‚å¯ä»¥ä½¿ç”¨reduxç¼“å­˜çš„æ•°æ®ï¼Œä»è€Œå‡å°‘å¤šä½™çš„è¯·æ±‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623148023,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}