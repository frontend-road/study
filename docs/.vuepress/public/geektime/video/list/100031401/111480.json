{"id":111480,"title":"37 | JWT的原理是什么？","content":"<ul>\n<li>\n<p>代码：<a href=\"https://gitee.com/geektime-geekbang/staffjoy\">https://gitee.com/geektime-geekbang/staffjoy</a></p>\n</li>\n<li>\n<p>课件：<a href=\"https://pan.baidu.com/s/1Q7eP3yZ1Vm8J2nhle5RzTQ\">https://pan.baidu.com/s/1Q7eP3yZ1Vm8J2nhle5RzTQ</a> 提取码: 1aeh</p>\n</li>\n</ul>","comments":[{"had_liked":false,"id":150570,"user_name":"尹腾","can_delete":false,"product_type":"c3","uid":1057840,"ip_address":"","ucode":"2FA104F924F015","user_header":"https://static001.geekbang.org/account/avatar/00/10/24/30/9482e89d.jpg","comment_is_top":false,"comment_ctime":1573559519,"is_pvip":false,"replies":[{"id":58135,"content":"我讲的敏感主要是指和钱、交易支付相关的场景，还有金融银行业务之类，这些场景建议严格集中式认证，其它可以考虑JWT。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1573650392,"ip_address":"","comment_id":150570,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100031401,"comment_content":"大神好，视频中说 JWT适用安全认证不是很敏感的微服务应用场景？这个怎么去定义是否敏感？","like_count":1,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":474203,"discussion_content":"我讲的敏感主要是指和钱、交易支付相关的场景，还有金融银行业务之类，这些场景建议严格集中式认证，其它可以考虑JWT。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1573650392,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1018972,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8c/5c/3f164f66.jpg","nickname":"亚林","note":"","ucode":"4A5A6D24314B79","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":598983,"discussion_content":"甲方会有安全要求的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1673254810,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"湖南","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":141797,"user_name":"土镜问道","can_delete":false,"product_type":"c3","uid":1126473,"ip_address":"","ucode":"6297931F255946","user_header":"https://static001.geekbang.org/account/avatar/00/11/30/49/d1004b11.jpg","comment_is_top":false,"comment_ctime":1571226315,"is_pvip":false,"replies":[{"id":54868,"content":"签名部分可以用hmac + secret方式计算加签，应用方需要以同样hmac+secret方式解签，这个可以认为是对称的。也可以RSA公钥密钥非对称方式加解签。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1571316735,"ip_address":"","comment_id":141797,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100031401,"comment_content":"签名部分需要对称加密吧","like_count":1,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470892,"discussion_content":"签名部分可以用hmac + secret方式计算加签，应用方需要以同样hmac+secret方式解签，这个可以认为是对称的。也可以RSA公钥密钥非对称方式加解签。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571316735,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":282070,"user_name":"美好时光海苔","can_delete":false,"product_type":"c3","uid":1904626,"ip_address":"","ucode":"CD4637BFC8A7C6","user_header":"https://static001.geekbang.org/account/avatar/00/1d/0f/f2/3f3c0946.jpg","comment_is_top":false,"comment_ctime":1615043541,"is_pvip":false,"replies":[{"id":102735,"content":"应该是“可信赖”，属于口误。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1615641760,"ip_address":"","comment_id":282070,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100031401,"comment_content":"老师 可依赖性 怎么理解？它跟  不可篡改性 有什么区别吗？","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":516607,"discussion_content":"应该是“可信赖”，属于口误。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615641760,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":127134,"user_name":"Yangjing","can_delete":false,"product_type":"c3","uid":1018061,"ip_address":"","ucode":"D88DFD4958D07C","user_header":"https://static001.geekbang.org/account/avatar/00/0f/88/cd/2c3808ce.jpg","comment_is_top":false,"comment_ctime":1566567122,"is_pvip":false,"replies":[{"id":47215,"content":"这个和http协议分header和body是一样道理，header里头一般放元数据，类似信封上面的寄信人和地址等信息，body里头是实际数据，类似信里头的内容。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1566744103,"ip_address":"","comment_id":127134,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100031401,"comment_content":"JWT 为什么要把 header 和 playload 分开呢，都放在 playload 里面好像也可以","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464335,"discussion_content":"这个和http协议分header和body是一样道理，header里头一般放元数据，类似信封上面的寄信人和地址等信息，body里头是实际数据，类似信里头的内容。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566744103,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":119846,"user_name":"姑射仙人","can_delete":false,"product_type":"c3","uid":1008517,"ip_address":"","ucode":"3EFC1F3E592165","user_header":"https://static001.geekbang.org/account/avatar/00/0f/63/85/1dc41622.jpg","comment_is_top":false,"comment_ctime":1564712173,"is_pvip":false,"replies":[{"id":44056,"content":"网关可以集成负载均衡的，比如zuul网关集成ribbon+eureka实现负载均衡，如果这块是瓶颈的话，同样增加更多网关实例就可以了。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1564748706,"ip_address":"","comment_id":119846,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100031401,"comment_content":"老师，我再扩展的想了下，如果网关可以集群部署，必然有一个中间件替网关做负载均衡，那这个中间件也可能成为高并发的瓶颈。是不是我哪块想岔路了，存在这样的问题吗？","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461094,"discussion_content":"网关可以集成负载均衡的，比如zuul网关集成ribbon+eureka实现负载均衡，如果这块是瓶颈的话，同样增加更多网关实例就可以了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564748706,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1096111,"avatar":"https://static001.geekbang.org/account/avatar/00/10/b9/af/f59b4c7c.jpg","nickname":"深海极光","note":"","ucode":"331024F7E99C64","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":211453,"discussion_content":"这个是指网关前面的负载均衡把，不是网关到后端服务的负载均衡，老师说的是不是后端的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584851948,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":373782,"user_name":"平凡之路","can_delete":false,"product_type":"c3","uid":1669273,"ip_address":"北京","ucode":"96CE12339BD5FD","user_header":"https://static001.geekbang.org/account/avatar/00/19/78/99/6060eb2d.jpg","comment_is_top":false,"comment_ctime":1683168210,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100031401,"comment_content":"老师，您好，如何解决在注销登录等场景下 JWT 还有效问题呢？","like_count":0},{"had_liked":false,"id":188777,"user_name":"钱","can_delete":false,"product_type":"c3","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1584414792,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100031401,"comment_content":"jwt=base64url(header) + &quot;.&quot; + base64url(payload)+ &quot;.&quot; + base64url(signature)","like_count":0}]}