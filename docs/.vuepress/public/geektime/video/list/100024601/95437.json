{"id":95437,"title":"49 | 如何高效地构建打包发布","content":"<h1>源代码及课件地址</h1><p><a href=\"https://gitee.com/geektime-geekbang/geektime-vue-1\">https://gitee.com/geektime-geekbang/geektime-vue-1</a><br>\n<a href=\"https://gitee.com/geektime-geekbang/ant-design-vue-pro\">https://gitee.com/geektime-geekbang/ant-design-vue-pro</a></p>","comments":[{"had_liked":false,"id":189082,"user_name":"会溜冰的溜溜球","can_delete":false,"product_type":"c3","uid":1868874,"ip_address":"","ucode":"7C32075B05E863","user_header":"https://static001.geekbang.org/account/avatar/00/1c/84/4a/6046bc17.jpg","comment_is_top":false,"comment_ctime":1584454518,"is_pvip":false,"replies":[{"id":73162,"content":"你需要cordova 之类的打包工具","user_name":"作者回复","user_name_real":"唐","uid":1316874,"ctime":1584613416,"ip_address":"","comment_id":189082,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100024601,"comment_content":"可以打包成手机应用吗","like_count":3,"discussions":[{"author":{"id":1316874,"avatar":"https://static001.geekbang.org/account/avatar/00/14/18/0a/28206510.jpg","nickname":"唐金州","note":"","ucode":"563B97D87C66AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":487605,"discussion_content":"你需要cordova 之类的打包工具","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584613416,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":114564,"user_name":"张杰","can_delete":false,"product_type":"c3","uid":1486573,"ip_address":"","ucode":"B4CAB802D99F81","user_header":"https://static001.geekbang.org/account/avatar/00/16/ae/ed/65fe0516.jpg","comment_is_top":false,"comment_ctime":1563337025,"is_pvip":false,"replies":[{"id":42067,"content":"是否访问mock是和环境变量有关的  ","user_name":"作者回复","user_name_real":"唐","uid":1316874,"ctime":1563509617,"ip_address":"","comment_id":114564,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100024601,"comment_content":"打包后部署到IIS 上无法访问 mock数据吗？","like_count":0,"discussions":[{"author":{"id":1316874,"avatar":"https://static001.geekbang.org/account/avatar/00/14/18/0a/28206510.jpg","nickname":"唐金州","note":"","ucode":"563B97D87C66AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458726,"discussion_content":"是否访问mock是和环境变量有关的  ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563509617,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":96171,"user_name":"bolingboling","can_delete":false,"product_type":"c3","uid":1374549,"ip_address":"","ucode":"29BF8D25F664BD","user_header":"https://static001.geekbang.org/account/avatar/00/14/f9/55/a9256641.jpg","comment_is_top":false,"comment_ctime":1558348292,"is_pvip":false,"replies":[{"id":34523,"content":"先明确一点 日期组件的语言由两部分构成，一部分是组件提供的如 placeholder，一部分是moment提供的如星期几，影响的 只是moment这部分，\n包的大小差别不大的话应该没什么问题，底层包的更新，业务代码的不一致都有可能 ","user_name":"作者回复","user_name_real":"唐","uid":1316874,"ctime":1558415115,"ip_address":"","comment_id":96171,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100024601,"comment_content":"  plugins: [themePlugin, new webpack.IgnorePlugin(&#47;^\\.\\&#47;locale$&#47;, &#47;moment$&#47;)],\n配置了这项之后，没有手动导入任何语言包 一样不影响日期组件的中英文切换？\n\n老师优化后打包1023 我的有1.05M\n\n比较大的几个 \nant-design-vue 761.82kb\nmoment.js 147.4kb\necharts&#47;lib 849.53kb\n不知道怎么回事","like_count":0,"discussions":[{"author":{"id":1316874,"avatar":"https://static001.geekbang.org/account/avatar/00/14/18/0a/28206510.jpg","nickname":"唐金州","note":"","ucode":"563B97D87C66AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":450751,"discussion_content":"先明确一点 日期组件的语言由两部分构成，一部分是组件提供的如 placeholder，一部分是moment提供的如星期几，影响的 只是moment这部分，\n包的大小差别不大的话应该没什么问题，底层包的更新，业务代码的不一致都有可能 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558415115,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":94793,"user_name":"你好园","can_delete":false,"product_type":"c3","uid":1313390,"ip_address":"","ucode":"2707288B6F5810","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoicOto6WsT7RiaTiadWic4nHrLwqlEjpVa8Eb186gicnB4XoWoxENjqpb5NPSH0oolj0a7vFbZSb6BO8A/132","comment_is_top":false,"comment_ctime":1557898735,"is_pvip":false,"replies":[{"id":35059,"content":"可以去 ng-zorro 提issue哈  ng我并不熟悉","user_name":"作者回复","user_name_real":"唐","uid":1316874,"ctime":1558878639,"ip_address":"","comment_id":94793,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100024601,"comment_content":"老师，遇到过ng-zorro 内存溢出有什么好的解决方案嘛？求教","like_count":0,"discussions":[{"author":{"id":1316874,"avatar":"https://static001.geekbang.org/account/avatar/00/14/18/0a/28206510.jpg","nickname":"唐金州","note":"","ucode":"563B97D87C66AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":450209,"discussion_content":"可以去 ng-zorro 提issue哈  ng我并不熟悉","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558878639,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":336332,"user_name":"Duke","can_delete":false,"product_type":"c3","uid":2131512,"ip_address":"","ucode":"77BB22ADCC2AB9","user_header":"https://static001.geekbang.org/account/avatar/00/20/86/38/379a9da5.jpg","comment_is_top":false,"comment_ctime":1646100826,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100024601,"comment_content":"moment 在webpack5.0+ 正则配置的过滤写法要改成\n\n&#47;&#47; new webpack.IgnorePlugin(&#47;^\\.\\&#47;locale$&#47;, &#47;moment$&#47;), &#47;&#47; 这种写法 5.0+ 会报错\n      new webpack.IgnorePlugin({\n        resourceRegExp: &#47;^\\.\\&#47;locale$&#47;,\n        contextRegExp: &#47;moment$&#47;,\n      }),","like_count":1},{"had_liked":false,"id":284523,"user_name":"Saki","can_delete":false,"product_type":"c3","uid":1143138,"ip_address":"","ucode":"CEA2E5D15D400E","user_header":"https://static001.geekbang.org/account/avatar/00/11/71/62/20df02b0.jpg","comment_is_top":false,"comment_ctime":1616315784,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100024601,"comment_content":"请问如何在打包的时候打成生产模式？\n现在默认是开发模式，找了很久没找到哪里能改= = ","like_count":1},{"had_liked":false,"id":245370,"user_name":"Chris🌝","can_delete":false,"product_type":"c3","uid":1238420,"ip_address":"","ucode":"94BA02BDA2856C","user_header":"https://static001.geekbang.org/account/avatar/00/12/e5/94/5c1c71c4.jpg","comment_is_top":false,"comment_ctime":1598926207,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":2,"product_id":100024601,"comment_content":"老师啊，你只说打包优化，没讲怎么打包部署上线，我目前是把打包后的dist 文件ftp 上传，感觉很不高效，能不能打包好就自动部署上线？","like_count":1,"discussions":[{"author":{"id":2004939,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/97/cb/122a985b.jpg","nickname":"一名小学生","note":"","ucode":"61B39AC52BD640","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":343960,"discussion_content":"https://segmentfault.com/a/1190000023838243","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611218504,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":96095,"user_name":"泡泡","can_delete":false,"product_type":"c3","uid":1450772,"ip_address":"","ucode":"8142CAE464D2FB","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKS4a1IwJOrnOGqCVAQSPWQeW6KTAPPGichBa53tyD3aJ3MmMIq8oueVSFLlkSTp2MHStseAkCDtBw/132","comment_is_top":false,"comment_ctime":1558327667,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100024601,"comment_content":"老师，您讲的按需加载方式需要开发写代码时严格按要求写，可是有些不负责的开发就很容易引入全部，记得webpack有个treeshaking配置，不知道老师能不能给我们讲讲呢，","like_count":1},{"had_liked":false,"id":308688,"user_name":"Geek_b20430","can_delete":false,"product_type":"c3","uid":2389954,"ip_address":"","ucode":"1AD067F154CDF5","user_header":"","comment_is_top":false,"comment_ctime":1629735188,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100024601,"comment_content":"老师讲的棒棒的，希望老师 能提供一下 视频里面的演示代码，跪求链接。","like_count":0},{"had_liked":false,"id":307865,"user_name":"docker131313","can_delete":false,"product_type":"c3","uid":1556406,"ip_address":"","ucode":"5B24734D18B57C","user_header":"https://wx.qlogo.cn/mmopen/vi_32/iaXcnYOjwO39gSSyo0CprNeLxx6OF80KqPz69ErJKmibMSxn5YeM4VGD6ATBnUR045ibsYjQGlAAQo5r3iaTPydTbA/132","comment_is_top":false,"comment_ctime":1629287130,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":5,"score":2,"product_id":100024601,"comment_content":"所以的视频一下黑屏了","like_count":0},{"had_liked":false,"id":306161,"user_name":"你好，阳光","can_delete":false,"product_type":"c3","uid":2145095,"ip_address":"","ucode":"1A2F487C57F7D9","user_header":"https://static001.geekbang.org/account/avatar/00/20/bb/47/b60ae3eb.jpg","comment_is_top":false,"comment_ctime":1628412603,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100024601,"comment_content":"唐老师，我按照视频添加了icon图标的优化配置后编译报错找不到@ant-design&#47;icons&#47;lib&#47;dist依赖是为什么？","like_count":0},{"had_liked":false,"id":211580,"user_name":"NL","can_delete":false,"product_type":"c3","uid":1137237,"ip_address":"","ucode":"E664C71840739F","user_header":"https://static001.geekbang.org/account/avatar/00/11/5a/55/888d12dd.jpg","comment_is_top":false,"comment_ctime":1587985987,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100024601,"comment_content":"老师，您好，打包出来app.js很大，已经通过懒加载优化了。但是发现app.js是所有的js。","like_count":0},{"had_liked":false,"id":142657,"user_name":"宜常乐","can_delete":false,"product_type":"c3","uid":1466159,"ip_address":"","ucode":"3E893A41146E66","user_header":"https://static001.geekbang.org/account/avatar/00/16/5f/2f/712923e2.jpg","comment_is_top":false,"comment_ctime":1571449572,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100024601,"comment_content":"打包优化，如何才能知道项目引用了哪些图标？","like_count":0},{"had_liked":false,"id":116219,"user_name":"阿文","can_delete":false,"product_type":"c3","uid":1467219,"ip_address":"","ucode":"B53454CA52BD7E","user_header":"https://static001.geekbang.org/account/avatar/00/16/63/53/b4590ccc.jpg","comment_is_top":false,"comment_ctime":1563803393,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100024601,"comment_content":"老师：打包后，放到tomcat中，为什么显示的是空白页面","like_count":0}]}