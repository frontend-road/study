{"id":335204,"title":"01 | etcdçš„å‰ä¸–ä»Šç”Ÿï¼šä¸ºä»€ä¹ˆKubernetesä½¿ç”¨etcdï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯å”èªã€‚</p><p>ä»Šå¤©æ˜¯ä¸“æ è¯¾ç¨‹çš„ç¬¬ä¸€è®²ï¼Œæˆ‘ä»¬å°±ä»etcdçš„å‰ä¸–ä»Šç”Ÿè®²èµ·ã€‚è®©æˆ‘ä»¬ä¸€èµ·ç©¿è¶Šå›2013å¹´ï¼Œçœ‹çœ‹etcdæœ€åˆæ˜¯åœ¨ä»€ä¹ˆä¸šåŠ¡åœºæ™¯ä¸‹è¢«è®¾è®¡å‡ºæ¥çš„ï¼Ÿ</p><p>2013å¹´ï¼Œæœ‰ä¸€ä¸ªå«CoreOSçš„åˆ›ä¸šå›¢é˜Ÿï¼Œä»–ä»¬æ„å»ºäº†ä¸€ä¸ªäº§å“ï¼ŒContainer Linuxï¼Œå®ƒæ˜¯ä¸€ä¸ªå¼€æºã€è½»é‡çº§çš„æ“ä½œç³»ç»Ÿï¼Œä¾§é‡è‡ªåŠ¨åŒ–ã€å¿«é€Ÿéƒ¨ç½²åº”ç”¨æœåŠ¡ï¼Œå¹¶è¦æ±‚åº”ç”¨ç¨‹åºéƒ½åœ¨å®¹å™¨ä¸­è¿è¡Œï¼ŒåŒæ—¶æä¾›é›†ç¾¤åŒ–çš„ç®¡ç†æ–¹æ¡ˆï¼Œç”¨æˆ·ç®¡ç†æœåŠ¡å°±åƒå•æœºä¸€æ ·æ–¹ä¾¿ã€‚</p><p>ä»–ä»¬å¸Œæœ›åœ¨é‡å¯ä»»æ„ä¸€èŠ‚ç‚¹çš„æ—¶å€™ï¼Œç”¨æˆ·çš„æœåŠ¡ä¸ä¼šå› æ­¤è€Œå®•æœºï¼Œå¯¼è‡´æ— æ³•æä¾›æœåŠ¡ï¼Œå› æ­¤éœ€è¦è¿è¡Œå¤šä¸ªå‰¯æœ¬ã€‚ä½†æ˜¯å¤šä¸ªå‰¯æœ¬ä¹‹é—´å¦‚ä½•åè°ƒï¼Œå¦‚ä½•é¿å…å˜æ›´çš„æ—¶å€™æ‰€æœ‰å‰¯æœ¬ä¸å¯ç”¨å‘¢ï¼Ÿ</p><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒCoreOSå›¢é˜Ÿéœ€è¦ä¸€ä¸ªåè°ƒæœåŠ¡æ¥å­˜å‚¨æœåŠ¡é…ç½®ä¿¡æ¯ã€æä¾›åˆ†å¸ƒå¼é”ç­‰èƒ½åŠ›ã€‚æ€ä¹ˆåŠå‘¢ï¼Ÿå½“ç„¶æ˜¯åˆ†æä¸šåŠ¡åœºæ™¯ã€ç—›ç‚¹ã€æ ¸å¿ƒç›®æ ‡ï¼Œç„¶åæ˜¯åŸºäºç›®æ ‡è¿›è¡Œæ–¹æ¡ˆé€‰å‹ï¼Œè¯„ä¼°æ˜¯é€‰æ‹©ç¤¾åŒºå¼€æºæ–¹æ¡ˆè¿˜æ˜¯è‡ªå·±é€ è½®å­ã€‚è¿™å…¶å®å°±æ˜¯æˆ‘ä»¬é‡åˆ°æ£˜æ‰‹é—®é¢˜æ—¶çš„é€šç”¨è§£å†³æ€è·¯ï¼ŒCoreOSå›¢é˜ŸåŒæ ·å¦‚æ­¤ã€‚</p><p>å‡è®¾ä½ æ˜¯CoreOSå›¢é˜Ÿæˆå‘˜ï¼Œä½ è®¤ä¸ºåœ¨è¿™æ ·çš„ä¸šåŠ¡åœºæ™¯ä¸‹ï¼Œç†æƒ³ä¸­çš„è§£å†³æ–¹æ¡ˆåº”æ»¡è¶³å“ªäº›ç›®æ ‡å‘¢ï¼Ÿ</p><p>å¦‚æœä½ æœ‰è¿‡ä¸€äº›å¼€å‘ç»éªŒï¼Œåº”è¯¥èƒ½æƒ³åˆ°ä¸€äº›å…³é”®ç‚¹äº†ï¼Œæˆ‘æ ¹æ®è‡ªå·±çš„ç»éªŒæ¥æ€»ç»“ä¸€ä¸‹ï¼Œä¸€ä¸ªåè°ƒæœåŠ¡ï¼Œç†æƒ³çŠ¶æ€ä¸‹å¤§æ¦‚éœ€è¦æ»¡è¶³ä»¥ä¸‹äº”ä¸ªç›®æ ‡ï¼š</p><!-- [[[read_end]]] --><ol>\n<li><strong>å¯ç”¨æ€§è§’åº¦ï¼šé«˜å¯ç”¨</strong>ã€‚åè°ƒæœåŠ¡ä½œä¸ºé›†ç¾¤çš„æ§åˆ¶é¢å­˜å‚¨ï¼Œå®ƒä¿å­˜äº†å„ä¸ªæœåŠ¡çš„éƒ¨ç½²ã€è¿è¡Œä¿¡æ¯ã€‚è‹¥å®ƒæ•…éšœï¼Œå¯èƒ½ä¼šå¯¼è‡´é›†ç¾¤æ— æ³•å˜æ›´ã€æœåŠ¡å‰¯æœ¬æ•°æ— æ³•åè°ƒã€‚ä¸šåŠ¡æœåŠ¡è‹¥æ­¤æ—¶å‡ºç°æ•…éšœï¼Œæ— æ³•åˆ›å»ºæ–°çš„å‰¯æœ¬ï¼Œå¯èƒ½ä¼šå½±å“ç”¨æˆ·æ•°æ®é¢ã€‚</li>\n<li><strong>æ•°æ®ä¸€è‡´æ€§è§’åº¦ï¼šæä¾›è¯»å–â€œæœ€æ–°â€æ•°æ®çš„æœºåˆ¶</strong>ã€‚æ—¢ç„¶åè°ƒæœåŠ¡å¿…é¡»å…·å¤‡é«˜å¯ç”¨çš„ç›®æ ‡ï¼Œå°±å¿…ç„¶ä¸èƒ½å­˜åœ¨å•ç‚¹æ•…éšœï¼ˆsingle point of failureï¼‰ï¼Œè€Œå¤šèŠ‚ç‚¹åˆå¼•å…¥äº†æ–°çš„é—®é¢˜ï¼Œå³å¤šä¸ªèŠ‚ç‚¹ä¹‹é—´çš„æ•°æ®ä¸€è‡´æ€§å¦‚ä½•ä¿éšœï¼Ÿæ¯”å¦‚ä¸€ä¸ªé›†ç¾¤3ä¸ªèŠ‚ç‚¹Aã€Bã€Cï¼Œä»èŠ‚ç‚¹Aã€Bè·å–æœåŠ¡é•œåƒç‰ˆæœ¬æ˜¯æ–°çš„ï¼Œä½†èŠ‚ç‚¹Cå› ä¸ºç£ç›˜ I/Oå¼‚å¸¸å¯¼è‡´æ•°æ®æ›´æ–°ç¼“æ…¢ï¼Œè‹¥æ§åˆ¶ç«¯é€šè¿‡CèŠ‚ç‚¹è·å–æ•°æ®ï¼Œé‚£ä¹ˆå¯èƒ½ä¼šå¯¼è‡´è¯»å–åˆ°è¿‡æœŸæ•°æ®ï¼ŒæœåŠ¡é•œåƒæ— æ³•åŠæ—¶æ›´æ–°ã€‚</li>\n<li><strong>å®¹é‡è§’åº¦ï¼šä½å®¹é‡ã€ä»…å­˜å‚¨å…³é”®å…ƒæ•°æ®é…ç½®ã€‚</strong>åè°ƒæœåŠ¡ä¿å­˜çš„ä»…ä»…æ˜¯æœåŠ¡ã€èŠ‚ç‚¹çš„é…ç½®ä¿¡æ¯ï¼ˆå±äºæ§åˆ¶é¢é…ç½®ï¼‰ï¼Œè€Œä¸æ˜¯ä¸ç”¨æˆ·ç›¸å…³çš„æ•°æ®ã€‚æ‰€ä»¥å­˜å‚¨ä¸Šä¸éœ€è¦è€ƒè™‘æ•°æ®åˆ†ç‰‡ï¼Œæ— éœ€è¿‡åº¦è®¾è®¡ã€‚</li>\n<li><strong>åŠŸèƒ½ï¼šå¢åˆ æ”¹æŸ¥ï¼Œç›‘å¬æ•°æ®å˜åŒ–çš„æœºåˆ¶</strong>ã€‚åè°ƒæœåŠ¡ä¿å­˜äº†æœåŠ¡çš„çŠ¶æ€ä¿¡æ¯ï¼Œè‹¥æœåŠ¡æœ‰å˜æ›´æˆ–å¼‚å¸¸ï¼Œç›¸æ¯”æ§åˆ¶ç«¯å®šæ—¶å»è½®è¯¢æ£€æŸ¥ä¸€ä¸ªä¸ªæœåŠ¡çŠ¶æ€ï¼Œè‹¥èƒ½å¿«é€Ÿæ¨é€å˜æ›´äº‹ä»¶ç»™æ§åˆ¶ç«¯ï¼Œåˆ™å¯æå‡æœåŠ¡å¯ç”¨æ€§ã€å‡å°‘åè°ƒæœåŠ¡ä¸å¿…è¦çš„æ€§èƒ½å¼€é”€ã€‚</li>\n<li><strong>è¿ç»´å¤æ‚åº¦ï¼šå¯ç»´æŠ¤æ€§ã€‚</strong>åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å¾€å¾€ä¼šé‡åˆ°ç¡¬ä»¶Bugã€è½¯ä»¶Bugã€äººä¸ºæ“ä½œé”™è¯¯å¯¼è‡´èŠ‚ç‚¹å®•æœºï¼Œä»¥åŠæ–°å¢ã€æ›¿æ¢èŠ‚ç‚¹ç­‰è¿ç»´åœºæ™¯ï¼Œéƒ½éœ€è¦å¯¹åè°ƒæœåŠ¡æˆå‘˜è¿›è¡Œå˜æ›´ã€‚è‹¥èƒ½æä¾›APIå®ç°å¹³æ»‘åœ°å˜æ›´æˆå‘˜èŠ‚ç‚¹ä¿¡æ¯ï¼Œå°±å¯ä»¥å¤§å¤§é™ä½è¿ç»´å¤æ‚åº¦ï¼Œå‡å°‘è¿ç»´æˆæœ¬ï¼ŒåŒæ—¶å¯é¿å…å› äººå·¥å˜æ›´ä¸è§„èŒƒå¯èƒ½å¯¼è‡´çš„æœåŠ¡å¼‚å¸¸ã€‚</li>\n</ol><p>äº†è§£å®Œç†æƒ³ä¸­çš„è§£å†³æ–¹æ¡ˆç›®æ ‡ï¼Œæˆ‘ä»¬å†æ¥çœ‹CoreOSå›¢é˜Ÿå½“æ—¶ä¸ºä»€ä¹ˆé€‰æ‹©äº†ä»0åˆ°1å¼€å‘ä¸€ä¸ªæ–°çš„åè°ƒæœåŠ¡å‘¢ï¼Ÿ</p><p>å¦‚æœä½¿ç”¨å¼€æºè½¯ä»¶ï¼Œå½“æ—¶å…¶å®æ˜¯æœ‰ZooKeeperçš„ï¼Œä½†æ˜¯ä»–ä»¬ä¸ºä»€ä¹ˆä¸ç”¨ZooKeeperå‘¢ï¼Ÿæˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹ã€‚</p><p>ä»é«˜å¯ç”¨æ€§ã€æ•°æ®ä¸€è‡´æ€§ã€åŠŸèƒ½è¿™ä¸‰ä¸ªè§’åº¦æ¥è¯´ï¼ŒZooKeeperæ˜¯æ»¡è¶³CoreOSè¯‰æ±‚çš„ã€‚ç„¶è€Œå½“æ—¶çš„ZooKeeperä¸æ”¯æŒé€šè¿‡APIå®‰å…¨åœ°å˜æ›´æˆå‘˜ï¼Œéœ€è¦äººå·¥ä¿®æ”¹ä¸€ä¸ªä¸ªèŠ‚ç‚¹çš„é…ç½®ï¼Œå¹¶é‡å¯è¿›ç¨‹ã€‚</p><p>è‹¥å˜æ›´å§¿åŠ¿ä¸æ­£ç¡®ï¼Œåˆ™æœ‰å¯èƒ½å‡ºç°è„‘è£‚ç­‰ä¸¥é‡æ•…éšœã€‚é€‚é…äº‘ç¯å¢ƒã€å¯å¹³æ»‘è°ƒæ•´é›†ç¾¤è§„æ¨¡ã€åœ¨çº¿å˜æ›´è¿è¡Œæ—¶é…ç½®æ˜¯CoreOSçš„æœŸæœ›ç›®æ ‡ï¼Œè€ŒZooKeeperåœ¨è¿™å—çš„å¯ç»´æŠ¤æˆæœ¬ç›¸å¯¹è¾ƒé«˜ã€‚</p><p>å…¶æ¬¡ZooKeeperæ˜¯ç”¨ Java ç¼–å†™çš„ï¼Œéƒ¨ç½²è¾ƒç¹çï¼Œå ç”¨è¾ƒå¤šçš„å†…å­˜èµ„æºï¼ŒåŒæ—¶ZooKeeper RPCçš„åºåˆ—åŒ–æœºåˆ¶ç”¨çš„æ˜¯Juteï¼Œè‡ªå·±å®ç°çš„RPC APIã€‚æ— æ³•ä½¿ç”¨curlä¹‹ç±»çš„å¸¸ç”¨å·¥å…·ä¸ä¹‹äº’åŠ¨ï¼ŒCoreOSæœŸæœ›ä½¿ç”¨æ¯”è¾ƒç®€å•çš„HTTP + JSONã€‚</p><p>å› æ­¤ï¼ŒCoreOSå†³å®šè‡ªå·±é€ è½®å­ï¼Œé‚£CoreOSå›¢é˜Ÿæ˜¯å¦‚ä½•æ ¹æ®ç³»ç»Ÿç›®æ ‡è¿›è¡ŒæŠ€æœ¯æ–¹æ¡ˆé€‰å‹çš„å‘¢ï¼Ÿ</p><h2>etcd v1å’Œv2è¯ç”Ÿ</h2><p>é¦–å…ˆæˆ‘ä»¬æ¥çœ‹æœåŠ¡é«˜å¯ç”¨åŠæ•°æ®ä¸€è‡´æ€§ã€‚å‰é¢æˆ‘ä»¬æåˆ°å•å‰¯æœ¬å­˜åœ¨å•ç‚¹æ•…éšœï¼Œè€Œå¤šå‰¯æœ¬åˆå¼•å…¥æ•°æ®ä¸€è‡´æ€§é—®é¢˜ã€‚</p><p>å› æ­¤ä¸ºäº†è§£å†³æ•°æ®ä¸€è‡´æ€§é—®é¢˜ï¼Œéœ€è¦å¼•å…¥ä¸€ä¸ªå…±è¯†ç®—æ³•ï¼Œç¡®ä¿å„èŠ‚ç‚¹æ•°æ®ä¸€è‡´æ€§ï¼Œå¹¶å¯å®¹å¿ä¸€å®šèŠ‚ç‚¹æ•…éšœã€‚å¸¸è§çš„å…±è¯†ç®—æ³•æœ‰Paxosã€ZABã€Raftç­‰ã€‚CoreOSå›¢é˜Ÿé€‰æ‹©äº†æ˜“ç†è§£å®ç°çš„Raftç®—æ³•ï¼Œå®ƒå°†å¤æ‚çš„ä¸€è‡´æ€§é—®é¢˜åˆ†è§£æˆLeaderé€‰ä¸¾ã€æ—¥å¿—åŒæ­¥ã€å®‰å…¨æ€§ä¸‰ä¸ªç›¸å¯¹ç‹¬ç«‹çš„å­é—®é¢˜ï¼Œåªè¦é›†ç¾¤ä¸€åŠä»¥ä¸ŠèŠ‚ç‚¹å­˜æ´»å°±å¯æä¾›æœåŠ¡ï¼Œå…·å¤‡è‰¯å¥½çš„å¯ç”¨æ€§ã€‚</p><p>å…¶æ¬¡æˆ‘ä»¬å†æ¥çœ‹æ•°æ®æ¨¡å‹ï¼ˆData Modelï¼‰å’ŒAPIã€‚æ•°æ®æ¨¡å‹å‚è€ƒäº†ZooKeeperï¼Œä½¿ç”¨çš„æ˜¯åŸºäºç›®å½•çš„å±‚æ¬¡æ¨¡å¼ã€‚APIç›¸æ¯”ZooKeeperæ¥è¯´ï¼Œä½¿ç”¨äº†ç®€å•ã€æ˜“ç”¨çš„REST APIï¼Œæä¾›äº†å¸¸ç”¨çš„Get/Set/Delete/Watchç­‰APIï¼Œå®ç°å¯¹key-valueæ•°æ®çš„æŸ¥è¯¢ã€æ›´æ–°ã€åˆ é™¤ã€ç›‘å¬ç­‰æ“ä½œã€‚</p><p>key-valueå­˜å‚¨å¼•æ“ä¸Šï¼ŒZooKeeperä½¿ç”¨çš„æ˜¯Concurrent HashMapï¼Œè€Œetcdä½¿ç”¨çš„æ˜¯åˆ™æ˜¯ç®€å•å†…å­˜æ ‘ï¼Œå®ƒçš„èŠ‚ç‚¹æ•°æ®ç»“æ„ç²¾ç®€åå¦‚ä¸‹ï¼Œå«èŠ‚ç‚¹è·¯å¾„ã€å€¼ã€å­©å­èŠ‚ç‚¹ä¿¡æ¯ã€‚è¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„ä½å®¹é‡è®¾è®¡ï¼Œæ•°æ®å…¨æ”¾åœ¨å†…å­˜ï¼Œæ— éœ€è€ƒè™‘æ•°æ®åˆ†ç‰‡ï¼Œåªèƒ½ä¿å­˜keyçš„æœ€æ–°ç‰ˆæœ¬ï¼Œç®€å•æ˜“å®ç°ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/ff/41/ff4ee032739b9b170af1b2e2ba530e41.png?wh=1024*904\" alt=\"\"></p><pre><code>type node struct {\n   Path string  //èŠ‚ç‚¹è·¯å¾„\n   Parent *node //å…³è”çˆ¶äº²èŠ‚ç‚¹\n   Value      string     //keyçš„valueå€¼\n   ExpireTime time.Time //è¿‡æœŸæ—¶é—´\n   Children   map[string]*node //æ­¤èŠ‚ç‚¹çš„å­©å­èŠ‚ç‚¹\n}\n</code></pre><p>æœ€åæˆ‘ä»¬å†æ¥çœ‹å¯ç»´æŠ¤æ€§ã€‚Raftç®—æ³•æä¾›äº†æˆå‘˜å˜æ›´ç®—æ³•ï¼Œå¯åŸºäºæ­¤å®ç°æˆå‘˜åœ¨çº¿ã€å®‰å…¨å˜æ›´ï¼ŒåŒæ—¶æ­¤åè°ƒæœåŠ¡ä½¿ç”¨Goè¯­è¨€ç¼–å†™ï¼Œæ— ä¾èµ–ï¼Œéƒ¨ç½²ç®€å•ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/dd/70/dd253e4fc19885fa6f00c278762ba270.png?wh=1920*1402\" alt=\"\"></p><p>åŸºäºä»¥ä¸ŠæŠ€æœ¯æ–¹æ¡ˆå’Œæ¶æ„å›¾ï¼ŒCoreOSå›¢é˜Ÿåœ¨2013å¹´8æœˆå¯¹å¤–å‘å¸ƒäº†ç¬¬ä¸€ä¸ªæµ‹è¯•ç‰ˆæœ¬v0.1ï¼ŒAPI v1ç‰ˆæœ¬ï¼Œå‘½åä¸ºetcdã€‚</p><p>é‚£ä¹ˆetcdè¿™ä¸ªåå­—æ˜¯æ€ä¹ˆæ¥çš„å‘¢ï¼Ÿå…¶å®å®ƒæºäºä¸¤ä¸ªæ–¹é¢ï¼Œunixçš„â€œ/etcâ€æ–‡ä»¶å¤¹å’Œåˆ†å¸ƒå¼ç³»ç»Ÿ(â€œDâ€istribute system)çš„Dï¼Œç»„åˆåœ¨ä¸€èµ·è¡¨ç¤ºetcdæ˜¯ç”¨äºå­˜å‚¨åˆ†å¸ƒå¼é…ç½®çš„ä¿¡æ¯å­˜å‚¨æœåŠ¡ã€‚</p><p>v0.1ç‰ˆæœ¬å®ç°äº†ç®€å•çš„HTTP Get/Set/Delete/Watch APIï¼Œä½†è¯»æ•°æ®ä¸€è‡´æ€§æ— æ³•ä¿è¯ã€‚v0.2ç‰ˆæœ¬ï¼Œæ”¯æŒé€šè¿‡æŒ‡å®šconsistentæ¨¡å¼ï¼Œä»Leaderè¯»å–æ•°æ®ï¼Œå¹¶å°†Test And Setæœºåˆ¶ä¿®æ­£ä¸ºCAS(Compare And Swap)ï¼Œè§£å†³åŸå­æ›´æ–°çš„é—®é¢˜ï¼ŒåŒæ—¶å‘å¸ƒäº†æ–°çš„APIç‰ˆæœ¬v2ï¼Œè¿™å°±æ˜¯å¤§å®¶ç†Ÿæ‚‰çš„etcd v2ç‰ˆæœ¬ï¼Œç¬¬ä¸€ä¸ªéstableç‰ˆæœ¬ã€‚</p><p>ä¸‹é¢ï¼Œæˆ‘ç”¨ä¸€å¹…æ—¶é—´è½´å›¾ï¼Œç»™ä½ æ€»ç»“ä¸€ä¸‹etcd v1/v2å…³é”®ç‰¹æ€§ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/d0/0e/d0af3537c0eef89b499a82693da23f0e.png?wh=1920*727\" alt=\"\"></p><h2>ä¸ºä»€ä¹ˆKubernetesä½¿ç”¨etcd?</h2><p>è¿™å¼ å›¾é‡Œï¼Œæˆ‘ç‰¹åˆ«æ ‡æ³¨å‡ºäº†Kubernetesçš„å‘å¸ƒæ—¶é—´ç‚¹ï¼Œè¿™ä¸ªéå¸¸å…³é”®ã€‚æˆ‘ä»¬å¿…é¡»å…ˆæ¥è¯´è¯´è¿™ä¸ªäº‹å„¿ï¼Œä¹Ÿå°±æ˜¯Kuberneteså’Œetcdçš„æ•…äº‹ã€‚</p><p>2014å¹´6æœˆï¼ŒGoogleçš„Kubernetesé¡¹ç›®è¯ç”Ÿäº†ï¼Œæˆ‘ä»¬å‰é¢æ‰€è®¨è®ºåˆ°Goè¯­è¨€ç¼–å†™ã€etcdé«˜å¯ç”¨ã€Watchæœºåˆ¶ã€CASã€TTLç­‰ç‰¹æ€§æ­£æ˜¯Kubernetesæ‰€éœ€è¦çš„ï¼Œå®ƒæ—©æœŸçš„0.4ç‰ˆæœ¬ï¼Œä½¿ç”¨çš„æ­£æ˜¯etcd v0.2ç‰ˆæœ¬ã€‚</p><p>Kubernetesæ˜¯å¦‚ä½•ä½¿ç”¨etcd v2è¿™äº›ç‰¹æ€§çš„å‘¢ï¼Ÿä¸¾å‡ ä¸ªç®€å•å°ä¾‹å­ã€‚</p><p>å½“ä½ ä½¿ç”¨Kuberneteså£°æ˜å¼APIéƒ¨ç½²æœåŠ¡çš„æ—¶å€™ï¼ŒKubernetesçš„æ§åˆ¶å™¨é€šè¿‡etcd Watchæœºåˆ¶ï¼Œä¼šå®æ—¶ç›‘å¬èµ„æºå˜åŒ–äº‹ä»¶ï¼Œå¯¹æ¯”å®é™…çŠ¶æ€ä¸æœŸæœ›çŠ¶æ€æ˜¯å¦ä¸€è‡´ï¼Œå¹¶é‡‡å–åè°ƒåŠ¨ä½œä½¿å…¶ä¸€è‡´ã€‚Kubernetesæ›´æ–°æ•°æ®çš„æ—¶å€™ï¼Œé€šè¿‡CASæœºåˆ¶ä¿è¯å¹¶å‘åœºæ™¯ä¸‹çš„åŸå­æ›´æ–°ï¼Œå¹¶é€šè¿‡å¯¹keyè®¾ç½®TTLæ¥å­˜å‚¨Eventäº‹ä»¶ï¼Œæå‡Kubernetesé›†ç¾¤çš„å¯è§‚æµ‹æ€§ï¼ŒåŸºäºTTLç‰¹æ€§ï¼ŒEventäº‹ä»¶keyåˆ°æœŸåå¯è‡ªåŠ¨åˆ é™¤ã€‚</p><p>Kubernetesé¡¹ç›®ä½¿ç”¨etcdï¼Œé™¤äº†æŠ€æœ¯å› ç´ ä¹Ÿä¸å½“æ—¶çš„å•†ä¸šç«äº‰æœ‰å…³ã€‚CoreOSæ˜¯Kuberneteså®¹å™¨ç”Ÿæ€åœˆçš„æ ¸å¿ƒæˆå‘˜ä¹‹ä¸€ã€‚</p><p>å½“æ—¶Dockerå®¹å™¨æµªæ½®æ­£å¸­å·æ•´ä¸ªå¼€æºæŠ€æœ¯ç¤¾åŒºï¼ŒCoreOSä¹Ÿå°†å®¹å™¨é›†æˆåˆ°è‡ªå®¶äº§å“ä¸­ã€‚ä¸€å¼€å§‹ä¸Dockerå…¬å¸è¿˜æ˜¯åˆä½œä¼™ä¼´ï¼Œç„¶è€ŒDockerå…¬å¸ä¸æ–­å¼ºåŒ–Dockerçš„PaaSå¹³å°èƒ½åŠ›ï¼Œå¼ºåŠ¿æ§åˆ¶Dockerç¤¾åŒºï¼Œè¿™ä¸CoreOSæ ¸å¿ƒå•†ä¸šæˆ˜ç•¥å‡ºç°äº†å†²çªï¼Œä¹ŸæŸå®³äº†Googleã€RedHatç­‰å‚å•†çš„åˆ©ç›Šã€‚</p><p>æœ€ç»ˆCoreOSä¸Dockeråˆ†é“æ‰¬é•³ï¼Œå¹¶æ¨å‡ºäº†rkté¡¹ç›®æ¥å¯¹æŠ—Dockerï¼Œç„¶è€Œæ­¤æ—¶Dockerå·²æ·±å…¥äººå¿ƒï¼ŒCoreOSè¢«Dockerå…¨é¢å‹åˆ¶ã€‚</p><p>ä»¥Googleã€RedHatä¸ºé¦–çš„é˜µè¥ï¼ŒåŸºäºGoogleå¤šå¹´çš„å¤§è§„æ¨¡å®¹å™¨ç®¡ç†ç³»ç»ŸBorgç»éªŒï¼Œç»“åˆç¤¾åŒºçš„å»ºè®®å’Œå®è·µï¼Œæ„å»ºä»¥Kubernetesä¸ºæ ¸å¿ƒçš„å®¹å™¨ç”Ÿæ€åœˆã€‚ç›¸æ¯”Dockerçš„å„æ–­ã€ç‹¬è£ï¼ŒKubernetesç¤¾åŒºæ¨è¡Œçš„æ˜¯æ°‘ä¸»ã€å¼€æ”¾åŸåˆ™ï¼ŒKubernetesæ¯ä¸€å±‚éƒ½å¯ä»¥é€šè¿‡æ’ä»¶åŒ–æ‰©å±•ï¼Œåœ¨Googleã€RedHatçš„å¸¦é¢†ä¸‹ä¸æ–­å‘å±•å£®å¤§ï¼Œetcdä¹Ÿè¿›å…¥äº†å¿«é€Ÿå‘å±•æœŸã€‚</p><p>åœ¨2015å¹´1æœˆï¼ŒCoreOSå‘å¸ƒäº†etcdç¬¬ä¸€ä¸ªç¨³å®šç‰ˆæœ¬2.0ï¼Œæ”¯æŒäº†quorum readï¼Œæä¾›äº†ä¸¥æ ¼çš„çº¿æ€§ä¸€è‡´æ€§è¯»èƒ½åŠ›ã€‚7æœˆï¼ŒåŸºäºetcd 2.0çš„Kubernetesç¬¬ä¸€ä¸ªç”Ÿäº§ç¯å¢ƒå¯ç”¨ç‰ˆæœ¬v1.0.1å‘å¸ƒäº†ï¼ŒKuberneteså¼€å§‹äº†æ–°çš„é‡Œç¨‹ç¢‘çš„å‘å±•ã€‚</p><p>etcd v2åœ¨ç¤¾åŒºè·å¾—äº†å¹¿æ³›å…³æ³¨ï¼ŒGitHub staræ•°åœ¨2015å¹´6æœˆå°±é«˜è¾¾6000+ï¼Œè¶…è¿‡500ä¸ªé¡¹ç›®ä½¿ç”¨ï¼Œè¢«å¹¿æ³›åº”ç”¨äºé…ç½®å­˜å‚¨ã€æœåŠ¡å‘ç°ã€ä¸»å¤‡é€‰ä¸¾ç­‰åœºæ™¯ã€‚</p><p>ä¸‹å›¾æˆ‘ä»æ„å»ºåˆ†å¸ƒå¼ç³»ç»Ÿçš„æ ¸å¿ƒè¦ç´ è§’åº¦ï¼Œç»™ä½ æ€»ç»“äº†etcd v2æ ¸å¿ƒæŠ€æœ¯ç‚¹ã€‚æ— è®ºæ˜¯NoSQLå­˜å‚¨è¿˜æ˜¯SQLå­˜å‚¨ã€æ–‡æ¡£å­˜å‚¨ï¼Œå…¶å®å¤§å®¶è¦è§£å†³çš„é—®é¢˜éƒ½æ˜¯ç±»ä¼¼çš„ï¼ŒåŸºæœ¬å°±æ˜¯å›¾ä¸­æ€»ç»“çš„æ•°æ®æ¨¡å‹ã€å¤åˆ¶ã€å…±è¯†ç®—æ³•ã€APIã€äº‹åŠ¡ã€ä¸€è‡´æ€§ã€æˆå‘˜æ•…éšœæ£€æµ‹ç­‰æ–¹é¢ã€‚</p><p>å¸Œæœ›é€šè¿‡æ­¤å›¾å¸®åŠ©ä½ äº†è§£ä»0åˆ°1å¦‚ä½•æ„å»ºã€å­¦ä¹ ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿï¼Œè¦è§£å†³å“ªäº›æŠ€æœ¯ç‚¹ï¼Œåœ¨å¿ƒä¸­æœ‰ä¸ªåˆæ­¥è®¤è¯†ï¼Œåé¢çš„è¯¾ç¨‹ä¸­æˆ‘ä¼šå†æ·±å…¥ä»‹ç»ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/cd/f0/cde3f155f51bfd3d7fd78fe8e7ac9bf0.png?wh=1920*943\" alt=\"\"></p><h2>etcd v3è¯ç”Ÿ</h2><p>ç„¶è€Œéšç€Kubernetesé¡¹ç›®ä¸æ–­å‘å±•ï¼Œv2ç‰ˆæœ¬çš„ç“¶é¢ˆå’Œç¼ºé™·é€æ¸æš´éœ²ï¼Œé‡åˆ°äº†è‹¥å¹²æ€§èƒ½å’Œç¨³å®šæ€§é—®é¢˜ï¼ŒKubernetesç¤¾åŒºå‘¼åæ”¯æŒæ–°çš„å­˜å‚¨ã€æ‰¹è¯„etcdä¸å¯é çš„å£°éŸ³å¼€å§‹ä¸æ–­å‡ºç°ã€‚</p><p>å…·ä½“æœ‰å“ªäº›é—®é¢˜å‘¢ï¼Ÿæˆ‘ç»™ä½ æ€»ç»“äº†å¦‚ä¸‹å›¾ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/88/d1/881db1b7d05dc40771e9737f3117f5d1.png?wh=1920*577\" alt=\"\"></p><p>ä¸‹é¢æˆ‘åˆ†åˆ«ä»åŠŸèƒ½å±€é™æ€§ã€Watchäº‹ä»¶çš„å¯é æ€§ã€æ€§èƒ½ã€å†…å­˜å¼€é”€æ¥åˆ†åˆ«ç»™ä½ å‰–æetcd v2çš„é—®é¢˜ã€‚</p><p>é¦–å…ˆæ˜¯<strong>åŠŸèƒ½å±€é™æ€§é—®é¢˜ã€‚</strong>å®ƒä¸»è¦æ˜¯æŒ‡etcd v2ä¸æ”¯æŒèŒƒå›´å’Œåˆ†é¡µæŸ¥è¯¢ã€ä¸æ”¯æŒå¤škeyäº‹åŠ¡ã€‚</p><p>ç¬¬ä¸€ï¼Œetcd v2ä¸æ”¯æŒèŒƒå›´æŸ¥è¯¢å’Œåˆ†é¡µã€‚åˆ†é¡µå¯¹äºæ•°æ®è¾ƒå¤šçš„åœºæ™¯æ˜¯å¿…ä¸å¯å°‘çš„ã€‚åœ¨Kubernetesä¸­ï¼Œåœ¨é›†ç¾¤è§„æ¨¡å¢å¤§åï¼ŒPodã€Eventç­‰èµ„æºå¯èƒ½ä¼šå‡ºç°æ•°åƒä¸ªä»¥ä¸Šï¼Œä½†æ˜¯etcd v2ä¸æ”¯æŒåˆ†é¡µï¼Œä¸æ”¯æŒèŒƒå›´æŸ¥è¯¢ï¼Œå¤§åŒ…ç­‰expensive requestä¼šå¯¼è‡´ä¸¥é‡çš„æ€§èƒ½ä¹ƒè‡³é›ªå´©é—®é¢˜ã€‚</p><p>ç¬¬äºŒï¼Œetcd v2ä¸æ”¯æŒå¤škeyäº‹åŠ¡ã€‚åœ¨å®é™…è½¬è´¦ç­‰ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œå¾€å¾€æˆ‘ä»¬éœ€è¦åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­åŒæ—¶æ›´æ–°å¤šä¸ªkeyã€‚</p><p>ç„¶åæ˜¯<strong>Watchæœºåˆ¶å¯é æ€§é—®é¢˜</strong>ã€‚Kubernetesé¡¹ç›®ä¸¥é‡ä¾èµ–etcd Watchæœºåˆ¶ï¼Œç„¶è€Œetcd v2æ˜¯å†…å­˜å‹ã€ä¸æ”¯æŒä¿å­˜keyå†å²ç‰ˆæœ¬çš„æ•°æ®åº“ï¼Œåªåœ¨å†…å­˜ä¸­ä½¿ç”¨æ»‘åŠ¨çª—å£ä¿å­˜äº†æœ€è¿‘çš„1000æ¡å˜æ›´äº‹ä»¶ï¼Œå½“etcd serverå†™è¯·æ±‚è¾ƒå¤šã€ç½‘ç»œæ³¢åŠ¨æ—¶ç­‰åœºæ™¯ï¼Œå¾ˆå®¹æ˜“å‡ºç°äº‹ä»¶ä¸¢å¤±é—®é¢˜ï¼Œè¿›è€Œåˆè§¦å‘clientæ•°æ®å…¨é‡æ‹‰å–ï¼Œäº§ç”Ÿå¤§é‡expensive requestï¼Œç”šè‡³å¯¼è‡´etcdé›ªå´©ã€‚</p><p>å…¶æ¬¡æ˜¯<strong>æ€§èƒ½ç“¶é¢ˆé—®é¢˜</strong>ã€‚etcd v2æ—©æœŸä½¿ç”¨äº†ç®€å•ã€æ˜“è°ƒè¯•çš„HTTP/1.x APIï¼Œä½†æ˜¯éšç€Kubernetesæ”¯æ’‘çš„é›†ç¾¤è§„æ¨¡è¶Šæ¥è¶Šå¤§ï¼ŒHTTP/1.xåè®®çš„ç“¶é¢ˆé€æ¸æš´éœ²å‡ºæ¥ã€‚æ¯”å¦‚é›†ç¾¤è§„æ¨¡å¤§æ—¶ï¼Œç”±äºHTTP/1.xåè®®æ²¡æœ‰å‹ç¼©æœºåˆ¶ï¼Œæ‰¹é‡æ‹‰å–è¾ƒå¤šPodæ—¶å®¹æ˜“å¯¼è‡´APIServerå’Œetcdå‡ºç°CPUé«˜è´Ÿè½½ã€OOMã€ä¸¢åŒ…ç­‰é—®é¢˜ã€‚</p><p>å¦ä¸€æ–¹é¢ï¼Œetcd v2 clientä¼šé€šè¿‡HTTPé•¿è¿æ¥è½®è¯¢Watchäº‹ä»¶ï¼Œå½“watcherè¾ƒå¤šçš„æ—¶å€™ï¼Œå› HTTP/1.xä¸æ”¯æŒå¤šè·¯å¤ç”¨ï¼Œä¼šåˆ›å»ºå¤§é‡çš„è¿æ¥ï¼Œæ¶ˆè€—serverç«¯è¿‡å¤šçš„socketå’Œå†…å­˜èµ„æºã€‚</p><p>åŒæ—¶etcd v2æ”¯æŒä¸ºæ¯ä¸ªkeyè®¾ç½®TTLè¿‡æœŸæ—¶é—´ï¼Œclientä¸ºäº†é˜²æ­¢keyçš„TTLè¿‡æœŸåè¢«åˆ é™¤ï¼Œéœ€è¦å‘¨æœŸæ€§åˆ·æ–°keyçš„TTLã€‚</p><p>å®é™…ä¸šåŠ¡ä¸­å¾ˆæœ‰å¯èƒ½è‹¥å¹²keyæ‹¥æœ‰ç›¸åŒçš„TTLï¼Œå¯æ˜¯åœ¨etcd v2ä¸­ï¼Œå³ä½¿å¤§é‡key TTLä¸€æ ·ï¼Œä½ ä¹Ÿéœ€è¦åˆ†åˆ«ä¸ºæ¯ä¸ªkeyå‘èµ·ç»­æœŸæ“ä½œï¼Œå½“keyè¾ƒå¤šçš„æ—¶å€™ï¼Œè¿™ä¼šæ˜¾è‘—å¢åŠ é›†ç¾¤è´Ÿè½½ã€å¯¼è‡´é›†ç¾¤æ€§èƒ½æ˜¾è‘—ä¸‹é™ã€‚</p><p>æœ€åæ˜¯<strong>å†…å­˜å¼€é”€é—®é¢˜ã€‚</strong>etcd v2åœ¨å†…å­˜ç»´æŠ¤äº†ä¸€é¢—æ ‘æ¥ä¿å­˜æ‰€æœ‰èŠ‚ç‚¹keyåŠvalueã€‚åœ¨æ•°æ®é‡åœºæ™¯ç•¥å¤§çš„åœºæ™¯ï¼Œå¦‚é…ç½®é¡¹è¾ƒå¤šã€å­˜å‚¨äº†å¤§é‡Kubernetes Eventsï¼Œ å®ƒä¼šå¯¼è‡´è¾ƒå¤§çš„å†…å­˜å¼€é”€ï¼ŒåŒæ—¶etcdéœ€è¦å®šæ—¶æŠŠå…¨é‡å†…å­˜æ ‘æŒä¹…åŒ–åˆ°ç£ç›˜ã€‚è¿™ä¼šæ¶ˆè€—å¤§é‡çš„CPUå’Œç£ç›˜ I/Oèµ„æºï¼Œå¯¹ç³»ç»Ÿçš„ç¨³å®šæ€§é€ æˆä¸€å®šå½±å“ã€‚</p><p>ä¸ºä»€ä¹ˆetcd v2æœ‰ä»¥ä¸Šè‹¥å¹²é—®é¢˜ï¼ŒConsulç­‰å…¶ä»–ç«å“ä¾ç„¶æ²¡æœ‰è¢«Kubernetesæ”¯æŒå‘¢ï¼Ÿ</p><p>ä¸€æ–¹é¢å½“æ—¶åŒ…æ‹¬Consulåœ¨å†…ï¼Œæ²¡æœ‰ä¸€ä¸ªå¼€æºé¡¹ç›®æ˜¯åå…¨åç¾å®Œå…¨æ»¡è¶³Kuberneteséœ€æ±‚ã€‚è€ŒCoreOSå›¢é˜Ÿä¸€ç›´åœ¨è†å¬ç¤¾åŒºçš„å£°éŸ³å¹¶ç§¯ææ”¹è¿›ï¼Œè§£å†³ç¤¾åŒºçš„ç—›ç‚¹ã€‚ç”¨æˆ·åæ§½etcdä¸ç¨³å®šï¼Œä»–ä»¬å°±è®¾è®¡å®ç°è‡ªåŠ¨åŒ–çš„æµ‹è¯•æ–¹æ¡ˆï¼Œæ¨¡æ‹Ÿã€æ³¨å…¥å„ç±»æ•…éšœåœºæ™¯ï¼ŒåŠæ—¶å‘ç°ä¿®å¤Bugï¼Œä»¥æå‡etcdç¨³å®šæ€§ã€‚</p><p>å¦ä¸€æ–¹é¢ï¼Œç”¨æˆ·åæ§½æ€§èƒ½é—®é¢˜ï¼Œé’ˆå¯¹etcd v2å„ç§å…ˆå¤©æ€§ç¼ºé™·é—®é¢˜ï¼Œä»–ä»¬ä»2015å¹´å°±å¼€å§‹è®¾è®¡ã€å®ç°æ–°ä¸€ä»£etcd v3æ–¹æ¡ˆå»è§£å†³ä»¥ä¸Šç—›ç‚¹ï¼Œå¹¶ç§¯æå‚ä¸Kubernetesé¡¹ç›®ï¼Œè´Ÿè´£etcd v2åˆ°v3çš„å­˜å‚¨å¼•æ“åˆ‡æ¢ï¼Œæ¨åŠ¨Kubernetesé¡¹ç›®çš„å‰è¿›ã€‚åŒæ—¶ï¼Œè®¾è®¡å¼€å‘é€šç”¨å‹æµ‹å·¥å…·ã€è¾“å‡ºConsulã€ZooKeeperã€etcdæ€§èƒ½æµ‹è¯•æŠ¥å‘Šï¼Œè¯æ˜etcdçš„ä¼˜è¶Šæ€§ã€‚</p><p>etcd v3å°±æ˜¯ä¸ºäº†è§£å†³ä»¥ä¸Šç¨³å®šæ€§ã€æ‰©å±•æ€§ã€æ€§èƒ½é—®é¢˜è€Œè¯ç”Ÿçš„ã€‚</p><p>åœ¨å†…å­˜å¼€é”€ã€Watchäº‹ä»¶å¯é æ€§ã€åŠŸèƒ½å±€é™ä¸Šï¼Œå®ƒé€šè¿‡å¼•å…¥B-treeã€boltdbå®ç°ä¸€ä¸ªMVCCæ•°æ®åº“ï¼Œæ•°æ®æ¨¡å‹ä»å±‚æ¬¡å‹ç›®å½•ç»“æ„æ”¹æˆæ‰å¹³çš„key-valueï¼Œæä¾›ç¨³å®šå¯é çš„äº‹ä»¶é€šçŸ¥ï¼Œå®ç°äº†äº‹åŠ¡ï¼Œæ”¯æŒå¤škeyåŸå­æ›´æ–°ï¼ŒåŒæ—¶åŸºäºboltdbçš„æŒä¹…åŒ–å­˜å‚¨ï¼Œæ˜¾è‘—é™ä½äº†etcdçš„å†…å­˜å ç”¨ã€é¿å…äº†etcd v2å®šæœŸç”Ÿæˆå¿«ç…§æ—¶çš„æ˜‚è´µçš„èµ„æºå¼€é”€ã€‚</p><p>æ€§èƒ½ä¸Šï¼Œé¦–å…ˆetcd v3ä½¿ç”¨äº†gRPC APIï¼Œä½¿ç”¨protobufå®šä¹‰æ¶ˆæ¯ï¼Œæ¶ˆæ¯ç¼–è§£ç æ€§èƒ½ç›¸æ¯”JSONè¶…è¿‡2å€ä»¥ä¸Šï¼Œå¹¶é€šè¿‡HTTP/2.0å¤šè·¯å¤ç”¨æœºåˆ¶ï¼Œå‡å°‘äº†å¤§é‡watcherç­‰åœºæ™¯ä¸‹çš„è¿æ¥æ•°ã€‚</p><p>å…¶æ¬¡ä½¿ç”¨Leaseä¼˜åŒ–TTLæœºåˆ¶ï¼Œæ¯ä¸ªLeaseå…·æœ‰ä¸€ä¸ªTTLï¼Œç›¸åŒçš„TTLçš„keyå…³è”ä¸€ä¸ªLeaseï¼ŒLeaseè¿‡æœŸçš„æ—¶å€™è‡ªåŠ¨åˆ é™¤ç›¸å…³è”çš„æ‰€æœ‰keyï¼Œä¸å†éœ€è¦ä¸ºæ¯ä¸ªkeyå•ç‹¬ç»­æœŸã€‚</p><p>æœ€åæ˜¯etcd v3æ”¯æŒèŒƒå›´ã€åˆ†é¡µæŸ¥è¯¢ï¼Œå¯é¿å…å¤§åŒ…ç­‰expensive requestã€‚</p><p>2016å¹´6æœˆï¼Œetcd 3.0è¯ç”Ÿï¼ŒéšåKubernetes 1.6å‘å¸ƒï¼Œé»˜è®¤å¯ç”¨etcd v3ï¼ŒåŠ©åŠ›Kubernetesæ”¯æ’‘5000èŠ‚ç‚¹é›†ç¾¤è§„æ¨¡ã€‚</p><p>ä¸‹é¢çš„æ—¶é—´è½´å›¾ï¼Œæˆ‘ç»™ä½ æ€»ç»“äº†etcd3é‡è¦ç‰¹æ€§åŠç‰ˆæœ¬å‘å¸ƒæ—¶é—´ã€‚ä»å›¾ä¸­ä½ å¯ä»¥çœ‹å‡ºï¼Œä»3.0åˆ°æœªæ¥çš„3.5ï¼Œæ›´ç¨³ã€æ›´å¿«æ˜¯etcdçš„è¿½æ±‚ç›®æ ‡ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/5f/6d/5f1bf807db06233ed51d142917798b6d.png?wh=1920*826\" alt=\"\"></p><p>ä»2013å¹´å‘å¸ƒç¬¬ä¸€ä¸ªç‰ˆæœ¬v0.1åˆ°ä»Šå¤©çš„3.5.0-preï¼Œä»v2åˆ°v3ï¼Œetcdèµ°è¿‡äº†7å¹´çš„å†ç¨‹ï¼Œetcdçš„ç¨³å®šæ€§ã€æ‰©å±•æ€§ã€æ€§èƒ½ä¸æ–­æå‡ã€‚</p><p>å‘å±•åˆ°ä»Šå¤©ï¼Œåœ¨GitHubä¸Šstaræ•°è¶…è¿‡34Kã€‚åœ¨Kubernetesçš„ä¸šåŠ¡åœºæ™¯ç£¨ç‚¼ä¸‹å®ƒä¸æ–­æˆé•¿ï¼Œèµ°å‘ç¨³å®šå’Œæˆç†Ÿï¼Œæˆä¸ºæŠ€æœ¯åœˆä¼—æ‰€å‘¨çŸ¥çš„å¼€æºäº§å“ï¼Œè€Œ<strong>v3æ–¹æ¡ˆçš„å‘å¸ƒï¼Œä¹Ÿæ ‡å¿—ç€etcdè¿›å…¥äº†æŠ€æœ¯æˆç†ŸæœŸï¼Œæˆä¸ºäº‘åŸç”Ÿæ—¶ä»£çš„é¦–é€‰å…ƒæ•°æ®å­˜å‚¨äº§å“ã€‚</strong></p><h2>å°ç»“</h2><p>æœ€åæˆ‘ä»¬æ¥å°ç»“ä¸‹ä»Šå¤©çš„å†…å®¹ï¼Œæˆ‘ä»¬ä»å¦‚ä¸‹å‡ ä¸ªæ–¹é¢ä»‹ç»äº†etcdçš„å‰ä¸–ä»Šç”Ÿï¼Œå¹¶åœ¨è¿‡ç¨‹ä¸­è¯¦ç»†è§£è¯»äº†ä¸ºä»€ä¹ˆKubernetesä½¿ç”¨etcdï¼š</p><ul>\n<li>etcdè¯ç”ŸèƒŒæ™¯ï¼Œ etcd v2æºè‡ªCoreOSå›¢é˜Ÿé‡åˆ°çš„æœåŠ¡åè°ƒé—®é¢˜ã€‚</li>\n<li>etcdç›®æ ‡ï¼Œæˆ‘ä»¬é€šè¿‡å®é™…ä¸šåŠ¡åœºæ™¯åˆ†æï¼Œå¾—åˆ°ç†æƒ³ä¸­çš„åè°ƒæœåŠ¡æ ¸å¿ƒç›®æ ‡ï¼šé«˜å¯ç”¨ã€æ•°æ®ä¸€è‡´æ€§ã€Watchã€è‰¯å¥½çš„å¯ç»´æŠ¤æ€§ç­‰ã€‚è€Œåœ¨CoreOSå›¢é˜Ÿçœ‹æ¥ï¼Œé«˜å¯ç”¨ã€å¯ç»´æŠ¤æ€§ã€é€‚é…äº‘ã€ç®€å•çš„APIã€è‰¯å¥½çš„æ€§èƒ½å¯¹ä»–ä»¬è€Œè¨€æ˜¯éå¸¸é‡è¦çš„ï¼ŒZooKeeperæ— æ³•æ»¡è¶³æ‰€æœ‰è¯‰æ±‚ï¼Œå› æ­¤å†³å®šè‡ªå·±æ„å»ºä¸€ä¸ªåˆ†å¸ƒå¼å­˜å‚¨æœåŠ¡ã€‚</li>\n<li>ä»‹ç»äº†v2åŸºäºç›®å½•çš„å±‚çº§æ•°æ®æ¨¡å‹å’ŒAPIï¼Œå¹¶ä»åˆ†å¸ƒå¼ç³»ç»Ÿçš„è§’åº¦ç»™ä½ è¯¦ç»†æ€»ç»“äº†etcd v2æŠ€æœ¯ç‚¹ã€‚etcdçš„é«˜å¯ç”¨ã€Watchæœºåˆ¶ä¸KubernetesæœŸæœ›ä¸­çš„å…ƒæ•°æ®å­˜å‚¨æ˜¯åŒ¹é…çš„ã€‚etcd v2åœ¨Kubernetesçš„å¸¦åŠ¨ä¸‹ï¼Œè·å¾—äº†å¹¿æ³›çš„åº”ç”¨ï¼Œä½†ä¹Ÿå‡ºç°è‹¥å¹²æ€§èƒ½å’Œç¨³å®šæ€§ã€åŠŸèƒ½ä¸è¶³é—®é¢˜ï¼Œæ— æ³•æ»¡è¶³Kubernetesé¡¹ç›®å‘å±•çš„éœ€æ±‚ã€‚</li>\n<li>CoreOSå›¢é˜Ÿæœªé›¨ç»¸ç¼ªï¼Œä»é—®é¢˜èŒèŠ½æ—¶æœŸå°±å¼€å§‹æ„å»ºä¸‹ä¸€ä»£etcd v3å­˜å‚¨æ¨¡å‹ï¼Œåˆ†åˆ«ä»æ€§èƒ½ã€ç¨³å®šæ€§ã€åŠŸèƒ½ä¸Šç­‰æˆåŠŸè§£å†³äº†Kuberneteså‘å±•è¿‡ç¨‹ä¸­é‡åˆ°çš„ç“¶é¢ˆï¼Œä¹Ÿæå«ä½äº†ä½œä¸ºKuberneteså­˜å‚¨ç»„ä»¶çš„åœ°ä½ã€‚</li>\n</ul><p>å¸Œæœ›é€šè¿‡ä»Šå¤©çš„ä»‹ç»ï¼Œ è®©ä½ å¯¹etcdä¸ºä»€ä¹ˆæœ‰v2å’Œv3ä¸¤ä¸ªå¤§ç‰ˆæœ¬ï¼Œetcdå¦‚ä½•ä»HTTP/1.x APIåˆ°gRPC APIã€å•ç‰ˆæœ¬æ•°æ®åº“åˆ°å¤šç‰ˆæœ¬æ•°æ®åº“ã€å†…å­˜æ ‘åˆ°boltdbã€TTLåˆ°Leaseã€å•keyåŸå­æ›´æ–°åˆ°æ”¯æŒå¤škeyäº‹åŠ¡çš„æ¼”è¿›è¿‡ç¨‹æœ‰ä¸ªæ¸…æ™°äº†è§£ã€‚å¸Œæœ›ä½ èƒ½æœ‰æ‰€æ”¶è·ï¼Œåœ¨åç»­çš„è¯¾ç¨‹ä¸­æˆ‘ä¼šå’Œä½ æ·±å…¥è®¨è®ºå„ä¸ªæ¨¡å—çš„ç»†èŠ‚ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>æœ€åï¼Œæˆ‘ç»™ä½ ç•™äº†ä¸€ä¸ªæ€è€ƒé¢˜ã€‚åˆ†äº«ä¸€ä¸‹åœ¨ä½ çš„é¡¹ç›®ä¸­ï¼Œä½ ä¸»è¦ä½¿ç”¨çš„æ˜¯å“ªä¸ªetcdç‰ˆæœ¬æ¥è§£å†³ä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿä½¿ç”¨çš„etcd v2 APIè¿˜æ˜¯v3 APIå‘¢ï¼Ÿåœ¨è¿™è¿‡ç¨‹ä¸­æ˜¯å¦é‡åˆ°è¿‡ä»€ä¹ˆé—®é¢˜ï¼Ÿ</p><p>æ„Ÿè°¢ä½ çš„é˜…è¯»ï¼Œæ¬¢è¿ä½ æŠŠæ€è€ƒå’Œè§‚ç‚¹å†™åœ¨ç•™è¨€åŒºï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ä¸€èµ·é˜…è¯»ã€‚</p>","comments":[{"had_liked":false,"id":274783,"user_name":"jeffery","can_delete":false,"product_type":"c1","uid":1219972,"ip_address":"","ucode":"35E2DAA386FB86","user_header":"https://static001.geekbang.org/account/avatar/00/12/9d/84/171b2221.jpg","comment_is_top":false,"comment_ctime":1611155367,"is_pvip":false,"replies":[{"id":"99725","content":"Redisæ˜¯å§ï¼ŒåŒºåˆ«æŒºå¤§çš„ï¼Œæ–‡ç« ä¸­æˆ‘ç”¨äº†ä¸€å‰¯æ€ç»´å¯¼å›¾ä»æ•°æ®å¤åˆ¶ã€æ•°æ®åˆ†ç‰‡ã€å­˜å‚¨å¼•æ“ã€APIç­‰æ–¹é¢æ€»ç»“etcd v2æŠ€æœ¯ç‚¹ï¼Œæˆ‘ç®€å•ä»è¿™äº›æ–¹é¢ç»™ä½ å¯¹æ¯”ä¸€ä¸‹ï¼Œæ•°æ®å¤åˆ¶ä¸ŠRedisæ˜¯ä¸»å¤‡å¼‚æ­¥å¤åˆ¶ã€etcdä½¿ç”¨çš„æ˜¯Raftï¼Œå‰è€…å¯èƒ½ä¼šä¸¢æ•°æ®ï¼Œä¸ºäº†ä¿è¯è¯»å†™ä¸€è‡´æ€§ï¼Œetcdè¯»å†™æ€§èƒ½ç›¸æ¯”Rediså·®è·æ¯”è¾ƒå¤§ã€‚æ•°æ®åˆ†ç‰‡ä¸ŠRedisæœ‰å„ç§é›†ç¾¤ç‰ˆè§£å†³æ–¹æ¡ˆï¼Œå¯ä»¥æ‰¿è½½ä¸ŠTæ•°æ®ï¼Œå­˜å‚¨çš„ä¸€èˆ¬æ˜¯ç”¨æˆ·æ•°æ®ï¼Œè€Œetcdå®šä½æ˜¯ä¸ªä½å®¹é‡çš„å…³é”®å…ƒæ•°æ®å­˜å‚¨ï¼Œdbå¤§å°ä¸€èˆ¬ä¸è¶…è¿‡8gã€‚å­˜å‚¨å¼•æ“å’ŒAPIä¸ŠRediså†…å­˜å®ç°äº†å„ç§ä¸°å¯Œæ•°æ®ç»“æ„ï¼Œè€Œetcdä»…æ˜¯kv API, ä½¿ç”¨çš„æ˜¯æŒä¹…åŒ–å­˜å‚¨boltdbã€‚","user_name":"ä½œè€…å›å¤","comment_id":274783,"uid":"1009582","ip_address":"","utype":1,"ctime":1611199203,"user_name_real":"å”èª"}],"discussion_count":4,"race_medal":0,"score":"207769585575","product_id":100069901,"comment_content":"1.6ç‰ˆæœ¬é»˜è®¤è‡ªå¸¦v3ç‰ˆæœ¬ï¼Œetcd äº‘åŸç”Ÿçš„æ•°æ®é¦–é€‰å­˜å‚¨äº§å“ï¼Œè€å¸ˆèƒ½è¯´ä¸‹etcd å’Œreids çš„åŒºåˆ«å—ï¼Ÿè°¢è°¢","like_count":48,"discussions":[{"author":{"id":1009582,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/ae/37b492db.jpg","nickname":"å”èª","note":"","ucode":"99CB061EDF35EA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":514124,"discussion_content":"Redisæ˜¯å§ï¼ŒåŒºåˆ«æŒºå¤§çš„ï¼Œæ–‡ç« ä¸­æˆ‘ç”¨äº†ä¸€å‰¯æ€ç»´å¯¼å›¾ä»æ•°æ®å¤åˆ¶ã€æ•°æ®åˆ†ç‰‡ã€å­˜å‚¨å¼•æ“ã€APIç­‰æ–¹é¢æ€»ç»“etcd v2æŠ€æœ¯ç‚¹ï¼Œæˆ‘ç®€å•ä»è¿™äº›æ–¹é¢ç»™ä½ å¯¹æ¯”ä¸€ä¸‹ï¼Œæ•°æ®å¤åˆ¶ä¸ŠRedisæ˜¯ä¸»å¤‡å¼‚æ­¥å¤åˆ¶ã€etcdä½¿ç”¨çš„æ˜¯Raftï¼Œå‰è€…å¯èƒ½ä¼šä¸¢æ•°æ®ï¼Œä¸ºäº†ä¿è¯è¯»å†™ä¸€è‡´æ€§ï¼Œetcdè¯»å†™æ€§èƒ½ç›¸æ¯”Rediså·®è·æ¯”è¾ƒå¤§ã€‚æ•°æ®åˆ†ç‰‡ä¸ŠRedisæœ‰å„ç§é›†ç¾¤ç‰ˆè§£å†³æ–¹æ¡ˆï¼Œå¯ä»¥æ‰¿è½½ä¸ŠTæ•°æ®ï¼Œå­˜å‚¨çš„ä¸€èˆ¬æ˜¯ç”¨æˆ·æ•°æ®ï¼Œè€Œetcdå®šä½æ˜¯ä¸ªä½å®¹é‡çš„å…³é”®å…ƒæ•°æ®å­˜å‚¨ï¼Œdbå¤§å°ä¸€èˆ¬ä¸è¶…è¿‡8gã€‚å­˜å‚¨å¼•æ“å’ŒAPIä¸ŠRediså†…å­˜å®ç°äº†å„ç§ä¸°å¯Œæ•°æ®ç»“æ„ï¼Œè€Œetcdä»…æ˜¯kv API, ä½¿ç”¨çš„æ˜¯æŒä¹…åŒ–å­˜å‚¨boltdbã€‚","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1611199203,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1350159,"avatar":"https://static001.geekbang.org/account/avatar/00/14/9a/0f/da7ed75a.jpg","nickname":"èŠ’æœå°‘ä¾ ","note":"","ucode":"98D0BBB52BB80F","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":352229,"discussion_content":"æ•°æ®å¤åˆ¶ä¸ŠRedisæ˜¯ä¸»å¤‡å¼‚æ­¥å¤åˆ¶ã€etcdä½¿ç”¨çš„æ˜¯Raftï¼Œå‰è€…å¯èƒ½ä¼šä¸¢æ•°æ®ï¼Œä¸ºäº†ä¿è¯è¯»å†™ä¸€è‡´æ€§ï¼Œetcdè¯»å†™æ€§èƒ½ç›¸æ¯”Rediså·®è·æ¯”è¾ƒå¤§ã€‚æ•°æ®åˆ†ç‰‡ä¸ŠRedisæœ‰å„ç§é›†ç¾¤ç‰ˆè§£å†³æ–¹æ¡ˆï¼Œå¯ä»¥æ‰¿è½½ä¸ŠTæ•°æ®ï¼Œå­˜å‚¨çš„ä¸€èˆ¬æ˜¯ç”¨æˆ·æ•°æ®ï¼Œè€Œetcdå®šä½æ˜¯ä¸ªä½å®¹é‡çš„å…³é”®å…ƒæ•°æ®å­˜å‚¨ï¼Œdbå¤§å°ä¸€èˆ¬ä¸è¶…è¿‡8g\n\n-- è¿™æ®µè¯ï¼Œè·ç›ŠåŒªæµ…","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1614657677,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1009582,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/ae/37b492db.jpg","nickname":"å”èª","note":"","ucode":"99CB061EDF35EA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1350159,"avatar":"https://static001.geekbang.org/account/avatar/00/14/9a/0f/da7ed75a.jpg","nickname":"èŠ’æœå°‘ä¾ ","note":"","ucode":"98D0BBB52BB80F","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":352981,"discussion_content":"ä»»ä½•åˆ†å¸ƒå¼ç³»ç»Ÿä¹‹é—´æ¯”è¾ƒã€é€‰å‹ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥ä»åˆ†å¸ƒå¼ç³»ç»Ÿçš„æ ¸å¿ƒè¦ç´ ï¼ŒAPIã€æ•°æ®å¤åˆ¶åŠå…±è¯†ç®—æ³•ã€æ•°æ®åˆ†ç‰‡ç®—æ³•ã€æ•°æ®æ¨¡å‹åŠå­˜å‚¨å¼•æ“ã€äº‹åŠ¡å®ç°ã€CAPç­‰ç»´åº¦æ¥è¿›è¡Œæ¯”è¾ƒã€‚è¿™æ˜¯ä¸ªé€šç”¨çš„æ–¹æ³•è®ºï¼Œå¸Œæœ›ä»¥åèƒ½å¸®åŠ©ä½ è§£å†³æ›´å¤šé—®é¢˜ã€‚\n","likes_number":12,"is_delete":false,"is_hidden":false,"ctime":1614935478,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":352229,"ip_address":""},"score":352981,"extra":""}]},{"author":{"id":1879262,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/ac/de/68f35320.jpg","nickname":"å°æ¥å­","note":"","ucode":"4EDAF31E43B211","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":350506,"discussion_content":"æœŸå¾…è€å¸ˆçš„ etcd/redis åšåˆ†å¸ƒå¼é”çš„æ–‡ç« ~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1613897486,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":277366,"user_name":"[å°ç‹—]","can_delete":false,"product_type":"c1","uid":1237070,"ip_address":"","ucode":"090AEAC8A86134","user_header":"https://static001.geekbang.org/account/avatar/00/12/e0/4e/c266bdb4.jpg","comment_is_top":false,"comment_ctime":1612376284,"is_pvip":false,"replies":[{"id":"101008","content":"æ„Ÿè°¢å¯¹ä¸“æ çš„æ”¯æŒï¼Œæ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œä¸“æ 27è®²ï¼Œæ¯è®²å†…å®¹ç‰¹åˆ«ä¸°å¯Œï¼Œå¤§éƒ¨åˆ†5000åˆ°6000å­—ï¼Œæ•´ä¸ªä¸“æ è‡³å°‘15ä¸‡å­—ï¼Œå†™ä½œä¸æ˜“ï¼Œæˆ‘ä¹Ÿæ˜¯åœ¨å·¥ä½œæ—¥çš„å‡Œæ™¨ã€å‘¨æœ«ä¸šä½™æ—¶é—´ä¸ºå¤§å®¶å‘ˆç°ä¸€ä¸ªetcdå…¨æ–¹ä½ç‰¹æ€§è§£è¯»ï¼Œæ›´æ–°æ˜¯å›ºå®šçš„1å‘¨3ç¯‡ï¼Œæ˜¥èŠ‚éƒ½åœ¨åŠ ç­åŠ ç‚¹åˆ›ä½œäº†ï¼Œéº»çƒ¦ç¨ç­‰å“ˆï¼ŒåŸºç¡€ç¯‡æ˜¥èŠ‚æœŸé—´ä¼šæ›´æ–°å®Œæ¯•ï¼Œä½ æŠŠåŸºç¡€ç¯‡çš„å†…å®¹è¸è¸å®å®å­¦å®Œï¼ŒåŠ¨æ‰‹åšå‡ ä¸ªå°å®éªŒï¼Œæˆ‘ç›¸ä¿¡é¢è¯•å“ªä¸ªå¤§å‚ï¼Œéƒ½æ— å‹åŠ›äº†å“ˆã€‚","user_name":"ä½œè€…å›å¤","comment_id":277366,"uid":"1009582","ip_address":"","utype":1,"ctime":1612827792,"user_name_real":"å”èª"}],"discussion_count":3,"race_medal":0,"score":"91806689500","product_id":100069901,"comment_content":"å¤§ä½¬ï¼Œå¯ä»¥1å‘¨4æœŸå—ï¼Ÿ ç­‰ç€é¢è¯•ç”¨å‘¢","like_count":22,"discussions":[{"author":{"id":1009582,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/ae/37b492db.jpg","nickname":"å”èª","note":"","ucode":"99CB061EDF35EA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":515023,"discussion_content":"æ„Ÿè°¢å¯¹ä¸“æ çš„æ”¯æŒï¼Œæ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œä¸“æ 27è®²ï¼Œæ¯è®²å†…å®¹ç‰¹åˆ«ä¸°å¯Œï¼Œå¤§éƒ¨åˆ†5000åˆ°6000å­—ï¼Œæ•´ä¸ªä¸“æ è‡³å°‘15ä¸‡å­—ï¼Œå†™ä½œä¸æ˜“ï¼Œæˆ‘ä¹Ÿæ˜¯åœ¨å·¥ä½œæ—¥çš„å‡Œæ™¨ã€å‘¨æœ«ä¸šä½™æ—¶é—´ä¸ºå¤§å®¶å‘ˆç°ä¸€ä¸ªetcdå…¨æ–¹ä½ç‰¹æ€§è§£è¯»ï¼Œæ›´æ–°æ˜¯å›ºå®šçš„1å‘¨3ç¯‡ï¼Œæ˜¥èŠ‚éƒ½åœ¨åŠ ç­åŠ ç‚¹åˆ›ä½œäº†ï¼Œéº»çƒ¦ç¨ç­‰å“ˆï¼ŒåŸºç¡€ç¯‡æ˜¥èŠ‚æœŸé—´ä¼šæ›´æ–°å®Œæ¯•ï¼Œä½ æŠŠåŸºç¡€ç¯‡çš„å†…å®¹è¸è¸å®å®å­¦å®Œï¼ŒåŠ¨æ‰‹åšå‡ ä¸ªå°å®éªŒï¼Œæˆ‘ç›¸ä¿¡é¢è¯•å“ªä¸ªå¤§å‚ï¼Œéƒ½æ— å‹åŠ›äº†å“ˆã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612827792,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1057843,"avatar":"https://static001.geekbang.org/account/avatar/00/10/24/33/bcf37f50.jpg","nickname":"é˜¿ç”˜","note":"","ucode":"BC93175B70E05D","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":378122,"discussion_content":"å“ˆå“ˆå“ˆï¼Œç¬‘æ­»~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623060097,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1237070,"avatar":"https://static001.geekbang.org/account/avatar/00/12/e0/4e/c266bdb4.jpg","nickname":"[å°ç‹—]","note":"","ucode":"090AEAC8A86134","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":348975,"discussion_content":"è¾›è‹¦ï¼Œè¾›è‹¦ã€‚ ç¥æ‚¨æ–°å¹´å¿«ä¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612832493,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":275164,"user_name":"hxy","can_delete":false,"product_type":"c1","uid":1248553,"ip_address":"","ucode":"431327E8CA4364","user_header":"https://static001.geekbang.org/account/avatar/00/13/0d/29/18272af9.jpg","comment_is_top":false,"comment_ctime":1611367881,"is_pvip":true,"replies":[{"id":"99876","content":"æ„Ÿè°¢ä½ çš„ç»†å¿ƒå’Œåé¦ˆï¼Œæˆ‘æŸ¥é˜…etcdå®˜æ–¹èµ„æ–™å†™å¾—ä¹Ÿæ˜¯çš„ç¡®æœ‰è¯¯ï¼Œä¹‹å‰ä»¥ä¸ºæ˜¯å¾ˆä¹…ä¹‹å‰zkä½¿ç”¨çš„rpc apiï¼Œçœ‹äº†ä¸‹commitè®°å½•è²Œä¼¼ä¸€ç›´éƒ½æ˜¯juiteï¼Œåé¢æˆ‘ä»¬ä¿®æ­£ä¸‹ï¼Œè°¢è°¢","user_name":"ä½œè€…å›å¤","comment_id":275164,"uid":"1009582","ip_address":"","utype":1,"ctime":1611403580,"user_name_real":"å”èª"}],"discussion_count":1,"race_medal":0,"score":"78920779209","product_id":100069901,"comment_content":"zookeeperçš„rpc apiæ˜¯thriftï¼Œè¿™ä¸ªæ„Ÿè§‰è¯´é”™äº†å§ï¼Œzkç”¨çš„åº”è¯¥æ˜¯jute","like_count":18,"discussions":[{"author":{"id":1009582,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/ae/37b492db.jpg","nickname":"å”èª","note":"","ucode":"99CB061EDF35EA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":514237,"discussion_content":"æ„Ÿè°¢ä½ çš„ç»†å¿ƒå’Œåé¦ˆï¼Œæˆ‘æŸ¥é˜…etcdå®˜æ–¹èµ„æ–™å†™å¾—ä¹Ÿæ˜¯çš„ç¡®æœ‰è¯¯ï¼Œä¹‹å‰ä»¥ä¸ºæ˜¯å¾ˆä¹…ä¹‹å‰zkä½¿ç”¨çš„rpc apiï¼Œçœ‹äº†ä¸‹commitè®°å½•è²Œä¼¼ä¸€ç›´éƒ½æ˜¯juiteï¼Œåé¢æˆ‘ä»¬ä¿®æ­£ä¸‹ï¼Œè°¢è°¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611403580,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":274829,"user_name":"Young","can_delete":false,"product_type":"c1","uid":1130374,"ip_address":"","ucode":"D38F17998E2D3C","user_header":"https://static001.geekbang.org/account/avatar/00/11/3f/86/1b02c298.jpg","comment_is_top":false,"comment_ctime":1611192292,"is_pvip":false,"replies":[{"id":"99726","content":"ä¹Ÿæœ‰å¯èƒ½åœ¨éƒ¨åˆ†åœºæ™¯å‡ºç°ä¸ä¸€è‡´å“ˆï¼Œåé¢å®è·µç¯‡ä¼šå’Œå¤§å®¶åˆ†æã€‚å¼‚åœ°å®¹ç¾å»ºè®®ä½¿ç”¨raft learnerç‰¹æ€§ï¼Œæ·»åŠ learnerèŠ‚ç‚¹ï¼Œmake mirroræ˜¯åŸºäºwatchæœºåˆ¶çš„ï¼Œç¨³å®šæ€§ã€å¯é æ€§ç­‰ç›¸æ¯”learnerè¦å·®ç‚¹ï¼Œä½†æ˜¯ç›®å‰ç¤¾åŒºå¯¹learneré™åˆ¶å¤ªå¤šï¼Œä¸æ”¯æŒå¿«ç…§ç­‰ï¼Œæˆ‘ä»¬è‡ªå·±åšäº†å®šåˆ¶åŒ–ï¼Œå¤§å®¶ä½¿ç”¨ä¸Šè¦ç­‰ç­‰ï¼Œä¼°è®¡3.5ç‰ˆæœ¬æ‰æ¯”è¾ƒå¥½ç”¨","user_name":"ä½œè€…å›å¤","comment_id":274829,"uid":"1009582","ip_address":"","utype":1,"ctime":1611206679,"user_name_real":"å”èª"}],"discussion_count":3,"race_medal":0,"score":"40265897956","product_id":100069901,"comment_content":"ç›®å‰åœ¨ä½¿ç”¨etcd v3, é«˜å¯ç”¨ï¼Œå¼ºä¸€è‡´æ€§é”®å€¼å­˜å‚¨ã€‚å…³äºetcdé›†ç¾¤å¼‚åœ°å®¹ç¾åŒæ­¥ç›®å‰ç”¨çš„make mirrorï¼Œæœ‰æ›´å¥½çš„æ–¹æ¡ˆå—ï¼Ÿ å“ˆå“ˆğŸ˜ƒ","like_count":9,"discussions":[{"author":{"id":1009582,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/ae/37b492db.jpg","nickname":"å”èª","note":"","ucode":"99CB061EDF35EA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":514137,"discussion_content":"ä¹Ÿæœ‰å¯èƒ½åœ¨éƒ¨åˆ†åœºæ™¯å‡ºç°ä¸ä¸€è‡´å“ˆï¼Œåé¢å®è·µç¯‡ä¼šå’Œå¤§å®¶åˆ†æã€‚å¼‚åœ°å®¹ç¾å»ºè®®ä½¿ç”¨raft learnerç‰¹æ€§ï¼Œæ·»åŠ learnerèŠ‚ç‚¹ï¼Œmake mirroræ˜¯åŸºäºwatchæœºåˆ¶çš„ï¼Œç¨³å®šæ€§ã€å¯é æ€§ç­‰ç›¸æ¯”learnerè¦å·®ç‚¹ï¼Œä½†æ˜¯ç›®å‰ç¤¾åŒºå¯¹learneré™åˆ¶å¤ªå¤šï¼Œä¸æ”¯æŒå¿«ç…§ç­‰ï¼Œæˆ‘ä»¬è‡ªå·±åšäº†å®šåˆ¶åŒ–ï¼Œå¤§å®¶ä½¿ç”¨ä¸Šè¦ç­‰ç­‰ï¼Œä¼°è®¡3.5ç‰ˆæœ¬æ‰æ¯”è¾ƒå¥½ç”¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611206679,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1108924,"avatar":"https://static001.geekbang.org/account/avatar/00/10/eb/bc/6ccac4bb.jpg","nickname":"æ­¦æ–‡æ–‡æ­¦","note":"","ucode":"5288366646A15B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":393423,"discussion_content":"è€å¸ˆæ‚¨å¥½ï¼Œlearnerçš„åŠŸèƒ½ç›®å‰æ¥çœ‹åªèƒ½ä½œä¸ºæ•°æ®åŒæ­¥èŠ‚ç‚¹ï¼Œå¯¹å¤–æä¾›è¯»æœåŠ¡ï¼Œæ— æ³•å¯¹é›†ç¾¤çš„å¯ç”¨æ€§èµ·åˆ°æ˜æ˜¾ä½œç”¨ï¼Œæ¯”å¦‚:  ä¸Šæµ·å’ŒåŒ—äº¬ä¸¤åœ°ï¼Œå¸Œæœ›å½“å¤šæ•°æ´¾çš„ä¸Šæµ·æ•´ä½“ä¸å¯ç”¨äº†ï¼ŒåŒ—äº¬èƒ½é€šè¿‡learnerè‡ªåŠ¨æ™‹å‡ä¸ºfollowerï¼Œä»è€Œè¾¾åˆ°å¼‚åœ°å¤šæ´»çš„æ•ˆæœï¼Œå¦‚ä½•èƒ½å®ç°æ­¤æ•ˆæœå‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631426176,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1130374,"avatar":"https://static001.geekbang.org/account/avatar/00/11/3f/86/1b02c298.jpg","nickname":"Young","note":"","ucode":"D38F17998E2D3C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":343890,"discussion_content":"å¥½å˜ï¼ŒæœŸå¾…åé¢ç²¾å½©å†…å®¹ã€‚å˜¿å˜¿","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611207795,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":275773,"user_name":"mckee","can_delete":false,"product_type":"c1","uid":1066511,"ip_address":"","ucode":"E4DEBB462B93A1","user_header":"https://static001.geekbang.org/account/avatar/00/10/46/0f/f6cfc659.jpg","comment_is_top":false,"comment_ctime":1611664099,"is_pvip":false,"replies":[{"id":"100190","content":"å—¯ï¼Œlist podå¤ªææ€–äº†ï¼Œå“ˆå“ˆï¼Œçº¿ä¸Šå¤§éƒ¨åˆ†å¼‚å¸¸ä¸€èˆ¬éƒ½æ˜¯list podï¼Œconfigmapï¼Œcrd","user_name":"ä½œè€…å›å¤","comment_id":275773,"uid":"1009582","ip_address":"","utype":1,"ctime":1611736876,"user_name_real":"å”èª"}],"discussion_count":2,"race_medal":0,"score":"27381467875","product_id":100069901,"comment_content":"k8s list podä¸å¸¦revæƒ…å†µä¸‹ï¼Œetcdserver key rangeä¼šé€ æˆcpuå’Œmemç¬é—´é£™é«˜ï¼Œéœ€è¦è¯»å–æ‰€æœ‰kvå¹¶æ’åº","like_count":6,"discussions":[{"author":{"id":1009582,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/ae/37b492db.jpg","nickname":"å”èª","note":"","ucode":"99CB061EDF35EA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":514470,"discussion_content":"å—¯ï¼Œlist podå¤ªææ€–äº†ï¼Œå“ˆå“ˆï¼Œçº¿ä¸Šå¤§éƒ¨åˆ†å¼‚å¸¸ä¸€èˆ¬éƒ½æ˜¯list podï¼Œconfigmapï¼Œcrd","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611736876,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1167430,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d0/46/7f9af8de.jpg","nickname":"å¯»","note":"","ucode":"473B2CC14158A7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":414968,"discussion_content":"kubectl get pod å°±æ˜¯list podå—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636948250,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":274876,"user_name":"Coder","can_delete":false,"product_type":"c1","uid":2243398,"ip_address":"","ucode":"170190542A5A9C","user_header":"https://static001.geekbang.org/account/avatar/00/22/3b/46/3701e908.jpg","comment_is_top":false,"comment_ctime":1611201945,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"27381005721","product_id":100069901,"comment_content":"ç²¾å½©ï¼Œè¯»èµ·æ¥ç”ŸåŠ¨æœ‰è¶£ï¼Œä¸€æ–‡å°±è®©æˆ‘äº†è§£äº†etcdçš„å‘å±•å†å²ä¸k8så…³ç³»ï¼Œä¸ºè€å¸ˆæ‰“callï¼","like_count":6},{"had_liked":false,"id":274765,"user_name":"SecKiki","can_delete":false,"product_type":"c1","uid":1146647,"ip_address":"","ucode":"21FE9CF4819BD4","user_header":"https://static001.geekbang.org/account/avatar/00/11/7f/17/6da0b387.jpg","comment_is_top":false,"comment_ctime":1611151304,"is_pvip":false,"replies":[{"id":"99695","content":"å—¯ï¼Œetcdä¸k8sç›¸äº’å½±å“ã€ä¿ƒè¿›ï¼Œetcdç¤¾åŒºä»»ä½•æ ¸å¿ƒç‰¹æ€§é¦–å…ˆä¹Ÿæ˜¯è€ƒè™‘æ˜¯å¦æœ‰ç›Šäºk8såœºæ™¯ç­‰ï¼Œæ–°ç‰ˆæœ¬å‘å¸ƒï¼Œä¹Ÿæ˜¯æ‹¿k8såšæ€§èƒ½ç¨³å®šæ€§æµ‹è¯•","user_name":"ä½œè€…å›å¤","comment_id":274765,"uid":"1009582","ip_address":"","utype":1,"ctime":1611156480,"user_name_real":"tangcong"}],"discussion_count":1,"race_medal":0,"score":"18791020488","product_id":100069901,"comment_content":"å­¦ä¹ äº†ï¼Œetcdä¸k8s ç»é…","like_count":4,"discussions":[{"author":{"id":1009582,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/ae/37b492db.jpg","nickname":"å”èª","note":"","ucode":"99CB061EDF35EA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":514118,"discussion_content":"å—¯ï¼Œetcdä¸k8sç›¸äº’å½±å“ã€ä¿ƒè¿›ï¼Œetcdç¤¾åŒºä»»ä½•æ ¸å¿ƒç‰¹æ€§é¦–å…ˆä¹Ÿæ˜¯è€ƒè™‘æ˜¯å¦æœ‰ç›Šäºk8såœºæ™¯ç­‰ï¼Œæ–°ç‰ˆæœ¬å‘å¸ƒï¼Œä¹Ÿæ˜¯æ‹¿k8såšæ€§èƒ½ç¨³å®šæ€§æµ‹è¯•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611156480,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":274832,"user_name":"chapin","can_delete":false,"product_type":"c1","uid":1070020,"ip_address":"","ucode":"BB1800A771A8E9","user_header":"https://static001.geekbang.org/account/avatar/00/10/53/c4/dea5d7f3.jpg","comment_is_top":false,"comment_ctime":1611193328,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10201127920","product_id":100069901,"comment_content":"å¤´æ’çœ‹æˆã€‚","like_count":2},{"had_liked":false,"id":274723,"user_name":"çˆªå“‡å¤œæœªçœ ","can_delete":false,"product_type":"c1","uid":1006025,"ip_address":"","ucode":"BBEB80EB670770","user_header":"https://static001.geekbang.org/account/avatar/00/0f/59/c9/f44cb7f3.jpg","comment_is_top":false,"comment_ctime":1611136428,"is_pvip":false,"replies":[{"id":"99693","content":"æ„Ÿè°¢ä½ çš„ç•™è¨€ä¸æ”¯æŒ","user_name":"ä½œè€…å›å¤","comment_id":274723,"uid":"1009582","ip_address":"","utype":1,"ctime":1611156048,"user_name_real":"tangcong"}],"discussion_count":1,"race_medal":0,"score":"10201071020","product_id":100069901,"comment_content":"æŒºå¥½çš„æ–‡ç« ","like_count":2,"discussions":[{"author":{"id":1009582,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/ae/37b492db.jpg","nickname":"å”èª","note":"","ucode":"99CB061EDF35EA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":514101,"discussion_content":"æ„Ÿè°¢ä½ çš„ç•™è¨€ä¸æ”¯æŒ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611156048,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":319863,"user_name":"ç“œç‰›","can_delete":false,"product_type":"c1","uid":2273620,"ip_address":"","ucode":"5EB7D2F4400A70","user_header":"https://static001.geekbang.org/account/avatar/00/22/b1/54/6d663b95.jpg","comment_is_top":false,"comment_ctime":1635992251,"is_pvip":false,"discussion_count":4,"race_medal":0,"score":"5930959547","product_id":100069901,"comment_content":"å¤šè·¯å¤ç”¨ä¸ºå•¥èƒ½å‡å°‘è¿æ¥æ•°ï¼Ÿå¤šè·¯å¤ç”¨åªæ˜¯æé«˜äº†socketç›‘å¬æ•ˆç‡ï¼Œæ”¯æŒæ›´å¤§çš„è¿æ¥æ•°ï¼Œä½•æ¥çš„å‡å°‘è¿æ¥æ•°ï¼Œè¿æ¥æ•°å–å†³äºclientæ•°å•Šã€‚ä¸èƒ½ç†è§£ï¼Œè¯·è€å¸ˆå›å¤ã€‚","like_count":1,"discussions":[{"author":{"id":1521568,"avatar":"https://static001.geekbang.org/account/avatar/00/17/37/a0/032d0828.jpg","nickname":"ä¸Šæ‰å¤é¦™","note":"","ucode":"9FDDE0979BCC8C","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581656,"discussion_content":"ç¬¬ä¸€ä¸ªçŸ¥è¯†ç‚¹ï¼šHTTPåè®®è¿è¡Œåœ¨TCPåè®®ä¹‹ä¸Šï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œéœ€è¦é¦–å…ˆå»ºç«‹TCPé“¾æ¥ï¼Œç„¶åå‘é€HTTPè¯·æ±‚å’Œå“åº”ã€‚\n\nç¬¬äºŒä¸ªçŸ¥è¯†ç‚¹ï¼šHTTP/1.1å­˜åœ¨é˜Ÿå¤´é˜»å¡é—®é¢˜ï¼Œå³åœ¨åŒä¸€ä¸ªTCPè¿æ¥ä¸Šï¼Œåªèƒ½req1å¯¹åº”çš„resp1è¿”å›ï¼Œæ‰èƒ½å‘é€req2ï¼Œä»¥æ­¤ç±»æ¨req3ã€req4...ï¼Œä¹Ÿå°±æ˜¯ä¸å…·å¤‡å¤šè·¯å¤ç”¨èƒ½åŠ›ã€‚æ‰€ä»¥ä¸ºäº†åŠ å¿«å¹¶å‘ï¼Œå¯ä»¥å¼€å¯å¤šæ¡tcpè¿æ¥ï¼Œæ¯”å¦‚æµè§ˆå™¨æ‰“å¡ä¸€ä¸ªç½‘é¡µï¼Œå› ä¸ºç½‘é¡µçš„å†…å®¹å¾ˆå¤šï¼Œæµè§ˆå™¨å…¶å®å¼€å¯äº†å¤šä¸ªtcpè¿æ¥å˜›ã€‚\n\nç»¼ä¸Šï¼Œå¦‚æœæœ‰å¤šè·¯å¤ç”¨å°±å¯ä»¥å‡å°‘è¿æ¥æ•°å’¯ã€‚HTTP/2å°±æ˜¯è¿™ä¹ˆå¹²çš„å“ˆã€‚\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658910078,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1250775,"avatar":"https://static001.geekbang.org/account/avatar/00/13/15/d7/96e77edd.jpg","nickname":"é—®å¿ƒ","note":"","ucode":"6808568D61CE36","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":559509,"discussion_content":"å¤šä¸ªè¯·æ±‚ç”¨åŒä¸€ä¸ªè¿æ¥å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1648801833,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2254917,"avatar":"https://static001.geekbang.org/account/avatar/00/22/68/45/ddf89612.jpg","nickname":"bestgopher","note":"","ucode":"D89735C8CA9C6E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":555079,"discussion_content":"å¤šä¸ªclientç”¨ä¸€ä¸ªè¿æ¥ï¼Œhttp1æœ‰é˜Ÿå¤´é˜»å¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646736232,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1740267,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epb7ibhPYSCNoTqLnmThBia76ic78ZicLNwxE8iaForsLQNUJSTLla5RibNtiaTVIaalBeoDyMUjkBicF7dWg/132","nickname":"Geek_8898d4","note":"","ucode":"1A63D043725B7B","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":550980,"discussion_content":"åŒæ„Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644834210,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":279669,"user_name":"å°æ¥å­","can_delete":false,"product_type":"c1","uid":1879262,"ip_address":"","ucode":"4EDAF31E43B211","user_header":"https://static001.geekbang.org/account/avatar/00/1c/ac/de/68f35320.jpg","comment_is_top":false,"comment_ctime":1613897719,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5908865015","product_id":100069901,"comment_content":"å…¶æ¬¡ä½¿ç”¨ Lease ä¼˜åŒ– TTL æœºåˆ¶ï¼Œæ¯ä¸ª Lease å…·æœ‰ä¸€ä¸ª TTLï¼Œç›¸åŒçš„ TTL çš„ key å…³è”ä¸€ä¸ª Leaseï¼ŒLease è¿‡æœŸçš„æ—¶å€™è‡ªåŠ¨åˆ é™¤ç›¸å…³è”çš„æ‰€æœ‰ keyï¼Œä¸å†éœ€è¦ä¸ºæ¯ä¸ª key å•ç‹¬ç»­æœŸã€‚<br>è€å¸ˆ,è¯·é—®ä¸‹, Leaseè¿‡æœŸå, é€šè¿‡ä»€ä¹ˆæ‰‹æ®µåˆ é™¤å…³è”çš„æ‰€æœ‰Keyå‘¢?","like_count":1,"discussions":[{"author":{"id":1136164,"avatar":"https://static001.geekbang.org/account/avatar/00/11/56/24/36d4c9a5.jpg","nickname":"å·§è¨€ä¹±å¾·","note":"","ucode":"1A73CE295BF04B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":388683,"discussion_content":"æˆ‘æ˜¯è¿™ä¹ˆç†è§£çš„ï¼Œä¸€ä¸ªç®€å•çš„æ¨¡å‹å°±å¯ä»¥å®ç°ã€‚æ¯”æ–¹è¯´ï¼Œä¸€ä¸ª Lease ä¸­æœ‰ä¸€ä¸ª keyListå±æ€§ï¼Œå½“TTLæ—¶é—´åˆ°äº†ï¼Œå°±å¯¹ KeyList å‘èµ·é€šçŸ¥ï¼Œæˆ–è€… Lease ç›´æ¥è°ƒç”¨ delKey ä¹‹ç±»çš„ API","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628909955,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":279467,"user_name":"æ°åŒå­¦å°‘å¹´ã€‚","can_delete":false,"product_type":"c1","uid":1928162,"ip_address":"","ucode":"4D4BC29421A245","user_header":"https://static001.geekbang.org/account/avatar/00/1d/6b/e2/f02e45df.jpg","comment_is_top":false,"comment_ctime":1613793604,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5908760900","product_id":100069901,"comment_content":"1. etcd 3.4 + v3API<br>2. ä¸»è¦é‡åˆ°ä»¥ä¸‹é—®é¢˜ï¼š<br>    - åœ¨ä½¿ç”¨k8séƒ¨ç½²é›†ç¾¤æ—¶ï¼Œå¦‚ä½•åº”å¯¹å¤šæ•°æ´¾ã€å°‘æ•°æ´¾ã€æ•°æ®å¤‡ä»½ä¸æ¢å¤ã€æ•°æ®æ¬è¿çš„è¿ç»´é—®é¢˜ã€‚<br>    - å¦‚ä½•æµ‹è¯•watchå¯é æ€§<br>    - db sizeä¸º8GBï¼Œé¡¹ç›®éœ€è¦æ›´å¤§è¿è¡Œä¼šå­˜åœ¨å“ªäº›é£é™©ï¼Ÿ","like_count":1},{"had_liked":false,"id":275841,"user_name":"bearlu","can_delete":false,"product_type":"c1","uid":1030862,"ip_address":"","ucode":"14F260C8B24E27","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ba/ce/fd45714f.jpg","comment_is_top":false,"comment_ctime":1611701052,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5906668348","product_id":100069901,"comment_content":"å­¦åˆ°äº†å­¦åˆ°äº†","like_count":1},{"had_liked":false,"id":274974,"user_name":"ZHUï½JM","can_delete":false,"product_type":"c1","uid":1590912,"ip_address":"","ucode":"1B29556D705C0B","user_header":"https://static001.geekbang.org/account/avatar/00/18/46/80/45d989e5.jpg","comment_is_top":false,"comment_ctime":1611239321,"is_pvip":false,"replies":[{"id":"99811","content":"è¿™å°±æ¶‰åŠtroubleshootingï¼Œé€šè¿‡etcd metricï¼Œtraceç‰¹æ€§ï¼Œetcd logç­‰å„ç§å·¥å…·åˆ†ææ‰è¡Œï¼Œåé¢ä¼šæœ‰ä»‹ç»ï¼Œä½ å¯ä»¥çœ‹çœ‹è¶…æ—¶æ—¶etcdçš„metricç›‘æ§å’Œæ—¥å¿—","user_name":"ä½œè€…å›å¤","comment_id":274974,"uid":"1009582","ip_address":"","utype":1,"ctime":1611312289,"user_name_real":"å”èª"}],"discussion_count":0,"race_medal":0,"score":"5906206617","product_id":100069901,"comment_content":"è€å¸ˆï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨K8så’Œetcdçš„æ—¶å€™ç»å¸¸å‡ºç°æ³¨å†Œå’Œå‘ç°è¶…æ—¶çš„æƒ…å†µï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå•Š","like_count":1},{"had_liked":false,"id":274859,"user_name":"atom","can_delete":false,"product_type":"c1","uid":1200822,"ip_address":"","ucode":"7A754C4EA3C3E4","user_header":"https://static001.geekbang.org/account/avatar/00/12/52/b6/d065c05f.jpg","comment_is_top":false,"comment_ctime":1611197481,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5906164777","product_id":100069901,"comment_content":"éå¸¸å–œæ¬¢åé¢etcdå±€é™æ€§çš„åˆ†æ è§‰å¾—å¾ˆä¸é”™","like_count":1},{"had_liked":false,"id":274844,"user_name":"Acter","can_delete":false,"product_type":"c1","uid":1082561,"ip_address":"","ucode":"EF747BEAD2A797","user_header":"https://static001.geekbang.org/account/avatar/00/10/84/c1/dfcad82a.jpg","comment_is_top":false,"comment_ctime":1611194524,"is_pvip":true,"replies":[{"id":"99844","content":"åé¢å®è·µç¯‡ä¼šä»‹ç»å¤§valueé£é™©ï¼Œå®¹æ˜“å¯¼è‡´apiserverå’Œetcd oomï¼Œè¶…æ—¶ï¼Œé›ªå´©ç­‰ï¼Œå»ºè®®åˆ›å»ºå‡ åƒä¸ªè¿™æ ·çš„å¤§å¯¹è±¡ï¼Œé€šè¿‡client-goæ¨¡æ‹Ÿç”¨æˆ·listï¼ŒæŒ‰æ ‡ç­¾getï¼Œä¿®æ”¹ç­‰æ“ä½œ","user_name":"ä½œè€…å›å¤","comment_id":274844,"uid":"1009582","ip_address":"","utype":1,"ctime":1611355058,"user_name_real":"å”èª"}],"discussion_count":1,"race_medal":0,"score":"5906161820","product_id":100069901,"comment_content":"è¯·é—®è€å¸ˆï¼Œk8såœºæ™¯etcd v3.3.10ç‰ˆæœ¬ã€‚ç”±äºä¸šåŠ¡çš„workflow yamlå¯¹è±¡å¾ˆå¤§ï¼Œè¿‘æœŸå·²æŠŠetcdçš„max-request-bytesä»1.5MiBæé«˜åˆ°äº†5MiBï¼Œè¿™å¯¹k8s masterç»„ä»¶ç¨³å®šæ€§æœ‰ä½•é£é™©å—ï¼Ÿè¯¥æ€ä¹ˆå‹æµ‹å‘¢ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1009582,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/ae/37b492db.jpg","nickname":"å”èª","note":"","ucode":"99CB061EDF35EA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":514141,"discussion_content":"åé¢å®è·µç¯‡ä¼šä»‹ç»å¤§valueé£é™©ï¼Œå®¹æ˜“å¯¼è‡´apiserverå’Œetcd oomï¼Œè¶…æ—¶ï¼Œé›ªå´©ç­‰ï¼Œå»ºè®®åˆ›å»ºå‡ åƒä¸ªè¿™æ ·çš„å¤§å¯¹è±¡ï¼Œé€šè¿‡client-goæ¨¡æ‹Ÿç”¨æˆ·listï¼ŒæŒ‰æ ‡ç­¾getï¼Œä¿®æ”¹ç­‰æ“ä½œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611355058,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":274752,"user_name":"åç«¯è¿›é˜¶","can_delete":false,"product_type":"c1","uid":1125656,"ip_address":"","ucode":"480F48F5378307","user_header":"https://static001.geekbang.org/account/avatar/00/11/2d/18/918eaecf.jpg","comment_is_top":false,"comment_ctime":1611148433,"is_pvip":false,"replies":[{"id":"99694","content":"ä¸€èµ·æŒç»­å­¦ä¹ ä¸è¿›æ­¥ï¼Œåç»­æœ‰ä»€ä¹ˆä¸æ¸…æ¥šçš„ï¼Œæ¬¢è¿ç»§ç»­ç•™è¨€äº¤æµ","user_name":"ä½œè€…å›å¤","comment_id":274752,"uid":"1009582","ip_address":"","utype":1,"ctime":1611156119,"user_name_real":"tangcong"}],"discussion_count":1,"race_medal":0,"score":"5906115729","product_id":100069901,"comment_content":"ç»™å”å¤§ä½¬ç–¯ç‹‚æ‰“Callï¼Œä»¥åå­¦ä¹ ETCDå°±è·Ÿç€å”å¤§ä½¬çš„è¯¾ç¨‹èµ°å°±å®Œäº†ï¼","like_count":1,"discussions":[{"author":{"id":1009582,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/ae/37b492db.jpg","nickname":"å”èª","note":"","ucode":"99CB061EDF35EA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":514112,"discussion_content":"ä¸€èµ·æŒç»­å­¦ä¹ ä¸è¿›æ­¥ï¼Œåç»­æœ‰ä»€ä¹ˆä¸æ¸…æ¥šçš„ï¼Œæ¬¢è¿ç»§ç»­ç•™è¨€äº¤æµ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611156119,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":274748,"user_name":"a...Z","can_delete":false,"product_type":"c1","uid":1293877,"ip_address":"","ucode":"5A5A44903785FD","user_header":"https://static001.geekbang.org/account/avatar/00/13/be/35/dd79037e.jpg","comment_is_top":false,"comment_ctime":1611145640,"is_pvip":false,"replies":[{"id":"99697","content":"ä¸€èµ·åŠ æ²¹ï¼Œæœ‰ä»»ä½•ç–‘é—®ï¼Œæ¬¢è¿éšæ—¶ç•™è¨€äº¤æµ!","user_name":"ä½œè€…å›å¤","comment_id":274748,"uid":"1009582","ip_address":"","utype":1,"ctime":1611156542,"user_name_real":"tangcong"}],"discussion_count":1,"race_medal":0,"score":"5906112936","product_id":100069901,"comment_content":"ç­‰çœŸç¾ä¹…  ç»ˆäºæœ‰äº†etcdçš„è®²è§£,æœŸå¾…","like_count":1,"discussions":[{"author":{"id":1009582,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/ae/37b492db.jpg","nickname":"å”èª","note":"","ucode":"99CB061EDF35EA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":514110,"discussion_content":"ä¸€èµ·åŠ æ²¹ï¼Œæœ‰ä»»ä½•ç–‘é—®ï¼Œæ¬¢è¿éšæ—¶ç•™è¨€äº¤æµ!","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611156542,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":354874,"user_name":"greatliu","can_delete":false,"product_type":"c1","uid":1137386,"ip_address":"æ¹–åŒ—","ucode":"267832F4BD10CA","user_header":"https://static001.geekbang.org/account/avatar/00/11/5a/ea/70589340.jpg","comment_is_top":false,"comment_ctime":1660835507,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1660835507","product_id":100069901,"comment_content":"è¯·æ•™ä¸€ä¸ªé—®é¢˜: ä¸‰å®ä¾‹çš„etcdé›†ç¾¤å¼€å¯httpsï¼Œå¦‚æœæŒ‚è½½slbçš„æƒ…å†µä¸‹å®¢æˆ·ç«¯æ— æ³•è®¿é—®ï¼Œä¸ç”¨slbæ˜¯å¯ä»¥çš„","like_count":0},{"had_liked":false,"id":353506,"user_name":"é™ˆéº’æ–‡","can_delete":false,"product_type":"c1","uid":2187256,"ip_address":"ç¦å»º","ucode":"41475885FA5AD5","user_header":"https://static001.geekbang.org/account/avatar/00/21/5f/f8/1d16434b.jpg","comment_is_top":false,"comment_ctime":1659509114,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1659509114","product_id":100069901,"comment_content":"ç›®å‰é¡¹ç›®ä¸­åªç”¨åˆ°èµ„é‡‘æ‰£å‡é”çš„ä½œç”¨","like_count":0},{"had_liked":false,"id":353193,"user_name":"ç å°å‘†","can_delete":false,"product_type":"c1","uid":2055809,"ip_address":"å¹¿ä¸œ","ucode":"44532D6ABF9340","user_header":"https://static001.geekbang.org/account/avatar/00/1f/5e/81/82709d6e.jpg","comment_is_top":false,"comment_ctime":1659249622,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1659249622","product_id":100069901,"comment_content":"é¡¹ç›®è¿˜æ²¡æœ‰ç”¨åˆ°è¿‡etcd ä¸è¿‡é—´æ¥æœ‰ä½¿ç”¨åˆ°.å¦‚ k8s,apisix å¸Œæœ›å­¦ä¹ æœ¬ä¸“æ å¯¹ etcd æœ‰ä¸€ä¸ªå®Œæ•´çš„è®¤è¯†","like_count":0},{"had_liked":false,"id":350798,"user_name":"YanChuan","can_delete":false,"product_type":"c1","uid":1033208,"ip_address":"","ucode":"2647EAC2829176","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c3/f8/0d22a564.jpg","comment_is_top":false,"comment_ctime":1657204078,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1657204078","product_id":100069901,"comment_content":"etcd is pronounced &#47;ËˆÉ›tsiËdiË&#47;, and means â€œdistributed etc directory.â€","like_count":0},{"had_liked":false,"id":343275,"user_name":"saltedfish","can_delete":false,"product_type":"c1","uid":1946257,"ip_address":"","ucode":"936571E1AC4139","user_header":"https://static001.geekbang.org/account/avatar/00/1d/b2/91/cf0de36e.jpg","comment_is_top":false,"comment_ctime":1650759335,"is_pvip":false,"replies":[{"id":"125739","content":"å—¯ï¼Œæ„Ÿè°¢æ”¯æŒï¼Œæƒ³æ·±å…¥äº†è§£æ›´å¤šçš„ï¼Œå¯ä»¥ç¿»ä¸€ç•ªæ—©æœŸetcd&#47;kubernetes issue&#47;pr","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1009582","ctime":1651623697,"ip_address":"","comment_id":343275,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1650759335","product_id":100069901,"comment_content":"çˆ½å•Šï¼Œè¿™ç§ä»è¯ç”ŸèƒŒæ™¯é¡ºç€å‘å±•è·¯çº¿è®²ä¸‹æ¥çš„æ€è·¯èƒ½è®©äººçœŸæ­£ç†è§£ä¸ºä»€ä¹ˆç°åœ¨çš„etcdæ˜¯è¿™ä¸ªæ ·å­çš„ï¼Œæ„Ÿè°¢ä½œè€…ï¼","like_count":0,"discussions":[{"author":{"id":1009582,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/ae/37b492db.jpg","nickname":"å”èª","note":"","ucode":"99CB061EDF35EA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":569957,"discussion_content":"å—¯ï¼Œæ„Ÿè°¢æ”¯æŒï¼Œæƒ³æ·±å…¥äº†è§£æ›´å¤šçš„ï¼Œå¯ä»¥ç¿»ä¸€ç•ªæ—©æœŸetcd/kubernetes issue/pr","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651623698,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":334265,"user_name":"Geek_8898d4","can_delete":false,"product_type":"c1","uid":1740267,"ip_address":"","ucode":"1A63D043725B7B","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epb7ibhPYSCNoTqLnmThBia76ic78ZicLNwxE8iaForsLQNUJSTLla5RibNtiaTVIaalBeoDyMUjkBicF7dWg/132","comment_is_top":false,"comment_ctime":1644834164,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1644834164","product_id":100069901,"comment_content":"è€å¸ˆï¼Œâ€œå›  HTTP&#47;1.x ä¸æ”¯æŒå¤šè·¯å¤ç”¨ï¼Œä¼šåˆ›å»ºå¤§é‡çš„è¿æ¥ï¼Œæ¶ˆè€— server ç«¯è¿‡å¤šçš„ socket å’Œå†…å­˜èµ„æºâ€ï¼Œè¿™ä¸ªä¸æ˜¯ç›´æ¥å…³ç³»å§ã€‚ æ„Ÿè§‰å¤šè·¯å¤ç”¨è§£å†³çš„æ—¶æ•ˆç‡é—®é¢˜ã€‚ æ”¯æŒå¤šè·¯å¤ç”¨ï¼Œä¹Ÿä¼šäº§ç”Ÿå¤§é‡è¿æ¥å’Œå¤§é‡socketå ç”¨ã€‚ä¸çŸ¥é“ç†è§£çš„å¯¹ä¸å¯¹ã€‚  ","like_count":0},{"had_liked":false,"id":326863,"user_name":"é˜¿ç”˜","can_delete":false,"product_type":"c1","uid":1057843,"ip_address":"","ucode":"BC93175B70E05D","user_header":"https://static001.geekbang.org/account/avatar/00/10/24/33/bcf37f50.jpg","comment_is_top":false,"comment_ctime":1639725556,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1639725556","product_id":100069901,"comment_content":"4. åŠŸèƒ½ï¼šå¢åˆ æ”¹æŸ¥ï¼Œç›‘å¬æ•°æ®å˜åŒ–çš„æœºåˆ¶ã€‚è¿™ä¸ªZKä¸æ˜¯æœ‰watchæœºåˆ¶å—ï¼Ÿéš¾é“é‚£æ—¶å€™è¿˜ä¸æ”¯æŒï¼Ÿ","like_count":0},{"had_liked":false,"id":326855,"user_name":"æ›¼æ–½å¦å› ","can_delete":false,"product_type":"c1","uid":2108889,"ip_address":"","ucode":"03A791821941BB","user_header":"https://static001.geekbang.org/account/avatar/00/20/2d/d9/8b993f5e.jpg","comment_is_top":false,"comment_ctime":1639722742,"is_pvip":false,"replies":[{"id":"119293","content":"å—¯ï¼Œè¿™æ˜¯æ–‡å­—ä¸“æ ","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1009582","ctime":1640240883,"ip_address":"","comment_id":326855,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1639722742","product_id":100069901,"comment_content":"è¯·é—®è¿™ä¸ªæ˜¯æ²¡æœ‰è§†é¢‘çš„å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1009582,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/ae/37b492db.jpg","nickname":"å”èª","note":"","ucode":"99CB061EDF35EA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":541041,"discussion_content":"å—¯ï¼Œè¿™æ˜¯æ–‡å­—ä¸“æ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640240883,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":325988,"user_name":"ä¹”çº³æ£®","can_delete":false,"product_type":"c1","uid":1045107,"ip_address":"","ucode":"51EC9FAE071388","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f2/73/1c7bceae.jpg","comment_is_top":false,"comment_ctime":1639296867,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1639296867","product_id":100069901,"comment_content":"ä¸ºä»€ä¹ˆè¯´v2 ä¸æ”¯æŒèŒƒå›´æŸ¥è¯¢å‘¢ï¼Ÿ å†…å­˜æ ‘ï¼Œæ˜¯å› ä¸ºæ— åºçš„æ˜¯å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":321445,"user_name":"è±†èŠ±ç¾¹","can_delete":false,"product_type":"c1","uid":1522220,"ip_address":"","ucode":"57D8F64988C305","user_header":"https://static001.geekbang.org/account/avatar/00/17/3a/2c/683ae4af.jpg","comment_is_top":false,"comment_ctime":1636879828,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1636879828","product_id":100069901,"comment_content":"v2ä¸æ”¯æŒä¿å­˜keyçš„æ‰€æœ‰ç‰ˆæœ¬ï¼Œé€šè¿‡æ»‘åŠ¨çª—å£æœºåˆ¶æ¥ä¿å­˜æœ€è¿‘1000æ¡è®°å½•ã€‚è¯·æ•™ä¸‹ä¸ºä»€ä¹ˆä¸èƒ½ä¿æŒæ‰€æœ‰ç‰ˆæœ¬å‘¢ï¼Œv2ä¸æ˜¯ä¹Ÿä¼šè¿›è¡ŒæŒä¹…åŒ–å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":321440,"user_name":"è±†èŠ±ç¾¹","can_delete":false,"product_type":"c1","uid":1522220,"ip_address":"","ucode":"57D8F64988C305","user_header":"https://static001.geekbang.org/account/avatar/00/17/3a/2c/683ae4af.jpg","comment_is_top":false,"comment_ctime":1636879191,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1636879191","product_id":100069901,"comment_content":"å¯¹äºä¸“æ ä¸­æåˆ°çš„HTTP&#47;1.xä¸æ”¯æŒå‹ç¼©ï¼Œè¿™ä¸ªæ˜¯æŒ‡headerå‹ç¼©å—ï¼Ÿå› ä¸ºHTTP1.1çš„bodyæ˜¯å¯ä»¥é€šè¿‡Accept-Encodingçš„HeaderæŒ‡å®šæ”¯æŒçš„å‹ç¼©æ–¹å¼çš„ï¼Œæ¯”å¦‚br, gzipç­‰ã€‚","like_count":0},{"had_liked":false,"id":319423,"user_name":"Geek6392","can_delete":false,"product_type":"c1","uid":2830936,"ip_address":"","ucode":"2786492C1DCCB7","user_header":"","comment_is_top":false,"comment_ctime":1635812179,"is_pvip":false,"replies":[{"id":"115820","content":"éå¸¸æœ‰å¿…è¦å“ˆï¼Œæ¯”å¦‚æ“ä½œetcdçš„æ—¶å€™ä¸å°å¿ƒè¯¯åˆ æ•°æ®ã€ä¸šåŠ¡operatorè¯¯åˆ æ•°æ®ã€å¤šä¸ªèŠ‚ç‚¹åŒæ—¶æ–­ç”µå¯¼è‡´æ•°æ®æŸåç­‰ï¼Œéƒ½å¯èƒ½ä¼šé‡åˆ°","user_name":"ä½œè€…å›å¤","user_name_real":"å”èª","uid":"1009582","ctime":1635861656,"ip_address":"","comment_id":319423,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1635812179","product_id":100069901,"comment_content":"è€å¸ˆï¼Œetcdæœ¬æ¥å°±æ˜¯åˆ†å¸ƒå¼å­˜å‚¨äº†ï¼Œè¿˜æœ‰å¿…è¦å¯¹å…¶æ•°æ®è¿›è¡Œå®šæœŸå¤‡ä»½ä¹ˆï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1009582,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/ae/37b492db.jpg","nickname":"å”èª","note":"","ucode":"99CB061EDF35EA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529631,"discussion_content":"éå¸¸æœ‰å¿…è¦å“ˆï¼Œæ¯”å¦‚æ“ä½œetcdçš„æ—¶å€™ä¸å°å¿ƒè¯¯åˆ æ•°æ®ã€ä¸šåŠ¡operatorè¯¯åˆ æ•°æ®ã€å¤šä¸ªèŠ‚ç‚¹åŒæ—¶æ–­ç”µå¯¼è‡´æ•°æ®æŸåç­‰ï¼Œéƒ½å¯èƒ½ä¼šé‡åˆ°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635861656,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":315132,"user_name":"è¿‡å®¢","can_delete":false,"product_type":"c1","uid":2364361,"ip_address":"","ucode":"8E63453A0C150E","user_header":"https://static001.geekbang.org/account/avatar/00/24/13/c9/68839e9b.jpg","comment_is_top":false,"comment_ctime":1633696826,"is_pvip":false,"replies":[{"id":"114588","content":"ä½ å¥½ï¼Œç»­çº¦çš„å¯¹è±¡æ˜¯lease, ä¸€æ—¦å¯¹leaseç»­çº¦ï¼Œåœ¨leaseæœªè¿‡æœŸå‰ï¼Œetcd serverå°±ä¸ä¼šåˆ é™¤ä¸å®ƒå…³è”çš„å„ä¸ªkeyã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å”èª","uid":"1009582","ctime":1634310859,"ip_address":"","comment_id":315132,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1633696826","product_id":100069901,"comment_content":"å”è€å¸ˆï¼Œé—®æ‚¨ä¸ªé—®é¢˜ï¼Œå¤šä¸ªkeyå…³è”ä¸€ä¸ªleaseï¼Œé‚£ä¹ˆä¸€ä¸ªkeyç»­çº¦äº†ï¼Œæ‰€æœ‰å…³è”åˆ°è¿™ä¸ªleaseçš„keyå°±éƒ½ä¸èƒ½åˆ é™¤äº†å§ï¼Œå³ä½¿è¿™äº›keyæ²¡æœ‰ä»»ä½•å…³è”","like_count":0,"discussions":[{"author":{"id":1009582,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/ae/37b492db.jpg","nickname":"å”èª","note":"","ucode":"99CB061EDF35EA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527876,"discussion_content":"ä½ å¥½ï¼Œç»­çº¦çš„å¯¹è±¡æ˜¯lease, ä¸€æ—¦å¯¹leaseç»­çº¦ï¼Œåœ¨leaseæœªè¿‡æœŸå‰ï¼Œetcd serverå°±ä¸ä¼šåˆ é™¤ä¸å®ƒå…³è”çš„å„ä¸ªkeyã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634310859,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":311722,"user_name":"æ­¦æ–‡æ–‡æ­¦","can_delete":false,"product_type":"c1","uid":1108924,"ip_address":"","ucode":"5288366646A15B","user_header":"https://static001.geekbang.org/account/avatar/00/10/eb/bc/6ccac4bb.jpg","comment_is_top":false,"comment_ctime":1631426200,"is_pvip":false,"replies":[{"id":"113037","content":"å¤šæ•°æ´¾ä¸å¯ç”¨çš„è¿™ç§åœºæ™¯ä¸‹ï¼Œåªèƒ½ä»learnerä¸Šæ‰§è¡Œsnapshot, å¿«é€Ÿé‡å»ºä¸€ä¸ªæ–°çš„etcdé›†ç¾¤ï¼Œå¦‚æœå†™è¯·æ±‚æ¯”è¾ƒå¤šï¼Œå¯èƒ½ä¼šä¸¢å¤±å°‘é‡æ•°æ®ã€‚è¿˜æœ‰ä¸€ç§æ–¹æ¡ˆï¼ŒåŒ—äº¬ä¸€å¥—ä¸»é›†ç¾¤ï¼Œä¸Šæµ·ä¸€å¥—ä¸»é›†ç¾¤ï¼Œä¸¤è€…é€šè¿‡åŒæ­¥æœåŠ¡è¿›è¡Œæ•°æ®åŒæ­¥ï¼ˆåŸºäºwatch+mvccã€raftç­‰ï¼‰ï¼Œä¸»å†™ä¸€åœ°ï¼Œè¯»æ ¹æ®ä¸šåŠ¡å¯¹ä¸€è‡´æ€§è¦æ±‚å°±è¿‘é€‰æ‹©ï¼Œä¹Ÿå¯èƒ½ä¼šå­˜åœ¨ä¸€ç‚¹æ•°æ®ä¸ä¸€è‡´ï¼Œè¿™æ˜¯æˆ‘ä»¬æˆ‘ä»¬æœ€è¿‘åœ¨æçš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å”èª","uid":"1009582","ctime":1631546935,"ip_address":"","comment_id":311722,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1631426200","product_id":100069901,"comment_content":"<br>è€å¸ˆæ‚¨å¥½ï¼Œlearnerçš„åŠŸèƒ½ç›®å‰æ¥çœ‹åªèƒ½ä½œä¸ºæ•°æ®åŒæ­¥èŠ‚ç‚¹ï¼Œå¯¹å¤–æä¾›è¯»æœåŠ¡ï¼Œæ— æ³•å¯¹é›†ç¾¤çš„å¯ç”¨æ€§èµ·åˆ°æ˜æ˜¾ä½œç”¨ï¼Œæ¯”å¦‚: ä¸Šæµ·å’ŒåŒ—äº¬ä¸¤åœ°ï¼Œå¸Œæœ›å½“å¤šæ•°æ´¾çš„ä¸Šæµ·æ•´ä½“ä¸å¯ç”¨äº†ï¼ŒåŒ—äº¬èƒ½é€šè¿‡learnerè‡ªåŠ¨æ™‹å‡ä¸ºfollowerï¼Œä»è€Œè¾¾åˆ°å¼‚åœ°å¤šæ´»çš„æ•ˆæœï¼Œå¦‚ä½•èƒ½å®ç°æ­¤æ•ˆæœå‘¢ï¼Ÿ<br>","like_count":0,"discussions":[{"author":{"id":1009582,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/ae/37b492db.jpg","nickname":"å”èª","note":"","ucode":"99CB061EDF35EA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526716,"discussion_content":"å¤šæ•°æ´¾ä¸å¯ç”¨çš„è¿™ç§åœºæ™¯ä¸‹ï¼Œåªèƒ½ä»learnerä¸Šæ‰§è¡Œsnapshot, å¿«é€Ÿé‡å»ºä¸€ä¸ªæ–°çš„etcdé›†ç¾¤ï¼Œå¦‚æœå†™è¯·æ±‚æ¯”è¾ƒå¤šï¼Œå¯èƒ½ä¼šä¸¢å¤±å°‘é‡æ•°æ®ã€‚è¿˜æœ‰ä¸€ç§æ–¹æ¡ˆï¼ŒåŒ—äº¬ä¸€å¥—ä¸»é›†ç¾¤ï¼Œä¸Šæµ·ä¸€å¥—ä¸»é›†ç¾¤ï¼Œä¸¤è€…é€šè¿‡åŒæ­¥æœåŠ¡è¿›è¡Œæ•°æ®åŒæ­¥ï¼ˆåŸºäºwatch+mvccã€raftç­‰ï¼‰ï¼Œä¸»å†™ä¸€åœ°ï¼Œè¯»æ ¹æ®ä¸šåŠ¡å¯¹ä¸€è‡´æ€§è¦æ±‚å°±è¿‘é€‰æ‹©ï¼Œä¹Ÿå¯èƒ½ä¼šå­˜åœ¨ä¸€ç‚¹æ•°æ®ä¸ä¸€è‡´ï¼Œè¿™æ˜¯æˆ‘ä»¬æˆ‘ä»¬æœ€è¿‘åœ¨æçš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631546935,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":310791,"user_name":"æ±Ÿå±±å¦‚ç”»","can_delete":false,"product_type":"c1","uid":1188280,"ip_address":"","ucode":"BEB6228E6135B5","user_header":"https://static001.geekbang.org/account/avatar/00/12/21/b8/aca814dd.jpg","comment_is_top":false,"comment_ctime":1630912403,"is_pvip":false,"replies":[{"id":"112682","content":"å—¯ï¼Œéƒ¨åˆ†åœºæ™¯ä¸‹å¯èƒ½ä¼šå‡ºç°watchäº‹ä»¶æ¨é€ç¼“æ…¢ï¼Œæ¯”å¦‚èŠ‚ç‚¹å‡ºç°å¸¦å®½ç“¶é¢ˆã€ç½‘ç»œæ³¢åŠ¨ç­‰ï¼Œä½ å¯ä»¥é€šè¿‡è§‚å¯Ÿetcd_debugging_mvcc_pending_events_totalæŒ‡æ ‡æ¥å¿«é€Ÿå‘ç°é—®é¢˜ï¼Œè¿˜æœ‰ç£ç›˜ioæŠ–åŠ¨ä¹Ÿä¼šå¯¼è‡´éƒ¨åˆ†èŠ‚ç‚¹æ•°æ®è½åï¼Œå¯¼è‡´watcäº‹ä»¶æ¨é€ç¼“æ…¢ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å”èª","uid":"1009582","ctime":1631014935,"ip_address":"","comment_id":310791,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1630912403","product_id":100069901,"comment_content":"ä¸»è¦ç”¨çš„ v3ï¼Œä½¿ç”¨ watch æœºåˆ¶ä¿è¯ä¸åŒèŠ‚ç‚¹æ‰§è¡Œç›¸åŒçš„ä»»åŠ¡ï¼Œä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°çš„ä¸»è¦é—®é¢˜æ˜¯å®³æ€• watch äº‹ä»¶ä¸¢å¤±","like_count":0,"discussions":[{"author":{"id":1009582,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/ae/37b492db.jpg","nickname":"å”èª","note":"","ucode":"99CB061EDF35EA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526354,"discussion_content":"å—¯ï¼Œéƒ¨åˆ†åœºæ™¯ä¸‹å¯èƒ½ä¼šå‡ºç°watchäº‹ä»¶æ¨é€ç¼“æ…¢ï¼Œæ¯”å¦‚èŠ‚ç‚¹å‡ºç°å¸¦å®½ç“¶é¢ˆã€ç½‘ç»œæ³¢åŠ¨ç­‰ï¼Œä½ å¯ä»¥é€šè¿‡è§‚å¯Ÿetcd_debugging_mvcc_pending_events_totalæŒ‡æ ‡æ¥å¿«é€Ÿå‘ç°é—®é¢˜ï¼Œè¿˜æœ‰ç£ç›˜ioæŠ–åŠ¨ä¹Ÿä¼šå¯¼è‡´éƒ¨åˆ†èŠ‚ç‚¹æ•°æ®è½åï¼Œå¯¼è‡´watcäº‹ä»¶æ¨é€ç¼“æ…¢ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631014935,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":296796,"user_name":"batman","can_delete":false,"product_type":"c1","uid":1266482,"ip_address":"","ucode":"73C30ACFC0D612","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/IIkdC2gohpcibib0AJvSdnJQefAuQYGlLySQOticThpF7Ck9WuDUQLJlgZ7ic13LIFnGBXXbMsSP3nZsbibBN98ZjGA/132","comment_is_top":false,"comment_ctime":1623163566,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1623163566","product_id":100069901,"comment_content":"å’Œredisæ¯”ï¼Œå¯ä¸å¯ä»¥ç†è§£ä¸ºé™¤äº†æ•°æ®ä¸€è‡´æ€§çš„é—®é¢˜ï¼Œå…¶ä»–çš„éƒ½æ²¡rediså¥½ç”¨","like_count":0},{"had_liked":false,"id":293147,"user_name":"å¤§å¤§å¾ˆäºŒ","can_delete":false,"product_type":"c1","uid":1306140,"ip_address":"","ucode":"E3B80C31E43D53","user_header":"https://static001.geekbang.org/account/avatar/00/13/ee/1c/e4a82c25.jpg","comment_is_top":false,"comment_ctime":1621242912,"is_pvip":false,"replies":[{"id":"106156","content":"å¯ä»¥å“ˆ","user_name":"ä½œè€…å›å¤","user_name_real":"å”èª","uid":"1009582","ctime":1621336448,"ip_address":"","comment_id":293147,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1621242912","product_id":100069901,"comment_content":"çœ‹äº†ç¬¬ä¸€è®²ï¼Œæ„Ÿè§‰å†™çš„å¾ˆæœ‰è¶£ä¸”ä¸æ¯ç‡¥ï¼Œè¯·é—®è€å¸ˆæŸäº›ç‰‡æ®µå¯ä»¥å¼•ç”¨åˆ°ä¸ªäººçš„åšå®¢å—","like_count":0,"discussions":[{"author":{"id":1009582,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/ae/37b492db.jpg","nickname":"å”èª","note":"","ucode":"99CB061EDF35EA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":520097,"discussion_content":"å¯ä»¥å“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621336448,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":277635,"user_name":"KèŒæ— æƒ¨","can_delete":false,"product_type":"c1","uid":2194764,"ip_address":"","ucode":"97A532D588FD49","user_header":"","comment_is_top":false,"comment_ctime":1612498081,"is_pvip":false,"replies":[{"id":"100729","content":"Leaseæ˜¯ä¸ºäº†ä¼˜åŒ–éƒ¨åˆ†key TTLç›¸åŒï¼Œä½†è¿˜éœ€è¦ä¸ºå„ä¸ªkeyå‘èµ·ç»­æœŸè¯·æ±‚è€Œè®¾è®¡çš„æ¦‚å¿µï¼Œå¦‚æœéƒ¨åˆ†key, å®ƒä»¬çš„TTLéƒ½ä¸º10ç§’ï¼Œé‚£ä¹ˆåªéœ€è¦åˆ›å»ºä¸€ä¸ªTTLä¸º10ç§’çš„Leaseèµ„æºï¼Œè¿™æ ·å°±å®ç°äº†TTLéƒ½ä¸º10ç§’çš„keyåªéœ€è¦å…³è”ä¸€ä¸ªLeaseï¼Œç»­æœŸå¯¹è±¡ä¹Ÿæ˜¯è¿™ä¸ªLeaseèµ„æºï¼Œè€Œä¸æ˜¯ä¸€ç³»åˆ—keyï¼Œå¤§å¤§å‡å°‘ç»­æœŸçš„è¯·æ±‚æ•°ã€‚Leaseè¯¦ç»†è§£è¯»ä½ å¯ä»¥çœ‹çœ‹06<br>","user_name":"ä½œè€…å›å¤","user_name_real":"å”èª","uid":"1009582","ctime":1612511951,"ip_address":"","comment_id":277635,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1612498081","product_id":100069901,"comment_content":"è€å¸ˆ, è¯·é—®&quot;ç›¸åŒçš„ TTL çš„ key å…³è”ä¸€ä¸ª Lease&quot;è¿™å¥è¯æ˜¯ä¸æ˜¯è¯´é”™äº†,æŒ‰æˆ‘çš„ç†è§£æ˜¯&quot;æŒæœ‰ç›¸åŒLeaseçš„keyå…³è”ä¸€ä¸ªTTL&quot;","like_count":0,"discussions":[{"author":{"id":1009582,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/ae/37b492db.jpg","nickname":"å”èª","note":"","ucode":"99CB061EDF35EA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":515122,"discussion_content":"Leaseæ˜¯ä¸ºäº†ä¼˜åŒ–éƒ¨åˆ†key TTLç›¸åŒï¼Œä½†è¿˜éœ€è¦ä¸ºå„ä¸ªkeyå‘èµ·ç»­æœŸè¯·æ±‚è€Œè®¾è®¡çš„æ¦‚å¿µï¼Œå¦‚æœéƒ¨åˆ†key, å®ƒä»¬çš„TTLéƒ½ä¸º10ç§’ï¼Œé‚£ä¹ˆåªéœ€è¦åˆ›å»ºä¸€ä¸ªTTLä¸º10ç§’çš„Leaseèµ„æºï¼Œè¿™æ ·å°±å®ç°äº†TTLéƒ½ä¸º10ç§’çš„keyåªéœ€è¦å…³è”ä¸€ä¸ªLeaseï¼Œç»­æœŸå¯¹è±¡ä¹Ÿæ˜¯è¿™ä¸ªLeaseèµ„æºï¼Œè€Œä¸æ˜¯ä¸€ç³»åˆ—keyï¼Œå¤§å¤§å‡å°‘ç»­æœŸçš„è¯·æ±‚æ•°ã€‚Leaseè¯¦ç»†è§£è¯»ä½ å¯ä»¥çœ‹çœ‹06\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612511951,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2364361,"avatar":"https://static001.geekbang.org/account/avatar/00/24/13/c9/68839e9b.jpg","nickname":"è¿‡å®¢","note":"","ucode":"8E63453A0C150E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":401593,"discussion_content":"å”è€å¸ˆï¼Œé—®æ‚¨ä¸ªé—®é¢˜ï¼Œå¤šä¸ªkeyå…³è”ä¸€ä¸ªleaseï¼Œé‚£ä¹ˆä¸€ä¸ªkeyç»­çº¦äº†ï¼Œæ‰€æœ‰å…³è”åˆ°è¿™ä¸ªleaseçš„keyå°±éƒ½ä¸èƒ½åˆ é™¤äº†å§ï¼Œå³ä½¿è¿™äº›keyæ²¡æœ‰ä»»ä½•å…³è”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633696766,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2194764,"avatar":"","nickname":"KèŒæ— æƒ¨","note":"","ucode":"97A532D588FD49","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":348740,"discussion_content":"æ„Ÿè°¢å”è€å¸ˆçš„ç­”ç–‘è§£æƒ‘ æˆ‘å¤§æ¦‚æ˜ç™½äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612699743,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":277310,"user_name":"mckee","can_delete":false,"product_type":"c1","uid":1066511,"ip_address":"","ucode":"E4DEBB462B93A1","user_header":"https://static001.geekbang.org/account/avatar/00/10/46/0f/f6cfc659.jpg","comment_is_top":false,"comment_ctime":1612351139,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1612351139","product_id":100069901,"comment_content":"k8såœºæ™¯ ä¸€èˆ¬é€‰æ‹© ä½ ä»¬é€‰æ‹©é™æ€éƒ¨ç½² è¿˜æ˜¯åŠ¨æ€å‘ç°éƒ¨ç½²ï¼Ÿ <br>é™æ€éƒ¨ç½²scaleè¦æ›´æ–°apiserverå‚æ•°ï¼›åŠ¨æ€å‘ç°éƒ¨ç½²åˆå¤šäº†ä¸€ä¸ªä¾èµ–","like_count":0},{"had_liked":false,"id":275887,"user_name":"po","can_delete":false,"product_type":"c1","uid":1023905,"ip_address":"","ucode":"7DB36C278F34D7","user_header":"https://static001.geekbang.org/account/avatar/00/0f/9f/a1/d75219ee.jpg","comment_is_top":false,"comment_ctime":1611712756,"is_pvip":true,"replies":[{"id":"100194","content":"æœ‰æŒä¹…åŒ–çš„ï¼Œå®šæ—¶åšå¿«ç…§ï¼ŒæŠŠå†…å­˜æ ‘åºåˆ—å·æˆjsonä¿å­˜åˆ°ç£ç›˜å¿«ç…§æ–‡ä»¶ï¼Œå¯åŠ¨çš„æ—¶å€™ä¼šåŠ è½½å¿«ç…§æ–‡ä»¶ï¼Œé‡å»º","user_name":"ä½œè€…å›å¤","user_name_real":"å”èª","uid":"1009582","ctime":1611740645,"ip_address":"","comment_id":275887,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1611712756","product_id":100069901,"comment_content":"etcd v2æ˜¯æ²¡æœ‰å¯¹æ•°æ®æŒä¹…åŒ–åªåœ¨å†…å­˜ï¼Ÿé‚£ä¹ˆetcdé‡å¯æ•°æ®å°±æ²¡äº†ï¼Ÿä¹‹å‰åœ¨æå®¢æ—¶é—´å¼ ç£Šçš„kubernetesä¸Šé¢ä»–è¯´å› ä¸ºraftä¸éœ€è¦å¯¹etcdæŒä¹…åŒ–ï¼Œæé—®äº†æ²¡è§£ç­”ï¼Œç–‘æƒ‘ä¸­ã€‚","like_count":0,"discussions":[{"author":{"id":1009582,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/ae/37b492db.jpg","nickname":"å”èª","note":"","ucode":"99CB061EDF35EA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":514520,"discussion_content":"æœ‰æŒä¹…åŒ–çš„ï¼Œå®šæ—¶åšå¿«ç…§ï¼ŒæŠŠå†…å­˜æ ‘åºåˆ—å·æˆjsonä¿å­˜åˆ°ç£ç›˜å¿«ç…§æ–‡ä»¶ï¼Œå¯åŠ¨çš„æ—¶å€™ä¼šåŠ è½½å¿«ç…§æ–‡ä»¶ï¼Œé‡å»º","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611740645,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":275411,"user_name":"mckee","can_delete":false,"product_type":"c1","uid":1066511,"ip_address":"","ucode":"E4DEBB462B93A1","user_header":"https://static001.geekbang.org/account/avatar/00/10/46/0f/f6cfc659.jpg","comment_is_top":false,"comment_ctime":1611512515,"is_pvip":false,"replies":[{"id":"100036","content":"å—¯ï¼Œ3.4ç‰ˆæœ¬æ‰ä½¿ç”¨round robinè´Ÿè½½å‡è¡¡ç®—æ³•","user_name":"ä½œè€…å›å¤","user_name_real":"å”èª","uid":"1009582","ctime":1611639114,"ip_address":"","comment_id":275411,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1611512515","product_id":100069901,"comment_content":"è€ç‰ˆæœ¬çš„etcd clientåªç»´æŠ¤ä¸€ä¸ªetcd memberè¿æ¥ï¼Œå¯¹äºheavy usageä¼šé€ æˆè´Ÿè½½ä¸å‡è¡¡","like_count":0,"discussions":[{"author":{"id":1009582,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/ae/37b492db.jpg","nickname":"å”èª","note":"","ucode":"99CB061EDF35EA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":514335,"discussion_content":"å—¯ï¼Œ3.4ç‰ˆæœ¬æ‰ä½¿ç”¨round robinè´Ÿè½½å‡è¡¡ç®—æ³•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611639114,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":275207,"user_name":"Geek_1337","can_delete":false,"product_type":"c1","uid":1803245,"ip_address":"","ucode":"6A8F40EF1F79B8","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLz44WGtTHNfB7GGTQgZGJqPDzhfqiaUkmSRtZUkgjuQ7dqJibx5HBp6icOfWLicCUvMTC7ltq5DzTLxw/132","comment_is_top":false,"comment_ctime":1611389445,"is_pvip":false,"replies":[{"id":"99873","content":"watchç¯‡æ—¶æˆ‘ä¼šä»è®¾è®¡å®ç°æ€è·¯ä¸Šè¯¦è§£ï¼Œéº»çƒ¦ç¨ç­‰","user_name":"ä½œè€…å›å¤","user_name_real":"å”èª","uid":"1009582","ctime":1611401810,"ip_address":"","comment_id":275207,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1611389445","product_id":100069901,"comment_content":"è€å¸ˆå¥½ï¼æƒ³çŸ¥é“åœ¨æ²¡æœ‰åƒetcdè¿™æ ·watchæœºåˆ¶ä»¥å‰ï¼Œä¸€èˆ¬æ•°æ®åº“æ˜¯æ€ä¹ˆè·å–æ•°æ®çš„æ›´æ–°çš„ï¼Œé™¤äº†ä¸æ–­çš„è½®è¯¢è¿˜æœ‰å…¶ä»–è§£å†³æ€è·¯å—ï¼Ÿè°¢è°¢ã€‚","like_count":0,"discussions":[{"author":{"id":1009582,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/ae/37b492db.jpg","nickname":"å”èª","note":"","ucode":"99CB061EDF35EA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":514261,"discussion_content":"watchç¯‡æ—¶æˆ‘ä¼šä»è®¾è®¡å®ç°æ€è·¯ä¸Šè¯¦è§£ï¼Œéº»çƒ¦ç¨ç­‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611401810,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":275015,"user_name":"èŒƒé—²","can_delete":false,"product_type":"c1","uid":1073125,"ip_address":"","ucode":"F21FD7DF6BA53C","user_header":"https://static001.geekbang.org/account/avatar/00/10/5f/e5/54325854.jpg","comment_is_top":false,"comment_ctime":1611278027,"is_pvip":false,"replies":[{"id":"99846","content":"æ˜¯çš„ï¼Œæˆ‘ä»¬ä½¿ç”¨raft learnerèŠ‚ç‚¹ï¼Œè·¨åŸå®¹ç¾ï¼Œè¿›è¡Œäº†ä¸€äº›å®šåˆ¶åŒ–æ”¹é€ ","user_name":"ä½œè€…å›å¤","user_name_real":"å”èª","uid":"1009582","ctime":1611355279,"ip_address":"","comment_id":275015,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1611278027","product_id":100069901,"comment_content":"etcdç”¨æ¥åšæœåŠ¡å‘ç°ï¼Œæ²»ç†ï¼Œåˆ†å¸ƒå¼é”ï¼Œè¿˜æœ‰é…ç½®ä¿¡æ¯å­˜å‚¨å¾ˆå¥½ç”¨ã€‚<br>ç¼ºç‚¹æ˜¯å¼‚åœ°å¤šæ´»ä¸å¥½ç”¨ï¼Œå»¶è¿Ÿæœ‰ç‚¹å¤§ã€‚","like_count":1,"discussions":[{"author":{"id":1009582,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/ae/37b492db.jpg","nickname":"å”èª","note":"","ucode":"99CB061EDF35EA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":514187,"discussion_content":"æ˜¯çš„ï¼Œæˆ‘ä»¬ä½¿ç”¨raft learnerèŠ‚ç‚¹ï¼Œè·¨åŸå®¹ç¾ï¼Œè¿›è¡Œäº†ä¸€äº›å®šåˆ¶åŒ–æ”¹é€ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611355279,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":274929,"user_name":"ğŸŒˆ","can_delete":false,"product_type":"c1","uid":2057756,"ip_address":"","ucode":"8C9146CC5AB88C","user_header":"https://static001.geekbang.org/account/avatar/00/1f/66/1c/b154a90f.jpg","comment_is_top":false,"comment_ctime":1611219813,"is_pvip":false,"replies":[{"id":"99845","content":"k8sä½¿ç”¨çš„æ˜¯v3ï¼Œèƒ½è´´ä¸‹ä½ è¯´çš„é»˜è®¤APIç‰ˆæœ¬ä¸º2çš„ä»£ç å—","user_name":"ä½œè€…å›å¤","user_name_real":"å”èª","uid":"1009582","ctime":1611355170,"ip_address":"","comment_id":274929,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1611219813","product_id":100069901,"comment_content":"ä¸ºä»€ä¹ˆk8sé‡Œé»˜è®¤çš„etcd APIç‰ˆæœ¬è¿˜æ˜¯2?","like_count":0,"discussions":[{"author":{"id":1009582,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/ae/37b492db.jpg","nickname":"å”èª","note":"","ucode":"99CB061EDF35EA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":514162,"discussion_content":"k8sä½¿ç”¨çš„æ˜¯v3ï¼Œèƒ½è´´ä¸‹ä½ è¯´çš„é»˜è®¤APIç‰ˆæœ¬ä¸º2çš„ä»£ç å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611355170,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2057756,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/66/1c/b154a90f.jpg","nickname":"ğŸŒˆ","note":"","ucode":"8C9146CC5AB88C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":344491,"discussion_content":"æˆ‘è¡¨è¿°é”™äº†ï¼Œæˆ‘çš„k8sé‡Œå®‰è£…çš„etcdé»˜è®¤çš„apiæ€»æ˜¯v2ï¼Œæ¯æ¬¡ä½¿ç”¨è¦exportåˆ°v3ã€‚æˆ‘çš„æ„æ€æ˜¯ä¸ºä»€ä¹ˆä¸ç›´æ¥é»˜è®¤v3","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611476882,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1206982,"avatar":"https://static001.geekbang.org/account/avatar/00/12/6a/c6/9f2fbc17.jpg","nickname":"wswcfan","note":"","ucode":"9D09EBB77A381B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2057756,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/66/1c/b154a90f.jpg","nickname":"ğŸŒˆ","note":"","ucode":"8C9146CC5AB88C","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":344869,"discussion_content":"3.4ç‰ˆæœ¬etcdctlå·²ç»é»˜è®¤v3äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611593034,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":344491,"ip_address":""},"score":344869,"extra":""}]}]},{"had_liked":false,"id":274911,"user_name":"GACÂ·DU","can_delete":false,"product_type":"c1","uid":1385403,"ip_address":"","ucode":"7847FBE1C13740","user_header":"https://static001.geekbang.org/account/avatar/00/15/23/bb/a1a61f7c.jpg","comment_is_top":false,"comment_ctime":1611217282,"is_pvip":true,"replies":[{"id":"99847","content":"æˆ‘è®¤ä¸ºæœ€ä¸»è¦çš„æ˜¯è¿˜æ˜¯Goè¯­è¨€å’Œå®¹å™¨ç”Ÿæ€ï¼Œzookeeperå½“æ—¶ä¹Ÿæ²¡å¥½ç”¨çš„go clientåº“ï¼Œwatchç‰¹æ€§ä¹Ÿæ²¡etcdå¥½ç”¨ï¼Œæ ¸å¿ƒè¿˜æ˜¯æ–‡ä¸­è¯´å¾—ï¼Œå½“æ—¶æ²¡ä¸€ä¸ªé¡¹ç›®æ»¡è¶³k8séœ€æ±‚ï¼Œåªæœ‰coreoså›¢é˜Ÿä¸åœçš„æ¨åŠ¨etcdä¸k8sç›¸äº’é€‚é…æ”¹é€ ï¼Œç»´æŠ¤k8s etcdä»£ç ï¼Œè®©k8sæ ¸å¿ƒå¼€å‘è€…æœ‰æ›´å¤šç²¾åŠ›å»å¼€å‘æ›´é‡è¦çš„ç‰¹æ€§å¼€å‘ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å”èª","uid":"1009582","ctime":1611355648,"ip_address":"","comment_id":274911,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1611217282","product_id":100069901,"comment_content":"è¯»äº†ä¸¤éè¿˜æ˜¯æ„Ÿè§‰å¾ˆåƒåŠ›ï¼Œéœ€è¦å»æ¶è¡¥ä¸€ä¸‹ä¸æ‡‚çš„çŸ¥è¯†ã€‚æœ‰ä¸ªç–‘é—®æƒ³è®©è€å¸ˆè§£æƒ‘ä¸€ä¸‹ï¼ŒetcdV1å’ŒV2ç‰ˆæœ¬å¹¶æ²¡æœ‰ZKç¤¾åŒºæˆç†ŸåŠŸèƒ½ä¹Ÿæ²¡æœ‰ZKå¼ºå¤§ï¼Œä¸ºä»€ä¹ˆK8Sé€‰æ‹©äº†å’Œetcdä¸€èµ·æˆé•¿ï¼Œè€Œä¸æ˜¯ç­‰ç€etcdå„æ–¹é¢å®Œå–„å’Œå¼ºå¤§èµ·æ¥å†ä»ZKåˆ‡æ¢åˆ°etcdï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1009582,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/ae/37b492db.jpg","nickname":"å”èª","note":"","ucode":"99CB061EDF35EA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":514156,"discussion_content":"æˆ‘è®¤ä¸ºæœ€ä¸»è¦çš„æ˜¯è¿˜æ˜¯Goè¯­è¨€å’Œå®¹å™¨ç”Ÿæ€ï¼Œzookeeperå½“æ—¶ä¹Ÿæ²¡å¥½ç”¨çš„go clientåº“ï¼Œwatchç‰¹æ€§ä¹Ÿæ²¡etcdå¥½ç”¨ï¼Œæ ¸å¿ƒè¿˜æ˜¯æ–‡ä¸­è¯´å¾—ï¼Œå½“æ—¶æ²¡ä¸€ä¸ªé¡¹ç›®æ»¡è¶³k8séœ€æ±‚ï¼Œåªæœ‰coreoså›¢é˜Ÿä¸åœçš„æ¨åŠ¨etcdä¸k8sç›¸äº’é€‚é…æ”¹é€ ï¼Œç»´æŠ¤k8s etcdä»£ç ï¼Œè®©k8sæ ¸å¿ƒå¼€å‘è€…æœ‰æ›´å¤šç²¾åŠ›å»å¼€å‘æ›´é‡è¦çš„ç‰¹æ€§å¼€å‘ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611355648,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":274770,"user_name":"YWWà­§( Ì® )à­¨âœ§á¦","can_delete":false,"product_type":"c1","uid":2230643,"ip_address":"","ucode":"1BB63753321DF8","user_header":"https://static001.geekbang.org/account/avatar/00/22/09/73/02921723.jpg","comment_is_top":false,"comment_ctime":1611153075,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1611153075","product_id":100069901,"comment_content":"ä¸é”™ä¸é”™","like_count":0},{"had_liked":false,"id":274767,"user_name":"Trouble man","can_delete":false,"product_type":"c1","uid":1198976,"ip_address":"","ucode":"20FEA52BFA5C4B","user_header":"https://static001.geekbang.org/account/avatar/00/12/4b/80/27be4a80.jpg","comment_is_top":false,"comment_ctime":1611151920,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1611151920","product_id":100069901,"comment_content":"è®²å¾—å¤ªå¥½ï¼","like_count":0}]}