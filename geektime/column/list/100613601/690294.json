{"id":690294,"title":"03ï½œå·¥ä½œå°ï¼šJVMè¿è¡Œæ—¶æ•°æ®åŒºçš„å†…éƒ¨æœºåˆ¶æ˜¯æ€æ ·çš„ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯åº·æ¨ã€‚ä»Šå¤©è¿™èŠ‚è¯¾æˆ‘ä»¬æ¥èŠèŠJVMçš„è¿è¡Œæ—¶æ•°æ®åŒºã€‚äº†è§£JVMçš„æ–¹æ³•æ‰§è¡Œå†…å­˜æ¨¡å‹ï¼ŒæŒæ¡æ›´å¤šæå‡Javaç¨‹åºæ€§èƒ½çš„æŠ€å·§ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/2c/39/2c18969c0cbf8dd84f3be6fbfa421939.png?wh=1920x890\" alt=\"å›¾ç‰‡\"></p><p>è¿è¡Œæ—¶æ•°æ®åŒºï¼ˆRuntime Data Areaï¼‰ç”¨äºæä¾›JVMè¿è¡Œæ—¶çš„å†…å­˜ç©ºé—´çš„æ•°æ®ã€‚ä»¥çº¿ç¨‹çš„è§†è§’å‡ºå‘ï¼Œè¿™ä¸ªåŒºåŸŸåˆåˆ†æˆçº¿ç¨‹å…±äº«åŒºåŸŸå’Œçº¿ç¨‹ç‹¬äº«åŒºåŸŸã€‚</p><p>çº¿ç¨‹çš„ç‹¬äº«åŒºåŸŸç”±<strong>ç¨‹åºè®¡æ•°å™¨ã€è™šæ‹Ÿæœºæ ˆï¼ˆVMæ ˆï¼‰å’Œæœ¬åœ°æ–¹æ³•æ ˆ</strong>æ„æˆï¼Œå®ƒä»¬çš„ä½¿ç”¨å¯¿å‘½ä¸çº¿ç¨‹çš„è¿è¡Œæ—¶é—´ç›¸åŒï¼Œå› æ­¤å¯ä»¥æœ‰æ•ˆé¿å…åƒåœ¾å›æ”¶çš„éº»çƒ¦ï¼Œå¹¶ä¸”å¯ä»¥æ ¹æ®çº¿ç¨‹çš„ä¸æ–­å‘å±•è¿›è¡Œç›¸åº”çš„è°ƒæ•´ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/b5/83/b542607579b27a9d1424e80985dee383.png?wh=1920x944\" alt=\"å›¾ç‰‡\"></p><p>çº¿ç¨‹å…±äº«åŒºåŸŸåŒ…æ‹¬å †å’Œæ–¹æ³•åŒºï¼Œæ–¹æ³•åŒºç”¨äºå­˜å‚¨ç±»çš„ç»“æ„ä¿¡æ¯ï¼Œå †ç”¨äºå­˜å‚¨å¯¹è±¡å®ä¾‹ç­‰ã€‚è¿™èŠ‚è¯¾æˆ‘ä»¬å°†èšç„¦åœ¨çº¿ç¨‹ç‹¬äº«åŒºåŸŸï¼Œæ–¹æ³•åŒºå’Œå †çš„ä»‹ç»æˆ‘å°†åœ¨ç±»åŠ è½½å™¨å’ŒGCçš„éƒ¨åˆ†ä¸ºä½ è¯¦ç»†ä»‹ç»ã€‚</p><h2>ç¨‹åºè®¡æ•°å™¨</h2><p>ç¨‹åºè®¡æ•°å™¨å±äºçº¿ç¨‹ç§æœ‰èµ„æºï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„å±äºè‡ªå·±çš„ç¨‹åºè®¡æ•°å™¨ï¼ŒæŒ‡å®šçº¿ç¨‹æ‰€æ‰§è¡Œçš„å­—èŠ‚ç æŒ‡ä»¤çš„è¡Œå·ã€‚æ‰§è¡ŒJavaæ–¹æ³•æ—¶ï¼Œè¿™ä¸ªåœ°æ–¹è®°å½•çš„æ˜¯çº¿ç¨‹æ­£åœ¨æ‰§è¡Œçš„å­—èŠ‚ç çš„æŒ‡ä»¤åœ°å€ï¼Œå¦‚æœæ‰§è¡Œæœ¬åœ°æ–¹æ³•ï¼Œè¿™ä¸ªåœ°æ–¹çš„å€¼ä¸ºç©ºã€‚</p><h3>åº”ç”¨åœºæ™¯</h3><p>ç¨‹åºè®¡æ•°å™¨æ˜¯å­—èŠ‚ç è§£é‡Šå™¨çš„æ ¸å¿ƒï¼Œå®ƒå¯ä»¥æ ¹æ®ç¨‹åºè®¡æ•°å™¨çš„æ•°å€¼ï¼Œä¸ºä¸‹ä¸€æ­¥çš„å­—èŠ‚ç æ“ä½œæä¾›å‡†ç¡®çš„æŒ‡å¼•ï¼Œä»è€Œä½¿ç¨‹åºæ›´åŠ é«˜æ•ˆåœ°å®Œæˆä»»åŠ¡ã€‚</p><p>åœ¨å®é™…çš„æµç¨‹æ§åˆ¶ä¸­ï¼Œå¾ªç¯ã€è·³è½¬ã€åˆ†æ”¯ç­‰åŸºç¡€åŠŸèƒ½çš„è¿ä½œä¹Ÿä¾èµ–äºç¨‹åºè®¡æ•°å™¨ã€‚åœ¨æ¶‰åŠå¤šçº¿ç¨‹çš„ç¯å¢ƒä¸‹ï¼Œç¨‹åºè®¡æ•°å™¨ä¿å­˜äº†å½“å‰çº¿ç¨‹è¿è¡Œçš„ä½ç½®ï¼Œè¿™æ ·åœ¨çº¿ç¨‹å†æ¬¡è¢«è°ƒç”¨æ—¶ï¼Œå¯ä»¥äº†è§£åˆ°è¿™ä¸ªçº¿ç¨‹ä¹‹å‰è¿è¡Œåˆ°äº†ä»€ä¹ˆåœ°æ–¹ã€‚</p><!-- [[[read_end]]] --><h3>ç¡¬ä»¶æœ¬è´¨</h3><p>ç¨‹åºè®¡æ•°å™¨æ˜¯JVMå¯¹åº•å±‚ç¡¬ä»¶ä¸­ç¨‹åºè®¡æ•°å™¨å’Œå¯„å­˜å™¨ä¸¤ä¸ªç»„ä»¶çš„æ¨¡æ‹Ÿã€‚</p><p>å½“æ“ä½œç³»ç»Ÿå†³å®šå°†CPUçš„å¤„ç†å¯¹è±¡ä»ä¸€ä¸ªçº¿ç¨‹è½¬å‘å¦ä¸€ä¸ªçº¿ç¨‹çš„æ—¶å€™ï¼Œéœ€è¦ä¿ç•™å½“å‰çº¿ç¨‹çš„çŠ¶æ€å¹¶å¤åŸå¾…æ‰§è¡Œçº¿ç¨‹çš„çŠ¶æ€ã€‚è¿™ä¸ªçŠ¶æ€å°±åŒ…æ‹¬ç¨‹åºè®¡æ•°å™¨çš„å€¼ï¼Œå®ƒå­˜å‚¨äº†å½“å‰çº¿ç¨‹æ­£æ‰§è¡Œåˆ°å“ªé‡Œï¼›è¿˜æœ‰å¯„å­˜å™¨çš„å€¼ï¼Œå­˜å‚¨äº†å½“å‰çº¿ç¨‹æ­£åœ¨è¿›è¡Œçš„è®¡ç®—ä¿¡æ¯ã€‚<strong>ä¿å­˜è¿™äº›ä¿¡æ¯å¹¶åœ¨éœ€è¦çš„æ—¶å€™æ¢å¤æ˜¯å®ç°çº¿ç¨‹åˆ‡æ¢çš„å…³é”®æ­¥éª¤ã€‚</strong>å¯ä»¥è¯´ï¼Œç¨‹åºè®¡æ•°å™¨å’Œå¯„å­˜å™¨åœ¨çº¿ç¨‹åˆ‡æ¢è¿‡ç¨‹ä¸­å‘æŒ¥ç€è‡³å…³é‡è¦çš„ä½œç”¨ã€‚</p><p>JVMçš„ç¨‹åºè®¡æ•°å™¨ä½¿åŸç”Ÿå¹³å°å’ŒJavaä¹‹é—´çš„çº¿ç¨‹åˆ‡æ¢éƒ½å˜å¾—æ›´åŠ æµç•…äº†ã€‚æœ‰è¶£çš„æ˜¯ï¼Œæ­£å› ä¸ºç¨‹åºè®¡æ•°å™¨ä¸­æ”¹å˜çš„åªæ˜¯è¡Œå·ï¼Œä¸ä¼šåƒJavaçš„å…¶ä»–å†…å­˜åŒºåŸŸé‚£æ ·ï¼Œå› ä¸ºç¨‹åºè¿è¡Œçš„éœ€è¦è¯·æ±‚æ›´å¤§çš„ç©ºé—´ï¼Œæ‰€ä»¥å®ƒæ˜¯JVMè§„èŒƒä¸­å”¯ä¸€ä¸€ä¸ªæ²¡æœ‰è§„å®šä»»ä½• OutOfMemory Error æƒ…å†µçš„åŒºåŸŸã€‚</p><h2>è™šæ‹Ÿæœºæ ˆ</h2><p>æˆ‘ä»¬é€šå¸¸æ‰€è¯´çš„æ ˆå°±æ˜¯æŒ‡çš„è¿™ä¸ªåŒºåŸŸï¼Œå®ƒä¹Ÿæ˜¯JVMä¸­æ–¹æ³•æ‰§è¡Œçš„å†…å­˜æ¨¡å‹ï¼Œè´Ÿè´£å­˜å‚¨å½“å‰æ­£åœ¨è¢«å¤„ç†çš„æ–¹æ³•æ‰€éœ€çš„æ•°æ®ã€å †ä¸Šçš„åœ°å€å’ŒæŒ‡ä»¤ã€‚</p><h3>æ–¹æ³•æ‰§è¡Œå†…å­˜æ¨¡å‹</h3><p>æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„æ ˆç©ºé—´ã€‚åœ¨è§¦å‘æ–¹æ³•çš„æ—¶å€™ä¼šåˆ›å»ºä¸€ä¸ª<strong>æ ˆå¸§</strong>ç»“æ„ï¼Œè¿™ä¸ªç»“æ„å°†ä¿å­˜æ‰€æœ‰ä¸æ–¹æ³•å…³è”çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºå±€éƒ¨å˜é‡ã€æ“ä½œæ•°æ ˆã€åŠ¨æ€é“¾æ¥ä»¥åŠè¿”å›åœ°å€ã€‚ç„¶è€Œæ ˆå¸§çš„æ·±åº¦æ˜¯æœ‰é™åˆ¶çš„ï¼Œä¸€æ—¦è¶…è¿‡è¿™ä¸ªç•Œé™ï¼Œå°±ä¼šå‡ºç° StackOverflowError å¼‚å¸¸ã€‚æ¯ä¸ªæ–¹æ³•ä»å¼€å§‹è¢«è°ƒç”¨éƒ½ä¼šæœ‰ä¸€ä¸ªæ ˆå¸§çš„å‹æ ˆå’Œå‡ºæ ˆæ“ä½œï¼Œè¿™ä¸ªè¿‡ç¨‹å¯ä»¥ä¸€ç›´è¿½æº¯åˆ°VMæ ˆçš„åˆå§‹çŠ¶æ€ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/5b/bb/5b3e76d691da9e21d10d1da56f4745bb.png?wh=1902x1148\" alt=\"å›¾ç‰‡\"></p><p>æ ˆçš„ç”Ÿå‘½å‘¨æœŸå’Œçº¿ç¨‹ç›¸åŒï¼Œæ‰€ä»¥å®ƒæ˜¯çº¿ç¨‹ç§æœ‰çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸åŒçº¿ç¨‹çš„æ ˆæ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œä¸ä¼šäº’ç›¸å¹²æ‰°ã€‚è¿™ç§è®¾è®¡èƒ½æœ‰æ•ˆåœ°éš”ç¦»å„ä¸ªçº¿ç¨‹çš„è¿è¡Œç¯å¢ƒï¼Œå¹¶ä¸”åœ¨å¤šçº¿ç¨‹ç¼–ç¨‹ä¸­å…è®¸æ¯ä¸ªçº¿ç¨‹æœ‰å®ƒè‡ªå·±çš„å±€éƒ¨å˜é‡è¡¨ã€æ“ä½œæ•°æ ˆç­‰èµ„æºï¼Œæœ‰åˆ©äºæé«˜ç¨‹åºçš„å¹¶å‘æ€§èƒ½ã€‚</p><p>Javaè™šæ‹Ÿæœºæ ˆåœ¨Javaè¿è¡Œæ—¶å†…å­˜é‡Œå æ®ç€é‡è¦çš„åœ°ä½ï¼Œä¸»è¦ç”¨æ¥æ”¯æŒJavaç¨‹åºçš„è¿è¡Œã€‚åœ¨ä¸€ä¸ªJavaç¨‹åºä¸­ï¼Œæ¯ä¸€ä¸ªçº¿ç¨‹çš„è¿è¡Œéƒ½å¯¹åº”ç€ä¸€ä¸ªè™šæ‹Ÿæœºæ ˆã€‚</p><p>ä¸‹é¢æˆ‘ä»¬å°±æ¥è¯¦ç»†ä»‹ç»ä¸‹å®ƒçš„å†…éƒ¨æ„æˆã€‚</p><h3>å±€éƒ¨å˜é‡è¡¨ï¼ˆLocal Variables Tableï¼‰</h3><p>æ–¹æ³•å†…éƒ¨å®šä¹‰çš„å±€éƒ¨å˜é‡ä¸»è¦æ”¾åœ¨å±€éƒ¨å˜é‡è¡¨é‡Œå‚¨å­˜ï¼Œè¿™äº›å±€éƒ¨å˜é‡åŒ…æ‹¬æ–¹æ³•çš„å½¢å¼å‚æ•°å’Œæ–¹æ³•å†…éƒ¨ç¡®å®šçš„å±€éƒ¨å˜é‡ã€‚æ¯ä¸ªå˜é‡éƒ½æœ‰ä¸€ä¸ªç‹¬ç«‹çš„å­˜å‚¨ç©ºé—´ï¼Œè¿™ä¸ªç©ºé—´è¢«ç§°ä¸ºå˜é‡æ§½ï¼ˆslotï¼‰ã€‚æ¯ä¸ªæ§½éƒ½æœ‰ä¸€ä¸ªç´¢å¼•å·ï¼Œç´¢å¼•å€¼çš„èŒƒå›´ä¸º0åˆ°max_locals-1ï¼Œå…¶ä¸­max_localsè¡¨ç¤ºå±€éƒ¨å˜é‡è¡¨çš„æœ€å¤§å®¹é‡ã€‚</p><p>ä¸€ä¸ªå˜é‡æ’æ§½èƒ½å¤Ÿå‚¨å­˜32ä½æˆ–æ›´å°‘ä½æ•°çš„æ•°æ®ç±»å‹ï¼ŒåŒ…æ‹¬ boolean å’Œ charã€‚å¯¹æ¯”ä¹‹ä¸‹ï¼Œå¯¹äº64ä½çš„æ•°æ®å‹å¦‚ long æˆ– doubleï¼Œè™šæ‹Ÿæœºä¼šæä¾›ä¸¤ä¸ªç´§é‚»çš„å˜é‡æ’æ§½ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/37/84/37ec91a3db3747d8d2d472bd780b4184.png?wh=1920x980\" alt=\"å›¾ç‰‡\"></p><h4>å­˜å‚¨å†…å®¹</h4><p>åœ¨å±€éƒ¨å˜é‡è¡¨ä¸­ï¼ŒretureAddressæŒ‡å‘å­—èŠ‚ç æŒ‡ä»¤ï¼Œreferenceåˆ™æŒ‡å‘å †å†…å­˜é‡Œçš„å¯¹è±¡ï¼Œ8ç§åŸºæœ¬æ•°æ®ç±»å‹åŒ…æ‹¬booleanã€byteã€charã€shortã€intã€longã€floatå’Œdoubleï¼Œå®ƒä»¬æ„æˆäº†ä¸€ä¸ªå®Œæ•´çš„å±€éƒ¨å˜é‡è¡¨ï¼Œå¯ä»¥æ»¡è¶³å¤šç§éœ€æ±‚ã€‚</p><h4>ä¸¤å¤§ç‰¹æ€§</h4><ol>\n<li>å®¹é‡ç¡®å®šæ€§</li>\n</ol><p>åœ¨æŠŠJavaç¨‹åºç¼–è¯‘ä¸ºClassæ–‡ä»¶çš„è¿‡ç¨‹ä¸­ï¼Œå±€éƒ¨å˜é‡è¡¨çš„å¤§å°å·²ç»è¢«ç²¾ç¡®åœ°è®¾ç½®å¥½äº†ï¼Œå¹¶ä¸”è¿™ä¸ªå€¼è¢«å­˜å‚¨åœ¨æ–¹æ³•Codeå±æ€§çš„max_localså­—æ®µé‡Œã€‚å› æ­¤æ¯æ¬¡è°ƒç”¨ä¸€ä¸ªæ–¹æ³•ï¼Œå®ƒå¯¹åº”çš„å±€éƒ¨å˜é‡è¡¨çš„å¤§å°æ˜¯ç¡®å®šçš„ï¼Œå¹¶ä¸”åœ¨è¿è¡ŒæœŸé—´ä¹Ÿä¸ä¼šè°ƒæ•´ã€‚</p><ol start=\"2\">\n<li>å¤ç”¨æ€§</li>\n</ol><p>ä¸ºäº†å……åˆ†åˆ©ç”¨ç©ºé—´ï¼Œå±€éƒ¨å˜é‡è¡¨é‡Œçš„å˜é‡æ§½å¯ä»¥è¢«å¤šæ¬¡é‡å¤ä½¿ç”¨ã€‚æ¯”å¦‚å‡½æ•°é‡Œä¸€ä¸ªå¾ªç¯å†…çš„å±€éƒ¨å˜é‡ï¼Œå®ƒçš„ä½œç”¨åŸŸåªåœ¨å½“å‰å¾ªç¯ä¸­ï¼Œè¿™æ—¶å€™åé¢çš„å˜é‡å¯ä»¥å ç”¨è¿™ä¸ªå˜é‡çš„slotã€‚</p><pre><code class=\"language-java\">public class LocalVariableTableExample {\n public static void main(String[] args) {\n   int a = 10;\n   int b = 20;\n   int sum = add(a, b);\n   System.out.println(\"Sum: \" + sum);\n }\n public static int add(int x, int y) {\n   int result = x + y;\n   return result;\n }\n}\n</code></pre><p>ä¸Šé¢ä»£ç çš„mainæ–¹æ³•ä¸­å£°æ˜äº†ä¸‰ä¸ªå±€éƒ¨å˜é‡ aã€bã€sumï¼Œè¿˜è°ƒç”¨äº† add æ–¹æ³•ã€‚add æ–¹æ³•ä¸­ä¹Ÿæœ‰ä¸€ä¸ªå±€éƒ¨å˜é‡ resultã€‚è¿™äº›å±€éƒ¨å˜é‡åœ¨JVMçš„å±€éƒ¨å˜é‡è¡¨é‡Œå æ®äº†æ§½ä½ã€‚ä½ å¯ä»¥çœ‹ä¸€ä¸‹å¯¹åº”çš„å­—èŠ‚ç ã€‚</p><pre><code class=\"language-java\">public class LocalVariableTableExample {\npublic static void main(java.lang.String[]);\ndescriptor: ([Ljava/lang/String;)V\nflags: ACC_PUBLIC, ACC_STATIC\nCode:\nstack=2, locals=4, args_size=1\n0: bipush 10\n2: istore_1 // å°†10å­˜å‚¨åˆ°å±€éƒ¨å˜é‡è¡¨æ§½1\n3: bipush 20\n5: istore_2 // å°†20å­˜å‚¨åˆ°å±€éƒ¨å˜é‡è¡¨æ§½2\n6: iload_1 // å°†å±€éƒ¨å˜é‡è¡¨æ§½1ä¸­çš„å€¼åŠ è½½åˆ°æ ˆé¡¶\n7: iload_2 // å°†å±€éƒ¨å˜é‡è¡¨æ§½2ä¸­çš„å€¼åŠ è½½åˆ°æ ˆé¡¶\n8: invokestatic #2 // è°ƒç”¨addæ–¹æ³•\n11: istore_3 // å°†è¿”å›å€¼å­˜å‚¨åˆ°å±€éƒ¨å˜é‡è¡¨æ§½3\n12: getstatic #3 // è·å–é™æ€å­—æ®µSystem.out\n15: new #4 // åˆ›å»ºä¸€ä¸ªStringBuilderå¯¹è±¡\n18: dup\n19: ldc #5 // åŠ è½½å­—ç¬¦ä¸² \"Sum: \"\n21: invokespecial #6 // è°ƒç”¨StringBuilderçš„æ„é€ å‡½æ•°\n24: iload_3 // å°†å±€éƒ¨å˜é‡è¡¨æ§½3ä¸­çš„å€¼åŠ è½½åˆ°æ ˆé¡¶\n25: invokevirtual #7 // è°ƒç”¨StringBuilderçš„appendæ–¹æ³•\n28: invokevirtual #8 // è°ƒç”¨StringBuilderçš„toStringæ–¹æ³•\n31: invokevirtual #9 // è°ƒç”¨PrintStreamçš„printlnæ–¹æ³•\n34: return\n}\n</code></pre><p>é€šè¿‡ istore_x å’Œ iload_xï¼Œå¯ä»¥æŠŠå­—èŠ‚ç é‡Œçš„å€¼å­˜å‚¨åˆ°å±€éƒ¨å˜é‡è¡¨æ§½ä¸­ï¼Œå¹¶æŠŠå®ƒåŠ è½½åˆ°æ ˆé¡¶ï¼Œå…¶ä¸­ x ä»£è¡¨æ§½ä½çš„ç´¢å¼•ã€‚</p><p>åœ¨mainæ–¹æ³•é‡Œï¼Œaå’Œbåˆ†åˆ«å­˜å‚¨åœ¨å±€éƒ¨å˜é‡è¡¨æ§½ä½1å’Œ2ä¸­ã€‚è¿™äº›å˜é‡åœ¨è°ƒç”¨ add æ–¹æ³•ä¹‹å‰æ˜¯ä¸éœ€è¦çš„ï¼Œå› æ­¤åœ¨è°ƒç”¨ add æ–¹æ³•ä¹‹å‰ï¼Œå®ƒä»¬çš„å€¼ä¼šè¢«åŠ è½½åˆ°æ ˆé¡¶ã€‚</p><p>add æ–¹æ³•ä¸­çš„ x å’Œ y å‚æ•°åˆ†åˆ«å­˜å‚¨åœ¨å±€éƒ¨å˜é‡è¡¨æ§½3å’Œ4ä¸­ï¼Œè€Œ result å˜é‡å­˜å‚¨åœ¨æ§½5ä¸­ã€‚åœ¨æ–¹æ³•å†…éƒ¨å°† x å’Œ y ç›¸åŠ åï¼ŒæŠŠç»“æœå­˜å‚¨åœ¨ result é‡Œï¼Œå¹¶è¿”å›ç»“æœã€‚</p><p>JVMä½¿ç”¨å±€éƒ¨å˜é‡è¡¨æ¥å­˜å‚¨æ–¹æ³•ä¸­çš„å±€éƒ¨å˜é‡ä»¥åŠæ–¹æ³•å‚æ•°ï¼Œè¿™äº›å±€éƒ¨å˜é‡è¡¨æ§½ä½çš„æ›¿ä»£æ€§å…è®¸åœ¨ä¸åŒé˜¶æ®µä½¿ç”¨ç›¸åŒçš„æ§½ä½æ¥å­˜å‚¨ä¸åŒçš„å˜é‡ï¼Œä»è€Œæé«˜å†…å­˜çš„åˆ©ç”¨æ•ˆç‡ã€‚åœ¨ç¤ºä¾‹ä¸­ï¼Œa å’Œ b çš„æ§½ä½åœ¨è°ƒç”¨ add æ–¹æ³•ä¹‹å‰è¢«é‡ç”¨ï¼Œè€Œ result çš„æ§½ä½åœ¨addæ–¹æ³•æ‰§è¡Œå®Œæ¯•åè¢«é‡æ–°ç”¨æ¥å­˜å‚¨ sum çš„å€¼ã€‚è¿™å°±æé†’æˆ‘ä»¬ï¼Œå°½å¯èƒ½åœ°å‡å°æ¯ä¸ªå˜é‡çš„ä½œç”¨åŸŸï¼Œè¿™æ ·å°±ä¸ºè™šæ‹Ÿæœºæä¾›äº†æ›´å¤šå¯èƒ½æ€§å»ä¼˜åŒ–å±€éƒ¨å˜é‡è¡¨ï¼Œé‡ç”¨æ§½ä½ï¼Œä»è€Œå‡å°‘äº†å†…å­˜å ç”¨ã€‚</p><h4>å…¶ä»–ç”¨é€”</h4><p>å±€éƒ¨å˜é‡è¡¨æ˜¯ GC Root çš„ä¸€éƒ¨åˆ†ï¼Œå½“sloté‡Œå­˜æ”¾çš„æ•°æ®ç±»å‹æ˜¯referenceçš„æ—¶å€™ï¼Œå®ƒå…³è”çš„å¯¹è±¡å°±æ˜¯GCé‡Œçš„ â€œå¯è¾¾å¯¹è±¡â€ã€‚å…³äºJVMå®šä½å¯è¾¾å¯¹è±¡çš„è¯¦ç»†ä¿¡æ¯ï¼Œåœ¨è¯¾ç¨‹çš„ç¬¬13è®²æˆ‘ä¼šè¯¦ç»†ä»‹ç»ã€‚</p><h3>æ“ä½œæ•°æ ˆ</h3><p>Javaè™šæ‹Ÿæœºçš„æ‰§è¡Œå¼•æ“é‡‡ç”¨çš„æ˜¯â€œåŸºäºæ ˆâ€çš„æ–¹å¼ï¼Œè¿™é‡Œæ‰€è¯´çš„æ ˆæŒ‡çš„å°±æ˜¯æ“ä½œæ•°æ ˆã€‚æ“ä½œæ•°æ ˆæŒ‰å­—é•¿è¿›è¡Œç»„ç»‡ï¼Œé€šè¿‡å‹æ ˆï¼ˆpushï¼‰å’Œå‡ºæ ˆç­‰æ–¹å¼è®¿é—®ã€‚ä¸€ä¸ªå‘½ä»¤å¯ä»¥å°†ä¸€ä¸ªæ•°å€¼æ¨å…¥æ“ä½œæ•°æ ˆï¼Œè€Œå¦ä¸€ä¸ªå‘½ä»¤åˆ™å¯ä»¥æŠŠæ•°å€¼ä»é‡Œé¢å–å‡ºæ¥ï¼Œä»è€Œå®ç°å¯¹æ•°æ®çš„å¿«é€Ÿè®¿é—®ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå½“æ•°æ®ç±»å‹ï¼Œæ¯”å¦‚byteã€shortå’Œcharï¼Œè¢«å†™å…¥æ“ä½œæ•°æ ˆçš„æ—¶å€™ï¼Œå®ƒä»¬ä¼šè¢«è½¬æ¢æˆintç±»å‹ã€‚</p><p>åœ¨äº†è§£äº†è¿™äº›åŸºç¡€ä¿¡æ¯åï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæ“ä½œæ•°æ ˆçœ‹ä½œJavaè™šæ‹Ÿæœºçš„å·¥ä½œç©ºé—´ã€‚å› ä¸ºå¤§å¤šæ•°æŒ‡ä»¤éƒ½ä»æ“ä½œæ•°æ ˆå¼¹å‡ºæ•°æ®è¿›è¡Œè®¡ç®—ï¼Œç„¶åæŠŠç»“æœå‹å›æ“ä½œæ•°æ ˆã€‚</p><pre><code class=\"language-java\">public class OperandStack{\n&nbsp;&nbsp;&nbsp; public static void main(String[] args) {\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int result = add(1, 2);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.out.println(result);\n&nbsp;&nbsp;&nbsp; }\n&nbsp;\n&nbsp;&nbsp;&nbsp; public static int add(int a, int b) {\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int c = a + b;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return c;\n&nbsp;&nbsp;&nbsp; }\n}\n</code></pre><p>å­—èŠ‚ç ä½¿ç”¨ <code>javap -c OperandStack</code> å‘½ä»¤å¯ä»¥å¾—åˆ°ã€‚</p><pre><code class=\"language-java\">public class OperandStack {\n&nbsp;&nbsp;&nbsp; public static void main(java.lang.String[]);\n&nbsp;&nbsp;&nbsp; Code:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0: iconst_1\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1: iconst_2\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2: invokestatic&nbsp; #2&nbsp;// Method add:(II)I\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;5: istore_1\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 6: getstatic&nbsp;&nbsp;&nbsp;&nbsp; #3&nbsp;// Field java/lang/System.out:Ljava/io/PrintStream;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;9: iload_1\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 10: invokevirtual #4 // Method java/io/PrintStream.println:(I)V\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;13: return\n&nbsp;\n&nbsp;&nbsp;&nbsp; public static int add(int, int);\n&nbsp;&nbsp;&nbsp; Code:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  0: iload_0\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1: iload_1\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2: iadd\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3: istore_2\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4: iload_2\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5: ireturn\n}\n</code></pre><p>å¯¹äº add æ–¹æ³•ï¼Œå­—èŠ‚ç çš„å·¥ä½œæ–¹å¼æ˜¯è¿™æ ·çš„ï¼š</p><ul>\n<li>iload_0 å’Œ iload_1 æŠŠå‚æ•°aã€båˆ†åˆ«å‹å…¥æ“ä½œæ•°æ ˆã€‚</li>\n<li>iadd æŒ‡ä»¤å¼¹å‡ºæ ˆé¡¶çš„ä¸¤ä¸ªå…ƒç´ ï¼Œä¹Ÿå°±æ˜¯å‚æ•°aå’Œbï¼Œæ‰§è¡ŒåŠ æ³•æ“ä½œï¼Œå¹¶æŠŠç»“æœå˜é‡cå‹å›æ ˆé¡¶ã€‚</li>\n<li>å°†æ ˆé¡¶å…ƒç´ ä¿å­˜åˆ°å±€éƒ¨å˜é‡è¡¨çš„ç¬¬äºŒä¸ªä½ç½®ï¼Œä¹Ÿå°±æ˜¯å˜é‡cæ‰€åœ¨çš„ä½ç½®ï¼Œæ˜¯istore_2çš„æ“ä½œã€‚</li>\n<li>iload_2çš„å·¥ä½œæ˜¯æŠŠå±€éƒ¨å˜é‡è¡¨ä¸­ç¬¬äºŒä¸ªä½ç½®çš„å…ƒç´ ï¼Œä¹Ÿå°±æ˜¯å˜é‡cçš„å€¼ï¼Œé‡æ–°æ”¾å›æ ˆé¡¶ã€‚</li>\n<li>ireturn æ˜¯æŠŠæ ˆé¡¶å…ƒç´ ï¼ˆå˜é‡cçš„å€¼ï¼‰ä½œä¸ºè¿”å›å€¼è¿”å›ã€‚</li>\n</ul><p>é€šè¿‡è¿™ä¸ªè¿‡ç¨‹æˆ‘ä»¬å¯ä»¥è§‚å¯Ÿåˆ°ï¼ŒJVMæ˜¯å¦‚ä½•åˆ©ç”¨æ“ä½œæ•°æ ˆè¿›è¡Œæ•°æ®çš„ä¼ é€’å’Œè®¡ç®—çš„ã€‚åœ¨ä½¿ç”¨JVMæ“ä½œæ•°æ ˆçš„æ—¶å€™ï¼Œä¸€èˆ¬æ— éœ€è¿›è¡Œé¢å¤–çš„æ“ä½œæˆ–ä¼˜åŒ–ï¼Œå› ä¸ºè¿™äº›éƒ½å·²ç»ç”±JVMè‡ªåŠ¨ç®¡ç†äº†ã€‚ä½†äº†è§£å…¶ä¸­çš„å·¥ä½œåŸç†ï¼Œèƒ½å¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°ç†è§£Javaç¨‹åºè¿è¡Œçš„è¿‡ç¨‹ã€‚</p><h3>åŠ¨æ€é“¾æ¥ï¼ˆDynamic Linkingï¼‰</h3><p>åŠ¨æ€é“¾æ¥ä¼šåœ¨ç¨‹åºè¿è¡Œæ—¶é€šè¿‡é“¾æ¥åˆ°è¿è¡Œæ—¶å¸¸é‡æ± çš„å¼•ç”¨ï¼Œæ¥æ‰¾åˆ°ä¸æ¯ä¸ªæ ˆå¸§ç›¸å…³çš„æ–¹æ³•ã€‚è¿™è®©æˆ‘ä»¬åœ¨å®ç°æ–¹æ³•è°ƒç”¨çš„æ—¶å€™èƒ½å¤Ÿè¿›è¡ŒåŠ¨æ€é“¾æ¥ã€‚</p><p>åœ¨ç±»æ–‡ä»¶çš„å¸¸é‡æ± é‡Œï¼Œå«æœ‰å¤§é‡çš„ç¬¦å·å¼•ç”¨ï¼Œè¿™äº›éƒ½æ˜¯æ–¹æ³•è°ƒç”¨æŒ‡ä»¤çš„å‚æ•°ï¼Œè¿™äº›å‚æ•°åœ¨å­—èŠ‚ç ä¸­è¡¨ç°ä¸ºæŒ‡å‘æ–¹æ³•çš„ç¬¦å·å¼•ç”¨ã€‚æ— è®ºæ˜¯åœ¨ç±»åŠ è½½çš„é˜¶æ®µè¿˜æ˜¯ç¬¬ä¸€æ¬¡ä½¿ç”¨çš„æ—¶å€™ï¼Œä¸€éƒ¨åˆ†ç¬¦å·å¼•ç”¨ä¼šè¢«è½¬æ¢ä¸ºç›´æ¥å¼•ç”¨ï¼Œè¿™ç§è½¬æ¢è¿‡ç¨‹è¢«æˆ‘ä»¬å«åšé™æ€è§£æã€‚å¦ä¸€éƒ¨åˆ†ç¬¦å·å¼•ç”¨åˆ™ä¼šåœ¨æ¯æ¬¡è¿è¡Œæ—¶éƒ½è½¬åŒ–ä¸ºç›´æ¥å¼•ç”¨ï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„åŠ¨æ€é“¾æ¥ã€‚</p><pre><code class=\"language-java\">public class DynamicLinking {\n&nbsp;&nbsp;&nbsp; public void methodA(){\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.out.println(\"---------start methodA-------------\");\n&nbsp;&nbsp;&nbsp; }\n}\n</code></pre><p>æ‰§è¡ŒæŒ‡ä»¤ï¼š</p><pre><code class=\"language-java\">javap -verbose -p DynamicLinking\n</code></pre><p>å¾—åˆ°å¯¹åº”çš„å­—èŠ‚ç ã€‚</p><pre><code class=\"language-java\">public void methodA();\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n&nbsp; descriptor: ()V\n&nbsp; flags: ACC_PUBLIC\n&nbsp; Code:\n&nbsp; &nbsp;stack=2, locals=1, args_size=1\n&nbsp; &nbsp;0: getstatic&nbsp;&nbsp;&nbsp;&nbsp; #3&nbsp;&nbsp;&nbsp; //ä½¿ç”¨åŠ¨æ€é“¾æ¥ï¼ŒæŒ‡å‘Field out:Ljava/io/PrintStream;\n&nbsp;&nbsp;&nbsp;3: ldc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #4&nbsp;&nbsp;&nbsp;&nbsp;//ä½¿ç”¨åŠ¨æ€é“¾æ¥ï¼Œå¼•ç”¨String \"---------start methodA-------------\"\n&nbsp;&nbsp;&nbsp;5: invokevirtual #5&nbsp;&nbsp;&nbsp;&nbsp;\n&nbsp;&nbsp;LineNumberTable:\n&nbsp; &nbsp;line 7: 0\n&nbsp;&nbsp;&nbsp;line 8: 8\n&nbsp; LocalVariableTable:\n&nbsp; &nbsp; Start&nbsp; Length&nbsp; Slot&nbsp; Name&nbsp;&nbsp; Signature\n&nbsp; &nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 9&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp; this&nbsp;&nbsp; Lcom/future/DynamicLinking;&nbsp;\n</code></pre><h4>ä¸»è¦ä½œç”¨</h4><ol>\n<li>å†³å®šæ–¹æ³•å¦‚ä½•è°ƒç”¨</li>\n</ol><p>åœ¨JVMé‡Œï¼Œè°ƒç”¨æŒ‡ä»¤ä¸»è¦åˆ†ä¸ºä¸¤ç§ï¼Œä¸€ç§æ˜¯æ‰§è¡Œå·²ç»ç¡®å®šçš„é™æ€æ–¹æ³•ï¼Œè€Œå¦ä¸€ç§æ˜¯è°ƒç”¨åœ¨è¿è¡Œè¿‡ç¨‹ä¸­çš„æ–¹æ³•ã€‚åŠ¨æ€é“¾æ¥è´Ÿè´£æ›¿æ¢è¿™äº›éœ€è¦åœ¨è¿è¡Œæ—¶æ‰èƒ½ç¡®å®šçš„æ–¹æ³•çš„ç¬¦å·å¼•ç”¨ã€‚</p><ol start=\"2\">\n<li>æé«˜æ€§èƒ½</li>\n</ol><p>é™æ€ç¼–è¯‘å¯èƒ½ä¼šç”Ÿæˆå¤§é‡çš„ç›®æ ‡ä»£ç ï¼Œè€ŒåŠ¨æ€é“¾æ¥åªåœ¨å®é™…éœ€è¦çš„æ—¶å€™æ‰è¿›è¡Œé“¾æ¥ï¼Œèƒ½å¤Ÿå¤§å¤§å‡å°‘é“¾æ¥çš„å·¥ä½œé‡ï¼Œæé«˜æ€§èƒ½ã€‚</p><h4>æœ€ä½³å®è·µ</h4><p>åœ¨å®é™…ç¼–ç¨‹ä¸­ï¼ŒåŠ¨æ€é“¾æ¥å±•ç°åœ¨Javaçš„å¤šæ€ç‰¹æ€§ä¸­ï¼Œé€šå¸¸åœ¨é¢å‘å¯¹è±¡çš„ç¼–ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¼šåˆ©ç”¨è™šå‡½æ•°æˆ–è€…æ¥å£æ¥å®ç°å¤šæ€ã€‚è¿™ä¸ªè¿‡ç¨‹å®é™…ä¸Šå°±æ˜¯åŠ¨æ€é“¾æ¥çš„åº”ç”¨ã€‚æˆ‘ä»¬éœ€è¦æ ¹æ®å®é™…çš„è¿è¡ŒçŠ¶æ€æ¥å†³å®šè°ƒç”¨å“ªä¸ªæ–¹æ³•ï¼Œè¿™ç§éœ€è¦åœ¨è¿è¡Œæ—¶æ‰èƒ½ç¡®å®šçš„é“¾æ¥è¿‡ç¨‹å°±æ˜¯åŠ¨æ€é“¾æ¥ã€‚</p><h3>è¿”å›åœ°å€</h3><p>æ ˆå¸§çš„è¿”å›åœ°å€ç”¨äºæ–¹æ³•æ‰§è¡Œç»“æŸåï¼Œè¿”å›åˆ°æ–¹æ³•è¢«è°ƒç”¨çš„ä½ç½®ã€‚</p><p>æ–¹æ³•æ‰§è¡Œç»“æŸçš„æ–¹å¼æœ‰ä¸¤ç§ï¼šæ­£å¸¸ç»“æŸå’Œå¼‚å¸¸ç»“æŸã€‚æ­£å¸¸ç»“æŸæ˜¯æ–¹æ³•å†…éƒ¨å¤„ç†å®Œæˆï¼Œå¼‚å¸¸ç»“æŸåˆ™æ˜¯æ–¹æ³•å†…éƒ¨æ— æ³•å¤„ç†å¼‚å¸¸è€Œå¯¼è‡´çš„é€€å‡ºã€‚</p><p>å¯¹äºæ­£å¸¸ç»“æŸï¼Œæ ˆå¸§å°†ä¿å­˜ç¨‹åºè®¡æ•°å™¨çš„æ•°å€¼ä½œä¸ºè¿”å›åœ°å€ã€‚å½“æ–¹æ³•æ­£å¸¸é€€å‡ºåï¼Œè¿™ä¸ªæ•°å€¼å¯ä»¥æŒ‡ç¤ºç¨‹åºç»§ç»­å¤„ç†çš„ä½ç½®ã€‚å¦å¤–ï¼Œå¦‚æœæ–¹æ³•æœ‰è¿”å›å€¼ï¼Œé‚£ä¹ˆè¿™ä¸ªå€¼ä¼šè¢«æ”¾åˆ°è°ƒåŠ¨è€…çš„æ ˆå¸§é‡Œã€‚å¯¹äºå¼‚å¸¸ç»“æŸï¼Œè¿”å›åœ°å€éœ€è¦é€šè¿‡å¼‚å¸¸å¤„ç†å™¨è¡¨æ¥è·å–ï¼Œå› ä¸ºå¼‚å¸¸é€€å‡ºçš„æ–¹æ³•ä¸ä¼šå‘è°ƒç”¨è€…è¿”å›ä»»ä½•å€¼ï¼Œæ‰€ä»¥æ ˆå¸§é€šå¸¸ä¸ä¼šæœ‰è¿™éƒ¨åˆ†ä¿¡æ¯ã€‚</p><p>ä»»ä½•æƒ…å†µä¸‹ï¼Œå½“æ–¹æ³•é€€å‡ºåéƒ½è¦å›åˆ°æœ€åˆçš„æ–¹æ³•è°ƒç”¨ä½ç½®ï¼Œæ¥æ¢å¤å¹¶ç»§ç»­ç¨‹åºçš„æ‰§è¡Œã€‚é’ˆå¯¹æ¯ä¸ªæ ˆå¸§ï¼Œæˆ‘ä»¬è¿˜éœ€è¦æä¾›ä¸€ä¸ªå¼•ç”¨ï¼Œä»¥æ­¤åœ¨è¿è¡Œæ—¶å¸¸é‡æ± å†…å¯ä»¥è¯†åˆ«å‡ºå¯¹åº”çš„æ–¹æ³•ï¼Œä¸”åœ¨æ–¹æ³•è¢«è°ƒç”¨çš„è¿‡ç¨‹ä¸­èƒ½å®ç°åŠ¨æ€é“¾æ¥ã€‚</p><p>æ— è®ºæ˜¯æ­£å¸¸é€€å‡ºè¿˜æ˜¯å¼‚å¸¸é€€å‡ºï¼Œæ–¹æ³•çš„è¿”å›åœ°å€éƒ½å¾ˆå…³é”®ï¼Œå¯ä»¥å¸®åŠ©ç¨‹åºæ¢å¤å¹¶ç»§ç»­æ‰§è¡Œã€‚å¯¹äºæ­£å¸¸é€€å‡ºï¼Œè¿”å›åœ°å€ä¸€èˆ¬æ¥è‡ªPCè®¡æ•°å™¨ï¼›å¯¹äºå¼‚å¸¸é€€å‡ºï¼Œåˆ™æ¥è‡ªå¼‚å¸¸å¤„ç†å™¨è¡¨ã€‚</p><h2>æœ¬åœ°æ–¹æ³•æ ˆ</h2><p>æœ¬åœ°æ–¹æ³•æ ˆä¸è™šæ‹Ÿæœºæ ˆåœ¨åŠŸèƒ½ä¸Šæœ‰å¾ˆå¤šç›¸ä¼¼ä¹‹å¤„ï¼Œä½†æ˜¯å®ƒä»¬ä¹‹é—´è¿˜æ˜¯æœ‰ä¸€äº›åŒºåˆ«çš„ã€‚è™šæ‹Ÿæœºæ ˆä¸»è¦ç”¨äºæ‰§è¡ŒJavaæ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯å­—èŠ‚ç ï¼Œè€Œæœ¬åœ°æ–¹æ³•æ ˆä¸»è¦è´Ÿè´£æ‰§è¡Œç”±éJavaè¯­è¨€ï¼ˆå¦‚Cã€C++ï¼‰ç¼–å†™çš„Nativeæ–¹æ³•ã€‚</p><p>æ¯ä¸ªçº¿ç¨‹éƒ½æ‹¥æœ‰ä¸€ä¸ªå’Œå®ƒç”Ÿå‘½å‘¨æœŸç›¸åŒçš„ç§æœ‰æœ¬åœ°æ–¹æ³•æ ˆã€‚è™šæ‹Ÿæœºæ²¡æœ‰å¯¹æœ¬åœ°æ–¹æ³•æ ˆä½¿ç”¨çš„ç¼–ç¨‹è¯­è¨€ã€å®ç°æ–¹å¼å’Œæ•°æ®ç»“æ„åšä¸¥æ ¼é™åˆ¶ï¼Œè¿™æ„å‘³ç€ä¸åŒçš„è™šæ‹Ÿæœºå¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚å®ç°æœ¬åœ°æ–¹æ³•æ ˆã€‚ä¾‹å¦‚ï¼ŒSun HotSpotè™šæ‹Ÿæœºå°±ç›´æ¥æŠŠæœ¬åœ°æ–¹æ³•æ ˆå’Œè™šæ‹Ÿæœºæ ˆåˆå¹¶ä¸ºä¸€ä¸ªã€‚</p><p>å’Œè™šæ‹Ÿæœºæ ˆä¸€æ ·ï¼Œæœ¬åœ°æ–¹æ³•æ ˆä¹Ÿå¯èƒ½åœ¨æ ˆæ·±åº¦è¶…è¿‡è™šæ‹Ÿæœºå…è®¸çš„èŒƒå›´æ—¶ï¼ŒæŠ›å‡ºStackOverflowErrorï¼Œåœ¨è™šæ‹Ÿæœºæ ˆåŠ¨æ€æ‰©å±•æ— æ³•ç”³è¯·åˆ°è¶³å¤Ÿå†…å­˜æ—¶ï¼ŒæŠ›å‡ºOutOfMemoryErrorã€‚æœ¬åœ°æ–¹æ³•æ ˆä¸ä»…å…³ç³»åˆ°Javaä¸å…¶ä»–è¯­è¨€çš„äº’é€šï¼Œè€Œä¸”å¯¹ç¨‹åºæ€§èƒ½ä¹Ÿæœ‰å¾ˆå¤§å½±å“ã€‚éšç€JDKä¸æ–­å‘å±•ï¼Œæœ¬åœ°æ–¹æ³•æ ˆä¹Ÿåœ¨é€æ­¥ä¼˜åŒ–ã€‚</p><h2>é‡ç‚¹å›é¡¾</h2><p>è¿™èŠ‚è¯¾æˆ‘ä»¬å­¦ä¹ äº†JVMè¿è¡Œæ—¶æ•°æ®åŒºçš„å†…éƒ¨æ„æˆå’Œåº”ç”¨åœºæ™¯ã€‚å…¶ä¸­ï¼Œè™šæ‹Ÿæœºæ ˆæ˜¯JVMæ–¹æ³•æ‰§è¡Œå†…å­˜æ¨¡å‹çš„è½½ä½“ï¼Œç¨‹åºè®¡æ•°å™¨åˆ™æ˜¯å°†JVMä¸­çš„çº¿ç¨‹ä¸åº•å±‚ç¡¬ä»¶å¹³å°çº¿ç¨‹å¹³æ»‘åˆ‡æ¢çš„å…³é”®ç»„ä»¶ã€‚å±€éƒ¨å˜é‡è¡¨é€šè¿‡æ§½ä½å…±ç”¨çš„æ–¹å¼æé«˜äº†å†…å­˜æ•ˆç‡ï¼ŒåŒæ—¶åŠ¨æ€é“¾æ¥ä¹Ÿæ˜¯æé«˜Javaç¨‹åºæ€§èƒ½çš„é‡è¦æ‰‹æ®µã€‚é€šè¿‡å­¦ä¹ è¿™äº›å†…å®¹ï¼Œæˆ‘ä»¬æ›´æ·±å…¥åœ°ç†è§£äº†JVMè¿è¡Œæ—¶æ•°æ®åŒºçš„å®ç°åŸç†å’Œä¼˜åŒ–ç­–ç•¥ã€‚</p><p>æ‰€ä»¥æˆ‘ä»¬è¦å°½å¯èƒ½åœ°å‡å°æ¯ä¸ªå˜é‡çš„ä½œç”¨åŸŸï¼Œä¸ºè™šæ‹Ÿæœºæä¾›äº†æ›´å¤šçš„å¯èƒ½æ€§å»ä¼˜åŒ–å±€éƒ¨å˜é‡è¡¨ï¼Œé‡ç”¨æ§½ä½ï¼Œä»è€Œå‡å°‘äº†å†…å­˜å ç”¨ã€‚çŸ¥å·±çŸ¥å½¼ï¼Œç™¾æˆ˜ä¸æ®†ï¼Œè¶Šç†Ÿæ‚‰æ¯å¤©é™ªä¼´æˆ‘ä»¬çš„å·¥å…·ï¼Œè¶Šæœ‰åˆ©äºæˆ‘ä»¬å†™å‡ºæ›´ä¼˜é›…çš„Javaç¨‹åºã€‚å¸Œæœ›ä½ å­¦å®Œè¿™èŠ‚è¯¾çš„å†…å®¹ä¹‹åï¼Œå†å»æ£€æŸ¥ä¸‹è‡ªå·±å†™çš„ä»£ç ï¼Œçœ‹çœ‹è¿˜æœ‰å“ªäº›å¯ä¼˜åŒ–çš„ç©ºé—´ã€‚</p><h2>æ€è€ƒé¢˜</h2><ul>\n<li>JVMä¸­æ–¹æ³•æ‰§è¡Œçš„å†…å­˜æ¨¡å‹å¯¹åº”çš„æ˜¯è¿è¡Œæ—¶æ•°æ®åŒºçš„é‚£ä¸ªåŒºåŸŸï¼Ÿ</li>\n<li>è¿™èŠ‚è¯¾ä½ å­¦åˆ°äº†å“ªäº›æå‡ç¨‹åºæ€§èƒ½çš„æŠ€å·§ï¼Ÿ</li>\n</ul><p>æ¬¢è¿ä½ æŠŠæ€è€ƒåçš„ç»“æœåˆ†äº«åˆ°è¯„è®ºåŒºï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠè¿™èŠ‚è¯¾çš„å†…å®¹åˆ†äº«ç»™å…¶ä»–æœ‹å‹ï¼Œæˆ‘ä»¬ä¸‹èŠ‚è¯¾å†è§ï¼</p><h2>ğŸ’¡ ç‚¹äº®ä½ çš„çŸ¥è¯†æ¡†æ¶å›¾</h2><p><img src=\"https://static001.geekbang.org/resource/image/19/09/19c29335cba7e247081d41cfb18da609.jpg?wh=8489x6347\" alt=\"\"></p>","comments":[{"had_liked":false,"id":380161,"user_name":"Levi","can_delete":false,"product_type":"c1","uid":2221236,"ip_address":"åŒ—äº¬","ucode":"F804879872BB76","user_header":"https://static001.geekbang.org/account/avatar/00/21/e4/b4/889954ca.jpg","comment_is_top":false,"comment_ctime":1693123032,"is_pvip":false,"replies":[{"id":139138,"content":"åœ¨JVMä¸­ï¼ŒSlotï¼ˆæ’æ§½ï¼‰æ˜¯ç”¨æ¥å­˜å‚¨å±€éƒ¨å˜é‡çš„æ•°æ®ç»“æ„ã€‚å½“ä¸€ä¸ªæ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼ŒJVMä¼šåœ¨æ ˆå¸§ä¸­ä¸ºè¿™ä¸ªæ–¹æ³•åˆ†é…ä¸€ä¸ªå±€éƒ¨å˜é‡è¡¨ï¼Œä»¥å­˜æ”¾è¯¥æ–¹æ³•çš„æ‰€æœ‰å±€éƒ¨å˜é‡ã€‚è€Œæ¯ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œåœ¨è¿™ä¸ªå±€éƒ¨å˜é‡è¡¨ä¸­å°±å ç”¨ä¸€ä¸ªæˆ–è€…å¤šä¸ªSlotã€‚æ‰€ä»¥ï¼Œå¯¹äºä½ æåˆ°çš„æƒ…å†µï¼Œå˜é‡açš„å€¼2ä¼šè¢«ä¿å­˜åœ¨Slotä¸­ï¼Œè€Œå˜é‡aæœ¬èº«ï¼Œä¹Ÿå°±æ˜¯å˜é‡åï¼Œä¸ä¼šå­˜å‚¨åœ¨Slotä¸­ã€‚åœ¨Javaä¸­ï¼Œå˜é‡ååªæ˜¯åœ¨ç¼–è¯‘é˜¶æ®µå­˜åœ¨ï¼Œç”¨æ¥å¸®åŠ©å¼€å‘è€…ç†è§£å’Œæ“ä½œæ•°æ®ã€‚ä¸€æ—¦ç¼–è¯‘ç»“æŸï¼Œå˜é‡åå°±ä¸å†éœ€è¦äº†ï¼Œå› ä¸ºJVMåœ¨è¿è¡Œæ—¶ï¼Œåªå…³å¿ƒæ•°æ®ï¼Œè€Œä¸å…³å¿ƒè¿™ä¸ªæ•°æ®æ˜¯é€šè¿‡ä»€ä¹ˆå˜é‡åå¾—åˆ°çš„ã€‚æ‰€ä»¥è¯´ï¼Œå˜é‡aæœ¬èº«ä¼šåœ¨ç¼–è¯‘ç»“æŸåè¢«ä¸¢å¼ƒï¼Œåªæœ‰å®ƒçš„å€¼2ä¼šè¢«ä¿å­˜åœ¨Slotä¸­ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1366588,"ctime":1696515831,"ip_address":"åŒ—äº¬","comment_id":380161,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100613601,"comment_content":"è€å¸ˆè¯·æ•™ä¸€ä¸ªé—®é¢˜ï¼ŒSlotåªä¿å­˜å±€éƒ¨å˜é‡çš„å€¼å—ï¼Œæ¯”å¦‚a=2ï¼Œslotä¸­ä¿å­˜çš„æ˜¯2è¿™ä¸ªæ•°æ®å€¼ï¼Œé‚£aè¿™ä¸ªå˜é‡è¢«ä¿å­˜åœ¨å“ªé‡Œå‘¢ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1366588,"avatar":"https://static001.geekbang.org/account/avatar/00/14/da/3c/6ca50139.jpg","nickname":"Arthur king å¾®ä¿¡è¶…ç´šæœƒå“¡","note":"","ucode":"79637F55F0ED85","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":629022,"discussion_content":"åœ¨JVMä¸­ï¼ŒSlotï¼ˆæ’æ§½ï¼‰æ˜¯ç”¨æ¥å­˜å‚¨å±€éƒ¨å˜é‡çš„æ•°æ®ç»“æ„ã€‚å½“ä¸€ä¸ªæ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼ŒJVMä¼šåœ¨æ ˆå¸§ä¸­ä¸ºè¿™ä¸ªæ–¹æ³•åˆ†é…ä¸€ä¸ªå±€éƒ¨å˜é‡è¡¨ï¼Œä»¥å­˜æ”¾è¯¥æ–¹æ³•çš„æ‰€æœ‰å±€éƒ¨å˜é‡ã€‚è€Œæ¯ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œåœ¨è¿™ä¸ªå±€éƒ¨å˜é‡è¡¨ä¸­å°±å ç”¨ä¸€ä¸ªæˆ–è€…å¤šä¸ªSlotã€‚æ‰€ä»¥ï¼Œå¯¹äºä½ æåˆ°çš„æƒ…å†µï¼Œå˜é‡açš„å€¼2ä¼šè¢«ä¿å­˜åœ¨Slotä¸­ï¼Œè€Œå˜é‡aæœ¬èº«ï¼Œä¹Ÿå°±æ˜¯å˜é‡åï¼Œä¸ä¼šå­˜å‚¨åœ¨Slotä¸­ã€‚åœ¨Javaä¸­ï¼Œå˜é‡ååªæ˜¯åœ¨ç¼–è¯‘é˜¶æ®µå­˜åœ¨ï¼Œç”¨æ¥å¸®åŠ©å¼€å‘è€…ç†è§£å’Œæ“ä½œæ•°æ®ã€‚ä¸€æ—¦ç¼–è¯‘ç»“æŸï¼Œå˜é‡åå°±ä¸å†éœ€è¦äº†ï¼Œå› ä¸ºJVMåœ¨è¿è¡Œæ—¶ï¼Œåªå…³å¿ƒæ•°æ®ï¼Œè€Œä¸å…³å¿ƒè¿™ä¸ªæ•°æ®æ˜¯é€šè¿‡ä»€ä¹ˆå˜é‡åå¾—åˆ°çš„ã€‚æ‰€ä»¥è¯´ï¼Œå˜é‡aæœ¬èº«ä¼šåœ¨ç¼–è¯‘ç»“æŸåè¢«ä¸¢å¼ƒï¼Œåªæœ‰å®ƒçš„å€¼2ä¼šè¢«ä¿å­˜åœ¨Slotä¸­ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1696515831,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":381453,"user_name":"è®°å¾—æ™šç¡","can_delete":false,"product_type":"c1","uid":3720824,"ip_address":"åŒ—äº¬","ucode":"C3DA9EDA2DBDB7","user_header":"https://static001.geekbang.org/account/avatar/00/38/c6/78/dc201b84.jpg","comment_is_top":false,"comment_ctime":1695220895,"is_pvip":false,"replies":[{"id":139130,"content":"åšæŒå­¦ä¹ å°±ä¼šè§‰å¾—è¶Šæ¥è¶Šç®€å•ï¼ŒåŠ æ²¹ğŸ’ªğŸ»ğŸ’ªğŸ»ğŸ’ªğŸ»ğŸ’ªğŸ»","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1366588,"ctime":1696514487,"ip_address":"åŒ—äº¬","comment_id":381453,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100613601,"comment_content":"å¥½éš¾å•ŠğŸ˜­ğŸ˜­ğŸ˜­","like_count":2,"discussions":[{"author":{"id":1366588,"avatar":"https://static001.geekbang.org/account/avatar/00/14/da/3c/6ca50139.jpg","nickname":"Arthur king å¾®ä¿¡è¶…ç´šæœƒå“¡","note":"","ucode":"79637F55F0ED85","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":629013,"discussion_content":"åšæŒå­¦ä¹ å°±ä¼šè§‰å¾—è¶Šæ¥è¶Šç®€å•ï¼ŒåŠ æ²¹ğŸ’ªğŸ»ğŸ’ªğŸ»ğŸ’ªğŸ»ğŸ’ªğŸ»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1696514488,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1270449,"avatar":"https://static001.geekbang.org/account/avatar/00/13/62/b1/3d1fc497.jpg","nickname":"ä¸‰ä¸‡æ£µæ ‘","note":"","ucode":"EB361BB4E09AE5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":640852,"discussion_content":"æ²¡å•¥åŠæ³•å‘€ï¼Œå­¦èµ·æ¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1711940606,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":380830,"user_name":"funnyx","can_delete":false,"product_type":"c1","uid":1115049,"ip_address":"æµ™æ±Ÿ","ucode":"A9B8E27919AE4D","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoZqcVJzUjfu5noOW6OPAh6ibrBicibLmicibnVyVLHdf7GwAzf2th5s1oQ9pUbLpmq2mlVBauUZn8QUnw/132","comment_is_top":false,"comment_ctime":1694250963,"is_pvip":false,"replies":[{"id":139126,"content":"Javaæä¾›äº†ä¸€ç§æœºåˆ¶ï¼Œå«åšåŠ¨æ€ç±»åŠ è½½ï¼Œå¯ä»¥åœ¨JVMè¿è¡Œæ—¶å°†æ–°çš„Javaç±»(.classæ–‡ä»¶)æ·»åŠ åˆ°æ­£åœ¨è¿è¡Œçš„åº”ç”¨ç¨‹åºä¸­","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1366588,"ctime":1696514002,"ip_address":"åŒ—äº¬","comment_id":380830,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100613601,"comment_content":"è¯·é—®è€å¸ˆï¼Œæœ‰æ²¡æœ‰ä»€ä¹ˆæ–¹æ³•åœ¨jvmè¿è¡Œæ—¶ï¼Œå‘å…¶ä¸­æ·»åŠ classæ–‡ä»¶è®©å…¶åŠ è½½ã€‚","like_count":1,"discussions":[{"author":{"id":1366588,"avatar":"https://static001.geekbang.org/account/avatar/00/14/da/3c/6ca50139.jpg","nickname":"Arthur king å¾®ä¿¡è¶…ç´šæœƒå“¡","note":"","ucode":"79637F55F0ED85","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":629007,"discussion_content":"Javaæä¾›äº†ä¸€ç§æœºåˆ¶ï¼Œå«åšåŠ¨æ€ç±»åŠ è½½ï¼Œå¯ä»¥åœ¨JVMè¿è¡Œæ—¶å°†æ–°çš„Javaç±»(.classæ–‡ä»¶)æ·»åŠ åˆ°æ­£åœ¨è¿è¡Œçš„åº”ç”¨ç¨‹åºä¸­","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1696514002,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":380080,"user_name":"Johar","can_delete":false,"product_type":"c1","uid":1101969,"ip_address":"é‡åº†","ucode":"834136A6F64CDC","user_header":"https://static001.geekbang.org/account/avatar/00/10/d0/91/89123507.jpg","comment_is_top":false,"comment_ctime":1692934534,"is_pvip":false,"replies":[{"id":138446,"content":"å½“è¿›è¡ŒCPUæ—¶é—´ç‰‡åˆ‡æ¢æ—¶ï¼ŒJavaè™šæ‹Ÿæœºéœ€è¦æ¢å¤æœ¬åœ°æ–¹æ³•çš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œç¡®ä¿ä»åˆ‡æ¢ä¸­æ¢å¤è¿‡æ¥åèƒ½å¤Ÿç»§ç»­æ‰§è¡Œæœ¬åœ°æ–¹æ³•ã€‚ä¸ºäº†å®ç°ä¸Šä¸‹æ–‡çš„æ¢å¤ï¼ŒJavaè™šæ‹Ÿæœºä¼šåˆ©ç”¨æ“ä½œç³»ç»Ÿçš„è°ƒåº¦æœºåˆ¶ï¼Œå°†æœ¬åœ°æ–¹æ³•çš„æ‰§è¡ŒçŠ¶æ€ä¿å­˜åœ¨ä¸æœ¬åœ°æ–¹æ³•ç›¸å¯¹åº”çš„çº¿ç¨‹æ ˆå¸§ä¸­ã€‚å½“çº¿ç¨‹è¢«é‡æ–°è°ƒåº¦æ‰§è¡Œæ—¶ï¼Œä¼šä»ä¿å­˜çš„æ ˆå¸§ä¸­æ¢å¤æœ¬åœ°æ–¹æ³•çš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œç»§ç»­æ‰§è¡Œæœ¬åœ°æ–¹æ³•ã€‚\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç”±äºæœ¬åœ°æ–¹æ³•çš„æ‰§è¡Œè¿‡ç¨‹æ˜¯åœ¨æœ¬åœ°åº“ä¸­è¿›è¡Œçš„ï¼Œå…·ä½“çš„ä¸Šä¸‹æ–‡æ¢å¤è¿‡ç¨‹æ˜¯ä¸æ“ä½œç³»ç»Ÿå’Œæœ¬åœ°åº“ç›¸å…³çš„ï¼Œå¹¶ä¸”å¯èƒ½å› ä¸åŒçš„æ“ä½œç³»ç»Ÿæˆ–æœ¬åœ°åº“è€Œæœ‰æ‰€ä¸åŒã€‚ Javaè™šæ‹Ÿæœºåªè´Ÿè´£ååŠ©æ“ä½œç³»ç»Ÿè¿›è¡Œæœ¬åœ°æ–¹æ³•ä¸Javaçº¿ç¨‹çš„åˆ‡æ¢ï¼Œå¹¶ç¡®ä¿ä¸Šä¸‹æ–‡çš„æ­£ç¡®æ¢å¤ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1366588,"ctime":1693117556,"ip_address":"åŒ—äº¬","comment_id":380080,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100613601,"comment_content":"ç¨‹åºè®¡æ•°å™¨æ˜¯è®°å½•ç¨‹åºæ­£åœ¨æ‰§è¡Œå­—èŠ‚ç çš„æŒ‡ä»¤åœ°å€ï¼Œä½†æ˜¯æ‰§è¡Œæœ¬åœ°æ–¹æ³•ï¼Œä¸ºç©ºã€‚\nè¯·é—®ä¸€ä¸‹è€å¸ˆï¼Œæ‰§è¡Œæœ¬åœ°æ–¹ï¼Œç¨‹åºè®¡æ•°å™¨è®°å½•çš„æŒ‡ä»¤åœ°å€ä¸ºç©ºï¼Œåœ¨cpuæ—¶é—´ç‰‡åˆ‡æ¢æ—¶ï¼Œæ€ä¹ˆå†æ¬¡æ¢å¤æœ¬åœ°æ–¹æ³•çš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1366588,"avatar":"https://static001.geekbang.org/account/avatar/00/14/da/3c/6ca50139.jpg","nickname":"Arthur king å¾®ä¿¡è¶…ç´šæœƒå“¡","note":"","ucode":"79637F55F0ED85","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":626561,"discussion_content":"å½“è¿›è¡ŒCPUæ—¶é—´ç‰‡åˆ‡æ¢æ—¶ï¼ŒJavaè™šæ‹Ÿæœºéœ€è¦æ¢å¤æœ¬åœ°æ–¹æ³•çš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œç¡®ä¿ä»åˆ‡æ¢ä¸­æ¢å¤è¿‡æ¥åèƒ½å¤Ÿç»§ç»­æ‰§è¡Œæœ¬åœ°æ–¹æ³•ã€‚ä¸ºäº†å®ç°ä¸Šä¸‹æ–‡çš„æ¢å¤ï¼ŒJavaè™šæ‹Ÿæœºä¼šåˆ©ç”¨æ“ä½œç³»ç»Ÿçš„è°ƒåº¦æœºåˆ¶ï¼Œå°†æœ¬åœ°æ–¹æ³•çš„æ‰§è¡ŒçŠ¶æ€ä¿å­˜åœ¨ä¸æœ¬åœ°æ–¹æ³•ç›¸å¯¹åº”çš„çº¿ç¨‹æ ˆå¸§ä¸­ã€‚å½“çº¿ç¨‹è¢«é‡æ–°è°ƒåº¦æ‰§è¡Œæ—¶ï¼Œä¼šä»ä¿å­˜çš„æ ˆå¸§ä¸­æ¢å¤æœ¬åœ°æ–¹æ³•çš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œç»§ç»­æ‰§è¡Œæœ¬åœ°æ–¹æ³•ã€‚\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç”±äºæœ¬åœ°æ–¹æ³•çš„æ‰§è¡Œè¿‡ç¨‹æ˜¯åœ¨æœ¬åœ°åº“ä¸­è¿›è¡Œçš„ï¼Œå…·ä½“çš„ä¸Šä¸‹æ–‡æ¢å¤è¿‡ç¨‹æ˜¯ä¸æ“ä½œç³»ç»Ÿå’Œæœ¬åœ°åº“ç›¸å…³çš„ï¼Œå¹¶ä¸”å¯èƒ½å› ä¸åŒçš„æ“ä½œç³»ç»Ÿæˆ–æœ¬åœ°åº“è€Œæœ‰æ‰€ä¸åŒã€‚ Javaè™šæ‹Ÿæœºåªè´Ÿè´£ååŠ©æ“ä½œç³»ç»Ÿè¿›è¡Œæœ¬åœ°æ–¹æ³•ä¸Javaçº¿ç¨‹çš„åˆ‡æ¢ï¼Œå¹¶ç¡®ä¿ä¸Šä¸‹æ–‡çš„æ­£ç¡®æ¢å¤ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1693117556,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":380077,"user_name":"Calvin","can_delete":false,"product_type":"c1","uid":1603004,"ip_address":"å¹¿ä¸œ","ucode":"0EEF5B207623B5","user_header":"https://static001.geekbang.org/account/avatar/00/18/75/bc/89d88775.jpg","comment_is_top":false,"comment_ctime":1692930336,"is_pvip":false,"replies":[{"id":138439,"content":"æˆ‘åœ¨åé¢å‡ èŠ‚é©¬ä¸Šå°±å¥½è®²è¿™ä¸ªäº†ï¼Œåº”è¯¥ä¸‹å‘¨å°±èƒ½çœ‹åˆ°äº†ï¼Œä½ å¯ä»¥å…ˆçœ‹ä¸‹ï¼Œæœ‰é—®é¢˜æˆ‘ä»¬éšæ—¶æ²Ÿé€š","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1366588,"ctime":1693116583,"ip_address":"åŒ—äº¬","comment_id":380077,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100613601,"comment_content":"å¤§ä½¬å¥½ï¼š\nè¯·é—®ä¸‹â€œè¿è¡Œæ—¶å¸¸é‡æ± â€åŒ…æ‹¬å“ªäº›ä¸œè¥¿ï¼Œåœ¨è¿è¡Œæ—¶æ•°æ®åŒºçš„å“ªä¸ªä½å‘¢ç½®ï¼ˆæœ¬æ–‡å¥½åƒæ²¡è¯´ï¼Ÿï¼‰ï¼Ÿ\nä¸â€œå­—ç¬¦ä¸²å¸¸é‡æ± â€æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œä¸ºä»€ä¹ˆè¿˜éœ€è¦ç‰¹æ„å†åˆ†å‡ºæ¥å¤šä¸€ä¸ªå¸¸é‡æ± å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1366588,"avatar":"https://static001.geekbang.org/account/avatar/00/14/da/3c/6ca50139.jpg","nickname":"Arthur king å¾®ä¿¡è¶…ç´šæœƒå“¡","note":"","ucode":"79637F55F0ED85","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":626553,"discussion_content":"æˆ‘åœ¨åé¢å‡ èŠ‚é©¬ä¸Šå°±å¥½è®²è¿™ä¸ªäº†ï¼Œåº”è¯¥ä¸‹å‘¨å°±èƒ½çœ‹åˆ°äº†ï¼Œä½ å¯ä»¥å…ˆçœ‹ä¸‹ï¼Œæœ‰é—®é¢˜æˆ‘ä»¬éšæ—¶æ²Ÿé€š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1693116583,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":381190,"user_name":"Geek1254","can_delete":false,"product_type":"c1","uid":2028941,"ip_address":"åŒ—äº¬","ucode":"BC2F7756A0676D","user_header":"","comment_is_top":false,"comment_ctime":1694768479,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100613601,"comment_content":"çœ‹äº†ä¸¤èŠ‚ï¼Œæ„Ÿè§‰è®²çš„ä¸œè¥¿å¤ªæµ…ï¼Œä¸é€‚åˆå·¥ä½œå¤šå¹´çš„è€é¸Ÿã€‚è¦ç¡¬å¹²è´§","like_count":5},{"had_liked":false,"id":380171,"user_name":"ä¸´é£","can_delete":false,"product_type":"c1","uid":1145430,"ip_address":"å¹¿ä¸œ","ucode":"59A7F3DDD94D76","user_header":"https://static001.geekbang.org/account/avatar/00/11/7a/56/29877cb9.jpg","comment_is_top":false,"comment_ctime":1693141577,"is_pvip":true,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100613601,"comment_content":"1ã€JVM ä¸­æ–¹æ³•æ‰§è¡Œçš„å†…å­˜æ¨¡å‹å¯¹åº”çš„æ˜¯è¿è¡Œæ—¶æ•°æ®åŒºçš„é‚£ä¸ªåŒºåŸŸï¼Ÿ\nè¿è¡Œæ—¶æ•°æ®åŒºåŒ…æ‹¬ç¨‹åºè®¡æ•°å™¨ã€è™šæ‹Ÿæœºæ ˆã€æœ¬åœ°æ–¹æ³•æ ˆã€æ–¹æ³•åŒºã€å †åŒºã€‚ä¸€ä¸ªæ‰§è¡Œæ–¹æ³•å¯¹åº”è™šæ‹Ÿæœºæ ˆçš„ä¸€ä¸ªæ ˆå¸§ï¼Œæ ˆå¸§ä¼šä¿å­˜å±€éƒ¨å˜é‡è¡¨ã€æ“ä½œæ•°æ ˆã€åŠ¨æ€é“¾æ¥ã€è¿”å›åœ°å€ç­‰ã€‚\n\n2ã€è¿™èŠ‚è¯¾ä½ å­¦åˆ°äº†å“ªäº›æå‡ç¨‹åºæ€§èƒ½çš„æŠ€å·§ï¼Ÿ\nä¸€æ˜¯ä¸è¦å®šä¹‰å¤šä½™çš„å˜é‡ï¼›äºŒæ˜¯æ–¹æ³•ä¸è¦è¿‡é•¿ã€‚è¿™ä¸¤ä¸ªéƒ½æ˜¯ç¼–ç¨‹è§„èŒƒè¦æ±‚çš„ï¼Œä¹‹å‰ä»¥ä¸ºä»…ä»…åªæ˜¯ä¸ºäº†å¯è¯»æ€§ï¼Œè¿˜æ˜¯ä¸ºäº†é¿å…å±€éƒ¨å˜é‡è¡¨ç©ºé—´çš„æµªè´¹ã€‚","like_count":1},{"had_liked":false,"id":387903,"user_name":"Geek_0e0559","can_delete":false,"product_type":"c1","uid":2570732,"ip_address":"é»‘é¾™æ±Ÿ","ucode":"9CEE48B4E2BE85","user_header":"","comment_is_top":false,"comment_ctime":1708906855,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100613601,"comment_content":"é’ˆå¯¹æ¯ä¸ªæ ˆå¸§ï¼Œæˆ‘ä»¬è¿˜éœ€è¦æä¾›ä¸€ä¸ªå¼•ç”¨ï¼Œä»¥æ­¤åœ¨è¿è¡Œæ—¶å¸¸é‡æ± å†…å¯ä»¥è¯†åˆ«å‡ºå¯¹åº”çš„æ–¹æ³•ï¼Œä¸”åœ¨æ–¹æ³•è¢«è°ƒç”¨çš„è¿‡ç¨‹ä¸­èƒ½å®ç°åŠ¨æ€é“¾æ¥ã€‚-- è¿™å¥è¯æ²¡çœ‹æ˜ç™½","like_count":0},{"had_liked":false,"id":380113,"user_name":"peter","can_delete":false,"product_type":"c1","uid":1058183,"ip_address":"æ²³åŒ—","ucode":"261C3FC001DE2D","user_header":"https://static001.geekbang.org/account/avatar/00/10/25/87/f3a69d1b.jpg","comment_is_top":false,"comment_ctime":1693012518,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":2,"product_id":100613601,"comment_content":"è¯·æ•™è€å¸ˆå‡ ä¸ªé—®é¢˜ï¼š\nQ1ï¼šåŠ¨æ€é“¾æ¥éƒ¨åˆ†çš„methodAæ–¹æ³•çš„ç–‘é—®ï¼š\n--- æ­¤å‡½æ•°æ²¡æœ‰å‚æ•°ï¼Œä¸ºä»€ä¹ˆargs_sizeæ˜¯1ï¼Ÿ\n--- æ­¤å‡½æ•°æ²¡æœ‰å±€éƒ¨å˜é‡ï¼Œä¸ºä»€ä¹ˆlocalsæ˜¯1ï¼Ÿ\n--- stack=2æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ\nQ2ï¼šsun hotpotå°†ä¸¤ä¸ªæ ˆåˆå¹¶ï¼Œè™šæ‹Ÿæœºæ ˆæ˜¯æ‰§è¡ŒJavaä»£ç çš„ï¼Œé‚£ä¹ˆæœ¬åœ°æ–¹æ³•è¿˜èƒ½æ‰§è¡ŒCæˆ–C++ä»£ç å—ï¼Ÿ\nQ3ï¼šæœ¬è¯¾æ‰€è¯´çš„â€œåŠ¨æ€é“¾æ¥â€ï¼Œä¸»è¦æ˜¯æŒ‡â€œåŠ¨æ€ç»‘å®šâ€ï¼Œå³å¤šæ€ï¼Œä¸æ˜¯æŒ‡â€œåŠ¨æ€é“¾æ¥åº“â€ä¸€ç±»çš„å†…å®¹ï¼Œå¯¹å—ï¼Ÿ \nQ4ï¼šJavaç¨‹åºå¯ä»¥ä½¿ç”¨Cæˆ–C++çš„DLLå—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1044639,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f0/9f/46d8f49a.jpg","nickname":"åä¼¦","note":"","ucode":"A4F27CC1C38D3B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":627636,"discussion_content":"åˆå¹¶è¿™ä¸¤ç§æ ˆå¹¶ä¸æ„å‘³ç€HotSpotä¸èƒ½æ‰§è¡Œæœ¬åœ°ï¼ˆCæˆ–C++ï¼‰ä»£ç ã€‚å®é™…ä¸Šï¼ŒJavaé€šè¿‡Javaæœ¬åœ°æ¥å£ï¼ˆJNIï¼ŒJava Native Interfaceï¼‰å¯ä»¥ä¸æœ¬åœ°ä»£ç ï¼ˆé€šå¸¸æ˜¯Cæˆ–C++ä»£ç ï¼‰äº¤äº’ã€‚å½“Javaç¨‹åºè°ƒç”¨ä¸€ä¸ªæœ¬åœ°æ–¹æ³•æ—¶ï¼Œæ§åˆ¶æƒä¼šè½¬ç§»åˆ°æœ¬åœ°æ–¹æ³•æ ˆä¸­çš„ä¸€ä¸ªå¸§ï¼ˆåœ¨HotSpotä¸­ï¼Œè¿™ä¸Javaè™šæ‹Ÿæœºæ ˆæ˜¯åŒä¸€ä¸ªæ ˆï¼‰ã€‚\n\nåœ¨è¿™ä¸ªæœ¬åœ°æ–¹æ³•æ ˆå¸§ä¸­ï¼Œå¯èƒ½ä¼šæœ‰ä¸€ä¸ªæŒ‡å‘Cæˆ–C++å‡½æ•°çš„æŒ‡é’ˆã€‚æ‰§è¡Œè¿™ä¸ªå‡½æ•°æ—¶ï¼Œå®é™…ä¸Šæ˜¯åœ¨æœ¬åœ°æ–¹æ³•æ ˆä¸­è¿›è¡Œçš„ï¼Œå°½ç®¡è¿™ä¸ªæ ˆå’ŒJavaè™šæ‹Ÿæœºæ ˆåœ¨HotSpotä¸­æ˜¯åˆå¹¶çš„ã€‚è¿™æ ·ï¼Œæœ¬åœ°ä»£ç å°±å¯ä»¥ä¸Javaä»£ç å…±äº«æ•°æ®ã€çŠ¶æ€å’Œæ§åˆ¶æµï¼Œå°½ç®¡å®ƒä»¬æ˜¯ç”¨ä¸åŒçš„ç¼–ç¨‹è¯­è¨€ç¼–å†™çš„ã€‚\n\nè™½ç„¶HotSpotæŠŠJavaè™šæ‹Ÿæœºæ ˆå’Œæœ¬åœ°æ–¹æ³•æ ˆåˆå¹¶ä¸ºä¸€ä¸ªï¼Œä½†è¿™å¹¶ä¸å¦¨ç¢å®ƒæ‰§è¡Œæœ¬åœ°Cæˆ–C++ä»£ç ã€‚è¿™ä¸»è¦æ˜¯é€šè¿‡JNIæ¥å®ç°çš„ï¼ŒJNIå…è®¸Javaä»£ç å’Œæœ¬åœ°ä»£ç äº’ç›¸è°ƒç”¨å’Œæ•°æ®å…±äº«ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1694403190,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}