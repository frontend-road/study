{"id":109716,"title":"25 | 网关和BFF是如何演化出来的（下）","content":"<ul>\n<li>\n<p>代码：<a href=\"https://gitee.com/geektime-geekbang/staffjoy\">https://gitee.com/geektime-geekbang/staffjoy</a></p>\n</li>\n<li>\n<p>课件：<a href=\"https://pan.baidu.com/s/1Q7eP3yZ1Vm8J2nhle5RzTQ\">https://pan.baidu.com/s/1Q7eP3yZ1Vm8J2nhle5RzTQ</a> 提取码: 1aeh</p>\n</li>\n</ul>","comments":[{"had_liked":false,"id":116682,"user_name":"王德宝","can_delete":false,"product_type":"c3","uid":1001796,"ip_address":"","ucode":"966F2B2BC2BD19","user_header":"https://static001.geekbang.org/account/avatar/00/0f/49/44/dc73845c.jpg","comment_is_top":false,"comment_ctime":1563890032,"is_pvip":false,"replies":[{"id":42816,"content":"前后分离并不是说就没有Web应用了，因为有遗留应用的问题。很多互联网公司都是既有传统Web应用，同时又有新的前后分离应用，所以这些公司一般既有API网关，也有面向遗留Web应用的反向代理，也有一些公司完全是前后分离的，没有传统Web应用。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1563972261,"ip_address":"","comment_id":116682,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100031401,"comment_content":"web应用网关的意义何在？这里不是前后端分离吧？","like_count":4,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459638,"discussion_content":"前后分离并不是说就没有Web应用了，因为有遗留应用的问题。很多互联网公司都是既有传统Web应用，同时又有新的前后分离应用，所以这些公司一般既有API网关，也有面向遗留Web应用的反向代理，也有一些公司完全是前后分离的，没有传统Web应用。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563972261,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1024263,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a1/07/abb7bfe3.jpg","nickname":"杨智晓 ✟","note":"","ucode":"E3B56F4A38F63D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2793,"discussion_content":"服务聚合，降低耦合","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563937707,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":124504,"user_name":"🐛","can_delete":false,"product_type":"c3","uid":1135831,"ip_address":"","ucode":"CFFC1FEBFADBAB","user_header":"https://static001.geekbang.org/account/avatar/00/11/54/d7/7ab8f58a.jpg","comment_is_top":false,"comment_ctime":1565913847,"is_pvip":false,"replies":[{"id":45803,"content":"课程中讲了，BFF的核心作用是聚合裁剪，所以通常也叫聚合层。\n\n聚合：将多个后台基础服务聚合成一个服务，例如首页需要同时展示分类和产品，那么BFF聚合服务就要聚合后台的分类服务和产品服务，提供一个统一的聚合后的服务给前端页面展示。\n\n裁剪：后台提供的基础服务一般比较通用(或者说字段比较多)，那么针对不同的用户体验(PC，手机，PAD)，BFF聚合服务就要对后台服务进行适当的裁剪，比如手机屏幕小，需要多裁剪掉一些字段，而PC屏幕大，就少裁剪掉一些字段。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1565963391,"ip_address":"","comment_id":124504,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100031401,"comment_content":"老师，BFF层可不可以理解为，为不同无线应用做数据处理的一个服务？","like_count":2,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463206,"discussion_content":"课程中讲了，BFF的核心作用是聚合裁剪，所以通常也叫聚合层。\n\n聚合：将多个后台基础服务聚合成一个服务，例如首页需要同时展示分类和产品，那么BFF聚合服务就要聚合后台的分类服务和产品服务，提供一个统一的聚合后的服务给前端页面展示。\n\n裁剪：后台提供的基础服务一般比较通用(或者说字段比较多)，那么针对不同的用户体验(PC，手机，PAD)，BFF聚合服务就要对后台服务进行适当的裁剪，比如手机屏幕小，需要多裁剪掉一些字段，而PC屏幕大，就少裁剪掉一些字段。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565963391,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":119764,"user_name":"小蛋壳","can_delete":false,"product_type":"c3","uid":1101602,"ip_address":"","ucode":"8344163BF7722E","user_header":"https://static001.geekbang.org/account/avatar/00/10/cf/22/5a483755.jpg","comment_is_top":false,"comment_ctime":1564675842,"is_pvip":false,"replies":[{"id":44055,"content":"client可以不经过BFF直接调用内部微服务，这个主要看企业微服务复杂度和规模，规模小，前端应用形态不复杂的话，未必需要BFF层。如果规模大，前端应用形态很多，就要考虑独立BFF层，这样架构职责更清晰分明，系统更加灵活易于扩展。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1564748569,"ip_address":"","comment_id":119764,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100031401,"comment_content":"老师好，client可以直接调用微服务吗？还是说必须要经过bff转发或者聚合。 如果需要bff转发，那这个bff要实现的就太多了，而且和微服务接口大部分重合。\n\n又或者一部分服务调用bff，一部分直接调用微服务。","like_count":2,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461063,"discussion_content":"client可以不经过BFF直接调用内部微服务，这个主要看企业微服务复杂度和规模，规模小，前端应用形态不复杂的话，未必需要BFF层。如果规模大，前端应用形态很多，就要考虑独立BFF层，这样架构职责更清晰分明，系统更加灵活易于扩展。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564748569,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":246874,"user_name":"苗","can_delete":false,"product_type":"c3","uid":1088710,"ip_address":"","ucode":"5ECCC6C855E541","user_header":"https://static001.geekbang.org/account/avatar/00/10/9c/c6/05a6798f.jpg","comment_is_top":false,"comment_ctime":1599499014,"is_pvip":false,"replies":[{"id":90821,"content":"对，类似spring mvc这种采用服务器端模版引擎渲染的。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1599658051,"ip_address":"","comment_id":246874,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100031401,"comment_content":"老师，服务端web应用指的是传统的springmvc这种前后端一体的应用吗？","like_count":1,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":505250,"discussion_content":"对，类似spring mvc这种采用服务器端模版引擎渲染的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599658051,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":126857,"user_name":"王杰","can_delete":false,"product_type":"c3","uid":1106506,"ip_address":"","ucode":"4E3B2A0F1C75F6","user_header":"https://static001.geekbang.org/account/avatar/00/10/e2/4a/3f07e217.jpg","comment_is_top":false,"comment_ctime":1566492081,"is_pvip":false,"replies":[{"id":47028,"content":"nginx可以作为网关用，例如kong可以认为是扩展版的nginx，专门针对微服务api场景；nginx的功能也可以由现代云原生网关(或称反向代理)代替，例如traefik和envoy等。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1566564725,"ip_address":"","comment_id":126857,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100031401,"comment_content":"网关可以替代NGINX？","like_count":1,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464206,"discussion_content":"nginx可以作为网关用，例如kong可以认为是扩展版的nginx，专门针对微服务api场景；nginx的功能也可以由现代云原生网关(或称反向代理)代替，例如traefik和envoy等。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566564725,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":124503,"user_name":"🐛","can_delete":false,"product_type":"c3","uid":1135831,"ip_address":"","ucode":"CFFC1FEBFADBAB","user_header":"https://static001.geekbang.org/account/avatar/00/11/54/d7/7ab8f58a.jpg","comment_is_top":false,"comment_ctime":1565913804,"is_pvip":false,"replies":[{"id":45802,"content":"不是一个大集群，而是分集群部署，比如h5网关单独一个集群，无线网关单独一个集群，因为针对不同的场景，网关的功能和配置也会有不同。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1565963054,"ip_address":"","comment_id":124503,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100031401,"comment_content":"老师，您好，v4里面的网关层是把H5网关+无线网关等等，每种网关一个节点放在一起作为一个集群了吗？还是说每种网关部署多个节点然后放在一起形成一个大集群？","like_count":1,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463205,"discussion_content":"不是一个大集群，而是分集群部署，比如h5网关单独一个集群，无线网关单独一个集群，因为针对不同的场景，网关的功能和配置也会有不同。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565963054,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":119735,"user_name":"Geek_9695b4","can_delete":false,"product_type":"c3","uid":1134153,"ip_address":"","ucode":"E196700C069A9C","user_header":"https://static001.geekbang.org/account/avatar/00/11/4e/49/20a4b82d.jpg","comment_is_top":false,"comment_ctime":1564668323,"is_pvip":false,"replies":[{"id":43928,"content":"BFF层和微服务层的这种划分是逻辑性的，不是物理性的。公司可以根据业务规模灵活划分，比如早期并不严格区分，BFF层和微服务合并在一起，等到了一定规模再考虑区分开，让架构更加清晰规范。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1564675033,"ip_address":"","comment_id":119735,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100031401,"comment_content":"请问下，BFF层和微服务层是否可以合并，我们公司现在业务代码都写在微服务层的。","like_count":1,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461046,"discussion_content":"BFF层和微服务层的这种划分是逻辑性的，不是物理性的。公司可以根据业务规模灵活划分，比如早期并不严格区分，BFF层和微服务合并在一起，等到了一定规模再考虑区分开，让架构更加清晰规范。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564675033,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1101602,"avatar":"https://static001.geekbang.org/account/avatar/00/10/cf/22/5a483755.jpg","nickname":"小蛋壳","note":"","ucode":"8344163BF7722E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3668,"discussion_content":"老师好，client可以直接调用微服务吗？还是说必须要经过bff转发或者聚合。 如果需要bff转发，那这个bff要实现的就太多了，而且和微服务接口大部分重合。\n\n又或者一部分服务调用bff，一部分直接调用微服务。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564675783,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":146856,"user_name":"ZOU志伟","can_delete":false,"product_type":"c3","uid":1029179,"ip_address":"","ucode":"439779871CC992","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b4/3b/a1f7e3a4.jpg","comment_is_top":false,"comment_ctime":1572677437,"is_pvip":false,"replies":[{"id":56949,"content":"你指的是哪一种后台管理？如果是业务的后台管理，一般看业务需求，比如电商后台管理，这个肯定不是每个服务一个后台。还有像Spring Boot Admin这种管理界面，这个也可以只部署一个，它可以监控其它的Spring Boot应用和实例。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1572919640,"ip_address":"","comment_id":146856,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100031401,"comment_content":"后台管理是一个服务一个后台吗？","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":473033,"discussion_content":"你指的是哪一种后台管理？如果是业务的后台管理，一般看业务需求，比如电商后台管理，这个肯定不是每个服务一个后台。还有像Spring Boot Admin这种管理界面，这个也可以只部署一个，它可以监控其它的Spring Boot应用和实例。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572919640,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1029179,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b4/3b/a1f7e3a4.jpg","nickname":"ZOU志伟","note":"","ucode":"439779871CC992","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":46828,"discussion_content":"那前台和后台可以公用一套接口吗？还是另外开发？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573214375,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":124889,"user_name":"LSJ","can_delete":false,"product_type":"c3","uid":1299437,"ip_address":"","ucode":"3CF8A457AC6BA9","user_header":"https://static001.geekbang.org/account/avatar/00/13/d3/ed/8d5420ad.jpg","comment_is_top":false,"comment_ctime":1566009233,"is_pvip":false,"replies":[{"id":45852,"content":"你好，网关和后台服务(包括BFF)的反向路由实现方式有很多，简单的可以静态配地址，也可以引入服务注册中心，比如Eureka等。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1566046875,"ip_address":"","comment_id":124889,"utype":1}],"discussion_count":4,"race_medal":0,"score":2,"product_id":100031401,"comment_content":"老师 在V3和V4的架构图上 网关是直接和BFF层交互的 但是网关的路由功能怎么又会路由到后端的微服务上去呢","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463349,"discussion_content":"你好，网关和后台服务(包括BFF)的反向路由实现方式有很多，简单的可以静态配地址，也可以引入服务注册中心，比如Eureka等。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566046875,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1359193,"avatar":"https://static001.geekbang.org/account/avatar/00/14/bd/59/d95ef2c0.jpg","nickname":"六木","note":"","ucode":"C4698B46C636C0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":403083,"discussion_content":"内部微服务就不需要网关了 加个注册中心 微服务间直连 单独做负载均衡和熔断限流 需要还要加授权认证","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634005211,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1745850,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/a3/ba/75e207c2.jpg","nickname":"心之翥","note":"","ucode":"97F57939215143","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":327722,"discussion_content":"同感觉。微服务一般是通过网关路由的吧？老师v4这个图里bff层到了网关后面，是否网关应该是bff后面？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605926538,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1441812,"avatar":"https://static001.geekbang.org/account/avatar/00/16/00/14/84a976e7.jpg","nickname":"随风","note":"","ucode":"35C0133563EEB1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":258921,"discussion_content":"我也是对这个有疑惑，是不是应该在bff与微服务层之间再加一个网关层?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588740558,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":116627,"user_name":"而立斋","can_delete":false,"product_type":"c3","uid":1087258,"ip_address":"","ucode":"5FED6E9E148195","user_header":"https://static001.geekbang.org/account/avatar/00/10/97/1a/389eab84.jpg","comment_is_top":false,"comment_ctime":1563883217,"is_pvip":false,"replies":[{"id":42632,"content":"谢谢支持！加油！","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1563887405,"ip_address":"","comment_id":116627,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100031401,"comment_content":"老师讲的清晰","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459620,"discussion_content":"谢谢支持！加油！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563887405,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":322125,"user_name":"Lion","can_delete":false,"product_type":"c3","uid":1050411,"ip_address":"","ucode":"21AA6AE4A90789","user_header":"https://static001.geekbang.org/account/avatar/00/10/07/2b/d111e75d.jpg","comment_is_top":false,"comment_ctime":1637198948,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100031401,"comment_content":"您好，老师 ，bff是怎么和后端服务 调用的呢？","like_count":0},{"had_liked":false,"id":188380,"user_name":"钱","can_delete":false,"product_type":"c3","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1584346760,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100031401,"comment_content":"BFF——主要作用聚合、裁剪，针对复杂业务以及前端比较丰富的情况，类似技术中台的角色。\n网关——主要作用请求路由、负载均衡、安全防护、隐藏内部实现细节。","like_count":0}]}