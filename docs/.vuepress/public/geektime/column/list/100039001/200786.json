{"id":200786,"title":"47 | åŸå‹æ¨¡å¼ï¼šå¦‚ä½•æœ€å¿«é€Ÿåœ°cloneä¸€ä¸ªHashMapæ•£åˆ—è¡¨ï¼Ÿ","content":"<p>å¯¹äºåˆ›å»ºå‹æ¨¡å¼ï¼Œå‰é¢æˆ‘ä»¬å·²ç»è®²äº†å•ä¾‹æ¨¡å¼ã€å·¥å‚æ¨¡å¼ã€å»ºé€ è€…æ¨¡å¼ï¼Œä»Šå¤©æˆ‘ä»¬æ¥è®²æœ€åä¸€ä¸ªï¼šåŸå‹æ¨¡å¼ã€‚</p><p>å¯¹äºç†Ÿæ‚‰JavaScriptè¯­è¨€çš„å‰ç«¯ç¨‹åºå‘˜æ¥è¯´ï¼ŒåŸå‹æ¨¡å¼æ˜¯ä¸€ç§æ¯”è¾ƒå¸¸ç”¨çš„å¼€å‘æ¨¡å¼ã€‚è¿™æ˜¯å› ä¸ºï¼Œæœ‰åˆ«äºJavaã€C++ç­‰åŸºäºç±»çš„é¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€ï¼ŒJavaScriptæ˜¯ä¸€ç§åŸºäºåŸå‹çš„é¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€ã€‚å³ä¾¿JavaScriptç°åœ¨ä¹Ÿå¼•å…¥äº†ç±»çš„æ¦‚å¿µï¼Œä½†å®ƒä¹Ÿåªæ˜¯åŸºäºåŸå‹çš„è¯­æ³•ç³–è€Œå·²ã€‚ä¸è¿‡ï¼Œå¦‚æœä½ ç†Ÿæ‚‰çš„æ˜¯Javaã€C++ç­‰è¿™äº›ç¼–ç¨‹è¯­è¨€ï¼Œé‚£åœ¨å®é™…çš„å¼€å‘ä¸­ï¼Œå°±å¾ˆå°‘ç”¨åˆ°åŸå‹æ¨¡å¼äº†ã€‚</p><p>ä»Šå¤©çš„è®²è§£è·Ÿå…·ä½“æŸä¸€è¯­è¨€çš„è¯­æ³•æœºåˆ¶æ— å…³ï¼Œè€Œæ˜¯é€šè¿‡ä¸€ä¸ªcloneæ•£åˆ—è¡¨çš„ä¾‹å­å¸¦ä½ ææ¸…æ¥šï¼šåŸå‹æ¨¡å¼çš„åº”ç”¨åœºæ™¯ï¼Œä»¥åŠå®ƒçš„ä¸¤ç§å®ç°æ–¹å¼ï¼šæ·±æ‹·è´å’Œæµ…æ‹·è´ã€‚è™½ç„¶åŸå‹æ¨¡å¼çš„åŸç†å’Œä»£ç å®ç°éå¸¸ç®€å•ï¼Œä½†ä»Šå¤©ä¸¾çš„ä¾‹å­è¿˜æ˜¯ç¨å¾®æœ‰ç‚¹å¤æ‚çš„ï¼Œä½ è¦è·Ÿä¸Šæˆ‘çš„æ€è·¯ï¼Œå¤šåŠ¨è„‘æ€è€ƒä¸€ä¸‹ã€‚</p><p>è¯ä¸å¤šè¯´ï¼Œè®©æˆ‘ä»¬æ­£å¼å¼€å§‹ä»Šå¤©çš„å­¦ä¹ å§ï¼</p><h2>åŸå‹æ¨¡å¼çš„åŸç†ä¸åº”ç”¨</h2><p>å¦‚æœå¯¹è±¡çš„åˆ›å»ºæˆæœ¬æ¯”è¾ƒå¤§ï¼Œè€ŒåŒä¸€ä¸ªç±»çš„ä¸åŒå¯¹è±¡ä¹‹é—´å·®åˆ«ä¸å¤§ï¼ˆå¤§éƒ¨åˆ†å­—æ®µéƒ½ç›¸åŒï¼‰ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨å¯¹å·²æœ‰å¯¹è±¡ï¼ˆåŸå‹ï¼‰è¿›è¡Œå¤åˆ¶ï¼ˆæˆ–è€…å«æ‹·è´ï¼‰çš„æ–¹å¼æ¥åˆ›å»ºæ–°å¯¹è±¡ï¼Œä»¥è¾¾åˆ°èŠ‚çœåˆ›å»ºæ—¶é—´çš„ç›®çš„ã€‚è¿™ç§åŸºäºåŸå‹æ¥åˆ›å»ºå¯¹è±¡çš„æ–¹å¼å°±å«ä½œ<strong>åŸå‹è®¾è®¡æ¨¡å¼</strong>ï¼ˆPrototype Design Patternï¼‰ï¼Œç®€ç§°<strong>åŸå‹æ¨¡å¼</strong>ã€‚</p><!-- [[[read_end]]] --><p><strong>é‚£ä½•ä¸ºâ€œå¯¹è±¡çš„åˆ›å»ºæˆæœ¬æ¯”è¾ƒå¤§â€ï¼Ÿ</strong></p><p>å®é™…ä¸Šï¼Œåˆ›å»ºå¯¹è±¡åŒ…å«çš„ç”³è¯·å†…å­˜ã€ç»™æˆå‘˜å˜é‡èµ‹å€¼è¿™ä¸€è¿‡ç¨‹ï¼Œæœ¬èº«å¹¶ä¸ä¼šèŠ±è´¹å¤ªå¤šæ—¶é—´ï¼Œæˆ–è€…è¯´å¯¹äºå¤§éƒ¨åˆ†ä¸šåŠ¡ç³»ç»Ÿæ¥è¯´ï¼Œè¿™ç‚¹æ—¶é—´å®Œå…¨æ˜¯å¯ä»¥å¿½ç•¥çš„ã€‚åº”ç”¨ä¸€ä¸ªå¤æ‚çš„æ¨¡å¼ï¼Œåªå¾—åˆ°ä¸€ç‚¹ç‚¹çš„æ€§èƒ½æå‡ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„è¿‡åº¦è®¾è®¡ï¼Œå¾—ä¸å¿å¤±ã€‚</p><p>ä½†æ˜¯ï¼Œå¦‚æœå¯¹è±¡ä¸­çš„æ•°æ®éœ€è¦ç»è¿‡å¤æ‚çš„è®¡ç®—æ‰èƒ½å¾—åˆ°ï¼ˆæ¯”å¦‚æ’åºã€è®¡ç®—å“ˆå¸Œå€¼ï¼‰ï¼Œæˆ–è€…éœ€è¦ä»RPCã€ç½‘ç»œã€æ•°æ®åº“ã€æ–‡ä»¶ç³»ç»Ÿç­‰éå¸¸æ…¢é€Ÿçš„IOä¸­è¯»å–ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨åŸå‹æ¨¡å¼ï¼Œä»å…¶ä»–å·²æœ‰å¯¹è±¡ä¸­ç›´æ¥æ‹·è´å¾—åˆ°ï¼Œè€Œä¸ç”¨æ¯æ¬¡åœ¨åˆ›å»ºæ–°å¯¹è±¡çš„æ—¶å€™ï¼Œéƒ½é‡å¤æ‰§è¡Œè¿™äº›è€—æ—¶çš„æ“ä½œã€‚</p><p><strong>è¿™ä¹ˆè¯´è¿˜æ˜¯æ¯”è¾ƒç†è®ºï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥è§£é‡Šä¸€ä¸‹åˆšåˆšè¿™æ®µè¯ã€‚</strong></p><p>å‡è®¾æ•°æ®åº“ä¸­å­˜å‚¨äº†å¤§çº¦10ä¸‡æ¡â€œæœç´¢å…³é”®è¯â€ä¿¡æ¯ï¼Œæ¯æ¡ä¿¡æ¯åŒ…å«å…³é”®è¯ã€å…³é”®è¯è¢«æœç´¢çš„æ¬¡æ•°ã€ä¿¡æ¯æœ€è¿‘è¢«æ›´æ–°çš„æ—¶é—´ç­‰ã€‚ç³»ç»ŸAåœ¨å¯åŠ¨çš„æ—¶å€™ä¼šåŠ è½½è¿™ä»½æ•°æ®åˆ°å†…å­˜ä¸­ï¼Œç”¨äºå¤„ç†æŸäº›å…¶ä»–çš„ä¸šåŠ¡éœ€æ±‚ã€‚ä¸ºäº†æ–¹ä¾¿å¿«é€Ÿåœ°æŸ¥æ‰¾æŸä¸ªå…³é”®è¯å¯¹åº”çš„ä¿¡æ¯ï¼Œæˆ‘ä»¬ç»™å…³é”®è¯å»ºç«‹ä¸€ä¸ªæ•£åˆ—è¡¨ç´¢å¼•ã€‚</p><p>å¦‚æœä½ ç†Ÿæ‚‰çš„æ˜¯Javaè¯­è¨€ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨è¯­è¨€ä¸­æä¾›çš„HashMapå®¹å™¨æ¥å®ç°ã€‚å…¶ä¸­ï¼ŒHashMapçš„keyä¸ºæœç´¢å…³é”®è¯ï¼Œvalueä¸ºå…³é”®è¯è¯¦ç»†ä¿¡æ¯ï¼ˆæ¯”å¦‚æœç´¢æ¬¡æ•°ï¼‰ã€‚æˆ‘ä»¬åªéœ€è¦å°†æ•°æ®ä»æ•°æ®åº“ä¸­è¯»å–å‡ºæ¥ï¼Œæ”¾å…¥HashMapå°±å¯ä»¥äº†ã€‚</p><p>ä¸è¿‡ï¼Œæˆ‘ä»¬è¿˜æœ‰å¦å¤–ä¸€ä¸ªç³»ç»ŸBï¼Œä¸“é—¨ç”¨æ¥åˆ†ææœç´¢æ—¥å¿—ï¼Œå®šæœŸï¼ˆæ¯”å¦‚é—´éš”10åˆ†é’Ÿï¼‰æ‰¹é‡åœ°æ›´æ–°æ•°æ®åº“ä¸­çš„æ•°æ®ï¼Œå¹¶ä¸”æ ‡è®°ä¸ºæ–°çš„æ•°æ®ç‰ˆæœ¬ã€‚æ¯”å¦‚ï¼Œåœ¨ä¸‹é¢çš„ç¤ºä¾‹å›¾ä¸­ï¼Œæˆ‘ä»¬å¯¹v2ç‰ˆæœ¬çš„æ•°æ®è¿›è¡Œæ›´æ–°ï¼Œå¾—åˆ°v3ç‰ˆæœ¬çš„æ•°æ®ã€‚è¿™é‡Œæˆ‘ä»¬å‡è®¾åªæœ‰æ›´æ–°å’Œæ–°æ·»å…³é”®è¯ï¼Œæ²¡æœ‰åˆ é™¤å…³é”®è¯çš„è¡Œä¸ºã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/05/0e/05233c28ddda51b81dfd946ffdef640e.jpg?wh=2446*1240\" alt=\"\"></p><p>ä¸ºäº†ä¿è¯ç³»ç»ŸAä¸­æ•°æ®çš„å®æ—¶æ€§ï¼ˆä¸ä¸€å®šéå¸¸å®æ—¶ï¼Œä½†æ•°æ®ä¹Ÿä¸èƒ½å¤ªæ—§ï¼‰ï¼Œç³»ç»ŸAéœ€è¦å®šæœŸæ ¹æ®æ•°æ®åº“ä¸­çš„æ•°æ®ï¼Œæ›´æ–°å†…å­˜ä¸­çš„ç´¢å¼•å’Œæ•°æ®ã€‚</p><p>æˆ‘ä»¬è¯¥å¦‚ä½•å®ç°è¿™ä¸ªéœ€æ±‚å‘¢ï¼Ÿ</p><p>å®é™…ä¸Šï¼Œä¹Ÿä¸éš¾ã€‚æˆ‘ä»¬åªéœ€è¦åœ¨ç³»ç»ŸAä¸­ï¼Œè®°å½•å½“å‰æ•°æ®çš„ç‰ˆæœ¬Vaå¯¹åº”çš„æ›´æ–°æ—¶é—´Taï¼Œä»æ•°æ®åº“ä¸­æå‡ºæ›´æ–°æ—¶é—´å¤§äºTaçš„æ‰€æœ‰æœç´¢å…³é”®è¯ï¼Œä¹Ÿå°±æ˜¯æ‰¾å‡ºVaç‰ˆæœ¬ä¸æœ€æ–°ç‰ˆæœ¬æ•°æ®çš„â€œå·®é›†â€ï¼Œç„¶åé’ˆå¯¹å·®é›†ä¸­çš„æ¯ä¸ªå…³é”®è¯è¿›è¡Œå¤„ç†ã€‚å¦‚æœå®ƒå·²ç»åœ¨æ•£åˆ—è¡¨ä¸­å­˜åœ¨äº†ï¼Œæˆ‘ä»¬å°±æ›´æ–°ç›¸åº”çš„æœç´¢æ¬¡æ•°ã€æ›´æ–°æ—¶é—´ç­‰ä¿¡æ¯ï¼›å¦‚æœå®ƒåœ¨æ•£åˆ—è¡¨ä¸­ä¸å­˜åœ¨ï¼Œæˆ‘ä»¬å°±å°†å®ƒæ’å…¥åˆ°æ•£åˆ—è¡¨ä¸­ã€‚</p><p>æŒ‰ç…§è¿™ä¸ªè®¾è®¡æ€è·¯ï¼Œæˆ‘ç»™å‡ºçš„ç¤ºä¾‹ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>public class Demo {\n  private ConcurrentHashMap&lt;String, SearchWord&gt; currentKeywords = new ConcurrentHashMap&lt;&gt;();\n  private long lastUpdateTime = -1;\n\n  public void refresh() {\n    // ä»æ•°æ®åº“ä¸­å–å‡ºæ›´æ–°æ—¶é—´&gt;lastUpdateTimeçš„æ•°æ®ï¼Œæ”¾å…¥åˆ°currentKeywordsä¸­\n    List&lt;SearchWord&gt; toBeUpdatedSearchWords = getSearchWords(lastUpdateTime);\n    long maxNewUpdatedTime = lastUpdateTime;\n    for (SearchWord searchWord : toBeUpdatedSearchWords) {\n      if (searchWord.getLastUpdateTime() &gt; maxNewUpdatedTime) {\n        maxNewUpdatedTime = searchWord.getLastUpdateTime();\n      }\n      if (currentKeywords.containsKey(searchWord.getKeyword())) {\n        currentKeywords.replace(searchWord.getKeyword(), searchWord);\n      } else {\n        currentKeywords.put(searchWord.getKeyword(), searchWord);\n      }\n    }\n\n    lastUpdateTime = maxNewUpdatedTime;\n  }\n\n  private List&lt;SearchWord&gt; getSearchWords(long lastUpdateTime) {\n    // TODO: ä»æ•°æ®åº“ä¸­å–å‡ºæ›´æ–°æ—¶é—´&gt;lastUpdateTimeçš„æ•°æ®\n    return null;\n  }\n}\n</code></pre><p>ä¸è¿‡ï¼Œç°åœ¨ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªç‰¹æ®Šçš„è¦æ±‚ï¼šä»»ä½•æ—¶åˆ»ï¼Œç³»ç»ŸAä¸­çš„æ‰€æœ‰æ•°æ®éƒ½å¿…é¡»æ˜¯åŒä¸€ä¸ªç‰ˆæœ¬çš„ï¼Œè¦ä¹ˆéƒ½æ˜¯ç‰ˆæœ¬aï¼Œè¦ä¹ˆéƒ½æ˜¯ç‰ˆæœ¬bï¼Œä¸èƒ½æœ‰çš„æ˜¯ç‰ˆæœ¬aï¼Œæœ‰çš„æ˜¯ç‰ˆæœ¬bã€‚é‚£åˆšåˆšçš„æ›´æ–°æ–¹å¼å°±ä¸èƒ½æ»¡è¶³è¿™ä¸ªè¦æ±‚äº†ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜è¦æ±‚ï¼šåœ¨æ›´æ–°å†…å­˜æ•°æ®çš„æ—¶å€™ï¼Œç³»ç»ŸAä¸èƒ½å¤„äºä¸å¯ç”¨çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯ä¸èƒ½åœæœºæ›´æ–°æ•°æ®ã€‚</p><p>é‚£æˆ‘ä»¬è¯¥å¦‚ä½•å®ç°ç°åœ¨è¿™ä¸ªéœ€æ±‚å‘¢ï¼Ÿ</p><p>å®é™…ä¸Šï¼Œä¹Ÿä¸éš¾ã€‚æˆ‘ä»¬æŠŠæ­£åœ¨ä½¿ç”¨çš„æ•°æ®çš„ç‰ˆæœ¬å®šä¹‰ä¸ºâ€œæœåŠ¡ç‰ˆæœ¬â€ï¼Œå½“æˆ‘ä»¬è¦æ›´æ–°å†…å­˜ä¸­çš„æ•°æ®çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¹¶ä¸æ˜¯ç›´æ¥åœ¨æœåŠ¡ç‰ˆæœ¬ï¼ˆå‡è®¾æ˜¯ç‰ˆæœ¬aæ•°æ®ï¼‰ä¸Šæ›´æ–°ï¼Œè€Œæ˜¯é‡æ–°åˆ›å»ºå¦ä¸€ä¸ªç‰ˆæœ¬æ•°æ®ï¼ˆå‡è®¾æ˜¯ç‰ˆæœ¬bæ•°æ®ï¼‰ï¼Œç­‰æ–°çš„ç‰ˆæœ¬æ•°æ®å»ºå¥½ä¹‹åï¼Œå†ä¸€æ¬¡æ€§åœ°å°†æœåŠ¡ç‰ˆæœ¬ä»ç‰ˆæœ¬aåˆ‡æ¢åˆ°ç‰ˆæœ¬bã€‚è¿™æ ·æ—¢ä¿è¯äº†æ•°æ®ä¸€ç›´å¯ç”¨ï¼Œåˆé¿å…äº†ä¸­é—´çŠ¶æ€çš„å­˜åœ¨ã€‚</p><p>æŒ‰ç…§è¿™ä¸ªè®¾è®¡æ€è·¯ï¼Œæˆ‘ç»™å‡ºçš„ç¤ºä¾‹ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>public class Demo {\n  private HashMap&lt;String, SearchWord&gt; currentKeywords=new HashMap&lt;&gt;();\n\n  public void refresh() {\n    HashMap&lt;String, SearchWord&gt; newKeywords = new LinkedHashMap&lt;&gt;();\n\n    // ä»æ•°æ®åº“ä¸­å–å‡ºæ‰€æœ‰çš„æ•°æ®ï¼Œæ”¾å…¥åˆ°newKeywordsä¸­\n    List&lt;SearchWord&gt; toBeUpdatedSearchWords = getSearchWords();\n    for (SearchWord searchWord : toBeUpdatedSearchWords) {\n      newKeywords.put(searchWord.getKeyword(), searchWord);\n    }\n\n    currentKeywords = newKeywords;\n  }\n\n  private List&lt;SearchWord&gt; getSearchWords() {\n    // TODO: ä»æ•°æ®åº“ä¸­å–å‡ºæ‰€æœ‰çš„æ•°æ®\n    return null;\n  }\n}\n</code></pre><p>ä¸è¿‡ï¼Œåœ¨ä¸Šé¢çš„ä»£ç å®ç°ä¸­ï¼ŒnewKeywordsæ„å»ºçš„æˆæœ¬æ¯”è¾ƒé«˜ã€‚æˆ‘ä»¬éœ€è¦å°†è¿™10ä¸‡æ¡æ•°æ®ä»æ•°æ®åº“ä¸­è¯»å‡ºï¼Œç„¶åè®¡ç®—å“ˆå¸Œå€¼ï¼Œæ„å»ºnewKeywordsã€‚è¿™ä¸ªè¿‡ç¨‹æ˜¾ç„¶æ˜¯æ¯”è¾ƒè€—æ—¶ã€‚ä¸ºäº†æé«˜æ•ˆç‡ï¼ŒåŸå‹æ¨¡å¼å°±æ´¾ä¸Šç”¨åœºäº†ã€‚</p><p>æˆ‘ä»¬æ‹·è´currentKeywordsæ•°æ®åˆ°newKeywordsä¸­ï¼Œç„¶åä»æ•°æ®åº“ä¸­åªæå‡ºæ–°å¢æˆ–è€…æœ‰æ›´æ–°çš„å…³é”®è¯ï¼Œæ›´æ–°åˆ°newKeywordsä¸­ã€‚è€Œç›¸å¯¹äº10ä¸‡æ¡æ•°æ®æ¥è¯´ï¼Œæ¯æ¬¡æ–°å¢æˆ–è€…æ›´æ–°çš„å…³é”®è¯ä¸ªæ•°æ˜¯æ¯”è¾ƒå°‘çš„ï¼Œæ‰€ä»¥ï¼Œè¿™ç§ç­–ç•¥å¤§å¤§æé«˜äº†æ•°æ®æ›´æ–°çš„æ•ˆç‡ã€‚</p><p>æŒ‰ç…§è¿™ä¸ªè®¾è®¡æ€è·¯ï¼Œæˆ‘ç»™å‡ºçš„ç¤ºä¾‹ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>public class Demo {\n  private HashMap&lt;String, SearchWord&gt; currentKeywords=new HashMap&lt;&gt;();\n  private long lastUpdateTime = -1;\n\n  public void refresh() {\n    // åŸå‹æ¨¡å¼å°±è¿™ä¹ˆç®€å•ï¼Œæ‹·è´å·²æœ‰å¯¹è±¡çš„æ•°æ®ï¼Œæ›´æ–°å°‘é‡å·®å€¼\n    HashMap&lt;String, SearchWord&gt; newKeywords = (HashMap&lt;String, SearchWord&gt;) currentKeywords.clone();\n\n    // ä»æ•°æ®åº“ä¸­å–å‡ºæ›´æ–°æ—¶é—´&gt;lastUpdateTimeçš„æ•°æ®ï¼Œæ”¾å…¥åˆ°newKeywordsä¸­\n    List&lt;SearchWord&gt; toBeUpdatedSearchWords = getSearchWords(lastUpdateTime);\n    long maxNewUpdatedTime = lastUpdateTime;\n    for (SearchWord searchWord : toBeUpdatedSearchWords) {\n      if (searchWord.getLastUpdateTime() &gt; maxNewUpdatedTime) {\n        maxNewUpdatedTime = searchWord.getLastUpdateTime();\n      }\n      if (newKeywords.containsKey(searchWord.getKeyword())) {\n        SearchWord oldSearchWord = newKeywords.get(searchWord.getKeyword());\n        oldSearchWord.setCount(searchWord.getCount());\n        oldSearchWord.setLastUpdateTime(searchWord.getLastUpdateTime());\n      } else {\n        newKeywords.put(searchWord.getKeyword(), searchWord);\n      }\n    }\n\n    lastUpdateTime = maxNewUpdatedTime;\n    currentKeywords = newKeywords;\n  }\n\n  private List&lt;SearchWord&gt; getSearchWords(long lastUpdateTime) {\n    // TODO: ä»æ•°æ®åº“ä¸­å–å‡ºæ›´æ–°æ—¶é—´&gt;lastUpdateTimeçš„æ•°æ®\n    return null;\n  }\n}\n</code></pre><p>è¿™é‡Œæˆ‘ä»¬åˆ©ç”¨äº†Javaä¸­çš„clone()è¯­æ³•æ¥å¤åˆ¶ä¸€ä¸ªå¯¹è±¡ã€‚å¦‚æœä½ ç†Ÿæ‚‰çš„è¯­è¨€æ²¡æœ‰è¿™ä¸ªè¯­æ³•ï¼Œé‚£æŠŠæ•°æ®ä»currentKeywordsä¸­ä¸€ä¸ªä¸ªå–å‡ºæ¥ï¼Œç„¶åå†é‡æ–°è®¡ç®—å“ˆå¸Œå€¼ï¼Œæ”¾å…¥åˆ°newKeywordsä¸­ä¹Ÿæ˜¯å¯ä»¥æ¥å—çš„ã€‚æ¯•ç«Ÿï¼Œæœ€è€—æ—¶çš„è¿˜æ˜¯ä»æ•°æ®åº“ä¸­å–æ•°æ®çš„æ“ä½œã€‚ç›¸å¯¹äºæ•°æ®åº“çš„IOæ“ä½œæ¥è¯´ï¼Œå†…å­˜æ“ä½œå’ŒCPUè®¡ç®—çš„è€—æ—¶éƒ½æ˜¯å¯ä»¥å¿½ç•¥çš„ã€‚</p><p>ä¸è¿‡ï¼Œä¸çŸ¥é“ä½ æœ‰æ²¡æœ‰å‘ç°ï¼Œå®é™…ä¸Šï¼Œåˆšåˆšçš„ä»£ç å®ç°æ˜¯æœ‰é—®é¢˜çš„ã€‚è¦å¼„æ˜ç™½åˆ°åº•æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦å…ˆäº†è§£å¦å¤–ä¸¤ä¸ªæ¦‚å¿µï¼šæ·±æ‹·è´ï¼ˆDeep Copyï¼‰å’Œæµ…æ‹·è´ï¼ˆShallow Copyï¼‰ã€‚</p><h2>åŸå‹æ¨¡å¼çš„å®ç°æ–¹å¼ï¼šæ·±æ‹·è´å’Œæµ…æ‹·è´</h2><p>æˆ‘ä»¬æ¥çœ‹ï¼Œåœ¨å†…å­˜ä¸­ï¼Œç”¨æ•£åˆ—è¡¨ç»„ç»‡çš„æœç´¢å…³é”®è¯ä¿¡æ¯æ˜¯å¦‚ä½•å­˜å‚¨çš„ã€‚æˆ‘ç”»äº†ä¸€å¼ ç¤ºæ„å›¾ï¼Œå¤§è‡´ç»“æ„å¦‚ä¸‹æ‰€ç¤ºã€‚ä»å›¾ä¸­æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œæ•£åˆ—è¡¨ç´¢å¼•ä¸­ï¼Œæ¯ä¸ªç»“ç‚¹å­˜å‚¨çš„keyæ˜¯æœç´¢å…³é”®è¯ï¼Œvalueæ˜¯SearchWordå¯¹è±¡çš„å†…å­˜åœ°å€ã€‚SearchWordå¯¹è±¡æœ¬èº«å­˜å‚¨åœ¨æ•£åˆ—è¡¨ä¹‹å¤–çš„å†…å­˜ç©ºé—´ä¸­ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/f5/d2/f5ba85952b27a569687e2d44352216d2.jpg?wh=2258*1784\" alt=\"\"></p><p>æµ…æ‹·è´å’Œæ·±æ‹·è´çš„åŒºåˆ«åœ¨äºï¼Œæµ…æ‹·è´åªä¼šå¤åˆ¶å›¾ä¸­çš„ç´¢å¼•ï¼ˆæ•£åˆ—è¡¨ï¼‰ï¼Œä¸ä¼šå¤åˆ¶æ•°æ®ï¼ˆSearchWordå¯¹è±¡ï¼‰æœ¬èº«ã€‚ç›¸åï¼Œæ·±æ‹·è´ä¸ä»…ä»…ä¼šå¤åˆ¶ç´¢å¼•ï¼Œè¿˜ä¼šå¤åˆ¶æ•°æ®æœ¬èº«ã€‚æµ…æ‹·è´å¾—åˆ°çš„å¯¹è±¡ï¼ˆnewKeywordsï¼‰è·ŸåŸå§‹å¯¹è±¡ï¼ˆcurrentKeywordsï¼‰å…±äº«æ•°æ®ï¼ˆSearchWordå¯¹è±¡ï¼‰ï¼Œè€Œæ·±æ‹·è´å¾—åˆ°çš„æ˜¯ä¸€ä»½å®Œå®Œå…¨å…¨ç‹¬ç«‹çš„å¯¹è±¡ã€‚å…·ä½“çš„å¯¹æ¯”å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/74/82/74bceb7a0736957daaa4abeba6826182.jpg?wh=4580*1784\" alt=\"\"></p><p><img src=\"https://static001.geekbang.org/resource/image/b9/1b/b978d054ab3183b9e0ae461e6abac81b.jpg?wh=5198*1784\" alt=\"\"></p><p>åœ¨Javaè¯­è¨€ä¸­ï¼ŒObjectç±»çš„clone()æ–¹æ³•æ‰§è¡Œçš„å°±æ˜¯æˆ‘ä»¬åˆšåˆšè¯´çš„æµ…æ‹·è´ã€‚å®ƒåªä¼šæ‹·è´å¯¹è±¡ä¸­çš„åŸºæœ¬æ•°æ®ç±»å‹çš„æ•°æ®ï¼ˆæ¯”å¦‚ï¼Œintã€longï¼‰ï¼Œä»¥åŠå¼•ç”¨å¯¹è±¡ï¼ˆSearchWordï¼‰çš„å†…å­˜åœ°å€ï¼Œä¸ä¼šé€’å½’åœ°æ‹·è´å¼•ç”¨å¯¹è±¡æœ¬èº«ã€‚</p><p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡è°ƒç”¨HashMapä¸Šçš„clone()æµ…æ‹·è´æ–¹æ³•æ¥å®ç°åŸå‹æ¨¡å¼ã€‚å½“æˆ‘ä»¬é€šè¿‡newKeywordsæ›´æ–°SearchWordå¯¹è±¡çš„æ—¶å€™ï¼ˆæ¯”å¦‚ï¼Œæ›´æ–°â€œè®¾è®¡æ¨¡å¼â€è¿™ä¸ªæœç´¢å…³é”®è¯çš„è®¿é—®æ¬¡æ•°ï¼‰ï¼ŒnewKeywordså’ŒcurrentKeywordså› ä¸ºæŒ‡å‘ç›¸åŒçš„ä¸€ç»„SearchWordå¯¹è±¡ï¼Œå°±ä¼šå¯¼è‡´currentKeywordsä¸­æŒ‡å‘çš„SearchWordï¼Œæœ‰çš„æ˜¯è€ç‰ˆæœ¬çš„ï¼Œæœ‰çš„æ˜¯æ–°ç‰ˆæœ¬çš„ï¼Œå°±æ²¡æ³•æ»¡è¶³æˆ‘ä»¬ä¹‹å‰çš„éœ€æ±‚ï¼šcurrentKeywordsä¸­çš„æ•°æ®åœ¨ä»»ä½•æ—¶åˆ»éƒ½æ˜¯åŒä¸€ä¸ªç‰ˆæœ¬çš„ï¼Œä¸å­˜åœ¨ä»‹äºè€ç‰ˆæœ¬ä¸æ–°ç‰ˆæœ¬ä¹‹é—´çš„ä¸­é—´çŠ¶æ€ã€‚</p><p>ç°åœ¨ï¼Œæˆ‘ä»¬åˆè¯¥å¦‚ä½•æ¥è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬å¯ä»¥å°†æµ…æ‹·è´æ›¿æ¢ä¸ºæ·±æ‹·è´ã€‚newKeywordsä¸ä»…ä»…å¤åˆ¶currentKeywordsçš„ç´¢å¼•ï¼Œè¿˜æŠŠSearchWordå¯¹è±¡ä¹Ÿå¤åˆ¶ä¸€ä»½å‡ºæ¥ï¼Œè¿™æ ·newKeywordså’ŒcurrentKeywordså°±æŒ‡å‘ä¸åŒçš„SearchWordå¯¹è±¡ï¼Œä¹Ÿå°±ä¸å­˜åœ¨æ›´æ–°newKeywordsçš„æ•°æ®ä¼šå¯¼è‡´currentKeywordsçš„æ•°æ®ä¹Ÿè¢«æ›´æ–°çš„é—®é¢˜äº†ã€‚</p><p>é‚£å¦‚ä½•å®ç°æ·±æ‹·è´å‘¢ï¼Ÿæ€»ç»“ä¸€ä¸‹çš„è¯ï¼Œæœ‰ä¸‹é¢ä¸¤ç§æ–¹æ³•ã€‚</p><p>ç¬¬ä¸€ç§æ–¹æ³•ï¼šé€’å½’æ‹·è´å¯¹è±¡ã€å¯¹è±¡çš„å¼•ç”¨å¯¹è±¡ä»¥åŠå¼•ç”¨å¯¹è±¡çš„å¼•ç”¨å¯¹è±¡â€¦â€¦ç›´åˆ°è¦æ‹·è´çš„å¯¹è±¡åªåŒ…å«åŸºæœ¬æ•°æ®ç±»å‹æ•°æ®ï¼Œæ²¡æœ‰å¼•ç”¨å¯¹è±¡ä¸ºæ­¢ã€‚æ ¹æ®è¿™ä¸ªæ€è·¯å¯¹ä¹‹å‰çš„ä»£ç è¿›è¡Œé‡æ„ã€‚é‡æ„ä¹‹åçš„ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>public class Demo {\n  private HashMap&lt;String, SearchWord&gt; currentKeywords=new HashMap&lt;&gt;();\n  private long lastUpdateTime = -1;\n\n  public void refresh() {\n    // Deep copy\n    HashMap&lt;String, SearchWord&gt; newKeywords = new HashMap&lt;&gt;();\n    for (HashMap.Entry&lt;String, SearchWord&gt; e : currentKeywords.entrySet()) {\n      SearchWord searchWord = e.getValue();\n      SearchWord newSearchWord = new SearchWord(\n              searchWord.getKeyword(), searchWord.getCount(), searchWord.getLastUpdateTime());\n      newKeywords.put(e.getKey(), newSearchWord);\n    }\n\n    // ä»æ•°æ®åº“ä¸­å–å‡ºæ›´æ–°æ—¶é—´&gt;lastUpdateTimeçš„æ•°æ®ï¼Œæ”¾å…¥åˆ°newKeywordsä¸­\n    List&lt;SearchWord&gt; toBeUpdatedSearchWords = getSearchWords(lastUpdateTime);\n    long maxNewUpdatedTime = lastUpdateTime;\n    for (SearchWord searchWord : toBeUpdatedSearchWords) {\n      if (searchWord.getLastUpdateTime() &gt; maxNewUpdatedTime) {\n        maxNewUpdatedTime = searchWord.getLastUpdateTime();\n      }\n      if (newKeywords.containsKey(searchWord.getKeyword())) {\n        SearchWord oldSearchWord = newKeywords.get(searchWord.getKeyword());\n        oldSearchWord.setCount(searchWord.getCount());\n        oldSearchWord.setLastUpdateTime(searchWord.getLastUpdateTime());\n      } else {\n        newKeywords.put(searchWord.getKeyword(), searchWord);\n      }\n    }\n\n    lastUpdateTime = maxNewUpdatedTime;\n    currentKeywords = newKeywords;\n  }\n\n  private List&lt;SearchWord&gt; getSearchWords(long lastUpdateTime) {\n    // TODO: ä»æ•°æ®åº“ä¸­å–å‡ºæ›´æ–°æ—¶é—´&gt;lastUpdateTimeçš„æ•°æ®\n    return null;\n  }\n\n}\n</code></pre><p>ç¬¬äºŒç§æ–¹æ³•ï¼šå…ˆå°†å¯¹è±¡åºåˆ—åŒ–ï¼Œç„¶åå†ååºåˆ—åŒ–æˆæ–°çš„å¯¹è±¡ã€‚å…·ä½“çš„ç¤ºä¾‹ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>public Object deepCopy(Object object) {\n  ByteArrayOutputStream bo = new ByteArrayOutputStream();\n  ObjectOutputStream oo = new ObjectOutputStream(bo);\n  oo.writeObject(object);\n  \n  ByteArrayInputStream bi = new ByteArrayInputStream(bo.toByteArray());\n  ObjectInputStream oi = new ObjectInputStream(bi);\n  \n  return oi.readObject();\n}\n</code></pre><p>åˆšåˆšçš„ä¸¤ç§å®ç°æ–¹æ³•ï¼Œä¸ç®¡é‡‡ç”¨å“ªç§ï¼Œæ·±æ‹·è´éƒ½è¦æ¯”æµ…æ‹·è´è€—æ—¶ã€è€—å†…å­˜ç©ºé—´ã€‚é’ˆå¯¹æˆ‘ä»¬è¿™ä¸ªåº”ç”¨åœºæ™¯ï¼Œæœ‰æ²¡æœ‰æ›´å¿«ã€æ›´çœå†…å­˜çš„å®ç°æ–¹å¼å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬å¯ä»¥å…ˆé‡‡ç”¨æµ…æ‹·è´çš„æ–¹å¼åˆ›å»ºnewKeywordsã€‚å¯¹äºéœ€è¦æ›´æ–°çš„SearchWordå¯¹è±¡ï¼Œæˆ‘ä»¬å†ä½¿ç”¨æ·±åº¦æ‹·è´çš„æ–¹å¼åˆ›å»ºä¸€ä»½æ–°çš„å¯¹è±¡ï¼Œæ›¿æ¢newKeywordsä¸­çš„è€å¯¹è±¡ã€‚æ¯•ç«Ÿéœ€è¦æ›´æ–°çš„æ•°æ®æ˜¯å¾ˆå°‘çš„ã€‚è¿™ç§æ–¹å¼å³åˆ©ç”¨äº†æµ…æ‹·è´èŠ‚çœæ—¶é—´ã€ç©ºé—´çš„ä¼˜ç‚¹ï¼Œåˆèƒ½ä¿è¯currentKeywordsä¸­çš„ä¸­æ•°æ®éƒ½æ˜¯è€ç‰ˆæœ¬çš„æ•°æ®ã€‚å…·ä½“çš„ä»£ç å®ç°å¦‚ä¸‹æ‰€ç¤ºã€‚è¿™ä¹Ÿæ˜¯æ ‡é¢˜ä¸­è®²åˆ°çš„ï¼Œåœ¨æˆ‘ä»¬è¿™ä¸ªåº”ç”¨åœºæ™¯ä¸‹ï¼Œæœ€å¿«é€Ÿcloneæ•£åˆ—è¡¨çš„æ–¹å¼ã€‚</p><pre><code>public class Demo {\n  private HashMap&lt;String, SearchWord&gt; currentKeywords=new HashMap&lt;&gt;();\n  private long lastUpdateTime = -1;\n\n  public void refresh() {\n    // Shallow copy\n    HashMap&lt;String, SearchWord&gt; newKeywords = (HashMap&lt;String, SearchWord&gt;) currentKeywords.clone();\n\n    // ä»æ•°æ®åº“ä¸­å–å‡ºæ›´æ–°æ—¶é—´&gt;lastUpdateTimeçš„æ•°æ®ï¼Œæ”¾å…¥åˆ°newKeywordsä¸­\n    List&lt;SearchWord&gt; toBeUpdatedSearchWords = getSearchWords(lastUpdateTime);\n    long maxNewUpdatedTime = lastUpdateTime;\n    for (SearchWord searchWord : toBeUpdatedSearchWords) {\n      if (searchWord.getLastUpdateTime() &gt; maxNewUpdatedTime) {\n        maxNewUpdatedTime = searchWord.getLastUpdateTime();\n      }\n      if (newKeywords.containsKey(searchWord.getKeyword())) {\n        newKeywords.remove(searchWord.getKeyword());\n      }\n      newKeywords.put(searchWord.getKeyword(), searchWord);\n    }\n\n    lastUpdateTime = maxNewUpdatedTime;\n    currentKeywords = newKeywords;\n  }\n\n  private List&lt;SearchWord&gt; getSearchWords(long lastUpdateTime) {\n    // TODO: ä»æ•°æ®åº“ä¸­å–å‡ºæ›´æ–°æ—¶é—´&gt;lastUpdateTimeçš„æ•°æ®\n    return null;\n  }\n}\n</code></pre><h2>é‡ç‚¹å›é¡¾</h2><p>å¥½äº†ï¼Œä»Šå¤©çš„å†…å®¹åˆ°æ­¤å°±è®²å®Œäº†ã€‚æˆ‘ä»¬ä¸€å—æ¥æ€»ç»“å›é¡¾ä¸€ä¸‹ï¼Œä½ éœ€è¦é‡ç‚¹æŒæ¡çš„å†…å®¹ã€‚</p><p><strong>1.ä»€ä¹ˆæ˜¯åŸå‹æ¨¡å¼ï¼Ÿ</strong></p><p>å¦‚æœå¯¹è±¡çš„åˆ›å»ºæˆæœ¬æ¯”è¾ƒå¤§ï¼Œè€ŒåŒä¸€ä¸ªç±»çš„ä¸åŒå¯¹è±¡ä¹‹é—´å·®åˆ«ä¸å¤§ï¼ˆå¤§éƒ¨åˆ†å­—æ®µéƒ½ç›¸åŒï¼‰ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨å¯¹å·²æœ‰å¯¹è±¡ï¼ˆåŸå‹ï¼‰è¿›è¡Œå¤åˆ¶ï¼ˆæˆ–è€…å«æ‹·è´ï¼‰çš„æ–¹å¼ï¼Œæ¥åˆ›å»ºæ–°å¯¹è±¡ï¼Œä»¥è¾¾åˆ°èŠ‚çœåˆ›å»ºæ—¶é—´çš„ç›®çš„ã€‚è¿™ç§åŸºäºåŸå‹æ¥åˆ›å»ºå¯¹è±¡çš„æ–¹å¼å°±å«ä½œåŸå‹è®¾è®¡æ¨¡å¼ï¼Œç®€ç§°åŸå‹æ¨¡å¼ã€‚</p><p><strong>2.åŸå‹æ¨¡å¼çš„ä¸¤ç§å®ç°æ–¹æ³•</strong></p><p>åŸå‹æ¨¡å¼æœ‰ä¸¤ç§å®ç°æ–¹æ³•ï¼Œæ·±æ‹·è´å’Œæµ…æ‹·è´ã€‚æµ…æ‹·è´åªä¼šå¤åˆ¶å¯¹è±¡ä¸­åŸºæœ¬æ•°æ®ç±»å‹æ•°æ®å’Œå¼•ç”¨å¯¹è±¡çš„å†…å­˜åœ°å€ï¼Œä¸ä¼šé€’å½’åœ°å¤åˆ¶å¼•ç”¨å¯¹è±¡ï¼Œä»¥åŠå¼•ç”¨å¯¹è±¡çš„å¼•ç”¨å¯¹è±¡â€¦â€¦è€Œæ·±æ‹·è´å¾—åˆ°çš„æ˜¯ä¸€ä»½å®Œå®Œå…¨å…¨ç‹¬ç«‹çš„å¯¹è±¡ã€‚æ‰€ä»¥ï¼Œæ·±æ‹·è´æ¯”èµ·æµ…æ‹·è´æ¥è¯´ï¼Œæ›´åŠ è€—æ—¶ï¼Œæ›´åŠ è€—å†…å­˜ç©ºé—´ã€‚</p><p>å¦‚æœè¦æ‹·è´çš„å¯¹è±¡æ˜¯ä¸å¯å˜å¯¹è±¡ï¼Œæµ…æ‹·è´å…±äº«ä¸å¯å˜å¯¹è±¡æ˜¯æ²¡é—®é¢˜çš„ï¼Œä½†å¯¹äºå¯å˜å¯¹è±¡æ¥è¯´ï¼Œæµ…æ‹·è´å¾—åˆ°çš„å¯¹è±¡å’ŒåŸå§‹å¯¹è±¡ä¼šå…±äº«éƒ¨åˆ†æ•°æ®ï¼Œå°±æœ‰å¯èƒ½å‡ºç°æ•°æ®è¢«ä¿®æ”¹çš„é£é™©ï¼Œä¹Ÿå°±å˜å¾—å¤æ‚å¤šäº†ã€‚é™¤éåƒæˆ‘ä»¬ä»Šå¤©å®æˆ˜ä¸­ä¸¾çš„é‚£ä¸ªä¾‹å­ï¼Œéœ€è¦ä»æ•°æ®åº“ä¸­åŠ è½½10ä¸‡æ¡æ•°æ®å¹¶æ„å»ºæ•£åˆ—è¡¨ç´¢å¼•ï¼Œæ“ä½œéå¸¸è€—æ—¶ï¼Œè¿™ç§æƒ…å†µä¸‹æ¯”è¾ƒæ¨èä½¿ç”¨æµ…æ‹·è´ï¼Œå¦åˆ™ï¼Œæ²¡æœ‰å……åˆ†çš„ç†ç”±ï¼Œä¸è¦ä¸ºäº†ä¸€ç‚¹ç‚¹çš„æ€§èƒ½æå‡è€Œä½¿ç”¨æµ…æ‹·è´ã€‚</p><h2>è¯¾å ‚è®¨è®º</h2><ol>\n<li>åœ¨ä»Šå¤©çš„åº”ç”¨åœºæ™¯ä¸­ï¼Œå¦‚æœä¸ä»…å¾€æ•°æ®åº“ä¸­æ·»åŠ å’Œæ›´æ–°å…³é”®è¯ï¼Œè¿˜åˆ é™¤å…³é”®è¯ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œåˆè¯¥å¦‚ä½•å®ç°å‘¢ï¼Ÿ</li>\n<li>åœ¨<a href=\"https://time.geekbang.org/column/article/164907\">ç¬¬7è®²</a>ä¸­ï¼Œä¸ºäº†è®©ShoppingCartçš„getItems()æ–¹æ³•è¿”å›ä¸å¯å˜å¯¹è±¡ï¼Œæˆ‘ä»¬å¦‚ä¸‹æ¥å®ç°ä»£ç ã€‚å½“æ—¶ï¼Œæˆ‘ä»¬æŒ‡å‡ºè¿™æ ·çš„å®ç°æ€è·¯è¿˜æ˜¯æœ‰ç‚¹é—®é¢˜ã€‚å› ä¸ºå½“è°ƒç”¨è€…é€šè¿‡ShoppingCartçš„getItems()è·å–åˆ°itemsä¹‹åï¼Œæˆ‘ä»¬è¿˜æ˜¯å¯ä»¥ä¿®æ”¹å®¹å™¨ä¸­æ¯ä¸ªå¯¹è±¡ï¼ˆShoppingCartItemï¼‰çš„æ•°æ®ã€‚å­¦å®Œæœ¬èŠ‚è¯¾ä¹‹åï¼Œç°åœ¨ä½ æœ‰æ²¡æœ‰è§£å†³æ–¹æ³•äº†å‘¢ï¼Ÿ</li>\n</ol><pre><code>public class ShoppingCart {\n  // ...çœç•¥å…¶ä»–ä»£ç ...\n  public List&lt;ShoppingCartItem&gt; getItems() {\n    return Collections.unmodifiableList(this.items);\n  }\n}\n\n// Testing Code in main method:\nShoppingCart cart = new ShoppingCart();\nList&lt;ShoppingCartItem&gt; items = cart.getItems();\nitems.clear();//try to modify the list\n// Exception in thread &quot;main&quot; java.lang.UnsupportedOperationExceptio \n\nShoppingCart cart = new ShoppingCart();\ncart.add(new ShoppingCartItem(...));\nList&lt;ShoppingCartItem&gt; items = cart.getItems();\nShoppingCartItem item = items.get(0);\nitem.setPrice(19.0); // è¿™é‡Œä¿®æ”¹äº†itemçš„ä»·æ ¼å±æ€§\n</code></pre><p>æ¬¢è¿ç•™è¨€å’Œæˆ‘åˆ†äº«ä½ çš„ç–‘æƒ‘å’Œè§è§£ï¼Œå¦‚æœæœ‰æ”¶è·ï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«ç»™ä½ çš„æœ‹å‹ã€‚</p>","neighbors":{"left":{"article_title":"46 | å»ºé€ è€…æ¨¡å¼ï¼šè¯¦è§£æ„é€ å‡½æ•°ã€setæ–¹æ³•ã€å»ºé€ è€…æ¨¡å¼ä¸‰ç§å¯¹è±¡åˆ›å»ºæ–¹å¼","id":199674},"right":{"article_title":"48 | ä»£ç†æ¨¡å¼ï¼šä»£ç†åœ¨RPCã€ç¼“å­˜ã€ç›‘æ§ç­‰åœºæ™¯ä¸­çš„åº”ç”¨","id":201823}},"comments":[{"had_liked":false,"id":179785,"user_name":"LğŸš²ğŸ±","can_delete":false,"product_type":"c1","uid":1577856,"ip_address":"","ucode":"08A012739614DE","user_header":"https://static001.geekbang.org/account/avatar/00/18/13/80/2c9da1b1.jpg","comment_is_top":false,"comment_ctime":1582098677,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"358064384245","product_id":100039001,"comment_content":"é—®é¢˜ 1: é€»è¾‘åˆ é™¤å³å¯<br>é—®é¢˜ 2:  è¿”å›æ·±æ‹·è´å¯¹è±¡","like_count":84,"discussions":[{"author":{"id":1609051,"avatar":"https://static001.geekbang.org/account/avatar/00/18/8d/5b/383a49e4.jpg","nickname":"charmsongo","note":"","ucode":"4FBEE716E93A1A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":413382,"discussion_content":"ç²¾è¾Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636460824,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1015754,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7f/ca/ea85bfdd.jpg","nickname":"helloworld","note":"","ucode":"00DF2FEC58D2E6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":362707,"discussion_content":"æ–‡å­—è¶Šå°‘, ç­”æ¡ˆè¶Šå¯¹, å‰å®³","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617015106,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":210344,"user_name":"é™é™è†å¬","can_delete":false,"product_type":"c1","uid":1263932,"ip_address":"","ucode":"0A8600CB928EFE","user_header":"https://static001.geekbang.org/account/avatar/00/13/49/3c/5d54c510.jpg","comment_is_top":false,"comment_ctime":1587724258,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"207746154466","product_id":100039001,"comment_content":"åŸå‹æ¨¡å¼ï¼Œæœ€ä¸ºå¸¸ç”¨ç»å…¸å°±æ˜¯BeanUtils","like_count":49},{"had_liked":false,"id":179880,"user_name":"è¾£ä¹ˆå¤§","can_delete":false,"product_type":"c1","uid":1396951,"ip_address":"","ucode":"AB308B6DCA0108","user_header":"https://static001.geekbang.org/account/avatar/00/15/50/d7/f82ed283.jpg","comment_is_top":false,"comment_ctime":1582117083,"is_pvip":true,"discussion_count":2,"race_medal":0,"score":"78891528411","product_id":100039001,"comment_content":"é—®é¢˜1:<br>æ–¹æ³•ä¸€ï¼šæ–°æ—§çš„æ•°æ®å–äº¤é›†ï¼Œå¯ä»¥åˆ é™¤æ—§mapä¸­çš„åˆ é™¤å…³é”®å­—ï¼Œä¹‹åçš„é€»è¾‘å°±å’Œæ–‡ç« ä¸­ä¸€æ ·äº†ã€‚<br>æ–¹æ³•äºŒï¼šé€»è¾‘åˆ é™¤ï¼Œå½“mapçš„sizeä¸­å·²åˆ é™¤å æ¯”è¿‡é«˜æ—¶ï¼Œresize mapã€‚<br><br>äº‰å“¥è¯´ï¼šè¿™é‡Œæˆ‘ä»¬åˆ©ç”¨äº† Java ä¸­çš„ clone() è¯­æ³•æ¥å¤åˆ¶ä¸€ä¸ªå¯¹è±¡ã€‚å¦‚æœä½ ç†Ÿæ‚‰çš„è¯­è¨€æ²¡æœ‰è¿™ä¸ªè¯­æ³•ï¼Œé‚£æŠŠæ•°æ®ä» currentKeywords ä¸­ä¸€ä¸ªä¸ªå–å‡ºæ¥ï¼Œç„¶åå†é‡æ–°è®¡ç®—å“ˆå¸Œå€¼ï¼Œæ”¾å…¥åˆ° newKeywords ä¸­ä¹Ÿæ˜¯å¯ä»¥æ¥å—çš„ã€‚<br><br>Java HashMapçš„cloneæ–¹æ³•å°±æŠŠæ•°æ®å–å‡ºæ¥ï¼Œè®¡ç®—hashå€¼ï¼Œåœ¨æ”¾å›å»çš„ã€‚cloneæ–¹æ³•ä¸­ï¼Œè°ƒç”¨äº†putMapEntriesæ–¹æ³•ï¼Œå…¶ä¸­æœ‰ä¸€å…³é”®çš„ä¸€è¡Œï¼Œå…‹éš†é‡æ–°è®¡ç®—äº†hashå€¼ï¼š<br>putVal(hash(key), key, value, false, evict); <br><br>æ–‡ç« ä¸­çš„æ·±å¤åˆ¶ï¼šä¸ºä»€ä¹ˆSearchWordä¸é‡å†™cloneæ–¹æ³•å‘¢ï¼Ÿ<br>@Override<br>protected Object clone() throws CloneNotSupportedException {<br>  SearchWord newWord = new SearchWord(this.keyWord, this.times, this.tmstamp);<br>  return newWord;<br>}<br>","like_count":18,"discussions":[{"author":{"id":1368522,"avatar":"https://static001.geekbang.org/account/avatar/00/14/e1/ca/d8b0835f.jpg","nickname":"æ©˜å­","note":"","ucode":"EDF6145878F897","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":180436,"discussion_content":"ä»–çš„æ„æ€åº”è¯¥æ˜¯è¿™ä¸ªå¯¹è±¡å¯èƒ½é‡Œé¢åˆæœ‰å¯¹è±¡å‘¢ï¼Œé‚£ä¹ˆå¯èƒ½æ— æ­¢å¢ƒçš„å»é‡å†™ã€‚è¿˜æœ‰åœ¨å·²æœ‰çš„ä»£ç å‰æè¿™åº”è¯¥æœ€å°‘ä¿®æ”¹çš„ã€‚","likes_number":6,"is_delete":false,"is_hidden":false,"ctime":1582294717,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1066102,"avatar":"https://static001.geekbang.org/account/avatar/00/10/44/76/a86cfd2a.jpg","nickname":"Akira","note":"","ucode":"A0BFD54A95012D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":551809,"discussion_content":"é‡å†™è¿™ä¸ªcloneå°±ä¼šæŠŠæ²¡æœ‰å˜åŒ–çš„æ•°æ®ä¹Ÿå¤åˆ¶ä¸€ä»½ã€‚æ²¡æœ‰è¾¾åˆ°æµ…æ‹·è´+æ·±æ‹·è´çš„æ€§èƒ½æå‡ç›®çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645145303,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":211018,"user_name":"æ–°çš„èµ·ç‚¹ï¼Œæ–°çš„å¼€å§‹^_^","can_delete":false,"product_type":"c1","uid":1262068,"ip_address":"","ucode":"9C0810F472AC93","user_header":"https://static001.geekbang.org/account/avatar/00/13/41/f4/5df17eff.jpg","comment_is_top":false,"comment_ctime":1587882237,"is_pvip":false,"discussion_count":7,"race_medal":0,"score":"66012391677","product_id":100039001,"comment_content":"æˆ‘æœ‰ä¸ªé—®é¢˜ï¼Œæœ€åä¸€ç§æ–¹å¼ä½¿ç”¨copy()çš„æµ…æ‹·è´+å¯¹è±¡æ›¿æ¢å¯ä»¥æé«˜æ•ˆç‡ã€‚ä½†æ˜¯copy()ä¹‹åï¼Œæ•°æ®åº“ä¸­æ›´æ²¡æœ‰å‘ç”Ÿå˜åŒ–çš„æ•°æ®å…¶å®newKeywordsä¸­æŒ‡å‘çš„è¿˜æ˜¯ä¹‹å‰çš„å¯¹è±¡å¼•ç”¨å•Šï¼Œä¸æ˜¯ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œé‚£è¿™ä¸ªç»“æœä¸ä¹…å’Œéœ€æ±‚å†²çªäº†å—ï¼Ÿéœ€æ±‚æ˜¯ï¼šä»»ä½•æ—¶åˆ»ï¼Œç³»ç»Ÿ A ä¸­çš„æ‰€æœ‰æ•°æ®éƒ½å¿…é¡»æ˜¯åŒä¸€ä¸ªç‰ˆæœ¬çš„ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚è¯´æˆ‘ä¿®æ”¹äº†ä¸€ä¸ªnewKeywordsä¸­valueå¯¹åº”çš„SearchWordå¯¹è±¡çš„æŸä¸ªå±æ€§ï¼Œé‚£ä¹ˆå“åº”çš„ï¼ŒcurrentKeywordsä¸­è‚¯å®šä¹Ÿä¼šå‘ç”Ÿå˜åŒ–ï¼Œå› ä¸ºSearchWordåœ°å€å€¼æ—¶ä¸€æ ·çš„ï¼Œè¿™ä¸ªå°±ä¸æ˜¯åˆšå¼€å§‹è®²çš„æ·±æ‹·è´å¾—åˆ°çš„æ˜¯ä¸€ä»½å®Œå®Œå…¨å…¨ç‹¬ç«‹çš„å¯¹è±¡ï¼Œå®ƒä¸æ˜¯ç‹¬ç«‹çš„ï¼Œåªæœ‰æ•°æ®åº“ä¸­è¢«æ›´æ–°è¿‡çš„æ•°æ®æ˜¯ç‹¬ç«‹çš„ï¼Œå› ä¸ºæ‰§è¡Œäº†map.remove()å’Œmap.put()","like_count":15,"discussions":[{"author":{"id":1236320,"avatar":"https://static001.geekbang.org/account/avatar/00/12/dd/60/a6a4f79a.jpg","nickname":"ç¬¨é¸Ÿ","note":"","ucode":"68029ADA76AA5A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":334876,"discussion_content":"map.remove()æ˜¯æ“ä½œçš„æ‹·è´å‡ºæ¥çš„æ•°æ®,åªæ˜¯ç§»é™¤æ‰æ‹·è´å‡ºæ¥æ•°æ®çš„å¼•ç”¨,æ‰€ä»¥ä¸å½±å“åŸæ•°æ®,ä½†æ˜¯ä½ è·å–åˆ°map.get(key)çš„æ•°æ®,å†ä¿®æ”¹,å°±æ˜¯ä¿®æ”¹çš„åŸæ•°æ®,ä»”ç»†çœ‹ä¸€ä¸‹è®²æ‹·è´é‚£çš„å›¾","likes_number":8,"is_delete":false,"is_hidden":false,"ctime":1608016130,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1398577,"avatar":"https://static001.geekbang.org/account/avatar/00/15/57/31/6772744d.jpg","nickname":"ã¡ã‚ˆãã‚“","note":"","ucode":"B71E9B16E4408F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":314898,"discussion_content":"åŒ…å«åˆ é™¤ï¼Œä¸åŒ…å«æ·»åŠ ï¼Œä¸ç®¡åŒ…å«ä¸åŒ…å«ï¼Œæ›´æ–°çš„éƒ½æ·»åŠ è¿›å»äº†ï¼Œæœ€åç»Ÿä¸€èµ‹å€¼ç»™å½“å‰map","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1603206924,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1712955,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/OYQh8KlUgMx0sZ35felqqRlboXkcOFib0qGgRHuvFCNIMzxRzxN8SjZpwtDuS0PGV0L0Pneiak7yzcd043f2efbg/132","nickname":"Geek_78eadb","note":"","ucode":"843C6C380D28FA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298859,"discussion_content":"ä½ åœ¨å¹»æƒ³ä¸€ä¸ªä¸å­˜åœ¨çš„éœ€æ±‚ï¼šâ€œå®¢æˆ·æƒ³ä¿®æ”¹æ•°æ®â€","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1597448528,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1066102,"avatar":"https://static001.geekbang.org/account/avatar/00/10/44/76/a86cfd2a.jpg","nickname":"Akira","note":"","ucode":"A0BFD54A95012D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":551807,"discussion_content":"éœ€æ±‚è¯´çš„åŒä¸€ç‰ˆæœ¬æŒ‡çš„æ˜¯ï¼šcorrentKeyWordçš„æ•°æ®åœ¨ä»»ä¸€æ—¶åˆ»è¦ä¹ˆæ˜¯è¿‡æœŸçš„å†…å­˜çš„æ•°æ®ï¼Œè¦ä¹ˆæ˜¯æœ€æ–°ä»æ•°æ®åº“è½½å…¥çš„æ•°æ®\næ²¡æœ‰å˜åŒ–çš„å†…å­˜è¿‡æœŸæ•°æ®å’Œæ•°æ®åº“çš„æ•°æ®æ˜¯ä¸€æ ·çš„ã€‚ä¸ç”¨æ·±æ‹·è´ã€‚ç”¨å†…å­˜å·²ç»å­˜åœ¨çš„å°±å¯ä»¥ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645145189,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2664232,"avatar":"","nickname":"è¿½æ¢¦XRer","note":"","ucode":"E04762C9DF6926","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":389912,"discussion_content":"å¯¹è±¡æ›¿æ¢ä½¿ç”¨removeå…ˆç§»å‡º å†putä¸€ä¸ªnewå‡ºæ¥çš„æ–°å¯¹è±¡ è¿™ä¸ªä¸åŸæ¥mapä¸­çš„è¢«å…‹éš†å¯¹è±¡ä¸ä¸€æ ·","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629503939,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1153301,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK3fLmHRZU8qSBDUUAhgRHuGgXiaggMVbIwJIXlBEImPNYbuwNlHzlOA7sR8zcj4Q5OZVWcGDo6sGw/132","nickname":"ori","note":"","ucode":"1F2961EE046DE1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":306377,"discussion_content":"æˆ‘æƒ³äº†ä¸€ä¸‹ï¼Œæ„Ÿè§‰ä½œè€…è¯´çš„ç‰ˆæœ¬åº”è¯¥ä¸æ˜¯è¯´æ•°æ®åº“ä¸­çš„ v2ã€v3 ç‰ˆæœ¬ï¼Œåº”è¯¥æŒ‡çš„æ˜¯ map ä»ä¸€ä¸ªçŠ¶æ€è·³å¾€ä¸‹ä¸€ä¸ªçŠ¶æ€ï¼Œä¸­é—´ä¸è¦å•ç‹¬åˆ‡æ¢æ•°æ®ï¼Œè€Œæ˜¯ç»Ÿä¸€æ›¿æ¢ã€‚\nä¸ç„¶è¿™ä¸ªåŒä¸€ä¸ªç‰ˆæœ¬åœ¨æ•°æ®åº“æ²¡æœ‰ç‰ˆæœ¬å­—æ®µçš„æƒ…å†µä¸‹ï¼Œåªæ˜¯è¯´å†…å­˜ä¸­çš„å€¼å’Œæ•°æ®åº“ä¸€è‡´çš„è¯ï¼Œæµ…æ‹·è´ä¹‹å‰çš„ä»£ç å°±å·²ç»æ»¡è¶³äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600259492,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2085090,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/d0/e2/1d00c079.jpg","nickname":"å†™ä»£ç çš„","note":"","ucode":"F58186409A3D65","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":300533,"discussion_content":"æ²¡å¤ªç†è§£ä½ çš„æ„æ€ï¼Œæ—¢ç„¶æ²¡å‘ç”Ÿå˜åŒ–çš„æ•°æ®ç”¨çš„æ‰æ˜¯å¼•ç”¨ï¼Œä½ åé¢çš„ä¾‹å­åˆå‡è®¾è®©å®ƒçš„æ•°æ®æ”¹å˜äº†ï¼Œè¿™ä¸çŸ›ç›¾äº†å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598160543,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":180303,"user_name":"å²æœˆ","can_delete":false,"product_type":"c1","uid":1337598,"ip_address":"","ucode":"29A2A2BC3C4FE4","user_header":"https://static001.geekbang.org/account/avatar/00/14/68/fe/1353168d.jpg","comment_is_top":false,"comment_ctime":1582253753,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"66006763193","product_id":100039001,"comment_content":"è¯¾å ‚è®¨è®ºé¢˜<br>å…³é”®å­—å¦‚æœæ”¯æŒåˆ é™¤, æœ€ç®€å•é«˜æ•ˆçš„æ–¹æ³•å°±æ˜¯åœ¨æ•°æ®è¡¨é‡ŒåŠ ä¸€ä¸ªdelete boolç±»å‹çš„å­—æ®µ, å ç”¨ç©ºé—´ä¸å¤š, ä½†æ˜¯å¾ˆæ–¹ä¾¿ç¨‹åºè¯†åˆ«æœ€è¿‘æ›´æ–°çš„æ•°æ®é‡Œé¢, æœ‰å“ªæ¡æ˜¯éœ€è¦åˆ é™¤çš„. ä¸è¿‡è¿™æ ·ä¼šå¸¦æ¥ä¸€ä¸ªé—®é¢˜, å°±æ˜¯æ’å…¥æ–°å…³é”®å­—çš„æ—¶å€™, è¦å…ˆæ£€æŸ¥ä¸€ä¸‹æ˜¯å¦å­˜åœ¨åŒåçš„å…³é”®å­—, æœ‰çš„è¯è¦æŠŠdeleteå­—æ®µä¿®æ”¹ä¸ºfalse, æ‰€ä»¥è¿˜éœ€è¦å¯¹å…³é”®å­—å»ºç«‹ç´¢å¼•, è¿™æ ·å¯ä»¥é«˜æ•ˆæŸ¥æ‰¾å‡ºæ˜¯å¦å­˜åœ¨åŒåå…³é”®å­—","like_count":16},{"had_liked":false,"id":181237,"user_name":"ä¸ä¼¼æ—§æ—¥","can_delete":false,"product_type":"c1","uid":1161271,"ip_address":"","ucode":"DF4C5E3AB9570C","user_header":"https://static001.geekbang.org/account/avatar/00/11/b8/37/98991aeb.jpg","comment_is_top":false,"comment_ctime":1582523639,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"48827163895","product_id":100039001,"comment_content":"æ—¢ç„¶è¯´åœ¨Javaä¸­ä¸å¸¸ç”¨é‚£æˆ‘å°±ä¸çœ‹äº†ï¼Œä»¥åæœ‰æ—¶é—´å†å­¦ã€‚","like_count":11,"discussions":[{"author":{"id":1190123,"avatar":"https://static001.geekbang.org/account/avatar/00/12/28/eb/af064421.jpg","nickname":"ç‹äº‰","note":"","ucode":"2B611BE0E0EDD4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":503269,"discussion_content":"ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ ä½ è¯´çš„æ²¡é”™","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597412065,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":203961,"user_name":"å®‰é™","can_delete":false,"product_type":"c1","uid":1212634,"ip_address":"","ucode":"7C4DB6D81A48EB","user_header":"https://static001.geekbang.org/account/avatar/00/12/80/da/9c0c458c.jpg","comment_is_top":false,"comment_ctime":1586312582,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"44535985542","product_id":100039001,"comment_content":"è€å¸ˆï¼Œå°±æ˜¯javaåˆ†å±‚æ¶æ„ä¸­å„å±‚çš„å¯¹è±¡ï¼Œæ¯”å¦‚VOï¼ŒBOï¼ŒPOä¹‹é—´çš„äº’ç›¸è½¬æ¢ï¼Œä½¿ç”¨çš„å°±æ˜¯åŸå‹æ¨¡å¼ï¼Œè€Œåšä¸šåŠ¡å¼€å‘æ¯å¤©éƒ½è¦ä¸è¿™äº›æ‰“äº¤é“ã€‚","like_count":11},{"had_liked":false,"id":179893,"user_name":"å¿†æ°´å¯’","can_delete":false,"product_type":"c1","uid":1147453,"ip_address":"","ucode":"E3F86BD8AA8903","user_header":"https://static001.geekbang.org/account/avatar/00/11/82/3d/356fc3d6.jpg","comment_is_top":false,"comment_ctime":1582118920,"is_pvip":false,"discussion_count":12,"race_medal":0,"score":"40236824584","product_id":100039001,"comment_content":"è®©æˆ‘æƒ³åˆ°äº†linuxä¸‹é¢forkï¼Œå…¶å®å†…æ ¸ä¹Ÿæ˜¯æ‹·è´äº†ä¸€ä»½æ•°æ®ã€‚Javaé‡Œé¢çš„copyonwriteæ˜¯ä¸æ˜¯ä¹Ÿæ˜¯è¿™ç§æ·±æ‹·è´åŸç†å‘¢ï¼Ÿ","like_count":9,"discussions":[{"author":{"id":1190123,"avatar":"https://static001.geekbang.org/account/avatar/00/12/28/eb/af064421.jpg","nickname":"ç‹äº‰","note":"","ucode":"2B611BE0E0EDD4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":502599,"discussion_content":"å—¯å—¯ ä½ çš„è¡¨è¿°æ›´å‡†ç¡®äº›","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596109659,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1134574,"avatar":"https://static001.geekbang.org/account/avatar/00/11/4f/ee/bd08cfab.jpg","nickname":"ä¸€é­„","note":"","ucode":"71541125D4AA5A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":384694,"discussion_content":"ä¸“æ éƒ½å®Œç»“äº†ï¼Œè€å¸ˆè¿˜èƒ½ç­”å¤ï¼ŒğŸ‘ğŸ»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626702057,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1134574,"avatar":"https://static001.geekbang.org/account/avatar/00/11/4f/ee/bd08cfab.jpg","nickname":"ä¸€é­„","note":"","ucode":"71541125D4AA5A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":384693,"discussion_content":"ä¸“æ éƒ½å®Œç»“äº†ï¼Œè€å¸ˆè¿˜èƒ½ç­”å¤ï¼ŒğŸ‘ğŸ»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626702038,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":179704,"user_name":"å°æ™å­","can_delete":false,"product_type":"c1","uid":1132337,"ip_address":"","ucode":"3AAA6FB5ACB6AE","user_header":"https://static001.geekbang.org/account/avatar/00/11/47/31/f35367c8.jpg","comment_is_top":false,"comment_ctime":1582081194,"is_pvip":false,"discussion_count":3,"race_medal":1,"score":"27351884970","product_id":100039001,"comment_content":"1. è€ƒè™‘åˆ°åˆ é™¤å…³é”®è¯ï¼Œé‚£ä¹ˆæœ€å¥½æ•°æ®åº“ä½¿ç”¨è½¯åˆ é™¤ï¼Œè¿™æ ·å¯ä»¥çŸ¥é“å“ªäº›å…³é”®è¯æ˜¯è¢«åˆ é™¤çš„ï¼Œé‚£ä¹ˆæ‹¿åˆ°è¿™äº›è¢«åˆ é™¤çš„å…³é”®è¯å°±å¯ä»¥åœ¨cloneå‡ºæ¥çš„newKeywordsåŸºç¡€ä¸Šï¼Œç›´æ¥removeæ‰å·²ç»åˆ é™¤çš„å“ªäº›å…³é”®è¯å°±å¯ä»¥äº†ã€‚åä¹‹å¦‚æœä¸æ˜¯ä½¿ç”¨çš„è½¯åˆ é™¤ï¼Œé‚£ä¹ˆå°±ä¸å¥½ä½¿ç”¨åŸå‹æ¨¡å¼ï¼Œéœ€è¦è·å–æ–°ç‰ˆæœ¬å…¨é‡æ•°æ®ï¼Œç„¶åå’Œæ—§ç‰ˆæœ¬æ•°æ®ä¸€ä¸€æ¯”å¯¹ï¼Œçœ‹å“ªäº›æ•°æ®æ˜¯è¢«åˆ é™¤çš„äº†ã€‚<br>2. ä»£ç å¦‚ä¸‹ï¼Œå°†åŸæ¥çš„items deep cloneä¸€ä»½ï¼Œè¿™æ ·å°±åˆ‡æ–­äº†ä¸åŸæ¥itemsçš„è”ç³»ã€‚<br>  public class ShoppingCart { <br>    &#47;&#47; ...çœç•¥å…¶ä»–ä»£ç ... <br>    public List&lt;ShoppingCartItem&gt; getItems() {<br>      List&lt;ShoppingCartItem&gt; tmpShoppingCartItems = new ArrayList&lt;&gt;();<br>      tmpShoppingCartItems.addAll(this.items);<br>      return Collections.unmodifiableList(tmpShoppingCartItems); <br>    }<br>  }","like_count":6,"discussions":[{"author":{"id":2731028,"avatar":"https://static001.geekbang.org/account/avatar/00/29/ac/14/a8ff8fec.jpg","nickname":"æ…•è¨€","note":"","ucode":"4918FA682F3895","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":572633,"discussion_content":"ä½ è¿™æ ·é‡æ–°åˆ›å»ºä¸€ä¸ªArrayListå°±æ˜¯æ·±æ‹·è´äº†ï¼Ÿé‡Œé¢çš„itemä¸éœ€è¦æ‹·è´çš„ï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1652879039,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1238436,"avatar":"https://static001.geekbang.org/account/avatar/00/12/e5/a4/e16dca6a.jpg","nickname":"é˜¿å‡¯æ–‡","note":"","ucode":"F17CF201E74849","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":289773,"discussion_content":"å·²ç»è¿”å›æ·±æ‹·è´äº†ä¸ºä»€ä¹ˆè¿˜è¦ç”¨unmodifiableListåŒ…è£…ä¸€ä¸‹ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594210048,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1021539,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/96/63/7eb32c9b.jpg","nickname":"æé±¼çš„æ¬ç –å¥‡","note":"","ucode":"2FD194C4DA26E5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1238436,"avatar":"https://static001.geekbang.org/account/avatar/00/12/e5/a4/e16dca6a.jpg","nickname":"é˜¿å‡¯æ–‡","note":"","ucode":"F17CF201E74849","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":312157,"discussion_content":"è¿™æ˜¯ä¸¤ä»¶äº‹å§ã€‚unmodifiableList() æ˜¯ä¸ºäº†è®©è¿”å›çš„ç»“æœä¸å¯å˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602598253,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":289773,"ip_address":""},"score":312157,"extra":""}]}]},{"had_liked":false,"id":203081,"user_name":"å¼ ä¸‰","can_delete":false,"product_type":"c1","uid":1004092,"ip_address":"","ucode":"1155528FAE1546","user_header":"https://static001.geekbang.org/account/avatar/00/0f/52/3c/d6fcb93a.jpg","comment_is_top":false,"comment_ctime":1586137596,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"23060974076","product_id":100039001,"comment_content":"çœ‹äº†å‡ éæ‰æ˜ç™½ç¬¬ä¸€æ¬¡çš„æµ…æ‹·è´é—®é¢˜åœ¨å“ªï¼Œåœ¨éå†çš„æ—¶å€™å°±å·²ç»æ›¿æ¢äº†å…¶ä¸­ä¸€äº›æ—§å¯¹è±¡ï¼›è€Œæœ€åæµ…æ‹·è´å’Œæ·±æ‹·è´ç»“åˆçš„æ–¹å¼ï¼Œæ˜¯å…ˆæŠŠæµ…æ‹·è´å¾—åˆ°çš„ç´¢å¼•ï¼ˆå¼•ç”¨ï¼‰åˆ é™¤ï¼Œç„¶åå†æ·»åŠ æ–°çš„å¯¹è±¡åˆ°æµ…æ‹·è´ä¸­ï¼Œæœ€ååœ¨éå†ç»“æŸåä¸€å¹¶æ›¿æ¢åŸå‹ã€‚","like_count":5,"discussions":[{"author":{"id":1370125,"avatar":"https://static001.geekbang.org/account/avatar/00/14/e8/0d/6d303d18.jpg","nickname":"æ— åŒBaOY_WHA","note":"","ucode":"41F282C31D256C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":281547,"discussion_content":"å­¦è¿‡C++å°±å¥½ç†è§£æµ…æ‹·è´ä¼šäº§ç”Ÿçš„é—®é¢˜äº†ã€‚æµ…æ‹·è´åªæ˜¯Bæ‹·è´äº†Açš„å†…å­˜åœ°å€ï¼Œè¿™æ ·Aå’ŒBå…±äº«ä¸€å—å†…å­˜é‡Œçš„æ•°æ®ï¼›æ·±æ‹·è´æ˜¯Bé‡æ–°ç”³è¯·ä¸€ä»½å†…å­˜ç©ºé—´ï¼ˆæ‹·è´äº†Aå¯¹åº”çš„å†…å­˜é‡Œå­˜å‚¨çš„æ•°æ®ï¼‰ï¼Œç”¨çš„æ˜¯æ–°çš„å†…å­˜åœ°å€ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1591762530,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2122539,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/BOEEDquKAT3WLFjFlwcyVvKvoW7hgXHtbtBC4YzOtQoAat7eAtnBDjjWsEY5g4JJEj7jvPuboT8LoSGCrAbcgA/132","nickname":"é˜¿éª¨æ‰“","note":"","ucode":"35EADA5550162A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":306257,"discussion_content":"ç¬¬ä¸€æ¬¡ æµ…æ‹·è´ï¼Œ SearchWordè¢«å…±ç”¨äº†ï¼Œé€ æˆéƒ¨åˆ†çš„å…ƒç´ æ˜¯ é«˜ç‰ˆæœ¬ï¼Œéƒ¨åˆ†æ²¡éå†åˆ°çš„æ˜¯ä½ç‰ˆæœ¬","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600230814,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":262015,"user_name":"å†¬ç“œè”¡","can_delete":false,"product_type":"c1","uid":1117673,"ip_address":"","ucode":"2F04A446D28201","user_header":"https://static001.geekbang.org/account/avatar/00/11/0d/e9/2f02a383.jpg","comment_is_top":false,"comment_ctime":1605605757,"is_pvip":false,"replies":[{"id":"96125","content":"ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹äº‰","uid":"1190123","ctime":1606701127,"ip_address":"","comment_id":262015,"utype":1}],"discussion_count":2,"race_medal":0,"score":"14490507645","product_id":100039001,"comment_content":"æ—¥å¸¸å¼€å‘ä¸­å¸¸ç”¨çš„æ˜¯springæä¾›çš„å¯¹è±¡ä¹‹é—´æ‹·è´çš„æ–¹æ³•ï¼š BeanUtils.copyProperties<br>1ã€å¦‚æœæ˜¯åŸºç¡€ç±»å‹ï¼Œåˆ™æ²¡æœ‰é—®é¢˜ã€‚<br>2ã€å¦‚æœè¦æ‹·è´å¯¹è±¡é‡Œé¢æœ‰å°å¯¹è±¡ï¼Œä¸”å°å¯¹è±¡çš„å…¨é™å®šåä¸ä¸€æ ·ï¼Œåˆ™æ‹·è´ç»“æŸåï¼Œè¯¥å¯¹è±¡ä¸ºnullï¼›<br>public class Person {<br>    private Photo photo;<br>}<br>3ã€å¦‚æœè¦æ‹·è´å¯¹è±¡é‡Œé¢æœ‰é›†åˆï¼Œé›†åˆé‡Œé¢å­˜æ”¾çš„æ˜¯å°å¯¹è±¡ï¼Œåˆ™ä¼šç”±äºæ³›å‹çš„å­˜åœ¨ï¼Œå¯ä»¥æ‹·è´æˆåŠŸï¼Œä½†æ˜¯è¿™ä¸ªæ‹·è´çš„å¯¹è±¡æ˜¯é”™è¯¯çš„ï¼Œä¼šåœ¨åç»­ä½¿ç”¨è¿‡ç¨‹ä¸­äº§ç”Ÿé—®é¢˜<br>public class Person {<br>    private List&lt;Photo&gt; photo;<br>}<br><br>æœ¬è´¨ä¸ŠBeanUtils.copyPropertiesæ˜¯æµ…æ‹·è´ï¼Œåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­éœ€è¦å¯¹åµŒå¥—å¯¹è±¡æˆ–è€…é›†åˆè¿›è¡Œé¢å¤–å¤„ç†","like_count":4,"discussions":[{"author":{"id":1190123,"avatar":"https://static001.geekbang.org/account/avatar/00/12/28/eb/af064421.jpg","nickname":"ç‹äº‰","note":"","ucode":"2B611BE0E0EDD4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":509687,"discussion_content":"ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606701127,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1225224,"avatar":"https://static001.geekbang.org/account/avatar/00/12/b2/08/92f42622.jpg","nickname":"å°”å†¬æ©™","note":"","ucode":"0B013A49BC18DA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1190123,"avatar":"https://static001.geekbang.org/account/avatar/00/12/28/eb/af064421.jpg","nickname":"ç‹äº‰","note":"","ucode":"2B611BE0E0EDD4","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":575044,"discussion_content":"é—®å·æ˜¯å•¥æ„æ€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1654569127,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":509687,"ip_address":""},"score":575044,"extra":""}]}]},{"had_liked":false,"id":186936,"user_name":"å¤•æ—è¯­","can_delete":false,"product_type":"c1","uid":1264180,"ip_address":"","ucode":"B57681D0C73E1B","user_header":"https://static001.geekbang.org/account/avatar/00/13/4a/34/1faac99b.jpg","comment_is_top":false,"comment_ctime":1583975842,"is_pvip":false,"discussion_count":3,"race_medal":2,"score":"14468877730","product_id":100039001,"comment_content":"æ•°æ®åº“ä¸­åŠ è½½ 10 ä¸‡æ¡æ•°æ®å¹¶æ„å»ºæ•£åˆ—è¡¨ç´¢å¼•ï¼Œæ“ä½œéå¸¸è€—æ—¶ï¼Œæ¯”è¾ƒæ¨èä½¿ç”¨æµ…æ‹·è´ï¼Œå¦åˆ™ï¼Œæ²¡æœ‰å……åˆ†çš„ç†ç”±ï¼Œä¸è¦ä¸ºäº†ä¸€ç‚¹ç‚¹çš„æ€§èƒ½æå‡è€Œä½¿ç”¨æµ…æ‹·è´ã€‚è¿™é‡Œè¡¨è¿°æœ‰é—®é¢˜å§ï¼Œæœ€ååº”è¯¥æ˜¯æ·±æ‹·è´å§ã€‚ä¸¤ä¸ªæµ…æ‹·è´æ¯”è¾ƒæ€ä¹ˆéƒ½åˆ«æ‰­","like_count":3},{"had_liked":false,"id":180537,"user_name":"javaadu","can_delete":false,"product_type":"c1","uid":1000519,"ip_address":"","ucode":"8C0B140F1C8992","user_header":"https://static001.geekbang.org/account/avatar/00/0f/44/47/3ddb94d0.jpg","comment_is_top":false,"comment_ctime":1582327449,"is_pvip":true,"discussion_count":2,"race_medal":0,"score":"14467229337","product_id":100039001,"comment_content":"æˆ‘åœ¨å®é™…å·¥ä½œä¸­å°±ç”¨åˆ°äº†ç±»ä¼¼çš„ä»£ç ï¼Œè¿™å°±æ˜¯ä¸€ä¸ªå…³é”®è¯è¯†åˆ«æ¨¡å—ï¼Œç¬¬ä¸€æ¬¡åœ¨å­¦ä¹ ä¸“æ ä¸­çœ‹åˆ°å¦‚æ­¤å¥‘åˆç”Ÿäº§çš„ä»£ç ï¼Œå¾ˆèµğŸ‘<br><br>é—®é¢˜1: æ•°æ®åº“ä¸­æ–°å¢ä¸€ä¸ªå­—æ®µæ ‡è¯†é€»è¾‘åˆ é™¤<br>é—®é¢˜2:æ·±æ‹·è´å‡ºå»ï¼Œä¸è¿‡ä¸ºå•¥æˆ‘å¤–éƒ¨éœ€è¦ä¸€ä¸ªæ·±æ‹·è´çš„å¯¹è±¡å‘¢ï¼Œè¿˜æ²¡ç†è§£","like_count":3,"discussions":[{"author":{"id":1190123,"avatar":"https://static001.geekbang.org/account/avatar/00/12/28/eb/af064421.jpg","nickname":"ç‹äº‰","note":"","ucode":"2B611BE0E0EDD4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":492364,"discussion_content":"æ–°ç‰ˆæœ¬çš„å¯ä»¥ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594785934,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":248771,"user_name":"ã¡ã‚ˆãã‚“","can_delete":false,"product_type":"c1","uid":1398577,"ip_address":"","ucode":"B71E9B16E4408F","user_header":"https://static001.geekbang.org/account/avatar/00/15/57/31/6772744d.jpg","comment_is_top":false,"comment_ctime":1600307372,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"10190241964","product_id":100039001,"comment_content":"if (searchWord.getLastUpdateTime() &gt; maxNewUpdatedTime) {<br>        maxNewUpdatedTime = searchWord.getLastUpdateTime();<br>      }<br>è¿™æ®µé€»è¾‘æ²¡çœ‹æ‡‚èµ·ä»€ä¹ˆä½œç”¨ï¼Ÿå’Œä¸‹é¢çš„é¢ä»£ç æ²¡ä»€ä¹ˆé“¾æ¥","like_count":2,"discussions":[{"author":{"id":1577210,"avatar":"https://static001.geekbang.org/account/avatar/00/18/10/fa/d977627e.jpg","nickname":"åˆ˜å¤§äºº","note":"","ucode":"F66AE613E80398","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":345568,"discussion_content":"å¾ªç¯æ—¶æ‰¾å‡ºæœ€å¤§æ—¶é—´æˆ³ï¼Œè·³å‡ºå¾ªç¯åï¼Œå†æŠŠæ—¶é—´æˆ³ èµ‹å€¼ç»™å˜é‡ï¼Œæ–¹ä¾¿ä¸‹ä¸€ä¸ªè·å–æ•°æ®","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1611743184,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":247004,"user_name":"å°æƒ…ç»ª","can_delete":false,"product_type":"c1","uid":1020311,"ip_address":"","ucode":"92D8081DB8DB45","user_header":"https://static001.geekbang.org/account/avatar/00/0f/91/97/3762ca10.jpg","comment_is_top":false,"comment_ctime":1599555463,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10189490055","product_id":100039001,"comment_content":"copy-on-write","like_count":3},{"had_liked":false,"id":179697,"user_name":"å”é¾™","can_delete":false,"product_type":"c1","uid":1471657,"ip_address":"","ucode":"87A10AE04F2037","user_header":"https://static001.geekbang.org/account/avatar/00/16/74/a9/5eb3ebc6.jpg","comment_is_top":false,"comment_ctime":1582080211,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10172014803","product_id":100039001,"comment_content":"ä¹‹å‰å¬è¯´ï¼Œå¯èƒ½ä½ åœ¨ä¸ç»æ„é—´å·²ç»ç”¨è¿‡ä¸€äº›è®¾è®¡æ¨¡å¼äº†ï¼Œä»Šå¤©ç»ˆäºæœ‰è¿™ç§æ„Ÿè§‰äº†ï¼Œç¡®å®å¯¹åŸå‹æ¨¡å¼æœ‰è¿‡ä¸€äº›ç®€å•åº”ç”¨ã€‚","like_count":2},{"had_liked":false,"id":179955,"user_name":"å¹³é£é€ é›¨","can_delete":false,"product_type":"c1","uid":1014349,"ip_address":"","ucode":"F9EE4704F31E22","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7a/4d/b0228a1a.jpg","comment_is_top":false,"comment_ctime":1582126574,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"5877093870","product_id":100039001,"comment_content":"1. ä¸¤ä¸ªMapæ¯”è¾ƒä¸‹keyæ‰¾åˆ°å·®é›†<br>2. å¯ä»¥è¿”å›æ·±å¤åˆ¶çš„è´­ç‰©è½¦ç»“æ„ï¼Œæˆ–è€…å¹²è„†åˆ†æˆä¸¤ä¸ªæ–¹æ³•ï¼Œä¸€ä¸ªè¿”å›æ·±å¤åˆ¶çš„ç»“æ„ï¼Œä¸€ä¸ªè¿”å›å½“å‰ç»“æ„ï¼ŒåŒºåˆ†ä½¿ç”¨åœºæ™¯ã€‚","like_count":1,"discussions":[{"author":{"id":1286251,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a0/6b/0a21b2b8.jpg","nickname":"è¿·ç¾Š","note":"","ucode":"85AF8CED3436C8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":178406,"discussion_content":"å–å·®é›†ä¸è¡Œå§ï¼ŒnewKeyWordsä¸­åªæ˜¯ä»ä¹‹å‰çš„mapå¤åˆ¶è¿‡æ¥çš„ï¼Œåˆ é™¤çš„éƒ½ä¸çŸ¥é“æ˜¯å“ªä¸ªï¼Œé™¤éä½ é‡æ–°å†å»æ•°æ®åº“æä¸€éæ•°æ®ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582161541,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":179656,"user_name":"Summer  ç©ºåŸ","can_delete":false,"product_type":"c1","uid":1337146,"ip_address":"","ucode":"6BDBB70FB6F709","user_header":"https://static001.geekbang.org/account/avatar/00/14/67/3a/0dd9ea02.jpg","comment_is_top":false,"comment_ctime":1582072754,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"5877040050","product_id":100039001,"comment_content":"1ï¼Œåˆ é™¤keyå¯¹äºcloneçš„å¯¹è±¡è€Œè¨€ï¼Œä¸ä¼šå½±å“ä¹‹å‰çš„å¯¹è±¡ï¼Œæ‰€ä»¥å®ç°åº”è¯¥ä¸éœ€è¦å˜åŒ–å§<br>2ï¼Œreturn new ArrayList&lt;&gt;(this.items);","like_count":1,"discussions":[{"author":{"id":2220738,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/cEGxbibA5qcxV9RfNoWgYuqQ66cLVFkd3nHic1tPhErkKb3saicmgSjJLic0P9aXQ8B867jicib5hSickozRy6xCYuWfQ/132","nickname":"Geek_9dce75","note":"","ucode":"47B9535423000B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":328854,"discussion_content":"valueåˆ é™¤äº†å½±å“äº†ï¼Œæœ€å¥½æ˜¯deepclone   ç¬¬äºŒä¸ªé—®é¢˜ä¹Ÿæ˜¯ï¼ŒæŠŠgetitemsé‡Œé¢çš„å†…å®¹å…¨éƒ¨deepcloneä¸€ä¸‹ï¼Œä¿è¯collectioné‡Œé¢çš„itemå…ƒç´ ä¹Ÿæ˜¯ä¸€ä»½ä¸å¯å˜å¯¹è±¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606262013,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":357349,"user_name":"ç®€å•çŒ«","can_delete":false,"product_type":"c1","uid":1866485,"ip_address":"æ±Ÿè¥¿","ucode":"EA027D4C344E25","user_header":"https://static001.geekbang.org/account/avatar/00/1c/7a/f5/54a5084b.jpg","comment_is_top":false,"comment_ctime":1663170510,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1663170510","product_id":100039001,"comment_content":"åŸå‹æ¨¡å¼: æ¸¸æˆä¸­ <br>è§’è‰²è¿›å…¥æˆ˜æ–—åœºé¢åï¼ŒçŠ¶æ€ä¿¡æ¯ ï¼Œæœ‰ä¸€éƒ¨åˆ†æ˜¯deepæ‹·è´ï¼Œæœ‰ä¸€éƒ¨åˆ†æµ…æ‹·è´ã€‚<br>æˆ˜æ–—ç»“æŸåå¹¶ä¸å½±å“äººç‰©çœŸå®å±æ€§ã€‚é™¤äº†è¡€é‡å’Œè“","like_count":0},{"had_liked":false,"id":344709,"user_name":"Geek_7e0e83","can_delete":false,"product_type":"c1","uid":2142423,"ip_address":"","ucode":"554DEE2AAAE33C","user_header":"","comment_is_top":false,"comment_ctime":1651733618,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1651733618","product_id":100039001,"comment_content":"1.å¦‚æœæ•°æ®åº“å¯ä»¥è®¾è®¡æˆé€»è¾‘åˆ é™¤ï¼Œé‚£æ¯æ¬¡è¿›è¡Œæ•°æ®åŒæ­¥çš„æ—¶å€™ï¼Œå°±æŸ¥çœ‹ä¸€ä¸‹é€»è¾‘åˆ é™¤çš„å­—æ®µæ˜¯å¦æ˜¯åˆ é™¤çš„çŠ¶æ€ï¼Œå¦‚æœæ˜¯å°±å°†å†…å­˜ä¸­çš„hashMapå¯¹è±¡è¿›è¡Œé€»è¾‘åˆ é™¤ã€‚å¦‚æœæ•°æ®åº“åªæ”¯æŒç‰©ç†åˆ é™¤ï¼Œå°±åœ¨å¯¹åº”åˆ é™¤çš„ä¸šåŠ¡åŠ¨ä½œä¸Šç›‘å¬ï¼Œå‘ç”Ÿäº†åˆ é™¤å…³é”®è¯çš„æ“ä½œå°±æ›´æ–°å¯¹åº”çš„hashMapã€‚è¿˜æœ‰ä¸€ç§æ–¹å¼å°±æ˜¯ä½¿ç”¨cancalï¼Œç¼–å†™ç›‘å¬è¡¨åˆ é™¤çš„è¯­å¥ï¼Œæ‰§è¡Œå¯¹åº”çš„æ“ä½œã€‚<br><br>2.è¿”å›ä¸€ä¸ªæ·±æ‹·è´çš„å¯¹è±¡ï¼ŒgetItemsæ–¹æ³•æˆ‘ä»¬å°†æ•´ä¸ªlistè¿›è¡Œæ·±æ‹·è´ ç„¶åè¿”å›","like_count":0},{"had_liked":false,"id":338362,"user_name":"Senble","can_delete":false,"product_type":"c1","uid":1330328,"ip_address":"","ucode":"98A8DC9FF625FD","user_header":"https://static001.geekbang.org/account/avatar/00/14/4c/98/2e916c7e.jpg","comment_is_top":false,"comment_ctime":1647438114,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1647438114","product_id":100039001,"comment_content":"é—®é¢˜1ï¼šé€»è¾‘åˆ é™¤ã€‚ç³»ç»ŸBåœ¨æ›´æ–°æ•°æ®åº“æ—¶ä¸æ˜¯çœŸå®åˆ é™¤æ•°æ®ï¼Œè€Œæ˜¯ä¿®æ”¹çŠ¶æ€ï¼Œæ ‡è®°è¢«åˆ é™¤ã€‚ç­‰åˆ°Aè¯»å–æ•°æ®åº“çš„æ—¶å€™ï¼Œå°†æ­¤éƒ¨åˆ†æ•°æ®è¿‡æ»¤å‡ºæ¥ï¼Œç„¶åæ›´æ–°å†…å­˜å†…å®¹å³å¯ã€‚","like_count":0},{"had_liked":false,"id":337044,"user_name":"it to learn","can_delete":false,"product_type":"c1","uid":2407402,"ip_address":"","ucode":"B1D3316042BEAD","user_header":"https://static001.geekbang.org/account/avatar/00/24/bb/ea/160e4c38.jpg","comment_is_top":false,"comment_ctime":1646564693,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1646564693","product_id":100039001,"comment_content":"1ä¸ªå¿«é€Ÿå…‹éš†æ•£åˆ—è¡¨çš„ä¾‹å­ï¼Œæ—¢è®²æ˜ç™½åŸå‹æ¨¡å¼çš„åŸºæœ¬è¦ç‚¹ï¼Œåˆä½“ä¼šåˆ°äº†éœ€æ±‚å˜åŒ–å’Œæˆ–å®ç°å‘ç°é—®é¢˜åçš„ä»£ç è¿­ä»£ï¼Œè€å¸ˆçœŸæ˜¯ç”¨å¿ƒäº†ï¼Œç‚¹ä¸ªèµï¼","like_count":0},{"had_liked":false,"id":332808,"user_name":"æ•°å­¦æ±¤å®¶å‡¤","can_delete":false,"product_type":"c1","uid":2029485,"ip_address":"","ucode":"DE84E777C384AD","user_header":"https://static001.geekbang.org/account/avatar/00/1e/f7/ad/4fd4d867.jpg","comment_is_top":false,"comment_ctime":1643661531,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1643661531","product_id":100039001,"comment_content":"è¿™ä¹Ÿèƒ½æˆä¸ºè®¾è®¡æ¨¡å¼ï¼Ÿä¸å°±å®ç°äº†ä¸€ä¸ªæ·±åº¦æ‹·è´å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":331024,"user_name":"theory18","can_delete":false,"product_type":"c1","uid":1339502,"ip_address":"","ucode":"F3C96051F563F8","user_header":"https://static001.geekbang.org/account/avatar/00/14/70/6e/8f9d9fe9.jpg","comment_is_top":false,"comment_ctime":1642383210,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1642383210","product_id":100039001,"comment_content":"å†™æ—¶å¤åˆ¶cow","like_count":0},{"had_liked":false,"id":320703,"user_name":"charmsongo","can_delete":false,"product_type":"c1","uid":1609051,"ip_address":"","ucode":"4FBEE716E93A1A","user_header":"https://static001.geekbang.org/account/avatar/00/18/8d/5b/383a49e4.jpg","comment_is_top":false,"comment_ctime":1636461352,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1636461352","product_id":100039001,"comment_content":"æ€»ç»“<br>1ã€åŸå‹æ¨¡å¼çš„åŸç†ä¸åº”ç”¨<br>\tåŸºäºåŸå‹æ¥åˆ›å»ºå¯¹è±¡çš„æ–¹å¼å°±å«ä½œåŸå‹è®¾è®¡æ¨¡å¼ï¼ˆPrototype Design Patternï¼‰ï¼Œç®€ç§°åŸå‹æ¨¡å¼ã€‚<br>\tæœ€è€—æ—¶çš„è¿˜æ˜¯ä»æ•°æ®åº“ä¸­å–æ•°æ®çš„æ“ä½œã€‚ç›¸å¯¹äºæ•°æ®åº“çš„ IO æ“ä½œæ¥è¯´ï¼Œå†…å­˜æ“ä½œå’Œ CPU è®¡ç®—çš„è€—æ—¶éƒ½æ˜¯å¯ä»¥å¿½ç•¥çš„ã€‚<br>2ã€åŸå‹æ¨¡å¼çš„å®ç°æ–¹å¼ï¼šæ·±æ‹·è´å’Œæµ…æ‹·è´<br>\tæµ…æ‹·è´å’Œæ·±æ‹·è´çš„åŒºåˆ«åœ¨äºï¼Œæµ…æ‹·è´åªä¼šå¤åˆ¶ç´¢å¼•ï¼‰ï¼Œä¸ä¼šå¤åˆ¶æ•°æ®ã€‚ç›¸åï¼Œæ·±æ‹·è´ä¸ä»…ä»…ä¼šå¤åˆ¶ç´¢å¼•ï¼Œè¿˜ä¼šå¤åˆ¶æ•°æ®æœ¬èº«ã€‚<br>\tç¬¬ä¸€ç§æ–¹æ³•ï¼šé€’å½’æ‹·è´å¯¹è±¡<br>\tç¬¬äºŒç§æ–¹æ³•ï¼šåºåˆ—åŒ–ï¼Œå†ååºåˆ—åŒ–<br>","like_count":0},{"had_liked":false,"id":320577,"user_name":"é™âœ¨","can_delete":false,"product_type":"c1","uid":1658413,"ip_address":"","ucode":"1B33229C206339","user_header":"https://static001.geekbang.org/account/avatar/00/19/4e/2d/06d3f9f5.jpg","comment_is_top":false,"comment_ctime":1636384867,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1636384867","product_id":100039001,"comment_content":"æƒ³åˆ°çº¿ç¨‹çš„forkâ€¦","like_count":0},{"had_liked":false,"id":319543,"user_name":"Dale","can_delete":false,"product_type":"c1","uid":1242602,"ip_address":"","ucode":"AD19A33FE5EEDF","user_header":"https://static001.geekbang.org/account/avatar/00/12/f5/ea/5f046856.jpg","comment_is_top":false,"comment_ctime":1635845521,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1635845521","product_id":100039001,"comment_content":"è·Ÿ JS é‡Œçš„â€œåŸå‹â€å·®åˆ«è¿˜æ˜¯æœ‰ç‚¹å¤§","like_count":0},{"had_liked":false,"id":314389,"user_name":"bigSheller","can_delete":false,"product_type":"c1","uid":2654280,"ip_address":"","ucode":"BFE786598F174D","user_header":"https://static001.geekbang.org/account/avatar/00/28/80/48/7e93bfab.jpg","comment_is_top":false,"comment_ctime":1632994260,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1632994260","product_id":100039001,"comment_content":"é—®é¢˜1ï¼šmapç»´æŠ¤ä¸€ä¸ªç‰ˆæœ¬ï¼Œå½“getçš„å¯¹è±¡ç‰ˆæœ¬å°äºå½“å‰ç‰ˆæœ¬ï¼Œå»æ£€æŸ¥æ•°æ®åº“æ˜¯å¦å­˜åœ¨ã€‚æ£€æŸ¥å®Œåæ›´æ–°mapå’Œç‰ˆæœ¬ã€‚è¿™æ ·é¿å…äº†ä¸€æ¬¡æ€§å…¨é‡æŸ¥è¯¢æ•°æ®åº“å»æ›´æ–°","like_count":0},{"had_liked":false,"id":311302,"user_name":"Jiantao","can_delete":false,"product_type":"c1","uid":1163504,"ip_address":"","ucode":"444580EC5EF109","user_header":"https://static001.geekbang.org/account/avatar/00/11/c0/f0/1aabc056.jpg","comment_is_top":false,"comment_ctime":1631162982,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1631162982","product_id":100039001,"comment_content":"è¯¾å ‚è®¨è®º1: é€»è¾‘åˆ é™¤ï¼Œä¸æ›´æ”¹æ•°æ®åº“ä¸­æ•°æ®ã€‚<br>è¯¾å ‚è®¨è®º2: ä½¿ç”¨æ·±æ‹·è´ï¼Œå¤åˆ¶ items æ•°æ®ã€‚","like_count":0},{"had_liked":false,"id":308322,"user_name":"Jerry","can_delete":false,"product_type":"c1","uid":2716807,"ip_address":"","ucode":"B110E4FC69DC45","user_header":"https://static001.geekbang.org/account/avatar/00/29/74/87/45531d8b.jpg","comment_is_top":false,"comment_ctime":1629534193,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1629534193","product_id":100039001,"comment_content":"è¿™ç¯‡æ²¡æ€ä¹ˆçœ‹æ‡‚","like_count":0},{"had_liked":false,"id":306555,"user_name":"Geek_Candice","can_delete":false,"product_type":"c1","uid":2475056,"ip_address":"","ucode":"0F2CBCF624F905","user_header":"https://static001.geekbang.org/account/avatar/00/25/c4/30/711b03e5.jpg","comment_is_top":false,"comment_ctime":1628606492,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1628606492","product_id":100039001,"comment_content":"é€šä¿—æ˜“æ‡‚çš„è®²ï¼Œå†™å…¥æ—¶å¤åˆ¶æŠ€æœ¯å°±æ˜¯ä¸åŒè¿›ç¨‹åœ¨è®¿é—®åŒä¸€èµ„æºçš„æ—¶å€™ï¼Œåªæœ‰æ›´æ–°æ“ä½œï¼Œæ‰ä¼šå»å¤åˆ¶ä¸€ä»½æ–°çš„æ•°æ®å¹¶æ›´æ–°æ›¿æ¢ï¼Œå¦åˆ™éƒ½æ˜¯è®¿é—®åŒä¸€ä¸ªèµ„æºã€‚<br>1.ä¼˜ç‚¹<br>å¯¹äºä¸€äº›è¯»å¤šå†™å°‘çš„æ•°æ®ï¼Œå†™å…¥æ—¶å¤åˆ¶çš„åšæ³•å°±å¾ˆä¸é”™ï¼Œä¾‹å¦‚é…ç½®ã€é»‘åå•ã€ç‰©æµåœ°å€ç­‰å˜åŒ–éå¸¸å°‘çš„æ•°æ®ï¼Œè¿™æ˜¯ä¸€ç§æ— é”çš„å®ç°ã€‚å¯ä»¥å¸®æˆ‘ä»¬å®ç°ç¨‹åºæ›´é«˜çš„å¹¶å‘ã€‚<br><br>CopyOnWriteArrayList å¹¶å‘å®‰å…¨ä¸”æ€§èƒ½æ¯” Vector å¥½ã€‚Vector æ˜¯å¢åˆ æ”¹æŸ¥æ–¹æ³•éƒ½åŠ äº†synchronized æ¥ä¿è¯åŒæ­¥ï¼Œä½†æ˜¯æ¯ä¸ªæ–¹æ³•æ‰§è¡Œçš„æ—¶å€™éƒ½è¦å»è·å¾—é”ï¼Œæ€§èƒ½å°±ä¼šå¤§å¤§ä¸‹é™ï¼Œè€Œ CopyOnWriteArrayList åªæ˜¯åœ¨å¢åˆ æ”¹ä¸ŠåŠ é”ï¼Œä½†æ˜¯è¯»ä¸åŠ é”ï¼Œåœ¨è¯»æ–¹é¢çš„æ€§èƒ½å°±å¥½äº Vectorã€‚<br><br>2.ç¼ºç‚¹<br>æ•°æ®ä¸€è‡´æ€§é—®é¢˜ã€‚è¿™ç§å®ç°åªæ˜¯ä¿è¯æ•°æ®çš„æœ€ç»ˆä¸€è‡´æ€§ï¼Œåœ¨æ·»åŠ åˆ°æ‹·è´æ•°æ®è€Œè¿˜æ²¡è¿›è¡Œæ›¿æ¢çš„æ—¶å€™ï¼Œè¯»åˆ°çš„ä»ç„¶æ˜¯æ—§æ•°æ®ã€‚<br><br>å†…å­˜å ç”¨é—®é¢˜ã€‚å¦‚æœå¯¹è±¡æ¯”è¾ƒå¤§ï¼Œé¢‘ç¹åœ°è¿›è¡Œæ›¿æ¢ä¼šæ¶ˆè€—å†…å­˜ï¼Œä»è€Œå¼•å‘ Java çš„ GC é—®é¢˜ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬åº”è¯¥è€ƒè™‘å…¶ä»–çš„å®¹å™¨ï¼Œä¾‹å¦‚ ConcurrentHashMapã€‚","like_count":0},{"had_liked":false,"id":296790,"user_name":"JKwar","can_delete":false,"product_type":"c1","uid":1047466,"ip_address":"","ucode":"B733CA24D5701F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fb/aa/01fedf6c.jpg","comment_is_top":false,"comment_ctime":1623161407,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"1623161407","product_id":100039001,"comment_content":"è¯¾å ‚è®¨è®º1:é€»è¾‘åˆ é™¤ï¼Œä¸æ›´æ”¹æ•°æ®åº“ä¸­æ•°æ®ã€‚<br>è¯¾å ‚è®¨è®º2: ä½¿ç”¨æ·±æ‹·è´ï¼Œå¤åˆ¶ items æ•°æ®ã€‚","like_count":0},{"had_liked":false,"id":291676,"user_name":"Gandalf","can_delete":false,"product_type":"c1","uid":1267039,"ip_address":"","ucode":"3881987167B713","user_header":"https://static001.geekbang.org/account/avatar/00/13/55/5f/5dc667c3.jpg","comment_is_top":false,"comment_ctime":1620428815,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1620428815","product_id":100039001,"comment_content":"é—®é¢˜1ï¼šå¢åŠ versionç‰ˆæœ¬å·é€»è¾‘åˆ é™¤<br>é—®é¢˜2ï¼šreturn new Arraylist&lt;&gt;(this.items);","like_count":0,"discussions":[{"author":{"id":2731028,"avatar":"https://static001.geekbang.org/account/avatar/00/29/ac/14/a8ff8fec.jpg","nickname":"æ…•è¨€","note":"","ucode":"4918FA682F3895","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":572635,"discussion_content":"é—®é¢˜2è¿™æ ·åšè¿˜æ˜¯æ— æ³•è§£å†³é—®é¢˜ï¼Œå› ä¸ºè¿™æ ·å†™æ˜¯æµ…æ‹·è´","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1652879356,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":287041,"user_name":"ä¿ºèƒ½å­¦ä¸ªå•¥","can_delete":false,"product_type":"c1","uid":1026742,"ip_address":"","ucode":"30740C5B58774C","user_header":"https://static001.geekbang.org/account/avatar/00/0f/aa/b6/46a5bbf3.jpg","comment_is_top":false,"comment_ctime":1617757253,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1617757253","product_id":100039001,"comment_content":"æˆ‘ç†è§£åˆ é™¤å¯ä»¥ç”¨ä¸€ä¸ªå­—æ®µæ ‡è¯†åˆ é™¤ï¼Œè¿™æ ·ç»Ÿä¸€å¤šä¸€æ¬¡åˆ¤æ–­ï¼Œåˆ é™¤å°±remove","like_count":0},{"had_liked":false,"id":283686,"user_name":"Yeyw","can_delete":false,"product_type":"c1","uid":1463740,"ip_address":"","ucode":"C9D20DB91C3BE5","user_header":"https://static001.geekbang.org/account/avatar/00/16/55/bc/fad0090b.jpg","comment_is_top":false,"comment_ctime":1615885001,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1615885001","product_id":100039001,"comment_content":"1. å½“å‰ç‰ˆæœ¬çš„ è¿›è¡Œæ›´æ–°ä¿®æ”¹åˆ é™¤ï¼Œä»…åœ¨å†…å­˜åšï¼Œå¢åŠ ç›¸åº”å­—æ®µï¼Œç­‰åˆ·æ–°çš„æ—¶å€™å†åŒæ­¥åˆ°æ•°æ®åº“ï¼Œä½†æ˜¯æœ‰ä¸ªé—®é¢˜ï¼Œå®•æœºæ•°æ®éƒ½æ²¡äº†ã€‚<br>2. æ·±æ‹·è´å°±å®Œäº‹äº†","like_count":0},{"had_liked":false,"id":269776,"user_name":"cw","can_delete":false,"product_type":"c1","uid":1264296,"ip_address":"","ucode":"82A6B50462F9F9","user_header":"https://static001.geekbang.org/account/avatar/00/13/4a/a8/b7e36dd2.jpg","comment_is_top":false,"comment_ctime":1608782332,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1608782332","product_id":100039001,"comment_content":"åŸå‹æ¨¡å¼ æœ¬è´¨ä¸Šæ˜¯ä¸ºäº†è§£å†³å¤§é‡å¯¹è±¡copyæ—¶æ‰€å¸¦æ¥çš„çš„æ€§èƒ½å½±å“ ","like_count":0},{"had_liked":false,"id":268421,"user_name":"éƒ‘å¤§é’±","can_delete":false,"product_type":"c1","uid":1503067,"ip_address":"","ucode":"114CF48056880E","user_header":"https://static001.geekbang.org/account/avatar/00/16/ef/5b/ff28088f.jpg","comment_is_top":false,"comment_ctime":1608190621,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1608190621","product_id":100039001,"comment_content":"åŸå‹æ¨¡å¼å°±æ˜¯ç”¨å·²æœ‰çš„å¯¹è±¡ï¼Œé€šè¿‡å¤åˆ¶çš„æ–¹å¼åˆ›å»ºä¸€ä¸ªæ–°çš„çš„å¯¹è±¡ã€‚è¿™ç§æ¨¡å¼é’ˆå¯¹çš„æ˜¯å¯¹è±¡åˆå§‹åŒ–å¾ˆå¤æ‚æˆ–èµ„æºæ¶ˆè€—ç‰¹åˆ«å¤§çš„æƒ…å†µã€‚<br>æ—©æœŸåœ¨ç½‘ä¸Šçœ‹åˆ°ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œå°±æƒ³ç”¨å®ƒæ¥é‡æ„ä»£ç ï¼Œç»“æœæ²¡æœ‰ä»€ä¹ˆä¼˜åŒ–æ•ˆæœã€‚è¿˜è‡ªæ¬ºæ¬ºäººçš„è¯´ä»£ç å˜æ•´æ´äº†ï¼Œå…¶å®åªæ˜¯ä»£ç å˜ç†Ÿæ‚‰äº†ï¼Œæ„ŸåŠ¨çš„åªæœ‰æˆ‘è‡ªå·±ã€‚<br>ç”¨åºåˆ—åŒ–çš„æ–¹å¼å®ç°æ·±æ‹·è´ï¼Œæ˜¯æˆ‘å®Œå…¨æ²¡æœ‰æƒ³åˆ°çš„è¿‡æ–¹å¼ï¼Œmarkï¼","like_count":0},{"had_liked":false,"id":265255,"user_name":"é˜¿éª¨æ‰“","can_delete":false,"product_type":"c1","uid":2122539,"ip_address":"","ucode":"35EADA5550162A","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/BOEEDquKAT3WLFjFlwcyVvKvoW7hgXHtbtBC4YzOtQoAat7eAtnBDjjWsEY5g4JJEj7jvPuboT8LoSGCrAbcgA/132","comment_is_top":false,"comment_ctime":1606830830,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1606830830","product_id":100039001,"comment_content":"æˆ‘åˆçœ‹äº†ä¸‹hashmapçš„clone()ï¼Œ ä¸çŸ¥é“æˆ‘ç†è§£çš„å¯¹ä¸<br>cloneï¼ˆï¼‰æ—¶ï¼Œç”Ÿæˆäº†æ–°çš„node[ ]ï¼Œå¹¶ä¸”æŠŠåŸæ¥çš„node[]ä¸­çš„nodeå…¨éƒ¨æ‹¿å‡ºæ¥ï¼Œåˆ›å»ºäº†æ–°çš„Node<br>æ¯ä¸ªæ–°node(oldKey,oldValue, next:null ),ä¹Ÿå°±æ˜¯è¯´ å¹¶ä¸æ˜¯æ¯ä¸ªnodeéƒ½æ˜¯ å¼•ç”¨åœ°å€ï¼Œ<br>åªæœ‰æ–°nodeä¸­çš„key-valueç”¨çš„æ˜¯ è€æ•°æ®å¼•ç”¨åœ°å€ï¼Œè€Œ next éå¸¸å…³é”®ï¼Œæ˜¯æ–°åšçš„ï¼Œ<br>æ‰€ä»¥hashmap clone() ä¹‹åï¼Œæ–°å¢ åˆ é™¤ éƒ½ä¸ä¼šå½±å“åˆ°è€çš„map","like_count":0},{"had_liked":false,"id":260979,"user_name":"é—´æ¥æ€§å¤±å¿†æ‚£è€…","can_delete":false,"product_type":"c1","uid":2143290,"ip_address":"","ucode":"73593933070CB9","user_header":"https://static001.geekbang.org/account/avatar/00/20/b4/3a/53b27094.jpg","comment_is_top":false,"comment_ctime":1605166122,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1605166122","product_id":100039001,"comment_content":"æœ‰ä¸ªç–‘é—®ï¼š<br>  if (newKeyWords.containsKey(searchWord.keyWord)) {<br>                &#47;&#47;åˆ é™¤æµ…æ‹·è´ä¸­çš„ç´¢å¼•<br>                newKeyWords.remove(searchWord.keyWord);<br>            }<br>è¿™ä¸€æ­¥æ˜¯ä¸æ˜¯å¯ä»¥ä¸éœ€è¦ï¼Ÿ <br> newKeyWords.put(searchWord.keyWord, searchWord);<br>åé¢æ”¾å…¥å®ä¾‹ï¼Œå®é™…ä¸Šå·²ç»å°†åœ°å€è¦†ç›–äº†å§","like_count":0,"discussions":[{"author":{"id":2731028,"avatar":"https://static001.geekbang.org/account/avatar/00/29/ac/14/a8ff8fec.jpg","nickname":"æ…•è¨€","note":"","ucode":"4918FA682F3895","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":572636,"discussion_content":"æˆ‘ä¹Ÿè§‰å¾—å¯ä»¥ä¸ç”¨å†™removeè¿™å¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1652879402,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":254151,"user_name":"æ—¶å…‰å®ˆæŠ¤è€…-åŸºå…°","can_delete":false,"product_type":"c1","uid":1554995,"ip_address":"","ucode":"F0B0887B1979D2","user_header":"https://static001.geekbang.org/account/avatar/00/17/ba/33/2d83d174.jpg","comment_is_top":false,"comment_ctime":1603072073,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1603072073","product_id":100039001,"comment_content":"åˆšæ‰ç†è§£çš„æœ‰é—®é¢˜ï¼Œä¸ä¼šå½±å“ç‰ˆæœ¬ä¸€è‡´","like_count":0},{"had_liked":false,"id":254139,"user_name":"æ—¶å…‰å®ˆæŠ¤è€…-åŸºå…°","can_delete":false,"product_type":"c1","uid":1554995,"ip_address":"","ucode":"F0B0887B1979D2","user_header":"https://static001.geekbang.org/account/avatar/00/17/ba/33/2d83d174.jpg","comment_is_top":false,"comment_ctime":1603071006,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1603071006","product_id":100039001,"comment_content":"æµ…æ‹·è´æ–¹å¼å½“newKeywordsä¸­çš„éœ€è¦æ›´æ–°çš„SearchWordå¯¹è±¡æ²¡æœ‰æ›¿æ¢å®Œï¼ŒcurrentKeywordsä¸­çš„æ•°æ®ä¹Ÿä¼šå­˜åœ¨ç‰ˆæœ¬ä¸ä¸€è‡´å§ï¼Ÿ","like_count":0},{"had_liked":false,"id":244617,"user_name":"é£ç¿”","can_delete":false,"product_type":"c1","uid":1065986,"ip_address":"","ucode":"3D3D10273BED18","user_header":"https://static001.geekbang.org/account/avatar/00/10/44/02/5c8e4b81.jpg","comment_is_top":false,"comment_ctime":1598596483,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1598596483","product_id":100039001,"comment_content":"1  æ•°æ®åº“æ·»åŠ ä¸€ä¸ªå­—æ®µ is_deleted æ ‡è¯†æ˜¯å¦åˆ é™¤ï¼Œè·å–å¤§äºä¸Šæ¬¡æ›´æ–°æ—¶é—´åæ‰€æœ‰å˜æ›´å¯¹è±¡ï¼ŒæŸ¥çœ‹å­—æ®µæ¥æŸ¥çœ‹æ˜¯å¦æ˜¯è¢«åˆ é™¤çš„å¯¹è±¡<br>2 å®Œå…¨å¤åˆ¶æ•´ä¸ªitemå¯¹è±¡ï¼Œè¿™æ ·å¤–éƒ¨å¯æ›´æ”¹itemçš„ä»·æ ¼ï¼Œä½†æ˜¯ä¸å½±å“shoppingcar æœ¬èº«çš„è®¡ä»·","like_count":0},{"had_liked":false,"id":243920,"user_name":"å¢æ²»ä¸œ","can_delete":false,"product_type":"c1","uid":1879151,"ip_address":"","ucode":"6A003597749EA0","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJQicDg3XUa0r3foqfOiaegicaGtGAPbt81sYkzNibLic8Dtp1f51f1zDg7fhTyJZZIzXBiafC50Flb6nkA/132","comment_is_top":false,"comment_ctime":1598326884,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"1598326884","product_id":100039001,"comment_content":"æœ€åè¿™ä¸ªdemoçš„removeæœ‰å¿…è¦å—ï¼Ÿ<br>public class Demo {<br>  private HashMap&lt;String, SearchWord&gt; currentKeywords=new HashMap&lt;&gt;();<br>  private long lastUpdateTime = -1;<br><br>  public void refresh() {<br>    &#47;&#47; Shallow copy<br>    HashMap&lt;String, SearchWord&gt; newKeywords = (HashMap&lt;String, SearchWord&gt;) currentKeywords.clone();<br><br>    &#47;&#47; ä»æ•°æ®åº“ä¸­å–å‡ºæ›´æ–°æ—¶é—´&gt;lastUpdateTimeçš„æ•°æ®ï¼Œæ”¾å…¥åˆ°newKeywordsä¸­<br>    List&lt;SearchWord&gt; toBeUpdatedSearchWords = getSearchWords(lastUpdateTime);<br>    long maxNewUpdatedTime = lastUpdateTime;<br>    for (SearchWord searchWord : toBeUpdatedSearchWords) {<br>      if (searchWord.getLastUpdateTime() &gt; maxNewUpdatedTime) {<br>        maxNewUpdatedTime = searchWord.getLastUpdateTime();<br>      }<br>      if (newKeywords.containsKey(searchWord.getKeyword())) {<br>        newKeywords.remove(searchWord.getKeyword());<br>      }<br>      newKeywords.put(searchWord.getKeyword(), searchWord);<br>    }<br><br>    lastUpdateTime = maxNewUpdatedTime;<br>    currentKeywords = newKeywords;<br>  }<br><br>  private List&lt;SearchWord&gt; getSearchWords(long lastUpdateTime) {<br>    &#47;&#47; TODO: ä»æ•°æ®åº“ä¸­å–å‡ºæ›´æ–°æ—¶é—´&gt;lastUpdateTimeçš„æ•°æ®<br>    return null;<br>  }<br>}","like_count":0,"discussions":[{"author":{"id":1577580,"avatar":"https://static001.geekbang.org/account/avatar/00/18/12/6c/61a598e9.jpg","nickname":"è‹æš®æ²‰è§","note":"","ucode":"532B816D4EF47B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":128257,"discussion_content":"æ„é€ å‚æ•°é‡Œé¢ç”¨thisï¼Œæ˜¯ä¸ºäº†å£°æ˜æ˜¯ç»™ç±»ä¸­çš„å±æ€§èµ‹å€¼ï¼Œåœ¨è€å¸ˆçš„æ„é€ å™¨ä»£ç ä¸­ï¼Œè¿™ä¸ªthisä¸å†™ä¹Ÿå¯ä»¥ã€‚åœ¨ä¸€ä¸ªç±»çš„æ–¹æ³•ä½“ä¸­ï¼Œä¸€èˆ¬æ˜¯ä¸ä¼šä¸»åŠ¨å£°æ˜thisçš„ï¼Œé™¤éä¼ å…¥å‚æ•°ä¸­å­˜åœ¨åŒæ ·çš„å‚æ•°åæˆ–è€…æ–¹æ³•ä½“ä¸­åˆ›å»ºäº†åŒåçš„å±€éƒ¨å˜é‡ï¼Œè¿™æ—¶å€™æ‰ä¼šç‰¹æ„ä½¿ç”¨thisã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578623793,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":232701,"user_name":"æ”¹åä¸æ¢äºº","can_delete":false,"product_type":"c1","uid":1118242,"ip_address":"","ucode":"7E25577829FA0F","user_header":"https://static001.geekbang.org/account/avatar/00/11/10/22/910f705c.jpg","comment_is_top":false,"comment_ctime":1594092748,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1594092748","product_id":100039001,"comment_content":"1 æ•°æ®åº“ä¸­çš„æ•°æ® å¢åŠ é€»è¾‘åˆ é™¤çŠ¶æ€<br>2 getItemså¾—åˆ°çš„å¯¹è±¡é€šè¿‡æ·±æ‹·è´æ–¹å¼ï¼Œè¿”å›æ‹·è´åçš„æ–°å¯¹è±¡ï¼Œè¿™æ ·å³ä½¿å¯¹itemsçš„listä¸­å…ƒç´ çš„ä¿®æ”¹ä¹Ÿä¸ä¼šå½±å“åˆ°åŸæœ‰çš„é›†åˆä¸­çš„items","like_count":0},{"had_liked":false,"id":232212,"user_name":"å—åŒ—å°‘å¿","can_delete":false,"product_type":"c1","uid":1018958,"ip_address":"","ucode":"DFCC59F2BBD8CE","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8c/4e/b81969fa.jpg","comment_is_top":false,"comment_ctime":1593921933,"is_pvip":false,"replies":[{"id":"85754","content":"ä½ è”ç³»ä¸€ä¸‹ä¸Šä¸‹æ–‡çœ‹ä¸‹ï¼Œéƒ½æœ‰è®²åˆ°çš„","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹äº‰","uid":"1190123","ctime":1593994347,"ip_address":"","comment_id":232212,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1593921933","product_id":100039001,"comment_content":"å¦‚æœå¯¹è±¡çš„åˆ›å»ºæˆæœ¬æ¯”è¾ƒå¤§ï¼Œè€ŒåŒä¸€ä¸ªç±»çš„ä¸åŒå¯¹è±¡ä¹‹é—´å·®åˆ«ä¸å¤§ï¼ˆå¤§éƒ¨åˆ†å­—æ®µéƒ½ç›¸åŒï¼‰ ...<br>è¿™å¥è¯æ²¡æœ‰æƒ³æ˜ç™½","like_count":0,"discussions":[{"author":{"id":1190123,"avatar":"https://static001.geekbang.org/account/avatar/00/12/28/eb/af064421.jpg","nickname":"ç‹äº‰","note":"","ucode":"2B611BE0E0EDD4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476711,"discussion_content":"é‚£ä¸ªå¼‚å¸¸å¯ä»¥æ˜¯è‡ªå®šä¹‰çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575424785,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1714156,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/27/ec/9f6e999d.jpg","nickname":"è¨€","note":"","ucode":"483EE23D2EA2E6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":71493,"discussion_content":"è°¢è°¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575425386,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":232193,"user_name":"å”¯å¥¹å‘½","can_delete":false,"product_type":"c1","uid":1240398,"ip_address":"","ucode":"8F687E8D306840","user_header":"https://static001.geekbang.org/account/avatar/00/12/ed/4e/ef406442.jpg","comment_is_top":false,"comment_ctime":1593916116,"is_pvip":false,"replies":[{"id":"86252","content":"lastUpdateTime  maxNewUpdatedTime   searchWord.getLastUpdateTime()ä¸‰è€…çš„å…³ç³»ä½ ç†ä¸€ç†","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹äº‰","uid":"1190123","ctime":1594388087,"ip_address":"","comment_id":232193,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1593916116","product_id":100039001,"comment_content":"<br>public class Demo {<br>  private ConcurrentHashMap&lt;String, SearchWord&gt; currentKeywords = new ConcurrentHashMap&lt;&gt;();<br>  private long lastUpdateTime = -1;<br><br>  public void refresh() {<br>    &#47;&#47; ä»æ•°æ®åº“ä¸­å–å‡ºæ›´æ–°æ—¶é—´&gt;lastUpdateTimeçš„æ•°æ®ï¼Œæ”¾å…¥åˆ°currentKeywordsä¸­<br>    List&lt;SearchWord&gt; toBeUpdatedSearchWords = getSearchWords(lastUpdateTime);<br>    long maxNewUpdatedTime = lastUpdateTime;<br>    for (SearchWord searchWord : toBeUpdatedSearchWords) {<br>      if (searchWord.getLastUpdateTime() &gt; maxNewUpdatedTime) {<br>        maxNewUpdatedTime = searchWord.getLastUpdateTime();<br>      }<br>}<br><br>ä»£ç æœ‰é—®é¢˜å•Šï¼Œ   List&lt;SearchWord&gt; toBeUpdatedSearchWords = getSearchWords(lastUpdateTime);<br>toBeUpdatedSearchWordsé‡Œçš„æ•°æ®æ˜¯æ”¹è¿‡çš„æ•°æ®ï¼Œæ—¶é—´éƒ½å¤§äºlastUpdateTime<br>é‚£ä¸ºå•¥ä¸‹é¢è¿˜è¦searchWord.getLastUpdateTime() &gt; maxNewUpdatedTimeï¼Ÿï¼Ÿï¼Ÿï¼Ÿ<br>","like_count":0,"discussions":[{"author":{"id":1190123,"avatar":"https://static001.geekbang.org/account/avatar/00/12/28/eb/af064421.jpg","nickname":"ç‹äº‰","note":"","ucode":"2B611BE0E0EDD4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":500554,"discussion_content":"lastUpdateTime  maxNewUpdatedTime   searchWord.getLastUpdateTime()ä¸‰è€…çš„å…³ç³»ä½ ç†ä¸€ç†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594388087,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1238436,"avatar":"https://static001.geekbang.org/account/avatar/00/12/e5/a4/e16dca6a.jpg","nickname":"é˜¿å‡¯æ–‡","note":"","ucode":"F17CF201E74849","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":289781,"discussion_content":"å› ä¸ºè¦ç”¨æ‰“æ“‚æ³•å»å¯»æ‰¾å¹¶æ›´æ–°maxNewUpdatedTime","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594211010,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":229791,"user_name":"maybe","can_delete":false,"product_type":"c1","uid":1475528,"ip_address":"","ucode":"93D160F617E750","user_header":"https://static001.geekbang.org/account/avatar/00/16/83/c8/5ce842f6.jpg","comment_is_top":false,"comment_ctime":1593146327,"is_pvip":false,"discussion_count":0,"race_medal":4,"score":"1593146327","product_id":100039001,"comment_content":"ç¬¬ä¸€ä¸ªé—®é¢˜ï¼šæ•°æ®åº“é‡Œåšä¸€ä¸ªåˆ é™¤æ ‡è®°ï¼Œæ ¹æ®åˆ é™¤æ ‡è®°åˆ é™¤ç›¸åº”çš„key<br>ç¬¬äºŒä¸ªé—®é¢˜ï¼šè¿”å›æ·±åº¦æ‹·è´å¯¹è±¡ï¼Œä½ çˆ±å’‹æ”¹å’‹æ”¹ï¼Œä¸å½±å“åŸæ¥çš„","like_count":0},{"had_liked":false,"id":227145,"user_name":"æå¾·æ”¿","can_delete":false,"product_type":"c1","uid":1023885,"ip_address":"","ucode":"3AC49F5671485C","user_header":"https://static001.geekbang.org/account/avatar/00/0f/9f/8d/d725d32c.jpg","comment_is_top":false,"comment_ctime":1592298008,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1592298008","product_id":100039001,"comment_content":"å†ä¸€æ¬¡æ„Ÿå—åˆ°è®¡ç®—æœºåŸç†éƒ½æ˜¯æƒ³é€šçš„ï¼š<br>1. è€å¸ˆä¸¾çš„ä¾‹å­ä¸­ï¼Œä½¿ç”¨çš„åŸå‹æ¨¡å¼æ€æƒ³ï¼Œå’ŒLinux çš„CopyonWriteä¸€æ¨¡ä¸€æ ·ã€‚è”æƒ³åˆ°Redisçš„RDSå¤‡ä»½æ—¶ï¼Œå°±æ˜¯é‡‡ç”¨çš„è¿™ç§æ€è·¯<br>2. åœ¨Pythoné‡Œé¢æœ‰ä¸€ä¸ªcopyæ¨¡å—ï¼Œcopyæ¨¡å—æœ‰copyå‡½æ•°ï¼Œä¹Ÿæœ‰deepcopyå‡½æ•°ï¼Œå…¶ä¸­copyç”¨æ¥æµ…æ‹·è´ï¼Œdeepcopyæ˜¯ç”¨æ¥å®ç°æ·±æ‹·è´ã€‚","like_count":0},{"had_liked":false,"id":222310,"user_name":"J.Smile","can_delete":false,"product_type":"c1","uid":1336475,"ip_address":"","ucode":"C4D98DFDBF7584","user_header":"https://static001.geekbang.org/account/avatar/00/14/64/9b/0b578b08.jpg","comment_is_top":false,"comment_ctime":1590743192,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1590743192","product_id":100039001,"comment_content":"æ·±æ‹·è´çš„æ€»ç»“ï¼š<br>1 é€’å½’æ‹·è´æ•°æ®<br>2 ä½¿ç”¨åºåˆ—åŒ–+ååºåˆ—åŒ–<br>3ä¼˜åŒ–ï¼š å¯ä»¥å…ˆé‡‡ç”¨æµ…æ‹·è´çš„æ–¹å¼åˆ›å»º newKeywordsã€‚å¯¹äºéœ€è¦æ›´æ–°çš„ SearchWord å¯¹è±¡ï¼Œæˆ‘ä»¬å†ä½¿ç”¨æ·±åº¦æ‹·è´çš„æ–¹å¼åˆ›å»ºä¸€ä»½æ–°çš„å¯¹è±¡ï¼Œæ›¿æ¢ newKeywords ä¸­çš„è€å¯¹è±¡ã€‚æ¯•ç«Ÿéœ€è¦æ›´æ–°çš„æ•°æ®æ˜¯å¾ˆå°‘çš„ã€‚è¿™ç§æ–¹å¼å³åˆ©ç”¨äº†æµ…æ‹·è´èŠ‚çœæ—¶é—´ã€ç©ºé—´çš„ä¼˜ç‚¹ï¼Œåˆèƒ½ä¿è¯ currentKeywords ä¸­çš„ä¸­æ•°æ®éƒ½æ˜¯è€ç‰ˆæœ¬çš„æ•°æ®ã€‚","like_count":0},{"had_liked":false,"id":221504,"user_name":"è½å¶é£é€çš„æ‹","can_delete":false,"product_type":"c1","uid":1046429,"ip_address":"","ucode":"F9A95DB28BCF1E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f7/9d/be04b331.jpg","comment_is_top":false,"comment_ctime":1590510601,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1590510601","product_id":100039001,"comment_content":"åŸå‹æ¨¡å¼åœ¨å¯¹è±¡å®ä½“æ›´æ–°çš„æ—¶å€™ç”¨çš„æ¯”è¾ƒå¤šï¼Œè¿™æ ·å¯ä»¥é¿å…ä¸€ä¸ªä¸€ä¸ªæ¯”è¾ƒå­—æ®µå“ªäº›å­—æ®µçš„å€¼å˜åŒ–äº†","like_count":0},{"had_liked":false,"id":220838,"user_name":"ç®€å•çŒ«","can_delete":false,"product_type":"c1","uid":1866485,"ip_address":"","ucode":"EA027D4C344E25","user_header":"https://static001.geekbang.org/account/avatar/00/1c/7a/f5/54a5084b.jpg","comment_is_top":false,"comment_ctime":1590328504,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1590328504","product_id":100039001,"comment_content":"ä¸€ï¼šsearchword å¯¹è±¡ä¸­åŠ å…¥çŠ¶æ€å­—æ®µ modifyè¡¨ç¤ºå‘ç”Ÿäº†ä¿®æ”¹çš„ delè¡¨ç¤ºè¦è¾“å‡ºçš„ï¼Œè®¾å®šä¸€ä¸ªé˜ˆå€¼(æˆ–ä»»åŠ¡ç©ºé—²) æŠŠè¿™äº›æœ‰çŠ¶æ€å˜æ›´çš„ä¸€æ¬¡æ›´æ–°åˆ°åº“ä¸­ã€‚<br>äºŒï¼šåŸå‹æ¨¡å¼ æ·±æ‹·è´ä¸€åˆ†å¯¹è±¡ å³å¯ã€‚åŸå‹æ°¸è¿œä¸ä¼šè¢«ä¿®æ”¹ï¼Œè°ƒç”¨getçš„æ—¶å€™å†æ·±æ¬¡æ‹·è´ åªè¦ä¸ä¿®æ”¹åŸå‹ æ–°æ‹·è´çš„å¯¹è±¡éƒ½ä¸€æ · ä»è€Œå®ç°äº†ä¸ä¿®æ”¹çš„ç›®æ ‡ã€‚ä¾‹å¦‚ æ¸¸æˆä¸­çš„çŠ¶æ€ä¿¡æ¯ï¼Œé€€å‡ºæˆ˜é˜Ÿå°±æ¢å¤åŸå§‹çŠ¶æ€ å°±èƒ½ç”¨è¿™ä¸ªæ¨¡å¼å®ç°","like_count":0},{"had_liked":false,"id":212530,"user_name":"æ‚ æ¸¸","can_delete":false,"product_type":"c1","uid":1222834,"ip_address":"","ucode":"4FDDDDF29AE3F0","user_header":"https://static001.geekbang.org/account/avatar/00/12/a8/b2/998448ca.jpg","comment_is_top":false,"comment_ctime":1588142549,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1588142549","product_id":100039001,"comment_content":"æƒ³èµ·äº†ä»¥å‰çš„ä¸€ä¸ªé¡¹ç›®ï¼Œç”±äºåŸå§‹å¤§å¯¹è±¡éœ€è¦ç¼“å­˜ä¸‹æ¥ï¼Œå› æ­¤ä½¿ç”¨æ·±æ‹·è´è¿›è¡Œå¯¹è±¡å¤åˆ¶ï¼Œé€šè¿‡Gsonåºåˆ—åŒ–å†ååºåˆ—åŒ–ï¼Œå› æ­¤éå¸¸æ¶ˆè€—CPUï¼Œçº¿ä¸Šä¸“é—¨å †äº†å¥½å‡ å°æœåŠ¡å™¨ï¼Œä»Šå¤©å­¦äº†æ‰å‘ç°å¯ä»¥ä½¿ç”¨åŸå‹æ¨¡å¼ç›´æ¥å¤åˆ¶å¯¹è±¡å†…å­˜ï¼Œä¸ç¦æµä¸‹äº†æ‚”æ¨çš„æ³ªæ°´....","like_count":0},{"had_liked":false,"id":212221,"user_name":"zhengyu.nie","can_delete":false,"product_type":"c1","uid":1541669,"ip_address":"","ucode":"FFE0377D323E46","user_header":"https://static001.geekbang.org/account/avatar/00/17/86/25/25ded6c3.jpg","comment_is_top":false,"comment_ctime":1588076310,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1588076310","product_id":100039001,"comment_content":"Collections.unmodifiableListæ¢æˆcom.google.guava.ImmutableList#copyOf","like_count":0},{"had_liked":false,"id":207089,"user_name":"æ…¢åŠ¨ä½œ","can_delete":false,"product_type":"c1","uid":1133945,"ip_address":"","ucode":"62C944F4A4D8AC","user_header":"https://static001.geekbang.org/account/avatar/00/11/4d/79/803537db.jpg","comment_is_top":false,"comment_ctime":1587005121,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"1587005121","product_id":100039001,"comment_content":"æ•°æ®åº“å¦‚æœæ˜¯é€»è¾‘åˆ é™¤ï¼Œåªè¦ä»æ–°mapç§»é™¤å°±å¥½ï¼›å¦‚æœæ˜¯ç‰©ç†åˆ é™¤ï¼ŒæŸ¥è¯¢å¢é‡æ€ä¹ˆåšï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1238436,"avatar":"https://static001.geekbang.org/account/avatar/00/12/e5/a4/e16dca6a.jpg","nickname":"é˜¿å‡¯æ–‡","note":"","ucode":"F17CF201E74849","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":289783,"discussion_content":"ä¸¤ä¸ªåµŒå¥—å¾ªç¯å–å·®é›†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594211224,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":206061,"user_name":"å¢¨é±¼","can_delete":false,"product_type":"c1","uid":1022720,"ip_address":"","ucode":"8FB5E4DCB8A024","user_header":"https://static001.geekbang.org/account/avatar/00/0f/9b/00/654be3f7.jpg","comment_is_top":false,"comment_ctime":1586782526,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1586782526","product_id":100039001,"comment_content":"æµ…æ‹·è´æ˜¯åªç»™æ–°åˆ›å»ºçš„å˜é‡ä¸€ä¸ªå¼•ç”¨ï¼Œæ·±æ‹·è´æ˜¯æ—¢ç»™å¼•ç”¨ä¹Ÿç»™æ•°æ®ã€‚<br><br><br>å‰ç«¯å®ç°æµ…æ‹·è´çš„æ–¹æ³•ï¼š<br><br>1.object.assign æ–¹æ³•<br>2.= èµ‹å€¼<br><br>å‰ç«¯æ·±æ‹·è´çš„æ–¹æ³•ï¼š<br><br>1.é€’å½’æ‹·è´æ‰€æœ‰å±‚çº§çš„å±æ€§<br>2.JSON åºåˆ—åŒ–å’Œååºåˆ—åŒ–<br>3.Reflect çŠ¯æ³•<br>4.sliceæ–¹æ³•å®ç°æ•°ç»„çš„æ·±æ‹·è´<br>5.concat å®ç°æ•°ç»„çš„æ·±æ‹·è´","like_count":0},{"had_liked":false,"id":203321,"user_name":"KK","can_delete":false,"product_type":"c1","uid":1324863,"ip_address":"","ucode":"FFC31A3FE3A285","user_header":"https://static001.geekbang.org/account/avatar/00/14/37/3f/a9127a73.jpg","comment_is_top":false,"comment_ctime":1586171796,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"1586171796","product_id":100039001,"comment_content":"æ„Ÿè§‰è¿™å°±æ˜¯ä¸€é—¨è¯­è¨€çš„è¯­æ³•ç‰¹æ€§è€Œå·²ï¼Œä¸ºä»€ä¹ˆä¹Ÿæç‚¼å‡ºä¸€ç§æ¨¡å¼å‘¢ã€‚","like_count":0},{"had_liked":false,"id":202224,"user_name":"ç§‹é£ç”»æ‰‡","can_delete":false,"product_type":"c1","uid":1132356,"ip_address":"","ucode":"5BCBC1422C51EC","user_header":"https://static001.geekbang.org/account/avatar/00/11/47/44/964aa665.jpg","comment_is_top":false,"comment_ctime":1585926526,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585926526","product_id":100039001,"comment_content":"1.æ›´æ–°çš„å…³é”®è¦çŸ¥é“æ›´æ–°è°ï¼Ÿåˆ é™¤çš„å¯¹è±¡ä»æ•°æ®åº“æŸ¥ä¸å‡ºæ¥ï¼Œå°±æ²¡æ³•åŠè¿›è¡Œæ›´æ–°ï¼Œè¿™é‡Œé‡‡å–é€»è¾‘åˆ é™¤æ—¢å¯ã€‚å®é™…ç”Ÿäº§ç¯å¢ƒä¹Ÿåº”è¯¥åªèƒ½é€»è¾‘åˆ é™¤ï¼Œè¿™ç¬¦åˆç”Ÿäº§çš„è¦æ±‚<br><br>2.Collections.unmodifiableListæ–¹æ³•è¿”å›çš„å¯¹è±¡åªèƒ½ä¿è¯listæœ¬èº«ä¸å˜ï¼Œä½†ä¸èƒ½ä¿è¯å†…éƒ¨å¼•ç”¨ç±»å‹çš„å¯¹è±¡ä¸è¢«ä¿®æ”¹ï¼Œè¿™é‡Œåªéœ€è¦å®ç°æ·±æ‹·è´æŠŠå†…å®¹ä¹Ÿæ‹·è´ä¸€ä»½ï¼Œè®©è¿”å›çš„listâ€œç§æœ‰â€è¿™äº›å¯¹è±¡æ—¢å¯","like_count":0},{"had_liked":false,"id":202156,"user_name":"å°å°ä»£ç ","can_delete":false,"product_type":"c1","uid":1290642,"ip_address":"","ucode":"F3D4E2C23FC9BD","user_header":"https://static001.geekbang.org/account/avatar/00/13/b1/92/f3dabcb1.jpg","comment_is_top":false,"comment_ctime":1585911802,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585911802","product_id":100039001,"comment_content":"é—®é¢˜2çš„è§£å†³æ–¹æ³•ï¼Œéå†æ·±æ‹·è´<br>public List&lt;ShoppingCartItem&gt; getItems() {<br>    List&lt;ShoppingCartItem&gt; newItems = new ArrayList&lt;&gt;(this.items.size);<br>    for(ShoppingCartItem oldItem: this.items) {<br>    \tnewItems.add(new ShoppingCartItem(oldItem));<br>    }<br>\treturn Collections.unmodifiableList(newItems); <br>}","like_count":0},{"had_liked":false,"id":201416,"user_name":"DullBird","can_delete":false,"product_type":"c1","uid":1110494,"ip_address":"","ucode":"80E2FD5F9687CB","user_header":"https://static001.geekbang.org/account/avatar/00/10/f1/de/3ebcbb3f.jpg","comment_is_top":false,"comment_ctime":1585786345,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585786345","product_id":100039001,"comment_content":"1.é€»è¾‘åˆ é™¤ï¼Œå¸¦æ¥çš„é—®é¢˜å°±æ˜¯æŸ¥è¯¢éœ€è¦åŠ é€»è¾‘å€¼deleted=falseã€‚<br>2.æ·±æ‹·è´ä¸€ä¸ªå¯¹è±¡","like_count":0},{"had_liked":false,"id":201306,"user_name":"å¸ƒå‡¡","can_delete":false,"product_type":"c1","uid":1202465,"ip_address":"","ucode":"346FCD332F8BFA","user_header":"https://static001.geekbang.org/account/avatar/00/12/59/21/d2efde18.jpg","comment_is_top":false,"comment_ctime":1585748282,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1585748282","product_id":100039001,"comment_content":"è¯·æ•™ï¼šæœ‰äººå¯ä»¥å¸®å¿™è§£ç­”ä¸€ä¸‹å—ï¼ŸcurrentKeywords.replace(searchWord.getKeyword(), searchWord); ä¸­çš„searchWord.getKeyword()æ˜¯ä»€ä¹ˆç”¨æ³•ï¼ŒSearchWordè¿™ä¸ªå¯¹è±¡æ˜¯javaä¸­ç‰¹æœ‰çš„ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1314724,"avatar":"https://static001.geekbang.org/account/avatar/00/14/0f/a4/0b49469f.jpg","nickname":"æœ¨å­00","note":"","ucode":"8F78CA722EB29B","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":278827,"discussion_content":"æ˜¯æ²¡æœ‰å†™å‡ºSearchWordç±»ï¼Œæ„æ€æ‡‚å°±è¡Œäº†ã€‚ï¼ˆSearchWordä¸æ˜¯jdkä¸­çš„ç±»ï¼‰","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1591239114,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1202465,"avatar":"https://static001.geekbang.org/account/avatar/00/12/59/21/d2efde18.jpg","nickname":"å¸ƒå‡¡","note":"","ucode":"346FCD332F8BFA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1314724,"avatar":"https://static001.geekbang.org/account/avatar/00/14/0f/a4/0b49469f.jpg","nickname":"æœ¨å­00","note":"","ucode":"8F78CA722EB29B","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":278996,"discussion_content":"è°¢è°¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591270530,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":278827,"ip_address":""},"score":278996,"extra":""}]}]},{"had_liked":false,"id":196053,"user_name":"èš‚èšå†…æ¨+v","can_delete":false,"product_type":"c1","uid":1050508,"ip_address":"","ucode":"24B10AEE54B3FD","user_header":"https://static001.geekbang.org/account/avatar/00/10/07/8c/0d886dcc.jpg","comment_is_top":false,"comment_ctime":1585232635,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1585232635","product_id":100039001,"comment_content":"mapä¸ºä»€ä¹ˆè¦remove() å‘¢ï¼Ÿç›´æ¥putï¼Œæ›¿æ¢åŸæœ‰å¯¹è±¡ä¸å°±å¥½äº†ä¹ˆï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1087243,"avatar":"https://static001.geekbang.org/account/avatar/00/10/97/0b/a943bcb3.jpg","nickname":"zhou","note":"","ucode":"E1CE8575B3F106","race_medal":3,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":297837,"discussion_content":"æœ‰ç‚¹é“ç† ä»£ç ç¡®å®æ„Ÿè§‰å¯ä»¥è¿™æ ·ä¼˜åŒ–","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597070175,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":187470,"user_name":"ssrsdzry","can_delete":false,"product_type":"c1","uid":1241576,"ip_address":"","ucode":"89BCFA6A1997E5","user_header":"https://static001.geekbang.org/account/avatar/00/12/f1/e8/d2e88567.jpg","comment_is_top":false,"comment_ctime":1584118085,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584118085","product_id":100039001,"comment_content":"ç¬¬ä¸€ä¸ªé—®é¢˜åº”è¯¥è¦çœ‹æ˜¯å¦å…è®¸åŠ å­—æ®µæ ‡è®°åˆ é™¤ã€‚å…è®¸çš„è¯å’Œæ›´æ”¹çš„é€»è¾‘ç›¸ä¼¼ã€‚å¦‚æœä¸å…è®¸ï¼Œé‚£æ•´è¡Œæ•°æ®éƒ½åˆ é™¤æ‰äº†ï¼Œåªèƒ½å…¨æ‰«ææ•°æ®åº“ä¸­çš„ä¸»é”®ï¼Œç„¶åå’Œmapä¸­çš„æ•°æ®æ¯”è¾ƒã€‚<br><br>ç¬¬äºŒä¸ªé—®é¢˜å¤§å®¶éƒ½è¯´æ˜¯è¿”å›æ·±æ‹·è´ï¼Œè¿™ä¸ªæ˜¯å¯ä»¥ã€‚ä¸è¿‡æˆ‘å¥½å¥‡å·¥ä½œä¸­çœŸçš„è¿™ä¹ˆå†™ä»£ç å—ï¼Ÿå› ä¸ºå¾ˆè¿”å›ä¸€ä¸ªlistä¹‹ç±»çš„æ—¶å€™è¿˜æ˜¯å¾ˆå¤šçš„ã€‚æ„Ÿè§‰éƒ½æ˜¯é ç¼–ç¨‹ä¹ æƒ¯ï¼Œå°±æ˜¯ä¸å»æ›´æ”¹è¾“å…¥ï¼Œè¦æ›´æ”¹ä¹Ÿæ˜¯è‡ªå·±copyä¸€ä»½æ–°çš„å¯¹è±¡ã€‚è¿™ä¸ªè‡ªå·±ä¹Ÿä¸æ˜¯å¾ˆç†Ÿï¼Œç¡®å®æ˜¯éœ€è¦å‘æœ‰ç»éªŒçš„å­¦ä¹ ä¸€ä¸‹ã€‚å¸Œæœ›å¤§å®¶å¤šè¯´è¯´å®é™…ç»éªŒã€‚","like_count":0},{"had_liked":false,"id":187340,"user_name":"zj","can_delete":false,"product_type":"c1","uid":1100064,"ip_address":"","ucode":"E3329CCF694AC2","user_header":"https://static001.geekbang.org/account/avatar/00/10/c9/20/e4f1b17c.jpg","comment_is_top":false,"comment_ctime":1584087624,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584087624","product_id":100039001,"comment_content":"é¢˜ç›®2ç”¨æ·±æ‹·è´ä¹Ÿæ˜¯å¯ä»¥ï¼Œä½†æ˜¯æ•°æ®ä¹Ÿå¯ä»¥ä¿®æ”¹ï¼›å› æ­¤è€ƒè™‘ä½¿ç”¨å»ºé€ æ¨¡å¼Buildï¼Œå¯¹è±¡ä¸æä¾›setæ–¹æ³•ï¼Œåªæä¾›getæ–¹æ³•ï¼Œé€šè¿‡buildæ„é€ å‡ºItemï¼Œå¤–ç•Œæ— æ³•ä¿®æ”¹item","like_count":0},{"had_liked":false,"id":187332,"user_name":"zj","can_delete":false,"product_type":"c1","uid":1100064,"ip_address":"","ucode":"E3329CCF694AC2","user_header":"https://static001.geekbang.org/account/avatar/00/10/c9/20/e4f1b17c.jpg","comment_is_top":false,"comment_ctime":1584085318,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584085318","product_id":100039001,"comment_content":"çœ‹äº†ä¸€ä¸‹java8çš„hashmapçš„cloneçš„æºä»£ç ï¼Œå‘ç°è€å¸ˆå‘çš„hashmapçš„æµ…æ‹·è´å›¾ç”»é”™äº†å§ï¼Œä»£ç é‡Œæ²¡æœ‰å¤åˆ¶Nodeå¼•ç”¨ï¼Œè€Œæ˜¯åˆ›å»ºæ–°çš„Node,å¹¶å¤åˆ¶åŸNodeä¸Šçš„Keyå’ŒValueå¼•ç”¨åœ°å€ã€‚<br> public Object clone() {<br>        HashMap&lt;K,V&gt; result;<br>        try {<br>            result = (HashMap&lt;K,V&gt;)super.clone();<br>        } catch (CloneNotSupportedException e) {<br>            &#47;&#47; this shouldn&#39;t happen, since we are Cloneable<br>            throw new InternalError(e);<br>        }<br>        result.reinitialize();<br>        result.putMapEntries(this, false);<br>        return result;<br>    }<br><br><br> final void putMapEntries(Map&lt;? extends K, ? extends V&gt; m, boolean evict) {<br>        int s = m.size();<br>        if (s &gt; 0) {<br>            if (table == null) { &#47;&#47; pre-size<br>                float ft = ((float)s &#47; loadFactor) + 1.0F;<br>                int t = ((ft &lt; (float)MAXIMUM_CAPACITY) ?<br>                         (int)ft : MAXIMUM_CAPACITY);<br>                if (t &gt; threshold)<br>                    threshold = tableSizeFor(t);<br>            }<br>            else if (s &gt; threshold)<br>                resize();<br>            for (Map.Entry&lt;? extends K, ? extends V&gt; e : m.entrySet()) {<br>                K key = e.getKey();<br>                V value = e.getValue();<br>                putVal(hash(key), key, value, false, evict);<br>            }<br>        }<br>    }","like_count":0},{"had_liked":false,"id":186224,"user_name":"Heaven","can_delete":false,"product_type":"c1","uid":1694207,"ip_address":"","ucode":"FA33FBCC66C911","user_header":"https://static001.geekbang.org/account/avatar/00/19/d9/ff/b23018a6.jpg","comment_is_top":false,"comment_ctime":1583804683,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1583804683","product_id":100039001,"comment_content":"1.å¯¹äºåˆ é™¤æ¥è¯´,æˆ‘ä»¬éœ€è¦ä¿è¯ç‰ˆæœ¬ä¸€ç›´,è¿˜è¦ä¿è¯ä¸€å®šæ•ˆç‡çš„æ—¶å€™,å¦‚æœæŒ‰ç…§ä¹‹å‰çš„å®ç°,æˆ‘ä»¬å°±å¿…é¡»è¿›è¡ŒåæŸ¥æ‰¾,ä¹Ÿå°±æ˜¯è·å–åˆ°æ‰€æœ‰æ•°æ®åº“ä¸­çš„æ•°æ®,ç„¶ååˆ©ç”¨æˆ‘ä»¬ç°æœ‰çš„Mapå»æ¯”å¯¹æ•°æ®åº“ä¸­,æŸ¥çœ‹å“ªäº›å·²ç»ä¸å†å­˜åœ¨äº†,è¿™æ ·æ•ˆç‡æå…¶çš„ä½ä¸‹,æ‰€ä»¥å»ºè®®æ˜¯åœ¨æ•°æ®åº“ä¸­åŠ å…¥ä¸€ä¸ªdel_flagçš„å­—æ®µ,æ¥è¡¨ç¤ºé€»è¾‘åˆ é™¤,å¹¶åˆ©ç”¨é€»è¾‘åˆ é™¤æ¥è¿›è¡Œç›¸å…³çš„æ›´æ–°æ“ä½œ<br>2.å¯¹äº2,èƒ½ä¸èƒ½è¿”å›ä¸€ä¸ªæµå¯¹è±¡,è®©è°ƒç”¨è€…å»ååºåˆ—åŒ–,æˆ–è€…è¿›è¡Œç¬¬ä¸€ç§æ–¹å¼çš„é€’å½’æ‹·è´,è·å–æ–°çš„å¯¹è±¡","like_count":0},{"had_liked":false,"id":185334,"user_name":"å°æ–‡åŒå­¦","can_delete":false,"product_type":"c1","uid":1001893,"ip_address":"","ucode":"48F2AEB989C12A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/49/a5/e4c1c2d4.jpg","comment_is_top":false,"comment_ctime":1583563618,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1583563618","product_id":100039001,"comment_content":"åŸºäºåŸå‹å¯¹è±¡æ‹·è´è·å¾—å¯¹è±¡ï¼Œç§°ä¸ºåŸå‹æ¨¡å¼ã€‚","like_count":0},{"had_liked":false,"id":183318,"user_name":"SKY","can_delete":false,"product_type":"c1","uid":1083870,"ip_address":"","ucode":"10C3CB831974AE","user_header":"https://static001.geekbang.org/account/avatar/00/10/89/de/7bf4c3a3.jpg","comment_is_top":false,"comment_ctime":1582993337,"is_pvip":false,"discussion_count":8,"race_medal":0,"score":"1582993337","product_id":100039001,"comment_content":"æ²¡åŠ¨æœ€åä¸€ä¸ªæ–¹æ³•çš„newKeywords.remove(searchWord.getKeyword());newKeywordsæ˜¯é€šè¿‡currentKeywords.clone()æµ…æ‹·è´å‡ºæ¥çš„ï¼Œå¯¹newKeywordsä½¿ç”¨removeæ–¹æ³•éš¾é“ä¸ä¼šå½±å“currentKeywordsï¼Ÿ","like_count":0},{"had_liked":false,"id":181549,"user_name":"ä¼ è¯´ä¸­çš„æˆå¤§å¤§","can_delete":false,"product_type":"c1","uid":1236766,"ip_address":"","ucode":"103543D6E706BF","user_header":"https://static001.geekbang.org/account/avatar/00/12/df/1e/cea897e8.jpg","comment_is_top":false,"comment_ctime":1582557665,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1582557665","product_id":100039001,"comment_content":"ç¬¬ä¸€é—®ä»æˆ‘çš„å·¥ä½œç»éªŒæ¥çœ‹ æŠ›å¼€è®¾è®¡æ¨¡å¼ ç¨‹åºä¸€å¯åŠ¨åŠ è½½æ•°æ®çœ‹ä¸­çš„å†…å®¹ï¼Œå¦‚æœæœ‰åˆ é™¤å’Œæ›´æ–°æˆ–è€…æ–°å¢ç›´æ¥æ“ä½œå†…å­˜ å†5ç§’é’Ÿæˆ–è€…10ç§’é’Ÿç­‰ç­‰è¿›è¡Œå­˜ç›˜<br>ç¬¬äºŒé—® é‡‡ç”¨æ·±æ‹·è´ï¼Œé¿å…å…±äº«åŒä¸€ä¸ªå¯¹è±¡çš„é—®é¢˜","like_count":0},{"had_liked":false,"id":181083,"user_name":"å®ˆæ‹™","can_delete":false,"product_type":"c1","uid":1738326,"ip_address":"","ucode":"F594B2DA3F6D4F","user_header":"https://static001.geekbang.org/account/avatar/00/1a/86/56/509535da.jpg","comment_is_top":false,"comment_ctime":1582471844,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1582471844","product_id":100039001,"comment_content":"<br>è¯¾å ‚è®¨è®º:<br><br>1. åœ¨ä»Šå¤©çš„åº”ç”¨åœºæ™¯ä¸­ï¼Œå¦‚æœä¸ä»…å¾€æ•°æ®åº“ä¸­æ·»åŠ å’Œæ›´æ–°å…³é”®è¯ï¼Œè¿˜åˆ é™¤å…³é”®è¯ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œåˆè¯¥å¦‚ä½•å®ç°å‘¢ï¼Ÿ<br><br>   æ–¹å¼ä¸€: é¦–å…ˆä½¿ç”¨shallow copyå¾—åˆ°ä¸€ä»½æ—§çš„Mapçš„copy, ç„¶åä»dbè¯»å–æ–°çš„Map. å¯¹æ–°æ—§ä¸¤ä»½Mapå–äº¤é›†.<br><br>   è¿™é‡Œç€é‡è¯´ä¸‹å–äº¤é›†çš„æ–¹å¼: ä½¿ç”¨Iteratoréå†æ—§Mapçš„copyçš„key, å¦‚æœæ–°Mapä¸­ä¸åŒ…å«è¯¥key,åˆ™åˆ é™¤.<br><br>   <br><br>   æ–¹å¼äºŒ: ç›´æ¥ä½¿ç”¨deep copy, ç®€å•ç²—æš´ä¸è®²é“ç†.<br><br>   <br><br>2. åœ¨ç¬¬ 7 è®²ä¸­ï¼Œä¸ºäº†è®© ShoppingCart çš„ getItems() æ–¹æ³•è¿”å›ä¸å¯å˜å¯¹è±¡ï¼Œæˆ‘ä»¬å¦‚ä¸‹æ¥å®ç°ä»£ç ã€‚å½“æ—¶ï¼Œæˆ‘ä»¬æŒ‡å‡ºè¿™æ ·çš„å®ç°æ€è·¯è¿˜æ˜¯æœ‰ç‚¹é—®é¢˜ã€‚å› ä¸ºå½“è°ƒç”¨è€…é€šè¿‡ ShoppingCart çš„ getItems() è·å–åˆ° items ä¹‹åï¼Œæˆ‘ä»¬è¿˜æ˜¯å¯ä»¥ä¿®æ”¹å®¹å™¨ä¸­æ¯ä¸ªå¯¹è±¡ï¼ˆShoppingCartItemï¼‰çš„æ•°æ®ã€‚å­¦å®Œæœ¬èŠ‚è¯¾ä¹‹åï¼Œç°åœ¨ä½ æœ‰æ²¡æœ‰è§£å†³æ–¹æ³•äº†å‘¢ï¼Ÿ<br><br>   getItems()ä½¿ç”¨deep copyè¿”å›itemsçš„è§†å›¾.","like_count":0,"discussions":[{"author":{"id":1358045,"avatar":"https://static001.geekbang.org/account/avatar/00/14/b8/dd/37726c34.jpg","nickname":"å°é©¬å“¥","note":"","ucode":"B2C0FF38F8C9BC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":386518,"discussion_content":"is-aæ˜¯æŠ½å–ç›¸åŒçš„ä¸œè¥¿åˆ°çˆ¶ç±», è‡ªä¸‹è€Œä¸Š;\nhas-aæ˜¯æŒ‰ç…§æ¥å£å®šä¹‰, å¿…é¡»åœ¨å­ç±»æˆ–è€…å®ç°ä¸­å®ç°çº¦å®šçš„è¡Œä¸º, è‡ªä¸Šè€Œä¸‹;\nå‰è€…è¦æ±‚å…±åŒç‚¹æŠ½å–, åè€…è¦æ±‚å¿…é¡»æ»¡è¶³.ä»…æ­¤è€Œå·², ä½“ä¼šä¸€ä¸‹æŠ½è±¡ç±»å’Œæ¥å£çš„å­˜åœ¨æ„ä¹‰, è€Œä¸ç”¨æ‰£å­—é¢æ„æ€.","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627625504,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1577580,"avatar":"https://static001.geekbang.org/account/avatar/00/18/12/6c/61a598e9.jpg","nickname":"è‹æš®æ²‰è§","note":"","ucode":"532B816D4EF47B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":128260,"discussion_content":"æˆ‘çš„ç†è§£æ˜¯is aä¸»è¦é’ˆå¯¹å±æ€§çš„ç»§æ‰¿ï¼Œhas a ä»£è¡¨ç€åŠŸèƒ½çš„å£°æ˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578624263,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":180957,"user_name":"æå°å››","can_delete":false,"product_type":"c1","uid":1112747,"ip_address":"","ucode":"2A766BE16B276B","user_header":"https://static001.geekbang.org/account/avatar/00/10/fa/ab/0d39e745.jpg","comment_is_top":false,"comment_ctime":1582449252,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1582449252","product_id":100039001,"comment_content":"è®¾è®¡æ¨¡å¼_47:<br># ä½œä¸š <br>1. å–äº¤é›†<br>2. è¿”å›ä¸€ä¸ªå¿…è¦æ•°æ®æ·±æ‹·è´çš„é›†åˆ<br>","like_count":0},{"had_liked":false,"id":180838,"user_name":"ä¹¾å¤ç¬é—´","can_delete":false,"product_type":"c1","uid":1683130,"ip_address":"","ucode":"15BDCF29CBF8EB","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLWIUF31dicT1YBTxWNX0uvbMxl15UwdlwFicGhNo0DsQ7CbM6k16EQxK7bwSMcicLGMdYto4jGPTvrg/132","comment_is_top":false,"comment_ctime":1582426378,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1582426378","product_id":100039001,"comment_content":"1ï¼Œä½¿ç”¨å¢“ç¢‘æ ‡è®°ï¼Œåˆ é™¤aç³»ç»Ÿä¸­çš„æ•°æ®ï¼Œå¹¶è¡¥jobè¿›è¡Œæ•°æ®çš„åˆ é™¤<br>2ï¼Œè¯‹é€’å½’éå†è¿›è¡Œæ·±åº¦copy","like_count":0},{"had_liked":false,"id":179932,"user_name":"Frank","can_delete":false,"product_type":"c1","uid":1018370,"ip_address":"","ucode":"7A488CC6FE15E7","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8a/02/828938c9.jpg","comment_is_top":false,"comment_ctime":1582123204,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1582123204","product_id":100039001,"comment_content":"åŸå‹æ¨¡å¼æ˜¯ä¸€ç§ä»â€œæ‹·è´â€çš„è§’åº¦æ¥åˆ›å»ºå¯¹è±¡çš„æ–¹å¼ï¼Œä»¥å®ç°èŠ‚çœæ—¶é—´çš„ç›®çš„ã€‚åŸå‹æ¨¡å¼æœ‰ä¸¤ç§å®ç°æ–¹å¼ï¼šæµ…æ‹·è´ä¸æ·±æ‹·è´ã€‚ç†è§£å…¶åº”ç”¨åœºæ™¯ï¼šå¯¹è±¡åˆ›å»ºæˆæœ¬å¤§ï¼ŒåŒä¸€ä¸ªç±»ä¸åŒå¯¹è±¡ä¹‹é—´å·®åˆ«ä¸å¤§ã€‚","like_count":0},{"had_liked":false,"id":179929,"user_name":"æˆ‘æ¥ä¹Ÿ","can_delete":false,"product_type":"c1","uid":1205253,"ip_address":"","ucode":"773D6104F56767","user_header":"https://static001.geekbang.org/account/avatar/00/12/64/05/6989dce6.jpg","comment_is_top":false,"comment_ctime":1582123034,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1582123034","product_id":100039001,"comment_content":"æ€è€ƒé¢˜2:<br>å³ä½¿æ˜¯æ·±æ‹·è´ï¼Œä¹Ÿæ˜¯å¯ä»¥ä¿®æ”¹çš„ï¼Œåªæ˜¯ä¿®æ”¹çš„ä¸æ˜¯åŸæ•°æ®è€Œå·²ã€‚<br><br>æˆ‘å¯¹javaè¯­æ³•ä¸ç†Ÿï¼Œä¸çŸ¥é“å¯å¦é€’å½’çš„ä½¿ç”¨  Collections.unmodifiableList ç±»ä¼¼çš„æ–¹å¼ï¼Œæ„å»ºä¸€ä¸ªæ–°çš„æ·±æ‹·è´å¯¹è±¡ã€‚ç„¶åå†è¿”å›è¿™ä¸ªå¯¹è±¡çš„ä¸å¯ä¿®æ”¹å‰¯æœ¬ã€‚<br><br>è¿™æ ·è¿™ä¸ªå¯¹è±¡ä»é‡Œåˆ°å¤–éƒ½æ˜¯ä¸å¯ä¿®æ”¹çš„å±æ€§äº†ã€‚","like_count":0},{"had_liked":false,"id":179772,"user_name":"aoe","can_delete":false,"product_type":"c1","uid":1121758,"ip_address":"","ucode":"1C6201EDB4E954","user_header":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","comment_is_top":false,"comment_ctime":1582095883,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1582095883","product_id":100039001,"comment_content":"åŸæ¥æ‹·è´å¯ä»¥è¿™æ ·æ“ä½œï¼ä½©æœå°äº‰å“¥ç®—æ³•ä¸æ•°æ®ç»“æ„ç”¨çš„6ï¼","like_count":0},{"had_liked":false,"id":179747,"user_name":"ï¼Œ","can_delete":false,"product_type":"c1","uid":1701867,"ip_address":"","ucode":"A5543C8DFEB198","user_header":"https://static001.geekbang.org/account/avatar/00/19/f7/eb/e7127bb8.jpg","comment_is_top":false,"comment_ctime":1582090136,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1582090136","product_id":100039001,"comment_content":"é—®é¢˜1:<br>1.è®¾ç½®æ ‡è®°ä½,&quot;ä½¿ç”¨ä¸­&quot;,&quot;å¼ƒç”¨&quot;,&quot;å·²åˆ é™¤&quot;ç­‰,æ£€æŸ¥åˆ°æ ‡è®°ä¸º&quot;å¼ƒç”¨&quot;çš„æ•°æ®æ—¶,åˆ é™¤mapé‡Œçš„æ•°æ®åŒæ—¶ä¿®æ”¹æ ‡è®°ä½ä¸º&quot;å·²åˆ é™¤&quot;,æ‰«ææ•°æ®åº“é‡Œæ›´æ–°çš„æ•°æ®æ—¶å¢åŠ æ£€ç´¢æ¡ä»¶&quot;ä½¿ç”¨ä¸­&quot;<br>2.æ¯æ¬¡æ•°æ®åº“éƒ½å…¨é‡æ‰«æ,æ‹¿åˆ°æ ‡è®°ä½ä¸º&quot;ä½¿ç”¨ä¸­&quot;çš„æ•°æ®,ç›´æ¥æ›¿æ¢map<br>3.åˆ é™¤æ•°æ®æ—¶åŒæ—¶åˆ é™¤æ•°æ®åº“å’Œmapé‡Œçš„æ•°æ®<br>  ä¸ªäººè®¤ä¸ºæ–¹æ³•1å’Œæ–¹æ³•3éƒ½å¾ˆåˆé€‚,æ–¹æ³•äºŒå¯¹æ•°æ®åº“IOæ“ä½œé‡æ¯”è¾ƒå¤§,ä¸å¤ªé€‚åˆ<br>é—®é¢˜2:<br>è¿”å›æ·±å…‹éš†å¯¹è±¡å³å¯","like_count":0},{"had_liked":false,"id":179744,"user_name":"Jxin","can_delete":false,"product_type":"c1","uid":1251111,"ip_address":"","ucode":"4C03928388C413","user_header":"https://static001.geekbang.org/account/avatar/00/13/17/27/ec30d30a.jpg","comment_is_top":false,"comment_ctime":1582088813,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1582088813","product_id":100039001,"comment_content":"1.é€»è¾‘åˆ é™¤çš„è¯ï¼Œä»£ç éƒ½ä¸ç”¨æ”¹ã€‚ç‰©ç†åˆ é™¤çš„è¯ï¼Œæˆ‘è§‰å¾—åœ¨åˆ é™¤æ—¶è”åŠ¨æ¸…é™¤mapçš„ç¼“å­˜å¯è¡Œï¼ˆå•è¿›ç¨‹ï¼Œåˆ†å¸ƒå¼å°±å¾—å¼•å…¥ä¸€ä¸ªå¤–éƒ¨å­˜å‚¨ï¼Œå‘ŠçŸ¥æ‰€æœ‰èŠ‚ç‚¹åˆ é™¤æŸä¸ªç¼“å­˜ï¼‰ã€‚<br><br><br>2.æ ¹æ®ä¸šåŠ¡åœºæ™¯ï¼Œé‡‡ç”¨cowå†™æ—¶å¤åˆ¶ã€‚æä¾›åªè¯»çš„åˆ—è¡¨è¿”å›å’Œå†™æ—¶çš„å¤åˆ¶åˆ—è¡¨çš„è¿”å›ä¸¤ä¸ªæ–¹æ³•ã€‚","like_count":0},{"had_liked":false,"id":179719,"user_name":"webmin","can_delete":false,"product_type":"c1","uid":1047014,"ip_address":"","ucode":"98B0CA882454E8","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f9/e6/47742988.jpg","comment_is_top":false,"comment_ctime":1582083475,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"1582083475","product_id":100039001,"comment_content":"é—®é¢˜ä¸€ï¼š<br>       for (SearchWord searchWord : toBeUpdatedSearchWords) {<br>        ...<br>        }<br>        Set&lt;String&gt; toBeUpdatedKeys = new HashSet&lt;&gt;();<br>        toBeUpdatedSearchWords.forEach((k) -&gt; toBeUpdatedKeys.add(k.getKeyword()));<br>        List&lt;String&gt; removeList = newKeywords.keySet().stream().filter((key) -&gt; !toBeUpdatedKeys.contains(key)).collect(Collectors.toList());<br>        removeList.forEach(newKeywords::remove);<br>é—®é¢˜äºŒï¼š<br>è¿”å›ä¸å¯å˜å¯¹è±¡ï¼Œæ–¹æ³•æœ‰ä¸¤ä¸ª<br>æ–¹æ³•1ï¼šè¯­è¨€è‡ªå¸¦æˆ–ç¬¬ä¸‰æ–¹åº“çš„ä¸å¯å˜å¯¹è±¡æœºåˆ¶ï¼Œå¦‚ï¼šJavaå¯ä»¥ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“Guavaçš„ä¸å¯å˜é›†åˆï¼›<br>æ–¹æ³•2ï¼šè¿”å›ä¸€ä¸ªæ·±æ‹·è´å¯¹è±¡ï¼›","like_count":0,"discussions":[{"author":{"id":1577580,"avatar":"https://static001.geekbang.org/account/avatar/00/18/12/6c/61a598e9.jpg","nickname":"è‹æš®æ²‰è§","note":"","ucode":"532B816D4EF47B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":128262,"discussion_content":"ã€ŠJava8 å®æˆ˜ã€‹ä¸­çš„è§‚ç‚¹æ˜¯ä¸ºäº†åœ¨æˆ‘ä»¬ç»™æ¥å£æ·»åŠ æ–¹æ³•æ—¶ï¼Œä¸ä¼šç»™ä¹‹å‰ç»§æ‰¿çš„ç±»é€ æˆå½±å“ï¼ˆä¾‹å¦‚ä½ ç»§æ‰¿äº†ç¬¬ä¸‰æ–¹çš„æŸä¸ªæ¥å£ï¼Œæä¾›ç¬¬ä¸‰æ–¹æ¥å£çš„äººåœ¨ä¿®æ”¹å¯¹åº”çš„æ¥å£æ—¶ï¼Œè‚¯å®šæ˜¯å¸Œæœ›ä»–ä¿®æ”¹ä»¥åå¯¹ä½ æ²¡æœ‰å½±å“ï¼‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578624494,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":179670,"user_name":"test","can_delete":false,"product_type":"c1","uid":1065849,"ip_address":"","ucode":"9A4973E591DD12","user_header":"https://static001.geekbang.org/account/avatar/00/10/43/79/18073134.jpg","comment_is_top":false,"comment_ctime":1582075757,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1582075757","product_id":100039001,"comment_content":"1.ç”¨ä¸€ä¸ªæ ‡è®°ä½è¡¨ç¤ºè¢«åˆ é™¤<br>2.è¿”å›ä¸€ä¸ªæ·±æ‹·è´å¯¹è±¡","like_count":0},{"had_liked":false,"id":179668,"user_name":"Panmax","can_delete":false,"product_type":"c1","uid":1004871,"ip_address":"","ucode":"9D65E3B84C5519","user_header":"https://static001.geekbang.org/account/avatar/00/0f/55/47/d217c45f.jpg","comment_is_top":false,"comment_ctime":1582075316,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1582075316","product_id":100039001,"comment_content":"æ–‡ç« ä¸­çš„æœ€åä¸€ç§æ–¹æ¡ˆï¼šã€Œå…ˆé‡‡ç”¨æµ…æ‹·è´çš„æ–¹å¼åˆ›å»º newKeywordsã€‚å¯¹äºéœ€è¦æ›´æ–°çš„ SearchWord å¯¹è±¡ï¼Œå†ä½¿ç”¨æ·±åº¦æ‹·è´çš„æ–¹å¼åˆ›å»ºä¸€ä»½æ–°çš„å¯¹è±¡ï¼Œæ›¿æ¢ newKeywords ä¸­çš„è€å¯¹è±¡ã€‚ã€<br><br>æ˜¯ä¸æ˜¯å¯ä»¥ç†è§£ä¸ºæ˜¯ä¸€ç§ Copy On Write çš„ä¼˜åŒ–ç­–ç•¥","like_count":0,"discussions":[{"author":{"id":1577580,"avatar":"https://static001.geekbang.org/account/avatar/00/18/12/6c/61a598e9.jpg","nickname":"è‹æš®æ²‰è§","note":"","ucode":"532B816D4EF47B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":128266,"discussion_content":"è¦ç»™ä¸€ä¸ªæ—§çš„æ¥å£æ·»åŠ æ–¹æ³•æ˜¯å¾ˆéº»çƒ¦çš„äº‹ï¼Œå› ä¸ºå…¶ä»–å®ç°è¯¥æ¥å£å¿…é¡»å®ç°æ–°å¢çš„æ¥å£ã€‚å¦‚æœæ˜¯å‘å¸ƒç»™å…¶ä»–äººç”¨çš„æ¥å£ï¼Œé‚£è¿™å¯¹æœ‰äº›ç”¨æˆ·æ¥è¯´å°±æ˜¯ä¸ªç¾éš¾ã€‚è€Œä¸”æ¥å£ä¸­åªèƒ½æ·»åŠ æ–¹æ³•ç­¾åï¼Œä¸èƒ½æƒ³æŠ½è±¡ç±»ä¸€æ ·æä¾›éƒ¨åˆ†æ–¹æ³•çš„å®ç°ï¼Œå› æ­¤å¼•å…¥äº†é»˜è®¤æ–¹æ³•ã€‚å¯ä»¥çœ‹ä¸€ä¸‹ã€ŠJava8 å®æˆ˜ã€‹ä¸­ä¸“é—¨å°†é»˜è®¤æ–¹æ³•çš„é‚£ä¸€ç« ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1578624642,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1153455,"avatar":"https://static001.geekbang.org/account/avatar/00/11/99/af/d29273e2.jpg","nickname":"é¥­ç²’","note":"","ucode":"4C3220B0D43997","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1577580,"avatar":"https://static001.geekbang.org/account/avatar/00/18/12/6c/61a598e9.jpg","nickname":"è‹æš®æ²‰è§","note":"","ucode":"532B816D4EF47B","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":129341,"discussion_content":"æ„Ÿè°¢ğŸ™","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578674174,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":128266,"ip_address":""},"score":129341,"extra":""}]}]},{"had_liked":false,"id":179667,"user_name":"pedro","can_delete":false,"product_type":"c1","uid":1200704,"ip_address":"","ucode":"F40C839DDFD599","user_header":"https://static001.geekbang.org/account/avatar/00/12/52/40/e57a736e.jpg","comment_is_top":false,"comment_ctime":1582075272,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1582075272","product_id":100039001,"comment_content":"æƒ³åˆ°äº†linuxè¿›ç¨‹çš„å…‹éš†ï¼Œc++çš„æ‹·è´æ„é€ å‡½æ•°éƒ½æ˜¯ä¸€ç§åŸå‹æ¨¡å¼çš„ä½¿ç”¨","like_count":0,"discussions":[{"author":{"id":1577580,"avatar":"https://static001.geekbang.org/account/avatar/00/18/12/6c/61a598e9.jpg","nickname":"è‹æš®æ²‰è§","note":"","ucode":"532B816D4EF47B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":128268,"discussion_content":"è¢«protected ä¿®é¥°çš„æ„é€ å‡½æ•°åªå…è®¸å¯ä»¥è¢«å­ç±»ï¼Œæˆ–åŒpackageä¸‹ç±»ä½¿ç”¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578624731,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":179631,"user_name":"J.Smile","can_delete":false,"product_type":"c1","uid":1336475,"ip_address":"","ucode":"C4D98DFDBF7584","user_header":"https://static001.geekbang.org/account/avatar/00/14/64/9b/0b578b08.jpg","comment_is_top":false,"comment_ctime":1582042225,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1582042225","product_id":100039001,"comment_content":"æ²™å‘","like_count":0}]}