{"id":10580,"title":"52 | Zuul网关架构剖析","content":"无","comments":[{"had_liked":false,"id":15285,"user_name":"看山","can_delete":false,"product_type":"c3","uid":1014260,"ip_address":"","ucode":"F030DD58D0BDC3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/79/f4/d85e7e58.jpg","comment_is_top":false,"comment_ctime":1531094388,"is_pvip":false,"replies":[{"id":5323,"content":"我觉得没问题，注明观点出处即可，最好加入你自己的思考","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1531325118,"ip_address":"","comment_id":15285,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"波波老师好，听您的课程有做笔记的习惯，请问可否将您课程中的一些观点整理成博文发布出去？","like_count":5,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420321,"discussion_content":"我觉得没问题，注明观点出处即可，最好加入你自己的思考","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1531325118,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":192359,"user_name":"Geek_6jxh2r","can_delete":false,"product_type":"c3","uid":1154091,"ip_address":"","ucode":"0E2D4D779D8DC9","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erxJYxzce3mZpuZFJNyTAvCibzLUTYbZepaBPNd7ichZgkMeibkQLmNzeb63zda1iaKJ6aIewUTA517hQ/132","comment_is_top":false,"comment_ctime":1584847503,"is_pvip":false,"replies":[{"id":74019,"content":"如果技术栈是java，zuul还是可以用，已经比较成熟，另外spring cloud gateway可以替代zuul。\n\n如果接受非java的网关，那就很多了，例如envoy&#47;traefik&#47;kong等等一大堆。\n\nk8s支持ingress(可以用nginx或者其它实现)，ingress相当于反向代理，可以部分替代网关，也可以让网关躲在ingress后面。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1585055233,"ip_address":"","comment_id":192359,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"请问zuul目前已停止维护了，目前使用k8s的推荐gateway是什么呢","like_count":1,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488378,"discussion_content":"如果技术栈是java，zuul还是可以用，已经比较成熟，另外spring cloud gateway可以替代zuul。\n\n如果接受非java的网关，那就很多了，例如envoy/traefik/kong等等一大堆。\n\nk8s支持ingress(可以用nginx或者其它实现)，ingress相当于反向代理，可以部分替代网关，也可以让网关躲在ingress后面。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585055233,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":22511,"user_name":"大毛","can_delete":false,"product_type":"c3","uid":1207241,"ip_address":"","ucode":"92614BE20DB5E7","user_header":"https://static001.geekbang.org/account/avatar/00/12/6b/c9/9b207f2b.jpg","comment_is_top":false,"comment_ctime":1535760928,"is_pvip":false,"replies":[{"id":8128,"content":"会持续讲解整个微服务体系的大部分内容，谢谢支持🌹","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1535865570,"ip_address":"","comment_id":22511,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"波波老师讲的很受用，整个知识图谱会全部讲解吗，还是另外开课程，永远支持你！","like_count":1,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423147,"discussion_content":"会持续讲解整个微服务体系的大部分内容，谢谢支持🌹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1535865570,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":216326,"user_name":"李圣悦","can_delete":false,"product_type":"c3","uid":1638427,"ip_address":"","ucode":"C1786C98824E50","user_header":"https://static001.geekbang.org/account/avatar/00/19/00/1b/eee13196.jpg","comment_is_top":false,"comment_ctime":1589242946,"is_pvip":false,"replies":[{"id":80131,"content":"尽量不要在同步req&#47;resp调用链上做，这样做肯定会影响性能。建议有些动作可以后台异步做，例如网关同步注册中心的路由表，可以后台线程异步做，同步后只需更新内存路由表，不阻塞req&#47;resp调用链。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1589294754,"ip_address":"","comment_id":216326,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"波波老师，如果过滤器里面有异步动作，比如需要跟第三方服务交互信息。但不想阻塞整个过滤链，能做到吗？","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":494775,"discussion_content":"尽量不要在同步req/resp调用链上做，这样做肯定会影响性能。建议有些动作可以后台异步做，例如网关同步注册中心的路由表，可以后台线程异步做，同步后只需更新内存路由表，不阻塞req/resp调用链。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589294754,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":192334,"user_name":"Jason","can_delete":false,"product_type":"c3","uid":1085947,"ip_address":"","ucode":"6EECC0C25A9FCC","user_header":"https://static001.geekbang.org/account/avatar/00/10/91/fb/9b9d22a0.jpg","comment_is_top":false,"comment_ctime":1584847026,"is_pvip":false,"replies":[{"id":74018,"content":"zuul filter动态升级机制，课程后面有讲解和演示。zuul本身是无状态的，可以水平高可用部署。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1585055046,"ip_address":"","comment_id":192334,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"zuul 动态 filter 升级怎么实现的呢？怎么保证高可用的呢？","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488374,"discussion_content":"zuul filter动态升级机制，课程后面有讲解和演示。zuul本身是无状态的，可以水平高可用部署。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585055046,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":165303,"user_name":"技术修行者","can_delete":false,"product_type":"c3","uid":1013147,"ip_address":"","ucode":"28CA41A1214D6B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/75/9b/611e74ab.jpg","comment_is_top":false,"comment_ctime":1577197360,"is_pvip":false,"replies":[{"id":63274,"content":"选路由的动作一般是在前置(pre)过滤器中实现的，当然实际可以和服务注册中心配合，路由表在服务注册中心里头，网关可以定期同步路由表，运行时前置过滤器根据路由表做决策路由。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1577358476,"ip_address":"","comment_id":165303,"utype":1}],"discussion_count":1,"race_medal":1,"score":2,"product_id":100007001,"comment_content":"选路由的事情，不应该是在routing filter中进行处理吗？","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479113,"discussion_content":"选路由的动作一般是在前置(pre)过滤器中实现的，当然实际可以和服务注册中心配合，路由表在服务注册中心里头，网关可以定期同步路由表，运行时前置过滤器根据路由表做决策路由。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577358476,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122916,"user_name":"恰饭哒","can_delete":false,"product_type":"c3","uid":1014023,"ip_address":"","ucode":"0395069A050057","user_header":"https://static001.geekbang.org/account/avatar/00/0f/79/07/2f418316.jpg","comment_is_top":false,"comment_ctime":1565573277,"is_pvip":false,"replies":[{"id":45228,"content":"你好，hystrix熔断可以通过hystrix-dashboard(https:&#47;&#47;github.com&#47;Netflix-Skunkworks&#47;hystrix-dashboard&#47;wiki)(或者hystrix-metrics)查看，它可以展示线程超时，线程池拒绝，短路，调用失败&#47;异常的数量，如果熔断了，看这些数据就可以知道熔断的原因。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1565616155,"ip_address":"","comment_id":122916,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"波波老师好，网关熔断了怎么知道熔断的原因了","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462455,"discussion_content":"你好，hystrix熔断可以通过hystrix-dashboard(https://github.com/Netflix-Skunkworks/hystrix-dashboard/wiki)(或者hystrix-metrics)查看，它可以展示线程超时，线程池拒绝，短路，调用失败/异常的数量，如果熔断了，看这些数据就可以知道熔断的原因。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565616155,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":21027,"user_name":"沫沫（美丽人生）","can_delete":false,"product_type":"c3","uid":1051023,"ip_address":"","ucode":"FC73BF0D79E3FD","user_header":"https://static001.geekbang.org/account/avatar/00/10/09/8f/ad6039b6.jpg","comment_is_top":false,"comment_ctime":1534894091,"is_pvip":false,"replies":[{"id":8120,"content":"nginx挺成熟，也可以做网关，zuul能做的，nginx都能做到，只是做法门槛不同，如果满足现在的业务需求，没必要换，具体要不要换，还得看企业具体上下文","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1535863572,"ip_address":"","comment_id":21027,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"杨老师，早上好。们现在用的是nginx，有必要替换成zuul吗?","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":422501,"discussion_content":"nginx挺成熟，也可以做网关，zuul能做的，nginx都能做到，只是做法门槛不同，如果满足现在的业务需求，没必要换，具体要不要换，还得看企业具体上下文","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1535863572,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}