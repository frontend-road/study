{"id":308108,"title":"01 | è®¤è¯†å®¹å™¨ï¼šå®¹å™¨çš„åŸºæœ¬æ“ä½œå’Œå®ç°åŸç†","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯ç¨‹è¿œã€‚ä½œä¸ºä¸€åå·¥ç¨‹å¸ˆï¼Œæˆ‘çŒœåœ¨è¿‡å»çš„å‡ å¹´æ—¶é—´é‡Œï¼Œä½ è‚¯å®šç”¨è¿‡æˆ–è€…å¬äººæèµ·è¿‡å®¹å™¨ï¼ˆContainerï¼‰ã€‚</p><p>è¯´å®è¯ï¼Œå®¹å™¨è¿™ä¸œè¥¿ä¸€ç‚¹éƒ½ä¸å¤æ‚ï¼Œå¦‚æœä½ åªæ˜¯æƒ³ç”¨çš„è¯ï¼Œé‚£è·Ÿç€<a href=\"https://docs.docker.com/get-started/\">Dockerå®˜ç½‘</a>çš„è¯´æ˜ï¼Œåº”è¯¥åæ¥åˆ†é’Ÿå°±èƒ½æå®šã€‚</p><p>ç®€å•æ¥è¯´ï¼Œå®ƒå°±æ˜¯ä¸ªå°å·¥å…·ï¼Œå¯ä»¥æŠŠä½ æƒ³è·‘çš„ç¨‹åºï¼Œåº“æ–‡ä»¶å•Šï¼Œé…ç½®æ–‡ä»¶éƒ½ä¸€èµ·â€œæ‰“åŒ…â€ã€‚</p><p>ç„¶åï¼Œæˆ‘ä»¬åœ¨ä»»ä½•ä¸€ä¸ªè®¡ç®—æœºçš„èŠ‚ç‚¹ä¸Šï¼Œéƒ½å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ‰“å¥½çš„åŒ…ã€‚æœ‰äº†å®¹å™¨ï¼Œä¸€ä¸ªå‘½ä»¤å°±èƒ½æŠŠä½ æƒ³è·‘çš„ç¨‹åºè·‘èµ·æ¥ï¼Œåšåˆ°äº†<strong>ä¸€æ¬¡æ‰“åŒ…ï¼Œå°±å¯ä»¥åˆ°å¤„ä½¿ç”¨ã€‚</strong></p><p>ä»Šå¤©æ˜¯å’±ä»¬æ•´ä¸ªè¯¾ç¨‹çš„ç¬¬ä¸€è®²ï¼Œæˆ‘æƒ³å’Œä½ æ¥èŠèŠå®¹å™¨èƒŒåçš„å®ç°æœºåˆ¶ã€‚</p><p>å½“ç„¶ï¼Œç©ºè®²åŸç†ä¹Ÿæ²¡ä»€ä¹ˆæ„Ÿè§‰ï¼Œæ‰€ä»¥æˆ‘è¿˜æ˜¯ä¼šå…ˆå¸¦ç€ä½ å¯åŠ¨ä¸€ä¸ªå®¹å™¨ç©ç©ï¼Œç„¶åå’±ä»¬å†ä¸€èµ·æ¥æ¢è®¨å®¹å™¨é‡Œé¢çš„ä¸¤å¤§å…³é”®æŠ€æœ¯â€”â€” Namespaceå’ŒCgroupsã€‚åŸºæœ¬ä¸Šç†è§£äº†è¿™ä¸¤ä¸ªæ¦‚å¿µï¼Œä½ å°±èƒ½å½»åº•ææ‡‚å®¹å™¨çš„æ ¸å¿ƒåŸç†äº†ã€‚</p><h2>åšä¸ªé•œåƒ</h2><p>è¯ä¸å¤šè¯´ï¼Œå’±ä»¬å°±å…ˆåŠ¨æ‰‹ç©ä¸€ç©ã€‚å¯åŠ¨å®¹å™¨çš„å·¥å…·æœ‰å¾ˆå¤šï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬è¿˜æ˜¯ä½¿ç”¨Dockerè¿™ä¸ªæœ€å¸¸ç”¨çš„å®¹å™¨ç®¡ç†å·¥å…·ã€‚</p><p>å¦‚æœä½ ä¹‹å‰æ ¹æœ¬æ²¡ç”¨è¿‡Dockerçš„è¯ï¼Œé‚£æˆ‘å»ºè®®ä½ å…ˆå»<a href=\"https://docs.docker.com/\">å®˜ç½‘</a>çœ‹çœ‹æ–‡æ¡£ï¼Œä¸€äº›åŸºç¡€çš„ä»‹ç»æˆ‘å°±ä¸è®²äº†ï¼Œé‚£äº›å†…å®¹ä½ éšä¾¿åœ¨ç½‘ä¸Šä¸€æœå°±èƒ½æ‰¾åˆ°ã€‚</p><p>å®‰è£…å®ŒDockerä¹‹åï¼Œå’±ä»¬å…ˆæ¥ç”¨ä¸‹é¢çš„å‘½ä»¤è¿è¡Œä¸€ä¸ªhttpdæœåŠ¡ã€‚</p><!-- [[[read_end]]] --><pre><code># docker run -d centos/httpd:latest\n</code></pre><p>è¿™å‘½ä»¤ä¹Ÿå¾ˆç®€å•ï¼Œrunçš„æ„æ€å°±æ˜¯è¦å¯åŠ¨ä¸€ä¸ªå®¹å™¨ï¼Œ <code>-d</code> å‚æ•°é‡Œdæ˜¯Daemonçš„é¦–å­—æ¯ï¼Œä¹Ÿå°±æ˜¯è®©å®¹å™¨åœ¨åå°è¿è¡Œã€‚</p><p>æœ€åä¸€ä¸ªå‚æ•° <code>centos/httpd:latest</code> æŒ‡å®šäº†å…·ä½“è¦å¯åŠ¨å“ªä¸€ä¸ªé•œåƒï¼Œæ¯”å¦‚è¿™é‡Œå’±ä»¬å¯åŠ¨çš„æ˜¯centos/httpdè¿™ä¸ªé•œåƒçš„latestç‰ˆæœ¬ã€‚</p><p>é•œåƒæ˜¯Dockerå…¬å¸çš„åˆ›ä¸¾ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªä¼Ÿå¤§çš„å‘æ˜ã€‚ä½ æƒ³æƒ³ï¼Œåœ¨æ²¡æœ‰å®¹å™¨ä¹‹å‰ï¼Œä½ æƒ³å®‰è£…httpdçš„è¯ï¼Œä¼šæ€ä¹ˆåšï¼Ÿæ˜¯ä¸æ˜¯å¾—è¿è¡Œä¸€è¿ä¸²çš„å‘½ä»¤ï¼Ÿç”šè‡³ä¸åŒçš„ç³»ç»Ÿä¸Šæ“ä½œæ–¹æ³•ä¹Ÿä¸ä¸€æ ·ï¼Ÿ</p><p>ä½†ä½ çœ‹ï¼Œæœ‰äº†å®¹å™¨ä¹‹åï¼Œä½ åªè¦è¿è¡Œä¸€æ¡å‘½ä»¤å°±æå®šäº†ã€‚å…¶å®æ‰€æœ‰çš„ç„æœºéƒ½åœ¨è¿™ä¸ªé•œåƒé‡Œé¢ã€‚</p><p>é•œåƒè¿™ä¹ˆç¥å¥‡ï¼Œé‚£å®ƒåˆ°åº•æ˜¯æ€ä¹ˆä¸€å›äº‹å‘¢ï¼Ÿå…¶å®ï¼Œé•œåƒå°±æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ–‡ä»¶ç³»ç»Ÿï¼Œ</p><p><strong>å®ƒæä¾›äº†å®¹å™¨ä¸­ç¨‹åºæ‰§è¡Œéœ€è¦çš„æ‰€æœ‰æ–‡ä»¶ã€‚</strong>å…·ä½“æ¥è¯´ï¼Œå°±æ˜¯åº”ç”¨ç¨‹åºæƒ³å¯åŠ¨ï¼Œéœ€è¦ä¸‰ç±»æ–‡ä»¶ï¼šç›¸å…³çš„ç¨‹åºå¯æ‰§è¡Œæ–‡ä»¶ã€åº“æ–‡ä»¶å’Œé…ç½®æ–‡ä»¶ï¼Œè¿™ä¸‰ç±»æ–‡ä»¶éƒ½è¢«å®¹å™¨æ‰“åŒ…åšå¥½äº†ã€‚</p><p>è¿™æ ·ï¼Œåœ¨å®¹å™¨è¿è¡Œçš„æ—¶å€™å°±ä¸å†ä¾èµ–å®¿ä¸»æœºä¸Šçš„æ–‡ä»¶æ“ä½œç³»ç»Ÿç±»å‹å’Œé…ç½®äº†ï¼Œåšåˆ°äº†æƒ³åœ¨å“ªä¸ªèŠ‚ç‚¹ä¸Šè¿è¡Œï¼Œå°±å¯ä»¥åœ¨å“ªä¸ªèŠ‚ç‚¹ä¸Šç«‹åˆ»è¿è¡Œã€‚</p><p>é‚£ä¹ˆæˆ‘ä»¬æ€ä¹ˆæ¥åšä¸€ä¸ªå®¹å™¨é•œåƒå‘¢ï¼Ÿ</p><p>åˆšæ‰çš„ä¾‹å­é‡Œï¼Œæˆ‘ä»¬ç”¨çš„ <code>centos/httpd:latest</code> è¿™ä¸ªé•œåƒæ˜¯ <strong>Dockeré•œåƒåº“</strong>é‡Œç›´æ¥æä¾›çš„ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå·±åšä¸€ä¸ªæä¾›httpdæœåŠ¡çš„å®¹å™¨é•œåƒï¼Œè¿™é‡Œä»ç„¶å¯ä»¥ç”¨Dockerè¿™ä¸ªå·¥å…·æ¥è‡ªå®šä¹‰é•œåƒã€‚</p><p>Dockerä¸ºç”¨æˆ·è‡ªå·±å®šä¹‰é•œåƒæä¾›äº†ä¸€ä¸ªå«åšDockerfileçš„æ–‡ä»¶ï¼Œåœ¨è¿™ä¸ªDockerfileæ–‡ä»¶é‡Œï¼Œä½ å¯ä»¥è®¾å®šè‡ªå·±é•œåƒçš„åˆ›å»ºæ­¥éª¤ã€‚</p><p>å¦‚æœæˆ‘ä»¬è‡ªå·±æ¥åšä¸€ä¸ªhttpdçš„é•œåƒä¹Ÿä¸éš¾ï¼Œä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬å¯ä»¥ä¸€èµ·æ¥å†™ä¸€ä¸ªDockerfileï¼Œä½“ä¼šä¸€ä¸‹æ•´ä¸ªè¿‡ç¨‹ã€‚ç”¨Dockerfile build imageçš„ Dockerfile å’Œå¯¹åº”çš„ç›®å½•æˆ‘æ”¾åœ¨<a href=\"http://github.com/chengyli/training/tree/main/image/demo\">è¿™é‡Œ</a>äº†ã€‚</p><p>æ“ä½œä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆè¦ç†è§£è¿™ä¸ªDockerfileåšäº†ä»€ä¹ˆï¼Œå…¶å®å®ƒå¾ˆç®€å•ï¼Œåªæœ‰ä¸‹é¢è¿™5è¡Œï¼š</p><pre><code class=\"language-shell\"># cat Dockerfile\nFROM centos:8.1.1911\nRUN yum install -y httpd\nCOPY file1 /var/www/html/\nADD  file2.tar.gz /var/www/html/\nCMD [\"/sbin/httpd\", \"-D\", \"FOREGROUND\"]\n</code></pre><p>æˆ‘ä»¬çœ‹ä¸‹å®ƒåšäº†å“ªå‡ ä»¶äº‹ï¼šåœ¨ä¸€ä¸ªcentosçš„åŸºå‡†é•œåƒä¸Šå®‰è£…å¥½httpdçš„åŒ…ï¼Œç„¶ååœ¨httpdæä¾›æ–‡ä»¶æœåŠ¡çš„é…ç½®ç›®å½•ä¸‹ï¼ŒæŠŠéœ€è¦å¯¹å¤–æä¾›çš„æ–‡ä»¶file1å’Œfile2æ‹·è´è¿‡å»ï¼Œæœ€åæŒ‡å®šå®¹å™¨å¯åŠ¨ä»¥åï¼Œéœ€è¦è‡ªåŠ¨å¯åŠ¨çš„httpdæœåŠ¡ã€‚</p><p>æœ‰äº†è¿™ä¸ªé•œåƒï¼Œæˆ‘ä»¬å¸Œæœ›å®¹å™¨å¯åŠ¨åï¼Œå°±è¿è¡Œè¿™ä¸ªhttpdæœåŠ¡ï¼Œè®©ç”¨æˆ·å¯ä»¥ä¸‹è½½file1è¿˜æœ‰file2è¿™ä¸¤ä¸ªæ–‡ä»¶ã€‚</p><p>æˆ‘ä»¬å…·ä½“æ¥çœ‹è¿™ä¸ªDockerfileçš„æ¯ä¸€è¡Œï¼Œç¬¬ä¸€ä¸ªå¤§å†™çš„è¯éƒ½æ˜¯Dockerfileä¸“é—¨å®šä¹‰çš„æŒ‡ä»¤ï¼Œä¹Ÿå°±æ˜¯ <code>FROM</code>ã€<code>RUN</code>ã€<code>COPY</code>ã€<code>ADD</code>ã€<code>CMD</code>ï¼Œè¿™äº›æŒ‡ä»¤éƒ½å¾ˆåŸºç¡€ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸åšè¯¦ç»†è§£é‡Šäº†ï¼Œä½ å¯ä»¥å‚è€ƒDockerfileçš„<a href=\"https://docs.docker.com/engine/reference/builder/\">å®˜æ–¹æ–‡æ¡£</a>ã€‚</p><p>æˆ‘ä»¬å†™å®Œè¿™ä¸ªDockerfileä¹‹åï¼Œæƒ³è¦è®©å®ƒå˜æˆä¸€ä¸ªé•œåƒï¼Œè¿˜éœ€è¦æ‰§è¡Œä¸€ä¸‹ <code>docker build</code> å‘½ä»¤ã€‚</p><p>ä¸‹é¢è¿™ä¸ªå‘½ä»¤ä¸­ <code>-f ./Dockerfile</code> æŒ‡å®šDockerfileæ–‡ä»¶ï¼Œ<code>-t registry/httpd:v1</code> æŒ‡å®šäº†ç”Ÿæˆå‡ºæ¥çš„é•œåƒåï¼Œå®ƒçš„æ ¼å¼æ˜¯\"name:tag\"ï¼Œè¿™ä¸ªé•œåƒåä¹Ÿæ˜¯åé¢å¯åŠ¨å®¹å™¨éœ€è¦ç”¨åˆ°çš„ã€‚</p><pre><code># docker build -t registry/httpd:v1 -f ./Dockerfile . \n</code></pre><p><code>docker build</code> æ‰§è¡ŒæˆåŠŸä¹‹åï¼Œæˆ‘ä»¬å†è¿è¡Œ <code>docker images</code> è¿™ä¸ªå‘½ä»¤ï¼Œå°±å¯ä»¥çœ‹åˆ°ç”Ÿæˆçš„é•œåƒäº†ã€‚</p><pre><code class=\"language-shell\"># docker images\nREPOSITORY  TAG   IMAGEID  CREATED   SIZE\nregistry/httpd  v1  c682fc3d4b9a  4 seconds ago  277MB\n</code></pre><h2>å¯åŠ¨ä¸€ä¸ªå®¹å™¨ (Container)</h2><p>åšå®Œä¸€ä¸ªé•œåƒä¹‹åï¼Œä½ å°±å¯ä»¥ç”¨è¿™ä¸ªé•œåƒæ¥å¯åŠ¨ä¸€ä¸ªå®¹å™¨äº†ï¼Œæˆ‘ä»¬åˆšæ‰åšçš„é•œåƒåå­—æ˜¯ <code>registry/httpd:v1</code>ï¼Œé‚£ä¹ˆè¿˜æ˜¯ç”¨ <code>docker run</code> è¿™ä¸ªå‘½ä»¤æ¥å¯åŠ¨å®¹å™¨ã€‚</p><pre><code># docker run -d registry/httpd:v1\n</code></pre><p>å®¹å™¨å¯åŠ¨å®Œæˆåï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ <code>docker ps</code> å‘½ä»¤æ¥æŸ¥çœ‹è¿™ä¸ªå·²ç»å¯åŠ¨çš„å®¹å™¨ï¼š</p><pre><code class=\"language-shell\"># docker ps\nCONTAINER ID      IMAGE        COMMAND     CREATED       STATUS        PORTS               NAMES\nc5a9ff78d9c1        registry/httpd:v1   \"/sbin/httpd -D FOREâ€¦\"   2 seconds ago       Up 2 seconds                            loving_jackson\n</code></pre><p>åœ¨å‰é¢ä»‹ç»Dockerfileçš„æ—¶å€™ï¼Œæˆ‘ä»¬è¯´è¿‡åšè¿™ä¸ªé•œåƒæ˜¯ç”¨æ¥æä¾›HTTPæœåŠ¡çš„ï¼Œä¹Ÿå°±æ˜¯è®©ç”¨æˆ·å¯ä»¥ä¸‹è½½file1ã€file2è¿™ä¸¤ä¸ªæ–‡ä»¶ã€‚</p><p>é‚£æ€æ ·æ¥éªŒè¯æˆ‘ä»¬å»ºèµ·æ¥çš„å®¹å™¨æ˜¯ä¸æ˜¯æ­£å¸¸å·¥ä½œçš„å‘¢ï¼Ÿå¯ä»¥é€šè¿‡è¿™ä¸¤æ­¥æ¥éªŒè¯ï¼š</p><ul>\n<li>ç¬¬ä¸€æ­¥ï¼Œæˆ‘ä»¬å¯ä»¥è¿›å…¥å®¹å™¨çš„è¿è¡Œç©ºé—´ï¼ŒæŸ¥çœ‹httpdæœåŠ¡æ˜¯ä¸æ˜¯å¯åŠ¨äº†ï¼Œé…ç½®æ–‡ä»¶æ˜¯ä¸æ˜¯æ­£ç¡®çš„ã€‚</li>\n<li>ç¬¬äºŒæ­¥ï¼Œå¯¹äºHTTPæ–‡ä»¶æœåŠ¡ï¼Œå¦‚æœæˆ‘ä»¬èƒ½ç”¨ <code>curl</code> å‘½ä»¤ä¸‹è½½æ–‡ä»¶ï¼Œå°±å¯ä»¥è¯æ˜è¿™ä¸ªå®¹å™¨æä¾›äº†æˆ‘ä»¬é¢„æœŸçš„httpdæœåŠ¡ã€‚</li>\n</ul><p>æˆ‘ä»¬å…ˆæ¥åšç¬¬ä¸€æ­¥éªŒè¯ï¼Œæˆ‘ä»¬å¯ä»¥è¿è¡Œ <code>docker exec</code> è¿™ä¸ªå‘½ä»¤è¿›å…¥å®¹å™¨çš„è¿è¡Œç©ºé—´ï¼Œè‡³äºä»€ä¹ˆæ˜¯å®¹å™¨çš„è¿è¡Œç©ºé—´ï¼Œå®ƒçš„æ ‡å‡†è¯´æ³•æ˜¯å®¹å™¨çš„å‘½åç©ºé—´ï¼ˆNamespaceï¼‰ï¼Œè¿™ä¸ªæ¦‚å¿µæˆ‘ä»¬ç­‰ä¼šå„¿å†åšä»‹ç»ã€‚</p><p>è¿›å…¥å®¹å™¨è¿è¡Œç©ºé—´ä¹‹åï¼Œæˆ‘ä»¬æ€ä¹ˆç¡®è®¤httpdçš„æœåŠ¡è¿›ç¨‹å·²ç»åœ¨å®¹å™¨é‡Œå¯åŠ¨äº†å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬è¿è¡Œä¸‹é¢è¿™ä¸ª <code>docker exec</code> å‘½ä»¤ï¼Œä¹Ÿå°±æ˜¯æ‰§è¡Œ <code>docker exec c5a9ff78d9c1 ps -ef</code> ï¼Œå¯ä»¥çœ‹åˆ°httpdçš„æœåŠ¡è¿›ç¨‹æ­£åœ¨å®¹å™¨çš„ç©ºé—´ä¸­è¿è¡Œã€‚</p><pre><code class=\"language-shell\"># docker exec c5a9ff78d9c1 ps -ef\n\nUID        PID  PPID  C STIME TTY          TIME CMD\nroot         1     0  0 01:59 ?        00:00:00 /sbin/httpd -D FOREGROUND\napache       6     1  0 01:59 ?        00:00:00 /sbin/httpd -D FOREGROUND\napache       7     1  0 01:59 ?        00:00:00 /sbin/httpd -D FOREGROUND\napache       8     1  0 01:59 ?        00:00:00 /sbin/httpd -D FOREGROUND\napache       9     1  0 01:59 ?        00:00:00 /sbin/httpd -D FOREGROUND\n</code></pre><p>è¿™é‡Œæˆ‘è§£é‡Šä¸€ä¸‹ï¼Œåœ¨è¿™ä¸ª <code>docker exec</code> åé¢ç´§è·Ÿç€çš„IDè¡¨ç¤ºå®¹å™¨çš„IDï¼Œè¿™ä¸ªIDå°±æ˜¯æˆ‘ä»¬ä¹‹å‰è¿è¡Œ <code>docker ps</code> æŸ¥çœ‹è¿‡é‚£ä¸ªå®¹å™¨ï¼Œå®¹å™¨çš„IDå€¼æ˜¯ <code>c5a9ff78d9c1</code> ã€‚åœ¨è¿™ä¸ªIDå€¼çš„åé¢ï¼Œå°±æ˜¯æˆ‘ä»¬è¦åœ¨å®¹å™¨ç©ºé—´é‡Œè¿è¡Œçš„ <code>ps -ef</code> å‘½ä»¤ã€‚</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬å†æ¥ç¡®è®¤ä¸€ä¸‹ï¼Œhttpdæä¾›æ–‡ä»¶æœåŠ¡çš„ç›®å½•ä¸­file1å’Œfile2æ–‡ä»¶æ˜¯å¦å­˜åœ¨ã€‚</p><p>æˆ‘ä»¬åŒæ ·å¯ä»¥ç”¨ <code>docker exec</code> æ¥æŸ¥çœ‹ä¸€ä¸‹å®¹å™¨çš„æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œhttpdæä¾›æ–‡ä»¶æœåŠ¡çš„ç›®å½• <code>/var/www/html</code> æ˜¯å¦æœ‰è¿™ä¸¤ä¸ªæ–‡ä»¶ã€‚</p><p>å¾ˆå¥½ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°file1ã€file2è¿™ä¸¤ä¸ªæ–‡ä»¶ä¹Ÿéƒ½æ”¾åœ¨æŒ‡å®šç›®å½•ä¸­äº†ã€‚</p><pre><code># docker exec c5a9ff78d9c1 ls /var/www/html\nfile1\nfile2\n</code></pre><p>åˆ°è¿™é‡Œæˆ‘ä»¬å®Œæˆäº†ç¬¬ä¸€æ­¥çš„éªŒè¯ï¼Œè¿›å…¥åˆ°å®¹å™¨çš„è¿è¡Œç©ºé—´é‡Œï¼ŒéªŒè¯äº†httpdæœåŠ¡å·²ç»å¯åŠ¨ï¼Œé…ç½®æ–‡ä»¶ä¹Ÿæ˜¯æ­£ç¡®çš„ã€‚</p><p>é‚£ä¸‹é¢æˆ‘ä»¬è¦åšç¬¬äºŒæ­¥çš„éªŒè¯ï¼Œç”¨ <code>curl</code> å‘½ä»¤æ¥éªŒè¯æ˜¯å¦å¯ä»¥ä»å®¹å™¨çš„httpdæœåŠ¡é‡Œä¸‹è½½åˆ°æ–‡ä»¶ã€‚</p><p>å¦‚æœè¦è®¿é—®httpdæœåŠ¡ï¼Œæˆ‘ä»¬å°±éœ€è¦çŸ¥é“è¿™ä¸ªå®¹å™¨çš„IPåœ°å€ã€‚å®¹å™¨çš„ç½‘ç»œç©ºé—´ä¹Ÿæ˜¯ç‹¬ç«‹çš„ï¼Œæœ‰ä¸€ä¸ªå®ƒè‡ªå·±çš„IPã€‚æˆ‘ä»¬è¿˜æ˜¯å¯ä»¥ç”¨ <code>docker exec</code> è¿›å…¥åˆ°å®¹å™¨çš„ç½‘ç»œç©ºé—´ï¼ŒæŸ¥çœ‹ä¸€ä¸‹è¿™ä¸ªå®¹å™¨çš„IPã€‚</p><p>è¿è¡Œä¸‹é¢çš„è¿™æ¡ <code>docker exec c5a9ff78d9c1 ip addr</code> å‘½ä»¤ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å®¹å™¨é‡Œç½‘ç»œæ¥å£eth0ä¸Šé…ç½®çš„IPæ˜¯ <code>172.17.0.2</code> ã€‚</p><p>è¿™ä¸ªIPç›®å‰åªèƒ½åœ¨å®¹å™¨çš„å®¿ä¸»æœºä¸Šè®¿é—®ï¼Œåœ¨åˆ«çš„æœºå™¨ä¸Šç›®å‰æ˜¯ä¸èƒ½è®¿é—®çš„ã€‚å…³äºå®¹å™¨ç½‘ç»œçš„çŸ¥è¯†ï¼Œæˆ‘ä»¬ä¼šåœ¨åé¢çš„è¯¾ç¨‹é‡Œä»‹ç»ã€‚</p><pre><code class=\"language-shell\"># docker exec c5a9ff78d9c1 ip addr\n\n1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000\n\n    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00\n\n    inet 127.0.0.1/8 scope host lo\n\n       valid_lft forever preferred_lft forever\n\n168: eth0@if169: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default\n\n    link/ether 02:42:ac:11:00:02 brd ff:ff:ff:ff:ff:ff link-netnsid 0\n\n    inet 172.17.0.2/16 brd 172.17.255.255 scope global eth0\n\n       valid_lft forever preferred_lft forever\n</code></pre><p>å¥½äº†ï¼Œè·å–äº†httpdæœåŠ¡çš„IPåœ°å€ä¹‹åï¼Œæˆ‘ä»¬éšä¾¿ä¸‹è½½ä¸€ä¸ªæ–‡ä»¶è¯•è¯•ï¼Œæ¯”å¦‚é€‰file2ã€‚</p><p>æˆ‘ä»¬åœ¨å®¿ä¸»æœºä¸Šè¿è¡Œ <code>curl</code> ï¼Œå°±å¯ä»¥ä¸‹è½½è¿™ä¸ªæ–‡ä»¶äº†ï¼Œæ“ä½œå¦‚ä¸‹ã€‚å¾ˆå¥½ï¼Œæ–‡ä»¶ä¸‹è½½æˆåŠŸäº†ï¼Œè¿™è¯æ˜äº†æˆ‘ä»¬è¿™ä¸ªæä¾›httpdæœåŠ¡çš„å®¹å™¨æ­£å¸¸è¿è¡Œäº†ã€‚</p><pre><code># curl -L -O http://172.17.0.2/file2\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n\n                                 Dload  Upload   Total   Spent    Left  Speed\n\n100     6  100     6    0     0   1500      0 --:--:-- --:--:-- --:--:--  1500\n\n# ls\nfile2\n</code></pre><p>ä¸Šé¢çš„æ­¥éª¤å®Œæˆä¹‹åï¼Œæˆ‘ä»¬çš„ç¬¬äºŒæ­¥éªŒè¯ï¼Œç”¨ <code>curl</code> ä¸‹è½½httpdæœåŠ¡æä¾›çš„æ–‡ä»¶ä¹ŸæˆåŠŸäº†ã€‚</p><p>å¥½äº†ï¼Œæˆ‘ä»¬åˆšæ‰è‡ªå·±åšäº†å®¹å™¨é•œåƒï¼Œç”¨è¿™ä¸ªé•œåƒå¯åŠ¨äº†å®¹å™¨ï¼Œå¹¶ä¸”ç”¨ <code>docker exec</code> å‘½ä»¤æ£€æŸ¥äº†å®¹å™¨è¿è¡Œç©ºé—´é‡Œçš„è¿›ç¨‹ã€æ–‡ä»¶å’Œç½‘ç»œè®¾ç½®ã€‚</p><p>é€šè¿‡è¿™ä¸Šé¢çš„è¿™äº›æ“ä½œç»ƒä¹ ï¼Œä¼°è®¡ä½ å·²ç»åˆæ­¥æ„ŸçŸ¥åˆ°ï¼Œå®¹å™¨çš„æ–‡ä»¶ç³»ç»Ÿæ˜¯ç‹¬ç«‹çš„ï¼Œè¿è¡Œçš„è¿›ç¨‹ç¯å¢ƒæ˜¯ç‹¬ç«‹çš„ï¼Œç½‘ç»œçš„è®¾ç½®ä¹Ÿæ˜¯ç‹¬ç«‹çš„ã€‚ä½†æ˜¯å®ƒä»¬å’Œå®¿ä¸»æœºä¸Šçš„æ–‡ä»¶ç³»ç»Ÿï¼Œè¿›ç¨‹ç¯å¢ƒä»¥åŠç½‘ç»œæ„Ÿè§‰éƒ½å·²ç»åˆ†å¼€äº†ã€‚</p><p>æˆ‘æƒ³å’Œä½ è¯´ï¼Œè¿™ä¸ªæ„Ÿè§‰æ²¡é”™ï¼Œçš„ç¡®æ˜¯è¿™æ ·ã€‚æˆ‘ä»¬åˆšæ‰å¯åŠ¨çš„å®¹å™¨ï¼Œå·²ç»ä»å®¿ä¸»æœºç¯å¢ƒé‡Œè¢«åˆ†éš”å‡ºæ¥äº†ï¼Œå°±åƒä¸‹é¢è¿™å¼ å›¾é‡Œçš„æè¿°ä¸€æ ·ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/4b/3a/4b67ff2f9070afbc2d0966464a67b83a.jpeg?wh=3200*1800\" alt=\"\"></p><p>ä»ç”¨æˆ·ä½¿ç”¨çš„è§’åº¦æ¥çœ‹ï¼Œå®¹å™¨å’Œä¸€å°ç‹¬ç«‹çš„æœºå™¨æˆ–è€…è™šæ‹Ÿæœºæ²¡æœ‰ä»€ä¹ˆå¤ªå¤§çš„åŒºåˆ«ï¼Œä½†æ˜¯å®ƒå’Œè™šæ‹Ÿæœºç›¸æ¯”ï¼Œå´æ²¡æœ‰å„ç§å¤æ‚çš„ç¡¬ä»¶è™šæ‹Ÿå±‚ï¼Œæ²¡æœ‰ç‹¬ç«‹çš„Linuxå†…æ ¸ã€‚</p><p>å®¹å™¨æ‰€æœ‰çš„è¿›ç¨‹è°ƒåº¦ï¼Œå†…å­˜è®¿é—®ï¼Œæ–‡ä»¶çš„è¯»å†™éƒ½ç›´æ¥è·‘åœ¨å®¿ä¸»æœºçš„å†…æ ¸ä¹‹ä¸Šï¼Œè¿™æ˜¯æ€ä¹ˆåšåˆ°çš„å‘¢ï¼Ÿ</p><h2>å®¹å™¨æ˜¯ä»€ä¹ˆ</h2><p>è¦å›ç­”è¿™ä¸ªé—®é¢˜ï¼Œä½ å¯ä»¥å…ˆè®°ä½è¿™ä¸¤ä¸ªæœ¯è¯­ <strong>Namespaceå’ŒCgroups</strong>ã€‚å¦‚æœæœ‰äººé—®ä½ Linuxä¸Šçš„å®¹å™¨æ˜¯ä»€ä¹ˆï¼Œæœ€ç®€å•ç›´æ¥çš„å›ç­”å°±æ˜¯Namesapceå’ŒCgroupsã€‚Namespaceå’ŒCgroupså¯ä»¥è®©ç¨‹åºåœ¨ä¸€ä¸ªèµ„æºå¯æ§çš„ç‹¬ç«‹ï¼ˆéš”ç¦»ï¼‰ç¯å¢ƒä¸­è¿è¡Œï¼Œè¿™ä¸ªå°±æ˜¯å®¹å™¨äº†ã€‚</p><p>æˆ‘ä»¬ç°åœ¨å·²ç»å‘ç°ï¼šå®¹å™¨çš„è¿›ç¨‹ã€ç½‘ç»œè¿˜æœ‰æ–‡ä»¶ç³»ç»Ÿéƒ½æ˜¯ç‹¬ç«‹çš„ã€‚é‚£é—®é¢˜æ¥äº†ï¼Œå®¹å™¨çš„ç‹¬ç«‹è¿è¡Œç¯å¢ƒåˆ°åº•æ˜¯æ€ä¹ˆåˆ›é€ çš„å‘¢ï¼Ÿè¿™å°±è¦æåˆ°Namespaceè¿™ä¸ªæ¦‚å¿µäº†ã€‚æ‰€ä»¥æ¥ä¸‹æ¥ï¼Œå°±å…ˆä»æˆ‘ä»¬å·²ç»æœ‰ç‚¹æ„Ÿè§‰çš„Namespaceå¼€å§‹åˆ†æã€‚</p><h3>Namespace</h3><p>æ¥ç€å‰é¢çš„ä¾‹å­ï¼Œæˆ‘ä»¬æ­£å¥½æœ‰äº†ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„å®¹å™¨ï¼Œé‚£æˆ‘ä»¬å°±æ‹¿è¿™ä¸ªè¿è¡Œçš„å®¹å™¨æ¥çœ‹çœ‹Namespaceåˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ</p><p>åœ¨å‰é¢æˆ‘ä»¬è¿è¡Œ <code>docker exec c5a9ff78d9c1 ps -ef</code>ï¼Œçœ‹åˆ°äº†5ä¸ªhttpdè¿›ç¨‹ï¼Œè€Œä¸”ä¹Ÿåªæœ‰è¿™5ä¸ªè¿›ç¨‹ã€‚</p><pre><code class=\"language-shell\"># docker exec c5a9ff78d9c1 ps -ef\n\nUID        PID  PPID  C STIME TTY          TIME CMD\nroot         1     0  0 01:59 ?        00:00:00 /sbin/httpd -D FOREGROUND\napache       6     1  0 01:59 ?        00:00:00 /sbin/httpd -D FOREGROUND\napache       7     1  0 01:59 ?        00:00:00 /sbin/httpd -D FOREGROUND\napache       8     1  0 01:59 ?        00:00:00 /sbin/httpd -D FOREGROUND\napache       9     1  0 01:59 ?        00:00:00 /sbin/httpd -D FOREGROUND\n</code></pre><p>å¦‚æœæˆ‘ä»¬ä¸ç”¨ <code>docker exec</code>ï¼Œç›´æ¥åœ¨å®¿ä¸»æœºä¸Šè¿è¡Œ ps -efï¼Œå°±ä¼šçœ‹åˆ°å¾ˆå¤šè¿›ç¨‹ã€‚å¦‚æœæˆ‘ä»¬è¿è¡Œä¸€ä¸‹ <code>grep httpd</code> ï¼ŒåŒæ ·å¯ä»¥çœ‹åˆ°è¿™5ä¸ªhttpdçš„è¿›ç¨‹ï¼š</p><pre><code class=\"language-shell\"># ps -ef | grep httpd\n\nUID        PID  PPID  C STIME TTY          TIME CMD\nroot     20731 20684  0 18:59 ?        00:00:01 /sbin/httpd -D FOREGROUND\n48       20787 20731  0 18:59 ?        00:00:00 /sbin/httpd -D FOREGROUND\n48       20788 20731  0 18:59 ?        00:00:06 /sbin/httpd -D FOREGROUND\n48       20789 20731  0 18:59 ?        00:00:05 /sbin/httpd -D FOREGROUND\n48       20791 20731  0 18:59 ?        00:00:05 /sbin/httpd -D FOREGROUN\n</code></pre><p>è¿™ä¸¤ç»„è¾“å‡ºç»“æœåˆ°åº•æœ‰ä»€ä¹ˆå·®åˆ«å‘¢ï¼Œä½ å¯ä»¥ä»”ç»†åšä¸ªå¯¹æ¯”ï¼Œæœ€å¤§çš„ä¸åŒå°±æ˜¯<strong>è¿›ç¨‹çš„PIDä¸ä¸€æ ·ã€‚</strong>é‚£ä¸ºä»€ä¹ˆPIDä¼šä¸åŒå‘¢ï¼Ÿæˆ–è€…è¯´ï¼Œè¿è¡Œ <code>docker exec c5a9ff78d9c1 ps -ef</code> å’Œ <code>ps -ef</code> å®è´¨çš„åŒºåˆ«åœ¨å“ªé‡Œå‘¢ï¼Ÿ</p><p>å¦‚æœç†è§£äº†PIDä¸ºä½•ä¸åŒï¼Œæˆ‘ä»¬å°±èƒ½ææ¸…æ¥šLinux Namespaceçš„æ¦‚å¿µäº†ï¼Œä¸ºäº†æ–¹ä¾¿åæ–‡çš„è®²è§£ï¼Œæˆ‘ä»¬å…ˆç”¨ä¸‹é¢è¿™å¼ å›¾æ¥æ¢³ç†ä¸€ä¸‹æˆ‘ä»¬çœ‹åˆ°çš„PIDã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/88/7a/888c00e0e8fe40edce3f1a9f6yye717a.jpeg?wh=3200*1800\" alt=\"\"></p><p>Linuxåœ¨åˆ›å»ºå®¹å™¨çš„æ—¶å€™ï¼Œå°±ä¼šå»ºå‡ºä¸€ä¸ªPID Namespaceï¼ŒPIDå…¶å®å°±æ˜¯è¿›ç¨‹çš„ç¼–å·ã€‚è¿™ä¸ªPID Namespaceï¼Œå°±æ˜¯æŒ‡æ¯å»ºç«‹å‡ºä¸€ä¸ªNamespaceï¼Œå°±ä¼šå•ç‹¬å¯¹è¿›ç¨‹è¿›è¡ŒPIDç¼–å·ï¼Œæ¯ä¸ªNamespaceçš„PIDç¼–å·éƒ½ä»1å¼€å§‹ã€‚</p><p>åŒæ—¶åœ¨è¿™ä¸ªPID Namespaceä¸­ä¹Ÿåªèƒ½çœ‹åˆ°Namespaceä¸­çš„è¿›ç¨‹ï¼Œè€Œä¸”çœ‹ä¸åˆ°å…¶ä»–Namespaceé‡Œçš„è¿›ç¨‹ã€‚</p><p>è¿™ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæœ‰å¦å¤–ä¸€ä¸ªå®¹å™¨ï¼Œé‚£ä¹ˆå®ƒä¹Ÿæœ‰è‡ªå·±çš„ä¸€ä¸ªPID Namespaceï¼Œè€Œè¿™ä¸¤ä¸ªPID Namespaceä¹‹é—´æ˜¯ä¸èƒ½çœ‹åˆ°å¯¹æ–¹çš„è¿›ç¨‹çš„ï¼Œè¿™é‡Œå°±ä½“ç°å‡ºäº†Namespaceçš„ä½œç”¨ï¼š<strong>ç›¸äº’éš”ç¦»</strong>ã€‚</p><p>è€Œåœ¨å®¿ä¸»æœºä¸Šçš„Host PID Namespaceï¼Œå®ƒæ˜¯å…¶ä»–Namespaceçš„çˆ¶äº²Namespaceï¼Œå¯ä»¥çœ‹åˆ°åœ¨è¿™å°æœºå™¨ä¸Šçš„æ‰€æœ‰è¿›ç¨‹ï¼Œä¸è¿‡è¿›ç¨‹PIDç¼–å·ä¸æ˜¯Container PID Namespaceé‡Œçš„ç¼–å·äº†ï¼Œè€Œæ˜¯æŠŠæ‰€æœ‰åœ¨å®¿ä¸»æœºè¿è¡Œçš„è¿›ç¨‹æ”¾åœ¨ä¸€èµ·ï¼Œå†è¿›è¡Œç¼–å·ã€‚</p><p>è®²äº†PID Namespaceä¹‹åï¼Œæˆ‘ä»¬äº†è§£åˆ° <strong>Namespaceå…¶å®å°±æ˜¯ä¸€ç§éš”ç¦»æœºåˆ¶ï¼Œä¸»è¦ç›®çš„æ˜¯éš”ç¦»è¿è¡Œåœ¨åŒä¸€ä¸ªå®¿ä¸»æœºä¸Šçš„å®¹å™¨ï¼Œè®©è¿™äº›å®¹å™¨ä¹‹é—´ä¸èƒ½è®¿é—®å½¼æ­¤çš„èµ„æºã€‚</strong></p><p>è¿™ç§éš”ç¦»æœ‰ä¸¤ä¸ªä½œç”¨ï¼š<strong>ç¬¬ä¸€æ˜¯å¯ä»¥å……åˆ†åœ°åˆ©ç”¨ç³»ç»Ÿçš„èµ„æºï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨åŒä¸€å°å®¿ä¸»æœºä¸Šå¯ä»¥è¿è¡Œå¤šä¸ªç”¨æˆ·çš„å®¹å™¨ï¼›ç¬¬äºŒæ˜¯ä¿è¯äº†å®‰å…¨æ€§ï¼Œå› ä¸ºä¸åŒç”¨æˆ·ä¹‹é—´ä¸èƒ½è®¿é—®å¯¹æ–¹çš„èµ„æºã€‚</strong></p><p>é™¤äº†PID Namespaceï¼Œè¿˜æœ‰å…¶ä»–å¸¸è§çš„Namespaceç±»å‹ï¼Œæ¯”å¦‚æˆ‘ä»¬ä¹‹å‰è¿è¡Œäº† <code>docker exec c5a9ff78d9c1 ip addr</code> è¿™ä¸ªå‘½ä»¤å»æŸ¥çœ‹å®¹å™¨å†…éƒ¨çš„IPåœ°å€ï¼Œè¿™é‡Œå…¶å®å°±æ˜¯åœ¨æŸ¥çœ‹Network Namespaceã€‚</p><p>åœ¨Network Namespaceä¸­éƒ½æœ‰ä¸€å¥—ç‹¬ç«‹çš„ç½‘ç»œæ¥å£æ¯”å¦‚è¿™é‡Œçš„loï¼Œeth0ï¼Œè¿˜æœ‰ç‹¬ç«‹çš„TCP/IPçš„åè®®æ ˆé…ç½®ã€‚</p><pre><code class=\"language-shell\"># docker exec c5a9ff78d9c1 ip addr\n1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000\n    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00\n    inet 127.0.0.1/8 scope host lo\n       valid_lft forever preferred_lft forever\n\n168: eth0@if169: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default\n    link/ether 02:42:ac:11:00:02 brd ff:ff:ff:ff:ff:ff link-netnsid 0\n    inet 172.17.0.2/16 brd 172.17.255.255 scope global eth0\n       valid_lft forever preferred_lft forever\n</code></pre><p>æˆ‘ä»¬è¿˜å¯ä»¥è¿è¡Œ <code>docker exec c5a9ff78d9c1 ls/</code> æŸ¥çœ‹å®¹å™¨ä¸­çš„æ ¹æ–‡ä»¶ç³»ç»Ÿï¼ˆrootfsï¼‰ã€‚ç„¶åï¼Œä½ ä¼šå‘ç°ï¼Œå®ƒå’Œå®¿ä¸»æœºä¸Šçš„æ ¹æ–‡ä»¶ç³»ç»Ÿä¹Ÿæ˜¯ä¸ä¸€æ ·çš„ã€‚<strong>å®¹å™¨ä¸­çš„æ ¹æ–‡ä»¶ç³»ç»Ÿï¼Œå…¶å®å°±æ˜¯æˆ‘ä»¬åšçš„é•œåƒã€‚</strong></p><p>é‚£å®¹å™¨è‡ªå·±çš„æ ¹æ–‡ä»¶ç³»ç»Ÿå®Œå…¨ç‹¬ç«‹äºå®¿ä¸»æœºä¸Šçš„æ ¹æ–‡ä»¶ç³»ç»Ÿï¼Œè¿™ä¸€ç‚¹æ˜¯æ€ä¹ˆåšåˆ°çš„å‘¢ï¼Ÿå…¶å®è¿™é‡Œä¾é çš„æ˜¯<strong>Mount Namespace</strong>ï¼ŒMount Namespaceä¿è¯äº†æ¯ä¸ªå®¹å™¨éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„æ–‡ä»¶ç›®å½•ç»“æ„ã€‚</p><p>Namespaceçš„ç±»å‹è¿˜æœ‰å¾ˆå¤šï¼Œæˆ‘ä»¬æŸ¥çœ‹\"Linux Programmer's Manual\"ï¼Œå¯ä»¥çœ‹åˆ°Linuxä¸­æ‰€æœ‰çš„Namespaceï¼šcgroup/ipc/network/mount/pid/time/user/utsã€‚</p><p>åœ¨è¿™é‡Œå‘¢ï¼Œä½ éœ€è¦è®°ä½çš„æ˜¯ <strong>Namespace æ˜¯Linuxä¸­å®ç°å®¹å™¨çš„ä¸¤å¤§æŠ€æœ¯ä¹‹ä¸€ï¼Œå®ƒæœ€é‡è¦çš„ä½œç”¨æ˜¯ä¿è¯èµ„æºçš„éš”ç¦»ã€‚</strong>åœ¨åé¢çš„è¯¾ç¨‹ï¼Œè®²è§£åˆ°å…·ä½“é—®é¢˜æ—¶ï¼Œæˆ‘ä¼šä¸æ–­åœ°æåˆ°Namespaceè¿™ä¸ªæ¦‚å¿µã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/5b/d2/5bbf4ac2fa9f81066732yy6f6202b8d2.jpg?wh=7301*2905\" alt=\"\"></p><p>å¥½äº†ï¼Œæˆ‘ä»¬åˆšæ‰è¯´äº†Namespaceï¼Œè¿™äº›Namespaceå°½ç®¡ç±»å‹ä¸åŒï¼Œå…¶å®éƒ½æ˜¯ä¸ºäº†éš”ç¦»å®¹å™¨èµ„æºï¼š<strong>PID Namespaceè´Ÿè´£éš”ç¦»ä¸åŒå®¹å™¨çš„è¿›ç¨‹ï¼ŒNetwork Namespaceåˆè´Ÿè´£ç®¡ç†ç½‘ç»œç¯å¢ƒçš„éš”ç¦»ï¼ŒMount Namespaceç®¡ç†æ–‡ä»¶ç³»ç»Ÿçš„éš”ç¦»ã€‚</strong></p><p>æ­£æ˜¯é€šè¿‡è¿™äº›Namespaceï¼Œæˆ‘ä»¬æ‰éš”ç¦»å‡ºä¸€ä¸ªå®¹å™¨ï¼Œè¿™é‡Œä½ ä¹Ÿå¯ä»¥æŠŠå®ƒçœ‹ä½œæ˜¯ä¸€å°â€œè®¡ç®—æœºâ€ã€‚</p><p>æ—¢ç„¶æ˜¯ä¸€å°â€œè®¡ç®—æœºâ€ï¼Œä½ è‚¯å®šä¼šé—®è¿™ä¸ªâ€œè®¡ç®—æœºâ€æœ‰å¤šå°‘CPUï¼Œæœ‰å¤šå°‘Memoryå•Šï¼Ÿé‚£ä¹ˆLinuxå¦‚ä½•ä¸ºè¿™äº›â€œè®¡ç®—æœºâ€æ¥å®šä¹‰CPUï¼Œå®šä¹‰Memoryçš„å®¹é‡å‘¢ï¼Ÿ</p><h3>Cgroups</h3><p>æƒ³è¦å®šä¹‰â€œè®¡ç®—æœºâ€å„ç§å®¹é‡å¤§å°ï¼Œå°±æ¶‰åŠåˆ°æ”¯æ’‘å®¹å™¨çš„ç¬¬äºŒä¸ªæŠ€æœ¯<strong>Cgroups ï¼ˆControl Groupsï¼‰</strong>äº†ã€‚Cgroupså¯ä»¥å¯¹æŒ‡å®šçš„è¿›ç¨‹åšå„ç§è®¡ç®—æœºèµ„æºçš„é™åˆ¶ï¼Œæ¯”å¦‚é™åˆ¶CPUçš„ä½¿ç”¨ç‡ï¼Œå†…å­˜ä½¿ç”¨é‡ï¼ŒIOè®¾å¤‡çš„æµé‡ç­‰ç­‰ã€‚</p><p>Cgroupsç©¶ç«Ÿæœ‰ä»€ä¹ˆå¥½å¤„å‘¢ï¼Ÿè¦çŸ¥é“ï¼Œåœ¨Cgroupså‡ºç°ä¹‹å‰ï¼Œä»»æ„ä¸€ä¸ªè¿›ç¨‹éƒ½å¯ä»¥åˆ›å»ºå‡ºæˆç™¾ä¸Šåƒä¸ªçº¿ç¨‹ï¼Œå¯ä»¥è½»æ˜“åœ°æ¶ˆè€—å®Œä¸€å°è®¡ç®—æœºçš„æ‰€æœ‰CPUèµ„æºå’Œå†…å­˜èµ„æºã€‚</p><p>ä½†æ˜¯æœ‰äº†Cgroupsè¿™ä¸ªæŠ€æœ¯ä»¥åï¼Œæˆ‘ä»¬å°±å¯ä»¥å¯¹ä¸€ä¸ªè¿›ç¨‹æˆ–è€…ä¸€ç»„è¿›ç¨‹çš„è®¡ç®—æœºèµ„æºçš„æ¶ˆè€—è¿›è¡Œé™åˆ¶äº†ã€‚</p><p>Cgroupsé€šè¿‡ä¸åŒçš„å­ç³»ç»Ÿé™åˆ¶äº†ä¸åŒçš„èµ„æºï¼Œæ¯ä¸ªå­ç³»ç»Ÿé™åˆ¶ä¸€ç§èµ„æºã€‚æ¯ä¸ªå­ç³»ç»Ÿé™åˆ¶èµ„æºçš„æ–¹å¼éƒ½æ˜¯ç±»ä¼¼çš„ï¼Œå°±æ˜¯æŠŠç›¸å…³çš„ä¸€ç»„è¿›ç¨‹åˆ†é…åˆ°ä¸€ä¸ªæ§åˆ¶ç»„é‡Œï¼Œç„¶åé€šè¿‡<strong>æ ‘ç»“æ„</strong>è¿›è¡Œç®¡ç†ï¼Œæ¯ä¸ªæ§åˆ¶ç»„éƒ½è®¾æœ‰è‡ªå·±çš„èµ„æºæ§åˆ¶å‚æ•°ã€‚</p><p>å®Œæ•´çš„Cgroupså­ç³»ç»Ÿçš„ä»‹ç»ï¼Œä½ å¯ä»¥æŸ¥çœ‹<a href=\"https://man7.org/linux/man-pages/man7/cgroups.7.html\">Linux Programmer's Manual</a> ä¸­Cgroupsçš„å®šä¹‰ã€‚</p><p>è¿™é‡Œå‘¢ï¼Œæˆ‘ä»¬åªéœ€è¦äº†è§£å‡ ç§æ¯”è¾ƒå¸¸ç”¨çš„Cgroupså­ç³»ç»Ÿï¼š</p><ul>\n<li>CPUå­ç³»ç»Ÿï¼Œç”¨æ¥é™åˆ¶ä¸€ä¸ªæ§åˆ¶ç»„ï¼ˆä¸€ç»„è¿›ç¨‹ï¼Œä½ å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªå®¹å™¨é‡Œæ‰€æœ‰çš„è¿›ç¨‹ï¼‰å¯ä½¿ç”¨çš„æœ€å¤§CPUã€‚</li>\n<li>memoryå­ç³»ç»Ÿï¼Œç”¨æ¥é™åˆ¶ä¸€ä¸ªæ§åˆ¶ç»„æœ€å¤§çš„å†…å­˜ä½¿ç”¨é‡ã€‚</li>\n<li>pidså­ç³»ç»Ÿï¼Œç”¨æ¥é™åˆ¶ä¸€ä¸ªæ§åˆ¶ç»„é‡Œæœ€å¤šå¯ä»¥è¿è¡Œå¤šå°‘ä¸ªè¿›ç¨‹ã€‚</li>\n<li>cpusetå­ç³»ç»Ÿï¼Œ è¿™ä¸ªå­ç³»ç»Ÿæ¥é™åˆ¶ä¸€ä¸ªæ§åˆ¶ç»„é‡Œçš„è¿›ç¨‹å¯ä»¥åœ¨å“ªå‡ ä¸ªç‰©ç†CPUä¸Šè¿è¡Œã€‚</li>\n</ul><p>å› ä¸ºmemoryå­ç³»ç»Ÿçš„é™åˆ¶å‚æ•°æœ€ç®€å•ï¼Œæ‰€ä»¥ä¸‹é¢æˆ‘ä»¬å°±ç”¨memoryå­ç³»ç»Ÿä¸ºä¾‹ï¼Œä¸€èµ·çœ‹çœ‹Cgroupsæ˜¯æ€ä¹ˆå¯¹ä¸€ä¸ªå®¹å™¨åšèµ„æºé™åˆ¶çš„ã€‚</p><p>å¯¹äºå¯åŠ¨çš„æ¯ä¸ªå®¹å™¨ï¼Œéƒ½ä¼šåœ¨Cgroupså­ç³»ç»Ÿä¸‹å»ºç«‹ä¸€ä¸ªç›®å½•ï¼Œåœ¨Cgroupsä¸­è¿™ä¸ªç›®å½•ä¹Ÿè¢«ç§°ä½œæ§åˆ¶ç»„ï¼Œæ¯”å¦‚ä¸‹å›¾é‡Œçš„\"docker-&lt;id1&gt;\"\"docker-&lt;id2&gt;\"ç­‰ã€‚ç„¶åæˆ‘ä»¬è®¾ç½®è¿™ä¸ªæ§åˆ¶ç»„çš„å‚æ•°ï¼Œé€šè¿‡è¿™ä¸ªæ–¹å¼ï¼Œæ¥é™åˆ¶è¿™ä¸ªå®¹å™¨çš„å†…å­˜èµ„æºã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/61/63/6193bba2757e5cc34bb023b13cac7663.jpeg?wh=3200*1800\" alt=\"\"></p><p>è¿˜è®°å¾—ï¼Œæˆ‘ä»¬ä¹‹å‰ç”¨Dockeråˆ›å»ºçš„é‚£ä¸ªå®¹å™¨å—ï¼Ÿåœ¨æ¯ä¸ªCgroupså­ç³»ç»Ÿä¸‹ï¼Œå¯¹åº”è¿™ä¸ªå®¹å™¨å°±ä¼šæœ‰ä¸€ä¸ªç›®å½•docker-<strong>c5a9ff78d9c1â€¦â€¦</strong>è¿™ä¸ªå®¹å™¨çš„IDå·ï¼Œå®¹å™¨ä¸­æ‰€æœ‰çš„è¿›ç¨‹éƒ½ä¼šå‚¨å­˜åœ¨è¿™ä¸ªæ§åˆ¶ç»„ä¸­  cgroup.procs è¿™ä¸ªå‚æ•°é‡Œã€‚</p><p>ä½ çœ‹ä¸‹é¢çš„è¿™äº›è¿›ç¨‹å·æ˜¯ä¸æ˜¯å¾ˆç†Ÿæ‚‰å‘¢ï¼Ÿæ²¡é”™ï¼Œå®ƒä»¬å°±æ˜¯å‰é¢æˆ‘ä»¬ç”¨psçœ‹åˆ°çš„è¿›ç¨‹å·ã€‚</p><p>æˆ‘ä»¬å®é™…çœ‹ä¸€ä¸‹è¿™ä¸ªä¾‹å­é‡Œçš„memory Cgroupsï¼Œå®ƒå¯ä»¥æ§åˆ¶Memoryçš„ä½¿ç”¨é‡ã€‚æ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬å°†è¿™ä¸ªæ§åˆ¶ç»„Memoryçš„æœ€å¤§ç”¨é‡è®¾ç½®ä¸º2GBã€‚</p><p>å…·ä½“æ“ä½œæ˜¯è¿™æ ·çš„ï¼Œæˆ‘ä»¬æŠŠï¼ˆ2* 1024 * 1024 * 1024 = 2147483648ï¼‰è¿™ä¸ªå€¼ï¼Œå†™å…¥memory Cgroupæ§åˆ¶ç»„ä¸­çš„memory.limit_in_bytesé‡Œï¼Œ<strong>è¿™æ ·è®¾ç½®åï¼Œcgroup.procsé‡Œé¢æ‰€æœ‰è¿›ç¨‹Memoryä½¿ç”¨é‡ä¹‹å’Œï¼Œæœ€å¤§ä¹Ÿä¸ä¼šè¶…è¿‡2GBã€‚</strong></p><pre><code class=\"language-shell\"># cd /sys/fs/cgroup/memory/system.slice/docker-c5a9ff78d9c1fedd52511e18fdbd26357250719fa0d128349547a50fad7c5de9.scope\n\n\n# cat cgroup.procs\n20731\n20787\n20788\n20789\n20791\n\n# echo 2147483648 &gt; memory.limit_in_bytes\n# cat memory.limit_in_bytes\n2147483648\n</code></pre><p>åˆšåˆšæˆ‘ä»¬é€šè¿‡memory Cgroupså®šä¹‰äº†å®¹å™¨çš„memoryå¯ä»¥ä½¿ç”¨çš„æœ€å¤§å€¼ã€‚å…¶ä»–çš„å­ç³»ç»Ÿç¨å¾®å¤æ‚ä¸€äº›ï¼Œä½†ç”¨æ³•ä¹Ÿå’Œmemoryç±»ä¼¼ï¼Œæˆ‘ä»¬åœ¨åé¢çš„è¯¾ç¨‹ä¸­ä¼šç»“åˆå…·ä½“çš„å®ä¾‹æ¥è¯¦ç»†è§£é‡Šå…¶ä»–çš„Cgroupsã€‚</p><p>è¿™é‡Œæˆ‘ä»¬è¿˜è¦æä¸€ä¸‹ <strong>Cgroupsæœ‰v1å’Œv2ä¸¤ä¸ªç‰ˆæœ¬</strong>ï¼š</p><p>Cgroups v1åœ¨Linuxä¸­å¾ˆæ—©å°±å®ç°äº†ï¼Œå„ç§å­ç³»ç»Ÿæ¯”è¾ƒç‹¬ç«‹ï¼Œæ¯ä¸ªè¿›ç¨‹åœ¨å„ä¸ªCgroupså­ç³»ç»Ÿä¸­ç‹¬ç«‹é…ç½®ï¼Œå¯ä»¥å±äºä¸åŒçš„groupã€‚</p><p>è™½ç„¶è¿™æ ·æ¯”è¾ƒçµæ´»ï¼Œä½†æ˜¯ä¹Ÿå­˜åœ¨é—®é¢˜ï¼Œä¼šå¯¼è‡´å¯¹<strong>åŒä¸€è¿›ç¨‹çš„èµ„æºåè°ƒæ¯”è¾ƒå›°éš¾</strong>ï¼ˆæ¯”å¦‚memory Cgroupä¸blkio Cgroupä¹‹é—´å°±ä¸èƒ½åä½œï¼‰ã€‚è™½ç„¶v1æœ‰ç¼ºé™·ï¼Œä½†æ˜¯åœ¨ä¸»æµçš„ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå¤§éƒ¨åˆ†ä½¿ç”¨çš„è¿˜æ˜¯v1ã€‚</p><p>Cgroups v2 åšäº†è®¾è®¡æ”¹è¿›ï¼Œ<strong>è§£å†³äº†v1çš„é—®é¢˜ï¼Œä½¿å„ä¸ªå­ç³»ç»Ÿå¯ä»¥åè°ƒç»Ÿä¸€åœ°ç®¡ç†èµ„æºã€‚</strong></p><p>ä¸è¿‡Cgroups v2åœ¨ç”Ÿäº§ç¯å¢ƒçš„åº”ç”¨è¿˜å¾ˆå°‘ï¼Œå› ä¸ºè¯¥ç‰ˆæœ¬å¾ˆå¤šå­ç³»ç»Ÿçš„å®ç°éœ€è¦è¾ƒæ–°ç‰ˆæœ¬çš„Linuxå†…æ ¸ï¼Œè¿˜æœ‰æ— è®ºæ˜¯ä¸»æµçš„Linuxå‘è¡Œç‰ˆæœ¬è¿˜æ˜¯å®¹å™¨äº‘å¹³å°ï¼Œæ¯”å¦‚Kubernetesï¼Œå¯¹v2çš„æ”¯æŒä¹Ÿåˆšåˆšèµ·æ­¥ã€‚</p><p>æ‰€ä»¥å•Šï¼Œæˆ‘ä»¬åœ¨åé¢Cgroupsçš„è®²è§£é‡Œå‘¢ï¼Œä¸»è¦è¿˜æ˜¯ç”¨ <strong>Cgroups v1è¿™ä¸ªç‰ˆæœ¬</strong>ï¼Œåœ¨ç£ç›˜I/Oçš„è¿™ä¸€ç« ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿä¼šä»‹ç»ä¸€ä¸‹Cgroups v2ã€‚</p><p>å¥½äº†ï¼Œä¸Šé¢æˆ‘ä»¬è§£è¯»äº†Namespaceå’ŒCgroupsä¸¤å¤§æŠ€æœ¯ï¼Œå®ƒä»¬æ˜¯Linuxä¸‹å®ç°å®¹å™¨çš„ä¸¤ä¸ªåŸºçŸ³ï¼Œåé¢è¯¾ç¨‹ä¸­è¦è®¨è®ºçš„å®¹å™¨ç›¸å…³é—®é¢˜ï¼Œæˆ–å¤šæˆ–å°‘éƒ½å’ŒNamespaceæˆ–è€…Cgroupsç›¸å…³ï¼Œæˆ‘ä»¬ä¼šç»“åˆå…·ä½“é—®é¢˜åšæ·±å…¥çš„åˆ†æã€‚</p><p>ç›®å‰å‘¢ï¼Œä½ åªéœ€è¦å…ˆè®°ä½è¿™ä¸¤ä¸ªæŠ€æœ¯çš„ä½œç”¨ï¼Œ<strong>Namespaceå¸®åŠ©å®¹å™¨æ¥å®ç°å„ç§è®¡ç®—èµ„æºçš„éš”ç¦»ï¼ŒCgroupsä¸»è¦é™åˆ¶çš„æ˜¯å®¹å™¨èƒ½å¤Ÿä½¿ç”¨çš„æŸç§èµ„æºé‡ã€‚</strong></p><h2>é‡ç‚¹æ€»ç»“</h2><p>è¿™ä¸€è®²ï¼Œæˆ‘ä»¬å¯¹å®¹å™¨æœ‰äº†ä¸€ä¸ªå¤§è‡´çš„è®¤è¯†ï¼ŒåŒ…æ‹¬å®ƒçš„â€œå½¢â€ï¼Œ<strong>ä¸€äº›åŸºæœ¬çš„å®¹å™¨æ“ä½œ</strong>ï¼›è¿˜æœ‰å®ƒçš„â€œç¥â€ï¼Œä¹Ÿå°±æ˜¯<strong>å®¹å™¨å®ç°çš„åŸç†</strong>ã€‚</p><p>å¯åŠ¨å®¹å™¨çš„åŸºæœ¬æ“ä½œæ˜¯è¿™æ ·çš„ï¼Œé¦–å…ˆç”¨Dockerfileæ¥å»ºç«‹ä¸€ä¸ªå®¹å™¨çš„é•œåƒï¼Œç„¶åå†ç”¨è¿™ä¸ªé•œåƒæ¥å¯åŠ¨ä¸€ä¸ªå®¹å™¨ã€‚</p><p>é‚£å¯åŠ¨äº†å®¹å™¨ä¹‹åï¼Œæ€ä¹ˆæ£€éªŒå®ƒæ˜¯ä¸æ˜¯æ­£å¸¸å·¥ä½œäº†å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬å¯ä»¥è¿è¡Œ <code>docker exec</code> è¿™ä¸ªå‘½ä»¤è¿›å…¥å®¹å™¨çš„è¿è¡Œç©ºé—´ï¼ŒæŸ¥çœ‹è¿›ç¨‹æ˜¯å¦å¯åŠ¨ï¼Œæ£€æŸ¥é…ç½®æ–‡ä»¶æ˜¯å¦æ­£ç¡®ï¼Œæ£€éªŒæˆ‘ä»¬è®¾ç½®çš„æœåŠ¡æ˜¯å¦èƒ½å¤Ÿæ­£å¸¸æä¾›ã€‚</p><p>æˆ‘ä»¬ç”¨ <code>docker exec</code> å‘½ä»¤æŸ¥çœ‹äº†å®¹å™¨çš„è¿›ç¨‹ï¼Œç½‘ç»œå’Œæ–‡ä»¶ç³»ç»Ÿï¼Œå°±èƒ½ä½“ä¼šåˆ°å®¹å™¨çš„æ–‡ä»¶ç³»ç»Ÿã€è¿è¡Œçš„è¿›ç¨‹ç¯å¢ƒå’Œç½‘ç»œçš„è®¾ç½®éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œæ‰€ä»¥ä»ç”¨æˆ·ä½¿ç”¨çš„è§’åº¦çœ‹ï¼Œå®¹å™¨å’Œä¸€å°ç‹¬ç«‹çš„æœºå™¨æˆ–è€…è™šæ‹Ÿæœºæ²¡æœ‰ä»€ä¹ˆå¤ªå¤§çš„åŒºåˆ«ã€‚</p><p>æœ€åï¼Œæˆ‘ä»¬ä¸€èµ·å­¦ä¹ äº†Namespaceå’ŒCgroupsï¼Œå®ƒä»¬æ˜¯Linuxçš„ä¸¤å¤§æŠ€æœ¯ï¼Œç”¨äºå®ç°å®¹å™¨çš„ç‰¹æ€§ã€‚</p><p>å…·ä½“æ¥è¯´ï¼Œ<strong>Namespaceå¸®åŠ©å®¹å™¨å®ç°å„ç§è®¡ç®—èµ„æºçš„éš”ç¦»ï¼ŒCgroupsä¸»è¦å¯¹å®¹å™¨ä½¿ç”¨æŸç§èµ„æºé‡çš„å¤šå°‘åšä¸€ä¸ªé™åˆ¶ã€‚</strong></p><p>æ‰€ä»¥æˆ‘ä»¬åœ¨è¿™é‡Œå¯ä»¥ç›´æ¥è®°ä½ï¼š<strong>å®¹å™¨å…¶å®å°±æ˜¯Namespace+Cgroupsã€‚</strong></p><h2>æ€è€ƒé¢˜</h2><p>ç”¨Dockerfileä¸ºä½ æœ€ç†Ÿæ‚‰çš„åº”ç”¨ç¨‹åºåšä¸ªé•œåƒï¼Œç„¶åç”¨Dockerå‘½ä»¤å¯åŠ¨è¿™ä¸ªå®¹å™¨ã€‚</p><p>æ¬¢è¿åœ¨ç•™è¨€åŒºåˆ†äº«ä½ çš„ç–‘æƒ‘å’Œè§è§£ã€‚ä½ ä¹Ÿå¯ä»¥æŠŠä»Šå¤©çš„å†…å®¹åˆ†äº«ç»™ä½ çš„æœ‹å‹ï¼Œå’Œä»–ä¸€èµ·å­¦ä¹ å’Œè¿›æ­¥ã€‚</p>","neighbors":{"left":{"article_title":"å¼€ç¯‡è¯ | ä¸€ä¸ªæ€åº¦ä¸¤ä¸ªæ­¥éª¤ï¼Œæˆä¸ºå®¹å™¨å®æˆ˜é«˜æ‰‹","id":308078},"right":{"article_title":"02 | ç†è§£è¿›ç¨‹ï¼ˆ1ï¼‰ï¼šä¸ºä»€ä¹ˆæˆ‘åœ¨å®¹å™¨ä¸­ä¸èƒ½kill 1å·è¿›ç¨‹ï¼Ÿ","id":309423}},"comments":[{"had_liked":false,"id":292533,"user_name":"leslie","can_delete":false,"product_type":"c1","uid":1324255,"ip_address":"","ucode":"798E7C1CC98CC2","user_header":"https://static001.geekbang.org/account/avatar/00/14/34/df/64e3d533.jpg","comment_is_top":true,"comment_ctime":1620873139,"is_pvip":false,"replies":[{"id":"110964","content":"æ„Ÿè°¢ä½ çš„è‚¯å®šã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å¬æ°´çš„æ¹–","uid":"1501385","ctime":1628591575,"ip_address":"","comment_id":292533,"utype":1}],"discussion_count":1,"race_medal":0,"score":"9.2233720771303997e+18","product_id":100063801,"comment_content":"é€å½»ï¼Œä¹‹å‰è¢«äººé—®è¿‡ï¼Œèµ„æ–™æ–¹é¢åŒæ ·æŸ¥è¿‡ï¼Œæ¶æ„åŒæ ·æ˜äº†ï¼Œå¦‚æ­¤é€šä¿—æ˜äº†-éš¾å¾—ã€‚","like_count":9,"discussions":[{"author":{"id":1501385,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e8/c9/59bcd490.jpg","nickname":"å¬æ°´çš„æ¹–","note":"","ucode":"B1759F90165D81","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":519867,"discussion_content":"æ„Ÿè°¢ä½ çš„è‚¯å®šã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628591575,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":4}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":262166,"user_name":"é‚£æ—¶åˆ»","can_delete":false,"product_type":"c1","uid":1150927,"ip_address":"","ucode":"B0D150856C3A4A","user_header":"https://static001.geekbang.org/account/avatar/00/11/8f/cf/890f82d6.jpg","comment_is_top":false,"comment_ctime":1605632669,"is_pvip":false,"replies":[{"id":"95172","content":"@é‚£æ—¶åˆ»ï¼Œ<br><br>è¿™ç§æƒ…å†µï¼Œå¦‚æœA1&#47;A2, B1&#47;B2 éƒ½è¿è¡Œåœ¨è‡ªå·±çš„cgroup limitä¹‹å†…ï¼Œé‚£ä¹ˆéœ€è¦å…ˆä»ä¸¤ä¸ªå®¿ä¸»æœºçš„æ•´ä½“æƒ…å†µå…ˆåšä¸€ä¸ªæ¯”è¾ƒï¼Œä»ç¡¬ä»¶ç±»å‹å¼€å§‹ï¼ŒOSç‰ˆæœ¬ï¼Œ å®¿ä¸»æœºä¸Šçš„å…¶ä»–è´Ÿè½½çš„æƒ…å†µï¼Œå¦‚æœè¿™äº›éƒ½ä¸€æ ·ï¼Œé‚£ä¹ˆå¯ä»¥å¯¹A1&#47;A2, B1&#47;B2åšperfçœ‹çœ‹çƒ­ç‚¹å‡½æ•°ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"CY","uid":"2070138","ctime":1605706185,"ip_address":"","comment_id":262166,"utype":1}],"discussion_count":1,"race_medal":0,"score":"100389880477","product_id":100063801,"comment_content":"æ±‚æ•™è€å¸ˆä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬æœ‰ä¸‰ä¸ªæœåŠ¡A B Céƒ¨ç½²åœ¨K8Sé‡Œï¼Œå®ƒä»¬å„è‡ªè®¾ç½®äº†resouce limit(cpu, memory)ï¼Œå…¶ä¸­æ°å¥½ A1 B1 C1è¢«åˆ†é…åˆ°åŒä¸€ä¸ªnodeä¸Šï¼ŒA2 B2åˆ†é…åˆ°å¦å¤–ä¸€ä¸ªnodeä¸Šã€‚æµé‡ç»è¿‡load balanceä¹‹åæ‰“åˆ° A1 A2å’Œ B1 B2å„è‡ªæ˜¯å‡åŒ€çš„ï¼Œä½†æ˜¯A1 B1ä½¿ç”¨çš„cpu å æ¯”ç›¸å¯¹äº A2 B2è¦é«˜å‡º5% ~ 6%ã€‚æˆ‘è®¤ä¸ºå°½ç®¡dockeré€šè¿‡namespaceå’Œcgroupsæ¥éš”ç¦»å’Œé™åˆ¶ä½¿ç”¨çš„èµ„æºï¼Œä½†æ˜¯å¯¹äºå®¿ä¸»æœºè€Œè¨€ï¼Œå„ä¸ªdockerå®ä¾‹ä¹‹é—´è¿˜æ˜¯å­˜åœ¨ç«äº‰cpuå’Œmemoryçš„ï¼Œä¸çŸ¥è¿™ä¹ˆç†è§£æ˜¯å¦æ­£ç¡®ï¼Ÿ","like_count":23,"discussions":[{"author":{"id":2070138,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/96/7a/8a14d008.jpg","nickname":"CY","note":"","ucode":"4AF98230985918","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":509714,"discussion_content":"@é‚£æ—¶åˆ»ï¼Œ\n\nè¿™ç§æƒ…å†µï¼Œå¦‚æœA1/A2, B1/B2 éƒ½è¿è¡Œåœ¨è‡ªå·±çš„cgroup limitä¹‹å†…ï¼Œé‚£ä¹ˆéœ€è¦å…ˆä»ä¸¤ä¸ªå®¿ä¸»æœºçš„æ•´ä½“æƒ…å†µå…ˆåšä¸€ä¸ªæ¯”è¾ƒï¼Œä»ç¡¬ä»¶ç±»å‹å¼€å§‹ï¼ŒOSç‰ˆæœ¬ï¼Œ å®¿ä¸»æœºä¸Šçš„å…¶ä»–è´Ÿè½½çš„æƒ…å†µï¼Œå¦‚æœè¿™äº›éƒ½ä¸€æ ·ï¼Œé‚£ä¹ˆå¯ä»¥å¯¹A1/A2, B1/B2åšperfçœ‹çœ‹çƒ­ç‚¹å‡½æ•°ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605706185,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":261865,"user_name":"JianXu","can_delete":false,"product_type":"c1","uid":1033219,"ip_address":"","ucode":"2A61BDBB573BDC","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c4/03/f753fda7.jpg","comment_is_top":false,"comment_ctime":1605541001,"is_pvip":false,"replies":[{"id":"95059","content":"containerd å¯åŠ¨å½“å®¹å™¨çš„æ—¶å€™å…ˆä¼šå¯åŠ¨ä¸€ä¸ªshim, ç„¶åç”±shimè¿è¡Œruncå»åˆ›å»ºcontainer. è¿™æ ·ç›¸å½“äºä¸€ä¸ªshimæ¥ç®¡ç†ä¸€ä¸ªcontainer. shimä½œä¸ºcontainerçš„â€œçˆ¶è¿›ç¨‹â€, æ¥ç®¡äº†å®¹å™¨çš„stdin&#47;stdout, containerdæœåŠ¡å‡ºé—®é¢˜ï¼Œä¸ä¼šå½±å“åˆ°ç”¨æˆ·çš„containerã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"CY","uid":"2070138","ctime":1605576206,"ip_address":"","comment_id":261865,"utype":1}],"discussion_count":4,"race_medal":0,"score":"53145148553","product_id":100063801,"comment_content":"è€å¸ˆï¼Œèƒ½å¸®å¿™æ‰«ç›²ä¸€ä¸‹ PID namespace é‚£å¼ å›¾é‡Œ çš„shim å—ï¼Ÿä¸ºä»€ä¹ˆè¦ä½¿ç”¨Shim å‘¢ï¼Ÿ","like_count":12,"discussions":[{"author":{"id":2070138,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/96/7a/8a14d008.jpg","nickname":"CY","note":"","ucode":"4AF98230985918","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":509647,"discussion_content":"containerd å¯åŠ¨å½“å®¹å™¨çš„æ—¶å€™å…ˆä¼šå¯åŠ¨ä¸€ä¸ªshim, ç„¶åç”±shimè¿è¡Œruncå»åˆ›å»ºcontainer. è¿™æ ·ç›¸å½“äºä¸€ä¸ªshimæ¥ç®¡ç†ä¸€ä¸ªcontainer. shimä½œä¸ºcontainerçš„â€œçˆ¶è¿›ç¨‹â€, æ¥ç®¡äº†å®¹å™¨çš„stdin/stdout, containerdæœåŠ¡å‡ºé—®é¢˜ï¼Œä¸ä¼šå½±å“åˆ°ç”¨æˆ·çš„containerã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605576206,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1070043,"avatar":"https://static001.geekbang.org/account/avatar/00/10/53/db/858337e3.jpg","nickname":"Ethan Liu","note":"","ucode":"231F944F7CD56A","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":327603,"discussion_content":"æˆ‘çš„ç†è§£æ˜¯çˆ¶è¿›ç¨‹æŒ‚äº†ï¼Œå­è¿›ç¨‹ä¹Ÿå¯ä»¥ç»§ç»­è¿è¡Œï¼Œå­¤å„¿è¿›ç¨‹ä¸å°±æ˜¯è¿™æ ·å—ï¼Œéƒ½äº¤ç»™initè¿›ç¨‹æ¥ç®¡ç†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605871527,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1809160,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9b/08/27ac7ecd.jpg","nickname":"æ°´è’¸è›‹","note":"","ucode":"6F7F853A4BF901","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":326326,"discussion_content":"è€å¸ˆç”±containerdå¯åŠ¨shimï¼Œé‚£ä¹ˆcontainerdä¸æ˜¯shiméƒ½çˆ¶è¿›ç¨‹å—ï¼Œä¸ºä»€ä¹ˆcontainerdæŒ‚äº†ä¸ä¼šå½±å“shimï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605579136,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1580926,"avatar":"","nickname":"ch_ort","note":"","ucode":"B79746E687F29E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1809160,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9b/08/27ac7ecd.jpg","nickname":"æ°´è’¸è›‹","note":"","ucode":"6F7F853A4BF901","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":546501,"discussion_content":"éƒ½æ˜¯ä¸åŒçš„shimè¿›ç¨‹å•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642324007,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":326326,"ip_address":""},"score":546501,"extra":""}]}]},{"had_liked":false,"id":269209,"user_name":"Richur","can_delete":false,"product_type":"c1","uid":2120008,"ip_address":"","ucode":"C9D630559A4E73","user_header":"https://static001.geekbang.org/account/avatar/00/20/59/48/f544983b.jpg","comment_is_top":false,"comment_ctime":1608557393,"is_pvip":false,"replies":[{"id":"97712","content":"containerdä¼šå…ˆå‘å®¹å™¨ä¸­çš„initè¿›ç¨‹å‘é€SIGTERMï¼Œå¦‚æœinitè¿›ç¨‹æ³¨å†Œäº†SIGTERM handler(å¹¶ä¸”handlerè®©è¿›ç¨‹é€€å‡ºäº†ï¼‰é‚£ä¹ˆæ•´ä¸ªå®¹å™¨å°±é€€å‡ºäº†ï¼Œå¦‚æœå®¹å™¨çš„initè¿›ç¨‹æ²¡æœ‰æ³¨å†ŒSIGTERM, é‚£ä¹ˆè¿‡30ç§’ï¼Œ containerdå†å‘å®¹å™¨çš„initè¿›ç¨‹å‘é€SIGKILL.","user_name":"ä½œè€…å›å¤","user_name_real":"CY","uid":"2070138","ctime":1608650964,"ip_address":"","comment_id":269209,"utype":1}],"discussion_count":3,"race_medal":0,"score":"40263263057","product_id":100063801,"comment_content":"è€å¸ˆå¥½ï¼Œæ±‚æ•™ä¸€ä¸ªé—®é¢˜ï¼Œdocker stop containerIdï¼Œå®¹å™¨ä¸­çš„è¿›ç¨‹æ˜¯å¦‚ä½•é€€å‡ºçš„ï¼Œæ˜¯kill pidï¼Œkill -15 pid è¿˜æ˜¯kill -9 pid äº¦æˆ–æ˜¯å…¶ä»–ï¼Ÿ","like_count":9,"discussions":[{"author":{"id":2070138,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/96/7a/8a14d008.jpg","nickname":"CY","note":"","ucode":"4AF98230985918","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":512192,"discussion_content":"containerdä¼šå…ˆå‘å®¹å™¨ä¸­çš„initè¿›ç¨‹å‘é€SIGTERMï¼Œå¦‚æœinitè¿›ç¨‹æ³¨å†Œäº†SIGTERM handler(å¹¶ä¸”handlerè®©è¿›ç¨‹é€€å‡ºäº†ï¼‰é‚£ä¹ˆæ•´ä¸ªå®¹å™¨å°±é€€å‡ºäº†ï¼Œå¦‚æœå®¹å™¨çš„initè¿›ç¨‹æ²¡æœ‰æ³¨å†ŒSIGTERM, é‚£ä¹ˆè¿‡30ç§’ï¼Œ containerdå†å‘å®¹å™¨çš„initè¿›ç¨‹å‘é€SIGKILL.","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1608650964,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1580926,"avatar":"","nickname":"ch_ort","note":"","ucode":"B79746E687F29E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":574226,"discussion_content":"1 å·è¿›ç¨‹æ°¸è¿œä¸ä¼šå“åº” SIGKILLï¼ˆkill -9ï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1653915088,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1286588,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a1/bc/ef0f26fa.jpg","nickname":"é¦–å¯Œæ‰‹è®°","note":"","ucode":"879DED4078303C","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":384639,"discussion_content":"é»˜è®¤çš„ä¸æ˜¯10s å—ï¼Ÿ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626685323,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":267530,"user_name":"MYG","can_delete":false,"product_type":"c1","uid":1670483,"ip_address":"","ucode":"B8EF7BA8F22ABB","user_header":"https://static001.geekbang.org/account/avatar/00/19/7d/53/7a0399a4.jpg","comment_is_top":false,"comment_ctime":1607789213,"is_pvip":false,"replies":[{"id":"97317","content":"@MYG, ä½ çš„ç³»ç»Ÿä¸Šåº”è¯¥è¿˜æ˜¯Cgroup V1.<br>è¯•è¯•è¿™æ ·æ‰¾ä¸€ä¸‹ï¼š<br># docker inspect 4d3cf63512a2 | grep \\&quot;Pid\\&quot;<br>            &quot;Pid&quot;: 4384,<br># cat &#47;proc&#47;4384&#47;cgroup | grep memory<br>5:memory:&#47;system.slice&#47;docker-4d3cf63512a2b89c0982724a6c12cb9b69781676aa93ab4fb2060f47908c6b94.scope","user_name":"ä½œè€…å›å¤","user_name_real":"CY","uid":"2070138","ctime":1608040216,"ip_address":"","comment_id":267530,"utype":1}],"discussion_count":2,"race_medal":0,"score":"35967527581","product_id":100063801,"comment_content":"æˆ‘åœ¨macOSä¸‹ç”¨multipasså¯åŠ¨Ubuntu 20.04çš„VMï¼Œè²Œä¼¼å·²ç»å‡çº§åˆ°äº†containerd-shim-runc-v2ï¼ŒåŒæ—¶åœ¨&#47;sys&#47;fs&#47;cgroup&#47;memory&#47;system.sliceä¸‹ä¹Ÿæ‰¾ä¸åˆ°æ¯ä¸ªcontainerçš„å­ç›®å½•äº†ï¼Œè¯·é—®åœ¨å“ªé‡Œèƒ½æ‰¾åˆ°å‘¢ï¼Ÿè¿˜æ˜¯v2çš„è®¾è®¡å®Œå…¨ä¸ä¸€æ ·äº†ï¼Ÿè°¢è°¢ğŸ™","like_count":8,"discussions":[{"author":{"id":2070138,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/96/7a/8a14d008.jpg","nickname":"CY","note":"","ucode":"4AF98230985918","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":511671,"discussion_content":"@MYG, ä½ çš„ç³»ç»Ÿä¸Šåº”è¯¥è¿˜æ˜¯Cgroup V1.\nè¯•è¯•è¿™æ ·æ‰¾ä¸€ä¸‹ï¼š\n# docker inspect 4d3cf63512a2 | grep \\&amp;quot;Pid\\&amp;quot;\n            &amp;quot;Pid&amp;quot;: 4384,\n# cat /proc/4384/cgroup | grep memory\n5:memory:/system.slice/docker-4d3cf63512a2b89c0982724a6c12cb9b69781676aa93ab4fb2060f47908c6b94.scope","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608040216,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1202465,"avatar":"https://static001.geekbang.org/account/avatar/00/12/59/21/d2efde18.jpg","nickname":"å¸ƒå‡¡","note":"","ucode":"346FCD332F8BFA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579827,"discussion_content":"è¯·é—®è€å¸ˆï¼ŒGgroup V2æ˜¯/docker/{id} è¿™æ ·æ ¼å¼å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657704220,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":261789,"user_name":"heihei","can_delete":false,"product_type":"c1","uid":1914146,"ip_address":"","ucode":"1AD89888AA36C4","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/L2iccnuficX53DnwPoeVAVkYa8Tb7zuXOweYR9aERiamV1aTT7ANPA6GWdPM4wic7p2b8FdYy8j1GEvypMvOwM5w6w/132","comment_is_top":false,"comment_ctime":1605524577,"is_pvip":true,"discussion_count":2,"race_medal":0,"score":"31670295649","product_id":100063801,"comment_content":"ç¬¬ä¸€èŠ‚å°±22åˆ†é’Ÿï¼Œæˆ‘å‚»äº†ï¼Œè€å¸ˆä¹Ÿå¤ªå®åœ¨äº†ğŸ˜‚","like_count":7,"discussions":[{"author":{"id":2326747,"avatar":"https://static001.geekbang.org/account/avatar/00/23/80/db/2e5e27e6.jpg","nickname":"Michael Dong Â²â°Â¹â¸","note":"","ucode":"B3EB15FB6D9366","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":327271,"discussion_content":"FROM centos:8.1.1911 , æˆ‘çš„ç³»ç»Ÿæ˜¯Redhat 7.6è¿™é‡Œåº”è¯¥å¦‚ä½•å†™ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605779310,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2061524,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/74/d4/38d813f0.jpg","nickname":"Kerry","note":"","ucode":"92F809EC998FC6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2326747,"avatar":"https://static001.geekbang.org/account/avatar/00/23/80/db/2e5e27e6.jpg","nickname":"Michael Dong Â²â°Â¹â¸","note":"","ucode":"B3EB15FB6D9366","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":390086,"discussion_content":"è·Ÿä½ å®¿ä¸»æœºæ˜¯ä»€ä¹ˆç‰ˆæœ¬æ²¡æœ‰å…³ç³»ï¼Œè¿™æ¡è¯­å¥æ˜¯æŒ‡å®šé•œåƒçš„ç³»ç»Ÿç‰ˆæœ¬ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629645671,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":327271,"ip_address":""},"score":390086,"extra":""}]}]},{"had_liked":false,"id":261831,"user_name":"ä¸Šé‚ªå¿˜å·","can_delete":false,"product_type":"c1","uid":1276588,"ip_address":"","ucode":"1C4459917B038D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIz9dKN1C8rKQoaVtmEGdzObhlia6zAfTsPYOm4ibz39VjTbu7Aia1LyeedHR26b6nxUtcCufpichcYgw/132","comment_is_top":false,"comment_ctime":1605533406,"is_pvip":false,"replies":[{"id":"95068","content":"@ä¸Šé‚ªå¿˜å·,<br>è¯·é—®ä¸€ä¸‹, ä½ æ˜¯å¦æ˜¯é€šè¿‡systemdæ¥å¯åŠ¨dockerdçš„ï¼Ÿ<br><br>å®¹å™¨åœ¨cgroupä¸‹çš„ç›®å½•æ ‘ç»“æ„ä¼šå—å®¹å™¨ç®¡ç†å¹³å°çš„å½±å“ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"CY","uid":"2070138","ctime":1605586198,"ip_address":"","comment_id":261831,"utype":1}],"discussion_count":5,"race_medal":0,"score":"27375337182","product_id":100063801,"comment_content":"centos7.4æµ‹è¯•ï¼Œdockeråœ¨cgroupä¸‹çš„ç›®å½•ä¸º&#47;sys&#47;fs&#47;cgroup&#47;memory&#47;docker&#47;40152218ccc9d2bcda0e146efdfed871a78480712cb9675404af800c2e812ea9&#47;","like_count":6,"discussions":[{"author":{"id":2070138,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/96/7a/8a14d008.jpg","nickname":"CY","note":"","ucode":"4AF98230985918","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":509626,"discussion_content":"@ä¸Šé‚ªå¿˜å·,\nè¯·é—®ä¸€ä¸‹, ä½ æ˜¯å¦æ˜¯é€šè¿‡systemdæ¥å¯åŠ¨dockerdçš„ï¼Ÿ\n\nå®¹å™¨åœ¨cgroupä¸‹çš„ç›®å½•æ ‘ç»“æ„ä¼šå—å®¹å™¨ç®¡ç†å¹³å°çš„å½±å“ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605586198,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1044517,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f0/25/d3da7ca9.jpg","nickname":"wuyang","note":"","ucode":"81000322FF96A7","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":403495,"discussion_content":"å¯ä»¥çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634090658,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2324099,"avatar":"https://static001.geekbang.org/account/avatar/00/23/76/83/5f9959c2.jpg","nickname":"é˜¿ç’","note":"","ucode":"DF296A70D9A017","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":326692,"discussion_content":"docker æ˜¯ ç”¨sytemdå¯åŠ¨çš„ï¼Œç›®å½•ä¹Ÿæ˜¯ cgroup/memory/docker ä¸‹é¢ ï¼Œç³»ç»Ÿcentos7.6 å†…æ ¸ 5.1.12-1.el7 ï¼Œdockerçš„ç¨‹åºç”¨ composefile å¯åŠ¨çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605663673,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1276588,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIz9dKN1C8rKQoaVtmEGdzObhlia6zAfTsPYOm4ibz39VjTbu7Aia1LyeedHR26b6nxUtcCufpichcYgw/132","nickname":"ä¸Šé‚ªå¿˜å·","note":"","ucode":"1C4459917B038D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":326442,"discussion_content":"æ˜¯çš„ï¼Œäº†è§£äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605595636,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1012816,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/74/50/59d429c9.jpg","nickname":"MiracleWong","note":"","ucode":"05233774710AFE","race_medal":1,"user_type":1,"is_pvip":true},"reply_author":{"id":1276588,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIz9dKN1C8rKQoaVtmEGdzObhlia6zAfTsPYOm4ibz39VjTbu7Aia1LyeedHR26b6nxUtcCufpichcYgw/132","nickname":"ä¸Šé‚ªå¿˜å·","note":"","ucode":"1C4459917B038D","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":372300,"discussion_content":"æ„Ÿè°¢ï¼ŒåŒä¸ºCentOS 7.4 æ ¹æ®ä½ çš„æç¤ºæˆåŠŸæ‰¾åˆ°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620279708,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":326442,"ip_address":""},"score":372300,"extra":""}]}]},{"had_liked":false,"id":261867,"user_name":"æœ±é›¯","can_delete":false,"product_type":"c1","uid":1035744,"ip_address":"","ucode":"064C45FBF6B51F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/cd/e0/c85bb948.jpg","comment_is_top":false,"comment_ctime":1605542553,"is_pvip":true,"replies":[{"id":"95070","content":"1. æŠŠå®¹å™¨å½“æˆè™šæ‹Ÿæœºä½¿ç”¨ï¼Œå¯ä»¥æ˜¯å®¹å™¨åŒ–è¿‡ç¨‹ä¸­çš„ä¸€ä¸ªè¿‡æ¸¡æ–¹æ¡ˆï¼Œä½†æ˜¯é•¿æœŸçš„æ–¹å‘æ˜¯nativeçš„æ–¹å¼æ¥ä½¿ç”¨å®¹å™¨ã€‚<br>2. æˆ‘ä¸æ¸…æ¥šä½ å…·ä½“ä¿®æ”¹çš„æ˜¯å“ªä¸ªkernelå‚æ•°ï¼Œä¸è¿‡å¯¹äºèµ„æºçš„é™åˆ¶æ¯”å¦‚cgroup, æˆ–è€…xfs quota, è¿™äº›éƒ½æ˜¯Linux å†…æ ¸ä¸­çš„ç‰¹æ€§ï¼Œæ‰€ä»¥æœ‰æ—¶å€™å°±éœ€è¦åœ¨grubä¸­å¯¹å†…æ ¸çš„å¯åŠ¨å‚æ•°åšä¿®æ”¹ã€‚<br>3. è¿™ä¸ªæ²¡æœ‰ä»€ä¹ˆé—®é¢˜ã€‚<br>4. è¿™ä¸ªå°±éœ€è¦ç”¨cgroupåšé™åˆ¶äº†ï¼Œ æˆ‘åœ¨åé¢çš„è¯¾ç¨‹é‡Œæœ‰å¾ˆå¤šè¿™æ–¹é¢çš„ä»‹ç»ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"CY","uid":"2070138","ctime":1605586838,"ip_address":"","comment_id":261867,"utype":1}],"discussion_count":3,"race_medal":0,"score":"23080379033","product_id":100063801,"comment_content":"è€å¸ˆå¥½ 1.æˆ‘ä»¬ç°åœ¨å¯¹dockerå®¹å™¨çš„ä½¿ç”¨å°±å¦‚åŒè™šæ‹Ÿæœºä¸€æ · ä¸€ä¸ªå®¹å™¨è¿è¡Œå¤šä¸ªè¿›ç¨‹ ä½†æ˜¯æˆ‘å¬è¯´dockeræ˜¯å¤©ç”Ÿæ˜¯å•è¿›ç¨‹çš„ æ˜¯å¦éœ€è¦æ”¹é€   2.ä¹‹å‰åœ¨æŸæ¬¡åˆ›å»ºdockerå®¹å™¨æ—¶ è¦è®¾ç½®èµ„æºæ§åˆ¶å¥½åƒå¿…é¡»ä¿®æ”¹grubçš„æŸä¸ªé…ç½® ä¸é…ç½®å°±çœŸçš„æ— æ³•é™åˆ¶ è¿™æ˜¯å•¥åŸç† 3. å®¹å™¨ä½¿ç”¨è¿‡ç¨‹ä¸­ å…¶å®æˆ‘å¤§å¤šæ•°æ—¶å€™çš„äº¤äº’æ–¹å¼æ˜¯-it binbashçš„æ–¹å¼ å½“æˆè™šæ‹Ÿæœºæ¥ç”¨ è¿™æ ·æ˜¯å¦æœ‰é—®é¢˜ 4. æˆ‘ä»¬ç°åœ¨çš„ç¯å¢ƒ å…¶å®å¹¶æ²¡æœ‰åšè¿‡å¤šé™åˆ¶ å®¹å™¨ä¹‹é—´ç›¸äº’å¹²æ‰°å’Œå½±å“ è¦è®¾ç½®é™åˆ¶ ç„¶åå¹³æ»‘çš„è®¾ç½®é™åˆ¶æœ‰æ²¡æœ‰å¥½çš„æ–¹æ³• ","like_count":5,"discussions":[{"author":{"id":2070138,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/96/7a/8a14d008.jpg","nickname":"CY","note":"","ucode":"4AF98230985918","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":509648,"discussion_content":"1. æŠŠå®¹å™¨å½“æˆè™šæ‹Ÿæœºä½¿ç”¨ï¼Œå¯ä»¥æ˜¯å®¹å™¨åŒ–è¿‡ç¨‹ä¸­çš„ä¸€ä¸ªè¿‡æ¸¡æ–¹æ¡ˆï¼Œä½†æ˜¯é•¿æœŸçš„æ–¹å‘æ˜¯nativeçš„æ–¹å¼æ¥ä½¿ç”¨å®¹å™¨ã€‚\n2. æˆ‘ä¸æ¸…æ¥šä½ å…·ä½“ä¿®æ”¹çš„æ˜¯å“ªä¸ªkernelå‚æ•°ï¼Œä¸è¿‡å¯¹äºèµ„æºçš„é™åˆ¶æ¯”å¦‚cgroup, æˆ–è€…xfs quota, è¿™äº›éƒ½æ˜¯Linux å†…æ ¸ä¸­çš„ç‰¹æ€§ï¼Œæ‰€ä»¥æœ‰æ—¶å€™å°±éœ€è¦åœ¨grubä¸­å¯¹å†…æ ¸çš„å¯åŠ¨å‚æ•°åšä¿®æ”¹ã€‚\n3. è¿™ä¸ªæ²¡æœ‰ä»€ä¹ˆé—®é¢˜ã€‚\n4. è¿™ä¸ªå°±éœ€è¦ç”¨cgroupåšé™åˆ¶äº†ï¼Œ æˆ‘åœ¨åé¢çš„è¯¾ç¨‹é‡Œæœ‰å¾ˆå¤šè¿™æ–¹é¢çš„ä»‹ç»ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605586838,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1615156,"avatar":"https://static001.geekbang.org/account/avatar/00/18/a5/34/6e3e962f.jpg","nickname":"yayiyaya","note":"","ucode":"38532C740FA186","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":326347,"discussion_content":"éœ€è¦æ”¹é€ ã€‚ å®¹å™¨æ˜¯ä¸€ä¸ªâ€œå•è¿›ç¨‹â€æ¨¡å‹ï¼Œå°±æ˜¯å¸Œæœ›å®¹å™¨å’Œåº”ç”¨èƒ½å¤ŸåŒç”Ÿå‘½å‘¨æœŸï¼Œå°±æ˜¯ä¸ºäº†é˜²æ­¢å®¹å™¨æ˜¯æ­£å¸¸è¿è¡Œçš„ï¼Œä½†æ˜¯é‡Œé¢çš„åº”ç”¨æ—©å·²ç»æŒ‚äº†ã€‚  \næˆ‘è§‰å¾—å¯¹å®¹å™¨çš„ä½¿ç”¨è¿˜æ˜¯è¦é€šè¿‡å®¹å™¨ç¼–æ’å»åšï¼Œå¦‚kubernetesã€‚","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1605582464,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1006609,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5c/11/7198f98e.jpg","nickname":"é¾™å ‚ä¿®ç½—","note":"","ucode":"0F51D4A20C3D71","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":327427,"discussion_content":"æŠŠå®¹å™¨å½“æˆè™šæ‹Ÿæœºä½¿ç”¨ï¼Œå¯ä»¥æ˜¯å®¹å™¨åŒ–è¿‡ç¨‹ä¸­çš„ä¸€ä¸ªè¿‡æ¸¡æ–¹æ¡ˆï¼Œä½†æ˜¯é•¿æœŸçš„æ–¹å‘æ˜¯nativeçš„æ–¹å¼æ¥ä½¿ç”¨å®¹å™¨\n\nè¿™æ˜¯ä¸ºå•¥å‘¢ï¼Ÿï¼Ÿï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605836049,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":268554,"user_name":"Action","can_delete":false,"product_type":"c1","uid":1239234,"ip_address":"","ucode":"FFFD1537C6BB3C","user_header":"https://static001.geekbang.org/account/avatar/00/12/e8/c2/77a413a7.jpg","comment_is_top":false,"comment_ctime":1608256074,"is_pvip":false,"replies":[{"id":"97560","content":"containerdæ˜¯å®¿ä¸»æœºä¸Šçš„ä¸€ä¸ªå®ˆæŠ¤è¿›ç¨‹ï¼Œç”¨æ¥å»ºç«‹å®¹å™¨ã€‚æ¯å»ºç«‹ä¸€ä¸ªå®¹å™¨ï¼Œå°±ä¼šæœ‰ä¸€ä¸ªshimè¿›ç¨‹ï¼Œå®ƒæ˜¯å®¹å™¨ä¸­initè¿›ç¨‹çš„çˆ¶è¿›ç¨‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"CY","uid":"2070138","ctime":1608474431,"ip_address":"","comment_id":268554,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18788125258","product_id":100063801,"comment_content":"&quot;Host PID Namespaceï¼Œå®ƒæ˜¯å…¶ä»– Namespace çš„çˆ¶äº² Namespace&quot; å…¶ä¸­æˆ‘çœ‹å›¾ä¸­æœ‰containerdçš„pid å’Œshimçš„pidåˆ†åˆ«ä»£è¡¨ä»€ä¹ˆå‘€ï¼Ÿè¿™äº›æ˜¯æ€ä¹ˆå…³è”èµ·æ¥çš„å‘¢ï¼Ÿ","like_count":4,"discussions":[{"author":{"id":2070138,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/96/7a/8a14d008.jpg","nickname":"CY","note":"","ucode":"4AF98230985918","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":511968,"discussion_content":"containerdæ˜¯å®¿ä¸»æœºä¸Šçš„ä¸€ä¸ªå®ˆæŠ¤è¿›ç¨‹ï¼Œç”¨æ¥å»ºç«‹å®¹å™¨ã€‚æ¯å»ºç«‹ä¸€ä¸ªå®¹å™¨ï¼Œå°±ä¼šæœ‰ä¸€ä¸ªshimè¿›ç¨‹ï¼Œå®ƒæ˜¯å®¹å™¨ä¸­initè¿›ç¨‹çš„çˆ¶è¿›ç¨‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608474431,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":262882,"user_name":"conanforever22","can_delete":false,"product_type":"c1","uid":1285725,"ip_address":"","ucode":"CB283E020DA51A","user_header":"https://static001.geekbang.org/account/avatar/00/13/9e/5d/b02bce4c.jpg","comment_is_top":false,"comment_ctime":1605868188,"is_pvip":false,"replies":[{"id":"95366","content":"docker base image, æ‹¿centosä¸ºä¾‹å­ï¼Œå¯ä»¥å»ºä¸€ä¸ªç›®å½•ï¼Œè®©åæŠŠéœ€è¦çš„rpm å®‰è£…åœ¨è¿™ä¸ªç›®å½•ä¸‹é¢ï¼Œç„¶åæŠŠç›®å½•æ‰“æˆä¸€ä¸ªtarball, ç”¨docker importæˆä¸ºä¸€ä¸ªbase image.<br><br><br>https:&#47;&#47;github.com&#47;moby&#47;moby&#47;blob&#47;master&#47;contrib&#47;mkimage-yum.sh","user_name":"ä½œè€…å›å¤","user_name_real":"CY","uid":"2070138","ctime":1605876671,"ip_address":"","comment_id":262882,"utype":1}],"discussion_count":2,"race_medal":0,"score":"18785737372","product_id":100063801,"comment_content":"æœ‰ä¸ªç–‘é—®, dockerfileä¸­FROMåè¾¹çš„åŸºç¡€é•œåƒåº”è¯¥æ€ä¹ˆåšï¼Ÿ","like_count":4,"discussions":[{"author":{"id":2070138,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/96/7a/8a14d008.jpg","nickname":"CY","note":"","ucode":"4AF98230985918","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":510016,"discussion_content":"docker base image, æ‹¿centosä¸ºä¾‹å­ï¼Œå¯ä»¥å»ºä¸€ä¸ªç›®å½•ï¼Œè®©åæŠŠéœ€è¦çš„rpm å®‰è£…åœ¨è¿™ä¸ªç›®å½•ä¸‹é¢ï¼Œç„¶åæŠŠç›®å½•æ‰“æˆä¸€ä¸ªtarball, ç”¨docker importæˆä¸ºä¸€ä¸ªbase image.\n\n\nhttps://github.com/moby/moby/blob/master/contrib/mkimage-yum.sh","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605876671,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1285725,"avatar":"https://static001.geekbang.org/account/avatar/00/13/9e/5d/b02bce4c.jpg","nickname":"conanforever22","note":"","ucode":"CB283E020DA51A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":327807,"discussion_content":"æ„Ÿè°¢æè€å¸ˆè§£ç­”è¿™ä¸ªé•¿ä¹…ä»¥æ¥çš„ç–‘é—®, è¿™ä¸ªbase imageåŸæ¥ä¹Ÿæ˜¯è¿™ä¹ˆæœ´ç´ çš„æ–¹å¼åšå‡ºæ¥çš„, ä¹‹å‰è¿˜æœ‰ä¸€ç§é¸¡ç”Ÿè›‹å’Œè›‹ç”Ÿæœºçš„å›°æƒ‘, åŸæ¥å¹¶ä¸æ˜¯åªæœ‰dockerfileä¸€ç§åšé•œåƒçš„æ–¹å¼, é•œåƒçš„æœ¬è´¨è¿˜æ˜¯æ–‡ä»¶","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1605957084,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":261822,"user_name":"JianXu","can_delete":false,"product_type":"c1","uid":1033219,"ip_address":"","ucode":"2A61BDBB573BDC","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c4/03/f753fda7.jpg","comment_is_top":false,"comment_ctime":1605531927,"is_pvip":false,"replies":[{"id":"95033","content":"<br>&gt; è€å¸ˆèƒ½å±•å¼€ä»‹ç»ä¸€ä¸‹ä¸ºä»€ä¹ˆ memory cgroup å’Œ blkio cgroup ä¸èƒ½åä½œçš„é—®é¢˜å—ï¼Ÿä¸ºä»€ä¹ˆcgroup v2 å°±å¯ä»¥äº†å‘¢ï¼Ÿ<br><br>è¿™ä¸€éƒ¨åˆ†æˆ‘åœ¨ç¬¬13è®²&quot;å®¹å™¨ç£ç›˜é™é€Ÿé‡Œ&quot; ä¼šè¯¦ç»†çš„è§£é‡Šã€‚<br><br>cgroup v1 blkio å¯ä»¥å¯¹ Direct I&#47;Oåšé™æµã€‚<br>cgroup v1 net_cls é…åˆ tc å¯ä»¥å¯¹ç½‘ç»œé™æµã€‚<br><br>cgroup v2 io + memory ä¸€èµ·å¯ä»¥å¯¹ Direct I&#47;O å’Œ Buffered I&#47;Oåšé™æµï¼Œä½†æ˜¯ä¸æ”¯æŒxfs<br>","user_name":"ä½œè€…å›å¤","user_name_real":"CY","uid":"2070138","ctime":1605539804,"ip_address":"","comment_id":261822,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18785401111","product_id":100063801,"comment_content":"â€ä¼šå¯¼è‡´å¯¹åŒä¸€è¿›ç¨‹çš„èµ„æºåè°ƒæ¯”è¾ƒå›°éš¾ï¼Œæ¯”å¦‚ memory Cgroup ä¸ blkio Cgroup ä¹‹é—´å°±ä¸èƒ½åä½œâ€œ --&gt; CY è€å¸ˆèƒ½å±•å¼€ä»‹ç»ä¸€ä¸‹ä¸ºä»€ä¹ˆ memory cgroup å’Œ blkio cgroup ä¸èƒ½åä½œçš„é—®é¢˜å—ï¼Ÿä¸ºä»€ä¹ˆcgroup v2 å°±å¯ä»¥äº†å‘¢ï¼Ÿ<br><br>å¦å¤–ï¼Œcgroup v1 å¯ä»¥ç®¡ç†disk IO å’Œ network IO å—ï¼Ÿé‚£ cgroup v2 å‘¢","like_count":4,"discussions":[{"author":{"id":2070138,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/96/7a/8a14d008.jpg","nickname":"CY","note":"","ucode":"4AF98230985918","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":509621,"discussion_content":"\n&amp;gt; è€å¸ˆèƒ½å±•å¼€ä»‹ç»ä¸€ä¸‹ä¸ºä»€ä¹ˆ memory cgroup å’Œ blkio cgroup ä¸èƒ½åä½œçš„é—®é¢˜å—ï¼Ÿä¸ºä»€ä¹ˆcgroup v2 å°±å¯ä»¥äº†å‘¢ï¼Ÿ\n\nè¿™ä¸€éƒ¨åˆ†æˆ‘åœ¨ç¬¬13è®²&amp;quot;å®¹å™¨ç£ç›˜é™é€Ÿé‡Œ&amp;quot; ä¼šè¯¦ç»†çš„è§£é‡Šã€‚\n\ncgroup v1 blkio å¯ä»¥å¯¹ Direct I/Oåšé™æµã€‚\ncgroup v1 net_cls é…åˆ tc å¯ä»¥å¯¹ç½‘ç»œé™æµã€‚\n\ncgroup v2 io + memory ä¸€èµ·å¯ä»¥å¯¹ Direct I/O å’Œ Buffered I/Oåšé™æµï¼Œä½†æ˜¯ä¸æ”¯æŒxfs\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605539804,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":278457,"user_name":"å¸ƒå‡¡","can_delete":false,"product_type":"c1","uid":1202465,"ip_address":"","ucode":"346FCD332F8BFA","user_header":"https://static001.geekbang.org/account/avatar/00/12/59/21/d2efde18.jpg","comment_is_top":false,"comment_ctime":1612949758,"is_pvip":false,"replies":[{"id":"101349","content":"@å¸ƒå‡¡ï¼Œ èµï¼ æ“ä½œå¾ˆé‡è¦ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"CY","uid":"2070138","ctime":1613402524,"ip_address":"","comment_id":278457,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14497851646","product_id":100063801,"comment_content":"å“‡ï¼Œè€å¸ˆçš„è¯¾ç¨‹çœŸçš„æ˜¯å¹²è´§æ»¡æ»¡ï¼Œè¿™æ ·ä¸€èŠ‚è¯¾è®©Linuxæ–°æ‰‹çš„æˆ‘æ•´æ•´æ“ä½œäº†ä¸€ä¸‹åˆï¼Œé¡ºä¾¿åˆå±æ€§äº†ä¸‹Linuxä¸‹å‘½ä»¤çš„å„åšæ“ä½œï¼Œç»™è€å¸ˆç‚¹èµï¼Œä¹Ÿç»™è‡ªå·±åŠ æ²¹o(*ï¿£â–½ï¿£*)ãƒ–ï¼","like_count":3,"discussions":[{"author":{"id":2070138,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/96/7a/8a14d008.jpg","nickname":"CY","note":"","ucode":"4AF98230985918","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":515387,"discussion_content":"@å¸ƒå‡¡ï¼Œ èµï¼ æ“ä½œå¾ˆé‡è¦ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1613402524,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":262262,"user_name":"æµ·ç›—èˆ¹é•¿","can_delete":false,"product_type":"c1","uid":1363634,"ip_address":"","ucode":"ECB28BA21A4113","user_header":"https://static001.geekbang.org/account/avatar/00/14/ce/b2/1f914527.jpg","comment_is_top":false,"comment_ctime":1605680461,"is_pvip":false,"replies":[{"id":"95177","content":"@æ€ç»´ï¼Œè¯·çœ‹ä¸€ä¸‹ä½ çš„å†…æ ¸ç‰ˆæœ¬å·ã€‚æ¯”å¦‚time namespaceæ˜¯Linux kernel 5.6ä¹‹åæ‰æœ‰çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"CY","uid":"2070138","ctime":1605707375,"ip_address":"","comment_id":262262,"utype":1}],"discussion_count":2,"race_medal":0,"score":"14490582349","product_id":100063801,"comment_content":"è¯·æ•™è€å¸ˆä¸€ä¸ªé—®é¢˜ï¼Œæ‰§è¡Œ ls -l &#47;proc&#47;self&#47;nsï¼Œæˆ‘ä»¬çš„æœåŠ¡å™¨ä¸Šåªæ”¯æŒ6ç§namespaceï¼šipcï¼Œmntï¼Œnetï¼Œpidï¼Œuserï¼Œutsã€‚è¯·é—®è¿™æ˜¯æ€ä¹ˆå›äº‹ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":2070138,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/96/7a/8a14d008.jpg","nickname":"CY","note":"","ucode":"4AF98230985918","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":509757,"discussion_content":"@æ€ç»´ï¼Œè¯·çœ‹ä¸€ä¸‹ä½ çš„å†…æ ¸ç‰ˆæœ¬å·ã€‚æ¯”å¦‚time namespaceæ˜¯Linux kernel 5.6ä¹‹åæ‰æœ‰çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605707375,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1363634,"avatar":"https://static001.geekbang.org/account/avatar/00/14/ce/b2/1f914527.jpg","nickname":"æµ·ç›—èˆ¹é•¿","note":"","ucode":"ECB28BA21A4113","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":330949,"discussion_content":"è°¢è°¢è€å¸ˆçš„å›å¤ã€‚å†…æ ¸å‡çº§åˆ°5.9ä¹‹åï¼Œnamespaceå˜æˆäº†10ç§ï¼šipcï¼Œmntï¼Œnetï¼Œpidï¼Œuserï¼Œutsï¼Œpid_for_children, time, time_for_children, cgroup","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606738919,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":261956,"user_name":"Marionxue","can_delete":false,"product_type":"c1","uid":1367781,"ip_address":"","ucode":"72FBDC3B324BF5","user_header":"https://static001.geekbang.org/account/avatar/00/14/de/e5/701d67ca.jpg","comment_is_top":false,"comment_ctime":1605589357,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14490491245","product_id":100063801,"comment_content":"ä½¿ç”¨äº†è¿™ä¹ˆå¤šå¹´çš„Docker, å†å›å¤´çœ‹è¿˜æ˜¯å—ç›ŠåŒªæµ…ã€‚","like_count":3},{"had_liked":false,"id":261863,"user_name":"JianXu","can_delete":false,"product_type":"c1","uid":1033219,"ip_address":"","ucode":"2A61BDBB573BDC","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c4/03/f753fda7.jpg","comment_is_top":false,"comment_ctime":1605540935,"is_pvip":false,"replies":[{"id":"95060","content":"è¿™ä¸ªæ˜¯å®¿ä¸»æœºä¸ŠLinux bridge interface docker0ä¸Šçš„IP, å’Œå®¹å™¨é‡Œçš„IPåœ¨åŒä¸€ä¸ªç½‘æ®µï¼Œç”¨æ¥å®¿ä¸»æœºå’Œå®¹å™¨è¿›è¡Œç½‘ç»œé€šè®¯","user_name":"ä½œè€…å›å¤","user_name_real":"CY","uid":"2070138","ctime":1605576988,"ip_address":"","comment_id":261863,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14490442823","product_id":100063801,"comment_content":"é‚£å¼ ç½‘ç»œå›¾é‡Œ 172.17.0.21 æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":2070138,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/96/7a/8a14d008.jpg","nickname":"CY","note":"","ucode":"4AF98230985918","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":509645,"discussion_content":"è¿™ä¸ªæ˜¯å®¿ä¸»æœºä¸ŠLinux bridge interface docker0ä¸Šçš„IP, å’Œå®¹å™¨é‡Œçš„IPåœ¨åŒä¸€ä¸ªç½‘æ®µï¼Œç”¨æ¥å®¿ä¸»æœºå’Œå®¹å™¨è¿›è¡Œç½‘ç»œé€šè®¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605576988,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":306840,"user_name":"ç‰›ç‰›è‚¥","can_delete":false,"product_type":"c1","uid":1226493,"ip_address":"","ucode":"4F455A76F22BB0","user_header":"https://static001.geekbang.org/account/avatar/00/12/b6/fd/a0f60753.jpg","comment_is_top":false,"comment_ctime":1628740961,"is_pvip":false,"replies":[{"id":"111306","content":"@ç‰›ç‰›è‚¥<br>ç¢°åˆ°ç±»ä¼¼é—®é¢˜å¯ä»¥å…ˆå»æœç´¢ä¸€ä¸‹error message &quot;sending build context to Docker daemon&quot;.<br>https:&#47;&#47;www.cnblogs.com&#47;cxbhakim&#47;p&#47;9316565.html<br>","user_name":"ä½œè€…å›å¤","user_name_real":"CY","uid":"2070138","ctime":1629088725,"ip_address":"","comment_id":306840,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5923708257","product_id":100063801,"comment_content":" è¯·é—®è€å¸ˆï¼Œè¿è¡Œ sudo  docker build -t registry&#47;httpd:v1 -f .&#47;Dockerfile . åï¼Œ æ˜¾ç¤ºsending build context to Docker daemon  2.065GB è€Œä½“ç§¯è¿˜åœ¨ä¸æ–­å¢åŠ ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":2070138,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/96/7a/8a14d008.jpg","nickname":"CY","note":"","ucode":"4AF98230985918","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":524943,"discussion_content":"@ç‰›ç‰›è‚¥\nç¢°åˆ°ç±»ä¼¼é—®é¢˜å¯ä»¥å…ˆå»æœç´¢ä¸€ä¸‹error message &amp;quot;sending build context to Docker daemon&amp;quot;.\nhttps://www.cnblogs.com/cxbhakim/p/9316565.html\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629088725,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1160951,"avatar":"https://static001.geekbang.org/account/avatar/00/11/b6/f7/3c3b1385.jpg","nickname":"æµ·èƒ†é˜¶æ®µ","note":"","ucode":"7A8C4BB4D0CDB8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":542118,"discussion_content":"å› ä¸ºdocker ä¼šæŠŠDockefile æ‰€åœ¨ç›®å½•ä»¥åŠå­ç›®å½•éƒ½å½“ä½œbuild contextï¼Œæ‰€ä»¥æœ€å¥½æ˜¯åœ¨ä¸€ä¸ªç©ºç›®å½•ä¸­build","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640668363,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":273133,"user_name":"wuyang","can_delete":false,"product_type":"c1","uid":1044517,"ip_address":"","ucode":"81000322FF96A7","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f0/25/d3da7ca9.jpg","comment_is_top":false,"comment_ctime":1610451601,"is_pvip":true,"replies":[{"id":"99043","content":"@wuyang-ligerj<br>å¯ä»¥å°è¯•ç”¨findå‘½ä»¤å»æ‰¾ä¸€ä¸‹<br><br>```<br>-bash-4.2# docker ps -q<br>8c28cc9c5db8<br>-bash-4.2# pwd<br>&#47;sys&#47;fs&#47;cgroup&#47;memory<br>-bash-4.2# find . -name *8c28cc9c5db8*<br>.&#47;system.slice&#47;docker-8c28cc9c5db88bf08b6ccc79aed58b8ec4afaeb1ef7ff27aaabfa60229824c08.scope<br>```","user_name":"ä½œè€…å›å¤","user_name_real":"CY","uid":"2070138","ctime":1610551723,"ip_address":"","comment_id":273133,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5905418897","product_id":100063801,"comment_content":"centos 7.9  cd &#47;sys&#47;fs&#47;cgroup&#47;memory&#47;system.slice&#47; è¿›å…¥è¿™ä¸ªç›®å½•æ²¡æœ‰æ‰¾åˆ°æ­£åœ¨è¿è¡Œçš„å®¹å™¨id","like_count":1,"discussions":[{"author":{"id":2070138,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/96/7a/8a14d008.jpg","nickname":"CY","note":"","ucode":"4AF98230985918","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":513506,"discussion_content":"@wuyang-ligerj\nå¯ä»¥å°è¯•ç”¨findå‘½ä»¤å»æ‰¾ä¸€ä¸‹\n\n```\n-bash-4.2# docker ps -q\n8c28cc9c5db8\n-bash-4.2# pwd\n/sys/fs/cgroup/memory\n-bash-4.2# find . -name *8c28cc9c5db8*\n./system.slice/docker-8c28cc9c5db88bf08b6ccc79aed58b8ec4afaeb1ef7ff27aaabfa60229824c08.scope\n```","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610551723,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1044517,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f0/25/d3da7ca9.jpg","nickname":"wuyang","note":"","ucode":"81000322FF96A7","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":341716,"discussion_content":"cd /sys/fs/cgroup/memory/docker  åœ¨è¿™ä¸ªç›®å½•é‡Œé¢æ‰¾åˆ°å®¹å™¨çš„idäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610503931,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":262004,"user_name":"chon","can_delete":false,"product_type":"c1","uid":1068925,"ip_address":"","ucode":"1C32170972F726","user_header":"https://static001.geekbang.org/account/avatar/00/10/4f/7d/dd852b04.jpg","comment_is_top":false,"comment_ctime":1605603247,"is_pvip":true,"replies":[{"id":"95293","content":"&quot;Understanding the Linux Kernel&quot;<br>&quot;Linux Kernel Development&quot;<br><br>è™½ç„¶è¿™ä¸¤æœ¬ä¹¦æ˜¯10å¤šå¹´å‰çš„äº†ï¼Œè®²è¿°çš„å†…æ ¸ç‰ˆæœ¬å’Œç›®å‰çš„æœ‰å·®è·ï¼Œä¸è¿‡åŸºæœ¬çš„æ¦‚å¿µåŸç†éƒ½æ˜¯ä¸€æ ·çš„ã€‚è®¤çœŸè¯»å®Œï¼Œå¯¹äºå†…æ ¸ä¼šæœ‰ä¸€ä¸ªæ¯”è¾ƒå®Œæ•´çš„è®¤è¯†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"CY","uid":"2070138","ctime":1605791415,"ip_address":"","comment_id":262004,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5900570543","product_id":100063801,"comment_content":"å¸Œæœ›åœ¨è¯¾ç¨‹æœ€åèƒ½ç»™ä¸ªä¹¦å•ï¼Œæ€ä¹ˆæ‰èƒ½æŒæ¡linuxçš„å†…æ ¸ï¼Œè°¢è°¢","like_count":1,"discussions":[{"author":{"id":2070138,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/96/7a/8a14d008.jpg","nickname":"CY","note":"","ucode":"4AF98230985918","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":509686,"discussion_content":"&amp;quot;Understanding the Linux Kernel&amp;quot;\n&amp;quot;Linux Kernel Development&amp;quot;\n\nè™½ç„¶è¿™ä¸¤æœ¬ä¹¦æ˜¯10å¤šå¹´å‰çš„äº†ï¼Œè®²è¿°çš„å†…æ ¸ç‰ˆæœ¬å’Œç›®å‰çš„æœ‰å·®è·ï¼Œä¸è¿‡åŸºæœ¬çš„æ¦‚å¿µåŸç†éƒ½æ˜¯ä¸€æ ·çš„ã€‚è®¤çœŸè¯»å®Œï¼Œå¯¹äºå†…æ ¸ä¼šæœ‰ä¸€ä¸ªæ¯”è¾ƒå®Œæ•´çš„è®¤è¯†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605791415,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":261818,"user_name":"JianXu","can_delete":false,"product_type":"c1","uid":1033219,"ip_address":"","ucode":"2A61BDBB573BDC","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c4/03/f753fda7.jpg","comment_is_top":false,"comment_ctime":1605530797,"is_pvip":false,"replies":[{"id":"95022","content":"@JianXu,<br><br>å› ä¸ºæˆ‘çš„ä»‹ç»åé¢æœ‰å¾ˆå¤šå†…å®¹æ¶‰åŠåˆ°äº†Linuxç›¸å…³çš„åŠŸèƒ½ï¼Œéœ€è¦åœ¨Linuxçš„æœºå™¨é‡Œè¿è¡Œå®¹å™¨ã€‚<br><br><br>â€œåœ¨è¿™ä¸ªå®¹å™¨è¯¾ç¨‹ä¸­ï¼Œæ¯ä¸€è®²é‡Œéƒ½ä¼šæœ‰ä¸€äº›å°ä¾‹å­ï¼Œæ‰€ä»¥éœ€è¦ä½ æœ‰ä¸€å°å®‰è£…æœ‰ Linux çš„æœºå™¨ï¼Œæˆ–è€…ç”¨ VirtualBox å®‰è£…ä¸€ä¸ªè™šæ‹Ÿæœºæ¥è·‘ Linuxã€‚Linux çš„ç‰ˆæœ¬å»ºè®®æ˜¯ CentOS 8 æˆ–è€…æ˜¯ Ubuntu 20.04ã€‚&quot;","user_name":"ä½œè€…å›å¤","user_name_real":"CY","uid":"2070138","ctime":1605538677,"ip_address":"","comment_id":261818,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5900498093","product_id":100063801,"comment_content":"æˆ‘åœ¨Mac ç¬”è®°æœ¬ä¸Šå®‰è£…äº†Â docker daemon.  ä½†æ˜¯ä¸‹è½½çš„ centos&#47;httpd:latest ä¼¼ä¹æ‰¾ä¸åˆ° ip æˆ–è€… ifconfig å‘½ä»¤ï¼š<br><br> ~ î‚° docker ps<br>CONTAINER ID        IMAGE                 COMMAND             CREATED             STATUS              PORTS               NAMES<br>955d78842ca8        centos&#47;httpd:latest   &quot;&#47;run-httpd.sh&quot;     15 minutes ago      Up 15 minutes       80&#47;tcp              vigilant_jones<br> ~ î‚° docker exec -it 955d78842ca8 ip addr<br>OCI runtime exec failed: exec failed: container_linux.go:349: starting container process caused &quot;exec: \\&quot;ip\\&quot;: executable file not found in $PATH&quot;: unknown<br> âœ˜ î‚° ~ î‚° docker exec -it 955d78842ca8 ifconfig<br>OCI runtime exec failed: exec failed: container_linux.go:349: starting container process caused &quot;exec: \\&quot;ifconfig\\&quot;: executable file not found in $PATH&quot;: unknown<br> âœ˜ î‚° ~ î‚°","like_count":1,"discussions":[{"author":{"id":2070138,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/96/7a/8a14d008.jpg","nickname":"CY","note":"","ucode":"4AF98230985918","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":509618,"discussion_content":"@JianXu,\n\nå› ä¸ºæˆ‘çš„ä»‹ç»åé¢æœ‰å¾ˆå¤šå†…å®¹æ¶‰åŠåˆ°äº†Linuxç›¸å…³çš„åŠŸèƒ½ï¼Œéœ€è¦åœ¨Linuxçš„æœºå™¨é‡Œè¿è¡Œå®¹å™¨ã€‚\n\n\nâ€œåœ¨è¿™ä¸ªå®¹å™¨è¯¾ç¨‹ä¸­ï¼Œæ¯ä¸€è®²é‡Œéƒ½ä¼šæœ‰ä¸€äº›å°ä¾‹å­ï¼Œæ‰€ä»¥éœ€è¦ä½ æœ‰ä¸€å°å®‰è£…æœ‰ Linux çš„æœºå™¨ï¼Œæˆ–è€…ç”¨ VirtualBox å®‰è£…ä¸€ä¸ªè™šæ‹Ÿæœºæ¥è·‘ Linuxã€‚Linux çš„ç‰ˆæœ¬å»ºè®®æ˜¯ CentOS 8 æˆ–è€…æ˜¯ Ubuntu 20.04ã€‚&amp;quot;","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605538677,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1225502,"avatar":"","nickname":"éŸ³ä¹æŸ æª¬èŒ¶","note":"","ucode":"30330F27AF0EEF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":334143,"discussion_content":"centosæä¾›çš„centos/httpd:latesté•œåƒçš„ç¡®æ²¡æœ‰å®‰è£…ipå‘½ä»¤ï¼Œå¯ä»¥å…ˆåœ¨å®¹å™¨ä¸­å®‰è£…iprouteåŒ…ï¼š docker exec  e0d676532eac yum install iproute","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1607750511,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":360578,"user_name":"Nemo","can_delete":false,"product_type":"c1","uid":1657039,"ip_address":"å¹¿ä¸œ","ucode":"2B11D18D6FA2AE","user_header":"https://static001.geekbang.org/account/avatar/00/19/48/cf/8c88e6c0.jpg","comment_is_top":false,"comment_ctime":1666668212,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1666668212","product_id":100063801,"comment_content":"è¯¾ä»¶ä¸­centos8ä¼šé‡åˆ° Error: Failed to download metadata for repo &#39;AppStream&#39;<br>è‡ªå·±æ·»åŠ å°±å¥½äº†<br>RUN cd &#47;etc&#47;yum.repos.d&#47;<br>RUN sed -i &#39;s&#47;mirrorlist&#47;#mirrorlist&#47;g&#39; &#47;etc&#47;yum.repos.d&#47;CentOS-* &amp;&amp; sed -i &#39;s|#baseurl=http:&#47;&#47;mirror.centos.org|baseurl=http:&#47;&#47;vault.centos.org|g&#39; &#47;etc&#47;yum.repos.d&#47;CentOS-*","like_count":0},{"had_liked":false,"id":357740,"user_name":"Geek_c98a70","can_delete":false,"product_type":"c1","uid":2290127,"ip_address":"ä¸Šæµ·","ucode":"17D5ACBF7E44B7","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epIdmlBLywcLF3ADKyicFoRkVocJnu0CBbv6wYMeNGDEKlXRicaok498ybaozAzZbpr8qn8fA3LCdBA/132","comment_is_top":false,"comment_ctime":1663592667,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1663592667","product_id":100063801,"comment_content":"cat memory.limit_in_bytes <br>9223372036854771712<br>æ±‚æ•™è€å¸ˆï¼Œæˆ‘çš„ä¸€ä¸ªdockerç›®å½•ä¸‹å†…å­˜é™åˆ¶æ˜¯è¿™ä¸ªï¼Ÿæ„Ÿè§‰æœ‰ç‚¹é—®é¢˜ã€‚ã€‚ã€‚","like_count":0},{"had_liked":false,"id":351178,"user_name":"é©¬å¬","can_delete":false,"product_type":"c1","uid":1430132,"ip_address":"","ucode":"93D83CB5FAE5AD","user_header":"https://static001.geekbang.org/account/avatar/00/15/d2/74/7861f504.jpg","comment_is_top":false,"comment_ctime":1657593744,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1657593744","product_id":100063801,"comment_content":"æ€è€ƒé¢˜ï¼Œå°è¯•äº†nginxï¼Œå¹¶å¢åŠ äº†ä¸€ä¸ªå­é…ç½®æ–‡ä»¶é…ç½®å¦‚ä¸‹ï¼Œå¯æˆåŠŸè¿è¡Œï¼š<br>FROM docker.io&#47;library&#47;nginx:alpine<br>COPY xxx.conf &#47;etc&#47;nginx&#47;conf.d&#47;xxx.conf<br>CMD [&quot;&#47;usr&#47;sbin&#47;nginx&quot;, &quot;-g&quot;, &quot;daemon off;&quot;]","like_count":0},{"had_liked":false,"id":343709,"user_name":"King-ZJ","can_delete":false,"product_type":"c1","uid":1915385,"ip_address":"","ucode":"7448A4BBB5A118","user_header":"https://static001.geekbang.org/account/avatar/00/1d/39/f9/b946719a.jpg","comment_is_top":false,"comment_ctime":1651017091,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1651017091","product_id":100063801,"comment_content":"[root@master-1 dockerfile]# docker build -t registry&#47;httpd:v1 -f .&#47;dockerfile .<br>Sending build context to Docker daemon  2.048kB<br>Step 1&#47;5 : FROM centos:8.1.1911<br> ---&gt; 470671670cac<br>Step 2&#47;5 : RUN yum install -y httpd<br> ---&gt; Running in e0e55576ccce<br>CentOS-8 - AppStream                             37  B&#47;s |  38  B     00:01    <br>Failed to download metadata for repo &#39;AppStream&#39;<br>Error: Failed to download metadata for repo &#39;AppStream&#39;<br>The command &#39;&#47;bin&#47;sh -c yum install -y httpd&#39; returned a non-zero code: 1<br>è¯·é—®è¿™ä¸ªfailed downloadæ˜¯ä»€ä¹ˆæ„¿æ„å‘¢ï¼Ÿæˆ‘è¿™è¾¹å•ç‹¬æ‰§è¡Œyum install -y httpdæ˜¯æ²¡é—®é¢˜çš„","like_count":0,"discussions":[{"author":{"id":1339294,"avatar":"https://static001.geekbang.org/account/avatar/00/14/6f/9e/951afb1f.jpg","nickname":"æ›´å¥½çš„åšè‡ªå·±","note":"","ucode":"92CC2D8E4B3B52","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":576483,"discussion_content":"åŸå› ï¼šcentos 8 ä¸å†ç»´æŠ¤linuxç‰ˆæœ¬äº† \nå‚è€ƒï¼šhttps://blog.csdn.net/weixin_43252521/article/details/124409151\n\nä»¥ä¸‹dockerfile å¯ä»¥è¿è¡Œ\n```dockerfile\nFROM centos:8.1.1911\n\nRUN cd /etc/yum.repos.d/ \\\n\t&amp;&amp; sed -i &#39;s/mirrorlist/#mirrorlist/g&#39; /etc/yum.repos.d/CentOS-* \\\n\t&amp;&amp; sed -i &#39;s|#baseurl=http://mirror.centos.org|baseurl=http://vault.centos.org|g&#39; /etc/yum.repos.d/CentOS-* \\\n\t&amp;&amp; yum install -y wget \\\n\t&amp;&amp; yum clean all \\\n\t&amp;&amp; yum makecache \\\n\t&amp;&amp; wget -O /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-vault-8.5.2111.repo \\\n\t&amp;&amp; yum install -y httpd\n\nCOPY file1 /var/www/htlm/\nADD file2.tar.gz /var/www/html/\n\nCMD [&#34;/sbin/httpd&#34;, &#34;-D&#34;, &#34;FOREGROUND&#34;]\n```","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655573640,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":343708,"user_name":"King-ZJ","can_delete":false,"product_type":"c1","uid":1915385,"ip_address":"","ucode":"7448A4BBB5A118","user_header":"https://static001.geekbang.org/account/avatar/00/1d/39/f9/b946719a.jpg","comment_is_top":false,"comment_ctime":1651016064,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1651016064","product_id":100063801,"comment_content":"docker stop containerIdå’Œdocker exec -it containerId &#47;bin&#47;bashæ‰§è¡Œexitå‘½ä»¤åçš„å®ç°åŸç†æ˜¯ä¸€æ ·çš„å—ï¼Ÿ<br>","like_count":0},{"had_liked":false,"id":326121,"user_name":"Geek4437","can_delete":false,"product_type":"c1","uid":2853695,"ip_address":"","ucode":"0BE885D9AD9444","user_header":"","comment_is_top":false,"comment_ctime":1639386875,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1639386875","product_id":100063801,"comment_content":"è€å¸ˆä½ å¥½ï¼Œä¸ºä»€ä¹ˆ memery.limit_in_bytes çš„é»˜è®¤å€¼æ˜¯9223372036854771712ï¼Œè€Œä¸æ˜¯ uint64 çš„æœ€å¤§å€¼æˆ–è€…å…¶ä»–å€¼å‘¢ï¼Ÿ<br><br>uint64 çš„æœ€å¤§å€¼ 9223372036854775807 - 9223372036854771712 = 4095ã€‚","like_count":0},{"had_liked":false,"id":321312,"user_name":"å°Y","can_delete":false,"product_type":"c1","uid":1739621,"ip_address":"","ucode":"24A43BB71805F8","user_header":"https://static001.geekbang.org/account/avatar/00/1a/8b/65/0f1f9a10.jpg","comment_is_top":false,"comment_ctime":1636785784,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1636785784","product_id":100063801,"comment_content":"æˆ‘çš„ï¼Œ&#47;sys&#47;fs&#47;cgroup&#47;memory&#47;system.slice&#47;ä¸‹ æ²¡æœ‰ docker-&lt;id&gt;ç»“æ„çš„ç›®å½•æˆ–æ–‡ä»¶æ˜¯å’‹å›äº‹å‘¢ï¼Ÿ æˆ‘å·²ç»è¿è¡Œäº†2ä¸ªå®¹å™¨çš„","like_count":0},{"had_liked":false,"id":313965,"user_name":"Syou","can_delete":false,"product_type":"c1","uid":2782614,"ip_address":"","ucode":"14EE33372CF1C0","user_header":"https://static001.geekbang.org/account/avatar/00/2a/75/96/207411d0.jpg","comment_is_top":false,"comment_ctime":1632759526,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1632759526","product_id":100063801,"comment_content":"ä¸€ç›´çº³é—·ä¸ºä»€ä¹ˆæ²¡æœ‰GPUçš„resourceåˆ†å‰²ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯CGroupä¸æ”¯æŒä¹ˆï¼Ÿ","like_count":0},{"had_liked":false,"id":312168,"user_name":"å…«å°ä¸Š","can_delete":false,"product_type":"c1","uid":1391143,"ip_address":"","ucode":"FB3D74B522C720","user_header":"https://static001.geekbang.org/account/avatar/00/15/3a/27/5d218272.jpg","comment_is_top":false,"comment_ctime":1631671288,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1631671288","product_id":100063801,"comment_content":"æƒ³é—®ä¸€ä¸‹ç«¯å£å·ä¸ºä»€ä¹ˆå†…å¤–éƒ½æ˜¯ 80å‘¢","like_count":0},{"had_liked":false,"id":312092,"user_name":"å¼ å¾·å¤","can_delete":false,"product_type":"c1","uid":1926471,"ip_address":"","ucode":"DBCC762CF77EBD","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erqstKsb9keGmH2hwtiapCVWD6bpaGcsibZgkGbUoYyIFGqJRKbbibS82BhicjDpEc6Mwujbmic5PRibpWw/132","comment_is_top":false,"comment_ctime":1631620105,"is_pvip":false,"replies":[{"id":"114204","content":"å¤šè°¢é¼“åŠ±ï¼Œå¸Œæœ›å¯¹ä½ æœ‰å¸®åŠ©ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å¬æ°´çš„æ¹–","uid":"1501385","ctime":1633916686,"ip_address":"","comment_id":312092,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1631620105","product_id":100063801,"comment_content":"è®²çš„çœŸä¸é”™ï¼ŒæŒ‰ç…§ç¨‹åºå‘˜çš„æ€ç»´æ¥çš„","like_count":0,"discussions":[{"author":{"id":1501385,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e8/c9/59bcd490.jpg","nickname":"å¬æ°´çš„æ¹–","note":"","ucode":"B1759F90165D81","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526862,"discussion_content":"å¤šè°¢é¼“åŠ±ï¼Œå¸Œæœ›å¯¹ä½ æœ‰å¸®åŠ©ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633916686,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":4}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":303857,"user_name":"åˆ˜è¶…","can_delete":false,"product_type":"c1","uid":2649310,"ip_address":"","ucode":"78B617AADA9035","user_header":"https://static001.geekbang.org/account/avatar/00/28/6c/de/1934abe6.jpg","comment_is_top":false,"comment_ctime":1627030551,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1627030551","product_id":100063801,"comment_content":"&#47;sys&#47;fs&#47;cgroup&#47;memory&#47;docker&#47;618fd36d....<br>ç°åœ¨æ˜¯è¿™ä¸ªç›®å½•","like_count":0},{"had_liked":false,"id":303247,"user_name":"é¦–å¯Œæ‰‹è®°","can_delete":false,"product_type":"c1","uid":1286588,"ip_address":"","ucode":"879DED4078303C","user_header":"https://static001.geekbang.org/account/avatar/00/13/a1/bc/ef0f26fa.jpg","comment_is_top":false,"comment_ctime":1626685407,"is_pvip":true,"replies":[{"id":"111123","content":"cpuset cgroupé‚£ä¹ˆå¯ä»¥é€šè¿‡cpuset.cpusæ¥é™åˆ¶å®¹å™¨è¿›ç¨‹åœ¨å“ªå‡ ä¸ªcpuä¸Šè¿è¡Œã€‚<br>ä¸è¿‡å…·ä½“å®¹å™¨å¯ä»¥ä½¿ç”¨å‡ ä¸ªcpu, è¿˜æ˜¯éœ€è¦ä»cpu cgroupé‡Œé€šè¿‡cpu.cfs_quota_usæ¥åˆ¤æ–­å®¹å™¨å¯ä»¥ç”¨å‡ ä¸ªcpu.","user_name":"ä½œè€…å›å¤","user_name_real":"CY","uid":"2070138","ctime":1628756448,"ip_address":"","comment_id":303247,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1626685407","product_id":100063801,"comment_content":"cpuset å­ç³»ç»Ÿï¼›è€å¸ˆä¸çŸ¥é“è¿™ä¸ªæ˜¯å¦èƒ½é™åˆ¶docker å®¹å™¨å†…è¯»å–åˆ°cpuçš„æ•°é‡ï¼Œå› ä¸ºæˆ‘ä»¬ä¹‹å‰æœ‰ä¸ªç¨‹åºæ˜¯è¯»cpuçš„æ ¸æ•°æ¥åˆ¤æ–­å¯åŠ¨å¤šå°‘è¿›ç¨‹çš„ï¼Œå•æœºéƒ¨ç½²çš„æ—¶å€™å€’æ˜¯æ²¡æœ‰å¤šå¤§é—®é¢˜ï¼Œä½†æ˜¯è¦ç»™å…¶ä»–æœåŠ¡éƒ¨ç½²åœ¨ä¸€èµ·çš„æ—¶å€™å°±ä¼šå‡ºç°é—®é¢˜","like_count":0,"discussions":[{"author":{"id":2070138,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/96/7a/8a14d008.jpg","nickname":"CY","note":"","ucode":"4AF98230985918","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":523606,"discussion_content":"cpuset cgroupé‚£ä¹ˆå¯ä»¥é€šè¿‡cpuset.cpusæ¥é™åˆ¶å®¹å™¨è¿›ç¨‹åœ¨å“ªå‡ ä¸ªcpuä¸Šè¿è¡Œã€‚\nä¸è¿‡å…·ä½“å®¹å™¨å¯ä»¥ä½¿ç”¨å‡ ä¸ªcpu, è¿˜æ˜¯éœ€è¦ä»cpu cgroupé‡Œé€šè¿‡cpu.cfs_quota_usæ¥åˆ¤æ–­å®¹å™¨å¯ä»¥ç”¨å‡ ä¸ªcpu.","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628756448,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":291968,"user_name":"Dexter","can_delete":false,"product_type":"c1","uid":2608728,"ip_address":"","ucode":"909CABC4AC4AC9","user_header":"https://static001.geekbang.org/account/avatar/00/27/ce/58/71ed845f.jpg","comment_is_top":false,"comment_ctime":1620629380,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1620629380","product_id":100063801,"comment_content":"å…³äºdocker containerd ---&gt;containerd-shim, åœ¨k8sç¯å¢ƒä¸Šï¼ˆCRI=dockerï¼‰ä¸ŠæŸ¥çœ‹ï¼Œå¹¶æ²¡æœ‰å‘ç°containerd-shimæ˜¯ç”±containerdåˆ›å»ºå‡ºæ¥ï¼Ÿ<br>        |-containerd---19*[{containerd}]<br>        |-31*[containerd-shim-+-pause]<br>        |                     `-12*[{containerd-shim}]]<br>        |-19*[containerd-shim-+-pause]<br>        |                     `-13*[{containerd-shim}]]<br>        |-containerd-shim-+-trsconfd-+-netopeer2-serve---3*[{netopeer2-serve}]<br>        |                 |          `-18*[{trsconfd}]<br>        |                 `-16*[{containerd-shim}]<br>        |-containerd-shim-+-genapilogger-ca---kubeapisymptomd---14*[{kubeapisymptomd}]<br>        |                 `-12*[{containerd-shim}]<br>        |-containerd-shim-+-tini---zabbix_proxy---90*[zabbix_proxy]<br>        |                 `-12*[{containerd-shim}]<br>        |-containerd-shim-+-ministarter-+-hasymptomdatapr---5*[{hasymptomdatapr}]<br>        |                 |             `-lightweightserv<br>","like_count":0},{"had_liked":false,"id":291826,"user_name":"æœ¨ æ˜“","can_delete":false,"product_type":"c1","uid":1033212,"ip_address":"","ucode":"5C3BBB5958A4B5","user_header":"","comment_is_top":false,"comment_ctime":1620536226,"is_pvip":false,"replies":[{"id":"111143","content":"ç›®å‰ç”¨CentOS7, å†…æ ¸ä½¿ç”¨åŸºäºubuntu 20.04çš„5.4.x<br>ç”±äºCentOS8ä¸å†è¢«ç»´æŠ¤, æˆ‘ä»¬ä¼šåˆ‡æ¢åˆ°ubuntu ","user_name":"ä½œè€…å›å¤","user_name_real":"CY","uid":"2070138","ctime":1628775634,"ip_address":"","comment_id":291826,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1620536226","product_id":100063801,"comment_content":"è€å¸ˆï¼Œè¯·é—® eBay åœ¨è‡ªå·±çš„ç§æœ‰äº‘ä¸Šä½¿ç”¨ k8s ï¼Œåº•å±‚çš„ Linux çš„æ“ä½œç³»ç»Ÿç‰ˆæœ¬æ˜¯ Debianã€Ubuntuã€CentOSï¼Œè¿˜æ˜¯åŸºäºå¼€æºçš„å†…æ ¸è‡ªç ”çš„ Linuxã€‚","like_count":0,"discussions":[{"author":{"id":2070138,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/96/7a/8a14d008.jpg","nickname":"CY","note":"","ucode":"4AF98230985918","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":519579,"discussion_content":"ç›®å‰ç”¨CentOS7, å†…æ ¸ä½¿ç”¨åŸºäºubuntu 20.04çš„5.4.x\nç”±äºCentOS8ä¸å†è¢«ç»´æŠ¤, æˆ‘ä»¬ä¼šåˆ‡æ¢åˆ°ubuntu ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628775634,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1160951,"avatar":"https://static001.geekbang.org/account/avatar/00/11/b6/f7/3c3b1385.jpg","nickname":"æµ·èƒ†é˜¶æ®µ","note":"","ucode":"7A8C4BB4D0CDB8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":542120,"discussion_content":"@CY how about Rocky linux?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640668491,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":291418,"user_name":"BertGeek","can_delete":false,"product_type":"c1","uid":1452799,"ip_address":"","ucode":"8E1D72C9F9778C","user_header":"https://static001.geekbang.org/account/avatar/00/16/2a/ff/a9d72102.jpg","comment_is_top":false,"comment_ctime":1620283516,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1620283516","product_id":100063801,"comment_content":"è¯·é—®ï¼Œdocker 19 å’Œdocker 20 æ˜¯ä¸æ˜¯å­˜åœ¨åŒºåˆ«ï¼Œ<br>é¡¹ç›®è¿è¡Œåœ¨docker20ç‰ˆæœ¬å°±æœ‰é—®é¢˜ï¼Œé™ä½åˆ°19 å°±æ­£å¸¸è¿è¡Œ<br><br>å¸Œæœ›è€å¸ˆè§£ç­”ç–‘æƒ‘ï¼Œéå¸¸æ„Ÿè°¢ï¼","like_count":0,"discussions":[{"author":{"id":1244997,"avatar":"https://static001.geekbang.org/account/avatar/00/12/ff/45/b953a21f.jpg","nickname":"é¾","note":"","ucode":"7A84347CF31EF5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":551104,"discussion_content":"å¯èƒ½å’Œå†…æ ¸ç‰ˆæœ¬æœ‰å…³ï¼Œé«˜ç‰ˆæœ¬çš„dockeréœ€è¦å‡çº§å†…æ ¸æ”¯æŒ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644898235,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":263802,"user_name":"Wen","can_delete":false,"product_type":"c1","uid":1367387,"ip_address":"","ucode":"892CB242BA9C04","user_header":"https://static001.geekbang.org/account/avatar/00/14/dd/5b/5461afad.jpg","comment_is_top":false,"comment_ctime":1606270675,"is_pvip":false,"replies":[{"id":"95725","content":"@Wen, å¯ä»¥ç”¨ docker &quot;--memory&quot; å‚æ•°æ¥å¯åŠ¨å®¹å™¨ã€‚æ¯”å¦‚ï¼Œ <br>docker run --memory=400m -d registry&#47;zombie-proc:v1","user_name":"ä½œè€…å›å¤","user_name_real":"CY","uid":"2070138","ctime":1606319784,"ip_address":"","comment_id":263802,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1606270675","product_id":100063801,"comment_content":"[root@localhost ~]# echo 2147483648 &gt; &#47;sys&#47;fs&#47;cgroup&#47;memory&#47;docker&#47;7142bb204dd0d019696f8ac2111928898041e4a9e8c076e7bbadc1d3c032e21f&#47;memory.limit_in_bytes<br>[root@localhost ~]# docker stats 7142bb204dd0<br><br>CONTAINER ID   NAME              CPU %     MEM USAGE &#47; LIMIT   MEM %     NET I&#47;O       BLOCK I&#47;O   PIDS<br>7142bb204dd0   frosty_brattain   0.01%     31.7MiB &#47; 2GiB      1.55%     1.12kB &#47; 0B   0B &#47; 0B     213<br>[root@localhost ~]# systemctl restart docker<br>[root@localhost ~]# docker start 714<br>714<br>[root@localhost ~]# docker stats 714<br><br>CONTAINER ID   NAME              CPU %     MEM USAGE &#47; LIMIT     MEM %     NET I&#47;O     BLOCK I&#47;O   PIDS<br>7142bb204dd0   frosty_brattain   0.00%     33.66MiB &#47; 3.664GiB   0.90%     766B &#47; 0B   0B &#47; 0B     213<br><br>é‡å¯dockerå°±ä¼šå¤±æ•ˆï¼Œè¿˜æœ‰åˆ«çš„æ–¹æ³•å¯ä»¥é™åˆ¶å†…å­˜å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":2070138,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/96/7a/8a14d008.jpg","nickname":"CY","note":"","ucode":"4AF98230985918","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":510312,"discussion_content":"@Wen, å¯ä»¥ç”¨ docker &amp;quot;--memory&amp;quot; å‚æ•°æ¥å¯åŠ¨å®¹å™¨ã€‚æ¯”å¦‚ï¼Œ \ndocker run --memory=400m -d registry/zombie-proc:v1","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606319784,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":263076,"user_name":"å°ç™½","can_delete":false,"product_type":"c1","uid":1003669,"ip_address":"","ucode":"57FC0FA9B4AE74","user_header":"https://static001.geekbang.org/account/avatar/00/0f/50/95/824f60ae.jpg","comment_is_top":false,"comment_ctime":1605971593,"is_pvip":false,"replies":[{"id":"95476","content":"@å°ç™½<br>æˆ‘æƒ³éœ€è¦åˆ†æä¸€ä¸‹resouceæœ‰å“ªäº›ï¼Œ å¯ä»¥å…ˆçœ‹Cgroupså¯ä»¥ä¸ºå“ªäº›resouceåšåˆ°å“ªç§ç¨‹åº¦çš„limitã€‚æˆ‘åœ¨åé¢çš„è¯¾ç¨‹é‡Œä¹Ÿä¼šä»‹ç»cpu&#47;memory&#47;blkio&#47;pids è¿™å‡ ä¸ªCgroups.<br><br>","user_name":"ä½œè€…å›å¤","user_name_real":"CY","uid":"2070138","ctime":1606015803,"ip_address":"","comment_id":263076,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1605971593","product_id":100063801,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œæˆ‘æƒ³è¯·æ•™ä¸€ä¸‹ï¼Œæˆ‘æƒ³å­¦ä¹ ä¸€ä¸‹å¦‚ä½•ç»™å„ä¸ªæœåŠ¡åˆç†åˆ†é… resouce limitï¼Œä½†ä¸çŸ¥é“ä»å“ªä¸‹æ‰‹ï¼Œè€å¸ˆèƒ½æŒ‡å¯¼ä¸€ä¸‹å…³äºè¿™ä¸ªçŸ¥è¯†çš„å­¦ä¹ è·¯å¾„æˆ–è€…æœç´¢å…³é”®è¯å—ï¼Ÿè°¢è°¢ã€‚","like_count":0,"discussions":[{"author":{"id":2070138,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/96/7a/8a14d008.jpg","nickname":"CY","note":"","ucode":"4AF98230985918","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":510088,"discussion_content":"@å°ç™½\næˆ‘æƒ³éœ€è¦åˆ†æä¸€ä¸‹resouceæœ‰å“ªäº›ï¼Œ å¯ä»¥å…ˆçœ‹Cgroupså¯ä»¥ä¸ºå“ªäº›resouceåšåˆ°å“ªç§ç¨‹åº¦çš„limitã€‚æˆ‘åœ¨åé¢çš„è¯¾ç¨‹é‡Œä¹Ÿä¼šä»‹ç»cpu/memory/blkio/pids è¿™å‡ ä¸ªCgroups.\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606015803,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":262929,"user_name":"åœ¨è·¯ä¸Š","can_delete":false,"product_type":"c1","uid":1402511,"ip_address":"","ucode":"6E31908EFE1107","user_header":"https://static001.geekbang.org/account/avatar/00/15/66/8f/02be926d.jpg","comment_is_top":false,"comment_ctime":1605886746,"is_pvip":false,"replies":[{"id":"95496","content":"Windowsçš„å®¹å™¨æˆ‘ä¹‹å‰æ²¡æœ‰æ¥è§¦è¿‡ï¼Œä¸è¿‡çœ‹åˆ°å¾®è½¯çš„ç½‘ç«™æœ‰ç›¸å…³çš„ä»‹ç»ï¼Œä½ å¯ä»¥çœ‹ä¸€ä¸‹ã€‚<br>https:&#47;&#47;docs.microsoft.com&#47;en-us&#47;virtualization&#47;windowscontainers&#47;about&#47;","user_name":"ä½œè€…å›å¤","user_name_real":"CY","uid":"2070138","ctime":1606025464,"ip_address":"","comment_id":262929,"utype":1}],"discussion_count":4,"race_medal":0,"score":"1605886746","product_id":100063801,"comment_content":"è€å¸ˆå¥½ï¼Œæˆ‘èƒ½å¦å°†windowså¼€å‘ç¯å¢ƒæ‰“æˆä¸€ä¸ªDockeré•œåƒï¼Œç»™æ–°æ¥çš„åŒäº‹ä½¿ç”¨ï¼Ÿå¦‚æœå¯ä»¥çš„è¯ï¼Œéœ€è¦æ€ä¹ˆæ“ä½œã€‚","like_count":0,"discussions":[{"author":{"id":2070138,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/96/7a/8a14d008.jpg","nickname":"CY","note":"","ucode":"4AF98230985918","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":510035,"discussion_content":"Windowsçš„å®¹å™¨æˆ‘ä¹‹å‰æ²¡æœ‰æ¥è§¦è¿‡ï¼Œä¸è¿‡çœ‹åˆ°å¾®è½¯çš„ç½‘ç«™æœ‰ç›¸å…³çš„ä»‹ç»ï¼Œä½ å¯ä»¥çœ‹ä¸€ä¸‹ã€‚\nhttps://docs.microsoft.com/en-us/virtualization/windowscontainers/about/","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606025464,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1160951,"avatar":"https://static001.geekbang.org/account/avatar/00/11/b6/f7/3c3b1385.jpg","nickname":"æµ·èƒ†é˜¶æ®µ","note":"","ucode":"7A8C4BB4D0CDB8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":542121,"discussion_content":"https://hub.docker.com/_/microsoft-windows","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640668566,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2536266,"avatar":"","nickname":"å—ç¿”","note":"","ucode":"07D3D0298FC87E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":362762,"discussion_content":"æˆ‘çš„ç†è§£ï¼Œå®¹å™¨æ˜¯å®é™…ä¸Šæ˜¯æ‰“åŒ…äº†å¯æ‰§è¡Œæ–‡ä»¶ï¼Œlibraryå’Œé…ç½®æ–‡ä»¶ï¼Œä½†å†…æ ¸æ˜¯ç”¨å®¿ä¸»æœºä¸Šçš„å†…æ ¸ã€‚windowså’Œlinuxçš„å†…æ ¸æ¥å£æ˜¯ä¸ä¸€æ ·çš„ï¼Œæ‰€ä»¥windowså¹³å°åšæˆçš„docker imageåº”è¯¥æ˜¯æ²¡æœ‰åŠæ³•åœ¨linuxå¹³å°å»è¿è¡Œçš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617025087,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1160951,"avatar":"https://static001.geekbang.org/account/avatar/00/11/b6/f7/3c3b1385.jpg","nickname":"æµ·èƒ†é˜¶æ®µ","note":"","ucode":"7A8C4BB4D0CDB8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2536266,"avatar":"","nickname":"å—ç¿”","note":"","ucode":"07D3D0298FC87E","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":542122,"discussion_content":"correct","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640668590,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":362762,"ip_address":""},"score":542122,"extra":""}]}]},{"had_liked":false,"id":262632,"user_name":"JianXu","can_delete":false,"product_type":"c1","uid":1033219,"ip_address":"","ucode":"2A61BDBB573BDC","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c4/03/f753fda7.jpg","comment_is_top":false,"comment_ctime":1605787584,"is_pvip":false,"replies":[{"id":"95300","content":"@JianXu,<br>ä½ å¯ä»¥å†æ£€æŸ¥ä¸€ä¸‹ï¼Œåº”è¯¥æ˜¯æœ‰shimçš„ã€‚æ¯”å¦‚ï¼š<br><br>root     27204 18022  0 Nov17 ?        00:00:06 containerd-shim -namespace moby -workdir &#47;var&#47;lib&#47;runtime&#47;docker&#47;containerd&#47;daemon&#47;io.containerd.runtime.v1.linux&#47;moby&#47;dfd5237b370c74aebfc706b849c665672f7de74f5210f00b887c4a0e7c31ae31 -address &#47;var&#47;run&#47;docker&#47;containerd&#47;containerd.sock -containerd-binary &#47;usr&#47;bin&#47;containerd -runtime-root &#47;var&#47;run&#47;docker&#47;runtime-runc -systemd-cgroup<br>root     27242 27204  0 Nov17 ?        00:00:12 &#47;sbin&#47;httpd -D FOREGROUND","user_name":"ä½œè€…å›å¤","user_name_real":"CY","uid":"2070138","ctime":1605794223,"ip_address":"","comment_id":262632,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1605787584","product_id":100063801,"comment_content":"å…³äº shim è¿›ç¨‹<br><br>æˆ‘åœ¨æˆ‘çš„ä¸»æœºä¸Šï¼š<br>$ ps -ef | grep httpd<br>root       18916   18885  0 17:30 ?        00:00:00 &#47;usr&#47;sbin&#47;httpd -DFOREGROUND<br>48         18917   18916  0 17:30 ?        00:00:00 &#47;usr&#47;sbin&#47;httpd -DFOREGROUND<br>48         18918   18916  0 17:30 ?        00:00:00 &#47;usr&#47;sbin&#47;httpd -DFOREGROUND<br>48         18919   18916  0 17:30 ?        00:00:00 &#47;usr&#47;sbin&#47;httpd -DFOREGROUND<br>48         18920   18916  0 17:30 ?        00:00:00 &#47;usr&#47;sbin&#47;httpd -DFOREGROUND<br>48         18921   18916  0 17:30 ?        00:00:00 &#47;usr&#47;sbin&#47;httpd -DFOREGROUND<br><br>äºæ˜¯æˆ‘å»æŸ¥çœ‹ 18885 è¿›ç¨‹<br>$ ps -ef | grep 18885<br>root       18885   18857  0 17:30 ?        00:00:00 &#47;bin&#47;sh &#47;usr&#47;sbin&#47;apachectl -DFOREGROUND<br><br>ä½†æ˜¯æˆ‘ç»§ç»­æŸ¥çœ‹ 18857 è¿›ç¨‹å·çš„æ—¶å€™æ˜¯æ‰¾ä¸åˆ°çš„ï¼Œè¿™æ˜¯ä»€ä¹ˆåŸå› å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":2070138,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/96/7a/8a14d008.jpg","nickname":"CY","note":"","ucode":"4AF98230985918","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":509907,"discussion_content":"@JianXu,\nä½ å¯ä»¥å†æ£€æŸ¥ä¸€ä¸‹ï¼Œåº”è¯¥æ˜¯æœ‰shimçš„ã€‚æ¯”å¦‚ï¼š\n\nroot     27204 18022  0 Nov17 ?        00:00:06 containerd-shim -namespace moby -workdir /var/lib/runtime/docker/containerd/daemon/io.containerd.runtime.v1.linux/moby/dfd5237b370c74aebfc706b849c665672f7de74f5210f00b887c4a0e7c31ae31 -address /var/run/docker/containerd/containerd.sock -containerd-binary /usr/bin/containerd -runtime-root /var/run/docker/runtime-runc -systemd-cgroup\nroot     27242 27204  0 Nov17 ?        00:00:12 /sbin/httpd -D FOREGROUND","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605794223,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":262630,"user_name":"JianXu","can_delete":false,"product_type":"c1","uid":1033219,"ip_address":"","ucode":"2A61BDBB573BDC","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c4/03/f753fda7.jpg","comment_is_top":false,"comment_ctime":1605787390,"is_pvip":false,"replies":[{"id":"95348","content":"@JianXu, è¿™æ˜¯æˆ‘ç¬¬ä¸€æ¬¡çœ‹åˆ°containeråœ¨cgroupä¸‹çš„ç›®å½•æ˜¯ç”¨overlayfs merged dir idæ¥å‘½åçš„ã€‚éœ€è¦çœ‹ä¸€ä¸‹ï¼Œä½ çš„æœºå™¨OS&#47;systemd&#47;docker ç‰ˆæœ¬ï¼Œä»¥åŠå®‰è£…æ–¹å¼ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"CY","uid":"2070138","ctime":1605845606,"ip_address":"","comment_id":262630,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1605787390","product_id":100063801,"comment_content":"æˆ‘æœºå™¨ä¸Šçš„ç›®å½•æ˜¯ &#47;sys&#47;fs&#47;cgroup&#47;memory&#47;system.slice&#47;var-lib-docker-overlay2-c186a214dffd90302cdcbf43d1e749cfed5c4fa5d643e8ecd46408fbf6f4d39e-merged.mount$   é—®é¢˜æ˜¯æˆ‘æ€ä¹ˆå»æŠŠ container id å’Œ è¿™ä¸€ä¸²æ•°å­—å…³è”å‘¢ï¼Ÿ<br><br>jianxu1@container:&#47;sys&#47;fs&#47;cgroup&#47;memory&#47;system.slice&#47;var-lib-docker-overlay2-c186a214dffd90302cdcbf43d1e749cfed5c4fa5d643e8ecd46408fbf6f4d39e-merged.mount$ mount | grep docker<br>overlay on &#47;var&#47;lib&#47;docker&#47;overlay2&#47;c186a214dffd90302cdcbf43d1e749cfed5c4fa5d643e8ecd46408fbf6f4d39e&#47;merged type overlay (rw,relatime,lowerdir=&#47;var&#47;lib&#47;docker&#47;overlay2&#47;l&#47;24V56T2HQD3KQS2CN2N6CXAQZP:&#47;var&#47;lib&#47;docker&#47;overlay2&#47;l&#47;JGIRYDVLNFJR5446RXCXEFUVRL:&#47;var&#47;lib&#47;docker&#47;overlay2&#47;l&#47;2MAFTAY2SVBIPWVINJSKPTZS3K:&#47;var&#47;lib&#47;docker&#47;overlay2&#47;l&#47;7UZWQEVHIOIXV7OORMADG7NKU2:&#47;var&#47;lib&#47;docker&#47;overlay2&#47;l&#47;E45SMGLQ3DIICDWJV5H45I5T2U,upperdir=&#47;var&#47;lib&#47;docker&#47;overlay2&#47;c186a214dffd90302cdcbf43d1e749cfed5c4fa5d643e8ecd46408fbf6f4d39e&#47;diff,workdir=&#47;var&#47;lib&#47;docker&#47;overlay2&#47;c186a214dffd90302cdcbf43d1e749cfed5c4fa5d643e8ecd46408fbf6f4d39e&#47;work,xino=off)","like_count":0,"discussions":[{"author":{"id":2070138,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/96/7a/8a14d008.jpg","nickname":"CY","note":"","ucode":"4AF98230985918","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":509905,"discussion_content":"@JianXu, è¿™æ˜¯æˆ‘ç¬¬ä¸€æ¬¡çœ‹åˆ°containeråœ¨cgroupä¸‹çš„ç›®å½•æ˜¯ç”¨overlayfs merged dir idæ¥å‘½åçš„ã€‚éœ€è¦çœ‹ä¸€ä¸‹ï¼Œä½ çš„æœºå™¨OS/systemd/docker ç‰ˆæœ¬ï¼Œä»¥åŠå®‰è£…æ–¹å¼ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605845606,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":262415,"user_name":"po","can_delete":false,"product_type":"c1","uid":1023905,"ip_address":"","ucode":"7DB36C278F34D7","user_header":"https://static001.geekbang.org/account/avatar/00/0f/9f/a1/d75219ee.jpg","comment_is_top":false,"comment_ctime":1605711600,"is_pvip":true,"replies":[{"id":"95258","content":"@po,<br>è¿™ä¸ªå¤§å€¼åªæ˜¯è¡¨ç¤ºmemory limitè¿˜æ²¡æœ‰è®¾ç½®","user_name":"ä½œè€…å›å¤","user_name_real":"CY","uid":"2070138","ctime":1605757396,"ip_address":"","comment_id":262415,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1605711600","product_id":100063801,"comment_content":"è€å¸ˆï¼Œä¸ºä»€ä¹ˆæˆ‘çš„ memory.limit_in_bytes æ•°å­—ä¼šè¿™ä¹ˆå¤§å‘¢ï¼Ÿæˆ‘æ˜¯rhel7.5ã€‚<br>[root@ocp3 docker-5950716c499d200837ce1c3061c2bf4ee8d1e33ce75b8844fe7c39c7b60e1671.scope]# cat memory.limit_in_bytes<br>9223372036854771712<br>[root@ocp3 docker-5950716c499d200837ce1c3061c2bf4ee8d1e33ce75b8844fe7c39c7b60e1671.scope]# free -h<br>              total        used        free      shared  buff&#47;cache   available<br>Mem:           3.7G        213M        3.0G         33M        540M        3.2G<br>Swap:          3.9G          0B        3.9G","like_count":0,"discussions":[{"author":{"id":2070138,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/96/7a/8a14d008.jpg","nickname":"CY","note":"","ucode":"4AF98230985918","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":509821,"discussion_content":"@po,\nè¿™ä¸ªå¤§å€¼åªæ˜¯è¡¨ç¤ºmemory limitè¿˜æ²¡æœ‰è®¾ç½®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605757396,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":262390,"user_name":"hadoop_admin","can_delete":false,"product_type":"c1","uid":1300466,"ip_address":"","ucode":"7EAFA775505C7E","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJGMphabeneYXs9otkAtr67RvxJClDa7jPe7w8yExg4YaS2FGJruDKMj5yN1E90o6MFibnicH8gM0ibg/132","comment_is_top":false,"comment_ctime":1605705999,"is_pvip":false,"replies":[{"id":"95356","content":"@hadoop_adminï¼Œ æœ€åè¿˜æœ‰ä¸€ä¸ª â€œ.â€<br><br>docker build -t wqz&#47;http:v1 -f .&#47;Dockerfile .","user_name":"ä½œè€…å›å¤","user_name_real":"CY","uid":"2070138","ctime":1605855949,"ip_address":"","comment_id":262390,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1605705999","product_id":100063801,"comment_content":"å‘ç°ç…§è‘«èŠ¦ç”»ç“¢è¿˜ä¸èƒ½æ‰§è¡ŒæˆåŠŸã€‚ã€‚ã€‚[root@testarm01 test]# docker build -t wqz&#47;http:v1 -f .&#47;Dockerfile <br>&quot;docker build&quot; requires exactly 1 argument.<br>See &#39;docker build --help&#39;.<br><br>Usage:  docker build [OPTIONS] PATH | URL | -<br><br>Build an image from a Dockerfileï¼Œå°‘äº†æœ€åä¸€ä¸ª.","like_count":0,"discussions":[{"author":{"id":2070138,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/96/7a/8a14d008.jpg","nickname":"CY","note":"","ucode":"4AF98230985918","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":509815,"discussion_content":"@hadoop_adminï¼Œ æœ€åè¿˜æœ‰ä¸€ä¸ª â€œ.â€\n\ndocker build -t wqz/http:v1 -f ./Dockerfile .","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605855949,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":262360,"user_name":"Geek_35d340","can_delete":false,"product_type":"c1","uid":1526390,"ip_address":"","ucode":"B263B1D6EB32C9","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIzSeoGepp5mMfI4LEGOarEiaiaPCZBdT1rLfm5RrcjXyBecuSSJ1GF5SpG6KmMVZIKXO0khO6EHMhA/132","comment_is_top":false,"comment_ctime":1605699225,"is_pvip":false,"replies":[{"id":"95188","content":"è¿™ä¸ªé—®é¢˜ï¼Œéœ€è¦å…ˆçœ‹ä¸€ä¸‹ä½ çš„Linux OSå’Œdockerçš„ç‰ˆæœ¬ã€‚<br>cgroup v1 åªæ˜¯æ”¯æŒ Direct I&#47;Oé™æµï¼Œ cgroup v2å¯ä»¥æ”¯æŒ Buffered I&#47;O.<br>ä¸è¿‡ç›®å‰ï¼Œé™¤äº†fedora 31+ ç¼ºçœæ”¯æŒcgroup v2å¤–ï¼Œå…¶ä»–çš„OSç¼ºçœçš„éƒ½æ˜¯cgroup v1, éœ€è¦è‡ªå·±é…ç½®ã€‚docker&#47;moby cgroup v2çš„ä»£ç åº”è¯¥å·²ç»åˆäº†ï¼Œä¸è¿‡releaseå‡ºæ¥çš„è¿˜ä¸æ”¯æŒ v2ã€‚<br><br>ç”Ÿäº§ä¸­I&#47;Oé™åˆ¶ï¼Œå–å†³äºä½ çš„åº”ç”¨äº†ï¼Œå¦‚æœåº”ç”¨æ˜¯Direct I&#47;Oé‚£ä¹ˆå¯ä»¥ç”¨docker<br>","user_name":"ä½œè€…å›å¤","user_name_real":"CY","uid":"2070138","ctime":1605710435,"ip_address":"","comment_id":262360,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1605699225","product_id":100063801,"comment_content":"æ‚¨å¥½è€å¸ˆï¼Œè¯·æ•™ä¸€ä¸ªé—®é¢˜ï¼Œdockerçš„IOé™é¢åªæ˜¯é’ˆå¯¹direct ioæœ‰æ•ˆå—ï¼Ÿç”Ÿäº§ä¸­å¦‚æœç›¸å¯¹ç£ç›˜IOè¿›è¡Œé™åˆ¶ä½¿ç”¨dockerèƒ½æ»¡è¶³éœ€æ±‚å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":2070138,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/96/7a/8a14d008.jpg","nickname":"CY","note":"","ucode":"4AF98230985918","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":509801,"discussion_content":"è¿™ä¸ªé—®é¢˜ï¼Œéœ€è¦å…ˆçœ‹ä¸€ä¸‹ä½ çš„Linux OSå’Œdockerçš„ç‰ˆæœ¬ã€‚\ncgroup v1 åªæ˜¯æ”¯æŒ Direct I/Oé™æµï¼Œ cgroup v2å¯ä»¥æ”¯æŒ Buffered I/O.\nä¸è¿‡ç›®å‰ï¼Œé™¤äº†fedora 31+ ç¼ºçœæ”¯æŒcgroup v2å¤–ï¼Œå…¶ä»–çš„OSç¼ºçœçš„éƒ½æ˜¯cgroup v1, éœ€è¦è‡ªå·±é…ç½®ã€‚docker/moby cgroup v2çš„ä»£ç åº”è¯¥å·²ç»åˆäº†ï¼Œä¸è¿‡releaseå‡ºæ¥çš„è¿˜ä¸æ”¯æŒ v2ã€‚\n\nç”Ÿäº§ä¸­I/Oé™åˆ¶ï¼Œå–å†³äºä½ çš„åº”ç”¨äº†ï¼Œå¦‚æœåº”ç”¨æ˜¯Direct I/Oé‚£ä¹ˆå¯ä»¥ç”¨docker\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605710435,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":262165,"user_name":"Helios","can_delete":false,"product_type":"c1","uid":1380758,"ip_address":"","ucode":"BE6B98EE8F0D09","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKJrOl63enWXCRxN0SoucliclBme0qrRb19ATrWIOIvibKIz8UAuVgicBMibIVUznerHnjotI4dm6ibODA/132","comment_is_top":false,"comment_ctime":1605632453,"is_pvip":false,"replies":[{"id":"95142","content":"disk Buffered I&#47;O é™æµéœ€è¦Cgroup v2, æˆ‘åœ¨åé¢çš„è¯¾ç¨‹é‡Œä¼šä»‹ç»åˆ°ã€‚ ","user_name":"ä½œè€…å›å¤","user_name_real":"CY","uid":"2070138","ctime":1605669994,"ip_address":"","comment_id":262165,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1605632453","product_id":100063801,"comment_content":"è¯·é—®è€å¸ˆï¼Œv1ç‰ˆæœ¬çš„èµ„æºåè°ƒèƒ½å…·ä½“ä»‹ç»ä¸‹ä¹ˆï¼Œv2å’‹è§£å†³çš„å‘¢ï¼Œèƒ½è¯´ä¸€ä¸‹æˆ–è€…æ¥ä¸ªé“¾æ¥ä¸ï½","like_count":0,"discussions":[{"author":{"id":2070138,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/96/7a/8a14d008.jpg","nickname":"CY","note":"","ucode":"4AF98230985918","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":509713,"discussion_content":"disk Buffered I/O é™æµéœ€è¦Cgroup v2, æˆ‘åœ¨åé¢çš„è¯¾ç¨‹é‡Œä¼šä»‹ç»åˆ°ã€‚ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605669994,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":262160,"user_name":"å®‹æ™“æ˜","can_delete":false,"product_type":"c1","uid":1146507,"ip_address":"","ucode":"DC866DCE2FBA9E","user_header":"https://static001.geekbang.org/account/avatar/00/11/7e/8b/3cc461b3.jpg","comment_is_top":false,"comment_ctime":1605628001,"is_pvip":false,"replies":[{"id":"95141","content":"@å®‹æ™“æ˜<br>ä½ è¯´çš„ç™»é™†podçš„æ–¹å¼æ˜¯â€œkubectl execâ€å—ï¼Ÿ è¿˜æœ‰â€œä½†å¹³å°ä¹‹å¤–çš„è¿›å…¥å®¹å™¨â€ æŒ‡çš„æ˜¯ä»€ä¹ˆæ–¹å¼ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"CY","uid":"2070138","ctime":1605669912,"ip_address":"","comment_id":262160,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1605628001","product_id":100063801,"comment_content":"è€å¸ˆå®¹å™¨å‘½ä»¤å®¡è®¡æœ‰ä»€ä¹ˆå¥½çš„æ–¹æ¡ˆå—ï¼Ÿ å› ä¸ºæˆ‘ä»¬ç›®å‰åœ¨åšk8så®¹å™¨ç®¡ç†å¹³å°ï¼Œæœ‰ç™»å½•podçš„éœ€æ±‚ï¼Œæˆ‘åªèƒ½æ•è·web socketæµæ¥è®°å½•å‘½ä»¤ï¼Œä½†å¹³å°ä¹‹å¤–çš„è¿›å…¥å®¹å™¨ï¼Œæˆ‘æ˜¯æ— æ³•æ•è·çš„","like_count":0,"discussions":[{"author":{"id":2070138,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/96/7a/8a14d008.jpg","nickname":"CY","note":"","ucode":"4AF98230985918","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":509712,"discussion_content":"@å®‹æ™“æ˜\nä½ è¯´çš„ç™»é™†podçš„æ–¹å¼æ˜¯â€œkubectl execâ€å—ï¼Ÿ è¿˜æœ‰â€œä½†å¹³å°ä¹‹å¤–çš„è¿›å…¥å®¹å™¨â€ æŒ‡çš„æ˜¯ä»€ä¹ˆæ–¹å¼ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605669912,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1146507,"avatar":"https://static001.geekbang.org/account/avatar/00/11/7e/8b/3cc461b3.jpg","nickname":"å®‹æ™“æ˜","note":"","ucode":"DC866DCE2FBA9E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":327117,"discussion_content":"æ— è®ºæ˜¯webshellè¿˜æ˜¯execçš„æ–¹å¼ï¼Œæœ‰ä»€ä¹ˆå¥½çš„å‘½ä»¤å®¡è®¡æ–¹æ¡ˆå—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605749922,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":261858,"user_name":"è’‹æ‚¦","can_delete":false,"product_type":"c1","uid":1490858,"ip_address":"","ucode":"E4DA0A5CE91F02","user_header":"https://static001.geekbang.org/account/avatar/00/16/bf/aa/32a6449c.jpg","comment_is_top":false,"comment_ctime":1605539623,"is_pvip":false,"replies":[{"id":"95069","content":"@è’‹æ‚¦<br>&gt; ä¼šä½¿ç”¨è™šæ‹Ÿå†…å­˜å—ï¼Ÿ<br>æˆ‘æƒ³ä½ è¿™é‡Œè¯´çš„&quot;è™šæ‹Ÿå†…å­˜&quot;åº”è¯¥æ˜¯æŒ‡Linuxçš„swap, å°±æ˜¯åªç³»ç»Ÿçš„ç‰©ç†å†…å­˜ä¸è¶³çš„æ—¶å€™ï¼ŒæŠŠæš‚æ—¶ä¸activeçš„å†…å­˜å†…å®¹äº¤æ¢åˆ°ç£ç›˜çš„swapç©ºé—´ã€‚<br>å®¹å™¨æ˜¯å¯ä»¥ä½¿ç”¨swapï¼Œ ä¸è¿‡ä¹Ÿä¼šç”¨ä¸€äº›é—®é¢˜ï¼Œè¿™ä¸ªæˆ‘åœ¨å®¹å™¨å†…å­˜çš„è¿™ä¸€ç« èŠ‚é‡Œä¼šä»‹ç»ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"CY","uid":"2070138","ctime":1605586406,"ip_address":"","comment_id":261858,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1605539623","product_id":100063801,"comment_content":"è¯·é—®ï¼Œdocker å¦‚æœå†…å­˜ä¸è¶³ï¼Œä¼šä½¿ç”¨è™šæ‹Ÿå†…å­˜å—ï¼Ÿæˆ‘åœ¨å…¬å¸æœºå™¨ä¸Šé…ç½®jvmå†…å­˜å’Œcgrpup åˆ†é…çš„å†…å­˜æ€»æ˜¯ä¸èƒ½å¾ˆå¥½çš„å¥‘åˆã€‚æ„Ÿè§‰æœ‰äº›è¹©è„š","like_count":0,"discussions":[{"author":{"id":2070138,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/96/7a/8a14d008.jpg","nickname":"CY","note":"","ucode":"4AF98230985918","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":509642,"discussion_content":"@è’‹æ‚¦\n&amp;gt; ä¼šä½¿ç”¨è™šæ‹Ÿå†…å­˜å—ï¼Ÿ\næˆ‘æƒ³ä½ è¿™é‡Œè¯´çš„&amp;quot;è™šæ‹Ÿå†…å­˜&amp;quot;åº”è¯¥æ˜¯æŒ‡Linuxçš„swap, å°±æ˜¯åªç³»ç»Ÿçš„ç‰©ç†å†…å­˜ä¸è¶³çš„æ—¶å€™ï¼ŒæŠŠæš‚æ—¶ä¸activeçš„å†…å­˜å†…å®¹äº¤æ¢åˆ°ç£ç›˜çš„swapç©ºé—´ã€‚\nå®¹å™¨æ˜¯å¯ä»¥ä½¿ç”¨swapï¼Œ ä¸è¿‡ä¹Ÿä¼šç”¨ä¸€äº›é—®é¢˜ï¼Œè¿™ä¸ªæˆ‘åœ¨å®¹å™¨å†…å­˜çš„è¿™ä¸€ç« èŠ‚é‡Œä¼šä»‹ç»ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605586406,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1535604,"avatar":"https://static001.geekbang.org/account/avatar/00/17/6e/74/1bd3eef0.jpg","nickname":"å¤å•†å‘¨","note":"","ucode":"1EBC83100FE82F","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":326720,"discussion_content":"jvmçš„cgroup ä¸€èˆ¬æ˜¯jvmçš„å†…å­˜åŠ 1Gå§ã€‚æˆ‘è®°å¾—å–æ¡ƒè€…è®²è¿‡è¿™ä¸ªæœ€ä½³å®è·µã€‚å¦‚æœè¦ç²¾ç¡®çš„è¯ï¼Œå°±æ ¹æ®è‡ªå·±çš„ä¸šåŠ¡ï¼Œç›‘æ§è§‚å¯Ÿã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1605667028,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":261820,"user_name":"JianXu","can_delete":false,"product_type":"c1","uid":1033219,"ip_address":"","ucode":"2A61BDBB573BDC","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c4/03/f753fda7.jpg","comment_is_top":false,"comment_ctime":1605531793,"is_pvip":false,"replies":[{"id":"95023","content":"å¯¹çš„ï¼Œéœ€è¦è£…ä¸€å°Linuxè™šæ‹Ÿæœºã€‚<br><br>åœ¨è¿™ä¸ªå®¹å™¨è¯¾ç¨‹ä¸­ï¼Œæ¯ä¸€è®²é‡Œéƒ½ä¼šæœ‰ä¸€äº›å°ä¾‹å­ï¼Œæ‰€ä»¥éœ€è¦ä½ æœ‰ä¸€å°å®‰è£…æœ‰ Linux çš„æœºå™¨ï¼Œæˆ–è€…ç”¨ VirtualBox å®‰è£…ä¸€ä¸ªè™šæ‹Ÿæœºæ¥è·‘ Linuxã€‚Linux çš„ç‰ˆæœ¬å»ºè®®æ˜¯ CentOS 8 æˆ–è€…æ˜¯ Ubuntu 20.04ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"CY","uid":"2070138","ctime":1605538713,"ip_address":"","comment_id":261820,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1605531793","product_id":100063801,"comment_content":"CY è€å¸ˆï¼Œå¥½åƒåœ¨è‹¹æœç¬”è®°æœ¬ä¸Šè£…äº† docker ä¹‹åï¼Œæˆ‘æ²¡æœ‰åŠæ³•æ¨¡æ‹Ÿè¯¾ç¨‹é‡Œçš„å†…å®¹ã€‚1.   ps -ef | grep httpd  ä»€ä¹ˆè¿”å›ä¹Ÿæ²¡æœ‰ã€‚   2.  æˆ‘ä¹Ÿæ‰¾ä¸åˆ° cgroup çš„è·¯å¾„ &#47;sys&#47;fs&#47;cgroup ç›®å½•ä¸å­˜åœ¨ã€‚ æ˜¯ä¸æ˜¯ä¸€å®šè¦è£…ä¸€ä¸ªè™šæ‹Ÿæœºæ¥åšæ–‡ç« ä¸­çš„å®éªŒï¼Œè¯·é—®æ¨èæˆ‘è£…ä¸€ä¸ªä»€ä¹ˆç³»ç»Ÿçš„è™šæ‹Ÿæœºï¼Ÿ","like_count":0,"discussions":[{"author":{"id":2070138,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/96/7a/8a14d008.jpg","nickname":"CY","note":"","ucode":"4AF98230985918","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":509620,"discussion_content":"å¯¹çš„ï¼Œéœ€è¦è£…ä¸€å°Linuxè™šæ‹Ÿæœºã€‚\n\nåœ¨è¿™ä¸ªå®¹å™¨è¯¾ç¨‹ä¸­ï¼Œæ¯ä¸€è®²é‡Œéƒ½ä¼šæœ‰ä¸€äº›å°ä¾‹å­ï¼Œæ‰€ä»¥éœ€è¦ä½ æœ‰ä¸€å°å®‰è£…æœ‰ Linux çš„æœºå™¨ï¼Œæˆ–è€…ç”¨ VirtualBox å®‰è£…ä¸€ä¸ªè™šæ‹Ÿæœºæ¥è·‘ Linuxã€‚Linux çš„ç‰ˆæœ¬å»ºè®®æ˜¯ CentOS 8 æˆ–è€…æ˜¯ Ubuntu 20.04ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605538713,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1253954,"avatar":"https://static001.geekbang.org/account/avatar/00/13/22/42/79604ce6.jpg","nickname":"å…¬ä¼—å·ï¼šäº‘åŸç”ŸServerless","note":"","ucode":"B615BD756C7552","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":326921,"discussion_content":"Macä¸Šçš„ Docker desktopå®è´¨ä¸Šæ˜¯ä¸ªlinuxè™šæ‹Ÿæœºï¼Œdocker daemonå’Œç”¨æˆ·çš„å®¹å™¨è¿è¡Œåœ¨linuxè™šæ‹Ÿæœºé‡Œï¼Œmacä¸Šåªæ˜¯docker çš„clientã€‚å½“ç„¶åŒ…æ‹¬å®¹å™¨ipåœ¨macä¹Ÿæ˜¯è®¿é—®ä¸é€šçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605702140,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}