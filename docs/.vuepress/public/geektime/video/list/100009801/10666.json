{"id":10666,"title":"04 | 新手使用 Kotlin 常碰到的问题","content":"<h1>源代码及 PDF 课件地址：</h1><p><strong><a href=\"https://gitee.com/geektime-geekbang/KotlinPrimer\">https://gitee.com/geektime-geekbang/KotlinPrimer</a></strong></p>","comments":[{"had_liked":false,"id":48098,"user_name":"Junerver","can_delete":false,"product_type":"c3","uid":1329154,"ip_address":"","ucode":"C07E695B95D917","user_header":"https://static001.geekbang.org/account/avatar/00/14/48/02/4d9dbdd2.jpg","comment_is_top":false,"comment_ctime":1544352617,"is_pvip":false,"replies":[{"id":17293,"content":"👍","user_name":"作者回复","user_name_real":"kymjs张涛","uid":1009146,"ctime":1544437747,"ip_address":"","comment_id":48098,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100009801,"comment_content":"第一题：\nD，编译时出错，因为println方法没有这个重载\n正确的写法应该是 println(String.format(&quot;我叫：%s 我今年：%d&quot;, name, age)) \n或者：\nval strFormat = &quot;我叫：%s 我今年：%d&quot;\nstrFormat.format(name, age)\nprintln(strFormat.format(name, age))\n\n第二题：\n可以正常运行，编译器提示：\nStatic member &#39;com.junerver.learnkotlin.Utils.sayMessage(java.lang.String)&#39; accessed via instance reference less... (⌘F1) \nShows references to static methods and fields via class instance rather than a class itself.\n按 option + return IDE提示可以优化为使用静态方法方位类的引用","like_count":8,"discussions":[{"author":{"id":1009146,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/65/fa/2b4d2f26.jpg","nickname":"kymjs张涛","note":"","ucode":"EFE7AF4C0D4FE8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432024,"discussion_content":"👍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544437747,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1599309,"avatar":"https://static001.geekbang.org/account/avatar/00/18/67/4d/f0d1b920.jpg","nickname":"钱钱钱我爱钱","note":"","ucode":"EC7B7982613B52","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":1265,"discussion_content":"中间那句毫无意义，可以不要\n    val strFormat=&#34;我叫：%s我今年：%d&#34;\n//    strFormat.format(name,age)\n    println(strFormat.format(name,age))","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562487885,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":38644,"user_name":"Geek_fw8a4h","can_delete":false,"product_type":"c3","uid":1151768,"ip_address":"","ucode":"63C79C2E107BA4","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoVePXeH8diaUxILBAqfCUjDaDVWzZZbVtAKE2fZIthj4rsoumicsvnttJ7ibNR40l4x1wicsg9bXtZSw/132","comment_is_top":false,"comment_ctime":1542093129,"is_pvip":false,"replies":[{"id":15175,"content":"没错","user_name":"作者回复","user_name_real":"kymjs张涛","uid":1009146,"ctime":1542962136,"ip_address":"","comment_id":38644,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100009801,"comment_content":"var str = &quot;我叫%s,我今年%s岁&quot;\nprintln(str.format(name,age))\n这样才行","like_count":2,"discussions":[{"author":{"id":1009146,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/65/fa/2b4d2f26.jpg","nickname":"kymjs张涛","note":"","ucode":"EFE7AF4C0D4FE8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":428766,"discussion_content":"没错","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1542962136,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":32262,"user_name":"书生依旧","can_delete":false,"product_type":"c3","uid":1069827,"ip_address":"","ucode":"4B2181160AD303","user_header":"https://static001.geekbang.org/account/avatar/00/10/53/03/24a892b7.jpg","comment_is_top":false,"comment_ctime":1539503591,"is_pvip":false,"replies":[{"id":11918,"content":"完全正确","user_name":"作者回复","user_name_real":"kymjs张涛","uid":1009146,"ctime":1539678369,"ip_address":"","comment_id":32262,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100009801,"comment_content":"第二道题使用了 @JvmStatic 这个注解，方法会被直接编译程 public static final，不用加 INSTANCE 了，结果输出 null","like_count":2,"discussions":[{"author":{"id":1009146,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/65/fa/2b4d2f26.jpg","nickname":"kymjs张涛","note":"","ucode":"EFE7AF4C0D4FE8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":426705,"discussion_content":"完全正确","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1539678369,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":30274,"user_name":"天空","can_delete":false,"product_type":"c3","uid":1121823,"ip_address":"","ucode":"4760B5C8A34F30","user_header":"https://static001.geekbang.org/account/avatar/00/11/1e/1f/e3c13f29.jpg","comment_is_top":false,"comment_ctime":1538752054,"is_pvip":false,"replies":[{"id":11139,"content":"需要使用kotlin官网额外提供的反射库。具体代码在官网上有很详细的介绍，如果不想看英文，官网的中文翻译网上也有的。","user_name":"作者回复","user_name_real":"kymjs张涛","uid":1009146,"ctime":1539054577,"ip_address":"","comment_id":30274,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100009801,"comment_content":"视频谈到的kotlin反射使用Integer方法有代码实现吗？","like_count":1,"discussions":[{"author":{"id":1009146,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/65/fa/2b4d2f26.jpg","nickname":"kymjs张涛","note":"","ucode":"EFE7AF4C0D4FE8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":425922,"discussion_content":"需要使用kotlin官网额外提供的反射库。具体代码在官网上有很详细的介绍，如果不想看英文，官网的中文翻译网上也有的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1539054577,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":102176,"user_name":"极速得bundle","can_delete":false,"product_type":"c3","uid":1341317,"ip_address":"","ucode":"F5498543B50B91","user_header":"https://static001.geekbang.org/account/avatar/00/14/77/85/05030bf8.jpg","comment_is_top":false,"comment_ctime":1560156903,"is_pvip":false,"replies":[{"id":42501,"content":"companion object处理不好，会生成额外对象，所以不推荐新手使用这种方式","user_name":"作者回复","user_name_real":"kymjs张涛","uid":1009146,"ctime":1563807251,"ip_address":"","comment_id":102176,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100009801,"comment_content":"object 和注解一起声明静态变量的方式，是不是和伴随对象达到的效果是一样的呀，companion object来声明","like_count":0,"discussions":[{"author":{"id":1009146,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/65/fa/2b4d2f26.jpg","nickname":"kymjs张涛","note":"","ucode":"EFE7AF4C0D4FE8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":453287,"discussion_content":"companion object处理不好，会生成额外对象，所以不推荐新手使用这种方式","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563807251,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":95144,"user_name":"遥远的救世主","can_delete":false,"product_type":"c3","uid":1181334,"ip_address":"","ucode":"4CC436479CAA21","user_header":"https://static001.geekbang.org/account/avatar/00/12/06/96/4273bb09.jpg","comment_is_top":false,"comment_ctime":1557974135,"is_pvip":false,"replies":[{"id":42506,"content":"👍是的","user_name":"作者回复","user_name_real":"kymjs张涛","uid":1009146,"ctime":1563807516,"ip_address":"","comment_id":95144,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100009801,"comment_content":"记录一个小插曲，因为是专门下载的IDE来学习Kotlin，也没有配置自动导包，把java文件新建在一个另一个文件夹，还比较纳闷怎么调不出Kotlin类，后来才反映过来，还需要手动导包package","like_count":0,"discussions":[{"author":{"id":1009146,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/65/fa/2b4d2f26.jpg","nickname":"kymjs张涛","note":"","ucode":"EFE7AF4C0D4FE8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":450342,"discussion_content":"👍是的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563807516,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":32259,"user_name":"书生依旧","can_delete":false,"product_type":"c3","uid":1069827,"ip_address":"","ucode":"4B2181160AD303","user_header":"https://static001.geekbang.org/account/avatar/00/10/53/03/24a892b7.jpg","comment_is_top":false,"comment_ctime":1539503253,"is_pvip":false,"replies":[{"id":11917,"content":"👍多动手最正确","user_name":"作者回复","user_name_real":"kymjs张涛","uid":1009146,"ctime":1539678357,"ip_address":"","comment_id":32259,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100009801,"comment_content":"第一道题，println() 没有那个重载，我用 String.format 试了一下，运行时出现了 IllegalFormatConversionException 异常。","like_count":0,"discussions":[{"author":{"id":1009146,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/65/fa/2b4d2f26.jpg","nickname":"kymjs张涛","note":"","ucode":"EFE7AF4C0D4FE8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":426702,"discussion_content":"👍多动手最正确","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1539678357,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":27850,"user_name":"暴雨","can_delete":false,"product_type":"c3","uid":1183835,"ip_address":"","ucode":"9646A4E13E40B0","user_header":"https://static001.geekbang.org/account/avatar/00/12/10/5b/1c3964a2.jpg","comment_is_top":false,"comment_ctime":1537955479,"is_pvip":false,"replies":[{"id":10511,"content":"嗯，是的","user_name":"作者回复","user_name_real":"kymjs张涛","uid":1009146,"ctime":1538307216,"ip_address":"","comment_id":27850,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100009801,"comment_content":"没人学kotlin吗，怎么连留言的都没有啊，别的课都是留言板才是精华啊","like_count":0,"discussions":[{"author":{"id":1009146,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/65/fa/2b4d2f26.jpg","nickname":"kymjs张涛","note":"","ucode":"EFE7AF4C0D4FE8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":425057,"discussion_content":"嗯，是的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1538307216,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":95116,"user_name":"遥远的救世主","can_delete":false,"product_type":"c3","uid":1181334,"ip_address":"","ucode":"4CC436479CAA21","user_header":"https://static001.geekbang.org/account/avatar/00/12/06/96/4273bb09.jpg","comment_is_top":false,"comment_ctime":1557970083,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100009801,"comment_content":"println()没有这个重载方法，所以要改成String.format(&quot;我的名字是%d，我的年龄是%d&quot;, name, age)，但运行会报java.util.IllegalFormatConversionException: d != java.lang.String，转换符d表示十进制，s表示字符串，所以正确写法应该是我的名字是%s","like_count":4},{"had_liked":false,"id":69760,"user_name":"分毫不差","can_delete":false,"product_type":"c3","uid":1186923,"ip_address":"","ucode":"800941A76EF967","user_header":"https://static001.geekbang.org/account/avatar/00/12/1c/6b/13333e66.jpg","comment_is_top":false,"comment_ctime":1550830638,"is_pvip":false,"replies":null,"discussion_count":2,"race_medal":0,"score":2,"product_id":100009801,"comment_content":"kotlin 反射调用 Integer 方法，只找到得到FunctionList 的函数A.a.javaClass.kotlin.declaredMemberFunctions.如何直接得到参数为Integer 的Function 呢？可以直接贴出代码吗？\n","like_count":4,"discussions":[{"author":{"id":1345927,"avatar":"https://static001.geekbang.org/account/avatar/00/14/89/87/e7af3859.jpg","nickname":"RookieApe","note":"","ucode":"94470C9A435359","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":116462,"discussion_content":"val method = clazz.getMethod(&#34;printNumber&#34;, Class.forName(&#34;java.lang.Integer&#34;))","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1578062348,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1599309,"avatar":"https://static001.geekbang.org/account/avatar/00/18/67/4d/f0d1b920.jpg","nickname":"钱钱钱我爱钱","note":"","ucode":"EC7B7982613B52","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":1262,"discussion_content":"同问反射怎么做","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562486744,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":197320,"user_name":"androidcat","can_delete":false,"product_type":"c3","uid":1831773,"ip_address":"","ucode":"53B885F51B32A0","user_header":"","comment_is_top":false,"comment_ctime":1585367691,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100009801,"comment_content":"这节课确实提到的都是让新手很不适应的知识点，很棒","like_count":1},{"had_liked":false,"id":55894,"user_name":"cgrass","can_delete":false,"product_type":"c3","uid":1174054,"ip_address":"","ucode":"1134F3F20068CE","user_header":"https://static001.geekbang.org/account/avatar/00/11/ea/26/99046b27.jpg","comment_is_top":false,"comment_ctime":1546342734,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100009801,"comment_content":"是不是版本更新太快了，现在jvmstatic都不用加了，调用的时候instance也不用了-_-||","like_count":1},{"had_liked":false,"id":69976,"user_name":"凶猛怪兽","can_delete":false,"product_type":"c3","uid":1150635,"ip_address":"","ucode":"D33DD12D5E3D1D","user_header":"https://static001.geekbang.org/account/avatar/00/11/8e/ab/fc9a53eb.jpg","comment_is_top":false,"comment_ctime":1550922692,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100009801,"comment_content":"第一题\nfun main(args: Array&lt;String&gt;) {\n    val name =&quot;Alpha&quot;\n    val age =20\n    println(&quot;我的名字$name,我的年龄$age&quot;)\n}\n\n第二题\nobject 单例，不需要在方法上再加@JvmStatic annotation。\n","like_count":0},{"had_liked":false,"id":55722,"user_name":"和小胖","can_delete":false,"product_type":"c3","uid":1180727,"ip_address":"","ucode":"406BD7AB987EBF","user_header":"https://static001.geekbang.org/account/avatar/00/12/04/37/aa04f997.jpg","comment_is_top":false,"comment_ctime":1546269399,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100009801,"comment_content":"第二题问题就是输出 null 了。另外加INSTANCE 多余了","like_count":0},{"had_liked":false,"id":55721,"user_name":"和小胖","can_delete":false,"product_type":"c3","uid":1180727,"ip_address":"","ucode":"406BD7AB987EBF","user_header":"https://static001.geekbang.org/account/avatar/00/12/04/37/aa04f997.jpg","comment_is_top":false,"comment_ctime":1546269103,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100009801,"comment_content":"第一题：\n\nval age = 18;\nval name = &quot;fff&quot;;\nprintln(&quot;我叫%s,我今年%d岁&quot;.format(name, age))","like_count":0}]}