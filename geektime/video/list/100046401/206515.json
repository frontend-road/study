{"id":206515,"title":"13 | AI项目部署：基本原则","content":"<p><strong>课件和Demo地址</strong><br>\n<a href=\"https://gitee.com/geektime-geekbang/NLP\">https://gitee.com/geektime-geekbang/NLP</a></p>","comments":[{"had_liked":false,"id":184585,"user_name":"海拉鲁","can_delete":false,"product_type":"c3","uid":1048681,"ip_address":"","ucode":"6E3493295CED6F","user_header":"https://static001.geekbang.org/account/avatar/00/10/00/69/3b1375ca.jpg","comment_is_top":false,"comment_ctime":1583367315,"is_pvip":false,"replies":[{"id":71404,"content":"其实上落地难最主要还是需求问题。我现在就怕人跟我说“要智能”","user_name":"作者回复","user_name_real":"王然","uid":1813673,"ctime":1583381415,"ip_address":"","comment_id":184585,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100046401,"comment_content":"看到这里我才真正明白了什么叫AI项目落地难","like_count":4,"discussions":[{"author":{"id":1813673,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/ac/a9/fbcddd1f.jpg","nickname":"王然","note":"","ucode":"45A7F34120DF47","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":486059,"discussion_content":"其实上落地难最主要还是需求问题。我现在就怕人跟我说“要智能”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583381415,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1048681,"avatar":"https://static001.geekbang.org/account/avatar/00/10/00/69/3b1375ca.jpg","nickname":"海拉鲁","note":"","ucode":"6E3493295CED6F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":202884,"discussion_content":"哈哈，看来做这一行无论用什么技术，能不能做好归根结底在需求这个源头上就要把控好","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583973335,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":187540,"user_name":"pomyin","can_delete":false,"product_type":"c3","uid":1201462,"ip_address":"","ucode":"B50DEA78F05FE7","user_header":"https://static001.geekbang.org/account/avatar/00/12/55/36/791d0f5e.jpg","comment_is_top":false,"comment_ctime":1584154677,"is_pvip":false,"replies":[{"id":72479,"content":"虚拟机很有可能有问题...我不建议在windows系统上部署。如果没有其他服务，还是建议以linux系统为基础。","user_name":"作者回复","user_name_real":"王然","uid":1813673,"ctime":1584244708,"ip_address":"","comment_id":187540,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100046401,"comment_content":"老师，问一个问题，现有服务器一台（两块RTX 2080 TI，系统Windows），开发在这台机器上，现在暂没有其他机器可用，但是现在有语义分割模型（deeplab v3+））需要部署在这台服务器上，我试了很久在这台机器上使用hyper-v装centos7虚拟机，但是nvidia-docker无法成功安装，老师，是不是需要部署模型我只能将服务器的Windows系统换成centos系统？还是还有什么办法在Windows系统上部署服务呢？","like_count":1,"discussions":[{"author":{"id":1813673,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/ac/a9/fbcddd1f.jpg","nickname":"王然","note":"","ucode":"45A7F34120DF47","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":487139,"discussion_content":"虚拟机很有可能有问题...我不建议在windows系统上部署。如果没有其他服务，还是建议以linux系统为基础。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584244708,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1201462,"avatar":"https://static001.geekbang.org/account/avatar/00/12/55/36/791d0f5e.jpg","nickname":"pomyin","note":"","ucode":"B50DEA78F05FE7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":205598,"discussion_content":"好的，谢谢老师","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584325250,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":184160,"user_name":"=三千七=","can_delete":false,"product_type":"c3","uid":1401533,"ip_address":"","ucode":"284E8FCD553637","user_header":"https://static001.geekbang.org/account/avatar/00/15/62/bd/0fa62b56.jpg","comment_is_top":false,"comment_ctime":1583240721,"is_pvip":false,"replies":[{"id":71273,"content":"有帮助就好。","user_name":"作者回复","user_name_real":"王然","uid":1813673,"ctime":1583241582,"ip_address":"","comment_id":184160,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100046401,"comment_content":"买下课程之后一口气看到这，老师讲的很好，我很受启发，根据老师的一些经验和建议开始慢慢修正自己的学习和编码方式。感谢老师的分享，这门课买得太值了","like_count":1,"discussions":[{"author":{"id":1813673,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/ac/a9/fbcddd1f.jpg","nickname":"王然","note":"","ucode":"45A7F34120DF47","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":485914,"discussion_content":"有帮助就好。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583241582,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":184645,"user_name":"AIZT","can_delete":false,"product_type":"c3","uid":1259243,"ip_address":"","ucode":"FA876C2690C1D1","user_header":"https://static001.geekbang.org/account/avatar/00/13/36/eb/06b6ccc5.jpg","comment_is_top":false,"comment_ctime":1583377163,"is_pvip":false,"replies":[{"id":71405,"content":"你是在推测么？如果是推测的话我不建议用多个进程去做，我更建议你把batch size调大用一个进程。","user_name":"作者回复","user_name_real":"王然","uid":1813673,"ctime":1583381499,"ip_address":"","comment_id":184645,"utype":1}],"discussion_count":5,"race_medal":0,"score":2,"product_id":100046401,"comment_content":"老师的偏实战的讲课风格很赞。想请教一个当前遇到的部署问题：租用阿里云GPU云服务器（带一块V100-16G），采用的目标检测模型需要2.5G显存，这样最多配置6个进程负载均衡。可是并发支持还是太有限，能麻烦老师给一些建议吗？","like_count":0,"discussions":[{"author":{"id":1813673,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/ac/a9/fbcddd1f.jpg","nickname":"王然","note":"","ucode":"45A7F34120DF47","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":486077,"discussion_content":"你是在推测么？如果是推测的话我不建议用多个进程去做，我更建议你把batch size调大用一个进程。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583381499,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1897148,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/f2/bc/ffc7ad67.jpg","nickname":"Chris Zou","note":"","ucode":"B6DFC71C1DD8B7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":303741,"discussion_content":"如果是CPU推断，用不用batch是不是没啥大影响？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599367188,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1667175,"avatar":"https://static001.geekbang.org/account/avatar/00/19/70/67/0c1359c2.jpg","nickname":"qinsi","note":"","ucode":"090D9C4068FF12","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":199117,"discussion_content":"我的理解，是不是说，原本来一个请求就predict一次，现在并发量大，可以把一段时间（比如100ms）内的请求凑成一个或多个batch一起predict。这样会牺牲一点实时性","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583556624,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1259243,"avatar":"https://static001.geekbang.org/account/avatar/00/13/36/eb/06b6ccc5.jpg","nickname":"AIZT","note":"","ucode":"FA876C2690C1D1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1667175,"avatar":"https://static001.geekbang.org/account/avatar/00/19/70/67/0c1359c2.jpg","nickname":"qinsi","note":"","ucode":"090D9C4068FF12","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":204394,"discussion_content":"好像是这个意思，tfserving框架自动做这个批量化吧。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584169202,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":199117,"ip_address":"","group_id":0},"score":204394,"extra":""}]},{"author":{"id":1259243,"avatar":"https://static001.geekbang.org/account/avatar/00/13/36/eb/06b6ccc5.jpg","nickname":"AIZT","note":"","ucode":"FA876C2690C1D1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":196882,"discussion_content":"是推测。业务那边过来的都是单张图片，实时请求","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583381553,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":184205,"user_name":"书豪","can_delete":false,"product_type":"c3","uid":1068091,"ip_address":"","ucode":"212FBDE59E8457","user_header":"https://static001.geekbang.org/account/avatar/00/10/4c/3b/47d832f4.jpg","comment_is_top":false,"comment_ctime":1583246693,"is_pvip":false,"replies":[{"id":71282,"content":"最后会讲一整个系列～我感觉我立的flag要讲不完了～","user_name":"作者回复","user_name_real":"王然","uid":1813673,"ctime":1583248986,"ip_address":"","comment_id":184205,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100046401,"comment_content":"关于实际生产部署的讲解很好，往往这一块是被忽略掉，前期不够重视的。希望后续老师多讲解一些，给出一些实用的建议！","like_count":0,"discussions":[{"author":{"id":1813673,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/ac/a9/fbcddd1f.jpg","nickname":"王然","note":"","ucode":"45A7F34120DF47","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":485928,"discussion_content":"最后会讲一整个系列～我感觉我立的flag要讲不完了～","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583248986,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1068091,"avatar":"https://static001.geekbang.org/account/avatar/00/10/4c/3b/47d832f4.jpg","nickname":"书豪","note":"","ucode":"212FBDE59E8457","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":195128,"discussion_content":"老师，加油＾０＾~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583249495,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":214685,"user_name":"邪魔丸","can_delete":false,"product_type":"c3","uid":1000744,"ip_address":"","ucode":"72538AB00703A6","user_header":"https://static001.geekbang.org/account/avatar/00/0f/45/28/821cea1e.jpg","comment_is_top":false,"comment_ctime":1588781792,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100046401,"comment_content":"在客户本地部署时候的安全问题怎么做呢？譬如，算法泄露的风险怎么控制？谢谢","like_count":2},{"had_liked":false,"id":295577,"user_name":"x","can_delete":false,"product_type":"c3","uid":2021428,"ip_address":"","ucode":"BC84DA0C0282D4","user_header":"https://static001.geekbang.org/account/avatar/00/1e/d8/34/b2a0e6a0.jpg","comment_is_top":false,"comment_ctime":1622480374,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100046401,"comment_content":"https:&#47;&#47;shimo.im&#47;mindmaps&#47;t9hxgj6RXc9CyC69&#47; 《13.AI 项目部署：基本原则》","like_count":1},{"had_liked":false,"id":185508,"user_name":"人工智能混饭人","can_delete":false,"product_type":"c3","uid":1104354,"ip_address":"","ucode":"71CF953311BD81","user_header":"https://static001.geekbang.org/account/avatar/00/10/d9/e2/d75009ef.jpg","comment_is_top":false,"comment_ctime":1583595571,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100046401,"comment_content":"推断时，只用一个进程。这个还蛮长知识了，天下没有免费的午餐，牺牲一些性能去避免显存污染和cache miss👏","like_count":1},{"had_liked":false,"id":245381,"user_name":"yangguixiu18","can_delete":false,"product_type":"c3","uid":1887688,"ip_address":"","ucode":"D8D181457554AD","user_header":"https://static001.geekbang.org/account/avatar/00/1c/cd/c8/848f8006.jpg","comment_is_top":false,"comment_ctime":1598928656,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100046401,"comment_content":"老师好，想请教一个问题，做ner的时候，如果需要抽取的文本信息普遍过长，预测时发现这样的类型到取到一半就断掉了，怎么处理呢","like_count":0},{"had_liked":false,"id":185956,"user_name":"Geek_t54cpa","can_delete":false,"product_type":"c3","uid":1898841,"ip_address":"","ucode":"B0E7F2F0920E89","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEKahyic3vdQkOy5df8EMXy3W6HQibxyVsibMvxKAPV4BzD6CdGsMOC6KTiaeNO8vYiaJctZpbGj8XdXEIg/132","comment_is_top":false,"comment_ctime":1583730887,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100046401,"comment_content":"希望老师能按立的flag都讲完，因为真的收货很多，谢谢","like_count":0}]}