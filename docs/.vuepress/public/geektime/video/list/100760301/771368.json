{"id":771368,"title":"25｜可托管部署的代码插件","content":"","comments":[{"had_liked":false,"id":393124,"user_name":"vsdog","can_delete":false,"product_type":"c3","uid":1011047,"ip_address":"北京","ucode":"832F78D98DF386","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6d/67/eb820e4a.jpg","comment_is_top":false,"comment_ctime":1722926859,"is_pvip":false,"replies":[{"id":142811,"content":"如果用人设与回复逻辑实在无法解决的话，可以在工作流中强制使用这个插件。","user_name":"作者回复","user_name_real":"编辑","uid":1224950,"ctime":1723134471,"ip_address":"北京","comment_id":393124,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100760301,"comment_content":"在插件设置页面运行时，能获取接口中的信息，但是到了bot中，添加了插件，询问相关内容时都无法返回准确的信息，要么是幻觉产生的结果，要么就是“对不起....”。请问是什么情况，可以怎么解决？\nbot中的“人设与回复逻辑”，一开始是按照老师写的方式；后来ai优化了；还指明了具体调用插件的名称等等信息，都无法正确回复。","like_count":1,"discussions":[{"author":{"id":1224950,"avatar":"https://static001.geekbang.org/account/avatar/00/12/b0/f6/e0b0dcb9.jpg","nickname":"郭旭","note":"","ucode":"7CC6787BD0F0A9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":649316,"discussion_content":"如果用人设与回复逻辑实在无法解决的话，可以在工作流中强制使用这个插件。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1723134471,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1246887,"avatar":"https://static001.geekbang.org/account/avatar/00/13/06/a7/27b08dc8.jpg","nickname":"尹口原一","note":"","ucode":"870D62509F8D5E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":654773,"discussion_content":"原因找到了，主要是因为调用api4返回的Json中是中文KEY,如下所示：\n{&#34;message&#34;:{&#34;索引字段&#34;:&#34;F课程、G课程&#34;,&#34;课程运营信息&#34;:{&#34;F课程&#34;:{&#34;上线时长&#34;:&#34;3年&#34;,&#34;好评率&#34;:&#34;98%&#34;,&#34;定价&#34;:&#34;99元&#34;,&#34;销量&#34;:15324},&#34;G课程&#34;:{&#34;上线时长&#34;:&#34;1年&#34;,&#34;好评率&#34;:&#34;97.5%&#34;,&#34;定价&#34;:&#34;129元&#34;,&#34;销量&#34;:355}}}}\n而Coze中是不支持Json中文KEY的，写一个将中文KEY转换为英文KEY的方法就解决了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1733399306,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"江苏","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":390658,"user_name":"旅梦开发团","can_delete":false,"product_type":"c3","uid":1622373,"ip_address":"江西","ucode":"B8A284C955B8CD","user_header":"https://static001.geekbang.org/account/avatar/00/18/c1/65/2fb5c4ce.jpg","comment_is_top":false,"comment_ctime":1715904120,"is_pvip":false,"replies":[{"id":142110,"content":"返回结果是{}，需要确认代码逻辑是否正常，插件的试运行是否能获取到数据呢？您目前提供的信息比较少，可以考虑加群提问哈。","user_name":"作者回复","user_name_real":"编辑","uid":1224950,"ctime":1716174760,"ip_address":"北京","comment_id":390658,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100760301,"comment_content":"返回结果为空 查询到返回结果是{}。  不知道为啥","like_count":0,"discussions":[{"author":{"id":1224950,"avatar":"https://static001.geekbang.org/account/avatar/00/12/b0/f6/e0b0dcb9.jpg","nickname":"郭旭","note":"","ucode":"7CC6787BD0F0A9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":645443,"discussion_content":"返回结果是{}，需要确认代码逻辑是否正常，插件的试运行是否能获取到数据呢？您目前提供的信息比较少，可以考虑加群提问哈。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1716174760,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":390308,"user_name":"MiracleWong","can_delete":false,"product_type":"c3","uid":1012816,"ip_address":"浙江","ucode":"05233774710AFE","user_header":"https://static001.geekbang.org/account/avatar/00/0f/74/50/59d429c9.jpg","comment_is_top":false,"comment_ctime":1715062560,"is_pvip":false,"replies":[{"id":141951,"content":"同学非常努力，给你点赞。\n问题1，我已经向官方反馈了这个情况，官方回复：已了解，会进行优化。\n问题2，我刚才实际测试了下插件调用，能够正常返回结果。您这个情况在留言里不太好排查问题，您可以到咱们课程的“课程介绍”页面里找到【专栏交流群】，您可以进这个交流群提问哈。","user_name":"作者回复","user_name_real":"编辑","uid":1224950,"ctime":1715156142,"ip_address":"北京","comment_id":390308,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100760301,"comment_content":"测试时间：2024-5-7 14:12\n1. 课程中提到的Coze IDE 上的【测试代码】输入参数的Bug，依旧存在，需要人工复制参数过去。\n2. 遇到问题：代码和老师的代码一致，使用的是老师提供的：http:&#47;&#47;test.demo.insideria.vip&#47;api4  在【托管插件】页面，点击【运行】后，可以获取相关的返回结果。但是在Bots中调用时，则无任何返回结果。就显示如下内容：\n\nPython3托管部署的插件.get_api_result\nRequest\n{&quot;name&quot;:&quot;ts-Python3tuoguanbushudechajian-get_api_result&quot;,&quot;arguments&quot;:{},&quot;plugin_id&quot;:7366068664702959651,&quot;api_id&quot;:7366068762753384511,&quot;plugin_type&quot;:1}\n\nResponse\n{}","like_count":0,"discussions":[{"author":{"id":1224950,"avatar":"https://static001.geekbang.org/account/avatar/00/12/b0/f6/e0b0dcb9.jpg","nickname":"郭旭","note":"","ucode":"7CC6787BD0F0A9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":644292,"discussion_content":"同学非常努力，给你点赞。\n问题1，我已经向官方反馈了这个情况，官方回复：已了解，会进行优化。\n问题2，我刚才实际测试了下插件调用，能够正常返回结果。您这个情况在留言里不太好排查问题，您可以到咱们课程的“课程介绍”页面里找到【专栏交流群】，您可以进这个交流群提问哈。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1715156143,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]}]}