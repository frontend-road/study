{"id":248883,"title":"20 | è®¾è®¡æ¨¡å¼ï¼ˆä¸‹ï¼‰ï¼šC++æ˜¯æ€ä¹ˆåº”ç”¨è®¾è®¡æ¨¡å¼çš„ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯Chronoã€‚</p><p>ä¸ŠèŠ‚è¯¾ï¼Œæˆ‘è°ˆäº†è®¾è®¡æ¨¡å¼å’Œè®¾è®¡åŸåˆ™ã€‚ä»Šå¤©ï¼Œæˆ‘å°±å…·ä½“è¯´è¯´ï¼Œåœ¨C++é‡Œï¼Œè¯¥æ€ä¹ˆåº”ç”¨å•ä»¶ã€å·¥å‚ã€é€‚é…å™¨ã€ä»£ç†ã€èŒè´£é“¾ç­‰è¿™äº›ç»å…¸çš„è®¾è®¡æ¨¡å¼ï¼Œç”¨åˆ°çš„æœ‰call_once()ã€make_unique()ã€async()ç­‰C++å·¥å…·ï¼Œå¸Œæœ›èƒ½å¤Ÿç»™ä½ ä¸€äº›åœ¨å®é™…ç¼–ç æ—¶çš„å¯å‘ã€‚</p><p>ï¼ˆåœ¨æ¥ä¸‹æ¥å­¦çš„æ—¶å€™ï¼Œä½ ä¹Ÿå¯ä»¥åŒæ—¶æ€è€ƒä¸€ä¸‹å®ƒä»¬éƒ½ç¬¦åˆå“ªäº›è®¾è®¡åŸåˆ™ï¼ŒæŠŠè®¾è®¡æ¨¡å¼å’Œè®¾è®¡åŸåˆ™ç»“åˆèµ·æ¥å­¦ä¹ ã€‚ï¼‰</p><h2>åˆ›å»ºå‹æ¨¡å¼</h2><p>é¦–å…ˆæ¥çœ‹çœ‹åˆ›å»ºå‹æ¨¡å¼ï¼Œ<strong>å®ƒéšè—äº†ç±»çš„å®ä¾‹åŒ–è¿‡ç¨‹å’Œç»†èŠ‚ï¼Œè®©å¯¹è±¡çš„åˆ›å»ºç‹¬ç«‹äºç³»ç»Ÿçš„å…¶ä»–éƒ¨åˆ†</strong>ã€‚</p><p>åˆ›å»ºå‹æ¨¡å¼ä¸å¤šï¼Œä¸€å…±æœ‰5ä¸ªï¼Œæˆ‘è§‰å¾—æœ€æœ‰ç”¨çš„æ˜¯<strong>å•ä»¶å’Œå·¥å‚</strong>ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/9e/34/9e859a3bba338b1c4eff565d87a63834.jpg?wh=2250*2442\" alt=\"\"></p><p>å•ä»¶å¾ˆç®€å•ï¼Œè¦ç‚¹åœ¨äºæ§åˆ¶å¯¹è±¡çš„åˆ›å»ºæ•°é‡ï¼Œåªèƒ½æœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå°±åƒæ˜¯å…¬å¸çš„CEOä¸€æ ·ï¼Œæœ‰ä¸”å”¯ä¸€ã€‚</p><p>å…³äºå®ƒçš„ä½¿ç”¨æ–¹å¼ã€åº”ç”¨åœºæ™¯ï¼Œå­˜åœ¨ç€ä¸€äº›äº‰è®®ï¼Œä½†æˆ‘ä¸ªäººè§‰å¾—ï¼Œå®ƒå¾ˆå¥½åœ°ä½“ç°äº†è®¾è®¡æ¨¡å¼çš„åŸºæœ¬æ€æƒ³ï¼Œè¶³å¤Ÿç®€å•ï¼Œå¯ä»¥ä½œä¸ºèŒƒä¾‹ï¼Œç”¨æ¥å¥½å¥½å­¦ä¹ æ¨¡å¼é‡Œçš„å„ä¸ªè¦ç´ ã€‚</p><p>å…³äºå•ä»¶æ¨¡å¼ï¼Œä¸€ä¸ªâ€œè€ç”Ÿå¸¸è°ˆâ€çš„è¯é¢˜æ˜¯â€œåŒé‡æ£€æŸ¥é”å®šâ€ï¼Œä½ å¯èƒ½ä¹Ÿæœ‰æ‰€äº†è§£ï¼Œå®ƒå¯ä»¥ç”¨æ¥é¿å…åœ¨å¤šçº¿ç¨‹ç¯å¢ƒé‡Œå¤šæ¬¡åˆå§‹åŒ–å•ä»¶ï¼Œå†™èµ·æ¥ç‰¹åˆ«ç¹çã€‚</p><p>ä½¿ç”¨<a href=\"https://time.geekbang.org/column/article/245259\">ç¬¬14è®²</a>é‡Œæåˆ°çš„call_onceï¼Œå¯ä»¥å¾ˆè½»æ¾åœ°è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½†å¦‚æœä½ æƒ³è¦æ›´çœäº‹çš„è¯ï¼Œå…¶å®åœ¨C++é‡Œè¿˜æœ‰ä¸€ç§æ–¹æ³•ï¼ˆC++ 11ä¹‹åï¼‰ï¼Œå°±æ˜¯<strong>ç›´æ¥ä½¿ç”¨å‡½æ•°å†…éƒ¨çš„staticé™æ€å˜é‡</strong>ã€‚C++è¯­è¨€ä¼šä¿è¯é™æ€å˜é‡çš„åˆå§‹åŒ–æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œç»å¯¹ä¸ä¼šæœ‰çº¿ç¨‹å†²çªã€‚æ¯”å¦‚ï¼š</p><!-- [[[read_end]]] --><pre><code>auto&amp; instance()    // ç”Ÿäº§å•ä»¶å¯¹è±¡çš„å‡½æ•°\n{\n  static T obj;     // é™æ€å˜é‡\n  return obj;       // è¿”å›å¯¹è±¡çš„å¼•ç”¨\n}\n</code></pre><p>è¯´å®Œäº†å•ä»¶ï¼Œå†æ¥çœ‹å·¥å‚æ¨¡å¼å§ã€‚</p><p>å·¥å‚æ¨¡å¼æ˜¯æˆ‘ä¸ªäººçš„â€œç¬¼ç»Ÿâ€è¯´æ³•ï¼ŒæŒ‡çš„æ˜¯æŠ½è±¡å·¥å‚ã€å·¥å‚æ–¹æ³•è¿™ä¸¤ä¸ªæ¨¡å¼ï¼Œå› ä¸ºå®ƒä»¬å°±åƒæ˜¯ç°å®ä¸–ç•Œé‡Œçš„å·¥å‚ä¸€æ ·ï¼Œä¸“é—¨ç”¨æ¥ç”Ÿäº§å¯¹è±¡ã€‚</p><p>æŠ½è±¡å·¥å‚æ˜¯ä¸€ä¸ªç±»ï¼Œè€Œå·¥å‚æ–¹æ³•æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œåœ¨çº¯é¢å‘å¯¹è±¡èŒƒå¼é‡Œï¼Œä¸¤è€…çš„åŒºåˆ«å¾ˆå¤§ã€‚è€ŒC++æ”¯æŒæ³›å‹ç¼–ç¨‹ï¼Œä¸éœ€è¦ç‰¹æ„æ´¾ç”Ÿå‡ºå­ç±»ï¼Œåªè¦æ¥å£ç›¸åŒå°±è¡Œï¼Œæ‰€ä»¥ï¼Œè¿™ä¸¤ä¸ªæ¨¡å¼åœ¨C++é‡Œç”¨èµ·æ¥ä¹Ÿå°±æ›´è‡ªç”±ä¸€äº›ï¼Œç•Œé™æ¯”è¾ƒæ¨¡ç³Šã€‚</p><p>ä¸ºä»€ä¹ˆéè¦ç”¨å·¥å‚æ¥åˆ›å»ºå¯¹è±¡å‘¢ï¼Ÿè¿™æ ·åšçš„å¥½å¤„åœ¨å“ªé‡Œå‘¢ï¼Ÿ</p><p>æˆ‘è§‰å¾—ï¼Œä½ å¯ä»¥ç”¨DRYï¼ˆDonâ€™t Repeate Yourselfï¼‰åŸåˆ™æ¥ç†è§£ï¼Œä¹Ÿå°±æ˜¯è¯´å°½é‡é¿å…é‡å¤çš„ä»£ç ï¼Œç®€å•åœ°è®¤ä¸ºå®ƒå°±æ˜¯â€œ<strong>å¯¹newçš„å°è£…</strong>â€ã€‚</p><p>æƒ³è±¡ä¸€ä¸‹ï¼Œå¦‚æœç¨‹åºé‡Œåˆ°å¤„éƒ½æ˜¯â€œç¡¬ç¼–ç â€çš„newï¼Œä¸€æ—¦è®¾è®¡å‘ç”Ÿå˜åŠ¨ï¼Œæ¯”å¦‚è¯´æŠŠâ€œnew è‹¹æœâ€æ”¹æˆâ€œnew æ¢¨å­â€ï¼Œä½ å°±éœ€è¦æŠŠä»£ç é‡Œæ‰€æœ‰å‡ºç°newçš„åœ°æ–¹éƒ½æ”¹ä¸€éï¼Œä¸ä»…éº»çƒ¦ï¼Œè€Œä¸”å¾ˆå®¹æ˜“é—æ¼ï¼Œç”šè‡³æ˜¯å‡ºé”™ã€‚</p><p>å¦‚æœæŠŠnewç”¨å·¥å‚å°è£…èµ·æ¥ï¼Œå°±å½¢æˆäº†ä¸€ä¸ªâ€œä¸­é—´å±‚â€ï¼Œéš”ç¦»äº†å®¢æˆ·ä»£ç å’Œåˆ›å»ºå¯¹è±¡ï¼Œä¸¤è¾¹åªèƒ½é€šè¿‡å·¥å‚äº¤äº’ï¼Œå½¼æ­¤ä¸çŸ¥æƒ…ï¼Œä¹Ÿå°±å®ç°äº†è§£è€¦ï¼Œç”±ä¹‹å‰çš„å¼ºè”ç³»è½¬å˜æˆäº†å¼±è”ç³»ã€‚æ‰€ä»¥ï¼Œä½ å°±å¯ä»¥åœ¨å·¥å‚æ¨¡å¼é‡Œæ‹¥æœ‰å¯¹è±¡çš„â€œç”Ÿæ€å¤§æƒâ€ï¼Œéšæ„æ§åˆ¶ç”Ÿäº§çš„æ–¹å¼ã€ç”Ÿäº§çš„æ—¶æœºã€ç”Ÿäº§çš„å†…å®¹ã€‚</p><p>åœ¨<a href=\"https://time.geekbang.org/column/article/239580\">ç¬¬8è®²</a>é‡Œè¯´åˆ°çš„make_unique()ã€make_shared()è¿™ä¸¤ä¸ªå‡½æ•°ï¼Œå°±æ˜¯å·¥å‚æ¨¡å¼çš„å…·ä½“åº”ç”¨ï¼Œå®ƒä»¬å°è£…äº†åˆ›å»ºçš„ç»†èŠ‚ï¼Œçœ‹ä¸è§newï¼Œç›´æ¥è¿”å›æ™ºèƒ½æŒ‡é’ˆå¯¹è±¡ï¼Œè€Œä¸”æ¥å£æ›´ç®€æ´ï¼Œå†…éƒ¨æœ‰æ›´å¤šçš„ä¼˜åŒ–ã€‚</p><pre><code>auto ptr1 = make_unique&lt;int&gt;(42);\nauto ptr2 = make_shared&lt;string&gt;(&quot;metroid&quot;);\n</code></pre><p>è¿˜æœ‰ä¹‹å‰è¯¾ç¨‹é‡Œçš„ç”¨å‡½æ•°æŠ›å‡ºå¼‚å¸¸ï¼ˆ<a href=\"https://time.geekbang.org/column/article/240292\">ç¬¬9è®²</a>ï¼‰ã€åˆ›å»ºæ­£åˆ™å¯¹è±¡ï¼ˆ<a href=\"https://time.geekbang.org/column/article/242603\">ç¬¬11è®²</a>ï¼‰ã€åˆ›å»ºLuaè™šæ‹Ÿæœºï¼ˆ<a href=\"https://time.geekbang.org/column/article/245905\">ç¬¬17è®²</a>ï¼‰ï¼Œå…¶å®ä¹Ÿéƒ½æ˜¯åº”ç”¨äº†å·¥å‚æ¨¡å¼ã€‚è¿™äº›ä½ å¯ä»¥ç»“åˆè¯¾ç¨‹çš„å…·ä½“å†…å®¹ï¼Œå†å›é¡¾ä¸€ä¸‹ï¼Œæˆ‘å°±ä¸å¤šè¯´äº†ã€‚</p><p>ä½¿ç”¨å·¥å‚æ¨¡å¼çš„å…³é”®ï¼Œå°±æ˜¯<strong>è¦ç†è§£å®ƒé¢å¯¹çš„é—®é¢˜å’Œè§£å†³é—®é¢˜çš„æ€è·¯</strong>ï¼Œæ¯”å¦‚è¯´åˆ›å»ºä¸“å±çš„å¯¹è±¡ã€åˆ›å»ºæˆå¥—çš„å¯¹è±¡ï¼Œé‡ç‚¹æ˜¯â€œå¦‚ä½•åˆ›å»ºå¯¹è±¡ã€åˆ›å»ºå‡ºä»€ä¹ˆæ ·çš„å¯¹è±¡â€ï¼Œç”¨å‡½æ•°æˆ–è€…ç±»ä¼šæ¯”å•çº¯ç”¨newæ›´çµæ´»ã€‚</p><h2>ç»“æ„å‹æ¨¡å¼</h2><p>æ¥ä¸‹æ¥è¯´è¯´ç»“æ„å‹æ¨¡å¼ï¼Œå®ƒå…³æ³¨çš„æ˜¯å¯¹è±¡çš„<strong>é™æ€è”ç³»ï¼Œä»¥çµæ´»ã€å¯æ‹†å¸ã€å¯è£…é…çš„æ–¹å¼ç»„åˆå‡ºæ–°çš„å¯¹è±¡</strong>ã€‚</p><p>è¿™é‡Œä½ è¦æ³¨æ„ç»“æ„å‹æ¨¡å¼çš„é‡è¦ç‰¹ç‚¹ï¼šè™½ç„¶å®ƒä¼šæœ‰å¤šä¸ªå‚ä¸è€…ï¼Œä½†æœ€åå¿…å®šå¾—åˆ°ä¸”ä½¿ç”¨çš„æ˜¯â€œ<strong>ä¸€ä¸ª</strong>â€å¯¹è±¡ï¼Œè€Œä¸æ˜¯â€œå¤šä¸ªâ€å¯¹è±¡ã€‚</p><p>ç»“æ„å‹æ¨¡å¼ä¸€å…±æœ‰7ä¸ªï¼Œå…¶ä¸­ï¼Œæˆ‘è§‰å¾—åœ¨C++é‡Œæ¯”è¾ƒæœ‰ç”¨ã€å¸¸ç”¨çš„æ˜¯<strong>é€‚é…å™¨ã€å¤–è§‚å’Œä»£ç†</strong>ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/0c/38/0c142aa2f536c22008b6e24aa609ce38.jpg?wh=2250*3387\" alt=\"\"></p><p><strong>1.é€‚é…å™¨æ¨¡å¼</strong></p><p>é€‚é…å™¨æ¨¡å¼çš„ç›®çš„æ˜¯æ¥å£è½¬æ¢ï¼Œä¸éœ€è¦ä¿®æ”¹æºç ï¼Œå°±èƒ½å¤ŸæŠŠä¸€ä¸ªå¯¹è±¡è½¬æ¢æˆå¯ä»¥åœ¨æœ¬ç³»ç»Ÿä¸­ä½¿ç”¨çš„å½¢å¼ã€‚</p><p>æ‰“ä¸ªæ¯”æ–¹ï¼Œå°±åƒæ˜¯æ‹¿åˆ°äº†ä¸€ä¸ªè‹±å¼ç”µæºæ’å¤´ï¼Œæ— æ³•æ’åˆ°å›½æ ‡æ’åº§ä¸Šï¼Œä½†ä½ ä¸å¿…æ‹¿å·¥å…·å»æ‹†å¼€æ’å¤´æ”¹é€ ï¼Œåªè¦ä¹°ä¸ªè½¬æ¢å¤´å°±è¡Œã€‚</p><p>é€‚é…å™¨æ¨¡å¼åœ¨C++é‡Œå¤šå‡ºç°åœ¨æœ‰ç¬¬ä¸‰æ–¹åº“æˆ–è€…å¤–éƒ¨æ¥å£çš„æ—¶å€™ï¼Œé€šå¸¸è¿™äº›æ¥å£ä¸ä¼šæ°å¥½ç¬¦åˆæˆ‘ä»¬è‡ªå·±çš„ç³»ç»Ÿï¼ŒåŠŸèƒ½å¾ˆå¥½ï¼Œä½†ä¸èƒ½ç›´æ¥ç”¨ï¼Œæƒ³æ”¹æºç å¾ˆéš¾ï¼Œç”šè‡³æ˜¯ä¸å¯èƒ½çš„ã€‚æ‰€ä»¥ï¼Œå°±éœ€è¦ç”¨é€‚é…å™¨æ¨¡å¼ç»™â€œé€‚é…â€ä¸€ä¸‹ï¼Œè®©å¤–éƒ¨å·¥å…·èƒ½å¤Ÿâ€œmatchâ€æˆ‘ä»¬çš„ç³»ç»Ÿï¼Œè€Œä¸¤è¾¹éƒ½ä¸éœ€è¦å˜åŠ¨ï¼Œâ€œçš†å¤§æ¬¢å–œâ€ã€‚</p><p>è¿˜è®°å¾—<a href=\"https://time.geekbang.org/column/article/243319\">ç¬¬12è®²</a>é‡Œçš„å®¹å™¨arrayå—ï¼Ÿå®ƒå°±æ˜¯ä¸€ä¸ªé€‚é…å™¨ï¼ŒåŒ…è£…äº†C++çš„åŸç”Ÿæ•°ç»„ï¼Œè½¬æ¢æˆäº†å®¹å™¨çš„å½¢å¼ï¼Œè®©â€œè£¸å†…å­˜æ•°æ®â€ä¹Ÿå¯ä»¥æ¥å…¥æ ‡å‡†åº“çš„æ³›å‹ä½“ç³»ã€‚</p><pre><code>array&lt;int, 5&gt; arr = {0,1,2,3,4};\n\nauto b = begin(arr);\nauto e = end(arr);\n\nfor_each(b, e, [](int x){...});\n</code></pre><p><strong>2.å¤–è§‚æ¨¡å¼</strong></p><p>å†æ¥çœ‹å¤–è§‚æ¨¡å¼ï¼Œå®ƒå°è£…äº†ä¸€ç»„å¯¹è±¡ï¼Œç›®çš„æ˜¯ç®€åŒ–è¿™ç»„å¯¹è±¡çš„é€šä¿¡å…³ç³»ï¼Œæä¾›ä¸€ä¸ªé«˜å±‚æ¬¡çš„æ˜“ç”¨æ¥å£ï¼Œè®©å¤–éƒ¨ç”¨æˆ·æ›´å®¹æ˜“ä½¿ç”¨ï¼Œé™ä½ç³»ç»Ÿçš„å¤æ‚åº¦ã€‚</p><p>å¤–è§‚æ¨¡å¼çš„ç‰¹ç‚¹æ˜¯å†…éƒ¨ä¼šæ“ä½œå¾ˆå¤šå¯¹è±¡ï¼Œç„¶åå¯¹å¤–è¡¨ç°æˆä¸€ä¸ªå¯¹è±¡ã€‚ä½¿ç”¨å®ƒçš„è¯ï¼Œä½ å°±å¯ä»¥ä¸ç”¨â€œäº‹å¿…èº¬äº²â€äº†ï¼Œåªè¦å‘ä¸€ä¸ªæŒ‡ä»¤ï¼Œåé¢çš„æ‚äº‹å°±éƒ½ç”±å®ƒä»£åŠ³äº†ï¼Œå°±åƒæ˜¯ä¸€ä¸ªâ€œå¤§ç®¡å®¶â€ã€‚</p><p>ä¸è¿‡è¦æ³¨æ„ï¼Œå¤–è§‚æ¨¡å¼å¹¶ä¸ç»å¯¹æ§åˆ¶ã€å±è”½å†…éƒ¨åŒ…è£…çš„é‚£äº›å¯¹è±¡ã€‚å¦‚æœä½ è§‰å¾—å¤–è§‚ä¸å¥½ç”¨ï¼Œå®Œå…¨å¯ä»¥è¶Šè¿‡å®ƒï¼Œè‡ªå·±â€œæ·±å…¥åŸºå±‚â€ï¼Œå»å®ç°å¤–è§‚æ²¡æœ‰æä¾›çš„åŠŸèƒ½ã€‚</p><p>ç¬¬14è®²é‡Œæåˆ°çš„å‡½æ•°async()å°±æ˜¯å¤–è§‚æ¨¡å¼çš„ä¸€ä¸ªä¾‹å­ï¼Œå®ƒå°è£…äº†çº¿ç¨‹çš„åˆ›å»ºã€è°ƒåº¦ç­‰ç»†èŠ‚ï¼Œç”¨èµ·æ¥å¾ˆç®€å•ï¼Œä½†ä¹Ÿä¸æ’æ–¥ä½ ç›´æ¥ä½¿ç”¨threadã€mutexç­‰åº•å±‚çº¿ç¨‹å·¥å…·ã€‚</p><pre><code>auto f = std::async([](){...});\nf.wait();\n</code></pre><p><strong>3.ä»£ç†æ¨¡å¼</strong></p><p>å®ƒå’Œé€‚é…å™¨æœ‰ç‚¹åƒï¼Œéƒ½æ˜¯åŒ…è£…ä¸€ä¸ªå¯¹è±¡ï¼Œä½†å…³é”®åœ¨äºå®ƒä»¬çš„ç›®çš„ã€æ„å›¾æœ‰å·®å¼‚ï¼šä¸æ˜¯ä¸ºäº†é€‚é…æ’å…¥ç³»ç»Ÿï¼Œè€Œæ˜¯è¦â€œæ§åˆ¶â€å¯¹è±¡ï¼Œä¸å…è®¸å¤–éƒ¨ç›´æ¥ä¸å†…éƒ¨å¯¹è±¡é€šä¿¡ï¼Œæ‰€ä»¥å«ä½œâ€œä»£ç†â€ã€‚</p><p>ä»£ç†æ¨¡å¼çš„åº”ç”¨éå¸¸å¹¿æ³›ï¼Œå¦‚æœä½ æƒ³é™åˆ¶ã€å±è”½ã€éšè—ã€å¢å¼ºæˆ–è€…ä¼˜åŒ–ä¸€ä¸ªç±»ï¼Œå°±å¯ä»¥ä½¿ç”¨ä»£ç†ã€‚è¿™æ ·ï¼Œå®¢æˆ·ä»£ç çœ‹åˆ°çš„åªæ˜¯ä»£ç†å¯¹è±¡ï¼Œä¸çŸ¥é“åŸå§‹å¯¹è±¡ï¼ˆè¢«ä»£ç†çš„å¯¹è±¡ï¼‰æ˜¯ä»€ä¹ˆæ ·ï¼Œåªèƒ½ç”¨ä»£ç†å¯¹è±¡ç»™å‡ºçš„æ¥å£ï¼Œè¿™æ ·å°±å®ç°äº†æ§åˆ¶çš„ç›®çš„ã€‚</p><p>ä»£ç†åœ¨C++é‡Œçš„ä¸€ä¸ªå…¸å‹åº”ç”¨å°±æ˜¯æ™ºèƒ½æŒ‡é’ˆï¼ˆ<a href=\"https://time.geekbang.org/column/article/239580\">ç¬¬8è®²</a>ï¼‰ï¼Œå®ƒæ¥ç®¡äº†åŸå§‹æŒ‡é’ˆï¼Œé™åˆ¶äº†æŸäº›å±é™©æ“ä½œï¼Œå¹¶ä¸”æ·»åŠ äº†è‡ªåŠ¨ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼Œè™½ç„¶å°‘äº†äº›è‡ªç”±ï¼Œä½†è·å¾—äº†æ›´å¤šçš„å®‰å…¨ã€‚</p><h2>è¡Œä¸ºæ¨¡å¼</h2><p>çœ‹å®Œäº†é€‚é…å™¨ã€å¤–è§‚å’Œä»£ç†è¿™ä¸‰ä¸ªç»“æ„å‹æ¨¡å¼ï¼Œå†æ¥çœ‹è¡Œä¸ºæ¨¡å¼ï¼Œ<strong>å®ƒæè¿°äº†å¯¹è±¡ä¹‹é—´åŠ¨æ€çš„æ¶ˆæ¯ä¼ é€’ï¼Œä¹Ÿå°±æ˜¯å¯¹è±¡çš„â€œè¡Œä¸ºâ€ã€å·¥ä½œçš„æ–¹å¼</strong>ã€‚</p><p>è¡Œä¸ºæ¨¡å¼æ¯”è¾ƒå¤šï¼Œæœ‰11ä¸ªï¼Œè¿™æ˜¯å› ä¸ºï¼Œé¢å‘å¯¹è±¡çš„è®¾è®¡æ›´æ³¨é‡è¿è¡Œæ—¶çš„ç»„åˆï¼Œæ¯”é™æ€çš„ç»„åˆæ›´èƒ½å¢åŠ ç³»ç»Ÿçš„çµæ´»æ€§å’Œå¯æ‰©å±•æ€§ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/ba/2e/ba02d02ec2cac0adf60342fa3054312e.jpg?wh=2188*3387\" alt=\"\"></p><p>å› ä¸ºè¡Œä¸ºæ¨¡å¼éƒ½æ˜¯åœ¨è¿è¡Œæ—¶æ‰å»ºç«‹è”ç³»ï¼Œæ‰€ä»¥é€šå¸¸éƒ½å¾ˆå¤æ‚ï¼Œä¸å¤ªå¥½ç†è§£å¯¹è±¡ä¹‹é—´çš„å…³ç³»å’Œé€šä¿¡æœºåˆ¶ã€‚</p><p>æˆ‘è§‰å¾—æ¯”è¾ƒéš¾ç”¨ï¼Œæˆ–è€…è¯´æ˜¯è¦å°½é‡é¿å…ä½¿ç”¨çš„æ¨¡å¼æœ‰è§£é‡Šå™¨å’Œä¸­ä»‹è€…ï¼Œå®ƒä»¬çš„ç»“æ„æ¯”è¾ƒéš¾æ‡‚ï¼Œä¼šå¢åŠ ç³»ç»Ÿçš„å¤æ‚åº¦ã€‚è€Œæ¯”è¾ƒå®¹æ˜“ç†è§£ã€å®¹æ˜“ä½¿ç”¨çš„æœ‰<strong>èŒè´£é“¾ã€å‘½ä»¤å’Œç­–ç•¥</strong>ï¼Œæ‰€ä»¥æˆ‘é‡ç‚¹è¯´è¯´å®ƒä»¬ã€‚</p><p>èŒè´£é“¾å’Œå‘½ä»¤è¿™ä¸¤ä¸ªæ¨¡å¼ç»å¸¸è”åˆèµ·æ¥ä½¿ç”¨ã€‚èŒè´£é“¾æŠŠå¤šä¸ªå¯¹è±¡ä¸²æˆä¸€ä¸ªâ€œé“¾æ¡â€ï¼Œè®©é“¾æ¡é‡Œçš„æ¯ä¸ªå¯¹è±¡éƒ½æœ‰æœºä¼šå»å¤„ç†è¯·æ±‚ã€‚è€Œè¯·æ±‚é€šå¸¸ä½¿ç”¨çš„æ˜¯å‘½ä»¤æ¨¡å¼ï¼ŒæŠŠç›¸å…³çš„æ•°æ®æ‰“åŒ…æˆä¸€ä¸ªå¯¹è±¡ï¼Œè§£è€¦è¯·æ±‚çš„å‘é€æ–¹å’Œæ¥æ”¶æ–¹ã€‚</p><p>å…¶å®ï¼Œä½ ä»”ç»†æƒ³ä¸€ä¸‹å°±ä¼šå‘ç°ï¼ŒC++çš„å¼‚å¸¸å¤„ç†æœºåˆ¶ï¼ˆ<a href=\"https://time.geekbang.org/column/article/240292\">ç¬¬9è®²</a>ï¼‰å°±æ˜¯â€œèŒè´£é“¾+å‘½ä»¤â€çš„ä¸€ä¸ªå®é™…åº”ç”¨ã€‚</p><p>åœ¨å¼‚å¸¸å¤„ç†çš„è¿‡ç¨‹ä¸­ï¼Œå¼‚å¸¸ç±»exceptionå°±æ˜¯ä¸€ä¸ªå‘½ä»¤å¯¹è±¡ï¼ŒthrowæŠ›å‡ºå¼‚å¸¸å°±æ˜¯å‘èµ·äº†ä¸€ä¸ªè¯·æ±‚å¤„ç†æµç¨‹ã€‚è€Œä¸€ç³»åˆ—çš„try-catchå—å°±æ„æˆäº†å¤„ç†å¼‚å¸¸çš„èŒè´£é“¾ï¼Œå¼‚å¸¸ä¼šè‡ªä¸‹è€Œä¸Šåœ°èµ°è¿‡å‡½æ•°è°ƒç”¨æ ˆâ€”â€”ä¹Ÿå°±æ˜¯èŒè´£é“¾ï¼Œç›´åˆ°åœ¨é“¾æ¡ä¸­æ‰¾åˆ°ä¸€ä¸ªèƒ½å¤Ÿå¤„ç†çš„catchå—ã€‚</p><p>ç­–ç•¥æ¨¡å¼çš„è¦ç‚¹æ˜¯â€œç­–ç•¥â€è¿™ä¸¤ä¸ªå­—ï¼Œå®ƒå°è£…äº†ä¸åŒçš„ç®—æ³•ï¼Œå¯ä»¥åœ¨è¿è¡Œçš„æ—¶å€™çµæ´»åœ°äº’ç›¸æ›¿æ¢ï¼Œä»è€Œåœ¨å¤–éƒ¨â€œéä¾µå…¥â€åœ°æ”¹å˜ç³»ç»Ÿçš„è¡Œä¸ºå†…æ ¸ã€‚</p><p>ç­–ç•¥æ¨¡å¼æœ‰ç‚¹åƒè£…é¥°æ¨¡å¼å’ŒçŠ¶æ€æ¨¡å¼ï¼Œä½ å¯ä¸è¦å¼„æ··äº†ã€‚è·Ÿå®ƒä»¬ç›¸æ¯”ï¼Œç­–ç•¥æ¨¡å¼çš„çš„ç‰¹ç‚¹æ˜¯ä¸ä¼šæ”¹å˜ç±»çš„å¤–éƒ¨è¡¨ç°å’Œå†…éƒ¨çŠ¶æ€ï¼Œåªæ˜¯åŠ¨æ€æ›¿æ¢ä¸€ä¸ªå¾ˆå°çš„ç®—æ³•åŠŸèƒ½æ¨¡å—ã€‚</p><p>å‰é¢è®²è¿‡çš„å®¹å™¨å’Œç®—æ³•ç”¨åˆ°çš„æ¯”è¾ƒå‡½æ•°ã€æ•£åˆ—å‡½æ•°ï¼Œè¿˜æœ‰for_eachç®—æ³•é‡Œçš„lambdaè¡¨è¾¾å¼ï¼Œå®ƒä»¬éƒ½å¯ä»¥ç®—æ˜¯ç­–ç•¥æ¨¡å¼çš„å…·ä½“åº”ç”¨ã€‚</p><p>å¦å¤–ï¼Œç­–ç•¥æ¨¡å¼ä¹Ÿéå¸¸é€‚åˆåº”ç”¨åœ¨æœ‰if-else/switch-caseè¿™æ ·â€œåˆ†æ”¯å†³ç­–â€çš„ä»£ç é‡Œï¼Œä½ å¯ä»¥æŠŠæ¯ä¸ªåˆ†æ”¯é€»è¾‘éƒ½å°è£…æˆç±»æˆ–è€…lambdaè¡¨è¾¾å¼ï¼Œå†æŠŠå®ƒä»¬å­˜è¿›å®¹å™¨ï¼Œè®©å®¹å™¨æ¥å¸®ä½ æŸ¥æ‰¾æœ€åˆé€‚çš„å¤„ç†ç­–ç•¥ã€‚</p><h2>å°ç»“</h2><p>å¥½äº†ï¼Œä»Šå¤©è¯´äº†å‡ ä¸ªæˆ‘ä¸ªäººè®¤ä¸ºæ¯”è¾ƒé‡è¦çš„æ¨¡å¼ï¼Œè¿˜åˆ—å‡ºäº†C++é‡Œçš„å…·ä½“ä¾‹å­ï¼Œä¸¤è€…äº’ç›¸å‚ç…§ï¼Œä½ å°±èƒ½æ›´å¥½åœ°ç†è§£è®¾è®¡æ¨¡å¼å’ŒC++è¯­è¨€ã€‚æ¥ä¸‹æ¥ä½ å¯ä»¥å»å€Ÿé‰´è¿™äº›ç”¨æ³•ï¼Œå°è¯•çœ‹çœ‹è‡ªå·±ä»¥å‰å†™çš„ç¨‹åºï¼Œæ˜¯ä¸æ˜¯èƒ½åº”ç”¨å·¥å‚ã€é€‚é…å™¨ã€ä»£ç†ã€ç­–ç•¥ç­‰æ¨¡å¼å»é‡æ„ï¼Œè®©ä»£ç æ›´åŠ ä¼˜é›…ã€çµæ´»ã€‚</p><p>å†å°ç»“ä¸€ä¸‹ä»Šå¤©çš„å†…å®¹ï¼š</p><ol>\n<li>åˆ›å»ºå‹æ¨¡å¼é‡Œå¸¸ç”¨çš„æœ‰å•ä»¶å’Œå·¥å‚ï¼Œå°è£…äº†å¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹ï¼Œéš”ç¦»äº†å¯¹è±¡çš„ç”Ÿäº§å’Œä½¿ç”¨ï¼›</li>\n<li>ç»“æ„å‹æ¨¡å¼é‡Œå¸¸ç”¨çš„æœ‰é€‚é…å™¨ã€å¤–è§‚å’Œä»£ç†ï¼Œé€šè¿‡å¯¹è±¡ç»„åˆï¼Œå¾—åˆ°ä¸€ä¸ªæ–°å¯¹è±¡ï¼Œç›®çš„æ˜¯é€‚é…ã€ç®€åŒ–æˆ–è€…æ§åˆ¶ï¼Œéš”ç¦»äº†å®¢æˆ·ä»£ç ä¸åŸå¯¹è±¡çš„æ¥å£ï¼›</li>\n<li>è¡Œä¸ºæ¨¡å¼é‡Œå¸¸ç”¨çš„æœ‰èŒè´£é“¾ã€å‘½ä»¤å’Œç­–ç•¥ï¼Œåªæœ‰åœ¨è¿è¡Œæ—¶æ‰ä¼šå»ºç«‹è”ç³»ï¼Œå°è£…ã€éš”ç¦»äº†ç¨‹åºé‡ŒåŠ¨æ€å˜åŒ–çš„é‚£éƒ¨åˆ†ã€‚</li>\n</ol><p>æŒ‰ç…§è¿™äº›æ¨¡å¼çš„ä½¿ç”¨çš„éš¾æ˜“ç¨‹åº¦ï¼Œæˆ‘åˆç”»äº†ä¸€ä¸ªè¡¨æ ¼ï¼Œä½ å¯ä»¥å¯¹æ¯”ç€çœ‹ä¸€ä¸‹ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/d5/b8/d54086bbbd999eeb3cddc0456b55c8b8.jpg?wh=1896*1003\" alt=\"\"></p><p>ä»Šå¤©è™½ç„¶è¯´äº†ä¸å°‘ï¼Œä½†é™¤äº†è¿™äº›ç»å…¸çš„è®¾è®¡æ¨¡å¼ï¼Œè¿˜æœ‰å¾ˆå¤šå…¶ä»–çš„è®¾è®¡æ¨¡å¼ï¼Œæ¯”å¦‚å¯¹è±¡æ± ã€ç©ºå¯¹è±¡ã€ååº”å™¨ã€å‰æ‘„å™¨ã€åŒ…è£…å¤–è§‚ï¼Œç­‰ç­‰ã€‚</p><p>è™½ç„¶å®ƒä»¬ä¹Ÿæµä¼ æ¯”è¾ƒå¹¿ï¼Œä½†è¿˜ä¸é‚£ä¹ˆâ€œæƒå¨â€ï¼Œç”¨å¾—ä¹Ÿä¸æ˜¯å¾ˆå¤šï¼Œä½ ä¸éœ€è¦é‡ç‚¹æŒæ¡ï¼Œæ‰€ä»¥æˆ‘å°±ä¸å¤šè®²äº†ï¼Œè¯¾ä¸‹ä½ å¯ä»¥å†å»æ‰¾äº›èµ„æ–™å­¦ä¹ ã€‚</p><h2>è¯¾ä¸‹ä½œä¸š</h2><p>æœ€åæ˜¯è¯¾ä¸‹ä½œä¸šæ—¶é—´ï¼Œç»™ä½ ç•™ä¸¤ä¸ªæ€è€ƒé¢˜ï¼š</p><ol>\n<li>ä½ è§‰å¾—åˆ›å»ºå‹æ¨¡å¼æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ</li>\n<li>ä½ èƒ½è¯´ä¸€ä¸‹é€‚é…å™¨ã€å¤–è§‚å’Œä»£ç†è¿™ä¸‰ä¸ªæ¨¡å¼çš„ç›¸åŒç‚¹å’Œä¸åŒç‚¹å—ï¼Ÿ</li>\n</ol><p>æ¬¢è¿åœ¨ç•™è¨€åŒºå†™ä¸‹ä½ çš„æ€è€ƒå’Œç­”æ¡ˆï¼Œå¦‚æœè§‰å¾—ä»Šå¤©çš„å†…å®¹å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼Œä¹Ÿæ¬¢è¿åˆ†äº«ç»™ä½ çš„æœ‹å‹ã€‚æˆ‘ä»¬ä¸‹èŠ‚è¯¾è§ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/41/af/410920dee8bceaadd16e86de520e98af.jpg?wh=2000*1800\" alt=\"\"></p>","neighbors":{"left":{"article_title":"19 | è®¾è®¡æ¨¡å¼ï¼ˆä¸Šï¼‰ï¼šC++ä¸è®¾è®¡æ¨¡å¼æœ‰å•¥å…³ç³»ï¼Ÿ","id":248880},"right":{"article_title":"21 | çŸ¥è¯†ä¸²è®²ï¼ˆä¸Šï¼‰ï¼šå¸¦ä½ å¼€å‘ä¸€ä¸ªä¹¦åº—åº”ç”¨","id":252107}},"comments":[{"had_liked":false,"id":231838,"user_name":"é£","can_delete":false,"product_type":"c1","uid":1444483,"ip_address":"","ucode":"E1CE0825AAF805","user_header":"https://static001.geekbang.org/account/avatar/00/16/0a/83/f916f903.jpg","comment_is_top":false,"comment_ctime":1593784099,"is_pvip":false,"replies":[{"id":"85617","content":"ç†è§£çš„éå¸¸å¯¹ï¼Œè®¾è®¡æ¨¡å¼çš„ä¸€ä¸ªæ ¸å¿ƒæ€æƒ³å°±æ˜¯å¼•å…¥ä¸­é—´å±‚ï¼Œéš”ç¦»å˜åŒ–ï¼Œå°½é‡å‡å°‘ä»£ç çš„å˜åŠ¨ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1593830985,"ip_address":"","comment_id":231838,"utype":1}],"discussion_count":3,"race_medal":0,"score":"87493130019","product_id":100051801,"comment_content":"æœ‰ä¸€ä¸ªæ„Ÿæƒ³ã€‚ã€‚æ‰€æœ‰è®¾è®¡æ¨¡å¼ï¼Œéƒ½æ˜¯ä¸ºäº†éš”ç¦»å˜åŒ–ï¼Œæ‰€è°“çš„è®¾è®¡æ¨¡å¼çš„æ•™ç¨‹å…¶å®åœ¨æ•™æˆ‘ä»¬ï¼š<br>ç¼–ç¨‹æ—¶ï¼Œå“ªäº›åœ°æ–¹è¦æ³¨æ„å˜åŒ–ï¼Œå¦‚ä½•åº”å¯¹å˜åŒ–ã€‚","like_count":21,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":500450,"discussion_content":"ç†è§£çš„éå¸¸å¯¹ï¼Œè®¾è®¡æ¨¡å¼çš„ä¸€ä¸ªæ ¸å¿ƒæ€æƒ³å°±æ˜¯å¼•å…¥ä¸­é—´å±‚ï¼Œéš”ç¦»å˜åŒ–ï¼Œå°½é‡å‡å°‘ä»£ç çš„å˜åŠ¨ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593830985,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1073947,"avatar":"https://static001.geekbang.org/account/avatar/00/10/63/1b/83ac7733.jpg","nickname":"å¿§å¤©å°é¸¡","note":"","ucode":"A1412BDC108FD6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":539441,"discussion_content":"è®¾è®¡æ¨¡å¼ä¸ªäººç†è§£ï¼Œæœ€ä¸»è¦çš„åŠŸèƒ½ï¼Œæ˜¯è®©æˆ‘ä»¬åœ¨å¤æ‚çš„æŠ€æœ¯ä¸ä¸šåŠ¡æµç¨‹é‡Œæ‰¾åˆ°ä¼˜è§£","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639717612,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1630504,"avatar":"https://static001.geekbang.org/account/avatar/00/18/e1/28/0a26566d.jpg","nickname":"å¥•æ¶›_steve","note":"","ucode":"07B39F3C746C3C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":407867,"discussion_content":"è¿™é‡Œè¡¥å……ä¸€ç‚¹ï¼Œé™¤äº†å¦‚ä½•åº”å¯¹å˜åŒ–ï¼Œè®¾è®¡æ¨¡å¼ä¹Ÿæ•™æˆ‘ä»¬å“ªäº›é€‚åˆå†…èšï¼Œä»¥åŠå¦‚ä½•å†…èšã€‚æ¯”å¦‚å¤–è§‚æ¨¡å¼å°±æ˜¯æé«˜å†…èšæ€§çš„ä¸€ç§æ¨¡å¼ã€‚\nç»¼ä¸Šï¼Œè®¾è®¡æ¨¡å¼æ•™æˆ‘ä»¬çš„æ˜¯å“ªäº›åœ°æ–¹å®¹æ˜“è€¦åˆï¼Ÿå¦‚ä½•é™ä½è€¦åˆï¼Ÿå“ªäº›åœ°æ–¹é€‚åˆå†…èšï¼Œå¦‚ä½•æé«˜å†…èšã€‚æœ¬è´¨ä¸Šæ˜¯å…³äºç¼–å†™é«˜å†…èšä½è€¦åˆä»£ç çš„ç»éªŒæ²‰æ·€ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635140165,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":228410,"user_name":"lckfaæé’Š","can_delete":false,"product_type":"c1","uid":1356899,"ip_address":"","ucode":"AD13D205104AA6","user_header":"https://static001.geekbang.org/account/avatar/00/14/b4/63/84960032.jpg","comment_is_top":false,"comment_ctime":1592661000,"is_pvip":false,"replies":[{"id":"84229","content":"è¯´çš„å¾ˆå¥½ï¼Œå•ä»¶æ˜“å­¦ï¼Œç”¨èµ·æ¥ç®€å•ï¼Œæ‰€ä»¥å°±å¾ˆå®¹æ˜“è¢«æ»¥ç”¨ï¼Œè¿™ä¸ªæ˜¯éœ€è¦ç‰¹åˆ«æ³¨æ„çš„ã€‚<br><br>ä½†ä»å­¦ä¹ è®¾è®¡æ¨¡å¼çš„è§’åº¦æ¥çœ‹ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„èŒƒä¾‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1592695035,"ip_address":"","comment_id":228410,"utype":1}],"discussion_count":1,"race_medal":0,"score":"44542333960","product_id":100051801,"comment_content":"åˆæèµ·äº†å•ä¾‹æ¨¡å¼ï¼Œæˆ‘ä¸ªäººæ˜¯å¾ˆåå¯¹å•ä¾‹æ¨¡å¼çš„ï¼Œå…¶ç¼ºç‚¹å¤§äºä¼˜ç‚¹ï¼šç ´åäº†ç¨‹åºçš„å°è£…ï¼Œå¯ä»¥éšä¾¿ä¼ æ¥ä¼ å»çš„å¤šå¯æ€•ï¼Œæœ‰å…¨å±€å˜é‡çš„å…¨éƒ¨ç¼ºç‚¹ï¼ˆå¦‚æœä½ éœ€è¦ä½¿ç”¨å…¨å±€å˜é‡ï¼Œè¿™è¯´æ˜ä½ çš„è®¾è®¡æœ‰å¾ˆå¤§çš„é—®é¢˜ï¼‰ï¼Œè¿èƒŒäº†å•ä¸€èŒè´£åŸåˆ™ï¼Œéš¾ä»¥å•å…ƒæµ‹è¯•ï¼Œä¾èµ–ä¸æ¸…ç­‰ï¼›å®åœ¨è¦ä½¿ç”¨å•ä¾‹æ¨¡å¼çš„è¯ï¼Œä¸€å®šè¦æ³¨æ„åŸåˆ™ï¼šå¦‚æœä½ ä½¿ç”¨å•ä¾‹æ˜¯å› ä¸ºæŸä¸ªç±»çš„å®ä¾‹ä¸èƒ½è¶…è¿‡ä¸€ä¸ªï¼Œé‚£ä¹ˆè¿™é€šå¸¸æ˜¯å¯ä»¥çš„ã€‚å¦‚æœä½¿ç”¨å®ƒæ˜¯å› ä¸ºsingletonæ˜¯ä¸€ä¸ªå…¨å±€å¯è®¿é—®çš„å¯¹è±¡ï¼Œå®ƒå¯ä»¥è®©æ‚¨é¿å…è€ƒè™‘ä¸å…¶ä»–å¯¹è±¡å¦‚ä½•ç›¸äº’é€šä¿¡ï¼Œä»¥åŠæ¯ä¸ªå¯¹è±¡è´Ÿè´£ä»€ä¹ˆï¼Œé‚£å°±æ˜¯ä½ ç”¨é”™äº†ï¼<br><br>é€‚é…å™¨ç±» ç»§æ‰¿äºæŸä¸ªç±»ï¼Œç„¶åå¯¹è¿™ä¸ªç±»è¿›è¡Œæ¥å£æ”¹é€ ï¼Œä½¿ä¹‹èƒ½é€‚é…å¦ä¸€ä¸ªç±»çš„å¯¹å…¶è°ƒç”¨ï¼›<br><br>è£…é¥°æ¨¡å¼åœ¨ä¸æ”¹å˜å¯¹è±¡æ¥å£çš„å‰æä¸‹å¼ºåŒ–å¯¹è±¡çš„åŠŸèƒ½ï¼›<br><br>ä¸é€‚é…å™¨æ¨¡å¼æä¾›ä¸åŒçš„æ¥å£ä»¥é€‚é…è°ƒç”¨ä¸åŒï¼Œä»£ç†æ¨¡å¼åˆ™æ˜¯æä¾›ç›¸åŒçš„æ¥å£ï¼Œä»£æ›¿å®¿ä¸»å®ŒæˆæŸäº›åŠŸèƒ½ï¼Œ","like_count":11,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":499024,"discussion_content":"è¯´çš„å¾ˆå¥½ï¼Œå•ä»¶æ˜“å­¦ï¼Œç”¨èµ·æ¥ç®€å•ï¼Œæ‰€ä»¥å°±å¾ˆå®¹æ˜“è¢«æ»¥ç”¨ï¼Œè¿™ä¸ªæ˜¯éœ€è¦ç‰¹åˆ«æ³¨æ„çš„ã€‚\n\nä½†ä»å­¦ä¹ è®¾è®¡æ¨¡å¼çš„è§’åº¦æ¥çœ‹ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„èŒƒä¾‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592695035,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":228261,"user_name":"æ³°ä¼¦å¢","can_delete":false,"product_type":"c1","uid":1141994,"ip_address":"","ucode":"FEA6B43C8D4FF9","user_header":"https://static001.geekbang.org/account/avatar/00/11/6c/ea/e03fec22.jpg","comment_is_top":false,"comment_ctime":1592625361,"is_pvip":true,"replies":[{"id":"84186","content":"æ„Ÿè°¢æé†’ï¼Œç¨åä¼šè”ç³»ç¼–è¾‘åšä¸ªè¡¥å……ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1592646814,"ip_address":"","comment_id":228261,"utype":1}],"discussion_count":1,"race_medal":0,"score":"27362429137","product_id":100051801,"comment_content":"æ„Ÿè°¢è€å¸ˆï¼Œè¿™ç¯‡æ–‡ç« è¯»ä¸‹æ¥æ”¶è·è¿˜æ˜¯è›®å¤šçš„ï¼Œä½†æ–‡ä¸­æåˆ°é™æ€å˜é‡åˆå§‹åŒ–æ˜¯çº¿ç¨‹å®‰å…¨å¾—ï¼Œå‰æè²Œä¼¼åº”è¯¥åŠ ä¸ªc++11åï¼Œé¿å…äº‰è®®","like_count":6,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":498975,"discussion_content":"æ„Ÿè°¢æé†’ï¼Œç¨åä¼šè”ç³»ç¼–è¾‘åšä¸ªè¡¥å……ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592646814,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":228509,"user_name":"æœ‰å­¦è¯†çš„å…”å­","can_delete":false,"product_type":"c1","uid":1628867,"ip_address":"","ucode":"D1D654B1562FC9","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIicr82CnrdEjibibAvyeKRQHszSzIAqoCWxN0kqC442XcjEae6S9j6NDtKLpg4Da4CUQQeUFUicWqiaDw/132","comment_is_top":false,"comment_ctime":1592720345,"is_pvip":false,"replies":[{"id":"84266","content":"å¯¹ï¼Œæ€»ç»“çš„å¾ˆå¥½ã€‚<br><br>å¾ˆå¤šè®¾è®¡æ¨¡å¼çš„ç»“æ„éƒ½å¾ˆç›¸ä¼¼ï¼Œå› ä¸ºç”¨çš„éƒ½æ˜¯å¯¹è±¡ç»„åˆæŠ€æœ¯ï¼Œä½†åŒºåˆ«å°±åœ¨äºå®ƒä»¬çš„ä½¿ç”¨æ–¹å¼ã€ç›®çš„ã€ç”¨é€”ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1592740569,"ip_address":"","comment_id":228509,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18772589529","product_id":100051801,"comment_content":"1ã€å¯ä»¥æ ¹æ®éœ€è¦ï¼Œé€šè¿‡ä¸åŒçš„å‚æ•°å®šåˆ¶åŒ–ï¼Œäº§ç”Ÿä¸åŒçš„å¯¹è±¡ï¼›åŒæ—¶è¿˜å¯ä»¥å¯¹å‚æ•°ç±»å‹èŒƒå›´è¿›è¡Œæ£€æŸ¥ã€‚<br>2ã€ç›¸åŒä¹‹å¤„åœ¨äºéƒ½æ˜¯å¯¹äºåŸå§‹ç±»æˆ–å¯¹è±¡çš„äºŒæ¬¡å°è£…ï¼› <br>ä¸åŒåœ¨äºï¼š<br>é€‚é…å™¨æ˜¯ä¸ºäº†è§£å†³æ¥å£ä¸å…¼å®¹çš„é—®é¢˜ï¼Œæä¾›æ–°æ¥å£æ¥é—´æ¥æ”¹é€ åŸå§‹æ¥å£ï¼›<br>è£…é¥°å™¨ï¼šä¸åŸå§‹ç±»ç»§æ‰¿åŒæ ·çš„çˆ¶ç±»ï¼Œä¸ºåŸå§‹ç±»æä¾›äº†é¢å¤–å¢å¼ºçš„åŠŸèƒ½æ¥å£ï¼Œä¸”å¯ä»¥åµŒå¥—å¤šä¸ªè£…é¥°å™¨ï¼›<br>ä»£ç†ï¼šä¸ªäººæ„Ÿè§‰å’Œè£…é¥°å™¨éå¸¸åƒï¼Œä½†ä»£ç†çš„ä½œç”¨æ›´åå‘äºç±»æˆ–å¯¹è±¡æœ¬èº«åŠŸèƒ½ä¹‹å¤–çš„èƒ½åŠ›ï¼Œä¾‹å¦‚ç»Ÿè®¡è°ƒç”¨æ¬¡æ•°&#47;è¿è¡Œæ—¶é—´ï¼Œæœ‰ç‚¹ç®¡ç†åŸå§‹ç±»çš„æ„æ€ã€‚<br>","like_count":4,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":499058,"discussion_content":"å¯¹ï¼Œæ€»ç»“çš„å¾ˆå¥½ã€‚\n\nå¾ˆå¤šè®¾è®¡æ¨¡å¼çš„ç»“æ„éƒ½å¾ˆç›¸ä¼¼ï¼Œå› ä¸ºç”¨çš„éƒ½æ˜¯å¯¹è±¡ç»„åˆæŠ€æœ¯ï¼Œä½†åŒºåˆ«å°±åœ¨äºå®ƒä»¬çš„ä½¿ç”¨æ–¹å¼ã€ç›®çš„ã€ç”¨é€”ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592740569,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":355208,"user_name":"æ¢åˆ©é”‹","can_delete":false,"product_type":"c1","uid":1687980,"ip_address":"åŒ—äº¬","ucode":"417DD2BBAAD813","user_header":"https://static001.geekbang.org/account/avatar/00/19/c1/ac/1845668a.jpg","comment_is_top":false,"comment_ctime":1661171830,"is_pvip":false,"replies":[{"id":"129250","content":"æå®¢æ—¶é—´ä¸Šå·²ç»æœ‰è®²è®¾è®¡æ¨¡å¼çš„è¯¾ç¨‹äº†ï¼Œå†å‡ºææ€•éš¾å…é›·åŒï¼Œä»¥åå†è€ƒè™‘å§ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1181974","ctime":1661227709,"ip_address":"åŒ—äº¬","comment_id":355208,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1661171830","product_id":100051801,"comment_content":"å¢™è£‚å‘¼åä½œè€…å‡ºä¸€ç‰ˆè®¾è®¡æ¨¡å¼çš„è¯¾ç¨‹","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":584926,"discussion_content":"æå®¢æ—¶é—´ä¸Šå·²ç»æœ‰è®²è®¾è®¡æ¨¡å¼çš„è¯¾ç¨‹äº†ï¼Œå†å‡ºææ€•éš¾å…é›·åŒï¼Œä»¥åå†è€ƒè™‘å§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661227709,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":350266,"user_name":"KevinJ","can_delete":false,"product_type":"c1","uid":2941881,"ip_address":"","ucode":"74A9D474A94C9E","user_header":"https://static001.geekbang.org/account/avatar/00/2c/e3/b9/9a934f5c.jpg","comment_is_top":false,"comment_ctime":1656737402,"is_pvip":true,"replies":[{"id":"127458","content":"great","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1181974","ctime":1656919457,"ip_address":"","comment_id":350266,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1656737402","product_id":100051801,"comment_content":"Meyer&#39;s singletonä»£ç æ®µæ˜¯ä¸æ˜¯æ²¡å†™å…¨ï¼Œåº”è¯¥æ˜¯è¿™æ ·å§:<br><br>template&lt;typename T&gt;<br>static <br>auto&amp; getInstance() {<br>    static T obj;<br>    return obj;<br>}","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":578617,"discussion_content":"great","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656919457,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":304990,"user_name":"Stephen","can_delete":false,"product_type":"c1","uid":1165201,"ip_address":"","ucode":"0D49223E6CB7B1","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ7mAt63VrbLZPHpeZxSc4IlBYswQSnaAB5wGePaGFDehgiaNfIxI1SJ5yIHIlmVk8hsw0RaoaSCPA/132","comment_is_top":false,"comment_ctime":1627736200,"is_pvip":false,"replies":[{"id":"110359","content":"ä¸å¤ªå‡†ç¡®ã€‚<br><br>é€‚é…å™¨æ˜¯ç»“æ„å‹æ¨¡å¼ï¼Œå¯¹åŸæœ‰å¯¹è±¡è¿›è¡Œç»„åˆæ•´ç†ï¼Œå¾—åˆ°æ–°çš„å¯¹è±¡ï¼Œæ˜¯å¯¹å¯¹è±¡çš„ä¸€ç§åŒ…è£…ã€‚<br><br>å·¥å‚æ¨¡å¼æ˜¯åˆ›å»ºå‹æ¨¡å¼ï¼Œæ˜¯â€œå‡­ç©ºâ€åˆ›å»ºå‡ºæ–°å¯¹è±¡ï¼Œè§£å†³çš„æ˜¯å¦‚ä½•æŒ‰éœ€æ±‚ç”Ÿæˆå¯¹è±¡ã€‚<br><br>è®¾è®¡æ¨¡å¼å¹¶ä¸ä¸C++é‡Œçš„å®¹å™¨ã€æŒ‡é’ˆç›´æ¥å…³è”ï¼Œåœ¨å­¦è®¾è®¡æ¨¡å¼çš„æ—¶å€™ä¸è¦è¢«è¯­è¨€ç»†èŠ‚ç»™å›°ä½äº†ï¼Œå°½é‡è·³å‡ºæ¥ï¼Œåœ¨é«˜ä¸€ä¸ªå±‚çº§æ¥æ€è€ƒã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1627825095,"ip_address":"","comment_id":304990,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1627736200","product_id":100051801,"comment_content":"å¯ä»¥è¿™æ ·ç†è§£é€‚é…å™¨å’Œå·¥å‚æ¨¡å¼çš„åŒºåˆ«å—? é€‚é…å™¨ä¸­è®²çš„ä¾‹å­,è½¬æ¢å‰åçš„æœ¬è´¨æ²¡æœ‰å˜åŒ–,éƒ½æ˜¯è£…æ•°æ®çš„&quot;å®¹å™¨&quot;,åªæ˜¯è¡¨ç¤ºå½¢å¼å‘ç”Ÿäº†æ”¹å˜.   è€Œå·¥å‚æ¨¡å¼,åˆ™åŸæ–™å’Œæœ€ç»ˆçš„äº§å“æœ¬è´¨ä¸Šæ˜¯ä¸¤ç§ä¸œè¥¿,æ¯”å¦‚åŸæ–™æ˜¯å€¼å’Œç±»å‹,è€Œäº§å“æ˜¯æŒ‡å‘è¯¥ç±»å‹å˜é‡çš„æŒ‡é’ˆ.","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":524240,"discussion_content":"ä¸å¤ªå‡†ç¡®ã€‚\n\né€‚é…å™¨æ˜¯ç»“æ„å‹æ¨¡å¼ï¼Œå¯¹åŸæœ‰å¯¹è±¡è¿›è¡Œç»„åˆæ•´ç†ï¼Œå¾—åˆ°æ–°çš„å¯¹è±¡ï¼Œæ˜¯å¯¹å¯¹è±¡çš„ä¸€ç§åŒ…è£…ã€‚\n\nå·¥å‚æ¨¡å¼æ˜¯åˆ›å»ºå‹æ¨¡å¼ï¼Œæ˜¯â€œå‡­ç©ºâ€åˆ›å»ºå‡ºæ–°å¯¹è±¡ï¼Œè§£å†³çš„æ˜¯å¦‚ä½•æŒ‰éœ€æ±‚ç”Ÿæˆå¯¹è±¡ã€‚\n\nè®¾è®¡æ¨¡å¼å¹¶ä¸ä¸C++é‡Œçš„å®¹å™¨ã€æŒ‡é’ˆç›´æ¥å…³è”ï¼Œåœ¨å­¦è®¾è®¡æ¨¡å¼çš„æ—¶å€™ä¸è¦è¢«è¯­è¨€ç»†èŠ‚ç»™å›°ä½äº†ï¼Œå°½é‡è·³å‡ºæ¥ï¼Œåœ¨é«˜ä¸€ä¸ªå±‚çº§æ¥æ€è€ƒã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627825095,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1165201,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ7mAt63VrbLZPHpeZxSc4IlBYswQSnaAB5wGePaGFDehgiaNfIxI1SJ5yIHIlmVk8hsw0RaoaSCPA/132","nickname":"Stephen","note":"","ucode":"0D49223E6CB7B1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":386992,"discussion_content":"å¥½çš„ï¼Œè°¢è°¢è€å¸ˆã€‚æˆ‘æ˜¯ç”¨æ–‡ä¸­çš„ä¾‹å­è§£è¯»ä¸‹ï¼Œå¹¶æ²¡æœ‰å’ŒæŒ‡é’ˆï¼Œå®¹å™¨å…³è”çš„æ„æ€ï¼Œ/ç¬‘ğŸ˜„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627920405,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":240483,"user_name":"æœè·ƒä¿¡","can_delete":false,"product_type":"c1","uid":2065731,"ip_address":"","ucode":"C1A3CB9DAC1B6E","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIBrZt8rUzS28nMSpEQNcu2hungMgiceiaEUyia3QBAmPBhLvGNnhIyTPoYiakP6Eiaqk0rGUNjUzRQjBA/132","comment_is_top":false,"comment_ctime":1596943717,"is_pvip":false,"replies":[{"id":"88816","content":"åœ¨C++11é‡Œå·²ç»æ˜ç¡®å®šä¹‰äº†ï¼Œstaticå˜é‡çš„åˆå§‹åŒ–æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1597021054,"ip_address":"","comment_id":240483,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1596943717","product_id":100051801,"comment_content":"æ–‡ä¸­æåˆ°å‡½æ•°å†…é™æ€å˜é‡çš„çº¿ç¨‹å®‰å…¨æ€§é—®é¢˜<br>ä¼¼ä¹è¿˜è¦çœ‹ç¼–è¯‘å™¨çš„æ”¯æŒç¨‹åº¦å§ï¼Œè®°å¾—ä»¥å‰çœ‹åˆ°vs2015çš„èµ„æ–™ä¸Šæ˜ç¡®è¡¨ç¤ºï¼Œè¿™ç§æ–¹å¼ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œåƒvsè¿™ç§å¯¹c++æ”¯æŒå¾ˆé«˜çš„ç¼–è¯‘å™¨éƒ½ä¸æ”¯æŒï¼Œä¸çŸ¥é“å…¶å®ƒç¼–è¯‘å™¨å®ç°å¦‚ä½•ï¼Œå¦‚æœç”¨çš„æ—¶å€™è¿˜è¦å»æŸ¥ç¼–è¯‘å™¨çš„èµ„æ–™ï¼Œæˆ‘è§‰å¾—è¿˜ä¸å¦‚é¿å…ä½¿ç”¨æ¥å¾—å®‰å…¨","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":503460,"discussion_content":"åœ¨C++11é‡Œå·²ç»æ˜ç¡®å®šä¹‰äº†ï¼Œstaticå˜é‡çš„åˆå§‹åŒ–æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597021054,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":233286,"user_name":"henry","can_delete":false,"product_type":"c1","uid":1019455,"ip_address":"","ucode":"D2744C559ADFD0","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8e/3f/1f529b26.jpg","comment_is_top":false,"comment_ctime":1594279566,"is_pvip":true,"replies":[{"id":"86072","content":"æ˜¯çš„ï¼Œè®¾è®¡æ¨¡å¼çš„ç›®çš„å’Œæ„ä¹‰å°±åœ¨äºæŠŠç»éªŒæ€»ç»“ä¸‹æ¥ï¼Œé¿å…â€œé‡å¤å‘ç°â€ï¼ŒèŠ‚çº¦æˆ‘ä»¬çš„æ—¶é—´å’Œç²¾åŠ›ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1594282195,"ip_address":"","comment_id":233286,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1594279566","product_id":100051801,"comment_content":"       å…¶å®åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¾ˆå¤šæ—¶å€™å·²ç»ç”¨äº†ä¸Šé¢çš„ä¸€äº›æ¨¡å¼ï¼Œåªæ˜¯å½“æ—¶æ²¡æƒ³åˆ°æ˜¯è¿™ä¸ªåå­—ã€‚ä¸€äº›å¸¸ç”¨çš„æ¨¡å¼å¹³æ—¶æˆ‘ä»¬åœ¨å¼€å‘è¿‡ç¨‹ä¸­ä¹Ÿä¼šè‡ªå·±æ‘¸ç´¢æ€»ç»“å‡ºæ¥ã€‚<br>       æ¯”å¦‚æˆ‘çš„ä¸€ä¸ªé¡¹ç›®æ˜¯éœ€è¦æä¾›ä¸€å¥—é€šç”¨çš„æ¥å£ç»™ä¸Šå±‚è°ƒç”¨è€…ï¼Œè€Œæ¥å£å†…éƒ¨éœ€è¦ä¸æ–­åœ°å¯¹æ¥ä¸šåŠ¡åŠŸèƒ½ç›¸ä¼¼ã€å®ç°æ–¹å¼å„ä¸ç›¸åŒçš„ç¬¬ä¸‰æ–¹çš„æœåŠ¡ï¼Œåœ¨ä»£ç è¿­ä»£è¿‡ç¨‹ä¸­è‡ªç„¶å°±ä¼šé‡æ„æˆé€‚é…å™¨æ¨¡å¼å’Œä»£ç†æ¨¡å¼ï¼Œè¿™æ ·ä¸Šå±‚è°ƒç”¨è€…ä¸ç”¨å…³å¿ƒç¬¬ä¸‰æ–¹æœåŠ¡çš„ä¸åŒï¼Œä¹Ÿä¸èƒ½è¶Šè¿‡å»ç›´æ¥å¤–éƒ¨é€šè®¯ï¼Œæ•´ä¸ªç³»ç»Ÿå°±ä¼šæ¯”è¾ƒå¥å£®ã€‚<br>       ä»£ç†æ¨¡å¼ï¼šç»å¸¸å†™çš„åŒ…è£…ç±»ï¼Œåº”è¯¥å°±å±äºè¿™ä¸ªæ¨¡å¼çš„å®è·µã€‚","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":500973,"discussion_content":"æ˜¯çš„ï¼Œè®¾è®¡æ¨¡å¼çš„ç›®çš„å’Œæ„ä¹‰å°±åœ¨äºæŠŠç»éªŒæ€»ç»“ä¸‹æ¥ï¼Œé¿å…â€œé‡å¤å‘ç°â€ï¼ŒèŠ‚çº¦æˆ‘ä»¬çš„æ—¶é—´å’Œç²¾åŠ›ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594282195,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":228449,"user_name":"paradoxxx","can_delete":false,"product_type":"c1","uid":1233527,"ip_address":"","ucode":"FD94E547273B18","user_header":"https://static001.geekbang.org/account/avatar/00/12/d2/77/bae2045d.jpg","comment_is_top":false,"comment_ctime":1592697925,"is_pvip":false,"replies":[{"id":"84234","content":"è¿™ä¸ªåº”è¯¥æ˜¯ç±»å‹å¼ºè½¬äº†ï¼Œå¤ªhackäº†ï¼Œä¸å»ºè®®è¿™ä¹ˆç”¨ï¼Œæ²¡ä»€ä¹ˆæ„ä¹‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1592710324,"ip_address":"","comment_id":228449,"utype":1}],"discussion_count":4,"race_medal":0,"score":"1592697925","product_id":100051801,"comment_content":"è€å¸ˆï¼Œé—®ä¸€ä¸ªéç»§æ‰¿æƒ…å†µè™šå‡½æ•°çš„é—®é¢˜ï¼Œå¦‚ä¸‹ä»£ç ï¼Œ<br>#include &lt;iostream&gt;<br>class A {<br>public:<br>\tvoid f1() { printf(&quot;A::f1\\n&quot;); }<br>\tvirtual void f2() { printf(&quot;B::f2\\n&quot;); }<br>};<br>class B {<br>public:<br>\tvirtual void f1() { printf(&quot;B::f1\\n&quot;); }<br>\tvirtual void f2() { printf(&quot;B::f2\\n&quot;); }<br>};<br>int main() {<br>    B obeject;<br>    A* p = (A*)&amp;obeject;<br>    p-&gt;f1();<br>    p-&gt;f2();<br>    return 0;<br>}<br>ç¼–è¯‘æ‰§è¡Œç»“æœ( ubuntu20.04, g++ 9.3.0 )ï¼š<br>A::f1<br>B::f1<br>è€å¸ˆèƒ½è§£é‡Šä¸€ä¸‹ä¸ºä»€ä¹ˆæ˜¯è¿™æ ·å—","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":499042,"discussion_content":"è¿™ä¸ªåº”è¯¥æ˜¯ç±»å‹å¼ºè½¬äº†ï¼Œå¤ªhackäº†ï¼Œä¸å»ºè®®è¿™ä¹ˆç”¨ï¼Œæ²¡ä»€ä¹ˆæ„ä¹‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592710324,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":285653,"discussion_content":"è¿™æ˜¯å…¸å‹çš„Cè¯­è¨€ç”¨æ³•ï¼Œå¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œæ— è§†ç±»å‹ä½“ç³»ï¼Œè®©æŒ‡é’ˆè®¤ä¸ºå°±æ˜¯Aï¼Œç„¶ååé¢åˆä¼šæœ‰å†…å­˜å¸ƒå±€ã€è™šè¡¨ç­‰ä¸œè¥¿äº†ï¼Œå¤ªä¹±ã€‚æˆ‘è§‰å¾—å³ä½¿ä½ å¼„æ¸…æ¥šäº†ï¼Œå®é™…ä¹Ÿä¸ä¼šå†™å‡ºè¿™æ ·çš„ä»£ç ï¼Œå¯èƒ½åªæœ‰è€ƒè¯•æ‰æœ‰æ„ä¹‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592904505,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1628867,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIicr82CnrdEjibibAvyeKRQHszSzIAqoCWxN0kqC442XcjEae6S9j6NDtKLpg4Da4CUQQeUFUicWqiaDw/132","nickname":"æœ‰å­¦è¯†çš„å…”å­","note":"","ucode":"D1D654B1562FC9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":285034,"discussion_content":"è¿™å®Œå…¨æ˜¯ä¸¤ä¸ªä¸åŒçš„ç±»ï¼Œæ›´ä¸å­˜åœ¨ä¸¤ä¸ªç±»çš„æˆå‘˜å‡½æ•°æœ‰ä»€ä¹ˆè”ç³»ã€‚ä½†ä¸ºå•¥èƒ½é€šè¿‡å¯¹è±¡Bç›´æ¥è°ƒç”¨ç±»Açš„æ¥å£ï¼Ÿï¼Ÿä¸èƒ½ç†è§£ï¼ŒæŒ‰ç†è¯´ï¼Œå¼ºè½¬ä¹‹åçš„æŒ‡é’ˆä¹Ÿä¸èƒ½æŒ‡å‘Aç±»çš„æˆå‘˜å‡½æ•°çš„å•Šã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592718515,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1055296,"avatar":"https://static001.geekbang.org/account/avatar/00/10/1a/40/f10493ef.jpg","nickname":"ä¸­å±±æµªå­","note":"","ucode":"25D0F8462473D3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1628867,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIicr82CnrdEjibibAvyeKRQHszSzIAqoCWxN0kqC442XcjEae6S9j6NDtKLpg4Da4CUQQeUFUicWqiaDw/132","nickname":"æœ‰å­¦è¯†çš„å…”å­","note":"","ucode":"D1D654B1562FC9","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":296480,"discussion_content":"ä½ ä»‹æ„æ•°æ•°å†…å­˜é‡Œçš„åœ°å€ä¹ˆï¼ŒæŠŠå‡½æ•°åœ°å€å’Œåç§»æ‰“å‡ºæ¥ï¼Œè‡ªå·±å»è®¡ç®—ä¸‹åç§»ã€‚ä»ä»£ç é€»è¾‘ä¸Šæ¥è¯´è¿™ä¸¤ä¸ªä¸åŒç±»å‹çš„æŒ‡é’ˆå¼ºè½¬æœ¬èº«æ²¡ä»€ä¹ˆæ„ä¹‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596552336,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":285034,"ip_address":""},"score":296480,"extra":""}]}]}]}