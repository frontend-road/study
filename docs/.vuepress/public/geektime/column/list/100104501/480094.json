{"id":480094,"title":"02 | å…ˆåˆ©å…¶å™¨ï¼šå¦‚ä½•é«˜æ•ˆå­¦ä¹  eBPFï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯å€ªæœ‹é£ã€‚</p><p>ä¸Šä¸€è®²ï¼Œæˆ‘ä»¬ä¸€èµ·äº†è§£äº† eBPF çš„å‘å±•å†ç¨‹ã€åŸºæœ¬åŸç†å’Œä¸»è¦åº”ç”¨åœºæ™¯ã€‚eBPF æ¥æºäº Linux å†…æ ¸å­ç³»ç»Ÿ Berkeley Packet Filter (BPF)ï¼Œæœ€æ—©ç”¨äºæå‡ç½‘ç»œåŒ…è¿‡æ»¤çš„æ€§èƒ½ã€‚åæ¥ï¼Œéšç€ BPF æŠ€æœ¯çš„é€æ­¥å®Œå–„ï¼Œå®ƒçš„åº”ç”¨èŒƒå›´ä»å†…æ ¸ç©ºé—´æ‰©å±•åˆ°äº†ç”¨æˆ·ç©ºé—´ï¼Œå¹¶é€æ­¥åœ¨ç½‘ç»œã€å¯è§‚æµ‹ä»¥åŠå®‰å…¨ç­‰æ–¹é¢è·å¾—äº†å¤§é‡çš„åº”ç”¨ã€‚</p><p>äº†è§£è¿‡è¿™äº›çš„ä½ ï¼Œå¾ˆå¯èƒ½é‡åˆ°äº†æˆ‘æ›¾ç»æœ‰è¿‡çš„ç–‘æƒ‘ï¼šä½œä¸º Linux å†…æ ¸çš„ä¸€éƒ¨åˆ†ï¼ŒeBPF è¿™ä¹ˆåº•å±‚çš„æŠ€æœ¯ï¼Œåˆ°åº•è¯¥å¦‚ä½•å­¦ä¹ æ‰èƒ½æ›´é«˜æ•ˆåœ°æŒæ¡å®ƒï¼Ÿ</p><p>è¿™æ˜¯åˆå­¦è€…ç»å¸¸é‡åˆ°çš„é—®é¢˜ï¼šåœ¨å­¦ä¹  eBPF çš„çŸ¥è¯†å’ŒåŸç†æ—¶ï¼Œæ‰¾ä¸åˆ°æ­£ç¡®çš„æ–¹æ³•ï¼Œåªæ˜¯ç…§ç€ç½‘ç»œä¸Šå¹¶ä¸å…¨é¢çš„ç‰‡æ®µæ–‡ç« æ“ä½œï¼Œæˆ–è€…ç›´æ¥å»å•ƒå†…æ ¸çš„æºç ï¼Œè¿™æ ·å¾€å¾€äº‹å€åŠŸåŠã€‚ç”šè‡³ï¼Œè¿˜å¯èƒ½è¢«æµ·é‡çš„ä¿¡æ¯æ·¹æ²¡ï¼Œå¤±å»äº†æŒç»­å­¦ä¹ çš„ä¿¡å¿ƒï¼Œâ€œä»å…¥é—¨åˆ°æ”¾å¼ƒâ€ ã€‚é‚£ä¹ˆä»Šå¤©ï¼Œæˆ‘ä»¬å°±ä¸€èµ·æ¥çœ‹çœ‹ï¼Œæ€ä¹ˆæ‰èƒ½é«˜æ•ˆä¸”æ·±å…¥åœ°å­¦ä¹  eBPFã€‚</p><h2>å­¦ä¹ è¿™é—¨è¯¾éœ€è¦ä»€ä¹ˆåŸºç¡€ï¼Ÿ</h2><p>é¦–å…ˆï¼Œåœ¨å­¦ä¹  eBPF ä¹‹å‰ä½ è¦æ˜ç™½ï¼ŒeBPF æ˜¯ Linux çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒæ‰€æœ‰çš„åº”ç”¨éƒ½éœ€è¦åœ¨ Linux ç³»ç»Ÿä¸­å®Œæˆï¼ˆè™½ç„¶ Windows ä¹Ÿå·²ç»æ”¯æŒäº† eBPFï¼Œä½†æš‚æ—¶ä¸å¤Ÿæˆç†Ÿï¼‰ã€‚æ‰€ä»¥ï¼Œæˆ‘å¸Œæœ›ä½ <strong>è‡³å°‘ç†Ÿç»ƒæŒæ¡ä¸€ç§ Linux ç³»ç»Ÿï¼ˆæ¯”å¦‚ Ubuntuã€RHELï¼‰çš„åŸºæœ¬ä½¿ç”¨æ–¹æ³•</strong>ï¼ŒåŒ…æ‹¬ï¼š</p><!-- [[[read_end]]] --><ul>\n<li>ç†Ÿæ‚‰ Linux ç³»ç»Ÿå¸¸ç”¨å‘½ä»¤çš„ä½¿ç”¨æ–¹æ³•ï¼›</li>\n<li>ç†Ÿæ‚‰ Linux ç³»ç»Ÿå¸¸ç”¨è½¯ä»¶åŒ…çš„å®‰è£…æ–¹æ³•ï¼›</li>\n<li>äº†è§£ Linux ç³»ç»Ÿå¸¸ç”¨çš„ç½‘ç»œå·¥å…·å’ŒåŸºæœ¬çš„ç½‘ç»œæ’é”™æ–¹æ³•ã€‚</li>\n</ul><p>å› ä¸ºè¿™é—¨è¯¾çš„æ ¸å¿ƒåœ¨äº eBPFï¼Œæ‰€ä»¥åœ¨åç»­çš„å†…å®¹ä¸­ï¼Œæˆ‘ä¸ä¼šè¯¦ç»†ä»‹ç»è¿™äº›åŸºæœ¬çš„ Linux ç³»ç»Ÿä½¿ç”¨æ–¹æ³•ã€‚æ‰€ä»¥ï¼Œä½ éœ€è¦æå‰æŒæ¡è¿™äº›åŸºæœ¬çŸ¥è¯†ã€‚è¿™æ ·ï¼Œæ¥ä¸‹æ¥æˆ‘åœ¨è®²è§£ eBPF æ—¶ï¼Œä½ å°±æ›´å®¹æ˜“ç†è§£èƒŒåçš„å·¥ä½œåŸç†å’Œè¯¦ç»†ä½¿ç”¨æ–¹æ³•ï¼Œä¹Ÿæ›´å®¹æ˜“æ˜ç™½æ¯ä¸€æ­¥å®è·µæ“ä½œçš„å…·ä½“å«ä¹‰ã€‚</p><p>å…¶æ¬¡ï¼Œç”±äº eBPF æ˜¯å†…æ ¸çš„ä¸€éƒ¨åˆ†ï¼Œåœ¨å®é™…ä½¿ç”¨ eBPF æ—¶ï¼Œå¤§éƒ½ä¼šæ¶‰åŠä¸€äº›å†…æ ¸æ¥å£çš„ç¼–ç¨‹ã€‚æ‰€ä»¥ï¼Œæˆ‘å¸Œæœ›ä½ <strong>æœ‰ä¸€å®šçš„ç¼–ç¨‹åŸºç¡€ï¼ˆæ¯”å¦‚ C è¯­è¨€å’Œ Python è¯­è¨€ï¼‰ï¼Œå¹¶äº†è§£å¦‚ä½•ä»æºä»£ç ç¼–è¯‘å’Œè¿è¡Œ C ç¨‹åºã€‚</strong>ä»¥ C è¯­è¨€å’Œ Python è¯­è¨€ä¸ºä¾‹ï¼Œä¸»è¦åŒ…æ‹¬ï¼š</p><ul>\n<li>äº†è§£ C è¯­è¨€å’Œ Python è¯­è¨€çš„åŸºæœ¬è¯­æ³•æ ¼å¼ï¼Œå¹¶èƒ½å¤Ÿçœ‹æ‡‚ç®€å•çš„ C è¯­è¨€å’Œ Python è¯­è¨€ç¨‹åºï¼›</li>\n<li>äº†è§£ C è¯­è¨€ç¨‹åºçš„ç¼–è¯‘æ–¹æ³•ï¼Œå¹¶äº†è§£ makeã€gcc ç­‰å¸¸ç”¨ç¼–è¯‘å·¥å…·çš„åŸºæœ¬ä½¿ç”¨æ–¹æ³•ï¼›</li>\n<li>äº†è§£ C è¯­è¨€å’Œ Python è¯­è¨€ç¨‹åºçš„è°ƒè¯•æ–¹æ³•ï¼Œå¹¶èƒ½å¤Ÿå€ŸåŠ©æ—¥å¿—ã€è°ƒè¯•å™¨ç­‰ï¼Œåœ¨ç¨‹åºå‡ºé”™æ—¶æ’æŸ¥é—®é¢˜çš„åŸå› ã€‚</li>\n</ul><p>è™½ç„¶è¿™äº›å†…å®¹çœ‹èµ·æ¥å¯èƒ½ä¼šå¾ˆéš¾ï¼Œå¹¶ä¸”å†…å®¹å¾ˆå¤šï¼Œä½†å®é™…ä¸Šä»»ä½•ä¸€æœ¬ C è¯­è¨€å’Œ Python è¯­è¨€çš„å…¥é—¨ä¹¦ç±éƒ½ä¼šè®²åˆ°è¿™äº›åŸºæœ¬çŸ¥è¯†ï¼Œè¿™é‡Œæˆ‘æ¨èé€‚åˆç¼–ç¨‹å…¥é—¨è€…çš„ ã€ŠC ç¨‹åºè®¾è®¡è¯­è¨€ã€‹å’Œã€ŠPython ç¼–ç¨‹ï¼šä»å…¥é—¨åˆ°å®è·µã€‹ï¼ˆå¦‚æœä½ æ›´å–œæ¬¢ç”¨è§†é¢‘çš„æ–¹å¼å­¦ä¹ ï¼Œä¹Ÿå¯ä»¥åœ¨ B ç«™ä¸­æ‰¾åˆ°å¾ˆå¤šå…¥é—¨çš„è§†é¢‘æ•™ç¨‹ï¼‰ã€‚</p><p>äº†è§£äº† C è¯­è¨€å’Œ Python è¯­è¨€çš„ç¼–ç¨‹åŸºç¡€ï¼Œæˆ‘åœ¨åç»­è®²è§£ eBPF å’Œ Linux å†…æ ¸ç›¸å…³çš„ç¼–ç¨‹æ¥å£æ—¶ï¼Œä½ å°±èƒ½å¤Ÿæ›´å¥½åœ°ç†è§£è¿™äº›ç¼–ç¨‹æ¥å£çš„åŸç†ï¼Œä¹Ÿæ›´å®¹æ˜“é€šè¿‡ç¼–ç¨‹æŠŠ eBPF å˜æˆè‡ªå·±çš„æ­¦å™¨ã€‚</p><p>æœ€åï¼Œè™½ç„¶ eBPF æ˜¯ Linux å†…æ ¸çš„ä¸€éƒ¨åˆ†ï¼Œå…¶ç¼–ç¨‹æ¥å£ä¹Ÿé€šå¸¸æ¶‰åŠä¸€å®šçš„å†…æ ¸åŸç†ï¼Œä½†<strong>åœ¨åˆšå¼€å§‹å­¦ä¹ æ—¶ï¼Œæˆ‘å¹¶ä¸å»ºè®®ä½ æ·±å…¥å»å­¦ä¹ å†…æ ¸çš„æºç </strong>ã€‚å°±åƒæˆ‘åœ¨ã€ŠLinux æ€§èƒ½ä¼˜åŒ–å®æˆ˜ã€‹ä¸“æ ä¸­æåˆ°çš„é‚£æ ·ï¼šå­¦ä¹ ä¸€é—¨æ–°çš„æŠ€æœ¯æ—¶ï¼Œä½ å¹¶ä¸éœ€è¦äº†è§£æ‰€æœ‰ä¸è¿™é—¨æŠ€æœ¯ç›¸å…³çš„ç»†èŠ‚ï¼Œåªè¦äº†è§£è¿™ä¸ªæŠ€æœ¯çš„åŸºæœ¬åŸç†ï¼Œå¹¶å»ºç«‹èµ·æ•´ä¸ªæŠ€æœ¯çš„å…¨å±€è§‚ï¼Œä½ å°±å¯ä»¥æŒæ¡è¿™ä¸ªæŠ€æœ¯çš„æ ¸å¿ƒã€‚</p><h2>å­¦ä¹  eBPFï¼Œé‡ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>åœ¨å¼€ç¯‡è¯é‡Œï¼Œæˆ‘å·²ç»æè¿‡è¿™ä¸€ç‚¹ï¼šå­¦ä¹ ä¸€é—¨æ–°æŠ€æœ¯ï¼Œæœ€å¿«çš„æ–¹æ³•å°±æ˜¯ç†è§£åŸç†çš„åŒæ—¶é…åˆå¤§é‡çš„å®è·µï¼ŒeBPF ä¹Ÿä¸ä¾‹å¤–ã€‚å› è€Œï¼Œæˆ‘ä»¬å­¦ä¹  eBPF çš„é‡ä¸­ä¹‹é‡å°±æ˜¯ï¼š</p><ul>\n<li>ç†è§£ eBPF çš„åŸºæœ¬åŸç†ï¼›</li>\n<li>æŒæ¡ eBPF çš„ç¼–ç¨‹æ¥å£ï¼›</li>\n<li>é€šè¿‡å®è·µæŠŠ eBPF åº”ç”¨åˆ°çœŸæ­£çš„å·¥ä½œåœºæ™¯ä¸­ã€‚</li>\n</ul><p>è¿™é—¨è¯¾ä¼šé’ˆå¯¹ä¸åŒåœºæ™¯ï¼ŒæŠŠè¿™ä¸‰ä¸ªé‡ç‚¹æ–¹é¢ç»™ä½ è®²æ¸…æ¥šï¼Œä¹Ÿå¸Œæœ›ä½ ä¸€å®šè¦èŠ±æ—¶é—´å’Œå¿ƒæ€æ¥æ¶ˆåŒ–å®ƒä»¬ã€‚</p><p>å…¶å®ï¼Œå¦‚æœä½ ä¹‹å‰å­¦ä¹ è¿‡æˆ‘çš„ä¸Šä¸€ä¸ªä¸“æ ã€ŠLinux æ€§èƒ½ä¼˜åŒ–å®æˆ˜ã€‹ï¼Œä½ å°±å·²ç»æŠŠ eBPF ç”¨åˆ°äº†æ€§èƒ½ä¼˜åŒ–çš„åœºæ™¯ä¸­ã€‚ä½œä¸ºæœ€çµæ´»çš„åŠ¨æ€è¿½è¸ªæ–¹æ³•ï¼Œ<a href=\"https://github.com/iovisor/bcc\">BCC</a> åŒ…å«çš„æ‰€æœ‰å·¥å…·éƒ½æ˜¯åŸºäº eBPF å¼€å‘çš„ã€‚å¦‚ä¸‹å›¾ï¼ˆå›¾ç‰‡æ¥è‡ª <a href=\"https://www.brendangregg.com/Perf/bcc_tracing_tools.png\">www.brendangregg.com</a>ï¼‰æ‰€ç¤ºï¼ŒBCC æä¾›äº†è´¯ç©¿å†…æ ¸å„ä¸ªå­ç³»ç»Ÿçš„åŠ¨æ€è¿½è¸ªå·¥å…·ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/82/f3/82d8912ebdc2815e29b6dc754a5f03f3.png?wh=1500x1050\" alt=\"å›¾ç‰‡\" title=\"BCC å·¥å…·å¤§å…¨\"></p><p>æ‰€æœ‰çš„è¿™äº›å·¥å…·éƒ½æ˜¯å¼€æºçš„ï¼Œå®ƒä»¬å…¶å®ä¹Ÿæ˜¯å­¦ä¹  eBPF æœ€å¥½çš„å‚è€ƒèµ„æ–™ã€‚<strong>ä½ å¯ä»¥å…ˆæŠŠè¿™äº›å·¥å…·ç”¨èµ·æ¥ï¼Œç„¶åé€šè¿‡æºç äº†è§£å®ƒä»¬çš„å·¥ä½œåŸç†ï¼Œæœ€åå†å°è¯•æ‰©å±•è¿™äº›å·¥å…·ï¼Œå¢åŠ è‡ªå·±çš„æƒ³æ³•ã€‚</strong></p><p>ä½†æ˜¯åˆ‡è®°ï¼ŒBCC ç­‰å·¥å…·å¹¶ä¸æ˜¯å­¦ä¹ çš„å…¨éƒ¨ã€‚å·¥å…·åªæ˜¯è§£å†³é—®é¢˜çš„æ‰‹æ®µï¼Œå…³é”®è¿˜æ˜¯èƒŒåçš„å·¥ä½œåŸç†ã€‚åªæœ‰æŒæ¡äº† eBPF çš„æ ¸å¿ƒåŸç†ï¼Œå¹¶ä¸”ç»“åˆå…·ä½“å®è·µèä¼šè´¯é€šï¼Œä½ æ‰èƒ½çœŸæ­£æŒæ¡å®ƒä»¬ã€‚</p><p>æœ€åï¼Œä¸ºäº†è®©ä½ å¯¹ eBPF æœ‰ä¸ªå…¨é¢çš„è®¤è¯†ï¼Œæˆ‘ç”»äº†ä¸€å¼ æ€ç»´å¯¼å›¾ï¼Œé‡Œé¢æ¶µç›–äº† eBPF çš„æ‰€æœ‰å­¦ä¹ é‡ç‚¹ï¼Œè¿™é—¨è¯¾ä¸­ä¹ŸåŸºæœ¬éƒ½ä¼šè®²åˆ°ã€‚ä½ å¯ä»¥æŠŠè¿™å¼ å›¾ä¿å­˜æˆ–è€…æ‰“å°ä¸‹æ¥ï¼Œæ¯å­¦ä¼šä¸€éƒ¨åˆ†ï¼Œå°±åœ¨ä¸Šé¢åšæ ‡è®°ï¼Œè¿™æ ·å°±èƒ½æ›´å¥½åœ°è®°å½•å¹¶æŠŠæ¡è‡ªå·±çš„å­¦ä¹ è¿›åº¦ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/03/9a/030c0c56a9d210690c75770fe6761f9a.jpg?wh=1920x2355\" alt=\"å›¾ç‰‡\"></p><h2>æ€ä¹ˆå­¦ä¹ æ›´é«˜æ•ˆï¼Ÿ</h2><p>å‰é¢ï¼Œæˆ‘ç»™ä½ è®²äº† eBPF çš„å­¦ä¹ é‡ç‚¹ï¼Œæ¥ä¸‹æ¥æˆ‘å†è·Ÿä½ åˆ†äº«å‡ ä¸ªå­¦ä¹ æŠ€å·§ã€‚æŒæ¡äº†è¿™äº›æŠ€å·§ï¼Œä½ å¯ä»¥å­¦ä¹ å¾—æ›´è½»æ¾ã€‚</p><p><strong>æŠ€å·§ä¸€ï¼šè™½ç„¶å¯¹å†…æ ¸æºç çš„ç†è§£å¾ˆé‡è¦ï¼Œä½†åˆ‡è®°ï¼Œä¸è¦é™·å…¥å†…æ ¸çš„å®ç°ç»†èŠ‚ä¸­ã€‚</strong></p><p>eBPF çš„å­¦ä¹ å’Œä½¿ç”¨ç»•ä¸å¼€å¯¹å†…æ ¸æºç çš„ç†è§£å’Œåº”ç”¨ï¼Œä½†å¹¶ä¸æ˜¯è¯´å­¦ä¹  eBPF å°±ä¸€å®šè¦æŒæ¡æ‰€æœ‰çš„å†…æ ¸æºç ã€‚å®é™…ä¸Šï¼Œå¦‚æœä½ ä¸€å¼€å§‹å°±é™·å…¥äº†å†…æ ¸çš„å…·ä½“å®ç°ç»†èŠ‚ä¸­ï¼Œå¾ˆå¯èƒ½ä¼šå› ä¸ºå·¨å¤§çš„å›°éš¾è€Œäº§ç”Ÿé€€æ„ã€‚</p><p>ä½ è¦è®°å¾—ï¼Œå­¦ä¹  eBPF çš„ç›®çš„å¹¶ä¸æ˜¯æŒæ¡å†…æ ¸ï¼Œè€Œæ˜¯åˆ©ç”¨ eBPF è¿™ä¸ªå¼ºå¤§çš„æ­¦å™¨å»è§£å†³ç½‘ç»œã€è§‚æµ‹ã€æ’é”™ä»¥åŠå®‰å…¨ç­‰å®é™…çš„é—®é¢˜ã€‚å› è€Œï¼Œå¯¹åˆå­¦è€…æ¥è¯´ï¼ŒæŒæ¡ eBPF çš„åŸºæœ¬åŸç†ä»¥åŠç¼–ç¨‹æ¥å£æ‰æ˜¯å­¦ä¹ çš„é‡ç‚¹ã€‚æœ€åå†å¼ºè°ƒä¸€éï¼Œå­¦ä¹ æ—¶è¦åˆ†æ¸…ä¸»æ¬¡ï¼Œä¸è¦é™·å…¥å†…æ ¸çš„å®ç°ç»†èŠ‚ä¸­ã€‚</p><p><strong>æŠ€å·§äºŒï¼šè¾¹å­¦ä¹ è¾¹å®è·µï¼Œå¹¶å¤§èƒ†å€Ÿé‰´å¼€æºé¡¹ç›®ã€‚</strong></p><p>eBPF çš„åŸºæœ¬åŸç†å½“ç„¶é‡è¦ï¼Œä½†åªæ‡‚åŸç†è€Œä¸åŠ¨æ‰‹å®æˆ˜ï¼Œå¹¶ä¸èƒ½çœŸæ­£æŒæ¡ eBPFã€‚åªæœ‰ç”¨ eBPF è§£å†³äº†å®é™…çš„é—®é¢˜ï¼ŒeBPF æ‰çœŸæ­£ç®—æ˜¯ä½ çš„æ­¦å™¨ã€‚</p><p>å¾—ç›Šäºå¼€æºè½¯ä»¶ï¼Œæ— è®ºåœ¨ Linux å†…æ ¸ä¸­è¿˜æ˜¯åœ¨ GitHub ç­‰å¼€æºç½‘ç«™ä¸Šï¼Œä½ éƒ½å¯ä»¥æ‰¾åˆ°å¤§é‡åŸºäº eBPF çš„å¼€æºæ¡ˆä¾‹ã€‚åœ¨åŠ¨æ‰‹å®è·µ eBPF æ—¶ï¼Œä½ å¯ä»¥å¤§èƒ†å€Ÿé‰´å®ƒä»¬çš„æ€è·¯ï¼Œå­¦ä¹ å¼€æºç¤¾åŒºä¸­è§£å†³åŒç±»é—®é¢˜çš„åŠæ³•ã€‚</p><p><strong>æŠ€å·§ä¸‰ï¼šå¤šäº¤æµã€å¤šæ€è€ƒï¼Œå¹¶å‚ä¸å¼€æºç¤¾åŒºè®¨è®ºã€‚</strong></p><p>ä½œä¸ºä¸€ä¸ªå®è·µæ€§å¾ˆå¼ºï¼Œå¹¶ä¸”åœ¨é£é€Ÿå‘å±•çš„æŠ€æœ¯ï¼ŒeBPF çš„åŠŸèƒ½ç‰¹æ€§è¿˜åœ¨å¿«é€Ÿè¿­ä»£ä¸­ã€‚åŒæ—¶ï¼Œç”±äºæ–°æŠ€æœ¯æ€»æœ‰ä¸€ä¸ªæˆç†Ÿçš„è¿‡ç¨‹ï¼Œåœ¨å¼€å§‹æ¥è§¦å’Œåº”ç”¨ eBPF æ—¶ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦ç•™æ„å®ƒåœ¨ä¸åŒå†…æ ¸ç‰ˆæœ¬ä¸­çš„é™åˆ¶ã€‚</p><p>æ‰€ä»¥ï¼Œæˆ‘å¸Œæœ›ä½ åœ¨å­¦ä¹  eBPF çš„è¿‡ç¨‹ä¸­ï¼Œåšåˆ°å¤šäº¤æµã€å¤šæ€è€ƒã€‚ä½ å¯ä»¥éšæ—¶åœ¨è¯„è®ºåŒºç»™æˆ‘ç•™è¨€ï¼Œå†™ä¸‹è‡ªå·±çš„ç–‘é—®ã€æ€è€ƒå’Œæ€»ç»“ï¼Œå’Œæˆ‘è¿˜æœ‰å…¶ä»–çš„å­¦ä¹ è€…ä¸€èµ·è®¨è®ºåˆ‡ç£‹ã€‚çœ‹åˆ°ä¼˜ç§€çš„å¼€æºé¡¹ç›®æ—¶ï¼Œä½ ä¹Ÿå¯ä»¥å»å‚ä¸è´¡çŒ®ï¼Œå’Œå¼€æºç¤¾åŒºçš„å¤§æ‹¿ä»¬å…±åŒå®Œå–„ eBPF ç”Ÿæ€ã€‚</p><h2>å°ç»“</h2><p>ä»Šå¤©ï¼Œæˆ‘å¸¦ä½ ä¸€èµ·æ¢³ç†äº†é«˜æ•ˆå­¦ä¹  eBPF çš„æ–¹æ³•ï¼Œå¹¶åˆ†äº«äº†ä¸€äº›æˆ‘åœ¨å­¦ä¹  eBPF æ—¶æ•´ç†çš„æŠ€å·§ã€‚</p><p>ç›¸å¯¹äºå…¶ä»–æŠ€æœ¯æ¥è¯´ï¼ŒeBPF æ˜¯ä¸€ä¸ªæ›´æ¥è¿‘ Linux åº•å±‚çš„æŠ€æœ¯ã€‚è™½ç„¶å­¦ä¹ å®ƒä¹‹å‰ä¸éœ€è¦ä½ æŒæ¡å†…æ ¸çš„å¼€å‘ï¼Œä½†ç”±äº eBPF çš„åº”ç”¨æ€»æ˜¯ä¼´éšç€å¤§é‡çš„å¼€å‘è¿‡ç¨‹ï¼Œä½ æœ€å¥½å¯ä»¥å…ˆç†Ÿæ‚‰ Linux ç³»ç»Ÿçš„åŸºæœ¬ä½¿ç”¨æ–¹æ³•ï¼Œä»¥åŠ Cã€Python ç­‰è¯­è¨€çš„åŸºç¡€ç¼–ç¨‹ã€‚</p><p>åœ¨å­¦ä¹  eBPF æŠ€æœ¯æ—¶ï¼Œä½ ä¹Ÿä¸éœ€è¦æŒæ¡æ‰€æœ‰ç›¸å…³æŠ€æœ¯çš„ç»†èŠ‚ï¼Œåªè¦é‡ç‚¹æŠŠæ¡ eBPF åŸºæœ¬åŸç†å’Œç¼–ç¨‹æ¥å£ï¼Œå†é…åˆå¤§é‡çš„å·¥ä½œå®è·µï¼Œä½ å°±å¯ä»¥å®Œå…¨æŒæ¡ eBPF æŠ€æœ¯ã€‚</p><p>å½“ç„¶äº†ï¼ŒeBPF è¿˜å¤„åœ¨é£é€Ÿå‘å±•çš„è¿‡ç¨‹ä¸­ï¼Œå¤šäº†è§£å¼€æºç¤¾åŒºçš„è¿›å±•å’Œæœ€æ–°åº”ç”¨æ¡ˆä¾‹ï¼Œå¤šå‚ä¸å¼€æºç¤¾åŒºè®¨è®ºï¼Œå¯ä»¥å¸®ä½ æ›´æ·±åˆ»åœ°ç†è§£ eBPF çš„æ ¸å¿ƒåŸç†ï¼ŒåŒæ—¶æ›´å¥½åœ°æŠŠæ¡ eBPF æœªæ¥çš„å‘å±•æ–¹å‘ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>è¿™ä¸€è®²å’Œä¸Šä¸€è®²çš„å†…å®¹ï¼Œéƒ½æ˜¯ä¸ºæˆ‘ä»¬åç»­çš„å­¦ä¹ åšå‡†å¤‡çš„ï¼Œä½ å¯ä»¥æŠŠå®ƒä»¬å½“ä½œè¯¾å‰çš„çƒ­èº«ç¯èŠ‚ã€‚ä»ä¸‹ä¸€è®²å¼€å§‹ï¼Œæˆ‘ä»¬å°±è¦æ­£å¼è¿›å…¥ eBPF çš„ä¸–ç•Œäº†ã€‚æ‰€ä»¥ï¼Œæˆ‘æƒ³è¯·ä½ èŠä¸€èŠï¼š</p><ol>\n<li>ä½ ä¹‹å‰æœ‰æ²¡æœ‰äº†è§£è¿‡åŸºäº eBPF çš„å¼€æºé¡¹ç›®ï¼Œå¯ä»¥å’ŒåŒå­¦ä»¬åˆ†äº«ä½ è§‰å¾—ä¼˜ç§€çš„é¡¹ç›®å—ï¼Ÿ</li>\n<li>åœ¨å­¦ä¹ å’Œä½¿ç”¨ eBPF æ—¶ï¼Œä½ æœ‰å“ªäº›å¿ƒå¾—ï¼Œåˆé‡åˆ°è¿‡å“ªäº›é—®é¢˜ï¼Ÿæ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ã€‚</li>\n</ol><p>ä»Šå¤©çš„å†…å®¹å°±ç»“æŸäº†ï¼Œæ¬¢è¿æŠŠå®ƒåˆ†äº«ç»™ä½ çš„åŒäº‹å’Œæœ‹å‹ï¼Œæˆ‘ä»¬ä¸‹ä¸€è®²è§ã€‚</p>","neighbors":{"left":{"article_title":"01ï½œæŠ€æœ¯æ¦‚è§ˆï¼šeBPF çš„å‘å±•å†ç¨‹åŠå·¥ä½œåŸç†","id":479384},"right":{"article_title":"03 | åˆçª¥é—¨å¾„ï¼šå¼€å‘å¹¶è¿è¡Œä½ çš„ç¬¬ä¸€ä¸ª eBPF ç¨‹åº","id":481090}},"comments":[{"had_liked":false,"id":331452,"user_name":"è«å","can_delete":false,"product_type":"c1","uid":1007254,"ip_address":"","ucode":"E28F2602BA25DD","user_header":"https://static001.geekbang.org/account/avatar/00/0f/5e/96/a03175bc.jpg","comment_is_top":false,"comment_ctime":1642590287,"is_pvip":false,"replies":[{"id":"121065","content":"å¾ˆèµçš„åˆ†äº«ï¼Œè°¢è°¢ï¼æ¬¢è¿åˆ†äº«æ›´å¤šçš„å®è·µç»éªŒã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1001282","ctime":1642593517,"ip_address":"","comment_id":331452,"utype":1}],"discussion_count":8,"race_medal":0,"score":"121901674575","product_id":100104501,"comment_content":"æ›¾åŸºäº BPF åšè¿‡ä¸€ä¸ªå®¹å™¨å¹³å°çš„é“¾è·¯è¿½è¸ªç³»ç»Ÿï¼Œåˆ†è§£å‡ºå•ä¸ªè¯·æ±‚åœ¨æœåŠ¡ç«¯ç»è¿‡çš„èŠ‚ç‚¹ã€ç½‘ç»œè®¾å¤‡ã€è€—æ—¶ç­‰ä¿¡æ¯ï¼Œä¾¿äºå¿«é€Ÿå®šä½ç½‘ç»œæŠ–åŠ¨æ—¶ä¸»è¦å»¶è¿Ÿçš„å…·ä½“å‘ç”Ÿç‚¹ã€‚<br><br>é‡åˆ°æœ€å¤šçš„æ˜¯å†…æ ¸ç‰ˆæœ¬å·®å¼‚å¼•èµ·çš„å„ç±»ç¼–è¯‘é—®é¢˜ï¼Œè¦ä¹ˆè·‘ä¸èµ·æ¥ï¼Œè¦ä¹ˆè¿è¡Œç»“æœä¸ç¬¦åˆé¢„æœŸã€‚å°¤å…¶ 4.9 å†…æ ¸é—®é¢˜å¾ˆå¤šï¼Œ5.x ç‰ˆæœ¬çš„å†…æ ¸è‡ªå·±åœ¨æµ‹è¯•ç¯å¢ƒç”¨ä¸€ç”¨è¿˜è¡Œï¼Œçº¿ä¸Šçš„å†…æ ¸ç‰ˆæœ¬ç›¸å¯¹ä¼šä¿å®ˆï¼Œå‡ å¹´å‰ 3.10  çš„å æ¯”å¾ˆé«˜ã€‚ä¸è¿‡å¥½æ¶ˆæ¯æ˜¯ï¼Œæ–°æœºå™¨çš„å†…æ ¸ä¸€èˆ¬éƒ½ç›´æ¥ä½¿ç”¨ 4.xï¼Œç”šè‡³ 5.xã€‚BPF è½åœ°ç”Ÿäº§ç¯å¢ƒçš„ç¯å¢ƒé˜»åŠ›å°äº†å¾ˆå¤šã€‚<br><br>å¦‚æœå…¬å¸çš„ç¯å¢ƒæš‚æ—¶è¿˜ä¸èƒ½åº”ç”¨ BPF æŠ€æœ¯ï¼Œä¸å¦¨ç¢å…ˆè¿›è¡ŒçŸ¥è¯†å‚¨å¤‡ï¼Œè‡ªå·±å…ˆç©èµ·æ¥ï¼Œç­‰åˆ°çœŸæ­£è¢«éœ€è¦çš„æ—¶å€™å°±å¯ä»¥å‘æŒ¥ä½œç”¨äº†ã€‚","like_count":29,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":547235,"discussion_content":"å¾ˆèµçš„åˆ†äº«ï¼Œè°¢è°¢ï¼æ¬¢è¿åˆ†äº«æ›´å¤šçš„å®è·µç»éªŒã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642593517,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1120541,"avatar":"https://static001.geekbang.org/account/avatar/00/11/19/1d/d2b6e006.jpg","nickname":"ç«ç«å¯»","note":"","ucode":"B6DC003A5D89AF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":556719,"discussion_content":"æœåŠ¡ç«¯ç»è¿‡çš„èŠ‚ç‚¹ï¼Œç½‘ç»œè®¾å¤‡ï¼Ÿ å•¥æ„æ€å•Šï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647484974,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1007254,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5e/96/a03175bc.jpg","nickname":"è«å","note":"","ucode":"E28F2602BA25DD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1120541,"avatar":"https://static001.geekbang.org/account/avatar/00/11/19/1d/d2b6e006.jpg","nickname":"ç«ç«å¯»","note":"","ucode":"B6DC003A5D89AF","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":557792,"discussion_content":"èŠ‚ç‚¹åŒ…æ‹¬ç‰©ç†æœºã€è™šæ‹Ÿæœºï¼Œç½‘ç»œè®¾å¤‡åŒ…æ‹¬ç‰©ç†ç½‘å¡ã€è™šæ‹Ÿç½‘å¡ veth ç­‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647961326,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":556719,"ip_address":""},"score":557792,"extra":""}]},{"author":{"id":2233803,"avatar":"https://static001.geekbang.org/account/avatar/00/22/15/cb/257f73c5.jpg","nickname":"yamowner","note":"","ucode":"D3BBBDD53F5F70","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":556663,"discussion_content":"åˆå­¦bpfï¼Œæœ€è¿‘ä¹Ÿåœ¨åŸºäºBPFåšä¸€ä¸ªç±»ä¼¼çš„demoï¼Œä½†æ˜¯ç›®å‰åªåšåˆ°äº†åŸºäºtcpè¿æ¥çš„æœåŠ¡æ‹“æ‰‘çš„ç”Ÿæˆï¼Œå¯¹äºå•è¯·æ±‚çš„é“¾è·¯è¿½è¸ªåˆ†æé‡‡ç”¨bpfè¿™ç§éä¾µå…¥å¼çš„æ–¹å¼æ²¡ä¸€ç‚¹æ€è·¯ï¼Œæ„Ÿè§‰ä¸å¤ªå¯èƒ½åšåˆ°çš„å•Š:) å¤§ä½¬ä»¬èƒ½æŒ‡ç‚¹ä¸€ä¸‹å¤§æ¦‚æ€è·¯å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647442874,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":4,"child_discussions":[{"author":{"id":1007254,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5e/96/a03175bc.jpg","nickname":"è«å","note":"","ucode":"E28F2602BA25DD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2233803,"avatar":"https://static001.geekbang.org/account/avatar/00/22/15/cb/257f73c5.jpg","nickname":"yamowner","note":"","ucode":"D3BBBDD53F5F70","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":557799,"discussion_content":"å¯ä»¥çš„ï¼ŒæŒ‰éœ€éƒ¨ç½² agent åˆ°è¯·æ±‚ç»è¿‡çš„èŠ‚ç‚¹ä¸Šé¢ï¼ŒæŠŠæ•°æ®æ±‡æ€»åœ¨ä¸€èµ·è¿›è¡Œåˆ†æã€å…³è”ã€‚ç±»ä¼¼äº map-reduceã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647961579,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":556663,"ip_address":""},"score":557799,"extra":""},{"author":{"id":2233803,"avatar":"https://static001.geekbang.org/account/avatar/00/22/15/cb/257f73c5.jpg","nickname":"yamowner","note":"","ucode":"D3BBBDD53F5F70","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1007254,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5e/96/a03175bc.jpg","nickname":"è«å","note":"","ucode":"E28F2602BA25DD","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":557925,"discussion_content":"å—¯å—¯ï¼Œæˆ‘åšçš„æ—¶å€™ä¹Ÿæ˜¯è¿™ä¸ªæ€è·¯ï¼Œä½†æ˜¯é‡‡é›†å…·ä½“è¯·æ±‚ä¿¡æ¯çš„å®ç°ä¸Šç™¾æ€ä¸è§£ï¼Œæˆ‘ç†è§£æ˜¯éœ€è¦è·å–åˆ°å•ä¸ªè¯·æ±‚è´¯ç©¿æ•´ä¸ªè°ƒç”¨é“¾çš„TraceIDçš„å§ï¼Œè¿™ä¸ªä¿¡æ¯çš„é‡‡é›†é€šè¿‡bpfè¿™ç§éä¾µå…¥å¼çš„æ–¹å¼æ˜¯å¯ä»¥å®ç°çš„å—ï¼Ÿsidecaræ¨¡å¼ä¸‹å€’æ˜¯æœ‰å¯èƒ½ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1648026863,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":557799,"ip_address":""},"score":557925,"extra":""},{"author":{"id":1007254,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5e/96/a03175bc.jpg","nickname":"è«å","note":"","ucode":"E28F2602BA25DD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2233803,"avatar":"https://static001.geekbang.org/account/avatar/00/22/15/cb/257f73c5.jpg","nickname":"yamowner","note":"","ucode":"D3BBBDD53F5F70","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":558001,"discussion_content":"TraceID æ˜¯åˆ†å¸ƒå¼è¿½è¸ªé‡‡ç”¨çš„æ‰‹æ®µï¼Œå¯¹ä¸šåŠ¡ä¸€èˆ¬æœ‰ä¾µå…¥æ€§ã€‚å¯ä»¥åšåŸºäºç«¯å£çš„ï¼Œåœ¨é“¾è·¯ä¸Šå¯èƒ½ä¼šæœ‰ NAT ç«¯å£è½¬æ¢ï¼Œä¸è¿‡ä¹Ÿæ˜¯å¯è§£çš„ã€‚å…·ä½“ä½ å†æ€è€ƒä¸‹ï¼Œæˆ‘åªèƒ½å¤§è‡´è®²ä¸€ä¸‹æ€è·¯ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1648040932,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":557925,"ip_address":""},"score":558001,"extra":""}]}]},{"had_liked":false,"id":331371,"user_name":"ermaot","can_delete":false,"product_type":"c1","uid":1304459,"ip_address":"","ucode":"DD5AC5FFEAA9CC","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/1PyKtnO7QRIP8mlcGNu4wpYVjOo6ZZ7pNIxbmRSYK0KvbcXPVcsiba4ibo1GTjQrRYibiaPxrrTPtlGnzoDEP7tDBQ/132","comment_is_top":false,"comment_ctime":1642564071,"is_pvip":false,"replies":[{"id":"121068","content":"å—¯å—¯ï¼Œè¿™æœ¬ä¹¦ä¸é”™ï¼Œæˆ‘ä»¬ä¸€èµ·åŠ æ²¹ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1001282","ctime":1642593868,"ip_address":"","comment_id":331371,"utype":1}],"discussion_count":4,"race_medal":0,"score":"44592237031","product_id":100104501,"comment_content":"ä»å€ªè€å¸ˆçš„linuxæ€§èƒ½ç¯‡ï¼Œäº†è§£åˆ°äº†ebpfï¼Œå°±ä¹°äº†ã€Šbpfä¹‹å·…ã€‹è‡ªå­¦äº†ä¸€é˜µï¼Œç°åœ¨å±…ç„¶å€ªè€å¸ˆä¹Ÿå‡ºäº†ebpfçš„è¯¾ç¨‹ï¼Œæœæ–­å…¥æ‰‹ï¼Œå¸Œæœ›è®¤è¯†èƒ½æ›´ä¸Šä¸€ä¸ªå°é˜¶","like_count":11,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":547238,"discussion_content":"å—¯å—¯ï¼Œè¿™æœ¬ä¹¦ä¸é”™ï¼Œæˆ‘ä»¬ä¸€èµ·åŠ æ²¹ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642593869,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1120024,"avatar":"https://static001.geekbang.org/account/avatar/00/11/17/18/e4382a8e.jpg","nickname":"æœ‰è¯†ä¹‹å£«","note":"","ucode":"23F5594193D200","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581056,"discussion_content":"å“ˆå“ˆå“ˆ ç°åœ¨å°±åœ¨ä¸€éå­¦ä¹ ä¸“æ ï¼Œä¸€éå­¦ä¹ è¿™æœ¬ä¹¦äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658475328,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1046063,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f6/2f/d3f1dae6.jpg","nickname":"L33K","note":"","ucode":"2F8E105F44E347","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":547244,"discussion_content":"+1, ã€Šbpfä¹‹å·…ã€‹æœ‰ç‚¹åšï¼Œå•ƒèµ·æ¥æœ‰ç‚¹è´¹åŠ²","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642594197,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1129668,"avatar":"https://static001.geekbang.org/account/avatar/00/11/3c/c4/7c2bf312.jpg","nickname":"è‰æ ¹","note":"","ucode":"7C97CB09A4D8F1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":547221,"discussion_content":"æœ‰ç”µå­ç‰ˆçš„å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642586832,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":332730,"user_name":"ranger","can_delete":false,"product_type":"c1","uid":1000242,"ip_address":"","ucode":"01C26E1DEF77FE","user_header":"https://static001.geekbang.org/account/avatar/00/0f/43/32/3eeac151.jpg","comment_is_top":false,"comment_ctime":1643528309,"is_pvip":false,"replies":[{"id":"121661","content":"ğŸ‘ æ¬¢è¿åœ¨ç•™è¨€åŒºåˆ†äº«ä½ çš„å­¦ä¹ å’Œå®è·µç»éªŒã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1001282","ctime":1643812163,"ip_address":"","comment_id":332730,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18823397493","product_id":100104501,"comment_content":"æ­£åœ¨æ¥è§¦æ··æ²Œå·¥ç¨‹å’Œå…¶ä¸­ä¸€æ¬¾å¼€æºäº§å“chaos-meshï¼Œä¸€ä¸ªåŸºäºbpfå®ç°çš„å†…æ ¸æ•…éšœæ³¨å…¥çš„æ¨¡å—bpfki","like_count":5,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":549292,"discussion_content":"ğŸ‘ æ¬¢è¿åœ¨ç•™è¨€åŒºåˆ†äº«ä½ çš„å­¦ä¹ å’Œå®è·µç»éªŒã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643812163,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":331398,"user_name":"includestdio.h","can_delete":false,"product_type":"c1","uid":2314854,"ip_address":"","ucode":"5027BACE9319CD","user_header":"https://static001.geekbang.org/account/avatar/00/23/52/66/3e4d4846.jpg","comment_is_top":false,"comment_ctime":1642573279,"is_pvip":true,"replies":[{"id":"121066","content":"æ„Ÿè°¢å¯¹ä¸“æ çš„æ”¯æŒï¼Œå…¶å®æˆ‘ä»¬æ€§èƒ½ä¼˜åŒ–ä¸“æ é‡Œé¢å·²ç»ç”¨äº†å¾ˆå¤šçš„ebpfå·¥å…·ï¼Œè¿™é—¨è¯¾ä¹‹åæˆ‘ä»¬å°±å¯ä»¥è‡ªå·±æŒ‰éœ€æ¥æ„å»ºè‡ªå·±çš„æ€§èƒ½ä¼˜åŒ–å·¥å…·äº†","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1001282","ctime":1642593709,"ip_address":"","comment_id":331398,"utype":1}],"discussion_count":2,"race_medal":1,"score":"5937540575","product_id":100104501,"comment_content":"ç¬¬ä¸€æ¬¡æ¥è§¦bpfæ˜¯é€šè¿‡è€å¸ˆçš„ linuxæ€§èƒ½ä¼˜åŒ–ä¸“æ ï¼Œç„¶åçœ‹åˆ°è€å¸ˆæœ‰æ¨èæ€§èƒ½ä¹‹å·…è¿™æœ¬ä¹¦ï¼Œæœæ–­å…¥æ‰‹å¹¶æ–­æ–­ç»­ç»­çœ‹å®Œäº†ï¼Œç›®å‰å®é™…å·¥ä½œä¸­è¿˜æ²¡æœ‰æ¥è§¦è¿‡ebpfï¼Œå› æ­¤ä¹Ÿæ— ä»å…¥æ‰‹ï¼Œå¸Œæœ›é€šè¿‡ä¸“æ èƒ½æ”¶è·æ›´å¤š","like_count":2,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":547236,"discussion_content":"æ„Ÿè°¢å¯¹ä¸“æ çš„æ”¯æŒï¼Œå…¶å®æˆ‘ä»¬æ€§èƒ½ä¼˜åŒ–ä¸“æ é‡Œé¢å·²ç»ç”¨äº†å¾ˆå¤šçš„ebpfå·¥å…·ï¼Œè¿™é—¨è¯¾ä¹‹åæˆ‘ä»¬å°±å¯ä»¥è‡ªå·±æŒ‰éœ€æ¥æ„å»ºè‡ªå·±çš„æ€§èƒ½ä¼˜åŒ–å·¥å…·äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642593709,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1129668,"avatar":"https://static001.geekbang.org/account/avatar/00/11/3c/c4/7c2bf312.jpg","nickname":"è‰æ ¹","note":"","ucode":"7C97CB09A4D8F1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":547222,"discussion_content":"BPFä¹‹å·…:æ´æ‚‰Linuxç³»ç»Ÿå’Œåº”ç”¨æ€§èƒ½ æœ‰ç‚¹å­ç‰ˆçš„å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642586855,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":332121,"user_name":"ç§‹åå±±çŠ¬ç¥","can_delete":false,"product_type":"c1","uid":2619000,"ip_address":"","ucode":"592EBA292D9EA2","user_header":"https://static001.geekbang.org/account/avatar/00/27/f6/78/84513df0.jpg","comment_is_top":false,"comment_ctime":1643029531,"is_pvip":true,"replies":[{"id":"121412","content":"k8så¼€æºçš„ï¼Œæ‰€æœ‰è´¡çŒ®Githubä¸Šé¢éƒ½å¯ä»¥æœåˆ°ğŸ˜Š","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1001282","ctime":1643202202,"ip_address":"","comment_id":332121,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1643029531","product_id":100104501,"comment_content":"æƒ³çŸ¥é“ä¸‹k8sä¸­çš„å“ªäº›åŠŸèƒ½æ˜¯è€å¸ˆè´¡çŒ®çš„","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":548454,"discussion_content":"k8så¼€æºçš„ï¼Œæ‰€æœ‰è´¡çŒ®Githubä¸Šé¢éƒ½å¯ä»¥æœåˆ°ğŸ˜Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643202202,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1120024,"avatar":"https://static001.geekbang.org/account/avatar/00/11/17/18/e4382a8e.jpg","nickname":"æœ‰è¯†ä¹‹å£«","note":"","ucode":"23F5594193D200","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581055,"discussion_content":"https://github.com/kubernetes/kubernetes/pulls?q=is%3Apr+author%3Afeiskyer+is%3Aclosed   ä¼ é€è€å¸ˆçš„è´¡çŒ®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658475247,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}