{"id":527685,"title":"01ï½œä¸­é—´ä»¶ç”Ÿæ€ï¼ˆä¸Šï¼‰ï¼šæœ‰å“ªäº›ç±»å‹çš„ä¸­é—´ä»¶ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯ä¸å¨ã€‚</p><p>æœ€è¿‘åå¹´æ˜¯äº’è”ç½‘ç£…ç¤´å‘å±•çš„åå¹´ï¼ŒITç³»ç»Ÿä»å•ä½“åº”ç”¨é€æ¸å‘åˆ†å¸ƒå¼æ¶æ„æ¼”å˜ï¼Œé«˜å¹¶å‘ã€é«˜å¯ç”¨ã€é«˜æ€§èƒ½ã€åˆ†å¸ƒå¼ç­‰è¯é¢˜å˜å¾—å¼‚å¸¸ç«çƒ­ï¼Œä¸­é—´ä»¶ä¹Ÿåœ¨è¿™ä¸€æ—¶æœŸå¦‚é›¨åæ˜¥ç¬‹èˆ¬æ¶Œç°å‡ºæ¥ï¼Œé‚£åˆ°åº•ä»€ä¹ˆæ˜¯ä¸­é—´ä»¶å‘¢ï¼Ÿå­˜åœ¨å“ªäº›ç±»å‹çš„ä¸­é—´ä»¶å‘¢ï¼ŸåŒä¸€ç±»å‹çš„ä¸­é—´ä»¶ï¼Œæˆ‘ä»¬è¯¥æ€ä¹ˆé€‰æ‹©ï¼Ÿæ¥ä¸‹æ¥çš„ä¸¤èŠ‚è¯¾ï¼Œæˆ‘ä»¬å°±æ¥èŠèŠè¿™äº›é—®é¢˜ã€‚</p><p>ä¸­é—´ä»¶çš„ç§ç±»å¾ˆå¤šï¼Œæˆ‘ä»¬æ— æ³•æŠŠæ‰€æœ‰ç±»å‹å’Œäº§å“åˆ—å‡ºæ¥é€ä¸€è®²è§£ã€‚ä½†æ˜¯æ¯ä¸ªç±»åˆ«çš„ä¸­é—´ä»¶åœ¨è®¾è®¡åŸç†ã€ä½¿ç”¨ä¸Šæœ‰å¾ˆå¤šå…±åŒçš„è€ƒé‡æ ‡å‡†ï¼Œåªè¦äº†è§£äº†æœ€é‡è¦ã€æœ€ä¸»æµçš„å‡ ç§ä¸­é—´ä»¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ–¹ä¾¿åœ°è¿›è¡ŒçŸ¥è¯†è¿ç§»ï¼Œä¸¾ä¸€åä¸‰äº†ï¼Œç„¶åå­¦ä¹ å…¶ä»–ä¸­é—´ä»¶å°†å˜å¾—éå¸¸ç®€å•ã€‚</p><p>æ‰€ä»¥å‘¢ï¼Œä½ å¯ä»¥æŠŠè¿™ä¸¤èŠ‚è¯¾çœ‹ä½œæ˜¯æçº²æŒˆé¢†çš„çŸ¥è¯†æ¸…å•ã€‚ä¸‹é¢æˆ‘ä»¬è®²åˆ°çš„ä¸­é—´ä»¶ä½ ä¸ä¸€å®šéƒ½èƒ½å¤Ÿç”¨ä¸Šï¼Œä½†åœ¨éœ€è¦çš„æ—¶å€™ï¼Œå¯ä»¥å¸®ä½ ä»æ›´åŠ é«˜å±‹å»ºç“´çš„è§’åº¦è¿…é€Ÿå†³ç­–ã€‚</p><h2>ä»€ä¹ˆæ˜¯ä¸­é—´ä»¶ï¼Ÿ</h2><p>å…ˆæ¥è¯´è¯´ä»€ä¹ˆæ˜¯ä¸­é—´ä»¶ï¼Œæˆ‘è®¤ä¸ºä¸­é—´ä»¶æ˜¯æ¸¸ç¦»äºä¸šåŠ¡éœ€æ±‚ä¹‹å¤–ï¼Œä¸“é—¨ä¸ºäº†å¤„ç†é¡¹ç›®ä¸­æ¶‰åŠé«˜å¯ç”¨ã€é«˜æ€§èƒ½ã€é«˜å¹¶å‘ç­‰æŠ€æœ¯éœ€æ±‚è€Œå¼•å…¥çš„ä¸€ä¸ªä¸ªæŠ€æœ¯ç»„ä»¶ã€‚å®ƒçš„ä¸€ä¸ªé‡è¦ä½œç”¨å°±æ˜¯èƒ½å¤Ÿå®ç°ä¸šåŠ¡ä»£ç ä¸æŠ€æœ¯åŠŸèƒ½ä¹‹é—´è§£è€¦åˆã€‚</p><p>è¿™ä¹ˆè¯´æ˜¯ä¸æ˜¯è¿˜æœ‰ç‚¹æŠ½è±¡ï¼Ÿåœ¨è¿™é‡Œå®šä¹‰é‡Œï¼Œæˆ‘æåˆ°äº†ä¸šåŠ¡éœ€æ±‚å’ŒæŠ€æœ¯éœ€æ±‚ï¼Œå…³äºè¿™ä¸¤ä¸ªè¯æˆ‘éœ€è¦å†è§£é‡Šä¸€ä¸‹ã€‚</p><p>ä¸šåŠ¡éœ€æ±‚ï¼Œç¬¼ç»Ÿåœ°è¯´å°±æ˜¯ç‰¹å®šç”¨æˆ·çš„ç‰¹å®šè¯‰æ±‚ã€‚ä»¥æˆ‘ä»¬å¿«é€’è¡Œä¸šä¸ºä¾‹ï¼šäººä¸äººä¹‹é—´éœ€è¦è·¨åŸå¸‚ä¼ é€’ç‰©å“ï¼Œé€¢å¹´è¿‡èŠ‚æˆ‘ä»¬éœ€è¦ç»™è¿œæ–¹çš„äº²äººå¯„ç¤¼ç‰©ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„ä¸šåŠ¡éœ€æ±‚ã€‚</p><!-- [[[read_end]]] --><p>æŠ€æœ¯éœ€æ±‚ï¼Œå°±æ˜¯éšç€ä¸šåŠ¡çš„ä¸æ–­æ‰©å±•ï¼Œå½¢æˆè§„æ¨¡æ•ˆåº”åå¸¦æ¥çš„ä½¿ç”¨ä¸Šçš„éœ€æ±‚ã€‚ä¾‹å¦‚ä¸Šé¢æåˆ°çš„å¯„ä»¶æœåŠ¡ï¼ŒåŸå…ˆåªéœ€è¦æœåŠ¡1ä¸‡ä¸ªå®¢æˆ·ï¼Œç”¨æˆ·ä½“éªŒéå¸¸å¥½ï¼Œä½†ç°åœ¨éœ€è¦æœåŠ¡å‡ ä¸ªäº¿çš„ç”¨æˆ·ï¼Œç”¨æˆ·åœ¨ä½¿ç”¨çš„è¿‡ç¨‹ä¸­å°±ä¼šå‡ºç°å¡é¡¿ã€ç³»ç»Ÿå¼‚å¸¸ç­‰é—®é¢˜ï¼Œå› æ­¤äº§ç”Ÿå¯ç”¨æ€§ã€ç¨³å®šæ€§æ–¹é¢çš„æŠ€æœ¯è¯‰æ±‚ã€‚</p><p>ä¸ºäº†è§£å†³å„å¼å„æ ·çš„ä¸šåŠ¡å’ŒæŠ€æœ¯è¯‰æ±‚ï¼Œä»£ç é‡ä¼šè¶Šæ¥è¶Šå¤šã€‚å¦‚æœæˆ‘ä»¬ä»»å‡­ä¸šåŠ¡ä»£ç ä¸æŠ€æœ¯ç±»ä»£ç æ²¡æœ‰ç§©åºåœ°çº ç¼ åœ¨ä¸€èµ·ï¼Œç³»ç»Ÿä¼šå˜å¾—è¶Šæ¥è¶Šä¸å¯ç»´æŠ¤ï¼Œè¿è¥æˆæœ¬ä¹Ÿä¼šæˆæŒ‡æ•°çº§å¢åŠ ï¼Œæ•…éšœé¢‘å‘ï¼Œæœ€ç»ˆç›´æ¥å¯¼è‡´é¡¹ç›®å»ºè®¾å¤±è´¥ã€‚</p><p>æ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿè®¡ç®—æœºé¢†åŸŸæœ‰ä¸€ä¸ªéå¸¸ç»å…¸çš„åˆ†å±‚æ¶æ„æ€æƒ³ï¼Œè¿˜æœ‰è¿™æ ·ä¸€å¥è¯â€œè®¡ç®—æœºé¢†åŸŸä»»ä½•ä¸€ä¸ªé—®é¢˜éƒ½å¯ä»¥é€šè¿‡åˆ†å±‚æ¥è§£å†³ï¼Œå¦‚æœä¸è¡Œï¼Œé‚£å°±å†å¢åŠ ä¸€å±‚ã€‚â€è¦æƒ³è®©ç³»ç»Ÿåšå¾—è¶Šæ¥è¶Šå¥½ï¼Œæˆ‘ä»¬<strong>é€šå¸¸ä¼šåŸºäºåˆ†å±‚çš„æ¶æ„æ€æƒ³å¼•å…¥ä¸€ä¸ªä¸­é—´å±‚ï¼Œ</strong>ä¸“é—¨æ¥è§£å†³å¯ç”¨æ€§ã€ç¨³å®šæ€§ã€é«˜æ€§èƒ½æ–¹é¢çš„æŠ€æœ¯ç±»è¯‰æ±‚ï¼Œè¿™ä¸ªä¸­é—´å±‚å°±æ˜¯ä¸­é—´ä»¶ï¼Œè¿™ä¹Ÿæ­£æ˜¯â€œä¸­é—´ä»¶â€è¿™ä¸ªè¯çš„æ¥æºã€‚</p><h2>ä¸­é—´ä»¶ç”Ÿæ€æ¼«è°ˆ</h2><p>æ˜ç™½äº†ä¸­é—´ä»¶çš„å†…æ¶µï¼Œæˆ‘ä»¬å†æ¥çœ‹çœ‹å¸‚é¢ä¸Šæœ‰å“ªäº›ä¸­é—´ä»¶ã€‚æˆ‘åœ¨å¼€ç¯‡è¯ä¸­å·²ç»æåˆ°è¿‡äº†ï¼Œä¸­é—´ä»¶çš„ç§ç±»ç¹å¤šï¼Œæˆ‘æ•´ç†äº†ä¸€ç‰ˆåˆ†å¸ƒå¼æ¶æ„ä½“ç³»ä¸­å¸¸è§çš„ä¸­é—´ä»¶ï¼Œä½ å¯ä»¥å…ˆæ‰“å¼€å›¾ç‰‡ä»”ç»†çœ‹ä¸€çœ‹ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/38/47/3817898c73b8a28acc23851457d42a47.jpg?wh=1920x2205\" alt=\"\"></p><p>ç»“åˆæˆ‘10å¤šå¹´çš„ä»ä¸šç»éªŒï¼Œç‰¹åˆ«æ˜¯å¯¹äº’è”ç½‘ä¸»æµåˆ†å¸ƒå¼æ¶æ„ä½“ç³»çš„ç ”è¯»ï¼Œæˆ‘å‘ç°<strong>å¾®æœåŠ¡ä¸­é—´ä»¶ã€æ¶ˆæ¯ä¸­é—´ä»¶ã€å®šæ—¶è°ƒåº¦çš„ä½¿ç”¨é¢‘ç‡æé«˜ï¼Œåœ¨è§£å†³åˆ†å¸ƒå¼æ¶æ„ç›¸å…³é—®é¢˜ä¸­æ˜¯æ’å¤´å…µï¼Œå…·æœ‰æ— å¯æ¯”æ‹Ÿçš„æ™®é€‚æ€§ã€‚</strong>è¿™ä¸‰è€…çš„è®¾è®¡ç†å¿µå’Œæ¡ˆä¾‹èƒ½å¯¹åˆ†å¸ƒå¼ã€é«˜å¯ç”¨å’Œé«˜å¹¶å‘ç­‰ç†å¿µå®ç°å…¨è¦†ç›–ã€‚</p><p>æ‰€ä»¥ï¼Œåœ¨ä¸“æ çš„ç¬¬ä¸‰ç« åˆ°ç¬¬äº”ç« ï¼Œæˆ‘ä¼šæ·±åº¦å‰–æå¾®æœåŠ¡ã€æ¶ˆæ¯ä¸­é—´ä»¶å’Œå®šæ—¶è°ƒåº¦è¿™ä¸‰ä¸ªæ–¹å‘ï¼Œç»“åˆç”Ÿäº§çº§ç»å…¸æ¡ˆä¾‹æ·±å…¥å‰–æå®ƒä»¬çš„æ¶æ„è®¾è®¡ç†å¿µï¼Œå¸¦ä½ æ‰å®åœ°æŒæ¡åˆ†å¸ƒå¼æ¶æ„è®¾è®¡ç›¸å…³çš„åŸºæœ¬æŠ€èƒ½ã€‚</p><ul>\n<li>å¾®æœåŠ¡</li>\n</ul><p>å…·ä½“è€Œè¨€ï¼Œä½œä¸ºè½¯ä»¶æ¶æ„ä»å•ä½“åº”ç”¨å‘åˆ†å¸ƒå¼æ¼”è¿›å‡ºç°çš„ç¬¬ä¸€ä¸ªæ–°åè¯ï¼Œå¾®æœåŠ¡æ¶‰åŠåˆ†å¸ƒå¼é¢†åŸŸä¸­æœåŠ¡æ³¨å†Œã€æœåŠ¡åŠ¨æ€å‘ç°ã€RPCè°ƒç”¨ã€è´Ÿè½½å‡è¡¡ã€æœåŠ¡èšåˆç­‰æ ¸å¿ƒæŠ€æœ¯ï¼Œè€ŒDubboåœ¨å¾®æœåŠ¡é¢†åŸŸæ˜¯å½“ä»ä¸è®©çš„ç‹è€…ã€‚æ‰€ä»¥åœ¨å¾®æœåŠ¡è¿™ä¸€éƒ¨åˆ†ï¼Œæˆ‘ä»¬ä¼šä»¥Dubboä¸ºä¾‹è¿›è¡Œå®æˆ˜æ¼”ç»ƒã€‚</p><ul>\n<li>æ¶ˆæ¯ä¸­é—´ä»¶</li>\n</ul><p>éšç€å¾®æœåŠ¡çš„è“¬å‹ƒå‘å±•ï¼Œç³»ç»Ÿçš„å¤æ‚åº¦è¶Šæ¥è¶Šé«˜ï¼ŒåŠ ä¸Šäº’è”ç½‘ç§’æ€ã€åŒåä¸€ã€618ç­‰å„ç§å¤§ä¿ƒæ´»åŠ¨å±‚å‡ºä¸ç©·ï¼Œæˆ‘ä»¬æ€¥åˆ‡éœ€è¦å¯¹ç³»ç»Ÿè§£è€¦å’Œåº”å¯¹çªå‘æµé‡çš„è§£å†³åŠæ³•ï¼Œè¿™æ—¶å€™æ¶ˆæ¯ä¸­é—´ä»¶åº”è¿è€Œç”Ÿäº†ï¼Œå®ƒåŒæ ·æˆä¸ºæˆ‘ä»¬æ¶æ„è®¾è®¡å·¥ä½œä¸­æœ€å¸¸ç”¨çš„å·¥å…·åŒ…ã€‚å¸¸ç”¨çš„æ¶ˆæ¯ä¸­é—´ä»¶åŒ…æ‹¬RocketMQã€Kafkaï¼Œå®ƒä»¬åœ¨é€‚ç”¨æ€§ä¸Šæœ‰æ‰€ä¸åŒï¼Œå¦‚ä½•ä¿éšœæ¶ˆæ¯ä¸­é—´ä»¶çš„ç¨³å®šæ€§æ˜¯ä¸€å¤§æŒ‘æˆ˜ã€‚</p><ul>\n<li>å®šæ—¶è°ƒåº¦</li>\n</ul><p>è€Œå®šæ—¶è°ƒåº¦å‘¢ï¼Ÿæˆ‘ä»¬æ—¢å¯ä»¥è®¤ä¸ºå®ƒæ˜¯ä¸ªæŠ€æœ¯éœ€æ±‚ï¼Œä¹Ÿå¯ä»¥è®¤ä¸ºå®ƒæ˜¯ä¸€ä¸ªä¸šåŠ¡ç±»éœ€æ±‚ï¼Œé€šè¿‡ç ”è¯»ElasticJobã€XXL-Jobç­‰å®šæ—¶è°ƒåº¦æ¡†æ¶ï¼Œå¯ä»¥å¾ˆå¥½åœ°æå‡æˆ‘ä»¬å¯¹ä¸šåŠ¡éœ€æ±‚çš„æ¶æ„è®¾è®¡èƒ½åŠ›ã€‚</p><p>è¿™ä¸‰éƒ¨åˆ†æˆ‘ä»¬ä¼šåœ¨åé¢çš„æ¨¡å—ä¸­é‡ç‚¹å±•å¼€ï¼Œæ‰€ä»¥è¿™ä¸€æ¨¡å—ä¸åšæ·±å…¥è®²è§£ã€‚æ¥ä¸‹æ¥ï¼Œä¸ºäº†è®©ä½ å¯¹ä¸»æµä¸­é—´ä»¶æœ‰ä¸€ä¸ªæ›´å…¨é¢çš„è®¤çŸ¥ï¼Œæˆ‘ä¼šåˆ†ä¸¤èŠ‚è¯¾å¯¹å¦å¤–çš„å‡ ç±»ä¸­é—´ä»¶ï¼ˆæ•°æ®åº“ã€ç¼“å­˜ã€æœç´¢ã€æ—¥å¿—ç­‰ï¼‰è¿›è¡Œç®€è¦é˜è¿°ï¼Œä»¥è¡¥å…¨ä½ çš„ä¸­é—´ä»¶çŸ¥è¯†å›¾è°±ï¼Œå¸®åŠ©ä½ æ›´åŠ æœ‰åº•æ°”ã€æœ‰æ•ˆç‡åœ°è¿›è¡Œå†³ç­–ã€‚è¿™èŠ‚è¯¾ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹æ•°æ®åº“ä¸­é—´ä»¶ã€‚</p><h3>æ•°æ®åº“ä¸­é—´ä»¶</h3><p>æ•°æ®åº“ä¸­é—´ä»¶åº”è¯¥æ˜¯æˆ‘ä»¬æ¥è§¦å¾—æœ€æ—©ä¹Ÿæ˜¯æœ€ä¸ºå¸¸è§çš„ä¸­é—´ä»¶ï¼Œåœ¨å¼•å…¥æ•°æ®åº“ä¸­é—´ä»¶ä¹‹å‰ï¼Œç”±äºå•ä½“åº”ç”¨å‘åˆ†å¸ƒå¼æ¶æ„æ¼”è¿›çš„è¿‡ç¨‹ä¸­å•è¡¨æ—¥æ•°æ®æ€¥é€Ÿå¢é•¿ï¼Œå•ä¸ªæ•°æ®åº“çš„èŠ‚ç‚¹å¾ˆå®¹æ˜“æˆä¸ºç³»ç»Ÿç“¶é¢ˆï¼Œæ— æ³•æä¾›ç¨³å®šçš„æœåŠ¡ã€‚å› æ­¤ï¼Œä¸ºäº†è§£å†³å¯ç”¨æ€§é—®é¢˜ï¼Œåœ¨æŠ€æœ¯æ¶æ„é¢†åŸŸé€šå¸¸æœ‰å¦‚ä¸‹ä¸¤ç§è§£å†³æ–¹æ¡ˆï¼š</p><ul>\n<li>è¯»å†™åˆ†ç¦»ï¼›</li>\n<li>åˆ†åº“åˆ†è¡¨ã€‚</li>\n</ul><p>æˆ‘ä»¬å…ˆåˆ†åˆ«è§£æä¸‹è¿™ä¸¤ä¸ªæ–¹æ¡ˆã€‚æœ€åå†æ¥çœ‹ä¸€çœ‹ï¼Œå¼•å…¥æ•°æ®åº“ä¸­é—´ä»¶ç»™æŠ€æœ¯å¸¦æ¥çš„ç®€åŒ–ã€‚</p><h4>è¯»å†™åˆ†ç¦»</h4><p>è¿™æ˜¯æˆ‘åœ¨æ²¡æœ‰æ¥è§¦ä¸­é—´ä»¶ä¹‹å‰ï¼Œåœ¨ä¸€ä¸ªé¡¹ç›®ä¸­ä½¿ç”¨è¿‡çš„æ–¹æ¡ˆï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/00/74/006b469830c171f554903cb2384e1874.jpg?wh=1620x512\" alt=\"å›¾ç‰‡\"></p><p>è¿™ä¸ªæ–¹æ¡ˆçš„å®ç°è¦ç‚¹æœ‰ä¸‰ä¸ªã€‚</p><p>ç¬¬ä¸€ï¼Œåœ¨ç¼–å†™ä¸šåŠ¡æ¥å£æ—¶ï¼Œè¦é€šè¿‡åœ¨æ¥å£ä¸Šæ·»åŠ æ³¨è§£æ¥æŒ‡ç¤ºè¿è¡Œæ—¶åº”è¯¥ä½¿ç”¨çš„æ•°æ®æºã€‚ä¾‹å¦‚ï¼Œ@SlaveofDBè¡¨ç¤ºä½¿ç”¨Slaveæ•°æ®åº“ï¼Œ@MasterOfDBè¡¨ç¤ºä½¿ç”¨ä¸»åº“ã€‚</p><p>ç¬¬äºŒï¼Œå½“ç”¨æˆ·å‘èµ·è¯·æ±‚æ—¶ï¼Œè¦å…ˆç»è¿‡ä¸€ä¸ªæ‹¦æˆªå™¨è·å–ç”¨æˆ·è¯·æ±‚çš„å…·ä½“æ¥å£ï¼Œç„¶åä½¿ç”¨åå°„æœºåˆ¶è·å–è¯¥æ–¹æ³•ä¸Šçš„æ³¨è§£ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœå­˜åœ¨@SlaveofDBï¼Œåˆ™å¾€çº¿ç¨‹ä¸Šä¸‹æ–‡ç¯å¢ƒä¸­å­˜å‚¨ä¸€ä¸ªåä¸ºdbTypeçš„å˜é‡ï¼Œèµ‹å€¼ä¸ºslaveï¼Œè¡¨ç¤ºèµ°ä»åº“ï¼›å¦‚æœå­˜åœ¨@MasterOfDBï¼Œåˆ™å­˜å‚¨ä¸ºmasterï¼Œè¡¨ç¤ºèµ°ä¸»åº“ã€‚</p><p>ç¬¬ä¸‰ï¼Œåœ¨Daoå±‚é‡‡ç”¨Springæä¾›çš„è·¯ç”±é€‰æ‹©æœºåˆ¶ï¼Œç»§æ‰¿è‡ªAbastractRoutingDataSourceã€‚åº”ç”¨ç¨‹åºå¯åŠ¨æ—¶è‡ªåŠ¨æ³¨å…¥ä¸¤ä¸ªæ•°æ®æº(master-slave)ï¼Œé‡‡ç”¨key-valueé”®å€¼å¯¹çš„æ–¹å¼å­˜å‚¨ã€‚åœ¨çœŸæ­£éœ€è¦è·å–é“¾æ¥æ—¶ï¼Œæ ¹æ®ä¸Šä¸‹æ–‡ç¯å¢ƒä¸­å­˜å‚¨çš„æ•°æ®åº“ç±»å‹ï¼Œä»å†…éƒ¨æŒæœ‰çš„dataSourceMapä¸­è·å–å¯¹åº”çš„æ•°æ®æºï¼Œä»è€Œå®ç°æ•°æ®åº“å±‚é¢çš„<strong>è¯»å†™åˆ†ç¦»</strong>ã€‚</p><p>æ€»ç»“ä¸€ä¸‹ï¼Œè¯»å†™åˆ†ç¦»çš„æ€è·¯å°±æ˜¯é€šè¿‡é™ä½å†™å…¥èŠ‚ç‚¹çš„è´Ÿè½½ï¼Œå°†è€—æ—¶çš„æŸ¥è¯¢ç±»è¯·æ±‚è½¬å‘åˆ°ä»èŠ‚ç‚¹ï¼Œä»è€Œæœ‰æ•ˆæå‡å†™å…¥çš„æ€§èƒ½ã€‚</p><p>ä½†æ˜¯ï¼Œå½“ä¸šåŠ¡é‡ä¸æ–­å¢åŠ ï¼Œå•ä¸ªæ•°æ®åº“èŠ‚ç‚¹å·²æ— æ³•å†æ»¡è¶³ä¸šåŠ¡éœ€æ±‚æ—¶ï¼Œæˆ‘ä»¬å°±è¦å¯¹æ•°æ®è¿›è¡Œåˆ‡ç‰‡ï¼Œåˆ†åº“åˆ†è¡¨çš„æŠ€æœ¯æ€æƒ³å°±åº”è¿è€Œç”Ÿäº†ã€‚</p><h4>åˆ†åº“åˆ†è¡¨</h4><p>åˆ†åº“åˆ†è¡¨æ˜¯è´Ÿè½½å‡è¡¡åœ¨æ•°æ®åº“é¢†åŸŸçš„åº”ç”¨ï¼Œä¸»è¦çš„åŸç†ä½ å¯ä»¥å‚è€ƒä¸‹é¢è¿™å¼ å›¾ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/26/42/2644e659d2e832d1b4af841de8b20e42.jpg?wh=1920x766\" alt=\"å›¾ç‰‡\"></p><p>ç®€å•è¯´æ˜ä¸€ä¸‹ã€‚åˆ†åº“åˆ†è¡¨ä¸»è¦æ˜¯é€šè¿‡å¼•å…¥å¤šä¸ªå†™å…¥èŠ‚ç‚¹æ¥ç¼“è§£æ•°æ®å‹åŠ›çš„ã€‚å› æ­¤ï¼Œåœ¨æ¥å—å†™å…¥è¯·æ±‚åï¼Œè´Ÿè½½å‡è¡¡ç®—æ³•ä¼šå°†æ•°æ®è·¯ç”±åˆ°å…¶ä¸­ä¸€ä¸ªèŠ‚ç‚¹ä¸Šï¼Œå¤šä¸ªèŠ‚ç‚¹å…±åŒåˆ†æ‹…æ•°æ®å†™å…¥è¯·æ±‚ï¼Œé™ä½å•ä¸ªèŠ‚ç‚¹çš„å‹åŠ›ï¼Œæå‡æ‰©å±•æ€§ï¼Œè§£å†³å•èŠ‚ç‚¹çš„æ€§èƒ½ç“¶é¢ˆã€‚</p><p>ä¸è¿‡ï¼Œè¦å®ç°æ•°æ®åº“å±‚é¢çš„åˆ†åº“åˆ†è¡¨è¿˜æ˜¯å­˜åœ¨ä¸€å®šæŠ€æœ¯éš¾åº¦çš„ã€‚<strong>å› ä¸ºåˆ†åº“åˆ†è¡¨å’Œè¯»å†™åˆ†ç¦»ä¸€æ ·ï¼Œæœ€ç»ˆè¦è§£å†³çš„éƒ½æ˜¯å¦‚ä½•é€‰æ‹©æ•°æ®æºçš„é—®é¢˜ã€‚</strong>æ‰€ä»¥åœ¨åˆ†åº“åˆ†è¡¨æ–¹æ¡ˆä¸­ï¼Œé¦–å…ˆæˆ‘ä»¬è¦æœ‰ä¸¤ä¸ªç®—æ³•ã€‚</p><ul>\n<li>ä¸€ä¸ªåˆ†åº“å­—æ®µå’Œåˆ†åº“ç®—æ³•ï¼Œå³åœ¨è¿›è¡Œæ•°æ®æŸ¥è¯¢ã€æ•°æ®å†™å…¥æ—¶ï¼Œæ ¹æ®åˆ†åº“å­—æ®µçš„å€¼ç®—å‡ºè¦è·¯ç”±åˆ°å“ªä¸ªæ•°æ®åº“å®ä¾‹ä¸Šï¼›</li>\n<li>ä¸€ä¸ªåˆ†è¡¨å­—æ®µå’Œåˆ†è¡¨ç®—æ³•ï¼Œå³åœ¨è¿›è¡Œæ•°æ®æŸ¥è¯¢ã€æ•°æ®å†™å…¥æ—¶ï¼Œæ ¹æ®åˆ†è¡¨å­—æ®µçš„å€¼ç®—å‡ºè¦è·¯ç”±åˆ°å“ªä¸ªè¡¨ä¸Šã€‚</li>\n</ul><p>ä¸ç®¡æ˜¯ä¸Šé¢çš„åˆ†åº“ã€è¿˜æ˜¯åˆ†è¡¨éƒ½éœ€è¦è§£å†³ä¸€ä¸ªéå¸¸å…³é”®çš„é—®é¢˜ï¼šSQLè§£æã€‚ä½ å¯ä»¥çœ‹ä¸‹é¢è¿™å¼ å›¾ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/ca/dc/cab6b8d6fdb060d1e38a978ae594c0dc.jpg?wh=1920x828\" alt=\"å›¾ç‰‡\"></p><p>å¦‚æœè®¢å•åº“çš„åˆ†åº“å­—æ®µè®¾ç½®ä¸ºorder_noï¼Œè¦æƒ³æ­£ç¡®æ‰§è¡Œè¿™æ¡SQLè¯­å¥ï¼Œæˆ‘ä»¬é¦–å…ˆè¦è§£æè¿™æ¡SQLè¯­å¥ï¼Œæå–order_noçš„å­—æ®µå€¼ï¼Œå†æ ¹æ®åˆ†åº“ç®—æ³•(è´Ÿè½½å‡è¡¡ç®—æ³•)è®¡ç®—åº”è¯¥å‘é€åˆ°å“ªä¸€ä¸ªå…·ä½“çš„åº“ä¸Šæ‰§è¡Œã€‚</p><p>SQLè¯­å¥è¯­æ³•éå¸¸å¤æ‚ï¼Œè¦å®ç°ä¸€å¥—é«˜æ€§èƒ½çš„SQLè§£æå¼•æ“ç»éæ˜“äº‹ï¼Œå¦‚æœæŒ‰ç…§ä¸Šé¢æˆ‘æä¾›çš„è§£å†³æ–¹æ¡ˆï¼Œå°†ä¼šå¸¦æ¥å‡ ä¸ªæ˜æ˜¾çš„å¼Šç«¯ã€‚</p><ul>\n<li><strong>æŠ€æœ¯éœ€æ±‚ä¼šæ±¡æŸ“ä¸šåŠ¡ä»£ç ï¼Œç»´æŠ¤æˆæœ¬é«˜</strong></li>\n</ul><p>åœ¨ä¸šåŠ¡æ§åˆ¶å™¨ä¸­éœ€è¦ä½¿ç”¨æ³¨è§£æ¥å£°æ˜è¯»å†™åˆ†ç¦»æŒ‰ç›¸å…³çš„è§„åˆ™è¿›è¡Œï¼Œéšç€ä¸šåŠ¡æ§åˆ¶çš„ä¸æ–­å¢åŠ ã€æˆ–è€…è¯»å†™åˆ†ç¦»è§„åˆ™çš„å˜åŒ–ï¼Œæˆ‘ä»¬éœ€è¦å¯¹ç³»ç»Ÿæ‰€æœ‰æ³¨è§£è¿›è¡Œä¿®æ”¹ï¼Œä½†ä¸šåŠ¡é€»è¾‘å…¶å®å¹¶æ²¡æœ‰æ”¹å˜ã€‚è¿™å°±é€ æˆä¸¤è€…ä¹‹é—´ç›¸äº’å½±å“ï¼ŒåæœŸç»´æŠ¤æˆæœ¬è¾ƒé«˜ã€‚</p><ul>\n<li><strong>æŠ€æœ¯å®ç°éš¾åº¦è¾ƒå¤§ï¼Œæå¤§å¢åŠ å¼€å‘æˆæœ¬</strong></li>\n</ul><p>ç”±äºSQLè¯­å¥çš„æ ¼å¼å¤ªå¤æ‚ã€å¤ªçµæ´»ï¼Œå¦‚æœä¸æ˜¯æ•°æ®åº“ä¸“ä¸šäººæ‰ï¼Œå¾ˆéš¾å…¨é¢æŒæ¡SQLè¯­æ³•ã€‚åœ¨è¿™æ ·çš„æƒ…å†µä¸‹ï¼Œä½ å†™å‡ºçš„SQLè§£æå¼•æ“å¾ˆéš¾è¦†ç›–æ‰€æœ‰çš„åœºæ™¯ï¼Œå®¹æ˜“å‡ºç°é—æ¼æœ€ç»ˆå¯¼è‡´æ•…éšœçš„å‘ç”Ÿï¼›è¿™ä¹Ÿç»™äº§å“çš„æ€§èƒ½å¸¦æ¥æå¤§æŒ‘æˆ˜ã€‚</p><p>é‚£æ€ä¹ˆåŠå‘¢ï¼Ÿå…¶å®ï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥ä½¿ç”¨ä¸šç•Œå¤§ç¥çš„å¼€æºä½œå“æ¥è§£å†³é—®é¢˜ï¼Œè¿™å°±è¦è¯´åˆ°æ•°æ®åº“ä¸­é—´ä»¶äº†ã€‚</p><h4>å¼•è¿›æ•°æ®åº“ä¸­é—´ä»¶</h4><p>æŠ€æœ¯ç±»è¯‰æ±‚å¾€å¾€æ˜¯ç›¸é€šçš„ï¼Œæå…·æ™®é€‚æ€§ï¼Œä¸ºäº†è§£å†³ä¸Šé¢çš„é€šç—…ï¼Œæ ¹æ®åˆ†å±‚çš„æ¶æ„ç†å¿µï¼Œæˆ‘ä»¬é€šå¸¸ä¼šå¼•å…¥ä¸€ä¸ªä¸­é—´å±‚ï¼Œä¸“é—¨è§£å†³æ•°æ®åº“æ–¹é¢çš„æŠ€æœ¯ç±»éœ€æ±‚ã€‚</p><p><strong>MyCat å’ŒShardingJDBC/ShardingSphereæ˜¯ç›®å‰å¸‚é¢æœ€ä¸»æµçš„ä¸¤ä¸ªæ•°æ®åº“ä¸­é—´ä»¶ï¼ŒäºŒè€…å„æœ‰ä¼˜åŠ¿ã€‚</strong></p><p><strong>MyCatæœåŠ¡ç«¯ä»£ç†æ¨¡å¼</strong></p><p>å…ˆæ¥çœ‹ä¸‹MyCatä»£ç†æ•°æ®åº“ã€‚å®ƒçš„å·¥ä½œæ¨¡å¼å¯ä»¥ç”¨ä¸‹é¢è¿™å¼ å›¾æ¦‚æ‹¬ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/ca/23/caef85cbfdc84600b45a1d4ff3d1e723.jpg?wh=1920x766\" alt=\"å›¾ç‰‡\"></p><p><strong>é¢å¯¹åº”ç”¨ç¨‹åºï¼ŒMyCatä¼šä¼ªè£…æˆä¸€ä¸ªæ•°æ®åº“æœåŠ¡å™¨(ä¾‹å¦‚MySQLæœåŠ¡ç«¯)ã€‚</strong>å®ƒä¼šæ ¹æ®å„ä¸ªæ•°æ®åº“çš„é€šä¿¡åè®®ï¼Œä»äºŒè¿›åˆ¶è¯·æ±‚ä¸­æ ¹æ®åè®®è¿›è¡Œè§£ç ï¼Œç„¶åæå–SQLï¼Œå¹¶æ ¹æ®é…ç½®çš„åˆ†åº“åˆ†è¡¨ã€è¯»å†™åˆ†ç¦»è§„åˆ™è®¡ç®—å‡ºéœ€è¦å‘é€åˆ°å“ªä¸ªç‰©ç†æ•°æ®åº“ã€‚</p><p><strong>éšåï¼Œé¢å¯¹çœŸå®çš„æ•°æ®åº“èµ„æºï¼ŒMyCatä¼šä¼ªè£…æˆä¸€ä¸ªæ•°æ®åº“å®¢æˆ·ç«¯ã€‚</strong>å®ƒä¼šæ ¹æ®é€šä¿¡åè®®å°†SQLè¯­å¥å°è£…æˆäºŒè¿›åˆ¶æµï¼Œå‘é€è¯·æ±‚åˆ°çœŸå®çš„ç‰©ç†èµ„æºï¼ŒçœŸå®çš„ç‰©ç†æ•°æ®åº“æ”¶åˆ°è¯·æ±‚åè§£æè¯·æ±‚å¹¶è¿›è¡Œå¯¹åº”çš„å¤„ç†ï¼Œå†å°†ç»“æœå±‚å±‚è¿”å›åˆ°åº”ç”¨ç¨‹åºã€‚</p><p>è¿™ç§æ¶æ„çš„ä¼˜åŠ¿æ˜¯å®ƒå¯¹ä¸šåŠ¡ä»£ç æ— ä»»ä½•ä¾µå…¥æ€§ï¼Œåº”ç”¨ç¨‹åºåªéœ€è¦ä¿®æ”¹é¡¹ç›®ä¸­æ•°æ®åº“çš„è¿æ¥é…ç½®å°±å¯ä»¥äº†ï¼Œè€Œä¸”ä½¿ç”¨ç®€å•ï¼Œæ˜“äºæ¨å¹¿ã€‚åŒæ—¶å®ƒä¹Ÿæœ‰åŠ£åŠ¿ï¼š</p><ul>\n<li><strong>å­˜åœ¨æ€§èƒ½æŸè€—</strong></li>\n</ul><p>æ•°æ®åº“ä¸­é—´ä»¶éœ€è¦å¯¹åº”ç”¨ç¨‹åºå‘é€è¿‡æ¥çš„è¯·æ±‚è¿›è¡Œè§£ç å¹¶è®¡ç®—è·¯ç”±ï¼Œéšåå®ƒè¿˜è¦å†æ¬¡å¯¹è¯·æ±‚è¿›è¡Œç¼–ç å¹¶è½¬å‘åˆ°çœŸå®çš„æ•°æ®åº“ï¼Œè¿™å°±å¢åŠ äº†æ€§èƒ½å¼€é”€ã€‚</p><ul>\n<li><strong>é«˜åº¦ä¸­å¿ƒåŒ–ï¼Œæ•°æ®åº“ä¸­é—´ä»¶å®¹æ˜“æˆä¸ºæ€§èƒ½ç“¶é¢ˆ</strong></li>\n</ul><p>æ•°æ®åº“ä¸­é—´ä»¶éœ€è¦å¤„ç†æ‰€æœ‰çš„æ•°æ®åº“è¯·æ±‚ï¼Œè¿”å›ç»“æœéƒ½éœ€è¦åœ¨æ•°æ®åº“ä¸­è¿›è¡Œèšåˆï¼Œè™½ç„¶å‡å°‘äº†åç«¯æ•°æ®åº“çš„å‹åŠ›ï¼Œä½†ä¸­é—´ä»¶æœ¬èº«å¾ˆå®¹æ˜“æˆä¸ºç³»ç»Ÿçš„ç“¶é¢ˆï¼Œæ‰©å±•èƒ½åŠ›å—åˆ°ä¸€å®šåˆ¶çº¦ã€‚</p><ul>\n<li><strong>ä»£ç†å±‚å®ç°å¤æ‚ï¼Œæ™®é€‚æ€§å·®</strong></li>\n</ul><p>æ•°æ®åº“ä¸­é—´ä»¶æœ¬èº«çš„å®ç°æ¯”è¾ƒå¤æ‚ï¼Œéœ€è¦é€‚é…å¸‚é¢ä¸Šå„ä¸»æµæ•°æ®åº“ï¼Œä¾‹å¦‚MySQLã€Oracleç­‰ï¼Œé€šç”¨æ€§å¤§æ‰“æŠ˜æ‰£ã€‚</p><p><strong>ShardingJDBCå®¢æˆ·ç«¯ä»£ç†æ¨¡å¼</strong></p><p>ä¸‹é¢æˆ‘ä»¬å†æ¥çœ‹ä¸‹ShardingJDBCå®¢æˆ·ç«¯ä»£ç†æ•°æ®åº“ã€‚ShardingJDBCçš„å·¥ä½œæ¨¡å¼å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/4c/dd/4c2e6916f7df062aa145063586b1e3dd.jpg?wh=1920x1261\" alt=\"å›¾ç‰‡\"></p><p>ShardingJDBCä¸»è¦å®ç°çš„æ˜¯JDBCåè®®ã€‚å®ç°JDBCåè®®ï¼Œå…¶å®ä¸»è¦æ˜¯é¢å‘java.sql.Datasourceã€Connectionã€ResultSetç­‰å¯¹è±¡ç¼–ç¨‹ã€‚å®ƒé€šå¸¸ä»¥å®¢æˆ·ç«¯JaråŒ…çš„æ–¹å¼åµŒå…¥åˆ°ä¸šåŠ¡ç³»ç»Ÿä¸­ï¼ŒShardingjJDBCæ ¹æ®åˆ†åº“åˆ†è¡¨çš„é…ç½®ä¿¡æ¯ï¼Œåˆå§‹åŒ–ä¸€ä¸ªShardingJdbcDatasourceå¯¹è±¡ï¼Œéšåè§£æSQLè¯­å¥æ¥æå–åˆ†åº“ã€åˆ†è¡¨å­—æ®µå€¼ï¼Œå†æ ¹æ®é…ç½®çš„è·¯ç”±è§„åˆ™é€‰æ‹©æ­£ç¡®çš„åç«¯çœŸå®æ•°æ®åº“ï¼Œæœ€åï¼ŒShardingJDBCç”¨å„ç§ç±»å‹æ•°æ®åº“çš„é©±åŠ¨åŒ…å°†SQLå‘é€åˆ°çœŸå®çš„ç‰©ç†æ•°æ®åº“ä¸Šã€‚</p><p>æˆ‘ä»¬åŒæ ·æ¥åˆ†æä¸€ä¸‹è¿™ä¸ªæ–¹æ¡ˆçš„ä¼˜ç¼ºç‚¹ã€‚</p><p>ä¸»è¦çš„ä¼˜åŠ¿æœ‰å¦‚ä¸‹å‡ ç‚¹ï¼š</p><ul>\n<li><strong>æ— æ€§èƒ½æŸè€—</strong></li>\n</ul><p>ShardingJDBCä½¿ç”¨çš„æ˜¯åŸºäºå®¢æˆ·ç«¯çš„ä»£ç†æ¨¡å¼ï¼Œä¸éœ€è¦å¯¹SQLè¿›è¡Œç¼–ç è§£ç ç­‰æ“ä½œï¼Œåªè¦æ ¹æ®SQLè¯­å¥è¿›è¡Œè·¯ç”±é€‰æ‹©å°±å¯ä»¥äº†ï¼Œæ²¡æœ‰å¤ªå¤šæ€§èƒ½æŸè€—ã€‚</p><ul>\n<li><strong>æ— å•ç‚¹æ•…éšœã€æ‰©å±•æ€§å¼º</strong></li>\n</ul><p>ShardingJDBCä»¥JaråŒ…çš„å½¢å¼å­˜åœ¨äºé¡¹ç›®ä¸­ï¼Œå…¶åˆ†å¸ƒå¼ç‰¹æ€§éšç€åº”ç”¨çš„å¢åŠ è€Œå¢åŠ ï¼Œæ‰©å±•æ€§æå¼ºã€‚</p><ul>\n<li><strong>åŸºäºJDBCåè®®ï¼Œå¯æ— ç¼æ”¯æŒå„ä¸»æµæ•°æ®åº“</strong></li>\n</ul><p>JDBCåè®®æ˜¯åº”ç”¨ç¨‹åºä¸å…³ç³»å‹æ•°æ®åº“äº¤äº’çš„ä¸šç•Œé€šç”¨æ ‡å‡†ï¼Œå¸‚é¢ä¸Šæ‰€æœ‰å…³ç³»å‹æ•°æ®åº“éƒ½å¤©ç„¶æ”¯æŒJDBCï¼Œæ•…ä¸å­˜åœ¨å…¼å®¹æ€§é—®é¢˜ã€‚</p><p>å½“ç„¶ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œå¯¹äºåˆ†åº“åˆ†è¡¨ï¼Œå®ƒæ²¡æœ‰ä¸€ä¸ªç»Ÿä¸€çš„è§†å›¾ï¼Œè¿ç»´ç±»æˆæœ¬è¾ƒé«˜ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœè®¢å•è¡¨è¢«åˆ†æˆäº†1024ä¸ªè¡¨ï¼Œè¿™æ—¶å€™å¦‚æœä½ æƒ³æ ¹æ®è®¢å•ç¼–å·å»æŸ¥è¯¢æ•°æ®ï¼Œå¿…é¡»äººä¸ºè®¡ç®—å‡ºè¿™æ¡æ•°æ®å­˜åœ¨äºå“ªä¸ªåº“çš„å“ªä¸ªè¡¨ä¸­ï¼Œç„¶åå†å»å¯¹åº”çš„åº“ä¸Šæ‰§è¡ŒSQLè¯­å¥ã€‚</p><p>ä¸ºäº†è§£å†³ShardingJDBCå­˜åœ¨çš„é—®é¢˜ï¼Œå®˜æ–¹æä¾›äº†ShardingSphereï¼Œå…¶å·¥ä½œæœºåˆ¶åŸºäºä»£ç†æ¨¡å¼ï¼Œä¸MyCatçš„è®¾è®¡ç†å¿µä¸€è‡´ï¼Œä½œä¸ºæ•°æ®åº“çš„ä»£ç†å±‚ï¼Œæä¾›ç»Ÿä¸€çš„æ•°æ®èšåˆå±‚ï¼Œå¯ä»¥æœ‰æ•ˆå¼¥è¡¥ShardingJDBCåœ¨è¿ç»´å±‚é¢çš„ç¼ºé™·ï¼Œå› æ­¤<strong>é¡¹ç›®é€šå¸¸é‡‡ç”¨ShardingDBCçš„ç¼–ç¨‹æ–¹å¼ï¼Œç„¶åå†æ­å»ºä¸€å¥—ShardingSphereä¾›æ•°æ®æŸ¥è¯¢ã€‚</strong></p><p>åœ¨æ²¡æœ‰ShardingSphereä¹‹å‰ï¼Œä½¿ç”¨MyCatä¹Ÿæœ‰ä¸€å®šä¼˜åŠ¿ã€‚MyCatå¯¹ä¸šåŠ¡ä»£ç æ— ä¾µå…¥æ€§ï¼Œæ¥å…¥æˆæœ¬ä¹Ÿæ¯”è¾ƒä½ã€‚ä½†ShardingSphereå¼¥è¡¥äº†ShardingJDBCå¯¹è¿ç»´çš„ä¸å‹å¥½ï¼Œè€Œä¸”å®ƒçš„æ€§èƒ½æŸè€—ä½ã€æ‰©å±•æ€§å¼ºã€æ”¯æŒå„ç±»ä¸»æµæ•°æ®åº“ï¼Œå¯ä»¥è¯´ç›¸æ¯”MyCatå·²ç»å æœ‰æ˜æ˜¾çš„ä¼˜åŠ¿äº†ã€‚</p><p>æ‰€ä»¥å¦‚æœè¦åœ¨å®è·µç”Ÿäº§ä¸­é€‰æ‹©æ•°æ®åº“ä¸­é—´ä»¶ï¼Œæˆ‘æ›´åŠ æ¨èShardingJDBCã€‚</p><p>é™¤äº†ä¸Šé¢çš„åŸå› ï¼Œä»èµ„æºåˆ©ç”¨ç‡å’Œç¤¾åŒºæ´»è·ƒåº¦çš„è§’åº¦è®²ï¼Œé¦–å…ˆï¼ŒMyCatçš„â€œå‰èº«â€æ˜¯é˜¿é‡Œå¼€æºçš„Cobarï¼Œæ˜¯æ•°æ®åº“ä¸­é—´ä»¶çš„å¼€å±±é¼»ç¥–ï¼ŒæŠ€æœ¯æ¶æ„ç¨æ˜¾å¤è€ï¼Œè€ŒShardingJDBCåœ¨è®¾è®¡ä¹‹åˆå°±å¯ä»¥è§„é¿MyCatçš„å›ºæœ‰ç¼ºé™·ï¼Œæ‘’å¼ƒæœåŠ¡ç«¯ä»£ç†æ¨¡å¼ã€‚ä»£ç†æ¨¡å¼éœ€è¦é¢å¤–çš„æœºå™¨æ­å»ºMyCatè¿›ç¨‹ï¼Œå¼•å…¥äº†æ–°çš„è¿›ç¨‹ï¼Œ<strong>åŠ¿å¿…éœ€è¦å¢åŠ ç¡¬ä»¶èµ„æºçš„æŠ•å…¥ã€‚</strong></p><p>å…¶æ¬¡ï¼ŒShardingJDBCç›®å‰å·²ç»æ˜¯Apacheçš„é¡¶çº§é¡¹ç›®ï¼Œå®ƒçš„ç¤¾åŒºæ´»è·ƒåº¦ä¹Ÿæ˜¯MyCatæ— æ³•æ¯”æ‹Ÿçš„ã€‚ä¸€ä¸ªå¼€æºé¡¹ç›®ç¤¾åŒºè¶Šæ´»è·ƒï¼Œå¯»æ±‚å¸®åŠ©åé—®é¢˜å¾—åˆ°è§£å†³çš„æ¦‚ç‡å°±ä¼šè¶Šå¤§ï¼Œè¶Šå¤šäººä½¿ç”¨ï¼Œç³»ç»Ÿä¸­å­˜åœ¨çš„Bugä¹Ÿæ›´å®¹æ˜“è¢«å‘ç°ã€è¢«ä¿®å¤ï¼Œè¿™å°±ä½¿å¾—ä¸­é—´ä»¶æœ¬èº«çš„ç¨³å®šæ€§æ›´æœ‰ä¿éšœã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/f4/38/f48ea3374ac767fffc685270df18ac38.jpg?wh=1920x988\" alt=\"å›¾ç‰‡\"></p><h2>æ€»ç»“</h2><p>å¥½äº†ï¼Œè¿™èŠ‚è¯¾å°±è®²åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬æ¥åšä¸ªå°ç»“ã€‚é€šè¿‡åˆšæ‰çš„å­¦ä¹ ï¼Œæˆ‘ä»¬çŸ¥é“äº†ä¸­é—´ä»¶çš„æ¦‚å¿µï¼Œå®ƒæ˜¯ä¸ºäº†è§£å†³ç³»ç»Ÿä¸­çš„æŠ€æœ¯éœ€æ±‚ï¼Œå°†æŠ€æœ¯éœ€æ±‚ä¸ä¸šåŠ¡éœ€æ±‚è¿›è¡Œè§£è€¦ï¼Œè®©æˆ‘ä»¬ä¸“æ³¨äºä¸šåŠ¡ä»£ç å¼€å‘çš„ä¸€ä¸ªä¸ªæŠ€æœ¯ç»„ä»¶ã€‚ä¸­é—´ä»¶çš„å­˜åœ¨ï¼Œå°±æ˜¯ä¸ºäº†è§£å†³é«˜å¹¶å‘ã€é«˜å¯ç”¨æ€§ã€é«˜æ€§èƒ½ç­‰å„é¢†åŸŸçš„æŠ€æœ¯éš¾é¢˜ã€‚</p><p>åœ¨é¡¹ç›®ä¸­ï¼Œåˆç†å¼•ç”¨ä¸­é—´ä»¶èƒ½æå¤§æå‡æˆ‘ä»¬ç³»ç»Ÿçš„ç¨³å®šæ€§ã€å¯ç”¨æ€§ï¼Œä½†åŒæ—¶ä¹Ÿä¼šæå‡ç³»ç»Ÿç»´æŠ¤çš„å¤æ‚åº¦ï¼Œå¯¹æˆ‘ä»¬çš„æŠ€æœ¯èƒ½åŠ›æå‡ºäº†æ›´é«˜çš„è¦æ±‚ï¼Œæˆ‘ä»¬å¿…é¡»è¦ç†Ÿç»ƒæŒæ¡é¡¹ç›®ä¸­å¼•ç”¨çš„å„ç§ä¸­é—´ä»¶ï¼Œæ·±å…¥ç†è§£å…¶å·¥ä½œåŸç†ã€å®ç°ç»†èŠ‚ï¼Œæé«˜å¯¹ä¸­é—´ä»¶çš„é©¾é©­èƒ½åŠ›ï¼Œå¦åˆ™ä¸€æ—¦è¿ç”¨ä¸å½“ï¼Œå¾ˆå¯èƒ½ç»™ç³»ç»Ÿå¸¦æ¥ç¾éš¾æ€§çš„æ•…éšœã€‚</p><p>ä¸ºäº†è®©ä½ å¯¹ä¸­é—´ä»¶æœ‰ä¸€ä¸ªæ›´åŠ å®è§‚çš„è®¤è¯†ï¼Œæˆ‘ç»™ä½ åˆ—ä¸¾äº†å¸‚é¢æœ€ä¸ºå¸¸ç”¨çš„ä¸­é—´ä»¶ã€‚è™½ç„¶ç°åœ¨æ–°çš„ä¸­é—´ä»¶å±‚å‡ºä¸ç©·ï¼Œä½†åœ¨æˆ‘çœ‹æ¥ï¼Œå¤§éƒ½ä¸è¶…è¿‡æˆ‘åˆ—çš„è¿™å‡ ç±»ã€‚è¿™èŠ‚è¯¾æˆ‘ä»¬é‡ç‚¹è®²äº†ä¸¤ä¸ªä¸»æµçš„æ•°æ®åº“ä¸­é—´ä»¶ï¼Œä¸‹èŠ‚è¯¾ï¼Œæˆ‘ä»¬å†æ¥è§£è¯»ç¼“å­˜ã€å…¨æ–‡ç´¢å¼•ã€åˆ†å¸ƒå¼æ—¥å¿—è¿™å‡ ç±»ä¸­é—´ä»¶ã€‚</p><h2>è¯¾åé¢˜</h2><p>å­¦å®Œè¿™èŠ‚è¯¾ï¼Œæˆ‘ä¹Ÿç»™ä½ å‡ºä¸¤é“è¯¾åé¢˜å§ï¼</p><p>1.ä»æ•°æ®åº“ä¸­é—´ä»¶çš„æ¼”å˜å†ç¨‹ä¸­ï¼Œä½ èƒ½æç‚¼å‡ºå“ªäº›åˆ†å¸ƒå¼æ¶æ„è®¾è®¡ç†å¿µï¼Ÿ</p><p>2.è¯·ä½ ä»¥è®¢å•ä¸šåŠ¡åœºæ™¯ï¼Œæ­å»ºä¸€ä¸ª2åº“2è¡¨çš„ShardingSphereé›†ç¾¤ï¼Œå®ç°æ•°æ®çš„æ’å…¥ã€æŸ¥è¯¢åŠŸèƒ½ã€‚</p><p>å¦‚æœä½ æƒ³è¦åˆ†äº«ä½ çš„ä¿®æ”¹æˆ–è€…æƒ³å¬å¬æˆ‘çš„æ„è§ï¼Œå¯ä»¥æäº¤ä¸€ä¸ª <a href=\"https://github.com/dingwpmz/infoq_question\">GitHub</a>çš„pushè¯·æ±‚æˆ–issuesï¼Œå¹¶æŠŠå¯¹åº”åœ°å€è´´åˆ°ç•™è¨€é‡Œã€‚æˆ‘ä»¬ä¸‹èŠ‚è¯¾è§ï¼</p>","neighbors":{"left":{"article_title":"å¼€ç¯‡è¯ï½œä¸ºä»€ä¹ˆä¸­é—´ä»¶å¯¹åˆ†å¸ƒå¼æ¶æ„ä½“ç³»æ¥è¯´è¿™ä¹ˆé‡è¦ï¼Ÿ","id":527667},"right":{"article_title":"02ï½œä¸­é—´ä»¶ç”Ÿæ€ï¼ˆä¸‹ï¼‰ï¼šåŒç±»å‹çš„ä¸­é—´ä»¶å¦‚ä½•è¿›è¡Œé€‰å‹ï¼Ÿ","id":528224}},"comments":[{"had_liked":false,"id":350309,"user_name":"á¯¤âµá´³","can_delete":false,"product_type":"c1","uid":1621494,"ip_address":"","ucode":"BA8F60B05D1389","user_header":"https://static001.geekbang.org/account/avatar/00/18/bd/f6/558bb119.jpg","comment_is_top":false,"comment_ctime":1656776792,"is_pvip":false,"replies":[{"id":"127684","content":"ä½ å¥½ï¼Œè¿™ä¸ªä½ æœ‰åšè¿‡å‹æµ‹æ²¡ï¼Œè¿™ä¸¤æ¬¾æˆ‘éƒ½åœ¨å…¬å¸è¿ç”¨è¿‡ï¼Œæ ¹æ®åœ¨ä¼˜é€Ÿï¼Œä¸­é€šçš„å®æˆ˜ç»éªŒæ¥çœ‹ï¼ŒShardingJDBCçš„ä¼˜åŠ¿è¿˜æ˜¯è¦æ¯”mycatè¦å¥½å¤ªå¤šï¼Œå› ä¸ºä¸­å¿ƒåŒ–ï¼Œéœ€è¦å¼•å…¥å¤§é‡çš„èµ„æºä¿éšœmycatè‡ªèº«çš„é«˜æ€§èƒ½ï¼Œè€Œä¸”ä¸€ä½†å‡ºç°é—®é¢˜ï¼Œå°†æ˜¯æ¯”è¾ƒè‡´å‘½çš„ï¼Œè€Œä¸”ä¸å¤ªå¥½å¿«é€Ÿæ¢å¤ã€‚","user_name":"ä½œè€…å›å¤","comment_id":350309,"uid":"2348391","ip_address":"","utype":1,"ctime":1657467570,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":0,"score":"18836645976","product_id":100114001,"comment_content":"ShardingJDBC ä¼¼ä¹æ²¡æœ‰ myCat æ€§èƒ½å¥½å•Š","like_count":4,"discussions":[{"author":{"id":2348391,"avatar":"https://static001.geekbang.org/account/avatar/00/23/d5/67/54efabd8.jpg","nickname":"ä¸­é—´ä»¶å…´è¶£åœˆ","note":"","ucode":"EFC2384D08600E","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579463,"discussion_content":"ä½ å¥½ï¼Œè¿™ä¸ªä½ æœ‰åšè¿‡å‹æµ‹æ²¡ï¼Œè¿™ä¸¤æ¬¾æˆ‘éƒ½åœ¨å…¬å¸è¿ç”¨è¿‡ï¼Œæ ¹æ®åœ¨ä¼˜é€Ÿï¼Œä¸­é€šçš„å®æˆ˜ç»éªŒæ¥çœ‹ï¼ŒShardingJDBCçš„ä¼˜åŠ¿è¿˜æ˜¯è¦æ¯”mycatè¦å¥½å¤ªå¤šï¼Œå› ä¸ºä¸­å¿ƒåŒ–ï¼Œéœ€è¦å¼•å…¥å¤§é‡çš„èµ„æºä¿éšœmycatè‡ªèº«çš„é«˜æ€§èƒ½ï¼Œè€Œä¸”ä¸€ä½†å‡ºç°é—®é¢˜ï¼Œå°†æ˜¯æ¯”è¾ƒè‡´å‘½çš„ï¼Œè€Œä¸”ä¸å¤ªå¥½å¿«é€Ÿæ¢å¤ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657467570,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":348602,"user_name":"æ–‡æ¶›","can_delete":false,"product_type":"c1","uid":1017692,"ip_address":"","ucode":"891CB44B2155DA","user_header":"https://static001.geekbang.org/account/avatar/00/0f/87/5c/919c1262.jpg","comment_is_top":false,"comment_ctime":1655248742,"is_pvip":false,"replies":[{"id":"127052","content":"ä½ å¥½,MyCATæˆ‘æœ€è¿‘ä¹Ÿå…³æ³¨çš„æ¯”è¾ƒå°‘ï¼Œåªæ˜¯å€Ÿæ­¤åˆ†æäº†ä¸€ä¸‹åˆ†åº“åˆ†è¡¨çš„ä¸€äº›å‘å±•ã€‚ä¹Ÿæ„Ÿè°¢ä½ ç»™å¤§å®¶æä¾›äº†æ›´æ–°çš„æŠ€æœ¯ï¼Œå·ç§°è§£å†³äº†ä¼ ç»Ÿåˆ†åº“åˆ†è¡¨ç±»ä¼¼è·¨åº“JOINï¼Œå€¼å¾—æ·±å…¥ç ”ç©¶ã€‚","user_name":"ä½œè€…å›å¤","comment_id":348602,"uid":"2348391","ip_address":"","utype":1,"ctime":1655732357,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":0,"score":"14540150630","product_id":100114001,"comment_content":"mycatä¼¼ä¹Næ²¡æ›´æ–°äº†ï¼Œç°åœ¨åˆ†è¡¨åˆ†åº“è¿˜æ˜¯å‡ å¹´å‰é‚£å¥—ç†è®ºï¼Ÿè€Œä¸”è¿˜æ˜¯Javaä½“ç³»çš„ï¼TiDbç­‰æ–°å…´æ•°æ®åº“äº†è§£ä¸€ä¸‹ï¼","like_count":3,"discussions":[{"author":{"id":2348391,"avatar":"https://static001.geekbang.org/account/avatar/00/23/d5/67/54efabd8.jpg","nickname":"ä¸­é—´ä»¶å…´è¶£åœˆ","note":"","ucode":"EFC2384D08600E","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":576676,"discussion_content":"ä½ å¥½,MyCATæˆ‘æœ€è¿‘ä¹Ÿå…³æ³¨çš„æ¯”è¾ƒå°‘ï¼Œåªæ˜¯å€Ÿæ­¤åˆ†æäº†ä¸€ä¸‹åˆ†åº“åˆ†è¡¨çš„ä¸€äº›å‘å±•ã€‚ä¹Ÿæ„Ÿè°¢ä½ ç»™å¤§å®¶æä¾›äº†æ›´æ–°çš„æŠ€æœ¯ï¼Œå·ç§°è§£å†³äº†ä¼ ç»Ÿåˆ†åº“åˆ†è¡¨ç±»ä¼¼è·¨åº“JOINï¼Œå€¼å¾—æ·±å…¥ç ”ç©¶ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655732357,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":351412,"user_name":"Master","can_delete":false,"product_type":"c1","uid":1006923,"ip_address":"","ucode":"15B60717300E58","user_header":"https://static001.geekbang.org/account/avatar/00/0f/5d/4b/adec3edc.jpg","comment_is_top":false,"comment_ctime":1657774091,"is_pvip":false,"discussion_count":4,"race_medal":0,"score":"5952741387","product_id":100114001,"comment_content":"æœ‰äº›ä¸ä¸¥è°¨ï¼Œåˆ†åº“èƒ½ç¼“è§£å†™å…¥å‹åŠ›æˆ‘èƒ½ç†è§£ï¼Œåˆ†è¡¨ä¸èƒ½å§ã€‚ã€‚ã€‚å¦å¤–mycatå’ŒShardingJDBCçš„é€‰æ‹©æ›´å¤šçš„æ˜¯ç»¼åˆæ€§çš„é€‰æ‹©ç»“æœï¼Œå¹¶æ²¡æœ‰ç»å¯¹çš„å¥½åï¼Œshardingçš„æ–¹æ¡ˆä¼šè®©æ•°æ®åº“çš„è¿æ¥æ•°å¤§å¹…ä¸Šå‡ï¼Œå¯¹äºè¿æ¥æ± çš„è®¾ç½®è¦å¼‚å¸¸è°¨æ…ï¼Œè¿˜æœ‰å°±æ˜¯åº”ç”¨ç¨‹åºåœ¨æ‰©å®¹çš„æ—¶å€™å®é™…ä¸Šéœ€è¦éå¸¸å°å¿ƒï¼Œè¿æ¥æ•°çš„é£™é«˜ä¼šç›´æ¥å½±å“mysqlæ€§èƒ½ï¼Œè€Œmycatä¸€èˆ¬æ²¡æœ‰è¿™äº›é—®é¢˜ã€‚è‡³äºæ€§èƒ½ã€‚ã€‚æœ¬è´¨ä¸Šæ¥è¯´è¿˜æ˜¯DBçš„æ€§èƒ½æ˜¯å¤§å¤´ï¼Œå’Œä¸­é—´ä»¶æ— å…³ï¼Œä¸­é—´ä»¶ä¸ä¼šè¿æ•°æ®åº“éƒ½è·‘ä¸è¿‡å§ 0 0...é“¾è·¯è¾ƒé•¿æ€§èƒ½æœ‰æŸæ˜¯å¸¸è¯†ï¼Œä½†é«˜æ€§èƒ½ä¸­é—´ä»¶ä¸€èˆ¬éƒ½ä¼šæ³¨æ„è¿™ä¸ªï¼Œæ˜¯ä¸æ˜¯ä½ æµ‹è¯•çš„æ—¶å€™è®¾ç½®ä¸å¯¹å•Šï¼Œæœ‰åšè¿‡ä¸åŒè®¾ç½®ä¸‹å¯¹æ¯”ä¹ˆï¼Œå¦‚æœæœ‰æŸæ˜¯å¦å¯ä»¥åˆ°ä¸å¯æ¥å—çš„åœ°æ­¥ï¼Ÿã€‚ã€‚ã€‚ã€‚<br>è¿˜æœ‰å°±æ˜¯ç›®å‰çš„äº‘åŸç”Ÿæ•°æ®åº“çš„å‘å±•å¾ˆå¿«ï¼Œæ–‡ç« ä¸­æåˆ°çš„ä¸€äº›é—®é¢˜å¯èƒ½ç›®å‰ä¸æ˜¯é—®é¢˜äº†ã€‚ã€‚","like_count":1,"discussions":[{"author":{"id":2053679,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/56/2f/4518f8e1.jpg","nickname":"æ”¾ä¸ä¸‹è£åå¯Œè´µ","note":"","ucode":"9FE29C22B9ABE3","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":584871,"discussion_content":"åˆ†è¡¨å¯ä»¥ä»ä¸€å®šç¨‹åº¦ä¸Šç¼“è§£é”äº‰æŠ¢å§","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1661173139,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬"},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1006923,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5d/4b/adec3edc.jpg","nickname":"Master","note":"","ucode":"15B60717300E58","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":2053679,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/56/2f/4518f8e1.jpg","nickname":"æ”¾ä¸ä¸‹è£åå¯Œè´µ","note":"","ucode":"9FE29C22B9ABE3","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":587498,"discussion_content":"å—¯æœ‰é“ç†ï¼Œè¿™ä¸ªä¸æ˜¯çœ‹ä¸šåŠ¡åœºæ™¯äº†ä¹ˆï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663112143,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":584871,"ip_address":"åŒ—äº¬"},"score":587498,"extra":""}]},{"author":{"id":3017885,"avatar":"","nickname":"Geek_9d39c4","note":"","ucode":"EAB127762F220B","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":586538,"discussion_content":"åšè¿‡è´¦æˆ· åº“å­˜ å¤šèµ„æºç«äº‰å°±ä¼šçŸ¥é“ åˆ†è¡¨èƒ½ç¼“è§£é”ç«äº‰ ä»è€Œæå‡åå\n","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1662304632,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æ±Ÿè‹"},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1006923,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5d/4b/adec3edc.jpg","nickname":"Master","note":"","ucode":"15B60717300E58","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":3017885,"avatar":"","nickname":"Geek_9d39c4","note":"","ucode":"EAB127762F220B","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":587499,"discussion_content":"å—¯ çœ‹ä¸šåŠ¡åœºæ™¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663112251,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":586538,"ip_address":"åŒ—äº¬"},"score":587499,"extra":""}]}]},{"had_liked":false,"id":361334,"user_name":"æè•¾","can_delete":false,"product_type":"c1","uid":1845939,"ip_address":"å¹¿ä¸œ","ucode":"D91BF87565D518","user_header":"https://static001.geekbang.org/account/avatar/00/1c/2a/b3/81b09345.jpg","comment_is_top":false,"comment_ctime":1667439877,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1667439877","product_id":100114001,"comment_content":"åˆ†åº“åˆ†è¡¨éƒ½èƒ½å¤Ÿç¯èŠ‚å†™å…¥çš„å‹åŠ›ï¼Œå…¶ä¸­åˆ†è¡¨ä¸»è¦æ˜¯èƒ½å¤Ÿé™ä½è¡¨é”æˆ–è€…é—´éš™é”çš„é”ç«äº‰ï¼Œä»è€Œç¼“è§£å†™å…¥å‹åŠ›ã€‚<br>æˆ‘åœ¨ä¸šåŠ¡ä¸­åŸºæœ¬ä½¿ç”¨çš„éƒ½æ˜¯ShardingJDBC,ä½¿ç”¨è¿‡ç¨‹ä¸­ç›´æ¥å°†åˆ†åº“åˆ†è¡¨çš„é€»è¾‘é…ç½®å¥½ï¼Œå…·ä½“çš„è·¯ç”±å°±ç”±ShardingJDBCå®ç°ï¼Œä½†æ˜¯è¿™é‡Œéœ€è¦æ³¨æ„çº¿ç¨‹æ± çš„é…ç½®ï¼Œé˜²æ­¢æ•°æ®åº“è¿æ¥æ•°çˆ†ç‚¸çš„é—®é¢˜ï¼Œè¿™ä¸ªä¹Ÿæ˜¯æˆ‘åœ¨ä¸šåŠ¡ä¸Šè¸©è¿‡çš„å¤§å‘ï¼Œä¸€èˆ¬çš„æªæ–½æ˜¯åœ¨æ¥å£ä¾§å¢åŠ é™æµï¼›<br>è¿™é‡Œæˆ‘ç†è§£ï¼Œåˆ†å¸ƒå¼æ¶æ„è®¾è®¡æ›´å¤šçš„è¿˜æ˜¯è¦ä»å®é™…ä¸šåŠ¡å‡ºå‘ï¼Œå°†é€šç”¨èƒ½åŠ›æŠ½å–ï¼Œå‡å°‘ä¸ä¸šåŠ¡çš„è€¦åˆï¼Œç„¶åä¸æ–­ä¼˜åŒ–ä¸ºä¸€æ¬¾å¥½çš„äº§å“ã€‚<br>è™½ç„¶å½“å‰æœ‰TiDBç­‰åˆ†å¸ƒå¼æ•°æ®åº“çš„å‡ºç°ï¼Œä½†æ˜¯ç”±äºç¤¾åŒºã€æŠ€æœ¯ç§¯ç´¯ç­‰ç­‰æ–¹é¢çš„åŸå› ï¼ŒMySQLä¾æ—§è¿˜æ˜¯æœ€ä¸ºå¸¸ç”¨çš„æ•°æ®åº“ï¼Œäº†è§£å¸¸ç”¨çš„åˆ†åº“åˆ†è¡¨çš„ä¸­é—´ä»¶è¿˜æ˜¯å¾ˆå…³é”®çš„ã€‚","like_count":1},{"had_liked":false,"id":356691,"user_name":"Mr.Hwang","can_delete":false,"product_type":"c1","uid":2172620,"ip_address":"ä¸Šæµ·","ucode":"26EE6BF8EB1611","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/picb3nrC6rX6t4t6pHP8huAyrBa9g4lXCsY0uz2OicZsVsCfyLRg523CTWxX5AfEptxCMEC9DMuLZcia1cwzawhmg/132","comment_is_top":false,"comment_ctime":1662515419,"is_pvip":false,"replies":[{"id":"130042","content":"å—¯ï¼Œå¯¹çš„ï¼Œé€šå¸¸å»ºè®®æ˜¯ä»£ç ä¸­ä½¿ç”¨shardjdbcå°±å¥½ï¼Œä½†åœ¨è¿ç»´ç®¡ç†å±‚é¢ï¼Œå¯ä»¥éƒ¨ç½²ä¸€å¥—shardingsphereï¼Œæ–¹ä¾¿è¿›è¡Œæ•°æ®æŸ¥æ‰¾ã€‚","user_name":"ä½œè€…å›å¤","comment_id":356691,"uid":"2348391","ip_address":"ä¸Šæµ·","utype":1,"ctime":1663168281,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":0,"score":"1662515419","product_id":100114001,"comment_content":"å…¶å®é€‰æ‹©ShardingSphereæˆ–CATæ›´å¤šè€ƒè™‘çš„å±‚é¢æ˜¯ä»æ•°æ®åº“æ²»ç†å»è€ƒè™‘çš„ï¼ŒShardingJDBCä¹Ÿè¿˜æ˜¯æ²¡åŠæ³•åšæ²»ç†çš„ã€‚","like_count":0,"discussions":[{"author":{"id":2348391,"avatar":"https://static001.geekbang.org/account/avatar/00/23/d5/67/54efabd8.jpg","nickname":"ä¸­é—´ä»¶å…´è¶£åœˆ","note":"","ucode":"EFC2384D08600E","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":587613,"discussion_content":"å—¯ï¼Œå¯¹çš„ï¼Œé€šå¸¸å»ºè®®æ˜¯ä»£ç ä¸­ä½¿ç”¨shardjdbcå°±å¥½ï¼Œä½†åœ¨è¿ç»´ç®¡ç†å±‚é¢ï¼Œå¯ä»¥éƒ¨ç½²ä¸€å¥—shardingsphereï¼Œæ–¹ä¾¿è¿›è¡Œæ•°æ®æŸ¥æ‰¾ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663168281,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":355642,"user_name":"å“ˆå“ˆå“ˆ","can_delete":false,"product_type":"c1","uid":1248876,"ip_address":"ä¸Šæµ·","ucode":"C40ABE7161EFAE","user_header":"https://static001.geekbang.org/account/avatar/00/13/0e/6c/1f3b1372.jpg","comment_is_top":false,"comment_ctime":1661583620,"is_pvip":false,"replies":[{"id":"130043","content":"ä½ å¥½ï¼Œä½ ä»¬å…¬å¸æŠ€æœ¯è¿˜æ˜¯å¯ä»¥çš„ï¼Œä¸è¿‡æˆ‘åœ¨æƒ³ä½ ä»¬è‡ªå·±å®ç°çš„è¿™ä¸ªç±»åº“ï¼Œè¦å®ç°å¤æ‚çš„sqlè¯­å¥ï¼Œåº”è¯¥æœ‰ç‚¹éš¾åº¦å§ï¼Œä¾‹å¦‚å¤šå±‚åµŒå¥—sqlç­‰ã€‚è¿™ä¸ªæ•°å­—ï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ª hashcode % total,è¿™ä¸ªtotalç”¨1000ï¼Œ100è¿˜æ˜¯1024ï¼Œæœ¬è´¨ä¸Šæ²¡æœ‰å•¥å·®åˆ«çš„ï¼Œæˆ‘ä»¬å…¬å¸1024å¼ è¡¨ï¼Œåˆ†å¸ƒåœ¨16ä¸ªç‰©ç†åº“ä¸Šã€‚","user_name":"ä½œè€…å›å¤","comment_id":355642,"uid":"2348391","ip_address":"ä¸Šæµ·","utype":1,"ctime":1663168402,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":0,"score":"1661583620","product_id":100114001,"comment_content":"ä¸è€å¸ˆï¼Œä¹‹å‰æˆ‘ç”¨è¿‡çš„åˆ†åº“åˆ†è¡¨ä¸­é—´ä»¶ä¹Ÿæ˜¯é›†æˆåœ¨ä¸šåŠ¡ç³»ç»Ÿä¸Šçš„ï¼Œä½†ä¹Ÿæœ‰ä¸€ä¸ªç»Ÿä¸€è¿ç»´å¹³å°ï¼Œè¿™ä¸ªå¹³å°å¯ä»¥æäº¤åˆ†åº“åˆ†è¡¨è§„åˆ™ï¼Œå°±æ˜¯ä¸€æ®µä»£ç ï¼Œæ ¹æ®uId&#47;midç¡®å®šæ˜¯å“ªä¸ªåº“&#47;è¡¨ï¼Œè²Œä¼¼ä¹Ÿæ²¡æœ‰è¿ç»´é—®é¢˜ï¼›å¦å¤–åˆ†æˆ1024ä¸ªè¡¨è¿™ä¸ªæ•°å­—æœ‰ç‚¹å¥‡æ€ªï¼Œæˆ‘ç†è§£è¦ä¹ˆæ˜¯ç™¾åº“ç™¾è¡¨oråƒåº“åƒè¡¨ï¼Œ1024ä¸å¤ªå¥½é…ç½®è§„åˆ™å§ã€‚","like_count":0,"discussions":[{"author":{"id":2348391,"avatar":"https://static001.geekbang.org/account/avatar/00/23/d5/67/54efabd8.jpg","nickname":"ä¸­é—´ä»¶å…´è¶£åœˆ","note":"","ucode":"EFC2384D08600E","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":587614,"discussion_content":"ä½ å¥½ï¼Œä½ ä»¬å…¬å¸æŠ€æœ¯è¿˜æ˜¯å¯ä»¥çš„ï¼Œä¸è¿‡æˆ‘åœ¨æƒ³ä½ ä»¬è‡ªå·±å®ç°çš„è¿™ä¸ªç±»åº“ï¼Œè¦å®ç°å¤æ‚çš„sqlè¯­å¥ï¼Œåº”è¯¥æœ‰ç‚¹éš¾åº¦å§ï¼Œä¾‹å¦‚å¤šå±‚åµŒå¥—sqlç­‰ã€‚è¿™ä¸ªæ•°å­—ï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ª hashcode % total,è¿™ä¸ªtotalç”¨1000ï¼Œ100è¿˜æ˜¯1024ï¼Œæœ¬è´¨ä¸Šæ²¡æœ‰å•¥å·®åˆ«çš„ï¼Œæˆ‘ä»¬å…¬å¸1024å¼ è¡¨ï¼Œåˆ†å¸ƒåœ¨16ä¸ªç‰©ç†åº“ä¸Šã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663168403,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":355327,"user_name":"ç¬¬ä¸€è£…ç”²é›†ç¾¤å¸ä»¤å…‹è±æ–¯ç‰¹","can_delete":false,"product_type":"c1","uid":1265707,"ip_address":"ä¸Šæµ·","ucode":"4E8FBB23AD860B","user_header":"https://static001.geekbang.org/account/avatar/00/13/50/2b/2344cdaa.jpg","comment_is_top":false,"comment_ctime":1661298984,"is_pvip":false,"replies":[{"id":"129389","content":"è¿™ä½å…„å°ä¸€å®šç”¨è¿‡MyCatï¼ŒMyCatè¿™æ¬¾ä¸­é—´ä»¶å¯¹æˆ‘çš„èŒåœºæœ‰æå¤§çš„æ¨åŠ¨ä½œç”¨ï¼Œä½†è¦åœ¨ç”Ÿäº§ç¯å¢ƒä¸­è¿›è¡Œæ•°æ®åº“åˆ†åº“åˆ†è¡¨ï¼Œæˆ‘ä¹Ÿä¸ä¼šé€‰æ‹©mycatï¼Œå¦‚æœç›®å‰å…¬å¸å·²ç»ä½¿ç”¨äº†mycatï¼Œé€šå¸¸è¦æ¨åŠ¨ç”¨æˆ·è¿›è¡Œsqlè§„èŒƒï¼Œé€šå¸¸æ•°æ®é‡å¤§çš„åœºæ™¯ï¼Œå»ºè®®å®æ—¶ä¸šåŠ¡ä½¿ç”¨å•è¡¨æ“ä½œï¼Œå°½é‡é¿å…ä½¿ç”¨joinï¼ŒæŸ¥è¯¢å¯ä»¥é€šè¿‡å¼‚æ„ï¼Œé™ä½å¯¹æ•°æ®åº“çš„ä¾èµ–ã€‚","user_name":"ä½œè€…å›å¤","comment_id":355327,"uid":"2348391","ip_address":"ä¸Šæµ·","utype":1,"ctime":1661525921,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":0,"score":"1661298984","product_id":100114001,"comment_content":"è¿ç»´æˆç§°:ççˆ±ç”Ÿå‘½ï¼Œè¿œç¦»mycat","like_count":0,"discussions":[{"author":{"id":2348391,"avatar":"https://static001.geekbang.org/account/avatar/00/23/d5/67/54efabd8.jpg","nickname":"ä¸­é—´ä»¶å…´è¶£åœˆ","note":"","ucode":"EFC2384D08600E","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585419,"discussion_content":"è¿™ä½å…„å°ä¸€å®šç”¨è¿‡MyCatï¼ŒMyCatè¿™æ¬¾ä¸­é—´ä»¶å¯¹æˆ‘çš„èŒåœºæœ‰æå¤§çš„æ¨åŠ¨ä½œç”¨ï¼Œä½†è¦åœ¨ç”Ÿäº§ç¯å¢ƒä¸­è¿›è¡Œæ•°æ®åº“åˆ†åº“åˆ†è¡¨ï¼Œæˆ‘ä¹Ÿä¸ä¼šé€‰æ‹©mycatï¼Œå¦‚æœç›®å‰å…¬å¸å·²ç»ä½¿ç”¨äº†mycatï¼Œé€šå¸¸è¦æ¨åŠ¨ç”¨æˆ·è¿›è¡Œsqlè§„èŒƒï¼Œé€šå¸¸æ•°æ®é‡å¤§çš„åœºæ™¯ï¼Œå»ºè®®å®æ—¶ä¸šåŠ¡ä½¿ç”¨å•è¡¨æ“ä½œï¼Œå°½é‡é¿å…ä½¿ç”¨joinï¼ŒæŸ¥è¯¢å¯ä»¥é€šè¿‡å¼‚æ„ï¼Œé™ä½å¯¹æ•°æ®åº“çš„ä¾èµ–ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661525921,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":353047,"user_name":"qiuzeliang","can_delete":false,"product_type":"c1","uid":1445485,"ip_address":"ä¸Šæµ·","ucode":"E9E2F9EFC832B6","user_header":"","comment_is_top":false,"comment_ctime":1659090490,"is_pvip":false,"replies":[{"id":"129402","content":"é¦–å…ˆæˆ‘è§‰å¾—ä½ è¯´çš„æ²¡é”™ï¼Œå¦‚æœåªæ˜¯å®ç°è®¢å•è¡¨ä¸€ä¸ªå•è¡¨çš„è·¯ç”±ä¸€ä¸ªç±»ç¼ºå°‘å¾ˆå®¹æ˜“ã€‚ä½†ä¸€ä¸ªè¡¨çš„è¯­æ³•ä¸åªå•è¡¨æ’å…¥ä¸æŸ¥æ‰¾ï¼Œè¿˜æœ‰å„ç§å„æ ·çš„joinã€å­æŸ¥è¯¢ï¼Œåˆ†ç»„ç­‰ï¼Œè¦å®ç°è¿™äº›åŠŸèƒ½ï¼Œå°±æ¯”è¾ƒå›°éš¾äº†ï¼Œå†è€…è¯´æˆ‘ä»¬é¡¹ç›®ä¸­è‚¯å®šä¸åªä¸€ä¸ªè¡¨ï¼Œè¦å®Œæˆå¤šä¸ªè¡¨ï¼Œè€Œä¸”éšç€åœºæ™¯çš„å¢å¤šï¼Œä½ è¿™ä¸ªç±»çš„ç»´æŠ¤å°±ä¼šæ¯”è¾ƒå›°éš¾ï¼Œåé¢å®¹æ˜“è¢«è¿™ä¸ªæŠ€æœ¯éœ€æ±‚æ‰€æ‹–ç´¯ï¼Œè¿›è€Œå½±å“ä¸šåŠ¡åŠŸèƒ½ã€‚æˆ‘çš„æƒ³æ³•æ˜¯ä¸“ä¸šçš„äººåšä¸“ä¸šçš„äº‹æƒ…ï¼Œä¸€äº›å…±æ€§çš„æŠ€æœ¯éœ€æ±‚äº¤ç»™ä¸“é—¨ç ”ç©¶è¿™æ–¹é¢çš„å¤§ç‰›å†™å‡ºæ¥çš„ä¸­é—´ä»¶ã€‚","user_name":"ä½œè€…å›å¤","comment_id":353047,"uid":"2348391","ip_address":"ä¸Šæµ·","utype":1,"ctime":1661574657,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":0,"score":"1659090490","product_id":100114001,"comment_content":"å†™ä¸€ä¸ªç±»å°±å¯ä»¥å¤„ç†æ ¹æ®è®¢å•ç¼–å·è·¯ç”±åˆ°å¯¹åº”çš„è¡¨ï¼Œä¸ºå•¥è¦å¼•å…¥æ•°æ®åº“ä¸­é—´ä»¶ï¼Ÿ ä¸ªäººè§‰å¾—ä»¥è¿™ä¸ªç†ç”±å¼•å…¥æ•°æ®åº“ä¸­é—´ä»¶ä¸å¤Ÿå……åˆ†","like_count":0,"discussions":[{"author":{"id":2348391,"avatar":"https://static001.geekbang.org/account/avatar/00/23/d5/67/54efabd8.jpg","nickname":"ä¸­é—´ä»¶å…´è¶£åœˆ","note":"","ucode":"EFC2384D08600E","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585448,"discussion_content":"é¦–å…ˆæˆ‘è§‰å¾—ä½ è¯´çš„æ²¡é”™ï¼Œå¦‚æœåªæ˜¯å®ç°è®¢å•è¡¨ä¸€ä¸ªå•è¡¨çš„è·¯ç”±ä¸€ä¸ªç±»ç¼ºå°‘å¾ˆå®¹æ˜“ã€‚ä½†ä¸€ä¸ªè¡¨çš„è¯­æ³•ä¸åªå•è¡¨æ’å…¥ä¸æŸ¥æ‰¾ï¼Œè¿˜æœ‰å„ç§å„æ ·çš„joinã€å­æŸ¥è¯¢ï¼Œåˆ†ç»„ç­‰ï¼Œè¦å®ç°è¿™äº›åŠŸèƒ½ï¼Œå°±æ¯”è¾ƒå›°éš¾äº†ï¼Œå†è€…è¯´æˆ‘ä»¬é¡¹ç›®ä¸­è‚¯å®šä¸åªä¸€ä¸ªè¡¨ï¼Œè¦å®Œæˆå¤šä¸ªè¡¨ï¼Œè€Œä¸”éšç€åœºæ™¯çš„å¢å¤šï¼Œä½ è¿™ä¸ªç±»çš„ç»´æŠ¤å°±ä¼šæ¯”è¾ƒå›°éš¾ï¼Œåé¢å®¹æ˜“è¢«è¿™ä¸ªæŠ€æœ¯éœ€æ±‚æ‰€æ‹–ç´¯ï¼Œè¿›è€Œå½±å“ä¸šåŠ¡åŠŸèƒ½ã€‚æˆ‘çš„æƒ³æ³•æ˜¯ä¸“ä¸šçš„äººåšä¸“ä¸šçš„äº‹æƒ…ï¼Œä¸€äº›å…±æ€§çš„æŠ€æœ¯éœ€æ±‚äº¤ç»™ä¸“é—¨ç ”ç©¶è¿™æ–¹é¢çš„å¤§ç‰›å†™å‡ºæ¥çš„ä¸­é—´ä»¶ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661574657,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":348666,"user_name":"æäºŒæœ¨","can_delete":false,"product_type":"c1","uid":1103091,"ip_address":"ä¸Šæµ·","ucode":"30E03BB84ADB27","user_header":"https://static001.geekbang.org/account/avatar/00/10/d4/f3/129d6dfe.jpg","comment_is_top":false,"comment_ctime":1655288546,"is_pvip":true,"replies":[{"id":"130047","content":"ä½ å¥½ï¼Œä½ è¿™ä¹ˆè¯´ä¹Ÿæ²¡é”™ï¼Œå½“ç„¶å¦‚æœè¯´çš„æ¯”è¾ƒä¸¥è°¨çš„è¯ï¼Œæˆ‘è§‰å¾—å¯ä»¥å†ç»†åˆ†ä¸€ä¸‹ã€‚<br>å…¶å®RocketMQçš„ä¸»ä»åŒæ­¥ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¤šä¸»å¤šä»ä¸€æ ·å¯ä»¥å®ç°é«˜å¯ç”¨ï¼Œæˆ‘ä»¬å°†ä¸€ä¸»ä¸€ä»å½“æˆä¸€ä¸ªå¤åˆ¶ç»„ï¼Œå¦‚æœä¸»èŠ‚ç‚¹å®•æœºï¼Œå†™å…¥æµé‡ä¼šè½¬ç§»åˆ°å…¶ä»–ä¸»èŠ‚ç‚¹ï¼Œå¹¶ä¸”ä»èŠ‚ç‚¹å¯ä»¥ç»§ç»­æ¶ˆè´¹ã€‚<br>å½“ç„¶å¤šå‰¯æœ¬ï¼Œæ¯”ä¸»ä»åŒæ­¥æ›´åŠ å‰å®³çš„ä¸€ç‚¹æ˜¯ï¼Œåœ¨å¤åˆ¶ç»„å†…å¯ç”¨è¿›è¡Œä¸»ä»åˆ‡æ¢ï¼Œå¯ä»¥é¿å…å› ä¸€ä¸ªå¤åˆ¶ç»„å®•æœºè€Œç»™å…¶ä»–å¤åˆ¶ç»„å¸¦æ¥æ›´å¤§çš„æµé‡å‹åŠ›ã€‚","user_name":"ä½œè€…å›å¤","comment_id":348666,"uid":"2348391","ip_address":"ä¸Šæµ·","utype":1,"ctime":1663168939,"user_name_real":"ç¼–è¾‘"}],"discussion_count":2,"race_medal":0,"score":"1655288546","product_id":100114001,"comment_content":"å¦‚æœè¦é«˜å¯ç”¨å°±æ˜¯å¤šå‰¯æœ¬æ–¹å¼","like_count":0,"discussions":[{"author":{"id":2348391,"avatar":"https://static001.geekbang.org/account/avatar/00/23/d5/67/54efabd8.jpg","nickname":"ä¸­é—´ä»¶å…´è¶£åœˆ","note":"","ucode":"EFC2384D08600E","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":587618,"discussion_content":"ä½ å¥½ï¼Œä½ è¿™ä¹ˆè¯´ä¹Ÿæ²¡é”™ï¼Œå½“ç„¶å¦‚æœè¯´çš„æ¯”è¾ƒä¸¥è°¨çš„è¯ï¼Œæˆ‘è§‰å¾—å¯ä»¥å†ç»†åˆ†ä¸€ä¸‹ã€‚\nå…¶å®RocketMQçš„ä¸»ä»åŒæ­¥ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¤šä¸»å¤šä»ä¸€æ ·å¯ä»¥å®ç°é«˜å¯ç”¨ï¼Œæˆ‘ä»¬å°†ä¸€ä¸»ä¸€ä»å½“æˆä¸€ä¸ªå¤åˆ¶ç»„ï¼Œå¦‚æœä¸»èŠ‚ç‚¹å®•æœºï¼Œå†™å…¥æµé‡ä¼šè½¬ç§»åˆ°å…¶ä»–ä¸»èŠ‚ç‚¹ï¼Œå¹¶ä¸”ä»èŠ‚ç‚¹å¯ä»¥ç»§ç»­æ¶ˆè´¹ã€‚\nå½“ç„¶å¤šå‰¯æœ¬ï¼Œæ¯”ä¸»ä»åŒæ­¥æ›´åŠ å‰å®³çš„ä¸€ç‚¹æ˜¯ï¼Œåœ¨å¤åˆ¶ç»„å†…å¯ç”¨è¿›è¡Œä¸»ä»åˆ‡æ¢ï¼Œå¯ä»¥é¿å…å› ä¸€ä¸ªå¤åˆ¶ç»„å®•æœºè€Œç»™å…¶ä»–å¤åˆ¶ç»„å¸¦æ¥æ›´å¤§çš„æµé‡å‹åŠ›ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663168939,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1032345,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c0/99/259a412f.jpg","nickname":"Geeker","note":"","ucode":"9937127DE96D78","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":576217,"discussion_content":"æ€»ç»“ä¸€ä¸ªå­—â€œğŸ’°â€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655355956,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":348497,"user_name":"cæ¢¦","can_delete":false,"product_type":"c1","uid":1616385,"ip_address":"ä¸Šæµ·","ucode":"E860801B197DBA","user_header":"https://static001.geekbang.org/account/avatar/00/18/aa/01/641f3c3a.jpg","comment_is_top":false,"comment_ctime":1655135814,"is_pvip":false,"replies":[{"id":"130049","content":"ä½ å¥½ï¼Œä½ çš„ç†è§£æ²¡æœ‰é”™ã€‚ä¸Šé¢æ˜¯æŒ‡æ²¡æœ‰ä½¿ç”¨shardingjdbcè¿™æ ·åˆ†åº“åˆ†è¡¨ç»„ä»¶æ—¶éœ€è¦åšçš„äº‹æƒ…ï¼Œä¹Ÿå°±æ˜¯æŠ›å‡ºåˆ†åº“åˆ†è¡¨çš„ä¸€äº›å…±æ€§éœ€æ±‚ï¼Œåé¢ä¸šç•Œå¤§ç¥æ‰¾åˆ°äº†å¾ˆå¤šé€šç”¨çš„è§£å†³æ–¹æ¡ˆï¼Œshardingjdbc,mycatè¿™æ ·ä¼˜ç§€çš„ä¸­é—´ä»¶è¥åº”è¿è€Œç”Ÿã€‚","user_name":"ä½œè€…å›å¤","comment_id":348497,"uid":"2348391","ip_address":"ä¸Šæµ·","utype":1,"ctime":1663169087,"user_name_real":"ç¼–è¾‘"}],"discussion_count":4,"race_medal":0,"score":"1655135814","product_id":100114001,"comment_content":"æ–‡ç« ç‰‡æ®µï¼šã€Œä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœè®¢å•è¡¨è¢«åˆ†æˆäº† 1024 ä¸ªè¡¨ï¼Œè¿™æ—¶å€™å¦‚æœä½ æƒ³æ ¹æ®è®¢å•ç¼–å·å»æŸ¥è¯¢æ•°æ®ï¼Œå¿…é¡»äººä¸ºè®¡ç®—å‡ºè¿™æ¡æ•°æ®å­˜åœ¨äºå“ªä¸ªåº“çš„å“ªä¸ªè¡¨ä¸­ï¼Œç„¶åå†å»å¯¹åº”çš„åº“ä¸Šæ‰§è¡Œ SQL è¯­å¥ã€‚ã€<br><br>è€å¸ˆï¼Œæ‚¨å¥½ï¼Œè¿™é‡Œæˆ‘æ²¡å¤ªæ‡‚ï¼Œä¸ºä»€ä¹ˆéœ€è¦äººä¸ºè®¡ç®—å‡ºæ•°æ®åº“å­˜åœ¨äºå“ªä¸ªè¡¨ï¼Œå› ä¸º sharding-jdbc åº”è¯¥æ˜¯å¯ä»¥æ ¹æ®é…ç½®çŸ¥é“æœ‰å“ªäº›åº“å“ªäº›è¡¨çš„ï¼Œç„¶åæ ¹æ®ä»–çš„ç®—æ³•è®¡ç®—å‡ºå»å“ªä¸ªåº“è¡¨æ‰§è¡Œsqlçš„å§ï¼Ÿæˆ‘æ²¡æœ‰ç”¨è¿‡ sharding-jdbcï¼Œå¯èƒ½æ˜¯ç†è§£æœ‰åå·®ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":2348391,"avatar":"https://static001.geekbang.org/account/avatar/00/23/d5/67/54efabd8.jpg","nickname":"ä¸­é—´ä»¶å…´è¶£åœˆ","note":"","ucode":"EFC2384D08600E","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":587620,"discussion_content":"ä½ å¥½ï¼Œä½ çš„ç†è§£æ²¡æœ‰é”™ã€‚ä¸Šé¢æ˜¯æŒ‡æ²¡æœ‰ä½¿ç”¨shardingjdbcè¿™æ ·åˆ†åº“åˆ†è¡¨ç»„ä»¶æ—¶éœ€è¦åšçš„äº‹æƒ…ï¼Œä¹Ÿå°±æ˜¯æŠ›å‡ºåˆ†åº“åˆ†è¡¨çš„ä¸€äº›å…±æ€§éœ€æ±‚ï¼Œåé¢ä¸šç•Œå¤§ç¥æ‰¾åˆ°äº†å¾ˆå¤šé€šç”¨çš„è§£å†³æ–¹æ¡ˆï¼Œshardingjdbc,mycatè¿™æ ·ä¼˜ç§€çš„ä¸­é—´ä»¶è¥åº”è¿è€Œç”Ÿã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663169087,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1025718,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a6/b6/27412d76.jpg","nickname":"è‹è¶…","note":"","ucode":"46D659C89BA8C4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":575944,"discussion_content":"æˆ‘è®¤ä¸ºæ–‡ç« ä¸­çš„æ„æ€æ˜¯: å¦‚æœä½ æƒ³è¦ç›´æ¥åœ¨æ•°æ®åº“ä¸­æŸ¥çœ‹è¿™æ¡è®¢å•çš„æ•°æ®, å°±éœ€è¦æ‰‹åŠ¨è®¡ç®—ä¸€ä¸‹è¿™æ¡æ•°æ®è¢«å­˜å‚¨åˆ°å“ªä¸ªåº“çš„å“ªä¸ªè¡¨äº†","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1655200821,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2348391,"avatar":"https://static001.geekbang.org/account/avatar/00/23/d5/67/54efabd8.jpg","nickname":"ä¸­é—´ä»¶å…´è¶£åœˆ","note":"","ucode":"EFC2384D08600E","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":575995,"discussion_content":"ä½ å¥½ï¼Œå°±æ˜¯å¦‚æœæˆ‘ä»¬ä»è¿ç»´çš„è§’åº¦ï¼Œæƒ³å»æ•°æ®åº“ä¸­å»æŸ¥è¯¢æ•°æ®ï¼Œå› ä¸ºåˆ†æˆäº†1024å¼ è¡¨ï¼Œæˆ‘ä»¬æ— æ³•ç›´è§‚çš„çŸ¥é“è¿™æ¡æ•°æ®åœ¨å“ªä¸ªè¡¨ï¼Œselect * from tableè¿™ä¸ªtableåç§°ä¸çŸ¥é“æ€ä¹ˆå¡«","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655220215,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1542009,"avatar":"https://static001.geekbang.org/account/avatar/00/17/87/79/427f807c.jpg","nickname":"@è“‰åŸğŸ¬","note":"","ucode":"AE35D76AC72D9A","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":575946,"discussion_content":"æ˜¯çš„ æˆ‘ä»¬ä½¿ç”¨åˆ†åº“åˆ†è¡¨ éƒ½è¦å†™ä¸€ä¸ªdemo æ–¹ä¾¿æŸ¥æ‰¾åœ¨é‚£ä¸ªåº“å“ªä¸ªè¡¨    ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655203717,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}