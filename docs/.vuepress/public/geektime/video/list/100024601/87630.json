{"id":87630,"title":"19 | 如何在Vue中使用Vuex","content":"<h1>勘误</h1><p>Vuex 的 actions 应该避免直接操作 state，state 的更改应该由 mutations 去修改，不然 vue-devtools 插件记录不到 state 变更，<br>\nactions 可以根据当前 state 进一步处理数据，计算或请求后端接口，然后通过 commit 的形式提交给 mutations 去处理。</p><p>本节计数器 actions 部分直接操作了 state ，这个写法有问题，正确代码如下：</p><pre><code class=\"language-js\">increment({commit}) {\n  setTimeout(()=&gt;{\n    commit('increment')\n  }, 3000)\n}\n</code></pre><h1>源代码及课件地址</h1><p><a href=\"https://gitee.com/geektime-geekbang/geektime-vue-1\">https://gitee.com/geektime-geekbang/geektime-vue-1</a></p>","comments":[{"had_liked":false,"id":80205,"user_name":"Yrt","can_delete":false,"product_type":"c3","uid":1474215,"ip_address":"","ucode":"3D8CFF5052BC93","user_header":"","comment_is_top":true,"comment_ctime":1553619499,"is_pvip":false,"replies":[{"id":29253,"content":"感谢提醒，的确不应该在actions里面去操作state，这样devtools就记录不到变化状态了，传的依然是context哈，注意state两边的大括号，他的作用就是从context里面取出来 state，也是es6的语法，正确代码应该是：\nactions: {\n    increment({commit}) {\n      setTimeout(()=&gt;{\n        commit(&#39;increment&#39;)\n      }, 3000)\n    }\n  },","user_name":"作者回复","user_name_real":"唐","uid":1316874,"ctime":1553649435,"ip_address":"","comment_id":80205,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100024601,"comment_content":"有个问题， 为什么在actions 里的increment函数可以直接修改 state.count？   我翻了文档，里面说的是在actions里去提交mutations  不让直接更改状态 。increment  文档里的传的参数是context   然后视频里传的 是state  是因为这个参数的原因吗？","like_count":31,"discussions":[{"author":{"id":1364205,"avatar":"https://static001.geekbang.org/account/avatar/00/14/d0/ed/33485c43.jpg","nickname":"、怦然心动 ~","note":"","ucode":"012965414B4B19","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":194919,"discussion_content":"这样应该比较好理解\n\nactions:{\n    increment(context){\n      console.log(context)\n      setTimeout(()=>{\n        context.commit(&#39;increment&#39;)\n        //context.state.count ++ ;\n      }, 3000)\n    }\n  }","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1583245876,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1736720,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/80/10/2406a662.jpg","nickname":"希言自然","note":"","ucode":"8D99A82B05636B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1364205,"avatar":"https://static001.geekbang.org/account/avatar/00/14/d0/ed/33485c43.jpg","nickname":"、怦然心动 ~","note":"","ucode":"012965414B4B19","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":233619,"discussion_content":"//未用参数解构\nactions: {\n    increment (context) {\n      context.commit(&#39;increment&#39;)\n    }\n  }\n//使用参数解构\nactions: {\n  increment ({ commit }) {\n    commit(&#39;increment&#39;)\n  }\n}","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1586934784,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":194919,"ip_address":"","group_id":0},"score":233619,"extra":""}]},{"author":{"id":1316874,"avatar":"https://static001.geekbang.org/account/avatar/00/14/18/0a/28206510.jpg","nickname":"唐金州","note":"","ucode":"563B97D87C66AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":444783,"discussion_content":"感谢提醒，的确不应该在actions里面去操作state，这样devtools就记录不到变化状态了，传的依然是context哈，注意state两边的大括号，他的作用就是从context里面取出来 state，也是es6的语法，正确代码应该是：\nactions: {\n    increment({commit}) {\n      setTimeout(()=&amp;gt;{\n        commit(&amp;#39;increment&amp;#39;)\n      }, 3000)\n    }\n  },","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1553649435,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":80888,"user_name":"药岩","can_delete":false,"product_type":"c3","uid":1394849,"ip_address":"","ucode":"5C47691638051A","user_header":"https://static001.geekbang.org/account/avatar/00/15/48/a1/d0364910.jpg","comment_is_top":false,"comment_ctime":1553749617,"is_pvip":false,"replies":[{"id":29408,"content":"没必要的，单个状态没有任何意义，涉及到进一步计算合并才使用getter","user_name":"作者回复","user_name_real":"唐","uid":1316874,"ctime":1553767856,"ip_address":"","comment_id":80888,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100024601,"comment_content":"老师，我想问下，使用vuex的时候有没有必要将所有的state都转化成getter，然后让组件通过mapGetters去获取属性","like_count":3,"discussions":[{"author":{"id":1316874,"avatar":"https://static001.geekbang.org/account/avatar/00/14/18/0a/28206510.jpg","nickname":"唐金州","note":"","ucode":"563B97D87C66AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445009,"discussion_content":"没必要的，单个状态没有任何意义，涉及到进一步计算合并才使用getter","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553767856,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":162122,"user_name":"qf年间","can_delete":false,"product_type":"c3","uid":1463023,"ip_address":"","ucode":"AA08AC984637EE","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLbchZfeEnshPuUwEsQkn1XbWxjs3rRUpSRUxjW4q7rOcrPvXld0IxEZ1jlpEJdklFeEVERJoOfibg/132","comment_is_top":false,"comment_ctime":1576463751,"is_pvip":false,"replies":[{"id":66677,"content":"无关，放在计算属性里面可以很好的响应vuex中数据的变化","user_name":"作者回复","user_name_real":"唐","uid":1316874,"ctime":1579064160,"ip_address":"","comment_id":162122,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100024601,"comment_content":"老师请问为什么要在computed里面获取count值呢，这个是否跟生命周期有关","like_count":2,"discussions":[{"author":{"id":1316874,"avatar":"https://static001.geekbang.org/account/avatar/00/14/18/0a/28206510.jpg","nickname":"唐金州","note":"","ucode":"563B97D87C66AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477957,"discussion_content":"无关，放在计算属性里面可以很好的响应vuex中数据的变化","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579064160,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1736720,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/80/10/2406a662.jpg","nickname":"希言自然","note":"","ucode":"8D99A82B05636B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":233652,"discussion_content":"老师一上来就说了，关于多个 DOM 节点都要访问我们的数据时，通过层层递归的方式低效且繁琐。所以给我们提供了2个方案，1个是通过 proxy/inject 的方式，callback 通知到需要使用数据的 DOM 节点，数据量少OK，一多了，就繁琐且冗余代码了。2个是通过 Vuex 的状态管理来实现，通过在 Vue 实例中绑定 Vuex 的状态数据到计算属性中，可以在 Vuex 状态实例中的数据发生改变就立即响应到各个使用到 Vuex 状态实例中数据的其他组件中。不知道理解是否正确，敬请赐教~~","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1586937206,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":80585,"user_name":"@","can_delete":false,"product_type":"c3","uid":1375520,"ip_address":"","ucode":"AE7B3F39E8AC30","user_header":"https://static001.geekbang.org/account/avatar/00/14/fd/20/8b1ffed7.jpg","comment_is_top":false,"comment_ctime":1553684961,"is_pvip":false,"replies":[{"id":29377,"content":"下周开始更新实战部分","user_name":"编辑回复","user_name_real":"张浩","uid":1000075,"ctime":1553739239,"ip_address":"","comment_id":80585,"utype":2}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100024601,"comment_content":"希望老师能稍微更新快点，我十分感兴趣后面的实战项目。","like_count":2,"discussions":[{"author":{"id":1000075,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/42/8b/6ea91a1b.jpg","nickname":"Sean","note":"","ucode":"6D1A2F16FA4A41","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":444910,"discussion_content":"下周开始更新实战部分","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553739239,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":208530,"user_name":"小霞","can_delete":false,"product_type":"c3","uid":1887627,"ip_address":"","ucode":"0655AAD3D3BF10","user_header":"https://static001.geekbang.org/account/avatar/00/1c/cd/8b/f07b0caa.jpg","comment_is_top":false,"comment_ctime":1587375933,"is_pvip":false,"replies":[{"id":80651,"content":"这和你起的名字没关系  是vuex内部做的  不必纠结这个","user_name":"作者回复","user_name_real":"唐","uid":1316874,"ctime":1589710841,"ip_address":"","comment_id":208530,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100024601,"comment_content":"为什么const 变量名 = new Vuex.Store({});\n用 this.$变量名 就不能拿到定义的数据，但是如果变量名是store就可以呢？","like_count":1,"discussions":[{"author":{"id":1316874,"avatar":"https://static001.geekbang.org/account/avatar/00/14/18/0a/28206510.jpg","nickname":"唐金州","note":"","ucode":"563B97D87C66AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":492494,"discussion_content":"这和你起的名字没关系  是vuex内部做的  不必纠结这个","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589710841,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":80777,"user_name":"王永林","can_delete":false,"product_type":"c3","uid":1120609,"ip_address":"","ucode":"260ED46F8278F6","user_header":"https://static001.geekbang.org/account/avatar/00/11/19/61/49643891.jpg","comment_is_top":false,"comment_ctime":1553733342,"is_pvip":false,"replies":[{"id":29401,"content":"不应该，版本依赖并不需要自己配置，这也是相对于java的优势，你完全可以不懂node，就可以使用vue","user_name":"作者回复","user_name_real":"唐","uid":1316874,"ctime":1553749344,"ip_address":"","comment_id":80777,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100024601,"comment_content":"感觉不懂node开发学习起来有点吃力，最近搞了好多遍环境，总是因为版本依赖问题最后导致无法运行起来，于是又重新建项目。作为老java开发，也只会在idea下写代码，就是开发用的插件不支持2.6","like_count":1,"discussions":[{"author":{"id":1316874,"avatar":"https://static001.geekbang.org/account/avatar/00/14/18/0a/28206510.jpg","nickname":"唐金州","note":"","ucode":"563B97D87C66AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":444970,"discussion_content":"不应该，版本依赖并不需要自己配置，这也是相对于java的优势，你完全可以不懂node，就可以使用vue","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553749344,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1310099,"avatar":"https://static001.geekbang.org/account/avatar/00/13/fd/93/9a3a3e83.jpg","nickname":"WZ","note":"","ucode":"43B5BB6924A33F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":158715,"discussion_content":"其实对于vue和node的关系，它们只是基本语法相同，都是ECMAScript，其他的应该没啥关系。vue是前端框架，node是后端框架。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1580617085,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":80690,"user_name":"刘彪","can_delete":false,"product_type":"c3","uid":1381320,"ip_address":"","ucode":"F99AB6EB881FB2","user_header":"https://static001.geekbang.org/account/avatar/00/15/13/c8/c8493a33.jpg","comment_is_top":false,"comment_ctime":1553698486,"is_pvip":false,"replies":[{"id":30183,"content":"重装试试吧  npm建议使用 taobao 源。","user_name":"作者回复","user_name_real":"唐","uid":1316874,"ctime":1554637608,"ip_address":"","comment_id":80690,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100024601,"comment_content":"启动演示DEMO源码出现依赖错误，但是已经安装过core-js了\nThese dependencies were not found:\n\n* core-js&#47;modules&#47;es6.array.find-index in .&#47;node_modules&#47;_cache-loader@2.0.1@cache-loader&#47;dist&#47;cjs.js??ref--12-0!.&#47;node_modules&#47;_babel-loader@8.0.5@babel-loader&#47;lib!.&#47;node_modules&#47;_cache-loader@2.0.1@","like_count":1,"discussions":[{"author":{"id":1316874,"avatar":"https://static001.geekbang.org/account/avatar/00/14/18/0a/28206510.jpg","nickname":"唐金州","note":"","ucode":"563B97D87C66AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":444946,"discussion_content":"重装试试吧  npm建议使用 taobao 源。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554637608,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":163459,"user_name":"qf年间","can_delete":false,"product_type":"c3","uid":1463023,"ip_address":"","ucode":"AA08AC984637EE","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLbchZfeEnshPuUwEsQkn1XbWxjs3rRUpSRUxjW4q7rOcrPvXld0IxEZ1jlpEJdklFeEVERJoOfibg/132","comment_is_top":false,"comment_ctime":1576725446,"is_pvip":false,"replies":[{"id":66676,"content":"清理缓存？  你说的是热更新吧？ 如果是热更新，没有办法，但也不是每次都需要啊，大部分的改动都可以完美支持的","user_name":"作者回复","user_name_real":"唐","uid":1316874,"ctime":1579064017,"ip_address":"","comment_id":163459,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100024601,"comment_content":"有没有什么避免每次都清理缓存刷新页面的方法啊，要不有的时候总抱错","like_count":0,"discussions":[{"author":{"id":1316874,"avatar":"https://static001.geekbang.org/account/avatar/00/14/18/0a/28206510.jpg","nickname":"唐金州","note":"","ucode":"563B97D87C66AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478401,"discussion_content":"清理缓存？  你说的是热更新吧？ 如果是热更新，没有办法，但也不是每次都需要啊，大部分的改动都可以完美支持的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579064017,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":82449,"user_name":"Ted","can_delete":false,"product_type":"c3","uid":1208862,"ip_address":"","ucode":"9E43E0B3DEFC0F","user_header":"https://static001.geekbang.org/account/avatar/00/12/72/1e/cb7d113a.jpg","comment_is_top":false,"comment_ctime":1554215798,"is_pvip":false,"replies":[{"id":29933,"content":"就是使用系统自带的，mac  terminal，如果你也使用的mac，看到的和我不一样，是我自己自定义了主题。","user_name":"作者回复","user_name_real":"唐","uid":1316874,"ctime":1554338872,"ip_address":"","comment_id":82449,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100024601,"comment_content":"请问下老师使用的命令行工具叫什么？","like_count":0,"discussions":[{"author":{"id":1316874,"avatar":"https://static001.geekbang.org/account/avatar/00/14/18/0a/28206510.jpg","nickname":"唐金州","note":"","ucode":"563B97D87C66AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445593,"discussion_content":"就是使用系统自带的，mac  terminal，如果你也使用的mac，看到的和我不一样，是我自己自定义了主题。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554338872,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":218938,"user_name":"virtual","can_delete":false,"product_type":"c3","uid":1290854,"ip_address":"","ucode":"7949FA56920FBF","user_header":"https://static001.geekbang.org/account/avatar/00/13/b2/66/eeeba106.jpg","comment_is_top":false,"comment_ctime":1589901106,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100024601,"comment_content":"$store是通过new Vue.use(Vuex)的时候注入挂载到实例this上面的。在注入的时候通过Vue.mixin()，在生命周期为beforecreate的时候完成的","like_count":21},{"had_liked":false,"id":184199,"user_name":"、怦然心动 ~","can_delete":false,"product_type":"c3","uid":1364205,"ip_address":"","ucode":"012965414B4B19","user_header":"https://static001.geekbang.org/account/avatar/00/14/d0/ed/33485c43.jpg","comment_is_top":false,"comment_ctime":1583245886,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100024601,"comment_content":"这样应该比较好理解\n\nactions:{\n    increment(context){\n      console.log(context)\n      setTimeout(()=&gt;{\n        context.commit(&#39;increment&#39;)\n        &#47;&#47;context.state.count ++ ;\n      }, 3000)\n    }\n  }","like_count":14},{"had_liked":false,"id":80111,"user_name":"Przeblysk","can_delete":false,"product_type":"c3","uid":1067497,"ip_address":"","ucode":"7A3B46F0CB95DB","user_header":"https://static001.geekbang.org/account/avatar/00/10/49/e9/89285a98.jpg","comment_is_top":false,"comment_ctime":1553607009,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":3,"product_id":100024601,"comment_content":"Vue 已经用了挺久了，在公司也用 Vue 写过了几个项目，虽然是个Java程序员 但对前端越来越感兴趣。 希望在这门课学习之后可以对 Vue 的基础有更深入的理解。","like_count":10,"discussions":[{"author":{"id":1336475,"avatar":"https://static001.geekbang.org/account/avatar/00/14/64/9b/d1ab239e.jpg","nickname":"J.Smile","note":"","ucode":"C4D98DFDBF7584","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":295590,"discussion_content":"后来的感想也可以说下","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596257769,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":224310,"user_name":"Chrolly","can_delete":false,"product_type":"c3","uid":1869238,"ip_address":"","ucode":"AD685B42238C93","user_header":"https://static001.geekbang.org/account/avatar/00/1c/85/b6/eef40011.jpg","comment_is_top":false,"comment_ctime":1591342494,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100024601,"comment_content":"通过调用 Vue.use(Vuex)，Vuex 通过在根实例中注册 store 选项， store 实例会注入到根组件下的所有子组件中，那么子组件可以通过 this.$store 访问到。","like_count":3},{"had_liked":false,"id":186474,"user_name":"Victory","can_delete":false,"product_type":"c3","uid":1329958,"ip_address":"","ucode":"13183D043C9557","user_header":"https://static001.geekbang.org/account/avatar/00/14/4b/26/3bea96f9.jpg","comment_is_top":false,"comment_ctime":1583850314,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":3,"product_id":100024601,"comment_content":"我现在主要就是用state 存储了些用户信息，但是刷新页面之后状态就会清空掉，还需要在刷新前把信息存到本地，有什么比较好的方案吗，老师","like_count":2,"discussions":[{"author":{"id":1484957,"avatar":"https://static001.geekbang.org/account/avatar/00/16/a8/9d/7ff70837.jpg","nickname":"NANA","note":"","ucode":"60101AD338E066","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":228978,"discussion_content":"我们是在路由守卫里面，判断一下存的信息是否存在，不存在的话重新去取。","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1586597816,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":220924,"user_name":"╰奮乧╯","can_delete":false,"product_type":"c3","uid":2014588,"ip_address":"","ucode":"7183586FFC65F3","user_header":"https://static001.geekbang.org/account/avatar/00/1e/bd/7c/b48deab0.jpg","comment_is_top":false,"comment_ctime":1590337585,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":3,"product_id":100024601,"comment_content":"老师，请问下，我引入vuex启动报错是怎么回事\n @ .&#47;src&#47;main.js 7:0-28 18:13-16\n @ multi (webpack)-dev-server&#47;client?http:&#47;&#47;192.168.3.122:8081&#47;sockjs-node (webpack)&#47;hot&#47;dev-server.js .&#47;src&#47;main.js\n WAIT  Compiling...  \n98% after emitting CopyPlugin\n ERROR  Failed to compile with 1 errors                                                                          0:14:25\n error  in .&#47;src&#47;App.vue\nModule Error (from .&#47;node_modules&#47;eslint-loader&#47;index.js):\nE:\\2-PrivateSpace\\develop\\vue\\vuex-demo1\\src\\App.vue\n  11:2  error  Mixed spaces and tabs  no-mixed-spaces-and-tabs\n  13:2  error  Mixed spaces and tabs  no-mixed-spaces-and-tabs\n✖ 2 problems (2 errors, 0 warnings)\n\nmain.js\nimport Vue from &#39;vue&#39;\nimport Vuex from &#39;vuex&#39;\nimport App from &#39;.&#47;App.vue&#39;\n\nVue.use(Vuex)\nVue.config.productionTip = false\n\nconst store = new Vuex.Store()({\n\tstate:{\n\t\tcount: 0,\n\t}\n})\n\nnew Vue({\n  store,\n  render: h =&gt; h(App),\n}).$mount(&#39;#app&#39;)\n\nApp.vue\n&lt;template&gt;\n  &lt;div id=&quot;app&quot;&gt;\n    {{count}}\n  &lt;&#47;div&gt;\n&lt;&#47;template&gt;\n\n&lt;script&gt;\nexport default {\n  name: &#39;app&#39;,\n  computed: {\n\t  count() {\n\t\treturn this.$store.state.count\n\t  }\n  }\n}\n&lt;&#47;script&gt;\n\n\n","like_count":1,"discussions":[{"author":{"id":1765894,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/f2/06/ebb5b764.jpg","nickname":"NikkiZeng","note":"","ucode":"F669C811773394","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":278829,"discussion_content":"禁止使用空格和tab混合缩进；你把eslint检查关了就好了,如果用的vue3.0脚手架,新建一个vue.config.js,然后在配置文件中写module.exports = {\n\tlintOnSave:false \n}","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1591239269,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":357014,"user_name":"leesper","can_delete":false,"product_type":"c3","uid":1351104,"ip_address":"贵州","ucode":"CC76320571BECA","user_header":"https://static001.geekbang.org/account/avatar/00/14/9d/c0/cb5341ec.jpg","comment_is_top":false,"comment_ctime":1662862524,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100024601,"comment_content":"yarn add vuex安装的vuex，和老师一模一样的代码，this.$store是undefined的不知道为啥","like_count":0},{"had_liked":false,"id":299124,"user_name":"D.A.Y","can_delete":false,"product_type":"c3","uid":1238529,"ip_address":"","ucode":"A9B60EBE6AC011","user_header":"https://static001.geekbang.org/account/avatar/00/12/e6/01/ae2468f3.jpg","comment_is_top":false,"comment_ctime":1624467927,"is_pvip":false,"replies":null,"discussion_count":2,"race_medal":0,"score":3,"product_id":100024601,"comment_content":"这里可以不用计算属性， 直接用 count: this.$store.count 吗","like_count":0,"discussions":[{"author":{"id":2274485,"avatar":"https://static001.geekbang.org/account/avatar/00/22/b4/b5/fcdfa987.jpg","nickname":"你已经长大了快告诉全世界","note":"","ucode":"07B8C0095552D9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":392525,"discussion_content":"直接用的话 store中的count更新了 页面不会跟着更新","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1631027236,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1465342,"avatar":"https://static001.geekbang.org/account/avatar/00/16/5b/fe/7c2314e0.jpg","nickname":"G.Y","note":"","ucode":"3E4A6B0BDE5DDE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":410707,"discussion_content":"楼上正解","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635763032,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":226668,"user_name":"周晓英","can_delete":false,"product_type":"c3","uid":2035314,"ip_address":"","ucode":"5D71226731BEAA","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTISj1cFfic3XSDhH0WOAfSibSM3sk7odJw2yqNuR2fTZqENTatMaICAGK5H5x9r2Fzro9yWjLNeHQvQ/132","comment_is_top":false,"comment_ctime":1592183581,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100024601,"comment_content":"请问ant design pro vue 如何用webpack设置多页面应用 比如分为login和index","like_count":0},{"had_liked":false,"id":149024,"user_name":"Saki","can_delete":false,"product_type":"c3","uid":1143138,"ip_address":"","ucode":"CEA2E5D15D400E","user_header":"https://static001.geekbang.org/account/avatar/00/11/71/62/20df02b0.jpg","comment_is_top":false,"comment_ctime":1573128621,"is_pvip":false,"replies":null,"discussion_count":2,"race_medal":0,"score":3,"product_id":100024601,"comment_content":"在actions里可以不用increment这个命名吗？也就是这里的是否需要与mutations里的命名相同？我觉得应该不用吧…","like_count":0,"discussions":[{"author":{"id":1970419,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/10/f3/5cd671db.jpg","nickname":"ppp","note":"","ucode":"05129D79C74BC3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":311342,"discussion_content":"不需要","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602312882,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1736720,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/80/10/2406a662.jpg","nickname":"希言自然","note":"","ucode":"8D99A82B05636B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":233653,"discussion_content":"可以动手尝试下，我认为是不需要的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586937292,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":146473,"user_name":"我在神游","can_delete":false,"product_type":"c3","uid":1465330,"ip_address":"","ucode":"F3535EBD8587CB","user_header":"https://static001.geekbang.org/account/avatar/00/16/5b/f2/a7fab370.jpg","comment_is_top":false,"comment_ctime":1572531799,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100024601,"comment_content":"课后习题哪有答案呀？会讲解答案吗？","like_count":0},{"had_liked":false,"id":127471,"user_name":"Man","can_delete":false,"product_type":"c3","uid":1109372,"ip_address":"","ucode":"31D3E19337572F","user_header":"https://static001.geekbang.org/account/avatar/00/10/ed/7c/8a1b4a83.jpg","comment_is_top":false,"comment_ctime":1566726191,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100024601,"comment_content":"vuex是否可以结合saga一起使用？将异步请求或者业务逻辑独立出来？","like_count":0},{"had_liked":false,"id":86279,"user_name":"烟雨海花lwl","can_delete":false,"product_type":"c3","uid":1495437,"ip_address":"","ucode":"94106A70FF45A6","user_header":"https://static001.geekbang.org/account/avatar/00/16/d1/8d/d923fa4b.jpg","comment_is_top":false,"comment_ctime":1555337101,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100024601,"comment_content":"真的和mobx很像，打开了我vue从无到入门的启蒙之路，打卡","like_count":0},{"had_liked":false,"id":80140,"user_name":"初雨初霁","can_delete":false,"product_type":"c3","uid":1475823,"ip_address":"","ucode":"95EB044388705D","user_header":"","comment_is_top":false,"comment_ctime":1553609617,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100024601,"comment_content":"我现在的项目一直在使用VUE，之前对vuex只停留在会使用得基础上，看完之后觉得对原理有了更进一步的认识。后面我也会抽时间看看源代码，希望更进一步对vuex进行深入得了解","like_count":0}]}