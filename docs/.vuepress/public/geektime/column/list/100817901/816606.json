{"id":816606,"title":"19ï½œåŠ¨æ‰‹å®æˆ˜ - å®ç°å®æˆ˜æ¡ˆä¾‹3","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯å¶ä¼Ÿæ°‘ã€‚</p><p>ä¸Šä¸€èŠ‚è¯¾æˆ‘ä»¬ä½¿ç”¨æ¨¡ç³Šæ£€ç´¢çŸ¥è¯†æœ€åŸºæœ¬çš„æ¦‚å¿µæ”¹é€ äº†å®æˆ˜æ¡ˆä¾‹1ã€‚è¿™èŠ‚è¯¾æˆ‘ä»¬è¶çƒ­æ‰“é“ï¼Œç»§ç»­åŠ¨æ‰‹å®æˆ˜ï¼Œä½¿ç”¨æ¨¡ç³Šæ£€ç´¢çŸ¥è¯†æœ€åŸºæœ¬çš„æ¦‚å¿µå®ç°å®æˆ˜æ¡ˆä¾‹3ã€‚</p><p>åœ¨åŠ¨æ‰‹æ“ä½œä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¢³ç†ä¸€ä¸‹æ•´ä½“çš„æµç¨‹ã€‚å®ç°å®æˆ˜æ¡ˆä¾‹3ä¸»è¦åŒ…æ‹¬äº”ä¸ªæ­¥éª¤ï¼š</p><ol>\n<li>æ­å»ºå‘é‡ç¼–ç æœåŠ¡ï¼ˆå¤ç”¨å®æˆ˜æ¡ˆä¾‹1å·²ç»æ­å»ºå¥½çš„æœåŠ¡ï¼‰</li>\n<li>è®¾è®¡æ•°æ®åº“ï¼ˆå¯å‚è€ƒå®æˆ˜æ¡ˆä¾‹1ï¼‰</li>\n<li>çŸ¥è¯†å…¥åº“ï¼ˆå¯å‚è€ƒå®æˆ˜æ¡ˆä¾‹2ï¼‰</li>\n<li>æ£€ç´¢çŸ¥è¯†ï¼ˆå¯å‚è€ƒå®æˆ˜æ¡ˆä¾‹1å’Œ2ï¼‰</li>\n<li>æ˜¾ç¤ºç›¸å…³é“¾æ¥</li>\n</ol><p>è€ƒè™‘åˆ°æˆ‘ä»¬å·²ç»è¿›å…¥ç¬¬å››ç« ï¼Œæ‰€ä»¥ä»è¿™èŠ‚è¯¾å¼€å§‹ï¼Œå‰é¢è®²è¿‡çš„åŸºç¡€ï¼ˆä¾‹å¦‚æ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼‰å°†ä¸å†é‡å¤äº†ï¼Œæ›´å…·ä½“çš„æ­¥éª¤ä¼šåˆ—åœ¨è¿™èŠ‚è¯¾é…å¥—ä»£ç çš„<code>å¦‚ä½•è¿è¡Œæœ¬èŠ‚è¯¾ç¨‹åº.md</code> æ–‡ä»¶é‡Œé¢ï¼Œé…å¥—ä»£ç ä½ å¯ä»¥ä»<a href=\"https://github.com/weiminye/time-geekbang-org-rag/tree/main/%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8B3/%E7%AC%AC19%E8%8A%82\">è¿™é‡Œ</a>è·å–ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/e2/de/e251bd16f5df3ff843b6c8ced9abdcde.jpg?wh=2536x1955\" alt=\"\"></p><p>å¥½ï¼Œæˆ‘ä»¬æ­£å¼å¼€å§‹ä»Šå¤©çš„å­¦ä¹ å§ã€‚</p><h2>è®¾è®¡æ•°æ®åº“</h2><p>ç¬¬1æ­¥æ­å»ºå‘é‡ç¼–ç æœåŠ¡å®Œå…¨å¤ç”¨å®æˆ˜æ¡ˆä¾‹1å·²ç»æ­å»ºå¥½çš„æœåŠ¡ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±ä¸é‡å¤è®²è§£äº†ï¼Œå¦‚æœä¸ç†Ÿæ‚‰çš„è¯ï¼Œä½ å¯ä»¥å›é¡¾ç¬¬ä¸€ç« çš„å†…å®¹ã€‚æˆ‘ä»¬ä»ç¬¬2æ­¥è®¾è®¡æ•°æ®åº“å¼€å§‹è®²èµ·ã€‚</p><h3>è¡¨ç»“æ„è®¾è®¡</h3><p>æˆ‘ä»¬å…ˆæ¥æ€è€ƒè¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼Œçº¯çŸ¥è¯†ç±»RAGåº”ç”¨çš„æ•°æ®åº“ç»“æ„ä¸åŸºäºMISç³»ç»Ÿçš„RAGåº”ç”¨ï¼ˆä¹Ÿå°±æ˜¯å®æˆ˜æ¡ˆä¾‹1ï¼‰æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ</p><p>ç­”æ¡ˆæ˜¯çº¯çŸ¥è¯†ç±»RAGåº”ç”¨çš„æ•°æ®åº“è‡³å°‘è¦æœ‰ä¸¤ä¸ªè¡¨ã€‚<strong>ç¬¬ä¸€ä¸ªè¡¨æ˜¯ä¸»è¡¨</strong>ï¼Œç”±å…ƒæ•°æ®ç»„æˆï¼Œè¿™ä¸ªè¡¨æˆ‘ä»¬ç›´æ¥å‚è€ƒå®æˆ˜æ¡ˆä¾‹2ï¼Œä¹Ÿå°±æ˜¯<a href=\"https://time.geekbang.org/column/article/809371\">ç¬¬9èŠ‚è¯¾</a>çš„å†…å®¹ã€‚äºæ˜¯æˆ‘ä»¬å¾—å‡ºäº†åé¢è¿™ä¸ªè¡¨ã€‚</p><!-- [[[read_end]]] --><pre><code class=\"language-python\">class çŸ¥è¯†ä¸»è¡¨(models.Model):\n&nbsp; &nbsp; id = models.IntegerField(\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;primary_key = True,\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;editable = False)\n\n&nbsp; &nbsp; æ¨¡å— = models.TextField(null=True,blank=True)\n&nbsp; &nbsp; æ ‡é¢˜ = models.TextField(null=True,blank=True)\n&nbsp; &nbsp; url = models.TextField(null=True,blank=True)\n&nbsp; &nbsp; å‘é‡ç¼–ç  = VectorField(dimensions=1024,null=True,blank=True)\n&nbsp; &nbsp; å‘é‡ç¼–ç æ¨¡å‹ = models.TextField(default=\"bge-large-zh-v1.5\")\n</code></pre><p><strong>ç¬¬äºŒä¸ªè¡¨æ˜¯è¯¦ç»†è¡¨</strong>ï¼Œç”±æ–‡æœ¬å’Œå¯¹åº”çš„å‘é‡ç¼–ç ç»„æˆï¼Œè¿™ä¸ªè¡¨æˆ‘ä»¬ç›´æ¥å‚è€ƒå®æˆ˜æ¡ˆä¾‹1ï¼Œä¹Ÿå°±æ˜¯ç¬¬18èŠ‚è¯¾çš„å†…å®¹ã€‚äºæ˜¯æˆ‘ä»¬å¾—å‡ºäº†åé¢è¿™ä¸ªçŸ¥è¯†è¯¦ç»†è¡¨ã€‚</p><pre><code class=\"language-python\">class çŸ¥è¯†è¯¦ç»†è¡¨(models.Model):\n&nbsp; &nbsp; id = models.IntegerField(\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;primary_key = True,\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;editable = False)&nbsp;&nbsp;\n\n&nbsp; &nbsp; æ–‡æœ¬å†…å®¹ = models.TextField()\n&nbsp; &nbsp; å†…å®¹åœ¨åˆ†æ®µä¸­çš„é¡ºåº = models.IntegerField(null=True,blank=True)\n&nbsp; &nbsp; å‘é‡ç¼–ç  = VectorField(dimensions=1024,null=True,blank=True)\n&nbsp; &nbsp; å‘é‡ç¼–ç æ¨¡å‹ = models.TextField(default=\"bge-large-zh-v1.5\")\n&nbsp; &nbsp; çŸ¥è¯†ä¸»è¡¨ = models.ForeignKey(çŸ¥è¯†ä¸»è¡¨, on_delete=models.CASCADE)\n</code></pre><h3>æ‰§è¡Œå‘½ä»¤æ›´æ–°æ•°æ®åº“</h3><p>ç„¶åæˆ‘ä»¬åˆ‡æ¢åˆ° <code>Anaconda Powershell Prompt</code>ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤æ›´æ–°æ•°æ®åº“ã€‚</p><pre><code class=\"language-powershell\">python manage.py makemigrations\npython manage.py migrate\n</code></pre><p>è¿™æ—¶å€™åº”è¯¥æç¤ºæ•°æ®åº“æ›´æ–°æˆåŠŸã€‚ç„¶åæˆ‘ä»¬éœ€è¦æ‰“å¼€æ•°æ®åº“ç¡®è®¤æ“ä½œæ— è¯¯ã€‚</p><h3>æ‰“å¼€æ•°æ®åº“ç¡®è®¤æ“ä½œæ— è¯¯</h3><p>æˆ‘ä»¬ä½¿ç”¨ç¬¬16èŠ‚è¯¾è®²è¿‡çš„ <code>pgadmin</code>ï¼Œæ‰“å¼€<code>çŸ¥è¯†ä¸»è¡¨</code>è¡¨ã€‚è¿™æ—¶æˆ‘ä»¬åº”è¯¥çœ‹åˆ°å·²ç»æˆåŠŸæ·»åŠ äº†æ‰€æœ‰å…ƒæ•°æ®åˆ—ã€‚</p><p>æˆ‘ä»¬å†æ‰“å¼€<code>çŸ¥è¯†è¯¦ç»†è¡¨</code>è¡¨åšä¸ªæ£€æŸ¥ã€‚è¿™æ—¶æˆ‘ä»¬åº”è¯¥çœ‹åˆ°å·²ç»æˆåŠŸæ·»åŠ äº†<code>å‘é‡ç¼–ç </code>å’Œ<code>å‘é‡ç¼–ç æ¨¡å‹</code>è¿™ä¸¤åˆ—ã€‚å…¶ä¸­<code>å‘é‡ç¼–ç </code>çš„æ•°æ®ç±»å‹ä¸ºæˆ‘ä»¬åœ¨ç¬¬16èŠ‚è¯¾è®²è¿‡çš„ <code>vector</code> ç±»å‹ã€‚</p><h2>çŸ¥è¯†å…¥åº“</h2><p>è®¾è®¡å®Œæ•°æ®åº“ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥çŸ¥è¯†å…¥åº“äº†ã€‚</p><p>å®æˆ˜æ¡ˆä¾‹1çš„æ•°æ®æ—©å°±åœ¨æ•°æ®åº“é‡Œé¢äº†ï¼Œæ‰€ä»¥ä¸éœ€è¦è¿™ä¸€æ­¥ã€‚å®æˆ˜æ¡ˆä¾‹2åŒ…å«äº†çŸ¥è¯†å…¥åº“æ­¥éª¤ï¼Œäºæ˜¯æˆ‘ä»¬å¯ä»¥å‚è€ƒå®æˆ˜æ¡ˆä¾‹2ï¼Œä¹Ÿå°±æ˜¯ç¬¬11èŠ‚è¯¾çš„å†…å®¹æ¥å®ŒæˆçŸ¥è¯†å…¥åº“ã€‚</p><h3>å¯¼å…¥åŸå§‹å†…å®¹</h3><p>è¿™é‡Œæˆ‘ä»¬é‡ç”³ç¬¬11èŠ‚è¯¾çš„ç²¾ç¥ï¼Œä¹Ÿå°±æ˜¯<strong>å°½é‡é€‰æ‹©æœ€å®¹æ˜“çš„çŸ¥è¯†å…¥åº“æ–¹æ³•ã€‚</strong></p><p>ç„¶åç»“åˆç¬¬14èŠ‚è¯¾â€œé€‰æ‹©åˆé€‚è‡ªå·±çš„RAGåº”ç”¨ç«‹é¡¹â€ä¸€èŠ‚çš„ç²¾ç¥ï¼Œå»ºè®®åŒå­¦ä»¬åœ¨é¡¹ç›®ç«‹é¡¹é˜¶æ®µå°½é‡ä¸è€ƒè™‘å¿…é¡»ä»PDFå’ŒWordå¯¼å…¥çŸ¥è¯†çš„é¡¹ç›®ï¼Œè¿™äº›é¡¹ç›®æ‰€è€—è´¹çš„æ—¶é—´ç²¾åŠ›ä¼šè¿œæ¯”ä½ æƒ³è±¡ä¸­çš„é«˜ï¼Œä¼šæ˜¯ä¸ªå¤§å‘ã€‚</p><p>å›åˆ°æˆ‘ä»¬ä»Šå¤©èŠ‚è¯¾ï¼Œè¿™é‡Œæˆ‘ä»¬ç›´æ¥é€šè¿‡Excelå¯¼å…¥ï¼Œæˆ‘ä»¬è¿è¡Œ <code>import_data_from_excel.py</code> æ–‡ä»¶å³å¯ï¼Œå®ƒä¼šæŠŠ <code>data.xlsx</code> çš„æ•°æ®å¯¼å…¥åˆ°æ•°æ®åº“ã€‚</p><h2>å¯¹çŸ¥è¯†æ‰¹é‡ç¼–ç å¹¶å­˜è¿›æ•°æ®åº“</h2><p>ç°åœ¨åŸå§‹å†…å®¹å·²ç»å…¥åº“ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å¯¹çŸ¥è¯†è¿›è¡Œç¼–ç ã€‚</p><p>æˆ‘ä»¬ç»§ç»­åœ¨ <code>api.py</code> æ–‡ä»¶å°¾éƒ¨æ·»åŠ åé¢çš„ä»£ç ã€‚</p><pre><code class=\"language-python\">def å¯¹çŸ¥è¯†æ‰¹é‡è¿›è¡Œå‘é‡ç¼–ç (request):\n&nbsp; &nbsp; æœªç¼–ç çš„çŸ¥è¯†list = é”€å”®å…¥è´¦è®°å½•.objects.filter(å®¢æˆ·å‘é‡ç¼–ç __isnull=True)\n&nbsp; &nbsp; for current in æœªç¼–ç çš„çŸ¥è¯†list:\n&nbsp; &nbsp; &nbsp; &nbsp; current.å®¢æˆ·å‘é‡ç¼–ç = è°ƒç”¨å‘é‡ç¼–ç æœåŠ¡(current.å®¢æˆ·)\n&nbsp; &nbsp; &nbsp; &nbsp; current.save()\n&nbsp; &nbsp;&nbsp;\n&nbsp; &nbsp; result = {'code':200}\n&nbsp; &nbsp; return JsonResponse(result)\n</code></pre><p>è¿™æ®µä»£ç ä¸ç¬¬18èŠ‚è¯¾ç›¸å…³ä»£ç ç±»ä¼¼ï¼ŒåŒå­¦ä»¬å¯ä»¥ç›´æ¥å‚è€ƒï¼Œæˆ‘ä»¬å°±ä¸æµªè´¹æ—¶é—´é‡å¤äº†ã€‚</p><p>ç„¶åæˆ‘ä»¬åœ¨ postman è°ƒç”¨http://127.0.0.1:8000/api/knowledge-embedding-batch å³å¯æ‰¹é‡ç¼–ç å¹¶å°†å…¶ä¿å­˜è¿›æ•°æ®åº“ã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åœ¨æ•°æ®å…¥åº“çš„æ—¶å€™å°±è°ƒç”¨ä»¥ä¸Šå‡½æ•°è¿›è¡Œå‘é‡ç¼–ç ã€‚</p><h2>æ£€ç´¢çŸ¥è¯†</h2><p>ç°åœ¨çŸ¥è¯†å·²ç»å…¥åº“ï¼Œæˆ‘ä»¬å¯ä»¥æ£€ç´¢çŸ¥è¯†äº†ã€‚æ£€ç´¢çŸ¥è¯†ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼Œå…¶ä¸­æ ¹æ®å…ƒæ•°æ®æ£€ç´¢éƒ¨åˆ†å¯ä»¥å‚è€ƒå®æˆ˜æ¡ˆä¾‹1ï¼Œå…¶ä»–éƒ¨åˆ†å¯ä»¥å‚è€ƒå®æˆ˜æ¡ˆä¾‹2ã€‚</p><p>æˆ‘ä»¬æ‰“å¼€ <code>search.py</code> æ–‡ä»¶ï¼Œå¾€<code>æŸ¥è¯¢</code>å‡½æ•°é‡Œæ·»åŠ åé¢è¿™æ®µä»£ç ã€‚</p><pre><code class=\"language-python\">&nbsp; &nbsp; else:\n&nbsp; &nbsp; &nbsp; &nbsp; æŸ¥è¯¢å­—ç¬¦ä¸² = æŸ¥è¯¢å‚æ•°.strip()\n&nbsp; &nbsp; &nbsp; &nbsp; æŸ¥è¯¢å­—ç¬¦ä¸²å‘é‡ç¼–ç  = è°ƒç”¨å‘é‡ç¼–ç æœåŠ¡(æŸ¥è¯¢å­—ç¬¦ä¸²)\n&nbsp; &nbsp; &nbsp; &nbsp; æ¨¡ç³Šæœç´¢ç»“æœRawQuerySet = çŸ¥è¯†è¯¦ç»†è¡¨.objects.raw('SELECT *, 1 - (å‘é‡ç¼–ç  &lt;=&gt; %s) AS ä½™å¼¦ç›¸ä¼¼åº¦,æ–‡æœ¬å†…å®¹ FROM public.\"home_çŸ¥è¯†è¯¦ç»†è¡¨\" order by ä½™å¼¦ç›¸ä¼¼åº¦ desc;',[str(æŸ¥è¯¢å­—ç¬¦ä¸²å‘é‡ç¼–ç ),])\n\n&nbsp; &nbsp; &nbsp; &nbsp; é€‰å–çš„ç»“æœ = æ¨¡ç³Šæœç´¢ç»“æœRawQuerySet[0]\n&nbsp; &nbsp; &nbsp; &nbsp; æ¨¡ç³Šæœç´¢ç»“æœ = {\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'çŸ¥è¯†å†…å®¹': é€‰å–çš„ç»“æœ.æ–‡æœ¬å†…å®¹,\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'url': é€‰å–çš„ç»“æœ.çŸ¥è¯†ä¸»è¡¨.url,\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'æ ‡é¢˜': é€‰å–çš„ç»“æœ.çŸ¥è¯†ä¸»è¡¨.æ ‡é¢˜\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }\n&nbsp; &nbsp; &nbsp; &nbsp; return æ¨¡ç³Šæœç´¢ç»“æœ\n</code></pre><p>è¿™æ®µä»£ç ä¸ç¬¬18èŠ‚è¯¾ç›¸å…³ä»£ç ç±»ä¼¼ï¼Œç›¸ä¿¡ç»“åˆæ³¨é‡Šä½ å¾ˆå®¹æ˜“å°±èƒ½ç†è§£ã€‚</p><h2>æ˜¾ç¤ºç›¸å…³é“¾æ¥</h2><p>æˆ‘ä»¬æ‰“å¼€ <code>index.html</code> æ–‡ä»¶ï¼Œåœ¨åº•éƒ¨æ·»åŠ ä»¥ä¸‹ä»£ç ã€‚</p><pre><code class=\"language-xml\">{% if link_text is not None %}\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div&gt;\n&nbsp; &nbsp; &nbsp; å‚è€ƒé“¾æ¥ï¼š&lt;a href=\"{{link_url}}\" target=\"_blank\"&gt;{{link_text}}&lt;/a&gt; &amp;nbsp;\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;\n</code></pre><p>ç„¶åæˆ‘ä»¬æ‰“å¼€ <a href=\"http://localhost:8000\">http://localhost:8000</a>, æˆ‘ä»¬å°†çœ‹åˆ°å¦‚ä¸‹ç•Œé¢ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/8d/c4/8d28a9899a16d122a0667acd4b3bb0c4.jpg?wh=2970x2115\" alt=\"\"></p><p>ä¸å®æˆ˜æ¡ˆä¾‹1ï¼ˆä¹Ÿå°±æ˜¯ç¬¬18èŠ‚è¯¾ï¼‰æ‰€è®²çš„ç±»ä¼¼ï¼Œæˆ‘ä»¬ä¿®æ”¹äº†å¾ˆå¤šä»£ç æ–‡ä»¶ï¼Œå°±æ˜¯æ²¡æœ‰ä¿®æ”¹<code> rag.py</code> æ–‡ä»¶ã€‚å› ä¸ºæˆ‘ä»¬åªæ˜¯å¢å¼ºäº†æ£€ç´¢çŸ¥è¯†çš„éƒ¨åˆ†ï¼Œè‡³äºæ•´ä¸ªRAGæµç¨‹ï¼Œå…¶å®æ²¡åšä»»ä½•æ”¹å˜ã€‚è¿™æ˜¯æœ¬èŠ‚è¯¾ç”šè‡³è¿™é—¨ä¸“æ çš„é‡ç‚¹ï¼ŒRAGåªæœ‰ä¸€ä¸ªæ ¸å¿ƒï¼Œæå‡æ£€ç´¢çŸ¥è¯†çš„è´¨é‡ï¼Œæ›´é€šä¿—åœ°è¯´ï¼Œå°±æ˜¯ä¿è¯æ£€ç´¢åˆ°çš„ç¬¬ä¸€æ¡çŸ¥è¯†æ˜¯æœ€åŒ¹é…ç”¨æˆ·æé—®çš„ï¼Œç„¶åå–‚ç»™å¤§æ¨¡å‹ã€‚å¦‚æœèƒ½å¤Ÿåšåˆ°è¿™ç‚¹ï¼Œæ ¹æœ¬å°±ä¸éœ€è¦é‡æ’äº†ï¼ˆrerankï¼‰ã€‚</p><h2>å°ç»“</h2><p>å¥½äº†ï¼Œä»Šå¤©è¿™ä¸€è®²åˆ°è¿™é‡Œå°±ç»“æŸäº†ï¼Œæœ€åæˆ‘ä»¬æ¥å›é¡¾ä¸€ä¸‹ã€‚è¿™ä¸€è®²æˆ‘ä»¬å­¦ä¼šäº†å››ä»¶äº‹æƒ…ã€‚</p><p>ç¬¬ä¸€ä»¶äº‹æƒ…æ˜¯è®¾è®¡çº¯çŸ¥è¯†ç±»RAGåº”ç”¨çš„æ•°æ®åº“ç»“æ„ã€‚çº¯çŸ¥è¯†ç±»RAGåº”ç”¨çš„æ•°æ®åº“ç»“æ„è‡³å°‘ç”±ä¸¤ä¸ªè¡¨ç»„æˆã€‚<strong>ç¬¬ä¸€ä¸ªè¡¨ç§°ä¸ºä¸»è¡¨ï¼Œç”±å…ƒæ•°æ®ç»„æˆã€‚ç¬¬äºŒä¸ªè¡¨æ˜¯è¯¦ç»†è¡¨ï¼Œç”±å…·ä½“æ–‡æœ¬å’Œå‘é‡ç¼–ç ç»„æˆã€‚</strong></p><p>ç¬¬äºŒä»¶äº‹æƒ…æ˜¯çŸ¥è¯†å…¥åº“ã€‚æˆ‘ä»¬ç›´æ¥ä»excelè¡¨å¯¼å…¥ã€‚éœ€è¦æé†’çš„æ˜¯ï¼Œåœ¨é¡¹ç›®ç«‹é¡¹é˜¶æ®µå°½é‡ä¸è€ƒè™‘å¿…é¡»ä»PDFå’ŒWordå¯¼å…¥çŸ¥è¯†çš„é¡¹ç›®ï¼Œè¿™äº›é¡¹ç›®æ‰€è€—è´¹çš„æ—¶é—´ç²¾åŠ›ä¼šè¿œæ¯”ä½ æƒ³è±¡ä¸­çš„é«˜ï¼Œä¼šæ˜¯ä¸ªå¤§å‘ã€‚</p><p>ç¬¬ä¸‰ä»¶äº‹æƒ…æ˜¯æ£€ç´¢çŸ¥è¯†ã€‚ä¸å®æˆ˜æ¡ˆä¾‹1ç›¸æ¯”ï¼Œå®æˆ˜æ¡ˆä¾‹3åŸºæœ¬é æ¨¡ç³Šæ£€ç´¢ï¼Œæ‰€ä»¥ä¸¥é‡ä¾èµ–äºå‰é¢æ‰€è®²çš„åŸºç¡€æ¦‚å¿µã€‚ä½ ä¹Ÿå¯ä»¥å€Ÿæœºå¤ä¹ å·©å›ºä¸€ä¸‹ä¹‹å‰æ‰€å­¦ã€‚</p><p>ç¬¬å››ä»¶äº‹æƒ…æ˜¯æ˜¾ç¤ºç›¸å…³é“¾æ¥ã€‚RAGæœ¬è´¨ä¸Šæ˜¯æœç´¢åº”ç”¨ï¼Œåªä¸è¿‡å› ä¸ºå¤§æ¨¡å‹çš„å‘å±•ï¼Œå¤§å¹…æå‡äº†æ‘˜è¦å’Œæ£€ç´¢çš„è´¨é‡ï¼Œä»è€Œæå‡äº†ç”¨æˆ·ä½“éªŒã€‚<strong>æ˜¾ç¤ºç›¸å…³é“¾æ¥å…¶å®å°±æ˜¯ä¼ ç»Ÿæœç´¢åº”ç”¨æ‰€å…·å¤‡çš„åŠŸèƒ½ã€‚</strong></p><p>ä¸‹ä¸€èŠ‚è¯¾å¼€å§‹ï¼Œæˆ‘ä»¬å°†å­¦ä¹ å¦‚ä½•è¯„ä¼°å’Œæ”¹è¿›RAGåº”ç”¨çš„æ£€ç´¢è´¨é‡ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>å‘æŒ¥ä½ çš„æƒ³è±¡åŠ›ï¼Œæƒ³è±¡ä¸€ä¸‹è‡ªå·±ä¼ä¸šæœ‰å“ªäº›RAGåº”ç”¨æ˜¯ä¸éœ€è¦ä»PDFå’ŒWordå¯¼å…¥çŸ¥è¯†çš„ã€‚è¯·è®¤çœŸæƒ³æƒ³ï¼Œæ ¹æ®æˆ‘çš„ç»éªŒï¼Œå®é™…ä¸Šè¿™äº›RAGåº”ç”¨è¿˜æ˜¯æœ‰çš„ï¼Œç”šè‡³ä¸å°‘ã€‚</p><p>æ¬¢è¿ä½ åœ¨ç•™è¨€åŒºå’Œæˆ‘äº¤æµäº’åŠ¨ï¼Œå¦‚æœè¿™èŠ‚è¯¾å¯¹ä½ æœ‰å¯å‘ï¼Œä¹Ÿæ¨èåˆ†äº«ç»™èº«è¾¹æ›´å¤šæœ‹å‹ã€‚</p>","neighbors":{"left":{"article_title":"18ï½œåŠ¨æ‰‹å®æˆ˜ï¼šæ”¹é€ å®æˆ˜æ¡ˆä¾‹1","id":815860},"right":{"article_title":"20ï½œæ‰¾å‡†æ–¹å‘ï¼šå¦‚ä½•æœ‰æ•ˆè¯„ä¼°ä¸æ”¹è¿›RAGåº”ç”¨","id":817424}},"comments":[{"had_liked":false,"id":395418,"user_name":"æ‚Ÿè¿œ","can_delete":false,"product_type":"c1","uid":1912923,"ip_address":"åŒ—äº¬","ucode":"3BD9C748698888","user_header":"https://static001.geekbang.org/account/avatar/00/1d/30/5b/4f4b0a40.jpg","comment_is_top":false,"comment_ctime":1730709767,"is_pvip":false,"replies":[{"id":143602,"content":"Good catch ! è¿™é‡Œçš„ç«¯å£ç¡®å®æ˜¯é”™äº†ï¼Œè°¢è°¢","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1337319,"ctime":1731378993,"ip_address":"æ±Ÿè‹","comment_id":395418,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100817901,"comment_content":"&quot;ç„¶åæˆ‘ä»¬åœ¨ postman è°ƒç”¨ http:&#47;&#47;127.0.0.1:8902&#47;api&#47;knowledge-embedding-batch å³å¯æ‰¹é‡ç¼–ç å¹¶å°†å…¶ä¿å­˜è¿›æ•°æ®åº“ã€‚&quot; â€”â€” è¿™é‡Œç«¯å£é”™äº†ï¼Œåº”ç”¨æ˜¯ Django çš„æœåŠ¡ç«¯å£ 8000","like_count":0,"discussions":[{"author":{"id":1337319,"avatar":"https://static001.geekbang.org/account/avatar/00/14/67/e7/0d92745d.jpg","nickname":"Billyç«ç‚ç„±ç‡š(ä¸ç¾çš„é£)","note":"","ucode":"63DED1EB2CF6AE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":653647,"discussion_content":"Good catch ! è¿™é‡Œçš„ç«¯å£ç¡®å®æ˜¯é”™äº†ï¼Œè°¢è°¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1731378993,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ±Ÿè‹","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":395208,"user_name":"kevin","can_delete":false,"product_type":"c1","uid":3920101,"ip_address":"å¹¿ä¸œ","ucode":"19E83C631DF25E","user_header":"https://static001.geekbang.org/account/avatar/00/3b/d0/e5/0a3ee17c.jpg","comment_is_top":false,"comment_ctime":1729749812,"is_pvip":false,"replies":[{"id":143606,"content":"https:&#47;&#47;github.com&#47;weiminye&#47;time-geekbang-org-rag&#47;tree&#47;main&#47;%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8B3&#47;%E7%AC%AC19%E8%8A%82","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1337319,"ctime":1731379182,"ip_address":"æ±Ÿè‹","comment_id":395208,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100817901,"comment_content":"import_data_from_excel.py,data.xlsxè¿™ä¸¤ä¸ªæ–‡ä»¶åœ¨githubæ˜¯æ²¡æœ‰ä¸‹è½½ï¼Œè¯·é—®åœ¨å“ªé‡Œä¸‹è½½ã€‚","like_count":0,"discussions":[{"author":{"id":1337319,"avatar":"https://static001.geekbang.org/account/avatar/00/14/67/e7/0d92745d.jpg","nickname":"Billyç«ç‚ç„±ç‡š(ä¸ç¾çš„é£)","note":"","ucode":"63DED1EB2CF6AE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":653651,"discussion_content":"https://github.com/weiminye/time-geekbang-org-rag/tree/main/%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8B3/%E7%AC%AC19%E8%8A%82","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1731379182,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ±Ÿè‹","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":395015,"user_name":"Geek_0a887e","can_delete":false,"product_type":"c1","uid":3690020,"ip_address":"æµ™æ±Ÿ","ucode":"17EBC4E533B600","user_header":"","comment_is_top":false,"comment_ctime":1729089256,"is_pvip":false,"replies":[{"id":143611,"content":"ä»£ç åœ¨è¿™é‡Œï¼šhttps:&#47;&#47;github.com&#47;weiminye&#47;time-geekbang-org-rag&#47;tree&#47;main&#47;%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8B3&#47;%E7%AC%AC19%E8%8A%82","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1337319,"ctime":1731379604,"ip_address":"æ±Ÿè‹","comment_id":395015,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100817901,"comment_content":"è¿™ä¸ªç« èŠ‚æ˜¯å•¥ï¼Ÿæ–‡ç« çš„ä»£ç æ˜¯ä¸æ˜¯æ¼äº†ä»€ä¹ˆä¸œè¥¿ï¼Œç¡®å®šæ˜¯è¿™ä¹ˆå†™çš„å—ï¼Ÿæ²¡å¤´æ²¡å°¾çš„","like_count":0,"discussions":[{"author":{"id":1337319,"avatar":"https://static001.geekbang.org/account/avatar/00/14/67/e7/0d92745d.jpg","nickname":"Billyç«ç‚ç„±ç‡š(ä¸ç¾çš„é£)","note":"","ucode":"63DED1EB2CF6AE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":653657,"discussion_content":"ä»£ç åœ¨è¿™é‡Œï¼šhttps://github.com/weiminye/time-geekbang-org-rag/tree/main/%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8B3/%E7%AC%AC19%E8%8A%82","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1731379604,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ±Ÿè‹","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":3920101,"avatar":"https://static001.geekbang.org/account/avatar/00/3b/d0/e5/0a3ee17c.jpg","nickname":"kevin","note":"","ucode":"19E83C631DF25E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":653793,"discussion_content":"è¿è¡Œä»£ç æŠ¥é”™å¦‚ä¸‹ï¼š\nGot an error checking a consistent migration history performed for database connection &#39;default&#39;: connection to server at &#34;localhost&#34; (::1), port 5432 failed: Connection refused (0x0000274D/10061)\n        Is the server running on that host and accepting TCP/IP connections?\nconnection to server at &#34;localhost&#34; (127.0.0.1), port 5432 failed: Connection refused (0x0000274D/10061)\n        Is the server running on that host and accepting TCP/IP connections?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1731461994,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":396222,"user_name":"narsilçš„æ¢¦","can_delete":false,"product_type":"c1","uid":1185187,"ip_address":"åŒ—äº¬","ucode":"67110C673BD951","user_header":"https://static001.geekbang.org/account/avatar/00/12/15/a3/e67d6039.jpg","comment_is_top":false,"comment_ctime":1733656324,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100817901,"comment_content":"ä¸­çº§ç¯‡çœ‹å®Œäº†ï¼Œæ²¡çœ‹åˆ°è®²è§£å·¥å•è¾…åŠ©ç³»ç»Ÿçš„åœ°æ–¹ğŸ˜­","like_count":0},{"had_liked":false,"id":395628,"user_name":"kevin","can_delete":false,"product_type":"c1","uid":3920101,"ip_address":"å¹¿ä¸œ","ucode":"19E83C631DF25E","user_header":"https://static001.geekbang.org/account/avatar/00/3b/d0/e5/0a3ee17c.jpg","comment_is_top":false,"comment_ctime":1731484151,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100817901,"comment_content":"class çŸ¥è¯†ä¸»è¡¨(models.Model):ä¸­çš„è¿™æ®µä»£ç å’Œ19èŠ‚è¯¾ä¸­çš„ä»£ç å¹¶ä¸ä¸€è‡´ï¼Œå¦‚æœæŠŠè¿™æ®µä»£ç æ‹·è´åˆ°ç¨‹åºä¸­å»æ‰§è¡Œï¼Œä¼šå‡ºé”™ï¼Œå¤§å®¶è¦æ³¨æ„äº†ã€‚","like_count":0}]}