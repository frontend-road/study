{"id":10325,"title":"ç¬¬26è®² | å¦‚ä½•ç›‘æ§å’Œè¯Šæ–­JVMå †å†…å’Œå †å¤–å†…å­˜ä½¿ç”¨ï¼Ÿ","content":"<p>ä¸Šä¸€è®²æˆ‘ä»‹ç»äº†JVMå†…å­˜åŒºåŸŸçš„åˆ’åˆ†ï¼Œæ€»ç»“äº†ç›¸å…³çš„ä¸€äº›æ¦‚å¿µï¼Œä»Šå¤©æˆ‘å°†ç»“åˆJVMå‚æ•°ã€å·¥å…·ç­‰æ–¹é¢ï¼Œè¿›ä¸€æ­¥åˆ†æJVMå†…å­˜ç»“æ„ï¼ŒåŒ…æ‹¬å¤–éƒ¨èµ„æ–™ç›¸å¯¹è¾ƒå°‘çš„å †å¤–éƒ¨åˆ†ã€‚</p>\n<p>ä»Šå¤©æˆ‘è¦é—®ä½ çš„é—®é¢˜æ˜¯ï¼Œ<span class=\"orange\">å¦‚ä½•ç›‘æ§å’Œè¯Šæ–­JVMå †å†…å’Œå †å¤–å†…å­˜ä½¿ç”¨ï¼Ÿ</span></p>\n<h2>å…¸å‹å›ç­”</h2>\n<p>äº†è§£JVMå†…å­˜çš„æ–¹æ³•æœ‰å¾ˆå¤šï¼Œå…·ä½“èƒ½åŠ›èŒƒå›´ä¹Ÿæœ‰åŒºåˆ«ï¼Œç®€å•æ€»ç»“å¦‚ä¸‹ï¼š</p>\n<ul>\n<li>å¯ä»¥ä½¿ç”¨ç»¼åˆæ€§çš„å›¾å½¢åŒ–å·¥å…·ï¼Œå¦‚JConsoleã€VisualVMï¼ˆæ³¨æ„ï¼Œä»Oracle JDK 9å¼€å§‹ï¼ŒVisualVMå·²ç»ä¸å†åŒ…å«åœ¨JDKå®‰è£…åŒ…ä¸­ï¼‰ç­‰ã€‚è¿™äº›å·¥å…·å…·ä½“ä½¿ç”¨èµ·æ¥ç›¸å¯¹æ¯”è¾ƒç›´è§‚ï¼Œç›´æ¥è¿æ¥åˆ°Javaè¿›ç¨‹ï¼Œç„¶åå°±å¯ä»¥åœ¨å›¾å½¢åŒ–ç•Œé¢é‡ŒæŒæ¡å†…å­˜ä½¿ç”¨æƒ…å†µã€‚</li>\n</ul>\n<p>ä»¥JConsoleä¸ºä¾‹ï¼Œå…¶å†…å­˜é¡µé¢å¯ä»¥æ˜¾ç¤ºå¸¸è§çš„<strong>å †å†…å­˜</strong>å’Œ<strong>å„ç§å †å¤–éƒ¨åˆ†</strong>ä½¿ç”¨çŠ¶æ€ã€‚</p>\n<ul>\n<li>\n<p>ä¹Ÿå¯ä»¥ä½¿ç”¨å‘½ä»¤è¡Œå·¥å…·è¿›è¡Œè¿è¡Œæ—¶æŸ¥è¯¢ï¼Œå¦‚jstatå’Œjmapç­‰å·¥å…·éƒ½æä¾›äº†ä¸€äº›é€‰é¡¹ï¼Œå¯ä»¥æŸ¥çœ‹å †ã€æ–¹æ³•åŒºç­‰ä½¿ç”¨æ•°æ®ã€‚</p>\n</li>\n<li>\n<p>æˆ–è€…ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨jmapç­‰æä¾›çš„å‘½ä»¤ï¼Œç”Ÿæˆå †è½¬å‚¨ï¼ˆHeap Dumpï¼‰æ–‡ä»¶ï¼Œç„¶ååˆ©ç”¨jhatæˆ–Eclipse MATç­‰å †è½¬å‚¨åˆ†æå·¥å…·è¿›è¡Œè¯¦ç»†åˆ†æã€‚</p>\n</li>\n<li>\n<p>å¦‚æœä½ ä½¿ç”¨çš„æ˜¯Tomcatã€Weblogicç­‰Java EEæœåŠ¡å™¨ï¼Œè¿™äº›æœåŠ¡å™¨åŒæ ·æä¾›äº†å†…å­˜ç®¡ç†ç›¸å…³çš„åŠŸèƒ½ã€‚</p>\n</li>\n<li>\n<p>å¦å¤–ï¼Œä»æŸç§ç¨‹åº¦ä¸Šæ¥è¯´ï¼ŒGCæ—¥å¿—ç­‰è¾“å‡ºï¼ŒåŒæ ·åŒ…å«ç€ä¸°å¯Œçš„ä¿¡æ¯ã€‚</p>\n</li>\n</ul><!-- [[[read_end]]] -->\n<p>è¿™é‡Œæœ‰ä¸€ä¸ªç›¸å¯¹ç‰¹æ®Šçš„éƒ¨åˆ†ï¼Œå°±æ˜¯æ˜¯å †å¤–å†…å­˜ä¸­çš„ç›´æ¥å†…å­˜ï¼Œå‰é¢çš„å·¥å…·åŸºæœ¬ä¸é€‚ç”¨ï¼Œå¯ä»¥ä½¿ç”¨JDKè‡ªå¸¦çš„Native Memory Trackingï¼ˆNMTï¼‰ç‰¹æ€§ï¼Œå®ƒä¼šä»JVMæœ¬åœ°å†…å­˜åˆ†é…çš„è§’åº¦è¿›è¡Œè§£è¯»ã€‚</p>\n<h2>è€ƒç‚¹åˆ†æ</h2>\n<p>ä»Šå¤©é€‰å–çš„é—®é¢˜æ˜¯Javaå†…å­˜ç®¡ç†ç›¸å…³çš„åŸºç¡€å®è·µï¼Œå¯¹äºæ™®é€šçš„å†…å­˜é—®é¢˜ï¼ŒæŒæ¡ä¸Šé¢æˆ‘ç»™å‡ºçš„å…¸å‹å·¥å…·å’Œæ–¹æ³•å°±è¶³å¤Ÿäº†ã€‚è¿™ä¸ªé—®é¢˜ä¹Ÿå¯ä»¥ç†è§£ä¸ºè€ƒå¯Ÿä¸¤ä¸ªåŸºæœ¬æ–¹é¢èƒ½åŠ›ï¼Œç¬¬ä¸€ï¼Œä½ æ˜¯å¦çœŸçš„ç†è§£äº†JVMçš„å†…éƒ¨ç»“æ„ï¼›ç¬¬äºŒï¼Œå…·ä½“åˆ°ç‰¹å®šå†…å­˜åŒºåŸŸï¼Œåº”è¯¥ä½¿ç”¨ä»€ä¹ˆå·¥å…·æˆ–è€…ç‰¹æ€§å»å®šä½ï¼Œå¯ä»¥ç”¨ä»€ä¹ˆå‚æ•°è°ƒæ•´ã€‚</p>\n<p>å¯¹äºJConsoleç­‰å·¥å…·çš„ä½¿ç”¨ç»†èŠ‚ï¼Œæˆ‘åœ¨ä¸“æ é‡Œä¸å†èµ˜è¿°ï¼Œå¦‚æœä½ è¿˜æ²¡æœ‰æ¥è§¦è¿‡ï¼Œä½ å¯ä»¥å‚è€ƒ<a href=\"https://docs.oracle.com/javase/7/docs/technotes/guides/management/jconsole.html\">JConsoleå®˜æ–¹æ•™ç¨‹</a>ã€‚æˆ‘è¿™é‡Œç‰¹åˆ«æ¨è<a href=\"http://www.oracle.com/technetwork/java/javaseproducts/mission-control/java-mission-control-1998576.html\">Java Mission Control</a>ï¼ˆJMCï¼‰ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„å·¥å…·ï¼Œä¸ä»…ä»…èƒ½å¤Ÿä½¿ç”¨<a href=\"https://en.wikipedia.org/wiki/Java_Management_Extensions\">JMX</a>è¿›è¡Œæ™®é€šçš„ç®¡ç†ã€ç›‘æ§ä»»åŠ¡ï¼Œè¿˜å¯ä»¥é…åˆ<a href=\"https://docs.oracle.com/javacomponents/jmc-5-4/jfr-runtime-guide/about.htm#JFRUH171\">Java Flight Recorder</a>ï¼ˆJFRï¼‰æŠ€æœ¯ï¼Œä»¥éå¸¸ä½çš„å¼€é”€ï¼Œæ”¶é›†å’Œåˆ†æJVMåº•å±‚çš„Profilingå’Œäº‹ä»¶ç­‰ä¿¡æ¯ã€‚ç›®å‰ï¼Œ Oracleå·²ç»å°†å…¶å¼€æºï¼Œå¦‚æœä½ æœ‰å…´è¶£è¯·å¯ä»¥æŸ¥çœ‹OpenJDKçš„<a href=\"http://openjdk.java.net/projects/jmc/\">Mission Control</a>é¡¹ç›®ã€‚</p>\n<p>å…³äºå†…å­˜ç›‘æ§ä¸è¯Šæ–­ï¼Œæˆ‘ä¼šåœ¨çŸ¥è¯†æ‰©å±•éƒ¨åˆ†ç»“åˆJVMå‚æ•°å’Œç‰¹æ€§ï¼Œå°½é‡ä»åºæ‚çš„æ¦‚å¿µå’ŒJVMå‚æ•°é€‰é¡¹ä¸­ï¼Œæ¢³ç†å‡ºç›¸å¯¹æ¸…æ™°çš„æ¡†æ¶ï¼š</p>\n<ul>\n<li>\n<p>ç»†åŒ–å¯¹å„éƒ¨åˆ†å†…å­˜åŒºåŸŸçš„ç†è§£ï¼Œå †å†…ç»“æ„æ˜¯æ€æ ·çš„ï¼Ÿå¦‚ä½•é€šè¿‡å‚æ•°è°ƒæ•´ï¼Ÿ</p>\n</li>\n<li>\n<p>å †å¤–å†…å­˜åˆ°åº•åŒ…æ‹¬å“ªäº›éƒ¨åˆ†ï¼Ÿå…·ä½“å¤§å°å—å“ªäº›å› ç´ å½±å“ï¼Ÿ</p>\n</li>\n</ul>\n<h2>çŸ¥è¯†æ‰©å±•</h2>\n<p>ä»Šå¤©çš„åˆ†æï¼Œæˆ‘ä¼šç»“åˆç›¸å…³JVMå‚æ•°å’Œå·¥å…·ï¼Œè¿›è¡Œå¯¹æ¯”ä»¥åŠ æ·±ä½ å¯¹å†…å­˜åŒºåŸŸæ›´ç»†ç²’åº¦çš„ç†è§£ã€‚</p>\n<p>é¦–å…ˆï¼Œå †å†…éƒ¨æ˜¯ä»€ä¹ˆç»“æ„ï¼Ÿ</p>\n<p>å¯¹äºå †å†…å­˜ï¼Œæˆ‘åœ¨ä¸Šä¸€è®²ä»‹ç»äº†æœ€å¸¸è§çš„æ–°ç”Ÿä»£å’Œè€å¹´ä»£çš„åˆ’åˆ†ï¼Œå…¶å†…éƒ¨ç»“æ„éšç€JVMçš„å‘å±•å’Œæ–°GCæ–¹å¼çš„å¼•å…¥ï¼Œå¯ä»¥æœ‰ä¸åŒè§’åº¦çš„ç†è§£ï¼Œä¸‹å›¾å°±æ˜¯å¹´ä»£è§†è§’çš„å †ç»“æ„ç¤ºæ„å›¾ã€‚<br />\n<img src=\"https://static001.geekbang.org/resource/image/72/89/721e97abc93449fbdb4c071f7b3b5289.png?wh=941*351\" alt=\"\" /></p>\n<p>ä½ å¯ä»¥çœ‹åˆ°ï¼ŒæŒ‰ç…§é€šå¸¸çš„GCå¹´ä»£æ–¹å¼åˆ’åˆ†ï¼ŒJavaå †å†…åˆ†ä¸ºï¼š</p>\n<p>1.æ–°ç”Ÿä»£</p>\n<p>æ–°ç”Ÿä»£æ˜¯å¤§éƒ¨åˆ†å¯¹è±¡åˆ›å»ºå’Œé”€æ¯çš„åŒºåŸŸï¼Œåœ¨é€šå¸¸çš„Javaåº”ç”¨ä¸­ï¼Œç»å¤§éƒ¨åˆ†å¯¹è±¡ç”Ÿå‘½å‘¨æœŸéƒ½æ˜¯å¾ˆçŸ­æš‚çš„ã€‚å…¶å†…éƒ¨åˆåˆ†ä¸ºEdenåŒºåŸŸï¼Œä½œä¸ºå¯¹è±¡åˆå§‹åˆ†é…çš„åŒºåŸŸï¼›ä¸¤ä¸ªSurvivorï¼Œæœ‰æ—¶å€™ä¹Ÿå«fromã€toåŒºåŸŸï¼Œè¢«ç”¨æ¥æ”¾ç½®ä»Minor GCä¸­ä¿ç•™ä¸‹æ¥çš„å¯¹è±¡ã€‚</p>\n<ul>\n<li>\n<p>JVMä¼šéšæ„é€‰å–ä¸€ä¸ªSurvivoråŒºåŸŸä½œä¸ºâ€œtoâ€ï¼Œç„¶åä¼šåœ¨GCè¿‡ç¨‹ä¸­è¿›è¡ŒåŒºåŸŸé—´æ‹·è´ï¼Œä¹Ÿå°±æ˜¯å°†Edenä¸­å­˜æ´»ä¸‹æ¥çš„å¯¹è±¡å’ŒfromåŒºåŸŸçš„å¯¹è±¡ï¼Œæ‹·è´åˆ°è¿™ä¸ªâ€œtoâ€åŒºåŸŸã€‚è¿™ç§è®¾è®¡ä¸»è¦æ˜¯ä¸ºäº†é˜²æ­¢å†…å­˜çš„ç¢ç‰‡åŒ–ï¼Œå¹¶è¿›ä¸€æ­¥æ¸…ç†æ— ç”¨å¯¹è±¡ã€‚</p>\n</li>\n<li>\n<p>ä»å†…å­˜æ¨¡å‹è€Œä¸æ˜¯åƒåœ¾æ”¶é›†çš„è§’åº¦ï¼Œå¯¹EdenåŒºåŸŸç»§ç»­è¿›è¡Œåˆ’åˆ†ï¼ŒHotspot JVMè¿˜æœ‰ä¸€ä¸ªæ¦‚å¿µå«åšThread Local Allocation Bufferï¼ˆTLABï¼‰ï¼Œæ®æˆ‘æ‰€çŸ¥æ‰€æœ‰OpenJDKè¡ç”Ÿå‡ºæ¥çš„JVMéƒ½æä¾›äº†TLABçš„è®¾è®¡ã€‚è¿™æ˜¯JVMä¸ºæ¯ä¸ªçº¿ç¨‹åˆ†é…çš„ä¸€ä¸ªç§æœ‰ç¼“å­˜åŒºåŸŸï¼Œå¦åˆ™ï¼Œå¤šçº¿ç¨‹åŒæ—¶åˆ†é…å†…å­˜æ—¶ï¼Œä¸ºé¿å…æ“ä½œåŒä¸€åœ°å€ï¼Œå¯èƒ½éœ€è¦ä½¿ç”¨åŠ é”ç­‰æœºåˆ¶ï¼Œè¿›è€Œå½±å“åˆ†é…é€Ÿåº¦ï¼Œä½ å¯ä»¥å‚è€ƒä¸‹é¢çš„ç¤ºæ„å›¾ã€‚ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼ŒTLABä»ç„¶åœ¨å †ä¸Šï¼Œå®ƒæ˜¯åˆ†é…åœ¨EdenåŒºåŸŸå†…çš„ã€‚å…¶å†…éƒ¨ç»“æ„æ¯”è¾ƒç›´è§‚æ˜“æ‡‚ï¼Œstartã€endå°±æ˜¯èµ·å§‹åœ°å€ï¼Œtopï¼ˆæŒ‡é’ˆï¼‰åˆ™è¡¨ç¤ºå·²ç»åˆ†é…åˆ°å“ªé‡Œäº†ã€‚æ‰€ä»¥æˆ‘ä»¬åˆ†é…æ–°å¯¹è±¡ï¼ŒJVMå°±ä¼šç§»åŠ¨topï¼Œå½“topå’Œendç›¸é‡æ—¶ï¼Œå³è¡¨ç¤ºè¯¥ç¼“å­˜å·²æ»¡ï¼ŒJVMä¼šè¯•å›¾å†ä»Edené‡Œåˆ†é…ä¸€å—å„¿ã€‚<br />\n<img src=\"https://static001.geekbang.org/resource/image/f5/bd/f546839e98ea5d43b595235849b0f2bd.png?wh=707*559\" alt=\"\" /></p>\n</li>\n</ul>\n<p>2.è€å¹´ä»£</p>\n<p>æ”¾ç½®é•¿ç”Ÿå‘½å‘¨æœŸçš„å¯¹è±¡ï¼Œé€šå¸¸éƒ½æ˜¯ä»SurvivoråŒºåŸŸæ‹·è´è¿‡æ¥çš„å¯¹è±¡ã€‚å½“ç„¶ï¼Œä¹Ÿæœ‰ç‰¹æ®Šæƒ…å†µï¼Œæˆ‘ä»¬çŸ¥é“æ™®é€šçš„å¯¹è±¡ä¼šè¢«åˆ†é…åœ¨TLABä¸Šï¼›å¦‚æœå¯¹è±¡è¾ƒå¤§ï¼ŒJVMä¼šè¯•å›¾ç›´æ¥åˆ†é…åœ¨Edenå…¶ä»–ä½ç½®ä¸Šï¼›å¦‚æœå¯¹è±¡å¤ªå¤§ï¼Œå®Œå…¨æ— æ³•åœ¨æ–°ç”Ÿä»£æ‰¾åˆ°è¶³å¤Ÿé•¿çš„è¿ç»­ç©ºé—²ç©ºé—´ï¼ŒJVMå°±ä¼šç›´æ¥åˆ†é…åˆ°è€å¹´ä»£ã€‚</p>\n<p>3.æ°¸ä¹…ä»£</p>\n<p>è¿™éƒ¨åˆ†å°±æ˜¯æ—©æœŸHotspot JVMçš„æ–¹æ³•åŒºå®ç°æ–¹å¼äº†ï¼Œå‚¨å­˜Javaç±»å…ƒæ•°æ®ã€å¸¸é‡æ± ã€Internå­—ç¬¦ä¸²ç¼“å­˜ï¼Œåœ¨JDK 8ä¹‹åå°±ä¸å­˜åœ¨æ°¸ä¹…ä»£è¿™å—å„¿äº†ã€‚</p>\n<p>é‚£ä¹ˆï¼Œæˆ‘ä»¬å¦‚ä½•åˆ©ç”¨JVMå‚æ•°ï¼Œç›´æ¥å½±å“å †å’Œå†…éƒ¨åŒºåŸŸçš„å¤§å°å‘¢ï¼Ÿæˆ‘æ¥ç®€å•æ€»ç»“ä¸€ä¸‹ï¼š</p>\n<ul>\n<li>æœ€å¤§å †ä½“ç§¯</li>\n</ul>\n<pre><code>-Xmx value\n</code></pre>\n<ul>\n<li>åˆå§‹çš„æœ€å°å †ä½“ç§¯</li>\n</ul>\n<pre><code>-Xms value\n</code></pre>\n<ul>\n<li>è€å¹´ä»£å’Œæ–°ç”Ÿä»£çš„æ¯”ä¾‹</li>\n</ul>\n<pre><code>-XX:NewRatio=value\n</code></pre>\n<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™ä¸ªæ•°å€¼æ˜¯2ï¼Œæ„å‘³ç€è€å¹´ä»£æ˜¯æ–°ç”Ÿä»£çš„2å€å¤§ï¼›æ¢å¥è¯è¯´ï¼Œæ–°ç”Ÿä»£æ˜¯å †å¤§å°çš„1/3ã€‚</p>\n<ul>\n<li>å½“ç„¶ï¼Œä¹Ÿå¯ä»¥ä¸ç”¨æ¯”ä¾‹çš„æ–¹å¼è°ƒæ•´æ–°ç”Ÿä»£çš„å¤§å°ï¼Œç›´æ¥æŒ‡å®šä¸‹é¢çš„å‚æ•°ï¼Œè®¾å®šå…·ä½“çš„å†…å­˜å¤§å°æ•°å€¼ã€‚</li>\n</ul>\n<pre><code>-XX:NewSize=value\n</code></pre>\n<ul>\n<li>Edenå’ŒSurvivorçš„å¤§å°æ˜¯æŒ‰ç…§æ¯”ä¾‹è®¾ç½®çš„ï¼Œå¦‚æœSurvivorRatioæ˜¯8ï¼Œé‚£ä¹ˆSurvivoråŒºåŸŸå°±æ˜¯Edençš„1/8å¤§å°ï¼Œä¹Ÿå°±æ˜¯æ–°ç”Ÿä»£çš„1/10ï¼Œå› ä¸ºYoungGen=Eden + 2*Survivorï¼ŒJVMå‚æ•°æ ¼å¼æ˜¯</li>\n</ul>\n<pre><code>-XX:SurvivorRatio=value\n</code></pre>\n<ul>\n<li>TLABå½“ç„¶ä¹Ÿå¯ä»¥è°ƒæ•´ï¼ŒJVMå®ç°äº†å¤æ‚çš„é€‚åº”ç­–ç•¥ï¼Œå¦‚æœä½ æœ‰å…´è¶£å¯ä»¥å‚è€ƒè¿™ç¯‡<a href=\"https://blogs.oracle.com/jonthecollector/the-real-thing\">è¯´æ˜</a>ã€‚</li>\n</ul>\n<p>ä¸çŸ¥é“ä½ æœ‰æ²¡æœ‰æ³¨æ„åˆ°ï¼Œæˆ‘åœ¨å¹´ä»£è§†è§’çš„å †ç»“æ„ç¤ºæ„å›¾ä¹Ÿå°±æ˜¯ç¬¬ä¸€å¼ å›¾ä¸­ï¼Œè¿˜æ ‡è®°å‡ºäº†VirtualåŒºåŸŸï¼Œè¿™æ˜¯å—å„¿ä»€ä¹ˆåŒºåŸŸå‘¢ï¼Ÿ</p>\n<p>åœ¨JVMå†…éƒ¨ï¼Œå¦‚æœXmså°äºXmxï¼Œå †çš„å¤§å°å¹¶ä¸ä¼šç›´æ¥æ‰©å±•åˆ°å…¶ä¸Šé™ï¼Œä¹Ÿå°±æ˜¯è¯´ä¿ç•™çš„ç©ºé—´ï¼ˆreservedï¼‰å¤§äºå®é™…èƒ½å¤Ÿä½¿ç”¨çš„ç©ºé—´ï¼ˆcommittedï¼‰ã€‚å½“å†…å­˜éœ€æ±‚ä¸æ–­å¢é•¿çš„æ—¶å€™ï¼ŒJVMä¼šé€æ¸æ‰©å±•æ–°ç”Ÿä»£ç­‰åŒºåŸŸçš„å¤§å°ï¼Œæ‰€ä»¥VirtualåŒºåŸŸä»£è¡¨çš„å°±æ˜¯æš‚æ—¶ä¸å¯ç”¨ï¼ˆuncommittedï¼‰çš„ç©ºé—´ã€‚</p>\n<p>ç¬¬äºŒï¼Œåˆ†æå®Œå †å†…ç©ºé—´ï¼Œæˆ‘ä»¬ä¸€èµ·æ¥çœ‹çœ‹JVMå †å¤–å†…å­˜åˆ°åº•åŒ…æ‹¬ä»€ä¹ˆï¼Ÿ</p>\n<p>åœ¨JMCæˆ–JConsoleçš„å†…å­˜ç®¡ç†ç•Œé¢ï¼Œä¼šç»Ÿè®¡éƒ¨åˆ†éå †å†…å­˜ï¼Œä½†æä¾›çš„ä¿¡æ¯ç›¸å¯¹æœ‰é™ï¼Œä¸‹å›¾å°±æ˜¯JMCæ´»åŠ¨å†…å­˜æ± çš„æˆªå›¾ã€‚<br />\n<img src=\"https://static001.geekbang.org/resource/image/fa/2e/fa491795ffe21c1f49982de8b7810c2e.png?wh=930*260\" alt=\"\" /></p>\n<p>æ¥ä¸‹æ¥æˆ‘ä¼šä¾èµ–NMTç‰¹æ€§å¯¹JVMè¿›è¡Œåˆ†æï¼Œå®ƒæ‰€æä¾›çš„è¯¦ç»†åˆ†ç±»ä¿¡æ¯ï¼Œéå¸¸æœ‰åŠ©äºç†è§£JVMå†…éƒ¨å®ç°ã€‚</p>\n<p>é¦–å…ˆæ¥åšäº›å‡†å¤‡å·¥ä½œï¼Œå¼€å¯NMTå¹¶é€‰æ‹©summaryæ¨¡å¼ï¼Œ</p>\n<pre><code>-XX:NativeMemoryTracking=summary\n</code></pre>\n<p>ä¸ºäº†æ–¹ä¾¿è·å–å’Œå¯¹æ¯”NMTè¾“å‡ºï¼Œé€‰æ‹©åœ¨åº”ç”¨é€€å‡ºæ—¶æ‰“å°NMTç»Ÿè®¡ä¿¡æ¯</p>\n<pre><code>-XX:+UnlockDiagnosticVMOptions -XX:+PrintNMTStatistics\n</code></pre>\n<p>ç„¶åï¼Œæ‰§è¡Œä¸€ä¸ªç®€å•çš„åœ¨æ ‡å‡†è¾“å‡ºæ‰“å°HelloWorldçš„ç¨‹åºï¼Œå°±å¯ä»¥å¾—åˆ°ä¸‹é¢çš„è¾“å‡º<br />\n<img src=\"https://static001.geekbang.org/resource/image/55/bb/55f1c7f0550adbbcc885c97a4dd426bb.png?wh=642*821\" alt=\"\" /></p>\n<p>æˆ‘æ¥ä»”ç»†åˆ†æä¸€ä¸‹ï¼ŒNMTæ‰€è¡¨å¾çš„JVMæœ¬åœ°å†…å­˜ä½¿ç”¨ï¼š</p>\n<ul>\n<li>\n<p>ç¬¬ä¸€éƒ¨åˆ†éå¸¸æ˜æ˜¾æ˜¯Javaå †ï¼Œæˆ‘å·²ç»åˆ†æè¿‡ä½¿ç”¨ä»€ä¹ˆå‚æ•°è°ƒæ•´ï¼Œä¸å†èµ˜è¿°ã€‚</p>\n</li>\n<li>\n<p>ç¬¬äºŒéƒ¨åˆ†æ˜¯Classå†…å­˜å ç”¨ï¼Œå®ƒæ‰€ç»Ÿè®¡çš„å°±æ˜¯Javaç±»å…ƒæ•°æ®æ‰€å ç”¨çš„ç©ºé—´ï¼ŒJVMå¯ä»¥é€šè¿‡ç±»ä¼¼ä¸‹é¢çš„å‚æ•°è°ƒæ•´å…¶å¤§å°ï¼š</p>\n</li>\n</ul>\n<pre><code>-XX:MaxMetaspaceSize=value\n</code></pre>\n<p>å¯¹äºæœ¬ä¾‹ï¼Œå› ä¸ºHelloWorldæ²¡æœ‰ä»€ä¹ˆç”¨æˆ·ç±»åº“ï¼Œæ‰€ä»¥å…¶å†…å­˜å ç”¨ä¸»è¦æ˜¯å¯åŠ¨ç±»åŠ è½½å™¨ï¼ˆBootstrapï¼‰åŠ è½½çš„æ ¸å¿ƒç±»åº“ã€‚ä½ å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å°æŠ€å·§ï¼Œè°ƒæ•´å¯åŠ¨ç±»åŠ è½½å™¨å…ƒæ•°æ®åŒºï¼Œè¿™ä¸»è¦æ˜¯ä¸ºäº†å¯¹æ¯”ä»¥åŠ æ·±ç†è§£ï¼Œä¹Ÿè®¸åªæœ‰åœ¨hack JDKæ—¶æ‰æœ‰å®é™…æ„ä¹‰ã€‚</p>\n<pre><code>-XX:InitialBootClassLoaderMetaspaceSize=30720\n</code></pre>\n<ul>\n<li>ä¸‹é¢æ˜¯Threadï¼Œè¿™é‡Œæ—¢åŒ…æ‹¬Javaçº¿ç¨‹ï¼Œå¦‚ç¨‹åºä¸»çº¿ç¨‹ã€Cleanerçº¿ç¨‹ç­‰ï¼Œä¹ŸåŒ…æ‹¬GCç­‰æœ¬åœ°çº¿ç¨‹ã€‚ä½ æœ‰æ²¡æœ‰æ³¨æ„åˆ°ï¼Œå³ä½¿æ˜¯ä¸€ä¸ªHelloWorldç¨‹åºï¼Œè¿™ä¸ªçº¿ç¨‹æ•°é‡ç«Ÿç„¶è¿˜æœ‰25ã€‚ä¼¼ä¹æœ‰å¾ˆå¤šæµªè´¹ï¼Œè®¾æƒ³æˆ‘ä»¬è¦ç”¨Javaä½œä¸ºServerlessè¿è¡Œæ—¶ï¼Œæ¯ä¸ªfunctionæ˜¯éå¸¸çŸ­æš‚çš„ï¼Œå¦‚ä½•é™ä½çº¿ç¨‹æ•°é‡å‘¢ï¼Ÿ<br />\nå¦‚æœä½ å……åˆ†ç†è§£äº†ä¸“æ è®²è§£çš„å†…å®¹ï¼Œå¯¹JVMå†…éƒ¨æœ‰äº†å……åˆ†ç†è§£ï¼Œæ€è·¯å°±å¾ˆæ¸…æ™°äº†ï¼š<br />\nJDK 9çš„é»˜è®¤GCæ˜¯G1ï¼Œè™½ç„¶å®ƒåœ¨è¾ƒå¤§å †åœºæ™¯è¡¨ç°è‰¯å¥½ï¼Œä½†æœ¬èº«å°±ä¼šæ¯”ä¼ ç»Ÿçš„Parallel GCæˆ–è€…Serial GCä¹‹ç±»å¤æ‚å¤ªå¤šï¼Œæ‰€ä»¥è¦ä¹ˆé™ä½å…¶å¹¶è¡Œçº¿ç¨‹æ•°ç›®ï¼Œè¦ä¹ˆç›´æ¥åˆ‡æ¢GCç±»å‹ï¼›<br />\nJITç¼–è¯‘é»˜è®¤æ˜¯å¼€å¯äº†TieredCompilationçš„ï¼Œå°†å…¶å…³é—­ï¼Œé‚£ä¹ˆJITä¹Ÿä¼šå˜å¾—ç®€å•ï¼Œç›¸åº”æœ¬åœ°çº¿ç¨‹ä¹Ÿä¼šå‡å°‘ã€‚<br />\næˆ‘ä»¬æ¥å¯¹æ¯”ä¸€ä¸‹ï¼Œè¿™æ˜¯é»˜è®¤å‚æ•°æƒ…å†µçš„è¾“å‡ºï¼š<br />\n<img src=\"https://static001.geekbang.org/resource/image/97/42/97d060b306e44af3a8443f932a0a4d42.png?wh=607*89\" alt=\"\" /></li>\n</ul>\n<p>ä¸‹é¢æ˜¯æ›¿æ¢äº†é»˜è®¤GCï¼Œå¹¶å…³é—­TieredCompilationçš„å‘½ä»¤è¡Œ<br />\n<img src=\"https://static001.geekbang.org/resource/image/b0/3b/b07d6da56f588cbfadbb7b381346213b.png?wh=592*71\" alt=\"\" /></p>\n<p>å¾—åˆ°çš„ç»Ÿè®¡ä¿¡æ¯å¦‚ä¸‹ï¼Œçº¿ç¨‹æ•°ç›®ä»25é™åˆ°äº†17ï¼Œæ¶ˆè€—çš„å†…å­˜ä¹Ÿä¸‹é™äº†å¤§æ¦‚1/3ã€‚<br />\n<img src=\"https://static001.geekbang.org/resource/image/59/27/593735623f6917695602095fd249d527.png?wh=634*85\" alt=\"\" /></p>\n<ul>\n<li>æ¥ä¸‹æ¥æ˜¯Codeç»Ÿè®¡ä¿¡æ¯ï¼Œæ˜¾ç„¶è¿™æ˜¯CodeCacheç›¸å…³å†…å­˜ï¼Œä¹Ÿå°±æ˜¯JIT compilerå­˜å‚¨ç¼–è¯‘çƒ­ç‚¹æ–¹æ³•ç­‰ä¿¡æ¯çš„åœ°æ–¹ï¼ŒJVMæä¾›äº†ä¸€ç³»åˆ—å‚æ•°å¯ä»¥é™åˆ¶å…¶åˆå§‹å€¼å’Œæœ€å¤§å€¼ç­‰ï¼Œä¾‹å¦‚ï¼š</li>\n</ul>\n<pre><code>-XX:InitialCodeCacheSize=value\n</code></pre>\n<pre><code>-XX:ReservedCodeCacheSize=value\n</code></pre>\n<p>ä½ å¯ä»¥è®¾ç½®ä¸‹åˆ—JVMå‚æ•°ï¼Œä¹Ÿå¯ä»¥åªè®¾ç½®å…¶ä¸­ä¸€ä¸ªï¼Œè¿›ä¸€æ­¥åˆ¤æ–­ä¸åŒå‚æ•°å¯¹CodeCacheå¤§å°çš„å½±å“ã€‚<br />\n<img src=\"https://static001.geekbang.org/resource/image/94/70/945740c37433f783d2d877c67dcc1170.png?wh=530*42\" alt=\"\" /><br />\n<img src=\"https://static001.geekbang.org/resource/image/82/cd/82d1fbc9ca09698c01ccff18fb97c8cd.png?wh=641*60\" alt=\"\" /></p>\n<p>å¾ˆæ˜æ˜¾ï¼ŒCodeCacheç©ºé—´ä¸‹é™éå¸¸å¤§ï¼Œè¿™æ˜¯å› ä¸ºæˆ‘ä»¬å…³é—­äº†å¤æ‚çš„TieredCompilationï¼Œè€Œä¸”è¿˜é™åˆ¶äº†å…¶åˆå§‹å¤§å°ã€‚</p>\n<ul>\n<li>ä¸‹é¢å°±æ˜¯GCéƒ¨åˆ†äº†ï¼Œå°±åƒæˆ‘å‰é¢ä»‹ç»çš„ï¼ŒG1ç­‰åƒåœ¾æ”¶é›†å™¨å…¶æœ¬èº«çš„è®¾æ–½å’Œæ•°æ®ç»“æ„å°±éå¸¸å¤æ‚å’Œåºå¤§ï¼Œä¾‹å¦‚Remembered Seté€šå¸¸éƒ½ä¼šå ç”¨20%~30%çš„å †ç©ºé—´ã€‚å¦‚æœæˆ‘æŠŠGCæ˜ç¡®ä¿®æ”¹ä¸ºç›¸å¯¹ç®€å•çš„Serial GCï¼Œä¼šæœ‰ä»€ä¹ˆæ•ˆæœå‘¢ï¼Ÿ</li>\n</ul>\n<p>ä½¿ç”¨å‘½ä»¤ï¼š</p>\n<pre><code>-XX:+UseSerialGC\n</code></pre>\n<p><img src=\"https://static001.geekbang.org/resource/image/6e/33/6eeee6624c7dc6be54bfce5e93064233.png?wh=641*216\" alt=\"\" /></p>\n<p>å¯è§ï¼Œä¸ä»…æ€»çº¿ç¨‹æ•°å¤§å¤§é™ä½ï¼ˆ25 â†’ 13ï¼‰ï¼Œè€Œä¸”GCè®¾æ–½æœ¬èº«çš„å†…å­˜å¼€é”€å°±å°‘äº†éå¸¸å¤šã€‚æ®æˆ‘æ‰€çŸ¥ï¼ŒAWS Lambdaä¸­Javaè¿è¡Œæ—¶å°±æ˜¯ä½¿ç”¨çš„Serial GCï¼Œå¯ä»¥å¤§å¤§é™ä½å•ä¸ªfunctionçš„å¯åŠ¨å’Œè¿è¡Œå¼€é”€ã€‚</p>\n<ul>\n<li>\n<p>Compileréƒ¨åˆ†ï¼Œå°±æ˜¯JITçš„å¼€é”€ï¼Œæ˜¾ç„¶å…³é—­TieredCompilationä¼šé™ä½å†…å­˜ä½¿ç”¨ã€‚</p>\n</li>\n<li>\n<p>å…¶ä»–ä¸€äº›éƒ¨åˆ†å æ¯”éƒ½éå¸¸ä½ï¼Œé€šå¸¸ä¹Ÿä¸ä¼šå‡ºç°å†…å­˜ä½¿ç”¨é—®é¢˜ï¼Œè¯·å‚è€ƒ<a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/troubleshoot/tooldescr022.html#BABCBGFA\">å®˜æ–¹æ–‡æ¡£</a>ã€‚å”¯ä¸€çš„ä¾‹å¤–å°±æ˜¯Internalï¼ˆJDK 11ä»¥ååœ¨Otheréƒ¨åˆ†ï¼‰éƒ¨åˆ†ï¼Œå…¶ç»Ÿè®¡ä¿¡æ¯<strong>åŒ…å«ç€Direct Bufferçš„ç›´æ¥å†…å­˜</strong>ï¼Œè¿™å…¶å®æ˜¯å †å¤–å†…å­˜ä¸­æ¯”è¾ƒæ•æ„Ÿçš„éƒ¨åˆ†ï¼Œå¾ˆå¤šå †å¤–å†…å­˜OOMå°±å‘ç”Ÿåœ¨è¿™é‡Œï¼Œè¯·å‚è€ƒä¸“æ ç¬¬12è®²çš„å¤„ç†æ­¥éª¤ã€‚åŸåˆ™ä¸ŠDirect Bufferæ˜¯ä¸æ¨èé¢‘ç¹åˆ›å»ºæˆ–é”€æ¯çš„ï¼Œå¦‚æœä½ æ€€ç–‘ç›´æ¥å†…å­˜åŒºåŸŸæœ‰é—®é¢˜ï¼Œé€šå¸¸å¯ä»¥é€šè¿‡ç±»ä¼¼instrumentæ„é€ å‡½æ•°ç­‰æ‰‹æ®µï¼Œæ’æŸ¥å¯èƒ½çš„é—®é¢˜ã€‚</p>\n</li>\n</ul>\n<p>JVMå†…éƒ¨ç»“æ„å°±ä»‹ç»åˆ°è¿™é‡Œï¼Œä¸»è¦ç›®çš„æ˜¯ä¸ºäº†åŠ æ·±ç†è§£ï¼Œå¾ˆå¤šæ–¹é¢åªæœ‰åœ¨å®šåˆ¶æˆ–è°ƒä¼˜JVMè¿è¡Œæ—¶æ‰èƒ½çœŸæ­£æ¶‰åŠï¼Œéšç€å¾®æœåŠ¡å’ŒServerlessç­‰æŠ€æœ¯çš„å…´èµ·ï¼ŒJDKç¡®å®å­˜åœ¨ç€ä¸ºæ–°ç‰¹å¾çš„å·¥ä½œè´Ÿè½½è¿›è¡Œå®šåˆ¶çš„éœ€æ±‚ã€‚</p>\n<p>ä»Šå¤©æˆ‘ç»“åˆJVMå‚æ•°å’Œç‰¹æ€§ï¼Œç³»ç»Ÿåœ°åˆ†æäº†JVMå †å†…å’Œå †å¤–å†…å­˜ç»“æ„ï¼Œç›¸ä¿¡ä½ ä¸€å®šå¯¹JVMå†…å­˜ç»“æ„æœ‰äº†æ¯”è¾ƒæ·±å…¥çš„äº†è§£ï¼Œåœ¨å®šåˆ¶Javaè¿è¡Œæ—¶æˆ–è€…å¤„ç†OOMç­‰é—®é¢˜çš„æ—¶å€™ï¼Œæ€è·¯ä¹Ÿä¼šæ›´åŠ æ¸…æ™°ã€‚JVMé—®é¢˜åƒå¥‡ç™¾æ€ªï¼Œå¦‚æœä½ èƒ½å¿«é€Ÿå°†é—®é¢˜ç¼©å°ï¼Œå¤§è‡´å°±èƒ½æ¸…æ¥šé—®é¢˜å¯èƒ½å‡ºåœ¨å“ªé‡Œï¼Œä¾‹å¦‚å¦‚æœå®šä½åˆ°é—®é¢˜å¯èƒ½æ˜¯å †å†…å­˜æ³„æ¼ï¼Œå¾€å¾€å°±å·²ç»æœ‰éå¸¸æ¸…æ™°çš„<a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/troubleshoot/memleaks004.html#CIHIEEFH\">æ€è·¯å’Œå·¥å…·</a>å¯ä»¥å»è§£å†³äº†ã€‚</p>\n<h2>ä¸€è¯¾ä¸€ç»ƒ</h2>\n<p>å…³äºä»Šå¤©æˆ‘ä»¬è®¨è®ºçš„é¢˜ç›®ä½ åšåˆ°å¿ƒä¸­æœ‰æ•°äº†å—ï¼Ÿä»Šå¤©çš„æ€è€ƒé¢˜æ˜¯ï¼Œå¦‚æœç”¨ç¨‹åºçš„æ–¹å¼è€Œä¸æ˜¯å·¥å…·ï¼Œå¯¹Javaå†…å­˜ä½¿ç”¨è¿›è¡Œç›‘æ§ï¼Œæœ‰å“ªäº›æŠ€æœ¯å¯ä»¥åšåˆ°?</p>\n<p>è¯·ä½ åœ¨ç•™è¨€åŒºå†™å†™ä½ å¯¹è¿™ä¸ªé—®é¢˜çš„æ€è€ƒï¼Œæˆ‘ä¼šé€‰å‡ºç»è¿‡è®¤çœŸæ€è€ƒçš„ç•™è¨€ï¼Œé€ç»™ä½ ä¸€ä»½å­¦ä¹ å¥–åŠ±ç¤¼åˆ¸ï¼Œæ¬¢è¿ä½ ä¸æˆ‘ä¸€èµ·è®¨è®ºã€‚</p>\n<p>ä½ çš„æœ‹å‹æ˜¯ä¸æ˜¯ä¹Ÿåœ¨å‡†å¤‡é¢è¯•å‘¢ï¼Ÿä½ å¯ä»¥â€œè¯·æœ‹å‹è¯»â€ï¼ŒæŠŠä»Šå¤©çš„é¢˜ç›®åˆ†äº«ç»™å¥½å‹ï¼Œæˆ–è®¸ä½ èƒ½å¸®åˆ°ä»–ã€‚</p>\n<p></p>\n","comments":[{"had_liked":false,"id":15010,"user_name":"Loading...","can_delete":false,"product_type":"c1","uid":1169877,"ip_address":"","ucode":"91651B01AE310F","user_header":"https://static001.geekbang.org/account/avatar/00/11/d9/d5/3834f474.jpg","comment_is_top":false,"comment_ctime":1530797902,"is_pvip":false,"replies":[{"id":"5070","content":"å¯¹æ–¹é—®å¾—æœ‰ç‚¹å«ç³Šï¼Œä¸çŸ¥é“æ˜¯å¦æ•…æ„çš„ï¼Œä»¥cmsä¸ºä¾‹ï¼Œå®ƒæœ‰ä¸åŒçš„markï¼š initial markï¼Œconc markï¼Œ remarkï¼›concæ—¶å€™ä¸éœ€è¦stwï¼›å…¶ä»–éœ€è¦çŸ­æš‚stwï¼Œè¿™æ ·å¼•ç”¨å…³ç³»æ‰ä¸å˜ï¼Œå¦å¤–æ•ˆç‡ä¹Ÿé«˜","user_name":"ä½œè€…å›å¤","comment_id":15010,"uid":"1009360","ip_address":"","utype":1,"ctime":1530891204,"user_name_real":"æ¨æ™“å³°"}],"discussion_count":11,"race_medal":0,"score":"233459031886","product_id":100006701,"comment_content":"ä»Šå¤©é˜¿é‡Œé¢è¯•å®˜é—®äº†æˆ‘ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘æƒ³äº†å¾ˆä¹…æ²¡æƒ³é€šï¼Œå¸Œæœ›å¾—åˆ°è§£ç­”ã€‚ä¸ºä»€ä¹ˆåœ¨æ ‡è®°åƒåœ¾çš„æ—¶å€™ï¼Œéœ€è¦stop the world","like_count":55,"discussions":[{"author":{"id":1218347,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLvdWoCic6ItzibF8ia8vrUTRuyj6AT3tg5f4QicIK0jTIFheJ6274ZkibuRLFP1NXG3jibv5TiaSKNoJpLw/132","nickname":"Geek_37984c","note":"","ucode":"7A319AE28599B0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":202005,"discussion_content":"https://blog.csdn.net/fhy569039351/article/details/83960709","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1583853626,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1286050,"avatar":"","nickname":"Geek_2019","note":"","ucode":"CAEA0381F4EDCA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":32869,"discussion_content":"ä¸ºäº†ä¿è¯å¼•ç”¨æ›´æ–°çš„æ­£ç¡®æ€§ï¼Ÿ","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1571064462,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420207,"discussion_content":"å¯¹æ–¹é—®å¾—æœ‰ç‚¹å«ç³Šï¼Œä¸çŸ¥é“æ˜¯å¦æ•…æ„çš„ï¼Œä»¥cmsä¸ºä¾‹ï¼Œå®ƒæœ‰ä¸åŒçš„markï¼š initial markï¼Œconc markï¼Œ remarkï¼›concæ—¶å€™ä¸éœ€è¦stwï¼›å…¶ä»–éœ€è¦çŸ­æš‚stwï¼Œè¿™æ ·å¼•ç”¨å…³ç³»æ‰ä¸å˜ï¼Œå¦å¤–æ•ˆç‡ä¹Ÿé«˜","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1530891204,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1062848,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ersGSic8ib7OguJv6CJiaXY0s4n9C7Z51sWxTTljklFpq3ZAIWXoFTPV5oLo0GMTkqW5sYJRRnibNqOJQ/132","nickname":"walleæ–Œ","note":"","ucode":"0DB3243004951F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":315402,"discussion_content":"æˆ‘è§‰å¾—è€å¸ˆå›ç­”çš„å¯¹ã€‚ã€‚è¿‡äºæ¨¡ç³Šï¼Œä½ å…ˆåé—®ä¾æ®ï¼Œä½ è¯´çš„stop the world å‰ææ˜¯å“ªä¸ªæ”¶é›†å™¨  ä½ è§‰å¾—æ˜¯å“ªä¸ª stop the world","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1603269890,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1499166,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e0/1e/b71bf116.jpg","nickname":"è‚¥æœˆé¥¼","note":"","ucode":"8405249D305DD5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":325895,"discussion_content":"æˆ‘ç†è§£æ˜¯æ ‡è®°çš„æµç¨‹æ˜¯å…ˆæ‰«ægcrootçš„å¯è¾¾ç›®æ ‡ï¼Œç„¶ååé€‰æ ‡è®°ä¸ºåƒåœ¾ã€‚å¦‚æœä¸stwçš„è¯ï¼Œåœ¨è¿›è¡Œåé€‰æ—¶ä¼šæœ‰å¯èƒ½æ ‡è®°åˆ°åœ¨æ‰«ægcrootçš„å¯è¾¾ç›®æ ‡æ—¶æœªèƒ½æ£€æµ‹åˆ°çš„æ–°ç”Ÿå¯¹è±¡ï¼Œå¯¼è‡´é”™è¯¯æ¸…ç†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605453441,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1794876,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/63/3c/4ad53829.jpg","nickname":"æ­£èƒ½é‡","note":"","ucode":"7C64D1C4C5FC0D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":318879,"discussion_content":"ç®€å•ç‚¹å›ç­”ï¼Œæ ‡è®°åƒåœ¾çš„æ—¶å€™å¦‚æœä¸STWï¼ŒåŒä¸€æ—¶é—´ç”¨æˆ·çº¿ç¨‹é‡æ–°å°†ä¸€ä¸ªæœ¬æ¥è¢«æ ‡è®°æˆåƒåœ¾å¯¹è±¡çš„å¼•ç”¨å˜ä¸ºå¯è¾¾äº†ï¼ˆä¹Ÿå°±æ˜¯åƒåœ¾ä¸å†æ˜¯åƒåœ¾ï¼‰ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥GCæ ‡è®°ç»“æŸè¿›è¡Œåƒåœ¾å›æ”¶çš„æ—¶å€™ï¼Œä¼šæŠŠè¿™ä¸ªå¯¹è±¡å½“ä½œåƒåœ¾æ¸…ç†æ‰ï¼ˆç„¶è€Œè¿™ä¸ªå¯¹è±¡ç°åœ¨æ˜¯å­˜æ´»çš„ï¼‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603872914,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1768852,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/fd/94/8704d2b0.jpg","nickname":"spoofer","note":"","ucode":"6723F64ACC3F27","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1794876,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/63/3c/4ad53829.jpg","nickname":"æ­£èƒ½é‡","note":"","ucode":"7C64D1C4C5FC0D","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":350694,"discussion_content":"å¯ä»¥ä½¿ç”¨å¹¶å‘çš„å¯è¾¾æ€§åˆ†æçš„å•Šï¼ï¼ä½ è¯´çš„è¿™äº›æƒ…å†µï¼Œå¯ä»¥å†ä¸€æ¬¡æ‰«æä½¿ç”¨å¢é‡æ›´æ–°å’ŒåŸå§‹å¿«ç…§ä¸¤ç§æ–¹æ¡ˆæ¥è§£å†³ï¼Œå¯ä»¥çœ‹ä¸€ä¸‹æ·±å…¥ç†è§£jvm","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1613981400,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":318879,"ip_address":""},"score":350694,"extra":""},{"author":{"id":1794876,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/63/3c/4ad53829.jpg","nickname":"æ­£èƒ½é‡","note":"","ucode":"7C64D1C4C5FC0D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1768852,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/fd/94/8704d2b0.jpg","nickname":"spoofer","note":"","ucode":"6723F64ACC3F27","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":372105,"discussion_content":"ä½ è¯´çš„è¿™äº›æ–¹æ¡ˆæ˜¯åç»­æ–°çš„gcï¼Œä½†æ˜¯ä»”ç»†å»ç ”ç©¶ï¼Œå†æ–°çš„å“ªæ€•æ˜¯zgcä¹Ÿåšä¸åˆ°å®Œå…¨æ²¡æœ‰stwã€‚åªæ˜¯ç›¸å¯¹è€çš„gcï¼Œå¤§å¤§ä¼˜åŒ–äº†ï¼Œç¼©çŸ­äº†stwçš„æ—¶é—´","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620194272,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":350694,"ip_address":""},"score":372105,"extra":""},{"author":{"id":2391701,"avatar":"","nickname":"Geek_a3890b","note":"","ucode":"BF67D080DAF96D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1794876,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/63/3c/4ad53829.jpg","nickname":"æ­£èƒ½é‡","note":"","ucode":"7C64D1C4C5FC0D","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":403943,"discussion_content":"æ ‡è®°ä¸ºåƒåœ¾çš„å¯¹è±¡ï¼Ÿ æ²¡ææ‡‚ã€‚ å¯è¾¾åˆ†æåªèƒ½æ‰¾åˆ°æ ‡è®°å­˜æ´»çš„å¯¹è±¡å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634195160,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":318879,"ip_address":""},"score":403943,"extra":""}]},{"author":{"id":1121758,"avatar":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","nickname":"aoe","note":"","ucode":"1C6201EDB4E954","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":159639,"discussion_content":"ã€Šæ·±å…¥ç†è§£JVMã€‹çœŸçš„å¥½æ·±","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580718820,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1564175,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/hkBfzo6cRvaarhFg3zMz9zicO6Sa1lU0Zib9jECcBBbmvaEke9MvMq28mP3emViaMqIU5KNlSexaoMQN5tWFOZiafQ/132","nickname":"å¶æ™šæ—","note":"","ucode":"5D6C5CB8AA68DE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":14009,"discussion_content":"è¿™ä¸ªã€Šæ·±å…¥ç†è§£JVMã€‹è®²äº†å•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568720643,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":15161,"user_name":"å°æ–‡åŒå­¦","can_delete":false,"product_type":"c1","uid":1001893,"ip_address":"","ucode":"48F2AEB989C12A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/49/a5/e4c1c2d4.jpg","comment_is_top":false,"comment_ctime":1530939906,"is_pvip":false,"replies":[{"id":"5111","content":"éå¸¸æ„Ÿè°¢ï¼Œä¸‹ä¸€ç« æœ‰é…å›¾è¯¦è§£ï¼Œå—åˆ¶äºä¸€ç« çš„ç¯‡å¹…é™åˆ¶","user_name":"ä½œè€…å›å¤","comment_id":15161,"uid":"1009360","ip_address":"","utype":1,"ctime":1530973831,"user_name_real":"æ¨æ™“å³°"}],"discussion_count":3,"race_medal":0,"score":"207689370114","product_id":100006701,"comment_content":"ç­é—¨å¼„æ–§ï¼Œä¸ºè€å¸ˆè¡¥å……ä¸€äº›å…³äºEdenã€ä¸¤ä¸ªSurvivorçš„ç»†èŠ‚ã€‚<br>1ã€å¤§éƒ¨åˆ†å¯¹è±¡åˆ›å»ºéƒ½æ˜¯åœ¨Edençš„ï¼Œé™¤äº†ä¸ªåˆ«å¤§å¯¹è±¡å¤–ã€‚<br>2ã€Minor GCå¼€å§‹å‰ï¼Œto-survivoræ˜¯ç©ºçš„ï¼Œfrom-survivoræ˜¯ç”±å¯¹è±¡çš„ã€‚<br>3ã€Minor GCåï¼ŒEdençš„å­˜æ´»å¯¹è±¡éƒ½copyåˆ°to-survivorä¸­ï¼Œfrom-survivorçš„å­˜æ´»å¯¹è±¡ä¹Ÿå¤åˆ¶to-survivorä¸­ã€‚å…¶ä¸­æ‰€æœ‰å¯¹è±¡çš„å¹´é¾„+1<br>4ã€from-survivoræ¸…ç©ºï¼Œæˆä¸ºæ–°çš„to-survivorï¼Œå¸¦æœ‰å¯¹è±¡çš„to-survivorå˜æˆæ–°çš„from-survivorã€‚é‡å¤å›åˆ°æ­¥éª¤2<br><br>è¿™æ˜¯æˆ‘çœ‹è¿™è¾¹æ–‡ç« ä¹Ÿæœ‰çš„ç–‘é—®ï¼Œé€šè¿‡æŸ¥é˜…èµ„æ–™ç†è§£çš„ï¼Œå¸Œæœ›å¯ä»¥å¸®åˆ°å…¶ä»–åŒå­¦","like_count":49,"discussions":[{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420264,"discussion_content":"éå¸¸æ„Ÿè°¢ï¼Œä¸‹ä¸€ç« æœ‰é…å›¾è¯¦è§£ï¼Œå—åˆ¶äºä¸€ç« çš„ç¯‡å¹…é™åˆ¶","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1530973831,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1336475,"avatar":"https://static001.geekbang.org/account/avatar/00/14/64/9b/0b578b08.jpg","nickname":"J.Smile","note":"","ucode":"C4D98DFDBF7584","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":152187,"discussion_content":"é¡¶ä½ ä¸€ä¸‹ğŸ‘","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1579950773,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1481811,"avatar":"https://static001.geekbang.org/account/avatar/00/16/9c/53/ade0afb0.jpg","nickname":"ub8","note":"","ucode":"0D937C3EAEB781","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":404583,"discussion_content":"æˆ‘å’‹è§‰å¾—è¿™å—æ¯”åŸæ–‡æ›´å¥½å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634352249,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76181,"user_name":"Bruce","can_delete":false,"product_type":"c1","uid":1035230,"ip_address":"","ucode":"93E1A42548EEBB","user_header":"https://static001.geekbang.org/account/avatar/00/0f/cb/de/4d857c5d.jpg","comment_is_top":false,"comment_ctime":1552545447,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"143286466215","product_id":100006701,"comment_content":"å›ç­”ä¸€ä¸‹ç•™è¨€çš„é—®é¢˜ï¼Œä¸ºä»€ä¹ˆæ ‡è®°çš„æ—¶å€™è¦stop the worldï¼Œæ˜¯ä¸ºäº†é¿å…åœ¨æ ‡è®°çš„æ—¶å€™åˆæœ‰å¯¹è±¡åœ¨å †å†…ç”Ÿæˆï¼Œå¦‚æœè¿™ä¸ªå¯¹è±¡å¯¹å…¶ä»–æœªæ ‡è®°å¯¹è±¡æœ‰å¼•ç”¨ï¼Œè€Œè¿™ä¸ªæ—¶å€™ç”±äºgcè€Œæ¸…ç†æ‰äº†æœªæ ‡è®°çš„å¯¹è±¡ï¼Œä¼šæœ‰é—®é¢˜","like_count":33,"discussions":[{"author":{"id":1154783,"avatar":"https://static001.geekbang.org/account/avatar/00/11/9e/df/ac5c60b5.jpg","nickname":"jiahua","note":"","ucode":"A2B85DA49DC69D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":331953,"discussion_content":"ä¸stwã€‚æ ‡è®°ç»“æŸï¼Œä¸ä¹Ÿä¼šæœ‰æ–°å¯¹è±¡ç”Ÿæˆçš„é—®é¢˜å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607011071,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":16340,"user_name":"é“æ‹³é˜¿ç‰›","can_delete":false,"product_type":"c1","uid":1094950,"ip_address":"","ucode":"B8CB947995685B","user_header":"https://static001.geekbang.org/account/avatar/00/10/b5/26/d635d8d3.jpg","comment_is_top":false,"comment_ctime":1531888773,"is_pvip":false,"replies":[{"id":"5675","content":"æ˜¯æˆ‘è®°é”™äº†ï¼Œéå¸¸æŠ±æ­‰","user_name":"ä½œè€…å›å¤","comment_id":16340,"uid":"1009360","ip_address":"","utype":1,"ctime":1531901168,"user_name_real":"æ¨æ™“å³°"}],"discussion_count":2,"race_medal":0,"score":"91726201989","product_id":100006701,"comment_content":"-XX:NewRatio=value<br>é»˜è®¤æ˜¯2<br>è¿™é‡Œè¯´æ˜¯3é¢è¯•å®˜è¿˜è¯´æˆ‘è®°é”™äº†ğŸ˜£<br>","like_count":21,"discussions":[{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420763,"discussion_content":"æ˜¯æˆ‘è®°é”™äº†ï¼Œéå¸¸æŠ±æ­‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1531901168,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1856182,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/52/b6/202076f0.jpg","nickname":"æ›¾å­è‰¯","note":"","ucode":"3C2F7234E40451","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":349867,"discussion_content":"å®˜æ–¹æ–‡æ¡£ä¸­ä¸¾ä¾‹æ˜¯3ï¼Œä½†æ˜¯é»˜è®¤å€¼è¡¨æ ¼ä¸­æ˜¯2ï¼Œæ–‡ä¸­åº”è¯¥æ²¡é”™å‘€ã€‚\nâ€˜By default, the young generation size is controlled by the parameter NewRatio. For example, setting -XX:NewRatio=3 means that the ratio between the young and tenured generation is 1:3. In other words, the combined size of the eden and survivor spaces will be one-fourth of the total heap size.â€™\n\nè¿™æ®µæè¿°çš„ä¸‹é¢æœ‰ä¸ªè¡¨æ ¼ï¼š\nTable 4-2 Default Parameter Values for Survivor Space Sizing\nä¸­ NewRatio çš„é»˜è®¤å€¼æ˜¯2","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1613605061,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":14973,"user_name":"åŒ—æºŸé±¼æ±¤","can_delete":false,"product_type":"c1","uid":1112826,"ip_address":"","ucode":"82CF670A8422A9","user_header":"https://static001.geekbang.org/account/avatar/00/10/fa/fa/28832dd5.jpg","comment_is_top":false,"comment_ctime":1530777307,"is_pvip":false,"replies":[{"id":"5088","content":"æ˜¯çš„","user_name":"ä½œè€…å›å¤","comment_id":14973,"uid":"1009360","ip_address":"","utype":1,"ctime":1530895340,"user_name_real":"æ¨æ™“å³°"}],"discussion_count":1,"race_medal":0,"score":"70250254043","product_id":100006701,"comment_content":"java.lang.Runtimeç±»æœ‰freeMemory()ã€totalMemory()ç­‰æ–¹æ³•å¯ä»¥è·å–åˆ°jvmå†…å­˜æƒ…å†µï¼Œçœ‹äº†ä¸€ä¸‹æ˜¯æœ¬åœ°æ–¹æ³•ã€‚","like_count":17,"discussions":[{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420198,"discussion_content":"æ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1530895340,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":17072,"user_name":"xhkk","can_delete":false,"product_type":"c1","uid":1093421,"ip_address":"","ucode":"B36B04D83B6C70","user_header":"https://static001.geekbang.org/account/avatar/00/10/af/2d/3dd65e6b.jpg","comment_is_top":false,"comment_ctime":1532415642,"is_pvip":false,"replies":[{"id":"5961","content":"æ³„éœ²å¯ä»¥å¯¹æ¯”ä¸åŒæ—¶é—´ç‚¹å†…å­˜åˆ†é…ï¼Œä¸€èˆ¬çœ‹ç”¨æˆ·ç±»å‹çš„åˆ†é…æƒ…å†µï¼Œä»€ä¹ˆåœ¨å¢åŠ ã€‚å…·ä½“ï¼Œæ¯”å¦‚ç”¨jmap -histo:live å¤šæ¬¡å¿«ç…§ï¼Œç„¶åå¯¹æ¯”å·®å¼‚ï¼Œæˆ–è€…ç”¨jmcä¹‹ç±»profilingå·¥å…·ï¼Œéƒ½å¯ä»¥è¿›è¡Œï¼Œå¯¹æ¯”ä¼šæ›´åŠ æµç•…ä¸€äº›","user_name":"ä½œè€…å›å¤","comment_id":17072,"uid":"1009360","ip_address":"","utype":1,"ctime":1532448501,"user_name_real":"æ¨æ™“å³°"}],"discussion_count":1,"race_medal":0,"score":"61661957786","product_id":100006701,"comment_content":"è€å¸ˆï¼Œè¯·é—®å¦‚ä½•åˆ¤æ–­æ˜¯å¦æœ‰å†…å­˜æ³„éœ²","like_count":14,"discussions":[{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":421031,"discussion_content":"æ³„éœ²å¯ä»¥å¯¹æ¯”ä¸åŒæ—¶é—´ç‚¹å†…å­˜åˆ†é…ï¼Œä¸€èˆ¬çœ‹ç”¨æˆ·ç±»å‹çš„åˆ†é…æƒ…å†µï¼Œä»€ä¹ˆåœ¨å¢åŠ ã€‚å…·ä½“ï¼Œæ¯”å¦‚ç”¨jmap -histo:live å¤šæ¬¡å¿«ç…§ï¼Œç„¶åå¯¹æ¯”å·®å¼‚ï¼Œæˆ–è€…ç”¨jmcä¹‹ç±»profilingå·¥å…·ï¼Œéƒ½å¯ä»¥è¿›è¡Œï¼Œå¯¹æ¯”ä¼šæ›´åŠ æµç•…ä¸€äº›","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1532448501,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":19316,"user_name":"clz1341521","can_delete":false,"product_type":"c1","uid":1179557,"ip_address":"","ucode":"3BDB4AB454C918","user_header":"https://static001.geekbang.org/account/avatar/00/11/ff/a5/eccc7653.jpg","comment_is_top":false,"comment_ctime":1533774839,"is_pvip":false,"replies":[{"id":"7671","content":"ä¸é”™","user_name":"ä½œè€…å›å¤","comment_id":19316,"uid":"1009360","ip_address":"","utype":1,"ctime":1535217674,"user_name_real":"æ¨æ™“å³°"}],"discussion_count":1,"race_medal":0,"score":"44483447799","product_id":100006701,"comment_content":"java.lang.Runtimeç±»æœ‰freeMemory()ã€totalMemory()ç­‰æ–¹æ³•å¯ä»¥è·å–åˆ°jvmå†…å­˜æƒ…å†µï¼Œçœ‹äº†ä¸€ä¸‹æ˜¯æœ¬åœ°æ–¹æ³•ã€‚<br>å¦å¤–çœ‹åˆ°æœ‰åŒå­¦è¯´jmcï¼Œjconsoleåœ¨linuxä¸Šç”¨ä¸äº†çš„é—®é¢˜ï¼Œå…¶å®1å¯ä»¥è¿œç¨‹è¿æ¥ï¼Œ2å¯ä»¥ä½¿ç”¨xshell","like_count":10,"discussions":[{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":421780,"discussion_content":"ä¸é”™","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1535217674,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":15001,"user_name":"L.B.Q.Y","can_delete":false,"product_type":"c1","uid":1069325,"ip_address":"","ucode":"5567989D1CDBBE","user_header":"https://static001.geekbang.org/account/avatar/00/10/51/0d/14d9364a.jpg","comment_is_top":false,"comment_ctime":1530795763,"is_pvip":false,"replies":[{"id":"5093","content":"æ˜¯çš„","user_name":"ä½œè€…å›å¤","comment_id":15001,"uid":"1009360","ip_address":"","utype":1,"ctime":1530896147,"user_name_real":"æ¨æ™“å³°"}],"discussion_count":1,"race_medal":0,"score":"35890534131","product_id":100006701,"comment_content":"jmxå¯ä»¥åšåˆ°é€šè¿‡ä»£ç è€Œä¸æ˜¯å·¥å…·å»ç›‘æ§ï¼Œå…¶å®jdkå®‰è£…åŒ…çš„å·¥å…·ä¹Ÿæ˜¯å¯¹jmxçš„ä¸€ä¸ªè–„å±‚çš„å°è£…ã€‚","like_count":8,"discussions":[{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420204,"discussion_content":"æ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1530896147,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":20150,"user_name":"é™ˆé“æ’","can_delete":false,"product_type":"c1","uid":1189021,"ip_address":"","ucode":"07A0695DEFA270","user_header":"https://static001.geekbang.org/account/avatar/00/12/24/9d/ba45ff4a.jpg","comment_is_top":false,"comment_ctime":1534294117,"is_pvip":false,"replies":[{"id":"7480","content":"è¿™ä¸ªè¦çœ‹å…·ä½“ä»€ä¹ˆGCï¼Œå¦‚æœcmsæ˜¯PretenureSizeThresholdï¼ŒG1æœ¬èº«å°±æœ‰homongous objectçš„æ¦‚å¿µï¼Œregionå¤§å°çš„ä¸€åŠ","user_name":"ä½œè€…å›å¤","comment_id":20150,"uid":"1009360","ip_address":"","utype":1,"ctime":1534988459,"user_name_real":"æ¨æ™“å³°"}],"discussion_count":1,"race_medal":0,"score":"31599065189","product_id":100006701,"comment_content":"å½“ç„¶ï¼Œä¹Ÿæœ‰ç‰¹æ®Šæƒ…å†µï¼Œæˆ‘ä»¬çŸ¥é“æ™®é€šçš„å¯¹è±¡ä¼šè¢«åˆ†é…åœ¨ TLAB ä¸Šï¼›å¦‚æœå¯¹è±¡è¾ƒå¤§ï¼ŒJVM ä¼šè¯•å›¾ç›´æ¥åˆ†é…åœ¨ Eden å…¶ä»–ä½ç½®ä¸Šï¼›å¦‚æœå¯¹è±¡å¤ªå¤§ï¼Œå®Œå…¨æ— æ³•åœ¨æ–°ç”Ÿä»£æ‰¾åˆ°è¶³å¤Ÿé•¿çš„è¿ç»­ç©ºé—²ç©ºé—´ï¼ŒJVM å°±ä¼šç›´æ¥åˆ†é…åˆ°è€å¹´ä»£ã€‚<br>        æ¨è€å¸ˆä½ å¥½ï¼Œå¤§å¯¹è±¡ç›´æ¥åˆ†é…åˆ°è€å¹´ä»£ï¼Œè¿™é‡Œæ˜¯æŒ‡å¤šå¤§ï¼Ÿæœ‰æ²¡ä»€ä¹ˆè¡¡é‡æ ‡å‡†ï¼Ÿ","like_count":7,"discussions":[{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":422131,"discussion_content":"è¿™ä¸ªè¦çœ‹å…·ä½“ä»€ä¹ˆGCï¼Œå¦‚æœcmsæ˜¯PretenureSizeThresholdï¼ŒG1æœ¬èº«å°±æœ‰homongous objectçš„æ¦‚å¿µï¼Œregionå¤§å°çš„ä¸€åŠ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1534988459,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":15350,"user_name":"ethan","can_delete":false,"product_type":"c1","uid":1149256,"ip_address":"","ucode":"723526C107DF63","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK44Hvr0AreUic5s1gdxGBibTOZy3RiaeA5iccSNW9ibmAIcsNcz3Mb67ZGxRL1rZ3iboLTMndsXr5uX2hA/132","comment_is_top":false,"comment_ctime":1531136233,"is_pvip":false,"replies":[{"id":"5314","content":"å‡ºé”™ä¿¡æ¯åº”è¯¥åŒ…å«å…·ä½“ç±»çš„åå­—ç­‰ä¿¡æ¯ï¼›mvnä¾èµ–æ ‘","user_name":"ä½œè€…å›å¤","comment_id":15350,"uid":"1009360","ip_address":"","utype":1,"ctime":1531322420,"user_name_real":"æ¨æ™“å³°"}],"discussion_count":1,"race_medal":0,"score":"27300940009","product_id":100006701,"comment_content":"jaråŒ…å‘ç”Ÿå†²çªï¼Œå¦‚ä½•å®šä½æ˜¯å“ªäº›jaråŒ…å‘ç”Ÿé—®é¢˜","like_count":6,"discussions":[{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420348,"discussion_content":"å‡ºé”™ä¿¡æ¯åº”è¯¥åŒ…å«å…·ä½“ç±»çš„åå­—ç­‰ä¿¡æ¯ï¼›mvnä¾èµ–æ ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1531322420,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":119364,"user_name":"szh","can_delete":false,"product_type":"c1","uid":1484283,"ip_address":"","ucode":"6DFDF4883AB576","user_header":"https://static001.geekbang.org/account/avatar/00/16/a5/fb/e78299a6.jpg","comment_is_top":false,"comment_ctime":1564571639,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"23039408119","product_id":100006701,"comment_content":"Direct Buffer çš„ç›´æ¥å†…å­˜å¯ä»¥ç”¨MXBeanæŸ¥çœ‹ï¼Œç›¸å…³æ¥å£æ˜¯java.lang.management.BufferPoolMXBeanã€‚åœ¨JConsoleä¸­çš„MBean java.nio.BufferPoolå¯ä»¥çœ‹åˆ°ã€‚","like_count":5},{"had_liked":false,"id":14929,"user_name":"æäºŒæœ¨","can_delete":false,"product_type":"c1","uid":1103091,"ip_address":"","ucode":"30E03BB84ADB27","user_header":"https://static001.geekbang.org/account/avatar/00/10/d4/f3/129d6dfe.jpg","comment_is_top":false,"comment_ctime":1530752604,"is_pvip":true,"replies":[{"id":"5091","content":"æ˜¯çš„ï¼Œæ–‡ä¸­ç®€å•æäº†ä¸‹","user_name":"ä½œè€…å›å¤","comment_id":14929,"uid":"1009360","ip_address":"","utype":1,"ctime":1530895778,"user_name_real":"æ¨æ™“å³°"}],"discussion_count":1,"race_medal":0,"score":"14415654492","product_id":100006701,"comment_content":"è¿˜æœ‰ä¸€ä¸ªå°±æ˜¯jstatï¼Œå¯ä»¥å®æ—¶æŸ¥çœ‹gcä¿¡æ¯,è¿™ä¸ªä¹Ÿè¿˜æ˜¯æ²¡æœ‰å·¥å…·ç›´è§‚ï¼Œ","like_count":3,"discussions":[{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420179,"discussion_content":"æ˜¯çš„ï¼Œæ–‡ä¸­ç®€å•æäº†ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1530895778,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":14926,"user_name":"Hidden","can_delete":false,"product_type":"c1","uid":1114462,"ip_address":"","ucode":"6323E5D32A3190","user_header":"https://static001.geekbang.org/account/avatar/00/11/01/5e/95f7d928.jpg","comment_is_top":false,"comment_ctime":1530752203,"is_pvip":false,"replies":[{"id":"5082","content":"æœ‰ç‚¹åŒºåˆ«ï¼Œæ–°å¯¹è±¡å¤§å¤šæ˜¯åœ¨edenï¼Œfromæ˜¯minor gcæ´»ä¸‹æ¥copyçš„","user_name":"ä½œè€…å›å¤","comment_id":14926,"uid":"1009360","ip_address":"","utype":1,"ctime":1530894057,"user_name_real":"æ¨æ™“å³°"}],"discussion_count":1,"race_medal":0,"score":"14415654091","product_id":100006701,"comment_content":"æ–°å¯¹è±¡éƒ½ä¼šåˆ›å»ºåœ¨eden å’Œfrom åŒºåŸŸï¼Œå½“å‘ç”Ÿminor gcæ—¶ æŠŠè¿™ä¸¤ä¸ªåŒºåŸŸçš„å­˜æ´»å¯¹è±¡å¤åˆ¶åˆ° toåŒºåŸŸï¼Œç„¶åæ¸…ç†eden å’Œfrom åŒºåŸŸï¼Œæ˜¯è¿™æ ·ç†è§£å§","like_count":3,"discussions":[{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420176,"discussion_content":"æœ‰ç‚¹åŒºåˆ«ï¼Œæ–°å¯¹è±¡å¤§å¤šæ˜¯åœ¨edenï¼Œfromæ˜¯minor gcæ´»ä¸‹æ¥copyçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1530894057,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":14924,"user_name":"æäºŒæœ¨","can_delete":false,"product_type":"c1","uid":1103091,"ip_address":"","ucode":"30E03BB84ADB27","user_header":"https://static001.geekbang.org/account/avatar/00/10/d4/f3/129d6dfe.jpg","comment_is_top":false,"comment_ctime":1530752102,"is_pvip":true,"replies":[{"id":"5087","content":"ä¹Ÿæ˜¯ä¸ªåŠæ³•ï¼›JMXä¹‹ç±»å†…å»ºçš„æ–¹å¼æ›´ç›´è§‚ä¸€äº›","user_name":"ä½œè€…å›å¤","comment_id":14924,"uid":"1009360","ip_address":"","utype":1,"ctime":1530895278,"user_name_real":"æ¨æ™“å³°"}],"discussion_count":1,"race_medal":0,"score":"14415653990","product_id":100006701,"comment_content":"é™¤äº†å·¥å…·å°±æ˜¯å‘½ä»¤æ–¹å¼äº†ï¼Œç”¨è¿‡å‘½ä»¤æœ‰vmstatï¼Œè¿™å±äºlinuxçš„ï¼Œä¸»è¦ç›‘æ§cpuå’Œå†…å­˜ä½¿ç”¨æƒ…å†µï¼Œè¿™é‡Œæ˜¯æœåŠ¡å™¨æ€»ä½“å†…å­˜ï¼Œæ‰€ä»¥è¿™ä¸ªå‘½ä»¤ä¸æ˜¯éå¸¸ç›´è§‚ã€‚","like_count":3,"discussions":[{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420174,"discussion_content":"ä¹Ÿæ˜¯ä¸ªåŠæ³•ï¼›JMXä¹‹ç±»å†…å»ºçš„æ–¹å¼æ›´ç›´è§‚ä¸€äº›","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1530895278,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":16879,"user_name":"ä»£ç ç‹‚å¾’","can_delete":false,"product_type":"c1","uid":1030100,"ip_address":"","ucode":"F5918543E90321","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b7/d4/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1532272349,"is_pvip":false,"replies":[{"id":"5890","content":"å¯ä»¥remoteè¿æ¥çš„ï¼Œçœ‹çœ‹æ–‡æ¡£æˆ–è€…ç½‘ä¸Šçš„æŒ‡å—","user_name":"ä½œè€…å›å¤","comment_id":16879,"uid":"1009360","ip_address":"","utype":1,"ctime":1532357075,"user_name_real":"æ¨æ™“å³°"}],"discussion_count":1,"race_medal":0,"score":"10122206941","product_id":100006701,"comment_content":"è€å¸ˆï¼Œéº»çƒ¦å’¨è¯¢ä¸‹ï¼Œåƒjconsoleå’Œjmcè¿™äº›å›¾å½¢åŒ–çš„å·¥å…·ä¸é€‚ç”¨äºlinux æœåŠ¡å™¨ç¯å¢ƒä¸‹ä½¿ç”¨å§ï¼Œæˆ‘è¯•äº†ä¸‹è²Œä¼¼å¹¶æ²¡æœ‰ååº”ï¼Œæ‰€ä»¥å¯¹æœåŠ¡å™¨ç¯å¢ƒå†…å­˜ç›‘æ§æˆ–è€…é—®é¢˜è·Ÿè¸ªï¼Œæœ‰ä»€ä¹ˆå¥½çš„å·¥å…·å‘¢ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420954,"discussion_content":"å¯ä»¥remoteè¿æ¥çš„ï¼Œçœ‹çœ‹æ–‡æ¡£æˆ–è€…ç½‘ä¸Šçš„æŒ‡å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1532357075,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":15578,"user_name":"å°å¡å‘å‰å†²","can_delete":false,"product_type":"c1","uid":1124914,"ip_address":"","ucode":"1C8908A61FA00B","user_header":"https://static001.geekbang.org/account/avatar/00/11/2a/32/6354a589.jpg","comment_is_top":false,"comment_ctime":1531308441,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10121243033","product_id":100006701,"comment_content":"ä½¿ç”¨javaagentå¯ä»¥è·å¾—å¯¹è±¡çš„å¤§å°ï¼Œä½†æ˜¯å¼•å…¥æ—¶æœ‰ç‚¹éº»çƒ¦ï¼ŒæŸ¥åˆ°çš„èµ„æ–™éƒ½è¯´éœ€è¦å°†ä»£ç æ”¾åˆ°jaråŒ…ä¸­ï¼Œç„¶ååœ¨å¯åŠ¨æ—¶åŠ ä¸Š -javaagent:jaråŒ…åã€‚<br>æ”¾ä¸çŸ¥é“è¿™ä¸ªç®—ä¸ç®—ã€‚","like_count":2},{"had_liked":false,"id":269018,"user_name":"Zm","can_delete":false,"product_type":"c1","uid":1448893,"ip_address":"","ucode":"831FF80F07E965","user_header":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKj4w4lW7ibGEVxPv8wS1CrXKDeBz3RAaAdISxQSD23uUpV3wicsIMepaYZE8GzRcWmSpjet5NDN4MA/132","comment_is_top":false,"comment_ctime":1608473585,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5903440881","product_id":100006701,"comment_content":"tlabä¸ä¸€å®šæ˜¯startåˆ°endå°±ä¼šå¼€è¾Ÿæ–°çš„ç©ºé—´ï¼Œå¯ä»¥å¯¹å…¶è®¾ç½®å‚æ•°ï¼Œå…è®¸æµªè´¹çš„ç©ºé—´ä¸º800kbï¼Œå‡è®¾å‰©ä½™1mï¼Œæ–°æ¥ä¸€ä¸ªå¯¹è±¡ä¸º1.2mï¼Œåˆ™åœ¨æ­£å¸¸çš„å †ä¸Šåˆ†é…ï¼Œç„¶åå†æ¥ä¸€ä¸ª500kbçš„å¯¹è±¡è¿˜ä¼šåœ¨è¯¥çº¿ç¨‹åˆ†é…å¥½çš„ç©ºé—´ä¸Šåˆ†é…ï¼Œè¿™æ—¶è¿˜å‰©500kbå°äºå…è®¸æµªè´¹çš„ç©ºé—´800kbï¼Œå°±ä¼šå¯¹è¯¥çº¿ç¨‹é‡æ–°åˆ†é…ã€‚","like_count":1},{"had_liked":false,"id":174871,"user_name":"rike","can_delete":false,"product_type":"c1","uid":1583833,"ip_address":"","ucode":"920AAD0BD9245C","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/E3XKbwTv6WTssolgqZjZCkiazHgl2IdBYfwVfAcB7Ff3krsIQeBIBFQLQE1Kw91LFbl3lic2EzgdfNiciaYDlJlELA/132","comment_is_top":false,"comment_ctime":1580443595,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5875410891","product_id":100006701,"comment_content":"Eden å’Œ Survivor çš„å¤§å°æ˜¯æŒ‰ç…§æ¯”ä¾‹è®¾ç½®çš„ï¼Œå¦‚æœ SurvivorRatio æ˜¯ 8ï¼Œé‚£ä¹ˆ Survivor åŒºåŸŸå°±æ˜¯ Eden çš„ 1&#47;8 å¤§å°ï¼Œä¹Ÿå°±æ˜¯æ–°ç”Ÿä»£çš„ 1&#47;10ï¼Œå› ä¸º YoungGen=Eden + 2*Survivor<br>â€œSurvivor åŒºåŸŸå°±æ˜¯ Eden çš„ 1&#47;8 å¤§å°â€ï¼Œè¿™é‡Œçš„Survivoræ˜¯æŒ‡å…¶ä¸­çš„s0æˆ–s1ï¼Œè¿˜æ˜¯ä¸¤ä¸ªåŠ èµ·æ¥ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1330065,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/N0NACGUr8dNAbN6BdiagPHBaB0EnyDsI9zWpwJteqTY38apOEnTOA7JkBAQnzYKJBgxu3Q8YMUILwLAB6camn4w/132","nickname":"Swing","note":"","ucode":"55FCA9ECEFBBEB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":218487,"discussion_content":"å•ä¸ªå•Šã€‚ã€‚ã€‚æ‰€ä»¥æ˜¯ 8ï¼š1ï¼š1","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585662461,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":96901,"user_name":"Liu Xian","can_delete":false,"product_type":"c1","uid":1131992,"ip_address":"","ucode":"062DB9CB2AFA49","user_header":"https://static001.geekbang.org/account/avatar/00/11/45/d8/5f9cb4e4.jpg","comment_is_top":false,"comment_ctime":1558532080,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5853499376","product_id":100006701,"comment_content":"åˆ†æè¿‡ä¸€æ¬¡Androidä¸Šçš„å †å¤–å†…å­˜OOMï¼Œæ˜¯é€šè¿‡&#47;proc&#47;pid&#47;mapsæ–‡ä»¶é‡Œæ‰¾åˆ°çš„çº¿ç´¢ã€‚åœ¨Linuxå’ŒAndroidä¸Šå †å¤–å†…å­˜åŸºæœ¬éƒ½æ˜¯é€šè¿‡æ“ä½œç³»ç»Ÿçš„mmapæ¥å£ä»å†…å­˜æ˜ å°„åŒºåˆ†é…çš„ï¼Œæ‰€ä»¥mapsæ–‡ä»¶ä¹Ÿå¯ä»¥æä¾›ä¸€äº›åˆ†æçº¿ç´¢ã€‚","like_count":1},{"had_liked":false,"id":16880,"user_name":"ä»£ç ç‹‚å¾’","can_delete":false,"product_type":"c1","uid":1030100,"ip_address":"","ucode":"F5918543E90321","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b7/d4/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1532272350,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5827239646","product_id":100006701,"comment_content":"è€å¸ˆï¼Œéº»çƒ¦å’¨è¯¢ä¸‹ï¼Œåƒjconsoleå’Œjmcè¿™äº›å›¾å½¢åŒ–çš„å·¥å…·ä¸é€‚ç”¨äºlinux æœåŠ¡å™¨ç¯å¢ƒä¸‹ä½¿ç”¨å§ï¼Œæˆ‘è¯•äº†ä¸‹è²Œä¼¼å¹¶æ²¡æœ‰ååº”ï¼Œæ‰€ä»¥å¯¹æœåŠ¡å™¨ç¯å¢ƒå†…å­˜ç›‘æ§æˆ–è€…é—®é¢˜è·Ÿè¸ªï¼Œæœ‰ä»€ä¹ˆå¥½çš„å·¥å…·å‘¢ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1047637,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJcwXucibksEYWRmibTZj9pb3d5ibfVQHFS9shvJmgMgtN3BM3r9qiaL5YTZSFdLvPZiaEHfBia4dFODVqw/132","nickname":"åŒ—å›½éª‘å£«","note":"","ucode":"AC657FCA2014ED","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":345678,"discussion_content":"ç”¨ç³»ç»Ÿå·¥å…·ï¼Œtop,vmstat,netstat,ss,pmap,perf,gdbç­‰ã€‚è¿˜å¯ä»¥ç”¨æ™®ç½—ç±³ä¿®æ–¯ ä¸“ä¸šçš„ç›‘æ§å·¥å…·ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611759036,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":15150,"user_name":"å¼ ç®(å¤§åœ£)","can_delete":false,"product_type":"c1","uid":1111343,"ip_address":"","ucode":"D567C4BE87D116","user_header":"https://static001.geekbang.org/account/avatar/00/10/f5/2f/56117bab.jpg","comment_is_top":false,"comment_ctime":1530934334,"is_pvip":false,"replies":[{"id":"5108","content":"çœ‹å…·ä½“é€‰æ‹©ï¼Œæ¯”å¦‚G1 gcï¼Œä¼šæœ‰å•ç‹¬çš„regionæ”¾å¤§å¯¹è±¡ï¼Œç”šè‡³æœ‰å¯èƒ½æ˜¯å æœ‰ä¸åªä¸€ä¸ªregionï¼›æ‰€ä»¥ï¼Œæ–‡ç« æ˜¯ä¸ªæé†’ï¼Œå…·ä½“è¿˜æ˜¯è¦çœ‹è‡ªå·±çš„éœ€è¦å»æ·±å…¥<br>","user_name":"ä½œè€…å›å¤","user_name_real":"æ¨æ™“å³°","uid":"1009360","ctime":1530972374,"ip_address":"","comment_id":15150,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5825901630","product_id":100006701,"comment_content":"å½“ç„¶ï¼Œä¹Ÿæœ‰ç‰¹æ®Šæƒ…å†µï¼Œæˆ‘ä»¬çŸ¥é“æ™®é€šçš„å¯¹è±¡ä¼šè¢«åˆ†é…åœ¨ TLAB ä¸Šï¼›å¦‚æœå¯¹è±¡è¾ƒå¤§ï¼ŒJVM ä¼šè¯•å›¾ç›´æ¥åˆ†é…åœ¨ Eden å…¶ä»–ä½ç½®ä¸Šï¼›å¦‚æœå¯¹è±¡å¤ªå¤§ï¼Œå®Œå…¨æ— æ³•åœ¨æ–°ç”Ÿä»£æ‰¾åˆ°è¶³å¤Ÿé•¿çš„è¿ç»­ç©ºé—²ç©ºé—´ï¼ŒJVM å°±ä¼šç›´æ¥åˆ†é…åˆ°è€å¹´ä»£ã€‚<br><br>è¿™é‡Œçš„è¾ƒå¤§å…·ä½“ä¼šåˆ†é…åˆ°edençš„å“ªä¸ªä½ç½®å‘¢ï¼Œè¯·æ¨å…„æŒ‡æ•™ä¸‹","like_count":1,"discussions":[{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420257,"discussion_content":"çœ‹å…·ä½“é€‰æ‹©ï¼Œæ¯”å¦‚G1 gcï¼Œä¼šæœ‰å•ç‹¬çš„regionæ”¾å¤§å¯¹è±¡ï¼Œç”šè‡³æœ‰å¯èƒ½æ˜¯å æœ‰ä¸åªä¸€ä¸ªregionï¼›æ‰€ä»¥ï¼Œæ–‡ç« æ˜¯ä¸ªæé†’ï¼Œå…·ä½“è¿˜æ˜¯è¦çœ‹è‡ªå·±çš„éœ€è¦å»æ·±å…¥\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1530972374,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":353272,"user_name":"æœ¨æ§¿èŠ±","can_delete":false,"product_type":"c1","uid":2056833,"ip_address":"ä¸Šæµ·","ucode":"FDBCA340ED95A6","user_header":"https://static001.geekbang.org/account/avatar/00/1f/62/81/69b09ed8.jpg","comment_is_top":false,"comment_ctime":1659324988,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1659324988","product_id":100006701,"comment_content":"å¦‚ä½•åˆç†è®¾ç½®javaè¿›ç¨‹çš„å †å†…å­˜å¤§å°å‘¢ï¼Ÿåœ¨å¤šè¿›ç¨‹æœºå™¨ä¸Šï¼Œè®¾ç½®å¤ªå¤§ä¼šé™è´¹èµ„æºï¼Œè®¾ç½®å¤ªå°åˆæ€•è¿è¡Œæ—¶ä¸å¤Ÿç”¨","like_count":0},{"had_liked":false,"id":174873,"user_name":"rike","can_delete":false,"product_type":"c1","uid":1583833,"ip_address":"","ucode":"920AAD0BD9245C","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/E3XKbwTv6WTssolgqZjZCkiazHgl2IdBYfwVfAcB7Ff3krsIQeBIBFQLQE1Kw91LFbl3lic2EzgdfNiciaYDlJlELA/132","comment_is_top":false,"comment_ctime":1580443644,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1580443644","product_id":100006701,"comment_content":"Compiler éƒ¨åˆ†ï¼Œå°±æ˜¯ JIT çš„å¼€é”€ï¼Œæ˜¾ç„¶å…³é—­ TieredCompilation ä¼šé™ä½å†…å­˜ä½¿ç”¨ã€‚<br>æŒ‰ç…§ä¸Šé¢è®²çš„ï¼ŒåŠ ä¸Šå‚æ•°-XX:-TieredCompilationååè€Œå˜å¤§ï¼Œjdk11ï¼Œæ‰§è¡Œä¸‹é¢ä¸¤ä¸ªå‘½ä»¤å¯¹æ¯”çš„ç»“æœ<br>java -XX:NativeMemoryTracking=summary -XX:+UnlockDiagnosticVMOptions -XX:+PrintNMTStatistics HelloWorld<br>Compiler (reserved=133KB, committed=133KB)<br>                            (malloc=2KB #42)<br>                            (arena=131KB #5)<br><br>java -XX:NativeMemoryTracking=summary -XX:+UnlockDiagnosticVMOptions -XX:+PrintNMTStatistics -XX:-TieredCompilation -XX:+UseParallelGC HelloWorld<br>Compiler (reserved=2180KB, committed=2180KB)<br>                            (malloc=1KB #30)<br>                            (arena=2179KB #11)","like_count":0},{"had_liked":false,"id":174872,"user_name":"rike","can_delete":false,"product_type":"c1","uid":1583833,"ip_address":"","ucode":"920AAD0BD9245C","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/E3XKbwTv6WTssolgqZjZCkiazHgl2IdBYfwVfAcB7Ff3krsIQeBIBFQLQE1Kw91LFbl3lic2EzgdfNiciaYDlJlELA/132","comment_is_top":false,"comment_ctime":1580443623,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1580443623","product_id":100006701,"comment_content":"åœ¨ JVM å†…éƒ¨ï¼Œå¦‚æœ Xms å°äº Xmxï¼Œå †çš„å¤§å°å¹¶ä¸ä¼šç›´æ¥æ‰©å±•åˆ°å…¶ä¸Šé™ï¼Œä¹Ÿå°±æ˜¯è¯´ä¿ç•™çš„ç©ºé—´ï¼ˆreservedï¼‰å¤§äºå®é™…èƒ½å¤Ÿä½¿ç”¨çš„ç©ºé—´ï¼ˆcommittedï¼‰ã€‚å½“å†…å­˜éœ€æ±‚ä¸æ–­å¢é•¿çš„æ—¶å€™ï¼ŒJVM ä¼šé€æ¸æ‰©å±•æ–°ç”Ÿä»£ç­‰åŒºåŸŸçš„å¤§å°ï¼Œæ‰€ä»¥ Virtual åŒºåŸŸä»£è¡¨çš„å°±æ˜¯æš‚æ—¶ä¸å¯ç”¨ï¼ˆuncommittedï¼‰çš„ç©ºé—´ã€‚<br>è¿™é‡Œçš„Virtual åŒºåŸŸæ²¡çœ‹æ‡‚","like_count":0},{"had_liked":false,"id":83948,"user_name":"Jeffrey","can_delete":false,"product_type":"c1","uid":1240396,"ip_address":"","ucode":"022C19CE0B3F01","user_header":"https://static001.geekbang.org/account/avatar/00/12/ed/4c/4db1d58b.jpg","comment_is_top":false,"comment_ctime":1554737053,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1554737053","product_id":100006701,"comment_content":"-Xmså’Œ-Xmxä¸ºä»€ä¹ˆå¾ˆå¤šæ–‡ç« éƒ½å»ºè®®è®¾ç½®æˆä¸€æ ·å¤§ï¼Ÿæœ‰çš„è§£é‡Šæ˜¯å¢é•¿è¿‡ç¨‹ä¸­ä¼šå¼•å‘Full Gcï¼Œè¯·é—®è€å¸ˆæ˜¯è¿™æ ·ä¹ˆï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1123468,"avatar":"https://static001.geekbang.org/account/avatar/00/11/24/8c/9f38c9ac.jpg","nickname":"æ—é£è‡ªåœ¨","note":"","ucode":"C347C10040FD55","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":184949,"discussion_content":"é˜²æ­¢å †åŠ¨æ€æ‰©å¢ï¼Œé¿å…æ¯æ¬¡GCå®Œä¹‹åé‡æ–°è®¡ç®—å †å¤§å°ï¼Œå‡å°‘å¼€é”€","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1582590269,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}