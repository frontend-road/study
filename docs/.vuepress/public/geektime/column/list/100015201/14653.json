{"id":14653,"title":"06 | 白话容器基础（二）：隔离与限制","content":"<p>你好，我是张磊。我今天和你分享的主题是：白话容器基础之隔离与限制。</p><p>在上一篇文章中，我详细介绍了Linux容器中用来实现“隔离”的技术手段：Namespace。而通过这些讲解，你应该能够明白，<strong>Namespace技术实际上修改了应用进程看待整个计算机“视图”，即它的“视线”被操作系统做了限制，只能“看到”某些指定的内容</strong>。但对于宿主机来说，这些被“隔离”了的进程跟其他进程并没有太大区别。</p><p>说到这一点，相信你也能够知道我在上一篇文章最后给你留下的第一个思考题的答案了：在之前虚拟机与容器技术的对比图里，不应该把Docker Engine或者任何容器管理工具放在跟Hypervisor相同的位置，因为它们并不像Hypervisor那样对应用进程的隔离环境负责，也不会创建任何实体的“容器”，真正对隔离环境负责的是宿主机操作系统本身：</p><p><img src=\"https://static001.geekbang.org/resource/image/d1/96/d1bb34cda8744514ba4c233435bf4e96.jpg?wh=2242*1163\" alt=\"\"></p><p>所以，在这个对比图里，我们应该把Docker画在跟应用同级别并且靠边的位置。这意味着，用户运行在容器里的应用进程，跟宿主机上的其他进程一样，都由宿主机操作系统统一管理，只不过这些被隔离的进程拥有额外设置过的Namespace参数。而Docker项目在这里扮演的角色，更多的是旁路式的辅助和管理工作。</p><!-- [[[read_end]]] --><p>我在后续分享CRI和容器运行时的时候还会专门介绍，其实像Docker这样的角色甚至可以去掉。</p><p>这样的架构也解释了为什么Docker项目比虚拟机更受欢迎的原因。</p><p>这是因为，使用虚拟化技术作为应用沙盒，就必须要由Hypervisor来负责创建虚拟机，这个虚拟机是真实存在的，并且它里面必须运行一个完整的Guest OS才能执行用户的应用进程。这就不可避免地带来了额外的资源消耗和占用。</p><p>根据实验，一个运行着CentOS的KVM虚拟机启动后，在不做优化的情况下，虚拟机自己就需要占用100~200  MB内存。此外，用户应用运行在虚拟机里面，它对宿主机操作系统的调用就不可避免地要经过虚拟化软件的拦截和处理，这本身又是一层性能损耗，尤其对计算资源、网络和磁盘I/O的损耗非常大。</p><p>而相比之下，容器化后的用户应用，却依然还是一个宿主机上的普通进程，这就意味着这些因为虚拟化而带来的性能损耗都是不存在的；而另一方面，使用Namespace作为隔离手段的容器并不需要单独的Guest OS，这就使得容器额外的资源占用几乎可以忽略不计。</p><p>所以说，<strong>“敏捷”和“高性能”是容器相较于虚拟机最大的优势，也是它能够在PaaS这种更细粒度的资源管理平台上大行其道的重要原因。</strong></p><p>不过，有利就有弊，基于Linux Namespace的隔离机制相比于虚拟化技术也有很多不足之处，其中最主要的问题就是：<strong>隔离得不彻底。</strong></p><p><span class=\"orange\">首先，既然容器只是运行在宿主机上的一种特殊的进程，那么多个容器之间使用的就还是同一个宿主机的操作系统内核。</span></p><p>尽管你可以在容器里通过Mount Namespace单独挂载其他不同版本的操作系统文件，比如CentOS或者Ubuntu，但这并不能改变共享宿主机内核的事实。这意味着，如果你要在Windows宿主机上运行Linux容器，或者在低版本的Linux宿主机上运行高版本的Linux容器，都是行不通的。</p><p>而相比之下，拥有硬件虚拟化技术和独立Guest OS的虚拟机就要方便得多了。最极端的例子是，Microsoft的云计算平台Azure，实际上就是运行在Windows服务器集群上的，但这并不妨碍你在它上面创建各种Linux虚拟机出来。</p><p><span class=\"orange\">其次，在Linux内核中，有很多资源和对象是不能被Namespace化的，最典型的例子就是：时间。</span></p><p>这就意味着，如果你的容器中的程序使用settimeofday(2)系统调用修改了时间，整个宿主机的时间都会被随之修改，这显然不符合用户的预期。相比于在虚拟机里面可以随便折腾的自由度，在容器里部署应用的时候，“什么能做，什么不能做”，就是用户必须考虑的一个问题。</p><p>此外，由于上述问题，尤其是共享宿主机内核的事实，容器给应用暴露出来的攻击面是相当大的，应用“越狱”的难度自然也比虚拟机低得多。</p><p>更为棘手的是，尽管在实践中我们确实可以使用Seccomp等技术，对容器内部发起的所有系统调用进行过滤和甄别来进行安全加固，但这种方法因为多了一层对系统调用的过滤，必然会拖累容器的性能。何况，默认情况下，谁也不知道到底该开启哪些系统调用，禁止哪些系统调用。</p><p>所以，在生产环境中，没有人敢把运行在物理机上的Linux容器直接暴露到公网上。当然，我后续会讲到的基于虚拟化或者独立内核技术的容器实现，则可以比较好地在隔离与性能之间做出平衡。</p><p><strong>在介绍完容器的“隔离”技术之后，我们再来研究一下容器的“限制”问题。</strong></p><p>也许你会好奇，我们不是已经通过Linux Namespace创建了一个“容器”吗，为什么还需要对容器做“限制”呢？</p><p>我还是以PID Namespace为例，来给你解释这个问题。</p><p>虽然容器内的第1号进程在“障眼法”的干扰下只能看到容器里的情况，但是宿主机上，它作为第100号进程与其他所有进程之间依然是平等的竞争关系。这就意味着，虽然第100号进程表面上被隔离了起来，但是它所能够使用到的资源（比如CPU、内存），却是可以随时被宿主机上的其他进程（或者其他容器）占用的。当然，这个100号进程自己也可能把所有资源吃光。这些情况，显然都不是一个“沙盒”应该表现出来的合理行为。</p><p>而<strong>Linux Cgroups就是Linux内核中用来为进程设置资源限制的一个重要功能。</strong></p><p>有意思的是，Google的工程师在2006年发起这项特性的时候，曾将它命名为“进程容器”（process container）。实际上，在Google内部，“容器”这个术语长期以来都被用于形容被Cgroups限制过的进程组。后来Google的工程师们说，他们的KVM虚拟机也运行在Borg所管理的“容器”里，其实也是运行在Cgroups“容器”当中。这和我们今天说的Docker容器差别很大。</p><p><strong>Linux Cgroups的全称是Linux Control Group。它最主要的作用，就是限制一个进程组能够使用的资源上限，包括CPU、内存、磁盘、网络带宽等等。</strong></p><p>此外，Cgroups还能够对进程进行优先级设置、审计，以及将进程挂起和恢复等操作。在今天的分享中，我只和你重点探讨它与容器关系最紧密的“限制”能力，并通过一组实践来带你认识一下Cgroups。</p><p>在Linux中，Cgroups给用户暴露出来的操作接口是文件系统，即它以文件和目录的方式组织在操作系统的/sys/fs/cgroup路径下。在Ubuntu 16.04机器里，我可以用mount指令把它们展示出来，这条命令是：</p><pre><code>$ mount -t cgroup \ncpuset on /sys/fs/cgroup/cpuset type cgroup (rw,nosuid,nodev,noexec,relatime,cpuset)\ncpu on /sys/fs/cgroup/cpu type cgroup (rw,nosuid,nodev,noexec,relatime,cpu)\ncpuacct on /sys/fs/cgroup/cpuacct type cgroup (rw,nosuid,nodev,noexec,relatime,cpuacct)\nblkio on /sys/fs/cgroup/blkio type cgroup (rw,nosuid,nodev,noexec,relatime,blkio)\nmemory on /sys/fs/cgroup/memory type cgroup (rw,nosuid,nodev,noexec,relatime,memory)\n...\n</code></pre><p>它的输出结果，是一系列文件系统目录。如果你在自己的机器上没有看到这些目录，那你就需要自己去挂载Cgroups，具体做法可以自行Google。</p><p>可以看到，在/sys/fs/cgroup下面有很多诸如cpuset、cpu、 memory这样的子目录，也叫子系统。这些都是我这台机器当前可以被Cgroups进行限制的资源种类。而在子系统对应的资源种类下，你就可以看到该类资源具体可以被限制的方法。比如，对CPU子系统来说，我们就可以看到如下几个配置文件，这个指令是：</p><pre><code>$ ls /sys/fs/cgroup/cpu\ncgroup.clone_children cpu.cfs_period_us cpu.rt_period_us  cpu.shares notify_on_release\ncgroup.procs      cpu.cfs_quota_us  cpu.rt_runtime_us cpu.stat  tasks\n</code></pre><p>如果熟悉Linux CPU管理的话，你就会在它的输出里注意到cfs_period和cfs_quota这样的关键词。这两个参数需要组合使用，可以用来限制进程在长度为cfs_period的一段时间内，只能被分配到总量为cfs_quota的CPU时间。</p><p>而这样的配置文件又如何使用呢？</p><p>你需要在对应的子系统下面创建一个目录，比如，我们现在进入/sys/fs/cgroup/cpu目录下：</p><pre><code>root@ubuntu:/sys/fs/cgroup/cpu$ mkdir container\nroot@ubuntu:/sys/fs/cgroup/cpu$ ls container/\ncgroup.clone_children cpu.cfs_period_us cpu.rt_period_us  cpu.shares notify_on_release\ncgroup.procs      cpu.cfs_quota_us  cpu.rt_runtime_us cpu.stat  tasks\n</code></pre><p>这个目录就称为一个“控制组”。你会发现，操作系统会在你新创建的container目录下，自动生成该子系统对应的资源限制文件。</p><p>现在，我们在后台执行这样一条脚本：</p><pre><code>$ while : ; do : ; done &amp;\n[1] 226\n</code></pre><p>显然，它执行了一个死循环，可以把计算机的CPU吃到100%，根据它的输出，我们可以看到这个脚本在后台运行的进程号（PID）是226。</p><p>这样，我们可以用top指令来确认一下CPU有没有被打满：</p><pre><code>$ top\n%Cpu0 :100.0 us, 0.0 sy, 0.0 ni, 0.0 id, 0.0 wa, 0.0 hi, 0.0 si, 0.0 st\n</code></pre><p>在输出里可以看到，CPU的使用率已经100%了（%Cpu0 :100.0 us）。</p><p>而此时，我们可以通过查看container目录下的文件，看到container控制组里的CPU quota还没有任何限制（即：-1），CPU period则是默认的100  ms（100000  us）：</p><pre><code>$ cat /sys/fs/cgroup/cpu/container/cpu.cfs_quota_us \n-1\n$ cat /sys/fs/cgroup/cpu/container/cpu.cfs_period_us \n100000\n</code></pre><p>接下来，我们可以通过修改这些文件的内容来设置限制。</p><p>比如，向container组里的cfs_quota文件写入20  ms（20000  us）：</p><pre><code>$ echo 20000 &gt; /sys/fs/cgroup/cpu/container/cpu.cfs_quota_us\n</code></pre><p>结合前面的介绍，你应该能明白这个操作的含义，它意味着在每100  ms的时间里，被该控制组限制的进程只能使用20  ms的CPU时间，也就是说这个进程只能使用到20%的CPU带宽。</p><p>接下来，我们把被限制的进程的PID写入container组里的tasks文件，上面的设置就会对该进程生效了：</p><pre><code>$ echo 226 &gt; /sys/fs/cgroup/cpu/container/tasks \n</code></pre><p>我们可以用top指令查看一下：</p><pre><code>$ top\n%Cpu0 : 20.3 us, 0.0 sy, 0.0 ni, 79.7 id, 0.0 wa, 0.0 hi, 0.0 si, 0.0 st\n</code></pre><p>可以看到，计算机的CPU使用率立刻降到了20%（%Cpu0 : 20.3 us）。</p><p>除CPU子系统外，Cgroups的每一个子系统都有其独有的资源限制能力，比如：</p><ul>\n<li>blkio，为​​​块​​​设​​​备​​​设​​​定​​​I/O限​​​制，一般用于磁盘等设备；</li>\n<li>cpuset，为进程分配单独的CPU核和对应的内存节点；</li>\n<li>memory，为进程设定内存使用的限制。</li>\n</ul><p><strong>Linux Cgroups的设计还是比较易用的，简单粗暴地理解呢，它就是一个子系统目录加上一组资源限制文件的组合</strong>。而对于Docker等Linux容器项目来说，它们只需要在每个子系统下面，为每个容器创建一个控制组（即创建一个新目录），然后在启动容器进程之后，把这个进程的PID填写到对应控制组的tasks文件中就可以了。</p><p>而至于在这些控制组下面的资源文件里填上什么值，就靠用户执行docker run时的参数指定了，比如这样一条命令：</p><pre><code>$ docker run -it --cpu-period=100000 --cpu-quota=20000 ubuntu /bin/bash\n</code></pre><p>在启动这个容器后，我们可以通过查看Cgroups文件系统下，CPU子系统中，“docker”这个控制组里的资源限制文件的内容来确认：</p><pre><code>$ cat /sys/fs/cgroup/cpu/docker/5d5c9f67d/cpu.cfs_period_us \n100000\n$ cat /sys/fs/cgroup/cpu/docker/5d5c9f67d/cpu.cfs_quota_us \n20000\n</code></pre><p>这就意味着这个Docker容器，只能使用到20%的CPU带宽。</p><h2>总结</h2><p>在这篇文章中，我首先介绍了容器使用Linux Namespace作为隔离手段的优势和劣势，对比了Linux容器跟虚拟机技术的不同，进一步明确了“容器只是一种特殊的进程”这个结论。</p><p>除了创建Namespace之外，在后续关于容器网络的分享中，我还会介绍一些其他Namespace的操作，比如看不见摸不着的Linux Namespace在计算机中到底如何表示、一个进程如何“加入”到其他进程的Namespace当中，等等。</p><p>紧接着，我详细介绍了容器在做好了隔离工作之后，又如何通过Linux Cgroups实现资源的限制，并通过一系列简单的实验，模拟了Docker项目创建容器限制的过程。</p><p>通过以上讲述，你现在应该能够理解，一个正在运行的Docker容器，其实就是一个启用了多个Linux Namespace的应用进程，而这个进程能够使用的资源量，则受Cgroups配置的限制。</p><p>这也是容器技术中一个非常重要的概念，即：<strong>容器是一个“单进程”模型。</strong></p><p>由于一个容器的本质就是一个进程，用户的应用进程实际上就是容器里PID=1的进程，也是其他后续创建的所有进程的父进程。这就意味着，在一个容器中，你没办法同时运行两个不同的应用，除非你能事先找到一个公共的PID=1的程序来充当两个不同应用的父进程，这也是为什么很多人都会用systemd或者supervisord这样的软件来代替应用本身作为容器的启动进程。</p><p>但是，在后面分享容器设计模式时，我还会推荐其他更好的解决办法。这是因为容器本身的设计，就是希望容器和应用能够<strong>同生命周期</strong>，这个概念对后续的容器编排非常重要。否则，一旦出现类似于“容器是正常运行的，但是里面的应用早已经挂了”的情况，编排系统处理起来就非常麻烦了。</p><p>另外，跟Namespace的情况类似，Cgroups对资源的限制能力也有很多不完善的地方，被提及最多的自然是/proc文件系统的问题。</p><p>众所周知，Linux下的/proc目录存储的是记录当前内核运行状态的一系列特殊文件，用户可以通过访问这些文件，查看系统以及当前正在运行的进程的信息，比如CPU使用情况、内存占用率等，这些文件也是top指令查看系统信息的主要数据来源。</p><p>但是，你如果在容器里执行top指令，就会发现，它显示的信息居然是宿主机的CPU和内存数据，而不是当前容器的数据。</p><p>造成这个问题的原因就是，/proc文件系统并不知道用户通过Cgroups给这个容器做了什么样的资源限制，即：/proc文件系统不了解Cgroups限制的存在。</p><p>在生产环境中，这个问题必须进行修正，否则应用程序在容器里读取到的CPU核数、可用内存等信息都是宿主机上的数据，这会给应用的运行带来非常大的困惑和风险。这也是在企业中，容器化应用碰到的一个常见问题，也是容器相较于虚拟机另一个不尽如人意的地方。</p><h2>思考题</h2><ol>\n<li>\n<p>你是否知道如何修复容器中的top指令以及/proc文件系统中的信息呢？（提示：lxcfs）</p>\n</li>\n<li>\n<p>在从虚拟机向容器环境迁移应用的过程中，你还遇到哪些容器与虚拟机的不一致问题？</p>\n</li>\n</ol><p>感谢你的收听，欢迎给我留言一起讨论，也欢迎分享给更多的朋友一起阅读。</p>","neighbors":{"left":{"article_title":"05 | 白话容器基础（一）：从进程说开去","id":14642},"right":{"article_title":"07 | 白话容器基础（三）：深入理解容器镜像","id":17921}},"comments":[{"had_liked":false,"id":23021,"user_name":"blackpiglet","can_delete":false,"product_type":"c1","uid":1032928,"ip_address":"","ucode":"58AA8329C91767","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c2/e0/7188aa0a.jpg","comment_is_top":false,"comment_ctime":1536111701,"is_pvip":false,"replies":[{"id":"8333","content":"课代表出现了！","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1536124763,"ip_address":"","comment_id":23021,"utype":1}],"discussion_count":6,"race_medal":0,"score":"2642940998741","product_id":100015201,"comment_content":"1 之前遇到过，但是没有考虑如何解决，临时抱佛脚，查了 lxcfs，尝试回答一下。top 是从 &#47;prof&#47;stats 目录下获取数据，所以道理上来讲，容器不挂载宿主机的该目录就可以了。lxcfs就是来实现这个功能的，做法是把宿主机的 &#47;var&#47;lib&#47;lxcfs&#47;proc&#47;memoinfo 文件挂载到Docker容器的&#47;proc&#47;meminfo位置后。容器中进程读取相应文件内容时，LXCFS的FUSE实现会从容器对应的Cgroup中读取正确的内存限制。从而使得应用获得正确的资源约束设定。kubernetes环境下，也能用，以ds 方式运行 lxcfs ，自动给容器注入争取的 proc 信息。<br>2 用的是vanilla kubernetes，遇到的主要挑战就是性能损失和多租户隔离问题，性能损失目前没想到好办法，可能的方案是用ipvs 替换iptables ，以及用 RPC 替换 rest。多租户隔离也没有很好的方法，现在是让不同的namespace调度到不同的物理机上。也许 rancher和openshift已经多租户隔离。","like_count":616,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423372,"discussion_content":"课代表出现了！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536124763,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1074252,"avatar":"https://static001.geekbang.org/account/avatar/00/10/64/4c/f5f95f9b.jpg","nickname":"阳光不锈","note":"","ucode":"7B7033E758D9E7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":38586,"discussion_content":"top的数据来源应该是/proc/stat吧？","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1571806633,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2112194,"avatar":"https://static001.geekbang.org/account/avatar/00/20/3a/c2/b88ac633.jpg","nickname":"神经蛙","note":"","ucode":"99D6D377589CC3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1074252,"avatar":"https://static001.geekbang.org/account/avatar/00/10/64/4c/f5f95f9b.jpg","nickname":"阳光不锈","note":"","ucode":"7B7033E758D9E7","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":326907,"discussion_content":"是的,这里应该是打错了","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1605697288,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":38586,"ip_address":""},"score":326907,"extra":""}]},{"author":{"id":2649310,"avatar":"https://static001.geekbang.org/account/avatar/00/28/6c/de/1934abe6.jpg","nickname":"刘超","note":"","ucode":"78B617AADA9035","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":391100,"discussion_content":"为什么我用lxcfs，deamonset部署后，/var/lib/lxcfs/proc/ 下不是文件，都是目录，导致挂载失败。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630294859,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1837179,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/08/7b/7f086546.jpg","nickname":"Alex","note":"","ucode":"70806CEA9AB15E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":380506,"discussion_content":"mark\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1624536771,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1020401,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/91/f1/16ada768.jpg","nickname":"杉枫","note":"","ucode":"E2B21115353B33","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":350358,"discussion_content":"好东西","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1613823702,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":24063,"user_name":"Jeff.W","can_delete":false,"product_type":"c1","uid":1140420,"ip_address":"","ucode":"2043F83FB7B39C","user_header":"https://static001.geekbang.org/account/avatar/00/11/66/c4/038f9325.jpg","comment_is_top":false,"comment_ctime":1536798077,"is_pvip":false,"discussion_count":17,"race_medal":0,"score":"1582084763005","product_id":100015201,"comment_content":"可怜的容器，被Namespace欺骗，又被Cgroups限制，在这样的环境下，还发挥着自己生命的意义-与应用程序同生命周期，同生共死～","like_count":369,"discussions":[{"author":{"id":2086539,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/d6/8b/516be4be.jpg","nickname":"wujiezero","note":"","ucode":"3A4F1E161659FA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":294244,"discussion_content":"书店里没有你写的书，于是我砸了书店","likes_number":20,"is_delete":false,"is_hidden":false,"ctime":1595838077,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1170143,"avatar":"https://static001.geekbang.org/account/avatar/00/11/da/df/87464e34.jpg","nickname":"IS Aaron","note":"","ucode":"5FA00F20C17DC9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":377250,"discussion_content":"可惜了一个文科生 , 来干理科的活 , 一代文豪就此被埋没","likes_number":11,"is_delete":false,"is_hidden":false,"ctime":1622560132,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2440848,"avatar":"https://static001.geekbang.org/account/avatar/00/25/3e/90/c86ec4ca.jpg","nickname":"XCF","note":"","ucode":"00A895B0B4CA3E","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":415183,"discussion_content":"当初你要退出文坛，鲁迅先生本是不同意的。","likes_number":6,"is_delete":false,"is_hidden":false,"ctime":1637023897,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1705468,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/05/fc/bceb3f2b.jpg","nickname":"开心哥","note":"","ucode":"D44C1F03B23C5A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":290815,"discussion_content":"冬雷震震夏雨雪，才敢与君绝","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1594611644,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1053892,"avatar":"https://static001.geekbang.org/account/avatar/00/10/14/c4/9ab2ee00.jpg","nickname":"沉醉寒风","note":"","ucode":"7344F4F5F1F17C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":173252,"discussion_content":"这个很生动","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1581841780,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1367249,"avatar":"https://static001.geekbang.org/account/avatar/00/14/dc/d1/281614e0.jpg","nickname":"freedom","note":"","ucode":"CF50B2C29138FD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":369764,"discussion_content":"it人的浪漫","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1619151006,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2057888,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/66/a0/df6b170f.jpg","nickname":"Arris","note":"","ucode":"DCD803397C274E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":365723,"discussion_content":"我虐容器千百遍，容器待我如初恋","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1617871310,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1341692,"avatar":"https://static001.geekbang.org/account/avatar/00/14/78/fc/f7d59501.jpg","nickname":"Hoboson!","note":"","ucode":"D593C3EB90E136","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":78918,"discussion_content":"评论经典","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1576032512,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1192265,"avatar":"","nickname":"sam","note":"","ucode":"583F1E01453930","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":303592,"discussion_content":"不去当作家真是屈才了","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1599308974,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1312644,"avatar":"","nickname":"容若","note":"","ucode":"902863F0B1B921","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583890,"discussion_content":"阁下当初退出文坛我是极力反对的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660466438,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"北京"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1759325,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/d8/5d/07dfb3b5.jpg","nickname":"杯莫停","note":"","ucode":"4FA1D5CBBEF702","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581659,"discussion_content":"楚门的世界","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658910524,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":3019204,"avatar":"https://static001.geekbang.org/account/avatar/00/2e/11/c4/2a642ab2.jpg","nickname":"容斋六笔","note":"","ucode":"61F2F5FD983B62","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":576606,"discussion_content":"了不起的Docker容器，灵活地把linux内核运用了起来。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655701352,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1152805,"avatar":"https://static001.geekbang.org/account/avatar/00/11/97/25/eaa3132e.jpg","nickname":"小宝儿","note":"","ucode":"EF641095083111","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":409911,"discussion_content":"不就是个进程而已嘛","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635538239,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1516167,"avatar":"https://static001.geekbang.org/account/avatar/00/17/22/87/e7bd2acf.jpg","nickname":"DZZ","note":"","ucode":"C8E4C4B089BCE2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":386459,"discussion_content":"经典","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627603683,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2026859,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/ed/6b/89079e09.jpg","nickname":"void","note":"","ucode":"E507109DE7D6BC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":364434,"discussion_content":"秀儿","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617469203,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2015816,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJc7YGNz1rwHp9sOkvarNtQsYgOOFeZh7kzAK2t7auaOZVpYB9Nib8LwV16OVa4WYiaBP6zZjrYADUQ/132","nickname":"Geek_494181","note":"","ucode":"9F9A6CB3BD479C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":273459,"discussion_content":"+1","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590458144,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1804924,"avatar":"","nickname":"Carlton","note":"","ucode":"36F29A16B77A79","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":138869,"discussion_content":"+1","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579268561,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":23015,"user_name":"atompi","can_delete":false,"product_type":"c1","uid":1212311,"ip_address":"","ucode":"D13F2DA4E41BA1","user_header":"https://static001.geekbang.org/account/avatar/00/12/7f/97/5acd3276.jpg","comment_is_top":false,"comment_ctime":1536110516,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"431032840116","product_id":100015201,"comment_content":"1. 把宿主机的 &#47;var&#47;lib&#47;lxcfs&#47;proc&#47;* 文件挂载到容器的&#47;proc&#47;*  <br>2. 既然有人提到了Windows运行容器的疑问，那就从这里说开。虚拟机可以通过vbox、VMware、Hyper-V直接运行在各种支持虚拟化的操作系统上，而 Linux 容器只能运行在Linux内核的操作系统之上，而且内核版本也有所限制（详见namespace、Cgroups在Linux内核中的发展史）。对于前面仁兄所说的Docker可以在Windows10上运行，并不是直接运行在Windows操作系统中，而是通过Hyper-V的支持，借助docker-machine，相当于是在Linux内核的虚拟机上运行的容器，实际上还是跑在Linux内核之上。","like_count":101,"discussions":[{"author":{"id":1766127,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/f2/ef/014389c5.jpg","nickname":"李明威","note":"","ucode":"199C95F3A4C1A3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":555188,"discussion_content":"现在好久都是已经使用WSL2了，您回答这个问题的时候win10还没有wsl2","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1646806106,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1353338,"avatar":"https://static001.geekbang.org/account/avatar/00/14/a6/7a/ecaf598f.jpg","nickname":"契卡","note":"","ucode":"D0E3B93F96E744","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1766127,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/f2/ef/014389c5.jpg","nickname":"李明威","note":"","ucode":"199C95F3A4C1A3","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":584078,"discussion_content":"WSL2其实也是用的Hyper-V的底层跑一个Linux内核，不过严格来说使用的是Hyper-V的子集“虚拟机平台”。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1660626736,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":555188,"ip_address":"浙江"},"score":584078,"extra":""}]}]},{"had_liked":false,"id":23608,"user_name":"三七","can_delete":false,"product_type":"c1","uid":1189964,"ip_address":"","ucode":"30A1EAAA2064D0","user_header":"https://static001.geekbang.org/account/avatar/00/12/28/4c/dc20161e.jpg","comment_is_top":false,"comment_ctime":1536543843,"is_pvip":false,"replies":[{"id":"8589","content":"这个问题确实很普遍","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1536565007,"ip_address":"","comment_id":23608,"utype":1}],"discussion_count":8,"race_medal":0,"score":"358018829411","product_id":100015201,"comment_content":"&#47;proc文件系统的问题我好像遇到过这个坑..当时在容器上运行的java应用，由于当时jvm参数没正确配置上，就用默认的，而容器设置的内存为4g，最后oom了，当时用命令查看容器的内存占用情况，竟然发现内存竟然有60多g。 那应该显示的是宿主机的内存了，jvm按照宿主机内存大小分配的默认内存应该大于4g 所以还没full gc 就oom了","like_count":84,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423636,"discussion_content":"这个问题确实很普遍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536565007,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1019739,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8f/5b/2f16ca95.jpg","nickname":"悟空","note":"","ucode":"69C990105DEF47","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":331495,"discussion_content":"学习了一个坑 哈哈 后面方便自己避坑了 兄弟","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1606887704,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1133936,"avatar":"https://static001.geekbang.org/account/avatar/00/11/4d/70/7d736d5f.jpg","nickname":"小动物很困","note":"","ucode":"49A727277A37E1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":589724,"discussion_content":"我用docker都不做容器的资源限制,java都在jvm参数做限制","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1665284808,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"辽宁"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1109389,"avatar":"https://static001.geekbang.org/account/avatar/00/10/ed/8d/377c106a.jpg","nickname":"KW💤","note":"","ucode":"290DD7016F4EE0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":574999,"discussion_content":"发生oom之前必然会full gc啊","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1654516810,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1060974,"avatar":"https://static001.geekbang.org/account/avatar/00/10/30/6e/b82294e8.jpg","nickname":"廖锐","note":"","ucode":"B5057E4076A1A9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":537767,"discussion_content":"容器限定4g，为什么跑出了60g呢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639181037,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2028811,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/f5/0b/73628618.jpg","nickname":"兔嘟嘟","note":"","ucode":"5A9042B4C7670C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1060974,"avatar":"https://static001.geekbang.org/account/avatar/00/10/30/6e/b82294e8.jpg","nickname":"廖锐","note":"","ucode":"B5057E4076A1A9","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":544245,"discussion_content":"jvm以为自己有很多内存，所以gc阈值比较高，导致oom","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1641447979,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":537767,"ip_address":""},"score":544245,"extra":""}]},{"author":{"id":1261493,"avatar":"https://static001.geekbang.org/account/avatar/00/13/3f/b5/5fe77e16.jpg","nickname":"不经意间","note":"","ucode":"C39D98697ACB8B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":391663,"discussion_content":"所以，是容器启动时设置的4g内存限制，没有生效吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630569611,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2941761,"avatar":"","nickname":"Geek_16ad58","note":"","ucode":"1180D9676FE595","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1261493,"avatar":"https://static001.geekbang.org/account/avatar/00/13/3f/b5/5fe77e16.jpg","nickname":"不经意间","note":"","ucode":"C39D98697ACB8B","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":556176,"discussion_content":"就是因为容器设置的4g生效了才导致的oom","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647239668,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":391663,"ip_address":""},"score":556176,"extra":""}]}]},{"had_liked":false,"id":23006,"user_name":"monkey","can_delete":false,"product_type":"c1","uid":1026569,"ip_address":"","ucode":"5FCB1D4807D555","user_header":"https://static001.geekbang.org/account/avatar/00/0f/aa/09/b28091ac.jpg","comment_is_top":false,"comment_ctime":1536109521,"is_pvip":false,"replies":[{"id":"8322","content":"我跟编辑沟通一下","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1536124167,"ip_address":"","comment_id":23006,"utype":1}],"discussion_count":31,"race_medal":0,"score":"280708983761","product_id":100015201,"comment_content":"对cgroup有了更深的了解，作者能帮所有订阅的同学建个微信群方便大家交流心得吗？买的其他课程很多老师都建了交流群氛围挺好的哈。","like_count":65,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423365,"discussion_content":"我跟编辑沟通一下","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536124167,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1363634,"avatar":"https://static001.geekbang.org/account/avatar/00/14/ce/b2/1f914527.jpg","nickname":"海盗船长","note":"","ucode":"ECB28BA21A4113","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":292886,"discussion_content":"加我，我来建个 fino_redhat","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1595378092,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1785821,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3f/dd/f918566d.jpg","nickname":"夏目","note":"","ucode":"038B4FDFE8A306","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":263979,"discussion_content":"哈哈哈，同问的朋友好多呀","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1589275339,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1276801,"avatar":"https://static001.geekbang.org/account/avatar/00/13/7b/81/d15030e3.jpg","nickname":"狗狗","note":"","ucode":"CBA016CFDB3D33","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":245720,"discussion_content":"同问，有群吗","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1587694747,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1813643,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/ac/8b/5f02056a.jpg","nickname":"Mr.Wang","note":"","ucode":"2BBB013B26B2D3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":163294,"discussion_content":"请问有群了吗","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1581067661,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1200386,"avatar":"https://static001.geekbang.org/account/avatar/00/12/51/02/0c895160.jpg","nickname":"xia.luo","note":"","ucode":"849C655847EB76","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":158139,"discussion_content":"同问","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1580555352,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1483290,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLzSRrK59sydmibeIsicOK7cbNzHTqpIcTt4Ie1SSibfJicINDUgHsn5Eibo7rQdWZtHr53xo1ibbiarXMEA/132","nickname":"Geek_8258fb","note":"","ucode":"2DA6C25F7406C4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":115889,"discussion_content":"后面有结果了么","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1578042945,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1169737,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d9/49/09691c94.jpg","nickname":"唐国舜","note":"","ucode":"9024874D34C442","race_medal":2,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":112794,"discussion_content":"同问","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1577883514,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1557943,"avatar":"https://static001.geekbang.org/account/avatar/00/17/c5/b7/f900755b.jpg","nickname":"The last stand man！","note":"","ucode":"5159FCFD02449A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":58394,"discussion_content":"微信群号多少","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1574673365,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1284900,"avatar":"https://static001.geekbang.org/account/avatar/00/13/9b/24/a131714e.jpg","nickname":"Alvin","note":"","ucode":"8CF85DA34B3CEC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":21575,"discussion_content":"同问","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1569502207,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1043375,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/eb/af/b893c7e2.jpg","nickname":"jacky","note":"","ucode":"CA680B02320539","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3917,"discussion_content":"微信群有吗？我是后面订阅的","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1564979840,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":4,"child_discussions":[{"author":{"id":1620339,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b9/73/e1933f85.jpg","nickname":"小八爪","note":"","ucode":"CD0283BC873129","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1043375,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/eb/af/b893c7e2.jpg","nickname":"jacky","note":"","ucode":"CA680B02320539","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5164,"discussion_content":"同问","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1566019717,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":3917,"ip_address":""},"score":5164,"extra":""},{"author":{"id":1284073,"avatar":"https://static001.geekbang.org/account/avatar/00/13/97/e9/c7029c58.jpg","nickname":"mi","note":"","ucode":"080117E4DF67EF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1620339,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b9/73/e1933f85.jpg","nickname":"小八爪","note":"","ucode":"CD0283BC873129","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6143,"discussion_content":"同问","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1566724546,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":5164,"ip_address":""},"score":6143,"extra":""},{"author":{"id":1700262,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epibr0LAy3JF3hjibhnGLyBNj1b985RXiby9FInxYRDl5jf5p0klcZGZuQL7VnLfmIJDtnqBUGPycMSA/132","nickname":"荣埃","note":"","ucode":"6C9A73474322EA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1284073,"avatar":"https://static001.geekbang.org/account/avatar/00/13/97/e9/c7029c58.jpg","nickname":"mi","note":"","ucode":"080117E4DF67EF","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":34596,"discussion_content":"同问","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1571209218,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":6143,"ip_address":""},"score":34596,"extra":""}]},{"author":{"id":2662520,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/0nluCqghffOG5MibwfoS4KicKPQbJibu156fOx4x500cgK7jwUcibB3P3ZjQkzyabRfGIMSib0oSiceZMibX9AaMwicMEg/132","nickname":"Geek_64063a","note":"","ucode":"FD98792FDD5F62","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":564534,"discussion_content":"有群吗","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650271102,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2887988,"avatar":"","nickname":"银川体检代检","note":"","ucode":"ED5376DD1684BF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":544834,"discussion_content":"结果呢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641727630,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1039161,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/db/39/24b4bbf9.jpg","nickname":"let it be","note":"","ucode":"19B7C627D85B6E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":537455,"discussion_content":"有群吗，想进","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639062186,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1176426,"avatar":"https://static001.geekbang.org/account/avatar/00/11/f3/6a/6d82e7a3.jpg","nickname":"暮雨","note":"","ucode":"4B7F4932446EF7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":384007,"discussion_content":"咱们可以组建一个，把磊哥拉进来","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626334594,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1427216,"avatar":"https://static001.geekbang.org/account/avatar/00/15/c7/10/1b19727b.jpg","nickname":"独钓寒江","note":"","ucode":"C17132078E107E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":383558,"discussion_content":"磊哥，群建立了？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626157258,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1636029,"avatar":"https://static001.geekbang.org/account/avatar/00/18/f6/bd/f2c07661.jpg","nickname":"leon_LI","note":"","ucode":"7881396BB38053","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":376959,"discussion_content":"同问","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622437549,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1161271,"avatar":"https://static001.geekbang.org/account/avatar/00/11/b8/37/98991aeb.jpg","nickname":"不似旧日","note":"","ucode":"DF4C5E3AB9570C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":376280,"discussion_content":"同问","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622046059,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1911661,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLDOKcx20Xxmu5j8WxiafoYvo3bIAFDg8OeicRic1icD597QuMC9O8FyV2Al9RxNfVZXK0gkGUx6M3CVQ/132","nickname":"多年以后","note":"","ucode":"D70E7A1ABE0F39","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":364824,"discussion_content":"有了吗？现在","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617619124,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1715845,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/2e/85/54f276f1.jpg","nickname":"hongJun","note":"","ucode":"9A6156B4E70EBB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":361646,"discussion_content":"同问","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616721859,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1581862,"avatar":"https://static001.geekbang.org/account/avatar/00/18/23/26/0e0dbf3a.jpg","nickname":"剑下浮云","note":"","ucode":"88C243AD628312","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":352176,"discussion_content":"同问","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614618535,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":4,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1336169,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/dLSTGibVPxf3hZv0jDFGv83jK95VlagHZoia9DBcpkl0SEoFD19TjdGw7VDvP5qhK9ZNJ9cfpgT7PRtFtKBPaq3g/132","nickname":"麦颗斯","note":"","ucode":"21D545C9DCC7EF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":336813,"discussion_content":"同问啊","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608708172,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":4,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1653309,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3a/3d/086893ae.jpg","nickname":"泥沼","note":"","ucode":"87DCAF762C9576","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":318512,"discussion_content":"同问","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603768298,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":4,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1310564,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ff/64/76b0dac8.jpg","nickname":"友志","note":"","ucode":"913344CDF17620","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":309406,"discussion_content":"同问","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1601281436,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":4,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2104103,"avatar":"","nickname":"Roy","note":"","ucode":"F472E1B7DC89D3","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":305163,"discussion_content":"同问","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599803711,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":4,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1610967,"avatar":"https://static001.geekbang.org/account/avatar/00/18/94/d7/b522f36e.jpg","nickname":"庭阶","note":"","ucode":"30E59DBCC7F99A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":291284,"discussion_content":"同问","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594772734,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":4,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1266698,"avatar":"https://static001.geekbang.org/account/avatar/00/13/54/0a/9a002ad5.jpg","nickname":"Adam Lau","note":"","ucode":"7E542D6E789500","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":289039,"discussion_content":"同问","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593959954,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":4,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":23299,"user_name":"公众号：好奇心森林","can_delete":false,"product_type":"c1","uid":1003607,"ip_address":"","ucode":"73CF473D2A42CC","user_header":"https://static001.geekbang.org/account/avatar/00/0f/50/57/ad42ef51.jpg","comment_is_top":false,"comment_ctime":1536280549,"is_pvip":false,"replies":[{"id":"8440","content":"不。是entrypoint进程的子进程。docker基本上是旁路控制的作用。","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1536286285,"ip_address":"","comment_id":23299,"utype":1}],"discussion_count":7,"race_medal":0,"score":"263529285605","product_id":100015201,"comment_content":"是不是可以理解：一个docker里面跑的进程都是docker这个进程的子进程？","like_count":62,"discussions":[{"author":{"id":1121758,"avatar":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","nickname":"aoe","note":"","ucode":"1C6201EDB4E954","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":290307,"discussion_content":"原来Docker只是辅助英雄，输出还要靠底层系统","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1594403022,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423500,"discussion_content":"不。是entrypoint进程的子进程。docker基本上是旁路控制的作用。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1536286285,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2108027,"avatar":"https://static001.geekbang.org/account/avatar/00/20/2a/7b/2092e1fd.jpg","nickname":"Wall-Eve","note":"","ucode":"FBF2FED8F13BD3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":394038,"discussion_content":"严格来说，containerd-shim进程是容器内部PID为1进程的父进程（其在容器内部PPID显示为0），而容器内部各个进程的父进程追本溯源都是containerd-shim进程的子进程","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1631694249,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1261493,"avatar":"https://static001.geekbang.org/account/avatar/00/13/3f/b5/5fe77e16.jpg","nickname":"不经意间","note":"","ucode":"C39D98697ACB8B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2108027,"avatar":"https://static001.geekbang.org/account/avatar/00/20/2a/7b/2092e1fd.jpg","nickname":"Wall-Eve","note":"","ucode":"FBF2FED8F13BD3","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":401542,"discussion_content":"shim接的runC的活(´•ω•̥`)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633689758,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":394038,"ip_address":""},"score":401542,"extra":""}]},{"author":{"id":2062206,"avatar":"","nickname":"唐新华","note":"","ucode":"E5EF7BF5FD3A1D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":388850,"discussion_content":"有docker进程吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629013444,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1201655,"avatar":"https://static001.geekbang.org/account/avatar/00/12/55/f7/af3feb56.jpg","nickname":"Jike_chanpin_shishabi","note":"","ucode":"DBE59491274446","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":385948,"discussion_content":"mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627357932,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1436334,"avatar":"https://static001.geekbang.org/account/avatar/00/15/ea/ae/0e056410.jpg","nickname":"冉冉","note":"","ucode":"D36C0F95BC1DAB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":39815,"discussion_content":"windows 10上的docker desktop 关闭后，之前docker启动的进程会跟着关闭吗？因为我发现有一次有个服务的端口没释放....想搞清楚windows里的那个docker desktop到底是个什么角色？是一个linux虚拟机吗","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571992455,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":23105,"user_name":"snakorse","can_delete":false,"product_type":"c1","uid":1064887,"ip_address":"","ucode":"0AD727E1F16993","user_header":"https://static001.geekbang.org/account/avatar/00/10/3f/b7/0d8b5431.jpg","comment_is_top":false,"comment_ctime":1536152252,"is_pvip":false,"discussion_count":6,"race_medal":0,"score":"233464386236","product_id":100015201,"comment_content":"不太明白，既然都是用的宿主内核，那容器内还有不同的操作系统(centos,ubuntu)之分吗?如果有，那是如何做到的呢？","like_count":54,"discussions":[{"author":{"id":1261493,"avatar":"https://static001.geekbang.org/account/avatar/00/13/3f/b5/5fe77e16.jpg","nickname":"不经意间","note":"","ucode":"C39D98697ACB8B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":401541,"discussion_content":"操作系统本身由bootfs和rootfs组成的。\n容器技术中共享内核可以认为是共享bootfs，实现不同操作系统的功能其实就是用了不同的rootfs。","likes_number":18,"is_delete":false,"is_hidden":false,"ctime":1633689684,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1300847,"avatar":"https://static001.geekbang.org/account/avatar/00/13/d9/6f/8f5a4f02.jpg","nickname":"HHHumbert","note":"","ucode":"04089DE3F0E093","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":45863,"discussion_content":"centos ubuntu等本来就是用的相同的linux内核，但是其他操作系统的一些可执行文件等等就是各个linux发行版不同的地方了。","likes_number":10,"is_delete":false,"is_hidden":false,"ctime":1573092027,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2666702,"avatar":"https://static001.geekbang.org/account/avatar/00/28/b0/ce/f59230ce.jpg","nickname":"DotDotDot","note":"","ucode":"19AE7B942D063F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":380087,"discussion_content":"Distro use the same kernel but different file systems. You can have a Ubuntu container (Guest) on CentOS Host. All of these processes share the same kernel but the container process has a view of Ubuntu file system (Namespace) and other processes on you host have a view of CentOS.","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1624336246,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1252169,"avatar":"https://static001.geekbang.org/account/avatar/00/13/1b/49/ddefc656.jpg","nickname":"MrVito","note":"","ucode":"716FF6F8871706","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":325580,"discussion_content":"就是不同的文件系统的差别？","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1605356077,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1310798,"avatar":"https://static001.geekbang.org/account/avatar/00/14/00/4e/be2b206b.jpg","nickname":"吴小智","note":"","ucode":"C7C9F58B5C9F7B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":291505,"discussion_content":"对对对，这个问题想不通","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1594859200,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1778000,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/ncicjtgbOgxk2V3VWYJQAia6VqrvHE23JVGtkQALgl6XScQmdqmKZ5RXicfw0CQ4uMplhMeeYoSZNPggBRTpQLR1Q/132","nickname":"0xkjAlbert","note":"","ucode":"B607DA1230321F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1310798,"avatar":"https://static001.geekbang.org/account/avatar/00/14/00/4e/be2b206b.jpg","nickname":"吴小智","note":"","ucode":"C7C9F58B5C9F7B","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":297112,"discussion_content":"他们这些是Linux发行版，也就是他们都是已Linux内核为基础，加上一些应用程序来跑的，内核都是一样的，如果想更深层次了解，可以研究一下LFS","likes_number":8,"is_delete":false,"is_hidden":false,"ctime":1596780997,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":291505,"ip_address":""},"score":297112,"extra":""}]}]},{"had_liked":false,"id":24326,"user_name":"波","can_delete":false,"product_type":"c1","uid":1137222,"ip_address":"","ucode":"6EFAC22A40EB9E","user_header":"https://static001.geekbang.org/account/avatar/00/11/5a/46/97f880ec.jpg","comment_is_top":false,"comment_ctime":1536902392,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"199105398008","product_id":100015201,"comment_content":"把复杂的问题讲得如此简单易懂，这才叫专家，👍","like_count":47},{"had_liked":false,"id":23134,"user_name":"Bob","can_delete":false,"product_type":"c1","uid":1007005,"ip_address":"","ucode":"1A67FF9DC1FE1B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/5d/9d/4ee1faf4.jpg","comment_is_top":false,"comment_ctime":1536187826,"is_pvip":false,"replies":[{"id":"8384","content":"只有上限。所以才需要kubernetes 来帮你做调度嘛。","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1536199618,"ip_address":"","comment_id":23134,"utype":1}],"discussion_count":2,"race_medal":0,"score":"190514748850","product_id":100015201,"comment_content":"请教个问题，cgroups除了限制资源上限，能否锁定下限？如果不能，那不是很容易被抢资源？","like_count":45,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423429,"discussion_content":"只有上限。所以才需要kubernetes 来帮你做调度嘛。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1536199618,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1266677,"avatar":"https://static001.geekbang.org/account/avatar/00/13/53/f5/7eba299b.jpg","nickname":"周天宝","note":"","ucode":"5574296B7C6A08","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581281,"discussion_content":"下限没有意义吧， 你不用CPU，还要占用CPU资源么？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658711211,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":23033,"user_name":"大魔王汪汪","can_delete":false,"product_type":"c1","uid":1010680,"ip_address":"","ucode":"4B205CB52FC95F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6b/f8/b4da7936.jpg","comment_is_top":false,"comment_ctime":1536114809,"is_pvip":false,"replies":[{"id":"8334","content":"所以docker公司其实一直很担心，他知道自己门槛不高","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1536126727,"ip_address":"","comment_id":23033,"utype":1}],"discussion_count":3,"race_medal":0,"score":"169039839353","product_id":100015201,"comment_content":"感觉理解了namespace和cgroup，自己也可以搞一个进程容器了","like_count":40,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423381,"discussion_content":"所以docker公司其实一直很担心，他知道自己门槛不高","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1536126727,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1105387,"avatar":"https://static001.geekbang.org/account/avatar/00/10/dd/eb/80f9d212.jpg","nickname":"lttzzlll","note":"","ucode":"FA160F7C02ABAA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":389041,"discussion_content":"没有护城河，最终垮了。","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1629101619,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1514175,"avatar":"https://static001.geekbang.org/account/avatar/00/17/1a/bf/872c2289.jpg","nickname":"Geek_Fang","note":"","ucode":"CCF0DBC6AC247F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":358409,"discussion_content":"关键是要构建自己的商业壁垒","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1615978856,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":23306,"user_name":"V V","can_delete":false,"product_type":"c1","uid":1220390,"ip_address":"","ucode":"9494330A6AA770","user_header":"https://static001.geekbang.org/account/avatar/00/12/9f/26/89eda2c8.jpg","comment_is_top":false,"comment_ctime":1536282506,"is_pvip":false,"replies":[{"id":"8437","content":"试想一下，你这么运行起来的后台进程异常退出后，你如何知晓？由于没没有真正的init进程，贸然这么运行起来的孤儿进程是非常棘手的","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1536286112,"ip_address":"","comment_id":23306,"utype":1}],"discussion_count":6,"race_medal":0,"score":"130385301386","product_id":100015201,"comment_content":"为什么说容器中无法同时运行两个不同的应用？实际上可以的。设置CMD参数为一个脚本，脚本中启动多个不同的进程。或者通过exec执行bash进入容器后，手动启动多个在后台运行的进程。","like_count":30,"discussions":[{"author":{"id":1248307,"avatar":"https://static001.geekbang.org/account/avatar/00/13/0c/33/c5026169.jpg","nickname":"hiyang","note":"","ucode":"E521EE72C0F247","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":282844,"discussion_content":"看了前面不太理解，为什么只能运行单个应用？到这里理解了，所以一般在容器里的应用都是在前台运行，应用可以是多线程或者多进程的。","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1592103198,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1778000,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/ncicjtgbOgxk2V3VWYJQAia6VqrvHE23JVGtkQALgl6XScQmdqmKZ5RXicfw0CQ4uMplhMeeYoSZNPggBRTpQLR1Q/132","nickname":"0xkjAlbert","note":"","ucode":"B607DA1230321F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1248307,"avatar":"https://static001.geekbang.org/account/avatar/00/13/0c/33/c5026169.jpg","nickname":"hiyang","note":"","ucode":"E521EE72C0F247","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":297114,"discussion_content":"完全可以做多个应用，比如利用Dockerflile将tail -f作为守护进程，然后启动多个应用，但是问题在于，容器跟应用的生命周期是一样的才方便判断和调度，否则容器内的某一个应用挂了，但是容器依然在运行，这是不方便判断的，或者说，类似于破坏命名规范","likes_number":14,"is_delete":false,"is_hidden":false,"ctime":1596781515,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":282844,"ip_address":""},"score":297114,"extra":""}]},{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423504,"discussion_content":"试想一下，你这么运行起来的后台进程异常退出后，你如何知晓？由于没没有真正的init进程，贸然这么运行起来的孤儿进程是非常棘手的","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1536286112,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2421724,"avatar":"","nickname":"Geek_441001","note":"","ucode":"159C7D1965FDD9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":381507,"discussion_content":"我刚觉描述为：可以开多进程，但是不应该，因为xxx。这样容易理解点。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1625106502,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1514175,"avatar":"https://static001.geekbang.org/account/avatar/00/17/1a/bf/872c2289.jpg","nickname":"Geek_Fang","note":"","ucode":"CCF0DBC6AC247F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":358414,"discussion_content":"采用systemd或supervisord启动进程貌似可以守护","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615979280,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1047311,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/fb/0f/2bb7e1e8.jpg","nickname":"长芽的土豆子","note":"","ucode":"92E2C6158BD5B7","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1514175,"avatar":"https://static001.geekbang.org/account/avatar/00/17/1a/bf/872c2289.jpg","nickname":"Geek_Fang","note":"","ucode":"CCF0DBC6AC247F","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":363060,"discussion_content":"systemd这么搞滚动发布，灰度发布还咋搞。","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1617106335,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":358414,"ip_address":""},"score":363060,"extra":""}]}]},{"had_liked":false,"id":22989,"user_name":"大师兄","can_delete":false,"product_type":"c1","uid":1071028,"ip_address":"","ucode":"7549D56F0F00EE","user_header":"https://static001.geekbang.org/account/avatar/00/10/57/b4/99dcc079.jpg","comment_is_top":false,"comment_ctime":1536106190,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"126090157774","product_id":100015201,"comment_content":"对 Namespace 和 Cgroups 的理解又加深了很多！","like_count":29},{"had_liked":false,"id":26100,"user_name":"lesliexlxiao","can_delete":false,"product_type":"c1","uid":1004807,"ip_address":"","ucode":"0416E5B05661C4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/55/07/6ac856d9.jpg","comment_is_top":false,"comment_ctime":1537499153,"is_pvip":false,"discussion_count":12,"race_medal":0,"score":"108911681553","product_id":100015201,"comment_content":"参照老师的教程在 &#47;sys&#47;fs&#47;cgroup&#47;cpu 下建立了 container 目录，做完实践想删除该文件夹。<br>执行：rm -rf container&#47;<br>报错：cannot remove ‘container&#47;cpu.rt_period_us’: Operation not permitted<br>执行：lsattr<br>报错：lsattr: Inappropriate ioctl for device While reading flags on .&#47;container<br>请教下老师，该如何删除该目录。为什么现在 root 权限也删除不了该目录呢","like_count":25,"discussions":[{"author":{"id":1132803,"avatar":"https://static001.geekbang.org/account/avatar/00/11/49/03/50f57db3.jpg","nickname":"MING","note":"","ucode":"7E93A53F68D40C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":368680,"discussion_content":"可以安装一个  libcgroup-tools 工具，然后就使用 cgdelete 命令：cgdelete -r cpu:container 删除它","likes_number":9,"is_delete":false,"is_hidden":false,"ctime":1618800724,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1346225,"avatar":"https://static001.geekbang.org/account/avatar/00/14/8a/b1/980ea8c0.jpg","nickname":"王运祥","note":"","ucode":"6A69D65D9E773E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":1490,"discussion_content":"rmdir container","likes_number":9,"is_delete":false,"is_hidden":false,"ctime":1562660390,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1218128,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/50/bde525b1.jpg","nickname":"北卡","note":"","ucode":"2D947A61689FC6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1346225,"avatar":"https://static001.geekbang.org/account/avatar/00/14/8a/b1/980ea8c0.jpg","nickname":"王运祥","note":"","ucode":"6A69D65D9E773E","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":136724,"discussion_content":"试了一下，确实可以。为什么rmdir可以删除，但直接rm不行呢？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579159467,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":1490,"ip_address":""},"score":136724,"extra":""},{"author":{"id":1339810,"avatar":"https://static001.geekbang.org/account/avatar/00/14/71/a2/72dfab8a.jpg","nickname":"随便打鹅","note":"","ucode":"F594AB37C5CE19","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1218128,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/50/bde525b1.jpg","nickname":"北卡","note":"","ucode":"2D947A61689FC6","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":290823,"discussion_content":"rm -rf也可以","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594613786,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":136724,"ip_address":""},"score":290823,"extra":""},{"author":{"id":1208981,"avatar":"https://static001.geekbang.org/account/avatar/00/12/72/95/5f83598c.jpg","nickname":"Hello World","note":"","ucode":"368D87D53DC58F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1218128,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/50/bde525b1.jpg","nickname":"北卡","note":"","ucode":"2D947A61689FC6","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":384505,"discussion_content":"大概率是OS自身保护了rm -rf，防止误操作，rmdir只删除空目录。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626619602,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":136724,"ip_address":""},"score":384505,"extra":""}]},{"author":{"id":1930487,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/lwN7wy2iaibicicBicoN7eRsRtGA75dOYjuWtdqbOSUo65SHR2XHqJb01wgtnDdkBQA3cpibnCb1fibOJD2QwvRs4EU2w/132","nickname":"liam","note":"","ucode":"81C4A20429F7DF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":291119,"discussion_content":"报错：lsattr: Inappropriate ioctl for device While reading flags on ./containe 这是重点。文件 被写保护。lsattr 文件目录看下。 是不是输入结果有一个 ---i----。 然后用chattr -i 文件  取消保护限制就可以删除了。","likes_number":6,"is_delete":false,"is_hidden":false,"ctime":1594711443,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1170750,"avatar":"https://static001.geekbang.org/account/avatar/00/11/dd/3e/c3028cd5.jpg","nickname":"gongxt","note":"","ucode":"222C46E0615152","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":35734,"discussion_content":"先确保tasks文件中没有pid信息，在使用rmdir删除","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1571301861,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1053818,"avatar":"https://static001.geekbang.org/account/avatar/00/10/14/7a/7b8dd310.jpg","nickname":"lasdaybg","note":"","ucode":"C292CF7263ED81","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1170750,"avatar":"https://static001.geekbang.org/account/avatar/00/11/dd/3e/c3028cd5.jpg","nickname":"gongxt","note":"","ucode":"222C46E0615152","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":238914,"discussion_content":"貌似echo &#39;&#39; > tasks好像不行，刚开始只写了1个PID，这样执行之后，里面就多了好多PID。最后把bash退出重新登录之后，tasks里面才被清空","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1587259933,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":35734,"ip_address":""},"score":238914,"extra":""}]},{"author":{"id":1276373,"avatar":"https://static001.geekbang.org/account/avatar/00/13/79/d5/4a7971fc.jpg","nickname":"Ethan","note":"","ucode":"016F1DEBA895B8","race_medal":1,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":278417,"discussion_content":"这个可以参考红帽 cgroup 的介绍，https://access.redhat.com/documentation/zh-cn/red_hat_enterprise_linux/7/html/resource_management_guide/sec-default_cgroup_hierarchies。 目前可以通过 cgroup 工具进行操作或者 systemd 进行操作。可以先看下原理。","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1591184256,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1005210,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/56/9a/c71d326f.jpg","nickname":"Jesse","note":"","ucode":"2283CD8C971ADC","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":415232,"discussion_content":"cgdelete cpu:container\n 同学了解下 试试这个。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637032137,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1043738,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/ed/1a/ce7f7d54.jpg","nickname":"asdf100","note":"","ucode":"39D8D71453E575","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3049,"discussion_content":"确实删除不了的，用sudo也不行","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564133103,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1111985,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f7/b1/982ea185.jpg","nickname":"Frank","note":"","ucode":"9DADD72C193296","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2454,"discussion_content":"可以用。rmdir不是用来删除空目录吗？这个是什么原理呢？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563634836,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":23087,"user_name":"Joe Black","can_delete":false,"product_type":"c1","uid":1052528,"ip_address":"","ucode":"21FE222A286445","user_header":"https://static001.geekbang.org/account/avatar/00/10/0f/70/c8680841.jpg","comment_is_top":false,"comment_ctime":1536145436,"is_pvip":false,"replies":[{"id":"8388","content":"你的mount操作都被隔离在一个容器里了，另一个怎么能看到呢？","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1536199895,"ip_address":"","comment_id":23087,"utype":1}],"discussion_count":3,"race_medal":0,"score":"70255622172","product_id":100015201,"comment_content":"既然容器都运行在同一个内核，我在两个容器里挂载了同一个本地目录 ，然后在一个容器里的该目录下建立一个子目录，用mount命令成功挂载远程的nfs到这个子目录上，但是在另一个容器里看还是空子目录，没有nfs服务里的内容。这该怎么解决？是不是我的方法就不对？","like_count":16,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423408,"discussion_content":"你的mount操作都被隔离在一个容器里了，另一个怎么能看到呢？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536199895,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1333523,"avatar":"https://static001.geekbang.org/account/avatar/00/14/59/13/ff6f3ed5.jpg","nickname":"王章涛","note":"","ucode":"6EC55EC116A58D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":302864,"discussion_content":"你对容器的操作，都是原来的文件没有变，docker容器又新写了一个文件夹，并覆盖了老的（只读）文件夹","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1599052073,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1105387,"avatar":"https://static001.geekbang.org/account/avatar/00/10/dd/eb/80f9d212.jpg","nickname":"lttzzlll","note":"","ucode":"FA160F7C02ABAA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":389043,"discussion_content":"所以删除一个文件，也是写一个“white barrier”?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629101796,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":23023,"user_name":"明珠","can_delete":false,"product_type":"c1","uid":1218179,"ip_address":"","ucode":"F55F64691BD31E","user_header":"https://static001.geekbang.org/account/avatar/00/12/96/83/747d4431.jpg","comment_is_top":false,"comment_ctime":1536111833,"is_pvip":false,"replies":[{"id":"8319","content":"没毛病","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1536124039,"ip_address":"","comment_id":23023,"utype":1}],"discussion_count":4,"race_medal":0,"score":"70255588569","product_id":100015201,"comment_content":"老师，讲的太好了，言简易懂，每天都在期待新的一节课。 请教一个问题我们通常dockerpull下来的基础镜像比如:centos 7，这个镜像里面没有内核信息是吧?但是封装了systemd等进程管理工具，使得产生的新的进程都是一号进程的子进程，执行ping netstat命令，也会是这个容器一号进程的子进程?  老师这样理解对吗?","like_count":17,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423373,"discussion_content":"没毛病","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536124039,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1261493,"avatar":"https://static001.geekbang.org/account/avatar/00/13/3f/b5/5fe77e16.jpg","nickname":"不经意间","note":"","ucode":"C39D98697ACB8B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":391665,"discussion_content":"是不受控制，但不是孤儿","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1630570103,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1112815,"avatar":"https://static001.geekbang.org/account/avatar/00/10/fa/ef/9d3fcb40.jpg","nickname":"lq","note":"","ucode":"1C9D741B906403","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":387087,"discussion_content":"容器里面的ping这些不是不受控制的孤儿进程吗","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1627978687,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1105387,"avatar":"https://static001.geekbang.org/account/avatar/00/10/dd/eb/80f9d212.jpg","nickname":"lttzzlll","note":"","ucode":"FA160F7C02ABAA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1112815,"avatar":"https://static001.geekbang.org/account/avatar/00/10/fa/ef/9d3fcb40.jpg","nickname":"lq","note":"","ucode":"1C9D741B906403","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":389044,"discussion_content":"是的。没啥问题吧。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629101890,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":387087,"ip_address":""},"score":389044,"extra":""}]}]},{"had_liked":false,"id":23449,"user_name":"暮雨","can_delete":false,"product_type":"c1","uid":1176426,"ip_address":"","ucode":"4B7F4932446EF7","user_header":"https://static001.geekbang.org/account/avatar/00/11/f3/6a/6d82e7a3.jpg","comment_is_top":false,"comment_ctime":1536375446,"is_pvip":false,"replies":[{"id":"8480","content":"没问题。但是要挂载对应的文件系统，开启需要的权限。","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1536379488,"ip_address":"","comment_id":23449,"utype":1}],"discussion_count":4,"race_medal":0,"score":"65960884886","product_id":100015201,"comment_content":"容器内部还能再做namespace和cgroup么？也就是容器中再做docker","like_count":16,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423569,"discussion_content":"没问题。但是要挂载对应的文件系统，开启需要的权限。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536379488,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1266677,"avatar":"https://static001.geekbang.org/account/avatar/00/13/53/f5/7eba299b.jpg","nickname":"周天宝","note":"","ucode":"5574296B7C6A08","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581285,"discussion_content":"盗梦空间的感觉","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658711358,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1134694,"avatar":"https://static001.geekbang.org/account/avatar/00/11/50/66/047ee060.jpg","nickname":"Return12321","note":"","ucode":"F7A3C5ED02E1D9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":351262,"discussion_content":"套娃，复杂度应该指数级增长了吧！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614219307,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1012816,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/74/50/59d429c9.jpg","nickname":"MiracleWong","note":"","ucode":"05233774710AFE","race_medal":3,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":264886,"discussion_content":"感觉就是套娃，复杂度*2","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589355967,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":22999,"user_name":"vx:jiancheng_goon","can_delete":false,"product_type":"c1","uid":1218615,"ip_address":"","ucode":"FD34901B061825","user_header":"https://static001.geekbang.org/account/avatar/00/12/98/37/7f575aec.jpg","comment_is_top":false,"comment_ctime":1536108325,"is_pvip":false,"replies":[{"id":"8323","content":"不太好，这里还是交流技术为主","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1536124193,"ip_address":"","comment_id":22999,"utype":1}],"discussion_count":2,"race_medal":0,"score":"65960617765","product_id":100015201,"comment_content":"这篇文章写的真不错，终于明白cgroup是干嘛的了。再有，我能在这里打招聘广告吗？","like_count":15,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423362,"discussion_content":"不太好，这里还是交流技术为主","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536124193,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1386818,"avatar":"https://static001.geekbang.org/account/avatar/00/15/29/42/43d4b1a8.jpg","nickname":"烫烫烫","note":"","ucode":"C06018670DE76A","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":327952,"discussion_content":"哇，出现了，不学技术的厨师不是好HR~~~","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1606025600,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":22983,"user_name":"pytimer","can_delete":false,"product_type":"c1","uid":1014666,"ip_address":"","ucode":"A0038F6CB1F9AC","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ercmNryEicqDS73icpUu7W0BnZ7ZIia6jR7kdVMIzH0q1d7L8EKAYWeTJcribibGcHnJzpsjRFxAe26egQ/132","comment_is_top":false,"comment_ctime":1536104588,"is_pvip":false,"replies":[{"id":"8326","content":"技术上没有问题，但对上层编排系统的挑战比较大","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1536124364,"ip_address":"","comment_id":22983,"utype":1}],"discussion_count":1,"race_medal":0,"score":"61665646732","product_id":100015201,"comment_content":"为什么容器不添加磁盘限制？","like_count":15,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423353,"discussion_content":"技术上没有问题，但对上层编排系统的挑战比较大","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536124364,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":74152,"user_name":"lq","can_delete":false,"product_type":"c1","uid":1112815,"ip_address":"","ucode":"1C9D741B906403","user_header":"https://static001.geekbang.org/account/avatar/00/10/fa/ef/9d3fcb40.jpg","comment_is_top":false,"comment_ctime":1552116918,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"57386691766","product_id":100015201,"comment_content":"总结：容器的资源隔离（进程视图）是通过linux namespace实现（进程启动时指定namespace参数），容器的资源限制（cpu，memory大小等）是通过linux cgroups实现（通过修改&#47;proc目录下对应容器的文件信息），容器的隔离只是相对于容器进程本身做了隔离，宿主机操作系统还是可以看到对应容器进程的真实的进程信息。相较于虚拟机，容器通过共享宿主机的os内核从而更加的轻量级化，性能更高，但同时也使容器的隔离变的不彻底。这就意味着在windows宿主机上运行linux容器，以及在低版本的linux内核运行高版本linux容器是行不通的。同时，对于系统时间是不可以通过namespace进行隔离的。","like_count":14},{"had_liked":false,"id":23040,"user_name":"Kaer","can_delete":false,"product_type":"c1","uid":1113558,"ip_address":"","ucode":"1BD233D3FAC2B1","user_header":"https://static001.geekbang.org/account/avatar/00/10/fd/d6/71e1cc29.jpg","comment_is_top":false,"comment_ctime":1536116973,"is_pvip":false,"replies":[{"id":"8335","content":"准确的说，是调用containerd + runc。runc干你说的这些事儿。","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1536126777,"ip_address":"","comment_id":23040,"utype":1}],"discussion_count":4,"race_medal":0,"score":"57370691821","product_id":100015201,"comment_content":"docker的实现原理也仅仅是调用了底层的namespace和cgroup吗，然后加上一些其他的优化和特性。","like_count":14,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423384,"discussion_content":"准确的说，是调用containerd + runc。runc干你说的这些事儿。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1536126777,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1311001,"avatar":"https://static001.geekbang.org/account/avatar/00/14/01/19/f4da2829.jpg","nickname":"一秒","note":"","ucode":"F149B7F60620BD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":344676,"discussion_content":"什么是containerd 和runc\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611556338,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1514175,"avatar":"https://static001.geekbang.org/account/avatar/00/17/1a/bf/872c2289.jpg","nickname":"Geek_Fang","note":"","ucode":"CCF0DBC6AC247F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1311001,"avatar":"https://static001.geekbang.org/account/avatar/00/14/01/19/f4da2829.jpg","nickname":"一秒","note":"","ucode":"F149B7F60620BD","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":358417,"discussion_content":"容器运行时，执行容器的底层操作，与操作系统进行直接交互","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1615979895,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":344676,"ip_address":""},"score":358417,"extra":""},{"author":{"id":1105387,"avatar":"https://static001.geekbang.org/account/avatar/00/10/dd/eb/80f9d212.jpg","nickname":"lttzzlll","note":"","ucode":"FA160F7C02ABAA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1311001,"avatar":"https://static001.geekbang.org/account/avatar/00/14/01/19/f4da2829.jpg","nickname":"一秒","note":"","ucode":"F149B7F60620BD","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":389045,"discussion_content":"docker 是 C/S 架构，Server 端就是 containerd, &#39;docker commands&#39; 就是个前端。runc 是一个 系统调用的 library, 专门用来干 创建进程的活。","likes_number":8,"is_delete":false,"is_hidden":false,"ctime":1629102067,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":344676,"ip_address":""},"score":389045,"extra":""}]}]},{"had_liked":false,"id":87639,"user_name":"小松松","can_delete":false,"product_type":"c1","uid":1298152,"ip_address":"","ucode":"B9B5FFE7CAA548","user_header":"https://static001.geekbang.org/account/avatar/00/13/ce/e8/12cb8e99.jpg","comment_is_top":false,"comment_ctime":1555646428,"is_pvip":true,"replies":[{"id":"31570","content":"物理内存。限制虚拟内存的group要加memsw","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1555695514,"ip_address":"","comment_id":87639,"utype":1}],"discussion_count":1,"race_medal":0,"score":"48800286684","product_id":100015201,"comment_content":"内存分为虚拟内存和物理内存，请问Cgroup限制的是哪个呢？ 如果限制虚拟内存，是限制堆内存还是所有呢？ ","like_count":11,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":447541,"discussion_content":"物理内存。限制虚拟内存的group要加memsw","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555695514,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":23004,"user_name":"Linux云计算网络","can_delete":false,"product_type":"c1","uid":1114062,"ip_address":"","ucode":"8E1F8B049D3C95","user_header":"https://static001.geekbang.org/account/avatar/00/10/ff/ce/73ee54bf.jpg","comment_is_top":false,"comment_ctime":1536109308,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"48780749564","product_id":100015201,"comment_content":"通过 lxcfs 来实现隔离，具体是 lxcfs 在宿主机上维护进程组信息，然后容器启动的时候通过 -v 参数将 lxcfs &#47;proc目录挂载到容器的 &#47;proc 目录，当容器中获取 &#47;proc 信息时，实际上是宿主机上对该容器的进程组信息 …&#47;PID&#47;proc  进行操作。","like_count":12,"discussions":[{"author":{"id":1514175,"avatar":"https://static001.geekbang.org/account/avatar/00/17/1a/bf/872c2289.jpg","nickname":"Geek_Fang","note":"","ucode":"CCF0DBC6AC247F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":358418,"discussion_content":"nice","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615979948,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":30333,"user_name":"凯文1985","can_delete":false,"product_type":"c1","uid":1036921,"ip_address":"","ucode":"9A42344649072B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/d2/79/0a432fde.jpg","comment_is_top":false,"comment_ctime":1538797016,"is_pvip":true,"replies":[{"id":"10914","content":"能。但至少一个进程会无法管理。","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1538809913,"ip_address":"","comment_id":30333,"utype":1}],"discussion_count":2,"race_medal":0,"score":"44488469976","product_id":100015201,"comment_content":"一个容器本质上只是一个进程，那么不能同时启动两个应用？这个能解释一下吗？ 如果我打包一个docker镜像 里面安装了redis和tomcat 那就不能跑在容器里了？","like_count":11,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":425946,"discussion_content":"能。但至少一个进程会无法管理。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1538809913,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1018759,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8b/87/abb7bfe3.jpg","nickname":"雨露","note":"","ucode":"B09670EE7DDD5C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":530893,"discussion_content":"我这里也费解了半天，应该是可以的，只是有一个进程和容器的进程同生共死，其他那个不受控制？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637162389,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":30148,"user_name":"Rain","can_delete":false,"product_type":"c1","uid":1175329,"ip_address":"","ucode":"603DFFAC6A3755","user_header":"https://static001.geekbang.org/account/avatar/00/11/ef/21/69c181b8.jpg","comment_is_top":false,"comment_ctime":1538702310,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"44488375270","product_id":100015201,"comment_content":"评论比文章更精彩","like_count":10,"discussions":[{"author":{"id":1520108,"avatar":"https://static001.geekbang.org/account/avatar/00/17/31/ec/190a4538.jpg","nickname":"小麦","note":"","ucode":"1ACFD9D0E9DEF4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":556963,"discussion_content":"赞","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647587793,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":28201,"user_name":"公众号：云原生Serverless","can_delete":false,"product_type":"c1","uid":1253954,"ip_address":"","ucode":"B615BD756C7552","user_header":"https://static001.geekbang.org/account/avatar/00/13/22/42/79604ce6.jpg","comment_is_top":false,"comment_ctime":1538019944,"is_pvip":false,"replies":[{"id":"10144","content":"你的实验不是已经验证了，容器之间的文件系统就是隔离的啊。但是，既然要共享network ns，那多个容器的hosts文件得一样啊。所以，pod里的hosts其实是一个宿主机上的文件，容器一起bind mount这个文件即可。service account的道理也是类似的。","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1538025015,"ip_address":"","comment_id":28201,"utype":1}],"discussion_count":1,"race_medal":0,"score":"44487692904","product_id":100015201,"comment_content":"请问宿主机的&#47;etc&#47;hosts文件也和&#47;proc类似么，最近遇到个问题，在init-container里修改了hosts文件的权限，在同一个pod中的container中hosts权限也发生了改变，但是在init-container中修改hosts文件内容的话，同一个pod中的container中的hosts文件内容却没有发生改变，这怎么解释？<br>2018-09-26<br> 作者回复<br>不通同容器的文件系统是隔离的啊。至于权限，你想想它该归哪个namespace 管呢？<br><br>2018-09-27<br><br>还有有点不太明白，我理解同一个pod中的container只有网络命名空间是共享的啊，难道容器镜像init层的文件也位于同一个volume命名空间吗","like_count":11,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":425176,"discussion_content":"你的实验不是已经验证了，容器之间的文件系统就是隔离的啊。但是，既然要共享network ns，那多个容器的hosts文件得一样啊。所以，pod里的hosts其实是一个宿主机上的文件，容器一起bind mount这个文件即可。service account的道理也是类似的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1538025015,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":53801,"user_name":"淸曉","can_delete":false,"product_type":"c1","uid":1332899,"ip_address":"","ucode":"6E63DA4E29FE09","user_header":"https://static001.geekbang.org/account/avatar/00/14/56/a3/649d861c.jpg","comment_is_top":false,"comment_ctime":1545729566,"is_pvip":false,"discussion_count":10,"race_medal":0,"score":"40200435230","product_id":100015201,"comment_content":"运行完docker run -it --cpu-period=100000 --cpu-quota=20000 ubuntu &#47;bin&#47;bash<br>并没有在容器里和外面的&#47;sys&#47;fs&#47;cgroup&#47;cpu&#47;  找到docker&#47; 目录。<br>容器里：<br>root@21e3e814d573:&#47;# cat &#47;sys&#47;fs&#47;cgroup&#47;cpu&#47;<br>cgroup.clone_children  cpu.shares<br>cgroup.event_control   cpu.stat<br>cgroup.procs           cpuacct.stat<br>cpu.cfs_period_us      cpuacct.usage<br>cpu.cfs_quota_us       cpuacct.usage_percpu<br>cpu.rt_period_us       notify_on_release<br>cpu.rt_runtime_us      tasks<br><br>容器外：<br>[root@adsl-172-0-194-80 ~]# cat &#47;sys&#47;fs&#47;cgroup&#47;cpu&#47;<br>cgroup.clone_children  cpu.rt_period_us<br>cgroup.event_control   cpu.rt_runtime_us<br>cgroup.procs           cpu.shares<br>cgroup.sane_behavior   cpu.stat<br>container&#47;             notify_on_release<br>cpuacct.stat           release_agent<br>cpuacct.usage          system.slice&#47;<br>cpuacct.usage_percpu   tasks<br>cpu.cfs_period_us      user.slice&#47;    cpu.cfs_quota_us       <br><br>请问老师这是什么情况？","like_count":9,"discussions":[{"author":{"id":1089705,"avatar":"https://static001.geekbang.org/account/avatar/00/10/a0/a9/9df31218.jpg","nickname":"vulture","note":"","ucode":"91F51B28519DE8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4855,"discussion_content":"在我的ubuntu系统下，这个docker目录是/sys/fs/cgroup/cpu/system.slice/docker-xxx","likes_number":6,"is_delete":false,"is_hidden":false,"ctime":1565775776,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1478771,"avatar":"https://static001.geekbang.org/account/avatar/00/16/90/73/f60cacb4.jpg","nickname":"Eli Sun","note":"","ucode":"0DB6880BB529E5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":394597,"discussion_content":"[root@k8s-test-master cpu]# docker ps | grep ubuntu\na79ddcb1a907 ubuntu\n[root@k8s-test-master cpu]# find . -name *a79ddcb1*\n./system.slice/docker-a79ddcb1a907139d1ff204320455a6dc748f6b37b68f3439d9f40ae26a43e123.scope","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1631952008,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1911376,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/2a/50/e582963a.jpg","nickname":"一根燃烧的胸毛","note":"","ucode":"A84653E034D13B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":390772,"discussion_content":"容器run起来之后，不要退出；另开一个窗口去查询就有了；","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1630038406,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2550335,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eor3yhoBAvuFPgibmLwRTtbFDvSyt9icTdco5fctGa31jVWWgYA8uKrAT2fEO0q3bep7HjtkiaTWHAiaA/132","nickname":"yxyjw999","note":"","ucode":"A4A3C810C8384E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":380138,"discussion_content":"我有这个问题，是因为docker的Cgroup Driver设置的systemd. \n改成cgroupfs, restart一下，就可以看到了docker控制组了","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1624355021,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1606596,"avatar":"","nickname":"Geek_7513cf","note":"","ucode":"B679363EA50C21","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":309177,"discussion_content":"cgroup 关于cpu有多个子系统，上面的quato写法可能在其他的从group系统中，比如： cpuacct/     cpu,cpuacct/ cpuset/    这3个","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1601206492,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2067929,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/8d/d9/1486eb0e.jpg","nickname":"Ha  do   op","note":"","ucode":"F28A18F6542FEE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":292764,"discussion_content":"容器外是有的\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595324337,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1111985,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f7/b1/982ea185.jpg","nickname":"Frank","note":"","ucode":"9DADD72C193296","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2455,"discussion_content":"没有人回答啊？？？？我也想知道原因呢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563635061,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1041139,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/e2/f3/a35381d6.jpg","nickname":"大鹏","note":"","ucode":"059779E4B853AB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1111985,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f7/b1/982ea185.jpg","nickname":"Frank","note":"","ucode":"9DADD72C193296","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":3371,"discussion_content":"没人解答吗","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564446491,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":2455,"ip_address":""},"score":3371,"extra":""}]},{"author":{"id":1530493,"avatar":"","nickname":"Geek_e7834d","note":"","ucode":"ABAF1B1B7E6490","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2199,"discussion_content":"同问","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563351734,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1290865,"avatar":"https://static001.geekbang.org/account/avatar/00/13/b2/71/76481005.jpg","nickname":"Kingdom","note":"","ucode":"A45866C5324310","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":1721,"discussion_content":"我也想问","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562846355,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":23020,"user_name":"asdf100","can_delete":false,"product_type":"c1","uid":1043738,"ip_address":"","ucode":"39D8D71453E575","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ed/1a/ce7f7d54.jpg","comment_is_top":false,"comment_ctime":1536111529,"is_pvip":false,"replies":[{"id":"8320","content":"对的","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1536124059,"ip_address":"","comment_id":23020,"utype":1}],"discussion_count":1,"race_medal":0,"score":"40190817193","product_id":100015201,"comment_content":"由于一个容器的本质就是一个进程，用户的应用进程实际上就是容器里 PID=1 的进程，也是其他后续创建的所有进程的父进程。这就意味着，在一个容器中，你没办法同时运行两个不同的应用，除非你能事先找到一个公共的 PID=1 的程序来充当两个不同应用的父进程，这也是为什么很多人都会用 systemd 或者 supervisord 这样的软件来代替应用本身作为容器的启动进程。<br><br>这里的应用指的是容器里的apache redis mysql这类的应用吗？","like_count":9,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423371,"discussion_content":"对的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536124059,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":65211,"user_name":"dacong17","can_delete":false,"product_type":"c1","uid":1051019,"ip_address":"","ucode":"C6A55B87177D50","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/9dWfsO0TlWrIlfURicpxCBkOWyzaFe8kyamjMpzkLk1mbDTCjD9zcKnPJqyV3WrJ8zGs9URNEJw7yD2cLTYK6CQ/132","comment_is_top":false,"comment_ctime":1549110387,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"35908848755","product_id":100015201,"comment_content":"确实是容器里调用 settimeofday 修改时间，会造成宿主机修改时间。 前提是容器要有相关的权限<br>--privileged 或者 --cap-add SYS_TIME ，坑啊。 ","like_count":8,"discussions":[{"author":{"id":1401211,"avatar":"https://static001.geekbang.org/account/avatar/00/15/61/7b/8f589923.jpg","nickname":"凌晨一点半","note":"","ucode":"E6743DCC893454","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":21302,"discussion_content":"这个问题我也遇到过，习惯性的加上--privileged=true导致的","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1569465168,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":24178,"user_name":"彼岸","can_delete":false,"product_type":"c1","uid":1182871,"ip_address":"","ucode":"77AF8FBED158A8","user_header":"https://static001.geekbang.org/account/avatar/00/12/0c/97/06ac14e8.jpg","comment_is_top":false,"comment_ctime":1536832935,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"35896571303","product_id":100015201,"comment_content":"老师好，想问下，linux中的非容器进程与容器进程，实际根本没啥区别，只是通过cgroup与namspace的限制后，使得进程满足了容器制定的规范后，我们就可以把此进程称为容器了。其容器本质还是进程，只是是个有限定的特殊进程而已","like_count":8},{"had_liked":false,"id":23102,"user_name":"余泽锋","can_delete":false,"product_type":"c1","uid":1003207,"ip_address":"","ucode":"5AB1499746C003","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4e/c7/8c2d0a3d.jpg","comment_is_top":false,"comment_ctime":1536151779,"is_pvip":false,"replies":[{"id":"8387","content":"mac docker其实是个虚拟机。你不觉得它卡吗？哈哈。","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1536199834,"ip_address":"","comment_id":23102,"utype":1}],"discussion_count":4,"race_medal":1,"score":"35895890147","product_id":100015201,"comment_content":"老师您好，“这意味着，如果你要在 Windows 宿主机上运行 Linux 容器，或者在低版本的 Linux 宿主机上运行高版本的 Linux 容器，都是行不通的。”这段话有些不解，我的macbook pro可以运行最新版本的linux的docker，感觉是不是跟您这句话有冲突","like_count":9,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423416,"discussion_content":"mac docker其实是个虚拟机。你不觉得它卡吗？哈哈。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536199834,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1887603,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/cd/73/f6889c2f.jpg","nickname":"Wind","note":"","ucode":"AD108636DE44C4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":307575,"discussion_content":"只要他有钱 顶配mac是不会卡\n","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1600689384,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1003207,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/4e/c7/8c2d0a3d.jpg","nickname":"余泽锋","note":"","ucode":"5AB1499746C003","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":1887603,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/cd/73/f6889c2f.jpg","nickname":"Wind","note":"","ucode":"AD108636DE44C4","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":348209,"discussion_content":"我的是标配，真的不卡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612478609,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":307575,"ip_address":""},"score":348209,"extra":""}]},{"author":{"id":1311001,"avatar":"https://static001.geekbang.org/account/avatar/00/14/01/19/f4da2829.jpg","nickname":"一秒","note":"","ucode":"F149B7F60620BD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":344675,"discussion_content":"mac 也是unix，unix下没有namespace和cgroups吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611556229,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":23080,"user_name":"Liam","can_delete":false,"product_type":"c1","uid":1094597,"ip_address":"","ucode":"1D15D3B64F2606","user_header":"https://static001.geekbang.org/account/avatar/00/10/b3/c5/7fc124e2.jpg","comment_is_top":false,"comment_ctime":1536141894,"is_pvip":false,"replies":[{"id":"8389","content":"对","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1536199903,"ip_address":"","comment_id":23080,"utype":1}],"discussion_count":2,"race_medal":0,"score":"35895880262","product_id":100015201,"comment_content":"如果docker run时没有指定cpu quota,默认是不限制的吧 （-1）","like_count":8,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423403,"discussion_content":"对","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536199903,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2635933,"avatar":"https://static001.geekbang.org/account/avatar/00/28/38/9d/10fe9edc.jpg","nickname":"几～许","note":"","ucode":"C3375C22051FCA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":573505,"discussion_content":"为何我指定了也还是-1","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1653468704,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":23011,"user_name":"Django","can_delete":false,"product_type":"c1","uid":1220752,"ip_address":"","ucode":"8BD0716229C36B","user_header":"https://static001.geekbang.org/account/avatar/00/12/a0/90/095db0c5.jpg","comment_is_top":false,"comment_ctime":1536110110,"is_pvip":false,"replies":[{"id":"8321","content":"应该是API翻译，即，把linux syscall翻译成windows syscall","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1536124146,"ip_address":"","comment_id":23011,"utype":1}],"discussion_count":1,"race_medal":0,"score":"35895848478","product_id":100015201,"comment_content":"想问下，windows10中的linux子系统是如何实现的？","like_count":9,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423368,"discussion_content":"应该是API翻译，即，把linux syscall翻译成windows syscall","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536124146,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":33509,"user_name":"故事的小黄花","can_delete":false,"product_type":"c1","uid":1083848,"ip_address":"","ucode":"711F9F3AC87343","user_header":"https://static001.geekbang.org/account/avatar/00/10/89/c8/e7357aa3.jpg","comment_is_top":false,"comment_ctime":1539818686,"is_pvip":false,"replies":[{"id":"12062","content":"不。宿主机看到的qemu进程，而不是应用的进程。这是有本质区别的。","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1539822132,"ip_address":"","comment_id":33509,"utype":1}],"discussion_count":3,"race_medal":0,"score":"31604589758","product_id":100015201,"comment_content":"其实，虚拟机对于宿主机来说也是进程，限制虚拟机的资源使用也可以用cgroup.","like_count":7,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":426979,"discussion_content":"不。宿主机看到的qemu进程，而不是应用的进程。这是有本质区别的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1539822132,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1105387,"avatar":"https://static001.geekbang.org/account/avatar/00/10/dd/eb/80f9d212.jpg","nickname":"lttzzlll","note":"","ucode":"FA160F7C02ABAA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":389047,"discussion_content":"什么意思？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629102737,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1261493,"avatar":"https://static001.geekbang.org/account/avatar/00/13/3f/b5/5fe77e16.jpg","nickname":"不经意间","note":"","ucode":"C39D98697ACB8B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1105387,"avatar":"https://static001.geekbang.org/account/avatar/00/10/dd/eb/80f9d212.jpg","nickname":"lttzzlll","note":"","ucode":"FA160F7C02ABAA","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":391668,"discussion_content":"虚拟机是通过硬件虚拟化功能模拟出虚拟机，然后在虚拟机里装guest系统，应用运行在guest系统里，自然在宿主机上看不到应用。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630570798,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":389047,"ip_address":""},"score":391668,"extra":""}]}]},{"had_liked":false,"id":29539,"user_name":"yyarrow","can_delete":false,"product_type":"c1","uid":1259054,"ip_address":"","ucode":"69EEF030AFB517","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLEYbNElGIxYx8WCwo8RW6AJZibdGbETckBQER1ktTE1bFcRp4GNpmzXTIGm9DSiaU305tCkwONOW3Q/132","comment_is_top":false,"comment_ctime":1538408465,"is_pvip":false,"replies":[{"id":"10638","content":"当然是容器里。比如用systemd当公共父进程","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1538437549,"ip_address":"","comment_id":29539,"utype":1}],"discussion_count":1,"race_medal":0,"score":"31603179537","product_id":100015201,"comment_content":"&quot;用户的应用进程实际上就是容器里 PID=1 的进程，也是其他后续创建的所有进程的父进程。这就意味着，在一个容器中，你没办法同时运行两个不同的应用，除非你能事先找到一个公共的 PID=1 的程序来充当两个不同应用的父进程&quot;，这里不是很懂，为啥找到一个公共的pid=1的夫进程就行了呢？即使找到了，两个子进程也不能作为同一个容器管理吧？还有这个公共的pid=1中所谓的“公共”指的是在容器中还是在宿主机中的公共呀？求指导~","like_count":7,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":425653,"discussion_content":"当然是容器里。比如用systemd当公共父进程","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1538437549,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":23391,"user_name":"小崔","can_delete":false,"product_type":"c1","uid":1104958,"ip_address":"","ucode":"4E537416787752","user_header":"https://static001.geekbang.org/account/avatar/00/10/dc/3e/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1536326390,"is_pvip":false,"replies":[{"id":"8483","content":"看你设置的被限制进程号了","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1536379582,"ip_address":"","comment_id":23391,"utype":1}],"discussion_count":1,"race_medal":0,"score":"31601097462","product_id":100015201,"comment_content":"systemd 或者 supervisord 这样的软件来代替应用本身作为容器的启动进程<br>这样启动的容器，Cgroup限制的只是supervisord的资源呢？还是容器内所有进程的总资源？","like_count":7,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423543,"discussion_content":"看你设置的被限制进程号了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536379582,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":22998,"user_name":"岁月～静好","can_delete":false,"product_type":"c1","uid":1218348,"ip_address":"","ucode":"A639FDFE5EEC54","user_header":"https://static001.geekbang.org/account/avatar/00/12/97/2c/28f11cd9.jpg","comment_is_top":false,"comment_ctime":1536108177,"is_pvip":false,"replies":[{"id":"8324","content":"是的呢","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1536124219,"ip_address":"","comment_id":22998,"utype":1}],"discussion_count":1,"race_medal":0,"score":"31600879249","product_id":100015201,"comment_content":"相对于虚拟机来说，容器没有专门的cpu内存等，没有虚拟的操作系统，只是通过namespace重命名的进程运行买物理机上，没有实质性的隔离，会发生容器内的应用越狱等情况。但可以通过cgroup来限制容器的cpu内存等的使用，现有问题是top，&#47;pro下查看到的还是物理界机的相关信息。不知道理解的是否正确？","like_count":7,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423361,"discussion_content":"是的呢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536124219,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":37415,"user_name":"Hardy","can_delete":false,"product_type":"c1","uid":1064088,"ip_address":"","ucode":"7059C5CE2E982A","user_header":"https://static001.geekbang.org/account/avatar/00/10/3c/98/408633e0.jpg","comment_is_top":false,"comment_ctime":1541577939,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"27311381715","product_id":100015201,"comment_content":"$ docker run -it --cpu-period=100000 --cpu-quota=20000 ubuntu &#47;bin&#47;bash<br>命令 在CentOS 7.5 ，效果是在 &#47;sys&#47;fs&#47;cgroup&#47;cpu&#47;system.slice&#47;[docker-xxxxxx]目录下面。","like_count":6},{"had_liked":false,"id":23279,"user_name":"于斯人也","can_delete":false,"product_type":"c1","uid":1001227,"ip_address":"","ucode":"F40A74F87EA2C9","user_header":"https://static001.geekbang.org/account/avatar/00/0f/47/0b/f9cf6d51.jpg","comment_is_top":false,"comment_ctime":1536255853,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"27306059629","product_id":100015201,"comment_content":"讲讲端口，环境变量，网络如何复用隔离的，容器内执行关机命令是如何被限制的","like_count":6},{"had_liked":false,"id":23195,"user_name":"余泽锋","can_delete":false,"product_type":"c1","uid":1003207,"ip_address":"","ucode":"5AB1499746C003","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4e/c7/8c2d0a3d.jpg","comment_is_top":false,"comment_ctime":1536199982,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"27306003758","product_id":100015201,"comment_content":"MacBook Pro，运行了四个docker，开vscode，感觉还行，不卡","like_count":6},{"had_liked":false,"id":29011,"user_name":"小豪","can_delete":false,"product_type":"c1","uid":1227717,"ip_address":"","ucode":"9DC3695386A19F","user_header":"https://static001.geekbang.org/account/avatar/00/12/bb/c5/ffae4021.jpg","comment_is_top":false,"comment_ctime":1538223149,"is_pvip":false,"replies":[{"id":"10482","content":"会的，做好健康检查","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1538277641,"ip_address":"","comment_id":29011,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23013059629","product_id":100015201,"comment_content":"张老师，请问利用cgroup做内存限制，如果容器内的进程消耗的内存比较高，会导致容器进程假死吗？有什么更好的解决方法呢？谢谢","like_count":5,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":425464,"discussion_content":"会的，做好健康检查","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1538277641,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":28292,"user_name":"公众号：云原生Serverless","can_delete":false,"product_type":"c1","uid":1253954,"ip_address":"","ucode":"B615BD756C7552","user_header":"https://static001.geekbang.org/account/avatar/00/13/22/42/79604ce6.jpg","comment_is_top":false,"comment_ctime":1538044522,"is_pvip":false,"replies":[{"id":"10171","content":"注意，这个文件是个volume，不是可读写层的一部分。可以看看我讲volume部分的内容。","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1538049619,"ip_address":"","comment_id":28292,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23012881002","product_id":100015201,"comment_content":"也就是对于&#47;etc&#47;hosts这个文件而言，同一个pod中不同container修改权限时是修改的宿主机的文件权限，而修改hosts文件内容时，修改的是各自的文件么？<br><br>2018-09-27<br><br> 作者回复<br><br>不是……hosts跟volume是一样的，所有容器共同mount了同一份。但是这个文件的内容，是kubelet维护的，在每个容器创建的时候，kubelet会重写它里面的内容。这就是为啥我说不让你手动改hosts……<br><br>经磊哥一讲解，比之前豁然开朗了许多，但是同一个pod中不同container  hosts权限问题呢，一个容器中改了权限，不是生效在该容器的读写层么，宿主机上对应的文件权限不会变化吧？如果不变化，那么同pod中下一个容器mount的时候不是应该权限和宿主机最初的hosts权限一致么","like_count":5,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":425218,"discussion_content":"注意，这个文件是个volume，不是可读写层的一部分。可以看看我讲volume部分的内容。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1538049619,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":23063,"user_name":"silencedoctor","can_delete":false,"product_type":"c1","uid":1109673,"ip_address":"","ucode":"5BED092F5791D3","user_header":"https://static001.geekbang.org/account/avatar/00/10/ee/a9/971234c5.jpg","comment_is_top":false,"comment_ctime":1536129544,"is_pvip":false,"replies":[{"id":"8390","content":"其实是个虚拟机","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1536199916,"ip_address":"","comment_id":23063,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23010966024","product_id":100015201,"comment_content":"我看到docker可以Windows上运行linux容器，在linux上运行Windows容器的情况，如果本质上都是使用宿主机的内核请问它是怎样做到的呢","like_count":5,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423397,"discussion_content":"其实是个虚拟机","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536199916,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":126409,"user_name":"Gray13","can_delete":false,"product_type":"c1","uid":1309152,"ip_address":"","ucode":"3C7FEFE31CDB51","user_header":"https://static001.geekbang.org/account/avatar/00/13/f9/e0/2cdd1bc9.jpg","comment_is_top":false,"comment_ctime":1566383772,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"18746252956","product_id":100015201,"comment_content":"第三次听 每次听每次都会感慨 写文章写的太好了 去面试随便丢几条都完胜 哈哈","like_count":4,"discussions":[{"author":{"id":1197614,"avatar":"https://static001.geekbang.org/account/avatar/00/12/46/2e/1017900c.jpg","nickname":"牛逼中…","note":"","ucode":"CBCB80CFDC2180","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":391038,"discussion_content":"同是听课的应聘人和招聘人岂不双赢😄","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630240848,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":85319,"user_name":"haiker","can_delete":false,"product_type":"c1","uid":1131183,"ip_address":"","ucode":"4C4C799CACCF79","user_header":"https://static001.geekbang.org/account/avatar/00/11/42/af/8c37ca95.jpg","comment_is_top":false,"comment_ctime":1555036289,"is_pvip":false,"replies":[{"id":"31577","content":"要unmount","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1555697419,"ip_address":"","comment_id":85319,"utype":1}],"discussion_count":1,"race_medal":1,"score":"18734905473","product_id":100015201,"comment_content":"我创建container目录实验之后直接使用rm -rf无法删除container目录，我想知道如果是在docker run的时候限制了cpu使用，当删除这个容器，它对应的cpu限制的文件也会删掉吗？不删除的话会不会这个目录下的文件会越来越多","like_count":4,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446626,"discussion_content":"要unmount","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555697419,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":54563,"user_name":"帅","can_delete":false,"product_type":"c1","uid":1207367,"ip_address":"","ucode":"DB792F56C26429","user_header":"https://static001.geekbang.org/account/avatar/00/12/6c/47/57b6c4e8.jpg","comment_is_top":false,"comment_ctime":1545900947,"is_pvip":false,"replies":[{"id":"19831","content":"overlayfs有自己的一套机制","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1545953734,"ip_address":"","comment_id":54563,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18725770131","product_id":100015201,"comment_content":"老师好，关于docke容器磁盘使用大小的限制，存储驱动是devicemapper，可以通过设置启动参数改变容器对磁盘的占用控制，然而overlay2却没有这样的限制了，对吗？","like_count":4,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":434492,"discussion_content":"overlayfs有自己的一套机制","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545953734,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":32295,"user_name":"Lost In The Echo。","can_delete":false,"product_type":"c1","uid":1211954,"ip_address":"","ucode":"6EC7BF57DA3A15","user_header":"https://static001.geekbang.org/account/avatar/00/12/7e/32/e569f729.jpg","comment_is_top":false,"comment_ctime":1539516648,"is_pvip":false,"replies":[{"id":"11833","content":"umount后删了即可","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1539581589,"ip_address":"","comment_id":32295,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18719385832","product_id":100015201,"comment_content":"cgroups目录留下的文件如何有效的清理呢？","like_count":4,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":426716,"discussion_content":"umount后删了即可","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1539581589,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":28242,"user_name":"公众号：云原生Serverless","can_delete":false,"product_type":"c1","uid":1253954,"ip_address":"","ucode":"B615BD756C7552","user_header":"https://static001.geekbang.org/account/avatar/00/13/22/42/79604ce6.jpg","comment_is_top":false,"comment_ctime":1538031016,"is_pvip":false,"replies":[{"id":"10151","content":"不是……hosts跟volume是一样的，所有容器共同mount了同一份。但是这个文件的内容，是kubelet维护的，在每个容器创建的时候，kubelet会重写它里面的内容。这就是为啥我说不让你手动改hosts……","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1538041513,"ip_address":"","comment_id":28242,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18717900200","product_id":100015201,"comment_content":"也就是对于&#47;etc&#47;hosts这个文件而言，同一个pod中不同container修改权限时是修改的宿主机的文件权限，而修改hosts文件内容时，修改的是各自的文件么？","like_count":4,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":425191,"discussion_content":"不是……hosts跟volume是一样的，所有容器共同mount了同一份。但是这个文件的内容，是kubelet维护的，在每个容器创建的时候，kubelet会重写它里面的内容。这就是为啥我说不让你手动改hosts……","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1538041513,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":24164,"user_name":"Cloudcat","can_delete":false,"product_type":"c1","uid":1225034,"ip_address":"","ucode":"0A4F91675A3C5D","user_header":"https://static001.geekbang.org/account/avatar/00/12/b1/4a/7279221f.jpg","comment_is_top":false,"comment_ctime":1536827473,"is_pvip":false,"replies":[{"id":"8882","content":"都是子进程。但后台运行的那个进程要管理起来就麻烦了。","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1536889197,"ip_address":"","comment_id":24164,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18716696657","product_id":100015201,"comment_content":"不好意思，前面的留言有些错误，我的意思是Dockerfile中一条CMD运行一个脚本，脚本里有两条运行进程的指令，前一条后台运行，第二条前台运行，这样应该可以实现容器在建立的时候运行两个进程了吧？还是说脚本执行的时候其实是一个父进程fork出了两个子进程？正好符合了你说的第二句话“除非你能事先找到一个公共的PID=1的程序来充当两个不同应用的父进程”","like_count":4,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423866,"discussion_content":"都是子进程。但后台运行的那个进程要管理起来就麻烦了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536889197,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":22977,"user_name":"gotojeff","can_delete":false,"product_type":"c1","uid":1212606,"ip_address":"","ucode":"1E49871F44F9E5","user_header":"https://static001.geekbang.org/account/avatar/00/12/80/be/8350f94d.jpg","comment_is_top":false,"comment_ctime":1536092535,"is_pvip":false,"replies":[{"id":"8328","content":"它实际上是跑在一个虚拟机里的","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1536124417,"ip_address":"","comment_id":22977,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18715961719","product_id":100015201,"comment_content":"Linux container 不是可以跑在windows10上面吗？请问文章里是这是行不通的是什么意思？","like_count":4,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423349,"discussion_content":"它实际上是跑在一个虚拟机里的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536124417,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":119345,"user_name":"Evan","can_delete":false,"product_type":"c1","uid":1618393,"ip_address":"","ucode":"104A00673675DC","user_header":"https://static001.geekbang.org/account/avatar/00/18/b1/d9/3ccdbb42.jpg","comment_is_top":false,"comment_ctime":1564566908,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"14449468796","product_id":100015201,"comment_content":"老师好，Docker 默认应该是没有开启user namespace 的，那为什么我在容器中新创建的用户，在宿主机&#47;etc&#47;passwd 中看不到呢？","like_count":3},{"had_liked":false,"id":92216,"user_name":"AliFYB","can_delete":false,"product_type":"c1","uid":1521904,"ip_address":"","ucode":"F988FCDBE30957","user_header":"","comment_is_top":false,"comment_ctime":1557203402,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"14442105290","product_id":100015201,"comment_content":"容器内cpu监控可以直接使用cgroup中的cpuacct。<br>简单来讲，读取&#47;sys&#47;fs&#47;cgroup&#47;cpuacct&#47;docker&#47;[containerId]文件中内容进行下时间片占用率计算可以得到类似top的功能","like_count":3},{"had_liked":false,"id":23113,"user_name":"cxyfreedom","can_delete":false,"product_type":"c1","uid":1059047,"ip_address":"","ucode":"6796B2F49A0AD8","user_header":"","comment_is_top":false,"comment_ctime":1536154648,"is_pvip":false,"replies":[{"id":"8386","content":"再比如kernel keyring。指定了才有限制。","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1536199809,"ip_address":"","comment_id":23113,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14421056536","product_id":100015201,"comment_content":"1. 所以除了时间，还有什么比较常见是不能被Namespace化的呢？<br>2. 所以平时我们 docker run 的时候，是默认本身就有一些 Cgroups 的限制，还是我们指定了参数才会收到限制？","like_count":3,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423420,"discussion_content":"再比如kernel keyring。指定了才有限制。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536199809,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":22990,"user_name":"Oracleblog","can_delete":false,"product_type":"c1","uid":1043729,"ip_address":"","ucode":"DC9C5E721A55E6","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ed/11/c296d424.jpg","comment_is_top":false,"comment_ctime":1536106408,"is_pvip":false,"replies":[{"id":"8325","content":"没有内核。详见下一节镜像的讲解。","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1536124245,"ip_address":"","comment_id":22990,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14421008296","product_id":100015201,"comment_content":"容器的本质是一个进程，那所有的容器的image是不是都基于一个比较小的linux内核？因为进去容器之后能看到类似文件系统目录，还能执行很多操作系统命令。","like_count":3,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423357,"discussion_content":"没有内核。详见下一节镜像的讲解。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536124245,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":22973,"user_name":"C+c","can_delete":false,"product_type":"c1","uid":1001373,"ip_address":"","ucode":"FC7DED6CE0C253","user_header":"https://static001.geekbang.org/account/avatar/00/0f/47/9d/ea7e52df.jpg","comment_is_top":false,"comment_ctime":1536081079,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14420982967","product_id":100015201,"comment_content":"2. 习惯了虚机甚至物理机场景的业务软件，希望能够通过systemd进行进程管理，希望容器迁移时IP地址不变。","like_count":3},{"had_liked":false,"id":312808,"user_name":"师师","can_delete":false,"product_type":"c1","uid":2762955,"ip_address":"","ucode":"AF3EB5FDA6285C","user_header":"https://static001.geekbang.org/account/avatar/00/2a/28/cb/42c9b1a0.jpg","comment_is_top":false,"comment_ctime":1632034437,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10221969029","product_id":100015201,"comment_content":"wget https:&#47;&#47;copr-be.cloud.fedoraproject.org&#47;results&#47;ganto&#47;lxc3&#47;epel-7-x86_64&#47;01041891-lxcfs&#47;lxcfs-3.1.2-0.2.el7.x86_64.rpm;<br>rpm -ivh lxcfs-3.1.2-0.2.el7.x86_64.rpm --force --nodeps<br>安装lxcfs，直接后台启动，然后跑一个容器测试：<br><br> lxcfs &#47;var&#47;lib&#47;lxcfs &amp;<br><br> docker run -it -m 512m \\<br>      -v &#47;var&#47;lib&#47;lxcfs&#47;proc&#47;cpuinfo:&#47;proc&#47;cpuinfo:rw \\<br>      -v &#47;var&#47;lib&#47;lxcfs&#47;proc&#47;diskstats:&#47;proc&#47;diskstats:rw \\<br>      -v &#47;var&#47;lib&#47;lxcfs&#47;proc&#47;meminfo:&#47;proc&#47;meminfo:rw \\<br>      -v &#47;var&#47;lib&#47;lxcfs&#47;proc&#47;stat:&#47;proc&#47;stat:rw \\<br>      -v &#47;var&#47;lib&#47;lxcfs&#47;proc&#47;swaps:&#47;proc&#47;swaps:rw \\<br>      -v &#47;var&#47;lib&#47;lxcfs&#47;proc&#47;uptime:&#47;proc&#47;uptime:rw \\<br>      ubuntu:latest &#47;bin&#47;bash","like_count":2},{"had_liked":false,"id":78883,"user_name":"龙坤","can_delete":false,"product_type":"c1","uid":1233455,"ip_address":"","ucode":"D1724E68D6304D","user_header":"https://static001.geekbang.org/account/avatar/00/12/d2/2f/04882ff8.jpg","comment_is_top":false,"comment_ctime":1553268144,"is_pvip":false,"discussion_count":4,"race_medal":1,"score":"10143202736","product_id":100015201,"comment_content":"你好，请问下cgroup对docker run启动的第一号进城进行限制，那么如果我容器里还有一个其它进程，那么那个进城会被限制吗？","like_count":2,"discussions":[{"author":{"id":1480914,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKzOaMIpbTBuxVhtsVQB3ibOAH5XBbVQuGtJUTP00QhYGJKZibpWHo4SB7kRJck3OtxZI4FJ4V8kI7Q/132","nickname":"Geek_574e6c","note":"","ucode":"C12E23EB7F9ACA","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":367191,"discussion_content":"测试了一个场景，是限制的，更多场景没测试\n\ndocker run -it --cpu-period=100000 --cpu-quota=20000 ubuntu /bin/bash\n(内部)/# while : ; do : ; done &amp;","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1618286365,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1650044,"avatar":"https://static001.geekbang.org/account/avatar/00/19/2d/7c/84f53e33.jpg","nickname":"掐死你的温柔","note":"","ucode":"6053DAC0740755","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":387658,"discussion_content":"会受限制，做楼上的实验","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628325592,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1514175,"avatar":"https://static001.geekbang.org/account/avatar/00/17/1a/bf/872c2289.jpg","nickname":"Geek_Fang","note":"","ucode":"CCF0DBC6AC247F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":358425,"discussion_content":"我觉得是不受限制的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615980674,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1514175,"avatar":"https://static001.geekbang.org/account/avatar/00/17/1a/bf/872c2289.jpg","nickname":"Geek_Fang","note":"","ucode":"CCF0DBC6AC247F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":358424,"discussion_content":"同问","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615980659,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76358,"user_name":"饭粒","can_delete":false,"product_type":"c1","uid":1153455,"ip_address":"","ucode":"4C3220B0D43997","user_header":"https://static001.geekbang.org/account/avatar/00/11/99/af/d29273e2.jpg","comment_is_top":false,"comment_ctime":1552577360,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10142511952","product_id":100015201,"comment_content":"宝藏系列，文章和评论都很精彩。","like_count":2},{"had_liked":false,"id":52752,"user_name":"ronin","can_delete":false,"product_type":"c1","uid":1206490,"ip_address":"","ucode":"5DF632A97F6177","user_header":"https://static001.geekbang.org/account/avatar/00/12/68/da/2148d4ed.jpg","comment_is_top":false,"comment_ctime":1545495717,"is_pvip":false,"replies":[{"id":"19226","content":"当然不可以，您这PID=1的进程根本没管理后台进程的能力。","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1545578498,"ip_address":"","comment_id":52752,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10135430309","product_id":100015201,"comment_content":"为什么说容器中无法同时运行两个不同的应用？实际上可以的。设置CMD参数为一个脚本，脚本中启动多个不同的进程。或者通过exec执行bash进入容器后，手动启动多个在后台运行的进程。   <br><br>这个问题的话，可以使用健康检查来进行判断吗？","like_count":2,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":433972,"discussion_content":"当然不可以，您这PID=1的进程根本没管理后台进程的能力。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545578498,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":44227,"user_name":"周萝卜","can_delete":false,"product_type":"c1","uid":1315039,"ip_address":"","ucode":"056A4426D14A45","user_header":"https://static001.geekbang.org/account/avatar/00/14/10/df/e4511752.jpg","comment_is_top":false,"comment_ctime":1543389395,"is_pvip":false,"replies":[{"id":"15865","content":"cgroup也可以绑定cpu啊","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1543417778,"ip_address":"","comment_id":44227,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10133323987","product_id":100015201,"comment_content":"老师，感觉cgroups技术没有解决宿主机其他进程争抢容器进程的问题呀","like_count":2,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430686,"discussion_content":"cgroup也可以绑定cpu啊","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543417778,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":34933,"user_name":"Geek_6bab38","can_delete":false,"product_type":"c1","uid":1261301,"ip_address":"","ucode":"118ED65D80A6B5","user_header":"https://static001.geekbang.org/account/avatar/00/13/3e/f5/ba756775.jpg","comment_is_top":false,"comment_ctime":1540359691,"is_pvip":false,"replies":[{"id":"12538","content":"交给容器项目自己管理即可","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1540440023,"ip_address":"","comment_id":34933,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10130294283","product_id":100015201,"comment_content":"请问 用命令执行 cgroups限制后  ，重启后 限制是否依然存在 ，如果不存在 ？怎样让存在呢，我能想到的 是加开机启动<br><br>谢谢，写的很好，是我见过的最好的文章之一","like_count":2,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":427391,"discussion_content":"交给容器项目自己管理即可","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1540440023,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":34572,"user_name":"张杰","can_delete":false,"product_type":"c1","uid":1084478,"ip_address":"","ucode":"4FD773E8C6A7E3","user_header":"https://static001.geekbang.org/account/avatar/00/10/8c/3e/ae0d20fe.jpg","comment_is_top":false,"comment_ctime":1540210130,"is_pvip":false,"replies":[{"id":"12352","content":"容器的这两个做起来比较麻烦","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1540259803,"ip_address":"","comment_id":34572,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10130144722","product_id":100015201,"comment_content":"老师好，为什么k8s 在创建pod 时候 只有对cpu 和内存的限制 没有网络和磁盘io限制的选项？","like_count":2,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":427254,"discussion_content":"容器的这两个做起来比较麻烦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1540259803,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":27959,"user_name":"公众号：云原生Serverless","can_delete":false,"product_type":"c1","uid":1253954,"ip_address":"","ucode":"B615BD756C7552","user_header":"https://static001.geekbang.org/account/avatar/00/13/22/42/79604ce6.jpg","comment_is_top":false,"comment_ctime":1537971153,"is_pvip":false,"replies":[{"id":"10125","content":"不通同容器的文件系统是隔离的啊。至于权限，你想想它该归哪个namespace 管呢？","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1538018476,"ip_address":"","comment_id":27959,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10127905745","product_id":100015201,"comment_content":"请问宿主机的&#47;etc&#47;hosts文件也和&#47;proc类似么，最近遇到个问题，在init-container里修改了hosts文件的权限，在同一个pod中的container中hosts权限也发生了改变，但是在init-container中修改hosts文件内容的话，同一个pod中的container中的hosts文件内容却没有发生改变，这怎么解释？","like_count":2,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":425100,"discussion_content":"不通同容器的文件系统是隔离的啊。至于权限，你想想它该归哪个namespace 管呢？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1538018476,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":23410,"user_name":"jssfy","can_delete":false,"product_type":"c1","uid":1137238,"ip_address":"","ucode":"F16353CFE607B7","user_header":"https://static001.geekbang.org/account/avatar/00/11/5a/56/115c6433.jpg","comment_is_top":false,"comment_ctime":1536339144,"is_pvip":false,"replies":[{"id":"8498","content":"容器直接退出并且可以收到报错。不建议。属于过渡时期遗留环境下的特殊方案。","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1536405961,"ip_address":"","comment_id":23410,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10126273736","product_id":100015201,"comment_content":"试想一下，你这么运行起来的后台进程异常退出后，你如何知晓？由于没有真正的init进程，贸然这么运行起来的孤儿进程是非常棘手的<br><br>1. 正常是如何知晓的呢，应用退出直接导致容器退出？<br>2. 正常情况下我们在容器里可以随便启动各种后台进程，所以那是不建议的？<br>3. 请问对富容器有何看法呢？","like_count":2,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423552,"discussion_content":"容器直接退出并且可以收到报错。不建议。属于过渡时期遗留环境下的特殊方案。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536405961,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":23277,"user_name":"Ariel","can_delete":false,"product_type":"c1","uid":1106229,"ip_address":"","ucode":"74751D02E2891A","user_header":"https://static001.geekbang.org/account/avatar/00/10/e1/35/b8a38d0b.jpg","comment_is_top":false,"comment_ctime":1536249321,"is_pvip":false,"replies":[{"id":"8443","content":"其实，无论虚拟机还是容器，都不可能实打实。当然，容器的更 虚。","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1536286486,"ip_address":"","comment_id":23277,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10126183913","product_id":100015201,"comment_content":"老师，云主机有共享和独享，独享的就是实打实分配指定的cpu和内存，不会受其他租户影响。而容器能这样分配吗？","like_count":2,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423491,"discussion_content":"其实，无论虚拟机还是容器，都不可能实打实。当然，容器的更 虚。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536286486,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":23017,"user_name":"huan","can_delete":false,"product_type":"c1","uid":1012286,"ip_address":"","ucode":"46CB95F6E4E5FF","user_header":"https://static001.geekbang.org/account/avatar/00/0f/72/3e/534db55d.jpg","comment_is_top":false,"comment_ctime":1536111006,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10126045598","product_id":100015201,"comment_content":"2. 进程运行用户一般不用root,到了docker运行都是root用户和权限，也算一种不一致","like_count":2},{"had_liked":false,"id":23003,"user_name":"登高","can_delete":false,"product_type":"c1","uid":1068600,"ip_address":"","ucode":"CD40046238BA18","user_header":"https://static001.geekbang.org/account/avatar/00/10/4e/38/3faa8377.jpg","comment_is_top":false,"comment_ctime":1536108931,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"10126043523","product_id":100015201,"comment_content":"cgroups原来是这样的，之前看着这名字都头疼。<br>最近使用docker-compose有一个mongdb的容器，程序运行起来后，大概率会导致本地都连不上宿主机。看来可能是某个容器资源占用太大了，需要限制一下","like_count":2},{"had_liked":false,"id":289669,"user_name":"万历十五年","can_delete":false,"product_type":"c1","uid":1122150,"ip_address":"","ucode":"3D8CF5DF847AE8","user_header":"https://static001.geekbang.org/account/avatar/00/11/1f/66/59e0647a.jpg","comment_is_top":false,"comment_ctime":1619138625,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5914105921","product_id":100015201,"comment_content":"容器的设计思想：1.单进程模型（要想多个应用进程需创建共同祖先） 2.容器和应用同生命周期<br>优点：1.便捷（通过namespace, cgroup进行隔离和限制），2.高效（资源占用低）<br>不足：1.共享内核（低版本无法运行高版本，无法跨cpu体系运行）2.隔离不彻底（时间，&#47;proc等），有安全隐患","like_count":1},{"had_liked":false,"id":282765,"user_name":"小科蜜","can_delete":false,"product_type":"c1","uid":2194303,"ip_address":"","ucode":"E81B6DBB603AFC","user_header":"https://static001.geekbang.org/account/avatar/00/21/7b/7f/27ae9b63.jpg","comment_is_top":false,"comment_ctime":1615390175,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5910357471","product_id":100015201,"comment_content":"容器和应用能够同生命周期很重要","like_count":1},{"had_liked":false,"id":186946,"user_name":"青葱","can_delete":false,"product_type":"c1","uid":1439553,"ip_address":"","ucode":"0930554D67D013","user_header":"https://static001.geekbang.org/account/avatar/00/15/f7/41/e537f7d1.jpg","comment_is_top":false,"comment_ctime":1583977806,"is_pvip":false,"replies":[{"id":"72829","content":"这个情况比较特殊，先考虑外部巡检系统来进行兜底吧。再考虑用进程管理软件把他们都管理起来。","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1584422841,"ip_address":"","comment_id":186946,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5878945102","product_id":100015201,"comment_content":"老师说的太好了，我们在上容器的时候遇到这样一个问题能帮忙解答一下吗？就是在容器内进程启动子进程时候会突破cgroup的限制，导致宿主机上CPU经常打满。实际场景是我们node应用会调用一个无头浏览器的东西，会启动很多个chrome进程，这些chrome进程就不受k8s limit限制。启动进程一多就会把宿主机CPU。是什么原因导致子进程突破了这个限制，有什么办法解决吗","like_count":1,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":486932,"discussion_content":"这个情况比较特殊，先考虑外部巡检系统来进行兜底吧。再考虑用进程管理软件把他们都管理起来。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584422841,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2713130,"avatar":"https://static001.geekbang.org/account/avatar/00/29/66/2a/6b024b26.jpg","nickname":"loktar","note":"","ucode":"0CA41A78621AA9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":386330,"discussion_content":"老师能详细说一下吗？是什么原因导致的这个问题呢？先不考虑解决。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627530449,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":65208,"user_name":"dacong17","can_delete":false,"product_type":"c1","uid":1051019,"ip_address":"","ucode":"C6A55B87177D50","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/9dWfsO0TlWrIlfURicpxCBkOWyzaFe8kyamjMpzkLk1mbDTCjD9zcKnPJqyV3WrJ8zGs9URNEJw7yD2cLTYK6CQ/132","comment_is_top":false,"comment_ctime":1549108791,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5844076087","product_id":100015201,"comment_content":"在容器里调用settimeofday，时间没有改变，宿主机的时间也没有改变，这个是什么状况，有人测试了吗？？？？？<br>#include &lt;stdio.h&gt;<br>#include &lt;sys&#47;time.h&gt;<br>#include &lt;unistd.h&gt;<br><br>int main(void)<br>{<br>  struct timeval stime;<br>  stime.tv_sec = 123456789;<br>  settimeofday(&amp;stime,NULL); <br>}<br>","like_count":1,"discussions":[{"author":{"id":2030670,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLrbCic7BckSd3xrawFH5KW0yYtI1uSsIEPFh0FIHxvHv9u6XBKgZCqH13qPbZDHTdqgevXLdGQlEw/132","nickname":"Geek_2a4536","note":"","ucode":"640A0D228B275C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":288278,"discussion_content":"进程没有权限修改吧","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593700207,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":50672,"user_name":"吴彪","can_delete":false,"product_type":"c1","uid":1238385,"ip_address":"","ucode":"04EF499564D438","user_header":"https://static001.geekbang.org/account/avatar/00/12/e5/71/cc94469a.jpg","comment_is_top":false,"comment_ctime":1545027950,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5839995246","product_id":100015201,"comment_content":"关于settimeofday，我在ubuntu容器里编译执行下面这段：<br>#include &lt;sys&#47;time.h&gt;<br><br>int main()<br>{<br>   struct timeval tv;<br>   gettimeofday(&amp;tv, 0);<br>   tv.tv_sec += (3 * 60 * 60);   &#47;&#47; add 3 hours (3 * 60 mins * 60 secs) to current time<br>   settimeofday(&amp;tv, 0);<br>   return 0;<br>}<br>容器时间跟宿主机时间都没有变化。在宿主机上执行，却可以改变宿主机的时间。<br>啥情况啊TT","like_count":1},{"had_liked":false,"id":31734,"user_name":"阳雨杭","can_delete":false,"product_type":"c1","uid":1218839,"ip_address":"","ucode":"3128B25A98DC7E","user_header":"https://static001.geekbang.org/account/avatar/00/12/99/17/f67e0d3a.jpg","comment_is_top":false,"comment_ctime":1539273912,"is_pvip":false,"replies":[{"id":"11456","content":"可以google一下centos下的cgroups文件路径","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1539308404,"ip_address":"","comment_id":31734,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5834241208","product_id":100015201,"comment_content":"运行了docker run -it --cpu-period=100000 --cpu-quota=20000 busybox &#47;bin&#47;sh之后，并没有在&#47;sys&#47;fs&#47;cgroup中找到名字为docker的限制组文件夹啊。 我的系统是CentOS Linux release 7.5.1804 (Core)","like_count":1,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":426484,"discussion_content":"可以google一下centos下的cgroups文件路径","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1539308404,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":30510,"user_name":"aze","can_delete":false,"product_type":"c1","uid":1039450,"ip_address":"","ucode":"A9802B0CEA82A8","user_header":"https://static001.geekbang.org/account/avatar/00/0f/dc/5a/af16874a.jpg","comment_is_top":false,"comment_ctime":1538898716,"is_pvip":false,"replies":[{"id":"11068","content":"你应该很快就能明白了","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1539001279,"ip_address":"","comment_id":30510,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5833866012","product_id":100015201,"comment_content":"非常浅显易懂！先记录一下疑问：1如何实现不同容器不同操作系统？2容器磁盘无法限制（IOPS与大小）？3容器的文件在宿主机的文件目录？","like_count":1,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":426029,"discussion_content":"你应该很快就能明白了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1539001279,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":27649,"user_name":"洛子墟","can_delete":false,"product_type":"c1","uid":1036273,"ip_address":"","ucode":"CFC500D00F0B9B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/cf/f1/bf63fef6.jpg","comment_is_top":false,"comment_ctime":1537926920,"is_pvip":false,"replies":[{"id":"9981","content":"一个东西啊，为啥会觉得kubernetes 不用docker呢？","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1537937930,"ip_address":"","comment_id":27649,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5832894216","product_id":100015201,"comment_content":"docker使用cgroup限制资源和K8s提供限制资源的功能有什么区别呢?","like_count":1,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":424984,"discussion_content":"一个东西啊，为啥会觉得kubernetes 不用docker呢？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1537937930,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":25688,"user_name":"lesliexlxiao","can_delete":false,"product_type":"c1","uid":1004807,"ip_address":"","ucode":"0416E5B05661C4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/55/07/6ac856d9.jpg","comment_is_top":false,"comment_ctime":1537410538,"is_pvip":false,"replies":[{"id":"9388","content":"可以啊","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1537447564,"ip_address":"","comment_id":25688,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5832377834","product_id":100015201,"comment_content":"请问下 mkdir container 之后，container 目录无法删除么","like_count":1,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":424391,"discussion_content":"可以啊","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1537447564,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":24477,"user_name":"皮卡熊","can_delete":false,"product_type":"c1","uid":1168508,"ip_address":"","ucode":"4678E029C3C902","user_header":"https://static001.geekbang.org/account/avatar/00/11/d4/7c/1804e69d.jpg","comment_is_top":false,"comment_ctime":1537065625,"is_pvip":false,"replies":[{"id":"8962","content":"这个随便","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1537086581,"ip_address":"","comment_id":24477,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5832032921","product_id":100015201,"comment_content":"必须叫container组吗？这个是怎么关联起来的？","like_count":1,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":424000,"discussion_content":"这个随便","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1537086581,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":23478,"user_name":"Joe Black","can_delete":false,"product_type":"c1","uid":1052528,"ip_address":"","ucode":"21FE222A286445","user_header":"https://static001.geekbang.org/account/avatar/00/10/0f/70/c8680841.jpg","comment_is_top":false,"comment_ctime":1536403068,"is_pvip":false,"replies":[{"id":"8502","content":"听起来做不到","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1536406074,"ip_address":"","comment_id":23478,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5831370364","product_id":100015201,"comment_content":"在这种隔离机制下，在k8s的同一个pod里，能不能实现一个容器挂载类似glusterfs，nfs这样的文件系统，另一个直接就可以使用了呢？效果类似是用一个容器管理另外一个第三方应用的容器的文件系统，有什么办法做到呢？","like_count":1,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423579,"discussion_content":"听起来做不到","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536406074,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":23045,"user_name":"栖枝","can_delete":false,"product_type":"c1","uid":1023930,"ip_address":"","ucode":"4E9A35439B615F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/9f/ba/5a9cb72f.jpg","comment_is_top":false,"comment_ctime":1536121610,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5831088906","product_id":100015201,"comment_content":"精彩，简单通俗易懂","like_count":1},{"had_liked":false,"id":22991,"user_name":"Hurt","can_delete":false,"product_type":"c1","uid":1050946,"ip_address":"","ucode":"DCE7428CCF08EF","user_header":"https://static001.geekbang.org/account/avatar/00/10/09/42/1f762b72.jpg","comment_is_top":false,"comment_ctime":1536106892,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5831074188","product_id":100015201,"comment_content":"第一个不会呀 遇到网络不同步的问题","like_count":1},{"had_liked":false,"id":350659,"user_name":"Realzz","can_delete":false,"product_type":"c1","uid":1045703,"ip_address":"","ucode":"9B4A7BDB18DF3D","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f4/c7/31aedfc5.jpg","comment_is_top":false,"comment_ctime":1657077414,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1657077414","product_id":100015201,"comment_content":"Docker里面&#47;proc是宿主机的信息，所以node-exporter可以暴露出宿主机的指标信息，cadvisor能查看单个容器的使用情况，是如何做到的呢？","like_count":0},{"had_liked":false,"id":350053,"user_name":"c340","can_delete":false,"product_type":"c1","uid":1111176,"ip_address":"","ucode":"D64CC3DDD09A0F","user_header":"https://static001.geekbang.org/account/avatar/00/10/f4/88/133bc14b.jpg","comment_is_top":false,"comment_ctime":1656547054,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1656547054","product_id":100015201,"comment_content":"是不是有个time namespace,可以设置启动时间和单调时间","like_count":0},{"had_liked":false,"id":349906,"user_name":"De_sword","can_delete":false,"product_type":"c1","uid":1369357,"ip_address":"","ucode":"4CED9185904376","user_header":"https://static001.geekbang.org/account/avatar/00/14/e5/0d/8114646a.jpg","comment_is_top":false,"comment_ctime":1656420782,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1656420782","product_id":100015201,"comment_content":"cgroup限制资源。namespace对进程号虚拟化","like_count":0},{"had_liked":false,"id":349078,"user_name":"星期一的包子","can_delete":false,"product_type":"c1","uid":2914948,"ip_address":"","ucode":"A37C5310C0EB64","user_header":"https://static001.geekbang.org/account/avatar/00/2c/7a/84/07b4c263.jpg","comment_is_top":false,"comment_ctime":1655716053,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1655716053","product_id":100015201,"comment_content":" 你好老师，我在使用cgroup来限制死循环占用的cpu时，发现设置完成后无法生效，这是什么原因呢.<br>确认数值都修改后，使用top查看还是90%-100%","like_count":0},{"had_liked":false,"id":348203,"user_name":"木木夕","can_delete":false,"product_type":"c1","uid":1042385,"ip_address":"","ucode":"75BDB2ED7B9A4E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/e7/d1/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1654844772,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1654844772","product_id":100015201,"comment_content":"有个困惑，前面不是讲了没有容器实体这个东西吗？容器到底是个什么东西？容器是个进程，我们开发的业务程序也是个进程，业务进程在容器进程里运行吗？应用程序不是运行在宿主操作系统上吗？","like_count":0},{"had_liked":false,"id":347981,"user_name":"良记","can_delete":false,"product_type":"c1","uid":1033503,"ip_address":"","ucode":"F78CC56BB32D8F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c5/1f/485fcff9.jpg","comment_is_top":false,"comment_ctime":1654648719,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1654648719","product_id":100015201,"comment_content":"作为容器的小白，还是没有能理解容器和虚拟机的不同。<br>同样是对用户进行资源分配，虚拟机是因为要另外维护一套操作系统，所以比在同一套操作系统里边做限制的容器效率要差？","like_count":0},{"had_liked":false,"id":347026,"user_name":"Geek_3f38ee","can_delete":false,"product_type":"c1","uid":2064938,"ip_address":"","ucode":"C44C0939CDA77C","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIGw6E5aNlF5RgjP7f4GWX0IHsbWMvseYNfN7tfiaXElXJyCoKfJD1Mg7lGBeu31D16Us4iaYvB55Lw/132","comment_is_top":false,"comment_ctime":1653627631,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1653627631","product_id":100015201,"comment_content":"请教个问题  如果说镜像和物理机用的内核一样。 那如果物理机是arm 或者x86。两种情况下。  是不是要分别打不同的镜像。以保持和物理机一致<br>","like_count":0},{"had_liked":false,"id":345285,"user_name":"一","can_delete":false,"product_type":"c1","uid":2727145,"ip_address":"","ucode":"3E7BE7ACF1CA2B","user_header":"https://static001.geekbang.org/account/avatar/00/29/9c/e9/ad9f5d05.jpg","comment_is_top":false,"comment_ctime":1652173301,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1652173301","product_id":100015201,"comment_content":"K8s的底层隔离是怎样实现的，跟Docker一样用namespace吗？<br>","like_count":0},{"had_liked":false,"id":344833,"user_name":"Jay","can_delete":false,"product_type":"c1","uid":1070670,"ip_address":"","ucode":"ED9970F7E66080","user_header":"https://static001.geekbang.org/account/avatar/00/10/56/4e/9291fac0.jpg","comment_is_top":false,"comment_ctime":1651816235,"is_pvip":true,"discussion_count":0,"race_medal":4,"score":"1651816235","product_id":100015201,"comment_content":"一个正在运行的 Docker 容器，其实就是一个启用了多个 Linux Namespace 的应用进程，而这个进程能够使用的资源量，则受 Cgroups 配置的限制。<br><br>上面这句话没太懂，不是说一个namespace对应一个进程吗，怎么会是一个应用进程启用多个namespace呢？","like_count":0},{"had_liked":false,"id":343007,"user_name":"其异果吖","can_delete":false,"product_type":"c1","uid":2984482,"ip_address":"","ucode":"B8B8ABF98A0B61","user_header":"https://static001.geekbang.org/account/avatar/00/2d/8a/22/b206469a.jpg","comment_is_top":false,"comment_ctime":1650590950,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1650590950","product_id":100015201,"comment_content":"docker容器内存做限制，那如果一个容器内存限制为4g，这个容器使用超过4g后会不会宕机，无法使用，只能重启这个容器才能恢复正常使用","like_count":0},{"had_liked":false,"id":342510,"user_name":"Nio","can_delete":false,"product_type":"c1","uid":1529642,"ip_address":"","ucode":"A1B8D3C01FB937","user_header":"https://static001.geekbang.org/account/avatar/00/17/57/2a/c6c95f37.jpg","comment_is_top":false,"comment_ctime":1650296602,"is_pvip":true,"discussion_count":0,"race_medal":4,"score":"1650296602","product_id":100015201,"comment_content":"隔离通过namespace，资源的限制通过cgroup，环境的控制是由什么保证的呢？","like_count":0},{"had_liked":false,"id":341600,"user_name":"怀揣梦想的学渣","can_delete":false,"product_type":"c1","uid":1916685,"ip_address":"","ucode":"2349B9F4F6FDE3","user_header":"https://static001.geekbang.org/account/avatar/00/1d/3f/0d/1e8dbb2c.jpg","comment_is_top":false,"comment_ctime":1649730938,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1649730938","product_id":100015201,"comment_content":"通俗易懂，我居然能理解，哈哈哈，前段时间看别人写的材料，同样的内容，看的我一头雾水，没想到作者在这部分写的如此清晰易懂，特别是资源占用的限制这部分，我有收获。","like_count":0},{"had_liked":false,"id":339467,"user_name":"琦彦","can_delete":false,"product_type":"c1","uid":1640619,"ip_address":"","ucode":"2CB8774880323F","user_header":"https://static001.geekbang.org/account/avatar/00/19/08/ab/02771a56.jpg","comment_is_top":false,"comment_ctime":1648115598,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1648115598","product_id":100015201,"comment_content":"请教下docker --cpu-period 后 没有&#47;sys&#47;fs&#47;cgroup&#47;cpu&#47;docker这个目录","like_count":0},{"had_liked":false,"id":327379,"user_name":"阿甘","can_delete":false,"product_type":"c1","uid":1057843,"ip_address":"","ucode":"BC93175B70E05D","user_header":"https://static001.geekbang.org/account/avatar/00/10/24/33/bcf37f50.jpg","comment_is_top":false,"comment_ctime":1640090675,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1640090675","product_id":100015201,"comment_content":"&gt; 或者在低版本的 Linux 宿主机上运行高版本的 Linux 容器，都是行不通的。<br>但是我知道chroot可以做到（之前公司这么操作过），本质上docker应该也可以做到才对","like_count":0},{"had_liked":false,"id":327376,"user_name":"马以","can_delete":false,"product_type":"c1","uid":1344431,"ip_address":"","ucode":"3FEA06CA14DE28","user_header":"https://static001.geekbang.org/account/avatar/00/14/83/af/1cb42cd3.jpg","comment_is_top":false,"comment_ctime":1640089172,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1640089172","product_id":100015201,"comment_content":"容器里面的 &#47;sys&#47;fs&#47;cgroup&#47;cpu 在宿主机上的存在形式是什么呢？","like_count":0},{"had_liked":false,"id":322484,"user_name":"无笔秀才","can_delete":false,"product_type":"c1","uid":1123152,"ip_address":"","ucode":"DCFA10866A8E5B","user_header":"https://static001.geekbang.org/account/avatar/00/11/23/50/1f5154fe.jpg","comment_is_top":false,"comment_ctime":1637411149,"is_pvip":true,"discussion_count":0,"race_medal":3,"score":"1637411149","product_id":100015201,"comment_content":"$ cat &#47;sys&#47;fs&#47;cgroup&#47;cpu&#47;docker&#47;5d5c9f67d&#47;cpu.cfs_period_us <br>100000<br>$ cat &#47;sys&#47;fs&#47;cgroup&#47;cpu&#47;docker&#47;5d5c9f67d&#47;cpu.cfs_quota_us <br>20000<br><br>我有一个疑问，这里是说这个容器可以用到20%的cpu,那我要是开了10个容器每个里面都写占用20%  那会怎么样？","like_count":0},{"had_liked":false,"id":321325,"user_name":"Geek_06eda3","can_delete":false,"product_type":"c1","uid":2846414,"ip_address":"","ucode":"C4C3291B297286","user_header":"","comment_is_top":false,"comment_ctime":1636793418,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1636793418","product_id":100015201,"comment_content":"老师，这个资源的限制能做到虚拟机那样绑核吗？比如宿主机是3C3G，我启动一个1C1G的容器，但是里面没有东西在跑，其他的容器能使用这1C1G的资源吗","like_count":0},{"had_liked":false,"id":320265,"user_name":"与君共勉","can_delete":false,"product_type":"c1","uid":1763046,"ip_address":"","ucode":"1FB5EBFCF510A1","user_header":"","comment_is_top":false,"comment_ctime":1636184018,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1636184018","product_id":100015201,"comment_content":"老师，请教一个问题：我启动一个容器后，一号进程是我的主业务java进程，但是在主进程下我启动了一个子进程做定时任务。容器只和一号进程同生命周期，也就是容器退出意味着一号进程退出，但是这并不意味着子进程退出，是不是造成了一个现象，就是容器退出了，但是定时任务还在那里一直跑，那这个不就造成cpu资源泄露吗？","like_count":0},{"had_liked":false,"id":316102,"user_name":"Geek_fightingDC","can_delete":false,"product_type":"c1","uid":1843027,"ip_address":"","ucode":"EF7F7316ADFF49","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83equSjO9AVmwhvyhTZzk6icNTSED9s1sUdFZSfqTHq2PmZ4MibMFX58C8qDW2a4cjiaFvAdiaRchsLz54g/132","comment_is_top":false,"comment_ctime":1634135657,"is_pvip":true,"discussion_count":0,"race_medal":1,"score":"1634135657","product_id":100015201,"comment_content":"打卡day6.<br><br>今天学到了cgroups技术的原理，以及在容器技术中的应用。<br><br>通过namespace的隔离，和cgroup技术的限制作用，实现了容器的沙盒环境的效果。","like_count":0},{"had_liked":false,"id":312806,"user_name":"师师","can_delete":false,"product_type":"c1","uid":2762955,"ip_address":"","ucode":"AF3EB5FDA6285C","user_header":"https://static001.geekbang.org/account/avatar/00/2a/28/cb/42c9b1a0.jpg","comment_is_top":false,"comment_ctime":1632034094,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1632034094","product_id":100015201,"comment_content":"wget https:&#47;&#47;copr-be.cloud.fedoraproject.org&#47;results&#47;ganto&#47;lxc3&#47;epel-7-x86_64&#47;01041891-lxcfs&#47;lxcfs-3.1.2-0.2.el7.x86_64.rpm;<br>rpm -ivh lxcfs-3.1.2-0.2.el7.x86_64.rpm --force --nodeps<br><br>部署命令如上，直接后台启动，如下验证：<br>docker run -it -m 512m \\<br>      -v &#47;var&#47;lib&#47;lxcfs&#47;proc&#47;cpuinfo:&#47;proc&#47;cpuinfo:rw \\<br>      -v &#47;var&#47;lib&#47;lxcfs&#47;proc&#47;diskstats:&#47;proc&#47;diskstats:rw \\<br>      -v &#47;var&#47;lib&#47;lxcfs&#47;proc&#47;meminfo:&#47;proc&#47;meminfo:rw \\<br>      -v &#47;var&#47;lib&#47;lxcfs&#47;proc&#47;stat:&#47;proc&#47;stat:rw \\<br>      -v &#47;var&#47;lib&#47;lxcfs&#47;proc&#47;swaps:&#47;proc&#47;swaps:rw \\<br>      -v &#47;var&#47;lib&#47;lxcfs&#47;proc&#47;uptime:&#47;proc&#47;uptime:rw \\<br>      ubuntu:latest &#47;bin&#47;bash","like_count":0},{"had_liked":false,"id":312434,"user_name":"Severus4","can_delete":false,"product_type":"c1","uid":2273076,"ip_address":"","ucode":"79BC6487B595EE","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eo1QZQ0eoOqvOyMyAzcsyEK8bQaZTd9aJHTTCYicicUm9gmhUFaxQe6IBc3caLVD8PhqtmhhicrNHe0w/132","comment_is_top":false,"comment_ctime":1631799035,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1631799035","product_id":100015201,"comment_content":"请教一下，容器里&#47;sys&#47;fs&#47;cgroup&#47;cpu里mkdir container的时候报read-only filesystem了，remount也提示没有权限，请问是在启动docker时候可以指定权限吗？还是有别的解决方案？","like_count":0},{"had_liked":false,"id":309230,"user_name":"用户7083912645","can_delete":false,"product_type":"c1","uid":2221120,"ip_address":"","ucode":"512BF53AB2EBE4","user_header":"https://static001.geekbang.org/account/avatar/00/21/e4/40/7431e82e.jpg","comment_is_top":false,"comment_ctime":1629991079,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1629991079","product_id":100015201,"comment_content":"一个正在运行的 Docker 容器，其实就是一个启用了多个 Linux Namespace 的应用进程，而这个进程能够使用的资源量，则受 Cgroups 配置的限制。<br><br>这里为什么是多个namespace","like_count":0},{"had_liked":false,"id":306755,"user_name":"Lukri","can_delete":false,"product_type":"c1","uid":1224659,"ip_address":"","ucode":"31495D68FF0897","user_header":"https://static001.geekbang.org/account/avatar/00/12/af/d3/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1628690885,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1628690885","product_id":100015201,"comment_content":"是不是这样理解的，container其实是一些辅助设置，容器进程其实就是应用进程，容器中其他的进程也都是这个应用进程的子进程，该应用看不到宿主机的其他应用进程是由于namespace，而其资源限制是cgroup","like_count":0},{"had_liked":false,"id":304652,"user_name":"L·","can_delete":false,"product_type":"c1","uid":1246682,"ip_address":"","ucode":"061FDD9E756449","user_header":"https://static001.geekbang.org/account/avatar/00/13/05/da/202daf69.jpg","comment_is_top":false,"comment_ctime":1627535580,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1627535580","product_id":100015201,"comment_content":"文件句柄数是怎么隔离限制的呢","like_count":0},{"had_liked":false,"id":303122,"user_name":"Geek_c5f139","can_delete":false,"product_type":"c1","uid":2258431,"ip_address":"","ucode":"19BF21D714E33F","user_header":"","comment_is_top":false,"comment_ctime":1626601285,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1626601285","product_id":100015201,"comment_content":"1、看完本文，对客户把容器运行在云主机上的需求有了新的理解。看来有些客户选择先做云平台，然后再集成容器到云平台上，也是有比较充分的业务考量。<br>2、文中提到的while死循环，执行以后机器就卡住了，博主是如何继续进行后续操作的。<br>博主是一开始接触这些资源是如何去学习的，通过公司内的资料吗，还是有其他公开的学习渠道。感觉博主的文章里面讲到很多比较基础的内容，对比我学过的内容，有些基础知识我从未接触过。<br>","like_count":0},{"had_liked":false,"id":300651,"user_name":"ayesd","can_delete":false,"product_type":"c1","uid":1053368,"ip_address":"","ucode":"0DFD7F882902F3","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/9iblrUMRjgJS9F8Ky6aQy6FjIJaXAco8yArReNYJk9RYicX9hlX9j3kvdqveHBrjkxg579d9WqQj9YmXQMwm8UicA/132","comment_is_top":false,"comment_ctime":1625288530,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1625288530","product_id":100015201,"comment_content":"从这个角度来看，宿主机才是安全的最大隐患，基本可以透明的看到所有容器中的所有内容，而且因为容器共享了宿主机的很多内容，所以在宿主机上可以修改共享内容，进而控制容器的很多行为。","like_count":0},{"had_liked":false,"id":299250,"user_name":"Geek_5582cf","can_delete":false,"product_type":"c1","uid":2670398,"ip_address":"","ucode":"8177C210015458","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/UniaxFelbP10lBqkicibHh2fIcnicJW7OrjfvJpC9cs7eKpdKyGRRvhwpI2b9o1CibgZMl2CMZIMR6MiafgcEBLPzmmg/132","comment_is_top":false,"comment_ctime":1624531583,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1624531583","product_id":100015201,"comment_content":"有点疑惑：rootfs里会包含操作系统底层的依赖文件吗？","like_count":0},{"had_liked":false,"id":298353,"user_name":"BIZ_DATA_1","can_delete":false,"product_type":"c1","uid":1655770,"ip_address":"","ucode":"EB1706A649ECE2","user_header":"","comment_is_top":false,"comment_ctime":1624034772,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1624034772","product_id":100015201,"comment_content":"做实验过程中，有两个问题，还请老师解疑。<br>1. 无法在容器内的&#47;sys&#47;fs&#47;cgroup&#47;cpu&#47;下新建container目录。<br>2. 容器内top的结果包含的进程只有在容器内创建的进程，并不是和宿主机top的结果一样。","like_count":0},{"had_liked":false,"id":295712,"user_name":"IS Aaron","can_delete":false,"product_type":"c1","uid":1170143,"ip_address":"","ucode":"5FA00F20C17DC9","user_header":"https://static001.geekbang.org/account/avatar/00/11/da/df/87464e34.jpg","comment_is_top":false,"comment_ctime":1622555211,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1622555211","product_id":100015201,"comment_content":"<br> echo 20000 &gt; &#47;sys&#47;fs&#47;cgroup&#47;cpu&#47;container&#47;cpu.cfs_quota_us 这句话很奇怪 , 我怎么弄都执行不了 , 已经拿到了root权限 , 但是每次执行的时候都会出现 echo : I&#47;O error <br>然后我看了看 cpu.cfs_quota_us 是只读文件 , 然后捣鼓了很久 , 还是没有写入成功  , 怎么办","like_count":0},{"had_liked":false,"id":292686,"user_name":"Free","can_delete":false,"product_type":"c1","uid":2112134,"ip_address":"","ucode":"0AD38A0B3611E6","user_header":"https://static001.geekbang.org/account/avatar/00/20/3a/86/92c20959.jpg","comment_is_top":false,"comment_ctime":1620920682,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1620920682","product_id":100015201,"comment_content":"老师好，请教一个问题。既然 mac docker是个虚拟机，那为了观察docker的操作效果和虚拟机的执行结果，有什么手段能像操作linux系统一样操作这个虚拟机吗？","like_count":0,"discussions":[{"author":{"id":2112134,"avatar":"https://static001.geekbang.org/account/avatar/00/20/3a/86/92c20959.jpg","nickname":"Free","note":"","ucode":"0AD38A0B3611E6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375410,"discussion_content":"通过调查，目前主要有两种方式：\n第一种：\n   通过screen命令进入虚拟机中（由于自己电脑上并不存在tty，所以并未尝试）。命令是：screen ~/Library/Containers/com.docker.docker/Data/vms/0/tty \n\n第二种：\n  新建一个容器和虚拟机共享Namespace，这样自然就可以访问虚拟机的资源。\n  命令是：docker run -it --privileged --pid=host debian nsenter -t 1 -m -u -n -I sh\n  进入容器后剩下的就和操作容器没啥差别了。\n","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1621615523,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":289671,"user_name":"万历十五年","can_delete":false,"product_type":"c1","uid":1122150,"ip_address":"","ucode":"3D8CF5DF847AE8","user_header":"https://static001.geekbang.org/account/avatar/00/11/1f/66/59e0647a.jpg","comment_is_top":false,"comment_ctime":1619139289,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1619139289","product_id":100015201,"comment_content":"老师写得真好，语句通顺，通俗易懂👍<br>每篇读完总有意犹未尽的感觉，请问老师想多了解关于namespace和cgroup，或者相关知识的话，您有哪些推荐? 自己现在的阶段，完全是不知道自己不知道，还请老师多给一些学习容器的学习建议和学习资料的推荐，谢谢。","like_count":0},{"had_liked":false,"id":284435,"user_name":"༺༒༻","can_delete":false,"product_type":"c1","uid":1287631,"ip_address":"","ucode":"289968F065B062","user_header":"https://static001.geekbang.org/account/avatar/00/13/a5/cf/7ac4cd56.jpg","comment_is_top":false,"comment_ctime":1616248791,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1616248791","product_id":100015201,"comment_content":"&quot;而对于 Docker 等 Linux 容器项目来说，它们只需要在每个子系统下面，为每个容器创建一个控制组（即创建一个新目录），然后在启动容器进程之后，把这个进程的 PID 填写到对应控制组的 tasks 文件中就可以了。&quot;<br><br> 请问，task里这个PID是宿主机的那个编号“100”的进程pid，还是容器里的那个编号“1”的进程pid？","like_count":0},{"had_liked":false,"id":284299,"user_name":"sky","can_delete":false,"product_type":"c1","uid":1049994,"ip_address":"","ucode":"C0859057592720","user_header":"https://static001.geekbang.org/account/avatar/00/10/05/8a/e7c5a7e2.jpg","comment_is_top":false,"comment_ctime":1616154035,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1616154035","product_id":100015201,"comment_content":"作者讲了cpu限制，内存是怎限制的呢","like_count":0},{"had_liked":false,"id":282764,"user_name":"小科蜜","can_delete":false,"product_type":"c1","uid":2194303,"ip_address":"","ucode":"E81B6DBB603AFC","user_header":"https://static001.geekbang.org/account/avatar/00/21/7b/7f/27ae9b63.jpg","comment_is_top":false,"comment_ctime":1615390152,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1615390152","product_id":100015201,"comment_content":"Namespace+Cgroups ","like_count":0},{"had_liked":false,"id":281657,"user_name":"Geek_a852c8","can_delete":false,"product_type":"c1","uid":2206508,"ip_address":"","ucode":"D925A9D71A76BA","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/O6qftWBakkjQHrAhF5tia21GKkQxibJaPy2nWUKc9eiaouaqb67Hj60RRKgjgHhzPmaxaHkLszcNYrDSkj21lPylQ/132","comment_is_top":false,"comment_ctime":1614841810,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1614841810","product_id":100015201,"comment_content":"我们要求我们的平台需要支持国产的服务器。而国产服务器是arm架构的。我们直接在国产服务器上面运行我们的容器，就报错。后面只能用arm架构的jdk重新构造镜像了","like_count":0},{"had_liked":false,"id":280530,"user_name":"螃蟹","can_delete":false,"product_type":"c1","uid":2078211,"ip_address":"","ucode":"8D5C707FF2CA37","user_header":"https://static001.geekbang.org/account/avatar/00/1f/b6/03/0abb4c8c.jpg","comment_is_top":false,"comment_ctime":1614242064,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1614242064","product_id":100015201,"comment_content":"大师绝对是大师继续学习中。","like_count":0},{"had_liked":false,"id":258108,"user_name":"Geek_9086e6","can_delete":false,"product_type":"c1","uid":1895344,"ip_address":"","ucode":"8063EA4B90E01F","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/rhB6z7ooXBib03jbBjgb8k6ziaRVPGrVicvYFAWlRPe2Y1XzdJYfhjFkFF7LnhQEEpEUSAWheeDa1p9JxGib9LciaCw/132","comment_is_top":false,"comment_ctime":1604301436,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1604301436","product_id":100015201,"comment_content":"现在是不是可以在windows 10上跑linux的container了呢？","like_count":0},{"had_liked":false,"id":248475,"user_name":"nodenota","can_delete":false,"product_type":"c1","uid":1292438,"ip_address":"","ucode":"6D5C9485CEB327","user_header":"https://static001.geekbang.org/account/avatar/00/13/b8/96/82a849e3.jpg","comment_is_top":false,"comment_ctime":1600175154,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1600175154","product_id":100015201,"comment_content":"感觉容器技术就是在对Linux操作系统内核空间再编程，把用户空间留给业务应用开发人员。","like_count":0},{"had_liked":false,"id":244445,"user_name":"Heaven","can_delete":false,"product_type":"c1","uid":1694207,"ip_address":"","ucode":"FA33FBCC66C911","user_header":"https://static001.geekbang.org/account/avatar/00/19/d9/ff/b23018a6.jpg","comment_is_top":false,"comment_ctime":1598519840,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1598519840","product_id":100015201,"comment_content":"现在看来,Docker和虚拟机最大的区别在于,Docker只能在一个基于Linxu内核的系统进行运行<br>而虚拟机则是可以在任何系统上进行创建,相当于直接创建了一个系统","like_count":0},{"had_liked":false,"id":237934,"user_name":"TIAN","can_delete":false,"product_type":"c1","uid":1276795,"ip_address":"","ucode":"CCCF80602C1753","user_header":"https://static001.geekbang.org/account/avatar/00/13/7b/7b/5b39b47b.jpg","comment_is_top":false,"comment_ctime":1596009248,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1596009248","product_id":100015201,"comment_content":"你如果在容器里执行 top 指令，就会发现，它显示的信息居然是宿主机的 CPU 和内存数据，而不是当前容器的数据。<br><br>那老师执行top命令为什么能看到20%的限制？<br><br>一个正在运行的 Docker 容器，其实就是一个启用了多个 Linux Namespace 的应用进程，而这个进程能够使用的资源量，则受 Cgroups 配置的限制。<br><br>一个docker里有多个namespaces吗？多个不同的namespace，还是多个组件在同一个namespsace中？","like_count":0},{"had_liked":false,"id":237031,"user_name":"李圣悦","can_delete":false,"product_type":"c1","uid":1638427,"ip_address":"","ucode":"C1786C98824E50","user_header":"https://static001.geekbang.org/account/avatar/00/19/00/1b/eee13196.jpg","comment_is_top":false,"comment_ctime":1595662313,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1595662313","product_id":100015201,"comment_content":"老师你好，请教一个问题：用户a启动一个docker容器，容器内运行在用户B，那用户a挂载到容器里面的目录，容器进程有权限访问吗？尝试了一下，权限不够，如果要访问的话该怎么做？","like_count":0},{"had_liked":false,"id":234064,"user_name":"张一凡","can_delete":false,"product_type":"c1","uid":1787798,"ip_address":"","ucode":"207E70AE242AC2","user_header":"https://static001.geekbang.org/account/avatar/00/1b/47/96/049d4250.jpg","comment_is_top":false,"comment_ctime":1594569420,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1594569420","product_id":100015201,"comment_content":"是不是只有容器只能发挥单核cpu的作用呢？这里的cpu限制只是做了单个cpu的运行时间的分割<br>","like_count":0},{"had_liked":false,"id":233736,"user_name":"？","can_delete":false,"product_type":"c1","uid":2030035,"ip_address":"","ucode":"3043E00A056081","user_header":"https://static001.geekbang.org/account/avatar/00/1e/f9/d3/2cb7516e.jpg","comment_is_top":false,"comment_ctime":1594428874,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1594428874","product_id":100015201,"comment_content":"学到了学到了","like_count":0},{"had_liked":false,"id":219871,"user_name":"EndLess","can_delete":false,"product_type":"c1","uid":1548709,"ip_address":"","ucode":"F7B2794DC9BEE9","user_header":"https://static001.geekbang.org/account/avatar/00/17/a1/a5/8299b642.jpg","comment_is_top":false,"comment_ctime":1590112997,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1590112997","product_id":100015201,"comment_content":"造成这个问题的原因就是，&#47;proc 文件系统并不知道用户通过 Cgroups 给这个容器做了什么样的资源限制，即：&#47;proc 文件系统不了解 Cgroups 限制的存在。 这个怎么避免呢","like_count":0},{"had_liked":false,"id":219869,"user_name":"EndLess","can_delete":false,"product_type":"c1","uid":1548709,"ip_address":"","ucode":"F7B2794DC9BEE9","user_header":"https://static001.geekbang.org/account/avatar/00/17/a1/a5/8299b642.jpg","comment_is_top":false,"comment_ctime":1590112710,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1590112710","product_id":100015201,"comment_content":"老师，请问像mongo，mysql这类容器，进程cpu会跑到超过100%，这种会多核cpu利用的程序该怎么限制…","like_count":0,"discussions":[{"author":{"id":1580926,"avatar":"","nickname":"ch_ort","note":"","ucode":"B79746E687F29E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":299006,"discussion_content":"cfs_quota_us 也是可以大于 cfs_period_us 的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597506337,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":208348,"user_name":"菲哥","can_delete":false,"product_type":"c1","uid":1045943,"ip_address":"","ucode":"FF9B4C435D61A9","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f5/b7/362f3a9b.jpg","comment_is_top":false,"comment_ctime":1587343657,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1587343657","product_id":100015201,"comment_content":"对比图，左侧hypervisor不应该直接跑在server上吗，还需要在hostos之上？比如esxi不是直接在x86之上的吗？","like_count":0},{"had_liked":false,"id":202373,"user_name":"庄泽波","can_delete":false,"product_type":"c1","uid":1148503,"ip_address":"","ucode":"81F973701AD4A1","user_header":"https://static001.geekbang.org/account/avatar/00/11/86/57/995f35d7.jpg","comment_is_top":false,"comment_ctime":1585979000,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1585979000","product_id":100015201,"comment_content":"容器的是宿主机的一个进程，资源通过Linux namespace隔离，通过Linux cgroup限制资源，和宿主机使用相同内核，可以使用不同Linux发布版本如Centos，Ubuntu等","like_count":0},{"had_liked":false,"id":196989,"user_name":"J","can_delete":false,"product_type":"c1","uid":1075605,"ip_address":"","ucode":"A82ED41C7AC59B","user_header":"https://static001.geekbang.org/account/avatar/00/10/69/95/22f155db.jpg","comment_is_top":false,"comment_ctime":1585327906,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585327906","product_id":100015201,"comment_content":"很精彩","like_count":0},{"had_liked":false,"id":194928,"user_name":"阿泰没有斯特","can_delete":false,"product_type":"c1","uid":1846772,"ip_address":"","ucode":"6B081B785D9D6A","user_header":"https://static001.geekbang.org/account/avatar/00/1c/2d/f4/104a3712.jpg","comment_is_top":false,"comment_ctime":1585121377,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585121377","product_id":100015201,"comment_content":"看了这两篇后明白了容器的本质","like_count":0},{"had_liked":false,"id":193779,"user_name":"亢（知行合一的路上）","can_delete":false,"product_type":"c1","uid":1347013,"ip_address":"","ucode":"958AF7C96EB9E8","user_header":"https://static001.geekbang.org/account/avatar/00/14/8d/c5/898b13b4.jpg","comment_is_top":false,"comment_ctime":1584962417,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584962417","product_id":100015201,"comment_content":"容器和应用同生命周期，确实给运维带来了方便。<br>通过 Namespace，修改进程的视图，实现隔离。通过 Cgroups，约束使用的资源。通过一组参数就和系统其它进程隔离开了，老师讲得非常好！","like_count":0},{"had_liked":false,"id":192061,"user_name":"东","can_delete":false,"product_type":"c1","uid":1224253,"ip_address":"","ucode":"E4B59163A9CFE6","user_header":"https://static001.geekbang.org/account/avatar/00/12/ae/3d/e87f561b.jpg","comment_is_top":false,"comment_ctime":1584835030,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584835030","product_id":100015201,"comment_content":"容器是不是可以看做一个没有外设管理的虚机吗？","like_count":0},{"had_liked":false,"id":191795,"user_name":"duu","can_delete":false,"product_type":"c1","uid":1220771,"ip_address":"","ucode":"67570AFEB84D89","user_header":"https://static001.geekbang.org/account/avatar/00/12/a0/a3/7a85e2d8.jpg","comment_is_top":false,"comment_ctime":1584796978,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584796978","product_id":100015201,"comment_content":"老师有没有好的linux学习资料或者课程之类的推荐，麻烦你了。","like_count":0},{"had_liked":false,"id":191537,"user_name":"ch_ort","can_delete":false,"product_type":"c1","uid":1580926,"ip_address":"","ucode":"B79746E687F29E","user_header":"","comment_is_top":false,"comment_ctime":1584779699,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584779699","product_id":100015201,"comment_content":"为啥我写的死循环命令后，看CPU没有吃光。1.1us","like_count":0},{"had_liked":false,"id":188755,"user_name":"WiSoniC","can_delete":false,"product_type":"c1","uid":1910345,"ip_address":"","ucode":"FB5EDF6B902950","user_header":"https://static001.geekbang.org/account/avatar/00/1d/26/49/491fbb94.jpg","comment_is_top":false,"comment_ctime":1584411964,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584411964","product_id":100015201,"comment_content":"豁然开朗。","like_count":0},{"had_liked":false,"id":184178,"user_name":"hellofuture","can_delete":false,"product_type":"c1","uid":1006336,"ip_address":"","ucode":"6F76A79ECBE1B7","user_header":"https://static001.geekbang.org/account/avatar/00/0f/5b/00/9078412c.jpg","comment_is_top":false,"comment_ctime":1583243504,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1583243504","product_id":100015201,"comment_content":"新版本docker已经不存在1问题了，而且&#47;sys&#47;fs&#47;cgroup&#47;cpu改为了只读","like_count":0},{"had_liked":false,"id":178310,"user_name":"冯晓雨","can_delete":false,"product_type":"c1","uid":1644044,"ip_address":"","ucode":"9F704E3451589C","user_header":"https://static001.geekbang.org/account/avatar/00/19/16/0c/a56356cc.jpg","comment_is_top":false,"comment_ctime":1581658236,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1581658236","product_id":100015201,"comment_content":"资源限制的大小怎么限定啊","like_count":0},{"had_liked":false,"id":177609,"user_name":"Sky","can_delete":false,"product_type":"c1","uid":1392585,"ip_address":"","ucode":"4C5A5AB73E8B90","user_header":"https://static001.geekbang.org/account/avatar/00/15/3f/c9/1ccefb9a.jpg","comment_is_top":false,"comment_ctime":1581433481,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1581433481","product_id":100015201,"comment_content":"由于一个容器的本质就是一个进程，用户的应用进程实际上就是容器里 PID=1 的进程，也是其他后续创建的所有进程的父进程。这就意味着，在一个容器中，你没办法同时运行两个不同的应用，除非你能事先找到一个公共的 PID=1 的程序来充当两个不同应用的父进程，这也是为什么很多人都会用 systemd 或者 supervisord 这样的软件来代替应用本身作为容器的启动进程。<br><br>这一段的意思是不是这样：当一个容器启动的时候容器的这个“进程”就启动了，然而如果想让一个容器启动多个进程，就需要通过用容器启动的时候自身的进程做为一个拉起其他进程的工具才行。","like_count":0},{"had_liked":false,"id":171298,"user_name":"Daniel","can_delete":false,"product_type":"c1","uid":1020529,"ip_address":"","ucode":"282E09B3146501","user_header":"https://static001.geekbang.org/account/avatar/00/0f/92/71/9fd7cd7a.jpg","comment_is_top":false,"comment_ctime":1578896557,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1578896557","product_id":100015201,"comment_content":"我觉得 讲的太好了，跟着代码过了一下，现在很多知识点我了解的都很透彻。","like_count":0},{"had_liked":false,"id":167392,"user_name":"巴西","can_delete":false,"product_type":"c1","uid":1119116,"ip_address":"","ucode":"6E68AA02011541","user_header":"https://static001.geekbang.org/account/avatar/00/11/13/8c/c86340ca.jpg","comment_is_top":false,"comment_ctime":1577782671,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1577782671","product_id":100015201,"comment_content":"太棒了","like_count":0},{"had_liked":false,"id":164524,"user_name":"Jack","can_delete":false,"product_type":"c1","uid":1782781,"ip_address":"","ucode":"33C2A27D2F4284","user_header":"https://static001.geekbang.org/account/avatar/00/1b/33/fd/1169c0f8.jpg","comment_is_top":false,"comment_ctime":1577020676,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1577020676","product_id":100015201,"comment_content":"请教个docker 方面的问题(我从官网没找到相关资料)  关于seccomp的，docker CE 下执行docker info 没有安全提示，而docker则提示 没有使用&#47;etc&#47;docker&#47;accomplish.json，这是为什么？<br>","like_count":0},{"had_liked":false,"id":163589,"user_name":"Geek_bc5803","can_delete":false,"product_type":"c1","uid":1148436,"ip_address":"","ucode":"831D6C8EFE718D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/ZO8e76xabibqe45nyC4mFCSb14He095QO5wA2IT5RybaQwAfFM8gjv84sS2MmBzxNRmc6W1NibcqRKjvgo7LJPWg/132","comment_is_top":false,"comment_ctime":1576751113,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1576751113","product_id":100015201,"comment_content":"老师您好，我试着在容器里查了top，显示的确实是容器里所有进程的信息，不是宿主机的信息。我的环境是docker+k8s, 想请教一下是哪里默认已经做好隔离了吗？","like_count":0},{"had_liked":false,"id":159261,"user_name":"小虾米","can_delete":false,"product_type":"c1","uid":1005528,"ip_address":"","ucode":"F543987A7FAB20","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/d8/425e1b0a.jpg","comment_is_top":false,"comment_ctime":1575592931,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575592931","product_id":100015201,"comment_content":"讲的实在太好了，老师厉害","like_count":0},{"had_liked":false,"id":149196,"user_name":"Geek_2d276a","can_delete":false,"product_type":"c1","uid":1295596,"ip_address":"","ucode":"866B39EBE71356","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEIBJYQ73yYqmiaU7Zg0BHPh9gpSglI79Dzcbob7I2tZOhTjbTTCw13KzVusYhLbKkukV9Ru5UfJMxQ/132","comment_is_top":false,"comment_ctime":1573174789,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1573174789","product_id":100015201,"comment_content":"一号进程创建的子进程是否也受namespace和Cgroup的限制；由一号进程创建其他应用进程，是否就可以在一个容器里执行两个不一样的应用了？","like_count":0},{"had_liked":false,"id":144664,"user_name":"冉冉","can_delete":false,"product_type":"c1","uid":1436334,"ip_address":"","ucode":"D36C0F95BC1DAB","user_header":"https://static001.geekbang.org/account/avatar/00/15/ea/ae/0e056410.jpg","comment_is_top":false,"comment_ctime":1571992176,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1571992176","product_id":100015201,"comment_content":"老师，那现在的windows docker技术的原理又是什么样的呢？从官网上看，也是依赖hyper-v的虚拟机化技术，是不是跟搭一个虚拟机一样啊，那么在windows 下的docker技术，是不是本质上还是普通的虚拟机技术而不是docker技术呢？","like_count":0},{"had_liked":false,"id":143714,"user_name":"小手冰凉*^O^*","can_delete":false,"product_type":"c1","uid":1420323,"ip_address":"","ucode":"1A69158F6D0F92","user_header":"https://static001.geekbang.org/account/avatar/00/15/ac/23/8eb08fdf.jpg","comment_is_top":false,"comment_ctime":1571762926,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1571762926","product_id":100015201,"comment_content":"如果你要在 Windows 宿主机上运行 Linux 容器，或者在低版本的 Linux 宿主机上运行高版本的 Linux 容器，都是行不通的。这个为啥行不通呢","like_count":0},{"had_liked":false,"id":142542,"user_name":"rename","can_delete":false,"product_type":"c1","uid":1123100,"ip_address":"","ucode":"25D54752F54C05","user_header":"https://static001.geekbang.org/account/avatar/00/11/23/1c/d5c164df.jpg","comment_is_top":false,"comment_ctime":1571390577,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1571390577","product_id":100015201,"comment_content":"删除cpu子系统下的控制组时，如果直接使用rm -rf container，会报错Operation not permitted，但是如果使用rmdir container，可以成功删除。这是什么原因呢？","like_count":0},{"had_liked":false,"id":140274,"user_name":"hughieyu","can_delete":false,"product_type":"c1","uid":1206690,"ip_address":"","ucode":"FC1A64B2BAB784","user_header":"https://static001.geekbang.org/account/avatar/00/12/69/a2/c30ac459.jpg","comment_is_top":false,"comment_ctime":1570868658,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1570868658","product_id":100015201,"comment_content":"容器镜像是如何做到跨平台的呢，比如linux平台的mysql ，是如何作为一个进程运行在windows之上的呢？","like_count":0},{"had_liked":false,"id":139284,"user_name":"Nu11PointerEx","can_delete":false,"product_type":"c1","uid":1177802,"ip_address":"","ucode":"D5C19A98F894B7","user_header":"https://static001.geekbang.org/account/avatar/00/11/f8/ca/1a1e190a.jpg","comment_is_top":false,"comment_ctime":1570602329,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1570602329","product_id":100015201,"comment_content":"&quot;由于一个容器的本质就是一个进程，用户的应用进程实际上就是容器里 PID=1 的进程，也是其他后续创建的所有进程的父进程。这就意味着，在一个容器中，你没办法同时运行两个不同的应用，除非你能事先找到一个公共的 PID=1 的程序来充当两个不同应用的父进程&quot;<br>张老师，前半段我能理解，但是后半段该怎么理解，为啥就不能同时运行两个不同的应用？为啥事先找到一个公共的PID=1的程序就可以？","like_count":0},{"had_liked":false,"id":130668,"user_name":"半缘","can_delete":false,"product_type":"c1","uid":1636131,"ip_address":"","ucode":"00144BD55ABBAF","user_header":"https://static001.geekbang.org/account/avatar/00/18/f7/23/9b9691a8.jpg","comment_is_top":false,"comment_ctime":1567505078,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1567505078","product_id":100015201,"comment_content":"张老师好，使用lxcfs后，如果该进程出现异常（比如oom kill掉，人为操作等）会导致挂载lxcfs的容器不可用，必须重启。这个有什么好的解决方法么？","like_count":0},{"had_liked":false,"id":128846,"user_name":"随源而恒之","can_delete":false,"product_type":"c1","uid":1637538,"ip_address":"","ucode":"04762414C12687","user_header":"https://static001.geekbang.org/account/avatar/00/18/fc/a2/d4607ab6.jpg","comment_is_top":false,"comment_ctime":1566973861,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1566973861","product_id":100015201,"comment_content":"docker run -it --cpu-period=100000 --cpu-quota=20000 ubuntu &#47;bin&#47;bash<br>使用这个语句,启动了容器,<br>cat &#47;sys&#47;fs&#47;cgroup&#47;cpu&#47;docker&#47;87ca7c1c796e&#47;cpu.cfs_period_us<br>提示: No such file or directory<br>cd 到 &#47;sys&#47;fs&#47;cgroup&#47;cpu&#47;docker 里面没有容器id 命名的文件夹","like_count":0},{"had_liked":false,"id":128596,"user_name":"helloworld","can_delete":false,"product_type":"c1","uid":1015754,"ip_address":"","ucode":"00DF2FEC58D2E6","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7f/ca/ea85bfdd.jpg","comment_is_top":false,"comment_ctime":1566910759,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1566910759","product_id":100015201,"comment_content":"很期待老师能出其他的课程！能把这么复杂的技术讲解地这么浅显易懂！","like_count":0},{"had_liked":false,"id":125565,"user_name":"火箭","can_delete":false,"product_type":"c1","uid":1202064,"ip_address":"","ucode":"ED7BA0479EAB16","user_header":"https://static001.geekbang.org/account/avatar/00/12/57/90/7a8fbf69.jpg","comment_is_top":false,"comment_ctime":1566204514,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1566204514","product_id":100015201,"comment_content":"讲解很清晰，明白了linux是通过cgroup来限制docker能使用到的CPU&#47;内存等的上限，同时也了解到docker和实际的虚拟机的区别，还有在docker里执行的命令并不是全都是docker本身的输出，比如top输出的还是宿主机的情况，这一点是特别需要注意的","like_count":0},{"had_liked":false,"id":122919,"user_name":"张晓辉","can_delete":false,"product_type":"c1","uid":1085046,"ip_address":"","ucode":"1CD9717DE399C5","user_header":"https://static001.geekbang.org/account/avatar/00/10/8e/76/6d55e26f.jpg","comment_is_top":false,"comment_ctime":1565573989,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1565573989","product_id":100015201,"comment_content":"你好，我们在启动容器的时候可以设置资源限制。如果容器运行的时候没有达到资源限制的上限，那它剩下的资源可以被宿主机使用吗？","like_count":0,"discussions":[{"author":{"id":1514175,"avatar":"https://static001.geekbang.org/account/avatar/00/17/1a/bf/872c2289.jpg","nickname":"Geek_Fang","note":"","ucode":"CCF0DBC6AC247F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":358441,"discussion_content":"肯定可以啊，只是设置了上限而已","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615982772,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122004,"user_name":"彰玉","can_delete":false,"product_type":"c1","uid":1225932,"ip_address":"","ucode":"E35220D59D9B27","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/IyrKOr1vBfpdjgKEqRTOMpiciaMZtlVv6WLFt4lENZRtibt0O9EaOuI1DGIyfeiazD8x8Z1hgicVHZhOxIhez6pkQIw/132","comment_is_top":false,"comment_ctime":1565267302,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1565267302","product_id":100015201,"comment_content":"容器的单进程 这个特点 是K8s用Pod管理容器运行时的主要原因之一?","like_count":0},{"had_liked":false,"id":115576,"user_name":"Frank","can_delete":false,"product_type":"c1","uid":1111985,"ip_address":"","ucode":"9DADD72C193296","user_header":"https://static001.geekbang.org/account/avatar/00/10/f7/b1/982ea185.jpg","comment_is_top":false,"comment_ctime":1563634102,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1563634102","product_id":100015201,"comment_content":"请问 文中创建的container目录 删不掉，怎么办呢？","like_count":0},{"had_liked":false,"id":113049,"user_name":"君莫惜","can_delete":false,"product_type":"c1","uid":1101408,"ip_address":"","ucode":"FD570371148000","user_header":"https://static001.geekbang.org/account/avatar/00/10/ce/60/7d17522d.jpg","comment_is_top":false,"comment_ctime":1562891889,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1562891889","product_id":100015201,"comment_content":"资源限制通过Cgroups实现，我们可以在 &#47;sys&#47;fs&#47;cgroup&#47; 下新建一个文件夹叫container，可通过更改内部的文件对某个进程进行资源限制","like_count":0},{"had_liked":false,"id":110572,"user_name":"板栗","can_delete":false,"product_type":"c1","uid":1201259,"ip_address":"","ucode":"A40F13DAAAA596","user_header":"https://static001.geekbang.org/account/avatar/00/12/54/6b/80ebeefc.jpg","comment_is_top":false,"comment_ctime":1562295276,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1562295276","product_id":100015201,"comment_content":"centos来跑docker，内核是不是太老了","like_count":0},{"had_liked":false,"id":93739,"user_name":"Jess","can_delete":false,"product_type":"c1","uid":1503183,"ip_address":"","ucode":"41DE3E042FBF8A","user_header":"https://static001.geekbang.org/account/avatar/00/16/ef/cf/9bda71c8.jpg","comment_is_top":false,"comment_ctime":1557576329,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1557576329","product_id":100015201,"comment_content":"老師 <br><br>問一個基礎文題<br>文中：这意味着，如果你要在 Windows 宿主机上运行 Linux 容器，或者在低版本的 Linux 宿主机上运行高版本的 Linux 容器，都是行不通的。<br><br>可是假設docker在windows中run一個ubuntu容器，這不是在正常不過嗎？<br><br>請問我是否理解有誤 煩請老師回答 謝謝","like_count":0},{"had_liked":false,"id":89198,"user_name":"Ma.LW","can_delete":false,"product_type":"c1","uid":1227429,"ip_address":"","ucode":"71D4F94B3B0DB8","user_header":"https://static001.geekbang.org/account/avatar/00/12/ba/a5/266ae965.jpg","comment_is_top":false,"comment_ctime":1556103642,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1556103642","product_id":100015201,"comment_content":"遇到过在宿主机上使用top命令显示容器使用内存超过对容器的内存限制  一般是什么原因呢","like_count":0},{"had_liked":false,"id":88880,"user_name":"irilin","can_delete":false,"product_type":"c1","uid":1508071,"ip_address":"","ucode":"721EE017D17677","user_header":"","comment_is_top":false,"comment_ctime":1556020286,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1556020286","product_id":100015201,"comment_content":"没有说明下如何恢复被限制的20%CPU，我尝试删除目录，也无法删掉，也尝试清空这个tasks文件，然而，并没有卯用。","like_count":0,"discussions":[{"author":{"id":1248307,"avatar":"https://static001.geekbang.org/account/avatar/00/13/0c/33/c5026169.jpg","nickname":"hiyang","note":"","ucode":"E521EE72C0F247","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":282853,"discussion_content":"这个我也遇到了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592104040,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":85475,"user_name":"fraηz","can_delete":false,"product_type":"c1","uid":1223067,"ip_address":"","ucode":"8B4D02DCD760E6","user_header":"https://static001.geekbang.org/account/avatar/00/12/a9/9b/61b5fc4c.jpg","comment_is_top":false,"comment_ctime":1555071804,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1555071804","product_id":100015201,"comment_content":"讲的很透彻，感谢。","like_count":0},{"had_liked":false,"id":79135,"user_name":"原版橘子皮","can_delete":false,"product_type":"c1","uid":1473233,"ip_address":"","ucode":"02F7E524BE144D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erJgXILXgqKWMsA4TpuMAGEgrcLFJfy379aiaUbHQdSypeoelUPvITJNRPib3r9icWkqPWVnSRbPNrPw/132","comment_is_top":false,"comment_ctime":1553366392,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"1553366392","product_id":100015201,"comment_content":"老师，这部分加深了我对底层的理解，但是还有个问题。如果宿主系统是ubuntu，但是上层的os是centos，我按您说的理解是，直接将整个centos的lib和bin跑在了ubuntu系统上面是可以正常运行的。这个理解对吗，总觉得哪里有问题。我只是个linux用户，但是我理解lib不是都得依赖某些系统相关特性编译后才能正常运行的吗，也就是说centos里的bin能在ubuntu上正常运行吗？","like_count":0,"discussions":[{"author":{"id":1248307,"avatar":"https://static001.geekbang.org/account/avatar/00/13/0c/33/c5026169.jpg","nickname":"hiyang","note":"","ucode":"E521EE72C0F247","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":282851,"discussion_content":"因为容器和宿主机共用内核，那么内核调用的方法应该是统一的；所以这里的lib应该是指内核调用方法。\n文件系统中看到的lib是这些调用方法的实现，不同操作系统不能共用。我是这么理解的，不知道是否正确。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592103989,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76648,"user_name":"xiaogang","can_delete":false,"product_type":"c1","uid":1059158,"ip_address":"","ucode":"FF008AAFFF6A74","user_header":"","comment_is_top":false,"comment_ctime":1552655720,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552655720","product_id":100015201,"comment_content":"一直有个疑问关于虚拟机和容器对比图这，如果docker不创建如何“容器”，那么用户运行“容器”的进程是否可以直接使用宿主机的文件系统，如果是这样的话，镜像文件里的文件系统岂不是多余？","like_count":0},{"had_liked":false,"id":74380,"user_name":"想飞的鱼","can_delete":false,"product_type":"c1","uid":1005259,"ip_address":"","ucode":"569ABE734BC65F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/56/cb/0b731cd6.jpg","comment_is_top":false,"comment_ctime":1552208922,"is_pvip":true,"discussion_count":0,"race_medal":3,"score":"1552208922","product_id":100015201,"comment_content":"rmdir container可以删除","like_count":0},{"had_liked":false,"id":72631,"user_name":"云韵","can_delete":false,"product_type":"c1","uid":1025622,"ip_address":"","ucode":"3DE26DBAAAEDE6","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a6/56/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1551682562,"is_pvip":true,"discussion_count":0,"race_medal":1,"score":"1551682562","product_id":100015201,"comment_content":"磊哥，我在windows家庭版上下的Docker Quickstart Terminal，安装ubuntu中文件只有Only-Read,请问这种情况怎么修改呢","like_count":0},{"had_liked":false,"id":67787,"user_name":"Jay Wu","can_delete":false,"product_type":"c1","uid":1022102,"ip_address":"","ucode":"39C9EDDC71BADE","user_header":"https://static001.geekbang.org/account/avatar/00/0f/98/96/a2f4554e.jpg","comment_is_top":false,"comment_ctime":1550278268,"is_pvip":false,"replies":[{"id":"26193","content":"可以先玩一下，很简单的","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1551585123,"ip_address":"","comment_id":67787,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1550278268","product_id":100015201,"comment_content":"读了好几章了，看到很多docker的命令，老师，如果我没有docker基础的话，是不是需要先自学一下docker技术。","like_count":0,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":439374,"discussion_content":"可以先玩一下，很简单的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551585123,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":54284,"user_name":"疯琴","can_delete":false,"product_type":"c1","uid":1099379,"ip_address":"","ucode":"82ACAA4A27753D","user_header":"https://static001.geekbang.org/account/avatar/00/10/c6/73/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1545820679,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1545820679","product_id":100015201,"comment_content":"讲得流畅易懂👏","like_count":0},{"had_liked":false,"id":52828,"user_name":"Yuhui","can_delete":false,"product_type":"c1","uid":1110470,"ip_address":"","ucode":"811933B016179F","user_header":"https://static001.geekbang.org/account/avatar/00/10/f1/c6/6f39a982.jpg","comment_is_top":false,"comment_ctime":1545536420,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1545536420","product_id":100015201,"comment_content":"哦，不好意思，是我的问题，现在解决了，谢谢","like_count":0},{"had_liked":false,"id":52822,"user_name":"Yuhui","can_delete":false,"product_type":"c1","uid":1110470,"ip_address":"","ucode":"811933B016179F","user_header":"https://static001.geekbang.org/account/avatar/00/10/f1/c6/6f39a982.jpg","comment_is_top":false,"comment_ctime":1545535667,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1545535667","product_id":100015201,"comment_content":"下面这行命令无法执行，说是没有权限，用了sudo也不行，实际上就没有container这个目录。请教老师这是怎么回事？谢谢！<br>$ echo 20000 &gt; &#47;sys&#47;fs&#47;cgroup&#47;cpu&#47;container&#47;cpu.cfs_quota_us","like_count":0},{"had_liked":false,"id":51146,"user_name":"KoALa","can_delete":false,"product_type":"c1","uid":1021648,"ip_address":"","ucode":"378E0A7DBC14A6","user_header":"https://static001.geekbang.org/account/avatar/00/0f/96/d0/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1545120835,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1545120835","product_id":100015201,"comment_content":"你好，我自己在容器中执行top时显示的和宿主机上执行top时显示的不一样啊，宿主机是ubuntu 16.04，是不是特定的docker发行版已经做了这方面的设置？","like_count":0},{"had_liked":false,"id":49833,"user_name":"王涛","can_delete":false,"product_type":"c1","uid":1315326,"ip_address":"","ucode":"6241F08634D342","user_header":"https://static001.geekbang.org/account/avatar/00/14/11/fe/de00d8d8.jpg","comment_is_top":false,"comment_ctime":1544777543,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1544777543","product_id":100015201,"comment_content":"Namespace 隔离docker进程能看到的宿主机的内容。cg 是对 docker 进程限制了对宿主机的资源的利用<br>","like_count":0},{"had_liked":false,"id":49279,"user_name":"センチ","can_delete":false,"product_type":"c1","uid":1043968,"ip_address":"","ucode":"8C051A11A447A4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ee/00/44372046.jpg","comment_is_top":false,"comment_ctime":1544660108,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1544660108","product_id":100015201,"comment_content":"有个疑问，如果用 docker exec xxx bash 在容器里新起了一个进程，那这个进程跟容器的 pid 为 1 的进程是父子进程的关系么？ 这个新起的进程在宿主机会有相应的进程编号么？","like_count":0},{"had_liked":false,"id":45311,"user_name":"simoom","can_delete":false,"product_type":"c1","uid":1335362,"ip_address":"","ucode":"6AE2EED1295F9E","user_header":"https://static001.geekbang.org/account/avatar/00/14/60/42/ed42e7cd.jpg","comment_is_top":false,"comment_ctime":1543584558,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543584558","product_id":100015201,"comment_content":"您好，有2个问题，如果是一台多核的机器，cfs quota占20%，那么是一个核的20%,还是所有核的20%？如果打开了smt或者超线程，是每个线程的20%，还是所有线程的20%？","like_count":0},{"had_liked":false,"id":44909,"user_name":"周萝卜","can_delete":false,"product_type":"c1","uid":1315039,"ip_address":"","ucode":"056A4426D14A45","user_header":"https://static001.geekbang.org/account/avatar/00/14/10/df/e4511752.jpg","comment_is_top":false,"comment_ctime":1543505948,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543505948","product_id":100015201,"comment_content":"老师，cgroups是限制可以使用的资源的最大值，不能限制最小值对吧，那容器使用这个技术的目的就是不让某个容器过多的占用系统资源？","like_count":0},{"had_liked":false,"id":44813,"user_name":"Ascetic","can_delete":false,"product_type":"c1","uid":1171792,"ip_address":"","ucode":"BD77003C3B2E1D","user_header":"https://static001.geekbang.org/account/avatar/00/11/e1/50/e608b7dd.jpg","comment_is_top":false,"comment_ctime":1543495730,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543495730","product_id":100015201,"comment_content":"张老师，我想问下，容器时间既然是共享内核的，那修改时区统一问题，是不是会有影响？宿主机的是不是也会被改","like_count":0},{"had_liked":false,"id":43171,"user_name":"Geek_49b49f","can_delete":false,"product_type":"c1","uid":1317407,"ip_address":"","ucode":"4AB7863FD78252","user_header":"http://thirdwx.qlogo.cn/mmopen/uqaRIfRCAhJrIDfJc7dmj5QjB0FdV38usuAJhRwiaT1PUXmmkTpaQYvDag3ibqYc52Jk4iajcc8ZOlezqymLqf8tg/132","comment_is_top":false,"comment_ctime":1543194287,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543194287","product_id":100015201,"comment_content":"之前听说有公司想在openstack上起用k8s，那他考虑的就是资源的完全隔离，而不是资源的利用率了对吧","like_count":0},{"had_liked":false,"id":40393,"user_name":"Hans","can_delete":false,"product_type":"c1","uid":1155198,"ip_address":"","ucode":"813C7767CC5E6F","user_header":"https://static001.geekbang.org/account/avatar/00/11/a0/7e/d6dbaf51.jpg","comment_is_top":false,"comment_ctime":1542614200,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1542614200","product_id":100015201,"comment_content":"老师，我运行了一个容器，然后通过 docker exec -it myservice_api &#47;bin&#47;bash 进入容器中，执行 ps、top、yum等操作时都报command not found，这是为啥？","like_count":0},{"had_liked":false,"id":39120,"user_name":"程序修行","can_delete":false,"product_type":"c1","uid":1257409,"ip_address":"","ucode":"2CCD5ACAFF0E8D","user_header":"","comment_is_top":false,"comment_ctime":1542193487,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1542193487","product_id":100015201,"comment_content":"怎么知道那个进程运行在了container限制的控制组里呢？在container目录下运行的程序？","like_count":0,"discussions":[{"author":{"id":2616028,"avatar":"https://static001.geekbang.org/account/avatar/00/27/ea/dc/aa699264.jpg","nickname":"宏典","note":"","ucode":"63953F36596C28","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":577480,"discussion_content":"看pid文件","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656137809,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":38117,"user_name":"MJ","can_delete":false,"product_type":"c1","uid":1237145,"ip_address":"","ucode":"FCEC0C21444D2A","user_header":"https://static001.geekbang.org/account/avatar/00/12/e0/99/5d603697.jpg","comment_is_top":false,"comment_ctime":1541944298,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1541944298","product_id":100015201,"comment_content":"之前没有接触过PaaS，这篇文章看着有点难度~<br><br>支持自己，加油！","like_count":0},{"had_liked":false,"id":37815,"user_name":"五年","can_delete":false,"product_type":"c1","uid":1081224,"ip_address":"","ucode":"28A6F945FB0626","user_header":"https://static001.geekbang.org/account/avatar/00/10/7f/88/c4263c58.jpg","comment_is_top":false,"comment_ctime":1541734362,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1541734362","product_id":100015201,"comment_content":"容器内部top：<br>cpu跟宿主机不一致；mem好像差不多在波动<br><br><br>top - 03:32:05 up 1 day,  1:08,  3 users,  load average: 0.16, 0.18, 0.32<br>Tasks: 133 total,   4 running, 129 sleeping,   0 stopped,   0 zombie<br>%Cpu0  :  5.5 us,  0.0 sy,  0.0 ni, 94.5 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st<br>%Cpu1  :  5.8 us,  0.0 sy,  0.0 ni, 94.2 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st<br>KiB Mem :  1015336 total,   390948 free,   308772 used,   315616 buff&#47;cache<br>KiB Swap:  1572860 total,  1572860 free,        0 used.   505960 avail Mem ","like_count":0},{"had_liked":false,"id":35299,"user_name":"黑白","can_delete":false,"product_type":"c1","uid":1102081,"ip_address":"","ucode":"B27316AF6AFABB","user_header":"https://static001.geekbang.org/account/avatar/00/10/d1/01/760691ed.jpg","comment_is_top":false,"comment_ctime":1540513536,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1540513536","product_id":100015201,"comment_content":"想问下、cgroup可以理解为他是限制进程的资源的，那如果在docker run的时候没有指定限制的条件，是不是就可以理解为容器的运行没有限制，或者有默认的限制之类的","like_count":0},{"had_liked":false,"id":34342,"user_name":"Godruoyi","can_delete":false,"product_type":"c1","uid":1021785,"ip_address":"","ucode":"62B9BDEC55A983","user_header":"https://static001.geekbang.org/account/avatar/00/0f/97/59/6f9c036e.jpg","comment_is_top":false,"comment_ctime":1540119345,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1540119345","product_id":100015201,"comment_content":"老师，每看完一节，我可以基于自己的想法和感悟写一篇博客文章吗？","like_count":0},{"had_liked":false,"id":29897,"user_name":"kk","can_delete":false,"product_type":"c1","uid":1023199,"ip_address":"","ucode":"6E368844E9B2E9","user_header":"https://static001.geekbang.org/account/avatar/00/0f/9c/df/209c1e4d.jpg","comment_is_top":false,"comment_ctime":1538583651,"is_pvip":true,"replies":[{"id":"10744","content":"见network部分","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1538613805,"ip_address":"","comment_id":29897,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1538583651","product_id":100015201,"comment_content":"可以讲讲network namespace吗？","like_count":0,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":425766,"discussion_content":"见network部分","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1538613805,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":25279,"user_name":"仓颉jk","can_delete":false,"product_type":"c1","uid":1015387,"ip_address":"","ucode":"D1C3620779B4C0","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7e/5b/35005438.jpg","comment_is_top":false,"comment_ctime":1537284887,"is_pvip":false,"replies":[{"id":"9195","content":"windows是虚拟机容器","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1537316013,"ip_address":"","comment_id":25279,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1537284887","product_id":100015201,"comment_content":"Windows 10也可以运行docker，又是啥原理呢？这篇文章换成Windows视角就不能理解了。","like_count":0,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":424237,"discussion_content":"windows是虚拟机容器","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1537316013,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":24152,"user_name":"面向加薪学习","can_delete":false,"product_type":"c1","uid":1108117,"ip_address":"","ucode":"5164A1DF058AC5","user_header":"https://static001.geekbang.org/account/avatar/00/10/e8/95/13b88119.jpg","comment_is_top":false,"comment_ctime":1536824814,"is_pvip":false,"replies":[{"id":"8881","content":"基础操作 文件系统 网络","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1536889111,"ip_address":"","comment_id":24152,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1536824814","product_id":100015201,"comment_content":"鸟哥linux私房菜  老师能画出一些重点和容器相关的章节吗？","like_count":0,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423861,"discussion_content":"基础操作 文件系统 网络","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536889111,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1514175,"avatar":"https://static001.geekbang.org/account/avatar/00/17/1a/bf/872c2289.jpg","nickname":"Geek_Fang","note":"","ucode":"CCF0DBC6AC247F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":358321,"discussion_content":"mark一下：基础操作 文件系统 网络 《鸟哥linux私房菜》","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615964457,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":23538,"user_name":"A 断了线的风筝","can_delete":false,"product_type":"c1","uid":1227670,"ip_address":"","ucode":"242C1EBB1F68A7","user_header":"https://static001.geekbang.org/account/avatar/00/12/bb/96/d1d8f640.jpg","comment_is_top":false,"comment_ctime":1536470517,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1536470517","product_id":100015201,"comment_content":"2.虚拟机中可以运行多个进程、而容器中只运行了一个进程、<br>","like_count":0},{"had_liked":false,"id":23537,"user_name":"A 断了线的风筝","can_delete":false,"product_type":"c1","uid":1227670,"ip_address":"","ucode":"242C1EBB1F68A7","user_header":"https://static001.geekbang.org/account/avatar/00/12/bb/96/d1d8f640.jpg","comment_is_top":false,"comment_ctime":1536470411,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1536470411","product_id":100015201,"comment_content":"namespace 可以使容器主机隔离、<br>linux 的cgroups 可以对容器使用的资源做限制、","like_count":0},{"had_liked":false,"id":23535,"user_name":"A 断了线的风筝","can_delete":false,"product_type":"c1","uid":1227670,"ip_address":"","ucode":"242C1EBB1F68A7","user_header":"https://static001.geekbang.org/account/avatar/00/12/bb/96/d1d8f640.jpg","comment_is_top":false,"comment_ctime":1536470239,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1536470239","product_id":100015201,"comment_content":"对容器资源的限制、是通过linux cgroups 来实现的、<br>容器中运行一个java 进程、要限制java 的 xms 、xmx等参数、是直接进入到容器中对相关参数进行修改吗？","like_count":0},{"had_liked":false,"id":23493,"user_name":"在路上","can_delete":false,"product_type":"c1","uid":1143372,"ip_address":"","ucode":"335960F683C23C","user_header":"https://static001.geekbang.org/account/avatar/00/11/72/4c/4d636a23.jpg","comment_is_top":false,"comment_ctime":1536420965,"is_pvip":false,"replies":[{"id":"8586","content":"看看进程号是多少啊，咱俩的环境肯定不一样","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1536562719,"ip_address":"","comment_id":23493,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1536420965","product_id":100015201,"comment_content":"echo 226&gt;tasks，在我ubuntu16.04怎么执行不了，报错，write error: no such process？","like_count":0,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423587,"discussion_content":"看看进程号是多少啊，咱俩的环境肯定不一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536562719,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":23407,"user_name":"maojing","can_delete":false,"product_type":"c1","uid":1137125,"ip_address":"","ucode":"CCB86B1CCB7F1C","user_header":"https://static001.geekbang.org/account/avatar/00/11/59/e5/17bb59ef.jpg","comment_is_top":false,"comment_ctime":1536334386,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1536334386","product_id":100015201,"comment_content":"生产环境用了3年docker，读了作者的文章之后又收获了许多","like_count":0},{"had_liked":false,"id":23366,"user_name":"煎饼","can_delete":false,"product_type":"c1","uid":1053850,"ip_address":"","ucode":"BE0A4E3BC53465","user_header":"https://static001.geekbang.org/account/avatar/00/10/14/9a/88bccf68.jpg","comment_is_top":false,"comment_ctime":1536307669,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1536307669","product_id":100015201,"comment_content":"简单明了","like_count":0},{"had_liked":false,"id":23275,"user_name":"阿鹏","can_delete":false,"product_type":"c1","uid":1207915,"ip_address":"","ucode":"88C847A20EEA9A","user_header":"https://static001.geekbang.org/account/avatar/00/12/6e/6b/9c3f3abb.jpg","comment_is_top":false,"comment_ctime":1536248668,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1536248668","product_id":100015201,"comment_content":"请教一下，我们现在是一台服务器上跑好几个应用的，迁移或者扩展的时候直接拷贝一个原系统的镜像然后环境就都有了，对于这种情况需要再把每个应用跑在docker里吗，有什么利弊？","like_count":0},{"had_liked":false,"id":23008,"user_name":"eason2017","can_delete":false,"product_type":"c1","uid":1009422,"ip_address":"","ucode":"E070BA624FA490","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/0e/c77ad9b1.jpg","comment_is_top":false,"comment_ctime":1536109952,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1536109952","product_id":100015201,"comment_content":"精彩，谢谢大师👍","like_count":0}]}