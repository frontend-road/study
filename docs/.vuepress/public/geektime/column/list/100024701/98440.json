{"id":98440,"title":"28 | ç¡¬ç›˜æ–‡ä»¶ç³»ç»Ÿï¼šå¦‚ä½•æœ€åˆç†åœ°ç»„ç»‡æ¡£æ¡ˆåº“çš„æ–‡æ¡£ï¼Ÿ","content":"<p>ä¸Šä¸€èŠ‚ï¼Œæˆ‘ä»¬æŒ‰ç…§å›¾ä¹¦é¦†çš„æ¨¡å¼ï¼Œè§„åˆ’äº†æ¡£æ¡ˆåº“ï¼Œä¹Ÿå³æ–‡ä»¶ç³»ç»Ÿåº”è¯¥æœ‰çš„æ ·å­ã€‚è¿™ä¸€èŠ‚ï¼Œæˆ‘ä»¬å°†è¿™ä¸ªæ¨¡å¼æ¬åˆ°ç¡¬ç›˜ä¸Šæ¥çœ‹ä¸€çœ‹ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/2e/d2/2ea68b40d928e6469233fcb4948c7cd2.jpg?wh=1280*720\" alt=\"\"></p><p>æˆ‘ä»¬å¸¸è§çš„ç¡¬ç›˜æ˜¯ä¸Šé¢è¿™å¹…å›¾å·¦è¾¹çš„æ ·å­ï¼Œä¸­é—´åœ†çš„éƒ¨åˆ†æ˜¯ç£ç›˜çš„ç›˜ç‰‡ï¼Œå³è¾¹çš„å›¾æ˜¯æŠ½è±¡å‡ºæ¥çš„å›¾ã€‚æ¯ä¸€å±‚é‡Œåˆ†å¤šä¸ªç£é“ï¼Œæ¯ä¸ªç£é“åˆ†å¤šä¸ªæ‰‡åŒºï¼Œæ¯ä¸ªæ‰‡åŒºæ˜¯512ä¸ªå­—èŠ‚ã€‚</p><p>æ–‡ä»¶ç³»ç»Ÿå°±æ˜¯å®‰è£…åœ¨è¿™æ ·çš„ç¡¬ç›˜ä¹‹ä¸Šã€‚è¿™ä¸€èŠ‚æˆ‘ä»¬é‡ç‚¹ç›®å‰Linuxä¸‹æœ€ä¸»æµçš„æ–‡ä»¶ç³»ç»Ÿæ ¼å¼â€”â€”<strong>extç³»åˆ—</strong>çš„æ–‡ä»¶ç³»ç»Ÿçš„æ ¼å¼ã€‚</p><h2>inodeä¸å—çš„å­˜å‚¨</h2><p>å°±åƒå›¾ä¹¦é¦†çš„ä¹¦æ¶éƒ½è¦åˆ†æˆå¤§å°ç›¸åŒçš„æ ¼å­ï¼Œç¡¬ç›˜ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚ç¡¬ç›˜åˆ†æˆç›¸åŒå¤§å°çš„å•å…ƒï¼Œæˆ‘ä»¬ç§°ä¸º<strong>å—</strong>ï¼ˆBlockï¼‰ã€‚ä¸€å—çš„å¤§å°æ˜¯æ‰‡åŒºå¤§å°çš„æ•´æ•°å€ï¼Œé»˜è®¤æ˜¯4Kã€‚åœ¨æ ¼å¼åŒ–çš„æ—¶å€™ï¼Œè¿™ä¸ªå€¼æ˜¯å¯ä»¥è®¾å®šçš„ã€‚</p><p>ä¸€å¤§å—ç¡¬ç›˜è¢«åˆ†æˆäº†ä¸€ä¸ªä¸ªå°çš„å—ï¼Œç”¨æ¥å­˜æ”¾æ–‡ä»¶çš„æ•°æ®éƒ¨åˆ†ã€‚è¿™æ ·ä¸€æ¥ï¼Œå¦‚æœæˆ‘ä»¬åƒå­˜æ”¾ä¸€ä¸ªæ–‡ä»¶ï¼Œå°±ä¸ç”¨ç»™ä»–åˆ†é…ä¸€å—è¿ç»­çš„ç©ºé—´äº†ã€‚æˆ‘ä»¬å¯ä»¥åˆ†æ•£æˆä¸€ä¸ªä¸ªå°å—è¿›è¡Œå­˜æ”¾ã€‚è¿™æ ·å°±çµæ´»å¾—å¤šï¼Œä¹Ÿæ¯”è¾ƒå®¹æ˜“æ·»åŠ ã€åˆ é™¤å’Œæ’å…¥æ•°æ®ã€‚</p><p>ä½†æ˜¯è¿™ä¹Ÿå¸¦æ¥ä¸€ä¸ªæ–°çš„é—®é¢˜ï¼Œé‚£å°±æ˜¯æ–‡ä»¶çš„æ•°æ®å­˜æ”¾å¾—å¤ªæ•£ï¼Œæ‰¾èµ·æ¥å°±æ¯”è¾ƒå›°éš¾ã€‚æœ‰ä»€ä¹ˆåŠæ³•è§£å†³å‘¢ï¼Ÿæˆ‘ä»¬æ˜¯ä¸æ˜¯å¯ä»¥åƒå›¾ä¹¦é¦†é‚£æ ·ï¼Œä¹Ÿè®¾ç«‹ä¸€ä¸ªç´¢å¼•åŒºåŸŸï¼Œç”¨æ¥ç»´æŠ¤â€œæŸä¸ªæ–‡ä»¶åˆ†æˆå‡ å—ã€æ¯ä¸€å—åœ¨å“ªé‡Œâ€ç­‰ç­‰è¿™äº›<strong>åŸºæœ¬ä¿¡æ¯</strong>?</p><p>å¦å¤–ï¼Œæ–‡ä»¶è¿˜æœ‰<strong>å…ƒæ•°æ®</strong>éƒ¨åˆ†ï¼Œä¾‹å¦‚åå­—ã€æƒé™ç­‰ï¼Œè¿™å°±éœ€è¦ä¸€ä¸ªç»“æ„<strong>inode</strong>æ¥å­˜æ”¾ã€‚</p><!-- [[[read_end]]] --><p>ä»€ä¹ˆæ˜¯inodeå‘¢ï¼Ÿinodeçš„â€œiâ€æ˜¯indexçš„æ„æ€ï¼Œå…¶å®å°±æ˜¯â€œç´¢å¼•â€ï¼Œç±»ä¼¼å›¾ä¹¦é¦†çš„ç´¢å¼•åŒºåŸŸã€‚æ—¢ç„¶å¦‚æ­¤ï¼Œæˆ‘ä»¬æ¯ä¸ªæ–‡ä»¶éƒ½ä¼šå¯¹åº”ä¸€ä¸ªinodeï¼›ä¸€ä¸ªæ–‡ä»¶å¤¹å°±æ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œä¹Ÿå¯¹åº”ä¸€ä¸ªinodeã€‚</p><p>è‡³äºinodeé‡Œé¢æœ‰å“ªäº›ä¿¡æ¯ï¼Œå…¶å®æˆ‘ä»¬åœ¨å†…æ ¸ä¸­å°±æœ‰å®šä¹‰ã€‚ä½ å¯ä»¥çœ‹ä¸‹é¢è¿™ä¸ªæ•°æ®ç»“æ„ã€‚</p><pre><code>struct ext4_inode {\n\t__le16\ti_mode;\t\t/* File mode */\n\t__le16\ti_uid;\t\t/* Low 16 bits of Owner Uid */\n\t__le32\ti_size_lo;\t/* Size in bytes */\n\t__le32\ti_atime;\t/* Access time */\n\t__le32\ti_ctime;\t/* Inode Change time */\n\t__le32\ti_mtime;\t/* Modification time */\n\t__le32\ti_dtime;\t/* Deletion Time */\n\t__le16\ti_gid;\t\t/* Low 16 bits of Group Id */\n\t__le16\ti_links_count;\t/* Links count */\n\t__le32\ti_blocks_lo;\t/* Blocks count */\n\t__le32\ti_flags;\t/* File flags */\n......\n\t__le32\ti_block[EXT4_N_BLOCKS];/* Pointers to blocks */\n\t__le32\ti_generation;\t/* File version (for NFS) */\n\t__le32\ti_file_acl_lo;\t/* File ACL */\n\t__le32\ti_size_high;\n......\n};\n</code></pre><p>ä»è¿™ä¸ªæ•°æ®ç»“æ„ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œinodeé‡Œé¢æœ‰æ–‡ä»¶çš„è¯»å†™æƒé™i_modeï¼Œå±äºå“ªä¸ªç”¨æˆ·i_uidï¼Œå“ªä¸ªç»„i_gidï¼Œå¤§å°æ˜¯å¤šå°‘i_size_ioï¼Œå ç”¨å¤šå°‘ä¸ªå—i_blocks_ioã€‚å’±ä»¬è®²lså‘½ä»¤è¡Œçš„æ—¶å€™ï¼Œåˆ—å‡ºæ¥çš„æƒé™ã€ç”¨æˆ·ã€å¤§å°è¿™äº›ä¿¡æ¯ï¼Œå°±æ˜¯ä»è¿™é‡Œé¢å–å‡ºæ¥çš„ã€‚</p><p>å¦å¤–ï¼Œè¿™é‡Œé¢è¿˜æœ‰å‡ ä¸ªä¸æ–‡ä»¶ç›¸å…³çš„æ—¶é—´ã€‚i_atimeæ˜¯access timeï¼Œæ˜¯æœ€è¿‘ä¸€æ¬¡è®¿é—®æ–‡ä»¶çš„æ—¶é—´ï¼›i_ctimeæ˜¯change timeï¼Œæ˜¯æœ€è¿‘ä¸€æ¬¡æ›´æ”¹inodeçš„æ—¶é—´ï¼›i_mtimeæ˜¯modify timeï¼Œæ˜¯æœ€è¿‘ä¸€æ¬¡æ›´æ”¹æ–‡ä»¶çš„æ—¶é—´ã€‚</p><p>è¿™é‡Œä½ éœ€è¦æ³¨æ„åŒºåˆ†å‡ ä¸ªåœ°æ–¹ã€‚é¦–å…ˆï¼Œè®¿é—®äº†ï¼Œä¸ä»£è¡¨ä¿®æ”¹äº†ï¼Œä¹Ÿå¯èƒ½åªæ˜¯æ‰“å¼€çœ‹çœ‹ï¼Œå°±ä¼šæ”¹å˜access timeã€‚å…¶æ¬¡ï¼Œä¿®æ”¹inodeï¼Œæœ‰å¯èƒ½ä¿®æ”¹çš„æ˜¯ç”¨æˆ·å’Œæƒé™ï¼Œæ²¡æœ‰ä¿®æ”¹æ•°æ®éƒ¨åˆ†ï¼Œå°±ä¼šæ”¹å˜change timeã€‚åªæœ‰æ•°æ®ä¹Ÿä¿®æ”¹äº†ï¼Œæ‰æ”¹å˜modify timeã€‚</p><p>æˆ‘ä»¬åˆšæ‰è¯´çš„â€œæŸä¸ªæ–‡ä»¶åˆ†æˆå‡ å—ã€æ¯ä¸€å—åœ¨å“ªé‡Œâ€ï¼Œè¿™äº›åœ¨inodeé‡Œé¢ï¼Œåº”è¯¥ä¿å­˜åœ¨i_blocké‡Œé¢ã€‚</p><p>å…·ä½“å¦‚ä½•ä¿å­˜çš„å‘¢ï¼ŸEXT4_N_BLOCKSæœ‰å¦‚ä¸‹çš„å®šä¹‰ï¼Œè®¡ç®—ä¸‹æ¥ä¸€å…±æœ‰15é¡¹ã€‚</p><pre><code>#define\tEXT4_NDIR_BLOCKS\t\t12\n#define\tEXT4_IND_BLOCK\t\t\tEXT4_NDIR_BLOCKS\n#define\tEXT4_DIND_BLOCK\t\t\t(EXT4_IND_BLOCK + 1)\n#define\tEXT4_TIND_BLOCK\t\t\t(EXT4_DIND_BLOCK + 1)\n#define\tEXT4_N_BLOCKS\t\t\t(EXT4_TIND_BLOCK + 1)\n</code></pre><p>åœ¨ext2å’Œext3ä¸­ï¼Œå…¶ä¸­å‰12é¡¹ç›´æ¥ä¿å­˜äº†å—çš„ä½ç½®ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡i_block[0-11]ï¼Œç›´æ¥å¾—åˆ°ä¿å­˜æ–‡ä»¶å†…å®¹çš„å—ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/73/e2/73349c0fab1a92d4e1ae0c684cfe06e2.jpeg?wh=1573*2263\" alt=\"\"></p><p>ä½†æ˜¯ï¼Œå¦‚æœä¸€ä¸ªæ–‡ä»¶æ¯”è¾ƒå¤§ï¼Œ12å—æ”¾ä¸ä¸‹ã€‚å½“æˆ‘ä»¬ç”¨åˆ°i_block[12]çš„æ—¶å€™ï¼Œå°±ä¸èƒ½ç›´æ¥æ”¾æ•°æ®å—çš„ä½ç½®äº†ï¼Œè¦ä¸ç„¶i_blockå¾ˆå¿«å°±ä¼šç”¨å®Œäº†ã€‚è¿™è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿæˆ‘ä»¬éœ€è¦æƒ³ä¸ªåŠæ³•ã€‚æˆ‘ä»¬å¯ä»¥è®©i_block[12]æŒ‡å‘ä¸€ä¸ªå—ï¼Œè¿™ä¸ªå—é‡Œé¢ä¸æ”¾æ•°æ®å—ï¼Œè€Œæ˜¯æ”¾æ•°æ®å—çš„ä½ç½®ï¼Œè¿™ä¸ªå—æˆ‘ä»¬ç§°ä¸º<strong>é—´æ¥å—</strong>ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬åœ¨i_block[12]é‡Œé¢æ”¾é—´æ¥å—çš„ä½ç½®ï¼Œé€šè¿‡i_block[12]æ‰¾åˆ°é—´æ¥å—åï¼Œé—´æ¥å—é‡Œé¢æ”¾æ•°æ®å—çš„ä½ç½®ï¼Œé€šè¿‡é—´æ¥å—å¯ä»¥æ‰¾åˆ°æ•°æ®å—ã€‚</p><p>å¦‚æœæ–‡ä»¶å†å¤§ä¸€äº›ï¼Œi_block[13]ä¼šæŒ‡å‘ä¸€ä¸ªå—ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨äºŒæ¬¡é—´æ¥å—ã€‚äºŒæ¬¡é—´æ¥å—é‡Œé¢å­˜æ”¾äº†é—´æ¥å—çš„ä½ç½®ï¼Œé—´æ¥å—é‡Œé¢å­˜æ”¾äº†æ•°æ®å—çš„ä½ç½®ï¼Œæ•°æ®å—é‡Œé¢å­˜æ”¾çš„æ˜¯çœŸæ­£çš„æ•°æ®ã€‚å¦‚æœæ–‡ä»¶å†å¤§ä¸€äº›ï¼Œi_block[14]ä¼šæŒ‡å‘ä¸‰æ¬¡é—´æ¥å—ã€‚åŸç†å’Œä¸Šé¢éƒ½æ˜¯ä¸€æ ·çš„ï¼Œå°±åƒä¸€å±‚å¥—ä¸€å±‚çš„ä¿„ç½—æ–¯å¥—å¨ƒï¼Œä¸€å±‚ä¸€å±‚æ‰“å¼€ï¼Œæ‰èƒ½æ‹¿åˆ°æœ€ä¸­å¿ƒçš„æ•°æ®å—ã€‚</p><p>å¦‚æœä½ ç¨å¾®æœ‰ç‚¹ç»éªŒï¼Œç°åœ¨ä½ åº”è¯¥èƒ½å¤Ÿæ„è¯†åˆ°ï¼Œè¿™é‡Œé¢æœ‰ä¸€ä¸ªéå¸¸æ˜¾è‘—çš„é—®é¢˜ï¼Œå¯¹äºå¤§æ–‡ä»¶æ¥è®²ï¼Œæˆ‘ä»¬è¦å¤šæ¬¡è¯»å–ç¡¬ç›˜æ‰èƒ½æ‰¾åˆ°ç›¸åº”çš„å—ï¼Œè¿™æ ·è®¿é—®é€Ÿåº¦å°±ä¼šæ¯”è¾ƒæ…¢ã€‚</p><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œext4åšäº†ä¸€å®šçš„æ”¹å˜ã€‚å®ƒå¼•å…¥äº†ä¸€ä¸ªæ–°çš„æ¦‚å¿µï¼Œå«åš<strong>Extents</strong>ã€‚</p><p>æˆ‘ä»¬æ¥è§£é‡Šä¸€ä¸‹Extentsã€‚æ¯”æ–¹è¯´ï¼Œä¸€ä¸ªæ–‡ä»¶å¤§å°ä¸º128Mï¼Œå¦‚æœä½¿ç”¨4kå¤§å°çš„å—è¿›è¡Œå­˜å‚¨ï¼Œéœ€è¦32kä¸ªå—ã€‚å¦‚æœæŒ‰ç…§ext2æˆ–è€…ext3é‚£æ ·æ•£ç€æ”¾ï¼Œæ•°é‡å¤ªå¤§äº†ã€‚ä½†æ˜¯Extentså¯ä»¥ç”¨äºå­˜æ”¾è¿ç»­çš„å—ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠ128Mæ”¾åœ¨ä¸€ä¸ªExtentsé‡Œé¢ã€‚è¿™æ ·çš„è¯ï¼Œå¯¹å¤§æ–‡ä»¶çš„è¯»å†™æ€§èƒ½æé«˜äº†ï¼Œæ–‡ä»¶ç¢ç‰‡ä¹Ÿå‡å°‘äº†ã€‚</p><p>Exentså¦‚ä½•æ¥å­˜å‚¨å‘¢ï¼Ÿå®ƒå…¶å®ä¼šä¿å­˜æˆä¸€æ£µæ ‘ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/b8/2a/b8f184696be8d37ad6f2e2a4f12d002a.jpeg?wh=2023*1363\" alt=\"\"></p><p>æ ‘æœ‰ä¸€ä¸ªä¸ªçš„èŠ‚ç‚¹ï¼Œæœ‰å¶å­èŠ‚ç‚¹ï¼Œä¹Ÿæœ‰åˆ†æ”¯èŠ‚ç‚¹ã€‚æ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰ä¸€ä¸ªå¤´ï¼Œext4_extent_headerå¯ä»¥ç”¨æ¥æè¿°æŸä¸ªèŠ‚ç‚¹ã€‚</p><pre><code>struct ext4_extent_header {\n\t__le16\teh_magic;\t/* probably will support different formats */\n\t__le16\teh_entries;\t/* number of valid entries */\n\t__le16\teh_max;\t\t/* capacity of store in entries */\n\t__le16\teh_depth;\t/* has tree real underlying blocks? */\n\t__le32\teh_generation;\t/* generation of the tree */\n};\n</code></pre><p>æˆ‘ä»¬ä»”ç»†æ¥çœ‹é‡Œé¢çš„å†…å®¹ã€‚eh_entriesè¡¨ç¤ºè¿™ä¸ªèŠ‚ç‚¹é‡Œé¢æœ‰å¤šå°‘é¡¹ã€‚è¿™é‡Œçš„é¡¹åˆ†ä¸¤ç§ï¼Œå¦‚æœæ˜¯å¶å­èŠ‚ç‚¹ï¼Œè¿™ä¸€é¡¹ä¼šç›´æ¥æŒ‡å‘ç¡¬ç›˜ä¸Šçš„è¿ç»­å—çš„åœ°å€ï¼Œæˆ‘ä»¬ç§°ä¸ºæ•°æ®èŠ‚ç‚¹ext4_extentï¼›å¦‚æœæ˜¯åˆ†æ”¯èŠ‚ç‚¹ï¼Œè¿™ä¸€é¡¹ä¼šæŒ‡å‘ä¸‹ä¸€å±‚çš„åˆ†æ”¯èŠ‚ç‚¹æˆ–è€…å¶å­èŠ‚ç‚¹ï¼Œæˆ‘ä»¬ç§°ä¸ºç´¢å¼•èŠ‚ç‚¹ext4_extent_idxã€‚è¿™ä¸¤ç§ç±»å‹çš„é¡¹çš„å¤§å°éƒ½æ˜¯12ä¸ªbyteã€‚</p><pre><code>/*\n * This is the extent on-disk structure.\n * It's used at the bottom of the tree.\n */\nstruct ext4_extent {\n\t__le32\tee_block;\t/* first logical block extent covers */\n\t__le16\tee_len;\t\t/* number of blocks covered by extent */\n\t__le16\tee_start_hi;\t/* high 16 bits of physical block */\n\t__le32\tee_start_lo;\t/* low 32 bits of physical block */\n};\n/*\n * This is index on-disk structure.\n * It's used at all the levels except the bottom.\n */\nstruct ext4_extent_idx {\n\t__le32\tei_block;\t/* index covers logical blocks from 'block' */\n\t__le32\tei_leaf_lo;\t/* pointer to the physical block of the next *\n\t\t\t\t * level. leaf or next index could be there */\n\t__le16\tei_leaf_hi;\t/* high 16 bits of physical block */\n\t__u16\tei_unused;\n};\n</code></pre><p>å¦‚æœæ–‡ä»¶ä¸å¤§ï¼Œinodeé‡Œé¢çš„i_blockä¸­ï¼Œå¯ä»¥æ”¾å¾—ä¸‹ä¸€ä¸ªext4_extent_headerå’Œ4é¡¹ext4_extentã€‚æ‰€ä»¥è¿™ä¸ªæ—¶å€™ï¼Œeh_depthä¸º0ï¼Œä¹Ÿå³inodeé‡Œé¢çš„å°±æ˜¯å¶å­èŠ‚ç‚¹ï¼Œæ ‘é«˜åº¦ä¸º0ã€‚</p><p>å¦‚æœæ–‡ä»¶æ¯”è¾ƒå¤§ï¼Œ4ä¸ªextentæ”¾ä¸ä¸‹ï¼Œå°±è¦åˆ†è£‚æˆä¸ºä¸€æ£µæ ‘ï¼Œeh_depth&gt;0çš„èŠ‚ç‚¹å°±æ˜¯ç´¢å¼•èŠ‚ç‚¹ï¼Œå…¶ä¸­æ ¹èŠ‚ç‚¹æ·±åº¦æœ€å¤§ï¼Œåœ¨inodeä¸­ã€‚æœ€åº•å±‚eh_depth=0çš„æ˜¯å¶å­èŠ‚ç‚¹ã€‚</p><p>é™¤äº†æ ¹èŠ‚ç‚¹ï¼Œå…¶ä»–çš„èŠ‚ç‚¹éƒ½ä¿å­˜åœ¨ä¸€ä¸ªå—4ké‡Œé¢ï¼Œ4kæ‰£é™¤ext4_extent_headerçš„12ä¸ªbyteï¼Œå‰©ä¸‹çš„èƒ½å¤Ÿæ”¾340é¡¹ï¼Œæ¯ä¸ªextentæœ€å¤§èƒ½è¡¨ç¤º128MBçš„æ•°æ®ï¼Œ340ä¸ªextentä¼šä½¿ä½ è¡¨ç¤ºçš„æ–‡ä»¶è¾¾åˆ°42.5GBã€‚è¿™å·²ç»éå¸¸å¤§äº†ï¼Œå¦‚æœå†å¤§ï¼Œæˆ‘ä»¬å¯ä»¥å¢åŠ æ ‘çš„æ·±åº¦ã€‚</p><h2>inodeä½å›¾å’Œå—ä½å›¾</h2><p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬çŸ¥é“äº†ï¼Œç¡¬ç›˜ä¸Šè‚¯å®šæœ‰ä¸€ç³»åˆ—çš„inodeå’Œä¸€ç³»åˆ—çš„å—æ’åˆ—èµ·æ¥ã€‚</p><p>æ¥ä¸‹æ¥çš„é—®é¢˜æ˜¯ï¼Œå¦‚æœæˆ‘è¦ä¿å­˜ä¸€ä¸ªæ•°æ®å—ï¼Œæˆ–è€…è¦ä¿å­˜ä¸€ä¸ªinodeï¼Œæˆ‘åº”è¯¥æ”¾åœ¨ç¡¬ç›˜ä¸Šçš„å“ªä¸ªä½ç½®å‘¢ï¼Ÿéš¾é“éœ€è¦å°†æ‰€æœ‰çš„inodeåˆ—è¡¨å’Œå—åˆ—è¡¨æ‰«æä¸€éï¼Œæ‰¾ä¸ªç©ºçš„åœ°æ–¹éšä¾¿æ”¾å—ï¼Ÿ</p><p>å½“ç„¶ï¼Œè¿™æ ·æ•ˆç‡å¤ªä½äº†ã€‚æ‰€ä»¥åœ¨æ–‡ä»¶ç³»ç»Ÿé‡Œé¢ï¼Œæˆ‘ä»¬ä¸“é—¨å¼„äº†ä¸€ä¸ªå—æ¥ä¿å­˜inodeçš„ä½å›¾ã€‚åœ¨è¿™4ké‡Œé¢ï¼Œæ¯ä¸€ä½å¯¹åº”ä¸€ä¸ªinodeã€‚å¦‚æœæ˜¯1ï¼Œè¡¨ç¤ºè¿™ä¸ªinodeå·²ç»è¢«ç”¨äº†ï¼›å¦‚æœæ˜¯0ï¼Œåˆ™è¡¨ç¤ºæ²¡è¢«ç”¨ã€‚åŒæ ·ï¼Œæˆ‘ä»¬ä¹Ÿå¼„äº†ä¸€ä¸ªå—ä¿å­˜blockçš„ä½å›¾ã€‚</p><p>ä¸Šæµ·è™¹æ¡¥ç«è½¦ç«™çš„å•ä½æ™ºèƒ½å¼•å¯¼ç³»ç»Ÿï¼Œä¸çŸ¥é“ä½ æœ‰æ²¡æœ‰è§è¿‡ï¼Ÿè¿™ä¸ªç³»ç»Ÿå¾ˆå‰å®³ï¼Œæˆ‘ä»¬è¦æƒ³çŸ¥é“å“ªä¸ªä½ç½®æœ‰æ²¡æœ‰è¢«å ç”¨ï¼Œä¸ç”¨æŒ¨ä¸ªæ‹‰é—¨ï¼Œä»è¿™æ ·ä¸€ä¸ªç”µå­ç‰ˆä¸Šå°±èƒ½çœ‹åˆ°äº†ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/d7/25/d790fb19b76d7504985639aceac43c25.jpeg?wh=536*405\" alt=\"\"></p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥çœ‹ä½å›¾ç©¶ç«Ÿæ˜¯å¦‚ä½•åœ¨Linuxæ“ä½œç³»ç»Ÿé‡Œé¢èµ·ä½œç”¨çš„ã€‚å‰ä¸€èŠ‚æˆ‘ä»¬è®²è¿‡ï¼Œå¦‚æœåˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶ï¼Œä¼šè°ƒç”¨openå‡½æ•°ï¼Œå¹¶ä¸”å‚æ•°ä¼šæœ‰O_CREATã€‚è¿™è¡¨ç¤ºå½“æ–‡ä»¶æ‰¾ä¸åˆ°çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±éœ€è¦åˆ›å»ºä¸€ä¸ªã€‚openæ˜¯ä¸€ä¸ªç³»ç»Ÿè°ƒç”¨ï¼Œåœ¨å†…æ ¸é‡Œé¢ä¼šè°ƒç”¨sys_openï¼Œå®šä¹‰å¦‚ä¸‹ï¼š</p><pre><code>SYSCALL_DEFINE3(open, const char __user *, filename, int, flags, umode_t, mode)\n{\n\tif (force_o_largefile())\n\t\tflags |= O_LARGEFILE;\n\n\n\treturn do_sys_open(AT_FDCWD, filename, flags, mode);\n}\n</code></pre><p>è¿™é‡Œæˆ‘ä»¬è¿˜æ˜¯é‡ç‚¹çœ‹å¯¹äºinodeçš„æ“ä½œã€‚å…¶å®openä¸€ä¸ªæ–‡ä»¶å¾ˆå¤æ‚ï¼Œä¸‹ä¸€èŠ‚æˆ‘ä»¬ä¼šè¯¦ç»†åˆ†ææ•´ä¸ªè¿‡ç¨‹ã€‚</p><p>æˆ‘ä»¬æ¥çœ‹æ¥ä¸‹æ¥çš„è°ƒç”¨é“¾ï¼šdo_sys_open-&gt; do_filp_open-&gt;path_openat-&gt;do_last-&gt;lookup_openã€‚è¿™ä¸ªè°ƒç”¨é“¾çš„é€»è¾‘æ˜¯ï¼Œè¦æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ï¼Œå…ˆè¦æ ¹æ®è·¯å¾„æ‰¾åˆ°æ–‡ä»¶å¤¹ã€‚å¦‚æœå‘ç°æ–‡ä»¶å¤¹ä¸‹é¢æ²¡æœ‰è¿™ä¸ªæ–‡ä»¶ï¼ŒåŒæ—¶åˆè®¾ç½®äº†O_CREATï¼Œå°±è¯´æ˜æˆ‘ä»¬è¦åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹é¢åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œé‚£æˆ‘ä»¬å°±éœ€è¦ä¸€ä¸ªæ–°çš„inodeã€‚</p><pre><code>static int lookup_open(struct nameidata *nd, struct path *path,\n\t\t\tstruct file *file,\n\t\t\tconst struct open_flags *op,\n\t\t\tbool got_write, int *opened)\n{\n......\n\tif (!dentry-&gt;d_inode &amp;&amp; (open_flag &amp; O_CREAT)) {\n......\n\t\terror = dir_inode-&gt;i_op-&gt;create(dir_inode, dentry, mode,\n\t\t\t\t\t\topen_flag &amp; O_EXCL);\n......\n\t}\n......\n}\n</code></pre><p>æƒ³è¦åˆ›å»ºæ–°çš„inodeï¼Œæˆ‘ä»¬å°±è¦è°ƒç”¨dir_inodeï¼Œä¹Ÿå°±æ˜¯æ–‡ä»¶å¤¹çš„inodeçš„createå‡½æ•°ã€‚å®ƒçš„å…·ä½“å®šä¹‰æ˜¯è¿™æ ·çš„ï¼š</p><pre><code>const struct inode_operations ext4_dir_inode_operations = {\n\t.create\t\t= ext4_create,\n\t.lookup\t\t= ext4_lookup,\n\t.link\t\t= ext4_link,\n\t.unlink\t\t= ext4_unlink,\n\t.symlink\t= ext4_symlink,\n\t.mkdir\t\t= ext4_mkdir,\n\t.rmdir\t\t= ext4_rmdir,\n\t.mknod\t\t= ext4_mknod,\n\t.tmpfile\t= ext4_tmpfile,\n\t.rename\t\t= ext4_rename2,\n\t.setattr\t= ext4_setattr,\n\t.getattr\t= ext4_getattr,\n\t.listxattr\t= ext4_listxattr,\n\t.get_acl\t= ext4_get_acl,\n\t.set_acl\t= ext4_set_acl,\n\t.fiemap         = ext4_fiemap,\n};\n</code></pre><p>è¿™é‡Œé¢å®šä¹‰äº†ï¼Œå¦‚æœæ–‡ä»¶å¤¹inodeè¦åšä¸€äº›æ“ä½œï¼Œæ¯ä¸ªæ“ä½œå¯¹åº”åº”è¯¥è°ƒç”¨å“ªäº›å‡½æ•°ã€‚è¿™é‡Œcreateæ“ä½œè°ƒç”¨çš„æ˜¯ext4_createã€‚</p><p>æ¥ä¸‹æ¥çš„è°ƒç”¨é“¾æ˜¯è¿™æ ·çš„ï¼šext4_create-&gt;ext4_new_inode_start_handle-&gt;__ext4_new_inodeã€‚åœ¨__ext4_new_inodeå‡½æ•°ä¸­ï¼Œæˆ‘ä»¬ä¼šåˆ›å»ºæ–°çš„inodeã€‚</p><pre><code>struct inode *__ext4_new_inode(handle_t *handle, struct inode *dir,\n\t\t\t       umode_t mode, const struct qstr *qstr,\n\t\t\t       __u32 goal, uid_t *owner, __u32 i_flags,\n\t\t\t       int handle_type, unsigned int line_no,\n\t\t\t       int nblocks)\n{\n......\ninode_bitmap_bh = ext4_read_inode_bitmap(sb, group);\n......\nino = ext4_find_next_zero_bit((unsigned long *)\n\t\t\t\t\t      inode_bitmap_bh-&gt;b_data,\n\t\t\t\t\t      EXT4_INODES_PER_GROUP(sb), ino);\n......\n}\n</code></pre><p>è¿™é‡Œé¢ä¸€ä¸ªé‡è¦çš„é€»è¾‘å°±æ˜¯ï¼Œä»æ–‡ä»¶ç³»ç»Ÿé‡Œé¢è¯»å–inodeä½å›¾ï¼Œç„¶åæ‰¾åˆ°ä¸‹ä¸€ä¸ªä¸º0çš„inodeï¼Œå°±æ˜¯ç©ºé—²çš„inodeã€‚</p><p>å¯¹äºblockä½å›¾ï¼Œåœ¨å†™å…¥æ–‡ä»¶çš„æ—¶å€™ï¼Œä¹Ÿä¼šæœ‰è¿™ä¸ªè¿‡ç¨‹ï¼Œæˆ‘å°±ä¸å±•å¼€è¯´äº†ã€‚æ„Ÿå…´è¶£çš„è¯ï¼Œä½ å¯ä»¥è‡ªå·±å»æ‰¾ä»£ç çœ‹ã€‚</p><h2>æ–‡ä»¶ç³»ç»Ÿçš„æ ¼å¼</h2><p>çœ‹èµ·æ¥ï¼Œæˆ‘ä»¬ç°åœ¨åº”è¯¥èƒ½å¤Ÿå¾ˆé¡ºåˆ©åœ°é€šè¿‡inodeä½å›¾å’Œblockä½å›¾åˆ›å»ºæ–‡ä»¶äº†ã€‚å¦‚æœä»”ç»†è®¡ç®—ä¸€ä¸‹ï¼Œå…¶å®è¿˜æ˜¯æœ‰é—®é¢˜çš„ã€‚</p><p>æ•°æ®å—çš„ä½å›¾æ˜¯æ”¾åœ¨ä¸€ä¸ªå—é‡Œé¢çš„ï¼Œå…±4kã€‚æ¯ä½è¡¨ç¤ºä¸€ä¸ªæ•°æ®å—ï¼Œå…±å¯ä»¥è¡¨ç¤º$4 * 1024 * 8 = 2^{15}$ä¸ªæ•°æ®å—ã€‚å¦‚æœæ¯ä¸ªæ•°æ®å—ä¹Ÿæ˜¯æŒ‰é»˜è®¤çš„4Kï¼Œæœ€å¤§å¯ä»¥è¡¨ç¤ºç©ºé—´ä¸º$2^{15} * 4 * 1024 = 2^{27}$ä¸ªbyteï¼Œä¹Ÿå°±æ˜¯128Mã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´æŒ‰ç…§ä¸Šé¢çš„æ ¼å¼ï¼Œå¦‚æœé‡‡ç”¨â€œ<strong>ä¸€ä¸ªå—çš„ä½å›¾+ä¸€ç³»åˆ—çš„å—</strong>â€ï¼Œå¤–åŠ â€œ<strong>ä¸€ä¸ªå—çš„inodeçš„ä½å›¾+ä¸€ç³»åˆ—çš„inodeçš„ç»“æ„</strong>â€ï¼Œæœ€å¤šèƒ½å¤Ÿè¡¨ç¤º128Mã€‚æ˜¯ä¸æ˜¯å¤ªå°äº†ï¼Ÿç°åœ¨å¾ˆå¤šæ–‡ä»¶éƒ½æ¯”è¿™ä¸ªå¤§ã€‚æˆ‘ä»¬å…ˆæŠŠè¿™ä¸ªç»“æ„ç§°ä¸ºä¸€ä¸ª<strong>å—ç»„</strong>ã€‚æœ‰Nå¤šçš„å—ç»„ï¼Œå°±èƒ½å¤Ÿè¡¨ç¤ºNå¤§çš„æ–‡ä»¶ã€‚</p><p>å¯¹äºå—ç»„ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦ä¸€ä¸ªæ•°æ®ç»“æ„æ¥è¡¨ç¤ºä¸ºext4_group_descã€‚è¿™é‡Œé¢å¯¹äºä¸€ä¸ªå—ç»„é‡Œçš„inodeä½å›¾bg_inode_bitmap_loã€å—ä½å›¾bg_block_bitmap_loã€inodeåˆ—è¡¨bg_inode_table_loï¼Œéƒ½æœ‰ç›¸åº”çš„æˆå‘˜å˜é‡ã€‚</p><p>è¿™æ ·ä¸€ä¸ªä¸ªå—ç»„ï¼Œå°±åŸºæœ¬æ„æˆäº†æˆ‘ä»¬æ•´ä¸ªæ–‡ä»¶ç³»ç»Ÿçš„ç»“æ„ã€‚å› ä¸ºå—ç»„æœ‰å¤šä¸ªï¼Œå—ç»„æè¿°ç¬¦ä¹ŸåŒæ ·ç»„æˆä¸€ä¸ªåˆ—è¡¨ï¼Œæˆ‘ä»¬æŠŠè¿™äº›ç§°ä¸º<strong>å—ç»„æè¿°ç¬¦è¡¨</strong>ã€‚</p><p>å½“ç„¶ï¼Œæˆ‘ä»¬è¿˜éœ€è¦æœ‰ä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œå¯¹æ•´ä¸ªæ–‡ä»¶ç³»ç»Ÿçš„æƒ…å†µè¿›è¡Œæè¿°ï¼Œè¿™ä¸ªå°±æ˜¯<strong>è¶…çº§å—</strong>ext4_super_blockã€‚è¿™é‡Œé¢æœ‰æ•´ä¸ªæ–‡ä»¶ç³»ç»Ÿä¸€å…±æœ‰å¤šå°‘inodeï¼Œs_inodes_countï¼›ä¸€å…±æœ‰å¤šå°‘å—ï¼Œs_blocks_count_loï¼Œæ¯ä¸ªå—ç»„æœ‰å¤šå°‘inodeï¼Œs_inodes_per_groupï¼Œæ¯ä¸ªå—ç»„æœ‰å¤šå°‘å—ï¼Œs_blocks_per_groupç­‰ã€‚è¿™äº›éƒ½æ˜¯è¿™ç±»çš„å…¨å±€ä¿¡æ¯ã€‚</p><p>å¯¹äºæ•´ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œåˆ«å¿˜äº†å’±ä»¬è®²ç³»ç»Ÿå¯åŠ¨çš„æ—¶å€™è¯´çš„ã€‚å¦‚æœæ˜¯ä¸€ä¸ªå¯åŠ¨ç›˜ï¼Œæˆ‘ä»¬éœ€è¦é¢„ç•™ä¸€å—åŒºåŸŸä½œä¸ºå¼•å¯¼åŒºï¼Œæ‰€ä»¥ç¬¬ä¸€ä¸ªå—ç»„çš„å‰é¢è¦ç•™1Kï¼Œç”¨äºå¯åŠ¨å¼•å¯¼åŒºã€‚</p><p>æœ€ç»ˆï¼Œæ•´ä¸ªæ–‡ä»¶ç³»ç»Ÿæ ¼å¼å°±æ˜¯ä¸‹é¢è¿™ä¸ªæ ·å­ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/e3/1b/e3718f0af6a2523a43606a0c4003631b.jpeg?wh=2263*823\" alt=\"\"></p><p>è¿™é‡Œé¢æˆ‘è¿˜éœ€è¦é‡ç‚¹è¯´ä¸€ä¸‹ï¼Œè¶…çº§å—å’Œå—ç»„æè¿°ç¬¦è¡¨éƒ½æ˜¯å…¨å±€ä¿¡æ¯ï¼Œè€Œä¸”è¿™äº›æ•°æ®å¾ˆé‡è¦ã€‚å¦‚æœè¿™äº›æ•°æ®ä¸¢å¤±äº†ï¼Œæ•´ä¸ªæ–‡ä»¶ç³»ç»Ÿéƒ½æ‰“ä¸å¼€äº†ï¼Œè¿™æ¯”ä¸€ä¸ªæ–‡ä»¶çš„ä¸€ä¸ªå—æŸåæ›´ä¸¥é‡ã€‚æ‰€ä»¥ï¼Œè¿™ä¸¤éƒ¨åˆ†æˆ‘ä»¬éƒ½éœ€è¦å¤‡ä»½ï¼Œä½†æ˜¯é‡‡å–ä¸åŒçš„ç­–ç•¥ã€‚</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œè¶…çº§å—å’Œå—ç»„æè¿°ç¬¦è¡¨éƒ½æœ‰å‰¯æœ¬ä¿å­˜åœ¨æ¯ä¸€ä¸ªå—ç»„é‡Œé¢ã€‚</p><p>å¦‚æœå¼€å¯äº†sparse_superç‰¹æ€§ï¼Œè¶…çº§å—å’Œå—ç»„æè¿°ç¬¦è¡¨çš„å‰¯æœ¬åªä¼šä¿å­˜åœ¨å—ç»„ç´¢å¼•ä¸º0ã€3ã€5ã€7çš„æ•´æ•°å¹‚é‡Œã€‚é™¤äº†å—ç»„0ä¸­å­˜åœ¨ä¸€ä¸ªè¶…çº§å—å¤–ï¼Œåœ¨å—ç»„1ï¼ˆ$3^0=1$ï¼‰çš„ç¬¬ä¸€ä¸ªå—ä¸­å­˜åœ¨ä¸€ä¸ªå‰¯æœ¬ï¼›åœ¨å—ç»„3ï¼ˆ$3^1=3$ï¼‰ã€å—ç»„5ï¼ˆ$5^1=5$ï¼‰ã€å—ç»„7ï¼ˆ$7^1=7$ï¼‰ã€å—ç»„9ï¼ˆ$3^2=9$ï¼‰ã€å—ç»„25ï¼ˆ$5^2=25$ï¼‰ã€å—ç»„27ï¼ˆ$3^3=27$ï¼‰çš„ç¬¬ä¸€ä¸ªblockå¤„ä¹Ÿå­˜åœ¨ä¸€ä¸ªå‰¯æœ¬ã€‚</p><p>å¯¹äºè¶…çº§å—æ¥è®²ï¼Œç”±äºè¶…çº§å—ä¸æ˜¯å¾ˆå¤§ï¼Œæ‰€ä»¥å°±ç®—æˆ‘ä»¬å¤‡ä»½å¤šäº†ä¹Ÿæ²¡æœ‰å¤ªå¤šé—®é¢˜ã€‚ä½†æ˜¯ï¼Œå¯¹äºå—ç»„æè¿°ç¬¦è¡¨æ¥è®²ï¼Œå¦‚æœæ¯ä¸ªå—ç»„é‡Œé¢éƒ½ä¿å­˜ä¸€ä»½å®Œæ•´çš„å—ç»„æè¿°ç¬¦è¡¨ï¼Œä¸€æ–¹é¢å¾ˆæµªè´¹ç©ºé—´ï¼›å¦ä¸€ä¸ªæ–¹é¢ï¼Œç”±äºä¸€ä¸ªå—ç»„æœ€å¤§128Mï¼Œè€Œå—ç»„æè¿°ç¬¦è¡¨é‡Œé¢æœ‰å¤šå°‘é¡¹ï¼Œè¿™å°±é™åˆ¶äº†æœ‰å¤šå°‘ä¸ªå—ç»„ï¼Œ128M * å—ç»„çš„æ€»æ•°ç›®æ˜¯æ•´ä¸ªæ–‡ä»¶ç³»ç»Ÿçš„å¤§å°ï¼Œå°±è¢«é™åˆ¶ä½äº†ã€‚</p><p>æˆ‘ä»¬çš„æ”¹è¿›çš„æ€è·¯å°±æ˜¯å¼•å…¥<strong>Meta Block Groupsç‰¹æ€§</strong>ã€‚</p><p>é¦–å…ˆï¼Œå—ç»„æè¿°ç¬¦è¡¨ä¸ä¼šä¿å­˜æ‰€æœ‰å—ç»„çš„æè¿°ç¬¦äº†ï¼Œè€Œæ˜¯å°†å—ç»„åˆ†æˆå¤šä¸ªç»„ï¼Œæˆ‘ä»¬ç§°ä¸ºå…ƒå—ç»„ï¼ˆMeta Block Groupï¼‰ã€‚æ¯ä¸ªå…ƒå—ç»„é‡Œé¢çš„å—ç»„æè¿°ç¬¦è¡¨ä»…ä»…åŒ…æ‹¬è‡ªå·±çš„ï¼Œä¸€ä¸ªå…ƒå—ç»„åŒ…å«64ä¸ªå—ç»„ï¼Œè¿™æ ·ä¸€ä¸ªå…ƒå—ç»„ä¸­çš„å—ç»„æè¿°ç¬¦è¡¨æœ€å¤š64é¡¹ã€‚æˆ‘ä»¬å‡è®¾ä¸€å…±æœ‰256ä¸ªå—ç»„ï¼ŒåŸæ¥æ˜¯ä¸€ä¸ªæ•´çš„å—ç»„æè¿°ç¬¦è¡¨ï¼Œé‡Œé¢æœ‰256é¡¹ï¼Œè¦å¤‡ä»½å°±å…¨å¤‡ä»½ï¼Œç°åœ¨åˆ†æˆ4ä¸ªå…ƒå—ç»„ï¼Œæ¯ä¸ªå…ƒå—ç»„é‡Œé¢çš„å—ç»„æè¿°ç¬¦è¡¨å°±åªæœ‰64é¡¹äº†ï¼Œè¿™å°±å°å¤šäº†ï¼Œè€Œä¸”å››ä¸ªå…ƒå—ç»„è‡ªå·±å¤‡ä»½è‡ªå·±çš„ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/b0/b9/b0bf4690882253a70705acc7368983b9.jpeg?wh=2149*1543\" alt=\"\"></p><p>æ ¹æ®å›¾ä¸­ï¼Œæ¯ä¸€ä¸ªå…ƒå—ç»„åŒ…å«64ä¸ªå—ç»„ï¼Œå—ç»„æè¿°ç¬¦è¡¨ä¹Ÿæ˜¯64é¡¹ï¼Œå¤‡ä»½ä¸‰ä»½ï¼Œåœ¨å…ƒå—ç»„çš„ç¬¬ä¸€ä¸ªï¼Œç¬¬äºŒä¸ªå’Œæœ€åä¸€ä¸ªå—ç»„çš„å¼€å§‹å¤„ã€‚</p><p>è¿™æ ·åŒ–æ•´ä¸ºé›¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥å‘æŒ¥å‡ºext4çš„48ä½å—å¯»å€çš„ä¼˜åŠ¿äº†ï¼Œåœ¨è¶…çº§å—ext4_super_blockçš„å®šä¹‰ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å—å¯»å€åˆ†ä¸ºé«˜ä½å’Œä½ä½ï¼Œå‡ä¸º32ä½ï¼Œå…¶ä¸­æœ‰ç”¨çš„æ˜¯48ä½ï¼Œ2^48ä¸ªå—æ˜¯1EBï¼Œè¶³å¤Ÿç”¨äº†ã€‚</p><pre><code>struct ext4_super_block {\n......\n\t__le32\ts_blocks_count_lo;\t/* Blocks count */\n\t__le32\ts_r_blocks_count_lo;\t/* Reserved blocks count */\n\t__le32\ts_free_blocks_count_lo;\t/* Free blocks count */\n......\n\t__le32\ts_blocks_count_hi;\t/* Blocks count */\n\t__le32\ts_r_blocks_count_hi;\t/* Reserved blocks count */\n\t__le32\ts_free_blocks_count_hi;\t/* Free blocks count */\n......\n}\n</code></pre><h2>ç›®å½•çš„å­˜å‚¨æ ¼å¼</h2><p>é€šè¿‡å‰é¢çš„æè¿°ï¼Œæˆ‘ä»¬ç°åœ¨çŸ¥é“äº†ä¸€ä¸ªæ™®é€šçš„æ–‡ä»¶æ˜¯å¦‚ä½•å­˜å‚¨çš„ã€‚æœ‰ä¸€ç±»ç‰¹æ®Šçš„æ–‡ä»¶ï¼Œæˆ‘ä»¬ä¼šç»å¸¸ç”¨åˆ°ï¼Œå°±æ˜¯ç›®å½•ï¼Œå®ƒæ˜¯å¦‚ä½•ä¿å­˜çš„å‘¢ï¼Ÿ</p><p>å…¶å®ç›®å½•æœ¬èº«ä¹Ÿæ˜¯ä¸ªæ–‡ä»¶ï¼Œä¹Ÿæœ‰inodeã€‚inodeé‡Œé¢ä¹Ÿæ˜¯æŒ‡å‘ä¸€äº›å—ã€‚å’Œæ™®é€šæ–‡ä»¶ä¸åŒçš„æ˜¯ï¼Œæ™®é€šæ–‡ä»¶çš„å—é‡Œé¢ä¿å­˜çš„æ˜¯æ–‡ä»¶æ•°æ®ï¼Œè€Œç›®å½•æ–‡ä»¶çš„å—é‡Œé¢ä¿å­˜çš„æ˜¯ç›®å½•é‡Œé¢ä¸€é¡¹ä¸€é¡¹çš„æ–‡ä»¶ä¿¡æ¯ã€‚è¿™äº›ä¿¡æ¯æˆ‘ä»¬ç§°ä¸ºext4_dir_entryã€‚ä»ä»£ç æ¥çœ‹ï¼Œæœ‰ä¸¤ä¸ªç‰ˆæœ¬ï¼Œåœ¨æˆå‘˜æ¥è®²å‡ ä¹æ²¡æœ‰å·®åˆ«ï¼Œåªä¸è¿‡ç¬¬äºŒä¸ªç‰ˆæœ¬ext4_dir_entry_2æ˜¯å°†ä¸€ä¸ª16ä½çš„name_lenï¼Œå˜æˆäº†ä¸€ä¸ª8ä½çš„name_lenå’Œ8ä½çš„file_typeã€‚</p><pre><code>struct ext4_dir_entry {\n\t__le32\tinode;\t\t\t/* Inode number */\n\t__le16\trec_len;\t\t/* Directory entry length */\n\t__le16\tname_len;\t\t/* Name length */\n\tchar\tname[EXT4_NAME_LEN];\t/* File name */\n};\nstruct ext4_dir_entry_2 {\n\t__le32\tinode;\t\t\t/* Inode number */\n\t__le16\trec_len;\t\t/* Directory entry length */\n\t__u8\tname_len;\t\t/* Name length */\n\t__u8\tfile_type;\n\tchar\tname[EXT4_NAME_LEN];\t/* File name */\n};\n</code></pre><p>åœ¨ç›®å½•æ–‡ä»¶çš„å—ä¸­ï¼Œæœ€ç®€å•çš„ä¿å­˜æ ¼å¼æ˜¯åˆ—è¡¨ï¼Œå°±æ˜¯ä¸€é¡¹ä¸€é¡¹åœ°å°†ext4_dir_entry_2åˆ—åœ¨å“ªé‡Œã€‚</p><p>æ¯ä¸€é¡¹éƒ½ä¼šä¿å­˜è¿™ä¸ªç›®å½•çš„ä¸‹ä¸€çº§çš„æ–‡ä»¶çš„æ–‡ä»¶åå’Œå¯¹åº”çš„inodeï¼Œé€šè¿‡è¿™ä¸ªinodeï¼Œå°±èƒ½æ‰¾åˆ°çœŸæ­£çš„æ–‡ä»¶ã€‚ç¬¬ä¸€é¡¹æ˜¯â€œ.â€ï¼Œè¡¨ç¤ºå½“å‰ç›®å½•ï¼Œç¬¬äºŒé¡¹æ˜¯â€œâ€¦â€ï¼Œè¡¨ç¤ºä¸Šä¸€çº§ç›®å½•ï¼Œæ¥ä¸‹æ¥å°±æ˜¯ä¸€é¡¹ä¸€é¡¹çš„æ–‡ä»¶åå’Œinodeã€‚</p><p>æœ‰æ—¶å€™ï¼Œå¦‚æœä¸€ä¸ªç›®å½•ä¸‹é¢çš„æ–‡ä»¶å¤ªå¤šçš„æ—¶å€™ï¼Œæˆ‘ä»¬æƒ³åœ¨è¿™ä¸ªç›®å½•ä¸‹æ‰¾ä¸€ä¸ªæ–‡ä»¶ï¼ŒæŒ‰ç…§åˆ—è¡¨ä¸€ä¸ªä¸ªå»æ‰¾ï¼Œå¤ªæ…¢äº†ï¼Œäºæ˜¯æˆ‘ä»¬å°±æ·»åŠ äº†ç´¢å¼•çš„æ¨¡å¼ã€‚</p><p>å¦‚æœåœ¨inodeä¸­è®¾ç½®EXT4_INDEX_FLæ ‡å¿—ï¼Œåˆ™ç›®å½•æ–‡ä»¶çš„å—çš„ç»„ç»‡å½¢å¼å°†å‘ç”Ÿå˜åŒ–ï¼Œå˜æˆäº†ä¸‹é¢å®šä¹‰çš„è¿™ä¸ªæ ·å­ï¼š</p><pre><code>struct dx_root\n{\n\tstruct fake_dirent dot;\n\tchar dot_name[4];\n\tstruct fake_dirent dotdot;\n\tchar dotdot_name[4];\n\tstruct dx_root_info\n\t{\n\t\t__le32 reserved_zero;\n\t\tu8 hash_version;\n\t\tu8 info_length; /* 8 */\n\t\tu8 indirect_levels;\n\t\tu8 unused_flags;\n\t}\n\tinfo;\n\tstruct dx_entry\tentries[0];\n};\n</code></pre><p>å½“ç„¶ï¼Œé¦–å…ˆå‡ºç°çš„è¿˜æ˜¯å·®ä¸å¤šçš„ï¼Œç¬¬ä¸€é¡¹æ˜¯â€œ.â€ï¼Œè¡¨ç¤ºå½“å‰ç›®å½•ï¼›ç¬¬äºŒé¡¹æ˜¯â€œâ€¦â€ï¼Œè¡¨ç¤ºä¸Šä¸€çº§ç›®å½•ï¼Œè¿™ä¸¤ä¸ªä¸å˜ã€‚æ¥ä¸‹æ¥å°±å¼€å§‹å‘ç”Ÿæ”¹å˜äº†ã€‚æ˜¯ä¸€ä¸ªdx_root_infoçš„ç»“æ„ï¼Œå…¶ä¸­æœ€é‡è¦çš„æˆå‘˜å˜é‡æ˜¯indirect_levelsï¼Œè¡¨ç¤ºé—´æ¥ç´¢å¼•çš„å±‚æ•°ã€‚</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹ç´¢å¼•é¡¹dx_entryã€‚è¿™ä¸ªä¹Ÿå¾ˆç®€å•ï¼Œå…¶å®å°±æ˜¯æ–‡ä»¶åçš„å“ˆå¸Œå€¼å’Œæ•°æ®å—çš„ä¸€ä¸ªæ˜ å°„å…³ç³»ã€‚</p><pre><code>struct dx_entry\n{\n\t__le32 hash;\n\t__le32 block;\n};\n</code></pre><p>å¦‚æœæˆ‘ä»¬è¦æŸ¥æ‰¾ä¸€ä¸ªç›®å½•ä¸‹é¢çš„æ–‡ä»¶åï¼Œå¯ä»¥é€šè¿‡åç§°å–å“ˆå¸Œã€‚å¦‚æœå“ˆå¸Œèƒ½å¤ŸåŒ¹é…ä¸Šï¼Œå°±è¯´æ˜è¿™ä¸ªæ–‡ä»¶çš„ä¿¡æ¯åœ¨ç›¸åº”çš„å—é‡Œé¢ã€‚ç„¶åæ‰“å¼€è¿™ä¸ªå—ï¼Œå¦‚æœé‡Œé¢ä¸å†æ˜¯ç´¢å¼•ï¼Œè€Œæ˜¯ç´¢å¼•æ ‘çš„å¶å­èŠ‚ç‚¹çš„è¯ï¼Œé‚£é‡Œé¢è¿˜æ˜¯ext4_dir_entry_2çš„åˆ—è¡¨ï¼Œæˆ‘ä»¬åªè¦ä¸€é¡¹ä¸€é¡¹æ‰¾æ–‡ä»¶åå°±è¡Œã€‚é€šè¿‡ç´¢å¼•æ ‘ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä¸€ä¸ªç›®å½•ä¸‹é¢çš„Nå¤šçš„æ–‡ä»¶åˆ†æ•£åˆ°å¾ˆå¤šçš„å—é‡Œé¢ï¼Œå¯ä»¥å¾ˆå¿«åœ°è¿›è¡ŒæŸ¥æ‰¾ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/3e/6d/3ea2ad5704f20538d9c911b02f42086d.jpeg?wh=3253*2548\" alt=\"\"></p><h2>è½¯é“¾æ¥å’Œç¡¬é“¾æ¥çš„å­˜å‚¨æ ¼å¼</h2><p>è¿˜æœ‰ä¸€ç§ç‰¹æ®Šçš„æ–‡ä»¶æ ¼å¼ï¼Œç¡¬é“¾æ¥ï¼ˆHard Linkï¼‰å’Œè½¯é“¾æ¥ï¼ˆSymbolic Linkï¼‰ã€‚åœ¨è®²æ“ä½œæ–‡ä»¶çš„å‘½ä»¤çš„æ—¶å€™ï¼Œæˆ‘ä»¬è®²è¿‡è½¯é“¾æ¥çš„æ¦‚å¿µã€‚æ‰€è°“çš„é“¾æ¥ï¼ˆLinkï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥è®¤ä¸ºæ˜¯æ–‡ä»¶çš„åˆ«åï¼Œè€Œé“¾æ¥åˆå¯åˆ†ä¸ºä¸¤ç§ï¼Œç¡¬é“¾æ¥ä¸è½¯é“¾æ¥ã€‚é€šè¿‡ä¸‹é¢çš„å‘½ä»¤å¯ä»¥åˆ›å»ºã€‚</p><pre><code> ln [å‚æ•°][æºæ–‡ä»¶æˆ–ç›®å½•][ç›®æ ‡æ–‡ä»¶æˆ–ç›®å½•]\n</code></pre><p>ln -såˆ›å»ºçš„æ˜¯è½¯é“¾æ¥ï¼Œä¸å¸¦-såˆ›å»ºçš„æ˜¯ç¡¬é“¾æ¥ã€‚å®ƒä»¬æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿåœ¨æ–‡ä»¶ç³»ç»Ÿé‡Œé¢æ˜¯æ€ä¹ˆä¿å­˜çš„å‘¢ï¼Ÿ</p><p><img src=\"https://static001.geekbang.org/resource/image/45/7b/45a6cfdd9d45e30dc2f38f0d2572be7b.jpeg?wh=2188*2176\" alt=\"\"></p><p>å¦‚å›¾æ‰€ç¤ºï¼Œç¡¬é“¾æ¥ä¸åŸå§‹æ–‡ä»¶å…±ç”¨ä¸€ä¸ªinodeçš„ï¼Œä½†æ˜¯inodeæ˜¯ä¸è·¨æ–‡ä»¶ç³»ç»Ÿçš„ï¼Œæ¯ä¸ªæ–‡ä»¶ç³»ç»Ÿéƒ½æœ‰è‡ªå·±çš„inodeåˆ—è¡¨ï¼Œå› è€Œç¡¬é“¾æ¥æ˜¯æ²¡æœ‰åŠæ³•è·¨æ–‡ä»¶ç³»ç»Ÿçš„ã€‚</p><p>è€Œè½¯é“¾æ¥ä¸åŒï¼Œè½¯é“¾æ¥ç›¸å½“äºé‡æ–°åˆ›å»ºäº†ä¸€ä¸ªæ–‡ä»¶ã€‚è¿™ä¸ªæ–‡ä»¶ä¹Ÿæœ‰ç‹¬ç«‹çš„inodeï¼Œåªä¸è¿‡æ‰“å¼€è¿™ä¸ªæ–‡ä»¶çœ‹é‡Œé¢å†…å®¹çš„æ—¶å€™ï¼Œå†…å®¹æŒ‡å‘å¦å¤–çš„ä¸€ä¸ªæ–‡ä»¶ã€‚è¿™å°±å¾ˆçµæ´»äº†ã€‚æˆ‘ä»¬å¯ä»¥è·¨æ–‡ä»¶ç³»ç»Ÿï¼Œç”šè‡³ç›®æ ‡æ–‡ä»¶è¢«åˆ é™¤äº†ï¼Œé“¾æ¥æ–‡ä»¶è¿˜æ˜¯åœ¨çš„ï¼Œåªä¸è¿‡æŒ‡å‘çš„æ–‡ä»¶æ‰¾ä¸åˆ°äº†è€Œå·²ã€‚</p><h2>æ€»ç»“æ—¶åˆ»</h2><p>è¿™ä¸€èŠ‚ï¼Œæˆ‘ä»¬æè¿°äº†å¤æ‚çš„ç¡¬ç›˜ä¸Šçš„æ–‡ä»¶ç³»ç»Ÿï¼Œä½†æ˜¯å¯¹äºå’±ä»¬å¹³æ—¶çš„åº”ç”¨æ¥è®²ï¼Œç”¨çš„æœ€å¤šçš„æ˜¯ä¸¤ä¸ªæ¦‚å¿µï¼Œä¸€ä¸ªæ˜¯inodeï¼Œä¸€ä¸ªæ˜¯æ•°æ®å—ã€‚</p><p>è¿™é‡Œæˆ‘ç”»äº†ä¸€å¼ å›¾ï¼Œæ¥æ€»ç»“ä¸€ä¸‹inodeå’Œæ•°æ®å—åœ¨æ–‡ä»¶ç³»ç»Ÿä¸Šçš„å…³è”å…³ç³»ã€‚</p><p>ä¸ºäº†è¡¨ç¤ºå›¾ä¸­ä¸ŠåŠéƒ¨åˆ†çš„é‚£ä¸ªç®€å•çš„æ ‘å½¢ç»“æ„ï¼Œåœ¨æ–‡ä»¶ç³»ç»Ÿä¸Šçš„å¸ƒå±€å°±åƒå›¾çš„ä¸‹åŠéƒ¨åˆ†ä¸€æ ·ã€‚æ— è®ºæ˜¯æ–‡ä»¶å¤¹è¿˜æ˜¯æ–‡ä»¶ï¼Œéƒ½æœ‰ä¸€ä¸ªinodeã€‚inodeé‡Œé¢ä¼šæŒ‡å‘æ•°æ®å—ï¼Œå¯¹äºæ–‡ä»¶å¤¹çš„æ•°æ®å—ï¼Œé‡Œé¢æ˜¯ä¸€ä¸ªè¡¨ï¼Œæ˜¯ä¸‹ä¸€å±‚çš„æ–‡ä»¶åå’Œinodeçš„å¯¹åº”å…³ç³»ï¼Œæ–‡ä»¶çš„æ•°æ®å—é‡Œé¢å­˜æ”¾çš„æ‰æ˜¯çœŸæ­£çš„æ•°æ®ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/f8/38/f81bf3e5a6cd060c3225a8ae1803a138.png?wh=3823*1876\" alt=\"\"></p><h2>è¯¾å ‚ç»ƒä¹ </h2><p>ä½ çŸ¥é“å¦‚ä½•æŸ¥çœ‹inodeçš„å†…å®¹å’Œæ–‡ä»¶å¤¹çš„å†…å®¹å—ï¼Ÿ</p><p>æ¬¢è¿ç•™è¨€å’Œæˆ‘åˆ†äº«ä½ çš„ç–‘æƒ‘å’Œè§è§£ ï¼Œä¹Ÿæ¬¢è¿å¯ä»¥æ”¶è—æœ¬èŠ‚å†…å®¹ï¼Œåå¤ç ”è¯»ã€‚ä½ ä¹Ÿå¯ä»¥æŠŠä»Šå¤©çš„å†…å®¹åˆ†äº«ç»™ä½ çš„æœ‹å‹ï¼Œå’Œä»–ä¸€èµ·å­¦ä¹ å’Œè¿›æ­¥ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/8c/37/8c0a95fa07a8b9a1abfd394479bdd637.jpg?wh=1110*659\" alt=\"\"></p>","neighbors":{"left":{"article_title":"27 | æ–‡ä»¶ç³»ç»Ÿï¼šé¡¹ç›®æˆæœè¦å½’æ¡£ï¼Œæˆ‘ä»¬å°±éœ€è¦æ¡£æ¡ˆåº“","id":97876},"right":{"article_title":"29 | è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿï¼šæ–‡ä»¶å¤šäº†å°±éœ€è¦æ¡£æ¡ˆç®¡ç†ç³»ç»Ÿ","id":98855}},"comments":[{"had_liked":false,"id":100516,"user_name":"why","can_delete":false,"product_type":"c1","uid":1012937,"ip_address":"","ucode":"C9E796E53F6F5E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/74/c9/d3439ca4.jpg","comment_is_top":false,"comment_ctime":1559568842,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"233487802826","product_id":100024701,"comment_content":"- ç£ç›˜â†’ç›˜ç‰‡â†’ç£é“â†’æ‰‡åŒº(æ¯ä¸ª 512 å­—èŠ‚)<br>- ext* å®šä¹‰æ–‡ä»¶ç³»ç»Ÿçš„æ ¼å¼<br>- inode ä¸æ•°æ®å—<br>    - ç¡¬ç›˜åˆ†ä¸ºå¤§å°ç›¸åŒçš„å•å…ƒâ†’å— ( block ), å¤§å° 4K, æ‰‡åŒºçš„æ•´æ•°å€, å¤§å°åœ¨æ ¼å¼åŒ–æ—¶å¯é…ç½®<br>    - å› æ­¤, å­˜æ”¾æ–‡ä»¶æ—¶ä¸ç”¨åˆ†é…è¿ç»­çš„ç©ºé—´<br>    - ä¹Ÿå› æ­¤è¦ä¸ºæ–‡ä»¶å»ºç«‹å—ç´¢å¼• + å…ƒæ•°æ®(åå­—, æƒé™, æ‰€å±) ä¿¡æ¯, å­˜æ”¾äº inode ä¸­<br>    - inode è¿˜ç»´æŠ¤ä¸‰ä¸ªæ—¶é—´: i_atime è®¿é—®æ—¶é—´; i_ctime æ›´æ”¹ inode æ—¶é—´; i_mtime æ›´æ”¹æ–‡ä»¶æ—¶é—´<br>    - æ–‡ä»¶åˆ†ä¸ºå¤šä¸ªå—, æ¯ä¸ªå—çš„ä½ç½®å­˜æ”¾åœ¨ inode çš„ i_block ä¸­, å…± 15 é¡¹<br>        - ext2 å’Œ ext3 ä¸­, å‰ 12 é¡¹ä¿å­˜å—çš„ä½ç½®, è‹¥æ–‡ä»¶è¾ƒå¤§, åˆ™ç¬¬åä¸‰é¡¹æŒ‡å‘é—´æ¥å—, é—´æ¥å—å­˜æ”¾å‰©ä½™æ•°æ®å—çš„ä½ç½®; æ–‡ä»¶å†å¤§, ç¬¬ 14 é¡¹æŒ‡å‘ä¸¤çº§é—´æ¥å—, ä»¥æ­¤ç±»æ¨<br>        - ä½†ä¸Šè¿°, å¤§æ–‡ä»¶éœ€è¦è®¿é—®å¤šä¸ªå—æ‰èƒ½è¯»å–åˆ°æ•°æ®<br>        - ext4 å¼•å…¥ Extents æ¦‚å¿µ, å¯ä»¥ç”¨äºå­˜æ”¾è¿ç»­çš„æ•°æ®å—<br>        - Extents æ˜¯æ ‘å½¢ç»“æ„, æ¯ä¸ªèŠ‚ç‚¹ç”±ä¸€ä¸ªå¤´ ext4_extend_header æ¥æè¿°èŠ‚ç‚¹<br>            - èŠ‚ç‚¹æœ‰å¤šä¸ªé¡¹, å¯¹äºå¶å­èŠ‚ç‚¹: æ¯é¡¹ç›´æ¥æŒ‡å‘ç¡¬ç›˜ä¸Šçš„è¿ç»­å—çš„åœ°å€; åˆ†æ”¯èŠ‚ç‚¹: æ¯é¡¹æŒ‡å‘ä¸‹ä¸€å±‚èŠ‚ç‚¹<br>            - æ–‡ä»¶ä¸å¤§: inode å¯æ”¾ä¸‹ä¸€ä¸ªå¤´ + 4 ä¸ªæ•°æ®é¡¹, eh_depth = 0 è¡¨ç¤ºæ•°æ®èŠ‚ç‚¹<br>            - æ–‡ä»¶è¾ƒå¤§: é™¤äº†æ ¹èŠ‚ç‚¹(å­˜äº inode.i_block ä¸­) , å…¶ä»–èŠ‚ç‚¹éƒ½å­˜äºä¸€ä¸ªå—ä¸­, 4K èƒ½å­˜ 340 é¡¹, æ¯é¡¹å¯æ”¾ 128MB, æ€» 42.5GB<br>- inode ä½å›¾ä¸å—ä½å›¾<br>    - è¦ä¿å­˜æ•°æ®æ˜¯, åº”æ”¾åœ¨å“ª? å…¨æ‰«ä¸€éæ•ˆç‡ä½<br>    - ç”¨ä¸€ä¸ªå—ä¿å­˜ inode ä½å›¾, æ¯ä¸€ä½å¯¹åº”ä¸€ä¸ª inode, 1â†’è¢«å ç”¨; åŒæ ·ç”¨ä¸€ä¸ªå—ä¿å­˜å—ä½å›¾<br>    - open å†ç©ºæ–‡ä»¶å¤¹ä¸‹åˆ›å»ºæ–‡ä»¶: do_sys_openâ†’...â†’lookup_open å†è°ƒç”¨ dir_nodeâ†’i_op_create(ext4_create) åˆ›å»ºæ–‡ä»¶å¤¹ inode<br>        - è°ƒç”¨ ext4_createâ†’...â†’__ext4_new_inode è¯»å– inode ä½å›¾, æ‰¾åˆ°ä¸‹ä¸€ä¸ªç©ºé—² inode<br>        - åŒæ ·ç”¨å—ä½å›¾æ‰¾ç©ºé—²å—<br>- æ–‡ä»¶ç³»ç»Ÿæ ¼å¼<br>    - ä¸€ä¸ªä½å›¾åªèƒ½è¡¨ç¤º 2^15 ä¸ªæ•°æ®å—, å³ 128MB<br>    - ä¸€ä¸ª inode ä½å›¾ + ä¸€ä¸ª block ä½å›¾, ç§°ä¸ºå—ç»„, ç”¨æ•°æ®ç»“æ„ ext4_group_desc è¡¨ç¤º, é‡Œé¢åŒ…å« inode ä½å›¾, block ä½å›¾å’Œ inode åˆ—è¡¨<br>    - è¿™äº›å—ç»„æè¿°ç¬¦æ„æˆåˆ—è¡¨, å¦å¤–ç”¨è¶…çº§å— ext4_super_block æè¿°æ•´ä¸ªæ–‡ä»¶ç³»ç»Ÿ; ç¬¬ä¸€ä¸ªå—ç»„å‰ 1k ç”¨äºå¯åŠ¨å¼•å¯¼<br>    - æ–‡ä»¶ç³»ç»Ÿç”±å¼•å¯¼å— + N ä¸ªå—ç»„ç»„æˆ; æ¯ä¸ªå—ç»„ç”±: è¶…çº§å— + å—ç»„æè¿°ç¬¦è¡¨ + å—ä½å›¾ + inode ä½å›¾ + inode åˆ—è¡¨ + æ•°æ®å—æ„æˆ<br>    - è¶…çº§å—å’Œå—ç»„æè¿°ç¬¦è¡¨éƒ½æ˜¯å…¨å±€ä¿¡æ¯; é»˜è®¤è¶…çº§å—å’Œå—ç»„æè¿°ç¬¦è¡¨å†ç­ä¸ªç§Ÿå®¢éƒ½æœ‰å¤‡ä»½; è‹¥å¼€å¯ sparse_super, åˆ™åªåœ¨å›ºå®šå—ç»„ä¸­å¤‡ä»½<br>    - é‡‡ç”¨ Meta Block Groups ç‰¹æ€§, é¿å…å—ç»„è¡¨æµªè´¹ç©ºé—´, æˆ–é™åˆ¶æ–‡ä»¶ç³»ç»Ÿçš„å¤§å°<br>        - å°†å—ç»„åˆ†æˆå¤šä¸ªç»„(å…ƒå—ç»„) å—ç»„æè¿°ç¬¦è¡¨åªä¿å­˜å½“å‰å…ƒå—ç»„ä¸­å—ç»„çš„ä¿¡æ¯, å¹¶åœ¨å…ƒå—ç»„å†…å¤‡ä»½<br>- ç›®å½•å­˜å‚¨æ ¼å¼<br>    - ç›®å½•ä¹Ÿæ˜¯æ–‡ä»¶, ä¹Ÿæœ‰ inode, inode æŒ‡å‘ä¸€ä¸ªå—, å—ä¸­ä¿å­˜å„ä¸ªæ–‡ä»¶ä¿¡æ¯, ext4_dir_entry åŒ…æ‹¬æ–‡ä»¶åå’Œ inode, é»˜è®¤æŒ‰åˆ—è¡¨å­˜<br>    - ç¬¬ä¸€é¡¹ &quot;.&quot; å½“å‰ç›®å½•; ç¬¬äºŒé¡¹ &quot;..&quot; ä¸Šä¸€çº§ç›®å½•<br>    - å¯æ·»åŠ ç´¢å¼•, åŠ å¿«æ–‡ä»¶æŸ¥æ‰¾<br>        - éœ€è¦æ”¹å˜ç›®å½•å—æ ¼å¼, åŠ å…¥ç´¢å¼•æ ‘: ç”¨ç´¢å¼•é¡¹ dx_entry ä¿å­˜æ–‡ä»¶åå“ˆå¸Œå’Œå—çš„æ˜ å°„, è‹¥è¯¥å—ä¸æ˜¯ç´¢å¼•, åˆ™é‡Œé¢ä¿å­˜ ext4_dir_enry åˆ—è¡¨, é€é¡¹æŸ¥æ‰¾<br>- è½¯è¿æ¥&#47;ç¡¬é“¾æ¥çš„å­˜å‚¨<br>    - é“¾æ¥å³æ–‡ä»¶çš„åˆ«å: ln -s åˆ›å»ºè½¯é“¾æ¥; ln åˆ›å»ºç¡¬é“¾æ¥<br>    - ç¡¬é“¾æ¥ä¸åŸå§‹æ–‡ä»¶å…±ç”¨ä¸€ä¸ª inode, ä½†ä¸èƒ½è·¨æ–‡ä»¶ç³»ç»Ÿ<br>    - è½¯é“¾æ¥æ˜¯ä¸€ä¸ªæ–‡ä»¶, æœ‰è‡ªå·±çš„ inode, è¯¥æ–‡ä»¶å†…å®¹æŒ‡å‘å¦ä¸€ä¸ªæ–‡ä»¶, å¯è·¨æ–‡ä»¶ç³»ç»Ÿ","like_count":54,"discussions":[{"author":{"id":1398824,"avatar":"https://static001.geekbang.org/account/avatar/00/15/58/28/c86340ca.jpg","nickname":"è¾¾æ–‡è¥¿","note":"","ucode":"01C1063F23D634","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":332709,"discussion_content":"è¯¾ä»£è¡¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607321516,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1203563,"avatar":"https://static001.geekbang.org/account/avatar/00/12/5d/6b/3d42593f.jpg","nickname":"èªå°‘","note":"","ucode":"AB8301B752AC30","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":304156,"discussion_content":"ç§€å„¿ï¼Œç›´æ¥çœ‹æ‚¨è¿™æ€»ç»“çš„å³å¯äº†\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599482973,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":102116,"user_name":"äºŒä¸‰å­ä¹Ÿ","can_delete":false,"product_type":"c1","uid":1245787,"ip_address":"","ucode":"69C7D86583277D","user_header":"https://static001.geekbang.org/account/avatar/00/13/02/5b/ce326cfc.jpg","comment_is_top":false,"comment_ctime":1560139672,"is_pvip":false,"replies":[{"id":"36999","content":"èµ","user_name":"ä½œè€…å›å¤","comment_id":102116,"uid":"1001590","ip_address":"","utype":1,"ctime":1560241068,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":3,"race_medal":0,"score":"134704125848","product_id":100024701,"comment_content":"&gt;&gt;æ¯ä¸ª extent æœ€å¤§èƒ½è¡¨ç¤º 128MB çš„æ•°æ®ã€‚<br>ç–‘é—®ï¼šee_lenå¤§å°ä¸º16bitï¼Œæœ€å¤§èƒ½è¡¨ç¤º2^16 - 1,å¦‚æœå—å¤§å°ä¸º4Kï¼Œåˆ™ä¸€ä¸ªextentèƒ½è¡¨ç¤º256MB<br>è§£æƒ‘ï¼šee_lenä¸ºä¸€ä¸ª16bitçš„æ— ç¬¦å·æ•´æ•°ï¼Œä½†æ˜¯å…¶æœ€é«˜ä½åœ¨é¢„åˆ†é…ç‰¹æ€§ä¸­ç”¨æ¥æ ‡è¯†è¿™ä¸ªextentæ˜¯å¦è¢«åˆå§‹åŒ–è¿‡äº†ï¼Œæ‰€æœ‰ee_lenä¸­å¯ç”¨çš„ä½ä¸º15bitï¼Œæœ€å¤§å¯è¡¨ç¤º2^15ä¸ªè¿ç»­çš„å—ï¼Œå¦‚æœå—å¤§å°ä¸º4Kï¼Œåˆ™ä¸€ä¸ªextentæœ€å¤§èƒ½è¡¨ç¤º128MB","like_count":31,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":453268,"discussion_content":"èµ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560241068,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2035956,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/ecruTrMgzvqIs5iaWVibZw4Rxic42ZXGTflvOFHiaZEkf32Su01gDCWT8tdIcEoybg0ibAYU2Q8f9bleL7Q37fKguxQ/132","nickname":"åšä¸€ä¸ªç§¯æçš„è·³èš¤","note":"","ucode":"BBE367BBCB6C28","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":297941,"discussion_content":"æˆ‘çœ‹ä¸¤éæ•™ç¨‹ ï¼Œä¹Ÿæ²¡æ‰¾åˆ°è€å¸ˆçš„æ•™ç¨‹ï¼Œè¿˜æ˜¯ä½ è§£ç­”äº†æˆ‘çš„ç–‘æƒ‘ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1597115126,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1500498,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e5/52/35bc9c07.jpg","nickname":"Musisan","note":"","ucode":"A9A9FE56AABEBA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2035956,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/ecruTrMgzvqIs5iaWVibZw4Rxic42ZXGTflvOFHiaZEkf32Su01gDCWT8tdIcEoybg0ibAYU2Q8f9bleL7Q37fKguxQ/132","nickname":"åšä¸€ä¸ªç§¯æçš„è·³èš¤","note":"","ucode":"BBE367BBCB6C28","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":304730,"discussion_content":"å®˜æ–¹æ–‡æ¡£æœ‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599649045,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":297941,"ip_address":""},"score":304730,"extra":""}]}]},{"had_liked":false,"id":133678,"user_name":"å•¦å•¦å•¦","can_delete":false,"product_type":"c1","uid":1131687,"ip_address":"","ucode":"6B12EC90A62525","user_header":"https://static001.geekbang.org/account/avatar/00/11/44/a7/171c1e86.jpg","comment_is_top":false,"comment_ctime":1568633888,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"104647848992","product_id":100024701,"comment_content":"åˆ«äººçš„è¯¾ç¨‹æ˜¯ä¸€å¤©èƒ½çœ‹å¥½å‡ èŠ‚è¯¾ï¼Œåˆ˜è€å¸ˆçš„è¯¾æ˜¯å¥½å‡ å¤©çœ‹ä¸€ç¯‡ï¼Œå“ˆå“ˆ","like_count":24,"discussions":[{"author":{"id":2035956,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/ecruTrMgzvqIs5iaWVibZw4Rxic42ZXGTflvOFHiaZEkf32Su01gDCWT8tdIcEoybg0ibAYU2Q8f9bleL7Q37fKguxQ/132","nickname":"åšä¸€ä¸ªç§¯æçš„è·³èš¤","note":"","ucode":"BBE367BBCB6C28","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":297942,"discussion_content":"æˆ‘è§‰å¾—æ˜¯å› ä¸ºä»–å¾ˆå¤šåœ°æ–¹åªæ˜¯æäº†ä¸€ä¸‹ï¼Œç„¶åè¦è‡ªå·±å»æ€»ç»“ã€‚æœ¬æ¥ä¹Ÿå°±æ˜¯å°±æ˜¯å—é’±çš„è¯¾ç¨‹ï¼Œä¸å¿…è¦æ±‚ç»™ä½ è®²çš„å¾ˆæ¸…æ¥šï¼Œå†è¯´æ“ä½œç³»ç»Ÿå¾ˆå¤šåœ°æ–¹ä¼°è®¡ä»–éƒ½æ²¡ç†è§£åˆ°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597115212,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":181661,"user_name":"ç½—è¾‘æ€ç»´","can_delete":false,"product_type":"c1","uid":1318941,"ip_address":"","ucode":"D257A06EDE928E","user_header":"https://static001.geekbang.org/account/avatar/00/14/20/1d/0c1a184c.jpg","comment_is_top":false,"comment_ctime":1582607953,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"78892019281","product_id":100024701,"comment_content":"[è¯¾åä½œä¸š]<br>æŸ¥çœ‹æ–‡ä»¶inode:stat filename<br>æŸ¥çœ‹ç›®å½•inode:stat dirname<br>æŸ¥çœ‹ç£ç›˜inode:df -i","like_count":18},{"had_liked":false,"id":120880,"user_name":"æ±Ÿå±±æœª","can_delete":false,"product_type":"c1","uid":1090196,"ip_address":"","ucode":"5293DD9482717F","user_header":"https://static001.geekbang.org/account/avatar/00/10/a2/94/ae0a60d8.jpg","comment_is_top":false,"comment_ctime":1565008888,"is_pvip":false,"replies":[{"id":"46358","content":"å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—ï¼Œå“ˆå“ˆå“ˆ","user_name":"ä½œè€…å›å¤","comment_id":120880,"uid":"1001590","ip_address":"","utype":1,"ctime":1566297020,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":2,"race_medal":0,"score":"61694551032","product_id":100024701,"comment_content":"çœ‹å®Œå·²ç»ä¸è®¤è¯†&quot;å—&quot;è¿™ä¸ªå­—äº†","like_count":14,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461513,"discussion_content":"å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—å—ï¼Œå“ˆå“ˆå“ˆ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1566297020,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2769183,"avatar":"","nickname":"Geek_ad1659","note":"","ucode":"00E216AC341A8A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":538463,"discussion_content":"è€å¸ˆä½ å¤ªç‹ äº†ã€‚ã€‚ã€‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639408364,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":113402,"user_name":"å˜‰æœ¨","can_delete":false,"product_type":"c1","uid":1317999,"ip_address":"","ucode":"AF4877693782C0","user_header":"https://static001.geekbang.org/account/avatar/00/14/1c/6f/3ea2a599.jpg","comment_is_top":false,"comment_ctime":1562996003,"is_pvip":false,"replies":[{"id":"46671","content":"å¯¹çš„","user_name":"ä½œè€…å›å¤","comment_id":113402,"uid":"1001590","ip_address":"","utype":1,"ctime":1566378221,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":1,"race_medal":0,"score":"40217701667","product_id":100024701,"comment_content":"æ¯æ¬¡lsçš„æ—¶å€™ï¼Œæ–‡ä»¶å¤¹å¤§å°éƒ½æ˜¾ç¤º4096ï¼ŒåŸæ¥æ˜¯ä¸€ä¸ªå—çš„å¤§å°ï¼Œ4k<br>vim æ–‡ä»¶å¤¹   èƒ½çœ‹åˆ°æ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶åˆ—è¡¨","like_count":9,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458202,"discussion_content":"å¯¹çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566378221,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":100025,"user_name":"W.jyao","can_delete":false,"product_type":"c1","uid":1422582,"ip_address":"","ucode":"C57B3A78B6A795","user_header":"https://static001.geekbang.org/account/avatar/00/15/b4/f6/735673f7.jpg","comment_is_top":false,"comment_ctime":1559395359,"is_pvip":false,"replies":[{"id":"49212","content":"æ˜¯çš„æ˜¯çš„","user_name":"ä½œè€…å›å¤","comment_id":100025,"uid":"1001590","ip_address":"","utype":1,"ctime":1567603471,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":2,"race_medal":0,"score":"23034231839","product_id":100024701,"comment_content":"æ¯ç¯‡æ–‡ç« æœ‰ç‚¹æ”¶è·å°±å¯ä»¥","like_count":5,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":452376,"discussion_content":"æ˜¯çš„æ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567603471,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1514157,"avatar":"https://static001.geekbang.org/account/avatar/00/17/1a/ad/faf1bf19.jpg","nickname":"windcaller","note":"","ucode":"1CA3E849805770","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":1648,"discussion_content":"éšç¼˜å­¦ä¹ ~\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562761298,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":133863,"user_name":"å´å°æ™º","can_delete":false,"product_type":"c1","uid":1310798,"ip_address":"","ucode":"C7C9F58B5C9F7B","user_header":"https://static001.geekbang.org/account/avatar/00/14/00/4e/be2b206b.jpg","comment_is_top":false,"comment_ctime":1568685734,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18748554918","product_id":100024701,"comment_content":"è¿˜æ˜¯ä¸å¤ªç†è§£ ext4 çš„ extends ç‰¹æ€§ï¼Œæ˜¯æ–‡ä»¶çš„æ•°æ®å°±å­˜åœ¨ extends çš„å¶å­ç»“ç‚¹ä¸­å—ï¼Ÿextends æ˜¯å¦‚ä½•æé«˜æ–‡ä»¶è¯»å–æ•ˆç‡çš„ï¼Ÿè¿˜æœ‰è¯·è€å¸ˆå’Œå„ä½åŒä»èµæ•™ã€‚","like_count":4},{"had_liked":false,"id":99879,"user_name":"LeonğŸ“·","can_delete":false,"product_type":"c1","uid":1219496,"ip_address":"","ucode":"B9BBD1EFAAE5A2","user_header":"https://static001.geekbang.org/account/avatar/00/12/9b/a8/6a391c66.jpg","comment_is_top":false,"comment_ctime":1559351503,"is_pvip":false,"replies":[{"id":"49216","content":"è¿™ä¸ªä¸æ˜¯çš„ï¼Œè¿™ä¸ªæ˜¯ç¡¬ç›˜ä¸Šçš„ã€‚","user_name":"ä½œè€…å›å¤","comment_id":99879,"uid":"1001590","ip_address":"","utype":1,"ctime":1567603600,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":1,"race_medal":0,"score":"18739220687","product_id":100024701,"comment_content":"è€å¸ˆï¼ŒExentsçš„å­˜å‚¨ç»“æ„çš„æ ‘æ˜¯çº¢é»‘æ ‘å§","like_count":4,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":452307,"discussion_content":"è¿™ä¸ªä¸æ˜¯çš„ï¼Œè¿™ä¸ªæ˜¯ç¡¬ç›˜ä¸Šçš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567603600,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":152903,"user_name":"ç å†œKevinäº®","can_delete":false,"product_type":"c1","uid":1116630,"ip_address":"","ucode":"D34562461CA0A1","user_header":"https://static001.geekbang.org/account/avatar/00/11/09/d6/5f366427.jpg","comment_is_top":false,"comment_ctime":1574121801,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14459023689","product_id":100024701,"comment_content":"è¯·é—®è€å¸ˆï¼š<br>1, iopsä¸­çš„æ¯æ¬¡ioæ“ä½œæœ€å¤§è¯»å–çš„å­—èŠ‚æ•°ä¸€èˆ¬æ˜¯å¤šå°‘å‘¢ï¼Ÿ<br>2, å¦‚æœä¸€æ®µè¿ç»­å­˜å‚¨çš„æ•°æ®ï¼Œæ˜¯ä¸æ˜¯å°±å¯ä»¥é€šè¿‡ä¸€æ¬¡ioå°±è¯»å®Œå‘¢ï¼Ÿ<br>3, ç”¨æˆ·æ€åˆæ€ä¹ˆä¿è¯ä¿å­˜æ•°æ®æ—¶æ•ˆç‡æ˜¯æœ€é«˜çš„å‘¢ï¼Ÿ","like_count":3},{"had_liked":false,"id":99723,"user_name":"Sharry","can_delete":false,"product_type":"c1","uid":1239293,"ip_address":"","ucode":"045DDB864659F6","user_header":"https://static001.geekbang.org/account/avatar/00/12/e8/fd/035f4c94.jpg","comment_is_top":false,"comment_ctime":1559285464,"is_pvip":false,"replies":[{"id":"49220","content":"æˆ‘å½“æ—¶çœ‹äº†ï¼Œä¹Ÿæ˜¯çµæœºä¸€åŠ¨","user_name":"ä½œè€…å›å¤","comment_id":99723,"uid":"1001590","ip_address":"","utype":1,"ctime":1567604124,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":1,"race_medal":0,"score":"14444187352","product_id":100024701,"comment_content":"å‰å‡ å¤©åˆšåœ¨è™¹æ¡¥å…³æ³¨åˆ°è¿™ä¸ªå•ä½å¯¼èˆªç³»ç»Ÿ, ç»“æœä»Šå¤©å°±åœ¨è¯¾ä¸Šçœ‹åˆ°äº†, æœ‰è¶£æœ‰è¶£!!","like_count":3,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":452238,"discussion_content":"æˆ‘å½“æ—¶çœ‹äº†ï¼Œä¹Ÿæ˜¯çµæœºä¸€åŠ¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567604124,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":337832,"user_name":"æ²³è¥¿","can_delete":false,"product_type":"c1","uid":1014075,"ip_address":"","ucode":"33EF181AF6AA18","user_header":"https://static001.geekbang.org/account/avatar/00/0f/79/3b/effc81b6.jpg","comment_is_top":false,"comment_ctime":1647084119,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"10237018711","product_id":100024701,"comment_content":"çœ‹ä¸¤éä»¥ä¸Šè¿˜è’™çš„æœ‹å‹ï¼Œçœ‹çœ‹è¿™ç¯‡æ–‡ç« å§ã€‚éå¸¸æ¸…æ™°ï¼šhttps:&#47;&#47;www.cnblogs.com&#47;f-ck-need-u&#47;p&#47;7016077.html#auto_id_26","like_count":2},{"had_liked":false,"id":273922,"user_name":"Mark","can_delete":false,"product_type":"c1","uid":2324313,"ip_address":"","ucode":"686DE4235B97DF","user_header":"https://static001.geekbang.org/account/avatar/00/23/77/59/79afb654.jpg","comment_is_top":false,"comment_ctime":1610723975,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10200658567","product_id":100024701,"comment_content":"è€å¸ˆå¯ä»¥è´´ä¸€äº›æ“ä½œç³»ç»Ÿç£ç›˜ç®¡ç†çš„åŸºç¡€æ¦‚å¿µæ–¹ä¾¿ç†è§£ï¼Œæ¯”å¦‚è¿™ä¸ªè®²ç´¢å¼•å­˜å‚¨https:&#47;&#47;blog.csdn.net&#47;liushengxi_root&#47;article&#47;details&#47;80962979<br><br>è¿˜æœ‰è¿™ä¸ªè®²è¶…çº§å—æ¯”è¾ƒæ¸…æ¥šä¸€äº›ï¼Œè¶…çº§å—å°±æ˜¯å¯ç”¨å—é›†ï¼Œå¯ä»¥åˆ†çº§ï¼Œå’Œå†…å­˜ç®¡ç†å¤šçº§é¡µè¡¨ç±»ä¼¼ï¼Œç”¨æ¥åˆ†é…ç©ºé—²å—https:&#47;&#47;blog.csdn.net&#47;dyw_666666&#47;article&#47;details&#47;107251134<br>æˆ‘æ²¡æ‰¾åˆ°åˆé€‚çš„å®Œæ•´æ–‡æ¡£","like_count":2},{"had_liked":false,"id":248415,"user_name":"garlic","can_delete":false,"product_type":"c1","uid":1019579,"ip_address":"","ucode":"FEB147EDB5774E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8e/bb/c039dc11.jpg","comment_is_top":false,"comment_ctime":1600155712,"is_pvip":true,"discussion_count":0,"race_medal":1,"score":"10190090304","product_id":100024701,"comment_content":"é’ˆå¯¹ext2&#47;ext3&#47;ext4ï¼Œ å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹inodeä¿¡æ¯<br>1.  ls -i  æ–‡ä»¶åæˆ–ç›®å½•å<br>2. sudo debugfs -R &quot;stat æ–‡ä»¶åæˆ–ç›®å½•å&quot; &#47;dev&#47;sdb2<br>3. stat æ–‡ä»¶åæˆ–ç›®å½•å","like_count":2},{"had_liked":false,"id":105228,"user_name":"djfhchdh","can_delete":false,"product_type":"c1","uid":1484184,"ip_address":"","ucode":"E71D75328CE398","user_header":"https://static001.geekbang.org/account/avatar/00/16/a5/98/a65ff31a.jpg","comment_is_top":false,"comment_ctime":1560942216,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10150876808","product_id":100024701,"comment_content":"stat - display file or file system status","like_count":2},{"had_liked":false,"id":99992,"user_name":"åˆ˜å¼·","can_delete":false,"product_type":"c1","uid":1035612,"ip_address":"","ucode":"B2E41BB894A727","user_header":"https://static001.geekbang.org/account/avatar/00/0f/cd/5c/e09eac13.jpg","comment_is_top":false,"comment_ctime":1559381455,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10149316047","product_id":100024701,"comment_content":"ä¸ºäº†è®©äººèƒ½å¤Ÿä¿æŒåƒé¥­ã€ç¡è§‰ã€æ€è€ƒã€åŠ³åŠ¨è¿™ä¸ªç®€å•çš„æŠ½è±¡ï¼Œéœ€è¦å¦‚æ­¤å¤æ‚çš„äººä½“ç»„ç»‡ç»“æ„æ¥æ”¯æ’‘ã€‚","like_count":2},{"had_liked":false,"id":99632,"user_name":"Mr.å·®ä¸å¤š","can_delete":false,"product_type":"c1","uid":1437292,"ip_address":"","ucode":"946555FCAE710B","user_header":"https://static001.geekbang.org/account/avatar/00/15/ee/6c/246fa0d1.jpg","comment_is_top":false,"comment_ctime":1559270731,"is_pvip":false,"replies":[{"id":"49223","content":"åˆ›å»ºçš„é¡ºåºä¹Ÿä¸ä¸€æ ·å‘€ã€‚lsæ²¡æœ‰è®¿é—®æ–‡ä»¶çš„Inodeï¼Œä»…ä»…è®¿é—®äº†æ–‡ä»¶å¤¹çš„å†…å®¹","user_name":"ä½œè€…å›å¤","comment_id":99632,"uid":"1001590","ip_address":"","utype":1,"ctime":1567604248,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":2,"race_medal":0,"score":"10149205323","product_id":100024701,"comment_content":"è€å¸ˆï¼Œæ‚¨å¥½ã€‚ç›¸åŒçš„æ–‡ä»¶å¤¹åœ¨ä¸åŒLinuxæœºå™¨ä¸Šç”¨ls -Uå¾—åˆ°çš„é¡ºåºä¹Ÿä¸ä¸€æ ·ã€‚è¿™æ˜¯ä»€ä¹ˆåŸå› å‘¢ï¼Ÿæ–‡ä»¶ç³»ç»Ÿå¦‚ä½•ç¡®å®šæ–‡ä»¶å¤¹ä¸­ä¸åŒæ–‡ä»¶iNodeçš„å­˜å‚¨é¡ºåºçš„ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":452197,"discussion_content":"åˆ›å»ºçš„é¡ºåºä¹Ÿä¸ä¸€æ ·å‘€ã€‚lsæ²¡æœ‰è®¿é—®æ–‡ä»¶çš„Inodeï¼Œä»…ä»…è®¿é—®äº†æ–‡ä»¶å¤¹çš„å†…å®¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567604248,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2961073,"avatar":"","nickname":"Geek_62e44e","note":"","ucode":"99A92B4233F53A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":570010,"discussion_content":"ä¸å¯¹äº†ã€‚ls -lä¹Ÿè®¿é—®äº†inode","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651636546,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":267056,"user_name":"è¾¾æ–‡è¥¿","can_delete":false,"product_type":"c1","uid":1398824,"ip_address":"","ucode":"01C1063F23D634","user_header":"https://static001.geekbang.org/account/avatar/00/15/58/28/c86340ca.jpg","comment_is_top":false,"comment_ctime":1607584147,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5902551443","product_id":100024701,"comment_content":"è¿™ä¸€éçœ‹äº†å¥½å‡ å¤©æ€»ç®—çœ‹æ˜ç™½ä¸€ç‚¹äº†ã€‚","like_count":1},{"had_liked":false,"id":148571,"user_name":"darren","can_delete":false,"product_type":"c1","uid":1151837,"ip_address":"","ucode":"4726076845920B","user_header":"https://static001.geekbang.org/account/avatar/00/11/93/5d/91f1d849.jpg","comment_is_top":false,"comment_ctime":1573032241,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5867999537","product_id":100024701,"comment_content":"è€å¸ˆï¼Œæœ‰å‡ ä¸ªç–‘æƒ‘çš„åœ°æ–¹ï¼Œå¸Œæœ›è§£ç­”:1.æ˜¯ä¸æ˜¯æ•´ä¸ªæ–‡ä»¶ç³»ç»Ÿçš„æ ¹ç›®å½•çš„inodeæ˜¯åœ¨ä¸€ä¸ªå›ºå®šçš„åœ°æ–¹ï¼Œæ¯æ¬¡æŸ¥æ‰¾ä¸€ä¸ªç»å¯¹è·¯å¾„æ–‡ä»¶éƒ½æ˜¯ä»æ ¹ç›®å½•å¼€å§‹çš„ã€‚2.æ¯ä¸ªå—ç»„é‡Œé¢çš„inodeæ˜¯å­˜æ”¾åœ¨inodeä½å›¾å—åé¢çš„ä¸€ä¸ªlistã€‚è¿™ä¸ªlisté•¿åº¦æ˜¯å›ºå®šçš„å—ï¼Ÿå› ä¸ºå¦‚æœä¸æ˜¯å›ºå®šçš„ï¼Œé‚£ä¸ªinodeä½å›¾æŸä¸€ä½å¯¹åº”çš„å°±å¯èƒ½æ˜¯æ•°æ®å—ï¼Œè€Œä¸æ˜¯inodeäº†ï¼Œåˆ›å»ºæ–°çš„inodeå°±å¯èƒ½è¦†ç›–æ•°æ®ã€‚å¦‚æœæ˜¯å›ºå®šçš„ï¼Œé‚£ä¹ˆå¦‚æœinodeå°‘çš„æ—¶å€™æ˜¯ä¸æ˜¯å®Œæˆç©ºé—´æµªè´¹ï¼Ÿ3.ä¸€ä¸ªexentsä¸­çš„èŠ‚ç‚¹é¡¹æ˜¯å¦å¯ä»¥æŒ‡å‘å¦ä¸€ä¸ªä¸åŒå…ƒå—ç»„ä¸­çš„èŠ‚ç‚¹4.ç›®å½•é‡Œé¢ä½¿ç”¨ç´¢å¼•çš„æ—¶å€™ï¼Œå¦‚æœä¸åŒçš„inodeå“ˆå¸Œå€¼éƒ½ä¸ä¸€æ ·ï¼Œå²‚ä¸æ˜¯ä¼šç™½ç™½å ç”¨å¾ˆå¤šå—æ¥å­˜å‚¨inodeï¼Œæ¯ä¸ªå—å°±ä¸€ä¸ªinodeåˆ—è¡¨ï¼Œç©ºé—´æµªè´¹æå¤§ï¼Ÿ","like_count":1},{"had_liked":false,"id":116304,"user_name":"è¶…è¶…","can_delete":false,"product_type":"c1","uid":1476077,"ip_address":"","ucode":"D0751F29553481","user_header":"https://static001.geekbang.org/account/avatar/00/16/85/ed/905b052f.jpg","comment_is_top":false,"comment_ctime":1563839339,"is_pvip":false,"replies":[{"id":"46429","content":"èµ","user_name":"ä½œè€…å›å¤","comment_id":116304,"uid":"1001590","ip_address":"","utype":1,"ctime":1566300021,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":1,"race_medal":0,"score":"5858806635","product_id":100024701,"comment_content":"df -i æ–‡ä»¶","like_count":1,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459476,"discussion_content":"èµ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566300021,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":104444,"user_name":"é äººå“å»èµ¢","can_delete":false,"product_type":"c1","uid":1301286,"ip_address":"","ucode":"7A20F9EBE847E1","user_header":"https://static001.geekbang.org/account/avatar/00/13/db/26/54f2c164.jpg","comment_is_top":false,"comment_ctime":1560755934,"is_pvip":false,"replies":[{"id":"49029","content":"æœ‰çš„ï¼Œç¼“å­˜çš„æ—¶å€™å¥½å¼„","user_name":"ä½œè€…å›å¤","comment_id":104444,"uid":"1001590","ip_address":"","utype":1,"ctime":1567581400,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":1,"race_medal":0,"score":"5855723230","product_id":100024701,"comment_content":"å·å·åœ°é—®ä¸€å¥ï¼Œ4Kå¯¹é½æ˜¯ä¸æ˜¯å°±è·Ÿä¸€ä¸ªblocké»˜è®¤å¤§å°æ˜¯4Kæœ‰å…³ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454273,"discussion_content":"æœ‰çš„ï¼Œç¼“å­˜çš„æ—¶å€™å¥½å¼„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567581400,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":360868,"user_name":"zixuan","can_delete":false,"product_type":"c1","uid":1131300,"ip_address":"å¹¿ä¸œ","ucode":"C72920DD05B074","user_header":"https://static001.geekbang.org/account/avatar/00/11/43/24/3f9f7c70.jpg","comment_is_top":false,"comment_ctime":1666925673,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1666925673","product_id":100024701,"comment_content":"ln [å‚æ•°][æºæ–‡ä»¶æˆ–ç›®å½•][ç›®æ ‡æ–‡ä»¶æˆ–ç›®å½•]<br>åé¢2ä¸ªåäº†","like_count":0},{"had_liked":false,"id":353500,"user_name":"æ¶›å­","can_delete":false,"product_type":"c1","uid":2647122,"ip_address":"æµ™æ±Ÿ","ucode":"8B9830B2B3C6FD","user_header":"https://static001.geekbang.org/account/avatar/00/28/64/52/e4536e9c.jpg","comment_is_top":false,"comment_ctime":1659503519,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1659503519","product_id":100024701,"comment_content":"è¿™ä¸€ç« éå¸¸æ£’ï¼","like_count":0},{"had_liked":false,"id":345474,"user_name":"å°é³„é±¼","can_delete":false,"product_type":"c1","uid":1178888,"ip_address":"","ucode":"9C30CAFB41A263","user_header":"https://static001.geekbang.org/account/avatar/00/11/fd/08/c039f840.jpg","comment_is_top":false,"comment_ctime":1652317776,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1652317776","product_id":100024701,"comment_content":"åˆ·ç¬¬ä¸‰éï¼šblockè·Ÿæ‰‡åŒºæ˜¯å­˜å‚¨å±‚é¢çš„æ¦‚å¿µï¼Œæ˜¯ç”¨æ¥ç®¡ç†ç©ºé—´çš„ã€‚inodeæ˜¯æ–‡ä»¶ç®¡ç†çš„æ¦‚å¿µï¼Œç”¨æ¥ç´¢å¼•æ–‡ä»¶çš„ã€‚å› ä¸ºä¸€ä¸ªæ–‡ä»¶å¯èƒ½éœ€è¦å¤šä¸ªblockæ‰èƒ½å®Œå…¨å­˜å‚¨ä¸‹æ¥","like_count":0},{"had_liked":false,"id":334101,"user_name":"å‡‰å‡‰","can_delete":false,"product_type":"c1","uid":1325256,"ip_address":"","ucode":"FCCF976E41EF71","user_header":"https://static001.geekbang.org/account/avatar/00/14/38/c8/972a5024.jpg","comment_is_top":false,"comment_ctime":1644745750,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1644745750","product_id":100024701,"comment_content":"å¦‚æœé‡‡ç”¨â€œä¸€ä¸ªå—çš„ä½å›¾ + ä¸€ç³»åˆ—çš„å—â€ï¼Œå¤–åŠ â€œä¸€ä¸ªå—çš„ inode çš„ä½å›¾ + ä¸€ç³»åˆ—çš„ inode çš„ç»“æ„â€ã€‚è¿™å¥è¯ä¸å¤ªç†è§£å•Šï¼Œ inode ä¸åº”è¯¥æ˜¯è·Ÿæ–‡ä»¶ç»‘å®šä¹ˆï¼Œä¸€ä¸ªæ–‡ä»¶ä¸€ä¸ª inodeï¼Œï¼Œ è¿™é‡Œè¯´ä¸€ä¸ªå—çš„ inode æ˜¯æŒ‡ä»€ä¹ˆï¼Ÿï¼Ÿæ¯ä¸ªå—ä¹Ÿæœ‰ä¸€ä¸ª inode ??","like_count":0},{"had_liked":false,"id":319414,"user_name":"å…¨åŠ›ä»¥èµ´@î­î­î­","can_delete":false,"product_type":"c1","uid":1979876,"ip_address":"","ucode":"4F3D26318DCB19","user_header":"https://static001.geekbang.org/account/avatar/00/1e/35/e4/bb5ddaef.jpg","comment_is_top":false,"comment_ctime":1635784043,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1635784043","product_id":100024701,"comment_content":"ext2&#47;ext3:<br>i_block[0-11]: 12 x 4k = 48k ï¼ˆ&lt; 48kï¼‰<br>i_block[12]: 4k x 4k = 16M (&gt;48k &amp;&amp; &lt; ï¼ˆ16M+48kï¼‰ éœ€è¦ç”¨åˆ°)<br>i_block[13]:4k x 4k x 4k = 64G(&gt;ï¼ˆ16M+48kï¼‰ &amp;&amp; &lt; ï¼ˆ64G+16M+48kï¼‰ ä¸€èˆ¬ä¹Ÿæœ€å¤šç”¨åˆ°è¿™ä¸€çº§)<br>ext4:<br>i_block:4 x 128M = 512M<br>depth = 1: 340 x 128 = 42.5G (ä¸€èˆ¬ä¹Ÿå°±ç”¨åˆ°è¿™é‡Œï¼Œ2ä¸ªheader + 344ä¸ªextent)<br>å¯¹äºå¤§æ–‡ä»¶ï¼š<br>ext2&#47;ext3:æ¯å¤šè¯»4Kï¼Œéœ€è¦ä¸€æ¬¡æˆ–å¤šæ¬¡ç¡¬ç›˜ioï¼Ÿ<br>ext4:æ¯å¤šè¯»128Mï¼Œéœ€è¦ä¸€æ¬¡æˆ–å¤šæ¬¡ç¡¬ç›˜ioï¼Ÿ<br>","like_count":0},{"had_liked":false,"id":313981,"user_name":"WANGYISONG.","can_delete":false,"product_type":"c1","uid":2769042,"ip_address":"","ucode":"35E274F9CFA6ED","user_header":"https://static001.geekbang.org/account/avatar/00/2a/40/92/3fbd9e53.jpg","comment_is_top":false,"comment_ctime":1632789890,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1632789890","product_id":100024701,"comment_content":"ext4å®Œå…¨æ”¾å¼ƒäº†åŸæ¥çš„inodeçš„å¯ä»¥ä¸‰æ¬¡é—´æ¥å¯»å€å—","like_count":0},{"had_liked":false,"id":313704,"user_name":"æ¶¦è±ª","can_delete":false,"product_type":"c1","uid":1125122,"ip_address":"","ucode":"0946575790EFAF","user_header":"https://static001.geekbang.org/account/avatar/00/11/2b/02/7ef138a0.jpg","comment_is_top":false,"comment_ctime":1632624838,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1632624838","product_id":100024701,"comment_content":"é—´æ¥å—SIBæŒ‡å‘çš„æ˜¯è¿ç»­çš„å—å—?","like_count":0},{"had_liked":false,"id":313456,"user_name":"é©¬æŒ¯","can_delete":false,"product_type":"c1","uid":1136329,"ip_address":"","ucode":"94234F533219C1","user_header":"https://static001.geekbang.org/account/avatar/00/11/56/c9/7b3cd3e0.jpg","comment_is_top":false,"comment_ctime":1632449774,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1632449774","product_id":100024701,"comment_content":"å—ç»„æè¿°ç¬¦åœ¨æ¯ä¸ªå—ç»„é‡Œé¢éƒ½æœ‰ä¸€ä¸ªå—","like_count":0},{"had_liked":false,"id":313453,"user_name":"é©¬æŒ¯","can_delete":false,"product_type":"c1","uid":1136329,"ip_address":"","ucode":"94234F533219C1","user_header":"https://static001.geekbang.org/account/avatar/00/11/56/c9/7b3cd3e0.jpg","comment_is_top":false,"comment_ctime":1632449186,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1632449186","product_id":100024701,"comment_content":"æ˜¯ä¸€ä¸ªå—ç»„å¯¹åº”æˆä¸€ä¸ªæ–‡ä»¶å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":307192,"user_name":"skye","can_delete":false,"product_type":"c1","uid":1027840,"ip_address":"","ucode":"C55C9F52C78A00","user_header":"https://static001.geekbang.org/account/avatar/00/0f/af/00/9b49f42b.jpg","comment_is_top":false,"comment_ctime":1628927932,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1628927932","product_id":100024701,"comment_content":"æ–‡ä»¶åå’Œå¯¹åº”çš„å“ˆå¸Œå€¼æ˜¯ä¸€ä¸€å¯¹åº”çš„å—ï¼Ÿå¦‚æœæ˜¯ï¼Œä¸ºå•¥å¯ä»¥æé«˜æŸ¥æ‰¾é€Ÿåº¦ï¼Ÿ","like_count":0},{"had_liked":false,"id":301008,"user_name":"é™ˆå­æ¾","can_delete":false,"product_type":"c1","uid":1332101,"ip_address":"","ucode":"DE535607AEEF61","user_header":"https://static001.geekbang.org/account/avatar/00/14/53/85/845d73b9.jpg","comment_is_top":false,"comment_ctime":1625483018,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1625483018","product_id":100024701,"comment_content":"æœ€æ–°çš„å†…æ ¸ä»£ç ï¼Œopenç³»ç»Ÿè°ƒç”¨é‡Œä½¿ç”¨çš„æ¥å£éƒ½å·²ç»å’Œä½ ç»™çš„ç¤ºä¾‹ä»£ç ä¸ä¸€æ ·äº†","like_count":0},{"had_liked":false,"id":301002,"user_name":"é™ˆå­æ¾","can_delete":false,"product_type":"c1","uid":1332101,"ip_address":"","ucode":"DE535607AEEF61","user_header":"https://static001.geekbang.org/account/avatar/00/14/53/85/845d73b9.jpg","comment_is_top":false,"comment_ctime":1625481237,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1625481237","product_id":100024701,"comment_content":"è€å¸ˆï¼Œå°±ç®—ç¤ºä¾‹ä»£ç å†ç®€å•ï¼Œä¹Ÿåº”è¯¥ç»™å‡ºä½¿ç”¨çš„æ˜¯å†…æ ¸å“ªä¸ªç‰ˆæœ¬çš„ä»£ç ","like_count":0,"discussions":[{"author":{"id":1180460,"avatar":"https://static001.geekbang.org/account/avatar/00/12/03/2c/33ba4d12.jpg","nickname":"å±±ä¸­æ— è€è™ ğŸ˜ª","note":"","ucode":"594247C3A976DE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":382318,"discussion_content":"ä½ å‰é¢çš„è¯¾ç¨‹æ˜¯ä¸æ˜¯æ²¡çœ‹ï¼Œå‰é¢æœ‰è¯´è¿‡åŸºäº4.13.16","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625531132,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":297849,"user_name":"ç¨‹åºå‘˜è€ç‹","can_delete":false,"product_type":"c1","uid":1025340,"ip_address":"","ucode":"28577A15F064CF","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a5/3c/7c0d2e57.jpg","comment_is_top":false,"comment_ctime":1623811927,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1623811927","product_id":100024701,"comment_content":"stat","like_count":0},{"had_liked":false,"id":291359,"user_name":"æ‡’çŒ«","can_delete":false,"product_type":"c1","uid":2538092,"ip_address":"","ucode":"094F30C802C0F6","user_header":"","comment_is_top":false,"comment_ctime":1620226144,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1620226144","product_id":100024701,"comment_content":"è€å¸ˆï¼Œè¶…çº§å—ä¸­ä¿å­˜çš„æ˜¯æ•´ä¸ªæ–‡ä»¶ç³»ç»Ÿçš„æè¿°ä¿¡æ¯ï¼Œé‚£ä¹ˆè¶…çº§å—æ›´æ–°çš„æ—¶å€™ï¼Œæ˜¯ä¸æ˜¯æ‰€æœ‰å—ç»„ä¸­çš„è¶…çº§å—éƒ½è¦ä¸€èµ·æ›´æ–°ï¼Ÿ","like_count":0},{"had_liked":false,"id":274987,"user_name":"åƒé¥­ç¡è§‰æ‰“é…±æ²¹","can_delete":false,"product_type":"c1","uid":1071668,"ip_address":"","ucode":"95EC98C2B5045B","user_header":"https://static001.geekbang.org/account/avatar/00/10/5a/34/4cbadca6.jpg","comment_is_top":false,"comment_ctime":1611242654,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1611242654","product_id":100024701,"comment_content":"è€å¸ˆï¼Œé“¾æ¥è¿™ç§æ–‡ä»¶ï¼Œå¦‚æœæ˜¯å¼•ç”¨äº†ä¸€ä¸ªinodeï¼Œé‚£ä¹ˆè¿™ä¸ªé“¾æ¥æ–‡ä»¶çš„åç§°ä¿¡æ¯æ˜¯å­˜å‚¨åœ¨å“ªå„¿å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1385204,"avatar":"https://static001.geekbang.org/account/avatar/00/15/22/f4/9fd6f8f0.jpg","nickname":"æ ¸æ¡ƒ","note":"","ucode":"7AB05270CBCCCB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":371841,"discussion_content":"è¿™ä¸ªæ˜¯çœ‹è½¯ç¡¬é“¾æ¥å§ï¼Œå¦‚æœå…±ç”¨ä¸€å¥—inodeçš„è¯ï¼Œé‚£æ˜¯åœ¨çœŸæ­£çš„æ–‡ä»¶æ‰€åœ¨çš„æ–‡ä»¶ç³»ç»Ÿé‡Œé¢ï¼Œå¦‚æœä¸æ˜¯çš„è¯ï¼Œé‚£ä¹ˆå„è‡ªéƒ½ä¼šæœ‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620014027,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":260574,"user_name":"é™å¿ƒ","can_delete":false,"product_type":"c1","uid":1335457,"ip_address":"","ucode":"EB264FA6519FDA","user_header":"https://static001.geekbang.org/account/avatar/00/14/60/a1/8f003697.jpg","comment_is_top":false,"comment_ctime":1605063809,"is_pvip":true,"discussion_count":0,"race_medal":5,"score":"1605063809","product_id":100024701,"comment_content":"è¯·æ•™è€å¸ˆå…³äºæ–‡ä»¶æ—¶é—´çš„ä¸¤ä¸ªé—®é¢˜ï¼š<br>1ã€æ–‡ä»¶æˆ–ç›®å½•çš„åˆ›å»ºæ—¶é—´ç”¨å“ªä¸ªå­—æ®µè¡¨ç¤ºï¼Ÿæ˜¯ctimeè¿˜æ˜¯mtime?<br>2ã€ctimeå’Œmtimeéƒ½æ˜¯æ”¹å˜æ–‡ä»¶ï¼Œé‚£ä¸¤ä¸ªæ—¶é—´æœ‰ä»€ä¹ˆåŒºåˆ«å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":237444,"user_name":"stackWarn","can_delete":false,"product_type":"c1","uid":1002005,"ip_address":"","ucode":"89672E452DEBA5","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4a/15/106eaaa8.jpg","comment_is_top":false,"comment_ctime":1595832767,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1595832767","product_id":100024701,"comment_content":"ä¸ºå•¥ç³»ç»Ÿå—å¤§å°æ˜¯4096ä½†æ˜¯statå‡ºæ¥çš„blocksæŒ‰ç…§512bç®—å‘¢ï¼Œæ˜¾ç¤º8ä¸ªblocksï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1500498,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e5/52/35bc9c07.jpg","nickname":"Musisan","note":"","ucode":"A9A9FE56AABEBA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":304694,"discussion_content":"512å­—èŠ‚é‚£ä¸ªæ˜¯æ‰‡åŒºçš„å¤§å°ï¼Œ4096æ˜¯æ–‡ä»¶ç³»ç»Ÿçš„ä¸€ä¸ªå­˜å‚¨å—çš„å¤§å°ï¼Œä¸€ä¸ªå—=8*æ‰‡åŒº","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599644223,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":237391,"user_name":"ming","can_delete":false,"product_type":"c1","uid":2084718,"ip_address":"","ucode":"FF2C74CBA5E7BC","user_header":"https://static001.geekbang.org/account/avatar/00/1f/cf/6e/366a8247.jpg","comment_is_top":false,"comment_ctime":1595816611,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1595816611","product_id":100024701,"comment_content":"ä¸ºä»€ä¹ˆæ¯ä¸ªextentæ˜¯128MBå‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1500498,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e5/52/35bc9c07.jpg","nickname":"Musisan","note":"","ucode":"A9A9FE56AABEBA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":304695,"discussion_content":"ä¸Šé¢ä¸æ˜¯æœ‰äººè¯´äº†å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599644252,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":235359,"user_name":"Geek_29c23f","can_delete":false,"product_type":"c1","uid":2062612,"ip_address":"","ucode":"921FD498B55D50","user_header":"https://static001.geekbang.org/account/avatar/00/1f/79/14/dc3e49d1.jpg","comment_is_top":false,"comment_ctime":1594981973,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1594981973","product_id":100024701,"comment_content":"è¶…æ€»ï¼Œè¯·æ•™ä¸ªç¡¬é“¾æ¥çš„é—®é¢˜ï¼Œä¸€ä¸ªinodeå¯¹åº”ä¸€ä¸ªæ–‡ä»¶ï¼Œä¸€ä¸ªæ–‡ä»¶ç¡¬é“¾æ¥å‡ºå¦å¤–ä¸€ä¸ªæ–‡ä»¶ã€‚å½“åˆ é™¤ä¸€ä¸ªæ–‡ä»¶çš„æ—¶å€™ï¼Œinode è¿˜æœ‰æ•ˆï¼Ÿé‚£inodeä»€ä¹ˆæ—¶å€™æ— æ•ˆï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1500498,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e5/52/35bc9c07.jpg","nickname":"Musisan","note":"","ucode":"A9A9FE56AABEBA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":304696,"discussion_content":"æœ‰æ•ˆï¼Œé™¤éè¿™ä¸ªinodeæ²¡æœ‰å¯¹åº”ä»»ä½•æ–‡ä»¶æ‰ä¼šè¢«ç³»ç»Ÿæ¸…ç†æ‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599644303,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":225629,"user_name":"å…«å°ä¸Š","can_delete":false,"product_type":"c1","uid":1391143,"ip_address":"","ucode":"FB3D74B522C720","user_header":"https://static001.geekbang.org/account/avatar/00/15/3a/27/5d218272.jpg","comment_is_top":false,"comment_ctime":1591801822,"is_pvip":false,"replies":[{"id":"83469","content":"dentryä¸æ­¢è¡¨ç¤ºç›®å½•é¡¹ï¼Œåé¢è®²å†…å­˜ä¸­ç»“æ„çš„æ—¶å€™ä¼šè®²","user_name":"ä½œè€…å›å¤","comment_id":225629,"uid":"1001590","ip_address":"","utype":1,"ctime":1592186272,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":1,"race_medal":0,"score":"1591801822","product_id":100024701,"comment_content":"ç›®å½•æ–‡ä»¶å’Œåè¾¹è®²çš„ç›®å½•é¡¹ï¼ˆdentryï¼‰çš„å…³ç³»æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ<br>æˆ‘ç†è§£ç›®å½•æ–‡ä»¶é‡Œè¾¹çš„å†…å®¹å°±æ˜¯ ç›®å½•é¡¹åˆ—è¡¨ï¼ˆå³ç›®å½•æ–‡ä»¶ä¸‹è¾¹çš„æ¯ä¸€ä¸ªæ™®é€šæ–‡ä»¶å’Œç›®å½•æ–‡ä»¶çš„ç›®å½•é¡¹é›†åˆï¼‰","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497920,"discussion_content":"dentryä¸æ­¢è¡¨ç¤ºç›®å½•é¡¹ï¼Œåé¢è®²å†…å­˜ä¸­ç»“æ„çš„æ—¶å€™ä¼šè®²","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592186272,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":195187,"user_name":"æ˜¯Codingå°‘å¥³å•Š","can_delete":false,"product_type":"c1","uid":1915322,"ip_address":"","ucode":"BFBDCE002D0E86","user_header":"https://static001.geekbang.org/account/avatar/00/1d/39/ba/631a128a.jpg","comment_is_top":false,"comment_ctime":1585145290,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"1585145290","product_id":100024701,"comment_content":"è¯·æ•™è€å¸ˆè¯¾ç¨‹ä¸­æåˆ°çš„340é¡¹æ˜¯å¦‚ä½•è®¡ç®—å‡ºæ¥çš„ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1145624,"avatar":"https://static001.geekbang.org/account/avatar/00/11/7b/18/6e44e6e0.jpg","nickname":"æºæ’’ä¹‹å‰‘","note":"","ucode":"18F55D253647E6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":221228,"discussion_content":"(4096-12) / 12 = 340 \nã€ä¸€å—4096å­—èŠ‚ã€‘\nã€ext4_extend_header 12å­—èŠ‚ã€‘\nã€ext4_extendæˆ–è€…ext4_extend_idx 12å­—èŠ‚ã€‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585991817,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1915322,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/39/ba/631a128a.jpg","nickname":"æ˜¯Codingå°‘å¥³å•Š","note":"","ucode":"BFBDCE002D0E86","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1145624,"avatar":"https://static001.geekbang.org/account/avatar/00/11/7b/18/6e44e6e0.jpg","nickname":"æºæ’’ä¹‹å‰‘","note":"","ucode":"18F55D253647E6","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":221999,"discussion_content":"è°¢è°¢ä½ å‘€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586092402,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":221228,"ip_address":""},"score":221999,"extra":""},{"author":{"id":1500498,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e5/52/35bc9c07.jpg","nickname":"Musisan","note":"","ucode":"A9A9FE56AABEBA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1145624,"avatar":"https://static001.geekbang.org/account/avatar/00/11/7b/18/6e44e6e0.jpg","nickname":"æºæ’’ä¹‹å‰‘","note":"","ucode":"18F55D253647E6","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":304698,"discussion_content":"è¿™æ˜¯çº¦ç­‰äºï¼Œä¸æ˜¯å…¨ç­‰","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1599644371,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":221228,"ip_address":""},"score":304698,"extra":""}]}]},{"had_liked":false,"id":189993,"user_name":"Summer","can_delete":false,"product_type":"c1","uid":1793589,"ip_address":"","ucode":"DA2683248EA698","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epxppZUun6eqVDbbuyIzSZibcydqnDkdZ96NBDmNYHun484FUcdj3vdaJmuxia9wqEChMRkhj8IpfaA/132","comment_is_top":false,"comment_ctime":1584589926,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"1584589926","product_id":100024701,"comment_content":"é™¤äº†æ ¹èŠ‚ç‚¹ï¼Œå…¶ä»–çš„èŠ‚ç‚¹éƒ½ä¿å­˜åœ¨ä¸€ä¸ªå— 4k é‡Œé¢ï¼Œ4k æ‰£é™¤ ext4_extent_header çš„ 12 ä¸ª byteï¼Œå‰©ä¸‹çš„èƒ½å¤Ÿæ”¾ 340 é¡¹ï¼Œ<br><br>è¿™ä¸ª340æ˜¯å¦‚ä½•è®¡ç®—å‡ºæ¥çš„ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":2769042,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/40/92/3fbd9e53.jpg","nickname":"WANGYISONG.","note":"","ucode":"35E274F9CFA6ED","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":403536,"discussion_content":"ä¸‹å–æ•´","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634102764,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1510683,"avatar":"https://static001.geekbang.org/account/avatar/00/17/0d/1b/854f3e8b.jpg","nickname":"KOBE","note":"","ucode":"A7E172ACD5778E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":318869,"discussion_content":"ï¼ˆ4*1024-12  ï¼‰/12","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603870197,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1655940,"avatar":"https://static001.geekbang.org/account/avatar/00/19/44/84/4da14994.jpg","nickname":"å‘†ç“œ","note":"","ucode":"C98C7B224D0640","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":305654,"discussion_content":"(4KB * 1024 - 12 )/12 = 340","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600047940,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":180944,"user_name":"æä¿Šå›","can_delete":false,"product_type":"c1","uid":1251408,"ip_address":"","ucode":"C2CDBBB97315E1","user_header":"https://static001.geekbang.org/account/avatar/00/13/18/50/066aa4f8.jpg","comment_is_top":false,"comment_ctime":1582447370,"is_pvip":false,"replies":[{"id":"70208","content":"æä¿Šå›åŒå­¦ä½ å¥½ï¼Œè·Ÿè¶…å“¥ç¡®è®¤äº†ä¸‹ï¼Œè¿™ä¸ªå°±æ˜¯Exentså“ˆï¼Œä½ å†çœ‹ä¸‹ï½","user_name":"ç¼–è¾‘å›å¤","comment_id":180944,"uid":"1058895","ip_address":"","utype":2,"ctime":1582447454,"user_name_real":"ç‹é”¦"}],"discussion_count":2,"race_medal":0,"score":"1582447370","product_id":100024701,"comment_content":"Exents æ‹¼å†™é”™é‡Œå—ï¼Ÿ æ˜¯ä¸æ˜¯è¯¥ä¸º Extends ","like_count":0,"discussions":[{"author":{"id":1058895,"avatar":"https://static001.geekbang.org/account/avatar/00/10/28/4f/48e48553.jpg","nickname":"@é˜¿é”¦å•Š","note":"","ucode":"3C5F00333D7174","race_medal":0,"user_type":4,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484857,"discussion_content":"æä¿Šå›åŒå­¦ä½ å¥½ï¼Œè·Ÿè¶…å“¥ç¡®è®¤äº†ä¸‹ï¼Œè¿™ä¸ªå°±æ˜¯Exentså“ˆï¼Œä½ å†çœ‹ä¸‹ï½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582447454,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":4}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1500498,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e5/52/35bc9c07.jpg","nickname":"Musisan","note":"","ucode":"A9A9FE56AABEBA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":304700,"discussion_content":"è¿™ä¸ªç¼–è¾‘æ˜¯æç¬‘çš„ä¹ˆï¼Œå»çœ‹çœ‹kernelå®˜ç½‘ï¼Œæ˜¯extentsï¼ŒçœŸæ˜¯æœäº†ï¼Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599644431,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":174758,"user_name":"ç¨‹åºæ°´æœå®","can_delete":false,"product_type":"c1","uid":1371633,"ip_address":"","ucode":"1700DDFE073A56","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqyicZYyW7ahaXgXUD8ZAS8x0t8jx5rYLhwbUCJiawRepKIZfsLdkxdQ9XQMo99c1UDibmNVfFnAqwPg/132","comment_is_top":false,"comment_ctime":1580372927,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1580372927","product_id":100024701,"comment_content":"é™¤äº†æ ¹èŠ‚ç‚¹ï¼Œå…¶ä»–çš„èŠ‚ç‚¹éƒ½ä¿å­˜åœ¨ä¸€ä¸ªå— 4k é‡Œé¢ï¼Œ4k æ‰£é™¤ ext4_extent_header çš„ 12 ä¸ª byteï¼Œå‰©ä¸‹çš„èƒ½å¤Ÿæ”¾ 340 é¡¹ã€‚æ±‚å¤§ä½¬æŒ‡æ•™è¿™340æ˜¯æ€ä¹ˆç®—å‡ºæ¥çš„ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1655940,"avatar":"https://static001.geekbang.org/account/avatar/00/19/44/84/4da14994.jpg","nickname":"å‘†ç“œ","note":"","ucode":"C98C7B224D0640","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":305655,"discussion_content":"(4KB * 1024 - 12 )/12 = 340","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600047963,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1683400,"avatar":"https://static001.geekbang.org/account/avatar/00/19/af/c8/2a6316cd.jpg","nickname":"K.I.S.S","note":"","ucode":"AF185288E89A58","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":202109,"discussion_content":"4K= 4096Byte, 4096/12 - 1 = 340, header, idx, extentéƒ½æ˜¯12byte","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583860456,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":166746,"user_name":"Hector","can_delete":false,"product_type":"c1","uid":1496889,"ip_address":"","ucode":"110CAF87ADDC01","user_header":"https://static001.geekbang.org/account/avatar/00/16/d7/39/6698b6a9.jpg","comment_is_top":false,"comment_ctime":1577585377,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1577585377","product_id":100024701,"comment_content":"gitçš„åº•å±‚æ–‡ä»¶è®¾è®¡ï¼Œæ˜¯ä¸æ˜¯ä¹Ÿå€Ÿé‰´äº†ex4çš„inodeå’Œå—","like_count":0},{"had_liked":false,"id":166534,"user_name":"Paul Shan","can_delete":false,"product_type":"c1","uid":1593140,"ip_address":"","ucode":"32D99989028284","user_header":"","comment_is_top":false,"comment_ctime":1577487658,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1577487658","product_id":100024701,"comment_content":"è¯·é—®è€å¸ˆï¼Œæ–‡ä»¶ç³»ç»Ÿçš„æ ¼å¼é‚£ä¸€éƒ¨åˆ†é…å›¾ä¸­å…³äºMeta Block Groupï¼š<br>Block Group 2 æ²¡æœ‰å—ä½å›¾<br>Block Group 63æ²¡æœ‰è¶…çº§å—ï¼Œæ˜¯å¦åˆ»æ„è¿™æ ·ï¼Œå¤šè°¢ï¼<br>","like_count":0},{"had_liked":false,"id":161960,"user_name":"Doubleuhy","can_delete":false,"product_type":"c1","uid":1259681,"ip_address":"","ucode":"33004DBF105277","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/66KHl74Hghp6pb2FLKoLbhmz2hnA9iasxxJl0uN88RBicI06y8Fkiatuu6YFEwFuR94ia02dmmDqYnnfugka32EyCQ/132","comment_is_top":false,"comment_ctime":1576415313,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1576415313","product_id":100024701,"comment_content":"æŸ¥çœ‹äº†inodeç»“æ„  é‡Œé¢æ²¡æœ‰æ–‡ä»¶åå­—å­—æ®µå“‡","like_count":0,"discussions":[{"author":{"id":1500498,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e5/52/35bc9c07.jpg","nickname":"Musisan","note":"","ucode":"A9A9FE56AABEBA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":304701,"discussion_content":"æ–‡ä»¶åæ˜¯å¯å˜åŒ–çš„ï¼Œinodeä¸ºäº†æŠ½è±¡å±‚çš„è®¾è®¡ï¼Œé‡Œé¢æ²¡æœ‰æ–‡ä»¶å","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599644482,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":151936,"user_name":"extraterrestrialï¼ï¼","can_delete":false,"product_type":"c1","uid":1017987,"ip_address":"","ucode":"74AE07CA68F6B6","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/GDYkD2X7pXSKUSaUFC8u3TBPaakaibnOBV2NYDc2TNfb8Su9icFMwSod6iaQX5iaGU2gT6xkPuhXeWvY8KaVEZAYzg/132","comment_is_top":false,"comment_ctime":1573817917,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"1573817917","product_id":100024701,"comment_content":"ç¡¬é“¾æ¥æ—¢ç„¶inodeæ˜¯ç›¸åŒçš„ï¼Œé‚£ä¹ˆåˆ›å»ºç¡¬é“¾æ¥æ–‡ä»¶ç³»ç»Ÿåšäº†å•¥å·¥ä½œå‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1500498,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e5/52/35bc9c07.jpg","nickname":"Musisan","note":"","ucode":"A9A9FE56AABEBA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":304702,"discussion_content":"ä»…ä»…æ˜¯åœ¨å¯¹åº”çš„ç›®å½•ä¸‹é¢ï¼ŒåŠ äº†ä¸€è¡Œè®°å½•ï¼Œä¹Ÿå°±æ˜¯æ–‡ä»¶åä¸inodeçš„é‚£ä¸€è¡Œï¼Œåªä¸è¿‡inodeæ˜¯ç›¸åŒçš„ï¼Œæ–‡ä»¶åä¸åŒçš„è€Œå·²","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599644537,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":148585,"user_name":"darren","can_delete":false,"product_type":"c1","uid":1151837,"ip_address":"","ucode":"4726076845920B","user_header":"https://static001.geekbang.org/account/avatar/00/11/93/5d/91f1d849.jpg","comment_is_top":false,"comment_ctime":1573033990,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1573033990","product_id":100024701,"comment_content":"è€å¸ˆï¼Œæˆ‘è¿˜æœ‰ä¸ªé—®é¢˜:ä¸ç®¡è½¯é“¾æ¥è¿˜æ˜¯ç¡¬é“¾æ¥ï¼Œå¯¹äºè·¨ç£ç›˜æ˜¯æ€ä¹ˆå­˜å‚¨çš„ï¼Ÿä¼šå­˜å‚¨ç¡¬ç›˜ç›¸å…³ä¿¡æ¯å—ï¼Ÿæ¯”å¦‚æˆ‘çš„æœåŠ¡å™¨æœ‰ä¸‰å—ç¡¬ç›˜1.2.3ï¼Œæ¯å—ç¡¬ç›˜ä¸€ä¸ªåŒºï¼Œç³»ç»Ÿåœ¨ç¡¬ç›˜1é‡Œé¢ã€‚ç°åœ¨æˆ‘æœ‰ä¸€ä¸ªè½¯é“¾æ¥å’Œä¸€ä¸ªç¡¬é“¾æ¥ç”±ç¡¬ç›˜1é‡Œé¢çš„æ–‡ä»¶æŒ‡å‘ç¡¬ç›˜2é‡Œé¢çš„æ–‡ä»¶ã€‚ç°ç”±äºä¸»æ¿ç¡¬ç›˜2çš„æ’æ§½æŸåï¼Œå°†ç¡¬ç›˜3å–ä¸‹ä¸ç”¨äº†ï¼Œå°†ç¡¬ç›˜2ç§»åŠ¨åˆ°åŸç¡¬ç›˜3å¯¹åº”çš„æ’æ§½ä¸Šã€‚åŸæ¥çš„ä¸¤ä¸ªé“¾æ¥è¿˜æœ‰æ•ˆå—ï¼Ÿç³»ç»Ÿæ˜¯æ€ä¹ˆå¤„ç†è¿™ç±»æƒ…å†µçš„ã€‚","like_count":0},{"had_liked":false,"id":142626,"user_name":"è·¯é“æœ‰è´µ","can_delete":false,"product_type":"c1","uid":1073418,"ip_address":"","ucode":"9D9D081D9CAF2A","user_header":"https://static001.geekbang.org/account/avatar/00/10/61/0a/205a0c54.jpg","comment_is_top":false,"comment_ctime":1571418720,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1571418720","product_id":100024701,"comment_content":"ä¸Šçº§ç›®å½•åº”è¯¥æ˜¯2ä¸ªç‚¹å§ï¼Ÿ..","like_count":0},{"had_liked":false,"id":138538,"user_name":"å¤","can_delete":false,"product_type":"c1","uid":1010922,"ip_address":"","ucode":"74E6838226A405","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6c/ea/ce9854a5.jpg","comment_is_top":false,"comment_ctime":1570325746,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1570325746","product_id":100024701,"comment_content":"inodeä¸­å¹¶ä¸åŒ…å«æ–‡ä»¶åã€‚","like_count":0},{"had_liked":false,"id":133573,"user_name":"å´å°æ™º","can_delete":false,"product_type":"c1","uid":1310798,"ip_address":"","ucode":"C7C9F58B5C9F7B","user_header":"https://static001.geekbang.org/account/avatar/00/14/00/4e/be2b206b.jpg","comment_is_top":false,"comment_ctime":1568611651,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1568611651","product_id":100024701,"comment_content":"æœ€è¿‘è¦é¢è¯•ï¼Œæ¥æ¸©ä¹ ä¸€éï¼Œæ”¶è·å¾ˆå¤§ã€‚æå®¢æ—¶é—´çš„ä¸“æ ï¼Œæ»¡æ»¡çœ‹ï¼Œå¤šæ€è€ƒï¼Œéƒ½èƒ½æœ‰é¢å¤–çš„æ”¶è·ã€‚","like_count":0},{"had_liked":false,"id":128633,"user_name":"èµµå›½è¾‰","can_delete":false,"product_type":"c1","uid":1166280,"ip_address":"","ucode":"390196BD3082B8","user_header":"https://static001.geekbang.org/account/avatar/00/11/cb/c8/ff9f3ffb.jpg","comment_is_top":false,"comment_ctime":1566917726,"is_pvip":false,"replies":[{"id":"48760","content":"åœ¨åŒä¸€ä¸ªå—ç»„ä¸­","user_name":"ä½œè€…å›å¤","comment_id":128633,"uid":"1001590","ip_address":"","utype":1,"ctime":1567494579,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":2,"race_medal":0,"score":"1566917726","product_id":100024701,"comment_content":"è€æ˜¯ï¼Œéº»çƒ¦è§£æƒ‘ä¸€ä¸‹ï¼Œä¼šå‡ºç°ä¸€ä¸ªæ–‡ä»¶çš„inodeåœ¨ä¸€ä¸ªå—ç»„ä¸­ï¼Œè€Œå…¶æ•°æ®å—åœ¨å¦ä¸€ä¸ªå—ç»„ä¸­å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465030,"discussion_content":"åœ¨åŒä¸€ä¸ªå—ç»„ä¸­","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567494579,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1609871,"avatar":"https://static001.geekbang.org/account/avatar/00/18/90/8f/9c691a5f.jpg","nickname":"å¥”è·‘çš„ç ä»”","note":"","ucode":"AB3B02B07B8B8C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":7775,"discussion_content":"åŒä¸€ä¸ªæ–‡ä»¶çš„inodeå’Œæ•°æ®å—å¿…é¡»åœ¨åŒä¸€ä¸ªå—ç»„å—ï¼Ÿä¸€ä¸ªå—ç»„èƒ½æœ€å¤§è¡¨ç¤º128Må­—èŠ‚æ•°æ®ï¼Œé‚£å¦‚ä½•å­˜å‚¨å¤§äº128Mçš„æ–‡ä»¶å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567670887,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":105933,"user_name":"HF","can_delete":false,"product_type":"c1","uid":1060150,"ip_address":"","ucode":"EA504931C0B932","user_header":"https://static001.geekbang.org/account/avatar/00/10/2d/36/d3c8d272.jpg","comment_is_top":false,"comment_ctime":1561106138,"is_pvip":false,"replies":[{"id":"48878","content":"æ˜¯çš„","user_name":"ä½œè€…å›å¤","comment_id":105933,"uid":"1001590","ip_address":"","utype":1,"ctime":1567504126,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":1,"race_medal":0,"score":"1561106138","product_id":100024701,"comment_content":"è€å¸ˆï¼Œç³»ç»Ÿå¯åŠ¨æ—¶æ˜¯å…ˆæŒ‚è½½åˆ°å†…å­˜ç­‰ç£ç›˜é©±åŠ¨ç¨‹åºå®Œæˆåï¼Œå†æŠŠæ ¹ç›®å½•æŒ‚è½½åˆ°ç£ç›˜å˜›ï¼Ÿåˆå§‹æŒ‚è½½å¾—ç›®å½•æ˜¯ä»€ä¹ˆæ—¶å€™ç”Ÿæˆçš„ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454877,"discussion_content":"æ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567504126,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":105622,"user_name":"æœ¨ æ˜“","can_delete":false,"product_type":"c1","uid":1033212,"ip_address":"","ucode":"5C3BBB5958A4B5","user_header":"","comment_is_top":false,"comment_ctime":1561043585,"is_pvip":false,"replies":[{"id":"48888","content":"æ˜¯çš„ï¼Œæ²¡æœ‰","user_name":"ä½œè€…å›å¤","comment_id":105622,"uid":"1001590","ip_address":"","utype":1,"ctime":1567504546,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":1,"race_medal":0,"score":"1561043585","product_id":100024701,"comment_content":"è€å¸ˆï¼Œä¹‹å‰çš„æœºæ¢°ç¡¬ç›˜å­˜å‚¨æ¶æ„å’ŒåŸç†ï¼Œè·Ÿç°åœ¨çš„ssdç¡¬ç›˜å­˜å‚¨çš„åŸç†ï¼Œssdç¡¬ç›˜æ²¡æœ‰ç£å¤´ã€ç›˜ç‰‡ã€ç£é“è¿™äº›ç‰©ç†æ¦‚å¿µäº†å§ï¼Œä»–ä»¬ä¹‹å‰çš„æŠ€æœ¯æ¼”è¿›ï¼Œå¯ä»¥è°ˆè°ˆå—","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454743,"discussion_content":"æ˜¯çš„ï¼Œæ²¡æœ‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567504546,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":101448,"user_name":"å°šå¢¨","can_delete":false,"product_type":"c1","uid":1300116,"ip_address":"","ucode":"114EE139168CB9","user_header":"http://thirdwx.qlogo.cn/mmopen/uqaRIfRCAhJ6t1z92XYEzXpqpgpS1veBc5DNGhfRHFsHgE19qHqG0cevcIJRRsjIKxsSEcIPVP1nOkaVKLibb2xFq04A4KMY3/132","comment_is_top":false,"comment_ctime":1559810785,"is_pvip":false,"replies":[{"id":"37030","content":"ç½‘ä¸Šå¾ˆå¤šèµ„æ–™å¯ä»¥æŸ¥ï¼Œæˆ‘ä¹Ÿæ²¡æœ‰ç ”ç©¶è¿‡","user_name":"ä½œè€…å›å¤","comment_id":101448,"uid":"1001590","ip_address":"","utype":1,"ctime":1560255398,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":1,"race_medal":0,"score":"1559810785","product_id":100024701,"comment_content":"è€å¸ˆèƒ½æ‰©å±•ä¸€ä¸‹å†…å®¹ï¼Œå¤§æ¦‚è®²ä¸‹ xfs æ–‡ä»¶ç³»ç»Ÿå—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":452967,"discussion_content":"ç½‘ä¸Šå¾ˆå¤šèµ„æ–™å¯ä»¥æŸ¥ï¼Œæˆ‘ä¹Ÿæ²¡æœ‰ç ”ç©¶è¿‡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560255398,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":100840,"user_name":"å¤œç©ºä¸­æœ€äº®çš„æ˜Ÿ","can_delete":false,"product_type":"c1","uid":1267566,"ip_address":"","ucode":"ADC3E7B6789955","user_header":"https://static001.geekbang.org/account/avatar/00/13/57/6e/b6795c44.jpg","comment_is_top":false,"comment_ctime":1559651337,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1559651337","product_id":100024701,"comment_content":"æœç„¶å¾ˆå¤æ‚ï¼Œæ„Ÿè°¢è€å¸ˆ","like_count":0},{"had_liked":false,"id":100642,"user_name":"Geeker1992","can_delete":false,"product_type":"c1","uid":1003475,"ip_address":"","ucode":"459F3CEB0491A1","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4f/d3/897fc6df.jpg","comment_is_top":false,"comment_ctime":1559609960,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1559609960","product_id":100024701,"comment_content":"stat æ–‡ä»¶å&#47;æ–‡ä»¶å¤¹å<br>æŸ¥çœ‹æ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹çš„ inode ä¿¡æ¯","like_count":0},{"had_liked":false,"id":100376,"user_name":"Ethan Liu","can_delete":false,"product_type":"c1","uid":1070043,"ip_address":"","ucode":"231F944F7CD56A","user_header":"https://static001.geekbang.org/account/avatar/00/10/53/db/858337e3.jpg","comment_is_top":false,"comment_ctime":1559540913,"is_pvip":true,"replies":[{"id":"49200","content":"å¤§å°å’ŒåŸæ¥çš„ä¸ä¸€æ ·äº†ï¼Œçœ‹ä¸€ä¸‹ä¸€ä¸ªextentå ç”¨çš„å­—èŠ‚æ•°","user_name":"ä½œè€…å›å¤","comment_id":100376,"uid":"1001590","ip_address":"","utype":1,"ctime":1567602912,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":2,"race_medal":0,"score":"1559540913","product_id":100024701,"comment_content":"è€å¸ˆï¼Œinodeé‡Œé¢çš„i_blockä¸æ˜¯æœ‰15é¡¹å—ï¼Œä¸ºä»€ä¹ˆè¯´è¶…è¿‡4é¡¹ext4_extentå°±è¦åˆ†è£‚æˆæ ‘å‘¢ï¼Ÿ<br>","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":452524,"discussion_content":"å¤§å°å’ŒåŸæ¥çš„ä¸ä¸€æ ·äº†ï¼Œçœ‹ä¸€ä¸‹ä¸€ä¸ªextentå ç”¨çš„å­—èŠ‚æ•°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567602912,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1317999,"avatar":"https://static001.geekbang.org/account/avatar/00/14/1c/6f/3ea2a599.jpg","nickname":"å˜‰æœ¨","note":"","ucode":"AF4877693782C0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":1849,"discussion_content":"ä¸€ä¸ªi_block32ä½ï¼Œ4å­—èŠ‚ï¼Œä¸€ä¸ªext4_extentå 12å­—èŠ‚ï¼Œi_block[15]åªèƒ½æ”¾15*4/12=5ä¸ªext4_extentï¼Œç¬¬ä¸€ä¸ªæ˜¯å¤´ç»“ç‚¹ï¼Œåé¢4é¡¹æ”¾æ•°æ®èŠ‚ç‚¹ï¼Œè¶…è¿‡4å°±è¦åˆ†è£‚äº†å•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562995513,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":100328,"user_name":"çƒˆæ—¥èé›ª","can_delete":false,"product_type":"c1","uid":1131925,"ip_address":"","ucode":"E462E30FB0AFC0","user_header":"https://static001.geekbang.org/account/avatar/00/11/45/95/968fd89f.jpg","comment_is_top":false,"comment_ctime":1559529449,"is_pvip":false,"replies":[{"id":"49201","content":"åº”è¯¥æ˜¯ioï¼Œå¯èƒ½æ˜¯ç¼–è¾‘å™¨çš„é—®é¢˜","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘","uid":"1001590","ctime":1567602946,"ip_address":"","comment_id":100328,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1559529449","product_id":100024701,"comment_content":"ä»è¿™ä¸ªæ•°æ®ç»“æ„ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œinode é‡Œé¢æœ‰æ–‡ä»¶çš„è¯»å†™...<br>è¿™é‡Œé¢çš„å‡ ä¸ªå­—æ®µ  éƒ½æ˜¯_lo è€Œæ–‡ç« é‡Œå¥½åƒå†™æˆäº† _io ","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":452502,"discussion_content":"åº”è¯¥æ˜¯ioï¼Œå¯èƒ½æ˜¯ç¼–è¾‘å™¨çš„é—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567602946,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":100111,"user_name":"Sharry","can_delete":false,"product_type":"c1","uid":1239293,"ip_address":"","ucode":"045DDB864659F6","user_header":"https://static001.geekbang.org/account/avatar/00/12/e8/fd/035f4c94.jpg","comment_is_top":false,"comment_ctime":1559446586,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1559446586","product_id":100024701,"comment_content":"**æ–‡ä»¶åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­ä½¿ç”¨ inode æ¥æè¿°, æ¯ä¸ª inode ä¸­éƒ½å«æœ‰ä¸€äº›åˆ—çš„æ•°æ®å—**<br>- å¯¹äºæ™®é€šæ–‡ä»¶: æ•°æ®å—ä¸­ä¿å­˜çš„æ˜¯æ–‡ä»¶æ•°æ®<br>- å¯¹äºæ–‡ä»¶å¤¹: æ•°æ®å—ä¸­ä¿å­˜çš„æ˜¯å­æ–‡ä»¶çš„æ–‡ä»¶é¡¹<br>   - ä¸ºäº†åŠ å¿«æ–‡ä»¶å¤¹ä¸­æ–‡ä»¶çš„æœç´¢é€Ÿåº¦, Linux é€šè¿‡ç´¢å¼•æ¨¡å¼, å¯ä»¥ä½¿ç”¨æ–‡ä»¶åçš„æ•£åˆ—å¿«é€Ÿå®šä½åˆ°æ–‡ä»¶çš„ä½ç½®<br><br>**è½¯é“¾æ¥ä¸ç¡¬é“¾æ¥**<br>- è½¯é“¾æ¥: åœ¨é“¾æ¥ç›®æ ‡æ–‡ä»¶ä¹‹å‰, ä¼šåˆ›å»ºè‡ªå·±çš„ inode å’Œæ•°æ®å—, ç„¶åå…¶æ•°æ®å—ä¸­çš„å†…å®¹æŒ‡å‘ç›®æ ‡æ–‡ä»¶<br>  - å¯è·¨ç³»ç»Ÿé“¾æ¥<br>- ç¡¬é“¾æ¥: å³ä¸ºä¸€ä¸ªæ–‡ä»¶åˆ›å»ºäº†ä¸€ä¸ªåˆ«å, è¿™ä¸ªåˆ«åä¼šæŒ‡å‘çœŸå®æ–‡ä»¶çš„ inode ç»“æ„ä½“<br>  - å› ä¸ºç›´æ¥æŒ‡å‘æºæ–‡ä»¶ç»“æ„ä½“, å› æ­¤ä»–æ— æ³•è·¨æ–‡ä»¶ç³»ç»Ÿè¿›è¡Œé“¾æ¥<br><br>**æ–‡ä»¶çš„ç»„ç»‡**<br>- Linux ä¸­å°†ç£ç›˜çš„å—åˆ†æˆä¸€ä¸ªä¸ªçš„å—ç»„, æ¯ä¸ªå—ç»„ç”±ä¸€ä¸ªå—ç»„çš„ä½å›¾å’Œå¯¹åº”çš„æ•°æ®å—æè¿°, æœ€å¤§å¯æè¿° 128M çš„ç©ºé—´<br>- æ¯ä¸ªå—ç»„æœ‰å…¶å¯¹åº”çš„å—ç»„æè¿°ç¬¦, æè¿°ç¬¦ä¹‹é—´å½¢æˆä¸€ä¸ªé“¾è¡¨<br>- ä¸ºäº†æ›´å¥½åœ°ç®¡ç†å—ç»„, Linux é€šè¿‡å…ƒå—ç»„æ¥æè¿°å—ç»„<br>  - ä¸€ä¸ªå…ƒå—ç»„ä¸­ç”± 64 ä¸ªå—ç»„ç»„æˆ, å…¶ä¸­çš„å—ç»„æè¿°ç¬¦ä¸€å…± 64 é¡¹, åˆ†åˆ«åœ¨ 0, 1, 63 çš„ä½ç½®çš„å—ç»„ä¸Šå¤‡ä»½ä¸‰ä»½<br>- æ•´ä¸ªæ–‡ä»¶ç³»ç»Ÿé€šè¿‡è¶…çº§å—æ¥æè¿°","like_count":0}]}