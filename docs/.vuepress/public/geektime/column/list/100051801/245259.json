{"id":245259,"title":"14 | åé¢åŸ‹ä¼çš„å¹¶å‘ï¼šå¤šçº¿ç¨‹çœŸçš„å¾ˆéš¾å—ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯Chronoã€‚</p><p>ä»Šå¤©ï¼Œæˆ‘ä»¬æ¥èŠèŠâ€œå¹¶å‘â€ï¼ˆConcurrencyï¼‰ã€â€œå¤šçº¿ç¨‹â€ï¼ˆmultithreadingï¼‰ã€‚</p><p>åœ¨20å¹´å‰ï¼Œå¤§å¤šæ•°äººï¼ˆå½“ç„¶ä¹ŸåŒ…æ‹¬æˆ‘ï¼‰å¯¹è¿™ä¸¤ä¸ªè¯è¿˜æ˜¯ååˆ†é™Œç”Ÿçš„ã€‚é‚£ä¸ªæ—¶å€™ï¼ŒCPUçš„æ€§èƒ½ä¸é«˜ï¼Œè¦åšçš„äº‹æƒ…ä¹Ÿæ¯”è¾ƒå°‘ï¼Œæ²¡ä»€ä¹ˆå¹¶å‘çš„éœ€æ±‚ï¼Œç®€å•çš„å•è¿›ç¨‹ã€å•çº¿ç¨‹å°±èƒ½å¤Ÿè§£å†³å¤§å¤šæ•°é—®é¢˜ã€‚</p><p>ä½†åˆ°äº†ç°åœ¨ï¼Œè®¡ç®—æœºç¡¬ä»¶é£é€Ÿå‘å±•ï¼Œä¸ä»…ä¸»é¢‘ä¸ŠGï¼Œè¿˜æœ‰äº†å¤šæ ¸å¿ƒï¼Œè¿ç®—èƒ½åŠ›å¤§å¹…åº¦æå‡ï¼Œåªä½¿ç”¨å•çº¿ç¨‹å¾ˆéš¾â€œå–‚é¥±â€CPUã€‚è€Œä¸”ï¼Œéšç€äº’è”ç½‘ã€å¤§æ•°æ®ã€éŸ³é¢‘è§†é¢‘å¤„ç†ç­‰æ–°éœ€æ±‚çš„ä¸æ–­æ¶Œç°ï¼Œè¿ç®—é‡ä¹Ÿè¶Šæ¥è¶Šå¤§ã€‚è¿™äº›è½¯ç¡¬ä»¶ä¸Šçš„å˜åŒ–è¿«ä½¿â€œå¹¶å‘â€â€œå¤šçº¿ç¨‹â€æˆä¸ºäº†æ¯ä¸ªæŠ€æœ¯äººéƒ½ä¸å¾—ä¸é¢å¯¹çš„è¯¾é¢˜ã€‚</p><p>é€šä¿—åœ°è¯´ï¼Œâ€œå¹¶å‘â€æ˜¯æŒ‡åœ¨ä¸€ä¸ªæ—¶é—´æ®µé‡Œæœ‰å¤šä¸ªæ“ä½œåœ¨åŒæ—¶è¿›è¡Œï¼Œä¸â€œå¤šçº¿ç¨‹â€å¹¶ä¸æ˜¯ä¸€å›äº‹ã€‚</p><p>å¹¶å‘æœ‰å¾ˆå¤šç§å®ç°æ–¹å¼ï¼Œè€Œå¤šçº¿ç¨‹åªæ˜¯å…¶ä¸­æœ€å¸¸ç”¨çš„ä¸€ç§æ‰‹æ®µã€‚ä¸è¿‡ï¼Œå› ä¸ºå¤šçº¿ç¨‹å·²ç»æœ‰äº†å¾ˆå¤šå¹´çš„å®é™…åº”ç”¨ï¼Œä¹Ÿæœ‰å¾ˆå¤šç ”ç©¶æˆæœã€åº”ç”¨æ¨¡å¼å’Œæˆç†Ÿçš„è½¯ç¡¬ä»¶æ”¯æŒï¼Œæ‰€ä»¥ï¼Œå¯¹è¿™ä¸¤è€…çš„åŒºåˆ†ä¸€èˆ¬ä¹Ÿä¸å¤ªä¸¥æ ¼ï¼Œä¸‹é¢æˆ‘ä¸»è¦æ¥è°ˆå¤šçº¿ç¨‹ã€‚</p><h2>è®¤è¯†çº¿ç¨‹å’Œå¤šçº¿ç¨‹</h2><p>è¦æŒæ¡å¤šçº¿ç¨‹ï¼Œå°±è¦å…ˆäº†è§£çº¿ç¨‹ï¼ˆthreadï¼‰ã€‚</p><p>çº¿ç¨‹çš„æ¦‚å¿µå¯ä»¥åˆ†æˆå¥½å‡ ä¸ªå±‚æ¬¡ï¼Œä»CPUã€æ“ä½œç³»ç»Ÿç­‰ä¸åŒçš„è§’åº¦çœ‹ï¼Œå®ƒçš„å®šä¹‰ä¹Ÿä¸åŒã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬å•ä»è¯­è¨€çš„è§’åº¦æ¥çœ‹çº¿ç¨‹ã€‚</p><!-- [[[read_end]]] --><p><strong>åœ¨C++è¯­è¨€é‡Œï¼Œçº¿ç¨‹å°±æ˜¯ä¸€ä¸ªèƒ½å¤Ÿç‹¬ç«‹è¿è¡Œçš„å‡½æ•°</strong>ã€‚æ¯”å¦‚ä½ å†™ä¸€ä¸ªlambdaè¡¨è¾¾å¼ï¼Œå°±å¯ä»¥è®©å®ƒåœ¨çº¿ç¨‹é‡Œè·‘èµ·æ¥ï¼š</p><pre><code>auto f = []()                // å®šä¹‰ä¸€ä¸ªlambdaè¡¨è¾¾å¼\n{\n    cout &lt;&lt; &quot;tid=&quot; &lt;&lt;\n        this_thread::get_id() &lt;&lt; endl;\n};\n\nthread t(f);                // å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹ï¼Œè¿è¡Œå‡½æ•°f\n</code></pre><p>ä»»ä½•ç¨‹åºä¸€å¼€å§‹å°±æœ‰ä¸€ä¸ªä¸»çº¿ç¨‹ï¼Œå®ƒä»main()å¼€å§‹è¿è¡Œã€‚ä¸»çº¿ç¨‹å¯ä»¥è°ƒç”¨æ¥å£å‡½æ•°ï¼Œåˆ›å»ºå‡ºå­çº¿ç¨‹ã€‚å­çº¿ç¨‹ä¼šç«‹å³è„±ç¦»ä¸»çº¿ç¨‹çš„æ§åˆ¶æµç¨‹ï¼Œå•ç‹¬è¿è¡Œï¼Œä½†å…±äº«ä¸»çº¿ç¨‹çš„æ•°æ®ã€‚ç¨‹åºåˆ›å»ºå‡ºå¤šä¸ªå­çº¿ç¨‹ï¼Œæ‰§è¡Œå¤šä¸ªä¸åŒçš„å‡½æ•°ï¼Œä¹Ÿå°±æˆäº†å¤šçº¿ç¨‹ã€‚</p><p>å¤šçº¿ç¨‹çš„å¥½å¤„ä½ è‚¯å®šèƒ½åˆ—å‡ºå¥½å‡ æ¡ï¼Œæ¯”å¦‚ä»»åŠ¡å¹¶è¡Œã€é¿å…I/Oé˜»å¡ã€å……åˆ†åˆ©ç”¨CPUã€æé«˜ç”¨æˆ·ç•Œé¢å“åº”é€Ÿåº¦ï¼Œç­‰ç­‰ã€‚</p><p>ä¸è¿‡ï¼Œå¤šçº¿ç¨‹ä¹Ÿå¯¹ç¨‹åºå‘˜çš„æ€ç»´ã€èƒ½åŠ›æå‡ºäº†æå¤§çš„æŒ‘æˆ˜ã€‚ä¸å¤¸å¼ åœ°è¯´ï¼Œå®ƒå¸¦æ¥çš„éº»çƒ¦å¯èƒ½è¦æ¯”å¥½å¤„æ›´å¤šã€‚</p><p>è¿™ä¸ªé—®é¢˜ç›¸ä¿¡ä½ ä¹Ÿå¾ˆæ¸…æ¥šï¼Œéšæ‰‹å°±èƒ½æ•°å‡ºå‡ ä¸ªæ¥ï¼Œæ¯”å¦‚åŒæ­¥ã€æ­»é”ã€æ•°æ®ç«äº‰ã€ç³»ç»Ÿè°ƒåº¦å¼€é”€ç­‰â€¦â€¦æ¯ä¸ªå†™è¿‡å®é™…å¤šçº¿ç¨‹åº”ç”¨çš„äººï¼Œå¯èƒ½éƒ½æœ‰â€œä¸€è‚šå­çš„è‹¦æ°´â€ã€‚</p><p>å…¶å®ï¼Œå¤šçº¿ç¨‹ç¼–ç¨‹è¿™ä»¶äº‹â€œè¯´éš¾ä¹Ÿä¸éš¾ï¼Œè¯´ä¸éš¾ä¹Ÿéš¾â€ã€‚è¿™å¥è¯å¬ä¸Šå»å¥½åƒæœ‰ç‚¹è‡ªç›¸çŸ›ç›¾ï¼Œä½†å´æœ‰ä¸€å®šçš„é“ç†ã€‚ä¸ºä»€ä¹ˆè¿™ä¹ˆè¯´å‘¢ï¼Ÿ</p><p>è¯´å®ƒä¸éš¾ï¼Œæ˜¯å› ä¸ºçº¿ç¨‹æœ¬èº«çš„æ¦‚å¿µæ˜¯å¾ˆç®€å•çš„ï¼Œåªè¦è§„åˆ’å¥½è¦åšçš„å·¥ä½œï¼Œä¸ä¸å¤–éƒ¨æœ‰è¿‡å¤šçš„ç«äº‰è¯»å†™ï¼Œå¾ˆå®¹æ˜“å°±èƒ½é¿å¼€â€œå‘â€ï¼Œå……åˆ†åˆ©ç”¨å¤šçº¿ç¨‹ï¼Œâ€œè·‘æ»¡â€CPUã€‚</p><p>è¯´å®ƒéš¾ï¼Œåˆ™æ˜¯å› ä¸ºç°å®çš„ä¸šåŠ¡å¾€å¾€éå¸¸å¤æ‚ï¼Œå¾ˆéš¾åšåˆ°å®Œç¾çš„è§£è€¦ã€‚ä¸€æ—¦çº¿ç¨‹ä¹‹é—´æœ‰å…±äº«æ•°æ®çš„éœ€æ±‚ï¼Œéº»çƒ¦å°±æ¥è¸µè€Œè‡³ï¼Œå› ä¸ºè¦è€ƒè™‘å„ç§æƒ…å†µã€ç”¨å„ç§æ‰‹æ®µå»åŒæ­¥æ•°æ®ã€‚éšç€çº¿ç¨‹æ•°é‡çš„å¢åŠ ï¼Œå¤æ‚ç¨‹åº¦ä¼šä»¥å‡ ä½•é‡çº§æ”€å‡ï¼Œä¸€ä¸å°å¿ƒå°±å¯èƒ½ä¼šå¯¼è‡´ç¾éš¾æ€§çš„åæœã€‚</p><p>å¤šçº¿ç¨‹æ¶µç›–çš„çŸ¥è¯†ç‚¹å¤ªå¤šï¼Œè®¸å¤šå¤§å¸ˆã€é«˜æ‰‹éƒ½ä¸æ•¢è‡ªç§°ç²¾é€šï¼Œæƒ³ç”¨ä¸€èŠ‚è¯¾æŠŠå¤šçº¿ç¨‹å¼€å‘è¯´æ¸…æ¥šæ˜¯å®Œå…¨ä¸å¯èƒ½çš„ã€‚</p><p>æ‰€ä»¥ï¼Œä»Šå¤©æˆ‘ä»¬åªèšç„¦C++çš„æ ‡å‡†åº“ï¼Œäº†è§£ä¸‹æ ‡å‡†åº“ä¸ºå¤šçº¿ç¨‹ç¼–ç¨‹æä¾›äº†å“ªäº›å·¥å…·ï¼Œåœ¨è¯­è¨€å±‚é¢æ€ä¹ˆæ”¹å–„å¤šçº¿ç¨‹åº”ç”¨ã€‚æœ‰äº†è¿™ä¸ªåŸºç¡€ï¼Œä½ å†å»çœ‹é‚£äº›ä¸“è‘—æ—¶ï¼Œå°±å¯ä»¥çœå¾ˆå¤šåŠ›æ°”ï¼Œå¼€å‘æ—¶ä¹Ÿèƒ½å°‘èµ°äº›å¼¯è·¯ã€‚</p><p>é¦–å…ˆï¼Œä½ è¦çŸ¥é“ä¸€ä¸ªæœ€åŸºæœ¬ä½†ä¹Ÿæœ€å®¹æ˜“è¢«å¿½è§†çš„å¸¸è¯†ï¼š<strong>â€œè¯»è€Œä¸å†™â€å°±ä¸ä¼šæœ‰æ•°æ®ç«äº‰</strong>ã€‚</p><p>æ‰€ä»¥ï¼Œåœ¨C++å¤šçº¿ç¨‹ç¼–ç¨‹é‡Œè¯»å–constå˜é‡æ€»æ˜¯å®‰å…¨çš„ï¼Œå¯¹ç±»è°ƒç”¨constæˆå‘˜å‡½æ•°ã€å¯¹å®¹å™¨è°ƒç”¨åªè¯»ç®—æ³•ä¹Ÿæ€»æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚</p><p>çŸ¥é“äº†è¿™ä¸€ç‚¹ï¼Œä½ å°±åº”è¯¥å¤šå®è·µ<a href=\"https://time.geekbang.org/column/article/238486\">ç¬¬7è®²</a>é‡Œçš„åšæ³•ï¼Œå¤šç”¨constå…³é”®å­—ï¼Œå°½å¯èƒ½è®©æ“ä½œéƒ½æ˜¯åªè¯»çš„ï¼Œä¸ºå¤šçº¿ç¨‹æ‰“é€ ä¸€ä¸ªåšå®çš„åŸºç¡€ã€‚</p><p>ç„¶åï¼Œæˆ‘è¦è¯´ä¸€ä¸ªå¤šçº¿ç¨‹å¼€å‘çš„åŸåˆ™ï¼Œä¹Ÿæ˜¯ä¸€å¥â€œè‡ªç›¸çŸ›ç›¾â€çš„è¯ï¼š</p><blockquote>\n<p>æœ€å¥½çš„å¹¶å‘å°±æ˜¯æ²¡æœ‰å¹¶å‘ï¼Œæœ€å¥½çš„å¤šçº¿ç¨‹å°±æ˜¯æ²¡æœ‰çº¿ç¨‹ã€‚</p>\n</blockquote><p>è¿™åˆæ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿ</p><p>ç®€å•æ¥è¯´ï¼Œå°±æ˜¯åœ¨å¤§çš„ã€å®è§‚çš„å±‚é¢ä¸Šâ€œçœ‹å¾—åˆ°â€å¹¶å‘å’Œçº¿ç¨‹ï¼Œè€Œåœ¨å°çš„ã€å¾®è§‚çš„å±‚é¢ä¸Šâ€œçœ‹ä¸åˆ°â€çº¿ç¨‹ï¼Œå‡å°‘æ­»é”ã€åŒæ­¥ç­‰æ¶æ€§é—®é¢˜çš„å‡ºç°å‡ ç‡ã€‚</p><h2>å¤šçº¿ç¨‹å¼€å‘å®è·µ</h2><p>ä¸‹é¢ï¼Œæˆ‘å°±æ¥è®²è®²å…·ä½“è¯¥æ€ä¹ˆå®è·µè¿™ä¸ªåŸåˆ™ã€‚åœ¨C++é‡Œï¼Œæœ‰å››ä¸ªåŸºæœ¬çš„å·¥å…·ï¼šä»…è°ƒç”¨ä¸€æ¬¡ã€çº¿ç¨‹å±€éƒ¨å­˜å‚¨ã€åŸå­å˜é‡å’Œçº¿ç¨‹å¯¹è±¡ã€‚</p><h3>ä»…è°ƒç”¨ä¸€æ¬¡</h3><p>ç¨‹åºå…ä¸äº†è¦åˆå§‹åŒ–æ•°æ®ï¼Œè¿™åœ¨å¤šçº¿ç¨‹é‡Œå´æ˜¯ä¸€ä¸ªä¸å¤§ä¸å°çš„éº»çƒ¦ã€‚å› ä¸ºçº¿ç¨‹å¹¶å‘ï¼Œå¦‚æœæ²¡æœ‰æŸç§åŒæ­¥æ‰‹æ®µæ¥æ§åˆ¶ï¼Œä¼šå¯¼è‡´åˆå§‹åŒ–å‡½æ•°å¤šæ¬¡è¿è¡Œã€‚</p><p>ä¸ºæ­¤ï¼ŒC++æä¾›äº†â€œä»…è°ƒç”¨ä¸€æ¬¡â€çš„åŠŸèƒ½ï¼Œå¯ä»¥å¾ˆè½»æ¾åœ°è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><p>è¿™ä¸ªåŠŸèƒ½ç”¨èµ·æ¥å¾ˆç®€å•ï¼Œä½ è¦å…ˆå£°æ˜ä¸€ä¸ª<strong>once_flag</strong>ç±»å‹çš„å˜é‡ï¼Œæœ€å¥½æ˜¯é™æ€ã€å…¨å±€çš„ï¼ˆçº¿ç¨‹å¯è§ï¼‰ï¼Œä½œä¸ºåˆå§‹åŒ–çš„æ ‡å¿—ï¼š</p><pre><code>static std::once_flag flag;        // å…¨å±€çš„åˆå§‹åŒ–æ ‡å¿—\n</code></pre><p>ç„¶åè°ƒç”¨ä¸“é—¨çš„<strong>call_once()</strong>å‡½æ•°ï¼Œä»¥å‡½æ•°å¼ç¼–ç¨‹çš„æ–¹å¼ï¼Œä¼ é€’è¿™ä¸ªæ ‡å¿—å’Œåˆå§‹åŒ–å‡½æ•°ã€‚è¿™æ ·C++å°±ä¼šä¿è¯ï¼Œå³ä½¿å¤šä¸ªçº¿ç¨‹é‡å…¥call_once()ï¼Œä¹Ÿåªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹ä¼šæˆåŠŸè¿è¡Œåˆå§‹åŒ–ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œä½¿ç”¨äº†lambdaè¡¨è¾¾å¼æ¥æ¨¡æ‹Ÿå®é™…çš„çº¿ç¨‹å‡½æ•°ã€‚ä½ å¯ä»¥æŠŠ<a href=\"https://github.com/chronolaw/cpp_study/blob/master/section3/thread.cpp\">GitHubä»“åº“</a>é‡Œçš„ä»£ç ä¸‹åˆ°æœ¬åœ°ï¼Œå®é™…ç¼–è¯‘è¿è¡Œçœ‹çœ‹æ•ˆæœï¼š</p><pre><code>auto f = []()                // åœ¨çº¿ç¨‹é‡Œè¿è¡Œçš„lambdaè¡¨è¾¾å¼\n{   \n    std::call_once(flag,      // ä»…ä¸€æ¬¡è°ƒç”¨ï¼Œæ³¨æ„è¦ä¼ flag\n        [](){                // åŒ¿ålambdaï¼Œåˆå§‹åŒ–å‡½æ•°ï¼Œåªä¼šæ‰§è¡Œä¸€æ¬¡\n            cout &lt;&lt; &quot;only once&quot; &lt;&lt; endl;\n        }                  // åŒ¿ålambdaç»“æŸ\n    );                     // åœ¨çº¿ç¨‹é‡Œè¿è¡Œçš„lambdaè¡¨è¾¾å¼ç»“æŸ\n};\n\nthread t1(f);            // å¯åŠ¨ä¸¤ä¸ªçº¿ç¨‹ï¼Œè¿è¡Œå‡½æ•°f\nthread t2(f);\n</code></pre><p>call_once()å®Œå…¨æ¶ˆé™¤äº†åˆå§‹åŒ–æ—¶çš„å¹¶å‘å†²çªï¼Œåœ¨å®ƒçš„è°ƒç”¨ä½ç½®æ ¹æœ¬çœ‹ä¸åˆ°å¹¶å‘å’Œçº¿ç¨‹ã€‚æ‰€ä»¥ï¼ŒæŒ‰ç…§åˆšæ‰è¯´çš„åŸºæœ¬åŸåˆ™ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å¤šçº¿ç¨‹å·¥å…·ã€‚</p><p>å®ƒä¹Ÿå¯ä»¥å¾ˆè½»æ¾åœ°è§£å†³å¤šçº¿ç¨‹é¢†åŸŸé‡Œä»¤äººå¤´ç–¼çš„â€œåŒé‡æ£€æŸ¥é”å®šâ€é—®é¢˜ï¼Œä½ å¯ä»¥è‡ªå·±è¯•ä¸€è¯•ï¼Œç”¨å®ƒæ›¿ä»£é”å®šæ¥åˆå§‹åŒ–ã€‚</p><h3>çº¿ç¨‹å±€éƒ¨å­˜å‚¨</h3><p>è¯»å†™å…¨å±€ï¼ˆæˆ–è€…å±€éƒ¨é™æ€ï¼‰å˜é‡æ˜¯å¦ä¸€ä¸ªæ¯”è¾ƒå¸¸è§çš„æ•°æ®ç«äº‰åœºæ™¯ï¼Œå› ä¸ºå…±äº«æ•°æ®ï¼Œå¤šçº¿ç¨‹æ“ä½œæ—¶å°±æœ‰å¯èƒ½å¯¼è‡´çŠ¶æ€ä¸ä¸€è‡´ã€‚</p><p>ä½†å¦‚æœä»”ç»†åˆ†æçš„è¯ï¼Œä½ ä¼šå‘ç°ï¼Œæœ‰çš„æ—¶å€™ï¼Œå…¨å±€å˜é‡å¹¶ä¸ä¸€å®šæ˜¯å¿…é¡»å…±äº«çš„ï¼Œå¯èƒ½ä»…ä»…æ˜¯ä¸ºäº†æ–¹ä¾¿çº¿ç¨‹ä¼ å…¥ä¼ å‡ºæ•°æ®ï¼Œæˆ–è€…æ˜¯æœ¬åœ°cacheï¼Œè€Œä¸æ˜¯ä¸ºäº†å…±äº«æ‰€æœ‰æƒã€‚</p><p>æ¢å¥è¯è¯´ï¼Œè¿™åº”è¯¥æ˜¯çº¿ç¨‹ç‹¬å æ‰€æœ‰æƒï¼Œä¸åº”è¯¥åœ¨å¤šçº¿ç¨‹ä¹‹é—´å…±åŒæ‹¥æœ‰ï¼Œæœ¯è¯­å«â€œ<strong>çº¿ç¨‹å±€éƒ¨å­˜å‚¨</strong>â€ï¼ˆthread local storageï¼‰ã€‚</p><p>è¿™ä¸ªåŠŸèƒ½åœ¨C++é‡Œç”±å…³é”®å­—<strong>thread_local</strong>å®ç°ï¼Œå®ƒæ˜¯ä¸€ä¸ªå’Œstaticã€externåŒçº§çš„å˜é‡å­˜å‚¨è¯´æ˜ï¼Œæœ‰thread_localæ ‡è®°çš„å˜é‡åœ¨æ¯ä¸ªçº¿ç¨‹é‡Œéƒ½ä¼šæœ‰ä¸€ä¸ªç‹¬ç«‹çš„å‰¯æœ¬ï¼Œæ˜¯â€œçº¿ç¨‹ç‹¬å â€çš„ï¼Œæ‰€ä»¥å°±ä¸ä¼šæœ‰ç«äº‰è¯»å†™çš„é—®é¢˜ã€‚</p><p>ä¸‹é¢æ˜¯ç¤ºèŒƒthread_localçš„ä»£ç ï¼Œå…ˆå®šä¹‰äº†ä¸€ä¸ªçº¿ç¨‹ç‹¬å å˜é‡ï¼Œç„¶åç”¨lambdaè¡¨è¾¾å¼æ•è·å¼•ç”¨ï¼Œå†æ”¾è¿›å¤šä¸ªçº¿ç¨‹é‡Œè¿è¡Œï¼š</p><pre><code>thread_local int n = 0;        // çº¿ç¨‹å±€éƒ¨å­˜å‚¨å˜é‡\n\nauto f = [&amp;](int x)           // åœ¨çº¿ç¨‹é‡Œè¿è¡Œçš„lambdaè¡¨è¾¾å¼ï¼Œæ•è·å¼•ç”¨\n{   \n    n += x;                   // ä½¿ç”¨çº¿ç¨‹å±€éƒ¨å˜é‡ï¼Œäº’ä¸å½±å“\n    cout &lt;&lt; n;                // è¾“å‡ºï¼ŒéªŒè¯ç»“æœ\n};  \n\nthread t1(f, 10);           // å¯åŠ¨ä¸¤ä¸ªçº¿ç¨‹ï¼Œè¿è¡Œå‡½æ•°f\nthread t2(f, 20);\n</code></pre><p>åœ¨ç¨‹åºæ‰§è¡Œåï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œä¸¤ä¸ªçº¿ç¨‹åˆ†åˆ«è¾“å‡ºäº†10å’Œ20ï¼Œäº’ä¸å¹²æ‰°ã€‚</p><p>ä½ å¯ä»¥è¯•ç€æŠŠå˜é‡çš„å£°æ˜æ”¹æˆstaticï¼Œå†è¿è¡Œä¸€ä¸‹ã€‚è¿™æ—¶ï¼Œå› ä¸ºä¸¤ä¸ªçº¿ç¨‹å…±äº«å˜é‡ï¼Œæ‰€ä»¥nå°±è¢«è¿åŠ äº†ä¸¤æ¬¡ï¼Œæœ€åçš„ç»“æœå°±æ˜¯30ã€‚</p><pre><code>static int n = 0;    // é™æ€å…¨å±€å˜é‡\n...                   // ä»£ç ä¸åˆšæ‰çš„ç›¸åŒ\n</code></pre><p>å’Œcall_once()ä¸€æ ·ï¼Œthread_localä¹Ÿå¾ˆå®¹æ˜“ä½¿ç”¨ã€‚ä½†å®ƒçš„åº”ç”¨åœºåˆä¸æ˜¯é‚£ä¹ˆæ˜¾è€Œæ˜“è§çš„ï¼Œè¿™è¦æ±‚ä½ å¯¹çº¿ç¨‹çš„å…±äº«æ•°æ®æœ‰æ¸…æ¥šçš„è®¤è¯†ï¼ŒåŒºåˆ†å‡ºç‹¬å çš„é‚£éƒ¨åˆ†ï¼Œæ¶ˆé™¤å¤šçº¿ç¨‹å¯¹å˜é‡çš„å¹¶å‘è®¿é—®ã€‚</p><h3>åŸå­å˜é‡</h3><p>é‚£ä¹ˆï¼Œå¯¹äºé‚£äº›éç‹¬å ã€å¿…é¡»å…±äº«çš„æ•°æ®ï¼Œè¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ</p><p>è¦æƒ³ä¿è¯å¤šçº¿ç¨‹è¯»å†™å…±äº«æ•°æ®çš„ä¸€è‡´æ€§ï¼Œå…³é”®æ˜¯<strong>è¦è§£å†³åŒæ­¥é—®é¢˜</strong>ï¼Œä¸èƒ½è®©ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶å†™ï¼Œä¹Ÿå°±æ˜¯â€œäº’æ–¥â€ã€‚</p><p>è¿™åœ¨å¤šçº¿ç¨‹ç¼–ç¨‹é‡Œæ—©å°±æœ‰è§£å†³æ–¹æ¡ˆäº†ï¼Œå°±æ˜¯äº’æ–¥é‡ï¼ˆMutexï¼‰ã€‚ä½†å®ƒçš„æˆæœ¬å¤ªé«˜ï¼Œæ‰€ä»¥ï¼Œå¯¹äºå°æ•°æ®ï¼Œåº”è¯¥é‡‡ç”¨â€œ<strong>åŸå­åŒ–</strong>â€è¿™ä¸ªæ›´å¥½çš„æ–¹æ¡ˆã€‚</p><p>æ‰€è°“åŸå­ï¼ˆatomicï¼‰ï¼Œåœ¨å¤šçº¿ç¨‹é¢†åŸŸé‡Œçš„æ„æ€å°±æ˜¯ä¸å¯åˆ†çš„ã€‚æ“ä½œè¦ä¹ˆå®Œæˆï¼Œè¦ä¹ˆæœªå®Œæˆï¼Œä¸èƒ½è¢«ä»»ä½•å¤–éƒ¨æ“ä½œæ‰“æ–­ï¼Œæ€»æ˜¯æœ‰ä¸€ä¸ªç¡®å®šçš„ã€å®Œæ•´çš„çŠ¶æ€ã€‚æ‰€ä»¥ä¹Ÿå°±ä¸ä¼šå­˜åœ¨ç«äº‰è¯»å†™çš„é—®é¢˜ï¼Œä¸éœ€è¦ä½¿ç”¨äº’æ–¥é‡æ¥åŒæ­¥ï¼Œæˆæœ¬ä¹Ÿå°±æ›´ä½ã€‚</p><p>ä½†ä¸æ˜¯æ‰€æœ‰çš„æ“ä½œéƒ½å¯ä»¥åŸå­åŒ–çš„ï¼Œå¦åˆ™å¤šçº¿ç¨‹ç¼–ç¨‹å°±å¤ªè½»æ¾äº†ã€‚ç›®å‰ï¼ŒC++åªèƒ½è®©ä¸€äº›æœ€åŸºæœ¬çš„ç±»å‹åŸå­åŒ–ï¼Œæ¯”å¦‚atomic_intã€atomic_longï¼Œç­‰ç­‰ï¼š</p><pre><code>using atomic_bool = std::atomic&lt;bool&gt;;    // åŸå­åŒ–çš„bool\nusing atomic_int  = std::atomic&lt;int&gt;;      // åŸå­åŒ–çš„int\nusing atomic_long = std::atomic&lt;long&gt;;    // åŸå­åŒ–çš„long\n</code></pre><p>è¿™äº›åŸå­å˜é‡éƒ½æ˜¯æ¨¡æ¿ç±»atomicçš„ç‰¹åŒ–å½¢å¼ï¼ŒåŒ…è£…äº†åŸå§‹çš„ç±»å‹ï¼Œå…·æœ‰ç›¸åŒçš„æ¥å£ï¼Œç”¨èµ·æ¥å’Œboolã€intå‡ ä¹ä¸€æ¨¡ä¸€æ ·ï¼Œä½†å´æ˜¯åŸå­åŒ–çš„ï¼Œå¤šçº¿ç¨‹è¯»å†™ä¸ä¼šå‡ºé”™ã€‚</p><p>æ³¨æ„ï¼Œæˆ‘è¯´äº†â€œå‡ ä¹â€è¿™ä¸ªè¯ã€‚å®ƒè¿˜æ˜¯æœ‰äº›ä¸åŒçš„ï¼Œä¸€ä¸ªé‡è¦çš„åŒºåˆ«æ˜¯ï¼Œ<strong>åŸå­å˜é‡ç¦ç”¨äº†æ‹·è´æ„é€ å‡½æ•°ï¼Œæ‰€ä»¥åœ¨åˆå§‹åŒ–çš„æ—¶å€™ä¸èƒ½ç”¨â€œ=â€çš„èµ‹å€¼å½¢å¼ï¼Œåªèƒ½ç”¨åœ†æ‹¬å·æˆ–è€…èŠ±æ‹¬å·</strong>ï¼š</p><pre><code>atomic_int  x {0};          // åˆå§‹åŒ–ï¼Œä¸èƒ½ç”¨=\natomic_long y {1000L};      // åˆå§‹åŒ–ï¼Œåªèƒ½ç”¨åœ†æ‹¬å·æˆ–è€…èŠ±æ‹¬å·\n\nassert(++x == 1);           // è‡ªå¢è¿ç®—\n\ny += 200;                   // åŠ æ³•è¿ç®—\nassert(y &lt; 2000);           // æ¯”è¾ƒè¿ç®— \n</code></pre><p>é™¤äº†æ¨¡æ‹Ÿæ•´æ•°è¿ç®—ï¼ŒåŸå­å˜é‡è¿˜æœ‰ä¸€äº›ç‰¹æ®Šçš„åŸå­æ“ä½œï¼Œæ¯”å¦‚storeã€loadã€fetch_addã€fetch_subã€exchangeã€compare_exchange_weak/compare_exchange_strongï¼Œæœ€åä¸€ç»„å°±æ˜¯è‘—åçš„CASï¼ˆCompare And Swapï¼‰æ“ä½œã€‚</p><p>è€Œå¦ä¸€ä¸ªåŒæ ·è‘—åçš„TASï¼ˆTest And Setï¼‰æ“ä½œï¼Œåˆ™éœ€è¦ç”¨åˆ°ä¸€ä¸ªç‰¹æ®Šçš„åŸå­ç±»å‹atomic_flagã€‚</p><p>å®ƒä¸æ˜¯ç®€å•çš„boolç‰¹åŒ–ï¼ˆatomic<bool>ï¼‰ï¼Œæ²¡æœ‰storeã€loadçš„æ“ä½œï¼Œåªç”¨æ¥å®ç°TASï¼Œä¿è¯ç»å¯¹æ— é”ã€‚</bool></p><p>ä½ èƒ½ç”¨è¿™äº›åŸå­å˜é‡åšäº›ä»€ä¹ˆå‘¢ï¼Ÿ</p><p>æœ€åŸºæœ¬çš„ç”¨æ³•æ˜¯æŠŠåŸå­å˜é‡å½“ä½œçº¿ç¨‹å®‰å…¨çš„å…¨å±€è®¡æ•°å™¨æˆ–è€…æ ‡å¿—ä½ï¼Œè¿™ä¹Ÿç®—æ˜¯â€œåˆå¿ƒâ€å§ã€‚ä½†å®ƒè¿˜æœ‰ä¸€ä¸ªæ›´é‡è¦çš„åº”ç”¨é¢†åŸŸï¼Œå°±æ˜¯å®ç°é«˜æ•ˆçš„æ— é”æ•°æ®ç»“æ„ï¼ˆlock-freeï¼‰ã€‚</p><p>ä½†æˆ‘<strong>å¼ºçƒˆä¸å»ºè®®</strong>ä½ è‡ªå·±å°è¯•å»å†™æ— é”æ•°æ®ç»“æ„ï¼Œå› ä¸ºæ— é”ç¼–ç¨‹çš„éš¾åº¦æ¯”ä½¿ç”¨äº’æ–¥é‡æ›´é«˜ï¼Œå¯èƒ½ä¼šæ‰åˆ°å„ç§éš¾ä»¥å¯Ÿè§‰çš„â€œå‘â€ï¼ˆä¾‹å¦‚ABAï¼‰é‡Œï¼Œæœ€å¥½è¿˜æ˜¯ç”¨ç°æˆçš„åº“ã€‚</p><p>é—æ†¾çš„æ˜¯ï¼Œæ ‡å‡†åº“åœ¨è¿™æ–¹é¢å¸®ä¸äº†ä½ ï¼Œè™½ç„¶ç½‘ä¸Šå¯ä»¥æ‰¾åˆ°ä¸å°‘å¼€æºçš„æ— é”æ•°æ®ç»“æ„ï¼Œä½†ç»è¿‡å®é™…æ£€éªŒçš„ä¸å¤šï¼Œæˆ‘ä¸ªäººè§‰å¾—ä½ å¯ä»¥è€ƒè™‘<strong>boost.lock_free</strong>ã€‚</p><h3>çº¿ç¨‹</h3><p>åˆ°ç°åœ¨æˆ‘è¯´äº†call_onceã€thread_localå’Œatomicè¿™ä¸‰ä¸ªC++é‡Œçš„å·¥å…·ï¼Œå®ƒä»¬éƒ½ä¸ä¸çº¿ç¨‹ç›´æ¥ç›¸å…³ï¼Œä½†å´èƒ½å¤Ÿç”¨äºå¤šçº¿ç¨‹ç¼–ç¨‹ï¼Œå°½é‡æ¶ˆé™¤æ˜¾å¼åœ°ä½¿ç”¨çº¿ç¨‹ã€‚</p><p>ä½†æ˜¯ï¼Œå¿…é¡»è¦ç”¨çº¿ç¨‹çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¹Ÿä¸èƒ½é€ƒé¿ã€‚</p><p>C++æ ‡å‡†åº“é‡Œæœ‰ä¸“é—¨çš„çº¿ç¨‹ç±»threadï¼Œä½¿ç”¨å®ƒå°±å¯ä»¥ç®€å•åœ°åˆ›å»ºçº¿ç¨‹ï¼Œåœ¨åå­—ç©ºé—´std::this_threadé‡Œï¼Œè¿˜æœ‰yield()ã€get_id()ã€sleep_for()ã€sleep_until()ç­‰å‡ ä¸ªæ–¹ä¾¿çš„ç®¡ç†å‡½æ•°ã€‚å› ä¸ºå®ƒä»¬çš„ç”¨æ³•æ¯”è¾ƒç®€å•ï¼Œèµ„æ–™ä¹Ÿéšå¤„å¯è§ï¼Œæˆ‘å°±ä¸å†é‡å¤äº†ã€‚</p><p>ä¸‹é¢çš„ä»£ç åŒæ—¶ç¤ºèŒƒäº†threadå’Œatomicçš„ç”¨æ³•ï¼š</p><pre><code>static atomic_flag flag {false};    // åŸå­åŒ–çš„æ ‡å¿—é‡\nstatic atomic_int  n;               // åŸå­åŒ–çš„int\n\nauto f = [&amp;]()              // åœ¨çº¿ç¨‹é‡Œè¿è¡Œçš„lambdaè¡¨è¾¾å¼ï¼Œæ•è·å¼•ç”¨\n{\n    auto value = flag.test_and_set();  // TASæ£€æŸ¥åŸå­æ ‡å¿—é‡\n\n    if (value) {\n        cout &lt;&lt; &quot;flag has been set.&quot; &lt;&lt; endl;\n    } else {\n        cout &lt;&lt; &quot;set flag by &quot; &lt;&lt;\n            this_thread::get_id() &lt;&lt; endl;  // è¾“å‡ºçº¿ç¨‹id\n    }\n\n    n += 100;                    // åŸå­å˜é‡åŠ æ³•è¿ç®—\n\n    this_thread::sleep_for(      // çº¿ç¨‹ç¡çœ \n        n.load() * 10ms);        // ä½¿ç”¨æ—¶é—´å­—é¢é‡\n    cout &lt;&lt; n &lt;&lt; endl;\n};                        // åœ¨çº¿ç¨‹é‡Œè¿è¡Œçš„lambdaè¡¨è¾¾å¼ç»“æŸ\n\nthread t1(f);                // å¯åŠ¨ä¸¤ä¸ªçº¿ç¨‹ï¼Œè¿è¡Œå‡½æ•°f\nthread t2(f);\n\nt1.join();                   // ç­‰å¾…çº¿ç¨‹ç»“æŸ    \nt2.join();\n</code></pre><p>ä½†è¿˜æ˜¯åŸºäºé‚£ä¸ªåŸåˆ™ï¼Œæˆ‘å»ºè®®ä½ ä¸è¦ç›´æ¥ä½¿ç”¨threadè¿™ä¸ªâ€œåŸå§‹â€çš„çº¿ç¨‹æ¦‚å¿µï¼Œæœ€å¥½æŠŠå®ƒéšè—åˆ°åº•å±‚ï¼Œå› ä¸ºâ€œçœ‹ä¸åˆ°çš„çº¿ç¨‹æ‰æ˜¯å¥½çº¿ç¨‹â€ã€‚</p><p>å…·ä½“çš„åšæ³•æ˜¯è°ƒç”¨å‡½æ•°async()ï¼Œå®ƒçš„å«ä¹‰æ˜¯â€œ<strong>å¼‚æ­¥è¿è¡Œ</strong>â€ä¸€ä¸ªä»»åŠ¡ï¼Œéšå«çš„åŠ¨ä½œæ˜¯å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹å»æ‰§è¡Œï¼Œä½†ä¸ç»å¯¹ä¿è¯ç«‹å³å¯åŠ¨ï¼ˆä¹Ÿå¯ä»¥åœ¨ç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’std::launch::asyncï¼Œè¦æ±‚ç«‹å³å¯åŠ¨çº¿ç¨‹ï¼‰ã€‚</p><p>å¤§å¤šæ•°threadèƒ½åšçš„äº‹æƒ…ä¹Ÿå¯ä»¥ç”¨async()æ¥å®ç°ï¼Œä½†ä¸ä¼šçœ‹åˆ°æ˜æ˜¾çš„çº¿ç¨‹ï¼š</p><pre><code>auto task = [](auto x)                  // åœ¨çº¿ç¨‹é‡Œè¿è¡Œçš„lambdaè¡¨è¾¾å¼\n{\n    this_thread::sleep_for( x * 1ms);  // çº¿ç¨‹ç¡çœ \n    cout &lt;&lt; &quot;sleep for &quot; &lt;&lt; x &lt;&lt; endl;\n    return x;\n};\n\nauto f = std::async(task, 10);         // å¯åŠ¨ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡\nf.wait();                              // ç­‰å¾…ä»»åŠ¡å®Œæˆ\n\nassert(f.valid());                    // ç¡®å®å·²ç»å®Œæˆäº†ä»»åŠ¡\ncout &lt;&lt; f.get() &lt;&lt; endl;              // è·å–ä»»åŠ¡çš„æ‰§è¡Œç»“æœ\n</code></pre><p>å…¶å®ï¼Œè¿™è¿˜æ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„æ€è·¯ï¼Œåœ¨æ›´é«˜çš„æŠ½è±¡çº§åˆ«ä¸Šå»çœ‹å¾…é—®é¢˜ï¼Œå¼‚æ­¥å¹¶å‘å¤šä¸ªä»»åŠ¡ï¼Œè®©åº•å±‚å»è‡ªåŠ¨ç®¡ç†çº¿ç¨‹ï¼Œè¦æ¯”æˆ‘ä»¬è‡ªå·±æ‰‹åŠ¨æ§åˆ¶æ›´å¥½ï¼ˆæ¯”å¦‚å†…éƒ¨ä½¿ç”¨çº¿ç¨‹æ± æˆ–è€…å…¶ä»–æœºåˆ¶ï¼‰ã€‚</p><p>async()ä¼šè¿”å›ä¸€ä¸ªfutureå˜é‡ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯ä»£è¡¨äº†æ‰§è¡Œç»“æœçš„â€œæœŸè´§â€ï¼Œå¦‚æœä»»åŠ¡æœ‰è¿”å›å€¼ï¼Œå°±å¯ä»¥ç”¨æˆå‘˜å‡½æ•°get()è·å–ã€‚</p><p>ä¸è¿‡è¦ç‰¹åˆ«æ³¨æ„ï¼Œget()åªèƒ½è°ƒä¸€æ¬¡ï¼Œå†æ¬¡è·å–ç»“æœä¼šå‘ç”Ÿé”™è¯¯ï¼ŒæŠ›å‡ºå¼‚å¸¸std::future_errorã€‚ï¼ˆè‡³äºä¸ºä»€ä¹ˆè¿™ä¹ˆè®¾è®¡æˆ‘ä¹Ÿä¸å¤ªæ¸…æ¥šï¼Œæ²¡æ‰¾åˆ°å®˜æ–¹çš„è§£é‡Šï¼‰</p><p>å¦å¤–ï¼Œè¿™é‡Œè¿˜æœ‰ä¸€ä¸ªå¾ˆéšè”½çš„â€œå‘â€ï¼Œå¦‚æœä½ ä¸æ˜¾å¼è·å–async()çš„è¿”å›å€¼ï¼ˆå³futureå¯¹è±¡ï¼‰ï¼Œå®ƒå°±ä¼š<strong>åŒæ­¥é˜»å¡</strong>ç›´è‡³ä»»åŠ¡å®Œæˆï¼ˆç”±äºä¸´æ—¶å¯¹è±¡çš„ææ„å‡½æ•°ï¼‰ï¼Œäºæ˜¯â€œasyncâ€å°±å˜æˆäº†â€œsyncâ€ã€‚</p><p>æ‰€ä»¥ï¼Œå³ä½¿æˆ‘ä»¬ä¸å…³å¿ƒè¿”å›å€¼ï¼Œä¹Ÿæ€»è¦ç”¨autoæ¥é…åˆasync()ï¼Œé¿å…åŒæ­¥é˜»å¡ï¼Œå°±åƒä¸‹é¢çš„ç¤ºä¾‹ä»£ç é‚£æ ·ï¼š</p><pre><code>std::async(task, ...);            // æ²¡æœ‰æ˜¾å¼è·å–futureï¼Œè¢«åŒæ­¥é˜»å¡\nauto f = std::async(task, ...);   // åªæœ‰ä¸Šä¸€ä¸ªä»»åŠ¡å®Œæˆåæ‰èƒ½è¢«æ‰§è¡Œ\n</code></pre><p>æ ‡å‡†åº“é‡Œè¿˜æœ‰mutexã€lock_guardã€condition_variableã€promiseç­‰å¾ˆå¤šå·¥å…·ï¼Œä¸è¿‡å®ƒä»¬å¤§å¤šæ•°éƒ½æ˜¯å¹¿ä¸ºäººçŸ¥çš„æ¦‚å¿µåœ¨C++é‡Œçš„å…·ä½“å®ç°ï¼Œç”¨æ³•ä¸Šæ²¡å¤ªå¤šæ–°æ„ï¼Œæ‰€ä»¥æˆ‘å°±ä¸å†å¤šä»‹ç»äº†ã€‚</p><h2>å°ç»“</h2><p>è¯´äº†è¿™ä¹ˆé•¿æ—¶é—´ï¼Œä½ å¯èƒ½ä¼šæœ‰äº›å¥‡æ€ªï¼Œè¿™èŠ‚è¯¾çš„æ ‡é¢˜é‡Œæœ‰çº¿ç¨‹ï¼Œä½†æˆ‘å¹¶æ²¡æœ‰è®²å¤ªå¤šçº¿ç¨‹ç›¸å…³çš„ä¸œè¥¿ï¼Œæ›´å¤šçš„æ˜¯åœ¨è®²â€œä¸ç”¨çº¿ç¨‹â€çš„æ€ç»´æ–¹å¼ã€‚</p><p>æ‰€è°“â€œå½“å±€è€…è¿·â€ï¼Œå¦‚æœä½ ä¸€å¤´æ‰è¿›å¤šçº¿ç¨‹çš„ä¸–ç•Œï¼Œå…¨åŠ›å»ç ”ç©¶çº¿ç¨‹ã€äº’æ–¥é‡ã€é”ç­‰ç»†èŠ‚ï¼Œå°±å¾ˆå®¹æ˜“â€œé’»è¿›æ­»èƒ¡åŒâ€â€œä¸€æ¡é“èµ°åˆ°é»‘â€ã€‚</p><p>å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬åº”è¯¥è·³å‡ºå…·ä½“çš„ç¼–ç ï¼Œæ¢ä¸ªè§’åº¦æ¥çœ‹é—®é¢˜ï¼Œä¹Ÿè®¸å°±èƒ½å¤Ÿâ€œæŸ³æš—èŠ±æ˜åˆä¸€æ‘â€ï¼Œå¾—åˆ°æ–°çš„ã€ä¼˜é›…çš„è§£å†³åŠæ³•ã€‚</p><p>å¥½äº†ï¼Œä»Šå¤©å°±åˆ°è¿™é‡Œï¼Œåšä¸ªå°ç»“ï¼š</p><ol>\n<li>å¤šçº¿ç¨‹æ˜¯å¹¶å‘æœ€å¸¸ç”¨çš„å®ç°æ–¹å¼ï¼Œå¥½å¤„æ˜¯ä»»åŠ¡å¹¶è¡Œã€é¿å…é˜»å¡ï¼Œåå¤„æ˜¯å¼€å‘éš¾åº¦é«˜ï¼Œæœ‰æ•°æ®ç«äº‰ã€æ­»é”ç­‰å¾ˆå¤šâ€œå‘â€ï¼›</li>\n<li>call_once()å®ç°äº†ä»…è°ƒç”¨ä¸€æ¬¡çš„åŠŸèƒ½ï¼Œé¿å…å¤šçº¿ç¨‹åˆå§‹åŒ–æ—¶çš„å†²çªï¼›</li>\n<li>thread_localå®ç°äº†çº¿ç¨‹å±€éƒ¨å­˜å‚¨ï¼Œè®©æ¯ä¸ªçº¿ç¨‹éƒ½ç‹¬ç«‹è®¿é—®æ•°æ®ï¼Œäº’ä¸å¹²æ‰°ï¼›</li>\n<li>atomicå®ç°äº†åŸå­åŒ–å˜é‡ï¼Œå¯ä»¥ç”¨ä½œçº¿ç¨‹å®‰å…¨çš„è®¡æ•°å™¨ï¼Œä¹Ÿå¯ä»¥å®ç°æ— é”æ•°æ®ç»“æ„ï¼›</li>\n<li>async()å¯åŠ¨ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡ï¼Œç›¸å½“äºå¼€äº†ä¸€ä¸ªçº¿ç¨‹ï¼Œä½†å†…éƒ¨é€šå¸¸ä¼šæœ‰ä¼˜åŒ–ï¼Œæ¯”ç›´æ¥ä½¿ç”¨çº¿ç¨‹æ›´å¥½ã€‚</li>\n</ol><p>æˆ‘å†å‘Šè¯‰ä½ ä¸€ä¸ªå¥½æ¶ˆæ¯ï¼šC++20æ­£å¼åŠ å…¥äº†åç¨‹ï¼ˆå…³é”®å­—co_wait/co_yield/co_returnï¼‰ã€‚å®ƒæ˜¯ç”¨æˆ·æ€çš„çº¿ç¨‹ï¼Œæ²¡æœ‰ç³»ç»Ÿçº§çº¿ç¨‹é‚£ä¹ˆå¤šçš„éº»çƒ¦äº‹ï¼Œä½¿ç”¨å®ƒå°±å¯ä»¥å†™å‡ºå¼€é”€æ›´ä½ã€æ€§èƒ½æ›´é«˜çš„å¹¶å‘ç¨‹åºã€‚è®©æˆ‘ä»¬ä¸€èµ·æœŸå¾…å§ï¼</p><h2>è¯¾ä¸‹ä½œä¸š</h2><p>æœ€åæ˜¯è¯¾ä¸‹ä½œä¸šæ—¶é—´ï¼Œç»™ä½ ç•™ä¸¤ä¸ªæ€è€ƒé¢˜ï¼š</p><ol>\n<li>ä½ åœ¨å¤šçº¿ç¨‹ç¼–ç¨‹çš„æ—¶å€™é‡åˆ°è¿‡å“ªäº›â€œå‘â€ï¼Œæœ‰ä»€ä¹ˆç»éªŒæ•™è®­ï¼Ÿ</li>\n<li>ä½ è§‰å¾—async()æ¯”ç›´æ¥ç”¨threadå¯åŠ¨çº¿ç¨‹å¥½åœ¨å“ªé‡Œï¼Ÿ</li>\n</ol><p>æ¬¢è¿åœ¨ç•™è¨€åŒºå†™ä¸‹ä½ çš„æ€è€ƒå’Œç­”æ¡ˆï¼Œå¦‚æœè§‰å¾—ä»Šå¤©çš„å†…å®¹å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼Œä¹Ÿæ¬¢è¿åˆ†äº«ç»™ä½ çš„æœ‹å‹ã€‚æˆ‘ä»¬ä¸‹èŠ‚è¯¾è§ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/3f/d2/3fee7b3958a1780a3441c49b89288dd2.jpg?wh=2000*3214\" alt=\"\"></p>","neighbors":{"left":{"article_title":"13 | äº”èŠ±å…«é—¨çš„ç®—æ³•ï¼šä¸è¦å†æ‰‹å†™forå¾ªç¯äº†","id":243357},"right":{"article_title":"15 | åºåˆ—åŒ–ï¼šç®€å•é€šç”¨çš„æ•°æ®äº¤æ¢æ ¼å¼æœ‰å“ªäº›ï¼Ÿ","id":245880}},"comments":[{"had_liked":false,"id":232614,"user_name":"æˆ˜æ–—æœºäºŒè™ğŸ¯","can_delete":false,"product_type":"c1","uid":1157201,"ip_address":"","ucode":"8AB69AD2D76784","user_header":"https://static001.geekbang.org/account/avatar/00/11/a8/51/46a788b1.jpg","comment_is_top":false,"comment_ctime":1594050422,"is_pvip":false,"replies":[{"id":"85874","content":"å¯¹ï¼ŒNginxçš„è‡ªæ—‹é”ä»£ç éå¸¸ç²¾è‡´ï¼Œå€¼å¾—å­¦ä¹ ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1594082949,"ip_address":"","comment_id":232614,"utype":1}],"discussion_count":1,"race_medal":0,"score":"74608494454","product_id":100051801,"comment_content":"nginxçš„è‡ªæ—‹é”å®ç°å°±æ˜¯ä¸€ä¸ªéå¸¸æˆåŠŸçš„å·¥ç¨‹çº§çš„è‡ªæ—‹é”","like_count":18,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":500708,"discussion_content":"å¯¹ï¼ŒNginxçš„è‡ªæ—‹é”ä»£ç éå¸¸ç²¾è‡´ï¼Œå€¼å¾—å­¦ä¹ ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594082949,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":224799,"user_name":"æ³¡æ³¡é¾™","can_delete":false,"product_type":"c1","uid":1208655,"ip_address":"","ucode":"8D43010FA3DC2C","user_header":"https://static001.geekbang.org/account/avatar/00/12/71/4f/bce0d5bc.jpg","comment_is_top":false,"comment_ctime":1591542549,"is_pvip":true,"replies":[{"id":"82756","content":"å¤šçº¿ç¨‹è°ƒè¯•ä»æ¥éƒ½ä¸æ˜¯ä¸ªç®€å•çš„å·¥ä½œï¼Œä¸€èˆ¬éƒ½æ˜¯æ‰“æ—¥å¿—ï¼Œé‡Œé¢åˆ—å‡ºçº¿ç¨‹å·å’Œä½¿ç”¨çš„å˜é‡ï¼Œç„¶åå†æ…¢æ…¢åˆ†æã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1591577698,"ip_address":"","comment_id":224799,"utype":1}],"discussion_count":2,"race_medal":2,"score":"70311019285","product_id":100051801,"comment_content":"è™½ç„¶æ²¡æœ‰C++çš„å¤šçº¿ç¨‹ç»éªŒï¼Œä½†æ˜¯è®°å¾—å…¶ä»–è¯­è¨€çš„å¤šçº¿ç¨‹ï¼Œç”¨IDEæ‰“æ–­ç‚¹è°ƒè¯•æ˜¯ä¸€ä¸ªæéš¾çš„é—®é¢˜","like_count":17,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497609,"discussion_content":"å¤šçº¿ç¨‹è°ƒè¯•ä»æ¥éƒ½ä¸æ˜¯ä¸ªç®€å•çš„å·¥ä½œï¼Œä¸€èˆ¬éƒ½æ˜¯æ‰“æ—¥å¿—ï¼Œé‡Œé¢åˆ—å‡ºçº¿ç¨‹å·å’Œä½¿ç”¨çš„å˜é‡ï¼Œç„¶åå†æ…¢æ…¢åˆ†æã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1591577698,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2401841,"avatar":"https://static001.geekbang.org/account/avatar/00/24/a6/31/0242f7d6.jpg","nickname":"ywz","note":"","ucode":"A93F43B3506FA9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":379070,"discussion_content":"å¤šçº¿ç¨‹è°ƒè¯•æ‰“æ—¥å¿—çš„è¯ä¼šä¸ä¼šæœ‰ç‚¹å¤ªå¤šäº†ï¼Ÿæœ‰æ²¡æœ‰å…¶ä»–çš„è°ƒè¯•æ‰‹æ®µ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623660386,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":224653,"user_name":"å‡ºå–çµé­‚çš„æ•™ç»ƒKerry","can_delete":false,"product_type":"c1","uid":1807943,"ip_address":"","ucode":"8C64517DA556FE","user_header":"https://static001.geekbang.org/account/avatar/00/1b/96/47/93838ff7.jpg","comment_is_top":false,"comment_ctime":1591497550,"is_pvip":true,"replies":[{"id":"82700","content":"è¿™ç§æƒ³æ³•æ˜¯éå¸¸å±é™©çš„ï¼Œä¸€å®šè¦ç‰¹åˆ«æ³¨æ„ã€‚<br><br>volatileåªæ˜¯è¡¨ç¤ºå˜é‡æ˜“å˜ï¼Œä¸çº¿ç¨‹æ²¡æœ‰ä»»ä½•å…³ç³»ã€‚<br><br>ä¸åŠ é”åº”è¯¥ç”¨atomicå˜é‡ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1591531543,"ip_address":"","comment_id":224653,"utype":1}],"discussion_count":9,"race_medal":0,"score":"44541170510","product_id":100051801,"comment_content":"è€å¸ˆä½ å¥½ï¼Œå‡å¦‚ä¸€ä¸ªå˜é‡ç”¨volatileä¿®é¥°ï¼Œæ˜¯ä¸æ˜¯å°±å¯ä»¥ä¸ç”¨åŠ é”ï¼Ÿ","like_count":10,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497556,"discussion_content":"è¿™ç§æƒ³æ³•æ˜¯éå¸¸å±é™©çš„ï¼Œä¸€å®šè¦ç‰¹åˆ«æ³¨æ„ã€‚\n\nvolatileåªæ˜¯è¡¨ç¤ºå˜é‡æ˜“å˜ï¼Œä¸çº¿ç¨‹æ²¡æœ‰ä»»ä½•å…³ç³»ã€‚\n\nä¸åŠ é”åº”è¯¥ç”¨atomicå˜é‡ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591531543,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1216924,"avatar":"https://static001.geekbang.org/account/avatar/00/12/91/9c/3d630e3a.jpg","nickname":"èŒèŒå²›ä¸»","note":"","ucode":"B749FBB922E396","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":303253,"discussion_content":"äº†è§£ä¸€ä¸‹å•ä¾‹æ¨¡å¼çš„double-check","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1599201650,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1126649,"avatar":"https://static001.geekbang.org/account/avatar/00/11/30/f9/c0d1af4f.jpg","nickname":"ä¸‰å¥½ç å†œ","note":"","ucode":"1C118F2234F345","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":297910,"discussion_content":"cppèŒæ–°ï¼Œä¹Ÿæ¥äº¤æµä¸€æ³¢ï¼Œæˆ‘çš„ç†è§£ï¼Œjavaä¸­volatileå¯ä»¥ä¿è¯å¯è§æ€§ï¼Œcppä¸­åº”è¯¥æ˜¯ä¸€æ ·çš„è¯­ä¹‰ï¼Œæ²¡æ³•ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œä½†æ˜¯é…åˆcaså¯ä»¥åšåˆ°æ— é”ï¼Œ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1597109982,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":4,"child_discussions":[{"author":{"id":1807943,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/96/47/93838ff7.jpg","nickname":"å‡ºå–çµé­‚çš„æ•™ç»ƒKerry","note":"","ucode":"8C64517DA556FE","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1126649,"avatar":"https://static001.geekbang.org/account/avatar/00/11/30/f9/c0d1af4f.jpg","nickname":"ä¸‰å¥½ç å†œ","note":"","ucode":"1C118F2234F345","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":297930,"discussion_content":"æ˜¯çš„ï¼Œå½“æ—¶æˆ‘ä¹Ÿæ˜¯çœ‹äº†javaçš„ä¿è¯ï¼Œæ‰æœ‰è¿™ä¸ªæƒ³æ³•ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597113061,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":297910,"ip_address":""},"score":297930,"extra":""},{"author":{"id":2311396,"avatar":"","nickname":"JY","note":"","ucode":"5DE1DC047946E6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1126649,"avatar":"https://static001.geekbang.org/account/avatar/00/11/30/f9/c0d1af4f.jpg","nickname":"ä¸‰å¥½ç å†œ","note":"","ucode":"1C118F2234F345","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":327418,"discussion_content":"å¯è§æ€§ï¼Œæ˜¯å…³é”®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605834270,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":297910,"ip_address":""},"score":327418,"extra":""},{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1126649,"avatar":"https://static001.geekbang.org/account/avatar/00/11/30/f9/c0d1af4f.jpg","nickname":"ä¸‰å¥½ç å†œ","note":"","ucode":"1C118F2234F345","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":359797,"discussion_content":"C++ ä¸­çš„ volatile å’Œ Java è¯­ä¹‰å®Œå…¨ä¸åŒï¼Œè·Ÿå¤šçº¿ç¨‹å¯ä»¥è¯´æ²¡æœ‰ä»»ä½•å…³ç³»ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1616293076,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":297910,"ip_address":""},"score":359797,"extra":""}]},{"author":{"id":2763179,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/29/ab/59a6e437.jpg","nickname":"Kevin","note":"","ucode":"3588850B3370C8","race_medal":5,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":410613,"discussion_content":"è€å¸ˆæˆåŠŸåœ°å¸®æˆ‘è§£æƒ‘äº†atomicå’Œvolatileï¼Œæ„Ÿè°¢ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635741061,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1165201,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ7mAt63VrbLZPHpeZxSc4IlBYswQSnaAB5wGePaGFDehgiaNfIxI1SJ5yIHIlmVk8hsw0RaoaSCPA/132","nickname":"Stephen","note":"","ucode":"0D49223E6CB7B1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":367639,"discussion_content":"æˆ‘çœ‹åˆ°ä¸€ç¯‡åšå®¢é‡Œè®²åˆ°volatileè¡¨ç¤ºè¿™å˜é‡å¯èƒ½ä¼šè¢«æ„æƒ³ä¸åˆ°åœ°æ”¹å˜ï¼Œæç¤ºç¼–è¯‘å™¨ä¸è¦ä¼˜åŒ–è¯¥å˜é‡,ä½œè€…å»ºè®®ç”¨volatileä¿®é¥°åœ¨å¤šä¸ªçº¿ç¨‹ä¸­ä½¿ç”¨çš„åŸç”Ÿç±»å‹å˜é‡.ä¸çŸ¥é“é‡Œé¢è¯´çš„å¯¹ä¸å¯¹? https://www.cnblogs.com/Stephen-Qin/p/11388620.html","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618411142,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":259818,"user_name":"é£æ¸…æ‰¬","can_delete":false,"product_type":"c1","uid":1047043,"ip_address":"","ucode":"651F1390B64953","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fa/03/619e3e48.jpg","comment_is_top":false,"comment_ctime":1604846102,"is_pvip":true,"replies":[{"id":"94406","content":"å¾ˆå¥½çš„ä¾‹å­ï¼Œèµã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1604886679,"ip_address":"","comment_id":259818,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18784715286","product_id":100051801,"comment_content":"asyncé‚£é‡Œéšå«çš„å‘å¯ä»¥ç»“åˆå¦‚ä¸‹ä»£ç éªŒè¯ï¼š<br>```<br>auto task = [](auto x)<br>    {<br>        &#47;&#47;using namespace std::chrono_literals;<br><br>        this_thread::sleep_for( x * 1ms);<br><br>        cout &lt;&lt; &quot;sleep for &quot; &lt;&lt; x &lt;&lt; endl;<br><br>        return x;<br>    };<br>    &#47;&#47;å…ˆè¾“å‡ºHello,world<br>    auto f = std::async(task, 100);<br><br>    cout &lt;&lt; &quot;Hello,world&quot; &lt;&lt; endl;<br><br>#if 0<br>    &#47;&#47;å…ˆè¾“å‡ºsleep for 100<br>    std::async(task, 100);<br><br>    cout &lt;&lt; &quot;Hello,world&quot; &lt;&lt; endl;<br>#endif<br>    return 0;<br>```","like_count":5,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":509036,"discussion_content":"å¾ˆå¥½çš„ä¾‹å­ï¼Œèµã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604886679,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":238554,"user_name":"èŒƒé—²","can_delete":false,"product_type":"c1","uid":1073125,"ip_address":"","ucode":"F21FD7DF6BA53C","user_header":"https://static001.geekbang.org/account/avatar/00/10/5f/e5/54325854.jpg","comment_is_top":false,"comment_ctime":1596197551,"is_pvip":false,"replies":[{"id":"88275","content":"callbackå¹¶ä¸èƒ½å®ç°å¼‚æ­¥ï¼Œä½†å¼‚æ­¥å¤šç”¨callbackæ¥å®ç°è§£è€¦å›è°ƒï¼Œæ¯”å¦‚actorå’Œproactorè¿™ä¸¤ç§å¼‚æ­¥æ¨¡å¼ã€‚<br><br>æˆ‘ç†è§£çš„é˜»å¡æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯ioé˜»å¡ï¼Œä¸€ç§æ˜¯cpuè®¡ç®—é‡é˜»å¡ï¼Œå‰è€…å¯ä»¥ç”¨å¼‚æ­¥å›è°ƒæ¥é¿å…ï¼Œè€Œåè€…å°±åªèƒ½ç”¨å¤šçº¿ç¨‹äº†ã€‚<br><br>ç›®å‰åœ¨C++é‡Œï¼Œå¼‚æ­¥ç¼–ç¨‹ä¸»è¦è¿˜æ˜¯ç”¨å¤šçº¿ç¨‹ï¼Œè€Œcallbackéš¾äºä½¿ç”¨å’Œç†è§£ï¼ŒæŠŠå¤„ç†æµç¨‹åˆ†å‰²çš„æ”¯ç¦»ç ´ç¢ï¼Œä»¥åå¯èƒ½ä¼šç”¨åç¨‹æ›´å¥½ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1596416950,"ip_address":"","comment_id":238554,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18776066735","product_id":100051801,"comment_content":"C++å†…æ€ä¹ˆåšå¼‚æ­¥å‘¢ï¼Ÿ<br>1. Callback<br>2.å¤šçº¿ç¨‹+Callback<br><br>ä½†æ˜¯è¿™ä¸¤ä¸ªéƒ½æœ‰ä¸ªé—®é¢˜ï¼Œcallbackä¹Ÿæ˜¯ä¼šé˜»å¡çš„ã€‚å¦‚æœæœ‰A B C Då››ä¸ªæµç¨‹ï¼ŒB C Dåˆ†åˆ«ä¾èµ–äºå‰ä¸€ä¸ªçš„è¾“å‡ºï¼Œè¿™ç§callbackå°±ä¼šè°ƒç”¨æ ˆå¤ªæ·±ï¼Œå®¹æ˜“çˆ†æ ˆã€‚<br><br>æœ€è¿‘å¯¹å¼‚æ­¥ç¼–ç¨‹æ¨¡å¼äº§ç”Ÿäº†äº›ç–‘é—®ï¼Œåº”è¯¥æ€ä¹ˆè§£å†³ï¼Ÿ","like_count":4,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":502786,"discussion_content":"callbackå¹¶ä¸èƒ½å®ç°å¼‚æ­¥ï¼Œä½†å¼‚æ­¥å¤šç”¨callbackæ¥å®ç°è§£è€¦å›è°ƒï¼Œæ¯”å¦‚actorå’Œproactorè¿™ä¸¤ç§å¼‚æ­¥æ¨¡å¼ã€‚\n\næˆ‘ç†è§£çš„é˜»å¡æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯ioé˜»å¡ï¼Œä¸€ç§æ˜¯cpuè®¡ç®—é‡é˜»å¡ï¼Œå‰è€…å¯ä»¥ç”¨å¼‚æ­¥å›è°ƒæ¥é¿å…ï¼Œè€Œåè€…å°±åªèƒ½ç”¨å¤šçº¿ç¨‹äº†ã€‚\n\nç›®å‰åœ¨C++é‡Œï¼Œå¼‚æ­¥ç¼–ç¨‹ä¸»è¦è¿˜æ˜¯ç”¨å¤šçº¿ç¨‹ï¼Œè€Œcallbackéš¾äºä½¿ç”¨å’Œç†è§£ï¼ŒæŠŠå¤„ç†æµç¨‹åˆ†å‰²çš„æ”¯ç¦»ç ´ç¢ï¼Œä»¥åå¯èƒ½ä¼šç”¨åç¨‹æ›´å¥½ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596416950,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":226663,"user_name":"robonix","can_delete":false,"product_type":"c1","uid":1212323,"ip_address":"","ucode":"866EC82EDA455B","user_header":"https://static001.geekbang.org/account/avatar/00/12/7f/a3/23540579.jpg","comment_is_top":false,"comment_ctime":1592182467,"is_pvip":false,"replies":[{"id":"83439","content":"asyncå†…éƒ¨å¯èƒ½æœ‰ä¼˜åŒ–ï¼Œæ³¨æ„ï¼Œåªæ˜¯å¯èƒ½ï¼Œè¦çœ‹ç¼–è¯‘å™¨å…·ä½“æ€ä¹ˆåšï¼Œä¹Ÿå¯èƒ½ä¸ä¼šä¼˜åŒ–ï¼Œè€Œä¸”æˆ‘ä»¬ä¹Ÿæ— æ³•æ§åˆ¶ä»–ã€‚<br><br>æƒ³è¦ç”¨çº¿ç¨‹æ± ï¼Œè¿˜æ˜¯å¾—è‡ªå·±å†™ï¼Œä¸è¿‡å…¶å®ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œåˆ›å»ºå¤šä¸ªçº¿ç¨‹ç”¨listå®¹çº³å°±å¯ä»¥äº†ã€‚<br><br>å¯ä»¥å‚è€ƒboost.thread_poolï¼Œå®ƒå°±æ˜¯è¿™ä¹ˆåšçš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1592183595,"ip_address":"","comment_id":226663,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18772051651","product_id":100051801,"comment_content":"ï¼ˆæ¯”å¦‚å†…éƒ¨ä½¿ç”¨çº¿ç¨‹æ± æˆ–è€…å…¶ä»–æœºåˆ¶ï¼‰ã€‚é‚£ä¹ˆasyncæ€ä¹ˆè·Ÿçº¿ç¨‹æ± ç»“åˆå‘¢ï¼Ÿè€å¸ˆæœ‰æ²¡æœ‰ä¸€äº›å¥½çš„å‚è€ƒèµ„æ–™æä¾›å“ˆ","like_count":4,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":498325,"discussion_content":"asyncå†…éƒ¨å¯èƒ½æœ‰ä¼˜åŒ–ï¼Œæ³¨æ„ï¼Œåªæ˜¯å¯èƒ½ï¼Œè¦çœ‹ç¼–è¯‘å™¨å…·ä½“æ€ä¹ˆåšï¼Œä¹Ÿå¯èƒ½ä¸ä¼šä¼˜åŒ–ï¼Œè€Œä¸”æˆ‘ä»¬ä¹Ÿæ— æ³•æ§åˆ¶ä»–ã€‚\n\næƒ³è¦ç”¨çº¿ç¨‹æ± ï¼Œè¿˜æ˜¯å¾—è‡ªå·±å†™ï¼Œä¸è¿‡å…¶å®ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œåˆ›å»ºå¤šä¸ªçº¿ç¨‹ç”¨listå®¹çº³å°±å¯ä»¥äº†ã€‚\n\nå¯ä»¥å‚è€ƒboost.thread_poolï¼Œå®ƒå°±æ˜¯è¿™ä¹ˆåšçš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592183595,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":225826,"user_name":"äºŒæ ä¸€","can_delete":false,"product_type":"c1","uid":1141324,"ip_address":"","ucode":"040C9A30E7ADF4","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/dDk3WicuUbhvcb4R8PD0YiaFteqQvC4UpXHw4chKLDKB0qaOGeCxBJ3nfiaNZAyVQmAgesyE2MvABydxg6gic29j5w/132","comment_is_top":false,"comment_ctime":1591867846,"is_pvip":true,"replies":[{"id":"83205","content":"åœ¨C++11&#47;14é‡Œå¥½åƒåªèƒ½è¿™æ ·ï¼Œåœ¨C++20é‡Œå¥½åƒå¤šäº†ä¸€ä¸ªæ–°çš„coutå¯¹è±¡ï¼Œæ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚<br><br>ä¸è¿‡æˆ‘ä¸å¤ªå»ºè®®åœ¨å¤šçº¿ç¨‹é‡Œç”¨coutï¼Œä¸€æ˜¯ä¸å®‰å…¨ï¼ŒäºŒæ˜¯ä¹Ÿæ²¡ä»€ä¹ˆæ„ä¹‰ï¼Œæ”¹æˆå†™æ—¥å¿—æ–‡ä»¶çš„æ–¹å¼å¯èƒ½ä¼šæ›´å¥½ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1591879905,"ip_address":"","comment_id":225826,"utype":1}],"discussion_count":3,"race_medal":0,"score":"18771737030","product_id":100051801,"comment_content":"è€å¸ˆï¼Œåœ¨å¤šä¸ªçº¿ç¨‹é‡ŒåŒæ—¶å¾€è¾“å‡ºæµè¾“å‡ºï¼Œæ€ä¹ˆä¿è¯ä¸€ä¸ªçº¿ç¨‹çš„å•æ¬¡è¾“å‡ºæ“ä½œæ˜¯å®Œæ•´çš„ ? æ¯”å¦‚&quot;std::cout &lt;&lt; x &lt;&lt; std::endl;&quot;æ€ä¹ˆä¿è¯ä¸ä¼šæ¼æ‰&quot;std::endl&quot;è¿™ä¸ªè¾“å‡ºï¼Œåªèƒ½åŠ é”å—ï¼Ÿ","like_count":5,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":498007,"discussion_content":"åœ¨C++11/14é‡Œå¥½åƒåªèƒ½è¿™æ ·ï¼Œåœ¨C++20é‡Œå¥½åƒå¤šäº†ä¸€ä¸ªæ–°çš„coutå¯¹è±¡ï¼Œæ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚\n\nä¸è¿‡æˆ‘ä¸å¤ªå»ºè®®åœ¨å¤šçº¿ç¨‹é‡Œç”¨coutï¼Œä¸€æ˜¯ä¸å®‰å…¨ï¼ŒäºŒæ˜¯ä¹Ÿæ²¡ä»€ä¹ˆæ„ä¹‰ï¼Œæ”¹æˆå†™æ—¥å¿—æ–‡ä»¶çš„æ–¹å¼å¯èƒ½ä¼šæ›´å¥½ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591879905,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":323104,"discussion_content":"å¾ˆå¤šå¼€æºçš„æ—¥å¿—åº“éƒ½æ”¯æŒå¤šçº¿ç¨‹ï¼Œå¯ä»¥ä¸ŠGitHubæ‰¾ä¸€ä¸‹ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1604886834,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2149899,"avatar":"https://static001.geekbang.org/account/avatar/00/20/ce/0b/b1e244e6.jpg","nickname":"IMBFD","note":"","ucode":"2E7B3D01C537A0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":308290,"discussion_content":"å†™æ—¥å¿—æ˜¯ä¸æ˜¯ä¹Ÿè¦ç”¨æ”¯æŒå¤šçº¿ç¨‹çš„æ—¥å¿—åº“","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600909284,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":224497,"user_name":"è¢«è®¨åŒçš„å‹‡æ°”","can_delete":false,"product_type":"c1","uid":1547913,"ip_address":"","ucode":"AE3B3CA27D91A2","user_header":"https://static001.geekbang.org/account/avatar/00/17/9e/89/6e9c05d6.jpg","comment_is_top":false,"comment_ctime":1591418990,"is_pvip":false,"replies":[{"id":"82633","content":"<br>1.åŸºæœ¬æ­£ç¡®ï¼Œasync()æ˜¯ä¸€ç§ç›¸å½“ç®€åŒ–çš„çº¿ç¨‹ç”¨æ³•ï¼Œç›®çš„å°±æ˜¯è·å–futureå€¼ï¼Œå¦‚æœä¸æ˜¯è¿™ä¸ªåœºæ™¯å°±ä¸å¦‚threadçµæ´»ã€‚<br><br>2.æ¯”å¦‚è¯´çº¿ç¨‹é‡Œè¦ä¿å­˜ä¸€äº›cacheæ•°æ®ï¼Œå¾ˆæ˜¾ç„¶è¿™äº›cacheä¸ä¼šæ˜¯å¤šçº¿ç¨‹å…±äº«çš„ï¼Œç”¨thread_localå°±æ¯”è¾ƒå¥½ã€‚å¯ä»¥æŠŠå®ƒç†è§£æˆæ˜¯ä¸“é—¨ç»™çº¿ç¨‹å‡†å¤‡çš„staticå…¨å±€å˜é‡ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1591430021,"ip_address":"","comment_id":224497,"utype":1}],"discussion_count":2,"race_medal":0,"score":"14476320878","product_id":100051801,"comment_content":"å½“éœ€è¦è·å–çº¿ç¨‹çš„ç»“æœæ—¶ï¼Œä½¿ç”¨asyncå¯ä»¥ç›´æ¥è·å–å…¶ç»“æœï¼›ä½¿ç”¨threadåˆ™éœ€è¦é€šè¿‡å…±äº«æ•°æ®æ¥è·å–ï¼Œéœ€è¦ä½¿ç”¨é”ã€æ¡ä»¶å˜é‡ã€‚<br><br>asyncçš„ç¼ºç‚¹æ˜¯åªèƒ½è·å–ä¸€æ¬¡ã€‚è‹¥éœ€è¦ä¿è¯çº¿ç¨‹ä¸€ç›´è¿è¡Œï¼Œå¤šæ¬¡è·å–å…¶â€˜ç»“æœâ€™æ—¶ï¼Œåªèƒ½ä½¿ç”¨thread + condition_variable,ä¸çŸ¥é“è¿™æ ·ç†è§£å¯¹ä¸å¯¹ï¼Ÿ<br><br>thread_localçš„åº”ç”¨åœºæ™¯é—®é¢˜ã€‚è‹¥ä¸éœ€è¦å…±äº«æ•°æ®ï¼Œç›´æ¥åœ¨lambadè¡¨è¾¾å¼ä¸­çš„æ•è·åˆ—è¡¨ä¸­è¿›è¡Œå€¼æ•è·ä¸å°±æ¯ä¸ªçº¿ç¨‹ä¸€ä¸ªå‰¯æœ¬äº†ï¼Œæ²¡æƒ³å‡ºæ¥å¿…é¡»ä½¿ç”¨thread_localçš„åº”ç”¨åœºæ™¯ã€‚","like_count":4,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497495,"discussion_content":"\n1.åŸºæœ¬æ­£ç¡®ï¼Œasync()æ˜¯ä¸€ç§ç›¸å½“ç®€åŒ–çš„çº¿ç¨‹ç”¨æ³•ï¼Œç›®çš„å°±æ˜¯è·å–futureå€¼ï¼Œå¦‚æœä¸æ˜¯è¿™ä¸ªåœºæ™¯å°±ä¸å¦‚threadçµæ´»ã€‚\n\n2.æ¯”å¦‚è¯´çº¿ç¨‹é‡Œè¦ä¿å­˜ä¸€äº›cacheæ•°æ®ï¼Œå¾ˆæ˜¾ç„¶è¿™äº›cacheä¸ä¼šæ˜¯å¤šçº¿ç¨‹å…±äº«çš„ï¼Œç”¨thread_localå°±æ¯”è¾ƒå¥½ã€‚å¯ä»¥æŠŠå®ƒç†è§£æˆæ˜¯ä¸“é—¨ç»™çº¿ç¨‹å‡†å¤‡çš„staticå…¨å±€å˜é‡ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591430021,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1209939,"avatar":"https://static001.geekbang.org/account/avatar/00/12/76/53/21d62a23.jpg","nickname":"é²Â·æœ¬","note":"","ucode":"F1DEB30C21B48E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301244,"discussion_content":"æ¯”å¦‚çº¿ç¨‹å†…éƒ¨ç”¨åˆ°çš„cacheå˜é‡ï¼Œå¦‚æœç”¨å±€éƒ¨å˜é‡å°±éœ€è¦åœ¨å„ä¸ªå‡½æ•°é—´ä¼ é€’å‚æ•°ï¼Œå¦‚æœç”¨local_threadå°±å¯ä»¥åœ¨å‡½æ•°å†…éƒ¨ç›´æ¥è®¿é—®ï¼Œä¸ç”¨æ‹…å¿ƒçº¿ç¨‹é—´è®¿é—®å†²çªï¼Œå› ä¸ºæ˜¯æ¯ä¸ªçº¿ç¨‹ä¸€ä¸ªç‰ˆæœ¬. æƒ³æƒ³errnoå°±å¥½ç†è§£äº†","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1598451123,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":224457,"user_name":"Stephen","can_delete":false,"product_type":"c1","uid":1165201,"ip_address":"","ucode":"0D49223E6CB7B1","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ7mAt63VrbLZPHpeZxSc4IlBYswQSnaAB5wGePaGFDehgiaNfIxI1SJ5yIHIlmVk8hsw0RaoaSCPA/132","comment_is_top":false,"comment_ctime":1591407014,"is_pvip":false,"replies":[{"id":"82629","content":"ä¹Ÿä¸ä¸€å®šï¼Œçœ‹ä¼ ç»™å­çº¿ç¨‹ä»€ä¹ˆå‚æ•°äº†ï¼Œå±€éƒ¨å˜é‡ä¹Ÿå¯ä»¥ç»™å­çº¿ç¨‹å…±äº«ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1591429653,"ip_address":"","comment_id":224457,"utype":1}],"discussion_count":5,"race_medal":0,"score":"14476308902","product_id":100051801,"comment_content":"å­çº¿ç¨‹ä¼šç«‹å³è„±ç¦»ä¸»çº¿ç¨‹çš„æ§åˆ¶æµç¨‹ï¼Œå•ç‹¬è¿è¡Œï¼Œä½†å…±äº«ä¸»çº¿ç¨‹çš„æ•°æ®ã€‚è¿™é‡ŒæŒ‡çš„æ˜¯å…¨å±€å˜é‡å§ï¼Œåƒå±€éƒ¨å˜é‡åº”è¯¥ä¸è¡Œå§ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497482,"discussion_content":"ä¹Ÿä¸ä¸€å®šï¼Œçœ‹ä¼ ç»™å­çº¿ç¨‹ä»€ä¹ˆå‚æ•°äº†ï¼Œå±€éƒ¨å˜é‡ä¹Ÿå¯ä»¥ç»™å­çº¿ç¨‹å…±äº«ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591429653,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1165201,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ7mAt63VrbLZPHpeZxSc4IlBYswQSnaAB5wGePaGFDehgiaNfIxI1SJ5yIHIlmVk8hsw0RaoaSCPA/132","nickname":"Stephen","note":"","ucode":"0D49223E6CB7B1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":279857,"discussion_content":"ç½—è€å¸ˆï¼Œæ ˆä¸Šçš„å±€éƒ¨å˜é‡ä¹Ÿå¯ä»¥å…±äº«å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591435876,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1547913,"avatar":"https://static001.geekbang.org/account/avatar/00/17/9e/89/6e9c05d6.jpg","nickname":"è¢«è®¨åŒçš„å‹‡æ°”","note":"","ucode":"AE3B3CA27D91A2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1165201,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ7mAt63VrbLZPHpeZxSc4IlBYswQSnaAB5wGePaGFDehgiaNfIxI1SJ5yIHIlmVk8hsw0RaoaSCPA/132","nickname":"Stephen","note":"","ucode":"0D49223E6CB7B1","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":279883,"discussion_content":"ä½ å¯ä»¥ä¼ å±€éƒ¨å˜é‡çš„å¼•ç”¨è¿›å»ï¼Œstd:: ref (para)ï¼Œé»˜è®¤æ˜¯æ‹·è´æˆ–ç§»åŠ¨ï¼Œä½¿ç”¨ä¸Šé¢è¿™ç§å½¢å¼ä¼ é€’çš„å°±æ˜¯å¼•ç”¨ï¼Œæˆ–æŒ‡å‘å±€éƒ¨å˜é‡çš„æŒ‡é’ˆä¹Ÿèƒ½å…±äº«ï¼Œè¯­æ³•æ˜¯è¿™æ ·ï¼Œä½†ä¸€èˆ¬ä¸è¿™ä¹ˆä½¿ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1591444078,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":279857,"ip_address":""},"score":279883,"extra":""},{"author":{"id":1165201,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ7mAt63VrbLZPHpeZxSc4IlBYswQSnaAB5wGePaGFDehgiaNfIxI1SJ5yIHIlmVk8hsw0RaoaSCPA/132","nickname":"Stephen","note":"","ucode":"0D49223E6CB7B1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1547913,"avatar":"https://static001.geekbang.org/account/avatar/00/17/9e/89/6e9c05d6.jpg","nickname":"è¢«è®¨åŒçš„å‹‡æ°”","note":"","ucode":"AE3B3CA27D91A2","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":280027,"discussion_content":"å—¯å—¯ï¼Œè†œæ‹œå¤§ä½¬","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591458784,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":279883,"ip_address":""},"score":280027,"extra":""}]},{"author":{"id":1547913,"avatar":"https://static001.geekbang.org/account/avatar/00/17/9e/89/6e9c05d6.jpg","nickname":"è¢«è®¨åŒçš„å‹‡æ°”","note":"","ucode":"AE3B3CA27D91A2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":279803,"discussion_content":"æ˜¯çš„ã€‚å±€éƒ¨å˜é‡æ˜¯åœ¨æ ˆç©ºé—´å­˜å‚¨çš„ï¼ˆä¸åŒ…å«å±€éƒ¨é™æ€å˜é‡ï¼‰ï¼Œå¹¶ä¸å…±äº«ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591419119,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":289847,"user_name":"dog_brother","can_delete":false,"product_type":"c1","uid":1619597,"ip_address":"","ucode":"9F64D3C6D815FB","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83er6OV33jHia3U9LYlZEx2HrpsELeh3KMlqFiaKpSAaaZeBttXRAVvDXUgcufpqJ60bJWGYGNpT7752w/132","comment_is_top":false,"comment_ctime":1619229659,"is_pvip":true,"replies":[{"id":"105113","content":"è¿™ä¸ªè¿˜æ˜¯çœ‹æ€ä¹ˆç”¨å§ï¼Œä»”ç»†çœ‹å®ƒçš„apiï¼ŒçœŸæ­£æœ‰å“ªäº›å‘åªæœ‰è‡ªå·±å®é™…ä½¿ç”¨äº†æ‰èƒ½çŸ¥é“ï¼Œä¹Ÿè®¸ä¸ä¼šé‡åˆ°é‚£äº›å‘ã€‚<br><br>threadä½¿ç”¨èµ·æ¥å¾ˆæ–¹ä¾¿ï¼Œå…¶å®å°±æ˜¯å¯¹æ“ä½œç³»ç»Ÿçº¿ç¨‹æ¥å£çš„å°è£…ï¼Œå¯ä»¥å…ˆå°èŒƒå›´ä½¿ç”¨ï¼Œå†é€æ­¥æ›¿æ¢pthreadã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1619237307,"ip_address":"","comment_id":289847,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10209164251","product_id":100051801,"comment_content":"è€å¸ˆï¼Œæˆ‘ä»¬ç”Ÿäº§ç¯å¢ƒæ˜¯c++ 11ï¼Œä½†æ˜¯æˆ‘ä»¬å‡ ä¹ä¸ä½¿ç”¨stdçš„threadï¼Œä¸»è¦æ˜¯pthreadç³»åˆ—å‡½æ•°ã€‚å¬è¯´æ˜¯å› ä¸ºstd threadçš„å‘æ¯”è¾ƒå¤šã€‚","like_count":2,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":519032,"discussion_content":"è¿™ä¸ªè¿˜æ˜¯çœ‹æ€ä¹ˆç”¨å§ï¼Œä»”ç»†çœ‹å®ƒçš„apiï¼ŒçœŸæ­£æœ‰å“ªäº›å‘åªæœ‰è‡ªå·±å®é™…ä½¿ç”¨äº†æ‰èƒ½çŸ¥é“ï¼Œä¹Ÿè®¸ä¸ä¼šé‡åˆ°é‚£äº›å‘ã€‚\n\nthreadä½¿ç”¨èµ·æ¥å¾ˆæ–¹ä¾¿ï¼Œå…¶å®å°±æ˜¯å¯¹æ“ä½œç³»ç»Ÿçº¿ç¨‹æ¥å£çš„å°è£…ï¼Œå¯ä»¥å…ˆå°èŒƒå›´ä½¿ç”¨ï¼Œå†é€æ­¥æ›¿æ¢pthreadã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619237307,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":288140,"user_name":"Stephen","can_delete":false,"product_type":"c1","uid":1165201,"ip_address":"","ucode":"0D49223E6CB7B1","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ7mAt63VrbLZPHpeZxSc4IlBYswQSnaAB5wGePaGFDehgiaNfIxI1SJ5yIHIlmVk8hsw0RaoaSCPA/132","comment_is_top":false,"comment_ctime":1618319562,"is_pvip":false,"replies":[{"id":"104609","content":"è¯´çš„å¾ˆå¯¹ï¼Œå¤šçº¿ç¨‹çš„å‘å¾ˆå¤šï¼Œå¾ˆå®¹æ˜“æ‰è¿›å»ï¼Œæ‰€ä»¥åº”å½“å°½é‡ä»¥â€œä¸ç”¨çº¿ç¨‹â€çš„æ–¹å¼ä½¿ç”¨çº¿ç¨‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1618361922,"ip_address":"","comment_id":288140,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10208254154","product_id":100051801,"comment_content":"1.é‡åˆ°çš„å‘:åˆ†ä¸æ¸…å½“å‰å˜é‡æ˜¯åœ¨ä¸»çº¿ç¨‹ä¸­è¿˜æ˜¯åœ¨å­çº¿ç¨‹ä¸­.  æ•™è®­:å­çº¿ç¨‹å‡½æ•°å…¥å£runä¸­çš„å†…å®¹æ‰ç®—æ˜¯åœ¨å­çº¿ç¨‹ä¸­.<br><br>2.asyncå‡½æ•°,æ˜¯ä¸€ç§æ›´é«˜å±‚çš„å¼‚æ­¥æ–¹å¼.å®ƒä¸å¿…æ˜¾å¼æ‰‹å†™joinå‡½æ•°æ¥è®©ä¸»çº¿ç¨‹ç­‰å¾…å­çº¿ç¨‹.å®ƒå¯ä»¥ç”¨std::futureç±»å‹çš„å˜é‡æ¥æ¥æ”¶çº¿ç¨‹å‡½æ•°è¿è¡Œçš„ç»“æœ,å¹¶é€šè¿‡get()çš„æ–¹æ³•æ¥è·å¾—ç»“æœ.è¿™æ ·å°±ä¸å¿…åƒthreadé‚£æ ·æå‰å®šä¹‰ä¸€ä¸ªå…¨å±€å˜é‡,åœ¨çº¿ç¨‹å‡½æ•°ä¸­è¿›è¡Œèµ‹å€¼æ“ä½œ. æ­¤å¤–asyncè¿˜å¯ä»¥æŒ‡å®šçº¿ç¨‹åˆ›å»ºç­–ç•¥--æ˜¯ç«‹é©¬æ‰§è¡Œè¿˜æ˜¯å»¶è¿Ÿæ‰§è¡Œ.","like_count":2,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518526,"discussion_content":"è¯´çš„å¾ˆå¯¹ï¼Œå¤šçº¿ç¨‹çš„å‘å¾ˆå¤šï¼Œå¾ˆå®¹æ˜“æ‰è¿›å»ï¼Œæ‰€ä»¥åº”å½“å°½é‡ä»¥â€œä¸ç”¨çº¿ç¨‹â€çš„æ–¹å¼ä½¿ç”¨çº¿ç¨‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618361922,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":287632,"user_name":"Stephen","can_delete":false,"product_type":"c1","uid":1165201,"ip_address":"","ucode":"0D49223E6CB7B1","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ7mAt63VrbLZPHpeZxSc4IlBYswQSnaAB5wGePaGFDehgiaNfIxI1SJ5yIHIlmVk8hsw0RaoaSCPA/132","comment_is_top":false,"comment_ctime":1618059535,"is_pvip":false,"replies":[{"id":"104450","content":"åœ¨å¤šçº¿ç¨‹çš„åœºæ™¯é‡Œï¼Œæ˜¯ä¸èƒ½ç®€å•åˆ¤æ–­æŒ‡é’ˆç©ºçš„ï¼Œæœ‰é‚£ä¸ªè‘—åçš„åŒé‡æ£€æŸ¥é”å®šçš„é—®é¢˜ã€‚<br><br>è‡³äºå…·ä½“çš„åœºæ™¯è¿˜çœŸæ˜¯ä¸å¤ªå¥½æ‰¾ï¼Œcall_onceæ˜¯C++ä¸ºæˆ‘ä»¬æä¾›çš„ä¸€ä¸ªæ–¹ä¾¿çš„å·¥å…·ï¼Œå…·ä½“æ€ä¹ˆç”¨ã€ç”¨ä¸ç”¨è¿˜æ˜¯åœ¨äºæˆ‘ä»¬è‡ªå·±ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1618062527,"ip_address":"","comment_id":287632,"utype":1}],"discussion_count":3,"race_medal":0,"score":"5913026831","product_id":100051801,"comment_content":"è€å¸ˆ,è¿™é‡Œæœ‰ä¸€ä¸ªé—®é¢˜,æ—¢ç„¶ä¸æƒ³è®©å­çº¿ç¨‹é‡å¤è°ƒç”¨åˆå§‹åŒ–å‡½æ•°,åº”è¯¥å¯ä»¥åœ¨å­çº¿ç¨‹åˆ›å»ºä¹‹å‰è°ƒç”¨ä¸€æ¬¡åˆå§‹åŒ–å‡½æ•°,ä¸ºä½•è¿˜è¦è®¾è®¡call_once()å‡½æ•°å‘¢?æˆ‘æœäº†ä¸‹call_onceçš„ç”¨æ³•,ç½‘ä¸Šå¤§å¤šç»™çš„æ˜¯ç®€å•çš„æ‰“å°,å¤æ‚ä¸€äº›çš„æœ‰å•ä¾‹æ¨¡å¼çš„ç”¨æ³•,ä½†å•ä¾‹æ¨¡å¼å®Œå…¨å¯ä»¥é€šè¿‡åˆ¤æ–­m_pSingletonæ˜¯å¦ä¸ºç©ºçš„æ–¹æ³•æ¥åš.æ‰€ä»¥å°±æ›´åŠ æƒ³è¦çŸ¥é“çœŸå®æƒ…å†µä¸‹ä½¿ç”¨çš„åœºæ™¯.æ‰€ä»¥æƒ³è®©è€å¸ˆç»™å‡ºä¸€ä¸ªåœºæ™¯,æˆ–è€…ç»™ä¸€ä¸ªé“¾æ¥.è°¢è°¢è€å¸ˆ.","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518373,"discussion_content":"åœ¨å¤šçº¿ç¨‹çš„åœºæ™¯é‡Œï¼Œæ˜¯ä¸èƒ½ç®€å•åˆ¤æ–­æŒ‡é’ˆç©ºçš„ï¼Œæœ‰é‚£ä¸ªè‘—åçš„åŒé‡æ£€æŸ¥é”å®šçš„é—®é¢˜ã€‚\n\nè‡³äºå…·ä½“çš„åœºæ™¯è¿˜çœŸæ˜¯ä¸å¤ªå¥½æ‰¾ï¼Œcall_onceæ˜¯C++ä¸ºæˆ‘ä»¬æä¾›çš„ä¸€ä¸ªæ–¹ä¾¿çš„å·¥å…·ï¼Œå…·ä½“æ€ä¹ˆç”¨ã€ç”¨ä¸ç”¨è¿˜æ˜¯åœ¨äºæˆ‘ä»¬è‡ªå·±ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618062527,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1304195,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKtlEYuHnR8VdRkNPcmkIqTM9DKahpcpicDdBvcmBWMIAAhBrd0QNWvl09slqrzB5TibryVcIfPmb7Q/132","nickname":"raisecomer","note":"","ucode":"32EA488E46471F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":379453,"discussion_content":"å¦‚æœåˆå§‹åŒ–å‡½æ•°æ˜¯åœ¨å­çº¿ç¨‹æ»¡è¶³æŸç§æ¡ä»¶æ—¶æ‰è¿›è¡Œè°ƒç”¨ï¼Œè‹¥ä¸éœ€è¦å¯èƒ½å°±ä¸ä¼šè°ƒç”¨äº†ã€‚ä½†æ˜¯ï¼Œå¦‚æœåœ¨å­çº¿ç¨‹åˆ›å»ºä¹‹å‰è°ƒç”¨ä¸€æ¬¡åˆå§‹åŒ–å‡½æ•°ï¼Œé‚£å°±æ˜¯ä¸ç®¡éœ€ä¸éœ€è¦ï¼Œéƒ½è¦æ— æ¡ä»¶çš„è°ƒç”¨äº†ï¼Œä¸‡ä¸€å­çº¿ç¨‹ç”¨ä¸ç€å‘¢ï¼Œä¸æµªè´¹èµ„æºå—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623913203,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1165201,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ7mAt63VrbLZPHpeZxSc4IlBYswQSnaAB5wGePaGFDehgiaNfIxI1SJ5yIHIlmVk8hsw0RaoaSCPA/132","nickname":"Stephen","note":"","ucode":"0D49223E6CB7B1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":366444,"discussion_content":"å¥½çš„ï¼Œè°¢è°¢è€å¸ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618063645,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":225986,"user_name":"robonix","can_delete":false,"product_type":"c1","uid":1212323,"ip_address":"","ucode":"866EC82EDA455B","user_header":"https://static001.geekbang.org/account/avatar/00/12/7f/a3/23540579.jpg","comment_is_top":false,"comment_ctime":1591924701,"is_pvip":false,"replies":[{"id":"83257","content":"ä¸æ˜¯ï¼Œè¿™ä¸ªæ˜¯å…¸å‹çš„reader-writeré—®é¢˜äº†ï¼Œå†™æ“ä½œå¯èƒ½ä¼šå˜åŠ¨å®¹å™¨çš„å¤§å°ã€å…ƒç´ å†…å®¹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1591928874,"ip_address":"","comment_id":225986,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5886891997","product_id":100051801,"comment_content":"è€å¸ˆï¼Œå¦‚æœä¸€ä¸ªçº¿ç¨‹åœ¨å†™å®¹å™¨ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹å¯¹å®¹å™¨è°ƒç”¨åªè¯»ç®—æ³•ä¹Ÿæ€»æ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":498070,"discussion_content":"ä¸æ˜¯ï¼Œè¿™ä¸ªæ˜¯å…¸å‹çš„reader-writeré—®é¢˜äº†ï¼Œå†™æ“ä½œå¯èƒ½ä¼šå˜åŠ¨å®¹å™¨çš„å¤§å°ã€å…ƒç´ å†…å®¹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591928874,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":224519,"user_name":"lckfaæé’Š","can_delete":false,"product_type":"c1","uid":1356899,"ip_address":"","ucode":"AD13D205104AA6","user_header":"https://static001.geekbang.org/account/avatar/00/14/b4/63/84960032.jpg","comment_is_top":false,"comment_ctime":1591427822,"is_pvip":false,"replies":[{"id":"82664","content":"<br>1.threadçš„æ¦‚å¿µå·²ç»è¢«å¤§å¤šæ•°äººç†ŸçŸ¥äº†ï¼Œè€Œasync()ç”¨çš„æ¯”è¾ƒå°‘ï¼Œæ‰€ä»¥æˆ‘æƒ³è®©å¤§å®¶å¤šäº†è§£å®ƒï¼Œè®©å®ƒåœ¨åˆé€‚çš„åœ°æ–¹å»æ›¿ä»£threadï¼Œç®€åŒ–å¤šçº¿ç¨‹ç¼–ç¨‹ã€‚<br><br>å½“ç„¶äº†ï¼Œaysnc()ä¹Ÿæ˜¯ä¸å¯èƒ½å®Œå…¨æ›¿ä»£threadï¼Œå„æœ‰ä¼˜ç¼ºç‚¹å§ã€‚<br><br>2.node.jsé‡Œé¢ç”¨çš„æ˜¯epollï¼Œè·Ÿçº¿ç¨‹æ²¡å•¥å…³ç³»ï¼Œç­‰åˆ°C++20ã€23æŠŠnetworkingå’Œåç¨‹å¼„å®Œå–„äº†ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨C++è½»æ¾å†™å‡ºé«˜æ•ˆçš„å¹¶å‘ä»£ç ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1591446675,"ip_address":"","comment_id":224519,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5886395118","product_id":100051801,"comment_content":"çº¿ç¨‹ å¥½å¼€ï¼Œä¸å¥½å…³ï¼ŒWindowsä¸‹æœ‰ç›´æ¥å›æ”¶çº¿ç¨‹å¥æŸ„å¼ºè¡Œå…³é—­çº¿ç¨‹çš„apiï¼Œä½†æ˜¯å¾ˆæ˜æ˜¾ï¼Œè¿™ä¸æ˜¯ä»€ä¹ˆå¥½çš„å®è·µã€‚çº¿ç¨‹æœ€å¥½çš„å…³é—­æ–¹å¼ æ˜¯è®©å®ƒè‡ªç„¶æ¶ˆäº¡ã€‚<br>å¯¹äºæŸäº›åœºæ™¯æˆ‘ä»¬éœ€è¦ä½¿ç”¨å®ˆæŠ¤çº¿ç¨‹æˆ–è€…ç›‘æ§çº¿ç¨‹ï¼Œé‡Œé¢è·‘ç€è¦ä¸€ç›´å¾ªç¯æ‰§è¡Œçš„ä»»åŠ¡ï¼Œé‚£ä¹ˆè¿™ä¸ªä»»åŠ¡æ€ä¹ˆåœæ­¢å°±æ˜¯ä¸ªå¤§é—®é¢˜ã€‚å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªuiçº¿ç¨‹ï¼Œé‡Œé¢æœ‰äº›æŒ‡é’ˆï¼Œè€Œè¿™äº›æŒ‡é’ˆè¢«å®ˆæŠ¤çº¿ç¨‹é‡Œçš„æ— é™å¾ªç¯ä»»åŠ¡ä½¿ç”¨ï¼Œå½“UIçº¿ç¨‹è¢«å…³é—­ï¼Œè¿™äº›æŒ‡é’ˆè¢«UIçº¿ç¨‹å›æ”¶ï¼Œè€Œå®ˆæŠ¤çº¿ç¨‹è¿˜åœ¨ä½¿ç”¨è¿™äº›æŒ‡é’ˆçš„è¯ï¼Œç¨‹åºå°±è¡¨ç°åœ¨ç”¨æˆ·å…³é—­æ—¶å´©æºƒäº†ã€‚<br>å¯¹äºè¿™ç§é—®é¢˜ï¼Œç¬¬ä¸€å±‚ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨eventä¹‹ç±»çš„æ–¹å¼è¿›è¡Œçº¿ç¨‹ä¹‹é—´çš„é€šä¿¡ï¼ˆåŒæ­¥ï¼‰ï¼Œåœ¨UIçº¿ç¨‹å…³é—­å‰é€šçŸ¥å®ˆæŠ¤çº¿ç¨‹å…ˆå…³é—­ï¼Œæ‰€ä»¥å¾ªç¯çš„åœæ­¢æ¡ä»¶ï¼ˆä¹‹ä¸€ï¼‰å°±æ˜¯æ”¶åˆ°ç”±UIçº¿ç¨‹å…³é—­æ—¶å‘å‡ºçš„eventã€‚ç¬¬äºŒå±‚ï¼Œå®ˆæŠ¤çº¿ç¨‹å·²ç»è¿è¡Œåˆ°å¾ªç¯ä½“é‡Œäº†ï¼Œæ­¤æ—¶å¹¶ä¸ä¼šæ£€æŸ¥eventï¼Œè¿˜æ˜¯å¯èƒ½æ“ä½œä¸€ä¸ªå·²ç»è¢«UIçº¿ç¨‹å›æ”¶çš„æŒ‡é’ˆï¼Œæˆ‘æƒ³åˆ°çš„è§£å†³æ€è·¯å°±æ˜¯è¦UIçº¿ç¨‹çš„å…³é—­ä¹Ÿä¸èƒ½ä»»æ€§ï¼Œå¿…é¡»ç­‰å®ˆæŠ¤çº¿ç¨‹è‡ªç„¶æ¶ˆäº¡åæ‰èƒ½å›æ”¶æŒ‡é’ˆèµ„æºã€‚ç¬¬ä¸‰å±‚ï¼Œå¹²è„†ä¸åœ¨å®ˆæŠ¤çº¿ç¨‹é‡Œæ“ä½œUIçº¿ç¨‹é‡Œçš„æŒ‡é’ˆï¼ŒæŠŠç¨‹åºå†è®¾è®¡ä¸‹ï¼Œè‚¯å®šæœ‰æ›´å¥½çš„è§£å†³æ–¹æ¡ˆã€‚<br><br>å…³äºasync å’Œthreadï¼Œæˆ‘ä¸ªäººè¿˜æ˜¯ä½¿ç”¨threadå±…å¤šï¼Œå½“ç„¶äº†ï¼Œasyncæ˜¯threadçš„ä¸Šå±‚å°è£…ï¼Œå¥½å¤„æ˜¯ï¼Œä½¿ç”¨èµ·æ¥æ›´è‡ªç„¶ï¼Œè€Œä¸”ï¼Œçº¿ç¨‹çš„è¿”å›å€¼æ¥æ”¶èµ·æ¥ä¹Ÿæ–¹ä¾¿ï¼Œå¦‚æœä½¿ç”¨threadï¼Œè¦æƒ³è·å¾—ä»»åŠ¡è¿”å›å€¼ï¼Œå‘ƒ....ã€‚ä½†æ˜¯ï¼Œç¼ºç‚¹ä¹Ÿæ˜¯å­˜åœ¨çš„ï¼Œasyncå¹¶ä¸æ˜¯å¾ˆå¥½ç”¨ï¼Œé¦–å…ˆasyncæ˜¯å®šä¹‰åœ¨futureä¸­çš„ï¼Œä½¿ç”¨è€…éœ€è¦äº†è§£è¯¸å¦‚future ï¼Œpromise ï¼Œå¯åŠ¨å‚æ•°ç­‰æ¦‚å¿µï¼Œä¸ç„¶ä¼šæœ‰ä¸€äº›è¯¯ç”¨ã€‚å¦å¤–ï¼Œä½œä¸ºC++ç¨‹åºå‘˜ï¼Œæ€»è¿˜æ˜¯æƒ³ç†è§£å¾—æ›´åº•å±‚äº›çš„ï¼Œçº¿ç¨‹ä½ å¸®æˆ‘ç”¨æ ‡å‡†åº“threadå°è£…äº†ï¼Œé‚£ä¹ˆç°åœ¨å¼‚æ­¥æ“ä½œè¿™ç§å°äº‹ï¼Œæˆ‘å¾—è‡ªå·±æ¥ğŸ˜€ã€‚å“ˆå“ˆï¼Œåé¢˜äº†ï¼Œå…¶å®ç†æ€§çš„è®²ï¼Œç°ä»£C++æ—©å°±èµ°å‡ºäº†é“çš„æ£è‚˜ï¼Œè€Œè¿½æ±‚æ›´å¤šæœ¯çš„å†…åœ¨äº†ï¼›æ ‡å‡†åº“è‚¯å®šä¼šè¶Šæ¥è¶Šåºå¤§ï¼Œæ›´é«˜å±‚æ¬¡çš„å°è£…ï¼Œæ›´å¿«çš„å¼€å‘æ•ˆç‡æ—©å°±æ˜¯å¤§åŠ¿æ‰€è¶‹ï¼Œä¸ç„¶ï¼Œä¸ºå•¥å•çº¿ç¨‹çš„nodejsèƒ½æŠŠå¼‚æ­¥å›è°ƒç©çš„é£ç”Ÿæ°´èµ·ï¼Œè®©å¤§ä¼™è¶‹ä¹‹è‹¥é¹œå‘¢ï¼Œå—¯ï¼Œè¯´è¿œäº†ã€‚<br>","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497507,"discussion_content":"\n1.threadçš„æ¦‚å¿µå·²ç»è¢«å¤§å¤šæ•°äººç†ŸçŸ¥äº†ï¼Œè€Œasync()ç”¨çš„æ¯”è¾ƒå°‘ï¼Œæ‰€ä»¥æˆ‘æƒ³è®©å¤§å®¶å¤šäº†è§£å®ƒï¼Œè®©å®ƒåœ¨åˆé€‚çš„åœ°æ–¹å»æ›¿ä»£threadï¼Œç®€åŒ–å¤šçº¿ç¨‹ç¼–ç¨‹ã€‚\n\nå½“ç„¶äº†ï¼Œaysnc()ä¹Ÿæ˜¯ä¸å¯èƒ½å®Œå…¨æ›¿ä»£threadï¼Œå„æœ‰ä¼˜ç¼ºç‚¹å§ã€‚\n\n2.node.jsé‡Œé¢ç”¨çš„æ˜¯epollï¼Œè·Ÿçº¿ç¨‹æ²¡å•¥å…³ç³»ï¼Œç­‰åˆ°C++20ã€23æŠŠnetworkingå’Œåç¨‹å¼„å®Œå–„äº†ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨C++è½»æ¾å†™å‡ºé«˜æ•ˆçš„å¹¶å‘ä»£ç ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591446675,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1054598,"avatar":"https://static001.geekbang.org/account/avatar/00/10/17/86/416f772e.jpg","nickname":"shelldon","note":"","ucode":"BF8FE102D6DD1B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":282587,"discussion_content":"mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592021835,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":340842,"user_name":"Geek_69a925","can_delete":false,"product_type":"c1","uid":1711449,"ip_address":"","ucode":"E433AEC0659C33","user_header":"","comment_is_top":false,"comment_ctime":1649173253,"is_pvip":false,"replies":[{"id":"124647","content":"thread_localå°±æ˜¯ä¸staticä¸€æ ·çš„å˜é‡å£°æ˜æ–¹å¼ï¼Œæ‰€ä»¥æ²¡æœ‰é™åˆ¶ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1181974","ctime":1649235763,"ip_address":"","comment_id":340842,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1649173253","product_id":100051801,"comment_content":"è€å¸ˆï¼Œè¯·é—®ä¸€ä¸‹c++ä¸­thread_localå˜é‡çš„å­˜å‚¨ç©ºé—´æœ‰æ²¡æœ‰é™åˆ¶å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":560236,"discussion_content":"thread_localå°±æ˜¯ä¸staticä¸€æ ·çš„å˜é‡å£°æ˜æ–¹å¼ï¼Œæ‰€ä»¥æ²¡æœ‰é™åˆ¶ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649235763,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":337145,"user_name":"æ³¢æ³¢","can_delete":false,"product_type":"c1","uid":1701941,"ip_address":"","ucode":"7DE2935E0E786B","user_header":"https://static001.geekbang.org/account/avatar/00/19/f8/35/b6dd4ab5.jpg","comment_is_top":false,"comment_ctime":1646646341,"is_pvip":false,"replies":[{"id":"123259","content":"è‡ªä»æœ‰äº†std::asyncæˆ‘å°±åŸºæœ¬ä¸ç”¨boost::asyncäº†ï¼ŒæŠ±æ­‰å•Šã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1181974","ctime":1646726592,"ip_address":"","comment_id":337145,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1646646341","product_id":100051801,"comment_content":"ä¹‹å‰ä½¿ç”¨è¿‡Boostçš„async, ä»Šå¤©æŒ‰è€å¸ˆæ‚¨ç…§æ•™ç¨‹ä½¿ç”¨äº†ä¸€ä¸‹std::async, å‘ç°ä¸¤è€…æœ‰åŒºåˆ«, æ¯”å¦‚è¿ç€å†™3è¡Œasyncè°ƒç”¨, boost.asyncä¼šæ–°å¼€3ä¸ªçº¿ç¨‹, è€Œ3ä¸ªstd.asyncæ˜¯å…±ç”¨ä¸€ä¸ªçº¿ç¨‹. è¿™å¯¼è‡´ç”¨std.asyncæµ‹è¯•thread_localæ—¶è¢«å‘äº†\\å“­\\å“­","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":555051,"discussion_content":"è‡ªä»æœ‰äº†std::asyncæˆ‘å°±åŸºæœ¬ä¸ç”¨boost::asyncäº†ï¼ŒæŠ±æ­‰å•Šã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646726592,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":328511,"user_name":"Geek_Chyq","can_delete":false,"product_type":"c1","uid":2103390,"ip_address":"","ucode":"216E124170DB8F","user_header":"https://static001.geekbang.org/account/avatar/00/20/18/5e/139a8403.jpg","comment_is_top":false,"comment_ctime":1640759088,"is_pvip":false,"replies":[{"id":"119719","content":"ç¬‘ï¼Œçœ‹æ¥æ˜¯è€æœ‹å‹äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1181974","ctime":1640827343,"ip_address":"","comment_id":328511,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1640759088","product_id":100051801,"comment_content":"ä»Šå¤©åˆåœ¨æ‹œè¯»Boostä¹¦ç±ï¼ŒçŒ›ç„¶å‘è§‰ä½œè€…çš„åå­—å¥½ç†Ÿæ‚‰ã€‚ç»è¿‡å’Œä¹¦ä¸Šæ‰‰é¡µç…§ç‰‡å¤šæ¬¡æ¯”å¯¹ï¼ˆå¤§ä½¬å®šå¾‹ï¼Œå¤´å‘å˜å°‘äº†è€Œå·²ï¼‰ï¼Œåˆåœ¨è¿™é‡Œåˆé‡è§äº†ã€‚æœç„¶ä¸ä¼šéª—äººï¼Œè®¤å®šçš„ï¼Œåˆ°å“ªéƒ½å¯ä»¥è®¤å®šã€‚ç½—è€å¸ˆå¥½ã€‚å“ˆ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":542676,"discussion_content":"ç¬‘ï¼Œçœ‹æ¥æ˜¯è€æœ‹å‹äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640827343,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":285178,"user_name":"å›¾ä¸ªå•¥å‘¢","can_delete":false,"product_type":"c1","uid":1134984,"ip_address":"","ucode":"BEE1F1477056A2","user_header":"https://static001.geekbang.org/account/avatar/00/11/51/88/232fe847.jpg","comment_is_top":false,"comment_ctime":1616658223,"is_pvip":false,"replies":[{"id":"103525","content":"åº”è¯¥æ˜¯æ²¡æœ‰é“¾æ¥pthreadåº“å§ï¼ŒåŠ ä¸Š-pthreadè¯•è¯•ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1616713049,"ip_address":"","comment_id":285178,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1616658223","product_id":100051801,"comment_content":"è€å¸ˆï¼Œå¥½ï¼Œlinuxç³»ç»Ÿè¿è¡Œcall_onceçš„ä¾‹å­çš„æ—¶å€™ï¼Œå‡ºç°äº†undefined reference to `pthread_create&#39;ã€‚è¿™ä¸ªè¦æ€ä¹ˆè§£å†³ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":517608,"discussion_content":"åº”è¯¥æ˜¯æ²¡æœ‰é“¾æ¥pthreadåº“å§ï¼ŒåŠ ä¸Š-pthreadè¯•è¯•ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616713049,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":281822,"user_name":"æœ¨ç“œ","can_delete":false,"product_type":"c1","uid":1201914,"ip_address":"","ucode":"B24A54DEC7DB15","user_header":"https://static001.geekbang.org/account/avatar/00/12/56/fa/8ba604a6.jpg","comment_is_top":false,"comment_ctime":1614914247,"is_pvip":false,"replies":[{"id":"102318","content":"å¥½åƒæœ‰æœ¬c++ concurrent in actionå§ï¼Œæœ‰åŒå­¦ç•™è¨€æ¨èè¿‡ï¼Œç½‘ä¸Šä¹Ÿæœ‰èµ„æºã€‚<br><br>ç³»ç»Ÿå­¦ä¹ å°±æ˜¯å¤šçœ‹ä¹¦å¤šå®è·µã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1614933906,"ip_address":"","comment_id":281822,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1614914247","product_id":100051801,"comment_content":"è€å¸ˆï¼Œè¯·é—®æ€ä¹ˆç³»ç»Ÿå­¦ä¹ å¤šçº¿ç¨‹ç¼–ç¨‹å‘¢ï¼Ÿæœ‰æ•™ç¨‹æˆ–è€…ä¹¦ç±æ¨èå—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":516529,"discussion_content":"å¥½åƒæœ‰æœ¬c++ concurrent in actionå§ï¼Œæœ‰åŒå­¦ç•™è¨€æ¨èè¿‡ï¼Œç½‘ä¸Šä¹Ÿæœ‰èµ„æºã€‚\n\nç³»ç»Ÿå­¦ä¹ å°±æ˜¯å¤šçœ‹ä¹¦å¤šå®è·µã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614933906,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1201914,"avatar":"https://static001.geekbang.org/account/avatar/00/12/56/fa/8ba604a6.jpg","nickname":"æœ¨ç“œ","note":"","ucode":"B24A54DEC7DB15","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":352979,"discussion_content":"å¥½çš„è€å¸ˆï¼ŒåˆšæŠŠVSè£…å¥½äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614934107,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":259474,"user_name":"å‡ºå–çµé­‚çš„æ•™ç»ƒKerry","can_delete":false,"product_type":"c1","uid":1807943,"ip_address":"","ucode":"8C64517DA556FE","user_header":"https://static001.geekbang.org/account/avatar/00/1b/96/47/93838ff7.jpg","comment_is_top":false,"comment_ctime":1604734679,"is_pvip":true,"replies":[{"id":"94320","content":"æˆ‘æ„Ÿè§‰C++æ ‡å‡†åº“åœ¨å¹¶å‘æ–¹é¢åšçš„è¿˜æ˜¯ä¸å¤ªå¥½ï¼Œåªæœ‰åŸºæœ¬çš„çº¿ç¨‹æ”¯æŒï¼Œæ²¡æœ‰å¤§å®¶å…¬è®¤çš„ä¸Šå±‚ç»„ä»¶ã€æ¡†æ¶ï¼Œæ‰€ä»¥å¹¶å‘åŸºæœ¬ä¸Šéƒ½æ˜¯è‡ªå·±é€ è½®å­ï¼Œä¸åƒå…¶ä»–è¯­è¨€ï¼Œæ¡†æ¶ç”¨çš„äººå¤šè‡ªç„¶å°±ä¼šæœ‰ä¹¦ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1604746726,"ip_address":"","comment_id":259474,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1604734679","product_id":100051801,"comment_content":"è€å¸ˆä½ å¥½ï¼Œc++å¹¶å‘è¿™ä¸€å—æœ‰ä»€ä¹ˆä¹¦æ¨èå—ï¼Ÿå¸‚åœºä¸Šå…¶ä»–è¯­è¨€å¹¶å‘ç¼–ç¨‹æŒºå¤šçš„ï¼Œå”¯ç‹¬c++å°±ä¸€æœ¬ã€‚","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":508943,"discussion_content":"æˆ‘æ„Ÿè§‰C++æ ‡å‡†åº“åœ¨å¹¶å‘æ–¹é¢åšçš„è¿˜æ˜¯ä¸å¤ªå¥½ï¼Œåªæœ‰åŸºæœ¬çš„çº¿ç¨‹æ”¯æŒï¼Œæ²¡æœ‰å¤§å®¶å…¬è®¤çš„ä¸Šå±‚ç»„ä»¶ã€æ¡†æ¶ï¼Œæ‰€ä»¥å¹¶å‘åŸºæœ¬ä¸Šéƒ½æ˜¯è‡ªå·±é€ è½®å­ï¼Œä¸åƒå…¶ä»–è¯­è¨€ï¼Œæ¡†æ¶ç”¨çš„äººå¤šè‡ªç„¶å°±ä¼šæœ‰ä¹¦ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604746726,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":249331,"user_name":"æ…ç¬‘æ™æ™","can_delete":false,"product_type":"c1","uid":1237618,"ip_address":"","ucode":"DB9847B1C393FF","user_header":"https://static001.geekbang.org/account/avatar/00/12/e2/72/9ae3e5c8.jpg","comment_is_top":false,"comment_ctime":1600595149,"is_pvip":false,"replies":[{"id":"91480","content":"å¯ä»¥çœ‹ä¸€ä¸‹æ ‡å‡†ï¼Œé‡Œé¢åˆ é™¤äº†èµ‹å€¼æ„é€ å‡½æ•°ï¼Œæ‰€ä»¥æœ€å¥½ä¸è¦è¿™ä¹ˆå†™ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1600662846,"ip_address":"","comment_id":249331,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1600595149","product_id":100051801,"comment_content":"åŸå­å˜é‡å¯ä»¥ç”¨=åˆå§‹åŒ–ï¼Œå¦‚ï¼Œatomic_int x = {0};  &#47;&#47; æ­£ç¡®<br>ä¸è¿‡è¿™åº”è¯¥æ˜¯ç›´æ¥è°ƒç”¨äº†èµ‹å€¼æ„é€ å‡½æ•°å§ã€‚","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":505901,"discussion_content":"å¯ä»¥çœ‹ä¸€ä¸‹æ ‡å‡†ï¼Œé‡Œé¢åˆ é™¤äº†èµ‹å€¼æ„é€ å‡½æ•°ï¼Œæ‰€ä»¥æœ€å¥½ä¸è¦è¿™ä¹ˆå†™ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600662846,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":245492,"user_name":"å®‡å¤©é£","can_delete":false,"product_type":"c1","uid":1126444,"ip_address":"","ucode":"3FB37D1E2DAA61","user_header":"https://static001.geekbang.org/account/avatar/00/11/30/2c/06375913.jpg","comment_is_top":false,"comment_ctime":1598959309,"is_pvip":true,"replies":[{"id":"90308","content":"async()éœ€è¦é…åˆfutureæ¥ä½¿ç”¨ï¼Œå±è”½äº†çº¿ç¨‹æ¦‚å¿µï¼Œç”¨èµ·æ¥å°±æ›´ç®€å•ä¸€äº›ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1599008661,"ip_address":"","comment_id":245492,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1598959309","product_id":100051801,"comment_content":"ä½ åœ¨å¤šçº¿ç¨‹ç¼–ç¨‹çš„æ—¶å€™é‡åˆ°è¿‡å“ªäº›â€œå‘â€ï¼Œæœ‰ä»€ä¹ˆç»éªŒæ•™è®­ï¼Ÿ<br>1.å¤šçº¿ç¨‹å…±äº«æ•°æ®è„äº†<br>2.é€šè¿‡å¹¶è¡Œçº¿ç¨‹è¯»å†™æ•°æ®æ”¹ä¸ºå¹¶è¡Œçº¿ç¨‹ï¼Œä¸²è¡Œåˆå¹¶æ•°æ®<br>ä½ è§‰å¾— async() æ¯”ç›´æ¥ç”¨ thread å¯åŠ¨çº¿ç¨‹å¥½åœ¨å“ªé‡Œï¼Ÿ<br>1.æ²¡æ€ä¹ˆç”¨è¿‡ï¼Œ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504898,"discussion_content":"async()éœ€è¦é…åˆfutureæ¥ä½¿ç”¨ï¼Œå±è”½äº†çº¿ç¨‹æ¦‚å¿µï¼Œç”¨èµ·æ¥å°±æ›´ç®€å•ä¸€äº›ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599008661,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":239620,"user_name":"å‡ºå–çµé­‚çš„æ•™ç»ƒKerry","can_delete":false,"product_type":"c1","uid":1807943,"ip_address":"","ucode":"8C64517DA556FE","user_header":"https://static001.geekbang.org/account/avatar/00/1b/96/47/93838ff7.jpg","comment_is_top":false,"comment_ctime":1596598864,"is_pvip":true,"replies":[{"id":"88504","content":"æˆ‘è§‰å¾—å¯ä»¥å‚è€ƒä¸€ä¸‹Nginxçš„å¤šçº¿ç¨‹ç”¨æ³•ï¼Œç»™çº¿ç¨‹æŠ•é€’ä¸€ä¸ªexit taskï¼Œè¿™æ ·çº¿ç¨‹å°±ä¼šé€šè¿‡æ¡ä»¶å˜é‡å¾—åˆ°taskï¼Œç„¶åå®‰å…¨ç»“æŸã€‚<br><br>å…·ä½“çš„ä»£ç æ˜¯ngx_thread_pool.cï¼Œngx_thread_pool_destroy()","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1596604879,"ip_address":"","comment_id":239620,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1596598864","product_id":100051801,"comment_content":"è€å¸ˆï¼Œä½ å¥½ï¼Œå…³äºæ¡ä»¶å˜é‡åº”è¯¥å¦‚ä½•é€€å‡ºå‘¢ï¼Ÿ<br>æ¯”å¦‚è¯´:<br>void f()<br>{<br>    while(m_isRun)<br>    { <br>       std::unique_lock&lt;std::mutex&gt;       dataLock(m_mtx);<br>       while(m_list.empty())<br>       {<br>           m_cond. wait(dataLock);<br>        }<br>        â€¦â€¦<br>    }<br>}<br>çº¿ç¨‹å‡½æ•°å¦‚ä¸Šé¢æ‰€å†™ï¼Œå¦‚æœææ„ä¸­è°ƒç”¨join()æ ¹æœ¬å¬ä¸äº†ï¼Œå¦‚æœè°ƒç”¨deach()æˆ‘å‘ç°åœ¨vs12ä¸Šæ˜¯æœ‰ä¸€äº›é—®é¢˜ï¼Ÿä¸çŸ¥é“å¦‚ä½•é€€å‡ºã€‚","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":503162,"discussion_content":"æˆ‘è§‰å¾—å¯ä»¥å‚è€ƒä¸€ä¸‹Nginxçš„å¤šçº¿ç¨‹ç”¨æ³•ï¼Œç»™çº¿ç¨‹æŠ•é€’ä¸€ä¸ªexit taskï¼Œè¿™æ ·çº¿ç¨‹å°±ä¼šé€šè¿‡æ¡ä»¶å˜é‡å¾—åˆ°taskï¼Œç„¶åå®‰å…¨ç»“æŸã€‚\n\nå…·ä½“çš„ä»£ç æ˜¯ngx_thread_pool.cï¼Œngx_thread_pool_destroy()","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596604879,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":239061,"user_name":"èŒƒé—²","can_delete":false,"product_type":"c1","uid":1073125,"ip_address":"","ucode":"F21FD7DF6BA53C","user_header":"https://static001.geekbang.org/account/avatar/00/10/5f/e5/54325854.jpg","comment_is_top":false,"comment_ctime":1596424618,"is_pvip":false,"replies":[{"id":"88298","content":"æ¶‰åŠåˆ°å¤šä¸ªä»»åŠ¡çš„åè°ƒã€ç­‰å¾…ç»“æœï¼Œè¿™å¿…ç„¶è¦é˜»å¡ï¼Œè¿™ä¸ªæ˜¾ç„¶æ˜¯ä¸å¤šçº¿ç¨‹æ— å…³çš„ã€‚<br><br>å¼‚æ­¥ä¸»è¦æ˜¯ä¸ºäº†é¿å…ä¸å¿…è¦çš„é˜»å¡ï¼Œåœ¨ç­‰å¾…çš„æ—¶å€™å¯ä»¥å»åšåˆ«çš„äº‹æƒ…ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1596432060,"ip_address":"","comment_id":239061,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1596424618","product_id":100051801,"comment_content":"å¤šçº¿ç¨‹å®ç°å¼‚æ­¥çš„è¯ï¼Œä¾æ—§æœ‰é—®é¢˜ã€‚å‡è®¾A B C Dçº¿ç¨‹ä½†æ˜¯Açš„è¾“å‡ºæ˜¯Bçš„è¾“å…¥ï¼Œä»¥æ­¤ç±»æ¨ã€‚è¿™ä¸ªæ—¶å€™æ‰€è°“çš„å¼‚æ­¥å¤„ç†ï¼Œåªä¸è¿‡æ˜¯çº¿ç¨‹åˆ†åˆ«å¤„ç†å„è‡ªçš„æµç¨‹ï¼Œä½†æ˜¯ç°åœ¨çº¿ç¨‹é—´çš„ç»“æœç­‰å¾…ä»æ—§æ˜¯åŒæ­¥é˜»å¡çš„ã€‚asyncæˆ‘ç†è§£å°±æ˜¯å®ç°çš„è¿™ä¸ªã€‚","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":502961,"discussion_content":"æ¶‰åŠåˆ°å¤šä¸ªä»»åŠ¡çš„åè°ƒã€ç­‰å¾…ç»“æœï¼Œè¿™å¿…ç„¶è¦é˜»å¡ï¼Œè¿™ä¸ªæ˜¾ç„¶æ˜¯ä¸å¤šçº¿ç¨‹æ— å…³çš„ã€‚\n\nå¼‚æ­¥ä¸»è¦æ˜¯ä¸ºäº†é¿å…ä¸å¿…è¦çš„é˜»å¡ï¼Œåœ¨ç­‰å¾…çš„æ—¶å€™å¯ä»¥å»åšåˆ«çš„äº‹æƒ…ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596432060,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":234679,"user_name":"æ‹“","can_delete":false,"product_type":"c1","uid":1757894,"ip_address":"","ucode":"94B81A10FACDCC","user_header":"https://static001.geekbang.org/account/avatar/00/1a/d2/c6/964432e4.jpg","comment_is_top":false,"comment_ctime":1594772732,"is_pvip":false,"replies":[{"id":"86567","content":"å¯ä»¥çœ‹GitHubï¼Œä¸Šé¢æœ‰ä¸€äº›èµ„æ–™é“¾æ¥ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1594775754,"ip_address":"","comment_id":234679,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1594772732","product_id":100051801,"comment_content":"chronoï¼Œæ‚¨å¥½ï¼Œå¾ˆå—æ•™ã€‚<br>èƒ½å…±äº«ä¸€äº›èµ„æ–™å‚è€ƒä¸‹å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":501464,"discussion_content":"å¯ä»¥çœ‹GitHubï¼Œä¸Šé¢æœ‰ä¸€äº›èµ„æ–™é“¾æ¥ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594775754,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":233720,"user_name":"è›€ç‰™","can_delete":false,"product_type":"c1","uid":1153349,"ip_address":"","ucode":"F765A67DFEADFD","user_header":"","comment_is_top":false,"comment_ctime":1594413530,"is_pvip":false,"replies":[{"id":"86283","content":"çº¿ç¨‹å¹¶å‘ä¹Ÿæœ‰å¾ˆå¤šæ¨¡å¼ï¼Œæœ‰ä»€ä¹ˆimmutableä»€ä¹ˆçš„ï¼Œä¸è¿‡æˆ‘ç°åœ¨ç”¨çš„ä¸æ˜¯å¾ˆå¤šï¼Œå¸®ä¸ä¸Šä½ ï¼ŒæŠ±æ­‰äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1594430616,"ip_address":"","comment_id":233720,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1594413530","product_id":100051801,"comment_content":"ç½—è€å¸ˆå¥½ï¼Œæˆ‘åœ¨å·¥ä½œä¸­æ€»æ˜¯å¬åŒäº‹ä½¿ç”¨thread modelä¸€è¯ï¼Œè¯·é—®æ˜¯ä¸æ˜¯æœ‰å‡ ä¸ªå¸¸ç”¨çš„çº¿ç¨‹æ¨¡å¼å‘¢ï¼Ÿ æ¯”å¦‚è¯´ï¼šä¸€ç§æ¨¡å¼æ˜¯å¤šä¸ªçº¿ç¨‹éƒ½access common resource, å¦ä¸€ç§æ¨¡å¼æ˜¯å°½é‡è®©å„ä¸ªthreadç‹¬ç«‹ï¼Œå„è‡ªmaintainè‡ªå·±çš„resourceï¼Œç­‰ç­‰ã€‚<br>å¦å¤–å¯ä»¥ç¨å¾®è®²è§£ä¸€ä¸‹strandå’Œexecutorå—ï¼Ÿ<br>ä¸€èˆ¬executorä¼šåˆ©ç”¨çº¿ç¨‹æ± çš„çº¿ç¨‹å—ï¼Ÿ è¿˜æ˜¯è‡ªå·±ä¼šinitializeä¸€ä¸ªçº¿ç¨‹ï¼Ÿ<br>æ„Ÿè°¢å›å¤","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":501141,"discussion_content":"çº¿ç¨‹å¹¶å‘ä¹Ÿæœ‰å¾ˆå¤šæ¨¡å¼ï¼Œæœ‰ä»€ä¹ˆimmutableä»€ä¹ˆçš„ï¼Œä¸è¿‡æˆ‘ç°åœ¨ç”¨çš„ä¸æ˜¯å¾ˆå¤šï¼Œå¸®ä¸ä¸Šä½ ï¼ŒæŠ±æ­‰äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594430616,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":231815,"user_name":"Geek_496123","can_delete":false,"product_type":"c1","uid":1993795,"ip_address":"","ucode":"CC4DC7B00A38DF","user_header":"","comment_is_top":false,"comment_ctime":1593776275,"is_pvip":false,"replies":[{"id":"85619","content":"<br>1.ä¸€ä¸ªæ˜¯è¯­è¨€æ ‡å‡†ï¼Œä¸€ä¸ªæ˜¯å…·ä½“å®ç°ï¼ŒC++é‡Œçš„threadæ˜¯ä¸€ä¸ªè§„æ ¼æè¿°ï¼Œåˆ°å…·ä½“ç¼–è¯‘å™¨ã€æ“ä½œç³»ç»Ÿä¼šæœ‰ä¸åŒçš„å®ç°æ–¹å¼ï¼Œåœ¨è¯­è¨€è¿™å±‚åšäº†å±è”½ã€‚<br>åœ¨Linuxé‡Œå¯ä»¥è®¤ä¸ºthreadåº•å±‚å°±æ˜¯pthread_xxxï¼Œä½†ä¸èƒ½å®Œå…¨ä¿è¯ã€‚<br><br>2.ä½¿ç”¨C++æ ‡å‡†é‡Œçš„threadå°±å¯ä»¥ä¸ç”¨å…³å¿ƒæ“ä½œç³»ç»Ÿçš„å…·ä½“ç»†èŠ‚ï¼Œå¯¹äºè·¨å¹³å°ç¼–ç¨‹éå¸¸æœ‰åˆ©ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1593831289,"ip_address":"","comment_id":231815,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1593776275","product_id":100051801,"comment_content":"C++ä¸­çš„thread å’Œ Cè¯­è¨€ä¸­çš„pthread_createæœ‰ä»€ä¹ˆå…³ç³»æˆ–è€…åŒºåˆ«å—ï¼Ÿè¿˜æœ‰windowsä¸­çš„å¤šçº¿ç¨‹apiï¼Œåˆå­¦è€…ï¼Œè¡¨ç¤ºå„ç§å¤šçº¿ç¨‹ï¼Œå‚»å‚»åˆ†ä¸æ¸…æ¥šã€‚","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":500445,"discussion_content":"\n1.ä¸€ä¸ªæ˜¯è¯­è¨€æ ‡å‡†ï¼Œä¸€ä¸ªæ˜¯å…·ä½“å®ç°ï¼ŒC++é‡Œçš„threadæ˜¯ä¸€ä¸ªè§„æ ¼æè¿°ï¼Œåˆ°å…·ä½“ç¼–è¯‘å™¨ã€æ“ä½œç³»ç»Ÿä¼šæœ‰ä¸åŒçš„å®ç°æ–¹å¼ï¼Œåœ¨è¯­è¨€è¿™å±‚åšäº†å±è”½ã€‚\nåœ¨Linuxé‡Œå¯ä»¥è®¤ä¸ºthreadåº•å±‚å°±æ˜¯pthread_xxxï¼Œä½†ä¸èƒ½å®Œå…¨ä¿è¯ã€‚\n\n2.ä½¿ç”¨C++æ ‡å‡†é‡Œçš„threadå°±å¯ä»¥ä¸ç”¨å…³å¿ƒæ“ä½œç³»ç»Ÿçš„å…·ä½“ç»†èŠ‚ï¼Œå¯¹äºè·¨å¹³å°ç¼–ç¨‹éå¸¸æœ‰åˆ©ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593831289,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":226667,"user_name":"é¥­å°å›¢","can_delete":false,"product_type":"c1","uid":1019783,"ip_address":"","ucode":"46CAF2771EBDC5","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8f/87/c290cbff.jpg","comment_is_top":false,"comment_ctime":1592183489,"is_pvip":false,"replies":[{"id":"83446","content":"æœ‰è¯»å†™é”å¯ä»¥ç”¨ï¼Œè¿™ä¸ªå±äºå¾ˆä¼ ç»Ÿçš„å¤šçº¿ç¨‹å…±äº«é—®é¢˜äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1592184335,"ip_address":"","comment_id":226667,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1592183489","product_id":100051801,"comment_content":"å¤šåº¦å•å†™æ€ä¹ˆå®ç°ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":498326,"discussion_content":"æœ‰è¯»å†™é”å¯ä»¥ç”¨ï¼Œè¿™ä¸ªå±äºå¾ˆä¼ ç»Ÿçš„å¤šçº¿ç¨‹å…±äº«é—®é¢˜äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592184335,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":226508,"user_name":"Simon","can_delete":false,"product_type":"c1","uid":1914504,"ip_address":"","ucode":"A8A2E3E57BD029","user_header":"https://static001.geekbang.org/account/avatar/00/1d/36/88/20b6a6ee.jpg","comment_is_top":false,"comment_ctime":1592125334,"is_pvip":true,"replies":[{"id":"83415","content":"å®˜æ–¹æ ‡å‡†æ–‡æ¡£æ˜¯æœ€æƒå¨çš„å®šä¹‰ï¼Œä¸è¿‡ç¡®å®é˜…è¯»æœ‰éš¾åº¦ã€‚<br><br>å¯ä»¥çœ‹cppreferenceç½‘ç«™ï¼Œæˆ–è€…å»çœ‹gccçš„C++æ”¯æŒé¡µï¼Œçœ‹çœ‹ç¼–è¯‘å™¨å¯¹å„é¡¹æ–°ç‰¹æ€§çš„æè¿°ï¼Œéš¾åº¦ä¼šä½ä¸€ç‚¹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1592144208,"ip_address":"","comment_id":226508,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1592125334","product_id":100051801,"comment_content":"æ€æ ·è·çŸ¥C++çš„æœ€æ–°æ ‡å‡†ï¼Ÿæ˜¯å»çœ‹1000å¤šé¡µçš„æ ‡å‡†æ–‡æ¡£å—ï¼Ÿå¤ªé•¿äº†å§ï¼","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":498269,"discussion_content":"å®˜æ–¹æ ‡å‡†æ–‡æ¡£æ˜¯æœ€æƒå¨çš„å®šä¹‰ï¼Œä¸è¿‡ç¡®å®é˜…è¯»æœ‰éš¾åº¦ã€‚\n\nå¯ä»¥çœ‹cppreferenceç½‘ç«™ï¼Œæˆ–è€…å»çœ‹gccçš„C++æ”¯æŒé¡µï¼Œçœ‹çœ‹ç¼–è¯‘å™¨å¯¹å„é¡¹æ–°ç‰¹æ€§çš„æè¿°ï¼Œéš¾åº¦ä¼šä½ä¸€ç‚¹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592144208,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":224844,"user_name":"ç¦¾æ¡ƒ","can_delete":false,"product_type":"c1","uid":1477855,"ip_address":"","ucode":"9FE85C34A9E9E0","user_header":"https://static001.geekbang.org/account/avatar/00/16/8c/df/77acb793.jpg","comment_is_top":false,"comment_ctime":1591573766,"is_pvip":false,"replies":[{"id":"82759","content":"<br>1.é—®é¢˜å¤ªé«˜ç«¯ï¼Œä¸å¤ªç†è§£context switchæ˜¯ä»€ä¹ˆï¼ŒæŠ±æ­‰ã€‚<br><br>2.åŸå­å˜é‡å¾€ç»†äº†è¯´ä¹Ÿæ˜¯å¾ˆå¤æ‚çš„ï¼Œæœ‰å¥½å‡ ç§å†…å­˜è®¿é—®é¡ºåºè§„å®šï¼Œå¦‚æœæ˜¯æœ€ä¸¥æ ¼çš„memory_order_seq_cstå°±æ˜¯ä½ è¯´çš„é‚£æ ·äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1591578731,"ip_address":"","comment_id":224844,"utype":1}],"discussion_count":4,"race_medal":0,"score":"1591573766","product_id":100051801,"comment_content":"#1<br>è¯·conditional_variableçš„<br>notify,waitè¿™ä¸¤ä¸ªæˆå‘˜å‡½æ•°ï¼Œåœ¨å“ªäº›æƒ…å†µä¸‹ä¼šå¼•èµ·context switch?<br><br>#2<br>è¯·conditional_variableçš„æˆå‘˜å‡½æ•°åœ¨å“ªäº›æƒ…å†µä¸‹ä¼šå¼•èµ·context switch?<br><br>#3<br>ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶åœ¨è¯»å–ä¸€ä¸ªåŸå­å˜é‡ï¼Œå½“ç¬¬ä¸€ä¸ªçº¿ç¨‹æ­£åœ¨è¯»å–è¿‡è¿‡ç¨‹çš„æ—¶å€™ï¼Œç¬¬äºŒä¸ªçº¿ç¨‹åœ¨åšä»€ä¹ˆï¼Ÿbusy-waiting?","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497627,"discussion_content":"\n1.é—®é¢˜å¤ªé«˜ç«¯ï¼Œä¸å¤ªç†è§£context switchæ˜¯ä»€ä¹ˆï¼ŒæŠ±æ­‰ã€‚\n\n2.åŸå­å˜é‡å¾€ç»†äº†è¯´ä¹Ÿæ˜¯å¾ˆå¤æ‚çš„ï¼Œæœ‰å¥½å‡ ç§å†…å­˜è®¿é—®é¡ºåºè§„å®šï¼Œå¦‚æœæ˜¯æœ€ä¸¥æ ¼çš„memory_order_seq_cstå°±æ˜¯ä½ è¯´çš„é‚£æ ·äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591578731,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1048441,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/ff/79/f400c4d1.jpg","nickname":"douge","note":"","ucode":"A6EB1AA3D53516","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":392387,"discussion_content":"Linux ä¸‹Waitå’Œnotifyéƒ½ä¼šcså§ï¼Œæœ€ç»ˆéƒ½ä¼šè°ƒç”¨futexç³»ç»Ÿè°ƒç”¨ã€‚åŸå­æ“ä½œæ—¶ä¸€èˆ¬åªæœ‰ bus lockæˆ–è€…cache invalidateï¼Œç„¶åæ­é…forå¾ªç¯ä¸æ–­å°è¯•æœ‰busy waiting","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630989220,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1258402,"avatar":"https://static001.geekbang.org/account/avatar/00/13/33/a2/6c0ffc15.jpg","nickname":"çš®çš®ä¾ ","note":"","ucode":"04205990C1DE1F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":280712,"discussion_content":"context switchä¸Šä¸‹æ–‡åˆ‡æ¢å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591604584,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1477855,"avatar":"https://static001.geekbang.org/account/avatar/00/16/8c/df/77acb793.jpg","nickname":"ç¦¾æ¡ƒ","note":"","ucode":"9FE85C34A9E9E0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1258402,"avatar":"https://static001.geekbang.org/account/avatar/00/13/33/a2/6c0ffc15.jpg","nickname":"çš®çš®ä¾ ","note":"","ucode":"04205990C1DE1F","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":280828,"discussion_content":"å—¯ï¼Œæ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591617513,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":280712,"ip_address":""},"score":280828,"extra":""}]}]},{"had_liked":false,"id":224731,"user_name":"1coma","can_delete":false,"product_type":"c1","uid":1822536,"ip_address":"","ucode":"89C0B2B89D2FF2","user_header":"https://static001.geekbang.org/account/avatar/00/1b/cf/48/de3caacb.jpg","comment_is_top":false,"comment_ctime":1591523482,"is_pvip":false,"replies":[{"id":"82701","content":"<br>1.è¿™ä¸ªæˆ‘ä¹Ÿè¯´ä¸å¤ªå¥½ï¼Œæˆ‘ä¸€èˆ¬éƒ½ç”¨try-lockï¼Œæ„Ÿè§‰æ¯”è¾ƒå®‰å…¨ï¼Œä¸å®¹æ˜“çŠ¯é”™ã€‚<br><br>2.å¯ä»¥ç”¨æ€§èƒ½åˆ†æå·¥å…·ï¼Œæ¯”å¦‚perfã€systemtapï¼Œåé¢ä¼šè®²ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1591531681,"ip_address":"","comment_id":224731,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1591523482","product_id":100051801,"comment_content":"ç½—è€å¸ˆï¼Œè¯·é—®ï¼š<br>1.é’ˆå¯¹ABBAé”çš„é—®é¢˜ï¼Œtry-lockçš„æ–¹å¼ä¸€å®šæ¯”æ¶ˆé™¤ABBAé”å·®å—ï¼Ÿ<br>2.é’ˆå¯¹å¤šçº¿ç¨‹æœåŠ¡å¡é¡¿ï¼ˆé«˜å¹¶å‘ä¸‹ï¼‰çš„é—®é¢˜ï¼Œé™¤äº†é€šè¿‡æ—¥å¿—æ’æŸ¥ï¼Œæœ‰æ²¡æœ‰ä»€ä¹ˆæŠ€å·§ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497587,"discussion_content":"\n1.è¿™ä¸ªæˆ‘ä¹Ÿè¯´ä¸å¤ªå¥½ï¼Œæˆ‘ä¸€èˆ¬éƒ½ç”¨try-lockï¼Œæ„Ÿè§‰æ¯”è¾ƒå®‰å…¨ï¼Œä¸å®¹æ˜“çŠ¯é”™ã€‚\n\n2.å¯ä»¥ç”¨æ€§èƒ½åˆ†æå·¥å…·ï¼Œæ¯”å¦‚perfã€systemtapï¼Œåé¢ä¼šè®²ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591531681,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":224542,"user_name":"æœ‰å­¦è¯†çš„å…”å­","can_delete":false,"product_type":"c1","uid":1628867,"ip_address":"","ucode":"D1D654B1562FC9","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIicr82CnrdEjibibAvyeKRQHszSzIAqoCWxN0kqC442XcjEae6S9j6NDtKLpg4Da4CUQQeUFUicWqiaDw/132","comment_is_top":false,"comment_ctime":1591435650,"is_pvip":false,"replies":[{"id":"82667","content":"<br>1.äº’æ–¥é”ç”¨èµ·æ¥çœŸçš„æ˜¯æœ‰å¾ˆå¤šè¦æ³¨æ„çš„åœ°æ–¹ï¼Œå¹¶å‘ç¼–ç¨‹å¯¹ç¨‹åºå‘˜çš„æ€ç»´æ˜¯ä¸€å¤§æŒ‘æˆ˜ã€‚<br>è¿™é‡Œæˆ‘è§‰å¾—å¯ä»¥ç”¨é€’å½’é”ï¼Œå°±æ˜¯å¯ä»¥é‡å¤åŠ é”çš„é”ï¼Œå¯ä»¥æŸ¥ä¸€ä¸‹æ ‡å‡†æ–‡æ¡£ã€‚<br><br>2.æˆ‘è§‰å¾—asyncç›¸å½“äºæ˜¯ä¸€ä¸ªå¤–è§‚æ¨¡å¼ï¼Œå±è”½äº†åº•å±‚ç»†èŠ‚ï¼Œæ›´å®¹æ˜“ä½¿ç”¨ï¼Œå³ä½¿ä½ ä¸äº†è§£å¤šçº¿ç¨‹ï¼Œä¹Ÿèƒ½å¤Ÿåˆ©ç”¨çº¿ç¨‹å¼€å‘å‡ºå¹¶å‘ç¨‹åºã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1591446826,"ip_address":"","comment_id":224542,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1591435650","product_id":100051801,"comment_content":"1. æˆ‘é‡åˆ°ä¸€ä¸ªæ¥å£å†…éƒ¨ä½¿ç”¨äº†åŒæ­¥é”çš„åŒæ—¶ï¼Œå†…éƒ¨åµŒå¥—çš„æ¥å£å†ä¸€æ¬¡ä½¿ç”¨äº†è¯¥åŒæ­¥é”ï¼›ä¼šå‡ºç°æ­»é”ï¼›<br>2.é™¤äº†éšè—ç»†èŠ‚å¤–ï¼Œæ–¹ä¾¿å®ç°å’Œå¤„ç†å¼‚æ­¥ä»»åŠ¡ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497516,"discussion_content":"\n1.äº’æ–¥é”ç”¨èµ·æ¥çœŸçš„æ˜¯æœ‰å¾ˆå¤šè¦æ³¨æ„çš„åœ°æ–¹ï¼Œå¹¶å‘ç¼–ç¨‹å¯¹ç¨‹åºå‘˜çš„æ€ç»´æ˜¯ä¸€å¤§æŒ‘æˆ˜ã€‚\nè¿™é‡Œæˆ‘è§‰å¾—å¯ä»¥ç”¨é€’å½’é”ï¼Œå°±æ˜¯å¯ä»¥é‡å¤åŠ é”çš„é”ï¼Œå¯ä»¥æŸ¥ä¸€ä¸‹æ ‡å‡†æ–‡æ¡£ã€‚\n\n2.æˆ‘è§‰å¾—asyncç›¸å½“äºæ˜¯ä¸€ä¸ªå¤–è§‚æ¨¡å¼ï¼Œå±è”½äº†åº•å±‚ç»†èŠ‚ï¼Œæ›´å®¹æ˜“ä½¿ç”¨ï¼Œå³ä½¿ä½ ä¸äº†è§£å¤šçº¿ç¨‹ï¼Œä¹Ÿèƒ½å¤Ÿåˆ©ç”¨çº¿ç¨‹å¼€å‘å‡ºå¹¶å‘ç¨‹åºã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591446826,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":224509,"user_name":"å‡ºå–çµé­‚çš„æ•™ç»ƒKerry","can_delete":false,"product_type":"c1","uid":1807943,"ip_address":"","ucode":"8C64517DA556FE","user_header":"https://static001.geekbang.org/account/avatar/00/1b/96/47/93838ff7.jpg","comment_is_top":false,"comment_ctime":1591425222,"is_pvip":true,"replies":[{"id":"82636","content":"æ²¡æœ‰æœ¬è´¨åŒºåˆ«ï¼Œåªæ˜¯ä¼ å…¥çš„å‚æ•°ä¸åŒã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1591433822,"ip_address":"","comment_id":224509,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1591425222","product_id":100051801,"comment_content":"å¯åŠ¨çº¿ç¨‹ä¸­çš„è¿è¡Œå‡½æ•°ï¼Œæ™®é€šå‡½æ•°ï¼Œé™æ€å‡½æ•°ï¼Œæˆå‘˜å‡½æ•°æœ‰ä»€ä¹ˆåŒºåˆ«å—","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497501,"discussion_content":"æ²¡æœ‰æœ¬è´¨åŒºåˆ«ï¼Œåªæ˜¯ä¼ å…¥çš„å‚æ•°ä¸åŒã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591433822,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":224446,"user_name":"TC128","can_delete":false,"product_type":"c1","uid":1993621,"ip_address":"","ucode":"C5FF12BB7406FB","user_header":"","comment_is_top":false,"comment_ctime":1591403308,"is_pvip":false,"replies":[{"id":"82630","content":"çœ‹è‡ªå·±çš„ä¸šåŠ¡é€»è¾‘å§ï¼Œå¯ä»¥é‡è¯•ï¼Œæˆ–è€…æŠ¥é”™ã€è®°æ—¥å¿—ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1591429722,"ip_address":"","comment_id":224446,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1591403308","product_id":100051801,"comment_content":"è€å¸ˆå¥½ï¼Œè¯·é—®call_onceé‡Œé¢çš„å‡½æ•°è°ƒç”¨å¤±è´¥ï¼ˆå‡ºé”™ï¼‰äº†å’‹åŠï¼Ÿåªèƒ½é‡å¯è½¯ä»¶å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497478,"discussion_content":"çœ‹è‡ªå·±çš„ä¸šåŠ¡é€»è¾‘å§ï¼Œå¯ä»¥é‡è¯•ï¼Œæˆ–è€…æŠ¥é”™ã€è®°æ—¥å¿—ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591429722,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":224442,"user_name":"åˆ˜ä¸¹","can_delete":false,"product_type":"c1","uid":1081922,"ip_address":"","ucode":"66594D1C957E15","user_header":"https://static001.geekbang.org/account/avatar/00/10/82/42/8b04d489.jpg","comment_is_top":false,"comment_ctime":1591402176,"is_pvip":false,"replies":[{"id":"82631","content":"C++11&#47;14é‡Œè¿˜æ²¡æœ‰è¿™ä¸ªç‰¹æ€§ï¼Œæœ€æ–°çš„C++20å¥½åƒä¹Ÿæ²¡æœ‰ï¼ŒæŠ±æ­‰æ²¡åŠæ³•å¸®åˆ°ä½ ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1591429808,"ip_address":"","comment_id":224442,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1591402176","product_id":100051801,"comment_content":"èƒ½å¦ä»‹ç»ä¸€ä¸‹C++é‡Œçš„åå°„ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497476,"discussion_content":"C++11/14é‡Œè¿˜æ²¡æœ‰è¿™ä¸ªç‰¹æ€§ï¼Œæœ€æ–°çš„C++20å¥½åƒä¹Ÿæ²¡æœ‰ï¼ŒæŠ±æ­‰æ²¡åŠæ³•å¸®åˆ°ä½ ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591429808,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1547913,"avatar":"https://static001.geekbang.org/account/avatar/00/17/9e/89/6e9c05d6.jpg","nickname":"è¢«è®¨åŒçš„å‹‡æ°”","note":"","ucode":"AE3B3CA27D91A2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":279802,"discussion_content":"C++é‡Œçš„åå°„æ²¡æœ‰Javaé‚£ä¹ˆå¼ºå¤§ï¼Œä¸€èˆ¬æ²¡ä»€ä¹ˆç”¨ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591419046,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}