{"id":353853,"title":"07 | æ¡ä»¶è¯­å¥ï¼šWHERE ä¸ HAVINGæœ‰ä»€ä¹ˆä¸åŒ?","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯æœ±æ™“å³°ã€‚</p><p>æˆ‘ä»¬åœ¨è¿›è¡ŒæŸ¥è¯¢çš„æ—¶å€™ï¼Œç»å¸¸éœ€è¦æŒ‰æ¡ä»¶å¯¹æŸ¥è¯¢ç»“æœè¿›è¡Œç­›é€‰ï¼Œè¿™å°±è¦ç”¨åˆ°æ¡ä»¶è¯­å¥WHEREå’ŒHAVINGäº†ã€‚</p><p>WHEREæ˜¯ç›´æ¥å¯¹è¡¨ä¸­çš„å­—æ®µè¿›è¡Œé™å®šï¼Œæ¥ç­›é€‰ç»“æœï¼›HAVINGåˆ™éœ€è¦è·Ÿåˆ†ç»„å…³é”®å­—GROUP BYä¸€èµ·ä½¿ç”¨ï¼Œé€šè¿‡å¯¹åˆ†ç»„å­—æ®µæˆ–åˆ†ç»„è®¡ç®—å‡½æ•°è¿›è¡Œé™å®šï¼Œæ¥ç­›é€‰ç»“æœã€‚è™½ç„¶å®ƒä»¬éƒ½æ˜¯å¯¹æŸ¥è¯¢è¿›è¡Œé™å®šï¼Œå´æœ‰ç€å„è‡ªçš„ç‰¹ç‚¹å’Œé€‚ç”¨åœºæ™¯ã€‚å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬ä¼šé‡åˆ°2ä¸ªéƒ½å¯ä»¥ç”¨çš„æƒ…å†µã€‚ä¸€æ—¦ç”¨é”™ï¼Œå°±å¾ˆå®¹æ˜“å‡ºç°æ‰§è¡Œæ•ˆç‡ä½ä¸‹ã€æŸ¥è¯¢ç»“æœé”™è¯¯ï¼Œç”šè‡³æ˜¯æŸ¥è¯¢æ— æ³•è¿è¡Œçš„æƒ…å†µã€‚</p><p>ä¸‹é¢æˆ‘å°±å€ŸåŠ©é¡¹ç›®å®æ–½è¿‡ç¨‹ä¸­çš„å®é™…éœ€æ±‚ï¼Œç»™ä½ è®²è®²WHEREå’ŒHAVINGåˆ†åˆ«æ˜¯å¦‚ä½•å¯¹æŸ¥è¯¢ç»“æœè¿›è¡Œç­›é€‰çš„ï¼Œä»¥åŠå®ƒä»¬å„è‡ªçš„ä¼˜ç¼ºç‚¹ï¼Œæ¥å¸®åŠ©ä½ æ­£ç¡®åœ°ä½¿ç”¨å®ƒä»¬ï¼Œä½¿ä½ çš„æŸ¥è¯¢ä¸ä»…èƒ½å¤Ÿå¾—åˆ°æ­£ç¡®çš„ç»“æœï¼Œè¿˜èƒ½å ç”¨æ›´å°‘çš„èµ„æºï¼Œå¹¶ä¸”é€Ÿåº¦æ›´å¿«ã€‚</p><h2>ä¸€ä¸ªå®é™…æŸ¥è¯¢éœ€æ±‚</h2><p>è¶…å¸‚çš„ç»è¥è€…æå‡ºï¼Œè¦æŸ¥å•ç¬”é”€å”®é‡‘é¢è¶…è¿‡50å…ƒçš„å•†å“ã€‚æˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹è¿™ä¸ªéœ€æ±‚ï¼šéœ€è¦æŸ¥è¯¢å‡ºä¸€ä¸ªå•†å“è®°å½•é›†ï¼Œé™å®šæ¡ä»¶æ˜¯å•ç¬”é”€å”®é‡‘é¢è¶…è¿‡50å…ƒã€‚è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å°±éœ€è¦ç”¨åˆ°WHEREå’ŒHAVINGäº†ã€‚</p><p>è¿™ä¸ªé—®é¢˜çš„æ¡ä»¶å¾ˆæ˜ç¡®ï¼ŒæŸ¥è¯¢çš„ç»“æœä¹Ÿåªæœ‰â€œå•†å“â€ä¸€ä¸ªå­—æ®µï¼Œå¥½åƒå¾ˆå®¹æ˜“å®ç°ã€‚</p><p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªè¿™æ ·çš„å•†å“ä¿¡æ¯è¡¨ï¼ˆdemo.goodsmasterï¼‰ï¼Œé‡Œé¢æœ‰2ç§å•†å“ï¼šä¹¦å’Œç¬”ã€‚</p><!-- [[[read_end]]] --><pre><code>mysql&gt; SELECT *\n    -&gt; FROM demo.goodsmaster;\n+------------+---------+-----------+---------------+------+------------+\n| itemnumber | barcode | goodsname | specification | unit | salesprice |\n+------------+---------+-----------+---------------+------+------------+\n|          1 | 0001    | ä¹¦        |               | æœ¬   |      89.00 |\n|          2 | 0002    | ç¬”        |               | æ”¯   |       5.00 |\n+------------+---------+-----------+---------------+------+------------+\n2 rows in set (0.00 sec)\n</code></pre><p>åŒæ—¶ï¼Œæˆ‘ä»¬è¿˜æœ‰ä¸€ä¸ªå•†å“é”€å”®æ˜ç»†è¡¨ï¼ˆdemo.transactiondetailsï¼‰ï¼Œé‡Œé¢æœ‰4æ¡é”€å”®è®°å½•ï¼š</p><pre><code>mysql&gt; SELECT *\n    -&gt; FROM demo.transactiondetails;\n+---------------+------------+----------+-------+------------+\n| transactionid | itemnumber | quantity | price | salesvalue |\n+---------------+------------+----------+-------+------------+\n|             1 |          1 |    1.000 | 89.00 |      89.00 |\n|             1 |          2 |    2.000 |  5.00 |      10.00 |\n|             2 |          1 |    2.000 | 89.00 |     178.00 |\n|             3 |          2 |   10.000 |  5.00 |      50.00 |\n+---------------+------------+----------+-------+------------+\n4 rows in set (0.01 sec)\n</code></pre><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åˆ†åˆ«ç”¨WHEREå’ŒHAVINGè¿›è¡ŒæŸ¥è¯¢ï¼Œçœ‹çœ‹å®ƒä»¬å„è‡ªæ˜¯å¦‚ä½•æŸ¥è¯¢çš„ï¼Œæ˜¯å¦èƒ½å¤Ÿå¾—åˆ°æ­£ç¡®çš„ç»“æœã€‚</p><p>ç¬¬ä¸€æ­¥ï¼Œç”¨WHEREå…³é”®å­—è¿›è¡ŒæŸ¥è¯¢ï¼š</p><pre><code>mysql&gt; SELECT DISTINCT b.goodsname\n-&gt; FROM demo.transactiondetails AS a\n-&gt; JOIN demo.goodsmaster AS b\n-&gt; ON (a.itemnumber=b.itemnumber)\n-&gt; WHERE a.salesvalue &gt; 50;\n+-----------+\n| goodsname |\n+-----------+\n| ä¹¦ |\n+-----------+\n1 row in set (0.00 sec)\n</code></pre><p>ç¬¬äºŒæ­¥ï¼Œç”¨HAVINGå…³é”®å­—è¿›è¡ŒæŸ¥è¯¢ï¼š</p><pre><code>mysql&gt; SELECT b.goodsname\n-&gt; FROM demo.transactiondetails AS a\n-&gt; JOIN demo.goodsmaster AS b\n-&gt; ON (a.itemnumber=b.itemnumber)\n-&gt; GROUP BY b.goodsname\n-&gt; HAVING max(a.salesvalue)&gt;50;\n+-----------+\n| goodsname |\n+-----------+\n| ä¹¦ |\n+-----------+\n1 row in set (0.00 sec)\n</code></pre><p>å¯ä»¥å‘ç°ï¼Œä¸¤æ¬¡æŸ¥è¯¢çš„ç»“æœæ˜¯ä¸€æ ·çš„ã€‚é‚£ä¹ˆï¼Œè¿™ä¸¤ç§æŸ¥è¯¢åˆ°åº•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œå“ªä¸ªæ›´å¥½å‘¢ï¼Ÿè¦å¼„æ˜ç™½è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬è¦å…ˆå­¦ä¹ ä¸‹WHEREå’ŒHAVINGçš„æ‰§è¡Œè¿‡ç¨‹ã€‚</p><h2>WHERE</h2><p>æˆ‘ä»¬å…ˆæ¥åˆ†æä¸€ä¸‹åˆšæ‰ä½¿ç”¨WHEREæ¡ä»¶çš„æŸ¥è¯¢è¯­å¥ï¼Œæ¥çœ‹çœ‹MySQLæ˜¯å¦‚ä½•æ‰§è¡Œè¿™ä¸ªæŸ¥è¯¢çš„ã€‚</p><p>é¦–å…ˆï¼ŒMySQLä»æ•°æ®è¡¨demo.transactiondetailsä¸­æŠ½å–æ»¡è¶³æ¡ä»¶â€œa.salesvalue&gt;50â€çš„è®°å½•ï¼š</p><pre><code>mysql&gt; SELECT *\n    -&gt; FROM demo.transactiondetails AS a\n    -&gt; WHERE a.salesvalue &gt; 50;\n+---------------+------------+----------+-------+------------+\n| transactionid | itemnumber | quantity | price | salesvalue |\n+---------------+------------+----------+-------+------------+\n|             1 |          1 |    1.000 | 89.00 |      89.00 |\n|             2 |          1 |    2.000 | 89.00 |     178.00 |\n+---------------+------------+----------+-------+------------+\n2 rows in set (0.00 sec)\n</code></pre><p>ä¸ºäº†è·å–åˆ°é”€å”®ä¿¡æ¯æ‰€å¯¹åº”çš„å•†å“åç§°ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡å…¬å…±å­—æ®µâ€œitemnumberâ€ä¸æ•°æ®è¡¨demo.goodsmasterè¿›è¡Œå…³è”ï¼Œä»demo.goodsmasterä¸­è·å–å•†å“åç§°ï¼š</p><pre><code>mysql&gt; SELECT\n    -&gt;     a.*, b.goodsname\n    -&gt; FROM\n    -&gt;     demo.transactiondetails a\n    -&gt;         JOIN\n    -&gt;     demo.goodsmaster b ON (a.itemnumber = b.itemnumber)\n    -&gt; WHERE\n    -&gt;     a.salesvalue &gt; 50;\n+---------------+------------+----------+-------+------------+-----------+\n| transactionid | itemnumber | quantity | price | salesvalue | goodsname |\n+---------------+------------+----------+-------+------------+-----------+\n|             1 |          1 |    1.000 | 89.00 |      89.00 | ä¹¦        |\n|             2 |          1 |    2.000 | 89.00 |     178.00 | ä¹¦        |\n+---------------+------------+----------+-------+------------+-----------+\n2 rows in set (0.00 sec)\n</code></pre><p>è¿™ä¸ªæ—¶å€™ï¼Œå¦‚æœæŸ¥è¯¢å•†å“åç§°ï¼Œå°±ä¼šå‡ºç°ä¸¤ä¸ªé‡å¤çš„è®°å½•ï¼š</p><pre><code>mysql&gt; SELECT\n    -&gt;     b.goodsname\n    -&gt; FROM\n    -&gt;     demo.transactiondetails AS a\n    -&gt;         JOIN\n    -&gt;     demo.goodsmaster AS b ON (a.itemnumber = b.itemnumber)\n    -&gt; WHERE\n    -&gt;     a.salesvalue &gt; 50;\n+-----------+\n| goodsname |\n+-----------+\n| ä¹¦        |\n| ä¹¦        |\n+-----------+\n2 rows in set (0.00 sec)\n</code></pre><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸ºäº†æ¶ˆé™¤é‡å¤çš„è¯­å¥ï¼Œè¿™é‡Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°ä¸€ä¸ªå…³é”®å­—ï¼šDISTINCTï¼Œå®ƒçš„ä½œç”¨æ˜¯è¿”å›å”¯ä¸€ä¸åŒçš„å€¼ã€‚æ¯”å¦‚ï¼ŒDISTINCT å­—æ®µ1ï¼Œå°±è¡¨ç¤ºè¿”å›æ‰€æœ‰å­—æ®µ1çš„ä¸åŒçš„å€¼ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬å°è¯•ä¸€ä¸‹åŠ ä¸ŠDISTINCTå…³é”®å­—çš„æŸ¥è¯¢ï¼š</p><pre><code>mysql&gt; SELECT\n    -&gt;     DISTINCT(b.goodsname)  -- è¿”å›å”¯ä¸€ä¸åŒçš„å€¼\n    -&gt; FROM\n    -&gt;     demo.transactiondetails AS a\n    -&gt;         JOIN\n    -&gt;     demo.goodsmaster AS b ON (a.itemnumber = b.itemnumber)\n    -&gt; WHERE\n    -&gt;     a.salesvalue &gt; 50;\n+-----------+\n| goodsname |\n+-----------+\n| ä¹¦        |\n+-----------+\n1 row in set (0.00 sec)\n</code></pre><p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¾—åˆ°äº†éœ€è¦çš„ç»“æœï¼šå•ç¬”é”€å”®é‡‘é¢è¶…è¿‡50å…ƒçš„å•†å“å°±æ˜¯â€œä¹¦â€ã€‚</p><p>æ€»ä¹‹ï¼ŒWHEREå…³é”®å­—çš„ç‰¹ç‚¹æ˜¯ï¼Œç›´æ¥ç”¨è¡¨çš„å­—æ®µå¯¹æ•°æ®é›†è¿›è¡Œç­›é€‰ã€‚å¦‚æœéœ€è¦é€šè¿‡å…³è”æŸ¥è¯¢ä»å…¶ä»–çš„è¡¨è·å–éœ€è¦çš„ä¿¡æ¯ï¼Œé‚£ä¹ˆæ‰§è¡Œçš„æ—¶å€™ï¼Œä¹Ÿæ˜¯å…ˆé€šè¿‡WHEREæ¡ä»¶è¿›è¡Œç­›é€‰ï¼Œç”¨ç­›é€‰åçš„æ¯”è¾ƒå°çš„æ•°æ®é›†è¿›è¡Œè¿æ¥ã€‚è¿™æ ·ä¸€æ¥ï¼Œè¿æ¥è¿‡ç¨‹ä¸­å ç”¨çš„èµ„æºæ¯”è¾ƒå°‘ï¼Œæ‰§è¡Œæ•ˆç‡ä¹Ÿæ¯”è¾ƒé«˜ã€‚</p><h2>HAVING</h2><p>è®²å®Œäº†WHEREï¼Œæˆ‘ä»¬å†è¯´è¯´HAVINGæ˜¯å¦‚ä½•æ‰§è¡Œçš„ã€‚ä¸è¿‡ï¼Œåœ¨è¿™ä¹‹å‰ï¼Œæˆ‘è¦å…ˆç»™ä½ ä»‹ç»ä¸€ä¸‹GROUP BYï¼Œå› ä¸ºHAVINGä¸èƒ½å•ç‹¬ä½¿ç”¨ï¼Œå¿…é¡»è¦è·ŸGROUP BYä¸€èµ·ä½¿ç”¨ã€‚</p><p>æˆ‘ä»¬å¯ä»¥æŠŠGROUP BYç†è§£æˆå¯¹æ•°æ®è¿›è¡Œåˆ†ç»„ï¼Œæ–¹ä¾¿æˆ‘ä»¬å¯¹ç»„å†…çš„æ•°æ®è¿›è¡Œç»Ÿè®¡è®¡ç®—ã€‚</p><p>ä¸‹é¢æˆ‘ä¸¾ä¸ªå°ä¾‹å­ï¼Œå…·ä½“è®²ä¸€è®²GROUP BYå¦‚ä½•ä½¿ç”¨ï¼Œä»¥åŠå¦‚ä½•åœ¨åˆ†ç»„é‡Œé¢è¿›è¡Œç»Ÿè®¡è®¡ç®—ã€‚</p><p>å‡è®¾ç°åœ¨æœ‰ä¸€ç»„é”€å”®æ•°æ®ï¼Œæˆ‘ä»¬éœ€è¦ä»é‡Œé¢æŸ¥è¯¢æ¯å¤©ã€æ¯ä¸ªæ”¶é“¶å‘˜çš„é”€å”®æ•°é‡å’Œé”€å”®é‡‘é¢ã€‚æˆ‘ä»¬é€šè¿‡ä¸‹é¢çš„ä»£ç ï¼Œæ¥æŸ¥çœ‹ä¸€ä¸‹æ•°æ®çš„å†…å®¹ï¼š</p><pre><code>mysql&gt; SELECT *\n    -&gt; FROM demo.transactionhead;\n+---------------+------------------+------------+---------------------+\n| transactionid | transactionno    | operatorid | transdate           |\n+---------------+------------------+------------+---------------------+\n|             1 | 0120201201000001 |          1 | 2020-12-10 00:00:00 |\n|             2 | 0120201202000001 |          2 | 2020-12-11 00:00:00 |\n|             3 | 0120201202000002 |          2 | 2020-12-12 00:00:00 |\n+---------------+------------------+------------+---------------------+\n3 rows in set (0.00 sec)\n\nmysql&gt; SELECT *\n    -&gt; FROM demo.transactiondetails;\n+---------------+------------+----------+-------+------------+\n| transactionid | itemnumber | quantity | price | salesvalue |\n+---------------+------------+----------+-------+------------+\n|             1 |          1 |    1.000 | 89.00 |      89.00 |\n|             1 |          2 |    2.000 |  5.00 |      10.00 |\n|             2 |          1 |    2.000 | 89.00 |     178.00 |\n|             3 |          2 |   10.000 |  5.00 |      50.00 |\n+---------------+------------+----------+-------+------------+\n4 rows in set (0.01 sec)\n\nmysql&gt; SELECT *\n    -&gt; FROM demo.operator;\n+------------+----------+--------+--------------+-------------+---------+--------------------+--------+\n| operatorid | branchid | workno | operatorname | phone       | address | pid                | duty   |\n+------------+----------+--------+--------------+-------------+---------+--------------------+--------+\n|          1 |        1 | 001    | å¼ é™         | 18612345678 | åŒ—äº¬    | 110392197501012332 | åº—é•¿   |\n|          2 |        1 | 002    | æå¼º         | 13312345678 | åŒ—äº¬    | 110222199501012332 | æ”¶é“¶å‘˜ |\n+------------+----------+--------+--------------+-------------+---------+--------------------+--------+\n2 rows in set (0.01 sec)\n\nmysql&gt; SELECT\n    -&gt; a.transdate,   -- äº¤æ˜“æ—¶é—´\n    -&gt; c.operatorname,-- æ“ä½œå‘˜\n    -&gt; d.goodsname,   -- å•†å“åç§°\n    -&gt; b.quantity,    -- é”€å”®æ•°é‡\n    -&gt; b.price,       -- ä»·æ ¼\n    -&gt; b.salesvalue   -- é”€å”®é‡‘é¢\n    -&gt; FROM\n    -&gt;   demo.transactionhead AS a\n    -&gt; JOIN\n    -&gt;   demo.transactiondetails AS b ON (a.transactionid = b.transactionid)\n    -&gt; JOIN\n    -&gt;  demo.operator AS c ON (a.operatorid = c.operatorid)\n    -&gt; JOIN\n    -&gt;  demo.goodsmaster AS d ON (b.itemnumber = d.itemnumber);\n+---------------------+--------------+-----------+----------+-------+------------+\n| transdate           | operatorname | goodsname | quantity | price | salesvalue |\n+---------------------+--------------+-----------+----------+-------+------------+\n| 2020-12-10 00:00:00 | å¼ é™         | ä¹¦        |    1.000 | 89.00 |      89.00 |\n| 2020-12-10 00:00:00 | å¼ é™         | ç¬”        |    2.000 |  5.00 |      10.00 |\n| 2020-12-11 00:00:00 | æå¼º         | ä¹¦        |    2.000 | 89.00 |     178.00 |\n| 2020-12-12 00:00:00 | æå¼º         | ç¬”        |   10.000 |  5.00 |      50.00 |\n+---------------------+--------------+-----------+----------+-------+------------+\n4 rows in set (0.00 sec)\n</code></pre><p>å¦‚æœæˆ‘æƒ³çœ‹çœ‹æ¯å¤©çš„é”€å”®æ•°é‡å’Œé”€å”®é‡‘é¢ï¼Œå¯ä»¥æŒ‰ç…§ä¸€ä¸ªå­—æ®µâ€œtransdateâ€å¯¹æ•°æ®è¿›è¡Œåˆ†ç»„å’Œç»Ÿè®¡ï¼š</p><pre><code>mysql&gt; SELECT\n    -&gt; a.transdate,\n    -&gt; SUM(b.quantity), -- ç»Ÿè®¡åˆ†ç»„çš„æ€»è®¡é”€å”®æ•°é‡\n    -&gt; SUM(b.salesvalue) -- ç»Ÿè®¡åˆ†ç»„çš„æ€»è®¡é”€å”®é‡‘é¢\n    -&gt; FROM\n    -&gt;   demo.transactionhead AS a\n    -&gt; JOIN\n    -&gt; demo.transactiondetails AS b ON (a.transactionid = b.transactionid)\n    -&gt; GROUP BY a.transdate;\n+---------------------+-----------------+-------------------+\n| transdate           | SUM(b.quantity) | SUM(b.salesvalue) |\n+---------------------+-----------------+-------------------+\n| 2020-12-10 00:00:00 |           3.000 |             99.00 |\n| 2020-12-11 00:00:00 |           2.000 |            178.00 |\n| 2020-12-12 00:00:00 |          10.000 |             50.00 |\n+---------------------+-----------------+-------------------+\n3 rows in set (0.00 sec)\n</code></pre><p>å¦‚æœæˆ‘æƒ³çœ‹æ¯å¤©ã€æ¯ä¸ªæ”¶é“¶å‘˜çš„é”€å”®æ•°é‡å’Œé”€å”®é‡‘é¢ï¼Œå°±å¯ä»¥æŒ‰2ä¸ªå­—æ®µè¿›è¡Œåˆ†ç»„å’Œç»Ÿè®¡ï¼Œåˆ†åˆ«æ˜¯â€œtransdateâ€å’Œâ€œoperatornameâ€ï¼š</p><pre><code>mysql&gt;  SELECT\n    -&gt;     a.transdate,\n    -&gt;     c.operatorname,\n    -&gt;     SUM(b.quantity), -- æ•°é‡æ±‚å’Œ\n    -&gt;     SUM(b.salesvalue)-- é‡‘é¢æ±‚å’Œ\n    -&gt; FROM\n    -&gt;     demo.transactionhead AS a\n    -&gt;         JOIN\n    -&gt;     demo.transactiondetails AS b ON (a.transactionid = b.transactionid)\n    -&gt;         JOIN\n    -&gt;     demo.operator AS C ON (a.operatorid = c.operatorid)\n    -&gt; GROUP BY a.transdate , c.operatorname; -- æŒ‰ç…§äº¤æ˜“æ—¥æœŸå’Œæ“ä½œå‘˜åˆ†ç»„\n+---------------------+--------------+-----------------+-------------------+\n| transdate           | operatorname | SUM(b.quantity) | SUM(b.salesvalue) |\n+---------------------+--------------+-----------------+-------------------+\n| 2020-12-10 00:00:00 | å¼ é™         |           3.000 |             99.00 |\n| 2020-12-11 00:00:00 | æå¼º         |           2.000 |            178.00 |\n| 2020-12-12 00:00:00 | æå¼º         |          10.000 |             50.00 |\n+---------------------+--------------+-----------------+-------------------+\n3 rows in set (0.00 sec)\n</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œé€šè¿‡å¯¹é”€å”®æ•°æ®æŒ‰ç…§äº¤æ˜“æ—¥æœŸå’Œæ”¶é“¶å‘˜è¿›è¡Œåˆ†ç»„ï¼Œå†å¯¹ç»„å†…æ•°æ®è¿›è¡Œæ±‚å’Œç»Ÿè®¡ï¼Œå°±å®ç°äº†å¯¹æ¯å¤©ã€æ¯ä¸ªæ”¶é“¶å‘˜çš„é”€å”®æ•°é‡å’Œé”€å”®é‡‘é¢çš„æŸ¥è¯¢ã€‚</p><p>å¥½äº†ï¼ŒçŸ¥é“äº†GROUP BYçš„ä½¿ç”¨æ–¹æ³•ï¼Œæˆ‘ä»¬å°±æ¥å­¦ä¹ ä¸‹HAVINGã€‚</p><p>å›åˆ°å¼€å¤´çš„è¶…å¸‚ç»è¥è€…çš„éœ€æ±‚ï¼šæŸ¥è¯¢å•ç¬”é”€å”®é‡‘é¢è¶…è¿‡50å…ƒçš„å•†å“ã€‚ç°åœ¨æˆ‘ä»¬æ¥ä½¿ç”¨HAVINGæ¥å®ç°ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><pre><code>mysql&gt; SELECT b.goodsname\n    -&gt; FROM demo.transactiondetails AS a\n    -&gt; JOIN demo.goodsmaster AS b\n    -&gt; ON (a.itemnumber=b.itemnumber)\n    -&gt; GROUP BY b.goodsname\n    -&gt; HAVING max(a.salesvalue)&gt;50;\n+-----------+\n| goodsname |\n+-----------+\n| ä¹¦        |\n+-----------+\n1 row in set (0.00 sec)\n</code></pre><p>è¿™ç§æŸ¥è¯¢æ–¹å¼åœ¨MySQLé‡Œé¢æ˜¯åˆ†å››æ­¥å®ç°çš„ã€‚</p><p>ç¬¬ä¸€æ­¥ï¼ŒæŠŠæµæ°´æ˜ç»†è¡¨å’Œå•†å“ä¿¡æ¯è¡¨é€šè¿‡å…¬å…±å­—æ®µâ€œitemnumberâ€è¿æ¥èµ·æ¥ï¼Œä»2ä¸ªè¡¨ä¸­è·å–æ•°æ®ï¼š</p><pre><code>mysql&gt; SELECT\n    -&gt;     a.*, b.*\n    -&gt; FROM\n    -&gt;     demo.transactiondetails a\n    -&gt;         JOIN\n    -&gt;     demo.goodsmaster b ON (a.itemnumber = b.itemnumber);\n+---------------+------------+----------+-------+------------+------------+---------+-----------+---------------+------+------------+\n| transactionid | itemnumber | quantity | price | salesvalue | itemnumber | barcode | goodsname | specification | unit | salesprice |\n+---------------+------------+----------+-------+------------+------------+---------+-----------+---------------+------+------------+\n|             1 |          1 |    1.000 | 89.00 |      89.00 |          1 | 0001    | ä¹¦        | NULL          | æœ¬   |      89.00 |\n|             1 |          2 |    2.000 |  5.00 |      10.00 |          2 | 0002    | ç¬”        | NULL          | æ”¯   |       5.00 |\n|             2 |          1 |    2.000 | 89.00 |     178.00 |          1 | 0001    | ä¹¦        | NULL          | æœ¬   |      89.00 |\n|             3 |          2 |   10.000 |  5.00 |      50.00 |          2 | 0002    | ç¬”        | NULL          | æ”¯   |       5.00 |\n+---------------+------------+----------+-------+------------+------------+---------+-----------+---------------+------+------------+\n4 rows in set (0.00 sec)\n</code></pre><p>æŸ¥è¯¢çš„ç»“æœæœ‰ç‚¹å¤æ‚ï¼Œä¸ºäº†æ–¹ä¾¿ä½ ç†è§£ï¼Œæˆ‘å¯¹ç»“æœè¿›è¡Œäº†åˆ†ç±»ï¼Œå¹¶åŠ äº†æ³¨é‡Šï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/5a/33/5a65e30972010a72576d4008fb0b9333.jpg?wh=7250*2895\" alt=\"\"></p><p>ç¬¬äºŒæ­¥ï¼ŒæŠŠç»“æœé›†æŒ‰ç…§å•†å“åç§°åˆ†ç»„ï¼Œåˆ†ç»„çš„ç¤ºæ„å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p>ç»„1ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/23/10/239766d1849b25d03049be4f21c95510.jpg?wh=7988*2525\" alt=\"\"></p><p>ç»„2ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/2d/ca/2d4b2fec2c3b84a25928f21353727eca.jpeg?wh=1914*500\" alt=\"\"></p><p>ç¬¬ä¸‰æ­¥ï¼Œå¯¹åˆ†ç»„åçš„æ•°æ®é›†è¿›è¡Œç­›é€‰ï¼ŒæŠŠç»„ä¸­å­—æ®µâ€œsalesvalueâ€çš„æœ€å¤§å€¼&gt;50çš„ç»„ç­›é€‰å‡ºæ¥ã€‚ç­›é€‰åçš„ç»“æœé›†å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/96/a6/96bdae61f5924a9118071294cab86ba6.jpeg?wh=1805*332\" alt=\"\"></p><p>ç¬¬å››æ­¥ï¼Œè¿”å›å•†å“åç§°ã€‚è¿™æ—¶ï¼Œæˆ‘ä»¬å°±å¾—åˆ°äº†éœ€è¦çš„ç»“æœï¼šå•ç¬”é”€å”®é‡‘é¢è¶…è¿‡50å…ƒçš„å•†å“å°±æ˜¯â€œä¹¦â€ã€‚</p><p>ç°åœ¨æˆ‘ä»¬æ¥ç®€å•å°ç»“ä¸‹ä½¿ç”¨HAVINGçš„æŸ¥è¯¢è¿‡ç¨‹ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬è¦æŠŠæ‰€æœ‰çš„ä¿¡æ¯éƒ½å‡†å¤‡å¥½ï¼ŒåŒ…æ‹¬ä»å…³è”è¡¨ä¸­è·å–éœ€è¦çš„ä¿¡æ¯ï¼Œå¯¹æ•°æ®é›†è¿›è¡Œåˆ†ç»„ï¼Œå½¢æˆä¸€ä¸ªåŒ…å«æ‰€æœ‰éœ€è¦çš„ä¿¡æ¯çš„æ•°æ®é›†åˆã€‚æ¥ç€ï¼Œå†é€šè¿‡HAVINGæ¡ä»¶çš„ç­›é€‰ï¼Œå¾—åˆ°éœ€è¦çš„æ•°æ®ã€‚</p><h2>æ€ä¹ˆæ­£ç¡®åœ°ä½¿ç”¨WHEREå’ŒHAVINGï¼Ÿ</h2><p>ç°åœ¨ï¼Œä½ å·²ç»çŸ¥é“äº†WHEREå’ŒHAVINGçš„å…·ä½“ä½¿ç”¨æ–¹æ³•ã€‚é‚£ä¹ˆï¼Œåœ¨æŸ¥è¯¢æ—¶ï¼Œæˆ‘ä»¬æ€æ ·æ‰èƒ½æ­£ç¡®åœ°ä½¿ç”¨å®ƒä»¬å‘¢ï¼Ÿ</p><p>é¦–å…ˆï¼Œä½ è¦çŸ¥é“å®ƒä»¬çš„2ä¸ªå…¸å‹åŒºåˆ«ã€‚</p><p>ç¬¬ä¸€ä¸ªåŒºåˆ«æ˜¯ï¼Œ<strong>å¦‚æœéœ€è¦é€šè¿‡è¿æ¥ä»å…³è”è¡¨ä¸­è·å–éœ€è¦çš„æ•°æ®ï¼ŒWHEREæ˜¯å…ˆç­›é€‰åè¿æ¥ï¼Œè€ŒHAVINGæ˜¯å…ˆè¿æ¥åç­›é€‰</strong>ã€‚</p><p>è¿™ä¸€ç‚¹ï¼Œå°±å†³å®šäº†åœ¨å…³è”æŸ¥è¯¢ä¸­ï¼ŒWHEREæ¯”HAVINGæ›´é«˜æ•ˆã€‚å› ä¸ºWHEREå¯ä»¥å…ˆç­›é€‰ï¼Œç”¨ä¸€ä¸ªç­›é€‰åçš„è¾ƒå°æ•°æ®é›†å’Œå…³è”è¡¨è¿›è¡Œè¿æ¥ï¼Œè¿™æ ·å ç”¨çš„èµ„æºæ¯”è¾ƒå°‘ï¼Œæ‰§è¡Œæ•ˆç‡ä¹Ÿå°±æ¯”è¾ƒé«˜ã€‚HAVINGåˆ™éœ€è¦å…ˆæŠŠç»“æœé›†å‡†å¤‡å¥½ï¼Œä¹Ÿå°±æ˜¯ç”¨æœªè¢«ç­›é€‰çš„æ•°æ®é›†è¿›è¡Œå…³è”ï¼Œç„¶åå¯¹è¿™ä¸ªå¤§çš„æ•°æ®é›†è¿›è¡Œç­›é€‰ï¼Œè¿™æ ·å ç”¨çš„èµ„æºå°±æ¯”è¾ƒå¤šï¼Œæ‰§è¡Œæ•ˆç‡ä¹Ÿè¾ƒä½ã€‚</p><p>ç¬¬äºŒä¸ªåŒºåˆ«æ˜¯ï¼ŒWHEREå¯ä»¥ç›´æ¥ä½¿ç”¨è¡¨ä¸­çš„å­—æ®µä½œä¸ºç­›é€‰æ¡ä»¶ï¼Œä½†ä¸èƒ½ä½¿ç”¨åˆ†ç»„ä¸­çš„è®¡ç®—å‡½æ•°ä½œä¸ºç­›é€‰æ¡ä»¶ï¼›HAVINGå¿…é¡»è¦ä¸GROUP BYé…åˆä½¿ç”¨ï¼Œå¯ä»¥æŠŠåˆ†ç»„è®¡ç®—çš„å‡½æ•°å’Œåˆ†ç»„å­—æ®µä½œä¸ºç­›é€‰æ¡ä»¶ã€‚</p><p>è¿™å†³å®šäº†ï¼Œ<strong>åœ¨éœ€è¦å¯¹æ•°æ®è¿›è¡Œåˆ†ç»„ç»Ÿè®¡çš„æ—¶å€™ï¼ŒHAVINGå¯ä»¥å®ŒæˆWHEREä¸èƒ½å®Œæˆçš„ä»»åŠ¡</strong>ã€‚è¿™æ˜¯å› ä¸ºï¼Œåœ¨æŸ¥è¯¢è¯­æ³•ç»“æ„ä¸­ï¼ŒWHEREåœ¨GROUP BYä¹‹å‰ï¼Œæ‰€ä»¥æ— æ³•å¯¹åˆ†ç»„ç»“æœè¿›è¡Œç­›é€‰ã€‚HAVINGåœ¨GROUP BYä¹‹åï¼Œå¯ä»¥ä½¿ç”¨åˆ†ç»„å­—æ®µå’Œåˆ†ç»„ä¸­çš„è®¡ç®—å‡½æ•°ï¼Œå¯¹åˆ†ç»„çš„ç»“æœé›†è¿›è¡Œç­›é€‰ï¼Œè¿™ä¸ªåŠŸèƒ½æ˜¯WHEREæ— æ³•å®Œæˆçš„ã€‚</p><p>è¿™ä¹ˆè¯´ä½ å¯èƒ½ä¸å¤ªå¥½ç†è§£ï¼Œæˆ‘æ¥ä¸¾ä¸ªå°ä¾‹å­ã€‚å‡å¦‚è¶…å¸‚ç»è¥è€…æå‡ºï¼Œè¦æŸ¥è¯¢ä¸€ä¸‹æ˜¯å“ªä¸ªæ”¶é“¶å‘˜ã€åœ¨å“ªå¤©å–äº†2å•å•†å“ã€‚è¿™ç§å¿…é¡»å…ˆåˆ†ç»„æ‰èƒ½ç­›é€‰çš„æŸ¥è¯¢ï¼Œç”¨WHEREè¯­å¥å®ç°å°±æ¯”è¾ƒéš¾ï¼Œæˆ‘ä»¬å¯èƒ½è¦åˆ†å¥½å‡ æ­¥ï¼Œé€šè¿‡æŠŠä¸­é—´ç»“æœå­˜å‚¨èµ·æ¥ï¼Œæ‰èƒ½æå®šã€‚ä½†æ˜¯ç”¨HAVINGï¼Œåˆ™å¾ˆè½»æ¾ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><pre><code>mysql&gt; SELECT\n    -&gt;   a.transdate, c.operatorname\n    -&gt; FROM\n    -&gt;   demo.transactionhead AS a\n    -&gt; JOIN\n    -&gt;   demo.transactiondetails AS b ON (a.transactionid = b.transactionid)\n    -&gt; JOIN\n    -&gt;   demo.operator AS c ON (a.operatorid = c.operatorid)\n    -&gt; GROUP BY a.transdate,c.operatorname\n    -&gt; HAVING count(*)=2;  -- é”€å”®äº†2å•\n+---------------------+--------------+\n| transdate           | operatorname |\n+---------------------+--------------+\n| 2020-12-10 00:00:00 | å¼ é™         |\n+---------------------+--------------+\n1 row in set (0.01 sec)\n</code></pre><p>æˆ‘æ±‡æ€»äº†WHEREå’ŒHAVINGå„è‡ªçš„ä¼˜ç¼ºç‚¹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/24/50/2423421554df9a7dfd15495beb850150.jpg?wh=3250*1449\" alt=\"\"></p><p>ä¸è¿‡ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒWHEREå’ŒHAVINGä¹Ÿä¸æ˜¯äº’ç›¸æ’æ–¥çš„ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸€ä¸ªæŸ¥è¯¢é‡Œé¢åŒæ—¶ä½¿ç”¨WHEREå’ŒHAVINGã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾ç°åœ¨æˆ‘ä»¬æœ‰ä¸€ç»„é”€å”®æ•°æ®ï¼ŒåŒ…æ‹¬äº¤æ˜“æ—¶é—´ã€æ”¶é“¶å‘˜ã€å•†å“åç§°ã€é”€å”®æ•°é‡ã€ä»·æ ¼å’Œé”€å”®é‡‘é¢ç­‰ä¿¡æ¯ï¼Œè¶…å¸‚çš„ç»è¥è€…è¦æŸ¥è¯¢â€œ2020-12-10â€å’Œâ€œ2020-12-11â€è¿™ä¸¤å¤©æ”¶é“¶é‡‘é¢è¶…è¿‡100å…ƒçš„é”€å”®æ—¥æœŸã€æ”¶é“¶å‘˜åç§°ã€é”€å”®æ•°é‡å’Œé”€å”®é‡‘é¢ã€‚</p><pre><code>mysql&gt; SELECT\n    -&gt;     a.transdate,\n    -&gt;    c.operatorname,\n    -&gt;     d.goodsname,\n    -&gt;     b.quantity,\n    -&gt;     b.price,\n    -&gt;     b.salesvalue\n    -&gt; FROM\n    -&gt;     demo.transactionhead AS a\n    -&gt;         JOIN\n    -&gt;     demo.transactiondetails AS b ON (a.transactionid = b.transactionid)\n    -&gt;        JOIN\n    -&gt;     demo.operator AS c ON (a.operatorid = c.operatorid)\n    -&gt;        JOIN\n    -&gt;    demo.goodsmaster as d on (b.itemnumber=d.itemnumber);\n+---------------------+--------------+-----------+----------+-------+------------+\n| transdate           | operatorname | goodsname | quantity | price | salesvalue |\n+---------------------+--------------+-----------+----------+-------+------------+\n| 2020-12-10 00:00:00 | å¼ é™         | ä¹¦        |    1.000 | 89.00 |      89.00 |\n| 2020-12-10 00:00:00 | å¼ é™         | ç¬”        |    2.000 |  5.00 |      10.00 |\n| 2020-12-11 00:00:00 | æå¼º         | ä¹¦        |    2.000 | 89.00 |     178.00 |\n| 2020-12-12 00:00:00 | æå¼º         | ç¬”        |   10.000 |  5.00 |      50.00 |\n+---------------------+--------------+-----------+----------+-------+------------+\n4 rows in set (0.00 sec)\n</code></pre><p>æˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹è¿™ä¸ªéœ€æ±‚ï¼šç”±äºæ˜¯è¦æŒ‰ç…§é”€å”®æ—¥æœŸå’Œæ”¶é“¶å‘˜è¿›è¡Œç»Ÿè®¡ï¼Œæ‰€ä»¥ï¼Œå¿…é¡»æŒ‰ç…§é”€å”®æ—¥æœŸå’Œæ”¶é“¶å‘˜è¿›è¡Œåˆ†ç»„ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨GROUP BYå’ŒHAVINGè¿›è¡ŒæŸ¥è¯¢ï¼š</p><pre><code>mysql&gt; SELECT\n    -&gt;     a.transdate,\n    -&gt;     c.operatorname,\n    -&gt;     SUM(b.quantity), -- é”€å”®æ•°é‡æ±‚å’Œ\n    -&gt;     SUM(b.salesvalue)-- é”€å”®é‡‘é¢æ±‚å’Œ\n    -&gt; FROM\n    -&gt;     demo.transactionhead AS a\n    -&gt;         JOIN\n    -&gt;     demo.transactiondetails AS b ON (a.transactionid = b.transactionid)\n    -&gt;         JOIN\n    -&gt;     demo.operator AS c ON (a.operatorid = c.operatorid)\n    -&gt; GROUP BY a.transdate , operatorname  -- æŒ‰ç…§æ—¥æœŸã€æ”¶é“¶å‘˜åˆ†ç»„\n    -&gt; HAVING a.transdate IN ('2020-12-10' , '2020-12-11')\n    -&gt;     AND SUM(b.salesvalue) &gt; 100;   -- æœ€åç­›é€‰æ•°æ®\n+---------------------+--------------+-----------------+-------------------+\n| transdate           | operatorname | SUM(b.quantity) | SUM(b.salesvalue) |\n+---------------------+--------------+-----------------+-------------------+\n| 2020-12-11 00:00:00 | æå¼º         |           2.000 |            178.00 |\n+---------------------+--------------+-----------------+-------------------+\n1 row in set (0.00 sec) \n</code></pre><p>å¦‚æœä½ ä»”ç»†çœ‹HAVINGåé¢çš„ç­›é€‰æ¡ä»¶ï¼Œå°±ä¼šå‘ç°ï¼Œæ¡ä»¶a.transdate IN ('2020-12-10' , '2020-12-11')ï¼Œå…¶å®å¯ä»¥ç”¨WHEREæ¥é™å®šã€‚æˆ‘ä»¬æŠŠæŸ¥è¯¢æ”¹ä¸€ä¸‹è¯•è¯•ï¼š</p><pre><code> mysql&gt; SELECT\n    -&gt;     a.transdate,\n    -&gt;     c.operatorname,\n    -&gt;     SUM(b.quantity),\n    -&gt;     SUM(b.salesvalue)\n    -&gt; FROM\n    -&gt;     demo.transactionhead AS a\n    -&gt;         JOIN\n    -&gt;     demo.transactiondetails AS b ON (a.transactionid = b.transactionid)\n    -&gt;         JOIN\n    -&gt;     demo.operator AS c ON (a.operatorid = c.operatorid)\n    -&gt; WHERE a.transdate in ('2020-12-12','2020-12-11') -- å…ˆæŒ‰æ—¥æœŸç­›é€‰\n    -&gt; GROUP BY a.transdate , operatorname\n    -&gt; HAVING SUM(b.salesvalue)&gt;100;  -- åæŒ‰é‡‘é¢ç­›é€‰\n+---------------------+--------------+-----------------+-------------------+\n| transdate           | operatorname | SUM(b.quantity) | SUM(b.salesvalue) |\n+---------------------+--------------+-----------------+-------------------+\n| 2020-12-11 00:00:00 | æå¼º         |           2.000 |            178.00 |\n+---------------------+--------------+-----------------+-------------------+\n1 row in set (0.00 sec)\n</code></pre><p>å¾ˆæ˜¾ç„¶ï¼Œæˆ‘ä»¬åŒæ ·å¾—åˆ°äº†éœ€è¦çš„ç»“æœã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬æŠŠæ¡ä»¶æ‹†åˆ†å¼€ï¼ŒåŒ…å«åˆ†ç»„ç»Ÿè®¡å‡½æ•°çš„æ¡ä»¶ç”¨HAVINGï¼Œæ™®é€šæ¡ä»¶ç”¨WHEREã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°±æ—¢åˆ©ç”¨äº†WHEREæ¡ä»¶çš„é«˜æ•ˆå¿«é€Ÿï¼Œåˆå‘æŒ¥äº†HAVINGå¯ä»¥ä½¿ç”¨åŒ…å«åˆ†ç»„ç»Ÿè®¡å‡½æ•°çš„æŸ¥è¯¢æ¡ä»¶çš„ä¼˜ç‚¹ã€‚å½“æ•°æ®é‡ç‰¹åˆ«å¤§çš„æ—¶å€™ï¼Œè¿è¡Œæ•ˆç‡ä¼šæœ‰å¾ˆå¤§çš„å·®åˆ«ã€‚</p><h2>æ€»ç»“</h2><p>ä»Šå¤©ï¼Œæˆ‘ç»™ä½ ä»‹ç»äº†æ¡ä»¶è¯­å¥WHEREå’ŒHAVINGåœ¨MySQLä¸­çš„æ‰§è¡ŒåŸç†ã€‚WHEREå¯ä»¥å…ˆæŒ‰ç…§æ¡ä»¶å¯¹æ•°æ®è¿›è¡Œç­›é€‰ï¼Œç„¶åè¿›è¡Œæ•°æ®è¿æ¥ï¼Œæ‰€ä»¥æ•ˆç‡æ›´é«˜ã€‚HAVINGå¯ä»¥åœ¨åˆ†ç»„ä¹‹åï¼Œé€šè¿‡ä½¿ç”¨åˆ†ç»„ä¸­çš„è®¡ç®—å‡½æ•°ï¼Œå®ç°WHEREéš¾ä»¥å®Œæˆçš„æ•°æ®ç­›é€‰ã€‚</p><p>äº†è§£äº†WHEREå’ŒHAVINGå„è‡ªçš„ç‰¹ç‚¹ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨æŸ¥è¯¢ä¸­ï¼Œå……åˆ†åˆ©ç”¨å®ƒä»¬çš„ä¼˜åŠ¿ï¼Œæ›´é«˜æ•ˆåœ°å®ç°æˆ‘ä»¬çš„æŸ¥è¯¢ç›®æ ‡ã€‚</p><p>æœ€åï¼Œæˆ‘æƒ³æé†’ä½ çš„æ˜¯ï¼Œå¾ˆå¤šäººåˆšå¼€å§‹å­¦ä¹ MySQLçš„æ—¶å€™ï¼Œä¸å¤ªå–œæ¬¢ç”¨HAVINGï¼Œä¸€æåˆ°æ¡ä»¶è¯­å¥ï¼Œå°±æƒ³å½“ç„¶åœ°ç”¨WHEREã€‚å…¶å®ï¼ŒHAVINGæ˜¯éå¸¸æœ‰ç”¨çš„ï¼Œç‰¹åˆ«æ˜¯åœ¨åšä¸€äº›å¤æ‚çš„ç»Ÿè®¡æŸ¥è¯¢çš„æ—¶å€™ï¼Œç»å¸¸è¦ç”¨åˆ°åˆ†ç»„ï¼Œè¿™ä¸ªæ—¶å€™HAVINGå°±æ´¾ä¸Šç”¨åœºäº†ã€‚</p><p>å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥ä¸ç”¨HAVINGï¼Œè€Œæ˜¯æŠŠæŸ¥è¯¢åˆ†æˆå‡ æ­¥ï¼ŒæŠŠä¸­é—´ç»“æœå­˜èµ·æ¥ï¼Œå†ç”¨WHEREç­›é€‰ï¼Œæˆ–è€…å¹²è„†æŠŠè¿™éƒ¨åˆ†ç­›é€‰åŠŸèƒ½æ”¾åœ¨åº”ç”¨å±‚é¢ï¼Œç”¨ä»£ç æ¥å®ç°ã€‚ä½†æ˜¯ï¼Œè¿™æ ·åšçš„æ•ˆç‡å¾ˆä½ï¼Œè€Œä¸”ä¼šå¢åŠ å·¥ä½œé‡ï¼ŒåŠ å¤§ç»´æŠ¤æˆæœ¬ã€‚æ‰€ä»¥ï¼Œå­¦ä¼šä½¿ç”¨HAVINGï¼Œå¯¹ä½ å®Œæˆå¤æ‚çš„æŸ¥è¯¢ä»»åŠ¡éå¸¸æœ‰å¸®åŠ©ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>æœ‰è¿™æ ·ä¸€ç§è¯´æ³•ï¼šHAVINGåé¢çš„æ¡ä»¶ï¼Œå¿…é¡»æ˜¯åŒ…å«åˆ†ç»„ä¸­çš„è®¡ç®—å‡½æ•°çš„æ¡ä»¶ï¼Œä½ è§‰å¾—å¯¹å—ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ</p><p>æ¬¢è¿åœ¨ç•™è¨€åŒºå†™ä¸‹ä½ çš„æ€è€ƒå’Œç­”æ¡ˆï¼Œæˆ‘ä»¬ä¸€èµ·äº¤æµè®¨è®ºã€‚å¦‚æœä½ è§‰å¾—ä»Šå¤©çš„å†…å®¹å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼Œä¹Ÿæ¬¢è¿ä½ åˆ†äº«ä½ çš„æœ‹å‹æˆ–åŒäº‹ï¼Œæˆ‘ä»¬ä¸‹èŠ‚è¯¾è§ã€‚</p>","comments":[{"had_liked":false,"id":289325,"user_name":"æœ±æ™“å³°","can_delete":false,"product_type":"c1","uid":2356905,"ip_address":"","ucode":"D2F84F44329C29","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","comment_is_top":true,"comment_ctime":1618976975,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"9.2233720556535992e+18","product_id":100073201,"comment_content":"ä½ å¥½ï¼Œæˆ‘æ˜¯æœ±æ™“å³°ï¼Œä¸‹é¢æˆ‘å°±æ¥å…¬å¸ƒä¸€ä¸‹ä¸ŠèŠ‚è¯¾æ€è€ƒé¢˜çš„ç­”æ¡ˆï¼š<br><br>ä¸ŠèŠ‚è¯¾ï¼Œæˆ‘ä»¬å­¦ä¹ äº†å¦‚ä½•è¿›è¡Œå¤šè¡¨æŸ¥è¯¢ã€‚ä¸‹é¢æ˜¯æ€è€ƒé¢˜çš„ç­”æ¡ˆï¼š<br><br>å¦‚æœä¸èƒ½ä½¿ç”¨å¤–é”®çº¦æŸï¼Œä½ å¯ä»¥åœ¨åº”ç”¨å±‚å¢åŠ ç¡®ä¿æ•°æ®å®Œæ•´æ€§çš„åŠŸèƒ½æ¨¡å—ï¼Œæ¯”å¦‚åˆ é™¤ä¸»è¡¨è®°å½•æ—¶ï¼Œå¢åŠ æ£€æŸ¥ä»è¡¨ä¸­æ˜¯å¦åº”ç”¨äº†è¿™æ¡è®°å½•çš„åŠŸèƒ½ï¼Œå¦‚æœåº”ç”¨äº†ï¼Œå°±ä¸å…è®¸åˆ é™¤ã€‚","like_count":5,"discussions":[{"author":{"id":2680555,"avatar":"https://static001.geekbang.org/account/avatar/00/28/e6/eb/7b7c0101.jpg","nickname":"å½­å½¬","note":"","ucode":"5AF4F4D7163DFE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":393446,"discussion_content":"è¿™æ ·åšè¿˜ä¸æ˜¯è¦æŸ¥è¯¢ä¸€æ¬¡æ•°æ®åº“ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631436623,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":284834,"user_name":"lesserror","can_delete":false,"product_type":"c1","uid":1351076,"ip_address":"","ucode":"25A54D1165FCF6","user_header":"https://static001.geekbang.org/account/avatar/00/14/9d/a4/e481ae48.jpg","comment_is_top":false,"comment_ctime":1616490093,"is_pvip":false,"discussion_count":6,"race_medal":0,"score":"48861130349","product_id":100073201,"comment_content":"ä¹‹å‰åˆšå­¦ä¹ æ•°æ®åº“çš„æ—¶å€™ï¼Œä¹Ÿä¼šæ··æ·†WHEREå’ŒHAVINGã€‚ä»Šå¤©å­¦ä¹ äº†è¿™ä¸€èŠ‚ï¼Œåˆæœ‰äº†æ›´åŠ æ¸…æ™°åœ°è®¤çŸ¥ã€‚<br><br>WHEREæ˜¯é’ˆå¯¹æ•°æ®åº“æ–‡ä»¶çš„å‘æŒ¥ä½œç”¨ï¼Œè€ŒHAVINGæ˜¯é’ˆå¯¹ç»“æœé›†å‘æŒ¥ä½œç”¨ã€‚WHEREæ‰€èƒ½ä½œç”¨çš„å­—æ®µæ¡ä»¶è¦æ˜¯æ•°æ®è¡¨æ–‡ä»¶ä¸­çœŸå®å­˜åœ¨çš„å­—æ®µï¼Œè€Œhavingåªæ˜¯æ ¹æ®å‰é¢æŸ¥è¯¢å‡ºæ¥çš„ç»“æœé›†å†æ¬¡è¿›è¡ŒæŸ¥è¯¢ã€‚<br><br>è¿™æ ·çœ‹æ¥HAVINGåé¢ä¸ä¸€å®šè¦æ˜¯åŒ…å«åˆ†ç»„ä¸­çš„è®¡ç®—å‡½æ•°çš„æ¡ä»¶ã€‚ä¾‹å¦‚ä»¥ä¸‹ä¸¤æ¡è¯­å¥å°±æ˜¯ç­‰æ•ˆçš„ï¼š<br><br>select goods_price, goods_name from goods where goods_price &lt; 100<br><br>select goods_price, goods_name from goods having goods_price &lt; 100<br>","like_count":11,"discussions":[{"author":{"id":1067564,"avatar":"https://static001.geekbang.org/account/avatar/00/10/4a/2c/f8451d77.jpg","nickname":"çŸ³ç»´åº·","note":"","ucode":"E39ED8416B2C01","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":360868,"discussion_content":" HAVING ä¸èƒ½å•ç‹¬ä½¿ç”¨ï¼Œå¿…é¡»è¦è·Ÿ GROUP BY ä¸€èµ·ä½¿ç”¨","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1616550818,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":5,"child_discussions":[{"author":{"id":1351076,"avatar":"https://static001.geekbang.org/account/avatar/00/14/9d/a4/e481ae48.jpg","nickname":"lesserror","note":"","ucode":"25A54D1165FCF6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1067564,"avatar":"https://static001.geekbang.org/account/avatar/00/10/4a/2c/f8451d77.jpg","nickname":"çŸ³ç»´åº·","note":"","ucode":"E39ED8416B2C01","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":360871,"discussion_content":"ä½ å®é™…æµ‹è¯•è¿‡ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616551388,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":360868,"ip_address":""},"score":360871,"extra":""},{"author":{"id":1067564,"avatar":"https://static001.geekbang.org/account/avatar/00/10/4a/2c/f8451d77.jpg","nickname":"çŸ³ç»´åº·","note":"","ucode":"E39ED8416B2C01","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1351076,"avatar":"https://static001.geekbang.org/account/avatar/00/14/9d/a4/e481ae48.jpg","nickname":"lesserror","note":"","ucode":"25A54D1165FCF6","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":361675,"discussion_content":"æµ‹è¯•è¿‡ï¼Œè€å¸ˆè¯¾ç¨‹é‡Œä¹Ÿæåˆ°äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616726502,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":360871,"ip_address":""},"score":361675,"extra":""},{"author":{"id":1202379,"avatar":"https://static001.geekbang.org/account/avatar/00/12/58/cb/daf94c0e.jpg","nickname":"èœé¸ŸğŸ¤è¦å…ˆé£","note":"","ucode":"56668DB891F7BC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1067564,"avatar":"https://static001.geekbang.org/account/avatar/00/10/4a/2c/f8451d77.jpg","nickname":"çŸ³ç»´åº·","note":"","ucode":"E39ED8416B2C01","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":372551,"discussion_content":"éš¾é“æ˜¯mysqlç‰ˆæœ¬é—®é¢˜å—ï¼Ÿæˆ‘çš„æ˜¯8.0\nmysql> select * from goodsmaster;\n+------------+---------+-----------+---------------+------+-------+\n| itemnumber | barcode | goodsname | specification | unit | price |\n+------------+---------+-----------+---------------+------+-------+\n|          1 | 123     | 123       | 123           | 123  | 13.45 |\n|          9 | 0003    | å°ºå­1     | NULL          | æ”¯   | 15.00 |\n|         10 | 0004    | æµ‹è¯•1     | NULL          | æ”¯   | 20.00 |\n|         11 | 0003    | å°ºå­1     | NULL          | æ”¯   | 15.00 |\n|         12 | 0004    | æµ‹è¯•1     | NULL          | æœ¬   | 20.00 |\n|         13 | 0003    | å°ºå­2     | NULL          | æœ¬   | 39.00 |\n|         14 | 0004    | æµ‹è¯•32    | NULL          | æœ¬   | 29.00 |\n+------------+---------+-----------+---------------+------+-------+\n7 rows in set (0.00 sec)\nmysql> select * from goodsmaster having price>20;\n+------------+---------+-----------+---------------+------+-------+\n| itemnumber | barcode | goodsname | specification | unit | price |\n+------------+---------+-----------+---------------+------+-------+\n|         13 | 0003    | å°ºå­2     | NULL          | æœ¬   | 39.00 |\n|         14 | 0004    | æµ‹è¯•32    | NULL          | æœ¬   | 29.00 |\n+------------+---------+-----------+---------------+------+-------+\n2 rows in set (0.00 sec)\n\nmysql> select * from goodsmaster where price>20;\n+------------+---------+-----------+---------------+------+-------+\n| itemnumber | barcode | goodsname | specification | unit | price |\n+------------+---------+-----------+---------------+------+-------+\n|         13 | 0003    | å°ºå­2     | NULL          | æœ¬   | 39.00 |\n|         14 | 0004    | æµ‹è¯•32    | NULL          | æœ¬   | 29.00 |\n+------------+---------+-----------+---------------+------+-------+\n2 rows in set (0.00 sec)\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620375293,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":361675,"ip_address":""},"score":372551,"extra":""}]}]},{"had_liked":false,"id":285977,"user_name":"æ´›å¥‡","can_delete":false,"product_type":"c1","uid":1624355,"ip_address":"","ucode":"662B4005721119","user_header":"https://static001.geekbang.org/account/avatar/00/18/c9/23/76511858.jpg","comment_is_top":false,"comment_ctime":1617091291,"is_pvip":false,"replies":[{"id":"106118","content":"ONåé¢çš„å­—å¥æ˜¯è¿æ¥æ¡ä»¶ï¼ŒWHEREåé¢çš„å­å¥æ‰æ˜¯ç­›é€‰æ¡ä»¶ï¼Œä¸ä¸€æ ·çš„","user_name":"ä½œè€…å›å¤","comment_id":285977,"uid":"2356905","ip_address":"","utype":1,"ctime":1621247852,"user_name_real":"æœ±æ™“å³°"}],"discussion_count":3,"race_medal":0,"score":"27386895067","product_id":100073201,"comment_content":"ç­›é€‰æ¡ä»¶æ”¾åœ¨ONæˆ–è€…WHEREå­å¥ä¸­ï¼Œéƒ½æ˜¯ä¸€æ ·çš„å§ï¼Ÿ","like_count":6,"discussions":[{"author":{"id":2571552,"avatar":"https://static001.geekbang.org/account/avatar/00/27/3d/20/c17a361c.jpg","nickname":"a   ç»…å£«      ğŸš¬","note":"","ucode":"832DEE61A381D8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":369050,"discussion_content":"sqlæ‰§è¡Œé¡ºåºæ˜¯å…ˆONåwhere","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1618912488,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"æœ±æ™“å³°","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":517839,"discussion_content":"ONåé¢çš„å­—å¥æ˜¯è¿æ¥æ¡ä»¶ï¼ŒWHEREåé¢çš„å­å¥æ‰æ˜¯ç­›é€‰æ¡ä»¶ï¼Œä¸ä¸€æ ·çš„","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1621247852,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2110718,"avatar":"https://static001.geekbang.org/account/avatar/00/20/34/fe/e5429b02.jpg","nickname":"glimmer","note":"","ucode":"48A16C52FB4C45","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"æœ±æ™“å³°","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":567920,"discussion_content":"æ‰€ä»¥å…ˆwhereåonï¼Œågroupbyï¼Œåhavingï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651028523,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":517839,"ip_address":""},"score":567920,"extra":""}]}]},{"had_liked":false,"id":302373,"user_name":"é’é›˜","can_delete":false,"product_type":"c1","uid":2687278,"ip_address":"","ucode":"29D71967CA90F0","user_header":"https://static001.geekbang.org/account/avatar/00/29/01/2e/5d3d4b86.jpg","comment_is_top":false,"comment_ctime":1626182128,"is_pvip":false,"replies":[{"id":"110394","content":"å¾ˆæŠ±æ­‰æ•°æ®åŒ…æ˜¯ä¸èƒ½æä¾›çš„ï¼Œå¯ä»¥è‡ªå·±åŠ¨æ‰‹åˆ›å»ºæ•°æ®ï¼Œä¹Ÿæ˜¯ä¸€ç§å¾ˆå¥½çš„ç»ƒä¹ ","user_name":"ä½œè€…å›å¤","comment_id":302373,"uid":"2356905","ip_address":"","utype":1,"ctime":1627874082,"user_name_real":"æœ±æ™“å³°"}],"discussion_count":1,"race_medal":0,"score":"14511084016","product_id":100073201,"comment_content":"æœ‰æ•°æ®åº“çš„æ•°æ®åŒ…å— ï¼Ÿ è¿™å’‹åŠ¨æ‰‹ æ²¡æœ‰æ•°æ®","like_count":3,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"æœ±æ™“å³°","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":523280,"discussion_content":"å¾ˆæŠ±æ­‰æ•°æ®åŒ…æ˜¯ä¸èƒ½æä¾›çš„ï¼Œå¯ä»¥è‡ªå·±åŠ¨æ‰‹åˆ›å»ºæ•°æ®ï¼Œä¹Ÿæ˜¯ä¸€ç§å¾ˆå¥½çš„ç»ƒä¹ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627874082,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":284739,"user_name":"æ˜Ÿç©ºä¸‹","can_delete":false,"product_type":"c1","uid":1183639,"ip_address":"","ucode":"473643B567674A","user_header":"https://static001.geekbang.org/account/avatar/00/12/0f/97/372d8628.jpg","comment_is_top":false,"comment_ctime":1616457454,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10206392046","product_id":100073201,"comment_content":"havingå¯ä»¥æ›¿ä»£where  åªæ˜¯è¦ä¸group byè”åˆä½¿ç”¨ã€‚åè·Ÿæ¡ä»¶ä¸ä¸€å®šæ˜¯åˆ†ç»„å‡½æ•°","like_count":2},{"had_liked":false,"id":354110,"user_name":"ä¸ç®¡","can_delete":false,"product_type":"c1","uid":1094549,"ip_address":"åŒ—äº¬","ucode":"49C35544E8A6D7","user_header":"https://static001.geekbang.org/account/avatar/00/10/b3/95/77f5aa52.jpg","comment_is_top":false,"comment_ctime":1660101541,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5955068837","product_id":100073201,"comment_content":"å¯¹äº0åŸºç¡€çš„æ¥è¯´è¿™ä¸ªè¿˜æ˜¯å¤ªéš¾äº†","like_count":1},{"had_liked":false,"id":333467,"user_name":"SharpBB","can_delete":false,"product_type":"c1","uid":2014573,"ip_address":"","ucode":"D30C5B798B8E8C","user_header":"https://static001.geekbang.org/account/avatar/00/1e/bd/6d/7010f98e.jpg","comment_is_top":false,"comment_ctime":1644375522,"is_pvip":true,"replies":[{"id":"123486","content":"å¥½çš„","user_name":"ä½œè€…å›å¤","comment_id":333467,"uid":"2356905","ip_address":"","utype":1,"ctime":1647075310,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":0,"score":"5939342818","product_id":100073201,"comment_content":"WHERE<br>\tç›´æ¥ç”¨è¡¨å­—æ®µå¯¹æ•°æ®é›†è¿›è¡Œç­›é€‰ å¾—åˆ°è¾ƒå°‘çš„æ•°æ®é›† å†è¿›è¡Œè¿æ¥ èµ„æºå ç”¨å°‘ æ‰§è¡Œæ•ˆç‡é«˜<br>HAVING<br>\téœ€è¦å°†æ•°æ®å‡†å¤‡å¥½ å¹¶è¿›è¡Œåˆ†ç»„å½¢æˆé›†åˆ å†å¯¹è¯¥é›†åˆè¿›è¡Œhavingæ¡ä»¶çš„ç­›é€‰<br>ä¸¤è€…åŒºåˆ«<br>\t1.whereå…ˆç­›é€‰åè¿æ¥ havingå…ˆè¿æ¥åç­›é€‰ whereçš„æ•ˆç‡æ›´é«˜<br>\t2.whereå¯ä»¥ç›´æ¥ç”¨ è€Œhavingå¿…é¡»å’Œgroup byä¸€èµ·ç”¨æ‰å¯ä»¥<br>\t3.å¯ä»¥åœ¨havingä¸­ç”¨å‡½æ•° ä½†whereä¸è¡Œ æ‰€ä»¥havingå¯ä»¥åšä¸€äº›æ›´nbçš„æŸ¥è¯¢","like_count":1,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"æœ±æ™“å³°","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":555799,"discussion_content":"å¥½çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647075310,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":358247,"user_name":"æ›™å…‰","can_delete":false,"product_type":"c1","uid":1476450,"ip_address":"æ±Ÿè¥¿","ucode":"04D65BF7F19845","user_header":"https://static001.geekbang.org/account/avatar/00/16/87/62/f99b5b05.jpg","comment_is_top":false,"comment_ctime":1664112932,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1664112932","product_id":100073201,"comment_content":"â€œå•ç¬”é”€å”®é‡‘é¢è¶…è¿‡ 50 å…ƒçš„å•†å“â€ï¼Œæ„Ÿè§‰æœ‰æ­§ä¹‰ï¼Œä¸€ç¬”é”€å”®é‡‘é¢æœ‰ä¸¤ä¸ªå•†å“ï¼Œä¸”ç›¸åŠ å¤§äº50ï¼Œå¦‚æœmax(a.salesvalue)&gt;50ï¼Œä¼šä¸¢å¤±â€œä¹¦â€è¿™ä¸ªå•†å“ã€‚<br>è€å¸ˆç”¨GROUP BY b.goodsnameåšåˆ†ç»„ï¼Œç”¨maxæŸ¥ç»“æœï¼Œæˆ‘çš„ç†è§£æ˜¯ï¼Œâ€æŸ¥ä¸åŒç±»å‹çš„å•†å“ï¼Œä¸”ä»·æ ¼æœ‰è¶…è¿‡50&quot;","like_count":0},{"had_liked":false,"id":343118,"user_name":"me","can_delete":false,"product_type":"c1","uid":2662659,"ip_address":"","ucode":"205E44AFEDFFFC","user_header":"https://static001.geekbang.org/account/avatar/00/28/a1/03/dff6bc2f.jpg","comment_is_top":false,"comment_ctime":1650639362,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1650639362","product_id":100073201,"comment_content":"SQLé€»è¾‘æŸ¥è¯¢è¯­å¥æ‰§è¡Œé¡ºåº <br>ä¸åº”è¯¥æ˜¯è¿è¡¨åå†whereå˜›ï¼Ÿ ï¼ˆä¸‹æ–¹æ˜¯æ‰§è¡Œé¡ºåºï¼‰<br>SELECT DISTINCT &lt;select_list&gt;<br>FROM &lt;left_table&gt;<br>&lt;join_type&gt; JOIN &lt;right_table&gt;<br>ON &lt;join_condition&gt;<br>WHERE &lt;where_condition&gt;<br>GROUP BY &lt;group_by_list&gt;<br>HAVING &lt;having_condition&gt;<br>ORDER BY &lt;order_by_condition&gt;<br>LIMIT &lt;limit_number&gt;","like_count":0},{"had_liked":false,"id":334443,"user_name":"ä¸ƒæœˆçš„é›¨","can_delete":false,"product_type":"c1","uid":2839126,"ip_address":"","ucode":"7B3829576985D4","user_header":"https://static001.geekbang.org/account/avatar/00/2b/52/56/6ac8be3c.jpg","comment_is_top":false,"comment_ctime":1644939044,"is_pvip":false,"replies":[{"id":"123501","content":"group byæ˜¯å¯¹æ•°æ®è¿›è¡Œåˆ†ç»„ï¼Œhavingåˆ™æ˜¯å¯¹ç»“æœé›†è¿›è¡Œé™å®šï¼Œå»ºè®®å†å¤ä¹ ä¸€ä¸‹è¯¾ç¨‹ä¸­çš„ç›¸å…³å†…å®¹","user_name":"ä½œè€…å›å¤","comment_id":334443,"uid":"2356905","ip_address":"","utype":1,"ctime":1647076021,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":0,"score":"1644939044","product_id":100073201,"comment_content":"group byä¸æ˜¯å¾ˆç†è§£ï¼Œå’Œhavingé…åˆåœ¨ä¸€èµ·ä½¿ç”¨æœ‰ç‚¹æ‡µäº†ã€‚","like_count":0,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"æœ±æ™“å³°","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":555817,"discussion_content":"group byæ˜¯å¯¹æ•°æ®è¿›è¡Œåˆ†ç»„ï¼Œhavingåˆ™æ˜¯å¯¹ç»“æœé›†è¿›è¡Œé™å®šï¼Œå»ºè®®å†å¤ä¹ ä¸€ä¸‹è¯¾ç¨‹ä¸­çš„ç›¸å…³å†…å®¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647076021,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":317690,"user_name":"Bird","can_delete":false,"product_type":"c1","uid":1379704,"ip_address":"","ucode":"D79AA5BA747890","user_header":"https://static001.geekbang.org/account/avatar/00/15/0d/78/aa5f920d.jpg","comment_is_top":false,"comment_ctime":1634891267,"is_pvip":false,"replies":[{"id":"116468","content":"è¿™é‡Œç”¨max()çš„ä¸»è¦ç›®çš„æ˜¯ï¼Œæ¶ˆé™¤ç»“æœé›†ä¸­çš„é‡å¤è®°å½•ã€‚è·å¾—æ­£ç¡®ç»“æœçš„æ–¹æ³•ä¸æ­¢ä¸€ç§ï¼Œæ–‡ä¸­çš„æŸ¥è¯¢ä¸»è¦æ˜¯ä¸ºäº†æ¼”ç¤ºHAVING()çš„ç”¨æ³•ã€‚","user_name":"ä½œè€…å›å¤","comment_id":317690,"uid":"2356905","ip_address":"","utype":1,"ctime":1636616291,"user_name_real":"æœ±æ™“å³°"}],"discussion_count":3,"race_medal":0,"score":"1634891267","product_id":100073201,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œç”¨ HAVING æŸ¥è¯¢å•ç¬”è¶…è¿‡ 50 å…ƒå•†å“çš„ SQL ä¸­ï¼Œç”¨åˆ°äº† HAVING max(a.salesvalue)&gt;50<br><br>è¿™ä¸ª max() æˆ‘ä¸å¤ªç†è§£ï¼Œæ˜¯æŒ‡åœ¨åˆ†ç»„åå¯¹æ¯ä¸ªç»„ä¸­çš„ salesvalue å–æœ€å¤§å€¼å†å’Œ 50 æ¯”è¾ƒå—ï¼Ÿ<br><br>è¿™å—ä¸æ˜ç™½å¯¼è‡´åé¢åŸæ–‡è¯´çš„â€œç¬¬ä¸‰æ­¥ï¼Œå¯¹åˆ†ç»„åçš„æ•°æ®é›†è¿›è¡Œç­›é€‰ï¼ŒæŠŠç»„ä¸­å­—æ®µâ€œsalesvalueâ€çš„æœ€å¤§å€¼ &gt;50 çš„ç»„ç­›é€‰å‡ºæ¥ã€‚â€å°±æ›´ä¸æ˜ç™½äº†ã€‚<br><br>æˆ‘çš„ç–‘é—®æ˜¯ï¼Œéœ€æ±‚æ˜¯æ‰¾åˆ°æ¯” 50 å¤§çš„å°±å¥½ï¼Œä¸ç†è§£è¿™é‡Œä¸ºä»€ä¹ˆç”¨åˆ°æ±‚æœ€å¤§å€¼ã€‚æ±‚çš„æ˜¯å“ªäº›æ•°æ®èŒƒå›´çš„æœ€å¤§å€¼å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"æœ±æ™“å³°","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":528932,"discussion_content":"è¿™é‡Œç”¨max()çš„ä¸»è¦ç›®çš„æ˜¯ï¼Œæ¶ˆé™¤ç»“æœé›†ä¸­çš„é‡å¤è®°å½•ã€‚è·å¾—æ­£ç¡®ç»“æœçš„æ–¹æ³•ä¸æ­¢ä¸€ç§ï¼Œæ–‡ä¸­çš„æŸ¥è¯¢ä¸»è¦æ˜¯ä¸ºäº†æ¼”ç¤ºHAVING()çš„ç”¨æ³•ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636616291,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1217329,"avatar":"https://static001.geekbang.org/account/avatar/00/12/93/31/abb7bfe3.jpg","nickname":"picoasis","note":"","ucode":"D5113416FF2B14","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"æœ±æ™“å³°","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":531036,"discussion_content":"1. è”ç³»å‰é¢çš„distinctï¼Œåªæ˜¯ä¸ºäº†é˜²æ­¢é‡å¤çš„è¯ä¹Ÿå¯ä»¥ç”¨DISTINCTæ¥æ›¿ä»£ã€‚\n2. é‚£ä¹ˆæƒ³åˆ°äº†æ‰§è¡Œæ•ˆç‡é—®é¢˜ã€‚æœåˆ°ä¸€ç¯‡æ–‡ç« (https://www.cnblogs.com/liliuguang/p/12580249.html)è¯´group byæ¯”distinctæ•ˆç‡é«˜ä¸€äº›ã€‚\n3. ä½†æ˜¯åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ æ˜¯ç”¨çš„ï¼ˆdistinct +whereï¼‰ vs ï¼ˆgroup by+having ï¼‰ï¼Œwhereåˆæ¯”group byæ•ˆç‡é«˜ä¸€äº›ï¼Œé‚£ä¹ˆè¯¥å¦‚ä½•åˆ¤æ–­è¿™ä¸¤ä¸ªæ–¹æ¡ˆçš„æ•ˆç‡å‘¢ï¼Ÿ\nç±»ä¼¼æƒ…å†µè¯¥ä¾èµ–ä»€ä¹ˆä¾æ®è¿›è¡Œé€‰æ‹©å‘¢ï¼Ÿ\n\nä¸‹é¢æ˜¯ä¸¤ä¸ªæ–¹æ¡ˆçš„ä»£ç ï¼š\n-- æ–¹æ¡ˆ1 ï¼šdistinct+where\nselect DISTINCT b.goodsname\nfrom transactiondetails as a \njoin  goodsmaster as b \non a.itemnumber = b.itemnumber\nwhere a.salesvalue&gt;50;\n\n-- æ–¹æ¡ˆ2  group by \nselect b.goodsname\nfrom transactiondetails as a \njoin  goodsmaster as b \non a.itemnumber = b.itemnumber\ngroup by b.goodsname\nhaving max(a.salesvalue)&gt;50;","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637209412,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":528932,"ip_address":""},"score":531036,"extra":"{\"user_type\":1}"}]},{"author":{"id":1217329,"avatar":"https://static001.geekbang.org/account/avatar/00/12/93/31/abb7bfe3.jpg","nickname":"picoasis","note":"","ucode":"D5113416FF2B14","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":531032,"discussion_content":"æˆ‘å°è¯•äº†ä¸åŠ max ç›´æ¥ having a.salesvalue&gt;50,ä¼šæŠ¥é”™ã€‚\næœäº†ä¸€ä¸‹ï¼Œè¯´æ˜¯havingåé¢è¦è·Ÿèšåˆå‡½æ•°â€”â€”å› ä¸ºâ€”â€”having çš„åŠŸèƒ½æœ¬æ¥å°±æ˜¯å¯¹ group by åˆ†ç»„åçš„æ•°æ®è¿›è¡Œç¬¬äºŒæ¬¡ç­›é€‰çš„ï¼Œæ‰€ä»¥ åªèƒ½æ˜¯ä¸€ä¸ªèšåˆå‡½æ•°ï¼Œå¦åˆ™ä¼šäº§ç”Ÿ1å¯¹nçš„é”™è¯¯ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637208310,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":311738,"user_name":"å½­å½¬","can_delete":false,"product_type":"c1","uid":2680555,"ip_address":"","ucode":"5AF4F4D7163DFE","user_header":"https://static001.geekbang.org/account/avatar/00/28/e6/eb/7b7c0101.jpg","comment_is_top":false,"comment_ctime":1631436538,"is_pvip":false,"replies":[{"id":"113749","content":"è¯·å‚è€ƒæ€è€ƒé¢˜ç­”æ¡ˆ","user_name":"ä½œè€…å›å¤","comment_id":311738,"uid":"2356905","ip_address":"","utype":1,"ctime":1632799029,"user_name_real":"æœ±æ™“å³°"}],"discussion_count":1,"race_medal":0,"score":"1631436538","product_id":100073201,"comment_content":"HAVING åé¢çš„æ¡ä»¶ï¼Œå¿…é¡»æ˜¯åŒ…å«åˆ†ç»„ä¸­çš„è®¡ç®—å‡½æ•°çš„æ¡ä»¶ï¼Œæˆ–è€…selectåé¢çš„å­—æ®µ","like_count":0,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"æœ±æ™“å³°","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526725,"discussion_content":"è¯·å‚è€ƒæ€è€ƒé¢˜ç­”æ¡ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632799029,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":302090,"user_name":"hello","can_delete":false,"product_type":"c1","uid":2369641,"ip_address":"","ucode":"1348364A1A38F1","user_header":"https://static001.geekbang.org/account/avatar/00/24/28/69/b013f07d.jpg","comment_is_top":false,"comment_ctime":1626075094,"is_pvip":false,"replies":[{"id":"113723","content":"mysqlä¼˜åŒ–å™¨åœ¨åˆ¶å®šæŸ¥è¯¢è®¡åˆ’çš„æ—¶å€™ï¼Œä¼šå¯¹æŸ¥è¯¢è¿›è¡Œä¼˜åŒ–ï¼Œæ¯”å¦‚é‡å†™æŸ¥è¯¢è¯­å¥ï¼Œç›®çš„æ˜¯æé«˜æŸ¥è¯¢çš„é€Ÿåº¦æ•ˆç‡ï¼Œä¸ä¼šæœºæ¢°æŒ‰ç…§å›ºå®šçš„é¡ºåºæ‰§è¡Œã€‚","user_name":"ä½œè€…å›å¤","comment_id":302090,"uid":"2356905","ip_address":"","utype":1,"ctime":1632796812,"user_name_real":"æœ±æ™“å³°"}],"discussion_count":1,"race_medal":0,"score":"1626075094","product_id":100073201,"comment_content":"sqlè¯­å¥çš„æ‰§è¡Œé¡ºåºï¼Œä¸æ˜¯å…ˆæ‰§è¡Œjoin å†æ‰§è¡Œwhereå—ï¼Ÿè€å¸ˆåœ¨æåˆ°whereä¼˜ç‚¹çš„æ—¶å€™è¯´whereçš„ä¼˜ç‚¹æ˜¯å…ˆç­›é€‰åœ¨å…³è”ã€‚è¿™é‡Œä¼¼ä¹è·Ÿsqlæ‰§è¡Œçš„é¡ºåºæœ‰äº†çŸ›ç›¾å‘¢","like_count":0,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"æœ±æ™“å³°","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":523177,"discussion_content":"mysqlä¼˜åŒ–å™¨åœ¨åˆ¶å®šæŸ¥è¯¢è®¡åˆ’çš„æ—¶å€™ï¼Œä¼šå¯¹æŸ¥è¯¢è¿›è¡Œä¼˜åŒ–ï¼Œæ¯”å¦‚é‡å†™æŸ¥è¯¢è¯­å¥ï¼Œç›®çš„æ˜¯æé«˜æŸ¥è¯¢çš„é€Ÿåº¦æ•ˆç‡ï¼Œä¸ä¼šæœºæ¢°æŒ‰ç…§å›ºå®šçš„é¡ºåºæ‰§è¡Œã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632796812,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":300177,"user_name":"born","can_delete":false,"product_type":"c1","uid":1164840,"ip_address":"","ucode":"3F097B2EE52478","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLzJr3dmr96ULaeQQJrslQcSZfH8fwPug8q42Y69q0daYarUbx1b0U1iadjcTtOmUicDnlx968SLLkw/132","comment_is_top":false,"comment_ctime":1625035711,"is_pvip":false,"replies":[{"id":"109151","content":"æ˜¯çš„ï¼Œç”±äº2æ¡è®°å½•çš„å•†å“åç§°ç›¸åŒï¼Œç”¨å•†å“åç§°æ¥åˆ†ç»„ï¼Œç»“æœå°±æ˜¯ä¸€æ¡æ•°æ®ï¼Œå¦‚æœåˆ†ç»„ä¸­åŠ ä¸Šé”€å”®é‡‘é¢ï¼Œå°±æ˜¯2æ¡æ•°æ®äº†","user_name":"ä½œè€…å›å¤","comment_id":300177,"uid":"2356905","ip_address":"","utype":1,"ctime":1625718637,"user_name_real":"æœ±æ™“å³°"}],"discussion_count":1,"race_medal":0,"score":"1625035711","product_id":100073201,"comment_content":"åœ¨â€œæŸ¥è¯¢å•ç¬”é”€å”®é‡‘é¢è¶…è¿‡ 50 å…ƒçš„å•†å“â€ä¾‹å­ä¸­çš„ç¬¬ä¸‰æ­¥ï¼ŒGROUP BYåªç”¨goodsnameå­—æ®µç»“æœåªè¿”å›äº†ç»„ä¸­çš„ç¬¬ä¸€æ¡æ•°æ®ï¼Œæƒ³è¦è¿”å›å›¾ç¤ºä¸­çš„ä¸¤æ¡æ•°æ®è¿˜è¦æ·»åŠ å¦å¤–çš„å­—æ®µå§","like_count":0,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"æœ±æ™“å³°","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":522667,"discussion_content":"æ˜¯çš„ï¼Œç”±äº2æ¡è®°å½•çš„å•†å“åç§°ç›¸åŒï¼Œç”¨å•†å“åç§°æ¥åˆ†ç»„ï¼Œç»“æœå°±æ˜¯ä¸€æ¡æ•°æ®ï¼Œå¦‚æœåˆ†ç»„ä¸­åŠ ä¸Šé”€å”®é‡‘é¢ï¼Œå°±æ˜¯2æ¡æ•°æ®äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625718637,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":293757,"user_name":"æ²ˆåº·","can_delete":false,"product_type":"c1","uid":1611025,"ip_address":"","ucode":"02AFA50738AB8E","user_header":"https://static001.geekbang.org/account/avatar/00/18/95/11/eb431e52.jpg","comment_is_top":false,"comment_ctime":1621522465,"is_pvip":false,"replies":[{"id":"106555","content":"è¯·å‚è€ƒæ€è€ƒé¢˜ç­”æ¡ˆ","user_name":"ä½œè€…å›å¤","comment_id":293757,"uid":"2356905","ip_address":"","utype":1,"ctime":1621569897,"user_name_real":"æœ±æ™“å³°"}],"discussion_count":1,"race_medal":0,"score":"1621522465","product_id":100073201,"comment_content":"æœ‰è¿™æ ·ä¸€ç§è¯´æ³•ï¼šHAVING åé¢çš„æ¡ä»¶ï¼Œå¿…é¡»æ˜¯åŒ…å«åˆ†ç»„ä¸­çš„è®¡ç®—å‡½æ•°çš„æ¡ä»¶ï¼Œä½ è§‰å¾—å¯¹å—ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ<br><br>æˆ‘è®¤ä¸ºæ˜¯å¯¹çš„ï¼Œæ—¢ç„¶ havingæ˜¯åœ¨groupä¹‹åçš„ç­›é€‰ï¼Œé‚£ä¹ˆåªèƒ½é€‰æ‹©groupçš„è®¡ç®—å‡½æ•°","like_count":0,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"æœ±æ™“å³°","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":520343,"discussion_content":"è¯·å‚è€ƒæ€è€ƒé¢˜ç­”æ¡ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621569897,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":285975,"user_name":"æ´›å¥‡","can_delete":false,"product_type":"c1","uid":1624355,"ip_address":"","ucode":"662B4005721119","user_header":"https://static001.geekbang.org/account/avatar/00/18/c9/23/76511858.jpg","comment_is_top":false,"comment_ctime":1617090712,"is_pvip":false,"replies":[{"id":"106117","content":"ä¸ä¼šçš„ï¼ŒHAVINGåé¢çš„SUM(b.salesvalue)ç”¨äºæ•°æ®ç­›é€‰ï¼Œä¸SELECTé‡Œé¢çš„SUM(b.salesvalue)ä½œç”¨ä¸åŒï¼Œä¸å¯ä»¥åˆå¹¶","user_name":"ä½œè€…å›å¤","comment_id":285975,"uid":"2356905","ip_address":"","utype":1,"ctime":1621247779,"user_name_real":"æœ±æ™“å³°"}],"discussion_count":1,"race_medal":0,"score":"1617090712","product_id":100073201,"comment_content":"æœ¬æ–‡ä¸­æœ€åä¸€æ¡SQLçš„ä¸¤å¤„SUM(b.salesvalue)æ˜¯ä¸æ˜¯ä¼šé‡å¤è®¡ç®—ï¼Ÿå®ƒä»¬å¯ä»¥åˆå¹¶å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"æœ±æ™“å³°","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":517838,"discussion_content":"ä¸ä¼šçš„ï¼ŒHAVINGåé¢çš„SUM(b.salesvalue)ç”¨äºæ•°æ®ç­›é€‰ï¼Œä¸SELECTé‡Œé¢çš„SUM(b.salesvalue)ä½œç”¨ä¸åŒï¼Œä¸å¯ä»¥åˆå¹¶","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621247779,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}