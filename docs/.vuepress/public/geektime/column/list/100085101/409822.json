{"id":409822,"title":"08 | å•å…ƒæµ‹è¯•åº”è¯¥æ€ä¹ˆå†™ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯éƒ‘æ™”ï¼</p><p>ç»è¿‡å‰é¢çš„ä»‹ç»ï¼Œæˆ‘ä»¬å·²ç»å¯¹æµ‹è¯•çš„åŸºç¡€æœ‰äº†ç†è§£ï¼Œå·²ç»ä¼šç”¨è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶æ¥å†™æµ‹è¯•äº†ã€‚å¯¹äºé‚£äº›ä¸å¯æ§çš„ç»„ä»¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨ Mock æ¡†æ¶å°†å…¶æ›¿æ¢æ‰ï¼Œè®©æµ‹è¯•ç¯å¢ƒå˜å¾—å¯æ§ã€‚å…¶å®ï¼Œæˆ‘ä»¬åœ¨å‰é¢ä»‹ç»çš„è¿™äº›ä¸œè¥¿éƒ½æ˜¯ä¸ºäº†è®©æˆ‘ä»¬èƒ½å¤Ÿæ›´å¥½åœ°ç¼–å†™å•å…ƒæµ‹è¯•ã€‚</p><p>å•å…ƒæµ‹è¯•æ˜¯æ‰€æœ‰æµ‹è¯•ç±»å‹ä¸­æœ€åŸºç¡€çš„ï¼Œå®ƒçš„ä¼˜ç‚¹æ˜¯è¿è¡Œé€Ÿåº¦å¿«ï¼Œå¯ä»¥å°½æ—©åœ°å‘ç°é—®é¢˜ã€‚åªæœ‰é€šè¿‡å•å…ƒæµ‹è¯•ä¿è¯äº†æ¯ä¸ªç»„ä»¶çš„æ­£ç¡®æ€§ï¼Œæˆ‘ä»¬æ‰æ‹¥æœ‰äº†æ„å»ºç³»ç»Ÿçš„ä¸€å—å—ç¨³å®šçš„åŸºçŸ³ã€‚</p><p>æŒ‰é“ç†æ¥è¯´ï¼Œæˆ‘ä»¬åº”è¯¥å°½å¯èƒ½å¤šåœ°ç¼–å†™å•å…ƒæµ‹è¯•ï¼Œè¿™å¯ä»¥å¸®åŠ©æˆ‘ä»¬æé«˜ä»£ç è´¨é‡ä»¥åŠæ›´å‡†ç¡®åœ°å®šä½é—®é¢˜ã€‚ä½†åœ¨å®é™…çš„å·¥ä½œä¸­ï¼ŒçœŸæ­£å¤§é¢ç§¯ç¼–å†™å•å…ƒæµ‹è¯•çš„å›¢é˜Ÿå´å¹¶ä¸å¤šã€‚å‰é¢æˆ‘ä»¬å·²ç»æåˆ°äº†ä¸€éƒ¨åˆ†åŸå› ï¼ˆæ¯”å¦‚è®¾è®¡æ²¡æœ‰åšå¥½ï¼‰ï¼Œä¹Ÿæœ‰å›¢é˜Ÿè™½ç„¶å†™äº†å•å…ƒæµ‹è¯•ï¼Œä½†å•å…ƒæµ‹è¯•æ²¡æœ‰å¾ˆå¥½åœ°èµ·åˆ°ä¿æŠ¤ç½‘çš„ä½œç”¨ï¼Œåè€Œæ˜¯åœ¨ä»£ç è°ƒæ•´è¿‡ç¨‹ä¸­æˆäº†é˜»ç¢ã€‚</p><p>è¿™ä¸€è®²ï¼Œæˆ‘ä»¬å°±æŠŠå‰é¢å­¦åˆ°çš„çŸ¥è¯†ä¸²è”èµ·æ¥ï¼Œè°ˆè°ˆå¦‚ä½•åšå¥½å•å…ƒæµ‹è¯•ã€‚</p><h2>å•å…ƒæµ‹è¯•ä»€ä¹ˆæ—¶å€™å†™</h2><p>ä½ æ˜¯æ€ä¹ˆç¼–å†™å•å…ƒæµ‹è¯•çš„å‘¢ï¼Ÿå¾ˆå¤šäººçš„åšæ³•æ˜¯å…ˆæŠŠæ‰€æœ‰çš„åŠŸèƒ½ä»£ç éƒ½å†™å®Œï¼Œç„¶åï¼Œå†é’ˆå¯¹å†™å¥½çš„ä»£ç ä¸€ç‚¹ä¸€ç‚¹åœ°è¡¥å†™æµ‹è¯•ã€‚</p><p>åœ¨è¿™ç§ç¼–å†™æµ‹è¯•çš„åšæ³•ä¸­ï¼Œå•å…ƒæµ‹è¯•æ‰®æ¼”ç€éå¸¸ä¸å—äººå¾…è§çš„è§’è‰²ã€‚ä½ çš„æ•´ä¸ªåŠŸèƒ½ä»£ç éƒ½å†™å®Œäº†ï¼Œå†å»å†™æµ‹è¯•å°±æˆäº†ä¸€ä»¶ä¸ºäº†åº”ä»˜å·®äº‹ä¸å¾—ä¸åšçš„äº‹æƒ…ã€‚æ›´å…³é”®çš„ä¸€ç‚¹æ˜¯ï¼Œä½ ç¼–å†™çš„è¿™äº›ä»£ç å¯èƒ½æ˜¯ä½ å‡ å¤©çš„å·¥ä½œé‡ï¼Œä½ å·²ç»å¾ˆéš¾è®°å¾—åœ¨ç¼–å†™è¿™å †ä»£ç æ—¶æ‰€æœ‰çš„ç»†èŠ‚äº†ï¼Œè¿™ä¸ªæ—¶å€™è¡¥å†™çš„æµ‹è¯•å¯¹æå‡ä»£ç è´¨é‡çš„å¸®åŠ©å·²ç»ä¸æ˜¯å¾ˆå¤§äº†ã€‚</p><!-- [[[read_end]]] --><p>æ‰€ä»¥ï¼Œæƒ³è¦å†™å¥½å•å…ƒæµ‹è¯•ï¼Œæœ€åè¡¥æµ‹è¯•çš„åšæ³•æ€»æ˜¯å¾ˆç³Ÿç³•çš„ï¼Œä»…ä»…æ¯”ä¸å†™æµ‹è¯•å¥½ä¸€ç‚¹ã€‚ä½ è¦æƒ³å†™å¥½å•å…ƒæµ‹è¯•çš„è¯ï¼Œ<strong>æœ€å¥½èƒ½å¤Ÿå°†ä»£ç å’Œæµ‹è¯•ä¸€èµ·å†™</strong>ã€‚</p><p>ä½ æˆ–è®¸ä¼šè¯´ï¼Œæˆ‘åœ¨åŠŸèƒ½å†™å®Œåç«‹å³å°±è¡¥æµ‹è¯•äº†ï¼Œè¿™ä¸å°±æ˜¯ä»£ç å’Œæµ‹è¯•ä¸€èµ·å†™çš„å—ï¼Ÿå…¶ä¸­çš„å·®å¼‚åœ¨äºï¼ŒæŠŠæ‰€æœ‰çš„åŠŸèƒ½å†™å®Œçš„è¿™ä¸ªç²’åº¦å®åœ¨æ˜¯å¤ªå¤§äº†ã€‚ä¸ºä¸€ä¸ªå¤§ä»»åŠ¡ç¼–å†™æµ‹è¯•ï¼Œæ˜¯ä¸€ä»¶éš¾åº¦éå¸¸å¤§çš„äº‹ï¼Œè¿™ä¹Ÿæ˜¯å¾ˆå¤šäººè§‰å¾—æµ‹è¯•éš¾å†™çš„é‡è¦å› ç´ ã€‚è¦æƒ³åšå¥½å•å…ƒæµ‹è¯•ï¼Œå…³é”®å°±æ˜¯å·¥ä½œçš„ç²’åº¦è¦å°ã€‚</p><p>å¦‚æœä½ å­¦è¿‡ã€Š10x ç¨‹åºå‘˜å·¥ä½œæ³•ã€‹ï¼Œæˆ–è®¸å·²ç»å¬å‡ºæ¥äº†ã€‚æ²¡é”™ï¼Œè¿™é‡Œçš„å…³é”®ç‚¹å°±æ˜¯è¦åšå¥½ä»»åŠ¡åˆ†è§£ï¼Œè€Œä»»åŠ¡åˆ†è§£çš„å…³é”®å°±æ˜¯ç²’åº¦è¦å°ã€‚</p><blockquote>\n<p>Iâ€™m not a great programmer; Iâ€™m just a good programmer with great habits.<br>\n&nbsp;<br>\næˆ‘ä¸æ˜¯ä¸€ä¸ªä¼Ÿå¤§çš„ç¨‹åºå‘˜ï¼Œåªæ˜¯ä¸€ä¸ªæœ‰ç€å¥½ä¹ æƒ¯çš„ä¼˜ç§€ç¨‹åºå‘˜ã€‚<br>\n&nbsp;<br>\nâ€”â€”  Kent Beck</p>\n</blockquote><p>ä»»åŠ¡åˆ†è§£æ˜¯æ¯ä¸ªç¨‹åºå‘˜éƒ½åº”è¯¥æ‹¥æœ‰çš„å¥½ä¹ æƒ¯ï¼Œå³ä¾¿ä½ <strong>æƒ³å†™å¥½å•å…ƒæµ‹è¯•ä¹Ÿè¦ä»ä»»åŠ¡åˆ†è§£å¼€å§‹</strong>ã€‚æ‰€ä»¥ï¼Œä½ éœ€è¦æŠŠä¸€ä¸ªè¦å®Œæˆçš„éœ€æ±‚æ‹†åˆ†æˆå¾ˆå¤šé¢—ç²’åº¦å¾ˆå°çš„ä»»åŠ¡ã€‚ç²’åº¦è¦å°åˆ°å¯ä»¥åœ¨å¾ˆçŸ­æ—¶é—´å†…å®Œæˆï¼Œæ¯”å¦‚ï¼ŒåŠä¸ªå°æ—¶å°±å¯ä»¥å†™å®Œã€‚åªæœ‰èƒ½å¤ŸæŠŠä»»åŠ¡åˆ†è§£æˆå¾®æ“ä½œï¼Œæˆ‘ä»¬æ‰èƒ½å¤Ÿè®¤æ¸…æœ‰è¶³å¤Ÿçš„å¿ƒåŠ›æ€è€ƒå…¶ä¸­çš„æ¯ä¸ªç»†èŠ‚ã€‚åƒä¸‡ä¸è¦é«˜ä¼°è‡ªå·±å¯¹äºä»»åŠ¡æŠŠæ§çš„ç²’åº¦ï¼Œ<strong>ä¸€å®šè¦æŠŠä»»åŠ¡åˆ†è§£åˆ°éå¸¸å°ï¼Œè¿™æ˜¯èƒ½å¤Ÿå†™å¥½ä»£ç ï¼Œå†™å¥½æµ‹è¯•çš„å‰ææ¡ä»¶ï¼Œç”šè‡³å¯ä»¥è¯´æ˜¯æœ€å…³é”®çš„å› ç´ </strong>ï¼ˆå¦‚ä½•å…·ä½“åˆ†è§£ä¸€ä¸ªéœ€æ±‚ï¼Œæˆ‘æ›¾ç»åœ¨ã€Š10x ç¨‹åºå‘˜å·¥ä½œæ³•ã€‹ä¸­ä¸“é—¨ç”¨äº†<a href=\"https://time.geekbang.org/column/article/78542\">ä¸€è®²çš„ç¯‡å¹…</a>è¿›è¡Œä»‹ç»ï¼Œå¦‚æœä½ æœ‰å…´è¶£ä¸å¦¨å»å›é¡¾ä¸€ä¸‹ï¼‰ã€‚</p><p>å½“æˆ‘ä»¬æŠŠéœ€æ±‚æ‹†åˆ†æˆé¢—ç²’åº¦å¾ˆå°çš„ä»»åŠ¡æ—¶ï¼Œæˆ‘ä»¬æ‰å¼€å§‹è¿›å…¥åˆ°ç¼–ç çš„çŠ¶æ€ã€‚è€Œä»è¿™é‡Œå¼€å§‹ï¼Œæˆ‘ä»¬è¿›å…¥åˆ°ä»£ç å’Œæµ‹è¯•ä¸€èµ·å†™çš„çŠ¶æ€ã€‚</p><h2>ç¼–å†™å•å…ƒæµ‹è¯•çš„è¿‡ç¨‹</h2><p>å¯¹äºä¸€ä¸ªå…·ä½“çš„ä»»åŠ¡ï¼Œæˆ‘ä»¬é¦–å…ˆè¦å¼„æ¸…æ¥šçš„æ˜¯ï¼Œæ€ä¹ˆæ ·ç®—æ˜¯å®Œæˆäº†ã€‚ä¸€ä¸ªå®Œæ•´çš„éœ€æ±‚æˆ‘ä»¬éœ€è¦çŸ¥é“å…¶éªŒæ”¶æ ‡å‡†æ˜¯ä»€ä¹ˆã€‚å…·ä½“åˆ°ä¸€ä¸ªä»»åŠ¡ï¼Œè™½ç„¶æ²¡æœ‰ä¸šåŠ¡äººå‘˜ç»™æˆ‘ä»¬æä¾›éªŒæ”¶æ ‡å‡†ï¼Œæˆ‘ä»¬è‡ªå·±ä¹Ÿè¦æœ‰ä¸€ä¸ªéªŒæ”¶æ ‡å‡†ï¼Œæˆ‘ä»¬è¦èƒ½å¤Ÿå»è¡¡é‡æ€ä¹ˆæ ·æ‰ç®—æ˜¯è¿™ä¸ªä»£ç å†™åˆæ ¼äº†ã€‚</p><p>ç»è¿‡æˆ‘ä»¬è¿™ä¸€ç³»åˆ—å…³äºæµ‹è¯•çš„ä»‹ç»ï¼Œä½ åº”è¯¥å·²ç»çŸ¥é“æˆ‘è¦è¯´ä»€ä¹ˆäº†ï¼š<strong>ä¸€ä¸ªä»»åŠ¡çš„ä»£ç è¦é€šè¿‡æµ‹è¯•æ‰ç®—ç¼–ç é˜¶æ®µçš„å®Œæˆã€‚</strong></p><p>ä½†æµ‹è¯•ç”¨ä¾‹ä»å“ªæ¥å‘¢ï¼Ÿè¿™å°±éœ€è¦æˆ‘ä»¬è®¾è®¡äº†ã€‚ä¸åŒäºä¸šåŠ¡æµ‹è¯•çš„æµ‹è¯•ç”¨ä¾‹ï¼Œæˆ‘ä»¬ç°åœ¨è¦å†™çš„æ˜¯å•å…ƒæµ‹è¯•ã€‚è€Œæˆ‘ä»¬è¦æµ‹çš„å•å…ƒç°åœ¨è¿˜æ²¡æœ‰å†™ï¼Œæ‰€ä»¥ï¼Œæ²¡æœ‰äººä¼šç»™æˆ‘ä»¬æä¾›æµ‹è¯•ç”¨ä¾‹ï¼Œå•å…ƒæµ‹è¯•çš„ç”¨ä¾‹åªèƒ½æˆ‘ä»¬è‡ªå·±æ¥ã€‚</p><p>è¿˜è®°å¾—æˆ‘ä»¬åœ¨å®æˆ˜é‡Œæ€ä¹ˆåšçš„æ·»åŠ  Todo é¡¹å—ï¼Ÿæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±ç»“åˆè¿™ä¸ªéƒ¨åˆ†æ¥è°ˆè°ˆå…·ä½“æ€ä¹ˆåšã€‚</p><p>æˆ‘ä»¬é¦–å…ˆè¦ç¡®å®šçš„æ˜¯å¾…æµ‹å•å…ƒçš„è¡Œä¸ºï¼Œä¹Ÿå°±æ˜¯è¦å®ç°çš„ç±»é‡Œçš„ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒçš„è¡Œä¸ºæ˜¯ä»€ä¹ˆæ ·çš„ã€‚æˆ–è®¸ä½ å·²ç»å‘ç°äº†ï¼Œè¿™å…¶å®å°±æ˜¯ä¸€ä¸ªè½¯ä»¶è®¾è®¡çš„è¿‡ç¨‹ã€‚è¿™é‡Œçš„è®¾è®¡æŒ‡çš„æ˜¯å¾®è§‚çš„è®¾è®¡ï¼Œå°±æ˜¯å…·ä½“çš„ä¸€ä¸ªå‡½æ•°å‡†å¤‡å†™æˆä»€ä¹ˆæ ·å­ã€‚é€šå¸¸åˆ°äº†åŠ¨æ‰‹å†™ä»£ç è¿™ä¸€æ­¥ï¼Œå¤§çš„è®¾è®¡å·²ç»åœ¨å‰é¢åšå®Œäº†ã€‚</p><p>å› ä¸ºæˆ‘ä»¬ç°åœ¨ä¸ä»…ä»…è¦å†™ä»£ç ï¼Œè¿˜è¦å†™æµ‹è¯•ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬åœ¨è®¾è®¡è¿™ä¸ªå‡½æ•°æ¥å£æ—¶ï¼Œè¿˜å¿…é¡»å¢åŠ ä¸€ç‚¹è€ƒé‡ï¼šå®ƒè¦æ€ä¹ˆæµ‹ã€‚</p><p>åœ¨æ·»åŠ ä¸€ä¸ª Todo é¡¹æ—¶ï¼Œæˆ‘ä»¬ç»è¿‡è®¾è®¡å‡ºæ¥çš„å‡½æ•°æ¥å£å°±æ˜¯ä¸‹é¢è¿™æ ·ã€‚</p><pre><code>TodoItem addTodoItem(final TodoParameter todoParameter);\n</code></pre><p>æœ‰äº†ä¸€ä¸ªå…·ä½“çš„å‡½æ•°æ¥å£è®¾è®¡ï¼Œæˆ‘ä»¬å°±å¯ä»¥é’ˆå¯¹å®ƒè¿›è¡Œæ›´å…·ä½“çš„æµ‹è¯•ç”¨ä¾‹è®¾è®¡ï¼Œä¹Ÿå°±æ˜¯è®¾è®¡æµ‹è¯•ç”¨ä¾‹æ¥æè¿°è¿™ä¸ªæ¥å£çš„è¡Œä¸ºã€‚</p><p>æ˜¯çš„ï¼Œè¿™é‡Œæˆ‘ä»¬å¹¶æ²¡æœ‰ç€æ€¥å†™ä»£ç ã€‚å¯¹å¾ˆå¤šäººæ¥è¯´ï¼Œå†™ä»£ç çš„ä¼˜å…ˆçº§å¾ˆé«˜ï¼Œä½†æ˜¯ï¼Œå¦‚æœä¸åœ¨è¿™é‡Œåœä¸€ä¸‹çš„è¯ï¼Œä½ å¯èƒ½å°±ä¸ä¼šå»æ€è€ƒæ˜¯å¦è¿˜æœ‰è¦è€ƒè™‘çš„é—®é¢˜ï¼Œè€Œæ˜¯ç›´å¥”ä»£ç ç»†èŠ‚å»äº†ã€‚è€Œå½“æˆ‘ä»¬ä¸“æ³¨äºç»†èŠ‚æ—¶ï¼Œæœ‰é™çš„æ³¨æ„åŠ›å°±ä¼šè®©ä½ å¿½ç•¥æ‰å¾ˆå¤šä¸œè¥¿ã€‚æ‰€ä»¥ï¼Œ<strong>å…ˆè®¾è®¡æµ‹è¯•ç”¨ä¾‹ï¼Œåå†™ä»£ç </strong>ï¼Œè¿™æ˜¯ä¸€ä¸ªç¼–ç ä¹ æƒ¯çš„é—®é¢˜ã€‚</p><p>æœ‰äº†æ·»åŠ  Todo é¡¹æ¥å£ä¹‹åï¼Œæˆ‘ä»¬å°±å‡†å¤‡äº†ä¸¤ä¸ªæµ‹è¯•åœºæ™¯ï¼š</p><ul>\n<li>æ·»åŠ æ­£å¸¸çš„å‚æ•°å¯¹è±¡ï¼Œè¿”å›ä¸€ä¸ªåˆ›å»ºå¥½çš„ Todo é¡¹ï¼›</li>\n<li>æ·»åŠ ç©ºçš„å‚æ•°å¯¹è±¡ï¼ŒæŠ›å‡ºå¼‚å¸¸ã€‚</li>\n</ul><p>æœ‰äº†æµ‹è¯•åœºæ™¯ï¼Œæ¥ä¸‹æ¥æŠŠè¿™äº›åœºæ™¯å®ä¾‹åŒ–å‡ºæ¥ï¼Œè¿™ä¸ªæ­¥éª¤ç›¸å¯¹æ¥è¯´å°±æ¯”è¾ƒç®€å•äº†ã€‚æ¯”å¦‚ï¼Œå¯¹äºæ·»åŠ æ­£å¸¸çš„å‚æ•°å¯¹è±¡æ¥è¯´ï¼Œé‚£ä»€ä¹ˆæ ·çš„å‚æ•°å¯¹è±¡æ˜¯æ­£å¸¸çš„ï¼Ÿæˆ‘ä»¬å°±ä»£å…¥ä¸€ä¸ªå…·ä½“çš„æ­£å¸¸å‚æ•°ï¼ˆæ¯”å¦‚  fooï¼‰ã€‚æœ‰äº†è¿™ä¸ªå®ä¾‹åŒ–è¿‡çš„å‚æ•°ï¼Œæˆ‘ä»¬å°±å¯ä»¥æŠŠå…·ä½“çš„æµ‹è¯•ç”¨ä¾‹è¡¨ç°å‡ºæ¥äº†ã€‚</p><pre><code>@Test\npublic void should_add_todo_item() {\n    TodoItemRepository repository = mock(TodoItemRepository.class);\n    when(repository.save(any())).then(returnsFirstArg());\n    TodoItemService service = new TodoItemService(repository);\n    \n    TodoItem item = service.addTodoItem(new TodoParameter(&quot;foo&quot;));\n    \n    assertThat(item.getContent()).isEqualTo(&quot;foo&quot;);\n}\n</code></pre><p>åœ¨å®é™…çš„å·¥ä½œä¸­ï¼Œç©¶ç«Ÿæ˜¯å…ˆå†™æµ‹è¯•ï¼Œè¿˜æ˜¯å…ˆå†™å®ç°ä»£ç ï¼Œè¿™æ˜¯ä¸ªäººå·¥ä½œä¹ æƒ¯çš„é—®é¢˜ã€‚å½“æˆ‘ä»¬æœ‰äº†æµ‹è¯•ç”¨ä¾‹ä¹‹åï¼Œå…¶å®å°±æ˜¯æŠŠä¸€ä¸ªå…·ä½“çš„ä»»åŠ¡è¿›ä¸€æ­¥æ‹†åˆ†æˆæ›´å°çš„å­ä»»åŠ¡äº†ã€‚<strong>åªè¦æˆ‘ä»¬å®Œæˆä¸€ä¸ªå­ä»»åŠ¡ï¼Œæˆ‘ä»¬å°±å¯ä»¥åšä¸€æ¬¡ä»£ç çš„æäº¤ï¼Œå› ä¸ºæˆ‘ä»¬è¿™ä¸ªæ—¶å€™ï¼Œæ—¢æœ‰æµ‹è¯•ä»£ç åˆæœ‰å®ç°ä»£ç ï¼Œè€Œä¸”å®ç°ä»£ç æ˜¯é€šè¿‡äº†æµ‹è¯•çš„ã€‚</strong></p><h2>æµ‹æ¥å£è¿˜æ˜¯æµ‹å®ç°ï¼Ÿ</h2><p>ä¸çŸ¥é“ä½ æ˜¯å¦æ³¨æ„åˆ°äº†ï¼Œåœ¨å‰é¢æˆ‘ä¸€ç›´åœ¨è¯´ï¼Œæˆ‘ä»¬è¦æµ‹çš„æ˜¯å‡½æ•°æ¥å£çš„è¡Œä¸ºã€‚æˆ‘ä¸€ç›´è¯´ï¼Œå•å…ƒæµ‹è¯•æ˜¯ä¸€ç§ç™½ç›’æµ‹è¯•ã€‚åœ¨ä¸€äº›äººçš„ç†è§£ä¸­ï¼Œç™½ç›’æµ‹è¯•çš„å…³æ³¨ç‚¹åº”è¯¥æ˜¯å†…éƒ¨å®ç°ã€‚é‚£å•å…ƒæµ‹è¯•åˆ°åº•åº”è¯¥å…³æ³¨æ¥å£ï¼Œè¿˜æ˜¯åº”è¯¥å…³æ³¨å®ç°å‘¢ï¼Ÿ</p><p>æˆ–è®¸ä½ è¿˜ä¸æ¸…æ¥šäºŒè€…ä¹‹é—´çš„åŒºåˆ«ï¼Œè®©æˆ‘ä»¬æŠŠå‰é¢æ·»åŠ  Todo é¡¹çš„ä¾‹å­æ‹¿è¿‡æ¥ã€‚å¦‚æœé‡‡ç”¨æ›´åŠ é¢å‘å®ç°çš„åšæ³•ï¼Œæˆ‘ä»¬åº”è¯¥å¯¹ addTodoItem è¿™ä¸ªå‡½æ•°çš„å†…éƒ¨å®ç°æœ‰è¿›ä¸€æ­¥çš„çº¦æŸï¼Œå°±åƒä¸‹é¢è¿™æ ·ã€‚</p><pre><code>@Test\npublic void should_add_todo_item() {\n    TodoItemRepository repository = mock(TodoItemRepository.class);\n    when(repository.save(any())).then(returnsFirstArg());\n    TodoItemService service = new TodoItemService(repository);\n    \n    TodoItem item = service.addTodoItem(new TodoParameter(&quot;foo&quot;));\n    \n    assertThat(item.getContent()).isEqualTo(&quot;foo&quot;);\n    verify(repository).save(any());\n}\n</code></pre><p>è¿™æ®µä»£ç ä¸­æ ¸å¿ƒçš„å·®åˆ«å°±æ˜¯å¢åŠ äº†ä¸€å¥ verifyï¼Œè¿™ä¹Ÿå°±æ„å‘³ç€ï¼Œæˆ‘è§„å®šåœ¨ addTodoItem çš„å®ç°ä¸­å¿…é¡»è¦è°ƒç”¨ repository çš„ save å‡½æ•°ã€‚</p><p>ä½ æˆ–è®¸ä¼šå¥½å¥‡ï¼Œrepository æœ¬æ¥å°±è¦è°ƒç”¨ save æ–¹æ³•ï¼Œé‚£æˆ‘åœ¨è¿™é‡Œæ ¡éªŒå®ƒè°ƒç”¨äº† save æ–¹æ³•ï¼Œä¼¼ä¹ä¹Ÿæ²¡ä»€ä¹ˆå¤§ä¸äº†çš„ã€‚</p><p>å•ç‹¬è¿™ä¹ˆçœ‹ç¡®å®çœ‹ä¸å‡ºä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯ï¼Œå¦‚æœä½ æœ‰å¾ˆå¤šæµ‹è¯•éƒ½æ˜¯è¿™ä¹ˆå†™ï¼Œå½“ä½ å‡†å¤‡é‡æ„æ—¶ï¼Œä½ å°±ä¼šå‘ç°é—®é¢˜äº†ã€‚å¾ˆå¤šå›¢é˜Ÿä»£ç ä¸€è°ƒæ•´ï¼Œæµ‹è¯•å°±å¤±è´¥ï¼Œä¸€ä¸ªé‡è¦çš„åŸå› å°±æ˜¯ä»£ç å®ç°å’Œæµ‹è¯•ä¹‹é—´ç´§ç´§åœ°ç»‘å®šåœ¨äº†ä¸€èµ·ã€‚å› ä¸ºæµ‹è¯•çº¦æŸçš„æ˜¯å®ç°ç»†èŠ‚ï¼Œè€Œåªè¦è°ƒæ•´å®ç°ç»†èŠ‚ï¼Œæµ‹è¯•å½“ç„¶å°±å¤±è´¥äº†ã€‚è¿™ä¹Ÿæ˜¯å¾ˆå¤šå›¢é˜ŸæŠ±æ€¨å•å…ƒæµ‹è¯•é—®é¢˜å¾ˆå¤šçš„é‡è¦åŸå› ã€‚</p><p>æ‰€ä»¥ï¼Œ<strong>åœ¨å®é™…çš„é¡¹ç›®ä¸­ï¼Œæˆ‘ä¼šæ›´å€¾å‘äºæµ‹è¯•æ¥å£ï¼Œå°½å¯èƒ½å‡å°‘å¯¹äºå®ç°ç»†èŠ‚çš„çº¦æŸã€‚</strong>å…¶å®ï¼Œè¿™ä¸ªåŸåˆ™ä¸ä»…ä»…æ˜¯åœ¨æ¥å£å±‚é¢ä¸Šï¼Œåœ¨ä¸€äº›æµ‹è¯•çš„ç»†èŠ‚ä¸Šä¹Ÿå¯ä»¥è¿™ä¹ˆçº¦å®šï¼Œæ¯”å¦‚ä¸‹é¢è¿™è¡Œä»£ç ã€‚</p><pre><code>when(repository.save(any())).then(returnsFirstArg());\n</code></pre><p>è¿™å…¶å®æ˜¯ä¸€ç§å®½æ³›çš„å†™æ³•ï¼Œæ‰€ä»¥ç”¨äº† anyã€‚å¦‚æœä¸¥æ ¼é™åˆ¶çš„è¯ï¼Œåº”è¯¥ä¸¥æ ¼é™å®šä¸€ä¸ªéå¸¸å…·ä½“çš„å‚æ•°ã€‚</p><pre><code>when(repository.save(new TodoItem(&quot;foo&quot;))).then(returnsFirstArg());\n</code></pre><p>åŒæ ·ï¼Œä¸Šä¸€è®²æˆ‘ä»¬è®²åˆ°äº† Mocoï¼Œæˆ‘ä»¬è®¾ç½®æ¨¡æ‹ŸæœåŠ¡å™¨å¯ä»¥è®¾ç½®å¾—éå¸¸å…·ä½“ï¼Œåƒä¸‹é¢è¿™æ ·ã€‚</p><pre><code>server\n  .request(and(by(&quot;foo&quot;), by(uri(&quot;/foo&quot;))))\n  .response(and(with(text(&quot;bar&quot;)), status(200)));\n</code></pre><p>ä¹Ÿå¯ä»¥è®¾ç½®å¾—éå¸¸å®½æ³›ï¼Œåƒè¿™æ ·ã€‚</p><pre><code>server.request(by(uri(&quot;/foo&quot;))).response(&quot;bar&quot;); \n</code></pre><p>é™¤éè¿™ä¸ªæµ‹è¯•é‡Œé¢æœ‰å¤šä¸ªç±»ä¼¼çš„è¯·æ±‚ï¼Œå¿…é¡»è¦åšåŒºåˆ†ï¼Œå¦åˆ™ï¼Œæˆ‘å€¾å‘äºä½¿ç”¨å®½æ³›ä¸€äº›çš„çº¦æŸã€‚è¿™åœ¨æŸç§ç¨‹åº¦ä¸Šä¼šé™ä½æœªæ¥é‡æ„ä»£ç æ—¶å¸¦æ¥çš„å½±å“ã€‚</p><p>ä¸è¿‡å®è¯è¯´ï¼Œè¦æƒ³å®Œå…¨æ¶ˆé™¤å¯¹äºå®ç°ç»†èŠ‚çš„ä¾èµ–ï¼Œæœ‰æ—¶å€™ä¹Ÿæ˜¯å¾ˆéš¾çš„ã€‚æ¯”å¦‚åœ¨æˆ‘ä»¬å‰é¢çš„ TodoItemService çš„ä¾‹å­é‡Œé¢ï¼Œrepository æœ¬èº«ä¹Ÿæ˜¯ TodoItemService çš„ä¸€ç§å®ç°ç»†èŠ‚ï¼Œä¸€æ—¦è¿›è¡Œä¸€äº›é‡æ„ï¼ŒæŠŠ repository çš„ä¾èµ–ä» TodoItemService ä¸­æ‹¿æ‰ï¼Œå¾ˆå¤šæµ‹è¯•ä»£ç ä¹Ÿéœ€è¦è°ƒæ•´ã€‚æ‰€ä»¥ï¼Œåœ¨å®é™…çš„é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬åªèƒ½è¯´å°½å¯èƒ½å‡å°‘å¯¹äºå®ç°ç»†èŠ‚çš„ä¾èµ–ã€‚</p><p>å…¶å®ï¼Œå…³äºå®ç°ç»†èŠ‚çš„æµ‹è¯•ä¹Ÿæ˜¯ä¸€ç§é‡å¤ï¼Œç­‰äºä½ ç”¨æµ‹è¯•æŠŠä»£ç åˆé‡æ–°å†™äº†ä¸€éã€‚ç¨‹åºå‘˜çš„å·¥ä½œä¸­æœ‰ä¸€ç§é‡è¦çš„åŸåˆ™ï¼šDRYï¼ˆDonâ€™t Repeat Yourselfï¼‰ï¼Œè¿™ä¸ä»…ä»…æ˜¯è¯´ä»£ç ä¸­ä¸è¦æœ‰é‡å¤ï¼Œè€Œä¸”å„ç§ä¿¡æ¯éƒ½ä¸è¦é‡å¤ï¼ˆæˆ‘åœ¨ã€Šè½¯ä»¶è®¾è®¡ä¹‹ç¾ã€‹ä¸­è®²è¿‡ <a href=\"https://time.geekbang.org/column/article/265128\">DRY åŸåˆ™</a>ï¼Œæœ‰å…´è¶£ä¸å¦¨å›é¡¾ä¸€ä¸‹ï¼‰ã€‚</p><p>æˆ‘å»ºè®®ä½ åœ¨è®¾è®¡å•å…ƒæµ‹è¯•çš„æ—¶å€™ä¸è¦é¢å‘å®ç°ç»†èŠ‚ã€‚ä½†åè¿‡æ¥ï¼Œæœ‰äº›æ—¶å€™æµ‹è¯•ç¡®å®ä¼šæ¼æ‰ä¸€äº›ç»†èŠ‚ï¼Œå°¤å…¶æ˜¯ä¸€äº›å®ç°ä»£ç ä¸­çš„åˆ†æ”¯ã€‚æ€ä¹ˆæ ·å‘ç°è‡ªå·±çš„ä»£ç ä¸­æ˜¯å¦æœ‰é—æ¼å‘¢ï¼Ÿè¿™å°±æ˜¯æˆ‘ä»¬ä¸‹ä¸€è®²è¦è®²çš„å†…å®¹ï¼šæµ‹è¯•è¦†ç›–ç‡ã€‚</p><h2>æ€»ç»“æ—¶åˆ»</h2><p>ä»Šå¤©æˆ‘ä»¬è®²äº†å¦‚ä½•å»å†™å•å…ƒæµ‹è¯•ã€‚å¾ˆå¤šå›¢é˜Ÿç”±äºå¤šæ–¹é¢çš„åŸå› ï¼ˆæ¯”å¦‚è®¾è®¡åšå¾—ä¸å¥½ï¼‰ï¼Œå¯¼è‡´å•å…ƒæµ‹è¯•å†™å¾—å°‘ã€‚ä½†ä¸ºäº†æé«˜ä»£ç è´¨é‡ä»¥åŠæ›´å‡†ç¡®åœ°å®šä½é—®é¢˜ï¼Œæˆ‘ä»¬åº”è¯¥å¤šå†™å•å…ƒæµ‹è¯•ã€‚</p><p>å•å…ƒæµ‹è¯•æœ€å¥½æ˜¯å’Œå®ç°ä»£ç ä¸€èµ·å†™ï¼Œä»¥ä¾¿å‡å°‘åç»­è¡¥æµ‹è¯•çš„ç—›è‹¦ã€‚æƒ³å†™å¥½æµ‹è¯•ï¼Œå…³é”®è¦åšå¥½ä»»åŠ¡åˆ†è§£ï¼Œå¦åˆ™ï¼Œé¢å¯¹ä¸€ä¸ªå·¨å¤§çš„éœ€æ±‚ï¼Œæ²¡æœ‰äººçŸ¥é“å¦‚ä½•å»ç»™å®ƒå†™å•å…ƒæµ‹è¯•ã€‚</p><p>ç¼–å†™å•å…ƒæµ‹è¯•çš„è¿‡ç¨‹ï¼Œå®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªä»»åŠ¡å¼€å‘çš„è¿‡ç¨‹ã€‚ä¸€ä¸ªä»»åŠ¡ä»£ç çš„å®Œæˆï¼Œä¸ä»…ä»…æ˜¯å†™äº†å®ç°ä»£ç ï¼Œè¿˜è¦é€šè¿‡ç›¸åº”çš„æµ‹è¯•ã€‚ä¸€èˆ¬è€Œè¨€ï¼Œä»»åŠ¡å¼€å‘è¦å…ˆè®¾è®¡ç›¸åº”çš„æ¥å£ï¼Œç¡®å®šå…¶è¡Œä¸ºï¼Œç„¶åæ ¹æ®è¿™ä¸ªæ¥å£è®¾è®¡ç›¸åº”çš„æµ‹è¯•ç”¨ä¾‹ï¼Œæœ€åï¼ŒæŠŠè¿™äº›ç”¨ä¾‹å®ä¾‹åŒ–æˆä¸€ä¸ªä¸ªå…·ä½“çš„å•å…ƒæµ‹è¯•ã€‚</p><p>å•å…ƒæµ‹è¯•å¸¸è§çš„ä¸€ä¸ªé—®é¢˜æ˜¯ä»£ç ä¸€é‡æ„ï¼Œå•å…ƒæµ‹è¯•å°±å´©æºƒã€‚è¿™å¾ˆå¤§ç¨‹åº¦ä¸Šæ˜¯ç”±äºæµ‹è¯•å¯¹å®ç°ç»†èŠ‚çš„ä¾èµ–è¿‡äºç´§å¯†ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå•å…ƒæµ‹è¯•æœ€å¥½æ˜¯é¢å‘æ¥å£è¡Œä¸ºæ¥è®¾è®¡ï¼Œå› ä¸ºè¿™æ˜¯ä¸€ä¸ªæ›´å®½æ³›çš„è¦æ±‚ã€‚å…¶å®ï¼Œåœ¨æµ‹è¯•ä¸­çš„å¾ˆå¤šç»†èŠ‚ä¹Ÿå¯ä»¥è€ƒè™‘è®¾ç½®å¾—å®½æ³›ä¸€äº›ï¼Œæ¯”å¦‚æ¨¡æ‹Ÿå¯¹è±¡çš„è®¾ç½®ã€æ¨¡æ‹ŸæœåŠ¡å™¨çš„è®¾ç½®ç­‰ç­‰ã€‚</p><p>å¦‚æœä»Šå¤©çš„å†…å®¹ä½ åªèƒ½è®°ä½ä¸€ä»¶äº‹ï¼Œé‚£è¯·è®°ä½ï¼š<strong>åšå¥½ä»»åŠ¡åˆ†è§£ï¼Œå†™å¥½å•å…ƒæµ‹è¯•ã€‚</strong></p><h2>æ€è€ƒé¢˜</h2><p>ä»Šå¤©æˆ‘ä»¬è®¨è®ºäº†å¦‚ä½•å†™å¥½å•å…ƒæµ‹è¯•ï¼Œä½ åœ¨å®é™…é¡¹ç›®ä¸­å†™è¿‡å•å…ƒæµ‹è¯•å—ï¼Ÿä½ é‡åˆ°äº†å“ªäº›é—®é¢˜ï¼Œæˆ–è€…æœ‰å“ªäº›ç»éªŒå¯ä»¥åˆ†äº«å‘¢ï¼Ÿæ¬¢è¿åœ¨ç•™è¨€åŒºåˆ†äº«ä½ çš„è§‚ç‚¹ã€‚</p>","neighbors":{"left":{"article_title":"07 | Mock æ¡†æ¶ï¼šæ€ä¹ˆè®©æµ‹è¯•å˜å¾—å¯æ§ï¼Ÿ","id":408762},"right":{"article_title":"09 | æµ‹è¯•è¦†ç›–ç‡ï¼šå¦‚ä½•æ‰¾å‡ºæ²¡æœ‰æµ‹è¯•åˆ°çš„ä»£ç ï¼Ÿ","id":410429}},"comments":[{"had_liked":false,"id":310069,"user_name":"sylan215","can_delete":false,"product_type":"c1","uid":1019029,"ip_address":"","ucode":"5A2CF31BC69F40","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8c/95/4544d905.jpg","comment_is_top":false,"comment_ctime":1630477824,"is_pvip":false,"replies":[{"id":"112731","content":"æ€»ç»“å¾—å¾ˆå¥½","user_name":"ä½œè€…å›å¤","user_name_real":"éƒ‘æ™”","uid":"1258861","ctime":1631063788,"ip_address":"","comment_id":310069,"utype":1}],"discussion_count":1,"race_medal":0,"score":"31695248896","product_id":100085101,"comment_content":"1ã€å•å…ƒæµ‹è¯•å¯ä»¥å¸®åŠ©å°½æ—©å‘ç°é—®é¢˜ï¼Œå°½é‡å¤šçš„å•å…ƒæµ‹è¯•ä¹Ÿæœ‰åŠ©äºæå‡ä»£ç è´¨é‡ä»¥åŠæ›´å‡†ç¡®çš„å®šä½é—®é¢˜ï¼›<br><br>2ã€å•å…ƒæµ‹è¯•å°½é‡å’Œç¼–ç çš„æ—¶å€™ä¸€èµ·å†™ï¼Œå¦‚æœç­‰ä»£ç å®ç°å®Œäº†ï¼Œä¼šå› ä¸ºè¦å†™çš„æµ‹è¯•å¤ªå¤šï¼Œè€Œäº§ç”Ÿç•æƒ§ï¼Œå®¹æ˜“æ”¾å¼ƒï¼›<br><br>3ã€è¦å†™å¥½å•å…ƒæµ‹è¯•ï¼Œè¿˜è¦å–„äºä»»åŠ¡åˆ†è§£ï¼Œæ‰€è°“çš„å•å…ƒï¼Œå°±æ˜¯ä»»åŠ¡çš„æŸä¸ªéƒ¨åˆ†ï¼Œå¥½çš„ä»»åŠ¡æ‹†è§£ï¼Œæ˜¯ç¼–ç å’Œæµ‹è¯•æˆåŠŸçš„ä¸äºŒæ³•é—¨ï¼›<br><br>4ã€æ¯å®Œæˆä¸€ä¸ªå­ä»»åŠ¡ï¼Œéƒ½å¯ä»¥æŠŠæ‰€æœ‰æµ‹è¯•å¿«é€Ÿçš„è·‘ä¸€éï¼Œé¿å…å‰åçš„é€»è¾‘å½±å“ï¼Œå¦‚æœæµ‹è¯•é€šè¿‡ï¼Œå°±å¯ä»¥è¿›è¡Œä»£ç æäº¤ï¼Œè¿™å¯ä»¥ç®—ä¸€ä¸ªé‡Œç¨‹ç¢‘ï¼›<br><br>5ã€æœ€å¥½æ˜¯å…ˆå†™æµ‹è¯•ç”¨ä¾‹ï¼Œå†è¿›è¡Œç¼–ç ï¼Œè¿™é‡Œçš„æµ‹è¯•ç”¨ä¾‹ä¸ä¸€å®šæ˜¯æµ‹è¯•åŒå­¦é‚£ç§ä¸“ä¸šçš„ç”¨ä¾‹ï¼Œè€Œæ˜¯æˆ‘ä»¬éœ€è¦è¦†ç›–çš„é€»è¾‘åœºæ™¯ï¼ˆä¹Ÿå¯ä»¥æ‰¾æµ‹è¯•ååŠ©æä¾›ç”¨ä¾‹ï¼‰ï¼›<br><br>6ã€ä¼˜å…ˆæµ‹è¯•æ¥å£ï¼Œå†æ ¹æ®æ—¶é—´æƒ…å†µçœ‹æ˜¯å¦è¦éªŒè¯å®ç°ï¼Œå› ä¸ºå®ç°å¯èƒ½ä¼šå› ä¸ºé€»è¾‘å˜æ›´è€Œå¤±æ•ˆï¼ˆç»´æŠ¤æˆæœ¬å˜å¤§ï¼‰ï¼›<br><br>ä»¥ä¸Šï¼ŒæœŸå¾…åç»­çš„ç²¾å½©å†…å®¹ã€‚","like_count":8,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"éƒ‘æ™”","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526117,"discussion_content":"æ€»ç»“å¾—å¾ˆå¥½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631063788,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":308585,"user_name":"X","can_delete":false,"product_type":"c1","uid":1460452,"ip_address":"","ucode":"197AD33D438298","user_header":"https://static001.geekbang.org/account/avatar/00/16/48/e4/6feec30f.jpg","comment_is_top":false,"comment_ctime":1629690864,"is_pvip":false,"replies":[{"id":"111845","content":"è¿™å–å†³äºä½ è¦æµ‹çš„æ˜¯ä»€ä¹ˆï¼Œæˆ‘åœ¨ä¸“æ é‡Œå»ºè®®çš„æ˜¯æµ‹è¯•æ¥å£ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒMock çš„å…¥å‚å°±ä¸æ˜¯å…³é”®ç‚¹ï¼Œä¸ºå•¥è¦é™åˆ¶é‚£ä¹ˆä¸¥æ ¼å‘¢ï¼Ÿå¦‚æœé™åˆ¶ä¸¥æ ¼äº†ï¼Œå°±æ˜¯åœ¨åšç»†èŠ‚çš„æµ‹è¯•ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒ‘æ™”","uid":"1258861","ctime":1629895900,"ip_address":"","comment_id":308585,"utype":1}],"discussion_count":2,"race_medal":0,"score":"23104527344","product_id":100085101,"comment_content":"è¯·é—®è€å¸ˆï¼Œå¦‚æœ æ¥å£è¡Œä¸ºMockï¼Œå…¥å‚è®¾ç½®å®½æ³›ä¸€äº›ï¼ˆanyï¼‰ï¼Œé‚£è¿™æ ·å…¥å‚æ„Ÿè§‰æ²¡æœ‰æµ‹è¯•åˆ°ï¼Œç»†èŠ‚ä¸Šä¼šä¸ä¼šæœ‰å•¥é—®é¢˜ï¼Ÿ ç°åœ¨æµ‹è¯•éƒ½æ˜¯ä¸¥æ ¼é™åˆ¶å‡ºå…¥å‚ã€‚ã€‚","like_count":5,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"éƒ‘æ™”","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":525551,"discussion_content":"è¿™å–å†³äºä½ è¦æµ‹çš„æ˜¯ä»€ä¹ˆï¼Œæˆ‘åœ¨ä¸“æ é‡Œå»ºè®®çš„æ˜¯æµ‹è¯•æ¥å£ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒMock çš„å…¥å‚å°±ä¸æ˜¯å…³é”®ç‚¹ï¼Œä¸ºå•¥è¦é™åˆ¶é‚£ä¹ˆä¸¥æ ¼å‘¢ï¼Ÿå¦‚æœé™åˆ¶ä¸¥æ ¼äº†ï¼Œå°±æ˜¯åœ¨åšç»†èŠ‚çš„æµ‹è¯•ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1629895900,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1193874,"avatar":"https://static001.geekbang.org/account/avatar/00/12/37/92/961ba560.jpg","nickname":"æˆäººä»¥ğŸŸï¼Œä¸å¦‚æˆäººä»¥æ¸”","note":"","ucode":"BD53829E924B66","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":565003,"discussion_content":"ç»†èŠ‚ä¸éœ€è¦æµ‹è¯•å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650370524,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":308209,"user_name":"Gojustforfun","can_delete":false,"product_type":"c1","uid":1187021,"ip_address":"","ucode":"7513A40F27344F","user_header":"https://static001.geekbang.org/account/avatar/00/12/1c/cd/8d552516.jpg","comment_is_top":false,"comment_ctime":1629451307,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"18809320491","product_id":100085101,"comment_content":"æœ‰æ—¶å€™å†™å®Œå•å…ƒæµ‹è¯•ï¼Œå¯¹äºå…³é”®çš„â€œå•å…ƒâ€å¯èƒ½è¿˜éœ€è¦çœ‹çœ‹å…¶è¿è¡Œæ—¶é—´ä»¥åŠå†…å­˜åˆ†é…æƒ…å†µï¼ˆåŸºå‡†&#47;æ€§èƒ½æµ‹è¯•ï¼‰ã€‚è¯·é—®è€å¸ˆï¼Œç¨‹åºå‘˜æ˜¯å¦è¦è¿›è¡Œæ€§èƒ½æµ‹è¯•ï¼Ÿå¦‚ä½•è¿›è¡Œæ€§èƒ½æµ‹è¯•ï¼Ÿå¯å¦åŠ é¤ä¸€ç¯‡èŠèŠï¼Ÿè°¢è°¢","like_count":4},{"had_liked":false,"id":313419,"user_name":"å¤§å¸ˆå…„","can_delete":false,"product_type":"c1","uid":1727181,"ip_address":"","ucode":"8678D4E4DE426E","user_header":"https://static001.geekbang.org/account/avatar/00/1a/5a/cd/8710ed11.jpg","comment_is_top":false,"comment_ctime":1632414000,"is_pvip":true,"replies":[{"id":"113535","content":"ç»™ä½ ä¸ªå»ºè®®ï¼Œä»æŒç»­é›†æˆå…¥æ‰‹ï¼Œæˆ‘åœ¨ã€Š10xç¨‹åºå‘˜å·¥ä½œæ³•ã€‹ä¸­è®²è¿‡ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒ‘æ™”","uid":"1258861","ctime":1632469965,"ip_address":"","comment_id":313419,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10222348592","product_id":100085101,"comment_content":"ä¿®æ”¹ä»£ç çš„è‰ºæœ¯ï¼Œç¿»äº†å‡ éï¼Œå­¦ä¹ åˆ°ä¸€äº›æŠ€å·§ï¼Œè°ƒæ•´äº†é—ç•™ç¨‹åºçš„è®¾è®¡ã€‚ä¸ªäººä¸Šæœ‰ä¸€äº›æˆé•¿ï¼Œæƒ³åœ¨å›¢é˜Ÿå†…æ¨å¹¿å•å…ƒæµ‹è¯•ï¼Œå‘èµ·äº†å‡ æ¬¡å•å…ƒæµ‹è¯•çš„åˆ†äº«ä¸å®æˆ˜å…¥é—¨ã€‚å‘ç°æ²¡è½åœ°æˆè¦†ç›–ç‡ï¼Œæˆ–è€…å¼ºæµç¨‹ï¼Œå°ä¼™ä¼´éƒ½æ˜¯è·³è¿‡ã€‚","like_count":2,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"éƒ‘æ™”","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527342,"discussion_content":"ç»™ä½ ä¸ªå»ºè®®ï¼Œä»æŒç»­é›†æˆå…¥æ‰‹ï¼Œæˆ‘åœ¨ã€Š10xç¨‹åºå‘˜å·¥ä½œæ³•ã€‹ä¸­è®²è¿‡ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632469965,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":311217,"user_name":"Geek_3b1096","can_delete":false,"product_type":"c1","uid":1549364,"ip_address":"","ucode":"A6BD92B79B3632","user_header":"","comment_is_top":false,"comment_ctime":1631109651,"is_pvip":false,"replies":[{"id":"112790","content":"ç¡®å®éš¾ï¼Œéœ€è¦ç»ƒï¼Œç»ƒå¥½äº†æ‰å’Œåˆ«äººæ‹‰å¼€å·®è·çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒ‘æ™”","uid":"1258861","ctime":1631150520,"ip_address":"","comment_id":311217,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10221044243","product_id":100085101,"comment_content":"ç²’åº¦è¦å°åˆ°å¯ä»¥åœ¨å¾ˆçŸ­æ—¶é—´å†…å®Œæˆ &lt;- éš¾ï¼Œå­¦ä¹ å­¦ä¹ ï¼","like_count":2,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"éƒ‘æ™”","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526524,"discussion_content":"ç¡®å®éš¾ï¼Œéœ€è¦ç»ƒï¼Œç»ƒå¥½äº†æ‰å’Œåˆ«äººæ‹‰å¼€å·®è·çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631150520,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":308122,"user_name":"å¤§ç¢—","can_delete":false,"product_type":"c1","uid":1027207,"ip_address":"","ucode":"F9CDC0C5BE48AC","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ac/87/8ed5880a.jpg","comment_is_top":false,"comment_ctime":1629421848,"is_pvip":false,"replies":[{"id":"111607","content":"ä¸ä¼šï¼Œverifyæ˜¯ä¸€ç§æ–­è¨€ï¼Œä¸ä¼šå½±å“è¦†ç›–ç‡ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒ‘æ™”","uid":"1258861","ctime":1629436921,"ip_address":"","comment_id":308122,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10219356440","product_id":100085101,"comment_content":"è¯·é—®è€å¸ˆè¿™ä¸ªaddItemçš„verifyå¯ä»¥å»æ‰ä¹ˆï¼Œä¸å†™æµ‹è¯•è¦†ç›–åº¦ä¸ä¼šä¸‹é™","like_count":2,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"éƒ‘æ™”","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":525398,"discussion_content":"ä¸ä¼šï¼Œverifyæ˜¯ä¸€ç§æ–­è¨€ï¼Œä¸ä¼šå½±å“è¦†ç›–ç‡ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629436921,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":348157,"user_name":"if...else...","can_delete":false,"product_type":"c1","uid":2550743,"ip_address":"","ucode":"D0565908C99695","user_header":"https://static001.geekbang.org/account/avatar/00/26/eb/d7/90391376.jpg","comment_is_top":false,"comment_ctime":1654786815,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5949754111","product_id":100085101,"comment_content":"åšå¥½ä»»åŠ¡åˆ†è§£ï¼Œå†™å¥½å•å…ƒæµ‹è¯•ã€‚--è®°ä¸‹æ¥","like_count":1},{"had_liked":false,"id":343216,"user_name":"å½“åˆè«ç›¸è¯†","can_delete":false,"product_type":"c1","uid":2768765,"ip_address":"","ucode":"313917BB360D48","user_header":"https://static001.geekbang.org/account/avatar/00/2a/3f/7d/f624fa69.jpg","comment_is_top":false,"comment_ctime":1650711231,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5945678527","product_id":100085101,"comment_content":"è€å¸ˆï¼Œå…³äºguiç¨‹åºåº”è¯¥å¦‚ä½•å†™å•å…ƒæµ‹è¯•å‘¢ï¼Œæ¯”å¦‚qtå†™å‡ºçš„ç¨‹åºï¼Œæˆ‘é€šå¸¸æ˜¯è¿è¡Œå¯æ‰§è¡Œç¨‹åºï¼Œçœ‹uiå“åº”ä»¥åŠç›¸å…³é€»è¾‘æ˜¯å¦è¾¾åˆ°é¢„æœŸã€‚è¿˜è¯·è€å¸ˆæŒ‡ç‚¹è¿·æ´¥ï¼","like_count":1},{"had_liked":false,"id":358304,"user_name":"Monday","can_delete":false,"product_type":"c1","uid":1250907,"ip_address":"å¹¿ä¸œ","ucode":"77B9BACC783598","user_header":"https://static001.geekbang.org/account/avatar/00/13/16/5b/83a35681.jpg","comment_is_top":false,"comment_ctime":1664182772,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1664182772","product_id":100085101,"comment_content":"â€œå•å…ƒæµ‹è¯•å¸¸è§çš„ä¸€ä¸ªé—®é¢˜æ˜¯ä»£ç ä¸€é‡æ„ï¼Œå•å…ƒæµ‹è¯•å°±å´©æºƒã€‚è¿™å¾ˆå¤§ç¨‹åº¦ä¸Šæ˜¯ç”±äºæµ‹è¯•å¯¹å®ç°ç»†èŠ‚çš„ä¾èµ–è¿‡äºç´§å¯†ã€‚â€ <br> è¯´åˆ°æˆ‘çš„å¿ƒåé‡Œï¼Œæˆ‘å–œæ¬¢å†™å¾ˆå¤šå•å…ƒæµ‹è¯•ï¼Œä½†æ˜¯éƒ½æ˜¯æ ¹æ®ä»£ç æ¥å†™çš„ï¼Œå½“ä»£ç é‡æ„æ—¶ï¼Œè¿˜å¾—é‡æ„å•å…ƒæµ‹è¯•ï¼Œå·¥ä½œé‡ç›´æ¥å¤šä¸€å€ï¼ˆå› ä¸ºå•å…ƒæµ‹è¯•ä»£ç æ˜¯æœ¬èº«å°±æ˜¯å¸¸è§„ä»£ç çš„2å€ä»¥ä¸Šï¼‰","like_count":0},{"had_liked":false,"id":354710,"user_name":"æ„¿å‡Œé£","can_delete":false,"product_type":"c1","uid":2357458,"ip_address":"æ²³åŒ—","ucode":"E80CC09C7D528D","user_header":"https://static001.geekbang.org/account/avatar/00/23/f8/d2/494c182a.jpg","comment_is_top":false,"comment_ctime":1660706343,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1660706343","product_id":100085101,"comment_content":"æƒ³æ³•ï¼šç»„åˆå¯¼è‡´æ¨¡å‹æµ‹è¯•æ—¶å®ç°ç»†èŠ‚çš„æš´æ¼ï¼Œä½†æ˜¯å¢åŠ äº†æ¨¡å‹ç‹¬ç«‹çš„å¯æµ‹è¯•æ€§---&gt;é¦–å…ˆå¾—èƒ½å•ç‹¬æµ‹è¯•ï¼Œæ‰€ä»¥æš´æ¼å®ç°ç»†èŠ‚çš„å½±å“å¯å¿½ç•¥ã€‚","like_count":0},{"had_liked":false,"id":341494,"user_name":"èŠ±èŠ±å¤§è„¸çŒ«","can_delete":false,"product_type":"c1","uid":1117318,"ip_address":"","ucode":"8ABDB3F7F4FB0F","user_header":"https://static001.geekbang.org/account/avatar/00/11/0c/86/8e52afb8.jpg","comment_is_top":false,"comment_ctime":1649660466,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1649660466","product_id":100085101,"comment_content":"è€å¸ˆï¼Œç°åœ¨å°±æœ‰ä½ è¯´çš„å…³äºverifyçš„é—®é¢˜å­˜åœ¨ï¼Œæ‚¨è¯´è¦å‡å°‘ï¼Œä½†æ˜¯åˆä¸å¯é¿å…ï¼Œè¿™ä¸€å—ä½¿ç”¨verifyçš„åº¦åœ¨å“ªé‡Œï¼Œæœ‰æ²¡æœ‰ä¸€ä¸ªåˆé€‚çš„åº¦é‡æŒ‡æ ‡ï¼Œè¿˜æ˜¯çœ‹ä¸»è§‚å°è±¡å¤„ç†ï¼Ÿ<br>å› ä¸ºæœ‰ä¸€äº›å¯¹è±¡å‚æ•°è¿›å…¥å•å…ƒæµ‹è¯•çš„æ–¹æ³•ä»¥åï¼Œä¼šæœ‰äº›è½¬æ¢å¤„ç†ï¼Œç”Ÿæˆä¸€ä¸ªæ–°å¯¹è±¡å‚æ•°ä¼ é€’åˆ°ä¾èµ–å¯¹è±¡çš„æ–¹æ³•ä¸­ï¼Œè¿™æ—¶å€™éœ€è¦æ ¡éªŒå¯¹åº”çš„verifyå…¥å‚æ˜¯å¦ä¸é¢„æœŸä¸€è‡´ï¼Œ å¹¶ä¸”é’ˆå¯¹è‡ªå®šä¹‰çš„å…¥å‚å¯¹è±¡ï¼Œè¿˜éœ€è¦å®ç°equalsä¸hashcodeæ–¹æ³•ï¼Œ","like_count":0},{"had_liked":false,"id":338112,"user_name":"å°”å†¬æ©™","can_delete":false,"product_type":"c1","uid":1225224,"ip_address":"","ucode":"0B013A49BC18DA","user_header":"https://static001.geekbang.org/account/avatar/00/12/b2/08/92f42622.jpg","comment_is_top":false,"comment_ctime":1647306815,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1647306815","product_id":100085101,"comment_content":"<br>TodoItem addTodoItem(final TodoParameter todoParameter); è¯·é—®è¿™æ˜¯ä»€ä¹ˆæµ‹è¯•æ¡†æ¶è¯­æ³•ï¼Ÿ","like_count":0},{"had_liked":false,"id":337969,"user_name":"å°”å†¬æ©™","can_delete":false,"product_type":"c1","uid":1225224,"ip_address":"","ucode":"0B013A49BC18DA","user_header":"https://static001.geekbang.org/account/avatar/00/12/b2/08/92f42622.jpg","comment_is_top":false,"comment_ctime":1647188839,"is_pvip":false,"replies":[{"id":"123668","content":"è¿™æ˜¯ä¸€ä¸ªä¼ªå‘½é¢˜ï¼ŒæŠŠä»£ç æŠ½å‡ºæ¥ï¼Œæˆä¸ºå¦å¤–ä¸€ä¸ªç±»ï¼Œå®ƒå°±å˜æˆäº†å…¬æœ‰çš„ã€‚åœ¨æˆ‘çš„å‡ ä¸ªä¸“æ é‡Œï¼Œæˆ‘ä¸€ç›´åœ¨è¯´ï¼Œä»£ç å¤§å°±æ˜¯é—®é¢˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1258861","ctime":1647411271,"ip_address":"","comment_id":337969,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1647188839","product_id":100085101,"comment_content":"ç§æœ‰å‡½æ•°å¦‚ä½•æµ‹è¯•å‘¢","like_count":0,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"éƒ‘æ™”","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":556535,"discussion_content":"è¿™æ˜¯ä¸€ä¸ªä¼ªå‘½é¢˜ï¼ŒæŠŠä»£ç æŠ½å‡ºæ¥ï¼Œæˆä¸ºå¦å¤–ä¸€ä¸ªç±»ï¼Œå®ƒå°±å˜æˆäº†å…¬æœ‰çš„ã€‚åœ¨æˆ‘çš„å‡ ä¸ªä¸“æ é‡Œï¼Œæˆ‘ä¸€ç›´åœ¨è¯´ï¼Œä»£ç å¤§å°±æ˜¯é—®é¢˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647411271,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":332020,"user_name":"å¾®ç¬‘","can_delete":false,"product_type":"c1","uid":1685222,"ip_address":"","ucode":"C5EE55E23D2C57","user_header":"https://static001.geekbang.org/account/avatar/00/19/b6/e6/db12908c.jpg","comment_is_top":false,"comment_ctime":1642987711,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1642987711","product_id":100085101,"comment_content":"ä»£ç å†™å¥½ä»¥åï¼Œå•å…ƒæµ‹è¯•å·¥ä½œé‡ä¼šå°‘å¾ˆå¤šã€‚","like_count":0},{"had_liked":false,"id":320945,"user_name":"aoe","can_delete":false,"product_type":"c1","uid":1121758,"ip_address":"","ucode":"1C6201EDB4E954","user_header":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","comment_is_top":false,"comment_ctime":1636593107,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1636593107","product_id":100085101,"comment_content":"åŸæ¥å†™å•å…ƒæµ‹è¯•éå¸¸åƒåŠ›æ˜¯å› ä¸ºä»£ç å†™å®Œäº†æœ€åæ‰åŠ æµ‹è¯•ä»£ç ï¼å’Œå‡½æ•°ä¸€èµ·å†™æµ‹è¯•å°±ç®€å•å¤šäº†ï¼Œè¿˜å¯ä»¥ä»è®¾è®¡æ—¶å°±æ”¯æŒæµ‹è¯•ï¼","like_count":0}]}