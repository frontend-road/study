{"id":501543,"title":"20 | ç½‘çº¦è½¦ç³»ç»Ÿè®¾è®¡ï¼šæ€æ ·è®¾è®¡ä¸€ä¸ªæ—¥èµš 5 äº¿çš„ç½‘çº¦è½¦ç³»ç»Ÿï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯ææ™ºæ…§ã€‚</p><p>ç½‘çº¦è½¦çš„å®˜æ–¹å®šä¹‰æ˜¯ï¼šâ€œä»¥äº’è”ç½‘æŠ€æœ¯ä¸ºä¾æ‰˜ï¼Œæ„å»ºæœåŠ¡å¹³å°ï¼Œæ•´åˆä¾›éœ€ä¿¡æ¯ï¼Œä½¿ç”¨ç¬¦åˆæ¡ä»¶çš„è½¦è¾†å’Œé©¾é©¶å‘˜ï¼Œæä¾›éå·¡æ¸¸çš„é¢„çº¦å‡ºç§Ÿæ±½è½¦æœåŠ¡çš„ç»è¥æ´»åŠ¨ã€‚â€é€šä¿—åœ°è¯´å°±æ˜¯ï¼šåˆ©ç”¨äº’è”ç½‘æŠ€æœ¯å¹³å°ï¼Œå°†ä¹˜å®¢çš„ä¹˜è½¦ä¿¡æ¯å‘é€ç»™åˆé€‚çš„å¸æœºï¼Œç”±å¸æœºå®Œæˆæ¥é€ä¹˜å®¢çš„æœåŠ¡ã€‚ç½‘çº¦è½¦åŒ…å«ä¸“è½¦ã€å¿«è½¦ã€æ‹¼è½¦ç­‰å¤šç§å½¢å¼ã€‚</p><p>ä¸­å›½ç›®å‰ç½‘çº¦è½¦ç”¨æˆ·è§„æ¨¡çº¦5äº¿ï¼Œæˆ‘ä»¬å‡†å¤‡å¼€å‘ä¸€ä¸ªå¯æ”¯æ’‘ç›®å‰å…¨éƒ¨ä¸­å›½ç”¨æˆ·ä½¿ç”¨çš„ç½‘çº¦è½¦å¹³å°ï¼Œåº”ç”¨åç§°ä¸ºâ€œUdiâ€ã€‚</p><h2>éœ€æ±‚åˆ†æ</h2><p>Udiæ˜¯ä¸€ä¸ªç½‘çº¦è½¦å¹³å°ï¼Œæ ¸å¿ƒåŠŸèƒ½æ˜¯å°†ä¹˜å®¢çš„å«è½¦è®¢å•å‘é€ç»™é™„è¿‘çš„ç½‘çº¦è½¦å¸æœºï¼Œå¸æœºæ¥å•åï¼Œåˆ°ä¸Šè½¦ç‚¹æ¥ä¹˜å®¢å¹¶é€å¾€ç›®çš„åœ°ï¼Œåˆ°è¾¾åï¼Œä¹˜å®¢æ”¯ä»˜è®¢å•ã€‚æ ¹æ®å¹³å°çš„åˆ†æˆæ¯”ä¾‹ï¼Œå¸æœºæå–ä¸€éƒ¨åˆ†é‡‘é¢ä½œä¸ºæ”¶ç›Šï¼Œç”¨ä¾‹å›¾å¦‚ä¸‹ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/a4/62/a49482b8608415f759456b1d70663862.jpg?wh=1920x1031\" alt=\"å›¾ç‰‡\"></p><p>Udiå¹³å°é¢„è®¡æ³¨å†Œä¹˜å®¢5äº¿ï¼Œæ—¥æ´»ç”¨æˆ·5åƒä¸‡ï¼Œå¹³å‡æ¯ä¸ªä¹˜å®¢1.2ä¸ªè®¢å•ï¼Œæ—¥è®¢å•é‡6åƒä¸‡ã€‚å¹³å‡å®¢å•ä»·30å…ƒï¼Œå¹³å°æ¯æ—¥æ€»è¥æ”¶18äº¿å…ƒã€‚å¹³å°å’Œå¸æœºæŒ‰3ï¼š7çš„æ¯”ä¾‹è¿›è¡Œåˆ†æˆï¼Œé‚£ä¹ˆå¹³å°æ¯å¤©å¯èµš5.4äº¿å…ƒã€‚</p><p>å¦å¤–ï¼Œå¹³å°é¢„è®¡æ³¨å†Œå¸æœº5åƒä¸‡ï¼Œæ—¥æ´»å¸æœº2åƒä¸‡ã€‚</p><h2>æ¦‚è¦è®¾è®¡</h2><p>ç½‘çº¦è½¦å¹³å°æ˜¯å…±äº«ç»æµçš„ä¸€ç§ï¼Œç›®çš„å°±æ˜¯è¦å°†ä¹˜å®¢å’Œå¸æœºæ’®åˆèµ·æ¥ï¼Œæ‰€ä»¥éœ€è¦å¼€å‘ä¸¤ä¸ªAppåº”ç”¨ï¼Œä¸€ä¸ªæ˜¯ç»™ä¹˜å®¢çš„ï¼Œç”¨æ¥å«è½¦ï¼›ä¸€ä¸ªæ˜¯ç»™å¸æœºçš„ï¼Œç”¨æ¥æ¥å•ã€‚Udiæ•´ä½“æ¶æ„å¦‚ä¸‹å›¾ï¼š</p><!-- [[[read_end]]] --><p><img src=\"https://static001.geekbang.org/resource/image/21/2e/21c019ca136ec48f04ea81a89ca2e12e.jpg?wh=1920x1126\" alt=\"å›¾ç‰‡\"></p><p>ç›¸åº”çš„ï¼ŒUdiçš„ç³»ç»Ÿä¹Ÿå¯ä»¥åˆ†æˆä¸¤ä¸ªéƒ¨åˆ†ï¼Œä¸€ä¸ªéƒ¨åˆ†æ˜¯é¢å‘ä¹˜å®¢çš„ã€‚ä¹˜å®¢é€šè¿‡æ‰‹æœºAppæ³¨å†Œæˆä¸ºç”¨æˆ·ï¼Œç„¶åå°±å¯ä»¥åœ¨æ‰‹æœºä¸Šé€‰æ‹©å‡ºå‘åœ°å’Œç›®çš„åœ°ï¼Œè¿›è¡Œå«è½¦äº†ã€‚ä¹˜å®¢å«è½¦çš„HTTPè¯·æ±‚é¦–å…ˆé€šè¿‡ä¸€ä¸ªè´Ÿè½½å‡è¡¡æœåŠ¡å™¨é›†ç¾¤ï¼Œåˆ°è¾¾ç½‘å…³é›†ç¾¤ï¼Œå†ç”±ç½‘å…³é›†ç¾¤è°ƒç”¨ç›¸å…³çš„å¾®æœåŠ¡ï¼Œå®Œæˆè¯·æ±‚å¤„ç†ï¼Œå¦‚ä¸‹å›¾ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/73/93/732fd02e673dd4e6e152642a95c39393.jpg?wh=1920x1296\" alt=\"å›¾ç‰‡\"></p><p>ç½‘å…³å¤„ç†å«è½¦è¯·æ±‚çš„è¿‡ç¨‹æ˜¯ï¼šç½‘å…³é¦–å…ˆè°ƒç”¨è®¢å•å¾®æœåŠ¡ï¼Œä¸ºç”¨æˆ·çš„å«è½¦è¯·æ±‚åˆ›å»ºä¸€ä¸ªè®¢å•ï¼Œè®¢å•å¾®æœåŠ¡å°†è®¢å•è®°å½•åˆ°æ•°æ®åº“ä¸­ï¼Œå¹¶å°†è®¢å•çŠ¶æ€è®¾ç½®ä¸ºâ€œåˆ›å»ºâ€ã€‚ç„¶åç½‘å…³è°ƒç”¨å«è½¦å¾®æœåŠ¡ï¼Œå«è½¦å¾®æœåŠ¡å°†ç”¨æˆ·ä¿¡æ¯ã€å‡ºå‘åœ°ã€ç›®çš„åœ°ç­‰æ•°æ®å°è£…æˆä¸€ä¸ªæ¶ˆæ¯ï¼Œå‘é€åˆ°æ¶ˆæ¯é˜Ÿåˆ—ï¼Œç­‰å¾…ç³»ç»Ÿä¸ºè®¢å•åˆ†é…å¸æœºã€‚</p><p>Udiç³»ç»Ÿçš„å¦ä¸€éƒ¨åˆ†æ˜¯é¢å‘å¸æœºçš„ï¼Œå¸æœºéœ€è¦ä¸åœå°†è‡ªå·±çš„ä½ç½®ä¿¡æ¯å‘é€ç»™å¹³å°ï¼ŒåŒæ—¶ï¼Œè¿˜éœ€è¦éšæ—¶æ¥æ”¶æ¥è‡ªå¹³å°çš„æŒ‡ä»¤ã€‚å› æ­¤ï¼Œä¸åŒäºç”¨æˆ·é€šè¿‡HTTPå‘é€è¯·æ±‚ç»™å¹³å°ï¼Œå¸æœºAppéœ€è¦é€šè¿‡TCPé•¿è¿æ¥å’Œå¹³å°æœåŠ¡å™¨ä¿æŒé€šä¿¡ï¼Œå¦‚ä¸‹å›¾ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/9d/19/9d762444e61ba12c20e0yy72a4ccbe19.jpg?wh=1920x1296\" alt=\"å›¾ç‰‡\"></p><p>Udiå¸æœºAppæ¯3ç§’å‘å¹³å°å‘é€ä¸€æ¬¡å½“å‰çš„ä½ç½®ä¿¡æ¯ï¼ŒåŒ…æ‹¬å½“å‰è½¦è¾†ç»çº¬åº¦ï¼Œè½¦å¤´æœå‘ç­‰ã€‚ä½ç½®ä¿¡æ¯é€šè¿‡TCPè¿æ¥åˆ°è¾¾å¹³å°çš„TCPè¿æ¥æœåŠ¡å™¨é›†ç¾¤ï¼ŒTCPè¿æ¥æœåŠ¡å™¨é›†ç¾¤çš„ä½œç”¨ç±»ä¼¼ç½‘å…³ï¼Œåªä¸è¿‡æ˜¯ä»¥TCPé•¿è¿æ¥çš„æ–¹å¼å‘Appç«¯æä¾›æ¥å…¥æœåŠ¡ã€‚TCPè¿æ¥æœåŠ¡å™¨å°†å¸æœºçš„ä½ç½®ä¿¡æ¯æ›´æ–°åˆ°åœ°ç†ä½ç½®æœåŠ¡ã€‚</p><p>å¯¹äºå‰é¢å·²ç»å†™å…¥åˆ°æ¶ˆæ¯é˜Ÿåˆ—çš„ä¹˜å®¢å«è½¦è®¢å•ä¿¡æ¯ï¼Œåˆ†å•å­ç³»ç»Ÿä½œä¸ºæ¶ˆæ¯æ¶ˆè´¹è€…ï¼Œä»æ¶ˆæ¯é˜Ÿåˆ—ä¸­è·å–å¹¶å¤„ç†ã€‚åˆ†å•å­ç³»ç»Ÿé¦–å…ˆå°†æ•°æ®åº“ä¸­çš„è®¢å•çŠ¶æ€ä¿®æ”¹ä¸ºâ€œæ´¾å•ä¸­â€ï¼Œç„¶åè°ƒç”¨æ´¾å•å¼•æ“è¿›è¡Œæ´¾å•ã€‚æ´¾å•å¼•æ“æ ¹æ®ç”¨æˆ·çš„ä¸Šè½¦å‡ºå‘åœ°ç‚¹ï¼Œä»¥åŠå¸æœºä¸Šä¼ çš„åœ°ç†ä½ç½®ä¿¡æ¯è¿›è¡ŒåŒ¹é…ï¼Œé€‰æ‹©æœ€åˆé€‚çš„å¸æœºè¿›è¡Œæ´¾å•ã€‚æ´¾å•æ¶ˆæ¯é€šè¿‡ä¸€ä¸ªä¸“é—¨çš„æ¶ˆæ¯æ¨é€æœåŠ¡è¿›è¡Œå‘é€ï¼Œæ¶ˆæ¯æ¨é€æœåŠ¡åˆ©ç”¨TCPé•¿è¿æ¥æœåŠ¡å™¨ï¼Œå°†æ¶ˆæ¯å‘é€ç»™åŒ¹é…åˆ°çš„å¸æœºï¼ŒåŒæ—¶åˆ†å•å­ç³»ç»Ÿæ›´æ–°æ•°æ®åº“è®¢å•çŠ¶æ€ä¸ºâ€œå·²æ´¾å•â€ã€‚</p><h2>è¯¦ç»†è®¾è®¡</h2><p>å…³äºUdiçš„è¯¦ç»†è®¾è®¡ï¼Œæˆ‘ä»¬å°†å…³æ³¨ç½‘çº¦è½¦å¹³å°ä¸€äº›ç‹¬æœ‰çš„æŠ€æœ¯ç‰¹ç‚¹ï¼šé•¿è¿æ¥ç®¡ç†ã€æ´¾å•ç®—æ³•ã€è·ç¦»è®¡ç®—ã€‚æ­¤å¤–ï¼Œå› ä¸ºè®¢å•çŠ¶æ€æ¨¡å‹æ˜¯æ‰€æœ‰äº¤æ˜“ç±»åº”ç”¨éƒ½éå¸¸é‡è¦çš„ä¸€ä¸ªæ¨¡å‹ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿä¼šåœ¨è¿™é‡Œè®¨è®ºUdiçš„è®¢å•çŠ¶æ€æ¨¡å‹ã€‚</p><h4>é•¿è¿æ¥ç®¡ç†</h4><p>å› ä¸ºå¸æœºAppéœ€è¦ä¸æ–­å‘Udiç³»ç»Ÿå‘é€å½“å‰ä½ç½®ä¿¡æ¯ï¼Œä»¥åŠå®æ—¶æ¥æ”¶Udiæ¨é€çš„æ´¾å•è¯·æ±‚ï¼Œæ‰€ä»¥å¸æœºAppéœ€è¦å’ŒUdiç³»ç»Ÿä¿æŒé•¿è¿æ¥ã€‚å› æ­¤ï¼Œæˆ‘ä»¬é€‰æ‹©è®©å¸æœºAppå’ŒUdiç³»ç»Ÿç›´æ¥é€šè¿‡TCPåè®®è¿›è¡Œé•¿è¿æ¥ã€‚</p><p>TCPè¿æ¥å’ŒHTTPè¿æ¥ä¸åŒã€‚HTTPæ˜¯æ— çŠ¶æ€çš„ï¼Œæ¯æ¬¡HTTPè¯·æ±‚éƒ½å¯ä»¥é€šè¿‡è´Ÿè½½å‡è¡¡æœåŠ¡å™¨ï¼Œè¢«åˆ†å‘åˆ°ä¸åŒçš„ç½‘å…³æœåŠ¡å™¨è¿›è¡Œå¤„ç†ï¼Œæ­£å¦‚ä¹˜å®¢Appå’ŒæœåŠ¡å™¨çš„è¿æ¥é‚£æ ·ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒHTTPåœ¨å‘èµ·è¯·æ±‚çš„æ—¶å€™ï¼Œæ— éœ€çŸ¥é“è‡ªå·±è¦è¿æ¥çš„æœåŠ¡å™¨æ˜¯å“ªä¸€å°ã€‚</p><p>è€ŒTCPæ˜¯é•¿è¿æ¥ï¼Œä¸€æ—¦å»ºç«‹äº†è¿æ¥ï¼Œè¿æ¥é€šé“å°±éœ€è¦é•¿æœŸä¿æŒï¼Œ<strong>ä¸ç®¡æ˜¯å¸æœºAppå‘é€ä½ç½®ä¿¡æ¯ç»™æœåŠ¡å™¨ï¼Œè¿˜æ˜¯æœåŠ¡å™¨æ¨é€æ´¾å•ä¿¡æ¯ç»™å¸æœºAppï¼Œéƒ½éœ€è¦ä½¿ç”¨è¿™ä¸ªç‰¹å®šçš„è¿æ¥é€šé“</strong>ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¸æœºAppå’ŒæœåŠ¡å™¨çš„è¿æ¥æ˜¯ç‰¹å®šçš„ï¼Œå¸æœºAppéœ€è¦çŸ¥é“è‡ªå·±è¿æ¥çš„æœåŠ¡å™¨æ˜¯å“ªä¸€å°ï¼Œè€ŒUdiç»™å¸æœºAppæ¨é€æ¶ˆæ¯çš„æ—¶å€™ï¼Œä¹Ÿéœ€è¦çŸ¥é“è¦é€šè¿‡å“ªä¸€å°æœåŠ¡å™¨æ‰èƒ½å®Œæˆæ¨é€ã€‚</p><p>æ‰€ä»¥ï¼Œå¸æœºç«¯çš„TCPé•¿è¿æ¥éœ€è¦è¿›è¡Œä¸“é—¨ç®¡ç†ï¼Œå¤„ç†å¸æœºAppå’ŒæœåŠ¡å™¨çš„è¿æ¥ä¿¡æ¯ï¼Œå…·ä½“æ¶æ„å¦‚ä¸‹å›¾ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/4b/fc/4bba12530b215ebe289f715f60d02cfc.jpg?wh=1920x982\" alt=\"å›¾ç‰‡\"></p><p><strong>å¤„ç†é•¿è¿æ¥çš„æ ¸å¿ƒæ˜¯TCPç®¡ç†æœåŠ¡å™¨é›†ç¾¤</strong>ã€‚å¸æœºAppä¼šåœ¨å¯åŠ¨æ—¶é€šè¿‡è´Ÿè½½å‡è¡¡æœåŠ¡å™¨ï¼Œä¸TCPç®¡ç†æœåŠ¡å™¨é›†ç¾¤é€šä¿¡ï¼Œè¯·æ±‚åˆ†é…ä¸€ä¸ªTCPé•¿è¿æ¥æœåŠ¡å™¨ã€‚</p><p>TCPç®¡ç†æœåŠ¡å™¨æ£€æŸ¥ZooKeeperæœåŠ¡å™¨ï¼Œè·å–å½“å‰å¯ä»¥æœåŠ¡çš„TCPè¿æ¥æœåŠ¡å™¨åˆ—è¡¨ï¼Œç„¶åä»è¿™äº›æœåŠ¡å™¨ä¸­é€‰æ‹©ä¸€ä¸ªï¼Œè¿”å›å…¶IPåœ°å€å’Œé€šä¿¡ç«¯å£ç»™å¸æœºAppã€‚è¿™æ ·ï¼Œå¸æœºAppå°±å¯ä»¥ç›´æ¥å’Œè¿™å°TCPè¿æ¥æœåŠ¡å™¨å»ºç«‹é•¿è¿æ¥ï¼Œå¹¶å‘é€ä½ç½®ä¿¡æ¯äº†ã€‚</p><p>TCPè¿æ¥æœåŠ¡å™¨å¯åŠ¨çš„æ—¶å€™ï¼Œä¼šå’ŒZooKeeperé›†ç¾¤é€šä¿¡ï¼ŒæŠ¥å‘Šè‡ªå·±çš„çŠ¶æ€ï¼Œä¾¿äºTCPç®¡ç†æœåŠ¡å™¨ä¸ºå…¶åˆ†é…è¿æ¥ã€‚å¸æœºAppå’ŒTCPè¿æ¥æœåŠ¡å™¨å»ºç«‹é•¿è¿æ¥åï¼ŒTCPè¿æ¥æœåŠ¡å™¨éœ€è¦å‘Redisé›†ç¾¤è®°å½•è¿™ä¸ªé•¿è¿æ¥å…³ç³»ï¼Œè®°å½•çš„é”®å€¼å¯¹æ˜¯&lt;å¸æœºID, æœåŠ¡å™¨å&gt;ã€‚</p><p>å½“Udiç³»ç»Ÿæ”¶åˆ°ç”¨æˆ·è®¢å•ï¼Œæ´¾å•å¼•æ“é€‰æ‹©äº†åˆé€‚çš„å¸æœºè¿›è¡Œæ´¾å•æ—¶ï¼Œç³»ç»Ÿå°±å¯ä»¥é€šè¿‡æ¶ˆæ¯æ¨é€æœåŠ¡ç»™è¯¥å¸æœºå‘é€æ´¾å•æ¶ˆæ¯ã€‚æ¶ˆæ¯æ¨é€æœåŠ¡å™¨é€šè¿‡Redisè·å–è¯¥å¸æœºAppé•¿è¿æ¥å¯¹åº”çš„TCPæœåŠ¡å™¨ï¼Œç„¶åæ¶ˆæ¯æ¨é€æœåŠ¡å™¨å°±å¯ä»¥é€šè¿‡è¯¥TCPæœåŠ¡å™¨çš„é•¿è¿æ¥ï¼Œå°†æ´¾å•æ¶ˆæ¯æ¨é€ç»™å¸æœºAppäº†ã€‚</p><p>é•¿è¿æ¥ç®¡ç†çš„ä¸»è¦æ—¶åºå›¾å¦‚ä¸‹ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/2b/b5/2ba3c4c34yy212561a53a0dbb4f9ceb5.jpg?wh=1920x982\" alt=\"å›¾ç‰‡\"></p><p>å¦‚æœTCPæœåŠ¡å™¨å®•æœºï¼Œé‚£ä¹ˆå¸æœºAppå’Œå®ƒçš„é•¿è¿æ¥ä¹Ÿå°±ä¸¢å¤±äº†ã€‚å¸æœºAppéœ€è¦é‡æ–°é€šè¿‡HTTPæ¥è¯·æ±‚TCPç®¡ç†æœåŠ¡å™¨ä¸ºå®ƒåˆ†é…æ–°çš„TCPæœåŠ¡å™¨ã€‚TCPç®¡ç†æœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚åï¼Œä¸€æ–¹é¢è¿”å›æ–°çš„TCPæœåŠ¡å™¨çš„IPåœ°å€å’Œé€šä¿¡ç«¯å£ï¼Œä¸€æ–¹é¢éœ€è¦ä»Redisä¸­åˆ é™¤åŸæœ‰çš„&lt;å¸æœºID, æœåŠ¡å™¨å&gt;é”®å€¼å¯¹ï¼Œä¿è¯æ¶ˆæ¯æ¨é€æœåŠ¡ä¸ä¼šä½¿ç”¨ä¸€ä¸ªé”™è¯¯çš„è¿æ¥çº¿è·¯æ¨é€æ¶ˆæ¯ã€‚</p><h4>è·ç¦»è®¡ç®—</h4><p>ä¹˜å®¢å‘èµ·ä¸€ä¸ªå«è½¦è¯·æ±‚æ—¶ï¼ŒUdiéœ€è¦ä¸ºå…¶å¯»æ‰¾åˆé€‚çš„å¸æœºå¹¶è¿›è¡Œæ´¾å•ï¼Œæ‰€è°“åˆé€‚çš„å¸æœºï¼Œæœ€ä¸»è¦çš„å› ç´ å°±æ˜¯è·ç¦»ã€‚åœ¨<a href=\"https://time.geekbang.org/column/article/492306\">ç¬¬9è®²</a>çš„äº¤å‹ç³»ç»Ÿè®¾è®¡ä¸­ï¼Œæˆ‘ä»¬å·²ç»è®¨è®ºè¿‡GeoHashç®—æ³•ï¼ŒUdiå°±æ˜¯ç›´æ¥ä½¿ç”¨Redisçš„GeoHashè¿›è¡Œé‚»è¿‘è®¡ç®—ã€‚å¸æœºçš„ä½ç½®ä¿¡æ¯å®æ—¶æ›´æ–°åˆ°Redisä¸­ï¼Œå¹¶ç›´æ¥è°ƒç”¨Redisçš„GeoHashå‘½ä»¤georadiusè®¡ç®—ä¹˜å®¢çš„é‚»è¿‘å¸æœºã€‚</p><p>ä½†æ˜¯Redisä½¿ç”¨è·³è¡¨å­˜å‚¨GeoHashï¼ŒUdiæ—¥æ´»å¸æœºä¸¤åƒä¸‡ï¼Œæ¯3ç§’æ›´æ–°ä¸€æ¬¡ä½ç½®ä¿¡æ¯ï¼Œå¹³å‡æ¯ç§’å°±éœ€è¦å¯¹è·³è¡¨åšå°†è¿‘7ç™¾ä¸‡æ¬¡çš„æ›´æ–°ï¼Œå¦‚æ­¤é«˜å¹¶å‘åœ°åœ¨ä¸€ä¸ªè·³è¡¨ä¸Šæ›´æ–°ï¼Œæ˜¯ç³»ç»Ÿä¸èƒ½æ‰¿å—çš„ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦å°†å¸æœºä»¥åŠè·³è¡¨çš„ç²’åº¦æ‹†å¾—æ›´å°ã€‚</p><p>Udiä»¥åŸå¸‚ä½œä¸ºåœ°ç†ä½ç½®çš„åŸºæœ¬å•ä½ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯ä¸ªåŸå¸‚åœ¨Redisä¸­å»ºç«‹ä¸€ä¸ªGeoHashçš„keyï¼Œè¿™æ ·ï¼Œä¸€ä¸ªåŸå¸‚èŒƒå›´å†…çš„å¸æœºå­˜å‚¨åœ¨ä¸€ä¸ªè·³è¡¨ä¸­ã€‚å¯¹äºåŒ—äº¬è¿™æ ·çš„è¶…çº§åŸå¸‚ï¼Œè¿˜å¯ä»¥æ›´è¿›ä¸€æ­¥ï¼Œä»¥åŸåŒºä½œä¸ºkeyï¼Œè¿›ä¸€æ­¥é™ä½è·³è¡¨çš„å¤§å°å’Œå•ä¸ªè·³è¡¨ä¸Šçš„å¹¶å‘é‡ã€‚</p><h4>æ´¾å•ç®—æ³•</h4><p>å‰é¢è¯´è¿‡ï¼Œæ´¾å•å°±æ˜¯å¯»æ‰¾åˆé€‚çš„å¸æœºï¼Œè€Œåˆé€‚çš„ä¸»è¦å› ç´ å°±æ˜¯è·ç¦»ï¼Œæ‰€ä»¥æœ€ç®€å•çš„æ´¾å•ç®—æ³•å°±æ˜¯ç›´æ¥é€šè¿‡Redisè·å–è·ç¦»ä¹˜å®¢ä¸Šè½¦ç‚¹æœ€è¿‘çš„ç©ºé—²ç½‘çº¦è½¦å³å¯ã€‚</p><p>ä½†æ˜¯è¿™ç§ç®—æ³•æ•ˆæœéå¸¸å·®ï¼Œå› ä¸ºRedisè®¡ç®—çš„æ˜¯ä¸¤ä¸ªç‚¹ä¹‹é—´çš„ç©ºé—´è·ç¦»ï¼Œä½†æ˜¯å¸æœºå¿…é¡»æ²¿é“è·¯è¡Œé©¶è¿‡æ¥ï¼Œåœ¨å¤æ‚çš„åŸå¸‚è·¯å†µä¸‹ï¼Œä¹Ÿè®¸å‡ åç±³çš„ç©ºé—´è·ç¦»è¡Œé©¶åå‡ åˆ†é’Ÿä¹Ÿæœªå¯çŸ¥ã€‚</p><p>å› æ­¤ï¼Œæˆ‘ä»¬å¿…é¡»ç”¨è¡Œé©¶è·ç¦»ä»£æ›¿ç©ºé—´è·ç¦»ï¼Œå³Udiå¿…é¡»è¦ä¾èµ–ä¸€ä¸ªåœ°ç†ç³»ç»Ÿï¼Œå¯¹å¸æœºå½“å‰ä½ç½®å’Œä¸Šè½¦ç‚¹è¿›è¡Œè·¯å¾„è§„åˆ’ï¼Œè®¡ç®—å¸æœºåˆ°è¾¾ä¸Šè½¦ç‚¹çš„è·ç¦»å’Œæ—¶é—´ã€‚äº‹å®ä¸Šï¼Œæˆ‘ä»¬ä¸»è¦å…³æ³¨çš„æ˜¯æ—¶é—´ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ´¾å•ç®—æ³•éœ€è¦ä»Redisä¸­è·å–å¤šä¸ªé‚»è¿‘ç”¨æˆ·ä¸Šè½¦ç‚¹çš„ç©ºé—²å¸æœºï¼Œç„¶åé€šè¿‡åœ°ç†ç³»ç»Ÿæ¥è®¡ç®—æ¯ä¸ªå¸æœºåˆ°è¾¾ä¹˜å®¢ä¸Šè½¦ç‚¹çš„æ—¶é—´ï¼Œæœ€åå°†è®¢å•åˆ†é…ç»™èŠ±è´¹æ—¶é—´æœ€å°‘çš„å¸æœºã€‚</p><p>å¦‚æœé™„è¿‘åªæœ‰ä¸€ä¸ªä¹˜å®¢ï¼Œé‚£ä¹ˆä¸ºå…¶åˆ†é…åˆ°è¾¾æ—¶é—´æœ€å¿«çš„å¸æœºå°±å¯ä»¥äº†ã€‚ä½†å¦‚æœé™„è¿‘æœ‰å¤šä¸ªä¹˜å®¢ï¼Œé‚£ä¹ˆå°±éœ€è¦è€ƒè™‘æ‰€æœ‰äººçš„ç­‰å¾…æ—¶é—´äº†ã€‚æ¯”å¦‚é™„è¿‘æœ‰ä¹˜å®¢1å’Œä¹˜å®¢2ï¼Œä»¥åŠå¸æœºXå’Œå¸æœºYã€‚å¸æœºXæ¥ä¹˜å®¢1çš„æ—¶é—´æ˜¯2åˆ†é’Ÿï¼Œæ¥ä¹˜å®¢2çš„æ—¶é—´æ˜¯3åˆ†é’Ÿï¼›å¸æœºYæ¥ä¹˜å®¢1çš„æ—¶é—´æ˜¯3åˆ†é’Ÿï¼Œæ¥ä¹˜å®¢2çš„æ—¶é—´æ˜¯5åˆ†é’Ÿã€‚</p><p>å¦‚æœæŒ‰ç…§å•ä¸ªä¹˜å®¢æœ€çŸ­æ—¶é—´é€‰æ‹©ï¼Œç»™ä¹˜å®¢1åˆ†é…å¸æœºXï¼Œé‚£ä¹ˆä¹˜å®¢2åªèƒ½åˆ†é…å¸æœºYäº†ï¼Œä¹˜å®¢æ€»çš„ç­‰å¾…æ—¶é—´å°±æ˜¯7åˆ†é’Ÿã€‚å¦‚æœç»™ä¹˜å®¢1åˆ†é…å¸æœºYï¼Œä¹˜å®¢2åˆ†é…å¸æœºXï¼Œä¹˜å®¢æ€»ç­‰å¾…æ—¶é—´å°±æ˜¯6åˆ†é’Ÿã€‚å¸æœºçš„æ—¶é—´å°±æ˜¯å¹³å°çš„é‡‘é’±ï¼Œæ˜¾ç„¶ï¼Œåè€…è¿™æ ·çš„æ´¾å•æ›´èŠ‚çº¦æ‰€æœ‰å¸æœºçš„æ•´ä½“æ—¶é—´ï¼Œä¹Ÿèƒ½ä¸ºå…¬å¸å¸¦æ¥æ›´å¤šè¥æ”¶ï¼ŒåŒæ—¶ä¹Ÿä¸ºæ•´ä½“ç”¨æˆ·å¸¦æ¥æ›´å¥½çš„ä½“éªŒã€‚</p><p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±ä¸èƒ½ä¸€ä¸ªè®¢å•ä¸€ä¸ªè®¢å•åœ°åˆ†åˆ«åˆ†é…å¸æœºï¼Œæˆ‘ä»¬éœ€è¦å°†ä¸€æ‰¹è®¢å•èšåˆåœ¨ä¸€èµ·ï¼Œç»Ÿä¸€è¿›è¡Œæ´¾å•ï¼Œå¦‚ä¸‹å›¾ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/05/75/0573f9404d497411b24b5ebe37a5d475.jpg?wh=1920x358\" alt=\"å›¾ç‰‡\"></p><p>åˆ†å•å­ç³»ç»Ÿæ”¶åˆ°ç”¨æˆ·çš„å«è½¦è®¢å•åï¼Œä¸æ˜¯ç›´æ¥å‘é€ç»™æ´¾å•å¼•æ“è¿›è¡Œæ´¾å•ï¼Œè€Œæ˜¯å‘ç»™ä¸€ä¸ªè®¢å•èšåˆæ± ï¼Œè®¢å•èšåˆæ± é‡Œæœ‰ä¸€äº›è®¢å•èšåˆæ¡¶ã€‚è®¢å•å†™å®Œä¸€ä¸ªèšåˆæ¡¶ï¼Œå°±æŠŠè¿™ä¸ªèšåˆæ¡¶å†…çš„å…¨éƒ¨è®¢å•æ¨é€ç»™æ´¾å•å¼•æ“ï¼Œç”±æ´¾å•å¼•æ“æ ¹æ®æ•´ä½“æ—¶é—´æœ€å°åŒ–åŸåˆ™è¿›è¡Œæ´¾å•ã€‚</p><p>è¿™é‡Œçš„â€œå†™å®Œä¸€ä¸ªèšåˆæ¡¶â€ï¼Œæœ‰ä¸¤ç§å®ç°æ–¹å¼ï¼Œä¸€ç§æ˜¯é—´éš”ä¸€æ®µæ—¶é—´ç®—å†™å®Œä¸€ä¸ªæ¡¶ï¼Œä¸€ç§æ˜¯è¾¾åˆ°ä¸€å®šæ•°é‡ç®—å†™å®Œä¸€ä¸ªæ¡¶ã€‚æœ€åUdié€‰æ‹©é—´éš”3ç§’å†™ä¸€ä¸ªæ¡¶ã€‚</p><p>è¿™é‡Œéœ€è¦å…³æ³¨çš„æ˜¯ï¼Œæ´¾å•çš„æ—¶å€™éœ€è¦ä¾èµ–åœ°ç†ç³»ç»Ÿè¿›è¡Œè·¯å¾„è§„åˆ’ã€‚äº‹å®ä¸Šï¼Œä¹˜å®¢åˆ°è¾¾æ—¶é—´å’Œé‡‘é¢é¢„ä¼°ã€è¡Œé©¶è¿‡ç¨‹å¯¼èˆªã€è®¢å•ç»“ç®—ä¸æŠ•è¯‰å¤„ç†ï¼Œéƒ½éœ€è¦ä¾èµ–åœ°ç†ç³»ç»Ÿã€‚UdiåˆæœŸä¼šä½¿ç”¨ç¬¬ä¸‰æ–¹åœ°ç†ç³»ç»Ÿè¿›è¡Œè·¯å¾„è§„åˆ’ï¼Œä½†æ˜¯å°†æ¥å¿…é¡»è¦å»ºè®¾è‡ªå·±çš„åœ°ç†ç³»ç»Ÿã€‚</p><h4>è®¢å•çŠ¶æ€æ¨¡å‹</h4><p>å¯¹äºäº¤æ˜“å‹ç³»ç»Ÿè€Œè¨€ï¼Œè®¢å•æ˜¯å…¶æœ€æ ¸å¿ƒçš„æ•°æ®ï¼Œä¸»è¦ä¸šåŠ¡é€»è¾‘ä¹Ÿæ˜¯å›´ç»•è®¢å•å±•å¼€ã€‚åœ¨è®¢å•çš„ç”Ÿå‘½å‘¨æœŸé‡Œï¼Œè®¢å•çŠ¶æ€ä¼šå¤šæ¬¡å˜åŒ–ï¼Œæ¯æ¬¡å˜åŒ–éƒ½æ˜¯ç”±äºæ ¸å¿ƒçš„ä¸šåŠ¡çŠ¶æ€å‘ç”Ÿäº†æ”¹å˜ï¼Œä¹Ÿå› æ­¤åœ¨å‰é¢è®¾è®¡çš„å¤šä¸ªåœ°æ–¹éƒ½æåˆ°è®¢å•çŠ¶æ€ã€‚ä½†æ˜¯è¿™ç§æ•£ä¹±çš„è®¢å•çŠ¶æ€å˜åŒ–æ— æ³•ç»Ÿä¸€æè¿°è®¢å•çš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸï¼Œå› æ­¤æˆ‘ä»¬è®¾è®¡äº†è®¢å•çŠ¶æ€æ¨¡å‹ï¼Œå¦‚ä¸‹å›¾ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/75/fc/75fc3cf487a73121bc2ea4102d343afc.jpg?wh=1920x717\" alt=\"å›¾ç‰‡\"></p><p>ç”¨æˆ·å«è½¦åï¼Œç³»ç»Ÿå³ä¸ºå…¶åˆ›å»ºä¸€ä¸ªè®¢å•ï¼Œè®¢å•è¿›å…¥â€œåˆ›å•â€çŠ¶æ€ã€‚ç„¶åè¯¥è®¢å•é€šè¿‡æ¶ˆæ¯é˜Ÿåˆ—è¿›å…¥åˆ†å•å­ç³»ç»Ÿï¼Œåˆ†å•å­ç³»ç»Ÿè°ƒç”¨æ´¾å•å¼•æ“ä¸ºå…¶æ´¾å•ï¼Œè®¢å•çŠ¶æ€è¿›å…¥â€œæ´¾å•ä¸­â€ã€‚æ´¾å•å¼•æ“åˆ†é…åˆ°å¸æœºï¼Œä¸€æ–¹é¢å‘é€æ¶ˆæ¯ç»™å¸æœºï¼Œä¸€æ–¹é¢ä¿®æ”¹è®¢å•çŠ¶æ€ä¸ºâ€œå·²æ´¾å•â€ã€‚</p><p>å¦‚æœå¸æœºå»æ¥åˆ°ä¹˜å®¢ï¼Œè®¢å•çŠ¶æ€å°±æ”¹ä¸ºâ€œè¡Œç¨‹ä¸­â€ï¼›å¦‚æœå¸æœºæ‹’ç»æ¥å•ï¼Œå°±éœ€è¦ä¸ºä¹˜å®¢é‡æ–°æ´¾å•ï¼Œè®¢å•é‡æ–°è¿›å…¥æ¶ˆæ¯é˜Ÿåˆ—ï¼ŒåŒæ—¶è®¢å•çŠ¶æ€ä¹Ÿæ”¹å›ä¸ºâ€œæ´¾å•ä¸­â€ï¼›å¦‚æœå¸æœºåˆ°è¾¾ä¸Šè½¦ç‚¹ï¼Œä½†æ˜¯è”ç³»ä¸åˆ°ä¹˜å®¢ï¼Œæ²¡æœ‰æ¥åˆ°ä¹˜å®¢ï¼Œé‚£ä¹ˆè®¢å•å°±ä¼šæ ‡è®°ä¸ºâ€œå·²å–æ¶ˆâ€ã€‚å¦‚æœåœ¨æ´¾å•ä¸­ï¼Œä¹˜å®¢è‡ªå·±é€‰æ‹©å–æ¶ˆå«è½¦ï¼Œè®¢å•ä¹Ÿè¿›å…¥â€œå·²å–æ¶ˆâ€çŠ¶æ€ã€‚â€œå·²å–æ¶ˆâ€æ˜¯è®¢å•çš„ä¸€ç§æœ€ç»ˆçŠ¶æ€ï¼Œè®¢å•æ— æ³•å†è½¬å˜ä¸ºå…¶ä»–çŠ¶æ€ã€‚</p><p>å¸æœºåˆ°è¾¾ç›®çš„åœ°åï¼Œé€šè¿‡Appç¡®è®¤é€è¾¾ï¼Œè®¢å•è¿›å…¥â€œå¾…æ”¯ä»˜â€çŠ¶æ€ï¼Œç­‰å¾…ç”¨æˆ·æ”¯ä»˜è®¢å•é‡‘é¢ã€‚ç”¨æˆ·æ”¯ä»˜åï¼Œå®Œæˆè®¢å•ç”Ÿå‘½å‘¨æœŸï¼Œè®¢å•çŠ¶æ€ä¸ºâ€œå·²å®Œæˆâ€ã€‚</p><p>è®¢å•çŠ¶æ€æ¨¡å‹å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ€»è§ˆæ ¸å¿ƒä¸šåŠ¡æµç¨‹ï¼Œåœ¨è®¾è®¡é˜¶æ®µï¼Œå¯ä»¥é€šè¿‡çŠ¶æ€å›¾å‘ç°ä¸šåŠ¡æµç¨‹ä¸å®Œå¤‡çš„åœ°æ–¹ï¼Œåœ¨å¼€å‘é˜¶æ®µï¼Œå¯ä»¥å¸®åŠ©å¼€å‘è€…ç¡®è®¤æµç¨‹å®ç°æ˜¯å¦æœ‰é—æ¼ã€‚</p><h2>å°ç»“</h2><p>åœ¨è½¯ä»¶è®¾è®¡å¼€å‘ä¸­ï¼Œä¼šæ¶‰åŠä¸¤ç±»çŸ¥è¯†ã€‚ä¸€ç±»æ˜¯å’Œå…·ä½“ä¸šåŠ¡æ— å…³çš„ï¼Œæ¯”å¦‚ç¼–ç¨‹è¯­è¨€ã€ç¼–ç¨‹æ¡†æ¶è¿™äº›æŠ€æœ¯å’Œå…·ä½“ä¸šåŠ¡æ— å…³ï¼Œæ¶ˆæ¯é˜Ÿåˆ—ã€åˆ†å¸ƒå¼ç¼“å­˜è¿™äº›æŠ€æœ¯ä¹Ÿå’Œå…·ä½“ä¸šåŠ¡æ— å…³ã€‚è¿™ä¸€ç±»æŠ€æœ¯æ›´å…·æœ‰é€šç”¨æ€§ï¼ŒæŠ€æœ¯äººå‘˜ä¸ç®¡è·³æ§½åˆ°å“ªå®¶å…¬å¸ï¼Œå‡ ä¹éƒ½ä¼šç”¨åˆ°è¿™äº›æŠ€æœ¯ã€‚</p><p>è¿˜æœ‰ä¸€ç±»æŠ€æœ¯æ˜¯å’Œå…·ä½“ä¸šåŠ¡ç›¸å…³çš„ï¼Œæ¯”å¦‚ç”µå•†ä¸šåŠ¡ã€é‡‘èä¸šåŠ¡ã€åŒ…æ‹¬æœ¬æ–‡çš„ç½‘çº¦è½¦ä¸šåŠ¡ç­‰ç­‰ï¼Œè¿™äº›ä¸šåŠ¡å¦‚ä½•ç”¨æœ€åˆé€‚çš„æŠ€æœ¯æ–¹æ¡ˆå®ç°ã€‚è¿™äº›å’Œå…·ä½“ä¸šåŠ¡ç›¸å…³çš„æŠ€æœ¯ç»éªŒä¸»è¦é€‚ç”¨äºç›¸å…³çš„ä¸šåŠ¡é¢†åŸŸã€‚</p><p>æŠ€æœ¯äººå‘˜åœ¨èŒä¸šç”Ÿæ¶¯çš„æ—©æœŸï¼Œéœ€è¦æ›´å¤šåœ°å»å…³æ³¨å’Œå­¦ä¹ é€šç”¨æ€§çš„æŠ€æœ¯ã€‚è€Œéšç€å¹´é¾„å¢åŠ ï¼Œåº”è¯¥åœ¨ä¸šåŠ¡ç›¸å…³çš„æŠ€æœ¯ä¸Šè·å¾—æ›´å¤šæ²‰æ·€ï¼Œæˆä¸ºä¸€ä¸ªé¢†åŸŸçš„ä¸“å®¶ï¼Œæ‰èƒ½ä½¿è‡ªå·±åœ¨èŒåœºä¸Šè·å¾—æ›´å¼ºçš„ç«äº‰åŠ›ã€‚</p><p>ä¸‹ä¸€èŠ‚æˆ‘ä»¬å°†è®¨è®ºå¦‚ä½•ä½¿ç”¨é¢†åŸŸé©±åŠ¨è®¾è®¡çš„æŠ€æœ¯æ–¹æ³•è§£å†³ä¸šåŠ¡ä¸Šçš„é—®é¢˜ï¼Œå¸¦ä½ ä½“ä¼šæŠ€æœ¯äººå‘˜å¦‚ä½•åœ¨ä¸šåŠ¡ä¸Šè·å¾—æ›´å¤šæ²‰æ·€ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>ç½‘çº¦è½¦åœ¨è¿›è¡Œæ´¾å•çš„æ—¶å€™ï¼Œè¿˜éœ€è¦è€ƒè™‘å“ªäº›å› ç´ ï¼Œå¦‚ä½•å®ç°ï¼Ÿ</p><p>æ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„æ€è€ƒï¼Œæˆ‘ä»¬å…±åŒè¿›æ­¥ã€‚</p><blockquote>\n<p>ã€ç¼–è¾‘æ¸©é¦¨æç¤ºã€‘4æœˆ10æ—¥12ç‚¹å‰ï¼Œæäº¤<a href=\"http://https://time.geekbang.org/column/article/495175\">æœŸä¸­æµ‹è¯•</a>ä½œä¸šï¼Œæœ‰æœºä¼šè·å¾—è€å¸ˆç²¾å¿ƒå‡†å¤‡çš„å¥–åŠ±å“¦~</p>\n</blockquote>","comments":[{"had_liked":false,"id":340853,"user_name":"ğŸ‘½","can_delete":false,"product_type":"c1","uid":1274117,"ip_address":"","ucode":"D313AF941B412D","user_header":"https://static001.geekbang.org/account/avatar/00/13/71/05/db554eba.jpg","comment_is_top":false,"comment_ctime":1649202709,"is_pvip":false,"replies":[{"id":"124624","content":"èµ","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1007349","ctime":1649211159,"ip_address":"","comment_id":340853,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18829071893","product_id":100105701,"comment_content":"æ€è€ƒé¢˜ï¼š<br><br>æˆ‘è§‰å¾—ï¼Œè¿˜éœ€è¦è€ƒè™‘å–æ¶ˆè®¢å•ååˆ¤è´£ä¸ä¿¡ç”¨åˆ†é—®é¢˜ï¼Œæ´¾å•ä¼˜å…ˆçº§é—®é¢˜ï¼Œå¸æœºä¹˜å®¢æ²Ÿé€šçºªå½•ç•™æ¡£é—®é¢˜ã€‚<br><br>è®¢å•æ˜¯å¯ä»¥å–æ¶ˆçš„ï¼Œå¸æœºå–æ¶ˆæˆ–è€…ä¹˜å®¢å–æ¶ˆã€‚åªè¦ä¸æ˜¯æ­£å¸¸å®Œæˆçš„è®¢å•ã€‚å°±éœ€è¦ç³»ç»Ÿè¿›è¡Œåˆ¤è´£ï¼Œå¹¶å½±å“æ•´ä½“ä¿¡ç”¨åˆ†ã€‚å¹¶å…³è”åˆ°æ´¾å•ä¼˜å…ˆçº§ã€‚<br><br>ç„¶åæ˜¯æ´¾å•ä¼˜å…ˆçº§ã€‚è¦è€ƒè™‘è¢«æŠ•è¯‰æ¬¡æ•°ï¼Œå¸æœºæ¥å•æ•°é‡ï¼Œä¹˜å®¢ä¸‹å•æ•°é‡ï¼Œç­‰å¤šç»´è§’åº¦ï¼Œå†³å®šè®¢å•çš„ä¼˜å…ˆçº§ã€‚ä»¥åˆç†æ€ç†Ÿã€‚<br><br>ç½‘çº¦è½¦ç³»ç»Ÿæ˜¯ä¸€ä¸ªæ³•å¾‹é£é™©æ•æ„Ÿçš„ç³»ç»Ÿã€‚å¸æœºä¹˜å®¢åœ¨çº¿æ²Ÿé€šçºªå½•å¿…é¡»ä¿å­˜ä¹‹å¤–ã€‚è¿˜éœ€è¦ä¸€ä¸ªè¯­éŸ³ç”µè¯ä¸­è½¬çš„åŠŸèƒ½ï¼Œå¹¶ä¸”ç•™å­˜è¯­éŸ³é€šè¯è®°å½•ä¸€æ®µæ—¶é—´å¤‡æŸ¥ã€‚ç„¶åè¿™é‡Œä¼šæ¶‰åŠä¸€ä¸ªéŸ³é¢‘æ–‡ä»¶å‹ç¼©ä¸å­˜å‚¨çš„è®¾è®¡ã€‚","like_count":4,"discussions":[{"author":{"id":1007349,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5e/f5/018907ac.jpg","nickname":"ææ™ºæ…§","note":"","ucode":"8C9980C438AFD1","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":560145,"discussion_content":"èµ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649211159,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":342346,"user_name":"My","can_delete":false,"product_type":"c1","uid":1336427,"ip_address":"","ucode":"B2528724F99280","user_header":"https://static001.geekbang.org/account/avatar/00/14/64/6b/5b23d6f0.jpg","comment_is_top":false,"comment_ctime":1650203958,"is_pvip":false,"replies":[{"id":"125067","content":"1 æ´¾å•çš„è·ç¦»è®¡ç®—å’Œè·¯çº¿è§„åˆ’æ˜¯ä¸åŒçš„æœåŠ¡å®Œæˆï¼Œæ´¾å•æ—¶åªéœ€é€‰æ‹©å°±è¿‘çš„å¸æœºã€‚å¸æœºè·¨åŒºçš„æ—¶å€™å°†å¸æœºæ”¾å…¥ä¸åŒçš„åŒºçš„keyå³å¯ã€‚<br>2 è®¾è®¡è¦åˆ°å·¥ç¨‹å¸ˆå¯ä»¥æŒ‰ç…§è®¾è®¡å®Œæˆå¼€å‘çš„åœ°æ­¥ï¼Œæ ¹æ®å·¥ç¨‹å¸ˆæŠ€èƒ½æ°´å¹³ï¼Œè®¾è®¡çš„ç»†èŠ‚ç¨‹åº¦ä¼šæœ‰å¾ˆå¤§å·®åˆ«","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1007349","ctime":1650246665,"ip_address":"","comment_id":342346,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10240138550","product_id":100105701,"comment_content":"1ã€è¿™é‡Œä¸å…‰æœ‰è·ç¦»è®¡ç®—ï¼Œåƒç°åœ¨çš„ddå¸æœºç«¯éƒ½çº¿è·¯è®¡ç®—ï¼ŒåŒºåŸŸè®¡ç®—ï¼Œè¿˜æœ‰é¡ºé£è½¦ç­‰ä¸šåŠ¡ã€‚ï¼ˆå•çº¯çš„geoçš„è®¡ç®—æ˜¯å¦è¿‡äºç®€å•ï¼Ÿå¦å¤–ï¼Œå¦‚æœåƒåŒ—äº¬è¿™ç§åŸå¸‚ï¼Œå‡å¦‚è·¨åŒºåŸŸåçš„è·¯çº¿ï¼Œè¿™ä¸ªæ—¶å€™è¯¥æ€ä¹ˆè®¡ç®—è·ç¦»ï¼ˆredisè·¨keyå±€é™ï¼‰ï¼‰<br>2ã€è¿™é‡Œé¢ä»æ¶æ„å¸ˆæ¥è®²åº”è¯¥åšåˆ°å“ªä¸€æ­¥ æ‰ç®—å®Œäº‹å„¿ï¼Œå› ä¸ºå•çº¯çš„è¯¦ç»†è®¾è®¡ä¸Šå¹¶æ²¡æœ‰çœŸæ­£èƒ½è½åœ°çš„äº‹é¡¹å‘¢ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1007349,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5e/f5/018907ac.jpg","nickname":"ææ™ºæ…§","note":"","ucode":"8C9980C438AFD1","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":564429,"discussion_content":"1 æ´¾å•çš„è·ç¦»è®¡ç®—å’Œè·¯çº¿è§„åˆ’æ˜¯ä¸åŒçš„æœåŠ¡å®Œæˆï¼Œæ´¾å•æ—¶åªéœ€é€‰æ‹©å°±è¿‘çš„å¸æœºã€‚å¸æœºè·¨åŒºçš„æ—¶å€™å°†å¸æœºæ”¾å…¥ä¸åŒçš„åŒºçš„keyå³å¯ã€‚\n2 è®¾è®¡è¦åˆ°å·¥ç¨‹å¸ˆå¯ä»¥æŒ‰ç…§è®¾è®¡å®Œæˆå¼€å‘çš„åœ°æ­¥ï¼Œæ ¹æ®å·¥ç¨‹å¸ˆæŠ€èƒ½æ°´å¹³ï¼Œè®¾è®¡çš„ç»†èŠ‚ç¨‹åº¦ä¼šæœ‰å¾ˆå¤§å·®åˆ«","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650246665,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":344865,"user_name":"neohope","can_delete":false,"product_type":"c1","uid":1043475,"ip_address":"","ucode":"C0268F6E7E2B6E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ec/13/49e98289.jpg","comment_is_top":false,"comment_ctime":1651826705,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5946794001","product_id":100105701,"comment_content":"ä¹˜å®¢ï¼š<br>1ã€ä¹˜å®¢å«è½¦ï¼Œå–æ¶ˆè¡Œç¨‹<br>2ã€ä¹˜å®¢ä¸Šè½¦å¼•å¯¼<br>3ã€è§„åˆ’è¡Œé©¶è·¯çº¿å±•ç¤º<br>4ã€ä¹˜å®¢æ”¯ä»˜ï¼Œé€€æ¬¾ç®¡ç†<br>5ã€æ‰“èµåŠŸèƒ½<br>6ã€é©¾é©¶å‘˜è¯„ä»·åŠŸèƒ½<br>7ã€æŠ•è¯‰åŠŸèƒ½<br><br>é©¾é©¶å‘˜ï¼š<br>1ã€é©¾é©¶å‘˜å¼€å§‹æ¥å•ï¼Œåœæ­¢æ¥å•<br>2ã€å–æ¶ˆè®¢å•<br>3ã€è½¦è¾†åˆ°è¾¾ç¡®è®¤ï¼Œä¹˜å®¢ä¸Šè½¦ç¡®è®¤ï¼Œå¼€å§‹è®¡è´¹<br>4ã€é©¾é©¶å‘˜ä¸ä¹˜å®¢èŠå¤©åŠŸèƒ½<br>5ã€é©¾é©¶å‘˜ä¸ä¹˜å®¢è™šæ‹Ÿç”µè¯æ²Ÿé€šåŠŸèƒ½<br>6ã€ç»“æŸè®¡è´¹<br>7ã€ä¹˜å®¢è¯„ä»·åŠŸèƒ½<br>8ã€é©¾é©¶å‘˜æç°<br>9ã€ç”³è¯‰åŠŸèƒ½<br><br>å¹³å°ï¼š<br>1ã€å¹³å°æ´¾å•ï¼šé™¤äº†å½“å‰æ´¾å•ç®—æ³•ï¼Œè¿˜è¦è€ƒè™‘ä¸èƒ½è®©ä¹˜å®¢é•¿ä¹…ç­‰å¾…ç»™é©¾é©¶å‘˜å¥–åŠ±ï¼Œç»™åŒä¸€é©¾é©¶å‘˜å•å­è¦æœ‰å¥½æœ‰åï¼Œä¸åŒé©¾é©¶å‘˜è¦é›¨éœ²å‡æ²¾<br>2ã€å‘ç¥¨ç®¡ç†ã€è¡Œç¨‹å•ç®¡ç†<br>3ã€è¡Œé©¶å®‰å…¨ï¼›é©¾é©¶å‘˜ç–²åŠ³ç®¡ç†ï¼›é˜²ç–«ä¿¡æ¯ç®¡ç†ï¼›è¡Œç¨‹å½•éŸ³å–è¯åˆ†æï¼›AIè‡ªåŠ¨åˆ†æå¼‚å¸¸æƒ…å†µï¼Œäº‰åµã€è½¦è¾†è·¯å¾„åç¦»ï¼Œè½¦è¾†é•¿æœŸä¸ç§»åŠ¨ç­‰ï¼›ç´§æ€¥æƒ…å†µå¤„ç†ï¼Œå®‰å…¨äººå‘˜åŠè­¦æ–¹åŠæ—¶ä»‹å…¥ï¼Œé€šçŸ¥ä¹˜å®¢å®‰å…¨è”ç»œäººï¼›<br>4ã€å®¢æœç³»ç»Ÿï¼Œå®¢è¯‰å¤„ç†ï¼Œå·¥å•ç³»ç»Ÿå¯¹æ¥<br>5ã€ä¿¡ç”¨ç³»ç»Ÿï¼šä¹˜å®¢ä¿¡ç”¨ã€é©¾é©¶å‘˜ä¿¡ç”¨<br>6ã€æ ‡ç­¾ç³»ç»Ÿï¼šé©¾é©¶å‘˜åŠä¹˜å®¢æ ‡ç­¾<br><br>ä¸šåŠ¡æ‰©å±•ï¼š<br>1ã€å¡åˆ¸ç®¡ç†<br>2ã€é¡ºé£è½¦ã€æ‹¼è½¦ã€é¢„çº¦ç”¨è½¦ã€ä»£é©¾ã€ä¼ä¸šç”¨æˆ·ç­‰","like_count":1},{"had_liked":false,"id":341913,"user_name":"æ¯›å“¥","can_delete":false,"product_type":"c1","uid":1061938,"ip_address":"","ucode":"E002CD9AC3B93A","user_header":"https://static001.geekbang.org/account/avatar/00/10/34/32/640230ec.jpg","comment_is_top":false,"comment_ctime":1649916273,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5944883569","product_id":100105701,"comment_content":"è¯·é—®è€å¸ˆï¼Œè®¢å•çŠ¶æ€ç®¡ç†å¯ä»¥ç”¨å·¥ä½œæµå¼•æ“å—ï¼Ÿæ¯”å¦‚Paymentè¿™å—æ¶‰åŠåˆ°transactionçš„è¿˜æ˜¯æŒºå¤æ‚çš„ï¼Œå·¥ä½œæµå¼•æ“ä¹Ÿå¯ä»¥è¾…åŠ©ç®¡ç†SAGAè¿™ç±»çš„è¡¥å¿äº‹åŠ¡çš„å®ç°ã€‚è€å¸ˆèƒ½å¦ç¨å¾®å±•å¼€è®²è§£ä¸€ä¸‹ï¼Ÿ","like_count":1},{"had_liked":false,"id":341129,"user_name":"HappyHasson","can_delete":false,"product_type":"c1","uid":2911084,"ip_address":"","ucode":"B84CC43E349CFA","user_header":"https://static001.geekbang.org/account/avatar/00/2c/6b/6c/3e80afaf.jpg","comment_is_top":false,"comment_ctime":1649381602,"is_pvip":true,"replies":[{"id":"124710","content":"1 å¸æœºappé‡æ–°è¿æ¥çš„æ—¶å€™ï¼Œåˆ é™¤æ—§çš„æ˜ å°„ï¼Œå†™å…¥æ–°çš„æ˜ å°„ã€‚æ–‡ä¸­æœ‰è¯´æ˜ã€‚<br>2 \bAppåœ¨åå°çš„æ—¶å€™é€šè¿‡æ¶ˆæ¯æ¨é€é€šçŸ¥è®¢å•çŠ¶æ€ï¼ŒAppæ‰“å¼€çŠ¶æ€å®šæ—¶è½®è¯¢ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1007349","ctime":1649410341,"ip_address":"","comment_id":341129,"utype":1}],"discussion_count":3,"race_medal":0,"score":"5944348898","product_id":100105701,"comment_content":"è¯·æ•™ä¸¤ä¸ªé—®é¢˜ï¼š<br>1. tcpç®¡ç†æœåŠ¡é›†ç¾¤ï¼Œä»€ä¹ˆæ—¶å€™ä¼šå»redisåˆ é™¤å¸æœºæ˜ å°„å…³ç³»ï¼Œæ¶æ„å›¾é‡Œå¥½åƒçœ‹ä¸å‡ºæ¥ï¼Ÿ<br><br>2. ç”¨æˆ·ç«¯appæ˜¯htté“¾æ¥ï¼Œè®¢å•çŠ¶æ€æ”¹å˜äº†ï¼Œä¹˜å®¢æ€ä¹ˆåŠæ—¶è·å–åˆ°ï¼Œappå®šæ—¶çš„pullè®¢å•çŠ¶æ€ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1007349,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5e/f5/018907ac.jpg","nickname":"ææ™ºæ…§","note":"","ucode":"8C9980C438AFD1","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":560638,"discussion_content":"1 å¸æœºappé‡æ–°è¿æ¥çš„æ—¶å€™ï¼Œåˆ é™¤æ—§çš„æ˜ å°„ï¼Œå†™å…¥æ–°çš„æ˜ å°„ã€‚æ–‡ä¸­æœ‰è¯´æ˜ã€‚\n2 \bAppåœ¨åå°çš„æ—¶å€™é€šè¿‡æ¶ˆæ¯æ¨é€é€šçŸ¥è®¢å•çŠ¶æ€ï¼ŒAppæ‰“å¼€çŠ¶æ€å®šæ—¶è½®è¯¢ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649410341,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2911084,"avatar":"https://static001.geekbang.org/account/avatar/00/2c/6b/6c/3e80afaf.jpg","nickname":"HappyHasson","note":"","ucode":"B84CC43E349CFA","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":560816,"discussion_content":"è€å¸ˆè¿™ä¸ªç¬¬ä¸€ç‚¹æˆ‘è¿˜æ˜¯æ²¡æ˜ç™½ï¼Œåªæœ‰é‡è¿çš„æ—¶å€™æ‰ä¼šåˆ é™¤æ—§çš„æ˜ å°„ï¼Ÿå¦‚æœå¸æœºç«¯appæ˜¯ä¸‹çº¿äº†ï¼Œä»€ä¹ˆæ—¶å€™åˆ é™¤ã€‚æ¶æ„å›¾ä¸Šæ˜¯è¿æ¥æœåŠ¡å™¨æ·»åŠ æ˜ å°„å…³ç³»åˆ°redisï¼Œé€šè¿‡tcpç®¡ç†æœåŠ¡å™¨è¿›è¡Œåˆ é™¤æ˜ å°„ã€‚å¸æœºç«¯appä¸‹çº¿äº†ï¼Œåªæœ‰è¿æ¥æœåŠ¡å™¨ä¼šæ„ŸçŸ¥å§ï¼Œtcpç®¡ç†æœåŠ¡å™¨æ€ä¹ˆä¼šçŸ¥é“å‘¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649463549,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1014665,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7b/89/34f2cbcc.jpg","nickname":"æ¨å®‡","note":"","ucode":"EB74DF6E269F03","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":2911084,"avatar":"https://static001.geekbang.org/account/avatar/00/2c/6b/6c/3e80afaf.jpg","nickname":"HappyHasson","note":"","ucode":"B84CC43E349CFA","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":574594,"discussion_content":"å¦‚æœæŸå¸æœºä¸‹çº¿äº†ï¼Œé‚£ä¹ˆä¸åº”è¯¥ç»™ä»–æ´¾å•ï¼Œæ‰€ä»¥å¹¶ä¸éœ€è¦è®¿é—®Redisè·å–ä»–çš„è¿æ¥ä¿¡æ¯ã€‚è„æ•°æ®ï¼Œå¯ä»¥ç­‰åˆ°è¯¥å¸æœºé‡æ–°ä¸Šçº¿åå†å¤„ç†ã€‚\nä¸‹çº¿çš„åˆ¤æ–­åˆ™æ˜¯å¦ä¸€ä¸ªé—®é¢˜äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1654167767,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":560816,"ip_address":""},"score":574594,"extra":""}]}]},{"had_liked":false,"id":340819,"user_name":"Steven","can_delete":false,"product_type":"c1","uid":1253652,"ip_address":"","ucode":"3FE64459842015","user_header":"https://static001.geekbang.org/account/avatar/00/13/21/14/423a821f.jpg","comment_is_top":false,"comment_ctime":1649160373,"is_pvip":false,"replies":[{"id":"124612","content":"èµã€‚<br><br>å“ˆå“ˆï¼Œå¤§å®¶è¸Šè·ƒäº¤ä½œä¸šå•Šï¼Œè‡ªå·±åŠ¨æ‰‹å†™ä¸€ä¸ªæ–‡æ¡£ï¼Œæ„Ÿè§‰ä¼šéå¸¸ä¸ä¸€æ ·çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1007349","ctime":1649209650,"ip_address":"","comment_id":340819,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5944127669","product_id":100105701,"comment_content":"å›ç­”é—®é¢˜ï¼š<br>åœºæ™¯1ï¼šä¹˜å®¢ä¸‹å•ï¼Œæ²¡æœ‰å¸æœºæ¥å•ã€‚<br>æ–¹æ¡ˆï¼š1æ‰©å¤§è·ç¦»èŒƒå›´å¯»æ‰¾åˆé€‚çš„å¸æœºï¼›2æé«˜å¸æœºåˆ†æˆæ¯”ä¾‹ï¼Œä»¥æ¿€åŠ±å¸æœºæ¥å•ã€‚<br><br>åœºæ™¯2ï¼šä¹˜å®¢ä¸‹å•ï¼Œèƒ½æ¥å•çš„å¸æœºè·ç¦»å¤ªè¿œ<br>æ–¹æ¡ˆï¼š1ç”¨æˆ·ç«¯åšå¥½ç”¨æˆ·ä½“éªŒï¼Œæ—¶é—´é•¿å’Œæ„Ÿè§‰ä¸Šæ—¶é—´é•¿æ˜¯ä¸¤å›äº‹ï¼›2é€‚å½“ç»™ç”¨æˆ·æŠµå€¼åˆ¸ã€‚<br><br><br>btwï¼Œè¿™èŠ‚è¯¾ä¸æœŸä¸­æµ‹è¯•é¢˜å¾ˆç±»ä¼¼ï¼Œæ˜¯åº”ç¼–è¾‘è¦æ±‚æä¾›ç»™å¤§å®¶æŠ„ä½œä¸šçš„å—ï¼Ÿå“ˆå“ˆï¼Œå¼€ç©ç¬‘çš„ã€‚","like_count":1,"discussions":[{"author":{"id":1007349,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5e/f5/018907ac.jpg","nickname":"ææ™ºæ…§","note":"","ucode":"8C9980C438AFD1","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":560128,"discussion_content":"èµã€‚\n\nå“ˆå“ˆï¼Œå¤§å®¶è¸Šè·ƒäº¤ä½œä¸šå•Šï¼Œè‡ªå·±åŠ¨æ‰‹å†™ä¸€ä¸ªæ–‡æ¡£ï¼Œæ„Ÿè§‰ä¼šéå¸¸ä¸ä¸€æ ·çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649209650,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2911084,"avatar":"https://static001.geekbang.org/account/avatar/00/2c/6b/6c/3e80afaf.jpg","nickname":"HappyHasson","note":"","ucode":"B84CC43E349CFA","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":560529,"discussion_content":"è¯·æ•™ä¸¤ä¸ªé—®é¢˜ï¼š\n1. tcpç®¡ç†æœåŠ¡é›†ç¾¤ï¼Œä»€ä¹ˆæ—¶å€™ä¼šå»redisåˆ é™¤å¸æœºæ˜ å°„å…³ç³»ï¼Œæ¶æ„å›¾é‡Œå¥½åƒçœ‹ä¸å‡ºæ¥ï¼Ÿ\n\n2. ç”¨æˆ·ç«¯appæ˜¯htté“¾æ¥ï¼Œè®¢å•çŠ¶æ€æ”¹å˜äº†ï¼Œä¹˜å®¢æ€ä¹ˆåŠæ—¶è·å–åˆ°ï¼Œappå®šæ—¶çš„pullè®¢å•çŠ¶æ€ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649381564,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":340715,"user_name":"peter","can_delete":false,"product_type":"c1","uid":1058183,"ip_address":"","ucode":"261C3FC001DE2D","user_header":"https://static001.geekbang.org/account/avatar/00/10/25/87/f3a69d1b.jpg","comment_is_top":false,"comment_ctime":1649071445,"is_pvip":true,"replies":[{"id":"124614","content":"1 5ä¸ªäººä¸‹äº†6ä¸ªè®¢å•~<br>2 A linuxç¼ºçœè¿æ¥æ•°ä¸Šé™æ˜¯65535ï¼Œä¸ä¿®æ”¹linuxå‚æ•°çš„è¯éœ€è¦300å°ã€‚B Netty C æ˜¯çš„<br>3 æ‰‹æœºæœ‰æŒ‡å—é’ˆåŠŸèƒ½<br>4 è¿™é‡Œä¸»è¦ç”¨æ¥åšTCPè¿æ¥æœåŠ¡å™¨å¿ƒè·³æ£€æµ‹ï¼Œç›®å‰çš„ä½œç”¨æœ‰ç‚¹é¸¡è‚‹çš„ï¼Œå¯ä»¥å»æ‰çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1007349","ctime":1649210218,"ip_address":"","comment_id":340715,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5944038741","product_id":100105701,"comment_content":"è¯·æ•™è€å¸ˆå‡ ä¸ªé—®é¢˜ï¼š<br>Q1ï¼šè®¢å•æ•°é‡åº”è¯¥æ˜¯æ•´æ•°ï¼Œå¹³å‡è®¢å•æ•°æ€ä¹ˆä¼šæ˜¯å°æ•°1.2å‘¢ï¼Ÿ<br>Q2ï¼šTCPé•¿è¿æ¥ï¼š<br>A å¸æœºæ—¥æ´»2åƒä¸‡ï¼ŒTCPè¿æ¥æœåŠ¡å™¨éœ€è¦å¤šå°‘å°ï¼Ÿï¼ˆæˆ–è€…è¯´ï¼Œé€šå¸¸æƒ…å†µä¸‹ä¸€å°æœåŠ¡å™¨æ”¯æŒå¤šå°‘TCPè¿æ¥ï¼Ÿï¼‰<br>B TCPè¿æ¥æœ‰ç°æˆçš„æ¡†æ¶å—ï¼Ÿ<br>C TCPè¿æ¥çš„å®ç°ï¼Œå°±æ˜¯ç”¨Socketå—ï¼Ÿï¼ˆä»¥Javaä¸ºä¾‹ï¼Œå®‰å“APPç«¯ï¼šnew Socket; socket.connect(serverInitAddr)ï¼› æœåŠ¡å™¨ç«¯ï¼šnew ServerSocket(port),serverSocket.accept()ï¼‰<br>Q3ï¼šå®‰å“å®¢æˆ·ç«¯æ€ä¹ˆèƒ½å¤Ÿè·å–è½¦å¤´æ–¹å‘ï¼Ÿ<br>Q4ï¼šç³»ç»Ÿä¸­çš„zookeeperæ˜¯ç”¨Zookeeperçš„ä»€ä¹ˆåŠŸèƒ½ï¼Ÿå¯ç”¨ä»€ä¹ˆæ›¿æ¢ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1007349,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5e/f5/018907ac.jpg","nickname":"ææ™ºæ…§","note":"","ucode":"8C9980C438AFD1","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":560130,"discussion_content":"1 5ä¸ªäººä¸‹äº†6ä¸ªè®¢å•~\n2 A linuxç¼ºçœè¿æ¥æ•°ä¸Šé™æ˜¯65535ï¼Œä¸ä¿®æ”¹linuxå‚æ•°çš„è¯éœ€è¦300å°ã€‚B Netty C æ˜¯çš„\n3 æ‰‹æœºæœ‰æŒ‡å—é’ˆåŠŸèƒ½\n4 è¿™é‡Œä¸»è¦ç”¨æ¥åšTCPè¿æ¥æœåŠ¡å™¨å¿ƒè·³æ£€æµ‹ï¼Œç›®å‰çš„ä½œç”¨æœ‰ç‚¹é¸¡è‚‹çš„ï¼Œå¯ä»¥å»æ‰çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649210218,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1253652,"avatar":"https://static001.geekbang.org/account/avatar/00/13/21/14/423a821f.jpg","nickname":"Steven","note":"","ucode":"3FE64459842015","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":560077,"discussion_content":"Q1ï¼š1.2 æ˜¯å¹³å‡æ•°ï¼Œæ¯”å¦‚5ä¸ªäºº6ä¸ªè®¢å•ï¼Œ6/5=1.2ã€‚\n\nQ2ï¼šNIOå§ï¼Œæ¯”å¦‚ Nettyï¼Œå…·ä½“å¤šå°‘è¿æ¥è¦ç»è¿‡å‹æµ‹å¾—å‡ºã€‚\n\nQ3ï¼šè½¦å½“å‰ä½ç½®å’Œä¸Šä¸€æ¬¡ä½ç½®å¯¹æ¯”ï¼Œå°±å¯ä»¥çŸ¥é“è½¦å‰è¿›çš„æ–¹å‘ï¼Œå³è½¦å¤´çš„æ–¹å‘ã€‚\n\nQ4ï¼šZookeeperå¯ä»¥ç›‘æ§èŠ‚ç‚¹çŠ¶æ€ï¼Œè®¿é—®å®ƒå¯ä»¥è·å–å½“å‰å¯ç”¨çš„TCP è¿æ¥æœåŠ¡å™¨åˆ—è¡¨ï¼ˆå¦‚æœä¸€ä¸ªèŠ‚ç‚¹å®•æœºï¼Œå…¶ä¼šä»åˆ—è¡¨ä¸­ç§»é™¤ï¼‰ã€‚\nZookeeper éœ€è¦é›†ç¾¤éƒ¨ç½²ï¼Œè¿™é‡Œéœ€è¦è€ƒè™‘é«˜å¯ç”¨ï¼Œæ‰€ä»¥è¿™é‡Œèƒ½å®ç°é«˜å¯ç”¨ï¼Œç›‘æ§èŠ‚ç‚¹çŠ¶æ€çš„æ–¹æ¡ˆéƒ½å¯ä»¥ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1649161474,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":351055,"user_name":"walleæ–Œ","can_delete":false,"product_type":"c1","uid":1062848,"ip_address":"","ucode":"0DB3243004951F","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ersGSic8ib7OguJv6CJiaXY0s4n9C7Z51sWxTTljklFpq3ZAIWXoFTPV5oLo0GMTkqW5sYJRRnibNqOJQ/132","comment_is_top":false,"comment_ctime":1657504369,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1657504369","product_id":100105701,"comment_content":"å¯ä»¥æŒ‰ç…§å‡ çº§çš„geohash æ¥è®¡ç®—ã€‚ã€‚4çº§geohash åŸºæœ¬å°±åˆ°äº†åŒ—äº¬å¸‚å¤§å°äº†ã€‚ã€‚5çº§ä¸€èˆ¬åˆ°åŒºå¿çº§åˆ«äº†ã€‚ã€‚","like_count":0},{"had_liked":false,"id":347163,"user_name":"é£","can_delete":false,"product_type":"c1","uid":1018132,"ip_address":"","ucode":"6FCC11027BBE7A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/89/14/71bcd25e.jpg","comment_is_top":false,"comment_ctime":1653758999,"is_pvip":false,"replies":[{"id":"126623","content":"TCPè¿æ¥æœåŠ¡å™¨ç±»ä¼¼è´Ÿè½½å‡è¡¡æœåŠ¡ï¼Œåªæä¾›é€šä¿¡åŠŸèƒ½ï¼Œæ²¡æœ‰ä¸šåŠ¡é€»è¾‘ï¼Œæ‰€ä»¥å®‰å…¨é˜²æŠ¤æ–¹é¢å¯ä»¥åšçš„æ›´å¼ºå¤§ä¸€ç‚¹ã€‚<br><br>æ˜¯çš„ï¼Œå¸æœºAppä¹Ÿéœ€è¦ç™»å½•æ³¨å†Œï¼Œåº”è¯¥é€šè¿‡HTTPå’Œè´Ÿè½½å‡è¡¡æœåŠ¡å™¨å®Œæˆï¼Œå›¾ä¸­ä¸ºäº†ç®€åŒ–çœç•¥äº†è¿™æ¡çº¿ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1007349","ctime":1653872970,"ip_address":"","comment_id":347163,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1653758999","product_id":100105701,"comment_content":"è€å¸ˆï¼Œè¿”å›æŸå°tcpè¿æ¥æœåŠ¡å™¨çš„IPåœ°å€å’Œç«¯å£ç»™åˆ°å¸æœºappå®¢æˆ·ç«¯ï¼Œè¿™æ ·æš´éœ²æœåŠ¡å™¨IPå’Œç«¯å£ä¿¡æ¯å®‰å…¨å—ï¼Ÿå¦‚ä½•ä¿è¯å®‰å…¨ï¼Ÿå¦å¤–å¸æœºç«¯appåº”è¯¥ä¹Ÿéœ€è¦ç™»å½•æ³¨å†Œå§ï¼Œç™»å½•æ³¨å†Œæµç¨‹åº”è¯¥ä¹Ÿæ˜¯é€šè¿‡httpäº¤äº’çš„ï¼Œé‚£ä¹ˆæˆ‘çœ‹ä¸Šé¢çš„å¸æœºappæµç¨‹å›¾ä¸­ä¸€å¯åŠ¨å°±åˆ›å»ºé•¿é“¾æ¥äº†ï¼Œç™»å½•æµç¨‹åº”è¯¥æ€ä¹ˆå®ç°ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1007349,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5e/f5/018907ac.jpg","nickname":"ææ™ºæ…§","note":"","ucode":"8C9980C438AFD1","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":574148,"discussion_content":"TCPè¿æ¥æœåŠ¡å™¨ç±»ä¼¼è´Ÿè½½å‡è¡¡æœåŠ¡ï¼Œåªæä¾›é€šä¿¡åŠŸèƒ½ï¼Œæ²¡æœ‰ä¸šåŠ¡é€»è¾‘ï¼Œæ‰€ä»¥å®‰å…¨é˜²æŠ¤æ–¹é¢å¯ä»¥åšçš„æ›´å¼ºå¤§ä¸€ç‚¹ã€‚\n\næ˜¯çš„ï¼Œå¸æœºAppä¹Ÿéœ€è¦ç™»å½•æ³¨å†Œï¼Œåº”è¯¥é€šè¿‡HTTPå’Œè´Ÿè½½å‡è¡¡æœåŠ¡å™¨å®Œæˆï¼Œå›¾ä¸­ä¸ºäº†ç®€åŒ–çœç•¥äº†è¿™æ¡çº¿ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1653872971,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":345664,"user_name":"test","can_delete":false,"product_type":"c1","uid":1065849,"ip_address":"","ucode":"9A4973E591DD12","user_header":"https://static001.geekbang.org/account/avatar/00/10/43/79/18073134.jpg","comment_is_top":false,"comment_ctime":1652496327,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1652496327","product_id":100105701,"comment_content":"æ˜¯å¦éœ€è¦è€ƒè™‘æŠ¢å•å‘¢","like_count":0},{"had_liked":false,"id":344383,"user_name":"ç‹è¾‰","can_delete":false,"product_type":"c1","uid":1128291,"ip_address":"","ucode":"A85C1E74EBAC8A","user_header":"https://static001.geekbang.org/account/avatar/00/11/37/63/a5579b6a.jpg","comment_is_top":false,"comment_ctime":1651501471,"is_pvip":false,"replies":[{"id":"125788","content":"é«˜å¹¶å‘çš„è®¢å•æœ€åéƒ½ä¼šè¿›å…¥åˆ°æ´¾å•å¼•æ“ï¼Œæ´¾å•å¼•æ“åšå¥½å¸æœºçŠ¶æ€ç®¡ç†å°±å¯ä»¥ï¼Œåº”è¯¥æ²¡ä»€ä¹ˆæŠ€æœ¯æŒ‘æˆ˜çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1007349","ctime":1651720651,"ip_address":"","comment_id":344383,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1651501471","product_id":100105701,"comment_content":"è€å¸ˆè¯·æ•™ä¸€ä¸ªé—®é¢˜ï¼Œå¸Œæœ›å¸®å¿™è§£ç­”ä¸‹ï¼š<br>1.é«˜å¹¶å‘ä¸‹ï¼Œå¦‚ä½•ä¿è¯ä¸¤æ¡è®¢å•ä¸ä¼šåŒ¹é…åˆ°åŒä¸€ä¸ªå¸æœºï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1007349,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5e/f5/018907ac.jpg","nickname":"ææ™ºæ…§","note":"","ucode":"8C9980C438AFD1","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":570268,"discussion_content":"é«˜å¹¶å‘çš„è®¢å•æœ€åéƒ½ä¼šè¿›å…¥åˆ°æ´¾å•å¼•æ“ï¼Œæ´¾å•å¼•æ“åšå¥½å¸æœºçŠ¶æ€ç®¡ç†å°±å¯ä»¥ï¼Œåº”è¯¥æ²¡ä»€ä¹ˆæŠ€æœ¯æŒ‘æˆ˜çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651720651,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":343861,"user_name":"ABC","can_delete":false,"product_type":"c1","uid":1054958,"ip_address":"","ucode":"7501AD9C0C4A70","user_header":"https://static001.geekbang.org/account/avatar/00/10/18/ee/a1ed60d1.jpg","comment_is_top":false,"comment_ctime":1651103983,"is_pvip":false,"replies":[{"id":"125792","content":"å¤§éƒ¨åˆ†ç½‘çº¦è½¦å¹³å°éƒ½æœ‰2Bçš„ä¾›åº”å•†æ¥å£çš„ï¼Œé€šè¿‡å•†åŠ¡è°ˆåˆ¤è°ƒç”¨æ¥å£å°±å¯ä»¥èšåˆå„å®¶æ‰“è½¦æœåŠ¡çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1007349","ctime":1651721474,"ip_address":"","comment_id":343861,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1651103983","product_id":100105701,"comment_content":"å…¶å®è¿˜éœ€è¦è€ƒè™‘ï¼Œä¹˜è½¦å®‰å…¨ï¼Œç”¨æˆ·éšç§ä¿æŠ¤ï¼ˆè”ç³»ç”µè¯ï¼‰ï¼Œæ’é˜Ÿé—®é¢˜ï¼Œè¿™äº›ã€‚<br><br>å¦å¤–æœ‰ä¸ªé—®é¢˜ï¼Œæ¯”å¦‚åƒæŸå¯¼èˆªè½¯ä»¶ï¼Œé‡Œé¢çš„æ‰“è½¦åº”ç”¨èšåˆäº†ä¸Šç™¾å®¶æ‰“è½¦è½¯ä»¶ï¼Œä»–æ˜¯æ€ä¹ˆå®ç°çš„å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1007349,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5e/f5/018907ac.jpg","nickname":"ææ™ºæ…§","note":"","ucode":"8C9980C438AFD1","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":570273,"discussion_content":"å¤§éƒ¨åˆ†ç½‘çº¦è½¦å¹³å°éƒ½æœ‰2Bçš„ä¾›åº”å•†æ¥å£çš„ï¼Œé€šè¿‡å•†åŠ¡è°ˆåˆ¤è°ƒç”¨æ¥å£å°±å¯ä»¥èšåˆå„å®¶æ‰“è½¦æœåŠ¡çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651721474,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":340734,"user_name":"é€é£","can_delete":false,"product_type":"c1","uid":1257067,"ip_address":"","ucode":"F40166FA5E32DF","user_header":"https://static001.geekbang.org/account/avatar/00/13/2e/6b/9895de18.jpg","comment_is_top":false,"comment_ctime":1649086416,"is_pvip":true,"replies":[{"id":"124613","content":"ç”µå­åœ°å›¾ä¹Ÿæ˜¯ä¸€ä¸ªæ¯”è¾ƒå¤§çš„åº”ç”¨ç±»åˆ«äº†ï¼Œåé¢æœ‰æœºä¼šå¯ä»¥å†™ä¸€ä¸‹ï¼Œä¹Ÿæ¬¢è¿æœ‰å…´è¶£çš„åŒå­¦å†™äº†å‘ä¸Šæ¥ï¼Œå¤§å®¶ä¸€èµ·äº¤æµå­¦ä¹ ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1007349","ctime":1649209759,"ip_address":"","comment_id":340734,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1649086416","product_id":100105701,"comment_content":"è€å¸ˆèƒ½åŠ ä¸ªé¤æ‹“å±•è®²è®²æœ¬æ–‡åœ°ç†ç³»ç»Ÿçš„è®¾è®¡å—","like_count":0,"discussions":[{"author":{"id":1007349,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5e/f5/018907ac.jpg","nickname":"ææ™ºæ…§","note":"","ucode":"8C9980C438AFD1","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":560129,"discussion_content":"ç”µå­åœ°å›¾ä¹Ÿæ˜¯ä¸€ä¸ªæ¯”è¾ƒå¤§çš„åº”ç”¨ç±»åˆ«äº†ï¼Œåé¢æœ‰æœºä¼šå¯ä»¥å†™ä¸€ä¸‹ï¼Œä¹Ÿæ¬¢è¿æœ‰å…´è¶£çš„åŒå­¦å†™äº†å‘ä¸Šæ¥ï¼Œå¤§å®¶ä¸€èµ·äº¤æµå­¦ä¹ ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649209759,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":340689,"user_name":"æ•…äº‹ã€è‡ªå·±å†™","can_delete":false,"product_type":"c1","uid":1048419,"ip_address":"","ucode":"D3C87D6B9004D7","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ff/63/042aaa14.jpg","comment_is_top":false,"comment_ctime":1649048083,"is_pvip":false,"replies":[{"id":"124615","content":"ğŸ˜","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1007349","ctime":1649210227,"ip_address":"","comment_id":340689,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1649048083","product_id":100105701,"comment_content":"è€å¸ˆæ¡ˆä¾‹é¡¹ç›®åå­—å–çš„çœŸå¥½","like_count":0,"discussions":[{"author":{"id":1007349,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5e/f5/018907ac.jpg","nickname":"ææ™ºæ…§","note":"","ucode":"8C9980C438AFD1","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":560131,"discussion_content":"ğŸ˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649210227,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}