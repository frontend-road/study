{"id":237612,"title":"09 | å¦‚ä½•æå‡TCPä¸‰æ¬¡æ¡æ‰‹çš„æ€§èƒ½ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯é™¶è¾‰ã€‚</p><p>ä¸Šä¸€è®²æˆ‘ä»¬æåˆ°TCPåœ¨ä¸‰æ¬¡æ¡æ‰‹å»ºç«‹è¿æ¥ã€å››æ¬¡æ¡æ‰‹å…³é—­è¿æ¥æ—¶æ˜¯æ€æ ·äº§ç”Ÿäº‹ä»¶çš„ï¼Œè¿™ä¸¤ä¸ªè¿‡ç¨‹ä¸­TCPè¿æ¥ç»å†äº†å¤æ‚çš„çŠ¶æ€å˜åŒ–ï¼Œæ—¢å®¹æ˜“å¯¼è‡´ç¼–ç¨‹å‡ºé”™ï¼Œä¹Ÿæœ‰å¾ˆå¤§çš„ä¼˜åŒ–ç©ºé—´ã€‚è¿™ä¸€è®²æˆ‘ä»¬çœ‹çœ‹åœ¨Linuxæ“ä½œç³»ç»Ÿä¸‹ï¼Œå¦‚ä½•ä¼˜åŒ–TCPçš„ä¸‰æ¬¡æ¡æ‰‹æµç¨‹ï¼Œæå‡æ¡æ‰‹é€Ÿåº¦ã€‚</p><p>TCPæ˜¯ä¸€ä¸ªå¯ä»¥åŒå‘ä¼ è¾“çš„å…¨åŒå·¥åè®®ï¼Œæ‰€ä»¥éœ€è¦ç»è¿‡ä¸‰æ¬¡æ¡æ‰‹æ‰èƒ½å»ºç«‹è¿æ¥ã€‚ä¸‰æ¬¡æ¡æ‰‹åœ¨ä¸€ä¸ªHTTPè¯·æ±‚ä¸­çš„å¹³å‡æ—¶é—´å æ¯”åœ¨10%ä»¥ä¸Šï¼Œåœ¨ç½‘ç»œçŠ¶å†µä¸ä½³ã€é«˜å¹¶å‘æˆ–è€…é­é‡SYNæ³›æ´ªæ”»å‡»ç­‰åœºæ™¯ä¸­ï¼Œå¦‚æœä¸èƒ½æ­£ç¡®åœ°è°ƒæ•´ä¸‰æ¬¡æ¡æ‰‹ä¸­çš„å‚æ•°ï¼Œå°±ä¼šå¯¹æ€§èƒ½æœ‰å¾ˆå¤§çš„å½±å“ã€‚</p><p>TCPåè®®æ˜¯ç”±æ“ä½œç³»ç»Ÿå®ç°çš„ï¼Œè°ƒæ•´TCPå¿…é¡»é€šè¿‡æ“ä½œç³»ç»Ÿæä¾›çš„æ¥å£å’Œå·¥å…·ï¼Œè¿™å°±éœ€è¦ç†è§£Linuxæ˜¯æ€æ ·æŠŠä¸‰æ¬¡æ¡æ‰‹ä¸­çš„çŠ¶æ€æš´éœ²ç»™æˆ‘ä»¬ï¼Œä»¥åŠé€šè¿‡å“ªäº›å·¥å…·å¯ä»¥æ‰¾åˆ°ä¼˜åŒ–ä¾æ®ï¼Œå¹¶é€šè¿‡å“ªäº›æ¥å£ä¿®æ”¹å‚æ•°ã€‚</p><p>å› æ­¤ï¼Œè¿™ä¸€è®²æˆ‘ä»¬å°†ä»‹ç»TCPæ¡æ‰‹è¿‡ç¨‹ä¸­å„çŠ¶æ€çš„æ„ä¹‰ï¼Œå¹¶ä»¥çŠ¶æ€å˜åŒ–ä½œä¸ºä¸»çº¿ï¼Œçœ‹çœ‹å¦‚ä½•è°ƒæ•´Linuxå‚æ•°æ‰èƒ½æå‡æ¡æ‰‹çš„æ€§èƒ½ã€‚</p><h2>å®¢æˆ·ç«¯çš„ä¼˜åŒ–</h2><p>å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨éƒ½å¯ä»¥é’ˆå¯¹ä¸‰æ¬¡æ¡æ‰‹ä¼˜åŒ–æ€§èƒ½ã€‚ç›¸å¯¹è€Œè¨€ï¼Œä¸»åŠ¨å‘èµ·è¿æ¥çš„å®¢æˆ·ç«¯ä¼˜åŒ–ç›¸å¯¹ç®€å•ä¸€äº›ï¼Œè€ŒæœåŠ¡å™¨éœ€è¦åœ¨ç›‘å¬ç«¯å£ä¸Šè¢«åŠ¨ç­‰å¾…è¿æ¥ï¼Œå¹¶ä¿å­˜è®¸å¤šæ¡æ‰‹çš„ä¸­é—´çŠ¶æ€ï¼Œä¼˜åŒ–æ–¹æ³•æ›´ä¸ºå¤æ‚ä¸€äº›ã€‚æˆ‘ä»¬é¦–å…ˆæ¥çœ‹å¦‚ä½•ä¼˜åŒ–å®¢æˆ·ç«¯ã€‚</p><!-- [[[read_end]]] --><p>ä¸‰æ¬¡æ¡æ‰‹å»ºç«‹è¿æ¥çš„é¦–è¦ç›®çš„æ˜¯åŒæ­¥åºåˆ—å·ã€‚åªæœ‰åŒæ­¥äº†åºåˆ—å·æ‰æœ‰å¯é çš„ä¼ è¾“ï¼ŒTCPåè®®çš„è®¸å¤šç‰¹æ€§éƒ½æ˜¯ä¾èµ–åºåˆ—å·å®ç°çš„ï¼Œæ¯”å¦‚æµé‡æ§åˆ¶ã€æ¶ˆæ¯ä¸¢å¤±åçš„é‡å‘ç­‰ç­‰ï¼Œè¿™ä¹Ÿæ˜¯ä¸‰æ¬¡æ¡æ‰‹ä¸­çš„æŠ¥æ–‡è¢«ç§°ä¸ºSYNçš„åŸå› ï¼Œå› ä¸ºSYNçš„å…¨ç§°å°±å«åšSynchronize Sequence Numbersã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/c5/aa/c51d9f1604690ab1b69e7c4feb2f31aa.jpg?wh=2052*620\" alt=\"\"></p><p>ä¸‰æ¬¡æ¡æ‰‹è™½ç„¶ç”±æ“ä½œç³»ç»Ÿå®ç°ï¼Œä½†å®ƒé€šè¿‡è¿æ¥çŠ¶æ€æŠŠè¿™ä¸€è¿‡ç¨‹æš´éœ²ç»™äº†æˆ‘ä»¬ï¼Œæˆ‘ä»¬æ¥ç»†çœ‹ä¸‹è¿‡ç¨‹ä¸­å‡ºç°çš„3ç§çŠ¶æ€çš„æ„ä¹‰ã€‚å®¢æˆ·ç«¯å‘é€SYNå¼€å¯äº†ä¸‰æ¬¡æ¡æ‰‹ï¼Œæ­¤æ—¶åœ¨å®¢æˆ·ç«¯ä¸Šç”¨netstatå‘½ä»¤ï¼ˆåç»­æŸ¥çœ‹è¿æ¥çŠ¶æ€éƒ½ä½¿ç”¨è¯¥å‘½ä»¤ï¼‰å¯ä»¥çœ‹åˆ°<strong>è¿æ¥çš„çŠ¶æ€æ˜¯SYN_SENT</strong>ï¼ˆé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯æŠŠåˆšSYNå‘é€å‡ºå»ï¼‰ã€‚</p><pre><code>tcp    0   1 172.16.20.227:39198     129.28.56.36:81         SYN_SENT\n</code></pre><p>å®¢æˆ·ç«¯åœ¨ç­‰å¾…æœåŠ¡å™¨å›å¤çš„ACKæŠ¥æ–‡ã€‚æ­£å¸¸æƒ…å†µä¸‹ï¼ŒæœåŠ¡å™¨ä¼šåœ¨å‡ æ¯«ç§’å†…è¿”å›ACKï¼Œä½†å¦‚æœå®¢æˆ·ç«¯è¿Ÿè¿Ÿæ²¡æœ‰æ”¶åˆ°ACKä¼šæ€ä¹ˆæ ·å‘¢ï¼Ÿå®¢æˆ·ç«¯ä¼šé‡å‘SYNï¼Œ<strong>é‡è¯•çš„æ¬¡æ•°ç”±tcp_syn_retrieså‚æ•°æ§åˆ¶</strong>ï¼Œé»˜è®¤æ˜¯6æ¬¡ï¼š</p><pre><code>net.ipv4.tcp_syn_retries = 6\n</code></pre><p>ç¬¬1æ¬¡é‡è¯•å‘ç”Ÿåœ¨1ç§’é’Ÿåï¼Œæ¥ç€ä¼šä»¥ç¿»å€çš„æ–¹å¼åœ¨ç¬¬2ã€4ã€8ã€16ã€32ç§’å…±åš6æ¬¡é‡è¯•ï¼Œæœ€åä¸€æ¬¡é‡è¯•ä¼šç­‰å¾…64ç§’ï¼Œå¦‚æœä»ç„¶æ²¡æœ‰è¿”å›ACKï¼Œæ‰ä¼šç»ˆæ­¢ä¸‰æ¬¡æ¡æ‰‹ã€‚æ‰€ä»¥ï¼Œæ€»è€—æ—¶æ˜¯1+2+4+8+16+32+64=127ç§’ï¼Œè¶…è¿‡2åˆ†é’Ÿã€‚</p><p>å¦‚æœè¿™æ˜¯ä¸€å°æœ‰æ˜ç¡®ä»»åŠ¡çš„æœåŠ¡å™¨ï¼Œä½ å¯ä»¥æ ¹æ®ç½‘ç»œçš„ç¨³å®šæ€§å’Œç›®æ ‡æœåŠ¡å™¨çš„ç¹å¿™ç¨‹åº¦ä¿®æ”¹é‡è¯•æ¬¡æ•°ï¼Œè°ƒæ•´å®¢æˆ·ç«¯çš„ä¸‰æ¬¡æ¡æ‰‹æ—¶é—´ä¸Šé™ã€‚æ¯”å¦‚å†…ç½‘ä¸­é€šè®¯æ—¶ï¼Œå°±å¯ä»¥é€‚å½“è°ƒä½é‡è¯•æ¬¡æ•°ï¼Œå°½å¿«æŠŠé”™è¯¯æš´éœ²ç»™åº”ç”¨ç¨‹åºã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/a3/8f/a3c5e77a228478da2a6e707054043c8f.png?wh=943*613\" alt=\"\"></p><h2>æœåŠ¡å™¨ç«¯çš„ä¼˜åŒ–</h2><p>å½“æœåŠ¡å™¨æ”¶åˆ°SYNæŠ¥æ–‡åï¼ŒæœåŠ¡å™¨ä¼šç«‹åˆ»å›å¤SYN+ACKæŠ¥æ–‡ï¼Œæ—¢ç¡®è®¤äº†å®¢æˆ·ç«¯çš„åºåˆ—å·ï¼Œä¹ŸæŠŠè‡ªå·±çš„åºåˆ—å·å‘ç»™äº†å¯¹æ–¹ã€‚æ­¤æ—¶ï¼ŒæœåŠ¡å™¨ç«¯å‡ºç°äº†æ–°è¿æ¥ï¼ŒçŠ¶æ€æ˜¯SYN_RCVï¼ˆRCVæ˜¯receivedçš„ç¼©å†™ï¼‰ã€‚è¿™ä¸ªçŠ¶æ€ä¸‹ï¼ŒæœåŠ¡å™¨å¿…é¡»å»ºç«‹ä¸€ä¸ªSYNåŠè¿æ¥é˜Ÿåˆ—æ¥ç»´æŠ¤æœªå®Œæˆçš„æ¡æ‰‹ä¿¡æ¯ï¼Œå½“è¿™ä¸ªé˜Ÿåˆ—æº¢å‡ºåï¼ŒæœåŠ¡å™¨å°†æ— æ³•å†å»ºç«‹æ–°è¿æ¥ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/c3/82/c361e672526ee5bb87d5f6b7ad169982.png?wh=690*304\" alt=\"\"></p><p>æ–°è¿æ¥å»ºç«‹å¤±è´¥çš„åŸå› æœ‰å¾ˆå¤šï¼Œæ€æ ·è·å¾—ç”±äºé˜Ÿåˆ—å·²æ»¡è€Œå¼•å‘çš„å¤±è´¥æ¬¡æ•°å‘¢ï¼Ÿnetstat -så‘½ä»¤ç»™å‡ºçš„ç»Ÿè®¡ç»“æœä¸­å¯ä»¥å¾—åˆ°ã€‚</p><pre><code># netstat -s | grep &quot;SYNs to LISTEN&quot;\n    1192450 SYNs to LISTEN sockets dropped\n</code></pre><p>è¿™é‡Œç»™å‡ºçš„æ˜¯é˜Ÿåˆ—æº¢å‡ºå¯¼è‡´SYNè¢«ä¸¢å¼ƒçš„ä¸ªæ•°ã€‚æ³¨æ„è¿™æ˜¯ä¸€ä¸ªç´¯è®¡å€¼ï¼Œå¦‚æœæ•°å€¼åœ¨æŒç»­å¢åŠ ï¼Œåˆ™åº”è¯¥è°ƒå¤§SYNåŠè¿æ¥é˜Ÿåˆ—ã€‚<strong>ä¿®æ”¹é˜Ÿåˆ—å¤§å°çš„æ–¹æ³•ï¼Œæ˜¯è®¾ç½®Linuxçš„tcp_max_syn_backlog å‚æ•°ï¼š</strong></p><pre><code>net.ipv4.tcp_max_syn_backlog = 1024\n</code></pre><p>å¦‚æœSYNåŠè¿æ¥é˜Ÿåˆ—å·²æ»¡ï¼Œåªèƒ½ä¸¢å¼ƒè¿æ¥å—ï¼Ÿå¹¶ä¸æ˜¯è¿™æ ·ï¼Œ<strong>å¼€å¯syncookiesåŠŸèƒ½å°±å¯ä»¥åœ¨ä¸ä½¿ç”¨SYNé˜Ÿåˆ—çš„æƒ…å†µä¸‹æˆåŠŸå»ºç«‹è¿æ¥ã€‚</strong>syncookiesæ˜¯è¿™ä¹ˆåšçš„ï¼šæœåŠ¡å™¨æ ¹æ®å½“å‰çŠ¶æ€è®¡ç®—å‡ºä¸€ä¸ªå€¼ï¼Œæ”¾åœ¨å·±æ–¹å‘å‡ºçš„SYN+ACKæŠ¥æ–‡ä¸­å‘å‡ºï¼Œå½“å®¢æˆ·ç«¯è¿”å›ACKæŠ¥æ–‡æ—¶ï¼Œå–å‡ºè¯¥å€¼éªŒè¯ï¼Œå¦‚æœåˆæ³•ï¼Œå°±è®¤ä¸ºè¿æ¥å»ºç«‹æˆåŠŸï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/0d/c0/0d963557347c149a6270d8102d83e0c0.png?wh=690*319\" alt=\"\"></p><p>Linuxä¸‹æ€æ ·å¼€å¯syncookiesåŠŸèƒ½å‘¢ï¼Ÿä¿®æ”¹tcp_syncookieså‚æ•°å³å¯ï¼Œå…¶ä¸­å€¼ä¸º0æ—¶è¡¨ç¤ºå…³é—­è¯¥åŠŸèƒ½ï¼Œ2è¡¨ç¤ºæ— æ¡ä»¶å¼€å¯åŠŸèƒ½ï¼Œè€Œ1åˆ™è¡¨ç¤ºä»…å½“SYNåŠè¿æ¥é˜Ÿåˆ—æ”¾ä¸ä¸‹æ—¶ï¼Œå†å¯ç”¨å®ƒã€‚ç”±äºsyncookieä»…ç”¨äºåº”å¯¹SYNæ³›æ´ªæ”»å‡»ï¼ˆæ”»å‡»è€…æ¶æ„æ„é€ å¤§é‡çš„SYNæŠ¥æ–‡å‘é€ç»™æœåŠ¡å™¨ï¼Œé€ æˆSYNåŠè¿æ¥é˜Ÿåˆ—æº¢å‡ºï¼Œå¯¼è‡´æ­£å¸¸å®¢æˆ·ç«¯çš„è¿æ¥æ— æ³•å»ºç«‹ï¼‰ï¼Œè¿™ç§æ–¹å¼å»ºç«‹çš„è¿æ¥ï¼Œè®¸å¤šTCPç‰¹æ€§éƒ½æ— æ³•ä½¿ç”¨ã€‚æ‰€ä»¥ï¼Œåº”å½“æŠŠtcp_syncookiesè®¾ç½®ä¸º1ï¼Œä»…åœ¨é˜Ÿåˆ—æ»¡æ—¶å†å¯ç”¨ã€‚</p><pre><code>net.ipv4.tcp_syncookies = 1\n</code></pre><p>å½“å®¢æˆ·ç«¯æ¥æ”¶åˆ°æœåŠ¡å™¨å‘æ¥çš„SYN+ACKæŠ¥æ–‡åï¼Œå°±ä¼šå›å¤ACKå»é€šçŸ¥æœåŠ¡å™¨ï¼ŒåŒæ—¶å·±æ–¹è¿æ¥çŠ¶æ€ä»SYN_SENTè½¬æ¢ä¸ºESTABLISHEDï¼Œè¡¨ç¤ºè¿æ¥å»ºç«‹æˆåŠŸã€‚æœåŠ¡å™¨ç«¯è¿æ¥æˆåŠŸå»ºç«‹çš„æ—¶é—´è¿˜è¦å†å¾€åï¼Œåˆ°å®ƒæ”¶åˆ°ACKåçŠ¶æ€æ‰å˜ä¸ºESTABLISHEDã€‚</p><p>å¦‚æœæœåŠ¡å™¨æ²¡æœ‰æ”¶åˆ°ACKï¼Œå°±ä¼šä¸€ç›´é‡å‘SYN+ACKæŠ¥æ–‡ã€‚å½“ç½‘ç»œç¹å¿™ã€ä¸ç¨³å®šæ—¶ï¼ŒæŠ¥æ–‡ä¸¢å¤±å°±ä¼šå˜ä¸¥é‡ï¼Œæ­¤æ—¶åº”è¯¥è°ƒå¤§é‡å‘æ¬¡æ•°ã€‚åä¹‹åˆ™å¯ä»¥è°ƒå°é‡å‘æ¬¡æ•°ã€‚<strong>ä¿®æ”¹é‡å‘æ¬¡æ•°çš„æ–¹æ³•æ˜¯ï¼Œè°ƒæ•´tcp_synack_retrieså‚æ•°ï¼š</strong></p><pre><code>net.ipv4.tcp_synack_retries = 5\n</code></pre><p>tcp_synack_retries çš„é»˜è®¤é‡è¯•æ¬¡æ•°æ˜¯5æ¬¡ï¼Œä¸å®¢æˆ·ç«¯é‡å‘SYNç±»ä¼¼ï¼Œå®ƒçš„é‡è¯•ä¼šç»å†1ã€2ã€4ã€8ã€16ç§’ï¼Œæœ€åä¸€æ¬¡é‡è¯•åç­‰å¾…32ç§’ï¼Œè‹¥ä»ç„¶æ²¡æœ‰æ”¶åˆ°ACKï¼Œæ‰ä¼šå…³é—­è¿æ¥ï¼Œæ•…å…±éœ€è¦ç­‰å¾…63ç§’ã€‚</p><p>æœåŠ¡å™¨æ”¶åˆ°ACKåè¿æ¥å»ºç«‹æˆåŠŸï¼Œæ­¤æ—¶ï¼Œå†…æ ¸ä¼šæŠŠè¿æ¥ä»SYNåŠè¿æ¥é˜Ÿåˆ—ä¸­ç§»å‡ºï¼Œå†ç§»å…¥accepté˜Ÿåˆ—ï¼Œç­‰å¾…è¿›ç¨‹è°ƒç”¨acceptå‡½æ•°æ—¶æŠŠè¿æ¥å–å‡ºæ¥ã€‚å¦‚æœè¿›ç¨‹ä¸èƒ½åŠæ—¶åœ°è°ƒç”¨acceptå‡½æ•°ï¼Œå°±ä¼šé€ æˆaccepté˜Ÿåˆ—æº¢å‡ºï¼Œæœ€ç»ˆå¯¼è‡´å»ºç«‹å¥½çš„TCPè¿æ¥è¢«ä¸¢å¼ƒã€‚</p><p>å®é™…ä¸Šï¼Œä¸¢å¼ƒè¿æ¥åªæ˜¯Linuxçš„é»˜è®¤è¡Œä¸ºï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€‰æ‹©å‘å®¢æˆ·ç«¯å‘é€RSTå¤ä½æŠ¥æ–‡ï¼Œå‘Šè¯‰å®¢æˆ·ç«¯è¿æ¥å·²ç»å»ºç«‹å¤±è´¥ã€‚æ‰“å¼€è¿™ä¸€åŠŸèƒ½éœ€è¦å°†tcp_abort_on_overflowå‚æ•°è®¾ç½®ä¸º1ã€‚</p><pre><code>net.ipv4.tcp_abort_on_overflow = 0\n</code></pre><p><strong>é€šå¸¸æƒ…å†µä¸‹ï¼Œåº”å½“æŠŠtcp_abort_on_overflowè®¾ç½®ä¸º0ï¼Œå› ä¸ºè¿™æ ·æ›´æœ‰åˆ©äºåº”å¯¹çªå‘æµé‡ã€‚</strong>ä¸¾ä¸ªä¾‹å­ï¼Œå½“accepté˜Ÿåˆ—æ»¡å¯¼è‡´æœåŠ¡å™¨ä¸¢æ‰äº†ACKï¼Œä¸æ­¤åŒæ—¶ï¼Œå®¢æˆ·ç«¯çš„è¿æ¥çŠ¶æ€å´æ˜¯ESTABLISHEDï¼Œè¿›ç¨‹å°±åœ¨å»ºç«‹å¥½çš„è¿æ¥ä¸Šå‘é€è¯·æ±‚ã€‚åªè¦æœåŠ¡å™¨æ²¡æœ‰ä¸ºè¯·æ±‚å›å¤ACKï¼Œè¯·æ±‚å°±ä¼šè¢«å¤šæ¬¡é‡å‘ã€‚å¦‚æœæœåŠ¡å™¨ä¸Šçš„è¿›ç¨‹åªæ˜¯çŸ­æš‚çš„ç¹å¿™é€ æˆaccepté˜Ÿåˆ—æ»¡ï¼Œé‚£ä¹ˆå½“accepté˜Ÿåˆ—æœ‰ç©ºä½æ—¶ï¼Œå†æ¬¡æ¥æ”¶åˆ°çš„è¯·æ±‚æŠ¥æ–‡ç”±äºå«æœ‰ACKï¼Œä»ç„¶ä¼šè§¦å‘æœåŠ¡å™¨ç«¯æˆåŠŸå»ºç«‹è¿æ¥ã€‚æ‰€ä»¥ï¼Œ<strong>tcp_abort_on_overflowè®¾ä¸º0å¯ä»¥æé«˜è¿æ¥å»ºç«‹çš„æˆåŠŸç‡ï¼Œåªæœ‰ä½ éå¸¸è‚¯å®šaccepté˜Ÿåˆ—ä¼šé•¿æœŸæº¢å‡ºæ—¶ï¼Œæ‰èƒ½è®¾ç½®ä¸º1ä»¥å°½å¿«é€šçŸ¥å®¢æˆ·ç«¯ã€‚</strong></p><p>é‚£ä¹ˆï¼Œæ€æ ·è°ƒæ•´accepté˜Ÿåˆ—çš„é•¿åº¦å‘¢ï¼Ÿ<strong>listenå‡½æ•°çš„backlogå‚æ•°å°±å¯ä»¥è®¾ç½®accepté˜Ÿåˆ—çš„å¤§å°ã€‚äº‹å®ä¸Šï¼Œbacklogå‚æ•°è¿˜å—é™äºLinuxç³»ç»Ÿçº§çš„é˜Ÿåˆ—é•¿åº¦ä¸Šé™ï¼Œå½“ç„¶è¿™ä¸ªä¸Šé™é˜ˆå€¼ä¹Ÿå¯ä»¥é€šè¿‡somaxconnå‚æ•°ä¿®æ”¹ã€‚</strong></p><pre><code>net.core.somaxconn = 128\n</code></pre><p>å½“ä¸‹å„ç›‘å¬ç«¯å£ä¸Šçš„accepté˜Ÿåˆ—é•¿åº¦å¯ä»¥é€šè¿‡ss -ltnå‘½ä»¤æŸ¥çœ‹ï¼Œä½†accepté˜Ÿåˆ—é•¿åº¦æ˜¯å¦éœ€è¦è°ƒæ•´è¯¥æ€ä¹ˆåˆ¤æ–­å‘¢ï¼Ÿè¿˜æ˜¯é€šè¿‡netstat -så‘½ä»¤ç»™å‡ºçš„ç»Ÿè®¡ç»“æœï¼Œå¯ä»¥çœ‹åˆ°ç©¶ç«Ÿæœ‰å¤šå°‘ä¸ªè¿æ¥å› ä¸ºé˜Ÿåˆ—æº¢å‡ºè€Œè¢«ä¸¢å¼ƒã€‚</p><pre><code># netstat -s | grep &quot;listen queue&quot;\n    14 times the listen queue of a socket overflowed\n</code></pre><p>å¦‚æœæŒç»­ä¸æ–­åœ°æœ‰è¿æ¥å› ä¸ºaccepté˜Ÿåˆ—æº¢å‡ºè¢«ä¸¢å¼ƒï¼Œå°±åº”è¯¥è°ƒå¤§backlogä»¥åŠsomaxconnå‚æ•°ã€‚</p><h2>TFOæŠ€æœ¯å¦‚ä½•ç»•è¿‡ä¸‰æ¬¡æ¡æ‰‹ï¼Ÿ</h2><p>ä»¥ä¸Šæˆ‘ä»¬åªæ˜¯åœ¨å¯¹ä¸‰æ¬¡æ¡æ‰‹çš„è¿‡ç¨‹è¿›è¡Œä¼˜åŒ–ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•ç»•è¿‡ä¸‰æ¬¡æ¡æ‰‹å‘é€æ•°æ®ã€‚</p><p>ä¸‰æ¬¡æ¡æ‰‹å»ºç«‹è¿æ¥é€ æˆçš„åæœå°±æ˜¯ï¼ŒHTTPè¯·æ±‚å¿…é¡»åœ¨ä¸€æ¬¡RTTï¼ˆRound Trip Timeï¼Œä»å®¢æˆ·ç«¯åˆ°æœåŠ¡å™¨ä¸€ä¸ªå¾€è¿”çš„æ—¶é—´ï¼‰åæ‰èƒ½å‘é€ï¼ŒGoogleå¯¹æ­¤åšçš„ç»Ÿè®¡æ˜¾ç¤ºï¼Œä¸‰æ¬¡æ¡æ‰‹æ¶ˆè€—çš„æ—¶é—´ï¼Œåœ¨HTTPè¯·æ±‚å®Œæˆçš„æ—¶é—´å æ¯”åœ¨10%åˆ°30%ä¹‹é—´ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/1b/a8/1b9d8f49d5a716470481657b07ae77a8.png?wh=1090*779\" alt=\"\"></p><p>å› æ­¤ï¼ŒGoogleæå‡ºäº†TCP fast openæ–¹æ¡ˆï¼ˆç®€ç§°<a href=\"https://tools.ietf.org/html/rfc7413\">TFO</a>ï¼‰ï¼Œå®¢æˆ·ç«¯å¯ä»¥åœ¨é¦–ä¸ªSYNæŠ¥æ–‡ä¸­å°±æºå¸¦è¯·æ±‚ï¼Œè¿™èŠ‚çœäº†1ä¸ªRTTçš„æ—¶é—´ã€‚</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥çœ‹çœ‹ï¼ŒTFOå…·ä½“æ˜¯æ€ä¹ˆå®ç°çš„ã€‚</p><p><strong>ä¸ºäº†è®©å®¢æˆ·ç«¯åœ¨SYNæŠ¥æ–‡ä¸­æºå¸¦è¯·æ±‚æ•°æ®ï¼Œå¿…é¡»è§£å†³æœåŠ¡å™¨çš„ä¿¡ä»»é—®é¢˜ã€‚</strong>å› ä¸ºæ­¤æ—¶æœåŠ¡å™¨çš„SYNæŠ¥æ–‡è¿˜æ²¡æœ‰å‘ç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯æ˜¯å¦èƒ½å¤Ÿæ­£å¸¸å»ºç«‹è¿æ¥è¿˜æœªå¯çŸ¥ï¼Œä½†æ­¤æ—¶æœåŠ¡å™¨éœ€è¦å‡å®šè¿æ¥å·²ç»å»ºç«‹æˆåŠŸï¼Œå¹¶æŠŠè¯·æ±‚äº¤ä»˜ç»™è¿›ç¨‹å»å¤„ç†ï¼Œæ‰€ä»¥æœåŠ¡å™¨å¿…é¡»èƒ½å¤Ÿä¿¡ä»»è¿™ä¸ªå®¢æˆ·ç«¯ã€‚</p><p>TFOåˆ°åº•æ€æ ·è¾¾æˆè¿™ä¸€ç›®çš„å‘¢ï¼Ÿå®ƒæŠŠé€šè®¯åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼Œç¬¬ä¸€é˜¶æ®µä¸ºé¦–æ¬¡å»ºç«‹è¿æ¥ï¼Œè¿™æ—¶èµ°æ­£å¸¸çš„ä¸‰æ¬¡æ¡æ‰‹ï¼Œä½†åœ¨å®¢æˆ·ç«¯çš„SYNæŠ¥æ–‡ä¼šæ˜ç¡®åœ°å‘Šè¯‰æœåŠ¡å™¨å®ƒæƒ³ä½¿ç”¨TFOåŠŸèƒ½ï¼Œè¿™æ ·æœåŠ¡å™¨ä¼šæŠŠå®¢æˆ·ç«¯IPåœ°å€ç”¨åªæœ‰è‡ªå·±çŸ¥é“çš„å¯†é’¥åŠ å¯†ï¼ˆæ¯”å¦‚AESåŠ å¯†ç®—æ³•ï¼‰ï¼Œä½œä¸ºCookieæºå¸¦åœ¨è¿”å›çš„SYN+ACKæŠ¥æ–‡ä¸­ï¼Œå®¢æˆ·ç«¯æ”¶åˆ°åä¼šå°†Cookieç¼“å­˜åœ¨æœ¬åœ°ã€‚</p><p>ä¹‹åï¼Œå¦‚æœå®¢æˆ·ç«¯å†æ¬¡å‘æœåŠ¡å™¨å»ºç«‹è¿æ¥ï¼Œå°±å¯ä»¥åœ¨ç¬¬ä¸€ä¸ªSYNæŠ¥æ–‡ä¸­æºå¸¦è¯·æ±‚æ•°æ®ï¼ŒåŒæ—¶è¿˜è¦é™„å¸¦ç¼“å­˜çš„Cookieã€‚å¾ˆæ˜¾ç„¶ï¼Œè¿™ç§é€šè®¯æ–¹å¼ä¸‹ä¸èƒ½å†é‡‡ç”¨ç»å…¸çš„â€œå…ˆconnectå†writeè¯·æ±‚â€è¿™ç§ç¼–ç¨‹æ–¹æ³•ï¼Œè€Œè¦æ”¹ç”¨sendtoæˆ–è€…sendmsgå‡½æ•°æ‰èƒ½å®ç°ã€‚</p><p>æœåŠ¡å™¨æ”¶åˆ°åï¼Œä¼šç”¨è‡ªå·±çš„å¯†é’¥éªŒè¯Cookieæ˜¯å¦åˆæ³•ï¼ŒéªŒè¯é€šè¿‡åè¿æ¥æ‰ç®—å»ºç«‹æˆåŠŸï¼Œå†æŠŠè¯·æ±‚äº¤ç»™è¿›ç¨‹å¤„ç†ï¼ŒåŒæ—¶ç»™å®¢æˆ·ç«¯è¿”å›SYN+ACKã€‚è™½ç„¶å®¢æˆ·ç«¯æ”¶åˆ°åè¿˜ä¼šè¿”å›ACKï¼Œä½†æœåŠ¡å™¨ä¸ç­‰æ”¶åˆ°ACKå°±å¯ä»¥å‘é€HTTPå“åº”äº†ï¼Œè¿™å°±å‡å°‘äº†æ¡æ‰‹å¸¦æ¥çš„1ä¸ªRTTçš„æ—¶é—´æ¶ˆè€—ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/7a/c3/7ac29766ba8515eea5bb331fce6dc2c3.png?wh=961*806\" alt=\"\"></p><p>å½“ç„¶ï¼Œä¸ºäº†é˜²æ­¢SYNæ³›æ´ªæ”»å‡»ï¼ŒæœåŠ¡å™¨çš„TFOå®ç°å¿…é¡»èƒ½å¤Ÿè‡ªåŠ¨åŒ–åœ°å®šæ—¶æ›´æ–°å¯†é’¥ã€‚</p><p>Linuxä¸‹æ€ä¹ˆæ‰“å¼€TFOåŠŸèƒ½å‘¢ï¼Ÿè¿™è¦é€šè¿‡tcp_fastopenå‚æ•°ã€‚ç”±äºåªæœ‰å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨åŒæ—¶æ”¯æŒæ—¶ï¼ŒTFOåŠŸèƒ½æ‰èƒ½ä½¿ç”¨ï¼Œ<strong>æ‰€ä»¥tcp_fastopenå‚æ•°æ˜¯æŒ‰æ¯”ç‰¹ä½æ§åˆ¶çš„ã€‚å…¶ä¸­ï¼Œç¬¬1ä¸ªæ¯”ç‰¹ä½ä¸º1æ—¶ï¼Œè¡¨ç¤ºä½œä¸ºå®¢æˆ·ç«¯æ—¶æ”¯æŒTFOï¼›ç¬¬2ä¸ªæ¯”ç‰¹ä½ä¸º1æ—¶ï¼Œè¡¨ç¤ºä½œä¸ºæœåŠ¡å™¨æ—¶æ”¯æŒTFO</strong>ï¼Œæ‰€ä»¥å½“tcp_fastopençš„å€¼ä¸º3æ—¶ï¼ˆæ¯”ç‰¹ä¸º0x11ï¼‰å°±è¡¨ç¤ºå®Œå…¨æ”¯æŒTFOåŠŸèƒ½ã€‚</p><pre><code>net.ipv4.tcp_fastopen = 3\n</code></pre><h2>å°ç»“</h2><p>è¿™ä¸€è®²ï¼Œæˆ‘ä»¬æ²¿ç€ä¸‰æ¬¡æ¡æ‰‹çš„æµç¨‹ï¼Œä»‹ç»äº†Linuxç³»ç»Ÿçš„ä¼˜åŒ–æ–¹æ³•ã€‚</p><p>å½“å®¢æˆ·ç«¯é€šè¿‡å‘é€SYNå‘èµ·æ¡æ‰‹æ—¶ï¼Œå¯ä»¥é€šè¿‡tcp_syn_retriesæ§åˆ¶é‡å‘æ¬¡æ•°ã€‚å½“æœåŠ¡å™¨çš„SYNåŠè¿æ¥é˜Ÿåˆ—æº¢å‡ºåï¼ŒSYNæŠ¥æ–‡ä¼šä¸¢å¤±ä»è€Œå¯¼è‡´è¿æ¥å»ºç«‹å¤±è´¥ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡netstat -sç»™å‡ºçš„ç»Ÿè®¡ç»“æœåˆ¤æ–­é˜Ÿåˆ—é•¿åº¦æ˜¯å¦åˆé€‚ï¼Œè¿›è€Œé€šè¿‡tcp_max_syn_backlogå‚æ•°è°ƒæ•´é˜Ÿåˆ—çš„é•¿åº¦ã€‚æœåŠ¡å™¨å›å¤SYN+ACKæŠ¥æ–‡çš„é‡è¯•æ¬¡æ•°ç”±tcp_synack_retrieså‚æ•°æ§åˆ¶ï¼Œç½‘ç»œç¨³å®šæ—¶å¯ä»¥è°ƒå°å®ƒã€‚ä¸ºäº†åº”å¯¹SYNæ³›æ´ªæ”»å‡»ï¼Œåº”å°†tcp_syncookieså‚æ•°è®¾ç½®ä¸º1ï¼Œå®ƒä»…åœ¨SYNé˜Ÿåˆ—æ»¡åå¼€å¯syncookieåŠŸèƒ½ï¼Œä¿è¯è¿æ¥æˆåŠŸå»ºç«‹ã€‚</p><p>æœåŠ¡å™¨æ”¶åˆ°å®¢æˆ·ç«¯è¿”å›çš„ACKåï¼Œä¼šæŠŠè¿æ¥ç§»å…¥accepté˜Ÿåˆ—ï¼Œç­‰å¾…è¿›ç¨‹è°ƒç”¨acceptå‡½æ•°å–å‡ºè¿æ¥ã€‚å¦‚æœaccepté˜Ÿåˆ—æº¢å‡ºï¼Œé»˜è®¤ç³»ç»Ÿä¼šä¸¢å¼ƒACKï¼Œä¹Ÿå¯ä»¥é€šè¿‡tcp_abort_on_overflowå‚æ•°ç”¨RSTé€šçŸ¥å®¢æˆ·ç«¯è¿æ¥å»ºç«‹å¤±è´¥ã€‚å¦‚æœnetstatç»Ÿè®¡ä¿¡æ¯æ˜¾ç¤ºï¼Œå¤§é‡çš„ACKè¢«ä¸¢å¼ƒåï¼Œå¯ä»¥é€šè¿‡listenå‡½æ•°çš„backlogå‚æ•°å’Œsomaxconnç³»ç»Ÿå‚æ•°æé«˜é˜Ÿåˆ—ä¸Šé™ã€‚</p><p>TFOæŠ€æœ¯ç»•è¿‡ä¸‰æ¬¡æ¡æ‰‹ï¼Œä½¿å¾—HTTPè¯·æ±‚å‡å°‘äº†1ä¸ªRTTçš„æ—¶é—´ã€‚Linuxä¸‹å¯ä»¥é€šè¿‡tcp_fastopenå‚æ•°å¼€å¯è¯¥åŠŸèƒ½ã€‚</p><p>ä»è¿™ä¸€è®²å¯ä»¥çœ‹å‡ºï¼Œè™½ç„¶TCPæ˜¯ç”±æ“ä½œç³»ç»Ÿå®ç°çš„ï¼Œä½†Linuxé€šè¿‡å¤šç§æ–¹å¼æä¾›äº†ä¿®æ”¹TCPåŠŸèƒ½çš„æ¥å£ï¼Œä¾›æˆ‘ä»¬ä¼˜åŒ–TCPçš„æ€§èƒ½ã€‚ä¸‹ä¸€è®²æˆ‘ä»¬å†æ¥æ¢è®¨å››æ¬¡æ¡æ‰‹å…³é—­è¿æ¥æ—¶ï¼ŒLinuxæ€æ ·å¸®åŠ©æˆ‘ä»¬ä¼˜åŒ–å…¶æ€§èƒ½ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>æœ€åï¼Œç•™ç»™ä½ ä¸€ä¸ªæ€è€ƒé¢˜ï¼Œå…³äºä¸‰æ¬¡æ¡æ‰‹å»ºç«‹è¿æ¥ï¼Œä½ åšè¿‡å“ªäº›ä¼˜åŒ–ï¼Ÿæ•ˆæœå¦‚ä½•ï¼Ÿæ¬¢è¿ä½ åœ¨ç•™è¨€åŒºä¸å¤§å®¶ä¸€èµ·æ¢è®¨ã€‚</p><p>æ„Ÿè°¢é˜…è¯»ï¼Œå¦‚æœä½ è§‰å¾—è¿™èŠ‚è¯¾å¯¹ä½ æœ‰ä¸€äº›å¯å‘ï¼Œä¹Ÿæ¬¢è¿æŠŠå®ƒåˆ†äº«ç»™ä½ çš„æœ‹å‹ã€‚</p>","neighbors":{"left":{"article_title":"08 | äº‹ä»¶é©±åŠ¨ï¼šC10Mæ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ","id":236921},"right":{"article_title":"10 | å¦‚ä½•æå‡TCPå››æ¬¡æŒ¥æ‰‹çš„æ€§èƒ½ï¼Ÿ","id":238388}},"comments":[{"had_liked":false,"id":224099,"user_name":"Geek_1386e9","can_delete":false,"product_type":"c1","uid":1584198,"ip_address":"","ucode":"DCD2234365F6C7","user_header":"","comment_is_top":false,"comment_ctime":1591275242,"is_pvip":false,"replies":[{"id":"90795","content":"è°¢è°¢Geek_1386e9åŒå­¦çš„å®è·µåˆ†äº«ï¼<br>ä¸€èˆ¬å¯ä»¥é€šè¿‡netstatä»ä¸¢åŒ…ä¸Šæ£€æµ‹å‡ºï¼Œå¤§æµé‡ä¸‹åœ¨ç”Ÿäº§ç¯å¢ƒä¸ŠæŠ“åŒ…ä¸æ˜“ã€‚","user_name":"ä½œè€…å›å¤","comment_id":224099,"uid":"1283912","ip_address":"","utype":1,"ctime":1599643329,"user_name_real":"é™¶è¾‰"}],"discussion_count":2,"race_medal":0,"score":"229224541930","product_id":100051201,"comment_content":"æˆ‘åœ¨ç”Ÿäº§ç³»ç»Ÿä¸­ç¡®å®é‡åˆ°äº†accepté˜Ÿåˆ—æº¢å‡ºå¯¼è‡´çš„è¯·æ±‚è¶…æ—¶é—®é¢˜ï¼Œè¿™ç§é—®é¢˜ç¡®å®ä¸å®¹æ˜“è¢«å‘ç°ï¼ŒæœåŠ¡å™¨cpuã€å†…å­˜ã€è¿æ¥æ•°ç›‘æ§æŒ‡æ ‡éƒ½æ­£å¸¸ï¼Œåªæ˜¯ç£ç›˜è¯»å†™æ—¶é—´å¶å°”ä¼šåé«˜ï¼Œå½“æ—¶ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘æ­å»ºäº†ä¸€ä¸ªæµ‹è¯•ç¯å¢ƒï¼Œå®¢æˆ·ç«¯ç”¨wrkå‘èµ·è¯·æ±‚ï¼ŒæœåŠ¡ç«¯ç”¨ddæ¨¡æ‹Ÿç£ç›˜å¤§é‡è¯»å†™å¯¼è‡´ioå“åº”æ…¢ã€‚å¹¶ç”¨blktrace+fioåˆ†æioï¼ŒåŒæ—¶ä¸¤è¾¹ç”¨tcpdumpæŠ“åŒ…ï¼Œé€šè¿‡æŠ“åŒ…æ•°æ®å‘ç°æœåŠ¡ç«¯å¿½ç•¥äº†ç¬¬ä¸‰æ¬¡æ¡æ‰‹å®¢æˆ·ç«¯å‘æ¥çš„ackï¼ˆtcp_abort_on_overflow=0ï¼‰ï¼Œåˆé‡å‘äº†ç¬¬äºŒæ¬¡æ¡æ‰‹çš„syn+ackçš„åŒ…ï¼Œå“åº”è¶…è¿‡äº†å®¢æˆ·ç«¯çš„è¶…æ—¶æ—¶é—´è®¾ç½®ï¼Œgoogleåæ‰çŸ¥é“äº†æ˜¯å› ä¸ºaccepté˜Ÿåˆ—æº¢å‡ºçš„é—®é¢˜ï¼Œç»“è®ºå°±æ˜¯æˆ‘ä»¬ä½¿ç”¨çš„å…¬æœ‰äº‘è™šæ‹Ÿæœºå› ä¸ºåŒå®¿ä¸»æœºä¸Šå…¶ä»–å®¢æˆ·çš„è™šæ‹Ÿæœºioå¤§å¯¼è‡´æˆ‘ä»¬çš„è™šæ‹Ÿæœºç£ç›˜è¯»å†™æ—¶é—´é•¿ï¼Œåº”ç”¨ç¨‹åºå¤„ç†æ…¢ï¼Œæ²¡èƒ½åŠæ—¶ä»accepté˜Ÿåˆ—é‡Œæ‹¿è¿æ¥å¤„ç†ï¼Œå¯¼è‡´accepté˜Ÿåˆ—æº¢å‡ºï¼Œè°ƒå¤§accepté˜Ÿåˆ—åªèƒ½ç¼“è§£æº¢å‡ºæƒ…å†µï¼Œæå‡ç¨‹åºå¤„ç†é€Ÿåº¦æ‰èƒ½æ ¹æœ¬è§£å†³ï¼Œåé¢æˆ‘ä»¬ç”³è¯·äº†ç‹¬äº«çš„è™šæ‹Ÿæœºï¼Œå¹¶ä¸”æ¢æˆäº†å…±äº«ssdç£ç›˜ï¼Œå¹¶æŠŠioè°ƒåº¦ç®—æ³•æ”¹æˆäº†noopï¼Œé—®é¢˜å®Œç¾è§£å†³ï¼Œæ€§èƒ½æ æ æ»´","like_count":54,"discussions":[{"author":{"id":1283912,"avatar":"https://static001.geekbang.org/account/avatar/00/13/97/48/550271b0.jpg","nickname":"é™¶è¾‰","note":"","ucode":"F81A9087435953","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497363,"discussion_content":"è°¢è°¢Geek_1386e9åŒå­¦çš„å®è·µåˆ†äº«ï¼\nä¸€èˆ¬å¯ä»¥é€šè¿‡netstatä»ä¸¢åŒ…ä¸Šæ£€æµ‹å‡ºï¼Œå¤§æµé‡ä¸‹åœ¨ç”Ÿäº§ç¯å¢ƒä¸ŠæŠ“åŒ…ä¸æ˜“ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599643329,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1476323,"avatar":"https://static001.geekbang.org/account/avatar/00/16/86/e3/a31f6869.jpg","nickname":"î‡ å°¿å¸ƒ","note":"","ucode":"D1C8BDA7540962","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":326155,"discussion_content":"ioè°ƒåº¦ç®—æ³•æ”¹æˆäº†noopï¼Œnoopå¯ä»¥ä»‹ç»ä¸€ä¸‹å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605533640,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":219295,"user_name":"å¿†æ°´å¯’","can_delete":false,"product_type":"c1","uid":1147453,"ip_address":"","ucode":"E3F86BD8AA8903","user_header":"https://static001.geekbang.org/account/avatar/00/11/82/3d/356fc3d6.jpg","comment_is_top":false,"comment_ctime":1589985043,"is_pvip":false,"replies":[{"id":"81047","content":"è°¢è°¢å¿†æ°´å¯’çš„è¡¥å……ï¼","user_name":"ä½œè€…å›å¤","comment_id":219295,"uid":"1283912","ip_address":"","utype":1,"ctime":1590026257,"user_name_real":"é™¶è¾‰"}],"discussion_count":2,"race_medal":0,"score":"78899396371","product_id":100051201,"comment_content":"æœ¬æ–‡çš„å¹²è´§æ»¡æ»¡çš„ï¼Œè™½ç„¶éƒ½ç†Ÿæ‚‰ï¼Œä½†æ˜¯æ²¡æœ‰è¿™ä¹ˆåº•å±‚çš„ä¼˜åŒ–è¿‡ã€‚<br>å½“ç½‘ç»œä¸¢åŒ…ä¸¥é‡çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨å¿«é€Ÿé‡ä¼ æœºåˆ¶ã€‚é‡ä¼ æ—¶é—´é—´éš”æ˜¯æŒ‡æ•°çº§é€€é¿ï¼Œç›´åˆ°è¾¾åˆ° 120s ä¸ºæ­¢ï¼Œæ€»æ—¶é—´å°†è¿‘ 15 åˆ†é’Ÿï¼Œé‡ä¼ æ¬¡æ•°é»˜è®¤æ˜¯ 15æ¬¡ ï¼Œé‡ä¼ æ¬¡æ•°é»˜è®¤å€¼ç”± &#47;proc&#47;sys&#47;net&#47;ipv4&#47;tcp_retries2 å†³å®šã€‚","like_count":18,"discussions":[{"author":{"id":1283912,"avatar":"https://static001.geekbang.org/account/avatar/00/13/97/48/550271b0.jpg","nickname":"é™¶è¾‰","note":"","ucode":"F81A9087435953","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":495752,"discussion_content":"è°¢è°¢å¿†æ°´å¯’çš„è¡¥å……ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590026257,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1868263,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ1bf1wUGI2KsHwswRMgxZr1ibNyRZnrNk2PI3G2zVRmp6vsWN7kbZnAtQk1TXkkNfRrbjnhow606A/132","nickname":"æ–½ç•Œ","note":"","ucode":"9BF5104871C75F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":570722,"discussion_content":"è¡¥å……ï¼šä¿®æ”¹ net.ipv4.tcp_retries2 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651892566,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":218531,"user_name":"Geek_007","can_delete":false,"product_type":"c1","uid":1467182,"ip_address":"","ucode":"C80107538EAA7F","user_header":"https://static001.geekbang.org/account/avatar/00/16/63/2e/e49116d1.jpg","comment_is_top":false,"comment_ctime":1589814507,"is_pvip":false,"replies":[{"id":"80911","content":"æ˜¯çš„ï¼Œä¸åªç½‘ç»œè®¾å¤‡ï¼Œä¸€äº›ä»£ç†æœåŠ¡å™¨ä¸ºäº†å‡è½»è‡ªå·±çš„è´Ÿæ‹…ï¼Œä¹Ÿä¼šæŠŠé•¿è¿æ¥æ–­æ‰ï¼Œæ¯”å¦‚Nginxé»˜è®¤å…³é—­75ç§’æ²¡æœ‰æ•°æ®äº¤äº’çš„keep alive é•¿è¿æ¥","user_name":"ä½œè€…å›å¤","comment_id":218531,"uid":"1283912","ip_address":"","utype":1,"ctime":1589935347,"user_name_real":"é™¶è¾‰"}],"discussion_count":1,"race_medal":0,"score":"66014323947","product_id":100051201,"comment_content":"çœ‹è¯„è®ºåŒºï¼Œå¾ˆå¤šåŒå­¦éƒ½è¯´æ˜¯é•¿è¿æ¥ï¼Œæ™®é€šçš„http keepalive ä¼šä¸ä¼šæœ‰å‘ï¼Œä¸‰å¤§è¿è¥å•†æˆ–è€…ä¸­é—´ç½‘ç»œè®¾å¤‡éƒ½ä¼šå°†è¶…è¿‡ä¸€å®šæ—¶é—´çš„é“¾æ¥dropæ‰ã€‚å¦‚æœæ²¡æœ‰h2è¿™ç§pingä¿æ´»çš„æœºåˆ¶ï¼Œæœ‰å¯èƒ½å®¢æˆ·ç«¯è«åå…¶å¦™é•¿é“¾æ¥è¢«dropæ‰ï¼Œå®¢æˆ·ç«¯åªèƒ½ä¾èµ–è¶…æ—¶æ¥æ„ŸçŸ¥å¼‚å¸¸ï¼Œåå€’æ˜¯å½±å“æ€§èƒ½äº†ã€‚","like_count":15,"discussions":[{"author":{"id":1283912,"avatar":"https://static001.geekbang.org/account/avatar/00/13/97/48/550271b0.jpg","nickname":"é™¶è¾‰","note":"","ucode":"F81A9087435953","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":495504,"discussion_content":"æ˜¯çš„ï¼Œä¸åªç½‘ç»œè®¾å¤‡ï¼Œä¸€äº›ä»£ç†æœåŠ¡å™¨ä¸ºäº†å‡è½»è‡ªå·±çš„è´Ÿæ‹…ï¼Œä¹Ÿä¼šæŠŠé•¿è¿æ¥æ–­æ‰ï¼Œæ¯”å¦‚Nginxé»˜è®¤å…³é—­75ç§’æ²¡æœ‰æ•°æ®äº¤äº’çš„keep alive é•¿è¿æ¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589935347,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":219831,"user_name":"Jesson","can_delete":false,"product_type":"c1","uid":1212313,"ip_address":"","ucode":"EBADA87D9E5AE6","user_header":"https://static001.geekbang.org/account/avatar/00/12/7f/99/6a92ff95.jpg","comment_is_top":false,"comment_ctime":1590108616,"is_pvip":true,"replies":[{"id":"81197","content":"ä½ å¥½Tango281ï¼ŒéTFOåœºæ™¯ä¸‹ï¼Œä½ å¤§å¯å…ˆè°ƒç”¨connectå‡½æ•°ï¼Œåœ¨è¿™é‡Œä¼ é€’æœåŠ¡å™¨åœ°å€ï¼Œå†è°ƒç”¨sendå‡½æ•°å‘é€è¯·æ±‚ï¼Œä½†åœ¨TFOåœºæ™¯ä¸‹ï¼Œæ˜¯ä¸èƒ½è°ƒç”¨connectå‡½æ•°çš„ï¼Œå¦åˆ™å°±å›å½’æ­£å¸¸çš„ä¸‰æ¬¡æ¡æ‰‹äº†ï¼Œæ‰€ä»¥è¦ä½¿ç”¨sendtoç­‰å‡½æ•°ã€‚","user_name":"ä½œè€…å›å¤","comment_id":219831,"uid":"1283912","ip_address":"","utype":1,"ctime":1590131385,"user_name_real":"é™¶è¾‰"}],"discussion_count":3,"race_medal":0,"score":"44539781576","product_id":100051201,"comment_content":"è€å¸ˆï¼ŒTFOç¼–ç¨‹çš„æ—¶å€™ï¼Œä¸ºä»€ä¹ˆè¦æ”¹ä¸ºsendtoæˆ–è€…sendmsgå•Šï¼Ÿ è¿™ä¸ªåœ°æ–¹åŸç†ä¸å¤ªæ‡‚ã€‚","like_count":11,"discussions":[{"author":{"id":1283912,"avatar":"https://static001.geekbang.org/account/avatar/00/13/97/48/550271b0.jpg","nickname":"é™¶è¾‰","note":"","ucode":"F81A9087435953","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":495954,"discussion_content":"ä½ å¥½Tango281ï¼ŒéTFOåœºæ™¯ä¸‹ï¼Œä½ å¤§å¯å…ˆè°ƒç”¨connectå‡½æ•°ï¼Œåœ¨è¿™é‡Œä¼ é€’æœåŠ¡å™¨åœ°å€ï¼Œå†è°ƒç”¨sendå‡½æ•°å‘é€è¯·æ±‚ï¼Œä½†åœ¨TFOåœºæ™¯ä¸‹ï¼Œæ˜¯ä¸èƒ½è°ƒç”¨connectå‡½æ•°çš„ï¼Œå¦åˆ™å°±å›å½’æ­£å¸¸çš„ä¸‰æ¬¡æ¡æ‰‹äº†ï¼Œæ‰€ä»¥è¦ä½¿ç”¨sendtoç­‰å‡½æ•°ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590131385,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1068361,"avatar":"https://static001.geekbang.org/account/avatar/00/10/4d/49/28e73b9c.jpg","nickname":"æ˜ç¿¼","note":"","ucode":"E77F86BEB3D5C1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":364953,"discussion_content":"æ˜¯ä¸æ˜¯ç¬¬ä¸€æ¬¡è¿˜æ˜¯è¦è°ƒç”¨connect ï¼Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617671211,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1005391,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","nickname":"ä¸€æ­¥","note":"","ucode":"73CEA468CE70C3","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":276608,"discussion_content":"sendto æˆ–è€… sendmsg å°±æ˜¯ä¸è¿›è¡Œä¸‰æ¬¡æ¡æ‰‹äº†ï¼Œç›´æ¥æºå¸¦ cookie å‘é€ä¿¡æ¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590912936,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":218342,"user_name":"å‡‰äººã€‚","can_delete":false,"product_type":"c1","uid":1659177,"ip_address":"","ucode":"4DB16004A62015","user_header":"https://static001.geekbang.org/account/avatar/00/19/51/29/24739c58.jpg","comment_is_top":false,"comment_ctime":1589784318,"is_pvip":false,"replies":[{"id":"90924","content":"è°¢è°¢å‡‰äººçš„åˆ†äº«","user_name":"ä½œè€…å›å¤","comment_id":218342,"uid":"1283912","ip_address":"","utype":1,"ctime":1599786392,"user_name_real":"é™¶è¾‰"}],"discussion_count":1,"race_medal":0,"score":"44539457278","product_id":100051201,"comment_content":"åšè¿‡ä¼˜åŒ–ï¼Œé•¿è¿æ¥ï¼Œ å‡å°‘time_waitæ—¶é•¿ï¼Œå¤ç”¨time_waitè¿æ¥","like_count":10,"discussions":[{"author":{"id":1283912,"avatar":"https://static001.geekbang.org/account/avatar/00/13/97/48/550271b0.jpg","nickname":"é™¶è¾‰","note":"","ucode":"F81A9087435953","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":495439,"discussion_content":"è°¢è°¢å‡‰äººçš„åˆ†äº«","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599786392,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":230208,"user_name":"J.Smile","can_delete":false,"product_type":"c1","uid":1336475,"ip_address":"","ucode":"C4D98DFDBF7584","user_header":"https://static001.geekbang.org/account/avatar/00/14/64/9b/0b578b08.jpg","comment_is_top":false,"comment_ctime":1593312143,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"31658083215","product_id":100051201,"comment_content":"çœ‹æ¥è¦åšä¸€ä¸ªèƒ½æ‰¿å—é«˜å¹¶å‘çš„æœåŠ¡ç«¯ï¼Œä»å‰åˆ°åå„ä¸ªèŠ‚ç‚¹éƒ½è¦åšå…³æ³¨å’Œä¼˜åŒ–ï¼šsynåŠè¿æ¥é˜Ÿåˆ—---&gt;accepté˜Ÿåˆ—----&gt;åº”ç”¨ç¨‹åºè¿æ¥è·å–é€Ÿåº¦ï¼ˆepollå¼‚æ­¥ç¼–ç¨‹ï¼‰---&gt;åº”ç”¨ç¨‹åºè·å–è¿æ¥åçš„ä¸šåŠ¡å¤„ç†é€Ÿåº¦ï¼ˆéé˜»å¡ï¼‰ã€‚","like_count":7},{"had_liked":false,"id":218414,"user_name":"Geek_007","can_delete":false,"product_type":"c1","uid":1467182,"ip_address":"","ucode":"C80107538EAA7F","user_header":"https://static001.geekbang.org/account/avatar/00/16/63/2e/e49116d1.jpg","comment_is_top":false,"comment_ctime":1589799485,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"27359603261","product_id":100051201,"comment_content":"è€å¸ˆï¼Œä»Šå¤©çš„å†…å®¹å¾ˆå¤šåªé€‚ç”¨äºå†…ç½‘é€šä¿¡æˆ–è€…æœåŠ¡ç«¯å•è¾¹ä¼˜åŒ–å§ã€‚ç”Ÿäº§åœºæ™¯ï¼Œå®¢æˆ·ç«¯ç»å¸¸æ˜¯æ‰‹æœºæˆ–è€…PC.æ— æ³•ä¿®æ”¹å®¢æˆ·ç«¯å†…æ ¸å‚æ•°ã€‚å¦å¤–TFOé€‚ç”¨äºå…¬ç½‘ä¹ˆï¼Ÿè¿è¥å•†æˆ–è€…ç§»åŠ¨ç«¯ä¼šä¸ä¼šå¯¹TFOä¸æ”¯æŒã€‚(éš¾é“éå¾—QUICæ‰èƒ½ä¼˜åŒ–å®¢æˆ·ç«¯çš„ç½‘ç»œè¿æ¥å—)ğŸ˜€","like_count":6,"discussions":[{"author":{"id":1120761,"avatar":"https://static001.geekbang.org/account/avatar/00/11/19/f9/62ae32d7.jpg","nickname":"Ken","note":"","ucode":"9F829156E855C8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":272152,"discussion_content":"ç»´åŸºå‘Šè¯‰æˆ‘ä»¬ï¼Œandroidå’Œioså‡å·²æ”¯æŒ\nhttps://zh.wikipedia.org/wiki/TCP%E5%BF%AB%E9%80%9F%E6%89%93%E5%BC%80","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1590247966,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":218279,"user_name":"é‚£æ—¶åˆ»","can_delete":false,"product_type":"c1","uid":1150927,"ip_address":"","ucode":"B0D150856C3A4A","user_header":"https://static001.geekbang.org/account/avatar/00/11/8f/cf/890f82d6.jpg","comment_is_top":false,"comment_ctime":1589770995,"is_pvip":false,"replies":[{"id":"80744","content":"http&#47;1.1é‡Œçš„keepaliveåŠŸèƒ½æ˜¯ä¸ªå¾ˆå¥½ç”¨çš„ä¼˜åŒ–ç‚¹^_^","user_name":"ä½œè€…å›å¤","comment_id":218279,"uid":"1283912","ip_address":"","utype":1,"ctime":1589782871,"user_name_real":"é™¶è¾‰"}],"discussion_count":2,"race_medal":0,"score":"27359574771","product_id":100051201,"comment_content":"ä½¿ç”¨httpçš„æ—¶å€™ï¼Œä¸ºäº†å‡å°‘tcpé“¾æ¥ï¼Œé‡å¤ä½¿ç”¨å·²ç»é“¾æ¥çš„tcpï¼Œè®¾ç½®nginxçš„keepaliveå‚æ•°ã€‚","like_count":6,"discussions":[{"author":{"id":1283912,"avatar":"https://static001.geekbang.org/account/avatar/00/13/97/48/550271b0.jpg","nickname":"é™¶è¾‰","note":"","ucode":"F81A9087435953","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":495417,"discussion_content":"http/1.1é‡Œçš„keepaliveåŠŸèƒ½æ˜¯ä¸ªå¾ˆå¥½ç”¨çš„ä¼˜åŒ–ç‚¹^_^","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589782871,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1286741,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a2/55/1092ebb8.jpg","nickname":"è¾¹åŸè·¯è¿œ","note":"","ucode":"214ECD8981E87F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":268897,"discussion_content":"1.å®¢æˆ·ç«¯åœ¨å›å¤ackæ—¶å¸¦ä¸Šæ•°æ®æ˜¯æ¯”è¾ƒé€šç”¨çš„ä¼˜åŒ–æ–¹å¼ 2.é™ä½æœåŠ¡ç«¯çš„synretriesï¼Œæœ‰åŠ©äºå°½å¿«é‡Šæ”¾åŠè¿æ¥é˜Ÿåˆ— ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1589848290,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":245377,"user_name":"åŠç”Ÿ","can_delete":false,"product_type":"c1","uid":1962148,"ip_address":"","ucode":"8F6BA3CA1AC1B2","user_header":"https://static001.geekbang.org/account/avatar/00/1d/f0/a4/9d8c3dc3.jpg","comment_is_top":false,"comment_ctime":1598927686,"is_pvip":false,"replies":[{"id":"90249","content":"å¦‚æœåº”ç”¨å±‚å…è®¸ä½¿ç”¨é•¿è¿æ¥ï¼ˆæ¯”å¦‚åº”ç”¨å±‚çš„è¶…æ—¶å¯èƒ½æœ‰ä¸Šé™ï¼‰ï¼Œæˆ–è€…ç©ºé—²è¿æ¥å ç”¨çš„å†…å­˜èµ„æºä¸åœ¨ä¹ï¼ˆé•¿è¿æ¥ä¸åªåœ¨å†…æ ¸ï¼Œåœ¨åº”ç”¨å±‚åœ¨æ¯è¿æ¥ä¹Ÿè¦æ¶ˆè€—KBçº§åˆ«ä»¥ä¸Šçš„å†…å­˜ï¼‰ï¼Œå°±ä½¿ç”¨é•¿è¿æ¥ã€‚<br>TFOçš„å¼€å¯æ˜¯æœ‰å‰æçš„ï¼Œè‡³å°‘ä¸¤ç«¯éƒ½è¦æ”¯æŒã€‚","user_name":"ä½œè€…å›å¤","comment_id":245377,"uid":"1283912","ip_address":"","utype":1,"ctime":1598941965,"user_name_real":"é™¶è¾‰"}],"discussion_count":1,"race_medal":0,"score":"18778796870","product_id":100051201,"comment_content":"è€å¸ˆï¼Œè¯·æ•™ä¸€ä¸ªé—®é¢˜ï¼Œéƒ½æ˜¯å‡å°‘tcpæ¡æ‰‹çš„ä»£ä»·ï¼Œé‚£tfoå’Œé•¿é“¾æ¥åˆ†åˆ«æ˜¯ä»€ä¹ˆä½¿ç”¨åœºæ™¯ï¼Œæˆ–è€…è¯´ï¼Œä»€ä¹ˆåœºæ™¯ä¸‹ï¼Œtfoä¼šæ¯”é•¿é“¾æ¥æ€§ä»·æ¯”æ›´é«˜ï¼Ÿ","like_count":4,"discussions":[{"author":{"id":1283912,"avatar":"https://static001.geekbang.org/account/avatar/00/13/97/48/550271b0.jpg","nickname":"é™¶è¾‰","note":"","ucode":"F81A9087435953","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504866,"discussion_content":"å¦‚æœåº”ç”¨å±‚å…è®¸ä½¿ç”¨é•¿è¿æ¥ï¼ˆæ¯”å¦‚åº”ç”¨å±‚çš„è¶…æ—¶å¯èƒ½æœ‰ä¸Šé™ï¼‰ï¼Œæˆ–è€…ç©ºé—²è¿æ¥å ç”¨çš„å†…å­˜èµ„æºä¸åœ¨ä¹ï¼ˆé•¿è¿æ¥ä¸åªåœ¨å†…æ ¸ï¼Œåœ¨åº”ç”¨å±‚åœ¨æ¯è¿æ¥ä¹Ÿè¦æ¶ˆè€—KBçº§åˆ«ä»¥ä¸Šçš„å†…å­˜ï¼‰ï¼Œå°±ä½¿ç”¨é•¿è¿æ¥ã€‚\nTFOçš„å¼€å¯æ˜¯æœ‰å‰æçš„ï¼Œè‡³å°‘ä¸¤ç«¯éƒ½è¦æ”¯æŒã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598941965,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":218242,"user_name":"å”æœé¦–éƒ½","can_delete":false,"product_type":"c1","uid":1081233,"ip_address":"","ucode":"F72655AE0AE4CA","user_header":"https://static001.geekbang.org/account/avatar/00/10/7f/91/962eba1a.jpg","comment_is_top":false,"comment_ctime":1589764493,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"14474666381","product_id":100051201,"comment_content":"åˆšå­¦ä¹ äº†ä¸¤ä¸ªçŸ¥è¯†ç‚¹ï¼š<br>ï¼ˆ1ï¼‰syncookiesåŠŸèƒ½<br>å½“SYN åŠè¿æ¥é˜Ÿåˆ—å·²æ»¡æ—¶ï¼Œå¹¶éåªèƒ½ä¸¢å¼ƒè¿æ¥ï¼ŒæœåŠ¡ç«¯å¯ä»¥å®æ—¶è®¡ç®—å‡ºä¸€ä¸ªçŠ¶æ€å€¼ä¸SYN+ACK æŠ¥æ–‡ä¸€åŒå‘å‡ºï¼Œå®¢æˆ·ç«¯è¿”å›æŠ¥æ–‡æ—¶è¿›è¡Œå®æ—¶è§£æéªŒè¯ï¼Œå¦‚æœé€šè¿‡ä¹Ÿæ˜¯å¯ä»¥å»ºç«‹è¿æ¥çš„ï¼Œå‡å°‘äº†å®¢æˆ·ç«¯ä¸æ–­é‡è¯•çš„æ—¶é—´ã€‚<br>ï¼ˆ2ï¼‰TFO<br>é¦–æ¬¡å»ºç«‹è¿æ¥ä¹‹åï¼Œå®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯åˆ†åˆ«å­˜å‚¨åŠ å¯†çš„Cookieï¼Œè§£å†³åç»­çš„ä¿¡ä»»é—®é¢˜ï¼Œè¿™æ ·åç»­å°±æ— éœ€å†ç»å†åŒæ ·çš„ä¸‰æ¬¡æ¡æ‰‹ï¼Œå‡å°‘å»ºç«‹è¿æ¥çš„æ—¶é—´ã€‚","like_count":3},{"had_liked":false,"id":218206,"user_name":"æˆ‘æ¥ä¹Ÿ","can_delete":false,"product_type":"c1","uid":1205253,"ip_address":"","ucode":"773D6104F56767","user_header":"https://static001.geekbang.org/account/avatar/00/12/64/05/6989dce6.jpg","comment_is_top":false,"comment_ctime":1589757799,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14474659687","product_id":100051201,"comment_content":"å¾ˆå®ç”¨çš„ä¸€ç¯‡æ–‡ç« ã€‚<br><br>ä»Šå¤©åˆæœ‰æ–°çš„æ”¶è·ï¼ŒåŸæ¥TFOæ˜¯è¿™ä¹ˆä¸ªæ„æ€ï¼ŒåŸç†æ˜¯è¿™æ ·çš„ã€‚<br>ä¹‹å‰åªåœ¨æŸäº›ç½‘ç»œä»£ç†è½¯ä»¶ä¸­çœ‹åˆ°è¿‡tcp_fastopené€‰é¡¹ï¼Œä½†ä¸çŸ¥é“å•¥æ„æ€ã€‚ç°åœ¨å°±æ˜ç™½äº†ã€‚<br>è¯è¯´å…‰è½¯ä»¶å±‚é¢å¼€å¯äº†ï¼Œå†…æ ¸æœªå¼€å¯ï¼Œä¹Ÿæ˜¯äº«å—ä¸äº†çš„ã€‚è¿™ä¸ªå°±å¾—çœ‹çœ‹å†…æ ¸æ˜¯å¦é»˜è®¤å¼€å¯äº†ã€‚","like_count":3},{"had_liked":false,"id":235675,"user_name":"Douglas","can_delete":false,"product_type":"c1","uid":1073027,"ip_address":"","ucode":"CFDE3D76B9DAE6","user_header":"https://static001.geekbang.org/account/avatar/00/10/5f/83/bb728e53.jpg","comment_is_top":false,"comment_ctime":1595146031,"is_pvip":false,"replies":[{"id":"88423","content":"é»˜è®¤çš„è¡Œä¸ºæ˜¯æ–°è¿›å…¥çš„æŠ¥æ–‡ç›´æ¥ä¸¢å¼ƒã€‚è¿™æ ·ï¼Œå¦‚æœå‡ ç§’åaccepté˜Ÿåˆ—æ¶ˆè´¹æ‰äº†ï¼Œé‚£ä¹ˆå®¢æˆ·ç«¯è¶…æ—¶é‡å‘çš„DATA+ACKåˆ°äº†ï¼Œè¿æ¥å°±ä¼šå†æ¬¡å»ºç«‹","user_name":"ä½œè€…å›å¤","comment_id":235675,"uid":"1283912","ip_address":"","utype":1,"ctime":1596523630,"user_name_real":"é™¶è¾‰"}],"discussion_count":4,"race_medal":0,"score":"10185080623","product_id":100051201,"comment_content":"ã€accepté˜Ÿåˆ—æº¢å‡ºã€‘è¿™é‡Œè®²çš„æ¯”è¾ƒæ¨¡ç³Šï¼Œaccepté˜Ÿåˆ—æº¢å‡ºã€‚æ˜¯æŠŠå·²ç»å»ºç«‹å¥½çš„è¿æ¥ä¸¢å¼ƒï¼Œ è¿˜æ˜¯å› ä¸ºé˜Ÿåˆ—å·²æ»¡ï¼Œæ‰€ä»¥ï¼Œåç»­è¿›æ¥çš„è¿æ¥ç›´æ¥ä¸¢å¼ƒå‘¢ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1283912,"avatar":"https://static001.geekbang.org/account/avatar/00/13/97/48/550271b0.jpg","nickname":"é™¶è¾‰","note":"","ucode":"F81A9087435953","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":501802,"discussion_content":"é»˜è®¤çš„è¡Œä¸ºæ˜¯æ–°è¿›å…¥çš„æŠ¥æ–‡ç›´æ¥ä¸¢å¼ƒã€‚è¿™æ ·ï¼Œå¦‚æœå‡ ç§’åaccepté˜Ÿåˆ—æ¶ˆè´¹æ‰äº†ï¼Œé‚£ä¹ˆå®¢æˆ·ç«¯è¶…æ—¶é‡å‘çš„DATA+ACKåˆ°äº†ï¼Œè¿æ¥å°±ä¼šå†æ¬¡å»ºç«‹","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1596523630,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2080899,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/c0/83/ca1c44d5.jpg","nickname":"west","note":"","ucode":"B42BF349E55900","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":329816,"discussion_content":"å®¢æˆ·ç«¯æ­¤æ—¶æ˜¯establishçŠ¶æ€ï¼Œå·²ç»å‘é€ACKäº†ï¼›ä¸ºä»€ä¹ˆè¿˜ä¼šå‘ACKæŠ¥æ–‡ï¼Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606463963,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":3031867,"avatar":"","nickname":"Geek_1ca1a6","note":"","ucode":"F00B9A60D32A3E","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":2080899,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/c0/83/ca1c44d5.jpg","nickname":"west","note":"","ucode":"B42BF349E55900","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579699,"discussion_content":"å› ä¸ºä¹‹å‰å‘é€çš„ ACK æŠ¥æ–‡å› ä¸ºé˜Ÿåˆ—æº¢å‡ºï¼Œæ²¡æˆåŠŸæ”¾å…¥accepté˜Ÿåˆ—ï¼Œæ‰€ä»¥éœ€è¦é‡å‘ï¼Œä¸ªäººç†è§£\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657621191,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":329816,"ip_address":""},"score":579699,"extra":""}]},{"author":{"id":1073027,"avatar":"https://static001.geekbang.org/account/avatar/00/10/5f/83/bb728e53.jpg","nickname":"Douglas","note":"","ucode":"CFDE3D76B9DAE6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":296572,"discussion_content":"æ˜ç™½äº†ï¼Œè°¢è°¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596591788,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":219883,"user_name":"çŒ¿äººè°·","can_delete":false,"product_type":"c1","uid":1100149,"ip_address":"","ucode":"85106C7FB14C43","user_header":"https://static001.geekbang.org/account/avatar/00/10/c9/75/62ce2d69.jpg","comment_is_top":false,"comment_ctime":1590114124,"is_pvip":true,"replies":[{"id":"81195","content":"è°¢è°¢^_^","user_name":"ä½œè€…å›å¤","comment_id":219883,"uid":"1283912","ip_address":"","utype":1,"ctime":1590130892,"user_name_real":"é™¶è¾‰"}],"discussion_count":1,"race_medal":0,"score":"10180048716","product_id":100051201,"comment_content":"è¿™ç¯‡æ–‡ç« å¤ªç²¾å½©äº†ï¼Œèµå¿ƒæ‚¦ç›®å•Š","like_count":2,"discussions":[{"author":{"id":1283912,"avatar":"https://static001.geekbang.org/account/avatar/00/13/97/48/550271b0.jpg","nickname":"é™¶è¾‰","note":"","ucode":"F81A9087435953","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":495977,"discussion_content":"è°¢è°¢^_^","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590130892,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":218967,"user_name":"çˆ±è°è°","can_delete":false,"product_type":"c1","uid":1066009,"ip_address":"","ucode":"C333E8A5AF9713","user_header":"https://static001.geekbang.org/account/avatar/00/10/44/19/a2fa21af.jpg","comment_is_top":false,"comment_ctime":1589904891,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10179839483","product_id":100051201,"comment_content":"é¢„å»ºè¿æ¥ï¼Œè¿æ¥å¤ç”¨ï¼Œå¤šIPç«é€Ÿå»ºç«‹é“¾æ¥å’Œå¤åˆè¿æ¥~ ","like_count":1},{"had_liked":false,"id":266784,"user_name":"å†›","can_delete":false,"product_type":"c1","uid":1344780,"ip_address":"","ucode":"B53BBE36FA1286","user_header":"https://static001.geekbang.org/account/avatar/00/14/85/0c/252a1149.jpg","comment_is_top":false,"comment_ctime":1607486292,"is_pvip":false,"replies":[{"id":"97242","content":"^_^","user_name":"ä½œè€…å›å¤","comment_id":266784,"uid":"1283912","ip_address":"","utype":1,"ctime":1607908147,"user_name_real":"é™¶è¾‰"}],"discussion_count":1,"race_medal":0,"score":"5902453588","product_id":100051201,"comment_content":"æ„Ÿè§‰å°æ—codingå°±æ˜¯æŠ„çš„è¿™ç¯‡ï¼Œå¤ªå¹²è´§äº†ï¼ŒğŸ˜","like_count":2,"discussions":[{"author":{"id":1283912,"avatar":"https://static001.geekbang.org/account/avatar/00/13/97/48/550271b0.jpg","nickname":"é™¶è¾‰","note":"","ucode":"F81A9087435953","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":511387,"discussion_content":"^_^","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607908147,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":226177,"user_name":"stackWarn","can_delete":false,"product_type":"c1","uid":1002005,"ip_address":"","ucode":"89672E452DEBA5","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4a/15/106eaaa8.jpg","comment_is_top":false,"comment_ctime":1591971827,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5886939123","product_id":100051201,"comment_content":"è€å¸ˆè®²çš„ä¼˜åŒ–åœ¨è¿ç»´å·¥ä½œä¸­éƒ½æœ‰åšè¿‡ï¼Œå…³äºè¿æ¥é˜Ÿåˆ—å¯ä»¥é€šè¿‡systemtapç­‰å·¥å…·å»åšä¸‹å®éªŒï¼Œæˆ‘è¡¥å……ä¸‹è‡ªå·±æ›¾ç»åšè¿‡æµ‹è¯•çš„ç»“è®ºï¼ŒåŠè¿æ¥é˜Ÿåˆ—å¤§å°çš„å€¼å’Œ tcp_max_syn_backlog  ä»¥åŠå…¨è¿æ¥é˜Ÿåˆ—çš„é‚£ä¸¤ä¸ªå‚æ•°å³ somaxconn å’Œ åº”ç”¨å±‚çš„backlog è¿™ä¸‰ä¸ªéƒ½æœ‰å…³ç³»ï¼Œæ„Ÿè°¢è€å¸ˆçš„è®²è§£ï¼Œä¸çŸ¥é“ç”Ÿäº§ç¯å¢ƒä¸­tfoæœ‰æ²¡æœ‰ä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿç°åœ¨æœ‰å“ªäº›å…¬å¸æ˜¯å¦æœ‰å¼€å¯TFOäº†ï¼Œæ±‚ç§‘æ™®","like_count":1},{"had_liked":false,"id":222326,"user_name":"Raymond","can_delete":false,"product_type":"c1","uid":2011026,"ip_address":"","ucode":"7A17680E537D57","user_header":"https://static001.geekbang.org/account/avatar/00/1e/af/92/164e40f3.jpg","comment_is_top":false,"comment_ctime":1590749020,"is_pvip":false,"replies":[{"id":"82060","content":"ä½ å¥½Raymondï¼Œ<br>1ã€å®¢æˆ·ç«¯ä¸éœ€è¦é˜Ÿåˆ—ï¼Œå®ƒå¹¶ä¸éœ€è¦ç›‘å¬æŸä¸ªç«¯å£å†å»ºç«‹è¿æ¥ã€‚<br>2ã€å¯¹çš„","user_name":"ä½œè€…å›å¤","comment_id":222326,"uid":"1283912","ip_address":"","utype":1,"ctime":1590842533,"user_name_real":"é™¶è¾‰"}],"discussion_count":1,"race_medal":0,"score":"5885716316","product_id":100051201,"comment_content":"è€å¸ˆ ä»Šå¤©å†…å®¹å¾ˆæœ‰ä»·å€¼è®©æˆ‘å¯¹tcpè¿æ¥æœ‰äº†æ›´æ·±å…¥çš„äº†è§£ï¼Œæ­¤æ—¶æˆ‘æœ‰äº›é—®é¢˜ 1.åœ¨å†…å®¹ä¸­åªè®²åˆ°äº†æœåŠ¡ç«¯åœ¨å»ºç«‹è¿æ¥çš„æ—¶å€™ ä¼šç»´æŠ¤ åŠè¿æ¥é˜Ÿåˆ—ï¼Œå’Œaccepé˜Ÿåˆ—ï¼Œæˆ‘æƒ³é—®åœ¨è¿™ä¸ªè¿‡ç¨‹å½“ä¸­ï¼Œå®¢æˆ·ç«¯ä¼šç»´æŠ¤é˜Ÿåˆ—å—ï¼Ÿå¦‚æœæœ‰çš„ æ˜¯ä»€ä¹ˆæ ·ç»“æ„å’Œè§„èŒƒ?ç¬¬äºŒä¸ªé—®é¢˜  å°±æ˜¯ç¡®è®¤ä¸‹ æˆ‘ä»Šå¤©å¬è¯¾çš„ä¸€ä¸ª æ”¶è·ï¼Œ æˆ‘çš„æ€»ç»“æ˜¯ åœ¨tcpä¼ è¾“è¿‡ç¨‹å½“ä¸­ æ— è®ºæ˜¯å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ å†ç»™å¯¹æ–¹å‘é€è¯·æ±‚æ—¶ å¿…é¡»è¦æœ‰å›åº”ï¼Œå¦‚æœæ²¡æœ‰å›åº”å°±ä¼šé€šè¿‡é‡è¯•æœºåˆ¶æ¥é‡å‘ï¼Œé‡è¯•ä¸€å®šæ¬¡æ•°åä»ç„¶æ²¡æœ‰å›åº” å°±ç¡®è®¤å¤±è´¥ï¼Œ è€Œå¯¹æ–¹åœ¨å¤„ç†è¯·æ±‚å¼‚å¸¸åï¼Œæ¯”å¦‚æœåŠ¡ç«¯é˜Ÿåˆ—å·²æ»¡ï¼Œæ— æ³•å»ºç«‹è¿æ¥ï¼Œæˆ–è€…å¼‚å¸¸ä¹‹åï¼Œé»˜è®¤æƒ…å†µä¸‹ä¹Ÿä¸ä¼šå‘Šè¯‰å¯¹æ–¹ï¼Œé€šè¿‡å¯¹æ–¹çš„é‡è¯•æ¥æ„ŸçŸ¥å¤±è´¥ï¼ŒRSTå¤ä½æ˜¯ä¸ªä¾‹å¤– ","like_count":1,"discussions":[{"author":{"id":1283912,"avatar":"https://static001.geekbang.org/account/avatar/00/13/97/48/550271b0.jpg","nickname":"é™¶è¾‰","note":"","ucode":"F81A9087435953","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496751,"discussion_content":"ä½ å¥½Raymondï¼Œ\n1ã€å®¢æˆ·ç«¯ä¸éœ€è¦é˜Ÿåˆ—ï¼Œå®ƒå¹¶ä¸éœ€è¦ç›‘å¬æŸä¸ªç«¯å£å†å»ºç«‹è¿æ¥ã€‚\n2ã€å¯¹çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590842533,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":219368,"user_name":"eason2017","can_delete":false,"product_type":"c1","uid":1009422,"ip_address":"","ucode":"E070BA624FA490","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/0e/c77ad9b1.jpg","comment_is_top":false,"comment_ctime":1590019566,"is_pvip":false,"replies":[{"id":"81151","content":"^_^","user_name":"ä½œè€…å›å¤","comment_id":219368,"uid":"1283912","ip_address":"","utype":1,"ctime":1590103418,"user_name_real":"é™¶è¾‰"}],"discussion_count":1,"race_medal":0,"score":"5884986862","product_id":100051201,"comment_content":"æ–‡ç« ç²¾å½©ï¼Œä½©ä»˜å¤§å¸ˆï¼","like_count":1,"discussions":[{"author":{"id":1283912,"avatar":"https://static001.geekbang.org/account/avatar/00/13/97/48/550271b0.jpg","nickname":"é™¶è¾‰","note":"","ucode":"F81A9087435953","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":495784,"discussion_content":"^_^","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590103418,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":219311,"user_name":"è‘£æ³½æ¶¦","can_delete":false,"product_type":"c1","uid":1048718,"ip_address":"","ucode":"0859A6ECCB5473","user_header":"https://static001.geekbang.org/account/avatar/00/10/00/8e/ebe3c8ea.jpg","comment_is_top":false,"comment_ctime":1589987488,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5884954784","product_id":100051201,"comment_content":"è®¿é‡å¾ˆå¤§æ—¶ï¼Œtime_wait ä¼šéå¸¸å¤šï¼Œä¸€èˆ¬éƒ½ç”¨é•¿è¿æ¥æ¥è§„é¿è¿™ä¸ªé—®é¢˜ã€‚ä½†æ˜¯é•¿è¿æ¥ä¹Ÿæœ‰é—®é¢˜ï¼Œæ¯”å¦‚ä¿æ´»ï¼Œæ¯”å¦‚å½“æœåŠ¡ç«¯æŒ‚äº†ï¼Œä½†æ˜¯å› ä¸ºç½‘ç»œéš”ç¦»å®¢æˆ·ç«¯è¿˜æ²¡æ„ŸçŸ¥é“ï¼Œè¿™æ—¶è¯·æ±‚å°±ä¼šæœ‰å¤§é‡è¶…æ—¶","like_count":1},{"had_liked":false,"id":218805,"user_name":"æœ‰æœ‹è‡ªè¿œæ–¹æ¥","can_delete":false,"product_type":"c1","uid":1083600,"ip_address":"","ucode":"23A12829DEB119","user_header":"https://static001.geekbang.org/account/avatar/00/10/88/d0/6e75f766.jpg","comment_is_top":false,"comment_ctime":1589878652,"is_pvip":false,"replies":[{"id":"81205","content":"ä¸æ˜¯å“¦ï¼Œé‚£ä¸ªæ˜¯HTTPåè®®ä¸­çš„æ¦‚å¿µ","user_name":"ä½œè€…å›å¤","comment_id":218805,"uid":"1283912","ip_address":"","utype":1,"ctime":1590134353,"user_name_real":"é™¶è¾‰"}],"discussion_count":3,"race_medal":0,"score":"5884845948","product_id":100051201,"comment_content":"è¿™ä¸ª cookie  å’Œå¸¸è¯´çš„ cookie session æ˜¯ä¸€å›äº‹ä¹ˆï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1283912,"avatar":"https://static001.geekbang.org/account/avatar/00/13/97/48/550271b0.jpg","nickname":"é™¶è¾‰","note":"","ucode":"F81A9087435953","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":495581,"discussion_content":"ä¸æ˜¯å“¦ï¼Œé‚£ä¸ªæ˜¯HTTPåè®®ä¸­çš„æ¦‚å¿µ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590134353,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1123043,"avatar":"https://static001.geekbang.org/account/avatar/00/11/22/e3/510b69f9.jpg","nickname":"benny","note":"","ucode":"E2F30AF0C808D9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":299539,"discussion_content":"jwtæ˜¯å•¥ç¼©å†™ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597728524,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1118627,"avatar":"https://static001.geekbang.org/account/avatar/00/11/11/a3/7a2405ca.jpg","nickname":"rfyiamcool","note":"","ucode":"65FCBF05B13893","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":284078,"discussion_content":"æŒ‰ç…§åº”ç”¨å±‚æ¥è¯´çš„è¯ï¼Œå¯ç²—ç³™çš„ç†è§£ä¸ºjwtã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592442027,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":218666,"user_name":"å°ä¸€æ—¥ä¸€","can_delete":false,"product_type":"c1","uid":1301097,"ip_address":"","ucode":"0A506C2B918C14","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKtVXiaJbfkpeXH4udkPUIlFte7z3HWMebdogk8jFpgFEkJ0ruGiawUMUcZj9RLpLkIWxV7QOzbHoSg/132","comment_is_top":false,"comment_ctime":1589851958,"is_pvip":false,"replies":[{"id":"80908","content":"^_^","user_name":"ä½œè€…å›å¤","user_name_real":"é™¶è¾‰","uid":"1283912","ctime":1589935138,"ip_address":"","comment_id":218666,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5884819254","product_id":100051201,"comment_content":"å¹²è´§æ»¡æ»¡çš„ä¸€èŠ‚ï¼Œæ„Ÿè°¢è€å¸ˆ","like_count":1,"discussions":[{"author":{"id":1283912,"avatar":"https://static001.geekbang.org/account/avatar/00/13/97/48/550271b0.jpg","nickname":"é™¶è¾‰","note":"","ucode":"F81A9087435953","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":495537,"discussion_content":"^_^","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589935138,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":344421,"user_name":"é“²é“²é˜Ÿ","can_delete":false,"product_type":"c1","uid":1132569,"ip_address":"","ucode":"D16372C34B7AE3","user_header":"https://static001.geekbang.org/account/avatar/00/11/48/19/14dd81d9.jpg","comment_is_top":false,"comment_ctime":1651543884,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1651543884","product_id":100051201,"comment_content":"â€œå¼€å¯ syncookies åŠŸèƒ½å°±å¯ä»¥åœ¨ä¸ä½¿ç”¨ SYN é˜Ÿåˆ—çš„æƒ…å†µä¸‹æˆåŠŸå»ºç«‹è¿æ¥â€   ---&gt;æ€ä¹ˆç†è§£è¿™å¥è¯å‘¢ï¼Œè€å¸ˆï¼Œæˆ‘çœ‹è¿™å¥è¯çš„é…å›¾ï¼Œçœ‹èµ·æ¥æ¯”è¾ƒè¿·æƒ‘ï¼Œçœ‹èµ·æ¥æ”¶åˆ°SYNåè¿˜æ˜¯ä¼šæ”¾åˆ°SYNé˜Ÿåˆ—ï¼Œç„¶åè¿”å›SYN cookieçš„æ ·å­ï¼Œæ€ä¹ˆè§£é‡Šæ²¡æœ‰ä½¿ç”¨SYNé˜Ÿåˆ—ï¼Ÿå¯¹äºè¿™ç§æƒ…å†µä¸‹ï¼Œæ”¶åˆ°SYNä»¥åï¼Œæ•°æ®æ˜¯æ€ä¹ˆå­˜æ”¾çš„ï¼Ÿ","like_count":0},{"had_liked":false,"id":344420,"user_name":"é“²é“²é˜Ÿ","can_delete":false,"product_type":"c1","uid":1132569,"ip_address":"","ucode":"D16372C34B7AE3","user_header":"https://static001.geekbang.org/account/avatar/00/11/48/19/14dd81d9.jpg","comment_is_top":false,"comment_ctime":1651543530,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1651543530","product_id":100051201,"comment_content":"è€å¸ˆï¼Œæ‚¨å¥½ï¼Œsysyncookiesä¸­çš„cookieå’ŒTFOä¸­çš„cookieæ˜¯ä¸€ä¸ªä¸œè¥¿å§ï¼Ÿ","like_count":0},{"had_liked":false,"id":330676,"user_name":"David.cui","can_delete":false,"product_type":"c1","uid":1302228,"ip_address":"","ucode":"AB46F310403612","user_header":"https://static001.geekbang.org/account/avatar/00/13/de/d4/b83c4185.jpg","comment_is_top":false,"comment_ctime":1642115030,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1642115030","product_id":100051201,"comment_content":"<br>net.ipv4.tcp_syn_retries = 6ã€‚åº”è¯¥åœ¨æœåŠ¡å™¨è¿˜æ˜¯å®¢æˆ·ç«¯è®¾ç½®","like_count":0},{"had_liked":false,"id":287993,"user_name":"Geek_LYQ","can_delete":false,"product_type":"c1","uid":2543581,"ip_address":"","ucode":"CD57643A24D508","user_header":"","comment_is_top":false,"comment_ctime":1618243323,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1618243323","product_id":100051201,"comment_content":"é€šå¸¸æƒ…å†µä¸‹ï¼Œåº”å½“æŠŠ tcp_abort_on_overflow è®¾ç½®ä¸º 0ï¼Œå› ä¸ºè¿™æ ·æ›´æœ‰åˆ©äºåº”å¯¹çªå‘æµé‡ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå½“ accept é˜Ÿåˆ—æ»¡å¯¼è‡´æœåŠ¡å™¨ä¸¢æ‰äº† ACKï¼Œä¸æ­¤åŒæ—¶ï¼Œå®¢æˆ·ç«¯çš„è¿æ¥çŠ¶æ€å´æ˜¯ ESTABLISHEDï¼Œè¿›ç¨‹å°±åœ¨å»ºç«‹å¥½çš„è¿æ¥ä¸Šå‘é€è¯·æ±‚ã€‚åªè¦æœåŠ¡å™¨æ²¡æœ‰ä¸ºè¯·æ±‚å›å¤ ACKï¼Œè¯·æ±‚å°±ä¼šè¢«å¤šæ¬¡é‡å‘ã€‚<br>é™¶è€å¸ˆï¼Œè¿™å¥è¯â€œåªè¦æœåŠ¡å™¨æ²¡æœ‰ä¸ºè¯·æ±‚å›å¤ ACKï¼Œè¯·æ±‚å°±ä¼šè¢«å¤šæ¬¡é‡å‘â€ä¸ç†è§£ï¼ŒServerç”±äºè¿æ¥é˜Ÿåˆ—æ»¡è€Œä¸¢ACKæƒ…å†µä¸‹ï¼ŒæœåŠ¡ç«¯å·²ç»æ˜¯ESTABLISHEDçŠ¶æ€ï¼Œå¹¶ä¸ä¼šå†å›å¤ACKç»™å®¢æˆ·ç«¯äº†ï¼Œé‚£ä¹ˆå®¢æˆ·ç«¯æ€ä¹ˆçŸ¥é“è¦é‡å¤ACK+è¯·æ±‚æ•°æ®å‘¢ï¼Ÿ<br><br>","like_count":0},{"had_liked":false,"id":286581,"user_name":"æ«ä¸­æµªå­","can_delete":false,"product_type":"c1","uid":2351949,"ip_address":"","ucode":"860BEA32059B37","user_header":"https://static001.geekbang.org/account/avatar/00/23/e3/4d/8a26dbb2.jpg","comment_is_top":false,"comment_ctime":1617409712,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1617409712","product_id":100051201,"comment_content":"æ–‡ä¸­å†™åˆ°ï¼šå®¢æˆ·ç«¯å‘é€ SYN å¼€å¯äº†ä¸‰æ¬¡æ¡æ‰‹ï¼Œæ­¤æ—¶åœ¨å®¢æˆ·ç«¯ä¸Šç”¨ netstat å‘½ä»¤ï¼ˆåç»­æŸ¥çœ‹è¿æ¥çŠ¶æ€éƒ½ä½¿ç”¨è¯¥å‘½ä»¤ï¼‰å¯ä»¥çœ‹åˆ°è¿æ¥çš„çŠ¶æ€æ˜¯ SYN_SENTï¼ˆé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯æŠŠåˆš SYN å‘é€å‡ºå»ï¼‰ã€‚<br>è¯·é—®è€å¸ˆè¿™ä¸ªsynæ˜¯ç”¨ä»€ä¹ˆå·¥å…·æ„é€ çš„ï¼Ÿå¦‚æœä¸æ˜¯æ„é€ çš„ï¼Œæ­£å¸¸æƒ…å†µä¸‹ä¸‰æ¬¡æ¡æ‰‹å¾ˆå¿«ï¼Œçœ‹ä¸åˆ°è¿æ¥çš„ä¸­é—´çŠ¶æ€å§","like_count":0},{"had_liked":false,"id":230703,"user_name":"G.S.K","can_delete":false,"product_type":"c1","uid":1222966,"ip_address":"","ucode":"88217F9289EB48","user_header":"https://static001.geekbang.org/account/avatar/00/12/a9/36/d054c979.jpg","comment_is_top":false,"comment_ctime":1593474108,"is_pvip":false,"replies":[{"id":"90487","content":"åœ¨ç”Ÿäº§è€…ã€æ¶ˆè´¹è€…æ¨¡å‹ä¸­ï¼Œéœ€è¦1ä¸ªé˜Ÿåˆ—æ¥ç¼“å†²ä¸¤è€…é€Ÿç‡çš„ä¸åŒã€‚socketå¥æŸ„å¯ä»¥æ ‡è¯†è¿æ¥ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"é™¶è¾‰","uid":"1283912","ctime":1599212885,"ip_address":"","comment_id":230703,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1593474108","product_id":100051201,"comment_content":"è€å¸ˆï¼ŒsynåŠè¿æ¥é˜Ÿåˆ—ã€acceptè¿æ¥é˜Ÿåˆ—ä¸ºä»€ä¹ˆé‡‡ç”¨é˜Ÿåˆ—è¿™ç§æ•°æ®ç»“æ„ï¼Œäº”å…ƒç»„æ˜¯å¦‚ä½•è·Ÿé˜Ÿåˆ—ä¸­çš„æŸä¸€é¡¹å…³è”èµ·æ¥çš„å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1283912,"avatar":"https://static001.geekbang.org/account/avatar/00/13/97/48/550271b0.jpg","nickname":"é™¶è¾‰","note":"","ucode":"F81A9087435953","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":499999,"discussion_content":"åœ¨ç”Ÿäº§è€…ã€æ¶ˆè´¹è€…æ¨¡å‹ä¸­ï¼Œéœ€è¦1ä¸ªé˜Ÿåˆ—æ¥ç¼“å†²ä¸¤è€…é€Ÿç‡çš„ä¸åŒã€‚socketå¥æŸ„å¯ä»¥æ ‡è¯†è¿æ¥ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599212885,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":229170,"user_name":"Kvicii.Y","can_delete":false,"product_type":"c1","uid":1442588,"ip_address":"","ucode":"446BFA633569EA","user_header":"https://static001.geekbang.org/account/avatar/00/16/03/1c/c9fe6738.jpg","comment_is_top":false,"comment_ctime":1592915685,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1592915685","product_id":100051201,"comment_content":"TFOåªæ˜¯çœæ‰äº†ç¬¬äºŒé˜¶æ®µå®¢æˆ·ç«¯åˆ°æœåŠ¡ç«¯åˆ°é‚£ä¸ªACKçš„RTTå—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":3031867,"avatar":"","nickname":"Geek_1ca1a6","note":"","ucode":"F00B9A60D32A3E","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579701,"discussion_content":"ä¸ªäººç†è§£ï¼šTFO åœ¨ä¹‹åå»ºç«‹è¿æ¥çš„æ—¶å€™ï¼ŒåŸæœ¬ç¬¬ä¸€æ¬¡æ¡æ‰‹ç›´æ¥å¯ä»¥æºå¸¦æ•°æ®äº†ï¼Œå°±ä¸ç”¨å•çº¯å»å»ºç«‹è¿æ¥ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657621595,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":229087,"user_name":"thomas","can_delete":false,"product_type":"c1","uid":1016777,"ip_address":"","ucode":"9AB945308F1B50","user_header":"https://static001.geekbang.org/account/avatar/00/0f/83/c9/5d03981a.jpg","comment_is_top":false,"comment_ctime":1592894889,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1592894889","product_id":100051201,"comment_content":"è€å¸ˆï¼Œå¯¹SYNåŠè¿æ¥é˜Ÿåˆ—å’ŒACCEPTè¿æ¥é˜Ÿåˆ—æœ‰ä¸€äº›ç–‘é—®ã€‚å‡å¦‚æœ‰ä¸¤ä¸ªSYNè¯·æ±‚R1, R2ä¾æ¬¡åˆ°è¾¾æœåŠ¡ç«¯å¹¶æ”¶åˆ°ACK+SYNå“åº”ï¼Œ ç°åœ¨SYN-Qé˜Ÿåˆ—å°±æœ‰R1,R2ä¸¤ä¸ªå€¼ã€‚R2å‘é€çš„ACKè¯·æ±‚å…ˆåˆ°è¾¾ï¼ŒæœåŠ¡ç«¯å†…æ ¸ä»SYN-Qé˜Ÿåˆ—å–å‡ºç¬¬ä¸€æ¡æ•°æ®R1ï¼Œå‘ç°ä¸æ˜¯R2çš„æ•°æ®ï¼Œå†æŠŠR1æ”¾å›é˜Ÿåˆ—ï¼Œç»§ç»­æŸ¥æ‰¾R2å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":226279,"user_name":"colonel","can_delete":false,"product_type":"c1","uid":1200916,"ip_address":"","ucode":"F71EE1C23A8D83","user_header":"https://static001.geekbang.org/account/avatar/00/12/53/14/2b93d757.jpg","comment_is_top":false,"comment_ctime":1592020301,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1592020301","product_id":100051201,"comment_content":"syncookieåŠŸèƒ½æ˜¯ä¸æ˜¯ä¹Ÿéœ€è¦å®¢æˆ·ç«¯å¼€å¯è¯¥åŠŸèƒ½æ‰èƒ½å‘æŒ¥ä½œç”¨ï¼Ÿ<br>","like_count":0,"discussions":[{"author":{"id":1118627,"avatar":"https://static001.geekbang.org/account/avatar/00/11/11/a3/7a2405ca.jpg","nickname":"rfyiamcool","note":"","ucode":"65FCBF05B13893","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":284081,"discussion_content":"ä¸éœ€è¦çš„ï¼ŒæœåŠ¡ç«¯é€šè¿‡ç®—æ³•ç”Ÿæˆä¸€ä¸ªseqï¼Œå®¢æˆ·ç«¯ackæ—¶ä¼šåŠ ä¸€ï¼ŒæœåŠ¡ç«¯å¯åˆ°è§£ææ­£ç¡®æ€§ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1592442285,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1123043,"avatar":"https://static001.geekbang.org/account/avatar/00/11/22/e3/510b69f9.jpg","nickname":"benny","note":"","ucode":"E2F30AF0C808D9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1118627,"avatar":"https://static001.geekbang.org/account/avatar/00/11/11/a3/7a2405ca.jpg","nickname":"rfyiamcool","note":"","ucode":"65FCBF05B13893","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":299540,"discussion_content":"éœ€è¦å§ å®¢æˆ·ç«¯ä¸‹ä¸€æ¬¡è¯·æ±‚æ—¶ä¹Ÿè¦åˆ°å¸¦ä¸Šcookie","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597728892,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":284081,"ip_address":""},"score":299540,"extra":""}]}]},{"had_liked":false,"id":225705,"user_name":"å·¦æ°§ä½›æ²™æ˜Ÿäºº","can_delete":false,"product_type":"c1","uid":1195278,"ip_address":"","ucode":"0D8295E1DABA8C","user_header":"https://static001.geekbang.org/account/avatar/00/12/3d/0e/92176eaa.jpg","comment_is_top":false,"comment_ctime":1591837921,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1591837921","product_id":100051201,"comment_content":"è€å¸ˆï¼Œaccepté˜Ÿåˆ—æ»¡ä¼šä¸ä¼šå¯¼è‡´æœåŠ¡çš„connection closedå‘¢ï¼Ÿå¯¼è‡´è¿™ä¸€åœºæ™¯çš„åŸå› éƒ½å¯èƒ½æœ‰å“ªäº›å‘¢ï¼Ÿæˆ‘ä»¬k8ç¯å¢ƒä¸­ï¼Œç½‘ç»œé—´æ­‡æ€§æœ‰connection closedï¼Œåœ¨é•¿æ—¶é—´æŠ“åŒ…åˆ†æä¸­ï¼ŒæœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯éƒ½æ˜¯æ­£å¸¸çš„","like_count":0},{"had_liked":false,"id":225053,"user_name":"ä¸ºäººæ°‘æœåŠ¡","can_delete":false,"product_type":"c1","uid":1135195,"ip_address":"","ucode":"BFF5CD3EDF1303","user_header":"https://static001.geekbang.org/account/avatar/00/11/52/5b/92eff66d.jpg","comment_is_top":false,"comment_ctime":1591625257,"is_pvip":false,"replies":[{"id":"82863","content":"å¾ˆé«˜å…´é‚£é—¨è§†é¢‘è¯¾èƒ½å¤Ÿç»™åˆ°ä½ å¸®åŠ©^_^","user_name":"ä½œè€…å›å¤","user_name_real":"é™¶è¾‰","uid":"1283912","ctime":1591660609,"ip_address":"","comment_id":225053,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1591625257","product_id":100051201,"comment_content":"å¾ˆå¼ºå¾ˆå¼ºï¼Œé™¶è€å¸ˆçš„nginxçœŸæ˜¯åœ¨å·¥ä½œä¸­å—ç›Šè‰¯å¤šã€‚","like_count":0,"discussions":[{"author":{"id":1283912,"avatar":"https://static001.geekbang.org/account/avatar/00/13/97/48/550271b0.jpg","nickname":"é™¶è¾‰","note":"","ucode":"F81A9087435953","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497711,"discussion_content":"å¾ˆé«˜å…´é‚£é—¨è§†é¢‘è¯¾èƒ½å¤Ÿç»™åˆ°ä½ å¸®åŠ©^_^","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591660609,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":223830,"user_name":"é¾™é¾™","can_delete":false,"product_type":"c1","uid":1142957,"ip_address":"","ucode":"C6619820ABCE1C","user_header":"https://static001.geekbang.org/account/avatar/00/11/70/ad/cc353727.jpg","comment_is_top":false,"comment_ctime":1591192832,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"1591192832","product_id":100051201,"comment_content":"é€šå¸¸æƒ…å†µä¸‹ï¼Œåº”å½“æŠŠ tcp_abort_on_overflow è®¾ç½®ä¸º 0ï¼Œå› ä¸ºè¿™æ ·æ›´æœ‰åˆ©äºåº”å¯¹çªå‘æµé‡ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå½“ accept é˜Ÿåˆ—æ»¡å¯¼è‡´æœåŠ¡å™¨ä¸¢æ‰äº† ACKï¼Œä¸æ­¤åŒæ—¶ï¼Œå®¢æˆ·ç«¯çš„è¿æ¥çŠ¶æ€å´æ˜¯ ESTABLISHEDï¼Œè¿›ç¨‹å°±åœ¨å»ºç«‹å¥½çš„è¿æ¥ä¸Šå‘é€è¯·æ±‚ã€‚åªè¦æœåŠ¡å™¨æ²¡æœ‰ä¸ºè¯·æ±‚å›å¤ ACKï¼Œè¯·æ±‚å°±ä¼šè¢«å¤šæ¬¡é‡å‘ã€‚å¦‚æœæœåŠ¡å™¨ä¸Šçš„è¿›ç¨‹åªæ˜¯çŸ­æš‚çš„ç¹å¿™é€ æˆ accept é˜Ÿåˆ—æ»¡ï¼Œé‚£ä¹ˆå½“ accept é˜Ÿåˆ—æœ‰ç©ºä½æ—¶ï¼Œå†æ¬¡æ¥æ”¶åˆ°çš„è¯·æ±‚æŠ¥æ–‡ç”±äºå«æœ‰ ACKï¼Œä»ç„¶ä¼šè§¦å‘æœåŠ¡å™¨ç«¯æˆåŠŸå»ºç«‹è¿æ¥ã€‚æ‰€ä»¥ï¼Œ<br>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-<br>è€å¸ˆï¼Œè¿™å¥è¯æˆ‘æ€ä¹ˆçœ‹éƒ½è§‰å¾—æœ‰ç‚¹é—®é¢˜ï¼Œæ¯”å¦‚çªå‘æµé‡å¯¼è‡´accepté˜Ÿåˆ—çŸ­æš‚æ»¡ï¼Œç„¶åæœ‰ä¸€æ¬¡è¿æ¥å› ä¸ºaccepté˜Ÿåˆ—æ»¡æœåŠ¡å™¨ä¸¢æ‰äº†Ackï¼Œæ­¤æ—¶å¯¹äºå®¢æˆ·ç«¯æ˜¯å¤„äºestablishï¼Œæ­¤æ—¶å®¢æˆ·ç«¯ç»™æœåŠ¡å™¨å‘æ•°æ®ï¼Œå› ä¸ºæœåŠ¡å™¨è®¤ä¸ºæ²¡ç”¨å»ºç«‹å¥½è¿æ¥ï¼Œå®¢æˆ·ç«¯å‘é€çš„æ•°æ®æ”¶ä¸åˆ°å›å¤ï¼Œäºæ˜¯ä¼šé‡å‘ã€‚å¯èƒ½ä¼šé‡å‘å¤šæ¬¡ï¼Œä½†æ˜¯å¯èƒ½æœåŠ¡å™¨çªç„¶ä¸å¿™äº†ï¼Œaccepté˜Ÿåˆ—æœ‰ç©ºä½äº†ï¼Œæ­¤æ—¶è€å¸ˆæ‚¨è¯´  â€å†æ¬¡æ¥æ”¶åˆ°çš„è¯·æ±‚æŠ¥æ–‡ç”±äºå«æœ‰ ACKï¼Œä»ç„¶ä¼šè§¦å‘æœåŠ¡å™¨ç«¯æˆåŠŸå»ºç«‹è¿æ¥â€ï¼Œè¿™å¥è¯ä»ä½•è¯´èµ·å•Šï¼Œä¸ºä»€ä¹ˆå†æ¬¡æ¥æ”¶åˆ°çš„æŠ¥æ–‡ä¼šå«æœ‰ACKï¼Œæˆ‘æƒ³äº†å¥½å‡ å¤©éƒ½æ²¡æƒ³æ˜ç™½ï¼Œæ˜¯ä¸æ˜¯è€å¸ˆæ‚¨è¯´é”™äº†ï¼Œæ±‚é‡Šç–‘ï¼Œè°¢è°¢ã€‚","like_count":0,"discussions":[{"author":{"id":2080899,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/c0/83/ca1c44d5.jpg","nickname":"west","note":"","ucode":"B42BF349E55900","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":294571,"discussion_content":"æˆ‘æ„Ÿè§‰åº”è¯¥ä¸æ˜¯ä¸¢å¼ƒäº†ï¼Œè€Œæ˜¯ä»åŠé“¾æ¥é˜Ÿåˆ—ä¸­ä¸å–å‡ºæ¥æ”¾åˆ°accepté˜Ÿåˆ—ä¸­ï¼Œä½†æ˜¯å½“accepté˜Ÿåˆ—ç©ºé—²çš„æ—¶å€™ï¼Œé€šè¿‡å®¢æˆ·çš„ackæŠŠåŠé“¾æ¥æ”¾åˆ°accepté˜Ÿåˆ—ä¸­ï¼Œé‚£è¿™ä¸ªackæ€ä¹ˆæ¥çš„å‘¢ï¼Œæ¯•ç«Ÿå®¢æˆ·ç«¯è¿™ä¸ªæ—¶å€™å·²ç»å¤„äºESçŠ¶æ€ï¼Œä¸ä¼šå†å‘ackå§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595929834,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2079873,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKlibz5085KSjlsAqSrYKiboLvzm3TYibVAMHjbCz6ibpcUWMa2AOUctyvVRSuVe3HP7YwYcwzwYmh5GQ/132","nickname":"maosd199554","note":"","ucode":"B34D78FF9CB378","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":293800,"discussion_content":"tcpæ˜¯æœ‰é‡ä¼ æœºåˆ¶çš„ï¼Œå½“æœåŠ¡å™¨accepté˜Ÿåˆ—æ»¡åï¼Œå®¢æˆ·ç«¯å‘é€é¦–ä¸ªæ•°æ®è¿‡æ¥ï¼Œé¦–ä¸ªæ•°æ®æ˜¯å¸¦æœ‰æœ€åä¸€æ¬¡æ¡æ‰‹çš„ackçš„ï¼Œä½†æ˜¯æ­¤æ—¶æœåŠ¡å™¨æ— æ³•ç»™äºˆå“åº”ï¼Œç­‰åˆ°é˜Ÿåˆ—æœ‰ç©ºé—²æ—¶æ‰å“åº”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595670794,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1118627,"avatar":"https://static001.geekbang.org/account/avatar/00/11/11/a3/7a2405ca.jpg","nickname":"rfyiamcool","note":"","ucode":"65FCBF05B13893","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":284111,"discussion_content":"ä½ å¯ä»¥é€šè¿‡æŠ“åŒ…éªŒè¯ä¸€ä¸‹ï¼Œtcp_abort_on_overflows=0 and accept queue = fullï¼Œé‚£ä¹ˆè¿™æ—¶å€™æœåŠ¡ç«¯ä¼šæŠŠè¿æ¥æ ‡è®°ä¸ºackedï¼Œç„¶åç§»åˆ°syn queueé‡Œï¼Œå¯åŠ¨å®šæ—¶å™¨é‡å‘syn ackã€‚ä½†å®¢æˆ·ç«¯å‘å®Œackå·²ç»è®¤ä¸ºè‡ªå·±æ˜¯esçŠ¶æ€äº†ï¼Œæ‰€ä»¥å¯æ­£å¸¸å‘é€æ•°æ®ï¼Œä½†æœåŠ¡ç«¯ä¸ç»™ä¸å›åº”ï¼Œæ‰€ä»¥å®¢æˆ·ç«¯ä¸æ–­çš„é‡è¯•ï¼Œç›´åˆ°è¶…æ—¶ã€‚  ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592446541,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":222731,"user_name":"ä¸€æ­¥","can_delete":false,"product_type":"c1","uid":1005391,"ip_address":"","ucode":"73CEA468CE70C3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","comment_is_top":false,"comment_ctime":1590900167,"is_pvip":true,"replies":[{"id":"82257","content":"ä½ å¥½ï¼Œæˆ‘ä¹ æƒ¯ä½¿ç”¨sysctl -aæŸ¥çœ‹ç³»ç»Ÿå‚æ•°ï¼ŒåŒ…æ‹¬ç½‘ç»œéƒ¨åˆ†","user_name":"ä½œè€…å›å¤","user_name_real":"é™¶è¾‰","uid":"1283912","ctime":1591059462,"ip_address":"","comment_id":222731,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1590900167","product_id":100051201,"comment_content":"è¿™äº› linux æœ‰å…³ç½‘ç»œçš„å‚æ•° æ˜¯æ€ä¹ˆæŸ¥çœ‹çš„ï¼Ÿå“ªä¸ªå‚æ•°åœ¨å“ªä¸ªé…ç½®æ–‡ä»¶çš„ï¼Ÿ å¯ä»¥ç›´æ¥æŸ¥è¯¢åˆ°å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1283912,"avatar":"https://static001.geekbang.org/account/avatar/00/13/97/48/550271b0.jpg","nickname":"é™¶è¾‰","note":"","ucode":"F81A9087435953","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496896,"discussion_content":"ä½ å¥½ï¼Œæˆ‘ä¹ æƒ¯ä½¿ç”¨sysctl -aæŸ¥çœ‹ç³»ç»Ÿå‚æ•°ï¼ŒåŒ…æ‹¬ç½‘ç»œéƒ¨åˆ†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591059462,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":221853,"user_name":"è¾¹åŸè·¯è¿œ","can_delete":false,"product_type":"c1","uid":1286741,"ip_address":"","ucode":"214ECD8981E87F","user_header":"https://static001.geekbang.org/account/avatar/00/13/a2/55/1092ebb8.jpg","comment_is_top":false,"comment_ctime":1590623168,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1590623168","product_id":100051201,"comment_content":"æœ‰ä¸ªé—®é¢˜ï¼ŒæœåŠ¡ç«¯å› ä¸ºå…¨è¿æ¥é˜Ÿåˆ—æ»¡ï¼Œå¦‚æœä¸è®¾ç½®tcp_abort_on_overflowå°±ç›´æ¥æŠŠè¿æ¥ä¸¢å¼ƒäº†ï¼Œé‚£ä¹ˆå®¢æˆ·ç«¯å¦‚ä½•è¿›å…¥ESTABLISHEDçŠ¶æ€å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":221708,"user_name":"æ©˜ä¹‹å±±","can_delete":false,"product_type":"c1","uid":1686019,"ip_address":"","ucode":"2B4B8E873990C0","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epzrT5lskkzfFmOE5FVHsl7VDeGwVFhcPFchuoWlN3oqoAJF7LFU2wrGichkEEIMOSWUpM8P4Ew2mw/132","comment_is_top":false,"comment_ctime":1590571191,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"1590571191","product_id":100051201,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œæœ‰ä¸ªåœ°æ–¹ä¸å¤ªæ˜ç™½ï¼ŒæŒ‰æ‚¨åŸæ–‡æ‰€è¯´ï¼šâ€œå¦‚æœæœåŠ¡å™¨ä¸Šçš„è¿›ç¨‹åªæ˜¯çŸ­æš‚çš„ç¹å¿™é€ æˆ accept é˜Ÿåˆ—æ»¡ï¼Œé‚£ä¹ˆå½“ accept é˜Ÿåˆ—æœ‰ç©ºä½æ—¶ï¼Œå†æ¬¡æ¥æ”¶åˆ°çš„è¯·æ±‚æŠ¥æ–‡ç”±äºå«æœ‰ ACKï¼Œä»ç„¶ä¼šè§¦å‘æœåŠ¡å™¨ç«¯æˆåŠŸå»ºç«‹è¿æ¥ã€‚â€ <br><br>æˆ‘ä¸å¤ªæ˜ç™½æœåŠ¡å™¨ç«¯æ€ä¹ˆèƒ½æˆåŠŸå»ºç«‹è¿æ¥ã€‚<br>æŒ‰æ‚¨ä¹‹å‰è¯´çš„ â€œæœåŠ¡å™¨æ”¶åˆ° ACK åè¿æ¥å»ºç«‹æˆåŠŸï¼Œæ­¤æ—¶ï¼Œå†…æ ¸ä¼šæŠŠè¿æ¥ä» SYN åŠè¿æ¥é˜Ÿåˆ—ä¸­ç§»å‡ºï¼Œå†ç§»å…¥ accept é˜Ÿåˆ—&quot;ï¼Œ  é‚£å¦‚æœaccept é˜Ÿåˆ—æ»¡ï¼Œè¿™ä¸ªè¿æ¥ç›¸å½“äºè¢«ä¸¢å¼ƒäº†ã€‚å³ä½¿ä¹‹åaccept é˜Ÿåˆ—ä¸æ»¡äº†ï¼Œè¿æ¥ä¹Ÿæ‰¾ä¸å›æ¥äº†ã€‚ é‚£ä¹‹åclientå‘é€çš„è¯·æ±‚é‡Œå³ä½¿å¸¦æœ‰ACKï¼Œ serverç«¯çš„è¿æ¥éƒ½æ²¡æœ‰äº†ï¼Œæ€ä¹ˆå»ºç«‹è¿æ¥å‘¢ï¼Ÿ ","like_count":0,"discussions":[{"author":{"id":1002005,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/4a/15/106eaaa8.jpg","nickname":"stackWarn","note":"","ucode":"89672E452DEBA5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":282433,"discussion_content":"å¹¶æ²¡ä¸¢å¼ƒï¼Œä¼šå¿½ç•¥æ‰è¿™ä¸ªsynå¹¶ä¸”ä¸»åŠ¨é‡å‘syn+ackï¼Œæ„æ€å°±æ˜¯è®©å®¢æˆ·ç«¯å†æ¬¡é‡å‘ï¼Œå¯ä»¥ç†è§£ä¸º â€œæœ¬æ¬¡åå¸­å·²æ»¡ï¼Œç„¶åæ—¶ä¸æ—¶æé†’ä½ å†æ¥çœ‹çœ‹æœ‰æ²¡æœ‰ç©ºä½â€ ä½ è¯´æ°”äººä¸","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1591972020,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2080899,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/c0/83/ca1c44d5.jpg","nickname":"west","note":"","ucode":"B42BF349E55900","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":329826,"discussion_content":"æµ‹è¯•äº†ä¸€ä¸‹ï¼Œaccepté˜Ÿåˆ—æ»¡äº†ï¼Œsyné˜Ÿåˆ—ä¸­è¿æ¥å¹¶æ²¡æœ‰ä¸¢å¼ƒï¼Œè€Œä¸”æœåŠ¡ç«¯è¿‡ä¸€æ®µæ—¶é—´ä¼šé‡å‘syn+ack","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606465421,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1002005,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/4a/15/106eaaa8.jpg","nickname":"stackWarn","note":"","ucode":"89672E452DEBA5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":282434,"discussion_content":"å¦‚æœé…ç½®äº†abortå°±ç›´æ¥å‘resetäº†ï¼Œå°±çœŸçš„å…³äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591972068,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":220663,"user_name":"å°æ—coding","can_delete":false,"product_type":"c1","uid":1303210,"ip_address":"","ucode":"D57D7DBF260216","user_header":"https://static001.geekbang.org/account/avatar/00/13/e2/aa/9ddc6469.jpg","comment_is_top":false,"comment_ctime":1590306055,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"1590306055","product_id":100051201,"comment_content":"é™¶è¾‰è€å¸ˆï¼Œæˆ‘ç”¨ hping å‘½ä»¤æ¨¡æ‹Ÿ tcp æ´ªæ³›çš„æµ‹è¯•ï¼Œå‘ç°ä¸ç®¡æ€ä¹ˆè°ƒå¤§  tcp_max_syn_backlogï¼ŒæœåŠ¡ç«¯çš„ SYN_RECV çŠ¶æ€ä¸€ç›´æœ€å¤§åªæœ‰ 256 ä¸ªï¼Œæˆ‘æµ‹è¯•çš„ Linux å†…æ ¸æ˜¯ç‰ˆæœ¬ 2.6.32-431.el6.x86_64 <br><br>ç„¶ååœ¨ç½‘ä¸Šæœç´¢äº†ä¸‹èµ„æ–™ï¼Œhttps:&#47;&#47;www.cnblogs.com&#47;zengkefu&#47;p&#47;5606696.htmlï¼Œå‘ç° TCP åŠè¿æ¥é˜Ÿåˆ—çš„å¤§å°ä¸æ˜¯ç®€å•ç”± tcp_max_syn_backlog å†³å®šï¼Œè¿˜ä¼šè·Ÿ TCP å…¨è¿æ¥é˜Ÿåˆ—æœ‰å…³ç³»ã€‚","like_count":0,"discussions":[{"author":{"id":1002005,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/4a/15/106eaaa8.jpg","nickname":"stackWarn","note":"","ucode":"89672E452DEBA5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":282436,"discussion_content":"å¯¹çš„ å’Œsyn backlog ä»¥åŠ å½±å“å…¨è¿æ¥é˜Ÿåˆ—çš„ somaxconn å’Œåº”ç”¨ç¨‹åºbacklog ä¸‰ä¸ªå‚æ•°æœ‰å…³ã€‚å¯ä»¥ä½¿ç”¨systemtapæµ‹è¯•ä¸‹ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591972185,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":220617,"user_name":"ğŸ§é‡è¿”å½’é€”","can_delete":false,"product_type":"c1","uid":1991518,"ip_address":"","ucode":"33F748AE188B07","user_header":"https://static001.geekbang.org/account/avatar/00/1e/63/5e/799cd6dc.jpg","comment_is_top":false,"comment_ctime":1590294831,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1590294831","product_id":100051201,"comment_content":"è¿™èŠ‚æ”¶è·å¾ˆå¤šï¼<br>åº”ç”¨è¿æ¥æ•°ï¼ŒæœåŠ¡å™¨è¿›ç¨‹æ–‡ä»¶æ•°é‡å’Œè¿æ¥æ•°æ•°ï¼Œtcpè¶…æ—¶æ—¶é—´ç­‰ï¼›æ¯”è¾ƒæ˜æ˜¾çš„æ˜¯tcpè¶…æ—¶æ—¶é—´è®¾ç½®ï¼Œåº”ç”¨æœ‰æ›´é•¿æ—¶é—´å¯¹é”™è¯¯tcpçŠ¶æ€è¿›è¡ŒæŠ¥é”™æç¤ºã€‚","like_count":0},{"had_liked":false,"id":219317,"user_name":"å´”ä¼Ÿå","can_delete":false,"product_type":"c1","uid":1022452,"ip_address":"","ucode":"ACDEEDF2A10999","user_header":"https://static001.geekbang.org/account/avatar/00/0f/99/f4/e0484cac.jpg","comment_is_top":false,"comment_ctime":1589988081,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1589988081","product_id":100051201,"comment_content":"ç°åœ¨ç½‘ç»œä¸Štfoçš„è¿æ¥å¤šå—ï¼Œå å¤šå°‘æ¯”ç‡","like_count":0},{"had_liked":false,"id":218809,"user_name":"holly","can_delete":false,"product_type":"c1","uid":1609350,"ip_address":"","ucode":"9D57569ED81CBA","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/2rRMjRdMelicUoU5yXibENlYapdvPUCibOk8bGicyFoIW7IMxMqhicgelVphEmWFpMucVXjQjv5pdu6RgDkNiav0qUcw/132","comment_is_top":false,"comment_ctime":1589879417,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1589879417","product_id":100051201,"comment_content":"æˆ‘é›†ç¾¤ä¸­çš„ä¸€å°æœåŠ¡å™¨å‡ºç°äº†å¤§é‡çš„LAST_ACK,ä¸‰æ¬¡æ¡æ‰‹çœ‹äº†å¤šéè¿˜æ˜¯ä¸çŸ¥ä»ä½•å¤„å¼€å§‹åˆ†æã€‚ç”¨neststatæŸ¥çœ‹<br>LAST_ACK 2056<br>LISTEN 8<br>CLOSE_WAIT 10<br>ESTABLISHED 7273<br>FIN_WAIT1 1<br>FIN_WAIT2 3<br>SYN_SENT 2<br>TIME_WAIT 26<br>å…¶å®ƒæ­£å¸¸çš„æœåŠ¡å™¨ä¸­çš„ä¸€å°LAST_ACK 2056<br>LISTEN 8<br>CLOSE_WAIT 17<br>ESTABLISHED 7940<br>FIN_WAIT1 1<br>FIN_WAIT2 3<br>TIME_WAIT 56<br>æŸ¥æ‰¾èµ„æ–™è¯´æ ¹æ®TCPçŠ¶æ€å˜åŒ–è¿‡ç¨‹åˆ†æLAST_ACKæ˜¯å±äºä¸»åŠ¨è¿˜æ˜¯è¢«åŠ¨ï¼Œå¯æ˜¯è¯¥èµ„æ–™æ²¡è¯´æ€ä¹ˆæ ¹æ®tcpçŠ¶æ€å˜åŒ–è¿‡ç¨‹åˆ†æï¼Œåªæ˜¯ç»™å‡ºäº†æ˜¯ä¸»åŠ¨è¿˜æ˜¯è¢«åŠ¨çš„ç»“æœï¼Œå¸Œæœ›è€å¸ˆç»™ä¸ªæ€è·¯","like_count":0,"discussions":[{"author":{"id":1134399,"avatar":"https://static001.geekbang.org/account/avatar/00/11/4f/3f/56911dd3.jpg","nickname":"Summer","note":"","ucode":"7266767F72B02E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":297050,"discussion_content":"è€å¸ˆï¼Œæˆ‘çœ‹ä½ çš„å›¾ä¸­TCPä¸‰æ¬¡æ¡æ‰‹é˜¶æ®µåœ¨å®¢æˆ·ç«¯å›å¤æœåŠ¡ç«¯çš„SYNåŒ…æ—¶å°±å¯ä»¥å‘é€è¯·æ±‚æ•°æ®äº†æ˜¯å—ï¼Ÿæˆ‘åœ¨å…¶ä»–èµ„æ–™ä¸Šçœ‹åˆ°çš„æ˜¯ä¸‰æ¬¡æ¡æ‰‹é˜¶æ®µè¿˜æ²¡æœ‰å‘é€æ•°æ®è¯·æ±‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596761518,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}