{"id":131537,"title":"87 | Account服务","content":"<ul>\n<li>\n<p>代码：<a href=\"https://gitee.com/geektime-geekbang/staffjoy\">https://gitee.com/geektime-geekbang/staffjoy</a></p>\n</li>\n<li>\n<p>课件：<a href=\"https://pan.baidu.com/s/1Q7eP3yZ1Vm8J2nhle5RzTQ\">https://pan.baidu.com/s/1Q7eP3yZ1Vm8J2nhle5RzTQ</a> 提取码: 1aeh</p>\n</li>\n</ul>","comments":[{"had_liked":false,"id":148608,"user_name":"黑山老妖","can_delete":false,"product_type":"c3","uid":1115958,"ip_address":"","ucode":"A1659F99C5BE1E","user_header":"https://static001.geekbang.org/account/avatar/00/11/07/36/d677e741.jpg","comment_is_top":false,"comment_ctime":1573037846,"is_pvip":false,"replies":[{"id":57232,"content":"这个应该和编译器环境因素相关，javac编译的时候需要加参数-parameters，否则feign会找不到参数名而报错。其实在项目的父pom里头的maven-compiler-plugin里头已经加了&lt;arg&gt;-parameters&lt;&#47;arg&gt;，我这边编译测试没有问题，有些人会报你说的问题，估计这个参数没有启用，和环境有关。\n\n你可以尝试在javac编译的时候加上参数-parameters。\n\n参考：\nhttps:&#47;&#47;stackoverflow.com&#47;questions&#47;31845676&#47;how-to-compile-spring-boot-applications-with-java-8-parameter-flag\nhttps:&#47;&#47;stackoverflow.com&#47;questions&#47;44313482&#47;feign-client-with-spring-boot-requestparam-value-was-empty-on-parameter-0\n\n","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1573046200,"ip_address":"","comment_id":148608,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100031401,"comment_content":"Spring FeignClient 遇到的参数问题（RequestParam.value() was empty on parameter 0）。\n代码中是否需要加入这个配置，我加入了后，可以运行单元测试。老师，代码是否有问题，还是其他原因","like_count":3,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":473551,"discussion_content":"这个应该和编译器环境因素相关，javac编译的时候需要加参数-parameters，否则feign会找不到参数名而报错。其实在项目的父pom里头的maven-compiler-plugin里头已经加了&amp;lt;arg&amp;gt;-parameters&amp;lt;/arg&amp;gt;，我这边编译测试没有问题，有些人会报你说的问题，估计这个参数没有启用，和环境有关。\n\n你可以尝试在javac编译的时候加上参数-parameters。\n\n参考：\nhttps://stackoverflow.com/questions/31845676/how-to-compile-spring-boot-applications-with-java-8-parameter-flag\nhttps://stackoverflow.com/questions/44313482/feign-client-with-spring-boot-requestparam-value-was-empty-on-parameter-0\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573046200,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1023830,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/9f/56/31b65a01.jpg","nickname":"许_Paul","note":"","ucode":"5D7297F88E7337","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":249110,"discussion_content":"Lombok 没设置好，导致编译的时候没有get 方法，从而 Springboot start up运行时报错","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587910241,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":145225,"user_name":"Sruby","can_delete":false,"product_type":"c3","uid":1016232,"ip_address":"","ucode":"A7D1B93F41DA0F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/81/a8/559afe8b.jpg","comment_is_top":false,"comment_ctime":1572232955,"is_pvip":false,"replies":[{"id":56084,"content":"作为一个微服务演示案例，为保持简单易于理解，我没有在项目中引入复杂的分层，也没有引入太多XXO之类的对象分类。\n\n基本上就是三层+两类对象\n1. 底层是数据访问Repository，操作的对象称为数据模型对象(DMO)，是和持久化相关的对象。\n2. 上层是Controller，有一些验证逻辑，几乎没有业务逻辑。Controller层的输入输出称为DTO(数据传输对象)，因为这些对象是在网络上交互传输用的。注意request&#47;response也是属于DTO范畴。\n2. 中间有一个Service，相当于一个聚合层，有少量业务流程逻辑，上层和Controller交互，底层通过Repository操作数据库。Service层会做DTO和DMO的转换。\n\n课程第六章《服务测试设计和实践》，有解释分层和对象分类。\n","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1572265125,"ip_address":"","comment_id":145225,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100031401,"comment_content":"波波老师，能否说下各个层级的作用及领域对象使用的规则？比如controller层有dto也有request，两者的区别是什么？","like_count":2,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":472299,"discussion_content":"作为一个微服务演示案例，为保持简单易于理解，我没有在项目中引入复杂的分层，也没有引入太多XXO之类的对象分类。\n\n基本上就是三层+两类对象\n1. 底层是数据访问Repository，操作的对象称为数据模型对象(DMO)，是和持久化相关的对象。\n2. 上层是Controller，有一些验证逻辑，几乎没有业务逻辑。Controller层的输入输出称为DTO(数据传输对象)，因为这些对象是在网络上交互传输用的。注意request/response也是属于DTO范畴。\n2. 中间有一个Service，相当于一个聚合层，有少量业务流程逻辑，上层和Controller交互，底层通过Repository操作数据库。Service层会做DTO和DMO的转换。\n\n课程第六章《服务测试设计和实践》，有解释分层和对象分类。\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572265125,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1016232,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/81/a8/559afe8b.jpg","nickname":"Sruby","note":"","ucode":"A7D1B93F41DA0F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":40923,"discussion_content":"目前所在的项目组对于领域对象使用有些混乱，缺少明确的规范。就教学版来说，controller层使用的是dto，而且在对象属性使用注解就行校验，dto又会传递给service，所以校验应该是同时存在了controller和service两层。请问在实际项目中这两层的对象转换和参数校验是怎样？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572306030,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":278936,"user_name":"美好时光海苔","can_delete":false,"product_type":"c3","uid":1904626,"ip_address":"","ucode":"CD4637BFC8A7C6","user_header":"https://static001.geekbang.org/account/avatar/00/1d/0f/f2/3f3c0946.jpg","comment_is_top":false,"comment_ctime":1613468271,"is_pvip":false,"replies":[{"id":101504,"content":"课程做了简化仅支持英文。实际可以根据需要支持多语言，只要client端能够传递语言代码(或国家代码)，server端就可以根据语言代码给出面向特定语言的消息。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1613746672,"ip_address":"","comment_id":278936,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100031401,"comment_content":"老师，请问有考虑过对多语言的支持吗？比如面向用户的error message 应该是可以定制为多种语言的 ","like_count":1,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":515569,"discussion_content":"课程做了简化仅支持英文。实际可以根据需要支持多语言，只要client端能够传递语言代码(或国家代码)，server端就可以根据语言代码给出面向特定语言的消息。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1613746672,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":263405,"user_name":"翼","can_delete":false,"product_type":"c3","uid":1187681,"ip_address":"","ucode":"4F9398EF977162","user_header":"https://static001.geekbang.org/account/avatar/00/12/1f/61/580c62b5.jpg","comment_is_top":false,"comment_ctime":1606125950,"is_pvip":false,"replies":[{"id":95721,"content":"非常不错的源码分析，这样学习课程的收获会更大。后面会出一个规模较大的电商中台项目，基于Spring + GraphQL + Angular技术技术栈，请继续关注波波的后续课程。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1606317324,"ip_address":"","comment_id":263405,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100031401,"comment_content":"我在csdn上对波波老师发的源码进行了进一步的解析，有兴趣的老哥可以去看看，给点建议呀，\nhttps:&#47;&#47;blog.csdn.net&#47;qq_42482205&#47;article&#47;details&#47;109713556","like_count":1,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":510175,"discussion_content":"非常不错的源码分析，这样学习课程的收获会更大。后面会出一个规模较大的电商中台项目，基于Spring + GraphQL + Angular技术技术栈，请继续关注波波的后续课程。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606317324,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":135820,"user_name":"平凡之路","can_delete":false,"product_type":"c3","uid":1669273,"ip_address":"","ucode":"96CE12339BD5FD","user_header":"https://static001.geekbang.org/account/avatar/00/19/78/99/6060eb2d.jpg","comment_is_top":false,"comment_ctime":1569285941,"is_pvip":false,"replies":[{"id":52115,"content":"lombok插件在IDE里头装了码？","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1569328393,"ip_address":"","comment_id":135820,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100031401,"comment_content":"你好，为什么我从git拉下来的代码很多类不全","like_count":1,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468349,"discussion_content":"lombok插件在IDE里头装了码？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569328393,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1669273,"avatar":"https://static001.geekbang.org/account/avatar/00/19/78/99/6060eb2d.jpg","nickname":"平凡之路","note":"","ucode":"96CE12339BD5FD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":20568,"discussion_content":"波波老师，看了你的视频确实提升了不少👍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569329449,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1669273,"avatar":"https://static001.geekbang.org/account/avatar/00/19/78/99/6060eb2d.jpg","nickname":"平凡之路","note":"","ucode":"96CE12339BD5FD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":20566,"discussion_content":"额，我的锅😂","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569329381,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":343606,"user_name":"Baron  Keller","can_delete":false,"product_type":"c3","uid":1482787,"ip_address":"","ucode":"1C5E1B35900D2B","user_header":"https://static001.geekbang.org/account/avatar/00/16/a0/23/cedce566.jpg","comment_is_top":false,"comment_ctime":1650949998,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100031401,"comment_content":"老师，有个对dto命名的细节问题想问一下，看到dto包下，有的是以dto结尾的类，有的是以request结尾的类，这样不同的命名是处于怎样的考虑呢？","like_count":0},{"had_liked":false,"id":310045,"user_name":"Geek_bbb663","can_delete":false,"product_type":"c3","uid":2734462,"ip_address":"","ucode":"384250A90D642E","user_header":"","comment_is_top":false,"comment_ctime":1630467065,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100031401,"comment_content":"老师，在k8s环境下，staffjoy微服务通过feign进行互相调用，服务节点的负载均衡是用ingress实现，服务发现是用的service? ","like_count":0},{"had_liked":false,"id":148564,"user_name":"黑山老妖","can_delete":false,"product_type":"c3","uid":1115958,"ip_address":"","ucode":"A1659F99C5BE1E","user_header":"https://static001.geekbang.org/account/avatar/00/11/07/36/d677e741.jpg","comment_is_top":false,"comment_ctime":1573031631,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100031401,"comment_content":"AccountClient 这个接口不用被继承实现吗？我启动单元测试时说无法被装载","like_count":0}]}