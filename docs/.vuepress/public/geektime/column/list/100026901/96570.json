{"id":96570,"title":"06 | Python â€œé»‘ç®±â€ï¼šè¾“å…¥ä¸è¾“å‡º","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯æ™¯éœ„ã€‚</p><p>ä¸–çºªä¹‹äº¤çš„è®ºå›ä¸Šæ›¾æœ‰ä¸€å¥æµè¡Œè¯­ï¼šåœ¨äº’è”ç½‘ä¸Šï¼Œæ²¡äººçŸ¥é“ä½ æ˜¯ä¸€æ¡ç‹—ã€‚äº’è”ç½‘åˆšåˆšå…´èµ·æ—¶ï¼Œä¸€æ ¹ç½‘çº¿é“¾æ¥åˆ°ä½ å®¶ï¼Œä¿¡æ¯é€šè¿‡è¿™æ¡é«˜é€Ÿçº¿ç¼†ç›´è¾¾ä½ çš„å±å¹•ï¼Œä½ é€šè¿‡é”®ç›˜é£é€Ÿå›åº”æœ‹å‹çš„æ¶ˆæ¯ï¼Œä¿¡æ¯å†æ¬¡é€šè¿‡ç½‘çº¿é£å…¥é”™ç»¼å¤æ‚çš„è™šæ‹Ÿä¸–ç•Œï¼Œå†è¿›å…¥æœ‹å‹å®¶ã€‚æŠ½è±¡æ¥çœ‹ï¼Œä¸€å°å°çš„ç”µè„‘å°±æ˜¯ä¸€ä¸ªä¸ªé»‘ç®±ï¼Œé»‘ç®±æœ‰äº†è¾“å…¥å’Œè¾“å‡ºï¼Œå°±æ‹¥æœ‰äº†å›¾çµæœºè¿ä½œçš„å¿…è¦æ¡ä»¶ã€‚</p><p>Python ç¨‹åºä¹Ÿæ˜¯ä¸€ä¸ªé»‘ç®±ï¼šé€šè¿‡è¾“å…¥æµå°†æ•°æ®é€è¾¾ï¼Œé€šè¿‡è¾“å‡ºæµå°†å¤„ç†åçš„æ•°æ®é€å‡ºï¼Œå¯èƒ½ Python è§£é‡Šå™¨åé¢è—äº†ä¸€ä¸ªäººï¼Œè¿˜æ˜¯ä¸€ä¸ªå²è±å“²æ—ï¼ŸNo one caresã€‚</p><p>å¥½äº†åºŸè¯ä¸å¤šè¯´ï¼Œä»Šå¤©æˆ‘ä»¬å°±ç”±æµ…åŠæ·±è®²è®² Python çš„è¾“å…¥å’Œè¾“å‡ºã€‚</p><h2>è¾“å…¥è¾“å‡ºåŸºç¡€</h2><p>æœ€ç®€å•ç›´æ¥çš„è¾“å…¥æ¥è‡ªé”®ç›˜æ“ä½œï¼Œæ¯”å¦‚ä¸‹é¢è¿™ä¸ªä¾‹å­ã€‚</p><pre><code>name = input('your name:')\ngender = input('you are a boy?(y/n)')\n\n###### è¾“å…¥ ######\nyour name:Jack\nyou are a boy?\n\nwelcome_str = 'Welcome to the matrix {prefix} {name}.'\nwelcome_dic = {\n    'prefix': 'Mr.' if gender == 'y' else 'Mrs',\n    'name': name\n}\n\nprint('authorizing...')\nprint(welcome_str.format(**welcome_dic))\n\n########## è¾“å‡º ##########\nauthorizing...\nWelcome to the matrix Mr. Jack.\n</code></pre><p>input() å‡½æ•°æš‚åœç¨‹åºè¿è¡Œï¼ŒåŒæ—¶ç­‰å¾…é”®ç›˜è¾“å…¥ï¼›ç›´åˆ°å›è½¦è¢«æŒ‰ä¸‹ï¼Œå‡½æ•°çš„å‚æ•°å³ä¸ºæç¤ºè¯­ï¼Œè¾“å…¥çš„ç±»å‹æ°¸è¿œæ˜¯å­—ç¬¦ä¸²å‹ï¼ˆstrï¼‰ã€‚æ³¨æ„ï¼Œåˆå­¦è€…åœ¨è¿™é‡Œå¾ˆå®¹æ˜“çŠ¯é”™ï¼Œä¸‹é¢çš„ä¾‹å­æˆ‘ä¼šè®²åˆ°ã€‚print() å‡½æ•°åˆ™æ¥å—å­—ç¬¦ä¸²ã€æ•°å­—ã€å­—å…¸ã€åˆ—è¡¨ç”šè‡³ä¸€äº›è‡ªå®šä¹‰ç±»çš„è¾“å‡ºã€‚</p><p>æˆ‘ä»¬å†æ¥çœ‹ä¸‹é¢è¿™ä¸ªä¾‹å­ã€‚</p><pre><code>a = input()\n1\nb = input()\n2\n\nprint('a + b = {}'.format(a + b))\n########## è¾“å‡º ##############\na + b = 12\nprint('type of a is {}, type of b is {}'.format(type(a), type(b)))\n########## è¾“å‡º ##############\ntype of a is &lt;class 'str'&gt;, type of b is &lt;class 'str'&gt;\nprint('a + b = {}'.format(int(a) + int(b)))\n########## è¾“å‡º ##############\na + b = 3\n</code></pre><p>è¿™é‡Œæ³¨æ„ï¼ŒæŠŠ str å¼ºåˆ¶è½¬æ¢ä¸º int è¯·ç”¨ int()ï¼Œè½¬ä¸ºæµ®ç‚¹æ•°è¯·ç”¨ float()ã€‚è€Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨å¼ºåˆ¶è½¬æ¢æ—¶ï¼Œè¯·è®°å¾—åŠ ä¸Š try exceptï¼ˆå³é”™è¯¯å’Œå¼‚å¸¸å¤„ç†ï¼Œä¸“æ åé¢æ–‡ç« ä¼šè®²åˆ°ï¼‰ã€‚</p><!-- [[[read_end]]] --><p>Python å¯¹ int ç±»å‹æ²¡æœ‰æœ€å¤§é™åˆ¶ï¼ˆç›¸æ¯”ä¹‹ä¸‹ï¼Œ C++ çš„ int æœ€å¤§ä¸º 2147483647ï¼Œè¶…è¿‡è¿™ä¸ªæ•°å­—ä¼šäº§ç”Ÿæº¢å‡ºï¼‰ï¼Œä½†æ˜¯å¯¹ float ç±»å‹ä¾ç„¶æœ‰ç²¾åº¦é™åˆ¶ã€‚è¿™äº›ç‰¹ç‚¹ï¼Œé™¤äº†åœ¨ä¸€äº›ç®—æ³•ç«èµ›ä¸­è¦æ³¨æ„ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä¹Ÿè¦æ—¶åˆ»æé˜²ï¼Œé¿å…å› ä¸ºå¯¹è¾¹ç•Œæ¡ä»¶åˆ¤æ–­ä¸æ¸…è€Œé€ æˆ bug ç”šè‡³ 0dayï¼ˆå±é‡å®‰å…¨æ¼æ´ï¼‰ã€‚</p><p>æˆ‘ä»¬å›æœ›ä¸€ä¸‹å¸åœˆã€‚2018å¹´4æœˆ23æ—¥ä¸­åˆ11ç‚¹30åˆ†å·¦å³ï¼ŒBEC ä»£å¸æ™ºèƒ½åˆçº¦è¢«é»‘å®¢æ”»å‡»ã€‚é»‘å®¢åˆ©ç”¨æ•°æ®æº¢å‡ºçš„æ¼æ´ï¼Œæ”»å‡»ä¸ç¾å›¾åˆä½œçš„å…¬å¸ç¾é“¾ BEC çš„æ™ºèƒ½åˆçº¦ï¼ŒæˆåŠŸåœ°å‘ä¸¤ä¸ªåœ°å€è½¬å‡ºäº†å¤©é‡çº§åˆ«çš„ BEC ä»£å¸ï¼Œå¯¼è‡´å¸‚åœºä¸Šçš„æµ·é‡ BEC è¢«æŠ›å”®ï¼Œè¯¥æ•°å­—è´§å¸çš„ä»·å€¼ä¹Ÿå‡ è¿‘å½’é›¶ï¼Œç»™ BEC å¸‚åœºäº¤æ˜“å¸¦æ¥äº†æ¯ç­æ€§çš„æ‰“å‡»ã€‚</p><p>ç”±æ­¤å¯è§ï¼Œè™½ç„¶è¾“å…¥è¾“å‡ºå’Œç±»å‹å¤„ç†äº‹æƒ…ç®€å•ï¼Œä½†æˆ‘ä»¬ä¸€å®šè¦æ…ä¹‹åˆæ…ã€‚æ¯•ç«Ÿç›¸å½“æ¯”ä¾‹çš„å®‰å…¨æ¼æ´ï¼Œéƒ½æ¥è‡ªéšæ„çš„ I/O å¤„ç†ã€‚</p><h2>æ–‡ä»¶è¾“å…¥è¾“å‡º</h2><p>å‘½ä»¤è¡Œçš„è¾“å…¥è¾“å‡ºï¼Œåªæ˜¯ Python äº¤äº’çš„æœ€åŸºæœ¬æ–¹å¼ï¼Œé€‚ç”¨ä¸€äº›ç®€å•å°ç¨‹åºçš„äº¤äº’ã€‚è€Œç”Ÿäº§çº§åˆ«çš„ Python ä»£ç ï¼Œå¤§éƒ¨åˆ† I/O åˆ™æ¥è‡ªäºæ–‡ä»¶ã€ç½‘ç»œã€å…¶ä»–è¿›ç¨‹çš„æ¶ˆæ¯ç­‰ç­‰ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥è¯¦ç»†åˆ†æä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶è¯»å†™ã€‚å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶in.txtï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><pre><code>I have a dream that my four little children will one day live in a nation where they will not be judged by the color of their skin but by the content of their character. I have a dream today.\n\nI have a dream that one day down in Alabama, with its vicious racists, . . . one day right there in Alabama little black boys and black girls will be able to join hands with little white boys and white girls as sisters and brothers. I have a dream today.\n\nI have a dream that one day every valley shall be exalted, every hill and mountain shall be made low, the rough places will be made plain, and the crooked places will be made straight, and the glory of the Lord shall be revealed, and all flesh shall see it together.\n\nThis is our hope. . . With this faith we will be able to hew out of the mountain of despair a stone of hope. With this faith we will be able to transform the jangling discords of our nation into a beautiful symphony of brotherhood. With this faith we will be able to work together, to pray together, to struggle together, to go to jail together, to stand up for freedom together, knowing that we will be free one day. . . .\n\nAnd when this happens, and when we allow freedom ring, when we let it ring from every village and every hamlet, from every state and every city, we will be able to speed up that day when all of God's children, black men and white men, Jews and Gentiles, Protestants and Catholics, will be able to join hands and sing in the words of the old Negro spiritual: &quot;Free at last! Free at last! Thank God Almighty, we are free at last!&quot;\n</code></pre><p>å¥½ï¼Œè®©æˆ‘ä»¬æ¥åšä¸€ä¸ªç®€å•çš„ NLPï¼ˆè‡ªç„¶è¯­è¨€å¤„ç†ï¼‰ä»»åŠ¡ã€‚å¦‚æœä½ å¯¹æ­¤ä¸å¤ªäº†è§£ä¹Ÿæ²¡æœ‰å½±å“ï¼Œæˆ‘ä¼šå¸¦ä½ ä¸€æ­¥æ­¥å®Œæˆè¿™ä¸ªä»»åŠ¡ã€‚</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬è¦æ¸…æ¥šNLPä»»åŠ¡çš„åŸºæœ¬æ­¥éª¤ï¼Œä¹Ÿå°±æ˜¯ä¸‹é¢çš„å››æ­¥ï¼š</p><ol>\n<li>\n<p>è¯»å–æ–‡ä»¶ï¼›</p>\n</li>\n<li>\n<p>å»é™¤æ‰€æœ‰æ ‡ç‚¹ç¬¦å·å’Œæ¢è¡Œç¬¦ï¼Œå¹¶æŠŠæ‰€æœ‰å¤§å†™å˜æˆå°å†™ï¼›</p>\n</li>\n<li>\n<p>åˆå¹¶ç›¸åŒçš„è¯ï¼Œç»Ÿè®¡æ¯ä¸ªè¯å‡ºç°çš„é¢‘ç‡ï¼Œå¹¶æŒ‰ç…§è¯é¢‘ä»å¤§åˆ°å°æ’åºï¼›</p>\n</li>\n<li>\n<p>å°†ç»“æœæŒ‰è¡Œè¾“å‡ºåˆ°æ–‡ä»¶ out.txtã€‚</p>\n</li>\n</ol><p>ä½ å¯ä»¥è‡ªå·±å…ˆæ€è€ƒä¸€ä¸‹ï¼Œç”¨Pythonå¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜ã€‚è¿™é‡Œï¼Œæˆ‘ä¹Ÿç»™å‡ºäº†æˆ‘çš„ä»£ç ï¼Œå¹¶é™„æœ‰è¯¦ç»†çš„æ³¨é‡Šã€‚æˆ‘ä»¬ä¸€èµ·æ¥çœ‹ä¸‹è¿™æ®µä»£ç ã€‚</p><pre><code>import re\n\n# ä½ ä¸ç”¨å¤ªå…³å¿ƒè¿™ä¸ªå‡½æ•°\ndef parse(text):\n    # ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼å»é™¤æ ‡ç‚¹ç¬¦å·å’Œæ¢è¡Œç¬¦\n    text = re.sub(r'[^\\w ]', ' ', text)\n\n    # è½¬ä¸ºå°å†™\n    text = text.lower()\n    \n    # ç”Ÿæˆæ‰€æœ‰å•è¯çš„åˆ—è¡¨\n    word_list = text.split(' ')\n    \n    # å»é™¤ç©ºç™½å•è¯\n    word_list = filter(None, word_list)\n    \n    # ç”Ÿæˆå•è¯å’Œè¯é¢‘çš„å­—å…¸\n    word_cnt = {}\n    for word in word_list:\n        if word not in word_cnt:\n            word_cnt[word] = 0\n        word_cnt[word] += 1\n    \n    # æŒ‰ç…§è¯é¢‘æ’åº\n    sorted_word_cnt = sorted(word_cnt.items(), key=lambda kv: kv[1], reverse=True)\n    \n    return sorted_word_cnt\n\nwith open('in.txt', 'r') as fin:\n    text = fin.read()\n\nword_and_freq = parse(text)\n\nwith open('out.txt', 'w') as fout:\n    for word, freq in word_and_freq:\n        fout.write('{} {}\\n'.format(word, freq))\n\n########## è¾“å‡º(çœç•¥è¾ƒé•¿çš„ä¸­é—´ç»“æœ) ##########\n\nand 15\nbe 13\nwill 11\nto 11\nthe 10\nof 10\na 8\nwe 8\nday 6\n\n...\n\nold 1\nnegro 1\nspiritual 1\nthank 1\ngod 1\nalmighty 1\nare 1\n</code></pre><p>ä½ ä¸ç”¨å¤ªå…³å¿ƒ parse() å‡½æ•°çš„å…·ä½“å®ç°ï¼Œä½ åªéœ€è¦çŸ¥é“ï¼Œå®ƒåšçš„äº‹æƒ…æ˜¯æŠŠè¾“å…¥çš„ text å­—ç¬¦ä¸²ï¼Œè½¬åŒ–ä¸ºæˆ‘ä»¬éœ€è¦çš„æ’åºåçš„è¯é¢‘ç»Ÿè®¡ã€‚è€Œ sorted_word_cnt åˆ™æ˜¯ä¸€ä¸ªäºŒå…ƒç»„çš„åˆ—è¡¨ï¼ˆlist of tuplesï¼‰ã€‚</p><p>é¦–å…ˆæˆ‘ä»¬éœ€è¦å…ˆäº†è§£ä¸€ä¸‹ï¼Œè®¡ç®—æœºä¸­æ–‡ä»¶è®¿é—®çš„åŸºç¡€çŸ¥è¯†ã€‚äº‹å®ä¸Šï¼Œè®¡ç®—æœºå†…æ ¸ï¼ˆkernelï¼‰å¯¹æ–‡ä»¶çš„å¤„ç†ç›¸å¯¹æ¯”è¾ƒå¤æ‚ï¼Œæ¶‰åŠåˆ°å†…æ ¸æ¨¡å¼ã€è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿã€é”å’ŒæŒ‡é’ˆç­‰ä¸€ç³»åˆ—æ¦‚å¿µï¼Œè¿™äº›å†…å®¹æˆ‘ä¸ä¼šæ·±å…¥è®²è§£ï¼Œæˆ‘åªè¯´ä¸€äº›åŸºç¡€ä½†è¶³å¤Ÿä½¿ç”¨çš„çŸ¥è¯†ã€‚</p><p>æˆ‘ä»¬å…ˆè¦ç”¨open() å‡½æ•°æ‹¿åˆ°æ–‡ä»¶çš„æŒ‡é’ˆã€‚å…¶ä¸­ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šæ–‡ä»¶ä½ç½®ï¼ˆç›¸å¯¹ä½ç½®æˆ–è€…ç»å¯¹ä½ç½®ï¼‰ï¼›ç¬¬äºŒä¸ªå‚æ•°ï¼Œå¦‚æœæ˜¯ <code>'r' </code>è¡¨ç¤ºè¯»å–ï¼Œå¦‚æœæ˜¯<code>'w'</code> åˆ™è¡¨ç¤ºå†™å…¥ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ç”¨ <code>'rw'</code> ï¼Œè¡¨ç¤ºè¯»å†™éƒ½è¦ã€‚a åˆ™æ˜¯ä¸€ä¸ªä¸å¤ªå¸¸ç”¨ï¼ˆä½†ä¹Ÿå¾ˆæœ‰ç”¨ï¼‰çš„å‚æ•°ï¼Œè¡¨ç¤ºè¿½åŠ ï¼ˆappendï¼‰ï¼Œè¿™æ ·æ‰“å¼€çš„æ–‡ä»¶ï¼Œå¦‚æœéœ€è¦å†™å…¥ï¼Œä¼šä»åŸå§‹æ–‡ä»¶çš„æœ€æœ«å°¾å¼€å§‹å†™å…¥ã€‚</p><p>è¿™é‡Œæˆ‘æ’ä¸€å¥ï¼Œåœ¨ Facebook çš„å·¥ä½œä¸­ï¼Œä»£ç æƒé™ç®¡ç†éå¸¸é‡è¦ã€‚å¦‚æœä½ åªéœ€è¦è¯»å–æ–‡ä»¶ï¼Œå°±ä¸è¦è¯·æ±‚å†™å…¥æƒé™ã€‚è¿™æ ·åœ¨æŸç§ç¨‹åº¦ä¸Šå¯ä»¥é™ä½ bug å¯¹æ•´ä¸ªç³»ç»Ÿå¸¦æ¥çš„é£é™©ã€‚</p><p>å¥½ï¼Œå›åˆ°æˆ‘ä»¬çš„è¯é¢˜ã€‚åœ¨æ‹¿åˆ°æŒ‡é’ˆåï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ read() å‡½æ•°ï¼Œæ¥è¯»å–æ–‡ä»¶çš„å…¨éƒ¨å†…å®¹ã€‚ä»£ç  text = fin.read() ï¼Œå³è¡¨ç¤ºæŠŠæ–‡ä»¶æ‰€æœ‰å†…å®¹è¯»å–åˆ°å†…å­˜ä¸­ï¼Œå¹¶èµ‹å€¼ç»™å˜é‡ textã€‚è¿™ä¹ˆåšè‡ªç„¶ä¹Ÿæ˜¯æœ‰åˆ©æœ‰å¼Šï¼š</p><ul>\n<li>\n<p>ä¼˜ç‚¹æ˜¯æ–¹ä¾¿ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿åœ°è°ƒç”¨ parse å‡½æ•°è¿›è¡Œåˆ†æï¼›</p>\n</li>\n<li>\n<p>ç¼ºç‚¹æ˜¯å¦‚æœæ–‡ä»¶è¿‡å¤§ï¼Œä¸€æ¬¡æ€§è¯»å–å¯èƒ½é€ æˆå†…å­˜å´©æºƒã€‚</p>\n</li>\n</ul><p>è¿™æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ç»™ read æŒ‡å®šå‚æ•° size ï¼Œç”¨æ¥è¡¨ç¤ºè¯»å–çš„æœ€å¤§é•¿åº¦ã€‚è¿˜å¯ä»¥é€šè¿‡ readline() å‡½æ•°ï¼Œæ¯æ¬¡è¯»å–ä¸€è¡Œï¼Œè¿™ç§åšæ³•å¸¸ç”¨äºæ•°æ®æŒ–æ˜ï¼ˆData Miningï¼‰ä¸­çš„æ•°æ®æ¸…æ´—ï¼Œåœ¨å†™ä¸€äº›å°çš„ç¨‹åºæ—¶éå¸¸è½»ä¾¿ã€‚å¦‚æœæ¯è¡Œä¹‹é—´æ²¡æœ‰å…³è”ï¼Œè¿™ç§åšæ³•ä¹Ÿå¯ä»¥é™ä½å†…å­˜çš„å‹åŠ›ã€‚è€Œwrite() å‡½æ•°ï¼Œå¯ä»¥æŠŠå‚æ•°ä¸­çš„å­—ç¬¦ä¸²è¾“å‡ºåˆ°æ–‡ä»¶ä¸­ï¼Œä¹Ÿå¾ˆå®¹æ˜“ç†è§£ã€‚</p><p>è¿™é‡Œæˆ‘éœ€è¦ç®€å•æä¸€ä¸‹ with è¯­å¥ï¼ˆåæ–‡ä¼šè¯¦ç»†è®²åˆ°ï¼‰ã€‚open() å‡½æ•°å¯¹åº”äº close() å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä½ æ‰“å¼€äº†æ–‡ä»¶ï¼Œåœ¨å®Œæˆè¯»å–ä»»åŠ¡åï¼Œå°±åº”è¯¥ç«‹åˆ»å…³æ‰å®ƒã€‚è€Œå¦‚æœä½ ä½¿ç”¨äº† with è¯­å¥ï¼Œå°±ä¸éœ€è¦æ˜¾å¼è°ƒç”¨ close()ã€‚åœ¨ with çš„è¯­å¢ƒä¸‹ä»»åŠ¡æ‰§è¡Œå®Œæ¯•åï¼Œclose() å‡½æ•°ä¼šè¢«è‡ªåŠ¨è°ƒç”¨ï¼Œä»£ç ä¹Ÿç®€æ´å¾ˆå¤šã€‚</p><p>æœ€åéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ‰€æœ‰ I/O éƒ½åº”è¯¥è¿›è¡Œé”™è¯¯å¤„ç†ã€‚å› ä¸º I/O æ“ä½œå¯èƒ½ä¼šæœ‰å„ç§å„æ ·çš„æƒ…å†µå‡ºç°ï¼Œè€Œä¸€ä¸ªå¥å£®ï¼ˆrobustï¼‰çš„ç¨‹åºï¼Œéœ€è¦èƒ½åº”å¯¹å„ç§æƒ…å†µçš„å‘ç”Ÿï¼Œè€Œä¸åº”è¯¥å´©æºƒï¼ˆæ•…æ„è®¾è®¡çš„æƒ…å†µé™¤å¤–ï¼‰ã€‚</p><h2>JSON åºåˆ—åŒ–ä¸å®æˆ˜</h2><p>æœ€åï¼Œæˆ‘æ¥è®²ä¸€ä¸ªå’Œå®é™…åº”ç”¨å¾ˆè´´è¿‘çš„çŸ¥è¯†ç‚¹ã€‚</p><p>JSONï¼ˆJavaScript Object Notationï¼‰æ˜¯ä¸€ç§è½»é‡çº§çš„æ•°æ®äº¤æ¢æ ¼å¼ï¼Œå®ƒçš„è®¾è®¡æ„å›¾æ˜¯æŠŠæ‰€æœ‰äº‹æƒ…éƒ½ç”¨è®¾è®¡çš„å­—ç¬¦ä¸²æ¥è¡¨ç¤ºï¼Œè¿™æ ·æ—¢æ–¹ä¾¿åœ¨äº’è”ç½‘ä¸Šä¼ é€’ä¿¡æ¯ï¼Œä¹Ÿæ–¹ä¾¿äººè¿›è¡Œé˜…è¯»ï¼ˆç›¸æ¯”ä¸€äº› binary çš„åè®®ï¼‰ã€‚JSON åœ¨å½“ä»Šäº’è”ç½‘ä¸­åº”ç”¨éå¸¸å¹¿æ³›ï¼Œä¹Ÿæ˜¯æ¯ä¸€ä¸ªç”¨ Pythonç¨‹åºå‘˜åº”å½“ç†Ÿç»ƒæŒæ¡çš„æŠ€èƒ½ç‚¹ã€‚</p><p>è®¾æƒ³ä¸€ä¸ªæƒ…æ™¯ï¼Œä½ è¦å‘äº¤æ˜“æ‰€è´­ä¹°ä¸€å®šæ•°é¢çš„è‚¡ç¥¨ã€‚é‚£ä¹ˆï¼Œä½ éœ€è¦æäº¤è‚¡ç¥¨ä»£ç ã€æ–¹å‘ï¼ˆä¹°å…¥/å–å‡ºï¼‰ã€è®¢å•ç±»å‹ï¼ˆå¸‚ä»·/é™ä»·ï¼‰ã€ä»·æ ¼ï¼ˆå¦‚æœæ˜¯é™ä»·å•ï¼‰ã€æ•°é‡ç­‰ä¸€ç³»åˆ—å‚æ•°ï¼Œè€Œè¿™äº›æ•°æ®é‡Œï¼Œæœ‰å­—ç¬¦ä¸²ï¼Œæœ‰æ•´æ•°ï¼Œæœ‰æµ®ç‚¹æ•°ï¼Œç”šè‡³è¿˜æœ‰å¸ƒå°”å‹å˜é‡ï¼Œå…¨éƒ¨æ··åœ¨ä¸€èµ·å¹¶ä¸æ–¹ä¾¿äº¤æ˜“æ‰€è§£åŒ…ã€‚</p><p>é‚£è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ</p><p>å…¶å®ï¼Œæˆ‘ä»¬è¦è®²çš„JSON ï¼Œæ­£èƒ½è§£å†³è¿™ä¸ªåœºæ™¯ã€‚ä½ å¯ä»¥æŠŠå®ƒç®€å•åœ°ç†è§£ä¸ºä¸¤ç§é»‘ç®±ï¼š</p><ul>\n<li>\n<p>ç¬¬ä¸€ç§ï¼Œè¾“å…¥è¿™äº›æ‚ä¸ƒæ‚å…«çš„ä¿¡æ¯ï¼Œæ¯”å¦‚Python å­—å…¸ï¼Œè¾“å‡ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼›</p>\n</li>\n<li>\n<p>ç¬¬äºŒç§ï¼Œè¾“å…¥è¿™ä¸ªå­—ç¬¦ä¸²ï¼Œå¯ä»¥è¾“å‡ºåŒ…å«åŸå§‹ä¿¡æ¯çš„ Python å­—å…¸ã€‚</p>\n</li>\n</ul><p>å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p><pre><code>import json\n\nparams = {\n    'symbol': '123456',\n    'type': 'limit',\n    'price': 123.4,\n    'amount': 23\n}\n\nparams_str = json.dumps(params)\n\nprint('after json serialization')\nprint('type of params_str = {}, params_str = {}'.format(type(params_str), params))\n\noriginal_params = json.loads(params_str)\n\nprint('after json deserialization')\nprint('type of original_params = {}, original_params = {}'.format(type(original_params), original_params))\n\n########## è¾“å‡º ##########\n\nafter json serialization\ntype of params_str = &lt;class 'str'&gt;, params_str = {'symbol': '123456', 'type': 'limit', 'price': 123.4, 'amount': 23}\nafter json deserialization\ntype of original_params = &lt;class 'dict'&gt;, original_params = {'symbol': '123456', 'type': 'limit', 'price': 123.4, 'amount': 23}\n</code></pre><p>å…¶ä¸­ï¼Œ</p><ul>\n<li>\n<p>json.dumps() è¿™ä¸ªå‡½æ•°ï¼Œæ¥å— Python çš„åŸºæœ¬æ•°æ®ç±»å‹ï¼Œç„¶åå°†å…¶åºåˆ—åŒ–ä¸º stringï¼›</p>\n</li>\n<li>\n<p>è€Œjson.loads() è¿™ä¸ªå‡½æ•°ï¼Œæ¥å—ä¸€ä¸ªåˆæ³•å­—ç¬¦ä¸²ï¼Œç„¶åå°†å…¶ååºåˆ—åŒ–ä¸º Python çš„åŸºæœ¬æ•°æ®ç±»å‹ã€‚</p>\n</li>\n</ul><p>æ˜¯ä¸æ˜¯å¾ˆç®€å•å‘¢ï¼Ÿ</p><p>ä¸è¿‡è¿˜æ˜¯é‚£å¥è¯ï¼Œè¯·è®°å¾—åŠ ä¸Šé”™è¯¯å¤„ç†ã€‚ä¸ç„¶ï¼Œå“ªæ€•åªæ˜¯ç»™ json.loads() å‘é€äº†ä¸€ä¸ªéæ³•å­—ç¬¦ä¸²ï¼Œè€Œä½ æ²¡æœ‰ catch åˆ°ï¼Œç¨‹åºå°±ä¼šå´©æºƒäº†ã€‚</p><p>åˆ°è¿™ä¸€æ­¥ï¼Œä½ å¯èƒ½ä¼šæƒ³ï¼Œå¦‚æœæˆ‘è¦è¾“å‡ºå­—ç¬¦ä¸²åˆ°æ–‡ä»¶ï¼Œæˆ–è€…ä»æ–‡ä»¶ä¸­è¯»å–JSONå­—ç¬¦ä¸²ï¼Œåˆè¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ</p><p>æ˜¯çš„ï¼Œä½ ä»ç„¶å¯ä»¥ä½¿ç”¨ä¸Šé¢æåˆ°çš„ open() å’Œ read()/write() ï¼Œå…ˆå°†å­—ç¬¦ä¸²è¯»å–/è¾“å‡ºåˆ°å†…å­˜ï¼Œå†è¿›è¡ŒJSONç¼–ç /è§£ç ï¼Œå½“ç„¶è¿™æœ‰ç‚¹éº»çƒ¦ã€‚</p><pre><code>import json\n\nparams = {\n    'symbol': '123456',\n    'type': 'limit',\n    'price': 123.4,\n    'amount': 23\n}\n\nwith open('params.json', 'w') as fout:\n    params_str = json.dump(params, fout)\n\nwith open('params.json', 'r') as fin:\n    original_params = json.load(fin)\n\nprint('after json deserialization')\nprint('type of original_params = {}, original_params = {}'.format(type(original_params), original_params))\n\n########## è¾“å‡º ##########\n\nafter json deserialization\ntype of original_params = &lt;class 'dict'&gt;, original_params = {'symbol': '123456', 'type': 'limit', 'price': 123.4, 'amount': 23}\n</code></pre><p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±ç®€å•æ¸…æ™°åœ°å®ç°äº†è¯»å†™ JSON å­—ç¬¦ä¸²çš„è¿‡ç¨‹ã€‚å½“å¼€å‘ä¸€ä¸ªç¬¬ä¸‰æ–¹åº”ç”¨ç¨‹åºæ—¶ï¼Œä½ å¯ä»¥é€šè¿‡ JSON å°†ç”¨æˆ·çš„ä¸ªäººé…ç½®è¾“å‡ºåˆ°æ–‡ä»¶ï¼Œæ–¹ä¾¿ä¸‹æ¬¡ç¨‹åºå¯åŠ¨æ—¶è‡ªåŠ¨è¯»å–ã€‚è¿™ä¹Ÿæ˜¯ç°åœ¨æ™®éè¿ç”¨çš„æˆç†Ÿåšæ³•ã€‚</p><p>é‚£ä¹ˆ JSON æ˜¯å”¯ä¸€çš„é€‰æ‹©å—ï¼Ÿæ˜¾ç„¶ä¸æ˜¯ï¼Œå®ƒåªæ˜¯è½»é‡çº§åº”ç”¨ä¸­æœ€æ–¹ä¾¿çš„é€‰æ‹©ä¹‹ä¸€ã€‚æ®æˆ‘æ‰€çŸ¥ï¼Œåœ¨ Googleï¼Œæœ‰ç±»ä¼¼çš„å·¥å…·å«åšProtocol Bufferï¼Œå½“ç„¶ï¼ŒGoogle å·²ç»å®Œå…¨å¼€æºäº†è¿™ä¸ªå·¥å…·ï¼Œä½ å¯ä»¥è‡ªå·±äº†è§£ä¸€ä¸‹ä½¿ç”¨æ–¹æ³•ã€‚</p><p>ç›¸æ¯”äº  JSONï¼Œå®ƒçš„ä¼˜ç‚¹æ˜¯ç”Ÿæˆä¼˜åŒ–åçš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå› æ­¤æ€§èƒ½æ›´å¥½ã€‚ä½†ä¸æ­¤åŒæ—¶ï¼Œç”Ÿæˆçš„äºŒè¿›åˆ¶åºåˆ—ï¼Œæ˜¯ä¸èƒ½ç›´æ¥é˜…è¯»çš„ã€‚å®ƒåœ¨ TensorFlow ç­‰å¾ˆå¤šå¯¹æ€§èƒ½æœ‰è¦æ±‚çš„ç³»ç»Ÿä¸­éƒ½æœ‰å¹¿æ³›çš„åº”ç”¨ã€‚</p><h2>æ€»ç»“</h2><p>è¿™èŠ‚è¯¾ï¼Œæˆ‘ä»¬ä¸»è¦å­¦ä¹ äº† Python çš„æ™®é€š I/Oå’Œæ–‡ä»¶ I/Oï¼ŒåŒæ—¶äº†è§£äº† JSON åºåˆ—åŒ–çš„åŸºæœ¬çŸ¥è¯†ï¼Œå¹¶é€šè¿‡å…·ä½“çš„ä¾‹å­è¿›ä¸€æ­¥æŒæ¡ã€‚å†æ¬¡å¼ºè°ƒä¸€ä¸‹éœ€è¦æ³¨æ„çš„å‡ ç‚¹ï¼š</p><ul>\n<li>\n<p>I/O æ“ä½œéœ€è°¨æ…ï¼Œä¸€å®šè¦è¿›è¡Œå……åˆ†çš„é”™è¯¯å¤„ç†ï¼Œå¹¶ç»†å¿ƒç¼–ç ï¼Œé˜²æ­¢å‡ºç°ç¼–ç æ¼æ´ï¼›</p>\n</li>\n<li>\n<p>ç¼–ç æ—¶ï¼Œå¯¹å†…å­˜å ç”¨å’Œç£ç›˜å ç”¨è¦æœ‰å……åˆ†çš„ä¼°è®¡ï¼Œè¿™æ ·åœ¨å‡ºé”™æ—¶å¯ä»¥æ›´å®¹æ˜“æ‰¾åˆ°åŸå› ï¼›</p>\n</li>\n<li>\n<p>JSONåºåˆ—åŒ–æ˜¯å¾ˆæ–¹ä¾¿çš„å·¥å…·ï¼Œè¦ç»“åˆå®æˆ˜å¤šå¤šç»ƒä¹ ï¼›</p>\n</li>\n<li>\n<p>ä»£ç å°½é‡ç®€æ´ã€æ¸…æ™°ï¼Œå“ªæ€•æ˜¯åˆå­¦é˜¶æ®µï¼Œä¹Ÿè¦æœ‰ä¸€é¢—å½“å…ƒå¸…çš„å¿ƒã€‚</p>\n</li>\n</ul><h2>æ€è€ƒé¢˜</h2><p>æœ€åï¼Œæˆ‘ç»™ä½ ç•™äº†ä¸¤é“æ€è€ƒé¢˜ã€‚</p><p>ç¬¬ä¸€é—®ï¼šä½ èƒ½å¦æŠŠNLPä¾‹å­ä¸­çš„ word count å®ç°ä¸€éï¼Ÿä¸è¿‡è¿™æ¬¡ï¼Œin.txt å¯èƒ½éå¸¸éå¸¸å¤§ï¼ˆæ„å‘³ç€ä½ ä¸èƒ½ä¸€æ¬¡è¯»å–åˆ°å†…å­˜ä¸­ï¼‰ï¼Œè€Œ output.txt ä¸ä¼šå¾ˆå¤§ï¼ˆæ„å‘³ç€é‡å¤çš„å•è¯æ•°é‡å¾ˆå¤šï¼‰ã€‚</p><p>æç¤ºï¼šä½ å¯èƒ½éœ€è¦æ¯æ¬¡è¯»å–ä¸€å®šé•¿åº¦çš„å­—ç¬¦ä¸²ï¼Œè¿›è¡Œå¤„ç†ï¼Œç„¶åå†è¯»å–ä¸‹ä¸€æ¬¡çš„ã€‚ä½†æ˜¯å¦‚æœå•çº¯æŒ‰ç…§é•¿åº¦åˆ’åˆ†ï¼Œä½ å¯èƒ½ä¼šæŠŠä¸€ä¸ªå•è¯éš”æ–­å¼€ï¼Œæ‰€ä»¥éœ€è¦ç»†å¿ƒå¤„ç†è¿™ç§è¾¹ç•Œæƒ…å†µã€‚</p><p>ç¬¬äºŒé—®ï¼šä½ åº”è¯¥ä½¿ç”¨è¿‡ç±»ä¼¼ç™¾åº¦ç½‘ç›˜ã€Dropboxç­‰ç½‘ç›˜ï¼Œä½†æ˜¯å®ƒä»¬å¯èƒ½ç©ºé—´æœ‰é™ï¼ˆæ¯”å¦‚ 5GBï¼‰ã€‚å¦‚æœæœ‰ä¸€å¤©ï¼Œä½ è®¡åˆ’æŠŠå®¶é‡Œçš„ 100GB æ•°æ®ä¼ é€åˆ°å…¬å¸ï¼Œå¯æƒœä½ æ²¡å¸¦ U ç›˜ï¼Œäºæ˜¯ä½ æƒ³äº†ä¸€ä¸ªä¸»æ„ï¼š</p><p>æ¯æ¬¡ä»å®¶é‡Œå‘ Dropbox ç½‘ç›˜å†™å…¥ä¸è¶…è¿‡ 5GB çš„æ•°æ®ï¼Œè€Œå…¬å¸ç”µè„‘ä¸€æ—¦ä¾¦æµ‹åˆ°æ–°æ•°æ®ï¼Œå°±ç«‹å³æ‹·è´åˆ°æœ¬åœ°ï¼Œç„¶ååˆ é™¤ç½‘ç›˜ä¸Šçš„æ•°æ®ã€‚ç­‰å®¶é‡Œç”µè„‘ä¾¦æµ‹åˆ°æœ¬æ¬¡æ•°æ®å…¨éƒ¨ä¼ å…¥å…¬å¸ç”µè„‘åï¼Œå†è¿›è¡Œä¸‹ä¸€æ¬¡å†™å…¥ï¼Œç›´åˆ°æ‰€æœ‰æ•°æ®éƒ½ä¼ è¾“è¿‡å»ã€‚</p><p>æ ¹æ®è¿™ä¸ªæƒ³æ³•ï¼Œä½ è®¡åˆ’åœ¨å®¶å†™ä¸€ä¸ª server.pyï¼Œåœ¨å…¬å¸å†™ä¸€ä¸ª client.py æ¥å®ç°è¿™ä¸ªéœ€æ±‚ã€‚</p><p>æç¤ºï¼šæˆ‘ä»¬å‡è®¾æ¯ä¸ªæ–‡ä»¶éƒ½ä¸è¶…è¿‡ 5GBã€‚</p><ul>\n<li>\n<p>ä½ å¯ä»¥é€šè¿‡å†™å…¥ä¸€ä¸ªæ§åˆ¶æ–‡ä»¶ï¼ˆconfig.jsonï¼‰æ¥åŒæ­¥çŠ¶æ€ã€‚ä¸è¿‡ï¼Œè¦å°å¿ƒè®¾è®¡çŠ¶æ€ï¼Œè¿™é‡Œæœ‰å¯èƒ½äº§ç”Ÿ race conditionã€‚</p>\n</li>\n<li>\n<p>ä½ ä¹Ÿå¯ä»¥é€šè¿‡ç›´æ¥ä¾¦æµ‹æ–‡ä»¶æ˜¯å¦äº§ç”Ÿï¼Œæˆ–è€…æ˜¯å¦è¢«åˆ é™¤æ¥åŒæ­¥çŠ¶æ€ï¼Œè¿™æ˜¯æœ€ç®€å•çš„åšæ³•ã€‚</p>\n</li>\n</ul><p>ä¸è¦æ‹…å¿ƒéš¾åº¦é—®é¢˜ï¼Œå°½æƒ…å†™ä¸‹ä½ çš„æ€è€ƒï¼Œæœ€ç»ˆä»£ç æˆ‘ä¹Ÿä¼šä¸ºä½ å‡†å¤‡å¥½ã€‚</p><p>æ¬¢è¿åœ¨ç•™è¨€åŒºå†™ä¸‹ä½ çš„ç­”æ¡ˆï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠè¿™ç¯‡æ–‡ç« è½¬ç»™ä½ çš„åŒäº‹ã€æœ‹å‹ï¼Œä¸€èµ·åœ¨æ€è€ƒä¸­å­¦ä¹ ã€‚</p>","comments":[{"had_liked":false,"id":97934,"user_name":"Jingxiao","can_delete":false,"product_type":"c1","uid":1259521,"ip_address":"","ucode":"EB966BB87132F6","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJJOlibibPFEWOib8ib7RtfAtxND5FUqCxxoeTuLAbBI9ic23xuwdXT4IyiaWq3Fic9RgEAYI0lBTbEp2rcg/132","comment_is_top":true,"comment_ctime":1558844484,"is_pvip":false,"discussion_count":7,"race_medal":0,"score":"9.2233722832268001e+18","product_id":100026901,"comment_content":"æ€è€ƒé¢˜ç¬¬äºŒé¢˜ï¼šï¼ˆçœç•¥äº†ä¸€äº›å¼‚å¸¸å¤„ç†ï¼Œåé¢ä¼šè®²åˆ°ï¼‰<br>server.py<br># æˆ‘ä»¬å‡è®¾ server ç”µè„‘ä¸Šçš„æ‰€æœ‰çš„æ–‡ä»¶éƒ½åœ¨ BASR_DIR ä¸­ï¼Œä¸ºäº†ç®€åŒ–ä¸è€ƒè™‘æ–‡ä»¶å¤¹ç»“æ„ï¼Œç½‘ç›˜çš„è·¯å¾„åœ¨ NET_DIR<br><br>import os<br>from shutil import copyfile<br>import time<br><br>BASE_DIR = &#39;server&#47;&#39;<br>NET_DIR = &#39;net&#47;&#39;<br><br>def main():<br>    filenames = os.listdir(BASE_DIR)<br>    for i, filename in enumerate(filenames):<br>        print(&#39;copying {} into net drive...  {}&#47;{}&#39;.format(filename, i + 1, len(filenames)))<br>        copyfile(BASE_DIR + filename, NET_DIR + filename)<br>        print(&#39;copied {} into net drive, waiting client complete...  {}&#47;{}&#39;.format(filename, i + 1, len(filenames)))<br><br>        while os.path.exists(NET_DIR + filename):<br>            time.sleep(3)<br><br>    print(&#39;transferred {} into client.  {}&#47;{}&#39;.format(filename, i + 1, len(filenames)))<br><br>if __name__ == &quot;__main__&quot;:<br>\tmain()<br><br>++++++++++++++++++++++<br>client.py<br># æˆ‘ä»¬å‡è®¾ client ç”µè„‘ä¸Šè¦è¾“å‡ºçš„æ–‡ä»¶å¤¹åœ¨ BASR_DIR ï¼Œç½‘ç›˜çš„è·¯å¾„åœ¨ NET_DIR<br><br>import os<br>from shutil import copyfile<br>import time<br><br>BASE_DIR = &#39;client&#47;&#39;<br>NET_DIR = &#39;net&#47;&#39;<br><br>def main():<br>    while True:<br>        filenames = os.listdir(NET_DIR)<br>        for filename in filenames:<br>            print(&#39;downloading {} into local disk...&#39;.format(filename))<br>            copyfile(NET_DIR + filename, BASE_DIR + filename)<br>            os.remove(NET_DIR + filename) # æˆ‘ä»¬éœ€è¦åˆ é™¤è¿™ä¸ªæ–‡ä»¶ï¼Œç½‘ç›˜ä¼šææˆ‘ä»¬åŒæ­¥è¿™ä¸ªæ“ä½œï¼Œä»è€Œ server çŸ¥æ™“å·²å®Œæˆ<br>            print(&#39;downloaded {} into local disk.&#39;.format(filename))<br>        time.sleep(3)<br><br>if __name__ == &quot;__main__&quot;:<br>\tmain()","like_count":58,"discussions":[{"author":{"id":1444483,"avatar":"https://static001.geekbang.org/account/avatar/00/16/0a/83/f916f903.jpg","nickname":"é£","note":"","ucode":"E1CE0825AAF805","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":344302,"discussion_content":"å®¢æˆ·ç«¯è¿™è¾¹åº”è¯¥åŠ ä¸ªè¶…æ—¶åˆ¤æ–­ï¼Œå¦‚æœç½‘ç›˜è·¯å¾„ä¸‹ï¼Œå¾ˆä¹…éƒ½æ²¡æœ‰å‡ºç°æ–°æ–‡ä»¶ï¼ˆè¯´æ˜æœåŠ¡ç«¯å·²ç»ä¼ å®Œäº†æ‰€æœ‰æ–‡ä»¶ï¼‰ï¼Œå°±ç»“æŸç¨‹åºã€‚è¦ä¸ç„¶client.pyå°†ä¸€ç›´è¿è¡Œ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1611399315,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1542450,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/a8PMLmCTCBa40j7JIy3d8LsdbW5hne7lkk9KOGQuiaeVk4cn06KWwlP3ic69BsQLpNFtRTjRdUM2ySDBAv1MOFfA/132","nickname":"Ilovek8s","note":"","ucode":"64DF0F7D0CF0B0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":376862,"discussion_content":"ç‰›é€¼ï¼Œå‘å¤§ç¥è†œæ‹œã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622385538,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2508673,"avatar":"https://static001.geekbang.org/account/avatar/00/26/47/81/0fdf9885.jpg","nickname":"TSC-SUN","note":"","ucode":"7479A6AD8E2664","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":367315,"discussion_content":"è€å¸ˆæˆ‘æƒ³é—®ä¸€ä¸‹ï¼Œå¯èƒ½æœ‰ç‚¹ç®€å•ï¼Œä¸ºä»€ä¹ˆè¦åŒºåˆ†severç”µè„‘å’Œcleanç”µè„‘ï¼Œæœ‰ä»€ä¹ˆä¸åŒå—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618320156,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1600007,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEI4pmhZGWGlmpLbxrZk2b6JXfzc7aoXvczZf3xpC09nzmDEyGlTGCIw1h6vq3zF9YDG8Lv7raMdKQ/132","nickname":"Geek_871a6a","note":"","ucode":"4D0917BFD6B441","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":270737,"discussion_content":"é‚£ä¹ˆå¦‚ä½•ä¼šè‡ªåŠ¨ä¼ å®Œä¹‹åï¼Œå®¢æˆ·ç«¯ç›´æ¥å…³é—­å‘¢ï¼Œè¿™ä¸ªæ—¶å€™å¯ä»¥åœ¨å®¢æˆ·ç«¯è¿›è¡Œåˆ¤æ–­ï¼Œå¦‚æœæœåŠ¡ç«¯çš„è¿›ç¨‹æŒ‚äº†ï¼Œé‚£ä¹ˆè¿™è¾¹å®¢æˆ·ç«¯å°±ç›´æ¥æ–­å¼€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590045664,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1339625,"avatar":"https://static001.geekbang.org/account/avatar/00/14/70/e9/26243f4f.jpg","nickname":"ç‹é¥","note":"","ucode":"DFAA29C57C4B9D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":42188,"discussion_content":"ç¬¬äºŒé","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572606948,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1546621,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/8C8icoib08mXvTD57UD5HentzH67xefic45LuicmcYEXxbnWEBfTZzyAlxFIcPdreCV77KqpHvAlTAxzaQUIubVsfA/132","nickname":"Geek_85bcd4","note":"","ucode":"E8777744EF30AC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":1918,"discussion_content":"client.py æœ‰ä¸¤ç‚¹ï¼š  \n     1.ä¸ºä»€ä¹ˆéœ€è¦while+ for åµŒå¥—å¾ªç¯ï¼Œå¦‚æœæŠ›å‡ºå¼‚å¸¸ï¼Œåº”è¯¥ç”¨try: except\n     2.os.remove(NET_DIR+filename) : ä¸ºä»€ä¹ˆéœ€è¦åˆ é™¤è¿™ä¸ªæ–‡ä»¶ã€å¼•ç”¨äº†whileçš„åŸå› ä¹ˆã€‘\n       ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563093663,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1187403,"avatar":"https://static001.geekbang.org/account/avatar/00/12/1e/4b/b324aba3.jpg","nickname":"æ˜å°‘","note":"","ucode":"D11881FC6FB5DF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1546621,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/8C8icoib08mXvTD57UD5HentzH67xefic45LuicmcYEXxbnWEBfTZzyAlxFIcPdreCV77KqpHvAlTAxzaQUIubVsfA/132","nickname":"Geek_85bcd4","note":"","ucode":"E8777744EF30AC","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":36508,"discussion_content":"1ã€while æ˜¯ä¸ºäº†è®©æ¥æ”¶æœåŠ¡ä¸€ç›´è¿è¡Œï¼Œforæ˜¯ä¸ºäº†éå†ç½‘ç›˜æ–‡ä»¶ï¼›\n2ã€åˆ é™¤æ˜¯å› ä¸ºç½‘ç›˜å®¹é‡å°ï¼Œåˆ äº†é€šçŸ¥ä¸Šä¼ æœåŠ¡ç«¯ç»§ç»­ä¸Šä¼ æ–°çš„æ–‡ä»¶ï¼›","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1571386394,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":1918,"ip_address":""},"score":36508,"extra":""}]}]},{"had_liked":false,"id":97925,"user_name":"Jingxiao","can_delete":false,"product_type":"c1","uid":1259521,"ip_address":"","ucode":"EB966BB87132F6","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJJOlibibPFEWOib8ib7RtfAtxND5FUqCxxoeTuLAbBI9ic23xuwdXT4IyiaWq3Fic9RgEAYI0lBTbEp2rcg/132","comment_is_top":true,"comment_ctime":1558842243,"is_pvip":false,"discussion_count":19,"race_medal":0,"score":"9.2233722316871004e+18","product_id":100026901,"comment_content":"æ€è€ƒé¢˜ç¬¬ä¸€é¢˜ï¼š<br><br>import re<br><br>CHUNK_SIZE = 100 # è¿™ä¸ªæ•°è¡¨ç¤ºä¸€æ¬¡æœ€å¤šè¯»å–çš„å­—ç¬¦é•¿åº¦<br><br># è¿™ä¸ªå‡½æ•°æ¯æ¬¡ä¼šæ¥æ”¶ä¸Šä¸€æ¬¡å¾—åˆ°çš„ last_wordï¼Œç„¶åå’Œè¿™æ¬¡çš„ text åˆå¹¶èµ·æ¥å¤„ç†ã€‚<br># åˆå¹¶ååˆ¤æ–­æœ€åä¸€ä¸ªè¯æœ‰æ²¡æœ‰å¯èƒ½è¿ç»­ï¼Œå¹¶åˆ†ç¦»å‡ºæ¥ï¼Œç„¶åè¿”å›ã€‚<br># è¿™é‡Œçš„ä»£ç æ²¡æœ‰ if è¯­å¥ï¼Œä½†æ˜¯ä»ç„¶æ˜¯æ­£ç¡®çš„ï¼Œå¯ä»¥æƒ³ä¸€æƒ³ä¸ºä»€ä¹ˆã€‚<br>def parse_to_word_list(text, last_word, word_list):<br>    text = re.sub(r&#39;[^\\w ]&#39;, &#39; &#39;, last_word + text)<br>    text = text.lower()<br>    cur_word_list = text.split(&#39; &#39;)<br>    cur_word_list, last_word = cur_word_list[:-1], cur_word_list[-1]<br>    word_list += filter(None, cur_word_list)<br>    return last_word<br><br>def solve():<br>    with open(&#39;in.txt&#39;, &#39;r&#39;) as fin:<br>        word_list, last_word = [], &#39;&#39;<br>        while True:<br>            text = fin.read(CHUNK_SIZE)<br>            if not text: <br>                break # è¯»å–å®Œæ¯•ï¼Œä¸­æ–­å¾ªç¯<br>            last_word = parse_to_word_list(text, last_word, word_list)<br><br>        word_cnt = {}<br>        for word in word_list:<br>            if word not in word_cnt:<br>                word_cnt[word] = 0<br>            word_cnt[word] += 1<br><br>        sorted_word_cnt = sorted(word_cnt.items(), key=lambda kv: kv[1], reverse=True)<br>        return sorted_word_cnt<br><br>print(solve())","like_count":46,"discussions":[{"author":{"id":1338704,"avatar":"https://static001.geekbang.org/account/avatar/00/14/6d/50/c2b759a1.jpg","nickname":"AIåˆé—´ç‹‚ç¡Steve","note":"","ucode":"6CB9572A861C09","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":1321,"discussion_content":"è€å¸ˆæ‚¨å¥½ï¼Œå…³äºæ‚¨çš„ä»£ç ï¼Œæˆ‘æœ‰ä¸ªå°é—®é¢˜ï¼š\nè¿™é“é¢˜çš„ç›®çš„æ˜¯å¦‚æœè¾“å…¥çš„textå¤ªå¤§æˆ‘ä»¬mei yåŠæ³•ä¸€æ¬¡æ€§è¯»åˆ°å†…å­˜ä¸­æˆ‘ä»¬åº”è¯¥å¦‚ä½•å¤„ç†ã€‚\næ‚¨çš„è§£æ³•è§£å†³äº†åˆ†æ¬¡è¯»å–æ•°æ®çš„é—®é¢˜ï¼Œä½†æ˜¯æ¯ä¸€æ¬¡è¯»å–ä¹‹åéƒ½ä¼šæŠŠæœ¬æ¬¡è¯»å–çš„wordå†™å…¥word listä¸­ã€‚\né‚£ä¹ˆè¿™ä¸ªword listå°±ä¼šä¸æ–­æ‰©å¤§ï¼Œå› ä¸ºæˆ‘ä»¬æ²¡æœ‰å»é‡ã€‚\næœ€åçš„ç»“æœå°±æ˜¯word listå˜å¾—å¾ˆå¤§ï¼Œå ç”¨å¾ˆå¤šå†…å­˜ã€‚\næˆ‘çš„é—®é¢˜æ—¶ï¼šè¿™ä¸ªè¶…å¤§çš„word listä¼šå¯¼è‡´å†…å­˜æº¢å‡ºå—ï¼Ÿå¦‚æœä¼šçš„è¯ï¼Œæˆ‘ä»¬ä¸Šè¿°çš„æ“ä½œå²‚ä¸æ˜¯æ²¡æœ‰ä»€ä¹ˆæ„ä¹‰ã€‚","likes_number":8,"is_delete":false,"is_hidden":false,"ctime":1562563174,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1528650,"avatar":"https://static001.geekbang.org/account/avatar/00/17/53/4a/125225c1.jpg","nickname":"KT.","note":"","ucode":"7E5498EFB53BCF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1338704,"avatar":"https://static001.geekbang.org/account/avatar/00/14/6d/50/c2b759a1.jpg","nickname":"AIåˆé—´ç‹‚ç¡Steve","note":"","ucode":"6CB9572A861C09","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2546,"discussion_content":"æˆ‘ä¹Ÿæƒ³çŸ¥é“ç­”æ¡ˆã€‚ã€‚ã€‚è¿™ä¸ªè¶…å¤§çš„word listä¼šå¯¼è‡´å†…å­˜æº¢å‡ºå—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563767248,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":1321,"ip_address":""},"score":2546,"extra":""},{"author":{"id":1526831,"avatar":"https://static001.geekbang.org/account/avatar/00/17/4c/2f/85a8d26e.jpg","nickname":"055","note":"","ucode":"210A944276395F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1338704,"avatar":"https://static001.geekbang.org/account/avatar/00/14/6d/50/c2b759a1.jpg","nickname":"AIåˆé—´ç‹‚ç¡Steve","note":"","ucode":"6CB9572A861C09","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5716,"discussion_content":"åŒé—®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566444655,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":1321,"ip_address":""},"score":5716,"extra":""},{"author":{"id":1814182,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/ae/a6/6e24b9f2.jpg","nickname":"Calvin","note":"","ucode":"AFCDCF99556A49","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1338704,"avatar":"https://static001.geekbang.org/account/avatar/00/14/6d/50/c2b759a1.jpg","nickname":"AIåˆé—´ç‹‚ç¡Steve","note":"","ucode":"6CB9572A861C09","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":150327,"discussion_content":"æˆ‘è§‰å¾—ææˆä¸€ä¸ªdictæ¥å­˜å‚¨ä¼šæ›´å¥½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579792420,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":1321,"ip_address":""},"score":150327,"extra":""}]},{"author":{"id":1307689,"avatar":"","nickname":"Z_ying","note":"","ucode":"B4FDE000A012B5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":1022,"discussion_content":"å…¨æ–‡æœ€åä¸€ä¸ªå•è¯æ˜¯ä¸æ˜¯æ²¡æœ‰è¿›å…¥word_list? å¦‚æœæœ€åä¸€ä¸ªå•è¯åé¢æ²¡æœ‰æ ‡ç‚¹ç¬¦å·çš„è¯","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1562242246,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1157364,"avatar":"https://static001.geekbang.org/account/avatar/00/11/a8/f4/2abb4a4c.jpg","nickname":"MirkoWei","note":"","ucode":"901C436D359CD3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1307689,"avatar":"","nickname":"Z_ying","note":"","ucode":"B4FDE000A012B5","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":52260,"discussion_content":"åŒé—®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574026688,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":1022,"ip_address":""},"score":52260,"extra":""},{"author":{"id":2056178,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/5f/f2/121afc48.jpg","nickname":"MarkZoldyck","note":"","ucode":"4CA2132C996512","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1307689,"avatar":"","nickname":"Z_ying","note":"","ucode":"B4FDE000A012B5","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":289266,"discussion_content":"æ²¡æœ‰æ ‡ç‚¹æœ€åä¸€ä¸ªwordåº”è¯¥æ²¡ç»Ÿè®¡åˆ°ï¼Œæ‰€ä»¥whileå¾ªç¯ç»“æŸæˆ‘è®¤ä¸ºè¿˜æ˜¯åº”è¯¥å¯¹last_wordè¿›è¡Œå¤„ç†ä¸€ä¸‹","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1594042823,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":1022,"ip_address":""},"score":289266,"extra":""}]},{"author":{"id":2369413,"avatar":"https://static001.geekbang.org/account/avatar/00/24/27/85/ddeeaf30.jpg","nickname":"dived","note":"","ucode":"141916A3BAF5A1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":373729,"discussion_content":"#ç¨å¾®æ”¹äº†ä¸‹ parseé‡Œé¢å¤šæ”¾ç›´æ¥å¤„ç†word_dict, ä¸è¦word_listäº†\nimport re\nCHUNK_SIZE = 100\ndef parse(text, word_dict, last_word):\n    text = re.sub(r&#39;[^\\w]&#39;, &#39; &#39;, last_word + text)\n    text = text.lower()\n    last_word =  text.split(&#39; &#39;)[-1]\n    for word in filter(None, text.split(&#39; &#39;)[:-1]):\n        word_dict[word] = word_dict.get(word, 0) + 1\n    return last_word\n\nwith open(&#39;in.txt&#39;, &#39;r&#39;) as fin:\n    word_set = set()\n    last_word = &#39;&#39;\n    word_dict = {}\n    while True:\n        text = fin.read(CHUNK_SIZE)\n        if not text:\n            break\n        last_word = parse(text, word_dict, last_word)\n    chunk_list = sorted(word_dict.items(), key=lambda x:x[1], reverse=1)\n#     print(chunk_list==sorted_dict)\n\nwith open(&#34;ou2.txt&#34;, mode=&#34;w&#34;) as fo:\n    for k, v in chunk_list:\n        fo.write(f&#34;{k} {v}\\n&#34;)\n","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1620839482,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1412429,"avatar":"https://static001.geekbang.org/account/avatar/00/15/8d/4d/992070e8.jpg","nickname":"æ†¨çš®è‹","note":"","ucode":"D0B4B7660DA766","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":362071,"discussion_content":"# åˆå¹¶ååˆ¤æ–­æœ€åä¸€ä¸ªè¯æœ‰æ²¡æœ‰å¯èƒ½è¿ç»­ï¼Œå¹¶åˆ†ç¦»å‡ºæ¥ï¼Œç„¶åè¿”å›ã€‚\n# è¿™é‡Œçš„ä»£ç æ²¡æœ‰ if è¯­å¥ï¼Œä½†æ˜¯ä»ç„¶æ˜¯æ­£ç¡®çš„ï¼Œå¯ä»¥æƒ³ä¸€æƒ³ä¸ºä»€ä¹ˆã€‚\n\nç­”ï¼šæ— è®ºæœ€åä¸€ä¸ªè¯æœ‰æ²¡æœ‰è¿ç»­ï¼Œéƒ½ä¸æ˜¯æ”¾åˆ°è¿™æ¬¡æ¥è®¡ç®—çš„ï¼Œè€Œæ˜¯æ”¾åˆ°ä¸‹ä¸€æ¬¡ï¼Œåˆå› ä¸ºæ”¾åˆ°äº†ä¸‹ä¸€æ¬¡ï¼Œå’Œä¸‹ä¸€æ¬¡è¯»å–çš„æ•°æ®åˆå¹¶åœ¨ä¸€èµ·ä½œä¸ºä¸€ä¸ªæ•´ä½“ï¼Œå› æ­¤ä¸Šä¸€æ¬¡æœ€åä¸€ä¸ªè¯åœ¨ä¸‹ä¸€æ¬¡è¯»å–æ—¶ä¸€å®šæ˜¯å®Œæ•´çš„ï¼Œä¸å®Œæ•´çš„ä»æ—§æ˜¯æœ€åä¸€ä¸ªè¯ï¼Œè€ƒè™‘è¾¹ç•Œæƒ…å†µï¼Œæœ€åä¸€è¡Œï¼Œä»æ—§æ»¡è¶³ã€‚å› æ­¤ä¸ç”¨å»åˆ¤æ–­æœ€åä¸€ä¸ªè¯æ˜¯å¦è¿ç»­","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1616841882,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1754973,"avatar":"","nickname":"jtchgis","note":"","ucode":"BACBA9AB8F3162","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":205245,"discussion_content":"word_cnt[word] = 0   è¿™é‡Œæˆ‘æ€ä¹ˆè§‰å¾—åº”è¯¥åˆå§‹=1å‘¢ï¼Ÿæœ‰å­¦å‹èƒ½è§£é‡Šä¸€ä¸‹å—ï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1584281951,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1934586,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/84/fa/842f75f6.jpg","nickname":"ã€‚","note":"","ucode":"0048B2F95BFD4B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1754973,"avatar":"","nickname":"jtchgis","note":"","ucode":"BACBA9AB8F3162","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":215226,"discussion_content":"ä¸‹ä¸€æ­¥å°±ä¼šåŠ 1","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1585303573,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":205245,"ip_address":""},"score":215226,"extra":""},{"author":{"id":1123435,"avatar":"https://static001.geekbang.org/account/avatar/00/11/24/6b/2e52759d.jpg","nickname":"Gene","note":"","ucode":"C1DA1ECFB5445F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1754973,"avatar":"","nickname":"jtchgis","note":"","ucode":"BACBA9AB8F3162","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":315354,"discussion_content":"= 0 è´Ÿè´£å¯¹åº”é”®å€¼çš„åˆå§‹åŒ–ï¼Œä¸ç„¶ä¸‹ä¸€æ­¥æ²¡æ³• += 1","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603266002,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":205245,"ip_address":""},"score":315354,"extra":""},{"author":{"id":1710643,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/vwv0qiaibQzcTP6yIDJXOJLdh64CnBSaOceFFuWArVHQcwicIsebwYbKJ69OSJrxeXJyawtNIINcjo3V3hgg5BW1A/132","nickname":"MuBo","note":"","ucode":"46402B9B7D7B1E","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":1754973,"avatar":"","nickname":"jtchgis","note":"","ucode":"BACBA9AB8F3162","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":327783,"discussion_content":"ä¸‹ä¸€æ­¥+1æ˜¯ç¬¬ä¸€æ¬¡ä¹Ÿä¼šåšçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605947467,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":205245,"ip_address":""},"score":327783,"extra":""}]},{"author":{"id":2642341,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epd5nINR78huW7KQbGS6C9iaFZT5CkibhDJib9IXpBicplI6p5BNrBwInMPkCL7JqABeK1t0TMuMFziahA/132","nickname":"Geek_04affd","note":"","ucode":"0D86B0B2587000","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":571994,"discussion_content":"æ–‡ä¸­ç»Ÿè®¡è¯é¢‘å­˜åœ¨ä¸€ä¸ªå°é—®é¢˜ï¼Œå¯¹äºè¡Œæœ«å•è¯æœªæ‹¼å†™å®Œæˆå­˜åœ¨&#39;-&#39;çš„æƒ…å†µï¼Œæ¯”å¦‚hell- \no worldï¼Œä¼šå°†å…¶åˆ†å‰²ä¸º[&#39;hell&#39;, &#39;o&#39;, &#39;world&#39;]","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1652527967,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1811813,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/a5/65/898bc6c5.jpg","nickname":"wayne","note":"","ucode":"988E1F2F0B419A","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":369987,"discussion_content":"è¿™æ ·è¿˜æ˜¯ä¼šä¸€æ¬¡æŠŠæ‰€æœ‰å†…å®¹åŠ è½½åˆ°å†…å­˜æ•°ç»„ï¼Œæœ€å¥½æ˜¯ä¸€æ¬¡è¯»å–ä¸€è¡Œï¼Œç„¶åå¤„ç†ä¸€è¡Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619239535,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1548394,"avatar":"","nickname":"Geek_102886","note":"","ucode":"D6D595BF83A8D0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":219505,"discussion_content":"ç®€å•æ¥è¯´ï¼Œå°±æ˜¯å¯¹äºæœ€åä¸€ä¸ªå•è¯ç•™åˆ°ä¸‹æ¬¡å»å¤„ç†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585756680,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1298279,"avatar":"https://static001.geekbang.org/account/avatar/00/13/cf/67/057e5d93.jpg","nickname":"flying","note":"","ucode":"69AB7872B36B23","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":1514,"discussion_content":"å¦‚æœè¯»å–çš„100ä¸ªå­—ç¬¦ä¸­ï¼Œæœ€åä¸€ä¸ªæ˜¯ç©ºæ ¼ï¼Œè¿™æ ·çš„è¯ï¼Œè¯¥ç¨‹åºæ˜¯æœ‰é—®é¢˜çš„ã€‚\nå¯ä»¥å°†word_dictä½œä¸ºä¸€ä¸ªå‚æ•°å‡ºå…¥parseå‡½æ•°ä¸­ï¼Œæ¯æ¬¡è¯»å–çš„å•è¯éƒ½åŠæ—¶ç»Ÿè®¡å‡ºç»“æœï¼Œåªæ˜¯ä¸çŸ¥é“æ€§èƒ½ä¼šä¸ä¼šå—åˆ°å½±å“","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562672190,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1157364,"avatar":"https://static001.geekbang.org/account/avatar/00/11/a8/f4/2abb4a4c.jpg","nickname":"MirkoWei","note":"","ucode":"901C436D359CD3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1298279,"avatar":"https://static001.geekbang.org/account/avatar/00/13/cf/67/057e5d93.jpg","nickname":"flying","note":"","ucode":"69AB7872B36B23","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":52259,"discussion_content":"text.split(&#39; &#39;)å½“textä»¥&#39; &#39;ç»“å°¾ï¼Œå¾—åˆ°çš„cur_word_list[-1]æ˜¯&#39;&#39;ï¼Œè€Œå¦‚æœä»¥é&#39; &#39;ç»“å°¾ï¼Œå¾—åˆ°çš„æ˜¯å•è¯ï¼Œæ‰€ä»¥ä¸ä¼šåˆ¤æ–­é”™çš„","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1574026458,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":1514,"ip_address":""},"score":52259,"extra":""}]},{"author":{"id":1545251,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q3auHgzwzM7adYZoHGic7ZS6cp9OmBjh1C4ajCCpciblR3ib3jDtiaKrFdbT9J7sl2B9eNoCQicfx5QWgVVZQB74pfQ/132","nickname":"Luove","note":"","ucode":"73CD4D2C731B47","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":797,"discussion_content":"æ™¯è€å¸ˆå¥½ï¼Œé€šè¿‡sizeæ¥åˆ†å—è¯»å–æ—¶ï¼Œæƒ³åˆ°ä¸¤ç§æƒ…å†µï¼š\n1ï¼Œå¦‚â€œhe is ...good man,&#34; &#34;...&#34;  or  â€œhe is ...good man&#34; &#34;, ...&#34;\n2ï¼Œå¦‚&#34;he is ...good peop&#34; &#34;le, ...&#34;\nQï¼š\n1ã€ä¼šä¸ä¼šè¿˜æœ‰å…¶ä»–æƒ…å†µï¼Ÿ\n2ã€ä¸­è‹±æ–‡ä¼šæœ‰å·®åˆ«å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562062513,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":96718,"user_name":"ä¸ç˜¦åˆ°140ä¸æ”¹å","can_delete":false,"product_type":"c1","uid":1528298,"ip_address":"","ucode":"31DA063A17FC27","user_header":"https://static001.geekbang.org/account/avatar/00/17/51/ea/2ce84d5a.jpg","comment_is_top":false,"comment_ctime":1558492583,"is_pvip":false,"replies":[{"id":"34623","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"é«˜å±±æµæ°´","uid":"1513504","ctime":1558507731,"ip_address":"","comment_id":96718,"utype":1}],"discussion_count":14,"race_medal":0,"score":"263551497639","product_id":100026901,"comment_content":"from collections import defaultdict<br>import re<br><br>f = open(&quot;ini.txt&quot;, mode=&quot;r&quot;, encoding=&quot;utf-8&quot;)<br>d = defaultdict(int)<br><br>for line in f:<br>    for word in filter(lambda x: x, re.split(r&quot;\\s&quot;, line)):<br>        d[word] += 1<br><br><br>print(d)","like_count":62,"discussions":[{"author":{"id":1513504,"avatar":"https://static001.geekbang.org/account/avatar/00/17/18/20/75ea3b20.jpg","nickname":"é«˜å±±æµæ°´","note":"","ucode":"71E513B5937481","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":450983,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558507731,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1921415,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epJD0SEy6FrzXhmAoyj5jRvs2PCcUVS6MCQAfkKpTpRxB5FsibxSdPe7cRrlertzC9HNU74sOAnBbw/132","nickname":"æœ±å­¦é”‹","note":"","ucode":"C466309D43E478","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":210959,"discussion_content":"æ²¡çœ‹åˆ°é¢˜è®¾ä¸­in.txtéå¸¸å¤§çš„é—®é¢˜æ€ä¹ˆè§£å†³çš„","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1584795314,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2131165,"avatar":"https://static001.geekbang.org/account/avatar/00/20/84/dd/a9265141.jpg","nickname":"diuä½ å¤´å‘æ‰å±å¹•ä¸Šäº†","note":"","ucode":"69E2D5EAD8B50C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":371196,"discussion_content":"å¤§æ–‡ä»¶é‡Œæ‰€æœ‰æ•°æ®åªåœ¨ç¬¬ä¸€è¡Œçš„è¯ï¼Œä¸å°±æŒ‚äº†å—ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1619682905,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1999745,"avatar":"","nickname":"1006510","note":"","ucode":"0068FD2DD5DEC6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":269380,"discussion_content":"è¿™ä¸ªæ–‡ä»¶æ˜¯ä¸æ˜¯å¿˜å…³äº†\n","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1589899190,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1156329,"avatar":"https://static001.geekbang.org/account/avatar/00/11/a4/e9/3b65c171.jpg","nickname":"è¶…äºº","note":"","ucode":"119ED76F577FC7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":30965,"discussion_content":"ä»£ç å¾ˆç®€æ´ï¼Œå­¦ä¹ äº†ã€‚æ­£åˆ™è¡¨è¾¾å¼éœ€è¦å…ˆæ›¿æ¢éå•è¯ï¼ˆæ ‡ç‚¹ç¬¦å·ï¼‰ç„¶åå†split","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1570874006,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1039464,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/dc/68/006ba72c.jpg","nickname":"Untitled","note":"","ucode":"8DD6ABA3E81A2E","race_medal":2,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":334702,"discussion_content":"è¿™é‡Œæ²¡æœ‰è¿‡æ»¤æ‰ç¬¦å·å§ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607945004,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1921415,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epJD0SEy6FrzXhmAoyj5jRvs2PCcUVS6MCQAfkKpTpRxB5FsibxSdPe7cRrlertzC9HNU74sOAnBbw/132","nickname":"æœ±å­¦é”‹","note":"","ucode":"C466309D43E478","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":210960,"discussion_content":"æ¯”å¦‚æ•´ä¸ªæ–‡ä»¶æœ‰ä¸”ä»…æœ‰ä¸€è¡Œï¼Œè¿™æ ·å†™ä¸€ä¸‹å°±å´©æºƒäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584795383,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1012697,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/73/d9/da9349fd.jpg","nickname":"yang","note":"","ucode":"C1E91D5F9ABD42","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":1655,"discussion_content":"ä¸­æ–‡ä¹Ÿæ˜¯è¿™æ ·æå—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562770019,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1545251,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q3auHgzwzM7adYZoHGic7ZS6cp9OmBjh1C4ajCCpciblR3ib3jDtiaKrFdbT9J7sl2B9eNoCQicfx5QWgVVZQB74pfQ/132","nickname":"Luove","note":"","ucode":"73CD4D2C731B47","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":821,"discussion_content":"åŒé—®ï¼Œlambda x:x åœ¨è¿™é‡Œçš„ä½œç”¨åŠä¸ºä½•ä¸Noneç­‰ä»·ï¼Ÿè¯·æ±‚è§£æƒ‘ä¸€ä¸‹ï¼Œè°¢è°¢~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562079271,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1606707,"avatar":"https://static001.geekbang.org/account/avatar/00/18/84/33/b3666d78.jpg","nickname":"å´ä¼˜ç§€åŒå­¦","note":"","ucode":"E3BAAC604E9972","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1545251,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q3auHgzwzM7adYZoHGic7ZS6cp9OmBjh1C4ajCCpciblR3ib3jDtiaKrFdbT9J7sl2B9eNoCQicfx5QWgVVZQB74pfQ/132","nickname":"Luove","note":"","ucode":"73CD4D2C731B47","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":194252,"discussion_content":"åœ¨pythonä¸­æ‰€æœ‰éç©ºå€¼éƒ½æ˜¯Trueï¼Œæ¯ä¸€ä¸ªå­—ç¬¦ä¸²é™¤äº†å…¶æœ¬èº«å¤–è¿˜æœ‰å¦ä¸€ä¸ªèº«ä»½é‚£å°±æ˜¯å¸ƒå°”å€¼ï¼Œè¿™é‡ŒåŒ¿åå‡½æ•°å°†åŸå€¼è¿›è¡Œè¿”å›ï¼Œå°±æ˜¯åˆ©ç”¨å­—ç¬¦ä¸²æ¥ä»£æ›¿å¸ƒå°”å€¼è¿›è¡Œåˆ¤æ–­ã€‚","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1583201887,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":821,"ip_address":""},"score":194252,"extra":""}]},{"author":{"id":1581705,"avatar":"https://static001.geekbang.org/account/avatar/00/18/22/89/73397ccb.jpg","nickname":"å“é›¨","note":"","ucode":"C5FB3A3BC68F92","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":167,"discussion_content":"lambda x: x ä¸ºä»€ä¹ˆåœ¨è¿™é‡Œæ›¿ä»£Noneå‘¢ï¼Ÿä¸æ‡‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561211930,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1012697,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/73/d9/da9349fd.jpg","nickname":"yang","note":"","ucode":"C1E91D5F9ABD42","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1581705,"avatar":"https://static001.geekbang.org/account/avatar/00/18/22/89/73397ccb.jpg","nickname":"å“é›¨","note":"","ucode":"C5FB3A3BC68F92","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":1658,"discussion_content":"filterå‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªä¸ºå‡½æ•°ï¼Œç¬¬äºŒä¸ªä¸ºåºåˆ—ï¼Œåºåˆ—çš„æ¯ä¸ªå…ƒç´ ä½œä¸ºå‚æ•°ä¼ é€’ç»™å‡½æ•°è¿›è¡Œåˆ¤ï¼Œç„¶åè¿”å› True æˆ– Falseï¼Œæœ€åå°†è¿”å› True çš„å…ƒç´ æ”¾åˆ°æ–°åˆ—è¡¨ä¸­ã€‚Noneæ˜¯falseå—ï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1562772020,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":167,"ip_address":""},"score":1658,"extra":""},{"author":{"id":2086265,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/d5/79/e1801426.jpg","nickname":"Bee","note":"","ucode":"3774D0CA746DA9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1012697,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/73/d9/da9349fd.jpg","nickname":"yang","note":"","ucode":"C1E91D5F9ABD42","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":295129,"discussion_content":"æ˜¯çš„ï¼Œå¦‚æœç»™çš„Noneï¼Œåˆ™ä¼šè‡ªåŠ¨è¿‡æ»¤æ‰è¿”å›Falseçš„å€¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596097414,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":1658,"ip_address":""},"score":295129,"extra":""},{"author":{"id":2116746,"avatar":"","nickname":"Geek_0b6620","note":"","ucode":"367685E08CE1C4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1012697,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/73/d9/da9349fd.jpg","nickname":"yang","note":"","ucode":"C1E91D5F9ABD42","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298501,"discussion_content":"(lambda x:x)(0) >>> 0; (lambda x:x)(None) >>> æ²¡æœ‰è¿”å›å€¼ã€‚ã€‚ã€‚éš¾æå•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597312531,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":1658,"ip_address":""},"score":298501,"extra":""}]}]},{"had_liked":false,"id":96676,"user_name":"é€†å…‰é£ç¿”","can_delete":false,"product_type":"c1","uid":1283178,"ip_address":"","ucode":"6CA088D343A373","user_header":"https://static001.geekbang.org/account/avatar/00/13/94/6a/fed08431.jpg","comment_is_top":false,"comment_ctime":1558487201,"is_pvip":false,"replies":[{"id":"34621","content":"filter(None, Iterable) æ˜¯ä¸€ç§å®¹æ˜“å‡ºé”™çš„ç”¨æ³•ï¼Œè¿™é‡Œä¸æ­¢è¿‡æ»¤ç©ºå­—ç¬¦ä¸²ï¼Œè¿˜èƒ½è¿‡æ»¤ 0ï¼ŒNoneï¼Œç©ºåˆ—è¡¨ç­‰å€¼ã€‚è¿™é‡Œçš„ Noneï¼Œä¸¥æ ¼æ„ä¹‰ä¸Šç­‰äº lambda x: x, æ˜¯ä¸€ä¸ª callableã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"é«˜å±±æµæ°´","uid":"1513504","ctime":1558507654,"ip_address":"","comment_id":96676,"utype":1}],"discussion_count":3,"race_medal":0,"score":"130407506081","product_id":100026901,"comment_content":"è€å¸ˆï¼Œä¸ºä»€ä¹ˆfilterï¼ˆnoneï¼Œlistï¼‰å¯ä»¥è¿‡æ»¤ç©ºå€¼ï¼Œä¸æ˜¯ä¿ç•™ç©ºå€¼å˜›","like_count":30,"discussions":[{"author":{"id":1513504,"avatar":"https://static001.geekbang.org/account/avatar/00/17/18/20/75ea3b20.jpg","nickname":"é«˜å±±æµæ°´","note":"","ucode":"71E513B5937481","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":450965,"discussion_content":"filter(None, Iterable) æ˜¯ä¸€ç§å®¹æ˜“å‡ºé”™çš„ç”¨æ³•ï¼Œè¿™é‡Œä¸æ­¢è¿‡æ»¤ç©ºå­—ç¬¦ä¸²ï¼Œè¿˜èƒ½è¿‡æ»¤ 0ï¼ŒNoneï¼Œç©ºåˆ—è¡¨ç­‰å€¼ã€‚è¿™é‡Œçš„ Noneï¼Œä¸¥æ ¼æ„ä¹‰ä¸Šç­‰äº lambda x: x, æ˜¯ä¸€ä¸ª callableã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558507654,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1526831,"avatar":"https://static001.geekbang.org/account/avatar/00/17/4c/2f/85a8d26e.jpg","nickname":"055","note":"","ucode":"210A944276395F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5585,"discussion_content":"https://stackoverflow.com/questions/38339496/python-filternone-list-of-bools-behavior","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1566363423,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1452570,"avatar":"","nickname":"frank_","note":"","ucode":"658DBBC9BE337F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":33404,"discussion_content":" lambda x: x, æ˜¯ä¸€ä¸ª callable  è¿™æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1571120872,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":96812,"user_name":"Geek_59f23e","can_delete":false,"product_type":"c1","uid":1513783,"ip_address":"","ucode":"A463C6EB7447FD","user_header":"https://static001.geekbang.org/account/avatar/00/17/19/37/e0a9bf99.jpg","comment_is_top":false,"comment_ctime":1558513291,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"61688055435","product_id":100026901,"comment_content":"ç¬¬ä¸€é¢˜ï¼š<br>1ã€ä½¿ç”¨defaultdictåˆå§‹åŒ–è®¡æ•°å™¨æ›´æ–¹ä¾¿æ›´å¿«ï¼Œä¸ç”¨å†å¤šåšä¸€æ­¥inåˆ¤æ–­ï¼Œparseå‡½æ•°åªéœ€è¿”å›filterå¯¹è±¡ã€‚<br><br>2ã€è¯»å–å¤§æ–‡ä»¶æ—¶ä½¿ç”¨forå¾ªç¯éå†è¿­ä»£å™¨ï¼Œä¸å ç”¨å†…å­˜ç©ºé—´ï¼Œç”Ÿæˆä¸€è¡Œå¤„ç†ä¸€è¡Œï¼Œå°±æ­¤ä¾‹æ¥è¯´æ¯ä¸€è¡Œè¡Œå°¾éƒ½æ˜¯\\næ²¡æœ‰è·¨è¡Œå•è¯ï¼Œæ•…æ­¤æ–¹æ³•ä¸ç”¨è€ƒè™‘è¾¹ç•Œé—®é¢˜ï¼Œå› æ–‡ä»¶ä¸­æœ‰å¤šè¡Œ\\nï¼Œè¯»å–æ—¶åšä¸€æ­¥åˆ¤æ–­è·³è¿‡é¿å…å†è°ƒç”¨parseå‡½æ•°ã€‚<br><br>word_cnt = defaultdict(lambda: 0)<br><br>with open(&#39;in_big.txt&#39;, &#39;r&#39;) as fin:<br>    for line in fin:<br>        if line != &#39;\\n&#39;:<br>            for word in parse(line):<br>                word_cnt[word] += 1<br><br>ç¬¬äºŒé¢˜ï¼š<br>è¯´è¯´æ€è·¯ï¼Œå…·ä½“åº”è¯¥éœ€è¦æ­å»ºwebå®ç°å§ã€‚<br><br>1ã€serverè®¾ç½®ä¸Šä¼ ç›®å½•å­˜æ”¾20ä¸ª5Gæ–‡ä»¶ï¼Œå¼€å¯while Trueè¿›ç¨‹æ£€æµ‹ç½‘ç›˜æœ‰æ— æ•°æ®ï¼Œæ•°æ®ä¸ºç©ºæ—¶POSTç›®å½•ä¸­5Gæ–‡ä»¶ï¼Œä¸Šä¼ å®Œæ¯•åæœ¬åœ°åˆ é™¤æˆ–è€…å°†å…¶ç§»å‡ºä¸Šä¼ ç›®å½•ï¼Œç›´åˆ°ä¸Šä¼ ç›®å½•ä¸ºç©ºæ—¶ç»“æŸç¨‹åºã€‚<br><br>2ã€clientå¼€å¯while Trueè¿›ç¨‹æ£€æµ‹ç½‘ç›˜æœ‰æ— æ•°æ®ï¼Œæ•°æ®ä¸ä¸ºç©ºæ—¶GETä¸‹è½½5Gæ–‡ä»¶ï¼Œä¸‹è½½å®ŒæˆåDELETEè¯·æ±‚åˆ é™¤ç½‘ç›˜æ•°æ®ã€‚","like_count":14},{"had_liked":false,"id":96693,"user_name":"lmingzhi","can_delete":false,"product_type":"c1","uid":1014489,"ip_address":"","ucode":"72DBAF4FD184AF","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7a/d9/4feb4006.jpg","comment_is_top":false,"comment_ctime":1558488889,"is_pvip":false,"replies":[{"id":"34622","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"é«˜å±±æµæ°´","uid":"1513504","ctime":1558507676,"ip_address":"","comment_id":96693,"utype":1}],"discussion_count":2,"race_medal":0,"score":"48803129145","product_id":100026901,"comment_content":"# ç¬¬ä¸€é¢˜ï¼Œ ä¿®æ”¹parseå‡½æ•°ï¼Œä½¿å…¶å¯ä»¥æ›´æ–°word_cnt<br>import re<br>def parse(text, word_cnt):<br>    # è½¬ä¸ºå°å†™<br>    text = text.lower()    <br>    # ç”Ÿæˆæ‰€æœ‰å•è¯çš„åˆ—è¡¨<br>    word_list = re.findall(r&#39;\\w+&#39;, text) <br>    # æ›´æ–°å•è¯å’Œè¯é¢‘çš„å­—å…¸<br>    for word in word_list:<br>        word_cnt[word] = word_cnt.get(word,0) + 1<br>    return word_cnt<br><br># åˆå§‹åŒ–å­—å…¸<br>word_cnt = dict()<br>with open(&#39;in.txt&#39;, &#39;r&#39;) as fin:<br>    for text in fin.readlines():<br>        word_cnt = parse(text, word_cnt)<br>        print(len(word_cnt))<br><br># æŒ‰ç…§è¯é¢‘æ’åº<br>sorted_word_cnt = sorted(word_cnt.items(), key=lambda kv: kv[1], reverse=True)<br><br># å¯¼å‡º<br>with open(&#39;out.txt&#39;, &#39;w&#39;) as fout:<br>    for word, freq in word_and_freq:<br>        fout.write(&#39;{} {}\\n&#39;.format(word, freq))","like_count":12,"discussions":[{"author":{"id":1513504,"avatar":"https://static001.geekbang.org/account/avatar/00/17/18/20/75ea3b20.jpg","nickname":"é«˜å±±æµæ°´","note":"","ucode":"71E513B5937481","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":450973,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558507676,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2185264,"avatar":"","nickname":"Geek_14bbf0","note":"","ucode":"7B976390B50C3F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":306566,"discussion_content":"å¯¼å‡ºåº”è¯¥æ˜¯åœ¨æ’å¥½åºçš„listä¸­éå†ï¼Œä½ ç¬”è¯¯äº†","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1600319586,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":96624,"user_name":"è¨±æ•²æ•²","can_delete":false,"product_type":"c1","uid":1046681,"ip_address":"","ucode":"6486466820E7BF","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f8/99/8e760987.jpg","comment_is_top":false,"comment_ctime":1558481472,"is_pvip":false,"replies":[{"id":"34614","content":"è°¢è°¢ï¼ŒåŠ æ²¹ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"é«˜å±±æµæ°´","uid":"1513504","ctime":1558506531,"ip_address":"","comment_id":96624,"utype":1}],"discussion_count":1,"race_medal":0,"score":"44508154432","product_id":100026901,"comment_content":"è¿™é—¨è¯¾å¤ªå€¼äº† å“ˆå“ˆå“ˆ æˆ‘ä»¥å‰å­¦åˆ°çš„çœŸçš„toy python","like_count":11,"discussions":[{"author":{"id":1513504,"avatar":"https://static001.geekbang.org/account/avatar/00/17/18/20/75ea3b20.jpg","nickname":"é«˜å±±æµæ°´","note":"","ucode":"71E513B5937481","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":450940,"discussion_content":"è°¢è°¢ï¼ŒåŠ æ²¹ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558506531,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":96664,"user_name":"Pythoné«˜æ•ˆç¼–ç¨‹","can_delete":false,"product_type":"c1","uid":1325271,"ip_address":"","ucode":"B12B5F43B4335E","user_header":"https://static001.geekbang.org/account/avatar/00/14/38/d7/de6832df.jpg","comment_is_top":false,"comment_ctime":1558485970,"is_pvip":false,"replies":[{"id":"34618","content":"æƒ³åˆ° Counter å¾ˆæ£’ï¼Œä½†æ˜¯è¿™æ ·æ³¨æ„è¿™æ ·ä¸è¡Œå“¦ï¼ŒCounter åˆå§‹åŒ–è¾“å…¥ str ä¼šæŠŠ str è§†ä½œä¸€ä¸ªå®¹å™¨ï¼Œæœ€å Counter é‡Œå­˜çš„å…¨æ˜¯å•ä¸ªå­—ç¬¦å’Œå®ƒçš„æ¬¡æ•°ï¼Œè€Œä¸æ˜¯å•è¯ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"é«˜å±±æµæ°´","uid":"1513504","ctime":1558506951,"ip_address":"","comment_id":96664,"utype":1}],"discussion_count":1,"race_medal":0,"score":"35918224338","product_id":100026901,"comment_content":"ç¬¬ä¸€é—®:<br>with open(&quot;in.txt&quot;, &quot;rt&quot;) as f:<br>    for line in f:<br>        Counter.update(line)","like_count":8,"discussions":[{"author":{"id":1513504,"avatar":"https://static001.geekbang.org/account/avatar/00/17/18/20/75ea3b20.jpg","nickname":"é«˜å±±æµæ°´","note":"","ucode":"71E513B5937481","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":450960,"discussion_content":"æƒ³åˆ° Counter å¾ˆæ£’ï¼Œä½†æ˜¯è¿™æ ·æ³¨æ„è¿™æ ·ä¸è¡Œå“¦ï¼ŒCounter åˆå§‹åŒ–è¾“å…¥ str ä¼šæŠŠ str è§†ä½œä¸€ä¸ªå®¹å™¨ï¼Œæœ€å Counter é‡Œå­˜çš„å…¨æ˜¯å•ä¸ªå­—ç¬¦å’Œå®ƒçš„æ¬¡æ•°ï¼Œè€Œä¸æ˜¯å•è¯ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558506951,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":97248,"user_name":"code2","can_delete":false,"product_type":"c1","uid":1281792,"ip_address":"","ucode":"BBA5748FB6A01C","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/8OPzdpDraQMvCNWAicicDt54sDaIYJZicBLfMyibXVs4V0ZibEdkZlbzxxL7aGpRoeyvibag5LaAaaGKSdwYQMY2hUrQ/132","comment_is_top":false,"comment_ctime":1558619800,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"31623390872","product_id":100026901,"comment_content":"çœ‹åˆ°ä¸€ç‰‡çŸ­æ–‡ï¼Œæ‘˜å½•å¦‚ä¸‹ï¼š<br>æ•°æ®ç§‘å­¦å®¶æ˜¯â€œæ¯”è½¯ä»¶å·¥ç¨‹å¸ˆæ›´æ“…é•¿ç»Ÿè®¡å­¦ï¼Œæ¯”ç»Ÿè®¡å­¦å®¶æ›´æ“…é•¿è½¯ä»¶å·¥ç¨‹çš„äººâ€ã€‚è®¸å¤šæ•°æ®ç§‘å­¦å®¶éƒ½å…·æœ‰ç»Ÿè®¡å­¦èƒŒæ™¯ï¼Œä½†æ˜¯åœ¨è½¯ä»¶å·¥ç¨‹æ–¹é¢çš„ç»éªŒç”šå°‘ã€‚æˆ‘æ˜¯ä¸€åèµ„æ·±æ•°æ®ç§‘å­¦å®¶ï¼Œåœ¨Stackoverflowçš„pythonç¼–ç¨‹æ–¹é¢æ’åå‰1%ï¼Œå¹¶ä¸è®¸å¤šï¼ˆåˆçº§ï¼‰æ•°æ®ç§‘å­¦å®¶å…±äº‹ã€‚ä»¥ä¸‹æ˜¯æˆ‘ç»å¸¸çœ‹åˆ°çš„10å¤§å¸¸è§é”™è¯¯ï¼Œæœ¬æ–‡å°†ä¸ºä½ ç›¸å…³è§£å†³æ–¹æ¡ˆï¼š<br><br>åˆ å»å‰ä¹ä¸ªåªä½™ä¸€ä¸ªï¼š<br><br>ä½¿ç”¨jupyter notebook<br><br>","like_count":7,"discussions":[{"author":{"id":1281792,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/8OPzdpDraQMvCNWAicicDt54sDaIYJZicBLfMyibXVs4V0ZibEdkZlbzxxL7aGpRoeyvibag5LaAaaGKSdwYQMY2hUrQ/132","nickname":"code2","note":"","ucode":"BBA5748FB6A01C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":350055,"discussion_content":"ä¸æ¨è","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1613694000,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1710643,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/vwv0qiaibQzcTP6yIDJXOJLdh64CnBSaOceFFuWArVHQcwicIsebwYbKJ69OSJrxeXJyawtNIINcjo3V3hgg5BW1A/132","nickname":"MuBo","note":"","ucode":"46402B9B7D7B1E","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":327023,"discussion_content":"å˜›æ„æ€ï¼Œæ˜¯æ¨èä½¿ç”¨jupyterï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605714967,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108299,"user_name":"ç§ç§","can_delete":false,"product_type":"c1","uid":1543959,"ip_address":"","ucode":"91A70789319318","user_header":"https://static001.geekbang.org/account/avatar/00/17/8f/17/bae853bb.jpg","comment_is_top":false,"comment_ctime":1561715192,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"27331518968","product_id":100026901,"comment_content":"ä¸ç®¡æœ€åä¸€ä¸ªå•è¯æ–­ä¸æ–­éƒ½å¯ä»¥æ”¾åˆ°ä¸‹æ¬¡ä¸€èµ·ï¼Œæ€»ä¸ä¼šé”™ã€‚æ•´ä¸ªå•è¯ï¼Œæ”¾åˆ°ä¸‹æ¬¡æ²¡æ¯›ç—…ï¼Œä¸­æ–­çš„å•è¯æ”¾åˆ°ä¸‹æ¬¡ï¼Œç†åº”å¦‚æ­¤ã€‚","like_count":6},{"had_liked":false,"id":116499,"user_name":"ç‹è±ª","can_delete":false,"product_type":"c1","uid":1545937,"ip_address":"","ucode":"EB94C142FB3AA2","user_header":"https://wx.qlogo.cn/mmopen/vi_32/c4taseHGbqaUUpulL8ACjbA1dGxqBiargeRjN43m7MJ2ImIvHvavBs11CePkSQdBVPiavqCmzT12kZHf9Kd48eTQ/132","comment_is_top":false,"comment_ctime":1563858701,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"23038695181","product_id":100026901,"comment_content":"è€å¸ˆï¼Œè¿™æ ·ç»Ÿè®¡è¯é¢‘æ•ˆç‡åº”è¯¥ä¼šé«˜ä¸€äº›å§<br>word_cnt={}<br>for word in word_list:<br>    word_cnt[word] = word_cnt.get(word, 0) + 1","like_count":6},{"had_liked":false,"id":97030,"user_name":"å®ä»”","can_delete":false,"product_type":"c1","uid":1013493,"ip_address":"","ucode":"A0F17DFF99DB21","user_header":"https://static001.geekbang.org/account/avatar/00/0f/76/f5/e3f5bd8d.jpg","comment_is_top":false,"comment_ctime":1558574187,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"23033410667","product_id":100026901,"comment_content":"word_cnt = dict()ï¼è€å¸ˆä½ ä¹‹å‰ä¸æ˜¯è¯´è¿‡ï¼šword_cnt = ï½›ï½è¿™æ ·åˆå§‹åŒ–å­—å…¸ä¸æ˜¯æ•ˆç‡æ›´é«˜å—ï¼Ÿä¸ºä»€ä¹ˆä½ ä»£ç é‡Œç”¨äº†å‡½æ•°åˆå§‹åŒ–å­—å…¸","like_count":5,"discussions":[{"author":{"id":1449159,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/c7/890e4c58.jpg","nickname":"å­™ä½³è·¯","note":"","ucode":"E5C7DEFB85EDD4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":345881,"discussion_content":"æˆ‘çš„ç†è§£æ˜¯ç”¨ { } ç”Ÿæˆçš„dict, éœ€è¦åˆ¤æ–­keyæ˜¯å¦å­˜åœ¨, ç„¶åé€‰æ‹©åœ¨åŸåŸºç¡€ä¸Š++, æˆ–è€…ç›´æ¥è®¾ç½®ä¸º1.\nç”¨äº† defaultdict å¯ä»¥çœå»è¿™ä¸€æ­¥, å¯¹é‡åˆ°çš„æ¯ä¸€ä¸ªå•è¯, æ”¾è¿›ç”¨defaultdictç”Ÿæˆçš„è¯å…¸é‡Œç›´æ¥ += 1","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611807220,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":96843,"user_name":"Lone","can_delete":false,"product_type":"c1","uid":1543230,"ip_address":"","ucode":"7EDE7F9407F1BF","user_header":"https://static001.geekbang.org/account/avatar/00/17/8c/3e/b4ae5ae2.jpg","comment_is_top":false,"comment_ctime":1558518353,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"23033354833","product_id":100026901,"comment_content":"ç¬¬ä¸€é¢˜æ‰“å¡<br>import re<br><br>def parse(text, word_cnt):<br>    text = text.lower()<br>    # print(&quot;--------------------{}&quot;.format(text))<br>    word_list = re.findall(r&quot;\\w+&quot;, text)<br>    # print(word_list)<br>    for word in word_list:<br>        word_cnt[word] = word_cnt.get(word, 0) + 1<br><br>    return word_cnt<br><br>word_cnt = dict()<br><br># è¯»å–æ–‡ä»¶<br>with open(&quot;.&#47;in.txt&quot;, &quot;r&quot;) as fin:<br>    for line in fin:<br>        word_cnt = parse(line, word_cnt)<br><br># print(word_cnt)<br><br>word_and_freq = sorted(word_cnt.items(), key=lambda kv: kv[1], reverse=True)<br><br># print(word_and_freq)<br>with open(&quot;.&#47;out.txt&quot;, &quot;w&quot;) as fout:<br>    for word, freq in word_and_freq:<br>        fout.write(&quot;{} {}\\n&quot;.format(word, freq))<br>","like_count":5},{"had_liked":false,"id":97227,"user_name":"........","can_delete":false,"product_type":"c1","uid":1236198,"ip_address":"","ucode":"D54E7F428E7F49","user_header":"https://static001.geekbang.org/account/avatar/00/12/dc/e6/ea4b2c10.jpg","comment_is_top":false,"comment_ctime":1558615534,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18738484718","product_id":100026901,"comment_content":"from collections import defaultdict<br>import re <br><br>d = defaultdict(int)<br><br>with open(&#39;in.txt&#39;, &#39;r&#39;) as fin:<br>    text = fin.readline()<br>    while text:<br>        text = re.sub(r&#39;[^\\w ]&#39;, &#39;&#39;, text)<br>        text = text.lower()<br>        word_list = text.split(&#39; &#39;)<br>    <br>        word_list = filter(None, word_list)<br>        for word in word_list:   <br>            d[word] += 1<br>        text = fin.readline()<br>    <br>    # æŒ‰ç…§è¯é¢‘æ’åº<br>    sorted_word_cnt = sorted(d.items(), key=lambda kv: kv[1], reverse=True)<br>    <br><br><br><br>","like_count":4},{"had_liked":false,"id":96662,"user_name":"äººé—´ä¹å›­","can_delete":false,"product_type":"c1","uid":1350559,"ip_address":"","ucode":"4A203AB47FCF3C","user_header":"https://static001.geekbang.org/account/avatar/00/14/9b/9f/2cbc2a4f.jpg","comment_is_top":false,"comment_ctime":1558485880,"is_pvip":true,"replies":[{"id":"34617","content":"å¾ˆæ£’çš„æ€è·¯ï¼Œä½†æ˜¯æ³¨æ„å¦‚æœåŸå§‹æ–‡ä»¶åªæœ‰ä¸€è¡Œå‘¢ï¼Ÿä½ æƒ³è¯´çš„æ˜¯è¯»å–ä¸€å®šé•¿åº¦çš„å­—ç¬¦ä¸²å§","user_name":"ä½œè€…å›å¤","user_name_real":"é«˜å±±æµæ°´","uid":"1513504","ctime":1558506716,"ip_address":"","comment_id":96662,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18738355064","product_id":100026901,"comment_content":"ç¬¬ä¸€é“ï¼Œfor.line in finè¯»å–å•è¡Œï¼Œä½¿ç”¨result = yied lineè¿›è¡ŒåŒå‘ä¼ é€’ï¼Œç›´æ¥æŠŠlineç»™è®¡æ•°å™¨ï¼Œå…ˆåˆ¤æ–­lineç»“å°¾å¤„ï¼Œå¦‚æœæ˜¯å•è¯æˆ–è€…åŠä¸ªå•è¯ï¼Œåˆ™è¿”å›resultç»™ç”Ÿæˆå™¨ï¼Œæ‹¼æ¥åˆ°ä¸‹ä¸€ä¸ªlineå‰ï¼Œå¦‚æœæ˜¯Noneåˆ™ä¸æ‹¼æ¥ï¼Œç»§ç»­ç”Ÿæˆè¿™ä¸ªlineã€‚","like_count":4,"discussions":[{"author":{"id":1513504,"avatar":"https://static001.geekbang.org/account/avatar/00/17/18/20/75ea3b20.jpg","nickname":"é«˜å±±æµæ°´","note":"","ucode":"71E513B5937481","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":450958,"discussion_content":"å¾ˆæ£’çš„æ€è·¯ï¼Œä½†æ˜¯æ³¨æ„å¦‚æœåŸå§‹æ–‡ä»¶åªæœ‰ä¸€è¡Œå‘¢ï¼Ÿä½ æƒ³è¯´çš„æ˜¯è¯»å–ä¸€å®šé•¿åº¦çš„å­—ç¬¦ä¸²å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558506716,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":96605,"user_name":"ITèœ—å£³-Tango","can_delete":false,"product_type":"c1","uid":1000612,"ip_address":"","ucode":"92330844C1EF9C","user_header":"https://static001.geekbang.org/account/avatar/00/0f/44/a4/7a45d979.jpg","comment_is_top":false,"comment_ctime":1558457960,"is_pvip":true,"replies":[{"id":"34613","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"é«˜å±±æµæ°´","uid":"1513504","ctime":1558506491,"ip_address":"","comment_id":96605,"utype":1}],"discussion_count":1,"race_medal":1,"score":"18738327144","product_id":100026901,"comment_content":"ç¬¬ä¸ƒå¤©æ‰“å¡ã€‚","like_count":4,"discussions":[{"author":{"id":1513504,"avatar":"https://static001.geekbang.org/account/avatar/00/17/18/20/75ea3b20.jpg","nickname":"é«˜å±±æµæ°´","note":"","ucode":"71E513B5937481","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":450931,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558506491,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":104495,"user_name":"-Deeplikesea-","can_delete":false,"product_type":"c1","uid":1546184,"ip_address":"","ucode":"1B42C4EF1CD598","user_header":"https://static001.geekbang.org/account/avatar/00/17/97/c8/7b34d2fa.jpg","comment_is_top":false,"comment_ctime":1560764841,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"14445666729","product_id":100026901,"comment_content":"è€å¸ˆï¼Œæˆ‘è¿˜æ²¡æœ‰çœ‹åˆ°githubçš„ä»£ç å‘¢ï¼Ÿæƒ³å­¦ä¹ ä¸€ä¸‹æ‚¨æ€ä¹ˆå†™çš„ã€‚","like_count":3,"discussions":[{"author":{"id":2922136,"avatar":"https://static001.geekbang.org/account/avatar/00/2c/96/98/89b96cda.jpg","nickname":"ä¸‰å¹´äºŒç­é‚±å°ä¸œ","note":"","ucode":"909B49C63C8EC6","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":557080,"discussion_content":"æ‰¾åˆ°äº†å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647654649,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":96751,"user_name":"mykgzy","can_delete":false,"product_type":"c1","uid":1543823,"ip_address":"","ucode":"4E47A0546987FA","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKCNH9kd9GibX3vibX9osjtWBvP5ibe8iciacMREk4bcDEgfrDQ9EKs8bQlHoVVhW9CXO8WHM5Ag26S9cA/132","comment_is_top":false,"comment_ctime":1558497402,"is_pvip":false,"replies":[{"id":"34630","content":"è¿™ä¹Ÿæ˜¯è¿™é—¨è¯¾çš„æ ¸å¿ƒä»·å€¼ä¹‹ä¸€ï¼Œæ„¿èƒ½æœ‰æ‰€æ”¶è·","user_name":"ä½œè€…å›å¤","user_name_real":"é«˜å±±æµæ°´","uid":"1513504","ctime":1558507944,"ip_address":"","comment_id":96751,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14443399290","product_id":100026901,"comment_content":"çœ‹ç€æœ‰ç‚¹è´¹åŠ›ï¼Œä½†æ„Ÿè§‰è¶…å€¼ï¼Œçœ‹åˆ°äº†å¥½å¤špython ä¹¦éƒ½æ²¡æåˆ°çš„ç”Ÿäº§ç½‘ä¸­æ¶‰åŠçš„çŸ¥è¯†ã€‚","like_count":3,"discussions":[{"author":{"id":1513504,"avatar":"https://static001.geekbang.org/account/avatar/00/17/18/20/75ea3b20.jpg","nickname":"é«˜å±±æµæ°´","note":"","ucode":"71E513B5937481","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451004,"discussion_content":"è¿™ä¹Ÿæ˜¯è¿™é—¨è¯¾çš„æ ¸å¿ƒä»·å€¼ä¹‹ä¸€ï¼Œæ„¿èƒ½æœ‰æ‰€æ”¶è·","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558507944,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":235830,"user_name":"äº‘èˆèˆ","can_delete":false,"product_type":"c1","uid":1219179,"ip_address":"","ucode":"19B1597DB49819","user_header":"https://static001.geekbang.org/account/avatar/00/12/9a/6b/e8ef2989.jpg","comment_is_top":false,"comment_ctime":1595215369,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10185149961","product_id":100026901,"comment_content":"å­¦åˆ°å¾ˆå¤šï¼Œæ¥¼ä¸»çš„é—®é¢˜è®¾è®¡çš„ä¹Ÿå¾ˆç²¾å¦™ï¼Œç”¨çš„æ˜¯â€œä½ è®¡åˆ’æŠŠå®¶é‡Œçš„ 100GB æ•°æ®ä¼ é€åˆ°å…¬å¸â€ï¼Œè€Œä¸æ˜¯â€œä½ è®¡åˆ’æŠŠå…¬å¸çš„ 100GB æ•°æ®ä¼ é€åˆ°å®¶é‡Œâ€","like_count":2},{"had_liked":false,"id":185093,"user_name":"å‘å—","can_delete":false,"product_type":"c1","uid":1325700,"ip_address":"","ucode":"E6072AD7CA6798","user_header":"https://static001.geekbang.org/account/avatar/00/14/3a/84/70340e87.jpg","comment_is_top":false,"comment_ctime":1583480542,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10173415134","product_id":100026901,"comment_content":"```python<br>from collections import defaultdict<br>import re<br><br>f = open(&quot;in.txt&quot;, mode=&quot;r&quot;, encoding=&quot;utf-8&quot;)<br>d = defaultdict(int)<br><br>for line in f:<br>    for word in filter(lambda x: x, re.split(r&quot;\\s&quot;, re.sub(r&#39;[^\\w ]&#39;, &#39; &#39;, line))):<br>        d[word] += 1<br><br>a = sorted(d.items(), key=lambda x: x[1], reverse=True)<br>print(a)<br>```","like_count":2},{"had_liked":false,"id":177838,"user_name":"edward0079","can_delete":false,"product_type":"c1","uid":1544656,"ip_address":"","ucode":"72F89DCD6A0A2D","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epc3c8hB9Lg0I1NibzH6h9qjur8XvG9Tto0NRp1Q0udCgmS7C7vUb4z5bnXMqy91GB76iaYP0icPiaqgg/132","comment_is_top":false,"comment_ctime":1581513068,"is_pvip":false,"replies":[{"id":"69473","content":"è¯´çš„å¾ˆèµï¼Œå¾ˆè¯¦ç»†","user_name":"ä½œè€…å›å¤","comment_id":177838,"uid":"1259521","ip_address":"","utype":1,"ctime":1581883622,"user_name_real":"Jingxiao"}],"discussion_count":1,"race_medal":0,"score":"10171447660","product_id":100026901,"comment_content":"åˆ¤æ–­æ˜¯å¦ä¸ºNoneçš„æƒ…å†µ<br><br>if not x<br><br>if x is None<br><br>if not x is None<br><br> <br><br>if x is not None`æ˜¯æœ€å¥½çš„å†™æ³•ï¼Œæ¸…æ™°ï¼Œä¸ä¼šå‡ºç°é”™è¯¯ï¼Œä»¥ååšæŒä½¿ç”¨è¿™ç§å†™æ³•ã€‚<br><br>ä½¿ç”¨if not xè¿™ç§å†™æ³•çš„å‰ææ˜¯ï¼šå¿…é¡»æ¸…æ¥šxç­‰äºNone,  False, ç©ºå­—ç¬¦ä¸²&quot;&quot;, 0, ç©ºåˆ—è¡¨[], ç©ºå­—å…¸{}, ç©ºå…ƒç»„()æ—¶å¯¹ä½ çš„åˆ¤æ–­æ²¡æœ‰å½±å“æ‰è¡Œ","like_count":2,"discussions":[{"author":{"id":1259521,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJJOlibibPFEWOib8ib7RtfAtxND5FUqCxxoeTuLAbBI9ic23xuwdXT4IyiaWq3Fic9RgEAYI0lBTbEp2rcg/132","nickname":"Jingxiao","note":"","ucode":"EB966BB87132F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":483565,"discussion_content":"è¯´çš„å¾ˆèµï¼Œå¾ˆè¯¦ç»†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581883622,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":150733,"user_name":"Paul Shan","can_delete":false,"product_type":"c1","uid":1593140,"ip_address":"","ucode":"32D99989028284","user_header":"","comment_is_top":false,"comment_ctime":1573605724,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10163540316","product_id":100026901,"comment_content":"IO æ˜¯ç¦»å¼€CPUå’Œå†…å­˜ç³»ç»Ÿçš„æ“ä½œï¼Œå¦‚æœä¸è€ƒè™‘å¤§å°å’Œé”™è¯¯å¤„ç†ï¼Œå‡ºé”™å‡ ä¹æ˜¯å¿…ç„¶çš„ã€‚<br>æ€è€ƒé¢˜1<br>æŒ‰ç…§è¡Œå¼€è¯»å–ï¼Œè¯»å–ä¸€è¡Œæˆ–è€…è‹¥å¹²è¡Œï¼Œç„¶åå†™å…¥æ–‡ä»¶ï¼Œè¿™æ¬¡éœ€è¦appendæ“ä½œï¼Œåœ¨å·²ç»å†™å…¥çš„æ–‡ä»¶ä¸‹å†è¿½åŠ å†…å®¹ã€‚<br>æ€è€ƒé¢˜2<br>ç”¨Serverç«¯çš„æ—¶é—´æ¥åŒæ­¥å†…å®¹ï¼Œå®¶é‡Œçš„ç”µè„‘ä¸æ–­çš„å¾€æœåŠ¡ç«¯å†™å…¥ï¼Œå¦‚æœæ»¡äº†å°±ç­‰å¾…ï¼Œæ¯å†™å…¥ä¸€å®šæ•°é‡ï¼Œä¾‹å¦‚1Gï¼Œå°±åŠ ä¸€æ¡åˆ†éš”ç¬¦æ–‡ä»¶ã€‚åŠå…¬å®¤çš„ç”µè„‘å°±ä¸æ–­çš„ä»æœåŠ¡ç«¯è¯»å–ï¼Œå…ˆè¯»å–åˆ°åˆ†éš”ç¬¦æ–‡ä»¶ï¼Œç„¶åæŠŠæ—¶é—´æ—©äºåˆ†éš”ç¬¦æ–‡ä»¶çš„æ–‡ä»¶éƒ½è¯»å–ï¼Œç„¶ååˆ é™¤æ‰€æœ‰è¯»è¿‡çš„æ–‡ä»¶åŒ…æ‹¬åˆ†éš”ç¬¦æ–‡ä»¶ã€‚","like_count":2},{"had_liked":false,"id":130374,"user_name":"å­™æœ‰èƒ½å¸Œ","can_delete":false,"product_type":"c1","uid":1057071,"ip_address":"","ucode":"3FE607B46018F4","user_header":"https://static001.geekbang.org/account/avatar/00/10/21/2f/85a3c897.jpg","comment_is_top":false,"comment_ctime":1567436475,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"10157371067","product_id":100026901,"comment_content":"re.sub(r&#39;[^\\w ]&#39;, &#39; &#39;, text) æ˜¯æ€ä¹ˆæ›¿æ¢æ‰æ ‡ç‚¹ç¬¦å·å’Œæ¢è¡Œçš„ï¼ŸæŸ¥äº†åŠå¤©ä¹Ÿæ²¡ç†è§£ã€‚","like_count":2,"discussions":[{"author":{"id":1527672,"avatar":"https://static001.geekbang.org/account/avatar/00/17/4f/78/1fe13460.jpg","nickname":"åŠ›ç»´","note":"","ucode":"BF4E04AEE52AC6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":51080,"discussion_content":"    # æ­£åˆ™è§£æï¼š\n    # r&#39;...&#39;ï¼š æ­£åˆ™å‘½ä»¤å­—ç¬¦ä¸²\n    # [^x]ï¼š xå–å\n    # \\w ï¼š å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿ã€æ±‰å­—\n    # r&#39;[^\\w]&#39;ï¼š æ‰€æœ‰ä¸æ˜¯å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿ã€æ±‰å­—çš„å­—ç¬¦\n    # re.sub(r&#39;...&#39;,&#39; &#39;,text) : å°†ç¬¬ä¸€å‚æ•°æ›¿æ¢æˆç¬¬äºŒå‚æ•°","likes_number":11,"is_delete":false,"is_hidden":false,"ctime":1573808528,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1222119,"avatar":"https://static001.geekbang.org/account/avatar/00/12/a5/e7/815acbf7.jpg","nickname":"warm_day","note":"","ucode":"3CD078E809497C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":80032,"discussion_content":"è¿™ä¸ªæ­£åˆ™ä¸é”™https://tool.oschina.net/uploads/apidocs/jquery/regexp.html","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576139241,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1250380,"avatar":"https://static001.geekbang.org/account/avatar/00/13/14/4c/c824b5fe.jpg","nickname":"Roll","note":"","ucode":"A2F2ADA7C9CAB3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":20788,"discussion_content":"æŸ¥äº†ä¸‹^æ˜¯å–å","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569375630,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":97156,"user_name":"ä¹”å…‹","can_delete":false,"product_type":"c1","uid":1315273,"ip_address":"","ucode":"28A797A4235B78","user_header":"https://static001.geekbang.org/account/avatar/00/14/11/c9/c3eae895.jpg","comment_is_top":false,"comment_ctime":1558598732,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10148533324","product_id":100026901,"comment_content":"<br>ç¬¬ä¸€é¢˜ï¼š<br>from collections import defaultdict<br>import re<br><br>dic = defaultdict(int)<br><br>with open(&quot;in.txt&quot;, &#39;r&#39;) as f:<br>    for line in f:<br>        line = re.sub(r&#39;[^\\w]&#39;, &#39; &#39;, line)<br>        for word in re.split(r&#39;[\\s\\n]+&#39;, line):<br>            word = word.lower()<br>            if word:<br>                dic[word] += 1<br>dic = sorted(dic.items())<br>print(dic)<br><br>ç¬¬äºŒé¢˜ï¼šç±»ä¼¼äºsocketç¼–ç¨‹<br>1ã€è®°å½•æœåŠ¡å™¨ä¸Šæ–‡ä»¶çš„MD5å€¼ã€‚ç„¶åæœåŠ¡å™¨ä¸Šä¼ 5Gæ–‡ä»¶åˆ°ä¸­ç»§æœåŠ¡å™¨ï¼Œç„¶åå°†å…‰æ ‡ç‚¹è®°å½•ä¸‹æ¥ï¼Œå½“æœåŠ¡ç«¯ä¸Šä¼ å®Œåå°†MD5å€¼ï¼Œå…‰æ ‡ä½ç½®ï¼Œå½“å‰ä¸Šä¼ çš„æ–‡ä»¶é•¿åº¦ä¼ ç»™å®¢æˆ·ç«¯ï¼›<br>2ã€å®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡å™¨çš„ä¿¡æ¯å¹¶è®°å½•ä¸‹æ¥ï¼Œä»ä¸­ç»§æœåŠ¡å™¨ä¸‹è½½æ–‡ä»¶å†™å…¥æœ¬åœ°ï¼Œä¸‹è½½å®Œåå¯¹æ¯”æ–‡ä»¶é•¿åº¦ï¼Œä¸€åˆ‡OKå°±åˆ é™¤ä¸­ç»§æœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶ï¼Œå¹¶å‘Šè¯‰æœåŠ¡å™¨å¯ä»¥ç»§ç»­ä¼ äº†ã€‚è¿™æ ·å¾ªç¯ï¼Œç›´åˆ°å®Œæˆã€‚","like_count":2},{"had_liked":false,"id":96822,"user_name":"zxq","can_delete":false,"product_type":"c1","uid":1542076,"ip_address":"","ucode":"E5AA95922DC791","user_header":"https://static001.geekbang.org/account/avatar/00/17/87/bc/eda72771.jpg","comment_is_top":false,"comment_ctime":1558515900,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"10148450492","product_id":100026901,"comment_content":"è€å¸ˆï¼Œæƒ³è¯·é—®ä¸€ä¸‹pythonå…³äºçº¿ç¨‹ç®¡ç†æœºåˆ¶ï¼Œä¸¾ä¸ªä¾‹å­æ¥è¯´ï¼šæˆ‘æœ‰ä¸¤ä¸ªç¨‹åºread.pyå’Œwrite.pyï¼Œä¸€ä¸ªæ˜¯è´Ÿè´£è¯»å–info.txtå†…å®¹ï¼Œè€Œå¦ä¸€ä¸ªæ˜¯å°†æ•°æ®å†™å…¥è¿™ä¸ªtxtã€‚ç”±äºæˆ‘ä¸çŸ¥é“ä¸¤ä¸ªpythonç¨‹åºä¼šä¸ä¼šåŒæ—¶è¢«è°ƒç”¨ï¼Œå‡è®¾è°ƒç”¨write.pyå†™å…¥æ•°æ®æ—¶ï¼Œå°šæœªé‡Šæ”¾txtçš„ç«¯å£ï¼Œè¿™æ—¶å€™read.pyè¢«è°ƒç”¨æ¥è¯»å–æ•°æ®ï¼Œè¿™æ—¶å€™å°±æœ‰å†²çªäº†ã€‚pythonå¦‚ä½•å¤„ç†è¿™æ ·çš„æœºåˆ¶å‘¢ï¼Ÿå¦‚ä½•ä¼˜åŒ–è¿™ä¸¤ä¸ªpyæ–‡ä»¶ï¼Œå¯ä¸å¯ä»¥é€šè¿‡è°ƒç”¨ç«¯å£å ç”¨çŠ¶æ€æ¥è§£å†³å‘¢ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1636363,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/bGrI3qhTPVgWVxSAibUu2XsFaNr3TFO08NhKcnVzW6kQPKh9kd8s6von8AORxDjRXvJXB1yibafb4nsPOzD5NWXQ/132","nickname":"yonguo_dev","note":"","ucode":"49E27086BF9437","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5989,"discussion_content":"æ‰‹åŠ¨åŠ é”","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1566568838,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":96633,"user_name":"vivien_zh","can_delete":false,"product_type":"c1","uid":1137491,"ip_address":"","ucode":"3C029219C90C14","user_header":"https://static001.geekbang.org/account/avatar/00/11/5b/53/200fda62.jpg","comment_is_top":false,"comment_ctime":1558482575,"is_pvip":false,"replies":[{"id":"34616","content":"å¤šå®è·µï¼Œå¤šç¼–ç ï¼Œå¤šæ€è€ƒï¼Œä¸€å®šæ²¡é—®é¢˜çš„","user_name":"ä½œè€…å›å¤","comment_id":96633,"uid":"1513504","ip_address":"","utype":1,"ctime":1558506562,"user_name_real":"é«˜å±±æµæ°´"}],"discussion_count":1,"race_medal":0,"score":"10148417167","product_id":100026901,"comment_content":"åŠªåŠ›è·Ÿä¸Šè€å¸ˆçš„è¿›åº¦ã€‚","like_count":2,"discussions":[{"author":{"id":1513504,"avatar":"https://static001.geekbang.org/account/avatar/00/17/18/20/75ea3b20.jpg","nickname":"é«˜å±±æµæ°´","note":"","ucode":"71E513B5937481","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":450943,"discussion_content":"å¤šå®è·µï¼Œå¤šç¼–ç ï¼Œå¤šæ€è€ƒï¼Œä¸€å®šæ²¡é—®é¢˜çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558506562,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":211549,"user_name":"Steve","can_delete":false,"product_type":"c1","uid":1072131,"ip_address":"","ucode":"9C4E9E62A79C3A","user_header":"https://static001.geekbang.org/account/avatar/00/10/5c/03/370ebbc8.jpg","comment_is_top":false,"comment_ctime":1587981354,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5882948650","product_id":100026901,"comment_content":"ç¬¬ä¸€é¢˜ï¼šåªæ˜¯ç¨å¾®æ”¹äº†ä¸€ä¸‹ä»£ç ï¼ŒæŠŠä¸€æ¬¡å…¨éƒ¨è¯»å…¥æ¢æˆæ¯æ¬¡è¯»ä¸€è¡Œï¼Œå°†word_cntæ‹¿åˆ°parseå‡½æ•°å¤–é¢ï¼Œæœ€åå†ä¸€èµ·sortingã€‚ä½†è¿™æ˜¯ä¸æ˜¯ç ´åäº†å°è£…ï¼Ÿ<br>import re<br><br>def parse(text, word_cnt):<br>    text = re.sub(r&#39;[^\\w ]&#39;, &#39; &#39;, text)<br><br>    text = text.lower()<br><br>    word_list = text.split(&#39; &#39;)<br><br>    word_list = filter(None, word_list)<br><br>    for word in word_list:<br>        if word not in word_cnt:<br>            word_cnt[word] = 0<br>        word_cnt[word] += 1<br>       <br>    return<br><br>word_cnt = {}<br><br>with open(&#39;in.txt&#39;, &#39;r&#39;) as fin:<br>    for line in fin:<br>        parse(line, word_cnt)<br><br>sorted_word_cnt = sorted(word_cnt.items(), key=lambda kv: kv[1], reverse=True)<br><br>with open(&#39;out.txt&#39;, &#39;w&#39;) as fout:<br>    for word, freq in sorted_word_cnt:<br>        fout.write(&#39;{} {}\\n&#39;.format(word, freq))","like_count":1,"discussions":[{"author":{"id":1995257,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/71/f9/85329b42.jpg","nickname":"åšä¸€ä¸ªå¯é çš„UDP","note":"","ucode":"2428ED20AD3398","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":263003,"discussion_content":"å’Œæˆ‘çš„æ€è·¯å®Œå…¨ç›¸åŒå˜»å˜»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589161873,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":201830,"user_name":"ğŸŒ»","can_delete":false,"product_type":"c1","uid":1509651,"ip_address":"","ucode":"9B4D8CA8C09A70","user_header":"https://static001.geekbang.org/account/avatar/00/17/09/13/d762ce74.jpg","comment_is_top":false,"comment_ctime":1585842174,"is_pvip":false,"replies":[{"id":"75932","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","comment_id":201830,"uid":"1513504","ip_address":"","utype":1,"ctime":1586150317,"user_name_real":"é«˜å±±æµæ°´"}],"discussion_count":1,"race_medal":0,"score":"5880809470","product_id":100026901,"comment_content":"ç¬¬ä¸€é—®ï¼š<br><br>import re<br>from collections import defaultdict<br>from pathlib import Path<br><br><br>def parse(text, count):<br>    words = re.split(r&#39;\\W&#39;, text.lower())<br><br>    for word in words:<br>        count[word] += 1<br>    return count<br><br>count = defaultdict(int)<br>with open(&#39;in.txt&#39;, &#39;r&#39;) as f:<br>    for line in f.readlines():<br>        count = parse(line, count)<br>        <br># æ’åº<br>count.pop(&#39;&#39;)<br>sort_by_value = sorted(count.items(), key=lambda x: x[1] * -1)<br><br><br>Path(&#39;out.txt&#39;).touch()<br><br>with open(&#39;out.txt&#39;, &#39;w&#39;) as f:<br>    for word, count in sort_by_value:<br>        f.writelines(&#39;{}: {}\\n&#39;.format(word, count))","like_count":1,"discussions":[{"author":{"id":1513504,"avatar":"https://static001.geekbang.org/account/avatar/00/17/18/20/75ea3b20.jpg","nickname":"é«˜å±±æµæ°´","note":"","ucode":"71E513B5937481","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490431,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586150317,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":142755,"user_name":"yangyangyang","can_delete":false,"product_type":"c1","uid":1165027,"ip_address":"","ucode":"A8392F00F2F1FA","user_header":"https://static001.geekbang.org/account/avatar/00/11/c6/e3/21d5f2e3.jpg","comment_is_top":false,"comment_ctime":1571493326,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5866460622","product_id":100026901,"comment_content":"å¥½éš¾å‘€","like_count":1},{"had_liked":false,"id":104517,"user_name":"WANG","can_delete":false,"product_type":"c1","uid":1014839,"ip_address":"","ucode":"40795CDD7734F8","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7c/37/a747c9f2.jpg","comment_is_top":false,"comment_ctime":1560771043,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5855738339","product_id":100026901,"comment_content":"# ç¬¬ä¸€é—®<br><br>import re<br>from collections import Counter<br><br><br>def parse_file(file):<br>    with open(file, &#39;r&#39;, encoding=&#39;utf8&#39;) as f:<br>        result = f.read()<br>        text = re.sub(r&#39;[^\\w ]&#39;, &#39;&#39;, result).lower().split() <br>        return text<br><br><br>def count_word(word):<br>    text = dict(Counter(word))<br>    count_word = dict(sorted(text.items(), key=lambda x: x[1], reverse=True))<br>    with open(&#39;out.txt&#39;, &#39;w&#39;, encoding=&#39;utf8&#39;) as f:<br>        for k,v in count_word.items():<br>            f.write(&#39;{}  {}\\n&#39;.format(k,v))<br><br><br>word = parse_file(&#39;in&#39;)<br><br>count_word(word)","like_count":1},{"had_liked":false,"id":101869,"user_name":"å»ºå¼º","can_delete":false,"product_type":"c1","uid":1397126,"ip_address":"","ucode":"62B03D0E0C64EC","user_header":"https://static001.geekbang.org/account/avatar/00/15/51/86/b5fd8dd8.jpg","comment_is_top":false,"comment_ctime":1560005403,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5854972699","product_id":100026901,"comment_content":"ç”±äºæœ¬äººåˆšå­¦Pythonï¼Œè¿™æ˜¯ç¬¬ä¸€æ¬¡æ­£å¼å†™Pythonç¨‹åºï¼Œç»éªŒä¸èƒ½åŠ›éƒ½ä¸è¶³ï¼Œè¿˜è¯·è€å¸ˆå¤šæŒ‡æ­£ï¼Œå—ç¯‡å¹…é™åˆ¶ï¼Œä¸¤ä¸ªæ€è€ƒé¢˜çš„æºç¨‹åºæˆ‘åˆ†ä¸ºä¸¤æ¬¡æäº¤<br>æ€è€ƒé¢˜1ï¼Œæºç¨‹åºå¦‚ä¸‹ï¼Œ:<br>import re<br><br># è¯é¢‘ç»Ÿè®¡<br>#=====================å‡½æ•°parseå®šä¹‰================<br>def parse(text,word_cnt):<br>    <br>    # ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼å»é™¤æ ‡ç‚¹ç¬¦å·å’Œæ¢è¡Œç¬¦<br>    text = re.sub(r&#39;[^\\w ]&#39;, &#39; &#39;, text)<br><br>    #is_breakwordç”¨äºåˆ¤æ–­æœ€åä¸€ä¸ªå•è¯æ˜¯å¦æŠ˜æ–­ï¼Œå¦‚æœæœ€åä¸€ä¸ªå•è¯æ˜¯å®Œæ•´çš„ï¼Œåˆ™æœ€åä¸€ä¸ªå­—ç¬¦å¿…æ˜¯ç©ºæ ¼<br>    is_breakword = (text[-1] != &#39; &#39;)<br><br>    # è½¬ä¸ºå°å†™<br>    text = text.lower()<br>    <br>    # ç”Ÿæˆæ‰€æœ‰å•è¯çš„åˆ—è¡¨<br>    word_list = text.split(&#39; &#39;)<br><br>    # å»é™¤ç©ºç™½å•è¯<br>    word_list = list(filter(None, word_list))<br><br>    #å¦‚æœæœ€åä¸€ä¸ªå•è¯æŠ˜æ–­ï¼Œåˆ™åœ¨åˆ—è¡¨ä¸­å»æ‰æ–­å¤´å•è¯ï¼Œåˆå¹¶åˆ°ä¸‹æ¬¡è¯»å…¥çš„æ–‡æœ¬ä¸­<br>    if is_breakword:<br>        global breakword<br>        breakword = word_list[-1]<br>        del word_list[-1]<br><br>    # ç”Ÿæˆå•è¯å’Œè¯é¢‘çš„å­—å…¸<br>    for word in word_list:<br>        word_cnt.setdefault(word,0)<br>        word_cnt[word] += 1<br><br>    return <br> <br>#=====================å‡½æ•°parseç»“æŸ================<br><br>#breakwordä¸ºå…¨å±€å˜é‡ï¼Œä¿å­˜æ¯æ¬¡è¯»å…¥æ–‡æœ¬è¿‡ç¨‹ä¸­è¢«æŠ˜æ–­çš„å•è¯ï¼Œåœ¨ä¸‹æ¬¡è¯»å…¥æ–‡æœ¬æ—¶éœ€è¦æ‹¼ä¸Šè¯¥æŠ˜æ–­çš„å•è¯<br>breakword = &#39;&#39;<br>word_cnt = {}<br><br>with open(&#39;F:\\\\temp\\\\in.txt&#39;, &#39;r&#39;) as fin:<br>    while(True):<br><br>        #æ¯æ¬¡è¯»å…¥100ä¸ªå­—ç¬¦åˆ°å†…å­˜ä¸­ï¼Œç”±äºæ‰¾ä¸åˆ°å¤§æ–‡ä»¶ï¼Œä¸ºæµ‹è¯•æ–¹ä¾¿å…ˆæš‚æ—¶è®¾ä¸º100ï¼Œå¯æ ¹æ®å®é™…æƒ…å†µè°ƒæ•´è¯»å…¥çš„å­—ç¬¦æ•°<br>        text = fin.read(100)<br>        if not text:<br>            break<br>        <br>        #æ‹¼æ¥ä¸Šä¸€æ¬¡å¤„ç†æ—¶çš„æ–­å¤´å•è¯<br>        text = breakword + text<br><br>        #å¯¹è¯»å…¥çš„æ–‡æœ¬è¿›è¡Œè¯é¢‘ç»Ÿè®¡<br>        parse(text,word_cnt)<br><br># æ‰€æœ‰æ–‡æœ¬ç»Ÿè®¡å®Œåï¼ŒæŒ‰ç…§è¯é¢‘æ’åº<br>word_and_freq = sorted(word_cnt.items(), key=lambda kv: kv[1], reverse=True)<br><br>with open(&#39;F:\\\\temp\\\\out.txt&#39;, &#39;w&#39;) as fout:<br>    for word, freq in word_and_freq:<br>        fout.write(&#39;{} {}\\n&#39;.format(word, freq))<br><br>print(&#39;ç»Ÿè®¡å®Œæˆï¼&#39;)","like_count":1},{"had_liked":false,"id":98044,"user_name":"Fergus","can_delete":false,"product_type":"c1","uid":1277066,"ip_address":"","ucode":"3A8AC741C49CEB","user_header":"https://static001.geekbang.org/account/avatar/00/13/7c/8a/bdeb76ac.jpg","comment_is_top":false,"comment_ctime":1558881964,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5853849260","product_id":100026901,"comment_content":"<br>#Ask 1<br># NLP è‡ªç„¶è¯­è¨€å¤„ç†<br># 1.å‡è®¾æ–‡ä»¶è¶³å¤Ÿå¤§ï¼Œä¸èƒ½ä¸€æ¬¡æ€§è¯»å…¥å†…å­˜<br># 2.æ³¨æ„è¾¹ç•Œå¤„ç†ï¼Œå¦‚æœå•çº¯æŒ‰æ•°é‡è¯»å–ï¼Œå¯èƒ½ä¼šå°†å•è¯æ‹†æ–­<br># 3.å¦‚ä¸éœ€è¦ä¿®æ”¹æ–‡ä»¶ï¼Œè¯»å–æ—¶ä»…è®¾ç½®&#39;r&#39;å³å¯<br>#<br>import os<br>import re<br><br>def nlp(content):<br>    # å»æ ‡ç‚¹ã€æ¢è¡Œç¬¦<br>    te = re.sub(&#39;[^\\w]&#39;, &quot; &quot;, content)<br>    # å°å†™<br>    te = te.lower()<br>    # åˆ†è¯<br>    te = te.split(&#39; &#39;)<br>    # å»ç©ºç™½å•è¯<br>    te = filter(None, te)<br>    # è¯é¢‘ç»Ÿè®¡<br>    for i in te:<br>        if i in dic.keys():<br>            dic[i] += 1<br>        else:<br>            dic[i] = 1<br><br>dic = {}<br>path = r&#39;c:&#47;users&#47;chen.huaiyu&#47;desktop&#39;<br>os.chdir(path)<br><br>with open(&#39;nlp.txt&#39;, &#39;r&#39;) as fin:<br>    #cc = f.read()<br>    cc1 = &#39;&#39;<br>    seek = fin.tell()<br>    num = 100<br>    count = []<br>    while True:<br>        content = fin.read(num)<br>        if content == &#39;&#39;:<br>            break<br>        elif content[-1] != &#39; &#39;:<br>            count.append(len(content))<br>            if len(count) &gt; 1:<br>                if count[-1] == count[-2]:<br>                    print(&#39;Y&#39;)<br>                    nlp(content)<br>                    seek = fin.tell()<br>                    cc1 += content<br>                    print(fin.tell())<br>                    break<br>            num += 1<br>            fin.seek(seek)<br>            continue<br>        else:<br>            print(&#39;Y&#39;)<br>            nlp(content)<br>            print(len(content))<br>            seek = fin.tell()<br>            print(seek)<br>            print(fin.tell())<br>            cc1 += content<br>                    <br>dic = sorted(dic.items(), key=lambda v: v[1], reverse=True)<br>with open(&#39;output.txt&#39;, &#39;w&#39;) as fout:<br>    for word, freq in dic:<br>        fout.write(&#39;{} {}\\n&#39;.format(word, freq))","like_count":1},{"had_liked":false,"id":97095,"user_name":"GentleCP","can_delete":false,"product_type":"c1","uid":1525440,"ip_address":"","ucode":"BB1EE3720D44F0","user_header":"https://static001.geekbang.org/account/avatar/00/17/46/c0/01292b08.jpg","comment_is_top":false,"comment_ctime":1558586655,"is_pvip":false,"replies":[{"id":"34717","content":"å‘¨æœ«å·¦å³ä¼šç»™å‡ºç­”æ¡ˆï¼Œè¿™å‡ å¤©ä½ ä»¬å¯ä»¥æ€è€ƒä¸€ä¸‹å“¦","user_name":"ä½œè€…å›å¤","comment_id":97095,"uid":"1259521","ip_address":"","utype":1,"ctime":1558597674,"user_name_real":"Jingxiao"}],"discussion_count":1,"race_medal":0,"score":"5853553951","product_id":100026901,"comment_content":"è€å¸ˆgithubé“¾æ¥è¿˜æ²¡æ”¾å‡ºå—","like_count":1,"discussions":[{"author":{"id":1259521,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJJOlibibPFEWOib8ib7RtfAtxND5FUqCxxoeTuLAbBI9ic23xuwdXT4IyiaWq3Fic9RgEAYI0lBTbEp2rcg/132","nickname":"Jingxiao","note":"","ucode":"EB966BB87132F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451137,"discussion_content":"å‘¨æœ«å·¦å³ä¼šç»™å‡ºç­”æ¡ˆï¼Œè¿™å‡ å¤©ä½ ä»¬å¯ä»¥æ€è€ƒä¸€ä¸‹å“¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558597674,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":97074,"user_name":"John Si","can_delete":false,"product_type":"c1","uid":1526611,"ip_address":"","ucode":"705B90724A4BD4","user_header":"https://static001.geekbang.org/account/avatar/00/17/4b/53/67c08006.jpg","comment_is_top":false,"comment_ctime":1558581055,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5853548351","product_id":100026901,"comment_content":"ä¸€å€‹åå¹´å‰è®€CSç•¢æ¥­çš„äººï¼Œå› å®³æ€•å¤±æ•—è€Œæ”¾æ£„ç·¨ç¨‹ï¼Œæ²’æœ‰å¾äº‹ç·¨ç¨‹ç›¸é—œå·¥ä½œã€‚ç¾åœ¨å¾Œæ‚”ä¸å·²ï¼Œæ‰€ä»¥å ±è®€äº†è€å¸«çš„èª²ç¨‹ï¼Œåœ¨è½äº†è€å¸«å¹¾å ‚èª²å¾Œç™¼ç¾ç·¨ç¨‹åŸä¾†æ²’è‡ªå·±æƒ³åƒå“ªéº¼é›£ï¼Œå¤±æ•—ä¹Ÿä¸æ˜¯ç”šéº¼å¤§å•é¡Œã€‚ä½†è¦è·Ÿä¸Šé€²åº¦,é‚„æ˜¯æœ‰é»åƒåŠ›ï¼Œä½†æˆ‘æœƒåŠªåŠ›å­¸ç¿’ä¸¦è¿½ä¸Šå„åŒå­¸çš„ç¨‹åº¦ã€‚è€å¸«æå‡ºçš„æ€è€ƒé¡Œå…¶å¯¦æˆ‘ä¸¦æ²’æœ‰æƒ³æ³•ï¼Œå¯èƒ½æ˜¯æˆ‘æ°´å¹³å¤ªä½äº†ï¼Œè«‹å•è€å¸«èƒ½å¦æé»ä¸€ä¸‹å‘¢ï¼Ÿè¬è¬ï¼","like_count":1},{"had_liked":false,"id":96927,"user_name":"Geek_Stone","can_delete":false,"product_type":"c1","uid":1524025,"ip_address":"","ucode":"90B8A27A157217","user_header":"","comment_is_top":false,"comment_ctime":1558537013,"is_pvip":false,"replies":[{"id":"34773","content":"åŠ æ²¹ï¼","user_name":"ä½œè€…å›å¤","comment_id":96927,"uid":"1513504","ip_address":"","utype":1,"ctime":1558631343,"user_name_real":"é«˜å±±æµæ°´"}],"discussion_count":1,"race_medal":0,"score":"5853504309","product_id":100026901,"comment_content":"å·®ä¸å¤š10å¹´äº†ï¼Œè¿˜æ˜¯ä¸ªåˆå­¦è€…ã€‚å¸Œæœ›å°½å¿«æ‘†è„±åˆå­¦è€…çŠ¶æ€ã€‚","like_count":1,"discussions":[{"author":{"id":1513504,"avatar":"https://static001.geekbang.org/account/avatar/00/17/18/20/75ea3b20.jpg","nickname":"é«˜å±±æµæ°´","note":"","ucode":"71E513B5937481","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451070,"discussion_content":"åŠ æ²¹ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558631343,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":96814,"user_name":"å€¾","can_delete":false,"product_type":"c1","uid":1524099,"ip_address":"","ucode":"ADE03757A4AAE2","user_header":"https://static001.geekbang.org/account/avatar/00/17/41/83/a6263932.jpg","comment_is_top":false,"comment_ctime":1558513667,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5853480963","product_id":100026901,"comment_content":"ä¹‹å‰ç”¨pythonå†™è¿‡é¡¹ç›®ä»£ç ï¼Œä¸è¿‡æ˜¯åŠè·¯å‡ºå®¶ï¼Œæ›´å¤šçš„æ˜¯å»ç½‘ä¸Šæ‰¾è‡ªå·±ç”¨åˆ°çš„ä¸œè¥¿ï¼Œç°åœ¨åˆåœ¨ç”¨goå†™é¡¹ç›®ä»£ç ï¼Œä¸è¿‡pythonå€¼å¾—å¥½å¥½å­¦ä¹ ï¼Œä¸è¿‡åªèƒ½åœ¨ç©ºé—²çš„æ—¶å€™å¥½å¥½ç¢ç£¨ä¸€ä¸‹äº†ã€‚","like_count":1},{"had_liked":false,"id":96794,"user_name":"xtvjxk123456","can_delete":false,"product_type":"c1","uid":1542142,"ip_address":"","ucode":"2C89AC9E08C50A","user_header":"https://static001.geekbang.org/account/avatar/00/17/87/fe/f1755a1e.jpg","comment_is_top":false,"comment_ctime":1558508551,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5853475847","product_id":100026901,"comment_content":"æ¶¨äº†è®¸å¤šå§¿åŠ¿","like_count":1},{"had_liked":false,"id":96765,"user_name":"å¤œè·¯ç ´æ™“","can_delete":false,"product_type":"c1","uid":1353577,"ip_address":"","ucode":"9B875F94B759B9","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/3hZfficKPGCq2kjFBu9SgaMjibJTEl7iaW1ta6pZNyiaWP8XEsNpunlnsiaOtBpWTXfT5BvRP3qNByml6p9rtBvqewg/132","comment_is_top":false,"comment_ctime":1558501450,"is_pvip":false,"replies":[{"id":"34631","content":"æ›´ç²¾å½©çš„åœ¨åé¢å“¦","user_name":"ä½œè€…å›å¤","comment_id":96765,"uid":"1513504","ip_address":"","utype":1,"ctime":1558507959,"user_name_real":"é«˜å±±æµæ°´"}],"discussion_count":1,"race_medal":0,"score":"5853468746","product_id":100026901,"comment_content":"è¿™èŠ‚æœ‰ç‚¹æ„æ€äº†ï¼Œæ¸å…¥ä½³å¢ƒï¼Œå€¼å¾—ç»†è¯»ã€‚","like_count":1,"discussions":[{"author":{"id":1513504,"avatar":"https://static001.geekbang.org/account/avatar/00/17/18/20/75ea3b20.jpg","nickname":"é«˜å±±æµæ°´","note":"","ucode":"71E513B5937481","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451009,"discussion_content":"æ›´ç²¾å½©çš„åœ¨åé¢å“¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558507959,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":96731,"user_name":"GentleCP","can_delete":false,"product_type":"c1","uid":1525440,"ip_address":"","ucode":"BB1EE3720D44F0","user_header":"https://static001.geekbang.org/account/avatar/00/17/46/c0/01292b08.jpg","comment_is_top":false,"comment_ctime":1558494094,"is_pvip":false,"replies":[{"id":"34625","content":"ç¨åä¼šæ”¾å‡ºå“¦","user_name":"ä½œè€…å›å¤","comment_id":96731,"uid":"1513504","ip_address":"","utype":1,"ctime":1558507778,"user_name_real":"é«˜å±±æµæ°´"}],"discussion_count":1,"race_medal":0,"score":"5853461390","product_id":100026901,"comment_content":"è€å¸ˆï¼Œgithubçš„é“¾æ¥æ˜¯å¤šå°‘å‘€","like_count":1,"discussions":[{"author":{"id":1513504,"avatar":"https://static001.geekbang.org/account/avatar/00/17/18/20/75ea3b20.jpg","nickname":"é«˜å±±æµæ°´","note":"","ucode":"71E513B5937481","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":450992,"discussion_content":"ç¨åä¼šæ”¾å‡ºå“¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558507778,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":96672,"user_name":"enjoylearning","can_delete":false,"product_type":"c1","uid":1000237,"ip_address":"","ucode":"DCAF8538DEA277","user_header":"https://static001.geekbang.org/account/avatar/00/0f/43/2d/af86d73f.jpg","comment_is_top":false,"comment_ctime":1558486848,"is_pvip":false,"replies":[{"id":"34619","content":"è¿™é‡Œæ·±å…¥å±•å¼€è®²æ˜¯ä¸€å°èŠ‚çš„å†…å®¹äº†ï¼Œå¤§æ¦‚çŸ¥é“ ** dict å¯ä»¥å°† python dict è½¬åŒ–æˆå‡½æ•°çš„å‚æ•°å°±è¡Œäº†ï¼›ä¸€ä¸ªæ¯”è¾ƒé€šç”¨çš„ç”¨æ³•æ˜¯å®šä¹‰å…è®¸ä¼ é€’ä¸å®šä¸ªæ•°å‚æ•°çš„å‡½æ•°ã€‚","user_name":"ä½œè€…å›å¤","comment_id":96672,"uid":"1513504","ip_address":"","utype":1,"ctime":1558507179,"user_name_real":"é«˜å±±æµæ°´"}],"discussion_count":1,"race_medal":0,"score":"5853454144","product_id":100026901,"comment_content":"ä¸ºä»€ä¹ˆå­—å…¸ **dict_varname å°±èƒ½å¹³é“ºè§£æï¼Œæ˜¯formateçš„ä½œç”¨å—","like_count":1,"discussions":[{"author":{"id":1513504,"avatar":"https://static001.geekbang.org/account/avatar/00/17/18/20/75ea3b20.jpg","nickname":"é«˜å±±æµæ°´","note":"","ucode":"71E513B5937481","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":450964,"discussion_content":"è¿™é‡Œæ·±å…¥å±•å¼€è®²æ˜¯ä¸€å°èŠ‚çš„å†…å®¹äº†ï¼Œå¤§æ¦‚çŸ¥é“ ** dict å¯ä»¥å°† python dict è½¬åŒ–æˆå‡½æ•°çš„å‚æ•°å°±è¡Œäº†ï¼›ä¸€ä¸ªæ¯”è¾ƒé€šç”¨çš„ç”¨æ³•æ˜¯å®šä¹‰å…è®¸ä¼ é€’ä¸å®šä¸ªæ•°å‚æ•°çš„å‡½æ•°ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558507179,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":344103,"user_name":"sophy_sun","can_delete":false,"product_type":"c1","uid":1511610,"ip_address":"","ucode":"CA4F4721AF3475","user_header":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKCp4BHmbXfTOA0EIB9OLpvgxhWWFELy90uDqoVjdydMnueA5mtUiasPM7VB33K98icbkZfvKQo0Dfw/132","comment_is_top":false,"comment_ctime":1651240930,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1651240930","product_id":100026901,"comment_content":"è€å¸ˆä½ å¥½ï¼Œæ–‡ä¸­ sorted_word_cnt å˜é‡ä¸ºä»€ä¹ˆè¯´æ˜¯ä¸€ä¸ªäºŒå…ƒç»„åˆ—è¡¨å‘¢ï¼Ÿ ä¸åº”è¯¥æ˜¯å­—å…¸ç±»å‹çš„æ•°æ®å—ï¼Ÿä¸¤è€…æœ‰ä»€ä¹ˆåŒºåˆ«å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":323623,"user_name":"Geek_f1435c","can_delete":false,"product_type":"c1","uid":2843850,"ip_address":"","ucode":"1CF8DECC59B3BA","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/UNC7eWZWvRyAPWUpIJicgZCHkia5KFZbBQVzhGsiatC9tx5wtMSscFAPATjHIYGGZ7DxjNxZVFxkkkicwQLWVTDribw/132","comment_is_top":false,"comment_ctime":1638027418,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1638027418","product_id":100026901,"comment_content":"ç­”æ¡ˆè§£ææˆ‘éƒ½çœ‹çš„ä¸€çŸ¥åŠè§£ï¼Œè¿˜æ˜¯çœ‹ä¸æ‡‚æ­£åˆ™è¡¨è¾¾å¼ã€‚å…ˆç•™ç€å§ï¼Œè¿‡æ®µæ—¶é—´å†æ¥çœ‹å§","like_count":0},{"had_liked":false,"id":318601,"user_name":"ã€ç²‰ç²‰ã€‘","can_delete":false,"product_type":"c1","uid":1168848,"ip_address":"","ucode":"3E0F16527A8D1A","user_header":"https://static001.geekbang.org/account/avatar/00/11/d5/d0/413898d2.jpg","comment_is_top":false,"comment_ctime":1635344382,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1635344382","product_id":100026901,"comment_content":"ç¨‹åºæœ‰çš„æ¯”è¾ƒéš¾ç†è§£ï¼Œæ²¡æœ‰è§£é‡Š","like_count":0},{"had_liked":false,"id":294802,"user_name":"é’¢æ¿ä¾ ","can_delete":false,"product_type":"c1","uid":1942359,"ip_address":"","ucode":"CFE2ED04BD138E","user_header":"https://static001.geekbang.org/account/avatar/00/1d/a3/57/fc1b58b9.jpg","comment_is_top":false,"comment_ctime":1622096261,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1622096261","product_id":100026901,"comment_content":"ç¬¬ä¸€ä¸ªé—®é¢˜æ€è€ƒï¼šè¯»å–çš„æ—¶å€™å¯ä»¥è€ƒè™‘è¯»å–æ¯ä¸€è¡Œçš„å†…å®¹ï¼Œå¦‚æœæ¯ä¸€è¡Œçš„å†…å®¹è¿‡å¤§çš„è¯å¯ä»¥åœ¨å¾ªç¯ä¸Šè®¾ç½®ä¸€ä¸ªåˆ¤æ–­ï¼Œå¦‚æœè¶…è¿‡è®¾å®šé•¿åº¦æ—¶ï¼Œå¯æŒ‰ç…§è®¾å®šé•¿åº¦å¾€å‰æ¨æŒ‡é’ˆä½ç½®åˆ°ç©ºæ ¼å‰ï¼Œè¿™æ ·å°±èƒ½ä¿è¯å­å­—ç¬¦ä¸²å’Œå­å­—ç¬¦ä¸²ä¹‹é—´ä¿æŒå®Œæ•´äº†ï¼Œå‰©ä¸‹çš„å°±æ˜¯åšwordcount<br>ç¬¬äºŒä¸ªé—®é¢˜æ€è€ƒï¼šå‡å¦‚æœ‰100gçš„æ•°æ®æ–‡ä»¶åœ¨ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œé‚£ä¹ˆå¯ä»¥éå†æ•´ä¸ªæ–‡ä»¶å¤¹ï¼ŒServerç«¯è®°å½•æ¯ä¸ªæ–‡ä»¶ï¼Œä»¥æ–‡ä»¶åä¸ºç´¢å¼•ï¼Œå½“è¯»å–å®Œåï¼Œread[æ–‡ä»¶å]è®¡ä¸º1ï¼Œè€Œå¦‚æœé‡åˆ°ç›¸åŒçš„æ–‡ä»¶ååˆ™è·³è¿‡ï¼Œclientç«¯åˆ™æŒ‰ç…§åŒæ­¥çŠ¶æ€æ¥è¯»å–è¯»å–å®ŒåçŠ¶æ€å˜åŒ–å†™å…¥æˆåŠŸï¼Œè€ŒServerç«¯é€šè¿‡åŒæ­¥çŠ¶æ€åˆ¤æ–­æ˜¯å¦è¦æ¸…ç©ºç½‘ç›˜è®°å½•ï¼Œä¹Ÿæ˜¯é€šè¿‡è®¡æ•°çš„æ–¹å¼ç¡®å®šæ–‡ä»¶æœ‰æ²¡æœ‰å†™å…¥ï¼Œè¿™æ ·å°±èƒ½æŠŠæ‰€æœ‰æ–‡ä»¶éƒ½è¯»è¿›å»","like_count":0},{"had_liked":false,"id":293006,"user_name":"diuä½ å¤´å‘æ‰å±å¹•ä¸Šäº†","can_delete":false,"product_type":"c1","uid":2131165,"ip_address":"","ucode":"69E2D5EAD8B50C","user_header":"https://static001.geekbang.org/account/avatar/00/20/84/dd/a9265141.jpg","comment_is_top":false,"comment_ctime":1621152666,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1621152666","product_id":100026901,"comment_content":"æ€è€ƒé¢˜ç¬¬ä¸€é¢˜ï¼š<br>import re<br>from collections import defaultdict<br><br>### è¯»å–æ–‡ä»¶å•è¯ç»Ÿè®¡<br>def readlines(f, sep = &#39; &#39;, size = 4096, *args, **kwargs):<br>    &#39;&#39;&#39;<br>    è¯»å–å¤§æ–‡ä»¶çš„æ–¹æ³•<br>    :param f:æ–‡ä»¶å¥æŸ„<br>    :param sep: æ¯ä¸€è¡Œçš„åˆ†éš”ç¬¦<br>    :return<br>    &#39;&#39;&#39;<br>    buf = &#39;&#39;<br>    while True:<br>        while sep in buf:<br>            position = buf.index(sep)   # åˆ†éš”ç¬¦çš„ä½ç½®<br>            yield buf[:position]        # åˆ‡ç‰‡ï¼Œä»å¼€å§‹åˆ°åˆ†éš”ç¬¦ä½ç½®<br>            buf = buf[position + len(sep):] # å†åˆ‡ç‰‡ï¼Œå°†yieldçš„æ•°æ®åˆ‡æ‰<br>        <br>        chunk = f.read(size)<br>        if &#39;parse&#39; in kwargs:<br>            chunk = kwargs[&#39;parse&#39;](chunk)   # æ¸…æ´—<br>        if not chunk:<br>            yield buf # è¿”å›bufä¸­çš„æ•°å­—<br>            break<br>        buf += chunk  # å¦‚æœreadæœ‰æ•°æ®çš„è¯<br><br># å•è¯æ¸…æ´—<br>def parse(text):<br>    &#39;&#39;&#39;<br>    æ¸…æ´—å­—ç¬¦ä¸²<br>    1. å»é™¤æ ‡ç‚¹ç¬¦å·<br>    2. è½¬åŒ–ä¸ºå…¨å°å†™<br>    &#39;&#39;&#39;<br>    # ä½¿ç”¨æ­£åˆ™å»æ‰æ ‡ç‚¹ç¬¦å·<br>    text = re.sub(&#39;\\W&#39;, &#39; &#39;, text)<br>    # è½¬ä¸ºå°å†™<br>    text = text.lower()<br>    # ç”Ÿæˆæ‰€æœ‰å•è¯çš„åˆ—è¡¨<br>    word_list = text.split()<br>    return &#39; &#39;.join(filter(None, word_list))<br><br># å•è¯ç»Ÿè®¡<br>def count(file_path, size = 4096, encoding = None):<br>    &#39;&#39;&#39;<br>    è¯»å–æ–‡æœ¬æ–‡ä»¶ï¼Œç»Ÿè®¡å•è¯ä¸ªæ•°<br>    :param file_path: æ–‡ä»¶è·¯å¾„<br>    :param size: æ¯æ¬¡è¯»å–å­—ç¬¦å¤§å°<br>    :param encoding: ç¼–ç æ ¼å¼, å¯é€‰é¡¹<br>    :return å•è¯ç»Ÿè®¡é™åºåˆ—è¡¨<br>    &#39;&#39;&#39;<br>    dic = defaultdict(int)<br>    with open(file_path, encoding=encoding) as f:<br>        for word in readlines(f, &#39; &#39;, size, parse = parse):<br>            dic[word] += 1<br>    # æ’åº<br>    sorted_word_cnt = sorted(dic.items(), key = lambda x:x[1], reverse = True)<br>    return sorted_word_cnt<br><br>sorted_word_cnt = count(&#39;data&#47;ch06&#47;text.txt&#39;)<br>sorted_word_cnt","like_count":0},{"had_liked":false,"id":289871,"user_name":"wayne","can_delete":false,"product_type":"c1","uid":1811813,"ip_address":"","ucode":"988E1F2F0B419A","user_header":"https://static001.geekbang.org/account/avatar/00/1b/a5/65/898bc6c5.jpg","comment_is_top":false,"comment_ctime":1619240160,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1619240160","product_id":100026901,"comment_content":"ç¬¬ä¸€æ¬¡é¢˜ï¼š<br>ç±»ä¼¼äºå¤§æ•°æ®çš„wordcountï¼š<br>1. å…³é”®æ˜¯ä¸è¦ä¸€æ¬¡æ€§å°†æ‰€æœ‰æ•°æ®åŠ è½½åˆ°å†…å­˜æ•°ç»„<br><br>import re<br><br>def to_list(text):<br>    # ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼å»é™¤æ ‡ç‚¹ç¬¦å·å’Œæ¢è¡Œç¬¦<br>    text = re.sub(r&#39;[^\\w ]&#39;, &#39; &#39;, text)<br><br>    # è½¬ä¸ºå°å†™<br>    text = text.lower()<br>    <br>    # ç”Ÿæˆæ‰€æœ‰å•è¯çš„åˆ—è¡¨<br>    word_list = text.split(&#39; &#39;)<br>    <br>    # å»é™¤ç©ºç™½å•è¯<br>    word_list = filter(None, word_list)<br>    return word_list<br>\t<br>def to_dict(word_list):<br>\tfor i in word_list:<br>\t\tif i not in word_dict:<br>\t\t\tword_dict[&#39;i&#39;] = 1<br>\t\tword_dict[&#39;i&#39;] += 1<br><br>if ___name__ = &quot;__main__&quot;:<br>\twith open(&#39;in.txt&#39;, &#39;r&#39;) as fin:<br>\t\twhile(fin != none):<br>    \t\ttext = fin.readline()<br><br>\t    \tmap = to_list(text)<br>\t    \tword_dict = {}<br>\t    \treduce = to_dict(map_list)<br>\t\t\tsorted_list = sorted(word_dict.items(), key=lambda kv: kv[1], reverse=True)<br>\t\t\twith open(&#39;out.txt&#39;, &#39;w&#39;) as fout:<br>    \t\t\tfor word, freq in reduce_dict:<br>        \t\tfout.write(&#39;{} {}\\n&#39;.format(word, freq))","like_count":0},{"had_liked":false,"id":289367,"user_name":"Geek_3643ae","can_delete":false,"product_type":"c1","uid":2465294,"ip_address":"","ucode":"F0ED2511968B14","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKDwAOObIplPqmNsmYGxQgmP6W2WKZuiapLzEXchPicCiaTnia9ScjicjEvI4BMd5qqnR3rZFRLA3uBElw/132","comment_is_top":false,"comment_ctime":1618989891,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1618989891","product_id":100026901,"comment_content":"ç»Ÿè®¡è¯é¢‘çš„ä»£ç é‡Œï¼Œword_list = filter(None, word_list)è¿™è¡Œï¼Œfilterè¿”å›çš„æ˜¯ä¸€ä¸ªè¿­ä»£å™¨ï¼Œä¸æ˜¯æƒ³è¦çš„word_liståˆ—è¡¨ï¼Œéœ€è¦åœ¨filterå¤–å±‚åŠ list() å¼ºåˆ¶è½¬åŒ–ä¸ºList","like_count":0},{"had_liked":false,"id":285482,"user_name":"æ†¨çš®è‹","can_delete":false,"product_type":"c1","uid":1412429,"ip_address":"","ucode":"D0B4B7660DA766","user_header":"https://static001.geekbang.org/account/avatar/00/15/8d/4d/992070e8.jpg","comment_is_top":false,"comment_ctime":1616835792,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1616835792","product_id":100026901,"comment_content":"#coding:utf-8<br><br><br>import re<br><br># å…¨å±€å˜é‡<br>word_cnt = {}<br><br># ä½ ä¸ç”¨å¤ªå…³å¿ƒè¿™ä¸ªå‡½æ•°<br>def parse(text):<br>    # ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼å»é™¤æ ‡ç‚¹ç¬¦å·å’Œæ¢è¡Œç¬¦<br>    text = re.sub(r&#39;[^\\w ]&#39;, &#39; &#39;, text)<br><br>    # è½¬ä¸ºå°å†™<br>    text = text.lower()<br><br>    # ç”Ÿæˆæ‰€æœ‰å•è¯çš„åˆ—è¡¨<br>    word_list = text.split(&#39; &#39;)<br><br>    # å»é™¤ç©ºç™½å•è¯<br>    word_list = filter(None, word_list)<br><br>    # ç”Ÿæˆå•è¯å’Œè¯é¢‘çš„å­—å…¸<br>    for word in word_list:<br>        if word not in word_cnt:<br>            word_cnt[word] = 0<br>        word_cnt[word] += 1<br><br><br>def get_sorted_word_cnt(word_cnt):<br>    # æŒ‰ç…§è¯é¢‘æ’åº<br>    sorted_word_cnt = sorted(word_cnt.items(), key=lambda kv: kv[1], reverse=True)<br>    return sorted_word_cnt<br><br><br>with open(&#39;in.txt&#39;, &#39;r&#39;) as fin:<br>    while True:<br>        line = fin.readline()<br>        if line:<br>            parse(line)<br>        else:<br>            break<br><br>word_and_freq = get_sorted_word_cnt(word_cnt)<br><br>with open(&#39;out.txt&#39;, &#39;w&#39;) as fout:<br>    for word, freq in word_and_freq:<br>        fout.write(&#39;{} {}\\n&#39;.format(word, freq))<br>","like_count":0},{"had_liked":false,"id":279940,"user_name":"å†¬é›ªåˆéœæ™´","can_delete":false,"product_type":"c1","uid":2162560,"ip_address":"","ucode":"EA79316E942ABE","user_header":"https://static001.geekbang.org/account/avatar/00/20/ff/80/227451d0.jpg","comment_is_top":false,"comment_ctime":1614008662,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1614008662","product_id":100026901,"comment_content":"æƒ³è¯·æ•™ä¸€ä¸‹&#39;Mr.&#39; if gender == &#39;y&#39; else &#39;Mrs&#39;è¿™ä¸ªè¯­å¥,<br>è¿™ä¸ªæ˜¯ä¸æ˜¯ç±»ä¼¼ä¸æœ‰äº›è¯­è¨€ä¸­çš„ä¸‰å…ƒè¡¨è¾¾å¼ bool ? statementA: statementBè¿™æ ·å­çš„è¡¨è¾¾å¼?<br>æƒ³é—®ä¸€ä¸‹å®ƒåœ¨pythonä¸­çš„æœ¯è¯­æ˜¯ä»€ä¹ˆ?(å› ä¸ºç¿»æ–‡æ¡£æ²¡æœ‰æ‰¾åˆ°)","like_count":0},{"had_liked":false,"id":269848,"user_name":"éåŒå‡¡æƒ³","can_delete":false,"product_type":"c1","uid":1934969,"ip_address":"","ucode":"713FD449A49D5A","user_header":"https://static001.geekbang.org/account/avatar/00/1d/86/79/066a062a.jpg","comment_is_top":false,"comment_ctime":1608808964,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1608808964","product_id":100026901,"comment_content":"##ç¬¬ä¸€é¢˜<br><br>def parse1(text):<br>    text = re.sub(r&#39;[^\\w ]&#39;, &quot; &quot;, text)<br>    text = text.lower()<br>    word_list = text.split(&quot; &quot;)<br>    return  word_list<br>word_cnt = {}<br>with open(&#39;06_in.txt&#39;, &#39;r&#39;) as f:<br>    tail=[]<br>    while True:<br>        text = f.read(8)<br>        #è¯»å®Œäº†<br>        if not text:<br>            break;<br>        word_list = parse1(text)<br>        length = len(word_list)<br>        for i in range(0, length):<br>            if i == length - 1: #å¦‚æœæ˜¯æœ€åä¸€ä¸ªå…ƒç´ ï¼Œæ”¾åˆ°ä¸‹ä¸€æ¬¡å¾ªç¯å¤„ç†<br>                tail = [word_list[length - 1]]<br>                continue;<br>            if i == 0 and tail: #å¦‚æœæ˜¯ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œæ’å…¥ä¸Šä¸€æ¬¡å¾ªç¯ç•™ä¸‹çš„å°¾å·´<br>                word = tail[0]<br>                tail = []<br>            else : word=&quot;&quot;<br>            word += word_list[i]<br><br>            if word != &#39;&#39;:<br>                word_cnt[word] = word_cnt.get(word, 0) + 1<br><br>    #å¤„ç†æœ€åä¸€æ¬¡å¾ªç¯ç•™ä¸‹çš„å°¾å·´<br>    if tail and tail[0]:<br>        word_cnt[word] = word_cnt.get(word, 0) + 1<br><br>#æ’åº<br>sorted_word_cnt = sorted(word_cnt.items(), key=lambda kv : kv[1], reverse=True)<br>#å­˜æ–‡ä»¶<br>with open(&#39;06_out_read_with_size.txt&#39;,&#39;w&#39;) as f:<br>    for w, c in sorted_word_cnt:<br>        f.write(&quot;{}, {} \\n&quot;.format(w,c ))<br>","like_count":0},{"had_liked":false,"id":266354,"user_name":"xu","can_delete":false,"product_type":"c1","uid":1316364,"ip_address":"","ucode":"2CF44446E085AC","user_header":"https://static001.geekbang.org/account/avatar/00/14/16/0c/fa62ffdd.jpg","comment_is_top":false,"comment_ctime":1607310669,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1607310669","product_id":100026901,"comment_content":"è¶…å€¼çš„è¯¾ç¨‹<br>åªæ˜¯è¿™ä¸ªç¬¬äºŒé¢˜æœ‰ç‚¹ç–‘æƒ‘ï¼Œè¿™ä¸ªç¬¬äºŒé¢˜æ˜¯ä¸æ˜¯ä¹Ÿè¦åœ¨Linuxå»ºä¸€ä¸ªwebå•Šï¼Œè¿˜æ˜¯ç›´æ¥åœ¨winä¸‹æ­ç¯å¢ƒï¼Ÿ","like_count":0},{"had_liked":false,"id":261997,"user_name":"dao","can_delete":false,"product_type":"c1","uid":1087879,"ip_address":"","ucode":"4181FB270462CF","user_header":"https://static001.geekbang.org/account/avatar/00/10/99/87/98ebb20e.jpg","comment_is_top":false,"comment_ctime":1605602335,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1605602335","product_id":100026901,"comment_content":"å…³äºæ€è€ƒé¢˜ä¸€ï¼Œæ”¹å†™äº†è€å¸ˆçš„ç­”æ¡ˆï¼Œè§£å†³è¯„è®ºåŒºé‡Œå…³äºword_listå†…å­˜æº¢å‡ºåŠæœ€åä¸€ä¸ªè¯ç»„å¦‚æœæ²¡æœ‰æ ‡ç‚¹çš„bugã€‚<br>-----<br>import re<br><br>CHUNK_SIZE = 100 # è¿™ä¸ªæ•°è¡¨ç¤ºä¸€æ¬¡æœ€å¤šè¯»å–çš„å­—ç¬¦é•¿åº¦<br><br># è¿™ä¸ªå‡½æ•°æ¯æ¬¡ä¼šæ¥æ”¶ä¸Šä¸€æ¬¡å¾—åˆ°çš„ last_wordï¼Œç„¶åå’Œè¿™æ¬¡çš„ text åˆå¹¶èµ·æ¥å¤„ç†ã€‚<br># åˆå¹¶ååˆ¤æ–­æœ€åä¸€ä¸ªè¯æœ‰æ²¡æœ‰å¯èƒ½è¿ç»­ï¼Œå¹¶åˆ†ç¦»å‡ºæ¥ï¼Œç„¶åè¿”å›ã€‚<br># è¿™é‡Œçš„ä»£ç æ²¡æœ‰ if è¯­å¥ï¼Œä½†æ˜¯ä»ç„¶æ˜¯æ­£ç¡®çš„ï¼Œå¯ä»¥æƒ³ä¸€æƒ³ä¸ºä»€ä¹ˆã€‚<br>def parse_to_word_list(text, last_word):<br>    text = re.sub(r&#39;[^\\w ]&#39;, &#39; &#39;, last_word + text)<br>    text = text.lower()<br>    cur_word_list = text.split(&#39; &#39;)<br>    cur_word_list, last_word = cur_word_list[:-1], cur_word_list[-1]<br>    return (filter(None, cur_word_list), last_word)<br><br>def solve():<br>    with open(&#39;in.txt&#39;, &#39;r&#39;) as fin:<br>        word_cnt = {}<br>        word_list, last_word = [], &#39;&#39;<br>        while True:<br>            text = fin.read(CHUNK_SIZE)<br>            if not text:<br>                # è¯»å–å®Œæ¯•ï¼Œä¸­æ–­å¾ªç¯<br>                break<br>            word_list, last_word = parse_to_word_list(text, last_word)<br><br>            for word in word_list:<br>                if word not in word_cnt:<br>                    word_cnt[word] = 1<br>                else:<br>                    word_cnt[word] += 1<br><br>        if last_word:<br>            if last_word not in word_cnt:<br>                word_cnt[last_word] = 1<br>            else:<br>                word_cnt[last_word] += 1<br><br>        sorted_word_cnt = sorted(word_cnt.items(), key=lambda kv: kv[1], reverse=True)<br>        return sorted_word_cnt<br><br>words = solve()<br>with open(&#39;out.txt&#39;, &#39;w&#39;) as fout:<br>    for word,count in words:<br>        fout.write(f&#39;{word} {count}\\n&#39;)<br>","like_count":0},{"had_liked":false,"id":260535,"user_name":"Pythonlearner","can_delete":false,"product_type":"c1","uid":1592999,"ip_address":"","ucode":"2A1A7BA7402B5C","user_header":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJsn3s3eoPteic0rAmsxciaTu4twC0r1hoJlIPnAiacH0xLOTvmh0NEyBdDXicfOxprLOz6E6NfcaRB7w/132","comment_is_top":false,"comment_ctime":1605057523,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1605057523","product_id":100026901,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œä»€ä¹ˆæ—¶å€™ç”¨æ­£åˆ™è§£å†³å­—ç¬¦æ›¿ä»£?ä»€ä¹ˆæ—¶å€™ç”¨replaceè§£å†³å­—ç¬¦æ›¿ä»£?ä¸¤è€…ç›¸æ¯”å“ªä¸ªæ›´é«˜æ•ˆï¼Œæ›´é«˜æ•ˆçš„åŸå› æ˜¯ä¸ºä»€ä¹ˆ","like_count":0},{"had_liked":false,"id":256836,"user_name":"Geek_time","can_delete":false,"product_type":"c1","uid":1538424,"ip_address":"","ucode":"96FD038426AA37","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLw9fVyja3eQFJRjMF7OjEJVPJJicAA4w26nlChSSVTwYdDBUSNibqSvTwPbalEXuaWb6SEmP5oNJ1w/132","comment_is_top":false,"comment_ctime":1603762572,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1603762572","product_id":100026901,"comment_content":"ä¸€é—®è¯»å–æ–‡ä»¶å—ä»¥ç”Ÿæˆå™¨å½¢å¼è¿›è¡Œæ“ä½œï¼ŒäºŒé—®å¦‚æœlinuxçš„è¯å¯ä»¥ä½¿ç”¨rsyncçš„ç³»ç»Ÿå‡½æ•°ï¼Œè¿™æ ·å¯ä»¥ä¿è¯æœ€å¤§æ•ˆç‡å’Œæ•ˆæœ","like_count":0},{"had_liked":false,"id":241856,"user_name":"çŸ¥æ­¢ã€‚","can_delete":false,"product_type":"c1","uid":2087309,"ip_address":"","ucode":"5D56DD062B1A43","user_header":"https://static001.geekbang.org/account/avatar/00/1f/d9/8d/78dd472a.jpg","comment_is_top":false,"comment_ctime":1597470565,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1597470565","product_id":100026901,"comment_content":"èƒ½è§£æä¸€ä¸‹è¿™ä¸ªæ­£åˆ™è¡¨è¾¾å¼çš„åŒ¹é…è§„åˆ™å—ï¼Ÿtext = re.sub(r&#39;[^\\w ]&#39;, &#39; &#39;, text)","like_count":0},{"had_liked":false,"id":236583,"user_name":"å°é±¼","can_delete":false,"product_type":"c1","uid":2064498,"ip_address":"","ucode":"6AE561D1EF9C05","user_header":"https://static001.geekbang.org/account/avatar/00/1f/80/72/33107407.jpg","comment_is_top":false,"comment_ctime":1595472008,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1595472008","product_id":100026901,"comment_content":"NLPä¸­æœ‰æ®µä»£ç æ¢ä¸ªæ€è·¯å†™<br># ç”Ÿæˆå•è¯å’Œè¯é¢‘çš„å­—å…¸ è¿™æ®µæ¢æˆ<br>word_cnt = {}<br>word_set = set(word_list)<br>for word in word_set:<br>      word_cnt[word_set] = word_list.count(word)<br>","like_count":0},{"had_liked":false,"id":226818,"user_name":"Geek_7d0f6b","can_delete":false,"product_type":"c1","uid":1843578,"ip_address":"","ucode":"31939937742A9D","user_header":"","comment_is_top":false,"comment_ctime":1592209985,"is_pvip":false,"replies":[{"id":"84144","content":"èµï¼","user_name":"ä½œè€…å›å¤","comment_id":226818,"uid":"1259521","ip_address":"","utype":1,"ctime":1592593061,"user_name_real":"Jingxiao"}],"discussion_count":1,"race_medal":0,"score":"1592209985","product_id":100026901,"comment_content":"import re<br>import time<br><br>#å®šä¹‰ä¸€ä¸ªå…¨å±€å˜é‡word_cnt<br>word_cnt = {}<br><br>def parse(text):<br>    text = re.sub(r&#39;[^\\w]&#39;, &#39; &#39;, text) #å»é™¤æ ‡ç‚¹å’Œæ¢è¡Œç¬¦<br>    text = text.lower()<br>    word_list = text.split(&#39; &#39;)<br>    word_list = filter(None, word_list)<br><br>    #ç”Ÿæˆè¯é¢‘å­—å…¸<br>    global word_cnt<br>    for word in word_list:<br>        if word not in word_cnt:<br>            word_cnt[word] = 0<br>        word_cnt[word] += 1<br><br>start_time = time.perf_counter()<br>with open(&#39;in.txt&#39;, &#39;r&#39;, encoding=&#39;UTF-8&#39;) as full:<br>    text = full.readline()<br>    while text:<br>        parse(text)<br>        text = full.readline()<br><br>sorted_word_cnt = sorted(word_cnt.items(), key=lambda kv: kv[1], reverse=True) #æŒ‰ç…§è¯é¢‘æ’åº<br>with open(&#39;out.txt&#39;, &#39;w&#39;) as out:<br>    for word, freq in sorted_word_cnt:<br>        out.write(&#39;{} {}\\n&#39;.format(word, freq))<br>end_time = time.perf_counter()<br>print(end_time - start_time)<br>å®šä¹‰å…¨å±€å˜é‡ï¼Œç¨å¾®ä¿®æ”¹äº†ä¸€ä¸‹parseå‡½æ•°ï¼Œå¤„ç†å°è¯´ã€Šé£˜ã€‹æ€»å…±èŠ±è´¹0.25ç§’","like_count":0,"discussions":[{"author":{"id":1259521,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJJOlibibPFEWOib8ib7RtfAtxND5FUqCxxoeTuLAbBI9ic23xuwdXT4IyiaWq3Fic9RgEAYI0lBTbEp2rcg/132","nickname":"Jingxiao","note":"","ucode":"EB966BB87132F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":498375,"discussion_content":"èµï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592593061,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":223820,"user_name":"Joshua","can_delete":false,"product_type":"c1","uid":1348231,"ip_address":"","ucode":"6823D5F0EC5D10","user_header":"https://static001.geekbang.org/account/avatar/00/14/92/87/15931e41.jpg","comment_is_top":false,"comment_ctime":1591190451,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1591190451","product_id":100026901,"comment_content":"ç¬¬ä¸€é¢˜ï¼šåœ¨å°½é‡ä¸å˜åŠ¨åŸæ¥çš„ä»£ç çš„åŸºç¡€ä¸Šï¼Œå…ˆåˆ©ç”¨ç©ºæ ¼åˆ†è¯ï¼Œè®¾ç½®","like_count":0},{"had_liked":false,"id":208983,"user_name":"Geek_7cc111","can_delete":false,"product_type":"c1","uid":1860434,"ip_address":"","ucode":"B215419F65DBF4","user_header":"","comment_is_top":false,"comment_ctime":1587477806,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1587477806","product_id":100026901,"comment_content":"from collections import defaultdict<br>import re<br>d = defaultdict(int)<br>with open(&quot;in.txt&quot;, mode=&quot;r&quot;, encoding=&quot;utf-8&quot;) as f:<br>    for line in f:<br>        for word in filter(lambda x:x, re.split(&#39;\\s&#39;,re.sub(r&#39;[^\\w ]&#39;, &#39; &#39;, line))):<br>            d[word.lower()]+=1<br>sorted_d= sorted(d.items(), key=lambda kv: kv[1], reverse=True)<br>print(sorted_d)","like_count":0},{"had_liked":false,"id":206806,"user_name":"LiuJ","can_delete":false,"product_type":"c1","uid":1937496,"ip_address":"","ucode":"EE4896E8E96B95","user_header":"https://static001.geekbang.org/account/avatar/00/1d/90/58/e2ab3dfe.jpg","comment_is_top":false,"comment_ctime":1586938939,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1586938939","product_id":100026901,"comment_content":"æ€è€ƒé¢˜ç¬¬ä¸€é¢˜ï¼šï¼ˆæ¯è¯»å– 1024 ä¸ªå­—èŠ‚çš„æ•°æ®ï¼Œå°†æœ€åä¸€ä¸ªè¯æ”¾åˆ°ä¸‹ä¸€è¯è¯»å–æ•°æ®çš„å‰é¢ï¼‰<br>import re<br><br><br>def parse(text, word_cnt):<br>    text = re.sub(&#39;[^\\w]&#39;, &#39; &#39;, text)<br>    text = text.lower()<br><br>    word_list = text.split(&#39; &#39;)<br>    last_word = word_list[-1]<br><br>    word_list = filter(None, word_list[:-1])<br><br>    for word in word_list:<br>        if word not in word_cnt:<br>            word_cnt[word] = 0<br>        word_cnt[word] += 1<br><br>    return last_word<br><br><br>word_cnt = {}<br>sorted_word_cnt = []<br>last_word = &#39;&#39;<br>BUF_SIZE = 1024<br><br>with open(&#39;.&#47;in.txt&#39;) as fin:<br>    while True:<br>        data = last_word + fin.read(BUF_SIZE)   # æ¯è¯»ä¸€æ¬¡å°†æœ€åä¸€ä¸ªå•è¯æ”¾å…¥ä¸‹æ¬¡è¯»å–æ•°æ®çš„å‰é¢æ¥å¤„ç†<br>        if not data:<br>            break<br>        else:<br>            last_word = parse(data, word_cnt)<br><br>    sorted_word_cnt = sorted(<br>        word_cnt.items(), key=lambda kv: kv[1], reverse=True)<br><br><br>with open(&#39;.&#47;out.txt&#39;, &#39;w&#39;) as fout:<br>    for word, req in sorted_word_cnt:<br>        fout.write(&#39;{} {}\\n&#39;.format(word, req))<br>","like_count":0},{"had_liked":false,"id":194358,"user_name":"Geek_thefuture","can_delete":false,"product_type":"c1","uid":1775559,"ip_address":"","ucode":"7100A3B76D20F0","user_header":"https://static001.geekbang.org/account/avatar/00/1b/17/c7/e62643a3.jpg","comment_is_top":false,"comment_ctime":1585053988,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585053988","product_id":100026901,"comment_content":"ç”¨jupyterè¿è¡Œfileç›¸å…³å‘½ä»¤çš„æ—¶å€™æ€»æ˜¯filenotfounderrorè¦æ€ä¹ˆè§£å†³å‘¢","like_count":0},{"had_liked":false,"id":193227,"user_name":"Geek_27","can_delete":false,"product_type":"c1","uid":1925957,"ip_address":"","ucode":"908A4172A219BA","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTL7ZOCns481Zl7VeRk9IdHrAYF8ZpKBJ9LLUaRn7qGoibdZpwzhRmRlGRQBbFVx914qg2p5jZPozDg/132","comment_is_top":false,"comment_ctime":1584886552,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584886552","product_id":100026901,"comment_content":"å¥½å¤šä¸œè¥¿ä¸ç”¨ç¡®å®å¿˜çš„å¥½å¿«","like_count":0},{"had_liked":false,"id":190610,"user_name":"4thirteen2one","can_delete":false,"product_type":"c1","uid":1403309,"ip_address":"","ucode":"085D582DD552DD","user_header":"https://static001.geekbang.org/account/avatar/00/15/69/ad/608188c2.jpg","comment_is_top":false,"comment_ctime":1584672362,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584672362","product_id":100026901,"comment_content":"æ€è€ƒé¢˜ç¬¬ä¸€é¢˜ï¼š<br><br>def get_word_freq_histogram(text_path):<br>    histogram = {}<br>    with open(text_path, &quot;r&quot;, encoding=&quot;utf-8&quot;) as f:<br>        tail = &quot;&quot;<br>        for line in f:<br>            if line != &quot;\\n&quot;:<br>                head = tail + line.rsplit(&quot; &quot;, 1)[0]<br>                tail = line.rsplit(&quot; &quot;, 1)[1]<br>                text = re.sub(r&#39; ?[^\\w ] ?&#39;, &#39; &#39;, head)<br>                text = text.lower()<br>                word_list = text.split()<br>                for word in word_list:<br>                    if word not in histogram:<br>                        histogram[word] = 0<br>                    histogram[word] += 1<br>    return sorted(histogram.items(), key=lambda kv: kv[1], reverse=True)","like_count":0},{"had_liked":false,"id":177736,"user_name":"Walker","can_delete":false,"product_type":"c1","uid":1712487,"ip_address":"","ucode":"721A45571AC658","user_header":"https://static001.geekbang.org/account/avatar/00/1a/21/67/8bf2d183.jpg","comment_is_top":false,"comment_ctime":1581486170,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1581486170","product_id":100026901,"comment_content":"ç¬¬ä¸€é¢˜ï¼š<br>&quot;&quot;&quot;æ²¡æœ‰è€ƒè™‘å­—ç¬¦ä¸²è·¨è¡Œçš„é—®é¢˜&quot;&quot;&quot;<br><br>def count_str(path):<br>    with open(path, &quot;r&quot;, encoding=&quot;utf-8&quot;) as f:<br>        str_list = []<br>        for line in iter(lambda: f.readline(), &#39;&#39;):<br>            word_list = re.findall(&quot;\\w+&quot;, line)<br>            str_list.extend(word_list)<br>        word_count_result = {word: str_list.count(word) for word in str_list}<br>        word_count_result = dict(sorted(word_count_result.items(), reverse=True, key=lambda x: x[1]))<br>        return word_count_result<br><br>def write_result(result):<br>    with open(&quot;out.txt&quot;, &quot;w&quot;) as f:<br>        import json<br>        f.write(json.dumps(result))","like_count":0},{"had_liked":false,"id":168253,"user_name":"Joeforfun","can_delete":false,"product_type":"c1","uid":1797145,"ip_address":"","ucode":"3D2BA912E0D77D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/iaxgvyIjNFomptQ9qBk4iaakYOS1XojYHDp48TXt1kX9DxTkKuR2UXGTyhG1liahib6E4BLF12ia6mic2pF0t4ECeZIQ/132","comment_is_top":false,"comment_ctime":1578038260,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1578038260","product_id":100026901,"comment_content":"# -*- coding=utf-8 -*- <br>import re<br><br># ä½ ä¸ç”¨å¤ªå…³å¿ƒè¿™ä¸ªå‡½æ•°<br>def parse(text):<br>    # ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼å»é™¤æ ‡ç‚¹ç¬¦å·å’Œæ¢è¡Œç¬¦<br>    text = re.sub(r&#39;[^\\w ]&#39;, &#39; &#39;, text)<br>    # è½¬ä¸ºå°å†™<br>    text = text.lower()<br>    # ç”Ÿæˆæ‰€æœ‰å•è¯çš„åˆ—è¡¨<br>    word_list = text.split(&#39; &#39;)<br>    return word_list<br><br>with open(&#39;in.txt&#39;, &#39;r&#39;) as fin:<br>    word_cnt = {}<br>    #æ¯è¡Œè¯»å–ï¼ˆæ²¡æœ‰è€ƒè™‘ä¸€è¡Œæœ‰å¾ˆå¤šçš„æƒ…å†µï¼‰<br>    for text in fin.readlines():<br>        #å¤„ç†è¯»å–çš„æ¯è¡Œæ•°æ®<br>        word_list=parse(text)<br>        #æ‰¹åˆ¤ç»Ÿè®¡<br>        for word in word_list:<br>            if word not in word_cnt:<br>                word_cnt[word] = 1<br>            else:<br>                word_cnt[word] += 1<br># æŒ‰ç…§è¯é¢‘æ’åº                <br>sorted_word_cnt = sorted(word_cnt.items(), key=lambda kv: kv[1], reverse=True)<br><br>with open(&#39;out.txt&#39;, &#39;w&#39;) as fout:<br>    for word, freq in sorted_word_cnt:<br>        fout.write(&#39;{} {}\\n&#39;.format(word, freq))","like_count":0},{"had_liked":false,"id":167979,"user_name":"ä¸€ç²’","can_delete":false,"product_type":"c1","uid":1582813,"ip_address":"","ucode":"FB5F583CC6AE3C","user_header":"https://static001.geekbang.org/account/avatar/00/18/26/dd/d58156b1.jpg","comment_is_top":false,"comment_ctime":1577971719,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1577971719","product_id":100026901,"comment_content":"ç¬¬ä¸€é¢˜ï¼š<br>import re<br><br>def parse(text):<br>    text = re.sub(r&#39;[^\\w]&#39;, &#39; &#39;, text)<br>    text = text.lower()<br>    word_list = text.split(&#39; &#39;)<br>    word_list = filter(None, word_list)<br><br>    word_cnt = {}<br>    for word in word_list:<br>        if word not in word_cnt:<br>            word_cnt[word] = 0<br>        word_cnt[word] += 1<br><br>    sorted_word_cnt = sorted(word_cnt.items(), key=lambda kv: kv[1], reverse=True)<br>    return sorted_word_cnt<br><br>with open(&#39;in.txt&#39;, &#39;r&#39;, encoding=&#39;utf8&#39;) as fin:<br>    for line in fin:<br>        word_and_freq = parse(line)<br>        with open(&#39;out.txt&#39;, &#39;a&#39;) as fout:<br>            for word, freq in word_and_freq:<br>                fout.write(&#39;{} {}\\n&#39;.format(word, freq))","like_count":0},{"had_liked":false,"id":159776,"user_name":"çš®çš®","can_delete":false,"product_type":"c1","uid":1752176,"ip_address":"","ucode":"9C4FFC1D28269D","user_header":"https://static001.geekbang.org/account/avatar/00/1a/bc/70/8d2ccd34.jpg","comment_is_top":false,"comment_ctime":1575785629,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575785629","product_id":100026901,"comment_content":"ç°åœ¨è¿˜æ˜¯æ²¡çœ‹åˆ°æœ€ç»ˆä»£ç ï¼Œè¯·é—®åœ¨å“ªå‘¢","like_count":0},{"had_liked":false,"id":156674,"user_name":"Bonaparte","can_delete":false,"product_type":"c1","uid":1021741,"ip_address":"","ucode":"27E9CEE38A30C3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/97/2d/8e4836f3.jpg","comment_is_top":false,"comment_ctime":1574934158,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1574934158","product_id":100026901,"comment_content":"å¦‚æœè¦å­¦ä¹ æ•°æ®åˆ†æå’Œç®—æ³•çš„å†…å®¹ï¼Œå¿…é¡»å…ˆå­¦ä¼šå»è€ƒè™‘æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦ï¼Œä¹‹å‰å­¦ä¹ è¿‡å¾ˆå¤šPythonçš„è¯¾ç¨‹ä¸­ï¼Œéƒ½æ²¡æœ‰æåˆ°è¿‡å¤æ‚åº¦è¿™ä¸ªé—®é¢˜ã€‚çªç„¶åœ¨è¿™ä¸ªè¯¾ç¨‹çœ‹åˆ°äº†å¤æ‚åº¦é—®é¢˜ï¼Œå¼€å§‹å°±å­¦ä¹ å°±ä¼šæ¯”è¾ƒåƒåŠ›ã€‚åˆ°äº†å­—ç¬¦ä¸²å“ªèŠ‚å¼€å§‹ï¼Œå°±æ…¢æ…¢çœ‹ä¸æ‡‚äº†ã€‚å­¦ä¹ çš„èŠ‚å¥å˜æˆäº†ä¸€å‘¨ï¼Œç”šè‡³ä¸¤å‘¨æ—¶é—´å»å•ƒä¸€è®²çš„å†…å®¹ã€‚<br><br>ç¡®å®ä¹‹å‰çš„éƒ½æ˜¯ç©å…·ï¼Œä¼¼ä¹ä¹‹å‰éƒ½æ²¡æœ‰å­¦è¿‡ä¸€æ ·çš„ï¼Œä¸€è„¸çš„ç–‘æƒ‘ï¼Œè¿™åˆ°åº•æ˜¯ä¸ªå•¥å­æ„æ€ï¼Ÿ<br><br>æ…¢æ…¢å•ƒ... ...","like_count":0},{"had_liked":false,"id":143505,"user_name":"è¿½é£ç­çš„äºº","can_delete":false,"product_type":"c1","uid":1488020,"ip_address":"","ucode":"2993D60F94C396","user_header":"https://static001.geekbang.org/account/avatar/00/16/b4/94/2796de72.jpg","comment_is_top":false,"comment_ctime":1571720470,"is_pvip":false,"replies":[{"id":"56040","content":"https:&#47;&#47;www.zhihu.com&#47;question&#47;265519629&#47;answer&#47;295435756","user_name":"ä½œè€…å›å¤","user_name_real":"é«˜å±±æµæ°´","uid":"1513504","ctime":1572245327,"ip_address":"","comment_id":143505,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1571720470","product_id":100026901,"comment_content":"è€å¸ˆ    æœ€åä¸€è¡Œprint(welcome_str.format(**welcome_dic))è¾“å‡º  ä¸ºä»€ä¹ˆè¦åŠ ä¸Š2ä¸ª*å‘¢ï¼Ÿ<br><br>name = input(&#39;your name:&#39;)<br>gender = input(&#39;you are a boy?(y&#47;n)&#39;)<br><br>###### è¾“å…¥ ######<br>your name:Jack<br>you are a boy?<br><br>welcome_str = &#39;Welcome to the matrix {prefix} {name}.&#39;<br>welcome_dic = {<br>    &#39;prefix&#39;: &#39;Mr.&#39; if gender == &#39;y&#39; else &#39;Mrs&#39;,<br>    &#39;name&#39;: name<br>}<br><br>print(&#39;authorizing...&#39;)<br>print(welcome_str.format(**welcome_dic))<br><br>########## è¾“å‡º ##########<br>authorizing...<br>Welcome to the matrix Mr. Jack.","like_count":0,"discussions":[{"author":{"id":1513504,"avatar":"https://static001.geekbang.org/account/avatar/00/17/18/20/75ea3b20.jpg","nickname":"é«˜å±±æµæ°´","note":"","ucode":"71E513B5937481","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":471567,"discussion_content":"https://www.zhihu.com/question/265519629/answer/295435756","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572245327,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":135974,"user_name":"ct_tao","can_delete":false,"product_type":"c1","uid":1524554,"ip_address":"","ucode":"24FED1BE03DB7E","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKpHuicbWZbXC1CTE019W6icx2aZzWYOHPxn2nhTM9BvRNzjhuEQMa1IcQWsCqeP8OwnnccO8AoMFGw/132","comment_is_top":false,"comment_ctime":1569318922,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1569318922","product_id":100026901,"comment_content":"from collections import defaultdict<br>import re<br><br>d = defaultdict(int)<br>with open(&#39;a.txt&#39;,&#39;r&#39;) as fin:<br>    for line in fin:<br>        line = line.lower()<br><br>        word_list = re.sub(r&#39;[^\\w]&#39;, &#39; &#39;, line)<br><br>        word_list = word_list.split(&#39; &#39;)<br><br>        word_list = filter(None, word_list)<br>        for word in word_list:<br>            d[word] +=1<br><br><br>with open(&#39;out.txt&#39;, &#39;w&#39;) as fout:<br>    for word, freq in d.items():<br>        fout.write(&#39;{} {}\\n&#39;.format(word, freq))<br>","like_count":0},{"had_liked":false,"id":135235,"user_name":"è‡ªç”±æ°‘","can_delete":false,"product_type":"c1","uid":1346236,"ip_address":"","ucode":"435C67531697F1","user_header":"https://static001.geekbang.org/account/avatar/00/14/8a/bc/cb39ed38.jpg","comment_is_top":false,"comment_ctime":1569074905,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1569074905","product_id":100026901,"comment_content":"æ€è€ƒé¢˜<br>1.ç¨‹åºè§githubï¼Œç”¨readline<br>åªè¯»äº†ç¬¬ä¸€è¡Œï¼Œä¸çŸ¥ä½•æ•…ã€‚<br>2.å†™ä¸ªæ€è·¯å§ï¼Œè®¾ä¸€ä¸ªsetting.jsonæ–‡ä»¶ï¼Œä¸€ä¸ªbWriteæ–‡ä»¶ï¼Œä¸€ä¸ªbReadæ–‡ä»¶ã€‚server.pyæ£€æŸ¥bWriteä¸ºFalseï¼Œä¸Šä¼ æ–‡ä»¶ï¼Œåœ¨settingé‡Œè®°å½•æ–‡ä»¶åï¼Œæ–‡ä»¶å¤§å°ã€‚å®Œæˆåå°†bWriteç½®ä¸ºTrue.client.pyæ£€æŸ¥é‚£ä¸¤ä¸ªæ–‡ä»¶ï¼Œå¦‚æœbWriteä¸ºTrueè€ŒbReadä¸ºFalseï¼Œè¯»å–setting.jsonæ–‡ä»¶ä¸­çš„æ–‡ä»¶åï¼Œä¸‹è½½ã€‚å®Œæˆåï¼Œåˆ é™¤æ–‡ä»¶ï¼ŒbReadè®¾Trueï¼ŒbWriteè®¾Falseã€‚<br>æ€»ç»“:è¾“å…¥è¾“å‡ºæœ‰é”®ç›˜å±å¹•ï¼Œæ–‡ä»¶ç­‰æ–¹å¼ï¼Œæ–‡ä»¶æœ‰æ™®é€šæ–‡ä»¶å’ŒJSONç­‰æ–¹å¼ã€‚è¦æ³¨æ„é”™è¯¯å¤„ç†ã€‚<br>è¯¾ç¨‹çš„ç»ƒä¹ ä»£ç : https:&#47;&#47;github.com&#47;zwdnet&#47;PythonPractice","like_count":0},{"had_liked":false,"id":127151,"user_name":"yonguo_dev","can_delete":false,"product_type":"c1","uid":1636363,"ip_address":"","ucode":"49E27086BF9437","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/bGrI3qhTPVgWVxSAibUu2XsFaNr3TFO08NhKcnVzW6kQPKh9kd8s6von8AORxDjRXvJXB1yibafb4nsPOzD5NWXQ/132","comment_is_top":false,"comment_ctime":1566569865,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1566569865","product_id":100026901,"comment_content":"ç¬¬äºŒé¢˜ç»™ä¸ªç®€å•çš„çº¿ç¨‹ç‰ˆï¼š   <br>import time<br>import threading<br><br><br>file_remain = 20<br>file_lock = 0<br>cloud_size = 0<br>file_transferred = 0<br><br><br>def file_client():<br>    &quot;&quot;&quot;<br>    consume file<br>    :return:<br>    &quot;&quot;&quot;<br>    global file_transferred<br>    global cloud_size<br>    while True:<br>        if file_transferred &gt;= 20:<br>            print(&#39;download success&#39;)<br>            break<br><br>        if cloud_size &lt;= 0:<br>            time.sleep(1)<br>        else:<br>            print(&#39;download 5G-file&#39;)<br>            cloud_size -= 5<br>            file_transferred += 5<br><br><br>def file_server():<br>    global file_remain<br>    global cloud_size<br>    while True:<br>        if file_remain &lt;= 0:<br>            print(&#39;upload finished&#39;)<br>            break<br><br>        if cloud_size:<br>            time.sleep(1)<br>        else:<br>            print(&#39;upload 5G-file&#39;)<br>            file_remain -= 5<br>            cloud_size += 5<br><br><br>threading.Thread(target=file_server, args=()).start()<br>threading.Thread(target=file_client, args=()).start()","like_count":0},{"had_liked":false,"id":127138,"user_name":"yonguo_dev","can_delete":false,"product_type":"c1","uid":1636363,"ip_address":"","ucode":"49E27086BF9437","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/bGrI3qhTPVgWVxSAibUu2XsFaNr3TFO08NhKcnVzW6kQPKh9kd8s6von8AORxDjRXvJXB1yibafb4nsPOzD5NWXQ/132","comment_is_top":false,"comment_ctime":1566567422,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1566567422","product_id":100026901,"comment_content":"ç¬¬ä¸€é¢˜ï¼š<br>try:<br>    word_dic = {}<br>    with open(&quot;dream.txt&quot;, &#39;r&#39;) as f:<br>        while True:<br>            line_content = f.readline()<br>            if line_content:<br>                for word in line_content.strip().split(&#39; &#39;):<br>                    if not word:<br>                        continue<br>                    else:<br>                        while True:<br>                            if not word or word[-1].isalpha():<br>                                break<br>                            word = word[:-1]<br><br>                        if not word:<br>                            continue<br><br>                        if word.upper() in word_dic.keys():<br>                            word_dic[word.upper()] += 1<br>                        else:<br>                            word_dic[word.upper()] = 1<br><br>            else:<br>                break<br><br>    print(word_dic)<br><br>    word_list = sorted(<br>        [_ for _ in word_dic.items()], key=lambda x: -x[1]<br>    )<br><br>    print(word_list)<br><br>except Exception as e:<br>    print(e)","like_count":0},{"had_liked":false,"id":126552,"user_name":"055","can_delete":false,"product_type":"c1","uid":1526831,"ip_address":"","ucode":"210A944276395F","user_header":"https://static001.geekbang.org/account/avatar/00/17/4c/2f/85a8d26e.jpg","comment_is_top":false,"comment_ctime":1566409613,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1566409613","product_id":100026901,"comment_content":"è€å¸ˆï¼Œä¸ºä»€ä¹ˆparse_to_word_list(text, last_word, word_list)ä¸­ä¸ç”¨è¿”å›word_list?","like_count":0},{"had_liked":false,"id":113216,"user_name":"Zebçˆ±python","can_delete":false,"product_type":"c1","uid":1600773,"ip_address":"","ucode":"6164593B62880E","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/LyDQYy515JwT0yHMSrPFsC1gfGnXyYLka3mDVLicAOIdyzMMZqNm0y8SNficDJYR1coDh5QOhxkHEjzqibFmNBCnA/132","comment_is_top":false,"comment_ctime":1562917467,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1562917467","product_id":100026901,"comment_content":"æˆ‘çš„æ€è·¯å¦‚ä¸‹ï¼Œä¼ å…¥æ–‡ä»¶ï¼Œè¿”å›å­—å…¸ï¼Œè€å¸ˆè¿™æ ·å¯ä»¥å—ï¼Ÿ<br>import re<br><br><br>def parse(file):<br><br>    word_dic = {}<br>    with open(&#39;D:&#47;odb&#47;in.txt&#39;, &#39;r&#39;) as fin:<br>        for line in fin:<br>            text = re.sub(r&#39;[^\\w ]&#39;, &#39; &#39;, line)<br>            text = text.lower()<br><br>            word_list = text.split(&#39; &#39;)<br>            word_list = filter(None, word_list)<br><br>            for word in word_list:<br>                if word not in word_dic:<br>                    word_dic[word] = 0<br>                word_dic[word] += 1<br><br>    sorted_word_list = sorted(word_dic.items(),<br>                              key=lambda kv: kv[1],<br>                              reverse=True)<br><br>    return sorted_word_list<br><br><br>word_file = &#39;D:&#47;odb&#47;in.txt&#39;<br>word_dic_sorted = parse(word_file)<br><br>with open(&#39;D:&#47;odb&#47;out.txt&#39;, &#39;w&#39;) as fout:<br>    for word, freq in word_dic_sorted:<br>        fout.write(&#39;{} {}\\n&#39;.format(word, freq))<br>","like_count":0},{"had_liked":false,"id":110302,"user_name":"éƒ­æ°","can_delete":false,"product_type":"c1","uid":1139077,"ip_address":"","ucode":"8A14FC047A679B","user_header":"https://static001.geekbang.org/account/avatar/00/11/61/85/6accd013.jpg","comment_is_top":false,"comment_ctime":1562226691,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1562226691","product_id":100026901,"comment_content":"ä¸€&#47;é¦–å…ˆå…ˆå»ºç«‹æ•°æ®æµ<br><br>äºŒ&#47;ç›‘å¬æ˜¯å¦æœ‰æ–°æ•°æ®å†™å…¥<br><br>ä¸‰&#47;å†æŠŠæ•°æ®å†™å…¥åˆ°æœ¬åœ°<br><br>å››&#47;åˆ é™¤çº¿ä¸Šæ•°æ®","like_count":0},{"had_liked":false,"id":110289,"user_name":"éƒ­æ°","can_delete":false,"product_type":"c1","uid":1139077,"ip_address":"","ucode":"8A14FC047A679B","user_header":"https://static001.geekbang.org/account/avatar/00/11/61/85/6accd013.jpg","comment_is_top":false,"comment_ctime":1562222869,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1562222869","product_id":100026901,"comment_content":"python2å’Œpython3è¿”å›çš„ä¸ä¸€æ ·","like_count":0},{"had_liked":false,"id":110235,"user_name":"å¼ å¤§äºº","can_delete":false,"product_type":"c1","uid":1200544,"ip_address":"","ucode":"4FCA71788DEB29","user_header":"https://static001.geekbang.org/account/avatar/00/12/51/a0/f3bb1dd7.jpg","comment_is_top":false,"comment_ctime":1562212272,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1562212272","product_id":100026901,"comment_content":"ä¸å¥½æ„æ€ï¼Œè¯·é—®è€å¸ˆçš„githubåœ°å€å¤šå°‘å•Šï¼Ÿ","like_count":0},{"had_liked":false,"id":109825,"user_name":"xavier","can_delete":false,"product_type":"c1","uid":1243128,"ip_address":"","ucode":"2F7918EA37ED9F","user_header":"https://static001.geekbang.org/account/avatar/00/12/f7/f8/3c0a6854.jpg","comment_is_top":false,"comment_ctime":1562117546,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1562117546","product_id":100026901,"comment_content":"æ¯ç¯‡éƒ½æœ‰æ”¶è·ï¼Œå®è·µå‡ºçœŸçŸ¥ï¼Œå–œæ¬¢è¿™ç§å®æˆ˜æ•™å­¦ã€‚","like_count":0},{"had_liked":false,"id":109701,"user_name":"Luove","can_delete":false,"product_type":"c1","uid":1545251,"ip_address":"","ucode":"73CD4D2C731B47","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q3auHgzwzM7adYZoHGic7ZS6cp9OmBjh1C4ajCCpciblR3ib3jDtiaKrFdbT9J7sl2B9eNoCQicfx5QWgVVZQB74pfQ/132","comment_is_top":false,"comment_ctime":1562079115,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1562079115","product_id":100026901,"comment_content":"è€å¸ˆå¥½ï¼Œæœ¬æ–‡ä¸­æåˆ°ï¼Œlambda x:x ç­‰ä»·äº Noneï¼Œä¸æ˜¯å¾ˆç†è§£ä¸ºä½•ç›¸ç­‰å‘¢ï¼Œlambda x:x ä¸å°±æ˜¯è¿”å›è‡ªèº«çš„å—ï¼Ÿè¯·è€å¸ˆè§£æƒ‘ã€‚","like_count":0},{"had_liked":false,"id":105600,"user_name":"Geek_59f23e","can_delete":false,"product_type":"c1","uid":1513783,"ip_address":"","ucode":"A463C6EB7447FD","user_header":"https://static001.geekbang.org/account/avatar/00/17/19/37/e0a9bf99.jpg","comment_is_top":false,"comment_ctime":1561039740,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561039740","product_id":100026901,"comment_content":"ç¬¬äºŒé¢˜æˆ‘åœ¨æƒ³èƒ½ä¸èƒ½æå‰åˆ¤æ–­å‡ºåˆç†çš„CHUNK_SIZEï¼Œæ¯”å¦‚åœ¨100çš„ä½ç½®é™„è¿‘æ‰¾åˆ°102æ˜¯ç©ºæ ¼ï¼Œå°†102ä½œä¸ºç¬¬ä¸€æ¬¡readçš„sizeï¼Œå¯ä»¥ä½¿ç”¨seekå‡½æ•°æ¥åˆ¤æ–­å½“å‰read(1)å­—ç¬¦æ˜¯å¦ä¸ºç©ºæ ¼ï¼ŒåŒæ—¶ä½¿ç”¨äºŒè¿›åˆ¶è¯»æ¥æé«˜é€Ÿåº¦ï¼Œæœ€åæ„å»ºå‡ºæ¯æ¬¡readçš„sizeåˆ—è¡¨ï¼Œä¼šä¸ä¼šæ›´åŠ æ•ˆç‡å‘¢ã€‚","like_count":0},{"had_liked":false,"id":102285,"user_name":"è™çš®çŒ«å¤§äºº","can_delete":false,"product_type":"c1","uid":1142781,"ip_address":"","ucode":"A92E4A61B86BDC","user_header":"https://static001.geekbang.org/account/avatar/00/11/6f/fd/af250f7d.jpg","comment_is_top":false,"comment_ctime":1560176157,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1560176157","product_id":100026901,"comment_content":"è€å¸ˆçš„ç¬¬ä¸€é¢˜è§£æ³•ï¼Œä¸ºä»€ä¹ˆpares_to_word_listå‡½æ•°æ²¡æœ‰è¿”å›word_listï¼Œä½†åœ¨solveå‡½æ•°ä¸­çš„forå¾ªç¯å¯ä»¥è¯»åˆ°æ•°æ®ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1606433,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/UA8KQxMP9FCvygSLksNSWLzhz0rJH8hiaP9XrfbQE81ibd7kicu2ibmlJVwXGCDu8T1jZ5xvowOqHiaZe6InBOhvKaQ/132","nickname":"hp_momocha2","note":"","ucode":"4478DC2EC730D9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3155,"discussion_content":"å› ä¸ºä¼ é€’ç»™pares_to_word_listå‡½æ•°å‚æ•°æ˜¯åˆ—è¡¨word_listçš„æŒ‡é’ˆï¼ˆæˆ–ç§°ä¸ºå¼•ç”¨ï¼‰ï¼Œå¹¶ä¸æ˜¯åˆ—è¡¨å‰¯æœ¬ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564229510,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":101872,"user_name":"å»ºå¼º","can_delete":false,"product_type":"c1","uid":1397126,"ip_address":"","ucode":"62B03D0E0C64EC","user_header":"https://static001.geekbang.org/account/avatar/00/15/51/86/b5fd8dd8.jpg","comment_is_top":false,"comment_ctime":1560006173,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1560006173","product_id":100026901,"comment_content":"æ€è€ƒé¢˜2çš„client.pyæºç¨‹åºå¦‚ä¸‹ï¼š<br>import json<br>import time<br><br>&#39;&#39;&#39;<br>Clientç«¯å¤„ç†æµç¨‹ï¼š<br>1.è¯»å–config.jsonæ–‡ä»¶<br>2.åˆ¤æ–­çŠ¶æ€ï¼Œè‹¥status=0,è¡¨ç¤ºæ–‡ä»¶å·²ç»ä¸‹è½½ï¼Œéœ€è¦ç­‰å¾…ä¸Šä¼ ï¼Œä»ç„¶å›åˆ°ç¬¬1æ­¥<br>3.è‹¥status=1æˆ–status=2,è¡¨ç¤ºå¯ä»ç½‘ç›˜ä¸Šä¸‹è½½æ–‡ä»¶ï¼Œåˆ™ä»ç½‘ç›˜ä¸­è¯»å–æ–‡ä»¶ï¼Œå¹¶å†™å…¥æœ¬åœ°æ–‡ä»¶ä¸­<br>4.è‹¥status=1ï¼Œåˆ™ä¿®æ”¹status=0ï¼Œå†™å›config.jsonï¼Œä»ç„¶å›åˆ°ç¬¬1æ­¥<br>5.è‹¥status=2ï¼Œåˆ™è¯´æ˜ä¸Šä¼ å·²ç»ç»“æŸï¼ŒClientç«¯ç¨‹åºä¹Ÿç»“æŸã€‚<br>&#39;&#39;&#39;<br>def getFileStatus():<br><br>    #å› ç¬¬ä¸€æ¬¡å†™Pythonï¼Œä¸çŸ¥é“æ€ä¹ˆè·å–ç½‘ç›˜æ–‡ä»¶ï¼Œæš‚æ—¶ç”¨æœ¬åœ°æ–‡ä»¶ä»£æ›¿<br>    with open(&#39;F:\\\\temp\\\\config.json&#39;, &#39;r&#39;) as jsonfin:<br>        filestatus = json.load(jsonfin)<br><br>    return filestatus<br><br>def setFileStatus(filestatus):<br><br>    #å› ç¬¬ä¸€æ¬¡å†™Pythonï¼Œä¸çŸ¥é“æ€ä¹ˆè·å–ç½‘ç›˜æ–‡ä»¶ï¼Œæš‚æ—¶ç”¨æœ¬åœ°æ–‡ä»¶ä»£æ›¿<br>    with open(&#39;F:\\\\temp\\\\config.json&#39;, &#39;w&#39;) as jsonfout:<br>        json.dump(filestatus,jsonfout)<br><br>    return<br><br>#å‚æ•°filenameï¼šè¦ä¸‹è½½çš„æ–‡ä»¶åï¼Œå³æŠŠç½‘ç›˜æ–‡ä»¶çš„å†…å®¹å†™å…¥è¯¥æ–‡ä»¶ä¸­ã€‚<br>def downLoadFile(filename):<br><br>    #å‘ä¸‹è½½æ–‡ä»¶ä¸­å†™å…¥ç½‘ç›˜æ–‡ä»¶å†…å®¹<br>    with open(filename, &#39;ab&#39;) as fout:<br><br>        downloadtimes = 0<br><br>        while(True):<br>            <br>            #è¯»å–æ–‡ä»¶çŠ¶æ€ï¼Œåˆ¤æ–­æ˜¯å¦å¯ä¸‹ä¼ <br>            filestatus = getFileStatus()<br>            netfile = filestatus[&#39;filename&#39;]<br>            status = filestatus[&#39;status&#39;]<br><br>            #print(&quot;client: status=&quot;,status)<br><br>            if status == 2: #æ–‡ä»¶ä¸Šä¼ å·²ç»ç»“æŸï¼Œåˆ™é€€å‡º<br>                print(&quot;æ–‡ä»¶ä¸‹è½½ç»“æŸ&quot;)<br>                break<br><br>            if status == 0: #æ–‡ä»¶å·²ç»ä¸‹è½½ï¼Œç­‰å¾…ä¸Šä¼ åæ‰èƒ½ç»§ç»­ä¸‹è½½<br>                #ä¸ºé¿å…å’ŒæœåŠ¡ç«¯äº§ç”Ÿå†²çªï¼Œå»¶è¿Ÿ1ç§’ï¼Œå†è¯»çŠ¶æ€<br>                time.sleep(1)<br>                continue<br><br>            #è¯»å–ç½‘ç›˜å†…å®¹<br>            with open(netfile, &#39;rb&#39;) as fin:<br>                filevalue = fin.read()<br>                <br>            #å†™å…¥ä¸‹è½½æ–‡ä»¶ä¸­<br>            fout.write(filevalue)<br><br>            #è®¾ç½®çŠ¶æ€<br>            filestatus[&#39;status&#39;] = 0<br> <br>            #æŠŠæ–‡ä»¶çŠ¶æ€å†™å›config.json<br>            setFileStatus(filestatus)<br><br>            downloadtimes += 1<br><br>            print(&quot;Client: ç¬¬&quot;,downloadtimes,&quot;æ¬¡ä¸‹è½½&quot;)<br><br>    return<br>downLoadFile(&#39;F:\\\\temp\\\\local\\\\move.rar&#39;)<br>","like_count":0},{"had_liked":false,"id":101870,"user_name":"å»ºå¼º","can_delete":false,"product_type":"c1","uid":1397126,"ip_address":"","ucode":"62B03D0E0C64EC","user_header":"https://static001.geekbang.org/account/avatar/00/15/51/86/b5fd8dd8.jpg","comment_is_top":false,"comment_ctime":1560005991,"is_pvip":false,"replies":[{"id":"36706","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"é«˜å±±æµæ°´","uid":"1513504","ctime":1560030177,"ip_address":"","comment_id":101870,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1560005991","product_id":100026901,"comment_content":"æ€è€ƒé¢˜2çš„server.pyæºç¨‹åºå¦‚ä¸‹ï¼š<br>import json<br>import time<br><br>&#39;&#39;&#39;<br>SERVERç«¯å¤„ç†æµç¨‹ï¼š<br>1.è¯»å–config.jsonæ–‡ä»¶<br>2.åˆ¤æ–­çŠ¶æ€ï¼Œè‹¥status=1,è¡¨ç¤ºæ–‡ä»¶å·²ç»ä¸Šä¼ ï¼Œéœ€è¦ç­‰å¾…ä¸‹è½½ï¼Œä»ç„¶å›åˆ°ç¬¬1æ­¥<br>3.è‹¥status=0,è¡¨ç¤ºå¯ä¸Šä¼ æ–‡ä»¶åˆ°ç½‘ç›˜ï¼Œåˆ™è¯»å–è¦ä¸Šä¼ çš„æºæ–‡ä»¶ï¼Œå¤§å°ä¸è¶…è¿‡5Gï¼Œå¹¶å†™å…¥ç½‘ç›˜æ–‡ä»¶<br>4.åˆ¤æ–­æ–­æºæ–‡ä»¶æ˜¯å¦å·²ç»è¯»å®Œï¼Œè‹¥æœªè¯»å®Œï¼Œä¿®æ”¹status=1ï¼Œå†™å›config.jsonï¼Œä»ç„¶å›åˆ°ç¬¬1æ­¥<br>5.å¦åˆ™ï¼Œä¿®æ”¹status=2ï¼Œå†™å›config.json,Serverç«¯ç¨‹åºç»“æŸã€‚<br>&#39;&#39;&#39;<br>def getFileStatus():<br><br>    #å› ç¬¬ä¸€æ¬¡å†™Pythonï¼Œä¸çŸ¥é“æ€ä¹ˆè·å–ç½‘ç›˜æ–‡ä»¶ï¼Œæš‚æ—¶ç”¨æœ¬åœ°æ–‡ä»¶ä»£æ›¿<br>    with open(&#39;F:\\\\temp\\\\config.json&#39;, &#39;r&#39;) as jsonfin:<br>        filestatus = json.load(jsonfin)<br><br>    return filestatus<br><br>def setFileStatus(filestatus):<br><br>    #å› ç¬¬ä¸€æ¬¡å†™Pythonï¼Œä¸çŸ¥é“æ€ä¹ˆè·å–ç½‘ç›˜æ–‡ä»¶ï¼Œæš‚æ—¶ç”¨æœ¬åœ°æ–‡ä»¶ä»£æ›¿<br>    with open(&#39;F:\\\\temp\\\\config.json&#39;, &#39;w&#39;) as jsonfout:<br>        json.dump(filestatus,jsonfout)<br><br>    return<br><br>#å‚æ•°filenameï¼šè¦ä¸Šä¼ çš„æ–‡ä»¶å<br>#å‚æ•°filesizeï¼šè¦ä¸Šä¼ çš„æ–‡ä»¶å¤§å°,é»˜è®¤ä¸º10Må¤§å°<br>def upLoadFile(filename,filesize=10485760):<br><br>    #ä»ä¸Šä¼ æ–‡ä»¶ä¸­è¯»å–æ–‡ä»¶å†…å®¹<br>    with open(filename, &#39;rb&#39;) as fin:<br><br>        uploadtimes = 0<br><br>        while(True):<br>            <br>            #è¯»å–æ–‡ä»¶çŠ¶æ€ï¼Œåˆ¤æ–­æ˜¯å¦å¯ä¸Šä¼ <br>            filestatus = getFileStatus()<br>            netfile = filestatus[&#39;filename&#39;]<br>            status = filestatus[&#39;status&#39;]<br><br>            #print(&quot;server: status=&quot;,status)<br><br>            if status == 2: #æ–‡ä»¶ä¸Šä¼ å·²ç»ç»“æŸï¼Œåˆ™é€€å‡º<br>                break<br><br>            if status == 1: #æ–‡ä»¶å·²ç»ä¸Šä¼ ï¼Œç­‰å¾…ä¸‹è½½åæ‰èƒ½ç»§ç»­ä¸Šä¼ <br>                #ä¸ºé¿å…å’Œå®¢æˆ·ç«¯äº§ç”Ÿå†²çªï¼Œå»¶è¿Ÿ1ç§’ï¼Œå†è¯»çŠ¶æ€<br>                time.sleep(1)<br>                continue<br>            <br>            filevalue = fin.read(filesize)<br><br>            if not filevalue:<br>                filestatus[&#39;filesize&#39;] = 0<br>                filestatus[&#39;status&#39;] = 2<br>                print(&quot;æ–‡ä»¶ä¸Šä¼ ç»“æŸ&quot;)<br>            else:<br>                #æŠŠè¯»å–çš„å†…å®¹å†™å…¥ç½‘ç›˜æ–‡ä»¶ï¼Œå¹¶è®¾ç½®çŠ¶æ€<br>                with open(netfile, &#39;wb&#39;) as fout:<br>                    fout.write(filevalue)<br>                filestatus[&#39;filesize&#39;] = filesize<br>                filestatus[&#39;status&#39;] = 1<br><br>                uploadtimes += 1<br>                print(&quot;Server: ç¬¬&quot;,uploadtimes,&quot;æ¬¡ä¸Šä¼ &quot;)<br><br>            #æŠŠæ–‡ä»¶çŠ¶æ€å†™å›config.json<br>            setFileStatus(filestatus)<br><br>    return<br><br>upLoadFile(&#39;F:\\\\temp\\\\move\\\\move.rar&#39;)<br>","like_count":0,"discussions":[{"author":{"id":1513504,"avatar":"https://static001.geekbang.org/account/avatar/00/17/18/20/75ea3b20.jpg","nickname":"é«˜å±±æµæ°´","note":"","ucode":"71E513B5937481","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":453149,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560030177,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":101377,"user_name":"new","can_delete":false,"product_type":"c1","uid":1096252,"ip_address":"","ucode":"DFFCDC2123CCAA","user_header":"https://static001.geekbang.org/account/avatar/00/10/ba/3c/2b642c9a.jpg","comment_is_top":false,"comment_ctime":1559792156,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1559792156","product_id":100026901,"comment_content":"ç¬¬ä¸€ä¸ªæ‰“å°è¯­å¥åº”è¯¥æ˜¯print(&#39;type of params_str = {}, params_str = {}&#39;.format(type(params_str), params_str))è¿™ä¹ˆå†™å§ã€‚å¥½åƒè¡¨è¾¾å’Œä¹¦å†™çš„æœ‰é—®é¢˜å§ã€‚æ„Ÿè§‰é”™è¯¯å¥½å¤šï¼Œä¸é€‚åˆæˆ‘è¿™åˆå­¦è€…","like_count":0},{"had_liked":false,"id":100750,"user_name":"Tsn_09","can_delete":false,"product_type":"c1","uid":1554170,"ip_address":"","ucode":"736F4551CB9A2F","user_header":"","comment_is_top":false,"comment_ctime":1559632272,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1559632272","product_id":100026901,"comment_content":"è²Œä¼¼æœ€åä¸€ä¸ªå•è¯ä¼šå°‘ç»Ÿè®¡ä¸€æ¬¡","like_count":0},{"had_liked":false,"id":100728,"user_name":"æ–¹","can_delete":false,"product_type":"c1","uid":1524180,"ip_address":"","ucode":"FAE43CEB143337","user_header":"https://static001.geekbang.org/account/avatar/00/17/41/d4/a896f83f.jpg","comment_is_top":false,"comment_ctime":1559628421,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1559628421","product_id":100026901,"comment_content":"å°±æ²¡äººå‘ç° b = input(&quot;input:&quot;) æ¥æ”¶ä¸äº†å­—ç¬¦ä¸²å—ï¼Ÿ<br>2.7  3.6  3.7 ç‰ˆæœ¬éƒ½ä¸è¡Œ<br>ç„¶åç”¨äº† b = raw_input(&quot;input:&quot;) å°±è¡Œ<br>æˆ‘çº¯å°ç™½ï¼Œè§è°…","like_count":0},{"had_liked":false,"id":100114,"user_name":"æ¸¸æˆ","can_delete":false,"product_type":"c1","uid":1526457,"ip_address":"","ucode":"2DAF963DADEE76","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/rp4leprLrAVpeibk9n6KHaYZeasBG4faU2JnHsBMqxE1o4BALjCTmBZV2g4dkuPGhu13kmRwSOgXpoPky3qc4Zw/132","comment_is_top":false,"comment_ctime":1559446921,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1559446921","product_id":100026901,"comment_content":"é…ç½®æ–‡ä»¶çš„å’Œå½“å‰çš„ç½‘ç›˜æ–‡ä»¶åŒæ­¥ä¸ä¼šä¸€ä¸€å¯¹åº”ï¼Œæ‰€ä»¥éœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­åŠ å…¥å¯¹åº”çš„æ–‡ä»¶ä¿¡æ¯ï¼Œå½“å…¬å¸è·å–åˆ°çš„é…ç½®æ–‡ä»¶ä¸­çš„æ–‡ä»¶åˆ—è¡¨ä¿¡æ¯å’ŒdropboxåŒæ­¥çš„æ–‡ä»¶åˆ—è¡¨ä¿¡æ¯ä¸€è‡´æ—¶å°±å¯ä»¥å¤åˆ¶å®Œäº†æ–‡ä»¶åè¿›è¡Œé…ç½®æ–‡ä»¶çš„ä¿®æ”¹ï¼ŒåŠ å…¥ä¸€ä¸ªæ ‡è®°è¡¨ç¤ºå·²ç»æ‹·è´å®Œæ¯•ï¼Œå½“å®¶é‡Œçš„ç”µè„‘è·å–åˆ°å·²ç»æ‹·è´å®Œæˆçš„æ ‡è®°åå°±å¯ä»¥åˆ é™¤æ‰dropboxä¸­çš„æ–‡ä»¶ï¼Œè¿›è¡Œä¸‹ä¸€æ³¢çš„æ–‡ä»¶åŒæ­¥","like_count":0},{"had_liked":false,"id":99388,"user_name":"link","can_delete":false,"product_type":"c1","uid":1449334,"ip_address":"","ucode":"2A5C2D8987F958","user_header":"https://static001.geekbang.org/account/avatar/00/16/1d/76/62c8df21.jpg","comment_is_top":false,"comment_ctime":1559204722,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1559204722","product_id":100026901,"comment_content":"Uç›˜æ˜¯è‚¯å®šä¼šå¸¦çš„","like_count":0},{"had_liked":false,"id":98737,"user_name":"Clany","can_delete":false,"product_type":"c1","uid":1238495,"ip_address":"","ucode":"1C4B6321172D87","user_header":"https://static001.geekbang.org/account/avatar/00/12/e5/df/ae7f8e00.jpg","comment_is_top":false,"comment_ctime":1559089069,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1559089069","product_id":100026901,"comment_content":"è€å¸ˆï¼Œæˆ‘å»æŒ‰è¡Œè¯»å–ä¸€ä¸ªå¤§æ–‡æœ¬æ•°æ®ï¼Œå¦‚æœä¸­é€”å‡ºå¼‚å¸¸é€€å‡ºäº†ï¼Œæˆ‘è¯¥å¦‚ä½•å»ç»­ä¸Šå¼‚å¸¸å¤„çš„åœ°æ–¹ç»§ç»­è¯»å–æ•°æ®å‘¢ï¼Ÿæœ‰å“ªäº›æ–¹æ³•å˜›ï¼Œæ±‚å‘ŠçŸ¥ï¼Œè°¢è°¢è€å¸ˆ","like_count":0},{"had_liked":false,"id":98693,"user_name":"éƒ­æ°","can_delete":false,"product_type":"c1","uid":1139077,"ip_address":"","ucode":"8A14FC047A679B","user_header":"https://static001.geekbang.org/account/avatar/00/11/61/85/6accd013.jpg","comment_is_top":false,"comment_ctime":1559058688,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1559058688","product_id":100026901,"comment_content":"è€å¸ˆæˆ‘é—®ä¸€ä¸‹ï¼Œä¸€èˆ¬ä»€ä¹ˆæƒ…å†µä¸‹ä½¿ç”¨try ","like_count":0},{"had_liked":false,"id":98671,"user_name":"å¼ æ´ªé˜†","can_delete":false,"product_type":"c1","uid":1001954,"ip_address":"","ucode":"CFF7035D0DF059","user_header":"https://static001.geekbang.org/account/avatar/00/0f/49/e2/1fad12eb.jpg","comment_is_top":false,"comment_ctime":1559054219,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1559054219","product_id":100026901,"comment_content":"ç¬¬äºŒä¸ªprintçš„æœ€åä¸€ä¸ªå‚æ•°åº”è¯¥æ˜¯params_strå§ï¼Ÿ<br><br>print(&#39;after json serialization&#39;)<br>print(&#39;type of params_str = {}, params_str = {}&#39;.format(type(params_str), params))<br><br>original_params = json.loads(params_str)<br><br>print(&#39;after json deserialization&#39;)<br>print(&#39;type of original_params = {}, original_params = {}&#39;.format(type(original_params), original_params))<br><br>########## è¾“å‡º ##########<br><br>after json serialization<br>type of params_str = &lt;class &#39;str&#39;&gt;, params_str = {&#39;symbol&#39;: &#39;123456&#39;, &#39;type&#39;: &#39;limit&#39;, &#39;price&#39;: 123.4, &#39;amount&#39;: 23}<br>after json deserialization<br>type of original_params = &lt;class &#39;dict&#39;&gt;, original_params = {&#39;symbol&#39;: &#39;123456&#39;, &#39;type&#39;: &#39;limit&#39;, &#39;price&#39;: 123.4, &#39;amount&#39;: 23}<br>","like_count":0},{"had_liked":false,"id":98353,"user_name":"é—²äºº","can_delete":false,"product_type":"c1","uid":1546492,"ip_address":"","ucode":"F04C0463C6BB5F","user_header":"https://static001.geekbang.org/account/avatar/00/17/98/fc/b1d22b7e.jpg","comment_is_top":false,"comment_ctime":1558966258,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1558966258","product_id":100026901,"comment_content":"ç”¨helpæŸ¥äº†ä¸€ä¸‹filterçš„ç”¨æ³•ï¼š<br>filter(function or None, iterable) --&gt; filter object<br>Return an iterator yielding those items of iterable for <br>which function(item) is true.<br>If function is None, return the items that are true.","like_count":0},{"had_liked":false,"id":98335,"user_name":"Steven","can_delete":false,"product_type":"c1","uid":1495454,"ip_address":"","ucode":"BC5B33911FEC46","user_header":"https://static001.geekbang.org/account/avatar/00/16/d1/9e/fe7bc8df.jpg","comment_is_top":false,"comment_ctime":1558961538,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1558961538","product_id":100026901,"comment_content":"æ‰“å¡","like_count":0},{"had_liked":false,"id":98275,"user_name":"æ°´æœ¨åˆ€","can_delete":false,"product_type":"c1","uid":1500427,"ip_address":"","ucode":"942093B000C41E","user_header":"https://static001.geekbang.org/account/avatar/00/16/e5/0b/e4e2c0b1.jpg","comment_is_top":false,"comment_ctime":1558946709,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1558946709","product_id":100026901,"comment_content":"ç¬¬ä¸€é¢˜ï¼šå­¦åˆ°äº†é›†åˆç±»å‹çš„è®¡æ•°å™¨ï¼š<br>from collections import defaultdict<br>import re<br><br>dic = defaultdict(int)<br><br>print(type(dic))<br>with open(&quot;in.txt&quot;, &#39;r&#39;) as f:<br>    for line in f:\t\t\t\t\t\t\t#ä¸€è¡Œè¡Œè¯»å…¥<br>        line = re.sub(r&#39;[^\\w]&#39;, &#39; &#39;, line)\t##ä¸æ˜¯å­—æ¯çš„éƒ½æ›¿æ¢æˆç©ºæ ¼<br>        for word in re.split(r&#39;[\\s\\n]+&#39;, line):  #æ›¿æ¢ä»»æ„ç©ºç™½å­—ç¬¦ååˆ†å‰²æˆåˆ—è¡¨<br>            word = word.lower()<br>            if word:<br>                dic[word] += 1<br>dic =  sorted(dic.items(),key=lambda kv:kv[1],reverse=True)<br>print(dic)","like_count":0},{"had_liked":false,"id":98160,"user_name":"Geek_16b077","can_delete":false,"product_type":"c1","uid":1524489,"ip_address":"","ucode":"FE80EC95D143EF","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLX6H7yN2PnwkCYlAV83jIh5P5cBUHnq4hqkib5RSktgqpMJBiaccGsZUzcagWLiaVG1ve3cqanicwPxg/132","comment_is_top":false,"comment_ctime":1558922755,"is_pvip":false,"replies":[{"id":"35142","content":"ä½ å¯ä»¥è‡ªå·±è·‘ä¸€ä¸‹å“¦ï¼Œå› ä¸º last_word åœ¨ä½ è¿™ç§æƒ…å†µä¸‹ä¸ºç©ºå­—ç¬¦ä¸²ï¼Œæƒ³æƒ³ä¸ºä»€ä¹ˆ","user_name":"ä½œè€…å›å¤","user_name_real":"Jingxiao","uid":"1259521","ctime":1558931659,"ip_address":"","comment_id":98160,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1558922755","product_id":100026901,"comment_content":"ç¬¬ä¸€é¢˜ï¼ŒæŒ‰æ¯æ¬¡è¯»å–CHUNK_SIZE=100ï¼Œå¯èƒ½ä¼šæœ‰é—®é¢˜ï¼Œæ¯”å¦‚  ï¼š  ......I have a dream ...     ï¼Œå¦‚æœhaveåé¢çš„ç©ºæ ¼åˆšå¥½æ˜¯ç¬¬100ä¸ªå­—ç¬¦ï¼Œé‚£ä¹ˆæ­¤æ—¶äº§ç”Ÿçš„ last_word ä¸º have ï¼Œåœ¨ä¸ä¸‹ä¸€è½®å–å¾—100ä¸ªå­—ç¬¦ç»“åˆï¼Œå¾—åˆ° havea dream.......    å‡ºç°&quot;havea&quot; è¿™ä¸€ä¸åˆç†å¾—å•è¯","like_count":0,"discussions":[{"author":{"id":1259521,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJJOlibibPFEWOib8ib7RtfAtxND5FUqCxxoeTuLAbBI9ic23xuwdXT4IyiaWq3Fic9RgEAYI0lBTbEp2rcg/132","nickname":"Jingxiao","note":"","ucode":"EB966BB87132F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451584,"discussion_content":"ä½ å¯ä»¥è‡ªå·±è·‘ä¸€ä¸‹å“¦ï¼Œå› ä¸º last_word åœ¨ä½ è¿™ç§æƒ…å†µä¸‹ä¸ºç©ºå­—ç¬¦ä¸²ï¼Œæƒ³æƒ³ä¸ºä»€ä¹ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558931659,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":98091,"user_name":"ozonect","can_delete":false,"product_type":"c1","uid":1530688,"ip_address":"","ucode":"ABE4997A5FA2A1","user_header":"https://static001.geekbang.org/account/avatar/00/17/5b/40/309a4ef2.jpg","comment_is_top":false,"comment_ctime":1558914535,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1558914535","product_id":100026901,"comment_content":"å¤§ä¸€çš„æ–°ç”Ÿé£˜è¿‡  æ„Ÿè§‰ç¬¬äºŒä¸ªæ€è€ƒé¢˜æŒºéš¾çš„","like_count":0},{"had_liked":false,"id":98047,"user_name":"Fergus","can_delete":false,"product_type":"c1","uid":1277066,"ip_address":"","ucode":"3A8AC741C49CEB","user_header":"https://static001.geekbang.org/account/avatar/00/13/7c/8a/bdeb76ac.jpg","comment_is_top":false,"comment_ctime":1558882856,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1558882856","product_id":100026901,"comment_content":"è¡¥è¯¾ä¸­ã€‚ã€‚ã€‚ç¬¬äºŒé¢˜è¿˜éœ€è¦æƒ³æƒ³ï¼Œç­‰å®Œæˆäº†å†æäº¤","like_count":0},{"had_liked":false,"id":97920,"user_name":"î…ğŸğŸ","can_delete":false,"product_type":"c1","uid":1545949,"ip_address":"","ucode":"21C4F1D74ADD87","user_header":"https://static001.geekbang.org/account/avatar/00/17/96/dd/0fb7667d.jpg","comment_is_top":false,"comment_ctime":1558841350,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1558841350","product_id":100026901,"comment_content":"è€å¸ˆï¼Œè¿™å¥è¯æ²¡æœ‰ææ‡‚ï¼Œ key=lambda kv: kv[1] ï¼Œå…¶ä¸­ kv[1] ä»£è¡¨ä»€ä¹ˆå‘€ï¼Ÿ","like_count":0},{"had_liked":false,"id":97814,"user_name":"é¦–å¸­æ°‘å·¥","can_delete":false,"product_type":"c1","uid":1079418,"ip_address":"","ucode":"8B8D2407A1F7E3","user_header":"https://static001.geekbang.org/account/avatar/00/10/78/7a/41ba6b76.jpg","comment_is_top":false,"comment_ctime":1558783879,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1558783879","product_id":100026901,"comment_content":"**welcome_dic<br><br>è¿™é‡Œä¸¤ä¸ª*è¡¨ç¤ºä»€ä¹ˆæ„æ€å‘¢","like_count":0},{"had_liked":false,"id":97705,"user_name":"å°ä¾ é¾™æ—‹é£","can_delete":false,"product_type":"c1","uid":1126441,"ip_address":"","ucode":"073F3924A99835","user_header":"https://static001.geekbang.org/account/avatar/00/11/30/29/d6816ebf.jpg","comment_is_top":false,"comment_ctime":1558752300,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1558752300","product_id":100026901,"comment_content":"re.split(r&#39;\\s&#39;,line)åªæ˜¯é€šè¿‡ç©ºå­—ç¬¦åˆ†å‰²æ¯ä¸ªå•è¯ï¼Œä½†æ ‡ç‚¹ç¬¦å·å¹¶æ²¡è¿‡æ»¤ã€‚","like_count":0},{"had_liked":false,"id":97695,"user_name":"Geek_fly","can_delete":false,"product_type":"c1","uid":1524509,"ip_address":"","ucode":"6D65B9A70C222F","user_header":"","comment_is_top":false,"comment_ctime":1558750487,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1558750487","product_id":100026901,"comment_content":"json.loads() æˆ‘ç»å¸¸ç»å¸¸ç”¨ã€‚ã€‚æ€»ä¼šé‡åˆ°å„ç§ç¼–ç é—®é¢˜å¯¼è‡´æŠ¥é”™ï¼Œå¸Œæœ›è€å¸ˆèƒ½æŠŠå­—ç¬¦ç¼–ç é—®é¢˜ç”±æµ…è‡³æ·±è®²æ¸…æ¥š","like_count":0},{"had_liked":false,"id":97620,"user_name":"voc","can_delete":false,"product_type":"c1","uid":1526888,"ip_address":"","ucode":"EDAFFBA02550FF","user_header":"https://static001.geekbang.org/account/avatar/00/17/4c/68/77a0ac2d.jpg","comment_is_top":false,"comment_ctime":1558713567,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1558713567","product_id":100026901,"comment_content":"è¯»å…¥jsonæ•°æ®æ—¶ï¼Œæ–‡ä»¶ä¸­çš„jsonå­—ç¬¦ä¸²å¿…é¡»ä½¿ç”¨åŒå¼•å·ï¼Œå•å¼•å·è¯»å…¥ä¼šæŠ¥é”™","like_count":0},{"had_liked":false,"id":97598,"user_name":"hlz-123","can_delete":false,"product_type":"c1","uid":1433586,"ip_address":"","ucode":"B7E5EF0C260BD2","user_header":"","comment_is_top":false,"comment_ctime":1558705787,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1558705787","product_id":100026901,"comment_content":"ç¬¬äºŒé—®è§£å†³æ–¹æ¡ˆï¼Œåœ¨ç½‘ç›˜ä¸Šå»ºç«‹ä¸¤ä¸ªæ–‡ä»¶ï¼Œserver.jsonï¼ˆå­˜æ”¾å‘é€æ¬¡æ•°ï¼‰å’Œclient.jsonï¼ˆå­˜æ”¾æ¥æ”¶æ¬¡æ•°ï¼‰ï¼Œå»ºç«‹ä¸¤ä¸ªæ–‡ä»¶æ˜¯é˜²æ­¢è¯»å†™å†²çªå’Œè¦†ç›–æ•°æ®ã€‚serveræ¯å‘é€ä¸€æ¬¡æ•°æ®ï¼Œæ¬¡æ•°+1ï¼Œclientæ¯æ¥æ”¶ä¸€æ¬¡æ•°æ®ï¼Œæ¬¡æ•°+1ï¼Œå½“å‘é€æ¬¡æ•°&lt;=æ¥æ”¶æ¬¡æ•°ï¼Œå‘é€æ•°æ®ï¼Œå½“å‘é€æ¬¡æ•°&gt;æ¥æ”¶æ¬¡æ•°ï¼Œæ¥æ”¶æ•°æ®ã€‚<br>#server.py<br>import jsons<br>server={<br>    &#39;filename&#39;:&#39;file&#39; #å†™å…¥ç½‘ç›˜çš„æ–‡ä»¶åç§°<br>    &#39;sentcount&#39;: 0     #å†™å…¥ç½‘ç›˜çš„æ¬¡æ•°<br>}<br>while True:<br>    #é¦–å…ˆè¯»å–ç½‘ç›˜ä¸Šserver.jsonå’Œclient.jsonæ–‡ä»¶<br>    with open(&#39;server.json&#39;, &#39;r&#39;) as fin:<br>        original_server= json.load(fin)<br>    <br>    with open(&#39;client.json&#39;, &#39;r&#39;) as fin:<br>         original_client = json.load(fin)<br><br>    # å‘é€æ¬¡æ•° &lt;= æ¥æ”¶æ¬¡æ•°ï¼Œå‘ç½‘ç›˜ä¼ é€æ•°æ®<br>    if server[&#39;sentcount&#39;]&lt;=client[&#39;receivecount&#39;]:<br>        with open(&#39;netdisk&#39;,&#39;w&#39;) as fout:<br>            file.write(string)<br>        <br>        #å‘é€æ¬¡æ•°+1ï¼Œå¹¶å†™å…¥ç½‘ç›˜<br>        server[&#39;sentcount&#39;]+=1<br>        with open(&#39;server.json&#39;,&#39;w&#39;) as fout:<br>            server_str=json.dump(server,fout)<br>            <br>        #å¦‚æœæ–‡ä»¶å…¨éƒ¨ä¼ é€å®Œæ¯•ï¼Œç»ˆæ­¢å¾ªç¯<br>        if file ==None:<br>            break<br><br># server.py<br>import jsons<br>client = {<br>    &#39;filename&#39;: &#39;file&#39;  # è¯»å‡ºç½‘ç›˜çš„æ–‡ä»¶åç§°<br>                &#39;receivecount&#39;: 0  # è¯»å‡ºç½‘ç›˜çš„æ¬¡æ•°<br>}<br><br>while True:<br>    #æ¯æ¬¡è¯»æ–‡ä»¶å‰ï¼Œä¼‘çœ ä¸€æ®µæ—¶é—´<br>    sleep()<br>    # é¦–å…ˆè¯»å–ç½‘ç›˜ä¸Šserver.jsonå’Œclient.jsonæ–‡ä»¶<br>    with open(&#39;server.json&#39;, &#39;r&#39;) as fin:<br>        original_server = json.load(fin)<br><br>    with open(&#39;client.json&#39;, &#39;r&#39;) as fin:<br>        original_client = json.load(fin)<br><br>    # å‘é€æ¬¡æ•° &gt; æ¥æ”¶æ¬¡æ•°ï¼Œè¯»ç½‘ç›˜æ•°æ®<br>    if server[&#39;sentcount&#39;] &gt; client[&#39;receivecount&#39;]:<br>        with open(&#39;netdisk&#39;, &#39;r&#39;) as fin:<br>            file.read()<br><br>        # è¯»å–æ¬¡æ•°+1ï¼Œå¹¶å†™å…¥ç½‘ç›˜<br>        client[&#39;receivecount&#39;] += 1<br>        with open(&#39;client.json&#39;, &#39;w&#39;) as fout:<br>            client_str = json.dump(client, fout)<br>        # å¦‚æœæ–‡ä»¶å…¨éƒ¨æ¥æ”¶å®Œæ¯•ï¼Œç»ˆæ­¢å¾ªç¯<br>        if file == None:<br>            break<br>        ","like_count":0},{"had_liked":false,"id":97531,"user_name":"William","can_delete":false,"product_type":"c1","uid":1241365,"ip_address":"","ucode":"4499F99B180102","user_header":"https://static001.geekbang.org/account/avatar/00/12/f1/15/8fcf8038.jpg","comment_is_top":false,"comment_ctime":1558688770,"is_pvip":true,"discussion_count":0,"race_medal":2,"score":"1558688770","product_id":100026901,"comment_content":"ç¬¬ä¸€é—®åˆ©ç”¨ collections.defaultdict, é•¿è§è¯†äº†ï¼Œå¸Œæœ›è€å¸ˆå¯ä»¥å‰–æä¸€ä¸‹å…¶å†…éƒ¨å®ç°åŸç†ï¼Œä¸ºä»€ä¹ˆèƒ½å¤„ç†å¤§é‡æ–‡æœ¬è€Œä¸å†…å­˜æ³„æ¼ã€‚<br>ç¬¬äºŒé¢˜æœ‰æ„æ€ï¼Œå­¦ä¼šPythonçœŸçš„æ˜¯å¯ä»¥ä¸ºæ‰€æ¬²ä¸º!!!","like_count":0},{"had_liked":false,"id":97436,"user_name":"Adam","can_delete":false,"product_type":"c1","uid":1305633,"ip_address":"","ucode":"338BA720880E4F","user_header":"https://static001.geekbang.org/account/avatar/00/13/ec/21/b0fe1bfd.jpg","comment_is_top":false,"comment_ctime":1558668862,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1558668862","product_id":100026901,"comment_content":"è¯é¢‘ç»Ÿè®¡åº”è¯¥å¯ä»¥ç”¨MRJobæ¡†æ¶æ¥å†™ã€‚","like_count":0},{"had_liked":false,"id":97423,"user_name":"é˜¿å¤å„¿00","can_delete":false,"product_type":"c1","uid":1542867,"ip_address":"","ucode":"4A276EEF4AC9D6","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/OAykKXiaicxfyk4qicIA0XO3QGicogukYNCBoickRVFZrCxvCav0Jyv7Ax9twWH4qkCWFuSsyDltsONicCKmAv3GZYmQ/132","comment_is_top":false,"comment_ctime":1558667439,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1558667439","product_id":100026901,"comment_content":"è€å¸ˆæˆ‘çš„è¿™æ ·å¯ä»¥å—ï¼Ÿ<br>word_dict_sum = dict()<br>with open(&#39;file_word.txt&#39;,&#39;r&#39;) as f:<br>    while True:<br>        line = f.readline()<br>        if not line:<br>            break<br>        word_dict = parse(line)<br>        for key,value in word_dict.items():<br>            if key in word_dict_sum:<br>                word_dict_sum[key] += value<br>            else:<br>                word_dict_sum[key] =value<br><br>sorted_word_cnt = sorted(word_dict_sum.items(),key=lambda x:x[1],reverse=True)<br>print(sorted_word_cnt)","like_count":0},{"had_liked":false,"id":97285,"user_name":"Hoo-Ah","can_delete":false,"product_type":"c1","uid":1306913,"ip_address":"","ucode":"823093A6C7DEE7","user_header":"https://static001.geekbang.org/account/avatar/00/13/f1/21/52e8267b.jpg","comment_is_top":false,"comment_ctime":1558628789,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1558628789","product_id":100026901,"comment_content":"æ‰“å¡ï¼Œå­¦åˆ°äº†defaultdict","like_count":0},{"had_liked":false,"id":97258,"user_name":"hlz-123","can_delete":false,"product_type":"c1","uid":1433586,"ip_address":"","ucode":"B7E5EF0C260BD2","user_header":"","comment_is_top":false,"comment_ctime":1558621631,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1558621631","product_id":100026901,"comment_content":"ç¬¬ä¸€é¢˜ç­”æ¡ˆå¦‚ä¸‹ï¼Œç¬¬äºŒé¢˜è¿˜åœ¨è€ƒè™‘<br>from collections import Counter<br>import re<br>#åˆå§‹åŒ–å•è¯è®¡æ•°å˜é‡<br>wordcount=Counter()<br>#å®šä¹‰æ–‡ä»¶è®¿é—®è·¯å¾„<br>pathin=r&#39;E:\\hlz\\temp\\python\\temp\\in.txt&#39;<br>with open(pathin, mode=&quot;r&quot;,encoding=&#39;utf-8&#39;) as f:<br>    for line in f:<br>        #å»æ‰æ ‡ç‚¹ç¬¦å·å’Œæ¢è¡Œç¬¦ï¼Œä¿ç•™å•è¯å’Œç©ºæ ¼<br>        line=re.sub(r&#39;[^\\w ]&#39;,&#39;&#39;,line)<br>        #å­—æ¯éƒ½è½¬ä¸ºå°å†™<br>        line=line.lower()<br>        #ç”Ÿæˆå•è¯è¡¨<br>        word_list=line.split(&#39; &#39;)<br>        #å•è¯è®¡æ•°<br>        wordcount.update(word_list)<br>#æ˜¾ç¤ºæ•°æ®<br>print(&#39;wordcount={}&#39;.format(wordcount))","like_count":0},{"had_liked":false,"id":97231,"user_name":"........","can_delete":false,"product_type":"c1","uid":1236198,"ip_address":"","ucode":"D54E7F428E7F49","user_header":"https://static001.geekbang.org/account/avatar/00/12/dc/e6/ea4b2c10.jpg","comment_is_top":false,"comment_ctime":1558615817,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1558615817","product_id":100026901,"comment_content":"2. <br>server.py ç”¨äºè¯»å–æœ¬åœ°æ•°æ®ï¼Œå†™å…¥ç½‘ç›˜ï¼Œè¾¾åˆ°5Gåï¼Œæš‚åœï¼Œç­‰å¾…clientç«¯çš„æ¶ˆæ¯<br>client.py è¯»å–ç½‘ç›˜æ•°æ®ï¼Œå†™å…¥æœ¬åœ°ï¼Œåˆ é™¤æ•°æ®ï¼Œå®Œæˆåï¼Œå‘server.pyå‘é€æ¶ˆæ¯","like_count":0},{"had_liked":false,"id":97221,"user_name":"æ˜¥ä¹‹ç»¿é‡","can_delete":false,"product_type":"c1","uid":1057216,"ip_address":"","ucode":"296003F7D2B086","user_header":"https://static001.geekbang.org/account/avatar/00/10/21/c0/38816c31.jpg","comment_is_top":false,"comment_ctime":1558614590,"is_pvip":false,"replies":[{"id":"34771","content":"è°¢è°¢å›å¤ï¼Œä»£ç ä¸ºäº†ç²¾ç®€å’Œæ¸…æ™°å¹¶æ²¡æœ‰åŠ ä¸Šé”™è¯¯å¤„ç†ï¼Œæˆ‘ä»¬ä¼šåœ¨éšåçš„ç« èŠ‚è¯¦è§£ç¼–ç¨‹è§„èŒƒå’Œé”™è¯¯å¤„ç†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"é«˜å±±æµæ°´","uid":"1513504","ctime":1558631260,"ip_address":"","comment_id":97221,"utype":1}],"discussion_count":1,"race_medal":1,"score":"1558614590","product_id":100026901,"comment_content":"è€å¸ˆï¼Œæˆ‘çœ‹ä½ çš„ç¤ºä¾‹ä»£ç ä¸­ä¹Ÿæ²¡æœ‰é”™è¯¯å¤„ç†å•Šï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1513504,"avatar":"https://static001.geekbang.org/account/avatar/00/17/18/20/75ea3b20.jpg","nickname":"é«˜å±±æµæ°´","note":"","ucode":"71E513B5937481","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451184,"discussion_content":"è°¢è°¢å›å¤ï¼Œä»£ç ä¸ºäº†ç²¾ç®€å’Œæ¸…æ™°å¹¶æ²¡æœ‰åŠ ä¸Šé”™è¯¯å¤„ç†ï¼Œæˆ‘ä»¬ä¼šåœ¨éšåçš„ç« èŠ‚è¯¦è§£ç¼–ç¨‹è§„èŒƒå’Œé”™è¯¯å¤„ç†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558631260,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":97208,"user_name":"å°èƒ–","can_delete":false,"product_type":"c1","uid":1022958,"ip_address":"","ucode":"1B8D884D254070","user_header":"https://static001.geekbang.org/account/avatar/00/0f/9b/ee/8950c240.jpg","comment_is_top":false,"comment_ctime":1558611045,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1558611045","product_id":100026901,"comment_content":"#--*-- coding:utf-8 --*--<br>import re<br><br># ä½ ä¸ç”¨å¤ªå…³å¿ƒè¿™ä¸ªå‡½æ•°<br>def parse(text):<br>    # ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼å»é™¤æ ‡ç‚¹ç¬¦å·å’Œæ¢è¡Œç¬¦<br>    text = re.sub(r&#39;[^\\w ]&#39;, &#39;&#39;, text)<br><br>    # è½¬ä¸ºå°å†™<br>    text = text.lower()<br>    <br>    # ç”Ÿæˆæ‰€æœ‰å•è¯çš„åˆ—è¡¨<br>    word_list = text.split(&#39; &#39;)<br>    <br>    # å»é™¤ç©ºç™½å•è¯<br>    word_list = filter(None, word_list)<br>    <br>    # ç”Ÿæˆå•è¯å’Œè¯é¢‘çš„å­—å…¸<br>    word_cnt = dict()<br>    for word in word_list:<br>        if word not in word_cnt:<br>            word_cnt[word] = 0<br>        word_cnt[word] += 1<br>    return word_cnt<br><br>total_word_cnt_dict = dict()<br><br>with open(&#39;in2.txt&#39;, &#39;r&#39;) as fin:<br>    one_read_lines_count = 1000<br>    while True:<br>        mutil_lines = &quot;&quot;<br>        count = 1<br>        while count % one_read_lines_count != 0:<br>            one_line = fin.readline()<br>            if not one_line:<br>                break<br>            mutil_lines += one_line + &quot; &quot;<br>            count += 1<br><br>        if mutil_lines:<br>            word_cnt_dict = parse(mutil_lines)<br>            for word in word_cnt_dict.keys():<br>                if word not in total_word_cnt_dict:<br>                    total_word_cnt_dict[word] = 0<br>                total_word_cnt_dict[word] += word_cnt_dict[word]<br><br>        else:<br>            break<br><br>total_sorted_word_cnt = sorted(total_word_cnt_dict.items(), key=lambda kv: kv[1], reverse=True)<br><br>with open(&#39;out2.txt&#39;, &#39;w&#39;) as fout:<br>    for word, freq in total_sorted_word_cnt:<br>        fout.write(&#39;{} {}\\n&#39;.format(word, freq))<br><br>","like_count":0},{"had_liked":false,"id":97159,"user_name":"yshan","can_delete":false,"product_type":"c1","uid":1136788,"ip_address":"","ucode":"A2ECDCDA52B8EE","user_header":"https://static001.geekbang.org/account/avatar/00/11/58/94/c8bc2b59.jpg","comment_is_top":false,"comment_ctime":1558599406,"is_pvip":false,"replies":[{"id":"34772","content":"åŠ æ²¹ğŸ’ª","user_name":"ä½œè€…å›å¤","user_name_real":"é«˜å±±æµæ°´","uid":"1513504","ctime":1558631276,"ip_address":"","comment_id":97159,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1558599406","product_id":100026901,"comment_content":"ç»§ç»­æ‰“å¼€ï¼Œç»§ç»­å­¦ä¹ ","like_count":0,"discussions":[{"author":{"id":1513504,"avatar":"https://static001.geekbang.org/account/avatar/00/17/18/20/75ea3b20.jpg","nickname":"é«˜å±±æµæ°´","note":"","ucode":"71E513B5937481","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451159,"discussion_content":"åŠ æ²¹ğŸ’ª","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558631276,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":97153,"user_name":"catshitfive","can_delete":false,"product_type":"c1","uid":1542973,"ip_address":"","ucode":"E030B61F3D0811","user_header":"https://static001.geekbang.org/account/avatar/00/17/8b/3d/2a3b67f8.jpg","comment_is_top":false,"comment_ctime":1558598553,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1558598553","product_id":100026901,"comment_content":"ç¬¬ä¸€é¢˜ï¼š<br>def simple_nlp(local_path):<br>    dd=defaultdict(int)<br>    with open(local_path,&#39;r&#39;,encoding=&#39;utf8&#39;) as fin:<br>        while True:<br>            sentence=fin.readline()<br>            if sentence:<br>                sentence=re.sub(&#39;[^\\w ]&#39;,&#39;&#39;,sentence).lower()<br>                for word in sentence.split(&#39; &#39;):<br>                    dd[word]+=1<br>            else:<br>                break<br>    return sorted(dd.items(),key=lambda x:x[1],reverse=True)<br>result=simple_nlp(&#39;I had a dream.txt&#39;)<br>print(result)<br><br>ç¬¬äºŒé¢˜ fork è€å¸ˆgithub code (#^.^#)ï¼","like_count":0},{"had_liked":false,"id":97121,"user_name":"å¤œè¡Œ","can_delete":false,"product_type":"c1","uid":1536143,"ip_address":"","ucode":"6EC8A7E044D70F","user_header":"https://static001.geekbang.org/account/avatar/00/17/70/8f/7a70d10f.jpg","comment_is_top":false,"comment_ctime":1558591879,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1558591879","product_id":100026901,"comment_content":"welcome_str = &#39;Welcome to the matrix {prefix} {name}.&#39;<br>welcome_dic = {<br>    &#39;prefix&#39;: &#39;Mr.&#39;,<br>    &#39;name&#39;: &quot;jack&quot;<br>}<br><br>print(&#39;authorizing...&#39;)<br>print(**welcome_dic)<br>print(welcome_str.format(**welcome_dic))<br>è¯·é—®ä¸€ä¸‹ï¼Œè¿™ä¸ª**welcome_dicè¿™ä¸ªå‚æ•°ä¸ºå•¥å¯ä»¥è¿™æ ·ç”¨","like_count":0},{"had_liked":false,"id":97100,"user_name":"ææ˜‚çº³å¤š.å¥¥æ–¯ç‰¹æ´›å¤«æ–¯åŸº","can_delete":false,"product_type":"c1","uid":1445486,"ip_address":"","ucode":"3E2B76117ABBAB","user_header":"https://static001.geekbang.org/account/avatar/00/16/0e/6e/3d3661c3.jpg","comment_is_top":false,"comment_ctime":1558588280,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1558588280","product_id":100026901,"comment_content":"import re<br>from collections import Counter<br>with open(r&#39;d:&#47;tmp&#47;ini.txt&#39;) as f:<br>    l=sum((Counter(re.split(r&#39;[^\\w\\&#39;]+&#39;,line.strip().lower())) for line in f),Counter())<br>print(l)","like_count":0},{"had_liked":false,"id":97097,"user_name":"ææ˜‚çº³å¤š.å¥¥æ–¯ç‰¹æ´›å¤«æ–¯åŸº","can_delete":false,"product_type":"c1","uid":1445486,"ip_address":"","ucode":"3E2B76117ABBAB","user_header":"https://static001.geekbang.org/account/avatar/00/16/0e/6e/3d3661c3.jpg","comment_is_top":false,"comment_ctime":1558587158,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1558587158","product_id":100026901,"comment_content":"import re<br>from collections import Counter<br>l=Counter()<br>with open(r&#39;d:&#47;tmp&#47;ini.txt&#39;) as f:<br>    for line in f:<br>        l+=Counter(re.split(r&#39;[^\\w\\&#39;]+&#39;,line.strip().lower()))<br>print(l)","like_count":0},{"had_liked":false,"id":97037,"user_name":"å¤œæœˆä¸æŒ‚ç§‘","can_delete":false,"product_type":"c1","uid":1543651,"ip_address":"","ucode":"9D358B176E5CA9","user_header":"https://static001.geekbang.org/account/avatar/00/17/8d/e3/c3ed083a.jpg","comment_is_top":false,"comment_ctime":1558575205,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1558575205","product_id":100026901,"comment_content":"class CountParse(object):<br>    def __init__(self, file_name, str_type=&#39;\\n&#39;, read_size=20, out_name=&#39;out.txt&#39;, pattern=r&#39;[^\\w ]&#39;):<br>        &quot;&quot;&quot;<br>        :param file_name: è¯»å–æ–‡ä»¶çš„åç§°<br>        :param str_type: åˆ†å‰²çš„ç‰¹æ®Šå­—ç¬¦<br>        :param file_type: æ‰“å¼€æ–‡ä»¶çš„æ–¹å¼<br>        :param out_name: è¾“å‡ºæ–‡ä»¶çš„åç§°<br>        :param out_type: è¾“å‡ºæ–‡ä»¶çš„æ–¹å¼<br>        :param pattern: æ›¿æ¢è§„åˆ™<br>        :param read_size: è¯»å–æ–‡ä»¶çš„å¤§å°<br>        &quot;&quot;&quot;<br>        self.file_name = file_name<br>        self.str_type = str_type<br>        self.file_type = &#39;rb&#39;<br>        self.out_name = out_name<br>        self.out_type = &#39;w&#39;<br>        self.pattern = pattern<br>        self.read_size = read_size<br><br>    def __readlines(self, f, total_size):<br>        buf = &#39;&#39;<br>        size = 0<br>        while True:<br>            while self.str_type in buf:<br>                pos = buf.index(self.str_type)<br>                yield buf[:pos]<br>                buf = buf[pos + len(self.str_type):]<br>            chunk = str(f.read(self.read_size), encoding=&#39;utf8&#39;, errors=&#39;ignore&#39;)<br>            size += self.read_size<br>            sys.stdout.write(&#39;\\r&#39; + &#39;{}{}%&#39;.format(&#39;#&#39; * (100 * size &#47;&#47; total_size), 100 * size &#47;&#47; total_size))<br>            sys.stdout.flush()<br>            if not chunk:<br>                yield buf<br>                break<br>            buf += chunk<br><br>    def parse(self):<br>        count = Counter()<br>        total_size = os.path.getsize(self.file_name)<br>        print(&#39;å¼€å§‹è¯»å–æ–‡ä»¶-{}&#39;.format(self.file_name))<br>        with open(self.file_name, self.file_type) as f:<br>            for line in self.__readlines(f, total_size):<br>                <br>                count.update(Counter(filter(None, re.sub(self.pattern, &#39; &#39;, line).lower().split(&#39; &#39;))))<br>        print(&#39;\\nè¯»å–å®Œæˆ&#39;)<br>        print(&#39;å¼€å§‹ä¿å­˜æ–‡ä»¶-{}&#39;.format(self.out_name))<br>        with open(self.out_name, self.out_type, encoding=&#39;utf-8&#39;) as f:<br>            for key, value in sorted(count.items(), key=lambda x: x[1], reverse=True):<br>                # print(key, value)<br>                f.write(&#39;{key}:{value}\\n&#39;.format(key=key, value=value))<br>        print(&#39;å®Œæˆ&#39;)<br>        return","like_count":0},{"had_liked":false,"id":97005,"user_name":"æ±Ÿ","can_delete":false,"product_type":"c1","uid":1543726,"ip_address":"","ucode":"7A5378A036ABAF","user_header":"https://static001.geekbang.org/account/avatar/00/17/8e/2e/3910a53f.jpg","comment_is_top":false,"comment_ctime":1558572058,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1558572058","product_id":100026901,"comment_content":"å¿«å¿«æ›´æ–°","like_count":0},{"had_liked":false,"id":96934,"user_name":"åƒè™«å­çš„æ©™","can_delete":false,"product_type":"c1","uid":1541131,"ip_address":"","ucode":"E3D8F24E589DD2","user_header":"https://static001.geekbang.org/account/avatar/00/17/84/0b/ebcc656d.jpg","comment_is_top":false,"comment_ctime":1558538329,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1558538329","product_id":100026901,"comment_content":"å¦‚æœæ–‡ä»¶è¿‡å¤§ï¼Œé‚£ä¹ˆä¸€æ¬¡æ€§è¯»å–å¤ªè€—è´¹æ—¶é—´å’Œå†…å­˜ï¼Œæ˜¯ä¸æ˜¯åº”è¯¥ç”¨Generator Expressionæ¥æŒ‰éœ€è¯»å–å¥½ç‚¹ï¼Ÿè¯»å–å›ºå®šé•¿åº¦å¤„ç†å®Œç»§ç»­è¯»å–ï¼Œè‡³äºè¾¹ç•Œæš‚æ—¶æƒ³ä¸å‡ºå¥½åŠæ³•ï¼Œå¦‚æœæŒ‰è¡Œæ¥ç®—çš„è¯æœ€ç®€å•ï¼Œå¦‚æœæ˜¯å•è¡Œæˆ‘èƒ½æƒ³åˆ°çš„ä¹Ÿåªæœ‰æŒ‰ç©ºæ ¼æˆ–è€…æ ‡ç‚¹æ¥åˆ¤æ–­ï¼Œæˆ–è€…ç›´æ¥æŒ‰ç…§rstripåˆ†å‰²æœ€åä¸ªç©ºæ ¼ï¼Œç„¶åå¤šå‡ºæ¥çš„å­—ç”¨joinæˆ–è€…+å’Œä¸‹ä¸€æ¬¡è¦å¤„ç†çš„å­—ç¬¦è¿æ¥èµ·æ¥ã€‚<br>","like_count":0},{"had_liked":false,"id":96907,"user_name":"å¥èº«å’¸é±¼","can_delete":false,"product_type":"c1","uid":1528176,"ip_address":"","ucode":"415CBFF3F158F3","user_header":"https://static001.geekbang.org/account/avatar/00/17/51/70/68b3f0e6.jpg","comment_is_top":false,"comment_ctime":1558533456,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1558533456","product_id":100026901,"comment_content":"ç¬¬äºŒé—®<br><br>åœ¨å®¶ä¸­çš„ server.py æ–‡ä»¶æˆ‘æƒ³ä¸»è¦çš„ä½œç”¨å°±æ˜¯æ ¹æ®ç½‘ç›˜è´¦å·, æ¥æ£€æµ‹æœ¬åœ°ç”µè„‘ä¸­æ‰€è¦ä¸Šä¼ çš„æ–‡ä»¶å¹¶è®¾ç½®ä¸Šä¼ çš„æ–‡ä»¶å¤§å°ä¸è¶…è¿‡ 5GB, ä¸Šä¼ å®Œæˆåæš‚åœä¸Šä¼ , åœ¨ä¸Šä¼ ç»“æŸå, client.py æ–‡ä»¶ä¸€ç›´æ£€æµ‹ä¸Šä¼ çš„æ–‡ä»¶å¹¶ä¸”å½“æ–‡ä»¶è¾¾åˆ°ä¸€å®šçš„å¤§å°(5GB) å°±æ ¹æ®è´¦å·ä¸‹è½½æ–‡ä»¶, ä¸‹è½½æ–‡ä»¶ååœæ­¢è¿è¡Œ client.py, ç„¶å server.py æ–‡ä»¶ä½• client.py æ–‡ä»¶å†ç»§ç»­å·¥ä½œç›´åˆ°æ‰€æœ‰æ–‡ä»¶å…¨éƒ¨ä¸Šä¼ å’Œä¸‹è½½å®Œæˆå, ç»“æŸè¿è¡Œ.<br><br>åˆå­¦, èƒ¡å†™çš„æ€è·¯[æ‚è„¸]","like_count":0},{"had_liked":false,"id":96903,"user_name":"Geek_e918c5","can_delete":false,"product_type":"c1","uid":1526679,"ip_address":"","ucode":"6A1D1DF95A7E82","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/B5HfJCJtA2DGiadcJ8cia5uX3RHspWicydljOicTEPK4XpqVbEOCRwEZYCQxRCltricn8KefNPKQXrgs3A3VXe2GLUw/132","comment_is_top":false,"comment_ctime":1558532460,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1558532460","product_id":100026901,"comment_content":"æœ‰ä¸¤ä¸ªå°é—®é¢˜å¸Œæœ›è€å¸ˆå›å¤ä¸‹<br>1.æŒ‰ç…§è¯é¢‘æ’åºé‚£é‡Œï¼Œkey=lambda kv: kv[1],è¿™é‡Œçš„kvæ€ä¹ˆèƒ½ç¡®å®šæ˜¯word_cntçš„æ¯ä¸€ä¸ªé”®å€¼å¯¹å‘¢ï¼Ÿé»˜è®¤çš„å—ï¼Ÿ<br>2.for word,freq in word_and_freq:å­—å…¸é‡Œå¥½åƒä¸æ”¯æŒè¿™ç§é”®å’Œå€¼çš„è¾“å‡ºå•Šï¼Œä½†æˆ‘è¿è¡Œæ•´ä¸ªä»£ç åˆæ²¡é—®é¢˜ã€‚","like_count":0},{"had_liked":false,"id":96849,"user_name":"æ½˜ä¼šå¤§","can_delete":false,"product_type":"c1","uid":1015004,"ip_address":"","ucode":"41085C621B8BEF","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7c/dc/d9fa47b1.jpg","comment_is_top":false,"comment_ctime":1558520569,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1558520569","product_id":100026901,"comment_content":"è€å¸ˆï¼Œä¸ºä»€ä¹ˆ â€ text = re.sub(r&#39;[^\\w ]&#39; â€œ ä¸­ â€\\wâ€œ åé¢è¦åŠ ä¸Šç©ºæ ¼å•Šï¼ŒæŸ¥äº†æ­£åˆ™è¡¨è¾¾å¼çš„ç”¨æ³•ï¼Œ&quot;[]&quot;ä¸­â€^â€œ æ˜¯å–â€éâ€œï¼Œå¦‚æœåŠ ç©ºæ ¼ï¼Œåˆ™åŒ¹é…åˆ°éç©ºå­—ç¬¦ï¼Œä½†ä»£ç å®é™…è¿è¡Œçš„ç»“æœæ˜¯å¯¹çš„ï¼Œæœ‰äº›ä¸è§£ï¼Œè¯·æŒ‡ç‚¹ã€‚è°¢è°¢ï¼","like_count":0,"discussions":[{"author":{"id":2027617,"avatar":"","nickname":"Geek_e2c610","note":"","ucode":"A4E4FF065EB966","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":283287,"discussion_content":"é¿å…é‡å¤æ›¿æ¢ç©ºæ ¼","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1592230476,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1316364,"avatar":"https://static001.geekbang.org/account/avatar/00/14/16/0c/fa62ffdd.jpg","nickname":"xu","note":"","ucode":"2CF44446E085AC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":332687,"discussion_content":"subå‡½æ•°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607310816,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":96841,"user_name":"Lone","can_delete":false,"product_type":"c1","uid":1543230,"ip_address":"","ucode":"7EDE7F9407F1BF","user_header":"https://static001.geekbang.org/account/avatar/00/17/8c/3e/b4ae5ae2.jpg","comment_is_top":false,"comment_ctime":1558517890,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1558517890","product_id":100026901,"comment_content":"@lmingzhi ä¿®è®¢å<br>with open(&#39;in.txt&#39;, &#39;r&#39;) as fin:<br>    for text in fin.readline():<br>        word_cnt = parse(text, word_cnt)<br>åªä¼šè¯»å–æ–‡ä»¶çš„ä¸€è¡Œå†…å®¹å¹¶ä¸”ä¼šå°†wordæ‹†åˆ†<br>åº”è¯¥æ”¹ä¸ºï¼š<br>with open(&quot;.&#47;in.txt&quot;, &quot;r&quot;) as fin:<br>    while True:<br>        line = fin.readline()<br>        if not line:<br>            break<br>        word_cnt = parse(line, word_cnt)<br><br>å¹¶ä¸”æ²¡æœ‰å¤„ç†å•è¯è·¨è¡Œåœºæ™¯","like_count":0},{"had_liked":false,"id":96824,"user_name":"æ˜“æ‹‰ç½","can_delete":false,"product_type":"c1","uid":1525624,"ip_address":"","ucode":"56B05C4F621B3F","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epEbrWwrlSUzSxBXV401OuYGL4yveAly9ib4licXb9yqoBFIYGicqJKrzGr8iaianLZo8ZPx7X4eAltM4g/132","comment_is_top":false,"comment_ctime":1558515950,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1558515950","product_id":100026901,"comment_content":"for word in words_list:<br>            if word not in words_cnt:<br>                words_cnt[word] = 0<br>            words_cnt[word] += 1<br><br>å¤§ä½¬, è¿™é‡Œå¦‚æœwordä¸åœ¨words_cnté‡Œé¢è¿™é‡Œæ˜¯ä¸æ˜¯åº”è¯¥èµ‹å€¼1, è€Œä¸æ˜¯0, ???","like_count":0},{"had_liked":false,"id":96821,"user_name":"Lee","can_delete":false,"product_type":"c1","uid":1313515,"ip_address":"","ucode":"ED3D7200A948C3","user_header":"https://static001.geekbang.org/account/avatar/00/14/0a/eb/6d6a94d2.jpg","comment_is_top":false,"comment_ctime":1558515844,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1558515844","product_id":100026901,"comment_content":"åªæƒ³åˆ°ç”¨pandasè¯»å–ï¼Œæœ‰ä¸ªchunksizeå‚æ•°","like_count":0},{"had_liked":false,"id":96807,"user_name":"trrwxsy","can_delete":false,"product_type":"c1","uid":1524434,"ip_address":"","ucode":"2D072DB540EEE2","user_header":"https://static001.geekbang.org/account/avatar/00/17/42/d2/770edda2.jpg","comment_is_top":false,"comment_ctime":1558511972,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1558511972","product_id":100026901,"comment_content":"ç¬¬ä¸€ä¸ªï¼š<br>import re<br><br>def parse_txt(infile, outfile):<br>    word_cn_dt = {}<br>    try:<br>        fin = open(infile, &#39;r&#39;)<br>        for line in fin.readlines():<br>            if line == &#39;\\n&#39;:<br>                continue<br>            line_text = re.sub(r&#39;[^\\w ]&#39;, &#39;&#39;, line.lower())<br>            line_text = line_text.strip(&#39; &#39;)<br>            word_list = line_text.split(&#39; &#39;)<br>            for word in word_list:<br>                word_cn_dt[word] = word_cn_dt.get(word, 0) + 1<br>        word_cn_dt = sorted(word_cn_dt.items(), key=lambda kv: kv[1], reverse=True)<br>        with open(outfile, &#39;w&#39;) as fout:<br>            for word, freq in word_cn_dt:<br>                fout.write(&#39;{0} {1}\\n&#39;.format(word, freq))<br>    except Exception as ex:<br>        print(ex)<br>    finally:<br>        fin.close()<br>        <br>infile = &#39;in.txt&#39;<br>outfile = &#39;out1.txt&#39;<br><br>parse_txt(infile, outfile)","like_count":0},{"had_liked":false,"id":96748,"user_name":"å¹²å¸ƒçƒ","can_delete":false,"product_type":"c1","uid":1218173,"ip_address":"","ucode":"048ABC199D89B9","user_header":"https://static001.geekbang.org/account/avatar/00/12/96/7d/c7e8cd34.jpg","comment_is_top":false,"comment_ctime":1558496492,"is_pvip":false,"replies":[{"id":"34629","content":"ç¨åä¼šæ”¾å‡ºå“¦","user_name":"ä½œè€…å›å¤","user_name_real":"é«˜å±±æµæ°´","uid":"1513504","ctime":1558507904,"ip_address":"","comment_id":96748,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1558496492","product_id":100026901,"comment_content":"è€å¸ˆçš„githubåœ°å€æ˜¯å“ªä¸ªå‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1513504,"avatar":"https://static001.geekbang.org/account/avatar/00/17/18/20/75ea3b20.jpg","nickname":"é«˜å±±æµæ°´","note":"","ucode":"71E513B5937481","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451002,"discussion_content":"ç¨åä¼šæ”¾å‡ºå“¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558507904,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":96747,"user_name":"æ—æ³½æ¥·","can_delete":false,"product_type":"c1","uid":1148529,"ip_address":"","ucode":"E780B0E85EF38F","user_header":"https://static001.geekbang.org/account/avatar/00/11/86/71/52017f48.jpg","comment_is_top":false,"comment_ctime":1558496471,"is_pvip":false,"replies":[{"id":"34628","content":"æ±‰å­—åˆ†è¯æ˜¯å¦ä¸€ä¸ªè¯é¢˜ï¼Œä¹Ÿæ˜¯ NLP é¢†åŸŸç»å…¸çš„é—®é¢˜ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œå°±ä¸è¯¦ç»†å¤šè¯´äº†","user_name":"ä½œè€…å›å¤","user_name_real":"é«˜å±±æµæ°´","uid":"1513504","ctime":1558507894,"ip_address":"","comment_id":96747,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1558496471","product_id":100026901,"comment_content":"å¦‚æœæ˜¯æ±‰å­—ï¼Œæ€ä¹ˆæå–è¯ç»„ï¼Œæˆ–è€…äººåï¼Œæˆ–è€…ä¸“æœ‰åè¯ä»€ä¹ˆçš„ï¼Œå¤§æ¦‚æ€è·¯æ€æ ·çš„ï¼Ÿå“ªä½ç¥æœ‰æƒ³æ³•","like_count":0,"discussions":[{"author":{"id":1513504,"avatar":"https://static001.geekbang.org/account/avatar/00/17/18/20/75ea3b20.jpg","nickname":"é«˜å±±æµæ°´","note":"","ucode":"71E513B5937481","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451001,"discussion_content":"æ±‰å­—åˆ†è¯æ˜¯å¦ä¸€ä¸ªè¯é¢˜ï¼Œä¹Ÿæ˜¯ NLP é¢†åŸŸç»å…¸çš„é—®é¢˜ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œå°±ä¸è¯¦ç»†å¤šè¯´äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558507894,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":96746,"user_name":"Hurt","can_delete":false,"product_type":"c1","uid":1050946,"ip_address":"","ucode":"DCE7428CCF08EF","user_header":"https://static001.geekbang.org/account/avatar/00/10/09/42/1f762b72.jpg","comment_is_top":false,"comment_ctime":1558496389,"is_pvip":false,"replies":[{"id":"34627","content":"ç¨åä¼šæ”¾å‡ºå“¦","user_name":"ä½œè€…å›å¤","user_name_real":"é«˜å±±æµæ°´","uid":"1513504","ctime":1558507856,"ip_address":"","comment_id":96746,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1558496389","product_id":100026901,"comment_content":"githubåœ°å€æ˜¯å¤šå°‘å•Š","like_count":0,"discussions":[{"author":{"id":1513504,"avatar":"https://static001.geekbang.org/account/avatar/00/17/18/20/75ea3b20.jpg","nickname":"é«˜å±±æµæ°´","note":"","ucode":"71E513B5937481","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451000,"discussion_content":"ç¨åä¼šæ”¾å‡ºå“¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558507856,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":96735,"user_name":"ä¸è§é£åˆ€","can_delete":false,"product_type":"c1","uid":1221078,"ip_address":"","ucode":"2490E8D608CECA","user_header":"https://static001.geekbang.org/account/avatar/00/12/a1/d6/9d99e5ef.jpg","comment_is_top":false,"comment_ctime":1558494695,"is_pvip":false,"replies":[{"id":"34626","content":"å‰é¢è¯´çš„éƒ½å¯¹ï¼Œæœ€åä¸€å¥ï¼Œâ€œç„¶åä¸‹ä¸€æ¬¡å°±ä»ä¸Šæ¬¡å»æ‰çš„æœ€åä¸€é¡¹é‚£ä¸ªä½ç½®å¼€å§‹æŒ‰å­—æ•°è¯»å–â€ï¼Œå‡å¦‚ä¸€ä¸ªå•è¯æ¨ªè·¨ä¸‰å€ä½ æ¯æ¬¡è¯»å–çš„é•¿åº¦å‘¢ï¼Ÿä½ çš„ä»£ç ä¼šä¸ä¼šæ­»å¾ªç¯ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"é«˜å±±æµæ°´","uid":"1513504","ctime":1558507847,"ip_address":"","comment_id":96735,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1558494695","product_id":100026901,"comment_content":"æˆ‘è§‰å¾—ä¸€è¡Œä¸€è¡Œè¯»ä¸å¤ªå¥½<br>å› ä¸ºæ¢è¡Œæ˜¯ä¼šæŠŠå•è¯åˆ†å‰²çš„ <br>æˆ‘è§‰å¾—åº”è¯¥æ˜¯æŒ‰å­—æ•°è¯»  <br>ç„¶åspiltåˆ†å‰²å•è¯ä¹‹é—´çš„ç©ºæ ¼ ç”Ÿæˆä¸€ä¸ªlist<br>ç„¶åå»æ‰listçš„æœ€åä¸€é¡¹  è®°ä½è¿™ä¸€é¡¹çš„é•¿åº¦<br>ç”¨counterç»Ÿè®¡list<br>ç„¶åä¸‹ä¸€æ¬¡å°±ä»ä¸Šæ¬¡å»æ‰çš„æœ€åä¸€é¡¹é‚£ä¸ªä½ç½®å¼€å§‹æŒ‰å­—æ•°è¯»å–","like_count":0,"discussions":[{"author":{"id":1513504,"avatar":"https://static001.geekbang.org/account/avatar/00/17/18/20/75ea3b20.jpg","nickname":"é«˜å±±æµæ°´","note":"","ucode":"71E513B5937481","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":450994,"discussion_content":"å‰é¢è¯´çš„éƒ½å¯¹ï¼Œæœ€åä¸€å¥ï¼Œâ€œç„¶åä¸‹ä¸€æ¬¡å°±ä»ä¸Šæ¬¡å»æ‰çš„æœ€åä¸€é¡¹é‚£ä¸ªä½ç½®å¼€å§‹æŒ‰å­—æ•°è¯»å–â€ï¼Œå‡å¦‚ä¸€ä¸ªå•è¯æ¨ªè·¨ä¸‰å€ä½ æ¯æ¬¡è¯»å–çš„é•¿åº¦å‘¢ï¼Ÿä½ çš„ä»£ç ä¼šä¸ä¼šæ­»å¾ªç¯ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558507847,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":96728,"user_name":"ç¨‹åºå‘˜äººç”Ÿ","can_delete":false,"product_type":"c1","uid":1113668,"ip_address":"","ucode":"C5C5073D89AAA2","user_header":"https://static001.geekbang.org/account/avatar/00/10/fe/44/3e3040ac.jpg","comment_is_top":false,"comment_ctime":1558493555,"is_pvip":false,"replies":[{"id":"34624","content":"ç¬¬äºŒé¢˜å¯ä»¥é¿å¼€çº¿ç¨‹çš„ï¼Œå¯ä»¥å†æƒ³æƒ³ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"é«˜å±±æµæ°´","uid":"1513504","ctime":1558507769,"ip_address":"","comment_id":96728,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1558493555","product_id":100026901,"comment_content":"ç¬¬ä¸€é¢˜ï¼Œåˆæ­¥æ€è·¯æ˜¯ï¼Œç»™readå‡½æ•°è®¾å®šä¸€ä¸ªsizeï¼Œè¡¨ç¤ºè¯»å–æœ€å¤§é•¿åº¦ã€‚ï¼ˆè€å¸ˆæ–‡ä¸­å·²æåˆ°ï¼‰ç­‰ä¸€ä¸‹å†™æ®µä»£ç è¯•è¯•<br>ç¬¬äºŒé¢˜ï¼Œä¼¼ä¹è¦æ¶‰åŠåˆ°çº¿ç¨‹æ–¹é¢çš„å†…å®¹......","like_count":0,"discussions":[{"author":{"id":1513504,"avatar":"https://static001.geekbang.org/account/avatar/00/17/18/20/75ea3b20.jpg","nickname":"é«˜å±±æµæ°´","note":"","ucode":"71E513B5937481","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":450989,"discussion_content":"ç¬¬äºŒé¢˜å¯ä»¥é¿å¼€çº¿ç¨‹çš„ï¼Œå¯ä»¥å†æƒ³æƒ³ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558507769,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":96700,"user_name":"lmingzhi","can_delete":false,"product_type":"c1","uid":1014489,"ip_address":"","ucode":"72DBAF4FD184AF","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7a/d9/4feb4006.jpg","comment_is_top":false,"comment_ctime":1558489222,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1558489222","product_id":100026901,"comment_content":"ä¿®è®¢~~<br>import re<br>def parse(text, word_cnt):<br>    # è½¬ä¸ºå°å†™<br>    text = text.lower()    <br>    # ç”Ÿæˆæ‰€æœ‰å•è¯çš„åˆ—è¡¨<br>    word_list = re.findall(r&#39;\\w+&#39;, text) <br>    # æ›´æ–°å•è¯å’Œè¯é¢‘çš„å­—å…¸<br>    for word in word_list:<br>        word_cnt[word] = word_cnt.get(word, 0) + 1<br>    return word_cnt<br><br># åˆå§‹åŒ–å­—å…¸<br>word_cnt = dict()<br>with open(&#39;in.txt&#39;, &#39;r&#39;) as fin:<br>    # line.readline() å’Œ .readlines()ä¹‹é—´çš„å·®å¼‚æ˜¯åè€…ä¸€æ¬¡è¯»å–æ•´ä¸ªæ–‡ä»¶ï¼Œ<br>    # è±¡ .read()ä¸€æ ·ã€‚.readlines()è‡ªåŠ¨å°†æ–‡ä»¶å†…å®¹åˆ†ææˆä¸€ä¸ªè¡Œçš„åˆ—è¡¨ï¼Œ<br>    # å¦ä¸€æ–¹é¢ï¼Œ.readline()æ¯æ¬¡åªè¯»å–ä¸€è¡Œï¼Œé€šå¸¸æ¯” .readlines()æ…¢å¾—å¤šã€‚<br>    # ä»…å½“æ²¡æœ‰è¶³å¤Ÿå†…å­˜å¯ä»¥ä¸€æ¬¡è¯»å–æ•´ä¸ªæ–‡ä»¶æ—¶ï¼Œæ‰åº”è¯¥ä½¿ç”¨.readline()ã€‚  <br>    for text in fin.readline():<br>        word_cnt = parse(text, word_cnt)<br>        print(len(word_cnt))<br><br># æŒ‰ç…§è¯é¢‘æ’åº<br>word_and_freq = sorted(word_cnt.items(), key=lambda kv: kv[1], reverse=True)<br><br># å¯¼å‡º<br>with open(&#39;out.txt&#39;, &#39;w&#39;) as fout:<br>    for word, freq in word_and_freq:<br>        fout.write(&#39;{} {}\\n&#39;.format(word, freq))","like_count":0},{"had_liked":false,"id":96628,"user_name":"Geek_212b85","can_delete":false,"product_type":"c1","uid":1000454,"ip_address":"","ucode":"2F89E94337285F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/44/06/4372fd00.jpg","comment_is_top":false,"comment_ctime":1558482047,"is_pvip":false,"replies":[{"id":"34615","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"é«˜å±±æµæ°´","uid":"1513504","ctime":1558506536,"ip_address":"","comment_id":96628,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1558482047","product_id":100026901,"comment_content":"æ‰“å¡ï¼Œåˆå­¦è€…","like_count":0,"discussions":[{"author":{"id":1513504,"avatar":"https://static001.geekbang.org/account/avatar/00/17/18/20/75ea3b20.jpg","nickname":"é«˜å±±æµæ°´","note":"","ucode":"71E513B5937481","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":450941,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558506536,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}